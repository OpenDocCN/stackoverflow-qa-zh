# StackOverflow 问答 11453000-11453999

# crystal-reports - 水晶报表 - 某些子报表信息

> ID：11453001
> 
> 赞同：0
> 
> 时间：2012-07-12T13:34:35.773
> 
> 标签：crystal-reports, report, subreport

我在 Crystal Reports 中工作，试图从子报表中访问某些地址信息。我在主报告中有一个客户报告列表，在子报告中我有一堆邮件标签。我需要为每个客户报告获取某个邮寄标签。到目前为止，我已经设法在两者之间共享一个字段，但它总是返回子报表中的第一个报表。

IE 客户端 10 的报告需要有客户端 10 的邮件标签，而不是客户端 1。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:30:35.010

我猜您创建了一个公式并将其放在组标题中。

创建一个这样的公式并将其放在详细信息部分。

```
whileprintingrecords;
shared stringvar x;
if <this is the label I need> x := {LABEL}; 
```

**编辑** 如果您总是想要子报告中的最终邮寄标签，只需使用这个更简单的公式。任何未抑制的细节部分或页脚部分都应该可以解决问题。该公式将在引用它的每个部分中进行评估；最终的评价是你真正关心的唯一一个。

```
whileprintingrecords;
shared stringvar x := {LABEL}; 
```

# python - scipy.special.erf 使用 0.j 引发运行时警告

> ID：11453004
> 
> 赞同：0
> 
> 时间：2012-07-12T13:34:40.557
> 
> 标签：python, algorithm, scipy

```
>>> from scipy.special import erf
>>> print (erf(0.j))
__main__:1: RuntimeWarning: invalid value encountered in erf
0j 
```

这个警告只打印一次（即使我这样做`scipy.special.errprint(0)`了），但我不明白为什么要打印它。真的，`0.j`是相同的数字`0.`，它没有问题。

我想有两个问题：1）有没有办法抑制这个警告？2）这个警告是一个错误，还是我错过了什么？

**更新**

我（想我）在 scipy 源代码树中追踪了错误函数。它位于：`scipy/special/specfun/specfun.f`( `subroutine CERROR`)。此函数不会引发警告（从简单的 fortran 程序调用时它工作正常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:01:17.020

您可以使用以下命令关闭警告[`numpy.seterr`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)：

```
 numpy.seterr(invalid='ignore') 
```

* * *

`0.j`不一样`0.`。前者是一个复数，后者只是一个浮点数。

```
>>> type(0.j)
<class 'complex'>
>>> type(0.)
<class 'float'> 
```

复数 erf 和实数 erf 使用不同的算法，例如

```
>>> erf(complex(1))
(0.84270079294971512+0j)
>>> erf(1)
0.84270079294971478 
```

由于真实erf和复数erf使用不同的算法，所以复数erf中的一些警告不会出现在真实erf中。如果我们检查[Fortran 实现](https://github.com/scipy/scipy/blob/master/scipy/special/specfun/specfun.f#L2440)，我们会发现：

```
 SUBROUTINE CERROR(Z,CER)
C   ...
    Z1=Z
C   ...
    CS=Z1
    CR=Z1
    DO 10 K=1,120
        CR=CR*Z1*Z1/(K+0.5D0)
        CS=CS+CR
        IF (CDABS(CR/CS).LT.1.0D-15) GO TO 15
10  CONTINUE 
```

特别是Z = 0 + 0j，所以Z1 = 0 + 0j，所以循环前CS = CR = 0 + 0j。在循环的第一次迭代中，我们得到：

*   CR ← CR × Z1 ² / (K + 0.5) = 0 + 0j
*   CS ← CS + CR = 0 + 0j

然后条件需要CR/CS，这是一个0/0，这是一个无效的浮点运算，因此是警告。

这是一个小问题，可以通过在开头检查 Z == 0 来轻松“修复”。如果您发现此行为不稳定，您可以[报告错误。](http://www.scipy.org/BugReport)

# oracle - 在 oracle 中使用 select 查询避免重复列数据

> ID：11453006
> 
> 赞同：0
> 
> 时间：2012-07-12T13:34:42.603
> 
> 标签：oracle, select

我需要避免重复数据。实际上我写了查询

```
select f.fyeardescr, p.paymnthid, p.paymnthnm
  from financialyear f, mnthpll p
 where f.status = 'A' and p.fyearcd = f.fyearcd 
```

数据显示数据，如

![在此处输入图像描述](../Images/2ca726be5aede3f2aabc770be4c4be68.png)

但我需要喜欢

![在此处输入图像描述](../Images/0a921a166b9d9bf4e420adc608ae9342.png)

如何在 oracle.Plz 中实现 sql 查询帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:46:29.517

你可以使用分析函数滞后

```
select 
      CASE
        WHEN f.fyeardescr = lag(f.fyeardescr) over (order by f.fyeardescr)
        THEN NULL
        ELSE f.fyeardescr
      END 
                        AS fyeardescr
  , p.paymnthid
  , p.paymnthnm
  from financialyear f, mnthpll p
 where f.status = 'A' and p.fyearcd = f.fyearcd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:54:10.903

使用窗口函数：

```
select case when (row_number() over (partition by fyeardescr order by paymnthid)) = 1
        then fyeardescr
        else null
       end fyeardescr
     , p.paymnthid, p.paymnthnm
  from financialyear f, mnthpll p
 where f.status = 'A' and p.fyearcd = f.fyearcd
; 
```

但正如 tbone 已经指出的那样：这种格式通常是您的报告/显示工具/图层而不是 SQL 的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:47:26.890

您可能想研究[Pentaho 报告](http://www.pentaho.com/explore/pentaho-business-analytics/)服务或 Jasper 报告（还有很多其他的）您可能会发现您的报告要求将变得比 SQL 格式处理的复杂得多。

# python - django - 是否有一个插件/库等可以过滤掉输入的网址？

> ID：11453014
> 
> 赞同：1
> 
> 时间：2012-07-12T13:35:05.117
> 
> 标签：python, django

如果我正在使用 django，并且用户向我的网站提交评论，例如，什么是最好的方法（或者有什么方法？）以编程方式“警告”一个 url 已提交，然后做一些事情那个网址？

要么“修复”它，使其不可点击，要么“标记”它，以便我在批准之前查看评论，或者给我发电子邮件说“有人提交了评论”——或者，你知道吗，提供一个钩子，这样我就可以做某事?

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:43:19.820

1.  将函数连接到**[post_save 信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)**

2.  对于 中的每个值`instance.__dict__`，**检查是否存在 url**

3.  如果存在 url，[请发送电子邮件](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs/)或**执行您想要的操作**

例如：

```
from django.db.models import signals

def check_for_url(sender, instance, created, kwargs**):
    for value in instance.__dict__.values():
        if 'http://' in value:
            # do want you want
post_save.connect(check_for_url) 
```

由于您的问题不准确，这应该会给您一些入门，您当然应该根据您的具体需求对其进行改进。

# c# - C# 遵守从 SQL 服务器中提取的字符串中的换行符

> ID：11453016
> 
> 赞同：4
> 
> 时间：2012-07-12T13:35:07.957
> 
> 标签：c#, string, newline

全部（这是回归基础！），我从 SQL Server 中提取了一串信息。字符串类似于

```
Hello, my name is Frank Butcher\n\n
and I work at Watford Car lot, 
and I am 65 years old. 
```

消息将被拉入消息框以提供有关进程的信息。我使用

```
SqlCommand cmd = new SqlCommand();
cmd.Connection = conn;
cmd.CommandTimeout = 0;
cmd.CommandText = strSQL;
strResult = cmd.ExecuteScalar().ToString(); 
```

这得到了字符串，但是当我把它放到我的文本框中时，显示的消息`\n\n`不包含所需的双换行符。

我试过使用

```
strResult = strResult.Replace("\n", Environment.NewLine); 
```

在字符串上，但这无济于事。我是不是精神错乱了，我做错了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T13:36:50.013

我假设您已经存储了一个文字反斜杠，然后是数据库中字符串中的字符“n”，而不是换行符。因此，您必须做`String.Replace`您正在做的事情。

你是*如此*接近，但你需要逃避你的反斜杠：

```
strResult = strResult.Replace("\\n", Environment.NewLine); 
```

在不转义反斜杠的情况下，编译器将 解释`\n`为换行符的特殊转义序列，因此您的行相当于“用 NewLine 替换 NewLine”（您已经发现它什么都不做）。

或者，您可以在字符串常量前加上一个`@`符号，这意味着将其视为文字：

```
strResult = strResult.Replace(@"\n", Environment.NewLine); 
```

# java - Hibernate 和 ID 生成器：在什么时候生成 id？

> ID：11453020
> 
> 赞同：0
> 
> 时间：2012-07-12T13:35:21.613
> 
> 标签：java, hibernate

我有一个类的自定义 ID 生成器。当我创建这个类的新实例并使用 .save() 将其保存到数据库时，ID 实际生成在哪一点？生成会延迟到事务提交之前，还是会在我调用 .save() 时生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:41:01.550

id是在保存时生成的。

如果您在事务中，则有两个选项提交或回滚

# jquery - jQuery 'this' 循环遍历一个表

> ID：11453022
> 
> 赞同：1
> 
> 时间：2012-07-12T13:35:23.047
> 
> 标签：jquery, html-table, this, each

我正在尝试获取当前行 ID 的值和选定单选按钮的值，该单选按钮是其中一个单元格中的一个组，但具有唯一的名称，并且该行中没有其他单选按钮。

它在行中循环正常，但我无法获得正确的语法来获取我感兴趣的值。

有一次，它会遍历每个“TD”来寻找 ID。另一方面，它说 .attr 不适用于“this”对象。

```
 function getWMarkImgs() {
       $('#wmkTable tr').each(function() {
       var v1 = $(this).tr.attr('id');
       var v2 = $(this input[name=group1]:checked).val();
       $('#dbgDIV').append('V1=' + v1 +' V2=' v2 + '<hr>');
    }); 
```

我似乎总是对“this”对象感到困难。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:37:28.903

```
function getWMarkImgs() {
       $('#wmkTable tr').each(function() {
       var v1 = $(this).attr('id');
       var v2 = $(this).find("input[name=group1]:checked").val();
       $('#dbgDIV').append('V1=' + v1 +' V2=' v2 + '<hr>');
    }); 
```

或者

```
function getWMarkImgs() {
           $('#wmkTable tr').each(function() {
           var v1 = $(this).attr('id');
           var v2 = $(this).children().children("input[name=group1]:checked").val();
           $('#dbgDIV').append('V1=' + v1 +' V2=' v2 + '<hr>');
        }); 
```

或（最好的）

```
function getWMarkImgs() {
           $('#wmkTable tr').each(function() {
           var v1 = this.id;
           var v2 = $(this).find("input[name=group1]:checked").val();
           $('#dbgDIV').append('V1=' + v1 +' V2=' v2 + '<hr>');
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:37:24.967

尝试[`find()`](http://api.jquery.com/find/)方法：

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

```
function getWMarkImgs() {
   $('#wmkTable tr').each(function() {
      var v1 = $(this).attr('id');
      var v2 = $(this).find("input[name=group1]:checked").val();
      $('#dbgDIV').append('V1=' + v1 +' V2=' v2 + '<hr>');
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:39:08.567

尝试这个

```
function getWMarkImgs() {
    var div = $('#dbgDIV');
    $('#wmkTable tr:has(input[name=group1]:checked)').each(function() {
        var me = $(this);
        var v2 = me.find('input[name=group1]').val();
        div.append('V1=' + me.attr('id') +' V2=' v2 + '<hr>');
}); 
```

# date - AdventureWorksDW 中 DimTime 或 DimDate 的替代方案？

> ID：11453025
> 
> 赞同：1
> 
> 时间：2012-07-12T13:35:31.597
> 
> 标签：date, calendar

AdventureWorksDW 数据库中的 DimTime 或 DimDate 表是否有任何免费下载替代品？我只想要这张桌子。此外，在未来 50 或 100 年会很棒。

谢谢，西姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-14T16:57:49.950

我不知道您对收到的回复是否满意，但您也可以根据您的业务需求创建自己的 DimDate 表。我基于 AdventureWorksDW212 DimDate 表结构编写了以下代码。

```
 --change [YourDatabase] to your database's name
    USE [YourDatabase] 
    GO

    --First Create the Table (dbo.DimDate)
    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

    IF OBJECT_ID('dbo.DimDate') IS NOT NULL
    DROP TABLE dbo.DimDate;

    CREATE TABLE [dbo].[DimDate](
        [DateKey] [int] NOT NULL,
        [FullDateAlternateKey] [date] NOT NULL,
        [DayNumberOfWeek] [tinyint] NOT NULL,
        [EnglishDayNameOfWeek] [nvarchar](10) NOT NULL,
        [SpanishDayNameOfWeek] [nvarchar](10) NOT NULL,
        [FrenchDayNameOfWeek] [nvarchar](10) NOT NULL,
        [DayNumberOfMonth] [tinyint] NOT NULL,
        [DayNumberOfYear] [smallint] NOT NULL,
        [WeekNumberOfYear] [tinyint] NOT NULL,
        [EnglishMonthName] [nvarchar](10) NOT NULL,
        [SpanishMonthName] [nvarchar](10) NOT NULL,
        [FrenchMonthName] [nvarchar](10) NOT NULL,
        [MonthNumberOfYear] [tinyint] NOT NULL,
        [CalendarQuarter] [tinyint] NOT NULL,
        [CalendarYear] [smallint] NOT NULL,
        [CalendarSemester] [tinyint] NOT NULL,
        [FiscalQuarter] [tinyint] NOT NULL,
        [FiscalYear] [smallint] NOT NULL,
        [FiscalSemester] [tinyint] NOT NULL,
     CONSTRAINT [PK_DimDate_DateKey] PRIMARY KEY CLUSTERED 
    (
        [DateKey] ASC
    )
        WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
        IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) 
        ON [PRIMARY],
        CONSTRAINT [AK_DimDate_FullDateAlternateKey] UNIQUE NONCLUSTERED 
    (
        [FullDateAlternateKey] ASC
    )
        WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, 
        IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) 
        ON [PRIMARY]
    ) ON [PRIMARY]

      GO
    --I have used the table structure to resemble the DimDate table 
    --in the AdventureWorksDW2012 DB but you can modify to meet your needs
    --After the table is created, use the following code to populate the table:

    --Create a DATE type variable (@StartDate) to hold the start date
    DECLARE @StartDate AS DATE; 

    --Create another DATE Type variable (@EndDate) to hold the end date
    DECLARE @EndDate AS DATE;

    --Initialize @StartDate
    SET @StartDate = '2015-01-01';

    --Initialize @EndDate
    SET @EndDate = '2020-12-31';

    WHILE (@StartDate <= @EndDate)
    BEGIN

    --When populating the DimDate table,
    --Use a set operation because it is much faster than the regular "INSERT INTO" operation!

    INSERT dbo.DimDate 

    SELECT
        CONVERT(char(8), @StartDate, 112) AS DateKey, 
        CONVERT(char(10), @StartDate, 126) AS FullDateAlternateKey, 
        DATEPART(DW, @StartDate) AS DayNumberOfWeek, 
        DATENAME(DW, @StartDate) AS EnglishDayNameOfWeek,

        CASE 
            WHEN DATENAME(DW, @StartDate) = 'Saturday'  THEN 'Sábado'
            WHEN DATENAME(DW, @StartDate) = 'Sunday'    THEN 'Domingo'
            WHEN DATENAME(DW, @StartDate) = 'Monday'    THEN 'Lunes'
            WHEN DATENAME(DW, @StartDate) = 'Tuesday'   THEN 'Martes'
            WHEN DATENAME(DW, @StartDate) = 'Wednesday' THEN 'Miércoles'
            WHEN DATENAME(DW, @StartDate) = 'Thursday'  THEN 'Jueves'
            WHEN DATENAME(DW, @StartDate) = 'Friday'    THEN 'Viernes'
            END AS SpanishDayNameOfWeek,

        CASE 
            WHEN DATENAME(DW, @StartDate) = 'Saturday'  THEN 'Samedi'
            WHEN DATENAME(DW, @StartDate) = 'Sunday'    THEN 'Dimanche'
            WHEN DATENAME(DW, @StartDate) = 'Monday'    THEN 'Lundi'
            WHEN DATENAME(DW, @StartDate) = 'Tuesday'   THEN 'Mardi'
            WHEN DATENAME(DW, @StartDate) = 'Wednesday' THEN 'Mercredi'
            WHEN DATENAME(DW, @StartDate) = 'Thursday'  THEN 'Jeudi'
            WHEN DATENAME(DW, @StartDate) = 'Friday'    THEN 'Vendredi'
            END AS FrenchDayNameOfWeek,

            DATEPART(DD, @StartDate) AS DayNumberOfMonth, 
            DATEPART(dayofyear, @StartDate) AS DayNumberOfYear,
            DATEPART(WK, @StartDate) AS WeekNumberOfYear,
            DATENAME(MONTH, @StartDate) AS EnglishMonthName,

        CASE 
            WHEN DATENAME(MONTH, @StartDate) = 'January'    THEN'Enero'
            WHEN DATENAME(MONTH, @StartDate) = 'February'   THEN 'Febrero'
            WHEN DATENAME(MONTH, @StartDate) = 'March'      THEN    'Marzo'
            WHEN DATENAME(MONTH, @StartDate) = 'April'      THEN 'Abril'
            WHEN DATENAME(MONTH, @StartDate) = 'May'        THEN 'Mayo'
            WHEN DATENAME(MONTH, @StartDate) = 'June'       THEN 'Junio'
            WHEN DATENAME(MONTH, @StartDate) = 'July'       THEN 'Julio'
            WHEN DATENAME(MONTH, @StartDate) = 'August'     THEN 'Agosto'
            WHEN DATENAME(MONTH, @StartDate) = 'September'  THEN 'Septiembre'
            WHEN DATENAME(MONTH, @StartDate) = 'October'    THEN 'Octubre'
            WHEN DATENAME(MONTH, @StartDate) = 'November'   THEN 'Noviembre'
            WHEN DATENAME(MONTH, @StartDate) = 'December'   THEN 'Diciembre'
            END AS SpanishMonthName,

        CASE 
            WHEN DATENAME(MONTH, @StartDate) = 'January'    THEN 'Janvier'
            WHEN DATENAME(MONTH, @StartDate) = 'February'   THEN 'Février'
            WHEN DATENAME(MONTH, @StartDate) = 'March'      THEN 'Mars'
            WHEN DATENAME(MONTH, @StartDate) = 'April'      THEN 'Avril'
            WHEN DATENAME(MONTH, @StartDate) = 'May'        THEN 'Mai'
            WHEN DATENAME(MONTH, @StartDate) = 'June'       THEN 'Juin'
            WHEN DATENAME(MONTH, @StartDate) = 'July'       THEN 'Juillet'
            WHEN DATENAME(MONTH, @StartDate) = 'August'     THEN 'Août'
            WHEN DATENAME(MONTH, @StartDate) = 'September'  THEN 'Septembre'
            WHEN DATENAME(MONTH, @StartDate) = 'October'    THEN 'Octobre'
            WHEN DATENAME(MONTH, @StartDate) = 'November'   THEN 'Novembre'
            WHEN DATENAME(MONTH, @StartDate) = 'December'   THEN 'Décembre'
            END AS FrenchMonthName,

            DATEPART(MONTH, @StartDate) AS MonthNumberOfyear,
            DATEPART(Quarter, @StartDate) AS CalendarQuarter,
            YEAR(@StartDate) AS CalendarYear,

        CASE 
            WHEN DATEPART(MONTH, @StartDate) IN (1,2,3,4,5,6)
            THEN 1
            WHEN DATEPART(MONTH, @StartDate) IN (7,8,9,10,11,12)
            THEN 2
            END AS CalendarSemester,

        CASE 
            WHEN DATEPART(MONTH, GetDATE()) IN (7, 8, 9)    THEN 1
            WHEN DATEPART(MONtH, GetDATE()) IN (10, 11, 12) THEN 2
            WHEN DATEPART(MONtH, GetDATE()) IN (1, 2, 3)    THEN 3
            WHEN DATEPART(MONtH, GetDATE()) IN (4, 5, 6)    THEN 4
            END AS FiscalQuarter,

        CASE 
            WHEN MONTH(@StartDate) < 7  THEN YEAR(@StartDate) --Assuming the fiscal year beings on the first of July 
            ELSE YEAR(@StartDate) + 1 --if the date is less than July, then the Fiscal Year is equal to the Calendar Year
            END AS FiscalYear,

        CASE 
            WHEN DATEPART(MONTH, @StartDate) IN (7,8,9,10,11,12)    THEN 1
            WHEN DATEPART(MONTH, @StartDate) IN (1,2,3,4,5,6)       THEN 2
            END AS FiscalSemester

            --Increment the @StartDate by 1 here:
            SET @StartDate = DATEADD(DAY, 1, @StartDate);

    END

    --You can now test your code by selecting from the table:
    SELECT * FROM DimDate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:43:18.597

您可以使用 ETL 软件并自己生成这种表，例如在[Pentaho ETL](http://www.pentaho.com/explore/pentaho-data-integration/)中应该是创建时间维度的示例转换。使用这种软件可以选择输出格式。使用这种软件可以选择输出格式。

# iphone - 如何在滚动（垂直）时淡化到达顶部和底部的图像视图的内容？

> ID：11453036
> 
> 赞同：0
> 
> 时间：2012-07-12T13:36:13.603
> 
> 标签：iphone, uiscrollview, scroll, fade

我的要求是，当我们滚动图像时**（在滚动视图上有几个 300*150 大小的图像视图）**，图像的 alpha 必须根据滚动逐渐减少/增加。所以任何人都可以帮助解决这个问题。

*提前致谢*

需要与以下相同，但对于图像视图

**需要像第三张图片一样淡入淡出**

![示例图像](../Images/307f1297e287ff3636c9b0dac74b829d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:41:33.920

最简单的方法是使用渐变图像（此处为白色到透明）并将其添加到内容顶部的 UIImageView 中。

# php - html php 保留表单值

> ID：11453040
> 
> 赞同：2
> 
> 时间：2012-07-12T13:36:46.897
> 
> 标签：php, html, forms

正如标题所说，我试图保留从文本表单提交的值。所以我认为预处理页面上的以下简单代码可以解决问题，但文本框仍然是空白的。

```
<form id="form1" name="form1" method="get" action="pre_process.php">
        <input name="q" type="text" value="<?php $_GET['q']; ?>" size="80"/> 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T13:37:31.777

尝试：

```
<input name="q" type="text" value="<?php echo $_GET['q']; ?>" size="80"/> 
```

您需要回显该值。

为避免注意，您应该使用 isset 函数检查值是否已设置

您的代码应如下所示：

```
<input name="q" type="text" value="<?php echo isset($_GET['q']) ? $_GET['q'] : NULL; ?>" size="80"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T13:37:45.530

你忘记打电话了[`echo`](http://php.net/manual/en/function.echo.php)。您的代码应为：

`<?php echo $_GET['q']; ?>`

# svn - svn diff 不显示修改的外部文件

> ID：11453041
> 
> 赞同：8
> 
> 时间：2012-07-12T13:36:47.897
> 
> 标签：svn, version-control

我在本地 repo 中添加了一些更改并运行`svn diff`，但`diff`输出为空。但`svn status`将我的文件标记为已修改。这是文件是外部项目，我该如何使用`diff`命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T18:52:16.787

[这是手册](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)中的引述：

> 除了*svn checkout*、*svn update*、*svn switch*和*svn export*命令，它们实际上管理检出外部对象的不相交（或断开连接）子目录，*svn status*命令还可以识别外部定义。它为不相交的外部子目录显示状态代码 X，然后递归到这些子目录以显示外部项目本身的状态。您可以将*--ignore-externals*选项传递给这些子命令中的任何一个，以禁用外部定义处理。

从上面可以推断，只有提到的命令支持外部。

我不知道为什么会这样，但我的预感是它相对难以正确设计，并且在功能列表中并不高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-18T08:06:23.370

您可以使用此外壳单线：

```
svn st -q | grep '^[AM]' | cut -c9- | xargs svn diff 
```

解释：

1.  `svn st -q`无需附加行（“安静”）即可输出 SVN 状态。
2.  `grep '^[AM]'`过滤器添加和修改的文件。
3.  `cut -c9-`删除元数据并进一步传递路径。
4.  `xargs svn diff`为每个文件运行`svn diff`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T21:13:48.230

您需要使用外部程序来执行此操作。我写了这个脚本，它似乎做得很好。

```
<?php
passthru('svn diff');
exec('svn propget svn:externals',$externals);
foreach($externals as $line) {
    list($local, $path) = explode(' ',$line);
    passthru('svn diff '.$local);
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-16T10:31:36.193

这是合乎逻辑的，因为原因是**svn status**显示了关于主干最新版本的状态。这意味着您的本地没有更新到主干上的最新版本。通过获取 svn 信息，您会看到

```
Path: /home/....
Working Copy Root Path: /home/trunk
URL: https://svn.***.**/trunk
Repository Root: https://svn.***.**/
Repository UUID: 
Revision: **LAST_UPDATED_REVISION_Nr** 
```

但是，**svn diff显示了本地文件和***LAST_UPDATED_REVISION_Nr*文件情况之间的差异。为了查看与主干上最新修订版的区别：

```
svn diff -rHEAD address_of_your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-26T02:47:11.433

如果您事先知道外部，您可以将差异输出连接到一个临时文件中。这是在 Windows 上为带有外部的存储库启动 TortoiseSVN 统一差异的单行命令：

```
svn diff PATH1 > x.txt 
  & svn diff PATH2 >> x.txt 
  & svn diff PATH3 >> x.txt 
  & "c:\Program Files\TortoiseSVN\bin\TortoiseUDiff.exe" x.txt 
```

（为了便于阅读，这被分成单独的行）

# cocos2d-x - CCArray "访问冲突读取位置"

> ID：11453046
> 
> 赞同：1
> 
> 时间：2012-07-12T13:37:05.427
> 
> 标签：cocos2d-x

我正在使用 cocos2d-2.0-rc2-x-2.0.1 @ Jun 29 2012 并写了这个

。H

```
...
protected:
CCArray *array;
... 
```

.cpp

```
...
bool HelloWorld::init()
{
...
array= CCArray::create(2);
array->addObject(obj1);
array->addObject(obj2);
...
}

void HelloWorld::ccTouchesBegan(CCSet* touches, CCEvent* event)
{
    CCLog("%i", array->count());
}
... 
```

并得到了这个：0xC0000005：访问冲突读取位置“0xfeeefeee”。

在

CCArray.cpp

```
unsigned int CCArray::count()
{
    return data->num;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:55:42.137

试着打电话

```
 array->retain() 
```

创建后。离开函数后，数组可能会自动释放。

但别忘了在完成后释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:05:16.607

你也可以这样做：

```
array = new CCArray();
array->initWithCapacity(3); 
```

`create()`返回一个`autorelease`CCObject。

# javascript - Jquery 验证引擎正则表达式

> ID：11453047
> 
> 赞同：2
> 
> 时间：2012-07-12T13:37:09.007
> 
> 标签：javascript, jquery, regex, validation, regex-negation

我正在使用 jQuery 来验证输入表单。我的输入框中有名称、电话等值，这些值是作为用户指南的幽灵提示。

我的问题出现在 jQuery 验证上，因为它将这个幻影文本识别为输入，因此在用户输入任何内容之前处理表单。

输入字段：

```
<input class="validate[required,custom[name]] text-input" type="text" name="Name" id="Name" value="Name" onfocus="if
(this.value==this.defaultValue) this.value=''; " onblur="if(this.value=='') this.value=this.defaultValue;" /> 
```

验证引擎 js 文件中的正则表达式：

```
"name":{
    "regex":"/(Name)$/",
    "alertText":"Please enter your name"}, 
```

我的目标是这样的：

if input field = "Name" {display JS error} else: process field

我将如何做到这一点以匹配“名称”。附加问题：我也有包含多个单词的输入字段，例如“您的电话号码”。正则表达式会对此有所不同吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:41:08.730

你说得非常正确，汤姆——我们的电线被交叉了——你实际上想要*否定正则表达式*，所以使用......

```
/^(?!^Name$).*$/ 
```

这使用[否定前瞻](http://www.regular-expressions.info/lookaround.html)来匹配*除* `Name`.

同样的电话号码一...

```
/^(?!^Your Phone Number$).*$/ 
```

当然，这些实际上不会验证它们是有效的名称（它们是什么？:)）或有效的电话号码，只是它们*不是* `Name`或不`Your Phone Number` *完全是*......

# maven-3 - Maven原型+速度：如何显示日期

> ID：11453048
> 
> 赞同：4
> 
> 时间：2012-07-12T13:37:10.720
> 
> 标签：maven-3, velocity, maven-archetype

我有一个 Maven 原型项目。当我使用这个原型时，我希望一些文件报告实际日期。我尝试使用 $date 但 Velocity 无法识别它。我找到了一个名为 DateTools 的东西，但我不知道如何使用它。这是我第一次使用 Velocity。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:40:47.800

不幸的是，Maven Archetype 插件没有与 Velocity Tools 捆绑在一起。我通过修改 Maven Archetypes 插件添加了它。假设您使用的是 Maven 2.2.1，请按照以下步骤操作：

```
svn co -q http://svn.apache.org/repos/asf/maven/archetype/tags/maven-archetype-2.2
cd maven-archetype-2.2
curl -k -O https://raw.github.com/gist/3404715/59c7fa1c20c60e2a165de4109c2acffb8026febd/velocity-tools.patch
patch -p0 -i velocity-tools.patch
mvn install 
```

修改后的 Maven Archetype 插件现在将安装在本地。

`$date`您的模板中的用法现在应该呈现，例如

```
The date is $date 
```

...到：

```
The date is Aug 20, 2012 4:40:22 PM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-21T20:12:17.940

（很抱歉复活了一个老问题，但我刚刚通过一种方法来实现这一点，而无需拉动和修补插件）。

对于希望能够在其 maven 原型模板中引用日期字段的任何人，我都可以使用 pom.xml 模板顶部的以下一组定义来使用它

```
#set( $str = "" )
#set( $dt = $str.getClass().forName("java.util.Date").newInstance() )
#set( $year = $dt.getYear() + 1900 ) 
```

如果您在插入这些行时已经为模板提供了基于对象的变量，则可以划开 $str 声明并改用其中一个变量，因为从何处获得对 Class.forName 的引用并不重要（） 从。

注意：我尝试使用 Calendar.getInstance() 没有成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T20:01:19.990

我设法将解决方案从@maaxiim 缩减为一行：

```
#set( $year = $package.getClass().forName("java.util.Date").newInstance().getYear() + 1900 ) 
```

$package 变量将始终可从 maven 原型插件中获得。其他内置函数也可以，但它们中的大多数都很长，并且 $artifactId.getClass() 看起来......错了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-09T10:55:25.397

在 Java 8 中，使用格式化程序：

```
#set( $ldt = $package.getClass().forName("java.time.LocalDateTime").getMethod("now").invoke(null) )
#set( $dtf = $package.getClass().forName("java.time.format.DateTimeFormatter").getMethod("ofPattern", $package.getClass()).invoke(null, "yyyy/MM/dd HH:mm:ss") )
#set( $date = $ldt.format($dtf) ) 
```

# c++ - 在对话框中显示文本

> ID：11453060
> 
> 赞同：1
> 
> 时间：2012-07-12T13:37:46.153
> 
> 标签：c++, windows, atl

我正在创建一个 ATL 项目，我想通过对话框呈现一些文本结果。我有一个列表< CString > 中的所有文本结果。

我对 ATL/MFC 问题并不十分熟悉，因此我需要关于如何完成项目功能的建议。我决定使用对话框上的编辑控件来包含并最终呈现文本行。我关心的是如何在编辑控件上传达 CString。显然我需要编辑控件/对话框的某种功能。对话框带有一个类 CT​​estDlg。我应该在哪里以及如何添加负责 Cstring 元素出现在对话框上的代码？

CTestDlg 类特别包含以下方法：

```
LRESULT CTestDlg::OnEnChangeEdit1(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& /*bHandled*/)
{
// TODO: 

return 0; 
```

}

其中要设置添加文本的功能。我仍然知道它可以完成的方式，因为在该类中无法识别函数 setWindowText。缺少包含的类？

# apache-flex - Flex BlazeDS 消费者未订阅

> ID：11453061
> 
> 赞同：0
> 
> 时间：2012-07-12T13:37:51.020
> 
> 标签：apache-flex, blazeds, consumer

我的 flex 前端使用 BlazeDS/Tomcat 来收集实时数据。
我在标准流媒体 amf 频道上使用普通消费者。

```
<mx:ChannelSet id="channelSet">
 <mx:StreamingAMFChannel id="streamingAMF" url="messagebroker/streamingamf/" />
</mx:ChannelSet>
<mx:Consumer id="consumer" channelSet="{channelSet}" 
             channelConnect="consumer_channelConnectHandler(event)" 
             channelDisconnect="consumer_channelDisconnectHandler(event)" 
             message="consumer_messageHandler(event.message)"  
             fault="consumer_faultHandler(event)"
             resubscribeAttempts="-1" 
             resubscribeInterval="2000"/> 
```

此设置**在所有设置中都可以正常工作，**但以下设置除外。可见的差异是：

*   Windows 2008 服务器与 Linux 或更旧的 Windows
*   Java 1.7.0 与 1.6.0
*   Tomcat 7.0 与 6.0

症状是*consumer.subscribed*从未设置为*true*，尽管调用了*consumer.subscribe()*并在服务器端看到：

```
[BlazeDS]13:49:03.922 [DEBUG] [Endpoint.FlexSession] FlexSession created with id '275E7BE0E76EC4C4E8DB08F770BE2846' for an Http-based client connection.
[BlazeDS]13:49:03.922 [INFO] [Endpoint.General] Channel endpoint skydata-streaming-amf received request. 
```

我检查了所有日志（catalina、stdout 和 stderr），但没有任何明显的线索说明出了什么问题。再一次，这个完全相同的设置适用于所有其他情况有

什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:42:11.923

问题来自**Tomcat 7.0**恢复到 Tomcat 6.0 立即修复它。[这里](https://stackoverflow.com/questions/13024000/tomcat-doesnt-do-blazeds-streaming-after-version-7-0-27)

有一个 hack 可以用Tomcat 7 修复 BlazeDS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:10:50.220

一旦检查消费者的连接属性。如果可能的话，还要发布频道集配置。

我一直在使用 Tomcat7 并没有发现这样的问题，而是我正在使用它，因为它基于 Servlet 3.0 规范并且可能支持多个客户端。我在[这里](http://blog.hiraash.org/2012/04/13/scaling-blazeds-with-servlet-3-concurrency/)找到了。

# c# - 如何在 gridview 中更改禁用的超链接颜色？

> ID：11453062
> 
> 赞同：0
> 
> 时间：2012-07-12T13:37:52.877
> 
> 标签：c#, asp.net, gridview, rowdatabound

在`Gridview RowDataBound`我根据其值禁用超链接。但是超链接文本是灰色的。
我想更改禁用超链接的前景色，以便我可以轻松阅读文本。

我尝试如下所述。

```
protected void gridResult_RowDataBound(object sender, GridViewRowEventArgs e) 
{       
    var hyperlink = e.Row.FindControl( "hlink" ) as HyperLink;
    if( hyperlink!= null && hyperlink.Text =="ABC" )
    {
        hyperlink.ForeColor = Color.Black;
        hyperlink.Enabled = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:42:54.713

我认为您真正想要做的是启用 TextBox 并将 ReadOnly 属性设置为 true。

在禁用的 TextBox 中更改文本的颜色有点棘手。我认为您可能必须继承并覆盖 OnPaint 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:43:36.053

您可以通过 HyperLink 的 CssClass 属性设置 ForeColor

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:43:58.277

我会说`class`在链接中添加 a 而不是设置 ForeColor 并使用 CSS 来设置禁用链接的样式。

```
hyperlink.CssClass = "disabledLink"; 
```

然后在 CSS 中：

```
.disabledLink {
  color: #000 !important;
} 
```

# node.js - Mocha.js：如何使用猫鼬测试随后的保存和删除

> ID：11453065
> 
> 赞同：3
> 
> 时间：2012-07-12T13:38:03.807
> 
> 标签：node.js, mongoose, mocha.js

测试框架：mocha 我想测试在 mongodb 中保存然后删除创建的文档（使用 mongoose）

实际执行此操作的代码：

```
item = new Item()
item.save(function(err, data){
   // if no errors test passed, then I need to test removing that item 
   Item.remove({_id: data.id})
}) 
```

我应该如何描述测试？

我想在输出中保存和删除单独的测试结果。

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-10T08:27:58.570

```
var User = require('../../models/user');

describe('User', function(){
  describe('#save()', function(){
    it('should save without error', function(done){
      var user = new User({        username    : 'Luna'
        , email     : 'luna@me.name'
        , password  : 'asdf123'
      });
      user.save(function(err){
        if (err) throw err;
        done();
      });
    })
  })
}) 
```

# c# - 错误 - 与当前连接关联的事务已完成但尚未处理

> ID：11453066
> 
> 赞同：82
> 
> 时间：2012-07-12T13:38:04.407
> 
> 标签：c#, .net, sql-server-2008, c#-4.0

我在使用`TransactionScope`将多个数据库查询包装到一个事务中时遇到了问题，我正在使用批处理大小为 500 的 SqlBulkCopy。当我将批处理大小增加到 1000 时，我收到了错误：

> 与当前连接关联的事务已完成但尚未处置。必须先处理事务，然后才能使用连接执行 SQL 语句。

这是我正在使用的代码：

```
using (var scope = new TransactionScope())
{
    using (var connection = (SqlConnection)customerTable.OpenConnection())
    {
        var table1BulkCopy = new SqlBulkCopy(connection)
        {
            BatchSize = BATCH_SIZE,
            DestinationTableName = TableName1
        };

        table1BulkCopy.WriteToServer(table1DataTable);

        var table2BulkCopy = new SqlBulkCopy(connection)
        {
            BatchSize = BATCH_SIZE,
            DestinationTableName = TableName2
        };

        table2BulkCopy.WriteToServer(table2DataTable);

        var table3BulkCopy = new SqlBulkCopy(connection)
        {
            BatchSize = BATCH_SIZE,
            DestinationTableName = TableName3
        };

        table1BulkCopy.WriteToServer(table3DataTable);

        var table4BulkCopy = new SqlBulkCopy(connection)
        {
            BatchSize = BATCH_SIZE,
            DestinationTableName = TableName4
        };

        table4BulkCopy.WriteToServer(table4DataTable);

        scope.Complete();
    }
} 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-29T16:35:19.970

这可能在事务超时时发生。您可以像这样增加事务的超时时间（使用适合预期事务长度的值）。下面的代码是 15 分钟：

```
using (TransactionScope scope = 
             new TransactionScope(TransactionScopeOption.Required, 
                                   new System.TimeSpan(0, 15, 0)))
  {
      // working code here
  } 
```

这就是为什么它可能适用于批量大小 500 而不是 1000。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-01-22T05:25:32.660

我发现在 TransactionScope 中设置超时对我不起作用。我还需要将以下配置键添加到machine.config标记的**末尾，**`<configuration>`以超过默认的最大超时 10 分钟。

```
<system.transactions>
    <machineSettings maxTimeout="00:30:00" /> <!-- 30 minutes -->
</system.transactions> 
```

信用： [http ://thecodesaysitall.blogspot.com.au/2012/04/long-running-systemtransactions.html](http://thecodesaysitall.blogspot.com.au/2012/04/long-running-systemtransactions.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-12T13:44:10.357

移出街区`scope.Complete();`。`connection`

```
using (var scope = new TransactionScope())
{
  using (var connection = (SqlConnection)customerTable.OpenConnection())
   {
    //
   }
  scope.Complete();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-27T15:10:39.147

超时问题非常明显，但是如果将 TransactionOptions.Timeout 设置得更高，则不会生效。即使您设置了 TimeSpan.MaxValue，您实际上也不会获得利润。将 TransactionOptions 的 Timeout 属性设置为更高的值无关紧要，TransactionOptions.Timeout 不能超过 maxTimeout 属性。您应该在**machine.config**中进行一些更改。

很快你应该找到 machine.config 文件 %windir%\Microsoft.NET\Framework\ *yourversion* \config\machine.config
并将其添加到`<configuration>`标签中：

```
<system.transactions>
    <machineSettings maxTimeout="00:30:00"/>
</system.transactions> 
```

在这里，您可以将 maxTimeout 属性设置为 30 分钟。
有关更多详细信息，请参阅以下内容[http://thecodesaysitall.blogspot.com/2012/04/long-running-systemtransactions.html](http://thecodesaysitall.blogspot.com/2012/04/long-running-systemtransactions.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-05T10:04:08.680

完整的答案必须更完整。

您必须在 .Net 代码或服务器配置中指定 - 确定最大事务超时的位置

```
<sectionGroup name="system.transactions".... 
    ...allowDefinition="MachineOnly"
</sectionGroup> 
```

在这种情况下，您可以在 machine.config 中设置最大超时

```
<configuration>
 <system.transactions>
 <machineSettings maxTimeout="01:00:00" />
 </system.transactions>
</configuration> 
```

或者您可能想在应用程序中覆盖此行为。然后在 machine.config 中设置属性值：

```
...allowDefinition="MachineToApplication" 
```

这是一篇很好的文章：[https ://blogs.msdn.microsoft.com/ajit/2008/06/18/override-the-system-transactions-default-timeout-of-10-minutes-in-the-code/](https://blogs.msdn.microsoft.com/ajit/2008/06/18/override-the-system-transactions-default-timeout-of-10-minutes-in-the-code/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-20T11:22:12.653

应用这个：

```
TransactionScope(TransactionScopeOption.Required, new System.TimeSpan(0, 30, 0));
(0, 30, 0) = (hour,minute,seconds) 
```

如果你想测试，用这个 (0, 0, 1) 应用时间跨度，试试你会得到错误。之后，增加秒或分钟或小时并尝试。它会起作用的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-08-12T12:06:04.257

C# 9 朗版本。TransactionScopeOption.Suppress 对我来说就像魔术一样。

```
// TransactionScopeOption.Suppress works and fixed my issue
using TransactionScope Scope = new TransactionScope(TransactionScopeOption.Suppress);
try
{
    using var CentralConnection = SQLConnection("Other connection string here");
    using var LocalConnection = SQLConnection("Other connection string here");

    // Central
    using var cmd0 = new SqlCommand("OtherSQLCommandTextHere", CentralConnection)
    {
         CommandTimeout = 0 // I just add zero timeout here
    };
    cmd0.ExecuteNonQuery();

    // Local
    using var cmd1 = new SqlCommand("OtherSQLCommandTextHere", LocalConnection)
    {
         CommandTimeout = 0 // I just add zero timeout here
    };
    cmd1.ExecuteNonQuery();

    // The Complete method commits the transaction. If an exception has been thrown,
    // Complete is not called and the transaction is rolled back.
    Scope.Complete();
}
catch (Exception ex)
{
    Scope.Dispose();
    MessageBox.Show(ex.ToString());
}

public SqlConnection SQLConnection(string ISQLConnection)
{
     SqlConnection conn = null;
     try
     {
         conn = new SqlConnection(ISQLConnection);
         conn.Open();            
     }
     catch 
     {
         // skipping here error message
     }
     return conn;
 } 
```

# android - 在另一个布局上为 ImageView 设置图像

> ID：11453073
> 
> 赞同：0
> 
> 时间：2012-07-12T13:38:24.353
> 
> 标签：android, drawable, android-imageview

我正在尝试在另一个布局上设置 ImageView 的背景图像。另一种布局是表格行布局。这是代码

```
ImageView pdfImage;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.help);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService
         (Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout ll = (LinearLayout) inflater.inflate(R.layout.listlayout, null);
    pdfImage = (ImageView)ll.findViewById(R.id.pdfImage);

    pdfImage.setBackgroundResource(R.drawable.pdflogo); 
```

`pdflogo`没有设置为图像。它只是空白。我怎样才能做到这一点？

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout android:layout_width="wrap_content" android:layout_height="50dp">       
    <ImageView android:id="@+id/selfImage" android:layout_width="match_parent" android:layout_height="match_parent" android:background="@drawable/selfhelpnavbar"/>
    <ImageView android:id="@+id/logoImage" android:layout_width="70dp" android:layout_height="46dp" android:layout_alignParentTop="true" android:layout_alignParentRight="true" />
    <ImageView android:id="@+id/mainLogo" android:layout_width="50dp" android:layout_height="46dp" android:background="@drawable/mainlogo" android:layout_alignParentTop="true" android:layout_alignParentLeft="true"/>
</RelativeLayout> 

    <ListView
        android:id="@+id/helpList"
        android:layout_width="wrap_content"
        android:layout_height="387dp" >
    </ListView>

<!-- Tab Bar -->
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/helpButton"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:background="@drawable/selfhelptab_selected" 
        android:layout_weight="1.0"
        android:onClick="onClick"
        android:clickable="true"/>

    <ImageButton
        android:id="@+id/eButton"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:background="@drawable/eapservicestab" 
        android:layout_weight="1.0"
        android:onClick="onClick"
        android:clickable="true"/>

    <ImageButton
        android:id="@+id/mailButton"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:background="@drawable/mailtab" 
        android:layout_weight="1.0"
        android:onClick="onClick"
        android:clickable="true"/>

    <ImageButton
        android:id="@+id/gethelpButton"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:background="@drawable/gethelptab" 
        android:layout_weight="1.0"
        android:onClick="onClick"
        android:clickable="true"/>

    <ImageButton
        android:id="@+id/moreButton"
        android:layout_width="0.0dip"
        android:layout_height="fill_parent"
        android:background="@drawable/moretab" 
        android:layout_weight="1.0"
        android:onClick="onClick"
        android:clickable="true"/>

</LinearLayout></LinearLayout> 
```

![在此处输入图像描述](../Images/7e80fabba769ac61e63a52b6a9acda8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:41:55.883

```
setContentView(R.layout.help); 
```

使用此语句，您将 help.xml 设置为要显示的布局。稍后，你膨胀另一个布局，用它的图像做一些事情，但据我所知，这个布局既不是 help.xml 的一部分，也不是设置为通过 setContentView 显示。

尝试这个：

```
ImageView pdfImage;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService
         (Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout ll = (LinearLayout) inflater.inflate(R.layout.listlayout, null);
    pdfImage = (ImageView)ll.findViewById(R.id.pdfImage);

    pdfImage.setBackgroundResource(R.drawable.pdflogo);
    setContentView(ll); 
```

# python - 为什么我在使用 urllib2 请求 URL 时收到“HTTP 错误 405：不允许的方法”？

> ID：11453078
> 
> 赞同：9
> 
> 时间：2012-07-12T13:38:35.460
> 
> 标签：python, urllib2, urllib

我在 python 中使用 urllib2 和 urllib 库

假设我有以下代码

```
import urllib2
import urllib

url = 'http://ah.example.com'
half_url = u'/servlet/av/jd?ai=782&ji=2624743&sn=I'

req = urllib2.Request(url, half_url.encode('utf-8'))
response = urllib2.urlopen(req)
print response 
```

当我运行上面的代码时，我收到以下错误

```
Traceback (most recent call last):
  File "example.py", line 39, in <module>
    response = urllib2.urlopen(req)
  File "/usr/lib64/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib64/python2.7/urllib2.py", line 398, in open
    response = meth(req, response)
  File "/usr/lib64/python2.7/urllib2.py", line 511, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib64/python2.7/urllib2.py", line 436, in error
    return self._call_chain(*args)
  File "/usr/lib64/python2.7/urllib2.py", line 370, in _call_chain
    result = func(*args)
  File "/usr/lib64/python2.7/urllib2.py", line 519, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 405: Method Not Allowed 
```

谁能让我知道这里发生了什么以及为什么它不起作用

提前致谢............

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T13:41:58.847

您正在调用的服务器告诉您，您尝试调用的 URL 不允许使用 POST 方法。

通过将 URL 的路径部分作为`Request`对象数据参数传递，您可以将其设为 POST 而不是 GET。

我怀疑你想发送一个 GET 请求：

```
req = urllib2.Request(url + half_url.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T11:21:38.597

我得到它是因为 Python 3.7 from`ppa:deadsnakes` [不支持](https://github.com/deadsnakes/issues/issues/111)Ubuntu Trusty 包中的 SSL。“解决方案”是降级到 Python 3.6。

# ios - 如何打破代码中的保留周期？

> ID：11453079
> 
> 赞同：2
> 
> 时间：2012-07-12T13:38:44.177
> 
> 标签：ios, memory-leaks, objective-c-blocks

最近我被扔进了别人的代码库，我已经能够处理到目前为止它抛出的大多数事情，但这个有点过头了。有一些保留周期我不知道如何解决。

有一个包装 FROAuthRequest 的自定义对象，FROAuthRequest 有一个完成块，其中还使用了 3 个块，一个解析块、完成块和失败块。完成、完成和失败块都导致了一个保留周期。

我知道原因是对块内 ivars 的引用，但我尝试过的方法没有奏效，请参阅帖子末尾的我尝试过的内容。

以下代码是我开始尝试修复它之前的样子。代码路径如下：

1：创建请求：

```
//in the MainViewController.m
SHRequest *request = [api userInfo]; 
```

2：创建 SHRequest 的方法

```
//in API.m
-(SHRequest*)userInfo{

    FROAuthRequest *request = [[FROAuthRequest alloc]initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",SH_URL_API,SH_URL_USER_INFO]] 
                                                    consumer:consumer 
                                                       token:token 
                                                       realm:nil 
                                           signatureProvider:signatureProvider];

    //wrap the FROAuthRequest in our custom object
    //see below for the SHRequest 
    SHRequest *shRequest = [[SHRequest alloc]initWithRequest:request];

    //set the parsing block
    shRequest.parsingBlock = ^id(FROAuthRequest* finishedRequest){

        NSDictionary *jsonResponse = [finishedRequest.responseData objectFromJSONData];

        [user release];
        user = [[SHUser alloc]initWithJSON:[jsonResponse objectForKey:@"user"]];

        //more code

        return [NSDictionary dictionaryWithObjectsAndKeys:user,kUserKey,nil];
   };

   [request release];
   return [shRequest autorelease];
} 
```

3：SHRequest

```
//in SHRequest.m
-(id)initWithRequest:(FROAuthRequest*)_underlyingRequest{
    if(self = [super init]){
        underlyingRequest = [_underlyingRequest retain];

        //this is the majority of the post processing
        underlyingRequest.completionBlock = ^{
            //if the requests fails call the fail block
            if(underlyingRequest.responseStatusCode != 200){
                if(failBlock != nil)
                    failBlock();
                return;
            }

            if([underlyingRequest.responseData length] > 0){
                [object release];
                object = parsingBlock(underlyingRequest);
                [object retain];

                if((underlyingRequest.error || !object) && failBlock != nil)
                    failBlock();
                else if(finishBlock != nil)
                    finishBlock();
            }else if(failBlock != nil)
                failBlock();
        };

        underlyingRequest.failedBlock = ^{
            if(failBlock)
                failBlock();
        };
    }
return self;
} 
```

4：一旦从 userInfo 方法 (1) 返回 SHRequest，就设置完成和失败块。（对于这种情况，没有设置 failBlock。

```
//in MainViewController.m
request.finishBlock = ^{
    NSDictionary *userInfo = request.object;

    //User
    SHUser *user = [userInfo objectForKey:kUserKey];

    //more code

};
[request send]; 
```

**这是我尝试过**
的方法，我将 completionBlock 代码移动到启动请求并使用 __block 类型的方法中，并且泄漏似乎已经消失，但是当完成块运行时，一些 __block 变量是僵尸。

```
//in SHRequest.m
-(void)send{

    __block void(^fail)(void) = failBlock;
    __block void(^finish)(id) = finishBlock;
    __block id(^parsing)(FROAuthRequest*) = parsingBlock;
    __block FROAuthRequest *req = underlyingRequest;

    underlyingRequest.completionBlock = ^{

        if(req.responseStatusCode != 200){
            if(fail != nil)
                fail();
            return;
        }
        if([req.responseData length] > 0){
           id obj = parsing(req);//<--- parsing is a zombie 

            if((req.error || !obj) && fail != nil)
                fail();
            else if(finish != nil)
                finish(obj);//<--- finish is a zombie
        }else if(fail != nil)
            fail();
    };

    underlyingRequest.failedBlock = ^{
         if(fail)
             fail();
    };

    [underlyingRequest startAsynchronous];
} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:04:34.747

当它们出现并用它们编写几乎每个界面时，我对它们感到兴奋。在我意识到内存管理和可读性的问题之后，这让我回到了委托，除非 API*真的*需要块。也许这也会让你的代码看起来更好，如果这不是太多需要改变的代码的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:50:47.237

复制解析/完成/失败块并将请求对象作为块的参数传递似乎已经解决了我的问题

```
-(void)send{

__block void(^fail)(void) = [failBlock copy];
__block void(^finish)(id) = [finishBlock copy];
__block id(^parsing)(FROAuthRequest*) = [parsingBlock copy];
__block FROAuthRequest *req = underlyingRequest;

underlyingRequest.completionBlock = ^{

    if(req.responseStatusCode != 200){
        if(fail != nil)
            fail();
        return;
    }
    if([req.responseData length] > 0){
       id obj = parsing(req);

        if((req.error || !obj) && fail != nil)
            fail();
        else if(finish != nil)
            finish(obj);
    }else if(fail != nil)
        fail();
};

underlyingRequest.failedBlock = ^{
     if(fail)
         fail();
};

[underlyingRequest startAsynchronous];
} 
```

在我需要引用 ivar 或请求本身的任何请求中，我创建一个块 var 并保留它，然后在完成/失败块中释放它

```
__block SHRequest *req = [request retain];
request.finishBlock = ^(id object){

    NSDictionary *userInfo = object;

    //User
    SHUser *user = [userInfo objectForKey:kUserKey];

    //more code
    [req release];
};

request.failBlock = ^{
    if(req.requestStatusCode == 500)
        //do stuff
    [req release];
}; 
```

这样 Instruments 就不再报告泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:53:57.813

If you're getting EXC_BAD_ACCESS, then either the `SHRequest` object is gone by the time the completion block runs, or (perhaps less likely) some code has prematurely cleared out your completion block properties. If you were targeting iOS 5, you could solve it by making the block variables weak references, so they wouldn't be invoked if the `SHRequest` object's lifecycle ends before the callback:

```
__weak void(^fail)(void) = failBlock; 
```

Since you have to target iOS4, I think the best option is to move the callbacks into methods instead of properties. In this case, the retain cycle still exists, but it's narrowly scoped to the execution of the `underlyingRequest`. Once it executes and releases `completionBlock` and `failedBlock`, the SHRequest can be deallocated (once nothing else is holding onto it). The common problem with block properties is that self retains the block, which retains self, and the only way to break the cycle is to either use a weak reference to self in the block, or explicitly nil out the properties at some point, which can be hard to do in a callback scenario. Here's roughly what your code would look like with methods returning the callback blocks:

```
-(void (^)(void))requestFinishedCallback {
    return [^{
        NSDictionary *userInfo = self.object;

        //User
        SHUser *user = [userInfo objectForKey:kUserKey];

        //more code
    } copy] autorelease];
}

-(void)send{
    underlyingRequest.completionBlock = ^{
        if(req.responseStatusCode != 200){
            [self requestFailedCallback]();
            return;
        }
        if([req.responseData length] > 0){
            id obj = [self parsingBlock](underlyingRequest);

            if (req.error || !obj) {
                [self requestFailedCallback]();
            }
            else {
                [self requestFinishedCallback]();
            }
        } else {
                [self requestFailedCallback]();
        }
    };

    underlyingRequest.failedBlock = [self requestFailedCallback];

    [underlyingRequest startAsynchronous];
} 
```

Incidentally, there are [some other good reasons for returning callback blocks from methods](http://twobitlabs.com/2012/05/block-initialization-for-testability-and-reuse/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T17:59:13.287

首先，如果您正在修改代码库，我建议您借此机会迁移到 ARC。这将使块的生活变得更加容易。

如果您无论如何都必须筛选所有代码，那可能是值得的……而且 ARC 自动化转换工具非常好。

尽管如此，您仍会看到保留周期，但 ARC 加上 __weak 是打破保留周期的好方法。

除此之外，您将不得不单独处理每个块构造，而不仅仅是在外部方法中。

# shell - 如何生成 2 小时长的空白视频

> ID：11453082
> 
> 赞同：33
> 
> 时间：2012-07-12T13:38:50.427
> 
> 标签：shell, opencv, video

我想生成一个持续特定持续时间（例如 2 小时）的黑色或白色背景（甚至什么都没有）的视频。

您能否建议一种以编程方式执行此操作的快速方法（例如命令行、OpenCV）？谢谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-12T13:40:08.770

您可以为此使用**ffmpeg ：**

```
ffmpeg -t 7200 -s 640x480 -f rawvideo -pix_fmt rgb24 -r 25 -i /dev/zero empty.mpeg 
```

**更新**：

```
-t:       length of the video (in H:m:s format 00:00:00 or in seconds 0.000)
-s:       frame size
-f:       video format
-pix_fmt: pixel format
-r:       fps
-i:       input 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-12-07T22:07:25.863

对于 MP4 容器中的 h264 输出，请使用：

```
ffmpeg -t 7200 -f lavfi -i color=c=black:s=640x480 -c:v libx264 -tune stillimage -pix_fmt yuv420p output.mp4 
```

如果要包含音轨，只需添加音频输入和编码的参数（如有必要）。输出的持续时间将由最短的输入（即音频）确定。例如：

```
ffmpeg -f lavfi -i color=c=black:s=640x480 -i audio.ogg -c:v libx264 -tune stillimage -pix_fmt yuv420p -shortest -c:a aac -b:a 128k output-with-audio.mp4 
```

# css - div的背景图片没有出现

> ID：11453085
> 
> 赞同：1
> 
> 时间：2012-07-12T13:39:01.180
> 
> 标签：css, html, background-image, image

我将图像放在一个也有背景图像的 div 中。但只有图像本身出现，父 div 的背景图像没有出现。

我的代码：

```
 <div id="proceedbody" style="background: url(http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-image.jpg); background-repeat: no-repeat; line-width:810px; line-height: 718px;"><img id="proceed" style="position: absolute; top:200; left:350;" src="http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-matter.png"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:44:01.363

```
<div id="proceedbody" style="width:810px; height:718px; background: url(http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-image.jpg) no-repeat 0 0;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:44:37.127

您在 div 的内联样式中使用 line-height 和 line-width 而不是 width 和 height ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:15:59.067

您需要做的就是将“line-width”和“line-height”更改为“height”和“width”，并添加：`background-size:100% 100%;`#proceedbody

```
<div id="proceedbody" style="background: url(http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-image.jpg); background-repeat: no-repeat; width:810px; height: 718px; background-size:100% 100%;"><img id="proceed" style="position: absolute; top:200; left:350;" src="http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-matter.png"></div> 
```

链接到 jsFiddle：http: [//jsfiddle.net/justinc535/cSrQL/](http://jsfiddle.net/justinc535/cSrQL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:25:25.307

代码有几个问题，但阻止背景显示的问题是`position: absolute`. 这样，`img`元素就从文档的正常流程中取出，在`div`.

但是，如果您为 明确设置尺寸`div`，那么您可以拥有绝对定位（尽管在上`img`设置可能会更好、更健壮，这样“绝对定位”将相对于）。对于尺寸标注，使用和属性。`position: relative``div``img``div``height``width`

`top:200; left:350`符合标准的浏览器会忽略这些设置。改为使用`top:200px; left:350px`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T13:47:18.470

您必须为外部 div 设置高度（和宽度），否则它只会与图像一样高。由于 img-tag 中的图像在其边框中是半透明的，并且 web 无法显示半透明，因此整个外部 div 都被图像覆盖。

**编辑：**将您的内部图像设置为内部 div 的背景图像可能是更好的方法：

```
#proceedbody{
  background: url(http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-image.jpg);
  height: 810px;
}

#inside{
  background: url(http://www.asifsinan.com/wp-content/uploads/2012/07/please-proceed-matter.png) no-repeat left top transparent;
  height: 276px;
}

    <div id="proceedbody">
    <div id="inside"></div>​
    </div> 
```

# android - 如何强制我的 Android 网络应用程序要求用户选择浏览器

> ID：11453087
> 
> 赞同：0
> 
> 时间：2012-07-12T13:39:09.443
> 
> 标签：android

如何强制我的 Android Web 应用程序要求用户选择应该打开应用程序的浏览器。

已编辑：我将更深入地了解我打算做什么。实际上我正在使用 jquery mobile 添加固定工具栏功能。但是当我在设备上部署它时，我看到工具栏上有一些闪烁。所以，我想也许我应该看看我的应用程序在我将它部署到其他东西时的行为，然后是 opera。我是 android 和 web 开发的新手，所以请容忍 ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:41:18.040

用户将选择他们希望您的链接如何打开。

# silverlight - 如何将 Silverlight 5 Window 滑动到屏幕上？

> ID：11453092
> 
> 赞同：0
> 
> 时间：2012-07-12T13:39:41.567
> 
> 标签：silverlight, silverlight-5.0, toast, out-of-browser

我有一个 Silverlight 5 OOB 应用程序。我想创建“吐司”。由于限制，我不想使用 NotificationWindows。

我尝试创建一个 S5 窗口并将其滑到屏幕上。[粗略，但这是一个开始。]如果我在主窗口中使用一个按钮来触发创建，另一个按钮来触发动画，它就可以工作。如果我将动画放入第一种方法中，则窗口只会出现，没有动画。有谁知道我怎样才能使这项工作。

要重新创建，请在 MainPage.xaml 的 Grid 中添加：

```
<Button Content="Show" Height="23" HorizontalAlignment="Left" Margin="12,12,0,0"
        Name="show" VerticalAlignment="Top" Width="75" Click="show_Click" />
<Button Content="Move" Height="23" HorizontalAlignment="Left" Margin="12,41,0,0"
        Name="move" VerticalAlignment="Top" Width="75" Click="move_Click" /> 
```

在 MainPage.xaml.cs 中，添加：

```
 private Window toastWindow;

    private void show_Click(object sender, RoutedEventArgs e)
    {
        toastWindow = new Window();
        toastWindow.Width = 280;
        toastWindow.Height = 58;
        toastWindow.Left = 975;
        toastWindow.Top = 755;
        toastWindow.WindowStyle = WindowStyle.None;
        toastWindow.WindowState = WindowState.Normal;
        toastWindow.Content = new Toast();
        toastWindow.Show();
        toastWindow.Activate();

        //for (int i = 0; i < 20; i++)
        //{
        //    toastWindow.Top = toastWindow.Top - 5;
        //    System.Threading.Thread.Sleep(25);
        //}
    }

    private void move_Click(object sender, RoutedEventArgs e)
    {
        for (int i = 0; i < 20; i++)
        {
            toastWindow.Top = toastWindow.Top - 5;
            System.Threading.Thread.Sleep(25);
        }
    } 
```

您还需要一个名为 Toast 的用户控件（在 Toast.xaml 中），我在其中为 LayoutRoot Grid 提供了背景颜色，这样即使通过开始栏，其 Width="300" Height="100" 也很明显。

在 Silverlight 5 属性页面上，您需要启用在浏览器外运行的应用程序，并在浏览器外设置设置在浏览器外运行时需要提升信任。

如果您运行它并单击“显示”，您将看到“开始”栏/时钟区域后面的吐司。如果单击“移动”，它会向上滑动。如果您取消注释 show_Click 方法的末尾并再次运行它并单击 Show，它将出现在其最终位置而没有任何滑动。

有任何想法吗？

PS 最终，我希望能够在任何时候在屏幕上拥有多个具有独立寿命的“切片”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:23:23.167

您的“移动”代码当前是同步的，这意味着它会阻塞 UI 线程，这是非常非常糟糕的。

您可以使用 a`DispatcherTimer`来代替这种效果。

# java - ListView 中的物理距离

> ID：11453093
> 
> 赞同：1
> 
> 时间：2012-07-12T13:39:43.270
> 
> 标签：java, android, gps, android-listview, distance

我一直在尝试显示指南针以及我的位置与地图上另一个位置之间的距离。

几乎完全一样：

[Android：列表视图中的指南针+距离](https://stackoverflow.com/questions/3833654/android-compass-distance-in-a-listview)

我理解了代码，设置了一个监听器来检测方向变化，还计算了距离。

此外，我在我的 ListView 中显示了正确的距离（我已经有一个自定义适配器）。那是关于我在哪里的一点澄清。

**这是我的问题：**我通过侦听器每秒更新 ListView，通过更改适配器正在查看和调用的实际列表的值：

```
 notifyDataSetChanged(); 
```

正如我所预料的那样，每秒调用一次会使 ListView 变得迟钝。我可以每 10 秒左右（或更多）更新一次距离。但是，我必须更频繁地更新列表才能拥有实时指南针。我一直在四处寻找，我真的找不到任何东西，我会很感激我能得到的所有帮助。谢谢！

旁注：如果您需要查看我编写的任何代码，我愿意将其粘贴在这里。它有很多部分，所以我会按需做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:29:47.730

恕我直言，您应该省略整个列表视图和适配器。最好的方法是为应该经常更新的元素创建自己的视图。

例如，创建名为 HeadingView 的视图，该视图将具有 setAbsouluteheading。此设置器将由适配器使用。然后视图也将实现 SensorEventListener 来观察传感器并获取设备标题。当相对方向应该改变 HeadingView 会自行更新。这种情况下的问题是检测 HeadingView 何时应为传感器事件注册/注销自身。[onWindowFocusChanged](http://developer.android.com/reference/android/view/View.html#onWindowFocusChanged%28boolean%29)看起来很有希望，而[onWindowSystemUiVisibilityChanged](http://developer.android.com/reference/android/view/View.html#dispatchWindowSystemUiVisiblityChanged%28int%29)（API 级别 16）正是您所需要的。

请记住，存在可能存在某些极端情况的危险，并且您的视图不会在应该的时候从观察传感器中取消注册。这可能会导致睡眠模式下的严重功耗，因此请记住进行大量测试。

可能有其他方法可以在此 HeadingView 和传感器之间执行通信，但我认为总的来说我的概念是很好的解决方案。

* * *

更新：

我想出了更好的主意，如何与此 HeadingView 进行通信，而不会检测到何时禁用传感器并且不会导致内存泄漏。答案是[周参考](http://developer.android.com/reference/java/lang/ref/WeakReference.html)或更确切地说是[WeakHashMap](http://developer.android.com/reference/java/util/WeakHashMap.html)。

HeadingView 视图与我之前解释的差不多，但在构造函数中它会通知 YourActivity 它的存在。所以它会是这样的：

```
public class HeadingView extends View {

    public HeadingView(Context context) {
        super(context);

        YourActivity activity = (YourActivity) context;
        activity.addWeekSensorObserver(this);
    }
} 
```

你的活动：

```
public class YourActivity extends Activity implements SensorEventListener {
    // there is no WeekSet and WeakHashMap is more handy then List<WeakReference>
    private final  WeakHashMap<HeadingView, Object> sensorObservers = new WeakHashMap<HeadingView, Object>();
    public void addWeekSensorObserver(HeadingView headingView) {
        sensorObservers.put(headingView, null);
    }

    private updateHeadings(float[] deviceHeading) {
        Set<HeadingView> keySet = sensorObservers.keySet();
        for (HeadingView headingView : keySet) {
            headingView.setDeviceHeading(deviceHeading);
        }
    }
} 
```

活动中的标准传感器处理现在适用，因此检测何时禁用传感器不是问题，您不必担心内存泄漏。我怀疑即使您也不必大量更改代码:)。为了使它更好，您可以定义接口。

# java - JSP - 发送到外部站点时如何发送数据并接收响应

> ID：11453094
> 
> 赞同：0
> 
> 时间：2012-07-12T13:39:44.307
> 
> 标签：java, jquery, ajax, http, servlets

我有个问题。我需要能够在我的 JSP 中执行发送，该 JSP 在 Spring 和 JBOSS 环境中运行。问题是数据需要发送到外部站点。该站点需要能够接收数据、执行处理，并且需要提供一种机制来向调用 JSP 提供响应。

我已经用 AJAX 帖子尝试过这个，但是跨站点脚本存在问题

我也尝试过向应用服务器发送 AJAX 发布，然后应用服务器 servlet 向外部站点发送 HTTP 发布。

但我需要一种方法将其从浏览器发送到外部站点。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:44:39.393

您**可以**进行跨域请求，因为您自己管理被调用的服务器。

只需在被调用服务器上设置正确的标头：

```
response.setHeader("Access-Control-Allow-Origin","*"); 
```

请注意，您可以设置比`*`. 见[https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

**编辑：**我不确定我是否理解了这个问题，这仅在您可以更改“外部”服务器时才有用。是这样吗？

# c++ - 在 Ada95 中使用 C++ 类 / 构造函数和受控类型

> ID：11453095
> 
> 赞同：3
> 
> 时间：2012-07-12T13:39:45.650
> 
> 标签：c++, constructor, ada

在 Ada95 中使用 C++ 类 / 构造函数和受控类型

我希望能够在我的 Ada 代码中使用 C++ 类。我的目标是让我的 Ada 代码可移植到 Ada95 规范。我不想使用任何 GNAT 或 Ada05 特定方法。

我在 C 中使用带有包装函数的 pragma Import (C) 来实现我的接口。但是我无法弄清楚如何让我的 C++ Ctors/Dtors 被自动调用。我的第一个想法是使用 Ada Controlled Types，Initialize 会调用 Ctor，Finalize 会调用 Dtor。这一切都很好，直到我有一个需要我传递参数的Ctor。

**Foo.h**

```
class Foo
{
public:
    Foo();
    Foo(long x, long y, long z);
    Foo(const Foo& that);
    ~Foo();

    Foo& operator=(const Foo& that);

    long getX() const;
    long getY() const;
    long getZ() const;

    void setX(long x);
    void setY(long y);
    void setZ(long z);

private:
    long mX;
    long mY;
    long mZ;    
}; 
```

**Foo_Exports.cpp**

```
#include "foo.h"
#include <new>

extern "C"
{
    void extFoo_New    (Foo* foo) { new (foo) Foo(); }  
    void extFoo_NewXYZ (Foo* foo, long x, long y, long z)   { new (foo) Foo(x,y,z); }
    void extFoo_Delete (Foo* foo) { foo->~Foo(); }  

    long extFoo_getX(const Foo& foo) { return foo.getX(); }
    long extFoo_getY(const Foo& foo) { return foo.getY(); }
    long extFoo_getZ(const Foo& foo) { return foo.getZ(); }

    void extFoo_setX(const Foo& foo, long x) { foo.setX(x) };
    void extFoo_setY(const Foo& foo, long y) { foo.setY(y) };
    void extFoo_setZ(const Foo& foo, long z) { foo.setZ(z) };
} 
```

**cpp.foo.ads**

```
with Ada.Finalization;
with Interfaces.C;
use Interfaces.C;

package Cpp.Foo is

    type Obj_t is new Ada.Finalization.Controlled_Type with private;

    procedure Initialize (This : in out Obj_T);
    procedure Adjust     (This : in out Obj_T);
    procedure Finalize   (This : in out Obj_T);

    function Get_X (This : access Obj_T) return Long;
    function Get_Y (This : access Obj_T) return Long;
    function Get_Z (This : access Obj_T) return Long;

    procedure Set_X(This : access Obj_T; 
                    X    : in     Long );
    procedure Set_Y(This : access Obj_T; 
                    Y    : in     Long );
    procedure Set_Z(This : access Obj_T; 
                    Z    : in     Long );

private
    type Obj_t is new Ada.Finalization.Controlled_Type with null record;
    for Obj_T'Size use 192;
    for Obj_T'Alignment use 8;

    pragma Import (C, Get_X, "extFoo_getX");
    pragma Import (C, Get_Y, "extFoo_getY");
    pragma Import (C, Get_Z, "extFoo_getZ");

    pragma Import (C, Set_X, "extFoo_setX");
    pragma Import (C, Set_Y, "extFoo_setY");
    pragma Import (C, Set_Z, "extFoo_setZ");
end Cpp.Foo; 
```

**cpp.foo.adb**

```
with System;

package body Cpp.Foo is

    procedure Initialize (This : in out Obj_T) is
        procedure ExtFoo_New(Addr : in System.Address);
        pragma Import (C, ExtFoo_New "extFoo_New");

        procedure ExtFoo_NewXYZ(Addr  : in System.Address,
                                X     : in Long;
                                Y     : in Long;
                                Z     : in Long);
        pragma Import (C, ExtFoo_NewXYZ "extFoo_NewXYZ");
    begin

        null; -- **WHAT DO I DO HERE?!**

    end Initialize;

    procedure Adjust     (This : in out Obj_T) is
    begin
        null; -- TBD copy ctor
    end Adjust;

    procedure Finalize   (This : in out Obj_T) is
        procedure ExtFoo_Delete(Addr : in System.Address);
        pragma Import (C, ExtFoo_Delete, extFoo_Delete);
    begin
        ExtFoo_Delete(This'address);
    end Finalize;

end Cpp.Foo; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:39:09.603

在 Ada 95 中确实没有任何可移植（语言标准）方法来调用 C++ 类方法。这适用于 C、Fortran 和大多数其他主要编译系统的编程语言，您可能偶尔希望与 C++ 交互。

为了解决这个问题，您必须使用与 C 程序接口时通常用来处理它的相同技术。基本上，任何需要从其他语言调用的东西都必须具有与之关联的 C 可链接 C++ 函数。`extern "C"`在 C++ 中，这通常意味着应用到它的裸函数或静态成员函数。

Gnat，由于它与 GCC 的紧密集成，有一些更好的工具来处理 C++ 代码。然而，这不是标准的。

请注意，可以通过将对象作为其参数传递来将此类非 OO 调用“引导”到 OO 方法调用中，然后让非 OO 调用对该对象进行适当的方法调用。尽管如此，这意味着您需要为每种方法提供一个这样的引导函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:52:16.227

`Initialize`只会在默认初始化时调用：

```
O : Obj_t; 
```

并且是应该调用的子程序`ExtFoo_New`。为了创建一个`Obj_t`初始值，你需要另一个函数来调用`ExtFoo_NewXYZ`，也许

```
function Create (X, Y, Z : Long_Integer) return Obj_T; 
```

进而

```
O : Obj_T := Create (41, 42, 43); 
```

也就是说，我真的不认为你覆盖 Ada`Obj_t`和 C++的方案`Foo`是一个好主意，因为这两种语言都有权使用隐藏字段。我可以想象 C++ 可能会存储一个指向调度表的指针，并且我确定（在 GNAT 中）`Ada.Finalization.Controlled`包含实现终结链的链接的子项。其他编译器可能会采用不同的方式（并且 GNAT 在 GCC 4.7 中改变了它的策略）。因此，我将`Obj_t`包含对 C++ 对象的引用（即由 返回的值`Foo()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:59:44.470

我已扩展您的代码示例并将其上传到[BitBucket 上的存储库](https://bitbucket.org/OCTAGRAM/cpp-in-ada-example "Ada 中的 C++ 示例")

它包含 ctor 包装器，包括默认构造函数、复制构造函数和自定义构造函数。我添加了一些代码来提供调试输出。从我可以看到一切都按预期工作，但是创建（自定义 ctor 包装器）会导致复制/删除的两个冗余跃点。

```
Foo()
Foo(long, long, long)
Foo(const Foo&)
~Foo()
Foo(const Foo&)
~Foo()
Foo()
Foo(const Foo&)
Uninitialized A, should be   0   0   0:    0   0   0
Initialized B,   should be   4   5   6:    4   5   6
Copied B to C,   should be   4   5   6:    4   5   6
Modified C,      should be   4   7   6:    4   7   6
~Foo()
Foo(const Foo&)
Copied C to A,   should be   4   7   6:    4   7   6
~Foo()
~Foo()
~Foo()
~Foo() 
```

我的包装器依赖于这样的假设，即移动对象内容并从按位复制的对象内容调用复制构造函数是安全的，而不是从由真实构造函数创建的真实对象复制。

当内存中的 C++ 对象位置以某种方式被跟踪时，这种方法在极少数情况下不起作用。Adjust.Temp_Copy 将通过这种方式成为未计入的孤儿。

Flat_Get_X 使用 System.Address 代替 access，因为访问常量 Argument 是 Ada 2005 的一个功能，而普通访问不适用于只读 This。

# linux - Linux命令断开机器

> ID：11453104
> 
> 赞同：2
> 
> 时间：2012-07-12T13:40:05.713
> 
> 标签：linux, command, iptables, disconnect

有时我们需要测试某些机器是否断网的场景。即放弃两台机器之间的通信。Linux 提供了一种模拟这种情况的方法。相同的命令是什么？

* * *

我知道的一个命令是

```
iptables -I INPUT -s IP_ADRRESS -j DROP 
```

把那个带回网络

```
iptables -I INPUT -s IP_ADRRESS -j ACCEPT 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:28:20.560

怎么关闭接口？`ifdown eth0`例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:53:19.367

或者，为了补充雅利安的答案，如果您在测试机器上并且想要模拟 IP 地址 IP_REMOTE 的远程机器变得无法访问

`iptables -I OUTPUT -d IP_REMOTE -j DROP`

恢复

`iptables -D OUTPUT -d IP_REMOTE -j DROP`

# javascript - Javascript事件处理程序总是被添加到数组中的最后一个对象

> ID：11453105
> 
> 赞同：2
> 
> 时间：2012-07-12T13:40:06.000
> 
> 标签：javascript, dom-events, addeventlistener, vbulletin

我正在尝试在“切换折叠”按钮（实际上是图像）上执行两项任务：

1.  如果页面的一部分被折叠加载（来自 cookie），则将“折叠”类添加到祖先标记。
2.  添加一个事件处理程序以在单击按钮时切换“折叠”类的存在。

为此，我有以下代码：

```
function toggleCollapsedPlugin(sender, collapseState) {
    // do something
    // expects 1 OR 2 arguments
}

function initCollapsedPlugin() {
    var forumcats = document.getElementById('forums').getElementsByClassName('forumbit_nopost L1');
    var button;
    var buttonParent;
    for (var i = 0; i < forumcats.length; i++) {
        button = forumcats[i].getElementsByTagName('a')[1].getElementsByTagName('img')[0]; // will always exist
        buttonParent = button.parentNode.id; // will never be empty
        if (button.src.indexOf('_collapsed') >= 0) {
            toggleCollapsedPlugin(button.parentNode.id, true);
        }
        button.addEventListener('click', function () { toggleCollapsedPlugin(buttonParent); }, false);
    }
} 
```

当我逐步完成`initCollapsedPlugin()`Chrome DevTools 中的第一项时，一切似乎都很好。当我稍后单击其中一个图像进行调用`toggleCollapsedPlugin(sender)`时，`sender`总是等于`buttonParent`中的**最后**一项`forumcats`。有人可以解释为什么以及如何解决这个问题吗？

（如果它帮助任何人提供答案，这就是 vBulletin4 软件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:47:04.680

这是 JavaScript 闭包的经典“陷阱”。基本上，您的`buttonParent`变量在每次迭代中都会被覆盖，并且您传递给`addEventListener` *引用但不会复制*此变量的匿名函数。

你可能需要类似的东西：

```
button.addEventListener('click', (function (parent) {
    return function() {
        toggleCollapsedPlugin(parent);
    };
})(buttonParent), false); 
```

有关更详细的说明，请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/a/111111/1321716).

但是，在您的情况下，您可以简单地完全摆脱封闭变量并在调用匿名函数时找到按钮的父级。这是有效的，因为`this`回调函数内部引用了注册事件的元素，`button`即在该迭代中引用的元素。

```
button.addEventListener('click', function() {
    return toggleCollapsedPlugin(this.parentNode.id);
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:46:48.627

您正在声明 buttonParent，将其分配给事件调用，然后在循环中更改它，直到最终它引用最后一项。

我认为所有的事件都会指向同一个参考。

代替

```
button.addEventListener('click', function () { toggleCollapsedPlugin(buttonParent); }, false); 
```

和

```
button.addEventListener('click', function () { toggleCollapsedPlugin(this.parentNode.Id); }, false); 
```

按钮对象上的事件中的“this”将是按钮本身

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:01:50.700

您获得 buttonParent 的最后一个值，因为每个事件处理程序都引用相同的变量。buttonParent 被捕获为函数对局部变量的闭包的一部分。

到事件处理程序被调用时，buttonParent 的值已被 for 循环设置为最后一个按钮的父级。

这就是为什么通常不应该在循环中声明函数的原因。通常的解决方案是使用函数调用将值传递给事件处理程序。不是直接调用 addEventListener ，而是调用一个函数，传递要添加侦听器的按钮。调用函数的行为将变量引用复制到函数参数中，因此每个事件侦听器都有一个单独的副本。

```
function(b) {
  var buttonParent=b.parentNode.id;
  b.addEventListener(...)
} (button); 
```

# google-chrome-extension - 我在哪里可以看到哪个 chrome 扩展 API 对哪个 chrome 版本有效

> ID：11453108
> 
> 赞同：2
> 
> 时间：2012-07-12T13:40:08.600
> 
> 标签：google-chrome-extension

我喜欢 chrome 通过其扩展 API 为我提供的功能。但是我总是发现自己迷失在哪个 chrome 版本支持什么 API 以及最后一个 chrome.experimental 功能何时将其纳入支持的扩展的丛林中。

[Chrome 扩展页面](http://code.google.com/chrome/extensions/api_index.html)为我提供了一个很好的概述，它支持什么，但没有提及从什么版本开始。[实验 API 概述](http://code.google.com/chrome/extensions/experimental.html)也是如此。例如，该特定 API 是否仍处于试验阶段，或者它是否已在金丝雀中得到支持。

如果我尝试来自 chrome [Samples 网站](http://code.google.com/chrome/extensions/samples.html)的示例，我通常必须将一些 API 调用从`chrome.experimental.foo`to更改为`chrome.foo`或发现它根本不受支持。（发生了`chrome.experimental.alarm`什么？）这通常意味着只使用试错法来消除所有错误，直到样本起作用。

**tldr;** 所以，我想知道是否有一个概述页面告诉我从什么版本开始，支持什么 API 或何时决定放弃实验性 API。如果没有这样的页面，处理这种情况的推荐方式或您个人的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:47:42.757

在[此页面上](http://www.chromium.org/developers/design-documents/extensions/how-the-extension-system-works/docs/how-docs-are-served)，描述了生成官方文档（自动从 Chrome 存储库中生成）的过程。在同一页面上，您还可以阅读如何检索旧分支的文档。请注意，文档在某种程度上是不完整的：已弃用的 API 会立即包含在内，尽管它们仍然存在（例如[`onRequest`](https://stackoverflow.com/a/11412113/938089?what-is-the-minimum-chrome-version-required-for-chrome-extension-sendmessage)）。

[What's New in Extensions](http://code.google.com/chrome/extensions/whats_new.html)是 API 更改和更新的简短列表（不包括大多数实验性 API）。它必须手动编辑，所以它并不总是最新的。例如，当前稳定版本是 20，但页面的最后一个条目是 19。

如果您*确实*需要包含所有 API 更改的单个页面，可以使用以下方法：

*   首先，安装所有 Chrome 版本。自动完成时这并不耗时：我编写了一个脚本来自动安装 Chrome，它复制了以前的配置文件：请参阅[此答案](https://stackoverflow.com/a/10917231/938089?can-i-run-multiple-versions-of-google-chrome-on-the-same-machine-mac-or-window)。
*   测试特征是否存在：
    1.  编写一个包含所有[权限](http://code.google.com/chrome/extensions/manifest.html#permissions)的清单文件（始终忽略无法识别的权限）。
    2.  Chrome 18+：使用清单版本 1 和 2 复制扩展程序。清单版本 1 中禁用了某些 API（[示例](https://stackoverflow.com/a/11428934/938089?is-localstorage-synchronization-for-chrome-extensions-already-available)）。
    3.  测试一项功能是否已实现并按预期运行是**非常耗时的**。因此，您最好测试 API 是否存在。
        执行此操作的合理方式是递归遍历 的属性`chrome`，并记录结果（显示给用户/发布到服务器）。
*   测试的过程。使用以下方法之一：
    *   使用单个 Chrome 配置文件，并从最低版本开始测试。
    *   为每个 Chrome 版本使用单独的配置文件，以便您可以并排测试多个 Chrome 版本。
*   后处理：解释结果。

获取信息的示例代码：

```
/** 
 * Returns a JSON-serializable object which shows all defined methods
 * @param root    Root, eg.  chrome
 * @param results Object, the result will look like {tabs:{get:'function'}}
 */
function getInfo(root, results) {
    if (root == null) return results;
    var keys = Object.keys(root), i, key;
    results = results || {};
    for (i=0; i<keys.length; i++) {
        key = keys[i];
        switch (typeof root[key]) {
            case "function":
                results[key] = 'function';
            break;
            case "object":
                if (subtree instanceof Array) break; // Exclude arrays
                var subtree = results[key] = {};
                getInfo(root[key], subtree);         // Recursion
            break;
            default:
                /* Do you really want to know about primitives?
                 * ( Such as chrome.windows.WINDOW_ID_NONE ) */
        }
    }
    return results;
}
/* Example: Get data, so that it can be saved for later use */
var dataToPostForLaterComparision = JSON.stringify(getInfo(chrome, {}));
// ... 
```

# asp.net - 如何在我的情况下实施延迟加载？

> ID：11453112
> 
> 赞同：0
> 
> 时间：2012-07-12T13:40:22.827
> 
> 标签：asp.net, asp.net-ajax, lazy-loading, ajaxcontroltoolkit

我有一个系统管理员选项卡，单击时会生成很多动态和数据库驱动的 ajax 选项卡面板......

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<br />
<ajaxToolkit:TabContainer ID="TabContainer1" runat="server" Width="100%" ActiveTabIndex="0"
    CssClass="ajax__tab_header">
    <ajaxToolkit:TabPanel ID="TPAdjCal" Width="100%" runat="server">
        <HeaderTemplate>
            <img runat="server" id="imgAdjCalendarleft" visible="false" alt="" src="../images/Tabs/GreenLeftBottom.gif" /><asp:Button
                ID="imgAdjCalendar" BorderStyle="none" Text="" CssClass="MainTabs"
                runat="server"></asp:Button><img alt="" src="../images/Tabs/GreenRightBottom.gif"
                    runat="server" id="imgAdjCalendarright" visible="false" />
        </HeaderTemplate>
        <ContentTemplate>
            <table class="HeaderCaption" id="Table1" cellspacing="0" cellpadding="3" width="100%"
                border="0" runat="server">
                <tr class="PagerRow">
                    <td>
                        <asp:Label ID="HeaderLabel1" runat="server" Text="Label"></asp:Label>
                        <asp:Label ID="FunctionCode1" runat="server" Text="" Visible="false"></asp:Label>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
            </table>
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
    <ajaxToolkit:TabPanel ID="TabContainer2" Width="100%" runat="server">
        <HeaderTemplate>
            <img runat="server" id="imgPoliceReportsleft" visible="false" alt="" src="../images/Tabs/GreenLeftBottom.gif" /><asp:Button
                ID="imgPoliceReports" BorderStyle="none" Text="" CssClass="MainTabs"
                runat="server"></asp:Button><img alt="" src="../images/Tabs/GreenRightBottom.gif"
                    runat="server" id="imgPoliceReportsright" visible="false" />
        </HeaderTemplate>
        <ContentTemplate>
            <table class="HeaderCaption" id="Table2" cellspacing="0" cellpadding="3" width="100%"
                border="0" runat="server">
                <tr class="PagerRow">
                    <td>
                        <asp:Label ID="HeaderLabel2" runat="server" Text="Label"></asp:Label>
                        <asp:Label ID="FunctionCode2" runat="server" Text="" Visible="false"></asp:Label>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
            </table>
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
 </ajaxToolkit:TabContainer> 
```

代码隐藏：当单击系统管理员选项卡时，我调用一个加载选项卡的 loadmanager 方法.. 下面的示例

```
 protected void LoadManagerTabs(bool runFirstLoad)
        {
       if (Session["UserSystemTabs"] == null)
          {
     postMessage("You do not have access to any system functions", Constants.ERROR_MSG,false);
        return;
    }

    string[,] functions = Session["UserSystemTabs"] as string[,];

    functions.GetLength(0);
    if (functions.GetLength(0) > 0)
    {
        string funccode = functions[0, 0];
        if (funccode.Length > 0)
        {
            if (isHaveAccess(funccode))
            {
                string pagename = DBUtils.getFuncUrlByCode(funccode);
                try
                {
                    eClaim.Controls.Tables.DataTables contr = null;
                    contr = (eClaim.Controls.Tables.DataTables)LoadControl("~/" + pagename + ".ascx");
                    contr.Key = "";
                    contr.runPageLoad = runFirstLoad;

                    contr.FuncCode = funccode;
                    TPAdjCal.Controls.Add(contr);
                    TPAdjCal.Visible = true;
                    imgAdjCalendar.Text = functions[0, 1];
                    HeaderLabel1.Text = functions[0, 1];
                    FunctionCode1.Text = functions[0, 0];
                    //imgAdjCalendar.Visible = true;
                }
                catch
                {
                    DataTablesV2 contr = null;
                    contr = (DataTablesV2)LoadControl("~/" + pagename + ".ascx");
                    contr.Key = "";
                    //contr.runPageLoad = runFirstLoad;

                    if (ShouldRunPageLoad(funccode) && TabContainer1.ActiveTabIndex.Equals(0))
                    {
                        contr.runPageLoad = true;
                    }
                    else
                    {
                        contr.runPageLoad = false;
                    }

                    contr.FuncCode = funccode;
                    TPAdjCal.Controls.Add(contr);
                    TPAdjCal.Visible = true;
                    imgAdjCalendar.Text = functions[0, 1];
                    HeaderLabel1.Text = functions[0, 1];
                    FunctionCode1.Text = functions[0, 0];
                    //imgAdjCalendar.Visible = true;
                }

                if (TabContainer1.ActiveTabIndex.Equals(0))
                {
                    imgAdjCalendar.CssClass = "MainTabsSelected";
                    imgAdjCalendarleft.Src = "../images/Tabs/LightGreenLeftBottom.gif";
                    imgAdjCalendarright.Src = "../images/Tabs/LightGreenRightBottom.gif";
                }
                else
                {
                    imgAdjCalendar.CssClass = "MainTabs";
                    imgAdjCalendarleft.Src = "../images/Tabs/GreenLeftBottom.gif";
                    imgAdjCalendarright.Src = "../images/Tabs/GreenRightBottom.gif";
                }
            }
            else
            {
                TPAdjCal.Visible = true;
                imgAdjCalendar.Visible = false;
                imgAdjCalendarleft.Visible = false;
                imgAdjCalendarright.Visible = false;
            }
        }
    }
    else
    {
        TPAdjCal.Visible = true;
        imgAdjCalendar.Visible = false;
        imgAdjCalendarleft.Visible = false;
        imgAdjCalendarright.Visible = false;
        imgTabScrollright.Visible = false;
        btnTabScroll.Visible = false;
        imgTabScrollleft.Visible = false;
    }

    if (functions.GetLength(0) > 1)
    {
        string funccode = functions[1, 0];
        if (funccode.Length > 0)
        {
            if (isHaveAccess(funccode))
            {
                string pagename = DBUtils.getFuncUrlByCode(funccode);
                try
                {
                    eClaim.Controls.Tables.DataTables contr = null;
                    contr = (eClaim.Controls.Tables.DataTables)LoadControl("~/" + pagename + ".ascx");
                    contr.Key = "";
                    contr.runPageLoad = runFirstLoad;
                    contr.FuncCode = funccode;
                    TabContainer2.Controls.Add(contr);
                    TabContainer2.Visible = true;
                    imgPoliceReports.Text = functions[1, 1];
                    HeaderLabel2.Text = functions[1, 1];
                    FunctionCode2.Text = functions[1, 0];
                    //imgPoliceReports.Visible = true;
                }
                catch
                {
                    DataTablesV2 contr = null;
                    contr = (DataTablesV2)LoadControl("~/" + pagename + ".ascx");
                    contr.Key = "";
                    contr.runPageLoad = runFirstLoad;
                    contr.FuncCode = funccode;
                    TabContainer2.Controls.Add(contr);
                    TabContainer2.Visible = true;
                    imgPoliceReports.Text = functions[1, 1];
                    HeaderLabel2.Text = functions[1, 1];
                    FunctionCode2.Text = functions[1, 0];
                    //imgPoliceReports.Visible = true;
                }

                if (TabContainer1.ActiveTabIndex.Equals(1))
                {
                    imgPoliceReports.CssClass = "MainTabsSelected";
                    imgPoliceReportsleft.Src = "../images/Tabs/LightGreenLeftBottom.gif";
                    imgPoliceReportsright.Src = "../images/Tabs/LightGreenRightBottom.gif";
                }
                else
                {
                    imgPoliceReports.CssClass = "MainTabs";
                    imgPoliceReportsleft.Src = "../images/Tabs/GreenLeftBottom.gif";
                    imgPoliceReportsright.Src = "../images/Tabs/GreenRightBottom.gif";
                }
            }
            else
            {
                TabContainer2.Visible = true;
                imgPoliceReports.Visible = false;
                imgPoliceReportsleft.Visible = false;
                imgPoliceReportsright.Visible = false;
            }
        }
    }
    else
    {
        TabContainer2.Visible = true;
        imgPoliceReports.Visible = false;
        imgPoliceReportsleft.Visible = false;
        imgPoliceReportsright.Visible = false;
        imgTabScrollright.Visible = false;
        btnTabScroll.Visible = false;
         imgTabScrollleft.Visible = false;
    } 
```

我正在尝试实现延迟加载，因此当单击 sysadmin 选项卡时，只会加载第一个选项卡数据，而不是所有选项卡。我一直在寻找，但我没有找到任何可以帮助我解决我的情况...任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:45:07.893

问题是您想要的不适用于网络表单。至少不是这样。您可能想尝试使用多视图控件。并且，可能会动态地将视图添加到多视图中，但它们都需要在每次请求时创建，以便视图在 web 表单中正常运行。

I would also try to encapsulate the UI details into webusercontrols (ascx) and load the user controls dynamically. this way you can keep most of the layout in design time, rather than runtime.

# concatenation - 使用 C 预处理器连接以指数表示法获取数字

> ID：11453117
> 
> 赞同：8
> 
> 时间：2012-07-12T13:40:50.630
> 
> 标签：concatenation, c-preprocessor

为什么要编码：

```
#define EXPONENT(num, exp) num ## e ## exp
EXPONENT(1,1)
EXPONENT(1,-1)
EXPONENT(1,+1) 
```

预处理后变为：

```
1e1
1e- 1
1e+ 1 
```

而不是进入

```
1e1
1e-1
1e+1 
```

? 我怀疑这可能是因为 -1,+1 被解析为两个标记（？）。但是，在那种情况下如何获得后者的结果呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:37:13.907

你是对的，`-1`并且`+1`是两个预处理标记，因此只有第一个被粘贴到`e`.

为了我，

```
#define EXPO(num, sign, ex) num ## e ## sign ## ex

EXPO(1,,1)
EXPO(1,-,1)
EXPO(1,+,1) 
```

使用 gcc-4.5.1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T14:35:11.007

我认为您遇到的问题被认为是未定义的行为。根据[gcc 4.3.2 关于连接的文档](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/cpp/Concatenation.html)：

> 但是，不能将不一起形成有效令牌的两个令牌粘贴在一起。例如，您不能以任一顺序将 x 与 + 连接。如果您尝试，预处理器会发出警告并发出两个令牌。是否在标记之间放置空白是未定义的。在复杂的宏中经常会发现不必要的 ## 用法。如果您收到此警告，很可能您可以简单地删除“##”。

另请参阅关于 SO 的[这个答案，它表现出同样的问题。](https://stackoverflow.com/a/216975/195488)

编辑：

我设法让它工作，但你需要两个宏来表示 + 和 -

```
#define E(X) 1e-##X
int main()
{
  double a = E(10); // expands to 1e-10
  printf("%e", a);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T15:18:25.980

```
#include <stdio.h>
#include <stdlib.h>

#define EXPONENT(num, exp) atof(#num "e" #exp)

void main(){
    double x = EXPONENT(1,-1); 
    printf("%f", x);
} 
```

# android - Android 上的 GStreamer x264enc 和 SIGSEGV

> ID：11453123
> 
> 赞同：1
> 
> 时间：2012-07-12T13:41:18.820
> 
> 标签：android, gstreamer, segmentation-fault, x264, libx264

我正在尝试使用 GStreamer-java，它是 Android 上的 h.264 编码器 (x264enc)。

现在，我尝试对来自测试视频源的原始视频进行编码（将其**is-live**属性设置为**TRUE**），当数据开始流入 x264enc 元素时，我在 libx264.so 中获得 SIGSEGV 并且我的应用程序崩溃。看起来代码正在取消引用 NULL... 确切的错误位置在文件“gstreamer_ndk_bundle/x264/encoder/analyze.c”第 963 行中。就是这一行：

```
h->mc.memcpy_aligned( h->mb.pic.i8x8_dct_buf, h->dct.luma8x8, sizeof(h->mb.pic.i8x8_dct_buf) ); 
```

我的设备的 CPU 是 Cortex 8，它具有 NEON 功能...

我试图将所有`h`结构字段打印到文件中，并且没有未初始化的字段。

来自 LogCat 的 Android 调试信息：[这里](http://pastebin.com/cyZqwXz6)

### 我的问题：

1.  我怎么知道是什么在抛出 SIGSEGV，因为这行代码似乎没问题？
2.  这是 ARM CPU 上 x264 编码器的已知错误或预期行为，还是我缺少一些编码器配置？
3.  我注意到如果我将编码器的属性**分析设置为****0x3:0x113**（*我在网上找到的一些随机值*）我没有得到 SIGSEGV，编码器似乎工作，但我在管道中得到错误：*数据流错误*。我可以将**分析**设置为有意义的值吗？

### 更新

我在 x264_mb_analysis_intra() 函数中运行之前以及在它中断的行之前对所有重要的“h”字段进行了 fprintf 编辑，猜测它可能会有所帮助： [http://pastebin.com/sAfX239j](http://pastebin.com/sAfX239j)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:10:03.823

正如您在[此处](http://mailman.videolan.org/pipermail/x264-devel/2012-July/009434.html)看到的，问题出在`x264_memcpy_aligned`函数中，由于某种原因跳转到零地址，这使得 SIGSEGV 发生。要修复此注释，请执行以下操作：

```
pf->memcpy_aligned = x264_memcpy_aligned_neon; 
```

在文件`/x264/common/arm/mc-c.c`. 它应该是第 250 行，但我发现它不是，所以搜索那个文本，它只在文件中出现一次。

现在 x264enc 正在 Android 上运行，但对 NEON 的支持较少......

如果你关注[这个帖子](http://mailman.videolan.org/pipermail/x264-devel/2012-July/009434.html)，你会看到人们正在努力解决这个问题，所以这个黑客很快就会变得不重要。

如果您想自己调试，请参阅以下内容：

1.  [堆栈跟踪](http://pastebin.com/n0eXAaZv)
2.  [在它中断的函数之前和它中断的行之前的字段值](http://pastebin.com/sAfX239j)
3.  [未剥离的 libx264.so 库的 ELF](http://pastebin.com/JZWWGtz4)

# ruby-on-rails-3 - 用 sidekiq 调试工人？

> ID：11453129
> 
> 赞同：3
> 
> 时间：2012-07-12T13:41:25.137
> 
> 标签：ruby-on-rails-3, debugging, sidekiq

我将我的 ruby​​ on rails 应用程序从 resque 转换为 sidekiq gem，以减少内存使用和更快的响应时间。

问题：

*   我的一位工作人员有错误，与 resque-web 不同，sidekiq-web 没有显示错误的完整详细信息（如行号和错误原因）
*   我无法正确调试我的工作人员，是否有解决方法？在终端我只是得到类似的东西

错误：

```
 2012-07-12T13:26:19Z 64455 TID-ousyenaqg WARN: undefined method `perform' for #<BookInit:0x007f8c6f73f520> 
```

更精确的错误是必须的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:25:49.390

尝试改变

```
def self.perform(params...) 
```

到

```
def perform(params...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T13:25:05.230

将下一个代码添加到 rake 任务，然后像以前使用 resque 一样对其进行调试

```
require 'sidekiq'
require 'sidekiq/cli'

desc 'Runs Sidekiq as a rake task'
task :debug_sidekiq => :environment do
  begin
    cli = Sidekiq::CLI.instance
    cli.parse
    cli.run
  rescue => e
    raise e if $DEBUG
    STDERR.puts e.message
    STDERR.puts e.backtrace.join("\n")
    exit 1
  end
end 
```

代码取自 sidekiq/bin/sidekiq

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-28T06:59:58.143

**使用 Pry 调试 Sidekiq：**

通常，Sidekiq 服务器在执行语句时不会启动 Pry。

您可以使用[Sidekiq 内联基础设施](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/testing/inline.rb)通过 pry调试 Sidekiq：

*Sidekiq 内联基础设施覆盖 perform_async 并且它实际上调用**perform**而不是**perform_async**。这允许工作人员在测试环境中内联运行。*

您需要将以下内容添加到您的代码中：

```
require 'sidekiq'
require 'sidekiq/testing/inline' 
```

现在 Pry 将能够调用 perform 方法。

**注意**：如果您必须在线程环境中运行作业以测试并发性或性能，这对您没有帮助。

# c# - 复选框按钮上的图标

> ID：11453131
> 
> 赞同：1
> 
> 时间：2012-07-12T13:41:27.973
> 
> 标签：c#, winforms, button, checkbox

我想在 Visual Studio 2010，c# 中的按钮（它是复选框，但外观像按钮）上放置标志性符号。所以有人能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:45:37.673

设置 Image 属性或通过这样的代码`button.Image = new Bitmap("Click.jpg");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:53:33.053

选择`Image`复选框的属性。选择`Local resource > Import`并导航到您的图标文件。默认情况下不会显示图标文件，因此您需要选择`All Files (*.*)`过滤器。

如果你想从代码中设置图标，你可以这样做：

```
checkBox.Image = new Icon(pathToIconFile).ToBitmap(); 
```

更新：您不能缩放或拉伸通过`Image`属性分配的图像。在这种情况下，您需要改用`BackgrounImage`属性：

```
checkBox.BackgroundImage = new Icon(pathToIconFile).ToBitmap();
checkBox.BackgroundImageLayout = ImageLayout.Stretch; 
```

您也可以通过编程方式调整图像大小，或者在方法中手动绘制它`OnPaint`，但这需要更多的努力。

更新：调整图像大小

```
public static Bitmap ResizeImage(Image image, Size size)
{            
    Bitmap result = new Bitmap(size.Width, size.Height);

    using (Graphics graphics = Graphics.FromImage(result))
    {                
        graphics.CompositingQuality = CompositingQuality.HighQuality;
        graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
        graphics.SmoothingMode = SmoothingMode.HighQuality;
        graphics.DrawImage(image, 0, 0, result.Width, result.Height);
    }

    return result;
} 
```

用法：

```
const int padding = 6;
Size size = new Size(checkBox.Width - padding, checkBox.Height - padding);
checkBox.Image = ResizeImage(new Icon(pathToIconFile).ToBitmap(), size); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:44:18.913

[System.Windows.Forms.CheckBox.Image](http://msdn.microsoft.com/en-us/library/system.windows.forms.buttonbase.image.aspx)

# python - 如何删除 numpy.ndarray 中包含非数字值的所有行

> ID：11453141
> 
> 赞同：107
> 
> 时间：2012-07-12T13:41:52.323
> 
> 标签：python, numpy

基本上，我正在做一些数据分析。我在数据集中读取为 numpy.ndarray 并且缺少一些值（只是不存在，存在`NaN`，或者是写成“ `NA`”的字符串）。

我想清除所有包含此类条目的行。我如何使用 numpy ndarray 做到这一点？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-07-12T13:46:17.153

```
>>> a = np.array([[1,2,3], [4,5,np.nan], [7,8,9]])
array([[  1.,   2.,   3.],
       [  4.,   5.,  nan],
       [  7.,   8.,   9.]])

>>> a[~np.isnan(a).any(axis=1)]
array([[ 1.,  2.,  3.],
       [ 7.,  8.,  9.]]) 
```

并将其重新分配给`a`.

说明：在其他地方返回一个与where类似的`np.isnan(a)`数组。将数组简化为对整行进行逻辑运算，反转并仅选择原始数组中括号内的行。`True``NaN``False``.any(axis=1)``m*n``n``or``~``True/False``a[ ]``True`

# mysql - Mysql在按YEAR查询时查询奇怪的结果集

> ID：11453142
> 
> 赞同：2
> 
> 时间：2012-07-12T13:41:52.417
> 
> 标签：mysql

好的，这是我的问题。我试图在这些年来每月获得专辑数量。这是我的查询

```
SELECT DATE(a.date), COUNT(a.id) 
FROM album a 
JOIN event e ON e.id = a.event_id  
WHERE  YEAR(a.date) >= 2001 
AND e.client_id = 89 
GROUP BY MONTH(a.date) 
ORDER BY a.date DESC 
```

返回的结果是

```
+--------------+-------------+
| DATE(a.date) | COUNT(a.id) |
+--------------+-------------+
| 2011-09-09   |          15 |
| 2011-08-26   |           9 |
| 2010-01-01   |          28 |
| 2006-03-03   |          20 |
| 2005-12-02   |          20 |
| 2005-11-11   |          15 |
| 2005-10-07   |          13 |
| 2005-07-01   |          12 |
| 2005-06-03   |           6 |
| 2005-05-06   |          18 |
| 2005-04-15   |          15 |
| 2005-02-04   |          22 |
+--------------+-------------+
12 rows in set (0.00 sec) 
```

这个结果集缺少 2012 年的结果但是如果我写这个

```
SELECT DATE(a.date), COUNT(a.id)
FROM album a 
JOIN event e ON e.id = a.event_id 
WHERE 
YEAR(a.date) > 2005
AND e.client_id = 89 GROUP BY MONTH(a.date)
ORDER BY a.date DESC; 
```

现在我得到了 2012 年，但我错过了 2005 年：/ 有人可以向我解释一下吗？

```
+--------------+-------------+
| DATE(a.date) | COUNT(a.id) |
+--------------+-------------+
| 2012-06-01   |           2 |
| 2012-05-04   |          14 |
| 2012-04-06   |          13 |
| 2011-12-02   |          10 |
| 2011-11-04   |           9 |
| 2011-10-07   |          10 |
| 2011-09-09   |           9 |
| 2011-08-26   |           6 |
| 2010-01-01   |          26 |
| 2006-07-07   |           8 |
| 2006-03-03   |          19 |
| 2006-02-03   |          16 |
+--------------+-------------+
12 rows in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:48:05.020

您正在分组，`MONTH`所以我相信您所有的年度数据都被合并为一个计数（请注意，您每次获得 12 行，每个月 1 行）。我想你可以通过按年和月分组来解决这个问题......

```
GROUP BY YEAR(a.date)
GROUP BY MONTH(a.date) 
```

（无论如何，对于第一种情况，对于第二种情况，您不会通过调用获得 2005 年的数据`year > 2005`，正如 silly 指出的那样）

# iphone - 从核心数据加载

> ID：11453143
> 
> 赞同：0
> 
> 时间：2012-07-12T13:41:54.013
> 
> 标签：iphone, objective-c, core-data

我将各种实体保存到核心数据中。每次我需要访问这些数据时，我都会从核心数据中读取数据并将所需的实体分配给一个可变数组。

```
if (managedObjectContext == nil) 
{ 
    managedObjectContext = [(iForgetAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
}
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:managedObjectContext];
[request setEntity:entity];
NSError *error = nil;
NSMutableArray *mutableFetchResults = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
if (mutableFetchResults == nil)
{
    // Handle the error.
    NSLog(@"mutableFetchResults == nil");
}
[self setEventsArray:mutableFetchResults];
[eventsTableView reloadData]; 
```

问题是，我正在从应用程序的许多不同页面中检索这些数据。

使用 Core Data 的最佳实践是什么？我应该只在 App Delegate 中加载数据并在那里分配数组吗？

非常感谢所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:46:09.313

您使用可变数组的设置已经是不好的做法。核心数据可以排序、过滤和显示，可以说比可变数组好得多。

您应该考虑使用 a`NSFetchedResultsController`来显示您的数据。您可以使用谓词和排序描述符进行过滤和排序。这样的解决方案应该无限地更加健壮和可扩展。

至于您关于保存的具体问题，您可以使用托管对象上下文（在您的类中保留一个引用或从应用程序委托中获取它）将该数据保存在任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:48:26.603

使用`NSFetchedResultsController`为您提供所需的功能。确保也使用该`NSFetchedResultsControllerDelegate`协议。用于`NSFetchRequest`通过排序等进行检索。

# pdf - PDF 中的屏幕阅读器

> ID：11453147
> 
> 赞同：2
> 
> 时间：2012-07-12T13:42:00.960
> 
> 标签：pdf, screen-readers

有人使用或知道 PDF 格式的屏幕阅读器，例如*NVDA*吗？

我想弄清楚一些关于PDF屏幕阅读器的问题：

1.  什么屏幕阅读器可以阅读 PDF？我的意思是，如果我想创建一个 PDF 阅读器（例如使用 C#），我应该使用什么？
2.  如何在屏幕阅读器中使用特殊语言（例如希伯来语或波斯语）？我可以在屏幕阅读器中将默认语言更改为特殊语言吗？
3.  如果我可以更改默认语言，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:58:30.237

YMS 的回答是正确的。

> 1.PDF的屏幕阅读器支持什么？

获得最多支持的屏幕阅读器是 JAWS，这是因为 Freedom Scientific 和 Adob​​e 合作得非常密切。NVDA 也有很好的支持。ZoomText 在 Adob​​e Reader 中获得了成功或错过的支持，而在 Acrobat 中几乎没有。

> 我的意思是，如果我想创建一个 PDF 阅读器（例如使用 C#），我应该使用什么？

老实说，甚至不要尝试。Freedom Scientific 花了大约 10 年的时间才让 JAWS 和 Acrobat/Reader 能够体面地协同工作。

> 2.如何在屏幕阅读器中使用特殊语言（如希伯来语或波斯语）？我可以在屏幕阅读器中将默认语言更改为特殊语言吗？

请参阅我[关于本地化字符串的回答](https://stackoverflow.com/questions/11260611/what-is-a-correct-approach-to-using-strong-em-tags-when-localising-strings/11265602#11265602)，但 JAWS 甚至不支持这些语言。因此，我将第一页标记为图像并添加“此 PDF 是希伯来语，请返回主页以获取 ___ 版本”的替代。我不知道那些语言，所以我不知道提供直接英文版本还是您提到的语言的罗马化版本更实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:12:48.113

您可以在 webaim 网站上找到信息：[http ://webaim.org/techniques/acrobat/](http://webaim.org/techniques/acrobat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:47:49.060

AFAIK、屏幕阅读器和 PDF 文件（通常）相处得不好。但是，您可以使用专门为屏幕阅读器创建的 PDF 文件。有关更多详细信息，请参阅此帖子：[什么是“PDF 标签”，我为什么要关心？](http://acrobatusers.com/tutorials/what-are-pdf-tags-and-why-should-i-care)

对于非最佳解决方案，您将需要一个允许从 PDF 文件中提取 unicode 文本的组件。您将在 SO 中找到许多关于[PDF 文本提取的问题和答案。](https://stackoverflow.com/search?q=PDF+text+extraction)

# javascript - 为什么 Jquery mobile 在桌面浏览器上显示移动友好的外观？

> ID：11453149
> 
> 赞同：0
> 
> 时间：2012-07-12T13:42:10.023
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在尝试了解 Jquery mobile。我只是参考演示并从我的桌面浏览器 (Chrome) 中查看它

这是演示链接：

[http://jquerymobile.com/demos/1.1.1/docs/forms/switch/](http://jquerymobile.com/demos/1.1.1/docs/forms/switch/)

我的问题是为什么选择看起来像是在 Ipad 或其他东西中查看的？我希望 Jquery mobile 仅在从移动设备查看时才起作用。我不希望这种样式显示在我的台式计算机上。在台式计算机上，`select`选择应该看起来很简单，`options`而在移动设备上，它应该看起来更像演示（触发器）中显示的内容。

我可以用 Jquery mobile 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:47:28.143

为此，您需要某种设备识别和路由引擎。它实际上与 jQuery mobile 没有任何关系，而是与您使用的后端框架有关。当我使用MVC3和jQuery mobile时，我购买了51degrees.mobi数据库，然后根据用户代理识别的结果为用户提供不同的视图。我希望这有帮助。

编辑

我认为您可以在所有 asp.net 项目中使用 51degrees.mobi 数据库。基本上它会向 Request.Browser 添加更多数据，然后您可以将用户重定向到不同的 URL 或像 m.yoursite.com 这样的子域

```
if(Request.Browser["IsTablet"] == 'true' || Request.Browser["IsMobile"] == 'true')
{
    //redirect here
} 
```

# javascript - Three.js 的dirtyVertices 不起作用

> ID：11453151
> 
> 赞同：3
> 
> 时间：2012-07-12T13:42:13.690
> 
> 标签：javascript, webgl, three.js

我在 three.js 中创建了一个 12*12 平面，并尝试在 2 次渲染之间编辑它的垂直，但它不起作用。

我添加了这段代码，但没有任何改变：

```
ground.geometry.dynamic = true;
ground.geometry.__dirtyVertices = true;
ground.geometry.computeCentroids(); 
```

代码在这里：http: [//jsfiddle.net/vpBEG/2/](http://jsfiddle.net/vpBEG/2/)

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:15:30.907

对于 Three.js r.49，您需要使用

```
ground.geometry.verticesNeedUpdate = true; 
```

参见维基：[https ://github.com/mrdoob/three.js/wiki/Updates](https://github.com/mrdoob/three.js/wiki/Updates)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T15:07:08.150

您必须在每次渲染后重置标志：

```
ground.geometry.verticesNeedUpdate = true; 
```

查看[您的小提琴的更新](http://jsfiddle.net/vpBEG/5/)

# ruby-on-rails - 应该/RSpec：确保验证消息“xxx”在：base

> ID：11453152
> 
> 赞同：0
> 
> 时间：2012-07-12T13:42:14.040
> 
> 标签：ruby-on-rails, ruby, validation, rspec, shoulda

我仍然对诸如此类的东西背后的魔法`it { should have(1).error_on(:base) }`以及特定的应该匹配器是什么感到很困惑。

我想确保它`:base`包含错误消息“xxx”，那么我应该怎么做呢？

```
it "should contain error message 'xxx'" do
  contact.valid?
  contact.errors[:base].should include('xxx')
end 
```

这是“要走的路”，还是有更好的？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:33:08.650

没错，看起来不错。内联 rspec 测试正在使用主题。你可以像这样重写你的测试：

```
describe 'my method' do
  before { contact.valid? }

  context 'contact is not valid' do
    subject { contact.errors[:base] }
    it { should include 'xxx' }
  end
end 
```

在主题上调用 should 方法。有时它可能更具可读性。而且您不必为不言自明的规格编写描述；-)

# c# - 如何聚集一系列消息

> ID：11453153
> 
> 赞同：0
> 
> 时间：2012-07-12T13:42:17.340
> 
> 标签：c#, math, testing, scheduling, messaging

我正在编写一个用于对服务器进行压力测试的测试应用程序。我有一个需要在给定时间间隔内发送的消息列表，但我感兴趣的不仅仅是以统一的间隔发送它们，而是将消息“聚集”在一起以模拟突发。这将由 UI 中的滑块控制 - 一端是统一的，另一端是“块状”。有没有一种简洁的数学方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:49:19.747

以下是我认为可行的方法：

```
var rngClumpMax = new Random();
var clumpMin = 1;
var clumpMax = 1;
var clumpSize = 1;

clumpSize = rngClumpMax.Next(clumpMin, clumpMax);

while (true)
{
    List<string> messages = FetchMessages(clumpSize);
    if (messages.Count > 0)
    {
        SendMessages(messages);
    }
    else
    {
        break;
    }
} 
```

滚动条可以设置 的值`clumpMax`，因此您可以在大小为 1 和`N`滚动条的某个值之间生成块。

如果你有一个带有双滚动的控件，你可以设置 even并在和之间`clumpMin`生成一个随机数。`clumpSize``clumpMin``clumpMax`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:33:47.367

所以假设你有一个滑块，最大值，一个时间间隔 T，你可以分成 N 个部分，以及你想要发送的消息总数 M。然后在 N 时分，我会发送

```
(M/N)*(max(1-slider/max)+k*(slider/max)cosine(PI*N/T)) 
```

当滑块 = 0 时，这将提供完全的一致性，每个间隔都有 M/N 条消息到达。当slider=max时，均匀性会被完全衰减，可以调整参数k，使clumping更加极端。

# php - 在 jquery 中追加 PHP

> ID：11453158
> 
> 赞同：-1
> 
> 时间：2012-07-12T13:42:30.507
> 
> 标签：php, jquery

> **可能重复：**
> [创建对 PHP 函数的 jQuery AJAX 请求](https://stackoverflow.com/questions/7016701/creating-jquery-ajax-requests-to-a-php-function)

我如何在 Jquery 中编写 PHP

有没有办法做到这一点

```
 $('button').click(function(){
       <?php  session_destroy();?>
      }) ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T13:44:25.147

您不能执行 PHP 客户端。

# 但

您可以在单击时调用 php 脚本来执行您想要的操作：

```
$('button').click(function(){
   $.get("destroySession.php");
}); 
```

* * *

您还可以`get`或`post`一些值：

```
var values = {
     destroy: true
};

//get request:
$.get("destroySession.php", values);

//post request:
$.post("destroySession.php", values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:43:24.243

您不能执行 PHP 客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:44:11.660

你不能。**PHP**在**服务器端**进行解释，而**jQuery**在**客户端**进行解释。

您应该使用锚点`<a href="session_destroy.php">`转到另一个 PHP 页面并销毁会话，或者使用[**AJAX**](http://api.jquery.com/jQuery.get/)在不离开页面的情况下调用销毁函数。

```
jQuery('button').click( function () { jQuery.get("session_destroy.php"); } ); 
```

# php - 如果选中，则输入动态创建到 MySQL 中的复选框值

> ID：11453161
> 
> 赞同：0
> 
> 时间：2012-07-12T13:42:55.843
> 
> 标签：php

我正在从 MySQL 中的问题表中提取问题并以表格形式填充它们。这工作正常，我正在填充复选框，并且该值是用 QuestionID 填充的。该数组已正确填充，但我想获取选中复选框的值（这是我的问题 ID）并将该 ID 插入到表中，以便我有选择的问题供其 ID 使用。这是我到目前为止所拥有的：

```
//Declare the QuestionID as a array
$QuestionID = array();

while($row = mysqli_fetch_array($run,MYSQLI_ASSOC)){
echo '<div id="QuestionSelection"><input id="chkQuestion" type="checkbox" value=" '.$row['QuestionID'].'" name=chkQuestion align="left"/><p>' . $row['Question'] .'</p></div><br/><br/>';

//Assign the QuestionID from the table to the var
$QuestionID[] = $row['QuestionID'];

}

if($_POST['submitted']) { 

if (isset($_POST['chkQuestion']))
{
//create the query for the score
$sql2 = "INSERT INTO tbl_QuestionSelected (`QuestionID`) VALUES ($QuestionID)"; 

//Run the query 
$run2 = @mysqli_query ($conn,$sql2);

//Confirm message data was entered with a correct response and a graphic
echo '<h1>Submitted!!</h1>';

}

}//End of IF 'submitted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:49:17.627

尝试循环您的 ID 并逃脱它！

```
 $ids_list = '';
    foreach($_POST["chkQuestion"] as $id)
    {
        $ids_list .= (strlen($ids_list) > 0 ? ',' : '').mysql_real_escape_string($id);
    }

    $sql2 = "INSERT INTO tbl_QuestionSelected (`QuestionID`) VALUES (".$ids_list.")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:46:25.367

你想在一个语句中插入多条记录是我的理解。

```
$sql2 = "INSERT INTO `tbl_QuestionSelected` (`QuestionID`) VALUES(". implode('),(', $QuestionID) . ")"; 
```

`$QuestionID`这将在里面加入每个索引`),(`

如果你要回声`$sql2`，你会得到

```
INSERT INTO `tbl_QuestionSelected` (`QuestionID`) VALUES(1),(2),(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:51:51.977

您可以使用循环来获取检查的问题。

```
for($i=0;$i<count($_POST["chkQuestion"]);$i++) {
  "INSERT INTO tbl_QuestionSelected (QuestionID) VALUES('".$_POST["chkQuestion"][$i]."');
} 
```

这样，MySQL 语句就有了要插入到表中的实际值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:08:43.477

这将根据值的数组分配值并将其插入 MySQL：

```
//Declare the QuestionID as a array
$QuestionID = array();

while($row = mysqli_fetch_array($run,MYSQLI_ASSOC)){
echo '<div id="QuestionSelection"><input id="chkQuestion" type="checkbox" value=" '.$row['QuestionID'].'" name="QuestionID[' . $row['QuestionID'] . ']">' .$row['Question']. '</p></div><br/><br/>';

//Assign the QuestionID from the table to the var
$QuestionID[] = $row['QuestionID'];

}

if($_POST['submitted']) { 

$ids_list = '';

foreach($_POST["QuestionID"] as $key=>$value) {
{
$ids_list .= (strlen($ids_list) > 0 ? ',' : '').mysql_real_escape_string($value);
}

$sql2 = "INSERT INTO tbl_QuestionSelected (`QuestionID`) VALUES (".$ids_list.")";

//Run the query 
$run2 = @mysqli_query ($conn,$sql2);

}//End of IF 'submitted
} 
```

# android - 是否可以使用 Android WebView Api 进行 http post

> ID：11453164
> 
> 赞同：0
> 
> 时间：2012-07-12T13:42:58.090
> 
> 标签：android, android-webview

> **可能重复：**
> [Android 中对 WebView 的 HTTP POST 响应](https://stackoverflow.com/questions/9373103/http-post-response-into-webview-in-android)

在我的 Android 应用程序中，我想在 HTML、CSS 中使用 Web View 中的 View 部分。是否可以在这个 webview API 中使用 jquery ajax 进行 http 发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:45:37.987

你可以这样做

```
WebView webview = findviewbyid(R.id.webview);
byte[] post = EncodingUtils.getBytes("postvar=value", "BASE64");
webview.postUrl("http://www.mysite.com/post", post); 
```

# matlab - Matlab获取包含变量名的字符串

> ID：11453165
> 
> 赞同：25
> 
> 时间：2012-07-12T13:43:00.347
> 
> 标签：matlab

在 Matlab 中，我怎样才能得到一个包含`"GRUMPY"`给定以下声明的字符串：

```
 GRUMPY = 500; 
```

这通常在其他编程语言中称为反射，但我在 Matlab 中找不到它的示例。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-12T13:51:11.850

MATLAB 没有为此提供内置功能，但有一种解决方法，如此处所[采用](https://stackoverflow.com/a/6682015/38281)

本质上，您必须创建自己的函数来执行此操作。利用 Matlab 的功能将 INPUT ARGUMENT 的变量名称传递给函数。

IE

```
function out = varname(var)
  out = inputname(1);
end 
```

然后

```
GRUMPY = 500;
name = varname(GRUMPY) 
```

会给你你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:53:44.470

如果我理解正确，您应该尝试

```
who GRUMPY 
```

或者

```
which GRUMPY 
```

# delphi - 如何在这样的网页中按下按钮？

> ID：11453175
> 
> 赞同：2
> 
> 时间：2012-07-12T13:43:43.323
> 
> 标签：delphi, browser

我使用的是Delphi XE2 + TWebbrowser，网页源代码如下：

```
<html>
<head>
<title>
</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
var loaded = 0;function ScriptLoaded() { ++loaded; if(loaded == 2) ARSystemInit(); }
var ReportSelForm="ReportSelection", RelContextPath='../../../../',AbsContextPath=null;</script>
<link rel="stylesheet" href="../../../../resources/stylesheets/7.1.00 Patch 009 201002230034/ARSystem.css">
<link rel="stylesheet" href="../../../../resources/stylesheets/7.1.00 Patch 009 201002230034/ARSystem_zh.css">
<script type="text/javascript" src="../../../../resources/javascript/7.1.00 Patch 009 201002230034/LocalizedMessages_zh_CN.js" defer></script>
<script type="text/javascript" src="../../../../resources/javascript/7.1.00 Patch 009 201002230034/locale/zh_CN.js" defer></script>
<script type="text/javascript">function DVFsf(){return "\x3cHTML\x3e\x3c/HTML\x3e";} function DVFol(){}</script>
<script type="text/javascript" src="../../../../resources/javascript/7.1.00 Patch 009 201002230034/ClientCore.js" defer></script>
<script type="text/javascript" src="form.js/f7a68ba8.js" defer></script>
<script type="text/javascript">document.write('\x3cscript src="userdata.js?winname=ar05UltraProcess%3AITIL_Incident'+encodeURIComponent(name)+'" defer\x3e\x3c/'+'script\x3e');</script>
</head>
<body onload="ScriptLoaded&#40;&#41;" draghandler="BodyDrag" style="display:none">
<div id="Toolbar"><div class="TBTopBarStatus">当前模式： <span class="TBTopBarStatusMode"></span></div><a class="btn TBTopBarBox" href="javascript:"><img class="tbright" src="../../../../resources/images/tb_right.gif" alt="显示工具栏" /><img class="tbdown" src="../../../../resources/images/tb_down.gif" alt="隐藏工具栏" /></a><table cellpadding=0 cellspacing=0 class="Toolbar"><tbody><tr><td nowrap class="TBGroup TBGroup0">
<a class="searchsavechanges btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBsearchsavechanges">搜索</div>
</a>
</td>
<td nowrap class="TBGroup TBGroup1">
<a class="newsearch btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBnewsearch"><img src="../../../../resources/images/tb_search.gif" alt="新搜索" /> 新搜索&lt;/div>
</a>
<a class="newrequest btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBnewrequest"><img src="../../../../resources/images/tb_request.gif" alt="新请求" /> 新请求&lt;/div>
</a>
<a class="modifyall btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBmodifyall"><img src="../../../../resources/images/tb_modall.gif" alt="全部修改" /> 全部修改</div>
</a>
</td>
<td nowrap class="TBGroup TBGroup2">
<a class="savedsearches btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBsavedsearches"> 多项搜索</div>
</a>
<a class="advancedsearch btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBadvancedsearch">高级搜索</div>
</a>
<a class="clear btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBclear">清除</div>
</a>
<a class="settodefaults btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBsettodefaults">设置为默认值&lt;/div>
</a>
<a class="statushistory btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBstatushistory">状态历史记录&lt;/div>
</a>
</td>
<td nowrap class="TBGroup TBGroup3">
<a class="logout btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBlogout">注销</div>
</a>
<a class="help btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBhelp">帮助</div>
</a>
<a class="home btn btn3d tbbtn" href="javascript:" style="position:static">
<div id="TBhome">主页</div>
</a>
</td>
</tr>
</tbody>
</table>
</div>
<div id="ResultsList">
<div arid=1020 artype="Table" ardbn="CustomResultsList" class="arfid1020 ardbnCustomResultsList" style="top:0&#59; left:0&#59; width:0&#59; height:0&#59;visibility:hidden&#59;z-index:0&#59;" arcols="2147483647" arcolws="1575" arcoldlen="254" ardrill=1 arserver="@" arschema="@" armaxrows=0 ardtype=1 arcsize=0 arfixhdr=1 arselrows=0 arselinit=0 arselrefresh=0 arautofit=0 arsort="" arqual="{qual:&quot;&quot;, ids:[],extids:[]}"><img src="../../../../resources/images/menu_down.gif" alt="" class="TableSortImgUp" arindom=1 /><img src="../../../../resources/images/menu_up.gif" alt="" class="TableSortImgDown" arindom=1 /><div class='TableHdr'><table class='TableHdr' cellpadding=0 cellspacing=0><tbody><tr><td nowrap valign=middle class='TableHdrL'></td><td nowrap valign=middle class='TableHdrR'></td></tr></tbody></table></div><div class='TableInner'></div><div class='TableFtr'><table class='TableFtr' cellpadding=0 cellspacing=0><tbody><tr><td nowrap valign=middle class='TableFtrL'></td><td nowrap valign=middle class='TableFtrR'></td></tr></tbody></table></div></div>
</div>
<div id="Splitter" draggable=1 dragoriginal=1>
</div>
<div id="FormContainer" arcs=1 style="background-color:">
<div style="top:0&#59;left:0&#59;width:1173&#59;height:869">&nbsp;</div>
<div arid=700000002 artype="Char" ardbn="BaseName" class="df  dfro arfid700000002 ardbnBaseName" style="z-index:994&#59;top:2&#59; left:9&#59; width:100&#59; height:25&#59;">
<span style="top:0&#59; left:0&#59; width:100&#59; height:0&#59;"><label class="label f9" for="x-arid700000002" style="width:100px&#59;left:0px&#59;bottom:25px&#59;color:&#59;text-align:center&#59;"></label></span><textarea class="text sr f2 dat" wrap="off" id="arid700000002" cols="20" maxlen=254 style="top:0&#59; left:0&#59; width:100&#59; height:25&#59;" readonly rows=1></textarea>
</div>
<a href="javascript:" arid=700040001 artype="Control" ardbn="Btn_Chart" class="btn btnurl arfid700040001 ardbnBtn_Chart" style="top:5&#59; left:842&#59; width:54&#59; height:20&#59;visibility:hidden&#59;z-index:998&#59;background-color:transparent&#59;"><div class="btntextdiv" style="top:0&#59; left:0&#59; width:54&#59; height:20&#59;"><div class="f7" style="&#59;width:54">流 程 图&lt;/div>
</div>
</a>
<a href="javascript:" arid=809041101 artype="Control" ardbn="Btn_AddDate" class="btn btnurl arfid809041101 ardbnBtn_AddDate" style="top:5&#59; left:916&#59; width:65&#59; height:20&#59;visibility:hidden&#59;z-index:1004&#59;background-color:transparent&#59;"><div class="btntextdiv" style="top:0&#59; left:0&#59; width:65&#59; height:20&#59;"><div class="f7" style="&#59;width:65">补充资料</div>
</div>
</a>
<a href="javascript:" arid=700040078 artype="Control" ardbn="Btn_Shengchengzhishi" class="btn btnurl arfid700040078 ardbnBtn_Shengchengzhishi" style="top:31&#59; left:841&#59; width:65&#59; height:20&#59;visibility:hidden&#59;z-index:1003&#59;background-color:transparent&#59;"><div class="btntextdiv" style="top:0&#59; left:0&#59; width:65&#59; height:20&#59;"><div class="f7" style="&#59;width:65">生 成 知 识&lt;/div>
</div>
</a>
**<a href="javascript:" arid=700040002 artype="Control" ardbn="Btn_Edit" class="btn btn3d  btnd arfid700040002 ardbnBtn_Edit" style="top:32&#59; left:916&#59; width:65&#59; height:20&#59;visibility:hidden&#59;z-index:999&#59;"><div class="btntextdiv" style="top:0&#59; left:0&#59; width:65&#59; height:20&#59;"><div class="f1" style="&#59;width:65">处　理&lt;/div>
</div>
</a>**
<div arid=700000003 artype="Char" ardbn="BaseSN" class="df  dfro arfid700000003 ardbnBaseSN" style="z-index:995&#59;top:7&#59; left:592&#59; width:198&#59; height:20&#59;">
<label class="label f6" for="x-arid700000003" style="top:4&#59; left:0&#59; width:51&#59; height:16&#59;">流水号：</label><textarea class="text sr  dat" wrap="off" id="arid700000003" cols="20" maxlen=254 style="top:0&#59; left:52&#59; width:146&#59; height:20&#59;" readonly rows=1></textarea>
</div>
<div arid=700000004 artype="Char" ardbn="BaseCreatorFullName" class="df  dfro arfid700000004 ardbnBaseCreatorFullName" style="z-index:996&#59;top:7&#59; left:252&#59; width:122&#59; height:20&#59;">
<label class="label f6" for="x-arid700000004" style="top:4&#59; left:0&#59; width:60&#59; height:16&#59;">建单人名：&lt;/label><textarea class="text sr  dat" wrap="off" id="arid700000004" cols="20" maxlen=254 style="top:0&#59; left:61&#59; width:61&#59; height:20&#59;" readonly rows=1></textarea>
</div>
<div arid=806000100 artype="Char" ardbn="Status" ardcf=1 class="df  dfro arfid806000100 ardbnStatus" style="z-index:1002&#59;top:7&#59; left:110&#59; width:134&#59; height:20&#59;">
<label class="label f6" for="x-arid806000100" style="top:4&#59; left:0&#59; width:38&#59; height:16&#59;color:&#59;">状态：</label><textarea class="text sr  dat" wrap="off" id="arid806000100" cols="20" maxlen=254 style="top:0&#59; left:39&#59; width:95&#59; height:20&#59;" readonly rows=1></textarea>
</div>
<div arid=700000006 artype="Time" ardbn="BaseCreateDate" class="df  dfro arfid700000006 ardbnBaseCreateDate" style="z-index:997&#59;top:7&#59; left:386&#59; width:194&#59; height:20&#59;">
<label class="label f6" for="arid700000006" style="top:4&#59; left:0&#59; width:60&#59; height:16&#59;">登记时间：&lt;/label><input id="arid700000006" class="text  dat" type="text" style="top:0&#59; left:61&#59; width:133&#59; height:20&#59;" readonly ds=0 />
</div>
<div arid=700030001 artype="PageHolder" armaxh=22 class="PageHolder arfid700030001 ardbnPag_Main" style="top:52&#59; left:12&#59; width:973&#59; height:419&#59;background-color:white&#59;z-index:1000&#59;">
<div class="TabChildMissingBorder" style="visibility:hidden&#59;top:22&#59;width:973">
</div>
<div style="visibility:hidden&#59;height:22&#59;width:973" class="OuterTabsDiv">
<div class="ScrollingTab" style="position:relative&#59;float:left&#59;">
<span class="TabLeftRounded">&nbsp;</span>
<span class="Tab"><a href="javascript:" class="btn" id="prevTab">&lt;&lt;</a>
</span>
<span class="TabRightRounded">&nbsp;</span>
</div>
<div class="TabsViewPort" style="position:relative&#59;overflow:hidden&#59;float:left&#59;width:5000&#59;height:22">
<div style="overflow:visible&#59;float:left&#59;width:5000&#59;top:0&#59;left:0">
<dl class="OuterOuterTab">
<dd class="OuterTab" artabid=700030002><span class="TabLeftRounded">&nbsp;</span>
<span class="Tab"><a href="javascript:" class="btn f1">基　　本&lt;/a>
</span>
<span class="TabRight">&nbsp;</span>
</dd>
<dd class="OuterTab" artabid=806842007><span class="TabLeft">&nbsp;</span>
<span class="Tab"><a href="javascript:" class="btn f1">事件信息</a>
</span>
<span class="TabRight">&nbsp;</span>
</dd>
<dd class="OuterTab" artabid=700030094><span class="TabLeft">&nbsp;</span>
<span class="Tab"><a href="javascript:" class="btn f1">流程记录</a>
</span>
<span class="TabRightRounded">&nbsp;</span>
</dd>
</dl>
</div>
</div> 
```

**看页面源码 BOLD 部分，是网页上的一个 BUTTON(arid=700040002 artype="Control" ardbn="Btn_Edit" )。当这个页面满载时，我想在 delphi 中按下按钮。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:49:31.413

这应该这样做：

```
procedure ClickElementByContent(Document : IDispatch; TagFilter : WideString; Content: WideString);

var Doc   : IHTMLDocument3;
    El    : IHTMLElement;
    Elements : IHTMLElementCollection;
    Index    : Integer;

begin
 Doc := Document as IHTMLDocument3;
 if Assigned(Doc) then
  begin
   Elements := Doc.getElementsByTagName(TagFilter);
   for Index := 0 to Pred(Elements.length) do
    begin
     El := Elements.item(EmptyParam, Index) as IHTMLElement;
     if ContainsText(El.innerText, Content) then
      begin
       El.Click;
       Break;
      end;
    end;
  end;
end; 
```

如何使用：

```
procedure clickthebutton;
begin
 ClickElementByContent(Webbrowser1.Document, 'DIV', 'DEAL');
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:09:17.657

```
procedure TTrackITOrderForm.Btn_DealClick(Sender: TObject);
var
Document : IHTMLDocument2 ;
ButtonDiv , temp : IHTMLElement ;
ElementCount , I : Integer ;
begin
Document := wb1.Document as IHTMLDocument2 ;
ElementCount := Document.all.length ;
for i := i to ElementCount-1 do
begin
temp := Document.all.item(i,'') as IHTMLElement ;
lst1.Items.Add(temp.id+'-->'+temp.innerText)  ;
if (temp.tagName = 'DIV') and (temp.innerText = '处理') then
begin
ShowMessage(temp.innerText);
ButtonDiv := temp ;
Break ;
end;
end;
if ButtonDiv <> nil then
ButtonDiv.click ;
end; 
```

# c++ - 联系听众问题

> ID：11453176
> 
> 赞同：0
> 
> 时间：2012-07-12T13:43:43.330
> 
> 标签：c++, cocos2d-iphone, box2d, box2d-iphone

我不太了解 C++，我正在尝试使用 Cocos2d-box2d实现我找到的解决方案 - （ [Get the world's contactListener in Box2D ）。](https://stackoverflow.com/questions/10866715/getting-the-worlds-contactlistener-in-box2d?lq=1)这是联系侦听器。

SubcContactListener.h：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"
#import <vector>
typedef std::pair<b2Fixture*, b2Fixture*> fixturePair;
typedef std::vector<fixturePair> thingsThatTouched;

extern thingsThatTouched g_touchingFixtures;

class SubcContactListener : public b2ContactListener    {

public:

    void BeginContact(b2Contact* contact);
void EndContact(b2Contact* contact);
}; 
```

SubcContactListener.mm：

```
#import "SubcContactListener.h"

void SubcContactListener:: BeginContact(b2Contact *contact) {

    thingsThatTouched->push_back( make_pair(contact->GetFixtureA(), contact->GetFixtureB()) );

}

void SubcContactListener:: EndContact(b2Contact *contact)   {

} 
```

我得到一个

```
Expected unqualified-id 
```

在线错误

```
thingsThatTouched.push_back( make_pair(contact->GetFixtureA(), contact->GetFixtureB()) ); 
```

在 SubcContactListener.mm 的 BeginContact 方法中。我也得到一个

```
Unexpected type name 'thingsThatTouched': expected expression 
```

行错误

```
b2Fixture* fixtureA = thingsThatTouched[i].first;
b2Fixture* fixtureB = thingsThatTouched[i].second; 
```

在 HelloWorldLayer 类的 tick 方法中。

***更新：***

当两个精灵（有自己的类）碰撞时，我试图创建一个焊接接头。这是我在 HelloWorld.mm 的 tick 方法中所做的：

```
b2WeldJoint *weldJoint;
b2WeldJointDef weldJointDef;

    for (int i = 0; i < touchingBodies.size(); i++) {
    b2Body* bodyA = touchingBodies[i].first;
    b2Body* bodyB = touchingBodies[i].second;

    weldJointDef.Initialize(bodyA, bodyB, bodyA->GetWorldCenter());
    weldJointDef.collideConnected = false;
    weldJoint = (b2WeldJoint*)world->CreateJoint(&weldJointDef);

}
touchingBodies.clear(); 
```

但我收到以下错误：

```
Apple Mach-O Linker (Id) Error
"_touchingBodies", referenced from:
  SubcContactListener::BeginContact(b2Contact*) in SubcContactListener.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:50:38.357

`thingsThatTouched`是一个类型定义。它只是类型的同义词，而不是标识符/变量的同义词。换句话说，它本身不是一个对象。我认为你应该`g_touchingFixtures`在你使用的地方使用`thingsThatTouched`.

当你说，

```
typedef int myOwnInt; 
```

现在不能用了

```
myOwnInt = 10;   // Wrong. myOwnInt is just a type like how int is.

myOwnInt i = 10; 
```

希望能帮助到你 ！

# c# - c# listbox项大小限制

> ID：11453195
> 
> 赞同：3
> 
> 时间：2012-07-12T13:44:27.193
> 
> 标签：c#

当我在 c# 中将项目添加到列表框时，如果字符串 > 4680 个字符，它将显示为空行。我仍然可以从程序中访问整个字符串。

我是否遇到了限制或我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:47:15.333

文本框中的文本限制为 64 KB 的文本。[给你。](http://msdn.microsoft.com/en-us/library/ms997541.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:46:35.380

为单个列表项显示 4680 多个字符对最终用户没有用处。您需要截断文本或找到另一种方式来引用对用户更友好的文本。

# binary - 奇怪的格雷码 - 高效解码

> ID：11453196
> 
> 赞同：0
> 
> 时间：2012-07-12T13:44:33.947
> 
> 标签：binary, decode, encode, decoding, gray-code

我试图找出一种从奇怪的格雷码到二进制反射格雷码或正常二进制的有效方法。

The pattern goes:
000000
000001
000101
000100
000110
000111
010111
010110
010100
010101
010001
010000
010010
010011
011011
011010
011000
011001
001101
011100
011110
011111
1011111
1011110
1011100
1011101
and so on...

它最多使用 12 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:02:22.177

最有效的方法是使用字典/哈希表。或者，将它们排序存储在数组中并使用二进制搜索。

[编辑]

实际上，现在我想一想，按照今天的标准，一个包含 4096 个条目的查找表不会占用那么多空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:58:02.493

Array string in [ "00001", "000011, ... etc.
Array string out [ "01" , "10" , ...

Loop through an array to find a match, use same index in other array for conversion.

Might also be nice to try conversion with a neural network; after a while it will convert it. Actually that's I think nice try, have you somewhere the full gray binary list?

Perhaps I like to give it a try in a yet to build neural network.

# visual-studio-2010 - 在 Visual Studio 中查看 TFS 变更集，类似于 TortoiseHg

> ID：11453197
> 
> 赞同：1
> 
> 时间：2012-07-12T13:44:34.827
> 
> 标签：visual-studio-2010, tfs, mercurial, tortoisehg, changeset

我已经习惯于在 TortoiseHg 中查看文件版本历史记录，我可以在其中右键单击文件并显示历史记录。它为我提供了在一个线性历史中跨分支和存储库对该文件的所有更改，并为我提供了摘要比较。[像这样](https://i.stack.imgur.com/lS3xt.png)

我现在需要使用 Visual Studio 和 TFS 来查看变更集，但我觉得它并不直观。这有一个插件或扩展允许我以类似于版本控制客户端的 Tortoise 线的方式查看 TFS 变更集？

我看过 TFS Power Tools，但它仍然只提供 Windows 资源管理器中的默认 VS 审查选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:51:26.270

Team Explorer 中的[历史](http://msdn.microsoft.com/en-us/library/ms245475%28v=vs.100%29.aspx)功能允许您跟踪合并，它还提供了[跟踪变更集](http://msdn.microsoft.com/en-us/library/dd405662%28v=vs.100%29.aspx)，您可以在其中查看特定更改的起源并通过多个分支对其进行跟踪。但是，我还没有看到任何提供您正在寻找的视觉表示的插件。

# c# - 如何避免这些变量的初始化？

> ID：11453206
> 
> 赞同：1
> 
> 时间：2012-07-12T13:44:53.213
> 
> 标签：c#, .net, variables, initialization

我在网上（[http://www.codinghorror.com/blog/2005/07/for-best-results-dont-initialize-variables.html](http://www.codinghorror.com/blog/2005/07/for-best-results-dont-initialize-variables.html)）读到我们不应该初始化变量。

不知怎的，我不明白。我常常无法避免这种情况。让我们看一个简单的例子：

```
public int test(string s)
{
  int start = 0;
  int mod = 2;
  int output = 0;

  foreach (int i in s)
  {
    output = output + (i % mod) + start;
    start++;
  }

  return output;
} 
```

好吧，这可能是胡说八道:-)但问题是：我可以避免初始化吗？**也许它对mod**是不可能的，因为 mod 从一开始就必须是 2 并且它会保持 2。但是**start**和**output**呢？我只是不能写`int start`，因为那总是`Error Use of unassigned local variable`。也许`int start = null`会更好，但在这种情况下它也行不通。那么如何避免这些东西呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T13:48:32.337

你误读了他的文章。在他的文章中，他专门讨论了与类有关的变量的初始化。在您提出的情况下，您的变量应该在它们可以使用之前被初始化，因为它们将立即被使用。

*编辑：是的，在这种特定情况下，`int`变量不需要初始化，因为编译器会自动将 a 初始化`int`为 0，但是如果使用 a`string`或 a在不同程度上进行`DateTime`初始化，则初始化在方法的上下文中变得很重要。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T13:49:59.903

你误读了这篇文章。本文讨论的是成员变量（自动初始化为默认值，因此不需要显式初始化），但您正试图将规则应用于局部变量（不会自动初始化，因此需要显式初始化）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:50:16.580

你可以像这样重写你的方法

```
public int Test(string s) {
            const int mod = 2;
int start;                
int output = 0;

            foreach(int i in s) {
                output = output + (i % mod) + start;
                start++;
            }

            return output;
        } 
```

在这种情况下，不需要初始化 start 变量，无论是在内部还是外部范围内声明都是如此。

但是，输出变量确实需要初始化，因为它将由方法返回，并且如果循环永远不会运行，则变量可能永远不会被初始化。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-12T13:51:12.933

这篇文章谈论的是不要用默认值初始化变量。例如，

```
int x = 0; 
```

不好。此外，您应该在变量使用干净代码之前对其进行初始化（并声明）。

构造函数中的初始化不仅仅是在使用之前。

# css - 我的 haml 视图在部署时无法在我的 public/css 文件夹中找到 css 文件，但设法在 localhost 上找到它

> ID：11453214
> 
> 赞同：0
> 
> 时间：2012-07-12T13:45:12.123
> 
> 标签：css, ruby, sinatra, haml, passenger

我的应用程序在 Sinatra 上运行，并使用Passenger 部署在我的 Apache Web 服务器上。我的目录结构如下：

```
approot
` public
  ` css
    - bootstrap.css
  ` uploads
    - empty.txt
` tmp
  - restart.txt
` views
  - success.haml
  - upload.haml
- config.ru
- myapp.rb 
```

**内部上传.haml**

```
%link(rel="stylesheet" href="css/bootstrap.css") 
```

当我在 localhost:4567 上运行这个应用程序时，CSS 加载得很好。但是，当我将它部署在我的 Web 服务器上时，CSS 不会加载。

在我的 Web 服务器上，使用以下命令访问该应用程序：`rubyapps.mydomain.com/appname`

如果我输入: `rubyapps.mydomain.com/appname/css/bootstrap.css`，我就能很好地看到我的 CSS 文件的内容。

完全困惑，不知道 Sinatra 如何处理这种情况，寻求一点帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:03:59.773

您可能需要使用 Sinatra 的[URL 助手](http://www.sinatrarb.com/intro#Generating%20URLs)。

```
For generating URLs you should use the url helper method, for instance, in Haml:

%a{:href => url('/foo')} foo

It takes reverse proxies and Rack routers into account, if present.

This method is also aliased to to (see below for an example). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:11:35.977

也许这个？

```
%link(rel="stylesheet" href="../public/css/bootstrap.css") 
```

或者...

```
%link(rel="stylesheet" href="/css/bootstrap.css") 
```

# oracle - Oracle：批量收集性能

> ID：11453215
> 
> 赞同：8
> 
> 时间：2012-07-12T13:45:14.400
> 
> 标签：oracle, bulk

你能帮我理解这句话吗？

> 如果没有批量绑定，PL/SQL 会针对每条插入、更新或删除的记录向 SQL 引擎发送一条 SQL 语句，从而导致上下文切换，从而损害性能。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-12T15:12:18.853

在 Oracle 内部，有一个 SQL 虚拟机 (VM) 和一个 PL/SQL VM。当您需要从一个 VM 移动到另一个 VM 时，会产生上下文转换的成本。单独而言，这些上下文转换相对较快，但是当您进行逐行处理时，它们加起来会占代码花费的时间的很大一部分。当您使用批量绑定时，您可以通过一次上下文转移将多行数据从一个 VM 移动到另一个 VM，从而显着减少上下文转移的次数，从而使您的代码更快。

以显式游标为例。如果我写这样的东西

```
DECLARE
  CURSOR c 
      IS SELECT *
           FROM source_table;
  l_rec source_table%rowtype;
BEGIN
  OPEN c;
  LOOP
    FETCH c INTO l_rec;
    EXIT WHEN c%notfound;

    INSERT INTO dest_table( col1, col2, ... , colN )
      VALUES( l_rec.col1, l_rec.col2, ... , l_rec.colN );
  END LOOP;
END; 
```

然后每次我执行提取，我

*   执行从 PL/SQL VM 到 SQL VM 的上下文转移
*   要求 SQL VM 执行游标以生成下一行数据
*   执行另一个从 SQL VM 到 PL/SQL VM 的上下文转移以返回我的单行数据

每次我插入一行时，我都在做同样的事情。我承担了将一行数据从 PL/SQL VM 传送到 SQL VM、要求 SQL 执行`INSERT`语句，然后再将另一个上下文转移回 PL/SQL 的成本。

如果`source_table`有 100 万行，那就是 400 万次上下文转换，这可能占我的代码已用时间的合理比例。另一方面，如果我`BULK COLLECT`使用 a`LIMIT`为 100 进行 a，我可以通过在每次产生上下文成本时将 100 行数据从 SQL VM 检索到 PL/SQL 中的集合中来消除 99% 的上下文转换每次我在那里发生上下文转移时，转移并插入 100 行到目标表中。

如果可以重写我的代码以使用批量操作

```
DECLARE
  CURSOR c 
      IS SELECT *
           FROM source_table;
  TYPE  nt_type IS TABLE OF source_table%rowtype;
  l_arr nt_type;
BEGIN
  OPEN c;
  LOOP
    FETCH c BULK COLLECT INTO l_arr LIMIT 100;
    EXIT WHEN l_arr.count = 0;

    FORALL i IN 1 .. l_arr.count
      INSERT INTO dest_table( col1, col2, ... , colN )
        VALUES( l_arr(i).col1, l_arr(i).col2, ... , l_arr(i).colN );
  END LOOP;
END; 
```

现在，每次执行 fetch 时，我都会通过一组上下文转换将 100 行数据检索到我的集合中。每次`FORALL`插入时，我都会插入 100 行，并带有一组上下文转换。如果`source_table`有 100 万行，这意味着我已经从 400 万个上下文转换变为 40,000 个上下文转换。如果上下文转换占了我的代码运行时间的 20%，那么我已经消除了 19.8% 的运行时间。

您可以增加 的大小`LIMIT`以进一步减少上下文转换的数量，但您很快就会遇到收益递减规律。如果您使用`LIMIT`1000 而不是 100，您将消除 99.9% 的上下文转换，而不是 99%。但是，这意味着您的集合使用了 10 倍以上的 PGA 内存。在我们的假设示例中，它只会多消除 0.18% 的经过时间。通过消除额外的上下文转换，您很快就会达到您使用的额外内存增加的时间多于节省的时间的地步。一般来说，`LIMIT`100 到 1000 之间的某个位置可能是最佳位置。

当然，在这个例子中，消除所有上下文转换并在单个 SQL 语句中完成所有事情会更有效

```
INSERT INTO dest_table( col1, col2, ... , colN )
  SELECT col1, col2, ... , colN
    FROM source_table; 
```

如果您正在对源表中的数据进行某种无法在 SQL 中合理实现的操作，那么首先求助于 PL/SQL 才有意义。

此外，我故意在示例中使用了显式游标。如果您使用隐式游标，则在最新版本的 Oracle 中，您可以隐式获得`BULK COLLECT`a`LIMIT`为 100 的好处。还有另一个 StackOverflow 问题讨论了[隐式和显式游标与批量操作的相对性能优势，](https://stackoverflow.com/questions/3885469/difference-between-fetch-for-to-loop-a-cursor-in-pl-sql/3885889#3885889)这些操作更详细地介绍了这些特定的皱纹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:53:20.013

据我了解，涉及两个引擎，[PL/SQL engine 和 SQL Engine](http://docstore.mik.ua/orelly/oracle/guide8i/ch05_01.htm)。执行一次使用一个引擎的查询比在两者之间切换更有效

例子：

```
 INSERT INTO t VALUES(1) 
```

由 SQL 引擎处理，而

```
 FOR Lcntr IN 1..20

  END LOOP 
```

由PL/SQL引擎执行

如果将上面的两个语句结合起来，将 INSERT 放入循环中，

```
FOR Lcntr IN 1..20
  INSERT INTO t VALUES(1)
END LOOP 
```

对于每 (20) 次迭代，Oracle 将在两个引擎之间切换。在这种情况下，建议使用 BULK INSERT，它在整个执行过程中都使用 PL/SQL 引擎

# objective-c - 安排生成敌人的方法或使用敌人缓存的更新方法更有效吗？

> ID：11453223
> 
> 赞同：3
> 
> 时间：2012-07-12T13:45:34.960
> 
> 标签：objective-c, optimization, mobile, cocos2d-iphone

我正在为 iPhone 使用 Cocos2d，我想知道使用这种方法构建我的代码逻辑以产生敌人是否更有效：

-(void) schedule:(SEL)selector interval:(ccTime)interval

或在 EnemyCache 类中使用更新，并每次验证是否满足时间间隔。下面是在 EnemyCache 类的 update 方法中调用的代码片段（相对时间是一个整数值，在 GameScene 类中每次更新时由 GameScene 更新 - GameScene 更新方法调用以 1 的间隔调度第二）：

```
-(void) checkForPlayerCollisionsAndSpwanTime
{

    int count = [elements count];
    //CCLOG(@"count %i", count);
    Element* element;
    for(int i=0; i<count;i++){

        element = [elements objectAtIndex:i];
        NSAssert(element!=nil, @"Nil enemy");

        if (element.visible)
        {
            [element justComeDown];
            ShipEntity * ship = [[GameScene sharedGameScene]defaultShip];
            CGRect rect = [ship boundingBox];

            if (CGRectIntersectsRect([element boundingBox], rect)){
                [element doWhatever]; 
                element.visible=FALSE;
                [element stopAllActions];
            }       
        }
        else{
            if(element.spawnTime == relativeTime) {
                [self addChild:element]; 
                element.visible=TRUE;
            }
        }
    }
} 
```

不同之处在于，在每次更新时，**checkForPlayerCollisionsAndSpwanTime**方法都会通过敌人数组。第一种方式，通过调度一个选择器调用类似的方法，可以减少CPU查看数组和条件的时间。

我不确定这个电话的成本有多大：

```
[self schedule:selector interval:interval repeat:kCCRepeatForever delay:0]; 
```

通过查看，我看到调用了这个方法（见下文），但我想问一下你解决这个问题的方法是什么，以及我是否应该继续使用 EnemyCache 更新方法或使用 scheduleSelector 方法。

```
-(void) scheduleSelector:(SEL)selector forTarget:(id)target interval:(ccTime)interval paused:(BOOL)paused repeat:(uint) repeat delay:(ccTime) delay
{
    NSAssert( selector != nil, @"Argument selector must be non-nil");
    NSAssert( target != nil, @"Argument target must be non-nil");

    tHashSelectorEntry *element = NULL;
    HASH_FIND_INT(hashForSelectors, &target, element);

    if( ! element ) {
        element = calloc( sizeof( *element ), 1 );
        element->target = [target retain];
        HASH_ADD_INT( hashForSelectors, target, element );

        // Is this the 1st element ? Then set the pause level to all the selectors of this target
        element->paused = paused;

    } else
        NSAssert( element->paused == paused, @"CCScheduler. Trying to schedule a selector with a pause value different than the target");

    if( element->timers == nil )
        element->timers = ccArrayNew(10);
    else
    {
        for( unsigned int i=0; i< element->timers->num; i++ ) {
            CCTimer *timer = element->timers->arr[i];
            if( selector == timer->selector ) {
                CCLOG(@"CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %.4f to %.4f", timer->interval, interval);
                timer->interval = interval;
                return;
            }
        }
        ccArrayEnsureExtraCapacity(element->timers, 1);
    }

    CCTimer *timer = [[CCTimer alloc] initWithTarget:target selector:selector interval:interval repeat:repeat delay:delay];
    ccArrayAppendObject(element->timers, timer);
    [timer release];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:41:58.320

您的应用程序是否存在性能问题？如果没有，答案是：没关系。如果你这样做了，你是否测量过它，问题是否来自所讨论的方法？如果没有，答案是：你找错地方了。

换句话说：[过早优化是万恶之源](http://c2.com/cgi/wiki?PrematureOptimization)。

如果您仍然想知道，只有一种方法可以找出答案：测量代码的两种变体并选择速度更快的一种。如果速度差异很小（我怀疑会如此），请选择更容易使用的版本。您应该考虑另一种性能：作为人类，您阅读、理解、更改代码。在几乎所有情况下，代码的可读性和可维护性都比性能更重要。

没有人可以（或不会）看到这么多代码并得出结论“是的，A 肯定快 30-40%，使用 A”。如果您担心该方法的速度，请不要让任何人告诉您哪个更快。测量它。这是唯一可以确定的方法。

原因是这样的：程序员对代码性能做出假设是臭名昭著的。很多时候他们是错误的，因为在他们上次测量时，语言、硬件或对该主题的理解已经有了很大的飞跃。但是他们更有可能记住他们学到的东西，因为一旦他们问了一个和你一样的问题，其他人给了他们一个答案，他们从那时起就接受了这个答案。

但回到你的具体例子：这真的没关系。由于渲染太多敌人而不是确定何时生成敌人的代码，您更有可能遇到性能问题。然后真的，真的，真的，真的，真的，如果代码是在预定的选择器中运行，还是在每帧增加一个计数器的预定更新方法中运行，这并不重要。这归结为一个主观的编码风格偏好问题，而不是关于性能的决定。

# python - 初学者 Python：将 GLOB 结果写入 txt

> ID：11453227
> 
> 赞同：1
> 
> 时间：2012-07-12T13:45:40.500
> 
> 标签：python, glob, python-2.5

我正在尝试创建一个 certian 目录中所有内容的路径和文件名的文本文件。环顾四周，看起来最好的方法是使用 GLOB 函数，我能够编写一个代码，让我得到每个文件的路径列表：

```
import glob
dirlist = glob.glob('P:\MyDep\Myunit\MySection\Stuff\Reports\YR*\O*\*\*\*\*.pdf')
Bureau\Traffic\Reports\YR*\R*\*\*.pdf')
fo=open('new.txt', "w")
fo.write('\n'.join(dirlist))
fo.close() 
```

但是，我发现自己使用 Excel 的 MID 语句从报告中提取值。理想情况下，我希望文件的基本名称包含在路径中作为元组。我想出了以下几点：

```
for f in glob.glob('P:\MyDep\Myunit\MySection\Stuff\Reports\YR*\O*\*\*\*\*.pdf'):
        fpath, fname = os.path.split(f)
        rname, extname = os.path.splitext(fname)
        dirtup = (f, rname)
        print dirtup 
```

但我似乎无法将结果写入文本文件：我似乎能做的最好的事情是生成一个文本文件，其中包含一个来自污垢的列表（编辑以显示带有建议的代码）：

```
import glob, os
for f in f in glob.glob('P:\MyDep\Myunit\Mysection\Stuff\Reports\YR*\O*\*\*\*\*.pdf'):
    fpath, fname = os.path.split(f)
    rname, extname = os.path.splitext(fname)
    dirtup = (f, rname)
    fo=open('axlspd.txt', "w")
    fo.write(', '.join(dirtup)+'\n')
    fo.close() 
```

我怎样才能把弄脏的所有结果放到一个文本文件中？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:07:12.613

问题是您多次打开该文件。使用 'w' 标志，文件在每次打开时都会被截断，您只会看到最后一次写入。

在循环之前打开文件，然后关闭它，或者使用新奇的 with 语句：

```
import glob, os
with open('axlspd.txt', "w") as axlspd:
    for f in f in glob.glob('P:\MyDep\Myunit\Mysection\Stuff\Reports\YR*\O*\*\*\*\*.pdf'):
        fpath, fname = os.path.split(f)
        rname, extname = os.path.splitext(fname)
        dirtup = (f, rname)
        axlspd.write(', '.join(dirtup)+'\n') 
```

当您退出该代码块时，该文件会自动关闭。

* * *

这是您错过的参考：http: [//docs.python.org/library/functions.html#open](http://docs.python.org/library/functions.html#open)

> 最常用的模式值是“r”表示读取，“w”表示写入（如果文件已经存在，则截断文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:12:02.333

我认为[os.walk](http://docs.python.org/library/os.html#os.walk)对此更好：

```
import os
for root,dirs,files in os.walk('.'):
   #                            ^ Name of directory where you start your file search
   for f in files:
       print root,os.path.join(root,f)  #writes it as path path/filename 
```

看起来您只想要以“.pdf”结尾的文件，因此，我们可以先过滤文件名——将其放入文本文件也很容易：

```
import os
with open('filelist.txt','w') as outfile:
    for root,dirs,files in os.walk('.'):
       pdfs = [f for f in files if f.endswith('.pdf')]
       for f in pdfs:
           outfile.write('%s %s\n'%(root,os.path.join(root,f)))  #writes it as path path/filename
           #New style formatting:
           #outfile.write('{0} {1}\n'.format(root,os.path.join(root,f))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:53:33.807

我没有看到你的问题：

```
>>> import glob
>>> for f in glob.glob(r'c:\*.dll'):
...     print f
...
c:\install.res.1028.dll
c:\install.res.1031.dll
c:\install.res.1033.dll
c:\install.res.1036.dll
c:\install.res.1040.dll
c:\install.res.1041.dll
c:\install.res.1042.dll
c:\install.res.2052.dll
c:\install.res.3082.dll
c:\msdia80.dll
>>> import os
>>> for f in glob.glob(r'c:\*.dll'):
...    fpath, fname = os.path.split(f)
...    rname, extname = os.path.splitext(fname)
...    dirtup = (f, rname)
...    print dirtup
...
('c:\\install.res.1028.dll', 'install.res.1028')
('c:\\install.res.1031.dll', 'install.res.1031')
('c:\\install.res.1033.dll', 'install.res.1033')
('c:\\install.res.1036.dll', 'install.res.1036')
('c:\\install.res.1040.dll', 'install.res.1040')
('c:\\install.res.1041.dll', 'install.res.1041')
('c:\\install.res.1042.dll', 'install.res.1042')
('c:\\install.res.2052.dll', 'install.res.2052')
('c:\\install.res.3082.dll', 'install.res.3082')
('c:\\msdia80.dll', 'msdia80')
>>> 
```

*除非您在将元组写入*文件时遇到问题。试试这个：

```
# inside for loop
fo.write(', '.join(dirtup)) 
```

# r - R：biomaRt 软件包缺少探针 ID？

> ID：11453230
> 
> 赞同：3
> 
> 时间：2012-07-12T13:45:57.533
> 
> 标签：r

当我查找 a​​ffymetrix hgu133a 探针组 id 的 entrez id 时，我遇到了 biomart 包的问题。例如 biomaRt 找不到“206323_x_at”。
当我在 affy_hg_u133a 列表中列出所有探针 ID 时，只有 19872 个探针 ID，但是 HGU133a 上有 22245 个探针（或带有控制探针的 22313）。是脚本有问题还是这个数据库不完整？

谢谢！

```
library(biomaRt)  
mart<-useMart("ensembl", dataset="hsapiens_gene_ensembl")  
affyids="206323_x_at"  
getBM(attributes=c('affy_hg_u133a', 'entrezgene'), filters = 'affy_hg_u133a', values = affyids, mart = mart)  
[1] affy_hg_u133a entrezgene   
<0 rows> (or 0-length row.names)

hgu133a<-getBM(attributes='affy_hg_u133a', mart = mart)
dim(hgu133a)
[1] 19872     1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:56:42.493

它似乎不适用于这个探针组。我们可以得到答案

```
library(hgu133a.db)
myprobeset  = "206323_x_at"
genes <- mget(myprobeset,hgu133aENTREZID) 
```

我们可以测试另一个探针组

```
affyids = c("218471_s_at")
getBM(attributes = c("affy_hg_u133a", "entrezgene"), filters =  "affy_hg_u133a",values = affyids, mart = ensembl)

myprobeset  = "218471_s_at"
genes <- mget(myprobeset,hgu133aENTREZID) 
```

所以这似乎是两个不同的数据来源给出不同答案的情况。这种情况时不时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:55:51.200

该`probemapper`软件包也可以用于这种特殊需要。它在 R 中可用，并且还有一个在线界面。

以下是您的特定基因的结果： [qbrc.swmed.edu/probealignment/#probe=1005849](http://qbrc.swmed.edu/probealignment/#probe=1005849)

解释：供应商和 Bioconductor 同意您的探针与 Entrez ID 4983 对齐，但 BLAST 显示了一些其他潜在的对齐（如果您只关心供应商的注释，可能会忽略这些对齐）。

# javascript - 如何测试浏览器对背景剪辑的支持：文本？

> ID：11453232
> 
> 赞同：5
> 
> 时间：2012-07-12T13:46:00.540
> 
> 标签：javascript, css

你会如何测试 background-clip: text 的值，webkit 支持 text，但是 mozilla 和其他浏览器没有我尝试过modernizr teststyles 但没有运气

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:16:20.120

```
var testEl = document.createElement( "x-test" );
var supportsWebkitBackgroundClipText = typeof testEl.style.webkitBackgroundClip !== "undefined" && ( testEl.style.webkitBackgroundClip = "text", testEl.style.webkitBackgroundClip === "text" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-24T14:43:03.263

您可以使用[`@supports`CSS at-rule](https://developer.mozilla.org/en-US/docs/Web/CSS/@supports)：

举个例子：

```
.colorful {
  color: #0098db;
}

@supports (background-clip: text) or (-webkit-background-clip: text) {
  .colorful {
    background: #0098db;
    background: linear-gradient(
      0deg,
      #0098db 0%,
      #0098db 45%,
      #c9d9ec 45%,
      #c9d9ec 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-27T15:42:57.120

你可以在你的 js 中使用 CSS.supports。CSS.supports api 适用于除 IE 之外的所有浏览器，在这些浏览器中，此属性无论如何都不起作用，所以没关系。

```
let supported = CSS.supports && CSS.supports('-webkit-background-clip', 'text'); 
```

# session - Play Framework 1.2.4：会话不变

> ID：11453234
> 
> 赞同：2
> 
> 时间：2012-07-12T13:46:14.210
> 
> 标签：session, playframework, playframework-1.x, securesocial

我正在开发一个 Play Framework 项目，并且正在使用`SecureSocial`插件进行用户操作。

我的问题是，根据 Play Framework 文档，当我关闭浏览器选项卡并打开一个新选项卡时，会话应该已经关闭并重置。

但是当我关闭并重新打开选项卡时，我看到会话 ID 仍然相同，并且用户直接登录而无需重新打开登录页面（因为用户信息在播放会话中仍然可用）

这是我打开会话之前和之后的输出：

## 前

```
session = {sid=86, ___ID=80519f26-ccf9-4e6f-9f9a-0f2a3bbc7b20, securesocial.network=userpass, ___AT=4241355a05e419dabc6e16612275b3d932133707, securesocial.user=test} 
```

然后我关闭并在几秒钟后重新打开浏览器选项卡......

## 后

```
session = {___ID=80519f26-ccf9-4e6f-9f9a-0f2a3bbc7b20, sid=86, securesocial.network=userpass, ___AT=4241355a05e419dabc6e16612275b3d932133707, securesocial.user=test} 
```

一切都是一样的。**有时它会随机变化**。

`application.conf`顺便说一句，我在其他任何地方都没有任何会话设置；一切仍处于默认设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:52:59.827

SocialSecure 使用 cookie - 它检查用户之前是否已通过特定提供商的身份验证。删除 cookie 应该允许您从一开始就测试功能。

在 SecureSocial.java 中（在 controllers.securesocial 中） - 您应该能够检查在 checkAccess 中调用 getUserId 的位置（在其中检查用户和提供者的 cookie 值）。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:49:23.047

我意识到这是现代浏览器上的一个新“功能”。除非您完全关闭所有选项卡和浏览器本身（在 osx 中，右键单击并关闭），否则浏览器不会关闭会话，因此用户在完全关闭浏览器之前不需要重新登录。

简而言之，您的会话不会因关闭“选项卡”而过期，但您必须完全关闭“浏览器”。

# ruby-on-rails - 在 Rails 中，如何在第一次创建对象时仍然允许设置属性的同时保护属性不被批量分配？

> ID：11453237
> 
> 赞同：0
> 
> 时间：2012-07-12T13:46:24.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mass-assignment

我现在才使用 Rails 几个月，所以我可能遗漏了一些明显的东西，但是如果一个属性受到`attr_accessible`, 或的大规模分配保护`attr_protected`，那么当你第一次创建记录时如何设置该属性？（并且以仍然安全的方式进行。）

* * *

**例如：**

假设我正在开发一个应用程序，该应用程序跟踪公司员工接受过培训的不同程序和流程。

作为这个应用程序的一部分，我有三个模型：`User`、`Course`和`TrainingClass`。`User`代表员工，`Course`代表员工可以接受培训的不同事物，并`TrainingClass`代表员工将在其中接受培训的特定课程。

与模型（因为类基本上只是课程的特定实例）和模型（因为类有一个讲师，谁是创建 的用户）`TrainingClass`都有`belongs_to`关系。同样，和模型都与模型有关系。`Course``User``TrainingClass``Course``User``has_many``TrainingClass`

根据这些信息，我将如何创建新记录`TrainingClass`？

我可以说：

```
course.training_classes.build(user_id: user.id) 
```

或者

```
user.training_classes.build(course_id: course.id) 
```

但这不是对`user_id`or`course_id`属性的批量赋值吗？

在保持应用程序安全的同时，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:51:33.177

阅读有关[批量分配安全](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)性的信息，特别是**角色**。

你可以有

```
class TraningClass < ActiveRecord::Base
  attr_accessible .....
  attr_accessible ....., :user_id, as: :create
end 
```

`......`您希望批量分配访问的其他属性列表在哪里。然后当你打电话时`build`，你会传递那个角色

```
course.training_classes.build({user_id: user.id}, as: :create) 
```

对您的其他模型重复类似的操作。除非您在调用 , 等时指定角色，否则将使用默认角色*（第一个） ...*`:create``build``create!`

# java - Java Swing 中的 MouseListener 有时不响应

> ID：11453240
> 
> 赞同：2
> 
> 时间：2012-07-12T13:46:33.603
> 
> 标签：java, swing, mouseevent

我已经在我的主 Jframe 上实现了鼠标右键单击以打开菜单侦听器，它工作正常，除了一个问题。五分之一（给予或接受）点击它没有响应，这对用户来说可能非常烦人。这是我的代码：

```
contentPane = new JPanel();
contentPane.addMouseListener(new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent e) {

            if (e.getButton() == MouseEvent.BUTTON3) 
            {
                //Do Stuff
            }
        }
    }); 
```

你能帮我么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T13:54:42.933

1.  **您不会从`contentPane`.**

    我认为您的问题是您已将内容添加到面板中。当用户点击某个子组件占据的区域时，该子组件将获得点击事件。

    *快速修复：我建议您为所有子组件添加相同的鼠标侦听器。*

2.  **你不是在“点击”**

    单击是指按下鼠标并真正快速释放鼠标。如果您不小心，您可能会收到（例如）“按下、移动、释放”而不是“点击”的事件。

    *快速修复：改用`mouseReleased`事件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T12:44:08.837

请改用此代码：

```
private MouseAdapter listener = new MouseAdapter() {

    public void mouseReleased(MouseEvent e) {
        if (downer) {
            downer = false;
            if (new Rectangle(e.getComponent().getLocationOnScreen(), e.getComponent().getSize())
                    .contains(e.getLocationOnScreen())) {
                downer = false;
                // CODE
                new Thread(new Runnable(){
                     public void run(){
                         //Your Listener code
                     }
                }).start();

                /// COde
            }
        }
    }

    boolean downer = false;

    public void mousePressed(java.awt.event.MouseEvent e) {
        downer = true;
    }
}; 
```

仅当您按下组件并释放组件并为自定义任务启动新线程时，此代码才会做出反应。这应该总是有效的，因为 AWT 线程不会被长计算阻塞。

# javascript - 如何测量 javascript 解析时间

> ID：11453243
> 
> 赞同：9
> 
> 时间：2012-07-12T13:46:35.600
> 
> 标签：javascript

在我们公司，我们将每个 Javascript 文件合并成一个大（大约 700kb，但还在增长）压缩和 gzip 压缩的 Javascript 文件。我正在尝试评估为每个页面使用一个大 Javascript 文件（缩小和压缩）和使用多个 Javascript 文件（每个页面一个）之间的性能差异。

一个明显的区别是，大的 Javascript 文件可以在第一个页面请求加载后被浏览器缓存，之后产生的开销很小，而当使用多个 js 文件时，每个不同页面上至少会有一个未缓存的 get 请求。所以我会用较慢的初始页面加载来换取较慢的连续初始页面加载。

为了找出缓慢的初始页面加载（使用一个大的 Javascript 文件）何时会成为问题，足以证明将组合文件分解为更小的文件并更改我们的构建过程的工作，我想知道它需要多长时间需要解析代码，所以我可以估计总加载和解析时间。

到目前为止，我的方法是将脚本标记添加到需要当前时间的测试页面，使用 Javascript 附加一个大脚本，然后再次测量时间，如下所示：

```
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script')
script.setAttribute('type', 'text/javascript');
script.src = 'path/700kbCombineFile.js';
start_time = new Date().getTime();
head.appendChild(script); 
```

在 700kbCombineFile.js 的末尾，我附加了：

```
console.log(new Date().getTime() - start_time) 
```

然后我减去从 firebug 获得的网络传输时间，对于 700 kb 的文件大约需要 700 毫秒，对于 300 kb 的文件大约需要 300 毫秒。

这种方法有意义吗？为什么不？有没有更好的方法/任何工具可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T13:53:59.103

我认为 `console.time("Parsetime")`

和 `console.timeEnd("Parsetime")`

给你一个比日期对象更准确的测量，
[关于javascript时间准确性的文章](http://ejohn.org/blog/accuracy-of-javascript-time/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T13:54:13.620

解析 JavaScript 所需的时间在浏览器之间会有很大差异。

您所拥有的是我能想到的测量解析时间的最佳方法，*但是*，我会质疑这是否是判断哪种方法更有效的最佳测量方法。

**就个人而言**，我会考虑触发`load`事件`window`所花费的时间，从请求页面开始更好地衡量要采用哪种方法。

下载页面所花费的时间*很*重要，并且在第一次加载后*始终缓存文件仅在完美世界中才是正确的。*

# c# - 不同的类，不同的流程

> ID：11453244
> 
> 赞同：1
> 
> 时间：2012-07-12T13:46:42.327
> 
> 标签：c#, process

简单地说，一个具有以下三个类的控制台应用程序，

```
namespace Stackoverflow
{
    public class Program
    {
        public static void Main ( string [ ] args )
        {
            new Consumer ( );
            new Provider ( );

            Console . WriteLine ( "Exit ..." );
            Console . ReadKey ( );

        }
    }

    public class Consumer
    {
        public Consumer ( )
        {
            using ( Process Process = Process . GetCurrentProcess ( ) )
            {
                Console . WriteLine ( "Consumer : " + Process . ProcessName );
            }
        }
    }

    public class Provider
    {
        public Provider ( )
        {
            using ( Process Process = Process . GetCurrentProcess ( ) )
            {
                Console . WriteLine ( "Provider : " + Process . ProcessName );
            }
        }
    }
} 
```

输出将如下，

```
Consumer : Stackoverflow.vshost
Provider : Stackoverflow.vshost
Exit ... 
```

**问题：**
我可以将每个类附加到不同的流程，而不将它们分成不同的解决方案，尤其是提供者和消费者类吗？
这是为了测试目的。移动代理相关测试。

提前致谢。
问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:48:39.993

你能做的最好的就是在不同的线程中开始每个类。

您不能在当前进程“内”创建新进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:54:55.643

我不确定这是否会完全实现您想要实现的目标，但您可以在主应用程序执行期间将代码加载到不同的 AppDomain 中。以下[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms173139%28v=vs.100%29.aspx)包含有关执行此操作的完整示例的信息。

来自 AppDomain 上的 MSDN[文章](http://msdn.microsoft.com/en-us/library/ms173138)：

> 应用程序域提供了一种灵活且安全的方法来隔离正在运行的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:51:05.080

通过定义在程序运行时必须执行哪个*具体类来运行单独的进程。*要定义这一点，您可以使用简单的命令行参数。因此，您的程序读取命令行参数并决定运行哪种类型。

例如：

```
 public static void Main(string[] args)
    {
        if(args[0] == "consumer") 
          //run consumer 
        else 
          //run provider (as default)

    } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-12T13:51:02.420

简单的错误。你没有添加`{0}'`. 为您修复：

```
public class Program
{
    public static void Main(string[] args)
    {
        new Consumer();
        new Provider();

        Console.WriteLine("Exit ...");
        Console.ReadKey();

    }
}

public class Consumer
{
    public Consumer()
    {
        using(Process p = Process.GetCurrentProcess())
        {
            Console.WriteLine("Consumer : {0}", p.ProcessName);
        }
    }
}

public class Provider
{
    public Provider()
    {
        using(Process p = Process.GetCurrentProcess())
        {
            Console.WriteLine("Provider : {0}", p.ProcessName);
        }
    }
} 
```

输出：

```
Consumer : SOF
Provider : SOF
Exit ... 
```

# javascript - 如何使用javascript动态查找控件的ClientID？

> ID：11453245
> 
> 赞同：3
> 
> 时间：2012-07-12T13:46:45.443
> 
> 标签：javascript, jquery, asp.net, dynamic, client-side

我正在开发一个 javascript 函数，它接受三个控件的名称，然后在页面上找到它们。这些控件有五组。为简单起见，我想使用相同的函数并传入一组控件名称，然后让函数通过 clientID 动态查找控件。有没有办法做到这一点？

这是我到目前为止所拥有的...

```
 function InsertKeyword(keywordCtrl, subjCtrl, bodyCtrl) {
            var ctrl;
            if (OnSubj) ctrl = $find("<%=" + subjCtrl + ".ClientID%>");
            if (OnBody) ctrl = $find("<%=" + bodyCtrl + ".ClientID%>");
            if (OnSubj == 1 || OnBody == 1) {
                var selectedIndex = document.getElementById(keywordCtrl).selectedIndex;
                var selectedText = document.getElementById(keywordCtrl).options[selectedIndex].text;
                var strSpan = '<u>' + selectedText + '</u>&nbsp';
                ctrl.pasteHtml(strSpan);
            }
        } 
```

这不起作用，但它说明了我正在尝试做的事情。

**如何使用 javascript 动态查找控件的 ClientID？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:55:00.040

`<%= %>`是服务器端，而不是客户端代码，所以而不是......

```
if (OnSubj) ctrl = $find("<%=" + subjCtrl + ".ClientID%>");
if (OnBody) ctrl = $find("<%=" + bodyCtrl + ".ClientID%>"); 
```

你应该有类似...

```
if (OnSubj) ctrl = $find("<%=subjCtrl.ClientID%>");
if (OnBody) ctrl = $find("<%=bodyCtrl.ClientID%>"); 
```

Where`subjCtrl`和`bodyCtrl`是实际的服务器端控制对象。

你可以让你的 JavaScript 工作的唯一方法是如果你像这样调用函数......

```
InsertKeyword("my keyword", "<%=subjCtrl.ClientID%>", "<%=bodyCtrl.ClientID%>"); 
```

然后让你的 JavaScript 类似于......

```
function InsertKeyword(keywordCtrl, subjCtrl, bodyCtrl) {
  var ctrl;
  if (OnSubj) ctrl = $find(subjCtrl);
  if (OnBody) ctrl = $find(bodyCtrl); 
```

**更新**

*根据 OP 的评论，通过标记*在服务器端控件上声明属性时无法使用该`<%= %>`语法。`OnClientClick`

 *以下内容将不起作用，并且`<%=myCtrl.ClientID%>`将呈现与发送到浏览器时完全相同的内容......

```
<asp:Button runat="server" ID="test" OnClientClick="myFnc('<%=myCtrl.ClientID%>')"/> 
```

相反，您需要通过其中一种方法通过代码隐藏（假定为 C#）设置属性...

```
test.OnClientClick = "myFnc('" + myCtrl.ClientID + "');";
test.OnClientClick = string.Format("myFnc('{0}');", myCtrl.ClientID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:04:47.957

如果我理解您的问题，那么我认为您需要 javascript 中的控件 ID。如果您使用的是 Asp.Net 4，请设置控件`ClinetIDMode = Static`。现在在 javascript 中输入相同的控件 ID。例如，如果您有一个带有 ID 的控件，`myControl`那么在 javascript 中您可以将其作为

```
var cID = document.getElementByID('myControl'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:54:53.603

如何使用 CSS 选择器在 ASP.NET clientID 的最后一部分进行控件匹配，如下所示：

```
$.find('input[name$='+subjCtrl+']:checked'); 
```

未经测试，但应该是这样的。

编辑：我不知道您使用的是什么控件，但这是一个示例。如果您也发布 ASP.NET 标记，可以提供更详细的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T13:50:31.693

你不能这样做：

"<%=" + subjCtrl + ".ClientID%>"

你需要：

“<%= codeBehindControlID.ClientID %>”*

# android - 如何检查数据库中的元素是否存在于数组listview android中

> ID：11453247
> 
> 赞同：0
> 
> 时间：2012-07-12T13:46:52.000
> 
> 标签：android, listview, arraylist

我有一个数组列表。我需要通过它，看看输入时是否有一个元素。这个怎么做？

```
DatabaseUtil dbUtil1 = new DatabaseUtil(this);
        dbUtil1.open();
        Boolean contain=false;
        Cursor cursor = dbUtil1.fetchAllElements();
        if (cursor != null) {
            while (cursor.moveToNext()) {
                Model s= new Model(cursor.getString(1),cursor.getString(2));

                if (list.contains(s)) //THIS DOES NOT WORK
                {
                    contain=true;
                }
                else 
                    {
                    list.add(get(cursor.getString(1),cursor.getString(2)));
                    }

            }
        }

        dbUtil1.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:50:54.837

您的实例是一个新对象....将您创建的对象添加到 else 中，如下所示：

```
 Model s= new Model(cursor.getString(1),cursor.getString(2));

            if (list.contains(s)) //THIS DOES NOT WORK
            {
                contain=true;
            }
            else 
            {
                list.add(s);
            } 
```

# powershell - 从制表符分隔文件批量复制文件

> ID：11453252
> 
> 赞同：0
> 
> 时间：2012-07-12T13:47:08.750
> 
> 标签：powershell, batch-file, copy

我有一个制表符分隔文件，第一列包含文件的当前位置，第二列包含我希望将文件复制到的位置。

我如何创建一个脚本来自动执行此操作，例如 Powershell 或 Windows Batch？

非常感谢

布伦丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:49:59.230

如果您在 CSV 中的列名为`Path`and ，则以下方法有效`Destination`：

```
Import-Csv foo.csv -Delimiter "`t" | Copy-Item 
```

如果您的列名称不同（`File`和`TargetPath`此处），则需要进行一些翻译：

```
Import-Csv foo.csv -Delimiter "`t" | ForEach-Object {
  Copy-Item -Path $_.File -Destination $_.TargetPath
} 
```

如果您根本没有列标题，则需要`Import-Csv`说明：

```
Import-Csv foo.csv -Delim "`t" -Headers Path,Destination | Copy-Item 
```

在批处理文件中也是如此：

```
for /f "skip=1 tokens=1,2 delims=   " %%A in (foo.csv) do (
  rem                             ↖ that's a tab
  copy "%%~A" "%%~B"
) 
```

# python - Python 和 PyQt：从另一个类运行函数

> ID：11453256
> 
> 赞同：3
> 
> 时间：2012-07-12T13:47:18.143
> 
> 标签：python, class, function, pyqt

**更新 3：**

这是新代码，试图按照你告诉我的去做，但没有结果......我开始认为我在程序的某个地方做了一些非常愚蠢的事情......有什么新想法吗？

程序.py：

```
# -*- coding: utf-8 -*-
#imports:
import os
import platform
import sys
from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import newchilddlg
from newchilddlg import *

#version:
__version__ = "1.0.0"

#Lists:
am = []
courtdate = []
board_number = []
namesurname = []
fathersname = []
mothersname = []
birthday = []
placeofbirth = []
nationality = []
address = []
tel = []
job = []
praxis = []
dayofdoing = []
placeofdoing = [] 
children = [am, courtdate, board_number, namesurname, fathersname, mothersname, birthday, placeofbirth, nationality, address, tel, job, praxis, dayofdoing, placeofdoing]

#Main Window Class:
class MainWindow(QMainWindow):

    #__init__ function:
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        #Window size:
        self.resize(800,600)
        self.centralwidget = QtGui.QWidget(self)
        self.horizontalLayout = QtGui.QHBoxLayout(self.centralwidget)

        #Table Widget:
        self.tableWidget = QtGui.QTableWidget(self.centralwidget)
        self.vBar = self.tableWidget.verticalScrollBar()
        self._vBar_lastVal = self.vBar.value()
        self.horizontalLayout.addWidget(self.tableWidget)
        self.vBar.valueChanged.connect(self.scrollbarChanged)
        self.tableWidget.setGridStyle(QtCore.Qt.SolidLine)
        self.tableWidget.setRowCount(100)
        self.tableWidget.setColumnCount(15)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(0, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(1, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(2, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(3, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(4, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(5, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(6, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(7, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(8, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(9, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(10, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(11, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(12, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(13, item)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(14, item)
        self.tableWidget.horizontalHeader().setDefaultSectionSize(140)
        self.tableWidget.horizontalHeader().setHighlightSections(True)
        self.tableWidget.horizontalHeader().setStretchLastSection(False)
        self.tableWidget.verticalHeader().setDefaultSectionSize(30)
        self.tableWidget.verticalHeader().setStretchLastSection(False)
        self.horizontalLayout.addWidget(self.tableWidget)
        self.setCentralWidget(self.centralwidget)

        #Window Title:
        self.setWindowTitle(QtGui.QApplication.translate("MainWindow", "MainWindow", None, QtGui.QApplication.UnicodeUTF8))
        self.tableWidget.setSortingEnabled(False)

        #Collumns'names:
        item = self.tableWidget.horizontalHeaderItem(0)
        item.setText(QtGui.QApplication.translate("MainWindow", "Α.Μ.", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(1)
        item.setText(QtGui.QApplication.translate("MainWindow", "Ημερομηνία Δικάσιμου", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(2)
        item.setText(QtGui.QApplication.translate("MainWindow", "Αριθμός Πινακίου", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(3)
        item.setText(QtGui.QApplication.translate("MainWindow", "Ονοματεπώνυμο", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(4)
        item.setText(QtGui.QApplication.translate("MainWindow", "Όνομα Πατρός", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(5)
        item.setText(QtGui.QApplication.translate("MainWindow", "Όνομα Μητρός", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(6)
        item.setText(QtGui.QApplication.translate("MainWindow", "Ημερομηνία Γέννησης", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(7)
        item.setText(QtGui.QApplication.translate("MainWindow", "Τόπος Γέννησης", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(8)
        item.setText(QtGui.QApplication.translate("MainWindow", "Εθνικότητα", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(9)
        item.setText(QtGui.QApplication.translate("MainWindow", "Διεύθυνση Κατοικίας", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(10)
        item.setText(QtGui.QApplication.translate("MainWindow", "Τηλέφωνο", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(11)
        item.setText(QtGui.QApplication.translate("MainWindow", "Επάγγελμα-Ιδιότητα", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(12)
        item.setText(QtGui.QApplication.translate("MainWindow", "Πράξη", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(13)
        item.setText(QtGui.QApplication.translate("MainWindow", "Ημερομηνία Τέλεσης", None, QtGui.QApplication.UnicodeUTF8))
        item = self.tableWidget.horizontalHeaderItem(14)
        item.setText(QtGui.QApplication.translate("MainWindow", "Τόπος Τέλεσης", None, QtGui.QApplication.UnicodeUTF8))

        #menubar:
        self.menubar = QtGui.QMenuBar(self)
        self.menubar.setEnabled(True)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))
        self.menuFile = self.menubar.addMenu("&File")
        self.menuFile.setSizeIncrement(QtCore.QSize(0, 0))
        self.menuEdit = self.menubar.addMenu("&Edit")
        self.setMenuBar(self.menubar)
        self.menuFile.setTitle(QtGui.QApplication.translate("MainWindow", "File", None, QtGui.QApplication.UnicodeUTF8))
        self.menuEdit.setTitle(QtGui.QApplication.translate("MainWindow", "Edit", None, QtGui.QApplication.UnicodeUTF8)) 

        #Creating Action filenewchild:
        self.filenewchild = self.createAction("&Εισαγωγή Ανηλίκου", self.doupdate, "Ctrl+C", "" ,"Εισαγωγή Δεδομέων Ανηλίκου")
        self.menuFile.addAction(self.filenewchild)
        self.filenewchild.setText(QtGui.QApplication.translate("MainWindow", "Εισαγωγή Ανηλίκου", None, QtGui.QApplication.UnicodeUTF8))

        #Adding objects from lists to the Table Widget:
        r=0
        c=0
        for x in children:
            for i in x:
                newItem = QtGui.QTableWidgetItem(i)
                self.tableWidget.setItem(r, c, newItem)
                r += 1
            r = 0
            c += 1

    # Growing rows while scrolling down....
    def scrollbarChanged(self, val):
        bar = self.vBar
        minVal, maxVal = bar.minimum(), bar.maximum()
        avg = (minVal+maxVal)/2
        rowCount = self.tableWidget.rowCount()
        if val > self._vBar_lastVal and val >= avg:
            self.tableWidget.insertRow(rowCount)
        elif val < self._vBar_lastVal:
            lastRow = rowCount-30
            empty = True
            for col in xrange(self.tableWidget.columnCount()):
                item = self.tableWidget.item(lastRow, col)
                if item and item.text():
                    empty=False
                    break
            if empty:
                self.tableWidget.removeRow(lastRow)
        self._vBar_lastVal = val    

    #A function to help us create Actions faster:
    def createAction(self,text, slot=None, shortcut=None, icon=None,
                     tip=None, checkable=False, signal="triggered()"):
        action = QAction(text, self)
        if icon is not None:
            action.setIcon(QIcon(":/%s.png" % icon))
        if shortcut is not None:
            action.setShortcut(shortcut)
        if tip is not None:
            action.setToolTip(tip)
        if slot is not None:
            self.connect(action, SIGNAL(signal), slot)
        if checkable:
            action.setCheckable(True)
        return action    

    #A function that updates the table:
    def updatetable(self):
        self.tableWidget.clear()
        r=0
        c=0
        for x in children:
            for i in x:
                newItem = QtGui.QTableWidgetItem(i)
                self.tableWidget.setItem(r, c, newItem)
                r += 1
            r = 0
            c += 1    

    #Handles NewChildDlg actions:
    def doupdate(self):
        newchilddlg.main()
        d = NewChildDlg(self)
        if d.accept():
            text = NewChildDlg.text()
            am.append(text)
            self.updatetable()

#Main loop:
if __name__ == '__main__':
    app = QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

newchilddlg.py：

```
# -*- coding: utf-8 -*-
#imports:
from PyQt4 import QtCore, QtGui
import sys
from PyKDE4.kdeui import KDateComboBox
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import program
from program import *

#NewChildDialog Class:
class NewChildDlg(QDialog):

    #__init__ function:
    def __init__(self, parent=None):
       super(NewChildDlg, self).__init__(parent)
       self.resize(400, 600)
       self.lineEdit = QtGui.QLineEdit(self)
       self.lineEdit.setGeometry(QtCore.QRect(160, 20, 211, 23))
       self.lineEdit.editingFinished.connect(self.amlist)
       self.kdatecombobox = KDateComboBox(self)
       self.kdatecombobox.setGeometry(QtCore.QRect(160, 50, 211, 23))
       self.lineEdit2 = QtGui.QLineEdit(self)
       self.lineEdit2.setGeometry(QtCore.QRect(160, 80, 211, 23))
       self.lineEdit3 = QtGui.QLineEdit(self)
       self.lineEdit3.setGeometry(QtCore.QRect(160, 110, 211, 23))
       self.lineEdit4 = QtGui.QLineEdit(self)
       self.lineEdit4.setGeometry(QtCore.QRect(160, 140, 211, 23))
       self.lineEdit5 = QtGui.QLineEdit(self)
       self.lineEdit5.setGeometry(QtCore.QRect(160, 170, 211, 23))
       self.kdatecombobox2 = KDateComboBox(self)
       self.kdatecombobox2.setGeometry(QtCore.QRect(160, 200, 211, 23))
       self.lineEdit6 = QtGui.QLineEdit(self)
       self.lineEdit6.setGeometry(QtCore.QRect(160, 230, 211, 23))
       self.lineEdit7 = QtGui.QLineEdit(self)
       self.lineEdit7.setGeometry(QtCore.QRect(160, 260, 211, 23))
       self.lineEdit8 = QtGui.QLineEdit(self)
       self.lineEdit8.setGeometry(QtCore.QRect(160, 290, 211, 23))
       self.lineEdit9 = QtGui.QLineEdit(self)
       self.lineEdit9.setGeometry(QtCore.QRect(160, 320, 211, 23))
       self.lineEdit10 = QtGui.QLineEdit(self)
       self.lineEdit10.setGeometry(QtCore.QRect(160, 350, 211, 23))
       self.lineEdit11 = QtGui.QLineEdit(self)
       self.lineEdit11.setGeometry(QtCore.QRect(160, 380, 211, 23))
       self.kdatecombobox3 = KDateComboBox(self)
       self.kdatecombobox3.setGeometry(QtCore.QRect(160, 410, 211, 23))
       self.lineEdit12 = QtGui.QLineEdit(self)
       self.lineEdit12.setGeometry(QtCore.QRect(160, 440, 211, 23))
       self.pushButton = QtGui.QPushButton(self)
       self.pushButton.setGeometry(QtCore.QRect(90, 530, 211, 40))
       self.pushButton.clicked.connect(self.addtolists)
       self.label = QtGui.QLabel(self)
       self.label.setGeometry(QtCore.QRect(20, 20, 211, 23))
       self.label2 = QtGui.QLabel(self)
       self.label2.setGeometry(QtCore.QRect(20, 50, 211, 23))
       self.label3 = QtGui.QLabel(self)
       self.label3.setGeometry(QtCore.QRect(20, 80, 211, 23))
       self.label4 = QtGui.QLabel(self)
       self.label4.setGeometry(QtCore.QRect(20, 110, 211, 23))
       self.label5 = QtGui.QLabel(self)
       self.label5.setGeometry(QtCore.QRect(20, 140, 211, 23))
       self.label6 = QtGui.QLabel(self)
       self.label6.setGeometry(QtCore.QRect(20, 170, 211, 23))
       self.label7 = QtGui.QLabel(self)
       self.label7.setGeometry(QtCore.QRect(20, 200, 211, 23))
       self.label8 = QtGui.QLabel(self)
       self.label8.setGeometry(QtCore.QRect(20, 230, 211, 23))
       self.label9 = QtGui.QLabel(self)
       self.label9.setGeometry(QtCore.QRect(20, 260, 211, 23))
       self.label10 = QtGui.QLabel(self)
       self.label10.setGeometry(QtCore.QRect(20, 290, 211, 23))
       self.label11 = QtGui.QLabel(self)
       self.label11.setGeometry(QtCore.QRect(20, 320, 211, 23))
       self.label12 = QtGui.QLabel(self)
       self.label12.setGeometry(QtCore.QRect(20, 350, 211, 23))
       self.label13 = QtGui.QLabel(self)
       self.label13.setGeometry(QtCore.QRect(20, 380, 211, 23))
       self.label14 = QtGui.QLabel(self)
       self.label14.setGeometry(QtCore.QRect(20, 410, 211, 23))
       self.label15 = QtGui.QLabel(self)
       self.label15.setGeometry(QtCore.QRect(20, 440, 211, 23))

       self.setWindowTitle(QtGui.QApplication.translate("Form", "Εισαγωγή Ανηλίκου", None, QtGui.QApplication.UnicodeUTF8))
       self.label.setText(QtGui.QApplication.translate("Form", "Α.Μ.:", None, QtGui.QApplication.UnicodeUTF8))
       self.label2.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Δικασίμου:", None, QtGui.QApplication.UnicodeUTF8))
       self.label3.setText(QtGui.QApplication.translate("Form", "Αριθμός Πινακίου:", None, QtGui.QApplication.UnicodeUTF8))
       self.label4.setText(QtGui.QApplication.translate("Form", "Ονοματεπώνυμο:", None, QtGui.QApplication.UnicodeUTF8))
       self.label5.setText(QtGui.QApplication.translate("Form", "Όνομα Πατρός:", None, QtGui.QApplication.UnicodeUTF8))
       self.label6.setText(QtGui.QApplication.translate("Form", "Όνομα Μητρός:", None, QtGui.QApplication.UnicodeUTF8))
       self.label7.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Γέννησης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label8.setText(QtGui.QApplication.translate("Form", "Τόπος Γέννησης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label9.setText(QtGui.QApplication.translate("Form", "Εθνικότητα:", None, QtGui.QApplication.UnicodeUTF8))
       self.label10.setText(QtGui.QApplication.translate("Form", "Διεύθυνση Κατοικίας:", None, QtGui.QApplication.UnicodeUTF8))
       self.label11.setText(QtGui.QApplication.translate("Form", "Τηλέφωνο:", None, QtGui.QApplication.UnicodeUTF8))
       self.label12.setText(QtGui.QApplication.translate("Form", "Επάγγελμα-Ιδιότητα:", None, QtGui.QApplication.UnicodeUTF8))
       self.label13.setText(QtGui.QApplication.translate("Form", "Πράξη:", None, QtGui.QApplication.UnicodeUTF8))
       self.label14.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Τέλεσης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label15.setText(QtGui.QApplication.translate("Form", "Τόπος Τέλεσης:", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton.setText(QtGui.QApplication.translate("Form", "Εισαγωγή", None, QtGui.QApplication.UnicodeUTF8))

    def amlist(self):
        self.text = str(self.lineEdit.text())

    def addtolists(self):
        dialog.accept()        

#Main loop:        
def main():
    global dialog
    dialog = NewChildDlg()
    dialog.show()
    dialog.exec_() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T15:19:05.990

**具体错误相关问题**

删除 update2 方法上的 classmethod 装饰器。它使“自我”变成类对象，并且您的类上没有 tableWidget 属性。只有你的小部件。这里的装饰器没有用。

**一般设计和基本问题**

此代码存在一些严重的重大基本问题。我意识到你是新人并且正在学习，所以你现在解决这些问题更加重要。这是一本[很棒的书，使用 Python 和 Qt 进行快速 GUI 编程](http://www.qtrac.eu/pyqtbook.html)，对于学习 PyQt，我赞不绝口

您在这里所做的是获取由 Qt Designer 生成的 UI 设计文件，并对其进行编辑以将您的逻辑插入`setupUi`方法中。关于这个 ui 文件，您需要了解的是它创建了包含要应用于您自己的类的小部件设置代码的通用类。您在底部有概念的那一部分，您可以在其中创建一个新的 QMainWindow 然后调用`setupUi`它。您不应该做的是创建大量全局变量或在这些 UI 设置类中添加额外的方法和逻辑。你也有一个错误的例子`@classmethod`。

PyQt 中的对象关系通常是这样工作的……父类可以有属性和子小部件。子小部件可以具有属性，并且通常不知道它们的父母。

如何正确设置此 QMainWindow 的一个示例是首先将该 UI 自动生成代码保存在其自己的文件中（`myappUI.py`或类似的文件）。然后您将为您的 QMainWindow 创建一个子类，其中将包含您的自定义方法和数据属性：

```
class MainWindow(QtGui.QMainWindow, Ui_MainWindow):

    def __init__(self, *args, **kwargs):
        super(MainWindow, self).__init__(*args, **kwargs)
        self.setupUi(self)

        # create instance attributes to store data
        ...
        self.mothersname = []
        self.birthday = []
        self.placeofbirth = []
        self.nationality = []
        self.address = []
        ...

        r=0
        c=0
        for x in children:
            for i in x:
                newItem = QtGui.QTableWidgetItem(i)
                self.tableWidget.setItem(r, c, newItem)
                r += 1
            r = 0
            c += 1

    def newFile(self):
        ...

    def openFile(self):
        ...

    def Quit(self):
        # Dont force the exit of the app like this.
        # Just close the main window
        # sys.exit(app.exec_())

    # this was in no way a classmethod      
    # @classmethod
    def update2(self): 
        ...

    def actionewchild(self):
        ...
        # if you want to create a form dialog on the fly
        # and kill it after you get results
        form = Form(parent=self)
        form.exec_()

    def lists(self):
        ...

class Form(QtGui.QDialog, Ui_Form):

    def __init__(self, *args, **kwargs):
        super(Form, self).__init__(*args, **kwargs)
        self.setupUi(self)

    def amlist(self):
        ...

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_()) 
```

这只是一个粗略的大纲，说明如何将其重组为两个类，每个类都继承自他们的 UI 设计。那些大量的全局变量可能会作为实例属性移动到您的 MainWindow 中。不要使用全局变量。

我之所以采用这种方法，建议您彻底重组，是因为您正走在一条非常混乱且可能令人沮丧的道路上。事情不会像您期望的那样工作，您会发现自己经常在这里发布关于为什么会发生这种情况的帖子。如果您花时间阅读我建议的那本书，您将获得更好的体验。

**更新 #1：匹配您的代码更新**

主窗口和对话框之间的概念是倒退的。您的主窗口将操作连接到对话框模块中的功能以启动它并完成工作。真正应该发生的是你的主窗口连接到它自己的方法。此方法将启动对话框，获取结果并自行修改。

```
def addtolists(self):
    program.am.append(text)
    instance = MainWindow()
    instance.updatetable()
    dialog.close() 
```

您的对话框中有该代码。首先，像这样调用 MainWindow 不会让您获得实例。它将尝试创建第二个主窗口小部件。不要尝试获取对父级的引用并对其进行修改。孩子们不应该知道正在使用它的父母。就您所知，您可能会在不同的地方使用此对话框。

```
# this is just a pseudo example of the right direction.
# A method in your MainWindow, starting the child dialog,
# waiting on its results, and updating itself.
def showDialog(self):
    d = MyDialog(self)
    if d.exec_():
        self.updateStuff(d.values)

myAction.triggered.connect(self.showDialog) 
```

至于全局变量......您的应用程序设计中不应该需要一个全局变量。它们适用于您知道需要它们的特殊情况。我想说的是，如果您现在使用全局变量，您可能做错了。原因是您使用它们在不同方向传递数据，而不是遵循父子关系，或通过信号/插槽传递数据。如果父级启动子小部件，它将了解子级并能够调用方法或从中获取值。

**更新 #2：匹配您的代码更新**

从主窗口创建对话框有点偏离。它应该是这样的：

```
def doupdate(self):
    d = NewChildDlg(self)
    # exec_ shows the dialog modally
    if d.exec_():
        # your dialog didn't have a pre-initialized
        # `text` attribute so it was not safe to assume
        text = d.lineEdit.text()
        # stop using globals. use attributes
        self.am.append(text)
        self.updatetable() 
```

对于全球...再次停止使用它们。将它们移动到您的主窗口类中：

```
class MainWindow(QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.am = []
        self.courtdate = []
        self.board_number = [] 
```

您的对话框类中的这一部分是错误的：

```
 def addtolists(self):
        # why use a global here? dialog == self
        # self.accept()
        dialog.accept()        

# you don't need a top level function that
# maintains a global instance and creates the dialog
# It should be the callers responsibility
def main():
    global dialog
    dialog = NewChildDlg()
    dialog.show()
    dialog.exec_() 
```

最后，只是对您的导入语句的评论......您无需先导入模块即可导入该模块的成员：

```
# either you need the newchilddlg namespace
# or you only want the members...
# newchilddlg.NewChildDlg  vs  NewChildDlg
import newchilddlg
from newchilddlg import * 
```

为了帮助您更多，我在这里发布了您的主窗口代码的清理版本：http: [//pastebin.com/9b8gcGhU](http://pastebin.com/9b8gcGhU)

# html - 在c#中为html标签创建正则表达式

> ID：11453262
> 
> 赞同：0
> 
> 时间：2012-07-12T13:47:30.123
> 
> 标签：html, asp.net, regex, c#-2.0

我在 C# 中为以下标签创建正则表达式时遇到问题，

```
<div style="position:absolute;left:588.32px;top:443.12px" class="cls_005">652D</div> 
```

我正在尝试这种方式，但它不起作用：

```
<div\\s+style=\"position:absolute;left:(.*)px;top:(.*)px\"\\s+class=\"cls_.*\"[^>]*>(.*)</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:46:45.633

您提供的输入字符串和正则表达式似乎有效。

```
 private static void Main(string[] args)
    {
        var input = "<div style=\"position:absolute;left:588.32px;top:443.12px\" class=\"cls_005\">652D</div>";
        var regex = new Regex("<div\\s+style=\"position:absolute;left:(.*)px;top:(.*)px\"\\s+class=\"cls_.*\"[^>]*>(.*)</div>"
            , RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.IgnoreCase);
        var m = regex.Match(input);
        if (m.Success)
            foreach (var o in m.Groups)
                Console.WriteLine(o.ToString());

        else
            Console.WriteLine("no success");

        Console.ReadLine();
    } 
```

# c# - ftp Web 请求中的输入字符串格式不正确

> ID：11453263
> 
> 赞同：3
> 
> 时间：2012-07-12T13:47:33.573
> 
> 标签：c#, string, formatexception

我正在 ftp 服务器上创建一个文件。但是在服务器上创建文件之前，我还要检查它是否不存在。但是，大多数系统都运行良好，但我的一个客户有问题。当他运行应用程序时，它会抛出 system.formatexception 即输入字符串的格式不正确。

我无法理解这个问题。有谁能够帮我？

以下是创建文件的代码。

```
 public string createFile(string filename1)
           {

            StreamWriter sw1 = null;
            System.Net.FtpWebRequest tmpReq1;
            try
            {
            tmpReq1 = (System.Net.FtpWebRequest)System.Net.FtpWebRequest.Create("ftp://ftp.dunyameri.com/pt/" + filename1);
            tmpReq1.Credentials = new System.Net.NetworkCredential("naveed@dunyameri.com", "xxxxx");
            FtpWebResponse response = (FtpWebResponse)tmpReq1.GetResponse();
            }
            catch (WebException ex)
            {
                FtpWebResponse response2 = (FtpWebResponse)ex.Response;
                if (response2.StatusCode == FtpStatusCode.ActionNotTakenFileUnavailable)
                    {
                        // I am creating file here
                    }
                    else
                    {
                        return ex.ToString();
                    }
            }
            return "File Created";

        } 
```

我在互联网上搜索过可能是因为字符串包含 0 或点。在这个特定的系统案例中，文件名包含点和 0。是因为这种类型的文件名吗？

![异常说明](../Images/906c87cccc85acfb9e204d018dad2746.png)

谢谢， 纳维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:10:50.753

似乎“createFile（string filename1）”中没有发生错误。如果是这样，堆栈应该类似于：

```
...
System.Convert.ToInt32(String value)
e2erta.e2erta1.YourFtpClass.createFile(string filename1) <- I would expect this line!
e2erta.e2erta1..ctor() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:03:15.550

我最好的猜测是`filename1`从一个`/`角色开始。您可以使用该`Path.Combine`方法来处理这种情况：

```
var path = Path.Combine("ftp://ftp.dunyameri.com/pt/", filename1);
var tmpReq1 = (System.Net.FtpWebRequest)System.Net.FtpWebRequest.Create(path);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:05:01.600

网址应该是“ftp://”+用户名+“:”+密码+“@”+serverAddress+“:”+serverPort+“/”+文件。

尝试添加端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:05:05.247

FtpWebRequest 类没有 Create 方法参见链接[http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest_methods](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest_methods)

链接上显示的示例将 WebRequest.Create 转换为 FtpWebRequest 这可能是问题

# nsarray - NSMenu - 最近的列表

> ID：11453264
> 
> 赞同：0
> 
> 时间：2012-07-12T13:47:35.337
> 
> 标签：nsarray, plist, nsmenuitem, nsmenu, recent-file-list

我需要为在 cloudapp 或 droplr 中上传的图像实现一个“最近列表”。因此，每当我上传图像时，它应该创建一个带有标题（或 url）的 nsmenuitem。应该总是有最后 5 个上传的图像。所以我想我需要一个可以保存最后 5 张图像（图像标题）的 plist，当打开菜单时，它应该加载最近的 5 张。但我需要你的帮助，因为我不知道该怎么做. 每当上传新图像时，我都必须编辑 plist，使其位于 plist 中的第一位，并且所有旧条目都必须获得它们的 index+1。

我希望你能理解我。你知道如何实现这一目标吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:03:50.970

虽然我不确定这是否是您真正想要做的，但不久前我实现了一个类似的功能。就我而言，它仅适用于文件，但也适用于您的情况（或至少向您展示一种方法）

```
void populateRecentList(const char** files)
{
    NSMenu* fileMenu = [[[NSApp mainMenu] itemWithTitle:@"File"] submenu];
    NSMenu* recentItems = [[fileMenu itemWithTitle:@"Recent Files"] submenu];

    [recentItems removeAllItems];

    for (int i = 0; i < 4; ++i)
    {
        const char* filename = files[i];
        NSString* name = [NSString stringWithUTF8String: filename];

        NSMenuItem* newItem = [[NSMenuItem alloc] initWithTitle:name action:@selector(onRecentFile:) keyEquivalent:@""];
        [newItem setTag:i];
        [newItem setRepresentedObject:[NSString stringWithFormat:@"%d",i]];
        [newItem setKeyEquivalentModifierMask: NSCommandKeyMask];
        [newItem setKeyEquivalent:[NSString stringWithFormat:@"%d",i + 1]];

        [recentItems addItem:newItem];

        [newItem release];
    }
} 
```

# solr - Solrnet - 使用函数提升查询

> ID：11453269
> 
> 赞同：2
> 
> 时间：2012-07-12T13:47:44.400
> 
> 标签：solr, solrnet

我正在尝试使用 solrnet 查询 sol。

我希望通过记录的属性来提升查询。

然后我的查询如下所示： /select?fl=QualityScore,score&q={!boost+b=sum(1,log(sum(1,QualityScore)))+v=$qq}&qq="qome query"

有没有办法使用 SolrNet 做到这一点？

PS - 我已经查看了[具有增强功能的 SolrNet 查询，](https://stackoverflow.com/questions/1577074/solrnet-queries-with-boost-functions)但当我使用“bf”时，我没有看到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:23:56.190

在这种情况下，毛里西奥的指针对我有帮助。

[本地参数](https://github.com/SolrNet/SolrNet/blob/master/Documentation/Querying.md#localparams)

# html - 获取 html 表以扩展超过 100%，但仅在需要时

> ID：11453272
> 
> 赞同：0
> 
> 时间：2012-07-12T13:47:52.293
> 
> 标签：html, css

我正在为一位女士制作这个网站，我在想我可能有问题。它在我的屏幕上看起来像这样，这很完美： [这里](http://droemmebilleder.dk/myscreen.jpg)

但我认为这个网站的大多数用户可能有更小或更旧的显示器，他们必须向下滚动才能找到看起来像 [这样的底部](http://droemmebilleder.dk/smallerscreen.jpg)

HTML：

```
<div id="wrapper">
<table align="center" id="content" border="0" cellpadding="0" cellspacing="0" vspace="0">
<tr align="center" valign="top">

<td rowspan="2" id="pageshadow_left"></td>

<td height="209">
<div style="position:relative; height:100%;">
<img src="textlogo.png" width="387" height="90">
<a href="index.php" target="_self"><div id="forside"><img src="forside.png"></div></a>
<a href="profil.php" target="_self"><div id="profil"><img src="profil.png"></div></a>
<a href="udstillinger.php" target="_self"><div id="udstillinger"><img     src="udstillinger.png"></div></a>
<a href="kurser.php" target="_self"><div id="kurser"><img src="kurser.png"></div></a>
<a href="kontakt.php" target="_self"><div id="kontakt"><img src="kontakt.png"></div></a>
<div id="logotop"></div>
<div id="logofront" align="right"></div>
<div id="velkommen" align="center"></div>
<div id="fronttextwrapper" style="position:relative">
<div id="fronttext" align="left">

<?php echo "PHP Virker!"; ?>

<p>Drømmebilleder kalder jeg mine malerier.
Jeg benytter stilhed, meditation og musik til skabelse af malerierne.
De bliver hovedsageligt skabt intuitivt ud fra mine indre billeder,
og helt naturligt vil disse billeder bl.a. være frugten af oplevelser i naturen,     inspiration fra andre kunstnere, bøger der er læst, film der er set.</p>
<p></p>
<p>Mine malerier har ingen titler, det er bevidst, da det er vigtigere for mig 
hvad du oplever og ikke hvad jeg føler du skal opleve, lad malerierne tale til 
dig og få din personlige  drømmebilled- oplevelse.</p>
<p></p>

<p>Jeg underviser i at male intuitivt, så er du blevet inspireret,
kan du kigge under kurser, Du behøver ikke at have malet før
for at skabe dine egne drømmebilleder.</p>
<p></p>

<p>God fornøjelse med at kigge i galleriet, og måske på gensyn.</p>
<p>Drude</p>
</div>
</div>
</div>
</td>

<td rowspan="2" id="pageshadow_right";></td>
</tr>

</table>
</div> 
```

CSS：

```
body, html {
background-color:#918c8c;
margin:0px;
height:auto;
padding : 0px;  
width : 100%; 
height : 100%; 
overflow:visible;
}

img {
border-style:none;
}

#content {
border-style:none;
background-color:#ffffff;
width:1050px;
height:100%;
margin-top:0px;
background-image:url(top.png);
background-position:top;
background-repeat:no-repeat;
margin-bottom:500px;
overflow:visible;
}

#forside {
width:128px;
height:67px;
position:absolute;
top:80px;
left:40px;
}

#profil {
width:146px;
height:68px;
position:absolute;
top:100px;
left:180px;
}

#udstillinger {
width:188px;
height:61px;
position:absolute;
top:107px;
left:342px;
}

#kurser {
width:118px;
height:51px;
position:absolute;
top:115px;
left:540px;
}

#kontakt {
width:268px;
height:83px;
position:absolute;
top:74px;
left:680px;
}

#logotop {
width:50px;
height:54px;
background-image:url(logotop.png);
position:absolute;
top:5px;
left:5px
}

#pageshadow_left {
border-style:none;
width:25px;
background-image:url(page_shadow_left.jpg);
background-repeat:repeat-y;
}

#pageshadow_right {
border-style:none;
width:25px;
background-image:url(page_shadow_right.jpg);
background-repeat:repeat-y
}

#velkommen {
position:absolute;
top:180px;
left:103px;
background-image:url(velkommen.png);
width:794px;
height:136px;
}

#logofront {
background-image:url(logo.png);
width:200px;
height:241px;
position:absolute;
top:200px;
left:760px;
}

#fronttext {
position:absolute;
top:300px;
left:100px;
width:450px;
height:auto;
text-align:left;
font-family:"Times New Roman", Times, serif;
font-size:18px;
}

#wrapper {
height:100%;
overflow:auto;
} 
```

任何知道什么会做的伎俩的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:51:02.573

您不能将表格制作为 100% 高度，也可以根据内容高度制作最小高度。

# ajax - 为什么 GIF 动画在进行 AJAX 调用时停止工作？

> ID：11453277
> 
> 赞同：3
> 
> 时间：2012-07-12T13:48:04.207
> 
> 标签：ajax, animation, jquery-ui-dialog, gif

我的目标是在我进行 AJAX 调用时显示一个加载弹出窗口（其中包含一个 GIF）。我正在使用[jQuery UI 模态对话框](http://jqueryui.com/demos/dialog/#modal)，我在其中使用 CSS 插入 GIF 动画。在 AJAX 调用开始之前，我打开对话框并在调用结束后立即关闭它。问题是当 AJAX 调用运行时 GIF 停止工作，并且在所有浏览器中都发生了这种情况。我正在使用以下代码：

```
<div id="loadingScreen" title="Loading">Please wait...</div>

#loadingScreen {
    background: url(http://regretless.com/stuff/jQuery/images/loading.gif) no-repeat 5px 8px;
    padding-left: 25px;
}

$("#loadingScreen").dialog('open');
setTimeout(function () {
  $.ajax({
    type: "GET",
    url: "testing.txt",
    async: true,
    dataType: "text",
    success: function (returnText) {
      $("#viewDescription").text(returnText);
      $("#viewGroupID").text(" " + t.id);
      $("#loadingScreen").dialog('close');
      $('#View').dialog('open');
    },
    error: function (xhr, status, error) {
      $("#loadingScreen").dialog('close');
      alert("An error has occured");
    }
  });
}, 10); 
```

谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:00:45.000

因为这是背景，您需要将焦点设置为#loadingScreen 以保持动画继续播放。

# perl - 搜索关键字，然后以找到它为条件使用 Perl 从单词列表中搜索另一个关键字

> ID：11453279
> 
> 赞同：-1
> 
> 时间：2012-07-12T13:48:07.567
> 
> 标签：perl, search

我关于 Perl 的问题与此处回答的涉及 Python 的问题非常相似： [如何在文档中搜索关键字，然后在 Python 中原始关键字的一组行内搜索后续关键字？](https://stackoverflow.com/questions/5825055/how-can-i-search-within-a-document-for-a-keyword-and-then-subsequent-key-words-w)

这包括搜索一个关键字，然后在原始关键字附近（例如加减 5 行）的关键字列表（例如，您有 4 个单词的列表）中搜索另一个关键字，然后在匹配时打印出一系列行（说从原始关键字加上减去 20 行）

如果可能，两个扩展：

Ext 1：在打印输出中突出显示关键词

Ext 2：从目录中搜索所有文件并将文件名添加到打印输出（文件名在一行中，后跟从文件中提取的行）

即使针对类似的例子，我也会很感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:24:16.557

1.  读入文件作为一个不错的数组：

    ```
    my @line = <FILE>; 
    ```

2.  搜索第一个词：

    ```
    my $i;
    foreach $i (0 .. $#line) {
      last if $line[$i] =~ /$firstWord/i;
    } 
    ```

3.  使用数组切片获取周围环境：

    ```
    my @surrounding = @line[$i-5 .. $i+5]; 
    ```

    但是，应该使用一些索引检查，例如

    ```
    [0<=$i-5 ? 0 : $i-5 .. $i+5<@line ? $i+5 : $#line] 
    ```

4.  重复
5.  利润

其余的留给读者作为练习。

用于高亮写

```
 $line[$i] =~ s{($firstWord)}{<strong>$1</strong>}; 
```

或类似的，取决于您的输出媒体。`map`是你的朋友。

# php - magento - 制作新产品时设置的默认属性

> ID：11453284
> 
> 赞同：3
> 
> 时间：2012-07-12T13:48:27.007
> 
> 标签：php, magento, magento-1.6

我的 magento 商店中有几个属性集。（第 1.6.2 节）

当我制作新产品时，“**袜子**”是默认属性集。但我希望“**服装**”成为默认值。

我怎样才能改变这个？

我希望任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T11:47:02.373

最初的问题似乎没有在这里得到回答，我正在寻找 Ronny 也想要的东西。

发现已经发布了一个扩展，它只是为你做的。

[http://www.magentocommerce.com/magento-connect/default-attribute-set.html](http://www.magentocommerce.com/magento-connect/default-attribute-set.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:48:52.783

要更改现有的产品属性集，您可以[创建一个](http://www.magentocommerce.com/knowledge-base/entry/configurable-product-step-2-create-the-attribute-set)包含您需要的所有属性的新属性集

您可以安装此扩展程序（[更改属性集](http://www.magentocommerce.com/magento-connect/flagbit-change-attribute-set.html)）或在数据库中进行更改（您需要知道产品 ID 和属性集 ID）

手动更改（更改前始终备份）：

转到 eav_attribute_set 表并查找新创建的属性集的 attribute_set_id（您也可以通过查看编辑属性集“xxxx”页面上的 url www.xxxx/edit/id/10/key/xxx 在管理员中获取此信息)

获得所有产品 ID 和相应属性集 ID 的列表后，请转到下表并更新这些字段

```
Table Name : catalog_product_entity
Field Name : attribute_set_id
Field Name : entity_id // is product_id 
```

另一种方法是删除这些产品并使用新属性集重新创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T21:14:21.757

不幸的是，这是不可能的。您应该创建新产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T23:43:07.113

可以通过直接编辑数据库来完成您想要的。*仅当您熟悉 MySQL 命令或其他工具（如 phpMyAdmin）时才执行此操作。*

要进行此更改，您需要做两件事。

1.  获取新属性集的 ID，在本例中是您的“**服装**”属性集。`eav_attribute_set`从 Magento 管理区域编辑属性集时，您可以在数据库表或浏览器 URL 中找到 id 。我更喜欢只使用数据库，因为无论如何我们都需要进入那里进行更改。

    `Table Name : eav_attribute_set`
    `Column Name: attribute_set_id`

    在表中查找具有您在创建新集时使用的名称的行 - 这应该很明显，您将在名为的列中看到所有属性集名称`attribute_set_name`

2.  获得首选属性集 ID 后，您需要访问该`eav_entity_type`表并更新where和`default_attribute_set_id`行的列中的值。在全新安装的 Magento 中，此列中要查找的值也是 4。**完成！**更改 id 值后，您会注意到您的首选属性集是您下次创建新产品时默认选择的属性集。我相信这就是问题所要求的。`entity_type_id = 4``entity_type_code = catalog_product`

    `Table Name : eav_entity_type`
    `Column Name: default_attribute_set_id`

 ***注意：这应该适用于 Magento 1 和 2。在撰写本文时，当前的 Magento 版本是：1.9.2.4 和 2.0.7***

# css - 压缩 CSS YUI 压缩器

> ID：11453287
> 
> 赞同：0
> 
> 时间：2012-07-12T13:48:39.403
> 
> 标签：css, compression

任何人都知道在一行中压缩所有 css 需要哪个选项。我正在使用一个名为 bwp-minify 的 wordpress 插件，但是该插件的 css 压缩级别很低，我正在尝试通过 YUICompressor.php 更改它

我尝试将换行符更改为 0 和 100000，但没有任何效果。

是以下吗？

```
 --line-break
      Some source control tools don't like files containing lines longer than,
      say 8000 characters. The linebreak option is used in that case to split
      long lines after a specific column. It can also be used to make the code
      more readable, easier to debug (especially with the MS Script Debugger)
      Specify 0 to get a line break after each semi-colon in JavaScript, and
      after each rule in CSS. 
```

源代码：

```
<?php
/**
 * Class Minify_YUICompressor 
 * @package Minify
 */

/**
 * Compress Javascript/CSS using the YUI Compressor
 * 
 * You must set $jarFile and $tempDir before calling the minify functions.
 * Also, depending on your shell's environment, you may need to specify
 * the full path to java in $javaExecutable or use putenv() to setup the
 * Java environment.
 * 
 * <code>
 * Minify_YUICompressor::$jarFile = '/path/to/yuicompressor-2.3.5.jar';
 * Minify_YUICompressor::$tempDir = '/tmp';
 * $code = Minify_YUICompressor::minifyJs(
 *   $code
 *   ,array('nomunge' => true, 'line-break' => 1000)
 * );
 * </code>
 * 
 * @todo unit tests, $options docs
 * 
 * @package Minify
 * @author Stephen Clay <steve@mrclay.org>
 */
class Minify_YUICompressor {

    /**
     * Filepath of the YUI Compressor jar file. This must be set before
     * calling minifyJs() or minifyCss().
     *
     * @var string
     */
    public static $jarFile = null;

    /**
     * Writable temp directory. This must be set before calling minifyJs()
     * or minifyCss().
     *
     * @var string
     */
    public static $tempDir = null;

    /**
     * Filepath of "java" executable (may be needed if not in shell's PATH)
     *
     * @var string
     */
    public static $javaExecutable = 'java';

    /**
     * Minify a Javascript string
     * 
     * @param string $js
     * 
     * @param array $options (verbose is ignored)
     * 
     * @see http://www.julienlecomte.net/yuicompressor/README
     * 
     * @return string 
     */
    public static function minifyJs($js, $options = array())
    {
        return self::_minify('js', $js, $options);
    }

    /**
     * Minify a CSS string
     * 
     * @param string $css
     * 
     * @param array $options (verbose is ignored)
     * 
     * @see http://www.julienlecomte.net/yuicompressor/README
     * 
     * @return string 
     */
    public static function minifyCss($css, $options = array())
    {
        return self::_minify('css', $css, $options);
    }

    private static function _minify($type, $content, $options)
    {
        self::_prepare();
        if (! ($tmpFile = tempnam(self::$tempDir, 'yuic_'))) {
            throw new Exception('Minify_YUICompressor : could not create temp file.');
        }
        file_put_contents($tmpFile, $content);
        exec(self::_getCmd($options, $type, $tmpFile), $output);
        unlink($tmpFile);
        return implode("\n", $output);
    }

    private static function _getCmd($userOptions, $type, $tmpFile)
    {
        $o = array_merge(
            array(
                'charset' => ''
                ,'line-break' => 5000
                ,'type' => $type
                ,'nomunge' => false
                ,'preserve-semi' => false
                ,'disable-optimizations' => false
            )
            ,$userOptions
        );
        $cmd = self::$javaExecutable . ' -jar ' . escapeshellarg(self::$jarFile)
             . " --type {$type}"
             . (preg_match('/^[a-zA-Z0-9\\-]+$/', $o['charset'])
                ? " --charset {$o['charset']}" 
                : '')
             . (is_numeric($o['line-break']) && $o['line-break'] >= 0
                ? ' --line-break ' . (int)$o['line-break']
                : '');
        if ($type === 'js') {
            foreach (array('nomunge', 'preserve-semi', 'disable-optimizations') as $opt) {
                $cmd .= $o[$opt] 
                    ? " --{$opt}"
                    : '';
            }
        }
        return $cmd . ' ' . escapeshellarg($tmpFile);
    }

    private static function _prepare()
    {
        if (! is_file(self::$jarFile)) {
            throw new Exception('Minify_YUICompressor : $jarFile('.self::$jarFile.') is not a valid file.');
        }
        if (! is_dir(self::$tempDir)) {
            throw new Exception('Minify_YUICompressor : $tempDir('.self::$tempDir.') is not a valid direcotry.');
        }
        if (! is_writable(self::$tempDir)) {
            throw new Exception('Minify_YUICompressor : $tempDir('.self::$tempDir.') is not writable.');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:00:20.757

您是否尝试过**不**使用 --line-break 选项？

当我使用 YUI 压缩器时，我没有指定该选项，并且输出在单行上。

* * *

从您在任何地方提供的源代码来看

```
Minify_YUICompressor::minifyCss('/path/to.css'); 
```

您需要将`line-break`选项设置为`-1`：

```
Minify_YUICompressor::minifyCss('/path/to.css', array('line-break' => -1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:07:20.040

将以下代码放在您的 php 脚本的开头

```
<?php header('Content-Type:application/javascript'); ?> 
```

# php - facebook api 登录问题

> ID：11453293
> 
> 赞同：0
> 
> 时间：2012-07-12T13:49:02.373
> 
> 标签：php, facebook, login, facebook-php-sdk

我试图从 [http://www.facebook.com/ajax/shares/view/?target_fbid=410558838979218&__a=1](http://www.facebook.com/ajax/shares/view/?target_fbid=410558838979218&__a=1)检索数据 如果我通过浏览器打开此链接，我会得到 js 和 html 的混合信息，但如果我采用

```
$url = 'http://www.facebook.com/ajax/shares/view/?target_fbid=410558838979218&__a=1';
$html = file_get_contents($url); 
```

我明白了

> "未登录","errorDescription":"请登录以继续。","payload":{"_ *dialog":{"title":{"* _ html":"未登录"},"body": {"__html":"请登录以继续.......

等等我知道我需要登录，我尝试通过 facebook api 登录：

```
$config = array(
'appId' => '**********',
'secret' => '**********',
);
$facebook = new Facebook($config);
$user_id = $facebook->getUser(); 
```

我开始用户等，一切都很好，但检索共享信息无论如何都会失败我如何“正确”登录来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:26:18.687

您正在使用 SDK 初始化代码，但试图抓取 facebook.com 的 Web 界面 - 这些不是兼容的东西

您还需要通过您的代码自动登录 facebook.com 并处理所有 cookie，如果您想抓取，购买这样做明显违反 Facebook 的 TOS，如果您坚持下去，可能会给您带来法律麻烦

# asp.net - 如何发帖和回复帖子

> ID：11453294
> 
> 赞同：0
> 
> 时间：2012-07-12T13:49:06.607
> 
> 标签：asp.net, c#-4.0, post

我有 asp.net 按钮，我想点击后发布到以下链接 [https://www.cashu.com/cgi-bin/pcashu.cgi](https://www.cashu.com/cgi-bin/pcashu.cgi)

使用如下形式的参数做

```
<form action="https://www.cashu.com/cgi-bin/pcashu.cgi" method="post">
<input type="hidden" name="merchant_id" value="XYZ">
<input type="hidden" name="token" value="66a31cd699d8d9cb454df1f6cec30c2c">
<input type="hidden" name="display_text" value="Baseball Hat">
<input type="hidden" name="currency" value="CSH">
<input type="hidden" name="amount" value="125">
<input type="hidden" name="language" value="en">
<input type="hidden" name="session_id" value="asdasd-234-asdasd">
<input type="hidden" name="txt1" value="item27">
<input type="submit" value="Pay with cashU!">
</form> 
```

我想以编程方式执行此操作并捕获返回响应，并将其写在文本上

任何想法如何做到这一点

# php - 无法读取 App/Views/Pages/used.ctp (CAKEPHP)

> ID：11453300
> 
> 赞同：0
> 
> 时间：2012-07-12T13:49:41.340
> 
> 标签：php, cakephp, cakephp-1.3

再会！

我有一个主页，其中左侧有一个菜单。单击时按钮的 href 将转到 app/views/pages 文件夹下名为 used.ctp 的 .ctp 文件

我已经考虑将 pages_controller.php 和 app_controller.php 放在我的 app/controllers 文件夹中，但什么也没发生。

无法读取 used.ctp 中的标头标签。

在查看 used.ctp 时，我只能看到从 index.ctp 声明的静态标头

首先，出现了一个神秘的错误，看起来像......

错误：在文件下方创建类控制器等等等等user_controller.php

类似的东西。

我通过创建所说的 used_controller.php 来修复它

```
<?php
class UsedController extends AppController {

    var $name = 'Used';
}
?> 
```

但是在刷新 used.ctp 时，它仍然显示为空，仅在 index.ctp 上声明了顶部的静态标题

请帮我。:(

如果您想查看完整的源代码：

下载 -> [http://www.mediafire.com/?h3sc14gogq9ohtc](http://www.mediafire.com/?h3sc14gogq9ohtc)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:12:32.607

users.ctp 文件需要进入 /View/Users 并且您需要在控制器中创建一个方法来链接到该视图。

所以

```
<?php
   class UsedController extends AppController {

      var $name = 'Used';

      public function users() {

    }
} 
```

?>

我建议按照以下教程进行操作；

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)

# php - PHP如何计算分页内容的当前显示

> ID：11453301
> 
> 赞同：0
> 
> 时间：2012-07-12T13:49:53.523
> 
> 标签：php, pagination

这应该很简单，但我现在想不通-我已经搜索过，但找不到合适的帮助-也许这是我对问题的措辞，这是问题-我知道这很简单，但是正如我所拥有的说我现在脑死了！

这就是我要的 `Displaying 1 - 7 of 21 items`

如果总共有 21 个产品，每页 7 个，则需要说明

1 - 7 / 21 在第一页
8 - 14 / 21 在第二页
15 - 21 / 21 在第三页

很确定这是加强的正确方法吗？无论如何，任何帮助将不胜感激！我可以在这上面放一个赏金——虽然很小，但至少它是一些东西！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T13:54:40.337

如果您知道您所在的页面以及每页的条目数，您可以计算它：

```
$limit = 7;
$page = 2;
$total = 21;

$upper = min( $total, $page * $limit);
$lower = ($page - 1) * $limit + 1;
printf( "Displaying %d - %d of %d on Page %d\n", $lower, $upper, $total, $page); 
```

现在，只需遍历第 1 - 3 页即可[**查看输出**^(Codepad)](http://viper-7.com/kDsmjK)：

```
Displaying 1 - 7 of 21 on Page 1
Displaying 8 - 14 of 21 on Page 2
Displaying 15 - 21 of 21 on Page 3 
```

**编辑：**使用 OP 的变量：

```
$upper = min( $products_total, $pager_current * $limit);
$lower = ($pager_current - 1) * $limit + 1;
printf( "Displaying %d - %d of %d on Page %d\n", $lower, $upper, $products_total, $pager_current); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:54:12.037

```
$page = 0;
$max = 7;
$total = 21;

$totalPages = ceil($total / $max); // 3 pages
$currentRange = ($max*$page)+1 . " - " . ($max*($page+1));

echo $currentRange . " of " . $total; 
```

我更喜欢从`$page`0 开始，然后从那里上升。这是非常简单的数学。

`$currentRange`高达 2的值将是

```
1 - 7 of 21
8 - 14 of 21
15 - 21 of 21 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:58:26.547

您知道您拥有的产品总数：

```
$total=21; 
```

你知道你所在的页面：

```
$cur_page=2; 
```

您知道一页上的项目：

```
$itemcount=7; 
```

打印：

`echo 'Displaying '.($itemcount*($cur_page-1)+1).' - '.$itemcount*$cur_page.' of '.$total.' items.'`;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:12:18.393

认为这对我有用-似乎显示了我想要的结果，无论限制设置如何

`$display_end = ($pager_current * $limit);
$display_start = ($display_end - $limit) + 1;`

 `if($pager_current == $pager_max){

$display_end = $products_total; //not great but works!

}` 

`$displaying = 'Displaying '.$display_start.' - '.$display_end.' of '.$products_total.' items';`

给我以下输出

显示 1 - 5 件，共 7 件
显示 6 - 7 件，共 7 件

当我总共有 7 个产品并以每页 5 个分页时或

显示 1 - 2 的 7 项
显示 3 - 4 的 7 项
显示 5 - 6 的 7 项
显示 7 - 7 的 7 项

当产品总数为 7 并且每页分页 2 时

# installation - ClickOnce 应用程序的多个实例

> ID：11453302
> 
> 赞同：1
> 
> 时间：2012-07-12T13:49:53.473
> 
> 标签：installation, clickonce

我的问题的一些背景......

我们目前正在使用 ClickOnce 部署我们的解决方案的一部分，该解决方案一直在工作，直到我们遇到一种情况，我们现在需要在同一台 PC 上安装我们的应用程序的多个实例。我们能够在内部实现这一点并使其完美运行，因为我们知道我们有哪些实例，因此我们的构建过程将在发布安装程序之前更新 AssemblyName 以包含实例名称，这意味着我们能够在内部的 PC 上拥有多个实例（即测试、现场和演示等）。

我们的外部部署过程略有不同，我们采用在构建中创建的 ClickOnce 安装程序之一（以及构成我们应用程序的所有其他组件），并且随着 ClickOnce 安装程序部署在服务器上，我们更新 app.config 以及清单文件并辞职，因此它们现在具有客户特定的详细信息。如果客户选择安装我们产品的多个实例，则 ClickOnce 现在将在桌面 PC 上安装第二个实例时失败，因为所有实例共享相同的组合名称。

所以最后的问题是，有没有人知道在创建 clickonce 包以允许安装多个实例之后更新清单等的方法？我们可以沿着构建许多 clickOnce 安装程序的路线走下去，但我认为这对我们来说真的不起作用，是否有替代 ClickOnce 的方法可以为非管理员用户提供类似的升级体验？

希望有人能够分享他们的经验并帮助我解决这个问题。

在此先感谢道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:03:40.193

我不知道另一种技术可以实现如此简单的自动更新过程。所以坚持使用 ClickOnce ......[我认为这个链接可能很有用](http://robindotnet.wordpress.com/2009/04/22/clickonce-installing-multiple-versions-concurrently/)。它解释了您需要做什么才能将相同的应用程序安装两次。本质上更改程序集名称和产品名称应该可以做到。

希望有帮助。格雷格

# javascript - Javascript 弹出窗口文档永远不会“准备好”

> ID：11453303
> 
> 赞同：3
> 
> 时间：2012-07-12T13:49:54.680
> 
> 标签：javascript, popup, readystate

我正在使用 Javascript 打开一个空白窗口，用最低限度填充它并注入一个脚本标记以包含 JQuery，但窗口属性 readyState 永远不会超过加载，因此 JQuery 永远不会触发。这是[jsFiddle 上的演示](http://jsfiddle.net/yZZx3/1/ "演示")。我不明白为什么弹出窗口没有更新它的 readyState。

```
var popup = window.open("", "popup", "height=500,width=700");
var doc = popup.document;
doc.write("<!doctype html><html><head></head><body></body></html>");
var script = doc.createElement("script");
script.type = "text/javascript";
script.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
script.onload = function() {
  console.log(doc.readyState);
  popup.$(document).ready(function() {
    console.log(doc.readyState);
  });
}
doc.getElementsByTagName("head")[0].appendChild(script); 
```

这是没有 JQuery 的类似代码——readyState 窗口属性的相同问题永远不会超出“加载”。

```
var popup = window.open("", "popup", "height=500,width=700");
var doc = popup.document;
doc.write("<!doctype html><html><head></head><body></body></html>");
console.log(doc.readyState); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T14:31:10.350

如果您从不设置 URL，则就绪状态不会改变。它将被“初始化”或“加载” - 取决于您的浏览器。您可以通过在弹出窗口的控制台窗口中设置 document.location 来查看此更新，如下所示：

```
console.log(document.readyState);
document.location = "http://yourdomain.com";
console.log(document.readyState); 
```

如果您将位置发送到域以外的域，则您将没有安全性来修改窗口对象。解决此问题的一种方法是使用 iframe 并设置源 - 如下所示：

```
var nw = window.open('', "MyWindowID", "fullscreen=no, toolbar=no, menubar=no,status=no,location=no");
var html = '<iframe id="document-{aid}" style="width:100%;height:100%;" src="http://www.google.com"></iframe>';
nw.document.write(html);
nw.focus(); 
```

请参阅：[https ://stackoverflow.com/a/1443839/1220302](https://stackoverflow.com/a/1443839/1220302)

关于这一点的注意事项是尝试将您的弹出窗口包装在 $(popup) 中并挂钩 ready 事件。

这应该适合你：

```
var popup = window.open("", "popup", "height=500,width=700");
var doc = popup.document;
doc.write("<!doctype html><html><head></head><body></body></html>");
var script = doc.createElement("script");
script.type = "text/javascript";
script.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";    
$(popup).ready(function(){
    console.log('loaded');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:00:18.323

因为没有指向 的 url `popup`，所以它立即准备好了。命令完成后使用 jQuery 对其“准备就绪”的任何分配`window.open`都变得无关紧要。它永远不会开火，因为已经太晚了。

# jquery - jquery更改href并打开新窗口

> ID：11453304
> 
> 赞同：0
> 
> 时间：2012-07-12T13:49:56.227
> 
> 标签：jquery, ajax

我需要更改锚中的href，然后在新窗口中打开链接，但是这段代码不起作用。有任何想法吗？显然ajax调用返回的url是正确的。

```
<a href="http://www.google.com" target="_blank">alink</a> 
```

```
$(document).ready(function(){

    $('a').on('click', function(e){
         e.preventDefault(); 
         _this = $(this);
         $.ajax({ type:"GET", url:A_URL, dataType:"json",
               success: function(data){                                     
                        var u = data.results[0].trackViewUrl;
                        _this.attr('href', u);                              
                        window.open(u, '_blank');               
               }            
        })
    })

}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:59:39.340

如果您只想更改 url 并在新窗口中打开：

```
$(document).ready(function () {
    $('a').on('click', function (e) {
        $(this).attr("href", "new Url");
        $(this).attr("target", "_blank");
    })
}) 
```

但是如果你想通过 ajax 获取新的 url：

```
$(document).ready(function () {
    $('a').on('click', function (e) {
        var $this = $(this);
        $.ajax({
            url: 'GetUrl',
            async: false,
            success: function (url) {
                $this.attr("href", url);
                $this.attr("target", "_blank");
            },
            error: function () {
                e.preventDefault();
            }
        });
    })

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:55:02.590

试试这个

```
$('a').on('click', function(e){
     e.preventDefault(); 
     var me = $(this);

     $.get(
         A_URL,
         {},
         function(data) {
              var u = data.results[0].trackViewUrl;
              me.attr('href', u);                              
              window.open(u, '_blank');      
         },
         'JSON'

     );
}) 
```

# objective-c - 核心图：共享相同 x 轴的两个图

> ID：11453305
> 
> 赞同：6
> 
> 时间：2012-07-12T13:49:56.937
> 
> 标签：objective-c, ios, ios5, core-plot

我正在尝试设置两个类似于 Core Plot 提供的 AAPlot 示例的图表。它基本上由一个几乎正确显示的股票图表和第二个图表（成交量图表）组成，该图表应直接放在股票图表下方。两个图表应共享相同的 x 轴。

不幸的是，我的应用程序中没有绘制体积图表的数据。

即使我将示例源代码与我的源代码进行了激烈的比较，我也找不到错误的根源。

你能指出我正确的方向吗？

这是我的代码：

```
- (void)configureChart
{
    self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];
    self.hostView.hostedGraph = self.graph;
    self.graph.paddingLeft = 0.0f;
    self.graph.paddingTop = 0.0f;
    self.graph.paddingRight = 0.0f;
    self.graph.paddingBottom = 0.0f;
    self.graph.axisSet = nil;

    // 2 - Set up text style
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.color = [CPTColor grayColor];
    textStyle.fontName = @"Helvetica-Bold";
    textStyle.fontSize = 16.0f;

    // 3 - Configure title
    NSString *title = self.issue.company.companyName;
    _graph.title = title;    
    _graph.titleTextStyle = textStyle;
    _graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;    
    _graph.titleDisplacement = CGPointMake(0.0f, -12.0f);      

    // 4 - Set theme
    [self.graph applyTheme:[CPTTheme themeNamed:kCPTStocksTheme]];

    _graph.plotAreaFrame.cornerRadius  = 0.0f;
    CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
    borderLineStyle.lineColor           = [CPTColor whiteColor];
    borderLineStyle.lineWidth           = 2.0f;
    _graph.plotAreaFrame.borderLineStyle = borderLineStyle;

    // Axes
    CPTXYAxisSet *xyAxisSet        = (id)self.graph.axisSet;
    CPTXYAxis *xAxis               = xyAxisSet.xAxis;
    CPTMutableLineStyle *lineStyle = [xAxis.axisLineStyle mutableCopy];
    lineStyle.lineCap   = kCGLineCapButt;
    xAxis.axisLineStyle = lineStyle;
    xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;

    CPTXYAxis *yAxis = xyAxisSet.yAxis;
    yAxis.axisLineStyle = nil;

    // OHLC plot
    CPTMutableLineStyle *whiteLineStyle = [CPTMutableLineStyle lineStyle];
    whiteLineStyle.lineColor = [CPTColor whiteColor];
    whiteLineStyle.lineWidth = 1.0f;
    CPTTradingRangePlot *ohlcPlot = [[CPTTradingRangePlot alloc] initWithFrame:self.graph.bounds];
    ohlcPlot.identifier = @"OHLC";
    ohlcPlot.lineStyle  = whiteLineStyle;
    CPTMutableTextStyle *whiteTextStyle = [CPTMutableTextStyle textStyle];
    whiteTextStyle.color    = [CPTColor whiteColor];
    whiteTextStyle.fontSize = 8.0;
    ohlcPlot.labelTextStyle = whiteTextStyle;
    ohlcPlot.labelOffset    = 5.0;
    ohlcPlot.stickLength    = 2.0f;
    ohlcPlot.dataSource     = self;
    ohlcPlot.plotStyle      = CPTTradingRangePlotStyleOHLC;
    [self.graph addPlot:ohlcPlot];

    // Add volume plot space
    CPTXYPlotSpace *volumePlotSpace = [[CPTXYPlotSpace alloc] init];
    volumePlotSpace.identifier = @"Volume";
    [_graph addPlotSpace:volumePlotSpace];

    CPTBarPlot *volumePlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor whiteColor] horizontalBars:NO];
    volumePlot.dataSource = self;

    lineStyle            = [volumePlot.lineStyle mutableCopy];
    lineStyle.lineColor  = [CPTColor whiteColor];
    volumePlot.lineStyle = lineStyle;

    volumePlot.fill       = nil;
    volumePlot.barWidth   = CPTDecimalFromFloat(1.0f);
    volumePlot.identifier = @"Volume Plot";
    [_graph addPlot:volumePlot toPlotSpace:volumePlotSpace];

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) self.graph.defaultPlotSpace;
    [plotSpace scaleToFitPlots:[self.graph allPlots]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:38:22.533

当您只执行 [_graph addPlot:volumePlot] 而不是 [_graph addPlot toPlotSpace:volumePlotSpace] 时会发生什么？

我在想你可能已经使用所有这些不同的情节空间添加了一些额外的限制，这使得你的两个情节都不会出现。

老实说，我并不完全确定，我也刚刚在学习 Core Plot，我提出的大多数解决方案都是大量玩耍和谷歌搜索的结果。如果我想到别的东西，我会编辑这篇文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:28:33.950

您永远不会为体积绘图空间设置绘图空间范围。它仍然具有 [0, 1] 的默认 x 和 y 范围。

# c# - SetForegroundWindow() 不适用于非主窗口

> ID：11453311
> 
> 赞同：0
> 
> 时间：2012-07-12T13:50:05.850
> 
> 标签：c#, windows

假设我有 2 个 MS WORD 窗口，第一个在屏幕左侧，另一个在右侧。所以它们都是可见的。其中一个是主进程，另一个是主进程的实例。当我打开另一个不相关的窗口并将其最大化时，MS WORD 窗口都在后台。在那个位置，当我在 for 循环中对两个 MS WORD 窗口使用 SetForegroundWindow() 函数时（通过给函数两个窗口的句柄），它只会将 MS WORD 窗口的主窗口放在前面，但是我希望他们两个都到前线。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:38:45.207

解决了！首先，您需要调用 SetForegroundWindow() 函数，然后使用以下参数调用 SetWindowPos() 函数：

```
SetForegroundWindow(handle);
SetWindowPos(handle, (IntPtr)HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW); 
```

谢谢大家！

# html - 为什么 IE9 不能通过 IIS 播放视频，但在查看 HTML 文件时可以？

> ID：11453314
> 
> 赞同：1
> 
> 时间：2012-07-12T13:50:14.893
> 
> 标签：html, internet-explorer, video

我在 .html 文件中有以下内容：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Testing</title>
</head>
<body>
    <video id="0" controls width="502" height="479">
        <source src="vid1.webm" type='video/webm'>
        <source src="vid1.mp4" type='video/mp4'>
        <p>Video is not visible, most likely your browser does not support HTML5 video</p>
    </video>
</body>
</html> 
```

当我在 IE9 中打开 html 文件时，我看到了视频并且可以播放，没问题。

现在，我在本地 IIS 7.5 上托管的站点中运行的网页中有相同的 html。当我查看网页时根本没有显示视频，页面是空白的。我在 web.config 文件中添加了以下内容：

```
<system.webServer>
    <staticContent>     
      <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
      <mimeMap fileExtension=".webm" mimeType="video/webm" />
      <mimeMap fileExtension=".ogv" mimeType="video/ogg" />
    </staticContent> 
```

当我在 IIS 中查看网站设置中的 MIME 类型时，以上所有内容都列出了，因此将它们提取出来没有问题。

我现在被卡住了；不明白为什么 IE9 不能播放视频。FireFox 和 Chrome 都可以毫不费力地显示视频，那么为什么（再一次）IE 必须是奇怪的呢？:)

有人可以帮帮我吗？

编辑：针对 Bart 的评论，这是我请求页面时的分析器输出：

```
http://localhost/Rest/test.html GET 304 text/html  161 B    < 1
/Rest/vid1.mp4  GET 200 video/mp4   32.24 KB    125 ms
/Rest/vid1.mp4  GET 206 video/mp4   80.91 KB    15 ms
/Rest/vid1.mp4  GET 200 video/mp4   144.20 KB   1.04 s 
```

编辑：

我检查了 MP4 的格式。基本上，我使用 Freemake 将 AVI 文件转换为 MP4，使用默认预设“Same a source : H.264, AAC original size”。据我所知，MP4 文件是 H.264 格式。

正如我所提到的，IE9 在打开 HTML 文件时会显示该文件，但在 IIS 下运行时，它不喜欢它。

编辑我按照这篇文章中给出的说明进行操作：http: [//blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to- debug.aspx](http://blogs.msdn.com/b/thebeebs/archive/2011/07/20/html5-video-not-working-in-ie9-some-tips-to-debug.aspx)从视频元素中转储出任何错误代码。这是我得到的：

> MEDIA_ERR_DECODE 3

人们倾向于将此反映为

> 在将媒体资源确定为可用后，解码媒体资源时发生某些描述错误。

有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T20:10:21.613

您可能没有在 IIS 中设置 mime 类型。在 IIS 提供视频、pdf 等内容之前，您必须手动设置文件类型。这是安全最佳实践。

# python - 鸡蛋和零件之间的构造有什么区别？

> ID：11453316
> 
> 赞同：3
> 
> 时间：2012-07-12T13:50:17.373
> 
> 标签：python, buildout, egg

使用 buildout 时有 2 个目录：eggs 和 parts。buildout.cfg 中还有鸡蛋和零件的声明。构建系统的这些元素的目的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T13:53:36.677

很简单：

*   零件是您扩建的基石。根据为它们声明的配方和在该部分中配置的设置，不同的部分运行不同的任务。

    `parts`子目录保存每个部分的簿记信息。这取决于这里存储的配方。例如，CMMI 配方可能会在此处安装 config/make/make 安装周期的结果。

*   Eggs 是 python 包发行版。Buildout 使用来自 egg 的代码来提供配方实现，并且大多数 buildout 为要在正在构建的应用程序和脚本中使用的部件指定鸡蛋。

    建造一个不建造任何使用鸡蛋本身的建筑是完全合法的。但是对于运行部件的扩展，在引擎盖下将涉及到鸡蛋。

    该`eggs`子目录通常包含用于配方和任何需要鸡蛋运行的鸡蛋。

# windows - WTSEnumerateProcesses 和终端服务服务

> ID：11453322
> 
> 赞同：1
> 
> 时间：2012-07-12T13:50:40.190
> 
> 标签：windows, winapi

我的 Windows 服务在调用时偶尔会报告以下错误[`WTSEnumerateProcesses()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383831%28v=vs.85%29.aspx)：

> 绑定句柄无效。

我怀疑这是由于终端服务服务不可用造成的，即使我已将终端服务服务注册为我的服务的依赖服务。

我相信即使终端服务服务正在运行，它还没有完成初始化（或正在关闭）并且无法为任何请求提供服务，从而导致错误。

我在参考文档中注意到以下内容[`WTSRegisterSessionNotification()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx)：

> Global\TermSrvReadyEvent 全局事件设置后，所有依赖的服务都已启动，可以成功调用该函数。

这没有出现在 的文档中`WTSEnumerateProcesses()`，但它是否同样适用？意味着尝试`OpenEvent()`on`Global\\TermSrvReadyEvent`将表明终端服务服务实际上是可用的？

* * *

平台：Windows XP、Windows Vista 和 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-17T07:42:54.333

你肯定想要`OpenEvent(SYNCHRONIZE, false, L"Global\\TermSrvReadyEvent")`并等待它。

所有`WTS*`函数都在 C API 的底层通过 RPC 调用终端服务服务（现在称为远程桌面服务服务）（[参见运行时接口协议](https://msdn.microsoft.com/en-us/library/cc248570.aspx)）。

与 c00000fd 所经历的相反，我从未在 Windows 7 及更高版本上遇到标准用户帐户和事件对象的问题。

# objective-c - 使用 ARC 按需销毁对象

> ID：11453323
> 
> 赞同：4
> 
> 时间：2012-07-12T13:50:41.217
> 
> 标签：objective-c, ios, automatic-ref-counting

用 ARC 销毁对象的正确方法是什么？

我想`UIViewController`在运行时的特定时间销毁一些 s 以及一个持有 AUGraph 的对象。

目前，当我的父 viewcontroller 创建 viewcontroller 对象并将其视图分配给它`view`时，这些对象显然与父对象保持联系。我想在不需要时销毁这些子视图控制器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T13:55:43.970

只需将引用这些对象的变量设置为`nil`. 然后编译器将在那个时刻释放对象，如果不存在对它们的其他强引用，它们将被销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T13:56:21.557

`[release]`当您将`__strong`引用对象的变量设置为 时，ARC 将插入调用`nil`。

```
@interface MyViewController : UIViewController {
    UIViewController *childViewController;
}
...

@end

-(void)destroyChild {
    childViewController = nil;
} 
```

当你有一个 C 风格的对象数组时，也会做同样的事情：设置数组的一个元素来`nil`释放那里的项目，除非它是`__weak`/ `__unsafe_unretained`。如果将子视图控制器保留在 中`NSMutableArray`，则从数组中删除对象会减少其引用计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:56:48.900

通常，您可以通过将对象设置为 nil 来实现此目的。幕后发生的事情是对象被 ARC 释放，然后设置为 nil。这应该完成你想要的。

# visual-studio-2010 - MapPoint 加载项适用于某些机器，但不适用于其他一些机器

> ID：11453324
> 
> 赞同：2
> 
> 时间：2012-07-12T13:50:46.097
> 
> 标签：visual-studio-2010, add-in, com-interop, office-interop, mappoint

我使用 Visual Studio 2010 为 Microsoft MapPoint 开发了一个**最小的**（没有 MapPoint 对象库，因为它是一个测试）**插件**，用 C# 编写。

通过安装项目，我可以在一些运行 MapPoint 2010 或 2011 的 PC 上安装我的加载项，但在其他一些 PC 上安装无效。

那就是它似乎成功完成了，但是当我打开 MapPoint 时，插件没有运行；如果我打开工具 > COM 加载项...我发现我的加载项未选中，检查它没有效果并手动添加告诉我

> “C:\Path\to\myAddin.dll”不是有效的 Office 加载项。

做了一些测试，我发现问题**与某个 MapPoint 版本、Windows 版本或平台版本无关**。

哪些可能是导致加载项在某些机器上工作而不在其他机器上工作的差异？谢谢！

* * *

**有关我如何创建加载项的**详细信息：****

 ***   安装 MapPoint 2011 欧洲
*   启动 Visual Studio 2010
*   文件>新建>项目...>共享加载项>为项目命名>确定>只检查Microsoft MapPoint>继续到最后
*   解决方案资源管理器 > 打开 Connect.cs 并编写代码
*   在解决方案中构建所有项目（关闭 MapPoint）
*   使用 setup 项目生成的 .msi 在目标机器上安装插件（已经安装了 MapPoint）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:32:58.307

是的，我写了后期绑定文章并同意这不是使用 MapPoint 的最佳方式，尽管有时您必须使用它。

创建加载项时不应访问 MapPointControl。您只访问对象模型。除非有任何 API 差异，如果您引用 2006 或更高版本，它应该适用于所有后续版本。IE。您的 2010 内置插件应该可以与 2011 一起使用。

not a valid office add-in 错误是迟钝的，但实际上这是由 MapPoint 和您的 .NET 加载项之间的垫片引起的。垫片使您的 .NET DLL 看起来像一个 COM 加载项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:07:49.843

After hours of tests I found it! Thanks to an investigation inside [MPSuperShape](http://www.mpsupershape.com) installation folder :).

**Extensibility.dll** is needed, in the same folder where my add-in is installed. When creating a shared add-in project in VS, Extensibility is automatically added to References, but not to the list of files that the installer will put in program folder.

Hence you have to: **right click on the auto-generated setup project > Add > Assembly... > .NET > Extensibility > OK**. Build, install and you've got it!

I add that, if you use MapPoint Object Library (as you probably do if it's not a test add-in like mine) you need to add Interop.MapPoint.dll in a similar way: right click on the auto-generated setup project > Add > Assembly... > Browse > pick such DLL from your bin\Debug or obj\Debug folder in your main project.

**Why was Extensibility.dll not needed on some machines?**

Because if you have Microsoft Office 2007 or later (as I saw) it is already present (in `C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\PublicAssemblies`) and in some way it is loaded when you run MapPoint.**

# c++ - 非 const 函数 _fastcall TStrings::GetCount() 为 const 对象调用

> ID：11453330
> 
> 赞同：1
> 
> 时间：2012-07-12T13:50:58.313
> 
> 标签：c++, constants, c++builder

我有一个旧的 c++ 代码，写入并编译到 c++ builder 5 中。但是现在，我需要将此代码更新/迁移到 c++ builder 2009。所以，我有一些问题：

```
int __fastcall TAllConversor::ListToStr(
    const TStringList* pList,
    AnsiString& strValue,
    const long lngLimiteInferior,
    const long lngLimiteSuperior) const
{
  long lngIndice;
  AnsiString strAux;

  try
  {
    if (lngLimiteSuperior == 0)
      lngIndice = pList->Count;
    else
      lngIndice = lngLimiteSuperior + lngLimiteInferior;

    for (int i = lngLimiteInferior; i < lngIndice; i++)
    {
      strAux += pList->Strings[i] + ";";
    }

    strValue = strAux;
    return 1;
  }
  catch(...)
  {
    return 0;
  }
} 
```

在“lngIndice = pList->Count;”行 我收到此错误：“E2522 非 const 函数 _fastcall TStrings::GetCount() 为 const 对象调用”。

那么，我该如何解决（解决）它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:55:46.723

如果您提供了 TStringList 的确切定义会有所帮助，但我假设它是类型名 TString 的模板化数组。

解决方法可能是抛弃 const，如下所示：

```
lngIndice = (const_cast<TStringList*>(pList))->Count; 
```

当然，这就是它的本质 - 一种解决方法，您可能希望考虑在 TString 本身中提供一个 const-correct 访问函数

# xamdatagrid - 如何根据 Infragistics xamdatagrid 中更改的数据启用/禁用命令？

> ID：11453342
> 
> 赞同：0
> 
> 时间：2012-07-12T13:51:23.617
> 
> 标签：xamdatagrid

我在我的 WPF4 应用程序中使用 MVVM。

在我的应用程序中，ViewModel 有一个 ObservableCollection ProductsList 属性，一个 ICommand Save 命令属性。Product 类有两个属性：ProductName 和 Price。

在 UI 中，窗口的 DataContext 绑定到 ViewModel，xamDataGrid 的 DataSource 绑定到 ProductsList 属性，一个按钮绑定到 Save 属性。

用户将对视图中的价格列进行更改。

我尝试做的是当应用程序第一次启动时，SAVE 按钮被禁用，因为没有什么新东西要保存。只要用户对任何记录进行更改，例如更改产品的价格，就会启用“保存”按钮。

我的问题是：xamDataGrid 是否有一个属性表明投标数据已更改（因此数据网格是脏的）？如果有这样的属性，我想将它绑定到 ViewModel 的一个属性，例如 bool DataChanged，然后我会使用这个 DataChanged 属性来设置“保存”命令的 CanExcuteMethod，以启用 SAVE 按钮。

或者，有没有其他方法可以完成这个功能？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T13:55:11.953

XamDataGrid 不为此公开属性，因为 UI 控件不应跟踪此属性，因为它不知道数据存储或数据是否从自身以外的其他源更改。

最好的方法是在 ViewModel 中跟踪这一点，因为如果您依赖 View 中的控件，那么 ViewModel 对 View 有依赖关系，这可能会阻止您使用具有相同 VeiwModel 的不同 View。

为此，请在 ViewModel 中创建属性，就像要将网格绑定到它并在 ViewModel 中的数据更改时设置它的值一样。

# groovy - 无法访问 groovy 执行存储过程中的参数

> ID：11453344
> 
> 赞同：2
> 
> 时间：2012-07-12T13:51:28.840
> 
> 标签：groovy

```
sql.call '{call abcsd_chk(?, ?, ?, ? ,?)}', ['abc1212', '123123','234234', Sql.VARCHAR, Sql.VARCHAR], { result -> println result } 
```

访问参数时出错，

> its.HomeController$_closure83_closure112.doCall() 方法的签名不适用于参数类型：(java.lang.String, java.lang.String)
> 
> 可能的解决方案：doCall(java.lang.Object), call(), call([Ljava.lang.Object;), call(java.lang.Object)

无法得到错误，

执行过程后如何迭代输出参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:57:12.040

你不是在那里定义了两个输出参数吗？

闭包不应该将它们都作为参数吗？

```
def stmt = '{call abcsd_chk(?, ?, ?, ? ,?)}' 
def params = ['abc1212', '123123','234234', Sql.VARCHAR, Sql.VARCHAR]
sql.call stmt, params, { result1, result2 ->
  println result1
  println result2
} 
```

# javascript - Lotus Notes Web 表单 - IE 中的文本区域问题

> ID：11453345
> 
> 赞同：0
> 
> 时间：2012-07-12T13:51:28.950
> 
> 标签：javascript, internet-explorer, textarea, lotus-notes

我有一个用户通过网络访问的 Lotus Notes 表单，在这个表单上是一个带有文本区域的区域，供用户输入详细信息。提交表单后，该值将作为字符串存储在注释文本字段中。我已将回车替换为，`<br/>`这样当通过浏览器查看表单时，文本会以正确的格式格式化。当通过浏览器编辑文档时，我将其替换为`<br>`/r/n，以便 textareas 具有正确的布局。问题是在 IE 的第一行 textareas 中显示第一行的文本，而 textarea 中的其他文本行被隐藏，如果您使用 enter 编辑文本或添加字符，则显示隐藏的文本. 在 Chrome 和 firefox 中，文本正确显示

我有一些 javascript 将表值写入 textareas

```
//creates columns with fields and buttons
    for(var c=1; c < colCount; c++) {
    switch(c){
    case 1:
    el = document.getElementById("step" + f + "-1");
    if (readMode) {
        el.innerHTML=storeSteps.value;
    } else {
    var t=storeSteps.value.replace(/<br\s?\/?>/g,"\n");
    el.value= t;
    } 
```

该问题仅发生在表格的第一行，表格的其余部分创建文本区域并添加没有问题的内容。与在此表单上创建 textareas 的方式的唯一区别是第一行是表单上的计算字段，而表单的其余部分使用 javascript 添加新的字段行

```
 case 2:
            cell = row.insertCell(i);
            cell.className = "potential-col";
            el = document.createElement(elTagName);
            if (!readMode) {
                el.name = "potential" + tableCount + "-" + rowCount;
            }
            el.id =  "potential" + tableCount + "-" + rowCount;
            el.setAttribute("cols","25");
                el.setAttribute("rows","4");
            cell.appendChild(el);
            break; 
```

其中表单上的计算字段是使用以下代码创建的

```
 TableCount := "1";

@If(
    @IsDocBeingEdited;
    "<textarea rows=\"4\" cols=\"25\" name=\"step" +TableCount +  "-1\" id=\"step" +TableCount + "-1\" value=\"\"  onfocus=\"displayNextRow(" +TableCount + ")\" /></textarea>";
    "<span id=\"step" +TableCount + "-1\">&nbsp;</span>"
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:32:36.453

答案与 textarea 的样式有关，它有一个宽度为 100% 的 css 文件。设置边框样式并将宽度更改为 px 值，瞧问题已解决

# python - 使用张量表示几个 RDF 三元组。如何使用 Python 编程这个建模过程？

> ID：11453352
> 
> 赞同：0
> 
> 时间：2012-07-12T13:52:05.583
> 
> 标签：python, string, rdf, triples

关于使用张量表示几个 RDF 三元组的问题。

设想：

[RDF-triple](http://www.w3.org/TR/rdf-primer/)用于表达关于资源、格式（主语、谓语、宾语）的简单陈述。

假设我有两个谓词，一个是play_for，另一个是race_for，每个谓词包含n个三元组，如下：

第一个谓词：play_for；n个三人组：(Ray Allen, play_for, Boston Celtics), (Kobe Bryant, play_for, Lakers), ... 简而言之，(A_i, play for, T_i) for i =1 to n。

第二个谓词：race_for；n 三元组：（波士顿凯尔特人队，race_for，NBA 总冠军），（湖人队，race_for，NBA 总冠军），...简而言之，（T_i，race_for，NBA）对于 i=1 到 n。

张量表示是对这 2n 个三元组建模的一种方法。我正在研究[Maximilian Nickel 的论文](http://www.cip.ifi.lmu.de/~nickel/data/paper-icml2011.pdf)以使用张量分解来查找数据集的潜在语义结构。第一步是使用张量表示数据集。

张量条目 X_ijk = 1 表示存在关系（第 i 个实体，第 k 个谓词，第 j 个实体）。否则，对于不存在和未知的关系，条目设置为零。例如，这 2n 个三元组可以用张量建模为：

```
 One slice:  (A_i, play for, T_i)

       A1, A2,...,An, T1, T2,...,Tn, NBA
 A1    0    0      0   1   0      0    0
 A2    0    0      0   0   1      0    0
 :
 An    0    0      0   0   0      1    0
 T1    0    0      0   0   0      0    0
 T2    0    0      0   0   0      0    0
 :
 Tn    0    0      0   0   0      0    0
 NBA   0    0      0   0   0      0    0

 The other slice: (T_i, race for, NBA)

      A1,  A2,...,An, T1, T2,...,Tn, NBA
 A1    0    0      0   0   0      0    0
 A2    0    0      0   0   0      0    0
 :
 An    0    0      0   0   0      0    0
 T1    0    0      0   0   0      0    1
 T2    0    0      0   0   0      0    1
 :
 Tn    0    0      0   0   0      0    1
 NBA   0    0      0   0   0      0    0 
```

假设 RDF 三元组存储在“test.txt”中。我的问题是如何使用 Python 对这个建模过程进行编程。

这是我的想法：

最困难的事情是如何获得与张量中非零位置对应的RDF-triple的坐标。首先，这是一个包含所有实体的列表：

```
T = ['A1',...,'An','T1',...'Tn','NBA'] 
```

对于数据集中的每个 RDF-triple (Subject_i, Predicate_k, Object_j)，都有一个坐标 (i,j,k) 描述 X_ijk = 1 在张量中的位置。例如，现有的 RDF-triple (A_i, play for, T_i) 的坐标是 (5, 1, 13)，这意味着在第一个切片矩阵中 X(5,13) = 1。但是，我不知道如何获得这个坐标。我应该使用字典来存储三元组吗？

我对 Python 不是很熟悉，我已经尝试过解决方案，但我不知道如何解决它。任何帮助将不胜感激。

**编辑：**为了简洁和可读性，我删除了 RDF 的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:20:59.970

pythons rdf 的最佳库工具是[rdflib](http://rdflib.readthedocs.org/en/latest/index.html#)一个 rdflib 图有一个方法

```
lst = myGraph.subject_objects(MyNS.race_for)
# which is just syntactic sugar for:
lst = myGraph.triples((None,MyNS.race_for,None)) 
```

您还可以在其他语言（如 Java-jena 等）的其他库中找到第二种语法

在 scipy 中，您应该调用 sparse 并将其用于稀疏二进制数组。

查看 numpy 包，了解从三元组查询返回的“分解”主题和对象的最佳方法。应该很简单。[pandas](http://pandas.pydata.org/)中有用于此的库，但我的猜测是您将拥有大型稀疏矩阵，并且使用[scipy.sparse](http://docs.scipy.org/doc/scipy/reference/sparse.html)模块会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:53:24.367

解决您的问题有很多可能性，但您的问题中存在更大的矛盾心理。更精确地表述它，展示你想要得到的东西以及为什么，并展示你迄今为止尝试过的东西。

最好解释一下为什么需要 n 级张量以及为什么另一种表示不适合您的需求，而不是解释 rdf 是什么。

如果您需要张量操作，则使用张量才有意义。如果是这样，你应该看看[numpy](http://docs.scipy.org/doc/numpy/)如果不是，你应该考虑其他解决方案。如果您想保留创建对象的顺序，字典可能不是您要查找的。也许集合中的 OrderedDict (python >= 2.7) 是您正在寻找的。但也许集合中的 namedtuple 也会这样做。

# ruby-on-rails - 有没有可以将erb转换为haml的工具？

> ID：11453355
> 
> 赞同：-1
> 
> 时间：2012-07-12T13:52:13.323
> 
> 标签：ruby-on-rails, haml, erb

我有一个使用 erb 的旧 Rails 网站，但我想在将来切换到 HAML。

如果有工具可以自动将erb转haml，将大大节省人工。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:55:42.447

这需要我在谷歌上花费 10 秒 :( 给你[https://github.com/dhl/erb2haml](https://github.com/dhl/erb2haml)，下次尝试自己花一些时间

# c# - 搜索目录，不包括某些文件扩展名的列表

> ID：11453356
> 
> 赞同：1
> 
> 时间：2012-07-12T13:52:39.823
> 
> 标签：c#, directory, streamreader, file-type

我正在使用以下代码行来获取输入路径下所有文件的列表：

```
Files = Directory.GetFiles(path, ".", SearchOption.AllDirectories); 
```

但是，我想要做的是，而不是获取所有文件，我想排除任何具有特定文件扩展名的文件。我正在从每行有一个文件扩展名（“ *.pdf”、“* .dll”等）的文本文件中读取要忽略的文件扩展名列表。我正在使用以下代码加载要从文本文件中忽略的文件扩展名列表：

```
 ArrayList line = new ArrayList();
  using (StreamReader reader = new StreamReader(Server.MapPath("~/TextFile.txt")))
  {
      while (!reader.EndOfStream)
      {
          line.Add(reader.ReadLine());
      }
   } 
```

我的问题是，我现在如何限制我的文件搜索不包括与任何这些文件扩展名匹配的任何文件？我不想将这些类型的文件添加到我的`Files`字符串数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:59:44.407

```
Files = Directory.GetFiles(path, ".", SearchOption.AllDirectories)
.Where(fileName => !line.Contains(Path.GetExtension(fileName))
.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:58:36.503

在添加到 arraylist 之前检查扩展名：

```
string file = reader.ReadLine();
if (!stringArrayWithExtensions.Contains(Path.GetExtension(file).ToLower()))
    line.Add(file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:58:41.337

稍微阅读一下您的问题，答案是否定的，我不相信有一种“简单”的方法可以做您想做的事。

您必须先阅读所有文件名，然后根据其扩展名手动过滤（请参阅[System.IO.Path.GetExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx) ]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T14:02:32.447

您无法指定要排除的文件扩展名列表，因此您只需要获取完整列表并自己过滤掉它们。例如，这样的事情应该可以工作：

```
List<string> fileExtensionsToIgnore = new List<String>(File.ReadAllLines("~/TextFile.txt"));
List<string> fileList = new List<string>();
foreach (string filePath in Directory.GetFiles(Path, ".", SearchOption.AllDirectories))
{
    if (!fileExtensionsToIgnore.Contains(Path.GetExtension(filePath).ToLower())
        fileList.Add(filePath);
}
string[] files = fileList.ToArray(); 
```

# java - 如何知道应用程序是否被另一个版本替换（不升级）

> ID：11453357
> 
> 赞同：1
> 
> 时间：2012-07-12T13:52:40.337
> 
> 标签：java, android

假设我安装了 APK，然后我修改了这个 APK 中的一些内容并替换（重新安装）它（不更改版本）？我想得到那个替换事件。这甚至可能吗？

因为我使用 SharedPreferences 只是为了在第一次启动应用程序时做某事，所以现在如果我更换应用程序，这个 SharedPreferences 不会重置（我需要考虑在首次启动时更换应用程序）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:57:33.477

您可以将某种标志甚至首选项本身存储在用户设备上的 data/ 目录中。

然后，当您启动应用程序时，如果存在此数据，您就知道该应用程序之前已经存在，无论版本如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:55:17.900

我认为在不更改版本值的情况下广播任何事件。但是，建议进行更改`android:versionCode`以检测软件包的版本差异。

# php - 组合来自字符串或数组的相似数据

> ID：11453360
> 
> 赞同：0
> 
> 时间：2012-07-12T13:52:57.097
> 
> 标签：php, arrays, loops

基本上，我正在创建一个脚本来在订单的确认页面上加载 Commission Junction 订单的跟踪像素。1 个订单非常简单，但我们的购物车允许一次下多个订单，并且只提供 1 个确认页面。这意味着我必须在加载像素之前将所有订单号和项目组合成 1 个字符串。问题是我必须合并相似的数据，因为项目 SKU 不能重复。

我必须发送的四个值是 Order #、SKU(s)、Amount(s) 和 Quantity。

一个简单的单笔订单确认页面示例：

订单编号：100 SKU：RR-555 / AMT：5.00 / 数量：1 SKU：SS-444 / AMT：10.00 / 数量：2

该脚本会将其输出为：

```
&ITEM1=RR-555&AMT1=5.00&QTY1=1&ITEM2=SS-444&AMT2=10.00&QTY2=2&OID=100 
```

多订单确认页面示例：

订单编号：101 SKU：RR-555 / AMT：5.00 / 数量：1 SKU：SS-444 / AMT：10.00 / 数量：2

订单编号：102 SKU：TT-333 / AMT：5.00 / 数量：1 SKU：RR-555 / AMT：5.00 / 数量：1

脚本的输出当前将显示为：

```
&ITEM1=RR-555&AMT1=5.00&QTY1=1&ITEM2=SS-444&AMT2=10.00&QTY2=2&&ITEM3=TT-3333&AMT3=5.00&QTY3=1&ITEM4=RR-555&AMT4=5.00&QTY4=1&OID=101102 
```

在有多个订单的情况下，OID 只会连接到彼此的末端。问题是 SKU 'RR-555' 在这个字符串中出现了两次，并且只能出现一次。因此，我正在寻找将 SKU 编号组合起来并将它们的数量相加的最佳方法。所以它会这样写：

```
&ITEM1=RR-555&AMT1=5.00&QTY1=3&ITEM2=SS-444&AMT2=10.00&QTY2=2&
&ITEM3=TT-3333&AMT3=5.00&QTY3=1&OID=101102 
```

我真的很困惑如何处理这个问题。是否最好将所有订单中的所有项目数据放入一个数组中，尝试在该级别组合，然后创建字符串？或者我应该创建那个字符串并尝试在那里组合？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:48:22.647

首先将它们组合成一个像数组一样的 PHP 数据结构。在将它们转换为字符串后尝试组合它们是没有意义的，因为您只是重新解析已经解析的数据！

# sqlalchemy - sqlalchemy：从联结表中删除项目

> ID：11453361
> 
> 赞同：0
> 
> 时间：2012-07-12T13:53:09.667
> 
> 标签：sqlalchemy, append, junction-table

我有一个联结表，其中包含对其他两个表的引用。我想要的是从连接表中删除这个引用。在交界处，我们可以为一架飞机从一个 geven 类型中获得一个以上的项目。问题是，当我删除给定项目时，相同类型的所有项目都会被移动。

如何从连接表中只删除一项？

这是我的数据库结构。

```
class Item(object):
    pass

class Plane(object):
    pass

class PlaneItem(object):
    pass    

planeMeta = Table("planes",
    Column("plane_id", Integer, primary_key = True)
)

itemMeta = Table("items",
    Column("item_id", Integer, primary_key = True)
)

planeItem = Table("planes_items",
    Column("planes_items_id", Integer, primary_key = True)
    Column("plane_id", Integer, ForeinKey("planes.plane_id"))
    Column("item_id", Integer, ForeinKey("items.item_id"))
)

mapper(Plane, planeMeta, properties={
    "items": relationship(Item, planeItem, lazy="dynamic")
}) 
```

添加新项目。

```
plane = dbSess.query(Plane).filter(Plane.plane_id == my_plane_id).one()
newItem = dbSess.query(Item).filter(Item.item_id == my_new_item).one()

plane.items.append(newItem) 
```

删除一个项目。

```
itemForRemoving = myPlane.items.filter(item_id==4)

myPlane.items.remove(itemForRemoving) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T03:05:20.600

我最近澄清了这个问题的文档，这个问题最近出现了很多。

为了知道从“辅助”表中删除一行，删除该项目是 SQLAlchemy 所需要的。每次删除它只会删除一行，因此“相同类型的所有项目都被移动”必须是您在此处未说明的其他用法。

请参阅[http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#deleting-rows-from-the-many-to-many-table](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#deleting-rows-from-the-many-to-many-table)。

# java - Android - ListView onItemClick() 未在 4.1 jellybean 中触发

> ID：11453362
> 
> 赞同：6
> 
> 时间：2012-07-12T13:53:11.777
> 
> 标签：java, android, xamarin.android, android-4.2-jelly-bean

我有一个用户刚刚安装了 4.1（果冻豆），并且 ListView onItemClick() 在我的应用程序中停止工作。该事件不会触发（通过断点和控制台检查），并且 UI 似乎没有明显变化。所以我在模拟器中尝试了（即使它非常慢），并且遇到了同样的问题。

有没有人注意到新操作系统的不同之处？

我的项目布局中没有任何可聚焦的内容，并且在旧操作系统上运行良好。

这是包含 ListView 的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@drawable/Background">

  <ImageView
    android:id="@+id/LiveGameLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/SmallLogo"/>

  <ImageButton
    android:id="@+id/BackLiveGameButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:src="@drawable/backbutton_button"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="7dp"
    android:layout_marginTop="7dp"/>

  <TextView
    android:id="@+id/LiveGameEditButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/edit_button"
    android:clickable="true"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="7dp"
    android:layout_marginTop="7dp"/>

  <ImageView
     android:id="@+id/LiveGameLayoutBackground"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignBottom="@+id/LiveGamePlayerLayout"
     android:layout_alignTop="@+id/LiveGamePlayerLayout"
     android:background="@android:color/white"
     android:layout_marginTop="7dp"
     android:layout_marginBottom="7dp"/>

  <ListView
    android:id="@+id/LiveGamesList"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_below="@+id/LiveGamePlayerLayout"
    android:layout_marginTop="-7dp"
    android:layout_above="@+id/LiveGamesAdPlacement"
    android:background="#FFFFFF"
    android:cacheColorHint="#00000000"/>

  <RelativeLayout
      android:id="@+id/LiveGamePlayerLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_below="@+id/LiveGameLogo"
      android:background="@drawable/LiveGameBanner"
      android:layout_marginTop="10dp">

    <ImageView
      android:id="@+id/LiveGamesPlayerImage"
      android:layout_width="50dp"
      android:layout_height="50dp"
      android:layout_centerVertical="true"
      android:layout_marginLeft="5dp"/>

    <ImageView
      android:id="@+id/LiveGamesPlayerBadge"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_centerVertical="true"
      android:layout_marginRight="5dp"/>

    <LinearLayout
      android:id="@+id/LiveGamesLinearLayout1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_toRightOf="@+id/LiveGamesPlayerImage"
      android:orientation="vertical"
      android:layout_marginLeft="20dp">

      <TextView
        android:id="@+id/LiveGamesPlayerScoreText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/TotalScoreSemicolon"
        android:textColor="@color/darkbluetext"
        android:textSize="16dp" />

      <TextView
        android:id="@+id/LiveGamesPlayerCoinText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginTop="5dp"
        android:drawableLeft="@drawable/GameCoin"
        android:drawablePadding="5dp"
        android:text="@string/Semicolon"
        android:textColor="@color/cointext"
        android:textSize="16dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@+id/LiveGamesLinearLayout1"
        android:orientation="vertical" >

      <TextView
          android:id="@+id/LiveGamesPlayerLifetimeTotal"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="0"
          android:textColor="@color/bluescore"
          android:textSize="20dp" android:layout_marginBottom="2dp"/>

      <TextView
          android:id="@+id/LiveGamesPlayerCurrentTotal"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="4dp"
          android:text="0"
          android:textColor="@color/cointext"
          android:textSize="20dp" />
    </LinearLayout>

  </RelativeLayout>

  <RelativeLayout
    android:id="@+id/LiveGamesAdPlacement"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</RelativeLayout> 
```

这是项目的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight">
    <ImageView
      android:id="@+id/GamePlayerImage"
      android:layout_height="50dp"
      android:layout_width="50dp"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true"
      android:layout_margin="7dp" />
    <ImageView
      android:id="@+id/GamePlayerBadge"
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:layout_toRightOf="@+id/GamePlayerImage" 
      android:layout_centerVertical="true"
      android:layout_marginLeft="5dp"
      android:layout_marginRight="10dp"/>
    <TextView
      android:id="@+id/GamePlayerName"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_toRightOf="@+id/GamePlayerBadge"
      android:layout_toLeftOf="@+id/GamePlayOpponent"
      android:layout_alignTop="@+id/GamePlayerBadge"
      android:ellipsize="marquee"
      android:singleLine="true"
      android:textStyle="bold"
      android:textColor="@color/darkbluetext"
      android:layout_marginTop="3dp"
      android:textSize="20dp" />
    <TextView
      android:id="@+id/GamePlayerScore"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignRight="@+id/GamePlayerName"
      android:layout_alignLeft="@+id/GamePlayerName"
      android:layout_below="@+id/GamePlayerName"
      android:ellipsize="marquee"
      android:singleLine="true"
      android:textStyle="bold"
      android:textColor="@color/darkbluetext"
      android:textSize="18dp" />
    <ImageView
      android:id="@+id/GamePlayOpponent"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:background="@android:color/transparent"
      android:layout_alignParentRight="true"
      android:layout_centerVertical="true"
      android:layout_marginLeft="5dp"
      android:layout_marginRight="5dp" />
</RelativeLayout> 
```

我的 API 级别是：

```
 <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="13" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T12:08:32.457

从我的评论中，我发现如果您有 subclassed`ListView`和 overridden `onAttachedToWindow`，您需要确保该方法调用`super.onAttachedToWindow`. 我使用的库没有这样做，我看到的行为与您相同。

# .net - 在 REST Web 服务上发布：如何访问已发布的输入值？

> ID：11453363
> 
> 赞同：0
> 
> 时间：2012-07-12T13:53:15.803
> 
> 标签：.net, vb.net, web-services, rest

.NET Framework 中是否有工具（类/方法）来转换 POSTed 表单的 urlencoded 字符串主体，例如：

```
Id=O+mon+dieu%21&StringValue=Trop+facile&envoyer=Save 
```

例如，键值字典？

```
{"Id","O mon dieu !"} {"StringValue" , "Trop facile"} {"envoyer", "Save"} 
```

我客人有一个这样的工具包括......

仅供参考，它将用于 REST Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:07:53.310

该`HttpUtility.ParseQueryString`方法可以采用 URL 编码的名称值对并`NameValueCollection`使用数据创建一个实例。它类似于字典，但允许一个键有多个值，这在您的场景中是完全合法的。

[http://msdn.microsoft.com/en-us/library/ms150046.aspx](http://msdn.microsoft.com/en-us/library/ms150046.aspx)

# python - PySide QFtp 下载 0 字节文件

> ID：11453364
> 
> 赞同：0
> 
> 时间：2012-07-12T13:53:16.250
> 
> 标签：python, pyqt4, pyside

我正在使用 PySide 制作一个小型 FTP 客户端，并且我正在尝试在下载文件时更新进度条。我告诉 qftp 对象监听 dataTransferProgress 信号，以便在取得进展时调用一个方法来设置 progressBar 的值。但是，每次调用该方法时，实际存在的文件的最大值为 -1。有什么我做错了吗？

资源：

```
import os
import platform
import sys
import threading
from ftplib import FTP

from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtNetwork import *
import ui_FTPWindow

class FtpWindow(QDialog, ui_FTPWindow.Ui_Dialog):
    def __init__(self, parent=None): 
        super(FtpWindow, self).__init__(parent)
        self.connected = False
        self.username = None
        #self.fileTree.itemActivated.connect(self.processItem)
        #self.fileTree.currentItemChanged.connect(self.enableDownloadButton)
        self.password = None    
        self.server = None
        self.port = None
        self.ftp = None
        self.qftp = QFtp(self)
        self.url = None
        self.folderIcon = None
        self.fileIcon = None
        self.currentDir = None
        self.count = 0

        #self.fileTree.setEnabled(False)
        self.setupUi(self)

        self.connectButton.clicked.connect(self.connectOrDisconnect)
        self.mkdirButton.clicked.connect(self.makedir)
        self.downloadButton.clicked.connect(self.download)

        self.updateUi()

    def updateUi(self):
        self.serverEdit.setText('ftpserverhere')
        self.progressBar.setValue(0);
        if self.serverEdit.text() is not None:
            self.connectButton.setEnabled(True)
        else:
            self.connectButton.setEnabled(False)

    def populateTree(self):
        self.fileTree.clear()
        self.consoleLabel.setText("Loading file tree..")
        root = QTreeWidgetItem(self.ftp.pwd())
        self.fileTree.addTopLevelItem(root)
        for item in self.ftp.nlst():
            child = QTreeWidgetItem()
            child.setText(0, item)
            root.addChild(child)
            root.setExpanded(True)
            if not "." in item:
                self.count = 1
                self.goDeeper(item, child)
            print item

    def connectOrDisconnect(self):
        self.url = QUrl(self.serverEdit.text());
        self.qftp = QFtp(self)
        self.qftp.commandFinished.connect(self.commandFinished)
        self.qftp.dataTransferProgress.connect(self.updateDataTransferProgress)
        print "ftp listeners set"
        if  "ftp" in self.url.scheme().lower():
            if self.url.userName():
                self.ftp = FTP(self.url.host(), self.url.userName(), self.url.password()) 
                self.currentDir = self.ftp.nlst()
                self.qftp.connectToHost(self.url.host())
                print self.qftp.currentCommand()

    def goDeeper(self, s, parent):
        for item in self.ftp.nlst(s):
            if item is None:
                return
            deeperChild = QTreeWidgetItem()
            deeperChild.setText(0, item)
            parent.addChild(deeperChild)
            if not "." in item:
                self.goDeeper(item, deeperChild)

    def download(self):
        fileName = self.fileTree.currentItem().text(0)

        if QFile.exists(fileName):
            QMessageBox.information(self, "FTP",
                    "There already exists a file called %s in the current "
                    "directory." % fileName)
            return

        self.outFile = QFile(fileName)
        if not self.outFile.open(QIODevice.WriteOnly):
            QMessageBox.information(self, "FTP",
                    "Unable to save the file %s: %s." % (fileName, self.outFile.errorString()))
            self.outFile = None
            return

        self.qftp.get(self.fileTree.currentItem().text(0), self.outFile)

        self.consoleLabel.setText("Downloading %s..." % fileName)
        self.downloadButton.setEnabled(False)

    def updateDataTransferProgress(self, readBytes, totalBytes):
        self.progressBar.setMaximum(totalBytes)
        self.progressBar.setValue(readBytes)
        print self.qftp.currentCommand()
        print totalBytes
        print readBytes

    def makedir(self):
        foldername = unicode(self.commandEdit.text())
        if self.commandEdit.text() != "":
            #self.qftp.rawCommand(unicode("mkdir " + foldername))

            self.qftp.mkdir(foldername )
            print self.qftp.currentCommand()
            self.consoleLabel.setText("Creating directory %s" % (foldername))

    def executeCommand(self):
        if self.commandEdit.text() == "":
            return
        else:
            command = self.commandEdit.text()
            self.qftp.rawCommand(command)

    def commandFinished(self, error):
        if str(self.qftp.currentCommand()) == 'PySide.QtNetwork.QFtp.Command.Mkdir':
            self.populateTree()
            self.consoleLabel.setText("Directory %s created" % self.commandEdit.text())
            self.commandEdit.setText("")

        if str(self.qftp.currentCommand()) == 'PySide.QtNetwork.QFtp.Command.ConnectToHost':
            self.qftp.login(unicode(self.url.userName), unicode(self.url.password))
            self.consoleLabel.setText("Connected to server: %s" % self.url.host())
            self.qftp.get('')
            print "Invisible file got"
            print "completed"

        if str(self.qftp.currentCommand()) == 'PySide.QtNetwork.QFtp.Command.Login':
            self.populateTree()
            self.consoleLabel.setText("Logged in as %s" % self.url.userName())

        if str(self.qftp.currentCommand()) == 'Pyside.QtNetwork.QFtp.Get':
            if error:
                self.consoleLabel.setText("Canceled download of %s." % self.outFile.fileName())
                self.outFile.close()
                self.outFile.remove()
            else:
                self.consoleLabel.setText("Downloaded %s to current directory." % self.outFile.fileName())
                self.outFile.close()

def main():
    app = QApplication(sys.argv)
    app.setOrganizationName("Qtrac Ltd.")
    app.setOrganizationDomain("qtrac.eu")
    app.setApplicationName("Image Changer")
    form = FtpWindow()
    form.show()
    app.exec_()

main() 
```

非常感谢！

# objective-c - 创建自定义表格视图分隔符时出错

> ID：11453366
> 
> 赞同：2
> 
> 时间：2012-07-12T13:53:20.543
> 
> 标签：objective-c, uitableview, custom-cell

我正在尝试使用自定义分隔符创建一个表格视图。我制作了一个包含内容的自定义单元格，另一个只包含一个带有分隔符的 UIImageView。问题在于如何访问内容。我不能使用 indexPath.row

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier: @"CustomCell"];
    if(cell == nil) 
    { 
        cell = [[[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil] objectAtIndex:0];
    }

    SeparatorCell *cellSeparator = (SeparatorCell *) [tableView dequeueReusableCellWithIdentifier: @"SeparatorCell"];
    if(cellSeparator == nil) 
    { 
        cellSeparator = [[[NSBundle mainBundle] loadNibNamed:@"SeparatorCell" owner:self options:nil] objectAtIndex:0];
    }

    if(indexPath.row % 2)
    {
        UIFont * myCustomFont = [UIFont fontWithName:@"Arial Black" size:16];
        [cell.titulo setFont:myCustomFont];
        cell.titulo.textColor = [UIColor colorWithRed:103/255.0f green:169/255.0f blue:0/255.0f alpha:1];

        cell.titulo.text = [Title objectAtIndex:myRow];
        cell.subtitle.text = [Subtitle objectAtIndex:myRow];

        cell.tag = myRow;
        myRow++;
    }
    else [cellSeparator.imagem setImage:[UIImage imageNamed:@"CustomSeparator.png"]];

    if(indexPath.row % 2) return cell;
    else return cellSeparator;
} 
```

> 我的行

是一个全局 NSInteger。

我已经试过了

```
if(myRow == Title.count) myRow=0;
        else myRow++; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T14:37:26.657

尝试这个：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSInteger numOfRowsIncludeSeparator = 0;

    if (self.model.count > 0) {
        NSInteger numOfSeperators = self.model.count - 1;
        numOfRowsIncludeSeparator = self.model.count + numOfSeperators;
    }
    return numOfRowsIncludeSeparator;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *ContentCellIdentifier = @"ContentCell";
    static NSString *SeparatorCellIdentifier = @"SeparatorCell";

    UITableViewCell *cell = nil;

    if (indexPath.row % 2 == 0) {
        // this is a content cell
        cell = [tableView dequeueReusableCellWithIdentifier:ContentCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[[NSBundle mainBundle] loadNibNamed:@"ContentCell" owner:self options:nil] objectAtIndex:0];
        }

        // get the model index
        NSInteger indexInModel = indexPath.row / 2;

        // get the model for this row
        NSString *modelObject = [self.model objectAtIndex:indexInModel];

        // Configure the cell...
        cell.textLabel.text = modelObject;
    }
    else {
        // this is a separator cell
        cell = [tableView dequeueReusableCellWithIdentifier:SeparatorCellIdentifier];

        if(cell == nil) 
        { 
            cell = [[[NSBundle mainBundle] loadNibNamed:@"SeparatorCell" owner:self options:nil] objectAtIndex:0];
        }
    }

    return cell;
} 
```

不要忘记将`Identifier`ContentCell.xib 的 IB 中的字段设置为“ContentCell”，将 SeparatorCell.xib 设置为“SeparatorCell”。

# google-api - 谷歌应用程序 api 仅审核外发电子邮件

> ID：11453370
> 
> 赞同：0
> 
> 时间：2012-07-12T13:53:35.017
> 
> 标签：google-api, google-apps

我正在尝试仅为外发邮件（已发送项目）设置电子邮件审核监视器。我使用“GAM”或“C#”让 API 工作，但我只能同时处理传入和传出。

在 .Net 的 Google 框架上，只有以下选项：

```
MonitorLevel.FULL_MESSAGE;
MonitorLevel.HEADER_ONLY; 
```

我正在寻找的东西更像是 GAM 上的 nochats / nodrafts。

默认情况下，即使我根本没有在我的代码上写以下行，它似乎也会发送传入的内容：

```
monitor.IncomingEmailMonitorLevel = MonitorLevel.FULL_MESSAGE; 
```

我查看了 Google API 网站，但看不到所有命令的任何列表。我可以肯定地说，在 Google API .Net 框架上，monitor.IncomingEmailMonitorLevel 允许的唯一值是 FULL_MESSAGE / HEADER_ONLY。

我已经阅读了以下链接中的所有信息： [Google Apps Email Audit API](https://developers.google.com/google-apps/email-audit/)

任何帮助将不胜感激。

感谢先进，

奈赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T03:14:53.783

您可以通过在与 gam.exe 或 gam.py 相同的目录中创建一个名为 debug.gam 的文件来查看 GAM 发送的确切 XML。这可以帮助您弄清楚您的应用程序或库需要进行哪些更改。

进出监控不能关闭，只能设置为 HEADERS_ONLY。

# c# - 将数据读取器与 sqltransactions 一起使用

> ID：11453373
> 
> 赞同：1
> 
> 时间：2012-07-12T13:53:43.400
> 
> 标签：c#, sql, transactions, datareader

我`SqlTransaction`在我的代码中使用 s 来进行回滚。在事务中，我有多个要执行的语句可能包括选择插入和更新。所有这些陈述都在`sqltransaction`. 一切正常，只针对一个问题。我将`datareader`s 用于选择语句。这些阅读器一旦使用就关闭。这迫使连接丢失，一切都失败了。有人对我是否可以`datareader`在 a 中使用 s有解决方案`sqltransaction`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:01:25.123

`CommandBehavior.CloseConnection`只有在调用时设置了该选项，DataReader 才会关闭连接`ExecuteReader`。

如果您避免设置此选项，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:02:04.017

您应该自行打开 SqlConnection。
关闭 DataReader 时，SqlDataReader 不会关闭 SqlConnection

例如：

```
using(SqlConnection cn = GetConnection())
{
    cn.Open();
    SqlTransaction tr = cn.BeginTransaction("myTransaction");
    .....

    SqlCommand command = new SqlCommand(sqlString, cn);

    using(SqlDataReader reader = command.ExecuteReader())
    {
        .....
    }

    SqlCommand command1 = new SqlCommand(sqlString1, cn);
    using(SqlDataReader reader1 = command1.ExecuteReader())
    {
        .....
    }
    tr.Commit();
} 
```

# asp.net - [asp 3.5]1 导出到 Excel 不起作用，其他 2 个几乎相同

> ID：11453377
> 
> 赞同：0
> 
> 时间：2012-07-12T13:53:45.960
> 
> 标签：asp.net, export-to-excel

我制作了一个页面，其中有 3 个不同的地方，其中有一个“导出到 excel”按钮。这三个都是 GridView。它们都遵循相同的模式：

```
Response.Clear();
Response.Buffer = true;
Response.ContentType = "application/vnd.ms-excel";
Response.AddHeader("content-disposition","attachment;filename=Underlying.xls");
Response.Charset = String.Empty;
this.EnableViewState = false;

StringWriter sw = new StringWriter();

//some calculations

if (MyGridview.Rows.Count != 0)
{
ChangeControlsToValue(MyGridview);
HtmlTextWriter htw = new HtmlTextWriter(sw);

MyGridView.RenderControl(htw);
}

this.EnableViewState = true;
Response.Write(sw);
Response.End();
} 
```

奇怪的是，在其中一种方法中，没有下载。其他两个工作得很好，在调试时，直到 Response.Write(sw) 没有问题。生成的 HTML 有效。

这里有没有人可以指出我可能出错的方向？为什么没有开始下载？

如果我想用 Debug.Write() 查看 Response 对象的内容，我需要查看 Response 对象的哪一部分？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:42:37.870

他无法正常工作的是在更新面板中，并且该问题之前已得到回答。

# python - 在 Python 中获取网络地址和网络掩码

> ID：11453378
> 
> 赞同：12
> 
> 时间：2012-07-12T13:53:52.133
> 
> 标签：python, sockets, ip, ip-address

在我的 Python 脚本中，我需要检索运行脚本的机器的 IP 地址及其网络地址和网络字节。

至于IP地址，我在存档中找到了解决方案：

```
import socket
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.connect(("www.google.com",80))
myAddress = (s.getsockname()[0])
s.close() 
```

但是我应该如何查找网络地址和网络字节？`$NetworkAddress/$NetworkBytes`如果有帮助的话，我需要将此信息放入 tcpdump 格式的过滤器中。

例子：

```
128.1.2.0/20 
```

`inet` 我跑的时候真的可以在下面找到`ip addr`。有什么简单的方法可以在 Python 中获取这些信息？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T15:59:17.940

对于 Linux 试试

```
iface = "eth0"
socket.inet_ntoa(fcntl.ioctl(socket.socket(socket.AF_INET, socket.SOCK_DGRAM), 
                             35099, struct.pack('256s', iface))[20:24]) 
```

或 [http://github.com/rlisgor/pynetlinux](http://github.com/rlisagor/pynetlinux)

（如此处建议：[在 Python 中检索网络掩码](https://stackoverflow.com/questions/936444/retrieving-network-mask-in-python)）

对于 Linux、Windows 和 MacOS，请考虑[http://alastairs-place.net/projects/netifaces/](http://alastairs-place.net/projects/netifaces/)

**更新：**

如果您需要 cidr（如 '128.1.2.0/20'），您可以使用任何相关库：[http ://pypi.python.org/pypi?%3Aaction=search&term=cidr&submit=search](http://pypi.python.org/pypi?%3Aaction=search&term=cidr&submit=search)

例如`netaddr`：

```
>> from netaddr import IPNetwork
>> print str(IPNetwork('1.2.3.4/255.255.255.0').cidr)
1.2.3.0/24 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T16:42:46.060

[您可以使用pyroute2](https://github.com/svinota/pyroute2)模块检索任何与 ip 相关的信息：

```
from pyroute2 import IPDB
ip = IPDB()
print(ip.interfaces['em1'].ipaddr)
ip.release() 
```

或作为变体：

```
from pyroute2 import IPRoute
ip = IPRoute()
info = [{'iface': x['index'],
         'addr': x.get_attr('IFA_ADDRESS'),
         'mask': x['prefixlen']} for x in ip.get_addr()]
ip.close() 
```

# c++ - 将 IPv4/IPv6 地址和端口设置为 sockaddr_storage 结构

> ID：11453390
> 
> 赞同：9
> 
> 时间：2012-07-12T13:54:21.820
> 
> 标签：c++, sockets, ip-address, ipv6

我正在将**IPv4**应用程序移植到**独立于 AF 的**代码库（它应该与 IPv4 和 IPv6 一起使用）。现在我尽可能使用**sockaddr_storage ，但是现在我必须设置（填充）一个****sockaddr_storage**。但我不知道正确的方法是什么。之前的代码是：

```
// defined in data_socket.h
struct sockaddr_in laddr; 
```

现在有一个设置**sin_addr**和**sin_port**的函数：

```
void DataSocket::SetLocalAddr(const char *addr, const int port)
{
    this->laddr.sin_port = htons(port);
    if(addr != NULL)
        this->laddr.sin_addr.s_addr = inet_addr(addr);
    else
        this->laddr.sin_addr.s_addr = inet_addr("0.0.0.0");
} 
```

如您所见，这是旧样式（使用 IPv4）。

现在我的更改如下。首先，我已更改**`sockaddr_in`**为**`sockaddr_storage`**

```
// defined in data_socket.h
struct sockaddr_storage laddr; 
```

然后我更改了上面的代码以支持**IPv4**和**IPv6**：

```
void DataSocket::SetLocalAddr(const char *addr, const int port)
{ 
switch (this->GetAddrFamily(addr)) {
    case AF_INET:
        (struct sockaddr_in *) this->laddr.sin_port = htons(port);
        if(addr != NULL)
            inet_pton(AF_INET, addr, (struct sockaddr_in *) this->laddr.sin_addr);
        else
            inet_pton(AF_INET, "0.0.0.0", (struct sockaddr_in *) this->laddr.sin_addr);
        break;

    case AF_INET6:
        (struct sockaddr_in6 *) this->laddr.sin6_port = htons(port);
        if(addr != NULL)
            inet_pton(AF_INET6, addr, (struct sockaddr_in6 *) this->laddr.sin6_addr);
        else
            inet_pton(AF_INET6, "0:0:0:0:0:0:0:0", (struct sockaddr_in6 *) this->laddr.sin6_addr);
        break;

    default:
        return NULL;

} 
```

}

在哪里`GetAddrFamily()`：

```
int DataSocket::GetAddrFamily(const char *addr)
{
    struct addrinfo hints, *res;
    int status, result;

    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    if ((status = getaddrinfo(addr, 0, &hints, &res)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(status));
        return false;
    }

    result = res->ai_family; // This might be AF_INET, AF_INET6,etc..
    freeaddrinfo(res); // We're done with res, free it up

    return result;
} 
```

看来我的方法是复杂的。这是正确的方法吗？因为我已将 sockaddr_in 更改为 sockaddr_storage，实际上我只是想要这个问题的反面：[Getting IPV4 address from a sockaddr structure](https://stackoverflow.com/questions/1276294/getting-ipv4-address-from-a-sockaddr-structure)

我试图找到最好的解决方案，例如这里：[http](http://www.kame.net/newsletter/19980604/) ://www.kame.net/newsletter/19980604/它说永远不要使用`inet_ntop()`and ，但是其他一些（比如 Beej的`inet_pton()`网络教程）说应该使用用于基于**IPv6**的应用程序。`inet_ntop()``inet_pton()`

 **我的实施方式是正确的还是应该改变它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:43:19.197

我强烈建议让`getaddrinfo`所有繁重的工作，例如。

```
void DataSocket::SetLocalAddr(const char *addr, const unsigned short int port)
{
    struct addrinfo hints, *res;
    int status;
    char port_buffer[6];

    sprintf(port_buffer, "%hu", port);

    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    /* Setting AI_PASSIVE will give you a wildcard address if addr is NULL */
    hints.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV | AI_PASSIVE;

    if ((status = getaddrinfo(addr, port_buffer, &hints, &res) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(status));
        return;
    }

    /* Note, we're taking the first valid address, there may be more than one */
    memcpy(&this->laddr, res->ai_addr, res->ai_addrlen);

    freeaddrinfo(res);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:41:55.830

如果我理解正确，您将投`this`给第一个成员？不要那样做，命名成员。

我还将通过`{}`为这两种情况引入范围和局部变量来使其更易于阅读，例如：

```
{
 struct sockaddr_in * in4 = reinterpret_cast< struct sockaddr_in * >(&this->addr);
 in4->laddr.sin_port = htons(port);
 ... etc
} 
```

由于您使用的是 C++ 而不是 C，因此请使用 C++ 样式转换。C++ 中的 C 风格转换非常含糊。**

# java - 如何从智能 gwt 日历中删除 pm/am

> ID：11453391
> 
> 赞同：0
> 
> 时间：2012-07-12T13:54:26.967
> 
> 标签：java, gwt, calendar, smartgwt

我用智能 GWT 做了一个日历。禁用日/周选项卡并将默认设置为月。我想从日历中删除上午/下午时间。我不需要上午/下午时间，因为我使用天作为最小时间单位。

有什么办法可以去掉吗？我能够通过使用来改变它：

```
calendar.setTimeFormatter(TimeDisplayFormat.TO24HOURTIME); 
```

但没有选项可以禁用它，只能更改它。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:08:29.247

采用：

```
calendar.setTimeFormatter(TimeFormatter.TOSHORT24HOURTIME); 
```

**编辑：**

当前的格式化程序枚举不支持你想要的，但我认为你可以创建一些解决方法（虽然没有尝试过，但试一试）。

1.  编辑 Calendar.js 并将其更改为类似的内容（请参见[此处](http://code.google.com/p/smartgwt/issues/detail?id=460)）：

    ```
    formatCellValue : function (value, record, rowNum, colNum, grid) {
         return "";
    } 
    ```

2.  创建一个新格式化程序的副本，这非常像 NativeTimeDisplayFormatter （它是最终的，所以你不能扩展它），并在格式方法中返回你的日期格式（在 JS 中）。然后重载 setTimeFormatter，这样您就可以获取格式化程序，并执行与原始格式化程序相同的功能。

# ruby-on-rails - RecordInvalid 错误，但据我所知，传递的参数是有效的

> ID：11453393
> 
> 赞同：0
> 
> 时间：2012-07-12T13:54:35.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前有三个模型：歌曲有很多 Setlists，反之亦然，通过分配模型。

我正在尝试使用嵌套表单将现有歌曲添加到设置列表。

我当前对嵌套表单的看法：

```
<div>
  <%=form_for @allocation do|builder|%>
    <%=builder.label :song_id, "Pick a song" %>

     <%= builder.hidden_field :setlist_id, value: @setlist.id %>

     <%= builder.select(:song_id, options_for_select(@selections), {}, {multiple: true, size: 7}) %>

    <%=builder.submit "Add Song", class: "btn btn-large btn-primary" %>
  <% end %>
</div> 
```

和我用于编辑设置列表的控制器：

```
 def edit
    @songs = Song.all(order: 'title')
    @setlist = Setlist.find(params[:id])
    @allocations = @setlist.allocations
    @allocation = Allocation.new
    @selections = Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id ]   }
  end

  def update

    @setlist = Setlist.find(params[:id])
    @selections = Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id] }
    @allocations = @setlist.allocations
    @allocation = Allocation.new

    params[:allocation][:song_id].reject! { |c| c.empty? }

    if @setlist.update_attributes(params[:setlist])
      if @allocation.save
        flash[:success] = "SETLIST SAVED!"
        redirect_to setlist_path(@setlist)
      else
        flash[:fail] = "Setlist not saved"
        render 'edit'
      end
    else
      flash[:fail] = "FAIL!"
      render 'edit'
    end
  end 
```

每当我提交表单以将歌曲添加到设置列表时，我都会收到一条错误消息：

```
Validation failed: Setlist can't be blank, Song can't be blank 
```

所有参数似乎都正确传递，所以我很难过。这是返回的参数：

```
 {"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"ThIXkLeizRYtZW77ifHgmQ8+UmsGnDhdZ93RMIpppNg=",
 "setlist"=>{"date(1i)"=>"2012",
 "date(2i)"=>"7",
 "date(3i)"=>"11",
 "morning"=>"false"},
 "allocation"=>{"setlist_id"=>"1",
 "song_id"=>["5"]},
 "commit"=>"Add Song",
 "id"=>"1"} 
```

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:59:19.373

您允许在该`:song_id`字段中进行多项选择，我想其中一个选项有一个空白值。必须选择该选项和另一个选项，从而导致`["", 13]`响应。

```
params[:allocation][:song_id].reject! { |c| c.empty? } 
```

这将清除该参数中的空白条目。这应该放在`update`该行之前的任何方法中

```
if @setlist.update_attributes(params[:setlist]) 
```

至于验证错误，我认为它来自表单，`Allocation`因为这就是表单的用途。

```
@allocation = Allocation.new

if @allocation.save! 
```

不知道所有属性在此处都有需要值的属性，例如`:set_list_id`和`:song_id`。您试图在`Allocation`不先设置任何属性的情况下将其持久化到数据库中。这可能是您遇到的验证问题的来源。

**编辑：**

rails 中的嵌套表单是与父表单的对象关联的对象的一组表单字段。注意[这个表单](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)是如何`fields_for`调用`person_form`对象的。这将导致嵌套参数，如`param[:person][:children][:name]`.

```
<% form_for @person do |person_form| %>

  <%= person_form.label :name %>
  <%= person_form.text_field :name %>

  <% person_form.fields_for :children do |child_form| %>
    <%= child_form.label :name %>
    <%= child_form.text_field :name %>
  <% end %>

  <%= submit_tag %> 
```

在这个`update`方法中，你可以有一些简单的东西

```
person = Person.find(params[:id]).update_attributes(params[:person]) 
```

on Person 可以为您管理其关联`update_attributes`的创建、更新和保存`children`[`accepts_nested_attributes_for`](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

我*认为*这就是您所追求的，因此您可能需要`update`相应地重新考虑您的观点和方法。对于绝对的 Rails 初学者来说，这是相对棘手的事情；继续返回文档*（写得很好）*并在这里寻求帮助。

# c# - 强制从 javascript 打开一个文本文件（文件在服务器上）

> ID：11453394
> 
> 赞同：0
> 
> 时间：2012-07-12T13:54:38.027
> 
> 标签：c#, file, extjs

单击生成按钮后，我正在生成几个文件。在成功生成该文件然后存储在服务器上之后，用户会看到相同的文件，以便他可以下载它。

我尝试将扩展名更改为浏览器无法直接打开的已知扩展名，即.doc。这作为一个弹出显示说明下载文件。

但是，我想将扩展名更改为更有意义的内容，例如 .cfg。问题是使用 .cfg 或 .txt 浏览器会自动打开文件（因为它是文本文件）。我怎样才能覆盖这个？

以下是代码：

c#服务器端：

```
 string[] L_TextFile = P_Data.M_Content.Split('|');
 System.IO.File.WriteAllLines(@"c:\files\file.cfg", L_TextFile);
 response = "1";
 return response; 
```

extjs ajax调用成功代码：

```
success: function(P_Response){
    var res = Ext.util.JSON.decode(P_Response.responseText);
    if(res == '1') window.location.href'/files/file.cfg';
    else ShowError('An error has occured while generating the text file.');                                                                                                                                                                                                                         
}, 
```

基本上，使用 .doc 一切正常，但我想将其更改为 .cfg

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:03:51.510

将响应 MIME 类型设置为`"application/octet-stream"`并可选择设置文件名。

例子：

```
response.AddHeader("Content-Disposition", "attachment;filename=\"" + filename + "\"");
response.AddHeader("Content-Type", "application/octet-stream"); 
```

# objective-c - Mac Kiosk Mode API - 强制退出崩溃应用程序

> ID：11453396
> 
> 赞同：0
> 
> 时间：2012-07-12T13:54:41.383
> 
> 标签：objective-c, macos, keyboard-shortcuts, fullscreen, kiosk-mode

我正在编写一个 Mac (10.6 / 10.7) 应用程序，该应用程序在允许用户访问计算机之前针对 Active Directory 域对用户进行身份验证（我被告知我不能允许用户通过传统登录服务登录）。我有验证码，现在正试图让这个登录窗口全屏并且无法关闭。

Apple 的 Kiosk Mode API（此处的文档）似乎非常适合这个，我用它来全屏显示窗口，禁用停靠/菜单栏/强制退出等，其中大部分工作正常。但是，我发现当我将窗口视图设置为全屏模式时，尝试调出强制退出窗口会使应用程序崩溃（无论是桌面还是全屏并需要完全重启）。

代码示例：

```
NSApplicationPresentationOptions options = 
NSApplicationPresentationHideMenuBar|NSApplicationPresentationHideDock|
NSApplicationPresentationDisableHideApplication|
NSApplicationPresentationDisableProcessSwitching|
NSApplicationPresentationDisableAppleMenu|
NSApplicationPresentationDisableForceQuit;

[NSApp setPresentationOptions:options];
[[_window contentView] enterFullScreenMode:[NSScreen mainScreen] withOptions:nil]; 
```

我唯一能想到的是切换到全屏时 NSApplication 选项并没有完全保留；不过，除了禁用强制退出之外的所有选项似乎都可以继续使用。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:57:27.407

这实际上是 Mac 上全屏应用程序的正常行为。当您在全屏应用程序中使用 Cmd+Opt+Esc 时，它将立即终止已捕获屏幕的进程，而不是呈现标准的终止 UI。

# c# - EWS 联系人，检查电子邮件地址密钥

> ID：11453399
> 
> 赞同：1
> 
> 时间：2012-07-12T13:54:45.147
> 
> 标签：c#, exchangewebservices

因此，我正在开发的应用程序会提取特定的 Outlook 联系人并显示道具。我遇到的问题是电子邮件地址字段是否存在，因为联系人可能没有电子邮件地址，我需要检查这一点。返回的错误消息是 {"The given key was not present in the dictionary."}。

下面是代码。因此，它抱怨电子邮件地址密钥不存在，因此无法分配它。那么如何在分配之前检查电子邮件密钥是否存在？

`EWSForm.EmailAddresses = Contact.EmailAddresses[EmailAddressKey.EmailAddress1].Address;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:59:34.113

或者使用`TryGetValue()`which 不会抛出异常，而是返回一个布尔值来指示它是否能够返回带有键的值。

```
EmailAddress email;
var success = contact.EmailAddresses.TryGetVaue(EmailAddressKey.EmailAddress1, out email);

if (success)
{
    // Use email for task
    SendMail(email.Address);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:06:55.447

由于 EmailAddresses 的类型为 EmailAddressDictionary 并且来自 MSDN 文档：

```
public sealed class EmailAddressDictionary : DictionaryProperty<EmailAddressKey,EmailAddressEntry> 
```

您应该能够做到这一点（使用`Contains(Key)`此处定义的方法[http://msdn.microsoft.com/en-us/library/dd634144(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/dd634144(v=exchg.80).aspx)）：

```
 if(   
        Contact.EmailAddresses.
            Contains( EmailAddressKey.EmailAddress1 ) 
        ) {
            EWSForm.EmailAddresses = 
                Contact.EmailAddresses[EmailAddressKey.EmailAddress1].Address;
    } 
```

# java-me - 通过 HTTP 流式传输视频

> ID：11453403
> 
> 赞同：1
> 
> 时间：2012-07-12T13:54:56.157
> 
> 标签：java-me, video-streaming

我想使用 Http URL 在 j2me 中流式传输视频。我遇到了[诺基亚开发者论坛](http://www.developer.nokia.com/Resources/Library/Java/implementation-notes/jsr-135-mobile-media-api/series-40-class-and-interface-description/streaming.html)。我已经尝试了这两种可能性，但它不起作用。我想使用 HTTP 协议流式传输视频。是否有可能这样做以及如何实现？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:10:24.070

当您在 Java ME 中打开媒体流时，通常会在渲染之前由 Media API 对其进行缓冲。但是，某些设备可能会按预期播放流，但这不是标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:41:49.483

HTTP Live Streaming (HLS) 是一个行业标准，客户端从标准 HTTPD 服务器接收流式音频/视频，您在该服务器上将媒体存储为 HLS 友好格式。Apple 推动了这一点，尽管作为标准，有一些工具可用于将您的媒体转换为服务器端的 HLS。它独立于语言并且在最小化带宽要求方面非常有效/灵活。

# c - 嵌入式系统不需要操作系统的数据库

> ID：11453404
> 
> 赞同：6
> 
> 时间：2012-07-12T13:54:57.157
> 
> 标签：c, database, operating-system, embedded, system

有没有不需要操作系统来执行操作的数据库？如果是，请提供尺寸等详细信息或包含详细信息的链接。

编程语言是C。

嵌入式系统编程所需。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T17:41:29.640

好吧，这取决于您如何定义“操作系统”。

*   如果您将其定义为具有在 x86 硬件上运行的 GUI 的东西；当然; 大多数数据库在其他系统上运行得很好。
*   如果您将其定义为实现 POSIX 规范或以其他方式允许线程或进程运行并提供安全措施的东西，那么您将失去一些需要多线程操作的东西，但您仍然可以；有很多选择。
*   如果你将它定义为根本没有任何文件操作的东西，并且没有实现很多 C 标准库，那么你就很不走运了。

您的基于 ARM 的设备几乎肯定有随工具链一起提供的 C 标准库。 [Newlib](http://sourceware.org/newlib/)是深度嵌入式系统的流行选择；例如，它默认包含在免费的 CodeSourcery 和 YARTGO 工具链中。但是，您需要先实现一些系统调用，然后才能工作。你能做，比如说，`printf()`让文本出现在控制台上吗？怎么样`malloc()`？如果这些和其他功能不起作用，我建议您实现它们。Newlib 期望的基本系统调用是：

```
int     _system       (const char *);
int     _rename       (const char *, const char *);
int     _isatty       (int);
clock_t _times        (struct tms *);
int     _gettimeofday (struct timeval *, struct timezone *);
void    _raise        (void);
int     _unlink       (void);
int     _link         (void);
int     _stat         (const char *, struct stat *);
int     _fstat        (int, struct stat *);
caddr_t _sbrk         (int);
int     _getpid       (int);
int     _kill         (int, int);
void    _exit         (int);
int     _close        (int);
int     _open         (const char *, int, ...);
int     _write        (int, char *, int);
int     _lseek        (int, int, int);
int     _read         (int, char *, int); 
```

其中大部分可以是存根，但您需要例如`_write()`printf()（和其他写入操作）、`_read()`读取操作以及`_sbrk()`malloc 和其他内存管理功能。例如，请参阅[http://wiki.osdev.org/Porting_Newlib](http://wiki.osdev.org/Porting_Newlib)以了解最小实现。您对这些函数的定义将决定数据库的工作方式；如果 _write() 向 UART 发送一个字符，那么您的数据库将不会很有用。

随着标准库的工作，[sqlite](http://www.sqlite.org/download.html)和其他数据库应该可以工作。他们会在 sqlite 合并的 shell.c 中做这样的事情：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <assert.h>
#include "sqlite3.h"
#include <ctype.h>
#include <stdarg.h>
#include <signal.h>
#include <pwd.h>
#include <unistd.h>
#include <sys/types.h> 
```

你需要一些实现。这不需要操作系统。有了 C 库，它就可以工作，但没有 C 库，你就只能靠自己了。

# sql-server - 使用重复信息优化查询

> ID：11453405
> 
> 赞同：3
> 
> 时间：2012-07-12T13:54:59.930
> 
> 标签：sql-server, sql-server-2005, query-optimization

我有这个要优化的查询

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[ComprobantesFacturasObtenerEstadisticasLocal2] 
(
    @FechaDesde DateTime,
    @FechaHasta DateTime,
    @XML ntext  
)
AS
BEGIN

    DECLARE @docHandler INT

    EXEC sp_xml_preparedocument @docHandler OUTPUT, @XML    

    --Locales
    Select IdLocal
    into #seleccionados
    FROM OPENXML(@docHandler, N'/NewDataSet/Table1', 2) 
    WITH (IdLocal int)  

    select d.* into #Locales from  Dim_Sucursal d inner join GrimRepCen..Locales l on l.Codigo = d.Codigo inner join #seleccionados s on s.IdLocal = l.iDlocal

    /*2011/12/06 busco los descuentos del rio*/
    select distinct l.Codigo + ' - ' + l.Nombre  as local, c.IdComprobante, -1 as Cantidad,
        -1 * isnull(abs(c.TotalNeto),0) as IMPORTE, 
        'Varios' as Familia, 'Dto Bco Rio' as Linea
    into #descuentoRio
    from Fact_Comprobante(nolock) c 
    --inner join Fact_ComprobanteItem(nolock) ci on ci.IdComprobante = c.IdComprobante 
    inner join #locales l  on c.idDim_ComprobanteTipo = 5  and l.IdDim_sucursal = c.IdDim_sucursal  and c.fecha between @FechaDesde and @FechaHasta   

    /*******************COMPROBANTES************************************************ */
    select distinct
        c.*, l.Codigo + ' - ' + l.Nombre  as local, ct.IdComprobanteTipo
    into #Comprobantes
    from Fact_Comprobante(nolock) c 
    inner join Fact_ComprobanteItem(nolock) ci on ci.IdCOmprobante = c.IdComprobante
    inner join Dim_ComprobanteTipo(nolock) ct on ct.IdDim_ComprobanteTipo = c.idDim_ComprobanteTipo 
    inner join #locales l on l.IdDim_sucursal = c.IdDim_sucursal and  ct.IdComprobanteTipo not in (46 /*Error Fiscal Factura B*/, 47 /*Error Fiscal Factura A*/) and c.fecha between @FechaDesde and @FechaHasta   

     --Comprobantes por Linea/Marca/Familia
    select 
        m.Nombre as Marca, l.Nombre as Linea , case  when c.IdComprobanteTipo in (21,23,26,28) then 0 else -sum(ci.Cantidad) end as Cantidad,
        case  when c.IdComprobanteTipo in (21,23,26,28) 

        --toma en cuenta los descuentos de las facturas que fueron anuladas
        then c.TotalNeto 
        else isnull(ci.ImporteNeto,0) - isnull((select sum(importe) as importe 
                                                from Fact_Descuento (nolock) DD
                                                where DD.IdComprobante = ci.idComprobante  and ci.IdDim_Producto = IdDim_Producto
                                                 and ci.IdDim_Medida = IdDim_Medida and ci.IdDim_Calidad = IdDim_Calidad 
                                                 and exists 
                                                     (
                                                        select 1 
                                                        from ComprobanteReferencias AA
                                                        inner join Fact_Comprobante BB on aa.IdComprobanteCredito = BB.IdComprobante
                                                        where AA.IdComprobanteDebito = DD.IdComprobante
                                                        and BB.IdDim_ComprobanteTipo in (4,13,16,19)
                                                     )
                                                 ),0)
        end as IMPORTE, 
        f.Nombre as Familia
    from #Comprobantes c 
    inner join Fact_ComprobanteItem(nolock) ci on  ci.IdComprobante = c.IdComprobante 
    inner join Dim_Producto(nolock) p on p.IdDim_Producto = ci.IdDim_Producto
    inner join Dim_Marca(nolock) m on m.IdDim_Marca = p.IDDim_Marca
    inner join Dim_Familia(nolock) f on f.idDim_Familia = p.IdDim_Familia
    inner join Dim_Linea(nolock) l on l.IdDim_Linea = p.IdDim_Linea
    Group by m.Nombre,l.Nombre,f.Nombre,c.TotalNeto,ci.IdComprobante, ci.IdDim_producto,
    ci.idDim_Medida,ci.ImporteNeto,c.IdComprobanteTipo  ,ci.IdDim_Calidad
    union all
    select 'Grimoldi' as Marca, Linea , - 1 Cantidad,
        IMPORTE, 
        Familia
    from #descuentoRio 

    --/*Familia*/
    select case  when c.IdComprobanteTipo in (21,23,26,28) then 0 else -isnull(sum(ci.Cantidad),0) end as Cantidad,
    case  when c.IdComprobanteTipo in (21,23,26,28) 

        --toma en cuenta los descuentos de las facturas que fueron anuladas
        then c.TotalNeto 
        else isnull(ci.ImporteNeto,0) - isnull((select sum(importe) as importe 
                                                from Fact_Descuento (nolock) DD
                                                where DD.IdComprobante = ci.idComprobante  and ci.IdDim_Producto = IdDim_Producto
                                                 and ci.IdDim_Medida = IdDim_Medida and ci.IdDim_Calidad = IdDim_Calidad 
                                                 and exists 
                                                     (
                                                        select 1 
                                                        from ComprobanteReferencias AA
                                                        inner join Fact_Comprobante BB on aa.IdComprobanteCredito = BB.IdComprobante
                                                        where AA.IdComprobanteDebito = DD.IdComprobante
                                                        and BB.IdDim_ComprobanteTipo in (4,13,16,19)
                                                     )
                                                 ),0)
        end as IMPORTE, 
        f.Nombre as Familia
    from #Comprobantes c 
    inner join Comprobantes(nolock) co on co.IdComprobante = c.IdComprobante
    inner join Fact_ComprobanteItem(nolock) ci on  ci.IdComprobante = c.IdComprobante 
    inner join Dim_Producto(nolock) p on p.IdDim_Producto = ci.IdDim_Producto
    full outer join Dim_Familia(nolock) f on f.idDim_Familia = p.IdDim_Familia
    Group by f.Nombre,ci.ImporteNeto,ci.IdComprobante, ci.IdDim_producto,
    ci.idDim_Medida,c.TotalNeto, c.IdComprobanteTipo    ,ci.IdDim_Calidad
    union all
    select  -1 as Cantidad,
        IMPORTE, 
        Familia
     from #descuentoRio 

    /*local*/
    select c.Local, case  when c.IdComprobanteTipo in (21,23,26,28) then 0 else -isnull((sum(ci.Cantidad)),0) end as Cantidad,
        case  when c.IdComprobanteTipo in (21,23,26,28) 

        --toma en cuenta los descuentos de las facturas que fueron anuladas
        then c.TotalNeto 
        else isnull(ci.ImporteNeto,0) - isnull((select sum(importe) as importe 
                                                from Fact_Descuento (nolock) DD
                                                where DD.IdComprobante = ci.idComprobante  and ci.IdDim_Producto = IdDim_Producto
                                                 and ci.IdDim_Medida = IdDim_Medida and ci.IdDim_Calidad = IdDim_Calidad 
                                                 and exists 
                                                     (
                                                        select 1 
                                                        from ComprobanteReferencias AA
                                                        inner join Fact_Comprobante BB on aa.IdComprobanteCredito = BB.IdComprobante
                                                        where AA.IdComprobanteDebito = DD.IdComprobante
                                                        and BB.IdDim_ComprobanteTipo in (4,13,16,19)
                                                     )
                                                 ),0)
    end as IMPORTE,
    f.Nombre as Familia, l.Nombre as Linea
    from #Comprobantes c 
    inner join Comprobantes(nolock) co on co.IdComprobante = c.IdComprobante
    inner join Fact_ComprobanteItem(nolock) ci on  ci.IdComprobante = c.IdComprobante 
    inner join Dim_Producto(nolock) p on p.IdDim_Producto = ci.IdDim_Producto
    inner join Dim_Linea(nolock) l on l.IdDim_Linea = p.IdDim_Linea
    inner join Dim_Familia(nolock) f on f.idDim_Familia = p.IdDim_Familia
    Group by f.Nombre,ci.ImporteNeto, l.Nombre  ,ci.IdComprobante, ci.IdDim_producto,
    ci.idDim_Medida, c.Local,c.TotalNeto, c.IdComprobanteTipo,ci.IdDim_Calidad
    union all
    select Local, -1 as Cantidad,
        IMPORTE, 
        Familia, Linea
     from #descuentoRio 
end 
```

有些事情我无法更改，例如，以其他方式发送 id 而不是 xml（因为我必须修改代码而我不能）、表的结构和其他内容。我只能修改这个存储。此查询接收一些 Id，插入临时表 ( `#Seleccionados`) 并使用它进行一些连接以获取有关销售和其他信息的信息。此外，您可以看到奇怪的东西，如带有硬编码值的 Union ALL 和其他东西。那是因为代码中报告的方式是完成的，也无法改变（我的意思是，不要担心那些奇怪的事情）。这个存储基本上返回 4 个选择：其中一个只有一行，所以我遇到了其他 3 个的问题，我在这里向您展示。

**我试过的：**

我在想的是尝试解决一些重复的事情，例如，这个子查询：

```
(select sum(importe) as importe 
                                                from Fact_Descuento (nolock) DD
                                                where DD.IdComprobante = ci.idComprobante  and ci.IdDim_Producto = IdDim_Producto
                                                 and ci.IdDim_Medida = IdDim_Medida and ci.IdDim_Calidad = IdDim_Calidad 
                                                 and exists 
                                                     (
                                                        select 1 
                                                        from ComprobanteReferencias AA
                                                        inner join Fact_Comprobante BB on aa.IdComprobanteCredito = BB.IdComprobante
                                                        where AA.IdComprobanteDebito = DD.IdComprobante
                                                        and BB.IdDim_ComprobanteTipo in (4,13,16,19)
                                                     )
                                                 ) 
```

在`ISNULL`子句中重复 3 次选择。所以，我认为我可以使用 WITH Common_Expresion_Table 并减少它。但是，该选择是一个子查询，因此在我使用子查询时取决于选择的值（可以在该子查询的子句中看到我在说什么`where`）

然后我虽然，3个选择没有那么不同。他们有几个重复的连接，但以不同的方式分组。所以，我也想使用某种临时表或 CTE，但我不确定，因为它们以不同的方式分组，并且也有一个或两个不同`JOINS`

*一些额外的信息：*

`#Seleccionados`将有大约 100 行 ID。此查询需要 50 段。一个星期：

*   第一个查询返回`47083 rows`
*   第二个查询返回`47084 rows`
*   第三个查询返回`47084 rows`

如您所见，它几乎是相同的信息，但以不同的方式分组。

表格： `Fact_Comprobante`获得有关一次销售的信息。`Fact_ComprobanteItem`关于出售的物品。 `Dim_Producto`获得了有关一种产品的`Dim_Familia`信息，有关产品系列的`Dim_Marca`信息，获得了有关产品标志的信息，`Dim_Linea`获得了有关产品系列的信息（这 3 个表是 Dim_Producto 中的 FK）。 `Dim_ComprobanteTipo`获得了有关销售类型的 `Fact_Descuento`信息 获得了与销售相关的折扣信息。

所有表都有很多信息。

这些`(Nolock)`语句是因为我们在这些表中同时有 3 个服务插入、更新和其他内容。

我没有做这个查询，我只需要优化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:47:18.997

使用 SQL 探查器（如果您有权访问它）并筛选存储过程的名称。确保显示每个步骤（因此运行该过程会显示超过 1 或 2 行）。然后在每一步上，您都会看到秒数、读取次数、写入次数等。这样您就可以专注于耗时的部分。

替代方案您可以使用此 SQL 分析替代方案：

```
declare @dStart datetime
set @dStart = getdate()

-- at every place you like to monitor
print 'a: ' + convert(nvarchar(datediff(ms, @dStart, getdate())) 
```

在不深入研究过程的情况下，我将从子查询开始并存在（...

这可能是一个昂贵的，而是将其重写为左连接或右连接

# javascript - 是否有在字符串中创建转义字符的模式？

> ID：11453409
> 
> 赞同：2
> 
> 时间：2012-07-12T13:55:09.670
> 
> 标签：javascript, regex, formatting, escaping

我在 javascript 中创建一个字符串格式化程序，它使用反斜杠进行转义。创建格式化程序本身非常容易。我的问题是找到转义字符，并在格式化程序中进行转义。

此格式化程序将 .Net 格式化实现复制到 Javascript。基于这些注释：http: [//msdn.microsoft.com/en-us/library/26etazsy](http://msdn.microsoft.com/en-us/library/26etazsy)

例如：

```
"####\\###".format(123456) == "123#456"; 
```

正则表达式一直存在问题，因为 JS 不支持正则表达式否定。

我发现我必须对几个循环（有时在其他循环中）进行处理，以解决转义问题。我已经让它工作了，但我正在寻找一个更优雅的，希望基于一个既定的模式。

这样做有既定的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T02:11:24.687

执行此操作的内置方法是通过[replaceValue 回调](https://people.mozilla.org/~jorendorff/es5#sec-15.5.4.11)：

```
function replacer(match, offset, fullstring)
  {
  return match.substr(-1);
  }

function mapper(match, offset, fullstring)
  {
  return offset;
  }

"####\\##\\#".replace(/#(?=#|$)/g, mapper).replace(/\\./g, replacer); //012#5#8 
```

# r - 加入 data.table 似乎正在用 NA 替换值

> ID：11453410
> 
> 赞同：1
> 
> 时间：2012-07-12T13:55:09.903
> 
> 标签：r, data.table

我正在尝试加入两个 data.tables，就像我用 merge() 和 all=TRUE 加入数据帧一样，如下所示：

```
> x = data.frame(index = 1:10)
> y = data.frame(index = c(2,4,6), weight = c(0.2, 0.3, 0.5))
> x
   index
1      1
2      2
3      3
4      4
5      5
6      6
7      7
8      8
9      9
10    10
> y
  index weight
1     2    0.2
2     4    0.3
3     6    0.5
> merge(x,y, all=TRUE)
   index weight
1      1     NA
2      2    0.2
3      3     NA
4      4    0.3
5      5     NA
6      6    0.5
7      7     NA
8      8     NA
9      9     NA
10    10     NA 
```

我有两个数据表，matched.weights 和 casted，这是 cast 函数的结果。它们的键都是“索引”。

```
> matched.weights
      index
 [1,]     1
 [2,]     2
 [3,]     3
 [4,]     4
 [5,]     5
 [6,]     6
 [7,]     7
 [8,]     8
 [9,]     9
[10,]    10
First 10 rows of 14708 printed. 
> casted
      index            1            2
 [1,] 10002 0.0049024578 3.057794e-03
 [2,] 10129 0.0011064567 8.481497e-04
 [3,] 10171 0.0012964050 5.540875e-03
 [4,] 10177 0.0008181397 6.981567e-04
 [5,] 10187 0.0060350971 2.156695e-03
 [6,]  1022 0.0011320117 8.665125e-04
 [7,] 10250 0.0047892924 7.725221e-03
 [8,] 10262 0.0044724898 8.787161e-06
 [9,] 10286 0.0016650838 7.162887e-05
[10,] 10299 0.0015840791 5.578903e-03
First 10 rows of 305 printed. 
```

当我尝试合并它们时出现此错误：

```
> merge(matched.weights, casted, all=TRUE)
Error in setcolorder(dt, c(setdiff(names(dt), end), end)) : 
  neworder is length 5 but x has 3 columns. 
```

当我使用 data.table 语法时，它会用 NA 替换数据条目：

```
> merged = casted[matched.weights]
> merged
      index X1 X2
 [1,]     1 NA NA
 [2,]     2 NA NA
 [3,]     3 NA NA
 [4,]     4 NA NA
 [5,]     5 NA NA
 [6,]     6 NA NA
 [7,]     7 NA NA
 [8,]     8 NA NA
 [9,]     9 NA NA
[10,]    10 NA NA
First 10 rows of 14708 printed. 
> merged[10002]
     index X1 X2
[1,] 10002 NA NA
> sum(merged[[2]], na.rm=T)
[1] 0 
```

谁能向我解释发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:14:24.850

如果您想要`merge`两个数据表（在完全外连接的意义上，类似于`all=TRUE`），您需要使用`merge.data.table`：

```
library(data.table)
dtx <- data.table(x, key="index")
dty <- data.table(y, key="index")
merge(dtx,dty, all=TRUE)
   index weight
1      1     NA
2      2    0.2
3      3     NA
4      4    0.3
5      5     NA
6      6    0.5
7      7     NA
8      8     NA
9      9     NA
10    10     NA 
```

这与使用数据框时得到的结果相同（但要快得多）。

值得注意的是`merge`，最近版本的一些功能得到了改进`data.table`，所以一定要获取最新的稳定版本。我使用的是 1.8.0 版。

# javascript - Javascript 框架中的美元符号

> ID：11453412
> 
> 赞同：-2
> 
> 时间：2012-07-12T13:55:14.723
> 
> 标签：javascript, javascript-framework

在 jQuery、mooTools、Prototype.js 和其他 JavaScript 框架中，使用美元符号作为元素选择器是很常见的。它选择 DOM 节点并将框架应用到它。

**我讨厌这个。**

作为一名程序员，“$”对我来说毫无意义。在 jQuery 中，您可以将美元符号替换为：

`$('#divID')`与`jQuery('#divID')`我发现更明确的相同。

但是，我很难找到其他框架是否支持类似的替代符号。

mooTools 有`$`and `$$`，Prototype 也使用`$`. 有谁知道什么功能（如果有的话）取代了这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:57:32.023

If you want another name for the functionality, just assign one, like this

```
var myName = $; 
```

Then the whole functionality becomes available by this new `myName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:57:10.430

`$` is a **valid** javascript variable.

Anything could be assigned to it!

For example:

```
$ = 42;

//or
$ = jQuery; 
```

`$` is just the variable that many javascript libraries use to store their `init` function.

* * *

So, since now you know that `$` can be a function (when it comes to many libraries) you can assign `$` to any other variable as well:

```
var newVar = $; 
```

# php - 来自mysql的长轮询信息不起作用

> ID：11453423
> 
> 赞同：2
> 
> 时间：2012-07-12T13:56:02.613
> 
> 标签：php, jquery, mysql, ajax, long-polling

我正在尝试使用 ajax、jquery、php 和 mysql 进行基于长轮询的聊天，但似乎有些问题（我也是长轮询的新手）。

索引.php：

```
 <?php
include 'db.php';
$result = mysql_query("SELECT id FROM chatpoll ORDER BY id DESC LIMIT 1");
while($row = mysql_fetch_array($result))
{
    $old_msg_id = $row['id'];
}
?>
<html>
<head>
    <script src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">

        var old_msg_id = <?php echo $old_msg_id; ?>;

        function waitForMsg(){
            $.ajax({
                type: "GET",
                url: "poll.php?old_msg_id=" + old_msg_id,
                async: true,
                cache: false,

                success: function(data){
                    var json = eval('(' + data + ')');
                    if(json['msg'] != "") {
                        alert("New msg added to base!");
                    }
                    old_msg_id = json['old_msg_id'];
                    setTimeout('waitForMsg()',1000);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown){
                    alert("error: " + textStatus + " (" + errorThrown + ")");
                    setTimeout('waitForMsg()',15000);
                }
            });
        }
        $(document).ready(function(){
            waitForMsg();
        });
        function load(old_msg_id) //part of code which i'm not using yet
        {
            $.get('getmsg.php?last_msg_id='+ old_msg_id, function(data){
                $('#chat').append(data);
            }, 'html');
        }
    </script>
</head>
<body>
    <div id="chat">
    </div>
</body>
</html> 
```

和 poll.php

```
 <?php
include 'db.php';
$old_msg_id = $_GET['old_msg_id'];
$result = mysql_query("SELECT id FROM chatpoll ORDER BY id DESC LIMIT 1");
while($row = mysql_fetch_array($result))
{
    $last_msg_id = $row['id'];
}
while($old_msg_id >= $last_msg_id) {
    usleep(1000);
    clearstatcache();
    $old_msg_id = $last_msg_id;
}
$response = array();
$response['msg'] = 'new';
$response['old_msg_id'] = $old_msg_id;
echo json_encode($response);
?> 
```

它在 index.php 和 poll.php 中都没有显示任何错误，但是当我插入 id 大于 old_msg_id 的数据时，什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:57:04.710

将 poll.php 文件中的代码更改为以下代码：

```
<?php
include 'db.php';
$old_msg_id = $_GET['old_msg_id']; 
$result = mysql_query("SELECT id FROM chatpoll ORDER BY id DESC LIMIT 1");
while($row = mysql_fetch_array($result))
{
    $last_msg_id = $row['id']; 
}
while($last_msg_id <= $old_msg_id)
{
    usleep(1000);
    clearstatcache();
    $result = mysql_query("SELECT id FROM chatpoll ORDER BY id DESC LIMIT 1");
    while($row = mysql_fetch_array($result))
    {
        $last_msg_id = $row['id'];
    }
}
$response = array();
$response['msg'] = 'new';
$response['old_msg_id'] = $last_msg_id;
echo json_encode($response);
?> 
```

# magento - 在主页前添加登录页面 - Magento

> ID：11453424
> 
> 赞同：0
> 
> 时间：2012-07-12T13:56:06.470
> 
> 标签：magento

我想在 Magento 的主页之前添加一个登录页面，但似乎到处都是我看的文档非常模糊或论坛很难理解。我对 Magento 相当陌生，但对编码非常精通。谁能给我一些指示？或引导我朝正确的方向...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:19:53.817

我做过一次。在显示 pre-home.phtml 模板文件之前，我需要验证 cookie。

我创建了一个名为“Pagina”的新模块，并将其设置为 etc/config.xml：

```
<page>

            <layouts>

                <pre_home module="pagina" translate="label">

                        <label>Pre-home</label>

                        <template>page/pre-home.phtml</template>

                        <layout_handle>pre_home</layout_handle>

                </pre_home>

            </layouts>

        </page> 
```

cookie 验证是通过 JavaScript 进行的，因此如果爬虫机器人访问该站点，我们会重定向到正确的页面。在**cms_index_index**节点的 layout/page.xml 中，我们放入：

```
<cms_index_index>
...
        <reference name="after_body_start">

            <block type="page/html_head" after="-" name="index.js.beginning">

                <action method="addItem"><type>skin_js</type><name>js/prehome.js</name></action>

            </block>

        </reference>
...
</cms_index_index> 
```

在 /js/prehome.js 上的 JS 文件中：

```
var c_name = 'city';

if(window.location.toString().indexOf('pre-home') == -1){

    var first_visit = true;

    var i,x,y,ARRcookies=document.cookie.split(";");

    for (i=0;i<ARRcookies.length;i++)

    {

      x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));

      y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);

      x=x.replace(/^\s+|\s+$/g,"");

      if (x==c_name)

        {

         first_visit=false;

        }

    }   

    if(first_visit){
//you must define URL_SITE with site base url
        location.href = URL_SITE + 'pre-home';

    }

}else{

    document.getElementById("sp").onclick = function(){

        var exdate=new Date();

        exdate.setDate(exdate.getDate() + 365);

        var c_value=escape('SP') + "; expires="+exdate.toUTCString();

        document.cookie= c_name + "=" + c_value;

    }

} 
```

请注意，我在与 /default 相同的目录中创建了另一个 escope，名为 /pre-home。所以我们需要另一个句柄**pre_home**布局处理程序，并且一些 JS 在 template/[yourscope]/pre-home 而不是 /default 中。但是 pre-home.phtml 必须位于 /default/template/page/pre-home.phtml 中，如 config.xml 中所述。

基本上我有：

> 应用程序/代码/本地/命名空间/Pagina/etc/config.xml
> 
> 应用程序/设计/前端/mytheme/default/layout/page.xml
> 
> 应用程序/设计/前端/mytheme/default/template/page/pre-home.phtml
> 
> 皮肤/前端/mytheme/default/js/prehome.js

我希望这可以帮助你。

# c# - 如何测试开关，这取决于没有设置器的属性？

> ID：11453427
> 
> 赞同：0
> 
> 时间：2012-07-12T13:56:17.590
> 
> 标签：c#, unit-testing, mocking

例如，我有一个`SomeClass`类，它实现`ISomeInterface`了具有两个属性的接口`Prop1`并且`Prop2`（`Prop1`没有设置器！！！并且`Prop2`依赖于`Prop1`）：

```
public class SomeClass : ISomeInterface
    {
        private readonly NameValueCollection settings = ConfigurationManager.AppSettings;
        private readonly string p1;
        private string p2;

        public string Prop1 { get { return settings["SomeSetting"]; } }
        public string Prop2
        {
            get
            {
                switch(Prop1)
                {
                    case "setting1": return "one";
                    case "setting2": return "two";
                    case "setting3": return "three";
                    default: return "one";
                }
            }
            set { p2 = value; }
        }
    } 
```

我需要为这个类编写单元测试。我建议他们应该看起来像：

```
[TestMethod]
public void Prop2ShouldReturnOneValueIfSomeSettingEqualsSetting1()
{
    var someClass = new SomeClass();
    Assert.Areequals(someClass.Prop2, "one");
}

[TestMethod]
public void Prop2ShouldReturnTwoValueIfSomeSettingEqualsSetting2()
{
    var someClass = new SomeClass();
    Assert.Areequals(someClass.Prop2, "two");
} 
```

所以我的问题是：`How can I force Prop1 return setting1, setting2 etc. if it has no setter?`我无法为字段设置我需要的值，因为它们是私有的。我应该嘲笑`ISomeInterface`还是`ConfigurationManager`？？？`ConfigurationManager`如果是这样，如果它没有接口，我该如何模拟？？？我应该直接模拟`ConfigurationManager`类吗？？？会不会对？？？我也不明白我怎么能嘲笑`ISomeInterface`。我需要测试`prop2`取决于`prop1`. 如果我输入：

```
[TestMethod]
public void Prop2ShouldReturnTwoValueIfSomeSettingEqualsSetting2()
    {
        var moqSettings = new Mock<ISomeInterface>();
        moqSettings.Setup(p => p.Prop1).Returns("setting2");

        ...
    } 
```

它不会改变任何东西，因为`moqSettings.Object.Prop2`将会`null`。而且，我不确定，但我认为这样做是错误的）））`So how can I test all cases in prop2???`

PS为了模拟我使用`Moq`. PPS 对不起我的英语）））我希望我清楚地解释了我需要什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:17:52.607

我认为您的班级有几个职责 - 读取配置，并根据配置设置生成一些值。如果您拆分这些职责，那么您可以模拟您的应用程序设置。创建一些界面，例如`ISomeConfiguration`

```
public interface ISomeConfiguration
{
    string SomeSetting { get; }
} 
```

以这种方式实现它：

```
public class MyConfiguration : ISomeConfiguration
{
    readonly NameValueCollection settings = ConfigurationManager.AppSettings;

    public string SomeSettings
    {
        get { return settings["SomeSetting"]; }
    }
} 
```

并将此接口注入您的`SomeClass`：

```
public class SomeClass : ISomeInterface
{
   private readonly string p1;
   private string p2;
   private ISomeConfiguration config;

   public SomeClass(ISomeConfiguration config)
   {
       this.config = config;
   }

   public string Prop1 { get { return config.SomeSetting; } }
   public string Prop2
   {
       get
       {
          switch(Prop1)
          {
              case "setting1": return "one";
              case "setting2": return "two";
              case "setting3": return "three";
              default: return "one";
          }
       }
       set { p2 = value; }
  } 
```

}

现在您可以毫无问题地模拟您的配置：

```
[TestMethod]
public void Prop2ShouldReturnTwoValueIfSomeSettingEqualsSetting2()
{
    var moqConfig = new Mock<ISomeConfiguration>();
    moqConfig.Setup(p => p.SomeSetting).Returns("setting2");
    var sut = new SomeClass(moqConfig.Object);
    Assert.That(sut.Prop2, Is.EqualTo("two"));
} 
```

# php - 为什么我的查询在 PHP 中很慢而在 PHPMYadmin 中却很快？

> ID：11453428
> 
> 赞同：2
> 
> 时间：2012-07-12T13:56:17.937
> 
> 标签：php, mysql, pdo

以下查询使用索引进行了优化。时间是在 PHP 中执行查询之前和之后精确测量的，有时需要 10 或 20 秒。我似乎并不依赖于行数，因为有时行数少于 10，即使这样查询运行速度也很慢。除了如下所示的查询执行，PHP 不做任何其他操作。

```
SELECT * FROM (
  SELECT o.op AS orid,
  (3959 * acos(cos(radians(59.4369583424862))
  * cos(radians(d.latitude)) * cos( radians( d.longitude) -
  radians(24.7535276412964)) + sin(radians(59.4369583424862))
  * sin( radians( d.latitude ) ) ) ) AS distance
  FROM (
  SELECT * FROM d WHERE
    d.type='rdw' AND d.longitude > 24.4837311595 AND
    d.longitude < 25.0233241231 AND d.latitude > 59.1671618607 AND
    d.latitude < 59.7067548243
  ) AS d
  LEFT JOIN o ON d.destinid = o.destinid
  LEFT JOIN op ON o.operatorid = op.operatorid
  having distance < 30
  ORDER BY distance
) AS t
GROUP BY trajectoperatorid
LIMIT 0, 30 
```

这是查询的执行方式：

```
$stmt = $pdo->prepare($sql1);
$stmt->execute();
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); //foreach($rows as $row){ 
```

在第一次测量之前已经存在与数据集的连接。

当使用 SQL_NO_CACHE 在 phpmyadmin 中运行相同的查询时，它始终只需要 0.06 秒。为什么完全相同的查询在 PHP 脚本中运行时会很慢？

下面是php脚本：

```
write_log_file('Start query'.date('l jS \of F Y h:i:s') . substr((string)microtime(), 1, 8));

$sql1 = "
SELECT * FROM (
  SELECT o.op AS orid,
  (3959 * acos(cos(radians(59.4369583424862))
  * cos(radians(d.latitude)) * cos( radians( d.longitude) -
  radians(24.7535276412964)) + sin(radians(59.4369583424862))
  * sin( radians( d.latitude ) ) ) ) AS distance
  FROM (
  SELECT * FROM d WHERE
    d.type='rdw' AND d.longitude > 24.4837311595 AND
    d.longitude < 25.0233241231 AND d.latitude > 59.1671618607 AND
    d.latitude < 59.7067548243
  ) AS d
  LEFT JOIN o ON d.destinid = o.destinid
  LEFT JOIN op ON o.operatorid = op.operatorid
  having distance < 30
  ORDER BY distance
) AS t
GROUP BY trajectoperatorid
LIMIT 0, 30";

$stmt = $pdo->prepare($sql1);
$stmt->execute();
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:58:39.737

有很多 SQL 需要通读！我建议进入 MySQL 中的[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)命令以跟踪问题，而不是尝试从 PHP 进行分析。

另请查看[使用 EXPLAIN 优化查询](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)。

一旦您了解了数据库内部发生的情况，如果需要，调整 PDO 的使用可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:33:12.967

你有没有把“skip_name_resolve”放在 MySQL 中。10-20 秒对我来说听起来像是 DNS。您是在同一台机器上的 PHPMyAdmin - 连接到本地主机吗？而你的PHP使用IP连接？

# mysql - MySQL将列表中的任何值与另一个列表中的任何值匹配

> ID：11453429
> 
> 赞同：0
> 
> 时间：2012-07-12T13:56:21.323
> 
> 标签：mysql, filter, subquery

我有大量代码可以根据某个字段是否出现在列表中来“过滤”一些记录。

目前`SELCT * FROM table1 ... AND value IN (8, 6, 4, 2, 9, 1, 3, 5, 7) ...`

使用 table1 结构：

```
CREATE TABLE IF NOT EXISTS `table1` (
    `uniqueid` varchar(32) NOT NULL,
    `value` int(11) DEFAULT NULL,
    ...
    PRIMARY KEY (`uniqueid`)
) 
```

现在我必须存储`value`在一个单独的表中，并且表中可能有多个“值”。

新的 table1 结构：

```
CREATE TABLE IF NOT EXISTS `table1` (
    `uniqueid` varchar(32) NOT NULL,
    ...
    PRIMARY KEY (`uniqueid`)
) 
```

新的 table2 结构

```
CREATE TABLE IF NOT EXISTS `table2` (
    `id` int(11) NOT NULL,
    `uniqueid` varchar(32) NOT NULL,
    `value` int(11) DEFAULT NULL,
    ...
    PRIMARY KEY (`id`)
) 
```

你明白了！

我的问题是如何检查 table2 中的任何记录`uniqueid`是否在第一个示例中给出的列表中。

我考虑过使用某种`COUNT`子查询，但我不确定。我试过了：

```
SELECT * FROM table1, table2 
            WHERE table1.uniqueid = table2.uniqueid 
            AND (SELECT COUNT(id) FROM table1, table2 
                       WHERE table2.uniqueid = table1.uniqueid ) > 0 
            AND table2.value IN (8, 6, ... 
```

但它不起作用，我不太喜欢这种方法，感觉很乱。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:59:29.640

If you wanted to find those values that exist in 2 tables, implement an `INNER JOIN`.

```
 SELECT UniqueID
   FROM Table1 t1
   INNER JOIN Table2 t2 
     ON t1.UniqueID = t2.UniqueID
   WHERE (YourCritiera); 
```

# parsing - 更改 antlr 词法分析器以支持“and”和“or”关键字

> ID：11453432
> 
> 赞同：3
> 
> 时间：2012-07-12T13:56:24.427
> 
> 标签：parsing, antlr, lexer

我正在使用 ANTLR 创建词法分析器/解析器。表达式可以有这样的格式

```
if(a==1 || b==2 or c==3 && d==4 and e==5) 
```

我有支持 && 和 || 的语法 像这样 -

```
AND :   '&&'
OR  :   '||' 
```

需要知道支持关键字“and”和“or”需要进行哪些更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:01:24.990

`AND`只需在and的定义中列出“and”和“or”作为替代项`OR`

```
AND : '&&' | 'and'
OR  : '||' | 'or' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T14:02:53.803

只需在现有运算符之后添加它们作为替代：

```
AND : '&&' | 'and';
OR  : '||' | 'or'; 
```

确保将这两个规则添加到`IDENTIFIER`可能匹配`"and"`的可能规则之上`"or"`。通过将它们添加到 之上`IDENTIFIER`，规则`AND`并`OR`获得优先权`IDENTIFIER`。

# php - WordPress JetPack stats with non-WordPress site

> ID：11453433
> 
> 赞同：0
> 
> 时间：2012-07-12T13:56:24.707
> 
> 标签：php, wordpress, statistics

I have a number of WordPress sites and have become accustomed to the way in which it presents detailed statistics. Is it possible to utilise those statistics for a non-WordPress powered site?

I am developing a custom site using PHP but would absolutely love to use the same statistics system!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:32:42.957

不，这是不可能的。Jetpack 将您的 WP 网站与 wordpress 云挂钩。如果你有知识，你可以创造类似的东西

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T13:21:15.667

尝试使用新的 Wordpress Jetpack 插件获取详细的统计信息，例如 wordpress.com、宣传功能等等！[http://wordpress.org/extend/plugins/jetpack/](http://wordpress.org/extend/plugins/jetpack/)

只需拥有一个 wordpress.com 帐户并允许您网站中的 jetpack 插件连接到您的 wordpress 帐户。

它支持非 wordpress.com 网站，但不支持一般的 php 网站。

# opencv - How to get started with OpenCV 2.4.2 in ubuntu 10.4?

> ID：11453434
> 
> 赞同：4
> 
> 时间：2012-07-12T13:56:31.147
> 
> 标签：opencv, build, build-process, ubuntu-10.04

I am trying to install latest OpenCV version 2.4.2 on a linux (ubuntu 10.4) PC.

I downloaded the tar ball. Un-tar-ed it. And followed [install opencv in ubuntu 10.04](http://helpforlinux.blogspot.in/2010/07/install-opencv-in-ubuntu-1004.html).

While 'Make' I got error after "**`Linking CXX executable ../../bin/opencv_perf_core`**" comes in red color here; after millions of warning or error msgs it shows as follows:

```
... ... ...
../../lib/libopencv_ts.so.2.4.2: undefined reference to `std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >::~basic_string()'
../../lib/libopencv_ts.so.2.4.2: undefined reference to `typeinfo for int'
collect2: error: ld returned 1 exit status
make[2]: *** [bin/opencv_perf_core] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_perf_core.dir/all] Error 2
make: *** [all] Error 2 
```

Keyword: "Linking CXX executable ../../bin/opencv_perf_core" with quotes.

I googled for it and found that the PC needs CUDA driver. For now I don't need that perhaps.

Does that driver installation required here or I can bypass that particular 'make' process?

My aim is to get started with OpenCV as soon as possible in ubuntu. Does these build processes required for compiling own cpp file using openCV 2.4.2 libraries? I am not concentrating on static or non static libraries.

Has anyone worked on for ubuntu as just like on windows I install OpenCV and get started just by setting path to the include file and keeping .dlls with the custom executable file, say for capturing images from a camera.

<=== Update ===>

Followed [http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html](http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html).

It passed the Linking CXX executable ../../bin/opencv_perf_core.

now it stucks at **`Linking CXX executable ../../bin/opencv_perf_highgui`** with following errors:

```
/usr/bin/ld: ../../lib/libopencv_highgui.a(cap_libv4l.cpp.o): undefined reference to symbol 'v4l2_close'
/usr/bin/ld: note: 'v4l2_close' is defined in DSO /usr/lib/libv4l2.so.0 so try adding it to the linker command line
/usr/lib/libv4l2.so.0: could not read symbols: Invalid operation
collect2: error: ld returned 1 exit status
make[2]: *** [bin/opencv_perf_highgui] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_perf_highgui.dir/all] Error 2
make: *** [all] Error 2 
```

Seems the **cmake** parameters has to be studied well. Any shortcut will be helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:15:45.897

我已经安装了 OpenCV 2.4.2 并编写了一个脚本来安装它。你可以在这里找到它[https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_2.sh](https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_2.sh)

或者查看我的博客文章以获得更详细的说明。[http://jayrambhia.wordpress.com/2012/06/20/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/](http://jayrambhia.wordpress.com/2012/06/20/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/)

```
echo "Installing OpenCV 2.4.2"
mkdir OpenCV
cd OpenCV
echo "Removing any pre-installed ffmpeg and x264"
sudo apt-get remove remove ffmpeg x264 libx264-dev
echo "Installing Dependenices"
sudo apt-get install libopencv-dev
sudo apt-get install build-essential checkinstall cmake pkg-config yasm
sudo apt-get install libtiff4-dev libjpeg-dev libjasper-dev
sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev
sudo apt-get install python-dev python-numpy
sudo apt-get install libtbb-dev
sudo apt-get install libqt4-dev libgtk2.0-dev
echo "Downloading ffmpeg"
wget http://ffmpeg.org/releases/ffmpeg-0.11.1.tar.bz2
echo "Installing ffmpeg"
tar -xvf ffmpeg-0.11.1.tar.bz2
cd ffmpeg-0.11.1/
./configure --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab
make
sudo make install
cd ..
echo "Downloading v4l"
wget http://www.linuxtv.org/downloads/v4l-utils/v4l-utils-0.8.8.tar.bz2
echo "Installing v4l"
tar -xvf v4l-utils-0.8.8.tar.bz2
cd v4l-utils-0.8.8/
make
sudo make install
cd ..
echo "Downloading OpenCV 2.4.2"
wget -O OpenCV-2.4.2.tar.bz2 http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.2/OpenCV-2.4.2.tar.bz2/download
echo "Installing OpenCV 2.4.2"
tar -xvf OpenCV-2.4.2.tar.bz2
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE ..
make
sudo make install
sudo echo “/usr/local/lib” >> /etc/ld.so.conf
sudo ldconfig
echo "OpenCV 2.4.2 ready to be used" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:05:27.490

I'm not convinced that problem is related to CUDA, but you can disable it when configuring cmake, passing `WITH_CUDA=OFF`:

```
cd OpenCV-2.4.2
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_EXAMPLES=ON -D WITH_CUDA=OFF ..
make 
sudo make install 
```

Another interesting flag for you might be `BUILD_PYTHON_SUPPORT=ON`

**EDIT**:

[Apparently OpenCV 2.4.2 needs to use a more recent CMake](https://stackoverflow.com/a/11470336/176769), so go ahead and install CMake 2.8.8 in your system.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:26:33.153

我通过在使用 cmake-gui 生成 UNIX makefile 后转到 CMakeCache.txt 来解决这个问题，在您设置为构建二进制文件的目录中，并将路径添加`libcuda.so`到这一行`CUDA_CUDA_LIBRARY:FILEPATH=`，所以在我的情况下，我最终得到`CUDA_CUDA_LIBRARY:FILEPATH=/usr/lib/nvidia-current-updates/libcuda.so`

如果您不打算使用 CUDA 工具包，您可以在使用 CUDA=off 制作 opencv 时禁用此设置

# css - Add css style sheet to app_offline

> ID：11453437
> 
> 赞同：12
> 
> 时间：2012-07-12T13:56:47.067
> 
> 标签：css, asp.net-mvc, app-offline.htm

Well, I'm trying to make custom app_offline.htm and want to add links to my css files in project. But next code doesn't work

```
<link href="/Content/Themes/screen.css" rel="stylesheet" type="text/css" /> 
```

In console I've got error

> GET mySite/Content/Themes/screen.css 503 (Service Unavailable)

Please, give me advise how to make a link to css file in app_ofline.htm. Any help will greatly appriciated!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T14:05:36.383

app_offline.htm 的想法是它表明应用程序处于离线状态。因此，当站点处于脱机状态时，站点中没有可用的资源。要么将相关规则放入页面，要么将样式表托管在单独的域中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T14:02:02.900

您必须为此使用内联 CSS 样式，而不是引用外部 CSS 文件。

```
<style type="text/css">
    /* write your css code here */

</style> 
```

**App_Offline.htm**

基本上，如果您将具有此名称的文件放在 Web 应用程序目录的根目录中，ASP.NET 将关闭应用程序，从服务器卸载应用程序域，并**停止处理该应用程序的任何新传入请求。** 然后，ASP.NET 还将通过发回 app_offline.htm 文件的内容来响应应用程序中对动态页面的所有请求（例如：您可能想要“站点正在建设”或“停机维护”消息） .

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T19:58:19.427

您可以在 img 标签中将其添加为 base64 ......像这样：

`<img src="data:image/png;base64,<64-bit string goes here> alt=""/>`

这至少适用于表示该站点正在建设中的图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T14:04:34.873

你不能链接到它。它离线了。除非您使用可以保证将在正常运行的服务器中的远程 css 文件，否则将不允许提供 css 文件，因为 .Net Framework 限制已到位以禁止提供除 app_offline 之外的任何文件。 .htm。您可以将 css 与页面内联，也可以将其托管在单独的站点上（这是一些公司为了将设计元素保留在企业应用程序的公共位置而做出的选择）。

# java - Custom tree cell editing in a SwingX JXTreeTable

> ID：11453453
> 
> 赞同：2
> 
> 时间：2012-07-12T13:57:43.707
> 
> 标签：java, swingx, jxtreetable

I'm trying to set a custom tree cell editor for the tree column of a `JXTreeTable`, but for some reason, my editor is never called.

Here's the bit that is supposed to set the editor:

`dataTable.setDefaultEditor(DataEntity.class, new NumberedListEditor(hierarchyRelation));`

My implementation of `getColumnClass()` returns `DataEntity.class` and I overrode `isCellEditable()` in my model to always return `true`.

What else could be the problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-06T10:27:04.817

setDefaultEditor() 对我有用：

```
tbl_attribute.setDefaultEditor(String.class, new FeatureSearchAttributeTreeCellEditor()); 
```

# objective-c - 目标c中的重复符号错误

> ID：11453455
> 
> 赞同：0
> 
> 时间：2012-07-12T13:57:46.837
> 
> 标签：objective-c, compiler-construction, linker

我的 Objective-C 应用程序中需要一些全局变量。为此，我创建了 Globals 类（继承 NSObject）并将只读属性放入其中。我还声明了一些常量，如下所示：

```
imports, etc.
.
.
.
#ifndef GLOBALS_H
#define GLOBALS_H

const int DIFFICULTY_CUSTOM = -1;
const int other_constants ...
#endif
.
.
.
interface, etc. 
```

但是当我尝试编译它时，我得到链接器错误：“重复符号 DIFFICULTY_CUSTOM”。为什么会发生这种情况， ifndef 应该防止它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:02:28.613

问题是`const int DIFFICULTY_CUSTOM = -1;`分配该名称的 int 是在您为其包含标头的每个目标文件中。
您应该只`extern const int DIFFICULTY_CUSTOM;`在每个标题中都有声明。然后应`const int DIFFICULTY_CUSTOM = -1;`在一个目标文件（即 .m 或 .c ）中定义实际值。

在这种情况下，我将只使用#define 来设置值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:05:49.147

这是我的做法：

在`constants.m`：

```
const int DIFFICULTY_CUSTOM = -1; 
```

在`constants.h`：

```
extern const int DIFFICULTY_CUSTOM; 
```

并在`.pch`文件中：

```
#import "constants.h" 
```

# javascript - 在 Underscore.js/Backbone.js 模板中使用 IF 语句

> ID：11453458
> 
> 赞同：3
> 
> 时间：2012-07-12T13:58:01.673
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我收到一个 JSON 对象，其中一个值为`null`. JSON 看起来像：

```
[{"id":"1096","price":null, 
```

现在，它正在`NULL`使用以下代码向网页输出一个字符串。*（我在 Backbone.js/Underscore.js 中使用模板引擎）*

```
<div class="subtitle">$<%= price %></div> 
```

因为我想隐藏整个`div`如果没有`price`返回，我添加了`if`语句：

```
<% if (price) { %>
    <div class="subtitle">$<%= price %></div>
<% } %> 
```

但是它似乎仍然输出`div.subtitle`. 我究竟做错了什么？我也尝试了以下但他们没有工作

```
<% if (typeof(price) != "undefined") { %>
    <div class="subtitle">$<%= price %></div>
<% } %>

<% if (price != null) { %>
    <div class="subtitle">$<%= price %></div>
<% } %>

<% if (price != "null") { %>
    <div class="subtitle">$<%= price %></div>
<% } %> 
```

**`if`我怀疑这与在 Underscore.js 的模板中使用语句有关**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:04:56.987

呃，你不想要（没有感叹号）

```
<% if (price) { %>
    <div class="subtitle">$<%= price %></div>
<% } %> 
```

因为你现在说如果没有价格然后显示价格......这是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:01:08.417

`null`不是`undefined`！

如果您的 json-object 被正确解码，那么检查`(price)`or`(price != null)`应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:10:18.420

不应该是`==`（在这种情况下`!==`）进行比较吗

```
<% if (price !== null) { %>
    <div class="subtitle">$<%= price %></div>
<% } %> 
```

例如查看这[条 Jsbin.com](http://jsbin.com/exojox/edit#javascript,html)行的警告

# jquery - jquery dialog not opened after a page load using load function

> ID：11453459
> 
> 赞同：0
> 
> 时间：2012-07-12T13:58:02.440
> 
> 标签：jquery, jquery-ui

I am loading a page using load function the dialog is not open but when i refresh a page the dialog is worked. The alert is working using load(). Any suggestions?

```
jQuery( "#edit-address-map" ).live('click', function(){
            alert('in');
            jQuery( "#edit-address-map-div" ).dialog({ 
                modal: true,
                height:370,
                width:350,
                resizable: true,
                draggable: false,
                dialogClass: "flora",
                close: function(ev, ui) { jQuery(this).dialog('destroy'); }

             });    

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:18:37.700

`edit-address-map-div`当您单击`edit-address-map`元素时，您似乎正在尝试打开对话框。正确的？

```
$(function() {

    jQuery( "#edit-address-map" ).live('click', function(){
        alert('in'); 
        $('#edit-address-map-div').dialog("open"); // raise the open event on click
    });

    // wire up the dialog properties when the DOM loads
    jQuery( "#edit-address-map-div" ).dialog({ 
        autoOpen: false, // so it won't open when the page loads
        modal: true,
        height:370,
        width:350,
        resizable: true,
        draggable: false,
        dialogClass: "flora",
        close: function(ev, ui) { jQuery(this).dialog('destroy'); }
    });   
}); 
```

# amazon-web-services - 自动使用 Amazon AWS 扩展的最佳模型是什么？

> ID：11453461
> 
> 赞同：0
> 
> 时间：2012-07-12T13:58:03.237
> 
> 标签：amazon-web-services, autoscaling

也就是说，通过添加新实例或升级实例类型，我有两个模型。那么，哪个更可取，在什么情况下应该使用哪个模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:43:04.967

您的问题类似于[垂直与水平可扩展性概念](http://en.wikipedia.org/wiki/Scalability#Scale_horizontally_vs._vertically)。这是一种权衡，最好的方法通常是两者的混合，主要取决于系统的性质。

# php - PHP数组删除字符并只保留数字

> ID：11453464
> 
> 赞同：3
> 
> 时间：2012-07-12T13:58:09.373
> 
> 标签：php, arrays

查找代码可以从数组中删除字符并仅显示数字。

```
array( 
    1=>123456 hello; / &, 
    2=>128767 ^% * ! ajsdb, 
    3=>765678 </ hello echo., 
); 
```

我想从数组中删除流

```
hello; / &
^% * ! ajsdb
</ hello echo. 
```

并希望保持原状

```
array( 
    1=>123456, 
    2=>128767, 
    3=>765678, 
); 
```

谢谢和亲切的问候，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T14:01:07.190

您想使用 preg_replace 将所有非数字字符替换为 ''

```
$arr = array(
    1 => "1234 perr & *",
    2 => "3456 hsdsd 3434"
);

foreach($arr as &$item) {
    $item = preg_replace('/\D/', '', $item);
}

var_dump($arr); 
```

结果是

```
array(2) { [1]=> string(4) "1234" [2]=> &string(8) "34563434" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:05:57.370

做一个 for 语句来获取你的数组的值，然后试试这个：

```
 foreach($arr as $value){
        $cleansedstring = remove_non_numeric($value);
        echo $cleansedstring;
    }

function remove_non_numeric($string) {
return preg_replace('/\D/', '', $string)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T14:11:01.050

```
<?php

// Set array
$array = array( 
    1 => "123456 hello; / &", 
    2 => "128767 ^% * ! ajsdb", 
    3 => "765678 </ hello echo.",
);

// Loop through $array
foreach($array as $key => $item){
    // Set $array[$key] to value of $item with non-numeric values removed
    // (Setting $item will not change $array, so $array[$key] is set instead)
    $array[$key] = preg_replace('/[^0-9]+/', '', $item);
}

// Check results
print_r($array);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-06T14:15:35.057

```
function number_only($str){
    $slength = strlen($str);
    $returnVal = null;
    for($i=0;$i<$slength;$i++){
        if(is_numeric($str[$i])){
            $returnVal .=$str[$i];
        }
    }
    return $returnVal;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T14:00:14.067

你应该`preg_replace`使用`[0-9]+`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T14:03:05.270

像这样

```
$values = array(
    1=>"123456 hello; / &",
    2=>"128767 ^% * ! ajsdb",
    3=>"765678 </ hello echo",
);

$number_values = array();
foreach($values as $value) {
    $pieces = explode(' ', $value);
    $numbers = array_filter($pieces, function($value) {
        return is_numeric($value);
    });

    if(count($numbers) > 0)
    {
        $number_values[] = current($numbers);
    }
}

print_r($number_values); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T14:03:25.703

我建议你看看 intval 方法 (http://php.net/manual/en/function.intval.php) 和 foreach 循环 (http://php.net/manual/en/control-结构.foreach.php）。

结合这两个功能，您将能够从非数字字符中清除所有元素，

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-27T14:33:20.800

为什么不`array_walk()`呢？[http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php)

```
$arr = array(
    1 => "1234 perr & *",
    2 => "3456 hsdsd 3434"
);

array_walk($arr, function(&$item) { 
    $item = preg_replace('/\D/', '', $item);
});

print_r($arr); 
```

结果：

```
Array
(
    [1] => 1234
    [2] => 34563434
) 
```

在线查看： [http ://sandbox.onlinephpfunctions.com/code/d63d07e58f9ed6984f96eb0075955c7b36509f81](http://sandbox.onlinephpfunctions.com/code/d63d07e58f9ed6984f96eb0075955c7b36509f81)

# javascript - 设置 Jquery 对话框标题栏样式

> ID：11453466
> 
> 赞同：4
> 
> 时间：2012-07-12T13:58:16.790
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-dialog

我希望我的一些 jquery 对话框（不是全部）具有不同的标题栏颜色。我怎样才能做到这一点？我在所需的对话框中使用了属性 dialogClass:"myClass" 但这不会更改标题栏，只会更改对话框正文。

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T14:06:28.493

指定 a`dialogClass`会将此类添加到`div`包含标题栏在内的整个对话框的最外层，因此您只需确保您的 CSS 规则针对的是正确的元素。例如：

```
.myDialogClass .ui-widget-header {
  background: purple;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-22T23:13:48.717

```
div.ui-widget-header {
  border: 1px solid #3b678e;
  background: #3b678e url("images/ui-bg_gloss-wave_35_3b678e_500x100.png") 50% 50% repeat-x;
  color: #ffffff;
  font-weight: bold;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T14:10:54.340

你可以这样做：

```
 div#myDialog .ui-dialog-titlebar {
      background-color: red;
   } 
```

这`.ui-dialog-titlebar`就是您希望将您的样式应用到的内容。

# c++ - Write to Directshow source filter

> ID：11453468
> 
> 赞同：-1
> 
> 时间：2012-07-12T13:58:23.317
> 
> 标签：c++, c, visual-c++, opencv, directshow

I have got a directshow source filter which is based on [http://tmhare.mvps.org/downloads/vcam.zip](http://tmhare.mvps.org/downloads/vcam.zip). I want to write the webcam frames that has been manipulated using opencv by my (separate) application, to this virtual webcam (Directshow filter). How can I do this?

Any helpful code snippets please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:48:52.160

在 Directshow 中操作帧的一个好习惯是在源过滤器之后添加 SampleGrabber 过滤器。[看](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407288%28v=vs.85%29.aspx)

SampleGrabber 的目的是操纵帧。

# jquery - 如何为添加的每个选项卡添加删除按钮

> ID：11453476
> 
> 赞同：0
> 
> 时间：2012-07-12T13:58:43.020
> 
> 标签：jquery, jquery-ui, tabs

嗨，我需要为添加的每个选项卡添加一个删除按钮：

```
var count = 1;
    $('#addspan').click(function() {
                $('#wrap').show();
                count = $('#wrap').tabs("length") + 1;
                $('#wrap').append('contents');
                $('#wrap').tabs("add", "#page" + count, count);

            }); 
```

上面的代码动态添加选项卡，但我想为每个动态添加的选项卡添加一个**删除按钮**。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:39:44.560

这非常棘手，但我能够设置一个小提琴来使其工作（http://jsfiddle.net/qJNZr/19/）。相关的javascript如下：

```
$(document).ready(function(){
    $('#tabs').tabs();
    var count = $('#tabs').tabs('length') + 1;
    $('#add').click(function(e){
        e.preventDefault();
        $('#tabs').tabs('add', '#page' + count, count);
        $('#page' + count).append($('<a>remove</a>').addClass('remove').attr('href', '#'));
        count = count+1;
    });
    $(document).on('click', 'a.remove', function(e, ui){
        e.preventDefault();
        $('#tabs').tabs('remove', '#' + $(this).parents('div').attr('id'));
    });
});
​ 
```

所以基本上我在新添加的选项卡上添加了一个删除链接。实时事件处理程序会查找该链接并删除它所在的选项卡。

# pyqt4 - Global hotkey in PyKDE4 or PyQT4

> ID：11453477
> 
> 赞同：2
> 
> 时间：2012-07-12T13:58:45.037
> 
> 标签：pyqt4, pykde

How do set a global (system wide) keyboard shortcut, i.e. a shortcut that can be activated when any windows are in focus?

I'm implementing a window switcher and need to bind a keystroke to some some function.

I can see that KGlobalAccel might be useful, but a concrete example would be great. I'm not worried about blatting any current systemwide global hotkeys.

# android - overridePendingTransition not working on android 2.3.5

> ID：11453479
> 
> 赞同：1
> 
> 时间：2012-07-12T13:58:51.447
> 
> 标签：android, animation, android-activity

This code of mine is not working... I have checked all the links on this site and also tried animation listener but still its not working.

```
public class SplashScreenPage extends Activity implements Runnable{

Thread splash;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_screen_page_layout);

    splash = new Thread(this);
    splash.start();
}

@SuppressWarnings("static-access")
@Override
public void run() {
    try {
        splash.sleep(3000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    Intent intent = new Intent(SplashScreenPage.this,LoginPage.class);
     startActivity(intent);
     finish();
     SplashScreenPage.this.overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);
}

@Override
protected void onPause() {
    overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);
    super.onPause();

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-30T21:32:13.237

问题在于您设备的默认设置。转到设置>显示>动画>允许“所有动画”。这将允许 overridePendingTransition 正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:54:10.960

我看到的问题是您在主线程的不同线程中使用动画。该主线程也称为 UI 线程。所以，你需要回到那个 UI 线程。这应该有效（我使用 overridePendingTransition(0, 0) 删除任何动画，您可以尝试其他动画：

```
public class SplashActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_splash);

        presentLogo();
    }

    /** Called to present the Splash image for an amount of time */
    private void presentLogo() {
        final SplashActivity splashActivity = this;
            new Thread() {
                public void run() {
                    synchronized (splashActivity) {
                        try {
                            sleep(Constants.SPLASH_PRESENTATION_DURATION);
                        } catch (InterruptedException e) {
                        } finally {
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    finish();
                                    overridePendingTransition(0, 0);

                                    // After splash, go to the new activity
                                    Intent intent = new Intent();
                                    intent.setClass(splashActivity, LoginActivity.class);
                                    startActivity(intent);
                                }
                         });
                     }
                 }
             }
         }.start();
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:06:39.327

尝试这个：

```
Intent intent = new Intent(SplashScreenPage.this,LoginPage.class);
 startActivity(intent);
 finish();
overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_right); 
```

# php - Why isn't a .post and .html call able to compare in an if(condition) in jQuery?

> ID：11453483
> 
> 赞同：-4
> 
> 时间：2012-07-12T13:59:08.933
> 
> 标签：php, jquery, ajax

The following script has been created to test if the value of a db field has changed and if so then reload the page and if not, alert the user that the change has not happened.

The alert is just to see what is being returned by the .post function.

The auto_refresh works fine as i need it to check every 5 seconds, when the if() condition is set to '==' the page alert shows and if it is set to '!=' the page continually reloads.

jQuery.post is getting the db field data but it doesn't seem to be able to compare the 2 values correctly.

any help would be greatly appreciated, thanks

```
var auto_refresh = setInterval(function(){
    $.post("/index.php/listen", function(data) {
          if($('#slide').html() != data)
            {
               window.location.reload()
            }
            else
            {
               alert('its the same'+ data);
            }
          });
    }, 5000); 
```

EDITED

Rather than trying to parse raw data, why not pass HTML from the $.post() like:

```
<p>4</p> 
```

Then the jQuery inserts the the replaces the p tag with the new version from the $.post() because the html is passed on there is no white space and the comparison can be made correctly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:13:50.593

您正在比较两个 html 字符串：一个是从 DOM 序列化的，另一个是来自服务器响应的。

不能保证这两个字符串**永远**相同！想一想：同一个渲染的 html 可以有很多字符串差异。例如`<a href="/file"> click </a>`和`<a href="http://example.org/file">click</a>`都是相同的 HTML，但不同的字符串。

您可以在这里采取两种不同的方法：

1.  您可以创建某种规范化例程，以保证您认为“相同”的两个 html 片段将具有相同的字符串形式。通过此例程运行两个 html 片段，然后进行比较。
2.  您可以更明确地管理版本。
    1.  包括某种版本指示器：
        1.  您可以使用`ETAG`标头（这意味着您可以利用 http 缓存机制）。
        2.  您可以在 html 本身中包含某种版本号（可能在`data-version`属性中），然后进行比较。
    2.  您可以将 html 字符串与您的服务器分开保存并与之进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:06:06.473

我认为将新值与 html 进行比较不是很安全。某些浏览器可能会添加空格或不需要的字符。我会尝试将旧值保存在隐藏类型的输入中，并`.val()`在变量中使用 or，事件更好。这取决于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:11:06.003

如果 $('#slide').html() == 数据

那么这意味着条件失败，它不相等，所以它显示了警报。

问题是 data 变量可能会带有一些额外的空格。如果我是你，我会尝试解析一小部分数据变量，以及滑块中的一小部分 html 并比较这些值。

就像滑块在 ap 标签或输入值中有内容一样，将其与数据进行比较以查看它是否在该 p 标签或输入值中返回相同的值，然后将所有空格替换为空字符串以确保安全。

顺便说一句，尽量不要使用警报，因为您无法确定是否有额外的空格。如果在 Visual Studio 中使用 IE，请尝试使用“调试器”之类的东西，或者在使用 chrome 或 firefox 时尝试使用 console.log。

# php - XAMPP 和 file_get_contents("https://...")

> ID：11453487
> 
> 赞同：2
> 
> 时间：2012-07-12T13:59:18.483
> 
> 标签：php, xampp

我尝试在 xampp 上运行下一个代码：

```
$url2="https://....";
$content=file_get_contents($url2); 
```

这就是我遇到的错误：

```
Warning: file_get_contents() [function.file-get-contents]: Unable to find the wrapper "https" - did you forget to enable it when you configured PHP? in C:\xampp\htdocs\whoTalk\sys\user.php on line 38 
```

为了能够获取 https:// 包装器的 url 的内容，我需要做什么？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T14:03:29.280

在您的 php.ini 中搜索以下内容：

`extension=php_openssl.dll`

如果它在那里并发表了评论，请取消评论。如果它不存在，请添加它:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T14:39:20.113

在 WAMP 中我添加了

```
allow_url_include = On
extension=php_openssl.dll
extension=php_curl.dll 
```

对于我能找到的所有 3 个 php.ini 文件，即

```
\wamp\bin\php\php5.4.12\php.ini
\wamp\bin\php\php5.4.12\phpForApache.ini
\wamp\bin\apache\Apache2.4.4\bin\php.ini 
```

我不知道实际需要哪个 .ini 文件的具体设置，但现在接受 https....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:03:13.667

您需要在 XAMPP 中启用 PHP 的 OpenSSL 扩展才能从安全服务器中获取任何内容。

# android - 软键盘显示时如何防止调整窗口大小和重新布局

> ID：11453489
> 
> 赞同：6
> 
> 时间：2012-07-12T13:59:23.257
> 
> 标签：android, keyboard, resize

我在活动中显示了一个编辑对话框，当软键盘显示时，活动的窗口将被调整为太小，看起来很糟糕。`I don't want the window of the activity be resized and layout. I just want the keyboard can cover on the activity window and the dialog move to the top so that soft keyboard have room to show.`

我尝试在清单中使用**android:windowSoftInputMode="xxxxx"**，但没有一种模式适合我的情况。我也发现了类似的[问题](https://stackoverflow.com/questions/5180789/android-how-to-prevent-resizing-the-window-when-displaying-the-virtual-keyboar)，但它并没有解决我的问题。

**编辑：**我已经尝试过`setImeOptions`，`getWindown().setFlags`但它仍然没有奏效，任何建议将不胜感激。

**EDIT2：**我在 3.0 中尝试过，并使用 android:windowSoftInputMode="adjustNothing"，效果很好，但是如何在 2.3 上实现呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T14:42:07.340

在 AndroidManifest.xml 中为您的 Activity 添加此属性：

```
android:configChanges="orientation|keyboardHidden|screenSize"
android:windowSoftInputMode="stateUnchanged|adjustPan" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:26:23.933

我找到了避免问题的方法，但只是避免，仍然想知道android 2.3中的解决方案。

之前，我从上到下对 XML 中的控件进行布局，如下所示：

```
<ToolBar android:id="@+id/blabla"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_alignParentBottom="true" /> 
```

所以在显示键盘的时候，Activity的窗口是resize的，所以ToolBar被推了，看起来不太好。

现在，我从顶部开始布局控件，通过窗口仍然调整大小，但工具栏和其他控件不会被推送，它们只是在窗口外布局，当软键盘显示时。

# jsf-2 - 向子组件公开复合组件属性

> ID：11453493
> 
> 赞同：0
> 
> 时间：2012-07-12T13:59:31.060
> 
> 标签：jsf-2, attributes, myfaces, composite-component

我有必要使用延迟加载在数据表中加载一些数据。不幸的是，primefaces dataTable 只支持分页延迟加载，但这对这个项目来说是不可接受的，所以我创建并测试了一些机制来允许使用滚动在数据表中延迟加载（primefaces 的 liveScroll 不是延迟加载）。现在我需要将这些机制移动到一个复合组件中，所以我决定包装 primefaces dataTable：

```
<ui:component xmlns="http://www.w3.org/1999/xhtml"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:c="http://java.sun.com/jsf/composite"
          xmlns:p="http://primefaces.prime.com.tr/ui">

<c:interface>
    <c:attribute name="var" required="true" targets="tabela"/>
    <c:attribute name="value" required="true" targets="tabela" type="java.util.List"/>
    <c:attribute name="scrollable" targets="tabela"/>
    <c:attribute name="liveScroll" required="false" default="false"/>
    <c:attribute name="height" targets="tabela"/>
    <c:attribute name="emptyMessage" targets="tabela" default="Nenhuma dado a ser exibido"/>
    <c:attribute name="rows" targets="tabela"/>
    <c:attribute name="action" method-signature="void method()" required="false"/>

</c:interface>

<c:implementation>
    <div id="#{cc.clientId}">
        <p:dataTable id="tabela" var="#{cc.attrs.var}" value="#{cc.attrs.value}"
                     scrollable="#{scrollable}" height="#{cc.attrs.height}"
                     emptyMessage="#{cc.attrs.emptyMessage}" rows="10">
            <c:insertChildren/>
        </p:dataTable>
        <p:remoteCommand name="comandoAtualizarTabela" action="#{cc.attrs.action}" update="tabela" process="@none"/>
        <script type="text/javascript">
            if ("#{cc.attrs.liveScroll}") {
                var idEscapadoPainelLista = PrimeFaces.escapeClientId("#{cc.clientId}");
                jQuery(idEscapadoPainelLista).find(".ui-datatable-scrollable-body").scroll(function () {
                    if ((this.scrollTop == this.scrollHeight - this.clientHeight))
                        comandoAtualizarTabela();
                });
            }
        </script>
    </div>
</c:implementation>
</ui:component> 
```

当我尝试使用此组件时，导致此异常的行中未显示任何数据：

```
[#|2012-07-12T09:34:10.010-0300|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=21;_ThreadName=Thread-10;|org.apache.myfaces.view.facelets.el.ContextAwarePropertyNotFoundException: javax.el.PropertyNotFoundException: Target Unreachable, identifier 'bean' resolved to null
at org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.getType(ContextAwareTagValueExpression.java:79)
at org.primefaces.component.inputtext.InputTextRenderer.getConvertedValue(InputTextRenderer.java:113)
at javax.faces.component.UIInput.getConvertedValue(UIInput.java:647)
at javax.faces.component.UIInput.validate(UIInput.java:583)
at javax.faces.component.UIInput.processValidators(UIInput.java:273)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1317)
at javax.faces.component.UIData.process(UIData.java:1919)
at javax.faces.component.UIData.processColumnChildren(UIData.java:1904)
at javax.faces.component.UIData.processValidators(UIData.java:1761)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1317)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1317)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIForm.processValidators(UIForm.java:209)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1324)
at javax.faces.component.UIViewRoot._processValidatorsDefault(UIViewRoot.java:1350)
at javax.faces.component.UIViewRoot.access$500(UIViewRoot.java:74)
at javax.faces.component.UIViewRoot$ProcessValidatorPhaseProcessor.process(UIViewRoot.java:1443)
at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1306)
at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:793)
at org.apache.myfaces.lifecycle.ProcessValidationsExecutor.execute(ProcessValidationsExecutor.java:38)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at fr.xebia.servlet.filter.ExpiresFilter.doFilter(ExpiresFilter.java:1243)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.gr|#]
[#|2012-07-12T09:34:10.011-0300|SEVERE|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=21;_ThreadName=Thread-10;|izzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.el.PropertyNotFoundException: Target Unreachable, identifier 'bean' resolved to null
at com.sun.el.parser.AstValue.getTarget(AstValue.java:131)
at com.sun.el.parser.AstValue.getType(AstValue.java:76)
at com.sun.el.ValueExpressionImpl.getType(ValueExpressionImpl.java:195)
at org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.getType(ContextAwareTagValueExpression.java:75)
... 90 more|#] 
```

**添加**

该应用程序使用弹簧版本 3.0.7。一旦应用程序有超过 20 个 spring xml 文件，我将只显示一个 spring 文件的一部分......这部分配置我正在使用复合组件测试的对话框：

```
<bean id="controladorPopupCadastroUnidade" class="com.hrgi.web.cadastro.controladores.popups.ControladorPopupCadastroUnidade" scope="request">
     <property name="controladorArmazenamento" ref="controladorArmazenamentoUnidade"/>
    <property name="conversorValor" ref="conversorUnidade"/>
    <property name="modelo" ref="modeloPopupCadastroUnidade"/>
    <property name="popupAlerta" ref="controladorPopupAlerta"/>
    <property name="recuperadorValores" ref="unidadeDao"/>
    <property name="popupConfirmacao" ref="controladorPopupConfirmacao"/>
</bean>

<bean id="modeloPopupCadastroUnidade" class="com.hrgi.web.ui.modelos.ModeloPopupCRUD" scope="session">
    <property name="visivel" value="false"/>
    <property name="mensagemSucesso" value="${gerais.lista.sucesso}" />
</bean>

<bean id="controladorArmazenamentoUnidade" class="com.hrgi.persistencia.controladores.ControladorArmazenamento" scope="request">
    <property name="armazenador" ref="unidadeDao"/>
    <property name="atualizador" ref="unidadeDao"/>
    <property name="removedor" ref="unidadeDao"/>
    <property name="conversor" ref="conversorUnidade"/>
</bean> 
```

为了帮助您查看问题，这是我尝试使用 cc 的 xhtml 文件的 dataTable 部分：

```
<h:panelGroup id="painelLista" layout="block" styleClass="clearfix">
    <hrgi:dataTable var="bean" value="#{modeloPopupCadastroUnidade.lista}"
                         scrollable="true" height="145"
                         action="#{controladorPopupCadastroUnidade.atualizarValores}"
                         liveScroll="true" rows="10">
        <p:column headerText="Nome" style="width: 23%">
            <hrgi:cellEditor>
                <f:facet name="saida">
                    <h:outputText value="#{bean.descricao}"/>
                </f:facet>
                <f:facet name="entrada">
                    <p:inputText value="#{bean.descricao}" maxlength="35" style="width: 90%"/>
                </f:facet>
            </hrgi:cellEditor>
        </p:column>
        <p:column headerText="Sigla">
            <hrgi:cellEditor>
                <f:facet name="saida">
                    <h:outputText value="#{bean.sigla}"/>
                </f:facet>
                <f:facet name="entrada">
                    <p:inputText value="#{bean.sigla}" maxlength="5"/>
                </f:facet>
            </hrgi:cellEditor>
        </p:column>
        <p:column headerText="Fator" sortBy="#{bean.fator}">
            <hrgi:cellEditor>
                <f:facet name="saida">
                    <h:outputText value="#{bean.fator}"/>
                </f:facet>
                <f:facet name="entrada">
                    <hrgi:spinner value="#{bean.fator}" dinheiro="false" fator="1" local="pt-BR" width="40"/>
                </f:facet>
            </hrgi:cellEditor>
        </p:column>
        <p:column headerText="Fracionado" sortBy="#{bean.fracionado}">
            <hrgi:cellEditor>
                <f:facet name="saida">
                    <h:outputText value="#{bean.fracionado eq true?'Sim':'Não'}"/>
                </f:facet>
                <f:facet name="entrada">
                    <h:selectBooleanCheckbox value="#{bean.fracionado}"/>
                </f:facet>
            </hrgi:cellEditor>
        </p:column>
        <p:column headerText="Unitário" sortBy="#{bean.unitario}">
            <hrgi:cellEditor>
                <f:facet name="saida">
                    <h:outputText value="#{bean.unitario eq true?'Sim':'Não'}"/>
                </f:facet>
                <f:facet name="entrada">
                    <h:selectBooleanCheckbox value="#{bean.unitario}"/>
                </f:facet>
            </hrgi:cellEditor>
        </p:column>
        <p:column>
            <hrgi:rowEditor action="#{controladorPopupCadastroUnidade.editarValor(bean)}" update="alerta" indice="#{bean.indice}"/>
            <p:commandLink title="#{msgGerais['gerais.excluir']}"                               action="#{controladorPopupCadastroUnidade.removerValor(bean)}"                                       update="painelLista alerta confirmacao" immediate="true">
                <h:graphicImage library="img" name="remover.png"/>
            </p:commandLink>
        </p:column>
    </hrgi:dataTable>
</h:panelGroup> 
```

可能问题是 var 属性不能在复合组件之外使用......有没有办法可以在外部公开这个属性？我该如何解决？

# templates - 为什么在play 2 scala模板中构建的html会产生一个空的Html案例类

> ID：11453494
> 
> 赞同：2
> 
> 时间：2012-07-12T13:59:32.070
> 
> 标签：templates, scala, pattern-matching, playframework-2.0

为什么此输出“html 为空”？

```
@h = {<br />}

@h match {
  case Html("") => {html is empty}
  case _ => {html has content}
} 
```

这会输出“html 有内容”吗？

```
@i = @{Html("<br />")}

@i match {
  case Html("") => {html is empty}
  case _ => {html has content}
} 
```

这对我来说很重要的原因是因为在最后一个示例的[常见用例](http://www.playframework.org/documentation/2.0.2/ScalaTemplateUseCases)中（moreScripts 和 moreStyles 等效项），第一个样式用于将一小段 html 传递到另一个模板中。然后我想根据该html是否有内容进行切换。但它总是匹配 Html("")。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T03:19:57.340

为每种方法生成的代码略有不同。

```
def h:play.api.templates.Html = {
  _display_(
    Seq[Any](format.raw("""<br />"""))
  )
}
def i = {{Html("<br />")}} 
```

创建中使用的`_display_`方法`h`最终`foldLeft`对传入的所有元素执行 a`Seq`

这导致：

```
Html("") + Html("<br />") 
```

case 类原来`Html`是由一个 mutable 支持的`StringBuilder`。

```
case class Html(text: String) extends Appendable[Html] with Content with play.mvc.Content {
  val buffer = new StringBuilder(text)

  /**
   * Appends this HTML fragment to another.
   */
  def +(other: Html): Html = {
    buffer.append(other.buffer)
    this
  }
  override def toString = buffer.toString

  /**
   * Content type of HTML (`text/html`).
   */
  def contentType: String = "text/html"

  def body: String = toString

} 
```

这意味着 of 的值`text`只会被设置为 first`Html`的`text`值。每当您`Html`通过该`+`方法创建一个新的时，您只需修改`StringBuilder`.

例如

```
val html = Html("1") + Html("2")
html.text == "1"
html.toString == "12"
html.body == "12" 
```

由于它是`text`用于模式匹配的值，这有效地破坏了它在模式匹配中使用的能力。

例如

```
(Html("1") + Html("2")) match { case Html("1") => "broken" } // returns "broken" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:16:31.097

也许尝试进行字符串匹配？

```
@h.toString() match {
  case "" => {html is empty}
  case _ => {html has content}
} 
```

# jsf - Jsf，限制要显示的字符数？

> ID：11453507
> 
> 赞同：0
> 
> 时间：2012-07-12T14:00:32.443
> 
> 标签：jsf, datatable

我正在开发一个 jsf 应用程序。我有一个数据表，我使用一列来呈现 Pojo 的描述。

问题是：这个描述太长了，dataTable 不是很清晰。有没有办法限制要在此数据表的描述列上呈现的字符数，例如：Description desc desc ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:31:57.867

如果您使用的是 JSF 2，则可以使用OmniFaces[项目](http://omnifaces.org)[的缩写](http://omnifaces.org/docs/vdldoc/current/of/abbreviate.fn.html)功能。

将[JAR 文件](http://central.maven.org/maven2/org/omnifaces/omnifaces)放入您`WEB-INF/lib`的 中，在您的 XHTML 文件中相应地配置命名空间，如下所示：

```
<html ... xmlns:of="http://omnifaces.org/functions"> 
```

然后您可以在任何 String 属性上使用它，如下所示：

```
<h:column>
    <h:outputText value="#{of:abbreviate(someBean.myproperty, 20)}" />
</h:column> 
```

在此处查看[演示](http://showcase.omnifaces.org/functions/Strings)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:34:30.187

如果您从数据库中获取字符串，请尝试在从数据库中获取数据时直接使用 Substring SQL 函数截断数据。

如果没有，您可以尝试以下解决方案。

假设`MyPOJO`您正在使用的 POJO 类（调用它）包含一个名为`description`. 现在 DataTable 将链接到该对象的 List 或 Map 等...，现在让它成为一个`"ArrayList<MyPOJO> theList"`。

你可以做的是在同一个类中有另一个属性`MyPOJO`。声明 as`String descriptionTruncated`并在该 String 的 getter 方法中写入以下内容：

```
public String getDescriptionTruncated() {
  if (this.description == null) {
      return description;
  } else if (this.description.length() <= 20 ) {
    return description;
  } else {
    return description.substring(0,19);
  }
} 
```

我们在这里假设所需的长度是 20。

然后在数据表中引用新创建的字符串，如下所示：

```
<h:datatable ...  var="pojoObj">

<h:column>
    <h:outputText value="#{pojoObj.descriptionTruncated}" />
</h:column> 
```

希望有帮助。

# asp.net - 为什么我调试时打开了六个 asp.net 开发服务器端口？

> ID：11453508
> 
> 赞同：2
> 
> 时间：2012-07-12T14:00:33.597
> 
> 标签：asp.net, visual-studio-2010, iis

最近，当我去调试时，我的系统上启动了六个开发服务器端口。

有人可以向我解释发生了什么和/或如何关闭它吗？

谢谢！

![每次调试时打开六个端口](../Images/87dd9a9aec6d6f10d28dbc732f326335.png)

无论我调试多少次，这六个都呆在那里。我没有得到超过六个，它们不是在鼠标悬停时消失的幻影服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:03:18.230

因为您当前的解决方案中有多个 Web 应用程序或网站

由于您可能会在 Web 项目中公开 Web 服务，因此 Visual Studio 只需*加载所有内容*

我个人觉得这种行为很烦人，如果你们知道配置它的设置，将不胜感激

# textures - 如何将纹理或更好的画布 2d 文本添加到 LatheGeometry 的面？

> ID：11453509
> 
> 赞同：2
> 
> 时间：2012-07-12T14:00:39.570
> 
> 标签：textures, three.js

这是我正在做的一个例子：http: [//artlineatvb.it/test_3d/test_09/](http://artlineatvb.it/test_3d/test_09/)

我想把文字放在戒指的外表面上。

我看过这个 [http://enriquemorenotent.com/demos/cube2/](http://enriquemorenotent.com/demos/cube2/) 用 te cube 的脸来解决问题

如果不可能，我可以用文字创建图像，但我不能把它放在戒指上

谢谢！

# hibernate - Nullpointer 异常初始化休眠实体的关联

> ID：11453517
> 
> 赞同：1
> 
> 时间：2012-07-12T14:01:00.960
> 
> 标签：hibernate, tomcat7

您好我有一个具有复合键和关联对象的实体模型。以下是它的 hbm.xml

```
<hibernate-mapping>
<class name="com.mytrits.admin.Mtmdmsgqna" table="mtmdmsgqna" catalog="mtmdadmin">
    <composite-id name="id" class="com.mytrits.admin.MtmdmsgqnaId">
        <key-property name="messageId" type="int">
            <column name="MessageId" />
        </key-property>
        <key-property name="qserialNo" type="java.lang.Integer">
            <column name="QSerialNo" />
        </key-property>
        <key-property name="qsenderId" type="java.lang.Integer">
            <column name="QSenderID" />
        </key-property>
        <key-property name="qtext" type="string">
            <column name="QText" length="1000" />
        </key-property>
        <key-property name="aserialNo" type="java.lang.Integer">
            <column name="ASerialNo" />
        </key-property>
        <key-property name="asenderId" type="java.lang.Integer">
            <column name="ASenderID" />
        </key-property>
        <key-property name="atext" type="string">
            <column name="AText" length="1000" />
        </key-property>
    </composite-id>
    <many-to-one name="mtmduser" class="com.mytrits.admin.Mtmduser" update="false" insert="false" fetch="select">
        <column name="QSenderID" />
    </many-to-one>
    <many-to-one name="mtmdmessages" class="com.mytrits.admin.Mtmdmessages" update="false" insert="false" fetch="select">
        <column name="MessageId" not-null="true" />
    </many-to-one>
</class> 
```

我正在使用 namedQuery 获取列表，下面是查询

```
<query name="getQNAforMsg">
    <![CDATA[from Mtmdmsgqna where messageId = :msgId order by qserialNo, aserialNo]]>
</query> 
```

在我的托管 bean 中，我试图遍历列表但得到 NullPointerException。实体列表的 size() > 0，但是当我尝试访问该对象（在同一个会话中）时，它失败并给了我一个 NullPointerException。从列表中获取的初始对象本身为 NULL。下面是我的 bean 代码

```
private void buildQATree() {
    try {
        MtmdmsgqnaHome qnasHome = new MtmdmsgqnaHome();
        HibernateUtil.beginTransaction();
        qnaList = qnasHome.findQNAbyMsg(messageId.intValue());
        Iterator it = qnaList.iterator();
        while (it.hasNext()) {
            Mtmdmsgqna mqna = (Mtmdmsgqna) it.next();
            mqna.getId().getMessageId();
            System.out.println("Success");
        }
        HibernateUtil.commitTransaction();
    } catch (Exception ex) {
        if (HibernateUtil.isTransactionActive()) HibernateUtil.rollbackTransaction();
        log.error("Exception fetching Entity Types"+ex);
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error Getting Message Detail", "Error Getting Message Detail"));          
    }               
} 
```

我在项目的另一部分有类似的案例，但那里的类似代码没有问题。我不确定这里有什么问题。我也尝试了以下方法进行迭代，但遇到了同样的问题。

```
/*          
        for (Mtmdmsgqna mqna : qnaList) {
            Hibernate.initialize(mqna);
            Hibernate.initialize(mqna.getId());
            Hibernate.initialize(mqna.getMtmduser());
        } 
```

*/

```
/*
        for (int i = 0; i < qnaList.size(); i++) {
            Hibernate.initialize(qnaList.get(i));
            Hibernate.initialize(qnaList.get(i).getId());
            Hibernate.initialize(qnaList.get(i).getMtmduser());
        } 
```

*/

我怀疑，由于复合键本身是一个单独的类，因此不会获取它（因为 Lazy='true'）并且由于除了多对一之外我没有任何其他元素，因此没有急切地获取任何内容。因此，即使您在 DB 中有数据，该对象也是空的。由于主实体对象本身为空，因此我无法通过关联对象进一步导航以进行初始化。我怀疑我至少必须急切地获取复合 ID 数据。我是 Hibernate 的新手，找不到在 hbm 文件中的复合键上设置惰性渴望属性的方法。让我知道这是否可能。也让我知道是否还有其他问题。任何帮助都会很棒。

# symfony - symfony2/twig：如何在 symfony2 中模拟 symfony1 的旧插槽？

> ID：11453518
> 
> 赞同：0
> 
> 时间：2012-07-12T14:01:03.033
> 
> 标签：symfony, twig

我只是不想在主登录页面中显示布局的登录表单..

我尝试在登录子`{% set layout_login = false %}`模板`{% set layout_login = true %}`（ )....

`isset()`并尝试在控制器中设置一个变量，但在树枝中没有任何东西......

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:26:43.383

为什么不在主布局中定义一个块？

```
{% block loginForm %}
    <form />
{% endblock %} 
```

并在您的登录模板中重载它：

```
{% block loginForm %}{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:00:36.727

定义了 isset() 的等价物。

我是这样写的：

```
{% if layout_login is not defined %}

    {% if error %}
        <div>{{ error|trans({}, 'FOSUserBundle') }}</div>
    {% endif %}

    <form action="{{ path("fos_user_security_check") }}" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

        <label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label>
        <input type="text" id="username" name="_username" value="{{ last_username }}" />

        <label for="password">{{ 'security.login.password'|trans({}, 'FOSUserBundle') }}</label>
        <input type="password" id="password" name="_password" />

        <input type="checkbox" id="remember_me" name="_remember_me" value="on" />
        <label for="remember_me">{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}</label>

        <input type="submit" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
    </form>

{% endif %} 
```

# c++ - fstream get(char*, int) 如何操作空行？

> ID：11453522
> 
> 赞同：2
> 
> 时间：2012-07-12T14:01:10.917
> 
> 标签：c++, get, fstream

strfile.cpp 中的代码：

```
#include <fstream>
#include <iostream>
#include <assert.h>

#define SZ 100

using namespace std;

int main(){
char buf[SZ];
{
    ifstream in("strfile.cpp");
    assert(in);
    ofstream out("strfile.out");
    assert(out);
    int i = 1;

    while(!in.eof()){
        if(in.get(buf, SZ))
            int a = in.get();
        else{
            cout << buf << endl;
            out << i++ << ": " << buf << endl;
            continue;
        }
        cout << buf << endl;
        out << i++ << ": " << buf << endl;
    }
}
return 0;
} 
```

我想操作所有文件，但在 strfile.out 中：

```
1: #include <fstream>
2: #include <iostream>
3: #include <assert.h>
4: ...(many empty line) 
```

我知道 fstream.getline(char*, int) 这个函数可以管理它，但我想知道如何做到这一点，只需使用函数“fstream.get()”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:12:00.640

因为`ifstream::get(char*,streamsize)`会将分隔符（在这种情况下`\n`）留在流上，所以您的调用永远不会前进，因此在您的调用程序看来，您正在无休止地读取空白行。

相反，您需要确定是否有换行符在流中等待，并使用`in.get()`or移过它`in.ignore(1)`：

```
ifstream in("strfile.cpp");
ofstream out("strfile.out");

int i = 1;
out << i << ": ";

while (in.good()) {
    if (in.peek() == '\n') {
        // in.get(buf, SZ) won't read newlines
        in.get();
        out << endl << i++ << ": ";
    } else {
        in.get(buf, SZ);
        out << buf;      // we only output the buffer contents, no newline
    }
}

// output the hanging \n
out << endl;

in.close();
out.close(); 
```

# android - 接近警报

> ID：11453527
> 
> 赞同：0
> 
> 时间：2012-07-12T14:01:25.507
> 
> 标签：android, google-maps, gps, alert, proximity

我想利用 GPS 为 Android 2.2+ 制作应用程序。基本上我希望能够使用谷歌地图在应用程序中设置特定区域。

**示例：**我正在步行去商店，当我离我家 x（可变）米时，我希望手机上的闹钟响起。

我用谷歌搜索，发现当你靠近朋友家或类似的地方时，你可以使用邻近警报来获得通知。他们为此使用了特定的坐标。我希望能够在地图上画一条线或使用街道名称，一旦我越过那条线，我希望警报响起。如果有人可以为我指出该部分的一些教程或提供一些建议，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:27:18.920

我认为你需要用一些公式自己在谷歌地图中映射你的线。

接近警报使用半径。您可能需要沿线设置多个小半径的点。

您将获得进入意图或退出意图。

[http://developer.android.com/reference/android/location/LocationManager.html#KEY_PROXIMITY_ENTERING](http://developer.android.com/reference/android/location/LocationManager.html#KEY_PROXIMITY_ENTERING)

# symfony1 - 如何查询并返回存储的 id 而不是连接的描述

> ID：11453528
> 
> 赞同：0
> 
> 时间：2012-07-12T14:01:26.247
> 
> 标签：symfony1, symfony-1.4

也许一个例子最能描述我的问题：

架构：

```
Referral:
  actAs:                            { timestampable: ~ }
  columns:
    id:                             { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }  
    other_stuff:                    { type: string }  
    reasonCode:                     { type: integer }    
  relations:   
    ReasonCode:                     { local: reasonCode, foreign: id, foreignAlias: ReasonCodes }  

ReasonCode:
  columns:
    id:                             { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }
    description:                    { type: string } 
```

查询（referralTable.class.php）：

```
 public function getObjectByReferralId($id){
        $q = Doctrine_Query::create()
            ->select('*')
            ->from('referral_submissions')
            ->where('referral_id=?', $id)
            ->fetchOne();
        return $q;   
    } 
```

调用模板：

```
<?php 
$id = <source of id>;
echo Doctrine_Core::getTable('referral')->getObjectByReferralId($id)->getReasonCode();
 ?> 
```

上述模板中获取原因代码的调用返回的是存储在 ReasonCode 表中的“描述”，而不是存储在 Referral 表中的 id。我需要实际的 ID，而不是连接的描述。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:04:54.670

这很令人困惑，因为您用关系名称命名了外键。所以当你认为你得到了密钥时，你就获取了关系。而且我猜 Doctrine 不会检索主键，因为您的`ReasonCode`表中只有一个字段，所以它返回该`description`字段。

尝试：

```
Doctrine_Core::getTable('referral')
  ->getObjectByReferralId($id)
  ->get('reasonCode'); 
```

顺便说一句，您还可以使用关系检索 id：

```
Doctrine_Core::getTable('referral')
  ->getObjectByReferralId($id)
  ->getReasonCode()
  ->getId(); 
```

我认为你应该定义你的外键，比如 :`reason_code_id`而不是`reason_code`. 然后您的架构将变为：

```
Referral:
  actAs:                            { timestampable: ~ }
  columns:
    id:                             { type: integer, primary: true, notnull: true, autoincrement: true, unique: true }  
    other_stuff:                    { type: string }  
    reasonCode_id:                  { type: integer }    
  relations:   
    ReasonCode:                     { local: reasonCode_id, foreign: id, foreignAlias: ReasonCodes } 
```

您将能够使用以下方法检索 id：

```
Doctrine_Core::getTable('referral')
  ->getObjectByReferralId($id)
  ->getReasonCodeId(); 
```

# spring - applicationContext 找不到 Servlet 上下文的控制器

> ID：11453530
> 
> 赞同：22
> 
> 时间：2012-07-12T14:01:32.977
> 
> 标签：spring, spring-mvc, spring-annotations

我有一个带有 applicationContext.xml 和 dispatcher-servlet.xml 配置的 Spring Web 应用程序。我已经在 applicationContext.xml 中定义了，但是当我运行我的应用程序时，除非我也添加到 dispatcher-servlet.xml，`<context:component-scan />`否则找不到控制器。`<context:component-scan />`我在两者中都使用相同的基本包，所以这不是问题。

我很困惑，因为我*认为*applicationContext.xml 是 dispatcher-servlet.xml 的父级。放入`<context:component-scan />`applicationContext.xml 还不够吗？

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

编辑：我还在 dispatcher-servlet.xml 中使用 mvc:annotation-driven，它应该用来获取控制器（我想？）。

编辑2：这是配置文件。我从 applicationContext.xml 中删除了一堆 Spring Security 和 OAuth 设置（出于安全原因，它们可能无论如何都不相关）。

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:sec="http://www.springframework.org/schema/security" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p" xmlns:c="http://www.springframework.org/schema/c"
xmlns:context="http://www.springframework.org/schema/context" xmlns:oauth="http://www.springframework.org/schema/security/oauth2"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
      http://www.springframework.org/schema/security/oauth2 http://www.springframework.org/schema/security/spring-security-oauth2.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:component-scan base-package="bar.foo"/>
<context:property-placeholder location="classpath:my.properties" />
<bean class="bar.foo.ServicesConfig" />

</beans> 
```

调度程序-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p" xmlns:c="http://www.springframework.org/schema/c"
xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:component-scan base-package="bar.foo.controller" />
<mvc:annotation-driven/>
<mvc:default-servlet-handler />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
    <property name="order" value="2" />
</bean>

<bean id="contentViewResolver" class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultViews">
        <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    </property>
    <property name="order" value="1" />
</bean>

</beans> 
```

编辑3：好的，这很有趣。我的服务和 dao 类位于我从 Web 项目中引用的不同项目 (JAR) 中。我正在使用基于 java 的配置并从 applicationContext.xml 引用它：

```
<bean class="bar.foo.config.ServicesConfig" /> 
```

因此，这意味着我的 Web 项目（applicationContext.xml 所在的位置）中只有 Controller 注释。回想起来，从我的 applicationContext.xml 中删除 context:component-scan 应该不会有任何影响，因为除了 @Controller 之外没有任何注释（修复到编辑：有一些 @Autowired 注释）。但是，当我从 applicationContext.xml 中删除 context:component-scan 时，它说控制器（从调度程序 servlet 扫描中找到）找不到我的服务类。对 ServicesConfig 的引用还不够吗？这是用于引用的 ServicesConfig 类 - 它有自己的服务组件扫描，这些组件与 applicationContext.xml 扫描的包不同。

```
@Configuration
@ComponentScan({ "some.other.package", "another.package" })
@ImportResource({ "classpath:commonBeans.xml" })
@PropertySource({ "classpath:services.properties",
"classpath:misc.properties" })
public class ServicesConfig {
  // Bean definitions //
} 
```

解决方案：

当我从根上下文中删除 context:component-scan 时，控制器没有选择自动装配的服务 bean。这是因为根上下文引用了我的服务基于 java 的配置 Bean，但我没有设置根上下文来扫描组件。因此，当我将组件扫描添加到根上下文 (applicationContext.xml) 时，一切正常。这是我现在拥有的：

应用程序上下文.xml：

```
<bean class="bar.foo.config.ServicesConfig" />
<context:component-scan base-package="bar.foo.config" /> 
```

调度程序-servlet.xml：

```
<context:component-scan base-package="bar.foo.controller" /> 
```

我有网络上下文设置来获取控制器包中的控制器、自动装配和任何其他注释 - 我不确定这是否是最佳实践。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-13T13:34:39.110

你是对的 - 有两个不同的应用程序上下文，由 ContextLoaderListener 加载的根应用程序上下文（在 ServletContext 被初始化时）和 Web 上下文（由 DispatcherServlet 加载），根应用程序上下文是 Web 的父级语境。

现在，由于这是两个不同的应用程序上下文，它们的作用不同——如果您`component-scan`在应用程序上下文中为您的服务定义，那么服务的所有 bean 都会在这里创建。

当您的 Dispatcher servlet 加载时，它将开始创建 Web 上下文，在某些时候（由`<mvc:annotation-driven/>`它驱动将为您的 uri 到处理程序方法创建一个映射，它将获取应用程序上下文中的 bean 列表（这将是 Web 应用程序上下文，而不是根应用程序上下文）并且由于您没有在`component-scan`此处定义与控制器相关的 bean，因此不会创建映射，这就是您必须在调度程序 servlet 上下文中定义组件扫描的原因还。

一个好的做法是在根应用程序上下文中排除与控制器相关的 bean：

```
<context:component-scan base-package="package">
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

并且只有在 Web 应用程序上下文中与控制器相关的控制器：

```
<context:component-scan base-package="package" use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation" />
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:23:57.670

在我们的应用程序中，我们在 dispatcher-servlet.xml 中定义

我相信这是它应该在的地方，而不是在 applicationContext.xml

Spring 文档的这一部分应该提供更多信息：

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)

从 16.2 节中的一张图可以看出，dispatcher-servlet 位于上下文层次结构中的 applicationContext 之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T05:55:51.460

我遇到了同样的问题，在将我的`web.xml`代码与[本教程](https://youtu.be/ccPs-MqIGDA?list=PL4gCdGOq-cxJrbRMWjrIvGhYqQO1tvYyX)进行比较后，我对其进行了更改，并且成功了。这是我的`web.xml`文件：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xsi:schemaLocation="
    http://java.sun.com/xml/ns/javaee
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring/business-config.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

`context-param``listener`是我错过的。

我希望它对你有帮助。

# c++ - boost 变体 istringstream 和流错误

> ID：11453538
> 
> 赞同：1
> 
> 时间：2012-07-12T14:01:56.613
> 
> 标签：c++, visual-studio-2010, boost, c++11, boost-variant

我正在使用 Visual Studio 2010 sp1。在 Windows 7 中使用 c++ 和 boost 1.47

我有以下代码：

```
typedef boost::variant<unsigned int,int,long,double,bool,string,istringstream,int32_t,
                                 uint32_t,int64_t,uint32_t,sql::SQLString> SQLVariant; 
```

我也尝试将 istringstream 替换为 istream。我确实收到以下错误：

```
Error   13  error C2249: 'std::basic_ios<_Elem,_Traits>::operator =' : 
no accessible path to private member declared in virtual base 'std::basic_ios<_Elem,_Traits>'
c:\program files (x86)\microsoft visual studio 10.0\vc\include\istream  860 
```

如果我声明 istringstream i; 我没有得到错误。如果我声明 istream i2，我确实会收到类似的错误；

我究竟做错了什么？

我需要 istream 或派生类的原因是我正在研究的 sql 库。具体来说，对于 mysql 实现，我需要一个 istream 或 istringstream 来调用 setBlob ...

我找到了一个临时解决方法，允许传递一个字符串并用该字符串初始化字符串流。但是，如果我的变体类型可以采用 istreamstream 或更好的 istream，那就太好了

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:20:27.240

引用 Boost.Variant：

有界类型的要求[如下](http://www.boost.org/doc/libs/1_50_0/doc/html/variant/reference.html#variant.concepts)：

*   CopyConstructible [20.1.3]。
*   析构函数坚持不抛出异常的安全保证。
*   在变体模板实例化点完成。（有关接受不完整类型以启用递归变体类型的类型包装器，请参见 boost::recursive_wrapper。）

std::istringstream 不可复制构造。

# c++ - 如何在 UML 中表示从模板参数继承？

> ID：11453540
> 
> 赞同：7
> 
> 时间：2012-07-12T14:02:03.377
> 
> 标签：c++, uml

使用 UML，我如何`A< Foo >`在下面的代码中表示？

```
template< class T > 
class A : public T
{
    /* ... */
};

class Foo { };

A< Foo > a_foo; 
```

像这样的事情（为可怜的 ascii 艺术道歉......和[​​Jon Skeet](https://stackoverflow.com/questions/860501/what-is-the-correct-way-to-represent-template-classes-with-uml)）是我的第一个猜测，但我怀疑它是不正确的。

```
 ________________
            |              |
            |              |
            |     Foo      |
            |              |
            |______________|
             /:\  /|\
«bind»(Foo)   :    |
              :    |   .......               
            __:____|___:  T  :
            |          :.....:
            |              |
            |      A       |
            |              |
            |______________| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:59:26.433

UML 设计者有一个提议，但它还不是标准的一部分。

如果没有任何模板参数，则类型为“A”的对象“a”可能是这样的：

```
+--------------------+
|        a: A        | 
+--------------------+
| [+] doSomething(); |
+--------------------+ 
```

对象“a”是“a”的模板，类型参数为“Foo”，可以这样表示：

```
 +-----+
+-----------------| Foo |
|                 +-----+
|        a: A        | 
+--------------------+
| [+] doSomething(); |
+--------------------+ 
```

请注意，在 UML 中，当您声明一个类时，它们由矩形表示，而特定对象（例如“a”）则由圆角矩形表示。有些人和工具不遵循“圆角”规范。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T21:38:26.497

我不太确定这是否完全标准，但是当我尝试使用 Enterprise Architect 对其进行逆向工程时，这是您的“A”类的定义：

```
 +---------+
+-----| T:class |
|     +---------+
|        T |
|   A      |
+----------+
|          |
+----------+ 
```

只需添加模板参数的名称作为类的父名称。

# php - 使用 mysql 下载 PHP 生成的 CSV/PDF

> ID：11453544
> 
> 赞同：0
> 
> 时间：2012-07-12T14:02:14.350
> 
> 标签：php, html, sql, forms, download

我有一个根据用户选择生成 SQL 语句的表单。它的功能很像 MS Access 中的报告向导。在最后一步，我拥有所有数据和动态生成的 SQL 查询，但我需要一种方法可以将其下载为文件。我该怎么办？

目前我有三个名为“查看结果”的按钮（它只显示 HTML 生成的结果，这很容易 - 它们只是在新标签中打开）

'Download CSV' （最好我希望在单击它时就像正常下载文件一样，浏览器提示用户另存为等）

“下载 PDF”（与 CSV 相同）

在按下 CSV 按钮的那一刻，将打开一个带有 export_report.php 的新选项卡，它会输出 CSV 样式的报告数据。

如何使用 CSV 和 PDF 按钮获得所需的结果？我有我需要生成的所有数据和信息，但我不确定如何继续进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:29:37.703

对于 PDF 的生成，您可以使用[fpdf](http://www.fpdf.org/)女巫允许您从 php 构建 pdf。

对于 CSV 的生成，您只需调整标题。这是一个解释其工作原理的链接：[csv generation](http://www.askageek.com/2006/02/28/generate-a-csv-file-using-php/)。

# java - 反转布尔属性的值

> ID：11453546
> 
> 赞同：1
> 
> 时间：2012-07-12T14:02:23.250
> 
> 标签：java, properties, conventions

我有一个由数据库表支持的（Java）对象。在数据库中，（新）列中的值“N”表示禁止某些内容，而值“Y”或 null（默认）表示允许某些内容。

在我的对象中，我希望具有相同的效果：默认情况下`forbidden = false`，但`true`如果需要，可以将其设置为 。我正在使用现有代码，所以我不想修改构造函数。

但是，该属性的使用方式很可能是（我认为更容易理解）是积极的：`isAllowed()/setAllowed()`. 因此，我将我的代码设置为：

```
public boolean isAllowed()
{   return !this.forbidden;  }
public void setAllowed(boolean allowed)
{   this.forbidden = ! allowed;  } 
```

1.  有没有其他人认为`if ([!]isAllowed()) {...}`比 更容易理解 `if ([!]isForbidden()) {...}`，还是我做出了错误的假设？
2.  我的代码有意义吗？（是的，我正在尝试正确评论它，这就是我要问的原因。）
3.  我的主要问题是：这种调整是否有一个传统的名称？由字段支持的布尔属性，该字段带有公开属性的相反值。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:04:58.733

> (1) 有没有人认为`if ([!]isAllowed()) {...}`比`if ([!]isForbidden()) {...}`……更容易理解？

是的。积极因素通常是要走的路。不总是，但通常。考虑代码想要根据是否允许进行分支的**情况**：

```
if (something.isAllowed()) {
    // do the thing
} 
```

对比

```
if (!something.isForbidden()) {
   // do the thing
} 
```

第一个读起来更流畅。（但这是主观的。）

只是 FWIW，我可能也会持有数据成员`allowed`而不是`forbidden`。所以你不会在访问器中反转它。因为上面的论点同样适用于直接使用该字段的代码（假设您有使用该字段的代码）和使用访问器的代码。

> (2) 我的代码有意义吗？

除了支撑风格，是的。:-) （风格就是风格，完全是你自己的决定。）

> (3) - 我的主要问题：这种调整是否有一个传统的名称？

我从来没有听说过，这不是很常见。我想你正在做一些*模糊*的外观或适配器，但这是一个真正的延伸。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:05:51.607

它没有名字，它只是反转一个布尔值。

为什么不同时提供`isAllowed`/`isForbidden`访问器？这是否有意义取决于上下文，我看不出有任何理由明确*禁止*使用上下文中最自然的东西。

# java - java中的对象扩展

> ID：11453547
> 
> 赞同：2
> 
> 时间：2012-07-12T14:02:25.967
> 
> 标签：java, generics, class-hierarchy

在java中，如果你有一个需要泛型来扩展特定类的对象，但你想用该类的扩展来实现它，有没有办法让java知道你实际上并没有违反自己的规则？下面的示例代码假设这没有意义。

```
public interface WantedInterface extends StaticInterface<WantedObject>

public class WantedObject extends OlderObject

public class OlderObject extends UsefulObject

public interface StaticInterface<T extends UsefulObject> 
```

所以我的问题本质上是，有什么方法可以告诉我的 StaticInterface 我的 WantedObject 实际上扩展了我的 UsefulObject，即使它不是直接的？我真的不希望仅仅因为 OlderObject 包含很多有用的代码而将我的 WantedObject 重写为 UsefulObject 的纯扩展，并且我正在写入我正在使用的序列想要了解当前状态的数据库旧对象。我在写这篇文章时意识到我可以让 WantedInterface 直接扩展 OlderObject 的接口，但我想知道是否有办法避免这种情况。

编辑：好吧，在一个非常奇怪的转折中，我能够通过将 WantedObject 的扩展更改为 UsefulObject，然后将其改回原样来解决问题。也许问题只是一些临时的 IDE 问题？我正在使用eclipse，它是否偶然遇到了这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:08:25.413

`A extends B`是[*传递性*](http://en.wikipedia.org/wiki/Transitive_relation)的，这是一种奇特的说法，即 if`A extends B`和`B extends C`, then`A extends C`也是。例如，编译器对以下代码不会有任何问题：

```
UsefulObject uo = new WantedObject(); 
```

# php - 查找和修复丢失的 div 标签 - WordPress 自定义模板

> ID：11453549
> 
> 赞同：0
> 
> 时间：2012-07-12T14:02:31.287
> 
> 标签：php, wordpress, html, wordpress-theming

我的页面有问题[http://www.believeinstjohn.com/store/](http://www.believeinstjohn.com/store/)

我最终想要完成的是将侧边栏移动到适当的位置（右侧边栏列）。它显示了三个缺失`</div>`的标签，它是一个 WordPress 站点，并且该页面正在使用自定义模板。我无法弄清楚丢失的标签在哪里。该模板正在从站点的其余部分提取资源，其他页面都很好。其中两个 div（container 和 container-2）位于 header.php 中，但是将它们关闭会扰乱整个站点。我一定错过了模板中的某些内容，但看不到它。这是模板的PHP

```
<?php
/**
 * Template Name: Products
 *
 * Selectable from a dropdown menu on the edit page screen.
 * @package WordPress
 * @subpackage Adventure_Journal
 */
$themeOpts = get_option('ctx-adventurejournal-options');
get_header();
?>

        <div class="content" <?php ctx_aj_getlayout(); ?>>
            <div id="col-main" style="<?php echo ctx_aj_customwidth('content'); ?>">
              <div id="main-content" <?php //ctx_aj_crinkled_paper(); ?>>

    <?php 
    global $wp_query, $post;
    $paged = get_query_var('paged') ? get_query_var('paged') : 1;
    $tax = $wp_query->query_vars['product-category'];
    query_posts( array ('post_type' => 'products', 'paged' => $paged, 'product-category' => $tax ) );
    $loop_counter = 1;
    if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <li class="product <?php if ( $loop_counter == 2 ) { echo "product-last"; } ?>">
            <div class="product_wrap">
                <?php 
                $title = get_the_title().' ';
                $chars_title = strlen($title);
                $title = substr($title,0,28);
                $title = substr($title,0,strrpos($title,' '));
                if ($chars_title > 28) { $title = $title."..."; } 

                $excerpt = get_the_excerpt();
                if (strlen($excerpt) > 150) {
                $excerpt = substr($excerpt,0,strpos($excerpt,' ',80)); } ;
                $excerpt = $excerpt.' ...';

                if (has_post_thumbnail()) {
                    echo '<a href="'. get_permalink() .'" class="product-thumb" title="'. the_title_attribute('echo=0') .'">';
                    the_post_thumbnail( 'Product Thumb', array('title'=>$post_title) );
                    echo  '</a>';
                }
                ?>
                <h3 class="entry-title product-title"><a href="<?php the_permalink(); ?>" class="title"><?php echo $title; ?></a></h3>
                <div class="product_content">
                    <?php echo apply_filters('the_excerpt',$excerpt); ?>
                </div>
                <div class="product_details">
                    <a class="button" href="<?php the_permalink(); ?>">More Info</a>
                </div>
            </div>
        </li>
        <?php if ( $loop_counter == 2 ) {
            $loop_counter = 1;
            echo '<li class="clear"></li>';
        } else {
            $loop_counter++;
        } ?>
     <?php endwhile; else: endif;  ?>
 <div class="clear"></div>
        <?php get_sidebar('store'); ?>
 <?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:15:00.033

您在哪里关闭以下标签？

```
<div class="content" <?php ctx_aj_getlayout(); ?>>
<div id="col-main" style="<?php echo ctx_aj_customwidth('content'); ?>">
<div id="main-content" <?php //ctx_aj_crinkled_paper(); ?>> 
```

# java - “暂停”由 Spring 事务管理器管理的休眠会话

> ID：11453550
> 
> 赞同：0
> 
> 时间：2012-07-12T14:02:31.623
> 
> 标签：java, spring, hibernate

有什么方法可以从线程中删除/暂停当前的 spring 管理的休眠会话，以便可以使用新的会话，然后将原始会话放回线程上？两者都在同一个数据源上工作。

更详细地描述问题。我正在尝试为拥有自己的 spring hibernate 事务管理的工具创建一个插件。在这个插件中，我想做一些我自己的数据库东西，这些东西是在我们自己的 spring 事务管理器上完成的。当我目前尝试执行数据库操作时，我们的事务管理器开始抱怨已在使用不兼容的事务管理器

`org.springframework.transaction.IllegalTransactionStateException: Pre-bound JDBC Connection found! HibernateTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. It is recommended to use a single HibernateTransactionManager for all transactions on a single DataSource, no matter whether Hibernate or JDBC access.`

似乎可以解决问题的一种解决方法是在不同的线程中运行我自己的代码并等待它完成，然后再继续执行其余代码。

有没有更好的方法，看起来有点愚蠢/矫枉过正？以某种方式暂停当前休眠会话，然后打开一个新会话，然后恢复原始会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:18:18.403

您是否有任何理由不能将当前事务管理器注入到您的插件代码中？两个 tx 经理听起来厨房里的厨师太多了。如果您注入了它，那么您应该能够在使用[@transactional 注释的](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)传播 REQUIRES_NEW 属性进行工作之前要求一个新会话，请参阅文档以获取示例设置

例如

```
@transactional(propogation = Propogation.REQUIRES_NEW)
public void addXXX(Some class) {
    ...
} 
```

但这将使用spring[`PlatformTransactionManager`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/PlatformTransactionManager.html)而不是让它休眠来管理会话/事务。

# python - 来自 Django 视图的 Freshbooks API 调用

> ID：11453552
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:02:33.687
> 
> 标签：python, django, django-views, freshbooks-api

如何从 Django 视图中进行 HTTPS 调用？我正在尝试从 django 视图调用freshbooks api，但未能这样做，因为它给了我以下错误。在 https 上找不到服务器。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:23:42.070

很高兴看到你到目前为止有什么，但你总是可以使用 python 的[requests](http://docs.python-requests.org/en/latest/user/quickstart/#make-a-request)模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:49:29.067

验证您尝试打开的网址。可能是您的网址不正确。

# hibernate - 在使用 hyperjaxb 进行往返测试期间忽略数据源

> ID：11453560
> 
> 赞同：0
> 
> 时间：2012-07-12T14:03:06.697
> 
> 标签：hibernate, jpa-2.0, hyperjaxb

我正在使用带有 maven 的 Hyperjaxb 3 从 xsd 生成 java 类。为了指定在 AS 中使用的数据源，我使用 plugin-configuration (pom.xml) 中的 persistenceXml 设置配置了一个自定义的 persistence.xml 模板

```
<configuration>
   <variant>jpa2</variant>
   <persistenceXml>src/main/etc/persistence.xml</persistenceXml>
</configuration> 
```

这是模板：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence version="2.0">
    <persistence-unit name="##generated">
        <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>
</persistence> 
```

由于使用 maven 运行测试时没有数据源，因此往返测试失败。有没有办法忽略该`jta-data-source`选项并回退到persistence.properties，或者在其中生成一个替代persistence.xml `src/test/resources`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:52:54.097

是的，正如您所指出的，使用非容器管理的数据源进行测试是有意义的。您可以在 /src/test/resources 下定义单独的定义（或使用属性文件），并且在运行测试时这应该优先于 src/main/resources 上的定义。

[Junit 运行未选择文件 src/test/resources. 对于某些依赖 jar 所需的文件](https://stackoverflow.com/questions/2764723/junit-run-not-picking-file-src-test-resources-for-file-required-by-some-depende)

# php - php csv到数组

> ID：11453564
> 
> 赞同：0
> 
> 时间：2012-07-12T14:03:17.703
> 
> 标签：php, arrays, csv

我对 php 相当陌生，从堆栈溢出问题中得到了这个，似乎无法让它为我工作。

```
<?php
if (($handle = fopen("fullbox.csv", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    echo "<pre>".print_r($data)." <br /></pre>";
}
fclose($handle);
}
echo $data[1];
?> 
```

我需要使用大量产品（我可以从我的 csv 文件中提取）设置几个数组来定价。Fullbox.csv 仅包含 10 个数字和 2 个小数位。我一直在尝试对此进行测试，这是我得到的输出：

数组（ [0] => 8.53 ）

数组（ [0] => 4.74 ）

数组（ [0] => 5.00 ）

数组（ [0] => 2.50 ）

数组（ [0] => 6.48 ）

数组（ [0] => 3.99 ）

数组（ [0] => 8.53 ）

数组（ [0] => 4.74 ）

数组（ [0] => 8.53 ）

数组（ [0] => 4.74 ）

为什么数组在数组的 [0} 占位符中设置所有值，以及为什么每行之间有一个 1。提前致谢。

*更新*如果这是一个十项数组，那么它应该返回数组中第 1 个条目的值，但它没有。我基本上只需要存储所有价格，以便以后可以将它们用作变量。我不需要打印它们。再次感谢。

```
echo $data[1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:05:29.023

`print_r`默认不*返回*格式化数组；它输出它并返回`1`。`true`作为第二个参数传递。

```
echo "<pre>".print_r($data, true)." <br /></pre>"; 
```

所有值都在数组的`0`索引中，因为数组从 开始`0`。那里没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:06:11.793

尝试这个：

```
$f = fopen(yourfile, "r");
$fs = filesize(yourfile);
$content = fread($f, $fs);

$lines = explode("\n", $content);
$result = array();
foreach($lines as $line) $result[] = explode(",", $line); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:06:41.410

逗号分隔值中的 CSV 是每行的一个数组。所以每一行——即使它只有一个值——都是数组。

你也不需要回显“print_r”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T16:15:54.103

您还可以使用以下函数从 CSV 读取数据并使用 usort() 函数进行排序。

[http://www.pearlbells.co.uk/how-to-sort-a1a2-z9z10aa1aa2-az9az10-using-php/](http://www.pearlbells.co.uk/how-to-sort-a1a2-z9z10aa1aa2-az9az10-using-php/)

```
 Read data from the CSV

function readCSV() {
 $csv = array_map('str_getcsv', file('data.csv'));
 array_shift($csv); //remove headers
 $csvData = splitandSort($csv);
 createCSV($csvData);
} 
```

# r - R：按属性按数字升序对二维数组进行排序

> ID：11453569
> 
> 赞同：1
> 
> 时间：2012-07-12T14:03:21.450
> 
> 标签：r, sorting

我使用`tapply`R 中的函数创建了一个持续时间的数组“持续时间”。与数组向量关联的属性是“字符”类，我相信这就是为什么它们`"1" "10" "100" "2" "20" "200"...`在代码中像下面的示例那样排序。

上述属性与行程编号相关联，我想按此编号按升序（1、2、3 ...）排序。我曾尝试使用`order`, `sort`, 转换为`data.frame`等进行各种攻击，但均未成功。请帮忙！

我的代码如下。

* * *

```
tripDur <- function (aDate) {
    difftime(max(aDate), min(aDate), units = "hours")   
}

tmp<- tapply(gps$D_DATE, gps$trip, tripDur)
duration <- tmp; duration

> duration
         1         10        100        101        102        103        104        105 
14.8155556  4.6188889  1.6166667 15.9366667 27.4000000 18.1200000 16.8522222 16.9066667

> str(duration)
num [1:158(1d)] 14.82 4.62 1.62 15.94 27.4 ...
 - attr(*, "dimnames")=List of 1
  ..$ : chr [1:158] "1" "10" "100" "101" ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:01:37.040

尝试一些类似的东西。

```
> my.vec <- letters[1:5]
> names(my.vec) <- c("1", "10", "5", "100", "13")
> my.vec
  1  10   5 100  13 
"a" "b" "c" "d" "e" 
> my.vec[order(as.numeric(names(my.vec)))]
  1   5  10  13 100 
"a" "c" "b" "e" "d" 
```

# asp.net-mvc - mvc [DataType(DataType.EmailAddress) 没有验证

> ID：11453574
> 
> 赞同：32
> 
> 时间：2012-07-12T14:03:38.563
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations

我在电子邮件字段上使用此代码：

```
 [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; } 
```

`[DataType(DataType.EmailAddress)]`不起作用（不在客户端的服务器上不会发生验证）。

我不确定是否应该为自己实现一个自定义属性，或者我可以使用 MVC 3 中包含的一个。

如果需要，您能否建议我创建自定义属性的解决方案。

我还阅读了一些额外的扩展，例如 [http://nuget.org/packages/DataAnnotationsExtensions.MVC3](http://nuget.org/packages/DataAnnotationsExtensions.MVC3)

你会推荐给我吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-12T14:20:40.407

您只需使用 [EmailAddress] 即可使用通常的 DataAnnotations 库

```
using System.ComponentModel.DataAnnotations;
    [Required]
    [EmailAddress]
    public String Email { get; set; } 
```

也仅供参考，这是此验证的正则表达式版本：

```
 [RegularExpression(@"^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-‌​]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$", ErrorMessage = "Email is not valid")]
    public String Email {get; set;} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-12T14:15:37.750

目前我已经使用 DataAnnotationsExtensions 解决了我的问题

它只是工作，你用 NuGet 添加他们的库

```
using DataAnnotationsExtensions;

[Required]
    [DataType(DataType.EmailAddress)]
    [Email]
    public string Email { get; set; } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-29T00:10:53.400

看起来所有的答案都集中在数据模型上，而这个问题可能会受到视图本身的影响。

MVC .NET 4.5 上的以下操作正常：

数据模型：

```
[Required]
[DataType(DataType.EmailAddress)]
[DisplayName("Email")]
public string Email { get; set; } 
```

剃刀视图：

```
@Html.LabelFor(model => model.Email)
@Html.EditorFor(model => model.Email) 
```

**注意：**不需要添加[EmailAddress] 属性。如果您在视图中使用 [DataType(DataType.EmailAddress)] 和 @Html.EditorFor() ，您应该没问题。

正如rich.okelly 所强调的那样，最后您希望您的输入呈现为`<input type="email" />`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-27T20:35:08.173

可能这对某人有帮助。以下对我有用

```
[Required(ErrorMessage = "*")]
[DataType(DataType.EmailAddress)]
[EmailAddress]
public string Email { get; set; } 
```

但以下不起作用

```
[Required(ErrorMessage = "*")]
[DataType(DataType.EmailAddress)]
public string Email { get; set; } 
```

我正在使用`MVC 5`&`.NET 4.5`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-15T15:25:07.880

正如[菲利克斯所提到](https://stackoverflow.com/a/25559841/1372621)的，问题出在`View`关卡上，您需要`EditorFor()`在您的`View`而不是使用中`TextBoxFor()`，`EditorFor()`将呈现：

```
<input type="email" /> 
```

这将触发验证，而`TextBoxFor()`将呈现：

```
<input type="text" /> 
```

因此，为了验证您输入的电子邮件地址，您只需要（结合`EditorFor()`）使用：

```
[DataType(DataType.EmailAddress)]
public string Email { get; set; } 
```

这样，您输入的电子邮件值将始终得到验证，但如果您不输入电子邮件值，则不会发生任何事情（除非您指定了`[Required]`属性），表单将使用空电子邮件地址提交。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-29T07:09:11.607

**[DataType(DataType.EmailAddress)]**无法识别**@**和**[EmailAddress]**无法识别**.com**，所以使用**RegularExpression**：

```
[RegularExpression(@"^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-‌​]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$", ErrorMessage = "Email is not valid")] 
```

# excel - 使用 VBA 将 Excel 数据保存为 csv - 删除文件末尾的空白行以保存

> ID：11453575
> 
> 赞同：4
> 
> 时间：2012-07-12T14:03:42.573
> 
> 标签：excel, csv, vba

我正在 VBA 中创建一组 csv 文件。

我的脚本正在创建我需要的数据集，但循环的多次迭代中的行数不同。例如，对于 i=2，我有 100,000 行，但对于 i=3，我有 22,000 行。问题是当 Excel 保存这些单独的 csv 文件时，它不会在末尾截断空间。这会在文件末尾留下 78,000 个空白行，这是一个问题，因为我需要生成大约 2,000 个文件，每个文件都有几兆字节大。（我在 SQL 中有一些我需要的数据，但不能在 SQL 本身中进行数学运算。长话短说。）

手动保存时通常会出现此问题 - 您需要在删除行后关闭文件，然后重新打开，在这种情况下这不是一个选项，因为它在 VBA 中自动发生。使用另一种语言的脚本保存后删除空白行并不是一个真正的选择，因为我实际上需要输出文件以适合可用的驱动器，而且它们现在不必要地巨大。

我试过了`Sheets(1).Range("A2:F1000001").ClearContents`，但这不会截断任何东西。删除行在保存之前应该同样没有影响，因为 Excel 将所有行保存到文件末尾，因为它存储了操作的最右下角的单元格。有没有办法让excel只保存我需要的行？

这是我用来保存的代码：（截断发生在早些时候，在调用这个的路由中）

```
Sub SaveCSV()
'Save the file as a CSV...
  Dim OutputFile As Variant
  Dim FilePath As Variant

  OutputPath = ActiveWorkbook.Worksheets("Macro").Range("B2").Value
  OutputFile = OutputPath & ActiveWorkbook.Worksheets("Macro").Range("B1").Value
  Application.DisplayAlerts = False 'DISABLE ALERT on Save - overwrite, etc.
  ActiveWorkbook.SaveAs Filename:=OutputFile, FileFormat:=xlCSV, CreateBackup:=False
  Application.DisplayAlerts = True 'DISPLAY ALERTS
End Sub 
```

相关的代码在这里：

```
'While looping through Al, inside of looping through A and B...
'Created output values needed in this case, in an array...

Sheets(1).Range("A2:E90001") = Output

ActiveWorkbook.Worksheets(1).Range("F2").Formula = "=(does not matter, some formula)"
ActiveWorkbook.Worksheets(1).Range("F2").AutoFill Destination:=Range("F2:F90001")

'Set Filename to save into...
ActiveWorkbook.Worksheets("Macro").Range("B1").Value = "Values_AP" & Format(A, "#") & "_BP" & Format(B, "#") & "_Al" & Format(Al, "#")

'Save Sheet and reset...
Call SaveCSV
Sheets(1).Range("A2:F90001").ClearContents
CurrRow = 1

Next Al 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T05:05:48.613

您可以在`UsedRange`不删除列和行的情况下重新计算自身

```
ActiveSheet.UsedRange 
```

[或者，您可以通过使用诸如DRJ 的 VBAexpress 文章之类的](http://www.vbaexpress.com/kb/getarticle.php?kb_id=83)代码删除最后使用的单元格下方的区域，或使用诸如[ASAP Utilities](http://www.asap-utilities.com/)之类的插件来自动手动删除“false” usedrange

DRJ文章中的功能是；

```
Option Explicit 

Sub ExcelDiet() 

Dim j               As Long 
Dim k               As Long 
Dim LastRow         As Long 
Dim LastCol         As Long 
Dim ColFormula      As Range 
Dim RowFormula      As Range 
Dim ColValue        As Range 
Dim RowValue        As Range 
Dim Shp             As Shape 
Dim ws              As Worksheet 

Application.ScreenUpdating = False 
Application.DisplayAlerts = False 

On Error Resume Next 

For Each ws In Worksheets 
    With ws 
         'Find the last used cell with a formula and value
         'Search by Columns and Rows
        On Error Resume Next 
        Set ColFormula = .Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlFormulas, _ 
        LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious) 
        Set ColValue = .Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlValues, _ 
        LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious) 
        Set RowFormula = .Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlFormulas, _ 
        LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious) 
        Set RowValue = .Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlValues, _ 
        LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious) 
        On Error GoTo 0 

         'Determine the last column
        If ColFormula Is Nothing Then 
            LastCol = 0 
        Else 
            LastCol = ColFormula.Column 
        End If 
        If Not ColValue Is Nothing Then 
            LastCol = Application.WorksheetFunction.Max(LastCol, ColValue.Column) 
        End If 

         'Determine the last row
        If RowFormula Is Nothing Then 
            LastRow = 0 
        Else 
            LastRow = RowFormula.Row 
        End If 
        If Not RowValue Is Nothing Then 
            LastRow = Application.WorksheetFunction.Max(LastRow, RowValue.Row) 
        End If 

         'Determine if any shapes are beyond the last row and last column
        For Each Shp In .Shapes 
            j = 0 
            k = 0 
            On Error Resume Next 
            j = Shp.TopLeftCell.Row 
            k = Shp.TopLeftCell.Column 
            On Error GoTo 0 
            If j > 0 And k > 0 Then 
                Do Until .Cells(j, k).Top > Shp.Top + Shp.Height 
                    j = j + 1 
                Loop 
                If j > LastRow Then 
                    LastRow = j 
                End If 
                Do Until .Cells(j, k).Left > Shp.Left + Shp.Width 
                    k = k + 1 
                Loop 
                If k > LastCol Then 
                    LastCol = k 
                End If 
            End If 
        Next 

        .Range(.Cells(1, LastCol + 1), .Cells(.Rows.Count, .Columns.Count)).EntireColumn.Delete 
        .Range("A" & LastRow + 1 & ":A" & .Rows.Count).EntireRow.Delete 
    End With 
Next 

Application.ScreenUpdating = True 
Application.DisplayAlerts = True 

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:34:14.563

Excel 保存[`UsedRange`](http://office.microsoft.com/en-in/excel-help/HV080555081.aspx). 为了截断`UsedRange`，您需要删除整行并保存文件。

如果这不是一个选项，请插入一个新工作表，将准备好的数据复制到其中（从而保留其`UsedRange`匹配的实际数据），使用`Worksheet.SaveAs`（而不是`Workbook.SaveAs`）并删除工作表。

尽管这里的实际问题是为什么您`UsedRange`首先会变得那么大。

# jquery - ddslick 选择选项不会发布所选选项的值 - jquery 插件

> ID：11453578
> 
> 赞同：9
> 
> 时间：2012-07-12T14:04:01.213
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 ddslick 制作带有图标的下拉菜单，唯一的问题是当我发布表单时，所选选项的值始终为空，如果我关闭 ddslick，它就可以正常工作。

```
<script language="javascript" type="text/javascript">
$('.cflagdd').ddslick({
 onSelected: function(selectedData){
    //callback function: do something with selectedData;
   // $('#editcflag').submit(); - this does not work, posts form on page load
}   
});
</script>

<select class="cflagdd" name="cflag">
<option value="0" selected="selected">No action flag set</option>
<option value="1" data-imagesrc="'.base_url().'images/Actions-flag-green-icon.png">Resolved</option>
<option value="2" data-imagesrc="'.base_url().'images/Actions-flag-yellow-icon.png">Investigate</option>
<option value="3" data-imagesrc="'.base_url().'images/Actions-flag-red-icon.png">Urgent</option>
<option value="4" data-imagesrc="'.base_url().'images/Actions-flag-blue-icon.png">False positive</option>
</select> 
```

版本：Jquery-1.7.2.js jQuery UI - v1.8.20

感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-29T18:04:47.637

ddslick 中有一个错误，它使隐藏的输入没有名称属性。

我能够在 ddslick 中添加几行以使其将选择的名称属性添加到它创建的隐藏元素中。

一、下载ddslick的未压缩版：http: [//dl.dropboxusercontent.com/u/40036711/Scripts/jquery.ddslick.js](http://dl.dropboxusercontent.com/u/40036711/Scripts/jquery.ddslick.js)

然后在第 106 行或以 "var ddSelect = ..." 开头的行之后添加以下内容：

```
// set hidden input name
ddSelect.find('input.dd-selected-value').attr('name', $(this).attr('name')); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T19:28:35.947

也许是比这个更好的解决方案，但是当我遇到这个问题时，我将选择的值放入隐藏的输入元素中。

```
<script language="javascript" type="text/javascript"> 
    $('.cflagdd').ddslick({  
        onSelected: function(selectedData){  
            if(data.selectedIndex > 0) {
                $('#hidCflag').val(data.selectedData.value);

                $('#editcflag').submit();
            }   
        }    
    }); 
</script>  

<input type="hidden" name="hidCflag" id="hidCflag" value="" />

<select class="cflagdd" name="cflag"> 
    <option value="0" selected="selected">No action flag set</option> 
    <option value="1" data-imagesrc="'.base_url().'images/Actions-flag-green-icon.png">Resolved</option> 
    <option value="2" data-imagesrc="'.base_url().'images/Actions-flag-yellow-icon.png">Investigate</option> 
    <option value="3" data-imagesrc="'.base_url().'images/Actions-flag-red-icon.png">Urgent</option> 
    <option value="4" data-imagesrc="'.base_url().'images/Actions-flag-blue-icon.png">False positive</option> 
</select> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T01:01:46.217

Snipe656 概念性想法有效，但脚本有错误。正确的脚本部分应该是：

```
<script language="javascript" type="text/javascript"> 
    $('.cflagdd').ddslick({  
        onSelected: function(data){  
            if(data.selectedIndex > 0) {
                $('#hidCflag').val(data.selectedData.value);

                $('#editcflag').submit();
            }   
        }    
    }); 
</script> 
```

(...)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-07T18:39:17.737

```
Solution
<select id="status" name="status" class="ddslick" >
        <option  value="1">Admin Only</option>
        <option  value="2">Editing</option>
        <option value="3">Review</option>
        <option  value="4">Live</option>
</select>

<script>
$("select.ddslick").each(function(){
        var name =  $(this).attr('name');
        var id = $(this).attr('id');
        $("#"+id).ddslick({
            showSelectedHTML: false,
            onSelected: function(selectedData){
                $("#"+id+ " .dd-selected-value").prop ('name', name);
             }  
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-08T10:23:44.133

**在jquery.ddslick.min.js**中找到此文本并为其 添加名称

```
<input class="dd-selected-value" type="hidden" /> 
```

这将向服务器发送正确的数据

```
<input class="dd-selected-value" name="cflag" type="hidden" /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-18T12:19:28.300

下载稳定版

[https://raw.githubusercontent.com/jsmodules/ddslick/master/src/jquery.ddslick.js](https://raw.githubusercontent.com/jsmodules/ddslick/master/src/jquery.ddslick.js)

我已经尝试了几乎所有给出的答案。有些不适用于多个实例，而另一些则破坏了固定脚本的链接。我发现这个最新版本的 ddSlick 实际上修复了这个“错误”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-05T15:23:49.730

设法通过动态添加名称到存储所选选项值的隐藏输入来修复它。

在 HTML 中：

```
<select id='locationList'> 
  <option value="a">a</option>
  ...
</select> 
```

在 Javascript 中：

1.  “ddslick”它：

    ```
    $('#locationList').ddslick(); 
    ```

2.  动态添加名称属性到隐藏

    ```
    $('#locationList').find('input[type=hidden]:first').attr("name", "location"); 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-11T09:50:42.883

这是解决此问题的方法：

[https://github.com/ahmeij/ddslick/commit/6a085996428dd6f1a06a6fd2195c8f4f13d8ab28](https://github.com/ahmeij/ddslick/commit/6a085996428dd6f1a06a6fd2195c8f4f13d8ab28)

在未缩小的源代码中找到此行（在第 103 行附近）

```
 obj.addClass('dd-container').append(ddSelectHtml).append(ddOptionsHtml); 
```

并在下面添加：

```
// Inherit name attribute from original element
obj.find("input.dd-selected-value").attr("name", $(original).attr("name")) 
```

**这为我解决了这个问题！**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T16:35:22.583

您**必须**将 ddslick 的*selectedData*放在*input.hidden*之类的字段*中*。然后，*ddslick*将*输入*元素呈现为 HTML。当您进行简单的表单提交时，html 元素无法发送数据。;)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-22T16:51:39.220

ddslick 插件更改所有选择标签，并`<input>`为它们创建一个新的隐藏字段。查看您的代码，您可能会发现未定义的输入：

```
<input name="undefined" id="undefined" class="dd-selected-value" type="hidden" value="1"> 
```

[在插件页面](http://designwithpc.com/Plugins/ddSlick)上并不是所有的事情都需要明确的是，插件需要一个周围的 div 以及一个名称和 id 才能使 select-tag 正常工作。所以使用：

```
<div id="cflagdd_container">
    <select class="cflagdd" name="cflag" id="cflag">
          <option value="0">No action</option>
          <option value="1" selected data-imagesrc="...">Resolved</option>
          ...
     </select>
</div> 
```

现在你有一个有效的输入：

```
<input name="cflag" id="cflag" class="dd-selected-value" type="hidden" value="1"> 
```

请参阅 jquery 中的容器：

```
$('.cflagdd_container').ddslick(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-18T07:17:06.250

@约翰·J

我和你有同样的问题。所有这些提示/提示都没有帮助。

ddslick 的问题。没有与所选项目一起发送的名称，但是这个

应该。

试试这个继任者：

[http://ddslickremablized.remabledesigns.com/](http://ddslickremablized.remabledesigns.com/)

您的错误已在此版本中修复。所选项目将正确发送到服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-01T11:09:25.893

你可以试试这个，它对我有用。

```
$('.cflagdd').ddslick({
 onSelected: function(selectedData){
    $('.dd-selected-value').prop ('name', 'cflag');
}   
}); 
```

# coffeescript - 使用 Spine.js 控制器堆栈时未添加“活动”类

> ID：11453581
> 
> 赞同：2
> 
> 时间：2012-07-12T14:04:12.563
> 
> 标签：coffeescript, spine.js

我有两个非常简单的 Spine.js 控制器：

```
class ListController extends Spine.Controller
    className: 'list'
    constructor: () ->
        super

class DetailController extends Spine.Controller
    className: 'detail'
    constructor: () ->
        super 
```

控制器堆栈

```
class Application extends Spine.Stack
    className: 'mystack'
    controllers:
         list: ListController
         detail: DetailController 
```

和相应的 HTML 标记

```
<div class="mystack">
    <div class="list">list</div>
    <div class="detail">detail</div>
</div> 
```

我的问题是当控制器堆栈实例化时

```
app = new Application()
app.list.active() 
```

没有`active`向`div.list`元素添加类。div 保持不变。

那有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:37:50.547

我刚刚得到它，所以我将描述基本的工作示例。上面的代码有几个问题（由于我对 Spine.js 控制器堆栈如何工作的误解 :-)

首先，适当的 HTML 元素必须与堆栈管理的每个控制器相关联。当控制器堆栈实例化控制器时，它仅将`stack`（即自身）实例作为参数传递给构造函数。所以控制器构造函数必须考虑到它（例如如下）：

```
class ListController extends Spine.Controller
    constructor: (parameters) ->
        @stack = parameters.stack
        @el = $ @stack.settings.listSelector
        super

class DetailController extends Spine.Controller
    constructor: (parameters) ->
        @stack = parameters.stack
        @el = $ @stack.settings.detailSelector
        super 
```

和堆栈：

```
class Application extends Spine.Stack
    settings:
        listSelector: '.list'
        detailSelector: '.detail'
    controllers:
        list: ListController
        detail: DetailController
    default:
        'list' 
```

然后可以实例化控制器堆栈：

```
app = new Application
    el: $ '.mystack' 
```

`ListController`默认情况下将处于活动状态（即添加了相应`div`的`active`类），以后您可以随时调用`@stack.detail.active()`或`@stack.list.active()`从控制器实例方法激活所需的控制器并“隐藏”（即删除`active`类）其他控制器。

**编辑：** 我们与@aschmid00 讨论了这个问题。实际上，控制器构造函数不必`@stack`手动设置自己的属性。当基构造函数被调用时，它会自动完成`super`。但是如果由于事件委托等原因，必须在调用基本构造函数*之前*`@el`设置这个问题。

# java - Java Set 无法区分不同的对象

> ID：11453582
> 
> 赞同：0
> 
> 时间：2012-07-12T14:04:16.237
> 
> 标签：java, equals, hashcode, treeset

我有一个类***Human***，其中包含两个字段***age(int)***和***name(String)***。使用 Eclipse，我用这两个字段覆盖了***hashCode()***和***equals()方法。***我还根据***年龄***字段创建了一个**比较器。**

 *现在，我创建了一个带有年龄**比较器的****TreeSet**对象，以及**Human**类的两个实例（具有不同的字段值） 。然后我将这两个对象添加到集合中，但是，集合中始终只有一个对象。

 ****为了理解问题，我打印出这两个对象的哈希值，发现它们是不同的。然后，我测试了他们的***equals()***方法，当我比较具有不同字段值的两个实例时，它确实输出**false 。**所以现在，我无法弄清楚为什么**TreeSet**不能处理（区分）问题。谁能给我一些帮助？非常感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:08:06.957

TreeSet 根本不使用`hashCode()`and `equals()`。它使用您作为参数传递的比较器（或`compareTo()`对象的方法，如果它们是 Comparable 并且您不提供比较器）。`compare()`如果（或`compareTo()`）在比较这两个对象时返回 0，则 TreeSet 认为两个对象相等。

因此，如果您的比较器仅比较人类的年龄，则所有具有相同年龄的人类都将被视为相等。如果您希望人类在年龄和姓名相同时被认为是平等的，那么比较器应该按年龄进行比较，如果年龄比较返回 0，则按姓名进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:08:24.247

[从文档](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

> 之所以如此，是因为 Set 接口是根据 equals 操作定义的，但是 TreeSet 实例使用其 compareTo（或 compare）方法执行所有元素比较，因此从定，相等。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。*****

# javascript - 使用 javascript 从字符串自动生成标签

> ID：11453584
> 
> 赞同：3
> 
> 时间：2012-07-12T14:04:21.370
> 
> 标签：javascript, regex, replace, match

我需要 - 自动 - 为文本字符串生成标签。在这种情况下，我将使用这个字符串：

```
var text = 'This text talks about loyalty in the Royal Family with Príncipe Charles'; 
```

我当前的实现，为 6+ 个字符长的单词生成标签，它工作正常。

```
words = (text).replace(/[^a-zA-Z\s]/g,function(str){return '';});
words = words.match(/\w{6,}/g);
console.log(words); 
```

这将返回：

```
["loyalty","Family","Prince","Charles"] 
```

问题是有时，标签应该是一组特定的单词。我需要的结果是：

```
["loyalty","Royal Family","Príncipe Charles"] 
```

这意味着，替换/匹配代码应该测试：

1.  长度为 6 个字符（或更多）的单词；和/或
2.  如果一组单词以大写字母开头，则这些单词应该在同一个数组元素中连接在一起。如果某些单词的长度少于 6 个字符，则无关紧要 - 但其中至少一个必须是 6+，例如：“Stop at The UK Guardián in London”应该返回 ["The UK Guardián", "伦敦”]

我显然在第二个要求中遇到了麻烦。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T14:14:18.737

```
var text = 'This text talks about loyalty in the Royal Family with Prince Charles. Stop at The UK Guardian in London';

text.match(/(([A-Z]\w*\s*){2,})|(\w{6,})/g) 
```

将返回

```
["loyalty", "Royal Family ", "Prince Charles", "The UK Guardian ", "London"] 
```

为了满足第二个要求，最好在找到的匹配项上运行另一个正则表达式：

```
var text = 'This is a Short Set Of Words about the Royal Family'

matches = text.match(/(([A-Z]\w*\s*){2,})|(\w{6,})/g)
matches.filter(function(m) {
    return m.match(/\w{6,}/)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:16:17.397

好的，这是一个想法。这可能不是最好的方法，但对您来说可能是一个好的开始。

为了匹配像`Royal Family`and`Prince Charles`或什至这样的字符串`The United Kingdom`，您可以编写一个正则表达式来查找以连续大写字母开头的连续单词。

这可能看起来像这样：`(A-Z(a-z){5,}* )+`

然后，您可以使用 replace 函数生成删除匹配项的新字符串，然后使用原始正则表达式匹配最小长度的单个单词。

**更新：**为了回应关于其他用户回答的评论，我添加了`{5,}`修饰符以指示一个大写字母后跟五个或更多小写字母和一个空格，一次或多次。

# asp.net - 如何添加通配符？

> ID：11453585
> 
> 赞同：0
> 
> 时间：2012-07-12T14:04:25.387
> 
> 标签：asp.net, vb.net, tsql

嗨，我是新程序员 asp.net 和 vb.net。我想使用通配符来搜索引擎。我很困惑把通配符（%）。

```
 Protected Sub search()
        Dim ds As New DataSet
        Dim cls As New Class1

        ds = cls.returndataset("select * from student where Nama_Depan like '" & nama.Text & "' ")

        viewatt.DataSource = ds
        viewatt.DataBind()

    End Sub 
```

提前感谢您的帮助，如果之前有人问过这个问题，我真的很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:26:56.067

正如其他人已经指出的那样

```
select * from student where Nama_Depan like '%" & nama.Text & "%' 
```

是使用通配符的正确方法

这是 W3Schools 关于 SQL 通配符的教程的链接：http: [//www.w3schools.com/sql/sql_wildcards.asp](http://www.w3schools.com/sql/sql_wildcards.asp) 我建议您快速阅读一下，W3schools 的文章通常非常好。

然而，这是从您的代码中执行 SQL 命令的一种非常糟糕的方式，有人可以很容易地将一些 SQL 代码注入您的文本框中，并且当您的查询被执行时，它可能会破坏您的数据库。

例如，如果有人输入`'; DROP TABLE * --` 您的文本框，这将允许您的第一个查询运行，然后它会删除您的所有表。

使用参数化查询或存储过程很容易解决这个问题。我个人更喜欢使用存储过程，你可以这样做。

```
CREATE PROCEDURE MyProc
(
   @param1 VARCHAR(50)
)
AS 
BEGIN
   select * from student where Nama_Depan like '%"'+@param1+'%'
END 
```

然后您只需要编辑您的 VB 代码来调用存储过程而不是执行 SQL 命令。

使用存储过程的另一个优点是它们执行速度稍快且效率更高，这是因为当您将一些 SQL 传递给数据库时，它必须将其编译成 sql 命令才能执行，存储过程已经存储在数据库中所以不需要这样做。

使用存储过程而不只是传输 SQL 语句还有一些额外的安全优势，如果有人在网络/互联网上截获您的 SQL 语句，他们可以深入了解您的数据库结构。对于存储过程，他们可能拦截的只是过程名称和一些参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:07:31.760

尝试这个。

```
 Protected Sub search()
    Dim ds As New DataSet
    Dim cls As New Class1

    ds = cls.returndataset("select * from student where Nama_Depan like '%" & nama.Text & "%' ")

    viewatt.DataSource = ds
    viewatt.DataBind()

End Sub 
```

# javascript - 如何阻止 jQuery Mobile 对 window.location 做任何事情？

> ID：11453587
> 
> 赞同：3
> 
> 时间：2012-07-12T14:04:29.093
> 
> 标签：javascript, url, jquery-mobile

基本上，我想在我自己的代码中处理哈希侦听和所有内容，但是我无法让 jQM 停止侦听哈希更改事件，并且通常对 URL 进行处理。我已经尝试过他们文档中的代码：

```
$(document).bind('mobileinit', function() {
    $.extend($.mobile, {
        hashListeningEnabled: false,
        pushStateEnabled: false,
        ajaxEnabled: false,
        linkBindingEnabled: false
    });
}); 
```

mobileinit 事件不会在第一个页面加载时被触发（即使它看起来应该如此），所以这对我不起作用。让代码执行的是将其放入 $(window).bind('load') 中，我可以在 Firebug 控制台中通过`$.mobile.hashListeningEnabled === false`这些值是否在其中正确设置来验证 - 但是，它们似乎没有做任何事情！例如，当我`<mysite>/index.html`在地址栏中输入时，它会加载我的默认页面，但如果我输入`<mysite>/index.html#anything`它只会显示 jQM 加载微调器并且从不加载任何内容（我认为是因为它正在寻找`data-role=anything`文件内部的页面，这是它的默认值功能）。此外，`pushStateEnabled`覆盖显然也不起作用，因为如果我`window.location.hash = /somethingelse.html`在任何支持的浏览器显示中运行 URL 栏`http://<mysite>/somethingelse.html`，而不是预期的`http://<mysite>/index.html#somethingelse.html`.

基本上，我想要的是让 jQuery Mobile 处理页面布局和 DOM 操作，除此之外别无其他。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:12:47.130

我不知道这些是否是要设置的正确属性（没有检查文档），但我之前遇到过这个问题。要解决它，您需要在包含脚本之前绑定事件，这样：

```
<script type="text/javascript">
    $(document).bind('mobileinit', function() {
        $.extend($.mobile, {
            hashListeningEnabled: false,
            pushStateEnabled: false,
            ajaxEnabled: false,
            linkBindingEnabled: false
        });
    });
</script>
<script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

您必须这样做的原因`mobileinit`是加载 jquery 移动文件时会触发该事件。

# ios - 我可以在 iphone 中使用 .p12 文件加密字符串吗？

> ID：11453588
> 
> 赞同：1
> 
> 时间：2012-07-12T14:04:29.740
> 
> 标签：ios, security, cryptography

我可以在 iphone/ipad 中使用 .p12 文件加密数据吗？

我尝试使用[苹果文档](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW13)，但没有运气。

我的目标是用私钥加密数据。

# excel - 强制 vba 在继续之前等待 sql 查询执行

> ID：11453592
> 
> 赞同：4
> 
> 时间：2012-07-12T14:04:41.450
> 
> 标签：excel, vba, ado

这似乎是一个相当普遍的问题，但我发现的解决方案似乎都不起作用。

我正在从 SQL Server 获取一些数据并将其复制到工作表中。然后我想从新数据中复制一个范围并用它做其他事情。所有这些都发生在一个 vba 函数中。

我的问题是当函数从 Excel 运行时，它会移动到函数的第二部分，而无需等待查询返回所需的数据。

当然，当我从 vba IDE 运行它时，该功能可以正常工作。

```
Dim a As New ADODB.Connection
Dim r As New ADODB.Recordset

a.Open (connStr)
Set r = a.Execute(sqlstr)

sht.Range("A2").CopyFromRecordset r

'please wait here until the proc has executed?

checkData = sht.Range("A2").Value 
```

当我从 Excel 运行该函数时，checkData 始终为空，当我使用 F5 运行它时，它始终具有所需的数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T13:31:59.913

尝试使用：

```
Application.CalculateUntilAsyncQueriesDone 
```

在执行 SQL 之后，但在复制 RecordSet 之前

```
Set r = a.Execute(sqlstr)
    Application.CalculateUntilAsyncQueriesDone
sht.Range("A2").CopyFromRecordset r 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:13:51.053

这行得通吗？

```
Dim a As New ADODB.Connection
Dim r As New ADODB.Recordset

a.Open (connStr)
Set r = a.Execute(sqlstr)

Do
  'Wait
Loop Until Not r Is Nothing

sht.Range("A2").CopyFromRecordset r

checkData = sht.Range("A2").Value 
```

或者，如果失败，您可以尝试测试 r 的某些属性，例如 EOF 或 BOF，如果发生错误，或者您得到一个意外值，您知道数据尚未加载。例如：

```
Dim a As New ADODB.Connection
Dim r As New ADODB.Recordset

a.Open (connStr)
Set r = a.Execute(sqlstr)

On Error Resume Next
Do
  Err.Clear
  r.EOF 'Put your test here, you might test rowcount or similar.
        'I've simply asked for the EOF property and ignored the result, I'm 
        'not sure if this will work in your case. Some testing may be required.
While Err.Num <> 0
On Error GoTo 0 'Or whatever you previously had this set to

sht.Range("A2").CopyFromRecordset r

checkData = sht.Range("A2").Value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T23:21:42.850

这可能会有所帮助。不要在代码中设置数据源，而是在目标工作表上将其设置为数据连接（Excel 菜单数据 | 从其他来源 | 等）。创建名为“（默认）”的连接对象后，您可以在代码中按照以下几行点击它：

```
 With ActiveWorkbook
    .Connections("(Default)").OLEDBConnection.BackgroundQuery = False
    .Connections("(Default)").OLEDBConnection.CommandText = sqlstr
    .RefreshAll
    ' do more stuff
    ' will wait for .RefreshAll to complete because .BackgroundQuery = false
  End With 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T02:18:25.823

我认为您需要`r.movelast`在执行后确保所有行都返回。

就像是

```
Set r = a.Execute(sqlstr)

If Not r.EOF Then
    r.MoveLast
End If

sht.Range("A2").CopyFromRecordset r 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T15:03:27.603

按照 andy holaday 的思路，我通过取消选中外部数据范围属性中的“启用后台刷新”来实现这一点。禁用此功能会强制 excel 在查询运行时等待。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T22:16:34.280

但是，如果没有返回记录集，我发现这段代码将等到 SQL 代码返回，然后再转到下一个 VBA 语句。当一个命令依赖于另一个命令或者如果您需要在继续之前创建整个数据集时会很方便。

```
Dim Con As ADODB.Connection
Dim CmdTxt As String

Set Con = New Connection
Con.ConnectionString = ThisWorkbook.GetYourConnectString()
Con.Open

CmdTxt = "EXEC db.schema.StoredProc1 @Param1 = 'Yes'"
ExecuteSql Con, CmdTxt, True, True

CmdTxt = "EXEC db.schema.StoredProc2 @Param1 = 'No'"
ExecuteSql Con, CmdTxt, True, True

MsgBox "Both commands completed sequentially" 
```

ExecuteSql 的代码是：

```
Public Function ExecuteSql(Con As ADODB.Connection, sql As String, _
    Optional StopOnError As Boolean = True, _
    Optional WaitUntilDone As Boolean = False) As String

Dim cmd As ADODB.Command
Set cmd = New ADODB.Command

With cmd

    .CommandType = 1
    .CommandText = sql
    .ActiveConnection = Con

    If WaitUntilDone = True Then
        .CommandTimeout = 0 'set timeout to unlimited
        .Execute , , adExecuteNoRecords 'no records value speeds up internal code
    Else
        .Execute
    End If

End With

ExecuteSql = ""

Exit Function 
```

# javascript - 在 CSS 更改后立即读取元素的视觉属性？

> ID：11453596
> 
> 赞同：1
> 
> 时间：2012-07-12T14:04:56.370
> 
> 标签：javascript, html, css

我正在尝试使用 CSS 更改 HTML 页面上的元素，然后立即读取其视觉属性。但是，CSS 强制样式直到稍后（下一个“框架”）才应用。

CSS：

```
.node {
    width: 10px;
} 
```

JavaScript：

```
// Create element
var element = document.createElement("div");
element.className = "node";
document.body.appendChild(element);

console.log(element.clientWidth); 
```

上面调用的输出`log`应该是`10`，但`NaN`如果立即调用它（但它被正确读取为`10`在一帧之后）。

使用`getComputedStyle()`给出了类似的结果：

```
var style = getComputedStyle(element);
console.log(element.style); 
```

首次运行时输出为“”，但在第一帧之后为“10px”（正确）。

我假设我必须等待一次浏览器的重新布局，直到我可以读取该属性。有没有办法强制浏览器计算该元素的尺寸？或者那可能是不好的做法；有没有一种简单的方法来读取 CSS 的 width 属性？

换句话说，这里的最佳做法是什么？

注意：这里尽量避免使用 jQuery 或其他库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:10:49.737

尝试访问`computedStyle`。

```
var computedStyle = document.defaultView ? document.defaultView.getComputedStyle(element, null) : element.currentStyle; 
```

然后阅读

```
console.log( computedStyle.width); 
```

示例：http: [//jsfiddle.net/mGCT5/1/](http://jsfiddle.net/mGCT5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:33:27.360

您说得对，浏览器必须执行重排才能确定更改的属性的效果（并因此读取更改的值）。我相信您知道，JavaScript 是由浏览器的内部*事件循环*执行的。直到当前事件的 JS 代码完全执行**后**才会执行回流。

要解决您的问题，您可以使用[`setImmediate()`](https://developer.mozilla.org/en/DOM/window.setImmediate). 这使您可以将要*尽快*处理的新事件排队。您基本上“屈服”，允许回流发生，然后跳回完成其余代码：

```
var element = document.createElement("div");
element.className = "node";
document.appendChild(element);

setImmediate(function() {
    console.log(element.clientWidth);
}); 
```

请注意，到目前为止，很少有流行的浏览器支持`setImmediate`. 作为一种解决方法，您可以[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)延迟使用`0`：

```
setTimeout(function() {
    console.log(element.clientWidth);
}, 0); 
```

这是一个工作示例：[jsbin.com/ehigor](http://jsbin.com/ehigor/edit)

还要记住，你放在块之后的任何代码都将在`setTimeout`块内的代码之前执行，在当前“帧”结束之前，因此在回流之前。

**更新：**

[jAndy的回答](https://stackoverflow.com/a/11453715/990877)是对的；`getComputedStyle`将解决OP的问题。在这种情况下，不需要重排，因为您要做的就是读取设置的 CSS 属性。

之所以`getComputedStyle`需要这样做是因为样式规则没有在 JavaScript 中设置。与 不同`element.style`，`getComputedStyle`将考虑在外部 CSS 文件中设置的样式规则以及浏览器的默认样式规则。

有些情况`getComputedStyle`是**不够****的**，需要重排：当样式规则的值与样式的实际最终值不直接相关时。最值得注意的情况是**相对**尺寸和位置。如果您设置`width`为 (例如) `50%`，但您想读取元素的宽度（以**像素**为单位），您只能通过让浏览器执行重排来找出该值是多少（在这种情况下`setTimeout`很有用）。另一方面，如果您想知道`width`设置为`"50%"`; 使用`getComputedStyle`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T14:08:06.427

也许在检查宽度之前使用 setTimeout 等待半秒？

# xcode - XCode 4.2 - Openssl 构建错误

> ID：11453600
> 
> 赞同：0
> 
> 时间：2012-07-12T14:05:00.373
> 
> 标签：xcode, openssl, ios-simulator

我已经成功地为 iPhone 模拟器创建了 OpenSSL 库。我已经成功导入了所有的头文件和库。但是，我在构建项目时遇到问题，XCode 告诉我**struct X509_ALGOR 的定义不完整**。这是代码：

```
- (NSData *)encodePBEWithMD5AndDESData:(NSData *)inData password:(NSString *)password direction:(int)direction
{   
// Change salt and number of iterations for your project !!!

static const char gSalt[] =
{
    (unsigned char)0xaa, (unsigned char)0xd1, (unsigned char)0x3c, (unsigned char)0x31,
    (unsigned char)0x53, (unsigned char)0xa2, (unsigned char)0xee, (unsigned char)0x05
};

unsigned char *salt = (unsigned char *)gSalt;
int saltLen = strlen(gSalt);
int iterations = 15;

EVP_CIPHER_CTX cipherCtx;

unsigned char *mResults;         // allocated storage of results
int mResultsLen = 0;

const char *cPassword = [password UTF8String];

unsigned char *mData = (unsigned char *)[inData bytes];
int mDataLen = [inData length];    

SSLeay_add_all_algorithms();
X509_ALGOR *algorithm = PKCS5_pbe_set(NID_pbeWithMD5AndDES_CBC,
                                      iterations, salt, saltLen);

memset(&cipherCtx, 0, sizeof(cipherCtx));

if (algorithm != NULL)
{
    EVP_CIPHER_CTX_init(&(cipherCtx));

    **if (EVP_PBE_CipherInit(algorithm->algorithm, cPassword, strlen(cPassword),
                           algorithm->parameter, &(cipherCtx), direction))**
    {

        EVP_CIPHER_CTX_set_padding(&cipherCtx, 1);

        int blockSize = EVP_CIPHER_CTX_block_size(&cipherCtx);
        int allocLen = mDataLen + blockSize + 1; // plus 1 for null terminator on decrypt
        mResults = (unsigned char *)OPENSSL_malloc(allocLen);

        unsigned char *in_bytes = mData;
        int inLen = mDataLen;
        unsigned char *out_bytes = mResults;
        int outLen = 0; 
```

发现指向 struct X509_ALGOR 的指针（即“算法”）未完全定义。我对此一无所知。任何人都可以帮助我吗？

```
if (EVP_PBE_CipherInit(algorithm->algorithm, cPassword, strlen(cPassword),
                           algorithm->parameter, &(cipherCtx), direction)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:11:04.487

我不确定是否适合发布我自己的问题的答案。但是，如果有人有同样的问题，我会这样做，他/她可能会从中得到一些帮助。

上述代码的问题在于链接器标志。一旦我在“构建设置”下的“其他链接器标志”中设置“-ObjC -load_all”，问题就消失了。

问候。

# php - 禁止 PHP 类构造函数重载

> ID：11453601
> 
> 赞同：3
> 
> 时间：2012-07-12T14:05:01.283
> 
> 标签：php, oop, overriding

是否有可能 - 在 PHP 中 - “禁用”覆盖类的构造函数的功能？

只是为了让场景更清楚：我有一个抽象类 A，带有一个构造函数。这个构造函数对于类的工作是必不可少的。然后我有一些“兄弟姐妹”，“扩展”抽象类A。他们 - 显然 - 必须扩展该类，但我不希望他们触及构造函数。

我知道可以调用 parent::__construct()，但这样我就不会强制使用这种模式。如果我的一位同事正在实现一个扩展我的抽象类的新类，我不希望有任何混淆。当然，一切都记录在案，但你们都知道阅读内容的过程；-)

关于如何禁用构造函数覆盖的任何想法？（在这种情况下，我会创建一个可以覆盖的抽象 init() 方法，但我的“抽象构造函数”会调用那个）。或任何其他想法来实现这种想要的情况？

谢谢！尼克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T14:12:56.630

当您的类是抽象的时，您可以将构造函数声明为 final。

```
public final function __construct(){} 
```

在这个构造函数中，你可以调用你的 init() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:07:40.097

将代码从构造函数移动到另一个方法。构造函数不应该包含任何逻辑，只能通过参数初始化变量，给构造函数。
[http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:07:53.263

您可以检查哪个类调用了构造函数，以及您执行构造代码是否是父类，否则您不会

# java - 缓冲区溢出和数组溢出——简单解释

> ID：11453605
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:05:09.217
> 
> 标签：java

我试图从 Effective Java 中理解以下几行

> 使 Java 使用起来如此愉快的一件事是它是一种安全的语言。这意味着在没有本地方法的情况下，它不会受到缓冲区溢出、数组溢出、野指针和其他困扰不安全语言（如 C 和 C++）的内存损坏错误的影响。在安全的语言中，可以编写类并确定地知道它们的不变量将保持正确，无论系统的任何其他部分发生什么。

什么是缓冲区溢出、数组溢出（我不想在这里提供太多细节，只是简单的概述）以及 Java 的哪些特性使程序不受溢出的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:12:42.037

当您尝试查找数组边界之外的值时， Java 会抛出一个`ArrayIndexOutOfBoundsException`错误，而不是导致段错误、不可预测的（从安全角度来看可能是有问题的）行为，或者只是使您的操作系统崩溃。

（是的，这就是 C、C++ 等所做的。）

# ruby-on-rails - 导轨中链接的 i18n

> ID：11453606
> 
> 赞同：1
> 
> 时间：2012-07-12T14:05:12.277
> 
> 标签：ruby-on-rails, internationalization

我这样做：

```
<%= f.label t('voucher.new.accept_conditions', 
    :conditions => link_to(t('voucher.new.conditions'), '#')) %> 
```

出于某种原因，无论我做什么，输出都会被转义。我在声明的每个部分都做了 .html_safe end raw() 但无济于事。

有人可以在这里帮忙吗？它是 Rails 3.2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T07:46:23.740

只需像这样在返回的翻译上调用 .html_safe （我在 Rails 4.0.0 中尝试过）：

```
t('voucher.new.accept_conditions', :conditions => link_to(t('voucher.new.conditions'), '#')).html_safe 
```

# jquery - 从 HTML 创建 jQuery 对象时如何防止浏览器下载图片？

> ID：11453607
> 
> 赞同：1
> 
> 时间：2012-07-12T14:05:13.593
> 
> 标签：jquery, parsing, google-chrome

我站点中的用户可以从任何其他站点复制整个页面（通过 Ctrl+A）并粘贴到特殊的文本区域以从 html 中获取一些有用的数据。

但现在我看到了一些问题。当我用 jQuery 包装粘贴的 html 代码时：

```
var page = $(html); 
```

我的浏览器（Chrome）开始下载此 html 中存在的所有图片（可能不仅仅是图片）。这对我很不利，因为我使用安全 SSL 连接并从另一个站点下载图片删除了浏览器安全锁图标。

我可以关闭图片下载吗？或者如果我不能 - 我可以使用哪个库来解析 html 而无需下载不必要的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:42:43.560

`img`在将其传递给 jQuery 之前，您可以运行一个正则表达式来删除所有标签：

例如：

```
$( html.replace( /<img .*?>/ig, '' ) );​​​​ 
```

有关正则表达式修饰符和语法的更多信息，请查看 MDN： [https ://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:56:32.590

`$(html)`让 jQuery 实际上将 html 代码注入到隐藏的页面中，以计算宽度、高度、样式、距离、属性等。此操作总是使用浏览器内置的 DOM 解析器，这就是为什么图像、iframe、背景图像，脚本，链接等被访问。

您可以使用[`$.parseXML(html);`](http://api.jquery.com/jQuery.parseXML/) ，但 html 代码需要是有效格式的 xml (xhtml)。

如果您唯一关心的是图像，那么您可以使用以下代码：

```
// take the src attribute, change it to hiddensrc
// credits: http://stackoverflow.com/a/1310706/608886
var html = html.replace(/<img([^>]*)\ssrc=(['"])(?:[^\2\/]*\/)*([^\2]+)\2/gi, 
    "<img$1 hiddensrc=$2$3$2");

// parse the code
var parsed = $(html);

///////////////
//
//   do whatever you want here
//
//////////////

// put the src attribute back at your discretion
parsed.find(img[hiddensrc]).each(function(){ 
    $(this).attr('src',$(this).attr('hiddensrc')); 
}); 
```

# sql - 在 Postgresql 中选择 SELECT 查询的最小结果

> ID：11453608
> 
> 赞同：0
> 
> 时间：2012-07-12T14:05:19.297
> 
> 标签：sql, postgresql, minimum, cross-join

我有以下查询，我想计算最接近“商店”类型建筑物的用户：

```
WITH y AS (
  SELECT t.userid as us, ST_Distance(t.thegeometry,b.thegeomtry) as dist
  FROM track t,buildings b
  WHERE b.type = 'store'
)
SELECT us 
FROM   y
WHERE  dist = (SELECT MIN(dist) FROM y) 
```

问题是当我试图计算最小值时，它给了我 0 这是不正确的。在我的数据中，ID 为 112 的用户与商店 A 之间的最小距离等于 2441 米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:13:17.827

您的查询应该如下所示：

```
SELECT t.userid AS us
      ,ST_Distance(t.thegeometry, b.thegeomtry) AS dist
FROM   track t
CROSS  JOIN buildings b
WHERE  b.type = 'store'
ORDER  BY dist 
LIMIT  1; 
```

“找到离任何类型商店最近的用户”。
不需要 CTE 或聚合函数。

您可能知道查询对于较大的表非常昂贵，因为您有效地在表之间形成了有限的交叉连接`track`-`buildings`这意味着**O(N²)**。

我使用了显式`CROSS JOIN`语法（相当于以逗号分隔的表列表）来说明这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:23:58.157

我假设 ST_Distance 是一个返回数字的函数，然后尝试使用以下查询：

```
SELECT
 t.userid AS us
,MIN (ST_Distance(t.thegeometry,b.thegeomtry)) AS dist
FROM track t, buildings b
WHERE b.type = 'store'
GROUP BY t.userid
ORDER BY 2
LIMIT 1 
```

我希望你能帮忙。
维克多·祖里塔 M.

# android - 如何在 android 应用程序 (4.0.3) 中动态加载 jar 文件

> ID：11453614
> 
> 赞同：18
> 
> 时间：2012-07-12T14:05:41.053
> 
> 标签：android

我有一个必须动态加载类的android应用程序，一个未定义数量的实现接口的jar类。

实际上，我查看一个目录并列出该目录中的所有 jar 文件我打开 jar 文件的清单并找到关联的类并列出它们。之后，我实例化了一个 dexClassLoader 来加载所有 jar 文件并查找我在清单中找到的类是否实现了我的接口。像这样，我可以拥有所有实现我的接口的类，而无需一开始就知道它们

要恢复，我有一个实现我的接口的类 jar 列表，但我的 android 应用程序和我都不知道该列表。每次我启动我的应用程序时，jar 类的列表都会改变。

但是当我尝试创建 DexClassLoader 时它失败了。我总是有一个空指针

```
DexClassLoader classLoader = new DexClassLoader(dexInternalStoragePath.getAbsolutePath(),dexOutputDir.getAbsolutePath(), null, ClassLoader.getSystemClassLoader()); 
```

为了进行测试，我使用了模拟器。我已经用我的 DDMS 将 jar 文件复制到目录 /data/data/com.example.Myappli/JarFilesDirectory/*.jar

请注意，我的 jar 文件包含 dex 文件

我读了很多关于这个的东西。一些权限问题我已经尝试了所有方法但没有找到解决方案

有人能帮助我吗 ！！！

这里是 jar 文件清单的内容

清单版本：1.0

模块类：com.example.asktester.AskPeripheral

这是我的代码：

公共类模块加载器{

```
private static List<URL> urls = new ArrayList<URL>(); 

private static List<String> getModuleClasses(String folder)
{ 
    List<String> classes = new ArrayList<String>(); 

    //we are listing the jar files
    File[] files = new File(folder).listFiles(new ModuleFilter()); 

    for(File f : files)
    { 
        JarFile jarFile = null; 

        try 
        { 
            //we open the jar file
            jarFile = new JarFile(f); 

            //we recover the manifest 
            Manifest manifest = jarFile.getManifest(); 

            //we recover the class
            String moduleClassName = manifest.getMainAttributes().getValue("Module-Class"); 

            classes.add(moduleClassName); 

            urls.add(f.toURI().toURL()); 
        }
        catch (IOException e) 
        { 
            e.printStackTrace(); 
        } 
        finally
        { 
            if(jarFile != null)
            { 
                try
                { 
                    jarFile.close(); 
                }
                catch (IOException e) 
                { 
                    e.printStackTrace(); 
                } 
            } 
        } 
    } 

    return classes; 
} 

private static class ModuleFilter implements FileFilter { 
    @Override 
    public boolean accept(File file) { 
        return file.isFile() && file.getName().toLowerCase().endsWith(".jar"); 
    } 
}

private static ClassLoader classLoader; 

public static List<IPeripheral> loadModules(String folder, Context CurrentContext) throws IOException, ClassNotFoundException
{ 
    List<IPeripheral> modules = new ArrayList<IPeripheral>(); 

    List<String> classes = getModuleClasses(folder);

    final File dexInternalStoragePath = new File(CurrentContext.getDir("dex", Context.MODE_PRIVATE),"ask.dex");

     File dexOutputDir = CurrentContext.getDir("dex", Context.MODE_PRIVATE);

     final File dexClasses = new File(CurrentContext.getDir("dex", Context.MODE_PRIVATE),"ASK.jar");
     DexFile dexFile = DexFile.loadDex(dexClasses.getAbsolutePath(), dexOutputDir.getAbsolutePath(), 0);

    DexClassLoader classLoader = new DexClassLoader(dexInternalStoragePath.getAbsolutePath(),dexOutputDir.getAbsolutePath(), null, ClassLoader.getSystemClassLoader());
    //Class<?> myClass = classLoader.loadClass("com.example.asktester.AskPeripheral");

            if(IPeripheral.class.isAssignableFrom(myClass )){ 
                Class<IPeripheral> castedClass = (Class<IPeripheral>)myClass ; 

                IPeripheral module = castedClass.newInstance(); 

                modules.add(module); 
        }  
    }
        catch (ClassNotFoundException e1) 
        { 
            e1.printStackTrace(); 
        } 
        catch (InstantiationException e) 
        { 
            e.printStackTrace(); 
        }
        catch (IllegalAccessException e) 
        { 
            e.printStackTrace(); 
        } 
    } 

    return modules; 
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-19T08:43:10.103

我找到了解决我的问题的方法。

要动态加载 jar，在 android 应用程序中实现接口的类，需要在 jar 中完成一些工作：

*   为 jar 创建自己的清单并放置此信息

    ```
     Manifest-Version: 1.0
     Module-Class: com.example.myjar.MyPeripheral 
    ```

*   使用 eclipse 导出你的 jar 并输入它使用自己的清单的参数

*   创建jar关联的classes.dex（这个文件是Dalvik VM需要的，只是jar不能被dalvik VM读取）

    ```
    dx --dex --output=C:\classes.dex C:\MyJar.jar 
    ```

注意，dex 文件的名称必须是**classes.dex**

*   在jar文件中添加文件classes.dex

    ```
    aapt add C:\MyJar.jar C:\classes.dex 
    ```

*   您还需要有权写入dalvik缓存目录

    ```
     adb shell chmod 777 /data/dalvik-cache 
    ```

    每次都这样做，你重新启动你的模拟器

*   将此 jar 文件放入模拟器中，例如 SD 卡上

*   使用 PathClassLoader 加载 jar 文件

    ```
    dalvik.system.PathClassLoader myClassLoader = new dalvik.system.PathClassLoader("/Sdcard/MyJar.jar", ModuleLoader.class.getClassLoader()); 
    ```

注意：Eclipse 中的 LogCat 为您提供了宝贵的信息。不要忘记查看它的消息

下面，代码：

**我的界面**：

```
package com.example.StandartPeripheral; 

public interface IPeripheral {

    public boolean Initialize();
    public boolean configure();
    public boolean execute();
    public String GetName();
} 
```

**实现接口的 MyPeripheral**

```
public class MyPeripheral implements IPeripheral {

    //public static void main(String[] args) {}

    private final String PeripheralName = "MyPeripheral";

    public boolean Initialize()
    {

        System.out.println("Initialize "); 
        return true;
    };

    public boolean configure()
    {
        System.out.println("Configure !"); 
        return true;
    };

    public boolean execute()
    {
        System.out.println("Execute !"); 
        return true;
    };

    public String GetName()
    {
        return PeripheralName;
    }

} 
```

**如何动态加载jar文件**

```
package com.example.ModuleLoader;

import java.io.File;
import java.io.FileFilter;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.jar.JarFile;
import java.util.jar.Manifest;

import android.annotation.SuppressLint;
import android.content.Context;

import com.example.StandartPeripheral.IPeripheral;

public class ModuleLoader { 

    private static List<URL> urls = new ArrayList<URL>(); 

    // to retrieve the unknown list of jar files contained in the directory folder
        // in my case it was in the SDCard folder
        // link to create a SDCard directory on the Eclipse emulator
        // http://blog.lecacheur.com/2010/01/14/android-avoir-acces-a-une-carte-memoire-dans-lemulateur/
        // retrieve the classes of all this jar files and their URL (location)

    private static List<String> getModuleClasses(String folder)
    { 
        List<String> classes = new ArrayList<String>(); 

        //we are listing the jar files
        File[] files = new File(folder).listFiles(new ModuleFilter()); 

        for(File f : files)
        { 
            JarFile jarFile = null; 

            try 
            { 
                //we open the jar file
                jarFile = new JarFile(f); 

                //we recover the manifest 
                Manifest manifest = jarFile.getManifest(); 

                //we recover the class name of our peripherals thanks to ours manifest
                String moduleClassName = manifest.getMainAttributes().getValue("Module-Class"); 

                classes.add(moduleClassName); 

                urls.add(f.toURI().toURL()); 
            }
            catch (IOException e) 
            { 
                e.printStackTrace(); 
            } 
            finally
            { 
                if(jarFile != null)
                { 
                    try
                    { 
                        jarFile.close(); 
                    }
                    catch (IOException e) 
                    { 
                        e.printStackTrace(); 
                    } 
                } 
            } 
        } 

        return classes; 
    } 

    private static class ModuleFilter implements FileFilter { 
        @Override 
        public boolean accept(File file) { 
            return file.isFile() && file.getName().toLowerCase().endsWith(".jar"); 
        } 
    }

    //This function loads the jar file into the dalvik system
        // retrieves the associated classes using its name
        // and try to know if the loaded classes are implementing our interface

    public static List<IPeripheral> loadModules(String folder, Context CurrentContext)  { 
        List<IPeripheral> modules = new ArrayList<IPeripheral>(); 

        List<String> classes = getModuleClasses(folder);

            int index  = 0;
        for(String c : classes)
        { 
            try
            { 
                dalvik.system.PathClassLoader myClassLoader = new dalvik.system.PathClassLoader(urls.get(index).toString(), ModuleLoader.class.getClassLoader());
                Class<?> moduleClass = Class.forName(c, true, myClassLoader); 
                //check and cast to an interface, then use it
                if(IPeripheral.class.isAssignableFrom(moduleClass))             
                { 
                    @SuppressWarnings("unused")
                    Class<IPeripheral> castedClass = (Class<IPeripheral>)moduleClass; 

                    IPeripheral module =  (IPeripheral)moduleClass.newInstance(); 

                    modules.add(module); 
                }  
                index++;
        }
            catch (ClassNotFoundException e1) 
            { 
                e1.printStackTrace(); 
            } 
            catch (InstantiationException e) 
            { 
                e.printStackTrace(); 
            }
            catch (IllegalAccessException e) 
            { 
                e.printStackTrace(); 
            } 
        } 

        return modules; 
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T13:21:24.907

使用 ClassLoader 而不是 Dalvik 路径类加载器也是一个好主意：

```
 ClassLoader cl = new DexClassLoader(url, ApplicationConstants.ref_currentActivity.getFilesDir().getAbsolutePath(), null, ModuleList.class.getClassLoader()); 
```

其中 url 是您“从”加载的文件的位置。ApplicationConstants.ref_currentActivity 只是一个活动类 - 由于动态模块化加载，我的实现相当复杂 - 所以我需要以这种方式跟踪它 - 但如果该类已经是一个活动，其他人可能只使用“this”。

使用类加载器而不是 dalvik 的主要原因 - 它不需要将文件写入缓存，因此不需要权限 chmod 777 /data/dalvik-cache - 当然你也不会也需要在根电话上以编程方式从根传递此命令。

最好不要让用户仅仅因为您的应用程序需要它而被迫根植他们的手机。尤其是如果您的应用程序是更专业的“为公司使用类型”-。通常也有反对使用根电话的工作政策。

如果有人对模块化加载有任何疑问 - 请随时提问。我当前代码的基础都归功于 Virginie Voirin，以及我自己的修改。祝大家好运！

# mongoose - Mongoose.js：删除集合或数据库

> ID：11453617
> 
> 赞同：68
> 
> 时间：2012-07-12T14:05:43.040
> 
> 标签：mongoose

是否可以使用 mongoose.js 删除集合或整个数据库？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-15T15:51:51.010

是的，尽管您是通过本机 MongoDB 驱动程序而不是 Mongoose 本身来完成的。假设一个必需的、连接的、`mongoose`变量，本机[`Db`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html)对象可以通过 访问`mongoose.connection.db`，并且该对象提供[`dropCollection`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#dropcollection)和[`dropDatabase`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#dropdatabase)方法。

```
// Drop the 'foo' collection from the current database
mongoose.connection.db.dropCollection('foo', function(err, result) {...});

// Drop the current database
mongoose.connection.db.dropDatabase(function(err, result) {...}); 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2017-01-28T06:21:00.997

这现在可以在 Mongoose 中完成。

```
MyModel.collection.drop(); 
```

帽子提示：[https ://github.com/Automattic/mongoose/issues/4511](https://github.com/Automattic/mongoose/issues/4511)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-28T01:28:28.053

对于那些使用[mochajs](https://mochajs.org/)测试框架并希望在每次测试后清理所有数据库集合的用户，您可以使用以下使用 async/await 的方法：

```
afterEach(async function () {
  const collections = await mongoose.connection.db.collections()

  for (let collection of collections) {
    await collection.remove()
  }
}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-20T21:58:47.340

Mongoose 引用了每个模型上的连接。因此，您可能会发现从单个模型中删除数据库或集合也很有用。

例如：

```
// Drop the 'foo' collection from the current database
User.db.dropCollection('foo', function(err, result) {...});

// Drop the current database
User.db.dropDatabase(function(err, result) {...}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-16T07:53:44.260

对于 5.2.15 版本的 Mongoose + Mocha 测试用法，您需要在每次测试之前删除所有集合。

```
beforeEach(async () => {
     const collections = await mongoose.connection.db.collections();

     for (let collection of collections) {
          // note: collection.remove() has been depreceated.        
          await collection.deleteOne(); 
     }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-19T14:53:23.430

如果想在测试后删除集合并且您的测试在`docker`容器中运行：

```
mongoose = require("mongoose");
...
afterAll(async () => {
  const url = 'mongodb://host.docker.internal:27017/my-base-name';
  await mongoose.connect(url)
  await mongoose.connection.collection('collection-name').drop()
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-29T12:16:07.043

[我使用Connection.prototype.dropCollection()](https://mongoosejs.com/docs/api.html#connection_Connection-dropCollection)删除了我的收藏

```
const conn = mongoose.createConnection('mongodb://localhost:27017/mydb');
conn.dropCollection("Collection_name",callbacks); 
```

# php - scrollTo 仅适用于第一个链接

> ID：11453619
> 
> 赞同：-2
> 
> 时间：2012-07-12T14:05:50.317
> 
> 标签：php, jquery, scroll

我有这行代码，当用户点击链接时，页面应该向下滚动到相应的锚点。

原来它只适用于第一个链接。其他人只是触发这个异常

```
Uncaught TypeError: Cannot read property 'slice' of undefined 
```

这是代码

jQuery

```
$(document).on('click','#scrollTo',function(){

                var to = $(this).attr('class');
                //alert(to);
                //This allways print the correct class name

                $(window).scrollTo('div #'+to,'1000');

            }); 
```

PHP

```
<ul id="source">
            <?php 
            $sourceRCS = $source->getAllSources();
            foreach($sourceRCS as $src)
            {
                echo '<li data-value="'.$src->name.'"><a href="#" id="scrollTo" class="'.$src->name.'">'.$src->name.'</a></li></a>';
            }

            ?>
    </ul>
foreach($sourceRCS as $src)
{

       echo '
    <div class="custom-label-src">
         <div id="'.$src->name.'" class="span12 label-title-src">
            '.$src->name.'
         </div>
    </div>';

} 
```

我究竟做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:08:10.440

ID 应该是唯一的，但您重复#scrollTo。尝试使用 CSS 类作为您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:09:28.337

```
var to = $(this).attr('class');
$(window).scrollTo('div #'+to,'1000'); 
```

您正在选择一个类并将其分配给“to”。然后，您上课并将其转换为下一行中的 ID。

你的选择器应该是这样的：

```
var to = $(this).attr('class');
$(window).scrollTo('div .' + to,'1000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:51:14.350

Html Id 必须是唯一的。就像之前建议的那样，尝试改用类。另外，尝试捕获事件目标并滚动到它：

```
$(document).click(function(evt){
   var target = evt.target;
   $(window).scrollTo(target, 1000);
}); 
```

但是，这将滚动到用户单击的所有内容。更好的解决方案是仅在要滚动到的锚标记上设置单击事件处理程序：

```
$("#source a").click(function(evt){
   evt.preventDefault();
   var target = $(evt.currentTarget);
   $(window).scrollTo(target, 1000);
   // More code here...
}); 
```

# c++ - 如何在 C++ 中捕获 DOS 命令的结果

> ID：11453621
> 
> 赞同：0
> 
> 时间：2012-07-12T14:05:51.940
> 
> 标签：c++, borland-c++

我正在创建一个 Windows 应用程序，它必须在不打开命令提示符的情况下捕获几个 DOS 命令的结果并将它们保存到一个字符串中。我正在使用 borland 库。

`system("dir")`因此不好。每个命令的结果都需要写入字符串变量，以便我可以将其写入日志和单独的文件。

我有一个定义它们的 XML 文件。

我最苦苦挣扎的事情实际上是将输出捕获到字符串变量中。我听说过，`_popen`但在尝试使用它时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:36:01.640

我认为您真正想要的是[freopen()](http://msdn.microsoft.com/en-US/library/wk2h68td%28v=vs.80%29)，它允许您将通常的流重定向到文件（临时文件或您提到的单独文件），并且当进程关闭时，将文件读入日志。

我假设“结果”是命令的输出，而不是它的返回值。

# symfony - Doctrine - 根据列值从许多结果中获取一行或多行

> ID：11453623
> 
> 赞同：0
> 
> 时间：2012-07-12T14:05:55.650
> 
> 标签：symfony, doctrine-orm

我正在使用具有一对多关系的学说，其中每个用户实体都有许多帖子实体。所以我有一个这样的教义查询

```
$em = $this->getDoctrine()->getManager();

$query = $em->createQuery(
   'SELECT u, p FROM MYUserBundle:User u
   JOIN u.post p'
); 
```

然后我可以像这样获取用户的帖子

```
foreach($query->getResult() as $user){

   //a bunch of posts related to this user
   $posts = $user->getPosts();
} 
```

为方便起见，我想创建一个 API，允许我根据**列值**从此 $posts 对象中获取特定的帖子或帖子，而无需使用更多查询。例如，我有一个名为 post_slug 的列，所以我想说

```
$posts = $user->getPosts();
$post = $posts->findBySlug('my_slug');

//or something along those lines... 
```

这可以用 $posts 对象或 Post 实体类来完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:05:29.530

Doctrine 的集合是可过滤的。因此，假设您的 Post 实体存储在 上`User::$posts`，请在您的用户实体中执行此操作。

```
public function getPostsBySlug( $slug )
{
  return $this->posts->filter( function( Post $post ) use ( $slug )
  {
    return $post->getSlug() == $slug;
  } );
} 
```

然后你可以做

```
$posts = $user->getPostsBySlug( 'my_slug' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:34:17.187

您可以将这种功能移动到 Repository 类（扩展 EntityRepository）。

例如：

```
namespace Acme\ThingBundle\Repository;

use Doctrine\ORM\EntityRepository;

class PostRepository extends EntityRepository
{
    public function getBySlug($slug)
    {
        /// your custom query here

        return $q->getQuery()->getResult();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:26:46.767

怎么办

```
$slug = 'my_slug';
array_filter($user->getPosts()->all(), function ($post) use ($slug) {
    return $post->getSlug() == $slug;
}) 
```

# ios - ios 知道如何创建像“收件人：”短信或电子邮件字段这样的字段吗？

> ID：11453635
> 
> 赞同：5
> 
> 时间：2012-07-12T14:06:29.140
> 
> 标签：ios, email, sms, field, add

有谁知道如何创建像“收件人：”短信或电子邮件字段这样的字段？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:51:46.983

试试这些：

[http://www.cocoacontrols.com/platforms/ios/controls/titokenfield](http://www.cocoacontrols.com/platforms/ios/controls/titokenfield) [http://www.cocoacontrols.com/platforms/ios/controls/jstokenfield](http://www.cocoacontrols.com/platforms/ios/controls/jstokenfield) [http://www.cocoacontrols.com/platforms/ios/controls/ copeoplepickerviewcontroller](http://www.cocoacontrols.com/platforms/ios/controls/copeoplepickerviewcontroller)

我自己还没有尝试过，但收视率看起来不错。

# c# - 使用 OpenXML SDK 2.0 插入新行和移动现有行

> ID：11453636
> 
> 赞同：8
> 
> 时间：2012-07-12T14:06:31.247
> 
> 标签：c#, asp.net, excel, openxml, openxml-sdk

我正在使用 OpenXML SDK 2.0 将数据添加到电子表格模板中，但我遇到了一个问题（因为我使用 OpenXML 的日子并不难相信）。我不知道如何在将新行下方的所有行向下推时添加新行。

这是我正在使用的电子表格模板。更准确地说，我想要实现的是将这些石板色的行移到底部，同时将数据添加到白色的行中。

我当前使用的代码与 MSDN 上的代码相同——[使用 Open XML 格式 SDK 2.0 创建文档（第 2 部分，共 3 部分）](http://msdn.microsoft.com/en-us/library/dd452407%28v=office.12%29.aspx "MSDN")

![在此处输入图像描述](../Images/62ba4837162f91a702cdc905a3f4e07e.png)

我相信问题在于代码的这一部分：

```
 sheetData.AppendChild(polaznikRow); 
```

我也尝试过使用 InsertAfter、InsertAt 等。但没有任何成功。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T15:19:25.087

如果您要向空白工作表添加新行，本教程中的代码将起作用。由于您使用的模板确实包含行，因此您需要做更多的工作才能在工作表中间添加一行。您几乎需要使用相同的代码来添加行，但是您必须在插入的行之后手动更新每一行的行索引。您还必须更新合并的单元格引用和超链接引用。您可能需要更新更多内容，但我从未需要更新超过这三件事。插入行的主要方法如下：

```
 /// <summary>
        /// Inserts a new row at the desired index. If one already exists, then it is
        /// returned. If an insertRow is provided, then it is inserted into the desired
        /// rowIndex
        /// </summary>
        /// <param name="rowIndex">Row Index</param>
        /// <param name="worksheetPart">Worksheet Part</param>
        /// <param name="insertRow">Row to insert</param>
        /// <param name="isLastRow">Optional parameter - True, you can guarantee that this row is the last row (not replacing an existing last row) in the sheet to insert; false it is not</param>
        /// <returns>Inserted Row</returns>
        public static Row InsertRow(uint rowIndex, WorksheetPart worksheetPart, Row insertRow, bool isNewLastRow = false)
        {
            Worksheet worksheet = worksheetPart.Worksheet;
            SheetData sheetData = worksheet.GetFirstChild<SheetData>();

            Row retRow = !isNewLastRow ? sheetData.Elements<Row>().FirstOrDefault(r => r.RowIndex == rowIndex) : null;

            // If the worksheet does not contain a row with the specified row index, insert one.
            if (retRow != null)
            {
                // if retRow is not null and we are inserting a new row, then move all existing rows down.
                if (insertRow != null)
                {
                    UpdateRowIndexes(worksheetPart, rowIndex, false);
                    UpdateMergedCellReferences(worksheetPart, rowIndex, false);
                    UpdateHyperlinkReferences(worksheetPart, rowIndex, false);

                    // actually insert the new row into the sheet
                    retRow = sheetData.InsertBefore(insertRow, retRow);  // at this point, retRow still points to the row that had the insert rowIndex

                    string curIndex = retRow.RowIndex.ToString();
                    string newIndex = rowIndex.ToString();

                    foreach (Cell cell in retRow.Elements<Cell>())
                    {
                        // Update the references for the rows cells.
                        cell.CellReference = new StringValue(cell.CellReference.Value.Replace(curIndex, newIndex));
                    }

                    // Update the row index.
                    retRow.RowIndex = rowIndex;
                }
            }
            else
            {
                // Row doesn't exist yet, shifting not needed.
                // Rows must be in sequential order according to RowIndex. Determine where to insert the new row.
                Row refRow = !isNewLastRow ? sheetData.Elements<Row>().FirstOrDefault(row => row.RowIndex > rowIndex) : null;

                // use the insert row if it exists
                retRow = insertRow ?? new Row() { RowIndex = rowIndex };

                IEnumerable<Cell> cellsInRow = retRow.Elements<Cell>();

                if (cellsInRow.Any())
                {
                    string curIndex = retRow.RowIndex.ToString();
                    string newIndex = rowIndex.ToString();

                    foreach (Cell cell in cellsInRow)
                    {
                        // Update the references for the rows cells.
                        cell.CellReference = new StringValue(cell.CellReference.Value.Replace(curIndex, newIndex));
                    }

                    // Update the row index.
                    retRow.RowIndex = rowIndex;
                }

                sheetData.InsertBefore(retRow, refRow);
            }

            return retRow;
        } 
```

然后是以下帮助方法来更新行索引、超链接和合并的单元格引用：

```
 /// <summary>
    /// Updates all of the Row indexes and the child Cells' CellReferences whenever
    /// a row is inserted or deleted.
    /// </summary>
    /// <param name="worksheetPart">Worksheet Part</param>
    /// <param name="rowIndex">Row Index being inserted or deleted</param>
    /// <param name="isDeletedRow">True if row was deleted, otherwise false</param>
    private static void UpdateRowIndexes(WorksheetPart worksheetPart, uint rowIndex, bool isDeletedRow)
    {
        // Get all the rows in the worksheet with equal or higher row index values than the one being inserted/deleted for reindexing.
        IEnumerable<Row> rows = worksheetPart.Worksheet.Descendants<Row>().Where(r => r.RowIndex.Value >= rowIndex);

        foreach (Row row in rows)
        {
            uint newIndex = (isDeletedRow ? row.RowIndex - 1 : row.RowIndex + 1);
            string curRowIndex = row.RowIndex.ToString();
            string newRowIndex = newIndex.ToString();

            foreach (Cell cell in row.Elements<Cell>())
            {
                // Update the references for the rows cells.
                cell.CellReference = new StringValue(cell.CellReference.Value.Replace(curRowIndex, newRowIndex));
            }

            // Update the row index.
            row.RowIndex = newIndex;
        }
    }

         /// <summary>
        /// Updates the MergedCelss reference whenever a new row is inserted or deleted. It will simply take the
        /// row index and either increment or decrement the cell row index in the merged cell reference based on
        /// if the row was inserted or deleted.
        /// </summary>
        /// <param name="worksheetPart">Worksheet Part</param>
        /// <param name="rowIndex">Row Index being inserted or deleted</param>
        /// <param name="isDeletedRow">True if row was deleted, otherwise false</param>
        private static void UpdateMergedCellReferences(WorksheetPart worksheetPart, uint rowIndex, bool isDeletedRow)
        {
            if (worksheetPart.Worksheet.Elements<MergeCells>().Count() > 0)
            {
                MergeCells mergeCells = worksheetPart.Worksheet.Elements<MergeCells>().FirstOrDefault();

                if (mergeCells != null)
                {
                    // Grab all the merged cells that have a merge cell row index reference equal to or greater than the row index passed in
                    List<MergeCell> mergeCellsList = mergeCells.Elements<MergeCell>().Where(r => r.Reference.HasValue)
                                                                                     .Where(r => GetRowIndex(r.Reference.Value.Split(':').ElementAt(0)) >= rowIndex ||
                                                                                                 GetRowIndex(r.Reference.Value.Split(':').ElementAt(1)) >= rowIndex).ToList();

                    // Need to remove all merged cells that have a matching rowIndex when the row is deleted
                    if (isDeletedRow)
                    {
                        List<MergeCell> mergeCellsToDelete = mergeCellsList.Where(r => GetRowIndex(r.Reference.Value.Split(':').ElementAt(0)) == rowIndex ||
                                                                                       GetRowIndex(r.Reference.Value.Split(':').ElementAt(1)) == rowIndex).ToList();

                        // Delete all the matching merged cells
                        foreach (MergeCell cellToDelete in mergeCellsToDelete)
                        {
                            cellToDelete.Remove();
                        }

                        // Update the list to contain all merged cells greater than the deleted row index
                        mergeCellsList = mergeCells.Elements<MergeCell>().Where(r => r.Reference.HasValue)
                                                                         .Where(r => GetRowIndex(r.Reference.Value.Split(':').ElementAt(0)) > rowIndex ||
                                                                                     GetRowIndex(r.Reference.Value.Split(':').ElementAt(1)) > rowIndex).ToList();
                    }

                    // Either increment or decrement the row index on the merged cell reference
                    foreach (MergeCell mergeCell in mergeCellsList)
                    {
                        string[] cellReference = mergeCell.Reference.Value.Split(':');

                        if (GetRowIndex(cellReference.ElementAt(0)) >= rowIndex)
                        {
                            string columnName = GetColumnName(cellReference.ElementAt(0));
                            cellReference[0] = isDeletedRow ? columnName + (GetRowIndex(cellReference.ElementAt(0)) - 1).ToString() : IncrementCellReference(cellReference.ElementAt(0), CellReferencePartEnum.Row);
                        }

                        if (GetRowIndex(cellReference.ElementAt(1)) >= rowIndex)
                        {
                            string columnName = GetColumnName(cellReference.ElementAt(1));
                            cellReference[1] = isDeletedRow ? columnName + (GetRowIndex(cellReference.ElementAt(1)) - 1).ToString() : IncrementCellReference(cellReference.ElementAt(1), CellReferencePartEnum.Row);
                        }

                        mergeCell.Reference = new StringValue(cellReference[0] + ":" + cellReference[1]);
                    }
                }
            }
        }

        /// <summary>
        /// Updates all hyperlinks in the worksheet when a row is inserted or deleted.
        /// </summary>
        /// <param name="worksheetPart">Worksheet Part</param>
        /// <param name="rowIndex">Row Index being inserted or deleted</param>
        /// <param name="isDeletedRow">True if row was deleted, otherwise false</param>
        private static void UpdateHyperlinkReferences(WorksheetPart worksheetPart, uint rowIndex, bool isDeletedRow)
        {
            Hyperlinks hyperlinks = worksheetPart.Worksheet.Elements<Hyperlinks>().FirstOrDefault();

            if (hyperlinks != null)
            {
                Match hyperlinkRowIndexMatch;
                uint hyperlinkRowIndex;

                foreach (Hyperlink hyperlink in hyperlinks.Elements<Hyperlink>())
                {
                    hyperlinkRowIndexMatch = Regex.Match(hyperlink.Reference.Value, "[0-9]+");
                    if (hyperlinkRowIndexMatch.Success && uint.TryParse(hyperlinkRowIndexMatch.Value, out hyperlinkRowIndex) && hyperlinkRowIndex >= rowIndex)
                    {
                        // if being deleted, hyperlink needs to be removed or moved up
                        if (isDeletedRow)
                        {
                            // if hyperlink is on the row being removed, remove it
                            if (hyperlinkRowIndex == rowIndex)
                            {
                                hyperlink.Remove();
                            }
                            // else hyperlink needs to be moved up a row
                            else{
                                hyperlink.Reference.Value = hyperlink.Reference.Value.Replace(hyperlinkRowIndexMatch.Value, (hyperlinkRowIndex - 1).ToString());

                            }
                        }
                        // else row is being inserted, move hyperlink down
                        else
                        {
                            hyperlink.Reference.Value = hyperlink.Reference.Value.Replace(hyperlinkRowIndexMatch.Value, (hyperlinkRowIndex + 1).ToString());
                        }
                    }
                }

                // Remove the hyperlinks collection if none remain
                if (hyperlinks.Elements<Hyperlink>().Count() == 0)
                {
                    hyperlinks.Remove();
                }
            }
        }

        /// <summary>
        /// Given a cell name, parses the specified cell to get the row index.
        /// </summary>
        /// <param name="cellReference">Address of the cell (ie. B2)</param>
        /// <returns>Row Index (ie. 2)</returns>
        public static uint GetRowIndex(string cellReference)
        {
            // Create a regular expression to match the row index portion the cell name.
            Regex regex = new Regex(@"\d+");
            Match match = regex.Match(cellReference);

            return uint.Parse(match.Value);
        }

        /// <summary>
        /// Increments the reference of a given cell.  This reference comes from the CellReference property
        /// on a Cell.
        /// </summary>
        /// <param name="reference">reference string</param>
        /// <param name="cellRefPart">indicates what is to be incremented</param>
        /// <returns></returns>
        public static string IncrementCellReference(string reference, CellReferencePartEnum cellRefPart)
        {
            string newReference = reference;

            if (cellRefPart != CellReferencePartEnum.None && !String.IsNullOrEmpty(reference))
            {
                string[] parts = Regex.Split(reference, "([A-Z]+)");

                if (cellRefPart == CellReferencePartEnum.Column || cellRefPart == CellReferencePartEnum.Both)
                {
                    List<char> col = parts[1].ToCharArray().ToList();
                    bool needsIncrement = true;
                    int index = col.Count - 1;

                    do
                    {
                        // increment the last letter
                        col[index] = Letters[Letters.IndexOf(col[index]) + 1];

                        // if it is the last letter, then we need to roll it over to 'A'
                        if (col[index] == Letters[Letters.Count - 1])
                        {
                            col[index] = Letters[0];
                        }
                        else
                        {
                            needsIncrement = false;
                        }

                    } while (needsIncrement && --index >= 0);

                    // If true, then we need to add another letter to the mix. Initial value was something like "ZZ"
                    if (needsIncrement)
                    {
                        col.Add(Letters[0]);
                    }

                    parts[1] = new String(col.ToArray());
                }

                if (cellRefPart == CellReferencePartEnum.Row || cellRefPart == CellReferencePartEnum.Both)
                {
                    // Increment the row number. A reference is invalid without this componenet, so we assume it will always be present.
                    parts[2] = (int.Parse(parts[2]) + 1).ToString();
                }

                newReference = parts[1] + parts[2];
            }

            return newReference;
        } 
```

您还需要一些额外的部件：

```
/// <summary>
/// Given a cell name, parses the specified cell to get the column name.
/// </summary>
/// <param name="cellReference">Address of the cell (ie. B2)</param>
/// <returns>Column name (ie. A2)</returns>
private static string GetColumnName(string cellName)
{
    // Create a regular expression to match the column name portion of the cell name.
    Regex regex = new Regex("[A-Za-z]+");
    Match match = regex.Match(cellName);

    return match.Value;
}
public enum CellReferencePartEnum
{
    None,
    Column,
    Row,
    Both
}
    private static List<char> Letters = new List<char>() { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' ' }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-02T13:26:08.720

感谢阿穆拉的回答。对于那些仍然无法做到的人这里是缺少的部分

```
/// <summary>
/// Given a cell name, parses the specified cell to get the column name.
/// </summary>
/// <param name="cellReference">Address of the cell (ie. B2)</param>
/// <returns>Column name (ie. A2)</returns>
private static string GetColumnName(string cellName)
{
    // Create a regular expression to match the column name portion of the cell name.
    Regex regex = new Regex("[A-Za-z]+");
    Match match = regex.Match(cellName);

    return match.Value;
}
public enum CellReferencePartEnum
{
    None,
    Column,
    Row,
    Both
}
    private static List<char> Letters = new List<char>() { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' ' }; 
```

# r - 仅在调用动物园对象列后重复索引

> ID：11453637
> 
> 赞同：0
> 
> 时间：2012-07-12T14:06:37.937
> 
> 标签：r, zoo

基本上，我有一个由连接的 POSIXct 日期/时间对象索引的动物园对象。一切看起来都很好，但是当我打电话时：

```
zoo$Close 
```

返回的列显示了索引和价格的副本。

我敢打赌，这与我正在读取并通过数据框创建动物园对象的迂回方式有关，但我完全失去了更简化的方法，同时将日期和时间列粘贴在一起形成索引。

在我的文件中读取的一些代码：

```
getData = function(filename){

    data = read.table(filename, col.names = c("Date", "Time", "High", "Low", "Open", "Close", "Volume", "Bid", "Ask", "BA Spread"))
    data1 = data
    data[["Date"]] = data[["Time"]] = NULL

    zoo = zoo(data)
    index(zoo) = as.POSIXct(paste(data1[["Date"]], data1[["Time"]]))

    return(zoo)
} 
```

以 1 分钟为间隔的数据，并在一个空格分隔的文件中，如下所示：（此处的行溢出了一点）

```
2012-06-01 06:00 134.32812500 134.31250000 134.32812500 134.32812500 710 134.32812500  134.34375000 0.01596653

2012-06-01 06:01 134.34375000 134.32812500 134.32812500 134.34375000 127 134.34375000 134.35937500 0.01566084 
```

调用 zoo$Close 后，我得到的内容如下：

```
2012-06-01 06:00 134.32812500

2012-06-01 06:00 134.32812500

2012-06-01 06:01 134.34375000

2012-06-01 06:01 134.34375000 
```

我已经走到了尽头，对R来说还是比较新的，任何指导都将不胜感激。

编辑：来自 dput(head(data)) 的输出：

> 输入（头部（数据））

```
structure(list(Date = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("2012-06-01", 
"2012-06-04", "2012-06-05", "2012-06-06", "2012-06-07", "2012-06-08", 
"2012-06-11", "2012-06-12", "2012-06-13", "2012-06-14", "2012-06-15", 
"2012-06-18", "2012-06-19", "2012-06-20", "2012-06-21", "2012-06-22", 
"2012-06-25", "2012-06-26", "2012-06-27", "2012-06-28", "2012-06-29"
), class = "factor"), Time = structure(1:6, .Label = c("06:00", 
"06:01", "06:02", "06:03", "06:04", "06:05", "06:06", "06:07", 
"06:08", "06:09", "06:10", "06:11", "06:12", "06:13", "06:14", 
"06:15", "06:16", "06:17", "06:18", "06:19", "06:20", "06:21", 
"06:22", "06:23", "06:24", "06:25", "06:26", "06:27", "06:28", 
"06:29", "06:30", "06:31", "06:32", "06:33", "06:34", "06:35", 
"06:36", "06:37", "06:38", "06:39", "06:40", "06:41", "06:42", 
"06:43", "06:44", "06:45", "06:46", "06:47", "06:48", "06:49", 
"06:50", "06:51", "06:52", "06:53", "06:54", "06:55", "06:56", 
"06:57", "06:58", "06:59", "07:00", "07:01", "07:02", "07:03", 
"07:04", "07:05", "07:06", "07:07", "07:08", "07:09", "07:10", 
"07:11", "07:12", "07:13", "07:14", "07:15", "07:16", "07:17", 
"07:18", "07:19", "07:20", "07:21", "07:22", "07:23", "07:24", 
"07:25", "07:26", "07:27", "07:28", "07:29", "07:30", "07:31", 
"07:32", "07:33", "07:34", "07:35", "07:36", "07:37", "07:38", 
"07:39", "07:40", "07:41", "07:42", "07:43", "07:44", "07:45", 
"07:46", "07:47", "07:48", "07:49", "07:50", "07:51", "07:52", 
"07:53", "07:54", "07:55", "07:56", "07:57", "07:58", "07:59", 
"08:00", "08:01", "08:02", "08:03", "08:04", "08:05", "08:06", 
"08:07", "08:08", "08:09", "08:10", "08:11", "08:12", "08:13", 
"08:14", "08:15", "08:16", "08:17", "08:18", "08:19", "08:20", 
"08:21", "08:22", "08:23", "08:24", "08:25", "08:26", "08:27", 
"08:28", "08:29", "08:30", "08:31", "08:32", "08:33", "08:34", 
"08:35", "08:36", "08:37", "08:38", "08:39", "08:40", "08:41", 
"08:42", "08:43", "08:44", "08:45", "08:46", "08:47", "08:48", 
"08:49", "08:50", "08:51", "08:52", "08:53", "08:54", "08:55", 
"08:56", "08:57", "08:58", "08:59", "09:00", "09:01", "09:02", 
"09:03", "09:04", "09:05", "09:06", "09:07", "09:08", "09:09", 
"09:10", "09:11", "09:12", "09:13", "09:14", "09:15", "09:16", 
"09:17", "09:18", "09:19", "09:20", "09:21", "09:22", "09:23", 
"09:24", "09:25", "09:26", "09:27", "09:28", "09:29", "09:30", 
"09:31", "09:32", "09:33", "09:34", "09:35", "09:36", "09:37", 
"09:38", "09:39", "09:40", "09:41", "09:42", "09:43", "09:44", 
"09:45", "09:46", "09:47", "09:48", "09:49", "09:50", "09:51", 
"09:52", "09:53", "09:54", "09:55", "09:56", "09:57", "09:58", 
"09:59", "10:00", "10:01", "10:02", "10:03", "10:04", "10:05", 
"10:06", "10:07", "10:08", "10:09", "10:10", "10:11", "10:12", 
"10:13", "10:14", "10:15", "10:16", "10:17", "10:18", "10:19", 
"10:20", "10:21", "10:22", "10:23", "10:24", "10:25", "10:26", 
"10:27", "10:28", "10:29", "10:30", "10:31", "10:32", "10:33", 
"10:34", "10:35", "10:36", "10:37", "10:38", "10:39", "10:40", 
"10:41", "10:42", "10:43", "10:44", "10:45", "10:46", "10:47", 
"10:48", "10:49", "10:50", "10:51", "10:52", "10:53", "10:54", 
"10:55", "10:56", "10:57", "10:58", "10:59", "11:00", "11:01", 
"11:02", "11:03", "11:04", "11:05", "11:06", "11:07", "11:08", 
"11:09", "11:10", "11:11", "11:12", "11:13", "11:14", "11:15", 
"11:16", "11:17", "11:18", "11:19", "11:20", "11:21", "11:22", 
"11:23", "11:24", "11:25", "11:26", "11:27", "11:28", "11:29", 
"11:30", "11:31", "11:32", "11:33", "11:34", "11:35", "11:36", 
"11:37", "11:38", "11:39", "11:40", "11:41", "11:42", "11:43", 
"11:44", "11:45", "11:46", "11:47", "11:48", "11:49", "11:50", 
"11:51", "11:52", "11:53", "11:54", "11:55", "11:56", "11:57", 
"11:58", "11:59", "12:00", "12:01", "12:02", "12:03", "12:04", 
"12:05", "12:06", "12:07", "12:08", "12:09", "12:10", "12:11", 
"12:12", "12:13", "12:14", "12:15", "12:16", "12:17", "12:18", 
"12:19", "12:20", "12:21", "12:22", "12:23", "12:24", "12:25", 
"12:26", "12:27", "12:28", "12:29", "12:30", "12:31", "12:32", 
"12:33", "12:34", "12:35", "12:36", "12:37", "12:38", "12:39", 
"12:40", "12:41", "12:42", "12:43", "12:44", "12:45", "12:46", 
"12:47", "12:48", "12:49", "12:50", "12:51", "12:52", "12:53", 
"12:54", "12:55", "12:56", "12:57", "12:58", "12:59", "13:00", 
"13:01", "13:02", "13:03", "13:04", "13:05", "13:06", "13:07", 
"13:08", "13:09", "13:10", "13:11", "13:12", "13:13", "13:14", 
"13:15", "13:16", "13:17", "13:18", "13:19", "13:20", "13:21", 
"13:22", "13:23", "13:24", "13:25", "13:26", "13:27", "13:28", 
"13:29", "13:30", "13:31", "13:32", "13:33", "13:34", "13:35", 
"13:36", "13:37", "13:38", "13:39", "13:40", "13:41", "13:42", 
"13:43", "13:44", "13:45", "13:46", "13:47", "13:48", "13:49", 
"13:50", "13:51", "13:52", "13:53", "13:54", "13:55", "13:56", 
"13:57", "13:58", "13:59", "14:00", "14:01", "14:02", "14:03", 
"14:04", "14:05", "14:06", "14:07", "14:08", "14:09", "14:10", 
"14:11", "14:12", "14:13", "14:14", "14:15", "14:16", "14:17", 
"14:18", "14:19", "14:20", "14:21", "14:22", "14:23", "14:24", 
"14:25", "14:26", "14:27", "14:28", "14:29", "14:30", "14:31", 
"14:32", "14:33", "14:34", "14:35", "14:36", "14:37", "14:38", 
"14:39", "14:40", "14:41", "14:42", "14:43", "14:44", "14:45", 
"14:46", "14:47", "14:48", "14:49", "14:50", "14:51", "14:52", 
"14:53", "14:54", "14:55", "14:56", "14:57", "14:58", "14:59", 
"15:00"), class = "factor"), High = c(134.328125, 134.34375, 
134.359375, 134.34375, 134.3125, 134.3125), Low = c(134.3125, 
134.328125, 134.328125, 134.3125, 134.28125, 134.28125), Open = c(134.328125, 
134.328125, 134.359375, 134.328125, 134.3125, 134.296875), Close = c(134.328125, 
134.34375, 134.328125, 134.3125, 134.28125, 134.296875), Volume = c(710L, 
127L, 2476L, 280L, 1064L, 1063L), Bid = c(134.328125, 134.34375, 
134.328125, 134.3125, 134.28125, 134.28125), Ask = c(134.34375, 
134.359375, 134.34375, 134.328125, 134.296875, 134.296875), BA.Spread = c(0.01596653, 
0.01566084, 0.01569884, 0.01568592, 0.015625, 0.01602079)), .Names = c("Date", 
"Time", "High", "Low", "Open", "Close", "Volume", "Bid", "Ask", 
"BA.Spread"), row.names = c(NA, 6L), class = "data.frame") 
```

编辑 2：运行 sessionInfo()

```
R version 2.14.2 (2012-02-29)
Platform: x86_64-suse-linux-gnu (64-bit)

locale:
[1] C

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
 [1] PerformanceAnalytics_1.0.4.4 quantmod_0.3-17             
 [3] Defaults_1.1-1               forecast_3.22               
 [5] RcppArmadillo_0.3.2.3        Rcpp_0.9.10                 
 [7] fracdiff_1.4-1               tseries_0.10-28             
 [9] quadprog_1.5-4               TTR_0.21-1                  
[11] xts_0.8-6                    zoo_1.7-7                   

loaded via a namespace (and not attached):
[1] grid_2.14.2    lattice_0.20-0 
```

最终编辑：开始了一个新的 R 会话，只按照建议加载了 zoo 包，仍然返回相同的结果。然而，这让我得到了一个有效的结果！在 24 小时的大部分时间里，我一直在考虑这个问题。我只是通过临时将动物园对象转换为数据框来完全绕过调用动物园对象列：

```
getCol = function(zooObject, colname){
    frame = as.data.frame(zooObject)
    col = frame[[colname]]
    colzoo = zoo(col)
    index(colzoo) = index(zooObject)

    return(colzoo)
} 
```

感谢上帝，一切都结束了。感谢 GSee 的指导，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:21:25.910

编辑：感谢您的`dput`输出。您正在使用`stringsAsFactors=TRUE`which 是`read.table`. 只需添加`stringsAsFactors=FALSE`到您的`read.table`通话中，您就可以开始了。

```
data <- read.table(text="2012-06-01 06:00 134.32812500 134.31250000 134.32812500 134.32812500 710 134.32812500  134.34375000 0.01596653
2012-06-01 06:01 134.34375000 134.32812500 134.32812500 134.34375000 127 134.34375000 134.35937500 0.01566084",
col.names = c("Date", "Time", "High", "Low", "Open", "Close", "Volume", "Bid", "Ask", "BA Spread"), 
stringsAsFactors=FALSE)
data
#        Date  Time     High      Low     Open    Close Volume      Bid      Ask      BA.Spread
#1 2012-06-01 06:00 134.3281 134.3125 134.3281 134.3281    710 134.3281 134.3438 0.01596653
#2 2012-06-01 06:01 134.3438 134.3281 134.3281 134.3438    127 134.3438 134.3594 0.01566084
data1 = data
data[["Date"]] = data[["Time"]] = NULL
zoo = zoo(data)
index(zoo) = as.POSIXct(paste(data1[["Date"]], data1[["Time"]]))
zoo
#                        High      Low     Open    Close Volume      Bid      Ask  BA.Spread
#2012-06-01 06:00:00 134.3281 134.3125 134.3281 134.3281    710 134.3281 134.3438 0.01596653
#2012-06-01 06:01:00 134.3438 134.3281 134.3281 134.3438    127 134.3438 134.3594 0.01566084
zoo$Close
#2012-06-01 06:00:00 2012-06-01 06:01:00 
#           134.3281            134.3438 
```

# regex - 正则表达式从 html 页面中提取字符串

> ID：11453641
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:06:52.387
> 
> 标签：regex, testing, jmeter

我有一个 html 响应，其中有一行是

```
var session_name = '1342100453_3334440619019170'; 
```

我需要从中提取`'1342100453_3334440619019170'`和`1342100453_3334440619019170`

是否可以使用正则表达式进行提取？我需要在 jmeter 中回复这个参数，但那是另一回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:26:36.237

```
^\s*var\s+session_name\s*=\s*'(.*)';\s*$ 
```

这将捕获`'1342100453_3334440619019170'`到第一个捕获组。无论您使用什么 API，都应该能够相对轻松地访问该值。

编辑：我看到你正在使用 Java。

我不熟悉 Java 中的任何正则表达式 API，尽管`java.util.regex.Pattern`看起来还不错。

见[http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

# mysql - 重新设计一个自引用的mysql表

> ID：11453645
> 
> 赞同：1
> 
> 时间：2012-07-12T14:07:07.057
> 
> 标签：mysql, performance, optimization, recursion

我继承了一个遗留应用程序，它使用自引用表来促进分层结构。这会导致递归方法调用产生“难闻的气味”。

parent_id 列引用了同一张表的主键，这里大概有2500万条记录：

```
+-------------+---------+------+-----+---------+----------------+
| Field       | Type    | Null | Key | Default | Extra          |
+-------------+---------+------+-----+---------+----------------+
| phase_id    | int(10) | NO   | PRI | NULL    | auto_increment |
| plat_id     | int(10) | YES  | MUL | NULL    |                |
| name        | text    | YES  |     | NULL    |                |
| parent_id   | int(10) | YES  | MUL | NULL    |                |
| plan_id     | int(10) | YES  | MUL | NULL    |                |
+-------------+---------+------+-----+---------+----------------+

mysql> show table status like 'ref'\G
*************************** 1\. row ***************************
Name: phase
Engine: MyISAM
Version: 10
Row_format: Dynamic
Rows: 25223658
Avg_row_length: 20
Data_length: 509450960
Max_data_length: 281474976710655
Index_length: 1026267136
Data_free: 0
Auto_increment: 25238013 
```

我对这种结构有几个问题：

*   实施自引用表通常是不好的做法吗？我能想到的主要负面因素是很难/不可能在单个查询中获得层次结构的最大深度，因为可能有 X 个子级。
*   值得重新设计吗？拥有如此多的数据使得移动它变得更加困难。
*   我有哪些选择？我听说过一些关于表分区的知识，但不知道它是否适合我的场景。

**任何指针都将不胜**感激

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:12:27.897

我们最终废弃了现有的自引用表。并创建了一个新表来容纳一个更简单的模型。

感谢 Sebas 提供上面的[链接](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)。里面有很多好东西！**

# javascript - 如何为 CheckedMultiSelect 的每个元素添加不同的标题？

> ID：11453647
> 
> 赞同：2
> 
> 时间：2012-07-12T14:07:18.847
> 
> 标签：javascript, html, checkbox, dojo

我正在尝试为每个复选框添加标题`CheckedMultiSelect`。

创建代码`CheckedMultiSelect`：

```
<select id="123" class="soria" dojoType="dojox.form.CheckedMultiSelect" 
        multiple="true" style="width:267px; height:260px;" onchange=""
        store="listStore">
</select> 
```

`listStore`来自`dojo.data.ItemFileReadStore`json。

任何想法如何为复选框添加标题？

**UPD。**最后，我收到了这样的 HTML 代码（多选的单个元素的源代码）：

```
<div aria-selected="false" widgetid="dojox_form__CheckedMultiSelectItem_4"
     id="dojox_form__CheckedMultiSelectItem_4" 
     class="dijitReset dojoxMultiSelectItem">

      <div widgetid="dijit_form_CheckBox_4" role="presentation" 
            class="dijitReset dijitInline dojoxMultiSelectItemBox dijitCheckBox" 
            wairole="presentation">

        <input aria-pressed="false" style="-moz-user-select: none;" 
        tabindex="0" id="dijit_form_CheckBox_4" value="on" 
        class="dijitReset dijitCheckBoxInput" dojoattachpoint="focusNode"
        dojoattachevent="onmouseover:_onMouse,onmouseout:
                         _onMouse,onclick:_onClick" 
        type="checkbox">

      </div>

      <div class="dijitInline dojoxMultiSelectItemLabel" 
            dojoattachpoint="labelNode" dojoattachevent="onmousedown:_onMouse,
                    onmouseover:_onMouse,onmouseout:_onMouse, onclick:_onClick">
            MICHAEL, DOPHINE
      </div>
</div> 
```

问题：我怎样才能让道场为这个元素设置唯一的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:14:16.817

您可以添加一个脚本，之后更改标题，例如

```
<script>
var o = document.getElementsByTagName('input');

for(var x in o){
   // check if o[x].name is one of these and then
   // do something with o[x].title ...
}
</script> 
```

# windows-phone-7 - 在 ScrollView 中弹跳 BrowserControl

> ID：11453648
> 
> 赞同：1
> 
> 时间：2012-07-12T14:07:29.623
> 
> 标签：windows-phone-7, webbrowser-control, scrollview

我在 Windows Phone 7 中遇到了一个 BrowserControl 的大问题。

结构看起来像这样

*   滚动视图
    *   图片
    *   浏览器控件
    *   纽扣

正如您所见，BrowserControl (BC) 在 ScrollView (SV) 内。BC 正在改变它的高度灵活并且部分在屏幕之外。

我们需要以下解决方案： BC 应该像元素一样同时滚动。BC 的内容不应滚动。但是 BC 内的链接应该是可点击的。

对不起我的英语不好；）

希望你能帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T15:02:13.117

本文可能有用：“在 Windows Phone 7 WebBrowser 控件中抑制缩放和滚动交互” [http://www.scottlogic.co.uk/blog/colin/2011/11/suppressing-zoom-and-scroll-interactions-在-the-windows-phone-7-browser-control/](http://www.scottlogic.co.uk/blog/colin/2011/11/suppressing-zoom-and-scroll-interactions-in-the-windows-phone-7-browser-control/)

# php - 我在一页上使用两个库，我遇到冲突，一次只有一个工作

> ID：11453650
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:07:31.230
> 
> 标签：php, jquery, html, jquery-plugins

我在一页上有两个 jquery 项目（滑块和 vticker），一次只能工作一个？我怎样才能让他们一起工作？我在下面添加了指向我的 html 的链接。我是 jquery 的新手，请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:26:22.563

`http://www.pezigns.com/jquery.vticker-min.js`- 404 未找到

^^ 那将是你的第一个问题。

另请注意，您的背景图像接近 2MB - 这太大了，需要一段时间才能下载！您可能应该尝试对其进行网络优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:46:15.870

您以完全错误的方式包含您的 JavaScript 库和插件。请将所需的 JavaSript 插件和库上传到您网站根目录的单独文件夹中。我的意思是实际的 .js 文件，你从他们的作者那里下载的那个。

例如，将该文件夹称为“脚本”。

然后，在您的 CSS 包含项下方，您将使用以下语法包含您的 JavaScript 库：

```
<script type="text/javascript" src="/scripts/jquery.js"></script>  
<script type="text/javascript" src="/scripts/jquery.vticker-min.js"></script>  
<script type="text/javascript" src="/scripts/any_other_jqplugin_you_have.js"></script> 
```

目前，您正在创建一个不存在的 javascript 文件的链接，并且您正在将库纯代码粘贴到您的网页中。这不是一个好方法。

此外，在加载任何其他依赖它的插件之前，**始终首先包含 jQuery 库。**

请记住，在页面本身而不是单独的文件中进行插件初始化可能是可以接受的，就像您对 vTicker 所做的那样：

```
<script type="text/javascript">
    $(document).ready(function() {

        //Do Plugin Initialization here.

    });
</script> 
```

# c++ - 如何在 C++ 中创建事务流？

> ID：11453654
> 
> 赞同：1
> 
> 时间：2012-07-12T14:07:36.893
> 
> 标签：c++, transactions, stream, transactional

我需要在 C++ 中创建“事务流”。我所说的“事务流”是指在处理过程中出现错误时会倒回的流。例如，如果流的使用者以某种方式无法处理流的数据，我希望流在生成该数据之前恢复到其状态。

也许一个惰性流会实现这一点？这是具有通用解决方案的常见情况，还是我必须为我的特定问题编写自己的自定义实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:02:08.473

好吧，首先想到的是将范围接口（用于惰性和可组合性）与事务接口（用于回溯）结合起来：

```
#include <iostream>
#include <stack>
#include <sstream>

struct transaction_failure {};

class transactional_istream_range {

  std::istream& stream;
  std::stack<std::streampos> states;

public:

  transactional_istream_range(std::istream& stream)
    : stream(stream) {}

  // Transaction interface.

  template<class R, class T>
  R transaction(R(*body)(T&)) {
    try {
      begin();
      R result = body(*this);
      commit();
      return result;
    } catch (const transaction_failure&) {
      rollback();
    }
    return R();
  }

  void begin() {
    states.push(stream.tellg());
  }

  void commit() {
    states.pop();
  }

  void rollback() {
    stream.seekg(states.top());
    states.pop();
  }

  // Range interface.

  bool empty() const {
    return stream.peek() == EOF && stream.eof();
  }

  char front() const {
    return stream.peek();
  }

  void pop_front() const {
    stream.ignore(1);
  }

}; 
```

然后，您可以轻松编写在事务范围内操作的模板函数：

```
#include <cctype>

template<class R>
std::string parse_integer(R& input) {
  std::string result;
  while (!input.empty()) {
    if (std::isdigit(input.front())) {
      result += input.front();
      input.pop_front();
    } else {
      throw transaction_failure();
    }
  }
  return result;
}

int main() {
  std::istringstream stream("1234a");
  typedef transactional_istream_range tir;
  tir input(stream);
  std::string result = input.transaction(parse_integer<tir>);
  std::cout << "Result: " << result;
} 
```

这只是第一个近似值；您可能不得不为事务函数指定范围的类型（即，只是`parse_integer`而不是`parse_integer<...>`）。以范围形式编写多种惰性流和惰性算法非常简单。

至于扩展它，您可以参数化事务处理以调用用户指定的提交或回滚函数，或者单独实现每种类型的回滚。使用 mixin 将范围接口与事务接口分离也可能是有益的。不过，如果不求助于虚拟功能，我现在想不出一个好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:58:21.973

如果您在 Windows 上工作，则有一种称为结构化存储的东西，它提供了一种事务形式。您可能必须将问题分解为单独的流。

这里有更多信息： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa380369 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380369(v=vs.85).aspx)

或者，您可以考虑使用[SQLite](http://sqlite.org/)或[Firebird](http://www.firebirdsql.org/)之类的东西来提供后端事务存储。

# excel - 使用vba excel查找最后一个单元格地址

> ID：11453658
> 
> 赞同：-2
> 
> 时间：2012-07-12T14:07:51.063
> 
> 标签：excel, vba

我已经搜索了这个网站，似乎所有的答案都指向查找单元格的行号。

我正在尝试设置一个范围，以便它从列`A1`中数据的末尾开始`A`。此电子表格将每周更新，因此每周都会添加数据。

我想知道什么代码可以工作，以便我可以找到行号并以某种方式将其与我的范围代码联系起来，使其相等`"A" + lastrownumber`？或者是否有代码可以同时提供列号和行号？如果我错过了正确答案的链接，一个简单的链接也可以，我为这篇文章和你的时间道歉。

这是我的代码：

```
Sub NamedRange()

Dim Rng1 As Range
Dim newDate As Integer
Dim NumberOfRows As Range

Dim MyRange As Range
Dim lastRow2 As Range

lastRow2 = Range("A65536").End(xlUp).Row
'lastRow2 = LastRow

Set Rng1 = Sheets("Sheet1").Range(lastRow2)
ActiveWorkbook.Names.Add Name:="MyRange", RefersTo:=Rng1

Dim date1 As String
Dim dat As Date
Dim newPrice As Double

Set RgSales = Range("MyRange") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T14:23:36.160

这将返回与 A 列中最后填充的单元格对应的范围对象

```
Range("A:A").Find("*",Range("A1"),SearchDirection:=xlprevious) 
```

如果您想要行号，请使用以下内容：

```
Range("A:A").Find("*",Range("A1"),SearchDirection:=xlprevious).row 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:17:13.137

这将给出给定列中的最后一行

`= Cells(Activesheet.Rows.Count, ColumnNumber).End(xlUp).Row`（根据@Gimp 固定）

然后，您有一个可用于添加数据的参考 - 例如，如果您想查看“A”列，那么这将是第 1 列。将其输入到函数中，然后您可以使用`Cells(NumberReturnedFromFunction,ColumnNumber)`该单元格来寻址该单元格，然后添加`.Address`如果你想要`A1`地址的样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:05:01.667

如果数据中存在差距，我会避免使用 xlDown ，所以类似下面的内容就可以了。在即时窗口中尝试：

```
Activesheet.range("A1:A" & Activesheet.Cells(Excel.Rows.Count, 1).End(Excel.xlUp).Row).select 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:47:59.653

尝试使用这样的东西：

```
Activesheet.Cells(Activesheet.Rows.Count, "A").End(xlUp).Row 
```

您可以将 Activesheet 替换为对工作表索引 # like`Sheets(1)`或工作表名称的引用`Sheets("Sheet1")`

通过使用，`Rows.Count`它将检查最大行数是多少，并在所有版本的 Excel 中兼容。

最后，您可以在您的范围参考中使用它，如下所示：

```
Msgbox Sheets(1).Range("A" & Sheets(1).Cells(Sheets(1).Rows.Count, "A").End(xlUp).row).value 
```

但我可能会将其重写为

```
With Sheets(1)
    Msgbox .Range("A" & .Cells(.Rows.Count, "A").End(xlUp).row).value
End With 
```

# ruby-on-rails - 仅在单个属性更新时添加存在验证

> ID：11453663
> 
> 赞同：0
> 
> 时间：2012-07-12T14:07:59.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip, rspec2

**上下文：**我有一个带有附加头像的用户模型（通过回形针）。创建用户时不需要头像，但是当用户在他的个人资料上更新他的头像时，我希望需要头像。当用户上传新头像时，通过ajax请求只提交头像。此时，如果 file_field 为空，我想返回验证错误。

一开始我用

```
 validates_attachment_presence :avatar, message: "The file is missing", :if => ->{ !new_record? } 
```

但它不能完全按预期工作，它使我的验证测试套件失败`should be_valid`

```
describe User do
  before do
    @user = FactoryGirl.create :user
  end

  subject { @user }

  [...]

  it { should be_valid }
end 
```

这是正常的。

关于我应该如何处理的任何想法？我想出的唯一另一个想法是`@user.errors`如果文件字段为空，则从 UserController#update 中注入一个新错误，但它看起来很hacky。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:11:46.443

```
validates_attachment_presence :avatar, message: "The file is missing", on: :update 
```

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#on](http://guides.rubyonrails.org/active_record_validations_callbacks.html#on)

# c# - 新对象中的多合一声明（精简）

> ID：11453664
> 
> 赞同：0
> 
> 时间：2012-07-12T14:08:01.730
> 
> 标签：c#, winforms, visual-studio-2010, object

我正在使用 c#，我知道您可以简化新对象的创建

```
List<String> myStrings = new List<String>() { "Hello", "GoodBye" }; 
```

我也用它来创建新的树节点

```
node_Clicked.Nodes.Add(new TreeNode() { Text = "New Node" }); 
```

非常有用，但是，我想将它用于列表视图，但是当我开始编写它时：

```
folder_listView.Items.Add(
    new ListViewItem() 
    { 
        Text = "First Col", 
        SubItems.Add(new ListViewItem.ListViewSubItem() 
        { 
            Text = "Second Col" 
        }), 
```

我收到智能感知错误：

初始化器成员声明器无效

所以我猜这意味着您不能在新实例化的对象中实例化对象，因为并非新实例化对象中的所有对象（例如列表）都已实例化？

我这样想对吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:12:42.900

不，问题是`SubItems.Add()`方法*，*而不是属性/字段。调用方法与初始化成员有很大不同！

也就是说，如果它是可设置的，你*就*可以做到`SubItems = ...`，但正如@RB 指出的那样，它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:33:49.163

作为 lc。指出，`ListViewItemCollection.Add`并且`ListViewSubItemCollection.Add`是方法，因此不是普通对象/集合初始化语法的一部分。由于它不公开设置器，因此您可以通过这种方式实例化一个新项目。但是，您可以利用它的`AddRange`方法，并且可以将子项的构造转换为方法，因为没有适合您的构造函数重载：

```
public ListView folder_listView = new ListView();

public void Build()
{
    folder_listView.Items.AddRange(new ListViewItem[]
    {
        Item("First Col", 
            new ListViewItem.ListViewSubItem(){ Text = "Second Col" }
            ),
        Item("Another col", 
            new ListViewItem.ListViewSubItem(){ Text = "Another Second Col" }, 
            new ListViewItem.ListViewSubItem(){ Text = "Another Third Col" }
            )
    });
}

private static ListViewItem Item(string text, params ListViewItem.ListViewSubItem[] subItems)
{
    ListViewItem item = new ListViewItem(text);
    item.SubItems.AddRange(subItems);
    return item;
} 
```

这只是一个例子；随意构建您希望帮助您管理正在构建的项目/子项目的哪些属性的任何类型的帮助程序 API。

# dojo - 将对象传递给模板中的小部件

> ID：11453669
> 
> 赞同：2
> 
> 时间：2012-07-12T14:08:07.453
> 
> 标签：dojo

我有一个 Dojo UI 小部件，其中嵌入了一个小部件。我需要将一个对象传递给这个嵌入式小部件，以使其正确设置，但我不知道该怎么做。

我一直在包装小部件模板中的嵌入式小部件中进行模板化，例如：

```
...<div class="thing"
        data-dojo-type="mycompany.widgets.ComplexEmbeddedWidget"
        data-dojo-props="stuff: '${stuff}'"></div>... 
```

但这似乎不起作用，我猜数据可能是作为字符串传递的？

我通过将其设置为嵌入式小部件中的属性然后在我的`postMixInProperties`函数中引用它来提取这些数据。

毫无疑问，这是错误的方法，我应该怎么做才能设置这样的嵌入式小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:23:18.627

我认为如果您要使用这种方法，您希望在将 javascript 对象 json 传递给模板化嵌入式小部件之前对其进行转换。

您可以通过要求 'dojo/json' 并执行

```
this.stuff=jsonModule.stringify(this.stuffAsObject); 
```

正如您已经发现的那样，如果您要设置更复杂的属性，则程序化实例化可能是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:32:14.080

如果您`mycompany.widgets.ComplexEmbeddedWidget`迫切希望在初始化后（在构造函数中）设置对象'stuff'，那么我不确定这种方法是否可行，但是一个简单的修复可能是删除 ${stuff} 周围的 ' 引号？

发生的情况基本上是您使用 dijit/_TemplatedMixin 派生小部件。这反过来，在 buildRendering 期间，在“this”（小部件）上调用 _stringRepl。我不完全确定流程，因为您正在使用 WidgetsInTemplate..

例如，通过标记将小部件属性设置为数组：

```
<div 
   data-dojo-type="dijit.form.Select" 
   data-dojo-props="options:[ 'val1', 'val2']">
</div> 
```

如您所见，值周围没有引号 - 否则它将呈现为字符串。然后让我们将您的 ComplexEmbedded 模板更改为

```
dojo.declare("exampleName", [_WidgetsInTemplateMixin, _TemplatedMixin], {
 templateString: '<div class="outerWidgetDomNode">
  ...
  <div class="thing"
    data-dojo-type="mycompany.widgets.ComplexEmbeddedWidget"
    data-dojo-props="stuff: ${stuff}"></div>
  ...
'
}); 
```

要使用对象实例化 ComplexEmbeddedWidget.stuff，这需要是一个字符串。_Templated 使用 dojo.string.substitute，如果给定深层嵌套对象，它可能会失败。

标记示例：

```
<div data-dojo-type="exampleName" data-dojo-props="stuff: '{ json:\'Representation\', as:\'String\'}'"></div> 
```

或通过程序化

```
var myObj = { obj:'Representation', as:'Object' };
var anExampleName = new exampleName({
    stuff: dojo.toJson(myObj) // stringify here
}, 'exampleNode'); 
```

让我们知道进展如何，我一直想通过这种将小部件嵌入模板内容来研究流的存在有一段时间了 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T16:56:44.170

您可以以编程方式插入小部件。如果插入的小部件需要将 JavaScript 对象传递给它，这似乎是可行的方法。

# sockets - 套接字，它的属性和 SO_REUSEADDR 选项

> ID：11453676
> 
> 赞同：1
> 
> 时间：2012-07-12T14:08:26.050
> 
> 标签：sockets, network-programming

我有几个基本问​​题：

1.一个socket由一个协议、一个本地ip、本地端口、远程ip和远程端口来表示。假设客户端和服务器之间存在这样的连接。现在，当**我将另一个客户端绑定到同一个本地端口和 ip**时，它被绑定（我使用了 SO_REUSEADDR）但是第二个客户端的连接操作到同一个远程 ip 和端口失败了。***所以，第三个进程无法共享同一个套接字?***

2.当我们在绑定到本地端口和ip的套接字上调用listen()时，它会监听连接。当客户端连接时，它会创建一个套接字（比如 A）。它完成了 3 次握手，然后启动了一个不同的套接字（比如 B）并删除了套接字 A（[源](http://alas.matf.bg.ac.rs/manuals/lspe/snode=104.html)）。新的客户端由新的套接字 B 处理。那么，***什么样的套接字代表一个监听套接字，即远程 ip 和端口是什么，套接字 A 与该套接字不同还是只是将远程 ip 和端口添加到侦听套接字形式 A 中？***

3.我读到**SO_REUSEADDR 可以在端口上建立一个侦听套接字，如果该端口和 ip 上没有套接字侦听，并且该端口和 ip 上的所有套接字都设置了 SO_REUSEADDR 选项**。但后来我也遇到了一个文本，上面写着**如果客户端绑定到一个端口和 ip，除非第一个客户端成功调用 connect() ，否则另一个客户端无法绑定到它（即使使用 SO_REUSEADDR ）**。**在此示例中**，该端口和 ip上**没有侦听套接字**（它是客户端，因此我们没有调用 connect()）。那么，***为什么不允许其他客户呢？***

 ***提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:21:48.537

1.  正确：无法使用相同的协议、本地端口、本地地址、远程端口和远程地址创建两个不同的套接字。没有什么可以告诉哪些数据包属于哪个套接字！

2.  监听套接字没有远程地址和远程端口。没关系，因为线路上没有与此套接字关联的数据包（目前）。实际上，所有套接字都不是从本地地址或远程地址或端口开始的。这些属性仅在稍后调用`bind()`(for local) 和`connect()`/ `accept()`(for remote) 时分配。

3.  在您调用`connect()`或`listen()`在套接字上之前，服务器（侦听）或客户端套接字之间没有任何区别。他们是一样的。所以在这里说如果两个套接字都没有远程地址或端口，则不允许两个套接字共享相同的协议、本地地址和本地端口会更正确。

    不过在实践中这不是问题，因为您通常不会调用`bind()`客户端套接字，这意味着有时会隐含`bind()`到临时端口`connect()`。这些典型的客户端套接字不能与侦听套接字发生冲突，因为它们从没有与它们关联的地址变为同时具有与它们关联的本地和远程地址，从而跳过了它们只有一个本地地址的状态。***

# c# - C#用转义版本替换字符串中的字符

> ID：11453680
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:08:31.807
> 
> 标签：c#, .net

我知道互联网上充斥着转义字符的信息，但我没有找到我需要的具体信息。我正在从数据库中查询库存信息，并且库存描述可能包含各种需要转义的“危险”字符。当我遍历我的数据阅读器时，我需要用该字符的转义版本替换任何潜在问题字符的所有实例。我看过 Regex.Escape，但它遗漏了一些关键字符，例如引号。还有Regex.Replace，但是如果我要替换的字符可以是任意数量的东西，我该如何告诉它替换字符串应该是什么？我将如何处理以下情况：

SQL Query 为库存描述返回以下结果集：

*   3/4" 线
*   5' 绳索@StoreX
*   1 1\4" 六角螺母

**我认识到描述本身存在更深层次的问题，但假设这是我必须使用的数据......

```
SqlDataReader dr = command.ExecuteReader()
while(dr.Read())
 {
    string partDescription = dr["Description"].ToString();  //Here is where I need to escape any characters posing a potential issue
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:12:10.750

您知道[Web 保护库](http://wpl.codeplex.com/)（以前称为 AntiXSS）吗？这包含很多转义（HTML、Javascript、XML）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:15:52.573

如果这仅用于显示目的（在网络上），那么您只需要在显示之前对值进行 Html 编码。您可以使用 HttpUtility 执行此操作

```
HttpUtility.HtmlEncode("<script>alert('yo');</script>"); 
```

# pointers - CUDA/C++：在 C++ 代码中传递 __device__ 指针

> ID：11453683
> 
> 赞同：1
> 
> 时间：2012-07-12T14:08:46.507
> 
> 标签：pointers, cuda

我正在开发一个 Windows 64 位应用程序，它将管理多个 GPU 上不同 CUDA 算法的并发执行。

我的设计需要一种在 c++ 代码周围传递指向设备内存的指针的方法。（例如，记住它们是我的 c++ 对象中的成员）。我知道用`__device__`限定符声明类成员是不可能的。

但是，我找不到明确的答案是否将`__device__`指针分配给普通 C 指针然后使用后者是否有效。换句话说：以下代码有效吗？

```
__device__ float *ptr;
cudaMalloc(&ptr, size);
float *ptr2 = ptr
some_kernel<<<1,1>>>(ptr2); 
```

对我来说，它编译并表现正确，但我想知道它是否保证正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:27:06.207

不，该代码不是严格有效的。虽然它可能在主机端起作用（或多或少是偶然的），但如果您尝试`ptr`直接从设备代码中取消引用，您会发现它的值无效。

执行您的代码所暗示的正确方法是这样的：

```
__device__ float *ptr;

__global__ void some_kernel()
{
    float val = ptr[threadIdx.x];
    ....
}

float *ptr2;
cudaMalloc(&ptr2, size);
cudaMemcpyToSymbol("ptr", ptr2, sizeof(float *));

some_kernel<<<1,1>>>(); 
```

对于 CUDA 4.x 或更高版本，将其更改`cudaMemcpyToSymbol`为：

```
cudaMemcpyToSymbol(ptr, ptr2, sizeof(float *)); 
```

如果静态设备符号`ptr`真的是多余的，你可以这样：

```
float *ptr2;
cudaMalloc(&ptr2, size);
some_kernel<<<1,1>>>(ptr2); 
```

但是我怀疑您可能正在寻找的是诸如[推力库`device_ptr`类](https://thrust.github.io/doc/classthrust_1_1device__ptr.html)之类的东西，它是一个很好的抽象，包装了裸设备指针，并且在代码中绝对清楚设备内存中的内容和主机内存中的内容。

# .net - 如何在 Linux 上更改 WinForms 应用程序的 WM_CLASS？

> ID：11453687
> 
> 赞同：4
> 
> 时间：2012-07-12T14:09:02.500
> 
> 标签：.net, winforms, unity-container, x11

我有一个使用 WinForms 的跨平台 .NET 应用程序。

为了更好地与 Unity 兼容，我想设置`WM_CLASS`WinForms 窗口的属性。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:11:53.510

[bitbucket.org/hindlemail/settingwmclass](https://bitbucket.org/hindlemail/settingwmclass)上似乎有完整的示例项目：

> 示例项目展示了如何为在 Linux 上运行的单声道 winform 应用程序设置 WM_CLASS X11 属性。这使得 mono winforms 应用程序在 unity + gnome3 窗口管理器中表现得更好。

```
 // Managed struct of XSetClassHint classHint.
    public struct XClassHint
    {
        public IntPtr res_name; 
        public IntPtr res_class;
    }       

    [DllImport ("libX11", EntryPoint="XSetClassHint", CharSet=CharSet.Ansi)]
    public extern static int XSetClassHint(IntPtr display, IntPtr window, IntPtr classHint);

    public static void SetWmClass(string name, string @class, IntPtr handle)
    {           
        var a = new NativeX11Methods.XClassHint { 
                        res_name = Marshal.StringToCoTaskMemAnsi(name), 
                        res_class = Marshal.StringToCoTaskMemAnsi(@class) 
                    };
        IntPtr classHints = Marshal.AllocCoTaskMem(Marshal.SizeOf(a));
        Marshal.StructureToPtr(a, classHints, true);
          NativeX11Methods.XSetClassHint(NativeReplacements.MonoGetDisplayHandle(),     NativeReplacements.MonoGetX11Window(handle), classHints);           

        Marshal.FreeCoTaskMem(a.res_name);
        Marshal.FreeCoTaskMem(a.res_class);

        Marshal.FreeCoTaskMem(classHints);
    } 
```

上面的页面有一个[源代码的下载链接](https://bitbucket.org/hindlemail/settingwmclass/get/2fbf3c67c3fc.zip)：

# funcunit - 使用 FuncUnit 清除输入文本框

> ID：11453689
> 
> 赞同：0
> 
> 时间：2012-07-12T14:09:08.500
> 
> 标签：funcunit

我正在为我的应用程序编写 FuncUnit。我正在 Google Chrome 中浏览应用程序。我有一个最初隐藏的文本框。我需要使其可见，然后清除该文本框中已经存在的文本。我有以下代码使该框可见但无法清除其中的文本。

```
 S('#search').visible().clearText(); 
```

谁能告诉这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T01:09:06.027

你的说法不准确。`visible()`不会使事物可见。这是一个等待函数，它等待源元素变为可见，然后再进行下一个操作。

koalix 的按键序列有效。使用 type() 命令，您可能需要先单击文本输入，然后再清除它。

尝试：

```
S('#search').visible().click().type('[ctrl]a[ctrl-up][delete]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:27:58.443

尝试通过键入 - Ctrl+A 和 Delete 来清除文本框。

```
var input = S('input.my-input');

input.type('[ctrl]a[ctrl-up][delete]', function() {
    // Continue in test case after the text has been removed
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T19:41:50.737

您也可以尝试空引号 <" ">

```
var input = S('input.my-input');

input.type('', function() {
    // remove existing text
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T14:53:15.420

我不知道你是否还在等待答案。我认为你没有`visible()`以正确的方式使用。

在 FuncUnit（请参阅[此处](http://javascriptmvc.com/docs.html#!FuncUnit)的文档）中，您可以区分“动作”和“等待”。`visible()`是一个等待，应该用来等待一个元素变得可见，像这样：

```
 S('#el').visible( function() {
        // do something when element with id="el" becomes visible
    }); 
```

# java - 包装器奇怪的行为

> ID：11453694
> 
> 赞同：0
> 
> 时间：2012-07-12T14:09:44.037
> 
> 标签：java, casting, wrapper

嗨，伙计们，我对这门语言有点陌生

```
public class fibonacci {

/**
 * @param args
 */
public static int fibonaccifun(int number)

{
    int firstvar=1;
    int secondvar=0,total=0,sum=0;
    for(int i=0;i<number;i++)
    {
        total =firstvar+secondvar;
        System.out.println(total);
        firstvar=secondvar;
        secondvar=total;
        sum+=total;

    }

return sum;
}

public static void main(String[] args) {
    // TODO Auto-generated method stub

     float aver= (float) ( fibonacci.fibonaccifun(5)/5);
    System.out.println(aver); 
```

.....................................

当我尝试

`float aver= (float) ( fibonacci.fibonaccifun(5))/5;`结果是 2.4 这是正确的值，但是当我这样做时

`float aver= ((float) fibonacci.fibonaccifun(5)/5);` 平均值=2.0；

我不知道为什么会这样，任何人都可以帮我解释一下，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:12:44.477

因为在第二种情况下

`fibonacci.fibonaccifun(5)/5`

转到 2，因为`fibonaccifun`和 5 的结果都是整数，**然后**你将其转换为浮点数。（如果把2个int相除，结果就是一个int，而int显然不能有小数）

在第一种情况下

`(float) ( fibonacci.fibonaccifun(5))`

得出`fibonaccifun`浮点数的结果，**然后**进行除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:15:56.760

您至少需要转换分子或分母

```
((float) fibonacci.fibonaccifun(5)/5) 
```

您正在划分 2 个整数。除了转换为 float 的 int 之外，您永远不会得到任何东西（因此是 2.0）

使固定：

```
(((float) fibonacci.fibonaccifun(5))/5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:18:58.240

运算顺序：在数学和计算机编程中，运算顺序（有时称为运算符优先级）是用于明确阐明在给定数学表达式中应首先执行哪些过程的规则。

[http://en.wikipedia.org/wiki/Order_of_operations](http://en.wikipedia.org/wiki/Order_of_operations)

括号 指数 乘法 除法 加法 减法

这是一个完美的例子，说明仅仅一个括号的切换就可以将整个程序的逻辑抛出门外。

# jquery - jQuery 追加并不总是有效

> ID：11453697
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:09:49.473
> 
> 标签：jquery, xml

我正在使用 jQuery 来解析 XML。我已经到了从中获得价值的地步。代码如下：

```
$(xml).find('item').each(function(){
  var message = "<span>" + $(this).find('value').text() + "</span>";
  $(message).appendTo('#main');     
}); 
```

现在，问题如下：

上面的代码有效，但这段代码不起作用：

```
$(xml).find('item').each(function(){
  var message = $(this).find('value').text();
  $(message).appendTo('#main');     
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:12:12.403

使用 appendTo 的倒数

```
$("#main").append(message); 
```

# python - Vpython 3D Box+文字组合

> ID：11453698
> 
> 赞同：0
> 
> 时间：2012-07-12T14:09:53.323
> 
> 标签：python, vpython

我是 Python/Vpython 的新手，希望得到一些指导。最好的方法是创建一个 vpython 框（或 3D 矩形等），在框的每个面上都有一个唯一的文本字符串，这样当框旋转时，文本也会旋转。

设想这个程序的一种简单方法类似于掷骰子，即边上的点数随着骰子的旋转而变化。而不是点，我的立方体（“骰子”）将有单词而不是点。

Vpython 使构建盒子变得非常简单，但是盒子没有文本属性。我一直在修补挤压，但似乎不是这里的解决方案。任何帮助将非常感激。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:18:15.260

仅供参考：我自己解决了这个问题，方法是在一个框架内创建一个复合对象（一个框和几个文本对象），然后旋转框架。

# java - Android Java从十六进制值创建位图

> ID：11453705
> 
> 赞同：29
> 
> 时间：2012-07-12T14:10:16.257
> 
> 标签：java, android, bitmap

谁能建议一种从十六进制值创建小的纯色位图图像的方法？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-07-18T16:13:01.257

或者，您可以使用[Bitmap.eraseColor()](http://developer.android.com/reference/android/graphics/Bitmap.html#eraseColor(int))为您的位图设置纯色。

例子：

```
 import android.graphics.Bitmap;
  ...
  Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
  image.eraseColor(android.graphics.Color.GREEN); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-12T14:21:12.463

我想我可能有答案。从技术上讲，我相信在 Android 上比在“pc”上容易得多。上次我搜索创建位图（.bmp）时，我只发现了一些 Android 功能和`BitmapFactory`非 android 的，这对我不起作用。

请看这个网站： http: [//developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)
这一点适合你：

> `static Bitmap createBitmap(int[] colors, int offset, int stride, int width, int height, Bitmap.Config config)`
> 
> 返回具有指定宽度和高度的不可变位图，每个像素值设置为颜色数组中的相应值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-26T10:33:13.630

```
Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas canvas=new Canvas (image);
int HEX=0xFF888888;
canvas.drawColor (HEX); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T14:21:55.853

使用`createBitmap()`.

这是一个链接，将向您展示如何：http: [//developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

# javascript - Jquery在文本元素后面添加带有背景的div

> ID：11453707
> 
> 赞同：0
> 
> 时间：2012-07-12T14:10:19.483
> 
> 标签：javascript, jquery, html, css

我想在一些文本或图像的文本后面放置一个绝对定位的 div。我无法将绝对 div z-index 设置为 -1 的原因是文本或带有背景图像的图像后面有内容。所以绝对 div 将位于其后面。

我熟悉 Javascript、jQuery、css 等。那么我该怎么做才能将绝对 div 定位在文本后面但在背景图像前面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:29:22.797

也许像这样？

```
.div-1 { background-image:url(my-image.jpg) no-repeat 0 0; position:relative; }
.div-2 { position:absolute; z-index:1; top:0 left:0; }
.div-3 { position:absolute; z-index:2; top:0 left:0; }

<div class="div-1">
 <div class="div-2">behind</div>
 <div class="div-3">in front</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:48:44.797

与其将带有背景图像的 div 的 z-index 设置为 -1，不如创建一个包含图像/文本的 div 并将其 z-index 设置为 1。

# objective-c - NSPredicate 检测名字和姓氏

> ID：11453708
> 
> 赞同：0
> 
> 时间：2012-07-12T14:10:25.547
> 
> 标签：objective-c, nspredicate

我正在尝试使用 NSPredicate 来评估 NSString 是否同时具有名字和姓氏（本质上是两个非数字单词之间的空格）。这段代码对我不起作用（代码取自并稍作修改：[What are best practice for validateing email addresses in Objective-C for iOS 2.0?](https://stackoverflow.com/questions/800123/best-practices-for-validating-email-address-in-objective-c-on-ios-2-0)：

```
-(BOOL) validName:(NSString*) nameString {
    NSString *regExPattern = @"[A-Z]+_[A-Z]";
    NSRegularExpression *regEx = [[NSRegularExpression alloc] initWithPattern:regExPattern options:NSRegularExpressionCaseInsensitive error:nil];
    NSUInteger regExMatches = [regEx numberOfMatchesInString:nameString options:0 range:NSMakeRange(0, [nameString length])];

    if (regExMatches == 0) {
        return NO;
    } else
        return YES;
    }
} 
```

我认为我的 regEx 模式有问题，但我不确定如何修复它。这就是我检查字符串的方式：

```
if([self validName:nameTextField.text]) {
  // Valid Name
} else {
  // Name no valid
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:12:58.423

如果您只想检查以空格分隔的名字和姓氏，我会试试这个：

```
- (BOOL)validName:(NSString*)name
{
    NSArray *components = [name componentsSeparatedByString:@" "];
    return ([components count] >= 1);    
} 
```

这将检查您是否至少有两个由空格分隔的组件。这也适用于具有 3 个或更多组件的名称（中间名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:40:41.077

首先，如果你想匹配一个空格，那么只需在正则表达式模式中放置一个空格。您现在拥有的下划线需要在您的姓名字段中添加下划线才能匹配。

其次，`NSPredicate`将整个字符串与正则表达式匹配，因此该模式不会捕获正常的姓氏（具有多个字符），即使有空格也是如此。您需要添加一些涵盖名称最后一部分的表达式。

第三，由于您将文本字段直接传递到支票中，因此您给用户施加了一些压力，要求您按预期输入所有内容。在测试之前，您可能需要先清理一下字符串。就个人而言，我至少会修剪字符串中的空格并用一个空格替换多个空格。

这是一些执行此操作的代码：

```
NSString *regExPattern = @"[A-Z]+ [A-Z]+"; //Added a "+" to match the whole string up to the end. 
```

查看：

```
NSString *name = nameTextField.text;

name = [name stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

name = [name stringByReplacingOccurrencesOfString:@" +" 
                                       withString:@" " 
                                          options:NSRegularExpressionSearch 
                                            range:NSMakeRange(0, name.length)];
if([self validName: name]) {
  // Valid Name
} else {
  // Name no valid
} 
```

您可以想象有很多方法可以做到这一点，但这是一个开始。但是，您应该考虑对“正确”名称进行测试，因为有许多名称不会通过简单的正则表达式，例如带有撇号和重音的名称，例如：

1.  吉姆·奥马利
2.  佐伊琼斯

等等

# matlab - 在 Matlab 中逐行读取文本数据并进行简单计算

> ID：11453709
> 
> 赞同：0
> 
> 时间：2012-07-12T14:10:31.073
> 
> 标签：matlab, file-io

我最近开始使用 Matlab。我只知道基本的matlab操作。所以，我正在努力解决以下问题。我会很感激有人的帮助。

我有一个格式如下的文本文件，预计每次都会根据 CoorsID 更新其记录。我需要一个接一个地考虑每一行（维护 CoorsID），​​并将计时值乘以 10 表示步行，12 表示 urbanPuTLLLL，13 表示 urbanPuTDDDD 和 14 表示 urbanPuTBus，然后根据 walk 和其他选项保存在新矩阵中，直到距离值的总和变为=18917.70763。

我这样做是把数据集作为矩阵放在 matlab 中，这相当容易。但是，我什至无法找出任何线索来逐行计算。高级 感谢您的专家建议。

-萨尼尔

```
###NumbersID    CoorsID Distance    Timed   Trailinformation###
###33   0   0   0   walk###
###33   1   1.881326228 0.152869117 walk####
###33   2   2.861352906 2.211478513 urbanPuTLLLL####
###33   3   2.894228468 2.381984857 urbanPuTLLLL####
###33   4   3.77420476  3.807208533 urbanPuTDDDD####
###33   5   3.893702709 3.911981757 urbanPuTDDDD####
###33   6   3.934894721 4.022707315 urbanPuTBus####
###33   7   4.230054787 4.131792708 urbanPuTBus#### 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:19:30.913

首先，我将您在问题中显示的数据放入我命名的文件中`test.m`。然后这段代码将其读入 Matlab：

```
fid = fopen('test.m','r');

L=fgetl(fid); % gets first line "header"
L=fgetl(fid); % gets first data line
I=1;

while ~isnumeric(L) && L(1)~=-1 % fgetl(fid) returns -1 at end of file
    A(I,1:5) = textscan(L,'###%d %d %f %f %[^#]');
    L = fgetl(fid);
    I=I+1;
end 
```

使用`doc fgetl`打开帮助窗口以阅读有关`fgetl`，然后您可以阅读有关其他命令的信息。

A 是一个元胞数组，其中所有值都在其中转换。一定要`doc cell`阅读这些。

查看`doc`for`textscan`以了解我所做的输入格式。 `###%d`意思是“跳过三个 # 然后将其余的转换为整数。” `%[^#]`意思是“阅读所有内容，除了 #。”

从那里，您可以访问 A 的不同元素，`A{3,4}`存储在名为 的元胞数组的第 3 行第 4 列中的数字`A`也是`2.211478513`

您继续并弄清楚如何进行乘法和寻址以及何时停止添加事物的决定。

# c# - INSERT 语句中的错误消息

> ID：11453711
> 
> 赞同：1
> 
> 时间：2012-07-12T14:10:32.560
> 
> 标签：c#, sql, sql-server, tsql

我相信我的 INSERT 语句有问题。当我运行我的代码时，错误消息显示：

> 行：5
> 错误：Sys.WebForms.PageRequestManagerServerErrorException：“，”附近的语法不正确。

我的 where 子句有问题吗？

这是我的`INSERT`声明：

```
INSERT into AppointmentDetails (SelectedApptDate, SelectedApptStartTime, 
                                SelectedApptEndTime, SelectedWeddingPlanner) 
   SELECT 
       ApptID 
   from 
       Appointment 
   INNER JOIN 
       Appointment ON Appointment.ApptID = AppointmentDetails.ApptID 
   WHERE 
       SelectedApptDate = @SelectedApptDate, 
       SelectedApptStartTime = @SelectedApptStartTime, 
       SelectedApptEndTime = @SelectedApptEndTime, 
       SelectedWeddingPlanner = @SelectedWeddingPlanner 
```

这就是我从 C# 中调用它的方式：

```
 command.CommandText = "INSERT into AppointmentDetails (SelectedApptDate, SelectedApptStartTime, SelectedApptEndTime, SelectedWeddingPlanner) SELECT ApptID from Appointment INNER JOIN Appointment ON Appointment.ApptID = AppointmentDetails.ApptID WHERE SelectedApptDate = @SelectedApptDate, SelectedApptStartTime = @SelectedApptStartTime, SelectedApptEndTime = @SelectedApptEndTime, SelectedWeddingPlanner = @SelectedWeddingPlanner";

    command.Connection = connection;
    command.Parameters.AddWithValue("@SelectedApptDate", dateSelected);
    command.Parameters.AddWithValue("@SelectedApptStartTime", timeStart);
    command.Parameters.AddWithValue("@SelectedApptEndTime", timeEnd);
    command.Parameters.AddWithValue("@SelectedWeddingPlanner", weddingplanner); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:13:10.123

使用`AND`而不是`,`分隔`WHERE`子句中的条件。你必须这样写：

```
INSERT into AppointmentDetails (SelectedApptDate, SelectedApptStartTime,
           SelectedApptEndTime, SelectedWeddingPlanner) 
SELECT ApptID 
from Appointment 
INNER JOIN Appointment ON Appointment.ApptID = AppointmentDetails.ApptID 
WHERE SelectedApptDate = @SelectedApptDate
   AND  SelectedApptStartTime = @SelectedApptStartTime
AND SelectedApptEndTime = @SelectedApptEndTime 
AND  SelectedWeddingPlanner = @SelectedWeddingPlanner"; 
```

然而，在那之后你会得到一个新的例外，因为你只选择一列插入到这四列中：`SelectedApptDate, SelectedApptStartTime, SelectedApptEndTime, SelectedWeddingPlanner`. `SELECT`您还必须在语句中指定其他三列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:12:45.073

您不要用;分隔`WHERE`子句 `,`你的意思是`AND`？

```
INSERT INTO
    AppointmentDetails (SelectedApptDate, SelectedApptStartTime, SelectedApptEndTime, SelectedWeddingPlanner)
    SELECT ApptID FROM Appointment INNER JOIN Appointment ON Appointment.ApptID = AppointmentDetails.ApptID
    WHERE SelectedApptDate = @SelectedApptDate
      AND SelectedApptStartTime = @SelectedApptStartTime
      AND SelectedApptEndTime = @SelectedApptEndTime
      AND SelectedWeddingPlanner = @SelectedWeddingPlanner 
```

您还需要`SELECT`四列，而不仅仅是一列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:17:10.330

您的 SELECT 语句中只有一列，但 INSERT 需要四列。架构是什么样的？

您试图从 Appointment 表中将哪些字段传递到您的 INSERT 中，哪些字段应该来自变量？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:19:02.837

您的`WHERE`子句应包含`AND`or `OR`。

例如：

```
command.CommandText = "INSERT into AppointmentDetails (SelectedApptDate,   
                                                       SelectedApptStartTime,  
                                                       SelectedApptEndTime,  
                                                       SelectedWeddingPlanner)

SELECT ApptID from Appointment 
INNER JOIN Appointment ON Appointment.ApptID = AppointmentDetails.ApptID
WHERE  SelectedApptDate = @SelectedApptDate 
AND SelectedApptStartTime = @SelectedApptStartTime
AND SelectedApptEndTime = @SelectedApptEndTime
AND SelectedWeddingPlanner = @SelectedWeddingPlanner"; 
```

此外，您的`INSERT`语句包含 4 列，但您在`SELECT`语句中只返回 1 列。

# hibernate - 如何从表（持久性数据库表）中获取列到 jsp 页面中的“表单”的“选择”列表中

> ID：11453712
> 
> 赞同：2
> 
> 时间：2012-07-12T14:10:39.537
> 
> 标签：hibernate, struts2, persistence, hql

我想从表（持久性数据库表）中提取一列到 jsp 页面中的“表单”的“选择”列表中。我正在使用struts2和hibernate。

我的列是“名称”，表是“类别”我已经进行了映射配置和 bean 类。

jsp页面的“形式”中的代码：

```
<s:select label="Select Category :" name="cname" list="categoryList" /> 
```

我的动作课：

```
package com.rambo.action;

import beans.Category;
import com.opensymphony.xwork2.ActionSupport;
import java.util.ArrayList;
import java.util.List;
import org.hibernate.Session;

public class FindCategory extends ActionSupport {

    private List<Category> cl = new ArrayList<Category>();
    private List<String> categoryList = new ArrayList<String>();

    @Override
    public String execute() throws Exception {
        Session session = null;
        try {
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            this.cl = (List<Category>) session.createQuery("from Category").list();
            if (this.cl.isEmpty()) {
                this.addActionError("Sorry.. No category Available. Try again Later.!");
                return ERROR;
            }
            for (int i = cl.size()-1; i >= 0; i--) {
                categoryList.add(cl.get(i).getName());
            }
            session.getTransaction().commit();
        } catch (Exception e) {
            this.addActionError("Oops. An Error Encountered...!");
            return ERROR;
        }
        return SUCCESS;
    }
} 
```

Category.hbm.xml 中的映射：

```
<property name="name" type="string">
            <column name="NAME" length="20" not-null="true" />
        </property> 
```

bean "Category.java" 的 getter 和 setter：

```
public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    } 
```

我的 glassfish 服务器显示错误为：

```
org.apache.jasper.JasperException: tag 'select', field 'list', name 'cname': The requested list key 'categoryList' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location]

root cause tag 'select', field 'list', name 'cname': The requested list key 'categoryList' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location] 
```

有人可以指出可能是什么错误..？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:16:37.507

为 创建公共 getter `categoryList`，否则标签无法访问列表。

另外，IMO，您在行动中做的工作太多了。

# html - 为什么rails视图“刷新”

> ID：11453713
> 
> 赞同：0
> 
> 时间：2012-07-12T14:10:48.317
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我现在才注意到这一点，我不知道它是否一直都在这里。当我更新我的 Rails 应用程序时，会有一个“硬重新加载”刷新时间，它会使整个屏幕变白。我 99% 确定这在 chrome 中并不常见。就像在 SO 上一样，我认为他们没有使用 Ajax，但浏览器仍然知道将未更改的元素保留在页面上，而不是从白屏中重新绘制

这是因为我在 :development 还是什么？

我只是为 jquery 对谷歌字体和谷歌 CDN 进行外部调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:45:03.863

我刚刚尝试刷新我在 Chrome 中打开的几个选项卡，并在页面重新加载完成之前看到所有选项卡上的空白屏幕片刻。我看到它的例子包括[https://developer.mozilla.org/en-US/](https://developer.mozilla.org/en-US/)甚至[http://stackoverflow.com](http://stackoverflow.com)（与您报告的内容相反），所以我希望它在 Chrome 和你之前没有注意到。

但是，我会说处于开发模式通常会使白屏持续更长时间。

# asp.net-mvc-3 - 使用 MVC 3 过滤 Excel 输出

> ID：11453714
> 
> 赞同：0
> 
> 时间：2012-07-12T14:10:48.427
> 
> 标签：asp.net-mvc-3, export-to-excel, viewdata, viewbag

我正在尝试过滤发送到 excel 文件的行。我已经能够弄清楚如何将行数据导出到 Excel，但现在我需要将过滤后的数据发送到 Excel 工作表，因为我添加了一个版本下拉列表。发生的情况是我从下拉列表中选择了我想查看的版本。

前任。版本是12.1。

该视图只会带回与它关联的版本号为 12.1 的数据。现在，当我想在 excel 文件中下载过滤后的行时。我按下下载到 excel 文件按钮，它在 excel 文件中打开文件，除了它带来所有行而不是过滤的行。我认为我所要做的就是将适当的 viewbag 和 viewdata 变量添加到调用中，它会工作，没有这样的运气，它仍然保持每一行。你们能看看我的代码并帮助我找出我做错了什么吗？我已经发布了下面的代码，如果您需要更多信息以更好地诊断，请告诉我，我会经常回来查看！谢谢你的帮助！

**Excel 控制器**

```
[Authorize]
        public ActionResult PaExcelOutput(string sortField, string currentFilter, string searchString, int? page, string VERS)
        {

            int pageNumber = (page ?? 1); // start page number

            var PaExcel = from P in db.iamp_mapping
                          select P;

            ViewBag.CurrentField = sortField = String.IsNullOrEmpty(sortField) ? "IAMP_PK" : sortField; // Provides the field to sort
            ViewBag.CurrentFilter = searchString; // Provides the view with the current filter string

            ViewData["SelectedVersion"] = VERS;
            ViewData["currentFilter"] = currentFilter;
            ViewData["VERS"] = new SelectList(PaExcel.Select(x => x.VERSION).Distinct());

            if (!String.IsNullOrEmpty(VERS))
            {
                PaExcel = PaExcel.Where(p => p.VERSION.ToUpper().Contains(VERS));
            }

            if (Request.HttpMethod == "GET")
            {
                searchString = currentFilter; //sets the currentFilter equal to Searchstring
            }

            else
            {
                page = 1;                   // defaults to page 1
            }

            return View(PaExcel);
        } 
```

**Excel 输出视图**

```
@model IEnumerable<DBFirstMVC.Models.iamp_mapping>

<!--This is what the MVC uses to output the correct rows to Excel -->

@{
    Layout = null;
    Response.AddHeader("Content-Type", "application/vnd.ms-excel");  
}

<table>
    <tr>
        <th>
            PA
        </th>
        <th>
            VERSION
        </th>
        <th>
            INVESTMENT AREA
        </th>
        <th>
            MAJOR PROGRAM
        </th>
        <th>
            PA SUB PROGRAM
        </th>
        <th>
            VP
        </th>
        <th>
            DIRECTOR
        </th>
        <th>
            SPA
        </th>
        <th>
            PA INITIATIVE
        </th>
        <th>
            NOTES
        </th>
        <th>
            TEAM BC
        </th>
        <th>
            PA CC
        </th>
        <th>
            PA DESCRIPTION
        </th>
        <th>
            PA MANAGER
        </th>
        <th>
            SPA CC
        </th>
        <th>
            TIER 1
        </th>
        <th>
            TIER 2
        </th>
        <th>
            TIER 3
        </th>
        <th>
            TIER 4
        </th>
        <th>
            CFP VIEW NV/NONNV
        </th>
        <th>
            CFP VIEW
        </th>
        <th>
            CREATION DATE
        </th>
        <th>
            CAF PROJECT NAME
        </th>
        <th>
            CAF IA
        </th>
        <th>
            CAF MP
        </th>
        <th>
            CAF LEAD DIR
        </th>
        <th>
            CAF LEAD MGR
        </th>
        <th>
            CAF CC DIR
        </th>
        <th>
            CAF CC MGR
        </th>
        <th>
            CAF CC
        </th>
        <th>
            CAF ID
        </th>
        <th>
            CREATED ON
        </th>
        <th>
            LAST EDITED
        </th>
        <th>
            PROJECT STATUS
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.PA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VERSION)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.INVESTMENT_AREA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MAJOR_PROGRAM)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PA_SUB_PROGRAM)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VP)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DIRECTOR)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SPA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PA_INITIATIVE)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NOTES)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TEAM_BC)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PA_CC)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PA_DESCRIPTION)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PA_MANAGER)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SPA_CC)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TIER_1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TIER_2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TIER_3)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TIER_4)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CFP_VIEW_NV_NONNV)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CFP_VIEW)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CREATION_DATE)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_PROJECT_NAME)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_IA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_MP)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_LEAD_DIR)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_LEAD_MGR)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_CC_DIR)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_CC_MGR)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_CC)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CAF_ID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CREATED_ON)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LAST_EDITED)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PROJECT_STATUS)
        </td>

    </tr>
}

</table> 
```

**索引视图**

```
<!--For stack overflow, This is where the actionlink that the download to excel button is located it is at the bottom of this code snippet called PAExcelOutput-->

@model PagedList.IPagedList<DBFirstMVC.Models.iamp_mapping>

@{
    ViewBag.Title = "PA Mapping";

}

@using PagedList;

<h2 class="corporate sifr">@ViewBag.Title</h2>

<div class="crossband">
@using (Html.BeginForm())
{

    <div class="lefty">        
        Filter by Version: @Html.DropDownList("VERS", null, "All", new { @class = "text" }) and by Criteria: @Html.TextBox("SearchString", "", new { @class = "text" })        
    </div>    
    <input type = "submit" class = "button1" value = "Go" />
}

<div class="righty">
    @Html.ActionLink("Add a new PA to the database", "Create", "Pa", null, new { @class = "button1" })

</div>
</div>

<div class="crossband">
    <div class="lefty">   
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>
    <div class="righty">
        Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount records
    </div>
</div>

<table>
    <tr>
        <th>
            @Html.ActionLink("PA", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "PA", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "PA")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "PA")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>        
            @Html.ActionLink("MAJOR PROGRAM", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "MAJOR_PROGRAM", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "MAJOR_PROGRAM")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "MAJOR_PROGRAM")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}           
        </th>
        <th>
            @Html.ActionLink("INVESTMENT AREA", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "INVESTMENT_AREA", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "INVESTMENT_AREA")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "INVESTMENT_AREA")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}   
        </th>
        <th>
            @Html.ActionLink("Version", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "VERSION", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "VERSION")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "VERSION")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}   
        </th>
        <th>
            @Html.ActionLink("VP/SR. DIRECTOR", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "VP", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "VP")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "VP")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}   
        </th>
        <th>
            @Html.ActionLink("DIRECTOR/SR. MGR", "", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "DIRECTOR", VERS = ViewBag.SelectedVersion })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "DIRECTOR")
            {<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "DIRECTOR")
            {<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}   
        </th>       
        <th></th>
    </tr>
@{
    var row_class = "odd";
}

@foreach (var item in Model)
{
    row_class = row_class == "odd" ? "even" : "odd";    
    <tr class="@row_class">
        <td>
            @Html.DisplayFor(modelItem => item.PA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MAJOR_PROGRAM)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.INVESTMENT_AREA)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VERSION)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VP)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DIRECTOR)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.IAMP_PK }) |

            @Html.ActionLink("Delete", "Delete", new { id = item.IAMP_PK })
        </td>
    </tr>
}

</table>

<div class="crossband">
    <div class="lefty">
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, VERS = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>
    <div class="righty">
    Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount records
    </div>
</div>
<br/><br/>
<div class="righty">
@Html.ActionLink("Download in Excel Format", "PaExcelOutput", "Pa", new { VERS = ViewBag.SelectedVersion, currentFilter = ViewBag.currentFilter, sortOrder = ViewBag.CurrentSort, @class = "button1" })

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T10:30:12.610

**试试这个 Code Worked** Excel using Interop....

代码：

```
private System.Data.DataTable GetExcelData(string fileName)
        {
            Application excelApp = null;
            Workbook excelWorkBook = null;
            Worksheet excelSheet;
            Range range;

            try
            {
                //creat a Application object
                excelApp = new Application();

                //   get   WorkBook  object
                excelWorkBook = excelApp.Workbooks.Open(fileName, Missing.Value, Type.Missing,
                        Missing.Value, Missing.Value, Missing.Value,
                        Missing.Value, Missing.Value, Missing.Value,
                        Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                        Missing.Value, Missing.Value);

                //   get   WorkSheet object
                excelSheet = (Microsoft.Office.Interop.Excel.Worksheet)excelWorkBook.Sheets[1];

                int columnCount = excelSheet.UsedRange.Columns.Count;

                excelSheet.Columns.ClearFormats();
                excelSheet.Rows.ClearFormats();

                columnCount = excelSheet.UsedRange.Columns.Count;
                int rowsCount = excelSheet.UsedRange.Rows.Count;

                Range last = excelSheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell, Type.Missing);
                range = excelSheet.get_Range("A2", last);
                object[,] values = (object[,])range.get_Value(Type.Missing);

                System.Data.DataTable dt = new System.Data.DataTable("TicketUpload");
                for (int c = 1; c <= columnCount; c++)
                {
                    if (excelSheet.Cells[1, c].Value2 != null)
                    {
                        string columnName = excelSheet.Columns[c].Address;
                        Regex reg = new Regex(@"(\$)(\w*):");
                        if (reg.IsMatch(columnName))
                        {
                            Match match = reg.Match(columnName);
                            dt.Columns.Add(Convert.ToString(excelSheet.Cells[1, c].Value2).ToUpper(), typeof(string));
                        }
                    }
                }

                for (int i = 1; i <= values.GetLength(0); i++)
                {
                    DataRow dr = dt.NewRow();
                    for (int j = 1; j <= dt.Columns.Count; j++)
                    {
                        if (values[i, j] == null)
                            dr[j - 1] = DBNull.Value;
                        else
                            dr[j - 1] = values[i, j];
                    }
                    dt.Rows.Add(dr);
                }

                range = null;
                excelSheet = null;
                if (excelWorkBook != null)
                    excelWorkBook.Close(false, Missing.Value, Missing.Value);
                excelWorkBook = null;
                if (excelApp != null)
                    excelApp.Quit();
                excelApp = null;

                return dt;

            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
            finally
            {
                range = null;
                excelSheet = null;
                if (excelWorkBook != null)
                    excelWorkBook.Close(false, Missing.Value, Missing.Value);
                excelWorkBook = null;
                if (excelApp != null)
                    excelApp.Quit();
                excelApp = null;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T15:40:48.910

```
<div class="toggle-contents">
        <table width="100%" id="qualitygoal">
            <tr>
                <td class="even" align="left">
                    @Html.Label("Project Id")
                </td>
                <td class="even" align="left">
                    @ViewBag.ProjectId
                </td>

            </tr>
            <tr>

                <td class="even" align="left">
                    @Html.Label("Project Name")
                </td>
                <td class="even" align="left">
                    @ViewBag.ProjectName
                </td>

            </tr>
            <tr>
                     <td class="even" align="left">
                    @Html.Label("Upload File")
                </td>
                <td class="even" align="left">
                <input type="file" name="file" /><br />
                </td>
                     </tr>
        </table>
        <table width="100%" id="goal">

            @using (Html.BeginForm("Index", "TicketDataUpload", FormMethod.Post, new { enctype = "multipart/form-data" }))
            { 

                <br />

                <div align="right">
                    <input type="submit" name="Submit" id="Submit" value="Upload" />
                    <input type="submit" name="Submit" value="NewTemplate" class="Add" id="NewTemplate" />
                    <input type="button" value="Close" class="cancel" />

                </div>
            }

        </table>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:19:05.320

好的，我知道我一个小时前刚刚发布了这个问题，但我想通了，希望其他人在遇到同样问题时会发现这个答案很有帮助。我的 excel 调用的问题在于它有很多变量。

下载按钮的操作链接以前看起来像这样

```
<div class="righty">
@Html.ActionLink("Download in Excel Format", "PaExcelOutput", "Pa", new { VERS = ViewBag.SelectedVersion, currentFilter = ViewBag.currentFilter, sortOrder = ViewBag.CurrentSort, @class = "button1" })

</div> 
```

我把它改成了这个

```
<div class="righty">

@Html.ActionLink("Download in Excel Format", "PaExcelOutput", new { VERS = ViewBag.SelectedVersion, currentFilter = ViewBag.currentFilter, sortOrder = ViewBag.CurrentSort }, new { @class = "button1" })

</div> 
```

通过`"Pa"`从句子中删除，我删除了导致 viewbags 不将变量传递给 excel 输出的额外变量。

actionlink 方法应如下所示

```
ActionLink(HtmlHelper, String, String, Object, Object) 
```

**现在我知道了……知道是成功的一半！**

# jquery - 调用复选框的点击事件似乎是错误的？

> ID：11453716
> 
> 赞同：2
> 
> 时间：2012-07-12T14:10:50.137
> 
> 标签：jquery

我正在使用 jQuery 1.6.1，我有一个复选框，我想以编程方式检查它，同时还调用它的点击事件。通常我只是打这个电话：

```
$('#my_checkbox').click(); 
```

首次加载网页时，未选中该复选框。当我进行上述调用时，它确实按预期触发了 click 事件，但在 click 事件内部`this.checked`仍将返回 false。当点击事件完成时，复选框被选中。似乎在复选框的状态更改之前执行了单击事件（以编程方式触发时）。如果我真的点击了复选框，`this.checked`正确地反映了复选框的新状态，即它在触发事件之前改变了状态。

为什么当我以编程方式调用 click 事件时，事件会在状态更改之前触发，我该怎么做才能绕过它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:29:01.727

这是一个有趣的问题（我在[这里复制了](http://jsbin.com/usociy)）。当然，诱惑是使用`change`处理程序而不是`click`处理程序（[示例](http://jsbin.com/ohimil)），但问题是当您使用切换状态时，它*根本*`change`不会在 IE上触发。这可能是不这样做的一个很好的理由。*`click`*

 *我想您可以定义自己的机制，而不依赖于`click`执行默认操作——一个很小的插件，或者只是一个您调用并传入 jQuery 对象的函数。这是一个很小的插件版本：

```
(function($) {
  $.fn.flip = function() {
    this.prop("checked", !this.prop("checked"));
    this.triggerHandler("click");
    this.triggerHandler("change");
  };
})(jQuery); 
```

用法：

```
$('my_checkbox').flip(); 
```

[实例](http://jsbin.com/usociy/2)| [来源](http://jsbin.com/usociy/2/edit)

请注意，如果应用到包含多个复选框的 jQuery 对象，即开即用的版本将强制它们全部为相同的值。如果您希望它们独立，您可以循环：

```
(function($) {
  $.fn.flip = function() {
    this.each(function() {
        this.checked = !this.checked;
    });
    this.triggerHandler("click");
    this.triggerHandler("change");
  };
})(jQuery); 
```

[实例](http://jsbin.com/usociy/3)| [来源](http://jsbin.com/usociy/3/edit)

通过使用[`triggerHandler`](http://api.jquery.com/triggerHandler/)而不是`trigger`，我们避免了导致默认操作。

另一种方法是让所有`click`复选框的处理程序都使用超时：

```
$("my_checkbox").click(function() {
    var $this = $(this);
    setTimeout(function() {
        // Actually do something with $this
    }, 0);
}); 
```

...这似乎是一场维护噩梦。*

# android - 让我的活动回到顶部？

> ID：11453724
> 
> 赞同：6
> 
> 时间：2012-07-12T14:11:10.613
> 
> 标签：android

这个问题是从[如何关闭或停止我在 Android 中启动的外部应用程序中](https://stackoverflow.com/questions/11439833/how-to-close-or-stop-an-external-app-that-i-started-in-android)提出的建议衍生而来的。

我正在编写一个 Android 应用程序，它是工业过程的远程控制 - 该过程在与我的 Android 应用程序持续通信的 PC 上运行，有时 PC 会向 Android 发送 PDF 文件，然后我启动 Adob​​eReader。 apk 来显示它。当 PC 关闭图像时，我想在 Android 上关闭它。

在上面的链接中，有人告诉我，一旦启动 Adob​​eReader，就无法从我的代码中将其关闭。 **但是**，我也许可以将我的应用程序重新放在前面，这对我的目的同样有益。但我无法让它工作。我的应用程序的主要活动是 RemoteControlActivity，我尝试过：

```
try {
   Intent i = new Intent(ctx, RemoteControlActivity.class);
   ctx.startActivity(i);    
}   
   catch (ActivityNotFoundException e)   {
   Log.d("ShowButtons(normal)", "Hide");
} 
```

我还尝试使用**Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT |**的各种组合在*startActivity(* ) 调用之前添加一个*intent.setFlags(...)* **Intent.FLAG_ACTIVITY_CLEAR_TOP |** **Intent.FLAG_FROM_BACKGROUND**没有运气。

 ***在清单中，remoteControlActivity 的启动模式是**singleTask**

在调试器中，*StartActivity()*被调用而不登陆 Catch 子句，但我没有在 RemoteControlActivity 的 onRestart 或 onResume 处理程序中遇到断点。

提前致谢！

**编辑：** 下面的答案建议了一个不同的标志，所以我尝试了它：

```
try {
    Intent i = new Intent(ctx, RemoteControlActivity.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK );
    ctx.startActivity(i);          
}   
catch (ActivityNotFoundException e) {
    Log.d("ShowButtons(normal)", "Hide");
} 
```

...但没有运气 - 在调试器中它调用 startActivity，不会落在 catch 块中，但什么也没发生。

**进一步编辑**：我被要求提供清单；这是主要活动的部分：

```
<activity android:launchMode="singleTask"
    android:label="@string/app_name"
    android:windowNoTitle="false"
    android:configChanges="orientation"
    android:screenOrientation="landscape"
    android:name="RemoteControlActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />  
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:20:50.287

`Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT`只有当 Android 将活动带到最前面时，它才会设置标志。自己设置没有任何作用。

Flag`Intent.FLAG_FROM_BACKGROUND`不做任何事情，它仅用于信息目的（表明活动是由后台任务启动的）。

你需要设置`Intent.FLAG_ACTIVITY_NEW_TASK`. 从文档中`FLAG_ACTIVITY_NEW_TASK`：

> 使用此标志时，如果您现在正在启动的 Activity 已经在运行任务，则不会启动新的 Activity；相反，当前任务将简单地以其上次所处的状态被带到屏幕的前面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T02:21:48.677

你可以试试这个：

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-14T19:39:32.457

无论该外部应用程序如何启动，您的应用程序都无法杀死另一个第三方外部应用程序，除非它与您的应用程序共享相同的 processId，或者您已植根您的设备。

但是，即使在使用应用程序上下文而不是活动上下文启动外部 3rd 方应用程序之后，您也可以将应用程序的活动带回顶部（或前台）。这是通过以下方法完成的：

```
 private void bringMyAppToForeground(Context context) {
        Intent it = new Intent("intent.my.action");
        it.setComponent(new ComponentName(getPackageName(), SplashScreenActivity.class.getName()));
        it.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.getApplicationContext().startActivity(it);
    } 
```

清单中`"intent.my.action"`定义如下：

```
<activity
        android:name="com.example.SplashScreenActivity" >

        <intent-filter>
            <action android:name="intent.my.action" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

请注意，调用意图启动外部应用程序的活动不应该是调用bringMyAppToForeground();的活动。相反，应该从另一个活动（或服务）调用此方法，因为否则这意味着活动正在尝试自行启动，这将导致活动生命周期复杂化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:17:35.227

如果活动可能已经在运行，请使用`FLAG_ACTIVITY_REORDER_TO_FRONT`. 或者，同时使用`FLAG_ACTIVITY_CLEAR_TOP`和`FLAG_ACTIVITY_SINGLE_TOP`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-31T06:43:53.757

请用 -

```
 FLAG_ACTIVITY_REORDER_TO_FRONT 
```

例如，如果当前任务是 - A，B，C，D。如果，D 为 B 调用 startActivity() `FLAG_ACTIVITY_REORDER_TO_FRONT`，那么 B 将被带到前面，新的任务赌注将是 - A，C，D， B.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T20:25:51.780

在这种情况下，最好的选择是终止“adobe reader”（或任何应用程序）进程。在这种情况下使用 android **Intent**类是没有用的，因为我们不处理同一个应用程序中的活动。

杀死一个进程可以在有**根**的android 设备中通过 2 个步骤完成：

1-**获取“adobe reader” pid：** 我们假设*adobe_reader_package_name*是一个包含 adobe reader 包名称的字符串

```
 ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
  List<ActivityManager.RunningAppProcessInfo> pids = am.getRunningAppProcesses();

  int processid = 0;
  for (int i = 0; i < pids.size(); i++) {
      ActivityManager.RunningAppProcessInfo info = pids.get(i);
      if (info.processName.equalsIgnoreCase(adobe_reader_package_name)) {
          processid = info.pid;
      }
   } 
```

2-**使用它的 pid 杀死进程：**这可以使用这样的方法来完成

```
 public static void doCmds(List<String> cmds) throws Exception {

    Process process = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(process.getOutputStream());

    for (String tmpCmd : cmds) {
            os.writeBytes(tmpCmd+"\n");
    }

    os.writeBytes("exit\n");
    os.flush();
    os.close();
        process.waitFor();
  } 
```

并将其称为如下：

```
 List<String> cmdList = new ArrayList<String>();  
 cmdList.add("kill -9 "+processid); 

  try {
      doCmds(cmdList);
      Log.d("A3", "kill process completed ...");
  } catch (Exception e1) {
     // TODO Auto-generated catch block
     e1.printStackTrace();
  } 
```

希望这会有所帮助，干杯！

source-1 : [android : 如何在代码中运行 shell 命令](https://stackoverflow.com/questions/3054973/android-how-to-run-a-shell-command-from-within-code/3055786#3055786)

source-2：[如何在不使用 adb shell 的情况下获取 android 应用程序的 pid？](https://stackoverflow.com/questions/7454909/how-to-get-pid-of-android-application-with-out-using-adb-shell)***

# java - 修改 BluetoothChat 示例，强制关闭

> ID：11453728
> 
> 赞同：0
> 
> 时间：2012-07-12T14:11:29.833
> 
> 标签：java, android, bluetooth, chat

我正在尝试修改 BluetoothChat 示例应用程序。我只是想通过按下按钮发送消息，然后在文本视图中显示响应。我知道连接工作正常，应用程序之前运行得非常好，但是当应用程序崩溃时，稍微改变程序（为了在文本视图中显示收到的消息）。所有的代码都是一样的，我发现这个段是导致程序崩溃的原因，就在建立连接之后

```
case MESSAGE_READ:
            Log.i(TAG, "READING");
            String readMessage = (String) msg.obj;

            //writeOutput(readMessage);

            break; 
```

当我删除对写入输出函数的调用时，程序运行完美......

```
public void writeOutput(String readmessage){

    //Recieves the string returned from the handler and displays it accordingly

    display.setText("");
    display.setText(readmessage);

} 
```

有任何想法吗？这也是我的 LogCat 文件

```
07-12 09:55:35.439: I/BluetoothChatService(17267): BEGIN mConnectedThread
-07-12 09:55:35.439: I/BluetoothChat(17267): MESSAGE_STATE_CHANGE: 3
-07-12 09:55:35.525: I/BluetoothChat(17267): READING
-07-12 09:55:35.525: D/AndroidRuntime(17267): Shutting down VM
-07-12 09:55:35.525: W/dalvikvm(17267): threadid=1: thread exiting with uncaught exception 
-07-12 09:55:35.525: E/AndroidRuntime(17267): FATAL EXCEPTION: main
-07-12 09:55:35.525: E/AndroidRuntime(17267): java.lang.NullPointerException
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at com.example.android.BluetoothChat.BluetoothChat.writeOutput(BluetoothChat.java:344)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at com.example.android.BluetoothChat.BluetoothChat$1.handleMessage(BluetoothChat.java:255)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at android.os.Handler.dispatchMessage(Handler.java:99)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at android.os.Looper.loop(Looper.java:130)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at android.app.ActivityThread.main(ActivityThread.java:3906)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at java.lang.reflect.Method.invokeNative(Native Method)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at java.lang.reflect.Method.invoke(Method.java:507)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:840)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:598)
-07-12 09:55:35.525: E/AndroidRuntime(17267):   at dalvik.system.NativeStart.main(Native Method) - 
```

# ios - 核心数据：使用 NSFetchRequest 当结果类型设置为 NSDictionaryResultType 时有没有办法获取获取的属性

> ID：11453731
> 
> 赞同：0
> 
> 时间：2012-07-12T14:11:41.877
> 
> 标签：ios, cocoa-touch, cocoa, core-data

我有一个使用两个独立核心数据存储的应用程序。一种用于用户数据，一种用于只读内容数据。为了在它们之间创建关系，当然禁止使用关系，因此对内容存储的引用由 id 管理。

这在大多数情况下都可以正常工作，但对于某些特定的提取，它被证明是困难的。

以下面的例子为例：假设我有一个应用程序，它有几百部电影（每部电影都有一条记录存储在只读存储中），并且每当用户观看一部电影时，都会在可写用户存储中创建一条记录。我可能会将我的模型设置为有一个名为 Movie 的实体，以及另一个名为 MovieHistory 的实体。

电影有：一个称为标识符（NSNumber）的属性。

MovieHistory 具有：一个名为movieIdentifier 的属性（对Movie 的跨存储引用）、一个viewDate 属性（NSDate）和一个获取的属性“movie”，其目的地设置为Movie，谓词为(SELF.identifier == $FETCH_SOURCE.电影标识符）。

假设我现在想要观看最后 10 部电影，没有重复（如果我观看了我以前看过的电影，它应该跳到列表的顶部）。我希望能够使用以下代码：

```
NSError *error = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName: @"MovieHistory"];

NSSortDescriptor *dateDescriptor = [[NSSortDescriptor alloc] initWithKey:@"viewDate" ascending:NO];

NSEntityDescription* entity = [NSEntityDescription entityForName:@"MovieHistory" inManagedObjectContext: moc];
NSAttributeDescription* movieIdentifierDesc = [entity.attributesByName objectForKey:@"movieIdentifier"];
NSFetchedPropertyDescription *movieDesc = [entity.propertiesByName objectForKey:@"movie"];

[request setFetchLimit: limit];
[request setSortDescriptors: [NSArray arrayWithObject: dateDescriptor]];
[request setPropertiesToFetch:[NSArray arrayWithObjects: movieIdentifierDesc, movieDesc, nil]];
[request setPropertiesToGroupBy:[NSArray arrayWithObject: movieIdentifierDesc]];
[request setResultType:NSDictionaryResultType];

NSArray *results = [moc executeFetchRequest: request error: &error];

if(error != nil)
    NSLog(@"Error fetching last viewed movies: %@", error);

return results; 
```

此代码引发异常，指出获取的属性（“MovieHistory”中的“movie”）是在这种情况下使用的无效属性。使用 NSDictionaryResultType 时不能使用获取的属性。但是，如果返回类型不是 NSDictionaryResultType，您也不能使用 setPropertiesToGroupBy:。我需要分组以便按日期排序并删除重复的电影。

当我从发送到 setPropertiesToFetch: 的数组中删除获取的属性时，它工作正常。但是当然我必须在一个循环中一个接一个地取出每个 MovieRecord。

完成我想做的事情的最佳方法是什么？有没有办法做到这一点，而不必求助于获取 ID，然后逐个循环遍历结果？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:44:15.310

我没有完全按照你的整个帖子，但是......

您可以发出两个单独的提取操作。第一个从该数据库中获取 MovieHistory 对象。

将所有电影标识符放入一个集合中，然后使用 IN 关键字从电影数据库中获取。

```
NSPredicate *moviePredicate = [NSPredicate predicateWithFormat: @"identifier IN %@", allMovieIdentifiers]; 
```

它不像其他一些解决方案那样优雅，但它易于编写，更重要的是，易于阅读、理解和更改。记住首先为程序员优化。

# c - gtk/c 在线程中操作 GUI：奇怪的错误

> ID：11453733
> 
> 赞同：0
> 
> 时间：2012-07-12T14:11:46.443
> 
> 标签：c, multithreading, user-interface, gtk

我使用 udp 编写了一个 C/S 应用程序，它不断给我错误，我认为这与我使用线程的方式有关。

当客户端程序启动时，它首先初始化一个登录窗口并启动一个新线程来监听来自服务器的响应。提交用户名和密码后，新线程会收到一条消息，表明它是否提交了正确的信息。如果是这样，那么线程将初始化主 GUI 窗口。但它会给出奇怪的错误：

```
Fatal IO error 11 (Resource temporarily unavailable) on X server :0.0 
```

或者

```
python: Fatal IO error 0 (Success) on X server :0.0 
```

[我在这里](https://stackoverflow.com/questions/8275187/python-fatal-io-error-11-resource-temporarily-unavailable-on-x-server-0-0)发现了一个类似的问题，但没有解决。

有人说 GUI 应该只在主线程中操作，但其他人说这不是真的。

我还尝试使用`gdk_threads_enter()`and `gdk_threads_enter()`around`gtk_main()`以及在该监听线程中初始化窗口的代码。但它似乎没有用。

我对线程了解不多，所以在指出我做错的地方时要耐心等待。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:51:10.297

我发现，当您没有正确持有 GTK 锁时，这些错误消息会不时弹出。

您应该放置原始调用，以及`gdk_threads_enter()`对*发生*的 GTK 函数的每次调用`gdk_threads_leave()``gtk_main()`

 **   在您调用的线程之外`gtk_main()`
*   但不在信号、空闲或超时处理程序中。

尽管据我了解，这种用法正在逐渐消失，并且在 GTK 的未来版本中，只能从主线程操作 GTK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:41:16.650

确实 GTK 窗口**应该**只从主线程中操作。

也就是说，在某些体系结构（特别是 GNU/Linux）中，您**可以**从另一个线程操作 GTK 窗口，前提是您正确使用带有`gdk_threads_enter()`/的全局锁`gdk_threads_leave()`。关键词是“适当地”，这并不像看起来那么容易。

也就是说，在某些体系结构（尤其是 MS-Windows）中，这样做**似乎**在一些简单的程序中有效，但在更复杂的程序中**会惨遭失败。**

关于您的问题，您没有说出来，但您似乎在某处使用 Python，但您没有说在哪里......混合 Python 和本机线程可能也不是一个好主意。*

# c++ - 稍后添加模板函数的特化

> ID：11453737
> 
> 赞同：3
> 
> 时间：2012-07-12T14:12:00.903
> 
> 标签：c++, templates, template-specialization

假设我有如下功能：

```
template<typename T> inline
typename std::enable_if<has_member_foo<T>::value,int>::type
foo( T const &t ) {
  return t.foo();
}

template<typename T> inline
typename std::enable_if<!has_member_foo<T>::value,int>::type
foo( T const& ) {
  return 0;
}

template<typename T> inline
int call_foo( T const &t ) {
  return sizeof( T ) + foo( t );
} 
```

这大部分工作正常，但如果我稍后为特定类型添加重载：

```
inline int foo( std::string const &s ) {
  return s.size();
} 
```

我在定义*之后*添加它`call_foo()`，重载不被`call_foo()`. 但是，如果我在 的定义之前移动重载代码`call_foo()`，则会使用它。

为什么在第一种情况下不使用重载？当`call_foo()`在代码的其他使用点实例化时，编译器*已经看到*了重载，那么为什么不使用它呢？

请注意，我的原始代码将`foo()`函数作为模板`foo_traits`类的静态成员函数，同样使用`enable_if`. *该*代码有效，即模板类特化，即使在使用*之后* `call_foo()`提供，那么为什么不用于独立的重载函数呢？

如果重要的话，我`g++`在 Mac OS X 10.7.4 上使用 4.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:06:07.917

如果您将标准（无论如何是 C++98）转换为 14.6.4.2/1，您将阅读：

> 对于依赖于模板参数的函数调用，如果函数名称是非限定 ID 但不是模板 ID，则使用通常的查找规则（3.4.1、3.4.2）找到候选函数，但以下情况除外：
> 
> — 对于使用非限定名称查找 (3.4.1) 的查找部分，仅找到具有来自模板定义上下文的外部链接的函数声明。

在这种情况下`template-id`，意味着一个`<template-params>`合格的模板名称。这非常清楚地说明了您在程序中观察到的内容，即只考虑在模板定义的上下文中可见的函数。当您考虑它时，如果不是这种情况，那么根据模板*后面*的内容更改模板的含义将非常容易，从而导致违反单一定义规则。

# internationalization - Web 应用测试的假时区

> ID：11453740
> 
> 赞同：15
> 
> 时间：2012-07-12T14:12:04.603
> 
> 标签：internationalization, timezone

我有一个网络应用程序，亚洲的一些人发现程序中的日期存在一些奇怪的时区问题。有没有办法伪造 chrome 或 firefox 或 IE 来假装我的计算机的时区与他们的时区一样，以便我可以轻松调试问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T21:14:56.400

当然：使用自定义环境变量从命令行启动浏览器，`TZ`而不是通常的运行方式：

```
TZ=Japan firefox & 
```

当您像这样启动它时，请确保 firefox 尚未运行，因为如果它已经在运行，那么它可能只会在浏览器的现有实例下打开一个新窗口，而不是启动一个新实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T06:31:53.423

在 Windows 8 中更改系统时间会自动更改我的 Firefox 浏览器时区，而无需重新启动或重新启动软件。

# javascript - javascript beforeunload 检测刷新与关闭

> ID：11453741
> 
> 赞同：26
> 
> 时间：2012-07-12T14:12:09.027
> 
> 标签：javascript, html

使用以下函数是否可以检测到用户按下了刷新按钮或关闭按钮？如果没有，还有其他方法吗？

```
$(window).bind('beforeunload', function(event) {
    return 'pls save ur work';
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T11:13:24.203

简单的答案是否定的——浏览器的安全模型不允许您明确检测用户选择以何种方式离开您的页面（刷新/关闭/内部链接/外部链接）。

[浏览器关闭时检测刷新浏览器以进行卸载/卸载前](https://stackoverflow.com/questions/14063012/detect-refresh-browser-for-unload-beforeunload-when-browser-closed)

可以 - 使用 cookie - 检查用户何时加载您的页面，是否他们以前在同一会话中访问过该站点 - 例如检测他们*是否已刷新*- 但不是在刷新之前：

[在Javascript中检测浏览器刷新](https://stackoverflow.com/questions/3247743/detect-browser-refresh-in-javascript)

[检查页面是否在 Javascript 中重新加载或刷新](https://stackoverflow.com/questions/5004978/check-if-page-reloaded-or-refresh-in-js)

一种部分且不完善的方法是在页面卸载之前检测他们是否按下了“F5”或“Ctrl+R”或“Cmd+R”（用于刷新的键盘快捷键）。这将检测到一些刷新，但不会检测到用户实际单击刷新按钮的位置。

```
(function($) {
    var refreshKeyPressed = false;
    var modifierPressed = false;

    var f5key = 116;
    var rkey = 82;
    var modkey = [17, 224, 91, 93];

    // Check for refresh keys
    $(document).bind(
        'keydown',
        function(evt) {
            // Check for refresh
            if (evt.which == f5key || window.modifierPressed && evt.which == rkey) {
                refreshKeyPressed = true;
            }

            // Check for modifier
            if (modkey.indexOf(evt.which) >= 0) {
                modifierPressed = true;
            }
        }
    );

    // Check for refresh keys
    $(document).bind(
        'keyup',
        function(evt) {
            // Check undo keys
            if (evt.which == f5key || evt.which == rkey) {
                refreshKeyPressed = false;
            }

            // Check for modifier
            if (modkey.indexOf(evt.which) >= 0) {
                modifierPressed = false;
            }
        }
    );

    $(window).bind('beforeunload', function(event) {
        var message = "not refreshed";

        if (refreshKeyPressed) {
            message = "refreshed";
        }

        event.returnValue = message;
        return message;
    });
}(jQuery)); 
```

您还可以检测*单击链接的时间*是否链接的目标是否在同一站点上： [如何检测用户何时离开我的站点，而不仅仅是转到不同的页面？](https://stackoverflow.com/questions/7162300/how-can-i-detect-when-the-user-is-leaving-my-site-not-just-going-to-a-different)

# php - 从 MySQL 中删除行

> ID：11453743
> 
> 赞同：0
> 
> 时间：2012-07-12T14:12:12.013
> 
> 标签：php, mysql, delete-row

我想知道是否有人可以帮助我。

我正在使用下面的代码部分来创建一个表，该表正确列出了与`current user`.

```
/* display row for each user */ 

echo "<tr>\n"; 
$theID = $row['locationid']; 
echo " <td style='text-align: Center'>{$row['locationname']}</td>\n";
echo " <td style='text-align: Left'>{$row['returnedaddress']}</td>\n"; 
echo " <td style='text-align: Center'>{$row['totalfinds']}</td>\n"; 
echo " <form action= locationsaction.php  method= 'post'><input type='hidden' name='lid' value=$theID/>                                             <td><input type= 'submit' name= 'type' value= 'Details'/></td>
<td><input type= 'submit' name= 'type' value= 'Images'/></td>
<td><input type= 'submit' name= 'type' value= 'Add Finds'/></td>
<td><input type= 'submit' name= 'type' value= 'View Finds'/></td>
<td><input type= 'submit' name = 'type' value= 'Delete'/></td></form>\n"; 
```

在每个表格行的末尾有一个按钮选择，通过`locatiosnaction.php`如下所示，将用户导航到其他页面，所有页面都链接回主表格记录。

**'locationsaction.php'**

```
<?php 
session_start();
$_SESSION['lid'] = $_POST['lid'];
if (isset($_POST['type'])) {
    $urls = array(
        'Details' => 'viewlocation.php',
        'Add Finds' => 'addfinds.php',
        'Images' => 'addimages.php',
        'View Finds' => 'locationfinds.php',
        'Delete' => 'deletelocation.php'
    );
    $url = $urls[$_POST['type']];
    header("Location: " . $url);
}
?> 
```

我遇到的问题围绕着删除记录。这是我正在使用的查询：

**'删除位置.php'**

```
<?php

    $lid = $_SESSION['lid'];
            $query = "DELETE FROM detectinglocations WHERE locationid='$lid'";
            $result = mysql_query($query);

?> 
```

该按钮的功能工作正常，因为它将用户带到 deletelocation.php 脚本，但它不会删除记录。

我一直在使用几个脚本作为参考，我认为我正确地遵循了它们，但显然不是。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:16:43.537

你错过了`session_start();`开头的`deletelocation.php`.

您必须在想要使用会话的每个页面上调用它。

因此，在您的情况下`$_SESSION['lid']`是不可解析的，这将使您的 SQL 查询无效。

[PHP 文档](http://php.net/manual/en/function.session-start.php)：

> session_start() 创建会话或**恢复当前**会话...

# json - 甘特图查看 JSON 数据

> ID：11453746
> 
> 赞同：1
> 
> 时间：2012-07-12T14:12:17.250
> 
> 标签：json, jquery, charts, gantt-chart

我正在尝试使用 php 和 jquery 将（通过 ajax）数据重新加载到甘特图中。我可以用我的初始负载数据绘制甘特图，没有任何问题。我有一个 ajax 保存调用来更新图表数据，我想在成功保存后重新绘制甘特图。

我可以加载部分数据，即左侧的标题数据，但不能加载日期，我相信它的格式不正确？我正在使用来自 github 的这个甘特图插件：[https ://github.com/thegrubbsian/jquery.ganttView](https://github.com/thegrubbsian/jquery.ganttView)

下面是他们使用的数据示例？这是json数据吗？

我不确定？如何格式化我的输出以镜像和使用这些数据。

```
var ganttData = [
{
    id: 1, name: "Feature 1", series: [
        { name: "Planned", start: new Date(2010,00,01), end: new Date(2010,00,03) },
        { name: "Actual", start: new Date(2010,00,02), end: new Date(2010,00,05), color: "#f0f0f0" }
    ]
}, 
{
    id: 2, name: "Feature 2", series: [
        { name: "Planned", start: new Date(2010,00,05), end: new Date(2010,00,20) },
        { name: "Actual", start: new Date(2010,00,06), end: new Date(2010,00,17), color: "#f0f0f0" },
        { name: "Projected", start: new Date(2010,00,06), end: new Date(2010,00,17), color: "#e0e0e0" }
    ]
}, 
```

我的代码如下所示：

```
[{"id":0,"name":"task number 20","series":[{"name":"Bob","start":"new Date(2012,2,19)","end":"new Date(2012,6,11)"}]},{"id":1,"name":"another new posts","series":[{"name":"Bill","start":"new Date(2012,5,22)","end":"new Date(2012,6,27)"}]},here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:19:03.590

从 json 字符串“调用”函数（包括构造函数）是不合法的。JSON 不是你可以传递给`eval`函数的任何东西：http: [//www.json.org/](http://www.json.org/)

您应该在您的 javascript 代码中进行从字符串到日期的转换。

你可以发送

```
[{..."start":"Thu Jul 12 2012 16:20:17 GMT+0200 (CEST)"...}] 
```

并在您的 js 代码中，在 json 解析之后，迭代要执行的对象

```
myobj.start = new Date(myobj.start); 
```

# jquery - JQuery Mobile jquery.mobile.structure-1.1.0.min.css 文件？

> ID：11453747
> 
> 赞同：0
> 
> 时间：2012-07-12T14:12:17.863
> 
> 标签：jquery, css, mobile

什么是themeroller中提到的“jquery.mobile.structure-1.1.0.min.css”文件“要使用您的主题，请在jquery.mobile.structure文件之前将其添加到页面头部”等等本页：http: [//jquerymobile.com/demos/1.1.0/docs/api/themes.html](http://jquerymobile.com/demos/1.1.0/docs/api/themes.html)

“我们建议在头部添加一个外部样式表，放在结构和主题样式表引用之后”

它在其他任何地方都没有提到，我找不到它。我需要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:14:46.993

我相信该文件仅包含 JQM 的基本样式，它不包括任何常规主题。这将允许您创建自己的主题或以更简单的方式覆盖基本样式。

# ruby-on-rails - RSpec/Should: “should be_valid”失败，“contact.should be_valid”通过

> ID：11453751
> 
> 赞同：2
> 
> 时间：2012-07-12T14:12:31.000
> 
> 标签：ruby-on-rails, ruby, validation, rspec

我有以下规格：

```
 context "no firstname present" do
    let(:contact) { build :contact, firstname: 'Mickey', lastname: '', companyname: '' }
    it "should be valid" do
      should be_valid # Does not work
      contact.should be_valid # Works
    end
  end 
```

为什么`should be_valid`失败了，但`contact.should be_valid`通过了？在`it`块内，无论如何`should be_valid`都应该访问`contact`？！感谢您的澄清。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T14:16:04.677

你可以使用`subject`

```
context "no firstname present" do
  let(:contact) { build :contact, firstname: 'Mickey', lastname: '', companyname: '' }
  subject { contact }
  it { should be_valid }
end 
```

### 编辑

我刚刚发现`its` [[link]](http://rspec.rubyforge.org/rspec/1.3.0/classes/Spec/Example/Subject/ExampleGroupMethods.html#M000239)这是测试`subject`的属性或测试发送给它的消息的好方法

# axapta - 自定义查找和分组依据

> ID：11453756
> 
> 赞同：6
> 
> 时间：2012-07-12T14:12:33.590
> 
> 标签：axapta, dynamics-ax-2009, x++

TLDR：当使用查找的字段不为空时，为什么在查找中禁用 group by 子句？

我想对表单中的字段进行自定义查找。该表`CTable`如下所示：

```
Val Spec
------------
A   alpha
A   beta
A   gamma
B   delta
C   epsilon 
```

查找仅涉及`Val`使用 EDT 定义的列，该列具有基本关系：`Val == CTable.Val`

查找显然给了我一个这样的列表：

```
A
A
A
B
C 
```

让我们来一组，以摆脱所有重复的As，我想！类似于以下内容：

```
QueryBuildDataSource.orderMode(OrderMode::GroupBy);
QueryBuildDataSource.addGroupByField(fieldNum(CTable, Val)); 
```

现在是我的奇怪行为和我的问题的实际意义。在一个空字段上，group by 被正确执行，我得到了这个：

```
A
B
C 
```

*现在让我们在查找中选择“A”，然后再次*执行查找，因为我想点击“B”。group by 现在由于未知原因被禁用，我得到的查找结果与以前的第一个结果相同。

为什么会这样？我该如何克服呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T09:45:36.370

同样的问题和有用的答案： [http ://dynamicsuser.net/forums/t/63438.aspx](http://dynamicsuser.net/forums/t/63438.aspx)

> 您可以通过将 SysTableLookup 中的 useLookupValues 设置为 false 来禁用此行为。不幸的是，我不知道为什么 AX 会这样做。我怀疑它会将 OrderMode 更改为 OrderBy。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:55:12.617

我昨天有同样的问题。

我猜这段代码可能在“init”中？

```
QueryBuildDataSource.orderMode(OrderMode::GroupBy);
QueryBuildDataSource.addGroupByField(fieldNum(CTable, Val)); 
```

我必须将我的“GroupBy”代码（上图）添加到 executeQuery 方法中，因为以下行从我的查询中删除了 groupBys（我使用断点检查了这个）；

```
qbsSum.sortClear(); 
```

如果您使用断点，我希望您的 GroupBy 选项在查询再次执行之前被清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T12:27:25.737

我有同样的问题。这帮助了我：
`sysTableLookup.parmUseLookupValue(False);`

# c# - 如何验证文本框以检查输入的值是否为英文

> ID：11453765
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:12:55.647
> 
> 标签：c#, wpf, validation, textbox

我想验证文本框以检查输入的值是否为英文，这是我的验证类

```
using System;
using System.ComponentModel;
using System.Text.RegularExpressions;
using Vytru.Base;

namespace Vytru.Platform.Bridge.Configuration.Manager
{
     class MapDevice : IDataErrorInfo
     {
        public string UserName { get; set; }
        public string AgentName { get; set; }
        public string SipURI { get; set; }
        public string Password { get; set; }
        public string FQDN { get; set; }
        public string Domain { get; set; }
        public SipServerTransportType _TransportType { get; set; }
        public PeerType _PeerType { get; set; }
        public string PeerURI { get; set; }

        #region Implementation of IDataErrorInfo

        public string this[string columnName]
        {
            get
            {
                string result = null;
                if (columnName.Equals("UserName"))
                {
                    // check for null or empty values 
                    if (String.IsNullOrEmpty(UserName))
                    {
                         result = "User Name cannot be null or empty";
                    }
                    else if (UserName.Length > 50)
                    {
                        result = "More than 50 characters";
                    }
                    else if (UserName.Length < 3)
                    {
                        result = "less than 3 characters";
                    }
                    else if (!Regex.IsMatch(UserName, @"\w+"))
                    {
                         result = "Entered User Name format is not valid ...only A-Z 0-9";
                    }

                }

                else if (columnName.Equals("AgentName"))
                {
                    // check for null or empty values 
                    if (String.IsNullOrEmpty(AgentName))
                    {
                         result = "Agent Name cannot be null or empty";
                    }
                    else if (AgentName.Length < 3)
                    {
                         result = "less than 3 characters";
                    }

                    else if (AgentName.Length > 50)
                    {
                         result = "More than 50 characters";
                    }

                    else if (!Regex.IsMatch(AgentName, @"\w+"))
                    {
                         result = "Entered AgentName format is not valid ... only A-Z 0-9";
                    }

                }

                else if (columnName.Equals("SipURI"))
                {
                    // check for null or empty values 
                    if (String.IsNullOrEmpty(SipURI))
                    {
                         result = "Sip URI cannot be null or empty";
                    }

                    else if (SipURI.Length < 3)
                    {
                         result = "less than 3 characters";
                    }

                    else if (SipURI.Length > 50)
                    {
                         result = "More than 50 characters";
                    }

                    else if (!Regex.IsMatch(SipURI, @"(s|S)+(i|I)+(p|P)+(:)+\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"))
                    {
                         result = "Entered SipURI format is not valid ... ";
                    }

                }

                if (columnName.Equals("Password"))
                {
                     // check for null or empty values 
                     if (String.IsNullOrEmpty(Password))
                     {
                          result = "Password cannot be null or empty";
                     }
                     else if (Password.Length > 50)
                     {
                          result = "More than 50 characters";
                     }
                     else if (Password.Length < 3)
                     {
                          result = "Less than 3 characters";
                     }

                     else if (!Regex.IsMatch(Password, @"\w+"))
                     {
                          result = "Entered Password is not valid ... only A-Z 0-9 ";
                     }

                }

                else if (columnName.Equals("FQDN"))
                {
                     // check for null or empty values 
                     if (String.IsNullOrEmpty(FQDN))
                     {
                          result = "FQDN cannot be null or empty";
                     }
                     else if (FQDN.Length > 50)
                     {
                          result = "More than 50 characters";
                     }
                     else if (FQDN.Length < 3)
                     {
                          result = "Less than 3 characters";
                     }
                     else if (!Regex.IsMatch(FQDN, @"\w+"))
                     {
                          result = "Entered FQDN format is not valid ... only A-Z 0-9";
                     }

                }

                else if (columnName.Equals("Domain"))
                {
                     // check for null or empty values 
                     if (String.IsNullOrEmpty(Domain))
                     {
                          result = "Domain cannot be null or empty";
                     }

                     else if (Domain.Length > 50)
                     {
                          result = "More than 50 characters";
                     }
                     else if (Domain.Length < 2)
                     {
                          result = "Less than 3 characters";
                     }

                     else if (!Regex.IsMatch(Domain, @"\w+"))
                     {
                          result = "Entered Domain format is not valid ...  ";
                     }

                }

                else if (columnName.Equals("PeerURI"))
                {
                     // check for null or empty values 
                     if (String.IsNullOrEmpty(PeerURI))
                     {
                          result = "PeerURI cannot be null or empty";
                     }

                     else if (PeerURI.Length > 50)
                     {
                          result = "More than 50 characters";
                     }
                     else if (PeerURI.Length < 3)
                     {
                          result = "Less than 3 characters";
                     }

                     else if (!Regex.IsMatch(PeerURI, @"\w+"))
                     {
                          result = "Entered PeerURI format is not valid ...";
                     }

                }

                return result;

            }
        }

        public string Error
        {
            get { throw new NotImplementedException(); }
        }

        #endregion

     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:17:16.120

我认为验证某事是英语是不可行的。您需要定义英语是什么，这几乎是一项不可能完成的任务。

试探性地，你可以做一些事情，比如通过带有英语词典的拼写检查器运行值，或者使用例如 Google 语言 API 进行“[自动检测语言](http://www.labnol.org/internet/identify-language-of-text/8441/)”调用，但这肯定不是 100% 可靠的，尤其是短字段（尚不清楚您要验证哪个字段，但它们看起来都像是短输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:21:37.733

我可以想到两种方法来实现这一点。

**第一种：** 下载包含尽可能多单词的 XML（或其他格式）英语词典。然后通过散列每个单词在索引文件中创建。然后散列输入中的每个单词，最后将其与索引文件进行比较。

**第二：** 您可以找到英语的 CFG。然后得到一个词法和句法分析器，它可以根据 CFG 解析你的输入，看看输入是否真的是英文的。

在我看来，这并不容易实现。但如果其他人能想到更简单的方法，请分享。

最好的祝福。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:35:11.197

您应该使用[巧合指数](http://en.wikipedia.org/wiki/Index_of_coincidence)。当您评估足够的文本时，它是相当准确的。可能结合正则表达式查找某些特征组合（例如“th”）或使用正则表达式查找文章（a、an & the）。

下一步可能是当你有另一种分数大致相同的语言时，比如德语，通过寻找 Ringel-S 来更仔细地检查它。

最后但可能不需要的步骤是根据某种字典检查单词。例如，也许您可​​以使用[dictionary.reference.com](http://dictionary.reference.com/)来检查您查找的单词是否返回结果而不是未找到的响应。如果您可以修复 POST 和 GET 到这样的站点，您可以在另一个检查中构建。

同样，您需要有一些文本。不只是几个词......我在某个地方有一张表格，定义了几种语言。如果你自己找不到，如果你愿意，我可以发给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T13:24:03.657

非常简单的解决方案是使用正则表达式。这是我曾经使用过的：

```
if( Regex.IsMatch(Console.ReadLine(), "^[a-zA-Z0-9]*$") )
{ 
} 
```

# css - 哪些 CSS 网格框架修复（或解决方法） div 内容垂直对齐问题？

> ID：11453767
> 
> 赞同：-1
> 
> 时间：2012-07-12T14:12:57.723
> 
> 标签：css, grid

哪些 CSS 网格框架修复（或解决方法） div 内容垂直对齐问题？ [http://phrogz.net/CSS/vertical-align/index.html](http://phrogz.net/CSS/vertical-align/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:15:45.893

如果 IE7 不相关。您可以使用 CSS 属性`display: table-cell`将内容垂直居中。

这是一个示例（图像丢失，但您应该明白）：

[http://jsfiddle.net/uB3pW/](http://jsfiddle.net/uB3pW/)

您还可以使用它来构建具有宽度、列和所有内容的网格。

# enterprise-architect - Enterprise Architect 版本控制设置未保存

> ID：11453774
> 
> 赞同：0
> 
> 时间：2012-07-12T14:13:17.130
> 
> 标签：enterprise-architect

我使用 Enterprise Architect 933，但版本控制设置（subversion）有问题。当我打开一个 .eap 文件时，它会提示我配置版本控制设置，我这样做了，然后我就可以正常工作了。当我关闭并重新打开文件时，它会再次提示我，就像根本没有保存设置一样。出了什么问题或我该怎么办？

问候丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:15:45.283

您是否考虑过使用集成基线？在我看来，版本控制设置并不是最好的解决方案。

即使你的项目中没有多少人，我认为使用基线你可以更好更快地工作。或者您在 XMI 2.1 上导出并将此文件置于版本控制之下。工作还因为自 XMI 2 以来它拥有图形信息。

所以只能在 Xmi 2.x 中导出！

# .htaccess - htaccess 将所有内容重定向到索引，但有异常

> ID：11453777
> 
> 赞同：0
> 
> 时间：2012-07-12T14:13:45.273
> 
> 标签：.htaccess

我将如何将所有文件和文件夹重定向到索引，除了只有一只手满？

现在我有这个，它正在重定向所有内容，包括站点功能所需的文件，例如 css 和 js 文件。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} mysite.com
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule ^(.*)$ /index.php [L,R=301]
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:18:15.320

尝试在 RewriteRule 上方添加以下内容。

```
RewriteCond $1 !^(cssfolder|otherfolders) 
```

如果您将上述内容应用于您的.htaccess，它会像这样：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} mysite.com
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond $1 !^(cssfolder|otherfolder1|otherfolder2|otherfolder3)
RewriteRule ^(.*)$ /index.php [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:05:34.393

在 htaccess 脚本顶部尝试 Options -Indexes

例如，如果我们需要将一些特殊的扩展文件重定向到另一个目录，我们可以像这样实现我们的 htaccess

选项 -Indexes RewriteEngine on RewriteCond %{REQUEST_FILENAME} .(svc)$ RewriteRule (.fr.*) directoryname/Index.php [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f RewriteRule ^(.*)$ index.php [QSA,L]

现在除了 *.fr 之外的所有请求都将重定向到 index.php 并且 *.fr 将重定向到 direcoryname/Index.php

# c# - 从列表中更新 DataSet-Adapter Linqy 方式

> ID：11453788
> 
> 赞同：0
> 
> 时间：2012-07-12T14:14:04.013
> 
> 标签：c#, linq, dataset, dataadapter

利用**Linq**尝试在提供的基于 DataSet 的方法上制作更简洁的更新代码：

我正在尝试的代码是：

```
 ListProducts.ForEach( product =>
                {
                    DsProducts.TblProductsRow row = Ds1Products.TblProducts.First( p => p.Name == product.Name);
                    row.Price = Product.Price ;
                });

                Adapter.Update(Ds1Products, "TblProducts"); 
```

不确定天气我是否需要这里的**参数**，我还没有定义任何参数。因为想使用它的“ **Typed** ”功能。数据适配器被初始化和填充。

**备注：**

1.  它现在不起作用，这里出现错误：`"Sequence contains no matching element"`

2.  如果可能的话，想用**foreach**替换**`Linq's Select`**

    （尽量保持整洁和**Linqy**）

3.  它在 SQL CE 中（在大多数情况下应该不是问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:29:17.603

希望这就是您所需要的：

```
var productRows = from p in ListProducts
                  join row in Ds1Products.Tables["TblProducts"].AsEnumerable()
                  on p.Name equals row.Field<String>("Name")
                  select new { NewPrice = p.Price, Row = row };
foreach(var productInfo in productRows)
{
    productInfo.Row.SetField<Double>("Price", productInfo.NewPrice);
} 
```

* * *

**编辑**：这是强类型数据集的方式（几乎相同）：

```
var productRows = from p in ListProducts
                  join row in Ds1Products.TblProduct
                  on p.Name equals row.Name 
                  select new { NewPrice = p.Price, Row = row };
foreach (var productInfo in productRows)
{
    productInfo.Row.Price = productInfo.NewPrice;
}
Adapter.Update(Ds1Products, "TblProducts"); 
```

顺便说一句，[`List.ForEach`](http://msdn.microsoft.com/en-us/library/bwabdf9z%28v=vs.80%29.aspx)不是 Linq，它已经存在于 .NET 2.0 中，因此在 Linq 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:28:17.090

你得到的错误很可能是因为这条线：

```
DsProducts.TblProductsRow row = 
    Ds1Products.TblProducts.First( p => p.Name == product.Name); 
```

如果特定产品名称不存在，则会抛出“序列不包含匹配元素”异常。您可以使用`FirstOrDefault()`获取第一个（如果有）或 null。

# asp.net - 如何在 Asp.Net 上将 Web 错误记录为 Fiddler 请求文件

> ID：11453790
> 
> 赞同：2
> 
> 时间：2012-07-12T14:14:14.523
> 
> 标签：asp.net, logging, error-handling, fiddler, replay

背景：在我们的 asp.net Web 应用程序中，我们将错误信息（例如消息、堆栈跟踪、用户 ID 等）保存到我们的数据库中。因此，我们会定期返回并尝试在我们的测试服务器上重现相同的错误。

问题：有时，仅这些日志不足以解决问题，因为人们可能有不同的 cookie 信息、用户代理等。

可能的解决方案：我们认为如果出现错误，请将整个发布请求保存为 Fiddler 请求文件。所以在提琴手上，我们将加载这个文件并重播。它将发送所有相关的 WebForms Cookies Headers 等。所以我们将非常接近用户正在执行的操作。作为ajax，获取或发布请求。

问题：它是我们问题的理想解决方案吗？如果是，是否有简单的方法将该信息保存为“提琴手请求文件”，或者我们应该编写自己的类来格式化请求信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:52:24.243

如果日志确实包含所需的所有信息，您可以轻松地将请求保存为 SAZ 文件以进行重放。但据我所知，大多数日志都没有请求中的所有信息。您可以查看[http://code.google.com/p/elmah/](http://code.google.com/p/elmah/)，它能够生成 Fiddler .SAZ 文件。

# php - AM PM 格式的两个日期变量之间的日期差异。

> ID：11453796
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:14:39.917
> 
> 标签：php

> **可能重复：**
> [使用 php 获取两个时间/日期之间的差异？](https://stackoverflow.com/questions/1770564/getting-the-difference-between-two-time-dates-using-php)

我有两个日期变量 let $arrival_time="7.30 AM"; $departure_time="8.30 PM";

那么如何计算 php 中这两个变量之间的时间差呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:18:08.970

```
<?php   
$arrival_time="7.30 AM";
$departure_time="8.30 PM";

$d1=  strtotime($arrival_time);
$d2=  strtotime($departure_time);

$diff=$d2-$d1;

//Print the difference in hours : minutes
echo date("H:i",$diff);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:18:12.497

```
<?php
$am = "7:30AM";
$pm = "8:30PM";
$minutes_diff = round(abs(strtotime($pm) - strtotime($am)) / 60); 
```

# oauth - 使用 wso2 进行 OAuth 和配额？

> ID：11453797
> 
> 赞同：0
> 
> 时间：2012-07-12T14:14:40.730
> 
> 标签：oauth, wso2, quota

我们有以下情况，我们需要允许 3rd 方应用程序代表我们的用户（没有他们的凭据）来访问我们的服务。用户必须首先授予对第 3 方应用程序的访问权限，然后第 3 方不得再次请求授权。我们已经设置了 wso2 api 管理器（我们还需要配额管理），我们已经公开了我们的一项服务并且我们已经能够对其进行测试。但是，我们不仅需要 3rd 方请求，还需要携带不记名令牌来访问我们的服务。我们的目标是重定向第 3 方应用程序用户第一次登录，授予对应用程序的访问权限，并且不再被询问。

api管理器可以吗？我们应该将它与 wso2 身份服务器接口（如何？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:50:07.847

您的要求是 OAuth 2.0 的授权代码授权类型。此功能将从 WSO2 API Manager 1.4.0 开始提供。

# c - 堆多大才算太大

> ID：11453802
> 
> 赞同：3
> 
> 时间：2012-07-12T14:14:55.910
> 
> 标签：c, memory, heap-memory

我的程序是用 C 语言编写的，我正在使用 gcc 进行编译。我正在读取文件，并将文件的内容存储到缓冲区中。为此，我需要缓冲区与文件一样大。我正在使用 malloc() 为缓冲区分配内存。不幸的是，我遇到了一个 277MB 的文件。这对堆来说太多了吗？我在运行时遇到了段错误，但没有更多信息。它适用于大至 160 MB 的文件，但这个 277MB 文件的单个异常值正在破坏它。

编辑：valgrind 给了我

@0xC0000022L valgrind 给了我

```
==6380== Warning: set address range perms: large range [0x8851028, 0x190e6102) (undefined)
==6380== Warning: set address range perms: large range [0x8851028, 0x190e6028) (defined)
==6380== Warning: set address range perms: large range [0x190e7028, 0x2997c108) (undefined)
==6380== Warning: set address range perms: large range [0x190e7028, 0x2997c028) (defined)
==6380== Warning: silly arg (-1737565464) to malloc()
==6380== Invalid write of size 4
==6380==    at 0x8048A49: main (newanalyze.c:85)
==6380==  Address 0x4a00 is not stack'd, malloc'd or (recently) free'd
==6380==
==6380==
==6380== Process terminating with default action of signal 11 (SIGSEGV)
==6380==  Access not within mapped region at address 0x4A00
==6380==    at 0x8048A49: main (newanalyze.c:85) 
```

但在第 85 行只是一个不受文件大小影响的小变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:19:14.047

请注意 Valgrind 的输出，

> ==6380== 警告：愚蠢的 arg (-1737565464) 到 malloc()

-1737565464 是带符号的 int 值，而如果将其视为 unsigned int，则为 2557401832 (>2G)。您将 >2G 参数传递给 malloc 而不是 277M。

从以下信息中，我们知道您正在尝试写入地址 0x4a00，这是一个无效地址，在这种情况下您会期望 SEGV。请检查您的代码中的 newanalyze.c:85 以查看其中的内容。

> ==6380== 大小为 4 的无效写入
> 
> ==6380== 在 0x8048A49: 主要 (newanalyze.c:85)
> 
> ==6380== 地址 0x4a00 没有被堆栈、malloc 或（最近）释放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:35:20.460

跟进其中一条评论，以下是使用[mmap(2)](http://linux.die.net/man/2/mmap)打开文件的方法。这是假设您使用的是unix。

```
int fd;
struct stat S;
const char* file_base;

if ((fd = open(filename, O_RDONLY)) < 0) {
    fprintf(stderr, "Can't open file %s to read\n", filename);
    return NULL;
}
if (fstat(fd, &S) != 0) {
    fprintf(stderr, "Can't stat file %s!\n", filename);
    close(fd);
    return NULL;
}
if ((file_base = mmap(NULL, S.st_size, PROT_READ, MAP_FILE|MAP_PRIVATE, fd, 0)) == MAP_FAILED) {
    fprintf(stderr, "Unable to map file %s\n", filename);
    close(fd);
    return NULL;
} 
```

在此之后，`file_base`指向包含文件全部内容的内存位。

这种方式的优点是：

*   它基本上不占用内存（有点）。这里实际发生的事情是您正在使文件成为交换空间以获得一点内存。
*   它不需要时间（有点）。新识别的内存位开始换出，因此当访问内存时，所要做的就是换入该位文件，这与使用[malloc动态分配的速度一样快(3)](http://linux.die.net/man/3/malloc)。

这具有标记为只读的内存位；您也可以对文件进行读写操作，但这意味着如果您写入内存，您将同时更改文件。

如果您不在 unix 上，则可能仍有可用的`mmap`功能。如果没有，将会有一些 Windows 原生的方式来做同样的事情 ( `CreateFileMapping`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:28:31.807

不幸的是，我不能给你一个可靠的“为什么”，但是 mmap2，这似乎是 malloc 在你的系统上调用的，只是报告它内存不足。在这种情况下，Malloc 将返回 NULL 导致段错误。

```
munmap(0xb7706000, 4096)                = 0
mmap2(NULL, 2557403136, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1  ENOMEM (Cannot allocate memory) 
```

作为一个反例，我有一个成功的玩具程序：

```
mmap(NULL, 283652096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f2d00994000 
```

我会检查系统上可用的内存或程序正在使用的内存。也许它严重泄漏内存？

# android - 修改和保存文件后 Eclipse 不会创建新的 apk

> ID：11453803
> 
> 赞同：0
> 
> 时间：2012-07-12T14:14:56.947
> 
> 标签：android, eclipse, build

我正在使用 Eclipse 开发 android 程序。当我单击运行按钮时更改任何 java 文件（任何项目文件）中的某些内容后，Eclipse 会询问“保存更改？”。单击“是”后，文件将被保存。但是eclipse不会创建新的构建（apk文件）。控制台上出现警告“活动未启动，其当前任务已被置于最前面”并且设备运行该应用程序。为了创建一个新的 apk，我每次都需要清理项目。在调试阶段，这些步骤会增加不必要的延迟（以及更多点击）

期望是当有文件更改时，eclipse 应该创建一个新的 apk 并加载它。就我而言，它没有发生。我应该在哪里进行更改以使其行为如此？（我希望这是一个简单的点击某处，而不是创建一个make文件等。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:19:16.367

在 Eclipse 中的 Project 菜单下单击 Project->Build Automatically

如果已经勾选 - 尝试使用 -clean 标志启动 eclipse，即转到 eclipse 的快捷方式并在 eclipse.exe 或 eclipse 之后简单添加 -clean

它之所以说有关活动的消息被带到前面是因为 adb 正在安装的版本与已安装的版本相同 - 所以它只是重用它，这是因为 Eclipse 不会自动构建您的 APK。

# git - 强制推送当前分支

> ID：11453807
> 
> 赞同：43
> 
> 时间：2012-07-12T14:15:07.963
> 
> 标签：git, git-push, git-alias

我经常 rebase 功能分支，然后想强制将它们推送到服务器。

```
git push --force origin feature-mongodb-support 
```

有什么捷径`git push --force origin <current branch>`吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T14:25:41.290

您可以使用别名来缩短命令。像这样使用它：

```
git config --global alias.fpush "push --force origin" 
```

现在推送你的分支只需输入：

```
git fpush feature-mongodb-support 
```

或者您甚至可以将分支名称硬编码到命令中：

```
git alias fpush "push --force origin feature-mongodb-support" 
```

并且仅`git fpush`用于将您的宝贵工作推入上游。

但是，非快进更新是危险的，因为您基本上会覆盖服务器上在最后一次合并/变基到本地分支和强制推送之间发生的所有历史记录。如果您需要经常这样做，那么您的工作流程肯定有**问题**。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-14T23:00:26.720

在阅读了这些答案并阅读了相关问题的答案（[https://stackoverflow.com/a/18782415/586](https://stackoverflow.com/a/18782415/586)）之后，我创建了这个别名以`origin`根据当前分支名称强制推送：

```
fp = "!git push -f origin \"$(git rev-parse --abbrev-ref HEAD)\"" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-18T07:45:15.557

**您可以通过设置push.default**属性来更改默认行为：

```
git config --global push.default current 
```

然后：

```
git push -f 
```

将强制推送到您当前的分支。

这是来自[http://schacon.github.io/git/git-config.html](http://schacon.github.io/git/git-config.html)的复制/粘贴：

> ***push.default***
> 
> 定义如果命令行上没有给出 refspec，远程中没有配置 refspec，并且命令行上给出的任何选项都没有暗示 refspec，则 git push 应该采取的操作。可能的值为：
> 
> *   **什么**- 不要推动任何东西。
>     
>     
> *   **匹配**- 推送所有匹配的分支。在两端具有相同名称的所有分支都被认为是匹配的。这是默认设置。
>     
>     
> *   **upstream** - 将当前分支推送到其上游分支。
>     
>     
> *   **tracking** - 不推荐使用的上游同义词。
>     
>     
> *   **current** - 将当前分支推送到同名分支。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-25T09:34:19.450

如果你使用[oh my zsh](https://github.com/robbyrussell/oh-my-zsh/)你可以简单地做

```
ggfl 
```

这将为你做这件事

```
git push --force-with-lease origin <your_argument>/$(current_branch) 
```

[https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet](https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T14:21:16.980

这应该可以解决问题：

```
git alias fpush "push --force origin" 
```

这将使您可以将`git fpush`其用作较短的替代方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-02T18:38:46.980

为了自动强制推送到*被跟踪的分支*（不管它的名字和上游），我设计了这个别名：

```
fbrpush=!git push $(git rev-parse --abbrev-ref=loose --symbolic-full-name @{upstream} \
                    | sed 's:/: +:') 
```

**（为了便于阅读，换行）**

*（基于[另一个 SO 答案](https://stackoverflow.com/a/9753364/9288580)）*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T08:55:49.660

当前分支名称也可以自动推断。

我使用一个小的 shell 脚本来强制推送到当前分支：

```
git branch | grep '*' | awk '{print $2}' | xargs -I % git push origin % -f 
```

该命令`git branch`用符号标记当前分支`*`，因此我们可以获取相关行`grep '*'`并对其进行解析以获取分支名称。

然后可以将快捷命令定义为`.bashrc`or中的别名`.zshrc`：

```
alias gfp=/path/to/script 
```

# c# - 在 mvc3 dotnet c# 中创建文件或报告或 excel 线程

> ID：11453808
> 
> 赞同：0
> 
> 时间：2012-07-12T14:15:11.777
> 
> 标签：c#, asp.net-mvc, multithreading, excel

我正在使用 mvc3，虽然我经常看到这个问题，但我还没有找到关于使用哪种技术的明确答案。大多数解决方案似乎相互矛盾，使用旧库和新库的混搭。似乎有很多关于异步的讨论，但随后出现了很多关于为什么它不“安全”的答案。

需要的是。

1.  MVC3 网站 - 用户单击按钮以创建报告。

2.  报告很大，将创建并存储在 Web 服务器磁盘上（可能需要长达 10 分钟）。

3.  用户不需要知道报告何时完成创建。

4.  该网页仅返回正在创建报告的事实，并允许您继续，而无需再次与该过程进行交互。

5.  为了争论，服务器硬件相当不错，但可能有超过 100 个并发用户，他们都在完全相同的时间创建自己的单独的大报告。我希望它可能产生的唯一问题是服务器硬件足够强大，而不是配置或软件问题。

我一直在寻找“任务并行库”作为执行此操作的方法。但我再次收到许多关于如何做到这一点的不同报告。

有些人建议使用 WCF 服务，但关于为什么/为什么不这样做的许多相互矛盾的报告。即现在过时/更好的替代品等

一般来说，我想要的是在另一个不会弄乱 iis 的线程中创建文件（根据使用的方法，从池中耗尽线程等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:26:17.590

这是一组非常开放的问题。这不是一件坏事，但没有多少“正确”的直接答案。但是有一些事情需要注意。一些选择取决于您的可靠性要求等。

例如，您想要一个不会“弄乱 iis”的方法，指的是使正在服务请求的线程池处于饥饿状态。为此，您需要在线程池之外的线程上进行工作。您可以以任何您认为合适的方式执行此操作，具体取决于您的要求和测量的性能特征。您的两个选项是：

*   以某种方式启动一个新线程 - 任务并行库 (TPL)、新线程或其他。
*   在单独的进程（例如 Windows 服务）中托管报告生成。

还有第三个选项可以使用内置到您选择的框架中的异步支持。对于 MVC，您有异步控制器。我不会将此列为您的选项，因为您说过您不想在发送响应之前等待报告完成。异步控制器/页面在这里不会给您带来任何好处，实际上会受到伤害。

可靠性方面你也要考虑对方：是的，你不想弄乱iis，但你是否也关心iis弄乱了你？您的 Web 流程可以被回收，或者如果它因任何其他原因出现故障，您的报告生成也将终止。如果这对您很重要，那么您必须有一个恢复机制或托管进程，以便您可以单独控制服务的可靠性。

托管进程外的另一个好处是您可以将该进程物理部署在与前端应用程序不同的服务器上。然后，您可以优化以使用该应用程序中的线程池，而无需与前端有任何关系。如果你一次有很多事情发生，它也会减少上下文切换。此外，如果需要，您可以单独扩展报告生成过程。最后，如果这是您要走的路，您可以单独处理权限和其他自动化 excel 等问题。

进程外的缺点是增加了复杂性。您需要在两者之间进行一些通信，可能是 WCF 单向调用，可能是消息总线，无论您的要求如何。您需要权衡此成本与您的需求以及您期望从可靠性/可扩展性/等方面获得的价值。

现在，对于您选择的执行异步工作的工具，这在很大程度上取决于您。在我看来，TPL 是对异步工作的一个很好的抽象，并且用于运行任务的默认任务调度程序对线程使用非常智能，因此您基本上不必考虑太多。此外，.NET 4.5 提供了内置的编译器支持，使得使用 TPL 比现在更简单，并且看起来更像同步风格（搜索 async/await 或者从[这里](http://msdn.microsoft.com/en-us/library/hh191443%28v=vs.110%29.aspx)开始作为示例。）

底线是，我不会对一般使用哪种技术堆栈过于紧张或麻痹。列出你的非功能性需求——性能、可扩展性、可靠性等——找出适合你的需求的组合，然后选择一个。如果您担心做出错误的选择，请尝试以一种允许您有效应对该领域变化的方式来构建解决方案。如果需要，您可以随时测量和更改。

# c# - Perlin 地形页面不匹配：难以捉摸的错误

> ID：11453809
> 
> 赞同：7
> 
> 时间：2012-07-12T14:15:22.840
> 
> 标签：c#, debugging, unity3d, terrain, perlin-noise

我一直在 Unity 游戏引擎中开发一款游戏，我希望能够将分页地形用于无限世界（当今的常见主题）。我的地形生成器专门使用柏林噪声。但是此时，开发已经被一个错误严重拖慢：页面边缘不匹配，甚至不匹配。问题出在我生成地形的代码中，或者可能在每次我完成生成页面时运行的另一段代码中。但是问题绝对不在unity函数调用上，所以即使你不熟悉unity也可以帮助我。

可能的原因... 1) 为每个页面的错误位置采样 Perlin 噪声，数学失败。2) 随机数生成器在页面生成之间重新播种。3) 在页面生成之间重新植入 Perlin 噪声。4) ? 我不知道。

注意：我几乎排除了数字 2 和 3，查看所有其他代码。我每个只为生成器播种一次，Unity 不会碰巧在生成器运行之间重新播种 Random。

实际上，如果您可以描述一种使这更容易的调试方式，请提供建议。从长远来看，这对我有更大的帮助。

这是我为每个页面运行一次的代码，带有完整的注释，因此您不必了解 Unity3D ...

```
 /* x and y are the indices of the tile being loaded. The game maintains a
    square of pages loaded, where the number of pages per side is equal to
    loadSquares (see below). x and y are the indices of the page to generate
    within that square. */
    public void generate(int x, int y)
    {
         /* pagePos represents the world x and y coordinates of the bottom left
            corner of the page being generated. This is given by...
              new Vector2((-(float)loadSquares / 2.0f + x + xCoord) * tileSize, 
                          (-(float)loadSquares / 2.0f + y + zCoord) * tileSize);
            This is because the origin tile's center is at 0, 0\. xCoord represents
            the tile that the target object is on, which is what the loaded square
            is centered around. tileSize is the length of each side of each tile.
         */
        Vector2 pagePos = getPagePos(x, y);
        //Here I get the number of samples x and y in the heightmap.
        int xlim = td[x,y].heightmapWidth;
        int ylim = td[x,y].heightmapHeight;
            //The actual data
        float[,] array = new float[xlim, ylim];
            //These will represent the minimum and maximum values in this tile.
            //I will need them to convert the data to something unity can use.
        float min = 0.0f;
        float max = 0.0f;
        for(int cx = 0; cx < xlim; cx++)
        {
            for(int cy = 0; cy < ylim; cy++)
            {
                //Here I actually sample the perlin function.
                //Right now it doesn't look like terrain (intentionally, testing).
                array[cx,cy] = sample(
                    new Vector3((float)cx / (float)(xlim - 1) * tileSize + pagePos.x, 
                                (float)cy / (float)(ylim - 1) * tileSize + pagePos.y, 
                    122.79f));
                //On the first iteration, set min and max
                if(cx == 0 && cy == 0)
                {
                    min = array[cx,cy];
                    max = min;
                }
                else
                {
                    //update min and max
                    min = Mathf.Min(min, array[cx,cy]);
                    max = Mathf.Max(max, array[cx,cy]);
                }
            }
        }
        //Set up the Terrain object to receive the data
        float diff = max != min ? max - min : 10.0f;
        tr[x,y].position = new Vector3(pagePos.x, min, pagePos.y);
        td[x,y].size = new Vector3(tileSize, diff, tileSize);
        //Convert the data to fit in the Terrain object
     /* Unity's terrain only accepts values between 0.0f and 1.0f. Therefore,
        I shift the terrain vertically in the code above, and I
        squish the data to fit below.
     */
        for(int cx = 0; cx < xlim; cx++)
        {
            for(int cy = 0; cy < ylim; cy++)
            {
                array[cx,cy] -= min;
                array[cx,cy] /= diff;
            }
        }
        //Set the data in the Terrain object
        td[x,y].SetHeights(0, 0, array);
    }
} 
```

有趣且可能很重要的细节：瓷砖与 x/z 方向上相邻角落的瓷砖正确连接。只要瓷砖没有相同的 x-to-z 增量，就会发生采样偏移。在下图中，右侧图块是另一个图块的 +x 和 +z。具有这种关系的所有图块都已正确连接。

![在此处输入图像描述](../Images/fb59f66b0fb31a340ba4aea4cb2e2704.png)

这是以 zip 格式上传的项目文件。告诉我它是否不起作用或什么... [http://www.filefactory.com/file/4fc75xtd3yzl/n/FPS_zip](http://www.filefactory.com/file/4fc75xtd3yzl/n/FPS_zip)

要查看地形，如果它没有从那里开始，请在切换到 testScene 后按 Play。GameObject 生成数据和地形对象（它具有来自 scripts/General/ 附加的 RandomTerrain 脚本）。您可以从那里将参数修改为柏林噪声。请注意，现在只有第一个 perlin 八度音程 o_elevator 在地形生成中处于活动状态。为了解决这个故障，所有其他公共 perlin 倍频程变量都没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:37:34.177

TL;DR：您需要删除 getTargetCoords 并使用`tr[x,y].position = new Vector3(pagePos.y, 0.0f, pagePos.x)`.

如何达到上述目标：一次在 1 个维度上工作。这意味着转动它（来自您附加的统一代码）：

```
 array[cx,cy] = sample(
                new Vector3((float)cx * tileSize / (float)(xlim - 1) + pagePos.x, 0.0f,
                            (float)cy * tileSize / (float)(ylim - 1) + pagePos.y)); 
```

进入这个：

```
 array[cx,cy] = sample(
                new Vector3(
                    (float)cx * tileSize / (float)(xlim - 1) + pagePos.x,
                    0.0f,
                    0.0f
                ) 
            ); 
```

我很快意识到您的 有问题`getPagePos`，因为它正在从 中添加一个值`getTargetCoords`，并且该函数使用了该`getPagePos`函数设置的位置！圈内圈子，伙计们。

```
protected void getTargetCoords()
{
    xCoord = Mathf.RoundToInt(target.position.x / tileSize);
    zCoord = Mathf.RoundToInt(target.position.z / tileSize);
} 
```

所以让我们失去那个功能和对它的引用。事实上，让我们`getPagePos`现在简化一下：

```
protected Vector2 getPagePos(int x, int y)
{
    return new Vector2( 0.0f,0.0f);
} 
```

哦，我的上帝 TAWNOS 疯了吗？！嗯，是的，但那是无关紧要的。假设您的示例函数是正确的（我根据您的断言授予您的假设），那么我们应该从获取简单值（零！）开始，并通过添加的每个附加假设进行验证。

简化后，让`getPagePos`我们再看一下`(float)cx * tileSize / (float)(xlim - 1) + pagePos.x`. 它想做什么？好吧，它似乎试图通过从图块的原点偏移来找到当前样本的世界坐标点。让我们验证这是一个真实的假设：`xLim`样本分布在`tileSize`单位上，因此世界坐标中的每个步长为`tileSize / xLim`. 将它乘以当前值将得到我们的偏移量，所以这段代码看起来是正确的。

现在，让我们得到一个简单的平铺偏移，看看一切都匹配。而不是试图将下降集中在所有瓷砖的中间，我将做一个简单的网格偏移（稍后可以调整它以恢复居中）。

```
 return new Vector2( 
        tileSize * (float)x,
        0.0f
    ); 
```

当您运行它时，您可能会很快看到问题所在。底边映射它旁边的瓦片的顶边，而不是右边匹配左边。如果不深入研究，这可能是由您的采样方法的工作方式引起的。我不知道。这是更新的功能：

```
protected Vector2 getPagePos(int x, int y)
{
    float halfTile = loadSquares / 2.0f;
    return new Vector2( 
        (-halfTile * tileSize) + (x * tileSize),
        (-halfTile * tileSize) + (y * tileSize)
    );
}

public void generate(int x, int y)
{
    if(x >= loadSquares || x < 0 || y >= loadSquares || y < 0) return;
    t[x,y] = Terrain.CreateTerrainGameObject(new TerrainData()).GetComponent<Terrain>();
    t[x,y].name = "Terrain [" + x + "," + y + "]";
    td[x,y] = t[x,y].terrainData;
    td[x,y].heightmapResolution = resolution;

    tr[x,y] = t[x,y].transform;
    Vector2 pagePos = getPagePos(x, y);
    //Actual data generation happens here.
    int xLim = td[x,y].heightmapWidth;
    int yLim = td[x,y].heightmapHeight;

    float[,] array = new float[xLim, yLim];
    float min = int.MaxValue;
    float max = int.MinValue;
    for(int cx = 0; cx < xLim; cx++)
    {
        for(int cy = 0; cy < yLim; cy++)
        {
            array[cx,cy] = sample(
                new Vector3(
                    (float)cx * (tileSize / (float)(xLim - 1)) + pagePos.x, 
                    0.0f,
                    (float)cy * (tileSize / (float)(yLim - 1)) + pagePos.y
                ) 
            ); 

            if(min > array[cx,cy]) 
                min = array[cx,cy];
            if(max < array[cx,cy]) 
                max = array[cx,cy];

        }
    }

    //Set up the Terrain object to receive the data
    float diff = max != min ? max - min : 10.0f;
    tr[x,y].position = new Vector3(pagePos.y, min, pagePos.x);
    td[x,y].size = new Vector3(tileSize, diff, tileSize);

    //Convert the data to fit in the Terrain object
    for(int cx = 0; cx < xLim; cx++)
    {
        for(int cy = 0; cy < yLim; cy++)
        {
            array[cx,cy] -= min;
            array[cx,cy] /= diff;
        }
    }
    //Set the data in the Terrain object
    td[x,y].SetHeights(0, 0, array);
} 
```

# java - 阻止/取消阻止我的应用程序中的应用程序：Android

> ID：11453814
> 
> 赞同：7
> 
> 时间：2012-07-12T14:15:48.267
> 
> 标签：java, android, launcher

我想从我的应用程序中阻止/取消阻止（用户无法使用/访问被阻止的应用程序）Android 设备中的某些应用程序。但我找不到任何解决方案/想法。

我阅读[了 Android 如何以编程方式隐藏启动器图标](https://stackoverflow.com/questions/8134884/android-how-to-programmatically-hide-launcher-icon)，但这隐藏了同一应用程序的应用程序启动器图标。

我怎样才能做到这一点？请分享一些关于此的想法/链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T07:17:41.110

每秒使用警报管理器启动服务内部服务您有一组已安装的应用程序，现在您检测到最热门的应用程序正在运行与您的应用程序数组匹配的顶级任务，而不是启动保护器

我已经完成了

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T14:21:53.810

如果手机上的 Android 操作系统未植根，您将无法阻止其他应用程序。Os 没有授予这样做的权利。Android 运行在 Linux 上，Linux 提供沙盒系统调用 API 并规定规则。

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

基本上你可以做允许做的事情。拦截呼叫，通过设备管理器阻止摄像头，读取其他应用程序的数据（如果他们共享该数据并且仅共享他们共享的数据），使用一些公共资源，但仅此而已。要做你想做的事，你的应用程序必须是 root，但标准的第三方应用程序没有 root 权限。您的解决方案可以是更改固件，使用 root 权限将您的应用程序绑定到其中。

# c# - WPF中不同窗口之间的数据共享

> ID：11453818
> 
> 赞同：1
> 
> 时间：2012-07-12T14:15:57.830
> 
> 标签：c#, wpf

我正在制作一个 WPF 应用程序来配置使用 DAQ 卡从不同类型的传感器获取数据。我的第一个窗口从用户那里获取有关不同参数的输入，我想在所有其他窗口中使用这些。存储所有这些的最佳方式是什么。

1.  创建一个单独的类并将它们全部存储为类中的静态字段。
2.  将它们存储在我`mainwindow`班级的字符串数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:06:05.110

如果您无法遵循任何建议的模式，并且您需要在应用程序的所有窗口中都可用的某些属性，则可以使用该`Application.Properties`属性。

[http://msdn.microsoft.com/en-us/library/system.windows.application.properties](http://msdn.microsoft.com/en-us/library/system.windows.application.properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:53:32.583

Tom Deleu 是对的，您应该将视图与数据分开。[Caliburn.Micro](http://caliburnmicro.codeplex.com/)非常强大且易于学习。也有不少用户，所以任何问题都可能得到解决。无论您选择什么，都以正确的方式去做。

# java - 工作数组列表 和字符串 []

> ID：11453823
> 
> 赞同：-2
> 
> 时间：2012-07-12T14:16:03.810
> 
> 标签：java, string, arraylist

我有一个`ArrayList<File>`，还有一个，我该`String[]`如何添加？`String[]``ArrayList<File>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:18:31.453

```
for (String s : stringArray) fileList.add(new File(s)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:17:44.613

```
List<String> list = new ArrayList<String>();
String[] strings = {"foo", "bar"};

list.addAll(Arrays.asList(strings)); 
```

我假设您有一个文件路径列表。如果没有，我喜欢马尔科的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T14:23:23.727

这取决于你想做什么，你不能简单地添加`String`到 的集合中`File`，因为`File`它不是 的超类`String`。

这些是否`String[]`包含

1.  你的文件的路径？
2.  应该由文件表示的内容？

**假设 1.**您可以使用适当的`File`构造函数简单地添加它们：

```
String[] paths = // ...
for (String path : paths) {
     fileList.add(new File(path));
} 
```

否则，**假设 2.**这些`String[]`包含文件的内容，您可以简单地`File`在 Java 中创建一个，将内容写入其中，然后将`File`对象添加到您的文件`fileList`中，如上所示。

创建和写入文件如下所示：

```
String text = "This is your text file";
Writer writer = new BufferedWriter(new FileWriter(file));
File file = new File("filename.txt");
writer.write(text);
writer.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:18:11.923

您不能将字符串对象添加到文件列表

# jpa - 使用 Spring Roo 和 Spring MVC 配置从实体到实体的超链接导航

> ID：11453825
> 
> 赞同：0
> 
> 时间：2012-07-12T14:16:07.617
> 
> 标签：jpa, spring-mvc, spring-roo, asp.net-mvc-scaffolding

我使用 Spring Roo + Jpa + Spring MVC。我的域中有几个 @ManyToOne 和 @OneToMany 关系。此外，我为我的实体生成了 Web 脚手架。

所以说我有一个

> 客户---订单

关系（一个客户有多个订单）。到目前为止，我生成的脚手架允许我查看给定订单的客户是什么。

但是，客户端显示为**纯文本**。我需要的是**从给定订单导航到客户端的链接**。

对于所有 @ManyToOne 关系，是否可以使用 Spring Roo shell 来实现，还是我必须手动编辑 JSP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:41:56.223

您必须手动编辑 roo 生成的 JSP 页面以添加超链接行为。

# c# - 关于将 WCF 托管为 Windows 服务的问题

> ID：11453829
> 
> 赞同：1
> 
> 时间：2012-07-12T14:16:32.900
> 
> 标签：c#, .net, wcf, deployment, self-hosting

我有一个复杂的 WCF 服务，例如使用 TCP、WindowsLogin、CustomLogin 和事务。

这已在带有 WAS 的 IIS7 中托管，但为了获得更好的性能，我现在将尝试将其作为 Windows 服务移入自托管环境。

但是在我开始这个项目之前我有一些问题：

1.  我是否能够在不构建多个安装包的情况下安装同一服务的多个实例？

2.  WindowsLogin 和 CustomLogin 会像以前一样工作吗？

3.  托管在 IIS 中的启动时间有时可能长达 1 分钟，我看到托管在 Windows 服务中时的 30 sek 限制？我该如何处理？

4.  在开始这个项目之前我还有什么需要考虑的吗？

5.  你有关于这个主题的文章推荐吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:28:57.610

> 1.是否可以在不构建多个安装包的情况下安装同一服务的多个实例？

是的，让您的服务名称在安装程序中可配置。该端口也应该是可配置的，因此它不会与其他实例冲突。

> 2.WindowsLogin 和CustomLogin 会像以前一样工作吗？

是的

> 3.托管在IIS中的启动时间有时可以长达1分钟，我看到托管在Windows服务中的30 sek限制？我该如何处理？

要么异步启动它，要么调用`this.RequestAdditionalTime`你的`OnStart()`方法

> 4.在开始这个项目之前我还有什么需要考虑的吗？

这个真的很广泛，有点难以解决

> 5.你有关于这个主题的文章推荐吗？

[http://msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# c++ - 为什么 std::transform 使用构造函数？

> ID：11453837
> 
> 赞同：0
> 
> 时间：2012-07-12T14:16:53.320
> 
> 标签：c++, optimization, stl, transform

我使用 std::transform 将一些值添加到列表中的现有值。下面的代码工作正常，我只是想知道在执行转换时是否可以避免所有对复制构造函数的调用（参见程序的输出）。如果我只是破解代码，并创建一个 for 循环显式调用 Base 的 += 运算符，则不会执行复制构造，并且值会在适当的位置更改，这样会更有效。

我可以使转换调用 Base 的 operator+= 而不是复制构造吗？我应该专注于`increment<Type>`吗？

该程序：

```
#include <iostream>
#include<list>
#include <algorithm>
#include <iterator>

template<class T>
class Base;

template<class T>
std::ostream& operator << (std::ostream& os, const Base<T>& b);

template<class T>
class Base
{
    private: 
        T b_;
    public: 
        typedef T value_type;

        Base()
            :
                b_()
        { std::cout << "Base::def ctor" << std::endl; }

        Base (const T& b)
            : 
                b_(b)
        { std::cout << "Base::implicit conversion ctor: " << b_ << std::endl; }

        const T& value()
        {
            return b_;
        }

        const Base operator+(const Base& b) const
        {
            std::cout << "Base operator+ " << std::endl;
            return Base(b_ + b.b_);
        }

        const Base&  operator+=(const T& t) 
        {
            b_ += t;
            return *this;
        }

        friend std::ostream& operator<< <T> (std::ostream& os, const Base<T>& b);
};

template<class T>
std::ostream& operator<< (std::ostream& os, const Base<T>& b)
{
    os << b.b_; 
    return os;
}

template<class Type> 
class increment
{
    typedef typename Type::value_type T; 

    T initial_; 

    public: 

        increment()
            :
                initial_()
        {};

        increment(const T& t)
            :
                initial_(t)
        {}

        T operator()()
        {
            return initial_++;
        }
};

template<class Container>
void write(const Container& c)
{
    std::cout << "WRITE: " << std::endl;
    copy(c.begin(), c.end(), 
         std::ostream_iterator<typename Container::value_type > (std::cout, " "));
    std::cout << std::endl;
    std::cout << "END WRITE" << std::endl;
}

using namespace std;

int main(int argc, const char *argv[])
{
    typedef list<Base<int> > bList; 

    bList baseList(10); 

    cout << "GENERATE" << endl;
    generate_n (baseList.begin(), 10, increment<Base<int> >(10));
    cout << "END GENERATE" << endl;

    write(baseList); 

    // Let's add some integers to Base<int>

    cout << "TRANSFORM: " << endl;

    std::transform(baseList.begin(), baseList.end(), 
                   baseList.begin(), 
                   bind2nd(std::plus<Base<int> >(), 4)); 
    cout << "END TRANSFORM " << endl;

    write(baseList);

    // Hacking the code: 
    cout << "CODE HACKING: " << endl;
    int counter = 4;
    for (bList::iterator it = baseList.begin(); 
         it != baseList.end(); 
         ++it)
    {
        *it += counter; // Force the call of the operator+=
        ++counter;
    }
    write (baseList);
    cout << "END CODE HACKING" << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T14:31:04.427

`Base (const T& b)`不是复制构造函数，它是一个`Base<T>`接受 a的构造函数`const T&`。复制构造函数通常具有签名`Base(const Base& )`

也就是说，每次您`Base<int>`从 an创建一个 new 时，都会调用您的构造函数`int`，这是您在加法运算符中执行的操作。

最后，std::transform() 使用输出迭代器赋值运算符将函数的结果分配给输出。如果您想完全避免复制，您应该使用`std::for_each`，以及`std::bind2nd( std::mem_fun_ref(&Base<int>::operator +=), 4 ))`. 这将避免制作副本，因为它将单独对引用进行操作。

# php - 输入 URL 后密码解密不起作用

> ID：11453840
> 
> 赞同：0
> 
> 时间：2012-07-12T14:17:00.717
> 
> 标签：php, passwords, md5, encryption

我正在使用以下[技术](https://stackoverflow.com/a/1289114/1360354)来加密/解密密码：

```
$key = 'abcd';
$password = 'password';

$encrypted_password = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $password, MCRYPT_MODE_CBC, md5(md5($key))));

$decrypted_password = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encrypted_password), MCRYPT_MODE_CBC, md5(md5($key))), "\0"); 
```

[上面的代码在同一页面上为我工作](http://ideone.com/rRNj2)

但是，当我将 URL 中的加密密码传递给另一个网页时，例如：

```
example.com/authenticate.php?pass=CuESFcvXHnQkZaY79WUL3U2aY9TROkjZFETk9Ur+iFY= 
```

然后它没有使用相同的密钥以原始形式将其解密，结果我得到了一些垃圾数据。

我认为它类似于 url**编码/解码**问题？

有什么办法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T14:20:34.023

`+`在 URL 中代表一个空格。如果要在 URL 中传递任意数据，尤其是可能包含*特殊字符*的数据，请[`urlencode`](http://php.net/urlencode)在将其放入 URL 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:25:01.493

你的猜测是对的：

在将 pass 参数附加到查询字符串之前，您应该对其进行 urlencode。

```
urlencode($encrypted_password); 
```

然后在解密之前进行urldecode

```
urldecode($encrypted_password); 
```

快乐编码！

# delphi - 如何将接口对象传递给 Pascal 脚本函数调用？

> ID：11453841
> 
> 赞同：7
> 
> 时间：2012-07-12T14:17:00.743
> 
> 标签：delphi, delphi-2009, inno-setup, pascalscript, remobjects

***德尔福部分：***

我有一个带有该事件的类，并且从该事件中我需要调用一个将接口对象传递给它的过程。它在 Delphi 中运行良好，但我在 Pascal 脚本中声明它时遇到问题。

到后台 -`IGPGraphics`接口是其中的一部分，[`Delphi GDI+ library`](http://www.bilsen.com/gdiplus/index.shtml)并且没有方法定义如下：

```
type
  IGdiplusBase = interface
  ['{24A5D3F5-4A9B-42A2-9F60-20825E2740F5}']
  IGPGraphics = interface(IGdiPlusBase)
  ['{57F85BA4-CB01-4466-8441-948D03588F54}'] 
```

以下只是我需要在 Pascal 脚本中执行的简化 Delphi 伪代码：

```
type
  TRenderEvent = procedure(Sender: TObject; const GPGraphics: IGPGraphics) of object;
  TRenderClass = class(TGraphicControl)
  private
    FOnRender: TRenderEvent;
  public
    property OnRender: TRenderEvent read FOnRender write FOnRender;
  end;

// when the TRenderClass object instance fires its OnRender event I want to call 
// the RenderObject procedure passing the IGPGraphics interfaced object to it; I
// hope I'm doing it right, I'm just a newbie to this stuff - but it works so far
// in Delphi (since I didn't get it to work in Pascal Script)

procedure TForm1.RenderClass1Render(Sender: TObject; const GPGraphics: IGPGraphics);
begin
  RenderObject(GPGraphics, 10, 10);
end;

// what I need in Pascal Script is between these two lines; just pass the interface
// object from the event fired by component to the procedure called from inside it

procedure RenderObject(const GPGraphics: IGPGraphics; X, Y);
begin
  // and here to work with the interfaced object somehow
end; 
```

***Pascal 脚本编译部分：***

我的目标是让带有事件的类在 Pascal 脚本中可用，并且需要将该接口对象传递给该过程，就像上面一样，所以我首先尝试在编译时声明这个（但我什至不确定是否这是这样做的正确方法）：

```
// the interface
PS.AddInterface(Cl.FindInterface('IUnknown'), StringToGuid('{57F85BA4-CB01-4466-8441-948D03588F54}'), 'IGPGraphics');
// the type for the event
PS.AddTypeS('TRenderEvent', 'procedure(Sender: TObject; const GPGraphics: IGPGraphics)');
// and the class with the event itself
with PS.AddClassN(PS.FindClass('TGraphicControl'), 'TRenderClass') do
begin
  RegisterProperty('OnRender', 'TRenderEvent', iptrw);
end; 
```

***Pascal 脚本运行时部分：***

我绝对迷失的地方是运行时部分。我不知道如何从调用堆栈中获取接口对象并将其传递给我的 RenderObject 过程：

```
function RenderClassProc(Caller: TPSExec; Proc: TPSExternalProcRec; Global, 
  Stack: TPSStack): Boolean;
var
  PStart: Cardinal;
begin
  PStart := Stack.Count-1;
  Result := True;
  if Proc.Name = 'RENDEROBJECT' then
  begin
    // how do I get the interfaced object from Stack (or whatever else) and pass 
    // it to the RenderObject proc here ? I can't find anything related about it
    // except functions that has no parameter index
    RenderObject(Stack.Get ?, Stack.GetInt(PStart-2), Stack.GetInt(PStart-3));
  end;
end; 
```

***问题是：***

谁能建议我如何为这种情况正确定义编译和运行时部分，或者通过某种方式传递接口对象来纠正我？

PS 对那个 Inno-Setup 标签感到抱歉，但也许*那里*有人试图以这种方式自定义 InnoSetup。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:07:32.603

如果我理解您的要求，您希望将接口作为参数传递给方法。不幸的是，我对此没有确切的答案，但我确实知道如何将接口分配给 PascalScript 的全局变量。这是我在 Castalia 的做法：

在 PSScript OnCompile 事件中，使用 PS.Comp.AddInterface 添加接口，然后添加每个必要的方法。之后，添加接口类型的变量。它看起来像这样，例如：

```
with PS.Comp.AddInterface(ARunner.Comp.FindInterface('IUnknown'),
  StringToGUID('{0346F7DF-CA7B-4B15-AEC9-2BDD680EE7AD}'),
  'ICastaliaMacroClipboardAccess') do
begin
  RegisterMethod('function GetText: string', cdRegister);
  RegisterMethod('procedure SetText(AText: string)', cdRegister);
end;
PS.AddRegisteredVariable('Clipboard', 'ICastaliaMacroClipboardAccess'); 
```

然后，在 OnExectute 事件中，将之前创建的变量绑定到实例：

```
P := PS.GetVariable('Clipboard'); //P is type PIFVariant
SetVariantToInterface(P, Implementing object as ICastaliaMacroClipboardAccess); 
```

完成此操作后，脚本可以通过变量访问接口对象，因此在这种情况下，脚本可以包含对 Clipboard.GetText 的调用，并且它可以按预期工作。

这是经过测试和工作的。

现在，我推测您可能能够使用 TPSScript.ExecuteFunction，从上面传入 PIFVariant，以更接近您想要的。然而，这不是我测试过的东西。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T17:15:08.703

很难相信但我发现了怎么做

```
procedure TApp.CallProcedureWithClassArg(x: TPSExec);
var
  o: TSampleObject;
  argumentList: TPSList;
  arg1: TPSVariantClass;
  proc: Integer;
begin
  o := TSampleObject.Create;
  o.X := 1; // do something with the object maybe
  proc := x.GetProc('TakeThis');
  argumentList := TPSList.Create;
  arg1.VI.FType := x.FindType2(btClass);
  arg1.Data := o;
  argumentList.Add(@arg1);
  x.RunProc(argumentList, proc);
  argumentList.Free;
end; 
```

这基本上是应该做的。

*   使用您的 TPSExec 实例，比如说 x
*   然后使用 x.GetProc 方法获取过程号
*   然后创建 TPSList 类型的参数列表
*   创建 TPSVariantClass var，将您的类实例（应该传递）分配给它的 Data 字段
*   还将 x.FindType2(btClass) 分配给它的 VI.FType 字段（完全不知道为什么会这样）
*   将指向 TPSVariantClass 变量的指针添加到 TPSList 列表
*   并且....... 调用过程 x.RunProc(argList, proc); 其中 proc 是前面获得的过程的编号

这适用于类，但对于接口应该没有太大区别，只需使用 TPSVariantInterface 类型作为参数变量而不是 TPSVariantClass；其他一切都应该是**一样**的。

我希望这可能会对某人有所帮助。

# c# - 使用自定义比较函数断言

> ID：11453846
> 
> 赞同：5
> 
> 时间：2012-07-12T14:17:14.963
> 
> 标签：c#, comparison, nunit

在我的代码中测试一些向量运算时，我必须检查是否与某个容差值相等，因为这些`float`值可能不完全匹配。

这意味着我的测试断言是这样的：

```
Assert.That(somevector.EqualWithinTolerance(new Vec3(0f, 1f, 0f)), Is.True); 
```

而不是这个：

```
Assert.That(somevector, Is.EqualTo(new Vec3(0f, 1f, 0f))); 
```

这意味着我的例外是这样的：

```
Expected: True
But was:  False 
```

而不是这个：

```
Expected: 0 1 0
But was:  1 0 9,536743E-07 
```

稍微难以理解出了什么问题。

**我如何使用自定义比较函数并且仍然得到一个很好的异常？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T14:18:20.343

找到了答案。NUnit`EqualConstraint`有一个具有预期名称的方法：`Using`.

所以我刚刚添加了这个类：

```
 /// <summary>
    /// Equality comparer with a tolerance equivalent to using the 'EqualWithTolerance' method
    /// 
    /// Note: since it's pretty much impossible to have working hash codes
    /// for a "fuzzy" comparer the GetHashCode method throws an exception.
    /// </summary>
    public class EqualityComparerWithTolerance : IEqualityComparer<Vec3>
    {
        private float tolerance;

        public EqualityComparerWithTolerance(float tolerance = MathFunctions.Epsilon)
        {
            this.tolerance = tolerance;
        }

        public bool Equals(Vec3 v1, Vec3 v2)
        {
            return v1.EqualWithinTolerance(v2, tolerance);
        }

        public int GetHashCode(Vec3 obj)
        {
            throw new NotImplementedException();
        }
    } 
```

我实例化它并像这样使用它：

```
Assert.That(somevector, Is.EqualTo(new Vec3(0f, 1f, 0f)).Using(fuzzyVectorComparer)); 
```

打字更多，但这是值得的。

# build - RequireJS 优化器和 TFS 构建

> ID：11453850
> 
> 赞同：1
> 
> 时间：2012-07-12T14:17:20.947
> 
> 标签：build, tfs, requirejs

我正在考虑使用 RequireJS 在 ASP.NET MVC 项目中组织我的 JavaScript 文件。我想调用 RequireJS 优化器 r.js 作为 TFS 构建的一部分，以组合 + 缩小我的 JavaScript 和 CSS 文件。

我想知道这是否有意义以及如何在构建脚本中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:52:50.503

当然。节点将毫无问题地安装（考虑使用代理）。从那里，使用 InvokeProcess 活动运行`node <path>/<to>/r.js -o build.app.js`。

我会将 r.js 包含在项目源代码中，而不是将其放在构建服务器上。这将使在本地练习构建变得更加容易。您需要使用 ConvertWorkspaceItem 活动来获取 build.app.js 的路径。

您要考虑的另一件事是删除那些已连接和丑化的资源。不是必需的，但我更喜欢通过将我期望的模块从 build.app.js 复制到我的最终可部署包目录来执行此操作。

# git - Git svn fetch、rebase、reset 和 dcommit 函数在一个 svn 分支上都挂起且没有错误

> ID：11453851
> 
> 赞同：3
> 
> 时间：2012-07-12T14:17:22.417
> 
> 标签：git, svn, git-fetch, dcommit

我有一个大型项目的克隆存储库，其布局有些非标准。我的大多数分支机构都可以正常工作，但其中一个却不行。

任何 git svn 命令都只是挂起，永远不会完成或给出错误。

我已经尝试过 git reset 等，但没有任何效果。我无法在分支上获取、变基或 dcommit。

这是别人见过的吗？我能做些什么来修复它？谷歌一无所获。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:27:41.553

您可以尝试使用提供独立实现 git-svn 的[SmartGit](http://www.syntevo.com/smartgit/index.html)使用您的存储库，我希望它不会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:56:14.540

我相信这是 Alien-SVN perl 库中的一个错误。我在 OSX 上运行，它带有 1.6.x 版本的 Perl-Subversion 绑定。我发现我能够用这个最小的配置重现挂起效果：

```
use SVN::Core;
warn $SVN::Core::VERSION;
use SVN::Ra;
SVN::Ra->new('https://example.org/example/project/trunk');
exit; 
```

我尝试使用内置的 OSX Perl/CPAN 更新 SVN::Core 版本无济于事。它从退出时挂起到启动时出现段错误。最后，我只是使用 MacPorts 来安装 git 和 svn，使用`sudo port install git-core +svn`的另一个问题是关于更新内置 OSX SVN::Core perl 库。

# variables - 在批处理文件的文件路径目录中使用变量

> ID：11453858
> 
> 赞同：9
> 
> 时间：2012-07-12T14:17:54.220
> 
> 标签：variables, batch-file, path, directory, cmd

我有一个相当简单的问题，但是我似乎无法在任何地方找到解决方案。

我正在处理批处理文件中的一些变量，我想根据变量更改目录。

例如，

```
variable SET /Jan2000 = a
cd P:\Reference\Data\2000\%a% 
```

当我运行批处理文件时，它只停留在“2000”文件夹中，不像我问的那样进入下面的文件夹。有什么办法可以让它工作吗？

编辑：根据要求，这是在批处理文件中编写的确切代码。谢谢您的帮助。

```
chdir /D P:\Reference\Data\2000
SET Jan2000 = a
chdir P:\Reference\2000\%a%   
dir
pause 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T16:25:36.947

我不能为@aphoria 的答案添加太多内容，但试试这个

```
set a=jan2000
pushd P:\Reference\Data\2000\%a% 
```

使用`pushd`而不是在`cd`通过驱动器更改目录时出现问题。（我知道，`/d`开关就是为此，但值得一试）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T14:37:56.920

你需要`SET`你的变量。

例如：

```
SET a=Jan2000
CD P:\Reference\Data\2000\%a% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:23:44.383

是的我同意。我需要保留一周的每日备份，因此我通过从系统日期中提取 3 个字母的工作日来创建一个星期文件夹：

```
set Today=%DATE:~0,3%
Echo  The day of the week is %Today%
If exist U:\%Today% rd U:\%Today% /s /q
md U:\%Today% 
```

随后是各种 Robocopy 命令写入 U:\%Today% 文件夹

# javascript - 文档.write(' 下面的脚本就像一个 sharm 一样工作：  http://jsfiddle.net/VHLTx/ 但是这个没有！为什么？  请帮我一个使用jsfiddle的例子非常受欢迎 谢谢  正如 Pointy 解释的那样，您在此处采用的方法将消除页面上的任何其他内容。可能不是你想要的。 于 2012-07-12T14:23:00.480 回答 Related 1 javascript - HTML Checkbox 动态附加到列表中，但 JavaScript 不起作用 3 javascript - 仅追加限制 5 次 jquery .append 2 html - 在下拉列表中找不到元素 - Selenium 2 extjs - 如何在 Extjs 应用程序启动期间将参数传递给它？ 2 mysql - MYSQL 日期减法 0 objective-c - 从 Facebook 注销的问题 1 sql-server-2008 - 如何从存储过程中调用表值函数 3 iphone - 没有 @synthesis 的属性不会为自定义对象初始化 1 php - 如何动态决定缓存什么 3 c# - 我可以使用哈希码直接在 C# 字典中查找值吗 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11453864
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, html

下面的脚本就像一个 sharm 一样工作：

```
<script type="text/javascript">
    document.write('<scr'+'ipt type="text/javascript">alert("werwer")</sc'+'ript>');
</script> 
```

[http://jsfiddle.net/VHLTx/](http://jsfiddle.net/VHLTx/)

但是这个没有！为什么？

```
<script type="text/javascript">  
$.getScript('http://www.geoplugin.net/javascript.gp', function() {
    $location =  geoplugin_countryName();    

    if($location == "Canada" || $location == "United States") {
      // >>>some code>>>
    } else {
      document.write('<scr'+'ipt type="text/javascript">alert("werwer")</sc'+'ript>');
    } 
});
</script> 
```

请帮我一个使用jsfiddle的例子非常受欢迎

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:26:53.737

它永远无法工作的**真正**原因是您的`document.write()`调用将在调用的异步回调中发生`$.getScript()`。这将在原始文档关闭**后发生。**

结果将是原始页面的其余部分将被完全删除。

目前尚不清楚这种使用的意义是什么`document.write()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T14:22:34.383

`getScript`是一个 jQuery 方法，你的 jsfiddle 被配置为加载 MooTools。

使用 jsfiddle 的示例：http: [//jsfiddle.net/VHLTx/1/](http://jsfiddle.net/VHLTx/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:23:00.480

您需要包含 jQuery 才能使用`getScript()`. 您提供的不起作用的小提琴（http://jsfiddle.net/g3kMt/1）上的控制台错误表明这`getScript()`是一个未定义的方法。设置显示您正在加载 MooTools，而不是 jQuery。

这是一个有效的更新版本：http: [//jsfiddle.net/g3kMt/2/](http://jsfiddle.net/g3kMt/2/) 我所做的只是更改下拉菜单以指定 jQuery 而不是 MooTools。在您要在您的网站上运行的实际代码或其他任何内容中，您需要确保正在加载 jQuery。

这是一个可以剪切并粘贴到 HTML 文档中的版本：

```
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js"></script>  

<script type="text/javascript">   
    $.getScript('http://www.geoplugin.net/javascript.gp', function() {      
        $location =  geoplugin_countryName();            
        if($location == "Canada" || $location == "United States") {
            document.write('<scr'+'ipt type="text/javascript">alert("werwer")</sc'+'ript>');       
        } else {    
            document.write('<scr'+'ipt type="text/javascript">alert("werwer")</sc'+'ript>');         
        }   
    });  
</script> 
```

正如 Pointy 解释的那样，您在此处采用的方法将消除页面上的任何其他内容。可能不是你想要的。

# python - 给定 Python 包的名称，要导入的模块的名称是什么？

> ID：11453866
> 
> 赞同：40
> 
> 时间：2012-07-12T14:18:14.273
> 
> 标签：python, pip, easy-install, pypi

有人知道 Python 模块名称背后的逻辑与 easy_install 中使用的实际包的名称吗？

一些（除其他外）对我来说似乎有点不合逻辑的例子：

*   我们有`easy_install mysql-python`，但进口实际上是`import MySQLdb`
*   我们这样做`easy_install python-memcached`了，但实际上是导入`import memcache`（没有尾随 d）

我没有找到一种一致的方法来找到等价物。对于某些模块，我花了很多时间浏览才能找到它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T14:24:19.590

遗憾的是，这种疯狂是没有办法的。[包索引](http://pypi.python.org/pypi)中的名称与您的模块名称无关`import`。灾难性地[，一些包共享模块名称](https://stackoverflow.com/questions/5937739/python-module-name-conflict)。如果您同时安装两者，您的应用程序将以偶数赔率中断。（[Ruby也有这个问题](https://stackoverflow.com/questions/3113094/error-when-using-gchart-googlecharts-gem-nameerror-uninitialized-constant-g)）

* * *

Python 中的打包通常是可怕的。根本原因是该语言没有包管理器。Ruby 和 Nodejs 附带功能齐全的包管理器 Gem 和 Npm，并培育了以 GitHub 为中心的共享社区。Npm 使[发布包](https://npmjs.org/doc/developers.html)就像安装它们一样简单。Nodejs 于 2009 年问世，已经有[14k 个包](https://npmjs.org/)。古老的 Python 包索引列出了 24k。Ruby Gems 列出了 44k 包。

幸运的是，有一个不错的 Python 包管理器，称为[Pip](http://www.pip-installer.org/en/latest/index.html)。Pip 受到 Ruby 的 Gem 的启发，但缺少一些重要的功能（例如，列出包和[整体升级](https://github.com/pypa/pip/issues/59)）。具有讽刺意味的是，Pip 本身[安装起来很复杂](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)。在流行的 64 位 Windows 上安装需要从源代码构建和安装两个包。对于刚接触编程的人来说，这是一个很大的要求。

Python 的开发人员对所有这些挫折一无所知，因为他们是经验丰富的程序员，可以从源代码构建，并且他们使用带有打包 Python 模块的 Linux 发行版。

在 Python 附带包管理器之前，成千上万的开发人员将不必要地浪费时间重新发明轮子。

* * *

Python 3 解决了很多打包问题。Python 3没有[任何软件包](http://python3wos.appspot.com/)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-02-24T14:50:55.847

与公认的答案不同，这实际上是可能的，尽管确实很麻烦。

模块名称可以`top_level.txt`在包安装的元数据目录中找到。

要使用 python 访问它（替换`python-memcached`为您的包名称）：

```
>>> import pkg_resources as pkg # included in setuptools package
>>> metadata_dir = pkg.get_distribution('python-memcached').egg_info
>>> open('%s/%s' % (metadata_dir, 'top_level.txt')).read().rstrip()
'memcache' 
```

或者使用等效的 bash “一个衬里”：

```
cat $(python -c "import pkg_resources; \
print(pkg_resources.get_distribution('python-memcached').egg_info)")/top_level.txt 
```

请记住，某些软件包安装了多个模块，因此我介绍的方法可以返回多个模块名称。

# iphone - box2d ：使用 box2d 拍摄左侧

> ID：11453872
> 
> 赞同：0
> 
> 时间：2012-07-12T14:18:22.140
> 
> 标签：iphone, ios, cocos2d-iphone, box2d

嗨我需要拍摄我的精灵..我使用下面的代码

```
-(void)shooter
{
LHSprite* laserSprite = [lh newPhysicalSpriteWithUniqueName:@"ball_1" ];
b2Body* laserBody = [laserSprite body];
[self addChild:laserSprite z:10]; 
NSAssert(laserSprite!=nil, @"Couldn't find devil1"); 

[laserSprite transformPosition:_hero.position];
b2Vec2 ballvel = laserBody->GetLinearVelocity();
ballvel.x = 16;
laserBody->SetLinearVelocity(ballvel);
} 
```

上面的代码拍摄精灵右侧，

但我需要向左侧射击..即使我改变 ballvel.x = 16; 到ballvel.x = -16；它仍在向右侧射击..请帮助

我是box2d的新手，所以请温柔:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:41:07.000

语法是这样的：

//1\. 首先计算移动角度。//2。计算击中的力量（强度）。

```
b2Vec2 force;

force.x = cos(angle * M_PI / 180) * power;
force.y = sin(angle * M_PI / 180) * power;

laserBody->ApplyLinearImpulse(force, laserBody->GetPosition()); //or SetLinearVelocity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:02:21.393

实际上我的子弹精灵不是传感器......所以它击中了英雄精灵然后它又回到了右侧......我的坏......尴尬：D

# linq-to-sql - 为什么我的查询仍然返回项目？

> ID：11453873
> 
> 赞同：0
> 
> 时间：2012-07-12T14:18:23.893
> 
> 标签：linq-to-sql

下午，

我有一个 LINQ 查询，它计算具有特定条件的所有产品。

```
 int processingProductsCount = dc.abcProducts.Where(p => p.prodPublished == 1 && p.pricePublished != true || p.imgPublished != true || p.stockPublished != true).Count(); 
```

基本上我只想返回 prodPublished 为 1 并且 pricePublished、imgPublished、stockPublished 都是错误的项目计数。

然而，它计算所有具有 pricePublished、imgPublished、stockPublished 的项目都是错误的。我基本上需要得到0的结果。

我这样做是为了隐藏一个按钮，该按钮仅在 prodPublished 为 1 且 pricePublished、imgPublished、stockPublished 均为 false 时才需要。但是该按钮仍显示为它计算 pricePublished、imgPublished、stockPublished 全部为假的所有项目。

抱歉，如果写得不好，有点难以解释。任何人都可以看到我的 LINQ 查询有问题吗？

更新：看起来查询正在带回所有没有 prodPublished 为 1 的产品

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:25:35.580

这应该可以解决问题

```
int processingProductsCount = dc.abcProducts.Count(p => p.prodPublished == 1 && (!p.pricePublished && !p.imgPublished && !p.stockPublished)); 
```

# asp.net - 如何格式化横线？

> ID：11453874
> 
> 赞同：0
> 
> 时间：2012-07-12T14:18:29.440
> 
> 标签：asp.net, rule

我想要许多具有相同格式的水平规则。
我正在尝试使用 CssClass 并遇到错误：

```
<hr CssClass="hRules"/>  // error: Attribute 'CssClass' is not a valid attribute of element 'hr'. 
```

请问有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:19:57.383

不能简单的使用class属性吗？

```
<hr class="hRules" /> 
```

在 Css 某处：

```
.hRules{
   height:1px;
   color:#C7C7C7;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:23:49.953

对于普通的 HTML 控件，您必须使用该`class`属性。该`CssClass`属性用于asp 控件。您可能仍然可以将该`CssClass`属性用于您的`hr`控件，但您可能还必须将其设置`runat="server"`为

# mysql - 在 Openshift 上部署应用程序时出错

> ID：11453877
> 
> 赞同：2
> 
> 时间：2012-07-12T14:18:37.543
> 
> 标签：mysql, spring, jakarta-ee, jboss, openshift

我之前没有部署在 jboss 应用服务器上。尝试在`openshift`. 我正在使用`Spring`和`JPA 2.0`。

我的`applicationContext.xml`

```
<jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/MysqlDS" resource-ref="true" /> 
```

我的 `standalone.xml`

```
<datasource jndi-name="java:jboss/datasources/MysqlDS" enabled="${mysql.enabled}" use-java-context="true" pool-name="MysqlDS">
                    <connection-url>jdbc:mysql://${env.OPENSHIFT_DB_HOST}:${env.OPENSHIFT_DB_PORT}/${env.OPENSHIFT_APP_NAME}</connection-url>
                    <driver>mysql</driver>
                    <security>
                      <user-name>${env.OPENSHIFT_DB_USERNAME}</user-name>
                      <password>${env.OPENSHIFT_DB_PASSWORD}</password>
                    </security>
                </datasource>
                <drivers>
                    <driver name="mysql" module="com.mysql.jdbc">
                        <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</xa-datasource-class>
                    </driver>
                </drivers> 
```

错误

```
2012/07/12 09:00:36,714 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-2) HHH000204: Processing PersistenceUnitInfo [
    name: tentacleSpotPU
   ...]
2012/07/12 09:00:37,118 WARN  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-2) HHH000181: No appropriate connection provider encountered, assuming application will be supplying connections
2012/07/12 09:00:37,139 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.persistenceunit."ROOT.war#tentacleSpotPU": org.jboss.msc.service.StartException in service jboss.persistenceunit."ROOT.war#tentacleSpotPU": Failed to start service
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.6.0_24]
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.6.0_24]
   at java.lang.Thread.run(Thread.java:679) [rt.jar:1.6.0_24]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: tentacleSpotPU] Unable to build EntityManagerFactory
   at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
   at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
   at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
   at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
   at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more
Caused by: org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set
   at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:97)
 at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:67)
 at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:176)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
  at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
 at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
  at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
  at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
   at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
   ... 9 more

2012/07/12 09:00:37,309 ERROR [org.jboss.as] (MSC service thread 1-3) JBAS015875: JBoss AS 7.1.0.Final "Thunder" started (with errors) in 75169ms - Started 401 of 720 services (203 services failed or missing dependencies, 113 services are passive or on-demand)
2012/07/12 09:00:37,440 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "ROOT.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"ROOT.war#tentacleSpotPU\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"ROOT.war#tentacleSpotPU\": Failed to start service"}}
2012/07/12 09:00:38,574 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment ROOT.war in 1131ms
2012/07/12 09:00:38,576 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.persistenceunit."ROOT.war#tentacleSpotPU": org.jboss.msc.service.StartException in service jboss.persistenceunit."ROOT.war#tentacleSpotPU": Failed to start service

2012/07/12 09:00:38,609 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"ROOT.war#tentacleSpotPU\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"ROOT.war#tentacleSpotPU\": Failed to start service"}}}} 
```

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:29:39.337

您应该尝试设置 hibernate.dialect 属性以允许 JBoss 在没有连接的情况下加载持久性上下文（它可以使用连接来检测方言）。它将等待从应用程序获取连接（在您的情况下为 Spring）。

您可以在 persistence.xml 中设置它，或者应该可以在放置在类路径根目录中的 hibernate.properties 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:40:58.127

你的项目设置如何？项目是否使用 jboss 7.1.0 Final 在本地运行？我使用一个persistence.xml 文件，它为我的JPA 2.0 配置定义了我的EntityManagerFactory 和hibernate.dialect。位于我的 META-INF 目录中。这就是我在我的项目中设置它的方式。

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="userpersistence" transaction-type="RESOURCE_LOCAL">
    <provider>
        org.hibernate.ejb.HibernatePersistence
    </provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/acctdatabase"/>
        <property name="hibernate.connection.username" value="acct-user"/>
        <property name="hibernate.connection.password" value="password"/>
    </properties>
</persistence-unit> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T16:48:02.663

我得到了同样的例外。3-4 天后，我意识到我的 persistence.xml 的位置不正确。我有使用 EJB、JSF、MAVEN、MYSQL 的 EAR Web 应用程序。因此，在我的 Eclipse 中，我有 ejb 项目、web 项目、ear 项目和 main 项目。我正在更新 EJB 项目下 META-INF 文件夹中的persistance.xml 文件。但是，我忘记在 JPA 内容下的 Web 项目中更新相同的内容。因此，您将在 Web 项目的 META-INF 文件夹下找到相同的 persistence.xml 文件。默认情况下，unit-name 将是“project-name-web”和类。因此，请根据您在此处提到的相同更新该名称，包括 jta-datasource 到属性。它应该可以工作。我的工作正常。最后唷！

# c - 在 Ubuntu 上使用 C 语言进行蓝牙编程

> ID：11453881
> 
> 赞同：-4
> 
> 时间：2012-07-12T14:18:46.103
> 
> 标签：c, linux, ubuntu, bluetooth

我正在关注此链接[http://people.csail.mit.edu/albert/bluez-intro/](http://people.csail.mit.edu/albert/bluez-intro/)，但我收到错误，因为 sudo apt-get install libbluetooth-dev 不起作用，我无法使用 apt -get 命令，因为我没有连接到互联网，但是如果我从外部下载这些库并通过 pendrive 在我的 ubuntu PC 中使用，是否有可能 1）Glib 库，2）Dbus 库，3）Bluez 4）Bluez Utilities

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:38:40.907

Bluez 是一个蓝牙软件堆栈。它由三个主要软件组成：

*   内核模块
*   用户级库
*   工具和应用

然后，您可以决定只使用内核模块（及其 IOCTL 接口），因此您必须自己编写库和工具。这是一项艰苦的工作，工作量取决于您需要使用的蓝牙配置文件。

第二种方法是下载并编译源代码： http: [//www.bluez.org/development/](http://www.bluez.org/development/) 但是您需要在系统上安装所有依赖项。

关于 APT，您可以尝试获取软件包 CD，然后将其用作源： http: [//www.debian.org/doc/manuals/apt-howto/ch-basico.en.html](http://www.debian.org/doc/manuals/apt-howto/ch-basico.en.html)

# asp.net-mvc-3 - 如何在 MVC3 中的 cshtml 中的网格中显示数据？

> ID：11453897
> 
> 赞同：0
> 
> 时间：2012-07-12T14:20:10.143
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个问题，我必须从数据库中检索数据并以网格格式显示它 cshtml....我有数据在视图中，但它没有显示我收到错误这是我的代码的样子

```
 BugTracker Model

      namespace Gridview_BugTracker.Models
         {
        public class BugTracker_DataHelper
           {
           public static List<BugTracker_DataHelper> GetList{get;set;}        
           public string projectName { get; set; }           
           public string Description { get; set; }
           public  string status { get; set; }           
            }

          ------------------------------
         BugTracker Controller

         public ActionResult Index()
    {
        Gridview_BugTracker.Models.BugTracker_DataHelper model = new BugTracker_DataHelper();
        SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS");
        conn.Open();
        SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
        SqlDataAdapter da = new SqlDataAdapter(dCmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        conn.Close();
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {
            model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
            model.Description = ds.Tables[0].Rows[i]["Description"].ToString();
            model.status = ds.Tables[0].Rows[i]["Status"].ToString();
        }

        return View(model);
    } 
```

* * *

```
 Index.Cshtml

       @model  IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>

       @{
       ViewBag.Title = "Index";
       }

      <h2>Index</h2>

       <p>
        @Html.ActionLink("Create New", "Create")
       </p>
      <table>
        <tr>
           <th>
              ProjectName
          </th>
       <th>
             Description     
       </th>
       <th>
           Status
       </th>    
    </tr>

   @foreach (var item in Model)
    {
       <tr>
         <td>
            @Html.DisplayFor(modelItem => item.projectName)
        </td>
      <td>
        @Html.DisplayFor(modelItem => item.Description)
      </td>
    <td>
        @Html.DisplayFor(modelItem => item.status)
    </td>

    <td>
        @Html.ActionLink("Edit", "Edit", new { id = item.projectName }) |
        @Html.ActionLink("Details", "Details", new { id = item.Description }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.status })
       </td>
  </tr>
  } 
```

执行程序时出现此错误

```
 error
     ----------------
       The model item passed into the dictionary is of type 'Gridview_BugTracker.Models.BugTracker_DataHelper',
but this dictionary requires a model item of type
'System.Collections.Generic.IEnumerable`1[Gridview_BugTracker.Models.BugTracker_DataHelper]'. 
```

* * *

所以任何人都可以帮助我在哪里做错了，或者我还需要添加什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:26:45.237

因为您只**返回一个 BugTracker_DataHelpe 对象实例，而视图需要一个**BugTracker_DataHelper 对象列表。所以返回一个对象列表给视图。

我会将数据库访问代码移动到一个单独的方法中，以便我可以在需要时从多个地方调用它

```
public List<BugTracker_DataHelper> GetAllBugs()
{
    var modelList = new List<BugTracker_DataHelper>();
    using(SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
    {
      conn.Open();
      SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
      SqlDataAdapter da = new SqlDataAdapter(dCmd);
      DataSet ds = new DataSet();
      da.Fill(ds);         
      for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
      {
        var model = new BugTracker_DataHelper();
        model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
        model.Description = ds.Tables[0].Rows[i]["Description"].ToString();
        model.status = ds.Tables[0].Rows[i]["Status"].ToString();
        modelList.Add(model);
     }
    }
    return modelList;
} 
```

现在在您的操作中调用此方法

```
public ActionResult Index()
{
   var bugList=GetAllBugs();
   return View(bugList);    
} 
```

还有一些建议

**1）**在代码中添加适当的异常处理

**2）**更改`Select *`为`Select specific column name`格式。

**3)**`ToString()`在访问和调用DataRow 单元格值上的函数（在本例中）之前检查 null 。

**4）**如果您只是阅读项目列表，**请使用 DataReader 而不是 DataSet**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:26:32.037

那是因为您发送 a`Gridview_BugTracker.Models.BugTracker_DataHelper`并且视图期望 a`IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>`

您在控制器中的代码应如下所示

```
public ActionResult Index()
    {
        List<Gridview_BugTracker.Models.BugTracker_DataHelper> model = new List<BugTracker_DataHelper>();
        SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS");
        conn.Open();
        SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
        SqlDataAdapter da = new SqlDataAdapter(dCmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        conn.Close();
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {
            Gridview_BugTracker.Models.BugTracker_DataHelper item = new BugTracker_DataHelper()
            item.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
            item.Description = ds.Tables[0].Rows[i]["Description"].ToString();
            item.status = ds.Tables[0].Rows[i]["Status"].ToString();

            model.add(item);
        }

        return View(model);
    } 
```

# client - 如何在 ASPxClientCombobox 中设置文本但保留值

> ID：11453899
> 
> 赞同：0
> 
> 时间：2012-07-12T14:20:15.537
> 
> 标签：client, devexpress

例如：

文本=“选择”和值=空

```
cbbFrequentadorClient.SetText('Select');
cbbFrequentadorClient.SetValue(null); 
```

不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:33:22.150

如果要将项目添加到客户端代码中的组合，则需要使用[ASPxClientComboBox.AddItem](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsScriptsASPxClientComboBox_AddItemtopic)方法。但是，如果您将 value 设置为 null 并将 text 设置为某个值（例如 Select），则组合值将设置为该文本，而不是 null。为了实现您的目标，您需要在服务器端代码中添加空白项。
如果您的组合未绑定到数据源，则可以使用此代码：

```
<dxe:ASPxComboBox runat="server" ID="cmb1" ClientInstanceName="cmb1"/> 
```

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        cmb1.Items.Add("Select", null);
        cmb1.Items.Add("One", 1);
        cmb1.Items.Add("Two", 2);
    }
} 
```

然后使用：

```
cmb1.SetSelectedIndex(0); 
```

将组合值设置为空。

如果您已将组合绑定到数据源，则应在组合 DataBound 事件处理程序中添加 null 项：

```
Items.Insert(0, new ListEditItem("Select", null)); 
```

另外，看看这个[建议](http://www.devexpress.com/Support/Center/p/S130374.aspx)（你可以投票）。

# c# - 如何获得第一个字符

> ID：11453902
> 
> 赞同：1
> 
> 时间：2012-07-12T14:20:23.933
> 
> 标签：c#, .net, input, console.readkey

首先，`Console.ReadKey()`不是答案。

我需要能够擦除我写的第一个字符。

基本上，我想做的是一个测量你打字速度的应用程序。它工作得很好，但我正在努力解决美学问题。

我一开始做的是调用`Console.ReadKey()`，然后调用这个启动 Timer 的函数（好吧，我在编写应用程序 30 分钟后意识到恰好有一个 Stopwatch 类 ._.），然后我会存储用户使用 输入`Console.ReadLine()`，然后停止此计时器。

```
static Word[] getWords()
{
    Word[] words;
    int c = Console.ReadKey().KeyChar;
    Timing.start();
    string str = (c.ToString() + Console.ReadLine()).ToLower();
    charCount = str.Length;
    words = Word.process(str);
    Timing.stop();
    return words;
} 
```

`charCount`是一个静态int，`Word`只是一个包装字符串的类。 `Word.process`是一个函数，它接受一个字符串，省略所有符号并返回一个用户键入的单词数组。 `Timing`只是一个包装类的`Timer`类。我认为这就是关于代码需要解释的全部内容。

我需要做的是`Timing.start()`当用户输入一个字符并且他必须能够删除它时调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:37:31.270

需要一些调整，但是这样的事情怎么样？

更新 - 现在一 (1) 个退格有效，但多个退格无效。啊！希望这将为您指明正确的方向。

更新 #2 - 使用 StringBuilder.... 退格现在可以使用 :)

```
namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {

            StringBuilder sb = new StringBuilder();
            // you have alot of control on cursor position using
            // Console.SetCursorPosition(0, Console.CursorTop -1);
            List<DateTime> inputs = new List<DateTime>();
            ConsoleKeyInfo cki;

            Console.WriteLine("Start Typing...");
            Console.WriteLine("Press the Escape (Esc) key to quit: \n");
            do
            {
                cki = Console.ReadKey();
                if (cki.Key == ConsoleKey.Spacebar)
                {
                    sb.Append(cki.KeyChar);
                }

                else if (cki.Key == ConsoleKey.Backspace)
                {
                    Console.Write(" ");
                    Console.Write("\b");
                    sb.Remove(sb.Length - 1, 1);
                }

                else if (cki.Key == ConsoleKey.Enter)
                {
                    sb.Append(cki.KeyChar + " ");
                    Console.WriteLine("");
                }

                else
                {
                    sb.Append(cki.KeyChar);
                }

                inputs.Add(DateTime.Now);
            } while (cki.Key != ConsoleKey.Escape);

            Console.WriteLine("");
            Console.WriteLine("=====================");
            Console.WriteLine("Word count: " + Regex.Matches(sb.ToString(), @"[A-Za-z0-9]+").Count);

            TimeSpan duration = inputs[inputs.Count - 1] - inputs[0];

            Console.WriteLine("Duration (secs): " + duration.Seconds);
            Console.ReadLine();
        }
    }
} 
```

# asp.net-mvc - HttpErrors existingResponse="Replace" 防止 MVC 的自定义错误处理

> ID：11453903
> 
> 赞同：6
> 
> 时间：2012-07-12T14:20:25.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config, http-status-code-404

我正在使用`[HandleError]`MVC3 应用程序中的属性处理错误。这很好用，但要让它工作，我需要添加

```
<system.web>
     <customErrors mode="On" /> 
```

为了处理 404 错误，我将其添加到 system. ***webserver***即 IIS 配置而不是 asp.net

```
<httpErrors errorMode="Custom" existingResponse="Replace">
   <remove statusCode="404" />
   <error statusCode="404" responseMode="ExecuteURL" path="/404page" />
</httpErrors> 
```

这很简单，非常适合 404。在这里添加它的原因是它看起来像是一个很好的包罗万象，没有任何自定义代码。existingResponse= **"Replace"**是必需的，其他模式导致 404 不被处理。

问题是当existingResponse="Replace" 时CustomErrors 不再起作用。它只是返回一个没有详细信息的剥离 500 错误。

这两种模式只是相互排斥吗？我知道我可以编写其他 404 解决方案，但理想情况下，我希望这个简单的配置更改能够工作或理解为什么它不能完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T22:43:31.123

不是直接的答案，但发现[这个 SO 解决方案](https://stackoverflow.com/a/9026907/678453)对我有用，而不是使用`existingResponse="replace"`

# java - 字体大小不适应不同的屏幕大小

> ID：11453907
> 
> 赞同：0
> 
> 时间：2012-07-12T14:20:35.513
> 
> 标签：java, android, xml, eclipse

我已经阅读了有关通过使用“match_parent”和“wrap_content”以及“sp”和“dp”以及相对布局来支持不同屏幕尺寸的 Android 文章。我已经实现了所有这些建议，但是当我在 Eclipse 的 XML 编辑器中将屏幕大小更改为平板电脑时，TextViews 和 Buttons 的字体大小似乎根本没有改变以适应更大的屏幕尺寸。较小的屏幕（例如 3.2 英寸）也是如此。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:21:56.730

从@CSmith的答案中大量借用（但不想编辑他的答案，因为它是有效的）：

在布局中：

```
<TextView
 android:id="@+id/yourID"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="My String"
 style="@style/myStyle"
/> 
```

值/样式.xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
<resources>
 <style name="myStyle">
  <item name="android:textStyle">bold</item> 
  <item name="android:textColor">#FFFFFFFF</item> 
  <item name="android:textSize">@dimen/my_textsize</item> 
  <item name="android:shadowColor">#FF000000</item> 
  <item name="android:shadowDx">1</item> 
  <item name="android:shadowDy">-1</item> 
  <item name="android:shadowRadius">1</item> 
 </style>
</resources> 
```

值/尺寸.xml

```
<resources>    
    <dimen name="my_textsize">14sp</dimen>
</resources> 
```

值-xlarge/dimens.xml

```
<resources>    
    <dimen name="my_textsize">20sp</dimen>
</resources> 
```

这将在普通设备上为您提供 14sp 字体，在 x-large 设备上为您提供 20sp 字体，并减少单独 XML 文件中的重复，因为唯一改变的是 font-size 。

您可以将任何将成为 sp/dp 维度的内容作为 .xml 文件放入 dimens.xml 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T15:08:47.713

在布局中：

```
<TextView android:id="@+id/yourID" android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="My String" style="@style/myStyle" /> 
```

值/样式.xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
<resources>
 <style name="myStyle">
  <item name="android:textStyle">bold</item> 
  <item name="android:textColor">#FFFFFFFF</item> 
  <item name="android:textSize">14sp</item> 
  <item name="android:shadowColor">#FF000000</item> 
  <item name="android:shadowDx">1</item> 
  <item name="android:shadowDy">-1</item> 
  <item name="android:shadowRadius">1</item> 
 </style>
</resources> 
```

值-xlarge/styles.xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
<resources>
 <style name="myStyle">
  <item name="android:textStyle">bold</item> 
  <item name="android:textColor">#FFFFFFFF</item> 
  <item name="android:textSize">20sp</item> 
  <item name="android:shadowColor">#FF000000</item> 
  <item name="android:shadowDx">1</item> 
  <item name="android:shadowDy">-1</item> 
  <item name="android:shadowRadius">1</item> 
 </style>
</resources> 
```

这将在普通设备上为您提供 14sp 字体，在 x-large 设备上为您提供 20sp

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:26:20.760

使用与密度无关的单位（例如“sp”和“dp”）的目的是，无论屏幕如何，从用户的角度来看，文本大小实际上都保持不变。

因此，当您在 XML 编辑器中更改屏幕时，显示的屏幕区域会发生变化，但文本会保持相同的大小。

# iphone - 复制 iOS iTunes 下载动画

> ID：11453911
> 
> 赞同：2
> 
> 时间：2012-07-12T14:20:49.440
> 
> 标签：iphone, objective-c, ios, animation, core-animation

当通过 iOS 上的 iTunes 应用程序购买歌曲时，用户点击“立即购买”，歌曲标题似乎从其单元格中“升起”，并以漂亮的动画形式出现在“下载”标签栏项目上。我认为这是通过 Core Animation 完成的，但我不确定具体调用什么 API 来实现类似的效果。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:18:36.847

这是给你的一些快速代码。在此示例中，UIImage 代表“购物车”。UILabel 代表“歌曲”。附上一个完整工作的项目链接。享受！:)

```
@interface AnimateViewController ()
@property(nonatomic) IBOutlet UIImageView * cartImage;
@property(nonatomic) IBOutlet UILabel * songLabel;
@end

@implementation AnimateViewController
@synthesize cartImage;
@synthesize songLabel;

- (IBAction) initiateAddToCart:(id)sender{

    static float const curvingIntoCartAnimationDuration = 1.0f;

    CALayer * layerToAnimate = self.songLabel.layer;

    CAKeyframeAnimation * itemViewCurvingIntoCartAnimation = [self itemViewCurvingIntoCartAnimation];
    CABasicAnimation * itemViewShrinkingAnimation =  [CABasicAnimation animationWithKeyPath:@"bounds"];
    itemViewShrinkingAnimation.toValue = [NSValue valueWithCGRect:CGRectMake(0.0,0.0, self.songLabel.bounds.size.width/1.5, self.songLabel.bounds.size.height/1.5)];
    CABasicAnimation * itemAlphaFadeAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    itemAlphaFadeAnimation.toValue = [NSNumber numberWithFloat:0.5];

    CAAnimationGroup * shrinkFadeAndCurveAnimation = [CAAnimationGroup animation];
    [shrinkFadeAndCurveAnimation setAnimations:[NSArray arrayWithObjects:
                                            itemViewCurvingIntoCartAnimation,
                                            itemViewShrinkingAnimation,
                                            itemAlphaFadeAnimation,
                                            nil]];
    [shrinkFadeAndCurveAnimation setDuration:curvingIntoCartAnimationDuration];
    [shrinkFadeAndCurveAnimation setDelegate:self];
    [shrinkFadeAndCurveAnimation setRemovedOnCompletion:NO];
    [shrinkFadeAndCurveAnimation setValue:@"shrinkAndCurveToAddToOrderAnimation" forKey:@"name"];
    [layerToAnimate addAnimation:shrinkFadeAndCurveAnimation forKey:nil];
}

- (CAKeyframeAnimation *) itemViewCurvingIntoCartAnimation {
    CGRect positionOfItemViewInView = self.songLabel.frame;

    float riseAbovePoint = 300.0f;

    CGPoint beginningPointOfQuadCurve = positionOfItemViewInView.origin;
    CGPoint endPointOfQuadCurve = CGPointMake(self.cartImage.frame.origin.x + self.cartImage.frame.size.width/2, self.cartImage.frame.origin.y + self.cartImage.frame.size.height/2) ;
    CGPoint controlPointOfQuadCurve = CGPointMake((beginningPointOfQuadCurve.x + endPointOfQuadCurve.x *2)/2, beginningPointOfQuadCurve.y -riseAbovePoint);

    UIBezierPath * quadBezierPathOfAnimation = [UIBezierPath bezierPath];
    [quadBezierPathOfAnimation moveToPoint:beginningPointOfQuadCurve];
    [quadBezierPathOfAnimation addQuadCurveToPoint:endPointOfQuadCurve controlPoint:controlPointOfQuadCurve];

    CAKeyframeAnimation * itemViewCurvingIntoCartAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    itemViewCurvingIntoCartAnimation.path = quadBezierPathOfAnimation.CGPath;

    return itemViewCurvingIntoCartAnimation;
}

@end 
```

这里 - 一个完整的 ARC/Storyboard 项目 -http://www.filehosting.org/file/details/359564/itunesanimation.zip

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:47:05.690

动画包含许多内容，例如获取您正在制作动画的视图的内容、缩放它、沿路径设置动画位置等。如果您打算将视图动画到标签栏项目或工具栏项目，那么有额外的问题是它们的帧不公开，因此您必须自己计算动画的结束位置。

我在[一篇博](http://ronnqvist.tumblr.com/post/23234805389/unobtrusive-hints-of-joy)文中完成了所有这些，我在其中复制了 iPhone 版 Safari 中的“后台打开”动画。这两个动画在视觉上非常相似，所以我相信你可以从这篇文章中学到很多东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T14:48:27.300

无需深入细节。CoreAnimation - 专门使用 CA 动画 UILabel 或单元格内的 UILabel 图像，沿着从单元格到选项卡栏的路径以弧形制作。您还可以对动画应用缩放变换，使其看起来像缩小到选项卡栏中。

网上有很多关于这个问题的教程。我建议拿一本关于 CoreAnimation 的书 - 检查它涵盖的内容 - 大多数都涵盖了绝对可以让您实现所需动画的基础知识。

希望这可以帮助。

# blackberry - 在 BlackBerry 中录制时分析实时音频

> ID：11453913
> 
> 赞同：1
> 
> 时间：2012-07-12T14:20:52.110
> 
> 标签：blackberry, java-me, audio-recording

我正在使用 StackOverflow 问题“ [J2ME/Blackberry - 获取音频信号幅度级别？](https://stackoverflow.com/questions/1497706/j2me-blackberry-get-audio-signal-amplitude-level) ”的答案来录制音频。但我无法实时分析音频。记录停止后我可以获得字节数组，但我想在记录数据时绘制数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:29:09.677

Java 中的实时处理是有问题的，但也是可能的。你可以看看我的[谷歌代码项目](http://code.google.com/p/blackberry-real-time-audio/)，它接受音频输入、计算 FFT 并在屏幕上显示频谱。这不是花哨的，但它确实有效。我相信您可以计算出如何测量音频幅度来代替 FFT。

# php - 如何使用php找到最暗的像素？

> ID：11453916
> 
> 赞同：3
> 
> 时间：2012-07-12T14:21:01.590
> 
> 标签：php, image, pixel

我怎样才能在我的图像中找到最暗的像素，图像中的出现率是最大的？所以要找到最暗的像素，我可以看到比其他像素更多的像素。在这里我建立在我的图像噪声上，并用白色着色，但是如何找到最暗的像素？我试图在 rgb 数组元素中找到女巫的出现是最大的，但是我发现了白色像素。这是我的代码的一部分：

```
<?php

    function components($color) {
      return array(($color >> 16) & 0xFF, ($color >> 8) & 0xFF, $color & 0xFF);
    }

    // Performs "similarity test" of 2 colors
    function isSimilar($color1, $color2) {
      $c1 = components($color1);
      $c2 = components($color2);
      for ($i = 0; $i < 3; $i++) {
        $k = ($c1[$i] > $c2[$i]) ? ($c1[$i] - $c2[$i]) / $c2[$i] : ($c2[$i] - $c1[$i]) / $c1[$i];
        if ($k > 0.35) return false;
      }
      return true;
    }

    function LoadJpeg($imgname)
    {
        $count = 0;
        /* Attempt to open */
        $im = @imagecreatefrompng($imgname);
        $imagedata = getimagesize($imgname);

        $n = $imagedata[0];
        $m = $imagedata[1];
        for($i=0; $i<$imagedata[0]; $i++){
            for($j=0; $j<$imagedata[1]; $j++){
                $rgb[$i][$j] = imagecolorat($im, $i, $j);
                //echo $rgb[$i][$j];
                //echo "<br>";
            }
        }

    /*    for ($k = 0; $k < $n; $k++)
        {
            for ($l = 0; $l < $m; $l++)
            {
                for ($i = 0; $i < $n; $i++)
                {
                    for ($j = 0; $j < $m; $j++)
                    {
                        if (($i+1 == $n) && ($j+1 == $m))
                        {
                            continue;
                        }
                        else
                        {
                            if ($j+1 == $m and $rgb[$i][$j] > $rgb[$i+1][0])
                            {
                                $t = $rgb[$i][$j];
                                $rgb[$i][$j] = $rgb[$i+1][0];
                                $rgb[$i+1][0] = $t;
                            }
                            else
                            {
                                if ($rgb[$i][$j] > $rgb[$i][$j+1])
                                {
                                    $t = $rgb[$i][$j];
                                    $rgb[$i][$j] = $rgb[$i][$j+1];
                                    $rgb[$i][$j+1] = $t;
                                }
                            }
                        }
                    }
                }
            }
        }*/

        for($i=0; $i<$imagedata[0]-3; $i++){
            for($j=0; $j<$imagedata[1]-3; $j++){
                if (isSimilar($rgb[$i][$j], $rgb[$i][$j + 3]) or isSimilar($rgb[$i][$j], $rgb[$i + 3][$j])) 
                {
                    #echo "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAa";
                    $count = $count + 1;
                    //echo "<br> <br>";
                    //echo $count;
                    //$red = imagecolorallocate($im, 255, 255, 255);

                    imagesetpixel($im, $i, $j, 16777215);
                    cropCentered($im,20,20);
                }                  

            }
        }

        return $im;
    }

    function cropCentered($img, $w, $h)
    {
      $cx = $img->getWidth() / 2;
      $cy = $img->getHeight() / 2;
      $x = $cx - $w / 2;
      $y = $cy - $h / 2;
      if ($x < 0) $x = 0;
      if ($y < 0) $y = 0;
      return $img->crop(0, 0, $w, $h);
    }

    header('Content-Type: image/jpeg');

    $img = LoadJpeg('1.png');

    imagejpeg($img,null, 100);

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:25:49.323

您要做的是设置一个变量来存储最暗的颜色。

然后，您循环遍历每个像素测试该像素是否比最暗颜色（存储在最暗颜色变量中）更暗。

如果像素较暗，则将其设置为等于最暗的颜色。

这样，最暗的颜色只会/总是被更深的颜色覆盖（如果有的话）。

```
$pixels = array(/*put colors that correspond to pixels here*/)
$darkest = $pixels[0];
for($i=0; $i<$count($pixels); $i++){
    if($pixels[$i] is darker than $darkest){ //you will have to figure out how to do that part
        $darkest = $pixels[$i];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:26:07.160

您需要使用不同于 RGB 的颜色模型 - 在这种情况下，HSL 很有用，因为它包含“亮度”组件。根据这个分量，我们可以判断某种颜色比另一种颜色更亮还是更暗。将 RGB 转换为 HSL 有多种方法，我使用了[Wikipedia 文章](http://en.wikipedia.org/wiki/HSV_color_space#Lightness)中描述的一种方法（参见 HSL“bi-hexcone”模型）：

```
<?php

// Returns whether c2 is darker than c1
function isDarker($c1, $c2) {
  // Find L (lightness) component in a HSL model
  $max1 = max($c1);
  $min1 = min($c1);
  $l1 = ($max1 + $min1) / 2;
  $max2 = max($c2);
  $min2 = min($c2);
  $l2 = ($max2 + $min2) / 2;

  // Compare colors based on L component (lower means darker)
  return $l2 < $l1;
}

// Assuming colors are stored in a 2-dimensional $rgb array
$rowCount = count($rgb);
$colCount = count($rgb[0]);
$darkest = $rgb[0][0];
for ($i = 0; $i < $rowCount; $i++) {
  for ($j = 0; $j < $colCount; $j++) {
    if (isDarker($darkest, $rgb[$i][$j])) {
      $darkest = $rgb[$i][$j];
      // Optionally you can save the indices $i and $j
    }
  }
} 
```

# android - Android 4.1 的简 单 XML

> ID：11453917
> 
> 赞同：1
> 
> 时间：2012-07-12T14:21:10.000
> 
> 标签：android, android-4.2-jelly-bean, simple-framework

我不知道为什么，但是一旦我添加了 simple-xml-2.6.4.jar 我的 android 项目，我就会得到一个 Davlik 错误。在我升级到 Android SDK 4.1 之前，它可以正常工作。（之前的 4.0.3）

我开始了一个新的 android 项目，只是添加了 lib，它立即坏了，所以它不是我项目中的其他东西。任何人现在有任何想法如何反序列化 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:22:18.900

起初我有一个使用 simple-xml 的项目，然后我们发现应用程序在将 xml 转换为对象时运行速度很慢。

我们花了一些时间调查并发现系统一直在进行 GC。当请求或响应包含更多数据时，每秒发生一次 GC。

无论如何，我们后来改用 SAX 并重新编写了所有的 xml 通信层，这导致了很多额外的工作。这是我的经验，希望对您有用，尽管它可能无法回答您的确切要求。

# asp.net - 尽管有 SessionStateBehaviour，但没有并发

> ID：11453933
> 
> 赞同：1
> 
> 时间：2012-07-12T14:22:19.343
> 
> 标签：asp.net, asp.net-mvc-3, session, httphandler, orchardcms

在我们的应用程序中，提供了一个页面，该页面随后应该对更多数据进行并行异步调用。这些呼叫正在排队，我读到使用同一会话的呼叫已排队，因为有多个请求写入同一会话可能会引起并发症。

我还读到控制器可以设置为无会话`[SessionState(SessionStateBehavior.Disabled)]`或者`[SessionState(SessionStateBehavior.ReadOnly)]`我们不需要写入会话。

我已经尝试过这些，因为我不需要写入会话，所以我认为请求将同时提供，或者如果我在没有意识到的情况下使用会话，则会引发异常。

这两种情况都不是。来自同一用户的请求仍在排队中。

如何验证我的指令`[SessionState(SessionStateBehavior.ReadOnly)]`是否得到遵守？什么可能导致这个问题？

如果它是相关的，我们正在[Orchard](http://orchardproject.net/)的背景下工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T18:29:13.943

在 Orchard 1.6 中，您可以将`SessionState`a 的属性设置`RouteDescriptor`为`SessionStateBehavior.ReadOnly`或`SessionStateBehavior.Disabled`。

因此，您需要做的就是在您的`Routes`类中创建一个新路由，该路由映射到您的控制器并具有上述之一`SessionStateBehaviors`。之后你不需要用`SessionState`属性装饰控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T14:40:37.943

这是因为用于每个 Orchard 路由请求的底层 HTTP 处理程序正在实现`IRequiresSessionState`接口。这就是每个请求实际上都排队的原因......

这是一个已知问题，我们将尝试在下一个 Orchard 版本中解决该问题，只要它不意味着重大更改。有几个核心功能（以及未知数量的外部自定义功能）依赖（或可能依赖）Session，因此简单地删除`IRequiresSessionState`接口不是一种选择。我们需要先重构一些东西并实现一些选择加入/退出机制。

# cognos - 条件页面显示的 Cognos 问题

> ID：11453934
> 
> 赞同：2
> 
> 时间：2012-07-12T14:22:21.933
> 
> 标签：cognos

我正在尝试根据 Cognos 10.1 中的提示有条件地显示页面。

我有一个带有下拉列表的提示页面，该页面由名为 PromptSQL 的查询填充。PromptSQL 返回一个包含两列 Value 和 Descr 的表。提示页面上的值提示已更改以下属性：

```
Query: PromptSQL
Use Value: Value
Display Value: Descr
Parameter: Location 
```

我创建了一个布尔变量 vShowPage，以确定是否应显示报告页面之一，即第 2 页。vShowPage 下的代码很简单：

```
?Location? in ('12', '15', '20') 
```

所以，如果选择的位置是 12、15 或 20，我只希望打印“第 2 页”页面。

然后，我在 Report Pages 下选择了“Page 2”，并将 vShowPage 关联到 Render Variable 属性。当我验证报告时，我收到以下错误：

> RSV-VAL-0032 以下表达式无效：？位置？在（'12'，'15'，'20'）中。如果该项目存在于查询中但未在布局中引用，则将其添加到属性列表中。CRX-API-0005 在位置“0”处或附近发生错误。名为“？位置？”的变量 是无效的。

我也尝试将变量更改为字符串变量，但列出所有可能的值会有问题。但即使我使用字符串变量进行的小测试也会导致同样的错误。

我尝试将 PromptSQL 添加到 Page 2 的 Query 属性并检查 Properties 属性下的 Value 列。我什至尝试检查 Value 和 Descr。这些都产生了相同的错误。

我使用 IBM 网站上的这个链接作为我的模板：[How To: Hide a report page based on a prompt](http://www-01.ibm.com/support/docview.wss?uid=swg21342081)

任何帮助解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:40:00.397

您不能使用提示值 ?Location? 在条件表达式中。请改用 ParamDisplayValue('Location') 或 ParamValue('Location')，例如：ParamValue('Location') in ('12','15','20')。

# android - 在 webview 中编辑 div 标签

> ID：11453936
> 
> 赞同：1
> 
> 时间：2012-07-12T14:22:27.400
> 
> 标签：android, webview

我正在尝试制作一个带有 web 视图的 Android 应用程序，其中我有一个 html 页面。这个包含一个`contentEditable`属性设置为 true 的“div”标签。

我的问题：通过启动应用程序，我无法编辑文本。

我一直在 Google 上进行大量搜索，但没有关于此主题的内容。我想知道是否缺少任何权限（作为清单中访问网络的权限），但我能够编辑输入和 textarea 标签（以及其他）。我参考了 WebView 的 API、WebViewClient、WebChromeClient，但我没有找到任何可以配置特定权限的方法来做到这一点。

webview是否了解该`contentEditable`属性？即使 webview 应该解释 html，它也不起作用。

我的活动：

```
public class WebAppStackOverFlowActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView webView = (WebView) findViewById(R.id.webView) ;
        webView.setWebChromeClient (new WebChromeClient()) ;
        webView.loadUrl("file:///android_asset/www/index.html") ;
    }
} 
```

我的`asset/www/index.html`文件：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <input id="name" value="this is an input tag" />
    <br />
    <div contenteditable="true">this is an editable div tag</div>
    <br />
    <textarea rows="" cols="">this is a textarea tag</textarea>
</body>
</html> 
```

我的`main.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:42:19.713

`contentEditable`[Android 3.0 (Honeycomb) 及更高版本 ( source](http://caniuse.com/#search=contentEditable) )上的默认浏览器支持。

所以，如果你在 Gingerbread 上运行它，就可以解释为什么它不起作用。

# php - 我可以将变量传递给 PHP GD 图像过滤器吗？

> ID：11453937
> 
> 赞同：0
> 
> 时间：2012-07-12T14:22:30.080
> 
> 标签：php, gd, imagefilter

我知道该`imagefilter`函数需要一个 long 但有没有办法将变量转换为 long 或者我被迫简单地为每个过滤器创建单独的函数。我的想法是这样的：

```
public function ImgFilter($filter, $arg1=null, $arg2=null){
    $this->lazyLoad();
    if($this->_cache_skip) return;
    if(isset($this->_image_resource)){
        imagefilter($this->_image_resource, $filter);
    }
} 
```

它在抱怨我的`$filter`变量。对于这个例子，我的`$filter`价值是：`IMG_FILTER_GRAYSCALE`

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:30:26.297

假如：

```
$filter = "IMG_FILTER_GRAYSCALE" 
```

您应该能够使用函数[常量](http://php.net/constant)：

```
imagefilter($this->_image_resource, constant($filter)); 
```

但是请注意，以下内容也可以正常工作：

```
$filter = IMG_FILTER_GRAYSCALE
imagefilter($this->_image_resource, $filter); 
```

如果需要，您可以毫无问题地将常量作为参数传递。前者仅在您确实需要动态常量名称时才有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:32:33.877

以下功能将满足您的需求：

```
public function ImgFilter($filter, $arguments = array())
{
    $this->lazyLoad();

    if ($this->_cache_skip) {
        return;
    }

    if (isset($this->_image_resource)) {
        $params = array($this->_image_resource, $filter);

        if (!empty($arguments)) {
            $params = array_merge($params, $arguments);
        }

        call_user_func_array('imagefilter', $params);
    }
} 
```

然后像这样使用它：

```
$this->ImgFilter(IMG_FILTER_GRAYSCALE);
$this->ImgFilter(IMG_FILTER_COLORIZE, array(0, 255, 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:30:39.087

铸造是这样进行的：

```
<holder> = (<type>) <expression>

$var = (int) "123"; 
```

# sockets - 异步客户端套接字 ManualResetEvent 阻止执行

> ID：11453939
> 
> 赞同：6
> 
> 时间：2012-07-12T14:22:37.203
> 
> 标签：sockets, asynchronous, client, manualresetevent

我正在尝试利用 MSDN 的[异步客户端套接字](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)代码示例来连接和控制一些家用设备。据我了解，示例代码的***ReceiveCallback***方法使用 EventWaitHandle [ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)的实例和方法[receiveDone.WaitOne()](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)来保持当前线程的处理，直到线程接收到所有套接字数据已从远程设备传输的信号. 传输完所有套接字数据后（套接字数据为空且*bytesRead = 0*），Waithandle 被移除，应用程序继续处理。

不幸的是，通过逐步执行代码，似乎在客户端最后一次从远程设备返回数据之后，*ReceiveCallback*永远不会返回查看数据队列是否为空（即 bytesRead = 0），因此永远不会在*ReceiveCallback*中进入*“else”*条件，其中***ManualResetEvent***的状态将被重置并且应用程序将继续处理。因此，由于它永远不会进入*“else”*条件，*ManualResetEvent*永远不会重置并且应用程序会冻结。

 ***虽然我可以从代码中删除“receiveDone.WaitOne()”方法——允许执行而无需等待*ManualResetEvent*通知已收到所有数据；这会从设备返回一个通常不完整的数据字符串。

我是否错误地使用了此代码示例？有没有人以前见过这个或有任何关于如何解决这个问题的经验？

**2012 年 7 月 14 日 - 更新：**在进一步测试 MSDN 的[异步客户端套接字示例](http://msdn.microsoft.com/en-us/library/bew39x2a)后，很明显*ReceiveCallback*实际上重新轮询端口，并且只有*在释放套接字*时才满足“bytesRead = 0”条件（即*客户端。关机（SocketShutdown.Both）；client.Close（）；*）。如果我理解正确，这意味着必须关闭连接才能通过 receiveDone.WaitOne() 方法。如果连接被关闭以满足 WaitOne() Waithandle，它完全违背了应用程序的目的，因为我一直希望保持连接打开，以便应用程序可以监听设备更新，这些更新会不断发生。

**2012 年 7 月 16 日 - 更新：**我已写信给**Microsoft 技术支持**，他们回复说***[“我们正在研究这个问题。我们可能需要一些时间才能回复您。”](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/e94d6348-ce27-4779-8130-39367aaeb2bc)*** 因此，目前似乎无法通过按摩此代码来解决此挑战。

*如果没有异步客户端套接字示例代码作为编写异步通信程序的基础，请问是否有人可以建议一个更可靠的替换例程？* 共有三台设备，每台都有自己的 IP 地址和端口号。因此，如果可以使用一个类，为每个设备创建一个实例，那将是理想的。此外，端口必须保持打开状态才能接收设备不断发送的自发更新。最后，更新没有结束字符或定义的长度表示消息传输完成，因此例程必须不断轮询端口以获取可用数据。 ***任何意见或建议将不胜感激。***

**2012 年 7 月 18 日 - 解决方法：**在花费大量时间尝试使**MSDN 的异步客户端套接字**代码示例正常工作后，很明显我必须寻找其他地方才能让程序持续识别设备响应。为了挽救其他人的脑损伤，我已经包含了我使用的解决方法，到目前为止似乎效果很好。如果有人有任何建议，请不要犹豫，添加到这个问题！

```
// 
// ORIGINAL CODE ATTEMPT
//
public static Socket LutronClient;
public static String LutronResponse = String.Empty;
private const int LutronPort = 4999;
private const string LutronIP = "192.168.1.71";
private static ManualResetEvent LutronConnectDone = new ManualResetEvent(false);
private static ManualResetEvent LutronSendDone = new ManualResetEvent(false);
private static ManualResetEvent LutronReceiveDone = new ManualResetEvent(false);

private static void StartLutronClient()
    {
        try
        {
            var lutronIPAddress = IPAddress.Parse(LutronIP);
            var lutronRemoteEP = new IPEndPoint(lutronIPAddress, LutronPort);
            LutronClient = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            LutronClient.BeginConnect(lutronRemoteEP, LutronConnectCallback, LutronClient);
            LutronConnectDone.WaitOne();

            LutronSend(LutronClient, "sdl,14,100,0,S2\x0d");
            LutronSendDone.WaitOne();
            LutronReceive(LutronClient);
            LutronReceiveDone.WaitOne(new TimeSpan(5000));
            MessageBox.Show("Response received from Lutron: " + LutronResponse);
            txtBoxLutron.Text = LutronResponse;

            LutronClient.Shutdown(SocketShutdown.Both);
            LutronClient.Close();
        }
        catch (Exception e) { MessageBox.Show(e.ToString()); }
    }

    private static void LutronConnectCallback(IAsyncResult lutronAr)
    {
        try
        {
            var lutronClient = (Socket)lutronAr.AsyncState;
            lutronClient.EndConnect(lutronAr);
            LutronConnectDone.Set();
        }
        catch (Exception e) { MessageBox.Show(e.ToString()); }
    }

    private static void LutronReceive(Socket lutronClient)
    {
        try
        {
            var lutronState = new LutronStateObject { LutronWorkSocket = lutronClient };
            lutronClient.BeginReceive(lutronState.LutronBuffer, 0, LutronStateObject.BufferSize, 0, new AsyncCallback(LutronReceiveCallback), lutronState);
        }
        catch (Exception e) { MessageBox.Show(e.ToString()); }
    }

    private static void LutronReceiveCallback(IAsyncResult lutronAR)
    {
        try
        {
            var lutronState = (LutronStateObject)lutronAR.AsyncState;
            var lutronClient = lutronState.LutronWorkSocket;
            var bytesRead = lutronClient.EndReceive(lutronAR);
            if (bytesRead > 0)
            {
                lutronState.LutronStringBuilder.AppendLine(Encoding.ASCII.GetString(lutronState.LutronBuffer, 0, bytesRead));
                lutronClient.BeginReceive(lutronState.LutronBuffer, 0, LutronStateObject.BufferSize, 0, new AsyncCallback(LutronReceiveCallback), lutronState);
            }
            else
            {
                if (lutronState.LutronStringBuilder.Length > 0) { LutronResponse = lutronState.LutronStringBuilder.ToString(); }
                LutronReceiveDone.Set();
            }
        }
        catch (Exception e) { MessageBox.Show(e.ToString()); }
    }

    public static void LutronSend(Socket client, String data)
    {
        var byteData = Encoding.ASCII.GetBytes(data);
        client.BeginSend(byteData, 0, byteData.Length, 0, LutronSendCallback, client);
    }

    private static void LutronSendCallback(IAsyncResult ar)
    {
        try
        {
            var client = (Socket)ar.AsyncState;
            var bytesSent = client.EndSend(ar);
            LutronSendDone.Set();
        }
        catch (Exception e) { MessageBox.Show(e.ToString()); }
    }
    public class LutronStateObject
    {
        public Socket LutronWorkSocket;
        public const int BufferSize = 256;
        public byte[] LutronBuffer = new byte[BufferSize];
        public StringBuilder LutronStringBuilder = new StringBuilder();
    }

} 
```

**这是我使用的解决方法：**

```
 //
 // WORK-AROUND
 //
 using System;
 using System.Windows.Forms;

 namespace _GlobalCacheInterface
 {
     public partial class GlobalCacheDataScreen : Form
     {

         //Interface objects
         private static GC_Interface _lutronInterface;
         private const int LutronPort = 4999;
         private const string LutronIP = "192.168.1.71";
         delegate void ThreadSafeLutronCallback(string text);

         private static GC_Interface _elanInterface;
         private const int ElanPort = 4998;
         private const string ElanIP = "192.168.1.70";
         delegate void ThreadSafeElanCallback(string text);

         private static GC_Interface _tuneSuiteInterface;
         private const int TuneSuitePort = 5000;
         private const string TuneSuiteIP = "192.168.1.70";
         delegate void ThreadSafeTuneSuiteCallback(string text);

         public GlobalCacheDataScreen()
         {
              InitializeComponent();

              _lutronInterface = new GC_Interface(LutronIP, LutronPort);
              _elanInterface = new GC_Interface(ElanIP, ElanPort);
              _tuneSuiteInterface = new GC_Interface(TuneSuiteIP, TuneSuitePort);

             // Create event handlers to notify application of available updated information.
             _lutronInterface.DataAvailable += (s, e) => ThreadSafeTxtBoxLutron(_lutronInterface._returnString);
             _elanInterface.DataAvailable += (s, e) => ThreadSafeTxtBoxElan(_elanInterface._returnString);
             _tuneSuiteInterface.DataAvailable += (s, e) => ThreadSafeTxtBoxTuneSuite(_tuneSuiteInterface._returnString);
             _lutronInterface.Connected += (s, e) => UpdateUI();
             _elanInterface.Connected += (s, e) => UpdateUI();
             _tuneSuiteInterface.Connected += (s, e) => UpdateUI();

             UpdateUI();
         }

         private void UpdateUI()
         {
             _buttonConnectToLutron.Enabled = !_lutronInterface._isConnected;
             _buttonConnectToElan.Enabled = !_elanInterface._isConnected;
             _buttonConnectToTuneSuite.Enabled = !_tuneSuiteInterface._isConnected;
             _buttonDisconnectFromLutron.Enabled = _lutronInterface._isConnected;
             _buttonDisconnectFromElan.Enabled = _elanInterface._isConnected;
             _buttonDisconnectFromTuneSuite.Enabled = _tuneSuiteInterface._isConnected;
             string connectLutronStatus = _lutronInterface._isConnected ? "Connected" : "Not Connected";
             string connectElanStatus = _elanInterface._isConnected ? "Connected" : "Not Connected";
             string connectTuneSuiteStatus = _tuneSuiteInterface._isConnected ? "Connected" : "Not Connected";
             _textBoxLutronConnectStatus.Text = connectLutronStatus;
             _textBoxElanConnectStatus.Text = connectElanStatus;
             _textBoxTuneSuiteConnectStatus.Text = connectTuneSuiteStatus;
         }

         private void ThreadSafeTxtBoxLutron(string message) { if (_lutronRichTextRxMessage.InvokeRequired) { var d = new ThreadSafeLutronCallback(ThreadSafeTxtBoxLutron); _lutronRichTextRxMessage.Invoke(d, new object[] { message }); } else { _lutronRichTextRxMessage.Text = message; } }     
         private void ThreadSafeTxtBoxElan(string message) { if (_elanRichTextRxMessage.InvokeRequired) { var d = new ThreadSafeElanCallback(ThreadSafeTxtBoxElan); _elanRichTextRxMessage.Invoke(d, new object[] { message }); } else { _elanRichTextRxMessage.Text = message; if (message.EndsWith("\r")) { MessageBoxEx.Show(message, "Message from Lutron Elan", 1000); } } }
         private void ThreadSafeTxtBoxTuneSuite(string message) { if (_tuneSuiteRichTextRxMessage.InvokeRequired) { var d = new ThreadSafeTuneSuiteCallback(ThreadSafeTxtBoxTuneSuite); _tuneSuiteRichTextRxMessage.Invoke(d, new object[] { message }); } else { _tuneSuiteRichTextRxMessage.Text = message; if (message.EndsWith("\r")) { MessageBoxEx.Show(message, "Message from TuneSuite", 1000); } } }

         private void _buttonConnectToLutron_Click(object sender, EventArgs e) { _lutronInterface.Connect(); }
         private void _buttonDisconnectFromLutron_Click(object sender, EventArgs e) { _lutronInterface.Disconnect(); }
         private void _buttonConnectToElan_Click(object sender, EventArgs e) { _elanInterface.Connect(); }
         private void _buttonDisconnectFromElan_Click(object sender, EventArgs e) { _elanInterface.Disconnect(); }
         private void _buttonConnectToTuneSuite_Click(object sender, EventArgs e) { _tuneSuiteInterface.Connect(); }
         private void _buttonDisconnectFromTuneSuite_Click(object sender, EventArgs e) { _tuneSuiteInterface.Disconnect(); }
         private void _buttonLutronSendMessage_Click(object sender, EventArgs e) { _lutronInterface.SendCommand(_lutronRichTextTxMessage.Text); }
         private void _buttonElanSendMessage_Click(object sender, EventArgs e) { _elanInterface.SendCommand(_elanRichTextTxMessage.Text); }
         private void _buttonTuneSuiteSendMessage_Click(object sender, EventArgs e) { _tuneSuiteInterface.SendCommand(_elanRichTextTxMessage.Text); }
         private void _buttonLightOn_Click(object sender, EventArgs e) { _lutronInterface.SendCommand("sdl,14,100,0,S2"); }
         private void _buttonLightOff_Click(object sender, EventArgs e) { _lutronInterface.SendCommand("sdl,14,0,0,S2"); }
         private void _buttonStereoOnOff_Click(object sender, EventArgs e) { _elanInterface.SendCommand("sendir,4:3,1,40000,4,1,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,181,21,800"); }
         private void _button30_Click(object sender, EventArgs e) { _tuneSuiteInterface.SendCommand("\xB8\x4D\xB5\x33\x30\x00\x30\x21\xB8"); }
         private void _button31_Click(object sender, EventArgs e) { _tuneSuiteInterface.SendCommand("\xB8\x4D\xB5\x33\x31\x00\x30\x21\xB8"); }
         private void _button26_Click(object sender, EventArgs e) { _tuneSuiteInterface.SendCommand("\xB8\x4D\xB5\x32\x36\x00\x30\x21\xB8"); }
     }
 } 
```

**和 GC_Interface 类：**

```
 using System;
 using System.Net;
 using System.Net.Sockets;
 using System.Text;
 using System.Windows.Forms;

 namespace _GlobalCacheInterface
 {
     class GC_Interface
     {
         // Declare an event handler to notify when updates are available.
         public event EventHandler<EventArgs> DataAvailable;
         public string _returnString = "";

         // Declare an event handler to notify status of connection.
         public event EventHandler<EventArgs> Connected;
         public bool _isConnected;

         public AsyncCallback ReceiveCallback;
         public Socket Client;
         private string _ipAddress;
         private int _port;
         private bool _waitForEndCharacter;
         private byte _endCharacter;
         byte[] m_DataBuffer = new byte[10];
         IAsyncResult m_Result;

         public GC_Interface(string ipAddress, int port) { Init(ipAddress, port, false, 0); }

         private void Init(string ipAddress, int port, bool waitForEndCharacter, byte endCharacter)
         {
             _ipAddress = ipAddress;
             _port = port;
             _waitForEndCharacter = waitForEndCharacter;
             _endCharacter = endCharacter;
             _isConnected = false;
         }

         public bool Connect()
         {
             try
             {
                 // Create a TCP/IP socket.
                 Client = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

                 // Establish the remote endpoint for the socket.
                 var address = IPAddress.Parse(_ipAddress);
                 var remoteEP = new IPEndPoint(address, _port);

                 // Connect to the remote endpoint.
                 Client.Connect(remoteEP);
                 if (Client.Connected)
                 {
                     _isConnected = true;
                     ConnectedEventHandler();
                     WaitForData();
                 }
                 return true;
             }
             catch (SocketException se) { MessageBox.Show("\n connection failed, is the server running?\n" + se.Message ); return false; }
         }
         public bool SendCommand(string command)
         {
             try
             {
                 // Convert the string data to byte data using ASCII encoding.
                 var byteData = Encoding.Default.GetBytes(command);
                 // Add a carraige-return to the end.  
                 var newArray = new byte[byteData.Length + 1];
                 byteData.CopyTo(newArray, 0);
                 newArray[newArray.Length - 1] = 13;
                 if (Client == null) { return false; }
                 Client.Send(newArray);
                 return true;
             }
             catch (SocketException se) {  MessageBox.Show(se.Message); return false;  }
         }
         public void WaitForData()
         {
             try
             {
                 if (ReceiveCallback == null) { ReceiveCallback = new AsyncCallback(OnDataReceived); }
                 var theSocPkt = new SocketPacket { thisSocket = Client };
                 m_Result = Client.BeginReceive(theSocPkt.DataBuffer, 0, theSocPkt.DataBuffer.Length, SocketFlags.None, ReceiveCallback, theSocPkt);
             }
             catch (SocketException se) { MessageBox.Show(se.Message); }
         }
         public class SocketPacket
         {
             public System.Net.Sockets.Socket thisSocket;
             public byte[] DataBuffer = new byte[1];
         }
         public void OnDataReceived(IAsyncResult asyn)
         {
             try
             {
                  SocketPacket theSockId = (SocketPacket)asyn.AsyncState;
                 var iRx = theSockId.thisSocket.EndReceive(asyn);
                 char[] Chars = new char[iRx + 1];
                 System.Text.Decoder d = System.Text.Encoding.UTF8.GetDecoder();
                 int CharLen = d.GetChars(theSockId.DataBuffer, 0, iRx, Chars, 0);
                 System.String szData = new System.String(Chars);
                 _returnString = _returnString + szData.Replace("\0", "");
                 // When an update is received, raise DataAvailable event
                 DataAvailableEventHandler();
                 WaitForData();
             }
             catch (ObjectDisposedException) { System.Diagnostics.Debugger.Log(0, "1", "\nOnDataReceived: Socket has been closed\n"); }
             catch (SocketException se) { MessageBox.Show(se.Message); }
         }
         public bool Disconnect()
         {
              try
              {
                  if (Client == null) { return false; }
                  Client.Close(); 
                  Client = null;
                  _isConnected = false;
                  return true;
              }
              catch (Exception) { return false; }
         }
         protected virtual void DataAvailableEventHandler()
         {
             var handler = DataAvailable;
             if (handler != null) { handler(this, EventArgs.Empty); }
         }
         protected virtual void ConnectedEventHandler()
         {
             var handler = Connected;
             if (handler != null) { handler(this, EventArgs.Empty); }
         }

     }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:57:10.057

我遇到了同样的问题，在代码中添加了一个可用的检查来解决我的问题。下面是修改后的代码。

```
private static void ReceiveCallback( IAsyncResult ar ) {
        try {
            StateObject state = (StateObject) ar.AsyncState;
            Socket client = state.workSocket;

            int bytesRead = client.EndReceive(ar);
            if (bytesRead > 0) {
                state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead));
                // Check if there is anymore data on the socket
                if (client.Available > 0) {
                    client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0, new AsyncCallback(ReceiveCallback), state);
                }
            }

            if (bytesRead == 0 || client.Available == 0) {
                if (state.sb.Length > 1) {
                    response = state.sb.ToString();
                }
                receiveDone.Set();
            }
        } catch (Exception e) {
            Console.WriteLine(e.ToString());
        }
    } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:32:33.570

我在这里回避这个问题。我尝试回答您的需求，而不是您的要求：

使用同步代码。它会更容易理解，您不需要回调或事件。此外，对于低线程数，它可能会执行得更好。

您还可以避免当前代码中存在的错误。如果发生异常，您的计算永远不会完成。同步代码没有这个问题。***

# shipping - 打印运输标签

> ID：11453940
> 
> 赞同：-3
> 
> 时间：2012-07-12T14:22:42.877
> 
> 标签：shipping, labels, fedex, ups, usps

好的，我正在寻求 SOF 社区关于打印运输标签的最佳方法的一些帮助。我们希望能够在我们的网站上填写一份表格，其中包含我们需要的所有信息，然后能够单击该表格中的按钮并被带到 UPS、USPS 或 FedEx 网站以打印运输标签并拥有我们表单中的所有信息都已预先填充。然后客户可以从供应商处购买标签并打印。

有人有这方面的经验吗？你发现谁有最简单的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:25:40.027

不是像[Fedex 开发者资源中心](http://www.fedex.com/us/developer/)或[UPS 开发者工具包](https://www.ups.com/upsdeveloperkit?loc=en_US)这样的东西有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T17:52:47.737

目前我正在为我们的一个客户开发这两种 API，FedEx 无疑是一个非常全面的 API，提供了非常详细的开发人员指南和示例代码。您可以使用 API 创建任何类型的标签，甚至可以根据需要自定义标签，尽管它的示例在 c# 中不可用

UPS 开发人员指南简单易行，但没有那么详细，与 FedEx 相比，API 的功能较少，例如您不能自定义标签。

希望这可以帮助。

# backbone.js - 在 Backbone.js 中创建复选框列表

> ID：11453941
> 
> 赞同：1
> 
> 时间：2012-07-12T14:22:44.257
> 
> 标签：backbone.js, underscore.js

我想创建一个包含文本字段和复选框列表的表单。

使用带有[`_.each()`](http://underscorejs.org/#each)语句的下划线模板函数，我可以得到它的呈现。

当我单击保存按钮时，我得到了模型（带有文本字段），但复选框的数组不在它应该在的位置......

这是我的视图模型：

```
window.SpotEditView= Marionette.View.extend({

    initialize: function () {
        var featureList = ['Rail', 'Curb','Pipe'];
        //this.el = this.compiledTemplate(this.model.toJSON());
        var viewModel = this.model.toJSON();
        viewModel.features = featureList;

        $(this.el).html( _.template(htmlBody, viewModel));
        return;
    },

    render: function () {
        return this;
    },

    events: {
        "change"        : "change",
        "click .save"   : "beforeSave",
        "click .delete" : "delete",
        "drop #picture" : "dropHandler"
    },

    beforeSave: function () {
        var self = this;
        var check = this.model.validateAll();
        if (check.isValid === false) {
            utils.displayValidationErrors(check.messages);
            return false;
        }
        // Upload picture file if a new file was dropped in the drop area
        if (this.pictureFile) {
            this.model.set("picture", this.pictureFile.name);
            utils.uploadFile(this.pictureFile,
                function () {
                    self.save();
                }
            );
        } else {
            self.save();
        }
        return false;
    },

    save: function () {
        var self = this;
        this.model.save(null, {
            success: function (model) {
                self.render();
                var point = model.toMarker();
                app.mapView.model.markers.add(point);
                app.navigate('map', true);
                app.mapView.openInfo(point);

            },
            error: function () {
                utils.showAlert('Error', 'An error occurred while trying to save this item', 'alert-error');
            }
        });
    }
}); 
```

这是我的 html 模板的相关部分：

```
<% _.each(features, function(f,key) { %>
<label class="checkbox">
    <input type="checkbox" name="features[<%= key-1 %>]" value="<%= f %>">
    <%= f %>
</label>
<% }); %> 
```

保存函数接收的模型如下所示：

```
{..
    attributes:{ ...
        features:[],
        features[1]:'Dick',
        ...
    }
} 
```

似乎主干“表单解析器”无法处理数组。

这种方法有修复或更好的解决方案吗？

# c# - 存储对象字符串引用

> ID：11453942
> 
> 赞同：1
> 
> 时间：2012-07-12T14:22:46.907
> 
> 标签：c#, string, pointers

我认为这个问题在 C# 中被问过很多次，但我的问题可能更容易解决。
我有一个对象值作为字符串：`myobject.value`并且我想将此值存储在队列（或其他任何东西）中以便以后访问它。是否可以？

我读了很多帖子说不可能将引用存储到字符串中。我没有看到任何解决方案可以将 ref 存储到我的字符串值`myobject.value`并稍后更改它。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:25:47.310

如果您想存储对人们可以看到并共享您的更改的字符串的引用，则需要将其包装在一个类中：

```
public class Wrapper<T>
{
    public T Item { get; set; }
} 
```

然后人们使用它而不是字符串：

```
class MyClass
{
    public Wrapped<string> SharedString { get; set; } 
}

var c1 = new MyClass();
var c2 = new MyClass();

var s = new Wrapped<string> { Item = "Hello" };

c1.SharedString = s;
c2.SharedString = s;

c1.SharedString.Item = "World";
Console.Writeline(c2.SharedString.Item); 
```

尽管字符串是引用类型，但它们是不可变的，因此需要“复制”周围的更改。共享是这种方式不会改变不变性，它只是集中保存每个人都通过引用查看的字符串的一个副本`Wrapped<string>`。

您可以`Wrapped<T>`进一步学习该课程并为其提供隐式强制转换支持 to 和 from `T`，以获得一点语法糖：

```
public static implicit operator T(Wrapped<T> wrapper)
{
    return wrapper.Item;
}

public static implicit operator Wrapped<T>(T item)
{
    return new Wrapped<T> { Item = item };
}

Wrapped<int> i = 2;
int j = i;

// Careful, this is a re-assignment of s, not a change of s.Item.
Wrapped<string> s = "Hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:28:55.913

如果我理解正确，并且`myobject.value`是 a `string`，那么您当然可以存储代表这些值的集合

```
List<string> strLst = new List<string>();
strLst.Add(`myobject.value`); 
```

不，您不能将引用存储为字符串，也不应该这样做，但是如果您确实需要，您可以创建一个字符串（或 xml）来表示有关您的对象的所有信息。

# javascript - 如何在Javascript中获取日文字符的长度？

> ID：11453944
> 
> 赞同：7
> 
> 时间：2012-07-12T14:22:50.513
> 
> 标签：javascript, unicode, asp-classic, cjk, shift-jis

我有一个带有 SHIFT_JIS 字符集的 ASP 经典页面。页面head部分下的meta标签是这样的：

```
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis"> 
```

我的页面有一个文本框 (txtName)，它应该只允许 200 个字符。我有一个验证字符长度的 Javascript 函数，该函数在我的提交按钮的 onclick() 事件中调用。

```
if(document.frmPage.txtName.value.length > 200) {
  alert("You have exceeded the maximum length of 200.");
  return false;
} 
```

问题是，Javascript 没有获得以 SHIFT_JIS 编码的正确长度的日文字符。例如，字符测的 SHIFT_JIS 长度为 8 个字符，但 Javascript 仅将其识别为一个字符，可能是因为 Javascript 默认使用的 Unicode 编码。在 SHIFT_JIS 中，某些字符（如 ケ）有 2 或 3 个字符。

如果我只依赖 Javascript 提供的长度，长日文字符将通过页面验证并尝试保存在数据库中，然后由于 DB 列的最大长度为 200 而失败。

我使用的浏览器是 Internet Explorer。有没有办法使用 Javascript 获取日文字符的 SHIFT_JIS 长度？是否可以使用 Javascript 从 Unicode 转换为 SHIFT_JIS？如何？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T09:10:23.083

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:09:27.387

您在字符和字节之间感到困惑。测是一个字符，但是你看它。在 UTF-16（这是 Javascript 使用的）中，它是两个字节。在 Shift_JIS 中，显然是 8 个字节。但在这两种情况下，它都是一个角色。因此，您要做的是将文本长度限制为 200 **BYTES**。由于 Javascript 使用的是 UTF-16（实际上是 UCS-2），您可以通过将字符串长度乘以 2 来获得它的字节长度，但这对 Shift_JIS 没有帮助。再说一次，如果你正在使用 Javascript，你可能应该考虑切换到 Unicode...

# rest - RESTful - GET 或 POST - 怎么办？

> ID：11453945
> 
> 赞同：0
> 
> 时间：2012-07-12T14:22:55.067
> 
> 标签：rest, xmlhttprequest, restful-architecture

我正在开发一个我想成为 RESTful 的 Web 服务。我知道 CRUD 做事的方式，但我有一些我不完全清楚的事情。所以是这样的：

我有一个跟踪服务，它在浏览器（客户端）中收集一些数据，然后将其发送到跟踪服务器。有两种情况，一种存在配置文件，另一种不存在。最后，服务返回一些必须注入 DOM 的元素。

所以基本上我需要2个网络服务：

1.  [http://mydomain.tld/profiles/](http://mydomain.tld/profiles/)
2.  [http://mydomain.tld/elements/](http://mydomain.tld/elements/)

问题 1：现在我只使用 GET，但我重写了服务器以支持 CRUD。所以在这种情况下，如果配置文件不存在，我必须使用 POST。[http://mydomain.tld/profiles/ 之](http://mydomain.tld/profiles/)类的东西，然后是 POST 有效负载具有要保存的信息。如果配置文件存在，我使用 PUT 和[http://mydomain.tld/profiles/](http://mydomain.tld/profiles/) / 并且 PUT 的有效负载有数据要保存。一切都很好，但问题是据我了解，xmlhttp 不支持 PUT。现在可以使用 POST 即使它是更新？

问题 2：如前所述，当制作轨道时，我的服务会返回一些要注入 DOM 的元素。从逻辑上讲，为了保持 RESTful，我想我必须使用 POST/PUT 来更新配置文件，然后 GET 来获取要注入的元素。但是为了节省服务器端的带宽和资源，将带有 POST/PUT 的元素返回到配置文件更有意义，即使它是不同的资源。你对此有何看法？

BR/太阳

编辑：

问题 3：在某些情况下，我只想更新配置文件而不接收回元素。我是否仍然可以使用相同的资源，然后使用有效负载参数来指定我是否想要元素，例如“dont_receive_elements:true”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:44:06.027

关于问题 #1，您确定 xmlhttp 不支持“put”吗？我刚刚在三个浏览器（Chrome、Firefox、IE）上运行了[http://www.mnot.net/javascript/xmlhttprequest/](http://www.mnot.net/javascript/xmlhttprequest/)，根据输出，“put”在所有浏览器上都成功了。根据[http://www.slideshare.net/apigee/rest-design-webinar](http://www.slideshare.net/apigee/rest-design-webinar)上的信息（我强烈建议您查看有关 restful API 的许多 Apigee 视频和幻灯片），对于您提到的用例，建议使用“put” .

但是您可以通过对数据稍有不同的想法来完全避免这个问题。是否可以考虑您有一个配置文件，并且对于每个配置文件您有 0 组或更多组有效负载信息？在此模型中，两种情况是：1\. 不存在配置文件，在 .../profiles/ 上创建带有 POST 的配置文件，然后将带有帖子的元素/跟踪数据添加到 .../profile/123/tracks/ （或 ... /profile/123/elements/) 2.配置文件存在，只需添加元素/跟踪数据

（抱歉没有详细了解您的模型，很难非常精确）。

至于问题 #2 - 使用配置文件具有 0 个或更多元素的数据模型，您可以更新配置文件（添加必要的元素），然后返回更新的配置文件（及其完整的元素图），为您节省任何额外的得到。

更笼统地说，关于问题 #2，作为 API 的开发人员，您在 REST 世界中拥有相当多的自由——如果您专注于让 API 的消费者变得简单明了，那么您可能没问题。

底线：查看 www.apigee.com - 他们知道的比我多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:02:44.083

@Richard - 非常感谢您的链接和反馈。我得出的解决方案是按照您在评论中的建议使 API 简单干净，对每个资源进行单独调用。

然后为了能够节省带宽并保持性能，我在 API 中创建了一个“非官方”函数，它在内部像代理一样工作，并使用单个 GET 调用，更新配置文件并返回一个元素。我知道，这不是很安静等，但它可以处理我的情况并且不是官方 API 的一部分。我需要它来支持 GET 的原因是我需要从 javascript 和跨域调用它。

我想我可以通过使用 JSONP 解决跨域问题，但我仍然必须使 API “不干净”:)

# ios - 如何理解这次崩溃？: SIGBUS BUS_ADRALN

> ID：11453948
> 
> 赞同：5
> 
> 时间：2012-07-12T14:23:04.430
> 
> 标签：ios, crash, crash-reports, sigbus

那在堆栈跟踪中，我不明白这个错误：

```
0   CoreFoundation  0x30f57648 ___CFBasicHashFindBucket_Linear_NoCollision + 92  
1   CoreFoundation  0x30f59688 __CFBasicHashAddValue + 692
2   CoreFoundation  0x30eaff9f CFDictionarySetValue + 74
3   UIKit   0x35721a0b -[UITouchesEvent _gestureRecognizersForWindow:] + 282
4   UIKit   0x357215d5 -[UIWindow _sendGesturesForEvent:] + 28
5   UIKit   0x357214ab -[UIWindow sendEvent:] + 66
6   UIKit   0x3570a313 -[UIApplication sendEvent:] + 298
7   UIKit   0x35709c53 _UIApplicationHandleEvent + 5090
8   GraphicsServices    0x31a11e77 PurpleEventCallback + 666
9   CoreFoundation  0x30f1ba97     __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 26
10  CoreFoundation  0x30f1d83f __CFRunLoopDoSource1 + 166
11  CoreFoundation  0x30f1e60d __CFRunLoopRun + 520
12  CoreFoundation  0x30eaeec3 CFRunLoopRunSpecific + 230
13  CoreFoundation  0x30eaedcb CFRunLoopRunInMode + 58
14  GraphicsServices    0x31a1141f GSEventRunModal + 114
15  GraphicsServices    0x31a114cb GSEventRun + 62
16  UIKit   0x35734d69 -[UIApplication _run] + 404
17  UIKit   0x35732807 UIApplicationMain + 670
18  AppName 0x00002e3b 0x1000 + 7739 
```

崩溃有时会发生，我不知道它会发生什么样的动作。

我怎样才能理解这个问题并能解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T23:02:36.123

我认为问题可能是您正在为多个基于 UIView 的对象重新使用手势对象。它们不能重复使用。我过去也遇到过类似的问题（不完全相同的崩溃）。它的文档突出了限制。我想有一个内部状态（在崩溃中看到的哈希表）以不同的基于 UI 视图的对象的冲突方式更新。

如果您不重新使用它们，请尝试暂时删除所有这些以确认系统是否稳定。

# c# - 在对象资源管理器中创建自定义菜单项

> ID：11453949
> 
> 赞同：1
> 
> 时间：2012-07-12T14:23:05.653
> 
> 标签：c#, .net, ssms, ssms-addin

**基本问题是如何在 Sql Server Management Studio 的对象资源管理器中创建自定义菜单项？**

![在此处输入图像描述](../Images/7671d79b7dca1900600a77db046f9c8e.png)

实际上我想要实现的是创建菜单项，它将执行为：

1.  为用户右键单击的表创建 CRUD 存储过程。
2.  可能还有其他东西，比如删除重复记录。

执行模块可以是外部用 C#.NET 编写的

我已经检查了[SSMS 插件](http://ssmsaddins.codeplex.com/)，但我认为它与我正在寻找的不同..（如果我错了，请纠正我）

我希望我现在已经足够清楚了！![:D](../Images/0e0f7f27ca410b624ff4d5d4e7939678.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:44:00.503

以下是一些帮助您入门的链接：

[创建 SSMS 插件](http://blogs.microsoft.co.il/blogs/shair/archive/2008/07/28/how-to-create-sql-server-management-studio-addin.aspx)

[使用加载项扩展 SQL Server 2005 Management Studio 中的功能](http://www.jasinskionline.com/TechnicalWiki/Extend-Functionality-In-SQL-Server-2005-Management-Studio-With-Add-ins.ashx?AspxAutoDetectCookieSupport=1)

SQL 2008 R2 的一些陷阱

[SQL 2008 R2 破坏了 SSMS 插件](https://www.sqlskills.com/blogs/jonathan/sql-server-2012-extended-events-add-in-to-manage-2008r2-instances/)

# android - 坐标处的视图 ID

> ID：11453958
> 
> 赞同：4
> 
> 时间：2012-07-12T14:23:33.850
> 
> 标签：android, view, coordinate

在给定的像素位置，有一个视图。我有像素的坐标。如何在给定坐标处找到视图的 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:47:20.837

如果你在里面`ViewGroup`：

```
int count = viewgroup.getChildCount();
for (int i = 0; i < count; i++)
{
   View view = viewgroup.getChildAt(i);
   if (view.getX() == theX && view.getY() == theY)
          return view.getId()
} 
```

**编辑（kcoppock）：**在 for 循环中，我会做这样的事情：

```
View view = viewgroup.getChildAt(i);
if(!view.getVisibility() == View.VISIBLE) continue;
int[] location = {0, 0};
view.getLocationOnScreen(location);
int right = location[0] + view.getWidth();
int bottom = location[1] + view.getHeight();
Rect bounds = new Rect(location[0], location[1], right, bottom);
if(bounds.contains(coordinatesX, coordinatesY)) return view.getId(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:38:23.917

我认为这样的事情应该有效：

1.  遍历您的视图层次结构以查找可见的子视图（即没有子视图的子视图）。

2.  在视图上使用 View.getLocationOnScreen() 来检索它们的位置（顶部/左侧窗口坐标）

3.  使用 getMeasuredWidth() / getMeasuredHeight() 获取视图的宽度和高度

4.  看看你的像素坐标是否在这个矩形内

# extjs4.1 - ExtJs 4.1 TreeGrid 树列自定义渲染器

> ID：11453962
> 
> 赞同：1
> 
> 时间：2012-07-12T14:23:45.597
> 
> 标签：extjs4.1

当其中之一是 xtype 'treecolumn' 时，是否可以合并 TreeGrid 中的 2 列？

现在我有 2 个单独的列，一个是标准树列，第二个是带有自定义模板的模板列（基本上是一个图像）

![现在看起来像这样](../Images/505069170ac96b8b02ec73c473372ca5.png)

我想得到的应该是这样的：

![我想做的事](../Images/7686e47464319c5f4834190af7b4c780.png)

这样第二列的内容就会被添加到第一列但右对齐。

我什至不知道如何从那种渲染器开始:(

到目前为止，这是我的专栏的代码：

```
{
    xtype : 'treecolumn',
    text : 'Dział/Pracownik',
    width : 200,
    sortable : true,
    hideable: false,
    dataIndex : 'Name',
    renderer: function (v, m, r) {
        if(r.get('leaf')==true)
            m.tdAttr = 'data-qtip="<img src=services/Images.ashx?login='+r.get('login')+' width=60px height=60px>"';
            return v;
    }
},
{
    text : 'Zdj', 
    width: 40, 
    align : 'center', 
    dataIndex : 'Name', 
    sortable : false, 
    resizable: false,
    xtype : 'templatecolumn', 
    tpl : imgTpl
},
...
var imgTpl = Ext.create('Ext.XTemplate',
    '<tpl for=".">',
        '<tpl if="values.leaf == true">',
        '<img src="services/Images.ashx?login={login}" width="25px" height="25px"/>',
    '</tpl>',
    '</tpl>'
); 
```

对于如何合并这 2 列的任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:01:58.267

这是我最终做了什么：

```
 renderer:function (value, meta, record) {
                    var tasks = record.get("tasks"),
                        tpl =     this.taskImgTpl,
                        type, qtip;
                    if (tasks && tasks.length >0){
                        Ext.each(tasks, function(task){
                            if(task.refType) {
                                type = task.refType;
                            } else {
                                type = task.type.name;
                            }
                            qtip = Ext.String.format('Status:  {0}  Assignee:  {1}  %Complete:  {2}',task.state,task.assignee||'',task.pctComplete);
                            value += tpl.apply([type, qtip]);
                        },this);
                    }

                    return value;
                } 
```

正在插入的图像模板是：

```
taskImgTpl:new Ext.XTemplate(" &nbsp; &nbsp;  <img class='{0} h16' width='16px' data-qtitle='{0}' data-qwidth='120' data-qtip='{1}'/>") 
```

其中 h16 是一个给出高度：16px 的类，动态插入的类携带一个背景图像 (16x16)，无论显示的对象类型是什么。您当然可以只设置 src 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:30:10.903

我所做的是使用我使用渲染器的模板，所以我的列现在看起来像这样：

```
{
    xtype : 'treecolumn',
    text : 'Employee',
    width : 200,
    sortable : true,
    hideable : false,
    dataIndex : 'Name',
    renderer : function(v, m, r) {
        if (r.get('leaf')) {
            return '<div style="float: left">'
            + r.get('Name')
            + '</div><img data-qtip="<img src=services/Images.ashx?login='
            + r.get('login')
            + ' width=60px height=60px/>" src="services/Images.ashx?login='
            + r.get('login')
            + '" width="25px" height="25px" style="float: right; margin-right: 5px"/>';
        }

    return '<div style="float: left">' + r.get('Name') + '</div>';
    }
} 
```

如果元素是叶子，那么我会在列的右侧显示额外的图像 + 我在翻转后添加了更大的图像。

为了让它工作，我必须在 ext-all.css 中更改一些 css：

> .x-grid-with-row-lines .x-tree-icon{margin-top:1px; 浮动：左} .x-grid-with-row-lines .x-tree-elbow,.x-grid-with-row-lines .x-tree-elbow-end,.x-grid-with-row-lines .x-tree-elbow-plus,.x-grid-with-row-lines .x-tree-elbow-end-plus,.x-grid-with-row-lines .x-tree-elbow-empty,. x-grid-with-row-lines .x-tree-elbow-line{height:19px;background-position:0 -1px; 向左飘浮}

我必须将 float:left 添加到该单元格中显示的所有图像：

*   x树弯头
*   x-tree-肘端
*   x-tree-elbow-plus
*   x树图标

我知道这可以优化很多，但对我来说效果很好。如果某些 ExtJS 大师可以对其进行调整以使其更好地工作，那么欢迎您 :)

# visual-studio-2010 - 调试测试 - 未执行。等待测试初始化

> ID：11453963
> 
> 赞同：3
> 
> 时间：2012-07-12T14:23:47.457
> 
> 标签：visual-studio-2010, mstest

我正在尝试调试测试，但它没有被执行

> 警告 2012 年 7 月 12 日上午 9:16:53 测试运行“xxx@YYY 2012-07-12 09:14:52”无法执行。等待运行测试的进程初始化时超时。

然而，我根本没有任何初始化代码。

这是以前工作的，但我只是在解决方案中修改了 Nuget 以允许 Nuget 恢复。我不确定这是否是原因。

如何再次通过我的测试进行调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:40:40.553

我重新启动计算机，我的测试开始正常调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:27:39.917

看起来 Nuget 还原是原因。为了确认它 100% 禁用 Nuget 还原..

还要检查您的测试中是否有任何设置方法（检查属性 [TestFixtureSetUp]）。如果是这样，请在它们上放置断点...

# ios - 如何将我的标签重置为默认视图？

> ID：11453967
> 
> 赞同：0
> 
> 时间：2012-07-12T14:24:03.727
> 
> 标签：ios, uikit, views

我有`UITabViewController`运行`UINavigationController`。在每个选项卡中，我都有一个不同`TableView`的 s，它们是我的应用程序树的根。

当我单击一个表格项目时，它会进入下一个级别，查看另一个，详细的，`TableView`仍在屏幕上的。它完美地工作，除了一件事。如果我在一个选项卡中查看详细信息，然后切换到另一个选项卡，然后再返回，那么我仍然可以看到我的详细信息。我想要实现的是在离开后重置标签。`TabBar``NavigationBar`

我希望我必须放入一些东西`viewDidUnload`或类似的东西，但找不到正确的解决方案。

希望你能帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:36:20.597

在

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

做

```
[viewController.navigationController popToRootViewControllerAnimated:YES]; 
```

只要选择了选项卡，就会将选项卡的视图控制器导航到根视图。

将主窗口视图控制器（标签栏控制器）实例保留在应用程序委托中是完全可以的。

您需要添加的是将委托或任何其他初始化类设置为标签栏控制器的委托，如下所示：

```
myTabBarController = [UITabBarController alloc ...
myTabBarController.delegate = self; // the app delegate will be also the tab bar delegate 
```

在应用程序委托中，然后将以下方法添加到应用程序委托：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{
    [viewController.navigationController popToRootViewControllerAnimated:YES];
} 
```

只要选择它的选项卡，“选项卡”条控制器将调用此方法。您还需要让应用程序委托以`UITabBarControllerDelegate`这种方式确认：

```
@interface PSAppDelegate : UIResponder <UITabBarControllerDelegate> 
```

这将使编译器知道应用程序委托必须或可能具有在协议中声明的方法，并且还将为您提供非常方便的此方法的自动编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T09:32:50.647

一种方法是获取与 tabviewcontroller 关联的视图控制器，然后创建新对象。

self.tabBarController?.viewControllers！将获得标签栏的视图控制器数组。就我而言，它们是 UINavigationControllers，但它们可以是任何东西。然后我得到与它关联的 viewController 并重置它。

如果您没有导航控制器，您可以创建新的视图控制器对象并使用它。

以下是我的解决方案（使用导航控制器）

```
 let vc = self.tabBarController?.viewControllers![0] as! UINavigationController
    let newVC = YourViewControllerClass()
    vc.viewControllers[0] = newVC as UIViewController 
```

这用新的替换旧的（填充的）vc！

# image - 如何在 G+ 分享按钮/框中“排除”图像

> ID：11453968
> 
> 赞同：1
> 
> 时间：2012-07-12T14:24:06.767
> 
> 标签：image, google-plus, rich-snippets

当我在我的网站 (www.spoilertv.com) 上分享一篇文章时，它会选取我的网站徽标和网站图标等图像以在 Google Plus 分享框中使用

截屏

[http://i47.tinypic.com/2zf5ymg.png](http://i47.tinypic.com/2zf5ymg.png)

有没有一种方法可以将图像排除在 Google+ 的“拾取”之外，例如以某种方式使用 itemprop="image" 片段项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:11:18.757

当您未使用 schema.org 标记或 Open Graph 标记指定图像时，Google+ 片段提取器会做出最佳猜测。您不能明确排除图像，但您可以通过为您的片段明确指定不同的图像来实现相同的效果:)

要指定特定图像，您可以添加 schema.org 标记：

```
<body itemscope itemtype="http://schema.org/Product">
  <h1 itemprop="name">Shiny Trinket</h1>
  <img itemprop="image" src="http://example.com/trinket.jpg" />
  <p itemprop="description">Shiny trinkets are shiny.</p>
</body> 
```

或 OpenGraph 标记：

```
<meta property="og:title" content="Example Title" />
<meta property="og:image" content="http://example.com/image.jpg" />
<meta property="og:description" content="Example Description" /> 
```

[您可以在片段文档](https://developers.google.com/+/plugins/snippet/)中详细了解 Google 如何在您的页面上查找图像。

# python - 网页编辑后没有变化

> ID：11453970
> 
> 赞同：0
> 
> 时间：2012-07-12T14:24:13.287
> 
> 标签：python, gunicorn

在我的 Virtualenv 中创建了一个“Hello, World!” 用于测试 Gunicorn 的 web 应用程序。

这是我正在使用的代码：

```
def app(environ, start_response):
    data = "Hello, World!\n"
    start_response("200 OK", [
        ("Content-Type", "text/plain"),
        ("Content-Length", str(len(data)))
    ])
    return iter([data]) 
```

当我访问（http://127.0.0.1:8000）时，它清楚地输出：“你好，世界！” 正如它应该做的那样。但是一旦我将数据字符串更改为：`data = "This is an edit!"`并刷新浏览器，它仍然显示：“Hello, World!”。我的结论；看起来我每次更改代码后都必须重新启动 Gunicorn，这在开发环境中工作时真的很痛苦。

有没有办法解决这个问题？

当我执行 cat 命令时，它会正确显示代码：

```
(web)sl@cker:~/Envs/web/myapp$ cat myapp.py
def app(environ, start_response):
    data = "This is an edit!"
    start_response("200 OK", [
        ("Content-Type", "text/plain"),
        ("Content-Length", str(len(data)))
    ])
    return iter([data]) 
```

我使用此命令启动服务器：`gunicorn -w 4 myapp:app`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:30:01.307

您需要重新加载 gunicorn，因为它仍然保留与 myapp.py 不同的 myapp.pyc。

[请参阅此处](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)了解 modwsgi 是如何做到的，您可能会在那里找到答案。

# c# - 当对象作为数据包发送时，反序列化对象时遇到问题

> ID：11453971
> 
> 赞同：1
> 
> 时间：2012-07-12T14:24:16.167
> 
> 标签：c#, serialization, udp

我正在尝试学习 udp 套接字等。我创建了两个程序服务器和客户端。客户端向服务器发送数据包，服务器将其弹回。

这是我在两个程序中用于将数据转换为字节 [] 和从字节 [] 转换的代码

但是从 byte[] 转换时出现错误

```
public static Packet Open(byte[] b)
        {
            MemoryStream memStream = new MemoryStream();
            BinaryFormatter binForm = new BinaryFormatter();
            memStream.Write(b, 0, b.Length);
            memStream.Seek(0, SeekOrigin.Begin);
            object obj = new object();
            try
            {
                // this line here is where the error is occurring
                obj = (object)binForm.Deserialize(memStream);
            }
            catch (Exception er)
            {
                MessageBox.Show(er.Message);
            }
            if (obj is Packet)
                return (Packet)obj;
            else
                return null;
        }

        public byte[] Bundle()
        {
            BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, this);
            return ms.ToArray();
        } 
```

如果我这样做，所有来自一个程序的工作

```
Packet p =new Packet();
p.Message="hello";

byte[] data = p.Bundle();

Packet p2 = Packet.Open(data);
MessageBox.Show(p2.Message); 
```

我收到的错误是“无法在“我的客户端程序的名称”中找到程序集

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:28:56.957

在我看来，您正在序列化一个不通过两端之间*的引用共享的类型。**注意：将同一个类*编译到两者中是不够的，因为 BinaryFormatter 包括完整的类型名称，包括程序集，所以：它仍然算作不相关的类型。那里的常见修复（我完全错误地使用“修复”这个词）是为 DTO 编写一个程序集并从客户端和服务器引用该程序集。但是，这种方法仍然存在许多问题。

有关信息，还有其他序列化程序**与**在每一端都有一个类似的类兼容。我有偏见，但我建议看看 protobuf-net；输出通常要小得多，并且与类型无关，这意味着该类只需要在每一端都大致相似（它非常容忍版本）。此外，它也更快（CPU 方面）！

# linux-kernel - Linux USB 枚举和 uevents

> ID：11453978
> 
> 赞同：1
> 
> 时间：2012-07-12T14:24:32.880
> 
> 标签：linux-kernel, linux-device-driver, udev

[我在http://www.technovelty.org/code/linux/plugging-in-usb.html](http://www.technovelty.org/code/linux/plugging-in-usb.html)阅读了一篇文章。它非常好。

连接设备的枚举究竟是在哪个函数中由主机完成的，以及在哪个函数中发送 uevent？

我在 usb_new_device 等函数中引入了 printks，如果我使用“udevadm monitor --kernel”，它甚至会在 hub.c 的 usb_new_device 中调用的枚举函数之前显示内核事件？

日志如下

[110.819399] 123456 hub_irq

[110.824952]123456 hub_port_connect_change

[110.979624]123456 hub_port_init

[111.059625]usb 2-1.2：使用 fsl-ehci 和地址 3 的新高速 USB 设备

[111.189722] 123456 usb_new_device

[111.196219]usb 2-1.2：找到新的 USB 设备，idVendor=05ac，idProduct=12a0

[111.203113]usb 2-1.2：新的 USB 设备字符串：Mfr=1，Product=2，SerialNumber=3

[111.210438] USB 2-1.2：产品：iPhone

[111.214196] USB 2-1.2：制造商：Apple Inc.

[111.218728]usb 2-1.2：序列号：9356b662a93170509226069e5adf53f2351d774e

内核 [110.940183] 添加 /devices/platform/fsl-ehci.1/usb2/2-1/2-1.2 (usb)

检查时间戳，尽管 udevadm 输出在最后（udevadm 在用户空间中运行），但它实际上在 [110.940183] 得到了事件，因为在 [111.189722] 调用了 usb_new_device

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-28T01:27:42.997

[我几乎是 Linux 内核文盲，所以不能 100% 确定这个信息..但是在http://www.cs.fsu.edu/~baker/devices/lxr/http/find](http://www.cs.fsu.edu/~baker/devices/lxr/http/find?v=2.6.11.8)的帮助下设法追踪了 USB 初始化[?v=2.6.11.8](http://www.cs.fsu.edu/~baker/devices/lxr/http/find?v=2.6.11.8)

这是Linux 2.6.11.8内核上的USB主机代码流程（如果有错误请纠正我）

```
usb_init()     // invoked in ../core/usb.c it initializes host, major, usbfs and usb_hub 
usb_hub_init() // in core/hub.c it creates a kernel thread hub_thread()
hub_thread()   // in core/hub.c
hub_events()   // next this if called 
hub_port_connect_change() // then this.. 
```

# c# - c#中如何将文件附加到电子邮件中

> ID：11453983
> 
> 赞同：2
> 
> 时间：2012-07-12T14:24:45.340
> 
> 标签：c#, email, attachment

嗨，我相信我非常接近找出我的代码出了什么问题，但希望有人可以帮助我或指出我正确的方向。我能够运行我的程序，并且在用户将要上传文件的页面上，它让我可以选择文件。但是当我按下提交时，其他信息会发送给我，但文件永远不会出现。我认为这是因为当文件发送到我的电子邮件时，我无法确定将文件临时保存在哪里。这是我目前的代码：

此外，此代码的用途是我网站上的评论/请求页面，用户可以在其中评论并添加屏幕截图。

```
private string SendMessage(string strTo, string strFrom, string strSubject, string    strMessage, string strAttachment, string strBCC)
{
    try
    {
        MailMessage mailMsg;
        string strEmail = "";
        string strSmtpClient = ConfigurationManager.AppSettings["SmtpClient"];
        string[] arrEmailAddress = strTo.Split(';');
        for (int intCtr = 0; intCtr < arrEmailAddress.Length; intCtr++)
        {
            strEmail = "";
            if (arrEmailAddress[intCtr].ToString().Trim() != "")
            {
                strEmail = arrEmailAddress[intCtr].ToString().Trim();
                mailMsg = new MailMessage(strFrom, strEmail, strSubject, strMessage);
                mailMsg.IsBodyHtml = true;
                if (!strBCC.Trim().Equals(string.Empty))
                    mailMsg.Bcc.Add(strBCC);

                SmtpClient smtpClient = new SmtpClient(strSmtpClient);
                smtpClient.UseDefaultCredentials = true;
                smtpClient.Port = 25;

                smtpClient.Send(mailMsg);
                mailMsg.Dispose();
            }
        }
        return "Message sent to " + strTo + " at " + DateTime.Now.ToString() + ".";
    }
    catch (Exception objEx)
    {
        return objEx.Message.ToString();
    }

    string strUpLoadDateTime = System.DateTime.Now.ToString("yyyyMMddHHmmss");
    string strFileName1 = string.Empty;
    if ((File1.PostedFile != null) && (File1.PostedFile.ContentLength > 0))
    {
        string strUploadFileName1 = File1.PostedFile.FileName;
        strFileName1 = strUpLoadDateTime + "." + Path.GetFileNameWithoutExtension(strUploadFileName1) + Path.GetExtension(strUploadFileName1);
        strFileName1 = strFileName1.Replace("'", "");
        string strSaveLocation = Server.MapPath("") + "\\" + strFileName1;
        File1.PostedFile.SaveAs(strSaveLocation);
        txtComments.Text = "The file has been uploaded";
    } 
```

我的问题是我在哪里出错了在这段代码中我应该把文件放在我想要保存的位置。

代码的以下部分是我在发送电子邮件时用来格式化电子邮件的部分。并选择将在电子邮件中发送的内容。

```
protected void Submit_Click1(object sender, EventArgs e)
{
    try
    {
        string dandt = System.DateTime.Now.ToString("yyyyMMddHHmmss");
        string strMessage = "Bug Name: " + txtBugName.Text.Trim() + "<br/>" +
                     "Module Name: " + ddlModule.SelectedValue + "<br/>" +
                     "Page Name: " + ddlPage.SelectedValue + "<br/>" +
                     "Description: " + txtComments.Text.Trim() + "<br/>" +
                      File1.f + "<br/>" +
                      "Email is" + " " + txtemail.Text.Trim() + "<br/>" +
                      "The request was sent at" + dandt;  

        SendMessage(ConfigurationManager.AppSettings["EmailAddrTo"],
            ConfigurationManager.AppSettings["EmailAddrFrom"],
            txtBugName.Text.Trim(),
            strMessage, "", "");
    }
    catch 
    {
    }
} 
```

由于某种原因，当我按下提交时，我的电子邮件中没有发送任何内容。我还试图弄清楚如何在电子邮件中输入电子邮件的发送时间和日期。即使很明显我的电子邮件会包含这些信息，但如果电子邮件由于某种原因被延迟，我希望知道用户按下提交按钮的时间和日期。File.F 在这部分代码中的位置是我试图弄清楚如何将文件附件发送到电子邮件的地方，但我不确定代码中应该使用什么语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:48:14.120

您似乎正在尝试将用户计算机中的一些文件附加到您发送的电子邮件中。如果是这种情况，您需要先上传文件，然后再致电`SendMessage.`

在您`Submit_Click`需要做的第一件事是将文件上传到某处的代码。另外，删除`File1.f`我`strMessage`怀疑导致您的消息对您无效的地方。

上传文件后，将`strSavedLocation`保存文件的文件位置传递给您的`SendMessage()`方法。

在您的`SendMessage`方法中，您可以在构建`MailMessage`. `strAttachment`是您上传文件的路径名：

```
var attachment = new Attachment(strAttachment);
// Add time stamp information for the file.
ContentDisposition disposition = attachment.ContentDisposition;
disposition.CreationDate = System.IO.File.GetCreationTime(strAttachment);
disposition.ModificationDate = System.IO.File.GetLastWriteTime(strAttachment);
disposition.ReadDate = System.IO.File.GetLastAccessTime(strAttachment);
mailMsg.Attachments.Add(attachment); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:05:28.637

在我看来，您这里的主要部分减去了方便的 System.Net.Mail.Attachment。

如果我这样做，我会将文件上传处理代码移动到 Submit_Click 处理程序中，然后只需添加 Mail.Attachment 代码。

```
 private string SendMessage(string strTo, string strFrom, string strSubject, string strMessage, string strAttachment, string strBCC)
    {
        try
        {
            System.Net.Mail.MailMessage mailMsg;
            string strEmail = "";
            string strSmtpClient = ConfigurationManager.AppSettings["SmtpClient"];
            string[] arrEmailAddress = strTo.Split(';');
            for (int intCtr = 0; intCtr < arrEmailAddress.Length; intCtr++)
            {
                strEmail = "";
                if (arrEmailAddress[intCtr].ToString().Trim() != "")
                {
                    strEmail = arrEmailAddress[intCtr].ToString().Trim();
                    mailMsg = new MailMessage(strFrom, strEmail, strSubject, strMessage);
                    mailMsg.IsBodyHtml = true;
                    if (!strBCC.Trim().Equals(string.Empty))
                        mailMsg.Bcc.Add(strBCC);

                    /*** Added mail attachment handling ***/    
                    System.Net.Mail.Attachment attachment;
                    attachment = new System.Net.Mail.Attachment(strAttachment);
                    mailMsg.Attachments.Add(attachment);

                    SmtpClient smtpClient = new SmtpClient(strSmtpClient);
                    smtpClient.UseDefaultCredentials = true;
                    smtpClient.Port = 25;

                    smtpClient.Send(mailMsg);
                    mailMsg.Dispose();
                }
            }
            return "Message sent to " + strTo + " at " + DateTime.Now.ToString() + ".";
        }
        catch (Exception objEx)
        {
            return objEx.Message.ToString();
        }
    }

    protected void Submit_Click1(object sender, EventArgs e)
    {
        try
        {
            /*** Moved from SendMessage function ****/
            string strUpLoadDateTime = System.DateTime.Now.ToString("yyyyMMddHHmmss");
            string strFileName1 = string.Empty;
            if ((File1.PostedFile != null) && (File1.PostedFile.ContentLength > 0))
            {
                string strUploadFileName1 = File1.PostedFile.FileName;
                strFileName1 = strUpLoadDateTime + "." + Path.GetFileNameWithoutExtension(strUploadFileName1) + Path.GetExtension(strUploadFileName1);
                strFileName1 = strFileName1.Replace("'", "");
                string strSaveLocation = Server.MapPath("") + "\\" + strFileName1;
                File1.PostedFile.SaveAs(strSaveLocation);
                txtComments.Text = "The file has been uploaded";
            }

            string dandt = System.DateTime.Now.ToString("yyyyMMddHHmmss");
            string strMessage = "Bug Name: " + txtBugName.Text.Trim() + "<br/>" +
                         "Module Name: " + ddlModule.SelectedValue + "<br/>" +
                         "Page Name: " + ddlPage.SelectedValue + "<br/>" +
                         "Description: " + txtComments.Text.Trim() + "<br/>" +
                          strSaveLocation + "<br/>" +
                          "Email is" + " " + txtemail.Text.Trim() + "<br/>" +
                          "The request was sent at" + dandt;

            SendMessage(ConfigurationManager.AppSettings["EmailAddrTo"],
                ConfigurationManager.AppSettings["EmailAddrFrom"],
                txtBugName.Text.Trim(),
                strMessage, strSaveLocation, "");
        }
        catch
        {
        }
    } 
```

关于使用 StringBuilder 的说明，我同意，我会这样使用它：

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();
sb.AppendFormat("Bug Name: {0}<br/>", txtBugName.Text.Trim());
sb.AppendFormat("Module Name: {0}<br/>", ddlModule.SelectedValue); 
```

编辑添加：另外，请参阅上面关于使用 ContentDisposition 的 Brad 的回答。

# java - Eclipse 不更新 JSP 脚本中的自定义方法

> ID：11453984
> 
> 赞同：3
> 
> 时间：2012-07-12T14:24:45.597
> 
> 标签：java, eclipse, jsp, scriptlet

我正在编辑一个动态 Web 项目，在项目的 /src 文件夹中有一个简单的类，以及一个用于访问它的 .jsp 页面。

在 Eclipse 中，.jsp 页面仅将我的类中的一些方法识别为现有的——其他类得到“方法……未定义”和“方法……不可见”，即使代码全部编译和像我期望的那样工作。但这只是有时会发生。

```
<%
myConnectionDBO = ConnectionDBO.getInstance();
out.println("Is connected? "
        + myConnectionDBO.isConnected()
        + "<br>");
out.println("Attempting resultset grab...<br>");

ResultSet rs = myConnectionDBO.doSelectWhere(1);
%> 
```

*   `.getInstance()`没有任何语法错误（但应该，因为它是后来添加的）。
*   `.isConnected()`显示未定义的错误（误报）。
*   `.doSelectWhere()`显示“不可见”和“无法从 void 转换为 ResultSet”（同上）。

在你问之前，我已经重建/清理了我的项目，从 Project Explorer 中刷新了它，启用了自动构建，重新启动了我的应用程序服务器 (JBoss)，并重新启动了 Eclipse。问题依然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:19:28.613

尽管您必须按照上一篇文章的建议进行操作（JSTL + EL = awesomne​​ss），但我想知道您是否错过了 <%@ page ...> 指令来导入包含这些方法定义的类。

# javascript - 使用 jQuery 时如何在 ASP.NET 中同时触发 OnClick 和 OnClientClick 事件？

> ID：11453985
> 
> 赞同：5
> 
> 时间：2012-07-12T14:24:52.820
> 
> 标签：javascript, jquery, asp.net

我试图在回发期间显示消息栏。我正在使用我在[此处](http://www.andreyvoev.com/programming/jquery-plugin-messagebar/)在线找到的 jQuery 脚本。一切都很好，但是当 jQuery 添加到页面时，我的服务器端事件永远不会被调用。

这是我的按钮代码：

```
<asp:Button ID="btnGetReport" CssClass="float-left" runat="server" 
Text="<%$ Glossary:GetReport %>" OnClick="btnGetReport_Click" /> 
```

这是内联脚本：

```
<script type="text/javascript">
$(document).ready(function () {
    $('#<%=btnGetReport.ClientID%>').click(function (event) {
        event.preventDefault();
        $('#message_bar').displayMessage({
            position: 'fixed',
            skin: 'modern',
            message: 'We are fetching your report. Please wait...',
        });
    });
});
</script> 
```

这是相关的外部 .js 文件：

```
(function( $ ){

$.fn.displayMessage = function(options) {

    // Default configuration properties.
     var defaults = {
              message       : 'Error message',
              speed         : 'fast',
              position      : 'fixed', // relative, absolute, fixed
              autohide      : true
     }

    var options = $.extend( defaults, options );
    $(this).slideUp('fast');
    $(this).removeClass().empty();
    return this.each(function() {

      var sticky = (options.sticky == false) ? 'relative' : 'absolute';
      $(this).addClass('messagebar-skin-'+options.skin+'_bar').css('position',options.position).css('background-color',options.background);
      $(this).append('<div class="messagebar-skin-'+options.skin+'_inner"><span class="messagebar-skin-'+options.skin+'_text"></span></div>').css('color',options.color);
      $(this).find('span').html(options.message);

      $(this).slideDown(options.speed ,function(){

         var parent = ($(this).attr('id')) ? "#"+$(this).attr('id') : "."+$(this).attr('class');
         var close_button = ($(this).find('a').attr('id')) ? "#"+$(this).find('a').attr('id') : "."+$(this).find('a').attr('class');

         if(options.autohide == true)
         {
            $(this).delay(2400).fadeOut('slow');
         }

         $(parent+">div>"+close_button).bind("click", function (event) {
            event.preventDefault();
            $(parent+">div>"+close_button).animate({"opacity": "hide"}, function(){
                $(parent+">div>span").fadeOut("slow").html("");
                $(parent+">div>"+close_button).parent().parent().slideUp(options.speed);
            });
         });

  });

});

};
})( jQuery ); 
```

我也尝试使用 OnClientClick 属性调用该函数，但似乎都不起作用。我查看了人们对此有疑问的其他示例，但似乎也没有任何帮助。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:27:46.237

您是否尝试过一些简单的事情，例如：

```
OnClientClick="return YourJavaScriptFunction();"

<asp:Button ID="btnGetReport" CssClass="float-left" runat="server" 
    Text="<%$ Glossary:GetReport %>" OnClick="btnGetReport_Click" 
    OnClientClick="return YourJavaScriptFunction();" /> 
```

`true`最后在你的 JavaScript 函数中返回

```
function YourJavaScriptFunction () {
    // your cool stuff
    return true;
} 
```

## 编辑 1

这一行：

```
OnClientClick="return YourJavaScriptFunction();" 
```

它相当于：

```
$('#<%=btnGetReport.ClientID%>').click(function () { 
```

您的脚本如下所示：

```
<script type="text/javascript">

function YourJavaScriptFunction (){
        $('#message_bar').displayMessage({
            position: 'fixed',
            skin: 'modern',
            message: 'We are fetching your report. Please wait...'
        });    

        // this will prevent the postback, equivalent to: event.preventDefault();
        return false;
}

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:00:42.900

尝试这个：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#<%=btnGetReport.ClientID%>').click(function (event) {
            event.preventDefault();
            $('#message_bar').displayMessage({
                position: 'fixed',
                skin: 'modern',
                message: 'We are fetching your report. Please wait...',
            });
         __doPostBack("btnGetReport", "");
        });
    });
    </script> 
```

如果使用母版页，那么试试这个：

```
 __doPostBack("ctl00$MainContent$btnGetReport", ""); 
```

# c++ - 调用尚未构造的对象的方法

> ID：11453989
> 
> 赞同：0
> 
> 时间：2012-07-12T14:24:59.793
> 
> 标签：c++

有一个简单的类：

```
class A {
public:
  A() {}
  void set(int value) { value_ = value; }

private:
  int value_;
}; 
```

及其全局实例：

```
A a; 
```

1.  `set`可以在尚未构造的对象上调用方法`a`吗？`a.set(123)`例如，当从另一个翻译单元中的另一个全局对象的构造函数调用时，就会发生这种情况。

2.  当稍后为 object调用非参数和空构造函数时，`a`通过调用设置的对象中的值是否会保留？`a.set(123)``A``a`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:27:24.177

> 可以在尚未构造的对象上调用方法集`a`吗？

不可以。您不能为尚未开始构造的对象调用成员函数。

（由于答案是*否定*的，你的第二个问题不需要答案。）

* * *

如果您可能需要在动态初始化期间从多个翻译单元访问此全局实例，您可以使用 Meyers 单例技术：

```
A& global_a()
{
    static A a;
    return a;
} 
```

`a`将在`global_a()`第一次调用时初始化。请注意，在多线程程序中，您可能需要关注[初始化的同步。](https://stackoverflow.com/q/1661529/151292)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T14:27:31.447

当你写

```
A a; 
```

`a`现在是一个构造对象。如果已经调用`A`了默认构造函数`A`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T14:26:28.560

如果在 1) 中您的意思是可以在构造函数中调用`set`，那么是的，这很好，因为它不是虚拟方法。您不能在构造函数中调用虚方法。

至于2），你问的不是很清楚。构造函数只被调用一次（虽然有一些方法可以解决这类事情，但不要这样做），那就是第一次创建对象的时候。您不能`a`第二次调用构造函数，所以这个问题没有任何意义。

# iphone - iPhone：更改 XCode 项目名称是否安全？

> ID：11453991
> 
> 赞同：1
> 
> 时间：2012-07-12T14:25:14.417
> 
> 标签：iphone, ios, xcode

我可以用答案更改 XCode 项目名称：[https](https://stackoverflow.com/a/4954029/709950) ://stackoverflow.com/a/4954029/709950 。

项目文件 (.xcodeproj) 和目标名称已更改。
但源文件夹名称和方案名称没有改变。

我找到了自己更改方案名称的方法。
我找到了更改源文件夹名称的方法： [https ://stackoverflow.com/a/8344066/709950](https://stackoverflow.com/a/8344066/709950)

以上述方式更改项目名称是否安全？
我需要做些什么来完全更改项目名称吗？
还是创建新项目并将源文件复制到其中更安全、更干净？

**编辑：**
我发现重命名项目名称后提交 XCode 的 GIT 不再起作用。

并发现了一个关于这个问题的问题：
[如何重命名 xcode 方案并保持 Git 提交工作？](https://stackoverflow.com/questions/10933222/how-do-i-rename-an-xcode-scheme-and-keep-git-commit-working)

但是在那个问题中回答的解决方案太复杂了，我无法接受。

**EDIT2：**
发生上述问题后，我尝试重新创建 git 存储库。
但我无法重新创建。所以我问怎么做。
我得到了一个很好的答案。
[iPhone：如何重新创建 XCode 内置的 git 存储库？](https://stackoverflow.com/questions/11468041/iphone-how-to-re-create-xcode-built-in-git-repository)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:35:27.590

如果要更改应用程序名称，只需更改项目名称即可。其余的都无关紧要（放宽文件夹名称和方案）。

# c# - 验证错误后将焦点设置在控件上

> ID：11453992
> 
> 赞同：0
> 
> 时间：2012-07-12T14:25:17.877
> 
> 标签：c#, winforms, validation

在我的 winforms 项目中，对于一个特定的表单，我有近 10 个用于名字、姓氏、年龄、职业等的控件（包括文本框、下拉列表）和一个保存按钮

我已经为这些控件创建了表示数据源的类，并在同一个类中实现了验证方法，该类对每个属性进行验证并抛出验证消息。

当我想将焦点设置在在 UI 中引发验证错误的控件上时，就会出现问题。

我如何实现这一点。将控件传回课堂是不好的做法。

我是否需要更改在类级别实现验证的方式？

有什么建议/链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:29:42.320

我建议您使用 .NET 提供的实际验证技术：

[`Validating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx) [`Validated`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validated.aspx)

我还强烈建议添加[`ErrorProvider`](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider)并使用它来指示错误是什么。没有给出这方面的例子，但谷歌有很多很好的例子。

您可以保留您的验证类，并简单地将每个控件订阅到类上的方法。

例如（原谅 K&R，在 SO 上写更容易，这也可能需要一些调整，我是从内存中写的）：

```
public MyForm : Form {

    Validator validator;

    public MyForm() {
        validator = new Validator(/*Arguments here*/);
    }

    public override void OnLoad(EventArgs e) {
        base.OnLoad(e);

        targetControl.Validating += (o,e) => {
            try {
                validator.Validate(e);
            }
            catch(YourException exc) {
                e.Cancel = true; //References the validating event args
                //Whatever else you want to do
            }
        }
    }
} 
```

# ios - 子节点中的 Cocos2d 调度选择器

> ID：11453996
> 
> 赞同：0
> 
> 时间：2012-07-12T14:25:27.903
> 
> 标签：ios, cocos2d-iphone

我想在 GameScene 类的子节点中安排一个选择器，而不必调用子节点类中的 schedule 方法（例如 [self schedule etc..]）。

这是我在 GameScene 类中调用的代码片段，用于调用子类中处理我的 GameScene 背景的方法。

```
ParallaxMultipleBackgrounds *background = [self getChildByTag:GameSceneBackgroundBase];
//I TRIED THIS:
[background schedule:@selector(([background changeSpeedFactorBy:3])) interval:1];
//AND 
[background schedule:@selector(changeSpeedFactorBy:3)];
//AND
[[background schedule:@selector(changeSpeedFactorBy:3) interval:1] ];
//BUT.. 
```

不幸的是，当我从编译器收到各种错误消息时，这些方法调用都不起作用。我不确定我做错了什么，因为我在 ParallaxMultipleBackgrounds 类中声明了选择器**-(void) changeSpeedFactorBy:(float)factor 。**

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:40:47.297

你不能给选择器一个参数。最简单的方法是在`ParallaxMultipleBackgrounds`类中有一个 iVar，如下所示：int 修饰符。使它成为一个`readwrite property`. 然后分配它并调用 schedule 方法。

像这样 ：

```
ParallaxMultipleBackgrounds *background = [self getChildByTag:GameSceneBackgroundBase];
background.modifier = 3;
[background schedule:@selector(changeSpeedFactorBy:) interval:1]; 
```

并在`changeSpeedFactorBy`方法中使用该修饰符变量进行更改。

希望这可以帮助。

干杯!

编辑：您也可以通过唱 CCCallFuncND 来发送参数。如果你随后声明一个 CCRepeatForever 动作，你确实可以使用参数永远调用选择器。像这样：

```
CCCallFuncND *call = [CCCallFuncND actionWithTarget:background selector:@selector(changeSpeedFactorBy:) data:amont];

CCDelay *delay = [CCDelay actionWithDuration:1];

CCSequence *seq = [CCSequence actions:call,delay,nil];

CCRepeatForever *repeat = [CCRepeatForever actionWithAction:seq];
[background runAction:repeat]; 
```

抱歉有任何语法错误，我现在不在 Mac 上。但这将是一个完整的想法。不过，有一点提到，当您发送该数据参数时，它是一个 void* 。所以你不能在那里发送一个整数，但是你可以用一个 NSString。