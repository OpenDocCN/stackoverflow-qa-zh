# StackOverflow 问答 10868000-10868999

# c# - 使用 HttpWebRequest 发送大文件，根据需要增加/缩小缓冲区

> ID：10868000
> 
> 赞同：6
> 
> 时间：2012-06-03T04:53:55.773
> 
> 标签：c#, http, file-upload, httpwebrequest

我正在编写一个使用 HttpWebRequest 将大文件上传到 Web 服务的应用程序。

此应用程序将由具有不同互联网速度的各种人运行。

我以块的形式异步读取文件，并将这些块异步写入请求流。我使用回调在循环中执行此操作。我一直这样做，直到整个文件被发送。

在写入之间计算上传速度，随后更新 GUI 以显示所述速度。

我面临的问题是决定缓冲区大小。如果我将其设置得太大，连接速度较慢的用户将看不到速度的频繁更新。如果我把它设置得太小，连接速度很快的用户最终会“锤击”读/写方法，导致 CPU 使用率飙升。

我现在正在做的是从 128kb 开始缓冲区，然后每 10 次写入检查这 10 次写入的平均写入速度，如果不到一秒，我将缓冲区大小增加 128kb。如果写入速度低于 5 秒，我也会以类似的方式缩小缓冲区。

这工作得很好，但感觉很随意，似乎还有改进的余地。我的问题是，有没有人处理过类似的情况，你采取了什么行动？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T05:34:24.787

我认为这是一个很好的方法。我也用于大文件上传。但其中有一个小周。我通过调用我的不同服务来确定第一个请求中的连接速度。这实际上可以节省为每个请求重新计算速度的开销。这样做的主要原因是

1.  在慢速连接中，速度通常波动很大。因此，每次请求都重新计算它是没有意义的。

2.  我还应该提供恢复功能，用户可以从上次结束的位置重新上传文件。

考虑到可扩展性，我曾经用第一个请求来修复缓冲区。让我知道它是否有帮助

# node.js - Node.js 应用程序在本地工作，但不在云中

> ID：10868004
> 
> 赞同：1
> 
> 时间：2012-06-03T04:54:58.890
> 
> 标签：node.js, cloud-foundry

我的 app.js 文件如下所示：

```
var port = (process.env.VMC_APP_PORT || 3000);
var host = (process.env.VCAP_APP_HOST || 'localhost');
var http = require('http');
var rip = require('./config.js');

http.createServer(function (req, res) {
        //do nothing...no response expected via http
}).listen(port, host); 
```

config.js 文件包含这个（以及更多，但为了简洁/相关性而删减）：

```
//several global.<property_name> assignments
global.mName                    = "Application Name";
//serveral more global.<property_name> assignments
...
...
require("./main.js"); 
```

main.js 文件的开头是这样的：

```
console.log(mName+" >>> Loading."); 
```

当我在本地运行应用程序时，它可以通过运行正常执行：

> 节点应用程序.js

但是，当我使用以下命令将应用程序推送到 Cloud Foundry 时：

> vmc 推送 [app_name] --runtime=node06

我收到以下错误：

> 创建应用程序：OK 上传应用程序：
> 检查可用资源：OK
> 处理资源：OK
> 打包应用程序：OK
> 上传（10K）：OK
> 推送状态：OK 暂存应用程序 'app_name'：OK
> 启动应用程序 'app_name'：...... .....................
> 
> 错误：应用程序 [app_name] 无法启动，在下面记录信息。
> 
> ====> /logs/stderr.log <====
> 
> node.js:134 抛出 e；// process.nextTick 错误，或第一次滴答时的 'error' 事件 ^ ReferenceError: mName is not defined at Object. (/var/vcap/data/dea/apps/app_name-0-6996d737ed319bcffaf696d653423d7c/app/main.js:6:1) 在 Module._compile (module.js:411:26) 在 Object..js (module.js :417:10) 在 Module.load (module.js:343:31) 在 Function._load (module.js:302:12) 在 Array。(module.js:430:10) 在 EventEmitter._tickCallback (node.js:126:26)

似乎我在 config.js 的全局对象中设置的属性没有被带到 main.js。我通过修改 main.js 以显式引用 global.mName 而不仅仅是 mName 来验证这一点，并且该错误消失了，但是对全局对象属性的另一个引用随后开始抱怨。

因为没有明确的“全局”，一切都在本地正常工作。参考，我认为我不应该明确引用“全球”。对于那些变量。我在这里缺少什么吗？任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:36:04.213

继续并将以下 package.json 文件添加到应用程序目录的根目录：

```
{
  "name":"hello-node",
  "version":"0.0.1",
  "scripts": {
    "start": "app.js"
  }
} 
```

现在 package.json 在这种情况下为您所做的是，它告诉 cloudfoundry.com 您的执行/启动脚本文件应该是“app.js”

您需要将其安装到位的原因是您还有一个“main.js”文件。在 cloudfoundry.com 中，默认情况下 main.js 文件会覆盖您的 app.js，因此它会破坏您的工作。

所以包含脚本对象的 package.json 解决了这个问题:-)

# android - Android 上的蓝牙文件传输

> ID：10868005
> 
> 赞同：0
> 
> 时间：2012-06-03T04:55:25.177
> 
> 标签：android, bluetooth, share, file-transfer

我一直在尝试编写一个程序来传输用户从我提供给用户的**ListView中选择的文件。**一旦用户选择了他打算传输的文件（*“我使用**onLongClickListener**实现了”*），就会触发这个特定的代码块：

```
 String mimeType = fileAction.getMimeType(rowHolder.get(position).getLabel());
            Intent playFile = new Intent();
            playFile.setAction(android.content.Intent.ACTION_SEND);
            Uri pathUri = Uri.parse("file://" + currentPath +     rowHolder.get(position).getLabel());
        playFile.setDataAndType(pathUri, mimeType);
        startActivity(playFile); 
```

*麻烦的是，当我从可以处理这种类型的 Intent [“这部分是自动的*”]的应用程序选项列表中选择蓝牙选项时，什么也没有发生。仅当我单击蓝牙时才会出现此问题。GMail、Bump 等所有其他选项都运行良好。任何帮助/指导将不胜感激。提前致谢。此外，这是我的清单文件，以防权限集似乎少于要求。AndroidManifest 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="org.sample.test"
  android:versionCode="2"
  android:versionName="1.1">

<uses-sdk android:minSdkVersion="3" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

<application 
    android:icon="@drawable/app_icon" 
    android:label="@string/app_name" 
    android:debuggable="false"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity android:name=".Main"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity 
        android:name=".Preferences"
        android:label="@string/preferences" >
    </activity>
    <activity 
        android:name=".SearchFileSystem"
        android:label="@string/search" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data 
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:09:33.673

试试这个代码::参考这个[链接](http://www.mikenimer.com/?p=373)

```
String mimeType = fileAction.getMimeType(rowHolder.get(position).getLabel());
Intent intent = new Intent();  
intent.setAction(android.content.Intent.ACTION_SEND);  
intent.setType(mimeType);
Uri pathUri = Uri.parse("file://" + currentPath + rowHolder.get(position).getLabel());
intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(pathUri ) );  
startActivity(intent); 
```

更新：：

```
File file = new File(Path.toString());  
intent.setDataAndType(Uri.fromFile(file), mimeType); 
```

# javascript - 试图从按键文档中获取数字，javascript

> ID：10868006
> 
> 赞同：1
> 
> 时间：2012-06-03T04:55:25.380
> 
> 标签：javascript, jquery

看起来很简单，但我不知道如何从 Document DOM 中截取 javascript 上的数字

```
 $(document).keypress(function (e) {
        if (e.keyCode == xx) {
            alert();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T05:01:24.927

数字是 48 到 57，所以...

```
$(document).keypress(function (e) {
    var key = e.keyCode || e.charCode;
    if (key >= 48 && key <= 57) {
        alert('You pressed ' + (key - 48));
    }
}); 
```

## [看演示](http://jsfiddle.net/AQ5CY/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T05:01:25.303

来源：[http ://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)

按键事件在 Firefox 中产生 0 的 keyCode，在其他任何地方产生 ASCII 字符值。按键事件在 Firefox 中产生 ASCII 字符值的 charCode。因此，您应该使用`(e.keyCode || e.charCode)`来获取字符值。

另请注意，您的代码也不起作用，因为`alert`应该接受一个参数。至少在 Firefox 中，不`alert`带参数调用会引发异常。

解决了这两个问题后，您的代码现在将是：

```
$(document).keypress(function (e) {
    if ((e.keyCode || e.charCode) == <number from 48..57 inclusive>) {
        alert('something');
    }
}); 
```

示例：http: [//jsfiddle.net/gRrk6/](http://jsfiddle.net/gRrk6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T05:00:32.987

`$(document).keydown(function(event){ if(event.keyCode == 13) { alert('you pressed enter');} });` 将 13 替换为密钥代码，请参阅此处了解详细信息：http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:14:36.703

![来自以下链接的 JavaScript 事件 KeyCode 测试页视图](../Images/a5f66f909561adebaddd55adac7fd17e.png)

你应该注意到事件**[keyCode, charCode, which]** 和这个受浏览器影响的测试页面之间的差异，即我在**safari** 上测试了它， **onKeyPress**总是空的

[JavaScript 事件 KeyCode 测试页](http://asquare.net/javascript/tests/KeyCode.html)

# coffeescript - 获取咖啡脚本类的名称？

> ID：10868008
> 
> 赞同：9
> 
> 时间：2012-06-03T04:57:00.593
> 
> 标签：coffeescript, introspection

是否会在所有浏览器中出现以下警报“Foo”，即使在缩小时也是如此？

```
class Foo

alert(Foo.name) 
```

文档中没有说明任何内容，我知道 IE 的函数名称存在问题，并且我对有关此问题的许多问题感到困惑，例如[这些](https://github.com/jashkenas/coffee-script/issues/2196)[问题中的](https://github.com/jashkenas/coffee-script/issues/2052)[任何](https://github.com/jashkenas/coffee-script/pull/729) [一个](https://github.com/jashkenas/coffee-script/issues/714) [！](https://github.com/jashkenas/coffee-script/issues/494)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T11:23:44.707

在 中包含的任何类`Foo`的方法中`Foo.prototype`，您可以插入该行

```
console.log @constructor.name 
```

它会写

```
Foo 
```

到您的控制台日志。HTH。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T08:18:13.157

这可能取决于您使用的是哪个版本的 CoffeeScript 编译器。在最新的稳定版本 (1.3.3) 中，默认情况下不会生成“名称”属性。

```
class Foo 
```

编译成

```
var Foo;
Foo = (function() {
  function Foo() {}
  return Foo;
})(); 
```

由于该`name`属性是非标准的并且当前不被 IE 支持，因此您不能真正依赖它跨浏览器。有关这方面的详细信息，请访问 MDN：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Name](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Name)

# c++ - 函数什么时候应该使用 cstrings 而不是字符串？(C++)

> ID：10868014
> 
> 赞同：3
> 
> 时间：2012-06-03T04:58:52.123
> 
> 标签：c++, string, function, c++11, parameter-passing

所以我一直在探索[愚蠢](https://github.com/facebook/folly/blob/master/folly/docs/Overview.md)——Facebook 的开源库，他们的大多数实用函数都使用 cstrings 而不是字符串。他们为什么这样做呢？这些示例传入对 std::string 的引用，并将其隐式转换为 cstring。这是他们的一个示例函数，我希望这个问题能够重点关注：

**函数调用方式：**

```
// Multiple arguments are okay, too. Just put the pointer to string at the end.
toAppend(" is ", 2, " point ", 5, &str); 
```

**内部Conv.h**

```
/**
* Everything implicitly convertible to const char* gets appended.
*/
template <class Tgt, class Src>
typename std::enable_if<
  std::is_convertible<Src, const char*>::value
  && detail::IsSomeString<Tgt>::value>::type
toAppend(Src value, Tgt * result) {
  // Treat null pointers like an empty string, as in:
  // operator<<(std::ostream&, const char*).
  const char* c = value;
  if (c) {
    result->append(value);
  }
} 
```

函数什么时候应该使用 cstrings 而不是字符串？他们为什么不编写函数来通过引用获取 std::string ，因此可以像这样调用函数：

```
toAppend(" is ", 2, " point ", 5, str); 
```

我唯一的猜测是为了提高效率，但是将 std::string 转换为 cstring 是否比传递 std::string 的引用更有效？也许对 cstring 的实际操作比调用 std::string 成员函数更快？或者，如果他们只有一个 cstring 开头，也许他们可以调用该函数？嗯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:57:03.830

这只是一个常见的约定，旨在强调最后一个参数是输出这一事实。通常，最好使用引用而不是指针来定义参数，因为引用保证不为空，但有些人喜欢`&`在调用函数时看到，以提醒自己参数是输出。

# ruby-on-rails - 为什么这个 where 子句没有返回正确的记录？- 导轨 3

> ID：10868016
> 
> 赞同：1
> 
> 时间：2012-06-03T04:59:41.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
=> #<Gig id: 59, date: "2012-06-01 00:00:00", title: "Awesome Record", url: "http://someurl.com", body: nil, reply_email: nil, industry_id: nil, created_at: "2012-06-03 03:06:45", updated_at: "2012-06-03 03:06:45"> 

1.9.2-p0 :046 > Gig.where(:date => "2012-06-01 00:00:00")
  Gig Load (0.3ms)  SELECT "gigs".* FROM "gigs" WHERE "gigs"."date" = '2012-06-01 00:00:00'
 => [] 
1.9.2-p0 :043 > Gig.where(:date => "2012-06-01")
  Gig Load (0.3ms)  SELECT "gigs".* FROM "gigs" WHERE "gigs"."date" = '2012-06-01'
 => [] 
1.9.2-p0 :044 > Gig.where(:date => "June 01")
  Gig Load (0.6ms)  SELECT "gigs".* FROM "gigs" WHERE "gigs"."date" = 'June 01'
 => [] 
1.9.2-p0 :045 > Gig.where(:date => "June 1")
  Gig Load (32.9ms)  SELECT "gigs".* FROM "gigs" WHERE "gigs"."date" = 'June 1'
 => [] 
```

我要做的就是在此表中找到具有特定“日期”的记录（甚至是在日期范围内的记录）。但是上面的基本 where 子句不起作用。

我究竟做错了什么？

**编辑 1**

我将日期输出为字符串，通过`to_s`这是输出：

```
d.date
 => Fri, 01 Jun 2012 00:00:00 UTC +00:00 
1.9.2-p0 :079 > d.date.to_s
 => "2012-06-01 00:00:00 UTC" 
```

不确定这是否会有所帮助....但我什至尝试将这些字符串作为 where 子句的条件，它仍然返回一个空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:12:13.913

试试这些：

```
Gig.where(:date => "2012-06-01 00:00:00 +00.00")
Gig.where("date like '2012-06-01%'")
Gig.where("DATE(date) = '2012-06-01'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:15:49.857

试一把：

```
Gig.where('date = ?', '2012-06-01 00:00:00') 
```

# iphone - (void)drawRect:(CGRect)rect iOS 5.1 OpenGL ES 2.0 中的错误

> ID：10868019
> 
> 赞同：1
> 
> 时间：2012-06-03T05:00:32.830
> 
> 标签：iphone, objective-c, ios5

我正在尝试通过 opengl es 2.0 模板在屏幕上绘制图像。它在 MyGLKView 的 (void)drawRect:(CGRect)rect 中显示以下错误。有什么想法可以解决这个问题吗？谢谢！！

CGContextSaveGState：无效上下文 0x0
CGContextSetBlendMode：无效上下文 0x0
CGContextSetAlpha：无效上下文 0x0
CGContextTranslateCTM：无效上下文 0x0
CGContextScaleCTM：无效上下文 0x0
CGContextDrawImage：无效上下文 0x0
CGContextRestoreGState：无效上下文 0x0

我的GLKView.m

```
#import "MyGLKView.h"
@implementation MyGLKView

@synthesize pUIImage;

//- (id)initWithFrame:(CGRect)frame
- (id)initWithFrame:(CGRect)frame context:(EAGLContext *)context
{
    //if (self = [super initWithFrame:frame])
    if (self = [super initWithFrame:frame context:context])
    {
        // Initialization code
        pUIImage = [UIImage imageNamed:@"star-green.png"];
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    [pUIImage drawAtPoint:CGPointMake(0, 0)];
}

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "MyGLKView.h"

@implementation ViewController

@synthesize pContext;

- (void)viewDidLoad
{
    [super viewDidLoad];
    pContext = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!pContext)
    {
        NSLog(@"Failed to create ES context");
    }

    //MyGLKView *pMyGLKView = [[MyGLKView alloc] init];
    //pMyGLKView.context = pContext;
    //self.view = pMyGLKView;
    self.view = [[MyGLKView alloc] initWithFrame:[[UIScreen mainScreen] bounds] context:pContext];
}

- (void)viewDidUnload
{    
    [super viewDidUnload];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc. that aren't in use.
}

- (void)update
{

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:12:43.977

`GLKView`为is指定的初始值设定项`-initWithFrame:context:`。你应该实现那个， not `-initWithFrame:`，并在`super`.

# flash - 角色扮演游戏的 Flash SWF 替代保存方法

> ID：10868021
> 
> 赞同：0
> 
> 时间：2012-06-03T05:00:54.120
> 
> 标签：flash, actionscript-2

我正在寻找替代的保存游戏方法，包括如果一个人存储或保存他的数据，它不能被删除，即使他清除了他/她的缓存+cookies。谁能告诉我一些加载和保存用户数据的方法；即使他或她清除了缓存+cookie，也无法删除。仅在 ActionScript 2 中期待答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:18:06.060

如果你想将它本地存储到机器上，我认为[SharedObject](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=Part2_AS2_LangRef_1.html)将最接近你想要的。否则，您将需要[连接到服务器](http://search.atomz.com/search/?sp-p=any&sp-f=iso-8859-1&sp-g=2&sp-a=sp040c2f00&sp-q=php%20mysql)并将信息存储在那里。

# php - 使用 PHP 将 MySQL-spatial 更改为 geoJson

> ID：10868025
> 
> 赞同：2
> 
> 时间：2012-06-03T05:01:33.993
> 
> 标签：php, mysql, gis, geojson

我有一个形状文件，我想通过使用传单 (http://leaflet.cloudmade.com/) 在网络上显示它。由于传单只支持geoJSON，我应该将shp文件更改为geoJSON。这很容易，因为我可以在 Quantum-GIS 中使用“另存为”功能。

虽然我可以使用 geojson 作为数据库（通过以编程方式读取、编辑和写入文件），但我认为使用“真实”数据库会更好。MySQL 是最流行的一种，它支持空间数据，所以我决定使用 MySQL。

场景是：

1.  将 shp 更改为 MySQL（我使用 ogr2ogr，只需运行以下命令：*ogr2ogr -f "MySQL" MySQL:"geo,user=root,host=localhost,password=toor" -lco engine=MYISAM airports.shp*）
2.  将 MySQL 数据库提取到 geojson **<--这是问题所在**
3.  使用 ajax 获取 geojson 并更改布局 <- 这应该很容易，我对 JQuery 很好

My MySQL 表中有一个列，其类型为“GEOMETRY”，请看下面的表定义：

```
CREATE TABLE IF NOT EXISTS `airports` (
  `OGR_FID` int(11) NOT NULL AUTO_INCREMENT,
  `SHAPE` geometry NOT NULL,
  `cat` decimal(10,0) DEFAULT NULL,
  `na3` varchar(80) DEFAULT NULL,
  `elev` double(32,3) DEFAULT NULL,
  `f_code` varchar(80) DEFAULT NULL,
  `iko` varchar(80) DEFAULT NULL,
  `name` varchar(80) DEFAULT NULL,
  `use` varchar(80) DEFAULT NULL,
  UNIQUE KEY `OGR_FID` (`OGR_FID`),
  SPATIAL KEY `SHAPE` (`SHAPE`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=77 ; 
```

有什么办法可以将这样的表格更改为 geojson 格式？（我更喜欢简单的方法，但如果没有，只需将列更改为数组即可）

**编辑：** 我使用 phayes 编写的 geophp。 [https://github.com/phayes/geoPHP/wiki/Example-format-converter](https://github.com/phayes/geoPHP/wiki/Example-format-converter)。这解决了主要问题。只需要在添加功能等方面有点混乱。有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:40:00.957

虽然可能没有从 mysql 空间实体转换为 geojson 的直接方法，但您可以尝试以下方法：

*   获取实体的 WKT（众所周知的文本）。( [MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/gis-wkt-format.html))
*   从 WKT 转换为 geojson（[在 perl 中完成](http://sorokine.blogspot.com.au/2009/12/blog-post.html)，尽管您应该能够用其他语言找到它或用 javascript 编写自己的语言）；

请注意，正如其他人所建议的那样，仅在实体上调用 jsonEncode() 不会产生 geoJson。

我个人的建议（不能直接回答您的问题）是以您需要检索的格式存储数据。这将减少每次需要时处理数据所需的开销。

最简单的方法是按照您的建议将 geojson 存储为纯文本。如果出于某种原因，您还需要以本机格式存储的几何图形，则可以将其存储在另一列中。唯一的缺点是保持两列同步。

# if-statement - 如何在批处理文件的“如果”中使用多个条件？

> ID：10868026
> 
> 赞同：11
> 
> 时间：2012-06-03T05:02:00.677
> 
> 标签：if-statement, batch-file

我可以在批处理文件`if`块中使用“或”/“和”指定多个条件吗？

如果不是那么复杂，我至少可以使用类似的东西：

```
if value1 < value < value2 
```

基本上我的目的是检查当前系统时间是否在某个时间间隔内（准确地说是 2.05 AM 和 7.55 AM），如果是，则执行某些命令。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-03T18:14:16.067

添加到 dbenham 的答案中，您可以使用`if`和`goto`语句的组合来模拟两个逻辑运算符（AND、OR）。

测试*condition1 AND codition2*：

```
 if <condition1> if <condition2> goto ResultTrue

:ResultFalse
REM do something for a false result
    goto Done

:ResultTrue
REM do something for a true result

:Done 
```

要测试*condition1 OR code2*：

```
 if <condition1> goto ResultTrue
    if <condition2> goto ResultTrue

:ResultFalse
REM do something for a false result
    goto Done

:ResultTrue
REM do something for a true result

:Done 
```

标签当然是任意的，您可以选择它们的名称，只要它们是唯一的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-03T05:16:50.800

批处理中没有逻辑运算符。但是 AND 很容易用两个 IF 语句来模仿

```
if value1 lss value if value lss value2 REM do something 
```

批处理 IF 语句不知道如何比较时间。Batch IF 知道如何比较整数和字符串。

一种选择是将时间转换为午夜过后的分钟或秒。

另一个选项是用小时、分钟（和秒，如果需要）来格式化时间，每个都是 2 位宽（0 前缀根据需要）。小时应为 24 小时格式（军用时间）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-14T09:53:21.373

您可以将条件分解为 2 并使用 if 和 if 设置 2 个条件

```
if %value% GTR %value1% (
echo Value is greater that %value1% ) else call :Error
if %value% LSS %value2% (
echo Value is less than %value2% ) else call :Error
::Write your Command if value lie under specified range
exit

:Error
echo Value doesn't lie in the range 
::Write your command for if value doesn't lie in the range
exit 
```

# objective-c - 交错的 NSTimer 触发

> ID：10868031
> 
> 赞同：0
> 
> 时间：2012-06-03T05:03:06.927
> 
> 标签：objective-c, ios, core-animation, nstimer, uiviewanimation

我有四个运行良好的 NSTimer。唯一的问题是两个应该开火，然后另外两个应该在前两个中间开火。这是我的代码：

```
 initTimer = [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector: @selector(initText) userInfo:nil repeats:YES];
   animateTimer = [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector: @selector(textGlow) userInfo:nil repeats:YES];
   initTimer1 = [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector: @selector(initText1) userInfo:nil repeats:YES];
   animateTimer1 = [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector: @selector(textGlow1) userInfo:nil repeats:YES]; 
```

initText 和 initText1 方法创建一个带有惰性实例化的 UILabel 并将它们放在屏幕上的同一位置。textGlow 和 textGlow1 方法为文本设置动画，使其变大并逐渐消失。我希望 initText1 和 textGlow1 在 initText 和 textGlow 中间触发。例如，假设这些方法中的每一个都需要 2 秒（我将动画持续时间设置为 2 秒）。我希望 initText 和 textGlow 触发，然后一秒钟后 initText1 和 textGlow1 触发。

谢谢。如果您需要我的任何其他代码来帮助回答问题，请询问。

- - - - - 编辑 - - - - - - -

@MDT 那行得通，但有一个问题。我所做的是将上面的 initTimer1 和 animateTimer1 的代码放在名为 initTimer1Wrapper 和 animateTimer1Wrapper 的新函数中。然后我做了你的代码`[self performSelector:@selector(initText1Wrapper) withObject:nil afterDelay:1.0];`并复制了它，但将选择器更改为 animateText1Wrapper。发生的情况是 initText 和 textGlow 将按计划触发，然后按计划 initTimer1 和 animateTimer1 将触发一秒，但意外发生的是 initText 和 textGlow 没有完成剩余的一秒；动画只是停止。我相信这是因为它们是 UIView 动画，`[UIView beginAnimation:@"name" context:nil]`并且`[UIView commitAnimations]`超过 1 个 UIView 动画不能同时运行。

要解决这个问题，我应该使用核心动画（我对此一无所知）还是有其他解决方案？谢谢。

----------EDIT2-------------

另外，如果您知道这很重要，我将使用 UIGestureRecognizer 关闭此动画。就像是：

```
if(screenIsTapped){
    [initTimer invalidate];
    [animateTimer invalidate];
    [initTimer1 invalidate];
    [animateTimer1 invalidate];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:10:56.013

尝试将这样的东西放在里面`initText`或`textGlow`。

```
[self performSelector:@selector(initText1) withObject:nil afterDelay:1.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:16:02.203

我认为您应该使用 2 个计时器而不是 4 个计时器来执行此操作。在方法内部，initText 和 initText1 只需分别使用 performSelector:withObject:afterDelay: 调用 textGlow 和 textGlow1：无论您想要什么延迟。而且，您真的希望这些计时器重复吗？你想继续创建新的 UILabel 吗？

# jquery - jQuery按从最小值到最大值的顺序显示日期

> ID：10868035
> 
> 赞同：0
> 
> 时间：2012-06-03T05:04:32.313
> 
> 标签：jquery, datepicker

我很高兴收到关于我的另一个问题的以下日期排序代码:) 但我有一个快速查询。

**如何按从 min-date 到 max-date 的顺序显示 min-date 和 max-date 的结果？**

**jQuery：**

```
$(function() {
    $.datepicker.setDefaults({ dateFormat: "dd/mm/yy" }); //sets default datepicker's dateFormat
    $("#mindate, #maxdate")
        .datepicker() //initializes both of the date inputs as jQuery UI datepickers
        .on('keypress keyup change blur', function(){ filter(); }); //sets listeners to filter the table on the fly
});

function filter(){
    $('tr').show(); //resets table to default before executing the filter
    datefields = $('table.bordered tr td:nth-child(2)'); //stores a jquery oject containing all tds of the 2nd column (dates)
    datefields.each(function(){ //iterates through them..
        var evdate = pdate($(this).html()); //evaluates each of their dates as date objects
        var mindate = pdate($('#mindate').val()); //evaluates the entered mindate (will return false if not valid*)
        if (mindate) //checks if the mindate is valid
            if (evdate < mindate)
                $(this).parent().hide(); //hides the row if its date is previous to the mindate
        var maxdate = pdate($('#maxdate').val()); //repeats same as above, now for maxdate filtering
        if (maxdate)
            if (evdate > maxdate)
                $(this).parent().hide(); //hides the row if its date is after the maxdate
    });

}

function pdate(str){ //parse date function, receives a string and returns a date if it's valid or false if it isn't
    if (!isValidDate(str))
        return false; //returns false if the date isn't valid
    var parts = str.split("/");
    // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
    return new Date(parts[2], parts[1]-1, parts[0]);
}

//this is my custom date validating function, much better than those which you may find in the web :P
function isValidDate(date)
{    
    parts = date.split('/');
    if (parts.length != 3)
        return false;
    else if (parts[0] == '' || /[^0-9]/.test(parts[0]) || parts[1] == '' || /[^0-9]/.test(parts[1]) || parts[2] == '' || /[^0-9]/.test(parts[2]))
        return false;

    day = parts[0];
    month = parts[1];
    year = parts[2];

    if (year >= 1800 && year <= 2200) //define the limits of valid dates
    {
        if (day > 0 && day <= 31 && month > 0 && month <= 12)
        {  
            if ((month == 4 || month == 6 || month == 9 || month == 11) && day > 30)
                return false;
            if (month == 2)
            {
                if (year%4 == 0 && (year%100 != 0 || year%400==0))
                {
                    if (day > 29)
                        return false; 
                }
                else if (day > 28)
                    return false;
            }
            return true;
        }
        else
            return false;
    }
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:46:42.890

这是一个可以工作的补充功能：

```
function orderAsc(td){
    var evdate = pdate(td.html());
    var datefields = $('table.bordered tr td:nth-child(2)');
    datefields.each(function(i){
        var tempdate = pdate($(this).html());
        if (evdate > tempdate)
            td.parent().before($(this).parent());
    });
} 
```

然后只需从你的`filter()`函数内部调用它`.each`with `orderAsc($(this))`。

我建议仅在您第一次加载页面以及将新内容加载到其中以节省客户端的 CPU 处理时才对表格进行排序，无论如何，这是带有一些评论的[工作小提琴。](http://jsfiddle.net/ult_combo/zHRv4/16/)=]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:56:10.463

然后你必须使用你**可以为你的结果调用每个新负载进行排序**

即jQuery

1-如果您想使用此问题答案[Using jQuery tablesorter to sort mm/yy dates](https://stackoverflow.com/questions/450936/using-jquery-tablesorter-to-sort-mm-yy-dates) 它很有用但需要自定义。

2-[使用 jQuery 对元素进行排序](http://tablesorter.com/docs/)

要使用 tablesorter 插件，请在 HTML 文档的标记中包含 jQuery 库和 tablesorter 插件：

```
<script type="text/javascript" src="/path/to/jquery-latest.js"></script> 
<script type="text/javascript" src="/path/to/jquery.tablesorter.js"></script> 
```

tablesorter 适用于标准 HTML 表格。您必须包含 THEAD 和 TBODY 标签：

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@gmail.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@yahoo.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@hotmail.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@earthlink.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.com</td> 
</tr> 
</tbody> 
</table> 
```

首先告诉 tablesorter 在加载文档时对表格进行排序：

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
```

单击标题，您会看到您的表格现在可以排序了！您还可以在初始化表时传入配置选项。这告诉 tablesorter 按升序对第一列和第二列进行排序。

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter( {sortList: [[0,0], [1,0]]} ); 
    } 
); 
```

**注意**！tablesorter 将自动检测大多数数据类型，包括数字、日期、IP 地址以获取更多信息，请参阅[示例](http://tablesorter.com/docs/#Examples)

# java - 从 google play 中提取统计数据

> ID：10868037
> 
> 赞同：7
> 
> 时间：2012-06-03T05:04:46.337
> 
> 标签：java, google-play

我正在建立一些统计数据，并希望从谷歌播放（应用商店）获得统计数据。最受欢迎、下载量、价格等信息。

有谁知道这是否有一个 API 或者我必须自己刮掉它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T16:09:38.277

有一个名为 android-market-api [http://code.google.com/p/android-market-api](http://code.google.com/p/android-market-api)的项目。从那里开始。

[http://code.google.com/p/android-market-api/source/browse/trunk/AndroidMarketApi/proto/market.proto](http://code.google.com/p/android-market-api/source/browse/trunk/AndroidMarketApi/proto/market.proto)。查看那里的 App 定义以了解您可以提取的内容。

你可以问问写它的人他是如何逆向设计Android市场的协议的。

使用它，您可以进行搜索，然后获取每个应用程序的信息。

# iphone - 如何检查用户是否喜欢一个页面？

> ID：10868039
> 
> 赞同：3
> 
> 时间：2012-06-03T05:05:19.803
> 
> 标签：iphone, objective-c, facebook

我想检查用户是否喜欢我的页面。在这里，我初始化了对用户喜欢列表的请求......

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"])
{
    [self.facebook setAccessToken:[defaults objectForKey:@"FBAccessTokenKey"]];
    [self.facebook setExpirationDate:[defaults objectForKey:@"FBExpirationDateKey"]];
}

if (![self.facebook isSessionValid])
{
    [self.facebook authorize:[[NSArray alloc] initWithObjects:@"publish_stream, user_likes", nil]];
}
else
{
[self.facebook requestWithGraphPath:@"me/likes" andParams:nil andHttpMethod:@"POST" andDelegate:self];    
} 
```

代码执行到 requestWithGraphPath。但是它永远不会起作用，我得到“操作无法完成。（facebookErrDomain 错误 10000。）”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T15:31:40.973

你需要一个获取请求而不是 POST 所以我认为你的问题在这里：

```
[self.facebook requestWithGraphPath:@"me/likes" andParams:nil andHttpMethod:@"POST" andDelegate:self]; 
```

这需要是：

```
[self.facebook requestWithGraphPath:@"me/likes" andParams:nil andHttpMethod:@"GET" andDelegate:self]; 
```

这将为您提供完整的喜欢列表。但是，如果您想找到一个喜欢，看起来您必须执行 FQL 查询才能：

```
https://api.facebook.com/method/fql.query?query=SELECT+user_id%2Cobject_id%2C+post_id+FROM+like+WHERE+user_id%3Dme%28%29%20and%20object_id=<OBJECT_ID_TO_CHECK>&access_token=<YOUR_ACCESS_TOKEN> 
```

通过 iOS SDK 执行此操作，如下所述： [https](https://stackoverflow.com/a/6372236) ://stackoverflow.com/a/6372236 ，如果您收到用户喜欢的任何内容。让我知道这是否有帮助。谢谢！

**编辑：**您实际上可以使用图形 api 进行单个查询。就像这样：

```
https://graph.facebook.com/me/likes/<OBJECT_ID> 
```

因此，只需将您的对象 ID 放入请求中：

```
[self.facebook requestWithGraphPath:@"me/likes/<OBJECT_ID>" andParams:nil andHttpMethod:@"GET" andDelegate:self]; 
```

你应该很好。

# python - 使用python在heroku中连接postgresql时如何使用dj-database-url

> ID：10868040
> 
> 赞同：5
> 
> 时间：2012-06-03T05:05:19.897
> 
> 标签：python, postgresql, heroku

我在这里是因为我对 heroku-python-django-postgresql 组真的很陌生。我搜索了 dj-database-url 的用法，但我不明白为什么在开发需要与 postgresql 连接的 python 应用程序时必须使用它。我已将 postgresql（开发版）作为附加组件添加到我的应用程序中，但我不知道如何告诉应用程序我希望它使用我的数据库。

所以，简短的问题是，我如何向 dj-database-url 表明我想使用我的数据库？

感谢您的时间和回答，我将感谢您的帮助，因为这是非常非常紧急的！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T10:56:50.843

dj-database-url 是一个实用程序，可帮助您将数据库从 DATABASE_URL 环境变量加载到字典中。Heroku 为您的数据库和其他插件使用环境变量。要开始使用您的数据库，您只需使用以下命令来设置您的 DATABASES 字典：

```
import dj_database_url
DATABASES['default'] = dj_database_url.config() 
```

并且可能将 DATABASE_URL 存储在您的 virtualenv 激活脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T18:55:15.603

可能对 setting.py 中的参数有帮助

```
DATABASES = {
    "default": dj_database_url.config(
        default="postgres://postgres:saleor@localhost:5432/saleor", conn_max_age=600
    )
} 
```

默认字符串中的“数据库 url”具有值 postgresql://[user[:password]@][netloc][:port][/dbname][?param1=value1&...]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-19T08:45:00.197

使用 pip 模块 dj-database-url。添加一个名为“DATABASE_URL”的环境变量和来自 heroku db 设置的值。

重要的是，为了避免错误“NameError: name 'DATABASES' is not defined。” 例如，您仍然必须保留默认的 DATABSE 设置。

完整代码：

```
import dj_database_url

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'mydatabase',
    }
}
DATABASES['default'] = dj_database_url.config() 
```

# php - php sql中的UPDATE不更新数据库

> ID：10868043
> 
> 赞同：2
> 
> 时间：2012-06-03T05:05:50.500
> 
> 标签：php, mysql, sql, sql-update

我有一个页面标题 changepassword.php ... 在这个页面中，用户可以更改他们的帐户密码。查询通过并给出它发送的消息，但是，数据库没有改变。密码和以前一样。我正在使用我不习惯的 sha1 哈希（第一次使用它）。有谁知道它发生了什么？谢谢！

```
 <?php

    session_start ();

    $user_name = $_SESSION['user_name'];

    if($user_name)
    {
    //user is logged in

    if(isset($_POST['submit']))
    {
    //check fields

    $oldpassword = $_POST['oldpassword'];
    $newpassword = $_POST['newpassword'];
    $repeatnewpassword = $_POST['repeatnewpassword'];

    //check password against db

    $connect=mysql_connect("localhost","root","passssssssword") or die();
    mysql_select_db("database") or die();

    $queryget= mysql_query ("SELECT user_pass FROM users WHERE user_name='$user_name'")         or die("Query didn't work.");
    $row = mysql_fetch_assoc ($queryget);

    $oldpassworddb = $row['user_pass'];

    //check passwords

if (sha1($oldpassword)==$oldpassworddb)
{
    if ($newpassword==$repeatnewpassword)
    {
        if (strlen ($newpassword)>25 || strlen ($newpassword)<6)
        {
        echo "Password must be between 6 and 25 characters";
        }
        else
        {
        //change password in db 

        $newpassword = sha1($newpassword);

        $querychange = mysql_query("UPDATE users SET         password='$newpassword' WHERE user_name='$user_name'");
        session_destroy();
        die ("Your password has been changed. <a         href='index.php'>Return</a> to the main page and login with your new password.");
        }

    }
    else
        die ("New passwords do not match!");

}
else
    die ("Old password is inncorrect!");

    }

    else
    {
    echo
    "<form action = 'changepassword.php' method = 'POST'>
    <table>
    <tr>
        <td>
    Old password: 
        </td>
        <td>
    <input type='text' name='oldpassword'><p>
        </td>
    </tr>
    <tr>
        <td>
    New password: 
        </td>
        <td>
    <input type='password' name='newpassword'>
        </td>
    </tr>
    <tr>
        <td>
    Repeat new password: 
        </td>
        <td>
    <input type='password' name='repeatnewpassword'>
        </td>
    </tr>
    <table>
    <input type='submit' name='submit' value='Change password'>
    </form>
    ";
    }

    }
    else
die("You must be logged in to change your password!");
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T05:15:59.550

查询_1：

```
SELECT user_pass FROM users WHERE user_name='$user_name' 
```

您的查询_2：

```
UPDATE users SET **password**='$newpassword' WHERE user_name='$user_name' 
```

但是，Query_2 应该是：

```
UPDATE users SET **user_pass**='$newpassword' WHERE user_name='$user_name' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:19:42.123

不确定文字/单引号是否允许 PHP 插入变量。我通常也使用 sprintf。此外，通常您不想只检查用户名，而是用户名和旧密码。

```
"SELECT user_pass FROM users WHERE user_name='$user_name'" 
```

应该是： $sql = sprintf("select user_pass from users where user_name = "%s",$user_name);

另外，如果你输出mysql_error()，你的“die()”会更好，即

```
 $connect=mysql_connect("localhost","root","passssssssword") or die();
mysql_select_db("database") or die("cannot connect".mysql_error()); 
```

但是，可能最快的故障排除方法是在 mysql_query 上输入错误：

```
$sql = sprintf("UPDATE users SET  password="%s" WHERE user_name="%s"",$newpassword,$user_name);
$querychange = mysql_error($sql) or die ("Error updating: ".mysql_error()); 
```

# xml - Clojure：data.xml：创建名为“xlink:href”的键

> ID：10868050
> 
> 赞同：3
> 
> 时间：2012-06-03T05:08:57.800
> 
> 标签：xml, clojure, xml-namespaces

## 语境

我正在使用 data.xml 从 clojure 输出一个 xml 文件。我需要输出以下行：

```
<use xlink:href="#whiskers" transform="scale(-1 1) translate(-140 0)" /> 
```

（我们正在用 SVG 画一只猫）。

现在，我的尝试是这样的：

```
(indent-str (element :use {:xlink:href "#whiskers",
               :transform "scale(-1 1) translate(-140 0)"})) 
```

这失败了，因为 :xlink:href "#whiwksers" 显然被解释为： :xlink , :href "#whiskers"

## 问题

如何创建 clojure 符号以将“xlink:href”作为 data.xml 的字段输出？

## 编辑

我试过了：（关键字“xlink:href”）

仍然是同样的错误。不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:55:23.507

我不确定这里有错误。

```
(def e (element :use {:xlink:href "#whiskers",
          :transform "scale(-1 1) translate(-140 0)"}))

(println (emit-str e))
=> <?xml version="1.0" encoding="UTF-8"?><use xlink:href="#whiskers" transform="scale(-1 1) translate(-140 0)"></use> 
```

该`indent-str`函数有一个问题：

```
(println (indent-str e))
org.xml.sax.SAXParseException: The prefix "xlink" for attribute "xlink:href" 
associated with an element type "use" is not bound. 
```

所以它似乎`clojure.data.xml`是命名空间感知的。让我们试试这个：

```
(def e-the-sequel (element :use {:xmlns:xlink "http://testing", 
                                 :xlink:href "#whiskers",
                                 :transform "scale(-1 1) translate(-140 0)"}))

(println (indent-str e-the-sequel))
=> <?xml version="1.0" encoding="UTF-8"?>
<use xmlns:xlink="http://testing" xlink:href="#whiskers" 
     transform="scale(-1 1) translate(-140 0)"/> 
```

这样更好。如果有的话，我想您可能会认为这`emit-str`是错误的，因为它没有引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:23:18.627

试试这个：

```
(element :use {:xlink/href "#whiskers",
               :transform "scale(-1 1) translate(-140 0)"}) 
```

# c++ - C++ 列表和指针

> ID：10868052
> 
> 赞同：4
> 
> 时间：2012-06-03T05:09:11.463
> 
> 标签：c++, pointers, linked-list, member-functions

我正在做作业，想知道这实际上定义为：

```
list < NAME > * m_ofList 
```

名称的来源是`struct`这样的：

```
typedef struct name
{
    int age;
    int height;
} NAME; 
```

我想知道它是什么，所以我知道如何插入或访问它：`push_back`、、`insert`等*。*

所以我现在明白了，但是由于某种类型的内存访问，我被卡住了：它会产生分段错误，我一直无法弄清楚。我需要在哪里初始化我的新列表？它在构造函数或函数中不起作用。仅供参考，它是一个私有列表，因此它只能用于成员函数（即 m_ofList）。如果有人愿意提供帮助，我可以生成代码...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T05:18:29.347

假设`using namespace std`or `using std::list`，这是指向类/结构名称的对象列表的指针。要将对象放入其中，首先需要对其进行初始化：

```
m_ofList = new list<NAME>; 
```

或者：

```
m_ofList = &(some already initialized list of NAME objects); 
```

然后你可以把物品放进去：

```
NAME x;
x.age = 15;
x.height = 150;
m_ofList->push_back(x);
m_ofList->insert(m_ofList->begin(), x); 
```

如果您使用 动态分配列表`new`，则需要在完成后正确处理它：

```
delete m_ofList; 
```

我的问题是，为什么它首先是一个指针？您可以像这样声明它（如您所愿）：

```
list<Name> m_ofList; 
```

然后你就不用担心处理它了。这将通过范围规则来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:34:45.457

无论您选择保存在列表中的数据类型如何，成员函数都将保持不变。[可以在此处](http://www.cplusplus.com/reference/stl/list/)
找到有关可以为 STL 列表容器调用哪些成员函数的文档。 您可以创建包含任何数据类型的列表，因为它们是使用称为模板的构造构建的。模板允许您创建不同数据类型的列表。 例子：

```
#include <list>
#include <string>
#include <cstdlib>

int main(){

    //here is a list that can only hold integers
    std::list<int> list1{1,2,3,4,5};

    //here is a list that can only hold characters
    std::list<char> list2{'a','b','c','d','e'};

    //we can create a new type to represent a person
    struct person{
        std::string name;
        int age;
        int height;

        person(std::string const& name_, int const& age_, int const& height_):
        name(name_), age(age_) ,height(height_){}
    };

    //and now that we have a new person type, we can create a list to hold people
    std::list<person> list3{{"John",21,70},{"Jane",20,68}};

    return EXIT_SUCCESS;
} 
```

> 用 g++ -std=c++0x -o main main.cpp 编译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T05:11:44.367

在 C++ 中，这很可能是一个 STL 列表。你可以在这里找到一些文档：[http ://www.sgi.com/tech/stl/List.html](http://www.sgi.com/tech/stl/List.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:20:13.897

它是一个`STL list`变量、结构或对象的链接列表。它支持任意位置的插入、删除操作。在`list < NAME > * m_ofList`m_oflist 中是一个指向Name 对象列表的指针。[这是关于STL 列表](http://www.yolinux.com/TUTORIALS/LinuxTutorialC++STL.html#LIST)的一个很好的教程。

# facebook - 以编程方式在 Windows Phone 中访问 Windows Live ID/Facebook 身份验证

> ID：10868054
> 
> 赞同：0
> 
> 时间：2012-06-03T05:09:38.597
> 
> 标签：facebook, windows-phone-7, c#-4.0, windows-live-id, onedrive

我有一个与 Windows Live ID 和 Facebook 帐户相关联的 Windows Phone。
我想使用这个内置的 Windows Live Id 信息来访问 SkyDrive（就像 Microsoft Office Mobile 和其他一样）。特别是，我不想使用 Windows Phone 7.5 的 SkyDrive API 并再次重写整个代码以供用户发现和验证。因为，我相信如果用户的手机可以同步到 SkyDrive，那么用户已经通过了身份验证，可以访问 skydrive 和其他微软在线服务。与通过 Windows Phone 访问 Facebook 的情况类似。

但我无法弄清楚，因为我怎样才能发现这个内置的身份验证信息。

任何帮助将不胜感激。提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:52:30.880

WP7 不会给你 ID。您必须使用 SkyDrive 的 / Facebook 的 API 来获取凭据和所需信息。

用户必须明确授予您的应用程序对 SkyDrive / Facebook 的访问权限。即使用户已授予他手机的操作系统（和内置应用程序）访问权限，这并不意味着任何其他应用程序都可以自动访问 SkyDrive / Facebook。

SkyDrive 有一个易于使用的 SDK（它提供了一个 Button 控件，可以满足您的所有需求），我猜 Facebook 也有 SDK。

# objective-c - 如果在 xcode 中以编程方式创建标签时语句不起作用

> ID：10868056
> 
> 赞同：0
> 
> 时间：2012-06-03T05:09:58.427
> 
> 标签：objective-c, xcode, if-statement, uilabel

我在选项卡视图控制器中设置问题（标签）的方法中设置了一个 if 语句。该代码从 xml 文件和当前选项卡视图标题中获取数据来设置问题。在第一次调试代码运行时，它给了我“Page 1”==“Page 1”并执行操作，但是当我在选项卡栏上选择另一个视图控制器时，我得到“Page 2”==“Page 2”虽然调试，但它不使用 if 语句执行逻辑。如果我让它 if(1){logic} 它两次都执行逻辑，但不会将我的问题分成第 1 页和第 2 页。视图和视图名称是使用来自同一个 xml 文件的信息动态创建的，所以有没有拼写错误的机会。

这是有问题的代码。任何帮助都会很好，因为经过数小时的尝试思考和在线搜索试图找出为什么真正的 if 语句第二次无法通过代码工作，我感到头疼。

```
//setup questions at runtime  --not working--

-(void)setupQuestions{

    int lableY = 85;

    NSString *pageTital = self.pageTabViewLable.title;
    NSString *questionPage;

    for (int i = 0; i < self.question_array.count; i++) {

        self.currentQuestion = [self.question_array objectAtIndex:i];  //Get information of current Question from array

        questionPage = self.currentQuestion.Page;

        if (pageTital == questionPage){

            //Create a Dynamic Label for Question.
            UILabel *lablel;
            CGRect lableFrame = {155,lableY,600,25};
            lablel = [[UILabel alloc] initWithFrame:lableFrame];
            lablel.text = self.currentQuestion.Question;
            [self.view addSubview:lablel];
            lableY += 90;               //lable spacing

        }
    }
} 

//at runtime setup tabs  --working--

-(void)setupTabPages{

    NSMutableArray* newArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];  //Create a array to hold tab veiws

    if( newArray.count != self.totalTabPageCount)  //check to see is amount of veiws and cussrent reated views are the same
    {

       self.pageTabViewLable.title = [xmlParser1 getPageWithIndexLocation:0];  //set text of inital view

        UIStoryboard *storyboard = self.storyboard; //get storyboard context information from view name

        if (self.totalTabPageCount != -1) {     //check for xml error

            for (int i = 1; i < self.totalTabPageCount; i++) {  //create additional views from storyboard view
                Check_StratusViewController *cvc = [storyboard instantiateViewControllerWithIdentifier:@"Check_StratusViewController1"];
                cvc.pageTabViewLable.title = [xmlParser1 getPageWithIndexLocation:i];
                [newArray addObject:cvc];

            }

            [self.tabBarController setViewControllers:newArray animated:YES];  //add the views
        } 

    }

    self.totalQuestionCount = [xmlParser1 getTotalQuestionCount];

    self.currentQuestion = [[Question alloc] init];
    self.question_array = [[NSMutableArray alloc] init];

    for (int i = 0; i < self.totalQuestionCount; i++) {
        [self.question_array addObject:[xmlParser1 getQuestionAtIndelLocation:i]];
    }

    [self setupQuestions];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:19:42.343

你不应该使用 pageTital == questionPage 来比较 2 个字符串，你应该使用 [pageTital isEqualToString questionPage]

# c++ - 从另一个类访问 Mainwindows 私有变量的正确方法

> ID：10868063
> 
> 赞同：0
> 
> 时间：2012-06-03T05:12:25.557
> 
> 标签：c++, qt

我正在开发一个程序，在该程序中我创建了几个堆叠的窗口以使用不同的功能。这些窗口是在各自独立的类中制作的。其中一个堆叠的窗口有几个停靠点，我想让它们可以从窗口菜单中切换以显示或隐藏它们。如果它们是主窗口类的一部分，我可以这样做，但文件很大。我的问题是，当我让编辑器类继承主窗口时，我似乎无法显示布局，因为主窗口已经有了布局。即便如此，编译器仍然会为将操作添加到菜单的行抛出错误。是否有人对我如何将它们保存在单独的类中但仍然能够使用主窗口类的私有成员有任何建议。感谢您在高级的帮助！

调用编辑器页面的主窗口的一部分

```
MainWindow::MainWindow(QWidget *parent)
{
createActions();
createMenu();
createStatusBar();
createDocks();

createMainWidget();

readSettings();

setWindowTitle("Black Ops Bsuiness Group's ERP System - Version 0.0.0.1");
}

void MainWindow::createMainWidget()
{
contentsIconWidget = new QListWidget();
contentsIconWidget->setViewMode(QListView::IconMode);
contentsIconWidget->setIconSize(QSize(70,70));
contentsIconWidget->setMovement(QListView::Static);
contentsIconWidget->setMaximumWidth(75);
contentsIconWidget->setMinimumWidth(75);
contentsIconWidget->setSpacing(10);
contentsIconWidget->setStyleSheet("QListWidget {background-color:#333;    color:#0099FF;}");

mainContentPages = new QStackedWidget();
mainContentPages->addWidget(new HomePage);
mainContentPages->addWidget(new AnalyticsPage);
mainContentPages->addWidget(new EditorPage);
mainContentPages->setStyleSheet("QStackedWidget {border:1px solid #888;}");
setCentralWidget(mainContentPages);

createIcons();
contentsIconWidget->setCurrentRow(0);

QHBoxLayout *hMainLayout = new QHBoxLayout();
hMainLayout->addWidget(contentsIconWidget,0);
hMainLayout->addWidget(mainContentPages,0);
hMainLayout->setSpacing(0);
hMainLayout->setMargin(0);

QFrame *mFrame = new QFrame(this);
mFrame->setLayout(hMainLayout);
setCentralWidget(mFrame);
} 
```

存储不同视图状态布局的视图源页面的一部分

```
EditorPage::EditorPage(QWidget *parent) : QWidget(parent)
{
mdiArea = new QMdiArea;
mdiToolBox = new QToolBox;

QDockWidget *dock = new QDockWidget(tr("SQL Manager"));
//MainWindow::windowMenu->addAction(dock->toggleViewAction());
//MainWindow::windowMenu->addAction(dock->toggleViewAction());

QDockWidget *dock1 = new QDockWidget(tr("SQL Manager"));

QSplitter *splitter = new QSplitter();
splitter->setOrientation(Qt::Vertical);
splitter->addWidget(mdiArea);
splitter->addWidget(dock);

QSplitter *splitter1 = new QSplitter();
splitter1->setOrientation(Qt::Horizontal);
splitter1->addWidget(dock1);
splitter1->addWidget(splitter);

QHBoxLayout *mainLayout = new QHBoxLayout();
mainLayout->addWidget(splitter1);
mainLayout->setSpacing(0);
mainLayout->setMargin(0);
setLayout(mainLayout);

} 
```

视图类头文件的一部分

```
class EditorPage : public QWidget
{
public:
EditorPage(QWidget *parent = 0);

private:
QMdiArea *mdiArea;
QToolBox *mdiToolBox;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:36:51.273

Qt 方法是为此使用[信号和插槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。

您的编辑器窗口将获得一个`toggleDock()`插槽（可能采用一个`int`或一个枚举值），并且主窗口将通过信号（自定义信号、由 QAction 触发的东西或按钮小部件）调用该插槽。

这样，您的类之间就没有静态依赖关系。

（请注意，将指向您的停靠小部件的指针存储为成员（可能在数组中）可能会使这更容易编码。）

# java - 如何将此字符串格式转换为正确的格式？

> ID：10868066
> 
> 赞同：1
> 
> 时间：2012-06-03T05:14:21.080
> 
> 标签：java, string, unicode

现在我有 JSON 数据，其中有如下内容：

```
\u00e9 
```

如何更改其格式以便可以正常表示为“é”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:58:30.940

`org.apache.commons.lang.StringEscapeUtils.unescapeJava("\\u00e9")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:44:00.970

您没有说您是否使用任何 JSON 工具，但其中一些工具支持这种转义处理。如果您自己处理它，除了自己解析转义序列之外，您无能为力。有多种方法可以做到这一点（包括使用正则表达式），但这很容易直接做到。只需查找“\u”前缀，获取接下来的四个字符并将它们解析为十六进制整数。然后将结果转换为 a`char`并使用它来代替六个原始字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T05:33:54.167

Java 中的 Unicode 字符被认为是文字。例如，

```
String foo = "\u00e9"; 
```

被认为是文字字符`é`。说了这么多，这个示例程序有没有给你一些想法？

```
public class Foo {
    public static void main(String[] args) {
        String myCharacter = "\u00e9";
        System.out.println(myCharacter);
    }
} 
```

看看[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)和[Character](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#unicode)。

# python - 围绕质心以椭圆形环绕四个物体，Python

> ID：10868068
> 
> 赞同：0
> 
> 时间：2012-06-03T05:14:50.773
> 
> 标签：python, center, points, centroid, orbit

好吧...我数学不太好（甚至没有完成我们的高中版本）并且现在真的很累，但是我需要围绕质心椭圆绕四个物体运行并且已经卡住了一段时间，但这并不是我没有尝试过或自己来过任何地方。到目前为止，这是我想出的：

```
from math import cos,sin,pi,sqrt,atan2
def orbit(p, deg, pivot=(0.32563325, 0.123498),ellipse=(0.5, 0.743992)): 
    # p = current (x,y)-position of current object,
    # Pivot = (x,y)-position of point to orbit around,
    #   retrieved by centroid((x1,y1),(x2,y2),(x3,y3),(x4,y4))
    # Ellipse = (width,height) of ellipse to rotate around
    #   retrieved by ellipse((x1,y1),(x2,y2),(x3,y3),(x4,y4))
    px,py = pivot
    if ellipse == (0.0,0.0):
        o = polar(p[0]-px,p[1]-py)[0]
        xr,yr = 1.0,1.0
    else:
        ew,eh = ellipse
        if ew < eh: 
            o = eh/2            # Distance to the point most far away from the middle of the ellipse (Outer radius)
            xr = ew/eh          # Horizontal ratio of ellipse so we can move it back properly into ellipse after performing circular orbit
            yr = 1.0            # Verical movement will not be affected because it's on the large axis
        else: 
            o = ew/2
            xr = 1.0
            yr = eh/ew
    x,y = p[0]-px,p[1]-py       # Subtract pivot's position (that's the the point I want to orbit around)
    d,a = polar(x,y)            # Get angle
    x,y = rect(o,a+deg)         # Move point as far away from middle as it will be as most and make circular orbit around pivot by deg degrees 
    x,y = x*xr,y*yr             # Move points back to elliptic shape by multiplying positions with according ratio <--- I guess it's here something goes wrong
    x,y = x+px,y+py             # Move point back to original position by adding pivot's positions
    return x,y

# Other functions
def centroid(*points):
    x,y = izip(*points)
    return (sum(x) / len(points), sum(y) / len(points))
def ellipse(*points):
    x,y = izip(*points)
    xd,yd = max(x)-min(x),max(y)-min(y)
    return (xd,yd)
def polar(x,y):
    d = sqrt(x**2 + y**2)
    a = atan2(y,x) * (180.0/pi)
    return d, a
def rect(d,a):
    x = d * cos(a*pi/180.0)
    y = d * sin(a*pi/180.0)
    return x, y 
```

如果我使用 ellipse=(0.0,0.0) 并在“普通”圆而不是椭圆形状中环绕所有东西，它工作得很好，所以我想这是当我尝试将 x/y 位置与比率 ew/eh 相乘时或者 eh/ew 我做错了什么，但我现在不知道是什么。

我有点累，现在会试着睡一觉，看看我明天能不能解决它，但这里真的会得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:19:27.900

这封装了每个椭圆的数学，并显示了示例用法；你将不得不为你想要的任何输出添加代码。

```
from math import sin, cos, pi

class Ellipse(object):
    @classmethod
    def fromBox(cls, p1=(-1.,-1.), p2=(1.,1.), period=1., offs=0., clockwise=False):
        """
        Construct an Ellipse from an axis-aligned bounding box
        p1, p2      diagonally-opposed corners of the bounding box
        period      time for a complete orbit
        offs        offset into initial rotation
        clockwise   direction of rotation
        """
        x1,y1 = p1
        x2,y2 = p2
        # find center point
        cx, cy = (x1 + x2)*0.5, (y1 + y2)*0.5
        # find major and minor semi-axes and corresponding theta
        a,b = abs(x2 - x1)*0.5, abs(y2 - y1)*0.5
        if a >= b:
            theta = 0.0
        else:
            a,b = b,a
            theta = pi/2
        # return an Ellipse object
        return cls(cx, cy, a, b, theta, period, offs, clockwise)

    def __init__(self, x=0., y=0., a=1., b=1., theta=0., period=1., offs=0., clockwise=False):
        """
        Create  an ellipse
        x,y         center point
        a           semi-major axis
        b           semi-minor axis
        theta       major axis inclination (in radians)
        period      time for a complete orbit
        offs        offset into initial rotation
        clockwise   direction of rotation
        """
        self.x = x
        self.y = y
        self.period = -period if clockwise else period
        self._freq = self.period / (2\. * pi)
        self.offs = offs

        s_th = sin(theta)
        c_th = cos(theta)
        self._ast = a * s_th
        self._act = a * c_th
        self._bst = b * s_th
        self._bct = b * c_th

    def at(self, t):
        """
        Evaluate the ellipse at time t
        """
        _t = (t - self.offs) * self._freq
        st = sin(_t)
        ct = cos(_t)
        return self.x + self._act*ct - self._bst*st, self.y + self._act*st + self._bst*ct

def main():
    a = Ellipse.fromBox((-0.67436675, -0.376502), (1.32563325, 0.623498))
    b = Ellipse(0.32563325, 0.123498, 0.9, 0.6, pi/6)
    c = Ellipse(0.32563325, 0.123498, 1.1, 0.5, pi/4)
    d = Ellipse(0.32563325, 0.123498, 1.0, 0.5, pi/2)

    t_step = 0.03
    for t in xrange(200):
        drawCircle(a.at(t*t_step), "red")
        drawCircle(b.at(t*t_step), "blue")
        drawCircle(c.at(t*t_step), "green")
        drawCircle(d.at(t*t_step), "yellow")

if __name__=="__main__":
    main() 
```

# ios - Urban Airship：向临时用户发送远程通知

> ID：10868069
> 
> 赞同：0
> 
> 时间：2012-06-03T05:14:55.073
> 
> 标签：ios, urbanairship.com

我正在使用 Urban Airship 进行远程推送通知，但我不确定要使用哪个 SSL 证书。

如果我正在使用许多其他 iPhone 设备进行 beta 测试（临时分发），我应该使用开发推送证书还是生产推送证书。我都试过了，都没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:35:59.517

我算出来了——这是生产证书。

# ruby - 如何解析 csv 字符串并转换为 Hash

> ID：10868070
> 
> 赞同：-2
> 
> 时间：2012-06-03T05:15:18.790
> 
> 标签：ruby, csv

我有一个 CSV 字符串，或者您可以假设为 csv 文件的正文。我想在该文件（CSV STRING）中找到一条特定记录并删除它之前的所有记录。然后将剩余的记录转换为哈希。即标题作为键，行内容作为值。任何时候您都无法创建新文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:13:09.410

使用 CSV 库。

对于 Ruby 1.9，它已经是[内置](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)的。使用 Ruby 1.8，您可以使用包含的 CSV 库或[fastcsv](http://rubygems.org/gems/fastercsv)，这是 1.9 内置实现的基础。

* * *

PS 当提出问题时，通常要求您提供有问题的代码片段，准确定义您的问题，即您希望看到的内容和实际看到的内容，并表明您已经考虑过如何解决问题自己之前。这样，人们更愿意回答您的问题，因为这表明您对受访者的尊重，并帮助未来有类似问题的访问者更好地理解问题并推断出适用于他们的解决方案。

# css - CSS alpha opacity IE8 溢出被隐藏

> ID：10868079
> 
> 赞同：2
> 
> 时间：2012-06-03T05:17:23.943
> 
> 标签：css, internet-explorer-8, filter, opacity, alpha

有人可以告诉我我在这里做错了什么吗？内部类“选项卡”应该有一个负的上边距，但是当应用它时`-ms-filter:Alpha(opacity=40);`，容器似乎有一个溢出：强制隐藏。

请记住，这只发生在 IE8 中。这是小提琴：

[http://jsfiddle.net/ANh4k/2/](http://jsfiddle.net/ANh4k/2/)

如果我可以提供更多信息，请告诉我，并提前感谢您。

**更新**这是使用 IE8 开发人员工具的屏幕截图，我已尽可能多地取消选中选项以尝试找出导致不透明度问题的原因（请记住，`-ms-filter:...`未显示在 IE8 CSS 开发人员列表中；但已应用） .

![在此处输入图像描述](../Images/cf34cb75c179e394c46f946c45e96f9e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:30:25.707

摆脱了小提琴中的 z-index .. z-index 混淆了 IE8，并且它认为您拥有它时不希望溢出.. 那是适合您的 IE...

[http://jsfiddle.net/ANh4k/40/](http://jsfiddle.net/ANh4k/40/)

```
 #feed-container-outline.mini.active {
        display:block;
        position:absolute;
        zoom:1;
        right:5px;
        top:45px;
        width:370px;
        height:53%;
        min-height:320px;
        background:#ED9A27;
        opacity:.4;
        border:2px solid #F16719;
        -moz-box-shadow:1px 1px 3px #aaa;
        -webkit-box-shadow:1px 1px 3px #aaa;
        -o-box-shadow:1px 1px 3px #aaa;
        box-shadow:1px 1px 3px #aaa;
        overflow:visible;
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)"; 
}

 #feed-container-outline.mini.active .tab {
        display:block;
        overflow:auto;
        position:absolute;
        float:right;
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";
        width:70px;
        right:-1px;
        top:-45px;
        height:45px;
        background:#ED9A27;
        border:2px solid #F16719;
        border-bottom: 0px;
}​ 
```

# sql - 使用 XML 通过存储过程插入多行

> ID：10868080
> 
> 赞同：0
> 
> 时间：2012-06-03T05:17:59.943
> 
> 标签：sql, sql-server, tsql, ado.net

我正在尝试按照存储的过程一次性插入全班（多名学生）的出勤率。

```
CREATE PROCEDURE [dbo].[usp_add_attendanceByLectureId] 
    -- Add the parameters for the stored procedure here
    @pLectureId int,
    @pUsersXml xml  
AS
BEGIN
   --SET NOCOUNT ON;

    INSERT INTO AcademicAttendance(StudentId, LectureId, [Status])      
    select M.Item.value('StudentId[1]','INT') as StudentId, -- here error occured
    @pLectureId as LectureId,
    M.Item.value('Status','BIT') as [Status]
    FROM @pUsersXml.nodes('/ArrayOfStudnts/Student') AS M(Item)

END 
```

在创建上述 sp 时发生以下错误

消息 2389，级别 16，状态 1，过程 usp_add_attendanceByLectureId，第 17 行 XQuery [value()]：'value()' 需要单例（或空序列），找到类型为 'xdt:untypedAtomic *' 的操作数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:39:43.913

采用

```
M.Item.value('Status[1],'BIT') as [Status] 
```

代替

```
M.Item.value('Status','BIT') as [Status] 
```

# java - Java string[] 部分复制

> ID：10868081
> 
> 赞同：6
> 
> 时间：2012-06-03T05:18:13.693
> 
> 标签：java, string

我如何获取`String[]`, 并复制该`String[]`, 但没有第一个字符串？示例：如果我有这个...

```
String[] colors = {"Red", "Orange", "Yellow"}; 
```

我如何制作一个类似于字符串集合颜色但没有红色的新字符串？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T05:21:44.723

你可以使用[`Arrays.copyOfRange`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange%28T%5B%5D,%20int,%20int%29)：

```
String[] newArray = Arrays.copyOfRange(colors, 1, colors.length); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T05:32:44.290

忘记数组。它们不是初学者的概念。你最好把时间花在学习 Collections API 上。

```
/* Populate your collection. */
Set<String> colors = new LinkedHashSet<>();
colors.add("Red");
colors.add("Orange");
colors.add("Yellow");
...
/* Later, create a copy and modify it. */
Set<String> noRed = new TreeSet<>(colors);
noRed.remove("Red");
/* Alternatively, remove the first element that was inserted. */
List<String> shorter = new ArrayList<>(colors);
shorter.remove(0); 
```

* * *

为了与基于数组的遗留 API 进行互操作，有一个方便的方法`Collections`：

```
List<String> colors = new ArrayList<>();
String[] tmp = colorList.split(", ");
Collections.addAll(colors, tmp); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-03T05:22:49.480

```
String[] colors = {"Red", "Orange", "Yellow"};
String[] copy = new String[colors.length - 1];
System.arraycopy(colors, 1, copy, 0, colors.length - 1); 
```

# git - 如何使用 GIT 在本地 PC 上获取现有存储库文件？

> ID：10868084
> 
> 赞同：1
> 
> 时间：2012-06-03T05:18:48.723
> 
> 标签：git, github

几个月前，我为我的一个 jquery 插件创建了一个存储库。但最近我不得不格式化我的电脑以解决一些问题。所以现在我重新安装了 GIT，但我不太习惯 GIT。上次我按照一些教程来设置存储库并不断提交更新的文件。但现在我想知道如何配置 GIT 并将我的 jQuery 插件项目的所有文件取回本地系统，以便我可以继续进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:30:12.740

重新登录 github.com。导航到您的存储库。GIT URL 通常位于项目描述的正下方。从那里它只是“git clone URL”。那是：

```
git clone https://github.com/<your account name>/<your project name>.git 
```

如果我没记错的话，[这里](https://github.com/aslamdoctor/jQuery.mapmarker)是你的项目页面。这样这正是您需要输入的内容：

```
git clone https://github.com/aslamdoctor/jQuery.mapmarker.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:35:29.233

Selbie 为你提供了正确的克隆命令，但你要么没有在 github 上安装你的公钥，要么它已经改变了。虽然您可以从只读 URL 克隆，但最好继续修复此问题，因为在推送任何更改之前需要对其进行修复。

登录 github 并转到“帐户设置”（右上角的图标）。单击“添加 SSH 密钥”。现在粘贴您的内容`~/.ssh/id_rsa.pub`或`~/.ssh/id_dsa.pub`取决于您拥有的内容。如果您没有该目录，则可以使用本教程了解如何生成密钥：

[Github SSH 密钥生成教程](https://help.github.com/articles/generating-ssh-keys)

如果您使用 Windows，则有多种生成密钥的方法，具体取决于您使用的软件。但是，请确保您使用的任何内容都生成 OpenSSH 格式的密钥。例如，在 Putty 中，您必须将密钥导出为 OpenSSH 格式才能与 github 一起使用。

# android - 在 Android 平板电脑上模拟 SMS 进行应用测试

> ID：10868094
> 
> 赞同：2
> 
> 时间：2012-06-03T05:21:01.493
> 
> 标签：android, sms, broadcastreceiver, tablet

嗨，我正在参加 Android 开发课程，我们应该开发一个响应传入短信的应用程序。我想知道是否有办法在一个应用程序中广播短信，以便我在另一个应用程序中的广播接收器可以处理所述短信。由于我正在使用平板电脑，因此无法使用真正的短信。请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T06:13:21.330

您可以创建一个模拟器，然后通过 DDMS 的模拟器控制部分向它发送短信

在这里，我创建了一个基于 ICS 的平板电脑，我可以通过模拟器控件向它发送 SMS：

![在这里，我创建了一个基于 ICS 的平板电脑，我可以通过模拟器控件向它发送 SMS](../Images/00768ba3f0fa6d193bd7513e7d83687d.png)

# django - Django 条款和条件表格

> ID：10868097
> 
> 赞同：6
> 
> 时间：2012-06-03T05:22:36.890
> 
> 标签：django, django-forms

我正在尝试找出使用 django 构建条款和条件 (TNC) 表单的最优雅方式。用户必须同意 TNC 才能继续。令人困惑的部分是如何使用不可编辑的 TNC 将滚动文本字段嵌入到表单中。然后用户必须单击复选框，否则表单无效。TNC 是一个重要的文档，位于一个文本文件中。有没有办法加载文本文件并使其成为滚动字段的内容。

这种形式的任何例子或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T06:10:24.647

> 令人困惑的部分是如何使用不可编辑的 TNC 将滚动文本字段嵌入到表单中。

这个令人困惑的部分很容易：它不是表单元素。这只是文字。

以某种方式获取您的内容...按照您的建议从文件中说：

```
context = {}
with open('/terms-and-conditions.txt') as f:
    context['terms'] = f.read() 
```

定义一个简单的形式：

```
class MyForm(forms.Form):
    i_agree = forms.BooleanField() 
```

将两者都传递给您的模板...

```
<div style="width:600px; height:300px; overflow-y:scroll;">
    {% if form.errors %}
        <h1>You must agree to the TNC</h1>
    {% endif %}
    <form method="post">
        {{ form.as_p }}
        <input type="submit" value="I agree to the TNC" />
    </form>
</div> 
```

其他任何东西都只是这个简单模式的排列。也许您使用只读文本区域、javascript 警告等。

# android - android：如何在另一个通话正在进行时不使用拨号键盘拨打号码

> ID：10868103
> 
> 赞同：1
> 
> 时间：2012-06-03T05:23:27.720
> 
> 标签：android

我在以下问题上被阻止，我的要求是，

我已连接到正在进行的呼叫，并且在此过程中我希望我的应用程序自动拨打已在剪贴板复制到拨号器的号码。（直接粘贴/设置到拨号器）

具体来说，假设我们打电话给任何移动网络提供商的客户服务部，那么我们通常会收到类似“PRESS 2”“PRESS 3”这样的消息。

同样，我想拨打/按下剪贴板上的预定义号码。

有人可以帮我怎么做吗？

谢谢你。

# javascript - 在 DOM 元素的样式对象更改后，您可以使用 javascript 钩子触发器吗？

> ID：10868104
> 
> 赞同：29
> 
> 时间：2012-06-03T05:23:37.717
> 
> 标签：javascript, jquery, css, javascript-events

一个元素有一个 javascript`style`对象，其中包含 css 样式的不同名称和值。我想在**不使用 polling 的情况下**每次更改此对象时触发一个函数。有没有办法以跨浏览器兼容的方式做到这一点，并且可以可靠地与第三方代码一起工作（因为假设您正在提供一个插入式脚本）？绑定一个 javascript 事件就像`DOMAttrModified`或`DOMSubtreeModified`不够，因为它们在 Chrome 中不起作用。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-12T21:09:39.237

**编辑 4：**现场演示

```
$(function() {
  $('#toggleColor').on('click', function() {
    $(this).toggleClass('darkblue');
  }).attrchange({
    trackValues: true,
    callback: function(event) {
      $(this).html("<ul><li><span>Attribute Name: </span>" + event.attributeName + "</li><li><span>Old Value: </span>" + event.oldValue + "</li><li><span>New Value: </span>" + event.newValue + "</li></ul>");
    }
  });
});
```

```
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 12px;
}
#toggleColor {
  height: 70px;
  width: 300px;
  padding: 5px;
  border: 1px solid #c2c2c2;
  background-color: #DBEAF9;
}
#toggleColor span {
  font-weight: bold;
}
#toggleColor.darkblue {
  background-color: #1A9ADA;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://meetselva.github.io/attrchange/javascripts/attrchange.js"></script>
<p>Click below div to toggle class darkblue.</p>
<div id="toggleColor"></div>
```

**编辑 3：**我将所有这些放在一起作为一个插件，可以从 git [**attrchange**](https://github.com/meetselva/attrchange)下载，这里是[**演示页面**](http://meetselva.github.com/attrchange/)。

**编辑2：**

1.  修复 IE7 和 IE8 中的属性名称

**编辑1：**

1.  处理多个元素
2.  将条件排序为 MutationObserver、DOMAttrModified 和 onpropertychange 以便更好地实现。
3.  在回调中添加了修改后的属性名称。

感谢@benvie 的反馈。

**演示： http:** [//jsfiddle.net/zFVyv/10/](http://jsfiddle.net/zFVyv/10/)（在 FF 12、Chrome 19 和 IE 7 中测试。）

```
$(function() {
    (function($) {
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;

        function isDOMAttrModifiedSupported() {
            var p = document.createElement('p');
            var flag = false;

            if (p.addEventListener) p.addEventListener('DOMAttrModified', function() {
                flag = true
            }, false);
            else if (p.attachEvent) p.attachEvent('onDOMAttrModified', function() {
                flag = true
            });
            else return false;

            p.setAttribute('id', 'target');

            return flag;
        }

        $.fn.attrchange = function(callback) {
            if (MutationObserver) {
                var options = {
                    subtree: false,
                    attributes: true
                };

                var observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(e) {
                        callback.call(e.target, e.attributeName);
                    });
                });

                return this.each(function() {
                    observer.observe(this, options);
                });

            } else if (isDOMAttrModifiedSupported()) {
                return this.on('DOMAttrModified', function(e) {
                    callback.call(this, e.attrName);
                });
            } else if ('onpropertychange' in document.body) {
                return this.on('propertychange', function(e) {
                    callback.call(this, window.event.propertyName);
                });
            }
        }
    })(jQuery);

    $('.test').attrchange(function(attrName) {
        alert('Attribute: ' + attrName + ' modified ');
    }).css('height', 100);

}); 
```

**参考：**

1.  [检测是否支持 DOMAttrModified](https://stackoverflow.com/a/4562426/297641)
2.  [DOMAttrModified for chrome](https://stackoverflow.com/a/10466236/297641)
3.  [突变观察者](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)
4.  [为什么我们应该避免使用 Mutation 事件？](https://developer.mozilla.org/en/DOM/Mutation_events)
5.  [onPropertyChange IE](http://msdn.microsoft.com/en-us/library/ie/ms536956%28v=vs.85%29.aspx)

> Mutation Observers 是 DOM4 中突变事件的提议替代品。预计它们将包含在 Firefox 14 和 Chrome 18 中

**浏览器支持：**

`onpropertychange`- 在 IE 中受支持（在 IE 7 中测试）

`DOMAttrModified` - 在 IE 9、FF 和 Opera 中受支持

`MutationObservers` - 非常新，在[Chrome 18](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)中运行良好。不确定它支持多远，尚未在 Safari 中进行测试。

感谢[@benvie](https://stackoverflow.com/questions/10868104/can-you-have-a-javascript-hook-trigger-after-a-dom-elements-style-object-change/11004907#comment14381951_11004907)添加有关 WebkitMutationObserver 的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:38:30.403

**编辑2：**

如果您仍想使用`mutation observer`，请使用此库：[mutation-summary](http://code.google.com/p/mutation-summary/)

* * *

**编辑：**

正如我在下面的回答中所说，并感谢 Vega 的评论，使用诸如`object.watch`或`mutation observers`不建议在大型应用程序中使用之类的东西。[这是来自MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch)的实际报价：

> 一般来说，你应该尽可能避免使用`watch()`and `unwatch()`。这两种方法仅在 Gecko 中实现，主要用于调试。此外，**使用观察点** 对性能有严重的负面影响，尤其是在**全局对象**上使用时尤其如此，例如窗口。您通常可以改用 ***setter***和***getter***或***代理***。有关详细信息，请参阅兼容性。
> 
> ## 警告

因此，如果跨浏览器兼容性在您的检查列表中，我再次强烈建议覆盖对象`setter`的 s 和`getter`s `style`。

* * *

使用[`object.watch`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/watch)并牢记这些跨浏览器解决方案：

*   [Javascript Object.Watch 适用于所有浏览器？](https://stackoverflow.com/questions/1029241/javascript-object-watch-for-all-browsers)
*   [object.watch polyfill](https://gist.github.com/384583)
*   [Watch for object properties changes in JavaScript](https://stackoverflow.com/questions/1269633/watch-for-object-properties-changes-in-javascript)

You may override `getter` and `setter` methods of element's `style` object too.

There is a jQuery plugin available for this, [jQuery watch](http://darcyclarke.me/dev/watch/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T09:07:59.640

I have found this little plugin that does exactly that and it can be changed to add any mutation you wish... Even scrollHeight change listener.

The plugin: [http://www.jqui.net/jquery-projects/jquery-mutate-official/](http://www.jqui.net/jquery-projects/jquery-mutate-official/)

here is the demo: [http://www.jqui.net/demo/mutate/](http://www.jqui.net/demo/mutate/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:26:36.143

即使对于所有最现代的浏览器，也没有跨浏览器的方式来实现这一点。您必须通过一个可以触发事件侦听器的函数来路由所有 css 样式更改。这将是最干净的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:53:59.670

In an answer to a [similar question](https://stackoverflow.com/q/2157963/1081234), it was suggested that if you know that style-setting interactions would be performed via a standard interface (i.e. *always* using jQuery etc.) it was suggested that custom events be fired whenever the library method is called.

This would allow for a broader support matrix but would leave any property change ignored if performed without using the library method. It also appears that such an approach is not applicable to [native setters](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Objects#Defining_getters_and_setters) as they cannot always be relied on.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-20T12:29:49.597

You can use [attrchange jQuery plugin](http://meetselva.github.io/attrchange/). The main function of the plugin is to bind a listener function on attribute change of HTML elements.

# vb.net - HTTP Web 请求适用于其他站点，但不适用于这个站点。有任何想法吗？(VB.NET)

> ID：10868105
> 
> 赞同：1
> 
> 时间：2012-06-03T05:23:45.507
> 
> 标签：vb.net, cookies, httpwebrequest, postdata

我正在用 VB.NET 编写程序，但我的 httpwebrequest 代码有问题。我已经为 Firefox 使用了实时 HTTP 标头来获取正确的发布数据，但由于某种原因它不会登录。

问题是，我为另一个类似网站使用了相同的代码（仅更改发布数据），它工作得很好。

有什么想法吗？这是我的代码...

```
Imports System.Windows.Forms
Imports System.Net
Imports System.IO
Imports System.Text
Imports System.Text.RegularExpressions
Imports System.ComponentModel
Imports System.Threading

Public Class Form1
        Dim logincookie As CookieContainer
        Dim html As String = "BGW still running"

        Private Sub cmdStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdStart.Click

            Dim username As String = "username"
            Dim password As String = "password"

            Dim postData As String = "url=&username=" + username + "&password=" + password + "&login=Check+Mail%21"
            Dim tempcookies As New CookieContainer
            Dim encoding As New UTF8Encoding
            Dim bytedata As Byte() = encoding.GetBytes(postData)

            Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("http://www.website.com/inbox.aspx?login"), HttpWebRequest)
            postReq.Method = "POST"
            postReq.KeepAlive = True
            postReq.CookieContainer = tempcookies
            postReq.ContentType = "application/x-ww-form-urlencoded"
            postReq.Referer = "http://www.website.com/inbox.aspx?login"
            postReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0"
            postReq.ContentLength = bytedata.Length

            Dim postReqStream As Stream = postReq.GetRequestStream()
            postReqStream.Write(bytedata, 0, bytedata.Length)
            postReqStream.Close()
            Dim postResponse As HttpWebResponse

            postResponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
            tempcookies.Add(postResponse.Cookies)
            logincookie = tempcookies

            Dim matchCount As Integer = 0

        Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://www.website.com/editprofile.aspx")
            request.CookieContainer = logincookie
            Dim response As System.Net.HttpWebResponse = request.GetResponse
            Dim reader As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())

            html = reader.ReadToEnd
    End Sub

End Class 
```

任何想法或建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:49:42.487

您显示的 URL 上的登录名不同。重定向到与您的代码中的 URL 不同的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T23:59:29.127

抱歉稍后回复，但这也会对其他人有所帮助..

这是因为您缺少一个 CookieContainer，这对于使用 HTTP WEBREQUEST 的登录非常重要......

这是一个惊人的教程！我使用相同的方法登录 MYBB FORUMS、vBULLETIN 和许多其他 JOOMLA、WORDPRESS 网站。并且一遍又一遍地使用同一个教程中的相同代码。

这是代码：

```
Imports System.Net
Imports System.Text
Imports System.IO

Public Class Form1

Dim logincookie As CookieContainer

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

Dim postData As String = "referer=http%3A%2F%2Fforums.zybez.net%2Findex.php%3Fapp%3Dcore%26module%3Dglobal%26section%3Dlogin&username=" & TextBox1.Text & "&password=" & TextBox2.Text & "&rememberMe=1"
Dim tempCookies As New CookieContainer
Dim encoding As New UTF8Encoding
Dim byteData As Byte() = encoding.GetBytes(postData)

Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("http://forums.zybez.net/index.php?app=core&module=global&section=login&do=process"), HttpWebRequest)
postReq.Method = "POST"
postReq.KeepAlive = True
postReq.CookieContainer = tempCookies
postReq.ContentType = "application/x-www-form-urlencoded"
postReq.Referer = "http://forums.zybez.net/index.php?app=core&module=global&section=login&do=process"
postReq.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.2.3) Gecko/20100401 Firefox/4.0 (.NET CLR 3.5.30729)"
postReq.ContentLength = byteData.Length

Dim postreqstream As Stream = postReq.GetRequestStream()
postreqstream.Write(byteData, 0, byteData.Length)
postreqstream.Close()
Dim postresponse As HttpWebResponse

postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
tempCookies.Add(postresponse.Cookies)
logincookie = tempCookies
Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

End Sub

End Class 
```

归功于“HowToStartProgramming.Com”

# javascript - 扩展“IF”绑定的淘汰赛自定义绑定

> ID：10868107
> 
> 赞同：2
> 
> 时间：2012-06-03T05:25:26.070
> 
> 标签：javascript, html, knockout.js, custom-binding

我有以下基于 Ryan Niemeyer 博客的自定义绑定，但我认为它不起作用。div 并没有让他褪色，而是根本不显示。我尝试添加“init”函数，但这并没有解决问题，所以我回到了简单的更新函数，就像 Ryan 在示例中使用的那样。

```
ko.bindingHandlers.fadeInIf = {
    update: function(element, valueAccessor) {
        ko.bindingHandlers.if.update(element, valueAccessor);
        $(element).fadeIn(); 
    } 
}; 
```

在 html 中，我执行以下操作：

```
<div data-bind="fadeInIf: show">...</div> 
```

博文：[http ://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:44:07.617

`if`您代理的绑定`fadeInIf`实际上用于创建 dom 元素，有关详细信息，请参阅[此文档](http://knockoutjs.com/documentation/if-binding.html)。

实现一个fadeInIf你简单的需要。

```
ko.bindingHandlers.fadeInIf = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value) {
            $(element).fadeIn();
        }
    }
}; 
```

[http://jsfiddle.net/madcapnmckay/3rRUQ/2/](http://jsfiddle.net/madcapnmckay/3rRUQ/2/)

如果您想要的更多是一个 fadeVisible 绑定，我在小提琴中也包含了一个示例。

希望这可以帮助。

# c++ - OpenGL 1.x 显示带有纹理的 GL_QUADS 有效，纯色无效

> ID：10868112
> 
> 赞同：0
> 
> 时间：2012-06-03T05:27:15.860
> 
> 标签：c++, opengl, sdl

首先，我的 OpenGL 信息（我在运行时获取）：

> OpenGL 版本=4.0.10243 兼容性配置文件上下文，供应商=ATI Technologies Inc.，渲染器=AMD Radeon HD 6650M

所以我正在为我正在处理的几个项目开发一个 gui/hud 渲染系统，我遇到了一个有趣的问题。我可以使用以下代码毫无问题地显示带纹理的 GL_QUADS：

```
this->m_buffer->openglBindTexture();

SDL::Rect tc( this->m_buffer->getOpenGLTextureCoords() );           

glBegin( GL_QUADS );

    glColor4fv( (SDL::Color("white")).toGLColor4vf( 1.0 ) );
    glTexCoord2f( tc.topleft().x, tc.topleft().y );
    glVertex3f( this->boundary().bottomleft().x, this->boundary().bottomleft().y, this->m_z );

    glTexCoord2f( tc.topright().x, tc.topright().y );
    glVertex3f( this->boundary().bottomright().x, this->boundary().bottomright().y, this->m_z );

    glTexCoord2f( tc.bottomright().x, tc.bottomright().y );
    glVertex3f( this->boundary().topright().x, this->boundary().topright().y, this->m_z );

    glTexCoord2f( tc.bottomleft().x, tc.bottomleft().y );
    glVertex3f( this->boundary().topleft().x, this->boundary().topleft().y, this->m_z );

glEnd(); 
```

其中一些使用我自己的围绕 SDL+OpenGL 的包装器代码。这是我的绑定代码，以防有人发现它的怪癖：

```
void Surface::openglBindTexture( void )
{
    int glerror = 0;
    if( !this->m_hastexture ) {
        int bpp;
        Uint32 Rmask, Gmask, Bmask, Amask;
        SDL_PixelFormatEnumToMasks(
            SDL_PIXELFORMAT_ABGR8888, &bpp,
            &Rmask, &Gmask, &Bmask, &Amask
        );

        int glw = this->w_pow2();
        int glh = this->h_pow2();

        /* Create surface that will hold pixels passed into OpenGL. */
        SDL_Surface *img_rgba8888 = SDL_CreateRGBSurface(0,
            glw, glh, bpp,
            Rmask, Gmask, Bmask, Amask
        );

        SDL_SetSurfaceAlphaMod( this->m_surface, 0xFF );
        SDL_SetSurfaceBlendMode( this->m_surface, SDL_BLENDMODE_NONE );

        SDL_BlitSurface( this->m_surface, NULL, img_rgba8888, NULL );

        glGenTextures( 1, &this->m_texture );
        glBindTexture( GL_TEXTURE_2D, this->m_texture );
        glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, glw, glh, 0, GL_RGBA, GL_UNSIGNED_BYTE, img_rgba8888->pixels );
        glerror = GLException::glError(); if( glerror != 0 ) throw new GLException( "Surface::openglBindTexture::glTexImage2D", glerror, __FILE__, __LINE__ );

SDL_FreeSurface(img_rgba8888);
                glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); // Linear Filtering
                glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); // Linear Filtering
        glerror = GLException::glError();
        if( glerror != 0 ) throw new GLException( "Surface::openglBindTexture::Importing raw texture", glerror, __FILE__, __LINE__ );
        this->m_hastexture = true;
    }
    glBindTexture( GL_TEXTURE_2D, this->m_texture );
} 
```

这是我试图用来在opengl中显示一个简单的彩色四边形的代码：

```
glBegin( GL_QUADS );
    glColor3f( 1.0f, 1.0f, 1.0f );
    glVertex3f( this->boundary().topleft().x, this->boundary().topleft().y, this->m_z );
    glColor3f( 1.0f, 1.0f, 1.0f );
    glVertex3f( this->boundary().topright().x, this->boundary().topright().y, this->m_z );
    glColor3f( 1.0f, 1.0f, 1.0f );
    glVertex3f( this->boundary().bottomright().x, this->boundary().bottomright().y, this->m_z );
    glColor3f( 1.0f, 1.0f, 1.0f );
    glVertex3f( this->boundary().bottomleft().x, this->boundary().bottomleft().y, this->m_z );
glEnd(); 
```

这不会画任何东西。我完全被难住了，因为我可以毫无问题地看到我所有的纹理四边形。

**编辑**：我应该注意我做了一些健全性检查，边界坐标都是正确且可见的。

**编辑2**：看起来当我不做任何带纹理的四边形时，它可以工作。有没有人看到绑定功能中可能会破坏它的任何部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:51:33.803

所以，事实证明我只需要添加一些逻辑来启用和禁用 GL_TEXTURE_2D 每次我需要它，而不是仅仅将其绑定在 opengl 状态业务中。

# java - Play 2 的多个全局设置

> ID：10868116
> 
> 赞同：2
> 
> 时间：2012-06-03T05:28:01.483
> 
> 标签：java, playframework-2.0

我可以为 Play2 设置两个全局设置对象吗？

我知道 application.conf 中只有设置可用。

```
global=common.GlobalOne 
```

两个全局类：

```
public class GlobalOne extends GlobalSettings {

  @Override
  public void onStart(Application app) {
      Logger.info("****** Set something ******");
  }

}

public class GlobalTwo extends GlobalSettings {

  @Override
  public void onStart(Application app) {
      Logger.info("****** some other ******");
  }

} 
```

我问的原因是玩 2 个模块。如何在模块中有一个全局设置对象，以便在项目使用它时启用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T08:52:36.073

那是不可能的。`GlobalSettings`适用于应用程序，而不是模块。因此，模块不应定义`GlobalSettings`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T08:46:58.677

我使用这种方法来合并根*Global.java*中的多个 Global 对象：

0) 文件夹结构：

```
/root
    /app
        Global.java
    /conf
        application.conf
    /subprojects
        /user
            /app
                /globals
                    UserGlobal.java
        /admin
            /app
                /globals
                    AdminGlobal.java 
```

1）将所有子项目全局类放入*全局*包中：

```
package globals;

public class UserGlobal extends GlobalSettings
{ ... } 
```

2）将配置变量添加到所有子项目的conf文件中，如

```
application.global= globals.UserGlobal 
```

3) 在根*Global.java*中添加私有字段和私有方法：

```
private List<GlobalSettings> subprojectGlobals = new ArrayList<>();

private void LoadSubprojectGlobals(Application app)
    throws ClassNotFoundException, IllegalAccessException, InstantiationException
{
    Reflections reflections = new Reflections("globals");
    Set<Class<? extends GlobalSettings>> subprojectGlobalClasses = 
        reflections.getSubTypesOf(GlobalSettings.class);

    for(Class subprojectGlobalClass : subprojectGlobalClasses)
    {
        subprojectGlobals.add(
            (GlobalSettings)subprojectGlobalClass.newInstance()
        );
    }
} 
```

4) 将此类代码放入根*Global.java中的**onStart*事件处理程序中：

 *```
@Override
public void onStart(Application app)
{
    try
    {
        LoadSubprojectGlobals(app);
    }
    catch(Exception e)
    {
        new RuntimeException(e);
    }

    for(GlobalSettings subprojectGlobal: subprojectGlobals)
    {
        subprojectGlobal.onStart(app);
    }
} 
```

现在，如果你添加一些新的子项目，你必须遵循一些关于添加 Global 类的约定，但你不需要修改任何东西来合并功能。

如果要处理更多全局设置，则需要覆盖根*Global.java*中的适当方法。

[这](https://stackoverflow.com/questions/28365201/play-framework-merging-multiple-global-objects-in-multi-module-project)是我关于这个问题的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:56:53.493

我有一个项目拆分为 a`main->frontend->common`和`main->backend->common`依赖项。在每个（通用、前端和后端）中，我都有一个 GlobalSetting。我需要这个来运行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T05:28:07.023

是的，这是不可能的，因为当您发出请求时，播放框架引擎会启动并且它会为当前应用程序找到 Global.java 或者如果它没有找到则可以说 Action 方法而不是跳过它。所以，底线是扩展 GlobalSettings 的类名应该是 Global.java*

# c# - Windows Mobile 6 模拟器上的 SqlLite

> ID：10868118
> 
> 赞同：0
> 
> 时间：2012-06-03T05:28:51.787
> 
> 标签：c#, sqlite, windows-mobile, system.data.sqlite

我正在尝试在我的移动应用程序上使用 SQLite。我可以添加对的引用，`System.Data.SQLite.dll`但无法将`SQLite.Interop.066.DLL`dll 复制到我的模拟器中。它显示了这个错误

> 没有足够的存储空间来处理此命令。

如何在模拟器上测试我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:29:17.933

它是一个模拟器。为什么要安装这么多程序？

Windows-Mobile 可以使用的 RAM 有限。

基本上，您必须关闭或卸载程序，直到您有足够的空间来运行您的应用程序。

# ios - NSKeyedArchiver 不保存自定义对象属性

> ID：10868120
> 
> 赞同：2
> 
> 时间：2012-06-03T05:29:24.150
> 
> 标签：ios, nskeyedarchiver, nscoding

我遇到了 NSKeyedArchiver 的问题。我正在尝试存档一个字典，该字典又包含自定义对象、专辑和歌曲的数组。

Album 和 Song 都是 NSObject 固有的，并且符合 NSCoding 协议。这是我实现协议的方式：

相册实现文件：

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];

    self.title = [aDecoder decodeObjectForKey:@"title"];
    self.artistName = [aDecoder decodeObjectForKey:@"artistName"];
    self.songs = [aDecoder decodeObjectForKey:@"songs"];

    return self;
}

-(void)encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:self.title forKey:@"title"];
    [aCoder encodeObject:self.artistName forKey:@"artistName"];
    [aCoder encodeObject:self.songs forKey:@"songs"];
} 
```

歌曲实现文件：

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    self.title = [aDecoder decodeObjectForKey:@"title"];
    self.artistName = [aDecoder decodeObjectForKey:@"artistName"];

    return self;
}

-(void)encodeWithCoder:(NSCoder *)aCoder {
    [aCoder encodeObject:self.title forKey:@"title"];
    [aCoder encodeObject:self.artistName forKey:@"artistName"];
} 
```

title 和 artistName 属性都是 NSStrings，白色的 song 属性是 Song 对象的数组。

我将这些对象的数组放入名为 ipodDictForArchiving 的字典中，然后像这样归档字典：

```
-(NSData *)dataForClient {
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:[self ipodDictForArchiving] forKey:kDataArchive];
    [archiver finishEncoding];
    NSLog(@"encoded dictionary");
    return data;
} 
```

然后我像这样解压缩字典：

```
-(NSDictionary *)unarchiveData:(NSData *)data {
    NSData *clientData = data;
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:clientData];
    NSDictionary *myDictionary = [unarchiver decodeObjectForKey:kDataArchive];
    [unarchiver finishDecoding];

    return myDictionary;
} 
```

出于某种原因，字典包含 Song 和 Album 对象，但这些对象的属性返回 null。我想不出任何帮助，非常感谢！

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T05:55:31.033

您实现 initWithCoder 的方式不正确，应该如下：

```
- (id)initWithCoder:(NSCoder *)aDecoder {

    Album *al = [[Album alloc] init];

    al.title = [[[NSString alloc] initWithString:[aDecoder decodeObjectForKey:@"title"]] autorelease];
    al.artistName = [[[NSString alloc] init] initWithString:[aDecoder decodeObjectForKey:@"artistName"]] autorelease];
    al.songs = [[[NSArray alloc] initWithArray:[aDecoder decodeObjectForKey:@"songs"]] autorelease];

    return al;
} 
```

宋也是一样。

[编辑] 而且您存档相册的方式似乎不正确，让我们尝试一种更简单的方式：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:album]; 
```

然后，您可以保存此数据以在以后取消归档。

# sql - 在 Oracle 中添加/更新存储过程，插入 null 或空字段

> ID：10868124
> 
> 赞同：2
> 
> 时间：2012-06-03T05:30:27.900
> 
> 标签：sql, oracle

我是使用 Oracle 的新手，我正在尝试为表创建一个添加/插入存储过程。我的表中的 PROD_CD 和 PLAN_CD 字段可以没有值（空或空）你能检查我的代码并让我知道我做错了什么吗？

### 表定义：

```
CREATE TABLE DCWEB.USER_PLAN_PREFERENCE
(
  USERID        VARCHAR2(40) NOT NULL,
  PROD_CD       VARCHAR2(9)  NULL,
  PLAN_CD       VARCHAR2(9)  NULL,
  STATE_LST     VARCHAR2(2)  NOT NULL,
  STATE_NM      VARCHAR2(40) NOT NULL,
  LST_UPDATE_TS TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL
);

ALTER TABLE DCWEB.USER_PLAN_PREFERENCE
  ADD CONSTRAINT USER_PLAN_PREFERENCE_XPK PRIMARY KEY (USERID, PROD_CD, PLAN_CD);

-- Grant/Revoke object privileges 
grant select, insert, update, delete on DCWEB.USER_PLAN_PREFERENCE to HIGGIB1; 
```

### 存储过程定义：

```
 procedure setUserPlanPref (
    userid in varchar2,
    prod_cd in varchar2,
    plan_cd in varchar2,
    state_lst in varchar2,
    state_nm in varchar2
  )
  is
    currentTimestamp timestamp := current_timestamp;
  begin
       insert into user_plan_preference (userid, prod_cd, plan_cd, state_lst, state_nm, lst_update_ts)
       values (upper(userid), upper(prod_cd), upper(plan_cd), upper(state_lst), upper(state_nm), currentTimestamp);
       commit;
       exception
       when dup_val_on_index then
         begin
          update user_plan_preference up set
            up.userid = upper(userid),
            up.prod_cd = upper(prod_cd),
            up.plan_cd = upper(plan_cd),
            up.state_lst = upper(state_lst),
            up.state_nm = upper(state_nm),
            up.lst_update_ts = currentTimestamp
          where up.userid = upper(userid)
                and up.prod_cd = upper(prod_cd)
                and up.plan_cd = upper(plan_cd);
          commit;
          exception 
          when others then
            rollback;
        end;
      when others then
        rollback;
    end;
  end; 
```

### 输入数据

我无法插入记录调用存储过程的值：DCWEB4578, , 2P, CA, CALIFORNIA 但是当我更改为字符串“NULL”时，插入成功。当我尝试调用存储过程以使用以下值更新插入的记录时： DCWEB4578, "NULL", 2P, CO, COLORODO 更新不会发生，因为我仍然在表中看到原始记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:24:26.113

您的直接问题是，如果您在主键中包含`PROD_CD`和`PLAN_CD`，则主键约束将要求两列都是`NOT NULL`. 您可以允许`NULL`这些列中的值，也可以将它们包含在主键中，但不能同时包含两者。

如果没有编写异常处理程序来吞下异常，这对您来说会更清楚。当您编写这样的代码时，几乎总是一个等待发生的错误

```
when others then
  rollback;
end; 
```

如果您要使用`when others`异常处理程序，您几乎总是希望至少重新引发异常。

```
when others then
  rollback;
  raise;
end; 
```

否则，调用者不知道发生了错误，也不知道错误是什么。如果您重新提出异常，您会看到类似

```
ORA-01400: cannot insert NULL into ("DCWEB"."USER_PLAN_PREFERENCE"."PROD_CD") 
```

这至少会为您指明正确的方向，并且会给您一些可以在此处发布的内容。

此外，声明与表中的列同名的参数是另一个等待发生的错误。您真的想采用某种约定来区分参数名称和列名称。就个人而言，我在参数名称前加上`p_`，即`p_userid in varchar2,`。否则，您的代码几乎肯定不会达到您的预期。

由于在执行 SQL 语句时列名优先于局部变量，因此您的语句将,等`UPDATE`解析为表中的列而不是已传入的参数。假设您的数据始终为大写，此语句将更新 的每一行，而不仅仅是您希望更新的那一行，它会将每一行的设置为. `upper(userid)``upper(prod_cd)``USER_PLAN_PREFERENCE``UPDATE``USER_PLAN_PREFERENCE``LST_UPDATE_TS``currentTimestamp`

```
 update user_plan_preference up 
    set up.userid = upper(userid),
        up.prod_cd = upper(prod_cd),
        up.plan_cd = upper(plan_cd),
        up.state_lst = upper(state_lst),
        up.state_nm = upper(state_nm),
        up.lst_update_ts = currentTimestamp
  where up.userid = upper(userid)
    and up.prod_cd = upper(prod_cd)
    and up.plan_cd = upper(plan_cd); 
```

如果您的命名约定区分列名和参数名，那么当您打算使用参数或局部变量名时，无意中使用列名会困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:36:06.183

问题就在这里

如果您希望 col 不接受 null 值，则将其定义为**NOT NULL** ，**反之亦然**

```
CREATE TABLE DCWEB.USER_PLAN_PREFERENCE
(
  USERID        VARCHAR2(40) NOT NULL,
  PROD_CD       VARCHAR2(9)  NULL,--**this should be NOT NULL** 
  PLAN_CD       VARCHAR2(9)  NULL,--**this should be NOT NULL** 
  STATE_LST     VARCHAR2(2)  NOT NULL,
  STATE_NM      VARCHAR2(40) NOT NULL,
  LST_UPDATE_TS TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP NOT NULL
); 
```

# c# - 如果任务列表中的令牌存在，则停止部署

> ID：10868125
> 
> 赞同：2
> 
> 时间：2012-06-03T05:30:34.397
> 
> 标签：c#, visual-studio, deployment

我想知道在 Visual Studio 中是否有一种方法（我在家里有 Pro 作为学生和 Web Dev 2010 Express 在工作）如果存在某个令牌，则可以停止 Web 部署。

我想知道这一点，因为我有一个站点的一部分使用`[RequireHttps]`我注释掉的注释进行测试，但是如果我添加了任务列表令牌，我想要一种方法来标记它并停止部署。

通常我不需要这个，只会使用 Dev ssl 证书，但由于我如何做一些我的链接，这将不起作用。

我希望这很清楚，如果不是请询问。

一个示例令牌可能是`//HALT: Uncomment [RequireHttps]`然后停止停止我只是`//HA LT: Uncomment [RequireHttps]` 如果有更好的方法我总是愿意接受建议。

编辑：我不认为这是相关的，但这正在用于 MVC3 项目。

# node.js - 不能“酿造链接”一个未链接的小桶

> ID：10868133
> 
> 赞同：22
> 
> 时间：2012-06-03T05:32:46.070
> 
> 标签：node.js, homebrew

```
$: which node
$: node
-bash: node: command not found
$: brew install node
Error: node-0.6.18 already installed
$: brew doctor
Error: You have unlinked kegs in your Cellar
Leaving kegs unlinked can lead to build-trouble and cause brews that depend on
those kegs to fail to run properly once built.

node

$: brew link node
Error: No such file or directory - /usr/local/Cellar/node/0.6.5
$: brew uninstall node
Error: No such file or directory - /usr/local/Cellar/node/0.6.5
$: brew install node
Error: node-0.6.18 already installed 
```

如何让我的节点回到正轨？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-03T20:53:13.490

我能够通过运行重新链接正确版本的节点：

```
brew cleanup
brew link node
brew uninstall node
brew install node 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-23T08:52:10.620

我得到：

```
$ brew link node
Error: No such keg: /usr/local/Cellar/node
$ brew link node@8
Warning: node@8 is keg-only and must be linked with --force 
```

该命令有助于让一切重新运行：

```
brew link --overwrite --force node@8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T03:20:27.430

要强制链接并覆盖所有冲突文件：

```
brew link --overwrite node 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-15T10:06:48.310

我个人不得不为不可写的节点文件使用一些 sudo chmod 魔法。即使启用了 --force，Brew 默认也不会处理它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-06T15:08:10.677

echo 'export PATH="/usr/local/opt/node@12/bin:$PATH"' >> ~/.zshrc

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-27T12:14:45.763

我为此困惑了很久。没有任何效果。我正在使用 macOS。

在终端中，执行以下命令以使用适当的 node.js 设置获取 nvm 设置（有关脚本的更多详细信息，请阅读此[https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install .sh](https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh) ):

curl -o- [https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh](https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh) | zsh

重新启动终端并运行以下命令：

nvm -v 你应该看到一个版本。

现在让我们安装节点：

nvm install 14.15 安装完成后，运行：

节点-v

你应该很高兴。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-05T07:34:41.960

我对红宝石有同样的问题。我想卸载它。这是对我有用的修复

```
brew install ruby 
```

然后

```
echo 'export PATH="/usr/local/opt/ruby/bin:$PATH"' >> ~/.zshrc 
```

然后，当我尝试卸载时，它起作用了。

```
brew uninstall ruby 
```

所以你可以通过用 node 替换 ruby​​ 来做同样的事情。然后重新安装它，它将被修复。

# c# - 笛卡尔到极坐标（3d 坐标）

> ID：10868135
> 
> 赞同：5
> 
> 时间：2012-06-03T05:33:05.747
> 
> 标签：c#, xna, cartesian, polar-coordinates

如何在 3D 空间中的笛卡尔坐标系和极坐标系之间进行转换？最好使用 ac# 示例，但任何事情都会受到赞赏。谢谢！

**编辑** 当考虑到 20% 的变化时（不形成一个球体）

![在此处输入图像描述](../Images/c334473de7e782759db8217627c6a31c.png)

**编辑 2**

```
private void Spherise() {
        for (int i = 0; i < vertices.Count; i++) {
            float radius = this.radius;
            float longitude = 0;
            float latitude = 0;

            float sphereRadius = 32;

            Color color = vertices[i].Color;

            ToPolar(vertices[i].Position - centre, out radius, out longitude, out latitude);
            Vector3 position = ToCartesian(sphereRadius, longitude, latitude) + centre;

            Vector3 normal = vertices[i].Position - centre;
            normal.Normalize();

            const float lerpAmount = 0.6f;
            Vector3 lerp = (position - vertices[i].Position) * lerpAmount + vertices[i].Position;
            vertices[i] = new VertexPositionColorNormal(lerp, color, normal);
        }
    }

    private void ToPolar(Vector3 cart, out float radius, out float longitude, out float latitude) {
        radius = (float)Math.Sqrt((double)(cart.X * cart.X + cart.Y * cart.Y + cart.Z * cart.Z));
        longitude = (float)Math.Acos(cart.X / Math.Sqrt(cart.X * cart.X + cart.Y * cart.Y)) * (cart.Y < 0 ? -1 : 1);
        latitude = (float)Math.Acos(cart.Z / radius) * (cart.Z < 0 ? -1 : 1);
    }

    private Vector3 ToCartesian(float radius, float longitude, float latitude) {
        float x = radius * (float)(Math.Sin(latitude) * Math.Cos(longitude));
        float y = radius * (float)(Math.Sin(latitude) * Math.Sin(longitude));
        float z = radius * (float)Math.Cos(latitude);

        return new Vector3(x, y, z);
    } 
```

![在此处输入图像描述](../Images/a34919e8f59ce9b1ece58c93cadb19a7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T05:55:27.600

从笛卡尔到极地：

```
r = sqrt(x * x + y * y + z * z)
long = acos(x / sqrt(x * x + y * y)) * (y < 0 ? -1 : 1)
lat = acos(z / r) 
```

从极地到笛卡尔：

```
x = r * sin(lat) * cos(long)
y = r * sin(lat) * sin(long)
z = r * cos(lat) 
```

我还没有测试过。

您可以重写以减少浮点运算的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-19T14:03:06.117

这取决于如何测量方位角 - 从水平面或从垂直轴。我已阅读 Wikipedia 文章，但如果您将其测量为地理纬度（赤道 = 0，波兰 = +90 和 -90），那么您应该使用**asin**和**sin**。

我在 3D 建模软件中使用 c#，并且方位角是相对于 xy 平面而不是 z 轴测量的。在我的情况下，公式是：

纬度 = **asin** (z / r)

x = r * **cos** (lat) * cos(long)

y = r * **cos** (lat) * sin(long)

z = r * **sin** (lat)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-19T10:43:26.307

为了考虑到 4 个象限：

```
r = sqrt(x * x + y * y + z * z)
long = atan2(y,x);
lat = acos(z / r); 
```

这是在以下功能中实现的，我在 4 个象限中进行了检查：

```
double modulo(vector <double> xyz) { return sqrt(xyz[0] * xyz[0] + xyz[1] * xyz[1] + xyz[2] * xyz[2] + 1e-130); }
void cartesian_to_polar(vector <double> a, double& r, double& lat, double& lon) { r = modulo(a); lon = atan2(a[1], a[0]); lat = acos(a[2] / r); }
void polar_to_cartesian(double r, double lat, double lon, vector <double>& a) { a[2] = r * cos(lat); a[0] = r * sin(lat) * cos(lon); a[1] = r * sin(lat) * sin(lon); } 
```

# html - 在全屏模式下控制 div

> ID：10868141
> 
> 赞同：3
> 
> 时间：2012-06-03T05:34:39.470
> 
> 标签：html

```
<body style="margin: 0pt auto;">
<div id="header" style="background-color:#000033; width:auto; height:70px"></div>
<div id="body" style="background-color: rgb(153, 153, 153); width: 100%; position: absolute; margin-right: 300px; margin-left: -300px; height: 76%;"></div>
<div id="nav" style="position: absolute; left: 1066px; width: 300px; top: 70px; height: 76%; background-color: rgb(221, 34, 221);"></div>
<div id="footer" style="background-color:#000033; width:100%; height:70px; position:absolute; bottom:0"></div>
</body> 
```

****全屏视图****

[http://i.stack.imgur.com/VukrD.jpg](http://i.stack.imgur.com/VukrD.jpg)

当我们处于全屏模式时如何删除空白？像**正常视图**如下：

[http://i.stack.imgur.com/DhtwT.jpg](http://i.stack.imgur.com/DhtwT.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:47:53.237

白色的差距在那里，因为你不能保证`70px + 76% + 70px == 100%`。事实上，它很可能没有，而你只是得到了这个`76%`值，因为你尝试了不同的数字直到它适合。

由于它们是绝对位置元素，请尝试使用`bottom: 70px;`而不是高度。

# javascript - jquery slideUP / DOWN工作很有趣

> ID：10868145
> 
> 赞同：1
> 
> 时间：2012-06-03T05:35:10.007
> 
> 标签：javascript, jquery

在下面的代码中，当我选择标记为“是”的单选按钮时，它确实会向下滑动。但是，当我单击标记为“否”的那个时，它不会向上滑动。为什么是这样？

html:

```
<label>Yes</label><input type="radio" name="teacher" id="teacher" value="yes"/>
<label>No</label><input type="radio" name="teacher" id="teacher" value="no"/><br> 
```

jQuery：

```
$("#teacher").click(function() {    
    if($(this).val() === "yes")
    {
        $("#teacher-info").slideDown();
    }
    else if($(this).val() === "no")
    {
        $("#teacher-info").slideUp();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:40:21.127

您有两个带有`id`of 的元素`teacher`。

`id`意味着是一个独特的属性（只有一个元素有一个特定的`id`），而 jQuery 假设这是真的。如果你有两个相同的元素`id`，jQuery 总是选择第一个。

话虽这么说，您的问题的解决方案是将 a 更改`id`为 a `class`，它旨在用于许多元素。

**HTML**：

```
<label>Yes</label>
<input type="radio" name="teacher" class="teacher" value="yes"/>

<label>No</label>
<input type="radio" name="teacher" class="teacher" value="no"/> 
```

**JavaScript**：

```
$(".teacher").click(function() {    
    if($(this).val() === "yes")
    {
        $("#teacher-info").slideDown();
    }
    else if($(this).val() === "no")
    {
        $("#teacher-info").slideUp();
    }
}); 
```

顺便说一句，由于您的单选按钮只有两种状态（`yes`和`no`），您的代码可以简化：

```
$(".teacher").click(function() {    
    if ($(this).val() === "yes") {
        $("#teacher-info").slideDown();
    } else {
        $("#teacher-info").slideUp();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:45:42.087

要在 Jquery 中获取`radiobutton`值，您可以简单地执行以下操作：

```
$('input:radio[name=teacher]:checked').val(); 
```

首先更改您的代码并添加`class`：

```
<label>Yes</label>
<input type="radio" name="teacher" class="teacher" value="yes"/>

<label>No</label>
<input type="radio" name="teacher" class="teacher" value="no"/> 
```

所以现在改变你的代码是这样的：

```
$(".teacher").click(function() {  
    var btnValue = $('input:radio[name=teacher]:checked').val()
    if(btnValue === "yes")
    {
        $("#teacher-info").slideDown();
    }
    else if(btnValue === "no")
    {
        $("#teacher-info").slideUp();
    }
}); 
```

# c# - HttpWebRequest 前两次写入几乎立即发生，为什么？

> ID：10868147
> 
> 赞同：1
> 
> 时间：2012-06-03T05:35:30.233
> 
> 标签：c#, http, file-upload

使用 HttpWebRequest 上传文件时，前两次写入请求流总是几乎立即完成。我认为一定有某种缓冲发生所以我禁用所以我这样做了

```
_req.AllowWriteStreamBuffering = false; 
```

但这并没有什么不同。

这有点烦人，因为我通过平均最后 10 次写入速度来测量上传速度，所以起初我的应用程序显示出异常快的速度，然后又回落到 50kbps 左右。

如果我可以从第一次写入开始测量速度，那就太好了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:13:08.587

TCP 堆栈可能会很快从应用程序中获取初始写入窗口。它在后台发送数据（在立即接受之后）。

`AllowWriteStreamBuffering`告诉`HttpWebRequest`不要缓冲。它没有告诉 TCP 做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:44:05.110

USR 是正确的。

还应该补充一点，这可能与 TCP 的工作方式有关。

它可能已经将初始包背靠背发送，并且在交付失败时会降低速度以适应网络问题，之后它可能会再次缓慢提高速度。

不知道您使用什么 TCP 版本或您的网络状况，我只能对此进行推测

# qt - 我可以在 graphicsView 上使用 2 setScene 吗？

> ID：10868154
> 
> 赞同：0
> 
> 时间：2012-06-03T05:36:51.297
> 
> 标签：qt, qgraphicsview

我使用此代码，但 graphicsView 将显示最后一个命令，如何在一个 graphicsView 中显示两个 setScence？

```
ui->setupUi(this);
line1= new QGraphicsScene (this);
line= new QGraphicsScene (this);

ui->graphicsView->setScene(line);    // not show
ui->graphicsView->setScene(line1);   // show 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:37:54.113

你需要两个 QGraphicsViews。QGraphicsView 一次只能显示一个场景。我不确定这是否有意义。如果您想要并排的两个场景/视图，也许您可​​以查看[QLayout](http://qt-project.org/doc/qt-4.8/qlayout.html)或[QSplitter 。](http://qt-project.org/doc/qt-4.8/qsplitter.html)

# ftp - 自动删除旧文件 FTP 用户文件夹 Ubuntu Server

> ID：10868158
> 
> 赞同：0
> 
> 时间：2012-06-03T05:37:56.307
> 
> 标签：ftp, ubuntu-server, ubuntu-12.04

现在，我目前有一个 FTP 服务器，并在带有 Proftpd 的 Ubuntu Server 12.04 LTS 64 位上运行。

我将 FTP 的每个用户限制在一定的大小，具体取决于用户及其数据存储容量。

但是，对于那些将视频上传到 FTP 服务器的人，我需要自动删除最旧的文件，以便在上传新文件时为新文件腾出空间。此外，我只想删除一些旧文件，以便在上传到服务器时为新文件腾出空间。

我想知道是否可以在后台运行一个自动化脚本并每隔 X 分钟检查一次，也许可以让它处理多个目录......

现在我正在登录并手动处理它，但这很乏味且非常耗时。因此，任何帮助将不胜感激。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:46:23.503

我会使用 cron ( [http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron) ) 来执行您可以自己编写的 bash 脚本。

您可以在此处找到与您的需求类似的 bash 脚本的信息：[https ://superuser.com/questions/375011/bash-script-to-delete-old-files-older-than-x-days-with-子目录](https://superuser.com/questions/375011/bash-script-to-delete-old-files-older-than-x-days-with-subdirectories)，如果您需要帮助使用`cron`或`find`只是打开您的终端并输入`man cron`或`man find`

# ruby-on-rails - @m 和应用程序助手的范围

> ID：10868161
> 
> 赞同：0
> 
> 时间：2012-06-03T05:38:18.923
> 
> 标签：ruby-on-rails, session

我对这样做的目的有点困惑：

```
module SessionsHelper
   def current_user=(user)
       @current_user = user
   end
end 
```

来源：[http ://ruby.railstutorial.org/chapters/sign-in-sign-out#code:current_user_equals](http://ruby.railstutorial.org/chapters/sign-in-sign-out#code:current_user_equals)

因为通过我们的控制器我们设置了@user，它在控制器和视图之间有一个范围，那么为什么我们需要显式地定义它呢？

此外，解释允许：

```
redirect_to current_user 
```

current_user 函数如何知道我何时说 redirect_to (function) 我在谈论 @variable_path ？（在本例中为 user_path）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T05:53:04.083

Rails 足够聪明，可以知道背后`current_user`有一个对象。`User`

也就是说，Rails 可以重定向到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:05:48.107

超过 90% 的 Rails 开发人员都知道（我们可以说它现在已成为 Rails 约定优于配置的一部分）

*   current_user 代表用户对象
*   current_user 代表的不是任何用户，而是登录的用户

当您查看 rails 代码并找到 @user 时，您需要通读定义 @user 的几行代码，以了解定义它的原因以及它的用途。current_user 不是这种情况，因为它代表已登录的用户。

关于你的第二个问题，

```
 redirect_to some_object # or any function that returns some object 
```

当您将任何对象传递给redirect_to 时，URL 会发生重定向

```
 "/#{object.class.name.tableize}/#{object.id}" 
```

假设是一个页面，一个“显示”页面，向最终用户详细说明对象

object_path 或 object_url 制作相同的 url

# python - 使 FileChooserDialog 允许用户选择文件夹/目录

> ID：10868167
> 
> 赞同：4
> 
> 时间：2012-06-03T05:41:07.547
> 
> 标签：python, gtk

**可以将 gtk.FileChooserDialog/gtk.FileChooserButton 设置为仅允许用户选择文件夹/目录吗？**

也许我添加了一个目录过滤器来实现这一点？我怎样才能使用户只能选择一个文件夹？

```
email_dialog    = gtk.FileChooserDialog(title="Select folder",
                                        buttons=(gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL, gtk.STOCK_OPEN, gtk.RESPONSE_OK))
email_filter = gtk.FileFilter()
email_filter.set_name("Folder")
email_filter.add_pattern("*")  # whats the pattern for a folder
email_dialog.add_filter(email_filter) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T10:18:39.720

```
email_dialog.set_action(gtk.FILE_CHOOSER_ACTION_SELECT_FOLDER) 
```

文档[在这里](http://www.pygtk.org/docs/pygtk/class-gtkfilechooser.html#method-gtkfilechooser--set-action)。

# javascript - 我的代码适用于 jQuery 1.3.2 但不适用于 1.6.4

> ID：10868168
> 
> 赞同：0
> 
> 时间：2012-06-03T05:41:12.983
> 
> 标签：javascript, jquery

我有以下代码在 jQuery 1.3.2 上完美运行：

```
 $("#passwordLabel").click(function()
            {
                $(this).hide();
                $("#password").focus();
            }
        );

        $("#confirmpasswordLabel").click(function()
            {
                $(this).hide();
                $("#confirmpassword").focus();
            }
        );

        $("#password").focus(function()
            {
                $("#passwordLabel").hide();
            }
        );

        $("#confirmpassword").focus(function()
            {
                $("#confirmpasswordLabel").hide();
            }
        );

        $("#password").blur(function()
            {
                if($(this).val()=="")
                {
                    $("#passwordLabel").show();
                }
            }
        );

        $("#confirmpassword").blur(function(value)
            {
                if($(this).val()=="")
                {
                    $("#confirmpasswordLabel").show();
                }
            }
        );
    }); 
```

但不幸的是，当我将 jQuery 库更改为 1.6.4 版时，这些代码不再起作用。

那是因为 jQuery 1.6.4 不再有这种语法了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:44:05.247

顺便说一句，你有好名字。

它看起来像是你的 JavaScript 新手。让我给你一些指示。首先，您应该尝试减少向浏览器询问元素的次数。使用 jQuery，您所要做的就是将选定的元素保存到一个变量中。我个人喜欢在我的元素变量前面加上 $，所以我知道那里有 jQuery 元素。

```
//too many selections
$('element').foo(); //query 1
$('element').bar(); //query 2
$('element').baz(); //query 3

//better
$element = $('element'); //query 1
$element.foo();
$element.bar();
$element.baz(); 
```

第二件事是您应该始终将 { 与块的开头保持在同一行。在大多数语言中，这无关紧要，并且在很多情况下它可以在 JavaScript 中工作，但由于分号插入，最好让你的 { 在同一行。

```
//one example of why this is bad
return
{
    "foo": "bar"
};

//The above actually becomes
return;
{
    "foo": "bar"
};

//should have actually been
return {
    "foo": "bar"
}; 
```

我注意到的最后一件事是，当单击相应的标签时，您让 javascript 关注每个输入。这实际上可以在没有 JavaScript 的情况下完成。您需要做的就是将 for 属性添加到您的标签中。它们应该设置为相应输入的 id。

```
<!-- from this -->
<label id="passwordLabel">Password</label>
<input id="password" type="password">

<!-- to this -->
<label id="passwordLabel" for="password">Password</label>
<input id="password" type="password"> 
```

无论如何，只要您修复了您的 html，以下应该可以解决问题。

```
//Wait for the page to load
$(function() {
    var $passwordLabel, $confirmpasswordLabel, $password, $confirmpassword;

    //Pre select the form elements
    $passwordLabel = $("#passwordLabel");
    $password = $("#password");
    $confirmpasswordLabel = $("#confirmpasswordLabel");
    $confirmpassword = $("#confirmpassword");

    //bind events for the password input
    $password.focus(function() {
        //on focus hide the label
        $passwordLabel.hide();
    });
    $password.blur(function() {
        if(!$password.val()) {
            //if the input is empty then restore the label on blur
            $passwordLabel.show();
        }
    });

    //bind events for the confirm password input
    $confirmpassword.focus(function() {
        //on focus hide the label
        $confirmpasswordLabel.hide();
    });
    $confirmpassword.blur(function() {
        if(!$confirmpassword.val()) {
            //if the input is empty then restore the label on blur
            $confirmpasswordLabel.show();
        }
    });
});​ 
```

如果您想查看一些工作代码，我用上面的示例和一些示例输入为您制作了一个 jsFiddle：http: [//jsfiddle.net/wef85/8/](http://jsfiddle.net/wef85/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:52:38.077

非常感谢您回答问题。

我相信我们之前的代码没有逻辑错误。我应用了您的代码，但它仍然表现相同......我认为 jQuery 版本 1.3.2 和 1.6.4 存在问题，因为我们同时使用它们。

让我为这个问题添加一点信息，这可能是问题的原因：

我们正在构建一个需要使用 jQuery 进行验证的注册页面。在那个页面上，我们还使用了 jQuery 滑块。

所以页面结构看起来像这样：

请检查这张图片：http: [//img72.imageshack.us/img72/1111/structured.png](http://img72.imageshack.us/img72/1111/structured.png)

1.  Landing-header.php（包括 jQuery-1.6.4.min.js 和滑块代码）

2.  login-page.php（包括landing-header.php，包括jQuery.js（jQuery 1.3.2）和表单验证代码-包括密码字段）

所以我们使用landing-page.php 来测试页面（其中也包括landing-header.php）。

问题是，当我们包含 jQuery 1.3.2 时，密码标签确实会重新出现，但是来自landing-header.php 的滑块不起作用。

当我们删除包含 jQuery 1.3.2 时，滑块动画效果很好，但即使使用您的代码，密码标签也不会重新出现。

# java - eclipse 错误：选择必须是 WSDL

> ID：10868169
> 
> 赞同：7
> 
> 时间：2012-06-03T05:41:18.647
> 
> 标签：java, eclipse, wsdl, jax-ws

我正在尝试使用 Eclipse 中的 Java 在 Tomcat v7 中使用 Apache CXF 2.6 运行时创建一个简单的 Web 服务。我正在关注本教程[http://www.youtube.com/watch?v=o2Vjs8ylmFM&feature=autoplay&list=ULtSVs_nwD1Ug&playnext=1](http://www.youtube.com/watch?v=o2Vjs8ylmFM&feature=autoplay&list=ULtSVs_nwD1Ug&playnext=1)

在本视频中，我将按照向导在 Eclipse 中创建一个新的基于 XML 的 Web 服务。

在向导中，Web 服务类型是自底向上 Java Bean Web 服务。有两个滑块，我希望它指示测试服务和测试客户端重新创建错误，即选择必须是出现在测试客户端末尾的 WSDL。

请帮助我了解我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T00:03:06.180

嗯，我收到了与 CXF 2.7.2 相同的消息

我返回并在向导的创建服务端点接口部分（我创建了 SEI）中添加了注释，并且它起作用了。

我认为，因为我的实现和服务端点接口最初都没有注释，因此无法生成 WSDL 并且向导无法继续，而是生成“选择必须是 WSDL”消息......或者至少这是我的信念此时此刻 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T05:33:22.303

我在使用 CXF 2.6.1 版时遇到了同样的错误。但我尝试使用 CXF 版本 2.3.11。现在它可以工作了:) 但不清楚为什么它不适用于 2.6.1 版。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:21:37.473

我在 CXF 2.7.1 上遇到了同样的错误。当我在 WSDL 中获得 2 个服务并尝试从中创建 Web 服务客户端时发生此错误。我不知道为什么它会出现奇怪的错误，因为我只从 WSDL 生成客户端存根。但是当我在 WSDL 中使用 One Service 创建时，我没有收到任何错误。你知道当里面有 2 个服务时如何处理 WSDL 吗？如何从该 WSDL 生成客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T21:34:57.560

我遇到了同样的错误，并通过右键单击 java 类并选择 new-> web service 来完成工作，而不是选择 java 资源包

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-10T17:23:05.983

> 在向导中，Web 服务类型是自底向上 Java Bean Web 服务。有两个滑块，我希望它指示测试服务和测试客户端重新创建错误，即选择必须是出现在测试客户端末尾的 WSDL。

在“自下而上的 Java Bean Web 服务”下，您指定了一个类。检查这个类的方法。这些方法不能有未知的（对于 Web 服务客户端的）返回值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-15T07:33:56.283

我是同样的错误，但我解决了。我的情况是......因为没有创建类。首先检查你的编译类，构建路径>输出文件夹。如果找不到类，则 Build Path > Order and Export ：在 Project Clean 之后检查并检查编译类。对不起，我的英语很差，但让你知道我的经历。祝你好运 ！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-03T13:15:24.543

实际上只是更改 CXF 版本对我有帮助。我建议做同样的谢谢

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-06T04:32:38.983

我是 Java WebService 的新手，在学习[教程时也遇到了类似的问题](https://angelozerr.wordpress.com/2011/08/23/jaxwscxf_step1/)

我将 CXF 版本从 3.1.1 降级到 2.4.2，清除了旧的依赖项并重建了项目。它开始为我工作。

PS - 我使用的是 JDK 1.7。

# java - Java sql更新错误：数据类型不匹配

> ID：10868170
> 
> 赞同：0
> 
> 时间：2012-06-03T05:41:20.423
> 
> 标签：java, sql, netbeans

我在 ms 访问中创建了一个表。我在 MS-access 中将 ID 的数据类型设置为自动编号。在 java 中，当我尝试更新记录时。netBeans IDE 给了我“标准表达式中的数据类型不匹配”的错误。但是当我更改表中没有的 ID 号时，它运行良好。代码如下。

```
String sql = "Update table1 set price ='" + txtPrice.getText() + "', quantity='" + txtQuantity.getText() + "', description='" + txtDescription.getText() + "' where id= " + txtid.getText() + "";
        try {
             pst = conn.prepareStatement(sql);
            pst.executeUpdate();
            JOptionPane.showMessageDialog(null, "Updated");
            UpdateJTable();
        } catch (Exception e) {

            JOptionPane.showMessageDialog(null, e);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:30:29.277

我认为您也可能会混淆常规 Statement 和 PreparedStatement 对象。PreparedStatement 让您有机会使用占位符（您可能会在很多 sql 语句中看到）并让 PreparedStatement 为您做更多的工作。

尝试像这样编写你的 sql 语句：

```
update table1 set price = ?, quantity = ?, description = ? where id = ? 
```

然后使用 PreparedStatement 对象，您可以：

```
pStmt.setInteger(1, Integer.valueOf(txtPrice.getText()) 
```

对于每个参数。自从我直接使用 PreparedStatement 以来已经有几年了，但如果没有记错的话，参数是从 1 开始的。

但是您的基本问题是铸造问题之一。为此使用 PreparedStatement 也可能使您的代码更简洁（更安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T05:48:25.797

首先尝试在您的 id 字段中使用类型转换。喜欢：

```
int id = Integer.parseInt(txtid.getText()); 
```

然后执行查询：

```
String sql = "Update table1 set price ='" + txtPrice.getText() + "', quantity='" +
              txtQuantity.getText() + "', description='" + txtDescription.getText() + "' 
              where id= " + id + ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T16:57:00.583

对于您收到的参数太少错误 - 仔细检查查询中的字段名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T05:43:44.397

我假设`price`和`quantity`列是整数，因此您不需要引用它们。

试试下面的sql：

```
String sql = "Update table1 set price =" + txtPrice.getText() + ",
              quantity=" + txtQuantity.getText() + ", description='" +
              txtDescription.getText() + "' where id= " + txtid.getText() + ""; 
```

请注意，价格和数量中缺少单引号

# windows - 为 Windows x86 编写程序集

> ID：10868171
> 
> 赞同：4
> 
> 时间：2012-06-03T05:42:18.643
> 
> 标签：windows, assembly

我想使用 x86 程序集为 Windows 编写简单的程序（控制台输入/输出），主要是因为我只是好奇。如果有人能指出我正确的方向，那就太好了。我已经对一些更简单的 x86 指令、寄存器的功能等有了相当好的理解，但对我来说程序如何与操作系统交互以及如何使用标准输入和输出仍然是个谜。我知道这些事情与诸如 advapi32.dll 和 kernel32.dll 之类的库有关，并且有关联的静态库 .lib 文件使编译器能够使用这些动态链接的库，但除此之外，我几乎不知道这是怎么回事发生。我什至对 C 等语言中的头文件如何使用 .lib 文件感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T06:15:19.183

也许最简单的方法是为构建一些简单的程序提供指导，并让您从那里进行推断。首先你需要一些源代码：

```
.386
.MODEL flat, stdcall

; This is what would come from a header -- a declaration of a the Windows function:
MessageBoxA PROTO near32 stdcall, window:dword, text:near32,
        windowtitle:near32, style:dword

.stack 8192

.data
message db "Hello World!", 0
windowtitle   db "Win32 Hello World.", 0

.code
main proc
        invoke MessageBoxA, 0, near32 ptr message, near32 ptr windowtitle, 0
        ret
main endp
        end main 
```

为了构建它，我们调用`masm`如下：

```
ml hello32.asm -link -subsystem:windows user32.lib 
```

这告诉它要组装文件，当它链接时，告诉它链接它作为 Windows 子系统（主要替代方案是`-subsystem:console`）并链接到`user32.lib`. 后者`MessageBoxA`为我们提供了定义。

写入控制台的类似程序（奇怪的是）稍微复杂一点：

```
.386
.MODEL flat, stdcall

getstdout = -11

WriteFile PROTO NEAR32 stdcall, \
        handle:dword,           \
        buffer:ptr byte,        \
        bytes:dword,            \
        written: ptr dword,     \
        overlapped: ptr byte

GetStdHandle PROTO NEAR32, device:dword

ExitProcess PROTO NEAR32, exitcode:dword

.data
message db "Hello World!", 13, 10
msg_size dd $ - offset message

.data?
written  dd ?

.code
main proc   
    invoke GetStdHandle, getstdout

    invoke WriteFile,                   \
           eax,                         \
           offset message,              \
           msg_size,                    \
           offset written,              \
           0

    invoke ExitProcess, 0
main endp
        end main 
```

构建几乎相同，除了它使用控制台，因此我们指定控制台子系统，并且我们正在使用的函数在内核中定义：

```
ml hello_console.asm -link -subsystem:console kernel32.lib 
```

头文件将包含我上面为`MessageBoxA`、`GetStdHandle`、`WriteFile`等给出的声明的等价物。但每个头文件通常会有更多的声明——例如，kernel32 中的所有函数可能都在一个头文件中。

就图书馆而言，所涉及的机制有些涉及，但大多无关紧要。要完成这项工作，您可以查看（例如）MSDN，查看要链接的库，然后将其添加到命令行中。

更复杂的解释是，至少当您链接到静态库时，它只会找到您调用的任何函数，并将每个函数的副本放入您的可执行文件/DLL 中。如果（如上所述）您使用的是 DLL 中的代码，它基本上只是将一条记录放入可执行文件中，以告知它所依赖的 DLL 中的哪个函数。然后，当您加载/运行程序时，加载程序会查找您的程序所依赖的所有 DLL，并加载它们（当然，也递归加载它们所依赖的任何内容）。然后加载程序修复这些引用，因此对 DLL 中函数的引用将填充为该 DLL 中已分配给该函数的任何地址。

# google-chrome-extension - XMLHttpRequest 在谷歌浏览器扩展中不起作用

> ID：10868182
> 
> 赞同：1
> 
> 时间：2012-06-03T05:46:05.007
> 
> 标签：google-chrome-extension, xmlhttprequest

我已经为此烦恼了很长时间。我正在尝试向谷歌发送一个 xmlhttprequest 并将相应的数据记录到我的控制台中。我的代码：

```
sendRequest();
function sendRequest()
 {
              var req = new XMLHttpRequest();
req.open(
    "GET",
    "http://www.google.com",
    true);

req.send(null);
console.log(req.responseText);
 } 
```

我在 manifest.json 中添加了权限。但是，当我调试时，它什么也没打印。只是一个空行。我在这里做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:03:13.107

Dmitri Sorin 的回答会很好。这是一个更通用的版本：

```
sendRequest('http://www.google.com/', function (response) {
    alert('My request returned this: ' + response);
}); 

function sendRequest(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            callback(xhr.responseText);
        }
    };
    xhr.open("GET", url, true);
    xhr.send();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T07:22:29.603

您的错误实际上是您将异步 XMLHttpRequest 函数视为同步。当您调用 console.log 时，Google 没有响应。您的代码应如下所示：

```
sendRequest();

function sendRequest() {
    var req = new XMLHttpRequest();
    req.open("GET", "http://www.google.com", true);
    req.addEventListener("load", function(e) {
        console.log(req.responseText);
    }, false)

    req.send(null);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-11T14:11:17.637

```
sendRequest();

function sendRequest() {
    var req = new XMLHttpRequest();
    req.open("GET", "http://www.google.com", false );// set the third argument to false
    req.send(null);
    console.log(req.responseText);
} 
```

# c - 如果从 c 程序执行，Powershell 脚本不起作用？

> ID：10868184
> 
> 赞同：4
> 
> 时间：2012-06-03T05:46:23.567
> 
> 标签：c, powershell

如果我从管理员 powershell 运行它，我有一个 powershell 脚本可以正常工作。但是，如果我在 ac 程序中调用 powershell 脚本，以管理员身份运行，使用 system() 函数，它的某些部分不起作用。更具体地说，复制 unattend.xml 和 sysprep.exe 命令。我已经发布了 powershell 脚本和 c 程序脚本。我怎样才能让它工作？

POWERSHELL 脚本：

```
#Set working directory to scripts location.
$scriptpath = $MyInvocation.MyCommand.Path
$Switcheroo = Split-Path $scriptpath
Set-Location $Switcheroo
#Set error options
$Error.clear()
$ErrorActionPreference = “Inquire”

Write-Host "Running part 2."
#1
& "DISKPART" /s $Switcheroo\DskPrtRmv.txt
TIMEOUT /T 3

#2
if ($? -eq "True")
{
    Copy-Item $Switcheroo\unattend.xml $env:windir\System32\Sysprep
    TIMEOUT /T 3 

    #3
    if ($? -eq "True")
    {
        SCHTASKS /Delete /TN "Switcheroo" /f
        TIMEOUT /T 3
    }
    elseif ($? -ne "True")
    {
        Write-Host Failed to copy unattend.xml
        exit (22)
    }

        #4
        if ($? -eq "True")
        {
            rm log.txt
            TIMEOUT /T 3
        }
        elseif ($? -ne "True")
        {
            Write-Host Failed to delete the schedued task
            exit (32)
        }

            #5
            if ($? -eq "True")
            {
                & "$env:windir\System32\Sysprep\sysprep.exe" /generalize /oobe /shutdown /unattend:unattend.xml
            }
            elseif ($? -ne "True")
            {
                Write-Host Failed to remove the log.txt
                exit (42)
            }
                #6
                if ($? -ne "True")
                {
                    Write-Host Sysprep failed.
                    exit (52)
                }
}
elseif ($? -ne "True")
{
    Write-Host Failed to run DskPrtRmv
    exit (12)
} 
```

C代码：

```
/* 
* File:   main.c
* Author: Andrew
*
* Created on June 1, 2012, 2:39 PM
*/

#include <stdio.h>
#include <stdlib.h>

FILE *fp;

int main() 
{
    printf("Switcheroo in progress...\n");

    if ((fp=fopen("chk.bin", "rb")) == NULL)
    {
        //Run powershell script Part1.ps1 and set its return value to the int i variable.
        int i = system("powershell -executionpolicy unrestricted -file \"Part1.ps1\"");
        if (i == 0)
        {
            //Set up the log file that the computer will check upon reboot.
            char buffer[2] = {'0'};
            fp = fopen("chk.bin", "wb");
            fwrite (buffer , 1 , sizeof(buffer) , fp );
        }
        else if (i != 0)
        {
            //Print the error returned from powershell script Part1.ps1
            printf("Part1 Error: %d \n", i);
            system("PAUSE");
        }
    }
    else if (fp = fopen("chk.bin", "rb"))
    {
        //Run powershell script Part2.ps1 and set its return value to the int j variable.
        int j = system("powershell -executionpolicy unrestricted -file \"Part2.ps1\"");
        if (j == 0)
        {
            printf("Switcheroo has finished successfully.\n");
            remove("chk.bin");
        }
        else if (j != 0)
        {
            //Print the error returned from powershell script Part2.ps1
            printf("Part2 Error: %d \n", j);
            system("PAUSE");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T07:02:36.937

您正在测试的计算机上的操作系统架构是什么？

当你编译你的`C`程序时，你的目标是 32 位还是 64 位 exe？

您的问题可以通过您的操作系统是 64 位而您的程序是 32 位这一事实来解释，因此它执行 32 位版本的 PowerShell，这会产生一些麻烦。

如果是这样，您可以使用从 32 位 C exe 生成 64 位 PowerShell 来解决您的问题。

```
c:\windows\sysnative\WindowsPowerShell\v1.0\powershell.exe 
```

# asp.net - 绑定复杂子对象的集合查看MVC3

> ID：10868186
> 
> 赞同：0
> 
> 时间：2012-06-03T05:46:41.367
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework

[首先，这与Asp.Net MVC 3 应用程序中复杂子对象的集合](https://stackoverflow.com/questions/5060817/collection-of-complex-child-objects-in-asp-net-mvc-3-application)非常相似？但是那里的答案都没有真正为我完全回答这个问题。

我有一个包含 PollItem 模型列表的 Poll 模型。我的观点是创建新的民意调查，因此传递给视图的模型是完全空的。所以有基本投票信息的文本框，然后是用户可以添加/删除任意数量的投票项目的下部。我需要以某种方式将这些投票项文本框绑定到 PollItems 列表。

```
@using (Html.BeginForm("CreatePoll", "Polls", FormMethod.Post, new { enctype = "multipart/form-data", id = "createPollForm", @class = "cmxform group" }))
    {
        @Html.TextBoxFor(x => x.Question, new { @class = "title-input full-width prominent", placeholder = "Enter Question Here" })
        <ul class="poll-info">
            <li>
                <p><label>Poll Opens</label></p>
                @Html.TextBoxFor(x => x.OpeningDate, new { id = "openingDatePicker" })
            </li>
            <li>
                <p><label>Poll Closes</label></p>
                @Html.TextBoxFor(x => x.ClosingDate, new { id = "closingDatePicker" })
            </li>
        </ul>
        <section class="description">
            <p><label>Description</label></p>
            @Html.TextAreaFor(x => x.Description, new { @class = "full-width", placeholder = "Enter a more detailed description of the poll here." })
        </section>

        <a class="button"><i class="ico"></i> Attach an object</a>

        <section class="module-questions">
            <ul>
            </ul>
            <span class="button link" onclick="addAnswer()"><i class="ico"></i> Add Answer</span>
        </section>
    } 
```

addAnswer() 函数将列表项中的新文本框附加到将绑定到 PollItem.Description 的无序列表中，这些文本框保存在列表 Poll.PollItems 中。除了描述之外，PollItem 中可能还会有一些其他元素。

我什至不知道从哪里开始，因为我不知道如何绑定动态添加和删除的文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:43:50.060

Check here: [http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx) and here [http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:23:36.800

我建议您查看[以下博客文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，该文章说明了如何实现这一目标。它演示了自定义`Html.BeginCollectionItem`助手的用法，该助手负责为动态添加和删除的输入字段生成正确的名称。

# google-geocoding-api - OVER_QUERY_LIMIT 状态码的含义

> ID：10868188
> 
> 赞同：-1
> 
> 时间：2012-06-03T05:47:33.250
> 
> 标签：google-geocoding-api

[https://developers.google.com/maps/documentation/geocoding/#StatusCodes](https://developers.google.com/maps/documentation/geocoding/#StatusCodes)上的文档 指出：“OVER_QUERY_LIMIT”表示您已超出配额。

当达到每天 2500 的限制并且超过费率时，是否返回相同的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T12:57:37.273

是的，每秒和每天的限制是相同的。阅读以下内容以确定达到了哪个限制，如[https://developers.google.com/maps/documentation/business/articles/usage_limits](https://developers.google.com/maps/documentation/business/articles/usage_limits)中所述 “在收到状态码为 OVER_QUERY_LIMIT 的响应后，您的应用程序应确定哪个已超过使用限制。这可以通过暂停 2 秒并重新发送相同的请求来完成。如果状态码仍为 OVER_QUERY_LIMIT，则您的应用程序每天发送的请求过多。否则，您的应用程序每秒发送的请求过多。 "

# ruby-on-rails - 标签找到的帖子格式

> ID：10868192
> 
> 赞同：0
> 
> 时间：2012-06-03T05:48:08.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, tags, call

我目前有一个带有以下代码的标记系统

```
 rails g model tag name:string
 rails g model tagging post_id:integer tag_id:integer
 rake db:migrate

  class Tagging < ActiveRecord::Base
    belongs_to :post
    belongs_to :tag
  end

  class Tag < ActiveRecord::Base
    has_many :taggings, :dependent => :destroy
    has_many :posts, :through => :taggings
  end

  class Post < ActiveRecord::Base
    has_many :comments, :dependent => :destroy
    has_many :taggings, :dependent => :destroy
    has_many :tags, :through => :taggings
    validates_presence_of :name, :content
    attr_writer :tag_names
    after_save :assign_tags

    def tag_names
      @tag_names || tags.map(&:name).join(' ')
    end

    private

    def assign_tags
      if @tag_names
        self.tags = @tag_names.split(/\s+/).map do |name|
          Tag.find_or_create_by_name(name)
        end
      end
    end
  end

  <p>
    <%= f.label :tag_names %><br />
    <%= f.text_field :tag_names %>
  </p> 
```

在 _post.html.erb 部分

我正在尝试通过执行调用具有特定标签的帖子

```
 <%= post.find_by_tag("sports") %> 
```

当我这样做时，所有带有标签的帖子都会出现，这是我想要的，但它们以这种格式出现

```
 [#<Post id: 11, title: "adfads", body: "adsfasd", user_id: 1, created_at: "2012-05-30 06:17:52", updated_at: "2012-05-30 06:17:52", votes_count: 1>, #<Post id: 8, title: "Cover Letter", body: "Dear Human Resources:\r\n\r\nI would like to make mysel...", user_id: 1, created_at: "2012-05-30 00:28:56", updated_at: "2012-05-30 00:28:56", votes_count: 1>] 
```

我怎样才能让它们以更令人愉快的帖子标题帖子正文的方式出现，而不是现在呈现的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T05:58:39.433

你真的应该在控制器中找到你的发现。忽略这个问题，试试这个：

```
<% my_posts = post.find_by_tag("sports") %>
<% my_posts.each do |post| %>
  <%= post.title %><br />
  <%= post.body %><br />
<% end %> 
```

理想情况下，您应该`@posts = post.find_by_tag("sports")`在控制器中，然后循环通过 @posts 而不是 my_posts。根据需要格式化上述内容。

希望这可以帮助。

# jquery - jquery中的nextAll不起作用

> ID：10868197
> 
> 赞同：2
> 
> 时间：2012-06-03T05:48:59.883
> 
> 标签：jquery, html, firefox

我的html是：

```
<div id="div_0" class="clscol">
   <table>
      <tbody>
         <tr>
            <td>
               <label id="imgDelete_0" class="sfDelete">Delete</label>
            </td>
         </tr>
      </tbody>
   </table>
</div>
<div id="div_1" class="clscol">
   <table>
      <tbody>
         <tr>
            <td>
               <label id="imgDelete_1" class="sfDelete">Delete</label>
            </td>
         </tr>
      </tbody>
   </table>
</div>
<div id="div_2" class="clscol">
   <table>
      <tbody>
         <tr>
            <td>
               <label id="imgDelete_2" class="sfDelete">Delete</label>
            </td>
         </tr>
      </tbody>
   </table>
</div> 
```

在 JQuery 中我尝试：

```
 $('.sfDelete').live("click", function() {
    $(this).parents('div:first').nextAll('.clscol').each(function() {
                                alert('hi'); //For test purpose
                                //alert($('.sfColNo').attr('id'));
                            });
 }); 
```

但我从不进入。`.nextAll`警报从不触发。我使用的是 firefox 4.0。这是浏览器问题还是我错过了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T05:56:09.397

试试这个：

```
$(this).parents('div.clscol').nextAll('div.clscol') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:20:02.957

```
$('.sfDelete').on("click", function() {
    $(this).closest('div.clscol').nextAll('.clscol').each(function() {
        alert('hi');
    });
}); 
```

**[演示](http://jsfiddle.net/xv6cs/)**

# php - 使用两列找出mysql数据库中的流行域

> ID：10868201
> 
> 赞同：2
> 
> 时间：2012-06-03T05:50:12.707
> 
> 标签：php, mysql

我一直在寻找解决这个问题的方法，但还没有真正找到有效的答案。

我有一个这样的 MySql 表：

```
URL                                   Domain          Clicks
http://www.example1.com/erte.html     example1.com    10
http://www.example2.com/xndd.html     example2.com    5
http://www.example3.com/4567.html     example3.com    4
http://www.example1.com/bcdv.html     example1.com    7
http://www.example1.com/098i.html     example1.com    17 
```

它显示了一个 URL、该 URL 指向的域以及为每个 URL 记录的点击次数。

我希望能够使用通过添加该域的总点击次数获得的值来显示最受欢迎的域，而不管它是哪个实际 URL。

所以，根据我的样本值：

```
example1.com = 34
example2.com = 5
example3.com = 4 
```

到目前为止，我能够找到的示例显示了如何根据项目在数据库中显示的次数来查找项目的受欢迎程度。但是，这不包括我想要做的“点击”列。

按照我到目前为止发现的例子可以得到我：

```
example1.com = 3
example2.com = 1
example3.com = 1 
```

这不是我真正想要的。

我不确定如何以有效的方式做到这一点，并希望能得到任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T05:56:42.143

尝试：

```
select domain, sum(clicks) as "total_count" from TABLE group by domain order by total_count asc 
```

这将为您提供从最低到最高排序的总数（点击次数）

# ruby-on-rails - 图像的html代码在rails中不起作用

> ID：10868202
> 
> 赞同：-4
> 
> 时间：2012-06-03T05:50:24.047
> 
> 标签：ruby-on-rails

```
All other HTML code is displayed correctly except for image

This is my code for form.

<th>Content Type</th>
<td>
    <%= f.radio_button(:content_type, 'text') %> Text
    <%= f.radio_button(:content_type, 'HTML') %> HTML

</td>
(<img src="/home/prem/Desktop/a.jpg"  />)

    <% case section.content_type    
     when 'HTML' %>    
     <%= raw section.content %> 
```

显示图像的 HTML 代码时出现问题。它适用于除图像之外的所有 HTML 标记。衷心欢迎回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:00:22.900

确保您的图片网址对浏览器有效，并且是有效的网址，例如[http://yoursite.com/home/star.jpg](http://yoursite.com/home/star.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:00:34.253

假设您将仅在本地运行它，请尝试以下方法之一：

```
<img src="file://home/prem/Desktop/a.jpg"  /> 
```

或者

```
<img src="file:///home/prem/Desktop/a.jpg"  /> 
```

在 Windows 上，

```
<img src="file://C:/home/prem/Desktop/a.jpg"  /> 
```

# jquery - 使用 jQuery 将变量加载到基于单选按钮选择的 div 中

> ID：10868209
> 
> 赞同：0
> 
> 时间：2012-06-03T05:52:08.437
> 
> 标签：jquery, variables, load, loading, radio

**问题：**

根据单选按钮的选择将变量加载到 div 中。

**HTML 代码：**

```
//Variable to be loaded into
<div id="choice"></div>

//Available variables
$choice1 = '<div id="choice-1">Choice 1</div>';
$choice2 = '<div id="choice-2">Choice 2</div>';

//Radio buttons
<input type="radio" name="authors" id="authors" value="1">
<input type="radio" name="authors" id="authors" value="2"> 
```

**jQuery代码（到目前为止）：**

```
$("input[name='authors']").change(function() 
{    
    $('div[id=choice]').load();   
}); 
```

**设想：**

如果用户选择第一个单选按钮（值 = 1），则应将 $choice1 加载到 . 如果之后选择了第二个单选按钮，则应删除 $choice1 并替换为 $choice2。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:56:59.570

```
var choiceArray = ['choice one', 'choice two'];
$("input[name='authors']").change(function() 
{    
    $('#choice').html(choiceArray[parseInt($(this).val())]);   
}); 
```

另请注意，数组的索引从 0 开始，因此您还必须将单选按钮值从 0 开始，或者使用它们的`index()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T05:59:37.460

```
$("input[name='authors']").change(function() 
{    
    if(this.value == 1 ) {
      $('#choice').empty().append($choice1);
      // or
      // $('#choice').html($choice1);
    } else {
      $('#choice').empty().append($choice2);   
      // or
      // $('#choice').html($choice1);
    }
}); 
```

**[演示](http://jsfiddle.net/duC9n/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T06:03:35.130

我假设您正在尝试从 PHP 脚本中获取这些变量。在这种情况下，发送一个带有加载请求的参数，比如

```
$(”#choice”).load('myscript.php?choice=' + choice); // choice is variable in which you should put 1 or 2 
```

在 PHP 中：

```
if($GET['choice'] == 1) echo $choice1;
else if($GET['choice'] == 2) echo $choice2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T06:02:17.033

```
$("input[name='authors']").change(function() 
{    
    if(this.value== 1 )
    {
      $('#choice').remove($choice2);  
      $('#choice').add($choice1);  

    } 
    else
    {
      $('#choice').remove($choice1);
      $('#choice').add($choice2);   
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T06:04:34.317

对于您的 HTML 代码，js 如下

```
$("input[name='authors']").click(function() {
    var choice = '';
    var value = $(this).attr('value');
if (value == 1) {
    choice += '<div id="choice-1">Choice 1</div>';
}
else {
    choice += '<div id="choice-1">Choice 2</div>';
}
$('#choice').html(choice);
}); 
```

演示在这里：http:
[//jsfiddle.net/Simplybj/Ww9yw/4/](http://jsfiddle.net/Simplybj/Ww9yw/4/)

# emacs - 使 Emacs 在新缓冲区中的 tex-view 之后打开 pdf/dvi

> ID：10868210
> 
> 赞同：1
> 
> 时间：2012-06-03T05:52:22.260
> 
> 标签：emacs, tex

在 TeX 模式下，我可以编译（区域/缓冲区），然后让 Emacs 显示通过运行`M-x tex-view`或编译的内容`C-c C-v`，但是，当此命令运行时，它会查找`tex-dvi-view-command`变量以供程序打开最近编译的文件。

这种方法现在有两个问题：

1.  生成的 DVI 中的文本颜色与 Emacs 缓冲区中的文本颜色相同，但背景不是（我在白色背景上得到白色文本......），但这可能是它用于显示它的特定程序的问题， 还不确定。Ocular 在白色背景上显示黑色文本。

2.  它在 dvi 查看器中打开。但我希望它在 Emacs 中打开（Emacs 可以自己显示 PDF / DVI，不需要外部查看器）。

所以，我的问题是：有没有一种通用的方法来实现这个（特别是#2），或者我必须自己添加那个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:57:55.597

我没有使用您描述的特定功能，但我想如果您将 emacs 作为服务器运行（qv，[将 Emacs 用作服务器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)），您可以设置`tex-dvi-view-command`为使用`emacsclient`，在这种情况下文件将被打开在当前 emacs 会话中的新缓冲区中。

# xcode - 如何克服 XCode 对象模型版本错误？

> ID：10868211
> 
> 赞同：1
> 
> 时间：2012-06-03T05:52:39.447
> 
> 标签：xcode, core-data, versioning, object-model

我目前正在运行 OS X 10.7.4 并使用 XCode 4.3.2。我从 2.x 版开始并没有真正在生产中使用 XCode。也就是说，我有一个我熟悉的测试核心数据应用程序（MacOS 不是 iPhone）。有 0 个代码——目前所有的 Interface Builder。几天前我更改了数据模型，此后一直出现以下错误：

```
The managed object model version used to open the persistent store is incompatible with the one that was used to create the persistent store 
```

我遇到了几个相关的线程，包括但不限于：

[无需迁移即可替换核心数据模型](https://stackoverflow.com/questions/9103045/replace-core-data-model-without-migration)

[不兼容的对象模型版本](https://stackoverflow.com/questions/4790933/incompatible-object-model-version)

[当模型发生变化时，擦除使用 CoreData 存储的所有数据](https://stackoverflow.com/questions/1778430/wipe-all-data-stored-with-coredata-when-the-model-has-changed)

但是，没有人解决我的问题。同样，我没有使用任何代码。此外，尽管我遇到了其他页面和论坛帖子：

[http://www.matthew-long.com/2007/11/02/the-managed-object-model-version-used-to-open-the-persistent-store-is-incompatible-with-the-one-那是用来创建持久存储的/](http://www.matthew-long.com/2007/11/02/the-managed-object-model-version-used-to-open-the-persistent-store-is-incompatible-with-the-one-that-was-used-to-create-the-persistent-store/)

... ~/Library/Application Support/AppName 中没有 xml 文件可供我删除。实际上，库中的任何地方都没有包含我的“AppName”的文件夹。我敢肯定答案是相当微不足道的，但我一直在用头撞墙试图弄清楚。

我目前正在阅读有关版本控制等的 Apple 文档（[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)），但我希望有人会在我眼前一亮之前发布答案。

提前致谢！

# sql - PL/SQL 在表中查找日期

> ID：10868212
> 
> 赞同：-1
> 
> 时间：2012-06-03T05:52:39.987
> 
> 标签：sql, oracle, date

我真的被困在这里了。

例如 past_data 表。

```
name|date      |hour   |data
____________________________________________________________
je  |06/05/2012|1       |32323
je  |06/05/2012|2       |43564
je  |20/05/2102|3       |12334
je  |06/05/2012|4       |123123
je  |13/05/2012|1       |133223 
```

新表

```
name|date      |hour   |data
____________________________________________________________
je  |06/05/2012|1       |32323
je  |06/05/2012|2       |43564
je  |20/05/2102|3       |12334
je  |06/05/2012|4       |123123 
```

如何编写一个程序来查找从列“日期”表“past_date”复制到talbe“new_table”的全天匹配当天（今天是星期天）。在示例中，您可以看到过去日期表中 date = 06/05/2012 和 20/05/2012 的行被复制到 new_table 中，因为这两个日期是星期日。

然后循环这个过程 13 次（总共几周），每次增加 1 天，例如周日然后周一然后周二等等。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:42:55.547

你不需要PLSQL，
试试这个：

```
INSERT INTO new_table (name, date, hour, data)
  SELECT name, date, hour, data
    FROM past_data
   WHERE to_char(sysdate, 'd') = to_char(date, 'd') 
```

* * *

**更新：**我真的不明白为什么以及它有什么好处，但是既然你问了......

如果您使用 PLSQL，那么您可以执行以下操作：

```
BEGIN
  FOR i IN 0 .. 12 LOOP
    INSERT INTO new_table (name, date, hour, data)
      SELECT name, date, hour, data
        FROM past_data
       WHERE to_char(sysdate + i, 'd') = to_char(date, 'd');
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:09:50.397

获取一周中特定日期的格式说明符是“D”：

```
INSERT INTO new_table (name, date, hour, data)
  SELECT name, date, hour, data
    FROM past_data
   WHERE to_char(date, 'D') = 1 
```

# qt - 如何为我的浏览器创建网络历史记录

> ID：10868214
> 
> 赞同：1
> 
> 时间：2012-06-03T05:53:54.863
> 
> 标签：qt, qt-creator, qwebkit, qt4.8, qwebpage

我是 Qt 的新手。我正在尝试创建一个示例浏览器应用程序。我已经创建了浏览器应用程序。现在我需要为我的应用程序创建 Web 历史记录。我不知道该怎么做。谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:20:51.340

[`QWebHistory * QWebView::history ()`](http://doc.qt.nokia.com/4.7-snapshot/qwebview.html#history)

Arora 浏览器基于 QWebView... 如此[处](http://doc.qt.nokia.com/4.7-snapshot/demos-browser.html)所述。

> 该浏览器是 Arora Browser 的基础，这是一个简单的跨平台 Web 浏览器。

我会看看他们如何实现他们的[历史](https://github.com/Arora/arora/tree/master/src/history)。

最后，尽管我会查看访问的元素[`QWebHistory`](http://doc.qt.nokia.com/4.7-snapshot/qwebhistory.html)并弄清楚您希望如何显示它们，并且可能使用[`QWebHistoryInterface`](http://doc.qt.nokia.com/4.7-snapshot/qwebhistoryinterface.html).

# c# - NHibernate 映射创建重复的外键

> ID：10868216
> 
> 赞同：2
> 
> 时间：2012-06-03T05:54:10.143
> 
> 标签：c#, nhibernate, nhibernate-mapping

我有 2 个这样映射的 POCO：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="APPayment" table="APPayments">
        <id name="PaymentId">
            <generator class="guid" />
        </id>
        <many-to-one name="Invoice" class="APInvoice" cascade="none" 
            column="InvoiceId" index="ixPaymentInvoice" not-null="true" />
    </class>
    <class name="APInvoice" table="APInvoices">
        <id name="InvoiceId">
            <generator class="guid" />
        </id>
        <bag name="Payments" inverse="true" cascade="none" >
            <key column="PaymentId" foreign-key="fkInvoicePayments" />
            <one-to-many class="APPayment" />
        </bag>
    </class>
</hibernate-mapping> 
```

出于某种我无法理解的原因，我在我的`APPayments`表上生成了重复的外键：

```
fk9cdfbf509640182e
fkinvoicepayments 
```

我认为这也导致了保存对象关系的一些其他问题。我是否错误配置了映射？我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:49:36.453

这是你的问题：

```
<key column="PaymentId" ... 
```

该`key`集合应该是**InvoiceId**。

# database-design - 如何优化 RavenDB 等 NoSQL 数据库中的“用户跟踪”类型数据？

> ID：10868218
> 
> 赞同：1
> 
> 时间：2012-06-03T05:54:38.163
> 
> 标签：database-design, nosql, ravendb

我有一个现在存储的成员对象。我的服务使用 Foursquare 场地 API 来显示会员附近的地点。我想开始追踪他们去过的地方。

**我可以向成员添加一个属性，例如：**

```
Member {
    public List<Place> PlacesVisited {get;set;}
} 
```

但这本质上是复制已经存储在 RavenDB 中的 Place 对象。此外，会员在整个网站中都使用，而他们访问过的地方只需要显示在一个页面上。如果他们只访问了几个地方，这没什么大不了的，但是一旦他们开始有数百个或更多......我会低效地提取越来越多的数据（当不需要时）。

**我可以将访问过的地方放在另一个对象中。也许是这样的：**

```
VisitedPlace {
    public Member Member {get;set;}
    public Place Place {get;set;}
    public DateTime WhenVisited {get;set;}
    ...
} 
```

这并不能阻止我复制数据，但这确实意味着我不会在不需要时提取会员访问过的所有地方。

此外，将来我可能会跟踪的不仅仅是访问过的地方......有没有更好的方法/模式？我对 NoSQL 比较陌生，这是我第一个使用 RavenDB 的项目。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:57:06.810

乍得，你有什么理由不能这样做：

```
Member {
    public List<string> PlacesVisited {get;set;}
} 
```

只保留他去过的地方的身份证？

# jquery - 使用 $.ajax 的 jQuery

> ID：10868219
> 
> 赞同：0
> 
> 时间：2012-06-03T05:55:13.880
> 
> 标签：jquery, ajax, tabular

我有一个[表格](http://jsfiddle.net/zHRv4/)，里面有一些表格数据。

目前我正在使用下面的代码从文档**rows.html**中获取信息，但是如果我将其从更改为`$.get`，我会丢失**rows.html**`$.ajax`中的信息，为什么？

 **```
$.get('rows.html', function(r){ //or $.post, $.ajax etc
      $('table.bordered').append(r);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T05:58:42.263

`$.ajax`需要使用`type`GET、POST 等填充字段。由于您正在获取数据，因此您似乎需要`type: 'GET'`. `$.post`不会帮助你，如果你真的想使用`$.ajax`，你需要指定类型（再次，GET）。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

**编辑**：默认情况下似乎`$.ajax`会执行 GET，但尝试将所有内容放在哈希中，

```
$.ajax({url: 'rows.html', type: 'GET'}, function(r) { 
    alert(r); 
}); 
```**

# iphone - 如何在 ASIHTTPRequest 中包含客户端证书？

> ID：10868222
> 
> 赞同：2
> 
> 时间：2012-06-03T05:55:53.530
> 
> 标签：iphone, ssl, https, request, asihttprequest

我对 Objective C 和 HTTPs 很陌生。请就此事给我建议。

我需要我的 iPhone 应用程序通过 HTTPs 与我的服务器通信。我创建了自签名证书，当通过浏览器访问 URL 时，它会显示一条警告消息，表明服务器不受信任。没关系。

从我的 iPhone 应用程序发送 HTTP 请求。通过 HTTPS 我正在使用 ASIHTTPRequest。但是我收到一条错误消息“发生连接失败：SSL 问题（可能的原因可能包括错误/过期/自签名证书，时钟设置为错误日期）”。

我浏览了 Stackoverflow 并学会了以下方式：

1.  我从浏览器下载了证书并将其包含在我的 Xcode 项目中。
2.  将证书加载到 NSData

    NSString* fullFileName = @"myCertificate.cer"; NSString* 文件名 = [[fullFileName lastPathComponent] stringByDeletingPathExtension]; NSString* extension = [fullFileName pathExtension]; NSData *PKCS12Data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fileName ofType:extension]];

3.  提取身份

    [self extractIdentity:&identity and Trust:&trust fromPKCS12Data:PKCS12Data密码:@"myCertificatePasswordHere"];

4.  通过 HTTPS 发送 HTTP 请求

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:myHTTPsURLHere]; [请求 setClientCertificateIdentity:identity]; [请求开始同步];

5.  正如这里的许多人建议的那样，我还修改了 ASIHTTPRequest.m 并包括

[sslProperties setObject:(NSString *)kCFBooleanTrue forKey:(NSString *)kCFStreamSSLAllowsExpiredCertificates]; [sslProperties setObject:(NSString *)kCFBooleanTrue forKey:(NSString *)kCFStreamSSLAllowsExpiredRoots];

进入 IF 语句

```
 if (![self validatesSecureCertificate]) {

     NSDictionary *sslProperties = [[NSDictionary alloc] initWithObjectsAndKeys:
                                           [NSNumber numberWithBool:YES], kCFStreamSSLAllowsExpiredCertificates,
                                           [NSNumber numberWithBool:YES], kCFStreamSSLAllowsAnyRoot,
                                           [NSNumber numberWithBool:NO],  kCFStreamSSLValidatesCertificateChain,
                                           kCFNull,kCFStreamSSLPeerName,
                                           @"kCFStreamSocketSecurityLevelTLSv1_0SSLv3", kCFStreamSSLLevel,
                                           nil];

    CFReadStreamSetProperty((CFReadStreamRef)[self readStream], 
                                    kCFStreamPropertySSLSettings, 
                                    (CFTypeRef)sslProperties);

            [sslProperties release];
        }else {
            NSMutableDictionary *sslProperties = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                           [NSNumber numberWithBool:NO], kCFStreamSSLAllowsExpiredCertificates,
                                           [NSNumber numberWithBool:NO], kCFStreamSSLAllowsAnyRoot,
                                           [NSNumber numberWithBool:YES],  kCFStreamSSLValidatesCertificateChain,
                                           @"kCFStreamSocketSecurityLevelTLSv1_0SSLv3", kCFStreamSSLLevel,
                                           nil];

            CFReadStreamSetProperty((CFReadStreamRef)[self readStream], 
                                    kCFStreamPropertySSLSettings, 
                                    (CFTypeRef)sslProperties);

            [sslProperties setObject:(NSString *)kCFBooleanTrue forKey:(NSString *)kCFStreamSSLAllowsExpiredCertificates]; // Sergey added this line
            [sslProperties setObject:(NSString *)kCFBooleanTrue forKey:(NSString *)kCFStreamSSLAllowsExpiredRoots]; // Sergey added this line 
            [sslProperties release];
        } 
```

但这无济于事:(。我仍然收到一条错误消息：

```
 Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred: SSL problem (Possible causes may include a bad/expired/self-signed certificate, clock set to wrong date)" 
```

请告诉我如何通过 HTTPs 进行 ASIHTTPRequest 以便客户端证书得到我的服务器的验证？我不想使用私有 api...

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:48:49.227

ASIHttpRequest 和 iOS 5 确实存在一个错误。对我有用的一个很好的修复是这个：[修复了 james-chalfant 在 iOS 5 (alternate) 上的自签名客户端证书](https://github.com/pokeb/asi-http-request/pull/314)

# java - 为什么我的对象的写入操作计数如此之高？

> ID：10868223
> 
> 赞同：1
> 
> 时间：2012-06-03T05:56:01.633
> 
> 标签：java, google-app-engine, google-cloud-datastore

我需要帮助来理解为什么我保存在数据存储中的模型对象之一花费了如此多的写入操作。查看开发控制台中的数据存储查看器，它说我需要 31 个写入操作来创建这个对象；单击 Show Indexes 链接，我可以看到为该对象定义了两个索引（如预期的那样），并阅读文档：

> 新实体放置（每个实体，无论实体大小）：2 次写入 + 每个索引属性值 2 次写入 + 每个复合索引值 1 次写入

因此，如果我理解正确，创建或删除此对象需要 2 次写入 + 2 次写入 * 2 索引属性值 + 0（我没有复合索引值）= 6 次写入操作？

修改：

> 现有实体放置（每个实体） 1 次写入 + 每个修改的索引属性值 4 次写入 + 每个修改的复合索引值 2 次写入

如果修改了非索引属性，则应该花费 1 次写入，如果修改了一个或两个索引属性，则应该花费 5（或 9）次？我对为什么开发控制台报告需要 31 个写入操作感到困惑......

对象如下：

`public class Media implements IMedia {`

 ````
private static final long serialVersionUID = 1657456300412658003L;
// Get a file service
private static FileService fileService = FileServiceFactory.getFileService();

@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String title;

@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
@Persistent
private String author;

@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private Text description;

@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private MediaType mediaType;

@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private String fullPath;

@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private String fileName;
@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private long size;
@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private String contentType;
@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private boolean isDeactive;
@Persistent
private String chartId;
@Transient
private IChart chart;
@Persistent
private boolean approved;

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key;

@Persistent
private Date imageDate;
@Transient
private BlobKey blobKey;
@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private float imageLatitute = 190;
@Persistent
@Extension(vendorName="datanucleus", key="gae.unindexed", value="true")
private float imageLongitute = 190; 
```` 

`...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:24:11.117

尝试打开 Appstats。它让您深入了解 I/O 成本的来源。

要考虑的另一件事是索引写入。您拥有的索引属性或复合索引条目越多，编写实体的成本就越高。

# android - 当我的应用程序在 background-android 中运行时如何访问其他应用程序

> ID：10868228
> 
> 赞同：1
> 
> 时间：2012-06-03T05:56:44.713
> 
> 标签：android, cordova, background-process

我已经开发了android应用程序。当使用android服务单击按钮并显示通知和警报时，我一直在后台运行该应用程序。所以我`android:theme="@style/Theme.Dialog"`在Android Manifest文件中使用了但我无法在设备中使用其他应用程序。后来我使用了样式.xml

这是我的 styles.xml 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
 <style name="Theme.Transparent" parent="android:Theme">
 <item name="android:windowIsTranslucent">true</item>
 <item name="android:windowBackground">@android:color/transparent</item>
 <item name="android:windowContentOverlay">@null</item>
 <item name="android:windowNoTitle">true</item>
 <item name="android:windowIsFloating">true</item>
 <item name="android:backgroundDimEnabled">false</item>
 </style>
 </resources> 
```

而且在我使用的 Android Manifest 文件中：

```
android:theme="@style/Theme.Transparent" 
```

即使那样我也无法打开其他应用程序，而且只有一次我收到警报框。

但我需要在后台运行应用程序并每 30 分钟接收一次通知和警报，同时我可以在我的设备中打开其他应用程序。请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:18:46.253

看起来您已经创建了一个透明的 Activity 并从中完成所有任务。如果是这种情况，那么您将无法打开其他应用程序（当该 Activity 处于前台时），因为它是透明的，它让您感觉它在后台运行，事实并非如此。
所以要在后台使用。`Service`看[这个](http://developer.android.com/reference/android/app/Service.html)。

# r - A/B Fisher 检验显着性的样本量

> ID：10868229
> 
> 赞同：6
> 
> 时间：2012-06-03T05:56:59.163
> 
> 标签：r, statistics, ab-testing

给定一个简单的 A / B 测试的结果......

```
 A   B
clicked 8   60
ignored 192 1940 
```

（即 A 4% 和 B 3% 的会话率）

... R 中的 Fisher 测试非常正确地表明没有显着差异

```
> fisher.test(data.frame(A=c(8,192), B=c(60,1940)))
...
p-value = 0.3933
... 
```

但是 R 中有什么函数可以告诉我需要增加多少样本量才能达到 0.05 的 p 值？

我可以增加 A 值（按它们的比例），直到我达到它，但必须有更好的方法吗？也许 pwr.2p2n.test [1] 在某种程度上可用？

[1] [http://rss.acs.unt.edu/Rdoc/library/pwr/html/pwr.2p2n.test.html](http://rss.acs.unt.edu/Rdoc/library/pwr/html/pwr.2p2n.test.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-15T20:01:37.333

`power.prop.test()`应该为你做这个。为了使数学起作用，我通过汇总您的列将您的“忽略”数据转换为展示次数。

```
> power.prop.test(p1=8/200, p2=60/2000, power=0.8, sig.level=0.05)

     Two-sample comparison of proportions power calculation 

              n = 5300.739
             p1 = 0.04
             p2 = 0.03
      sig.level = 0.05
          power = 0.8
    alternative = two.sided

NOTE: n is number in *each* group 
```

这给出了 5301，这是针对每个组的，因此您的样本量需要为 10600。减去已经运行的 2200，您有 8400 个“测试”要进行。

在这种情况下：

*   `sig.level`与您的 p 值相同。
*   `power`是发现样本中存在的重要结果的可能性。这有点武断，80% 是常见的选择。请注意，选择 80% 意味着有 20% 的时间你不会发现你应该发现的意义。增加功效意味着您需要更大的样本量才能达到所需的显着性水平。

如果您想确定达到显着性需要多长时间，请将 8400 除以每天的展示次数。这可以帮助确定是否值得继续测试。

You can also use this function to determine required sample size before testing begins. There's a nice write-up describing this on the [37 Signals blog](http://37signals.com/svn/posts/3004-ab-testing-tech-note-determining-sample-size).

This is a native R function, so you won't need to add or load any packages. Other than that I can't say how similar this is to `pwr.p2pn.test()`.

# machine-learning - Weka：如何获取测试实例的每个类的概率

> ID：10868233
> 
> 赞同：4
> 
> 时间：2012-06-03T05:57:25.017
> 
> 标签：machine-learning, weka, classification

在 Weka's Explorer 的情况下，有什么方法可以得到测试实例的类概率，如朴素贝叶斯分类器分类的那样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T17:06:41.193

在`Classify`选项卡上的 Weka Explorer 中，单击`More options...`并勾选`Output predictions`。然后`Start`训练和测试以及结果显示为每个测试实例分配每个类的概率。

# c++ - 如何防止从字符串派生的 2 个类之间的交叉分配

> ID：10868234
> 
> 赞同：2
> 
> 时间：2012-06-03T05:57:40.977
> 
> 标签：c++, string, inheritance, type-conversion

我将不胜感激以下问题的解决方案：我有 2 种类型的变量

```
class Type1Str : public string
{
public:
  Type1Str(const string & str) : string(str) {}
};

class Type2Str : public string
{
public:
  Type2Str(const string & str) : string(str) {}
}; 
```

我想享受字符串的所有好处，但要防止交叉分配：

```
Type1Str t1; 
Type2Str t2;
t1 = t2;                           // <= should not be allowed
Type2Str t2_1(t1);                 // <= should not be allowed
Type2Str t2_2("a string");         // <= should be allowed 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T06:10:40.457

这应该可以解决问题：

```
#include <string>

using namespace std;

class Type2Str;

class Type1Str : public string
{
public:
    Type1Str() {}
    Type1Str(const std::string & str) : std::string(str) {}

private:
    Type1Str(const Type2Str &);  // deliberately private and unimplemented
    Type1Str & operator = (const Type2Str &);  // deliberately private and unimplemented
};

class Type2Str : public string
{
public:
    Type2Str() {}
    Type2Str(const std::string & str) : std::string(str) {}

private:
    Type2Str(const Type1Str &);  // deliberately private and unimplemented
    Type2Str & operator = (const Type1Str &);  // deliberately private and unimplemented
};

int main(int, char **)
{
   Type1Str t1;
   Type2Str t2;
   t1 = t2;                           // <= should not be allowed
   Type2Str t1_2(t1);                 // <= should not be allowed
   Type2Str t2_2("a string");         // <= should be allowed
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T06:09:41.073

只需将构造函数放入声明的私有/受保护部分：

```
class Type1Str : public string
{
    Type1Str(const class Type2Str&); // use forward declaration for class Type2Str
public:
    Type1Str(const string & str) : string(str) {}
};

class Type2Str : public string
{
    Type2Str(const Type1Str&); // this does not allow 'Type2Str t2_2(t1);'
public:
    Type2Str(const string & str) : string(str) {}
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T07:02:50.473

不幸的是，OP 提供了无法编译的代码。

*这是以最自然的方式*更正的原始代码，以便它编译：

```
class Type1Str : public string
{
public:
    Type1Str() {}
    Type1Str(const string & str) : string(str) {}
};

class Type2Str : public string
{
public:
    Type2Str() {}
    Type2Str(const string & str) : string(str) {}
}; 
```

假设上面的意思是，防止交叉*分配*所需要的就是制作转换构造函数**`explicit`**。

```
#include <string>
using std::string;

class Type1Str : public string
{
public:
    Type1Str() {}
    explicit Type1Str(const string & str) : string(str) {}
};

class Type2Str : public string
{
public:
    Type2Str() {}
    explicit Type2Str(const string & str) : string(str) {}
};

int main()
{
    Type1Str t1; 
    Type2Str t2;

    t1 = t2;            // A. !Invalid, involves an implicit conversion.
    Type2Str t2_2(t1);  // B. Still allowed, here the conversion is explicit.
} 
```

在标记为 B 的行中，调用的转换不是实际参数的隐式转换，而是`Type2Str`的显式转换构造函数。实际参数`t1`直接匹配该构造函数的形式参数，因为`t2` *是*`std::string`. OP 也想阻止 B 行。

一种简单的方法是使转换更加明确，即命名。

即，为形式参数引入载体类型，或引入额外的虚拟转换名称参数，或将公共转换构造函数替换为公共工厂函数。工厂函数是最简单的，并且截至 2012 年免费重新效率，但它有维护成本：派生类必须重新实现它才能提供该功能。在这里提到的其他两个解决方案中，额外的虚拟名称参数是最容易实现且代码最少的：

```
#include <string>
using std::string;

namespace from { enum StdString { stdString }; };

class Type1Str : public string
{
public:
    Type1Str() {}
    Type1Str( from::StdString, const string & str) : string(str) {}
};

class Type2Str : public string
{
public:
    Type2Str() {}
    Type2Str( from::StdString, const string & str) : string(str) {}
};

int main()
{
    Type1Str t1; 
    Type2Str t2;
    Type2Str t3( from::stdString, t1 ); // OK.

    t1 = t2;            // A. !Invalid, no conversion possible.
    Type2Str t2_2(t1);  // B. !Invalid, no conversion possible.
} 
```

那么，仅仅为所有想要禁止直接复制的类型声明私有构造函数和赋值运算符有什么问题呢？

好吧，除了脆弱之外，对于*n*类型的声明，它相当于 O( *n* ² )。所以这通常不是一个好主意。然而，在我写这篇文章时，OP 选择了一个采用这种方法的答案作为“解决方案”。请注意：总的来说，这*真的*不是一个好主意。

# algorithm - 最小化产品

> ID：10868239
> 
> 赞同：0
> 
> 时间：2012-06-03T05:58:32.507
> 
> 标签：algorithm, optimization, linear-programming

我有 3 个集合 A、B 和 C，每个集合有 n 个元素。这些集合可以包含重复项（不确定 Set 是否正确）。

现在我试图用 n 个元素（比如 D1 到 Dn）形成一个集合 D，每个元素 Di 包含 3 个元素，一个来自 A，一个来自 B，一个来自 C。

我的目标是找到最小化 Di 中元素乘积之和的集合 D。

蛮力在这里似乎是一个非常糟糕的主意，因为即使对于 n>5，算法的速度也会非常慢。任何人都可以提出更好的方法吗？线性规划适合这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:29:40.533

因此，您想形成两个二分图，创建 AB 和 BC 的元素匹配，从而最小化平均乘积 (a_i * b_j * c_k)。

不幸的是，我相信这是一个 NP 难题。（如果您将匹配数 n=3 作为变量）

我不认为这两个匹配可以单独进行：

考虑 A = {1, 10}，B = {1, 10}

A、B 的匹配是 1 x 10 = 10 和 1 x 10 = 10（总共 20）

但是考虑 C = { 1, 10000 }

如果我们将 A、B 与 C 进行贪心匹配，我们得到 10 x 1 = 10 和 10 x 10000 = 100000（总共 100010）

但是，如果我们将非最优匹配 A、B 设为 1 x 1 = 1 和 10 x 10 = 100（总共 101）

然后我们可以将它与 C 匹配为 1 x 10000 = 10000 和 100 x 10 = 1000（总共 11000）

所以我们可以看到有必要考虑所有可能的组合。

这并不是证明它是 NP 难的，但我希望它传达一种直觉。

# java - 在java中驱逐类？

> ID：10868244
> 
> 赞同：0
> 
> 时间：2012-06-03T05:59:30.493
> 
> 标签：java, list, class

我使用如下大规模导入类组：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;
import java.io.*;
import java.text.*;
import java.util.regex.*; 
```

这样我就不必担心遗漏任何课程。

然后当我使用`List`我得到这个错误：

> 引用`List`不明确，class `java.util.List`in`java.util` 和 class `java.awt.List`in 都`java.awt`匹配

我该如何解决？有没有办法驱逐其中一个班级？哪一个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T06:04:42.300

您将需要在整个类文件中使用它们的完全限定名称`java.util.List`和来引用这些类型。`java.awt.List`

这将消除这两个`List`s 的歧义，因此严格来说不必“驱逐”任何东西（您的`import`陈述可以保持不变）。但是，我确实同意您整理进口的其他答案的建议。

如果其中一个`List`s*被*“驱逐出境”，那么您可以`List`通过它的简称来引用另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T06:07:23.670

首先，你不应该像那样导入整个包。您应该只包括所需的内容。IDE 确实有一些选项，它们将为您提供所需的任何内容。至少 Eclipse 做到了。要详细阅读它的缺点，您可以通过以下链接：

*   [Java中的类导入和包导入有什么区别？](https://stackoverflow.com/questions/1553909/any-difference-between-class-imports-and-package-imports-in-java)

但是，如果绝对有必要，则可以通过使用它们的完全限定名称引用这些模棱两可的类来避免歧义，例如，在您的情况下

*   `java.util.List`和/或`java.awt.List`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:07:35.720

解决方法是不要像那样导入所有内容。使用 Eclipse 之类的 IDE 为您管理导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T06:14:25.223

始终只导入您在特定程序中使用的类。对于具有相同名称但不同包的类，例如您正在使用的 List 类，可以使用它们的完全限定名称而不是 import 语句来指定

# java - eclipse将母语更改为英语

> ID：10868245
> 
> 赞同：0
> 
> 时间：2012-06-03T05:59:31.040
> 
> 标签：java, php, eclipse, ide

我只是一个初学者，几天前安装了 eclipse php。今天我只是在 Eclipse 中设置调试器，当我开始调试我的第一个项目时，我注意到变量的值以中文或日文显示，但不是英文，浏览器输出和调试输出选项卡中也是如此。请让我知道如何将其更改为英文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:14:21.737

感谢大家的支持和信息。

我刚刚找到了这个问题的解决方案。我只是更改了一些设置`windows->preferences->php->debug`。

[截图 http://img545.imageshack.us/img545/6617/eclipsesolution.jpg](http://img545.imageshack.us/img545/6617/eclipsesolution.jpg)

而且我不知道启用 CLI 调试的效果是什么。如果有人知道它，请告诉我，以便我知道它的后果。

# html5-audio - HTML5 音频播放器持续时间显示 Nan

> ID：10868249
> 
> 赞同：15
> 
> 时间：2012-06-03T06:00:11.973
> 
> 标签：html5-audio, nan, duration

我刚开始学习 HTML5，并且正在使用 JQuery 浏览 HTML5 音频播放器。我用播放列表编写了一个播放器，一切正常，除了我的输入范围滑块不起作用的持续时间。当我调试时，我发现我的持续时间向我显示 NAN。我正在设置歌曲初始化后的持续时间。

这是我的 JS 代码

```
jQuery(document).ready(function() {

    container = $('.container');
    playList =  $('#playlist');
    playListSong =  $('#playlist li');
    cover = $('.cover');
    play = $('#play');
    pause = $('#pause');
    mute = $('#mute');
    muted = $('#muted');
    close = $('#close');

    song = new Audio('music/Whistle-Flo-Rida-Mp3-Download.mp3','music/Whistle-Flo-Rida-Mp3-Download.mp3');

    var canPlay = song.canPlayType('audio/mpeg;');
    if (canPlay) {
        song.type= 'audio/mpeg';
        song.src= 'music/Whistle-Flo-Rida-Mp3-Download.mp3';
    }

    playListSong.click(function(){

        $('#close').trigger('click');
        window["song"] = new Audio('music/'+$(this).html()+'.mp3','music/'+$(this).html()+'.mp3');

        $('#play').trigger('click');

    });

    play.live('click', function(e) {

        e.preventDefault();
        song.play();
        //cover.attr("title", song.duration);
        $(this).replaceWith('<a class="button gradient" id="pause" href="" title=""><span>k</span></a>');

        $('#close').fadeIn(300);
        $('#seek').attr('max',song.duration);
    });

    pause.live('click', function(e) {
        e.preventDefault();
        song.pause();
        $(this).replaceWith('<a class="button gradient" id="play" href="" title=""><span>d</span></a>');

    });

    mute.live('click', function(e) {
        e.preventDefault();
        song.volume = 0;
        $(this).replaceWith('<a class="button gradient" id="muted" href="" title=""><span>o</span></a>');

    });

    muted.live('click', function(e) {
        e.preventDefault();
        song.volume = 1;
        $(this).replaceWith('<a class="button gradient" id="mute" href="" title=""><span>o</span></a>');

    });

    $('#close').click(function(e) {
        e.preventDefault();
        container.removeClass('containerLarge');
        cover.removeClass('coverLarge');
        song.pause();
        song.currentTime = 0;
        $('#pause').replaceWith('<a class="button gradient" id="play" href="" title=""><span>d</span></a>');
        $('#close').fadeOut(300);
    });

    $("#seek").bind("change", function() {
        song.currentTime = $(this).val();
        $("#seek").attr("max", song.duration);
    });

    song.addEventListener('timeupdate',function (){
        curtime = parseInt(song.currentTime, 10);
        $("#seek").attr("value", curtime);
    });

}); 
```

当我点击播放列表歌曲时，持续时间始终为 NAN，但默认情况下我设置了一首歌曲，当我点击播放按钮时直接在页面加载时，持续时间可以正常工作。它从不适用于播放列表歌曲。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-15T19:32:03.037

加载元数据后，使用*loadedmetadata*事件侦听器获取音频的持续时间。执行类似以下代码的操作：

```
var audio = new Audio();
audio.src = "mp3/song.mp3";
audio.addEventListener('loadedmetadata', function() {
    console.log("Playing " + audio.src + ", for: " + audio.duration + "seconds.");
    audio.play(); 
}); 
```

# opengl - DLL 资源 (png) 到 SDL_Surface

> ID：10868253
> 
> 赞同：2
> 
> 时间：2012-06-03T06:01:38.160
> 
> 标签：opengl, dll, sdl

我有一个函数可以将 SDL_Surface 获取到 openGL 纹理，但我似乎无法从 dll 加载图像。我可以加载一个 DLL，我只是对如何从中获取图像并从中创建 SDL 表面感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:21:32.637

在 Windows 上，可以获得指向 DLL 中资源的原始指针。FindResource/LoadResource/LockResource 函数完成这项工作。

使用以下代码获取指向资源 ResourceID 的指针（在 .rc 文件中查找它）和 ResourceType 类型（在您的情况下为 BITMAP）：

```
HMODULE Handle = /// GetModuleHandle( NULL or .dll handle here);  - for current .exe file or .dll

HRSRC hResInfo;
HGLOBAL hResource;

// first find the resource info block
if ( ( hResInfo = ::FindResource( Handle, MAKEINTRESOURCE(ResourceID), ResourceType ) ) == NULL )
{
    return( NULL );
}

// determine resource size
int BufSize = SizeofResource( Handle, hResInfo );

// now get a handle to the resource
if ( ( hResource = LoadResource( Handle, hResInfo ) ) == NULL )
{
    return( NULL );
}

// finally get and return a pointer to the resource
void* BufPtr = LockResource( hResource );

    /// Do whatever you need with BufSize/BufPtr 
```

# java - 一个方法应该在什么时候抛出 InterruptedException，我应该如何处理它呢？（阻塞方法）

> ID：10868255
> 
> 赞同：13
> 
> 时间：2012-06-03T06:01:46.530
> 
> 标签：java, multithreading, exception-handling, blocking

如果一个方法必须是一个**阻塞**方法，我是否认为如果我遗漏了`throws InterruptedException`，我就犯了一个错误？

简而言之：

*   一个阻塞方法应该包括`throws InterruptedException`否则是一个正常的方法。
*   阻塞方法可能会影响响应性，因为很难预测它何时会完成，这就是它需要的原因`throws InterruptedException`。

那是对的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-03T13:17:45.043

不，我不认为你的总结是正确的。*通常*，如果您正在编写一个调用其他 throw`InterruptedException`的方法，那么您的方法也应该宣传 throwing `InterruptedException`— 除非您对当您的方法所依赖的方法发出中断信号时该怎么做有一个很好的计划。

您能够吸收这种干扰的情况很少见。也许您正在计算一个迭代解决方案，其中精度随着时间的推移而增加，但是，在您的调用线程被中断时，您认为您在分配的时间内达到的解决方案已经足够好，并且仍然足够正确以返回。换句话说，该解决方案仍在您的方法范围内。

想象：

```
private double improveUpon(double start) throws InterruptedException {
  // ...
}

public double compute() {
  double result = 0.0;
  try {
    do {
      result = improveUpon(result);
    } while (couldBeImproved(result));
  } catch (InterruptedException ex) {
    Thread.currentThread().interrupt();
  }
  return result;
} 
```

或者，如果您只想*尊重*中断请求，您可以在不`InterruptedException`参与的情况下这样做：

```
private double improveUpon(double start) {
  // ...
}

public double compute() {
  final Thread current = Thread.currentThread();
  double result = 0.0;
  do {
    result = improveUpon(result);
  } while (couldBeImproved(result) &&
           !current.isInterrupted());
  return result;
} 
```

对于另一种变体，请考虑您的方法必须完成其所有工作或向调用者指示它无法完成它的情况，并且需要一段时间才能到达那里，但您希望尊重线程中断。这样的事情就足够了：

```
private double improveUpon(double start) {
  // ...
}

public double compute() throws InterruptedException {
  final Thread current = Thread.currentThread();
  double result = 0.0;
  do {
    if (current.interrupted())
      throw new InterruptedException();
    result = improveUpon(result);
  } while (!isAdequate(result));
  return result;
} 
```

请注意，我们调用了 on ，如果已设置`Thread#interrupted()`，它的副作用是*清除线程的中断状态。*如果该方法返回 true，我们作为调用者已经接受了保持和传达中断状态的责任。在这种情况下，由于我们没有假设我们创建了调用线程，并且我们在这里没有足够的可见范围来了解它的中断策略是什么，所以我们通过 throwing 传达了我们观察和采用的中断状态`InterruptedException`。

将方法标记为“阻塞”始终是程度问题。每个方法都会阻塞它的调用者一段时间。您可能正在寻找的区别是该方法是否阻止等待某些外部输入，例如用户按键或通过网络到达的消息。在这些情况下，您抛出的广告`InterruptedException`向您的调用者表明，您的方法对于来自必须控制其*延迟的线程的调用者是**安全的*。你是说，“这可能需要一段时间才能完成，但不会比你愿意等待的时间长。” 你在说，“我会一直跑，直到你告诉我不要。” 这不同于，比如说，它威胁要阻塞，直到三个条件之一发生，*其中没有一个**[`java.io.InputStream#read()`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)*是调用者的线程被中断。**

 **在大多数情况下，您的决定归结为回答以下问题：

*   为了满足我的方法的要求，我是否需要调用任何抛出的方法`InterruptedException`？
*   如果是这样，我到那时为止所做的工作对我的来电者有用吗？
*   如果没有，我也应该扔`InterruptedException`。
*   如果我没有调用任何东西`InterruptedException`，我应该尊重我的调用线程的*中断状态*吗？
*   如果是这样，在我检测到我的呼叫者的任何用途被打断之前，我是否已经完成了任何工作？
*   如果没有，我应该扔`InterruptedException`.

检测到当前线程的中断并将其吞下的情况通常仅限于您（作者）创建了有问题的线程，并且您已承诺`run()`一旦线程中断就退出线程的方法。这就是“合作取消”的概念，在该概念中，您观察线程停止运行的*请求*，然后您决定通过尽快完成工作并让线程的调用堆栈展开来遵守该请求。同样，除非您是线程`run()`方法的作者，否则吞下线程的中断状态可能会损害调用者和他们调用的其他方法的预期行为。

我建议你研究线程*中断状态*的主题，熟悉方法[`Thread#isInterrupted()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isInterrupted%28%29)、、[`Thread#interrupted()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupted%28%29)和[`Thread#interrupt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)。一旦你理解了这些，并且看到`InterruptedException`飞行中的存在是回归真实的另一种表示`Thread#isInterrupted()`，或者回归真实的礼貌翻译`Thread#interrupted()`，这一切都应该开始变得更有意义。

如果您需要更多示例来学习，请说出来，我可以在这里添加建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T06:43:24.490

`InterruptedException`（通常）在方法上阻塞的线程被`interrupt()`调用时抛出。

它的重点是解除阻塞（出于某种原因）被阻塞的线程。原因的示例是应用程序关闭。所以，当你关闭你的应用程序时，如果你有线程在等待，`sleep()`或者说`wait()`，如果你没有告诉他们你正在关闭，他们将继续`wait()`。如果这些线程*不是*守护线程，那么您的应用程序将不会关闭。

因此，当线程在 期间被中断时`sleep()`，您必须检查条件并处理这种情况。在关闭的情况下，您必须检查您的`shutdown`标志并最终进行清理工作并让线程离开。

线程可能由于其他一些原因而被中断，但要点是一样的。如果您有多线程应用程序，您必须为您的线程建立协议，以便他们知道何时有一些特殊情况如何处理它。如果线程正在等待/休眠，您必须将其唤醒以处理这种情况。您的库或框架的客户对您的协议一无所知，因此他们不知道如何处理`InterruptedException`，因为建议在您的库/框架代码中处理它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-03T06:19:39.610

如果您的方法阻塞，它应该捕获并处理`InterruptedException`，并且不希望重新抛出它。

此外，该方法可能会在多个地方阻塞 - 每个地方都应该`InterruptedException`以适合可能抛出它的地方的方式捕获和处理。

关于多线程代码主题的圣经是[Java Concurrency in Practice](http://jcip.net/)。我强烈推荐你阅读它。

### 编辑：

在设计并发代码时，请意识到：

*   根据 JVM 规范，JVM`InterruptedException`可能会无缘无故地随机抛出（称为“虚假唤醒”）
*   许多线程可能在相同的条件下等待，所有线程都可能被唤醒（例如通过`notifyAll()`），但只有一个线程在被中断时可以前进

所以每当一个线程被唤醒时，它应该检查它正在等待的等待条件的状态，并*可能*回到等待状态。

因此，正确编写的并发代码应该可以捕获`InterruptedException`. 您可以选择重新抛出它或抛出您自己的应用程序特定异常。“应用程序代码”方法应该更喜欢抛出“应用程序”异常，但是如果您的等待代码可能会发现自己处于无法找出“出了什么问题”的状态，那么您唯一的选择就是抛出`InterruptedException`.**

# objective-c - 为什么我不能初始化这个？

> ID：10868257
> 
> 赞同：1
> 
> 时间：2012-06-03T06:02:37.510
> 
> 标签：objective-c, ios, delegates

我一直在试图弄清楚这几天。我是初学者，所以请多多包涵。我已经阅读了很多关于代表团的文章，但我仍然不明白。任何帮助将非常感激。

标题

```
@protocol MidiInit <NSObject>
@end

@interface CBAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) id midiDelegate;

-(id) initWithDelegate :(id <MidiInit>) delegate;

@end 
```

执行

```
@synthesize midiDelegate;

-(id) initWithDelegate:(id<MidiInit>)delegate
{
if ((self = [super init]))
{
    self.midiDelegate = delegate;
    midi = [[MidiClass alloc] initWithDelegate://not sure what to put here];
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:13:48.513

了解您要实现的目标会有所帮助，但是从您向我们展示的内容来看，几乎所有事情都看起来不对:-)

您是在向我们展示应用程序委托吗？如果是这样，从应用程序委托委托给另一个委托有什么意义？它看起来不像一个标准的方法。

其次，您可能不希望对委托进行“强”引用，这可能会导致内存泄漏。

但老实说，我认为这里真正的问题也不是你所指的，整个方法似乎是错误的。告诉我们更多关于您想要实现的目标，我会尝试相应地更新我的答案。

# java - 如何在java中提取html注释之间的内容

> ID：10868260
> 
> 赞同：-1
> 
> 时间：2012-06-03T06:03:21.403
> 
> 标签：java, html

我有 html 片段，它将在评论中包含注释，并且需要使用 java 提取评论之间的内容。问题是可以查找多个注释。我将如何解析java中的每个html标签

```
 <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <!--@Required-->
        <script src="req.js"></script>
        <!--@START-->
        <link rel="stylesheet" href="demo.css">
        <link rel="stylesheet" href="date.css">
        <!--@END-->
    </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:06:37.827

如果我错了，请纠正我，但评论是为了帮助......尝试这样的事情？？？

```
<tab/*Comment Here*/>Ok</tab> 
```

澄清你的问题，这是我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:24:02.277

有可用的 HTML 解析器。

1.  [Java源码.net](http://java-source.net/open-source/html-parsers)
2.  [Java sourceforge.net](http://htmlparser.sourceforge.net/#extraction) 总结，您必须了解标签具有脚本和链接等值。它们将是节点键。如果你谷歌它，你会在他们的网站和其他地方找到代码示例。

# jquery - Facebook Wall Feed 到网站 - Jquery / 不是 PHP

> ID：10868268
> 
> 赞同：0
> 
> 时间：2012-06-03T06:04:57.360
> 
> 标签：jquery, facebook

我正在尝试从我的 Facebook 页面墙上提取活动，包括将图像添加到我的网站。但是，使用标准 Activity Plugin ，显示所有内容（包括我的朋友，但我只想将其限制在我的页面发布中）。

有没有办法以 Jquery 的方式做到这一点？吧PHP。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '385846108120057', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML      
    });          

   FB.api(
  {
    method: 'fql.query',
     query: 'SELECT name FROM user WHERE uid=me()'
  });

  function(response) {
    alert('Your name is ' + response[0].name);
  });

 FB.api(
  {
    method: 'fql.query',
     query: 'SELECT post_id, actor_id, target_id, message, attachment 
        FROM stream 
        WHERE source_id = '158904890800614', 
        AND actor_id = '158904890800614'; 
  }); 

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:19:30.630

您可以使用JavaScript SDK[对流表](https://developers.facebook.com/docs/reference/fql/stream/)[进行 FQL 查询](https://developers.facebook.com/docs/reference/javascript/)（向下滚动到“API 调用”标题）。这将返回一个 JSON 对象，您应该能够使用 jQuery 轻松解析和显示该对象。

这是一个示例查询，可帮助您入门：

```
SELECT post_id, actor_id, target_id, message, attachment 
  FROM stream 
  WHERE source_id = 'PAGE_ID' 
    AND actor_id = 'PAGE_ID' 
```

上面的`source_id`WHERE 语句中的 将结果限制为仅在您的页面墙上发布，并将`actor_id`结果限制为仅由您的页面生成。

# chef-infra - chef-solo 是在没有配方的情况下安装 ntp 吗？

> ID：10868274
> 
> 赞同：1
> 
> 时间：2012-06-03T06:07:21.613
> 
> 标签：chef-infra

我*很*新厨师和新的 ubuntu 12 虚拟机我正在玩厨师独奏。按照一些关于该主题的博客教程，我决定通过我的 vm 上的配方来修补安装 ntp 服务。在经历了让 vm 安装 ruby​​、rubygems 和最后安装 chef 的引导过程之后，最初的 ntp 运行似乎运行正常。在运行之前，pgrep ntpd 将返回空白，在运行之后，相同的命令将返回一个进程 ID。但在仔细检查 /etc/ntp.conf 文件后，我意识到它没有使用我的配方中定义的该文件的模板版本。在进一步调查之后，我开始测试我的 ntp 配方在 chef-solo 运行中根本没有被引用的理论。我将我的cookbooks/ntp 目录重命名为cookbooks/ntp_foo。然而，引用 this 的基本配方对此非常满意，并继续安装 ntp 服务。是否有某些服务在“核心”厨师安装中定义了食谱？这是我的设置布局：

独奏.rb

```
root = File.absolute_path(File.dirname(__FILE__))

data_bag_path root + '/data-bags'
file_cache_path root

cookbook_path [root + '/cookbooks', root + '/site-cookbooks'] 
```

独奏.json

```
"run_list": [
    "recipe[base]"
] 
```

网站食谱/食谱/base/default.rb

```
package 'ntp' 
```

该`cookbooks/ntp`食谱不是我自己创建的，但似乎是有效的，只是没有被调用。

*编辑*

添加日志：

```
[Sat, 02 Jun 2012 22:25:13 -0700] INFO: *** Chef 0.10.10 ***
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Building node object for mike-VirtualBox
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Extracting run list from JSON attributes provided on command line
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Setting the run_list to ["recipe[base]"] from JSON
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Applying attributes from json file
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Platform is ubuntu version 12.04
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Run List is [recipe[base]]
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Run List expands to [base]
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Starting Chef Run for mike-VirtualBox
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Running start handlers
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Start handlers complete.
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: No chefignore file found at /tmp/chef/site-cookbooks/chefignore no files will be ignored
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Loading Recipe base via include_recipe
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Found recipe default in cookbook base
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Platform ubuntu not found, using all defaults. (Unsupported platform?)
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Loading from cookbook_path: /tmp/chef/site-cookbooks
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Converging node mike-VirtualBox
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Processing package[ntp] on mike-VirtualBox
[Sat, 02 Jun 2012 22:25:14 -0700] INFO: Processing package[ntp] action install (base::default line 3)
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: package[ntp] checking package status for ntp
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: package[ntp] current version is nil
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: package[ntp] candidate version is 1:4.2.6.p3+dfsg-1ubuntu3
[Sat, 02 Jun 2012 22:25:14 -0700] DEBUG: Executing apt-get -q -y install ntp=1:4.2.6.p3+dfsg-1ubuntu3
[Sat, 02 Jun 2012 22:25:21 -0700] DEBUG: ---- Begin output of apt-get -q -y install ntp=1:4.2.6.p3+dfsg-1ubuntu3 ----
[Sat, 02 Jun 2012 22:25:21 -0700] DEBUG: STDOUT: Reading package lists...
Building dependency tree...
Reading state information...
Suggested packages:
    ntp-doc
The following NEW packages will be installed:
    ntp
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 0 B/570 kB of archives.
After this operation, 1,368 kB of additional disk space will be used.
Selecting previously unselected package ntp.
(Reading database ... 171196 files and directories currently installed.)
Unpacking ntp (from .../ntp_1%3a4.2.6.p3+dfsg-1ubuntu3_i386.deb) ...
Processing triggers for man-db ...
Processing triggers for ureadahead ...
Setting up ntp (1:4.2.6.p3+dfsg-1ubuntu3) ...
* Starting NTP server ntpd
...done. 
```

关于可能发生的事情有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:03:35.457

您到底在遵循哪些教程？

你应该有一个名为“base”的角色，在你应该拥有的运行列表中`recipe[ntp]`，以及一个 ntp 食谱，它应该在 site-cookbooks/ntp 下（然后 ntp 配方将是 site-cookbooks/ntp/recipes/default .rb)。

老实说，我不确定您的厨师运行期间到底发生了什么，您能否发布日志？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:58:13.557

所以真的没有问题，只是我从根本上误解了`run_lists`和的关系`recipes`。我`site-cookbooks`目录中的基本配方*是 recipe*，一个非常简单的配方，但仍然是一个：

```
package 'ntp' 
```

因为我在目录中看到了一个单独的`ntp`配方`cookbooks`，这让我产生了一种误解，即上面的行不知何故需要在`cookbooks`. 不是这种情况。所以我`run_list`改变了：

```
"run_list": [
    "recipe[base]"
] 
```

到：

```
"run_list": [
    "recipe[ntp]"
] 
```

这调用了`cookbooks\ntp`配方，一切在我的虚拟机上看起来都符合预期。感谢您对此提出意见，希望这对厨师新手有所帮助。

# javascript - 重新加载 JavaScript 文件而不刷新 HTML

> ID：10868277
> 
> 赞同：23
> 
> 时间：2012-06-03T06:07:30.553
> 
> 标签：javascript, html

我有一个加载几个 Javascript 文件的 HTML：

```
<script src="assets/js/a.js"></script>
<script src="assets/js/b.js"></script>
<script src="assets/js/jquery.min.js"></script> 
```

当我在浏览器的控制台中调试/测试我的 Javascript 时，是否可以重新加载这些 Javascript 文件而无需重新加载整个 HTML 页面？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T06:21:21.097

您可以删除然后重新添加它们：

```
$('script').each(function() {
    if ($(this).attr('src') !== 'assets/js/jquery.min.js') {
        var old_src = $(this).attr('src');
        $(this).attr('src', '');
        setTimeout(function(){ $(this).attr('src', old_src + '?'+new Date()); }, 250);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T06:12:20.697

不（至少不是没有破解），事实上 - 重新加载这么多要非常小心。您的 javascript 很可能会被缓存，这会导致尝试调试时头疼，因为您的更新未应用。

[https://superuser.com/questions/36106/force-refreshing-only-javascript-files-in-firefox-and-chrome](https://superuser.com/questions/36106/force-refreshing-only-javascript-files-in-firefox-and-chrome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T08:57:45.440

基于 PitaJ 的解决方案。

重新加载函数中的所有 javascript。你可以从任何你想要的地方调用它。

```
 $('script').each(function () {
        if ($(this).attr('src') != undefined && $(this).attr('src').lastIndexOf('jquery') == -1) {
            var old_src = $(this).attr('src');
            var that = $(this);
            $(this).attr('src', '');

            setTimeout(function () {
                that.attr('src', old_src + '?' + new Date().getTime());
            }, 250);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T08:05:12.660

使用 jQuery 2.0.3 和 chrome 43 测试

```
 function reloadScript(id) {

    var $el =  $('#' + id);

    $('#' + id).replaceWith('<script id="' + id + '" src="' + $el.prop('src') + '"><\/script>');
} 
```

Chrome 在抱怨，但有效：

主线程上的同步 XMLHttpRequest 已被弃用，因为它会对最终用户的体验产生不利影响。如需更多帮助，请查看[http://xhr.spec.whatwg.org/](http://xhr.spec.whatwg.org/)。

您的脚本标签必须有 id。在控制台中调用：

```
reloadScript('yourid'); 
```

不删除事件侦听器，例如，如果重新加载按钮单击，则会执行两次。

# jsp - JSP 和 autoflush 属性的最佳缓冲区大小

> ID：10868281
> 
> 赞同：13
> 
> 时间：2012-06-03T06:09:13.380
> 
> 标签：jsp

有没有人建议为 JSP 设置最佳缓冲区大小？您可以使用以下页面指令来设置 JSP 中的缓冲区大小

```
 <%@page buffer="xxxkb" autoFlush="true" %> 
```

我的问题如下

1.  我的理解是，您使用的缓冲区大小越小，客户端浏览器的性能就越好。我的假设正确吗？如果您不这么认为，请解释

2.  最佳缓冲区大小应该是多少

3.  有没有办法知道默认缓冲区大小是多少？

4.  将 autoflush 设置为 true 应在达到最大大小后刷新缓冲区。如果将其设置为 false，则由您决定何时刷新

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T08:23:33.857

**1.我的理解是，您使用的缓冲区大小越小，客户端浏览器的性能越好。我的假设正确吗？如果您不这么认为，请解释**

**答：**是的，实际上不是在性能方面。但在渲染内容方面。因为客户端会以更快的速度获取数据。缓冲区大小应大于或等于底层套接字缓冲区大小。否则，尽管当达到缓冲区大小时 jsp 会刷新，但实际上不会将其写入客户端。

**2.最佳缓冲区大小应该是多少**

**答：**正如我上面所说，它应该大于或等于底层套接字缓冲区大小。最佳尺寸还取决于您的应用。它应该是这样一个值，一旦达到缓冲区大小，响应将被提交，您不能再进行任何操作，从而导致添加响应头。

**3.有没有办法知道默认缓冲区大小是多少？**

**Answer** : Yes , by using JspWriter class. JspWriter has a getter `getBufferSize()` which gives you the buffer size. The JspWriter can be obtained using `pageContext.getOut()`.

**4.Setting autoflush to true should flush the buffer once the max size reached. If you set it to false, its upto you to decide when to flush**

**Answer**: If set to true, it will flush when the max buffer size is reached. If set to false, it will throw an exception

# matlab - 在matlab中对单元格数组进行分类

> ID：10868282
> 
> 赞同：3
> 
> 时间：2012-06-03T06:09:40.713
> 
> 标签：matlab, machine-learning, data-mining, classification, document-classification

我想对新闻数据集进行文本分类。我有很多特性，比如`subject`, `keyword`,`summary`等等......所有这些特性都存储在一个结构单元数组中，每个结构看起来像这样：

```
 label: 'misc.forsale'
        subj: ' Motorcycle wanted.'
     keyword: [1x190 char]
   reference: []
organization: ' Worcester Polytechnic Institute'
        from: ' kedz@bigwpi.WPI.EDU (John Kedziora)'
     summary: []
       lines: ' 11'
       vocab: [4x2 double] 
```

我想对它们进行分类，`class = classify(test, train, target, 'diaglinear');`
但这些函数只接收数组作为输入，不接受单元格或结构。

我无法将此元胞数组转换为*一个*多维数组，因为特征的数量会有所不同（例如，一个主题有两个词，另一个主题有三个词）。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:34:12.853

先做一些特征提取。例如，对字符串进行标记，然后使用 TF-IDF。

您可以在令牌中包含密钥。这是信息检索中的常见做法。有关示例，请参见 Xapian 手册。

通常，您会做一些词干提取，例如`Examples -> exampl`. 现在，只需添加一个前缀，使单词根据出现的不同而不同。例如`Sexampl`，何时包含主题`example`以及`Kexampl`何时是关键字。

然后你就有了一个无处不在的“词袋”表示。他们甚至这样做是为了挖掘图像，这被称为“视觉词”。这些也不是英语单词。

# django - django 查询集中的伪随机排序

> ID：10868285
> 
> 赞同：1
> 
> 时间：2012-06-03T06:09:55.583
> 
> 标签：django, django-models

假设我有一个返回 10 个对象的 QuerySet，其中 3 个将显示在以下位置：

```
[ display 1 position ]      [ display 2 position ]     [ display 3 position ] 
```

代表它的模型如下：

```
class FeaturedContent(models.Model):
    image = models.URLField()
    position = models.PositiveSmallIntegerField(blank=True, null=True) 
```

其中位置可以是 1、2、3 或未指定 (Null)。

我希望能够随机排序 QuerySet，除了具有指定位置的对象。但是，我不能通过以下方式订购它：

```
featured_content = FeaturedContent.objects.order_by('-position', '?') 
```

因为如果我有一个具有 的项目`position = 2`，而所有其他项目都是`Null`，那么该项目将出现在位置 1 而不是位置 2。

我将如何进行此订购？

考虑到这一点，也许最好将数据作为字典而不是列表，例如：

```
`{'1': item or null, '2': item or null, '3': item or null, '?': [list of other items]}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:31:18.617

如果您只想遍历查询集，您可以有两个查询集，对它们进行排序并链接它们。

```
import itertools

qs1 = FeaturedContent.objects.filter(position__isnull=False).order_by('-position')
qs2 = FeaturedContent.objects.filter(position__isnull=True).order_by('?')
featured_content = itertools.chain(qs1, qs2)
for item in featured_content:
    #do something with qs item
    print item 
```

更新：

由于您要求确保位置确定顺序，并且“空白”空格被具有空位置的元素随机替换。如果要获取的精选列表不是太大，本例为20

```
featured = []
rands = []
for i in xrange(1, 20):
    try:
        x = FeaturedContent.objects.get(position=i) # assuming position is unique
    except FeaturedContentDoesNotExist:
        if not rands:
            rands = list(FeaturedContent.objects.filter(position__isnull=True).order_by('?')[:20]
        x = rands[0]
        rands = rands[1:]
    featured.append(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:23:42.200

我会发布处理它，在有序和无序记录之间进行合并排序。

**编辑：**

生成器的开始：

```
def posgen(posseq, arbseq, posattr='position', startpos=1):
  posel = next(posseq)
  for cur in itertools.count(startpos):
    if getattr(posel, posattr) == cur:
      yield posel
      posel = next(posseq)
    else:
      yield next(arbseq) 
```

请注意，此代码中可能存在许多错误情况（提示：）`StopIteration`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T22:14:17.790

如果您使用有效执行随机排序的数据库后端，您可以这样做：

```
# This will hold the result
featured_dict = {}

featured_pos = FeaturedContent.objects.filter(position__isnull=False).order_by('-position')
featured_rand = FeaturedContent.objects.filter(position__isnull=True).order_by('?')

pos_index = 0    
rand_index = 0

for pos in range(1, 4):
    content = None

    if pos_index < len(featured_pos) and featured_pos[pos_index].position == pos:
        content = featured_pos[pos_index]
        pos_index += 1

    elif rand_index < len(featured_rand):
        content = featured_rand[rand_index]
        rand_index += 1

    featured_dict[str(pos)] = content

# I'm not sure if you have to check for a valid index first before slicing
featured_dict['?'] = featured_rand[rand_index:] 
```

# javascript - 如何检查用户是否已登录 javascript

> ID：10868286
> 
> 赞同：6
> 
> 时间：2012-06-03T06:10:06.627
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个登录灯箱，需要在用户未登录时显示。灯箱完全用 javascript、fancybox 实现，并为 html 使用 rails partials。

登录时我可以看到 cookie 在 chrome 中设置，但`document.cookie`似乎返回为空。[原因可能在这里](https://stackoverflow.com/questions/4775660/relationship-between-the-rails-cookie-object-the-cookie-http-header-and-docume)已经解释过了

我如何在 javascript / erb 中实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T06:14:29.150

在后端处理这个。如果你用 rails 做这个，一定要使用和滥用`current_user`，因为它会是你最好的朋友。

然后在你的部分，你可以自由地拥有这样的东西

```
<% if current_user %>
     <p>Welcome <%= current_user.username %>!</p>
<% else %>
     <p>Please <%= link_to 'sign in', login_path %></p>
<% end %> 
```

Rails 会话，[Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-signin_failure)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T06:18:00.170

与 Jordan Scales 所说的方法相同，但使其更简单......[如果@current_user.nil 干燥？](http://amolnpujari.wordpress.com/2012/01/07/drying-if-current_user-nil/)

# scala - Scala：避免冗余类型参数

> ID：10868288
> 
> 赞同：4
> 
> 时间：2012-06-03T06:10:09.807
> 
> 标签：scala, type-parameter

假设我有一个带有类型参数的抽象类 Bar：

```
abstract class Bar[A] { def get: A } 
```

我有一个函数想要实例化一些`Bar`对象，调用它们的`get`方法并返回结果：

```
def foo[A, B <: Bar[A]]: Seq[A] 
```

必须提供 A 作为单独的类型参数似乎有点冗长，因为它隐含在`B`. 我真正想说的是

```
def foo[B <: Bar[A]]: Seq[A] 
```

但这不会编译。有没有办法让自己`foo`更紧凑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T07:22:22.647

丹尼尔在评论中说了什么。

也许使用抽象类型成员将有助于减少冗长。

```
abstract class Bar { 
  type A
  def get: A 
} 

def foo[B <: Bar]: Seq[B#A]
def baz[B <: Bar](b: B): Seq[B#A]
def taz[B <: Bar](b: B): Seq[b.A] 
```

# android - Phonegap + Jquery Mobile 从点击图标到主 index.html 的运行时间

> ID：10868289
> 
> 赞同：1
> 
> 时间：2012-06-03T06:10:14.333
> 
> 标签：android, html, jquery-mobile, cordova

我正在使用Phonegap + Jquery Mobile，当我点击手机上的图标时，显示index.html需要很长时间，现在我添加了一个启动画面，它在加载之前显示启动画面然后是黑屏索引.html。index.html 对于cordova.js 和jquery mobile js 非常小。我该如何纠正？

**配置文件**

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.test222"
    version   = "1.0.21">
<name>Test App</name>
<description>
Beta Saystyle
</description>
<author href="http://example.com" email="example@example.com">
Lester Jan Pearson
</author>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator"
android:fromAlpha="0.0" android:toAlpha="1.0"
android:duration="300" />
<icon src="images/4.png" />
<gap:splash src="images/mohawk.png" />
</widget> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:34:03.367

如果您使用的是 Phonegap 1.7 或更好的版本，请查看我对初始屏幕所做的更改。

[http://simonmacdonald.blogspot.com/2012/04/phonegap-android-splashscreen-just-got.html](http://simonmacdonald.blogspot.com/2012/04/phonegap-android-splashscreen-just-got.html)

现在，您的页面在显示初始屏幕时在后台加载。您也可以在设备就绪后调用一个方法来隐藏启动屏幕，这样就不再需要显示它了。

# java - 如何在 SQL 或 Java 中创建所有可能组合的哈希？

> ID：10868293
> 
> 赞同：-5
> 
> 时间：2012-06-03T06:11:05.590
> 
> 标签：java, sql, oracle

我有一个简单的查询：

```
select key, name from cities 
```

这给了我这样的价值观：

```
11 | Chicago
21 | New York
31 | Boston 
```

我需要做的是在 SQL 或 Java 中创建所有可能组合的哈希，以便在最后收到此结果：

```
11 | Chicago
21 | New York
31 | Boston
32 | Chicago/New York
42 | Chicago/Boston
52 | New York/Boston
63 | Chicago/New York/Boston 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:11:37.743

这并不完美，但可能是一个开始：

首先我创建了一个函数：

```
create or replace function sum_string(str in varchar2) return number is
  Result number;
begin
  execute immediate 'select ' || str || ' from dual'
    into result;
  return(Result);
end sum_string;
/ 
```

然后是查询（`your_table`是你的表）

```
with jwt as  (
  select t1.key k1, t1.name n1, t2.key k2, t2.name n2, t1.key + t2.key jkey
    from your_table t1
    left outer join (select key, name
                       from your_table
                     union all
                     select 0 "key", null "name" from dual) t2 on t1.key <>
                                                                  t2.key
  )
select jkey, max(aaa.pth)
  from (select sys_connect_by_path(t.n1, '/') pth,
               sum_string(ltrim(sys_connect_by_path(t.k1, '+'), '+')) jkey
          from jwt t
         start with t.k2 = 0
        connect by nocycle prior k1 = k2) aaa
 group by jkey; 
```

# iphone - Facebook graph API iOS：如何获取提要图片的宽度和高度？

> ID：10868294
> 
> 赞同：0
> 
> 时间：2012-06-03T06:11:16.753
> 
> 标签：iphone, facebook-graph-api, facebook-fql

```
[facebook requestWithGraphPath:@"me/home" andParams:params andDelegate:self]; 
```

我得到了这样的结果：

"===========================================

"id": "619421723284_367295343463689",

“从”： {

"name": "ChED Ying",

"id": "619421784" },

"story": "Chanered McDonald's Singapore 的照片。",

"图片": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/542908_38595311133451268_195dfdd7739613_s.jpg",

"链接": "https://www.facebook.com/photo.php?fbid=385953111451268&set=a.161567683889813.28585.157162220997026&type=1",

“名称”：“墙壁照片”，

"==========================================

> 我知道如何通过将 _s.jpg 替换为 _n.jpg 来获得大版本的提要图片元素，但图片的大小不知道

.

有谁能够帮助我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:26:40.223

您可以像这样获取图像的宽度和高度：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/542908_38595311133451268_195dfdd7739613_s.jpg"]];
UIImage *image = [UIImage imageWithData:data];
NSLog(@"%f, %f", image.width, image.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:40:34.137

这个 API 不可能，我尝试了所有可能的字段；-(

1.  从 PHP 中，您可以加载图像的一些字节（HTTP Range 标头）并读取 JPG 标头
2.  您可以重新查询 Facebook，以从此 ID 获取照片对象本身（我使用 FQL API，带有附件字段）

这很烦人;-(

# c - int near* far* huge* i 的含义；

> ID：10868295
> 
> 赞同：1
> 
> 时间：2012-06-03T06:11:22.907
> 
> 标签：c, pointers

> **可能重复：**
> [C 中远指针和近指针之间的区别](https://stackoverflow.com/questions/1749904/difference-between-far-pointer-and-near-pointer-in-c)
> [什么是近指针、远指针和巨大指针？](https://stackoverflow.com/questions/3575592/what-is-near-far-and-huge-pointers)
> [Near 和 Far 指针](https://stackoverflow.com/questions/3869830/near-and-far-pointers)

我对这些指针不是很清楚。请解释一下以下声明类型的含义

```
int near* far* huge* i;
int far* huge* huge i; 
```

等等等等

# c# - 正则表达式“.*[^a-zA-Z0-9_].*”

> ID：10868308
> 
> 赞同：2
> 
> 时间：2012-06-03T06:15:33.753
> 
> 标签：c#, regex

当我试图阅读更多关于 C# 中正则表达式的信息时，我只想确定我的结论。对于下面的表达式“.*[^a-zA-Z0-9_].*”，开头和结尾的“.*”是没有用的，对吗？因为据我了解，“。*”表示任何字符出现零次或多次，但后面跟着“[^a-zA-Z0-9_]”，表示除字母和数字的任何组合以外的任何字符，不区分大小写，使“。*”在“[^a-zA-Z0-9_]”之前和之后添加无用，对吗？

这是我用来检查表达式是否匹配的代码

```
// Here we call Regex.Match.
Match match = Regex.Match("anytest#", ".*[^a-z A-Z0-9_].*");
//Match match = Regex.Match("anytest#", "[^a-z A-Z0-9_]");

// Here we check the Match instance.
if (match.Success)
    Console.WriteLine("error");
else
    Console.WriteLine("no error"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:26:18.380

唯一的区别是“边距字符”是否包含在结果中。

为了：

`ab41--_71j`

它将匹配：

`1--_7`

如果没有`.*`开头和结尾，它将匹配：

`--_`

`.*[^a-zA-Z0-9_].*`只要字符串至少有一个不是 a-zA-Z0-9_ 的字符，任何字符串都会至少匹配一次正则表达式

从您目前在回答中的最后一条评论中，我了解到您实际使用的是：

`^[a-zA-Z0-9]*$`

仅当所有字符都是数字/字母时才匹配。如果不匹配，则字符串无效。

如果您还想允许该`_`字符，请使用：

`^[a-zA-Z0-9_]*$`

甚至可以缩短为：

`^\w$`

一般来说，最好使正则表达式的 Validate 而不是 Invalidate 字符串。它只是更有意义，更直观。

所以我的验证看起来像：

```
if (Regex.IsMatch("anytest#", "^\\w$"))
{
    Console.WriteLine("Success");
}
else
{
    Console.WriteLine("Error");
} 
```

另一个可能更快的选择：

```
if ("anytest#".ToCharArray().All(c => char.IsLetterOrDigit(c) || c == '_'))
{
    Console.WriteLine("Success");
}
else
{
    Console.WriteLine("Error");
} 
```

如果您不想包含“_”，它甚至可以看起来更好；

```
if ("anytest#".ToCharArray().All(char.IsLetterOrDigit))
{
    Console.WriteLine("Success");
}
else
{
    Console.WriteLine("Error");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T06:33:20.847

`.*[^a-zA-Z0-9_].*`只要输入中的某处有非字母数字/下划线，它将匹配整个输入。`[^a-zA-Z0-9_]`如果它位于输入中的某个位置，则将仅匹配单个非字母数字/下划线字符（很可能是最后一个字符，如果您使用的是默认贪婪匹配）。您想要哪一个取决于输入以及您在确定输入中是否存在非字母数字/下划线字符后要执行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T06:18:42.147

`a-Z`不，因为除了and之外还有其他字符`0-9`。

该正则表达式匹配所有以**任何**字符开头的字符串，而不是以**任何**`a-zA-Z0-9`字符结尾的字符串。或者只是一个根本不包含的字符串 。**`a-zA-Z0-9`**

 **如果你离开，`.*`那么你只有一个匹配一个完全不包含的字符的正则表达式 `a-zA-Z0-9`。

```
.*[^a-zA-Z0-9_].*  matches for instance: ABC_ß_ABC
[^a-zA-Z0-9_]      matches for instance: ß   (and this regex just matches 1 character) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T06:55:48.680

输入 1：`ABC_ß_ABC`

输入 2：`ß`

正则表达式 1：`.*[^a-zA-Z0-9_].*` 正则表达式 2：`[^a-zA-Z0-9_]`

两个输入都匹配正则表达式，

**对于输入 1**

正则表达式 1 匹配 9 个字符

正则表达式 2 仅匹配 1 个字符

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T09:49:40.187

仅在您实际查找的正则表达式中包含那些标记。在您的情况下，您实际上并不关心您指定的排除字符类之前或之后是否有任何其他字符。在此之前和之后添加`.*`不会改变匹配的成功，但会使匹配更加复杂。正则表达式已经匹配任何地方，除非您以某种方式特别锚定它，例如`^`在开始时使用。**

# javascript - JavaScript 正则表达式使用一个字符两次

> ID：10868310
> 
> 赞同：1
> 
> 时间：2012-06-03T06:15:37.863
> 
> 标签：javascript, regex, hash, match

所以我使用正则表达式从字符串中获取信息，问题是我需要`/`在字符串中的 a 处启动和停止。

这是一个例子

```
var regexp = /\/(.*?)=(.*?)\//g;
    var url_hash = "/s=lorem+ipsum/p=2/";
    var match;
    var result = {};
    while ((match = regexp.exec(url_hash)) != null) {
     result[match[1]] = match[2];
  } 
```

我可以`result['s']`毫无问题地抓取，但抓取变得有问题，因为for`result['p']`的结尾`/`与 for`result['s']`的开头相同。如果我将字符串更改为它可以完美地工作，但这当然是可怕的。那么我该如何解决这个问题，使其既能结束又能在? 我被卡住了，任何帮助表示赞赏。`/``result['p']``/s=lorem+ipsum//p=2/``/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:27:09.673

为什么你不能只是`split`它？

```
var result = {};
var url = "/#!/s=lorem+ipsum/p=2/".slice(4, -1).split('/');

for (i in url) {
  var value = url[i].split('=');
  result[value[0]] = value[1];
}

console.log(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:27:46.273

使用这个正则表达式：

```
/\/([^/=]+)=([^/]+)/ 
```

**代码：**

```
var regexp = /\/([^/=]+)=([^/]+)/g;
var url_hash = "/#!/s=lorem+ipsum/p=2/";
var match;
var result = {};
while ((match = regexp.exec(url_hash)) != null) {
   result[match[1]] = match[2];
   document.writeln(match[1] + ' = ' + match[2] + '<br>');
} 
```

**输出：**

```
s = lorem+ipsum
p = 2 
```

[`Online demo of the code`](http://jsfiddle.net/FYtSy/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T06:28:50.147

您可以在自己之后确定零件的前瞻集，`=`而不是将其添加到正则表达式中。前瞻集是“除正斜杠之外的所有内容”。

```
var regexp = /\/(\w+)=([^/]+)/g; 
```

顺便说一句，我假设之前的部分`=`是类似单词的（即字母数字）

# maven - Karaf 是否支持从 Maven 中心下载传递依赖项？

> ID：10868312
> 
> 赞同：2
> 
> 时间：2012-06-03T06:16:17.640
> 
> 标签：maven, osgi, apache-karaf

我正在尝试使用 Karaf，我想知道是否可以将其配置为从 Apache Maven 中央存储库中提取传递依赖项。无需使用“嵌入式捆绑包”

我已经知道您可以提取显式依赖项，问题的关键部分是“传递”的。

我也知道您可以使用 OBR 从已部署站点中的 repository.xml 文件中读取，但我找不到用于 Maven 中心的文件。该问题的一个可能答案是添加 URL，但我无法在任何地方找到它记录的 repository.xml URL 是什么。

目前，我的工作是弄清楚依赖项是什么，并将它们显式添加到

嵌入式捆绑包不适用于 Karaf OSGi 蓝图实现（它只是等待不存在的东西）。我也觉得不得不这样做很难看。对于这个问题，我能想到的另一个可能的答案是，是否有说明创建一个可以部署到包含所有必要依赖项的*任何*OSGi 容器（不仅仅是使用 KAR 文件的 Karaf）的包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T11:52:48.583

您可以使用 karaf-maven-plugin 从 maven 依赖项创建功能文件。这将解决传递依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T00:03:31.027

我找到了一种使用 Maven 以相对 OSGi 标准的方式执行此操作的方法。它使用 maven-dependency-plugin 创建一个存储库，该存储库仅包含运行时范围所需的依赖项。

然后执行 maven-bundle-plugin:index 目标以创建 repository.xml 文件。

此时在目标中您有一个有效的 obr 存储库，可以根据需要使用 maven-assembly-plugin 对其进行打包。

以下 pom.xml 片段将执行所需的操作。

```
 <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-runtime-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <copyPom>true</copyPom>
                        <useRepositoryLayout>true</useRepositoryLayout>
                        <includeScope>runtime</includeScope>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <executions>
                <execution>
                    <id>index</id>
                    <goals>
                        <goal>index</goal>
                    </goals>
                    <phase>verify</phase>
                    <configuration>
                        <mavenRepository>${project.build.directory}/dependency</mavenRepository>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

至于 Karaf，可以使用以下命令在不使用 Karaf 的 feature.xml 的情况下安装这个包及其传递依赖项：

```
features:install obr
obr:addUrl [location of the OBR repository, can be file:///....]
obr:deploy [symbolicname-of-bundle]
start [symbolicname-of-bundle] 
```

瞧。

请注意，这只会加载您指定的捆绑包引用的捆绑包，因此如果您使用蓝图之类的东西，理论上它不应该知道其他捆绑包，那么您必须显式部署它们或创建一个将包含您拥有的捆绑包的超级捆绑包（如功能/产品）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T06:20:47.517

据我所知，您能做的最好的事情是使用 Maven 下载所有依赖项，然后使用[Felix bnd 插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)将您的本地（或远程）存储库转换为可以与 Karaf 一起使用的 OBR。

# sql - LINQ 查询选择所有不匹配的

> ID：10868315
> 
> 赞同：1
> 
> 时间：2012-06-03T06:17:04.587
> 
> 标签：sql, linq

我有以下 LINQ 查询，它选择所有与它们关联的菜单的页面。我现在想拉出所有没有与之关联的菜单的页面，即。“<strong>AssociatedPages”中不存在的所有页面。

```
var AssociatedPages = (from mm in db.MainMenus
                            join p in db.Pages on mm.MainMenuPageFK equals p.PageID
                        select p);

var unAssociatedPages = (from p in db.Pages
                            where ???
                            select p);
return View(unAssociatedPages); 
```

我以前在 SQL 中做过这个，但我不确定 LINQ 语法。

设置是一个 MainMenu 可以有一个太多与之关联的页面

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T07:04:46.057

试试这个：

```
var unAssociatedPages =
    from p in db.Pages
    join mm in db.MainMenus on p.PageID equals mm.MainMenuPageFK into mms
    where !mms.Any()
    select p; 
```

您可能会发现需要进行几次`.ToArray()`调用才能提高性能。

# javascript - 除了钛之外的 HTML5 桌面 webapp 选项

> ID：10868316
> 
> 赞同：3
> 
> 时间：2012-06-03T06:17:08.313
> 
> 标签：javascript, html, web-applications, air, titanium

我正在制作一个 html5 游戏，虽然我希望能够将游戏发布到 chrome 商店等网络平台，但该游戏的播放方式更接近于传统的桌面游戏。所以我也希望能够将它用于桌面，并利用桌面应用商店。

Air 本来是理想的，只是他们放弃了对我的主要平台 linux 的支持。我喜欢 Titanium，但它还不支持 html5 音频，有时将它安装到 linux 上可能会很棘手。我研究了Phonegap，但它的目标是移动设备而不是桌面设备。**是否有一个简单的平台可以让我将我的应用程序包装在 webkit 框架或其他东西中？**

**我想做的就是让我的游戏在浏览器框架中运行**，我不需要像服务器这样的疯狂功能，因为它只是 html 和 javascript，没有服务器端。有了Titanium 和phonegap 之类的所有很酷的东西，我很肯定肯定会有一些像这样简单的东西。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:37:39.030

搅拌机是对的。XULrunner 是一个很棒的平台。在阅读教程和文档后的几个小时内，我真的让我的 web 应用程序启动并运行了。效果很好，我会向有此需求的其他人推荐它，至少在有人制作更多文档之前。

这是一个很好的入门教程： [http ://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_1](http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_1)

还有一个提示，开发时不需要下载 XULrunner，firefox 有一个命令行参数。只是

```
$ firefox -app /path/to/application.ini 
```

它会运行。因此，如果您有 Firefox，那么您就有了 XULrunner。至少在发布之前它会起作用。

# assembly - FASM 程序问题

> ID：10868317
> 
> 赞同：3
> 
> 时间：2012-06-03T06:17:27.563
> 
> 标签：assembly, interrupt, procedure, bios, fasm

我是整个装配 FASM 的新手

我已经通过本[教程实现了 WriteString](http://ziplib.com/emu8086/interrupts.html#int10h_13h)

```
INT 10h / AH = 13h - write string.

    input:
    AL = write mode:
        bit 0: update cursor after writing;
        bit 1: string contains attributes.
    BH = page number.
    BL = attribute if string contains only characters (bit 1 of AL is zero).
    CX = number of characters in string (attributes are not counted).
    DL,DH = column, row at which to start writing.
    ES:BP points to string to be printed. 
```

像那样

```
include 'proc32.inc'
org 0x7c00

mov ax,ds
mov es,ax

jmp start
start:

ccall puts,message,0x000c,attribute,0x02,0x00,0x00,0x00

stop:
jmp stop

attribute db 0x0F
message db 'hello world!','$'

proc puts,string,length,attribute,mode,page,row,column
 mov al,byte [mode]
 mov bh,byte [page]
 mov bl,byte [attribute]
 mov dl,byte [column]
 mov dh,byte [row]
 mov cx,word [length]
 lea bp,[string]
 mov ah,0x13
 int 0x10
 ret
endp 
```

**问题：**
FASM 没有给出错误，但过程没有返回或工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:14:40.883

简单的答案是`proc32.inc`32 位保护模式代码（不适用于 16 位实模式引导扇区代码）。另请注意，`proc`宏`ebp`用作帧指针，BIOS 函数`13h`也使用`bp`.

[令人高兴的答案是在平面汇编器](http://board.flatassembler.net/ "平面组装机")OS 构建论坛上有丰富的信息和帮助。

# iphone - mongoose http 服务器有时无法获取发布数据

> ID：10868318
> 
> 赞同：0
> 
> 时间：2012-06-03T06:17:37.190
> 
> 标签：iphone, ios, httpserver

当我使用猫鼬处理一些http请求时，有时无法获取发布数据。有没有人遇到过一些问题？我不确定猫鼬是否足够稳定。任何人都可以提供一些想法吗？提前致谢。

我使用 restClient 发送 http 请求。mongoose库下载自：http://code.google.com/p/mongoose/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:36:11.547

我遇到的问题是上传文件大小超过120MB，会出现内存警告，然后程序崩溃。经过初步测试，找到内存2级警告的代码：</p>

```
MongooseServer.m
void *handleRequest(enum mg_event event,
                struct mg_connection *conn,
                const struct mg_request_info *request_info)
{
    ...
    if ((cl = mg_get_header(conn, "Content-Length")) != NULL) {

        len = atoi(cl);
        if ((buf = malloc(len)) != NULL) {
            mg_read(conn, buf, len);
            body = [NSData dataWithBytes:buf length:len];
            free(buf);
        }
    }
    ...
} 
```

具体问题是哪里我也没有识别出来，经过进一步调试才确定

# c# - 如何序列化自定义对象类型列表

> ID：10868319
> 
> 赞同：2
> 
> 时间：2012-06-03T06:17:44.493
> 
> 标签：c#, list, serialization, exception-handling, xmlserializer

我有这样的课

```
public class Record
{
    public Int32 TotalTrail { get; set; }
    public TimeSpan MyTimeSpan { get; set; }
    public DateTime MyDateTime { get; set; }
} 
```

我有一个列表来保存它的对象：

```
List<Record> _records; 
```

然后当我想序列化列表时：

序列化器。序列化（流，_records）；

上面一行存在运行时错误：

> 无法将 System.Collections.Generic.List`1[[SimpleGame.Record, SimpleGame, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 类型的对象分配给 SimpleGame.Record 类型的对象。

是因为我无法序列化列表吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T06:50:30.203

您必须为类型创建序列化程序，`List<Record>`而不是`Record`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:40:45.050

如果要序列化为 XML，甚至不需要实现可序列化。以下是将任何对象写入文件的快速简便方法：

```
Dim s As System.Xml.Serialization.XmlSerializer
Using fs As New IO.FileStream(thePath, FileMode.Create, FileAccess.Write, FileShare.Write)
    Using w As System.Xml.XmlTextWriter = New System.Xml.XmlTextWriter(fs, System.Text.Encoding.Default)
        s = New System.Xml.Serialization.XmlSerializer(GetType(T))
        w.Formatting = Xml.Formatting.Indented
        s.Serialize(w, m_objectToSerialize)
    End Using
End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:25:58.177

我认为您需要指定您的对象是`Serializable`，以下是示例。

```
[Serializable()]
public class Record 
{ 
    public Int32 TotalTrail { get; set; } 
    public TimeSpan MyTimeSpan { get; set; } 
    public DateTime MyDateTime { get; set; } 
} 
```

**另一个溶胶**

你可以实现`ISerializable`接口

```
public class Record : ISerializable
{ 
    public Int32 TotalTrail { get; set; } 
    public TimeSpan MyTimeSpan { get; set; } 
    public DateTime MyDateTime { get; set; } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T06:39:40.317

使您的课程可序列化...检查此链接。[http://msdn.microsoft.com/en-us/library/4abbf6k0.aspx](http://msdn.microsoft.com/en-us/library/4abbf6k0.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-23T22:25:33.933

我遇到了同样的问题：我所做的是，我去了您为其创建列表的类并添加了一个无参数构造函数。我在某处读到序列化与无参数构造函数一起使用。一旦我这样做了。它就像一个魅力！希望它有效.. 像这样的东西

```
public class InventoryType
{
    public DateTime Date { get; set; }
    public int ID { get; set; }
    public string RoomT { get; set; }
    public int Quantity { get; set; }

    public InventoryType() { }

    public InventoryType(DateTime date, int id, string roomT, int quantity)
    {

        this.Date = date;
        this.ID = id;
        this.RoomT = roomT;
        this.Quantity = quantity;
    }

    public override string ToString()
    {           
        return "Date: " + Date + "\nID: " + ID + "\nRoom Type: " + RoomT + "\nQuantity: " + Quantity;
    }
} 
```

# c# - 使用 ManagedInstallerClass 安装 C# 服务

> ID：10868330
> 
> 赞同：4
> 
> 时间：2012-06-03T06:19:53.190
> 
> 标签：c#, service

我一直在尝试安装此服务，但无济于事。

我目前正在使用 InnoSetup，因为 Visual Studio 安装程序对我来说并不完全有意义，老实说（现在也是凌晨 1 点。D :)

我从这个线程中获取了一些代码：[Inno Setup for Windows service?](https://stackoverflow.com/questions/1449994/inno-setup-for-windows-service)

那里的每个人都说这对他们来说非常有效，但他们并没有完全解释他们做了什么或将代码放在哪里。它是一个控制台应用程序吗？在哪里？

所以，我把它卡在我认为它应该去的地方。当您将安装程序类添加到服务时，会创建一个“Program.cs”类，这就是我放置它的地方。

这是我的“Program.cs”：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Configuration.Install;
using System.Reflection;

namespace Installer
{
    static class Program
    {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main(string[] args)
    {
        Console.WriteLine("MASDjhd");
        string parameter = string.Concat(args);
        switch (parameter)
        {
            case "--install":
                ManagedInstallerClass.InstallHelper(new string[] { Assembly.GetExecutingAssembly().Location });
                break;
            case "--uninstall":
                ManagedInstallerClass.InstallHelper(new string[] { "/u", Assembly.GetExecutingAssembly().Location });
                break;
          }

        }
    }
} 
```

这是我的 InnoScript：

```
[Setup]
AppName=MachineVerification
AppVersion=1.0
DefaultDirName={pf}\MachineVerification
DefaultGroupName=MachineVerification
UninstallDisplayIcon={app}\MachineVerification.exe
Compression=lzma2
SolidCompression=yes

[Files]
Source: "Installer.exe"; DestDir: "{app}"

[Run]
Filename:"{app}\Installer.exe"; Parameters: "--install"

[UninstallRun]
Filename: "{app}\Installer.exe"; Parameters: "--uninstall" 
```

帮助？丁：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-14T23:46:26.687

在这里找到我的答案：[Self install windows service in .NET c#](https://stackoverflow.com/questions/4144019/self-install-windows-service-in-net-c-sharp)

对于那些想要点击链接的人，解决方案是添加：

```
 var processInstaller = new ServiceProcessInstaller();
        var serviceInstaller = new ServiceInstaller();

        //set the privileges
        processInstaller.Account = ServiceAccount.LocalSystem;

        serviceInstaller.DisplayName = "MachineVerification";
        serviceInstaller.StartType = ServiceStartMode.Automatic;

        //must be the same as what was set in Program's constructor
        serviceInstaller.ServiceName = "MachineVerification";
        this.Installers.Add(processInstaller);
        this.Installers.Add(serviceInstaller); 
```

到您的服务中安装类的构造函数。

# jquery - jQuery - 从表单对象中按名称获取选择的值

> ID：10868340
> 
> 赞同：1
> 
> 时间：2012-06-03T06:22:12.933
> 
> 标签：jquery

我有一个表格：

```
<form id="myForm">
    <select name="mySelect">                
        <option value="250">250</option>                    
        <option value="500">500</option>
    </select>
    <input id="submit-123" type="submit" />
</form> 
```

我需要以一种聪明的方式获得提交的价值。页面上有多个表单，因此我需要获取与已单击的提交按钮相关的表单。

```
var form = $('#submit-123').closest('form'); 
```

但是我不知道如何在不引用索引的情况下获取选择的值（它需要比这更健壮）。

我得到的最接近的是 using:`form.children()`但我仍然无法弄清楚如何准确定位选择。

我是 JS 新手，任何帮助将不胜感激。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:24:31.597

你可以试试这个来获得点击提交按钮的相关表单

```
 $('form').has('#submit-123').find('select'); 
```

或者

```
 $(this).prev('select'); 
```

或者

```
 $(this).closes('form').find('select'); 
```

从该选择中获取价值

```
 $('form').has('#submit-123').find('select').val(); 
```

或者

```
 $(this).prev('select').val(); 
```

**完整代码**

```
$(':submit').on('click', function(e) {
    e.preventDefault(); // just for stop redirect, you may not need this
    alert($('form').has(this).find('select').val());
}); 
```

**[演示 1](http://jsfiddle.net/xv6cs/)**

**或者**

```
$(':submit').on('click', function(e) {
    e.preventDefault(); // just for stop redirect, you may not need this
    alert($(this).prev('select').val());
}); 
```

**[演示 2](http://jsfiddle.net/qstjL/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:31:02.967

**HTML**

```
<form id="myForm">
<select name="mySelect">                
    <option value="250">250</option>                    
    <option value="500">500</option>
</select>
<input id="submit-123" type="submit" />
</form> 
```

**脚本**

```
$("input:submit").click(function(){
    var value = $(this).closest('form').find('select').val();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:32:40.113

这应该对你有用，

```
$('#submit-123').siblings('select[name="mySelect"]').val() 
```

# sql-server - 如何将0保存为SQL中的第一个数字

> ID：10868342
> 
> 赞同：1
> 
> 时间：2012-06-03T06:22:19.447
> 
> 标签：sql-server

我有一个表，它只存储 6 位数字，并且有数字包含 0，因为有第一个字母，即使有数字包含多个 0，因为有第一个字母..

```
 using (TransactionScope scope = new TransactionScope())
            {

                using (SqlConnection conn = new SqlConnection(constr))
                {
                    conn.Open();
                    using (SqlCommand cmd = new SqlCommand(query, conn))
                    {
                        cmd.Parameters.Add(new SqlParameter("@numType", numTyp));
                        cmd.Parameters.Add(new SqlParameter("@numFrom", textBox1.Text));
                        cmd.Parameters.Add(new SqlParameter("@numTo", textBox2.Text));
                        cmd.ExecuteNonQuery();
                    }
                    conn.Close();
                }

                scope.Complete(); 
```

数据正在保存并检索，但如果第一个数字是 0，则 sql 会忽略它们，它们很重要......例如，数字 001234 在 db 中保存为 1234 .. 那么我该如何解决这个问题，我搜索但没有运气..

使用 Sqlserver 2008 visualstudio 2010 c#

希望它不是含糊的，提前致谢

**编辑：我使用 int 作为数据类型**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T06:29:06.563

这是一个数据类型问题：如果使用`int`，将存储数值，因此 001234 将存储为数字 1234。

您可以稍后重新创建零填充，但它不是存储数据的一部分：与或`0001234`是相同的**整数**。`01234``1234`

*   如果要将所有数字左填充到一定长度，请`String.Format()`在检索后使用。
*   如果`0001234`和`1234`是不同的值，请使用类似字符串的数据类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:26:03.643

你不能。问题不在于检索，而是数据作为整数存储在 int 列中，没有字符串格式。

如果您希望数据库在 int 之前存储 0 的数量，请使用另一种数据类型，可以是一个字符串、几个 int，其中一个是零的数量，或者更适合您的精确需求的另一种格式。

编辑：如果您的零没有意义（它们只是为了补充），请将您的格式保持为 int，并在开头添加任意数量的“0”。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-03T07:15:55.537

在询问并查看其他答案之后，我想起了高中时的一个教训，它指出 int 存储 235 个字符，但实际上它存储 234 个字符，所以我一直想知道最后一个字母可能不会被存储，但现在实际上它是很明显它不存储第一个字母 0 大声笑，我将数据类型更改为 nvarchar(50) 它存储检索都用 0 个字符，无论多少；）

# android - 渴望在我的 android 应用程序中添加抖动功能

> ID：10868352
> 
> 赞同：0
> 
> 时间：2012-06-03T06:24:15.123
> 
> 标签：android, animation

我是这个 android 应用程序开发领域的新手，我浏览了提供抖动功能的代码，但我无法理解要编写这个抖动代码，我必须创建新项目，或者我可以在我现有的应用程序中添加这个代码，比如画廊（给出的例子在android开发教程中）如果是这样，那么如何？？？plzzzz 回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:42:52.207

你好 swati sinha 你必须使用 android 摇动动画。这里有一些提示，假设您想将抖动动画添加到 Edittext。

```
Animation animationShake= AnimationUtils.loadAnimation(this, R.anim.shake); 
if(editext.getText().lenght()==0){
edittext.startAnimation(animationShake);
} 
```

和shake.xml 看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android" 
android:fromXDelta="0" android:toXDelta="10" android:duration="1000" 
android:interpolator="@anim/cycle_7" /> 
```

和 cycle_7.xml 看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<cycleInterpolator xmlns:android="http://schemas.android.com/apk/res/android"      android:cycles="7" /> 
```

cycle_7 和shake xml 文件都应该在res/anim 文件夹下。如果您发现我的答案有用，请查看已接受的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:32:56.513

斯瓦蒂，如果您遵循以下示例：[示例 1](https://stackoverflow.com/questions/2317428/android-i-want-to-shake-it)，您可以在要检测抖动的同一类中实现它

另一方面，如果您遵循以下示例：[示例 2](https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android)，您将需要创建一个新的“类”，然后编写该代码。

如果您有任何问题，请告诉我

# jquery - 基于单选按钮的jQuery动态输入ID

> ID：10868359
> 
> 赞同：0
> 
> 时间：2012-06-03T06:26:30.840
> 
> 标签：jquery

我正在尝试根据单选框的选择来更改输入的 ID。

```
<input type="text" name="judge"/>

<input type="radio" name="type" value="percent"/>Percent |
<input type="radio" name="type" value="decimal"/>Decimal
<br/>
<button type="button" id="mybutton">Check</button>
<br/><br/>
<div id="output"/> 
```

单击单选按钮百分比或小数将更改输入框的 ID。

```
//Set the ID of the input box on radio change
$('input[name=type]').change(function() {
    if ($(this).val() == "percent") {
        $('input[name=judge]').attr('id', 'judge_percent');
    } else if ($(this).val() == "decimal") {
        $('input[name=judge]').attr('id', 'judge_decimal');
    }
});

//IF statement depending on the input ID created from the radio button
$('#mybutton').click(function() {
    if ($('input[name=type]').val() == "percent") {
        value_percent = parseFloat($('#judge_percent').val());
        $('#output').html(value_percent);
    } else if ($('input[name=type]').val() == "decimal") {
        value_decimal = parseFloat($('#judge_decimal').val());
        $('#output').html(value_decimal);
    }
}); 
```

这只能半途而废。如果我检查“十进制”并单击我的按钮，我会得到“NaN”，就好像它没有读取输入 ID。

编辑：这是**正确**的Jsfiddle：http: [//jsfiddle.net/6FbdJ/1/](http://jsfiddle.net/6FbdJ/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:29:58.897

```
} else($('input[name=type]').val() == "decimal") { 
```

应该：

```
} else if($('input[name=type]').val() == "decimal") { 
```

这就是你在 DEMO 中得到的。

**更新：**

将选择器更改为：

```
$('input[name=type]').val(); 
```

到：

```
$('input[name=type]:checked').val(); 
```

[**固定演示**](http://jsfiddle.net/6FbdJ/4/)

您可以替换`$(this).val()`为`this.value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:44:41.817

更好的方法是为此创建一个闭包，将状态保留在其中以做出决定：

```
(function() {
    var inputField = $('input[name=judge]'), // keep reference to the text input field
    inputType = 'percent', // set default input type to percentage
    outputBox = $('#output'); // keep reference of the output area

    $('input[name=type]').change(function() {
        // change the input type based on the value (verbatim copy)
        inputType = $(this).val();
    });

    $('#mybutton').click(function() {
        var tmp;

        if (inputType == 'percent') {
            tmp = parseFloat(inputField.val()) / 100; // make a percentage
        } else if (inputType ='decimal') {
            tmp = parseFloat(inputField.val()); // don't change anything
        }
        outputBox.text(tmp); // output the calculated value
    });
}()); 
```

它将选定的输入类型保存在局部变量中，并根据单选按钮进行更改；单击按钮时，它将检查该局部变量并根据该值做出决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:39:05.193

```
$('#mybutton').click(function() {
    if ($('input[name=type]:checked').val() == "percent") {
        value_percent = parseFloat($('#judge_percent').val() || 0);
        $('#output').html(value_percent);
    } else if ($('input[name=type]:checked').val() == "decimal") {
        value_decimal = parseFloat($('#judge_decimal').val() || 0);
        $('#output').html(value_decimal);
    }
}); 
```

# python - 存储应用程序持久数据、平面文件或数据库的首选方法是什么？

> ID：10868362
> 
> 赞同：0
> 
> 时间：2012-06-03T06:26:42.860
> 
> 标签：python, local-storage

为我的 Python 程序存储特定于应用程序的参数（持久数据）的首选方法是什么？

我正在创建一个 Python 程序，它需要存储一些参数：“project_name”、“start_year”、“max_value”、...

我不知道哪种是存储这些数据的最佳方式（在进行计算和报告时我必须重用它们）：使用本地 TXT 文件，使用非常简单的 DB（它是否存在于 Python 中？我应该使用 SQLite ?), ...

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:03:34.767

如果方案是固定的，最好选择 sqldb，如 sqlite3，加上 memcached 作为缓存。如果关系经常变化，我认为灵活的数据可以存储在文件中（哈希索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:51:35.830

您可以使用**搁置**库。从搁置文档：

“架子”是一个持久的、类似字典的对象。与 dbm 数据库的不同之处在于架子中的值（不是键！）本质上可以是任意 Python 对象——“pickle”模块可以处理的任何东西

```
import shelve
d = shelve.open(filename) # open, with (g)dbm filename -- no suffix
d[key] = data   # store data at key (overwrites old data if
                # using an existing key)
data = d[key]   # retrieve a COPY of the data at key (raise
                # KeyError if no such key) -- NOTE that this
                # access returns a *copy* of the entry!
del d[key]      # delete data stored at key (raises KeyError
                # if no such key)
flag = d.has_key(key)   # true if the key exists; same as "key in d"
list = d.keys() # a list of all existing keys (slow!)
d.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:30:33.357

SQLite。非常容易设置，并且您获得了许多内置的数据库功能。您也不必处理文件读/写和解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T06:30:39.440

[`pickle`](http://docs.python.org/library/pickle.html)它：

```
import pickle

options = {
  'project_name': 'foo',
  'start_year': 2000
}

with open('config.pickle', 'wb') as config:
  pickle.dump(options, config) 
```

该`pickle`模块允许您将大多数 Python 对象转储到文件中并再次读取它们。

# python - Python：在liebniz pie 近似中终止while语句

> ID：10868367
> 
> 赞同：1
> 
> 时间：2012-06-03T06:28:39.880
> 
> 标签：python, python-3.x

我是 python 和编程的初学者，在 HTLCS 上做练习时已经遇到了障碍。

问题是使用 Liebniz 近似来计算 pi (3.14...) 的值。

这是我解决这个问题的可怜尝试：

```
def myPi():
    n = 0
    value = ((-1) ** n)/(2 * n + 1) 
    runningtotal = 0
    while True:
        runningtotal += value
        n += 1 
        value = ((-1) ** n)/(2 * n + 1)
    runningtotal *= 4

    return runningtotal 
```

当然，由于 while True，Python 解释器 shell 永远不会完成我的函数，我理解诸如 while n != 5000 之类的解决方案也可以，但我希望 Python 自己找到终止点并返回结果。

我尝试运行 while 语句，直到 runningtotal 的值和更新的 runningtotal 的值在某个浮点数处相同，但由于某种原因在每个循环中两个值的最后一个浮点数丢失一个而失败。（runningtotal：3.14157，更新runningtotal：3.14158->runningtotal：3.14158，更新runningtotal：3.14157->重复）。

这是我在这个论坛上的第一个问题，所以如果我没有明确说明或违反了我不知道的 Stackflow 规则，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:35:16.060

浮点数具有固有的不精确性，测试它们是否相等是一项冒险的事情。我建议使用小公差而不是测试相等性。而不是`oldTotal == newTotal`，测试类似的东西`abs(oldTotal-newTotal)<0.0001`（或任何你喜欢的容差）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:37:03.670

我会使用任意精度的库来做这种事情，但普通的 Python 也可以。

这是我的做法：

```
precision = 10
epsilon = 10 ** (-precision)

while True:
  ...

  if abs(oldvalue - newvalue) < epsilon:
    break 
```

# java - 在事件的框架内更改按钮的位置

> ID：10868370
> 
> 赞同：3
> 
> 时间：2012-06-03T06:29:04.957
> 
> 标签：java, swing, jbutton, jlabel, layout-manager

基本上，我正在尝试使用箭头键在框架内移动 a `JButton`（甚至是 a ）。`JLabel`我已经成功地找出了检测箭头按键的部分。现在我要做的就是根据按下的键更改按钮（或标签）的位置。

例如，当我按下“UP”键时，按钮/标签应该向上移动 5 个像素。我找不到更改按钮位置的属性。

我需要在面板内放置按钮/标签或类似的东西吗？

请帮忙，这不是功课，只是好奇:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:20:46.717

我会怎么做是使用图形而不是面板。所以绘制它的代码可能是：

```
 public class panel extends JPanel{
public int X = 50; //Starting x
public int Y = 50; //Starting y
public panel(){

}
public void paintComponent(Graphics g){
    super.paintComponent(g);
    this.setBackground(Color.WHITE);
    g.drawString("Hello this will be moved", X, Y);//<--- This draws the text
} 
```

}

这段代码将绘制文本并重复绘制它。您所要做的就是在 Key Listener 中或曾经使用过的东西中执行；

```
 X++; 
```

或者：

```
 Y++; 
```

每次都会加1。因此，当您按下键时，它会移动一个 x 像素或 y 像素或前后移动，具体取决于 ++ 或 --。然后将其添加到 JFrame 中，它将在屏幕上绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:13:45.073

在我正在做的应用程序中使用原始图像要好得多，但这是我在做的时候偶然发现的东西；）

这个事实可以通过标签的绝对定位（不知道按钮）来完成，即。不使用任何布局管理器。我们所要做的就是以下几点：

```
setLayout(null);
Jlabel testLabel = new JLabel("Test Moving label"); 
```

现在完成了。我们必须设置

```
testLabel.setBounds(XCoord+ insets().left, yCoord+ insets().top, 150, 25); 
```

here `xCoord` and `yCoord` are the coordinates of the top left pixel of the label. the above line can be added to the actionListener. in my case its the action for pressing UP, RIGHT and LEFT arrow keys. we can increment and decrement the xCoord and yCoord accordingly.

# asp.net - 想知道 ASP.NET 是否是 RESTful 的？

> ID：10868374
> 
> 赞同：1
> 
> 时间：2012-06-03T06:29:24.247
> 
> 标签：asp.net, rest

我正在阅读有关 REST 的内容，并了解到其原则之一是 Web 服务/应用程序不应跟踪会话，这是客户端的工作。因为我知道 ASP.NET 有会话管理，所以我想知道它是否是 RESTful。我误解了我读的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:49:26.333

Asp.Net 是一个丰富的框架，提供了大量的功能来构建任何类型的 Web 应用程序。您可以自行决定使用哪些功能。您可以决定是否使用会话。

不过，REST 不仅仅是关于会话......

如果您正在查看 Asp.Net 来构建 Rest 应用程序，则应该查看 Asp.Net MVC 来构建此类，或者如果您希望构建 Rest 服务，甚至可以查看新的 Asp.net WebApi。

# php - 按类别查询结果并将所有内容显示为列表

> ID：10868376
> 
> 赞同：0
> 
> 时间：2012-06-03T06:29:32.670
> 
> 标签：php, mysql, json

我有一张桌子，基本上是这样的

```
------------------
id | name  | type
------------------
1  | name1 | type1
2  | name2 | type2
3  | name3 | type3 
------------------ 
```

我想查询它并将其显示为类似

```
type1
 - name1
 - and so on...
type2
 - name2
 - and so on...    
type3
 - name 3
 - and so on... 
```

我还希望将其显示为 JSON 文件，类似于

```
 [
    {
        "type1": {
            "name": "name1"
        },
        "type2": {
            "name": "name2"
        },
        "type3": {
            "name": "name3"
        }
    }
] 
```

那么，我可以知道最好的方法吗？使用循环查询类型，然后选择类别并按类型显示？

编辑：在互联网上搜索高低后。我发现了这个：[http ://www.tommylacroix.com/2008/09/10/php-design-pattern-building-a-tree/](http://www.tommylacroix.com/2008/09/10/php-design-pattern-building-a-tree/)

因此，根据我的需要制定了此代码。不确定它是否有效：

```
<?php
$query = "SELECT * FROM TABLE";
$list = array();
$result = mysql_query($query);
while($row = mysql_fetch_array($result)){
    if(!$list[$row['type']])
    {
        $list[$row['type']] = array();
    }
    array_push($list[$location['type']],&$row['name']) ;
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T06:56:21.923

Try This.... also see the *result output* below

```
SELECT id,CONCAT_WS(',',type,name) as result FROM table GROUP BY id

<?php
$sql= mysql_query("SELECT id,CONCAT_WS(',',type,name) as result FROM table GROUP BY id");
$data = array();
$i=0;
while($row = mysql_fetch_array($sql)){

    $ex_res = explode(",",$row['result']);
    $data[$ex_res[0]]['name'] = $ex_res[1];  
    $i++;
}

$a = json_encode($data);
print_r($a);
?> 
```

**Result Output**

```
{"type1":{"name":"name1"},"type2":{"name":"name2"},"type3":{"name":"name3"}} 
```

# vim - 在vim中将缓冲区变成标签页

> ID：10868380
> 
> 赞同：6
> 
> 时间：2012-06-03T06:30:26.267
> 
> 标签：vim

我在vim中有一个缓冲区列表，我怎样才能把它们都变成标签页，比如Notepad ++？

我知道我可以使用`:tabe`或其他东西在选项卡视图中打开新文件，但是如果我在单个 vim 中打开了多个缓冲区并且我想将它们全部变成选项卡页怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-03T07:28:40.397

您可以键入以下命令：

```
:tab ball 
```

它将在选项卡中显示所有缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:00:28.357

If I understood, you have several buffers in splits and wish every one of them in a separate tab. `<Ctrl-w>T` will open a buffer in a new *tab page* removing it from the split.

But *tab pages* are really not what they are in Notepad++ - separate files. In Vim they're more of a placeholders for splits, so my guess is you'll have a hard time working with them if you mean to just copy your Notepad++'s way of work to Vim.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T06:10:25.380

我不知道您将`all`缓冲区转换为标签页的动机。通常，我们在做一项工作时有很多缓冲区，但是对于标签，我认为它没有足够的空间来显示标签栏，尤其是在笔记本电脑中。成像如果顶部有 20 个选项卡...

所以如果你想把当前缓冲区变成标签页，你可以使用`:tab split`. 我认为这正是您所需要的。

您可以查看[why-do-vim-experts-prefer-buffers-over-tabs](https://stackoverflow.com/questions/26708822/why-do-vim-experts-prefer-buffers-over-tabs)以获得更多帮助。

# facebook - 从 Java WebService 在 facebook 墙上发帖

> ID：10868387
> 
> 赞同：0
> 
> 时间：2012-06-03T06:31:38.740
> 
> 标签：facebook, web-services, facebook-wall

我正在寻找一种从 java-webservice 在我的 facebook 墙上发布内容的方法。

我环顾四周，发现现在已弃用 WAS offline_access。

那么……怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:06:48.823

你有两个我能想到的选择：

1.  当用户与您的应用程序交互时，获取一个长期存在的用户访问令牌（使用[服务器端](http://developers.facebook.com/docs/authentication/server-side/)身份验证，或[客户端](http://developers.facebook.com/docs/authentication/client-side/)然后[扩展令牌](http://developers.facebook.com/roadmap/offline-access-removal/)），那么您将拥有 60 天的有效令牌。
    60 天结束后，您将需要用户重新使用您的应用以获取新令牌。

2.  您可以请求`publish_stream`许可，然后使用可以代表用户发布的[应用令牌：](http://developers.facebook.com/docs/authentication/applications/)

> 应用程序访问令牌还可用于代表已授予您应用程序发布权限的用户向 Facebook 发布内容。
> 
> 应用程序访问令牌通常不会过期。一旦生成，它们将无限期有效。

# iphone - 构建错误：在“unsafe_unretained”之前需要一个属性属性

> ID：10868389
> 
> 赞同：0
> 
> 时间：2012-06-03T06:32:24.103
> 
> 标签：iphone, ios, compiler-errors, text-to-speech, ispeech

我正在为我刚刚创建的示例/测试项目（iOS 通用应用程序）构建 iSpeechSDK Beta 3（发布于 2012-05-18）。我收到构建时间错误。

.....iSpeechSDK/Headers/ISSpeechSynthesis.h:58：错误：在“unsafe_unretained”之前需要一个属性属性

当我双击错误时，它指向 SDK 头类：ISSpeechSynthesis.h .. @property (nonatomic, unsafe_unretained) id delegate; ..

PS：我在 Build 的其他链接器标志中添加了记录的链接器标志：-fobjc-arc 我尝试为模拟器/设备/调试/发布构建，但所有构建目标都会产生相同的上述错误。

请帮我解决这个构建错误。

系统/开发配置 - Mac OS：10.6.8 XCode：3.2.5 iOS SDK：4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T10:49:30.667

您使用了错误的编译器。LLVM GCC 不支持 Strong 和其他 ARC 关键字。请将您的编译器设置为 LLVM 编译器 4.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T06:43:46.767

我不相信 Xcode 3.2.5 支持 ARC。我相信它是在 Xcode 4.2 中引入的，但您可以尝试在“构建设置”中将编译器设置更改为 LLVM GCC 4.2

# objective-c - 在 UIViewController 类上没有单例有什么好处

> ID：10868390
> 
> 赞同：2
> 
> 时间：2012-06-03T06:32:31.093
> 
> 标签：objective-c, xcode4.3

我正在构建一个应用程序，我的很多视图只显示一次。所以我正在做这个：

```
+(listNewController *) singleton
{
    return _singleton;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    _singleton = self; 
```

在某处

```
- (void)viewDidUnload
{
    _singleton = nil; 
```

现在，我不仅获得了对我的单个 ViewController 的很好的引用，我还可以做一些代码保护以确保仅当 _singleton == nil 时才调用 viewDidLoad。

但是大多数人将他们的 ViewController 的引用放在应用程序委托上而不是单例上。

为什么？

到底有什么优点和缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:04:37.740

首先，我不确定大多数人是否将引用放在应用程序委托中。大多数初学者肯定会这样做，因为当您创建项目时应用程序委托就在那里，这是唯一可以从代码中的任何位置访问的对象，而无需执行任何其他操作。

缺点主要是这不是最好的做法，只是因为方便就将所有东西都放在那里。App Delegate 就是这样一个委托对象，它执行与应用程序生命周期相关的操作，而不是全局变量的容器。因此，仅在委托中存储与该委托的角色无关的内容违反了封装的概念。

在您的情况下，您使用单例来返回视图控制器的单个实例。我也不确定这是否是最好的方法。在多个视图控制器的情况下，在您的特定场景中效果很好的东西是不可重用的。由于这种类要被多次实例化，如果有意义的话，将其定义为单例是不合适的。

在我看来，如果您创建一个单独的单例类（如 MyViewControllersSingleton）会更好，您可以在其中引用不同的唯一控制器作为属性。可以从任何地方以相同的方式调用单例对象：

```
[MyViewControllersSingleton sharedInstance].listNewController; 
```

对于大多数应用程序，我通常将大部分全局变量和指向唯一视图控制器的指针放在一个单例中，我称之为 AppSingleton。但是，如果您想要更好地分离关注点，您可以想象创建多个单例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T08:18:18.607

我不确定提问者试图解决什么问题，但只是发布了我用来制作单例的两种可能方法：

方法1，使用`+load`：

```
@class MyClass

static MyClass * __instance = nil ;

+(void)load
{
    @autoreleasepool {
        __instance = [ [ self alloc ] init ] ;  // (use your designated initializer)
    }
}

+(MyClass*)sharedInstance
{
    return __instance ;
}

@end 
```

方法二、延迟初始化：

```
@implementation MyClass

+(MyClass*)sharedInstance
{
    @synchronized( self )
    {
        if ( !__instance )
        {
            __instance = [ [ self alloc ] init ] ;  // (use your designated initializer)
        }

        return __instance ;
    }
}

@end 
```

对于视图控制器案例，试试这个：

```
@implementation MyViewController 

static MyViewController * __instance = nil ;

- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle
{
    @synchronized( [ self class ] )
    {
        self = __instance ;
        if ( !self )
        {
            self = [ super initWithNibName:nibName bundle:nibBundle ] ;
            __instance = self ;
        }
    }

    // ...finish init as normal here

    return self ;
}

@end 
```

# asp.net - 使用 Sql 向下钻取搜索

> ID：10868393
> 
> 赞同：1
> 
> 时间：2012-06-03T06:32:43.827
> 
> 标签：asp.net, tsql

如今，似乎很多电子商务网站都提供了产品过滤器来搜索商品。例如，您可以按宽度、高度、电视尺寸、家具类型等搜索项目。

现在，如果它是一个只有几个可搜索过滤器的简单网站，那么它很容易做到，但我正在管理一个销售家具、电器和电子产品的网站，每个类别也有很多子类别。例如：

电器：洗衣店可搜索属性（洗衣机、烘干机、洗衣机类型..微波炉、宽度、高度）电子电视（电视尺寸、宽度）游戏（ps3、类型、销售日期）

我相信你明白了。ecomerece 网站提供基本类别，然后每个类别都可以有子类别或 Searable 过滤器来深入搜索。

使用 MS SQL Server 和 Asp.net 执行此操作的最佳方法是什么。我有兴趣在 SQL 中创建优化的可搜索模式。

欢迎任何提示，建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:08:24.833

您可以使用[实体-属性-值模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。
简单的概念是，您将拥有另一个名为 Attributes 的表格，而不是为每个模型的属性（例如 ps3 游戏的类型、销售日期等）设置一个列，其中将列出属性及其类型，并且第三个表，您的主要模型实例（ps3 游戏）将通过 3 列与属性链接：

*   Model Id（ps3游戏的id）
*   属性 ID
*   属性值

这个概念可能更难管理，并且需要更复杂的查询，但它会以最简单的方式添加新产品/类别。
当然，在这个模型中，如果少数产品共享一个共同的属性（例如 pc 游戏和 ps3 游戏共享一个流派），您将只定义一次属性，并且两个模型都将链接到它，允许共同搜索查询不同的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:41:35.840

一个问题太多了。找一本关于数据库设计的书。对于向下钻取，您可以拥有一个包含与向下钻取一样多的 PK 列的表。但是当涉及到细节时，您将需要单独的表格，因为电视没有与立体声音响相同的细节。

# html - Css：如何使用底部填充使位置固定 100% 可调整大小？- JS Fiddle 提供

> ID：10868399
> 
> 赞同：1
> 
> 时间：2012-06-03T06:33:54.477
> 
> 标签：html, css, layout, position

我正在尝试固定 100%，但周围有一个小框架。我只是无法正确处理，框架会出现在顶部/底部或左侧/右侧，但不会从两侧出现......

这是我到目前为止所得到的：

```
div.all_reviews{
    background: url(../design/trans-gr.png);
    position:fixed;
    width:100%;
    height:100%;
    z-index:12500;
    padding:15px;
}
div.wrap1{
    width:100%;
    height:100%;
    background-color:#00AEEF;
} 
```

![在此处输入图像描述](../Images/1fc6fd1e3b26cda44b512af94a19a15b.png)

**编辑：1** **好吧**，这就是我到目前为止所做的：

[http://jsfiddle.net/Hm7Mw/](http://jsfiddle.net/Hm7Mw/)

```
div.all_reviews{
    background: url(../design/trans-gr.png);
    position:fixed;
    width:100%;
    height:100%;
    z-index:12500;
    overflow:auto;
}
div.wrap1{
    display: block;
    position:absolute;
    height:auto;
    width:100%;
    min-width:962px;
    bottom:6px;
    top:6px;
    left:0px;
    right:0px;
}   
div.wrap2{
    margin:0px auto;
    max-width:960px;
    height:100%;
    position:relative;
    overflow:visible;
}   
div.wrap3{
    overflow:hidden;
    height:auto;
    min-height:100%;
    width:100%;
    position:absolute;
    background-color: #FFF;
} 
```

同样，它与滚动完美配合 - 即。我已经让它滚动整个东西，而不是包裹里面的东西。

但是，如果我向下滚动，底部的填充会由于某种原因消失。如果我将溢出自动放到内部容器中，那么它会有点“修复”它，但它们会在屏幕中间有非常难看的滚动条——这是我不想要的。

HTML：

```
<div class="all_reviews">
<div class="wrap1">
<div class="wrap2">
<div class="wrap3">

       (BLA)      

</div>
</div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:00:17.540

你需要这样的东西：

```
.onTopOfAll {
    bottom: 0;
    left: 0;
    position: fixed;
    right: 0;
    top: 0;
    z-index: 1;
    /* Something else for style */
}

.onTopOfTop {
    bottom: 15px;
    left: 15px;
    position: fixed;
    right: 15px;
    top: 15px;
    z-index: 2;
    /* Something else for style */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:36:57.457

```
 <div class="all_reviews">

    <div class="wrap1">
        <div class="wrap2">
            <div class="wrap3">
                    /8Content/8
        </div>
    </div>
    </div>
</div>

    all_reviews{
    background: url(../design/trans-gr.png);
    position:fixed;
    width:100%;
    height:100%;
    z-index:12500;
    display:none;
}
div.wrap1{
    display: block;
    position:absolute;
    height:auto;
    width:100%;
    bottom:25px;
    top:5px;
    left:-10px;
    right:0px;
}   
div.wrap2{
    margin:0px auto;
    width:100%;
    max-width:940px;
    min-height:100%;
    position:relative;
}   
div.wrap3{
    overflow:auto;
    height:100%;
    width:100%;
    position:absolute;
    background-color: #FFF;
    border:5px solid #CCC;

    padding:5px;
} 
```

注意撤消 display : none 使用脚本，并使用 overflow:hidden 固定正文，因此它不会在背景上沿途滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:11:33.510

尝试 div.all 的 auto 的高度和宽度，而不是 100%。您可能需要为您的身体增加 100% 的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T08:01:23.777

您的填充在您的 div 中添加了一些额外的宽度。你给了你 div 100% 的宽度，当你应用填充时，总宽度现在是 15px + 100% + 15px。如果您也可以提供您的 html 以及有关您将要做什么的一些想法，那么这将对我们其他人帮助您有所帮助。谢谢。

# ruby-on-rails - 我有一系列链接，并且想解析每个链接，用 Nokogiri 检查每个链接的最有效方法是什么？- 红宝石

> ID：10868400
> 
> 赞同：3
> 
> 时间：2012-06-03T06:34:03.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri

所以说我有一个看起来像这样的数组：

```
links = [['May 1', 'Link A', 'www.linka.com'], ['May 2', 'Link B', 'www.linkb.com']] 
```

我想对 Nokogiri 做的是转到每个链接并在每个页面上返回特定文本（根据我拥有的 xpath）。

我知道我可以做类似的事情：

```
links.each do |x|
   doc = Nokogiri::HTML(open(x[2]))
end 
```

`doc`然后在该`each`循​​环中遍历每个。但是，鉴于我的数组中可能有 700 个项目......这似乎效率很低。使用各种嵌套循环等。

有没有更有效的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:53:02.887

您可能想查看**Typhoeus**或**EM-HTTP-Request 之**类的东西来并行化您的 HTTP 请求。

使用 Nokogiri 处理页面本身将是一项受 CPU 限制的任务，因此多线程该任务不会给您带来太多（或任何）加速。

您最大的减速将来自 HTTP 请求，因此使这些请求并行执行将提供最大的加速。

**台风**：
[https ://github.com/typhoeus/typhoeus](https://github.com/typhoeus/typhoeus)

**EM-HTTP-请求**：
[https ://github.com/igrigorik/em-http-request](https://github.com/igrigorik/em-http-request)

# .net - c#.net 4.0 - 没有 pia - 这就是我所需要的吗？

> ID：10868406
> 
> 赞同：0
> 
> 时间：2012-06-03T06:35:48.143
> 
> 标签：.net, c#-4.0, .net-4.0, pia, office-pia

引用 Microsoft.Office.Interop.Excel 并将 Embed Interop Type 设置为 true？

这样做会确保我的应用向后兼容吗？（只要我使用适用于所有版本的安全方法。）

还是我必须使用诸如后期绑定之类的东西才能使其与多个版本兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:29:51.157

此[链接](http://msdn.microsoft.com/en-us/library/dd264733.aspx)表明您获得了一定程度的版本独立性：

> 1.当您在运行时调用不需要主互操作程序集 (PIA) 的 COM 类型时，可以进行其他增强。消除对 PIA 的依赖**会导致版本独立**和更轻松的部署。有关在没有 PIA 的情况下进行编程的优势的详细信息，请参阅演练：从托管程序集中嵌入类型（C# 和 Visual Basic）。

尽管我对 Office 互操作的简短经验仅限于 2007 年，但我无法给您一个明确的答案。这完全取决于 Microsoft 是否正在更改每个 Office 版本的 Office 互操作的接口 ID。

但只要你坚持使用以前版本中存在的方法，我**认为**你会没事的。

# ruby-on-rails - 如何使用 rspec 在 Rails 中设置 nulldb？

> ID：10868408
> 
> 赞同：1
> 
> 时间：2012-06-03T06:36:06.413
> 
> 标签：ruby-on-rails, ruby, rspec

我对 Rails 开发几乎是新手。我目前正在阅读 Avdi Grimm 的 Objects on Rails 以在我的 rails 应用程序中使用 #SOLID 设计，而不是被迫遵循一些会造成混乱和不可读的代码和设计的约定。

我想设置 nulldb 并在我的快速规范中使用它，这些规范正在测试应用程序的业务逻辑，但我无法让它工作。我在这里阅读了 nulldb GitHub 页面上的安装指南 -> [https://github.com/nulldb/nulldb](https://github.com/nulldb/nulldb)。我安装了 activerecord-nulldb-adapter gem 并将它也放入了我的 Gemfile 并运行了 bundle install 命令，所以它现在已经完全安装了。我有一个 spec_helper_lite.rb 文件，我在我的快速规范中使用它，所以我认为在其中设置 nulldb 是个好主意。这是我的 spec_helper_lite.rb 文件中 nulldb 部分的代码：

```
require 'nulldb_rspec'

def setup_nulldb
    schema_path = File.expand_path("../db/schema.rb", File.dirname(__FILE__))
    ActiveRecord::Base.establish_connection(:adapter => :nulldb,
                                                        :schema => schema_path)
    NullDB.nullify(:schema => schema_path)
end

def teardown_nulldb
    NullDB.restore
end 
```

然后我在我的快速规范中需要这个 spec_helper_lite.rb 并在我的规范的方法之前和之后调用 setup 和 teardown nulldb 方法。当我运行规范时，我会收到错误未初始化常量 ActiveRecord::ConnectionNotEstablished (NameError)。我尝试了不同的方法，例如删除 setup_nulldb 中的建立连接行，我会得到同样的错误。我什至在我的 spec_helper_lite 中需要 'active_record' 只是为了看看会发生什么，然后我会收到 NullDB 模块的错误“未定义的方法无效”，显然规范变得完全缓慢导致需要 active_record。我搜索了很多关于如何设置 nulldb 的内容，我看到的所有内容都解释了如何设置它，但它对我不起作用。我使用 nulldb 版本 0.2.1、rails 3.0.0 和 rspec 2.0.1

感谢您对如何正确设置的帮助。提前致谢。

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:03:38.587

我遇到了类似的问题（但使用 minitest 和独立于 rails 的 activerecord）。我尝试了你提到的所有相同的东西。原来我只是在使用 ruby​​gems 中的任何东西。看起来更新我的 Gemfile 以直接从 github 提取解决了这个问题：

```
group :development, :test do
  gem 'activerecord-nulldb-adapter', :git => 'git://github.com/nulldb/nulldb.git'
end 
```

更新后你会想要`bundle install`再次。

# python - 从网站解析——源代码不包含我需要的信息

> ID：10868410
> 
> 赞同：3
> 
> 时间：2012-06-03T06:36:14.117
> 
> 标签：python, html, parsing, web-crawler

我对网络爬虫等有点陌生，尽管我已经编程一年了。所以请耐心等待我在这里解释我的问题。

我正在解析来自 Yahoo! 的信息！新闻，我已经设法得到了我想要的大部分东西，但有一小部分让我感到难过。

例如： http: [//news.yahoo.com/record-nm-blaze-test-forest-management-225730172.html](http://news.yahoo.com/record-nm-blaze-test-forest-management-225730172.html)

我想在评论中获得拇指向上和向下拇指图标旁边的数字。当我在 Chrome 浏览器中使用“检查元素”时，我可以清楚地看到我必须寻找的东西 - 即 div 类“ugccmt-rate”下的 em 标签。但是，我无法在我的 python 程序中找到它。在试图追查问题的根源时，我点击查看页面的源代码，似乎没有这个标签。你们知道我应该如何解决这个问题吗？这是否与页面上仅在运行后才显示信息的 javascript 有关？我会很感激一些正确方向的指示。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:41:20.147

该页面是通过 JavaScript 生成的。

首先检查是否有网站的移动版本。如果没有，请检查任何 API 或 RSS/Atom 提要。如果*没有*其他问题，您要么必须手动确定 JavaScript 正在加载什么以及从何处加载，要么使用[Selenium](http://seleniumhq.org/)自动化浏览器，为您呈现 JavaScript 以供解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T06:45:25.073

使用 Firefox 中的 Web 控制台，您可以很容易地查看页面在运行脚本时实际发出的请求，并找出返回所需数据的 URI。然后，您可以直接在 Python 脚本中请求该 URI 并从中提取数据。它可能是 Python 已经有一个库可以解析的格式，例如 JSON。

雅虎！他们的服务器端可能有一些东西试图阻止您在脚本中访问这些数据文件，例如检查浏览器（用户代理标头）、cookie 或引荐来源网址。这些都可以用足够的毅力来伪造，但你应该把它们的存在当作你应该小心行事的标志。（它们还可能限制您在给定时间段内可以提出的请求数量，这是不可能的。）

# c++ - 回路未正确操作

> ID：10868417
> 
> 赞同：0
> 
> 时间：2012-06-03T06:38:34.647
> 
> 标签：c++

这是我的代码，我试图一次找到最大长度的相同长度字符，例如“ `a a a bb bb bc sa sa a a`”，所以答案是 5 一次两个字符，相邻 5 次。

这是我的代码，我的问题是，当我尝试输入时，对于我的第一个输入，它不会是 getline 而是 printf 在最后几行，然后它需要一行并打印输出

就像我给5它写1然后它需要getline，但我希望它首先使用getline而不是printf，这样对于我的5个输入它会打印1个和4个所需的输出。我想要5个你能告诉我为什么吗？ .

```
#include<iostream>
#include<cstdio>
#include<vector>

using namespace std;

int main()
{
    int a,j;
    scanf("%d",&a);
    for(j=0;j<a;j++)
    {
        vector<int> v;
        string s;
        getline(cin,s);

        int i,cnt =0;
        for(i=0;i<s.length();i++)
        {

            if(s[i] != ' ')
            {
                cnt++;
            }
            else
            { 
                v.push_back(cnt);
                cnt =0;
            }
        }
        v.push_back(cnt);

        int k=0;
        int ps =0;
        int sp=0;

        while(k<v.size()-1)
        {
            if (v[k+1] - v[k] == 0)
            {
                sp++;
                k++;
            }
            else
            if (sp >= ps)
            {
                ps = sp;
                 k++;
                sp=0;
            }
            else
            {
                k++;
                sp=0;
            }
        }
        if (sp<ps)
        printf("%d",ps+1);
        else
        printf("%d",sp+1);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:07:18.453

您不应该与 混合`scanf`，`getline`尽量只使用其中一种（这`getline`是一个更好的选择）。

正在发生的事情是，`scanf`一旦完成读取`int`. 它不会占用您键入的行尾字符，也不会占用您在该数字之后输入的任何其他内容。所以`getline`拿起第一行剩下的任何东西（可能只是换行符）。
一个“快速”但肮脏的解决方法是更改​​您的`scanf`调用，以便它在以下内容之后吞下空格`int`：

```
scanf("%d ",&a);
      // ^ notice the space there 
```

但这不是一个真正的解决办法。使用`getline`和字符串流 (in `<sstream>`) 来获取第一个数字，您的代码将按照您的预期工作。您将`istringstream`在此常见问题解答中找到使用 提取数字的示例：[如何在 C++ 中将数字转换为字符串，反之亦然](https://stackoverflow.com/questions/5290089/how-to-convert-a-number-to-string-and-vice-versa-in-c)

您可能还对另一个问题感兴趣： [Split a string in C++?](https://stackoverflow.com/questions/236129/how-to-split-a-string-in-c) ，答案演示了拆分字符串的方法，这些方法比您在此处所做的更不容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:07:43.893

您如何准确输入所有内容？我认为问题可能是您的 getline() 正在从流中读取您的最后一个 [enter]，因此会自动将一个空字符串放入 s. 这将导致您得到 1 。试试这个你的scanf：

```
scanf("%d\n",&a) 
```

那应该吸收[进入]。

# c# - 使用 Ajax 返回 PartialView 未在页面上插入

> ID：10868418
> 
> 赞同：2
> 
> 时间：2012-06-03T06:38:54.253
> 
> 标签：c#, .net, asp.net-mvc-3, .net-4.0, asp.net-ajax

只是试图围绕 Razor 中的 Ajax 助手——可能忽略了一些简单的事情。

以下代码将我当前的选项卡定向到 /Music/SearchBand 而不是将部分返回到我的 div。

我的视图中有这个：

```
@Ajax.ActionLink("click me","SearchBand",
new AjaxOptions {
    UpdateTargetId = "replaceThisDiv"   
})

<div id="replaceThisDiv"></div> 
```

这在我的控制器中：

```
public ActionResult SearchBand()
    {
        return PartialView("_bandResults");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:18:07.327

`@Ajax. ...`助手会向生成的 HTML 添加一些额外的属性，这些`data-`属性本身不会执行任何 ajax 请求（这就是链接“只是”导航到不同页面的原因）。

`data-`为了使其正常工作，它需要一些客户端 javascript 函数，这些函数将使用预生成的属性触发实际的 ajax 请求。

这些js函数在`Sripts/jquery.unobtrusive-ajax.min.js`文件中：

因此，您需要在计划使用任何`@Ajax. ...`帮助程序的每个页面上包含此 JS 文件：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" 
        type="text/javascript"></script> 
```

# java - 如何将 blob 图像分配给 JLabel

> ID：10868420
> 
> 赞同：-1
> 
> 时间：2012-06-03T06:39:28.220
> 
> 标签：java, mysql, swing, netbeans-7

我将访问者的图像和其他详细信息存储到表 tbl_visitor 中。代码如下，

```
 String string_op="F:\\POSTERS\\Roses\\TROPIC4.png"; 
    File imageFile = new File(string_op);
    FileInputStream fis = new FileInputStream(imageFile);

    String queryVis="insert into tbl_visitor(visitor_name,contact_no," +
            "job_profile,org_name,photo_id_proof,type_of_visitor,date," +
            "extra_people,image) values('"+
            name_of_visitor.getText()+"','"+
            contact_num.getText()+"','"+
            job_profile.getText()+"','"+
            org.getText()+"','"+
            photo_id_num.getText()+"','"+
            type_of_visitor.getSelectedItem().toString()+"','"+
            date_and_time.getText()+"','"+
            tf1.getText()+"','"+
            "fis,(int)imageFile.length()"+"')"; 
```

现在我想在 JFrame 上显示图像并使用 JLabel 显示图像，但我无法将图像分配给 JLabel。我尝试了以下代码来显示图像，但它给了我错误。

```
Blob image_vis = rs1.getBlob(10);
image_cap.setIcon(image_vis); 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:27:42.870

如果您花一些时间阅读 API 文档，这非常简单：

Blob 有一个[getBinaryStream()](http://docs.oracle.com/javase/6/docs/api/java/sql/Blob.html#getBinaryStream%28%29)，它返回一个字节流，其中包含存储在 Blob 中的数据。

实现 Icon 的 ImageIcon 有一个以字节数组作为参数的[构造函数。](http://docs.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html#ImageIcon%28byte%5B%5D%29)

JLabel 有一个[setIcon(Icon)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)方法。

因此，将 Blob 二进制流中的所有内容读入字节数组，使用该字节数组构造一个 ImageIcon，并以该 ImageIcon 作为参数调用标签 setIcon 方法。

# java - lock.lock() 在尝试之前

> ID：10868423
> 
> 赞同：21
> 
> 时间：2012-06-03T06:40:08.320
> 
> 标签：java, locking, java.util.concurrent

有什么区别：

```
private Lock lock = new ReentrantLock(true);

public void getIn (int direction) throws InterruptedException {

     lock.lock();
     try {
         ... 
```

和

```
...

public void getIn (int direction) throws InterruptedException {

      try {
          lock.lock();
          ... 
```

编译顺利，程序也可以工作（我的意思是相同的输出）

我应该放 lock.lock(); 尝试之前还是之后？...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T06:53:22.497

假设它`lock`是 a [`ReentrantLock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html)，那么它没有真正的区别，因为[`lock()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html#lock%28%29)不会抛出任何检查异常。

然而，Java 文档在示例中的块`lock()`之外。这样做的原因是*未经检查*的异常不应导致错误地被调用。在所有事物中都存在未经检查的异常时，正确性是否是一个问题，这完全是另一个讨论。`try``ReentrantLock`*`lock()``unlock()``lock()`*

 *一般来说，保持`try`块之类的东西尽可能细粒度是一种很好的编码实践。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-03T07:05:26.460

如果是第 1 种情况，`finally`你可以说`unlock()`。万一No2你需要检查你之前是否持有锁`unlock()`，否则你可以得到`IllegalMonitorStateException`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-03T06:56:28.917

The try statement also contains:

```
 } finally {
     lock.unlock();
 } 
```

That is, if you place `lock.lock()` after `try`, exceptions thrown by `lock.lock()` would cause `lock.unlock()`, which is wrong, because lock was not obtained, and unlocking would cause another exception. So the first variant is correct. To handle exceptions thrown by `lock.lock()` you have to use another try statement.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T06:47:23.590

在第一种情况下：如果`lock.lock()`throws `InterruptedException`，`getIn`将管理它。但对于任何其他异常，它会抛出一个`getIn`不处理的异常：运行时异常

在第二种情况下：除了 之外`InterruptedException`，该`try-catch`块还进行了一些异常处理，您没有在此处显示。这应该会引发较少的异常，因为内部块也捕获了一些异常。

整体运行取决于`lock.lock()`抛出什么异常？*

# asp.net - 为使用实体框架的 ASP.net 网站创建公共 API 的推荐方法

> ID：10868425
> 
> 赞同：1
> 
> 时间：2012-06-03T06:40:53.723
> 
> 标签：asp.net, entity-framework, api

我目前有一个使用实体框架来执行所有 CRUD 操作的 webforms asp.net。

我需要为我的网站创建一个面向公众的 API。

我需要来自 API 的以下内容：

*   使用 API 的客户端的身份验证
*   使用记录，以确保没有滥用等
*   节流是一种额外的附加功能，以确保一个人不会超载 API。
*   根据调用客户端使用的标志，返回数据最好能够以 JSON 或 XML 返回。

我正在寻找任何指导作为创建公共 API 以满足这些要求的最有效方式。建议的书籍，链接，建议都是，任何其他的都欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:09:17.657

在代码中这样做绝对是可行的，但它对所有这些功能都相当重要。一种更简单的方法是使用 3scale (http://www.3scale.net) 之类的东西，它开箱即用（您可以发布 API 密钥、对其进行速率限制、获取 API 分析 + 创建开发人员门户） ）。设置通常是通过您放入系统的代码库（库在这里：（https://support.3scale.net/libraries）或有一个 API 或最后在您的应用程序前面设置 Varnish 作为 API 代理使用这个模组：[https](https://github.com/3scale/libvmod-3scale/) ://github.com/3scale/libvmod-3scale/ 。

对于数据返回类型，通常您可以通过在 API 请求中使用 .json、.xml 进行切换，并将其作为代码中的内容类型进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T11:25:22.863

使用 WebAPI：

> ASP.NET Web API 是一个框架，可让您轻松构建覆盖广泛客户端（包括浏览器和移动设备）的 HTTP 服务。ASP.NET Web API 是在 .NET Framework 上构建 RESTful 应用程序的理想平台。

[http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/23/using-asp-net-web-api-with-asp-net-web-forms.aspx) http://www.asp .net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms [http://www.beletsky.net/2011/10/integrating-aspnet-mvc- into-legacy-web.html](http://www.beletsky.net/2011/10/integrating-aspnet-mvc-into-legacy-web.html)

# javascript - 没有出现在引号中的 URL 的正则表达式？(javascript)

> ID：10868427
> 
> 赞同：1
> 
> 时间：2012-06-03T06:41:09.770
> 
> 标签：javascript, jquery, regex, web

目前我有一个正则表达式，可以在一个 html 块中找到所有 URL。它看起来像这样：

```
elementHTML.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/ig); 
```

当检测到 URL 时，它会被替换为如下所示的内容：

```
<div data="URL_THAT_WAS_DETECTED">Information about that url</div> 
```

数据属性是自定义添加的。

我如何才能继续查找 URL 而无需获取先前检测到的 URL？

理想情况下，我希望忽略引号中的 URL 或可能的 html 标签，但我愿意接受建议。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:11:13.407

这个正则表达式会这样做：

```
 /(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+(?![^\s]*?")([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/ig 
```

我为双引号`"`字符添加了负前瞻。

[**现场演示**](http://regexr.com?3157i)

# c# - 从 app.config 文件中读取

> ID：10868428
> 
> 赞同：5
> 
> 时间：2012-06-03T06:41:09.897
> 
> 标签：c#, app-config

我正在尝试从以下文件 打印到`Console.Write`键的值。`name``app.config`

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
      <appSettings>
        <add key="name" value="Chan" />
      </appSettings>
    </configuration> 
```

C#代码：

```
Console.Write(ConfigurationManager.AppSettings["name"]); 
```

控制台中没有打印任何内容。为什么是这样 ？

注意：我添加了对`System.Configuration`dll的引用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:30:18.417

下面的代码为您提供了活动配置文件的内容。

```
var content  = File.ReadAllLines(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile); 
```

检查你得到什么`content`，它是包含 `key="name" value="Chan"`还是其他什么？

如果您给出， `<add key="name" value="Chan" />`则 ConfigurationManager.AppSettings["name"] 应返回为`Chan`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T08:16:24.553

鉴于您的 XML 文件 (app.config)**格式正确**，请尝试以下操作。
声明一个变量并为该变量分配 AppSettings 值。类似的-

```
string sName = "";
sName = ConfigurationManager.AppSettings["name"].ToString(); 
```

# iphone - SSO 登录对话框返回到 fbDidNotLogin，但没有任何错误指示

> ID：10868429
> 
> 赞同：3
> 
> 时间：2012-06-03T06:41:12.237
> 
> 标签：iphone, ios, facebook, single-sign-on

我最近创建了一个新的 Facebook 应用 ID，因为我正在将 Facebook SSO 集成添加到我的应用中。我在 Facebook 中的应用程序设置为 Native iOS，并且我已经包含了 Bundle ID 和当前发布的应用程序的 Apple ID（用于测试）。

我已经按照说明实现了 SDK（我还有另外两个 iOS 应用程序当前也在使用 SDK，没有问题）。URL 回调的所有委托方法和所需的 plist 条目都已到位。

尝试登录后，我看到了带有蓝色条的 Facebook 白色屏幕（只是一个加载微调器），但 5 秒后它重定向回我的应用程序并点击 fbDidNotLogin 委托方法。该方法不包括任何类型的可检索错误（至少没有记录在案或可供我使用）。

所以在这一点上，我不知道是什么导致我的登录失败。有没有办法得到更详细的错误？或者有没有其他人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:29:52.020

我遇到过同样的问题。通过更改 Facebook 应用程序设置中的两项来解决此问题：

1.  为 iOS SSO 配置设置为启用
2.  更新了 iOS Bundle ID，使其与 bundle ID 完全匹配（之前的大小写不同）

不确定哪个项目修复了它，我主要怀疑第一个......但值得检查两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:15:44.897

确保您设备的时间和日期设置正确。当我充电并打开电池没电的 iPod 时，我遇到了这种情况。日期和时间完全错误，当我将它们设置为应有的值时，我得到了 Facebook 登录对话框就好了。

# android - Android Lint 抱怨未在 AndroidManifest 中注册的活动，但它是

> ID：10868431
> 
> 赞同：3
> 
> 时间：2012-06-03T06:41:46.733
> 
> 标签：android, android-manifest, android-activity, android-lint

当我在我的项目上运行 Android Lint 时，我收到以下警告：

> org.slaytanic.SIMLockedRingNotifier.SIMLockedRingNotifierActivity 未在清单中注册
> 
> 问题：确保活动、服务和内容提供者在清单中注册
> 
> 编号：已注册
> 
> 应使用 , 和标签在 AndroidManifext.xml 文件中注册活动、服务和内容提供者。
> 
> 如果您的活动只是一个旨在被其他“真实”活动子类化的父类，请将其设为抽象类。 [http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

**SIMLockedRingNotifierActivity.java**

```
package org.slaytanic.SIMLockedRingNotifier;

public class SIMLockedRingNotifierActivity extends Activity {
    [...] 
```

**AndroidManifest.xml**

```
<application
    android:icon="@drawable/application_icon"
    android:label="@string/app_name" >
    <activity
        android:name=".SIMLockedRingNotifierActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
[...] 
```

我也尝试用完整路径替换活动的*android:name*属性，`android:name="org.slaytanic.SIMLockedRingNotifier.SIMLockedRingNotifierActivity"`但我得到了同样的警告。该应用程序运行良好，并且该活动已正确添加到启动器。我怎样才能摆脱它？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:41:14.743

我在 Eclipse 中使用两个快速应用程序进行了测试，看起来 Lint 无法确定是否将`Activity`使用带有大写字符的“非标准”包名称的包正确添加到`AndroidManifest.xml`.

该问题已记录在他们的[错误跟踪器](http://code.google.com/p/android/issues/detail?id=27529&can=1&q=Lint&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)中。

# php - 在 PHP 中执行事务时遇到问题

> ID：10868434
> 
> 赞同：2
> 
> 时间：2012-06-03T06:42:33.377
> 
> 标签：php, mysql

我无法让 mysql 事务通过 PHP 工作。我对 PHP 很陌生，对 mysql 也很陌生。

如果我使用 $query 的 var_dump 并尝试通过 phpmyadmin 运行它，它工作正常。

```
 $description = 
mysql_real_escape_string($_REQUEST['description']);
  $query = 'BEGIN;
    INSERT INTO indiespark.tasks
(description, owner_user_id)
VALUES ("' . $description . '", ' 
. $user->user_id . '); 
SET @task_id = LAST_INSERT_ID(); 
INSERT INTO indiespark.projecttasks 
(task_id, project_id) 
VALUES (@task_id, ' . $project->project_id . '); 
COMMIT;';
 $result = mysql_query($query);
var_dump($query);
var_dump($result);
if ($result) {
    return viewproject();
} else {
    throw new Exception('database error');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:47:33.130

mysql_query 不支持一次调用发送多个查询。使用单独的调用。

# protocol-buffers - 使用 Google 的 ProtoBuf（和 .proto 文件）创建 Python API 库

> ID：10868435
> 
> 赞同：5
> 
> 时间：2012-06-03T06:42:45.433
> 
> 标签：protocol-buffers

我有开源 Android API (http://code.google.com/p/android-market-api/) 中使用的 .proto 文件，并且在编译文件以生成 .py 时遇到了一些问题。

我正在尝试按照此处的说明进行操作，[https://developers.google.com/protocol-buffers/docs/pythontutorial](https://developers.google.com/protocol-buffers/docs/pythontutorial)，并且正在执行标题“编译您的协议缓冲区”下的步骤。

我已经下载了编译器 protoc.exe。自述文件说“要安装，只需将此二进制文件放在 PATH 中的某个位置”，我不明白。我现在搞砸了一段时间，但想不出如何进行。

我是新手程序员，所以请告诉我是否有不清楚的地方，或者我是否有某种基本的误解......关于任何事情。顺便说一句，我在 Windows 7 上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-22T12:37:06.150

我遇到了同样的问题，因为它在 README.txt 中没有写得那么清楚。他们的意思是： 1\. 将 protoc.exe 与项目的其他文件放在同一个文件夹中。2\. 打开该目录的 cmd 并运行：protoc --cpp_out=。myfile.proto => 这将在文件夹中创建两个新文件，其中包含您的项目文件，然后您可以正常将它们添加到您的程序中。

这对我有帮助：[http ://www.scriptol.com/programming/protocol-buffers-tutorial.php](http://www.scriptol.com/programming/protocol-buffers-tutorial.php)

这是针对 c++ 的，但我想这与 python 类似；我想你只需要更改你在 cmd 中使用的命令 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T07:11:29.470

如果 protoc.exe 不在您调用它的同一目录中，则需要将其添加到 PATH 环境变量中，以便在您在 shell 中时可以从调用目录访问。打开命令外壳并执行：

设置 PATH=%PATH%c:\directory\to\proto\executable；

然后将目录更改为您的源代码所在的位置，并按照谷歌页面的指示执行编译行。

# c# - 哈希函数在尝试失败时返回不同的值错误

> ID：10868447
> 
> 赞同：-1
> 
> 时间：2012-06-03T06:45:39.823
> 
> 标签：c#, mysql

我已经调试这段代码几个小时了，我想我会从其他人看看这个问题中受益。我正在用 C# .net 为我的软件编写登录系统。我在 SHA512 中对密码进行编码。我正在使用[Rush Frisby](http://dotnetrush.blogspot.com/2007/04/c-sha-2-cryptography-sha-256-sha-384.html)编写的散列算法。

此外，我在用户密码上使用了盐和胡椒。

```
// Form1.cs (inside button1_Click)

        // IsConnected is a variable which holds the state of the connection
        // to the server
        if (IsConnected == true)
        {
            UsernameField = textBox1.Text;                  // Fetch the username
            PasswordField = textBox2.Text;                  // Fetch the password

            // The per-user salt is stored in the DB, go get it:
            Salt = MH.GetUserSalt(UsernameField);           // Get the salt for the user

            // Encrypt the salt, pepper and secret keys in SHA512
            Salt = HH.SHA512(Salt);                 // The salt is stored in the DB
            Pepper = HH.SHA512(Pepper);             // The salt is a private field in the current class
            SecretKey = HH.SHA512(Salt + Pepper);   // The secret key = SHA512(Salt + Pepper)

            // Now, with the secret key let's add that to the password after it's encrypted
            PasswordField = SecretKey + (HH.SHA512(PasswordField));     // The password is now secret key + SHA512(password)

            // I am expecting 1 row back from the database:
            success = MH.CheckUser(UsernameField, PasswordField);       // success (bool): Did CheckUser return 1 row? 
```

[间隔]

```
// MySQLHelper.cs
    public bool CheckUser(string username, string password)
    {
        if (IsConnected != true)
        {
            LastError = "Not connected!";
            return false;
        }

        cmd = connection.CreateCommand();
        cmd.CommandText = "SELECT * FROM credentials WHERE Username = '" + username + "' AND Password = '" + password + "'";

        rdr = cmd.ExecuteReader();

        rows = 0;
        while (rdr.Read())
        {
            rows++;
        }

        // Gracefully release resources (rdr)
        ReleaseResources();

        if (rows == 1)
            return true;
        else
            return false;
    } 
```

这始终适用于第一次登录尝试（授予我提供合法凭据），但是如果我第一次尝试失败，第二次尝试（以及任何相应的尝试）将始终返回 0（行），即使凭据是好的（其中应该返回 1 行）。如果我关闭应用程序并重新打开它，也会发生同样的事情。我可以登录，但我必须在第一次尝试时提供良好的凭据，否则其余的将无法正常工作。

正如我所提到的，我已将问题归结为密码字段不匹配。这是将密钥添加到 sha512 编码的用户密码的阶段。让我给你举个例子：

有效（在第一次尝试）：“B045B1FA1FCD4450D34EEEF17414E334B9E928EDB076E3D3D1EE8AF4EF25FD4076B6B228EA4AC53136FDF2BFF3FF780096EA5A63851EADB6133EB537C61CA23ECBE0CD68CBCA3868250C0BA545C48032F43EB0E8A5E6BAB603D109251486F77A91E46A3146D887E37416C6BDB6CBE701BD514DE778573C9B0068483C1C626AEC”

有效（在第二次尝试，但要记住失败）：“B1316286A4628120FF77A53CE11CE0B16DF49358858729E3D01B25CDAFB5194112C982B11AC08424C6637F8F445D2D7A76A41B4857B43D60A54BD9E67FC14F20CBE0CD68CBCA3868250C0BA545C48032F43EB0E8A5E6BAB603D109251486F77A91E46A3146D887E37416C6BDB6CBE701BD514DE778573C9B0068483C1C626AEC”

如您所见，出于某种原因，密码正在被更改。你知道它可能是什么吗？我感谢所有的帮助！

C# Windows 7 x64 Visual Studio 11 MySQL 连接器网络 6.5.4

如果我可以向您提供任何我不小心隐瞒的其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:56:42.633

字符串的第一部分不同，所以你的盐或胡椒已经改变了。密码仍然很好，因为字符串的最后一部分仍然相等。

# jsf - JSF managedBeans 和 JMX managedBeans 是一样的吗？

> ID：10868451
> 
> 赞同：0
> 
> 时间：2012-06-03T06:47:12.163
> 
> 标签：jsf, jmx

也许有点愚蠢的问题，但是 JSF managedBeans 和 JMX managedBeans 是一样的吗？例如，我可以通过 JMX 访问 JSF managedBean 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:05:03.363

不，JMX bean 和 JSF bean 是完全不同的概念。JSF bean 主要可以通过 EL 表达式访问，而 JMX bean 可以使用标准 Java 管理接口访问。

# php - 在 Doctrine 实体中访问 Symfony2 服务层？

> ID：10868452
> 
> 赞同：2
> 
> 时间：2012-06-03T06:47:20.360
> 
> 标签：php, symfony, doctrine-orm, entity, lifecycle

我敢肯定这个标题很有描述性，但是对于一个更深入的问题：**如何访问 Symfony2 的服务层以在 Doctrine 的生命周期回调中使用？**我计划在每次创建/更新/删除时利用这些回调在我的搜索索引（由另一个服务管理）中注册一个实体。

不过，有几件事浮现在脑海中，所以我也不妨问问他们……这是非法的、不好的做法，还是很糟糕？**是否有另一种解决方案可以将涉及服务的逻辑挂钩到实体的生命周期中**，或者我应该将它们完全解耦？

我挖掘任何建议，并准备尝试新事物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:48:46.690

看看这个[食谱](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)条目。

# sqlite - sqlalchemy Sqlite 不加载表行

> ID：10868455
> 
> 赞同：0
> 
> 时间：2012-06-03T06:47:39.430
> 
> 标签：sqlite, sqlalchemy

我正在使用带有 sqlalchemy 的 sqlite：

当我执行这个命令时：

```
engine.execute("select * from teams");
<sqlalchemy.engine.base.ResultProxy object at 0x245b190> 
```

因此，它在返回引用时起作用

我有一个包含 Team 类的 .py 文件：

```
class Team(Base):
        __tablename__ = 'teams'
        id = Column(Integer,autoincrement=False, primary_key=True)
        name = Column(String(255))
        flag = Column(String(255))
        url = Column(String(255)) 
```

我导入团队`from classes import`

但是当我尝试使用 ORM 时，出现以下错误：

```
for instance in session.query(Team):
...     print instance.id
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/orm/query.py", line 2224, in __iter__
    return self._execute_and_instances(context)
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/orm/query.py", line 2239, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/engine/base.py", line 1450, in execute
    params)
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/engine/base.py", line 1583, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/engine/base.py", line 1697, in _execute_context
    context)
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/engine/base.py", line 1690, in _execute_context
    context)
  File "/usr/lib/python2.7/site-packages/SQLAlchemy-0.7.7-py2.7.egg/sqlalchemy/engine/default.py", line 331, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (OperationalError) no such table: teams u'SELECT teams.id AS teams_id, teams.name AS teams_name, teams.flag AS teams_flag, teams.url AS teams_url \nFROM teams' () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:57:02.913

It says it can't find the table teams- confirm with SqlLite ( I use firefox plugin) that it exists and that is the name. Also, copy the SQL in the error message in a Sqlite window and see if it runs.

# asp.net - ASP.net 网站管理问题

> ID：10868456
> 
> 赞同：1
> 
> 时间：2012-06-03T06:47:50.853
> 
> 标签：asp.net, iis-7

基于这个[问题](https://stackoverflow.com/questions/10679772/change-localhost-to-another-domain-name)，我将“localhost”更改为 jeson.com ，例如，当我在 viusal
studio IDE 中运行 login.aspx 网页时，浏览器显示[http://jeson.com/login.aspx](http://jeson.com/login.aspx)
我想使用它在流动的 URL 上运行的 asp.net 网站管理工具（网站菜单 > ASP.Net 配置）：

> localhost:49917/asp.netwebadminfiles/default.aspx applicationPhysicalPath=C:\inetpub\wwwroot\&applicationUrl=/

现在当我想在这个工具中创建新用户时，它给了我错误

```
The following message may help in diagnosing the problem: Invalid viewstate. Client IP: 127.0.0.1 Port: User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 ViewState: ... 
```

我使用 [http://jeson.com:49917](http://jeson.com:49917)代替 localhost，一切都变得正常
，但问题是**每次想要使用此工具时，我必须将 loclahost 更改为 jeson.com，**
但我想自动执行此操作

# java - 软键盘覆盖 PopupWindow 中的 EditText

> ID：10868459
> 
> 赞同：17
> 
> 时间：2012-06-03T06:48:25.947
> 
> 标签：java, android, xml, android-edittext, android-softkeyboard

我整理了一个简单的测试项目，它显示了一个包含 EditText 的 PopupWindow（在 Android 2.2 上）。当我点击 EditText 时，会显示软键盘，正如我所期望的那样。但是，软键盘覆盖了 EditText，我无法让屏幕以我认为应该的方式平移以保持 EditText 处于视图中。我的代码：

TestAdjustPanActivity.java:

```
package com.example;

import android.app.Activity;
import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.PopupWindow;

public class TestAdjustPanActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final PopupWindow pw = new PopupWindow(this);
        pw.setContentView(getLayoutInflater().inflate(R.layout.popup, null, false));
        pw.setWidth(400);
        pw.setHeight(600);
        pw.setFocusable(true);

        pw.setOutsideTouchable(true);
        pw.setTouchable(true);
        pw.setBackgroundDrawable(new BitmapDrawable());

        // This is the line referred to in the edit:
        pw.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);

        findViewById(R.id.main).post(new Runnable() {
            public void run() {
            pw.showAtLocation(findViewById(R.id.main), Gravity.NO_GRAVITY, 0, 0);
            }
        });
    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

popup.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#666666"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/current_password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="40dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="300dp" />
    </LinearLayout>

</ScrollView> 
```

...并且我的 AndroidManifest.xml 确实包含`android:windowSoftInputMode="stateUnspecified|adjustPan"`应用程序中唯一一个活动的标记中的行。

有任何想法吗？SO上与此问题相关的其他帖子都没有为我完成。我错过了什么使视图无法按照我期望的方式平移？

编辑：我尝试按照指示在 TestAdjustPanActivity 中添加一行，这导致屏幕在我拥有的 Android 3.2 设备上完美平移。但是，它仍然无法在我的 Android 2.2 设备上平移，这使得这更加令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:56:55.953

对于将来偶然发现此问题的任何人，我最终只使用了对话框而不是 PopupWindow，并且平移以保持 EditText 在视图中使用对话框在 2.2 上工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:16:45.943

有更简单的方法。只需为活动键盘提供替代布局。

1.  左键单击项目选择：“Android 工具/新资源文件...”。
2.  选择布局，给文件名“main”（不用担心冲突）。
3.  点击下一步”。然后在左侧列表中选择“键盘”并将其向右移动（单击“->”）。
4.  在右侧选择键盘状态。
5.  点击完成。
6.  现在将位于“res/layout”中的 main.xml 的内容复制到 res/layout-keyssoft 中的新文件中。
7.  以键盘不是那样的方式更正新布局。请记住为这两个布局中的各个组件保持相同的“id”（这就是需要复制粘贴的原因）。
8.  享受它的工作原理

阅读[配置更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)以了解其工作原理。请注意，每次配置更改（方向更改、语言更改……）都会导致重新创建 Activity（在这种情况下，onCreate 的参数不为空），因此您可以为不同的情况提供不同的布局。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T05:30:03.630

我怀疑问题是因为`ScrollView`在`XML`,

还有一个与此类似的问题，您可以[在那里检查所有不同的答案](https://stackoverflow.com/questions/8000795/android-keyboared-overlaps-with-the-edittext-with-printscreens)，并且可能对您有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T09:06:28.663

改变这个

```
android:windowSoftInputMode="stateUnspecified|adjustPan" 
```

至

```
android:windowSoftInputMode="adjustPan" 
```

仅在您的清单文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T08:03:49.690

你应该改变

```
android:windowSoftInputMode="stateUnspecified|adjustPan 
```

至

```
android:windowSoftInputMode="stateHidden|adjustPan" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-14T10:14:00.307

花了几个小时才弄清楚，我最终使用了**scrollview**。

显然，当您使用弹出窗口和软输入键盘隐藏您的视图时，没有办法克服这个问题。只是去滚动视图。

# python - 使用 tcpdump 跳过 IP 标头

> ID：10868461
> 
> 赞同：6
> 
> 时间：2012-06-03T06:48:46.330
> 
> 标签：python, udp, tcpdump, ssdp

我`tcpdump`用来调试 SSDP 服务。

```
$ sudo tcpdump -Aq udp port 1900 
```

在打印 UDP 数据包时，在我认为是 IP 和 UDP 标头的 HTTP 标头之前，我遇到了很多乱码。如何禁止打印这些，只打印数据包中的应用程序级数据（包括 HTTP 标头）？

这是一个例子，我不想要的东西`NOTIFY`在第二行之前：

```
14:41:56.738130 IP www.routerlogin.com.2239 > 239.255.255.250.1900: UDP, length 326
E..b..@................l.N..NOTIFY * HTTP/1.1
HOST: 239.255.255.250:1900 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:10:21.320

可悲的是，没有`tcpdump`甚至没有`tshark`捷径可以做你想做的事……我们能做的最好的就是通过文本过滤器运行 STDOUT ……

有些`perl`人`sed`可能会落后于我并缩短它，但它完成了工作......

```
[mpenning@Bucksnort ~]$ sudo tcpdump -Aq udp port 1900 | perl -e 'while ($line=<STDIN>) { if ($line!~/239.255.255.250.+?UDP/) { if ($line=~/(NOTIFY.+)$/) {print "$1\n";} else {print $line;}}}'
NOTIFY * HTTP/1.1
HOST: 239.255.255.250:1900

[mpenning@Bucksnort ~]$ 
```

如果添加换行符，`STDIN`上面列出的 perl 过滤器是...

```
while ($line=<STDIN>) {
    if ($line!~/239.255.255.250.+?UDP/) {
        if ($line=~/(NOTIFY.+)$/) {
            print "$1\n";
        } else {
            print $line;
        }
    }
} 
```

# python - Python Flask 为 example.com 和 www.example.com 设置 cookie

> ID：10868468
> 
> 赞同：7
> 
> 时间：2012-06-03T06:51:35.407
> 
> 标签：python, cookies, flask

我正在尝试返回为 example.com 和 www.example.com 设置 cookie 的响应。我只能为请求来源的域设置 cookie。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-03T07:50:29.247

啊! set_cookie() 有一个域参数。

```
response.set_cookie('name', 'value', domain='.example.com') 
```

问题解决了。

# php - 我想知道我可以使用 JQuery $.post 上传文件吗？

> ID：10868472
> 
> 赞同：0
> 
> 时间：2012-06-03T06:51:55.470
> 
> 标签：php, jquery, ajax, .post

> **可能重复：**
> [如何使用 jQuery 异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)
> [jQuery Ajax 文件上传](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

我使用 $.post 将表单数据发送到 php 页面以添加到数据库。我想知道我可以使用相同的方式上传文件吗？或者我必须使用 JQuery 插件来做到这一点？这是我的代码：

```
$.post("demo.php",{name:$("#name").value,family:$("#family").value},function(result){
   $("#message").html(result);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:58:58.687

I'm not 100% sure about uploading a file via the post command using jQuery, but frankly it's just easier to use a plugin that can also handle cool HTML 5 support like drag and drop. One that I found worked really well is [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

And it's under the MIT license, so you should be good in that perspective.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:10:20.313

不，您不能使用管理异步文件上传`$.post`

改用插件，我使用了[Blueimp](https://github.com/blueimp/jQuery-File-Upload)，它给了我很好的结果。

# php - 面向 Python 程序员的 PHP：UTF-8 问题

> ID：10868473
> 
> 赞同：2
> 
> 时间：2012-06-03T06:52:36.760
> 
> 标签：php, python, mysql, apache, utf-8

我有一个开源 PHP 网站，我打算修改/翻译它（主要是常量字符串），以便日本用户可以使用它。

原始代码是PHP+MySQL+Apache，用英文写成`charset=utf-8`

例如，我想将“登录”一词更改为日语对应的“ログイン”等

我不确定是否必须将 PHP 代码保存为 utf-8 格式（就像 Python 一样）？

我只有 Python 的经验，那么我应该注意哪些其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:56:45.987

If it's in the file, then yes, you will need to save the file as UTF-8.

If it's is in the database, you do not need to save the PHP file as UTF-8.

In PHP, strings are basically just binary blobs. You will need to save the file as UTF-8 so the correct bytes are read in. In theory, if you saved the raw bytes in an ANSI file, it would still be output to the browser correctly, just your editor would not display it correctly, and you would run the risk of your editor manipulating it incorrectly.

Also, when handling non-ANSI strings, you'll need to be careful to use the multi-byte versions of string manipulation functions (str_replace will likely botch a utf-8 string for example).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:33:12.487

很抱歉您在使用 Python 后必须使用 PHP。

PHP 没有字符集的概念：所有字符串都是二进制的，即使在解析的 php 代码中也是如此，因此如果您在 php 字符串中包含 UTF-8 多字节字符，请确保代码文件中的字节为 UTF-8 字节。

您需要[非常小心地](http://www.phpwact.org/php/i18n/utf-8)在应用程序的各个级别使用字符串函数。您还需要确保您的 MySQL 连接设置为使用 UTF-8（在 PDO 的更高版本中使用`SET NAMES`或`charset`dsn 参数），并且您的 mysql 字符串列数据类型使用 utf-8 存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:58:42.150

If the file contains UTF-8 characters then save it with UTF-8\. Otherwise you can save it in any format. One thing you should be aware of is that the PHP interpreter does not support the UTF-8 byte order mark so make sure you save it without that.

# python - 如何使用 python urllib2.urlopen 打开 facebook/gmail/authencation 站点？

> ID：10868474
> 
> 赞同：2
> 
> 时间：2012-06-03T06:53:15.570
> 
> 标签：python, authentication, proxy, urllib2, web-based

我正在尝试使用 python 编写一个基于 Web 的小型代理，我可以获取并显示普通网站，但我无法登录到 facebook/gmail/...任何使用 login 的东西。我在这里看到了一些身份验证示例 [http://docs.python.org/release/2.5.2/lib/urllib2-examples.html](http://docs.python.org/release/2.5.2/lib/urllib2-examples.html)但我不知道如何为所有登录的网站制定通用解决方案， 任何想法？

我的代码是：

```
def showurl():
    url=request.vars.url
    response = urllib2.urlopen(url)
    html = response.read()
    return html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:59:04.500

您的代理服务器需要存储 cookie，在 stackoverflow 中搜索 cookielib。

许多网站以不同的方式对客户端进行身份验证，因此您的工作是使用您的代理服务器尽可能多地伪造客户端。一些网站通过浏览器类型进行身份验证，一些网站通过创建 cookie 并将 sessionId 存储在其中，或者其他允许执行一些身份验证步骤的 JavaScript 隐藏内容。就我的小经验而言，所有重要的东西都以饼干结尾。

这只是如何使用 cookielib 的简单示例。

```
import urllib, urllib2, cookielib, getpass

username = ''
button = 'submit'
www_login = 'http://website.com'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
opener.addheaders.append(('User-agent', 'Mozilla/4.0'))
opener.addheaders.append( ('Referer', '/dev/null') )

login_data = urllib.urlencode({'username' : username, 'password': getpass.getpass("Password:"), 'login' : button})
resp = opener.open(www_login, login_data)
print resp.read() 
```

已编辑：不要用“基本 HTTP 身份验证”和 facebook/gmail 身份验证误导自己，因为它是不同的东西。“基本 HTTP 身份验证”或“摘要 HTTP 身份验证”由 Web 服务器完成，而不是您要登录的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:43:08.770

[http://www.voidspace.org.uk/python/articles/authentication.shtml#id24](http://www.voidspace.org.uk/python/articles/authentication.shtml#id24)

# html - css3 媒体查询 AND 语句

> ID：10868477
> 
> 赞同：1
> 
> 时间：2012-06-03T06:54:03.597
> 
> 标签：html, css, media-queries

我的跨浏览器/跨分辨率 CSS 存在问题，因此我查看了媒体查询，其中一个问题是基于 WebKit 的浏览器似乎出于某种原因呈现高度与基于 Gecko 的浏览器不同。（说实话，这可能与我糟糕的 CSS 技能有关）

除此之外，WebKit 浏览器似乎呈现的高度与 1366x768 分辨率所需的高度相同。

所以我的问题是：有没有办法只为 webkit 浏览器和特定分辨率进行媒体查询？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:13:15.740

是的，你可以写类似

```
@media screen and (min-device-pixel-ratio: 1.5) and (max-width: 480px) {...} 
```

你可以在这里阅读[http://menacingcloud.com/?c=highPixelDensityDisplays](http://menacingcloud.com/?c=highPixelDensityDisplays)

# c++ - cin.get() 有效，但 cin.getline() 无效。我对 cin.getline() 做错了什么或误解了什么？

> ID：10868479
> 
> 赞同：1
> 
> 时间：2012-06-03T06:55:26.047
> 
> 标签：c++, user-input, getline, cin

我是一名正在准备期末考试的 C++ 初学者。我用两种方式编写了一个程序。第一个代码使用`cin.getline()`并且无法正常工作。第二个代码使用`cin.get()`并`cin >>`正确执行所有操作。

我错过了什么？为什么示例 1 中的情况会跳过其余的输入提示，然后输入无用的数字？

本质上不`cin.getline(ARRAYNAME,ARRAYSIZE)`应该做`setw(n)`,`cin.get(ARRAYNAME,ARRAYSIZE)`和的工作`cin.ignore(int,char)`吗？通过 `cin.getline(ARRAYNAME,ARRAYSIZE)`提取`ARRAYSIZE-1`字符，将它们放入`ARRAYNAME`，在末尾添加 a`\0`并跳过除此之外的所有内容，直到`\n`默认情况下...

> **编辑**：为了提供更多背景知识，这个例子来自我教科书的前面部分（第 3 章和第 4 章）。我想跟随它的进展，并在一些早期的、容易忘记的概念上刷新我的记忆。稍后我将回顾字符串、`string`库和`string`类（第 10 章）。

谢谢您的帮助！

——啊08

PS ISBN 编号设置为保存 ISBN-13（13 个数字，4 个连字符）。

## 用户输入书籍信息 - 示例 1（无法正常工作）

```
/*
In this version, I use "cin.getline(ARRAYNAME,ARRAYSIZE)",
but when I input a string with a length that's larger than the ARRAYSIZE,
weird things happen.

I include the cin.ignore(int,'\n') as a safety measure...
but is it really necessary?
*/

//BEGIN PROGRAM CODE

#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    char date[9];
    char ISBN[18];
    char bookTitle[31];
    int quantity;
    double unitPrice;

    cout << "Please enter the following information.\n";

    // Input Date
    cout << "Date (in MM/DD/YY format): ";
    cin.getline(date,9);

    // Display Date
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << date << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Quantity
    cout << "Quantity of Books: ";
    cin >> quantity;
    cin.ignore(512,'\n');

    // Display Quantity
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << quantity << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input ISBN
    cout << "ISBN (including hyphens): ";
    cin.getline(ISBN,18);

    // Display ISBN
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << ISBN << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Title
    cout << "Book Title: ";
    cin.getline(bookTitle,31);

    // Display Title
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << bookTitle << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Price
    cout << "Unit Price: ";
    cin >> unitPrice;
    cin.ignore(512,'\n');

    // Display Price
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << unitPrice << endl;
    cout << "------------------" << endl;
    cout << endl;

    cout << endl;
    system("pause");
    return 0;
}

//END PROGRAM CODE

//BEGIN PROGRAM OUTPUT

/*
Please enter the following information.
Date (in MM/DD/YY format): 12/03/1970

------------------
*** 12/03/19
------------------

Quantity of Books:
------------------
*** 2000596547
------------------

ISBN (including hyphens):
------------------
***
------------------

Book Title:
------------------
***
------------------

Unit Price:
------------------
*** -1.#QNAN
------------------

Press any key to continue . . .
*/ 
```

## 用户输入书籍信息 - 示例 2（工作正常）

```
/*
In this version, I use "cin >> setw(ARRAYSIZE) >> ARRAYNAME"
or "cin.get(ARRAYNAME, ARRAYSIZE)" and follow either instance
with a "cin.ignore(int,'\n')", then everything works perfectly.
*/

//BEGIN PROGRAM CODE

#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    char date[9];
    char ISBN[18];
    char bookTitle[31];
    int quantity;
    double unitPrice;

    cout << "Please enter the following information.\n";

    // Input Date
    cout << "Date (in MM/DD/YY format): ";
    cin >> setw(9) >> date;
    cin.ignore(512,'\n');

    // Display Date
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << date << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Quantity
    cout << "Quantity of Books: ";
    cin >> quantity;
    cin.ignore(512,'\n');

    // Display Quantity
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << quantity << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input ISBN
    cout << "ISBN (including hyphens): ";
    cin >> setw(18) >> ISBN;
    cin.ignore(512,'\n');

    // Display ISBN
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << ISBN << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Title
    cout << "Book Title: ";
    cin.get(bookTitle,31);
    cin.ignore(512,'\n');

    // Display Title
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << bookTitle << endl;
    cout << "------------------" << endl;
    cout << endl;

    // Input Price
    cout << "Unit Price: ";
    cin >> unitPrice;
    cin.ignore(512,'\n');

    // Display Price
    cout << endl;
    cout << "------------------" << endl;
    cout << "*** " << unitPrice << endl;
    cout << "------------------" << endl;
    cout << endl;

    cout << endl;
    system("pause");
    return 0;
}

//END PROGRAM CODE

//BEGIN PROGRAM OUTPUT

/*
Please enter the following information.
Date (in MM/DD/YY format): 12/03/1970

------------------
*** 12/03/19
------------------

Quantity of Books: 200

------------------
*** 200
------------------

ISBN (including hyphens): 0-123-45678-90xxxxxx

------------------
*** 0-123-45678-90xxx
------------------

Book Title: Anthony Goes to Hollywood, Summer 2012 Edition

------------------
*** Anthony Goes to Hollywood, Sum
------------------

Unit Price: 12.00

------------------
*** 12
------------------

Press any key to continue . . .
*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:26:42.197

> 提取字符直到提取 (n - 1) 个字符或找到分隔符（如果指定了此参数，则为 delim，否则为 '\n'）。如果在输入序列中到达文件末尾或在输入操作期间发生错误，提取也会停止。
> 
> 如果找到分隔符，则将其提取并丢弃，即不存储，然后开始下一个输入操作。如果您不想提取此字符，则可以使用 member get 代替。
> 
> 表示 c 字符串结束的结束空字符会自动附加到 s 提取的数据之后。
> 
> 如果函数因为达到此大小而停止读取，则设置故障位内部标志。

如果它达到缓冲区大小并设置故障位标志，我认为直到 '\n' 的左侧字符的过程将取决于编译器的实现。如果你的编译器设置了它的失败位，你可能需要更多的过程来忽略'\ n'或使用cin.clear()。

但建议使用字符串而不是字符数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:14:30.423

你试过写更小的字符串吗？或者你可以尝试给 cin.getline 更多的字符。

我相信您的读取错过了字符串末尾的“\n”，并且一旦您尝试写入它，就没有空终止符来完成写入。

铁`cin.getline(date, 10)`

# objective-c - 如何在视图中居中 NSTextField

> ID：10868480
> 
> 赞同：6
> 
> 时间：2012-06-03T06:55:36.030
> 
> 标签：objective-c, xcode, cocoa, interface-builder, nstextfield

我在带有文本“__DRAG_AND_DROP_YOUR_MEDIA_HERE”的视图中有一个以 IB 为中心的 NSTextField（标签）。在我的控制器中使用 NSLocalizedString 来翻译文本：

English.lproj/Localizable.strings ：

```
"__DRAG_AND_DROP_YOUR_MEDIA_HERE" = "Drag & Drop your media here" 
```

French.lproj/Localizable.strings ：

```
"__DRAG_AND_DROP_YOUR_MEDIA_HERE" = "Déposer vos média ici" 
```

只有初始文本“__DRAG_AND_DROP_YOUR_MEDIA_HERE”在视图中居中。翻译后的文本不是 centerrd（取决于长度）。所有翻译文本都以与原始文本相同的横坐标 x 开始。我该如何解决这个问题？

PS：我不想仅仅为了这样一个简单的点而使用 setFrame、height、width 。我想还有另一种方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T07:08:26.647

将文本字段的对齐方式设置为`NSCenterTextAlignment`。您可以从 IB 或以编程方式使用`-setAlignment:`.

# node.js - 是否有选项标志可以忽略 uglifyjs 中的任何 javascript 错误？

> ID：10868484
> 
> 赞同：0
> 
> 时间：2012-06-03T06:56:23.023
> 
> 标签：node.js, uglifyjs

我在 node.js 中使用 uglifyjs 模块。当我使用以下命令缩小我的脚本时，我从 uglifyjs 收到一个 javascript 解析错误。有没有办法忽略它？

我喜欢在浏览器中检查我的 js 错误，而不是使用 uglifyjs。

**猫文件1.js 文件2.js | uglifyjs -o 缩小的.js**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:17:43.507

Uglification/minification 工具需要完全重写你的 javascript。不可能总是以一种能够完整保留错误的方式重写它，而且这些工具的作者肯定不会浪费时间来实现它。

# mysql - Using Mysql Set Field Type

> ID：10868485
> 
> 赞同：0
> 
> 时间：2012-06-03T06:56:23.883
> 
> 标签：mysql

I want to implement a badge modification to my website, i figured that I would have one new column in my mysql database to store number variables in them, and then i can display badges based on what number is in the mysql column for each user, should i use the SET field type to accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:15:18.537

我建议你创建两个表：

1.  `badges`，包含每个徽章的详细信息；
2.  `userbadges`，包含一对外键 - 用户的外键和该用户拥有的徽章的外键。

这具有`SET`使您能够在不更改架构的情况下添加/删除/更改徽章的优势，并且还可以以最少的重复从其他表中引用徽章。

# ruby-on-rails-3 - RSpec giving an error on every action in controller?

> ID：10868489
> 
> 赞同：0
> 
> 时间：2012-06-03T06:56:56.810
> 
> 标签：ruby-on-rails-3, rspec, tdd

this is weird, I'm running `bundle exec guard` on my rails application and I'm getting a long list of errors for every single action in one solitary container. And all the errors are exactly teh same and make no sense, this is what I'm getting for all the actions:

```
1) PriceProfilesController GET index assigns all price_profiles as @price_profiles
     Failure/Error: Unable to find matching line from backtrace
     ArgumentError:
       wrong number of arguments (1 for 0)
     # ./app/controllers/price_profiles_controller.rb:15:in `extend'

  2) PriceProfilesController GET show assigns the requested price_profile as @price_profile
     Failure/Error: Unable to find matching line from backtrace
     ArgumentError:
       wrong number of arguments (1 for 0)
     # ./app/controllers/price_profiles_controller.rb:15:in `extend'

... and so forth 
```

Any idea whats going on? The PriceProfileContainer is pretty much a standard scaffold. Where should I be looking at here. The spec files are autogenerated by the scaffold.

UPDATE ----

Here is the Extend function in my controller code:

```
# GET /price_profiles/1/extend
  def extend
    @price_profile = PriceProfile.find(params[:id])
    @products = Product.all()
    @locations = Location.all()
    @price_profile_date_range = PriceProfileDateRange.new()

    #respond_to do |format|
    #  format.html # extend.html.erb      
    #end
  end 
```

Thats pretty much it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:59:40.807

[`extend`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-extend)是一个核心 ruby​​ 方法，允许您将模块的方法添加到对象（有点像包含）

有些东西（你可以通过查看回溯的其余部分来判断）试图在你的控制器的一个实例上调用 extend，期望核心 ruby​​ 的 extend 方法，它需要 1 个参数）而是找到你的 extend 方法，它不带参数（当然做一些完全不同的事情）。

最简单的方法是为您的方法选择一个不同的名称

# google-app-engine - Why have the GAE cold starts gotten worse lately?

> ID：10868491
> 
> 赞同：2
> 
> 时间：2012-06-03T06:57:14.953
> 
> 标签：google-app-engine

For some time the cold start times for GAE applications have been ok, but now they have started to be really long again. Now (since a couple of days ago) it usually takes many seconds to access a webpage from an app with low traffic. That's totally unacceptable long time for ordinary webpages.

# php - How do I create a web service that will display in a browser and on an android?

> ID：10868492
> 
> 赞同：1
> 
> 时间：2012-06-03T06:57:21.367
> 
> 标签：php, android, web-services, rest

My web development experience has mostly been setting up a CMS like Wordpress or Drupal and creating custom themes. Actually work in server-size coding has been very minimal. I've played around with php a little, trying to mod off of phpBB and beginning to learn some MVC work with CodeIgniter. Overall, this seems like a pretty big step forward, but it's something I need (I think) to do for a project I am working on.

Essentially what I want to do is have a service like Twitter of Facebook (not in the social networking sense); a user is able to log into the site and perform various operations, while also being able to use an android application that supports limited operations.

After some Googling and reading articles on the internet, it appears REST is the way to go. But I can't quite seem to grasp some of the technical details. I understand how the HTTP Request/Response works, but I don't know how I can code everything server side so that visiting example.com/item/1 will bring up the details of *item 1* in the browser and can also perform a GET Request in my Android app so it can grab the details from the database and display in on the site.

Any suggested readings or some tips on how to execute this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:17:39.783

您可以使用 MVC 来实现这一点。默认情况下，让控制器向模型询问项目的详细信息，然后将信息传递给视图。对您想要接受的每种类型的请求（例如 POST、PUT 等）重复此过程，您在控制器中定义一个新函数，要求模型执行相应的数据库操作，并将响应返回给视图。

[这里](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)有使用 CodeIgniter 启动和运行 REST 服务器的有用教程

# jquery - Display issues when we change from one jquery mobile page to another in firefox

> ID：10868493
> 
> 赞同：2
> 
> 时间：2012-06-03T06:57:51.557
> 
> 标签：jquery, firefox, jquery-mobile

I have a multi page template developed in jquery mobile.The problem I am facing is whenever I navigate from one page to another in Firefox(desktop.Version 12),the backgrounds of buttons,listview etc disappear at first,but their labels stay for a while.By that time the content of the second page appears.For a split second,the labels of the previous page is superimposed on the new page.Though it stays for a split second only,it looks weird since there are a number of components in the page.I know page transitions will not work with firefox and I am ok with that.But this rendering issue should not happen.

Code I am using:

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

    </head>

    <body>
        <div data-role="page" id="page1">
            <div data-role="header">
                <h1>Page1</h1>
            </div>
            <button>button</button>
            <button>button</button>
            <button>button</button>
            <button>button</button>
            <button>button</button>
            <div data-role="content">
                <ul data-role="listview" data-inset="true">
                    <li>
                        <a href="#page2">aaa</a>
                    </li>
                    <li>
                        <a href="#page2">aaaaa</a>
                    </li>
                    <li>
                        <a href="#page2">bbbbbbbb</a>
                    </li>
                </ul>
            </div>
        </div>
        <div data-role="page" id="page2">
            <div data-role="header" >
                <h1>Page 2</h1>
                <a href="#page1"  data-back-btn="true"  data-icon="back" class="ui-btn-left">Back</a>
            </div>
            <div data-role="content">
                This content is for page 2..
                <ul data-role="listview" data-inset="true">
                    <li>
                        <a href="#page1">BBBBBBBB</a>
                    </li>
                    <li>
                        <a href="#page1">WWWWWWWWWW</a>
                    </li>
                    <li>
                        <a href="#page1">FFFFFFFFFFFFFFFFFF</a>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

A demo here - [http://jsfiddle.net/5FZb7/](http://jsfiddle.net/5FZb7/)

**Note**:

If I use jquery mobile 1.1 version,this issue is not happening.But in my project I have to use the legacy version 1.0.1 since we have already used it for most part of the project and dont want to upgrade to 1.1 at this moment.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:11:07.553

实际上不知道，为什么它起作用，但指定`data-transition`修复它。
最有趣的是，即使`data-transition="fade"`应该默认应用，也修复了它。

```
 <a href="#page1" data-transition="fade">I am good for FF12</a>
   <a href="#page1">And I am bad</a> 
```

# android - Activity inside another activity onCreate() method

> ID：10868495
> 
> 赞同：2
> 
> 时间：2012-06-03T06:58:21.550
> 
> 标签：android, android-activity

I'm trying to include one activity inside another.

```
<include
    android:id = "@+id/includedactivity"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    layout="@layout/maintabactivity" /> 
```

I can see all included's activity controls, but onCreate method of maintabactivity is never get called.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:59:54.503

```
<include
android:id = "@+id/includedactivity"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
layout="@layout/maintabactivity" /> 
```

only includes the layout in your current layout file in the view rather then it would not call the oncreate method of any other activity. I think you want to launch another activity to show the new layout.

```
 Intent intent = new Intent();
    intent.setClass(getApplicationContext(), NewActivity.class);
    startActivity(intent); 
```

# java - how to calculate all points(longitude,latitude) within a given radius from given point (longitude,latitude)?

> ID：10868501
> 
> 赞同：0
> 
> 时间：2012-06-03T06:59:50.087
> 
> 标签：java, geolocation, latitude-longitude

I have a given point (longitude,latitude) and I want to get all the points ranges that comes lets say 5 miles radius in given point?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T07:13:33.183

我只是在这里猜测，但我认为您需要找到不同的方法。如果您尝试使用 Foursquare、Google Maps 等来查找您当前位置 5 英里半径内的地点，我想您会发现这些服务*不会*计算该半径内的所有点，并且然后将它们与这些点的位置相匹配。

代码背后可能会有一些聪明的人做这样的事情......

1.  获取用户当前位置
2.  找到当前位置所在的郊区（或者找不到，找到城市）。还要找到与此相邻的所有周边郊区。
3.  查找这些郊区内的所有地点，并计算它们与当前用户位置的距离

这种过程是这些服务可以采用的一种潜在方法。这处理位置比较的一小部分，执行起来相对较快。此外，地图上的地点通常都有与之关联的郊区/城市，因此数据库查找地点会相当快，因为​​会有一个涉及郊区的索引。

如果您的目标是做这样的事情，我会尝试找出一种不同的方法来比较点，而不是简单地尝试计算半径内的所有内容。

当然，还有很多特定的算法可以更好地计算，但这不是我的专业领域，更适合另一个论坛。我并不是说这是最好的方法，但还有很多其他方法可以依赖已知的位置数据，这些数据比您建议的要求更快、更智能。

# equality - Turning a <= b to suc a <= suc b

> ID：10868502
> 
> 赞同：3
> 
> 时间：2012-06-03T06:59:50.527
> 
> 标签：equality, agda

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:44:13.837

查看小于或等于关系的 s<=s 构造函数。请在课程论坛上提问，而不是在堆栈溢出上提问。

# zend-framework - Zend_Session_Namespace and setExpirationSeconds

> ID：10868506
> 
> 赞同：0
> 
> 时间：2012-06-03T07:00:10.480
> 
> 标签：zend-framework, zend-session

I have problem for set a timeout on Zend_Auth Session this is my code :

```
$authSession = new Zend_Session_Namespace('Zend_Auth');
$authSession->setExpirationSeconds(60*60*24*1); 
```

This code should make session expire after 1 day but actualy session expire after about 30 min. Anyone know what's wrong ? Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T19:58:45.287

默认[session.gc_maxlifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)值`php.ini`指定在多少秒后会话数据将被视为“垃圾”，为 24 分钟。

调用`Zend_Session_Namespace::setExpirationSeconds()`是 Zend Framework 内部的，对会话 cookie 本身或服务器上的会话数据没有影响。

确保相应地调整您的`session.gc_maxlifetime`值，以便 PHP 不会在您希望之前删除数据。您可以直接在其中设置它，`php.ini`也可以`ini_set`在引导程序中的某个位置使用，或者从 ZF`application.ini`文件中使用类似的东西`resources.session.gc_maxlifetime = 864000`

另请参阅：[使用 Zend_Session::rememberMe 持久登录的](https://stackoverflow.com/questions/9537305/persisted-login-with-zend-sessionrememberme/9539452#9539452)
第 2 段[如何在 PHP 中创建持久会话？](https://stackoverflow.com/questions/9797913/how-do-i-create-persistent-sessions-in-php/9797962#9797962)[Zend Framework 不活动后自动注销](https://stackoverflow.com/questions/9344577/zend-framework-automatic-logout-after-inactivity/9347745#9347745) 的第 4 段

# ruby-on-rails - 使用 url 模拟注销

> ID：10868515
> 
> 赞同：2
> 
> 时间：2012-06-03T07:02:03.407
> 
> 标签：ruby-on-rails, url, routing

当我做：

```
http://localhost:3000/signout 
```

它说：

```
No route matches [GET] "/signout" 
```

这是因为在我的路由配置文件中我有：

```
match '/signout', to: 'sessions#destroy', via: :delete 
```

所以我的问题是是否可以通过 URL 发送“删除”请求，而不是按链接：

```
<%= link_to "Sign out", signout_path, :method => :delete %> 
```

我可以通过 URL 模仿动作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:35:37.600

并不真地。尽管`DELETE`是 HTTP 规范的一部分，但几乎所有的 Web 浏览器都只知道如何发出`GET`和`POST`请求。当您`link_to`使用`:delete`方法单击 a 时，Rails 实际上会动态创建一个表单并将其“发布”回服务器。看看[源代码](https://github.com/rails/jquery-rails/blob/master/vendor/assets/javascripts/jquery_ujs.js#L164)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:22:49.733

如果您将浏览器指向`http://localhost:3000/signout`，则会生成一个`GET`与任何路由都不匹配的请求。

如果您单击生成的链接`<%= link_to "Sign out", signout_path, :method => :delete %>`，那么您将获得所需的`DELETE`请求。换句话说，您的代码有效。

如果您没有在此路线上使用其他方法，请考虑重构为：

```
delete '/signout', to: 'sessions#destroy' 
```

编辑：请记住，对于 Rails，`DELETE`请求只是一个`POST`请求，其参数`_method`设置为`'delete'`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T07:09:00.703

```
match ':controller(/:action(/:id))(.:format)' 
```

确保在最后的路由器中停用此功能并尝试一次。

# php - 将年龄转换为当前日期

> ID：10868516
> 
> 赞同：5
> 
> 时间：2012-06-03T07:02:18.310
> 
> 标签：php, sqlite

是否有任何 PHP 函数可以将当前年龄转换为日期`YYYY-MM-DD`格式。我以格式存储 DOB，`YYYY-MM-DD`我想运行 SQLite 查询：

```
SELECT FirstName FROM mytable WHERE DOB >= $MinAge AND DOB <= '$MaxAge'; 
```

我搜索了谷歌将年龄转换为日期格式，但找不到任何功能，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T07:22:08.117

> 是否有任何 PHP 函数可以将当前年龄转换为日期

不，年龄包含的信息少于日期。一个人有 365 种可能成为 X 岁，但出生日期恰好对应一个年龄。

换句话说，如果我告诉你我 20 岁，并要求你告诉我我的生日，你不能确定。但是，如果我告诉你我的生日，那么你可以肯定地告诉我我的年龄。

由于您的列名为 DOB，因此我假设您存储了出生日期，而不是年龄。在这种情况下，可以获取某个年龄段的用户。

* * *

假设您要查找年龄在 18 到 50 岁之间（包括 18 到 50 岁）的所有用户。

对于今天 18 岁的用户，他的生日必须是：

*   之前或之后`today - 18 years`
*   后`today - 19 years`

对于今天 50 岁的用户，他的生日必须是：

*   之前或之后`today - 50 years`
*   后`today - 51 years`

请注意，“之前或之后”和“之后”分别只是“<=”和“>”。

那么，如果您想要所有年龄在 18 到 50 岁之间的用户怎么办？

您可以只采用两个外部边界：

用户的年龄在 18 到 50 岁之间，如果：
`dob <= (today -18 years) and dob > (today - 51 years)`

```
$lower = date('Y-m-d', strtotime('today -18 years'));
$upper = date('Y-m-d', strtotime('today -51 years'));
$query = "SELECT FirstName FROM users WHERE dob >= '$lower' AND dob < '$upper';"; 
```

请注意，如果您计划在 1970 年（52 岁左右）之前的日期，您可能应该使用[DateTime](http://php.net/datetime)而不是 date 和 sttrtotime（我实际上只在实际代码中使用 DateTime，但 date/strtotime 用于更简短的示例）。

85 年前的 DateTime 示例：

```
$d = new DateTime('today -85 years');
$s = $d->format('Y-m-d'); //1927-06-03 as of 3 June 2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-09T03:54:58.633

要将当前年龄转换为生日，请使用以下代码：它与我一起正常工作

```
function age_To_Birthday($age) {
    $days = (int)($age * 365); //convert age to days

    $date = new DateTime("today -$days day");
    $birthday = $date->format('Y-m-d');
    return $birthday;
} 
```

测试结果：

```
echo age_To_Birthday(1)     . "<br>"; //2017-09-09
echo age_To_Birthday(5)     . "<br>"; //2013-09-10
echo age_To_Birthday(1.5)   . "<br>"; //2017-03-11
echo age_To_Birthday(1.25)  . "<br>"; //2017-06-10
echo age_To_Birthday(0.25)  . "<br>"; //2018-06-10
echo age_To_Birthday(0.5)   . "<br>"; //2018-03-11
echo age_To_Birthday(0.75)  . "<br>"; //2017-12-10 
```

# c# - 拆分字符串并仅获取第一个值

> ID：10868517
> 
> 赞同：30
> 
> 时间：2012-06-03T07:02:32.133
> 
> 标签：c#

我想知道是否可以使用 split 来划分一个字符串，其中几个部分用逗号分隔，如下所示：

```
title, genre, director, actor 
```

我只想要第一部分，每个字符串的标题而不是其余部分？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-03T07:14:09.047

```
string valueStr = "title, genre, director, actor";
var vals = valueStr.Split(',')[0]; 
```

vals 会给你标题

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-03T07:04:18.673

实际上，有比拆分更好的方法：

```
public string GetFirstFromSplit(string input, char delimiter)
{
    var i = input.IndexOf(delimiter);

    return i == -1 ? input : input.Substring(0, i);
} 
```

并作为扩展方法：

```
public static string FirstFromSplit(this string source, char delimiter)
{
    var i = source.IndexOf(delimiter);

    return i == -1 ? source : source.Substring(0, i);
}

public static string FirstFromSplit(this string source, string delimiter)
{
    var i = source.IndexOf(delimiter);

    return i == -1 ? source : source.Substring(0, i);
} 
```

用法：

```
string result = "hi, hello, sup".FirstFromSplit(',');
Console.WriteLine(result); // "hi" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-03T07:07:34.827

你能行的：

```
var str = "Doctor Who,Fantasy,Steven Moffat,David Tennant";

var title = str.Split(',').First(); 
```

你也可以这样做：

```
var index = str.IndexOf(",");
var title = index < 0 ? str : str.Substring(0, index); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T20:34:11.000

这是我设法构建的两个选项，没有使用`var`类型的奢侈，也没有在线上的其他变量：

```
string f = "aS.".Substring(0, "aS.".IndexOf("S"));
Console.WriteLine(f);

string s = "aS.".Split("S".ToCharArray(),StringSplitOptions.RemoveEmptyEntries)[0];
Console.WriteLine(s); 
```

这就是它得到的：

[![在此处输入图像描述](../Images/dcdf058aaf286ce31b64bca37a070230.png)](https://i.stack.imgur.com/xZNfT.png)

# asp.net - 如何将 VB.NET 中的 List 序列化为 JSON

> ID：10868524
> 
> 赞同：1
> 
> 时间：2012-06-03T07:03:50.793
> 
> 标签：asp.net, asp.net-mvc, vb.net, web-services

我有以下代码将消息列表转换为`json` ：

```
Public Class MessageService
    <OperationContract()> _
    Public Function GetMessage(Id As Integer) As String

        Dim msg As New Message()
        Dim stream As New MemoryStream()
        Dim serializer As New DataContractJsonSerializer(GetType(NewMessage))

        Dim dtMessages = msg.getUnreadMessages("3A3458")

        Dim list As New ArrayList

        Dim m As New NewMessage()
        m.Id = 1
        m.Text = "mmsg"
        list.Add(m)
        list.Add(m)
        serializer.WriteObject(stream, list)

        stream.Position = 0
        Dim streamReader As New StreamReader(stream)
        Return streamReader.ReadToEnd()
    End Function
End Class 
```

但我收到以下错误：

```
 The server was unable to process the request due to an internal error. 
 For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, 
or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:38:16.117

这里：

```
Dim serializer As New DataContractJsonSerializer(GetType(NewMessage)) 
```

您向序列化程序指示您要序列化一个`NewMessage`实例。

和这里：

```
serializer.WriteObject(stream, list) 
```

你正在传递一个`Arraylist`. 这显然是模棱两可的。我建议您修改您的方法，使其直接返回强类型集合并将 JSON 序列化留给绑定，而不是在数据合同中编写管道代码：

```
Public Class MessageService
    <OperationContract()> _
    Public Function GetMessage(Id As Integer) As List(Of NewMessage)
        Dim list As New List(Of NewMessage)
        Dim m As New NewMessage()
        m.Id = 1
        m.Text = "mmsg"
        list.Add(m)

        Return list
    End Function
End Class 
```

# python - 如何解码 powerprofiles.com 返回的响应

> ID：10868527
> 
> 赞同：3
> 
> 时间：2012-06-03T07:05:23.600
> 
> 标签：python, string-decoding

使用python2.7.3 IDLE

```
urllib2.urlopen( "http://www.powerprofiles.com/search?keyword=wholesale&location=&ctry=&sls=&yrs=&emps=&sort=").read() 
```

它返回我以下响应数据。

```
'\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03\xed\\}s\xa2\xc8\xd6\xff\xfb\xa6j\xbeC/\xf7\xb9C\xa6\x10Q\x14_&\xca>\x88\x988Aq\x01\'\x93\xdd\xda\x9aB%\xca\x06\xc1\x05L\xc6{\xef~\xf7{\xba\x1b\xd0\xbcO\x9c\x9d\xaa\xc9\xd4$\x95\x08\xdd\xe7\x9c~\xf9\x9dW\xb4m\xfd\xd45T\xfb|\xa4\xa1\x13{\xa0\xa3\xd1\xb8\xa3\xf7U\xc4\xf0\x82pVQ\x05\xa1kwiG\xb5X*\x0b\x826d\x10\xb3H\x92\xd5[A\xb8\xbe\xbe.^W\x8aa4\x17lSX$K\xbf*\xc4I\xe4M\x93\xe2,\x991\xf2A\x0b\xb7\xe1\x17\xd7\x99\xc9\x07\x08\xb5\xe2i\xe4\xad\x12\x94lVn\x9bI\xdcO\x89\xf0\x87s\xe5\xd0V\x06\xc5\xd1\xb4\xcd\n\xd3p\xb9\x0c\x83\xe2\x1f1+\xb7\x04\xdaEx\x13/\xf1]\xd9r\x9dh\xbah\t\xf4\x0e\xda\xa1g\xe9&\x0eZE\xe1\xca\x8d\x92M\x9b\xb9\x98\xbcufK/\x88\x194\r\x83\xc4\r\x926S\x16\xa5f\xb5R+WJ\x0c\x12\x888\xc2\x148K\x98\xc8\x95\x1by\x17\x1b\xfe\xaa\xbc\xc3\xd0\xfc\xf5\x93\xd1o~P&\xd3\xcb\x7f\xabzi\xde\xd5\x9aC3\x8e\xc6\xd7^\xa7\xfa\xabUy\x17G\xbd\x0f\xbf\x98\xea\x1f\xfa\xf5/\xedL\xa4\xef\x05\x97(r\xfd6\x13\'\x1b\xdf\x8d\x17\xae\x0b\xab\xdaY\xec4\x869-"\xf7\xa2\xcd\x08\x91\x1b\xbb\t\x7f\x01\xe3\xc5\xfc<\xf2fq\x11\xf7\xee!\x88\x90l\x99\x0f\x0e\x0e\x1e\xdff\xf9\x00\xa8\xae\x9c\x08}\x9c;\x7f\xa26}\xf9\xef\x7f\xd1o\xbf\x1fA\x07\xbe+\xae\xd6\xf1\xe2\xf07\xf6#\xccP\x99N\xc3u\x90\xb0\x05\xc4\x8e\x15\xbeV\x95*\xcd\x86\xc8\x97\xd9\xdf\xdf\xdc\xa1N"gz9r\xe6\xee\x95\xe7^\x13\x02\xa08\xbcX\x07\xd3\xc4\x0b\x83\xc37\xe8?\x04.<\xf4\xdc\x81\x81g\xe1t\xbd\x84\xcd.N#\xd7I\\\xcdw\xf1\xdd!K\xe7\xc9\xbe9\x02\xb2"^\x03\xd0\xb2\xb7V\xc1\x92N\'\xde\x04S\xe8M\xa2\xb5{D\x84C#h\x114\x1d\xb2XI\xe3\xb7,j\xef\x8c\xe4\x87S\x07O\xa6\x08\xda\x92\x84\xd3\xd0G?\xa3\x94P\x10\xe2\xd8g\xd1[zO\xb5\x9b}\x838\xc4\x16\xe7a8\xf7]\xde\t\x1c\x7f\x93xS@*\\\n0\x12\xa8\xe8Q\xbe\xa4xwEs7I\x97\x13w6\xb63\x1f\x82\x9em\x17\xf6[\xe9\xf7#\x14\x17WN\x04\x04\xc3p\xe6\x16AYAw;\xeeE\x18\xb9\x87s\xa7\x80b\xb2\xbd\x7f\xbd9\xc4\xbb\xb85\x83\xa7\x90\xcd6\x1b]\xc0~\xd3\xed\xce\xe6\x17%\x01\xccP]\xb8\xd3\xcb^\x18\xa9\xbe7\xbd<|s\x94\x93x\x17\x87@\xf1S\xfb\xc2\xf1cw\x875\xfb\xb9\xf6\x82Yx\x9do`\x9be\xb7\xbc\x7f\x1d\xfc\xb5;G\x81\x9a{k\x12\xce6D\x9dg\xde\x15\xf2fm\x06\xb6\xa7\n&\xe6;q\xdcf6k\x8fO\xaaLj\xc2\x19\xc9b\x96\xb6@\x9b\x93j\xf8\x8e\xb7Y\x85\xd7n\x04\xd8]x`\x15\x18\x06\x86p\xf9\xe1<d\xe4\x96\xb7\x9c\x13\x1f\xc2\x08\xde\x12\xd40\x16p{q\xee]0\xc8\xf1\xc1\xa6G\x98{\xb4\xcb-\x80\x8bq\xee\x0c(P\xa9@\xb0r\x82\r\xc6\x8e\x91\xef\xf0\xee0\xa2[\xaf\xad\xb5\x9f\xad\x12f\xe0\x05\x8c\x8c\xee\xec\'\xb1r\x19\x86\xa4\x84l\x12\xae>b\xb3g\xb39\xa4\x9c:~\xc1c\xb5\x04\xa0\xbfG\xcc\r\x91\xc2\xda\xbf\x7fR-\x01v\xf8\xd6^\xc7\xc4\x95\x9ey3\xd0VF~\x85\x91\x02\xfd[R\xa7\xc8\xd2\xde\x8f\xb8\x85E\xe0,\x17\xe1\xac\xcd\x02%\x8b\x9c)\xd5\x00\x81\x92\xb0\x84\xf5\x8e\xdc~\xb0Z\'1\x93vB\xb7\x87\x1b\xa8\xe6\x12kf11{\xe9n\xae\xc3h\xc6\xa6\xa3\xe6\xb7W\x8e\xbf\x86\xfb\xebE\x08\xfb\xed\xf8.\x8bb\xef\xdf\xd0P\x11Y\x14\x06=04\xd8\xdd\xc8]\x86W\xeeG\xb2\x85\x87\xc9\xc2\x8b\x0b\xe9\xb4O\\\x7f\x05\x0e\x84\x01\xd2\x8e\xbf\x8e\xda\xcc\xc4w\x82\xcb\xc7\x08\x97\xce\'\xdf\r\xe6\xc9\xa2\xcd\xd6K,J\x9c\t(\xbc\xfb\xa9\xcd\x96Y\xf0\xee\x8f.!\xb3\x89l\r\xdb\xfbt\x11\xbbsO\xe1\xceh\xc8\xf8\x8f.\xe8\x06\xe5\xe3K\xbaC\xfa\x8cE\xe1\x85\xa4x\xa6\xde%^O\x96\x1e\x84\x1d\xba\x08&7\xdc\xc9:I\xc2\x00\xcfc\x8a\x9d\x08\x9et\xb2\x8e\x02\xb4p\xe2\x8f\x84\xf60G\x11\xe6 d\xdaA\x14\xf0\x96\xa6\xcc"\x07\xacjGG\xb2\x0e\x98\xe9\xb65\xd7ngg\x96\x1f\x93p>\xc7jA\xcde\xeb\x05!\xf6_9\xc1\xd4\x9d\x81wK}\x02\xe6J\xae\xbd8\xf1\xb0\x1a\xed:\x08pi\x01q\x10\xd4\x11\xdc\x1cqw\xca\xd4\xa8\xf1\xd42\xf1\x90\xae\xe0\xc0\xdbfg^\xbc\xf2\x9d\xcd\xdb \x0c\\vG\x04\xb1o\xdf\x99\xb8\xbe\xac\xe2\x10\x1am\xc0\x84\xc9m+v}wJ\xf7|\n\xed\x99\xe2\xd0\xeb]\x94\xe4V\xb8"\xfe|\xabI\x84\xd5%\xfb@\xafXY\xf1\xfd\x96@\to3\x8c-V\x1e[\xcaC\xdd\xaa\xc2\xca*\xc4\xb5\x99\xb3\xa5\x10\xa8`\xeap\xee]\x8e\x05\xf6\x18\xdf\xb7\x98\xd8\x8f\xb3\xb5\x90\xcb\xbfu)\xe5\x12\xfea\xe5\xff\x83\x8b\x02\\q\x0f\x11V\xa4\x94\x10.\x1e%\xacg\x84\xf5\'\x08\xc5R6\xb6\x88\xe9n\xd1>\xbda\xe7\xa0\xb21\xf2\x024Y\xc7^\xe0\xc6\xf7n\xde&\xca7\x8f\\\xfe\xad\x9b\'\xb1\xb2\xf4\xe0\xf2\xca\xb0\xb2\xf2c\xabge\xf1\xe1n\t\xba\xa5\xe7\xed\xc7?Qx\x81\xdc\xe5\xca\x0f7\xee\xfd\x9a\x04\x9d\xf9n\xd0\xeb\xbfu;D\xd8\x0f\xf1\xb1\r!;\xf2\xa8\x8a\xb1rEzT\xb5X\xb9\xfe\xf4\xb6\x90\x88}\x8f\x87\xdc\x8d4\x0bo6s\x03\x1ak\xe20Jr\x13#\xd7\xf9\x16`\x87\xde\x12p\xbc\x06!\xf7\xba\xdb\t\xa9\xc9\xd2;v\tz\x88\x9d`\x1e\x93\xd2qd\xca\x0b|\x0b1-\xb7\x90\xe9\xc6k?\x89\x11HGL\x1e\x93\x99\x02*#\x1e\x89\x12\x86S\xac\xd6%\tr?\x91f\x12i\xa2J\xbc\xedN\x02GSi\x92@;\xb3\xd8\x85\xb47\xcd"\xf0-$\xd4\xccC\xa9m\x9e_\xa2WOd\xc1h\xba\x00ks!\xdf[\'\x17|\x83\xc1\x1c8\x01^\xc1b\r\x82\x05N\xd5\xff\x83\xf04\xd9\xd5z\xd2\x9f\x91\xac\x1f\xaex\xb1\xd6\xa8\x89\xb5f\xad)\x95\x9b\xb5r\xa9\xce\x16\x08\xd1\x9fk\x17;f \xca\x97\x8e\xd2\xaeko\x96,H\x97\xb3N\xc2\xb4\x11jO;\\\xe1\xd6*m\xf0\xb1\xd1\xe3{\x91\xdeC\xe1\x11F\x1d\xa8\x96\xe6\x11D\x06:\xfe?{\xbd^\xa3\xdbe_\x1d\xfcu\xf4\xea\x80N\xd9\x99M \xa6_\x96\xb7\xf3\xc5\xf5\xa9\x03\xd2":\xe6E\xac\xe6\r\x19c\xe0^\xa3t\x9b\xf1\x9e\xd2\xed-*\xb3\xf8pg\x07\n\xb9\xec7G\xaf\xb6\xc9\xfb\xab\\=\x98]\xd9\x8c|3\x16\xe2j\xdc\x99\xc0.\xa4)\x01\x1d#U\x92\x9dp\x9eD\x19\x05.\tv#=\xee\x9c\x81T\xf8w\xab\xc9\xb9\x1b\xd1\xb1\xa2\x1f\xb2i:\x8e\x93\n\x08\xa8\xe4\x9a\xe6\xc5\xcf\x90\x91\xa7fX\x88\x9e\xde<[\n\x8em$\xb9\x08\xc2I$kqRDiH$\r\xcf\x96\x87\xdd\xfd-y\xf7D\x8c\xfdd\x13\xe7\x89\x85\x13\xb1\xda\xd6\xe7\xde\x92\x037\xd1\xdd\x8c+\x07\x90]Aj\xea\xad\x97\xec\r\x1a2tVu\xb1iN\x05\xc9P\xe2\x05\xeb\xa5\xb5t|\xbf\xf8\xc7j\xce\n\xb7\xa7L9oe[y\xf5\x95\xd6w\x02\x0e\xb9R\xb9Z\xaaW\xc5\x8a\xd4\x14,e\xc0\x9d*C\x8d\xebhZ\x8f\x1b\x99\x86\xaaY\x96aZ\xff\x12U\xae?T\x8b\xbcj\x98\xa3\xb1\xc5\xa9\'f\xdf\xb2\xfb\xbc\xfd\x81\x91\x81\x07a\x1e\x84y\xd0\x96\xa7\x800\xc7\xdd\x94og:\xf7\xcd\x98\x8e\x80\xd2\x11\n\xc8\xfep\x1fY\xa6\xf3S\xa8\xee\xb1\xce\xbf\x9e\'G\xaf\x83I\xbc:\xda\xa6\x0f\xcf\xe3\x93\x9eI_\xbf\xc3\xf0\r\xc3\xdb\xa8U\x1aUI83\xf4\xf7\x9a\xd9\x07|G\xc6\x99fr\xd6x4\xd2\xcf9\xd50F\x9a\xa9\xd8\xfd\xf7\xda\x16h\xa5\xdb\xd7uE\xe5\x07}F\xce\xf9\x10\xe1C\x94\x0f\xed\xf0\xed\x0bv:J\x01\r\xfa_\x13f\xb1\x041\xf4\xf3\x10\x86\x94\x04h+/\x07\xddZ\xa9\xd2\xac7\xaa5a\xa8\xbd\xcb\xe1\xebh\x8aj\x0c\xb9\x9e\xa2\xeb\x16\xaf\xda\x8c\x0c\x9d\x0fa\xd4\x9aD\x82|84L\xfbDS,\x1b\xbd3:\x1d\xcd\xb4\xde<\x81\x1d\x1d\x02\x91!\nH\xb5\xbf\x11\xfc S\xe2Q\xf9\x8e\xd8o\x16>H\xe9\x9a%\xf8\x13\x86`H\xc6P\xd1\xc16\xcdS\xaec(f\x97\xefj\x1670\xc0\xf0,\xbe\xaf\x00\x88)\t\xc2$\x88\x90<\xdb\xe4@$\xa2"A\x1f\x94\x1f\xa0\xed\x05\x9a$I\xcdjS\xaa\x0b\xea\xb8\xd3\xff\xc0\xe9\x80\xcb\x90S\x06\xe0#U\x05\xdb\xa0\xae\xab|\xd70\x15\x9d\xef\xe9\x90Ia"D\x88PJT@@\xf2|\xec\xb0\xc8\x02\xea\xe9_\x136\n\xc5g\x8d\xe0g#\x88\xd2KA\x0eba\xa5^\x97\x1a\xc2\xf1X\xefA\xe4\x03\x87\x97\x85\xc1\x7f\x895n\xa0\x0c\xc7=E\xb5\xc7\x10\xed\x8esoz\x02\xe9\x8cf\x9d\x188/R\xd4\x13\x02*\xe6G\x84?\x0b\x87\xaf\x9d\xe5\xea\x08\xdd\x90\xb0gX\xcc\xc7Cd\xbc\xaf\x8dx\x19\x1b\xaa\xf8\xfdB.\xd5j\r\xa9Q\x12l@\xf8\x8c\xb3lM\xd3\x01\xf9b\x0e\xaf\xae\x81\x9b\xb5\xc6\x83A\xdf\xe6\x07\x06#\xdb\x04\xc93D(\x01\xe3\xe2\x9e0b\xb9\x88\xca\x85\x04\xc7\xf8\x01\xe1\x17XmS\x14\x9b\x95\x92`\x98\xda1\xe45\xfax\x00)\n\x06\x91\xd7\x95S\x8d3\xac3h\xe7\r\x93\x91)\x05\xa2\x14\x18\xbc\xe7\xc3\x06\x12\x11\x95X@\x86\xf9M\x95\x1f/\x11;\xb1V\xaf4DQ\x18h\xdd\x11$\x1evnw\x83\xbe2\xe8\x13g\x9au\xedihD\xd0\x0f/\xf9ee\x84T\xafVD\xf0\x92\x961\xb6O8\x88>\xa6\xc6\xe9P\x10@\x18\xe3\x94a\x97\xb3\x14\x1d\xdc$.\xcf\r\x93\xe4\xa1;\xf8\x11\x1eDxP\xca\x83\x80\x07\x11\x1e\xb4\xc3\xf3mB\xfb\x8cL\xf5%B[\x15\x9b\rIl\xd6\x04m\xf8\xbeo\x01\n\x9c\xad\xa9\'CC7\x8e\xfb\x00)\xb1EK\x19r\xef\xc6\xca\x90\x1f\x81\x0f\xcd\xe8\xd0.\xdd~\xa6\tr\x11\x96[@\xa3\xaf\xeaI\x9fa\x9d/\xad\xd8\xa86\xa4f\x19\xfe\x0b\x1d\xa5{\x0cQ\xaf\x07V\x06Y\xeb\xc84\xbac\xd5N\xf13\x94S\x1d,\x8eW\xa1L\xa4t\x88\xd2\xa1\x8cn?\xfcR\xb9P\xe0\x7f+\xb5\xe2\x8b\xb4\xc0\x06\xfe\x15\x9b\x82U\xec\x14\x010[3\xb3Z>\x8f\x86C\xc5:y\xdf\xd7u\x8d\xb7\x87\xe0Q\x81\x10\xdd \xdc36\xe6b\x0b\xc8\x1e~#\x10\xbe8\x0bl\xd6!\x03\xad7\x05\xf5D3\xcds\xce\x18\xd9P\xc3o\xa1;65m\xc8u\x94s\xfe\xac\x0f\xe5>!B)\xd1\x9e\xb0\x11\x91\x08D\x16\xd0\xd9W}4\xfa=;\xcej\xbd\xd6\xacW\xea\x82\xa2\xaacK3\xdfk\x9c\xf6\xcb\xb8?\x1ahC\x9bT\xfb\xb4p\'\x0fl\x8az\x11W\x82\xc6\xb8oQ#<=g\xe4\x8c\x0f\xe5li\x91O\x19\x1fz\x94\x9a\x0f\xf7\x00_\x01\xd1\xe1\x9ez\xc2\xba\x9dM\x01\x9d\x9e\x7f#J\xf0"\xdd\xaf$\x95\xebb\xb5)(\x1d\xd5\xb8\x91\xc2B~\xfa\x01\xc2\x9b\xd9W\xf8\xf7\x109q\xff\x17\xa5\xab[y\x05\xf4\xfeG\xc4\xfc\x92w5$\x11\xdb\xaf\xd0\xd3\xba\xf8=&\xad\xcb\x9d\x9d\x18PM\xc0\x0e\xe7~W\xb1!7\xb1\x15\xfe\x18\xa0\xcb\xe9PN\xb7\xa7\xebM\xa5\x16\xd0\xf1\x0f\x00\xbf\xe0\x11y\xbd\xd4\xa85\xc5\xb2\x00V\x06aP\x07gk\x1e\xe3\x80\xc8a\xd7\xd8W5+{PN\x9e\xe0t\xf4q\xaf\xc7\xf7\xa1\x96L\xe9QF\x8f2\xfa\xfd\x9e\x99\x93\xa79D:\xa8\xc3\x8f\x07\xe7\xfb\x1b$\xfc\x88RM\x04\x83T\xec\xb1\xa9q\x03\xc5<\xd5\xec\xdd\xc7\xe4\x96j\xd8\xb6\xd5\x05\xcb\xe3\x95_\xb1E\x12B\x94\x13\xeei\x8f[\xb1\x05\xa4\xfc\xfa9\xfb\x9b}\xd8\x10\x00\xf9a\x9370\x94\xaa\xcdZY\x12\x00\x92\xbe\xc1\xbd\xe7N5H.LR\xfc\x83\xcb3\x86}\x83|\xa4\x83t\xa3\xf7\x88v?\x94\xe6\xd0^\xc0\xb4;\xb6l\x13?!\xc0\xc5~*\xe7\xa9\xdcf\x87\xf4s?\xe3\xf1\x03\xd5\x07<m\xa9Y\xa9\xd4*%\xe1\xc4\x18h\x9ce\x8cMU\xe3\xb6\xa8\x10\x1fk\x85\xebd\xc1\x9d8\xd3K7\x88\xe1??|\xc7\xc8\x98\x1eQ\xfa]\x14\xf7\xf1\xb2D>\xda\xca/\xa0\xe1\xbb\xaf\x8a\xe9\xf7\xedl!_\xad\xd4\xca\x8d\xba\xa0A\xb84t\xaeg\x18]k\xa7N9\xee\xeb\x1d\xcd\xb4\x89\x9b\xd5 B\x1a:"$Ye\xf1\xfcr\x93\n\xfc\xea\x0e\xf6\xfb\x86\xadZ\xa9\x95\xea\xf5r\t\xbf\xd51\xd4l\xae\xdb75\xd5&\x05\x07\x94\x17\xe0-\xcf9\xb01M\x19\xf0\xc3s\xf2\xa6\x07\x10!JD\xaa\x8eg\xc3F\x85"*\x14l\xee\xb3\x8a\xc4\xbd\xc1\xdbBr\x1b\x91\xef\x06\xc1Z\xad\xd1h\x94jM\x01\xe7\x1c\xba\x86\xe1R\xce:\xe4\xa1\xcfplB&z\x9eg;=\xa5oA\xae:T\x19\x99\x12\xa3-1\xc2\xc4i\xcd\xdfS\xcc\x81\xf5P\x0c\xbd\x9f\x13\x86\xa1\xb9\xd2SQ\x94\xce\x01\x80W\xbf*\xf0\xdf\xf9\xe3\x01\xa9Y\xad\xd5\x9bRC85\xba}\xe5\x94\x1bh\xb6\xa2[;O\x880\xe0<\xed\xe4\x95SF\xa6\x97\x88\xd2\xddx\xb4\x83Q{\xb6\x15Sq\xe0{O_b\x1a\x04\r\xf8s\xeai\xdb\xf6\\&\x8b?\nOO>\xb2r\xcb\xf7\xb2f\xfcy\xfc\x95\x8d\x8f\x96\xb3\xe9Y\x15|\xe4\x81\x92\xb32>\xdb\x9c\x1fV!\x1f\xc6&GZ<\xb9\x9c_e0f\x87#\x7fN\x8f\xc2\xb5\xf3\x93\x03\x04\x11,\xaf-\xb2\xb2\x98\x9f\xec|.s\x85\x95+{3WY\xb9\xba73>J\xb47s\x8d\x95k{3\xd7Y\xb9\xbe7s\x83\x95\x1b{37Y\xb9\xb973=^\xb5?{\x99\x95\x87\xee\xa7\x04r\x93\xd7\x91\xf3\xe7:<\xda\x8a\xc2\xa7\x87\x88fO\xf2\x93\x16S\x1f$\xe2\xf3\x8c\xd8\x87\xa7z\xbf\x92\xcf\x9c AI\x88\x9c\xd9\x0cm\xc25P\xd3\x13\x14?#r\xc8c\x9a\xa0\xe9:N\xc2\xa5\x1b\xa1\xd8\x8d\xae\xbc\xa9\x8b\x9c\xe4m\xee\x95\xd8\xa5\xe3\xf9I\xf86^\xafVa\x94\xfc\xff\x9d\xd3\xd0\xac\xfc`\x17\x9d\xed\x8a\xcc\x05\xffm\x8fi\xa7\xe7\x82\xbcI\xd1\x99\x05\x9f\xe8\xb1\xfa\xd5\xa7\x9f\xbdY\xbbN\x96?\xc1\x07\x92\xa2\xb6\xc4 r\xcc\xa6\xcd\x94\x19\xb4p\xbd\xf9"!\x97ty\x9f#\xae\xf1\x05\xe2\x9cYq\xe3\xb9\xfel\xe9\x04\x80FD\xa5z\x9f\\\x1f\x0b\x96j\x15Q\xaa\x12\xe9I[|Dp\n\xc4=\xa7\xb0/\x12q{\xe4==c:s\x97!\xb3=\xec\xbd\xab1\xd9\xb4\x92\x85\x1b9\xab\xcd\xdd\x13\xf1\x02#w\xfcp\x1e\xbfE6%\xb9{x\xfc\x86<!\xd5\x04\xd5w\xbc%#\x8f"o\xea\x05\xf3\xa7\x98.\x9c?\x19\x88\xf0\xbf\xdc\xa6\xdb=\x81\xde\xda9\x8c~\x8b\xdd\x99@M\xc6\xc8\n~A74\xe6\xe9\xd9\x12u\xc5G\x80\xa8\xde\x8e\x9fdYE\xde\x953\xdd\x90\xb5\xe1\x0b\x18\xd0\xf7\xa6O\xee\x0b\x04\x9be\xcc\xc86~\xc1\x07\xdc,j\x17\x8f\xae8\x86\x9d\x94;k\xcf\x9f!\xb1\xd8(\xd6\xd1\xebi\xb8\xda\x1cA~R.\xa3;\x96A\x1e\x1a\x16q$\xc9e\xe5\xfa\x81\xd0?\xf2\xfb\x83\xed7\x0b\xfc\xc4\xf3\xa8\xa3\x1d\xf7\x87\xa8\x1f\\y\t9\xbf\x04\x82c\x0f_\x00n\x08\xf1|\xaa`\x96j\xf6G6\xf2\x9d`\xbe\xc6~\x84\xd9=#\xf7\xd0\x17H`N|\xf2\xcc_\x81\xd0s\xd4\xc6o\xa9\x1d\xa5\xbaK\x05\xa6\xd2\xf1D\xb4a\xf7\x89i\xb4\x04\xfa%\x10-\x81~\x13\xcc\xff\x00\xcb\x80\x01\x9elF\x00\x00' 
```

如何对其进行解码以获取实际数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-03T09:38:01.160

响应使用 gzip 压缩。使用`urllib`/`urllib2`您需要显式处理此问题（而[请求](http://www.python-requests.org/en/latest/community/faq/#encoded-data)等更高级别的库将自动解压缩）

例如，给定您在问题中包含的响应（为了整洁而截断）：

```
>>> response = '\x1f\x8b\x08\x00\x00 [...]' 
```

..这可以这样解码：

```
>>> import gzip
>>> from StringIO import StringIO

>>> buf = StringIO(response)
>>> f = gzip.GzipFile(fileobj=buf)
>>> f.read()
'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/ [...]' 
```

有关详细信息，请参阅[“python urllib2 是否会自动从 fetch 网页中解压缩 gzip 数据”](https://stackoverflow.com/questions/3947120/does-python-urllib2-will-automaticly-uncompress-gzip-data-from-fetch-webpage)，或者考虑使用[requests](http://www.python-requests.org/)

# python - 理解 Python 中的全局变量

> ID：10868530
> 
> 赞同：6
> 
> 时间：2012-06-03T07:05:37.497
> 
> 标签：python, global-variables

使用全局变量时，我在 Python 中遇到了一个奇怪的问题。

我有两个模块（文件）：`mod1.py`和`mod2.py`

`mod1`试图修改在`var`中定义的全局变量`mod2`。但是`var`in mod2 和`var`in`mod`似乎是两个不同的东西。因此，结果表明这种修改不起作用。

这是代码：

```
#code for mod2.py
global var  
var = 1 
def fun_of_mod2():
    print var

#code for mod1.py
from mod2 import var,fun_of_mod2    
global var #commenting out this line yields the same result
var = 2 #I want to modify the value of var defined in mod2
fun_of_mod2() #but it prints: 1 instead of 2\. Modification failed :-( 
```

关于为什么会发生这种情况的任何提示？以及如何修改in中`val`定义的值？`mod2``mod1`

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T07:10:34.500

当您`var`导入`mod1`：

```
from mod2 import var,fun_of_mod2 
```

您`var` *在 mod1 的命名空间中为其命名。*就好像你这样做了：

```
import mod2
var = mod2.var
fun_of_mod2 = mod2.fun_of_mod2
del mod2 
```

换句话说，该值现在有两个名称，`mod1.var`和`mod2.var`。起初它们是相同的，但是当您重新分配时`mod1.var`，它们`mod2.var`仍然指向同一事物。

你想做的只是：

```
import mod2 
```

然后访问并将变量分配为`mod2.var`.

重要的是要注意 Python 中的全局变量并不是真正的全局变量。它们仅对声明它们的模块是全局的。要访问另一个模块中的全局变量，请使用`module.variable`语法。该`global`语句可以在函数内部使用以允许分配模块全局名称（没有它，分配给变量使其成为该函数中的局部变量）。它没有其他效果。

# android - 动态壁纸设置不适用

> ID：10868533
> 
> 赞同：0
> 
> 时间：2012-06-03T07:06:24.680
> 
> 标签：android, settings, live-wallpaper, rajawali

我已将设置添加到我的动态壁纸，但更改时它们不会被应用。如果有人能告诉我为什么我的设置在更改时没有被应用，我将不胜感激。这是我的代码：

设置.xml

```
 <PreferenceCategory android:title="@string/more">
        <PreferenceScreen android:title="@string/more">
            <intent android:action="android.intent.action.VIEW" 
           android:data="market://search?q=pub:PSP Demo Center" />
         </PreferenceScreen>
         <ListPreference 
            android:persistent="true" 
            android:enabled="true" 
            android:entries="@array/settings_light_number_options" 
            android:title="@string/settings_light_number" 
            android:key="light_power" 
            android:summary="@string/settings_light_number_summary" 
            android:defaultValue="3" 
            android:entryValues="@array/settings_light_number_optionvalues" />
         <ListPreference 
            android:persistent="true" 
            android:enabled="false" 
            android:entries="@array/settings_speed_number_options" 
            android:title="@string/settings_speed_number" 
            android:key="speed" 
            android:summary="@string/settings_speed_number_summary" 
            android:defaultValue="10" 
            android:entryValues="@array/settings_speed_number_optionvalues" />  
        <ListPreference 
            android:persistent="true" 
            android:enabled="false" 
            android:entries="@array/settings_rotate_number_options" 
            android:title="@string/settings_rotate_number" 
            android:key="rotate" 
            android:summary="@string/settings_rotate_number_summary" 
            android:defaultValue="8000" 
            android:entryValues="@array/settings_rotate_number_optionvalues" />

    </PreferenceCategory>

</PreferenceScreen> 
```

设置.java

```
 public class GraffitiLWPSettings extends PreferenceActivity 
              implements SharedPreferences
              .OnSharedPreferenceChangeListener {
    public static final String SHARED_PREFS_NAME = "wallpaper_settings";

    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        getPreferenceManager().
            setSharedPreferencesName(GraffitiLWP.SHARED_PREFS_NAME);
        addPreferencesFromResource(R.xml.settings);
        getPreferenceManager().getSharedPreferences().
            registerOnSharedPreferenceChangeListener(this);
    }

    protected void onResume() {
        super.onResume();
    }

    protected void onDestroy() {
        getPreferenceManager().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
        super.onDestroy();
    }

    public void onSharedPreferenceChanged(SharedPreferences 
            sharedPreferences, String key) {
    }
} 
```

壁纸.java

```
 public class GraffitiLWP extends Wallpaper {
    private GraffitiLWPRenderer mRenderer;
    public static final String SHARED_PREFS_NAME = "wallpaper_settings";
    public Engine onCreateEngine() {
        mRenderer = new GraffitiLWPRenderer(this);
        return new WallpaperEngine(
            this.getSharedPreferences(SHARED_PREFS_NAME,
        Context.MODE_PRIVATE), getBaseContext(), mRenderer);
    }
} 
```

渲染器.java

```
 public class GraffitiLWPRenderer extends RajawaliRenderer {
    private Animation3D mAnim;
    private BaseObject3D mCan;
    private SettingsUpdater settingsUpdater;
    //private SharedPreferences preferences;

    public GraffitiLWPRenderer(Context context) {
        super(context);
        setFrameRate(20);
    }

    public class SettingsUpdater implements SharedPreferences
             .OnSharedPreferenceChangeListener {
        private GraffitiLWPRenderer renderer;

        public SettingsUpdater(GraffitiLWPRenderer renderer)
        {
            this.renderer = renderer;
        }

        public void onSharedPreferenceChanged(
                SharedPreferences sharedPreferences, String key) {
            preferences.getInt("wallpaper_settings", 0);

            renderer.setSharedPreferences(preferences);
        }
    }

    public void initScene() {
        System.gc();
        ALight light = new DirectionalLight();
        light.setPower(this.preferences.getLong("light_power", 3));
        light.setPosition(0, 0, -10);
        mCamera.setPosition(0, -1, -7);
        mCamera.setLookAt(0, 2, 0);
        mCamera.setFarPlane(1000);

        ObjParser parser = new ObjParser(mContext
                    .getResources(), mTextureManager, R.raw.spraycan_obj);
        parser.parse();
        mCan = parser.getParsedObject();
        mCan.addLight(light);
        mCan.setScale(1.2f);
        addChild(mCan);

        Number3D axis = new Number3D(0, 
             this.preferences.getLong("speed", 10), 0);
        axis.normalize();
        mAnim = new RotateAnimation3D(axis, 360);
        mAnim.setDuration(this.preferences.getLong("rotate", 8000));
        mAnim.setRepeatCount(Animation3D.INFINITE);
        mAnim.setInterpolator(new AccelerateDecelerateInterpolator());
        mAnim.setTransformable3D(mCan);

        setSkybox(R.drawable.posz, R.drawable.posx, 
            R.drawable.negz, R.drawable.negx, R.drawable.posy, 
            R.drawable.negy);
    }
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        settingsUpdater = new SettingsUpdater(this);
        this.preferences.registerOnSharedPreferenceChangeListener(
            settingsUpdater);
        settingsUpdater.onSharedPreferenceChanged(preferences, null);
        super.onSurfaceCreated(gl, config);
        mAnim.start();          
    }

    public void onDrawFrame(GL10 glUnused) {
        super.onDrawFrame(glUnused);
        mSkybox.setRotY(mSkybox.getRotY() + .5f);           
    }
} 
```

我知道代码很长，但我将非常感谢有人能给我的任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:48:23.587

您将 PreferenceScreen 嵌套在 PreferenceCategory 中。

-- 编辑 -- 仔细检查，标签都混在一起了。（您关闭 PreferenceScreen 两次）

我相信基本结构是：

```
 <PreferenceScreen android:title="@string/more">
     <PreferenceCategory android:title="@string/more">
       <ListPreference android:title="@string/settings_something"/>
     </PreferenceCategory>
   </PreferenceScreen> 
```

此外，您已`android:enabled="false"`添加到每个首选项。我可以想象这将禁用输入...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:17:00.947

您需要将您的 wallpaper.java 更改为：

```
public class GraffitiLWP extends Wallpaper 
        implements OnSharedPreferenceChangeListener{
   private GraffitiLWPRenderer mRenderer;
   public static final String SHARED_PREFS_NAME = "wallpaper_settings";
   private SharedPreferences prefs;

public Engine onCreateEngine() {
    mRenderer = new GraffitiLWPRenderer(this);
    prefs = getSharedPreferences(SHARED_PREFS_NAME, 0);
    prefs.registerOnSharedPreferenceChangeListener(this);

    return new WallpaperEngine(
        this.getSharedPreferences(SHARED_PREFS_NAME,
    Context.MODE_PRIVATE), getBaseContext(), mRenderer);
    }
} 
```

基本上我只是添加`implements OnSharedPreferenceChangeListener` 了

`prefs = getSharedPreferences(SHARED_PREFS_NAME, 0); prefs.registerOnSharedPreferenceChangeListener(this);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:14:46.310

我对 rajawali 引擎也有同样的问题；或者至少我有。I could go into preferences from preview, but I couldn´t when live wallpaper was selected and applied. 我做了什么：我以这种方式更改了清单（您在其中声明了首选项活动）：

```
<activity
    android:label="@string/settings"
    android:name="com.onebutton.livewallpaper.budastatuefree.BudaStatueFreeSettings"
    android:theme="@android:style/Theme.Light.WallpaperSettings"
    android:exported="true">
</activity> 
```

当然，您必须更改活动名称

希望这对你有用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T18:19:27.283

如果你不需要，不要把事情复杂化。您所需要的只是渲染器中的一个这样的函数：

```
private void setOnPreferenceChange(){
    mListener = new OnSharedPreferenceChangeListener(){
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
            if ("cool_pref".equals(key))
            {
                camSpeed = Integer.parseInt(sharedPreferences.getString(key, "default"));
            } 
            preferences = sharedPreferences;
        }
    };      
} 
```

调用 initScene 中的函数，您就可以开始了。

我也这样做是为了获取每个 initScene 的首选项：

```
private void setPrefsToLocal(){
    localPrefVar= Integer.parseInt(preferences.getString("cool_pref", "default"));
} 
```

# php - 简单的 PHP：mysql_num_rows

> ID：10868536
> 
> 赞同：0
> 
> 时间：2012-06-03T07:07:05.090
> 
> 标签：php, mysql

我有一个简单的问题`mysql_num_rows()`，

如果我有这样的东西：`mysql_num_rows($getLatest['thread_id'])` ，它会工作吗？是否`mysql_num_rows()`支持使用方括号，例如`['thread_id']`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:10:45.087

您需要使用 mysql_num_rows 传递资源变量。

假设您执行一个查询。

```
$result = mysql_query("SELECT * FROM table1", $link); 
```

所以 $result 是这里的资源。用 mysql_num_rows(resource) 传递它

```
$num_rows = mysql_num_rows($result); 
```

请参考[此内容](http://php.net/manual/en/function.mysql-num-rows.php)以供进一步参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:09:19.377

`$getLatest['thread_id']`如果数组元素包含 a 的结果，它将起作用`mysql_query()`。我不明白为什么方括号与`mysql_num_rows`调用有关，您只是在传递一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T07:12:08.393

[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)函数返回mysql_query 记录集中的行数。

# jquery - Jquery 的 Ajax 自动完成：如何发送动态参数

> ID：10868537
> 
> 赞同：8
> 
> 时间：2012-06-03T07:07:14.517
> 
> 标签：jquery, ajax, autocomplete

我在我的一个应用程序中使用`Ajax Autocomplete for Jquery`（[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)）。搜索表单看起来像这样：

```
<form id="topsearch" method="POST" action="/searchAll"><input type="text" class="searchform" name="q" id="q" value="Country, City, Hotel or a Tourist Attraction" o    nfocus="clearInput(this);" onblur="defaultInput(this);" />
  <select id="top_search_select" name="entity_type">
     <option value="country">Countries</option>
     <option value="city">Cities</option>
     <option value="place" selected="selected">Tourist Attractions</option>
     <option value="hotel">Hotels</option>
  </select>
  <input type="submit" name="topsearch" class="submit" value="SEARCH" title="SEARCH"/>
</form> 
```

自动完成配置如下所示：

```
<script type="text/javascript">
 //<![CDATA[
   var a = $('#q').autocomplete({
     serviceUrl:'/search',
     delimiter: /(,|;)\s*/, // regex or character
     maxHeight:400,
     width:325,
     zIndex: 9999,
     params: {entity_type:$('#top_search_select').val()},
     deferRequestBy: 0, //miliseconds
     noCache: false, //default is false, set to true to disable caching
     onSelect: function(value, data){window.location.replace(data);},
   });
 //]]>
</script> 
```

现在问题出在后端，我有不同的处理程序为用户通过表单中的选择选项选择的不同类型的实体生成结果。

默认`entity_type`情况下`place`，它被很好地传递给后端的处理程序。但是，我想要的是当一个人从`params: {entity_type:$('#top_search_select').val()}`脚本配置中的表单中的选择框中选择不同的实体时也会更新。

任何帮助或想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-12T19:38:46.483

或者，您可以使用在发送 ajax 请求之前评估的函数指定参数。

```
$('#q').autocomplete({
    ...
    params: {
        'entity_type': function() {
            return $('#top_search_select').val();
        }
    }
    ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T13:21:18.003

可能是一个老问题，但我觉得这是最好的方法：

```
$('#q').autocomplete({
    ...
    onSearchStart: function(q) {
        q.entity_type = $('#top_search_select').val();
    }
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:18:12.563

正如您的插件站点在此处的用法中指定的那样[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)它在它返回的对象上有一个`setOptions`方法，您可以稍后使用它来动态更改选项。

`onchange`在 select 元素上添加一个处理程序，并在`params`每次用户选择不同的值时更改选项，例如

```
$(function(){
  var ac = $('#q').autocomplete({
    serviceUrl:'/search',
    delimiter: /(,|;)\s*/, // regex or character
    maxHeight:400,
    width:325,
    zIndex: 9999,
    params: {entity_type:$('#top_search_select').val()},
    deferRequestBy: 0, //miliseconds
    noCache: false, //default is false, set to true to disable caching
    onSelect: function(value, data){window.location.replace(data);},
  });

  $("#top_search_select").change(function() {
      ac.setOptions({params:{entity_type:$(this).val()}});
  });

}); 
```

您应该将所有代码放入`document ready`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T07:55:01.670

setOptions 方法有效，尽管我们需要在 selects 更改方法上调用它。所以将脚本更改为：

```
<script type="text/javascript">
//<![CDATA[
  var a = $('#q').autocomplete({
    serviceUrl:'/search',
    delimiter: /(,|;)\s*/, // regex or character
    maxHeight:400,
    width:325,
    zIndex: 9999,
    params: {entity_type:$('#top_search_select').val()},
    deferRequestBy: 0, //miliseconds
    noCache: false, //default is false, set to true to disable caching
    onSelect: function(value, data){window.location.replace(data);},
  });
  a.setOptions({params:{entity_type:$('#top_search_select').val()}});
//]]>
</script> 
```

并在文档就绪功能上添加以下内容：

```
$("#top_search_select").change(function() {
  a.setOptions({params:{entity_type:$('#top_search_select').val()}});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-28T13:51:37.923

Pez 的回答对我没有用，只是与“extraParams”略有不同。这使得参数是动态的，而不是在页面加载时设置...

```
$("#field").autocomplete('pageurl.php', {     
   width: 240,
   matchContains: true,
   mustMatch: false,
   selectFirst: false,
   extraParams: {
      start:function () { 
           return $("#start_date").val(); 
      },
      end: function () {
           return $("#end_date").val() ;
      }
  } 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T17:21:04.660

上面的所有答案都对我不起作用（我怀疑是因为我正在通过 ajaxSettings 变量传递“POST”数据，这可能会影响“params”，但我没有仔细检查）。

无论如何，所有评论都给出了很好的提示，我想出了以下几点：

```
var data={          
    'phrase': function() {
        return $('#ajax_post').val();
    },
    'activity_id': function() {
        return $('#activity_id').val();
    }
}

var options = {
    noCache: true,
    transformResult: function(response) {
        //whatever
    },
    onSelect: function(suggestion) {
        //whatever
    },  
    serviceUrl: "MyPHP.php",
    ajaxSettings: {
        dataType: "json",
        method: "POST",
        data: data
    }
};  

$("#ajax_post").autocomplete(options); 
```

因此，我能够将 ajax_post 和 activity_id 输入字段的内容传递给 PHP 脚本。

请注意，这样做还不够：

```
'phrase': $('#ajax_post').val() 
```

因为正如其他答案中提到的那样，值是静态的。

# .htaccess - htaccess ：结合永久域更改和剥离 www

> ID：10868539
> 
> 赞同：0
> 
> 时间：2012-06-03T07:07:21.583
> 
> 标签：.htaccess, url-rewriting

II 使用下面的代码从我的（新）域中删除 www。现在我也想将旧域重定向到新域。无法让它工作。有可能两者都做吗？

```
RewriteCond %{HTTP_HOST} ^www\.skiweather\.eu [NC]
RewriteRule ^(.*)$ http://skiweather.eu/$1 [L,R=301]
RewriteBase / 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:14:03.180

*只需将任何内容*重写到您的新域：

```
RewriteCond %{HTTP_HOST} !=skiweather.eu [NC]
RewriteRule ^(.*)$ http://skiweather.eu/$1 [L,R=301] 
```

# javascript - Facebook JS SDK，从客户端传递 UserID 不安全？

> ID：10868544
> 
> 赞同：0
> 
> 时间：2012-06-03T07:09:16.210
> 
> 标签：javascript, facebook

使用 facebook js sdk，我不应该从我的服务器的客户端传递用户 ID 来查找他们的帐户并登录，对吗？

我需要使用 accessToken 从 facebook 服务器获取用户 ID，然后使用它来查找他们的帐户？如果我使用客户端的 userId，任何人都可以传入一个 id 并登录到任何用户？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:32:48.947

Facebook JS SDK`fbsr_<application id>` 为您的域设置了已经包含用户 ID 的 cookie，因此无论您是否发送它都没有关系。

Cookie 有效负载是 Web 安全的 base64 编码 JSON，其中包含：

```
{algorithm: "HMAC-SHA256", code: <OAuth code>, issued_at: <time stamp>, user_id: <user facebook id>} 
```

# java - 如何在循环外使用 BufferedReader 从键盘获取输入？

> ID：10868548
> 
> 赞同：1
> 
> 时间：2012-06-03T07:10:12.840
> 
> 标签：java, bufferedreader, java-io

```
InputStreamReader inp= new InputStreamReader(System.in);
do  
{  
  BufferedReader br = new BufferedReader(inp);  
  System.out.println("Enter Roll number : ");  
  int rno= Integer.parseInt(br.readLine());   

  System.out.println("Enter name: ");  
  String name= br.readLine();

  System.out.println("Continue y/n: ");  
  char ans=(char)br.read();  
} while(ans=='y'); 
```

我怎样才能`BufferedReader`在循环之外写？如果我在外面使用它，它会显示以下异常：

```
java.lang.numberformatexception for input string at            
    java.lang.Integer.parseInt(Integer.java:468) 
```

是否有任何机制来刷新`BufferedReader`？可以做什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:24:59.283

这不是“好”，但对我有用 - 我添加了 br.readLine()：

```
public static void main(String args[]) throws IOException {
    BufferedReader br = null;
    try {
        InputStreamReader inp = new InputStreamReader(System.in);
        br = new BufferedReader(inp);
        char ans;
        do {
            System.out.println("Enter Roll number : ");
            int rno = Integer.parseInt(br.readLine());

            System.out.println("Enter name: ");
            String name = br.readLine();

            System.out.println("Continue y/n: ");
            ans = (char) br.read();
            br.readLine();
        } while (ans == 'y');
    } finally {
        if (br != null) {
            br.close();
        }
    }
} 
```

# html - IE9图片边框

> ID：10868551
> 
> 赞同：-1
> 
> 时间：2012-06-03T07:10:35.150
> 
> 标签：html, css, internet-explorer-9

![](../Images/55332d9e7a26460f149344df7153a56a.png)

这是我在 Tumblr 上的博客的截图，在 Chrome 上那些黑色边框不存在，两个图像都是具有透明背景的 PNG，我怎样才能让那些丑陋的框消失？我已经尝试在此主题上关注一些线程，但它们没有用。

嗯。真是奇怪，Snipping Tool 没有捕捉到黑匣子，而 print screen 却捕捉到了。这是打印屏幕图像。

![](../Images/c4c24beef2edd10a3740b1c2e1dfc9bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:17:48.363

如果没有更多难以说的细节，您是否尝试添加此 CSS？

```
img {
  border:none;
} 
```

# redis - 使用 Redis 的可扩展延迟任务执行

> ID：10868552
> 
> 赞同：19
> 
> 时间：2012-06-03T07:10:42.447
> 
> 标签：redis, scheduled-tasks, scalability

我需要设计一个 Redis 驱动的可伸缩任务调度系统。

要求：

*   多个工作进程。
*   许多任务，但长时间的空闲是可能的。
*   计时精度合理。
*   空闲时资源浪费最少。
*   应该使用同步 Redis API。
*   应该适用于 Redis 2.4（即即将推出的 2.6 中没有功能）。
*   不应使用 Redis 以外的其他 RPC 方式。

伪 API `schedule_task(timestamp, task_data)`：. 时间戳以整数秒为单位。

基本思路：

*   收听列表​​中即将执行的任务。
*   根据时间戳将任务放入存储桶。
*   休眠直到最近的时间戳。
*   如果出现一个新任务，其时间戳小于最接近的一个，请唤醒。
*   分批处理所有即将到来的时间戳≤现在的任务（假设任务执行速度很快）。
*   确保并发工作人员不会处理相同的任务。同时，请确保如果我们在处理它们时崩溃，不会丢失任何任务。

到目前为止，我无法弄清楚如何在 Redis 原语中适应它......

有什么线索吗？

*请注意，有一个类似的老问题：[Delayed execution / scheduling with Redis?](https://stackoverflow.com/questions/4138951/delayed-execution-scheduling-with-redis) 在这个新问题中，我介绍了更多细节（最重要的是，许多工人）。到目前为止，我无法弄清楚如何在这里应用旧答案——因此，这是一个新问题。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T03:27:28.423

这是另一种基于其他几个解决方案的解决方案 [1]。它使用 redis WATCH 命令来移除竞态条件，而不使用 redis 2.6 中的 lua。

基本方案是：

*   将 redis zset 用于计划任务，将 redis 队列用于准备运行的任务。
*   让调度程序轮询 zset 并将准备好运行的任务移动到 redis 队列中。您可能需要超过 1 个调度程序来实现冗余，但您可能不需要或不需要很多。
*   拥有尽可能多的工作人员来阻止 redis 队列上的弹出。

我还没有测试过:-)

foo 工作创建者会做：

```
def schedule_task(queue, data, delay_secs):
    # This calculation for run_at isn't great- it won't deal well with daylight
    # savings changes, leap seconds, and other time anomalies. Improvements
    # welcome :-)
    run_at = time.time() + delay_secs

    # If you're using redis-py's Redis class and not StrictRedis, swap run_at &
    # the dict.
    redis.zadd(SCHEDULED_ZSET_KEY, run_at, {'queue': queue, 'data': data})

schedule_task('foo_queue', foo_data, 60) 
```

调度员看起来像：

```
while working:
    redis.watch(SCHEDULED_ZSET_KEY)
    min_score = 0
    max_score = time.time()
    results = redis.zrangebyscore(
        SCHEDULED_ZSET_KEY, min_score, max_score, start=0, num=1, withscores=False)
    if results is None or len(results) == 0:
        redis.unwatch()
        sleep(1)
    else: # len(results) == 1
        redis.multi()
        redis.rpush(results[0]['queue'], results[0]['data'])
        redis.zrem(SCHEDULED_ZSET_KEY, results[0])
        redis.exec() 
```

foo 工人看起来像：

```
while working:
    task_data = redis.blpop('foo_queue', POP_TIMEOUT)
    if task_data:
        foo(task_data) 
```

[1] 此解决方案基于 not_a_golfer，http://www.saltycrane.com/blog/2011/11/unique-python-redis-based-queue-delay/ 中的一个[，](http://www.saltycrane.com/blog/2011/11/unique-python-redis-based-queue-delay/)以及用于事务的 redis 文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T10:53:38.270

您没有指定您使用的语言。您至少有 3 种替代方法可以做到这一点，而无需至少在 Python 中编写一行代码。

1.  Celery 有一个可选的 redis 代理。 [http://celeryproject.org/](http://celeryproject.org/)

2.  resque 是一个非常流行的使用 redis 的 redis 任务队列。 [https://github.com/defunkt/resque](https://github.com/defunkt/resque)

3.  RQ 是一个简单而小型的基于 redis 的队列，旨在“从 celery 和 resque 中获取好东西”，并且使用起来更简单。 [http://python-rq.org/](http://python-rq.org/)

如果你不能使用它们，你至少可以看看它们的设计。

但是要回答你的问题 - 你想要的可以用 redis 来完成。实际上，我过去或多或少地写过。

编辑：至于在redis上建模你想要的东西，这就是我要做的：

1.  使用时间戳对任务进行排队将由客户端直接完成 - 您将任务放入排序集中，时间戳作为分数，任务作为值（参见 ZADD）。

2.  中央调度程序每 N 秒唤醒一次，检查该集合上的第一个时间戳，如果有任务准备好执行，它会将任务推送到“立即执行”列表。这可以使用 ZREVRANGEBYSCORE 在“等待”排序集上完成，获取时间戳<=now 的所有项目，因此您可以一次获得所有准备好的项目。推送由 RPUSH 完成。

3.  工作人员在“立即执行”列表中使用 BLPOP，当有事情要做时醒来，然后做他们的事情。这是安全的，因为 redis 是单线程的，没有 2 个工作人员会执行相同的任务。

4.  完成后，工作人员将结果放回响应队列，由调度程序或其他线程检查。您可以添加“待处理”存储桶以避免失败或类似情况。

所以代码看起来像这样（这只是伪代码）：

客户：

```
ZADD "new_tasks" <TIMESTAMP> <TASK_INFO> 
```

调度员：

```
while working:
   tasks = ZREVRANGEBYSCORE "new_tasks" <NOW> 0 #this will only take tasks with timestamp lower/equal than now
   for task in tasks:

       #do the delete and queue as a transaction
       MULTI
       RPUSH "to_be_executed" task
       ZREM "new_tasks" task
       EXEC

   sleep(1) 
```

我没有添加响应队列处理，但它或多或少像工人：

工人：

```
while working:
   task = BLPOP "to_be_executed" <TIMEOUT>
   if task:
      response = work_on_task(task)
      RPUSH "results" response 
```

编辑：无状态原子调度程序：

```
while working:

   MULTI
   ZREVRANGE "new_tasks" 0 1
   ZREMRANGEBYRANK "new_tasks" 0 1
   task = EXEC

   #this is the only risky place - you can solve it by using Lua internall in 2.6
   SADD "tmp" task

   if task.timestamp <= now:
       MULTI
       RPUSH "to_be_executed" task
       SREM "tmp" task
       EXEC
   else:

       MULTI
       ZADD "new_tasks" task.timestamp task
       SREM "tmp" task
       EXEC

   sleep(RESOLUTION) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-24T18:06:01.323

如果您正在寻找关于 Java 的现成解决方案。[雷迪森](https://redisson.org)适合您。它允许使用熟悉的[ScheduledExecutorService](https://github.com/mrniko/redisson/wiki/9.-distributed-services#94-distributed-scheduled-executor-service) api 并基于 Redis 队列以分布式方式在[Redisson 节点上调度和执行任务（具有 cron-expression 支持）。](https://github.com/mrniko/redisson/wiki/12.-Standalone-node)

这是一个例子。`java.lang.Runnable`首先使用接口定义一个任务。每个任务都可以通过注入对象访问[Redis实例。](http://redis.io)`RedissonClient`

```
public class RunnableTask implements Runnable {

    @RInject
    private RedissonClient redissonClient;

    @Override
    public void run() throws Exception {
        RMap<String, Integer> map = redissonClient.getMap("myMap");
        Long result = 0;
        for (Integer value : map.values()) {
            result += value;
        }
        redissonClient.getTopic("myMapTopic").publish(result);
    }

} 
```

现在可以将其汇总到`ScheduledExecutorService`：

```
RScheduledExecutorService executorService = redisson.getExecutorService("myExecutor");
ScheduledFuture<?> future = executorService.schedule(new CallableTask(), 10, 20, TimeUnit.MINUTES);

future.get();
// or cancel it
future.cancel(true); 
```

带有 cron 表达式的示例：

```
executorService.schedule(new RunnableTask(), CronSchedule.of("10 0/5 * * * ?"));

executorService.schedule(new RunnableTask(), CronSchedule.dailyAtHourAndMinute(10, 5));

executorService.schedule(new RunnableTask(), CronSchedule.weeklyOnDayAndHourAndMinute(12, 4, Calendar.MONDAY, Calendar.FRIDAY)); 
```

所有任务都在[Redisson 节点](https://github.com/mrniko/redisson/wiki/12.-Standalone-node)上执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T08:23:38.357

一种组合方法似乎是合理的：

1.  没有新的任务时间戳可能小于当前时间（如果小于则钳位）。假设可靠的 NTP 同步。

2.  所有任务都在键处进入存储桶列表，并以任务时间戳为后缀。

3.  此外，所有任务时间戳都转到一个专用的 zset（键和分数——时间戳本身）。

4.  通过单独的 Redis 列表从客户端接受新任务。

5.  循环：通过 zrangebyscore ...limit 获取最旧的 N 个过期时间戳。

6.  新任务列表和获取时间戳列表超时的 BLPOP。

7.  如果有旧任务，请处理它。如果是新的 - 添加到存储桶和 zset。

8.  检查已处理的存储桶是否为空。如果是这样 — 从 zset 中删除 list 和 entrt。可能不检查最近过期的存储桶，以防止出现时间同步问题。结束循环。

批判？注释？备择方案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-10T11:40:50.890

## 卢阿

我做了一些类似于这里建议的东西，但优化了睡眠持续时间以更精确。如果您在延迟的任务队列中插入很少，则此解决方案很好。以下是我使用 Lua 脚本的方法：

```
local laterChannel = KEYS[1]
local nowChannel = KEYS[2]
local currentTime = tonumber(KEYS[3])

local first = redis.call("zrange", laterChannel, 0, 0, "WITHSCORES")

if (#first ~= 2)
then
    return "2147483647"
end

local execTime = tonumber(first[2])
local event = first[1]

if (currentTime >= execTime)
then
    redis.call("zrem", laterChannel, event)
    redis.call("rpush", nowChannel, event)
    return "0"
else
    return tostring(execTime - currentTime)
end 
```

它使用两个“通道”。`laterChannel`是一个`ZSET`并且`nowChannel`是一个`LIST`。每当需要执行任务时，事件就会从 移动`ZSET`到`LIST`。Lua 脚本响应调度程序在下一次轮询之前应该休眠多少 MS。如果`ZSET`是空的，就永远沉睡。如果是时候执行某事，请不要休眠（即立即再次轮询）。否则，休眠直到执行下一个任务。

*那么如果在调度员睡觉的时候添加了一些东西呢？*

此解决方案与关键空间事件结合使用。您基本上需要订阅的键，`laterChannel`并且每当有添加事件时，您都会唤醒所有调度程序，以便他们可以再次轮询。

然后你有另一个使用阻塞 left pop on 的调度程序`nowChannel`。这表示：

*   您可以让调度程序跨多个实例（即它正在扩展）
*   轮询是原子的，因此您不会有任何竞争条件或双重事件
*   任务由任何空闲的实例执行

有一些方法可以进一步优化这一点。例如，不是返回“0”，而是从 zset 中获取下一项并直接返回正确的睡眠时间。

## 到期

如果不能使用 Lua 脚本，可以在过期文档上使用键空间事件。订阅频道并在 Redis 驱逐它时接收事件。然后，抓住一把锁。这样做的第一个实例会将其移动到列表（“立即执行”通道）。然后你不必担心睡眠和轮询。Redis 会告诉你什么时候该执行某事。

```
execute_later(timestamp, eventId, event) {
    SET eventId event EXP timestamp
    SET "lock:" + eventId, ""
}

subscribeToEvictions(eventId) {
    var deletedCount = DEL eventId
    if (deletedCount == 1) {
        // move to list
    }
} 
```

然而，这有它自己的缺点。例如，如果您有很多节点，所有节点都会收到事件并尝试获取锁。但我仍然认为这里提出的任何建议总体上都较少。

# sql-server - 如何使用 Microsoft.SqlServer.Management.Smo 以编程方式导出 SQL 架构

> ID：10868554
> 
> 赞同：6
> 
> 时间：2012-06-03T07:11:11.590
> 
> 标签：sql-server, database, sql-server-2008

我在 C# 中构建了一个简单的实用程序，它使用 [Microsoft.SqlServer.Management.Smo](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.aspx)对象来导出数据库模式。在我添加全文索引之前，这一直很好用。

当它导出用于创建全文索引的 SQL 时，它不包括在索引中定义的列。例如，假设我有一个名为“Recipes”的表，其中 2 列包含在名为“RecipeName”“Description”的 FT 索引中。使用我的实用程序转储模式会生成以下 SQL：

```
CREATE FULLTEXT INDEX ON [dbo].[Recipes]
KEY INDEX [PK_Recipes]ON ([ft], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = SYSTEM) 
```

我希望被抛弃的是这个（注意列）：

```
CREATE FULLTEXT INDEX ON [dbo].[Recipes](
    [Description] LANGUAGE [English], 
    [RecipeName] LANGUAGE [English]
)
KEY INDEX [PK_Recipes]ON ([ft], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = SYSTEM) 
```

这是从数据库文件生成模式的 C#：

```
static void GenerateScript(string sourceDbPath, string destinationScriptPath)
{
    try
    {
        string           connString = string.Format(@"Data Source=.;AttachDbFilename={0};Integrated Security=True;User Instance=True", sourceDbPath);
        SqlConnection       sqlConn = new SqlConnection(connString);
        ServerConnection serverConn = new ServerConnection(sqlConn);
        Server               server = new Server(serverConn);            
        Database           database = server.Databases[sourceDbPath];
        Transfer           transfer = new Transfer(database);
        ScriptingOptions    options = new ScriptingOptions();

        options.AppendToFile = false;       // Overwrite file
        options.ClusteredIndexes = true;
        options.Indexes = true;
        options.DriAll = true;
        options.Triggers = true;
        options.Bindings = true;
        options.Default = true;
        options.IncludeDatabaseContext = false;
        options.IncludeHeaders = true;
        options.FullTextIndexes = true;

        options.SchemaQualify = true;
        options.SchemaQualifyForeignKeysReferences = true;
        options.ScriptSchema = true;
        options.ScriptData = false;
        options.ScriptDrops = false;

        options.FileName = destinationScriptPath;
        transfer.Options = options;
        transfer.CopyAllFullTextCatalogs = true;
        transfer.CopyAllFullTextStopLists = true;
        transfer.CopyAllTables = true;

        transfer.ScriptTransfer();
    }
    catch(Exception ex)
    {
        Console.WriteLine(ex.ToString());
        Environment.Exit(-1);
    }
} 
```

谁能发现我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:08:34.770

我找不到包含全文索引创建语句中的列的脚本选项组合。

[因此，我通过执行sp_help_fulltext_tables](http://msdn.microsoft.com/en-us/library/aa933422%28v=sql.80%29)和[sp_help_fulltext_columns](http://msdn.microsoft.com/en-us/library/aa933445%28v=sql.80%29)存储的过程来查询数据库的全文索引信息。这使我可以手动构建语句。

不理想，但它有效。

# asp.net - Asp.net 自定义 404 无法使用 Intelligencia 重写器工作

> ID：10868557
> 
> 赞同：1
> 
> 时间：2012-06-03T07:11:17.677
> 
> 标签：asp.net, url-rewriting, http-status-code-404

网络配置：

```
<customErrors mode="On">
      <error statusCode="404" redirect="~/Page-Introuvable" />
  </customErrors> 
```

重写器.config：

```
<rewriter>
    <rewrite url="~/Page-Introuvable" to="~/PageNotFound.aspx" />
</rewriter> 
```

当输入这个不存在的 url 时：

> [http://example.com/qwerty.aspx](http://example.com/qwerty.aspx)

我看到我的错误 404 自定义页面

键入此内容时：

> [http://example.com/qwerty](http://example.com/qwerty)（不带 .aspx）

我收到服务器页面 404 错误

我想知道在这种情况下如何显示我的自定义页面。

非常感谢你！

**回答**

将此添加到 web.config 部分 System.webServer ：

```
<httpErrors errorMode="Custom">
      <clear/>
      <error statusCode="404" responseMode="Redirect" path="PageNotFound.aspx"/>
  </httpErrors> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:31:01.570

`<customErrors>`仅适用于由 asp.net（aspx、ashx...）处理的扩展，供所有其他人使用`<httpErrors>`：[http ://www.iis.net/ConfigReference/system.webServer/httpErrors](http://www.iis.net/ConfigReference/system.webServer/httpErrors)

```
<system.webServer>
    <httpErrors errorMode="DetailedLocalOnly" defaultResponseMode="ExecuteURL" defaultPath="/error.aspx?code=404">
        <clear/>
        <error statusCode="404" responseMode="ExecuteURL" path="/error.aspx?code=404"/>
    </httpErrors>
</system.webServer> 
```

# c# - 用另一个接口扩展一个接口

> ID：10868570
> 
> 赞同：1
> 
> 时间：2012-06-03T07:13:22.417
> 
> 标签：c#, inheritance, interface, xamarin.ios

今天是个好日子，

我有一个关于接口以及它们如何相互扩展/继承的问题。这个问题与 GPU 编程无关。

**问题：**

我有两个接口：GPUImageView 和 GPUImageInput。

GPUImageView 定义：`interface GPUImageView : GPUImageInput { /*some code*/ }`

我有一个功能：`void AddTarget(GPUImageInput newTarget) {/*some code*/}`

当我将 GPUImageView 的实例传递给 AddTarget 时，我收到一个错误，即它无法将 GPUImageView 转换为 GPUImageInput。

**附加信息：**

我正在尝试将 Monotouch 中的 GPUImage 库与 btouch 绑定。我尝试移植他们的一个示例（SimplePhotoFilter）作为测试。

这导致

*   我放入 ViewDidLoad 方法的演示代码。
*   APIDefinitions.cs 我填充了必要的绑定。
*   StructsAndEnums.cs 暂时为空。

**这是 APIDefinitions.cs 中的代码**

```
namespace GPUImage
{
    [BaseType (typeof(UIView))]
    interface GPUImageView : GPUImageInput{
        [Export ("initWithFrame:")]
        IntPtr Constructor(RectangleF frame);

        [Export ("autoresizingMask")]
        UIViewAutoresizing AutoResizingMask { get; set;}

        [Export ("addSubView")]
        void AddSubView(UIView view);
    }

    [BaseType (typeof(NSObject))]
    [Model]
    interface AVCaptureVideoDataOutputSampleBufferDelegate{

    }

    [BaseType (typeof(NSObject))]
    [Model]
    interface AVCaptureAudioDataOutputSampleBufferDelegate{

    }

    [BaseType (typeof(GPUImageOutput))]
    interface GPUImageVideoCamera : AVCaptureVideoDataOutputSampleBufferDelegate, AVCaptureAudioDataOutputSampleBufferDelegate{
    }   

    [BaseType (typeof(GPUImageVideoCamera))]
    interface GPUImageStillCamera{
        [Export ("outputImageOrientation")]
        UIInterfaceOrientation OutputImageOrientation { get; set;}

        [Export ("startCameraCapture")]
        void StartCameraCapture();      
    }

    [BaseType (typeof(GPUImageSobelEdgeDetectionFilter))]
    interface GPUImageSketchFilter{ 
        [Export ("prepareForImageCapture")]
        void PrepareForImageCapture();
    }

    [BaseType (typeof(GPUImageTwoPassFilter))]
    interface GPUImageSobelEdgeDetectionFilter {
        [Export ("texelWidth")]
        float TexelWidth{ get; set;}

        [Export ("texelHeight")]
        float TexelHeight{ get; set;}
    }

    [BaseType (typeof(GPUImageFilter))]
    interface GPUImageTwoPassFilter {
    }

    [BaseType (typeof(GPUImageOutput))]
    interface GPUImageFilter : GPUImageInput{
    }

    [BaseType (typeof(NSObject))]
    [Model]
    interface  GPUImageInput{
    }

    [BaseType (typeof(NSObject))]
    interface  GPUImageOutput{
        [Export ("addTarget")]
        void AddTarget(GPUImageInput newTarget);
    }
} 
```

**这是 viewController 中的代码：**

```
GPUImage.GPUImageStillCamera stillCamera = new GPUImage.GPUImageStillCamera ();
stillCamera.OutputImageOrientation = UIInterfaceOrientation.Portrait;
GPUImage.GPUImageFilter filter = (GPUImage.GPUImageSketchFilter)new GPUImage.GPUImageSketchFilter ();
((GPUImage.GPUImageSketchFilter)filter).TexelHeight = 1.0f / 1024.0f;
((GPUImage.GPUImageSketchFilter)filter).TexelWidth = 1.0f / 768.0f;
((GPUImage.GPUImageSketchFilter)filter).PrepareForImageCapture ();
stillCamera.AddTarget (filter);
GPUImage.GPUImageView filterView = (GPUImage.GPUImageView)this.View;
filter.AddTarget (filterView); 
```

这些是我得到的错误消息： ImageProcessingLabViewController.cs(37,37): Error CS1503: Argument `#1' cannot convert`GPUImage.GPUImageOutput' expression to type `GPUImage.GPUImageInput' (CS1503) (ImageProcessingLab)

ImageProcessingLabViewController.cs(32,32)：错误 CS1503：参数`#1' cannot convert`GPUImage.GPUImageView' 表达式键入“GPUImage.GPUImageInput” (CS1503) (ImageProcessingLab)

但正如您所看到的，GPUImageFilter 继承/实现/扩展 GPUImageInput，这应该允许我使用/转换 GPUImageSketchFilter、GPUImageOutput 和 GPUImageView 作为 GPUImageInput。

澄清：当我尝试调用需要 GPUImageInput 的 AddTarget 时发生错误。我给它一个从 GPUImageOutput 继承并实现 GPUImageInput 的 GPUImageFilter。GPUImageFilter 应该可以转换为 GPUImageInput，但会导致错误。

感谢任何答案。我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:16:21.770

我不熟悉那个特定的框架，但是，实现的硬件选项有限。

如果库对图像使用 GPGPU（例如 CUDA）缓冲区，则输入和输出图像不会有单独的定义（也许基于纹理内存的快速访问只读图像会有单独的定义）。

如果库使用标准图形管道，则图像可以存储在用作管道输入的纹理中，也可以存储在 PBuffer 中，用作管道的输出 - 两个独立的物理（或逻辑？ - 取决于特定的硬件实现）位置。

要从一种内存类型转移到另一种内存类型是不够的，您需要读取缓冲区并将其写入不同的分配位置。

框架的实现可能对两者使用相同的基类，但是，实现可能不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T01:34:37.570

您所拥有的不是可编译的 C# 代码。这是 Obj-C 绑定定义。然后，btouch 命令行实用程序会生成真正的 C# 代码并编译到您可以引用的库中。在您的示例中，已编译程序集中的类定义为

```
public class GPUImageView : UIView
{
} 
```

和

```
public class GPUImageOutput : NSObject
{
} 
```

它们实际上都不是从 GPUImageInput 继承的，它们都不是真正的接口。您可以阅读本[指南](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c/binding_objc_libs)以获取更多信息。

# php - 关于表单标签的动作属性

> ID：10868572
> 
> 赞同：0
> 
> 时间：2012-06-03T07:13:37.957
> 
> 标签：php, html

嗨，当有人单击表单标签的提交按钮时，我想将信息发送到服务器，但不想刷新或转到另一个 url。

我不知道 AJEX 我是否需要它来达到这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:36:54.270

正如dragon66 在评论中建议的那样，您可以使用内联框架：

```
<form action="..." target="form-results">
...
</form>
<iframe name="form-results"></iframe> 
```

内联框架将显示服务器发送的与页面内容不同但放置在其中的数据。根据服务器的响应，您可能只有一个小框，其中包含有关成功操作的信息。

您可以使用 HTML 属性或 CSS 设置内嵌框架的尺寸（宽度和高度）。如果你想隐藏内联框架，你可以`width=0 height=0 frameborder=0`在 HTML 和/或`iframe { display: none}`CSS中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:17:55.687

是的，你需要ajax。参考这些链接。

[http://be.twixt.us/jquery/formSubmission.php](http://be.twixt.us/jquery/formSubmission.php)。

[http://jquery.malsup.com/form/#ajaxForm](http://jquery.malsup.com/form/#ajaxForm)

以下是如何使用 ajax 提交表单的好例子。

# python - WSGI可以加载几个flask应用吗

> ID：10868580
> 
> 赞同：2
> 
> 时间：2012-06-03T07:15:56.313
> 
> 标签：python, wsgi

在 WSGI 文件中，我们将导入一个 py 文件为

```
from <pyFile> import app as application 
```

但是是否可以通过执行以下操作将多个 py 文件加载到单个 wsgi 文件中：

```
from <pyFile1> import app1 as application
from <pyFile2> import app2 as application 
```

我已经尝试了上述方法，但它不起作用。

有没有不同的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:44:20.330

如果[uwsgi](http://projects.unbit.it/uwsgi/wiki)是您选择的实现，请考虑以下事项：

```
import uwsgi

from <pyFile1> import app1 as application1
from <pyFile2> import app2 as application2

uwsgi.applications = {'':application1, '/app2':application2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:38:52.683

You can't import various modules as the same `name`, e.g.

```
from moduleX import somevar as X
from moduleY import othervar as X 
```

Results in `X == othervar`.

But anyway you can't have multiple applications running in the same instance of Python. That's because

> The application object is simply a callable object that accepts two arguments [[PEP 333]](http://www.python.org/dev/peps/pep-0333/#the-application-framework-side).

Now, a simple WSGI application is something like:

```
def simple_app(environ, start_response):
    """Simplest possible application object"""
    status = '200 OK'
    response_headers = [('Content-type', 'text/plain')]
    start_response(status, response_headers)
    return ['Hello world!\n'] 
```

As you can see, there is no place here to make multiple applications working at the same time, due to the fact that every request is passed to ONE particular application callback.

# windows-phone-7 - HttpWebRequest 无法访问 http://xn--fanbys-exa.org/episodes.m4a.rss

> ID：10868583
> 
> 赞同：7
> 
> 时间：2012-06-03T07:16:40.540
> 
> 标签：windows-phone-7, httpwebrequest, windows-phone-7.1

我在访问以下网址时遇到了一个奇怪的问题：

> [http://xn--fanbys-exa.org/episodes.m4a.rss](http://xn--fanbys-exa.org/episodes.m4a.rss)

这是代码：

```
 void WebRequestButton_Click( object sender, RoutedEventArgs e )
    {
        string url = "http://xn--fanbys-exa.org/episodes.m4a.rss"; 

        if ( Uri.IsWellFormedUriString( url, UriKind.Absolute ) )
        {
            HttpWebRequest webRequest = ( HttpWebRequest )HttpWebRequest.Create( url );
            if ( webRequest != null )
            {
                webRequest.BeginGetResponse( new AsyncCallback( ReadWebRequestCallback ), webRequest ); 
            }
        }
    }

    private void ReadWebRequestCallback( IAsyncResult callbackResult )
    {
        HttpWebRequest request = ( HttpWebRequest )callbackResult.AsyncState;
        HttpWebResponse response = null;

        try
        {
            response = ( HttpWebResponse )request.EndGetResponse( callbackResult );
        }
        catch ( Exception e )
        {
            System.Diagnostics.Debug.WriteLine( e );
        }

        if ( response != null )
        {
            using ( StreamReader httpwebStreamReader = new StreamReader( response.GetResponseStream( ) ) )
            {
                string results = httpwebStreamReader.ReadToEnd( );
                System.Diagnostics.Debug.WriteLine( results );
            }

            response.Close( );
        }
    } 
```

使用 request.EndGetResponse() 读取响应会引发此异常：

```
A first chance exception of type 'System.ArgumentException' occurred in System.Windows.dll
System.ArgumentException ---> System.ArgumentException: The parameter is incorrect.
   at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.WebRequest_Send(InternalWebRequest request)
   at MS.Internal.InternalWebRequest.Send()
   at System.Net.Browser.ClientHttpWebRequest.PrepareAndSendRequest(String method, Uri requestUri, Stream requestBodyStream, WebHeaderCollection headerCollection, CookieContainer cookieContainer)
   at System.Net.Browser.ClientHttpWebRequest.BeginGetResponseImplementation()
   at System.Net.Browser.ClientHttpWebRequest.InternalBeginGetResponse(AsyncCallback callback, Object state)
   at System.Net.Browser.ClientHttpWebRequest.BeginGetResponse(Async'UI Task' (Managed): Loaded 'System.Runtime.Serialization.dll' 
```

据我所知网址

> [http://xn--fanbys-exa.org/episodes.m4a.rss](http://xn--fanbys-exa.org/episodes.m4a.rss)

格式良好。
我试过的所有浏览器都可以处理它。

使用 Fiddler 进行的测试表明，没有从 Windows Phone 模拟器发送 HTTP 请求。

如果尝试了几个不同的 URL（使用活动的 Fiddler 实例）：

```
string url = "http://xn--fanbys-exa.org/episodes.m4a.rss"; 
    // not ok --> System.ArgumentException: The parameter is incorrect.

string url = "http://xn--fanbys-exa.org"; 
    // not ok --> System.ArgumentException: The parameter is incorrect.

string url = Uri.EscapeUriString( "http://xn--fanbys-exa.org/episodes.m4a.rss" ); 
    // not ok --> System.ArgumentException: The parameter is incorrect.

string url = "http://stackoverflow.com";        
    // ok, HTTP request is sent and response is received

string url = "http://stack--overflow.com";    
    // ok, HTTP request is sent and response is received 

string url = "http://xn--stackoverflow.com";    
    // ok, HTTP request is sent and response 502 is received
    // --> System.Net.WebException: The remote server returned an error: NotFound. 
```

可以使用模拟器和设备重现该问题。
我的猜测是这可能与 DNS 有关。
我无法控制引用的网站及其 DNS 条目。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:20:34.553

是的，我也可以验证问题，并且在提琴手中也看不到流量。有史以来最奇怪的错误！

```
 string url = "http://a--b-c.org"; - Fine
  string url = "http://xn--fanbys-exa.org"; - Error
  string url = "http://xn--2fanbys-exa.org"; - Error
  string url = "http://xn--fanbys2-exa.org"; - Error
  string url = "http://xn--fan2bys-exa.org"; - Error
  string url = "http://xn-fanbys-exa.org"; - Fine
  string url = "http://xn--b-exa.org"; - Fine
  string url = "http://xn--f.org"; - Fine
  string url = "http://a--fanbys-exa.org"; - Fine
  string url = "http://xn--fanbys-c.org"; - Fine
  string url = "http://xn--fanbys-exa2.org"; - Fine
  string url = "http://2xn--fanbys-exa.org"; - Fine
  string url = "http://xn--f-exa.org"; - Fine
  string url = "http://xn--fs-exa.org"; - Error
  string url = "http://x--fs-exa.org"; - Fine
  string url = "http://xn--fs.org"; - Fine
  string url = "http://xn--fs-.org"; - Fine
  string url = "http://xn--fs-e.org"; - Fine
  string url = "http://xn--fs-ea.org"; - Fine
  string url = "http://xn--fs-ex.org"; - Fine
  string url = "http://xn--fs-exx.org"; - Error
  string url = "http://xn--fs-eee.org"; - Error
  string url = "http://aa--aa-aaa.org"; - Fine
  string url = "http://aa--aa-eee.org"; - Fine
  string url = "http://xa--aa-eee.org"; - Fine
  string url = "http://xa--fs-eee.org"; - Fine
  string url = "http://zn--fs-eee.org"; - Fine
  string url = "http://xn--fa-eee.org"; - Error
  string url = "http://xn--faa-eee.org"; - Error
  string url = "http://xn--faaaaaaaaaaaaa-eee.org"; - Error
  string url = "http://xn--faaaaaaaaaaaaaeee.org"; - Fine 
```

有趣的是，异常已经发生在“EndGetResponse”之前——如果您在调用“EndGetResponse”之前查看私有字段“_exception”。

不出所料，WebClient 也显示出类似的问题：

```
 const string url = "http://xn--fanbys-exa.org/episodes.m4a.rss";

        var wc = new WebClient();
        wc.DownloadStringCompleted += (o, args) =>
                                          {
                                              Debug.WriteLine(args.Result);
                                          };

        wc.DownloadStringAsync(new Uri(url, UriKind.Absolute)); 
```

产量：

```
 System.Net.WebException was unhandled
    Message=An exception occurred during a WebClient request. 
    StackTrace:
         at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
         at System.Net.DownloadStringCompletedEventArgs.get_Result()
         at OddballHttp.MainPage.<MainPage_Loaded>b__0(Object o, DownloadStringCompletedEventArgs args)
         at System.Net.WebClient.OnDownloadStringCompleted(DownloadStringCompletedEventArgs e)
         at System.Net.WebClient.DownloadStringOperationCompleted(Object arg)
         at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
         at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
         at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
         at System.Delegate.DynamicInvokeOne(Object[] args)
         at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
         at System.Delegate.DynamicInvoke(Object[] args)
         at System.Windows.Threading.DispatcherOperation.Invoke()
         at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
         at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
         at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
         at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
         at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)
    InnerException: System.ArgumentException
         Message=""
         StackTrace:
              at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
              at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
              at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)
              at System.Net.WebClient.DownloadBitsResponseCallback(IAsyncResult result)
              at System.Net.Browser.ClientHttpWebRequest.<>c__DisplayClassa.<InvokeGetResponseCallback>b__8(Object state2)
              at System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state)
              at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
              at System.Threading.ThreadPool.WorkItem.doWork(Object o)
              at System.Threading.Timer.ring()
         InnerException: System.ArgumentException
              Message=The parameter is incorrect. 
              StackTrace:
                   at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
                   at MS.Internal.XcpImports.WebRequest_Send(InternalWebRequest request)
                   at MS.Internal.InternalWebRequest.Send()
                   at System.Net.Browser.ClientHttpWebRequest.PrepareAndSendRequest(String method, Uri requestUri, Stream requestBodyStream, WebHeaderCollection headerCollection, CookieContainer cookieContainer)
                   at System.Net.Browser.ClientHttpWebRequest.BeginGetResponseImplementation()
                   at System.Net.Browser.ClientHttpWebRequest.InternalBeginGetResponse(AsyncCallback callback, Object state)
                   at System.Net.Browser.ClientHttpWebRequest.BeginGetResponse(AsyncCallback callback, Object state)
                   at System.Net.WebClient.DownloadBits(WebRequest request, Stream writeStream, CompletionDelegate completionDelegate, AsyncOperation asyncOp)
                   at System.Net.WebClient.DownloadStringAsync(Uri address, Object userToken)
                   at System.Net.WebClient.DownloadStringAsync(Uri address)
                   at OddballHttp.MainPage.MainPage_Loaded(Object sender, RoutedEventArgs e)
                   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
                   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

# javascript - jQuery更改单元格类并更新数据

> ID：10868590
> 
> 赞同：4
> 
> 时间：2012-06-03T07:18:25.407
> 
> 标签：javascript, jquery

我的页面中有一个表格，如下所示。

```
<table id="tbl">
  <tr>
    <td class="field" id="field1s">field1x</td>
    <td class="field" id="field2s">field2x</td>
    <td class="field" id="field3s">field3x</td>
    <td class="field" id="field4s">field4x</td>
    <td class="xx">#</td>
    <td class="yy">#</td>
  </tr>
</table> 
```

行中的字段文本更改为`<td class="xx">`字段输入，并在下次单击时更新。这工作正常。但是我希望当用户第一次单击时，类更改为`xx`和更改`aa`为。然后该字段可以更改为输入，使用户能够更改文本。如果用户再次单击（以前），则行中的文本可能会更新，如果用户单击（以前是 #），则该行可能会回到以前的状态。（就像确定和取消一样）。`yy``bb``<td class="xx">#</td>``<td class="aa">#</td>``<td class="xx">#</td>``<td class="bb">#</td>`

[**这**](http://jsfiddle.net/blasteralfred/QtLXG/1/)是小提琴。

我怎样才能做到这一点？我更喜欢更简单、更快的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:27:19.570

使用 jQuery[**`.data()`**](http://api.jquery.com/data/)你可以很容易地解决它。我觉得你不需要换班。

```
 $('#tbl .xx').toggle(
      function() {
        $(this).siblings('.field').each(function(){
          var t = $(this).text();
          $(this).data('prev', t);
          $(this).html($('<input />',{'value' : t}));
        });
      },
      function() {
        $(this).siblings().each(function(){
          var inp = $(this).find('input');
          if (inp.length){
            $(this).text(inp.val());
          }
        });
      }    
    );

    $('#tbl .yy').click(function() {
      $(this).siblings('.field').each(function(){
            $(this).text($(this).data('prev'));
       });
    }); 
```

**[演示](http://jsfiddle.net/8rVxc/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:31:24.540

如果你想继续上课，试试[**这个 fiddle**](http://jsfiddle.net/ult_combo/QtLXG/3/)。

我已经使用事件委托[`.live()`](http://api.jquery.com/live/)来与您的班级更改保持一致。

`.toggle`应该删除以防止一些错误 - 例如在codeparadox的答案中，如果您单击编辑按钮，然后单击取消按钮，则在编辑按钮中的下一次单击将触发错误的功能。

如果您在页面中使用 jQuery 1.7+，请不要忘记替换`.live()`为。`.on()`

# git - 当我在子目录中时，如何在整个树中 git grep？

> ID：10868591
> 
> 赞同：13
> 
> 时间：2012-06-03T07:18:32.030
> 
> 标签：git, grep

通常当我发出时`git grep`，它只会搜索当前目录及以下目录，例如

```
$ cat A
1
$ cd d
$ cat B
1
$ git grep 1
B:1
$ cd ..;git grep 1
A:1
B:1 
```

我怎么知道`git grep`“搜索整个树，无论我在当前的工作目录中”？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-08-03T16:18:03.680

**`:/`魔法之路**

```
git grep pattern -- :/ 
```

适用于此命令和其他命令的 Git 1.9.1，如以下所述：[https ://stackoverflow.com/a/31696782/895245](https://stackoverflow.com/a/31696782/895245)

TODO 在 grepping 文档后我找不到明确的文档参考，但在发行说明中有时会提到它：

Documentation/RelNotes/1.7.6.txt:39: 是无操作的，但是“git add -u :/”会添加更新的内容

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-03T07:25:58.150

运行 shell 命令的 Git 别名始终在顶级目录中执行（参见[`git config`手册页](https://git-scm.com/docs/git-config#Documentation/git-config.txt-alias)），因此您可以将其添加到`.gitconfig`文件中：

```
[alias]
    rgrep = !git grep 
```

或者，您可以使用`git rev-parse --show-toplevel`获取根目录，然后您可以将其`git grep`作为脚本或别名的基础传递给：

```
git grep $pattern -- `git rev-parse --show-toplevel` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:32:28.640

将此添加到您的 Git 配置文件中，以创建一个`grepall`别名来满足您的需求：

```
[alias]
    grepall = !git grep 
```

（非本地别名，例如以 a 开头的别名，`!`总是从存储库的顶层运行。）

# objective-c - 使用 NSTableView 在 OS X 上模拟动画 iPhone 最近通话列表

> ID：10868592
> 
> 赞同：1
> 
> 时间：2012-06-03T07:19:02.530
> 
> 标签：objective-c, nstableview

我正在尝试非常接近地模仿 iPhone 手机应用程序最近调用 TableView 的功能，在 OS X 上使用 NSTableView。所需的功能是您单击一个按钮，TableView 从显示所有最近调用切换到显示子集在那些错过的电话中，我想要你在 iPhone 上看到的动画，其中行的出现和消失是动画的。

我正在使用基于视图的 NSTableView，我将它与手动数据源和委托非常简单地连接到我的视图控制器中（不使用可可绑定）。

除了尝试删除行以显示“错过”呼叫的子集时，一切正常。如果我只是重建作为 TableView 数据源的 NSMutableArray，然后调用 reloadData，它就可以完美运行。但这没有给我任何动画。这是导致 TableView 和数据源 NSMutableArray 完美同步的非动画版本，TableView 中的内容正确，但没有动画：

```
- (IBAction)showMissed:(id)sender {    
  NSMutableIndexSet *indices = [NSMutableIndexSet indexSet];
  Call *call;

  for (call in callsArray) {
    if (!call.missed) {
      [indices addIndex:[callsArray indexOfObject:call]];
    }
  }
  if ([indices count] > 0) {
    [callsArray removeObjectsAtIndexes:indices];
    [self.recentsTableView reloadData];
  }
} 
```

当我尝试使用 NSTableView`removeRowsAtIndexes:indices withAnimation:`方法来获取我想要的动画时，我得到了一些非常奇怪的行为。这是动画的 showMissed 方法：

```
- (IBAction)showMissed:(id)sender {    
  NSMutableIndexSet *indices = [NSMutableIndexSet indexSet];
  Call *call;

  for (call in callsArray) {
    if (!call.missed) {
      [indices addIndex:[callsArray indexOfObject:call]];
    }
  }
  if ([indices count] > 0) {
    [callsArray removeObjectsAtIndexes:indices];
    [self.recentsTableView removeRowsAtIndexes:indices withAnimation:NSTableViewAnimationSlideUp];
  }
} 
```

我在该方法的动画版本中使用的逻辑是从 Apple 的[TableViewPlaygound](http://developer.apple.com/library/mac/#samplecode/TableViewPlayground/Introduction/Intro.html)示例代码中提取的。

当我运行这段代码时，我得到了两个奇怪的结果。首先，TableView 不仅仅显示“错过”的调用——它显示了正确的行数（即 TableView 中的行数等于标记为错过的调用对象的数量），但行中显示的实际对象是有些错过了，有些没有错过。

更奇怪的是，在动画版本运行后，callsArray 中包含所有 Call 对象，就好像该`[callsArray removeObjectsAtIndexes:indices];`语句根本不存在一样。似乎该方法以某种`removeRowsAtIndexes:indices withAnimation:`方式弄乱了我的数据源数组的内容并将整个事情搞砸了。

FWIW，我的动画 showAll 方法基本上与上述方法相反，使用`insertRowsAtIndexes:indices withAnimation:`似乎工作得很好。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:40:55.067

在数据源数组和 tableView 之间的同步中一定有一些损坏。我通过在方法顶部添加一个 reloadData 调用来修复它。这是固定的 showMissed 方法：

```
- (IBAction)showMissed:(id)sender {    
  NSMutableIndexSet *indices = [NSMutableIndexSet indexSet];
  Call *call;

  [self.recentsTableView reloadData];

  for (call in callsArray) {
    if (!call.missed) {
      [indices addIndex:[callsArray indexOfObject:call]];
    }
  }
  if ([indices count] > 0) {
    [callsArray removeObjectsAtIndexes:indices];
    [self.recentsTableView removeRowsAtIndexes:indices withAnimation:NSTableViewAnimationSlideUp];
  }
} 
```

# c# - 异常“无效的列名 'False' 与 SqlConnection

> ID：10868594
> 
> 赞同：6
> 
> 时间：2012-06-03T07:20:13.217
> 
> 标签：c#, sql, asp.net, sql-server, ado.net

我在语句中收到异常*Invalid column name 'False'*

```
reader = cmd.ExecuteReader(CommandBehavior.SingleRow); 
```

我知道这可能与 SQL 的布尔类型有点“位”有关，它没有转换`false`为`0`. 您如何减轻这种情况，或者这就是问题所在？

```
 public override bool ValidateUser(string username, string password)
    {
        bool isValid = false;

        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand("SELECT Password, IsApproved FROM Users" +
                " WHERE Email = @Email AND ApplicationName = @ApplicationName AND IsLockedOut = False", conn);

        cmd.Parameters.Add("@Email", SqlDbType.NVarChar, 128).Value = username;
        cmd.Parameters.Add("@ApplicationName", SqlDbType.NVarChar, 255).Value = m_ApplicationName;

        SqlDataReader reader = null;
        bool isApproved = true;
        string pwd = "";

        try
        {
            conn.Open();

            reader = cmd.ExecuteReader(CommandBehavior.SingleRow);

            if (reader.HasRows)
            {
                reader.Read();
                pwd = reader.GetString(0);
                isApproved = reader.GetBoolean(1);
            }
            else
            {
                return false;
            }

            reader.Close();

            if (CheckPassword(password, pwd))
            {
                if (isApproved)
                {
                    isValid = true;

                    SqlCommand updateCmd = new SqlCommand("UPDATE Users SET LastLoginDate = @LastLoginDate" +
                                                            " WHERE Email = @Email AND ApplicationName = @ApplicationName", conn);

                    updateCmd.Parameters.Add("@LastLoginDate", SqlDbType.DateTime).Value = DateTime.Now;
                    updateCmd.Parameters.Add("@Email", SqlDbType.NVarChar, 255).Value = username;
                    updateCmd.Parameters.Add("@ApplicationName", SqlDbType.NVarChar, 255).Value = m_ApplicationName;

                    updateCmd.ExecuteNonQuery();
                }
            }
            else
            {
                conn.Close();

                UpdateFailureCount(username, "password");
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T07:22:04.957

用于`IsLockedOut =0`检查是否为假。

IsLockedOut 是一个位数据类型的字段，存储 0 表示假，1 表示真。

所以同样用于查询/

如果 IsLockedOut 是 varchar 字段，则`IsLockedOut='False'`在比较字符串比较时使用。

# audio - 如何在循环外的循环中使用值？

> ID：10868596
> 
> 赞同：0
> 
> 时间：2012-06-03T07:21:19.917
> 
> 标签：audio, loops, for-loop

我问了另一个没有回答的问题，这导致了我这个问题。我有一个 for 循环，可以在声音文件中创建一个样本数组。我对两个文件执行此操作，并尝试将它们合并到第三个文件中。但是，值数组仅存在于 for 循环中，因此我不能在第三个文件中使用我需要的值，因为我还需要使用 for 循环访问第三个文件中的样本数组。在这种情况下，嵌套的 for 循环似乎没有意义。

抱歉忘了提到我正在使用python。这是让我感到困惑的代码块。

```
for index in getSamples(sound1):
    v1 = getSampleValue(index)

  for index in getSamples(sound2):
    v2 = getSampleValue(index)

  for index in getSamples(sound3):
    setSampleValue(index, v1+v2) 
```

所以代码基本上从sound1中获取所有样本，从sound 2中获取所有样本，并尝试将sound3中的样本（与两种声音的长度相同）设置为每个索引处每个样本的组合。

但是，当这只播放/探索声音 3 的空白声音时。我认为问题在于 v1 和 v2 仅等于单个 for 循环中整个数组的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:31:28.187

为了使用循环外的变量来引用数组，您需要在循环外初始化该变量。这为您提供了对数组的引用。

```
var array = new Array();

for (int x=0; x<sample.length(); x++) {
    //do stuff in the loop to 'array' variable
}

//do what you want with 'array' after the loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:27:20.730

由于您不提供任何代码块，因此不确定您打算做什么。但基本上，是的，你可以。我会用php写一些东西：

```
$myarray = array(); //init the array
for($i=1; $i<10; $i++){
   //do something with myarray
}
//you can use myarray here 
```

关键是：在循环开始之前在循环外声明“你想使用的任何东西”

# javascript - 强制javascript刷新

> ID：10868600
> 
> 赞同：-1
> 
> 时间：2012-06-03T07:22:13.713
> 
> 标签：javascript, page-refresh

我正在尝试使用 Indeed.com 提供的外部 javascript，但是当我更改`ind_q`变量或`ind_l`. 它可以在 IE9 和 Safari 中运行，但不能在 Chrome 或 Firefox 中运行，除非我将它们置于隐身模式。我已经尝试过在 ex 的末尾附加一个随机 # 的建议。带有“？”的脚本 但没有运气。关于为什么它可以在 2 个浏览器中运行但不能在其他浏览器中运行的任何线索？猜测这是某种缓存问题，但不知道如何解决。此外，如果我更改`ind_n`变量（即返回的结果数，它在所有浏览器中都会更改）

这些是我可以更改的唯一变量：

```
<script type='text/javascript'>
var ind_pub = '55555555555';
var ind_el = 'indJobContent';
var ind_pf = '';
var ind_q = 'job title';
var ind_l = '<?php echo $zip_code; ?>';
var ind_chnl = 'none';
var ind_n = 10;
var ind_d = 'http://www.indeed.com';
var ind_t = 20;
var ind_c = 10;
</script> 
```

这就是我链接到 Indeed 脚本的方式：

```
<script type='text/javascript' src='http://www.indeed.com/ads/jobroll-widget-v2.js'>   </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:00:41.183

如果您想强制重新下载脚本，这是一个 hacky 解决方法，但请尝试动态加载脚本（通过脚本）并将某些内容附加到 URL 的末尾。例如 ...js?a=UNIQUE_NUMBER 或 ...js#UNIQUE_NUMBER。这是一个hacky解决方法，但可以帮助

# iphone - 核心数据不更新

> ID：10868602
> 
> 赞同：0
> 
> 时间：2012-06-03T07:22:24.697
> 
> 标签：iphone, xcode, core-data, sdk

这是我采取的步骤顺序：

*   将数据加载到表视图中
*   添加新数据
*   单击以查看有关单元格的更多详细信息
*   加载详细信息
*   编辑详细信息
*   按保存
*   返回表格视图
*   一切都很好
*   重新打开应用程序
*   没有更新

我的sqlite也有这个问题，我没有解决。不，我也堆满了 CoreData。

```
-(IBAction)save:(id)sender
{
    [passwords setValue:nametxt.text forKey:@"name"];

    [passwords setValue:usernametxt.text forKey:@"username"];

}

-(void) viewWillAppear:(BOOL)animated
{
    self.title = passwords.name;

    nametxt.text = passwords.name;
    usernametxt.text = passwords.username;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:33:29.693

你需要调用`save`你的方法`NSManagedObjectContext`。

```
NSError *error = nil;
[managedObjectContext save:&error];
if (error) {
//inform user
} 
```

# mysql - 使用 Perl 查找复合主键的一部分

> ID：10868604
> 
> 赞同：1
> 
> 时间：2012-06-03T07:22:33.847
> 
> 标签：mysql, perl

我正在尝试通过 Perl 查询 MySQL 数据库。我的数据库有一个表，其主键是 PK1、PK2 和 PK3 三列的组合。我有数组 arr1 和 arr2 分别包含一些 PK1 和 PK2 的值。我想在数据库中为 arr1 和 arr2 的每个可能组合找到对应的 PK3 值（可能有一些组合没有 PK3 的值）。例如：

```
PK1 PK2 PK3
"JIM"   "RED"   1
"JOHN"  "BLUE"  2
"ANN"   "GREEN" 3
"ANN"   "WHITE" 4
"ME"    "BLACK" 5
"ME"    "RED"   6

arr1 = ("JIM", "ME", "ANN")
arr2 = ("BLACK", "RED") 
```

我应该得到结果：

```
arr3 = (1, 5, 6) 
```

我能想出的最佳解决方案是：

```
foreach my $el1 (@arr1) {
    $i = 0;
    $query = "SELECT PK3 FROM table WHERE PK1 = $el1 AND PK2 = ?;";
    foreach my $el2 (@arr2) {
        my $query_handle = $connxn->prepare($query);
        $query_handle->execute($el2);
        $query_handle->bind_columns(undef, \$rec);
        while($query_handle->fetch()) {
            push(@arr3, $rec); 
        }
    }
} 
```

但这行不通，因为会有 $el1 和 $el2 的组合，没有什么可以绑定的。有没有更好/更快的方法来做到这一点？它是一张大桌子，而且数组也很长，所以我的程序即使没有给我错误也需要时间。我在这里没有想法，所以任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T08:28:27.443

您想要的查询是：

```
SELECT PK3 FROM my_table WHERE PK1 IN ('JIM','ME','ANN') AND PK2 IN ('BLACK','RED') 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/5464c/1)上查看。

构建它：

```
my $query = sprintf(
  "SELECT PK3 FROM my_table WHERE PK1 IN (%s) AND PK2 IN (%s)",
  join(",", ('?')x@arr1),
  join(",", ('?')x@arr2)
);
my $query_handle = $connxn->prepare($query);
$query_handle->execute((@arr1, @arr2)); 
```

# php - PHP MySQL & AJAX 搜索过滤器时间延迟

> ID：10868607
> 
> 赞同：1
> 
> 时间：2012-06-03T07:23:38.523
> 
> 标签：php, javascript, mysql, ajax, search

这是我第一次在 php 和 JavaScripts 上工作……需要你的帮助来修复一些东西。

我的网站在标题处有一个搜索框，当提交搜索词时，它会转到包含过滤器菜单和搜索结果的 search.php。过滤器菜单基于几个选择列表。只要在过滤器菜单中单击任何选项，它就会更新搜索结果。

为此，我使用 javascript 从另一个 php 文件“SearchResult.php”调用数据来更新 ID 为 #Result 的 div。

问题：它在本地主机上运行良好，但是在线时会导致更新搜索结果的延迟。

帮助：有什么方法可以显示某种加载让观众理解，或者有什么方法可以让它更快。

这是我的代码：

Java 脚本函数

```
function get() 
{
    $('#Search_Results').hide();
    $.post('SearchResults.php', { Search: form.Search.value, cat: form.category.value, brand: form.brand.value },
    function(output) 
        {
            $('#Search_Results').html(output).show();
        }
)
} 
```

搜索过滤表

```
enter code hereif(!empty($_REQUEST['Search'])){
$SearchTerm = $_REQUEST['Search'];
} else {
    $SearchTerm = '';
}
// Search term submited 
echo '<input name="Search" type="hidden" value="'.$SearchTerm.'" />';
$sql = mysql_query ("SELECT * FROM categories");
echo '<h4>Filter Categories</h4><select name="cat" onChange="get();" size="15">';
echo '<option value="" class="Select_Options">All Categories</option>';
    while ($row = mysql_fetch_array($sql)) 
        {
            echo '<option class="Select_Options" value="' . $row["CategoryID"] . '">' . $row["CategoryName"] . '</option>';
    }
echo '</select>';
//Few more such filters 
```

* * *

搜索结果页面

```
if(!empty($_REQUEST['Search'])){
$SearchTerm = $_REQUEST['Search'];
}
else {
echo 'Please enter search keyword(s)';
exit();
}
if(!empty($_REQUEST['cat'])){
$cat = $_REQUEST['cat'];
$SearchQuery .= " AND categories.CategoryID = '$cat'";
}

if(!empty($_REQUEST['brand'])){
$brand = $_REQUEST['brand'];
$SearchQuery .= " AND brands.BrandID = '$brand'";
}

$sql = "SELECT DISTINCT products.ProductID, ProductKeywords, products.SectionID, products.ProductThumb, products.ProductPrice, products.CategoryID, products.SubCategoryID, products.BrandID, brands.BrandLogo, ProductTitle AS title FROM products 
    INNER JOIN brands ON products.BrandID = brands.BrandID 
    INNER JOIN sections ON products.SectionID = sections.SectionID 
    INNER JOIN categories ON products.CategoryID = categories.CategoryID 
    INNER JOIN subcategory ON products.SubCategoryID = subcategory.SubCatID $ColorJoin
    WHERE MATCH (ProductKeywords) AGAINST ('$SearchTerm*' in boolean mode)$SearchQuery";

$query = mysql_query($sql);
echo '<div id="Product_Search_Container"><ul>';
while ($row = mysql_fetch_array($query)) 
{

    $ProductID = $row["ProductID"];     
    $sql2 = mysql_query ("SELECT COUNT(ProColorID) AS ProductCount FROM productcolors WHERE ProductID = '$ProductID'");     
            while ($row5 = mysql_fetch_array($sql2)) 
            {
                $BrandID = $row["BrandID"];
                $sql3 = mysql_query ("SELECT * FROM brands WHERE BrandID = '$BrandID'");        
                while ($row6 = mysql_fetch_array($sql3)) 
                {
                    $ProductThumb = $row["ProductThumb"];
                    if ($ProductThumb == NULL) { $ProductThumb = "No_Image.jpg"; }

            echo '<li><img src="images/Products/Thumbs/' . $ProductThumb . '" width="210px" height="275px" />
                    <div class="zoomer"><span class="zoom';
                    if ($ProductThumb != "No_Image.jpg") {
                        echo ' cursonstyle" style="position: relative; overflow: hidden;"><img src="images/Products/Thumbs/zoom/' . $ProductThumb . '" alt="' . $row["title"] . '" />
                    '; } else { echo '">'; }
                    echo '</span><span class="Pro_Title">' . $row["title"] . '</span>
                    <span class="BrandLogo"><img src="images/Brands/' . $row6["BrandLogo"] . '" /></span>
                    <span class="ProColors">' . $row5["ProductCount"] . ' Colors</span>
                    <span class="ProPrice">$' . $row["ProductPrice"] . '</span>
                    <a href="?Product=' . $row["ProductID"] . '" class="viewdetails">&nbsp;</a></a></li>';  

                }                           
            }
}

        echo '</ul></div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:21:59.357

您可以在启动发布请求并将其隐藏在回调中时显示加载消息，就像显示它一样简单。

```
function get() 
{
    $('#Search_Results').hide();
    $('#loading').show().html('Please wait while loading..'); // <-- show message on function call
    $.post('SearchResults.php', { Search: form.Search.value, cat: form.category.value, brand: form.brand.value },
    function(output) 
        {
            $('#loading').hide(); // <-- hide in callback function
            $('#Search_Results').html(output).show();
        }
)
} 
```

您还应该处理 ajax 请求中的错误并查看准备好的语句，或者至少对所有用户输入使用[mysql_real_escape_string()](http://at2.php.net/manual/en/function.mysql-real-escape-string.php)。

# php - PHP ImagePNG 只创建一个 33 字节的文件

> ID：10868608
> 
> 赞同：2
> 
> 时间：2012-06-03T07:24:20.830
> 
> 标签：php, image, png

好吧，因为我没有进入 PHP 中的 GD Libary 和 Image 函数，所以我有点卡住了……事实上，从上传的文件创建 JPEG 图像时，相同的函数没有问题 - 但它卡在 png 上……所有我得到的是一个具有正确文件名和目标的 33 字节文件 - 当然原始图像存在并且上传得很好......

```
$altesBild=ImageCreateFromPNG("$PicPathIn"."$bild"); 
$neuesBild=imagecreatetruecolor(300,$neueHoehe);
$neuesBildHeader=imagecreatetruecolor(966,$neueHoeheHeader);  
imagecopyresampled($neuesBild,$altesBild,0,0,0,0,300,$neueHoehe,$breite,$hoehe);
imagecopyresampled($neuesBildHeader,$altesBild,0,0,0,0,966,$neueHoeheHeader,$breite,$hoehe);
ImagePNG($neuesBild,"$PicPathOut"."/thumbs/thumb_"."$bild",80);
ImagePNG($neuesBildHeader,"$PicPathOut"."/header/header_"."$bild",80); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T07:30:17.097

尝试使用 0 到 9 之间的压缩值，如函数[文档](http://php.net/manual/en/function.imagepng.php)中所述`ImagePNG`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:39:59.890

未定义用于压缩的 80 值：这是您的代码的更新

```
$altesBild=ImageCreateFromPNG("$PicPathIn"."$bild"); 
$neuesBild=imagecreatetruecolor(300,$neueHoehe);
$neuesBildHeader=imagecreatetruecolor(966,$neueHoeheHeader);  
imagecopyresampled($neuesBild,$altesBild,0,0,0,0,300,$neueHoehe,$breite,$hoehe);
imagecopyresampled($neuesBildHeader,$altesBild,0,0,0,0,966,$neueHoeheHeader,$breite,$hoehe);
ImagePNG($neuesBild,"$PicPathOut"."/thumbs/thumb_"."$bild",8);
ImagePNG($neuesBildHeader,"$PicPathOut"."/header/header_"."$bild",8); 
```

这应该可以完成这项工作。

# java - 从java程序调用c++时出错

> ID：10868611
> 
> 赞同：1
> 
> 时间：2012-06-03T07:25:04.183
> 
> 标签：java

我想从 java 程序中调用 c++ 可执行文件。但是在我调用它之后，什么也没有发生。然后我关闭程序后，出现一个错误窗口，提示程序异常终止。

代码如下所示：

```
 try {
            Runtime rt = Runtime.getRuntime();
            Process p = rt.exec("discretize.exe");

        } catch (Exception exc) {/*handle exception*/
            exc.printStackTrace();
        } 
```

出现的 Windows 错误如下所示：

[http://dc532.4shared.com/img/8e2-xhaG/debug.PNG](http://dc532.4shared.com/img/8e2-xhaG/debug.PNG)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:44:23.830

最后我找到了答案。

问题是命令提示符没有出现。所以在搜索谷歌之后，我发现了一个提示，建议我简单地说：

> cmd /c 开始

在文件路径之前。所以我将代码更改为如下所示：

> 进程 myProcess = Runtime.getRuntime().exec("cmd /c start D:\A_TA\KODINGAN\TA\src\discretize.exe");

..瞧，命令提示符显示！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:54:52.390

我会尝试在以下站点中执行此操作：http: [//www.boards.ie/vbulletin/showthread.php?t=218960](http://www.boards.ie/vbulletin/showthread.php?t=218960)

例子：

```
Process myProcess = Runtime.getRuntime().exec("path to exe"); 
```

# batch-file - 使用批处理脚本检测 USB 并将 *.* 复制到 USB 驱动器

> ID：10868613
> 
> 赞同：5
> 
> 时间：2012-06-03T07:25:56.180
> 
> 标签：batch-file, usb

我正在尝试编写一个批处理脚本来检测 USB 驱动器，如果它已插入，例如将*c:\test\big.txt 复制*到 USB 驱动器，然后循环检测另一个闪存驱动器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T19:21:20.680

```
@echo off
for %%d in (D: E: F: G: H: I: etc...) do (
   if exist %%d\nul (
      echo USB at drive %%d connected
   )
) 
```

**编辑**：以下是正确的方法：

```
@echo off
for /F "tokens=1*" %%a in ('fsutil fsinfo drives') do (
   for %%c in (%%b) do (
      for /F "tokens=3" %%d in ('fsutil fsinfo drivetype %%c') do (
         if %%d equ Removable (
            echo Drive %%c is Removable (USB^)
         )
      )
   )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T19:14:26.890

我知道这是旧的但是......

```
@echo off

for /F "usebackq tokens=1,2,3,4 " %%i in (`wmic logicaldisk get caption^,description^,drivetype 2^>NUL`) do (

if %%l equ 2 (
copy c:\test\big.txt %%i
        )
        ) 
```

这当然是假设两个驱动器都已插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T08:03:51.177

上面的代码有一个缺陷，下面的代码已经处理了这个代码在XP中工作，并给你USB驱动器号，如果没有连接USB设备，它会告诉你！

:: 2013 年 10 月 12 日凌晨 2:39 成功！！！:: 由 BOBBY GOREJA 改进

```
@echo off

set usbdrv=
set usb=No
:: Above two lines on 12 Oct 2013

fsutil fsinfo drives >de
type de | find "Drives:" /v >dlist

for /F "tokens=1" %%c in ('type dlist') do (

               for /F "tokens=3" %%d in ('fsutil fsinfo drivetype %%c') do (

               rem echo Token is %%d

             if %%d equ Removable (

            echo Drive %%c is Removable (USB^)

             set usbletter=%%c 
             set usb=Yes

            echo USB drive letter is %usbletter%

rem     set usbdrv = %%c   <<< this does NOT work!
 rem              echo USB1 drive letter is %usbdrv%

                                                                )
                                         )
                                    )
 del de
 del dlist

             echo  REPEAT:Device at %usbletter%

if  "%usb%"=="No" echo No USB Device Connected .
set usb= 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:11:24.233

@Aacini 我今天没有很好的设置这个案例，所以我试着找到我的 USB 网络摄像头。我使用`devmgmt.msc`并`devcon listclasses`计算出连接的 USB 相机的成员资格。经过几次测试，我到达了`devcon find =Image USB\*`. 我认为为 USB 大容量存储设备做同样的事情会很简单，所以我尝试了`devcon find =Volume`（每个列表类）。不幸的是，这会导出一个 GUID，然后您必须将其映射到驱动器号。粗略地看一下[这个](https://stackoverflow.com/questions/733206/find-which-drive-corresponds-to-which-usb-mass-storage-device-in-winxp)溢出表明您可以使用注册表从注册表中执行此操作`reg query`，但目前看来这`fsutil`对您的情况来说是最简单的。

# html - jquery mobile中的表格

> ID：10868616
> 
> 赞同：0
> 
> 时间：2012-06-03T07:26:11.953
> 
> 标签：html, jquery-mobile

我想在我的页面中添加类似布局的表格。 ![在此处输入图像描述](../Images/4921b35585008381971b1afe509073fc.png)

单元格中的数据将动态地来自函数。

```
$j.each(records, function() {
    $j('<tr></tr>')
    .hide()
    .attr('id',this.Id)
    .append('<td>' + this.PricebookEntryId+'</td> <td>'+this.Description +'</td> <td>'+this.ListPrice+'</td>')
    .appendTo('#productTable')
    .show();
}); 
```

但这会创建一个非常简单的表格，它看起来不像上面的屏幕截图

![在此处输入图像描述](../Images/9c570176672d5131186131687f406d90.png)

我在文档中找不到这样的布局。任何指针都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:34:14.843

Jquery Mobile 不包含表格小部件，因此您的表格不会在 JQM UI 中重新呈现。

选项：
1\. 自己开发所需的增强功能（从您的屏幕截图来看，它看起来只是纯 CSS）
2\. 尝试使用我不久前使用 JQM 列表视图和[Filament 的响应表模式做的](https://github.com/frequent/RWD-Table-Patterns)[tableview](http://stokkers.mobi/jqm/tableview/demo.html)原始示例 3\. 使用 dataTabels 版本 I '正在工作（例如[这里](https://stackoverflow.com/questions/10386821/mobile-data-entry-mobile-friendly-datagrid/10439160#10439160)）。这看起来与 (2) 相同，但您拥有可用的数据表的所有[功能](http://www.datatables.net/)。

# emacs - 如何在一系列行上运行 emacs 命令？

> ID：10868617
> 
> 赞同：1
> 
> 时间：2012-06-03T07:26:19.900
> 
> 标签：emacs

我想对`sort-lines`整个文件运行命令。

`C-x``h``M-x``sort-lines``Enter`

`sort-lines`我需要在运行命令之前标记该区域。

如何跳过`C-x``h`. 我可以`%`为命令提供一个参数（如在 vim 中）`sort-lines`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T09:40:56.713

这似乎是最简单的解决方案——如果没有区域处于活动状态，则将缓冲区的范围传递给`sort-lines`：

```
(defun my-sort-lines (reverse begin end)
  (interactive "P\nr")
  (sort-lines reverse
              (if (region-active-p) begin (point-min))
              (if (region-active-p) end (point-max)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T08:08:42.107

我不是专家，但我不相信`sort-lines`可以接受行号作为参数。也就是说，编写一个函数来做到这一点应该不难。这是我刚刚破解的一个快速的：

```
(defun my-sort-lines (start end)
  (interactive "nStart: \nnEnd: ")
  (save-excursion
    (save-restriction
      (goto-line start)
      (mark)
      (goto-line (1+ end))
      (narrow-to-region (mark) (point))
      (sort-lines nil (point-min) (point-max))
      (widen)))) 
```

从我所做的有限数量的测试来看，它似乎有效。鉴于我对 emacs lisp 的经验相当少，我确信有待改进。

# mysql - 如何交换更新字段中的值

> ID：10868618
> 
> 赞同：1
> 
> 时间：2012-06-03T07:26:22.123
> 
> 标签：mysql

我猜这[两个](https://stackoverflow.com/questions/4517219/how-to-update-swap-values-of-two-rows-with-single-query) [链接](https://stackoverflow.com/questions/2203202/sql-update-order-of-evaluation)与这个问题有关，但我没有找到解决我的要求的方法，这略有不同。

我有一张桌子，这样说：

```
fruit         color
--------------------
mango          red
apple          red
orange         yellow
banana         green 
```

我需要以一种成为和成为的方式进行`UPDATE`场域。这是更新查询后表的外观。`color``red``yellow``yellow``red`

```
fruit         color
--------------------
mango          yellow
apple          yellow
orange         red
banana         green 
```

这个查询显然不会工作。

```
UPDATE plant SET color = 'yellow' WHERE color = 'red';
UPDATE plant SET color = 'red' WHERE color = 'yellow' 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T07:33:33.333

```
UPDATE plant SET color = CASE color
    WHEN 'yellow' THEN 'red'
    WHEN 'red'    THEN 'yellow'
  END
WHERE color IN ('red', 'yellow') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:29:31.160

您可以在单个查询中执行此操作：

```
UPDATE plant 
SET    color = IF(color = 'yellow', 'red', IF(color = 'red', 'yellow', color))
WHERE  color IN ('red', 'yellow'); 
```

# c# - 将打印页面图形转换为位图 C#

> ID：10868623
> 
> 赞同：3
> 
> 时间：2012-06-03T07:27:34.827
> 
> 标签：c#, graphics, bitmap

我有一个应用程序，用户可以在其中以发票的形式打印所选项目的文档。一切正常，但是在`PrintPage`我想捕获文档或图形的 PrintDocument 事件中，将其转换为位图，以便我可以保存到它以`.bmp`供以后使用/查看。（注意：本文档有多个页面）我是这样设置的：

```
PrintDocument doc = new PrintDocument();
doc.PrintPage += new PrintPageEventHandler(doc_PrintPage);
doc.Print(); 
```

然后在`PrintPage`活动中：

```
private void doc_PrintPage(object sender, PrintPageEventArgs ev)
{
    // Use ev.Graphics to create the document
    // I create the document here

    // After I have drawn all the graphics I want to get it and turn it into a bitmap and save it.
} 
```

我已经删掉了所有`ev.Graphics`代码，只是因为它有很多行。有没有办法在不改变任何将图形绘制到的代码的情况下将图形转换为位图`PrintDocument`？或者做类似的事情，也许复制文档并将其转换为位图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T07:33:52.233

您实际上应该将页面绘制到位图中，然后使用 ev.Graphics 在页面上绘制该位图。

```
private void doc_PrintPage(object sender, PrintPageEventArgs ev)
{
    var bitmap = new Bitmap((int)graphics.ClipBounds.Width,
                            (int)graphics.ClipBounds.Height);

    using (var g = Graphics.FromImage(bitmap))
    {
        // Draw all the graphics using into g (into the bitmap)
        g.DrawLine(Pens.Black, 0, 0, 100, 100);
    }

    // And maybe some control drawing if you want...?
    this.label1.DrawToBitmap(bitmap, this.label1.Bounds);

    ev.Graphics.DrawImage(bitmap, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T20:32:07.667

实际上，Yorye Nathan 在 2012 年 6 月 3 日 7:33 的回答是正确的，这是帮助我的起点。但是，我无法让它按原样工作，所以我做了一些更正以使其在我的应用程序中工作。更正方法是从 PrintPgeEventArgs.Graphics 设备上下文中获取打印机的页面大小，并将 PrintPage Graphics 作为第三个参数包含在新的 Bitmap(...) 构造中。

```
private void doc_PrintPage(object sender, PrintPageEventArgs ppea)
{
  // Retrieve the physical bitmap boundaries from the PrintPage Graphics Device Context
  IntPtr hdc = ppea.Graphics.GetHdc();
  Int32 PhysicalWidth = GetDeviceCaps(hdc, (Int32)PHYSICALWIDTH);
  Int32 PhysicalHeight = GetDeviceCaps(hdc, (Int32)PHYSICALHEIGHT);
  ppea.Graphics.ReleaseHdc(hdc);

  // Create a bitmap with PrintPage Graphic's size and resolution
  Bitmap myBitmap = new Bitmap(PhysicalWidth, PhysicalHeight, ppea.Graphics);
  // Get the new work Graphics to use to draw the bitmap
  Graphics myGraphics = Graphics.FromImage(myBitmap);

  // Draw everything on myGraphics to build the bitmap

  // Transfer the bitmap to the PrintPage Graphics
  ppea.Graphics.DrawImage(myBitmap, 0, 0);

  // Cleanup 
  myBitmap.Dispose();
}

////////
// Win32 API GetDeviceCaps() function needed to get the DC Physical Width and Height

const int PHYSICALWIDTH = 110;  // Physical Width in device units           
const int PHYSICALHEIGHT = 111; // Physical Height in device units          

// This function returns the device capability value specified
// by the requested index value.
[DllImport("GDI32.DLL", CharSet = CharSet.Auto, SetLastError = true)]
public static extern Int32 GetDeviceCaps(IntPtr hdc, Int32 nIndex); 
```

再次感谢 Yorye Nathan 提供原始答案。//AJ

# xml - 在 PowerShell 中对获取内容数据使用 -f 字符串格式

> ID：10868630
> 
> 赞同：2
> 
> 时间：2012-06-03T07:29:31.207
> 
> 标签：xml, powershell, string-formatting, onenote

我有一个放在 txt 文件中的 XML 模板。我想将它导入一个变量并使用“-f”将我的数据输入到字符串中。就像是：

```
$XMLtmplt = get-content C:\XMLtemplate.txt
$XML = "$XMLtmplt" -f $objID $pageTitle $otherData
$OneNoteObject.UpdatePageContent($XML) 
```

这在使用小字符串设置 $XMLtmplt 变量时有效，但在我从文件中导入大字符串时失败。我宁愿不要在我的脚本中放一个长的 XML 字符串；从文件导入很好。到目前为止，我唯一的工作是在插入点之前和之后分解数据，例如：

```
$XML = "<All the first data>"
$XML += $1stVariableToInsert
$XML += "<more XML stuff>"
$XML += $2ndVariableToInsert
...
$OneNoteObject.UpdatePageContent($XML) 
```

顺便说一句，这是为 MS OneNote API 构建 XML 的，我发现它非常喜怒无常。错误代码的描述性不足。当您拥有数百行 XML 时，一般的“坏 XML”将无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:41:21.600

一个具体问题：

```
$XML = "$XMLtmplt" -f $objID $pageTitle $otherData 
```

替换的参数`-f`应该用逗号分隔：格式运算符有*两个*参数：右边的字符串和左边的数组：

```
$XML = "$XMLtmplt" -f $objID, $pageTitle, $otherData 
```

# php - 如何从查询中获取第一个和最后一个结果？

> ID：10868631
> 
> 赞同：0
> 
> 时间：2012-06-03T07:29:33.280
> 
> 标签：php, mysql, sql, pagination

我正在创建一个分页脚本，我需要获取数据库查询中的第一个和最后一个结果，以便我可以确定当用户单击要转到的页面时会出现什么结果。这是我现在的代码：

```
// my database connection is opened

// this gets all of the entries in the database
$q = mysql_query("SELECT * FROM my_table ORDER BY id ASC");
$count = mysql_num_rows($q);
// this is how many results I want to display
$max = 2;
// this determines how many pages there will be
$pages = round($count/$max,0);
// this is where I think my script goes wrong
// I want to get the last result of the first page
// or the first result of the previous page
// so the query can start where the last query left off
// I've tried a few different things to get this script to work
// but I think that I need to get the first or last result of the previous page
// but I don't know how to.
$get = $_GET['p'];
$pn = $_GET['pn'];
$pq = mysql_query("SELECT * FROM my_table ORDER BY id ASC LIMIT $max OFFSET $get");

// my query results appear

if(!$pn) {
    $pn = 1;
}
echo "</table><br />
Page $pn of $pages<br />";
for($p = 1;$p<=$pages;$p++) {
    echo "<a href='javascript:void(0);' onclick='nextPage($max, $p);' title='Page $p'>Page $p</a> ";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:32:41.350

我认为您在那里几乎没有问题，但我会尝试为您解决这些问题。首先，正如上面的评论所说，您使用的代码容易受到 SQL 注入的影响。请注意这一点 - 您可能想要使用 PDO，它与 MySQL 扩展一样易于使用，并且可以让您免于许多麻烦（如注入）。

但是对于您的代码，让我们通过它：

1.  您应该要求 DB 获取行数，而不是使用 mysql 函数，它更有效，所以使用`SELECT count(*) FROM mytable`.
2.  对于`$pages`要打印所有行的使用 ceil() ，如果您有`$max`5 行且有 11 行，则 round 将为`$pages`2，您实际需要 3 行（最后一页仅包含最后第 11 行）
3.  在 LIMIT 你想要`LIMIT row_count OFFSET offset`。您可以从页码计算偏移量，因此：`$max = row_count`但是`$offset = ($max * $page) - $max`. 在您的代码中，如果`$get`直接是页面，则意味着您获得了 $get'th 行（不确定在您的 JS 下一页中会发生什么。请记住，并非所有人都使用 JavaScript。）

* * *

我在这里准备了使用 PDO 的简单示例，也许这让您知道使用 PDO 是多么简单。

选择行显示了如何在 SQL 中放置参数的示例，在这种情况下将是完全安全的，`'SELECT * FROM pseudorows LIMIT '.$start.','.$max`我想举例说明它是多么容易（然后是安全的）：

```
// DB config
$DB_NAME    = 'test';
$DB_USER    = 'test';
$DB_PASSWD  = 'test';

    // make connection
try {
    $DB_CONN = new PDO("mysql:host=localhost;dbname=".$DB_NAME, $DB_USER, $DB_PASSWD);
    $DB_CONN->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    die($e);
}

// lets say user param 'p' is page, we cast it int, just to be safe
$page   = (int) (isset($_GET['p'])?$_GET['p']:1);
// max rows in page
$max    = 20;

// first select count of all rows in the table
$stmt = $DB_CONN->prepare('SELECT count(*) FROM pseudorows');
$stmt->execute();
if($value = $stmt->fetch()) {
    // now we know how many pages we must print in pagination
    // it's $value/$max = pages
    $pages = ceil($value[0]/$max);

    // now let's print this page results, we are on $page page
    // we start from position max_rows_in_page * page_we_are_in - max_rows_in_page
    // (as first page is 1 not 0, and rows in DB start from 0 when LIMITing)
    $start = ($page * $max) - $max;
    $stmt = $DB_CONN->prepare('SELECT * FROM pseudorows LIMIT :start,:max');
    $stmt->bindParam(':start',$start,PDO::PARAM_INT);
    $stmt->bindParam(':max',  $max,PDO::PARAM_INT);
    $stmt->execute();

    // simply just print rows
    echo '<table>';
    while($row = $stmt->fetch()) {
        echo '<tr><td>#'.$row['id'].'</td><td>'.$row['title'].'</td></tr>';
    }
    echo '</table>';

    // let's show pagination
    for($i=1;$i<=$pages;$i++) {
        echo '[ <a href="?p='.$i.'">'.$i.'</a> ]';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:19:12.493

[`mysql_fetch_array`](http://www.php.net/manual/en/function.mysql-fetch-array.php)返回一个关联数组

这意味着您可以使用[`reset`](http://php.net/reset)and[`end`](http://php.net/end)获得第一个和最后一个结果：

```
$pqa = mysql_fetch_array($pq);
$first = reset($pqa);
$last = end($pqa); 
```

我不知道您打算如何使用实际结果，仅页码就足以进行分页。

不过，希望它有所帮助。*是的，升级到 mysqli，这样您的代码就不会过时。*

# http - Java程序中向kannel发送短信的响应代码错误

> ID：10868633
> 
> 赞同：0
> 
> 时间：2012-06-03T07:29:58.110
> 
> 标签：http, kannel

我正在编写一个可以使用 Kannel 发送 SMS 的 Java 程序。我已经在我的 VM Vare 虚拟机 (Red Hat) 中配置了 Kannel。Kannel 工作正常，我可以通过输入网址发送短信

```
http://192.168.214.128:13013/cgi-bin/sendsms?
       username=tester&password=foobar&to=03478847037&text=Mahtab 
```

在我的 Windows 浏览器中。但是当我通过 Java 程序访问相同的 URL 时，我得到了这个异常

```
java.io.IOException: Server returned HTTP response code: 400` for URL:
                     http://192.168.214.128:13013/cgi-bin/sendsms? 
                     username=tester&password=foobar&to=03478847037&text=Mahtab

at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1245) 
```

但是当我在浏览器中粘贴相同的 url 字符串时，我可以发送 SMS。

附上代码

```
URL url = new URL("http://192.168.214.128:13013/cgi-bin/sendsms?username=tester&password=foobar&to=03478847037&text=Mahtab");

System.out.println(param.toString());
URLConnection conn = url.openConnection();
conn.setDoOutput(true);

OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());

StringBuffer answer = new StringBuffer();
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
while ((line = reader.readLine()) != null) {answer.append(line);}
writer.close();
reader.close();

System.out.println(answer.toString()); 
```

现在请在这方面帮助我我缺少什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:45:35.453

我已经解决了这个问题............实际上代码和一切都是正确的。唯一的问题是 Netbeans。进行一些更改时我没有清理项目......这就是为什么它没有给出预期的结果......我清理了项目然后构建它......我成功了，所以吸取的教训是有时您在逻辑上是正确的，但不幸的是，您的 IDE 出现了一个小错误，这最让您感到厌烦。@thor 感谢您的帮助

# jquery - 如何将 data-href 传递给 jquery 脚本？

> ID：10868637
> 
> 赞同：0
> 
> 时间：2012-06-03T07:30:36.737
> 
> 标签：jquery

[我想在http://communitychessclub.com/js/jquery.popupWindow.js](http://communitychessclub.com/js/jquery.popupWindow.js)弹出一个基于 jquery 脚本的模式窗口

我的测试页面位于[http://communitychessclub.com/games_new.php](http://communitychessclub.com/games_new.php)

我正在使用 php 生成一个表格，并且我有 data-href 来触发整个表格行（元组）可以点击以加载游戏。我加载了最新的 jquery 并且：

```
<script src="js/jquery.popupWindow.js"></script>
<script>$('.example').popupWindow({centerScreen:1});</script> 
```

但是弹出窗口是空白的，基于此：

```
<tr class="example" data-href="games/game1302.php"> 
```

我该如何修复这条线：

```
<script>$('.example').popupWindow({centerScreen:1});</script>

so that it picks up the url specified as data-href of the <tr> ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:32:16.587

```
$('.example').each(function(){
   $(this).popupWindow({centerScreen:1, windowURL: $(this).data("href")});
}); 
```

编辑。把它放在一个循环中，所以`$(this)`是有效的。另外，我注意到您已在 中包含完整的 URL `data-href`，因此无需包含`window.location.hostname`now.

# css - 对齐 HTML 输入字段：

> ID：10868640
> 
> 赞同：65
> 
> 时间：2012-06-03T07:31:06.043
> 
> 标签：css, html, user-interface, alignment

我有一个 HTML 表单，例如：

```
 <html>
  Name:<input type="text"/></br>
  Email Address:<input type="text"/></br>
  Description of the input value:<input type="text"/></br>
 </html> 
```

现在标签都从同一列开始，但文本框根据标签的文本长度在不同的位置开始。

有没有办法对齐输入字段，使得所有“：”和文本框都从同一位置开始，并且前面的文本将右对齐，直到“：”？

如果可以帮助实现这一点，我可以使用 CSS。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-03T07:56:55.937

[工作 JS 小提琴](http://jsfiddle.net/T6zhj/1/)

**HTML：**

```
 <div>
      <label>Name:</label><input type="text">
      <label>Email Address:</label><input type = "text">
      <label>Description of the input value:</label><input type="text">
  </div> 
```

**CSS：**

```
label{
    display: inline-block;
    float: left;
    clear: left;
    width: 250px;
    text-align: right;
}
input {
  display: inline-block;
  float: left;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-03T07:38:34.517

您可以使用标签（请参阅[JsFiddle](http://jsfiddle.net/VuZKj/)）

**CSS**

```
label { display: inline-block; width: 210px; text-align: right; } 
```

**HTML**

```
<html> 
    <label for="name">Name:</label><input id="name" type="text"><br />
    <label for="email">Email Address:</label><input id="email" type="text"><br /> 
    <label for="desc">Description of the input value:</label><input id="desc" type="text"><br /> 
 </html> 
```

或者您可以在表格中使用这些标签（[JsFiddle](http://jsfiddle.net/DrLHw/)）

```
<html>
    <table>
        <tbody>
            <tr><td><label for="name">Name:</label></td><td><input id="name" type="text"></td></tr>
            <tr><td><label for="email">Email Address:</label></td><td><input id="email" type = "text"></td></tr>
            <tr><td><label for="desc">Description of the input value:</label></td><td><input id="desc" type="text"></td></tr>
        </tbody>
    </table>
 </html> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-23T08:51:33.940

[http://jsfiddle.net/T6zhj/1/](http://jsfiddle.net/T6zhj/1/)

使用 display table-cell/row 无需任何宽度即可完成这项工作。

html：

```
 <html>
  <div>
      <div class="row"><label>Name:</label><input type="text"></div>
      <div class="row"><label>Email Address:</label><input type = "text"></div>
      <div class="row"><label>Description of the input value:</label><input type="text"></div>
  </div>
 </html> 
```

的CSS：

```
label{
    display: table-cell;
    text-align: right;
}
input {
  display: table-cell;
}
div.row{
    display:table-row;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-03T07:43:39.837

在表单元素上设置宽度（应该存在于您的示例中！）并浮动（并清除）输入元素。另外，删除 br 元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T08:13:11.803

就我而言，我总是把这些东西放在 ap 标签中，比如

`<p> name : < input type=text /> </p>`

依此类推，然后应用css

```
p {
  text-align:left;
}

p input {
  float:right;
} 
```

您需要指定 p 标签的宽度。因为输入标签会一直向右浮动。

这个 css 也会影响提交按钮。您需要覆盖此标签的规则。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-09T03:51:56.893

我知道这种方法以前已经采取过，但是我相信使用表格可以轻松生成布局，尽管这**可能不是最佳实践。**

[JSFiddle](http://jsfiddle.net/IcyFlame/HxAby/)

# HTML

```
<table>

    <tr><td>Name:</td><td><input type="text"/></td></tr>

    <tr><td>Age:</td><td><input type="text"/></td></tr>

</table>

<!--You can add the fields as you want--> 
```

# CSS

```
td{
    text-align:right;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-26T15:25:30.793

我刚刚为 Label 提供了宽度，并且输入类型已自动对齐。

```
input[type="text"] {
    width:100px;
	height:30px;
	border-radius:5px;
	background-color: lightblue;
	margin-left:2px;
  position:relative;
}

label{
position:relative;
width:300px;
border:2px dotted black;
margin:20px;
padding:5px;
font-family:AR CENA;
font-size:20px;

}
```

```
<label>First Name:</label><input type="text" name="fname"><br>
<label>Last Name:</label><input type="text" name="lname"><br>
```

# datetime - 如何从 tweepy 状态对象中检索日期和时间？

> ID：10868641
> 
> 赞同：6
> 
> 时间：2012-06-03T07:31:10.077
> 
> 标签：datetime, tweepy

假设我这样做

```
tweets = api.home_timeline() 
```

它返回发布在我的时间线上的 20 个最近的 tweepy 状态对象的列表。如果我这样做了

```
for tweet in tweets:
    print tweet.text 
```

它打印 20 条消息。是否可以检索状态发布的时间？状态对象还有哪些其他属性？需要帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T20:16:14.850

```
tweet = tweets[0]
print tweet.created_at 
```

输出将是一个日期时间对象。例如：

```
(Pdb) tweet.created_at
datetime.datetime(2012, 6, 3, 20, 9, 24) 
```

有关所有属性，请参阅[Twitter API 文档](https://dev.twitter.com/docs/api/1/get/statuses/home_timeline)。[Tweepy 文档](http://packages.python.org/tweepy/html/index.html)也会让您感兴趣。

# java - Java - 打开包含超过 65535 个文件的 zip 文件

> ID：10868644
> 
> 赞同：2
> 
> 时间：2012-06-03T07:31:52.110
> 
> 标签：java, android, zip

我面临着有趣的问题。我的 ZIP 存档中有超过 65535 个文件，这是个问题，因为标准 ZIP 存档最多只能携带 65535 个文件才能成功解压缩它们。你遇到过同样的问题吗？我目前正在 Android 中解压缩（使用 ZipEntry），那么有什么方法可以增加我可以存储在一个 ZIP 中的文件数量吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T07:35:38.647

看这里：[zip](http://kb.winzip.com/kb/entry/259) 看起来它是 zip 格式的限制。

您可能有兴趣阅读这个精彩网站中的另一个线程： [java 中的 zip64 库](https://stackoverflow.com/questions/8601970/java-library-for-zip64) 我不知道它是如何移植到 Android 的...

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:38:54.557

来自 Wikipedia：[Java 的内置 java.util.zip 确实支持 Java 7 版本的 ZIP64](http://en.wikipedia.org/wiki/Zip_%28file_format%29#ZIP64 "维基百科")。据我所知，Android SDK 是为 java5/6 设计的，另见[这个问题](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)。但是您也许可以从 java.util.zip 中提取类并在您的项目中使用这些类。

# mysql - Mysql 从 3 个表中获得最低价格。提高效率

> ID：10868652
> 
> 赞同：2
> 
> 时间：2012-06-03T07:33:36.190
> 
> 标签：mysql, join, query-optimization, min

我有3个表如下，

```
1\. Link_products_price
DESC: unique_id|product_id|sub_category_id.
2\. local_price
DESC: unique_id|price.
3\. online_price
DESC: unique_id|price. 
```

我想为给定的 product_id|sub_category_id 选择最低价格。

我想出了以下内容，

方法一：

```
SELECT MIN(price) 
FROM local_price 
WHERE unique_id IN (SELECT unique_id 
                    FROM link_products_price 
                    WHERE product_id=1 
                    AND sub_category_id=1) 

UNION 

SELECT MIN(price) 
FROM online_price 
WHERE unique_id IN (SELECT unique_id 
                    FROM link_products_price 
                    WHERE product_id=1 
                    AND sub_category_id=1) 
LIMIT 1; 
```

方法2：

在这 3 个表上创建一个带有 INNER JOIN 的视图，并在应用程序需要时从视图中查询 MIN(price)。

但是，视图只会在运行时执行查询。

请告诉我方法 1 中的查询是否可以，或者是否可以进一步优化并就该`VIEW`方法提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T07:42:36.013

您的第一种方法始终选择最低本地价格：您需要添加一个`ORDER BY`子句以确保`LIMIT`. [但是，加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)查询并将 MySQL 的[`LEAST()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_least)功能与`MIN()`聚合结合使用会更简单：

```
SELECT LEAST(MIN(local_price.price), MIN(online_price.price))
FROM   link_products_price
  LEFT JOIN  local_price USING (unique_id)
  LEFT JOIN online_price USING (unique_id)
WHERE link_products_price.product_id = 1
  AND link_products_price.sub_category_id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T07:48:24.363

就效率（不是可读性）而言，我可能会使用类似于您的第一个示例的内容，除了您的示例包含错误 - 您假设 UNION 对结果进行排序？

试试这个更正的版本：

```
SELECT LEAST(

    (SELECT MIN(price) 
     FROM local_price 
     WHERE unique_id IN (SELECT unique_id 
                         FROM link_products_price 
                         WHERE product_id=1 
                         AND sub_category_id=1))
    ,
    (SELECT MIN(price) 
     FROM online_price 
     WHERE unique_id IN (SELECT unique_id 
                         FROM link_products_price 
                         WHERE product_id=1 
                         AND sub_category_id=1))
) 
```

但是，除非您有数亿行，否则您可能会发现查询速度非常快，即使您使用效率较低的方法，哪个最快也没关系。

获得效率最重要的事情是确保您拥有适当的**索引**。

我建议添加以下索引：

*   link_products_price (product_id, sub_category_id)
*   local_price (unique_id, 价格)
*   online_price (unique_id , 价格)

# android - 确定惯性导航系统中的航向

> ID：10868656
> 
> 赞同：3
> 
> 时间：2012-06-03T07:34:43.613
> 
> 标签：android, orientation, accelerometer, sensors, inertial-navigation

我有一个关于使用移动设备进行惯性导航的问题。我正在使用 android 平板电脑进行开发，但我认为这个问题与所有类型的硬件（即使使用更好的传感器）有关。

开发惯性系统时最基本的问题是如何确定载体的运动方向。即使我们假设磁力计读数是 100% 准确的（他们显然不是！）仍然存在设备相对于用户的方向的问题。

简单示例 - 如果用户向北走，但手持设备，设备的 Y 轴指向东北，（指向不同轴的图片的链接：http: [//developer.android.com/reference/android/hardware /SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html) ) 然后磁力计将指向东北。我们如何判断用户实际走向哪条路？（如果我们同时使用磁力计和陀螺仪来确定航向，情况也是如此）

一种可能的解决方案是使用加速度计的 Y 轴和 X 轴读数。使用 arctan(aY/aX) 方向的东西（例如 - 如果用户完全笔直地握住设备，那么 X 轴将不会显示任何内容......）但是由于加速度计的读数不稳定，所以不是这样简单的...

有谁知道真正有效的算法？我确信这是一个众所周知的问题，但我似乎无法找到解决方案的参考......

提前致谢！

爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:08:32.313

请参阅[此](https://stackoverflow.com/questions/14963190/calculate-acceleration-in-reference-to-true-north/14988559#14988559)答案以获得一个想法：通过获取相对于地球的加速度值，您可以使用 atan2 函数来计算实际方向。

你提到用户拿着平板电脑，我假设相当稳定（不像我正在研究的情况，用户不断移动手机）。然而，出于某种原因，用户可能会改变设备的方向，这可能会影响您获得的读数。

因此，如果方向发生变化，您应该相应地[调用*remapCoordinates()*来](https://stackoverflow.com/questions/15649684/how-should-i-calculate-azimuth-pitch-orientation-when-my-android-device-isnt)修复您获得的读数。

**注意**：您也可以相应地使用[*getOrientation()*方法](https://stackoverflow.com/questions/8625804/compass-direction-is-different-depending-on-phone-orientation/10678608#10678608)，第一个字段表示航向。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-30T16:43:24.887

*真正正确*的答案是将设备放在那里一段时间，检测地球的自转，然后从中计算出真北。不幸的是，手机中的陀螺仪还不够准确……

# vb6 - VB6 - 对象已打开

> ID：10868657
> 
> 赞同：0
> 
> 时间：2012-06-03T07:35:13.350
> 
> 标签：vb6, recordset

我有一个记录集，它运行一个查询：

```
rs.Open "SELECT * FROM Update",objConnection.ActiveCon
Do While Not rs.EOF
  'More logic here.
loop
rs.close 
```

今天的查询结果比正常情况大得多，即 150 万行（而不是正常情况，大约 100000 行）。当记录集尝试打开时出现错误，即“对象已打开”。这是什么意思？我研究过了，我能找到的唯一解释是记录集太大，在较低的抽象级别出现错误（因为结果太多）。这个对吗？

**更新 03/06/2012 15:31** 首先，我在这里发现了一个类似的问题：[http](http://www.simple-talk.com/community/forums/thread/59059.aspx) ://www.simple-talk.com/community/forums/thread/59059.aspx 。回答者引用以下内容：

我自己从未经历过，但我认为它通常发生在您并行运行多个数据流时，这些数据流在同一个表上进行了查找重新同步一行时发生错误，但至少有一行已成功重新同步。该错误指的是它试图打开的存储对象已经打开（因为，可能两个查找共享相同的缓冲区）。”

他的意思是：“并行运行多个数据流，在同一张表上进行查找”。他是指更新同一张表的两个不同进程吗？

其次，如果Windows进程的大小有限制，我会徘徊。如果超出限制，则会出现错误？

# javascript - javascript函数参数对象验证

> ID：10868658
> 
> 赞同：0
> 
> 时间：2012-06-03T07:35:26.483
> 
> 标签：javascript, function, validation, parameters, parameter-object

我想让我的所有函数都接受一个对象参数，这样我就可以向它传递一个独立于顺序的命名参数列表。

例如：

```
function A(param){

    this.first = param.first ? param.first : null;
    this.second = param.second ? param.second : null;

} 
```

所以我可以通过传入任何东西来创建一个 A 对象，如果该对象没有第一个或第二个属性，那么该对象仍然会在其所有属性设置为 null 或其他一些默认值的情况下生成。

如果我想创建一个默认的 A 对象，我只想在没有任何参数对象的情况下调用 new A() ，但这会引发错误，因为我试图非法访问“未定义”的属性，所以构造函数不会不做任何事情。

我可以这样：

```
function A(param){

    if(typeof param ==== 'undefined')param = {};
    this.first = param.first ? param.first : null;
    this.second = param.second ? param.second : null; 

} 
```

但是如果我想让我的所有函数都使用一个参数对象，我需要在每个函数定义中包含这一行。

是否有更好的方法来实现此结果，或者是否可以操作函数原型，以便所有函数自动进行此检查以确保参数存在或至少已初始化，以便代码在尝试访问时不会崩溃“未定义”的属性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:47:36.297

您可以使用`||`运算符：

```
function A(param){
  param == param || {};
  this.first = param.first || null;
  this.second = param.second || null; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:52:47.833

只需创建一个包装函数，如下所示：

```
function wrap(funct) {
    return function (args) {
        if (typeof args == "undefined") args = {};
        funct.apply(this, args);
    };
} 
```

现在您可以创建任意数量的构造函数，如下所示：

```
var A = wrap(function (args) {
    this.first = args.first || null;
    this.second = args.second || null;
});

var B = wrap(function (args) {
    this.first = args.first || null;
    this.second = args.second || null;
}); 
```

然后只需初始化构造函数：

```
var a = new A;
var b = new B({
    first: 2
});

alert(a.first);  // null
alert(a.second); // null
alert(b.first);  // 2
alert(b.second); // null 
```

干杯。=)

# iphone - 如何更改 UINavigationBar 的标签位置（框架）？

> ID：10868668
> 
> 赞同：1
> 
> 时间：2012-06-03T07:38:26.077
> 
> 标签：iphone, ios, xcode, cocoa, uinavigationbar

我需要它左对齐。还是没有办法，我需要添加自定义标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:45:46.620

将其添加到左侧按钮项：

```
UIView *mCustView = [[UIView alloc] initWithFrame:CGRectMake(0,0,200,20)];

mCustView.backgroundColor = [UIColor redColor];

UILabel *mTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0,200,20)];

mTextLabel.backgroundColor = [UIColor blueColor];

mTextLabel.font = [UIFont systemFontOfSize:20];

mTextLabel.textColor = [UIColor blackColor];

mTextLabel.text = @"Random text tested here, so sit back and enjoy";

[mCustView addSubview:mTextLabel];

[mTextLabel release];

UIBarButtonItem *mCustomBarItem = [[UIBarButtonItem alloc] initWithCustomView:mCustView];

self.navigationItem.leftBarButtonItem = mCustomBarItem; 

[mCustView release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T07:42:34.680

您需要将自定义视图添加到导航栏的`-titleView`

```
self.navigationItem.titleView = someLabel; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T10:46:30.390

我认为您可以使用`UIBarButtonSystemItemFixedSpace`它提供了一种在导航栏中添加固定填充的方法：

```
UIBarButtonItem *fixedSpaceItem = [[[UIBarButtonItem alloc]
                                    initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace
                                    target:nil
                                    action:NULL]
                                   autorelease];
fixedSpaceItem.width = 50;
UIBarButtonItem *cancelItem = [[[UIBarButtonItem alloc]
                                initWithBarButtonSystemItem:UIBarButtonSystemItemCancel
                                target:nil
                                action:NULL]
                               autorelease];
// vc is some view controller
vc.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:
                                        fixedSpaceItem,
                                        cancelItem,
                                        nil]; 
```

这将使“取消”按钮缩进 50 点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T06:26:17.007

我自己找到了解决方案：

```
float offset = 210.0f;

UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, offset, 44.01)];

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:tools];

[tools release]; 
```

# c# - 使用 Request.CreateResponse 进行 ASP.NET WebApi 单元测试

> ID：10868673
> 
> 赞同：151
> 
> 时间：2012-06-03T07:39:13.200
> 
> 标签：c#, unit-testing, asp.net-web-api, mocking, httpresponse

我正在尝试为我的 ApiController 编写一些单元测试并遇到了一些问题。有一个很好的扩展方法，叫做 Request.CreateResponse，它对生成响应有很大帮助。

```
public HttpResponseMessage Post(Product product)
{
  var createdProduct = repo.Add(product);
  return this.Request.CreateResponse(HttpStatusCode.Created, createdProduct);
} 
```

有没有办法在不使用部分模拟或直接使用“new HttpResponseMessage(...)”的情况下模拟 CreateResponse？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-06-08T21:00:55.927

解决此问题的另一种方法是执行以下操作：

```
controller.Request = new HttpRequestMessage();
controller.Request.Properties.Add(HttpPropertyKeys.HttpConfigurationKey, 
                                  new HttpConfiguration()); 
```

如果要升级到 webapi 5.0，则需要将其更改为：

```
controller.Request = new HttpRequestMessage();
controller.Request.SetConfiguration(new HttpConfiguration()); 
```

您需要这样做的原因是您必须`Request`在控制器上进行填充，否则扩展方法`Request`将不起作用。您还必须对`HttpConfiguration`请求进行设置，否则路由和管道的其他部分将无法正常运行。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-20T08:58:21.583

您可以像这样设置控制器对象以实现可测试性：

```
var config = new HttpConfiguration();
var request = new HttpRequestMessage(HttpMethod.Post, "http://localhost/api/products");
var route = config.Routes.MapHttpRoute("DefaultApi", "api/{controller}/{id}");
var routeData = new HttpRouteData(route, new HttpRouteValueDictionary { { "controller", "products" } });

controller.ControllerContext = new HttpControllerContext(config, routeData, request);
controller.Request = request;
controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config; 
```

[复制自 Peter Provost 关于单元测试 ASP.NET Web API](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api/)的综合博文。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-30T15:32:34.223

对于 Web API 2，您可以简单地添加

```
controller.Request = new HttpRequestMessage();
controller.Configuration = new HttpConfiguration(); 
```

像这样

```
[TestMethod]
public void GetReturnsProduct()
{
    // Arrange
    var controller = new ProductsController(repository);
    controller.Request = new HttpRequestMessage();
    controller.Configuration = new HttpConfiguration();

    // Act
    var response = controller.Get(10);

    // Assert
    Product product;
    Assert.IsTrue(response.TryGetContentValue<Product>(out product));
    Assert.AreEqual(10, product.Id);
} 
```

> 在控制器上设置请求和配置很重要。否则，测试将失败并出现 ArgumentNullException 或 InvalidOperationException。

请参阅[此处](https://docs.microsoft.com/en-us/aspnet/web-api/overview/testing-and-debugging/unit-testing-controllers-in-web-api#testing-actions-that-return-httpresponsemessage)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-15T15:34:19.150

WebAPI 1 here 与使用 VB 的类似问题。

我设法在这里混合响应以使其像这样简单地工作：

```
Dim request As HttpRequestMessage = New HttpRequestMessage()
Return request.CreateResponse(HttpStatusCode.BadRequest, myCustomClassObject, GlobalConfiguration.Configuration) 
```

只是张贴以防万一它对任何人有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-12T16:24:38.373

在您的测试类中，创建控制器类的实例。例如`var customerController= new CustomerController();`

```
customerController.Request = new HttpRequestMessage();
customerController.Request.Properties.Add(HttpPropertyKeys.HttpConfigurationKey, new HttpConfiguration()); 
```

# python - 使用 python 多处理模块缓冲/截断到文件的 Shell 脚本输出

> ID：10868677
> 
> 赞同：2
> 
> 时间：2012-06-03T07:40:16.497
> 
> 标签：python, subprocess, multiprocessing

我有一个 python 框架，它必须将 bash 脚本作为插件执行。我们正在使用 multiprocessing 模块创建工作进程，这些进程从 multiprocessing.JoinableQueue 中挑选插件详细信息并使用 subprocess.Popen() 执行插件。

据观察，shell 脚本生成的最终输出会被截断，最终导致整个执行过程浪费。

因此，我们尝试将维护子进程机制的工作人员转移到 python 线程来生成 shell 脚本进程。并且截断不再发生。但是线程非常慢（由于 GIL），并且对信号和事件的响应也是不确定的（可能是由于 GIL 的发布时间）。

我在很多地方都读过，包括stackoverflow中的其他问题，多处理模块对stdout进行了缓冲。我们知道这是问题所在。但是无法找到合适的解决方案，因为我们无法从 python 中为 sys.stdout.flush 提供 shell 脚本必须回显到文件的数据。

我们还用一些样本尝试了 os.fsync，并且没有发生截断。同样，它不能直接用于我们的目的，因为框架不知道由 shell 脚本创建的文件的名称。框架只取回最终存档。

我的问题是，有什么方法可以防止多处理模块产生的进程中的这种缓冲？python解释器的-u选项在这里有帮助吗？或者对 /usr/lib64/python2.6/multiprocessing 中的 python 库进行任何修改会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:36:05.133

我们发现脚本内通过 ssh 发送的命令是在其输出中被截断的命令。

为此，我们使用了 ssh 的 -n 标志，它解决了这个问题。没有更多的截断。但这是一个奇怪的问题，它只发生在 python 多处理环境中，任何试图将这种模型用于自己目的的人都必须认真考虑。

-n 选项的手册页说

> 从 /dev/null 重定向标准输入（实际上，阻止从标准输入读取）。这必须在 ssh 在后台运行时使用。一个常见的技巧是使用它在远程机器上运行 X11 程序。例如， ssh -n shadows.cs.hut.fi emacs & 将在 shadows.cs.hut.fi 上启动一个 emacs，X11 连接将通过加密通道自动转发。ssh 程序将被置于后台。（如果 ssh 需要询问密码或密码短语，这将不起作用；另请参阅 -f 选项。）

# c - pthread中两个线程之间的通信

> ID：10868678
> 
> 赞同：3
> 
> 时间：2012-06-03T07:41:20.190
> 
> 标签：c, linux, multithreading, pthreads, posix

我正在创建两个线程thread1和thread2。线程 1 正在读取模拟值，线程 2 应处理在线程 1 中读取的模拟值并设置 PWM 参数。到目前为止，我所做的是，在主文件（我正在创建线程的地方）中，我声明了一个全局变量（用于存储模拟值）并将指向全局变量的指针传递给两个线程。在thread1中读取存储在全局变量中的模拟值，在thread2中读取全局变量并对其进行处理。所以，我的问题是有没有其他方法可以做到这一点？即我们有最适合这个应用程序的信号量、互斥量等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:15:59.413

您的问题没有一般性的答案，这取决于您的很多用例。

pthread 的经典方法是使用互斥条件对向读取线程发出值的修改信号。这适用于该线程大部分是空闲的并且只需要进行更改的情况。在这里，除了互斥体之外的条件变量将确保您的读取线程在他无所事事时不会吃掉资源。

如果您的阅读线程正在做一些永久性工作并且只需要使用该值，则存在不同的情况：第一种是使用互斥锁保护变量，只是为了确保您读取的值没有中途更新，并且通过那总是一致的。

更现代的方法是使用（或确保）您的读写操作是原子的。C11 是新的 C 标准，为此提供了接口，并且大多数编译器已经将此类操作作为扩展实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:14:21.130

我认为这将需要一个非常基本的 mutex 。请参阅下面的伪代码：

```
Thread1() {
    Mutex_lock();
    Process global variable;
    Unlock_mutex();
} 
```

类似的thread2 ..如果您提供当前代码，我可以提供更具体的答案。

# javascript - 如何计算 pinterest 的“Pin it”按钮的点击次数？

> ID：10868681
> 
> 赞同：1
> 
> 时间：2012-06-03T07:41:58.667
> 
> 标签：javascript, pinterest

我想计算`Pin It`我商店中 pinterest 按钮的点击次数。

我对计算实际的引脚不感兴趣，只是点击按钮。

鉴于按钮已加载到 iframe 中，有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:20:30.690

这是我能做的最好的

```
$$('iframe').each(function(s){ var src=s.readAttribute('src');console.log(src.match(/pin/))}) 
```

然后你可以绑定一个事件或者有这篇文章需要翻译

[http://web-analytics.altima.fr/blog/2012/06/28/le-tracking-analytics-des-partages-pinterest-est-possible/](http://web-analytics.altima.fr/blog/2012/06/28/le-tracking-analytics-des-partages-pinterest-est-possible/)

但是如果您使用这样的代码，我加载文件的方式会阻止我和您可能实现这一点

```
<a href="http://pinterest.com/pin/create/button/?url= etc ... 
<script type="text/javascript" src="http://assets.pinterest.com/js/pinit.js"></script> 
```

如果你能找到一个简单的方法，这将不胜感激

***刚刚发现这个非常有用的页面 [http://www.lunametrics.com/blog/2012/03/12/tracking-pinterest-event-tracking/](http://www.lunametrics.com/blog/2012/03/12/tracking-pinterest-event-tracking/)

# iphone - UILabel 中显示 Unicode 字符

> ID：10868687
> 
> 赞同：1
> 
> 时间：2012-06-03T07:43:11.650
> 
> 标签：iphone, unicode, uilabel, iso

在 UILabel 中显示 unicode 字符，如下所示：

```
NSString *str = @"flag \u2691 and heart \u2764";
myUILabel.text = str; 
```

旗帜以黑白显示，而心形则以渐变的红色显示。那么问题来了：是否可以控制 unicode 字符的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:49:15.053

看看[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel/)。它允许您为文本标签设置超过 1 种颜色的样式。（还可以让您在一个标签中使用不同的字体）

# php - 在脚本执行之间将 PHP 变量存储在内存中

> ID：10868696
> 
> 赞同：17
> 
> 时间：2012-06-03T07:44:47.557
> 
> 标签：php

如何在脚本执行之间甚至不同会话之间将变量保存在服务器的 RAM 中？

我是否需要安装某种扩展，或者它是否以某种方式内置于 PHP 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T07:46:21.317

有几个选项：

Memcache [http://memcached.org/](http://memcached.org/)扩展。它是基于 RAM 的存储引擎。

APC [APC - PHP 手动](http://php.net/manual/en/book.apc.php)apc 代码缓存允许存储变量。

如果您不想要任何扩展，您可以将数据存储到文件中（序列化或 xml 格式），这将是持久数据。比内存存储慢。

如果你想存储一般数据，那么就有“一百二”数据库引擎。例如[MySQL](http://php.net/manual/en/ref.pdo-mysql.php)、[SQLite](http://www.php.net/manual/en/ref.pdo-sqlite.php)或 NOSQL [MongoDB](http://php.net/manual/en/book.mongo.php)等等……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-17T16:29:57.370

**您可以使用apc_store()**和 apc_add()在数据存储中缓存变量，然后使用**apc_fetch()**获取它们的值。但我认为`$_SESSION`如果您的变量仅与一个客户端相关，会话变量将是一个不错的选择。如果变量是**GLOBAL**并且在许多客户端之间使用，那么使用**数据库引擎**也是一种选择。

# python - 使用 python 创建一个 pcap 文件

> ID：10868698
> 
> 赞同：2
> 
> 时间：2012-06-03T07:45:18.643
> 
> 标签：python, pcap

我正在尝试创建一个非常简单的 PCAP 文件（1 条 UDP 消息）。
尝试使用 dpkt (pcap.Writer)，没有运气，文档稀缺。
任何人都可以发布一个工作示例吗？
（或任何其他替代方案 - 我不受 dpkt 约束）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-03-12T05:24:24.690

您可以使用 Scapy。

[https://scapy.readthedocs.io/en/latest/installation.html](https://scapy.readthedocs.io/en/latest/installation.html)

如果使用 Python 3：

```
pip3 install scapy 
```

然后在 Python 中：

```
from scapy.all import wrpcap, Ether, IP, UDP
packet = Ether() / IP(dst="1.2.3.4") / UDP(dport=123)
wrpcap('foo.pcap', [packet]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T20:12:12.093

您需要将数据包写入 libpcap 格式

Global Header + Packet Header + Packet Data + Packet Header + Packet Data 这个链接应该可以帮助你

[http://www.codeproject.com/Tips/612847/Generate-a-quick-and-easy-custom-pcap-file-using-P](http://www.codeproject.com/Tips/612847/Generate-a-quick-and-easy-custom-pcap-file-using-P)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-03T08:17:10.927

~~[构造的上限](https://github.com/construct/construct/blob/master/construct/formats/data/cap.py)~~ *（断开的链接）*显示了如何为此使用[构造](https://github.com/construct/construct/tree/master/construct)。Construct 还有一个基本的~~[ip 堆栈](https://github.com/construct/construct/tree/master/construct/protocols)~~ *（断开的链接）*示例。Construct 的好处是它是对称的，即您可以将数据放入其中，将其转换为一组 Python 对象，然后您可以转储对象以再次创建原始数据块。

# javascript - IE 对 HTMLDocument 和 HTMLElement 有何影响

> ID：10868700
> 
> 赞同：12
> 
> 时间：2012-06-03T07:46:10.267
> 
> 标签：javascript, html, internet-explorer, dom

在 javascript 的范围内，在 IE8 上引用[`HTMLDocument`](https://developer.mozilla.org/en/DOM/HTMLDocument)或[`HTMLElement`](https://developer.mozilla.org/en/DOM/HTMLElement)引发错误。

我得到的错误是“HTMLElement 未定义”。

让 JS 与这个浏览器的原生 DOM 对象交互的方式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T08:04:12.157

在 IE8 中，您必须使用`Element`和`HTMLDocument`类。在 IE7 中……什么都没有，因为 IE7 对标准来说太糟糕了。您必须依赖 jQuery 或其他包装 DOM 元素的框架。

在我自己的框架中，我做了这个简单的检查：

```
var elementPrototype = typeof HTMLElement !== "undefined"
        ? HTMLElement.prototype : Element.prototype; 
```

请注意，它不是 IE7 及更低版本的框架。

# java - 函数指针 - 传递对自身的引用

> ID：10868704
> 
> 赞同：1
> 
> 时间：2012-06-03T07:46:45.007
> 
> 标签：java

嗨，是否可以在 JAVA 中实现函数指针我正在尝试做这样的事情

```
void methodA
{
  try
   {
   }
  catch(Exception E)
   {
    methodB(Pass the function pointer pointing to methodA)
   }
}

void methodB(fp some_function_pointer)
{
   call some_function_pointer
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T07:50:59.950

不，但您可以传递对象本身：

```
public class Foo {
    void methodA() {
        try {
        }
        catch(Exception e) {
            bar.methodB(this)
        }
    } 
}

public class Bar {
    void methodB(Foo someFoo) {
        someFoo.methodA();
    } 
} 
```

如果您希望能够传递任何方法，请将此方法包装到 Runnable 或 Callable 中，例如：

```
public class Foo {
    void methodA() {
        try {
        }
        catch(Exception e) {
            bar.methodB(new Runnable() {
                @Override
                public void run() {
                    Foo.this.methodA();
                }
            });
        }
    } 
}

public class Bar {
    void methodB(Runnable runnable) {
        runnable.run();
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:54:09.293

在java中不使用反射是不可能定义函数指针的。

您可以使用反射（请参见**java.lang.reflect.Method**类）在某种程度上模仿这种行为，但总的来说，这段代码听起来很奇怪（虽然也许我没有得到什么；））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:52:18.030

您不能传递函数指针。最简单的方法是将方法封装在接口中，并传递实现该接口的对象而不是函数引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T08:23:59.817

您正在寻找的是一流的功能。您的示例需要`methodA`是一流的功能，所以让我们将其更改为。

下面的类表示具有 arity 0 的第一类函数（一种正式的说法，它不带参数）。

```
abstract class F0<A> {
  public abstract A apply(); 
} 
```

使用它，您的代码可以重写为：

```
F0<Void> methodA = new F0<Void>() {
  @Override
  public Void apply() {
    try {
      // failable actions
    } catch (Exception ex) {
      methodB(methodA);
    }
    return null;
  }
};

void methodB(F0<Void> methodA) {
  methodA.apply();
} 
```

* * *

**切线：**

我承认上面的代码看起来有点过于粗糙，但是诸如 IntelliJ IDEA 之类的 IDE 提供了他们所谓的“闭包折叠”，这使得这些代码看起来更好一些。例如，看看这段代码在我的 IDE 中的样子：

![您是否希望在此工具提示中找到一个笑话？](../Images/0c21ed3dc61f11456ac59142265c17ab.png)

# jquery - 从链接返回第一个找到的匹配哈希值

> ID：10868707
> 
> 赞同：1
> 
> 时间：2012-06-03T07:47:01.907
> 
> 标签：jquery, twitter-bootstrap

我正在尝试使用 scrollspy，但在[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)，该示例似乎不起作用，并且还有一个提示：

```
Heads up! Navbar links must have resolvable id targets. For example, a <a href="#home">home</a> must correspond to something in the dom like <div id="home"></div>. 
```

问题是 scrollspy 只是我网站中的一项功能，即使页面中没有 id 目标，它也总是会加载，这会导致 headup 预测的错误。

**错误：**

```
uncaught exception: Syntax error, unrecognized expression: # 
```

当我使用 scrollTo.js 插件时也会发生同样的错误。

所以我试图添加一个条件，仅当 DOM 中有 id 目标时才激活 scrollspy。

```
 $('.nav-scrollspy').each(function() {
              var $nav = $(this).find('a');
                var linkHref = $nav.attr('href').split('#')[1];
                if ($('#' + linkHref).length) {
                $(this).scrollspy();
                }
  }); 
```

以上失败了，因为我认为我应该只过滤到从链接中找到的第一个哈希值。

任何有关该问题的提示或其他更好的方法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:53:09.877

更改此行

```
if ($('#' + linkHref).length) { 
```

到

```
if ($.trim(linkHref).length > 0) { 
```

它应该可以正常工作。

此行之后的原因

```
var linkHref = $nav.attr('href').split('#')[1]; 
```

`linkHref`是一个`string`

所以在这种情况下根本不需要将它包裹在`$`对象周围并且可能导致错误，我正在使用[$.trim](http://api.jquery.com/jQuery.trim/)来`trim`关闭任何不是强制性的空格，但在这种情况下这是一个很好的做法。

# python - Python - 多线程字/行数

> ID：10868710
> 
> 赞同：3
> 
> 时间：2012-06-03T07:47:57.363
> 
> 标签：python, mapreduce, word-count

我正在尝试处理python中的多线程。我有工作代码计算字数、文本行数，并创建一个包含每个字数的字典。它在代码注释中提到的小文件上运行得很快。但是我通常使用 glob 来拉入多个文件。当我这样做时，我的运行时间显着增加。同时，由于我的脚本是单线程的，我看到我有 3 个其他内核处于空闲状态，而其中一个已达到最大值。

我想我会给 pythons 多线程模块一个镜头，这是我到目前为止所做的（非工作）：

```
#!/bin/python
#
# test file: http://www.gutenberg.org/ebooks/2852.txt.utf-8

import fileinput
from collections import defaultdict
import threading
import time

inputfilename = 'pg2852.txt'

exitFlag = 0

line = []
line_counter = 0
tot_words = 0
word_dict = defaultdict(int)

def myCounters( threadName, delay):
        for line in fileinput.input([inputfilename]):
                line = line.strip();
                if not line: continue
                words = line.split()
                tot_words += len(words)
                line_counter += 1
                for word in words:
                        word_dict[word] += 1

        print "%s: %s:" %( threadName, time.ctime(time.time()) )
        print word_dict
        print "Total Words: ", tot_words
        print "Total Lines: ", line_counter

try:
        thread.start_new_thread( myCounters, ("Thread-1", 2, ) )
        thread.start_new_thread( myCounters, ("Thread-2", 4, ) )
except:
        print "Error: Thread Not Started"

while 1:
        pass 
```

对于那些尝试此代码的人，它不起作用。我假设我需要将输入文件分成块并以某种方式合并输出。? 映射/减少？也许有一个更简单的解决方案？

编辑：

也许是这样的：

1.  打开文件，
2.  把它分成几块
3.  将每个块提供给不同的线程
4.  获取计数并在每个块上构建 dict
5.  合并计数/字典
6.  返回结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T10:57:55.807

首先，您需要使用并行进程而不是并行线程是正确的。由于全局解释器锁 (GIL)，执行*此类任务 [参见下面的ETA] 将无法很好地扩展到 python 下的多个线程。*

如果您想并行处理单个文件，显而易见的方法是首先检查文件大小，然后将相同大小的块分配给多个进程。这只涉及告诉每个进程从文件中的哪个位置开始，以及从哪个位置结束。（当然，您必须小心不要将任何单词或行数两次。一种简单的方法是让每个进程忽略初始字节，直到它到达行首，然后开始计数）。

**但是**，您在问题中声明您将使用 glob 来处理多个文件。因此，与其采用复杂的文件分块并将块分配给不同的进程，一个更简单的选择是将不同的*文件*分配给不同的进程。

* * *

**预计到达时间：**

在 Python 中使用线程适用于某些用例，例如使用长时间阻塞的 I/O 函数。@uselpa 是对的，如果处理受 I/O 限制，那么线程可能会执行良好，但这里的情况并非如此，因为瓶颈实际上是解析，而不是文件 I/O。这是由于 Python 作为解释型语言的性能特点；在编译语言中，I/O 更有可能成为瓶颈。

我提出这些声明是因为我刚刚根据原始代码进行了一些测量（使用包含 100 个 pg2852.txt 连接副本的测试文件）：

*   作为单线程运行大约需要 2.6 秒来读取和解析文件，但当我注释掉解析代码时只需要 0.2 秒。
*   *并行运行两个线程（从同一个文件中读取）耗时 7.2 秒，但并行启动的两个*单线程进程仅耗时 3.3 秒即可完成。

# java - 如何运行 Android Activity 类的 main 方法？

> ID：10868711
> 
> 赞同：5
> 
> 时间：2012-06-03T07:48:13.807
> 
> 标签：java, android

我想通过在我创建的 Activity 的***public static void main(String[] args)***方法中执行它来检查**Android Activity的私有方法。**

 *我使用**Eclipse ADT和我将***Activity*作为**Java 应用程序**运行的天真方法导致：

> Java 运行时环境检测到致命错误：
> 内部错误 (classFileParser.cpp:3174)，pid=2936，tid=2980
> 错误：ShouldNotReachHere()

所以我查看了**运行配置**，发现**Android 3.1是****Classpath的****Bootstrap Entries**部分中的唯一条目。我设法配置了项目的**构建路径**，以便**JRE**也在**引导条目**中。然后我删除了**Android 3.1**条目并将**android.jar**添加到**User Entries**。

 ******执行**运行配置**的结果是一个 RuntimeException：

> 线程“主”java.lang.RuntimeException 中的异常：存根！
> 在 android.content.Context.(Context.java:4)

**执行某些测试的另一种方法**是启动**JUnit**测试。但是在**私有方法**的情况下，这很麻烦。

有没有办法成功运行 Android Activity 类的 main 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:09:28.147

对于手头的问题还有另一种选择，如果`private`方法（应该通过执行 main 方法来检查）可以**提取到另一个类**。这当然意味着方法突然变成了至少`protected`。

但是，如果该方法是在一个不是从[android.app.Activity](http://developer.android.com/reference/android/app/Activity.html)派生的类中定义的，则可以定义一个**main 方法。**您只需在 Eclipse中调整**运行配置。**

1.  **使用Run as Java Application**运行该类。这会生成一个名为类的新运行配置
2.  编辑新创建的运行配置
3.  **从Classpath**选项卡中的**Bootstrap Entries**中删除**Android**库
*****   将JRE 6左右添加到项目的构建路径中*   将此 JRE 添加到**Classpath**选项卡中的**Bootstrap Entries*****   添加**android.jar**，它位于**Classpath**选项卡的**User Entries**中的**Android SDK****平台**目录中******

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:38:37.260

从 Android 的角度来看，Activity 非常重要，Activity 的生命周期是由操作系统在整个 Activity 生命周期中处理的少数方法的集合。

```
public void onCreate(Bundle savedBunldeInstance) 
```

应用程序启动后立即调用创建活动。这是android中应用程序的入口点。您必须有模拟器或物理设备才能运行 Android 应用程序，这里的文件是`compiled 2 times`，一次由`java compiler then by dalvik compiler`.

`DVM (Dalvik Virtual Machine)`位于 Android 设备（EMULATOR 或 PHYSICAL）上，这就是我们需要模拟器或物理设备来运行它的原因。onCreate 是它的入口点。

根据您的要求，我正在编辑这篇文章并附上一条额外的信息。以下几行摘自[http://developer.android.com/](http://developer.android.com/)

```
 Android applications don't have a single entry point.
 (there's no main() function, for example). 
```

更多详情请点击：

```
http://developer.android.com/guide/topics/fundamentals.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T07:55:42.757

main 方法不像 Java 那样是 Android 的入口点。你想覆盖

```
public void onCreate(Bundle savedBunldeInstance) method. 
```*************

# java - Java MySQL登录系统

> ID：10868714
> 
> 赞同：1
> 
> 时间：2012-06-03T07:48:53.867
> 
> 标签：java, mysql, authentication, login, system

我目前正在与 SixthSense 团队创建一个应用程序，我想知道，我将如何处理用户登录和 java 与 MySQL 服务器通信的表单，然后使用数据库响应，打开一个包含该用户信息的页面页面

我正在使用 Java 7

谢谢，

詹姆士

编辑：输入用户名/密码连接到 MySQL 服务器检查凭据打开页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:29:42.280

你做过一些搜索吗？目前还不是很清楚你在问什么。有很多方法可以做你需要做的事情。问题是您是使用一些框架连接到数据库还是需要简单的连接？

要显示有关用户的信息，您需要从数据库中读取数据，遍历结果集，在每次迭代中创建一个对象，将数据存储到其中，将其添加到列表中，将其设置为请求或会话属性并在查看页面。

这是登录表单示例：

[http://www.roseindia.net/quickguide/tomcat/loginform.shtml](http://www.roseindia.net/quickguide/tomcat/loginform.shtml)

这是与数据库示例的连接：

[http://lxuser.tripod.com/apache/jdbc_mysql.html](http://lxuser.tripod.com/apache/jdbc_mysql.html)

希望这可以帮助。

# macos - NSWindow 的标题作为指示器弹出按钮

> ID：10868715
> 
> 赞同：0
> 
> 时间：2012-06-03T07:48:57.797
> 
> 标签：macos, cocoa, popup, indicator, nstoolbar

我正在尝试制作我的第一个 Cocoa 应用程序（以前我正在制作 iOS 应用程序），我希望为我的自定义视图做的是让它的标题可点击，指示器（附件）三角形朝下。单击标题将打开包含我的项目的弹出/菜单。

这在 Cocoa 中是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:31:36.930

您可以通过在 IB 的窗口中添加工具栏来做到这一点。添加工具栏后，您可以双击它以打开它的定制器视图。将弹出按钮拖到允许的工具栏项目区域，然后将其插入那里后，您可以将其拖到显示工具栏布局的底部区域 - 您也可以拖出任何您不想要的默认项目.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:50:30.383

[Rdelmar 的答案](https://stackoverflow.com/a/10872015/307881)可能是最简单的方法，但可能不会完全按照您的意愿去做（即用弹出项目替换实际标题，而不是在工具栏区域的标题下方有一个弹出按钮）。就功能而言，您的应用程序使用工具栏可能也能正常工作。

然而，如果你真的想替换实际的标题，解决这个问题的方法是将`NSWindow`标题文本设置`@""`为隐藏它，并通过粘贴在你自己的视图中来重新绘制它。

```
[[[theWindow contentView] superview] addSubview:theSubview]; 
```

这基本上告诉主要内容视图的超级视图添加另一个子视图（直接从代码“翻译”），并且您必须修改这个新子视图的框架以将其定位在标题应该定位的位置（因为现在它可以自由放置在窗口框架中的任何位置，包括*标题栏顶部*，而不是简单地放在内容视图内）。

`theSubview`可以是您的弹出按钮，也可以是您想要的任何东西，而且您可能还必须自定义绘制弹出按钮以匹配窗口标题的原始绘图。

# c - 用键盘或其他硬件按钮控制伺服？

> ID：10868718
> 
> 赞同：1
> 
> 时间：2012-06-03T07:50:17.787
> 
> 标签：c, arduino

我刚刚开始使用 Arduino，对更多高级的东西几乎一无所知。这似乎很简单。现在我是一个通常喜欢将两个设备集成在一起的人，所以我想知道我是否可以用计算机的键盘或连接到 Arduino 板上的两个硬件按钮来控制伺服。

如果有帮助，我使用的是 Arduino Uno 板。这是我现在用来扫描伺服的示例代码

```
// Sweep
// by BARRAGAN <http://barraganstudio.com> 
// This example code is in the public domain.

#include <Servo.h> 

Servo myservo;  // create servo object to control a servo 
            // a maximum of eight servo objects can be created 

int pos = 0;    // variable to store the servo position 

void setup() 
{ 
  myservo.attach(11);  // attaches the servo on pin 9 to the servo object 
} 

void loop() 
{ 
  for(pos = 0; pos < 45; pos += 1)  // goes from 0 degrees to 180 degrees 
  {                                  // in steps of 1 degree 
    myservo.write(pos);              // tell servo to go to position in variable 'pos' 
    delay(10);                       // waits 15ms for the servo to reach the position 
  } 
  for(pos = 45; pos>=1; pos-=1)     // goes from 180 degrees to 0 degrees 
  {                                
    myservo.write(pos);              // tell servo to go to position in variable 'pos' 
    delay(10);                       // waits 15ms for the servo to reach the position 
  } 
} 
```

1.  现在，假设我想通过按计算机键盘上的左/右箭头键来改变伺服的角度。我该怎么做呢？

2.  或者，如果我将两个按钮连接到 Arduino，按下一个按钮会根据按钮向左或向右移动伺服系统。我会将按钮插入哪些端口？任何代码示例或图表都会有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:58:13.660

要移动连接到连接到计算机的 arduino 的伺服系统，您需要两个组件。

您将需要计算机上的软件来接受键盘命令并通过串行端口向 arduino 发送命令。我会推荐一种像 python 或 java 这样的语言来做到这一点，因为一个简单的应用程序可以很容易地编写。

检查此[游乐场链接](http://arduino.cc/playground/Interfacing/Java)以获取使用 Java 的示例。对于 python 中的示例，请查看[此项目](http://principialabs.com/arduino-python-4-axis-servo-control/)。

arduino 内置了一个错误/功能，当您继续操作时，它会让您感到悲伤。arduino 设计为在通过 USB 进行串行连接时自动重置。 [此页面](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)对问题进行了详细描述，并列举了几种处理方法。

您将需要修改 arduino 上的草图以侦听串行端口并根据从计算机收到的命令调整伺服的位置。查看上面的 python 链接。这是一个完整的（硬件、PC 软件和 arduino 草图）项目，旨在做一些与您正在尝试做的事情非常相似的事情。

我建议您从任一组件开始并尝试让它运行。当您遇到问题时，发布您的代码，有人会很乐意提供进一步的帮助。

至于第二个问题，向 arduino 添加按钮相当简单。您将它们连接到数字输入。网上有数百个例子。搜索“向 arduino 添加按钮”，看看你得到了什么。（大声笑... 130 万次点击）。再次在这里尝试并发布详细信息以获得更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:51:08.310

对于串行通信，使用 putty
它是一个跨平台的串行和 ssh 客户端

对于左右箭头命令：箭头
没有 ascii 字符：但有 utf-8；
putty 或其他客户端发送 utf-8 字符，因为基本的 ascii 字符是 utf-8 和 ascii 完全相同；

arduino 只读取 ascii 字符；

arduino 读取
--> : 27, 91, 67
<-- : 27, 91, 68

所以读起来并不是那么简单。

你可以使用这样的东西

```
int pos = 0;
Serial.flush(); // flush all received data
while(Serial.avaialble()<3); // wait for the 3 ascii chars
if(Serial.read()==27){ // first char
  if(Serial.read()==91){ //second char
    switch (Serial.read()){
      case 67: // Right arrow
        myservo.write(++pos); // increment pos with 1 before write it
        break;
      case 68: // left arrow
        myservo.write(--pos); // derement pos with 1 before write it
        break;
      case 65: // up arrow
        myservo.write(++pos); // increment pos with 1 before write it
        break;
      case 66: // down arrow
        myservo.write(--pos); // decrement pos with 1 before write it
        break;
      case default:
        break;
    }
  }
} 
```

但这不是一个好的解决方案，因为箭头字符在 3 个字节中发送，当您刷新时它可以刷新 27，因此您读取 91、97、27；那是无效的，所以 in 不起作用

你可以编写一个算法从 5 个 ascii 字符中减去箭头命令

或者您可以使用 4 向左移动和 6 向右移动；它们是 ascii 字符，在数字键盘中是在这些键上绘制的箭头

# objective-c - OpenWithCompletionHandler: 完成后如何返回结果

> ID：10868720
> 
> 赞同：1
> 
> 时间：2012-06-03T07:50:22.510
> 
> 标签：objective-c, ios, xcode, core-data, block

想查询Coredata数据库中的一张照片

这是我的代码

这是 NSObjectSubclass 类别

```
//Photo+creak.h

#import "Photo+creat.h"

@implementation Photo (creat)

+(Photo *)creatPhotoByString:(NSString *)photoName inManagedObjectContext:(NSManagedObjectContext *)context{
    Photo *picture = nil;

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
    request.predicate = [NSPredicate predicateWithFormat:@"name = %@", photoName];

    NSArray *matches = [context executeFetchRequest:request error:nil];
    if (!matches || [matches count]>1) {
        //error
    } else if ([matches count] == 0) {
        picture = [NSEntityDescription insertNewObjectForEntityForName:@"Photo" inManagedObjectContext:context];
        picture.name = photoName;
    } else {
        picture = [matches lastObject];
    }
    return picture;
}

+ (BOOL)isPhoto:(NSString *)photoName here:(NSManagedObjectContext *)context{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
    request.predicate = [NSPredicate predicateWithFormat:@"name = %@", photoName];
    NSArray *matches = [context executeFetchRequest:request error:nil];
    switch ([matches count]) {
        case 1:
            return YES;
            break;
        default:
            return NO;
            break;
    }
}
@end 
```

视图控制器内部的代码

```
//View Controller
- (IBAction)insertData:(UIButton *)sender {
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"test"];
    UIManagedDocument *defaultDocument = [[UIManagedDocument alloc] initWithFileURL:url];
    if (![[NSFileManager defaultManager] fileExistsAtPath:[url path]]) {
        [defaultDocument saveToURL:defaultDocument.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:NULL];
    }
    [defaultDocument openWithCompletionHandler:^(BOOL success) {
        [Photo creatPhotoByString:@"test" inManagedObjectContext:defaultDocument.managedObjectContext];
        [defaultDocument saveToURL:defaultDocument.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
    }];
    [sender setTitle:@"Okay" forState:UIControlStateNormal];
    [sender setEnabled:NO];
}

- (IBAction)queryFromDatabase:(UIButton *)sender {
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"test"];
    UIManagedDocument *defaultDocument = [[UIManagedDocument alloc] initWithFileURL:url];
    BOOL isItWorking = [checkPhoto isPhoto:@"test" inManagedDocument:defaultDocument];
    if (isItWorking) {
        [sender setTitle:@"Okay" forState:UIControlStateNormal];
    } else {
        [sender setTitle:@"NO" forState:UIControlStateNormal];
    }
} 
```

连接它们的 NSObject 类。

```
 //  checkPhoto.m
#import "checkPhoto.h"
@implementation checkPhoto
+ (BOOL)isPhoto:(NSString *)photoToCheck inManagedDocument:(UIManagedDocument *)document{
    __block BOOL isPhotoHere = NO;
    if (document.documentState == UIDocumentStateClosed) {
        [document openWithCompletionHandler:^(BOOL success) {
            isPhotoHere = [Photo isPhoto:photoToCheck here:document.managedObjectContext];
        }];
    }
    return isPhotoHere;
}
@end 
```

核心数据只有一个名为“照片”的实体，它只有一个属性“名称”。问题是返回总是在块完成之前执行并且总是返回 NO。测试代码[在这里](https://docs.google.com/open?id=0B519iRTC07VBUF84ZHVVSVFkcVk)

**或者我应该在查询时做其他事情而不是 openWithCompletionHandler ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:21:58.780

您需要重新设计方法以异步工作，例如`-openWithCompletionHandler:`. 它需要采用一个块，该块在已知答案时被调用并接收答案（真或假）作为参数。

然后，调用者应该传入一个块，该块执行已知答案后应该发生的任何事情。

或者，或者，您应该延迟关心照片是否在数据库中的整个逻辑块。它应该在打开完成后完成。

您必须显示更多代码以获得更具体的建议。

* * *

因此，您可以将`isPhoto...`方法修改为：

```
+ (BOOL)checkIfPhoto:(NSString *)photoToCheck isInManagedDocument:(UIManagedDocument *)document handler:(void (^)(BOOL isHere))handler {
    if (document.documentState == UIDocumentStateClosed) {
        [document openWithCompletionHandler:^(BOOL success) {
            handler([Photo isPhoto:photoToCheck here:document.managedObjectContext]);
        }];
    }
    else
        handler(NO);
} 
```

然后你可以重做这个：

```
- (IBAction)queryFromDatabase:(UIButton *)sender {
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"test"];
    UIManagedDocument *defaultDocument = [[UIManagedDocument alloc] initWithFileURL:url];
    [checkPhoto checkIfPhoto:@"test" isInManagedDocument:defaultDocument handler:^(BOOL isHere){
        if (isHere) {
            [sender setTitle:@"Okay" forState:UIControlStateNormal];
        } else {
            [sender setTitle:@"NO" forState:UIControlStateNormal];
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:24:29.340

试试看

```
+(BOOL)isPhoto:(Photo *)photo inDataBase:(UIManagedDocument *)defaultDocument{
 __block BOOL isPhotoThere = NO;
dispatch_semaphore_t sema = dispatch_semaphore_create(0);
[defaultDocument openWithCompletionHandler:^(BOOL success) {
    [defaultDocument.managedObjectContext performBlock:^{
        isPhotoThere = [Photo checkPhoto:photo];
        dispatch_semaphore_signal(sema);
    }];
 }];
 dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
 dispatch_release(sema);
 return isPhotoThere;
} 
```

# c# - 尝试以编程方式打开 spsite 时收到错误“用户登录失败”

> ID：10868725
> 
> 赞同：1
> 
> 时间：2012-06-03T07:52:30.200
> 
> 标签：c#, sharepoint-2007

我开发了一个窗口服务应用程序，它在 SP 服务器上运行，将文件从 Safe 复制到 SP。该服务在一个应用程序用户下运行，该用户是 SP 服务器上的管理员，并且是它尝试访问的站点上的站点集管理员。当我运行该服务时，我收到“SQL 数据库登录失败。下面包括来自 SQL Server 的其他错误信息。用户登录失败“我可以使用指定用户通过浏览器访问该站点。当我在我的用户下运行服务时，我没有收到此错误（我是服务器上的管理员和网站上的网站集管理员）

错误发生在以下行：

```
Using(SPsite site = new SPSite(<the url to the site>)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:00:43.333

我将用户作为管理员添加到数据库服务器，问题就解决了。

# java - 将方法返回类型与Java中的类匹配？

> ID：10868726
> 
> 赞同：2
> 
> 时间：2012-06-03T07:52:35.317
> 
> 标签：java, generics

我需要将方法返回的类型与类匹配。我怎样才能做到这一点？

```
public class MethodTest {

    public static List<String> getStringList()
    {
        return null;
    }

    public static void main(String[] args)
    {
        for(Method method : MethodTest.class.getMethods())
        {
            Type returnType = method.getGenericReturnType();
            // How can for example test if returnType is class List?
        }       
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T07:58:53.180

我相信您可以检查是否为`Type`a`ParameterizedType`并使用原始类型（如果是）：

```
if (returnType instanceof ParameterizedType)
{
    System.out.println("Parameterized");
    ParameterizedType parameterized = (ParameterizedType) returnType;
    System.out.println(parameterized.getRawType().equals(List.class));
}
else
{
    System.out.println("Not parameterized");
    System.out.println(returnType.equals(List.class));
} 
```

这将处理`List<?>`and `List`，但它*不会*匹配声明为返回具体实现的方法`List`。（`isAssignableFrom`为此使用。）

请注意，如果您不打算使用有关返回类型的泛型类型参数等的任何其他内容，那么missingfaktor 的答案是一个很好的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T07:55:14.830

`List`如果您对的类型参数不感兴趣，您可以只使用`method.getReturnType().equals(List.class)`来测试该方法是否返回一个`List`.

但是请注意，`false`如果所讨论的方法恰好返回`List`. （感谢@cHao 指出这一点！）如果您希望处理这种情况，请`List.class.isAssignableFrom(method.getReturnType())` 改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:39:04.177

我想你可以这样检查：

```
if(returnType instanceof List) {

} 
```

# jquery - 在 Jquery Mobile 中获取 div 元素的宽度

> ID：10868731
> 
> 赞同：2
> 
> 时间：2012-06-03T07:53:01.227
> 
> 标签：jquery, mobile, width, element, hidden

我知道所有元素都隐藏在 jquery mobile 中。但我需要在加载的第一个主页中获取“div”元素的宽度值。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:58:37.950

```
$(document).ready(function() {

  $('#your_div').width();  // you have also .outerWidth() and .innerWidth()

  // you can also try with

  $('#your_div:hidden').width();   

  // or

   $('#your_div:hidden').css('width');

}); 
```

### 根据评论

```
$('div.myClass:hidden').css('width'); // select div with class myClass and hidden also 
```

您还可以执行以下技巧来获取隐藏 div 的宽度

```
$(".myClass").css({'position':'absolute','visibility':'hidden','display':'block'});

var optionHeight = $(".myClass").width();

$(".myClass").css({'position':'static','visibility':'visible','display':'none'}); 
```

# google-earth-plugin - 如何在谷歌地球中创建一个自定义图层，以便我可以设置它的可见性

> ID：10868733
> 
> 赞同：0
> 
> 时间：2012-06-03T07:53:36.640
> 
> 标签：google-earth-plugin

我正在尝试在谷歌地球插件中渲染一大堆向量。我使用 parseKml 方法创建我的 Kml Feature 对象并将其存储在一个数组中。代码如下所示。我循环遍历从数据库返回的 10,000 个 kml 对象列表，并在插件中绘制它。

```
// 'currentKml' is a kml string returned from my DB. 
// I iterate over 10,000 of these
currentKmlObject = ge.parseKml(currentKml);
currentKmlObject.setStyleSelector(gex.dom.buildStyle({
    line: { width: 8, color: '7fff0000' }
}));
ge.getFeatures().appendChild(currentKmlObject);
// After this, I store teh currentKml object in an array so 
// I can manipulate the individual features. 
```

这似乎工作正常。但是，当我想一次打开或关闭所有这些功能的可见性时，我必须遍历数组中的所有这些 kml 对象，并打开或关闭它们各自的可见性。这有点慢。如果我缩小，我可以慢慢地看到每条线消失，大约需要 5 - 10 秒才能全部消失或恢复。

我想知道是否可以通过添加一个图层并将我的所有对象添加为该图层的子对象来加快此过程。这样我就可以打开或关闭整个图层的可见性。

我一直无法找到如何在代码中创建一个新层。如果有人可以指出适当的方法，那就太好了。我也不确定层是否是加快进程的正确方法。如果您对我如何加快一次打开/关闭地图中所有这些对象的过程还有任何其他建议，那也将非常有帮助。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:40:50.940

好的，我自己找到了如何做到这一点。

在谷歌地球扩展库中，我使用“buildFolder”方法。

```
var folder = gex.dom.buildFolder({ name: folderName });
ge.getFeatures().appendChild(folder); 
```

现在，当我遍历我的对象数组时，我将它们添加到文件夹中，而不是使用以下

```
folder.getFeatures().appendChild(currentKmlObject); 
```

这样，稍后我可以使用在文件夹级别打开和关闭可见性

```
folder.setVisibility(false); // or true 
```

这也很有效。我没有延迟，我可以看到所有对象同时打开和关闭。它非常快速且高效。

# playframework-2.0 - 播放 2 如何从 MultipartFormData 中获取 DataPart

> ID：10868734
> 
> 赞同：2
> 
> 时间：2012-06-03T07:53:41.630
> 
> 标签：playframework-2.0

如何从 MultipartFormData 中获取 DataPart？我找不到任何 API 来获取它。

```
Http.MultipartFormData formData = body.asMultipartFormData();

// simple form field
// there is NO getData() or something available
DataPart imageIdPart = formData.getData("dataKey");

// uploaded file
FilePart imagePart = formData.getFile("imageKey"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T07:16:56.710

我不习惯在 Play 2.0 中使用 Java，但这样的工作是否可行？

```
@BodyParser.Of(BodyParser.MultipartFormData.class)
public static Result index() {
    Http.MultipartFormData multipartFormData = request().body().asMultipartFormData();

    //ask the multipart to be form url encoded... 
    //and get the data
    String[] data = multipartFormData.asFormUrlEncoded().get("dataKey");

    //which should not impact such call
    Http.MultipartFormData.FilePart image = multipartFormData.getFile("imageKey");

    return ok("Got image: " + image.getFilename());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-10T13:37:23.693

在斯卡拉：

```
def index = Action(parse.multipartFormData) {
    request => {

     val dataKey = request.body.dataParts.get("dataKey")
     something something...

     Ok("Ok!")
} 
```

# mysql - 具有挑战性的 SQL 查询来执行矩阵乘法

> ID：10868735
> 
> 赞同：2
> 
> 时间：2012-06-03T07:53:53.897
> 
> 标签：mysql, join, currency

我有以下两个表：

```
sales
- id
- sales_price
- currency
- date

exchange
- currency
- conversion_to_usd
- date 
```

在销售表中，我可能有任意数量的货币，例如`aud`, `chf`,`nzd`等...

我需要将总销售额转换为美元。以下将是一个手动示例：

```
sales
(10.20, 'NZD', '2012-10-01')
(4.15,  'AUD', '2012-09-01')
...

exchange
('AUD', 1.02, '2012-08-01')
('AUD', 1.03, '2012-09-01')
('NZD', 0.89, '2012-10-01)

  10.20 (cost NZD) * 0.89 (NZD conversion) 
+ 4.15 (cost AUD) * 1.03 (AUD conversion)
= 13.3525 
```

我可以针对单个货币执行此操作，但是很难概括查询以获取给定日期的所有总和。

```
SELECT SUM(sales_price) * conversion_to_usd FROM sales
    INNER JOIN exchange
    using (currency, date) 
    WHERE currency = "AUD" and date = "2012-09-01" 
```

给定一个日期，我将如何执行此组合查询？

我想得到以下形式的结果：

```
sales_in_usd    currency       date
100             AUD            2012-01-01
150             CAD            2012-01-01
40              DKK            2012-01-01
36              JPY            2012-01-01
etc... 
```

请注意，我正在寻找**一般**查询，因为将有超过 30 种货币。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:58:31.760

你试过`GROUP BY`命令吗？

```
SELECT SUM(sales_price) * conversion_to_usd AS 'Sales in US$', 
    currency AS 'Currency', 
    date AS 'Date' FROM sales
INNER JOIN exchange
    USING (currency, date) 
WHERE date = "2012-09-01"
GROUP BY currency; 
```

# php - 不从 PHP 数据库查询返回结果集

> ID：10868739
> 
> 赞同：1
> 
> 时间：2012-06-03T07:54:44.313
> 
> 标签：php, mysql, apache

我创建了一个简单的 php mysql 系统，可以根据症状诊断疾病。用户可以选择最能描述他/她状况的那些症状。问题是我无法让查询工作。我有以下表格：

1.  `m_health_diseases`它以独特的 id（即 1、2、3、4 ......）保存疾病。
2.  `m_health_symptoms`它以其独特的 ID 保存症状。
3.  `m_health_relations`它根据其他两个表中的主键保存疾病及其症状的关系。

我不允许以新用户的身份发布图片，但我希望您对这些表格有所了解。实际上，这些表类似于此链接帖子：Akhilesh B Chandran 的答案中[带有 php-mysql 的症状检查器。](https://stackoverflow.com/questions/10085461/symptom-checker-with-php-mysql)

这是 SQL 查询：

```
SELECT m_health_diseases.DiseaseName 
FROM m_health_relations 
LEFT JOIN m_health_diseases 
  ON m_health_relations.DiseaseId = m_health_diseases.DiseaseId 
WHERE m_health_relations.SymptomId = '14' 
AND m_health_relations.SymptomId = '15' 
AND m_health_relations.SymptomId = '16' 
AND m_health_relations.SymptomId = '4' 
```

上面的查询应该返回疾病：“普通感冒”，但它不返回任何结果集。我尝试以不同的方式更改查询，但仍然没有给我所需的结果。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:01:07.157

再试一次，

由于您的要求是获取所有`DiseaseName`症状集包括用户提到的所有症状的人，因此我建议您在代码中添加逻辑来处理此问题，但通过 SQL 查询执行此操作的一种方法（尽管未优化）是：

创建表如下：

```
#tblRel - holds relation between diseases and symptoms
######################################################
relID  | dieaseID | symptomSet
-----------------------------
1         1          1, 2            //Store the symptom set sorted (let symptom set start with a space)
2         2          1, 2, 3 
```

现在，

```
SELECT diseaseID from tblRel where symptomSet like (" 4,% 14,% 15,% 16"); // Sort input set also 
```

这应该适用于任何数量的症状，但您的代码中需要一些逻辑来对输入集进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T07:59:42.823

如果您想要具有所有症状 14、15、16、4 的疾病，您可以为要检查的每个症状加入 m_health_relations 表的另一个副本。

```
SELECT d.DiseaseName 
FROM m_health_diseases d
INNER JOIN m_health_relations s1 ON (s1.DiseaseId = d.DiseaseId)
INNER JOIN m_health_relations s2 ON (s2.DiseaseId = d.DiseaseId)
INNER JOIN m_health_relations s3 ON (s3.DiseaseId = d.DiseaseId)
INNER JOIN m_health_relations s4 ON (s4.DiseaseId = d.DiseaseId)
WHERE
s1.SymptomId = 14 AND
s2.SymptomId = 15 AND
s3.SymptomId = 16 AND 
s4.SymptomId = 4; 
```

如果您想象没有 where 子句的结果，您会发现每种疾病都有其症状的每种 4 向组合，并且 where 子句选择一个特定的组合（如果存在）。

因为我多次使用同一个表，所以我为每个表使用了表别名，这也使查询更易于阅读。

另外，请注意我使用了 INNER 而不是 LEFT 连接，因为您对任何空结果都不感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:03:53.890

```
WHERE m_health_relations.SymptomId = '14' 
AND m_health_relations.SymptomId = '15' 
AND m_health_relations.SymptomId = '16' 
AND m_health_relations.SymptomId = '4' 
```

m_health_relations.SymptomId 怎么可能同时是 14 和 15 以及 16 和 4？

它应该是`OR`或`m_health_relations.SymptomId in (14,15,16,4)`

# iphone - 从应用程序内部打开 iphone

> ID：10868740
> 
> 赞同：-1
> 
> 时间：2012-06-03T07:54:58.077
> 
> 标签：iphone, ios, standby

我正在为 iphone 编写一个闹钟应用程序，我希望它在闹钟应该响起前大约 1 小时打开手机（从待机模式）。

然后我希望应用程序处于活动状态，这样我就可以实时流式传输内容，而无需用户将手机置于活动模式。

有什么方法可以让应用退出待机状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:47:36.537

如果不使用私有 api，应用程序只能呈现警报视图（通过本地或推送通知）。

只有当用户点击“查看”按钮时，这个应用程序才能被激活。您可以在您提供的[链接](http://itunes.apple.com/us/app/alarm-clock-free/id332064280?mt=8)中看到- （倒数第二个屏幕截图）

诚然，您始终可以在此通知中添加声音 - 因此警报应用程序可以工作（并且有很多），但它不能在前台发送自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:11:09.767

不，不能这样做，一旦应用程序进入后台状态，您就会失去对它的控制，并且无法将其恢复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T09:37:09.170

可能有一种使用通知的方法。检查此 SO 问题以获取更多信息：

[警报甚至应用程序在 iPhone 中关闭](https://stackoverflow.com/questions/4733931/alarm-even-application-closed-in-iphone)

# java - 更有效的图像编辑和显示方式？

> ID：10868745
> 
> 赞同：1
> 
> 时间：2012-06-03T07:55:44.873
> 
> 标签：java, image

我正在制作一个打印图像并允许用户通过在其上绘图来编辑它的 Java 应用程序。目前，我的程序监听鼠标拖动，一旦它，改变光标当前所在像素的颜色。为了显示更改，我在每个循环`paintComponent`结束时调用。`mouseDragged`虽然它按预期工作，但如果我移动鼠标太快，图像会颤动。

这是因为我打电话的次数`paintComponent`太多了吗？如果是这样，我怎样才能让我的程序更有效地工作？

我正在考虑仅在内存中编辑图像并每隔 1/30 秒左右显示一次图像，而不是在每次编辑后显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:20:05.080

> 这是因为我打电话的次数`paintComponent`太多了吗？

一次太多了。而是调用`repaint()`& 让它安排（或忽略）对`paintComponent()`.

# php - PHP array_merge array_unique 小写/大写

> ID：10868746
> 
> 赞同：0
> 
> 时间：2012-06-03T07:55:59.307
> 
> 标签：php, arrays, array-unique

现在，我有一个返回函数：

```
return array_unique(array_merge( $sizes, $custom_sizes )); 
```

我的问题是某个键在一个中可以是小写，在另一个中可以是大写。

例如，我可以在 $sizes中获得“ **Thumbnails ”，在 $custom_sizes 中获得“** **thumbnails** ”——在这种情况下，我当然想删除一个。

（名称相同：

“**星球大战**”vr。“**星球大战**”vr。“**星球大战**”vr。“**星球大战**”）

如何使 array_unique() 不区分大小写？

**编辑我**：以下评论，澄清：

我还希望能够选择要保留的版本（第一个数组中的那个，或者第二个数组中的那个..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:04:19.077

谷歌上的第一个热门是 PHP.net 页面，它提供：

```
function in_iarray($str, $a){
    foreach($a as $v){
        if(strcasecmp($str, $v)==0){return true;}
    }
    return false;
}

function array_iunique($a){
    $n = array();
    foreach($a as $k=>$v){
        if(!in_iarray($v, $n)){$n[$k]=$v;}
    }
    return $n;
}

$input = array("aAa","bBb","cCc","AaA","ccC","ccc","CCC","bBB","AAA","XXX");
$result = array_iunique($input);
print_r($result);

/*
Array
(
    [0] => aAa
    [1] => bBb
    [2] => cCc
    [9] => XXX
)
*/ 
```

# date - 在 ORACLE 中从 SYSDATE 中减去日期

> ID：10868747
> 
> 赞同：1
> 
> 时间：2012-06-03T07:56:43.193
> 
> 标签：date, oracle10g, datediff, sysdate

减去一个日期`SYSDATE`会得到否定的结果：

```
select floor(SYSDATE - dateemb) from pilote;

FLOOR(SYSDATE-DATEEMB)
----------------------
                -29126
                -29137
                -29522 
```

有什么解决办法吗？

表先导：

```
Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 NUMPIL                                    NOT NULL NUMBER
 NOMPIL                                             VARCHAR2(25)
 ADRPIL                                             VARCHAR2(25)
 SALAIRE                                            NUMBER
 COMMISSION                                         NUMBER
 DATEEMB                                            DATE 
```

使用的数据：

```
NUMPIL   NOMPIL    ADRPIL   SALAIRE   COMMISSION     DATEEMB
------- --------  -------- --------   ----------    ---------
1333    FEDOI      NANTES   24000      0            01-MAR-92                           

6589    DUVAL      PARIS    18600     5580          12-MAR-92

7100    MARTIN     LYON     15600     16000         01-APR-93 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:51:16.730

这个[先前的问题](https://stackoverflow.com/questions/19058/what-is-the-difference-between-oracles-yy-and-rr-date-mask)表明，Oracle 中有一种日期格式可以使您的 92 年变为 2092 年（即未来），而不是预期的 1992 年。如果此格式已用于插入您的 2 位数年份数据，那么您的日期都是错误的，如果您将它们完整地写出来，您应该能够确认这一点。解决方案是在创建数据时修复数据并使用 4 位数年份。

# iphone - 通过多线程实现的最佳方式

> ID：10868748
> 
> 赞同：3
> 
> 时间：2012-06-03T07:56:52.373
> 
> 标签：iphone, objective-c, ios, nsthread

我是多线程的新手，需要一些建议。

我在我的代码中使用了 ARC。

**问题：**我在我的应用程序中设置了 NSTimer 以每 1 秒触发一些创建和启动线程的方法，如下所示

```
//Create a new thread
mSomeThread = [[NSThread alloc] initWithTarget:self selector:@selector(someMethod) object:nil]; 

//start the thread 
[mSomeThread start]; 
```

`mSomeThread`伊瓦尔在哪里

假设 mSomeThread 的执行时间超过 1 秒，并且 mSomeThread 被第二次分配，即根据 ARC“规则”，它在被分配一次之前释放。

这是否意味着第一个线程没有完成并且被迫相当？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:24:12.320

An`NSThread`在其执行期间保留自己。重置`mSomeThread`不会导致正在运行的线程过早终止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T08:13:53.407

是的。如果您确实需要为您保留对当前执行线程的引用，`someMethod`那么您需要等待它完成，然后才能真正启动一个新线程。一种快速的方法是添加

```
while ([mSomeThread isExecuting]) {
    sleep(1);
} 
```

紧随其后`[mSomeThread start];`。

顺便说一句，我宁愿重新实现 NSThread 并在其`main`实现中设置一个重复的 NSTimer 。就像是：

```
- main {
      @autoreleasepool {
          [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(someMethod) userInfo:nil repeats:NO];
          [[NSRunLoop currentRunLoop] run];
        }
} 
```

# ruby-on-rails - RSpec + 工厂女孩测试 404 ActiveRecord::RecordNotFound

> ID：10868751
> 
> 赞同：1
> 
> 时间：2012-06-03T07:57:06.443
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2, factory-bot

我的控制器规格文件中有这个

```
it "should raise 404" do
      business = FactoryGirl.build(:business)
      expect{get :edit, :id => business}.to raise_error(ActiveRecord::RecordNotFound)
    end 
```

如果我是对的，构建不会保存到数据库，所以业务不应该存在，我的测试应该通过，但它没有。

我还尝试了一个字符串作为“id”的值，但它仍然失败。

我试过这个控制器动作：

```
def edit
    if params[:id].to_i == 0
      name = params[:id].to_s.titleize
      @business = Business.find_by_name!(name)
    else
      @business = Business.find(params[:id])
    end
    respond_with(@business)
  end 
```

一个不存在的 ID，它确实显示了 404。

如果你问为什么会出现这样的情况，我也会让这个动作响应“id”参数的字符串。

应用程序控制器中的此代码接收任何 ActiveRecord::RecordNotFound：

```
rescue_from ActiveRecord::RecordNotFound, :with => :record_not_found

  private
    def record_not_found
      render :text => "404 Not Found Baby!", :status => 404
    end 
```

为什么我的 404 测试没有通过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:19:43.130

您的控制器不会引发`ActiveRecord::RecordNotFound`异常，它会在 ApplicationController 中从异常中解救出来。所以尝试测试响应代码或文本，比如

```
 it "should respond with a 404" do
    business = FactoryGirl.build(:business)
    get :edit, :id => business
    response.response_code.should == 404
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:12:16.687

我知道我迟到了，但你不应该真的在控制器测试中创建记录。您在模型测试中创建记录。

在您的控制器测试中，如果您希望创建失败，请使用`my_model.stub(:save).and_return(false)`. 如果您希望创建成功，您可以使用`my_model.stub(:save).and_return(true)`

使用应该...

```
context "record valid" do
  before :each do
    my_model.stub(:save).and_return(true)
    post :create
  end
  it { should redirect_to(dashboard_url) }
end 
```

# java - 在来电时更改 BlackBerry 的 callIncoming() 不止一次

> ID：10868752
> 
> 赞同：0
> 
> 时间：2012-06-03T07:57:30.773
> 
> 标签：java, blackberry

我正在开发应用程序。获取信息。关于来电者的号码。我在检查信息时遇到了一个小问题。关于来电者，手机没有显示基本的来电屏幕。我想显示一个带有一个额外标签的来电屏幕。首先标签的文本将是“正在搜索”，在我得到搜索结果后，我想根据信息更改标签的文本。我发现。我尝试使用 phoneScreenPortrait.updateDisplay()，但没有任何反应。

编码：

```
public void callIncoming(int callId)
{
    ScreenModel screenModel = new ScreenModel(callId);
    PhoneScreen phoneScreenPortrait = screenModel.getPhoneScreen(PhoneScreen.PORTRAIT, PhoneScreen.INCOMING);

```
String resName = "";
String callNum = Phone.getCall(callId).getDisplayPhoneNumber();

if( Phone.getCall(callId).getContact() != null ) //Contact found
{
    screenModel.sendAllDataToScreen();
    return;
}

LabelField callerName;
callerName = new LabelField( "Searching" ) 
{
    public void paint(Graphics g) 
    {
        g.setColor(Color.WHITE);
        super.paint(g);
    }
}; 

callerName.setFont(phoneScreenPortrait.getCallerInfoFont());
phoneScreenPortrait.add(callerName);

screenModel.sendAllDataToScreen();

try
{
    resName = getName( callNum ); // Get's the name with my function
}
catch( Exception ex )
{
    System.out.println(ex.toString());
}

if( resName == null )
    resName = "No match..";

callerName.setText( resName );
phoneScreenPortrait.updateDisplay(); 
```

} 
```

谢谢， 罗特姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:03:24.183

好的，我设法自己解决了..

设置 LabelField 的文本后，我添加了这些行：

```
phoneScreen.updateDisplay();
phoneScreen.doPaint();
screenModel.sendAllDataToScreen();
```

# asp.net-mvc-3 - 如何首先使用代码在 ASP.NET MVC3 中保存导航属性

> ID：10868754
> 
> 赞同：0
> 
> 时间：2012-06-03T07:57:38.233
> 
> 标签：asp.net-mvc-3, ef-code-first

我一直在 ASP.NET MVC3 应用程序中使用代码优先技术。这是非常基本的问题，即如何更新导航属性。以下是详细代码。

```
 public class Destination
    {
        public int ID {get;set;}
       // some other properties
        public Country {get;set;}
    }

    public class Country
    {
     int ID {get;set;}
     string Name {get;set;}
    }

    //i have simple structure as above. when i go to update destination entity. Country is not getting updated.even i tried following:

    _db.Entry(Destination.Country).State = System.Data.EntityState.Modified;
    _db.Entry(Destination).State = System.Data.EntityState.Modified;
    //_db.ChangeTracker.DetectChanges();
    _db.SaveChanges(); 
```

其次，当我去添加它工作正常。是否需要明确要求外键关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T11:32:04.953

您可以通过三种方式添加实体：

调用`Add()`DbSet 上的方法。这会将实体置于已添加状态，这意味着它将在下次`SaveChanges()`调用时插入到数据库中。

```
context.Destination.Add(yourDestination); 
```

将其状态更改为已添加。

```
context.Entry(yourDestination).State = EntityState.Added; 
```

通过将新实体连接到已被跟踪的另一个实体来将新实体添加到上下文中

```
context.Destination.Country.Add(yourCountry); 
```

问候。

# actionscript-3 - 为什么不使用基本方法来注册视图的点击事件（比如 ButtonView）

> ID：10868757
> 
> 赞同：0
> 
> 时间：2012-06-03T07:58:16.700
> 
> 标签：actionscript-3

假设有一个 buttonView（即一个简单的按钮）。要在我的 rootView 中注册点击，我执行以下操作：

一般遵循第一种方法：class RootView { var buttonView:ButtonView; .... buttonView.addEventListener(ButtonView.CLICK, buttonView_click) ; ... }

我想知道，为什么不遵循这样的基本方法（第二种方法）：

```
class RootView 
{
   var buttonView:ButtonView ; 
   buttonView.setFunction( buttonView_click ) ;

}

class ButtonView()
{
    public function setFunction(  someFunction:Function)
    {
        viewFunctionArray_Arr.push( someFunction ) 
    }

    public function onClick()
    {
        // remove dispatchEvent from here , instead 

        for ( var i=0; i< viewFunctionArray_Arr.length; i++)
        {
            //calling the registered functions of all the views one by one
            viewFunctionArray_Arr[i] ( ) ; 
        }

    }

} 
```

如果解释是关于“松散耦合”的，那么我想知道“第一种方法”是如何松散耦合的，因为毕竟在第一种方法中，我们在需要它的视图中使用实例“buttonView”。所以rootView需要了解buttonView。不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:20:21.913

当您使用`addEventListener()`Flash 播放器时，您所做的事情与您的第二种方法非常相似。

我会使用`addEventListener()`而不是传递对函数的引用的一个原因是避免潜在的内存泄漏：

`addEventListener()`有一些可选参数。最后一个指定使用弱引用：`addEventListener(MouseEvent.CLICK, eventHandler, false, 0, true)`. 弱引用不会阻止对象被垃圾回收。

在某些情况下，您需要清理对象（即：删除事件侦听器），并且使用弱引用可以减轻一些清理任务。

关于松耦合，我认为这两种方法是相同的。在一种情况下，父对象需要知道子视图调度了一个事件。另一方面，父级需要知道它应该将事件处理函数传递给视图。在我看来，它们都是松散耦合的，没有什么能阻止你在其他地方使用子视图。

# java - J2SE 上的 DataSource 和 DriverManager

> ID：10868758
> 
> 赞同：2
> 
> 时间：2012-06-03T07:58:23.657
> 
> 标签：java, mysql, jakarta-ee, connection, datasource

我有兴趣开发一个连接到 MySQL 数据库的桌面应用程序。在阅读[了这个](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)关于 DB 连接（和其他几个）的 java 教程后，我有一个问题。使用 DataSource 在 J2EE 上似乎很流行，而 DriverManager 是桌面应用程序的常见选择。是否仍然可以在桌面应用程序上使用 DataSource？如果是，它是不是比 DriverManager 更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:05:10.873

在桌面应用程序上使用 DataSource 是完全可能的。

服务器应用程序通常是多线程、多用户应用程序，其中与数据库的多个连接是并行打开的。池化数据源在这里很重要。

桌面应用程序通常是单用户应用程序，您只需要一个与数据库的连接即可。因此，在这种情况下不需要池化数据源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T08:06:04.770

我将引用 javadoc：

> 作为 DriverManager 工具的替代方法，DataSource 对象是获取连接的首选方法。

通常，`DriverManager`当您只需要一次连接而`DataSource`获得其他功能（例如连接池和分布式事务）时，您会使用它。

希望这可以帮助。

# javascript - 使用 LESS 和 jQuery 等宽和高

> ID：10868765
> 
> 赞同：2
> 
> 时间：2012-06-03T07:59:36.123
> 
> 标签：javascript, jquery, css, less

我有一个 LESS 样式规则，它应该适用于宽度和高度值相等的元素。
这个值应该是元素父元素宽度的 3%。
到目前为止，这是我通过 JavaScript 评估和一点 jQuery 所做的：

```
元素 {
    @var: ~`Math.round(($(parent).width()*3)/100)+"px"`;
    宽度：@var；
    高度：@var；
}

```

所以我的问题是：
LESS 中是否有任何本机方式，所以我可以在没有 JavaScript eval 的情况下实现这一点？提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-15T01:35:24.700

在我看来，根本没有理由使用 javascript - 我会直接使用 css 并向我希望只有 3% 的父母的所有元素添加一个类 - 就像这样：

```
.threepercent{
  height:3%;
  width:3%;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T01:39:51.373

只要你的元素是`block`水平的，你就可以只是百分比。如果它不起作用，则您的元素可能是`inline`.

```
parent-element {
    display: block;
    width: 300px;
    height: 300px;
}

parent-element element {
    display: block;
    width: 3%;  // will be 10px
    height: 3%; // will be 10px
} 
```

或者

```
@parentSize: 300px;

parent-element {
    display: block;
    width: @parentSize;
    height: @parentSize;
}

child-element {
    display: block;
    width: @parentSize* 0.03;
    height: @parentSize* 0.03;
} 
```

# git - Git - 通过单个合并提交推送到新的远程

> ID：10868768
> 
> 赞同：5
> 
> 时间：2012-06-03T08:00:07.547
> 
> 标签：git, version-control, git-push

我已经在私人仓库上工作了一段时间，并将发布到 GitHub。

问题是我有很多提交，为了卫生起见，我希望只有一个提交出现在 GitHub 中。

我如何在不推动历史的情况下推动？即将整个 MASTER 合并到一个提交中

提前谢谢了。

道格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T08:23:06.947

通常人们会使用`git rebase --interactive HEAD~n`where n is the no。您想要合并为一个的提交。但是，在您的情况下，您希望将整个历史压缩到一个提交中，并且由于没有父级（直到初始提交）的 rebase 是不可能的，我们必须使用`git reset`and `git commit --amend`。

这是你要做的：

1.  `git log --oneline`. 查找初始提交的 SHA。
2.  假设我们的 SHA 是`fe7d5d1`。运行`git reset fe7d5d1`。这会将分支重置为初始提交。
3.  现在用于`git add .`暂存所有更改。
4.  接下来修改您的初始提交，`git commit --amend -m "Initial commit"`.
5.  确认您现在只有一个提交`git log --oneline`。

**注意**：永远不要重写/压缩/rebase 你已经推送到远程仓库的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:04:40.187

查看 git rebase。交互模式。

# azure - FREETEXTTABLE 替代品

> ID：10868773
> 
> 赞同：2
> 
> 时间：2012-06-03T08:01:30.827
> 
> 标签：azure, azure-sql-database

我们希望将数据库从本地 SQL 2008 服务器移动到 SQL Azure，但是我们使用`FREETEXTSEARCH`的是当前不受支持的。我们可以使用 AZURE 支持的替代方法`FREETEXTSEARCH`，和/或您可以编写一个执行相同操作的自定义函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T10:37:01.820

我会看看[Lucene.Net](http://incubator.apache.org/lucene.net/)。这是一个很棒的免费文本搜索引擎。有可用的 Azure 版本。它为 StackExchange 网络上的搜索提供支持。[Azure 上的 Lucene](http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T11:01:38.740

您可以使用 FULLTEXT 搜索 Azure SQL 只是没有为您提供创建完整索引的接口，您必须通过脚本创建它们。

# c++ - 访问指向向量 c++ 的指针

> ID：10868776
> 
> 赞同：0
> 
> 时间：2012-06-03T08:02:08.767
> 
> 标签：c++, function, pointers, vector

我无法访问以下向量。我对向量很陌生，所以这可能是我做错的一件小事。这是代码....

```
void spellCheck(vector<string> * fileRead)
{   
    string fileName = "/usr/dict/words";
    vector<string> dict;        // Stores file

    // Open the words text file
    cout << "Opening: "<< fileName << " for read" << endl;

    ifstream fin;
    fin.open(fileName.c_str());

    if(!fin.good())
    {
        cerr << "Error: File could not be opened" << endl;
        exit(1);
    }
    // Reads all words into a vector
    while(!fin.eof())
    {
        string temp;
        fin >> temp;
        dict.push_back(temp);
    }

    cout << "Making comparisons…" << endl;
    // Go through each word in vector
    for(int i=0; i < fileRead->size(); i++)
    {
        bool found = false;

        // Go through and match it with a dictionary word
        for(int j= 0; j < dict.size(); j++)
        {   
            if(WordCmp(fileRead[i]->c_str(), dict[j].c_str()) != 0)
            {
                found = true;   
            }
        }

        if(found == false)
        {
            cout << fileRead[i] << "Not found" << endl; 
        }
    }
}

int WordCmp(char* Word1, char* Word2)
{
    if(!strcmp(Word1,Word2))
        return 0;
    if(Word1[0] != Word2[0])
        return 100;
    float AveWordLen = ((strlen(Word1) + strlen(Word2)) / 2.0);

    return int(NumUniqueChars(Word1,Word2)/ AveWordLen * 100);
} 
```

错误在行中

```
if(WordCmp(fileRead[i]->c_str(), dict[j].c_str()) != 0) 
```

和

```
cout << fileRead[i] << "Not found" << endl; 
```

问题似乎是，因为它以指针的形式出现，我用来访问它的当前语法无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T08:05:38.500

在指向向量的指针上使用`[]`不会调用`std::vector::operator[]`. 要随心所欲地调用`std::vector::operator[]`，您必须有一个向量，而不是向量指针。

使用指向向量的指针访问向量的第 n 个元素的语法是`(*fileRead)[n].c_str()`：

但是，您应该只传递对向量的引用：

`void spellCheck(vector<string>& fileRead)`

那么它只是：

`fileRead[n].c_str()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:05:31.977

您可以使用一元 * 从矢量* 中获取矢量&：

```
cout << (*fileRead)[i] << "Not found" << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T08:11:22.647

两种访问方式：

*   `(*fileRead)[i]`
*   `fileRead->operator[](i)`

改进方法的一种选择

*   参考传递

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T08:08:23.490

您可以通过引用传递 fileRead，如下所示：

```
void spellCheck(vector<string> & fileRead) 
```

或者当你像这样使用它时添加一个取消引用：

```
if(WordCmp( (*fileRead)[i]->c_str(), dict[j].c_str()) != 0) 
```

# jquery - 使用jquery和鼠标处理添加表

> ID：10868780
> 
> 赞同：0
> 
> 时间：2012-06-03T08:02:29.343
> 
> 标签：jquery, row, add, mouseover

我有一个有趣的问题。

我想使用 jquery 向表中添加行，然后添加行以响应鼠标悬停事件，但代码不起作用。

问题是该行按预期添加，但不响应鼠标悬停事件。

任何建议将不胜感激。

乌尔马斯。

代码如下：

```
<head>
  <style type="text/css">
  .elem {
    color: purple;
    background-color: #d8da3d 
    }
  </style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">
</script>   

</head>

<body>
<table id="table">
   <thead>  
    <tr>
        <th>Numbers</th>
        <th>Letters</th>
        <th>Symbols</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class='elem'>111</td>
        <td class='elem'>aaa</td>
        <td class='elem'>@@@</td>
    </tr>
    <tr>
        <td class='elem'>222</td>
        <td class='elem'>bbb</td>
        <td class='elem'>###</td>
    </tr>
    <tr>
        <td class='elem'>888</td>
        <td class='elem'>iii</td>
        <td class='elem'>???</td>
    </tr>
    </tbody>        
</table>

<input type = "button" id = "add" value = "add row" />

<script type="text/javascript">

$(".elem").mouseover(function() {

alert("over");
});

$("#add").click(function() {

$row_to_add="";

$row_to_add+="<tr>";
    $row_to_add+="<td class='elem'>999</td>";
    $row_to_add+="<td class='elem'>qqq</td>";
    $row_to_add+="<td class='elem'>&&&</td>";
$row_to_add+="</tr>";

 $("#table tr:last").after($row_to_add);

});

</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:11:36.350

您必须使用[on](http://api.jquery.com/on/)函数将事件侦听器添加到您动态添加的元素。例如：

```
$(document).on(".elem", "mouseover", function() {
    //...
} 
```

> > 描述：将一个或多个事件的事件处理函数附加到选定元素。

（Per Mattias Buelens 指出**live**功能已被弃用。）

# php - ckeditor, textarea 只在标签之间发送值

> ID：10868781
> 
> 赞同：-1
> 
> 时间：2012-06-03T08:03:00.083
> 
> 标签：php, html, textarea, ckeditor

我在文本区域中使用 ckeditor：

表格的代码：

```
 <form id="form" name="myform" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<textarea  name="content" >
   <?php echo $_POST['content']; ?>
   </textarea> 
```

表单将被发送到当前页面，这里是将代码插入数据库的代码：

```
 if(isset($_POST['submit']))
{
    if (empty ($_POST['naam']) or empty($_POST['content']) or empty($_POST['omschrijving'])  or empty($_POST['auteur']) or empty($_POST['keywords']))
    {
        echo '<h1>TEST</h1>';
        echo    '<script type="text/javascript">
                    alert("Er zijn velden die niet ingevuld zijn. Deze zijn met rood gemarkeerd");
                </script>';
    }
    else 
    {
        echo 'nog niet verwerkt';
        //alles is ingevuld
        $sql = "INSERT INTO sitecontent (ID, postnaam, post_inhoud, pagina, publiceren)
        VALUES  ( '" . $_POST['id'] .  "',  '" .mysql_real_escape_string($_POST[naam]) ."', '" .mysql_real_escape_string($_POST[content]) . "' , '" .mysql_real_escape_string($_POST[pagina]). "' , '" .  $_POST['publiceren'].  "' )";
        $query = $con->exec($sql);
            echo 'verwerkt';

    }
} 
```

（我正在使用 PDO PHP :) ）有一些回声用于调试我的代码。

以下是将 textarea 更改为 ckeditor 的代码：

```
<script type="text/javascript">
    CKEDITOR.replace('content');
</script> 
```

新我的问题当然。如果我在 textarea 中发布内容，它将被插入到数据库中。并且插入的内容将显示在文本区域中。

我有一个自动保存功能，代码来自stackoverflow。它工作正常。但是如果我更改 textarea 的值，它只会在 textarea 标签之间插入代码。

所以我的问题是：我的代码只会在 textarea 标签之间插入来自 textarea 的内容。

我希望我的问题很清楚。我可以发布自动保存代码，但这非常适合表单上的其他输入字段。它与上面的插入代码相同。

对不起我的英语不好，我希望你能理解我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:16:49.317

在提交表单之前，您需要告诉 CKEditor 将其内容保存回文本区域：

```
function CKupdate(){
    for ( instance in CKEDITOR.instances )
        CKEDITOR.instances[instance].updateElement();
} 
```

然后`CKupdate()`在保存表单之前运行。另请参阅：[https ://stackoverflow.com/a/3256553/1338292](https://stackoverflow.com/a/3256553/1338292)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:23:33.927

您可以将此[自动保存插件用于 CKEditor](http://cksource.com/forums/viewtopic.php?f=18&t=24128)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:49:25.903

首先，我希望我能回答这个问题？上面，他们说我需要使用准备好的语句，不要使用 mysql_real_escape_strings。

我编辑了我的代码，这是在我的数据库中插入值的代码。

```
$query = "INSERT INTO sitecontent (ID, postnaam, post_inhoud, pagina, publiceren)
    VALUES  (:id, :naam, :content, :pagina, :publiceren )";
    $q = $con->prepare($query);

    $q->execute(array(':id'=>$_POST['id'],  ':naam'=>$_POST['naam'] , ':content'=>$_POST['content'] , ':pagina'=>$_POST['pagina'] , ':publiceren'=>$_POST['publiceren'] ));
    $q->errorInfo(); 
```

它工作正常，并且在数据库中被转义！但是这段代码真的保存好了吗？

谢谢！

# android - 状态通知栏 Android 上的徽标

> ID：10868788
> 
> 赞同：0
> 
> 时间：2012-06-03T08:04:30.507
> 
> 标签：android, image, notifications, status, graphical-logo

如何将我的应用程序的徽标放在通知栏中？我见过很多应用程序这样做。

比如左边这个：

![截屏](../Images/b707d00cc535be273be6bbb6c34c5204.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:29:34.670

他们来了

```
NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

private void notification(String message){

    int icon = R.drawable.ic_launcher;
    CharSequence ticket = message;
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon, ticket, when);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    CharSequence contentTitle = "Buzz Off";
    CharSequence contentText = message;
    Intent intent = new Intent(this, HomeScreen.class);
    PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);
    notification.setLatestEventInfo(this, contentTitle, contentText, activity);
    nm.notify(layout, notification);
    buzzOff = true;
} 
```

# ios - 动态显示 TableView 或 DetailView

> ID：10868793
> 
> 赞同：3
> 
> 时间：2012-06-03T08:05:24.307
> 
> 标签：ios, xcode, uitableview, segue

在我的 TableView 中，我希望根据单元格的内容动态地显示 TableView 或 DetailView（新 segue）。我设置了两个从 TableView 到不同 DetailViews 的 segue，以及一个从 TableViewCell 到 TableView 的 segue。

我几乎已经完成了使用`performSegueWithIdentifier:`（见下文）的实现，但还有一个棘手的问题：在我调用`[self dismissModalViewControllerAnimated:YES];`DetailView 后，它返回到一个空的 TableView 。我假设是因为执行了情节提要`UITableViewCell`。通过单击后退按钮，我返回到原始（父）TableView 数据。

对这项工作有什么建议吗？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"%s", __PRETTY_FUNCTION__);
    NSString *type = [[self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row] valueForKey:@"cell_type"];
    NSLog(@"cell_type: %@", type);
    if([[segue identifier] isEqualToString:@"DetailSegue"])
    {
        UIViewController *detailViewController = [segue destinationViewController];        
        detailViewController.game = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
    } else if ...
    } else if([[segue identifier] isEqualToString:@"TableViewSegue"]){
    if([type isEqualToString:@"TableView"]){
    //Create child ViewController, a custom ViewController with custom initWithId:Title:
    CategoryViewController *categoryViewController = [[segue destinationViewController] initWithId:categoryId Title:categoryTitle];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:37:57.957

我会在我的表格视图中创建多个单元格。每个都有自己的标识符。然后将每个单元格连接到它自己的detailviewcontroller。您还可以将单元格连接到它自己的视图控制器（仅为特定单元格创建向下钻取功能）。

就这样...

# javascript - .change() 在 ie 中不起作用，当更改为 .click() 时同样的问题

> ID：10868794
> 
> 赞同：1
> 
> 时间：2012-06-03T08:05:29.350
> 
> 标签：javascript, jquery

我的问题：此代码在 Firefox chrome 和 safari 中有效，但在 IE 8 中无效。我有`.change`，但我发现它在 ie 中不起作用，所以我`.click`在所有浏览器中再次尝试，一切正常，在 ie 中尝试仍然不工作。anySlider 是我正在使用的一个 jquery 库，我确定这不是问题（反向工作就像选择下拉菜单上的项目并移动到该幻灯片在任何地方都可以工作，包括即。谢谢。

我的代码：

```
 $(document).ready(function() {
 $('#skillslist').click(function()
  {var str = $(this).attr('value');
  var pattern = /[0-9]+/g;
  var matches = str.match(pattern);
 var myInteger = parseInt(matches);
 $('#slider').anythingSlider(myInteger);

  });

    });
</script>

 <select name='myList'  id='skillslist'>
 <option>Subscription Days Remaining: <? echo $days ?></option>
 <option id='skill1'>Skill 1: Hand Washing</option>
 <option id='skill2'>Skill 2: Abdominal Thrust on Conscious Resident</option>
 <option id='skill3'>Skill 3: Ambulation using a Gait Belt</option>
 </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:09:04.357

你可以试试这个：

```
$('#skillslist').on('change', function(){  // change instead of click
  var str = this.value;
  var pattern = /[0-9]+/g;
  var matches = str.match(pattern);
  var myInteger = parseInt(matches);
  $('#slider').anythingSlider(myInteger);

  });
}); 
```

不确定，如果您在页面加载后选择附加到 dom，那么您应该选择

```
$('body').on('change', '#skillslist', function(){  // change instead of click
  var str = this.value;
  var pattern = /[0-9]+/g;
  var matches = str.match(pattern);
  var myInteger = parseInt(matches);
  $('#slider').anythingSlider(myInteger);

  });
}); 
```

**NOTE** `body`可以替换为选择框的容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T08:24:50.533

```
$('#skillslist').change(function() {
    var str = $(this).val();
    // ...
}); 
```

我总是尽量避免`$(this).attr('value')`or `this.value`，因为应该使用`this.options[this.selectedIndex]`... 查询选择框值，这`.val()`对你有用。

在你说“它不起作用”之前，首先描述什么不起作用，并确保通过设置值来消除其他`alert()`因素`myInteger`。

# php - MySql，从另一个表行向一个表行插入数据（此行刚刚创建）

> ID：10868800
> 
> 赞同：0
> 
> 时间：2012-06-03T08:06:16.767
> 
> 标签：php, mysql, insert

不知道如何描述我的问题，但让我们试试..

我正在开发一个小型新闻门户 php + mysql 项目我在 mysql 数据库中有两个表。

```
1: news (
   n_id (primary key)
   n_title
   n_text
)

2: news_image (
   ni_id (primary key)
   n_id  (foreign key from news table)
   ni_name
   ni_caption
) 
```

（n_ 前缀是新的，ni_ 是 news_image 的前缀）

news 表将保存新闻故事，而 news_image 表将存储新闻图像的名称和标题。新闻图像的单独表格是因为在后期，我将为每个故事添加多个图像。该脚本工作正常（因为我已经通过 phpmyadmin 在数据库中输入数据对其进行了测试。

**问题：** 我创建了一个 php 脚本来将数据添加到新闻表并将图像上传到文件系统。它工作正常。我使用此查询将行添加到新闻表

```
INSERT INTO news
SET
n_title = '$title',
n_text = '$text' 
```

n_id 是主键（整数并且是 AUTO_INCREMENT）.. 这工作正常，但我想要一个查询将在上述查询执行后立即执行，并将自动在 news_image 表中插入一个新行，取刚刚的行的 n_id已插入新闻表中。news_image 表中的 ni_name 和 ni_capption 不是问题，我可以很容易地得到它，但是从新插入行的新闻表中获取 n_id 是问题......我怎样才能得到 n_id......？？？？？？请提供详细的答案，因为我是 php + mysql 的新手。感谢您的阅读...等待回复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:13:52.427

您可以使用`mysql_insert_id();`函数来获取最后插入的 id。运行插入查询后，使用此行获取 id `$id = mysql_insert_id();`，您将在 $id; 中获得 id；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:24:12.483

您是否尝试过获取最后插入的新闻项目的 ID？像：

```
$lastItemID = mysql_insert_id(); 
```

然后您可以使用它来创建图像的条目：

```
INSERT INTO news_image
SET
n_id= '$lastItemID',
ni_name = '$name',
ni_caption  = '$caption' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:09:44.907

这取决于您访问 MySQL 所通过的 PHP 扩展——它们都有`insert_id()`类型函数来从当前连接中获取最后一个自动递增的数字。

特别是，使用 PDO 有[`lastInsertId()`](http://php.net/manual/en/pdo.lastinsertid.php)，使用 MySQLi 有[`mysqli_insert_id()`](http://php.net/manual/en/mysqli.insert-id.php). 你不应该使用古老的 MySQL 扩展，因为它不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T18:22:38.173

**您可以使用一个**查询字符串直接在 SQL 中解决它（几分钟前我遇到了一些问题 :)）。

尝试在数据库中拍摄 THIS：

```
$sql = "INSERT INTO `news`(`n_txt`) VALUES ('Peace in Ukraine'); 
INSERT INTO `news_image`(`n_id`,`ne_name`) VALUES (LAST_INSERT_ID(),'smiling_merkel.jpg');" 
```

# android - Android MultiPartTextMessages

> ID：10868801
> 
> 赞同：0
> 
> 时间：2012-06-03T08:06:17.577
> 
> 标签：android

我无法接收`multiPartTextMessages`. 我的应用程序分割然后逐部分发送消息。但是，每当有一部分即将到来时，broadcastreceiver 就会工作。我需要结合这部分来获得原始信息。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:14:10.560

这应该有帮助

```
 @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(ClassName, "received SMS");

        Bundle bundle = intent.getExtras();
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            // here is what I need, just combine them all  :-)
            final SmsMessage[] messages = new SmsMessage[pdus.length];
            Log.d(ClassName, String.format("message count = %s", messages.length));
            for (int i = 0; i < pdus.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            }
        }
    }// onReceive() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:18:28.147

在每个部分的开头放置一个特殊的文本，例如`#myTag_msg1_part1`. 在广播接收器中检查每条消息的特殊文本以了解partno，然后您可以相应地加入它们。

# iphone - iOS：组织多线程的最佳方式

> ID：10868803
> 
> 赞同：0
> 
> 时间：2012-06-03T08:07:08.217
> 
> 标签：iphone, ios, grand-central-dispatch, nsthread, nsoperation

伙计们，我需要一些帮助来构建我在 iOS 中的多线程。

我在我的代码中使用了 ARC。

所以基本上我需要关注，

在我的主线程 nstimer 触发一些应该在单独线程中执行的方法，该线程进行一些计算并将数据放入某个 ivar，另一个线程应该从该 ivar 读取数据并进行一些其他计算，即如果没有数据第二个线程应该等到有任何线程。

所以基本上我想听听一些建议，哪种技术是我的任务的最佳选择，使用可可线程（NSThread）、GCD 或操作队列。

也有人可以向我提供一些关于两个线程之间相互阻塞/同步方面的伪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:05:51.350

既然你说一些计算应该等待其他计算完成，我想说你应该看看[NSOperation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)并为不同的操作设置依赖关系（使用 addDependency）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:01:39.617

除非您在问题描述中留下了一些东西，否则这非常适合 GCD/块组合。事实上，我什至不会使用 NSTimer （GCD 提供了更好的选择 - 参见 dispatch_source_create 例如创建基于 GCD 的计时器），但这是你的电话，而不是问题所问的。无论如何，用GCD...

```
- (void)handleTimer:(NSTimer *)timer {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        __block id someObject;
        // Do work...  manipulate someObject in some manner...
        // When done, invoke other thread... main thread in this case
        dispatch_async(dispatch_get_main_queue(), ^{
            // This code is running in a different thread, and can use someObject directly
        });
    });
} 
```

# java - 如何创建多对多实体的命名查询？

> ID：10868809
> 
> 赞同：1
> 
> 时间：2012-06-03T08:08:19.700
> 
> 标签：java, jpa, many-to-many, named-query

**品牌**

```
public class Brand implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "BrandID", nullable = false)
    private Integer brandID;
    @Basic(optional = false)
    @Column(name = "BrandName", nullable = false, length = 100)
    private String brandName;
    @Basic(optional = false)
    @Column(name = "Description", nullable = false, length = 1000)
    private String description;
    @Column(name = "Is_Visible")
    private Boolean isVisible;
    @JoinTable(name = "brandcategory", joinColumns = {
        @JoinColumn(name = "BrandID", referencedColumnName = "BrandID")}, inverseJoinColumns = {
        @JoinColumn(name = "CategoryID", referencedColumnName = "CategoryID")})
    @ManyToMany(fetch = FetchType.EAGER)
    private Collection<Category> categoryCollection;
    @OneToMany(mappedBy = "brand", fetch = FetchType.EAGER)
    private Collection<Product> productCollection; 
```

我想从表brandcategory whoes categoryID = :categoryID 中检索品牌ID 如何在实体品牌中为其创建命名查询？

**这不起作用：**

```
@NamedQuery(name = "Brand.getBrandListByCategory",
            query = "SELECT b FROM Brand b WHERE b.brandID =
            (SELECT bc.brandID
             FROM b.brandctegory bc
             WHERE bc.category.categoryID = :categoryID)") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T08:14:41.443

如果我理解正确，您需要属于某个类别的所有品牌。为什么不简单地使关联是双向的。然后你可以这样做：

```
Category category = em.find(Category.class, categoryId);
return category.getBrands(); 
```

如果它是单向的，那么您将需要一个查询，但它比您尝试的要简单得多：

```
select b from Brand b inner join b.categoryCollection category 
where category.id = :categoryId; 
```

您的查询没有意义：它使用了不存在的关联 ( `b.brandcategory`)。请记住，JPQL 使用实体、它们的持久字段以及与其他实体的关联。没有别的了。JPQL 中不存在表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:10:51.483

AFAIK，在实体类中创建查询时，您不能超出实体边界。

而是使用[`.createNativeQuery()`](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String%29)实体管理器的方法来创建复杂和混合的查询。

# jquery - 自动刷新 在 jquery 可排序#div 中按他们的 id 排序

> ID：10868817
> 
> 赞同：-3
> 
> 时间：2012-06-03T08:09:27.740
> 
> 标签：jquery, jquery-ui-sortable

我需要的是，当 #sortable 收到一个项目时，它会自动刷新自己`<li>`的顺序，并按**id**属性`<li>`按字母顺序排序。

 **```
<head><script>
    $( "#titolari, #panchina" ).sortable({
           receive: function(event, ui) {
                refresh order of <li> alphabeticly by their id,
           }
    });
</script></head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:35:06.490

首先; 你想要一个线索的那个函数..这并不重要..或者更确切地说，参数不重要，除非你想对 ui 或事件数据做一些事情。每当从另一个[链表](http://jqueryui.com/demos/sortable/#option-connectWith)接收到元素时，就会执行 Receive 。JS 有一个内置的[排序功能](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)，结合 jquery 和 UI 位，将允许它工作。

组合它的方法..使用jquery获取li元素的元素数组（`$('element')`返回一个数组），使用一个匿名函数对该数组进行排序，该函数比较（匿名函数的）`a`和`b`变量的id值，然后执行排序基于接收事件发生的时间（和地点）。我有一个工作示例，但我希望看到你在我发布之前尝试一些东西。我已经解释了如何在不放弃一切的情况下尽我所能达到预期的结果。**

# php - 检查url是否包含参数

> ID：10868818
> 
> 赞同：15
> 
> 时间：2012-06-03T08:09:36.640
> 
> 标签：php, url

> **可能重复：**
> [在分页期间保留 url 参数](https://stackoverflow.com/questions/9666909/keeping-url-parameters-during-pagination)

我想用php给当前url添加一个参数，但是我怎么知道url是否已经包含参数呢？

例子：

foob​​ar.com/foo/bar/index.php => foobar.com/foo/bar/index.php?myparameter=5 foobar.com/index.php?foo=7 => foobar.com/index.php?foo =7&我的参数=5

主要问题是我不知道是否需要添加“？”。

我的代码（在某处找到，但它不起作用）：

```
<?php   if(/?/.test(self.location.href)){ //if url contains ?
    $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]&myparameter=5";
} else {
    $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]?myparameter=5"; 
}?> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-03T08:14:43.460

URL 参数是从一个名为的全局变量接收的，该变量`$_GET`实际上是一个数组。因此，要知道 URL 是否包含参数，可以使用`isset()`function.

```
if (isset($_GET['yourparametername'])) {
    //The parameter you need is present
} 
```

之后，您可以创建需要附加到 URL 的此类参数的单独数组。像：

```
if(isset($_GET['param1'])) {
    \\The parameter you need is present
    $attachList['param1'] = $_GET['param1'];
}
if(isset($_GET['param2'])) {
    $attachList['param2'] = $_GET['param2];
} 
```

现在，要知道是否需要一个`?`符号，只需计算这个数组

```
if(count($attachList)) {
    $link .= "?";
    // and so on
} 
```

**更新：**

要知道是否设置了任何参数，只需计算`$_GET`

```
if(count($_GET)) {
     //some parameters are set
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-03T08:30:14.197

你真的应该使用[parse_url()](http://php.net/manual/en/function.parse-url.php)函数：

```
<?php
$url = parse_url($_SERVER['REQUEST_URI']);

if(isset($url['query'])){
    //Has query params
}else{
    //Has no query params
}
?> 
```

此外，您应该将基于数组的变量括在大括号中或从字符串中分出：

`$url = "http://{$_SERVER['HTTP_HOST']}{$_SERVER['REQUEST_URI']}?myparameter=5";`

或者

`$url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']."?myparameter=5";`

启用`error_reporting(E_ALL);`，您将看到错误。注意：使用未定义的常量 REQUEST_URI - 假定为“REQUEST_URI”等

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-03T08:18:09.070

您可以搜索“？” 像这样的字符：

```
if (strpos($_SERVER[REQUEST_URI], '?')) { // returns false if '?' isn't there
    $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]&myparameter=5";
} else {
    $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]?myparameter=5"; 
} 
```

# java - 在哪里可以找到 Java 标准库的列表？

> ID：10868825
> 
> 赞同：33
> 
> 时间：2012-06-03T08:11:56.740
> 
> 标签：java

我是 Java 新手，并试图了解更多有关它的信息。我研究了文档，发现了 Java 的以下内容，

[Java 文档](http://docs.oracle.com/javase/7/docs/api/index.html)

这里列出的包和标准库一样吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-03T08:18:01.480

是的。那是 Java 的创建者提供的库。

这是要知道的事情的清单：

*   `java.lang`适用于所有实际自动（隐式）导入的基本类，因为它是所有基本类（String、Integer、Double 等）
*   `java.util`包含你在学校学到的所有数据结构等等。阅读文档，你知道和练习的越多越好
*   `java.io`用于文件读取。查看 java.util.Scanner 以进行简单的文件读取，但对于任何更复杂的低级文件读取信息，使用`java.io`它是为了提高效率而构建的，而 Scanner 是为了简单
*   `java.math`如果您需要使用任意精度值（内置在 python 中，而不是在 java 中）
*   `java.net`用于套接字、连接等
*   `javax.swing`用于 GUI，它是旧版本的扩展`java.awt`

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T08:16:06.243

是的，它们是一样的。如果您想离线查看，也可以下载此库。你的java安装文件中也应该有一个`src.zip`文件。解压后你会发现所有标准库类的源代码。[Java语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)也应该对您有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T08:17:16.053

安装 Java 时，在根文件夹中会有一个包含`standard library`调用源的 .zip 文件。这些`src.zip`是标准库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-25T15:00:49.233

在 Java 9+ 中，`javafx`替换 `javax`为主 UI 库：

> 6.  JavaFX 是否正在取代 Swing 作为 Java SE 的新客户端 UI 库？
>     
>     > 是的。然而，在可预见的未来，Swing 仍将是 Java SE 规范的一部分，因此包含在 JRE 中。虽然我们建议开发人员在构建新应用程序时尽可能利用 JavaFX API，但可以使用 JavaFX 扩展 Swing 应用程序，从而实现更平滑的过渡。

[JavaFX 常见问题 - 甲骨文](http://6.%20Is%20JavaFX%20replacing%20Swing%20as%20the%20new%20client%20UI%20library%20for%20Java%20SE?%20Yes.%20However,%20Swing%20will%20remain%20part%20of%20the%20Java%20SE%20specification%20for%20the%20foreseeable%20future,%20and%20therefore%20included%20in%20the%20JRE.%20While%20we%20recommend%20developers%20to%20leverage%20JavaFX%20APIs%20as%20much%20as%20possible%20when%20building%20new%20applications,%20it%20is%20possible%20to%20extend%20a%20Swing%20application%20with%20JavaFX,%20allowing%20for%20a%20smoother%20transition.)。

# objective-c - 在 UINavigation Back 按钮旁边添加一个 UIBarButtonItem

> ID：10868829
> 
> 赞同：3
> 
> 时间：2012-06-03T08:12:38.027
> 
> 标签：objective-c, ios, uinavigationcontroller

我想在默认后退按钮旁边添加/显示按钮/自定义视图。所以它看起来像这样

< 返回 | 家

我想保留后退按钮的默认外观。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T11:01:25.060

```
UIBarButtonItem *home = [[UIBarButtonItem alloc]initWithTitle:@"Home" style:UIBarButtonItemStyleBordered target:self action:@selector(HomePressed:)];
self.navigationItem.leftItemsSupplementBackButton = YES;
self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:home, nil]; 
```

这段代码对我有用，后面的按钮 UI 没有改变。你需要实现 HomePressed：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:27:48.977

您应该在视图控制器的 UINavigationItem 上设置 leftBarButtonItems 数组。

self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects....];

有关详细信息，请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)。

# objective-c - 在循环中动态引用 propertyName+1

> ID：10868831
> 
> 赞同：0
> 
> 时间：2012-06-03T08:13:25.523
> 
> 标签：objective-c, ios, xcode, optimization

尝试清理一些代码并遇到问题。我有一个出现在 uitableviewcell 中的 1-5 排名。该单元格有 5 个指向星形图像的图像视图。有一个starYellow.png 和starGrey.png。如果排名为3/5，则单元格应将star1、star2、star3设置为starYellow.png，将star4、star5设置为starGrey.png。

我在引用属性 star%i 时遇到问题，其中 i 是循环 1-5 的迭代。我不知道该怎么做 [cell setValue:starYellow forKey:[NSString stringWithFormat:@"star%i.image", i]];

这是我要优化的代码..

```
if (book.ratingOnline) {
[cell.ratingView.layer setOpacity:1.0f];
    for (int i = 1; i <= 5; i++) {            
        if (i == 1) {
            if (book.ratingOnline >= i) { [cell.star1 setImage:[UIImage imageNamed:@"starYellow.png"]]; }
            else { [cell.star1 setImage:[UIImage imageNamed:@"starGrey.png"]]; }
        }
        else if (i == 2) {
            if (book.ratingOnline >= i) { [cell.star2 setImage:[UIImage imageNamed:@"starYellow.png"]]; }
            else { [cell.star2 setImage:[UIImage imageNamed:@"starGrey.png"]]; }
        }
        else if (i == 3) {
            if (book.ratingOnline >= i) { [cell.star3 setImage:[UIImage imageNamed:@"starYellow.png"]]; }
            else { [cell.star3 setImage:[UIImage imageNamed:@"starGrey.png"]]; }
        }
        else if (i == 4) {
            if (book.ratingOnline >= i) { [cell.star4 setImage:[UIImage imageNamed:@"starYellow.png"]]; }
            else { [cell.star4 setImage:[UIImage imageNamed:@"starGrey.png"]]; }
        }
        else if (i == 5) {
            if (book.ratingOnline >= i) { [cell.star5 setImage:[UIImage imageNamed:@"starYellow.png"]]; }
            else { [cell.star5 setImage:[UIImage imageNamed:@"starGrey.png"]]; }
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:17:34.460

在一个 NSArray 中添加所有的星星，

在 Cell.h 中

```
NSArray *stars; 
```

现在参考你可以做的任何开始

```
for (int i = 1; i <= 5; i++) {            
     UIImageView *star = [cell.stars objectAtIndex:i];
     //set the image to the star
} 
```

# python - 给定总和为 1 的权重字典 - 如何使用随机选择加权键

> ID：10868839
> 
> 赞同：1
> 
> 时间：2012-06-03T08:14:45.280
> 
> 标签：python

我有一本看起来像这样的字典。

```
mychoice = {0.7: 2, 0.2: 1, 0.1:3} 
```

我将使用以下内容来选择要使用的值。在上面，值 2 将在 70% 的时间被选择，值 1 将在 20% 的时间和 3、10% 的时间被选择。

使用以下方法生成 0 到 1 之间的随机数并随机选择要使用的值的最佳方法是什么？

```
from random import random
ran = random()
if ran>.10 and <.30 then select value 1 with a key of .20 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:36:40.457

以您的示例为例，进行一些修改（交换字典中的键/值）：

```
mychoice = {1: 0.2, 2: 0.7, 3:0.1}
current = 0
limits = {}

for key in mychoice:
    limits[key] = (current,current + mychoice[key])
    current = current + mychoice[key] #Next range should start at the end of current

#This should give a new dictionary: {1:(0,0.2),2:(0.2,0.9),3;(0.9,1)}

r = random.random() # float between 0 and 1

for key in limits:
    range = limits[key]
    if r >= range[0] and r < range[1]:
          return key
return None 
```

这可以优化，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T08:48:16.690

我想到的第一件事是：对它们进行排序并加起来。

假设您已经听从了我的建议并像这样更改了 dict 的结构：

```
mychoice = {2: 0.7, 1: 0.2, 3: 0.1} 
```

让我们用累积的权重构建一个字典：

```
temp = sorted(((v, w) for v, w in mychoice.items()), key = lambda x: x[1], reverse = True)
accum = [(val[0], sum(_[1] for _ in temp[:i+1])) for i, val in enumerate(temp)] 
```

（这有点乱，有人可以优化吗？）

无论如何，现在你`accum`有`[(2, 0.7), (1, 0.9), (3, 1)]`

所以：

```
r = random.random()

for vw in accum:
    if vw[1] > r:
        print vw[0]
        break 
```

**编辑：** astynax 巧妙地指出，没有必要对权重进行排序，因为无论如何都会对累积概率列表进行排序。

所以我们只需要：

```
accum = ((k, sum(mychoice.values()[:i]))
    for i, k in enumerate(mychoice.keys(), 1)) 
```

然后生成一个随机值，并以与之前相同的方式得到结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T08:28:31.383

```
>>> d = {0.7: 2, 0.2: 1, 0.1:3}
>>> keys = [[k] * int(round(10*k)) for k in d.keys()]
>>> keys
[[0.7, 0.7, 0.7, 0.7, 0.7, 0.7, 0.7], [0.1], [0.2, 0.2]]
>>> import itertools
>>> keys = list(itertools.chain(*keys))
[0.7, 0.7, 0.7, 0.7, 0.7, 0.7, 0.7, 0.1, 0.2, 0.2]
>>> import random
>>> d[random.choice(keys)]
2
>>> d[random.choice(keys)]
2
>>> d[random.choice(keys)]
3 
```

备选方案：将选择概率表示为分辨率为 1000 分之 1：

```
>>> keys = [[k] * int(round(1000*k)) for k in d.keys()] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T09:20:06.693

这是使用[`numpys digitize`](http://scipy.org/Numpy_Example_List_With_Doc#digitize)and的好方法`accumulate`：

```
from random import random
import numpy as np

mychoice = {0.7: 2, 0.2: 1, 0.1: 3}

bins = np.add.accumulate(mychoice.keys())
for i in xrange(100):
    print mychoice.values()[np.digitize([random()], bins)[0]],

#Output:
1 2 3 2 2 2 2 2 2 1 1 3 3 2 2 2 2 2 2 2 1 3 2 2 3 2 1 2 1 2 2 2 2 2
1 2 2 2 2 3 3 2 1 1 2 2 1 1 3 2 2 2 2 2 1 2 2 2 1 1 1 2 2 2 2 2 2 2 
3 2 1 2 2 2 3 1 1 1 2 2 2 2 2 2 3 2 1 2 2 2 2 1 1 2 1 2 2 2 2 1 
```

正如`@Karl Knechtel`指出的那样，a`dict`不是一个合适的结构，因为你不能有重复的权重，但无论如何我们都会以此为起点。怎么做：

1.  首先使用创建箱`accumulate`（使用箱允许您使用重复权重）。
2.  然后我们使用`digitize`查看随机数落入哪些箱，并将此索引用于`mychoice.values()`（尽管`mychoice`是一个字典，只要没有插入或删除，键和值保持它们的顺序..）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T09:49:32.893

`d = {2: 0.7, 1: 0.2, 3: 0.1}`哪个更合乎逻辑（不同的选择及其各自的权重，可以重复），你可以使用这个函数`random_weighter`，它也接受不总和的权重`1.0`。

```
import random

def random_weighted(d):
    r = random.random() * sum(d.itervalues())
    for k, v in d.iteritems():
        r = r - v
        if r <= 0.:
            return k 

d = {2: 0.7, 1: 0.2, 3: 0.1}
for i in xrange(10):
    print random_weighted(d), 
```

打印（例如）：

```
3 1 2 2 2 2 2 2 3 2 
```

# iphone - 如何隐藏uiview用户不使用的视图？

> ID：10868843
> 
> 赞同：5
> 
> 时间：2012-06-03T08:15:37.993
> 
> 标签：iphone, ios5, ios4

我有一个视图，例如带有一些按钮的快捷方式视图。现在，当我单击快捷方式按钮时，现在会出现快捷方式视图，我希望用户不触摸视图，如何在 8 秒后隐藏快捷方式视图，并且用户在 8 秒前触摸视图会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:49:47.863

您可以使用 UIView 动画并将视图移出屏幕

```
[UIView animateWithDuration:0.333f 
                      delay:8.0f 
                    options:UIViewAnimationCurveEaseOut 
                 animations:^(void) {
                      myView.transform = CGAffineTransformMakeTranslation(0,self.view.frame.size.height);
                           }
                 completion:nil]; 
```

在此示例中，我将您的视图移动到屏幕底部，`CGAffineTransformMakeTranslation(x,y)`将您的视图框架移动给定的 x 和 y 点

并且把它移回来，好吧，你得到了漂移；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:42:41.723

您可以使用`- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay` 和`+ (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget`方法

```
-(void)showShortcuts
{
    // all the code you need to show your shortcuts view
    ...
    [self perfornSelector:@selector(hideShortcuts) withObject:nil afterDelay:8.0];
}

-(void)hideShortcuts
{
// all the code you need to hide your shortcuts view
...
}

-(void)shortcutPressed:(id) shortcut
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
    // code your shortcut is supposed to trigger
    ...
} 
```

# c++ - 来自 exe 文件的描述和文件版本

> ID：10868855
> 
> 赞同：0
> 
> 时间：2012-06-03T08:17:25.357
> 
> 标签：c++, qt, exe

我如何从 Windows 的可执行文件中找到 Qt、描述、文件版本、创建日期或其他相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:23:49.123

首先看看谷歌是怎么说的:-)[这里](http://www.developer.nokia.com/Community/Wiki/Get_the_file_information_in_Qt)是结果

# c++ - 无法打开包含文件：'mvvm/dialog.h'

> ID：10868856
> 
> 赞同：-4
> 
> 时间：2012-06-03T08:17:26.413
> 
> 标签：c++, visual-c++, mvvm

我正在为 4kvideodownloader 开发一个应用程序。但是当我运行代码时，Visual Studio C++ 出现错误**“致命错误 C1083：无法打开包含文件：'mvvm/dialog.h'：没有这样的文件或目录”**
你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T06:08:20.153

您必须在包含路径中包含文件夹“mvvm”的父目录。

# c - 单行注释宏阻塞 gcc

> ID：10868858
> 
> 赞同：3
> 
> 时间：2012-06-03T08:17:41.080
> 
> 标签：c, gcc, macros, comments

atest.c

```
#define COMMENT /##/

int main()
{
   ...
   COMMENT int atest;
   ...
} 
```

错误消息：

`atest.c:16:1: error: pasting "/" and "/" does not give a valid preprocessing token`

`atest.c: In function 'main':`

`atest.c:16: error: expected expression before '/' token`

虽然 Microsoft C 编译器对 COMMENT 宏很满意。[这里](http://www.drdobbs.com/184401344)的提示也不起作用。

有人可以为此提供解决方案或解释吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T08:40:36.210

当您使用标记粘贴运算符`##`时，组合两个操作数的结果必须是有效的预处理器标记。

`//`不是有效的预处理令牌。删除评论后进行预处理，因此无法在预处理阶段添加评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T08:38:43.880

因为注释处理是在宏*之前*完成的，所以宏生成的注释不能被编译器识别。引用 Ben Combee 对您引用的文章的回应：

> 我刚刚阅读了您在 2001 年 1 月号的 CUJ 上发表的 C/C++ Tip #5。提示的内容（执行扩展为注释的宏）非常熟悉，因为我在 Microsoft 的一个头文件中看到了类似的方法。但是，提示是非常不正确的。
> 
> 作者使用标记粘贴来构造评论开始序列。但是，根据 C 和 C++ 标准，这是无效的。在 ISO C (1999) 的第 5.1.1.2 节中，标题为“翻译阶段”，注释处理发生在第 3 阶段，预处理器识别标记和空格，注释替换为空格。然后在第 4 阶段完成宏处理，该阶段将引入这些新的注释开始序列。在 #4 之后没有后续阶段可以识别注释，因此最终符合标准的编译器会由于非法标记 - '//' 而拒绝程序文本。1998 C++ 标准在第 2.1 节“翻译阶段 [lex.phases]”中有类似的语言。
> 
> 一些编译器充分混合了阶段的顺序和处理以允许该宏工作，Microsoft 的 Visual C++ 6.0 以其受欢迎程度而著称。其他的，例如 Metrowerks CodeWarrior C/C++ 编译器（在我目前的工作之前，我曾作为编译器工程师工作了两年多）遵循标准并且将拒绝提示中显示的用法。
> 
> 谢谢，
> 
> Ben Combee 首席软件架构师 Veriprise Wireless [http://www.veriprise.com](http://www.veriprise.com)

因此，发布此通知的期刊：

> **因此，我们想提醒读者，这个技巧是不可移植的，可能不应该在生产代码中使用。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T08:38:49.493

很抱歉，我没有关于如何执行此操作的答案。

您可以使用命令 cpp（c prepocessor）来预处理您的代码并查看发生了什么。通过 cpp 运行您提供的代码会得到以下结果：

```
int main()
{
a.c:5:1: error: pasting "/" and "/" does not give a valid preprocessing token
       / / int atest;
} 
```

试

```
#define COMMENT /
#define SLASH(x) x/

SLASH(COMMENT) 
```

结果是

```
/ / 
```

然而尝试

```
#define TEST(y) y/
TEST(hello) 
```

结果是

```
hello/ 
```

通常，诸如 // 之类的注释会被删除并替换为单个“注释标记”，这一步是在预处理之前完成的（当 # 指令发生时），因此即使你可以在那里得到你的评论，我怀疑它总是认可（AFAIK 标准不保证它）。

很抱歉，我无法提供更多帮助。

# symfony - 使用额外字段验证 symfony2 表单

> ID：10868859
> 
> 赞同：18
> 
> 时间：2012-06-03T08:17:52.890
> 
> 标签：symfony

我正在为一个backbone.js 应用程序开发一个symfony2 后端。我有我的模型和形式。

但是，backbone.js 在创建/更新模型时会向 REST API 发送一些额外的属性，而我正在努力让表单进行验证。

如何在 symfony2 中获取表单以接受附加数据，或者如何在将数据绑定到表单之前删除特定键？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-10-08T22:00:26.880

您应该使用选项“allow_extra_fields”。

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
        $resolver->setDefaults(
        array(
            'allow_extra_fields' => true
        )
    );
} 
```

对于 symfony 2.8+ 使用 configureOptions(OptionsResolver $resolver) 而不是 setDefaultOptions(OptionsResolverInterface $resolver)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T07:56:16.950

property_path 现在在 sf 2.1 中已弃用，请改用“mapped”

```
$builder
    ->add("firstName", "text")
    ->add("lastName", "text")
    ->add("tac", "checkbox", array(
        "mapped" => false
    )
); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-03T10:15:39.357

要让 Symfony2 接受附加数据，请将附加字段添加到表单构建器，并将其`property_path`选项设置为 false：

例子：

```
$builder
    ->add('my_additional_field', 'checkbox', array(
        'mapped' => false,
    )); 
```

您不需要在绑定数据之前删除键，它们无论如何都会被忽略。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T09:22:00.017

您可以侦听`FormEvents::BIND_CLIENT_DATA`（或者`FormEvents::PRE_BIND`如果您使用的是 2.1 开发版）事件侦听器并添加/删除字段。请参阅[此](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)食谱条目。

# css - 如何将背景图像保留在css渐变上

> ID：10868872
> 
> 赞同：0
> 
> 时间：2012-06-03T08:20:36.510
> 
> 标签：css

我创建了一个 CSS 渐变。我试图在上面放置一个图像。下面是我的代码。

```
style.css
.body {
   margin:0;
   padding:0;
   height:70%;
   border-style:dotted solid;
   border-color:#38FFBE;
}
.container {
   height:90%;
   position:relative;
}
.header {
   padding:10px;
   height:40%;
   border-style:dotted solid;
   border-color:#38FFBE;
   background-image: linear-gradient(left bottom, rgb(95,255,41) 41%, rgb(156,255,255) 71%, rgb(232,171,235) 86%);
   background-image: -o-linear-gradient(left bottom, rgb(95,255,41) 41%, rgb(156,255,255) 71%, rgb(232,171,235) 86%);
   background-image: -moz-linear-gradient(left bottom, rgb(95,255,41) 41%, rgb(156,255,255) 71%, rgb(232,171,235) 86%);
   background-image: -webkit-linear-gradient(left bottom, rgb(95,255,41) 41%, rgb(156,255,255) 71%, rgb(232,171,235) 86%);
   background-image: -ms-linear-gradient(left bottom, rgb(95,255,41) 41%, rgb(156,255,255) 71%, rgb(232,171,235) 86%);

background-image: -webkit-gradient(
    linear,
    left bottom,
    right top,
    color-stop(0.41, rgb(95,255,41)),
    color-stop(0.71, rgb(156,255,255)),
    color-stop(0.86, rgb(232,171,235))
);

background: url(apples.jpg) no-repeat left bottom, -moz-linear-gradient(100% 100% 90deg, #2F2727, #1a82f7) ;
background: url(apples.jpg) no-repeat left bottom, -webkit-gradient(linear, 0% 0%, 0% 100%, from(#1a82f7), to(#2F2727));
}
.body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
   background-color:#CAFF70;
}
.footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:80px;   /* Height of the footer */
   background:#CAFF70;
} 
```

主页.jsp

```
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%>
<%@taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles"%>
<html>
<head>
<title>MindBest</title>
</head>
<style type="text/css">
<%@include file="../include/style.css"%>
</style>
<body>
<div class="container">
<div class="header">Header</div>
<div class="body">Body</div>
<div class="footer">Footer</div>
</div>
</body>
</html> 
```

我已经尝试了上面的代码。但是渐变完全改变了。任何人都可以帮我将图像对齐到渐变的左侧。作为 css 的新手。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:36:38.903

这是你想要达到的目标吗？[http://jsfiddle.net/PhilippeVay/VPjP9/](http://jsfiddle.net/PhilippeVay/VPjP9/)

我在第一个渐变系列中添加了一个图像（我删除了那些沿着 apple.jpg，无法理解他们在那里做什么），`background-image`然后为这些多个图像（图像和渐变）编写`background-position`和。`background-repeat`

由于要管理许多供应商前缀，因此只需编写部件所需的内容`background-image`然后为所有浏览器编写一次`background-position`并且`background-repeat`不需要任何供应商前缀就更容易了。

# django - 制作提交按钮表单域

> ID：10868873
> 
> 赞同：4
> 
> 时间：2012-06-03T08:21:05.630
> 
> 标签：django, django-forms

所以这里有一个[片段](http://djangosnippets.org/snippets/2312/)：

我打算重用它，但是当我在forms.py中声明它时，我渲染了html ..

```
submit_button = SubmitButtonField() 
```

`value`不提供（它被转义为 string `None`），而`name`默认为`submit_button`，可能是因为`forms.Widget`构造函数。

如何提供名称和值？我试图为小部件编写一个 init 方法......

```
def __init__(self, name, value, label, attrs):        
    print '%s, %s, %s, %s' %(name, value, label, attrs)
    self.name, self.value,self.label = name, value, label
    self.attrs = attrs 
```

但是，如果该字段始终（假定）默认使用小部件，这并不完全有意义`SubmitButtonWidget`......相反，我应该在字段 init 方法中提供这些值。但它不允许我这样做。

我应该如何重写此代码段以便它可以接受我提供的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T21:43:25.190

正如代码段顶部的评论中所写，用法是

```
submit_button = SubmitButtonField(label="", initial=u"Your submit button text") 
```

您的缺失值来自`initial`关键字参数。名称是表单域的名称。

# sql - Oracle SQL 中的多行插入

> ID：10868874
> 
> 赞同：4
> 
> 时间：2012-06-03T08:21:14.497
> 
> 标签：sql, oracle, oracle11g

我在 oracle SQL 中使用多行插入语法，如下所示：

```
INSERT ALL
  INTO student(ID, FIRST_NAME, LAST_NAME, AGE)  VALUES(4,'test_name','test_lname',17)
  INTO student(ID, FIRST_NAME, LAST_NAME, AGE)  VALUES(5,'test_name2','test_lname2',20)
  INTO student(ID, FIRST_NAME, LAST_NAME, AGE)  VALUES(6,'test_name3','test_lname3',21)
  select * from dual; 
```

谁能解释一下使用是什么意思

> 从双重选择 *

在和声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T08:27:46.663

它的语法`INSERT ALL`

```
INSERT ALL
INTO <table_name> VALUES <column_name_list)
INTO <table_name> VALUES <column_name_list)
...
<SELECT Statement>; 
```

如果在插入后没有要选择的内容，请执行`select * from dual`

否则你做你的选择，你通常想要确认插入成功

[参考](http://psoug.org/snippet/INSERT-ALL_589.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T08:25:25.040

> DUAL 表是一种特殊的单行表，默认情况下出现在所有 Oracle 数据库安装中。它适用于选择伪列，例如 SYSDATE 或 USER。该表有一个名为 DUMMY 的 VARCHAR2(1) 列，其值为“X”。

更多关于[这里](http://www.adp-gmbh.ch/ora/misc/dual.html)和[这里](http://psoug.org/snippet/INSERT-ALL_589.htm)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T16:30:58.017

insert all 可用于将数据从 select 语句插入到另一个表在您的示例中，您已经提供了要插入的值，这就是您需要执行 select * from dual 以触发插入的原因。

[http://jzab.blogspot.com/2013/05/oracle-insert-multiple-rows-with-single.html](http://jzab.blogspot.com/2013/05/oracle-insert-multiple-rows-with-single.html)

# c# - 使用 IMAP4 MailSystem.NET 连接到 yahoo 电子邮件

> ID：10868875
> 
> 赞同：1
> 
> 时间：2012-06-03T08:21:19.397
> 
> 标签：c#, email, imap, yahoo

我尝试使用 net/imap MailSystem.NET 从 C# 连接到邮件 yahoo 帐户。但我收到错误*堆栈*溢出`imap.Login command`

任何人都试图连接到 Yahoo! Mail 并有一些使用 MailSystem.NET 的经验？

这是我的工作代码。

```
Imap4Client imap = new Imap4Client();
imap.ConnectSsl("imap.mail.yahoo.com", 993);
imap.Login("login@yahoo.com", "PWD");
imap.Command("capability"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:51:48.820

我想建议你使用[ImapX](http://visualstudiogallery.msdn.microsoft.com/b2521818-5a75-4295-8e67-97712ca3073d)

我用它来管理访问 Gmail 雅虎等。

顺便说一句-您是否能够连接到 Gmail.com 等其他邮件服务器？

# php - 如何使用 Symfony2 对数据进行后台解析？

> ID：10868877
> 
> 赞同：4
> 
> 时间：2012-06-03T08:21:45.307
> 
> 标签：php, parsing, symfony, background

我用 Symfony2 用 PHP 编写了一个 Web 应用程序。用户可以上传包含保存到数据库中的数据的 CSV 文件。CSV 文件每一行的解析持续大约 0.2 秒，因为我向 Google Maps API 发出了一些请求。

因此，当您上传一个包含 5000 行的 CSV 文件时，这在我的应用程序中是一个现实案例，解析整个文件可能需要 16 分钟。

我不希望用户必须等待 16 分钟才能继续使用我的应用程序。所以我的问题是：如何在后台解析CSV文件，让用户继续上网？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T09:11:45.667

您可以创建一个`kernel.terminate`事件侦听器并在那里进行解析。此事件在响应发送到浏览器后触发。示例实现将是，

服务声明，

```
//services.yml
csv_parse_listener:
    class: FQCN\Of\CsvParseListener
    tags:
        - { name: kernel.event_listener, event: kernel.terminate, method: onKernelTerminate } 
```

听课，

```
namespace Your\namespace;
use Symfony\Component\HttpKernel\Event\PostResponseEvent;

class CsvParseListener
{
    public function onKernelTerminate(PostResponseEvent $event)
    {
        $request = $event->getRequest();
        if($request->get('_route') !== "Your_route"){
            return;
        }

        $csvFile = $request->files->get('file_field_name');

        //move file using $csvFile->move()
        //read and parse
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T08:41:53.550

让上传将作业插入作业队列表，并让[cron](http://en.wikipedia.org/wiki/Cron)定期运行[命令](http://symfony.com/doc/current/components/console.html)来处理作业队列表中的任何工作。

随着作业处理的进行，您可以更新作业表，以便用户可以检查并查看正在发生的进度（例如，您可以有一个 ajax 进度条）并且可以知道作业何时完成。

通过这种方式，您还可以将上传与处理分离，并且您可以控制一次处理多少个作业。在没有限制/排队系统的情况下直接从用户输入启动长时间运行的作业是一种让自己面临拒绝服务攻击的好方法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T08:38:53.803

您可以编写一个仅用于处理 CSV 文件的脚本，然后从管理上传的脚本中执行该脚本。在 *IX 系统上，您可以通过附加 & 字符使由 exec() 启动的命令在后台运行。

您可能还需要包含一个脚本，让用户检查处理的进度。

# clojure - 添加到 clojure 持久矢量图

> ID：10868881
> 
> 赞同：4
> 
> 时间：2012-06-03T08:22:07.210
> 
> 标签：clojure

我试图找出一种将对象添加到矢量图的方法。

```
(defstruct item :name)
(def itemList [])

(defn add-item [db & item] 
  (into db item))

(defn get-records[]
  (doseq [i (range 0 10 1)]  
   (add-records itemList  (struct item "test")
  )) 
```

在循环结束时，我想`itemList`包含 10 个对象。任何帮助都会非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:51:07.687

Clojure 是一种函数式编程语言，它的所有主要数据结构都是不可变和持久的。这也包括向量。

您的示例需要管理状态。Clojure 为此提供了几个抽象，我认为[原子](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/atom)最适合您的用例。

```
user=> (defrecord Item [name])
user.Item

user=> (def item-list (atom []))
#'user/item-list

user=> (defn add-item [db i] (swap! db #(conj % i)))
#'user/add-item

user=> (defn put-records [] 
         (doseq [i (range 10)] 
           (add-item item-list (Item. "test"))))
#'user/put-records

user=> (put-records)
nil

user=> item-list
#<Atom@4204: [#user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"} #user.Item{:name "test"}]> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T12:23:09.157

如果你真的需要改变某些东西，missingfaktor 的答案是正确的，但拥有以下内容会更正常：

```
(defstruct item :name)
(def itemList (for [i (range 10)] (struct item "test"))) 
```

换句话说 - 创建包含内容的对象列表。

# ios - 如何使用 UIScrollView 将按钮置于屏幕外？

> ID：10868882
> 
> 赞同：0
> 
> 时间：2012-06-03T08:22:11.517
> 
> 标签：ios, uiviewcontroller, uiscrollview

我有一个很长的 ViewController，里面装满了视图控件（我放置的）。没有足够的空间一次显示所有标签、文本字段等，所以我想使用 UIScrollView（或类似的东西），这样用户就可以向下滚动页面并查看其余控件。但是，我尝试将 UIScrollview 拖动到 ViewController 上，然后尝试拖动，但我根本无法拖动屏幕。我能做些什么来启用这个“滚动”功能。这不是 TableView - 只是一个普通的 ViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:37:58.833

我不确定您的问题是您是否希望在 XCode 中滚动（您不能）或在执行代码时滚动。

为了在运行应用程序时滚动视图，滚动视图的内容需要大于其框架。因此，假设框架在 iPhone 上是全屏的（0,0,320,460），如果你要写：

```
[self.scrollView setContentSize:CGSizeMake(400, 460)]; 
```

然后滚动视图可以水平滚动以显示剩余的 80 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:41:46.253

以通常的方式创建您`uibutton`的，以通常的方式链接它。*（在.h*文件中创建出口和操作是我目前正在做的事情），然后告诉计算机您实际希望它使用的位置：

```
myButton.frame = CGRectMake(20, 800, 90, 30); //in viewDidLoad is where I put it 
```

查看此线程： [如何动态更改 UIButton 的位置](https://stackoverflow.com/questions/8775290/how-to-change-the-position-of-a-uibutton-dynamically)

**注意：**
如果您创建`myButton`视图的子视图而不是`scrollView`. 至少在我的情况下，这不起作用。可以看到该按钮，但单击它并没有激活关联的`IBAction`.

这有效：

```
[scrollView addSubview:myButton]; 
```

虽然这似乎没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T08:25:06.877

您需要在底部设置滚动视图，然后将所有视图控制器粘贴在上面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T08:25:36.857

首先将 UIScrollView 拖到当前视图中

然后开始复制粘贴其中的所有视图，形成原始视图

请检查这个答案 [网上有什么好的 UIScrollView 教程吗？](https://stackoverflow.com/questions/820557/are-there-any-good-uiscrollview-tutorials-on-the-net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T18:21:02.860

这是一种更好的方法：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[view addSubview:button]; 
```

我在这里找到了这段代码：[如何以编程方式创建基本的 UIButton？](https://stackoverflow.com/questions/1378765/how-do-i-create-a-basic-uibutton-programmatically), 由 mahboudz 发布

这与我上面所说的基本相同，但都是以编程方式完成的，这带来了你应该（还没有尝试过）的好处，例如，能够使用 for 循环创建多个这样的按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T03:22:01.857

我相信您正在使用 Interface Builder / storyboard 来布局您的内容。按着这些次序：

1.  像你一样在 IB 中布局你的 UIScrollView。在 Size Inspector 中将其宽度和高度设置为 320 x 460。
2.  将滚动视图作为 IBOutlet 连接到您的 .h 文件。我将它命名为scrollView。
3.  将滚动视图的 contentSize 设置为大于其框架。例如

    ```
    self.scrollView.contentSize = CGSizeMake(320.0f, 1000.0f); 
    ```

4.  在 IB 中将 UIView 添加到 scrollView。UIView 的大小应该与滚动视图的 contentSize 相同。

5.  在 UIView 上布局内容时，将 Size Inspector 中的 UIView 的 Y 设置为 -400（或您想要偏移的任何值），您将能够在 UIView 中布局更多元素。

# php - 会话正在特定页面上重新启动

> ID：10868886
> 
> 赞同：1
> 
> 时间：2012-06-03T08:23:25.743
> 
> 标签：php, jquery, session

我正在为一个 uni 项目开发一个基于 php 的站点。

一切正常，我正在使用会话来存储登录用户的数据。

我有一个页面，用户可以使用 jquery 标记图像。jquery 使用 php 保存一个带有标签的 txt 文件。在那个 php 页面中，我添加了“session_start();” 在顶部，以便我还可以在 mysql 数据库中存储一些信息。

但是我发现，当我标记图像时，实际发生的是会话正在重新启动，因此用户正在注销，并且数据库中没有存储任何内容。

有什么想法我可能做错了吗？（它在我项目的所有其他页面上工作，只有这个 javascript+php 组合似乎导致了问题）。

这是来自 php 页面的代码，它被 javascript 调用。它来自第三方 jquery 插件，我在其中添加了自己的代码：

```
session_start();

    include 'notes.class.php';
    require_once '../db.php';

    if (isset($_POST['image']) && !empty($_POST['image']))
    $oNote = new note('../jquery-notes_notes/', '', (string) strip_tags($_POST['image']), '.note');
        $NoteName = md5(strip_tags($_POST['image']));
        $NoteName .= '.note';
        $ImageID = $_SESSION['CurrentImage'];

        //get the name of the last poster if the user is logged in, its the username, otherwise its the comment name
        if ($_SESSION['logged_in'] == 1) {
            $LastNoteBy = $_SESSION['username'];
        } else {
            $LastNoteBy = 'Guest: '.$_SESSION['commentname'];
        }

        //get relevant info for this image
        $DBQueryImageData = mysqli_query($dblink, "SELECT * FROM images WHERE image_id = '$ImageID'");
        while($row = mysqli_fetch_array($DBQueryImageData)) {
            $DBImageUserID = $row['user_id'];
            $DBImageName = $row['image_name'];
            $DBGivenName = $row['given_name'];
            $DBImageLasteNoteBy = $row['last_note_by'];
            $DBImageProjectID = $row['project_id'];
        }

        //get the project name of the related project
        $DBQueryProjectName = mysqli_query($dblink, "SELECT * FROM projects WHERE project_id = '$DBImageProjectID'");
        while($row = mysqli_fetch_array($DBQueryProjectName)) {
            $DBProjectName = $row['project_name'];
        }

        //get the username of the owner of the previously obtained user_id
        $DBQueryUsername = mysqli_query($dblink, "SELECT * FROM users WHERE user_id = '$DBImageUserID'");
        while($row = mysqli_fetch_array($DBQueryUsername)) {
            $DBUsername = $row['username'];
            $DBEmail = $row['email'];
            $DBNotify = $row['notify'];
        }

        //only send off the email if the user has asked to receive notifications
        if ($DBNotify == 1) {

            //compare the current poster to the last poster saved for this image, if they are different, and if the current poster is not the owner, email the owner of the project
            //if the last poster is not the same as the current poster
            if ($DBImageLasteNoteBy != $LastNoteBy) {

                //if the current poster is not the owner
                if ($LastNoteBy != $DBUsername) {

                    if (strlen($DBGivenName) > 4) {
                        $DBImageName = $DBGivenName;
                    }

                    //send the email
                    $to = $DBEmail;
                    $subject = "New comment on your project image";
                    $headers = 'From: test@test.com' . "\r\n" .
                    'Reply-To: test@test.com' . "\r\n" .
                    'X-Mailer: PHP/' . phpversion();
                    $additionalParameters = '-ODeliveryMode=d'; 
                    $body = 'Hi '.$DBUsername.','."\n\n".'A comment has been made by '.$LastNoteBy.' on your image: '.$DBImageName.' in your project: '.$DBProjectName."\n\n".
                    'http://'.$_SERVER['SERVER_NAME'].'/saeproj/index.php?page=project&id='.$DBImageProjectID;

                    mail($to, $subject, $body, $headers, $additionalParameters);

                }
            }
        }

        mysqli_query($dblink, "UPDATE images SET note = '$NoteName', last_note_by = '$LastNoteBy' WHERE image_id = '$ImageID'") or die(mysql_error()); 
```

**更新：**我刚刚注意到我没有在 iMac 上运行的 MAMP 版本上注销。但是我正在我的托管网络空间上注销（ipower 是主机）。

**更新 2：**我刚刚检查，会话 ID 没有改变，但会话 ['logged-in'] 被更改为 0。如果会话 ID 没有改变，那么会话没有重新启动，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:56:26.760

事实证明，在托管的网络空间 register_globals 设置为“开”。关闭它可以解决问题。

# php - PHP Preg 匹配错误

> ID：10868891
> 
> 赞同：3
> 
> 时间：2012-06-03T08:23:48.327
> 
> 标签：php, regex, preg-match, match

在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)下面的正则表达式工作但不是在 PHP

```
(?>AB/HDR)(?:[^])*?(?=AB/HDR|RUN DATE|\z) 
```

在 PHP 中是这样说的：

```
preg_match() [function.preg-match]: Unknown modifier '(' in E:\xampp\htdocs..... 
```

没有太多的想法尝试以下变化，但没有结果

```
%(?>AB/HDR)(?:[^])*?(?=AB/HDR|RUN DATE|\z)% 
> result : Compilation failed: missing terminating ] for character class at offset 41

%(?>AB/HDR)(?:\[^])*?(?=AB/HDR|RUN DATE|\z)%
> result : 0 match which is incorrect 
```

任何帮助，将不胜感激 ！！！

### 测试数据

```
RUN DATE: 15FEB12                        F E D E R A L    E X P R E S S     C O R P O R A T I O N             PAGE:    1
RUN TIME: 09:36                               INTERNATIONAL DETAIL MANIFEST                             REPORT: FEVIP093-R1
SEQUENCE: DN,ST,BT,BA,MB,BD,DV,RT,AWB         OUTBOUND REQUEST BY ROUTE                                   

AB/HDR : 4876  6218  1850  ORIG: SYD     DEST: DAC     ORIGIN CNTRY: AU   EXPORT CNTRY: AU   SHIP DATE: 14FEB12
    CONSIGNEE ACCT : 000000000   PHONE : +88 02 8834304        SHIPPER ACCT : 141639668   PHONE : 0299978166
       COMPANY: EASY FLY EXPRESS LTD                              COMPANY: INTERNATIONAL AIR PARTS
       NAME:    ADYET                                             NAME:    GREG FULLER
       ADDRESS: HOUSE NO.4, 5TH FLOOR, ROAD NO.20                 ADDRESS: 5A JUBILEE AVENUE
       ADDRESS: UTTARA, SECTOR-3                                  ADDRESS:
       CITY:    DHAKA                                             CITY:    WARRIEWOOD
       ST/PV:      CNTRY: BD   POSTAL: 1230                       ST/PV:      CNTRY: AU   POSTAL: 2102
       BROKER:                    PHONE:                     CITY:                    CNTRY:      CUSTOMS ID NBR:
    SVC: 0101 BILL-T/C: S BILL-D/T: S   TTL PKGS:     1   TTL WGT:       0.5 K   CURR: USD   CUSTOMS VALUE:        90.00
MAWB:                DESC: AIRCRAFT PARTS, 1 X FILTER

AB/HDR : 4926  0503  9651  ORIG: SYM     DEST: DAC     ORIGIN CNTRY: CN   EXPORT CNTRY: CN   SHIP DATE: 14FEB12           ECI
    CONSIGNEE ACCT : 000000000   PHONE : 880-27701506-9        SHIPPER ACCT : 354519100   PHONE : 26501338-8004
       COMPANY: HOP LUN BANGLADESH                                COMPANY: FINELINE(4403137628)
       NAME:    MR. EMRAN                                         NAME:    MISS WU
       ADDRESS: BLDG NO. 3 (4 STORIED BLDG)                       ADDRESS: 3F BLDG D,  HUICHAO INDUSTRIAL PAR
       ADDRESS: DHAKA EXPORT PROCESSING ZONE                      ADDRESS: SECOND GUSHU ROAD XIXIANG TOWN,
       CITY:    GANAKBARI SAVAR DHAK                              CITY:    BAOAN DIST SHENZHEN
       ST/PV:      CNTRY: BD   POSTAL: 1349                       ST/PV:      CNTRY: CN   POSTAL: 518102
       BROKER:                    PHONE:                     CITY:                    CNTRY:      CUSTOMS ID NBR:
    SVC: 0101 BILL-T/C: O BILL-D/T: C   TTL PKGS:     2   TTL WGT:       7.7 K   CURR: USD   CUSTOMS VALUE:       346.50
MAWB:                DESC: PRICE TICKET L(4821100000)NO BRAND

   CRN:  492605039662

RUN DATE: 15FEB12                        F E D E R A L    E X P R E S S     C O R P O R A T I O N             PAGE:   11
RUN TIME: 09:36                               INTERNATIONAL DETAIL MANIFEST                             REPORT: FEVIP093-R1
SEQUENCE: DN,ST,BT,BA,MB,BD,DV,RT,AWB         OUTBOUND REQUEST BY ROUTE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:29:35.803

首先，这是不允许的

```
[^] 
```

我已将其替换为`.`. 其次，您需要模式分隔符：

```
#(?>AB/HDR)(?:.)*?(?=AB/HDR|RUN DATE|\z)# 
```

忘记`dot matches all`修饰符：

```
#(?>AB/HDR)(?:.)*?(?=AB/HDR|RUN DATE|\Z)#s 
```

# objective-c - 全局应用监控 macos/cocoa/objective-c

> ID：10868899
> 
> 赞同：0
> 
> 时间：2012-06-03T08:24:39.387
> 
> 标签：objective-c, macos, cocoa, cgeventtap

有没有办法监控在应用程序中执行的操作？例如，用户在 Safari 中打开一个新选项卡。我试图监控这些行为。我正在寻找一个能识别这种行为的类！

任何人的提示或想法？

谢谢

多哥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:05:31.663

一般来说，没有。Safari 中的选项卡在系统其他地方没有任何意义或表示。它只是 Safari 进程中的数据，其他进程无法访问，他们也不知道如何解释它。

也就是说，Accessibility API 可能是最接近这个的。可访问的应用程序应通知系统其 GUI 的更改，并且可访问性客户端可以观察到这一点。

# c - 关于运算符“+”的问题

> ID：10868901
> 
> 赞同：-2
> 
> 时间：2012-06-03T08:24:57.413
> 
> 标签：c, operators

我使用的语言是 C。

我的代码如下：

```
int sign_x=~(x>>31)+1;
int sign_y=~(y>>31)+1;
int sign=sign_x^sign_y;
return ((!sign)&(!(!(0x80000000&(y+(~x+1)))))+(sign&(!sign_x))); 
```

当我设置输入 x=2147483647[0x7fffffff],y=-2147483648[0x80000000] 时，结果是 0。我想知道为什么结果是 0 而不是 1，因为第一部分是 0，第二部分是 1。当我改变运算符“+”到“|”，结果OK。

有谁能够帮助我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:54:29.640

0 + 1*是*1，这意味着运算符优先级与您认为的不同。

gcc 足够聪明，可以为此发出警告：

> 警告：在 '&' 的操作数中建议在 '+' 周围加上括号</p>

```
(!sign) & (!(!(0x80000000&(y+(~x+1)))))+(sign&(!sign_x))); 
```

添加额外的括号：

```
((!sign)&(!(!(0x80000000&(y+(~x+1)))))) + ((sign&(!sign_x)))); 
```

或者，由于表达式相当复杂，暂时存储部分结果：

```
int part1 = ...
int part2 = ...
return part1 + part2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T08:55:34.607

为了运算符优先级，您需要添加括号：

```
int funcTest(int x, int y) {

int sign_x=~(x>>31)+1;
int sign_y=~(y>>31)+1;
int sign=sign_x^sign_y;
return (
 ((!sign)&(!(!(0x80000000&(y+(~x+1)))))) + (sign&(!sign_x))
); 
```

返回 1 。

请参阅 sum 的第一部分周围的括号：

```
(!sign)&(!(!(0x80000000&(y+(~x+1))))) ----> ((!sign)&(!(!(0x80000000&(y+(~x+1)))))) 
```

# c# - xna 在固定屏幕坐标上将 3d 对象显示为 2d

> ID：10868903
> 
> 赞同：0
> 
> 时间：2012-06-03T08:25:05.260
> 
> 标签：c#, 3d, xna, screen, 2d

你好，我正在尝试创建一个类似于我的世界的库存，它在屏幕上的不同插槽中呈现项目和块。我有一个块的顶点数组，我想以特定大小在特定屏幕坐标处绘制它。

顺便说一句，这是我目前正在使用的代码，它正在工作，但我无法确定一个特定的位置或大小：

```
 Vector2 coord = new Vector2(-4, 0); //Screen coord.
 int distance = 20; //Distance of the camera from the block(control the size).

  BlockRenderer.basicTextureEffect.View = Matrix.Identity * Matrix.CreateLookAt(new Vector3(-distance, distance * 0.6f, -distance), Vector3.One / 2, Vector3.Up) *  Matrix.CreateTranslation(coord.X, coord.Y, 0);
  BlockRenderer.basicTextureEffect.CurrentTechnique.Passes[0].Apply();
  graphics.GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, vertex, 0, vertex.Length / 3); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:04:58.597

您的矩阵需要交换。您希望单位矩阵位于末尾。矩阵翻译从右到左解释。matrix.identity 参考摄像机视图的原点。如果你有 view.lookat(matrix.identity * myMatrix); 如果您依赖对象位于视口原点，则 myMatrix 无法正确解释。

这是一个很好的参考。

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Coll_Detection_Matrices.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Coll_Detection_Matrices.php)

# c++ - 将 Vector * 转换为 char *

> ID：10868905
> 
> 赞同：2
> 
> 时间：2012-06-03T08:25:10.923
> 
> 标签：c++, pointers, vector, char

我在将指向向量的指针转换为`char *`. 这是我的代码，我做错了什么？

```
char * Word1 = (*fileRead)[i].c_str();
char * Word2 =  dict[j].c_str();

if(WordCmp(Word1,Word2)
{
    found = true;   
} 
```

这是`WordCmp()`.

```
int WordCmp(char* Word1, char* Word2); 
```

我得到的错误如下：

```
server.cpp:200: error: invalid conversion from 'const char*' to 'char*'
server.cpp:201: error: invalid conversion from 'const char*' to 'char*' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T08:28:04.383

编译器告诉您，指针的类型是“指向成本字符的指针”，但您试图将其分配给指向（可变）字符的指针。

将前两行替换为

```
const char * Word1 = (*fileRead)[i].c_str();
const char * Word2 =  dict[j].c_str(); 
```

# php - PHP：一列表到一维数组

> ID：10868906
> 
> 赞同：1
> 
> 时间：2012-06-03T08:25:11.367
> 
> 标签：php, mysql, arrays

我有这样的表：

```
random_num
----------
0
15
12
... 
```

我有疑问`SELECT random_num FROM table_name;`。

我想以如下方式获取数组：

```
$row[0] = 0;
$row[1] = 15;
$row[2] = 12;
etc.. 
```

但是 PHP 只允许我以这种方式获取它：

```
$row[0]['random_num'] = 0;
etc.. 
```

如何根据需要获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:33:30.560

您可以使用[array_map](http://www.php.net/manual/en/function.array-map.php)

```
//PHP >= 5.3 
$row = array_map(function($n) {
   return $row['random_num'];
}, $row);

//PHP < 5.3
function map($n) {
  return $n['random_num'];
}

$row = array_map('map', $row);

//EDIT
$row = array_map('implode', $row) //thanks to hakre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:29:05.640

我不知道为什么你不能只使用`$row[0]['random_num']`，但如果你真的需要展平数组：

```
foreach( $row as $index => $data ) {
    $row[ $index ] = $row[ $index ]['random_num'];
} 
```

# moodle - 一个用户的多个角色

> ID：10868914
> 
> 赞同：0
> 
> 时间：2012-06-03T08:26:52.367
> 
> 标签：moodle

大家好，我在 Moodle 中的用户角色分配方面遇到了困难。因为我已经做了一个主要管理员、批处理促进者、教师和学生。我想为 Batch Facilitator 分配经理和课程创建者两个角色。但是，当我分配角色时，我只能从下拉菜单中看到一个选项，我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:49:02.280

您不能将两个角色关联到同一上下文中的同一用户。另一种方法是创建一个具有您希望这些用户拥有的所有权限的附加角色。

# javascript - javascript数组中的值不是第一次设置

> ID：10868916
> 
> 赞同：0
> 
> 时间：2012-06-03T08:27:00.337
> 
> 标签：javascript, google-maps

在**solidated_cord[]**中的值下面的代码中，第一次没有设置值。

该脚本在按钮单击时被调用。

```
<html>
<head>
  <title>Map Test</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"
      type="text/javascript"></script>

    <script type="text/javascript" src="js/map-script.js"></script>

 <style type="text/css">
      body {
        font-family: sans-serif;
        font-size: 14px;
      }
      #map_canvas {
        height: 400px;
        width: 600px;
        margin-top: 0.6em;
      }
    </style>
    <SCRIPT>

// jQ Block
$(document).ready(function(){
    var map, infowindow, autocomplete, place, marker;
    var position;
    var startpt, endpt;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
    var geocoder;
    var consolidated_cord = [];

    {   // initializtion block -- will load default map

        directionsDisplay = new google.maps.DirectionsRenderer({draggable: true});
        position = new google.maps.LatLng(48.8742, 2.3470); 
        var mapOptions = {
            center: position,
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);

        // Start Point
        startpt = document.getElementById('start');
        autocomplete = new google.maps.places.Autocomplete(startpt);
        autocomplete.bindTo('bounds', map);

        endpt = document.getElementById('end');
        autocomplete = new google.maps.places.Autocomplete(endpt);
        autocomplete.bindTo('bounds', map);

        marker = new google.maps.Marker(
            {
                position: position,
                draggable:true,
                animation: google.maps.Animation.DROP,
                map: map
            }
        );
        google.maps.event.addListener(marker, 'click', toggleBounce);
        directionsDisplay.setMap(map);  
    }

    /*
    *   "+"click - add input textfield
    */
    var i = 1;
    $('#addTextBox').click(function(){
        if(i<=3){
            var id = "wp"+(i);
            $('<input id="'+id+'" type="text" size=50><br/>').fadeIn('slow').appendTo('#wayPointContainer');
            autocomplete = new google.maps.places.Autocomplete(document.getElementById(id));
            autocomplete.bindTo('bounds', map);
            i++;
        }else{
            alert('Sorry Upto 5 waypoints are allowed');
        }
    });

    $('#Go').click(function(){

        if ( $('#start').val() == "" || $('#end').val() == "" ){
            alert('Start or End Empty');
            return false;
        }

        // Array for storing all entered locations - will be used for geocoding
        var loc_arr_geocode = [];
        loc_arr_geocode.push($('#start').val());

        // Checking if any waypoint available
        var numWp = $('#wayPointContainer input').size();
        //pushing waypoints in an array
        var waypts = [];
        for(var counter = 1; counter <= numWp; counter++){
            if ($('#wp'+counter).val() != ""){
                waypts.push({
                    location: $('#wp'+counter).val(),
                    stopover:true
                });
                loc_arr_geocode.push($('#wp'+counter).val());
            }
        }

        loc_arr_geocode.push($('#end').val());

        var request = {
            origin:startpt.value,
            destination:endpt.value,
            waypoints: waypts,
            optimizeWaypoints: true,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
            }
        });

        //fetching coordinated
        fetchCoordinates(loc_arr_geocode);

        //saving cordintes in hidden form field

    });

    //Geocoder to fetch coordinates
    function fetchCoordinates(loc_arr_geocode){

        geocoder = new google.maps.Geocoder();
        for( var i=0; i < loc_arr_geocode.length; i++){
            geocoder.geocode( { 'address': loc_arr_geocode[i]}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    consolidated_cord.push(results[0].geometry.location);
                }else{
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });
        }

        save_cord();
    }

    function save_cord(){
        alert(consolidated_cord[0]);
        //$('#submit_cord').submit();
    }

    function toggleBounce() {
        if (marker.getAnimation() != null) {
          marker.setAnimation(null);
        } else {
          marker.setAnimation(google.maps.Animation.BOUNCE);
        }
    }

});

    </SCRIPT>

</head>

<body>

    <input id="start" type="text" size="50"> <br/>
        <div id="wayPointContainer"></div>
    <input id="end" type="text" size="50"> <br/>

    <input id="addTextBox" type="button" value="+">
    <input type="button" id="Go" value="Go"/>
    <div id="map_canvas"></div>

    <form id="submit_cord" name="submit_cord" action="save_cord.php" method="post">
        <input type="hidden" id="cord" name="cord"/>
    </form>

</body>
</html> 
```

当我单击按钮时，它会提示“未定义”。但第二次它会提醒坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:34:24.847

地理编码强制异步请求。获得结果需要一些时间，但您会`save_cord()`立即致电。您在第二次单击时获得的结果是第一次请求的结果。

而是调用回调中的函数`geocoder.geocode()`。

# javascript - JS - 关于完整 AJAX 网站的几个问题 - GoogleBot、优化、模板

> ID：10868917
> 
> 赞同：0
> 
> 时间：2012-06-03T08:27:11.767
> 
> 标签：javascript, jquery, ajax, templates

我正在编写完整的基于 AJAX 的网站。现在我正在做页面导航和内容显示而无需重新加载页面。这就是我决定这样做的方式：

```
<html>
<head>
    <!--CSS-->
        .hidden {display:none;}
</head>
<body>
    <!--Menu bar-->
    <a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage1(); return false;">Page1</a>
    <a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage2(); return false;">Page2</a>
    <a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage3(); return false;">Page3</a>

    <!--Content blocks for different pages-->
    <div class="current" id="page1">
        <!--Page 1 content-->
    </div>
    <div class="hidden" id="page2">
        <!--Page 2 content-->
    </div>
    <div class="hidden" id="page3">
        <!--Page 3 content-->
    </div>

    <!--JS for managing pages links-->
    <script>
        $(document).ready(function() {
        });
        function loadPage1() {
            $('.current').hide();
            $('#page1').show().addClass('current');
        };
        function loadPage2() {
            $('.current').hide();
            $('#page2').show().addClass('current');
        };
        function loadPage3() {
            $('.current').hide();
            $('#page2').show().addClass('current');
        };
    </script>
</body> 
```

1）首先，我们显示具有“当前”类的 page1 块，其他块具有“隐藏”类 2）当我们单击 loadPage2() 时，我们找到当前活动块（通过它的“当前”类）并将其隐藏，和显示 page2 块。

**注意。**我必须为第一个页面块使用隐藏的附加类，因为 $(document).ready(function() {$('#page2').hide();$('#page3').hide();} ); 似乎有点慢，用户可能会在页面完全加载之前注意到一些奇怪的事情。

虽然我的解决方案有效，但也存在一些问题：

* *1)* *实际上，对于JS禁用的用户，我仍然需要做真实的页面，只是显示不同的开始块。这意味着我将不得不做很多相似的页面，但有一个区别——隐藏和显示不同的起始块。如果 Google 抓取我的网站，它不会认为我的网站内容加倍并禁止它吗？

* *2)* *例如，第 2 页有大图。当页面开始时 - 它是隐藏的。但是，即使一开始不会显示，也需要很长时间才能加载它。如何管理它？按需加载内容？我的意思是创建 6 个模板文本文件，当用户请求页面时，JS 从文件中加载页面内容并将其放入 div？

可能看起来有点乱，但提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:23:17.173

首先，我建议您在此处阅读可抓取 Ajax 页面的文档
[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

对于您的示例，这是不好的做法，Google 不喜欢`onclick="loadPage1(); return false;`链接

```
<a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage1(); return false;">Page1</a>
<a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage2(); return false;">Page2</a>
<a href="link_to_real_page_for_JS-disabled-users" onclick="loadPage3(); return false;">Page3</a> 
```

它更好

```
<a href="link_to_real_page_for_JS-disabled-users" data-page="#page1">Page1</a>
<a href="link_to_real_page_for_JS-disabled-users" data-page="#page2">Page2</a>
<a href="link_to_real_page_for_JS-disabled-users" data-page="#page3">Page3</a> 
```

并像这样修改您的脚本代码

```
<script>
//$(document).ready alternative
$(function () {
    //cache links so you can access faster for later use.
    var $links = $("a[data-page]").on("click", function (e) {
        var $this = $(this),
            page = $this.data("page");
        $(page).addClass("current")
            .siblings("div.current").removeClass("current").hide()
            .end().show();
        e.preventDefault();
    });
});
</script> 
```

您可以更多地优化代码，顺便说一下我没有测试代码。

# javascript - JSON.stringify 没有正确转换 array.object

> ID：10868922
> 
> 赞同：0
> 
> 时间：2012-06-03T08:28:10.883
> 
> 标签：javascript, json

JSON.stringify 有问题

我正在尝试将所有元标记从页面中拉出并将它们传递给 Firefox 工作文件以处理它们并返回一个对象。

因此，当我没有工作人员运行问题时，我的代码以前可以工作，只有在我转向使用工作人员文件时才出现（由于我无法进入的原因，我需要使用工作人员！）

所以以前我会使用

```
var metas = document.getElementsByTagName("meta"); 
```

然后我可以使用循环遍历 metas 对象

```
for (var index in metas){
  var currentMeta = metas[index];
//(and so on, this code worked perfectly) 
```

当我移动到外部工作文件方案时会出现问题。发生的情况是我像往常一样拉出元标记，然后我使用 JSON.stringify 来推送我可以推送给工作人员的东西。

在所有这些介绍性废话之后，这是我的问题的根源：例如，我登陆一个页面，其中包含以下 html 代码

```
<meta content="width=1024" name="viewport">
<meta charset="UTF-8">
<meta content="Mozilla Hacks – the Web developer blog" name="title"> 
```

如果我运行以下代码，我会得到一个数组

```
var metas = document.getElementsByTagName("meta"); 
```

返回一个包含 3 个元素的数组

```
[meta, meta, meta] 
```

如果我使用以下方法对其进行字符串化：

```
var jsonMetas = JSON.stringify(metas); 
```

我希望 jsonMetas 包含以下内容：

```
{"0":{"content":"width=1024","name":"viewport"},"1":{"charset":"UTF-8"},"2":{"content":"Mozilla Hacks - the web developer blog","name":"title"} } 
```

但是，当我查看 jsonMetas 对象时，我看到它返回了：

```
{"0":{"constructor":{}},"1":{"constructor":{}},"2":{"constructor":{}}} 
```

啊？？？？

我不太擅长 JavaScript，所以请您解释一下（用非常简短的语言 :)）发生了什么？

为什么 stringify 调用会返回异常结构化的对象？我究竟做错了什么？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:43:03.903

您可以使用[以下内容](http://jsfiddle.net/M69DZ/)：

```
var metas = document.getElementsByTagName("meta");
var arr = [];
for (var i = 0; i < metas.length; i++) {
    var obj = {};
    for (var j = 0; j < metas[i].attributes.length; j++) {
        var att = metas[i].attributes[j];
        obj[att.name] = att.value;
    }
    arr.push(obj);
}

var jsonMetas = JSON.stringify(arr);
console.log(jsonMetas);​ 
```

结果是：

```
[
    {
        "http-equiv": "content-type",
        "content": "text/html; charset=UTF-8"
    },
    {
        "content": "width=1024",
        "name": "viewport"
    },
    {
        "charset": "UTF-8"
    },
    {
        "content": "Mozilla Hacks – the Web developer blog",
        "name": "title"
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:42:56.530

原因是*document.getElementsByTagName*不返回 JSON，而是返回 XML。所以，你需要使用这样的东西来获得你想要的输出：

```
var jsonMetas = [];
for (i=0 ; i<metas.length ; i++) {
    var thisMeta = {};
    for (j=0 ; j<metas[i].attributes.length ; j++) {
        thisMeta[metas[i].attributes[j].name] = metas[i].attributes[j].value;
    }
    jsonMetas.push(thisMeta);
} 
```

此页面的 JSON.stringify(jsonMetas) 的输出：

> "[{"name":"relativepagescore","content":"0"},{"name":"title","content":"javascript - JSON.stringify 没有正确转换array.object - 代码日志"} ]"

# php - php检查时间和日期

> ID：10868927
> 
> 赞同：0
> 
> 时间：2012-06-03T08:28:58.357
> 
> 标签：php

你好，这对我来说很好，但我认为它可以更简单任何人都可以帮助我使用这段代码来检查用户输入的时间和日期

```
 function ckeck_date($sug_date, $sug_time)
    {
        if ($sug_date[0] == NULL)
        {
            return TRUE;
        }
        else
        {
            for ($i = 0; $i < count($sug_date); $i++)
            {
                if ($this->_totimestamp($sug_date[$i], $sug_time[$i]) < mktime(23, 59, 59, date('m'), date('d') - 1, date('Y')))
                {
                 $x=false;
                }
                else $y=true;
            }

        }
        if(isset($x))
        {
        return $x*$y;
        } 
else return true;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:50:51.433

试试这个，把你的日期和时间

```
 $str = '2012-06-15 11:12:23'; // OR '15-06-2012 11:12:23'

if ( strtotime( $str ) > time( ) ) {
  // Your time is greater than current time
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:33:07.790

对于日期，您可以使用：

[检查日期](http://php.net/manual/en/function.checkdate.php)

使用[strtotime](http://php.net/manual/en/function.strtotime.php)您可以`int`从字符串创建并比较它们是否在将来（如果您比较`now`）

```
$today = strtotime(date("Y-m-d")); // today's date
$userd = strtotime("2012-10-16");  // users input

if ($userd > $today){ 
   $valid = "yes"; 
} else { 
   $valid = "no"; 
} 
```

如果我是对的，您也可以将时间添加到输入中，但是您需要检查有关此的 php 文档以获取正确的日期时间格式

更短：

```
if (strtotime($userdate) > strtotime(date("Y-m-d"))){ 
   $valid = "yes"; 
} 
```

# javascript - chrome 扩展 youtube 上下文菜单

> ID：10868932
> 
> 赞同：0
> 
> 时间：2012-06-03T08:29:41.523
> 
> 标签：javascript, google-chrome, google-chrome-extension

是否有解决方案可以在上下文菜单中检测 youtube 视频？我想到了页面 url 上的右键单击事件和正则表达式，但我不知道从哪里开始。我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:20:14.813

您可以从`manifest.json`文件开始：

```
...
"content_scripts": [
{
    "matches": ["*://*.youtube.com","*://*.youtube.com/*"],
    "js": ["contextmenu.js"]
}]
... 
```

然后用`contextmenu.js`文件：

```
document.oncontextmenu = function(){ window.showContextMenu(); return false; };
document.onmouseup = document.onmousedown = function(event){
    if(event.which!==3) return;
    window.showContextMenu();
    return false;
}
window.showContextMenu = function(){
    alert('HERE SHOULD BE THE CONTEXT MENU');
}; 
```

此处有关内容脚本的更多信息：[http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

# python - Python - 这是一个错误吗？相同的脚本在我的 Linux 甚至本地系统中运行但在其他系统中不起作用

> ID：10868936
> 
> 赞同：0
> 
> 时间：2012-06-03T08:30:31.227
> 
> 标签：python, windows-7, pyqt, python-2.7, pyqt4

这与我在本地系统中使用的脚本完全相同。相同的脚本正在另一个位置使用，它也是相同的系统相同的设置。但不工作。

我自己在这方面找不到任何问题。知道它是否是 Python 错误吗？

它的运行时间为 24/7，并在上午 9 点之前和下午 3 点之后显示一个简单的 Gui（PC 有 24 小时时间模式，不是上午或下午）。但从长远来看，它并没有这样做。（在我的本地系统中它完全正确）。我该如何解决这个问题？

```
import sys
import datetime
import time
from PyQt4 import QtCore, QtGui

class Main(QtGui.QMainWindow):
  def __init__(self, parent=None):
    super(Main, self).__init__(parent) 
    flags  = QtCore.Qt.Window
    flags |= QtCore.Qt.FramelessWindowHint
    flags |= QtCore.Qt.WindowStaysOnTopHint
    self.setWindowFlags(flags)     
    self.b = QtGui.QPushButton("9/15 open", self, clicked=self.close)
    self.c = QtGui.QLabel("", self)

  def myRun(self):
    while True:
      time.sleep(2)
      print "[Debug]: " + self.showNowHour() + " " + self.showNowMinute()      
      hour = int(self.showNowHour())
      minute = int(self.showNowMinute())
      if (hour>8 and hour<15):
        print "is open"
        self.hide()
      else:
        print "is close"
        self.show()

  def showNowHour(self):
    now = datetime.datetime.now()
    now = now.strftime("%H")    
    return now

  def showNowMinute(self):
    now = datetime.datetime.now()
    return now.strftime("%M")

if __name__ == "__main__":
  app=QtGui.QApplication(sys.argv)
  myapp=Main()
  myapp.setStyleSheet("background-color: rgb(85, 0, 0);")
  thread = QtCore.QThread()
  thread.run = lambda myapp=myapp: myapp.myRun()
  thread.start()    
  sys.exit(app.exec_()) 
```

**跟进**：

```
 1 import sys
  2 import datetime
  3 import time
  4 from PyQt4 import QtCore, QtGui
  5 
  6 class Main(QtGui.QMainWindow):
  7   def __init__(self, parent=None):
  8     super(Main, self).__init__(parent)
  9     self.b = QtGui.QPushButton("exit", self, clicked=self.close)
 10 
 11   def showNowHour(self):
 12     return datetime.datetime.now().strftime("%H")
 13 
 14   def showNowMinute(self):
 15     return datetime.datetime.now().strftime("%M")
 16 
 17   def myRun(self):
 18     while True:
 19       time.sleep(2)
 20       hour = int(self.showNowHour())
 21       minute = int(self.showNowMinute())
 22       print "[Debug]: " + str(hour) + " " + str(minute)
 23       if (hour>8 and hour<15):
 24         print "is open"
 25       else:
 26         print "is close"
 27 
 28 if __name__ == "__main__":
 29   app=QtGui.QApplication(sys.argv)
 30   myapp=Main()
 31   myapp.show()
 32   thread = QtCore.QThread()
 33   thread.run = lambda myapp=myapp: myapp.myRun()
 34   thread.start()    
 35   app.connect(app, QtCore.SIGNAL("lastWindowClosed()"), app, QtCore.SLOT("quit()"))
 36   sys.exit(app.exec_())
 37   while thread.isAlive():
 38     app.processEvents()
 39 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:40:27.237

不知何故，你对 strftime() 的调用让你失望了。我看不出有什么问题，但这是唯一合乎逻辑的结论。但是当您可以直接从 datetime 对象访问小时时，我不确定为什么要使用 strftime。

尝试用“datetime.datetime.now().hour”替换对 showNowHour 的调用。它返回一个 24 小时范围内的整数

请参阅[http://docs.python.org/library/datetime.html#datetime-objects](http://docs.python.org/library/datetime.html#datetime-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T10:31:09.293

这可能会失败，因为您正在从不同的线程调用 GUI 方法。您应该始终在主线程（也称为“GUI 线程”）中执行 GUI 调用，否则很容易遇到问题。

不是在每个循环上休眠两秒钟的线程，而是将其替换为`QTimer`每 2 秒触发一次的线程。在你的主线中加入这样的东西：

```
timer = QTimer()
timer.timeout.connect(myapp.myPeriodicRun)  # connect the "timeout" signal
timer.start(2000)  # call every 2 seconds 
```

在您的`Main`课程中，将`myRun`方法替换为：

```
def myPeriodicRun(self):
  print "[Debug]: " + self.showNowHour() + " " + self.showNowMinute()      
  hour = int(self.showNowHour())
  minute = int(self.showNowMinute())
  if (hour>8 and hour<15):
    print "is open"
    self.hide()
  else:
    print "is close"
    self.show() 
```

不需要线程不是很好吗！

# node.js - 在 Node.js 中将状态传递给异步函数的最佳方式

> ID：10868937
> 
> 赞同：0
> 
> 时间：2012-06-03T08:30:36.277
> 
> 标签：node.js

我有一个带有异步代码的 Node.js 应用程序，如下所示：

```
var localvar1 = ...;
var localvar2 = ...;
var localvar3 = ...;
// do async database query
conn.query("select ...", function(err, res) {
    // fetch results asynchronously 
    res.fetchAll(function(err, rows) {
        if (rows.length == 0)   // no, data, fetch from external HTTP source
        {
            // fetch from Internet asynchronously 
            https.get(..., function() {
                // ok, got it, now save
                // I need values from original function here ***
                saveData(localvar1, localvar2, localvar3);
            });
        }
    });
); 
```

将 localvar1-3 的值传递给最内层函数的最佳方法是什么？

如果您为此建议一些库，请提供可以与我上面编写的代码一起使用的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:29:06.603

*多亏了闭包，内部函数可以访问外部函数或模块本身中定义的局部变量，因此如果* `localvar1`在等待`https.get()`调用回调时不更改等，您编写的代码将可以工作。如果它们确实发生了变化，您的回调将看到它们的新值，而不是它们在请求时的值。如果这是一个问题，请创建一个新的闭包来“捕获”它们：

```
https.get(..., (function(arg1, arg2, arg3) {
    return function() {
        saveData(arg1, arg2, arg3);
    }
})(localvar1, localvar2, localvar3)); 
```

# javascript - 过滤绑定到 knocout.js 模型中可观察数组的用户列表视图

> ID：10868941
> 
> 赞同：1
> 
> 时间：2012-06-03T08:31:19.040
> 
> 标签：javascript, knockout.js

我的模型中有一个可观察的数组，它只绑定到视图中的 div 列表，我想在该列表上方创建一个文本框，它将过滤掉用户，就像我写的那样：“admin”将只显示用户名称为 admin。

我怎么在淘汰赛中做到这一点？我应该将原始用户列表保存在哪里？我应该如何过滤可观察数组？

我的模型如下所示：可观察数组是 usersWithGroups

```
var groupsViewModelClass = function () {
var self = this;
ko.mapping.fromJS({
    assignedPermissions: [],
    avilablePermissions: [],
    usersWithGroups: [],
    allGroups: []
}, {}, self);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:45:58.613

你可以使用`ko.utils.arrayFilter`函数

例子：

```
//filter the items using the filter text
viewModel.filteredItems = ko.computed(function() {
    var filter = this.filter().toLowerCase();
    if (!filter) {
        return this.items();
    } else {
        return ko.utils.arrayFilter(this.items(), function(item) {
            return ko.utils.stringStartsWith(item.name().toLowerCase(), filter);
        });
    }
}, viewModel); 
```

另见：[http ://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)

# c# - 通过 ping 或 socket 检查代理有什么区别？

> ID：10868943
> 
> 赞同：2
> 
> 时间：2012-06-03T08:31:36.450
> 
> 标签：c#, sockets, proxy, network-programming, ping

我想检查代理是否存在/可用。我已经准备好[这篇](https://stackoverflow.com/questions/2875130/c-sharp-how-to-test-if-proxy-is-working-or-not)文章，但我不明白将 Ping 发送到 proxy( `System.Net.NetworkInformation.Ping`) 或通过 Socket( `System.Net.Sockets.Socket`) 发送有什么区别？有什么缺点或优点吗？还是`Ping`类使用`Socket`类，因此`Ping`只是一个包装器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T08:34:47.423

通过 ping 检查它是否处于活动状态可能不可靠，因为该机器上的防火墙可以配置为不回复 ping 请求（出于安全原因），同时直接检查套接字上的服务，您将确定该服务是否是不是还活着...

直接检查服务并避免 ping 的另一个优点是服务器可以响应 ping 并在线但服务可能已关闭，因此您将得到一个没有任何意义的检查结果。

**不要依赖 ping 检查特定服务的可用性，而是检查服务。**

# c - 我是否被迫使用 pthread_cond_broadcast（通过 pthread_cond_signal）来保证 *my* 线程被唤醒？

> ID：10868946
> 
> 赞同：9
> 
> 时间：2012-06-03T08:32:04.563
> 
> 标签：c, qt, pthreads

在将一些 QT GUI 线程（一个 pthread 线程）与一些 C 代码连接的上下文中，我偶然发现了以下问题：我启动了 QT Gui 线程，并且在我的 C 线程恢复其路径之前，我需要确保所有QT Gui 线程内的图形对象已经被构建并且它们是有效的 QObjects（因为 C 代码将调用`QObject:connect()`这些对象）。

抛开介绍不谈，等待是通过`pthread_cond_wait()`C 线程中的一个 + 一个条件变量 + 一个关联的互斥锁进行的：

```
int isReady=0;
pthread_mutex_lock(&conditionReady_mutex);
while(isReady==0) {
    pthread_cond_wait(&conditionReady_cv, &conditionReady_mutex);
}
pthread_mutex_unlock(&conditionReady_mutex); 
```

另一方面，QT Gui 线程构造它的图形对象，然后用以下方式发出信号：

```
pthread_mutex_lock(&conditionReady_mutex);
isReady=1;
pthread_cond_broadcast(&conditionReady_cv);
pthread_mutex_unlock(&conditionReady_mutex); 
```

如您所见，基本的东西。但问题是：在 Qt Gui 线程中，我一直在使用`pthread_cond_broadcast()`, 以确保我的 C 线程被唤醒，这是肯定的。是的，在我目前的应用程序中，我只有一个 C 线程和一个 Qt Gui 线程，并且`pthread_cond_signal()`应该做唤醒 C 线程的工作（因为它保证至少唤醒一个线程，而 C 线程是唯一的一）。

但是，在更一般的情况下，假设我有三个 C 线程，但我希望唤醒其中的一个（或两个）。一（两个）特定线程。我如何确保这一点？

如果我使用`pthread_cond_signal()`，那可能只会唤醒第三个线程，这将完全错过重点，因为我感兴趣的一个线程没有被唤醒。OTOH，通过 唤醒所有线程，甚至是那些不需要的线程，`pthread_cond_broadcast()`这将是矫枉过正。

有没有办法告诉`pthread_cond_signal()`唤醒哪个线程？

或者，我是否应该引入更多条件变量以便对被唤醒的线程组有更精细的粒度`pthread_cond_broadcast()`？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:00:04.433

是的，如果您需要唤醒特定线程，那么您要么需要广播唤醒，要么为该线程使用单独的条件变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T14:06:53.200

## 不安全的举止

直接从不同的线程调用任何通用 QWidget 方法是不安全的，因为 Qt 的行为和底层 C++ 生成的代码未定义。它可能会发动核第一次打击。你被警告了。因此，除非您使用 Qt 提供的安全线程间通信，否则您不能从单独的线程调用`QWidget::update()`、或任何其他此类方法。`QLabel::setText(...)`

### 错误的

```
// in a separate thread
widget->update();
widget->setText("foo"); 
```

### 正确的

```
// in a separate thread
// using QMetaObject::invokeMethod(widget, "update") is unoptimal
QCoreApplication::postEvent(widget, new QEvent(QEvent::UpdateRequest),
                            Qt::LowEventPriority);
QMetaObject::invokeMethod(widget, "setText", Q_ARG(QString, "foo")); 
```

## 关于线程间通信

与包含一些 QObjects 的线程进行通信的一种简单方法是通过静态`QCoreApplication::postEvent()`方法向其发布事件。GUI 线程是一大堆 QObject 所在的线程的常见示例。使用`postEvent()`始终是线程安全的。*这个方法根本*不关心它是从哪个线程调用的。

Qt 中散布着各种内部使用的静态方法`postEvent()`。它们的关键特征是它们也将是静态的！家庭就是这样的`QMetaObject::invokeMethod(...)`例子。

当您将信号连接到位于不同线程中的 QObject 中的槽时，将使用排队连接。通过这样的连接，每次发出信号时，`QMetaCallEvent`都会构造 a 并将其发布到目标 QObject，使用 - 你猜对了 - `QCoreApplication::postEvent()`。

因此，将来自某个非 GUI 线程中的 QObject 的信号连接到`QWidget::update()`插槽是安全的，因为在内部，这样的连接用于`postEvent()`跨线程屏障传播信号。GUI 线程中的事件循环将拾取它并执行`QWidget::update()`对标签上的实际调用。完全线程安全。

## 优化

跨线程使用信号槽连接或方法调用的唯一问题是 Qt 不知道您的更新应该被压缩。每次您`QWidget::update()`在单独的线程中发出连接到的信号时，或者每次您调用 时`invokeMethod`，都会有一个事件发布到事件队列中。

进行跨线程更新的惯用方法（如果未记录）是：

```
QApplication::postEvent(widget,
                        new QEvent(QEvent::UpdateRequest),
                        Qt::LowEventPriority); 
```

UpdateRequest 事件被 Qt 压缩。在任何时候，特定小部件的事件队列中只能有一个这样的事件。因此，一旦您首次发布此类事件，后续事件将被忽略，直到小部件实际使用该事件并重新绘制（更新）自身。

那么，我们的各种小部件设置调用怎么样，例如`QLabel::setText()`？如果我们也能以某种方式压缩它们，那肯定会很酷吗？是的，这当然是可能的，但我们必须将自己限制在公共 Qt 接口上。Qt 在这里没有提供任何明显的东西。

`QMetaCallEvent`关键是在发布另一个之前从小部件的事件队列中删除任何待处理。仅当我们确定与给定小部件的排队信号槽连接仅来自我们时，这才是安全的。这通常是一个安全的假设，因为 GUI 线程中的所有内容都使用自动连接，并且默认情况下直接调用插槽而不将事件发布到 GUI 线程的事件队列。

就是这样：

```
QCoreApplication::removePostedEvents(label, QEvent::MetaCall);
QMetaObject::invokeMethod(label, "setText", Q_ARG(QString, "foo")); 
```

请注意，出于性能原因，我们使用插槽的规范化表示：没有额外的空格，并且全部`const Type &`转换为简单的`Type`.

注意：在我自己的项目中，我有时会使用私有的 Qt 事件压缩 API，但在这里我不提倡这样做。

## 后记

C 代码不应该调用`QObject::connect`，我认为这是糟糕设计的标志。如果您想从 C 代码到 Qt 代码进行通信，请使用静态`QCoreApplication::postEvent(...)`（当然，适当地包装/暴露给 C）。要以另一种方式进行通信，您可以在线程中手动编写事件队列。至少，“事件队列”将只是一个固定结构，但重点是使用互斥锁来保护对它的访问。

糟糕设计的另一个迹象是，GUI 类外部的代码依赖于该类本身的各个 UI 项。您应该在整个 UI 类（例如您的`MainWindow`）上提供一组信号和插槽，并将它们转发到内部的相关 UI 元素。您可以`connect()`信号到信号，但不能从槽到槽——您必须手动编码转发槽。

# javascript - 内容未添加到附加的文本区域之一中

> ID：10868948
> 
> 赞同：0
> 
> 时间：2012-06-03T08:32:50.457
> 
> 标签：javascript, jquery

我在下面有一个函数，当单击“添加”按钮时将内容添加到单个文本区域时，if 语句起作用：

```
function addwindow(questionText) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainTextarea').val(questionText); 
        } else { 
            $(plusbutton_clicked).parent('td').next('td.question').find('textarea.textAreaQuestion').val(questionText);
            }

    $.modal.close(); 
    return false;
} 
```

下面是单个文本区域的代码，它是加号按钮：

```
<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

<div id="detailsBlock">
<table id="question">
<tr>
    <td rowspan="3">Question:</td> 
    <td rowspan="3">
        <textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea>
    </td>
</tr>
</table>

<table id="plus" align="center">
<tr>
<th>
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
</th>
</tr>
</table>
</div>
</form> 
```

问题是在下面附加的文本区域之一中添加内容时，else 语句不起作用。我想要的是，如果用户单击附加文本区域之一旁边的加号按钮并通过单击“添加”按钮添加内容，则与单击的加号按钮位于同一行的文本区域将添加内容。为了做到这一点，我需要改变什么？

下面是显示附加的文本区域和加号按钮的代码：

```
 var plusbutton_clicked;

 function insertQuestion(form) {

var $tbody = $('#qandatbl > tbody'); 
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $plusrow = $("<td class='plusrow'></td>");
var $question = $("<td class='question'></td>");

 $('.questionTextArea').each( function() {

 var $this = $(this);
var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

 $question.append($questionText);

});

 $('.plusimage').each( function() {

var $this = $(this);
var $plusimagerow = $("<a onclick='return plusbutton();'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

$plusrow.append($plusimagerow);

 });

$tr.append($plusrow);
$tr.append($question);
$tbody.append($tr);                     

} 
```

你可以[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)查看申请。请按照以下步骤使用该应用程序：

1.  单击“添加问题”按钮，然后将在新行中添加一个文本区域。
2.  单击刚刚添加的表格行中的“绿色加号”按钮，将出现一个模式窗口。
3.  在模态窗口中显示一个搜索栏，在搜索栏中输入“AAA”并单击“搜索”按钮
4.  搜索结果将出现，单击“添加”按钮添加一行。您会发现模态窗口已关闭，但“问题”字段中的内容未添加到您单击绿色加号按钮的行内的文本区域中

如果您在顶部 textarea （水平线上方的那个）中执行了这些步骤，那么它确实有效，但它不适用于您刚刚添加的 textarea

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:24:05.627

您没有传递`plusbutton()`函数期望作为参数的元素，这就是函数找不到兄弟元素来获取其内容的原因。尝试：

```
<a onclick='return plusbutton(this);'> 
```

# opengl - sampler2D 存储什么？

> ID：10868958
> 
> 赞同：35
> 
> 时间：2012-06-03T08:35:15.780
> 
> 标签：opengl, glsl

我在 中阅读了纹理示例`OpenGL 2.1`。片段着色器如下所示：

```
#version 120

uniform sampler2D texture;
varying vec2 texcoord;

void main(void)
{
    gl_FragColor = texture2D(texture, texcoord);
} 
```

`texcoord`是从顶点着色器传递的。

使用以下 C++ 渲染代码：

```
void render()
{
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, texture_id);
    glUniform1i(unf_texture, 0);
} 
```

我对一些事情感到困惑。我有一个问题：

1.  在片段着色器中，纹理被传递一个零值（通过`glUniform1i()`）。值真的为零吗？价值是别的吗？

2.  真的`glActiveTexture()`需要通话吗？

3.  为什么我们传入一个零值`glUniform1i()`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-03T09:12:33.233

`sampler2D`绑定到一个[纹理](http://www.opengl.org/wiki/Texture#Texture_image_units)单元。该`glUniform`调用将其绑定到纹理单元零。仅当`glActiveTexture()`您要使用多个纹理单元时才需要调用（因为`GL_TEXTURE0`无论如何都是默认值）。

# android - Osmdroid - 从 ZIP 打开压缩瓷砖？

> ID：10868959
> 
> 赞同：1
> 
> 时间：2012-06-03T08:35:19.070
> 
> 标签：android, zip, osmdroid

我来自离线地图的图块正在增加 ZIP 中允许的最大文件数（65535 个文件），所以我正在考虑压缩一些文件。

OSMdroid Mapnik 格式的格式为 X/Y/tile.png。其中 X 是缩放，Y 是列，其中 tile 是地图中所需缩放的行。我正在考虑压缩 X 或 Y，然后将它们一起压缩到一个 ZIP 文件中。问题是，当 Osmdroid mapView 在 ZIP 文件中时，它们看不到我的图块。你知道，OSMdroid 在哪个类中处理打开图块？我想我可能不得不在代码中改变这种行为。你遇到过什么问题吗？或者有什么简单的方法可以 mapView 在 ZIP 中查看压缩图像？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:05:24.680

如果您想使用 Zip 文件并且它增加了大小限制，只需解压缩文件并将其拆分为两个或多个 zip 文件。为此，您可以将一些缩放级别图块移动到其他 zip 文件。我遇到了同样的问题，并通过在另一个文件中移动缩放级别 16 到 18 的图块来解决这个问题。但我认为在小型设备中最好使用解压缩的瓷砖。它可能会增加10倍以上的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T13:01:20.490

使用sqlite。它更快，并且没有大小限制。

[https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/ZipFileArchive.java](https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/ZipFileArchive.java)

更多存档提供商在这里 [https://github.com/osmdroid/osmdroid/tree/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules](https://github.com/osmdroid/osmdroid/tree/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules)

我不认为限制是 osmdroid 特定的东西。我认为这是基于 osmdroid 打开文件并通过 TOC 查找特定文件的方式的 java 和/或 android 限制。

# c# - 异步任务问题 - 对表单的跨线程访问

> ID：10868960
> 
> 赞同：0
> 
> 时间：2012-06-03T08:35:45.713
> 
> 标签：c#, task-parallel-library, async-ctp

**简化的 7 个步骤：**

1.  [MainForm] 用户点击 btnAdd 按钮
2.  将显示 AddForm
3.  [AddForm] btnCreate 被点击
4.  在 btnCreate_Click 中，我们使用等待器运行 AddProductProcess *** 我们将在单击后立即关闭 AddForm ***并显示 MainForm
5.  在 AddProductProcess 中，我们使用 awaiter 运行 AddProduct
6.  我们运行 AddProduct 它将为我们完成漫长的过程并填充应用程序级静态集合：ProductCollection
7.  [MainForm] 处理 AddProduct 完成后，我们将在 lstProducts 列表框中显示已添加的产品项。

* * *

**5 段代码：**

```
private void btnAddProduct_Click(object sender, EventArgs e)
{
    FormAddProduct fap = new FormAddProduct(SelCol);
    fap.ShowDialog();
}

private async void btnCreate_Click(object sender, EventArgs e)
{
    string stProduct = txtProductName.Text;

    await ProductCollection.AddProductProcess(stProduct);
    this.Close();
    MainForm.Show();
}           

public async Task AddProductProcess(string pName)
{
    await Task.Factory.StartNew(() => AddProduct(pName));
    // This would be our heavy process
}   

public void AddProduct(string pName)
{
    ProductItem p =  new ProductItem();
    p.Name = pName ;
    p.Position = Count;
    p.GetInfo(); // and some similar heavy methods are inside this
    //ProductCollection.Add(p);
}

public void Add(Product product)
{
    MainForm.lstProduct.Add(product.Name);
} 
```

“MainForm.lstProduct.Add”导致`invalid cross-thread operation`错误

我需要在其上添加任务完成通知，以便以正确的方式将结果添加到 ListBox 你能帮我实现它吗？

我应该将这行代码传递给任务完成后立即执行的代码。

ProductCollection.Add(p);

对这段代码和主题的任何想法表示赞赏，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:32:26.347

您在某些时候使用 async/await 模式，但并不重要......

```
public async Task AddProductProcess(string pName)
{
    await Task.Factory.StartNew(() =>
        AddProduct(pName));
}   

public void AddProduct(string pName)  // not async
{
    ...
    ProductCollection.Add(p);
}

public void Add(Product product)  // not async
{
    MainForm.lstProduct.Add(product.Name);
} 
```

最后一个方法只是在任务上运行，所以它是一个“正常”的跨线程错误。您可以使用正常方式解决它，`MainForm.Invoke(...)`但您也可以删除所有 async 和 await 关键字。

要正确使用 async/await，您必须将其更改为：

```
public async Task AddProductProcess(string pName)
{
    await AddProduct(pName);
}   

public async void AddProduct(string pName)  
{
    ProductItem p =  new ProductItem();
    p.Name = pName ;
    p.Position = Count;
    await p.GetInfo();    // assuming this is doing the heavy work, make async
    ProductCollection.Add(p);
} 
```

# c - 为什么 fputc 和 fputs 输出不会立即引起注意？

> ID：10868962
> 
> 赞同：0
> 
> 时间：2012-06-03T08:36:12.463
> 
> 标签：c

我正在编写一个 C 程序，但没有看到`fputc`or`fputs`调用的结果。我需要帮助来理解为什么会这样。

```
#include <stdio.h>
int main(void)
{
  FILE *stream;
  int file_state;
  int input1=0;
  stream = fopen("data3.txt", "w");
  if (stream == NULL)
    puts("file open error");   
  puts("input data");
  while (input1 != EOF)
    {
      input1=fgetc(stdin);
      putchar(input1);
      //fputc(input1, stdout);
      //fprintf(stream, "tee");
      //fputc('A', stream);
      //fputs("sass", stream);
    }
  file_state=fclose(stream);
  if(file_state==EOF)
    puts("file close error");
  return 0;
} 
```

问题是，`fputc`不能`fputs`正常工作。我在 mac lion 64 位上，并在终端上使用`make`and 。`./file_name`

在while循环中，如果我写

```
putchar(input1); 
```

它输出（打印）到终端。但是，所有注释行都不起作用。

```
fputc(input1, stdout); 
```

还会在终端上打印一个空行。

该程序创建一个文件，但似乎完全是空的。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T08:42:54.310

您是否在文件仍处于打开状态时查看文件的内容？请注意，文件写入是缓冲的，因此在关闭/刷新流之前您可能无法看到数据。

如果是这种情况，您可以尝试`fflush(stream)`在循环的最后一行调用。当然，或者等到文件关闭。

另请注意，如果您使用 Ctrl-C 结束程序，则数据可能永远不会被写入！

不同之`stdout`处在于这个流通常是*行缓冲*的，这意味着只要你输出一个换行符，流就会自动刷新，但普通流不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T11:42:42.217

可能是您遇到问题，因为某些字符串不是以 '\0' 结尾的空值。

```
stream = fopen("data3.txt\0", "w\0");
if (stream == NULL)
  puts("file open error\0");   
puts("input data\0");
while (input1 != EOF)
  {
    input1=fgetc(stdin);
    putchar(input1);
    //fputc(input1, stdout);
    //fprintf(stream, "tee\0");
    //fputc('A', stream);
    //fputs("sass\0", stream);
  }
file_state=fclose(stream);
if(file_state==EOF)
  puts("file close error\0");
return 0; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2022-01-12T18:37:26.077

我有同样的问题。您需要使用文件的完整路径。转到 Finder 并在双击文件后按选项键获取文件的路径名。然后它应该工作。

让我知道这是否是问题所在。

# codeigniter - 在 Cisco 路由器上执行 SSH 命令。Codeigniter SSH 库

> ID：10868964
> 
> 赞同：0
> 
> 时间：2012-06-03T08:36:40.340
> 
> 标签：codeigniter, ssh, cisco

我有一个小问题。我正在将 Codeigniter 与 Shuky 编写的 SSH 库一起使用（https://bitbucket.org/quicktips/codeigniter-ssh2-library/src/a444968345ba/SSH.php——您可以通过以下链接查看代码）。

与 SSH 相关的所有内容都可以在其他设备上正常工作，但是当我尝试使用这个库并在 Cisco 设备上执行命令时，什么也没有发生（命令不执行）。我知道连接成功，但是我不能执行任何命令。

当我尝试在 Cisco 设备上通过 SSH 运行和执行命令时，我收到此错误：

```
A PHP Error was encountered

Severity: Warning

Message: stream_set_blocking() expects parameter 1 to be resource, boolean given

Filename: libraries/SSH.php

Line Number: 128

A PHP Error was encountered

Severity: Warning

Message: fread() expects parameter 1 to be resource, boolean given

Filename: libraries/SSH.php

Line Number: 129 
```

在库中，这些行如下所示：

```
 /**
 * Get stream data
 *
 * @access privte
 * @return bool
 */
function _get_stream_data($stream) {
    stream_set_blocking( $stream, true );
    while( $buf = fread($stream,4096) ) {
        $this->data .= $buf.'~';
    }
    return TRUE;
}    

line 128 - stream_set_blocking( $stream, true );
line 129 - while( $buf = fread($stream,4096) ) { 
```

也许你们知道问题出在哪里？

感谢您的时间和答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:49:06.313

函数 _get_stream_data 在以下上下文中的库中使用：

```
 if($this->_is_conn()) {
        $stream = @ssh2_exec($this->conn_id, $command);
        return $this->_get_stream_data($stream);
  } 
```

如果成功建立了 ssh 连接，则`$stream`返回的值是资源，如果出现错误，则返回布尔值**FALSE**。`ssh2_exec`

 **不幸的是，您无法使用`ssh2`PECL 库进行太多错误处理。最简单的是输出 的值`$command`。并从命令行执行相同的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:15:22.357

尝试使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。尽管它目前受到支持，但它还支持日志记录，这可能会帮助您 - 或作者 - 弄清楚发生了什么（假设 phpseclib 有同样的问题，它可能不会！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T00:43:39.013

您必须先运行命令

```
$this->ssh->execute($cmd); 
```

然后，您可以像这样查看流：

```
echo $this->ssh->data; 
```**

# php - 创建一个界面来编辑 PHP 变量

> ID：10868974
> 
> 赞同：1
> 
> 时间：2012-06-03T08:38:59.357
> 
> 标签：php, html, forms, variables

我在我的一个项目中使用 PHP 变量，并且我有一个名为 variables.php 的文件，它存储所有变量值。

```
<?php
$txt="Hello World!";
$x=16;
?> 
```

我想创建一个界面来编辑该文件的变量，而不是直接在文本编辑器中编辑它 界面，我的意思是简单的文本和逻辑字段......一个表单。我搜索了它，但我不知道从哪里开始 有人可以给我一个线索，告诉我我应该做什么来创建提到的东西。

*注意：我不想使用数据库*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:48:55.460

我发现为此目的使用数组变量`var_export`并将其值存储在另一个 .php 文件中更容易。

```
$a = array('var' => 'test', 'nr' => 4);

file_put_contents('myvars.php', '<?php return ' . var_export($a, true) . '; ?>', LOCK_EX); 
```

然后再次获取数组：

```
$a = include('myvars.php'); 
```

保存到 .php 文件具有速度优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:55:04.840

[制作一个简单的表格怎么样，当你处理它时，使用http://php.net/manual/en/function.fwrite.php](http://php.net/manual/en/function.fwrite.php)将数据写入 variables.php 文件

请注意，您需要为此 php 文件提供写入权限，这会带来风险。有不同的方法可以使其安全。确保权限不是全局的。确保您使用密码。另一种解决方案是将变量不直接写入php文件而是写入文本文件，并使php文件从那里获取变量......

告诉我你是否有进一步的帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T08:57:05.960

您可以创建一个 XML 文件，该文件定义应该能够编辑的变量以及它们的类型和值：

```
<xml>
    <var name="txt" type="title" php="string">Hello World!</var>
    <var name="16" type="integer" php="int">16</var>
</xml> 
```

然后，您可以创建一个[XML 转换](http://php.net/manual/en/book.xsl.php)，将该 XML 转换为 HTML 表单。

然后，您可以创建一个 XML 处理来解析表单提交并将新值存储到 XML 文件中。

然后，您可以创建第二个 XML 转换，该转换能够将该信息存储为带有变量表示法的 PHP 代码。

然后，您的主代码可以包含该文件。

# php - 如何在文本而不是 HTML 中生成 PHP 错误

> ID：10868976
> 
> 赞同：20
> 
> 时间：2012-06-03T08:39:05.447
> 
> 标签：php, error-handling, login-script

> **可能重复：**
> [如何告诉 PHP 将异常转储为原始文本而不是 HTML？](https://stackoverflow.com/questions/8941243/how-can-i-tell-php-to-dump-exceptions-as-raw-text-instead-of-html)

我正在尝试使用 C# 和 php 制作登录脚本，我计划将其作为一键安装出售，因此我需要它来防错。我故意尝试在设置中出错，但是每当我的 php 脚本出错时，当我只想要一个字符串输出时，它就会有一个带有错误的 HTML 块输出（请参阅图片）。

这是我正在使用的代码

```
// We will now set up our MySQL database login. The values should be self-explanatory. 
$sqlhost = "localhost";
$sqlusername = "unity";
$sqlpassword = "mypass123";

//we will now connect to our database
$sqlcon = mysql_connect($sqlhost, $sqlusername, $sqlpassword) or die("Could not connect to database: " . mysql_error()); 
```

当我拥有所有信息时，它工作正常，其余代码运行没有错误。但是，如果我的密码错误或用户无权访问，那么我会收到此错误

![我试图避免的错误](../Images/21727a81bcff1c10c9c4b97af8a02083.png)

我从该页面检索到信息，它需要作为计划文本发送才能正确显示。我的意思是，任何 HTML 标记（例如`<div>, <br>, <a>,`etc）通常只会使文本输出看起来很糟糕。我希望它只在页面底部显示文本，因为它会记录错误本身。我不需要它记录两次，也不需要它被格式化。我需要它以纯可读文本的形式出现，这样如果用户有错误，他们可以将短文本发送给我，我将能够引导他们完成修复。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-03T10:06:00.173

PHP 是否显示纯文本或 html 错误取决于您的[php.ini 配置](http://www.php.net/manual/en/errorfunc.configuration.php#ini.html-errors)：

> **`html_errors`** `boolean`
> 
> 关闭错误消息中的 HTML 标签。HTML 错误的新格式会生成可点击的消息，将用户引导至描述错误或导致错误的功能的页面。这些引用受 docref_root 和 docref_ext 的影响。

该设置[可](http://www.php.net/manual/en/function.ini-set.php)设置为`PHP_INI_ALL`，这意味着任何地方，包括您的脚本。所以要禁用html错误

```
ini_set('html_errors', false); 
```

在脚本的开头。

# iphone - iPhone 的 pdf 阅读器

> ID：10868977
> 
> 赞同：1
> 
> 时间：2012-06-03T08:39:18.913
> 
> 标签：iphone, objective-c, ios, ipad

我是 iPhone 的新手，我想创建应用程序来打开像 Adob​​e Reader 这样的 pdf 文档并包含许多功能，例如：

*   设置和获取书签
*   允许用户在任何段落中添加评论
*   允许用户添加亮点
*   允许搜索单词（支持阿拉伯语和英语）
*   允许树叶运动（可选）

有什么代码可以做到这一点吗？

注意：我试过 fastpdfkit 但它不允许添加评论和突出显示并且不支持阿拉伯语搜索

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-03T20:52:47.720

如果您愿意，我有一个高级和低级 PDF 库。它是 C++，这不是您想要的，但我已经知道我的几个用户正在寻找 IOS 适配，并且其中一个正在努力。

如果您准备完成（适应）任务，它可能对您有用。无论如何，如果有兴趣，请在[www.pdfhummus.com](http://www.pdfhummus.com)上查看。

# jquery - jquery autocomplete _renderItem 添加图片标签

> ID：10868978
> 
> 赞同：2
> 
> 时间：2012-06-03T08:39:44.247
> 
> 标签：jquery, jquery-ui, autocomplete

我正在尝试使用 jquery 自动完成和自定义 html 在我的下拉列表中添加图像。出于某种原因，当我设置图像时，输入名称时自动完成看起来很好（我看到图片和标签很好），但是当我向下箭头选择时，我得到一个错误，说 ui.item 是没有为焦点和选择事件定义。如果我遵循示例页面中显示的标准格式，一切正常。

（来自 jquery doc 的那个 - 按预期工作）

```
.append( "<a>" + item.label + "<br>" + item.value + "</a>" ) 
```

但是当我使用这个来显示图像时，自动完成列表会显示图片，但是焦点和选择事件不起作用

```
$( "#friends" ).autocomplete({
    minLength: 2,
    source: friend_data,
    delay: 0,
    autofocus: true,
    focus: function(event, ui) {
        $( "#friends" ).val( ui.item.label );
        return false;
        },
    select: function( event, ui ) {
        $( "#friends" ).val( ui.item.label );
        return false;
        }    
    })
    .data( "autocomplete")._renderItem = function( ul, item ) {
        var fb_pic_path = '<img src="http://graph.facebook.com/' + item.value + '/picture?type=square">' ;
        console.log(fb_pic_path);
        return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append(  fb_pic_path +  item.label  )
        .appendTo( ul );
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T09:33:42.443

啊。。想通了。需要锚。

```
.append( "<a>" + fb_pic_path + item.label + "</a>" ) 
```

现在工作正常。

# php - sql插入一堆具有层次结构的记录

> ID：10868979
> 
> 赞同：0
> 
> 时间：2012-06-03T08:40:23.520
> 
> 标签：php, mysql, insert

假设有一个 PHP 方法，它应该在每次调用时将几行插入 MySQL 数据库。不幸的是，这些记录代表一个层次结构，我想通过为每个级别添加一个键来保持这个层次结构。一个示例可能如下所示：

```
id    hier_key_1    hier_key_2    value
0     0             0             val1
1     0             0             val2
2     1             0             val3
3     1             0             val4
4     2             1             val5
5     2             1             val6 
```

我目前的解决方案是这样的：

1.  在 hier_key_1 表中插入新记录
2.  选择这条记录的自增id
3.  在 hier_key_2 表中插入新记录
4.  选择这条记录的自增id
5.  在表中插入记录，所有值和 hier_key_1 和 hier_key_2 作为指向其表的外键

有没有办法简化这一点，即插入方法是否提供任何类型的返回值，包括插入数据的键？或者我应该尝试在我的 PHP 方法中生成唯一键并在之后检查重复项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:58:18.737

是的，有：

PHP：

```
$query = "INSERT INTO hier_key_1(hier_key_1) VALUES (0)"); 
if( !mysql_query($query) ) 
{/*insert failed*/} 

$id_key_1 = mysql_insert_id();

//... and so on... 
```

MYSQL - SQL

```
INSERT INTO hier_key_1(hier_key_1) VALUES (0); SET @id_key_1 =
LAST_INSERT_ID();

INSERT INTO hier_key_2(hier_key_2) VALUES (0); SET @id_key_2 =
LAST_INSERT_ID();

INSERT INTO table_name(id, hier_key_1, hier_key_1,value) VALUES (0,
@id_key_1,@id_key_2,value1); 
```

等等..

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T08:57:49.797

我将通过在表中添加一个额外的字段来定义层次结构：

```
id |   parent_id | value
 0 |        NULL | val1
 1 |        NULL | val2
 2 |           1 | val2-1
 3 |           1 | val2-2 
```

任何行的`parent_id`指向`id`其父行的 ；`parent_id`顶级项目的 有一个值`NULL`。

# scala - Spock 嘲笑 Akka 的 ActorRef

> ID：10868983
> 
> 赞同：8
> 
> 时间：2012-06-03T08:41:12.950
> 
> 标签：scala, groovy, akka, spock

我试图为一个类做一个 Spock 测试，我需要检查它是否向演员发送了一条消息（比如`statActor`）。我知道 Akka 有专门的集成测试库，但对于非常简单的测试来说似乎太多了。所以，我试过：

```
setup:
def myActor = Mock(ActorRef)
myService.statActor = myActor
when:
myService.startStats()
then:
1 * myActor.tell(_) 
```

目标方法如下所示：

```
void startStats() {
    Date x = null
    // prepare some data, fill x with required value
    this.statActor.tell(x)
} 
```

我以为 Spock 会使用方法创建模拟`tell`。但在运行此测试后，我得到：

```
java.lang.ClassCastException: akka.actor.ActorRef$$EnhancerByCGLIB$$80b97938 cannot be cast to akka.actor.ScalaActorRef
    at akka.actor.ActorRef.tell(ActorRef.scala:95)
    at com.example.MyService.startStats(MyService.groovy:32) 
```

为什么它调用真正的`ActorRef`实现？某种与 Scala 的不兼容？有什么方法可以模拟这样的课程吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T05:48:34.593

唯一受支持的模拟 ActorRef 的方法是创建一个 TestProbe：

```
// "system" is an ActorSystem
final TestProbe probe = TestProbe.apply(system);
final ActorRef mock = probe.ref; 
```

没有比这更容易或更简单的了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-02T01:09:57.737

在 specs2 中，您可以执行以下操作：

```
val mockedActorRef = spy(TestProbe().ref) 
```

然后正常使用。

# php - 在 html 文件中使用 php

> ID：10868987
> 
> 赞同：-5
> 
> 时间：2012-06-03T08:41:57.637
> 
> 标签：php, html

我想做以下任务，首先我创建了这个html文件，即form.html

```
<html>
<head>
<title>please insert  your personal information </title>
<head>
<body>
<form  action="table.html"method="post">
ID : <input type="text" name="ID" value=" " > </br>
FIRST_Name : <input type="text" name="FIRST_Name" value=" "/></br>
Last_name :<input type="text" name="Last_name" value= " " /></br>
job_id :<input type="text" name="job_id" value=" " /></br>
JOB_Description : <input type="text" name="JOB_Description" value=" " /></br>
Locations : <input type="text" name="locations" value=" "></br>
<input type="submit"   name="submit" value="submit"/></br>

</form>
</body>
</html> 
```

我的目标是，当用户输入他/她的信息时，它应该重定向到另一个文件，在该文件中创建表格表单并将此信息写入此表中，这样每次有人填写此字段时，此表都会增长并且不会覆盖现有信息，所以我对如何在表格中执行此操作感兴趣。HTML（这是我的 form.html 在单击提交按钮后应该去的页面）我也有兴趣将我的表格保存在 html 扩展名或 php 扩展名中？我问它的原因是我可以在没有 php `$_POST`方法的情况下从另一个 html 文件访问一个 html 文件中声明的变量吗？或者我可以在表格中使用 php。html 仅用于变量访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:49:44.047

html 本身没有变量。为了保存数据，您将需要一种编程语言，例如 PHP 或带有 Python 的 GAE。您可以将数据保存到数据库中，也可以使用 php.ini 将数据保存到一个简单的文件中。然后，您可以使用简单的“for”循环将文件中的数据加载到表中。

就像您提到的那样，您将从 $_POST 获取数据并将其保存到文件中。(data.txt) 然后以表格的形式显示data.txt。

保存数据：

```
<?php

$filename = "someData.txt";
$text = $_POST['form_field_name_here'] . ' ' .  $_POST['second_field_name_here']; //just continue with as many fields as necessary    
$fp = fopen ($filename, "a+");
if ($fp) {
    fwrite ($fp, $text);
    fclose ($fp);
} 
```

要从文件中打印表格，您可以使用这样的 for 循环：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <table id="myTable">
        <?php // PHP code starts here
        $f = fopen("someData.txt", "r");
        while (($line = fgets($f)) !== false) {
            echo "<tr>";
            $cells = explode(" ", $line);
            foreach ($cells as $c) {
                echo "<td>" . htmlspecialchars($c) . "</td>";
            }
            echo "<tr>\n";
        }
        fclose($f); 
        // end of PHP code
        ?>
    </table>
</body>
</html> 
```

这是你的 style.css

```
#myTable  
{
    border: solid 1px black;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T08:53:27.603

使用 GET 而不是 POST 方法并使用 JavaScript 处理第二页上的数据，请参见此处：

[直接从 JavaScript 访问 GET？](https://stackoverflow.com/questions/1586330/access-get-directly-from-javascript)

# ruby - Ruby 中的小写星期几

> ID：10868988
> 
> 赞同：3
> 
> 时间：2012-06-03T08:42:12.367
> 
> 标签：ruby

在 Ruby 1.9 中有一个[丰富的`strftime`函数](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)可以支持许多不同的格式。我可以理解如何分别使用and来获取`Sun`和`SUN`作为星期几，但我想获取. 有什么方法可以用来获得小写的星期几？`%a``%^a``sun``strftime`

注意：我特别想要一个`strftime`解决方案，以便我可以将格式放入（并且仅放入）语言环境文件中，然后`l`在我的视图中单独使用该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T09:16:54.900

只需将它与downcase链接

```
t = Time.now
t.strftime­("%a").dow­ncase 
```

我知道将它与格式的其他部分连接起来会很痛苦，但我很确定你不能单独使用标志来做到这一点。有一个 case change 标志`#`，但它不能用于反转`^`or 本身的结果，所以

```
t.strftime­("%##a %#^a") 
```

只会打印`SUN SUN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T00:30:26.040

我最终使用 css 将其变为小写，并将其与本地化版本相结合。

# email - 使用 wp_mail，仅在 Gmail 帐户中未收到电子邮件（Yahoo 和 Hotmail 都可以）

> ID：10868991
> 
> 赞同：3
> 
> 时间：2012-06-03T08:43:02.350
> 
> 标签：email, wordpress, gmail

我在 WordPress 中创建了一个新的自定义页面来测试发送电子邮件，这是我的代码......

```
<?php
/*
Template Name:testemail
*/

get_header();
add_filter( 'wp_mail_from_name', 'my_mail_from_name' );
add_filter('wp_mail_content_type',create_function('', 'return "text/html";'));
function my_mail_from_name( $name )
{
    return 'nameeeeee';
}

wp_mail('salwaieh@gmail.com', 'The subject1', '<p>The <em>HTML</em> message</p>');
wp_mail('salwaieh2012@gmail.com', 'The subjectx', '<p>The <em>HTML</em> message</p>');
wp_mail('salwaieh@hotmail.com', 'The subject2', '<p>The <em>HTML</em> message</p>');
wp_mail('salwaieh@yahoo.com', 'The subject3', '<p>The <em>HTML</em> message</p>');
$to      = 'salwaieh@yahoo.com';
$subject = 'The subject4';
$message = 'The subject4 The subject4 The subject4The subject4 The subject4 The subject4';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers);

$to      = 'salwaieh2012@gmail.com';
$subject = 'xxxxxxxxx';
$message = 'The subject4 The subject4 The subject4The subject4 The subject4 The subject4';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers);

get_footer(); ?> 
```

我收到了所有发送到 Yahoo 和 Hotmail 帐户的电子邮件，但为什么我在 Gmail 收件箱中找不到任何电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:53:09.270

许多电子邮件服务最近对垃圾邮件非常严格，所以我的所有 Wordpress 联系表格都遇到了问题。我最终用 wp-smtp 插件解决了这个问题。虽然它更像是一种解决方法而不是实际的解决方案......