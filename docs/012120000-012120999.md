# StackOverflow 问答 12120000-12120999

# java - Java 程序中的字符串大小是否有限制？

> ID：12120002
> 
> 赞同：12
> 
> 时间：2012-08-25T07:15:41.040
> 
> 标签：java, string, memory

> **可能重复：**
> [Java 中字符串的最大长度 - 调用 length() 方法](https://stackoverflow.com/questions/816142/strings-maximum-length-in-java-calling-length-method)

我有一个字符串定义为

字符串 xx

我可以分配的字符数有限制吗？

2) 我将用户输入分配给这个字符串 xx。70% 的时候人们只说一个字。有时他们会说一个大句子，所以想知道可以吗？还是有更好的java实践？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-25T07:19:25.467

一个您可以搜索的常见问题，但无论如何我都会再次回答。

> 我可以分配的字符数有限制吗？

它的 Integer.MAX_VALUE 或 2^31-1 或大约 20 亿。在达到此大小之前，您更有可能遇到内存问题。例如，您需要 4 GB 的字符串和 4 GB 的空间来创建它。

> 我将用户输入分配给这个字符串 xx。70% 的时候人们只说一个字。有时他们会说一个大句子，所以想知道可以吗？

我怀疑 JK 罗琳的所有作品都可以放在一个字符串中。

> 还是有更好的java实践？

我建议你让事情尽可能简单。分配一个字符串引用非常简单。

# c# - 向 c# datagridview left headerstyle 列添加操作

> ID：12120004
> 
> 赞同：0
> 
> 时间：2012-08-25T07:16:04.150
> 
> 标签：c#, .net, wpf

如何将`onClick`操作添加到具有三角形并且是默认添加的列的左列。我发现了如何使用它来隐藏它，`"RowHeadersVisible=false"`但我不想隐藏它我只是希望该`onClick`列的 执行相同的操作，就像您单击同一行中的不同列一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:03:16.063

我明白了，这是行动

```
private void datagrid1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
{
   if(e.ColumnIndex == -1)
    {
    }
} 
```

# android - 将 pptp vpn 与 android vpnservice 连接

> ID：12120006
> 
> 赞同：27
> 
> 时间：2012-08-25T07:16:31.187
> 
> 标签：android, vpn, pptp

我正在尝试编写一个可以连接到我的 VPN 服务器的应用程序`pptp protocol`，因为我正在研究我发现`android.net.vpnservice`我可以连接，但是当我阅读一些文档时，不清楚如何连接到**VPN**（没有用于设置用户名或密码的 API，也没有用于设置我的 VPN 类型的 API `l2tp,pptp`（

这是我找到的一些代码：

```
// Create a new interface using the builder and save the parameters.
mInterface = builder.setSession(mServerAddress)
                .setConfigureIntent(mConfigureIntent)
                .establish();
mParameters = parameters; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T17:09:37.923

嗨，这有点晚了，但我在搜索时发现了一些东西。

我也在尝试使用 pptp 和 openvpn 建立自己的 VPN 隧道/连接。

OpenVPN 已经有了解决方案。

PPTP 正在尝试以下解决方案。

[如何使用 Android 4.0 以编程方式创建新的 VPN 接口？](https://stackoverflow.com/questions/8921457/how-to-programmatically-create-a-new-vpn-interface-with-android-4-0)

上面的链接位于

[如何以编程方式配置 VPN？](https://stackoverflow.com/questions/10444757/how-to-configure-vpn-programatically)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T08:02:05.570

我也在尝试同样的方法。

对于 VPN 服务，您可以这样做。

```
 void startVPN(String name) {
   Intent i=new Intent("doenter.onevpn.ACTION_CONNECT");
   i.putExtra("name",name);
   i.putExtra("force", true); 
   i.putExtra("force_same", false); 
   startActivity(i);
      }

    void restartVPN(String name) {
      Intent i=new Intent("doenter.onevpn.ACTION_CONNECT");
     i.putExtra("name",name);
     i.putExtra("force", true); 
     i.putExtra("force_same", true); 
     startActivity(i);
  }

  void stopVPN() {
   Intent i=new Intent("doenter.onevpn.ACTION_DISCONNECT");
   // Stops any VPN regardless of name
    startActivity(i);
     } 
```

此链接可以帮助您获得答案。

[http://doandroids.com/Apps/OneVpn/how-to/start-stop-prgrammatically/](http://doandroids.com/Apps/OneVpn/how-to/start-stop-prgrammatically/)

# google-maps-api-3 - 谷歌地图 api - 打开第一个 infoWindow

> ID：12120007
> 
> 赞同：0
> 
> 时间：2012-08-25T07:16:31.417
> 
> 标签：google-maps-api-3

这是在谷歌地图上添加 infoWindows 和标记的代码：

```
 infowindow = new google.maps.InfoWindow()
    createMarker = (company)->
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(company.latitude, company.longitude),
        map: map,
        title: company.name
      })

      google.maps.event.addListener(marker, 'click', ()->
        content = 'some content'
        infowindow.setContent(content)
        infowindow.open(map,this)
      )

    createMarker(data[i]) for i in [0..data.length-1] by 1 
```

我需要在页面加载后自动打开第一个 infoWindow。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:22:13.050

触发事件： google.maps.event.trigger(, 'click');

现在，您需要存储对“标记”变量的引用。改变

```
marker = new google.maps.Marker({ 
```

为了

```
company.marker = new google.maps.Marker({ 
```

并添加最后一行：

```
google.maps.event.trigger(data[0].marker, 'click'); 
```

# uitableview - 核心数据保存在表格视图控制器的文本框中

> ID：12120012
> 
> 赞同：0
> 
> 时间：2012-08-25T07:18:01.137
> 
> 标签：uitableview, core-data

我在表格视图控制器中创建了一个五列（文本框）单元格（行），并带有添加按钮选项。当用户单击添加按钮时，将在具有空值的表视图控制器中添加具有五列（文本框）的新行（单元格）。我希望当用户填写文本框时，数据应该保存在数据库中，或者如果他更改了先前文本框中的任何数据，它也会被保存。

这是我保存的 btn 编码..

```
- (IBAction)btn_save:(id)sender
{
    NSInteger noOfRow=[(NSSet *)[projectObject valueForKey:@"rs_project_Input"] count];
    NSLog(@"Save Btn: No of rows for saving %d",noOfRow);
    for (row1=0; row1<noOfRow; row1++)
    {
        NSLog(@"Row is %d",row1);

        path = [NSIndexPath indexPathForRow:row1 inSection:0];

        Input_Details *inputDetailsObject1=[[self sortInputs] objectAtIndex:path.row];
        /*
          Update the input details from the values in the text fields.
        */
        EditingTableViewCell *cell;

        cell = (EditingTableViewCell *)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row1 inSection:0]];
        inputDetailsObject1.mh_Up= cell.cell_MH_up.text;
        inputDetailsObject1.mh_down=cell.textField.text;
        NSLog(@"Saving the MH_up value %@ is saved in save at index path %d",inputDetailsObject1.mh_Up,row1);

        [masterController saveContext];
    }
    [self.tableView reloadData];
} 
```

我的问题是代码无助于保存数据。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:53:02.920

您尝试将表格视图单元格用作数据源，但这是行不通的（除了设计不佳）。问题是

```
[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row1 inSection:0]] 
```

`nil`如果该行的单元格当前不可见，则返回。（表格视图只为可见行分配单元格，并在您向上或向下滚动时重复使用这些单元格。）

您必须立即跟踪文本字段的更改，例如通过实现`textFieldDidEndEditing:`委托函数，并将更改的文本存储在数据源中。

# php - 尝试捕捉异常？

> ID：12120015
> 
> 赞同：1
> 
> 时间：2012-08-25T07:18:27.280
> 
> 标签：php

我有一些脚本，调用错误：`Fatal error: Call to a member function GetData() on a non-object in ...`. 我试图捕捉这个错误，但它不起作用，请看下面的代码：

```
try {

    if ($data = $m->users()->GetData()) {

    print_r( $data );

}

}
catch (Exception $e) {

    echo 'Hey, it is an error man!';

} 
```

怎么抓？关闭 php 中的所有错误是不可能的。我的意思是有时我真的需要这个错误。

**upd** 1.好吧，解决方案很简单：

```
if (is_object($m->users()) && ($data = $m->users()->GetData())) {
    print_r( $data );
} else {
echo 'Hey, it is an error man!'; 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:22:28.843

在 PHP 中，错误和异常来自不同的独立世界。查看更多 [PHP：异常与错误？](https://stackoverflow.com/questions/841500/php-exceptions-vs-errors "PHP：异常与错误？")

您可以在调用方法之前检查返回的对象`GetData()`

```
try {
    if (is_object($m->users()) && ($data = $m->users()->GetData())) {
        print_r( $data );
    }
} catch (Exception $e) {
    echo 'Hey, it's an error man!';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:27:34.793

使用以下来避免你的错误，你应该使用关闭错误处理程序。

```
try {

    $obj =  $m->users();
    if ($data =$obj->GetData()) {

    print_r( $data );

}

}
catch (Exception $e) {

    echo 'Hey, it's an error man!';

} 
```

//关闭错误处理程序

```
function shutdownErrorHandler() {
    $error = error_get_last();
    if ($error !== NULL) {
      echo "Error: [SHUTDOWN] error type: " . $error['type'] . " | error file: " . $error['file'] . " | line: " . $error['line'] . " | error message: " . $error['message'] . PHP_EOL;
    } else {
       echo "Normal shutdown or user aborted";
    }
}

register_shutdown_function('shutdownErrorHandler'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:27:08.873

致命错误与异常不同，它们通常不可恢复。然而，它们通常是可以避免的，有时它们可​​以通过 PHP5 的[set_error_handler](http://us2.php.net/manual/en/function.set-error-handler.php)函数“捕获”。

然而，最佳实践是在尝试对其调用方法之前简单地检查有效对象。

# c++ - 如何保存返回的浮点数组指针？

> ID：12120019
> 
> 赞同：0
> 
> 时间：2012-08-25T07:19:12.757
> 
> 标签：c++, c

我通过一个接口有一个 cpp 函数， `float* decode()`它返回指向静态向量的原始数据的指针。

现在在我的 c 代码中，我有一个

```
float *value0;
value0 = (float*) malloc(M* sizeof(float) ); 
```

现在当我做

```
value0 = work_decode1(h0, code0, 7, retain0); 
```

当我在 Visual Studio 调试模式下将鼠标悬停在 value0 上时，我只能看到向量中的第一个值。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:23:08.340

`float *`是指针，不是数组。调试器不知道它指向多少个元素，所以它只显示第一个元素。

在监视窗口中，您可以使用以下语法指定元素的数量：

> 值0,20

其中 20 是您希望可见的元素数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:14:04.237

我假设函数 decode() 来自一个库并返回一个指向静态分配的内存缓冲区的指针。您的第一项工作应该是复制缓冲区，因为下次调用该函数时内容会发生变化。您需要知道缓冲区的长度 M。

我建议您将其复制到矢量：

```
std::vector<float> buffer(value0, value0+M); 
```

如果我正确理解了您的代码，那么您实际上存在内存泄漏。您为缓冲区分配内存，然后将指向它的指针替换为从 decode 函数返回的指针。

# magento - Magento“单例/核心/资源”已经存在错误

> ID：12120020
> 
> 赞同：1
> 
> 时间：2012-08-25T07:19:22.727
> 
> 标签：magento, runtime-error

```
Mage registry key "_singleton/core/resource" already exists

Trace:
#0 /.../app/Mage.php(222): Mage::throwException('Mage registry k...')
#1 /.../app/Mage.php(476): Mage::register('_singleton/core...', Object(Mage_Core_Model_Resource))
#2 /.../app/code/core/Mage/Core/Model/Resource/Setup.php(141): Mage::getSingleton('core/resource')
#3 /.../app/code/core/Mage/Core/Model/Resource/Setup.php(234): Mage_Core_Model_Resource_Setup->__construct('core_setup')
#4 /.../app/code/core/Mage/Core/Model/App.php(417): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 /.../app/code/core/Mage/Core/Model/App.php(343): Mage_Core_Model_App->_initModules()
#6 /.../app/Mage.php(683): Mage_Core_Model_App->run(Array)
#7 /.../index.php(104): Mage::run('', 'store')
#8 {main} 
```

嗨，我遇到了错误，从几个博客和社区论坛中，我知道问题出在缓存上。所以我在 index.php 中添加了这个

```
$app = Mage::app();
if ($app != null)
{
    $cache = $app->getCache();
    if ($cache != null)
    {
        $cache->clean();
    }
} 
```

原始来源：http: [//vipinsahu.com/magento-mage-registry-key-_singletoncoreresource-already-exists#ixzz24XXCt6m2](http://vipinsahu.com/magento-mage-registry-key-_singletoncoreresource-already-exists#ixzz24XXCt6m2)

但我还是一样。请给我你的想法来解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:45:25.283

尝试刷新你的magento缓存

> 管理员 > 系统 > 缓存管理

单击按钮刷新 magento 缓存并删除 ../var/cache/ 上的所有文件夹

# gridview - 将列值作为 id 添加到 asp.net 中 GridView 的每一行

> ID：12120024
> 
> 赞同：0
> 
> 时间：2012-08-25T07:19:38.680
> 
> 标签：gridview

我正在使用此代码为 GridView 的每一行提供唯一的 id

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
   GridViewRow row = e.Row;
   if (row.RowType == DataControlRowType.DataRow)
   {
      row.Attributes["id"] = cRowID.ToString();
      cRowID++;
   }   
} 
```

其中**cRowID**是全局整数变量。
这段代码给了我 HTML 代码

```
<table id="gridview1">
 <tr id="1"><td>...</td></tr>
 <tr id="2"><td>...</td></tr>
  .
  .  
 <tr id="n"><td>...</td></tr>
</table> 
```

如何用添加到同一行的特定列（比如 column1）值替换 cRowID？

**在 HTML 中添加 tr 标签的 ID 后编辑**
我希望它成为

```
<tr id="abc" ><td>abc</td><td>...</td></tr>
<tr id="pqr" ><td>pqr</td><td>...</td></tr>
<tr id="xyz" ><td>xyz</td><td>...</td></tr> 
```

是否可以？如果是，请解释如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:37:16.203

测试试试这个

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
  {
     int counter=1;
     foreach (GridViewRow oItem in GridView1.Rows)
     { 
        counter++;
        oItem.Cells[0].Text = counter.ToString();
        oItem.Attributes.Add("id", "yourvalue");//here you can set row id ie(<tr>)
     }
   } 
```

**已编辑**

```
foreach (GridViewRow oItem in GridView1.Rows)
     { 
        string getFirstColValue = oItem.Cells[0].Text;
        oItem.Attributes.Add("id", getFirstColvalue );
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T07:00:05.600

你不需要经历一个循环。下面给出的代码工作正常：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        string getFirstColValue = e.Row.Cells[0].Text;
        e.Row.Attributes.Add("id", getFirstColvalue );            
    }
} 
```

# php - 在 PHP/GD 中显示 jpeg 的裁剪部分？

> ID：12120026
> 
> 赞同：1
> 
> 时间：2012-08-25T07:19:53.833
> 
> 标签：php, image, gd, crop

我有很多尺寸过大（高度、宽度）的 jpeg 图像，它们都有不同的尺寸和不同的纵横比。

我从这样的数据库中显示它们：

```
<img src="<?php echo $img1; ?>" width="300" height="400"> 
```

我想要的是某种 php 函数来显示图像的裁剪版本，如下所示：

```
cropjpeg('$img1'); 
```

例如，如果图像是 600 W、700 H，则让 php 或 GD 从图像的左上角开始显示 300 W、400 H 左右的裁剪版本。

一些警告：

1.  我不能用 CSS 来做`faux cropping`。如果您下载这个裁剪后的图像，它需要就是那个，较小的裁剪版本。

2.  我真的不想创建和保存新图像，所以我想我需要它来“即时”工作

3.  我尝试了 imagecreatefromjpeg 和 imagejpeg，但看起来好像`header('Content-Type: image/jpeg')`；不是正确的答案，因为 html 页面上的内容不仅仅是这 1 张图片

4.  网站流量很大，所以要小心翼翼

这是迄今为止我发现的最好的，但它使用`header('Content-Type: image/jpeg');`

```
<?php
    function cropjpeg($img, $x, $y, $width, $height,$grade=5)
    {
        // Create image instances
        $src = imagecreatefromjpeg($img);
        $dest = imagecreatetruecolor(400, 300);

        // Copy
        imagecopy($dest, $src, 0, 0, 20, 13, 400, 300);

        // Output and free from memory
        header('Content-Type: image/jpeg');
        imagejpeg($dest);

        imagedestroy($dest);
        imagedestroy($src);
    }
    cropjpeg('images/bikini.jpg');

?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:33:43.377

您无法在实际的 html 页面中裁剪图像，因为它需要处理，如果您不想将其保存在磁盘上。

您可以将裁剪脚本转储到带有标题的单个 PHP 文件中，并从 HTML 调用带有路径的脚本，例如：

```
<img src="http://www.example.org/crop.php?i=bikini.jpg&x=13&y=20&w=400&h=300" alt="" /> 
```

在脚本中你可以使用

```
<?php

     header('Content-Type: image/jpeg');
     function cropjpeg($img, $x, $y, $width, $height,$grade=5) {
         //......................
         imagecopy($dest, $src, 0, 0, $x, $y, $width, $height);
         //......................
     }

     cropjpeg('images/'.$_GET['i'], (int)$_GET['x'], (int)$_GET['y'], (int)$_GET['w'], (int)$_GET['h']);
?> 
```

您应该考虑纵横比，并寻找更好的裁剪脚本，您不必重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:29:30.320

使用 mod_rewrite 将相关图像文件路径的请求发送到 PHP 脚本，该脚本进行裁剪并将图像数据发送回作为响应。它看起来像页面上的普通图像标签，但图像实际上是由您的单独脚本提供的。

唯一的问题是您同时不想保存裁剪的文件，但有很多流量所以想“轻描淡写”。你不能两全其美。如果您不想在每次请求时重新裁剪图像，则需要保存裁剪后的版本，以便在以后的请求中重新提供它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:17:28.093

这是一个包含非常完整教程的页面，其中包含使用 ajax 执行此操作所需的一切

[用 jquery 和 php 裁剪](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)

[http://www.skillcorp.com.ve][2]

[2]：[http](http://www.skillcorp.com.ve) ://www.skillcorp.com.ve这里还有更多相关信息

# sql-server-2008 - PowerBuilder Find 函数抛出错误“表达式无效”

> ID：12120030
> 
> 赞同：0
> 
> 时间：2012-08-25T07:20:41.697
> 
> 标签：sql-server-2008, find, powerbuilder

这段代码有什么问题。在插入新序列号之前，我正在检查数据库中是否有可用记录。当我输入任何可用或不可用的记录时，它会引发错误消息：

> “表达式无效”。（PowerBuilder Classic 12.5 和 SQL Server 2008）

```
If This.GetColumnName() = "serial_No" Then
 long ll_serial
    ll_serial=dw_newrecord.find(data, 1, dw_newrecord.rowcount())
    if ll_serial>0 then
    messagebox("validation error", "The record already exists")
    return 1
end if
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:44:13.770

`data`您的表达式很可能有语法错误。可能是一些格式错误的代码——比如缺少引号——或者列名不正确。

为了帮助调整过滤器或查找表达式，您可以通过行/过滤器菜单在数据窗口设计屏幕中对其进行测试。

长期编码设计的更好解决方案是将[Datawindow Debug Machine](http://geni.embeddingperl.com/index.php?post/2011/06/06/My-Datawindow-DebugMachine)（由我的同事制造）集成到您的项目中。它是原型数据窗口表达式的宝贵工具，用于查找、过滤以及在数据窗口中创建/修改动态对象。虽然与项目的数据窗口祖先正确连接，但它可以帮助过滤器并找到像这里这样的表达式错误。

编辑：正如 RealHowTo 所注意到的，该工具已更新。这是[当前的最新版本](http://geni.embeddingperl.com/index.php?post/2012/01/23/My-Datawindow-DebugMachine-v2.4)（但没有更新的演示截屏视频）。

# php - 什么是选项 +FollowSymLinks？

> ID：12120035
> 
> 赞同：37
> 
> 时间：2012-08-25T07:21:41.087
> 
> 标签：php, linux, laravel, apache, lamp

我在我的电脑上使用 Lamp 服务器。我开始使用 Laravel php 框架。在我的 .htaccess 中，如果我使用`Options +FollowSymLinks`，我会收到 500 错误。如果我注释掉，我必须`index.php`在我的所有地址中使用..example：

```
 /~ytsejam/blog/public/index.php/login 
```

我使用 Arch Linux 。有没有办法解决它？

编辑：我通过使用虚拟主机解决了这个问题。并`index.php from application/config/application.php`在 laravel 文件夹中删除。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T10:20:56.980

您可以尝试在互联网上搜索“.htaccess Options not allowed here”。

我发现的一个建议（使用谷歌）是：

> 检查以确保您的 httpd.conf 文件具有 AllowOverride All。

在 Mint Linux 上为我工作的 .htaccess 文件（放置在 Laravel /public 文件夹中）：

```
# Apache configuration file
# http://httpd.apache.org/docs/2.2/mod/quickreference.html

# Turning on the rewrite engine is necessary for the following rules and
# features. "+FollowSymLinks" must be enabled for this to work symbolically.

<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
</IfModule>

# For all files not found in the file system, reroute the request to the
# "index.php" front controller, keeping the query string intact

<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

希望这对您有所帮助。否则你可以在 Laravel 论坛 (http://forums.laravel.com/) 上提问，那里有一些非常乐于助人的人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-18T09:42:45.707

参数`Options FollowSymLinks`使您能够在您的 webroot 中拥有一个指向其他文件/目录的[符号链接。](https://en.wikipedia.org/wiki/Symbolic_link)禁用此功能后，Apache 将拒绝遵循此类符号链接。`Options SymLinksIfOwnerMatch`可以改用更安全的方法 - 这将允许您仅链接到您拥有的其他文件。

如果您在主 Apache 配置中使用已被禁止的参数中的`Options`指令，服务器将返回 HTTP 500 错误代码。`.htaccess`

允许`.htaccess`的选项由[`AllowOverride`](https://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)主 Apache 配置文件中的指令定义。要允许符号链接，该指令需要设置为`All`or `Options`。

除了允许使用符号链接外，还需要此指令来在上下文中启用**mod_rewrite 。**`.htaccess`但为此，也`SymLinksIfOwnerMatch`可以使用更安全的选项。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-04T10:10:11.227

当您访问网站并在 Web 浏览器中浏览到 /system/files/images 文件夹时，服务器如何知道它应该从 /pictures 文件夹中提取 image.png？所谓的符号链接是负责此行为的人。在您的系统中某处，有一个符号链接告诉您的服务器“如果访问者请求 /system/files/images/image.png，则向他显示 /pictures/image.png。”

FollowSymLinks 设置在其中的作用是什么？

FollowSymLinks 与服务器安全有关。在处理 Web 服务器时，您不能只保留未定义的内容。你必须告诉谁可以访问什么。FollowSymLinks 设置告诉你的服务器它是否应该遵循符号链接。换句话说，如果在我们的案例中禁用了 FollowSymLinks，浏览到 /system/files/images/image.png 文件将根据其他设置返回 403（禁止访问）或 404（未找到）错误。

[http://www.maxi-pedia.com/FollowSymLinks](http://www.maxi-pedia.com/FollowSymLinks)

# jquery - 使用 jquery 获取当前 div 的计数

> ID：12120036
> 
> 赞同：0
> 
> 时间：2012-08-25T07:21:45.700
> 
> 标签：jquery

我用 jquery 来获取计数是

```
var currentPosition = 0;
var slides = $(".slideritem");
var numberOfSlides = slides.length;

manageControls(currentPosition);
function manageControls(position){
var count = document.getElementById("count");
count.innerHTML =(position + 1) + "/" + numberOfSlides;
  } 
```

这是我的[JSFiddle](http://jsfiddle.net/sureshmonster/ZUZXg/2/)。它显示计数，但当我转到下一个 div 时它不会更新。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:27:14.257

你错过了一个电话`manageControls()`......你可以把它放在这里：

```
$('li').click(function() {
    var index = $(this).index();
    setActive(index);
    manageControls(index);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:37:13.687

```
var currentPosition = 0;
 var slides = $(".myclass");
 var numberOfSlides = slides.length;

 manageControls(currentPosition);
 function manageControls(position){
 var count = document.getElementById("count");
 count.innerHTML =(position + 1) + "/" + numberOfSlides;
 }

 setActive(0);

$('li').click(function() {
setActive($(this).index());
manageControls($(this).index());

});

  $(".next").click(function(){
   var current = $('ul li.selected').index(),
    maxIndex = $('ul li').length - 1,
    next = (current + 1) >  maxIndex ? 0 : (current + 1);
   manageControls(next);
   setActive(next);

  });

 function setActive(i) {
var li = $('ul li').eq(i);

$('ul li').removeClass('selected');
li.addClass('selected');
$('.myclass').removeClass('selected');
$('.myclass').eq(i).addClass('selected');
 } 
```

# django - 如何修改已安装的 django 应用程序

> ID：12120039
> 
> 赞同：1
> 
> 时间：2012-08-25T07:22:17.563
> 
> 标签：django

我在我的 django 站点中使用 django 注册应用程序。现在我想添加更多自定义代码。我觉得如果能直接修改django注册app的原代码就更好了。

我怎样才能做到这一点？

我是否应该只下载 django 注册应用程序的源代码，然后放入我的项目文件夹中。据我了解，它会先检查我的项目文件夹下的文件，然后再检查 DJANGO_HOME\contrib 下的类似文件。

这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:05:01.503

理想情况下，除非要将更改推送回原始源，否则不应修改源。

只需创建一个新应用程序并扩展/覆盖/复制为您的项目自定义的任何方法。

这样做的原因是，如果 django-registration 更新他们的代码，你会遇到维护开销。如果它是单独的，您仍然可以使用 pip 更新它（您使用的是 virtualenv 对吗？），然后您需要更改的只是您的自定义方法和类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:31:04.673

是的，你可以简单地将它放在你的项目文件夹中，然后修改它以按照你的意愿工作。您也可以删除已安装的，因为在这种情况下您将不再需要它。

请记住将其包含在您`INSTALLED_APPS`的设置文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T05:20:06.257

免责声明：通常，编辑已安装应用程序的源代码被认为是不好的。同一主机上的另一个应用程序不会知道您的更改（顺便说一句，看看 virtualenv）。你可能会忘记你已经改变了一些东西并得到意想不到的行为。您不会跟踪更改。即，破坏某些东西太容易了。如果要更改现有应用程序，请将其复制到项目目录，然后进行更改。

从您的另一个问题来看，您似乎是在询问来自 ubernostrum 的 django-registration。这个应用程序支持自定义后端和事件，这对你来说可能就足够了。

# android - Android画布drawText不起作用

> ID：12120042
> 
> 赞同：2
> 
> 时间：2012-08-25T07:22:41.323
> 
> 标签：android, android-canvas

我使用画布的 drawText 方法制作了一个自定义视图。不知何故，任何 Jelly Bean 设备上都没有显示任何文本。它适用于 ICS 及以下版本。

有谁知道这个方法或任何相关方法的 API 15 到 16 是否有任何变化？

编辑代码：（来自提供画布作为参数的draw方法）

```
 paint = new Paint();
    paint.setAntiAlias(true);
    paint.setStrokeWidth(3);
    paint.setColor(context.getResources().getColor(R.color.plot_background));
    canvas.drawRect(new Rect(0,0,getWidth(),getHeight()), paint);
    paint.setColor(color_text);
    paint.setTextSize(getScaled(18.5f));
    paint.setTextAlign(Align.CENTER);
    canvas.drawText(title, (graphwidth / 2) + horstart, border/2+15, paint); 
```

我知道该行已执行并且坐标正确，因为相同的代码适用于旧平台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:16:07.657

谢谢埃里克。想通了错误。我基于 canvas.getDensity() 缩放应用程序中的所有内容。由于某种原因，对于果冻豆设备，getDensity() 目前绘制函数始终为 0。但它确实返回 1.6 -> 4.0.3 之间的任何值的正确值

我没有为此发布代码（这是我的错）是因为我不怀疑 getDensity() 是问题所在，因为在过去两年该应用程序投放市场时它从未出现过。

解决方法是修改 getScaled 函数。

```
public float getScaled(Canvas canvas,float in){
    return in * ( canvas.getDensity()==0 ? 1 : canvas.getDensity()/ 160.0f);
} 
```

文档确实说可以返回 DENSITY_NONE 但我认为可能发生的情况是在 Jelly Bean 中为您进行缩放，因为如果我只是将它乘以 1，它在我刚刚测试的两个不同密度的设备上就像一个魅力上。

（PS如果我错了或确认，任何熟悉Android OS内部的人都可以纠正我吗？）

# android - 语音识别器意图未取回 OnActivityResult 中的数据

> ID：12120044
> 
> 赞同：1
> 
> 时间：2012-08-25T07:22:44.363
> 
> 标签：android

单击按钮时，我有一个语音识别器意图。

```
voiceSearch.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        try{
            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speak Now...");
            startActivityForResult(intent, REQUEST_CODE);
        }
        catch (ActivityNotFoundException e) {
            Log.v("Speech", "Could not find any Speech Recognition Actions");
        }

    }
}); 
```

在活动结果上，我的代码为

```
 @Override
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
     System.out.println("Request code++++++++++++++++++++++++++++"+requestCode);
     System.out.println("Result Code+++++++++++++++++++++++++++++"+resultCode);
     System.out.println("Data++++++++++++++++++++++++++++++++++++"+data);
   System.out.println("Language"+data.getStringExtra(RecognizerIntent.EXTRA_LANGUAGE));
     System.out.println("data.getDataString()"+data.getDataString());
     if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
     if (data != null && data.getData() != null) {
            String searchKey = data.getData().toString(); 
            System.out.println("Search Key++++++++++++++++++++++++"+searchKey);
            searchEditText.setText(searchKey);
            webView.loadUrl(url+"searchKey");

        }
 }
 } 
```

我得到的输出是当我打印`onActivityResult`时

我得到的请求代码`1`

我得到的结果代码`-1`

我得到的数据`Intent { (has extras) }`

语言`data.getStringExtra(RecognizerIntent.EXTRA_LANGUAGE)`为`null`.

`Data.getDataString()`作为`null`.

任何人都可以让我知道我在代码中可能出现的问题。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T08:18:24.163

我认为您试图以错误的方式获得结果。它们不存储在数据字符串中，而是存储在匹配数组中。

您可以通过以下方式获取数组：

```
ArrayList<String> matches = data.getStringArrayListExtra(
    RecognizerIntent.EXTRA_RESULTS); 
```

数组中的每个条目将是一个多字字符串，代表识别器对用户所说内容的猜测。

# ruby-on-rails - Refinerycms 无法调用我自己的控制器路由，操作

> ID：12120050
> 
> 赞同：3
> 
> 时间：2012-08-25T07:23:38.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms

首先我创建了refinerycms应用程序，在我的应用程序中我不能调用我自己的控制器路由，操作和视图我得到了错误

```
undefined local variable or method `contacts_save_contact_path' for #<#<Class:0xafc9338>:0xb5467fc> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T21:39:06.297

您必须获得对实际应用程序的 url_helpers 的访问权限，这取决于应用程序的命名空间。例如：

在 config/routes.rb 中：

```
MyApp::Application.routes.draw do
  resources :foos

  mount Refinery::Core::Engine, at => '/'
end 
```

并`rake routes`显示：

```
 foos GET /foos(.:format) foos#index
refinery     /               Refinery::Core::Engine 
```

您应该能够使用：

`MyApp::Application.routes.url_helpers.foos_path`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T01:57:46.747

我发现自己不得不`refinery.route_path`使用炼油厂 url 助手，所以在你的情况下，`refinery.contacts_save_contact_path`可能会成功

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T14:45:41.887

路径必须是这样的： Refinery::Core::Engine.routes.url_helpers.your_object_admin_your_object_path

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T23:28:42.070

`main_app.contacts_save_contact_path`应该管用。

# java - 如何在关闭挂钩中使用 swing？

> ID：12120051
> 
> 赞同：7
> 
> 时间：2012-08-25T07:23:43.880
> 
> 标签：java, swing, shutdown

是否有任何可能的方法将摇摆添加到关闭挂钩中（即，在 VM 关闭时显示一个弹出窗口）？

我意识到如果我尝试创建一个新的 JFrame，它会给我一个错误，因为它试图注册一个关闭挂钩，由于 VM 已经关闭，该挂钩失败。我只是想知道实际上是否有任何解决方法

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-25T08:18:47.423

你真的不应该这样做。从[规范](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))：[_`Runtime.addShutdownHook`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))

> Java 虚拟机*关闭*以响应两种事件：
> 
> *   当最后一个非守护线程退出或调用（等效地，）方法时，程序正常*退出，或*`exit``System.exit`
> *   虚拟机响应用户中断（例如键入）或系统范围的事件（例如用户注销或系统关闭）而*终止。*`^C`
> 
> ...
> 
> 关闭挂钩在虚拟机生命周期的一个微妙时刻运行，因此应该进行防御性编码。特别是，它们应该写成线程安全的，并尽可能避免死锁。他们也不应该盲目依赖可能已经注册了自己的关闭钩子的服务，因此他们自己可能正在关闭的过程中。例如，尝试使用其他基于线程的服务（例如 AWT 事件调度线程）可能会导致死锁。
> 
> 关闭挂钩也应该快速完成它们的工作。当程序调用时`exit`，期望虚拟机将立即关闭并退出。当虚拟机由于用户注销或系统关闭而终止时，底层操作系统可能只允许关闭和退出的固定时间量。因此，不建议尝试任何用户交互或在关闭挂钩中执行长时间运行的计算。
> 
> ...
> 
> 在极少数情况下，虚拟机可能会*中止*，即停止运行而没有完全关闭。当虚拟机在外部终止时会发生这种情况，例如`SIGKILL`Unix 上的信号或`TerminateProcess`Microsoft Windows 上的调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。

此处的特定警告建议您*不*要这样做：

1.  *“关闭挂钩也应该快速完成他们的工作。”*

    依赖*任何*可能需要一段时间才能完成工作的事情，或者无限期地阻止用户输入（如`JOptionPane`对话框），这**不是**您在关闭挂钩中应该做的事情。

2.  *“尝试使用其他基于线程的服务，例如 AWT 事件调度线程，可能会导致死锁”*

    Swing 在 AWT 之上运行，其底层事件调度线程也可能正在关闭。尝试在关闭时使用 Swing 或 AWT 不仅会导致死锁，而且无论如何也可能根本不起作用。

3.  *“如果虚拟机中止，则无法保证是否会运行任何关闭挂钩”*

    无法保证您的用户甚至可能收到您的消息，因为仅在正常退出或终止时才保证关闭挂钩运行 -**而不是**在停止或中止时运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T08:18:08.160

关闭挂钩应该尽快执行。这不包括等待用户确认对话。在任何情况下，您都无法保证 Swing 事件线程仍在运行。

你不能这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T07:30:13.637

1.  Swing GUI 必须在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上完成，然后

    *   在[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上创建[JDialog 或 JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

    *   显示容器

    *   征集`Shutdown Hook`

2.  [简单的方法](https://stackoverflow.com/questions/6121990/pass-string-as-params-from-one-java-app-to-another)，但需要最终用户操作（关闭`JDialog`）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T08:06:48.837

如果有，它不会帮助你。

关闭挂钩作为 JVM 关闭的一部分异步调用，因此“确认”对话框不会真正确认任何内容，因为您无法停止或反转关闭过程。等待用户做出决定并不是关闭钩子所要做的那种动作。交互式程序中的关闭挂钩没有意义。关闭挂钩的真正用例是：

> 用于在 JVM 关闭时释放资源和其他内务处理

同样重要的是要注意关闭钩子不会总是运行，更多信息请参见我的答案：[如何从 C# 中正确关闭 Java 应用程序](https://stackoverflow.com/questions/11310530/how-to-shutdown-java-application-correctly-from-c-sharp-one/11311498#11311498)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-25T08:09:58.883

我不确定您的问题，但我认为 JVM 关闭时无法运行或显示弹出窗口。就像你准备睡觉时试图跑步一样？只是猜测。:)

# java - 使用 JAVA 将 CSV 转换为 XML

> ID：12120055
> 
> 赞同：4
> 
> 时间：2012-08-25T07:24:07.373
> 
> 标签：java, xml, csv

我有一组要转换为 XML 的 CSV 数据。代码看起来不错，但输出不够完美。它省略了一些列，因为它们没有值，并生成一长行 XML 数据而不是破坏它。

这是我的 CSV 数据示例：

```
Name  Age Sex
chi   23   
kay   19  male
John      male 
```

我的代码：

```
public class XMLCreators {
  // Protected Properties
  protected DocumentBuilderFactory domFactory = null;
  protected DocumentBuilder domBuilder = null;

  public XMLCreators() {
    try {
      domFactory = DocumentBuilderFactory.newInstance();
      domBuilder = domFactory.newDocumentBuilder();
    } catch (FactoryConfigurationError exp) {
      System.err.println(exp.toString());
    } catch (ParserConfigurationException exp) {
      System.err.println(exp.toString());
    } catch (Exception exp) {
      System.err.println(exp.toString());
    }

  }

  public int convertFile(String csvFileName, String xmlFileName,
      String delimiter) {

    int rowsCount = -1;
    try {
      Document newDoc = domBuilder.newDocument();
      // Root element
      Element rootElement = newDoc.createElement("XMLCreators");
      newDoc.appendChild(rootElement);
      // Read csv file
      BufferedReader csvReader;
      csvReader = new BufferedReader(new FileReader(csvFileName));
      int fieldCount = 0;
      String[] csvFields = null;
      StringTokenizer stringTokenizer = null;

      // Assumes the first line in CSV file is column/field names
      // The column names are used to name the elements in the XML file,
      // avoid the use of Space or other characters not suitable for XML element
      // naming

      String curLine = csvReader.readLine();
      if (curLine != null) {
        // how about other form of csv files?
        stringTokenizer = new StringTokenizer(curLine, delimiter);
        fieldCount = stringTokenizer.countTokens();
        if (fieldCount > 0) {
          csvFields = new String[fieldCount];
          int i = 0;
          while (stringTokenizer.hasMoreElements())
            csvFields[i++] = String.valueOf(stringTokenizer.nextElement());
        }
      }

      // At this point the coulmns are known, now read data by lines
      while ((curLine = csvReader.readLine()) != null) {
        stringTokenizer = new StringTokenizer(curLine, delimiter);
        fieldCount = stringTokenizer.countTokens();
        if (fieldCount > 0) {
          Element rowElement = newDoc.createElement("row");
          int i = 0;
          while (stringTokenizer.hasMoreElements()) {
            try {
              String curValue = String.valueOf(stringTokenizer.nextElement());
              Element curElement = newDoc.createElement(csvFields[i++]);
              curElement.appendChild(newDoc.createTextNode(curValue));
              rowElement.appendChild(curElement);
            } catch (Exception exp) {
            }
          }
          rootElement.appendChild(rowElement);
          rowsCount++;
        }
      }
      csvReader.close();

      // Save the document to the disk file
      TransformerFactory tranFactory = TransformerFactory.newInstance();
      Transformer aTransformer = tranFactory.newTransformer();
      Source src = new DOMSource(newDoc);
      Result result = new StreamResult(new File(xmlFileName));
      aTransformer.transform(src, result);
      rowsCount++;

      // Output to console for testing
      // Resultt result = new StreamResult(System.out);

    } catch (IOException exp) {
      System.err.println(exp.toString());
    } catch (Exception exp) {
      System.err.println(exp.toString());
    }
    return rowsCount;
    // "XLM Document has been created" + rowsCount;
  }
} 
```

当对上述数据执行此代码时，它会产生：

```
<?xml version="1.0" encoding="UTF-8"?>
<XMLCreators>
<row>
<Name>chi</Name>
<Age>23</Age>
</row>
<row>
<Name>kay</Name>
<Age>19</Age>
<sex>male</sex>
</row>
<row>
<Name>john</Name>
<Age>male</Age>
</row>
</XMLCreators> 
```

我自己以这种形式安排了它，但输出产生了一条长线。要产生的输出应该是：

```
<?xml version="1.0" encoding="UTF-8"?>
<XMLCreators>
<row>
<Name>chi</Name>
<Age>23</Age>
<sex></sex>
</row>
<row>
<Name>kay</Name>
<Age>19</Age>
<sex>male</sex>
</row>
<row>
<Name>john</Name>
<Age></Age>
<sex>male</sex>
 </row>
 </XMLCreators> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:06:23.697

我同意肯尼特的观点。

我只是添加了

```
aTransformer .setOutputProperty(OutputKeys.INDENT, "yes");
aTransformer .setOutputProperty(OutputKeys.METHOD, "xml");
aTransformer .setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4"); 
```

这在元素之间添加了一条新线并允许缩进。

**更新**

让我们从您呈现的文件不是 CSV（逗号分隔值）文件这一事实开始，我会让您担心这个问题......

```
List<String> headers = new ArrayList<String>(5);

File file = new File("Names2.csv");
BufferedReader reader = null;

try {

    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder domBuilder = domFactory.newDocumentBuilder();

    Document newDoc = domBuilder.newDocument();
    // Root element
    Element rootElement = newDoc.createElement("XMLCreators");
    newDoc.appendChild(rootElement);

    reader = new BufferedReader(new FileReader(file));
    int line = 0;

    String text = null;
    while ((text = reader.readLine()) != null) {

        StringTokenizer st = new StringTokenizer(text, " ", false);    
        String[] rowValues = new String[st.countTokens()];
        int index = 0;
        while (st.hasMoreTokens()) {

            String next = st.nextToken();
            rowValues[index++] = next;

        }

        //String[] rowValues = text.split(",");

        if (line == 0) { // Header row
            for (String col : rowValues) {
                headers.add(col);
            }
        } else { // Data row
            Element rowElement = newDoc.createElement("row");
            rootElement.appendChild(rowElement);
            for (int col = 0; col < headers.size(); col++) {
                String header = headers.get(col);
                String value = null;

                if (col < rowValues.length) {
                    value = rowValues[col];
                } else {
                    // ?? Default value
                    value = "";
                }

                Element curElement = newDoc.createElement(header);
                curElement.appendChild(newDoc.createTextNode(value));
                rowElement.appendChild(curElement);
            }
        }
        line++;
    }

    ByteArrayOutputStream baos = null;
    OutputStreamWriter osw = null;

    try {
        baos = new ByteArrayOutputStream();
        osw = new OutputStreamWriter(baos);

        TransformerFactory tranFactory = TransformerFactory.newInstance();
        Transformer aTransformer = tranFactory.newTransformer();
        aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");
        aTransformer.setOutputProperty(OutputKeys.METHOD, "xml");
        aTransformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");

        Source src = new DOMSource(newDoc);
        Result result = new StreamResult(osw);
        aTransformer.transform(src, result);

        osw.flush();
        System.out.println(new String(baos.toByteArray()));
    } catch (Exception exp) {
        exp.printStackTrace();
    } finally {
        try {
            osw.close();
        } catch (Exception e) {
        }
        try {
            baos.close();
        } catch (Exception e) {
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

现在我在这里使用 a`List`而不是 a `Map`。您需要决定如何最好地解决缺失值问题。在事先不知道文件结构的情况下，这不是一个简单的解决方案。

无论如何，我最终得到

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<XMLCreators>
    <row>
        <Name>chi</Name>
        <Age>23</Age>
        <Sex/>
    </row>
    <row>
        <Name>kay</Name>
        <Age>19</Age>
        <Sex>male</Sex>
    </row>
    <row>
        <Name>John</Name>
        <Age>male</Age>
        <Sex/>
    </row>
</XMLCreators> 
```

**用合并更新**

```
public class XMLCreators {
    // Protected Properties

    protected DocumentBuilderFactory domFactory = null;
    protected DocumentBuilder domBuilder = null;

    public XMLCreators() {
        try {
            domFactory = DocumentBuilderFactory.newInstance();
            domBuilder = domFactory.newDocumentBuilder();
        } catch (FactoryConfigurationError exp) {
            System.err.println(exp.toString());
        } catch (ParserConfigurationException exp) {
            System.err.println(exp.toString());
        } catch (Exception exp) {
            System.err.println(exp.toString());
        }

    }

    public int convertFile(String csvFileName, String xmlFileName,
                    String delimiter) {

        int rowsCount = -1;
        try {
            Document newDoc = domBuilder.newDocument();
            // Root element
            Element rootElement = newDoc.createElement("XMLCreators");
            newDoc.appendChild(rootElement);
            // Read csv file
            BufferedReader csvReader;
            csvReader = new BufferedReader(new FileReader(csvFileName));

//                int fieldCount = 0;
//                String[] csvFields = null;
//                StringTokenizer stringTokenizer = null;
//
//                // Assumes the first line in CSV file is column/field names
//                // The column names are used to name the elements in the XML file,
//                // avoid the use of Space or other characters not suitable for XML element
//                // naming
//
//                String curLine = csvReader.readLine();
//                if (curLine != null) {
//                    // how about other form of csv files?
//                    stringTokenizer = new StringTokenizer(curLine, delimiter);
//                    fieldCount = stringTokenizer.countTokens();
//                    if (fieldCount > 0) {
//                        csvFields = new String[fieldCount];
//                        int i = 0;
//                        while (stringTokenizer.hasMoreElements()) {
//                            csvFields[i++] = String.valueOf(stringTokenizer.nextElement());
//                        }
//                    }
//                }
//
//                // At this point the coulmns are known, now read data by lines
//                while ((curLine = csvReader.readLine()) != null) {
//                    stringTokenizer = new StringTokenizer(curLine, delimiter);
//                    fieldCount = stringTokenizer.countTokens();
//                    if (fieldCount > 0) {
//                        Element rowElement = newDoc.createElement("row");
//                        int i = 0;
//                        while (stringTokenizer.hasMoreElements()) {
//                            try {
//                                String curValue = String.valueOf(stringTokenizer.nextElement());
//                                Element curElement = newDoc.createElement(csvFields[i++]);
//                                curElement.appendChild(newDoc.createTextNode(curValue));
//                                rowElement.appendChild(curElement);
//                            } catch (Exception exp) {
//                            }
//                        }
//                        rootElement.appendChild(rowElement);
//                        rowsCount++;
//                    }
//                }
//                csvReader.close();
//
//                // Save the document to the disk file
//                TransformerFactory tranFactory = TransformerFactory.newInstance();
//                Transformer aTransformer = tranFactory.newTransformer();
//                Source src = new DOMSource(newDoc);
//                Result result = new StreamResult(new File(xmlFileName));
//                aTransformer.transform(src, result);
//                rowsCount++;
            int line = 0;
            List<String> headers = new ArrayList<String>(5);

            String text = null;
            while ((text = csvReader.readLine()) != null) {

                StringTokenizer st = new StringTokenizer(text, delimiter, false);
                String[] rowValues = new String[st.countTokens()];
                int index = 0;
                while (st.hasMoreTokens()) {

                    String next = st.nextToken();
                    rowValues[index++] = next;

                }

                if (line == 0) { // Header row

                    for (String col : rowValues) {
                        headers.add(col);
                    }

                } else { // Data row

                    rowsCount++;

                    Element rowElement = newDoc.createElement("row");
                    rootElement.appendChild(rowElement);
                    for (int col = 0; col < headers.size(); col++) {

                        String header = headers.get(col);
                        String value = null;

                        if (col < rowValues.length) {

                            value = rowValues[col];

                        } else {
                            // ?? Default value
                            value = "";
                        }

                        Element curElement = newDoc.createElement(header);
                        curElement.appendChild(newDoc.createTextNode(value));
                        rowElement.appendChild(curElement);

                    }

                }
                line++;

            }

            ByteArrayOutputStream baos = null;
            OutputStreamWriter osw = null;

            try {

                baos = new ByteArrayOutputStream();
                osw = new OutputStreamWriter(baos);

                TransformerFactory tranFactory = TransformerFactory.newInstance();
                Transformer aTransformer = tranFactory.newTransformer();
                aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");
                aTransformer.setOutputProperty(OutputKeys.METHOD, "xml");
                aTransformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");

                Source src = new DOMSource(newDoc);
                Result result = new StreamResult(osw);
                aTransformer.transform(src, result);

                osw.flush();
                System.out.println(new String(baos.toByteArray()));

            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    osw.close();
                } catch (Exception e) {
                }
                try {
                    baos.close();
                } catch (Exception e) {
                }
            }

            // Output to console for testing
            // Resultt result = new StreamResult(System.out);

        } catch (IOException exp) {
            System.err.println(exp.toString());
        } catch (Exception exp) {
            System.err.println(exp.toString());
        }
        return rowsCount;
        // "XLM Document has been created" + rowsCount;
    }
} 
```

**使用 OpenCSV 更新**

```
public class XMLCreators {
    // Protected Properties

    protected DocumentBuilderFactory domFactory = null;
    protected DocumentBuilder domBuilder = null;

    public XMLCreators() {
        try {
            domFactory = DocumentBuilderFactory.newInstance();
            domBuilder = domFactory.newDocumentBuilder();
        } catch (FactoryConfigurationError exp) {
            System.err.println(exp.toString());
        } catch (ParserConfigurationException exp) {
            System.err.println(exp.toString());
        } catch (Exception exp) {
            System.err.println(exp.toString());
        }

    }

    public int convertFile(String csvFileName, String xmlFileName,
                    String delimiter) {

        int rowsCount = -1;
        BufferedReader csvReader;
        try {
            Document newDoc = domBuilder.newDocument();
            // Root element
            Element rootElement = newDoc.createElement("XMLCreators");
            newDoc.appendChild(rootElement);
            // Read csv file
            csvReader = new BufferedReader(new FileReader(csvFileName));

            //** Now using the OpenCSV **//
            CSVReader reader = new CSVReader(new FileReader("names.csv"), delimiter.charAt(0));
            //CSVReader reader = new CSVReader(csvReader);
            String[] nextLine;
            int line = 0;
            List<String> headers = new ArrayList<String>(5);
            while ((nextLine = reader.readNext()) != null) {

                if (line == 0) { // Header row
                    for (String col : nextLine) {
                        headers.add(col);
                    }
                } else { // Data row
                    Element rowElement = newDoc.createElement("row");
                    rootElement.appendChild(rowElement);

                    int col = 0;
                    for (String value : nextLine) {
                        String header = headers.get(col);

                        Element curElement = newDoc.createElement(header);
                        curElement.appendChild(newDoc.createTextNode(value.trim()));
                        rowElement.appendChild(curElement);

                        col++;
                    }
                }
                line++;
            }
            //** End of CSV parsing**//

            FileWriter writer = null;

            try {

                writer = new FileWriter(new File(xmlFileName));

                TransformerFactory tranFactory = TransformerFactory.newInstance();
                Transformer aTransformer = tranFactory.newTransformer();
                aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");
                aTransformer.setOutputProperty(OutputKeys.METHOD, "xml");
                aTransformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");

                Source src = new DOMSource(newDoc);
                Result result = new StreamResult(writer);
                aTransformer.transform(src, result);

                writer.flush();

            } catch (Exception exp) {
                exp.printStackTrace();
            } finally {
                try {
                    writer.close();
                } catch (Exception e) {
                }
            }

            // Output to console for testing
            // Resultt result = new StreamResult(System.out);

        } catch (IOException exp) {
            System.err.println(exp.toString());
        } catch (Exception exp) {
            System.err.println(exp.toString());
        }
        return rowsCount;
        // "XLM Document has been created" + rowsCount;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T12:31:41.840

```
public int convertFile(String csvFileName, String xmlFileName, String delimiter) {

    int rowsCount = -1;
    try {
        Document newDoc = domBuilder.newDocument();
        // Root element
        Element rootElement = newDoc.createElement("XMLCreators");
        newDoc.appendChild(rootElement);
        // Read csv file
        BufferedReader csvReader;
        csvReader = new BufferedReader(new FileReader(csvFileName));
        int fieldCount = 0;
        String[] csvFields = null;
        String[] csvValues = null;

        // Assumes the first line in CSV file is column/field names
        // The column names are used to name the elements in the XML file,
        // avoid the use of Space or other characters not suitable for XML element
        // naming

        String curLine = csvReader.readLine();
        if (curLine != null) {
            csvFields=curLine.split(",", -1);
            }

        // At this point the coulmns are known, now read data by lines

        int i =0;
        while ((curLine = csvReader.readLine()) != null) {
            csvValues=curLine.split(",", -1);
            Element rowElement = newDoc.createElement("record-"+i);
            try {
            for(fieldCount=0;fieldCount<csvValues.length;fieldCount++)
            {
                String curValue = csvValues[fieldCount];
                Element curElement = newDoc.createElement(csvFields[fieldCount]);
                curElement.appendChild(newDoc.createTextNode(curValue));
                rowElement.appendChild(curElement);
            }
            } catch (Exception exp) {
            }
            rootElement.appendChild(rowElement);
            i++;

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-29T17:10:29.100

```
package org.mycompany.conversion;

import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import org.apache.camel.dataformat.bindy.annotation.CsvRecord;
import org.apache.camel.dataformat.bindy.annotation.DataField;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@CsvRecord(separator = ",")
public class Person {

    @DataField(pos = 1)
    @XmlElement
    private int id;
    @DataField(pos = 2)
    @XmlElement
    private String name;
    @DataField(pos = 3)
    @XmlElement
    private int age;

    @Override
    public String toString() {
        return "Person [id=" + id + ", name=" + name + ", age=" + age + "]";
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

}

=========================================================================================package org.mycompany.conversion;

import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Greeting {

    @XmlElementWrapper(name = "Person")
    @XmlElement(name = "persons")
    private List<Person> persons;

    public List<Person> getPerson() {
        return persons;
    }

    public void setPerson(List<Person> persons) {
        this.persons = persons;
    }

}

=========================================================================================
package org.mycompany.conversion;

import javax.xml.bind.JAXBContext;

import org.apache.camel.CamelContext;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.converter.jaxb.JaxbDataFormat;
import org.apache.camel.dataformat.bindy.csv.BindyCsvDataFormat;
import org.apache.camel.impl.DefaultCamelContext;
import org.apache.camel.spi.DataFormat;

public class CsvConversion {

    public static void main(String[] args) throws Exception {

        JaxbDataFormat xmlDataFormat = new JaxbDataFormat();
        JAXBContext con = JAXBContext.newInstance(Greeting.class);
        xmlDataFormat.setContext(con);
        DataFormat bindy = new BindyCsvDataFormat(Person.class);
        CamelContext context = new DefaultCamelContext();
        context.addRoutes(new RouteBuilder() {
            @Override
            public void configure() throws Exception {

                from("file:src/main/data/in/csv?noop=true").split().tokenize("\n").unmarshal(bindy)
                        // constanr(true):-aggregate all using same expression
                        .aggregate(constant(true), new AttachAggregation())
                        //mandatory after aggregate
                        .completionTimeout(100)//end after this gives problem
                        .marshal(xmlDataFormat).log("xml body is ${body}")
                        .to("file:src/main/data/in/xml?fileName=convertedXml.xml");// .aggregate(new
                                                                                    // AttachAggreagation());
            }
        });
        context.start();
        Thread.sleep(5000);
    }
}
===================================================================================
package org.mycompany.conversion;

import java.util.ArrayList;
import java.util.List;

import org.apache.camel.Exchange;
import org.apache.camel.processor.aggregate.AggregationStrategy;

public class AttachAggregation implements AggregationStrategy {

    List<Person> list = new ArrayList();
    Greeting gre = new Greeting();

    @Override
//person-address
    // greeting-user
    public Exchange aggregate(Exchange oldExchange, Exchange newExchange) {

        if (oldExchange == null) {
            Person newBody1 = newExchange.getIn().getBody(Person.class);
            list.add(newBody1);
            return newExchange;
        } else {
            Person newBody2 = newExchange.getIn().getBody(Person.class);
            list.add(newBody2);

            gre.setPerson(list);
            oldExchange.getIn().setBody(gre);
            return oldExchange;
        }

    }

} 
```

# printing - 如何以编程方式访问打印机的墨水量？

> ID：12120056
> 
> 赞同：6
> 
> 时间：2012-08-25T07:24:08.297
> 
> 标签：printing, protocols, snmp

好的，这是一个特定于 Windows 的问题。

我需要能够访问连接到计算机的打印机的墨水量。可能是直接连接，也可能是网络连接。

我认识到每台打印机（或至少是打印机公司）可能会有所不同，但我在哪里可以找到它们如何向 PC 显示墨水量的信息。另外，阅读这些信息的最佳语言是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T09:15:07.820

好的，这是一个与操作系统无关的答案...... :-)

如果打印机不是非常便宜的型号，它将内置对[SNMP](http://en.wikipedia.org/wiki/SNMP)（简单网络管理协议）的支持。SNMP 查询可以从存储在其 MIB（管理信息库）中的网络设备返回当前值。

对于打印机，有一个称为[Printer MIB](http://www.ietf.org/rfc/rfc1759.txt)的标准定义。打印机 MIB 定义标准名称和树位置（OID == [ASN.1 表示法](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)中的*对象标识符*），在墨水标记打印机的情况下映射到墨水级别。`prtMarkerSuppliesLevel`

请注意，SNMP 还允许对标准 MIB进行*私有扩展。*大多数打印机供应商确实在他们的“私有 MIB”中隐藏了许多附加信息，尽管标准信息应该始终可以通过打印机 MIB OID 的查询获得。

实际上，每种编程语言都有标准库，可以帮助您从自己的应用程序中进行特定的 SNMP 查询。

一种这样的实现是开源的，称为[`Net-SNMP`](http://www.net-snmp.org/)，它还带有一些强大的命令行工具来运行 SNMP 查询。

我*认为*查询所有墨水级别的 OID 是`.1.3.6.1.2.1.43.11.1.1.9`（[这个网页](http://www.oidview.com/mibs/0/Printer-MIB.html)证实了我的看法）但我现在无法验证，因为我的局域网中目前没有打印机。所以 Net-SNMP`snmpget`查询墨水量的命令应该是这样的：

```
snmpget                       \
  -c public                   \
   192.168.222.111            \
   ".1.3.6.1.2.1.43.11.1.1.9" 
```

`public`标准*社区字符串*和`192.168.222.111`打印机的 IP 地址在哪里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T12:47:50.040

我有一个支持 SNMP 的 HP 8600 pro N911a 来做一些挖掘工作，所以下面的命令可能会对你有所帮助。请注意，此特定模型存在一些固件问题，您无法使用 snmpget 查询“洋红色”，但您会看到 snmpwalk 的值（它执行某种递归向下钻取）。

旧：您可以查询值的名称和序列，但到目前为止我找不到“最大值”来计算一个干净的百分比；（。我猜到目前为止这些值是相对于 255，所以除以 2.55产生一个百分比。

更新：马塞洛的提示很棒！从寄存器 .8.* 您可以读取每个墨盒的最大级别，假设最大值只能是 8 位值，我完全错了。我已更新示例脚本以读取最大值并计算 c

[在 Cacti 论坛上](http://forums.cacti.net/about12970.html)也有一些讨论。一个答案确认墨水量以百分比测量（值 15 是枚举中的“百分比”）：

```
# snmpwalk -v1 -c public 192.168.100.173 1.3.6.1.2.1.43.11.1.1.7                 
SNMPv2-SMI::mib-2.43.11.1.1.7.0.1 = INTEGER: 15
SNMPv2-SMI::mib-2.43.11.1.1.7.0.2 = INTEGER: 15
SNMPv2-SMI::mib-2.43.11.1.1.7.0.3 = INTEGER: 15
SNMPv2-SMI::mib-2.43.11.1.1.7.0.4 = INTEGER: 15 
```

您需要安装 net-snmp 软件包。如果您不在 Linux 上，您可能需要为您喜欢的操作系统挖掘 SNMP 命令行工具。

```
# snmpwalk -v1 -c public 192.168.100.173 1.3.6.1.2.1.43.11.1.1.6.0
SNMPv2-SMI::mib-2.43.11.1.1.6.0.1 = STRING: "black ink"
SNMPv2-SMI::mib-2.43.11.1.1.6.0.2 = STRING: "yellow ink"
SNMPv2-SMI::mib-2.43.11.1.1.6.0.3 = STRING: "cyan ink"
SNMPv2-SMI::mib-2.43.11.1.1.6.0.4 = STRING: "magenta ink"

# snmpwalk -v1 -c public 192.168.100.173 1.3.6.1.2.1.43.11.1.1.9.0
SNMPv2-SMI::mib-2.43.11.1.1.9.0.1 = INTEGER: 231
SNMPv2-SMI::mib-2.43.11.1.1.9.0.2 = INTEGER: 94
SNMPv2-SMI::mib-2.43.11.1.1.9.0.3 = INTEGER: 210
SNMPv2-SMI::mib-2.43.11.1.1.9.0.4 = INTEGER: 174

# snmpwalk -v1 -c praxis 192.168.100.173 1.3.6.1.2.1.43.11.1.1.8.0
SNMPv2-SMI::mib-2.43.11.1.1.8.0.1 = INTEGER: 674
SNMPv2-SMI::mib-2.43.11.1.1.8.0.2 = INTEGER: 240
SNMPv2-SMI::mib-2.43.11.1.1.8.0.3 = INTEGER: 226
SNMPv2-SMI::mib-2.43.11.1.1.8.0.4 = INTEGER: 241 
```

在我的 Linux 机器上，我使用以下脚本进行一些漂亮的打印：

```
#!/bin/sh

PATH=/opt/bin${PATH:+:$PATH}

# get current ink levels
eval $(snmpwalk -v1 -c praxis 192.168.100.173 1.3.6.1.2.1.43.11.1.1.6.0 |
perl -ne 'print "c[$1]=$2\n" if(m!SNMPv2-SMI::mib-2.43.11.1.1.6.0.(\d) = STRING:\s+"(\w+) ink"!i);')

# get max ink level per cartridge
eval $(snmpwalk -v1 -c praxis 192.168.100.173 1.3.6.1.2.1.43.11.1.1.8.0 |
perl -ne 'print "max[$1]=$2\n" if(m!SNMPv2-SMI::mib-2.43.11.1.1.8.0.(\d) = INTEGER:\s+(\d+)!i);')

snmpwalk -v1 -c praxis 192.168.100.173 1.3.6.1.2.1.43.11.1.1.9.0 |
perl -ne '
    my @c=("","'${c[1]}'","'${c[2]}'","'${c[3]}'","'${c[4]}'");
    my @max=("","'${max[1]}'","'${max[2]}'","'${max[3]}'","'${max[4]}'");
    printf"# $c[$1]=$2 (%.0f)\n",$2/$max[$1]*100
        if(m!SNMPv2-SMI::mib-2.43.11.1.1.9.0.(\d) = INTEGER:\s+(\d+)!i);' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-06T23:03:12.170

我真的很喜欢tseeling的方法！

作为补充，我发现 OID 的最大值`... .9`并不是他猜测的 255，但它实际上因每个墨盒而异。这些值可以从 OID`.1.3.6.1.2.1.43.11.1.1.8`获得（除以这些值获得的结果与从 hplip.xml 运行 hp-inklevels 命令获得的结果相匹配。

我编写了自己的脚本，输出如下所示的 CSV（假设打印机 IP 地址为 192.168.1.20）：

```
# ./hpink 192.168.1.20
black,73,366,19.9454
yellow,107,115,93.0435
cyan,100,108,92.5926
magenta,106,114,92.9825 
```

值按以下顺序：`<color_name>,<level>,<maxlevel>,<percentage>`

脚本源（人们会注意到，当拼图足够简单时，我通常更喜欢 awk 而不是 perl）：

```
#!/bin/sh

snmpwalk -v1 -c public $1 1.3.6.1.2.1.43.11.1.1 | awk '

/.*\.6\.0\./ {
  sub(/.*\./,"");
  split($0,TT,/[ "]*/);
  color[TT[1]]=TT[4];
}

/.*\.8\.0\./ {
  sub(/.*\./,"");
  split($0,TT,/[ "]*/);
  maxlevel[TT[1]]=TT[4];
}

/.*\.9\.0\./ {
  sub(/.*\./,"");
  split($0,TT,/[ "]*/);
  print color[TT[1]] "," TT[4] "," maxlevel[TT[1]] "," TT[4] / maxlevel[TT[1]] * 100;
}' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-10T10:51:21.683

另一种方法是使用 ipp。虽然我尝试过的大多数打印机都支持这两种打印机，但我找到了一种仅适用于 ipp 的打印机和一种仅适用于我的 snmp 的打印机。

简单的方法`ipptool`：

*   创建文件`colors.ipp`：

```
{
    VERSION 2.0
    OPERATION Get-Printer-Attributes

    GROUP operation-attributes-tag
    ATTR charset "attributes-charset" "utf-8"
    ATTR naturalLanguage "attributes-natural-language" "en"
    ATTR uri "printer-uri" $uri
    ATTR name "requesting-user-name" "John Doe"
    ATTR keyword "requested-attributes" "marker-colors","marker-high-levels","marker-levels","marker-low-levels","marker-names","marker-types"
} 
```

*   跑：

```
ipptool -v -t ipp://192.168.2.126/ipp/print colors.ipp 
```

*   响应：

```
"colors.ipp":
    Get-Printer-Attributes:
        attributes-charset (charset) = utf-8
        attributes-natural-language (naturalLanguage) = en
        printer-uri (uri) = ipp://192.168.2.126/ipp/print
        requesting-user-name (nameWithoutLanguage) = John Doe
        requested-attributes (1setOf keyword) = marker-colors,marker-high-levels,marker-levels,marker-low-levels,marker-names,marker-types
    colors                                                               [PASS]
        RECEIVED: 507 bytes in response
        status-code = successful-ok (successful-ok)
        attributes-charset (charset) = utf-8
        attributes-natural-language (naturalLanguage) = en-us
        marker-colors (1setOf nameWithoutLanguage) = #00FFFF,#FF00FF,#FFFF00,#000000,none
        marker-high-levels (1setOf integer) = 100,100,100,100,100
        marker-levels (1setOf integer) = 6,6,6,6,100
        marker-low-levels (1setOf integer) = 5,5,5,5,5
        marker-names (1setOf nameWithoutLanguage) = Cyan Toner,Magenta Toner,Yellow Toner,Black Toner,Waste Toner Box
        marker-types (1setOf keyword) = toner,toner,toner,toner,waste-toner 
```

`marker-levels`具有当前碳粉/墨水量，`marker-high-levels`最大（到目前为止，我在这里只看到了 100 个），`marker-names`描述了每个字段的含义（提示：对于您可能希望在第一个空格之后去除所有内容的颜色，许多打印机在此字段中包含墨盒类型） .

注意：以上是 2.3.1 的杯子。在 2.2.1 中，我不得不将关键字指定为一个字符串 ( `"marker-colors,marker-h....`)。或者可以完全保留，然后返回所有关键字。

有关可用属性的更多信息（打印机之间可能不同）：[https](https://www.cups.org/doc/spec-ipp.html)
: //www.cups.org/doc/spec-ipp.html 有关执行 ipp 调用的更多信息（包括 python 示例）：[https ://www.pwg.org/ipp /ippguide.html](https://www.pwg.org/ipp/ippguide.html)

# apache2 - 模块 wsgi_module 已加载，正在跳过

> ID：12120057
> 
> 赞同：6
> 
> 时间：2012-08-25T07:24:25.603
> 
> 标签：apache2, python-2.7, mod-wsgi

请帮帮我，我一直在尝试解决这个错误很长时间。

当我重新启动 apache 并键入此内容时`:sudo /usr/sbin/apachectl -t` ，我得到如下输出：
**[Fri Aug 24 17:02:58 2012] [warn] module wsgi_module is already loaded, skipping
Syntax OK**

出了什么问题？我已经检查了 etc/apache2/mods-enabled 中的 wsgi.load 文件。它只加载一次 mod_wsgi.so。我已经从源代码安装了 libapache-mod-wsgi 并且我正在使用 python 2.7.3。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T07:29:31.040

首先检查你是否在任何地方有两行说：

```
LoadModule wsgi_module modules/mod_wsgi.so 
```

如果你不这样做，那么它列出的一个文件必须被包含两次。

因此，请查找文件中的任何 Include 行，并查看文件是否会因为它们而被多次包含。特别注意通配符在 Include 指令中的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T04:10:25.673

您不止一次加载这些模块。尝试搜索和评论或删除重复的行：

**在 Centos/RHEL 中：**

```
grep ssl_module -rI /etc/httpd/*   
/etc/httpd/conf/httpd.conf:LoadModule ssl_module /usr/lib64/httpd/modules/mod_ssl.so
/etc/httpd/conf.d/ssl.conf:LoadModule ssl_module modules/mod_ssl.so 
```

在这种情况下，我在其中注释掉了`/etc/httpd/conf/httpd.conf`所有 SSL 内容`/etc/httpd/conf.d/ssl.conf`

相同的`mod_wsgi`

```
grep mod_wsgi -rI /etc/httpd/* 
```

**在 Debian/Ubuntu 中：**

```
grep ssl_module -rI /etc/apache2/* 
```

# c - 使用 %lu 打印 int 类型 - C+XINU

> ID：12120062
> 
> 赞同：1
> 
> 时间：2012-08-25T07:24:55.010
> 
> 标签：c, casting, printf, implicit-conversion, format-specifiers

我有一个给定的代码，我认为该代码有问题：我在 XINU 下编译。

下一个变量是相关的：

```
unsigned long ularray[];
int num;
char str[100]; 
```

有一个函数返回int：

```
int func(int i)
{
    return ularray[i];
} 
```

现在代码是这样的：

```
num = func(i);
sprintf(str, "number = %lu\n", num);
printf(str); 
```

问题是我在使用 %lu 打印时得到大数字，这是不正确的。

如果我将**%lu**更改为**%d**，我会得到正确的数字。例如：用 %lu 得到 27654342，而用 %di 得到 26，后者是正确的；

给出了变量，给出了函数的声明，我写了 body 但它必须返回 int；

我的问题是：

1.  我不熟悉'sprintf'也许问题在那里？

2.  我将 unsigned long 分配给 int，然后用 %lu 打印 int，对吗？

3.  我该如何解决这个问题？

提前致谢。

谢谢大家的回答。我只想提一下我在 XINU 下工作，我改变了文件的编译顺序以及你所知道的......它的工作和在 %lu 和 %d 上显示相同的数字。

我很清楚将 'unsigned long' 分配给 int 然后使用 %lu 打印是不正确的编码，可能会导致数据丢失。但正如我所说，给出了代码，我无法更改变量和打印命令。

顺便说一句，我没有错误或警告。我不知道为什么更改编译顺序可以解决问题，如果有人有想法，欢迎分享。

我要感谢所有试图帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:28:52.133

1）误解是一般的格式说明符

2) num 是一个 int - 因此，`%d`当 an`int`是您要打印的内容时是正确的。

3) 理想情况下

*   `int func(int i)`将会`unsigned long func(size_t i)`
*   并且`int num`会是`unsigned long num`
*   并且`sprintf(str, "number = %d\n", num);`会是`sprintf(str, "number = %lu\n", num);`

这样，就不会有缩小和转换——类型/值将在整个执行过程中正确保留。

并且要迂腐，`printf`应该是`printf("%s", str);`

如果你把警告级别调高，你的编译器会警告你其中一些事情。我已经编程了很长时间，但我仍然将警告级别高得令人讨厌（按照某些人的标准）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T07:32:54.923

> 我将 unsigned long 分配给 int，然后用 %lu 打印 int，对吗？

不，这根本不正确。考虑一下！Printf 尝试访问由您传入的变量表示的内存，在您的情况下，unsigned long 表示的位数比 int 多，因此当 printf 被告知打印一个 unsigned int 时，它会读取您的实际 int 并读取一些其他可能是垃圾的内存，因此是随机数。如果 printf 有一个原型准确地提到了 unsigned long，则编译器可以执行隐式转换并用零填充其余不需要的内存，但由于情况并非如此，您必须执行以下任一解决方案：

一，显式转换你的变量：

```
printf("%lu", (unsigned long)i); 
```

二、使用正确的格式说明符：

```
printf("%d", i); 
```

此外，将 unsigned long 分配给 int 存在问题 - 如果 long 包含太大的数字，那么它将不适合 int 并被截断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T07:28:44.370

如果您有`int`，请使用`%d`（或`%u`用于 unsigned int）。如果你有一个长的，使用`%ld`（或`%lu`无符号长）。
如果你告诉`printf`它你给它一个 long 但只传递一个 int，你将打印随机垃圾。（从技术上讲，这将是未定义的行为。）

这是否`int`以某种方式“来自”很长一段时间都没关系。一旦将其分配给较短的内容，多余的字节就会丢失。你只剩下一个 int 了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T07:39:06.507

> 我将 unsigned long 分配给 int，然后用 %lu 打印 int，对吗？

不，我建议*不要*先转换为 int ，否则只需使用 int 作为数组类型。存储更大的表示并只*使用*较小的表示似乎没有意义。无论哪种方式，冲刺结果将始终关闭，直到您将变量的类型（技术上是*encoding*）与格式的*转换说明符*正确配对。这意味着如果你传递一个 unsigned long ，使用`%ul`，如果它是一个 int ，使用`%i`or `%d`（不同的是它*总是*`%d`以 10为基数，可以使用额外的说明符以其他基数打印。*`%i`*

 *> 我该如何解决这个问题？

更改 func 的返回值和`num`to的编码`unsigned long`

```
unsigned long ularray[];
unsigned long num;
char str[100];

unsigned long func(int i)
{
    return ularray[i];
} 
```*

# r - (R, quantreg)：假设检验大范围的分位数

> ID：12120064
> 
> 赞同：3
> 
> 时间：2012-08-25T07:25:01.760
> 
> 标签：r, quantreg

我有一个带有 1 个回归量和 1 个回归量的分位数回归模型。我想假设检验回归量在每个分位数上都相等。我想到的一种方法是在 {0.01,0.02,....,0.99} 上测试所有 tau。但是，我将不得不写：

`anova(model1,model2,model3,.......,model99)`，其中每个模型对应一个不同的 tau。**问题：如何让 anova() 接受大量类型的模型，`rq`而无需手动输入它们？**

* * *

我的解决方案尝试是这样做：

```
y = rnorm(100)
x = rnorm(100)

rqs_object <- rq(y~x,tau=1:99/100)
anova(rqs_object) 
```

但是，不幸的是，`anova`显然不采用 object type `rqs`，只采用 type 。`rq`

* * *

交叉在[这里](http://www.talkstats.com/showthread.php/27704-Hypothesis-testing-multiple-quantiles-in-quantile-regression-%28quantreg-package%29)发布，直到我确定它对问题有很大的编程/专业元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:14:52.993

我专注于问题 1，并且只专注于编程部分。

一些数据：

```
set.seed(65465)
y = rnorm(100)
x = rnorm(100) 
```

现在我定义了一个函数，它将 tau 作为输入并进行拟合：

```
rqfits <- function(tau) {
  require(quantreg)
  rq(y~x,tau=tau)
} 
```

然后我可以将此函数应用于 taus 向量：

```
taus <- 1:5/10
fits <- lapply(taus,rqfits) 
```

结果是一个模型列表。我们现在可以使用`do.call`将我们的模型传递给`anova`：

```
do.call(anova,fits)

Quantile Regression Analysis of Deviance Table

Model: y ~ x
Joint Test of Equality of Slopes: tau in {  0.1 0.2 0.3 0.4 0.5  }

  Df Resid Df F value Pr(>F)
1  4      496  1.0388 0.3866
Warning:
In summary.rq(x, se = se, covariance = TRUE) : 2 non-positive fis 
```

# python - 我想使用 python 从文件中枚举文本

> ID：12120065
> 
> 赞同：2
> 
> 时间：2012-08-25T07:25:01.573
> 
> 标签：python, python-2.7

我有这个代码：

```
# -*- coding: utf-8 -*-
import random
import os, glob

guessesTaken = 325
ha=0

print('Hello! What is your name?')
name = raw_input()
number = random.randint(1, 20)
print('Well, ' + name + ', I am thinking of a number between 1 and 20.')

while guessesTaken  <10000 and ha<6:
    print('Take a guess.') # There are four spaces in front of print.
    guess = raw_input()
    guess = int(guess)

    guessesTaken = guessesTaken - 25
    ha = ha+1
    if guess < number:
        print('Your guess is too low.') # There are eight spaces in front of print.

    if guess > number:
        print('Your guess is too high.')

    if guess == number:
        break

if guess == number:
    guessesTaken = str(guessesTaken)
    ha = str(ha)
    print('Good job, ' + name + '! You guessed my number in ' + ha + ' guesses!')

    xa=len(name)

    f='f' 
    with open("f", "a") as myfile:

        myfile.write('name')     
        myfile.write(': ')
        myfile.write(name)
        myfile.write('          ')

        if len(name)==1:
            myfile.write(25 *' ')

        if len(name)==2:
            myfile.write(24 *' ')
        if len(name)==3:
            myfile.write(23 *' ')

        if len(name)==4:
            myfile.write(22 *' ')
        if len(name)==5:
            myfile.write(21 *' ')
        if len(name)==6:
            myfile.write(20 *' ')
        if len(name)==7:
            myfile.write(19 *' ')
        if len(name)==8:
            myfile.write(18 *' ')    

        if len(name)==9:
            myfile.write(17* ' ')

        if len(name)==10:
            myfile.write(16*' ')

        if len(name)==11:
            myfile.write(15*' ')
        if len(name)==12:
            myfile.write(14*' ')
        if len(name)==13:
            myfile.write(13*' ')        
        if len(name)==14:
            myfile.write(12*' ')
        if len(name)==15:
            myfile.write(11*' ')
        if len(name)==16:
            myfile.write(10*' ')
        if len(name)==17:
            myfile.write(9*' ')
        if len(name)==18:
            myfile.write(8*' ')

        if len(name)==19:
            myfile.write(7*' ')

        if len(name)==20:
            myfile.write(6*' ')
        if len(name)==21:
            myfile.write(5*' ')

        if len(name)==22:
            myfile.write(4*' ')       
        myfile.write('score')
        myfile.write(': ')
        myfile.write(guessesTaken)
        myfile.write('\n\n')

with open(f) as myfile:
        print myfile.read() 
```

我想看起来像：
1.name score
2.name score
3.name score
。. . . . .

我不知道如何在名称前枚举。

我想像记录一样对分数进行排序。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:05:50.460

稍微简单一点：

```
myfile = open('data.txt', 'r+a')
lines = myfile.readlines()
myfile.write(str(len(lines)+1)+'.'+name+' '+str(score)+'\n') 
```

*编辑*

忘记添加一个 \n 参数...在最后 XD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:54:04.787

你可以尝试这样的事情，我在`'a'`这里使用了追加模式（）将新行追加到文件的底部。我把格式留给你。：

```
with open('data1.txt','a') as f,open('data1.txt') as f1:
    lines=[x.strip() for x in f1]        #read the lines
    num=len(lines)+1
    f.write("{0}.{1:22s}{2}\n".format((num),name,ha)) 
```

**编辑：**

我错过了排序部分，所以这是你的排序功能：

```
def sortfile(fil):
    with open(fil,'r+') as f:
        lines=[x.strip() for x in f]
        lines.sort(key=lambda x:int(x.split()[-1]))   #sort as per score
        #print(lines)
        f.truncate(0)          #empty the file
        f.seek(0)              #move the cursor back to the start of the file
        for i,x in enumerate(lines):
            ind=x.index('.')           #fetch the index of '.'
            #print ("{0}.{1}\n".format(i+1,x[ind+1:]))
            f.write("{0}.{1}\n".format(i+1,x[ind+1:]))

sortfile('data1.txt')    #call the function whenever you want to sort the file as per scores 
```

# ruby-on-rails - Ruby on Rails 中的分组

> ID：12120067
> 
> 赞同：0
> 
> 时间：2012-08-25T07:25:36.510
> 
> 标签：ruby-on-rails

我在 Ruby on Rails 中有零个或多个属性的项目（文档）。文档属性有一个类型（“作者”、“发布者”等）。每个文档可以有多个相同类型的属性。

这些目前只是拉出db并列出如下：

```
<% @document.attribute_documents.each do |doc_attr| %>
  <b><%= doc_attr.attribute_type.try(:name) %>: </b>
  <%= "  #{doc_attr.value}" %>
  <%= ", #{doc_attr.attribute_location}" unless doc_attr.attribute_location.blank? %>
  <%= ", #{doc_attr.attribute_year}" unless doc_attr.attribute_year.blank? %><br />
<% end %> 
```

这给出了这样的结果，但并不令人满意：

*出版商：William Cavell, Holborn, London 印刷商：William Cavell
, Holborn, London
卖家：J Barber, Newcastle
卖家：C Etherington, York
卖家：Fletcher and Hodson, Cambridge
卖家：Wilson, Dublin* 

我正在寻找的是：

*出版商：William Cavell, Holborn, London 印刷商：
William Cavell, Holborn, London
卖家：J Barber, Newcastle, C Etherington, York, Fletcher and Hodson, Cambridge, Wilson, Dublin* 

所以我需要对属性类型进行分组，然后根据类型循环遍历值。在 RoR 中是否有一种简单的方法可以做到这一点？我的方法全错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:01:46.307

使用 rails 的[`group_by`](http://apidock.com/rails/Enumerable/group_by)方法：

```
<% @document.attribute_documents.group_by { |d| d.attribute_type.try(:name) }.each_pair do |type, doc_attrs|
  <b><%= type %>: </b>
  <% doc_attrs.each do |doc_attr| %>
    <%= "  #{doc_attr.value}" %>
    <%= ", #{doc_attr.attribute_location}" unless doc_attr.attribute_location.blank? %>
    <%= ", #{doc_attr.attribute_year}" unless doc_attr.attribute_year.blank? %><br />
  <% end %>
<% end %> 
```

还没有测试过，但我认为它应该可以工作。

更新：这将省略每行条目之间的逗号。稍后我会回过头来，基本上你需要使用`map`然后`join`在`doc_attrs`数组上。

更新（2）：

这是我正在寻找的表达式，以进入`doc_attrs.each`循环：

```
doc_attrs.map do |doc_attr|
  [:value, :attribute_location, :attribute_year].map do |attr|
    doc_attr.send(attr)
  end.delete_if(&:blank?).join(", ")
end.join(", ") 
```

我不再使用 erb 所以不太确定如何翻译它，但无论如何创建一个辅助函数并以这种方式构建它可能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:54:48.867

这样的事情呢？

```
<% @document.each do |doc| %>
  <b><%= doc.try(:name) %>: </b>
  <%= ", #{doc.location}" unless doc.location.blank? %>
  <%= ", #{doc.year}" unless doc_attr.year.blank? %><br />
  <%= ", #{doc.sellers.join(', '}" %>
<% end %> 
```

# jquery - 使用 jQuery 获取 DIV 中最后一个 DIV 的 ID

> ID：12120068
> 
> 赞同：10
> 
> 时间：2012-08-25T07:25:39.047
> 
> 标签：jquery, html

我有以下。

```
<div id=container>
    <div id=box1></div>
    <div id=box2></div>
    <div id=box3></div>
    <div id=box4></div>
    <div id=box5></div>
    <div id=box6></div>
</div> 
```

使用 jQuery 获取容器内最后一个 div 的 id 的正确方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-25T07:41:40.310

你可以试试这个：

***jQuery 代码***

```
$(document).ready(function(){
   $('#container').children().last().attr('id');
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-25T07:26:55.867

尝试这个：

```
var id = $('#container div:last').attr('id') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T07:26:53.310

那么你可以这样做：

```
$("#container div").last().attr("id") 
```

或者，如果您只想包含直接子级的 div `#container`（假设您的实际代码有更多元素并且可能在 div 中包含 div），请将上述选择器更改为`"#container > div"`.

但请注意，没有一种“正确”的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-25T07:43:44.927

您可以使用`.last()`帮助您匹配最后一个元素的方法。

然后你可以得到`id`

```
$('#container div').last().attr('id'); 
```

**[见演示](http://jsfiddle.net/CNzdj/)**。

**[更多关于 jquery .last()](http://api.jquery.com/last/)**

# sql-server - 创建服务请求参考号的最佳做法是什么？

> ID：12120071
> 
> 赞同：1
> 
> 时间：2012-08-25T07:26:20.120
> 
> 标签：sql-server

我将创建一个票务系统，用户可以在其中发布请求，然后假设系统返回请求的票号或参考号以跟踪其状态。我的问题是使用从 sql server 表生成的自动编号作为返回给用户的参考编号是否安全？猜测参考号不会成为问题，因为任何人都应该能够检查请求的状态，因为不涉及敏感数据。是否有任何最佳实践或更好的方法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:31:17.653

当然 - 使用 an`INT IDENTITY`可能是最简单和最安全的选择。

SQL Server 为您处理所有事情——您只需得到一个漂亮、干净的号码并完成它。

如果您愿意，您还可以将连续编号（您的`ID`）与例如项目或产品前缀组合以创建“案例编号”，如`PROJ-000005`，`OTHR-000006`等等。这可以通过使用表中的计算列轻松完成 - 如下所示：

```
ALTER TABLE dbo.YourTable
ADD PrefixedNumber AS Prefix + '-' + RIGHT('000000' + CAST(ID AS VARCHAR(10)), 6) PERSISTED 
```

然后，您的表将有一个带有自动生成数字的标识列`ID`，确定某种客户或项目或产品`Prefix`，并且您的计算列`PrefixedNumber`将包含那些花哨的前缀案例编号。

# vba - “插入”语法错误？

> ID：12120080
> 
> 赞同：1
> 
> 时间：2012-08-20T19:06:20.997
> 
> 标签：vba, ms-access

**使用 Access 07 -“使用 SQL 插入 INTO”：** 在附加的脚本中，它将数据插入到另一个表中，但前提是我删除了`OCC_Scenario`. 我需要 OCC_Scenario 和更多值。

该错误是语法错误，但我已经尝试了每种组合。任何人都可以看到语法错误吗？

```
SSql = "Insert INTO tbl_transactions (Caseid,OCC_Scenario,RoleId) Values  ('" & CaseId & "',[OCC_Scenario]" ',
SSql = SSql & "', 'SR');"
DoCmd.RunSQL SSql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:32:31.820

第一行末尾的撇号和逗号看起来不合适。

# c# - 使用 C# 进行 Excel 拼写检查

> ID：12120082
> 
> 赞同：1
> 
> 时间：2012-08-25T07:27:27.127
> 
> 标签：c#, excel, spell-checking

有人只是帮我解决这个问题！为什么这段代码不起作用。我在互联网上也找不到太多教程。

```
Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;
object misValue = System.Reflection.Missing.Value;
xlApp = new Excel.ApplicationClass();
xlWorkBook = xlApp.Workbooks.Add(misValue);
xlWorkShee=(Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);                 
xlApp.SpellingOptions.UserDict = "CUSTOM.DIC";     
var udict = xlApp.SpellingOptions.UserDict;
xlWorkSheet.CheckSpelling();        
xlWorkSheet.Cells[1, 1] = "Sstring";           
string tsql = "select nvalue from [role report]";
OleDbDataAdapter tda = new OleDbDataAdapter(tsql, con);
DataTable tdt = new DataTable();
con.Open();
tda.Fill(tdt);
con.Close();
int count = 0;

for (int x = 0; x<500; x++)
{
    if (tdt.Rows[x]["nvalue"].ToString()!= "")
    {
        xlWorkSheet.Cells[x+2, 1] = tdt.Rows[x]["nvalue"].ToString();
        count++;
    }
}

for (int k=0; k<count; y++)
{
     //bool t = false;
    if (xlWorkSheet.Cells[k+2, 1].ToString() != "")
    {
        if ((xlApp.CheckSpelling(xlWorkSheet.Cells[k+2, 1].ToString())))
            xlWorkSheet.Cells[k+2, 2] = "chk";
    }
}

try
{
    xlWorkBook.SaveAs("spellspell.xls",Excel.XlFileFormat.xlWorkbookNormal,
    misValue,Excel.XlSaveAsAccessMode.xlExclusive,misValue,                      
    misValue, misValue,misValue,misValue);
}
catch (Exception ex)
{ }
xlWorkBook.Close(true, misValue, misValue);
xlApp.Quit();

releaseObject(xlWorkSheet);
releaseObject(xlWorkBook);
releaseObject(xlApp);

MessageBox.Show("Excel file created, you can find the file c:\\csharp-Excel.xls") 
```

除了每个拼写错误的单词之外，我的输出应该在单元格中包含字符串“chk”。但是输出并没有显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:54:53.217

这段代码终于为我工作了！！！。从 Access Db 中提取数据并作为列存储在 Excel 中，并使用代码识别 Excel 表中拼写错误的单词。

```
 for (int y = 0; y <count; y++)
    {
    try
       {
   if(xlWorkSheet.Range["A" + (y + 2) + ""].Value.ToString() != "")
      {
     if (!(xlApp.CheckSpelling(xlWorkSheet.Range["A" + (y + 2) + ""].Value.ToString(), 
             udict, 1033)))
           {
              xlApp.Visible = false;

              xlWorkSheet.Cells[y + 2, 2] = "chk";            
                 }
              }
          }
     catch(Exception)
      {
       }
      } 
```

细胞的选择是让我忙碌的部分。最后

```
 if (!(xlApp.CheckSpelling(xlWorkSheet.Range["A" + (y + 2) + ""].Value.ToString(), 
         udict, 1033))) 
```

工作。它针对每个拼写错误的单词显示“chk”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T04:26:21.710

我想您可能想查看 MSDN 上的 API，这里是链接 =>
**Worksheet.CheckSpelling：http:**
[//msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.checkspelling( v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.checkspelling(v=vs.100).aspx)

**Application.CheckSpelling：http:**
[//msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.checkspelling](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.checkspelling)

根据定义，CheckSpelling 方法执行此操作，“检查单个单词的拼写。如果在其中一个字典中找到该单词，则返回**True**；如果未找到该单词，则返回**False**。”

这意味着，如果任何单词拼写错误，CheckSpelling 应该返回**False**（取决于该单词是否在给定的字典中）

在你的代码中，你正在做

```
if ((xlApp.CheckSpelling(xlWorkSheet.Cells[k+2, 1].ToString())))
    xlWorkSheet.Cells[k+2, 2] = "chk"; 
```

我认为这与您试图实现的目标相反。( `"have the string "chk" in the cell besides every wrongly spelled word"`)

所以只需添加！到你的 if 语句

```
if (!(xlApp.CheckSpelling(xlWorkSheet.Cells[k+2, 1].ToString())))
    xlWorkSheet.Cells[k+2, 2] = "chk"; 
```

这应该是你所追求的。

此外，为了代码的清晰和可读性，我强烈建议您将代码分解为函数、方法等。调用时要小心`xlWorkSheet.Cells[k+2, 1].ToString()`，因为它可能会给您 Null 异常而不先检查值。

# spring - tomcat url 在两台机器上表现不同（jsf 2，spring 3，prettyfaces）

> ID：12120096
> 
> 赞同：0
> 
> 时间：2012-08-25T07:30:05.957
> 
> 标签：spring, tomcat7, prettyfaces

我正在两台具有几乎相同规格的不同机器上开发（Win 7、eclipse juno、tomcat 7），源代码从 github 签出。

但是在我的笔记本电脑上，我的 url 行为与我的工作站上的不同。进入

```
http://localhost:8080/jeiwomisa/auth/login.xhtml 
```

适用于我的笔记本电脑，但不适用于我的工作站。

在我的工作站上，我必须使用：

```
http://localhost:8080/jeiwomisa/faces/auth/login.xhtml 
```

不同之处在于“/faces/”部分。这对所有链接都是一样的。我不明白，因为我认为我在两台机器上都有相同的配置。

我不确定这个问题究竟需要哪种配置，所以我只发布了我的 web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/app/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- pretty faces -->

<filter>
    <filter-name>Pretty Filter</filter-name>
    <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping>

<context-param>
    <param-name>com.ocpsoft.pretty.BASE_PACKAGES</param-name>
    <param-value>de.sveri.jeiwomisa.managed</param-value>
</context-param>

<!-- Project Stage Level -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<!-- JSF Servlet is defined to container -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

这是我定义 login.xhtml 的 security-app-context.xml：

```
<http use-expressions="true" auto-config="true">
    <intercept-url pattern="/test/**" access="permitAll" />
    <intercept-url pattern="/tasks/**" access="isAuthenticated()" />

    <!-- <intercept-url pattern="/**" access="denyAll" /> -->
    <form-login login-page="/auth/login.xhtml" />   
</http>

<context:annotation-config />
<b:bean id="userRepositoryImpl" class="de.sveri.jeiwomisa.model.UserRepositoryImpl"
    autowire="byType">
</b:bean>

<b:bean id="passwordEncoder"
    class="org.springframework.security.crypto.password.StandardPasswordEncoder">
</b:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userRepositoryImpl">
            <password-encoder hash="md5" />
    </authentication-provider>
</authentication-manager> 
```

如果需要，可以在以下位置找到完整代码：[github 代码](https://github.com/sveri/jeiwomisa/tree/master/jeiwomisa)

最好的问候， 斯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:18:07.323

you should add servlet mapping for both applications. try to add following code to youe web.xml file.

```
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:59:21.807

奇怪的。尝试清除浏览器缓存？您的配置肯定是正确的。

# powershell - 如何从 PowerShell 绑定 sqlcmd 的 -v 参数

> ID：12120106
> 
> 赞同：0
> 
> 时间：2012-08-25T07:31:18.140
> 
> 标签：powershell, sqlcmd

以下代码，直接设置 -v 参数是有效的

```
$sqlcmd = @(Resolve-Path "$env:ProgramFiles\Microsoft SQL Server\*\Tools\binn\SQLCMD.EXE")[0]

$path1 = 'D:\somescript.sql'

& $sqlcmd -b -S NB-BK\SQLEXPRESS -d BK_Prod -U sa -P mypassword -l 180 -i $path1 -v Mandant=1 SAPMandant="009" SAPEinrichtung="0001" 
```

但我需要一种从 PowerShell 变量中设置这些值的方法。

我试过：

```
$sqlcmd = @(Resolve-Path "$env:ProgramFiles\Microsoft SQL Server\*\Tools\binn\SQLCMD.EXE")[0]

$path1 = 'D:\somescript.sql'

$sqlcmdparameters = 'Mandant=1 SAPMandant="009" SAPEinrichtung="0001" '
& $sqlcmd -b -S NB-BK\SQLEXPRESS -d BK_Prod -U sa -P mypassword -l 180 -i $path1 -v $sqlcmdparameters 
```

我[在 SO 上](https://stackoverflow.com/questions/9714054/how-to-execute-sqlcmd-from-powershell)找到了这个，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:25:31.123

**我为 PowerShell V2**找到了以下解决方案

 **```
$sqlcmd = @(Resolve-Path "$env:ProgramFiles\Microsoft SQL Server\*\Tools\binn\SQLCMD.EXE")[0]
$path1 = 'D:\somescript.sql'
$cmdparameters = @(
    'Mandant=1',
    'SAPMandant="009"'
)

& $sqlcmd -b -S NB-BK\SQLEXPRESS -d BK_Prod -U sa -P mypassword -l 180 -i $path1 -v $cmdparameters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:46:06.487

尝试使用启动过程。这就是我为 Powershell 命令行解析问题所做的。首先尝试调用运算符（&），如果这不起作用，请将其包装在启动进程调用中。

```
$tempFile = [io.path]::GetTempFileName()

$exitCode = (start-process -FilePath $sqlcmd -ArgumentList @"
-b -S NB-BK\SQLEXPRESS -d BK_Prod -U sa -P mypassword -l 180 -i $path1 -v $sqlcmdparameters
"@ -Wait -RedirectStandardOutput $tempFile -NoNewWindow -Passthru).ExitCode 
```

通常在使用 start-process 时，您需要捕获退出代码并将输出重定向到临时文件以获取结果。然后我将有一些代码来检查 $exitcode 并清理 try/catch/finally 块中的临时文件**

# sql-server-2008 - CONTAINS 谓词在 SQL Server 2008 中也不返回它应该返回的所有行

> ID：12120107
> 
> 赞同：3
> 
> 时间：2012-08-25T07:31:53.050
> 
> 标签：sql-server-2008, full-text-search, contains

# 背景

在 SQL Server 2008 中，我在名为boats 的表上的名为boatType 的列上使用了全文索引。

boatType 字段包含一个以逗号分隔的船所属的boatType 列表。例如“多体船、三体船、巡洋舰”。

执行搜索的我的 SQL 查询使用 CONTAINS 谓词，如下所示：

包含（boatType，'“多体”'）

# 问题

一切正常，直到最近我注意到没有返回特定行，但是，返回了具有完全相同数据的其他行。

# 短期解决方案

我尝试通过从boatType 列中删除全文索引来重建索引，然后重新添加它。我等待索引重新填充并解决了问题，即返回了所有预期的行。

# 什么是长期解决方案？

好的，所以问题在短期内得到了解决，但如果这种情况发生一次，它可能会再次发生。

我假设（可能是错误的）全文索引上的“更改跟踪 = 自动”设置意味着对数据的任何更新都会导致索引的自动更新。

我没有设置任何人口计划，因为我假设如果我使用“更改跟踪 = 自动”，我不需要这样做。再说一次，也许我错了。

为了支持我上面的假设，添加到数据库或更改的新数据似乎确实触发了索引的更新，因为应该出现在搜索中的大多数行确实出现了。这只是少数。

在这里做的最好的事情是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:46:51.970

您不能依赖[MS Docs](http://technet.microsoft.com/en-us/library/ms142575%28v=sql.100%29.aspx)中的全文索引与索引数据的更新并行更新，

> 但是，全文索引在后台更新，因此传播的更改可能不会立即反映在索引中。

如果您要求船型搜索 100% 是最新的，请创建一个船型表和一个连接船到船型的多对多映射表。

# java - 标记不会改变

> ID：12120113
> 
> 赞同：3
> 
> 时间：2012-08-25T07:32:57.317
> 
> 标签：java, swing, applet, geometry, japplet

```
package CreatingWindows;
import javax.swing.*;
import java.awt.geom.*;
import java.awt.*;
import javax.swing.event.MouseInputAdapter;
import java.awt.event.MouseEvent;
public class myCurveApplet extends JApplet{
    @Override
    public void init(){
        this.add(pane);
        pane.addMouseListener(new MouseHandler());
        pane.addMouseMotionListener(new MouseHandler());
    }
    private class CurvePane extends JComponent{
        @Override
        public void paint(Graphics g){
            Graphics2D g2D = (Graphics2D)g;
            if(a!=null&&b!=null&&ctrl!=null){
                System.out.println("Repainted!");
                String text;
                aMark = new Marker(a);
                bMark = new Marker(b);
                ctrlMark = new Marker(ctrl);
                quadCurve = new QuadCurve2D.Double(a.x, a.y, ctrl.x, ctrl.y, b.x, b.y);

                aMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "A"+"\n"+"("+a.x+","+a.y+")";
                g2D.drawString(text,(int)a.x,(int)a.y+30);
                bMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "B"+"\n"+"("+b.x+","+b.y+")";
                g2D.drawString(text,(int)b.x,(int)b.y+30);
                ctrlMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "Control"+"\n"+"("+ctrl.x+","+ctrl.y+")";
                g2D.drawString(text,(int)ctrl.x,(int)ctrl.y+30);

                g2D.setPaint(Color.BLACK);
                g2D.draw(quadCurve);
            }
        }
    }
    private class MouseHandler extends java.awt.event.MouseAdapter{
        @Override
        public void mouseClicked(MouseEvent e){
            if(a==null||b==null||ctrl==null){
                if(a==null){
                    a = new Point2D.Double(e.getX(), e.getY());
                }else if(b==null){
                    b = new Point2D.Double(e.getX(), e.getY());
                }else{
                    ctrl = new Point2D.Double(e.getX(), e.getY());
                }
            }else if(aMark!=null&&bMark!=null&&ctrlMark!=null){
                if(aMark.contains(e.getX(),e.getY())){
                    selectedPoint = a;
                }else if(bMark.contains(e.getX(),e.getY())){
                    selectedPoint = b;
                }else if(ctrlMark.contains(e.getX(),e.getY())){
                    selectedPoint = ctrl;
                }
            }
        }
        @Override
        public void mouseDragged(MouseEvent e){
            if(selectedPoint!=null){
                selectedPoint.x = e.getX();
                selectedPoint.y = e.getY();
            }
        }
        @Override
        public void mouseReleased(MouseEvent e){
            selectedPoint = null;
            pane.repaint();
        }
        private Point2D.Double selectedPoint;
    }
    private class Marker{
        public Marker(Point2D.Double center){
            this.center.setLocation(center);
            circle = new Ellipse2D.Double(center.x,center.y,r,r);
        }
        public void draw(Graphics g){
            Graphics2D g2D = (Graphics2D)g;
            if(circle!=null){
                g2D.setPaint(selectedColor);
                g2D.draw(circle);
            }
        }
        public boolean contains(int x,int y){
            return circle.contains(x, y);
        }
        public void setLocation(int x,int y){
            center.x = x;
            center.y = y;
            circle = new Ellipse2D.Double(center.x,center.y,r,r);
        }
        public Point2D.Double center = new Point2D.Double();
        private Ellipse2D.Double circle;
        private static final double r = 6;
    }

    private Point2D.Double a;
    private Point2D.Double b;
    private Point2D.Double ctrl;
    private QuadCurve2D.Double quadCurve;
    Marker aMark;
    Marker bMark;
    Marker ctrlMark;
    private Color selectedColor = Color.orange;
    private CurvePane pane = new CurvePane();
} 
```

这是创建它的源代码：
![在此处输入图像描述](../Images/5c1cd3dacc8141e142d94d8b2e7d0036.png)

这里的事情是允许用户通过在屏幕上拖动点来更改曲线，但不知何故我无法做到这一点。请告诉我要进行哪些更改以及为什么要进行更改！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T08:00:13.257

那里有几个问题。

第**一个原因**是您的程序无法运行，原因如下：

您分配给对象`selectedPoint`的**副本**（a 或 b 或 ctrl ）。当您在内部修改它时，`mouseDragged`您实际上是在修改其中一个对象（selectedPoint）的副本，而不是原始对象。所以当你重建曲线时：

```
quadCurve = new QuadCurve2D.Double(a.x, a.y, ctrl.x, ctrl.y, b.x, b.y); 
```

ab 和 ctrl 始终具有相同的初始值，因为您只修改了其中一个的副本（selectedPoint）。

要解决此问题，您需要直接修改所需的对象。在你的情况下，我会在你的标记中添加一个字段（例如字符串名称），我会保存标记而不是点。就像是：

```
if(aMark!=null&&bMark!=null&&ctrlMark!=null){
     if(aMark.contains(e.getX(),e.getY())){
         selectedMarker = aMark;
     }else if(bMark.contains(e.getX(),e.getY())){
         selectedMarker = bMark;
     }else if(ctrlMark.contains(e.getX(),e.getY())){
         selectedMarker = ctrlMark;
     }
} 
```

然后，当您拖动鼠标时，检查哪个标记处于活动状态并直接更改位置：

```
public void mouseDragged(MouseEvent e){
        if(selectedMarker !=null){
            if (0 == selectedMarker.getName().compareTo("ctrlMark"))
                ctrl.x = e.getX();
                ctrl.y = e.getY();
        }
} 
```

第二**个原因**是它`mouseListener`使用`mouseMotionListener`了两个不同的 MouseHandler 实例。因此，您有 2 个 selectedPoint（或更好的 selectedMarker）副本，一个由`MouseDragged`(mouseMotionListener) 使用，另一个由`MouseClicked`(MouseListener) 使用。

您可以将 selectedMarker 声明为静态来解决此问题。

* * *

您的程序中还有其他错误。特别：

*   **直接覆盖油漆是错误的**。而是覆盖`paintComponent`并调用基本方法：`public void paintComponent(Graphics g){super.paintComponent(g);`
*   **在帧时创建无用的对象**：您在 paintComponent 方法中实例化新对象。这可能是一个很大的开销。将它们实例化一次，并在实际修改对象坐标时修改所需的
*   **命名约定**：类使用大写字母。

* * *

这是一个带有一些修复的工作片段：

```
import javax.swing.*;
import java.awt.geom.*;
import java.awt.*;
import javax.swing.event.MouseInputAdapter;
import java.awt.event.MouseEvent;
public class MyCurveApplet extends JApplet{
     private static Marker selectedMarker;
    @Override
    public void init(){
        this.add(pane);
        pane.addMouseListener(new MouseHandler());
        pane.addMouseMotionListener(new MouseHandler());
    }
    private class CurvePane extends JComponent{
        @Override
        public void paintComponent(Graphics g){
            super.paintComponent(g);
            Graphics2D g2D = (Graphics2D)g;
            if(a!=null&&b!=null&&ctrl!=null){
                System.out.println("Repainted!");
                String text;
                aMark = new Marker(a,"a");
                bMark = new Marker(b,"b");
                ctrlMark = new Marker(ctrl,"ctrl");
                quadCurve = new QuadCurve2D.Double(a.x, a.y, ctrl.x, ctrl.y, b.x, b.y);

                aMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "A"+"\n"+"("+a.x+","+a.y+")";
                g2D.drawString(text,(int)a.x,(int)a.y+30);
                bMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "B"+"\n"+"("+b.x+","+b.y+")";
                g2D.drawString(text,(int)b.x,(int)b.y+30);
                ctrlMark.draw(g);
                g2D.setPaint(Color.BLACK);
                text = "Control"+"\n"+"("+ctrl.x+","+ctrl.y+")";
                g2D.drawString(text,(int)ctrl.x,(int)ctrl.y+30);

                g2D.setPaint(Color.BLACK);
                g2D.draw(quadCurve);
            }
        }
    }
    private class MouseHandler extends java.awt.event.MouseAdapter{
        @Override
        public void mousePressed(MouseEvent e){

            if(a==null||b==null||ctrl==null){
                System.out.println("FOO");
                if(a==null){
                    a = new Point2D.Double(e.getX(), e.getY());
                }else if(b==null){
                    b = new Point2D.Double(e.getX(), e.getY());
                }else{
                    ctrl = new Point2D.Double(e.getX(), e.getY());
                }
            }else if(aMark!=null&&bMark!=null&&ctrlMark!=null){
                if(aMark.contains(e.getX(),e.getY())){
                    System.out.println("SelecteMarker A");
                    selectedMarker = aMark;
                }else if(bMark.contains(e.getX(),e.getY())){
                    System.out.println("SelecteMarker B");
                    selectedMarker = bMark;
                }else if(ctrlMark.contains(e.getX(),e.getY())){
                    System.out.println("SelecteMarker CTRL");
                    selectedMarker = ctrlMark;
                }
            }
        }
        @Override
        public void mouseDragged(MouseEvent e){
            if(selectedMarker!=null){
                if (0 == selectedMarker.name.compareTo("a")){
                    a.x = e.getX();
                    a.y = e.getY(); 
                }else if (0 == selectedMarker.name.compareTo("b")){
                    b.x = e.getX();
                    b.y = e.getY();
                }else if (0 == selectedMarker.name.compareTo("ctrl")){
                    ctrl.x = e.getX();
                    ctrl.y = e.getY();

                }

                pane.repaint();
            }
        }
        @Override
        public void mouseReleased(MouseEvent e){
            System.out.println("SelectedMark NULL");
            selectedMarker = null;
            pane.repaint();
        }

    }
    private class Marker{
        public String name;
        public Marker(Point2D.Double center, String name){
            this.name = name;
            this.center.setLocation(center);
            circle = new Ellipse2D.Double(center.x,center.y,r,r);
        }
        public void draw(Graphics g){
            Graphics2D g2D = (Graphics2D)g;
            if(circle!=null){
                g2D.setPaint(selectedColor);
                g2D.draw(circle);
            }
        }
        public boolean contains(int x,int y){
            return circle.contains(x, y);
        }
        public void setLocation(int x,int y){
            center.x = x;
            center.y = y;
            circle = new Ellipse2D.Double(center.x,center.y,r,r);
        }
        public Point2D.Double center = new Point2D.Double();
        private Ellipse2D.Double circle;
        private static final double r = 6;
    }

    private Point2D.Double a;
    private Point2D.Double b;
    private Point2D.Double ctrl;
    private QuadCurve2D.Double quadCurve;
    Marker aMark;
    Marker bMark;
    Marker ctrlMark;
    private Color selectedColor = Color.orange;
    private CurvePane pane = new CurvePane();
} 
```

# oracle - 在 JBoss 上启用 OJDBC 日志记录

> ID：12120118
> 
> 赞同：1
> 
> 时间：2012-08-25T07:33:19.657
> 
> 标签：oracle, logging, jdbc

我在使用`ojdbc6.jar`. 因此，我想通过使用 ojdbc6_g.jar 来启用日志记录。

我正在使用`JBoss AS 7.1`.

如何添加这些 Java 选项：

```
-Doracle.jdbc.Trace=true 
-Djava.util.logging.config.file 
```

我必须添加到`Eclipse`or `JBoss`or`Oracle`数据库吗？我的猜测是`Eclipse`。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:26:11.417

*   JDBC 驱动程序必须在 JBOSS 服务器的类路径中，否则 JBOSS 无法找到 oracle 服务器
*   这也可能是网络问题
*   你也可以在一行中混合几个概念；奇怪的

所以我们需要有关您的问题的更多详细信息，例如错误；日志等

# java - 如何确定 JVM 中每一代堆的大小？

> ID：12120127
> 
> 赞同：5
> 
> 时间：2012-08-25T07:36:35.480
> 
> 标签：java, jvm, heap-memory

如果我在任何时候使用 -Xms256M 和 -Xmx512M 启动我的 JVM，我是否可以确定专门分配给堆的年轻代和终身代的空间量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T07:47:48.770

我假设您的意思是通过*编程*方式确定这一点。你应该看看[`java.lang.management`](https://docs.oracle.com/javase/7/docs/api/java/lang/management/package-summary.html)。特别[`ManagementFactory.getMemoryPoolMXBeans`](https://docs.oracle.com/javase/7/docs/api/java/lang/management/ManagementFactory.html#getMemoryPoolMXBeans())是这里应该很有用。

```
final List<MemoryPoolMXBeans> pools = ManagementFactory.getMemoryPoolMXBeans();
for (final MemoryPoolMXBean pool : pools) {
  if (pool.getType() == MemoryType.HEAP) {
    final String name = pool.getName();
    final MemoryUsage usage = pool.getUsage();
    if (name.startsWith("Eden")) {
      System.out.println("found eden: " + usage);
    } else if (name.startsWith("Tenured")) {
      System.out.println("found tenured: " + usage);
    }
  }
} 
```

这应该使用 HotSpot JVM 工作。

如果您**不**希望以编程方式执行此操作，[VisualVM](https://web.archive.org/web/20170729032925/http://visualvm.java.net:80/)（`jvisualvm`在 JDK 中）允许您监视堆使用情况以及许多其他漂亮的东西。

[![](../Images/2fdb82f9fb86580a5e0a05130dbb3b04.png)](https://i.stack.imgur.com/vImPb.jpg)
[（来源：[java.net](https://visualvm.java.net/images/monitor.jpg)）]

但是请注意，VisualVM 不支持开箱即用地监控特定的内存池。你需要安装[jvmstat](https://web.archive.org/web/20120719044644/http://java.sun.com:80/performance/jvmstat/)。然后，您必须从 VisualVM 的插件管理器安装**Visual GC插件。**

[http://puu.sh/YCpX](http://puu.sh/YCpX)

安装并重启 Visual VM 后，我们可以通过 Visual GC 选项卡更深入地查看堆使用情况。

[http://puu.sh/YCqD](http://puu.sh/YCqD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:46:40.277

使用[JConsole](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)轻松监控堆大小。您可以在内存选项卡中看到不同的生成大小。从图表下拉列表中选择您想要的生成。

# java - Grails 项目在 STS 版本 2.9.2 中未自动编译

> ID：12120132
> 
> 赞同：0
> 
> 时间：2012-08-25T07:37:46.260
> 
> 标签：java, grails, groovy, sts-springsourcetoolsuite, springsource

我有一个有几个插件的项目。它有相当多的类。问题是当我试图将更改保存在我的代码中（即在控制器或 gsp 文件中）时，它不会自动编译。顺便说一下，该项目正在运行，但是如果我更改控制器或 gsp 文件中的某些内容，它不会自动编译，因此更改不会生效。我必须先停止运行过程，然后再次运行它才能使更改生效。我最近才遇到这个问题。我正在使用 SpringSourceToolSuite 版本：2.9.2.RELEASE。我检查了自动构建选项，它被打开了。知道为什么会发生这种情况以及如何解决吗？

# c# - 如何在未安装 SQL Server 的计算机上使用其 Sql Server 数据库运行桌面应用程序

> ID：12120133
> 
> 赞同：2
> 
> 时间：2012-08-25T07:37:47.757
> 
> 标签：c#, sql, sql-server, visual-studio, connection-string

我已经使用 Visual Studio 2010 和 SQL Server 2008 完成了一个桌面应用程序。它在我的机器上运行良好（我有一个 SQL Server 2008 和 2005 ）。数据库是本地的且不可更改，我希望此应用程序能够在没有安装 SQL Server 的机器上成功运行。

我的连接字符串是：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\KBank.mdf;Integrated Security=True;User Instance=True;Connection Timeout=300 
```

我想知道最好和最简单的方法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:44:57.100

最简单的方法是为您的应用程序创建一个设置，将 SQL Server 2008 声明为先决条件。就是这样。

如需进一步帮助，您必须提供有关如何在应用程序中使用数据库以及是否有办法托管应用程序将连接到的公共 sql 服务器实例的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T08:00:07.980

如果您使用该`AttachDbFilename=|DataDirectory|\KBank.mdf;User Instance=True`方法，那么您别无选择，只能在该/每台应该使用您的应用程序的机器上本地安装 SQL Server **Express （并且没有其他版本！）。**

在我看来，这种方法存在严重缺陷，并且限制了您的灵活性。

我的建议是使用*真正的*服务器方法：将您的数据库放在服务器上（在您的开发环境和生产环境中），然后您可以灵活地在每个用户的机器上拥有一个 SQL Server 实例（如果那样的话有意义），或者您可以拥有一个客户端仅连接到的集中式服务器（未安装本地数据库服务器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T07:59:21.767

如果数据库是**“本地且不可更改的”**，那么[精简版](http://www.mikeborozdin.com/post/Introducing-Microsoft-SQL-Server-Compact-Edition-%28Part-I%29.aspx)怎么样？这样您的客户就不需要安装完整的 sql server 实例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:22:15.073

我同意尼克的观点。如果您不想在机器上安装 SQL Server，那么 SQL Server 精简版将是一种选择。语法与 SQL Server 非常相似，但有一些限制。就像您不能在精简版中拥有存储过程等等。

您可能希望访问[SQL CE 教程](http://msdn.microsoft.com/en-us/sqlserver/bb895908.aspx)作为开发资源。

# android - 如何使用 One Image 支持 Android 中的所有屏幕和密度设备

> ID：12120134
> 
> 赞同：0
> 
> 时间：2012-08-25T07:37:47.770
> 
> 标签：android, drawable, nine-patch, android-screen-support

在这里我开发了一个 android 应用程序，我有一个尺寸为 197*253 的图像，taht 尺寸用于平板电脑。但我想在小屏幕设备和移动屏幕设备中使用。在这种情况下，我可以使用九块图像概念吗？

请帮我，

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:48:07.773

取决于**您的应用程序中图像的用途**。

如果*要拉伸*（如按钮和布局的背景），那么[NinePatchDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch)是解决方案。要将您的 .png 转换为 9-patch，请[按照以下步骤](http://developer.android.com/tools/help/draw9patch.html)操作。

如果您的图像是*图标图像*（如启动器、操作栏、菜单和通知图标），那么您应该为不同的大小使用不同的 .png。您可以手动生成这些不同的尺寸（通过使用 Photoshop 或您用来调整适当尺寸的任何工具），也可以[使用这些工具自动生成它们](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)。

# c# - MVC3如何检查HttpPostedFileBase是否是图像

> ID：12120135
> 
> 赞同：25
> 
> 时间：2012-08-25T07:37:57.833
> 
> 标签：c#, asp.net-mvc-3, file-upload, httppostedfilebase

我有一个这样的控制器：

```
public ActionResult Upload (int id, HttpPostedFileBase uploadFile)
{
....
} 
```

如何确保 uploadFile 是图像（jpg、png 等）

我试过了

```
using (var bitmapImage = new Bitmap (uploadFile.InputStream)) {..} 
```

如果无法创建 bitmapImage，则会引发 ArgumentException。

有没有更好的方法，例如通过查看up​​loadFile.FileName？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-25T08:00:50.370

您可以`HttpPostedFileBase`为此检查对象的属性

*   内容类型
*   FileName（检查文件扩展名，你已经知道了:)）

![在此处输入图像描述](../Images/b5dc2147b46a65842a877e05e2e983a5.png)

这里还有一个小方法，我已经准备好了你可以使用/扩展...

```
private bool IsImage(HttpPostedFileBase file)
{
    if (file.ContentType.Contains("image"))
    {
        return true; 
    }

    string[] formats = new string[] { ".jpg", ".png", ".gif", ".jpeg" }; // add more if u like...

    // linq from Henrik Stenbæk
    return formats.Any(item => file.FileName.EndsWith(item, StringComparison.OrdinalIgnoreCase));
} 
```

我也在[这里写了一篇关于这个的文章](http://yassershaikh.com/how-to-check-if-an-uploaded-file-is-an-image-or-not-in-asp-net-mvc-3/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-25T08:32:06.453

您可以检查文件名和扩展名以及 MIME 类型，但这可能不可靠，因为用户可以在上传之前简单地重命名文件。这是通过查看文件内容来实现这一目标的可靠方法：[https ://stackoverflow.com/a/6388927/29407](https://stackoverflow.com/a/6388927/29407)

您当然可以将其扩展到除 PNG 之外的其他已知图像类型格式，如下所示：

```
public class ValidateFileAttribute : RequiredAttribute
{
    public override bool IsValid(object value)
    {
        var file = value as HttpPostedFileBase;
        if (file == null)
        {
            return false;
        }

        if (file.ContentLength > 1 * 1024 * 1024)
        {
            return false;
        }

        try
        {
            var allowedFormats = new[] 
            { 
                ImageFormat.Jpeg, 
                ImageFormat.Png, 
                ImageFormat.Gif, 
                ImageFormat.Bmp 
            };

            using (var img = Image.FromStream(file.InputStream))
            {
                return allowedFormats.Contains(img.RawFormat);
            }
        }
        catch { }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-03T03:25:15.980

或者您可以通过 html 属性“接受”在客户端检查它以尽快过滤文件：

```
@Html.TextBoxFor(x => x.HomeDeviceImage, new { @type = "file", @accept = "image/x-png, image/gif, image/jpeg" }) 
```

这只会显示在您的默认属性中定义的文件类型。请注意，用户仍然可以将 filetye 更改为“所有文件”，考虑到这一点，最好检查一下：

[解决了问题](http://forums.phpfreaks.com/topic/282302-applying-javascript-to-check-file-size-and-extension/ "这") ，一个用于检查扩展的 javascript 片段，然后进行一些编辑以禁用按钮，例如：

```
 $('input:submit').attr('disabled', true); 
```

直到文件扩展名正确。尽管如此，请在服务器端进行检查。:)

# forms - InfoPath 表单重置主数据连接

> ID：12120138
> 
> 赞同：0
> 
> 时间：2012-08-25T07:38:40.877
> 
> 标签：forms, list, sharepoint, infopath

我正在构建一个连接到 SharePoint 列表的 InfoPath 表单。

在用户填写了几个字段（可以唯一标识一条记录）后，我重新查询主数据连接以查看该项目是否已存在。这可以正常工作并将现有记录的其余详细信息加载到表单中。

但是，如果记录不存在，则表单上的所有字段都将被禁用...如何将主数据连接重置为其初始状态以允许提交新项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:40:05.153

您将需要设置条件规则。因此，例如在最后一个字段上做一个插入做你的查询，然后在你的规则中（你可能需要多个取决于有多少字段），说如果字段是（无论如何）然后做（无论如何）。禁用功能在规则的格式部分设置。

# javascript - Facebook 为 400KB 加载 15 个 javascript 文件

> ID：12120142
> 
> 赞同：3
> 
> 时间：2012-08-25T07:39:10.280
> 
> 标签：javascript, facebook, pageload

我们正在尝试优化我们的页面加载时间，但我们有大量的 javascript 文件，这些文件大多来自 facebook。是的，我承认我们从 facebook 获得了一些好处（比如按钮、评论等），但据我所知，所有内容都应该在一个文件“all.js”中缩小，这就是我们拥有的代码

```
(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=XXXX";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

检查萤火虫后，这是我们得到的： ![在此处输入图像描述](../Images/5ad1d8a42ae77580015ef21908014bb1.png)

当然，删除代码也会删除这些文件。有谁知道如何最小化这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:58:19.480

所有这些 javascript 文件都是在[DOM Ready 事件](http://yuilibrary.com/yui/docs/event/domready.html)触发后加载的——它们不会影响您的页面加载时间。

# c++ - 混淆后你的代码有多安全？

> ID：12120143
> 
> 赞同：5
> 
> 时间：2012-08-25T07:39:36.507
> 
> 标签：c++, .net, obfuscation

使用 RedGate 的 Reflector，您可以轻松获得应用程序的完整源代码。但是为了减少算法被发现的机会，有一些混淆器可以减少这种可能性。

我的问题是：

*   混淆器的效果如何？
*   在隐藏算法方面更安全的是：没有 .NET 库或混淆的 .NET 程序的 C++。
*   还有其他方法可以使 .NET 源代码更加安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:56:54.080

如果您确实想保护某些东西，请选择 C++，因为在 .NET 世界中，有一个名为 de4dot 的强大反混淆器（参见此处：[https](https://github.com/0xd4d/de4dot) ://github.com/0xd4d/de4dot ），它可以反混淆市场上大多数混淆器产生的内容, 事件它不明确知道的。

然而，这只会提高标准，因为即使在 c++ 世界中，也有强大的工具（IDA：[http](http://www.hex-rays.com/products/ida/index.shtml) ://www.hex-rays.com/products/ida/index.shtml ）。

还有其他解决方案，例如混合代码程序集，您可以在其中将要隐藏的部分隐藏在本机代码中，将其余部分托管。有关更多信息，请参见此处：[混合（本机和托管）程序集](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:13:56.143

“在获取源代码方面更安全的是：没有 .net 库的 c++ 程序或 .net 混淆程序。” 没有.net ofc...

混淆的 .net .java 仍然很容易反编译。有专业的混淆器，这使得代码不可重新编译那些会减慢黑客过程的速度。

您是否听说过可以关闭可以打开的东西？即使写的是Assembly ...

通常初学者程序员都害怕这种盗窃。我建议首先创建一个软件部分，值得为他人窃取（而不是为您）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T09:17:33.507

因为 .NET 被设计为自我描述的，所以使用混淆器只会阻碍他们的进步。尽管反编译器的可读性会降低，但任何了解 MSIL 的人都会有更好的机会。甚至 C++ 应用程序在某个阶段也将是可反编译的，因为程序最终会在内存中逐步执行。C++ 应用程序需要更长的时间来解决它，但如果黑客知道 Assembler（如果他们正在反编译您的应用程序以获得对算法的访问权限，他们可能会知道），这只是时间问题。

*混淆实际上是在合理*的时间跨度内使其尽可能困难，而不是让它变得不可能。相同的原则在于加密。加密并非不可能破解，只是需要很长时间，以至于上下文在 70 到 80 年内可能没有任何用处。

除了这里介绍的之外，我还可以想到 2 个替代方案：

*   在远程位置托管算法
*   将算法托管在硬件组件中 - 非常非常昂贵

如果您有可用的网络连接，第一个选项会更合适。处理在单独的服务器上完成，算法不向公众公开。这就是当今激活码的工作方式。生成某种序列代码，使用公钥加密进行加密，然后发送到将解密和验证数据的源。响应也被加密并发回。

此外，对您的应用程序和您的依赖项进行数字签名也将有所帮助，因为黑客无法很容易地插入组件。如果他们试图使用 DLL 代替您的旧的之一（伪造对服务的调用并返回“成功”），您的代码将在使用 DLL 之前检查数字签名。

所以总而言之，混淆会减慢这个过程，但不会阻止它。我能想到的唯一方法是将该算法托管在安全位置并向其发送请求。是的，托管方案、DoS 等存在问题，但您的算法受到保护，这正是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T18:01:28.730

试试这个[链接](http://www.codeproject.com/Articles/502283/Strings-Obfuscation-System)。但是它只会混淆字符串。要混淆函数调用、变量和其他元素，请为此目的寻找商业产品和服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T20:10:54.443

> 混淆器的效果如何？

我发现[ConfuserEx](https://github.com/yck1509/ConfuserEx)的[名称](https://github.com/yck1509/ConfuserEx/wiki/Name-Protection)、[常量](https://github.com/yck1509/ConfuserEx/wiki/Constants-Protection)和[控制流](https://github.com/yck1509/ConfuserEx/wiki/Control-Flow-Protection)保护非常有效，使 .NET 代码难以阅读。

*   使用 unicode`Name protection`可以将类/方法/等名称呈现为不可读的 unicode。
*   编码常量字符串，`constants protection`如调试日志字符串，为黑客猜测代码在做什么提供了极好的提示。
*   将`control flow`您的代码打乱成许多开关盒。

请参阅下面的 ConfuserEx'ed C# 代码示例：

[![在此处输入图像描述](../Images/6f1ee1e71b8d6c049562b2059d2e335d.png)](https://i.stack.imgur.com/FIkcE.png)

> 在隐藏算法方面更安全的是：没有 .NET 库或混淆的 .NET 程序的 C++。

如果 .NET 程序集没有被混淆，那么这就像是放弃了源代码。

比较混淆的 .NET 和原生 x86/x64 代码，IMO，阅读它们的难度大致相同。可以使用 IDA-Pro 等软件将原生 x86 代码反汇编成可读性很强的 C 代码。还有一些人可以非常快速地阅读和理解 x86 语言。

> 还有其他方法可以使 .NET 源代码更加安全吗？

有这个[Microsoft .NET Native](https://msdn.microsoft.com/en-us/vstudio/dotnetnative.aspx)（仍处于早期阶段，有限制）将 C# 代码编译为本机 x86/x64 代码。这实际上不是一种保护，只是人们阅读 x86 代码的速度变慢了。

# wpf - 为什么我的 WPF DataGrids 之一给出“此视图不允许'EditItem'”异常？

> ID：12120152
> 
> 赞同：2
> 
> 时间：2012-08-25T07:40:59.723
> 
> 标签：wpf, exception, data-binding, wpfdatagrid

我已经阅读了我可以在此处和 MS 论坛上找到的有关此异常的所有问答，并尝试了我理解的大多数建议以及其他一些建议。似乎这个例外可能是由多种原因引起的。

与其他人一样，我有一个 WPF DataGrid 绑定到一个集合，当尝试编辑其中一个单元格时会引发此异常。它们被设置为可写，集合是 ObservableCollection，我已经实现了发送通知消息的 get 和 set 处理程序。

我没有尝试过的建议是那些涉及实现 IList 的非通用接口的建议，因为我不知道我会做什么。此外，我有许多 DataGrids 绑定到我的应用程序中的各种列表和集合，它们可以工作，而这个曾经在绑定到 LINQ 集合时工作。

请帮我弄清楚我需要在这里做什么。

数据网格是：

```
<DataGrid Name="dgIngredients" Margin="567,32,0,44" Width="360" ItemsSource="{Binding}" IsReadOnly="False"
           AutoGenerateColumns="False" HorizontalAlignment="Left" CanUserAddRows="False" CanUserDeleteRows="False">
    <DataGrid.Columns>
        <DataGridTextColumn Width="63" Header="Percent" Binding="{Binding Preference}" IsReadOnly="False" />
        <DataGridTextColumn SortDirection="Descending" Width="301" Header="Ingredient" Binding="{Binding Ingredient}" IsReadOnly="True" CanUserSort="True" CanUserReorder="False" />
    </DataGrid.Columns>
</DataGrid> 
```

正在编辑的列是非只读列，Preference。

该系列是：

```
private ObservableCollection<RAM_Ingredient> MemberIngredientPrefs = new ObservableCollection<RAM_Ingredient>(); 
```

绑定是：

```
dgIngredients.DataContext = MemberIngredientPrefs.OrderBy("Ingredient",true); 
```

RAM_Ingredient 是：

```
public class RAM_Ingredient : INotifyPropertyChanged 
```

等等

RAM_Ingredient.Preference 是：

```
private int _Preference;
public int Preference
{
    get
    {
        return _Preference;
    }
    set
    {
        // This is needed to send notification of changes (and to not throw an exception on grid edit!):
        if ((_Preference != value))
        {
            SendPropertyChanging();
            _Preference = value;
            SendPropertyChanged("Preference");
        }
    }
} 
```

例外是：

```
System.InvalidOperationException was unhandled
  Message='EditItem' is not allowed for this view.
  Source=PresentationFramework
  StackTrace:
       at System.Windows.Controls.ItemCollection.System.ComponentModel.IEditableCollectionView.EditItem(Object item)
       at System.Windows.Controls.DataGrid.EditRowItem(Object rowItem)
       at System.Windows.Controls.DataGrid.OnExecutedBeginEdit(ExecutedRoutedEventArgs e) 
```

ETC...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-12T14:32:55.597

我也有这个问题，发现这里的重点是我们不能在DataGrid中编辑一个IEnumerable，只能编辑一个列表。

因此我们不需要创建一个新类，它也适用于具有匿名返回类型的 LINQ 查询。它只需要是一个列表。

这是我的代码示例：

```
 dtgPrdcts.ItemsSource= ProductLists.Select(Function(x) New With {.ListTitle = x.ListTitle, .ProductID = x.ProductID, .License = "", .ForRemove = True}).ToList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:34:15.533

我仍然不知道具体是什么导致了这个问题，但我设法解决了这个问题，我不确定我所做的有多少是矫枉过正的，但它确实有效。

我创建了一个新类，只是为了将数据保存在 DataGrid 行中。我制作了一个此类的对象列表，并像以前一样将其填写并绑定到 DataGrid。我还添加了通常的东西和废话，以使更改通知正常工作（可能是矫枉过正），由于整个喜剧情况，我不得不以不同的方式重新定义比较函数以使其排序。

IE

```
List<UsablePref> MemberIngredientPrefs = new List<UsablePref>(); 
```

...

```
 foreach (RAM_Ingredient ingredient in App.Ingredients)
        {
            ingredient.GetPreferences(EditorMember);
            UsablePref pref = new UsablePref();
            pref.Ingredient = ingredient.Ingredient;
            pref.IngredientID = ingredient.IngredientID;
            pref.Preference = ingredient.Preference;
            MemberIngredientPrefs.Add(pref);
        }

        // Sort alphabetically by ingredient name, 
        MemberIngredientPrefs.Sort(UsablePref.CompareByName);
        // and bind the ingredient prefs DataGrid to its corresponding List
        dgIngredients.DataContext = MemberIngredientPrefs; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-28T19:45:19.750

我在尝试从连接中创建行列表时遇到了同样的问题；由于 LINQ 查询返回一个 IEnumerable，我将 DataGrid 绑定到该 IEnumerable；这对于 readonly 工作正常，并且奇怪地与 ComboBoxes 和我使用的其他一些自定义控件一起工作，但是纯文本编辑抛出了 InvalidOperationException。解决方案是用 ObservableCollection 代替 IEnumerable；基本上来自：

`BoundView = (/*LINQ QUERY*/); // is IEnumerable<CustomJoinObject>`

到

`BoundView = new ObservableCollection<CustomJoinObject>(/*LINQ QUERY*/);`

在这两种情况下，BoundView 都是 DataGrid 的 DataContext。

我假设发生这种情况是因为 IEnumerable 没有支持数据网格的机制，而 ObservableCollection 有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-23T16:30:39.353

模型类需要实现`INotifyPropertyChanged`来自命名空间的接口`System.ComponentModel`。

类示例：

```
 public class Exemple :  INotifyPropertyChanged
 {
   #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        #endregion INotifyPropertyChanged Members

 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-19T10:22:23.930

即使这个线程很旧，它也可以帮助某人。问题是 LINQ 返回一个 IEnumerable，正如 VaelynPhi 所说，但原因是编辑数据网格需要一个实现[IEditableCollectionView](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.ieditablecollectionview?view=netframework-4.8)的源。然后，您可以使用列表、observableCollection 或任何实现此接口的集合。

我找到了这个解决方案，感谢[Shoe给出了](https://stackoverflow.com/users/1950321/shoe)[这个](https://stackoverflow.com/questions/18578254/datagrid-edition-edititem-is-not-allowed-for-this-view-when-bound-to-a-wpf-da/19952932)问题的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-04T15:20:15.023

在我的情况下，当我想编辑一些单元格时抛出了这个异常。当我切换到一切正常时，问题是绑定到`ItemSource`=>的集合类型错误。`IEnumerable<T>``ObservableCollection<T>`

# objective-c - 4.4 中的新 Objective-c 文字

> ID：12120153
> 
> 赞同：4
> 
> 时间：2012-08-25T07:41:07.023
> 
> 标签：objective-c, ios, cocoa-touch, xcode4.4

我可以写`@42`，它创建一个`NSNumber`值为`int`42 的值。我可以用一个变量来做这个吗，比如`@someIntVar`？显然我试过了，但它不起作用（这很糟糕，因为我必须通过`[NSNumber numberWithInt:someIntVar]`）。是否可以使用稍微不同的语法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T07:43:33.153

我强烈建议您阅读有关此事的官方 clang 文档：http: [//clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

但是，要装箱变量或任何表达式，您可以使用括号：

```
 id num = @(someIntVar); 
```

# ruby-on-rails - 使用 Lazy High Charts Gem 更改主图表标题

> ID：12120158
> 
> 赞同：1
> 
> 时间：2012-08-25T07:42:03.233
> 
> 标签：ruby-on-rails

最大的挫败感。我已经尝试了很多不同的实现 :title 和 setTitle 的方法，但我似乎无法更改图表上方的主标题。这是gem页面上给出的示例

```
 @h = LazyHighCharts::HighChart.new('graph') do |f|
      f.options[:chart][:defaultSeriesType] = "area"
      f.series(:name=>'John', :data=>[3, 20, 3, 5, 4, 10, 12 ,3, 5,6,7,7,80,9,9])
      f.series(:name=>'Jane', :data=> [1, 3, 4, 3, 3, 5, 4,-46,7,8,8,9,9,0,0,9] )
    end 
```

我最接近的是使用删除标题`f.options[:title] = "Test Title"`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:04:24.417

f.options[:title][:text] = "我心派"

查看默认设置的 HighChart 类中的 default_options 方法。

# mysql - MySQL是否将修改记录的时间戳存储在任何地方？

> ID：12120163
> 
> 赞同：2
> 
> 时间：2012-08-25T07:42:56.447
> 
> 标签：mysql, timestamp

我正在使用 MySQL 5.1.35 数据库。
我想知道表中最后修改记录的时间戳。
我想知道它而不像类型一样`last_modified`在表中创建额外的字段。`Timestamp`

MySQL是否将修改记录的时间戳存储在任何地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T07:45:36.583

没有。如果你想要 - 你需要为此创建一个单独的`timestamp`列

# linq - 用于递归检索项目集合的 Linq 扩展

> ID：12120166
> 
> 赞同：1
> 
> 时间：2012-08-25T07:44:24.613
> 
> 标签：linq

```
public class MyClass
{
    public MyClass();

    public long Id { get; set; }
    public intScore { get; set; }
    public MyClass[] subclasses { get; set; }
    public string title { get; set; }
   .....    
 } 
```

从外部源返回的结果是递归的，我正在尝试使用 linq 或使用递归的任何扩展方法从集合中检索结果，感谢任何帮助。

前任; 我的收藏是

```
Myclass results=XXXmethod(xxxx)// which gives me results. 
```

subclasses 是 type 的列表`Myclass`，因此该列表将再次包含一些集合，并且反过来可以收集 agian 嵌套级别

假设服务返回了 10 个结果或`Myclass[10]` `Myclass[0]`再次返回`Myclass[4]`可能有 2 个或 4 个结果，需要建立一个集合 allitems

我正在尝试这样做，但有些缺失

```
results.class.subclusters.subclasses (o => o.subclasses )
               .SelectMany(x => x.subclasses ).ToList() 
```

但这并没有给出正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:12:46.487

LINQ 本身不支持递归方法，但您可以使用如下递归方法：

```
public class MyClass
{
    public int Id { get; set; }

    public MyClass[] SubClasses { get; set; }

    //More properties

    public IEnumerable<MyClass> GetRecursive()
    {
        yield return this;

        if (SubClasses != null)
        {
            foreach (var item in SubClasses
                          .Where(s => s != null)
                          .SelectMany(x => x.GetRecursive()))
            {
                yield return item;
            }
        }
    }
} 
```

然后调用：

```
myClass.GetRecursive() 
```

# c# - 我只能用 Json 返回一个匿名类吗？

> ID：12120168
> 
> 赞同：0
> 
> 时间：2012-08-25T07:44:32.693
> 
> 标签：c#, json

我有以下代码：

```
 return Json(new {
                ent = vm.ent,
                errors = e.Message,
                fld = vm.fld,
                pk = vm.pk,
                success = false,
                rk = vm.rk,
                _rk = _rk,
                val = vm.val
            }); 
```

该代码有效，但我想知道是否可以使用类而不是匿名数组来执行此操作。似乎使用匿名方式没有检查字段名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:54:06.143

你可以返回任何你想要的类。我没有测试过它，但只使用匿名类是没有意义的。更重要的是，如果您有一个正在运行的项目，似乎很容易尝试。

我不知道“检查字段名称”到底是什么意思，但你可以使用这样的匿名类：

```
new { vm.val, vm.pk } 
```

在这种情况下，匿名类的属性采用已分配属性的名称。

PS，您通过使用公共成员的小写名称来打破所有 .NET 约定。

# c++ - 有关保护 DLL 代码的任何提示？

> ID：12120175
> 
> 赞同：1
> 
> 时间：2012-08-25T07:45:52.740
> 
> 标签：c++, dll, obfuscation, dll-injection, project-properties

我想知道一些提示如何保护 DLL（Win32，动态）文件免受注入以及如何提高编译代码的安全性。

1.  DDL 源代码中有一个 SQL 密码，用于连接 MySQL。离开它是否足够安全？
2.  有什么办法可以防止“用户”修改 HEX 代码？我的意思是从源代码中获得更多保护。
3.  项目属性中的哪些选项最适合优化和保护 DLL？

我正在使用 MVSC++ 2010 Express，并且用户的源代码将不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:01:48.583

为了使 DLL 可用，它需要可读。这意味着如果您加密文件，您还需要在使用它之前对其进行解密。此外，您可以签署您的 DLL，以便您知道它没有被修改，但这仍然不会隐藏文件本身中的符号。另一种方法是混淆代码，以便用户更难理解，但操作系统仍然可以轻松执行它 - 将其视为一种弱加密形式。

具体答案：

1.  如果您在任何二进制文件中都有密码，那么它是不安全的。查看二进制文件的字符串以找到它是一件简单的事情。

2.  用户可以随时修改文件，但可以使用某种加密方案对文件进行签名，以确保您知道它是否已被篡改。

3.  我不使用那个特定的工具，但我确信它不会为您提供任何真正的安全性。

**提示**：您可以代替在源代码中使用 SQL DB 密码，而是让它向服务器发送命令，该服务器将对其进行身份验证和处理。这样，您的文件中就不需要明确的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:13:17.043

除非您加密整个文件，否则 DLL 中的所有文字字符串都是可读的。不要将密码作为文字字符串存储在您的 dll 中。时期。此外，您必须记住，汇编代码只是数据，如果文件是可写的，任何拥有英特尔参考表和十六进制编辑器或反汇编器和汇编器的人都可以在有权访问该文件的情况下更改它。您总是可以混淆您的源代码，这会使程序集的可读性稍差，但仍然可以完全修改。

简而言之，您所做的任何事情都不会完全保护您的 DLL。

# json - 如何从 json 数组中获取个体值..？

> ID：12120180
> 
> 赞同：-1
> 
> 时间：2012-08-25T07:46:42.740
> 
> 标签：json

我得到了 json 数组作为输出。谁能解释我如何从中获得个人价值，例如（C：/）。下面是json数组

```
{"Name":["C:\/","D:\/","E:\/","F:\/","G:\/","My Documents","Microsoft Outlook","Microsoft Outlook Express","Opera","Mozilla","Internet Explorer Settings","FireFox","Desktop","Registry","SystemState"],"path":["C:\/","D:\/","E:\/","F:\/","G:\/","\/\/\/My Documents\/\/\/","\/\/\/Microsoft Outlook\/\/\/","\/\/\/Microsoft Outlook Express\/\/\/","\/\/\/Opera\/\/\/","\/\/\/Mozilla\/\/\/","\/\/\/Internet Explorer Settings\/\/\/","\/\/\/FireFox\/\/\/","\/\/\/Desktop\/\/\/","\/\/\/Registry\/\/\/","\/\/\/SystemState\/\/\/"],"hasChild":["1","1","1","1","1","0","0","0","0","0","0","0","0","0","0"]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:51:17.560

假设你的语言是 JavaScript，你首先需要解析 JSON（下面我使用 jQuery 的`$.parseJSON`方法），然后访问相应的属性和数组位置。要检索“C:\”，您可以这样做：

```
var sJSON = '{"Name":["C:\/","D:\/","E:\/","F:\/","G:\/","My Documents"]}';
var oJSON = $.parseJSON(sJSON);
alert(oJSON.Name[0]); //displays C:\ 
```

如果您使用的是 JavaScript，则可以使用`eval()`语句代替 a，`$.parseJSON`因为 JSON 在 JavaScript 中是可执行的，但使用`$.parseJSON`.

更多关于 JavaScript的内容`eval()`：[JavaScript 的 eval() 什么时候不是邪恶的？](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:52:02.717

为您的语言使用 JSON 解析库。

在 JavaScript 中，[您可以使用 JSON.parse](http://www.json.org/js.html)。如果您的输出在 var`output`中，您将执行以下操作：

```
var obj = JSON.parse(output);
console.log(obj.path[0]); 
```

# php - 缓存来自 RSS 提要的链接

> ID：12120184
> 
> 赞同：1
> 
> 时间：2012-08-25T07:47:24.917
> 
> 标签：php, mysql, caching, rss

我目前运行一个网站，该网站拉入一个 rss 提要，你可以去链接我遇到的问题是，当我点击一个 rss 链接时，它会将我带到一个网页，但该网页的加载速度非常慢。

我希望缓存该网页，以便它加载得非常快，最好的方法是什么？我可以在我的项目中创建一个缓存文件夹，然后将每个文件缓存到该文件夹​​，然后从下面的示例中提供服务。

```
<?php

foreach ($source_xml->channel->item as $rss) {

            $title          = trim($rss->title);
            $link           = $rss->link;

            $html = $title . '.html';

            $homepage = file_get_contents($link);
            file_put_contents('cache/' . $html, $homepage);

        }

?> 
```

对于很多提要，这需要很长时间，我不确定这是否是最有效的方式以下。

```
<?php

foreach ($source_xml->channel->item as $rss) {

            $title          = trim($rss->title);
            $link           = $rss->link;

            $cache = file_get_contents($link);

            $data = array(
                'title' => $title,
                'link' => $link,
                'cache' => $cache
            );

            echo $this->cron_model->addResults($data);

        }

?> 
```

这可行，但我在查看 mysql 时遇到了这个问题

```
Because of its length,
this column might not be editable 
```

我不熟悉缓存，也从来没有真正需要处理它，因为现在有人可以给我一些最佳实践建议，我知道我可以一起破解一些东西，但更愿意在继续之前知道正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:02:54.940

为了更好地使用 PHP + MySQL 进行缓存，您可以使用 memcached。

*   [内存缓存](http://php.net/manual/en/book.memcached.php)

为了进一步提高缓存性能，您可以使用操作码缓存和元缓存。

操作码缓存

*   [装甲运兵车](http://php.net/manual/en/book.apc.php)

元缓存

*   [HTTP 等效](http://www.metatags.org/meta_http_equiv_cache_control)

# c# - 如何在子表中插入记录？

> ID：12120188
> 
> 赞同：1
> 
> 时间：2012-08-25T07:48:17.743
> 
> 标签：c#, asp.net, mysql

我有 3 个名称为`user`和`video`的表`recommendedvideos`。`user`表格保存有关注册用户的信息，表格`recommendedvideos`保存有关用户选择哪个视频作为他最喜欢的视频的信息。

```
视频表  
-------------
变量（pk），
标题，
用户（对于 userTbl 的 fk）

```

```
用户表
------------
用户（pk），
经过

```

```
推荐视频表
------------------------------
变量（pk，对于 videoTBL 的 fk），
用户（pk，对于 userTBL 的 fk），
日期，
地位

```

我的问题是，当我想在推荐视频表中插入一条记录时，我遇到了一个问题，尽管我遵守了 fk 的约束。

```
com.CommandText = " Insert into recommendedvideos(Variable, User, Date, Status )"
                    + "VALUES(Variable, User, Date, Status )";

            com.Parameters.AddWithValue("@Variable", Variable);
            com.Parameters.AddWithValue("@User", User);
            com.Parameters.AddWithValue("@Date", Date);
            com.Parameters.AddWithValue("@Status", Status);

            connect.Open();
            com.ExecuteNonQuery();
            connect.Close(); 
```

我收到此错误

> 无法添加或更新子行：外键约束失败 ( `aspdb`. `recommendedvideos`, CONSTRAINT `recommendedvideos_ibfk_1`FOREIGN KEY ( `Variable`) REFERENCES `video`( `Variable`))

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:09:42.527

**编辑**刚刚注意到您没有*在*语句中*正确设置参数！*任何参数都必须在前面有一个 @（假设您使用的是***[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)和 SqlCommand***对象。如果您使用的是***OleDbCommand***，请改用[此语法](http://msdn.microsoft.com/de-de/library/system.data.oledb.oledbcommand.parameters.aspx)

```
com.CommandText = " Insert into recommendedvideos(Variable, User, Date, Status )"
                + "VALUES(@Variable, @User, @Date, @Status )";

        com.Parameters.AddWithValue("@Variable", Variable);
        com.Parameters.AddWithValue("@User", User);
        com.Parameters.AddWithValue("@Date", Date);
        com.Parameters.AddWithValue("@Status", Status);

        connect.Open();
        com.ExecuteNonQuery();
        connect.Close(); 
```

# ruby-on-rails - 在 Rails 3.2 中重新编译父 LESS 文件

> ID：12120189
> 
> 赞同：1
> 
> 时间：2012-08-25T07:48:37.940
> 
> 标签：ruby-on-rails, less, less-rails

我正在使用“less-rails” gem 来减少与我的 rails 应用程序的集成。

在我的“applications.css.less”文件中，我将其他 LESS 文件导入其中。当我对任何导入的文件进行更改时，我需要重新保存“application.css.less”文件，以便它接受更改。

当其中一个导入的文件发生更改时，如何让“applications.css.less”文件自动重新编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T18:22:53.300

找到了这里提到的解决方案：[https ://github.com/metaskills/less-rails/issues/80](https://github.com/metaskills/less-rails/issues/80)

```
gem 'less-rails', github: 'dv/less-rails', branch: 'fix-import-dependencies' 
```

不会与 livereload 一起工作，所以我回到 cmd + r

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:07:19.177

这是一个老问题，不幸的是没有办法用原生方式做到这一点。LESS 编译器只监视修改过的文件。因此，如果您使用带有导入的文件，则需要修改并重新编译该文件。

在开发环境（使用javascript）中，您可以解决此问题，将其清除缓存：

```
 <link rel="stylesheet/less" type="text/css" href="/css/style.less"/>
  <script src="/js/less-1.1.5.min.js" type="text/javascript"></script>
  <script>
    less = {env:'development'};
    function destroyLessCache(pathToCss) { // e.g. '/css/' or '/stylesheets/'
      if (!window.localStorage || !less || less.env !== 'development') {
        return;
      }
      var host = window.location.host;
      var protocol = window.location.protocol;
      var keyPrefix = protocol + '//' + host + pathToCss;

      for (var key in window.localStorage) {
        if (key.indexOf(keyPrefix) === 0) {
          delete window.localStorage[key];
        }
      }
    }
    window.onload=destroyLessCache('/css/');
  </script> 
```

参考：[https ://github.com/cloudhead/less.js/issues/47](https://github.com/cloudhead/less.js/issues/47)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T21:04:10.060

我的其他较少文件没有通过资产管道。一旦我修复了这个问题并将它们导入到我的“application.css.less”文件中，“application.css.less”就会在其他文件发生变化时开始自动重新编译。

# php - 分隔多个电子邮件的最佳分隔符是什么？

> ID：12120190
> 
> 赞同：35
> 
> 时间：2012-08-25T07:48:38.990
> 
> 标签：php, email, bcc

我正在使用`mailto`链接来填充`bcc`用户的默认电子邮件程序。

```
$mem_email=" ";    
$sql="SELECT email_address FROM employee";
$contacts = $db->query($sql);
while($contact = $db->fetchByAssoc($contacts))
{
    if($contact['email_address']!="" && $contact['email_address']!=NULL)
    {
        $mem_email.=$contact['email_address'].", ";
    }
}

header("Location: mailto:?bcc={$mem_email}"); 
```

在密件抄送字段中分隔多封电子邮件的最佳分隔符是什么：`,`或 `;`？

就我而言，我正在使用`,`.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-25T07:52:32.550

分隔符应为逗号 ( `,`) 且不应有空格。

请参阅[RFC 6068](https://datatracker.ietf.org/doc/html/rfc6068)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-04T09:22:53.903

这是一个迟到的警告，以防有人需要它：

即使 RFC 明确建议使用逗号，Microsoft Outlook 仍将使用区域设置中定义的“列表分隔符”。对于系统配置有不同列表分隔符（例如分号）的 Windows + Outlook 用户，您的 mailto 链接可能无法正常工作。Outlook 将简单地拒绝用逗号分隔电子邮件地址。

只是要记住的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:40:41.253

使用以下代码，

```
implode(',', $contacts); 
```

上面的代码将给出逗号分隔的电子邮件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-10T16:08:49.550

### TLDR 解决方案

TLDR 答案：使用`,`不带空格的 a 来分隔电子邮件地址。

[RFC6068：“mailto”URI 方案](https://www.rfc-editor.org/rfc/rfc6068)（2010 年 10 月发布）只是一个***提议的标准***，[它不是一个公认的 Internet 标准。](https://en.wikipedia.org/wiki/Internet_Standard#:%7E:text=The%20IETF%20also%20defines%20a,prior%20to%20an%20Internet%20Standard.) 它也没有讨论逗号分隔。

### TLDR 警告/Gotchya 的

*   请注意（根据[RFC6854](https://www.rfc-editor.org/rfc/rfc6854#section-3)），您不应该在电子邮件`Sender`字段中使用逗号分隔地址（出于安全原因）。
*   许多服务允许带有 的空格`,`，因此用于拆分的理想正则表达式是`/\s*,\s*/`.
*   Outlook 和 Exchange（以及其他 X.400/X.500 兼容软件）支持使用`;`. 这是因为 X.400/X.500 规范将分号视为有效的名称分隔符（参见[RFC1485，1993](https://www.rfc-editor.org/rfc/rfc1485)年 7 月发布）。今后，`,`建议使用。

### 来源

引用最初提议的标准，[RFC2822：Internet Message Format](https://www.rfc-editor.org/rfc/rfc2822)，于 2001 年 4 月发布...

> ### 3.6.3\. 目标地址字段
> 
> 消息的目标字段由三个可能的字段组成，每个字段的格式相同： 字段名称，可以是“To”、“Cc”或“Bcc”，后跟一个或多个地址的逗号分隔列表（邮箱或组语法）。
> 
> ```
> to              =   "To:" address-list CRLF
> 
> cc              =   "Cc:" address-list CRLF
> 
> bcc             =   "Bcc:" [address-list / CFWS] CRLF 
> ```

该提议标准于 2008 年 10 月被接受为标准草案，其中包含[RFC5322：Internet 消息格式](https://www.rfc-editor.org/rfc/rfc5322)。我会在那里引用文本，但他们决定保持原样。2013 年 3 月提出了更新，使用[RFC6854：更新到 Internet 消息格式以允许组语法...](https://www.rfc-editor.org/rfc/rfc6854)：您不应该在`Sender`字段中允许逗号分隔值，因为这样就不确定谁真正触发了发送 e-邮件。引用这个 RFC，RFC6854...

> ### 2.1。替换 RFC 5322，第 3.6.2 节。发起人字段
> 
> ... from 字段和 sender 字段不应该使用组语法；相反，from 字段应该只使用邮箱列表语法，而 sender 字段应该只使用邮箱语法（参见 RFC 6854，第 3 节）。如果发件人字段使用组语法，则组不得包含多个邮箱。

# php - 如何隐藏会员链接？

> ID：12120191
> 
> 赞同：3
> 
> 时间：2012-08-25T07:48:45.997
> 
> 标签：php

我有域 mydomain.com（我的网站）

我有合作伙伴链接 partnerlink.com/something?partnerId（第三方提供商）

合作伙伴链接打开destination.com（第三方网站）

我的问题：

1.  当我尝试 bit.ly 并单击它时，我会在浏览器中看到重定向：bit.ly/123 --> partnerlink.com/something?partnerId --> destination.com

2.  当我尝试在 php 脚本中使用 .htaccess 重定向或标头时，我还会在慢速互联网连接的浏览器中看到合作伙伴链接。

我想隐藏合作伙伴链接。该方案是：

> 点击 mydomain.com --> 结果是destination.com

在这种情况下，用户在浏览器中看不到合作伙伴链接。

但是这样的用户点击应该算我的提供商 partnerlink.com

可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T07:50:38.253

不，这是不可能的。

用户的浏览器必须将会员 ID 传递给目标。它将以用户可见的方式执行此操作。

（作为一般经验法则，对附属关系保持开放是一个好主意。隐藏它们的努力会在访问者失败时损害他们对你的信任。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:57:01.707

不，这是不可能的 - 会员处理程序（这是重定向的原因）需要所有信息，否则您将不会因点击而获得信用。

无论如何，隐藏您的附属公司的性质可能不是一件好事 - 特别是现在跟踪 cookie 是“当局”的一个大问题（至少在欧洲这里）

# c# - 在不必回发或编写服务器端代码的情况下持久保存用户控件值的最佳方法是什么？

> ID：12120195
> 
> 赞同：1
> 
> 时间：2012-08-25T07:50:22.493
> 
> 标签：c#, asp.net, user-controls

**场景**：我有一个有两个下拉列表的用户控件。根据第一个下拉列表中的选择，获取并填充第二个下拉列表的值。因此，第一个下拉菜单会进行回发并为第二个下拉菜单提取数据。因此，第二个下拉列表不需要对任何选择更改进行任何回发。

此用户控件正在网格视图中的页面上使用，因此它会根据网格中的记录数重复多次。

**问题**：当我在任何下拉列表中进行选择时，我之前在所有用户控件下拉列表中的选择都会丢失并重置为下拉列表中的第一项。

**对我有用的解决方案**：我可以通过为相应的 DropDownList 设置在 SelectedIndexChanged 事件上的视图状态中所做的选择来解决此问题。但我想避免第二个下拉菜单进行回发，因为它不做任何与 UI 相关的事情（更改或拉取额外数据以在屏幕上更新），从用户的角度来看，这是浪费时间，因此很烦人。

我也尝试过使用javascript将我想要保留的值写入隐藏字段，但是刷新页面时隐藏字段值是空的。

*那么，在不必回发或编写服务器端代码的情况下持久保存下拉值的最佳方法是什么？*

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:27:15.947

@Aniruddha，我猜你是在 UserControl 的页面加载时填充第一个下拉列表，所以在 !IsPostBack 约束中编写该代码，即

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!IsPostBack){
      // Write your existing drop down bind or other code here.
   }
} 
```

Aniruddha 您可能在 Page_Load 中绑定了您的网格，因此在这种情况下，`!IsPostBack`在上述约束下绑定网格

希望对你有帮助 ！！

# iphone - 来自 NSDictionary 字符串项的外部 NSString

> ID：12120200
> 
> 赞同：0
> 
> 时间：2012-08-25T07:52:06.630
> 
> 标签：iphone, xcode, nsdictionary, external, globals

我有一个带有字符串和字典的 PList。我将它加载到一个 NSDictionary 对象中，我已经做得很好了。我坚持的是从 NSDictionary 对象获取字符串条目到外部字符串，因为当外部变量从单独的类引用对象（使用“ObjectByKey”获取）时，NSDictionary 不再存在被发现。我的问题是，如何从 NSDictionary 获取字符串作为静态字符串 - 而不是作为对 NSDictionary 字符串条目的引用？下面是我的代码：

loginGlobals.h

```
extern NSString *loginError; 
```

登录处理器视图控制器.m

```
NSDictionary *responseData = [NSPropertyListSerialization propertyListFromData:plistData mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];

loginError = [responseData objectForKey:@"Error"]; 
```

然后当我在 loginViewController.m 中执行此操作时出现错误（EXC_BAD_ACCESS）：

```
loginErrorLabel.text = loginError; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:58:18.490

保留`loginError`对象

```
loginError = [[responseData objectForKey:@"Error"] retain]; 
```

# c# - C# 空指针？

> ID：12120201
> 
> 赞同：1
> 
> 时间：2012-08-25T07:52:15.427
> 
> 标签：c#, pointers, delegates, void

无论如何调用内存地址（如 (void*) f = 0xFFFF; ）没有 IntPtr 或任何本机 Win32 函数。我需要为可执行加载器执行此操作（适用于使用名为 COSMOS 的开源项目的操作系统）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:20:42.677

如果不使用，就无法以适当的 C# 高级方式进行操作`Marshal.GetDelegateForFunctionPointer`：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
delegate void CallMeDelegate(int i);

CallMeDelegate del = (CallMeDelegate)Marshal.GetDelegateForFunctionPointer(new IntPtr(0xffff), typeof(CallMeDelegate)); 
```

请注意，IntPtr 不是原生 Windows 仅仅是因为它的名称：它是当前编译目标（32 位或 64 位）的典型指针值。

我认为您无法使用该 API，因为您必须指定一个调用约定才能在正常的 C# 委托语法中使用它。对 Marshal.GetDelegateForFunctionPointer 为您完成所有繁琐的工作感到满意，平台独立！

# batch-file - 批处理是否存在错误

> ID：12120208
> 
> 赞同：0
> 
> 时间：2012-08-25T07:53:14.710
> 
> 标签：batch-file, cmd

我想在这部分为这段代码添加另一条指令，`"if exist "%%d:\%folder%\" (echo Device was found on %%d:)"`所以如果找到该文件夹​​，它也`set folderfound="%%d:\%folder%\"`可以做类似的事情吗？这是完整的代码来显示我想要做什么

```
:autodetect1    
set /p "folder=Folders Name that the photo's are in: "

    setlocal
    set folder=%1
    if "%folder%" == "" call :autodetect1
    cls
    for %%d in (d e f g h i j k l m n o p q r s t u v w x y z) do (
          if exist "%%d:\%folder%\" ( 
              echo Device was found on %%d: and set folderfound=%%d:\%folder%\
          ) else (
              echo Device was not found on %%d:
          )
    ) 
```

我在论坛上阅读，我发现提到你可以使用 && 直接执行另一个命令我可以在 if 存在中使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:45:13.967

在以下代码中使用“and”的地方使用“&&”似乎设置了 folderfound 变量：

```
@echo off
:autodetect1
set /p "folder=Folders Name that the photo's are in: "
    rem goto :eof
    rem setlocal
    rem set folder=%1
    rem if "%folder%" == "" call :autodetect1
    rem cls
    for %%d in (d e f g h i j k l m n o p q r s t u v w x y z) do (
          if exist "%%d:\%folder%\" ( 
              echo Device was found on %%d: && set folderfound=%%d:\%folder%\
          ) else (
              echo Device was not found on %%d:
          )
    ) 
```

我已经注释掉了我不明白的部分。

您需要了解这里发生了什么，转到[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx)并向下滚动到“使用多个命令和条件处理符号"

# asp.net-mvc-3 - 如何在变量值上添加引号？

> ID：12120214
> 
> 赞同：0
> 
> 时间：2012-08-25T07:53:47.713
> 
> 标签：asp.net-mvc-3, knockout.js

我有一个变量数据`firstSelectedColumn.Name`，我想加上引号，下面的代码会引发运行时错误：

```
 upRequested: function () {
        selectedItems = this.requestedSelected; 
        firstSelectedColumn = selectedItems.shift();
        //whats wrong here???????????
        requestedSelected: ko.observableArray(['@firstSelectedColumn.Name']);
        }
    }, 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:52:36.590

```
       requestedSelected: ko.observableArray([firstSelectedColumn.Name]);

```

这不是剃须刀，因为这只是客户端代码，我在这里看不到剃须刀用于的服务器端代码。

# ruby-on-rails-3 - 如何在rails中以pdf格式呈现

> ID：12120218
> 
> 赞同：6
> 
> 时间：2012-08-25T07:54:12.970
> 
> 标签：ruby-on-rails-3, pdf, report, render

我希望表格以**pdf**格式显示。

我们正在使用

```
format.html
format.json{render json: @user} 
```

等用于生成 html ,json 格式

相似地

*   我想将页面呈现为 pdf 。

那么如果可以在rails中执行哪些步骤？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-25T13:47:00.767

# 第一步：

注册 PDF 类型以在 respond_to 块中使用

```
# config/mime_types.rb
Mime::Type.register "application/pdf", :pdf 
```

# 第二步：

在您的控制器中响应 PDF 格式请求

```
respond_to do |format|
    format.html
    format.json{render json: @user}
    format.pdf do
        # ...
        # here your PDF generating code
        # ...
        send_data(your_generated_pdf, filename: 'your_filename.pdf', type: 'application/pdf')
    end
end 
```

要生成 PDF，您可以将[pdfkit](https://github.com/pdfkit/pdfkit)与[wkthmltopdf](http://wkhtmltopdf.org)、 Prawn 等一起使用。有关其用法，请参阅各自的文档。

从 Rails 5 开始：

# 第三步：

添加`gem 'responders'`为 Rails 5 更改日志说：“删除 respond_to/respond_with 占位符方法，此功能已提取到响应者 gem”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T08:15:30.790

我认为这可能会有所帮助 [ https://github.com/mileszs/wicked_pdf ]

`format.pdf`只要您的路线支持`.:format`部分，您将始终能够使用like 。因此，只需使用它来捕获对 pdf 的请求。然后使用`wicked_pdf`.

基本用法如下所示

```
def controller_action
    ... ... ...
    ... ... ...
    format.pdf do
        render :pdf => "file_name"
    end
end 
```

这是[另一篇文章](https://snikt.net/blog/2012/05/01/generating-pdfs-with-wicked_pdf/)可能有助于理解用法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-25T08:30:49.110

另一件事是[虾](http://prawn.majesticseacreature.com/)。

它似乎更健壮并支持复杂的情况。所以你可以选择这个来处理一些复杂的事情。在此处获取[https://prawnpdf.org/manual.pdf](https://prawnpdf.org/manual.pdf)。API 文档：[https ://prawnpdf.org/api-docs/2.3.0/](https://prawnpdf.org/api-docs/2.3.0/)

感谢格伦指出。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-25T14:56:30.677

最后它完成了`prawn`and `prawn-rails`。这是详细信息。

准备好我的系统

```
# Add this to your Gemfile
gem 'prawn'
gem 'prawn_rails'

# run
bundle install 
```

我点击 url`http://localhost:3000/regions`即点击`index`of`RegionsController`并将页面显示为 pdf 格式。

我有一个`Region`具有单个属性的模型`name`。表中有两个条目`regions`。

```
[
 #<Region id: 1, name: "Region 1", ... >,
 #<Region id: 2, name: "Region 2", ... >
] 
```

我的控制器方法：

```
def index
    @regions = Region.all # Should return two region objects :)

    respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @regions }
        format.pdf    # <---------- This will handle the pdf response
    end
end 
```

我在`views/regions/index.pdf.prawn`. 无论如何，视图文件名格式是`:action.pdf.prawn`并且视图文件包含

```
prawn_document() do |pdf|
    @regions.each {|r| pdf.text r.name}
end 
```

这将只输出区域的名称。

就是这样。您的页面为 pdf 格式。现在只需使用 和 提供的所有其他`Prawn`选项`Prawn-Rails`。你可以在这里找到一些 - [http://prawn-rails-demo.heroku.com/](http://prawn-rails-demo.heroku.com/)

只是想写一系列博客来指导如何在 rails 3 中使用不同的 pdf 生成工具。

让我知道它是否能解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-07T21:27:13.617

如果您需要使用模板，您始终可以单独使用[combine_pdf gem](https://github.com/boazsegev/combine_pdf)（它具有较小的编辑功能，例如表格和文本框）或与上述任何解决方案一起使用，例如[Prawn](http://prawnpdf.org/api-docs/2.0/)。

# c# - java构造函数上的c尖锐等价物

> ID：12120222
> 
> 赞同：3
> 
> 时间：2012-08-25T07:55:06.463
> 
> 标签：c#, java, android

不确定我的标题是否正确。忘记是什么代码了。但在这里我将通过代码来解释它。

你在java中看到你可以声明一个这样的类。

```
class Panel extends View{

        public Bitmap mBitmap;

        public Panel(Context context) {
            super(context);

        }

} 
```

升c

```
 class Panel : View
    {

        public Panel(Context context){
            base(context);
        }

    } 
```

它有一个错误。你如何在 csharp 中声明这样的类构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T07:57:35.963

```
class Panel : View
{
    public Panel(Context context) : base(context)
    {
    }
} 
```

[MSDN：使用构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T08:00:37.793

在 C# 中，调用基本构造函数更显式（或者更确切地说是显式分离）

虽然在 Java 中，它看起来就像可以与主体中的其他语句重新排序的任何语句，但它已移到 C# 中的正常构造函数主体之外。

```
class Panel : View
{
    public Panel(Context context) : base(context) { }
} 
```

# c# - 正确的查询 linq

> ID：12120229
> 
> 赞同：1
> 
> 时间：2012-08-25T07:56:32.127
> 
> 标签：c#, linq

我已经使用过 linq 但只搜索 id 并且效果很好

```
var obj = (from VAR in db.infos
           where VAR.id == 22                                                                                
           select new
           {
               title = VAR.title,
           }).SingleOrDefault();
Label2.Text = obj.title.Trim(); 
```

如果我尝试按位置搜索会出错

```
var obj = (from VAR in db.infos
           where VAR.location.Trim() == "Lim"
           select new
           {
               title = VAR.title.Trim(),
           }).SingleOrDefault();

        SearchJob.Items.Add(obj.title.Trim());
        Label2.Text = obj.title; 
```

label2 行有错误

> 你调用的对象是空的。

我如何解决它？

```
if (obj.title != null)
{
    SearchJob.Items.Add(obj.title.Trim());
    Label2.Text = obj.title;
} 
```

> 你调用的对象是空的。

**解决方案**

更改`SingleOrDefault()`为`FirstOrDefault()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:23:08.170

你在那里做一些讨厌的事情，非常坏的习惯。例如这个：

```
var obj = (from VAR in db.infos
           where VAR.location.Trim() == "Lim"
           select new
           {
                title = VAR.title.Trim(),

           }).SingleOrDefault();

SearchJob.Items.Add(obj.title.Trim());
Label2.Text = obj.title; 
```

是胡说八道！让我来告诉你为什么：

始终在将数据插入数据库之前检查数据，而不是之后。通过这种方式，您会产生很多不必要的开销，而这完全可以避免。在之前修剪数据，之后再也不修剪。

接下来 - 您只需要一个字符串值，但您创建了一个匿名对象。为什么？改为这样做：

```
string title = (from o in db.infos
                where o.location == "Lim"
                select o.title).SingleOrDefault(); 
```

`SingleOrDefault`如果您期望单个结果或没有结果，请使用。但是，如果您期望多个结果并且只想要第一个，请使用`FirstOrDefault`.

如您所见，我使用`o`的是`VAR`. 的确，这并没有那么重要，但是，使用与保留字之一非常相似的词（`var`）从来都不是一个好主意。

如果你得到一个异常`Object reference not set to an instance of an object.`，这意味着你的查询返回了一个 null 并且你试图访问一个不存在的对象。如果您的查询在某些时候可能返回 null，请在访问成员时始终检查 null！

**编辑**

```
if ( obj.title != null ) 
```

也很糟糕，因为您需要检查对象本身是否为 null！

```
if (obj != null) 
```

如果你真的想使用你的坏方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:58:49.353

我认为错误发生在查询中

在第一个查询中，您有来源 `db.infos`

在第二个你有来源`db.jobinfos`

来源变了

如果我们为 Label 分配空文本，它将显示，它看起来`obj.title`不存在，或者由于错误的来源，您在查询中遇到错误。

obj 没有返回标题字段。通过调试检查obj。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:59:53.063

尝试跳过异常:)

```
 public static class LINQException {

    public static void TryExample() {
        var LsWithEx = from p in Enumerable.Range(0, 10) select int.Parse("dsfksdj");
        var LsSkipEx = (from p in Enumerable.Range(0, 10) select int.Parse("dsfksdj")).SkipExceptions();
    }

    public static IEnumerable<T> SkipExceptions<T>(this IEnumerable<T> values)
    {
        using (var enumerator = values.GetEnumerator())
        {
            bool next = true;
            while (next)
            {
                try
                { next = enumerator.MoveNext();}
                catch
                { continue;}
                if (next) yield return enumerator.Current;
            }
        }
    }
}
    var obj = (from VAR in db.infos
               where VAR.location.Trim() == "Lim"
               select new
               {
                   title = VAR.title.Trim(),

               }).SkipExce.SingleOrDefault(); 
```

# android - 如何通过在屏幕上拖动手指来绘制字母

> ID：12120230
> 
> 赞同：0
> 
> 时间：2012-08-25T07:56:37.417
> 
> 标签：android, touch

我是 Android 新手..请任何人帮助我..我正在为孩子们开发应用程序..我想让用户在 A、B、C 等文本上方绘制 ..同时我想让用户只能在这些字母之外的字母上方绘制..在绘制时我想给出不同的颜色..我搜索了很多，但我没有得到我想要的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:35:25.937

如果您是 Android 新手，我建议您先学习基础知识（网络教程或书籍）。如果你是 Java 新手，你也应该看看这个。一旦您开始掌握两者的窍门，您就可以继续创建这样的应用程序（这听起来很棘手）。

只是为了让你开始，我建议你看看这个`SurfaceView`类，它可以让你渲染到屏幕上。

PS：提醒一下，这个网站是针对程序特定的问题，而不是模糊的问题。:)

# jquery - 复选框单击在无序列表项中不起作用

> ID：12120231
> 
> 赞同：0
> 
> 时间：2012-08-25T07:56:56.517
> 
> 标签：jquery, checkbox, html-lists, bind, expandable

我无法“检查”嵌入在可扩展 UL 中的输入复选框。我知道原因与点击绑定有关，但我就是想不通。

UL 是动态的，所以我添加了新的 li 和 UL。最低级别的 UL 包含应该可选择的 lis。但是，当我尝试单击它们时，它只会突出显示标签，并且复选框永远不会被选中。

这是HTML：

```
<li id="JeffID4" class="collapsed expanded">
    Assessment
    <ul class="inputs-list" style="display: block;">
        <li id="apple">
           <label class="checkbox inline">
             <input type="checkbox">
             ATGM
           </label>
        </li>
        <li id="apple">
           <label class="checkbox inline">
             <input type="checkbox">
             FMS
           </label>
        </li>
    </ul>
 </li> 
```

这是javascript/jquery：

```
function prepareList() {
  $('#expList').find('li:has(ul)')    
    .click( function(event) {
        //If line item is expandable but has no line items then call the service to retrieve data
      if($(event.target).hasClass('collapsed') && $(event.target).find('li').length==0){
         $(event.target).children('ul').append("Add New LI's")
         $('#expList').find('li:has(ul)').addClass('collapsed');
         $('#expList').find('ul').addClass('inputslist');                     $(event.target).find('li:has(input)').unbind();               
         $(event.target).children('ul').hide();
        }

        //Toggle the lists if they show or not
        $(event.target).toggleClass('expanded');
        $(event.target).children('ul').slideToggle('medium');
        return false;
    })
    .addClass('collapsed').removeClass('expanded').children('ul').hide(); 
};

    $(document).ready( function() {
       prepareList()
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:27:51.783

您正在`false`从`li` `click`事件中返回，因此事件永远不会到达复选框。只需`return false;`从事件处理程序中删除该行，复选框就会正常工作。这是一个[jsFiddle](http://jsfiddle.net/mhusaini/udc8f/)。

# c# - WP7 上的 Tpl TaskCompletionSource 立即完成

> ID：12120233
> 
> 赞同：1
> 
> 时间：2012-08-25T07:57:30.800
> 
> 标签：c#, silverlight, windows-phone-7, task-parallel-library

我在 WP7（Mango）上使用 Robert McLaws TPL 库（[http://nuget.org/packages/System.Threading.Tasks/3.0.1](http://nuget.org/packages/System.Threading.Tasks/3.0.1)）。

```
 var t1 = new TaskCompletionSource<int>().Task;
 var t2 = t1.ContinueWith(t =>
            {
                Debug.WriteLine("Hello");
            }, TaskContinuationOptions.OnlyOnRanToCompletion);
 t1.Start(); 
```

“Hello”打印到调试控制台。但是我没有使用 SetResult 或 TrySetResult 在 TaskCompletionSource 上设置结果。

我排除了上面的代码，因为任务 t1 永远不会完成，所以永远不会输出“hello”。

我究竟做错了什么？

# html - 如何更改 html textarea 的默认语言和字体并禁用其他语言和字体？

> ID：12120236
> 
> 赞同：0
> 
> 时间：2012-08-25T07:57:36.667
> 
> 标签：html, css, fonts, textarea, font-face

我有一个评论框（textarea）。我想首先更改 textarea 的默认语言和默认字体，而客户端无法更改语言或字体。[http://www.haveeru.com.mv/dhivehi/business/126135](http://www.haveeru.com.mv/dhivehi/business/126135)转到此链接并单击下面的发表评论按钮。将出现一个文本区域。这正是我希望做的。相同的语言（divehi）相同的字体。我尝试了很多方式。但它在开始时使用英语。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:12:56.157

您提到的网站使用 JavaScript 将表单控件的正常功能替换为完全不同的东西。您需要模仿它以获得效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:03:35.530

他们使用自己的字体，每次您想查看某人使用的字体/大小/颜色时`view-source`，在这种情况下是 css

例如：

```
@charset "utf-8";
@font-face {
    font-family: "MV Waheed";
    src: local("MV Waheed"), url(/dhivehi/fonts/mv_waheed.otf) format("opentype");
}
@font-face {
    font-family: "MV Faseyha";
    src: local("MV Faseyha"), url(/dhivehi/fonts/mv_faseyha.otf) format("opentype");
} 
```

或 Javascript 扩展

```
(function ($) {
    $.fn.thaana = function (options) {
        var settings = {
            keyboard: 'phonetic'
        };
        return this.each(function () {
            if (options) {
                $.extend(settings, options);
            }
            var keyboards = {
                'phonetic': {
                    33: '!',
                    34: '"',
                    35: '#',
                    36: '$',
                    37: '%',
                    38: '&',
                    39: '\'',
                    40: ')',
                    41: '(',
                    42: '*',
                    43: '+',
                    44: '،',
                    45: '-',
                    46: '.',
                    47: '/',
                    58: ':',
                    59: '؛',
                    60: '>',
                    61: '=',
                    62: '<',
                    63: '؟',
                    64: '@',
                    65: 'ާ',
                    66: 'ޞ',
                    67: 'ޝ',
                    68: 'ޑ',
                    69: 'ޭ',
                    70: 'ﷲ',
                    71: 'ޣ',
                    72: 'ޙ',
                    73: 'ީ',
                    74: 'ޛ',
                    75: 'ޚ',
                    76: 'ޅ',
                    77: 'ޟ',
                    78: 'ޏ',
                    79: 'ޯ',
                    80: '÷',
                    81: 'ޤ',
                    82: 'ޜ',
                    83: 'ށ',
                    84: 'ޓ',
                    85: 'ޫ',
                    86: 'ޥ',
                    87: 'ޢ',
                    88: 'ޘ',
                    89: 'ޠ',
                    90: 'ޡ',
                    91: ']',
                    92: '\\',
                    93: '[',
                    94: '^',
                    95: '_',
                    96: '`',
                    97: 'ަ',
                    98: 'ބ',
                    99: 'ޗ',
                    100: 'ދ',
                    101: 'ެ',
                    102: 'ފ',
                    103: 'ގ',
                    104: 'ހ',
                    105: 'ި',
                    106: 'ޖ',
                    107: 'ކ',
                    108: 'ލ',
                    109: 'މ',
                    110: 'ނ',
                    111: 'ޮ',
                    112: 'ޕ',
                    113: 'ް',
                    114: 'ރ',
                    115: 'ސ',
                    116: 'ތ',
                    117: 'ު',
                    118: 'ވ',
                    119: 'އ',
                    120: '×',
                    121: 'ޔ',
                    122: 'ޒ',
                    123: '}',
                    124: '|',
                    125: '{',
                    126: '~'
                },
                'typewriter': {
                    33: '!',
                    34: '؛',
                    35: '#',
                    36: '$',
                    37: '%',
                    38: '&',
                    39: 'ﷲ',
                    40: ')',
                    41: '(',
                    42: '*',
                    43: '+',
                    44: 'ށ',
                    45: '-',
                    46: 'ޓ',
                    47: 'ޯ',
                    58: 'ޡ',
                    59: 'ފ',
                    60: '\\',
                    61: '=',
                    62: 'ޞ',
                    63: '؟',
                    64: '@',
                    65: '<',
                    66: 'ޟ',
                    67: 'ޏ',
                    68: '.',
                    69: '“',
                    70: '،',
                    71: '"',
                    72: 'ޥ',
                    73: 'ޣ',
                    74: 'ޢ',
                    75: 'ޘ',
                    76: 'ޚ',
                    77: 'ޝ',
                    78: 'ޛ',
                    79: 'ޠ',
                    80: 'ޙ',
                    81: '×',
                    82: '/',
                    83: '>',
                    84: ':',
                    85: 'ޜ',
                    86: 'ޗ',
                    87: '’',
                    88: 'ޕ',
                    89: 'ޤ',
                    90: 'ޖ',
                    91: 'ލ',
                    92: ']',
                    93: '[',
                    94: '^',
                    95: '_',
                    96: '`',
                    97: 'ި',
                    98: 'ޅ',
                    99: 'ސ',
                    100: 'ް',
                    101: 'ާ',
                    102: 'ަ',
                    103: 'ެ',
                    104: 'ވ',
                    105: 'މ',
                    106: 'އ',
                    107: 'ނ',
                    108: 'ކ',
                    109: 'ބ',
                    110: 'ދ',
                    111: 'ތ',
                    112: 'ހ',
                    113: 'ޫ',
                    114: 'ީ',
                    115: 'ު',
                    116: 'ޭ',
                    117: 'ރ',
                    118: 'ޔ',
                    119: 'ޮ',
                    120: 'ޑ',
                    121: 'ގ',
                    122: 'ޒ',
                    123: '÷',
                    124: '}',
                    125: '{',
                    126: '~'
                }
            };
            $(this).keypress(function (e) {
                if (e.ctrlKey) {
                    return true;
                } else if (e.which == 16) {
                    return true;
                } else {
                    if (keyboards[settings.keyboard][e.which]) {
                        var current, sTop = $(this).scrollTop();
                        if ($(this).get(0).selectionStart || $(this).get(0).selectionStart == 0) {
                            var selected = $(this).get(0).selectionStart + 1;
                            current = $(this).val().substring(0, $(this).get(0).selectionStart) + keyboards[settings.keyboard][e.which] + $(this).val().substring($(this).get(0).selectionEnd, $(this).val().length);
                            $(this).val(current);
                            $(this).get(0).setSelectionRange(selected, selected);
                            $(this).get(0).focus();
                        } else if (document.selection) {
                            var selected = document.selection.createRange();
                            selected.text = keyboards[settings.keyboard][e.which];
                            $(this).focus();
                        } else {
                            current = $(this).val();
                            current += keyboards[settings.keyboard][e.which];
                            $(this).val(current);
                        }
                        $(this).scrollTop(sTop);
                        return false;
                    } else {
                        return true;
                    }
                }
            });
        });
    };
})(jQuery);

$(selector).thaana(); 
```

[JSFiddle](http://jsfiddle.net/zNL48/1/)

不是他们可以改变语言，而是如果你改变字体，字体就会产生语言行为。

看看[谷歌网络字体](http://www.google.com/webfonts/)

# android - 在模拟器或实际设备上测试？

> ID：12120239
> 
> 赞同：1
> 
> 时间：2012-08-25T07:58:17.010
> 
> 标签：android, testing, android-emulator

> **可能重复：**
> [Android 模拟器与真实设备](https://stackoverflow.com/questions/1115413/android-emulator-vs-real-device)

在模拟器或实际的 Android 设备上测试您的应用程序更好吗？就像在您仍在开发应用程序时测试您的应用程序一样。

此外，在模拟器上进行测试是否比实际设备提供了更多的计算能力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:07:58.047

最好在真实设备上进行测试，因为模拟器缺少传感器等某些输入（尤其是旧版本）。您还将遇到问题测试服务，例如 In app billing 和 LVM，因为 Google Play 不附带模拟器，并且可以在其上配置的帐户受到限制。

最好的解决方案是使用一些设备进行测试，并使用模拟器来测试不同的屏幕尺寸以及它们对布局的反应。今年有一次 Google I/O 演讲，详细介绍了需要测试哪些设备，以确保获得最大的兼容性。不过我不记得是哪一个了，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:11:31.027

关于开发阶段，您应该首先在模拟器上测试应用程序，以便您可以在具有不同版本的多个目标上测试它，例如：2.2、2.3、4.0，以找出漏洞和解决问题。开发完成后，您可以在您的实际设备上对其进行测试以获得动手体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:15:17.523

我会说这当然取决于您的需求。由于您正在开发一个实际上不会由您自己使用的应用程序，它将被您的目标受众使用，他们将拥有什么？他们肯定会有真正的设备来使用您的应用程序。

有些功能在模拟器上不可用或很难配置，例如您正在开发一个使用蓝牙功能的应用程序。

该模拟器当然是为开发人员设计的，可以在功能有限的虚拟环境中测试他们的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:15:45.620

这实际上取决于您正在创建的应用程序类型。如果您正在创建需要加速度计的游戏，那么真正的设备将是有益的。但是，如果您正在创建具有简单布局的应用程序并且想要测试不同的屏幕尺寸等，那么模拟器非常适合这一点。

然而你应该总是有一个真实的设备，因为模拟器是非常有限的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T08:17:43.807

Android 模拟器提供了一个与实际手机非常相似的平台，因此如果您的应用程序在模拟器中运行，则在实际手机中给出相同结果的情况下，它会达到 94%，除了有时必须在手机上强制测试某些模块像`GMap`, `Push`, `screen size`..

# ios - iOS：以base64编码数据的最快方法

> ID：12120242
> 
> 赞同：0
> 
> 时间：2012-08-25T07:58:18.077
> 
> 标签：ios, performance, encoding, base64

我正在寻找将 UIImage 编码为 base64 字符串的最快解决方案。另外我想知道苹果提供的将 UIImage 转换为 NSData UIImageJPEGRepresentation(image, quality) 的内置解决方案是否是最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:02:23.940

根据[文章](http://cocoadev.com/wiki/BaseSixtyFour)，一个 5.3MB 的图像 (JPEG) 文件用了不到 50 毫秒的时间进行编码，使用 base64 解码大约需要 140 毫秒。[您可以在此处](https://github.com/mikeho/QSUtilities)获取库代码

# html - 按 div 覆盖输入

> ID：12120246
> 
> 赞同：2
> 
> 时间：2012-08-25T07:58:39.773
> 
> 标签：html, css

我正在开发一个表格，在那个表格中有一个复选框。如果我选中复选框，则复选框之前的输入字段必须隐藏在不透明的 div 后面，因此用户无法再填写它。但是，如果我使用 z-index，TD 元素会改变高度。

编码：

```
<table class="prijzen">
<tr>
<td Verhuurperiode</td>
<td>Prijs</td>
<td>Geen verhuur</td>
</tr>
<tr>
<td class="periode_naam" style="padding-bottom:2px;">Maand:</td>
 <td class="periode_prijs"><input type="Text" name="standaard_prijs_maand" maxlength="7"     
size="5" class="input_prijzen"></td>
<td class="geen_verhuur"><div id="verbergen_prijsvak"></div><div style="float:left;"><input    
type="Checkbox"></div><div class="align_checkbox">&nbsp;Huren per maand is niet   
mogelijk</div></td>
</tr>
</table> 
```

CSS：

```
.input_prijzen{
    height:17px;
    font-size:10px;
    position:relative;
    left:0px;
    top:0px;
    z-index:100;
}
#verbergen_prijsvak{
    position:relative;
    left:0px;top:0px;
    z-index:1;
    background-color:red;
    filter:alpha(opacity=25);
    opacity:0.25;
    width:100px;
    height:20px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:23:42.567

做你想做的事情不是一个好习惯，而是尝试禁用`textbox`if the `checkbox`is`checked`并启用它 when `checkbox`is `unchecked`。

你可以做这样的事情

```
$('input[type=checkbox]').on("click",function(){
if($(this).attr("checked"))
$('#txtbox').attr("disabled","disabled");
else
$('#txtbox').removeAttr("disabled");
}); 
```

**[请参阅工作演示。](http://jsfiddle.net/DuNWU/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:08:43.870

“隐藏”另一个 div 后面的文本输入字段以阻止用户输入文本不是最佳做法。实现此效果的最佳方法是使用 javascript 将文本输入设置为禁用。

这是一个演示 - [http://jsfiddle.net/nsuvx/1/](http://jsfiddle.net/nsuvx/1/)

# android - 如何通过 Monkeyrunner 命令在 Android 文本编辑器中输入汉字？

> ID：12120249
> 
> 赞同：2
> 
> 时间：2012-08-25T07:59:32.147
> 
> 标签：android, utf-8, monkeyrunner

有没有办法通过monkeyrunner命令在android文本编辑器中输入汉字？

# algorithm - 页面错误和 LRU 算法

> ID：12120255
> 
> 赞同：0
> 
> 时间：2012-08-25T08:00:26.027
> 
> 标签：algorithm, lru, page-fault

一个主存储器最多可以保留 4 页。如果 LRU 算法用于按顺序排列的后续页面，哪个页面将是第一个出现页面错误的页面？

1,2,3,1,2,4,1,2,3

这是一个我认为没有答案的测试问题。主内存可以保留 4 个页面，并且由于存在页面 1、2、3、4，因此不应该发生页面错误。

答案是第 4 页，但我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:24:34.023

唯一似乎有意义的方法是，如果该序列中的数字是内存中的页码，而不是从磁盘检索的页面。

换句话说，它们是为加载页面而选择的页码。这（至少默认）由短语“如果在以下页面上使用 LRU 算法，则按顺序”支持。

LRU 算法用于选择要丢弃和重新使用的页面，因此，如果选择了第 1 页，那么这将导致页面被换出以进行替换。

所以这个意义上的第四页是：

```
1,2,3,1
      ^
      |
      +-- this one. 
```

并且，因为第一个内存页面已经在使用中，所以会发生页面错误以将新页面引入其中。

我想不出任何其他甚至接近匹配该答案的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:30:08.440

第一个'1'将是第一个页面错误，因为框架在开始时是空的，当第一次调用'1'时，它将显示页面错误，因为框架是空的。页面错误总数为 4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T05:45:53.790

（即使发布，我只是添加一些其他答案中未描述的见解）LRU 是由 Unix 通过维护所有页面的链接列表来实现的。这个列表将在前面有最近使用的页面，而在后面（尾部）有最近最少使用的页面因为列表在每个内存引用上重新组织，所以最后的 4 页顺序是我们感兴趣的 4,1,2,3。

在给定的页面序列中，4 是最近最少使用的页面，而 3 是最近使用的页面。所以第 4 页将在列表的后面。任何导致其中一页被清除的事件都将分页第 4 帧，因为它位于列表的后面

# java - 从 java beans 生成 html - 在编译时

> ID：12120256
> 
> 赞同：0
> 
> 时间：2012-08-25T08:00:25.877
> 
> 标签：java, html

我有一堆 Java bean。它们都很简单，但其中一些具有 50 多个字段。因此，为他们编写 HTML 将花费大量时间。

我想知道是否有一个实用程序（首选命令行）可以用来从 Java 类生成 HTML 表单。

请注意，我不需要动态地执行此操作或其他任何操作。我需要在编译时间之前这样做。

像[grails generate-views](http://grails.org/doc/latest/ref/Command%20Line/generate-views.html)但没有 GSP 标记的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-23T20:28:57.570

jdevelop 列出的另一个选项是[Apache Isis](http://isis.apache.org)。它为您的域对象提供了多个查看器（即 POJO + 一些可选的附加功能）——基于 Apache Wicket 的查看器和基于 JAX-RS 的查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:15:41.080

您可能想看看 Apache Wicket 及其工具：

[https://sites.google.com/site/wicketrad/](https://sites.google.com/site/wicketrad/)

[http://wicketwebbeans.sourceforge.net/](http://wicketwebbeans.sourceforge.net/)

# javascript - 如何使用车把/小胡子和引导输入来渲染项目

> ID：12120259
> 
> 赞同：9
> 
> 时间：2012-08-25T08:00:51.003
> 
> 标签：javascript, backbone.js, autocomplete, twitter-bootstrap, mustache

我想自定义由 bootstrap-typeahead 使用把手模板呈现的项目。查看代码似乎默认项是`<li><a href="#"></a></li>`.

假设我想使用车把模板来呈现我的项目。

我认为我应该以这种方式重新定义渲染功能（1）。

我的问题是：
应该如何将 (1) 与 bootstrap-typeahead.js v2.1.0 一起使用？

这是（2）关于我传递给的选项的代码`$.fn.typeahead`和（3）我的车把/胡子模板。

* * *

(1)

```
var renderItem = function (ul, user) {
    // user is the Backbone.Model
    return $('<li></li>')
        .data('item.autocomplete', user)
        .append(autocompleteItemTemplate(user.toJSON()))
        .appendTo(ul);
}; 
```

* * *

(2)

```
element.typeahead({
    minLength: 3,
    source: function () {
        var users = app.userCollection;

        users = _.map(users, function (user) {
            return user.get('first_name') + ' ' + user.get('last_name');
        });
        return users;
    }
}); 
```

* * *

(3)

```
<a>{{ first_name }} {{ last_name}}</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:47:56.243

您可以像这样覆盖渲染方法：

```
element.data( "typeahead" ).render = function ( items ) {
    var that = this;

    that.$menu.empty();
    items = $( items ).map(function (i, item) {
        i = renderItem( that.$menu, item ).attr( "data-value", item );
        i.find( "a" ).html( that.highlighter(item) );
        return i[0];
    });

    items.first().addClass( "active" );
    return this;
}; 
```

但是，由于 Typeahead 的源属性必须始终是字符串数组或返回字符串数组的函数，因此在 renderItem 函数中用户参数将是字符串，所以我认为您将无法使用 Handlebars。

# ruby-on-rails - Rails 管理员安装时出错。可能与设计有关？

> ID：12120260
> 
> 赞同：0
> 
> 时间：2012-08-25T08:01:12.957
> 
> 标签：ruby-on-rails

很抱歉复制了整个日志，但我希望这对熟悉这个问题的人来说可能更有意义。当设计开始设置用户模型时，我没有得到选项（我从未按下回车键）并且安装继续并崩溃，输出以下内容。谢谢！

```
 ?  What would you like the user model to be called? Press <enter> for [user] >            -  Now setting up devise with user model name 'user':
    generate  devise
      invoke  active_record
      create    db/migrate/20120825075751_add_devise_to_users.rb
      insert    app/models/user.rb
       route  devise_for :users
           -  Now you'll need an initializer...
      create  config/initializers/rails_admin.rb
/home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activerecord-3.2.8/lib/active_record/reflection.rb:385:in `block in source_reflection': undefined method `klass' for nil:NilClass (NoMethodError)
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activerecord-3.2.8/lib/active_record/reflection.rb:385:in `collect'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activerecord-3.2.8/lib/active_record/reflection.rb:385:in `source_reflection'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activerecord-3.2.8/lib/active_record/reflection.rb:375:in `rescue in foreign_key'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activerecord-3.2.8/lib/active_record/reflection.rb:373:in `foreign_key'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:259:in `association_foreign_key_lookup'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:71:in `block in associations'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:64:in `map'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:64:in `associations'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/abstract_model.rb:29:in `block (2 levels) in polymorphic_parents'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/abstract_model.rb:28:in `each'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/abstract_model.rb:28:in `block in polymorphic_parents'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/abstract_model.rb:27:in `tap'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/abstract_model.rb:27:in `polymorphic_parents'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:222:in `association_model_lookup'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/adapters/active_record.rb:69:in `block (2 levels) in associations'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/fields/types/polymorphic_association.rb:49:in `call'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/fields/types/polymorphic_association.rb:49:in `associated_model_config'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/fields/types/polymorphic_association.rb:19:in `block in <class:PolymorphicAssociation>'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/configurable.rb:68:in `instance_eval'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/configurable.rb:68:in `block in register_instance_option'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/rails_admin/config/configurable.rb:42:in `block in register_instance_option'
    from (erb):86:in `block (2 levels) in template'
    from (erb):85:in `map'
    from (erb):85:in `block in template'
    from (erb):82:in `map'
    from (erb):82:in `template'
    from /home/funkdified/.rvm/rubies/ruby-1.9.3-p125-HEAD/lib/ruby/1.9.1/erb.rb:838:in `eval'
    from /home/funkdified/.rvm/rubies/ruby-1.9.3-p125-HEAD/lib/ruby/1.9.1/erb.rb:838:in `result'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:111:in `block in template'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `call'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:54:in `render'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:63:in `block (2 levels) in invoke!'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:63:in `open'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:63:in `block in invoke!'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/empty_directory.rb:133:in `call'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/empty_directory.rb:133:in `invoke_with_conflict_check'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:61:in `invoke!'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions.rb:95:in `action'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/create_file.rb:26:in `create_file'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/actions/file_manipulation.rb:110:in `template'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/rails_admin-0.0.5/lib/generators/rails_admin/install_generator.rb:59:in `install'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/railties-3.2.8/lib/rails/generators.rb:171:in `invoke'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/railties-3.2.8/lib/rails/commands/generate.rb:12:in `<top (required)>'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from /home/funkdified/.rvm/gems/ruby-1.9.3-p125-HEAD@rails323/gems/railties-3.2.8/lib/rails/commands.rb:29:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:43:37.603

我想到了。我首先安装了 devise 进行调试，发现这是我现有的用户模型的问题。我需要删除用户表并重新开始。

# css - 在 CKEditor 中显示具有自定义边框和背景颜色的预定义 css 类

> ID：12120268
> 
> 赞同：0
> 
> 时间：2012-08-25T08:03:19.237
> 
> 标签：css, ckeditor

我在我的项目中使用 ckeditor。我在 ckeditor 区域中添加了一个按钮，当我单击它时，它会将 sum html 标记添加到编辑器内容中。按钮的点击事件代码如下：

```
var oEditor = CKEDITOR.instances['myEditor'];
var html = '<span class=\'myclass\'>some text</span>';
var newElement = CKEDITOR.dom.element.createFromHtml( html, oEditor.document );
oEditor.insertElement( newElement ); 
```

现在，我想在 CKEditor 中为类“myclass”添加一些 css 代码，以显示与编辑器中的另一个标签不同的标签。我怎样才能做到这一点 ？换句话说，当我使用编辑器时，我希望在编辑器中看到不同的 myclass 标签。

# asp.net-mvc-3 - 带有 Razor 的 MVC 控件工具包 DatePicker 不呈现日历

> ID：12120275
> 
> 赞同：0
> 
> 时间：2012-08-25T08:04:14.330
> 
> 标签：asp.net-mvc-3

我尝试按照 MVC Controls Toolkit 的文档和示例来创建 DatePicker，但我无法让它工作。

我想知道是否有人可以指出我做错了什么？或者提供一个代码示例？我正在使用 Razor 进行 MVC3ControlsToolkit.dll 的实现...

```
@Html.DateTimeFor(model => model.Date, DateTime.Now); 
```

* * *

我已将代码更新为下面的代码，我得到一个空文本框，但如果我单击文本框，则不会弹出日历。尽管我读了几次，但文档对我来说并不清楚！按照文档，我创建了对 MVC3ControlsToolkit.dll、MVCControlToolkit.Controls.Core-2.2.0.js 和 MVCControlToolkit.Controls.Datetime-2.2.0.js 的引用。

我想在 DB 中获得一个带有日期的填充文本框（这适用于普通文本框，但还不能用于日历控件！）当我单击文本框时，我希望显示日历控件。当我从日历中选择一个日期时，所选日期将被写入文本框并且日历将关闭。

```
@{ var DT = @Html.DateTimeFor(model => model.Date, DateTime.Now, dateInCalendar: true); }
       @DT.DateCalendar(
                    inLine: false,
                    calendarOptions: new CalendarOptions
                    {
                        ChangeYear = true,
                        ChangeMonth = true,

                    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:06:52.947

DateTimeFor 返回一个可用于数据和时间的对象。

```
@Html.DateTimeFor(model => model.Date, DateTime.Now).Date() 
```

应该管用。或者

```
@{
var DTS=Html.DateTimeFor(model => model.Date, DateTime.Now);
} 
```

如果你想要一个日期选择器，然后使用 @DTS.Date() 和 @DTS.Time() 将日期和时间放在你喜欢的任何地方：

```
@{
var DT = @Html.DateTimeFor(model => model.Date, DateTime.Now, dateInCalendar: true);
} 
```

进而：

```
@DT.DateCalendar(
 inLine: false,
 calendarOptions: new CalendarOptions{
 ChangeYear = true,
 ChangeMonth = true,
 }); 
```

有关详细信息，请参阅[文档中的示例。](http://mvccontrolstoolkit.codeplex.com/wikipage?title=DateTimeInput%20and%20DateRange%20attribute)

# servicestack - 使用 servicestack 提供静态文件

> ID：12120276
> 
> 赞同：4
> 
> 时间：2012-08-25T08:04:35.703
> 
> 标签：servicestack

我将如何使用 servicestack 提供静态文件？

我想添加一个像 Routes.Add(/app) 这样的路由，当客户端为此路径发出 GET 时，我需要返回一个 silverlight xap 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T16:00:36.587

ServiceStack 已经能够通过直接引用静态文件来提供服务。

否则，如果您希望服务返回文件以供下载，您可以这样做：

```
return new HttpResult(new FileInfo("~/app.xap"), asAttachment:true) {
   ContentType = "application/x-silverlight-app"
}; 
```

注意：`asAttachment`将控制是否发送 HTTP`Content-Disposition`标头。

有关 ServiceStack 响应的更多信息在这个较早的问题中：[ServiceStack and return a stream](https://stackoverflow.com/questions/10040680/servicestack-and-returning-a-stream)

# derby - Apache Derby 性质无法添加

> ID：12120278
> 
> 赞同：2
> 
> 时间：2012-08-25T08:04:49.317
> 
> 标签：derby

> **可能重复：**
> [Apache Derby Eclipse 插件去哪儿了？](https://stackoverflow.com/questions/11400225/where-did-the-apache-derby-eclipse-plug-in-go)

我在 Eclipse 插件文件夹中为 Eclipse 安装了几个 Derby 插件，例如`org.apache.derby.core_10.2.2`，`org.apache.derby.plugin.doc_1.1.0``org.apache.derby.ui_1.1.0`

我正在为 Java EE 项目执行此操作。当我尝试将 Apache Derby 性质添加到此类项目时，会出现以下错误：

> 将 derby jar 添加到项目时出错：org.eclipse.ui.internal.workbenchwindow 无法转换为 org.eclipse.jface.window.ApplicationWindow

我正在使用 Eclipse Juno。

# cuda - Cuda 内核 - 可能的优化

> ID：12120282
> 
> 赞同：0
> 
> 时间：2012-08-25T08:05:14.003
> 
> 标签：cuda, thrust

这是我为并行计算一些数组而启动的内核。

```
__device__ bool mult(int colsize,int rowsize,int *Aj,int *Bi)
    {       
        for(int j = 0; j < rowsize;j++)
        {           
           for(int k = 0;k < colsize;k++)
            {   
              if(Aj[j] == Bi[k])
               {    
                return true;
                }                               
            }           
        }
            return false;       
    }

__global__ void kernel(int *Aptr,int *Aj,int *Bptr,int *Bi,int rows,int cols,int *Cjc)
    {
        int tid = threadIdx.x + blockIdx.x * blockDim.x;
        int i;
        if(tid < cols)
        {
            int beg = Bptr[tid];
            int end = Bptr[tid+1];
            for(i = 0;i < rows;i++)
            {
                int cbeg = Aptr[i];
                int cend = Aptr[i+1];
                if(mult(end - beg,cend - cbeg,Aj+cbeg,Bi+beg))
                {                                                
                     Cjc[tid+1] += 1;
                     //atomicAdd(Cjc+tid+1,1);           
                }
            }                
        }               
    } 
```

我的启动配置和内核调用如下。

```
int numBlocks,numThreads;

        if(q % 32 == 0)
        {
            numBlocks = q/32;
            numThreads = 32;
        }
        else
        {
            numBlocks = (q+31)/32;
            numThreads = 32;
        }
findkernel<<<numBlocks,numThreads>>>(devAptr,devAcol,devBjc,devBir,m,q,d_Cjc); 
```

我不得不承认，这个内核运行得很慢。一旦我将阵列返回到主机端，我`thrust::inclusive_scan`就可以找到我的结果阵列。我的问题是，我的内核是否还有改进/优化的空间？我尝试使用共享内存，但它会产生错误的答案或引发运行时异常。

此外，动态分配的共享内存（由内核启动中的第三个参数分配）如何在块之间分配？

任何帮助/提示/暗示将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:56:18.637

至于使用`kernel<<<blocks,threads,mem>>>`mem 分配的共享内存是每个块分配的内存量。所以每个块都会获得`mem`大量的内存。

对于您的代码，我不明白为什么 mult 函数中有 2 个 for 循环。只想指出每个线程都将执行这 2 个 for 循环。此外，由于函数中还有一个 for 循环`kernel`，这意味着每个线程将`for`多次执行 mult 函数中的 2 个循环。这很慢。此外，做

```
int beg = Bptr[tid]; 
int end = Bptr[tid+1]; 
```

不完全是合并访问。非合并访问很慢。

# sql - 如何绕过 ORA-01722

> ID：12120283
> 
> 赞同：-4
> 
> 时间：2012-08-25T08:05:40.530
> 
> 标签：sql, oracle

是否有解决方法/更好的方法来做到这一点：

我有一个字段（TEREMARKS），其中包含一个长字符串，我需要从该字符串中获取可以在其中找到的时间和名称。当我遇到这种格式时，我提取时间和名称： *`TE=<HH:MM>(<NAME>)`*

我的问题是有时编码器不遵循格式，这会抛出 ORA-01722。我本来希望我的程序跳过错误的记录并返回正常的记录。那可能吗？以下是脚本：

**创建表：**

```
CREATE TABLE HPACC.TE_ENTRY
(
  TENUMBER    VARCHAR2(20 BYTE)                 NOT NULL,
  TEREMARKS   VARCHAR2(100 BYTE),
  TEUPDATEBY  VARCHAR2(15 BYTE),
  TETRXDT     DATE
); 
```

**插入数据：**

```
Insert into HPACC.TE_ENTRY (TENUMBER, TEREMARKS, TEUPDATEBY, TETRXDT)
Values ('115118002', 'TE=10:03 CU ANTI SEIZZURE ', 'ME1', TO_DATE('08/24/2012 10:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into HPACC.TE_ENTRY (TENUMBER, TEREMARKS, TEUPDATEBY, TETRXDT)
Values ('1151180025 ', 'TE= 10:19 ON AND OFF FEVER', 'ME2', TO_DATE('08/24/2012 10:01:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into HPACC.TE_ENTRY (TENUMBER, TEREMARKS, TEUPDATEBY, TETRXDT)
Values ('1153053592', 'TE=10:40(DIANE)   PRE''EMP', 'ME1', TO_DATE('08/24/2012 10:05:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into HPACC.TE_ENTRY (TENUMBER, TEREMARKS, TEUPDATEBY, TETRXDT)
Values ('1157019820', 'TE=10:45(KRISTEN), CU,MONITORING,RASHE,FEVER LAST MONDAY  ', 'ME1', TO_DATE('08/24/2012 10:12:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into HPACC.TE_ENTRY (TENUMBER, TEREMARKS, TEUPDATEBY, TETRXDT)
Values ('1157019832', 'TE=11-:13 PRE EMP EXTRACTED BY:CAMILLA', 'ME3', TO_DATE('08/24/2012 10:15:00', 'MM/DD/YYYY HH24:MI:SS')); 
```

**我的查询：**

```
SELECT TO_CHAR(DECODE(ORIGTIME, '1', '13','2', '14','3', '15','4', '16',ORIGTIME),'FM00') ATIME
      , DONEBY
      , COUNT(TENUMBER) AS CTOTAL 
FROM ( 
SELECT TENUMBER
        , (CASE WHEN (INSTR(UPPER(TEREMARKS),'TE=',1,1) <> 0) 
                  AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,1)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,1)),':',1,1))-4)
   , ' +-.0123456789', ' '))) IS  NULL) 
     THEN TO_NUMBER(REPLACE(TO_CHAR(TO_NUMBER(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,1)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,1)),':',1,1))-4)),'FM99'),'-')) 
   ELSE 0 END) AS ORIGTIME
 , (CASE WHEN (INSTR(UPPER(TEREMARKS),'(',1,1) <> 0) 
    AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,1)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,1)+1),')',1,1))-1), ' +-.0123456789', ' '))) IS NULL) 
   THEN SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,1)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,1)+1),')',1,1))-1) 
  ELSE TEUPDATEBY END) AS DONEBY 
FROM HPACC.TE_ENTRY 
  Where TETRXDT BETWEEN TO_DATE('08-24-2012 10:00:00','MM-DD-YYYY HH24:MI:SS') AND TO_DATE('08-24-2012 10:59:59','MM-DD-YYYY HH24:MI:SS') 
GROUP BY TENUMBER, TEREMARKS, TEUPDATEBY 
UNION
SELECT TENUMBER
    , (CASE WHEN (INSTR(UPPER(TEREMARKS),'TE=',1,2) <> 0) 
     AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,2)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,2)),':',1,1))-4), ' +-.0123456789', ' '))) IS NULL) 
      THEN TO_NUMBER(REPLACE(TO_CHAR(TO_NUMBER(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,2)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,2)),':',1,1))-4)),'FM99'),'-'))
   ELSE 0 END) AS ORIGTIME
 ,  (CASE WHEN (INSTR(UPPER(TEREMARKS),'(',1,2) <> 0) 
     AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,2)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,2)+1),')',1,1))-1), ' +-.0123456789', ' '))) IS NULL) 
 THEN SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,2)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,2)+1),')',1,1))-1) 
Else 'NONE' END) AS DONEBY 
FROM HPACC.TE_ENTRY 
Where TETRXDT BETWEEN TO_DATE('08-24-2012 10:00:00','MM-DD-YYYY HH24:MI:SS') AND TO_DATE('08-24-2012 10:59:59','MM-DD-YYYY HH24:MI:SS') 
GROUP BY TENUMBER, TEREMARKS 
UNION  
SELECT TENUMBER
     , (CASE WHEN (INSTR(UPPER(TEREMARKS),'TE=',1,3) <> 0)
 AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,3)+3, (INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,3)),':',1,1))-4), ' +-.0123456789', ' '))) IS NULL) 
THEN TO_NUMBER(REPLACE(TO_CHAR(TO_NUMBER(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,3)+3, (INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,3)),':',1,1))-4)),'FM99'),'-')) 
ELSE 0 END) AS ORIGTIME
, (CASE WHEN (INSTR(UPPER(TEREMARKS),'(',1,3) <> 0) 
  AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,3)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,3)+1),')',1,1))-1), ' +-.0123456789', ' '))) IS NULL) 
THEN SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,3)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,3)+1),')',1,1))-1) 
Else 'NONE' END) AS DONEBY 
FROM HPACC.TE_ENTRY 
Where TETRXDT BETWEEN TO_DATE('08-24-2012 10:00:00','MM-DD-YYYY HH24:MI:SS') AND TO_DATE('08-24-2012 10:59:59','MM-DD-YYYY HH24:MI:SS') GROUP BY TENUMBER, TEREMARKS 
UNION 
SELECT TENUMBER
 , (CASE WHEN (INSTR(UPPER(TEREMARKS),'TE=',1,4) <> 0) 
 AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,4)+3, (INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,4)),':',1,1))-4), ' +-.0123456789', ' '))) IS NULL) 
 THEN TO_NUMBER(REPLACE(TO_CHAR(TO_NUMBER(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,4)+3, (INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,4)),':',1,1))-4)),'FM99'),'-')) 
ELSE 0 END) AS ORIGTIME, 
(CASE WHEN (INSTR(UPPER(TEREMARKS),'(',1,4) <> 0)
 AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,4)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,4)+1),')',1,1))-1), ' +-.0123456789', ' '))) IS NULL) 
 THEN SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,4)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,4)+1),')',1,1))-1) 
Else 'NONE' END) AS DONEBY 
FROM HPACC.TE_ENTRY
Where TETRXDT BETWEEN TO_DATE('08-24-2012 10:00:00','MM-DD-YYYY HH24:MI:SS') AND TO_DATE('08-24-2012 10:59:59','MM-DD-YYYY HH24:MI:SS')
GROUP BY TENUMBER, TEREMARKS 
UNION 
SELECT TENUMBER
, (CASE WHEN (INSTR(UPPER(TEREMARKS),'TE=',1,5) <> 0) 
AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,5)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,5)),':',1,1))-4), ' +-.0123456789', ' '))) IS NULL) 
 THEN TO_NUMBER(REPLACE(TO_CHAR(TO_NUMBER(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,5)+3,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'TE=',1,5)),':',1,1))-4)),'FM99'),'-'))
 ELSE 0 END) AS ORIGTIME
, (CASE WHEN (INSTR(UPPER(TEREMARKS),'(',1,5) <> 0) AND (LENGTH(TRIM(TRANSLATE(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,5)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,5)+1),')',1,1))-1), ' +-.0123456789', ' '))) IS NULL) 
THEN 
 SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,5)+1,(INSTR(SUBSTR(TEREMARKS,INSTR(UPPER(TEREMARKS),'(',1,5)+1),')',1,1))-1) 
   Else 'NONE' END) AS DONEBY
FROM HPACC.TE_ENTRY Where TETRXDT BETWEEN TO_DATE('08-24-2012 10:00:00','MM-DD-YYYY HH24:MI:SS') AND TO_DATE('08-24-2012 10:59:59','MM-DD-YYYY HH24:MI:SS') 
GROUP BY TENUMBER, TEREMARKS
) 
Where ORIGTIME <> 0 
Group By ORIGTIME, DONEBY 
Order By TO_CHAR(TO_NUMBER(ATIME),'FM00') , DONEBY; 
```

最后一条记录 (10:15) 导致错误。如何绕过那个？我也觉得我的剧本太冗长了。感谢您的更正、建议和示例。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T08:52:12.217

正如 Alex 评论的那样，这显然是正则表达式的任务。

这是一个适用于您*当前*数据的方法。

```
select regexp_substr( teremarks
                   , '^TE=[[:space:]]?[[:digit:]]{2}[[:print:]]?:[[:digit:]]{2}')
     , regexp_substr( teremarks
                   , '([(][[:alpha:]]+[)]|:[[:alpha:]]+$)')
from te_entry 
```

这匹配，从字符串的开头开始`TE`，后跟一个`=`，然后是一个可选空格，两个数字一个可选字符，`:`然后是另外两个数字。

秒匹配`(`后跟任意数量的字母`)`，或者`:`后跟在行尾的任意数量的字母。

或者，为了得到时间和名字，删除所有额外的东西：

```
with matched as (
 select regexp_substr( teremarks
                    , '^TE=[[:space:]]?[[:digit:]]{2}[[:print:]]?:[[:digit:]]{2}'
                       ) as time
      , regexp_substr( teremarks
                    , '([(][[:alpha:]]+[)]|:[[:alpha:]]+$)'
                        ) as name
   from te_entry
        )
select regexp_replace( time
                    , '[^([:digit:]|:)]')
     , regexp_replace( name
                    , '[^[:alpha:]]')
from matched 
```

这是[一个用于演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/e2868/19)。另请注意，正则表达式仅在 Oracle 10g 或更高版本中可用。

我想强调的是，虽然这将适用于您*当前*的数据，但这并不意味着它将永远有效。总会有更多你没有想到的案例。如果此查询的结果很重要，您应该更改您的表格以包含一个包含进行测量的*日期*（而不是时间）的列和另一个包含测量人员姓名的列。

这是您可以确定您的数据正确无误的*唯一方法。*

# http - BlackBerry JDE 7.1 MDS 工作，模拟器中的应用程序未连接

> ID：12120284
> 
> 赞同：1
> 
> 时间：2012-08-25T08:05:45.263
> 
> 标签：http, blackberry, connection, simulator, jde

从 OS 5.0 开始，我一直使用 RIM 提供的 BlackBerry JDE 软件开发小型 BlackBerry 应用程序。在 Java 小程序在请求代码签名时崩溃之前，我在使用模拟器之前没有遇到任何问题。我必须下载 JDE 7.1（最新版本）才能让我的应用程序签名。

然而，现在 BlackBerry 7.1 中的 9900 (OS 7.0) 模拟器与 MDS 一起运行。我可以使用模拟浏览器访问网站或使用模拟 Twitter 应用程序。然而，我所有的应用程序现在突然不与我的服务器建立任何 HTTP 连接（运行 MDS 时没有活动）。

据我所知，HTTPConnection 库不是已弃用的 API。这个问题的原因可能是什么？从 BlackBerry 更新 JDE 软件后，有人遇到过类似的问题吗？

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:15:13.530

问题可能就在那里：`HttpConnection`需要根据传输类型将不同的参数附加到 URL，而较新的`ConnectionFactory`则不需要。MDS 模拟器就像通过 BES 连接，因此您需要附加正确的后缀：

[http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)

从 OS 5.0 开始，您可以使用`ConnectionFactory`和摆脱这种东西。

# asp.net - 301 redirect to all pages in a site with ASP.NET

> ID：12120287
> 
> 赞同：0
> 
> 时间：2012-08-25T08:06:12.690
> 
> 标签：asp.net

I'd like to set up a 301 redirect from a .co.uk site to a .com site, keeping the same pages.

So someone going to mydomain.co.uk/pages/about should get redirected to mydomain.com/pages/about

I'm using ASP.NET and IIS 7.0 and not having much luck. I tried setting a custom 404 file that has a redirect in it like so:

```
 if (HttpContext.Current.Request.Url.ToString().ToLower().Contains(".co.uk"))
    {
        HttpContext.Current.Response.Status = "301 Moved Permanently";
        HttpContext.Current.Response.AddHeader("Location", Request.Url.ToString().ToLower().Replace(
                ".co.uk",
                ".com"));
    } 
```

however my 404 page isn't being called when I go to a URL such as /pages/about. I have the following in my web.config:

```
<configuration>
  <system.web>
    <customErrors mode="On" defaultRedirect="404.aspx"/>
  </system.web>
</configuration> 
```

Can anyone assist please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:24:52.113

`customErros section` within your *web.config* will be accessed in case there is an error in your application. Is there any error when try to navigate to mydomain.co.uk/pages/about?

If there is no error - customErrors is not affected. In this case you may try `Response.Redirect("mydomain.com/pages/about")`.

See [HttpResponse.Redirect on MSDN](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.110%29.aspx) (cite: *ASP.NET performs the redirection by returning a 302 HTTP status code.*)

And have a look at [customErrors section](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.100%29.aspx) and [errors element](http://msdn.microsoft.com/en-us/library/s2f4e3e7%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T00:18:55.227

I ended up using the Application_BeginRequest function of the global.asax. Much cleaner than trying to redirect to a 404

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:31:03.627

please see also [http://www.idea-r.it/Blog.aspx/asp-net-301-redirect?utm_source=rss&utm_medium=rss&utm_campaign=rss](http://www.idea-r.it/Blog.aspx/asp-net-301-redirect?utm_source=rss&utm_medium=rss&utm_campaign=rss)

it addresses the issue very nicely!

# android - 强制关闭连接到服务中的数据库（Android Widget）

> ID：12120290
> 
> 赞同：0
> 
> 时间：2012-08-25T08:06:57.590
> 
> 标签：android, sqlite, service, widget, nullpointerexception

我在连接到用于更新我的应用程序小部件的 android 服务中的数据库时遇到了一些问题。该程序在不使用数据库时工作正常，但是当我在服务中使用数据库时，向我显示此消息：“不幸的是，App_Name 已停止。” 该数据库用于我的所有应用程序，并且可以正常工作。

这是我在服务中使用数据库时的 LogCat：

```
08-25 07:53:06.536: E/AndroidRuntime(688): FATAL EXCEPTION: main
08-25 07:53:06.536: E/AndroidRuntime(688): java.lang.RuntimeException: Unable to start     service msm.dictionary.iraniannames.UpdateWidgetService@414eaba0 with Intent { cmp=msm.dictionary.iraniannames/.UpdateWidgetService (has extras) }: java.lang.NullPointerException
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.ActivityThread.access$1900(ActivityThread.java:123)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.os.Looper.loop(Looper.java:137)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-25 07:53:06.536: E/AndroidRuntime(688):  at java.lang.reflect.Method.invokeNative(Native Method)
08-25 07:53:06.536: E/AndroidRuntime(688):  at java.lang.reflect.Method.invoke(Method.java:511)
08-25 07:53:06.536: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-25 07:53:06.536: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-25 07:53:06.536: E/AndroidRuntime(688):  at dalvik.system.NativeStart.main(Native Method)
08-25 07:53:06.536: E/AndroidRuntime(688): Caused by: java.lang.NullPointerException
08-25 07:53:06.536: E/AndroidRuntime(688):  at msm.dictionary.iraniannames.NamesDatabase.getById(NamesDatabase.java:122)
08-25 07:53:06.536: E/AndroidRuntime(688):  at msm.dictionary.iraniannames.UpdateWidgetService.onStart(UpdateWidgetService.java:44)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.Service.onStartCommand(Service.java:438)
08-25 07:53:06.536: E/AndroidRuntime(688):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359) 
```

这是我的服务代码：

```
public class UpdateWidgetService extends Service {
private static final String LOG = "de.vogella.android.widget.example";

@Override
public void onStart(Intent intent, int startId) {
Log.i(LOG, "Called");
// Create some random data

AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this
    .getApplicationContext());

int[] allWidgetIds = intent
    .getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

ComponentName thisWidget = new ComponentName(getApplicationContext(),
        WidgetProvider.class);
int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
Log.w(LOG, "From Intent" + String.valueOf(allWidgetIds.length));
Log.w(LOG, "Direct" + String.valueOf(allWidgetIds2.length));

for (int widgetId : allWidgetIds) {
  // Create some random data
  int number = (new Random().nextInt(4400));

 NamesDatabase db = new NamesDatabase(this);
 Cursor c = db.getById(Integer.toString(number));

  RemoteViews remoteViews = new RemoteViews(this
      .getApplicationContext().getPackageName(),
      R.layout.widgetlayout);
  Log.w("WidgetExample", String.valueOf(number));
  // Set the text
  remoteViews.setTextViewText(R.id.update,
      "Random: " + String.valueOf(number));
  // Register an onClickListener
  Intent clickIntent = new Intent(this.getApplicationContext(),
          WidgetProvider.class);

  clickIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
  clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
      allWidgetIds);

  PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, clickIntent,
      PendingIntent.FLAG_UPDATE_CURRENT);
  remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
  appWidgetManager.updateAppWidget(widgetId, remoteViews);
}
stopSelf();

super.onStart(intent, startId);
}

@Override 
public IBinder onBind(Intent intent) {

return null;
}
} 
```

这是我在 AppWidgetProvider 中的代码：

```
public class WidgetProvider extends AppWidgetProvider {

public WidgetProvider() {
    // TODO Auto-generated constructor stub
}

  @Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager,
      int[] appWidgetIds) {
    // Get all ids
    ComponentName thisWidget = new ComponentName(context,
        WidgetProvider.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

    // Build the intent to call the service
    Intent intent = new Intent(context.getApplicationContext(),
        UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);

    // Update the widgets via the service
    context.startService(intent);
  }

} 
```

# entity-framework - WCF 数据服务的请求错误

> ID：12120297
> 
> 赞同：7
> 
> 时间：2012-08-25T08:08:19.553
> 
> 标签：entity-framework, wcf-data-services, odata

这是我第一次设置 OData 服务，我当然遇到了一些问题......

问题是我无法让服务运行，我不断收到“请求错误”。 ![请求错误](../Images/d22f4116cf9c9ca800b66e88d354cd12.png)

我[研究](http://www.bondigeek.com/blog/2010/12/11/debugging-wcf-data-services/)了问题可能是什么，发现一个常见问题是访问规则输入错误。因此，我尝试使用单数名称、复数名称来解决此问题，并且我也尝试使用`typeof(Post).getType().Name`

那么这是我的代码。我希望你能帮助我，我已经被困了好几个小时了。

```
public class ODataService : DataService<Entity>
{
    // This method is called only once to initialize service-wide policies.
    public static void InitializeService( DataServiceConfiguration config )
    {
        //config.SetEntitySetAccessRule( "Users", EntitySetRights.All );
        //config.SetEntitySetAccessRule( "Posts", EntitySetRights.All );
        //config.SetEntitySetAccessRule( "Albums", EntitySetRights.All );

        config.SetEntitySetAccessRule( "*", EntitySetRights.AllRead );
        config.SetServiceOperationAccessRule( "*", ServiceOperationRights.AllRead );
        //config.SetServiceOperationAccessRule( "GetPosts", ServiceOperationRights.AllRead );

        config.UseVerboseErrors = true;
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }

    [WebGet]
    public IQueryable<Post> GetPosts()
    {
        return CurrentDataSource.Posts.AsQueryable();
    }
} 
```

我的 EntityFramework 类的结构（db first） ![我的 EntityFramework 类的结构（db first）](../Images/3d2ef4326c411a7bb160c4301db16096.png "我的 EntityFramework 类的结构（db first）")

实体类的方法和成员。这里的实体以复数形式拼写。 ![实体类的方法和成员](../Images/88d3c2358d60b02962415a38b7d94d9a.png "实体类的方法和成员")

这是我的 Web.config：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="Entity" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=&quot;data source=XXX;Initial Catalog=XXX;persist security info=True;user id=XXX;password=XXX;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime requestValidationMode="4.5" targetFramework="4.5" encoderType="System.Web.Security.AntiXss.AntiXssEncoder, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <pages controlRenderingCompatibilityVersion="4.5" />
    <machineKey compatibilityMode="Framework45" />
  </system.web>
<system.serviceModel>
    <services>
      <service name="LinkIT.Core.OData.ODataService"  behaviorConfiguration ="DebugEnabled">
      </service>
    </services>
    <behaviors>
      <serviceBehaviors >
        <behavior name="DebugEnabled">
          <serviceDebug includeExceptionDetailInFaults="True"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  </system.serviceModel>
</configuration> 
```

详细的错误信息：

> 服务器在处理请求时遇到错误。异常消息是“值不能为空。参数名称：propertyResourceType'。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.Data.Services.WebUtil.CheckArgumentNull[T](T value, String parameterName) 在 System.Data.Services.Providers.ResourceProperty..ctor(String name, ResourcePropertyKind kind, ResourceType propertyResourceType) 在 System.Data.Services。 Providers.ObjectContextServiceProvider.PopulateMemberMetadata(ResourceType resourceType, IProviderMetadata workspace, IDictionary `2 knownTypes, PrimitiveResourceTypeMap primitiveResourceTypeMap) at System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary`2 knownTypes, IDictionary `2 childTypes, IDictionary`2 entitySets) 在 System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata() 在 System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() 在 System .Data.Services.DataService 1.CreateProvider `1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) at System.Data.Services.DataService`() 在 System.Data.Services.DataService`1.HandleRequest() at System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[] & outputs) 在 System.ServiceModel。 Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) ) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在系统。ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(布尔 isOperationContextSet)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T03:40:39.887

WCF 数据服务团队[确认](http://blogs.msdn.com/b/astoriateam/archive/2012/08/29/odata-101-using-the-notmapped-attribute-to-exclude-enum-properties.aspx)- 这是您使用 Enums 时面临的确切错误（尚不支持）。

删除 Enum 类型（或使用他们建议的解决方法并使用 enum 属性的包装器），这应该会消失。

# php - 在 Cookie 中存储长数组

> ID：12120299
> 
> 赞同：1
> 
> 时间：2012-08-25T08:08:33.220
> 
> 标签：php, mysql, sql, arrays

我知道在 php 中存储数据的方法。但是当我在 PHP 中存储一个长数组时，这种方法不起作用。该数组有大约 3000 个值（82382 个字符）。

我正在这样做：

```
$encoded_db_data = base64_encode(serialize($query_result));
setcookie("db_select_result", '$encoded_db_data'); 
```

但**db_select_result**正在打印空白（无值）。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:07:43.487

> A user agent MAY ignore a received cookie in its entirety. For example, the user agent might wish to block receiving cookies from "third-party" responses or the user agent might not wish to store cookies that exceed some size.

From: [http://www.faqs.org/rfcs/rfc6265.html](http://www.faqs.org/rfcs/rfc6265.html)

Consider the next options:

1.Split the array's data and put it in more than one cookie.

2.Use `sessions` (Unlike cookies they have "short-life") [http://www.php.net/manual/en/session.examples.basic.php]

3.Store that data in a `Database` with a "unique key" , then set a cookie with that unique key so you'll be able to identify which data to pull from the database.

4.Use less data from your array and try to put it in a cookie.

# indexing - 在 Robots.txt 中跟随 noindex

> ID：12120300
> 
> 赞同：1
> 
> 时间：2012-08-25T08:08:40.417
> 
> 标签：indexing, search-engine, robots.txt, robot, nofollow

我有一个 wordpress 网站，该网站已被搜索引擎收录。

我编辑了 Robots.txt 以禁止搜索索引中的某些目录和网页。

我只知道如何使用allow和disallow，但不知道如何使用Robots.txt文件中的follow和nofollow。

我在谷歌搜索时在某处读到，我可以拥有不会在 Google 中被编入索引但会被抓取以获取 pagerank 的网页。这可以通过禁用 Robots.txt 中的网页并使用以下网页来实现。

请让我知道如何在 Robots.txt 文件中使用 follow 和 nofollow。

谢谢

苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:32:23.960

a.) follow/no follow 和 index/no index 规则不适用于 robots.txt（设置一般站点规则），而是用于页面元机器人标签（设置此特定页面的规则）

[有关元机器人的更多信息](http://www.robotstxt.org/meta.html)

b.) Google 不会抓取不允许的页面，但它可以在 SERP 上将它们编入索引（使用来自入站链接或 Dmoz 等网站目录的信息）。
话虽如此，您无法从中获得任何公关价值。

[有关 Googlebot 的索引行为的更多信息](http://www.incapsula.com/the-incapsula-blog/item/395-new-snippet-puts-googlebot-in-the-spotlight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T11:55:56.107

Google 实际上确实识别了 robots.txt 中的 Noindex: 指令。这是马特·卡茨谈论它： http: [//www.mattcutts.com/blog/google-noindex-behavior/](http://www.mattcutts.com/blog/google-noindex-behavior/)

如果您在 robots.txt 中为已经在 Google 索引中的页面添加“Disallow”，您通常会发现该页面保留在索引中，就像幽灵一样，被剥夺了关键字。我想这是因为他们知道他们不会抓取它，并且他们不想要包含 bit-rot 的索引。因此，他们将页面描述替换为“由于此站点的 robots.txt，无法获得此结果的描述 - 了解更多信息。”

所以，问题仍然存在：既然“禁止”不起作用，我们如何从 Google 中删除该链接？通常，您会希望在相关页面上使用元机器人 noindex，因为如果 Google 看到此更新，它实际上会从索引中删除该页面，但是使用您的机器人文件中的 Disallow 指令，他们永远不会知道它。

因此，您可以从 robots.txt 中删除该页面的 Disallow 规则，并在该页面的标题中添加一个 meta robots noindex 标签，但现在您必须等待 Google 返回并查看您告诉他们忘记的页面。

您可以从您的主页创建一个指向它的新链接，希望 Google 会得到提示，或者您可以通过直接将 Noindex 规则添加到 robots.txt 文件来避免整个事情。在上面的帖子中，马特说这将导致链接被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T21:57:49.263

不，你不能。您可以设置要阻止的目录和机器人，但不能通过 robots.txt 设置 nofollow 在页面上使用机器人元标记来设置 nofollow。

# c#-4.0 - C# 中是否有任何直接的方法来优化数学函数或最小化表达式中的参数？

> ID：12120306
> 
> 赞同：1
> 
> 时间：2012-08-25T08:09:58.573
> 
> 标签：c#-4.0, machine-learning, mathematical-optimization

我正在尝试在 C# 中实现一个算法，其中包含一些数学函数，例如：

最小化 a ||xu( i ) - ∑j aj( i ) bj ||2 + β || 一（一）||1

但我不确定 C# 中是否有任何直接的优化方法，我在论坛中找不到任何东西，或者你可以提供任何建议来解决 C# 中的这个优化问题！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T12:29:38.197

有几个具有 C# 绑定的求解器可能适合您的问题，例如：

*   [MS Solver Foundation](http://archive.msdn.microsoft.com/solverfoundation)是 Microsoft 的数学优化平台，它为包括无约束和约束最小二乘在内的大量问题提供求解器。一些努力挖掘 API，但作为回报，导数会自动计算等。
*   [ALGLIB](http://www.alglib.net/optimization/)提供了大量不同的优化器，并且在[C#](http://www.alglib.net/download.php)中可用。
*   阿里在上面的评论中提到了IPOPT。我开发了与 IPOPT 的 C# 绑定，可在[此处](http://code.google.com/p/csipopt/)下载。我当然有偏见，但我个人认为 API 相当简单。如果您使用*csipopt* ，则需要手动提供衍生产品。（实际上还有一个包含*csipopt 并*提供自动导数计算的库[Funclib](http://funclib.codeplex.com/)。）
*   COBYLA2（如果您有非线性约束）和 BOBYQA（如果您有约束或没有约束）是 Michael Powell 开发的无导数直接搜索方法。我已将这些求解器移植到 C#，100% 托管代码。C# COBYLA2 项目可[在此处](https://github.com/cureos/cscobyla)获得，C# BOBYQA 项目可[在此处](https://github.com/cureos/csbobyqa)获得。

# scala - 生成 k 对独立的散列函数

> ID：12120313
> 
> 赞同：10
> 
> 时间：2012-08-25T08:11:21.900
> 
> 标签：scala, hash-function, cryptographic-hash-function

我正在尝试在 Scala 中实现[Count-Min Sketch](http://en.wikipedia.org/wiki/Count-Min_sketch)算法，因此我需要生成 k 成对独立哈希函数。

这是一个比我以前编程过的任何东西都低的级别，而且我对哈希函数了解不多，除了算法类，所以我的问题是：我如何生成这些 k 成对独立的哈希函数？

我应该使用像 MD5 或 MurmurHash 这样的哈希函数吗？我是否只生成 k 形式的散列函数`f(x) = ax + b (mod p)`，其中 p 是素数，a 和 b 是随机整数？（即，每个人都在算法 101 中学习的[通用散列系列）](http://en.wikipedia.org/wiki/Universal_hashing)

我正在寻找比原始速度更简单的东西（例如，如果实现起来更简单，我会慢 5 倍）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:38:57.290

Scala 已经`MurmurHash`实现了（它的`scala.util.MurmurHash`）。它非常快速且非常擅长分配价值。加密哈希是多余的——你只需要比你需要的时间长几十或几百倍。只需选择`k`不同的种子开始，由于它的质量几乎是加密的，您将获得`k`很大程度上独立的哈希码。（在 2.10 中，您可能应该切换到 using `scala.util.hashing.MurmurHash3`；用法有很大不同，但您仍然可以通过混合来做同样的事情。）

如果您只需要将近值映射到随机远值，这将起作用；如果您想避免冲突（即，如果 A 和 B 使用哈希 1 发生冲突，它们可能不会也使用哈希 2 发生冲突），那么您至少需要再走一步，而不是对整个对象进行哈希处理，而是对它的子组件进行哈希处理哈希有机会以不同的方式开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T09:01:58.777

可能最简单的方法是采用一些加密哈希函数并用不同的字节序列“播种”它。对于大多数实际目的，结果应该是独立的，因为这是加密散列函数应该具有的关键属性之一（如果替换消息的任何部分，散列应该完全不同）。

我会做类似的事情：

```
// for each 0 <= i < k generate a sequence of random numbers
val randomSeeds: Array[Array[Byte]] = ... ; // initialize by random sequences

def hash(i: Int, value: Array[Byte]): Array[Byte] = {
    val dg = java.security.MessageDigest.getInstance("SHA-1");
    // "seed" the digest by a random value based on the index
    dg.update(randomSeeds(i));
    return dg.digest(value);
    // if you need integer hash values, just take 4 bytes
    // of the result and convert them to an int
} 
```

* * *

**编辑：** 我不知道 Count-Min Sketch 的精确要求，也许一个简单的 has 函数就足够了，但它似乎不是最简单的解决方案。

我建议使用加密散列函数，因为你有很强的保证，生成的散列函数会非常不同，而且很容易实现，只需使用标准库即可。

另一方面，如果您有两个形式为`f1(x) = ax + b (mod p)`和的散列函数，那么您可以使用一个简单的线性公式`f2(x) = cx + d (mod p)`（在不知道的情况下）使用另一个哈希函数来计算一个，这表明它们不是很独立。所以你可能会在这里遇到意想不到的问题。`x``f2(x) = c / a * (f1(x) - b) + d (mod p)`

# php - 使用 htmlentities

> ID：12120315
> 
> 赞同：1
> 
> 时间：2012-08-25T08:11:41.360
> 
> 标签：php, javascript, mysql, ckeditor, mathml

大家好，我正在尝试通过我为 CKeditor 创建的自定义插件从 mysql 数据库中检索 mathml。但是由于某种原因，每当使用 mathml 插入段落标签时，我尝试创建的插件都会拒绝打开。我怀疑这与使用 htmlentities 有关。如果有人能提供一些关于在插件对话框的选择框中检索数据时如何应用 htmlentities 的见解，我将不胜感激。我实际上想知道如何在项目中使用 htmlentities 函数：

```
 items:[
                    <?php $i = 1;
               while($row = mysql_fetch_assoc($queryResource))
                  {

                     if($i == 1) {
                        echo "['$row[expressionname]','$row[mathexpression]']";
                        $i = null;
                     }
                     else
                        echo "['$row[expressionname]','$row[mathexpression]']";
                  }
               ?>],

                commit : function( data )
        {
            data.equations = this.getValue();
        }

              }] 
```

# mysql - 使用 MySQL 的 Matlab 中的一个奇怪错误

> ID：12120317
> 
> 赞同：1
> 
> 时间：2012-08-25T08:11:57.307
> 
> 标签：mysql, database, matlab

我有两个名为 t1 和 t2 的表，其内容列表如下：

```
mysql> use test;
Database changed
mysql> select * from t1;
+----+------+
| id | val  |
+----+------+
|  1 |  100 |
|  2 |  200 |
+----+------+
2 rows in set (0.00 sec)

mysql> select * from t2;
+----+-------+
| id | val   |
+----+-------+
| -1 | -1000 |
|  1 |  1000 |
|  3 |  3000 |
+----+-------+
3 rows in set (0.00 sec) 
```

在 mysql 命令中运行了一条 sql 语句，但存在问题：

```
mysql> create or replace view iid as select id from t1 union select id from t2;select iid.id,t1.val,t2.val from iid left join t1 on iid.id=t1.id left join t2 on iid.id=t2.id;
Query OK, 0 rows affected (0.07 sec)

+----+------+-------+
| id | val  | val   |
+----+------+-------+
|  1 |  100 |  1000 |
|  2 |  200 |  NULL |
| -1 | NULL | -1000 |
|  3 | NULL |  3000 |
+----+------+-------+
4 rows in set (0.00 sec) 
```

当它在matlab中运行时出现错误：

```
>> sqlCmd = ['create or replace view iid as select id from t1 union select id from t2;',...
          'select iid.id,t1.val,t2.val from iid',...
          ' left join t1 on iid.id=t1.id',...
          ' left join t2 on iid.id=t2.id'];

conn = database('test','root','198471',...
        'com.mysql.jdbc.Driver','jdbc:mysql://127.0.0.1:3306/test');
>> curs = exec(conn,sqlCmd);
>> curs.Message
ans =
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select iid.id,t1.val,t2.val from iid left join t1 on iid.id=t1.id left join t2 o' at line 1
>> curs = exec(conn,'select * from t1');
>> curs = fetch(curs);
>> curs.Data
ans =
     1   100
     2   200
>> sqlCmd 
```

我是 SQL 的纯新手，我不知道这个错误消息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:58:15.577

看起来，Matlab 将`sqlCmd`矩阵中的每个字符串视为单独的 SQL 语句。当您将查询分解为字符串部分时，这将不起作用，因为并非每个部分都是有效的独立 SQL 语句。正如上面的评论所暗示的，您可能需要搜索允许这样做的设置。或者，您可以尝试将 SQL 重写为单个字符串，就像使用 mysql 一样：

```
 sqlCmd = 'create or replace view iid as select id from t1 union select id from t2;select iid.id,t1.val,t2.val from iid left join t1 on iid.id=t1.id left join t2 on iid.id=t2.id;';
 curs = exec(conn,sqlCmd); 
```

这至少应该无错误地运行您的查询。如果您还没有这样做，请查看`exec` [http://www.mathworks.co.uk/help/toolbox/database/ug/exec.html的 mathworks 文档](http://www.mathworks.co.uk/help/toolbox/database/ug/exec.html)

# objective-c - 从字符串中删除空格

> ID：12120322
> 
> 赞同：19
> 
> 时间：2012-08-25T08:12:57.823
> 
> 标签：objective-c, nsstring, whitespace

```
NSString *s = @"0800 444 333"; 
```

如您所见，该字符串中间有 2 个空格。我的问题是，我如何摆脱它们以便字符串可以变成：

```
s = @"0800444333" 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-25T08:14:10.680

这可以通过简单的字符串格式化来完成。这是一个例子：

```
NSString *s = @"0800 444 333";
NSString *secondString = [s stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

有关更多详细信息和选项，请参阅[NSString 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingOccurrencesOfString%3awithString%3a)。

为了进一步简化，这一行也可以这样写：

```
NSString *s = [@"0800 444 333" stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-25T09:15:14.790

如果您想在开始和结束时删除空格，请使用`stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]`字符串方法。

例如。

```
NSString *s = @"0800 444 333";
s = [s stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

对于删除所有空格，@NSPostWhenIdle 的回答就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-05T09:00:40.703

我不知道为什么，但替换 @" " 在我的情况下不起作用。解决方案很简单，只需将空格写为 unicode 字符：

```
str = [str stringByReplacingOccurrencesOfString:@"\u00a0" withString:@""]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-03T11:05:14.290

```
NSString *s = @"0800 444 333";
NSString *secondString = [s stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

有关更多详细信息和选项，请参阅`NSString` [类参考](https://developer.apple.com/reference/foundation/nsstring)。

为了进一步简化，这一行也可以这样写：

```
NSString *s = [@"0800 444 333" stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-15T10:20:53.837

您可以删除电话联系人中的空格，例如“+92 3121245”，例如 +923121245。

使用以下代码行

NSString telNum = @"+92 3121245";

NSString* cNum = [telNum stringByReplacingOccurrencesOfString:@"\u00a0" withString:@""];

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-14T10:00:28.210

请使用以下代码，

```
str = [str stringByReplacingOccurrencesOfString:@"\t" withString:@"%20"]; 
```

或者

```
str =  [str stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-12T12:17:22.113

NSString *Naveen = @"Naveen Kumar Singh"; NSString *secondString = [Naveen stringByReplacingOccurrencesOfString:@" " withString:@""];

答案：-NaveenKumarSingh

# git-merge - 在没有分支的情况下使用 Git

> ID：12120324
> 
> 赞同：0
> 
> 时间：2012-08-25T08:13:09.867
> 
> 标签：git-merge, git-pull, git-fetch

我正在尝试使用 GIT，而不创建私有分支。

这意味着我直接在我的克隆存储库（主）上工作

现在，这是使用 GIT 的正确方法吗？我遇到了许多与更新我的存储库（GIT PULL / GIT FETCH）相关的问题。而且大多数时候，我无法使用 GIT Merge。

有没有一种特殊的方式可以让我使用 GIT MERGE、GIT PULL 和 GIT FETCH。那会帮助我吗？

看起来使用 GIT 的最佳方式是拥有分支。

分支 1 GIT Commit GIT PUSH GIT MERGE master（获取更新的更改）

分支 2 GIT 提交 GIT PUSH

主 GIT 合并分支 1 GIT 合并分支 2

我不认为有任何其他方式。如果我错了，请纠正我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:37:11.743

[Jan Krueger 的扩展备忘单](http://jan-krueger.net/development/git-cheat-sheet-extended-edition) 将帮助您了解基础知识，并向您展示一些使用 git 的常用命令。

IMO，git 是一个出色的 DVCS。如果你有时间; 看看 git 的结构，并尝试抓住其设计背后的想法。例如[，Linus Torvalds 的这个技术讲座。](http://www.youtube.com/watch?v=4XpnKHJAok8)

注意：看起来你在使用 git 背后缺少一些核心思想，所以在处理命令之前，请尝试学习 git 的一般方法。

注 2：作为一个跟踪者，你似乎对 git 有普遍的问题。所以我再次重复我的建议。学习基础知识，完成教程，阅读/收听/观看一些来自知名人士的关于 git 的有用资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:14:50.643

另请阅读有关 git stash 的信息。它保存了您本地未提交的更改，因此您可以干净地拉动。然后运行 ​​git stash pop 在顶部重播这些更改。

# c# - 在 Windows 8 Metro 应用程序中管理自动旋转

> ID：12120325
> 
> 赞同：2
> 
> 时间：2012-08-25T08:13:11.117
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

我如何管理自动旋转 Windows 8 应用程序。
我已经浏览了 MSDN 的“旋转”示例，但它非常令人困惑，我需要做的是，我需要在纵向和横向时有完全不同的视图。当我需要对纵向视图进行更改时，我已经为横向设计了视图。我需要一种在重新洗牌视图的视图之间动态切换的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:24:45.867

到目前为止，处理此问题的*最简单方法是从***LayoutAwarePage**而不是**Page**继承您的页面，并利用 Expression Blend 中的 Visual State Manager 为您完成所有工作。

我有一篇完整的文章，里面有很多图片和一个可下载的示例应用程序：

[http://jaredbienz.wordpress.com/2012/04/22/wp-to-w8-view-states-using-visual-state-manager/](http://jaredbienz.wordpress.com/2012/04/22/wp-to-w8-view-states-using-visual-state-manager/)

![在此处输入图像描述](../Images/46d6ad0436b5b2f36002802afd7790eb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:16:43.357

您肯定会想在这里使用 FlipView 控件。我不知道您使用的是 JavaScript/HTML5 还是 C#/XAML，但在任何一种情况下都可以使用。

MSDN 上有一个很好的示例来向您展示如何做到这一点，但是如果没有更多关于您的问题的上下文，我不知道我还能提供多少帮助。

[http://code.msdn.microsoft.com/windowsapps/FlipView-control-sample-18e434b4](http://code.msdn.microsoft.com/windowsapps/FlipView-control-sample-18e434b4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:27:48.887

您可以通过两种基本方式处理方向更改...

1）蛮力方法。连接到orientationchanged事件...

```
 Windows.Graphics.Display.DisplayProperties.OrientationChanged += DisplayProperties_OrientationChanged; 
```

在事件句柄中，检查方向并导航到专门针对该方向进行布局的页面...

```
if (Windows.Graphics.Display.DisplayProperties.CurrentOrientation == DisplayOrientations.Portrait)
            this.Frame.Navigate(typeof(PortraitPage)); 
```

优点...易于设计针对给定方向优化的页面缺点...需要处理页面之间的导航和状态数据

2) 创建一个使用视觉状态更改其布局的页面。您仍将连接到orientationchanged 事件，但`VisualStateManager.GoToState(this,"Portrait",true).`根据您命名视觉状态的方式调用或类似的东西。

优点...无需导航即可更改布局，您可以轻松添加很酷的动画缺点...如果您对高级 xaml 布局和 viewStates 不满意，更复杂的布局可能会更难

如果您查看示例模板（除了空白之外），它们包含一个 LayoutAwarePage 为您处理视图状态转换，从而简化了一些事情。

# bash - 如何更改目录中多个文件的扩展名？

> ID：12120326
> 
> 赞同：51
> 
> 时间：2012-08-25T08:13:11.020
> 
> 标签：bash, powershell, cmd

`.txt`假设我在带有扩展名的目录中有大量文件。

如何将所有这些文件的扩展名更改为`.c`使用以下命令行环境：

*   Windows 中的 Powershell
*   Windows 中的 cmd/DOS
*   bash 中的终端

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-25T08:16:38.733

在 Windows 上，转到所需的目录，然后键入：

```
ren *.txt *.c 
```

在 PowerShell 中，最好使用该[`Path.ChangeExtension`](https://docs.microsoft.com/en-us/dotnet/api/system.io.path.changeextension?view=net-5.0)方法而不是`-replace`（感谢[Ohad Schneider](https://stackoverflow.com/users/67824/ohad-schneider)的评论）：

```
Dir *.txt | rename-item -newname { [io.path]::ChangeExtension($_.name, "c") } 
```

对于 Linux (Bash)：

```
for file in *.txt
do
 mv "$file" "${file%.txt}.c"
done 
```

# c++ - 将 2x32 位大整数除以 1000

> ID：12120328
> 
> 赞同：3
> 
> 时间：2012-08-25T08:13:52.937
> 
> 标签：c++, algorithm, bignum

我有一个大数字，时间（微秒）存储在两个 32 位变量中。我需要帮助，如何将微秒时间更改为毫秒，以便我可以存储 32 位数字的差异结果。

更多细节：我有一次在两个 32 位变量中。其中一个变量的有效位较高，而另一个变量的有效位较低。这次有微秒的分辨率，所以我想把它改成毫秒。那么如何划分存储在两个变量中的数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T08:47:59.177

如果你没有 64 位类型，你可以这样做：

```
uint32_t higher, lower; // your input

lower /= 1000;
lower += (higher % 1000) * 4294967L; // approximate 2^32 / 1000
higher /= 1000; 
```

如果结果`lower`本身适合，`higher`则应为`0`。

请注意，正如@Mikhail 指出的那样，此解决方案是近似的，并且有`0.296 * higher + 2`ms 的错误（除非我遗漏了什么）。

* * *

如果你*真的*想要更好的精度并且不关心效率，你可以在中间使用一点浮点运算，并将结果正确四舍五入。我怀疑这是否值得努力：

```
uint32_t higher, lower; // your input

// simpler without a helper variable
if (lower % 1000 >= 500)
{
    lower /= 1000;
    ++lower;
}
else
    lower /= 1000;

lower += round((higher % 1000) * 4294967.296); // 2^32 / 1000
higher /= 1000; 
```

你需要`include <cmath>`为`round()`.

请注意，@Mikhail 在这种情况下的解决方案可能更好并且*可能*更快。虽然对我来说太复杂了。

* * *

如果您有 64 位类型，则可以将拆分值转换为它：

```
uint64_t whole_number = higher;
whole_number <<= 32;
whole_number |= lower; 
```

然后你就可以`whole_number`照常使用了。

* * *

请注意，如果您只需要一个差异，那么在实际除法之前减去这些值会更快。

假设您知道哪个值更大：

```
uint32_t higher1, lower1; // smaller value
uint32_t higher2, lower2; // bigger value

uint32_t del_high = higher2 - higher1;
uint32_t del_low = lower2 - lower1;

if (lower2 < lower1)
    --del_high; 
```

现在您可以像之前解释的那样转换结果。或者运气好的话，`del_high`将是`0`（如果差异小于 2^32 μs），您将得到`del_low`（以 μs 为单位）的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:54:22.037

最简单的方法是使用 64 位整数类型，但我假设你不能这样做。由于您希望您的答案是 32 位整数，因此微秒的高阶值不能大于 999，否则除以 1000 后将不适合 32 位。因此，您使用的微秒数越大`999 * 2^32 + (2^32 - 1) = 4294967295999`. 它为您提供 13 位十进制数字，您可以使用它`double`来处理精确除法。

如果由于某种原因您被迫仅使用 32 位整数，那么 Michał Górny 的答案为您提供了一个*近似*解决方案。例如，`whole_number = 1234567890123`它会给出`1234567805`. 因为在 1000 上除以 max 32-bit int 有一个提醒。

使用 32 位整数获得准确答案的唯一方法是使用长算法。它需要将长数字存储在可以扩展以存储提醒的类型中。您必须将两个 32 位整数拆分为四个 16 位数字。之后，您可以将其划分为在纸上，并且您有足够的位来存储提醒。见代码`micro2milli`：

```
#include <iostream>

typedef unsigned __int32 uint32;
typedef unsigned __int64 uint64;

const uint32 MAX_INT = 0xFFFFFFFF;

uint32 micro2milli(uint32 hi, uint32 lo)
{
  if (hi >= 1000)
  {
    throw std::runtime_error("Cannot store milliseconds in uint32!");
  }

  uint32 r = (lo >> 16) + (hi << 16);
  uint32 ans = r / 1000;
  r = ((r % 1000) << 16) + (lo & 0xFFFF);
  ans = (ans << 16) + r / 1000;

  return ans;  
}

uint32 micro2milli_simple(uint32 hi, uint32 lo)
{
  lo /= 1000;
  return lo + (hi % 1000) * 4294967L;
}

void main()
{
  uint64 micro = 1234567890123;
  uint32 micro_high = micro >> 32;
  uint32 micro_low = micro & MAX_INT;

  // 1234567805
  std::cout << micro2milli_simple(micro_high, micro_low) << std::endl;
  // 1234567890
  std::cout << micro2milli(micro_high, micro_low) << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:43:03.370

首先，将您的两个变量放入 3 中，每个变量有 22 个有效位。

```
uint32_t x0 = l & 0x3FFFFF;
uint32_t x1 = ((l >> 22) | (h << 10)) & 0x3FFFFF;
uint32_t x2 = h >> 12; 
```

现在进行除法（每个 x 有 10 个可用位，并且 1000 < 2^10 = 1024，因此不会溢出）

```
uint32_t t2 = x2 / 1000;
x1 |= (x2 % 1000) << 22;
uint32_t t1 = x1 / 1000;
x0 |= (x1 % 1000) << 22;
uint32_t t0 = (x0 + 500) / 1000;
    /* +0 for round down, +500 for round to nearest, +999 for round up */ 
```

现在把东西放回去。

```
uint32_t r0 = t0 + t1 << 22;
uint32_t r1 = (t1 >> 10) + (t2 << 12) + (r0 < t0); 
```

使用相同的技术，但有四个变量保存 16 位，您可以对高达 65535 的除数执行此操作。然后使用 32 位算术来执行此操作变得更加困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:45:43.997

假设您不能为此使用 64 位 int，我建议您使用[多精度库，例如 GMP](http://gmplib.org/)。

# android - Android随机字符串不检查

> ID：12120334
> 
> 赞同：0
> 
> 时间：2012-08-25T08:14:43.350
> 
> 标签：android

随机字符串工作正常。

现在检查不行。我将文本输入到已绘制的 EditText 中。

但检查不起作用。为什么？代码：

```
 public static StringBuffer random() {
        String str = new String(
                "G12HIJdefgPQRSTUVWXYZabc56hijklmnopqAB78CDEF0KLMNO3rstu4vwxyz9");
        StringBuffer sb = new StringBuffer();
        sb.toString();
        String ar = null;
        Random r = new Random();
        int te = 0;
        for (int i = 1; i <= 10; i++) {
            te = r.nextInt(62);
            ar = ar + str.charAt(te);
            sb.append(str.charAt(te));
        }
        return sb;
    }

    public void onCreate(Bundle icicle) {
        setContentView(R.layout.main);
        random = random().toString();
        TextView display = (TextView) findViewById(R.id.textView1);
        display.setText("Random Number: " + random); // Show the random number
        et = (EditText) findViewById(R.id.etNumbers);
        ok = (Button) findViewById(R.id.button1);
        ok.setOnClickListener(this);

    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        try {
            charsEntered = et.getText().toString();
        } catch (NumberFormatException nfe) {
            Toast.makeText(et.getContext(), "Bla bla bla", Toast.LENGTH_LONG)
                    .show();
        }

        if (random == charsEntered) {
            Toast.makeText(et.getContext(), "Good!", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(et.getContext(), "Bad!", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:20:00.407

尝试

```
if (random.equalsIgnoreCase(charsEntered)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:20:39.080

使用`String.equals`代替`==`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:22:01.197

您正在尝试将两个字符串与`==`运算符进行比较。这在 Java 7 之前无法比较字符串，并且 Android 基于 Java 6。尝试使用：

```
if (random.equalsIgnoreCase(charsEntered)) 
```

如果检查不区分大小写或

```
if (random.equals(charsEntered)) 
```

如果检查区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:22:30.163

您正在将`StringBuffer`Class 与`String`Class 进行比较，请尝试以下操作，

```
 if ( random.toString().equals(charsEntered) )
    {
        Toast.makeText(et.getContext(), "Good!", Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(et.getContext(), "Bad!", Toast.LENGTH_LONG).show();
    } 
```

# .net - 如何在 SQL Server 2008 R2 的邮政编码表中查找最近的地理位置

> ID：12120335
> 
> 赞同：0
> 
> 时间：2012-08-25T08:14:56.653
> 
> 标签：.net, sql-server-2008-r2, geocoding, geospatial, geography

我正在从 windows phone 7.5 获取位置更新到我的 sql server 2008 R2 数据库中。手机在车里，也可以用作追踪设备。

例如：这个位置（**纬度：51.5557830164189 经度：0.0711440443992739**）是我从手机收到的。现在我想在我的邮政编码表中找出最近的位置或邮政编码，该位置几乎有 170 万条记录。

我的邮政编码表定义是

```
CREATE TABLE [dbo].[PostCode1](
    [Postcode] [nvarchar](50) NOT NULL,
    [Coordinates] [geography] NOT NULL,
 CONSTRAINT [PK_PostCode1] PRIMARY KEY CLUSTERED 
(
    [Postcode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

我通过谷歌搜索尝试了很多博客，但找不到答案

有人可以指导我如何通过使用查询来实现这一点，而且我只需要表中的 1 条记录，而且时间更短。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:01:48.340

我发现下面的这个功能非常有用。我已经对其进行了修改，因此它以英里而不是公里为单位。

您可以将其用作构建返回最近邮政编码的过程的基础。

如果您创建一个视图/@temptable，您可以计算出点到点的距离，然后按最短距离的前 1 个进行过滤。

```
/****** Object:  UserDefinedFunction [dbo].[DISTANCE] ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER function [dbo].[DISTANCE]
    (
    @Latitude1  float,
    @Longitude1 float,
    @Latitude2  float,
    @Longitude2 float
    )
returns float
as
/*
fUNCTION: F_GREAT_CIRCLE_DISTANCE

    Computes the Great Circle distance in kilometers
    between two points on the Earth using the
    Haversine formula distance calculation.

Input Parameters:
    @Longitude1 - Longitude in degrees of point 1
    @Latitude1  - Latitude  in degrees of point 1
    @Longitude2 - Longitude in degrees of point 2
    @Latitude2  - Latitude  in degrees of point 2

*/
begin
declare @radius float

declare @lon1  float
declare @lon2  float
declare @lat1  float
declare @lat2  float

declare @a float
declare @distance float

-- Sets average radius of Earth in Kilometers
set @radius = 3959.0E

-- Convert degrees to radians
set @lon1 = radians( @Longitude1 )
set @lon2 = radians( @Longitude2 )
set @lat1 = radians( @Latitude1 )
set @lat2 = radians( @Latitude2 )

set @a = sqrt(square(sin((@lat2-@lat1)/2.0E)) + 
    (cos(@lat1) * cos(@lat2) * square(sin((@lon2-@lon1)/2.0E))) )

set @distance =
    @radius * ( 2.0E *asin(case when 1.0E < @a then 1.0E else @a end ))

return @distance

end 
```

# c# - 如何检查长字符串是否是有效的 XML？

> ID：12120339
> 
> 赞同：1
> 
> 时间：2012-08-25T08:15:22.030
> 
> 标签：c#, .net, xml, xmldocument

*我有一个字符串，如果它是有效的 XML*，我想用它做一些事情；如果不是，则告诉用户该字符串不是有效的 XML。

我的代码是这样的：

```
try 
{

    XmlDocument doc = new XmlDocument();
    doc.LoadXml(rawData);

    //And here I want to do some things with doc if it is a valid XML.
}
catch
{
    //Tell the user that the string is not a valid XML.
} 
```

现在，如果`rawData`包含有效的 XML 数据，则没有问题。此外，如果`rawData`包含其他内容（如`HELLOEVERYBODY!`），它会抛出异常，所以我可以告诉用户*该字符串不是有效的 XML*。

**但是**当`rawData`包含一个 HTML 页面时，这个过程需要很长时间（超过 20 秒！）...

它可能因页面而异。比如，它可以`stackoverflow.com`快速处理，但处理`1pezeshk.com`需要很长时间......

在将 XML 加载到之前没有更快的方法来验证 XML`XmlDocument`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:27:50.183

我以前见过这个，问题是 XmlDocument 试图下载文档的 DTD。在您的示例中，这是[http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd)，它允许您打开连接但从不返回任何内容。因此，一个简单的解决方案（无需任何类型的错误检查）就是像这样删除 -tag 之前的任何内容。

```
WebClient wc = new WebClient();
wc.Encoding = Encoding.UTF8;
string data = wc.DownloadString("http://1pezeshk.com/");
data = data.Remove(0, data.IndexOf("<html"));
XmlDocument xml = new XmlDocument();
xml.LoadXml(data); 
```

## 编辑

浏览[http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd)实际上会返回 DTD，但需要一分钟多的时间才能做出响应。由于您仍然不会进行 DTD 验证，因此您实际上应该从 HTML 中删除它，然后尝试将其验证为 HTML。

# c# - 如何限制我的用户在班级级别输入的数据类型

> ID：12120342
> 
> 赞同：2
> 
> 时间：2012-08-25T08:15:36.930
> 
> 标签：c#

我有以下课程：

```
public class Reference : AuditableTable
{
     [Range(0, 99, ErrorMessage = "{0} must be between {1} and {2}")]
     [DisplayName("Order")]
     public int Order { get; set; 
} 
```

使用 MVC，范围检查应该会阻止用户输入错误数据。但是，我的其他不通过 MVC 前端的代码允许我输入像 999 这样的值。在类级别对此进行检查是否正常，我该如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:26:27.220

如果你想在客户端验证字段，那么你应该使用验证器。在服务器验证的情况下，此代码应该可以工作。我说的是asp.net MVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:30:00.883

你可以使用这个：

```
private bool ValidateModel(dynamic model)
{
   var validationResults = new List<ValidationResult>();
   var ctx = new ValidationContext(model, null, null);
   return Validator.TryValidateObject(model, ctx, validationResults, true);
} 
```

[http://msdn.microsoft.com/en-us/library/dd411772.aspx](http://msdn.microsoft.com/en-us/library/dd411772.aspx)

您可以放置​​任何模型类型，而不是动态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:30:35.940

```
 public class Reference : AuditableTable
    {
        [Range(0, 99, ErrorMessage = "{0} must be between {1} and {2}")]
        [DisplayName("Order")]
        public int Range { get; 
        set { 
       if((value < 0) || (value > 99))
        {
        throw new Exception(string.Format("{0} must be between 0 and 99",value.ToString()));
        }
        else
        {
        Range = value;
        }
        }
    } 
```

# kohana - Kohana 如何实现保存到数据库的会话？

> ID：12120345
> 
> 赞同：0
> 
> 时间：2012-08-25T08:16:00.783
> 
> 标签：kohana, kohana-3.2

源代码手 Session_Cookie 和 Session_Native 类但 Session_Database，这里是配置文件

```
<?php defined('SYSPATH') or die('No direct script access.');

    return array(
        'database'  =>  array(
            'database' => array(
            'name' => 'blog_session_cookie',
            'encrypted' => TRUE,
            'lifetime' => 43200,
            'group' => 'default',
            'table' => 'sessions',
            'columns' => array(
                'session_id'  => 'session_id',
                'last_active' => 'last_active',
                'contents'    => 'contents'
            ),
            'gc' => 500,
        ),
        ),
    ); 
```

用法

```
 $session = Session::Instance("Database");
    $session->set('username', 'far'); 
```

太好了，它在数据库中添加了一个列，有趣！核心是如何做到的？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:11:37.107

它由模块`Session_Database`中的类处理`Database`

查看源代码：[https ://github.com/kohana/database/blob/3.2/master/classes/kohana/session/database.php](https://github.com/kohana/database/blob/3.2/master/classes/kohana/session/database.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:44:17.960

为了实现数据库会话机制，Kohana 3.2 中有一个[`Auth_ORM`](http://kohanaframework.org/3.2/guide/api/Auth_ORM)类。

# c# - 应用程序关闭时的任务处理

> ID：12120349
> 
> 赞同：7
> 
> 时间：2012-08-25T08:16:23.677
> 
> 标签：c#, .net, multithreading, windows-services, task-parallel-library

我有一个 .Net (v4.0) Windows 服务应用程序，它在开始时旋转一个 tpl 任务，该任务执行某些长时间运行的活动，并且在应用程序的生命周期内基本上保持活动状态，因此是使用 TaskCreationOptions 创建的。*LongRunning*参数值。

每当服务停止并调用 .OnStop() 方法时，我在创建它时将*.Cancel()* CancellationToken(Source) 移交给工作任务，并且我希望它是*.OnlyOnCanceled(...)*延续任务跑。

问题是，服务/进程在没有“完全”运行的连续任务的情况下关闭 - 有时它退出相当快，有时它完全运行，有时它没有。

这对我来说确实有意义，因为该特定任务可能位于主线程之外的另一个线程上，因此无法“停止”/阻止该主线程结束。

由于我在该 Windows 服务应用程序中没有 SynchronizationContext 我无法告诉继续任务在那里/在主线程上运行，所以我想知道：我该怎么*做*？

更准确地说，在运行 tpl 任务时处理应用程序关闭的*最佳实践是什么？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:26:04.007

`OnStop`您必须在方法（或`OnPause`和`OnShutdown`）中等待您的任务完成。

你有大约 20 秒的时间来做任何你需要的事情`OnStop`。如果你认为你的线程不会在 20 秒内完成，你应该调用`RequestAdditionalTime`. 只要您从`OnStop`服务中返回，进程就可以终止。

Using`ContinueWith`将**异步**调用传递给它的委托，无论您是传递`ExecuteSynchronously`还是使用`SynchronizationContext`. 一旦`ContinueWith`执行，假设这是最后一行`OnStop`，`OnStop`返回并将控制权返回给 SCN（好吧，`ServiceBase`但是它将您的服务状态设置为 STOPPED 并将控制权返回给 SCM 以可能终止您的进程。

`ExecuteSynchronously`意味着延续相对于它正在继续的任务同步运行。即在与任务相同的线程上运行（如果可能）。该任务可能*不在*正在调用的线程上运行`ContinueWith`（否则它无法调用`ContinueWith`），因此`ExecuteSynchronusly`对于对`ContinueWith`.

您需要执行以下操作：

```
RequestAdditionalTime(TimeSpan.FromSeconds(30).Milliseconds);
cancellationToken.Cancel();
task.Wait(); 
```

in `OnStop`，这`Wait`意味着您在任务完成之前不会退出`OnStop`（或者它需要超过 30 秒并且您的进程被终止）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:13:31.113

之所以发生这种情况，是因为延续任务也*异步*运行。为了阻止它，您需要指定[任务继续选项](http://msdn.microsoft.com/en-us/library/dd321576.aspx)：

```
...
t.ContinueWith(ct => {...}, TaskContinuationOptions.ExecuteSynchronously); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T11:50:54.050

指定`TaskContinuationOptions.ExecuteSynchronously`延续不会影响先行词。如果您等待前件，然后退出服务，您的延续可能仍然无法运行！

这样做的唯一方法是在从`OnStop`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T14:46:52.960

恕我直言，这不适合使用 TPL。任务并不真正适用于这种“永远运行”的逻辑。

IME，为这项专门的工作启动一个新线程要简单得多。由于默认值为 Background = false，CLR 将自动等待它完成后再退出（服务规则仍然适用）。

添加私有布尔停止；然后你的线程方法只需要做 while (stopping == false) { DoStuff(); } DoStoppingStuff();

然后您的 OnStop 只需设置 stop = true ，您的线程将退出 while 循环并执行您的停止代码:)

IME 你不需要添加 volatile，但你当然可以

# facebook - 在不使用任何浏览器功能的情况下向 Facebook 进行身份验证

> ID：12120350
> 
> 赞同：0
> 
> 时间：2012-08-25T08:16:25.900
> 
> 标签：facebook, oauth

我为这个问题道歉。但我无法将 Facebook 上的身份验证作为应用程序处理。我的应用程序通过以下方式获取访问令牌：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
    &client_secret=YOUR_APP_SECRET
    &grant_type=client_credentials 
```

没关系，我有一个访问令牌。但是我怎样才能获得用户信息。我的意思是用户没有输入用户名和密码。那么我的应用程序如何访问用户信息或在墙上发布内容？

谁能向我解释一下 Facebook 的身份验证算法。但我需要在没有任何浏览器功能的情况下做到这一点。我的意思是 Facebook Dialogs 不适合我。那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:31:37.727

截至官方文档，您仍应在您的应用程序中使用 embed 浏览器。“Windows、OS X 和 Linux 原生应用程序”部分在这里[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

获得访问令牌后，您可以通过 api 获取用户信息

*   [https://graph.facebook.com/me](https://graph.facebook.com/me) -- 当前用户，需要访问令牌
*   [https://graph.facebook.com/](https://graph.facebook.com/) {USER ID OR NICK}，来自文档的示例：[https ://graph.facebook.com/btaylor](https://graph.facebook.com/btaylor)

更多 api 信息在这里[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

# c# - WCF、NetTcpBinding、Streamed传输方式可以双工吗？

> ID：12120351
> 
> 赞同：2
> 
> 时间：2012-08-25T08:16:26.857
> 
> 标签：c#, .net, wcf

我将 NetTcpBinding 与 Streamed TransferMode 一起使用。现在我尝试将回调实现为双工，但收到错误消息。可以将 NetTcpBinding 与 Streamed TransferMode 一起使用并使用（双工）回调服务合同吗？背景： - 我使用 NetTcpBinding 因为它速度快而且没有 nat 问题 - 我使用流模式，因为我也传输大文件。

配置：

```
 <netTcpBinding>
    <binding name="DuplexBinding" transferMode="Streamed"
                closeTimeout="00:10:00"  openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"  transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="104857600" maxReceivedMessageSize="104857600"
             >
      <readerQuotas maxDepth="104857600" maxStringContentLength="104857600" maxArrayLength="104857600" maxBytesPerRead="104857600" maxNameTableCharCount="104857600"/>
      <reliableSession enabled="true" ordered="true" inactivityTimeout="00:10:00"/>
      <security mode="None" />
    </binding>
  </netTcpBinding> 
```

合同：

```
IMyDataService.cs

   [ServiceContract(CallbackContract = typeof(INotifyCallback))]
    public interface IMyDataService
    {
        [OperationContract(ProtectionLevel = System.Net.Security.ProtectionLevel.None)]
        [FaultContract(typeof(MyFaultException))]
        [FaultContract(typeof(MyUserAlreadyLoggedInFaultException))]
        [FaultContract(typeof(AuthorizationFaultException))]
        Guid Authenticate(Guid clientID, string userName, string password, bool forceLogin);
    }

INotifyCallback.cs

    public interface INotifyCallback
    {
        [OperationContract(IsOneWay = true)]
        void ShowMessageBox(string message);
    } 
```

设置 transferMode="Streamed" 时出现错误

> 合同需要双工，但绑定“NetTcpBinding”不支持它或未正确配置以支持它。

每个人都可以建议谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:13:54.803

在您的客户端代码中，确保您使用[DuplexChannelFactory](http://msdn.microsoft.com/en-us/library/ms576164%28v=vs.100%29.aspx)创建到服务器的通道：

```
INotifyCallback callbackObject = new NotifyCallbackImpl(); //your concrete callback class
var channelFactory = new DuplexChannelFactory<IMyDataServce>(callbackObject); //pick your favourite constructor!
IMyDataService channel = channelFactory.CreateChannel();
try {
    var guid = channel.Authenticate(....);
    //... use guid...
} finally {
    try {
        channel.Close();
    } catch (Exception) {
        channel.Abort();
    }
} 
```

[编辑] 自动生成的服务引用的代理应该扩展[DuplexClientBase](http://msdn.microsoft.com/en-us/library/ms576169%28v=vs.100%29.aspx)。

# css - CSS选项卡不能与引导程序上的锚一起使用？

> ID：12120357
> 
> 赞同：0
> 
> 时间：2012-08-25T08:17:47.677
> 
> 标签：css, tabs, twitter-bootstrap, toggle, anchor

### 尝试 1

```
<div class="bs-docs-example">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#">Home</a>aaa</li>
        <li><a href="#">Profile</a>fff</li>
        <li><a href="#">Messages</a>bbb</li>
    </ul>
</div> 
```

**[JSfiddle](http://jsfiddle.net/fXbvt/)**

我也尝试将`data-toggle`属性设置为“选项卡”，但这只允许我在选项卡之间单击，它没有将 aaa/fff/bbb 分隔到不同的选项卡中。

这应该可以在没有任何 JavaScript 的情况下完成。

### 尝试 2

我最接近工作的是：

```
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#ter" data-toggle="tab">Stir</a>
        </li>
        <li>
            <a href="#gin" data-toggle="tab">Drink</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="ter">fff</div>
        <div class="tab-pane" id="gin">ggg</div>
    </div>
</div> 
```

**[JSfiddle](http://jsfiddle.net/3N5Hk/)**

但这并没有将查看器的 URL 更改为`/#ter`或`/#gin`单击时。而且它似乎在小提琴中无法正常工作......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-25T08:42:09.627

您的[jsFiddle](http://jsfiddle.net/3N5Hk/show/)按预期工作——锚链接将您带到`#gin`和`#ter`。另一方面，我相信您需要使用一些 JavaScript 来实际更改活动选项卡。这是一个使用一点**jQuery**的尝试：

```
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#ter" data-toggle="tab">Stir</a>
        </li>
        <li>
            <a href="#gin" data-toggle="tab">Drink</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="ter">fff</div>
        <div class="tab-pane" id="gin">ggg</div>
    </div>
</div> 
```

JavaScript：

```
$(document).ready(function() {
    $(".nav-tabs li a").click(function() {
            var li = $(this).parent("li");
            var wch = this.getAttribute("href");
            $(li).addClass("active"); //make current li active
            $(li).siblings("li").removeClass("active"); //make others inactive
            $(".tab-content div").removeClass("active"); //make all tabs inactive first
            $(wch).addClass("active"); //activate our tab;
            return false; //don't change URL
        });
}); 
```

还有一个小演示：[小链接](http://jsfiddle.net/Sr3nV/16/)。请注意，不需要使用 jQuery；如果你想避免使用它，你可以很容易地转换为 vanilla JavaScript。

希望有帮助！

# html - 如何在 CSS 中排除元素（通过 ID）

> ID：12120363
> 
> 赞同：11
> 
> 时间：2012-08-25T08:11:15.103
> 
> 标签：html, css

我有一个 CSS 规则，例如`* {-webkit-transition:all 0.7s ease}`，这适用于页面上的所有元素，但我想从这个规则中排除一个带有 ID 的元素，该`classic`怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-25T08:18:16.953

用于排除元素的 CSS 3 伪类是`:not`. 要排除所有匹配的元素`#classic`，但保留其余元素，请使用

```
* :not(#classic) { 
  /* your definitions here */ 
} 
```

请参阅[有关选择器的 W3C 规范](http://www.w3.org/TR/css3-selectors/#negation)。请注意，这些 CSS3 选择器并不适用于所有浏览器，尤其是旧版本的 Internet Explorer 会很乐意忽略它们。

# c++ - 如何让 C++ 求解输入值的方程？

> ID：12120369
> 
> 赞同：-1
> 
> 时间：2012-08-25T08:20:05.243
> 
> 标签：c++

我一直在试图找出一种使用 C++ 来解决用户使用 cin 输入值然后让计算机解决获取 cin 值的方法的方法，前提是给出了格式。下面写了一个超快速的示例..是的，我知道缺少很多代码...但是这个概念就在那里..

```
int x;
int y;
int w;

int x = 30 < w < 50;
int y = 60 < w < 90;

cin >> input;

x + y = input;

cout << x;
cout << y; 
```

当然，虽然 x + y 不能在右边的左值上。所以我不能只写 x + y = input.. 那么我将如何解决 x + y = input？另外，我希望 x 和 y 在列出的数字之间，这限制了这些输入之间的数字。但是在我的实际编码中，我使用函数来做到这一点。

开学了吗？不，它不是家庭作业。我正在自学 C++.. – Sean Holt 1 分钟前编辑

如果 x 和 y 在函数中的指定值之间，我只是想找出一种让计算机求解输入值的 x/y 的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:49:52.673

看起来你认为 C++ 会为你解方程。它不会。C++ 是一种命令式风格的语言，它基于*你*告诉它要做什么*的概念。*

您将必须弄清楚如何求解 x 和 y，以便您可以制定算法。这个算法就是你制作程序的基础。

存在其他语言，您可以在某种意义上描述您想要的内容，并让编译器或运行时找出如何为您获取它。C++ 不是其中之一。

解决您的特定问题的不同方法是建立一个方程系统并解决它。或者做蛮力方法并遍历 x 和 y 的值，以找出哪些值匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:51:07.743

看起来您在这里有一个“数学”问题：几个受方程式约束的值，并且您希望“计算机”找到适合约束（方程式）的所有可能值。我对吗？

虽然某些计算机程序当然可以做到这一点，但 C++ 语言并不是为此目的而设计的。C++ 的作用是为您提供一种向处理器发出指令的方式，例如“将此值存储在内存中”或“将这两个数字相加”。但是没有办法说“解决这个数学问题”。

你需要的是一些方程求解器。但我一个都不熟悉。有 Matlab 或 Mathematica 等工具。但我不认为他们是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T07:31:36.077

This case can be solved trivially by interval arithmetic. C++ code that solves your "sum of two interval-constrained variables problem" is given below.

```
int min_x = 30, max_x = 50;
int min_y = 60, max_y = 90;

// solutions exist in this interval
int min_z = min_x + min_y, max_z = max_x + max_y;

cin >> input;

// solutions possible?
if (input >= min_z && input <= max_z)
{
    // determine solution interval for x (y is dependent)
    cout
    << "Solution:\n"
    << "x in [" << min(max(  input - max_y  , min_x),max_x)
    << ";"      << min(max(  input - min_y  , min_x),max_x) << "], "
    << "y = "   << input << " - x" << endl;
}
else
{
    cout << "No solution." << endl;
} 
```

Computers are "basically stupid" and if they do smart things it is the software. Using a general purpose programming language like C++ requires you (or at least the libraries you eventually use) to be very specific on *how exactly* to solve a problem based on the simple arithmetic means of the bare computer.

Although the programming language won't magically and *somehow* do things for you, algorithms exist to solve many mathematical standard problems such as e.g. systems of equations. [Numerical Recipes in C++](http://www.nr.com/cpp-blurb.html) covers a variety of algorithms and their C++ implementations.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T09:36:44.160

如果你想用算法解决数学问题，这里有一个伪代码中的蛮力想法：

```
Input a number.
for each value x between 30 and 50
  for each value y between 60 and 90
    if x+y equals the number
      print x and y 
```

现在，您可以阅读一本好书或教程和 C++ 代码。在您的教材中寻找`for`和关键字（迭代和选择的算法概念）。`if`玩得开心！

# android - 从画布中删除路径 - Android

> ID：12120371
> 
> 赞同：0
> 
> 时间：2012-08-25T08:20:14.067
> 
> 标签：android

我正在尝试从画布中删除路径或使其透明，我正在使用以下方法来执行此操作：

```
 Canvas canvas = new Canvas(bmap);
    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setColor(Color.TRANSPARENT);
    Path path=new Path();
//Add lines/arcs to path...
    paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));//tried SRC,CLEAR
    canvas.drawPath(path, paint); 
```

但是路径被黑色填充，我想让它透明，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:27:49.670

对的，这是可能的。尝试

```
paint.setAlpha(200); 
```

您可以插入 0 到 255 之间的值。

# objective-c - 目标C中的BLOB到字节数组转换

> ID：12120376
> 
> 赞同：1
> 
> 时间：2012-08-25T08:21:00.267
> 
> 标签：objective-c, ios4, bytearray, blob

我有一个表字段，其中值存储为**BLOB**类型。我需要将其作为二进制数组获取，以便可以从 BLOB 中的不同字节位置获取不同的值。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:33:09.037

```
// Get the start and length of the blob.
// (remember column indexes are 0-based when fetching the value
//  but 1-base when binding - yeah cheers!)
uint8_t *data = (uint8_t *)sqlite3_column_blob(stmt, columnIndex);
size_t length = (size_t)sqlite3_column_bytes(stmt, columnIndex);

// And now you can access the data

unsigned sum = 0;
for (size_t i = 0; i < length; i++)
    sum += data[i]; 
```

# javascript - javascript中变量的逻辑相反值的示例

> ID：12120377
> 
> 赞同：0
> 
> 时间：2012-08-25T08:21:03.973
> 
> 标签：javascript, unary-operator

我试图了解 javascript 中的一元运算符，并在此处找到此参考指南[http://wiki.answers.com/Q/What_are_unary_operators_in_javascript](http://wiki.answers.com/Q/What_are_unary_operators_in_javascript)，我了解大多数示例，但我正在尝试弄清楚如何使用它：

```
!a; // Logical opposite of a in an example. 
```

例如，如果我这样做：

```
a = true;
!a;
document.writeln(a); 
```

我认为这是错误的，但它输出的是真的。

什么是一个很好的代码示例，我可以使用类似于**!a 的**东西来查看它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:24:32.447

您没有分配`!a`给任何变量。`a`仍然是真的。

你想做的是这个

```
a = true;
a = !a;
document.writeln(a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:25:47.260

正如 Evil_skunk 所说，您不存储价值。所以你必须这样做：

```
document.writeln(!a); 
```

或这个：

```
a = !a;
document.writeln(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:23:57.887

的值`!a`是`false`，但你没有保存 的新值`a`，所以输出`a`的仍然是`true`。

尝试：

```
document.writeln(!a); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T08:25:11.403

```
a = !a; 
```

您没有将结果分配给`!a`变量。试试这个。

# java - 获取 listPreference 所选项目。安卓

> ID：12120383
> 
> 赞同：2
> 
> 时间：2012-08-25T08:23:01.823
> 
> 标签：java, android, android-preferences, android-sharedpreferences

我正在运行一项服务。在那我想阅读启动它的应用程序的首选项。虽然我能够阅读其他偏好。我无法读取列表首选项中的选定项目。请帮忙。代码或相关链接表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:32:05.947

在文件夹 /res/values/ 中创建 XML 文件 arrays.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <resources>
    <string-array name="listDisplayWord">
     <item>Option 1</item>
     <item>Option 2</item>
     <item>Option 3</item>
    </string-array>
    <string-array name="listReturnValue">
     <item>1 is selected</item>
     <item>2 is selected</item>
     <item>3 is selected</item>
    </string-array>
    </resources> 
```

在文件夹/res/xml/ 中创建一个preferences.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
 <ListPreference
  android:title="List Preference"
  android:summary="Select the option of the list"
  android:key="listPref"
  android:entries="@array/listDisplayWord"
  android:entryValues="@array/listReturnValue" />
</PreferenceScreen> 
```

创建 SetPreferences.java

```
package com.exercise.AndroidListPreference;
import com.exercise.AndroidListPreference.R;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class SetPreferences extends PreferenceActivity {

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.preferences);
 }
} 
```

主要代码

```
package com.exercise.AndroidListPreference;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidListPreference extends Activity {

 TextView myListPref;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       myListPref = (TextView)findViewById(R.id.list_pref);
       Button buttonSetPreference = (Button)findViewById(R.id.setpreference);

       buttonSetPreference.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    startActivity(new Intent(AndroidListPreference.this, SetPreferences.class));
   }});
   }

 @Override
 protected void onResume() {
  // TODO Auto-generated method stub
  super.onResume();
  Toast.makeText(this, "onResume", Toast.LENGTH_LONG).show();
  SharedPreferences myPreference=PreferenceManager.getDefaultSharedPreferences(this);
  String myListPreference = myPreference.getString("listPref", "default choice");
  myListPref.setText(myListPreference);
 }
} 
```

还必须修改 AndroidManifest.xml 以包含 SetPreferences.java

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.exercise.AndroidListPreference"
     android:versionCode="1"
     android:versionName="1.0">
   <application android:icon="@drawable/icon" android:label="@string/app_name">
       <activity android:name=".AndroidListPreference"
                 android:label="@string/app_name">
           <intent-filter>
               <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />
           </intent-filter>
       </activity>
  <activity android:name=".SetPreferences" />
   </application>
   <uses-sdk android:minSdkVersion="4" />

</manifest> 
```

# android - 为什么我从 NETWORK_PROVIDER 在同一位置获取不同的 Gps 坐标？

> ID：12120386
> 
> 赞同：2
> 
> 时间：2012-08-25T08:23:07.440
> 
> 标签：android, gps

我在同一位置得到不同的 Gps 坐标，为什么会发生这种情况。但我需要更改 gps 坐标，仅在 10 米后移动。我怎样才能做到这一点。

这是我的代码。

```
 private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; 
            private  static final float MIN_GEOGRAPHIC_POOLING_DISTANCE = (float)10.0;

 double myLat_Values;
        double myLog_Vaues;

locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
 locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MINIMUM_TIME_BETWEEN_UPDATES, MIN_GEOGRAPHIC_POOLING_DISTANCE, new MyLocationListener());

private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            longitude_str = String.valueOf(location.getLongitude());
            latitude_str = String.valueOf(location.getLatitude());

             Double longitude_number = Double.valueOf(longitude_str);
                 DecimalFormat dec = new DecimalFormat("#.000000");
                longitude_message = dec.format(longitude_number);

             Double latitude_number = Double.valueOf(latitude_str);
             DecimalFormat decim = new DecimalFormat("#.000000");
                latitude_message = decim.format(latitude_number);

                try
                {
                    myLat_Values = Double.valueOf(latitude_message);  
                    myLog_Vaues = Double.valueOf(longitude_message);
                }
                catch(NullPointerException ex)
                {
                    myLat_Values = 0;
                    myLog_Vaues = 0;
                }

     System.out.println("GPS Values Clockout:"+myLat_Values+"-"+myLog_Vaues);

        }       

    public void onProviderDisabled(String s) {}
        @Override
        public void onProviderEnabled(String provider) {}
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}      
    } 
```

我也将这些用于清单文件：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

我用了这个[链接](http://www.javacodegeeks.com/2010/09/android-location-based-services.html)

请任何人提出如何解决我的问题的建议。

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:32:49.147

当您使用 NETWORK_PROVIDER 时，它会根据您使用的网络服务提供商返回 GPS 坐标。但是当您使用 GPS_PROVIDER 时，它会根据卫星返回 GPS 坐标。

对于[Accuracy Criteria](http://developer.android.com/reference/android/location/Criteria.html)，添加以下代码，

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_HIGH);  
locationManager.getBestProvider(criteria, true); 
```

*   [ACCURACY_HIGH](http://developer.android.com/reference/android/location/Criteria.html#ACCURACY_HIGH)小于 100 米
*   [ACCURACY_MEDIUM](http://developer.android.com/reference/android/location/Criteria.html#ACCURACY_MEDIUM)在 100 - 500 米之间
*   [ACCURACY_LOW](http://developer.android.com/reference/android/location/Criteria.html#ACCURACY_LOW)大于 500 米

此外，您需要在 AndroidManifest.xml 中声明以下 GPS 权限

```
<uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission> 
```

# java - 如何从 wav 文件中获取 PCM 数据？

> ID：12120399
> 
> 赞同：5
> 
> 时间：2012-08-25T08:25:12.727
> 
> 标签：java, wav, javasound, pcm

我有一个`.wav`文件。我想从该声音文件中获取 PCM 数据，以便我可以从声音中获取各个数据块并进行处理。

但我不知道该怎么做。谁能告诉我该怎么做？到目前为止，我已经这样做了：

```
public class test
{

    static int frameSample;
    static int timeofFrame;
    static int N;
    static int runTimes;
    static int bps;
    static int channels;
    static double times;
    static int bufSize;
    static int frameSize;
    static int frameRate;
    static long length;

    public static void main(String[] args)
    {
        try
        {
            AudioInputStream ais = AudioSystem.getAudioInputStream(new File("music/audio.wav"));
            AudioInputStream a;
            int numBytes = ais.available();
            System.out.println("numbytes: "+numBytes);
            byte[] buffer = new byte[numBytes];
            byte[] buffer1=new byte[numBytes] ;
            int k=0;
            int count=0;
            while(count!=-1){
                count=ais.read(buffer, 0, numBytes);
            }
            long value = 0;

            for (int i = 0; i < buffer.length; i++)
            {
               value = ((long) buffer[i] & 0xffL) << (8 * i);
               System.out.println("value: "+value);
            }
        } catch(Exception e) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T12:07:01.607

这可以通过[Java Sound](https://stackoverflow.com/tags/javasound/info) API 完成。

*   使用来从文件`AudioSystem`中获取一个。`AudioInputStream`
*   查询`AudioFormat`.
*   创建一个`byte[]`以适应格式。EG 8 位单声道是`byte[1]`. 16 位立体声是`byte[4]`.
*   以块的形式读取流，`byte[]`它将逐帧包含声音。
*   继续进一步处理..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-20T23:15:49.593

[`javax.sound.sampled`](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/package-summary.html)这是一个使用该包的完整示例。如果您需要有关音频格式的详细信息，您可以通过 audioInputStream.getFormat() 获取它们，这将返回一个[AudioFormat](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/sound/sampled/AudioFormat.html)对象。

```
public static byte[] getPcmByteArray(String filename) throws UnsupportedAudioFileException, IOException {

    ByteArrayOutputStream baos = new ByteArrayOutputStream(65536);
    File inputFile = new File(filename);
    AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(inputFile);

    byte[] buffer = new byte[4096];
    int bytesRead;
    while ((bytesRead = audioInputStream.read(buffer)) != -1) {
        baos.write(buffer, 0, bytesRead);
    }

    return baos.toByteArray();
} 
```

# matlab - 我无法理解有关 mat lab 编码的内容

> ID：12120401
> 
> 赞同：1
> 
> 时间：2012-08-25T08:25:31.683
> 
> 标签：matlab

生成区间 [5;50] 中至少 1000 个随机数的对数正态分布值的散点图，该散点图源自区间 [0;1] 上的均匀分布。
到目前为止我已经这样做了

```
%declaring intervals
a=5;b=50;
%creating 1000 random number within the interval [5,50]
r = a + (b-a).*rand(1000,1); 
```

我无法理解这部分“**源自区间 [0;1] 上的均匀分布。** ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:38:10.240

`rand`给你一个介于`0`和之间的伪随机数`1`。从这个区间中选择任何特定数字的概率对于区间中的任何其他数字都是相同的，因此使用的概率密度函数`rand`称为“均匀分布”。

所以，你开始很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:38:41.357

我认为这意味着您应该将想要作为输出的数字范围映射到区间 [0,1] 中。也就是说，你将区间划分为 46 个等间距的子区间，使得每个区间的交集为空，它们的并集为 [0,1]。然后对于每个子区间，您将输出样本范围的值关联起来，然后 [0,1] 中的样本允许您从集合 [5:50] 中创建随机样本

例如，如果您想从 [1:10] 创建样本，您可以选择从 [0,1] 上的均匀分布生成样本。如果样本在区间 [0,0.1) 你的输出样本值为 1。如果它在区间 [0.2,0.3) 你的值将是 3 等等。

如果您要问什么是均匀分布，它只是样本空间中每个点被选择的概率相等的分布。有关详细信息，请参阅此[http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29](http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29)

# matrix - 八度：使用时出现奇怪的错误

> ID：12120402
> 
> 赞同：-1
> 
> 时间：2012-08-25T08:25:32.253
> 
> 标签：matrix, octave

我不知道为什么在 Windows 7 64 位上使用 Octave 时会出现这个奇怪的错误：

当我`ones(100:100)`用来声明一个 100x100 的矩阵时。没问题。但是当我使用时：`ones(10:100)`我会有错误：

> 内存耗尽或请求的大小太大

如果我使用`ones(10:15)`我必须等待很长时间（大约 30 秒）才能得到答案。

请为我解释这个错误。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:30:39.983

你的语法是错误的。要创建一个 mxn 矩阵，它应该是：

```
ones(m,n) 
```

例如

```
ones(100,100) 
```

或者

```
ones(10,15) 
```

# html - 如何在 CSS3 中替换数据属性 (data-*) 以便它们在 CSS2.1 中工作

> ID：12120403
> 
> 赞同：1
> 
> 时间：2012-08-25T08:25:45.287
> 
> 标签：html, css, custom-data-attribute

我有以下 CSS3 代码：

```
[data-class=float1]
    {
        width: 100%;
        float: none;
        margin: 0 0 0.1rem 0;
    } 
```

现在我想让我的页面在 IE7/IE8 中工作，并且由于它们不支持 css3，我需要在 CSS2.1 中找到此代码的替代方案

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T08:28:17.417

在 CSS3中没有等效的 CSS2.1 `rem`，所以你会遇到一些麻烦。但是，如果您指的是数据属性，CSS2.1 就很好地支持它们，因为属性选择器是在 CSS2.1 中引入的。CSS3 中有新的属性选择器，但您使用的不是新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:59:22.637

这里真正的问题是`rem`单元，它的[支持有限](http://caniuse.com/#feat=rem)（在 IE 8 或更早版本中不支持）。在大多数情况下，可以通过使用`em`单位轻松替换它，只需注意嵌套元素的字体大小设置可能产生的影响。请记住，`em`单位等于当前元素的字体大小。

# jquery - jQuery.validate 在错误消息框中显示错误

> ID：12120407
> 
> 赞同：1
> 
> 时间：2012-08-25T08:26:02.850
> 
> 标签：jquery, jquery-plugins

我正在使用以下内容在每个未填写的字段旁边显示错误消息。我想简化一些事情，当单击提交按钮并且未填写字段时，只会出现一个错误框，上面写着“请填写所有字段”。`class="required"`正在用于所需的每个字段类型。我该怎么做，我用`showError`吗？

```
<script type="text/javascript">
$(document).ready(function() {
    $("#form1").validate({
        errorLabelContainer: $("#form1 div.error")
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:27:15.913

```
Code 
```

在表单上方显示一条消息，指示当用户尝试提交无效表单时有多少字段无效。

```
$(".selector").validate({
invalidHandler: function(form, validator) {
  var errors = validator.numberOfInvalids();
  if (errors) {
    var message = errors == 1
      ? 'You missed 1 field. It has been highlighted'
      : 'You missed ' + errors + ' fields. They have been highlighted';
    $("div.error span").html(message);
    $("div.error").show();
  } else {
    $("div.error").hide();
  }
}
 }) 
```

而不是使用 div 使用另一个 jquery 库，该库可以显示带有相同错误消息的弹出窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:01:13.803

验证插件`invalidHandler: function(e, validator)`可以满足您的需求。

一个小演示：http: [//jsfiddle.net/codovations/5YHQb/1/](http://jsfiddle.net/codovations/5YHQb/1/)

# ruby-on-rails - 通过'rake db：setup'破坏了数据库？（罗尔）

> ID：12120414
> 
> 赞同：0
> 
> 时间：2012-08-25T08:27:11.540
> 
> 标签：ruby-on-rails, postgresql, rake

昨天，我试图建立一个名为“Elasticsearch”的全文搜索引擎，我按照 Railscasts.com 上的说明进行操作（[http://railscasts.com/episodes/306-elasticsearch-part-1?view=comments&_= 1345840910957](http://railscasts.com/episodes/306-elasticsearch-part-1?view=comments&_=1345840910957)）将此搜索引擎集成到我的网站上。我按照任务调用'rake db：setup'，它“重新创建”了我的整个数据库（不想要那个），现在没有任何效果。
似乎 Rails 从 schema.rb 重新创建了数据库，但它只创建表和索引，而不是与之关联的列。 [http://img14.imageshack.us/img14/1535/bildschirmfoto20120825u.png](http://img14.imageshack.us/img14/1535/bildschirmfoto20120825u.png)
我在 _development 数据库上。

运行`rake db:setup`看起来像这样：

```
doanything_development already exists 
doanything_test already exists
-- create_table("admin_notes", {:force=>true})
NOTICE:  CREATE TABLE will create implicit sequence "admin_notes_id_seq" for serial column "admin_notes.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "admin_notes_pkey" for table "admin_notes"
   -> 0.1088s
-- add_index("admin_notes", ["admin_user_type", "admin_user_id"], {:name=>"index_admin_notes_on_admin_user_type_and_admin_user_id"})
   -> 0.0064s
-- add_index("admin_notes", ["resource_type", "resource_id"], {:name=>"index_admin_notes_on_resource_type_and_resource_id"})
   -> 0.0049s ...<br /><br />
Schema.rb looks like: " create_table "users", :force => true do |t|<br />
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",:null => false
    t.datetime "updated_at",:null => false ... end <br /> 
```

它在我的 pgdb 表“序列”列上创建，`"users_id_seq"`我以前没有。运行“ `rake db:migrate`”不会加载任何现有的迁移文件：例如

```
class AddSaltToUsers < ActiveRecord::Migration <br/>
  def change <br/>
    add_column :users, :salt, :string <br/>
  end
end 
```

版本是：ruby 1.9.3p194、Rails 3.2.6 和 PostgreSQL 9.1.4

如果有人能弄清楚刚刚发生了什么以及我如何让我的网站再次运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:09:42.010

If you ran rake db:migrate once. The migration for `AddSaltToUsers` may have already ran. If so, there are a few ways to overcome this.

Either create a new migrations file, or manually edit `schema_migrations`, by removing the version number from that table and then re-running `rake db:migrate`. I would highly not recommend doing the latter, as it can screw up your migrations all together if you don't know what you are doing.

Hope that helps.

# c# - 如何在 listBox 中的项目之间移动并在 label.Text 上显示项目名称？

> ID：12120415
> 
> 赞同：1
> 
> 时间：2012-08-25T08:27:15.120
> 
> 标签：c#, listbox

我有一个 listBox1 里面有 4 个项目。我可以使用按键在项目之间上下移动，或者在每个项目上用鼠标单击一次，在这两种情况下，选定的项目都将以蓝色标记突出显示。

我希望当我单击一个项目或当我在项目上上下移动键时，它会更改 label.Text 与当前项目名称。

例如在项目 moses 中，因此 label1.Text 将包含 moses。使用向上箭头键移动到下一个项目，因此现在 label1.Text 包含丹尼尔。用鼠标点击项目编号 3 现在 label1.Text 将包含 dana。

试过这个：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            for (int i = 0; i < listBox1.Items.Count; i++)
            {
                //listBox1.Items.Add(fsi[i].Name + Environment.NewLine);
                label2.Text = listBox1.Items[i].ToString();
            }
        } 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:32:58.347

您真的希望您的代码能够正常工作吗？如果您只需要检查当前选定的项目，为什么要遍历整个集合？

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    ListBoxItem lbi = ((sender as ListBox).SelectedItem as ListBoxItem);
    label2.Text = lbi.Content.ToString();
} 
```

或者，如果您使用的是网络表单：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    label2.Text = listBox1.SelectedItem.Text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:35:28.940

为我工作。

```
private void Form1_Load(object sender, EventArgs e)
{
   listBox1.Items.Add("Item1");
   listBox1.Items.Add("Item2");
   listBox1.Items.Add("Item3");
   listBox1.Items.Add("Item4");
 }

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
   label1.Text = listBox1.SelectedItem.ToString();   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:37:05.477

如果您使用`List<CustomClass>/ObservableCollection<CustomClass>`as `ItemSource`for`ListBox`在 listbaox selected index changed 事件中尝试以下方式

```
var listTapped = sender as ListBox;

var selectedUser = listTapped.SelectedItem as CustomClass;
if (selectedUser == null)
    return;
label2.Text = selectedUser.Name; // 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:31:00.650

ListBox 包含事件`SelectedIndexChanged`。它在这样的条件下提出。我认为你应该使用它。然后你应该使用 SelectedValue 属性来获取正确的字符串。

# vim - “stty：非法选项”每当我打开和关闭 vim 时出错

> ID：12120425
> 
> 赞同：0
> 
> 时间：2012-08-25T08:28:30.190
> 
> 标签：vim, vi

每当我打开 vim 时，我都会收到此错误：

```
stty: illegal option -- --save
usage: stty [-a|-e|-g] [-f file] [options] 
```

然后，当我退出时，我看到：

```
stty: illegal option -- 
usage: stty [-a|-e|-g] [-f file] [options] 
```

截屏：

![](../Images/2be70e3a8afe3ad93e0f1eaa367fe2a6.png)

我已经尝试过 iTerm 和终端。此外，这似乎只是随机开始发生的。我在 VIM 7.3 上。vim 似乎没有什么问题，但我只是得到了令人讨厌的输出。此外，它在我的 vimrc 文件中没有任何内容。我删除了文件以确保我仍然收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:53:03.000

[`stty`](http://unixhelp.ed.ac.uk/CGI/man-cgi?stty)与 Vim 无关。检查（或发布）您的 .vimrc 以查看它是否以某种方式调用`stty`. 或者检查你的`*rc`文件，也许。

# c - 如何打印 uint32_t 和 uint16_t 变量的值？

> ID：12120426
> 
> 赞同：53
> 
> 时间：2012-08-25T08:28:36.120
> 
> 标签：c, gcc

我正在尝试打印 uint16_t 和 uint32_t 值，但它没有提供所需的输出。

```
#include <stdio.h>
#include <netinet/in.h>

int main()
{
    uint32_t a = 12, a1;
    uint16_t b = 1, b1;
    a1 = htonl(a);
    printf("%d---------%d", a1);
    b1 = htons(b);
    printf("\n%d-----%d", b, b1);
    return 0;
} 
```

我也用过

```
 printf("%"PRIu32, a); 
```

显示错误。

如何打印这些值以及所需的输出是什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-25T08:40:58.477

如果您想要类型及其兄弟`inttypes.h`的所有那些漂亮的新格式说明符，则需要包括在内，这*是*正确的（即可移植的）方法，前提是您的编译器符合 C99。如果尺寸与您的想法不同，则不应使用标准尺寸。`intN_t`*`%d``%u`*

 *它包含`stdint.h`并扩展了许多其他内容，例如可用于`printf/scanf`调用系列的宏。ISO C99 标准的第 7.8 节对此进行了介绍。

例如，以下程序：

```
#include <stdio.h>
#include <inttypes.h>
int main (void) {
    uint32_t a=1234;
    uint16_t b=5678;
    printf("%" PRIu32 "\n",a);
    printf("%" PRIu16 "\n",b);
    return 0;
} 
```

输出：

```
1234
5678 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-23T00:17:59.900

中定义的宏`<inttypes.h>`是打印类型值的最正确方法`uint32_t`，`uint16_t`等等——但它们不是唯一的方法。

就个人而言，我发现这些宏很难记住并且使用起来很尴尬。（考虑到`printf`格式字符串的语法，这可能是不可避免的；我并不是说我可以想出一个更好的系统。）

另一种方法是将值转换为预定义类型并使用该类型的格式。

语言保证类型`int`和`unsigned int`至少为 16 位宽，因此能够分别保存任何类型`int16_t`或的转换值`uint16_t`。同样，`long`和`unsigned long`至少 32 位宽， 和`long long`至少`unsigned long long`64 位宽。

例如，我可能会这样编写你的程序（加上一些额外的调整）：

```
#include <stdio.h>
#include <stdint.h>
#include <netinet/in.h>  

int main(void)
{
    uint32_t a=12, a1;
    uint16_t b=1, b1;
    a1 = htonl(a);
    printf("%lu---------%lu\n", (unsigned long)a, (unsigned long)a1);
    b1 = htons(b);
    printf("%u-----%u\n", (unsigned)b, (unsigned)b1);
    return 0;
} 
```

这种方法的一个优点是它甚至可以与不支持`<inttypes.h>`. 这样的实现很可能两者都没有`<stdint.h>`，但该技术对其他整数类型很有用。*

# redirect - 将用户与错误消息一起发送到页面

> ID：12120427
> 
> 赞同：0
> 
> 时间：2012-08-25T08:28:45.590
> 
> 标签：redirect, login, error-handling

我想设置一个登录页面，我可以从网站上的任何地方向它发送用户，它会显示一条自定义消息。我可以使用重定向和`msg`查询参数，但这是最好的方法吗？

我正在使用 node.js，但我对通用解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:35:32.053

如果您想轻松一点，您可以在 URL 中包含 GET 数据。但是，如果你想要一个相当长的消息，那看起来不太好，另外，GET 有大小限制，而 POST（实际上）没有。
对于使用发布数据，您可以使用以下解决方案：[JavaScript post request like a form submit](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit) question，但这会提供相当混乱的源代码（如果您想要更长的文本）。
您可以将它们保存在数据库中，仅将消息的 ID 发送到 PHP 页面，然后从数据库中获取它（这就是我会做的，但这并不意味着这是一个好主意，只是这里的业余爱好者！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:36:05.400

您可以使用 jQuery 或简单的 javascript 从 url 中提取您的消息；列出详细代码链接的相关问题：[jquery get querystring from URL](https://stackoverflow.com/questions/4656843/jquery-get-querystring-from-url)。

然后根据您希望它的显示方式，将提取的字符串应用于您的情况。

# model-view-controller - MVC - 在哪里放置通信代码

> ID：12120428
> 
> 赞同：3
> 
> 时间：2012-08-25T08:28:52.840
> 
> 标签：model-view-controller, networking

我想尝试编写（这里是业余爱好者！）多人游戏，现在在设计时我决定使用 MVC 模式。
现在我的问题是：我应该把我的网络代码放在哪里？在模型或控制器中？（显然不是视图）

**编辑：** 对不起，数百次我的问题都不清楚。
游戏本身将是 MVC，它首先与服务器通信（查找玩家），然后与该玩家通信（轮到你并轮到其他人）。那么我应该在哪里做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:41:52.233

MVC 设计模式实际上是两层的组合：表示层和模型层。表示层通常处理用户界面（更新它并对用户的交互作出反应）。模型层处理领域业务逻辑和持久性。

网络代码应该放在模型层。

确切地说，在模型层处理持久性的部分，因为从业务逻辑的角度来看，数据的来源没有区别。它可以来自 SQL 数据库，来自打开的网络套接字或火星探测器上的探测器。这些都只是数据源，通常作为[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)实现，是模型层的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:37:22.933

您可以将实际游戏本身放在一个新项目中，并在您的 MVC 应用程序之间引用它，这样您的游戏就与您的 Web 应用程序完全分离。例如，如果您想将其移植到 WPF，这可能会很有用。另一种选择是将游戏作为 Web 服务，MVC 应用程序从该服务请求信息，并为其他语言提供可扩展性以插入。

但是，如果您决定将所有内容作为一个整体保留在 MVC 中，那么我建议您使用模型。

作为细分：

*   控制器负责所有的网络请求，即 GET 和 POST。它还可以填充模型并为该请求返回适当的视图。

*   该模型包含要执行的域对象和逻辑（即从存储库中提取信息并处理要传递给视图的数据）。

*   视图返回基于模型中存储的数据的标记。

在某些实现中，诸如检查条件和存储库调用之类的附加逻辑也发生在控制器级别，这是一种称为胖控制器瘦模型的技术。

**编辑：**

您应该向控制器发送请求。即在您的游戏控制器中，有一个`HTTPPost`方法可以连接到服务器，然后向玩家发送转弯信息并获取新信息。例如：

```
[HttpPost]
public ActionResult SendPlayerTurnInformation(PlayerObject player) 
{
   // logic to connect to the Game Network
   // connection.UpdatePlayerTurn(player);

   //return success/fail
} 
```

然后你可以做同样的事情来获取特定的玩家回合信息，然后更新你的模型以传递给包含新信息的视图。

# php - PHP mysql插入日期格式

> ID：12120433
> 
> 赞同：61
> 
> 时间：2012-08-25T08:30:12.200
> 
> 标签：php, mysql, date, insert

我使用 jQuery datepicker datepicker 的格式是这样的`08/25/2012`

插入数据库时​​出现错误，它仅插入 0000-00-00 00 00 00

我的代码是

```
<?php
$id = $_POST['id'];
$name = $_POST['name'];
$date = $_POST['date'];
$sql = mysql_query( "INSERT INTO user_date VALUE( '', '$name', '$date')" ) or die ( mysql_error() );
echo 'insert successful';
?> 
```

我确定我的插入是正确的....

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-08-25T08:33:20.977

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL 可以识别[`DATE`](http://dev.mysql.com/doc/en/datetime.html)以下格式的值：
> 
> *   作为一个`'YYYY-MM-DD'`或`'YY-MM-DD'`格式的字符串。允许使用“宽松”语法：任何标点符号都可以用作日期部分之间的分隔符。例如，`'2012-12-31'`、`'2012/12/31'`、`'2012^12^31'`和`'2012@12@31'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDD'`字符串`'YYMMDD'`，前提是该字符串作为日期有意义。例如，`'20070523'`and`'070523'`被解释为`'2007-05-23'`, 但是`'071332'`是非法的（它有无意义的月份和日期部分）并且变成`'0000-00-00'`.
>     
>     
> *   作为任一`YYYYMMDD`格式`YYMMDD`的数字，前提是该数字作为日期有意义。例如`19830905`和`830905`被解释为`'1983-09-05'`。

因此，字符串`'08/25/2012'`不是有效的 MySQL 日期文字。您有四个选项（按照一些模糊的偏好顺序，没有任何关于您的要求的进一步信息）：

1.  将 Datepicker 配置为使用 an[`altField`](http://api.jqueryui.com/datepicker/#option-altField)及其[`altFormat`选项](http://api.jqueryui.com/datepicker/#option-altFormat)以支持的格式提供日期：

    ```
    <input type="hidden" id="actualDate" name="actualDate"/> 
    ```

    ```
    $( "selector" ).datepicker({
        altField : "#actualDate"
        altFormat: "yyyy-mm-dd"
    }); 
    ```

    或者，如果您对用户以`YYYY-MM-DD`格式查看日期感到满意，只需设置[`dateFormat`选项](http://api.jqueryui.com/datepicker/#option-dateFormat)即可：

    ```
    $( "selector" ).datepicker({
        dateFormat: "yyyy-mm-dd"
    }); 
    ```

2.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数来转换字符串：

    ```
    INSERT INTO user_date VALUES ('', '$name', STR_TO_DATE('$date', '%m/%d/%Y')) 
    ```

3.  将从 jQuery 接收到的字符串转换为 PHP 理解为日期的内容，例如[`DateTime`](http://php.net/manual/en/class.datetime.php)对象：

    ```
    $dt = \DateTime::createFromFormat('m/d/Y', $_POST['date']); 
    ```

    然后是：

    *   获取合适的格式化字符串：

        ```
        $date = $dt->format('Y-m-d'); 
        ```

    *   获取 UNIX 时间戳：

        ```
        $timestamp = $dt->getTimestamp(); 
        ```

        然后直接传递给 MySQL 的[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime)函数：

        ```
        INSERT INTO user_date VALUES ('', '$name', FROM_UNIXTIME($timestamp)) 
        ```

4.  手动将字符串操作为有效的文字：

    ```
    $parts = explode('/', $_POST['date']);
    $date  = "$parts[2]-$parts[0]-$parts[1]"; 
    ```

* * *

## 警告

1.  **您的代码容易受到 SQL 注入的攻击。** 您*确实*应该使用[准备好的语句](https://stackoverflow.com/a/60496/623041)，将变量作为参数传递给其中，这些参数不会针对 SQL 进行评估。如果您不知道我在说什么，或者如何解决它，请阅读[Bobby Tables](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)的故事。

2.  此外，正如PHP 手册关于函数的章节[的介绍](http://www.php.net/manual/en/intro.mysql.php)`mysql_*`中所述：

    > 此扩展自 PHP 5.5.0 起已弃用，不推荐用于编写新代码，因为它将在未来被删除。相反，应该使用[mysqli](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)扩展。在选择 MySQL API 时，另请参阅[MySQL API 概述](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)以获得更多帮助。

3.  您似乎正在使用 a`DATETIME`或`TIMESTAMP`列来保存日期值；我建议您考虑改用 MySQL 的`DATE`类型。如[The `DATE`,`DATETIME`和`TIMESTAMP`Types](http://dev.mysql.com/doc/en/datetime.html)中所述：

    > 该`DATE`类型用于具有日期部分但没有时间部分的值。`'YYYY-MM-DD'`MySQL 以格式检索和显示 DATE 值。支持的范围是`'1000-01-01'`to `'9999-12-31'`。
    > 
    > 该`DATETIME`类型用于同时包含日期和时间部分的值。MySQL 以格式检索和显示`DATETIME`值。`'YYYY-MM-DD HH:MM:SS'`支持的范围是`'1000-01-01 00:00:00'`to `'9999-12-31 23:59:59'`。
    > 
    > `TIMESTAMP`数据类型用于同时包含日期和时间部分的值。`TIMESTAMP`具有`'1970-01-01 00:00:01'`UTC 到`'2038-01-19 03:14:07'`UTC 的范围。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-25T08:33:32.023

您应该考虑从该日期创建时间戳 witk [mktime()](http://php.net/mktime)

例如：

```
$date = explode('/', $_POST['date']);
$time = mktime(0,0,0,$date[0],$date[1],$date[2]);
$mysqldate = date( 'Y-m-d H:i:s', $time ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-06T10:50:22.820

```
$date_field         = date('Y-m-d',strtotime($_POST['date_field']));
$sql = mysql_query("INSERT INTO user_date (column_name,column_name,column_name) VALUES('',$name,$date_field)") or die (mysql_error()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T08:35:18.443

您必须确保 jQuery 输出上的日期格式为 YYYY-MM-DD。我可以看到 jQuery 返回 MM-DD-YYYY，这不是有效的[MySQL 日期格式](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html)，这就是它返回错误的原因。

要将其转换为正确的，您可以这样做：

```
$dateFormated = split('/', $date);
$date = $dateFormated[2].'-'.$dateFormated[0].'-'.$dateFormated[1]; 
```

然后您将获得有效的 MySQL 格式的格式化日期，即 YYYY-MM-DD，即*2012-08-25*

我还建议在将数据插入数据库时​​使用[mysql_real_escape_string以防止](http://www.php.net/manual/en/function.mysql-real-escape-string.php)[SQL 注入](https://stackoverflow.com/questions/11939226/sql-injections-and-adodb-library-general-php-website-security-with-examples/11941396#comment15907839_11941396)作为快速解决方案或更好地使用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

您使用的插入查询`mysql_real_escape_string`应该如下所示：

```
$sql = mysql_query( "INSERT INTO user_date VALUE( '', '" .mysql_real_escape_string($name). "', '" .mysql_real_escape_string($date). "'" ) or die ( mysql_error() ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-17T08:14:22.280

使用从 jquery 日期选择器获取日期对象

```
var myDate = $('element').datepicker('getDate') 
```

对于 mysql，日期需要采用正确的格式。处理任何时区问题的一种选择是使用 moment.js

```
moment(myDate).format('YYYY-MM-DD HH:mm:ss') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-15T02:42:35.293

最简单的方法是

```
$dateArray = explode('/', $_POST['date']);
$date = $dateArray[2].'-'.$dateArray[0].'-'.$dateArray[1];

$sql = mysql_query("INSERT INTO user_date (column,column,column) VALUES('',$name,$date)") or die (mysql_error()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-13T14:54:17.120

这些天，我不擅长约会。感谢以下工作，我可以以我想要的格式打印日期。

```
$year = $_POST['year'];
$month = $_POST['month'];
$day = $_POST['day'];
$scr = strtotime($year . '-' . $month . '-' . $day);
$gelis_tarihi = date('Y-m-d', $scr);

$yil = $_POST['yil'];
$ay = $_POST['ay'];
$gun = $_POST['gun'];
$birlestir = strtotime($yil . '-' . $ay . '-' . $gun);
$gelis_tarihi = date('Y-m-d', $birlestir); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-17T14:37:09.470

假设您收到一个圣诞节日期：2021 年 12 月 25 日 (25 de Diciembre del año 2021)，字符串格式为：“dmY”，例如“12-25-2021”。`DateTime`首先从收到的格式创建一个有效的对象：

```
var_dump(DateTime::createFromFormat("d-m-Y","25-12-2021", new DateTimeZone("America/Argentina/Buenos_Aires"))); 
```

这生成为输出：

```
object(DateTime)#2 (3) {
  ["date"]=>
  string(26) "2021-12-25 10:21:11.000000"
  ["timezone_type"]=>
  int(3)
  ["timezone"]=>
  string(30) "America/Argentina/Buenos_Aires"
} 
```

现在使用*format("Ymd H:i:s"))*从 DateTime 对象中获取日期字段：

```
var_dump(DateTime::createFromFormat("d-m-Y","25-12-2021",new DateTimeZone("America/Argentina/Buenos_Aires"))->format("Y-m-d H:i:s")); 
```

这会生成一个准备插入值作为输出：

```
string(19) "2021-12-25 10:56:30" 
```

**总之，现在您可以像这样在 MySQL 中插入格式化日期（'DD-MM-YYYY'）：**

```
<?php
//string input post like "25-12-2021"
$date_input = $_POST['date_input']; 
//create DateTime object
$date_time_obj=DateTime::createFromFormat("d-m-Y","25-12-2021",new DateTimeZone("America/Argentina/Buenos_Aires"));
//format date ready to insert as string at MySQL
$str_date=$date_time_obj->format("Y-m-d H:i:s");
?> 
```

**现在直接从 PHP 运行到 MySQL 作为查询：**

```
<?php
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world');

//verify connection
if (mysqli_connect_errno()) {
    printf("Error de conexión: %s\n", mysqli_connect_error());
    exit();
}
//prepare the query to execute
$stmt = $mysqli->prepare("INSERT INTO table_example (DATE_FIELD) VALUES (?)");
//prevent sql injection
$stmt->bind_param('s', $str_date);
//execute prepared statements
$stmt->execute ();
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-06T13:13:31.073

HTML：

```
<div class="form-group">
  <label for="pt_date" class="col-2 col-form-label">Date</label>
  <input class="form-control" type="date" value=<?php echo  date("Y-m-d") ;?> id="pt_date" name="pt_date">
</div> 
```

SQL

```
$pt_date = $_POST['pt_date'];

$sql = "INSERT INTO `table` ( `pt_date`) VALUES ( '$pt_date')"; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-07-28T09:48:14.450

试试这样的东西..

```
echo "The time is " . date("2:50:20");
$d=strtotime("3.00pm july 28 2014");
echo "Created date is " . date("d-m-y h:i:sa",$d); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-05-04T05:20:44.910

首先店铺`$date=$_POST['your date field name'];`

```
insert into **Your_Table Name** values('$date',**other fields**); 
```

您必须在单个 cote (' ') 中包含日期

我希望它有帮助。

# c# - 检测字符串的选择

> ID：12120440
> 
> 赞同：1
> 
> 时间：2012-08-25T08:30:55.953
> 
> 标签：c#, string, events, selection, detection

是否可以在任何应用程序中检测字符串选择？我需要编写一些将在后台运行的应用程序，并检查是否选择了任何字符串（例如在某些网站内容或 PDF 阅读器或 Word 中）。如果检测到某些字符串选择，则应将其复制到剪贴板。

# backbone.js - Tastypie 按最小值筛选

> ID：12120442
> 
> 赞同：0
> 
> 时间：2012-08-25T08:31:21.197
> 
> 标签：backbone.js, tastypie

我有一个代表横幅的 Django-tastypie 资源，并且有一个名为印象的字段，每当横幅出现在网站上时，我都会增加该字段。

```
class BannerResource(ModelResource):

    owner = fields.ForeignKey('advertisment.api.AdvertiserResource', 'owner', full=True)
    class Meta:
        queryset = Banner.objects.all()
        resource_name = 'banner'
        authorization = Authorization() 
```

我想获得印象最少的横幅，在官方文档中没有类似的东西

```
filtering = {'impressions': ('min',)} 
```

我在前端使用 BackboneJS，我可以使用 Backbone 集合获取所有横幅并使用 JavaScript 进行过滤，但我正在寻找一种更快的方法来做到这一点。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:08:52.063

如果您想检索展示次数多于`X`您需要的横幅。一方面，您需要像这样在资源上定义可能的过滤操作（假设您的模型具有`impressions`字段）：

```
class BannerResource(ModelResource):

    owner = fields.ForeignKey('advertisment.api.AdvertiserResource', 'owner', full=True)

    class Meta:
        queryset = Banner.objects.all()
        resource_name = 'banner'
        authorization = Authorization()

        filtering = { 'impressions' : ALL } 
```

有关可用选项，请查看[Tastypie 的有关过滤的文档](http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering)。

然后，如果您提出以下请求：

```
GET http://<your_host>/v1/banners?impressions__gte=X 
```

你应该得到你需要的。

# php - 通过 PHP 中的另一个扩展类加载类时遇到问题

> ID：12120443
> 
> 赞同：1
> 
> 时间：2012-08-25T08:31:35.703
> 
> 标签：php

我有三个班级：**A**，**B**和**C**。在**A**类，A.php 中：

```
class A
{
    function __Contruct()
    {
          //do something
    }
} 
```

在**B**类，B.php 中：

```
class B extends A
{
    function __Contruct()
    {
         //do something
    }
} 
```

在**C**类：

```
class C
{
    function __Contruct()
    {
         include(A.php);
         $this->A = new A;
         include(B.php);
         $this->B = new B;
    }
    function _load()
    {
         //load class $X;
    }
} 
```

我需要加载一个名称是变量值的类：$X 到类B 中没有单词**new的类。**

我可以这样做吗：`$this->classname->functionname();//classname is value of $X`在文件 B.php 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:49:41.407

你用 A 类扩展 B 类，那你为什么不用 B 类扩展 C 类呢？然后您可以访问 A 类和 B 类的所有属性和方法。

不需要

```
$this->classname->functionname(); 
```

或者您可以按如下方式访问方法或属性，

```
A::functionname();
B::functionname();
C::functionname(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T05:04:04.863

我想你想要的是：

```
$var = new $X; 
```

创建一个类的实例`$X`和

```
$X::functionname() 
```

调用类的方法`$X`。

更新：

如果 $this->classname 返回一个类的名称，也许你需要的是：

```
($this->classname)::functionname(); 
```

# php - Joomla 中的后端操作不起作用

> ID：12120445
> 
> 赞同：8
> 
> 时间：2012-08-25T08:31:52.413
> 
> 标签：php, joomla

当我创建动作然后单击它时，我得到 js 错误

未捕获的类型错误：无法读取未定义的属性“任务”（在 chrome 中）
类型错误：b 未定义（在 ff 中）

我的代码是：

视图.html.php

```
<?// no direct access

defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.application.component.view');

class ObshViewObsh extends JView
{

    function display($tpl = null)
    {

        $task = JRequest::getVar('task', '');
        switch($task){            
            case 'config': $this->config();break;
            default: $this->windows();
        }

        parent::display($tpl);
    }

    function windows(){
        JToolBarHelper::title( JText::_( 'Общежития' ), 'generic.png' ); 
        JToolBarHelper::custom('config','options','','Настройки',false); //<<< --- this link doesn't work

    }

     function config(){
        JToolBarHelper::title( JText::_( 'Общежития - настройка компонента' ), 'generic.png' );
        JToolBarHelper::apply('edit_config');
        JToolBarHelper::cancel('cancel');    
    }          

} 
```

控制器.php

```
<?php
 error_reporting(E_ALL);
// No direct access

defined( '_JEXEC' ) or die( 'Restricted access' );

jimport('joomla.application.component.controller');

class ObshController extends JController
{       

    function config(){
        JRequest::setVar( 'view', 'obsh' );
        JRequest::setVar( 'layout', 'config'  );
        JRequest::setVar( 'hidemainmenu', 1 );
        parent::display();
    }        
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T11:06:36.240

答案很简单……

我忘了在视图中添加表单

```
<form action="index.php" method="post" name="adminForm">

    something

    <input type="hidden" name="option" value="com_obsh" />
    <input type="hidden" name="task" value="" />
    <input type="hidden" name="boxchecked" value="0" />
</form> 
```

# php - this.form.submit() 不能与 php 一起正常工作

> ID：12120456
> 
> 赞同：0
> 
> 时间：2012-08-25T08:33:10.087
> 
> 标签：php, javascript, html

我有一个一页的小程序，它不能正常工作。希望有人能在这个节目中找到独家新闻。

```
<html>
<head>
    <title>Simple test program</title>
</head>
<body>  
<?php
if(isset($_GET['login'])) {
    echo "You county is usa";
}
?>
<form Method="get" action="test.php">
<select name="country" onchange="this.form.submit();">
<option value="None">None</option>
<option value="Bidhut">USA</option>
</select>
<input type="submit" name="login" value="Submit" />
</form>
</body>
</html> 
```

而且我还想在提交表格后保持选中美国。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:37:55.903

这是因为浏览器`login`仅在您通过单击具有此类名称的提交按钮发送表单时才会发送参数。如果一个表单中有多个提交按钮，并且您单击其中一个按钮，则只会发送单击按钮的数据，如果您不单击，则不会发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:38:03.453

不要将值绑定到提交按钮，`login`在隐藏字段中使用。还要检查`$_GET`值的选择选项：

```
<html>
<head>
    <title>Simple test program</title>
</head>
<body>  
<?php
if(isset($_GET['login'])) {
    echo "You county is ".$_GET['country'];
}
?>
<form Method="get" action="test.php">
<select name="country" onchange="this.form.submit();">
<option value="None"<?php if($_GET['country'] == 'None'){ echo ' SELECTED'; } ?>>None</option>
<option value="Bidhut"<?php if($_GET['country'] == 'Bidhut'){ echo ' SELECTED'; } ?>>USA</option>
</select>
<input type="hidden" name="login" value="login" />
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T08:50:37.963

您可以使用 jQuery 选择 jQuery

```
$("#id-select").val("<?=$_GET['country'];?>"); 
```

SEO y Posicionamiento 网站[http://www.skillcorp.com.ve](http://www.skillcorp.com.ve)

# linux - 提交或拉入 git 时出现总线错误（核心转储）

> ID：12120458
> 
> 赞同：4
> 
> 时间：2012-08-25T08:33:25.900
> 
> 标签：linux, git

当我尝试提交或拉取此错误`Bus error (core dumped)`时！

当我用 gdb 调试它时， ( `gdb git`, `run commit -a`, `where`) 结果是：

```
muculus@muculus-laptop:~/www/pure/core$ gdb git
GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2) 7.4-2012.04
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /usr/bin/git...(no debugging symbols found)...done.
(gdb) run commit -a
Starting program: /usr/bin/git commit -a
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Program received signal SIGBUS, Bus error.
0x00000000004e9338 in ?? ()
(gdb) where
#0  0x00000000004e9338 in ?? ()
#1  0x00000000004ea64f in ?? ()
#2  0x00000000004b5143 in ?? ()
#3  0x00000000004ada6e in ?? ()
#4  0x000000000041d29b in ?? ()
#5  0x000000000041df17 in ?? ()
#6  0x0000000000405634 in ?? ()
#7  0x0000000000404a30 in ?? ()
#8  0x00007ffff73ee76d in __libc_start_main (main=0x404980, argc=3, ubp_av=0x7fffffffe008, init=<optimized out>, fini=<optimized out>, 
    rtld_fini=<optimized out>, stack_end=0x7fffffffdff8) at libc-start.c:226
#9  0x0000000000404e65 in ?? ()
#10 0x00007fffffffdff8 in ?? ()
#11 0x000000000000001c in ?? ()
#12 0x0000000000000003 in ?? ()
#13 0x00007fffffffe34b in ?? ()
#14 0x0000000000000000 in ?? ()
(gdb) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-15T21:18:58.730

尝试运行`dmesg`。在我的情况下，这是由于硬件错误：sda 上的坏扇区。

# javascript - 如何扩展像 bootstrap-typeahead.js 这样的库

> ID：12120463
> 
> 赞同：2
> 
> 时间：2012-08-25T08:34:26.867
> 
> 标签：javascript, jquery, autocomplete, twitter-bootstrap

假设我想在原始的 bootstrap-typeahead.js 中添加一些功能。
我不喜欢分叉另一个库然后对其进行编辑以添加功能或使用分叉库的想法。

一个用例可能是：添加选项 onselect 以便`$.fn.typeahead.defaults`在我选择自动完成中的项目时执行回调。

这是我的测试 (1)，请添加注释和代码以使其正常工作。

* * *

(1)

```
_.extend($.fn.typeahead.defaults, {onselect: null});

element.typeahead({
    minLength: 3,
    source: function () {
        return ['val1', 'val2'];
    },
    onselect: function (val) {
      console.log(val); // it should be able to get the value selected  
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:01:48.480

JavaScript 是一种非常动态的语言，它允许您在运行时轻松地重新定义或修改函数。有关示例，请参见[我的这个答案。](https://stackoverflow.com/questions/11969953/extend-mobile-changepage-to-accept-more-options/11970454#11970454)

但是，似乎有人已经通过链接到分叉的 typeahead 以提供回调来[回答您的问题。](https://stackoverflow.com/questions/9496314/bootstrap-typeahead-js-add-a-listener-on-select-event?rq=1)`onselect`

# javascript - 滑动表格一次不显示一个表格

> ID：12120477
> 
> 赞同：-4
> 
> 时间：2012-08-25T08:37:17.840
> 
> 标签：javascript, jquery

我正在使用 jQuery 创建一个滑动表单，但是这些表单不是一次显示一个，而是一次显示。然而，jsfiddle 纠正了这个问题。不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:04:22.430

如果您从 JSFiddle 的视图中查看源代码，这就是区别：[http](http://diffchecker.com/3q359BDH) ://diffchecker.com/3q359BDH 。使用 JSFiddles 代码的工作示例：http: [//teswo.tk/so/1.html](http://teswo.tk/so/1.html)

# google-maps-api-3 - infoWindow 未显示在地图中心

> ID：12120479
> 
> 赞同：1
> 
> 时间：2012-08-25T08:37:42.813
> 
> 标签：google-maps-api-3, google-maps-markers

这是我用来显示标记和 infoWindows 的代码。它运行良好。

```
mapOptions = {
  zoom: zoom,
  center: getMyCompanyCoordinates,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map($(this)[0], mapOptions)

  infowindow = new google.maps.InfoWindow()
  createMarker = (company)->
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(company.latitude, company.longitude),
        map: map
      })

      google.maps.event.addListener(marker, 'click', ()->
        infowindow.setContent('content')
        infowindow.open(map,this)
      )
      return marker

  firstCompanyMarker = createMarker(companiesData[0])
  createMarker(companiesData[i]) for i in [1..companiesData.length-1] by 1
  google.maps.event.trigger(firstCompanyMarker, 'click') 
```

但是，有一个问题。默认 (firstCompanyMarker) 标记的 infoWindow 未按我的需要显示。它正在穿过地图的顶部边缘。

我试图移动中心，但没有结果。

```
 lat += 100 #or lat -=100\. Anyway it does NOT work
 long += 100 # it does work but it's moving the center 
             #of the map to the left or the right and it's not what I need
 mapOptions = {
      zoom: zoom,
      center: new google.maps.LatLng(lat, long),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    } 
```

你的想法？如何使 infoWindow 显示在地图的中心并且不越过它的顶部边缘？

![在此处输入图像描述](../Images/95c50f93d761dec59f70f911a36b186e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:17:37.963

在“infowindow.setContent('content')”之后添加以下行

```
map.setCenter(marker.lat-100, marker.lng-100); 
```

然而，这不是一个真正的解决方案。根据经验，我可以告诉您，您的地图对于标准信息窗口来说非常少。你真的有两个选择来解决这个问题：

1) 增加地图的大小，以便默认信息窗口将显示地图中心的标记或

2）使用自定义信息窗口并使其比默认窗口小很多

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T03:26:34.207

```
map.setCenter(marker.lat, marker.lng- (popup.getheight/2)); 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T20:16:09.947

为了任何绊倒这个的人，迟到的答案。我遇到了同样的问题，并注意到如果我关闭 infoWindow 并单击标记，infoWindow 将打开并平移到正确的位置。`tilesloaded`关键不是触发点击，而是在打开初始 infoWindow 之前等待事件。

```
// Trigger click after tiles are loaded so auto-pan positions infoWindow correctly
google.maps.event.addListenerOnce( map, 'tilesloaded', function () {
    infoWindow.open( map, marker );
} ); 
```

# sql-server - 在 SQL Server 中将线串分解为线段

> ID：12120482
> 
> 赞同：1
> 
> 时间：2012-08-25T08:38:00.987
> 
> 标签：sql-server, sql-server-2008, spatial, sql-server-2012, spatial-query

如何将线串分解为线段？

行字符串如：

```
'LINESTRING(0 0, 2 2, 0 2, 0 5)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:09:40.733

这是我的解决方案！

```
DECLARE @g GEOMETRY
DECLARE @h GEOMETRY

SET @g = geometry::STGeomFromText('LINESTRING(0 0, 2 2, 0 2, 0 5)', 0);
SET @h = geometry::STGeomFromText('LINESTRING(0 0, 3 3, 4 4, 0 4, 4 0, 2 1)', 0)

CREATE TABLE #Lines
(
   ID  int IDENTITY(1,1)PRIMARY KEY CLUSTERED,
   LINE GEOMETRY
)

CREATE TABLE #Segments
(
   ID  int IDENTITY(1,1)PRIMARY KEY CLUSTERED,
   LINE int,
   SEGMENT GEOMETRY
)

INSERT INTO #Lines (LINE)
SELECT @g

INSERT INTO #Lines (LINE)
SELECT @h

DECLARE @MaxNumOfPoints int 
SET @MaxNumOfPoints = (SELECT MAX(LINE.STNumPoints()) FROM #Lines)

SELECT TOP (SELECT @MaxNumOfPoints) IDENTITY(int,1,1) AS n
INTO #Numbers
FROM MASTER..spt_values a

INSERT INTO #Segments (LINE, SEGMENT)
SELECT ID, LINE.STPointN(#Numbers.n).STUnion(LINE.STPointN(#Numbers.n + 1)).STConvexHull()
FROM
 #Lines JOIN #Numbers
 ON #Numbers.n <= LINE.STNumPoints() - 1

SELECT ID, LINE, SEGMENT.ToString() FROM #Segments

DROP TABLE #Segments
DROP TABLE #Lines
DROP TABLE #Numbers 
```

# playframework - 如何将 Play Framework 2.0 应用程序作为 Windows 服务运行？

> ID：12120489
> 
> 赞同：18
> 
> 时间：2012-08-25T08:38:44.697
> 
> 标签：playframework, windows-server-2008, playframework-2.0, windows-server-2008-r2

我有一个 Play Framework 2.0 应用程序，我想在 Windows Server 2008 R2 上部署（生产）。如何让它作为服务运行？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-26T13:12:39.193

这在 Windows 7 上对我有用：

1.  创建文件夹 C:\my_app
2.  去你的游戏！命令行中的应用程序文件夹并键入

    `play dist`

3.  将生成的“something-SNAPSHOT”文件夹复制到 C:\my_app
4.  下载[YAJSW](http://sourceforge.net/projects/yajsw/)并解压到 C:\my_app
5.  在 C:\my_app\something-SNAPSHOT\ 创建一个新文件 start.bat 并用如下命令填充它：

    `java -cp "C:\my_app\something-SNAPSHOT\lib\*" play.core.server.NettyServer`

6.  保存并启动 start.bat。您的 Play 应用程序必须像往常一样启动和工作。看一下服务器的PID。您将在下一步中使用它。

7.  现在使用命令提示符转到 C:\my_app\yajsw\bat 并键入

    `genConfig.bat < PID from previous step >`

8.  您生成了 C:\my_app\yajsw\conf\wrapper.conf。编辑此文件并更改这些参数，如下所示：

    `wrapper.ntservice.name=My App Name
    wrapper.ntservice.displayname=My App Name`

    保存存档。

9.  终止您在 6 中启动的**start.bat脚本。然后，在 C:\my_app\yajsw\bat 中启动**

    `runConsole.bat`

    如果应用程序启动，请执行`Ctrl c`（并回答**y**）以终止批处理文件并继续下一步。

10.  安装服务启动（*以管理员身份运行*）

    `installService.bat`

11.  开始服务启动

    `startService.bat`

现在您可以在 Windows 服务中看到您的“我的应用程序名称”服务。要停止服务，您可以使用`stopService.bat`. 卸载它`uninstallService.bat`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T14:42:51.330

你应该看看这个问题：[Run Java application as a service](https://stackoverflow.com/questions/1406412/run-java-application-as-a-service)

您必须使用该`play dist`命令，然后调整`start`脚本才能在 Windows 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T19:44:57.253

**如果您在第 5 步**中遇到错误，看起来像这样：

`Play server process ID is 1132`

`[info] play - database [default] connected at jdbc:h2:file:db/h2/play`

`[warn] play - Your production database [default] needs evolutions!`

`... bunch of SQL statements in the console ...`

`[warn] play - Run with -DapplyEvolutions.default=true if you want to run them automatically (be careful)`

`Oops, cannot start the server.`

`@6gme0o9k5: Database 'default' needs evolution!`

然后运行这样的命令：

`java -cp "C:\my_app\something-SNAPSHOT\lib\*" -DapplyEvolutions.default=true play.core.server.NettyServer`

米哈伊尔描述的过程中的另外两个项目让我感到困惑：

首先，在**第 9 步**之前，请确保终止您在**第 6 步中启动的****start.bat**脚本。不这样做会导致我在这里发布的悲伤：

 **[将 Play Framework 2.0 应用程序部署为 Windows 服务时，如何修复服务器 Oops 错误？](https://stackoverflow.com/questions/20819628/how-do-i-fix-server-oops-error-when-deploying-play-framework-2-0-application-as)

最后，确保在打开 DOS 命令窗口时**以管理员身份运行。**在进行部署时，如果不是管理员，我无法运行**installService.bat脚本。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T15:42:58.517

`start.bat`我们对此处其他答案中列出的方法有困难。两个主要问题是当服务器决定在补丁星期二重新启动时缺乏引导，以及需要使用 VBS 和其他装饰来防止需要保持命令窗口打开以保持 JVM 活动。

我们已经成功地使用[Commons Daemon](http://commons.apache.org/proper/commons-daemon/)在 Windows 上运行 Play 应用程序。

我们使用`dist`打包应用程序进行分发，然后使用 Commons Daemon 作为 Windows 服务安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-18T17:11:45.420

您可以使用`sbt-native-packager`几乎自动准备安装程序和服务的较新的播放版本

[http://www.scala-sbt.org/sbt-native-packager/formats/windows.html](http://www.scala-sbt.org/sbt-native-packager/formats/windows.html)**

# c - 字符串交换适用于 char ** 但不适用于 char *

> ID：12120491
> 
> 赞同：4
> 
> 时间：2012-08-25T08:39:16.043
> 
> 标签：c, string, function, pointers, swap

在这个程序中，我交换了前 2 个名字

```
#include<stdio.h>
void swap(char **,char **);
main()
{
 char *name[4]={"amol", "robin", "shanu" };
 swap(&name[0],&name[2]);
 printf("%s %s",name[0],name[2]);
}
void swap(char **x,char **y)
 {
 char *temp;
 temp=*x;
 *x=*y;
 *y=temp;
 } 
```

该程序运行完美，但是当我使用`function swap(char *,char *)`它时它不会交换地址，为什么？为什么我必须使用指向指针的指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T08:48:52.750

我假设您了解要交换整数，您将具有类似的功能`swap(int *, int *)`

同样，当您要交换字符串时，即`char *`. 你需要像`swap(char **, char **)`.

在这种情况下，您获取它们的指针并交换它们的内容（否则一旦函数返回，值将不会被交换）。对于整数内容，指针是`int *`，如果是字符串，内容是`char *`指向它的指针`char **`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T08:41:51.970

指针（像所有值一样）按值传递。

如果您使用`swap(char * a,char * b)`并编写`a = tmp;`它，则仅更改局部变量`a`，而不是调用者中的原始变量。

出于同样的原因，这个更简单的示例也无法按预期工作：

```
void change(int x) {
    x = 0; // Only changes the local variable.
}

int main(void) { 
    int x = 0;
    change(x);       // This does not have any effect.
    printf("%d", x); // 0 is printed
    return 0; 
} 
```

[http://ideone.com/u7Prp](http://ideone.com/u7Prp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:54:37.280

`char *name[4]`持有 3 个字符串文字的地址。如果我们想交换，我们必须传递存储字符串文字地址的数组的引用。这意味着我们必须将`name+0`and`name+2`或`&name[0]`and传递`&name[2]`给交换函数。

如果你想交换。您必须接收地址`char **`，然后我们必须更改数组中字符串文字的地址。

如果您收到它`char *`并且如果您尝试更改`temp = x; x = y; y = temp`，那将是对功能的本地更改`swap`。它不会反映在阵列上`name`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-25T09:01:05.127

听起来这就是你要找的东西：

```
#include<stdio.h>
void swap(char *,char *);
main()
{
 char name[4][10]={"amol", "robin", "shanu" };
 swap(name[0],name[2]);
 printf("%s %s",name[0],name[2]);
}
void swap(char *x,char *y)
 {
 char *temp;
 temp=x;
 x=y;
 y=temp;
 } 
```

主要区别在于名称的声明。在您的版本中，您声明了一个指针数组，因此您必须将条目取消引用为 *name[0]。在第二个版本中，它声明了一个“char 数组”或字符串数​​组，每个条目都包含一个字符串，而不是指针，因此您可以将条目取消引用为 name[0]。如果您使用 gdb 并在使用 print 命令时单步执行代码，您将清楚地看到差异。

# jquery - 使用jquery隐藏div

> ID：12120493
> 
> 赞同：0
> 
> 时间：2012-08-25T08:39:32.013
> 
> 标签：jquery

我想隐藏一些div。看看这个[JSFiddle](http://jsfiddle.net/sureshmonster/eBcRP/)。在这里我想在计数为“1”后隐藏。

```
$(".prev").click(function(){
   var current = $('ul li.selected').index(),
    maxIndex = $('ul li').length - 1,
    prev = (current - 1) >  maxIndex ? 0 : (current - 1);

   manageControls(prev);
   setActive(prev);

  }); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:44:15.667

像这样[**的小提琴**](http://jsfiddle.net/eBcRP/1/)？？？

```
if (prev != -1) {
    manageControls(prev);
    setActive(prev);
}else{
    $('.myclass').add('ul li.selected').removeClass('selected');
} 
```

# c# - 如果标题没有数据绑定，如何在 GridView 中更新

> ID：12120494
> 
> 赞同：2
> 
> 时间：2012-08-25T08:39:45.107
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/2e7f2055665ad723f49d260a77c25fc7.png) 我有一个`GridView`, 的标题字段是`GridView`我`ListBox`程序中的项目。因此，每次运行时生成的列数都是动态的。因此，当我单击 中的**更新**时，无论标题字段如何，都必须更新该行中`Gridview`输入的数据。`TextBox`此外，`TextBox`应该验证它只接受整数。

显示的 .cs 代码`GridView`是：

```
protected void DONE4_Click(object sender, EventArgs e)
    {

        DataTable dt = new DataTable();
        DataRow rw = default(DataRow);
        for (int i = 0; i < ListBox1.Items.Count; i++)
        {
            dt.Columns.Add(ListBox1.Items[i].ToString(),System.Type.GetType("System.String"));
        }

        for (int j = 0; j < count; j++)
        {
            rw = dt.NewRow();
            for (int i = 0; i < ListBox1.Items.Count; i++)
            {
                rw[ListBox1.Items[i].ToString()] = " ";
            }
            dt.Rows.Add(rw);
        }
        GridView2.DataSource = dt;
        GridView2.DataBind();
        }
    } 
```

任何人都可以通过更新代码帮助我解决这个问题吗？谢谢..希望问题很清楚。

# javascript - 在 MarkItUp 中清除文本区域？

> ID：12120498
> 
> 赞同：0
> 
> 时间：2012-08-25T08:40:47.723
> 
> 标签：javascript, jquery, markitup

我正在尝试清除我的 MarkItUp 编辑器。到目前为止，我已经弄清楚如何使用 $.markItUp 函数输入文本，但我不知道应该如何清除文本框。我试过只用replaceWith：“”，但我无法使用javascript选择所有文本，以便将其替换为replaceWith。此外，如果我尝试通过在文本区域内设置文本来替换它，文本在文本区域中显示为空白，但在编辑器本身中不显示。有什么帮助吗？

这是我用来插入文本的内容：

```
 $.markItUp({
            openWith:"[quote="+data['username']+";"+postid+"]",
            closeWith:'[/quote]',
            placeHolder: data['content']
        }); 
```

我试过了：

`$("textarea.bbcode-quickreply").text('');`

这将删除元素中的文本，但编辑器不受影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:52:43.327

你没有给出任何示例代码，所以我不得不假设一些事情。

```
<script type="text/javascript">
    $(document).ready(function(e) {
        $("#someID").Click(function(event_parameter) {
            $("#someID").val("");
        });
    });
</script>
<textarea id="someID" name="someName"></textarea> 
```

用户点击后，上面的代码将立即清空文本框。

# javascript - 在 IE 中预览图片上传

> ID：12120499
> 
> 赞同：3
> 
> 时间：2012-08-25T08:40:48.803
> 
> 标签：javascript, asp.net-mvc-3, file-upload

我正在上传图片，我必须在上传之前预览图片（就像在 twitter.com 上实现的显示图片一样）

我写了一些在 chrome 和 Firefox 上运行良好但在 IE（8 或 9）上运行良好的 JS 代码

```
 function PreviewImg(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#previmg').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

<input type="file" name="logofile" class="txtbox" onchange="PreviewImg(this);" />
  <img id="previmg" src="#" /> 
```

我已经在IE中调试了代码。input.files 在 IE 中显示为空，任何人都可以告诉解决方案或任何其他解决方案来实现功能问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T08:47:05.980

这在 IE 上不起作用，因为代码依赖于 IE 不支持的 HTML5 File API。它将从 IE10 开始支持它。因此，如果您需要支持低于 10 的 IE，您可以使用一些现有的 AJAX 上传组件（Uploadify、Plupload、Valums AJAX Upload、Bleuimp...）将文件上传到服务器，在服务器上生成并存储缩略图并使用 JSON 将保存图像的 url 发送到客户端，以便它可以使用`<img>`标签显示它。实际上，由于 IE 支持[Data URI Scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)，您不需要将上传的文件存储到服务器以生成预览。您可以直接从您的 Preview 控制器操作返回生成的缩略图图像，格式为 Data URI Scheme，以便您可以在客户端上显示它。

如果您没有时间和资源来实现此功能，另一种解决方案是简单地告诉您的用户，如果他们想要获得图像的实时预览，他们应该考虑使用不同的网络浏览器，因为您的网站不支持IE为此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T08:57:15.000

```
 <script type="text/javascript">
            function loadname(img, previewName) {
                var isIE = false;
                if (jQuery.browser.msie) {
                    isIE = true;
                }
                var path = img.value;
                var ext = path.substring(path.lastIndexOf('.') + 1).toLowerCase();
                if (ext = "gif" || "jpeg" || "jpg" || "png") {
                    if (isIE) {
                      document.getElementById(previewName.id.toString()).src = path;
                        return;
                    } else {
                        if (img.files[0]) {
                            var reader = new FileReader();
                            reader.onload = function (e) {
                                $('#' + previewName).attr('src', e.target.result);
                            }
                            reader.readAsDataURL(img.files[0]);
                        }
                    }
                } else {
                    alert("You must select a valid image file!");
                }
            }

            var loadImageFile = (function () {
                if (window.FileReader) {
                    var oPreviewImg = null, oFReader = new window.FileReader(),
            rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

                    oFReader.onload = function (oFREvent) {
                        if (!oPreviewImg) {
                            var newPreview = document.getElementById("imagePreview");
                            oPreviewImg = new Image();
                            oPreviewImg.style.width = (newPreview.offsetWidth).toString() + "px";
                            oPreviewImg.style.height = (newPreview.offsetHeight).toString() + "px";
                            newPreview.appendChild(oPreviewImg);
                        }
                        oPreviewImg.src = oFREvent.target.result;
                    };

                    return function () {
                        var aFiles = document.getElementById("imageInput").files;
                        if (aFiles.length === 0) { return; }
                        if (!rFilter.test(aFiles[0].type)) { alert("You must select a valid image file!"); return; }
                        oFReader.readAsDataURL(aFiles[0]);
                    }

                }
                if (navigator.appName === "Microsoft Internet Explorer") {
                    return function () {
                        document.getElementById("imagePreview").filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = document.getElementById("imageInput").value;

                    }
                }
            })();

    </script>
```

```
 <style>
        #imagePreview
        {
            width: 260px;
            height: 240px;
            float: right;
            filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale);
        }
    </style>
```

```
<div id="imagePreview"></div>
    <p><input id="imageInput" type="file" name="myPhoto" onchange="loadImageFile();"><br><input type="submit" value="Send" /></p>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:40:28.100

但使用 IE

```
document.getElementById('previmg').src = "file:///" + input.value; 
```

# blackberry - 在黑莓中将位图图像旋转任意角度

> ID：12120501
> 
> 赞同：1
> 
> 时间：2012-08-25T08:40:58.427
> 
> 标签：blackberry, bitmap

我对黑莓有点陌生。我有一个图像，我需要根据用户的输入旋转到一定程度。我尝试过搜索，但似乎找不到任何东西。任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:06:12.427

有一个[J2ME 军刀库](http://www.j2mearmyknife.com/live-demo/)，检查一下。

它也包含旋转功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T04:43:11.007

这是 Blackberry 知识库文章的一部分。将您的位图和角度传递给此函数以获取旋转位图。

```
public static Bitmap rotate(Bitmap oldImage) throws Exception 
{
    int w = oldImage.getWidth();
    int h = oldImage.getHeight();
    int d = Math.max(w, h);
    int amountPxAdded = 0;
    if (w > h) {
        amountPxAdded = w - h;
    }
    Bitmap oldBitmapSquared = new Bitmap(d, d);
    int[] data = new int[w * h];
    oldImage.getARGB(data, 0, w, 0, 0, w, h);
    oldBitmapSquared.setARGB(data, 0, w, 0, 0, w, h);
    Bitmap finalRes = new Bitmap(h, w);
    int fW = finalRes.getWidth();
    int fH = finalRes.getHeight();
    oldImage = null;
    Bitmap rotated = rotateSquareImage(oldBitmapSquared, <Angle>);
    oldBitmapSquared = null;
    data = new int[fW * fH];
    rotated.getARGB(data, 0, fW, amountPxAdded, 0, fW, fH);
    rotated = null;
    finalRes.setARGB(data, 0, fW, 0, 0, fW, fH);
    return finalRes;
}

private static Bitmap rotateSquareImage(Bitmap oldB, int angle) throws Exception {
    int w = oldB.getWidth();
    int h = oldB.getHeight();
    Bitmap newB = new Bitmap(w, h);
    int[] oldD = new int[w * h];
    int[] newD = new int[w * h];
    oldB.getARGB(oldD, 0, w, 0, 0, w, h);
    int[][] old2d = new int[h][w];
    int[] js;
    int old2dLen = old2d.length;
    int jsLen;
    for (int i = 0; i < old2dLen; i++) {
        js = old2d[i];
        jsLen = js.length;
        for (int j = 0; j < jsLen; j++) {
            js[j] = oldD[i * w + j];
        }
    }
    int[][] rotated = new int[h][w];
    for (int i = 0; i < h; ++i) {
        for (int j = 0; j < w; ++j) {
            rotated[i][j] = old2d[h - j - 1][i];
        }
    }
    old2d = null;
    for (int i = 0; i < h; ++i) {
        for (int j = 0; j < w; ++j) {
            newD[i * w + j] = rotated[i][j];
        }
    }
    rotated = null;
    newB.setARGB(newD, 0, w, 0, 0, w, h);
    return newB;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:22:05.280

按着这些次序：

> 从此链接下载**zip文件：** [BitmapRotate](http://supportforums.blackberry.com/t5/Java-Development/Rotate-and-scale-bitmaps/ta-p/492524) at down side。
> 
> 从中提取**ImageManipulator.java**并将其添加到您的项目中；
> 
> 并使用此链接中的代码：[RotatingBitmap on Blackberry](http://metova.com/display/PUBTECH/Scaling+and+rotating+bitmaps+on+BlackBerry)

我认为这对您有帮助；

或者

使用以下 BitmapRotate.zip 代码从该链接旋转图像：

[黑莓中的位图旋转](http://alishaik001.blogspot.in/2012/08/blackberry-rotate-image-in-any-degree.html)

# model-view-controller - 哪些 JavaScript 框架和库最适合跨平台 MMO 游戏开发？

> ID：12120505
> 
> 赞同：1
> 
> 时间：2012-08-25T08:41:33.153
> 
> 标签：model-view-controller, node.js, backbone.js, redis, mustache

我玩过很多 MMORTS 游戏，例如 Evony、Dragons of Atlantis 和 Kingdoms of Camelot。它们都有一些很棒的功能和很多不那么大的问题。只是为了我自己的兴趣，我想尝试写一些类似的东西。我什至不打算尝试与大男孩竞争，但我想以专业和可扩展的方式编写它，就好像它打算用于最终的商业发布一样。

这就是导致问题的背景。我一直在研究适合这种游戏风格的各种框架和库。然而，有太多的选择让我现在头晕目眩。我想就其他人认为最好的选择获得一些意见。我想尝试将其编写为跨平台/跨浏览器的 web 应用程序，以后可以使用 MoSync 之类的东西将其转换为“本机”应用程序。我想坚持使用 HTML5、CSS3 和 JavaScript 技术。

我确定我想要的一些东西是：

*   它必须是可扩展的（即能够同时处理大量用户）
*   我更喜欢使用某种 MVC 框架（我习惯于使用 Joomla MVC 并且一直在考虑为此方面的骨干.js）
*   我不是 JavaScript 专家，但很可能希望使用 jQuery（主要与客户端视图有关）
*   我喜欢模板，但完全不知道要使用哪个模板系统（即小胡子、车把、灰尘等）。我认为我在这方面的选择最终将归结为我最终选择的框架。
*   聊天是 MMORTS 游戏的一个重要方面，我正在考虑为此使用 Node.JS 和 Socket.io（或 NowJS）。
*   我也一直在寻找 Redis 的键值存储。
*   在这个阶段，我已经放弃了使用 jQuery Mobile 的想法，因为初始测试引起的头痛比他们解决的要多。

所以我的领跑者是用于服务器端 JavaScript 的 Node.JS（可能使用 NowJS 来实现聊天）、用于键值存储的 Redis、用于 MVC 框架的主干.js、用于模板的 mustache（或者可能是 LinkedIns 的灰尘叉）和 Jquery课程。

我将非常感谢任何帮助我最终决定使用哪些框架和库的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:48:42.873

这不是一个框架，但您可能会发现 Mozilla 的[Browser Quest](http://hacks.mozilla.org/2012/03/browserquest/)实现很有趣。整个东西都是开源的，他们使用 HTML5 Canvas 和 Node.js（socket.io 是这里的大玩家），它完全是跨平台的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T01:52:51.923

我正在与一个团队合作解决这个问题。我们的研究和经验表明，Node.js 后端*绝对*是一个好主意。与 Node.js 一起使用什么？我们提出了两种很好的可能性：

1.  使用[websocket进行通信，使用](http://en.wikipedia.org/wiki/WebSocket)[Phaser](http://www.photonstorm.com/phaser)等前端引擎进行渲染。
2.  使用[Isogenic 游戏引擎](http://www.isogenicengine.com/)处理一切。

（[http://html5gameengine.com/](http://html5gameengine.com/)可以帮助您比较顶级 HTML5 游戏引擎的功能集，包括我刚刚提到的那些。）

# ruby-on-rails - 通过关联嵌套的 has_many 不起作用

> ID：12120506
> 
> 赞同：1
> 
> 时间：2012-08-25T08:41:38.243
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2, has-many-through

运行 Rails 3.2.1。如文档（http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association）所示，通过关联尝试应该是简单的嵌套 has_many：

```
class Company < ActiveRecord::Base
  has_many :locations, :dependent => :destroy
  has_many :assets,  :through => :locations
  has_many :components,  :through => :assets
end

class Location < ActiveRecord::Base
  belongs_to :company
  has_many :assets
  has_many :components, :through => :assets
end

class Asset < ActiveRecord::Base
  belongs_to :location
  has_many :components
end

class Component < ActiveRecord::Base
  belongs_to :asset
end 
```

在控制台中`Company.find(2)`工作正常，`Company.find(2).locations`但不是`Company.find(2).assets`or `Company.find(2).components`。我得到：

```
1.9.3p0 :071 > Company.find(2).assets
  Company Load (0.8ms)  SELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 ORDER BY name ASC LIMIT 1  [["id", 2]]
NoMethodError: undefined method `assets' for #<Company:0x007f939d714318> 
```

我似乎在这里遗漏了一些东西。我嵌套了一层更深，但根据文档，这应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T04:59:11.530

哇……快把我逼疯了。希望我能帮助别人。搜索控制台错误消息，只需要重新加载控制台... D'oh！

# haskell - 重载数值运算的模糊类型和默认值

> ID：12120507
> 
> 赞同：4
> 
> 时间：2012-08-25T08:41:44.717
> 
> 标签：haskell

```
import Data.Dynamic

default(Integer,Double)

a :: Num a => a
a = 5

-- show :: Show a => a -> String
-- toDyn :: Typeable a => a -> Dynamic

main :: IO ()
-- main = print $ show a -- *** THIS LINE WORKS WELL
main = print $ toDyn a   -- *** THIS LINE LEADS TO AN AMBIGUOUS TYPE ERROR 
```

我不明白为什么第一个“主要”版本有效，而不是第二个。有人可以帮助我吗？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:30:02.150

来自[Haskell 报告](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)：

> 在发现不明确类型的情况下，不明确类型变量*v*在以下情况下是可默认的：
> 
> *   *v仅出现在**C v*形式的约束中，其中*C*是一个类，并且
> *   这些类中至少有一个是数字类，（即，`Num`或 的子类`Num)`，并且
> *   **所有这些类都在 Prelude 或标准库中定义**

您的示例失败，因为与`Show`,`Typeable`不是第三点中指定的类之一，因此不执行默认设置。

# content-management-system - Composite C1中.master和.xml之间的模板有什么区别？

> ID：12120513
> 
> 赞同：0
> 
> 时间：2012-08-25T08:43:02.110
> 
> 标签：content-management-system, c1-cms

我正在使用 Composite C1 来构建我的项目，使用 ASP.NET 来编写模板。参考 Starter 示例项目，已经有几个模板，例如，“3 columns.master”，“3 columns.xml”，有些模板没有 .xml 文件，例如“Common.master”，“NavigationColumn.master”，我自己创建的模板文件也没有 .master 文件。

我很困惑，有人可以向我解释.master和.xml之间的模板有什么区别吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:56:43.340

.xml 文件是默认的 C1 模板文件。当您使用基于 Master 的站点时，您应该创建与在 Layout 透视图中找到的 C1 .xml 模板同名的母版页 (.master)。C1 将使用母版页而不是同名的基于 XML 的 C1 模板。如果没有匹配的母版页，C1 将继续使用 XML 模板。

有关更多详细信息，请阅读本文 - [http://docs.composite.net/ASP-NET/Web-Forms/Web-Form-Master-Pages](http://docs.composite.net/ASP-NET/Web-Forms/Web-Form-Master-Pages)

# javascript - 如何在固定高度的div中垂直换行

> ID：12120516
> 
> 赞同：2
> 
> 时间：2012-08-25T08:43:23.063
> 
> 标签：javascript, html, css

注意：我不认为我已经用最好的方式表达了这个问题。如果有人对我要问的问题有更好的措辞，请随时编辑标题。

* * *

假设我们有一个具有固定高度（和宽度）的 div。

一旦 div 的高度增加，就会出现一个滚动条。我希望文本进入下一个“列”，而不是滚动条。

例子：

```
A1          A1 A6
A2          A2 A7
A3          A3 A8
A4    =>    A4 A9 
A5          A5
- - - - - - - - - - - <-- where our fixed height is set.
A6          
A7          
A8          
A9 
```

感谢我们（我认为），文本实际上是一个无序列表，如下所示。

```
<ul>
 <li><a href="">A1</a></li>
 <li><a href="">A2</a></li>
 ...
</ul> 
```

所以我基本上是在制作一个带有文本的轮播，每列大约有 16 行。有没有一种直接的方法可以使文本在其可用高度完成后向右移动，或者我是否必须使用 javascript 解析列表，将其分解为 div，然后将它们全部浮动？我将使用基于文本第一个字母（A、B、C..）的锚点来向左/向右滚动。

任何帮助将不胜感激。谢谢！

编辑：是否有适用于 IE8+（对于 IE6/7 可能会优雅降级）、Safari、Chrome 和 Firefox 的东西？我总是忘记在问题中添加各种浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:52:00.940

这可以很容易地使用**CSS3**列来完成。这是一个示例，HTML：

```
<ul id = "limheight">
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
 <li><a href="">Glee is great</a></li>
</ul> 
```

CSS：

```
#limheight {
    height: 300px; /*your fixed height*/
    -webkit-column-count: 3;
       -moz-column-count: 3;
            column-count: 3; /*3 in those rules is just placeholder -- can be anything*/
}
#limheight li {
    display: inline-block; /*necessary*/
} 
```

还有一个小演示：[小链接](http://jsfiddle.net/r9TaM/1/)。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:52:45.150

不确定我是否理解正确，但 CSS 有一个列属性，您可能会发现它很有用。在此处阅读更多信息：

[http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)

注意：在 <= IE9 中不起作用，所以要小心。

# php - 尝试将任何屏幕分辨率的弹出框居中

> ID：12120519
> 
> 赞同：0
> 
> 时间：2012-08-25T08:44:05.370
> 
> 标签：php, joomla2.5

对于任何屏幕分辨率，如何使弹出框出现在屏幕中央？弹出框使用 joomla 弹出框插件（内容简单弹出）显示。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:57:54.970

你能提供一个链接到你正在实施这个的网站吗？如果它的弹出窗口你也可以使用它。

```
function PopupCenter(pageURL, title,w,h) {
        var left = (screen.width/2)-(w/2);
        var top = (screen.height/2)-(h/2);
        var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T05:35:16.437

我已经使用 jQuery 将任何元素制作为弹出框，您可以访问我的 git hub 存储库以获取详细信息[完整的弹出框示例](https://github.com/vikas4488/popUpBox/blob/master/popupbox.html) ，或者您也可以使用我的 ripo 作为 cdn，只需复制此[原始 git 并粘贴到您的脚本标签中](https://raw.githack.com/vikas4488/popUpBox/master/popupbox.js)

# python - 如何在 ubuntu 10.04 中卸载 python 2.6.5 并安装最新版本（2.7.3）

> ID：12120521
> 
> 赞同：2
> 
> 时间：2012-08-25T08:44:12.120
> 
> 标签：python, ubuntu

我想卸载 python`2.6.5`并安装 python`2.7.3` 但上面有很多其他软件中继。

那么我该如何升级python`ubuntu10.04`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:48:30.637

我使用[这个](http://eli.thegreenplace.net/2011/10/10/installing-python-2-7-on-ubuntu/)链接做同样的事情（即安装部分），这样做之后默认的python版本将更改为`2.7.3`.

另一个有用的链接[How do I install python 2.7.2 on 10.04?](https://askubuntu.com/questions/101591/how-do-i-install-python-2-7-2-on-10-04) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:47:02.063

为什么要卸载旧的？你可以安装 python 2.7 并创建一个指向它的 virtualenv：[使用不同的 Python 版本和 virtualenv](https://stackoverflow.com/questions/1534210/use-different-python-version-with-virtualenv) 除此之外，如果你不想升级整个系统，升级它是相当冒险的。

# android - Android：尝试使用 http post/get 登录网页

> ID：12120524
> 
> 赞同：1
> 
> 时间：2012-08-25T08:44:19.950
> 
> 标签：android

我正在尝试制作一个应用程序，以便每次我推送它时，它都会登录到网页并在那里解析一些信息。问题是我无法使登录正常工作。这是到目前为止的代码：

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
       HttpPost httpPost = new HttpPost("http://staff.ezshift.co.il/appfilesv3/loginHE-il.aspx?c=Intel");
       HttpGet getContacts = new HttpGet("http://staff.ezshift.co.il/appfilesv3/loginHE-il.aspx?c=Intel");          
       HttpResponse response = null;
       httpPost.setHeader("Host","staff.ezshift.co.il");
       httpPost.setHeader("Connection","keep-alive");
       httpPost.setHeader("Content-Length","391");
       httpPost.setHeader("Cache-Control","max-age=0");
       httpPost.setHeader("Origin","http://staff.ezshift.co.il");
       httpPost.setHeader("Keep-Alive","115");
       httpPost.setHeader("Proxy-Connection","keep-alive");
       httpPost.setHeader("User-Agent","Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.79 Safari/537.1");
       httpPost.setHeader("Content-Type","application/x-www-form-urlencoded"); //maybe the cause or 500 when i do get first
       httpPost.setHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8, value");
       httpPost.setHeader("Referer","http://staff.ezshift.co.il/appfilesV3/loginHE-il.aspx");
       httpPost.setHeader("Accept-Encoding","gzip,deflate,sdch");
       httpPost.setHeader("Accept-Language","he-IL,he;q=0.8,en-US;q=0.6,en;q=0.4");
       httpPost.setHeader("Accept-Charset","windows-1255,utf-8;q=0.7,*;q=0.3");
       httpPost.setHeader("Cookie","__utma=215140181.649912737.1328214019.1334209515.1334386068.42; __utmz=215140181.1329665293.8.2.utmcsr=cmcc.intel.com|utmccn=(referral)|utmcmd=referral|utmcct=/; ASP.NET_SessionId=vfeqxcds4pf5wkaqrdggk2rc; ASPSESSIONIDCCCCBBBQ=BBHDANFDIKPKIMEEIEIKLLOL; __utma=124032085.1089828467.1345030012.1345764967.1345783785.15;  __utmb=124032085.1.10.1345783785; __utmc=124032085; __utmz=124032085.1345030012.1.1.utmcsr= (direct)|utmccn=(direct)|utmcmd=(none)");
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(6);
       nameValuePairs.add(new BasicNameValuePair("__VIEWSTATE", "/FwEPDwUJODI5ODQ3NDUwZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAgUPY2hrU2F2ZVBhc3N3b3JkBQxJbWFnZUJ1dHRvbjFMNmoQnT0M/y17bSJbfWm6bATcQjZ2rP5yHUSXIqIs6A=="));
       nameValuePairs.add(new BasicNameValuePair("__EVENTVALIDATION", "/FwEWBgLb/I3LDAKM+5bqDwK1qbSRCwLer5GzDwK2q+7XBwLSwpnTCLBEbw+HDaExaRbSqYX7LbeoaRVs7AKaXw5Rbn6YQ1Ti"));
       nameValuePairs.add(new BasicNameValuePair("txtId", Myid));
       nameValuePairs.add(new BasicNameValuePair("txtPassword", MyPassword));
       nameValuePairs.add(new BasicNameValuePair("ImageButton1.x", "0"));
       nameValuePairs.add(new BasicNameValuePair("ImageButton1.y", "0"));
       String siteCode = null;
       try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        try {
        response = httpClient.execute(httpPost);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        textPushed.setText(e.toString());

    }
       int rep = response.getStatusLine().getStatusCode();
       if (response.getStatusLine().getStatusCode() <= 302) {

           getContacts = new HttpGet("http://staff.ezshift.co.il/appfilesV3/Entrance.aspx");
           try {
            response = httpClient.execute(getContacts);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

问题是我一直在 `response.getStatusLine().getStatusCode() = 500` 关注我登录时它通过了哪些标题，这就是我所看到的：

```
Request URL:http://staff.ezshift.co.il/appfilesV3/loginHE-il.aspx?bLogo=True&bTopImage=False&c=intel
Request Method:POST
Status Code:302 Found
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:windows-1255,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:he-IL,he;q=0.8,en-US;q=0.6,en;q=0.4
Cache-Control:max-age=0
Connection:keep-alive
Content-Length:365
Content-Type:application/x-www-form-urlencoded
Cookie:__utma=215140181.649912737.1328214019.1334209515.1334386068.42;
__utmz=215140181.1329665293.8.2.utmcsr=cmcc.intel.com|utmccn=    (referral)|utmcmd=referral|utmcct=/; ASP.NET_SessionId=vfeqxcds4pf5wkaqrdggk2rc;     ASPSESSIONIDCCCCBBBQ=BBHDANFDIKPKIMEEIEIKLLOL;     __utma=124032085.1089828467.1345030012.1345824347.1345827099.19;     __utmb=124032085.2.10.1345827099; __utmc=124032085; __utmz=124032085.1345030012.1.1.utmcsr=    (direct)|utmccn=(direct)|utmcmd=(none)
Host:staff.ezshift.co.il
Origin:http://staff.ezshift.co.il
Referer:http://staff.ezshift.co.il/appfilesV3/loginHE-il.aspx?   bLogo=True&bTopImage=False&c=intel
 User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko)     Chrome/21.0.1180.83 Safari/537.1
Query String Parametersview URL encoded
bLogo:True
bTopImage:False
c:intel
Form Dataview URL encoded
__VIEWSTATE:/wEPDwUJODI5ODQ3NDUwZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAgUPY2hrU2F2  ZVBhc3N3b3JkBQxJbWFnZUJ1dHRvbjFMNmoQnT0M/y17bSJbfWm6bATcQjZ2rP5yHUSXIqIs6A==
   __EVENTVALIDATION:/wEWBQLb/I3LDAKM+5bqDwK1qbSRCwK2q+7XBwLSwpnTCCXh+wP+hEsOO7tFqG7dYMq98gP9doLDEPj9RGtONL81
txtId:Myid
txtPassword:MyPassword
ImageButton1.x:49
ImageButton1.y:26
Response Headersview source
Cache-Control:private
Content-Length:142
Content-Type:text/html; charset=utf-8
Date:Fri, 24 Aug 2012 16:51:58 GMT
Location:/appfilesV3/Entrance.aspx
Set-Cookie:UserInfo=; expires=Thu, 23-Aug-2012 16:51:58 GMT; path=/
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET 
```

我错过了什么？我究竟做错了什么？

谢谢。

# java - Java 客户端/服务器应用程序

> ID：12120525
> 
> 赞同：3
> 
> 时间：2012-08-25T08:44:35.753
> 
> 标签：java, sockets, client-server

我有一个多线程服务器，正在等待套接字连接。

第一次交换消息的类型总是相同的，客户端发送一个带有身份验证详细信息（userid/pwd）的对象，服务器对其进行检查并在身份验证是否通过时回复服务器。

在第一次消息交换之后，客户端将发送一些请求，对应于服务器能够执行的各种任务。我如何为这些异类请求建模？特别是我的问题是关于使用 InputObjecStream/OutputObjectStream 在客户端和服务器之间发送的对象类型

我有两个想法：

1.  使用“通用消息”对象，具有 2 个属性：任务标识符和没有泛型的 HashMap，能够携带执行任务所需的各种类型的参数。

2.  每种类型的任务都有一个对象，这个解决方案“更干净”，但是我不知道如何让服务器了解接收到的消息的类型，我想到了从客户端接收到的消息的一系列对象转换到每个可能的“特定任务消息”，忽略许多 CastException。这听起来很糟糕，有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:53:13.903

为什么不把这两个想法结合起来

从服务器可以转换的通用级别接口开始，以确定它应该做什么或现在做出反应。

随着对象被传递给负责处理请求的处理程序，可以进一步转换对象（基于更深层次的接口实现）

恕我直言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:54:13.177

第一种方法非常通用，但很难维护。一段时间后，您会注意到您不再记得该通用地图中应该包含哪种对象。您必须保持字典同步。

第二种方法要好得多。本质上，您会收到一个`Request`带有各种子类的抽象对象。基类可以保存一些一般信息。通常你会使用多态性并在每个子类中实现动作，覆盖类中的抽象方法`Request`。但是你不能因为请求对象必须持有服务器端逻辑。

您可以在这里做的最好的事情是[访问者](/questions/tagged/visitor "显示标记为“访客”的问题") [设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)。有了它，以稍微模糊代码的代价，您将获得非常通用和安全的设计。`instanceof`一段时间后往往会变得丑陋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:08:49.867

您可以做的是使用`XML`消息进行通信。您可以在第一个字节中预先指示`XML`消息应该映射到哪个对象，并在接收到消息时，只需检查这些字节找到指示符，然后使用其余字节序列将字节编组到 XML 对象（使用`JAXB`或`SimpleXML`或`DOM`或任何其他xml 解析器）XML 非常冗长，您可以在此处使用它来封装您的消息。

# php - 谷歌缓存重新验证

> ID：12120529
> 
> 赞同：1
> 
> 时间：2012-08-25T08:45:24.870
> 
> 标签：php, google-chrome, caching, redirect

我在使用谷歌浏览器时遇到了问题：如果我调用一个地址，谷歌会两次连接到网络服务器——但只是有时。我认为这与缓存控制有关。每次发生这种情况时，都不会在请求中设置标头 HTTP_CACHE_CONTROL。否则设置为 max-age=0。我不希望 Chrome 两次连接到我的脚本 - 你知道解决方案吗？

我希望你能帮帮我！谢谢你！

**编辑：** 也许重要的是要知道：在那个脚本中有一个 301 重定向。

**编辑 2：** 我禁用了“HTTP_CACHE_CONTROL max-age=0”——同样的问题。

此外：如果我调用“http://localhost/admin?foo=bar”，则第一个请求中没有 GET 变量“foo” - 但在第二个请求中有。

**编辑 3：** 如果我使用 javascript 而不是 location-header 进行重定向，一切正常。

**编辑 4：** 您可以对其进行测试：下载[并](http://www.vitonordloh.de/chrome-test.zip)解压缩。把它放在文件夹“www/chrome-test/”中，这样​​就可以调用“http://localhost/chrome-test/redirect/”了。

每次调用“http://localhost/chrome-test/redirect/”时，您都会被重定向到“http://localhost/chrome-test/example/”。显示由重定向脚本生成的消息。我使用 Sessions 来“传输”这条消息。然后再次调用“http://localhost/chrome-test/redirect/” **（使用地址栏并按回车！！！）**。重复这最后一步几次（可能 20 次）。有时会显示两次消息“这是一条消息...” - 因此重定向脚本会运行两次。但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T00:26:13.903

您的页面图标是否出现在 Chrome 浏览器中？如果没有，Chrome 会查找 favicon.ico，如果您的网站返回 404 页面并使用相同的代码，则 chrome 会执行两次。

```
<link rel="icon" href="/favicon.ico" sizes="32x32" type="image/png" /> 
```

# python - 通过控制台输入密码

> ID：12120538
> 
> 赞同：-5
> 
> 时间：2012-08-25T08:47:13.357
> 
> 标签：python

我希望有人制作一个程序，要求用户输入密码，当用户在密码字段中输入密码时，密码不会以文本或数字显示。就像 linux 内核一样。（当你输入 sudo bash 或 sudo su 时）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T08:49:36.260

看

[http://docs.python.org/library/getpass.html](http://docs.python.org/library/getpass.html)

```
import getpass
passwd = getpass.getpass() 
```

# python - 使用 PostgreSQL 数据库示例进行 web.py 用户身份验证

> ID：12120539
> 
> 赞同：0
> 
> 时间：2012-08-25T08:47:21.277
> 
> 标签：python, session, login, web.py

我正在尝试从 web.py 食谱中复制并使用示例“使用 PostgreSQL 数据库进行用户身份验证”。我无法弄清楚为什么我会收到以下错误。

1.  在 /login 'ThreadedDict' 对象没有属性 'login'

2.  在 /login 'ThreadedDict' 对象没有属性 'privilege'

这是第二个错误的错误输出到终端。（第一个几乎相同）

```
回溯（最近一次通话最后）：
  文件“/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/application.py”，第 239 行，正在进行中
    返回 self.handle()
  文件“/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/application.py”，第 230 行，在句柄中
    返回 self._delegate(fn, self.fvars, args)
  _delegate 中的文件“/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/application.py”，第 420 行
    返回句柄类（cls）
  文件“/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/application.py”，第 396 行，在 handle_class
    返回调用(*args)
  文件“/home/erik/Dropbox/Python/Web.py/Code.py”，第 44 行，在 GET
    渲染 = create_render(session.privilege)
  文件“/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/session.py”，第 71 行，在 __getattr__
    返回 getattr(self._data, name)
AttributeError：“ThreadedDict”对象没有属性“特权”

127.0.0.1:36420 - - [25/Aug/2012 01:12:38] “HTTP/1.1 GET /login” - 500 内部服务器错误

```

这是我的 code.py 文件。几乎是从食谱上剪下来的。我尝试将所有类和 def 放在主代码之上。如另一篇文章中所述，我还尝试使用 sudo 启动 python。

```
导入网页

班级指数：
    定义获取（自我）：
        todos = db.select('todo')
        返回 render.index(todos)

类添加：
    def POST（自我）：
        i = web.input()
        n = db.insert('todo', title=i.title)
        raise web.seeother('/')

定义记录（）：
    return False #我添加这个来测试错误 #1，现在我得到错误 #2
    #if session.login==1：
    # 返回真
    ＃别的：
    # 返回错误

def create_render（特权）：
    如果记录（）：
        如果特权 == 0：
            渲染 = web.template.render('模板/阅读器')
        elif 特权 == 1：
            渲染 = web.template.render('模板/用户')
        elif 特权 == 2：
            渲染 = web.template.render('模板/管理员')
        别的：
            渲染 = web.template.render('templates/communs')
    别的：
        渲染 = web.template.render('templates/communs')
    返回渲染

班级登录：

    定义获取（自我）：
        如果记录（）：
            渲染 = create_render(session.privilege)
            return '%s' % render.login_double()
        别的：
            # 这是错误#2的地方
            渲染 = create_render(session.privilege)
            return '%s' % render.login()

    def POST（自我）：
        名称，密码 = web.input().name，web.input().passwd
        ident = db.select('users', where='name=$name', vars=locals())[0]
        尝试：
            如果 hashlib.sha1("sAlT754-"+passwd).hexdigest() == ident['pass']:
                session.login = 1
                session.privilege = ident['特权']
                渲染 = create_render(session.privilege)
                返回 render.login_ok()
            别的：
                session.login = 0
                session.privilege = 0
                渲染 = create_render(session.privilege)
                返回 render.login_error()
        除了：
            session.login = 0
            session.privilege = 0
            渲染 = create_render(session.privilege)
            返回 render.login_error()

类重置：

    定义获取（自我）：
        session.login = 0
        session.kill()
        渲染 = create_render(session.privilege)
        返回render.logout()

#web.config.debug = 假

render = web.template.render('templates/', base='layout')
网址 = (
    '/'， '指数'，
    '/添加', '添加',
    '/登录', '登录',
    '/重置', '重置'
    )

app = web.application(urls, globals())
db = web.database(dbn='postgres', user='hdsfgsdfgsd', pw='dfgsdfgsdfg', db='postgres', host='fdfgdfgd.com')

存储 = web.session.DiskStore('会话')

# 太我了，这似乎被忽略了，至少是“初始化器”部分
session = web.session.Session(app, store, initializer={'login': 0, 'privilege': 0})

如果 __name__ == "__main__": app.run()

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:32:08.997

好的，我能够弄清楚我做错了什么。全部新手资料和学习过程的所有部分。这段代码现在可以正常工作，而且大部分时间都很好。我坚持的部分现在正在工作。在代码中查看我的评论

谢谢

```
导入网页

web.config.debug = 假

render = web.template.render('templates/', base='layout')
网址 = (
    '/'， '指数'，
    '/添加', '添加',
    '/登录', '登录',
    '/重置', '重置'
    )

app = web.application(urls, globals())
db = web.database（废话，废话，废话）

存储 = web.session.DiskStore('会话')
session = web.session.Session(app, store, initializer={'login': 0, 'privilege': 0})

班级指数：
    定义获取（自我）：
        todos = db.select('todo')
        返回 render.index(todos)

类添加：
    def POST（自我）：
        i = web.input()
        n = db.insert('todo', title=i.title)
        raise web.seeother('/')

定义记录（）：
    如果 session.get('login', False):
        返回真
    别的：
        返回假

def create_render（特权）：
    如果记录（）：
        如果特权 == 0：
            渲染 = web.template.render('模板/阅读器')
        elif 特权 == 1：
            渲染 = web.template.render('模板/用户')
        elif 特权 == 2：
            渲染 = web.template.render('模板/管理员')
        别的：
            渲染 = web.template.render('templates/communs')
    别的：
                ## 这行是关键，我没有 communs 文件夹，因此返回了一个不可用的对象
        #render = web.template.render('templates/communs') #示例中的原始代码

        render = web.template.render('templates/', base='layout')
    返回渲染

班级登录：

    定义获取（自我）：
        如果记录（）：
                        ## 使用 session.get('something') 代替 session.something 在不退出时不会爆炸
            渲染 = create_render(session.get('privilege'))
            return '%s' % render.login_double()
        别的：
            渲染 = create_render(session.get('privilege'))
            return '%s' % render.login()

    def POST（自我）：
        名称，密码 = web.input().name，web.input().passwd
        ident = db.select('users', where='name=$name', vars=locals())[0]
        尝试：
            如果 hashlib.sha1("sAlT754-"+passwd).hexdigest() == ident['pass']:
                session.login = 1
                session.privilege = ident['特权']
                渲染 = create_render(session.get('privilege'))
                返回 render.login_ok()
            别的：
                session.login = 0
                session.privilege = 0
                渲染 = create_render(session.get('privilege'))
                返回 render.login_error()
        除了：
            session.login = 0
            session.privilege = 0
            渲染 = create_render(session.get('privilege'))
            返回 render.login_error()

类重置：

    定义获取（自我）：
        session.login = 0
        session.kill()
        渲染 = create_render(session.get('privilege'))
        返回render.logout()

如果 __name__ == "__main__": app.run()

```

# javascript - jQuery 删除/克隆

> ID：12120540
> 
> 赞同：0
> 
> 时间：2012-08-25T08:47:23.630
> 
> 标签：javascript, jquery, html, clone, removeclass

```
test 123<br>
    test <span class="underline" id="1" onclick="test1(this);">hez
    <ul class="spellCheck_suggest">
        <li data-wordid="1" onclick="test(this);">heyerdahl</li>
        <li data-wordid="1" onclick="test(this);">heywood</li>
        <li data-wordid="1" onclick="test(this);">hezekiah</li>
        <li data-wordid="1" onclick="test(this);">hf</li>
        <li data-wordid="1" onclick="test(this);">hg</li>
        <li data-wordid="1" onclick="test(this);"><font color="red">hez</font></li>
    </ul>
    </span> 
```

以上是我的一个 DIV 标签中的 HTML。

目前我做了以下代码，效果很好......

```
$(".spellCheck_suggest").remove();
 var mainContentHTML = $("#" + mainContent).html(); 
```

从我的 dom 中删除所有 .spellCheck_suggest 类，然后给我上面 html 的 html 代码，它应该只是：

```
test 123<br>
test <span class="underline" id="1" onclick="test1(this);">hez</span> 
```

但奇怪的问题是，如果我尝试克隆

```
 var divclone= $("#divid").clone(); 
```

然后尝试做任何一个..

```
divclone.replaceWith(".spellCheck_suggest","");
divclone.remove(".spellCheck_suggest"); 
```

它不会删除它...我的计划是删除它然后将 .html() 返回给用户

我使用克隆或删除错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T08:53:36.480

尝试：

```
$(".spellCheck_suggest", divclone).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:53:53.010

也许您克隆元素，然后使用它，而不是使用可见元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:54:05.243

试试这个：

```
divclone.find('.spellCheck_suggest').remove() 
```

# c++ - 编译器在废话函数中给出错误

> ID：12120541
> 
> 赞同：0
> 
> 时间：2012-08-25T08:47:41.180
> 
> 标签：c++, mingw, codeblocks

我正在将 Codeblock IDE 与 MingW 一起使用，我一直存在以下类型的错误问题。（文件 || 消息）

```
obj\CEntity.o(.text+0x71a) || In function `ZN7CEntity6OnMoveEff': 
```

或者

```
obj\CArea.o(.bss+0x0) || In function `ZNSt6vectorI5CTileSaIS0_EEaSERKS2_':
obj\CApp_OnCleanup.o(.bss+0x0):C:\DevCpp\bin\..\lib\gcc\mingw32\3.4.2\..\..\..\..\include\c++\3.4.2\bits\vector.tcc || first defined here 
```

请注意，它将位置作为某种 obj 文件提供，因此我看不到它在我的代码中的位置。

我的 C++ 进步很大，但我仍然不太了解编译器的工作原理，我无法弄清楚可能导致问题的原因或如何解决此类问题。与代码问题不同，它真的很难用谷歌搜索，因为名称刚刚被打乱。

希望有人可以提供帮助，因为它阻碍了我，我只是找不到或想出解决办法！

（我决定不发布我的代码，因为它是许多相互关联的文件，我不知道错误在哪里，但我正在尝试遵循[http://www.sdltutorials.com/sdl-tutorial-basics](http://www.sdltutorials.com/sdl-tutorial-basics)上的教程。第一个很少有人可以开始工作，但后来的那些似乎总是失败。这显然是我做错了，因为当我使用示例时它可以工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:58:11.717

许多 GCC 发行版（例如我使用的 MinGW 发行版）都带有一个实用程序名称`c++filt`，它会将 C++ 错位名称转换为更接近源代码声明的名称（我认为您的错误消息遗漏了一些下划线）：

```
C:\temp>c++filt __ZN7CEntity6OnMoveEff
CEntity::OnMove(float, float) 
```

MSVC 带有一个类似的实用程序：`undname`

但是，您可能想要更新您正在使用的 MinGW。我直接在返回到 MinGW 3.4.5 的错误输出中得到了很好的、去错的名称（对于返回到 VC++6 的 MSVC 类似）：

```
class CEntity {
    public:
        void OnMove(float, float);
};

int main()
{
    CEntity ent;
    ent.OnMove(1., 2.);
} 
```

使用 MinGW 3.4.5 编译：

```
C:\temp>g++ -o test.exe test.cpp
C:\...\ccwlXEih.o:test.cpp:(.text+0x43): undefined reference to `CEntity::OnMove(float, float)' 
```

# c# - 为什么我的 get / set 实现会出现堆栈错误？

> ID：12120549
> 
> 赞同：3
> 
> 时间：2012-08-25T08:48:32.613
> 
> 标签：c#

我正在 C# 中尝试以下操作：

```
public class Reference : AuditableTable
    {
        [Range(0, 99, ErrorMessage = "{0} must be between {1} and {2}")]
        [DisplayName("Order")]
        public int Order {
                get { return Order; }
                set {
                    if ((value < 0) || (value > 99)) {
                        throw new Exception(string.Format("{0} must be between 0 and 99", value.ToString()));
                    } else {
                        Order = value;
                    }
                }
            } 
```

有人可以帮助解释为什么在阅读时会出现堆栈溢出错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T08:49:21.143

您的属性正在引用自身，从而导致无限循环。
一个明显的解决方法是使用私有字段并通过您的属性公开它：

```
private int order;
public int Order
{
   get
   {
      return order; //private field
   }
   set
   {
      if ((value < 0) || (value > 99)) {
               throw new Exception(string.Format("{0} must be between 0 and 99",    
                                     value.ToString()));
      } else {
          order = value; // again accessing the private field (setting this time)
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T08:49:48.200

问题是这一行：

```
get { return Order; } 
```

这是递归调用属性，导致堆栈溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T08:51:25.633

setter 和 getter 都在引用自己导致堆栈溢出。像这样修复它：

```
private int _order;

public int Order {
    get { return _order; }
    set {
        if ((value < 0) || (value > 99)) {
            throw new Exception(string.Format("{0} must be between 0 and 99", value.ToString()));
        } else {
            _order = value;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T08:51:02.217

```
int _order;
public int Order {
    get { return _order; }
    set {
        if ((value < 0) || (value > 99)) {
            throw new Exception(string.Format("{0} must be between 0 and 99", value.ToString()));
        } else {
            _order = value;
        }
    }
} 
```

# php - 使用 php 从 php 文件中读取元数据

> ID：12120552
> 
> 赞同：0
> 
> 时间：2012-08-25T08:48:46.843
> 
> 标签：php, blogs, yaml, octopress

在 php 中四处寻找类似 octopress 之类的东西但没有找到任何东西后，我决定自己在 php 中创建一些可以解决问题的东西。

我想先用 php 编写一些代码来读取 php 文件并从中提取元数据，这样我就可以构建博客文章的存档页面等。

我以为我可以创建 yaml 文件，并在这些文件中包含 php/html 以作为博客文章的主要内容，但我不清楚这是否可能？谷歌搜索“在 yaml 中使用 php”并没有让我走得更远。

所以我想我会在这里问做这样的事情最好的方法是什么。

任何人都可以帮忙吗？

谢谢乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T08:51:35.670

我不熟悉 yaml - 你能简单地使用 PHP 的[get meta 标签](http://php.net/manual/en/function.get-meta-tags.php)吗？

```
<?php
// Assuming the above tags are at www.example.com
$tags = get_meta_tags('http://www.example.com/');

// Notice how the keys are all lowercase now, and
// how . was replaced by _ in the key.
echo $tags['author'];       // name
echo $tags['keywords'];     // php documentation
echo $tags['description'];  // a php manual
echo $tags['geo_position']; // 49.33;-86.59
var_dump($tags);// See any and all meta tags that have been picked up.
?> 
```

编辑：我添加了 var_dump，这样你就可以看到你得到的*所有*标签。在您要点击的页面上进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:09:37.927

```
<?php
header('Content-Type:text/html; charset=utf-8');
$tags = get_meta_tags('http://www.narenji.ir'); 
var_dump($tags);
?>

Output is
array
  'keywords' => string 'اخبار, تکنولوژی, نارنجی, گجت, فناوری, موبایل, خبر, تبلت, لپ تاپ, کامپیوتر, ربات, مانیتور, سه بعدی, تلویزیون' (length=186)
  'description' => string 'مکانی برای آشنایی با ابزارها و اخبار داغ دنیای فناوری' (length=97) 
```

**Or you can use following code**

```
<?php
$url = 'http://www.example.com/';

if (!$fp = fopen($url, 'r')) {
    trigger_error("Unable to open URL ($url)", E_USER_ERROR);
}

$meta = stream_get_meta_data($fp);

print_r($meta);

fclose($fp);
?> 
```

If your source file is image then you can try with it

```
<?php
echo "test1.jpg:<br />\n";
$exif = exif_read_data('tests/test1.jpg', 'IFD0');
echo $exif===false ? "No header data found.<br />\n" : "Image contains headers<br />\n";

$exif = exif_read_data('tests/test2.jpg', 0, true);
echo "test2.jpg:<br />\n";
foreach ($exif as $key => $section) {
    foreach ($section as $name => $val) {
        echo "$key.$name: $val<br />\n";
    }
}
?> 
```

# java - Eclipse 有变量可视化器吗？

> ID：12120561
> 
> 赞同：0
> 
> 时间：2012-08-25T08:50:58.323
> 
> 标签：java, eclipse, eclipse-plugin

在 Visual Studio 中，有一项功能可以将[**自定义可视化工具**](http://msdn.microsoft.com/en-us/library/zayyhzts.aspx)添加到 IDE。这允许您编写自己的对话框，在运行时显示复杂对象的内容（即，它可能需要一个人记录并显示名字、姓氏和出生日期）。

我在 Eclipse/Java 中找不到此功能，但想知道它是否可以称为不同的名称？

谢谢，丰富

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:41:03.730

该功能在 Eclipse 中称为 Detail Formatter：[详细信息](http://www.javalobby.org/java/forums/t16350.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T08:55:05.083

我不知道一个特殊的对话框，但通常 .toString() 的自定义实现可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T08:59:29.323

您可以在 Eclipse 中获得的最接近的东西是[Variables View](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/variables/ref-variables_view.htm)和[Expressions](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/expressions/ref-expressions_view.htm)。看法。您还可以在变量视图中[添加观察表达式](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/expressions/ref-expressions_view.htm)以跟踪任何特定对象。

# objective-c - 使用 Storyboard 初始化 UITabBarController 中的所有 UIViewControllers 而不显示它们 - 目标 c

> ID：12120564
> 
> 赞同：0
> 
> 时间：2012-08-25T08:51:13.387
> 
> 标签：objective-c, ios, uiviewcontroller, uitabbarcontroller, storyboard

我是`Storyboard`第一次使用，我已经创建了`UITabBarController`应用程序。我有4`UINavigationControllers`个`UITabBarController`。在开始时仅首先`UINavigationController`使用 root`UIViewController`初始化，但其他 3 仅在我选择它们时才进行初始化。如何初始化它们？我一开始就需要他们每个人的实例。

例如，我需要设置从第一个`UIViewController`到第四个的数据，但现在要这样做，我需要先选择它。我在每个方法中都设置了断点，`UIViewContoller`只有`viewDidLoad`当我选择 this 时才会启用断点`UIViewController`。

有没有办法将它们全部初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:01:45.297

我很确定，一旦您从情节提要中加载`UINavigationControllers`它们，它们的根就会被实例化。因此，您应该能够向他们发送消息。`UIViewController``UITabBarController`

但是`view`a`UIViewController`仅在需要时才加载，因此`viewDidLoad`仅当您选择该选项卡时才会点击该方法。

视图控制器的`view`也可以在运行时卸载，当视图不可见且内存不足时。

# android - 如何修改 android master/detail 活动中的虚拟内容？

> ID：12120569
> 
> 赞同：6
> 
> 时间：2012-08-25T08:52:26.260
> 
> 标签：android

我会在主/详细模式中修改 eclipse 生成的项目。我找不到办法做到这一点。特别是我会从 xml (res/values/arrays) 资源文件中获取项目。

这是java文件：

```
package com.ga.termeapp.dummy;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class DummyContent {

    public static class DummyItem {

        public String id;
        public String content;

        public DummyItem(String id, String content) {
            this.id = id;
            this.content = content;
        }

        @Override
        public String toString() {
            return content;
        }
    }

    public static List<DummyItem> ITEMS = new ArrayList<DummyItem>();
    public static Map<String, DummyItem> ITEM_MAP = new HashMap<String, DummyItem>();

    static {

        addItem(new DummyItem("1", "Le terme"));
        addItem(new DummyItem("2", "Le cure termali"));
        addItem(new DummyItem("3", ""));
    }

    private static void addItem(DummyItem item) {
        ITEMS.add(item);
        ITEM_MAP.put(item.id, item);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:22:59.143

一个可能的解决方案：

用你自己的替换静态类。在我的情况下，`DummyItem`成为[`ProfileItem`](https://stackoverflow.com/questions/4435645/proper-usage-of-twolinelistitem-android/12954944#12954944)并具有不同的属性和`DummyContent`成为`ProfileListContent`。

然后用`static { addItem ... }`静态方法替换静态块。在以下情况下，我需要从数据库中加载项目：

```
public static void setContext(Context c) {
    if (db == null) db = new MyDbAdapter(c); // SQLiteOpenHelper + SQLiteDatabase manager
    if (db.isOpen() == false) {
        db.open();
        Cursor c = db.getProfiles(); // database query
        if (c.moveToFirst()) {
            do {
                ProfileItem item = new ProfileItem(c.getString(0), c.getString(1),
                    c.getString(2));
                addItem(item);
            } while (c.moveToNext());
        }
    }
} 
```

`setContext`我在方法开始时从我的主要活动中调用该`onCreate`方法，然后再进行任何其他操作。

```
public void onCreate(Bundle savedInstanceState) {
    ProfileListContent.setContext(this);
    ... 
```

如果要动态添加项目：

```
public static void insertProfile(ProfileItem profile) {
    db.insertProfile(profile); // add item to the database
    addItem(profile); // the same addItem provided with the eclipse wizard
} 
```

您当然可以更改 ListView 项目的布局，我[在这里提供了一个示例](https://stackoverflow.com/questions/4435645/proper-usage-of-twolinelistitem-android/12954944#12954944)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:59:18.167

I had the same problem but insted of taking all the values from an array I changed

```
addItem(new DummyItem("1", "Le terme"));
addItem(new DummyItem("2", "Le cure termali"));
addItem(new DummyItem("3", "")); 
```

I edited those addItem and then if you want to add string to your items, you have to edit all this part of code.

```
 public String id;
    public String content;

    public DummyItem(String id, String content) {
        this.id = id;
        this.content = content; 
```

Hope it will help you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:31:16.020

这对我有用，不确定这是否是最佳实践。删除静态块并在`ItemListActivity.java`上`Oncreate`添加此代码

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    if (DummyContent.ITEMS.isEmpty())
    {
        DummyContent.addItem(new DummyItem("1", getResources().getString(R.string.menu1)));
        DummyContent.addItem(new DummyItem("2", getResources().getString(R.string.menu2)));
        DummyContent.addItem(new DummyItem("3", getResources().getString(R.string.menu3)));
    } 
```

希望这可以帮助

# jquery - 如何为removeClass jQuery添加幻灯片效果

> ID：12120576
> 
> 赞同：0
> 
> 时间：2012-08-25T08:53:10.393
> 
> 标签：jquery, tabs, slide, removeclass

几天来，我一直试图在谷歌上找到我的问题的答案，但没有任何运气，所以我希望这里有人能提供帮助。

该代码可以在此链接[http://www.scriptbreaker.com/javascript/script/JQuery-vertical-tab-menu](http://www.scriptbreaker.com/javascript/script/JQuery-vertical-tab-menu)中找到，它只是一个垂直选项卡菜单，我已经在单击而不是悬停时对其进行了更改。

我想要的是内容向上滑动，新内容向下滑动（取决于单击哪个选项卡，如果有意义，它是向上还是向下）。

这是它的 jQuery：

```
<script language="JavaScript">
        $(document).ready(function() {
            $(".tabs .tab[id^=tab_menu]").click(function() {
                var curMenu=$(this);
                $(".tabs .tab[id^=tab_menu]").removeClass("selected")
                curMenu.addClass("selected")

                var index=curMenu.attr("id").split("tab_menu_")[1];
                $(".curvedContainer .tabcontent").css("display","none")
                $(".curvedContainer #tab_content_"+index).css("display","block")
            });
        });
    </script> 
```

**更新** 这里是小提琴[http://jsfiddle.net/swift29/4pVtB/](http://jsfiddle.net/swift29/4pVtB/)

在此先感谢，斯威夫特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:26:10.313

可能这个[FIDDLE](http://jsfiddle.net/4pVtB/5/)就足够了。您只需调用一个`.slideup/slideDown`方法而不是简单地使用`display:block/none`

```
$(document).ready(function() {
$(".tabs .tab[id^=tab_menu]").click(function() {
    var curMenu=$(this);
    $(".tabs .tab[id^=tab_menu]").removeClass("selected");
    curMenu.addClass("selected");

    var index=curMenu.attr("id").split("tab_menu_")[1];
    $(".curvedContainer .tabcontent").slideUp('fast');
    $(".curvedContainer #tab_content_"+index).slideDown('fast');
});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:47:40.753

一律模组：http: [//jsfiddle.net/4pVtB/7/](http://jsfiddle.net/4pVtB/7/)

```
$(document).ready(function() {
    $(".tabs .tab[id^=tab_menu]").click(function() {
        var curMenu = $(this);
        var cur_index=curMenu.attr("id").split("tab_menu_")[1];
        var old_index=$(".tabs .selected").attr("id").split("tab_menu_")[1];
        if (cur_index==old_index) {
            return;
        }
        $(".tabs .tab[id^=tab_menu]").removeClass("selected");
        curMenu.addClass("selected");
        $("#tab_content_"+old_index).slideUp('slow');
        $("#tab_content_"+cur_index).slideDown('slow');
    });
}); 
```

# php - switch 的替代语法

> ID：12120578
> 
> 赞同：9
> 
> 时间：2012-08-25T08:53:19.703
> 
> 标签：php

嘿，PHP 中的 switch 语句有另一种语法，但这段代码不起作用：

```
<div>
<?php switch($variable): ?>
<?php case 1: ?>
<div>
Newspage
</div>
<?php break;?>
<?php case 2: ?>
</div>
Forum
<div>
<?php break;?>
<?php endswitch;?>
</div> 
```

> 解析错误：语法错误，意外的 T_INLINE_HTML，在 /path/to/file 行中需要 T_ENDSWITCH 或 T_CASE 或 T_DEFAULT #

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-25T08:53:19.703

此问题的解决方案是将`switch($variable):`with`case 1:`放入同一块 PHP 代码中：

```
<div>
<?php switch($variable): 
case 1: ?>
<div>
Newspage
</div>
<?php break;?>
<?php case 2: ?>
</div>
Forum
<div>
<?php break;?>
<?php endswitch;?>
</div> 
```

# java - 如何解析 xls 文件？（已知语言：Python、Java、Lua）

> ID：12120582
> 
> 赞同：0
> 
> 时间：2012-08-25T08:54:02.877
> 
> 标签：java, python, parsing, lua, xls

我正在尝试解析这个 xls 文件：

[http://web.iyte.edu.tr/sks/xls/Agustos_Menu_2012.xls](http://web.iyte.edu.tr/sks/xls/Agustos_Menu_2012.xls)

橙色的地方有日期，并且喜欢那些日期有当天的食物清单。所以你能建议我一种方法来解析它来获取日期和食物吗？我试图将该 xls 转换为逗号分隔值，但某些字符正在发生变化，我不知道如何以有组织的方式将日期和食物放入数组或文件中以便以后使用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:00:06.080

对于 Java 语言，请尝试使用 grimholtz 和 lamber45 提供的 API -> [sourceforge 项目 jexcelapi](http://sourceforge.net/projects/jexcelapi/)

该示例将基于包含 no 的文件。在 col B 第 1 行（标题）-4 中读取 xls 文件首先导入库

```
import java.io.File;
import java.io.IOException;
import jxl.Cell;
import jxl.Sheet;
import jxl.read.biff.BiffException;
import jxl.Workbook; 
```

其余代码将在 main() 方法中

```
public class ReadXLS {
   public static void main(String[] args) throws IOException, BiffException {
   Workbook spreadsheet = Workbook.getWorkbook(new File("example.xls"));
   Sheet myspreadsheet = spreadsheet.getSheet(0); //numbers of spreadsheet starts from 0
   Cell mycell = myspreadsheet.getCell(1, 0);
   String header = mycell.getContents();
   System.out.println(header);
   for(int i=1; i<4; i++){
     mycell = myspreadsheet.getCell(1, i);
     System.out.println(mycell.getContents());
     }
   spreadsheet.close();

   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:00:14.660

可能最简单和最好的选择是使用 Apache POI - Microsoft 文档的 Java API。可以在这里找到：http: [//poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:00:44.560

Java：使用[JExcel API](http://jexcelapi.sourceforge.net/)解析指定文档。[在这里](http://www.andykhan.com/jexcelapi/tutorial.html)你可以找到如何使用它的说明，专注于**阅读电子表格**部分。

# web-services - 将 xsd 导入 wsdl

> ID：12120589
> 
> 赞同：30
> 
> 时间：2012-08-25T08:54:48.300
> 
> 标签：web-services, xsd, wsdl, wsdl2java

这是我目前的配置：

## XSD

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns="http://stock.com/schemas/services/stock"
    xmlns:tns="http://stock.com/schemas/services/stock"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"  targetNamespace="http://stock.com/schemas/services/stock">

<xsd:element name="Stock">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="ticker" nillable="true" type="xsd:string"/>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="quotes" nillable="true" type="Quote"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>

<xsd:complexType name="Quote">
    ........
</xsd:complexType>
.......
<xsd:element name="gethighBetaStockResponse">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="stock" ref="Stock" minOccurs="1" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

## WSDL

```
<?xml version="1.0" encoding="UTF-8"?><definitions targetNamespace="http://stock.com/schemas/services/stock/wsdl"
    .....xmlns:external="http://stock.com/schemas/services/stock"
<import namespace="http://stock.com/schemas/services/stock" location="Stock.xsd" />
<message name="getStockQuoteResp">
    <part name="parameters" element="external:getStockQuoteResponse" />
</message> 
```

但是，当 ref="Stock" 更改为 type="Stock" 时，wsdl2java 开始给出类型 {http://stock.com/schemas/services/stock}Stock 被引用但未定义。

不知何故，wsdl 和 xsd 导入之间似乎存在冲突-但我无法解决它。感谢您的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-25T21:47:42.630

你在这里有几个问题。

首先，XSD 存在一个元素既被命名又被引用的问题；在你的情况下应该被引用。

改变：

```
<xsd:element name="stock" ref="Stock" minOccurs="1" maxOccurs="unbounded"/> 
```

至：

```
<xsd:element name="stock" type="Stock" minOccurs="1" maxOccurs="unbounded"/> 
```

和：

*   移除全局元素的声明`Stock`
*   为名为的类型创建复杂类型声明`Stock`

所以：

```
<xsd:element name="Stock">
    <xsd:complexType> 
```

至：

```
<xsd:complexType name="Stock"> 
```

确保修复 xml 结束标记。

第二个问题是引用外部 XSD 的正确方法是在 wsdl:types 元素中使用带有 import/include 的 XSD 模式。wsdl:import 保留用于引用其他 WSDL 文件。通过浏览 WS-I 规范，[WSDL 和 Schema Import](http://www.ws-i.org/profiles/basicprofile-1.1-2004-08-24.html#WSDL_and_Schema_Import)部分可以获得更多信息。基于 WS-I，您的情况将是：

**错误：（**你展示的方式）

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions targetNamespace="http://stock.com/schemas/services/stock/wsdl"
    .....xmlns:external="http://stock.com/schemas/services/stock"
    <import namespace="http://stock.com/schemas/services/stock" location="Stock.xsd" />
    <message name="getStockQuoteResp">
        <part name="parameters" element="external:getStockQuoteResponse" />
    </message>
</definitions> 
```

**正确的：**

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions targetNamespace="http://stock.com/schemas/services/stock/wsdl"
    .....xmlns:external="http://stock.com/schemas/services/stock"
    <types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema">
            <import namespace="http://stock.com/schemas/services/stock" schemaLocation="Stock.xsd" />             
        </schema>
    </types>
    <message name="getStockQuoteResp">
        <part name="parameters" element="external:getStockQuoteResponse" />
    </message>
</definitions> 
```

**一些**处理器可能同时支持这两种语法。您发布的 XSD 显示问题，请确保您首先验证 XSD。

如果您在编写 WSDL 时采用 WS-I 方式会更好。

其他问题可能与在定位外部内容时使用相对 URI 和绝对 URI 有关。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-01T17:22:15.590

**导入与包含**

导入的主要目的是导入*命名空间*。XSD 导入语句的更常见用途是导入出现在另一个文件中的*命名空间。*您可能正在从文件中收集名称空间信息，但不要忘记它是您正在导入的**名称空间，****而不是文件**（不要将`import`语句与`include`语句混淆）。

另一个令人困惑的领域是如何指定包含`.xsd`文件的位置或路径：XSD 导入语句有一个名为的可选属性`schemaLocation`，但**如果**导入语句的名称空间与导入语句本身。

`.xsd`当您确实选择为您的 WSDL使用外部文件时，该`schemaLocation`属性就变得必要了。请确保您在 import 语句中使用的*命名空间*与您正在导入的架构的 targetNamespace 相同。也就是说，所有 3 次出现必须相同：

**WSDL：**

```
xs:import namespace="urn:listing3" schemaLocation="listing3.xsd"/> 
```

**XSD：**

```
<xsd:schema targetNamespace="urn:listing3"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

另一种了解 XSD 的 WSDL 的方法是通过 Maven 的 pom.xml：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>xmlbeans-maven-plugin</artifactId>
  <executions>
    <execution>
      <id>generate-sources-xmlbeans</id>
      <phase>generate-sources</phase>
      <goals>
    <goal>xmlbeans</goal>
      </goals>
    </execution>
  </executions>
  <version>2.3.3</version>
  <inherited>true</inherited>
  <configuration>
    <schemaDirectory>${basedir}/src/main/xsd</schemaDirectory>
  </configuration>
</plugin> 
```

您可以在这篇[很棒的 IBM 文章](http://www.ibm.com/developerworks/webservices/library/ws-tip-imports/)中阅读更多相关信息。它有错别字，例如`xsd:import`代替，`xs:import`但其他都很好。

# linux - 带有进程替换的 shell 脚本中的语法错误

> ID：12120598
> 
> 赞同：12
> 
> 时间：2012-08-25T08:57:38.993
> 
> 标签：linux, bash, shell, process-substitution

我有这个 shell 脚本，我用它来备份我的系统。有一行：

```
tar -Pzcpf /backups/backup.tar.gz --directory=/ --exclude=proc --exclude=sys --exclude=dev/pts --exclude=backups --exclude=var/log / 2> >(grep -v 'socket ignored' >&2) 
```

如您所见，我一直在尝试使用[此博客文章](http://wundsam.net/2011/03/27/filtering-stderr-or-how-to-get-rid-of-tars-socket-ignored-message/)过滤掉 tar 中烦人的、无用的“套接字忽略”错误。

我在执行时从 shell 得到的是：

> /bin/sysback：第 45 行：意外标记`>' /bin/sysback: line 45:`tar -Pzcpf /backups/backup --directory=/ --exclude=proc --exclude=sys --exclude=dev/pts --exclude=backups --exclude附近的语法错误=var/log / 2> >(grep -v 'socket被忽略' >&2)'

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-25T13:57:41.147

您使用的语法是基本 shell 语法的 bash 扩展，因此您必须小心使用 bash 运行脚本。（Ksh 也有`>(…)`进程替换，但在重定向后不支持它。Zsh 会很好。）

鉴于您收到的错误消息，您在 bash 中运行此脚本，但在其 POSIX 兼容模式下，而不是在完全 bash 模式下。注意使用显式`#!/bin/bash`行调用您的脚本。`#!/bin/sh`不会这样做，即使`/bin/sh`是 bash 的符号链接，因为如果在 name 下调用 bash，它会以 POSIX 模式运行`sh`。如果您使用 bash 功能，请始终按名称调用 bash。

如果要使用 bash 功能，请注意不要设置环境变量`POSIXLY_CORRECT`或在命令行上传递选项。`--posix`

或者，不要使用这种特定于 bash 的语法；使用便携式构造，例如[Stephane Rouberol](https://stackoverflow.com/questions/12120598/syntax-error-in-shell-script-with-process-substitution/12121244#12121244)提出的构造。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T10:39:30.713

怎么样：

```
 tar -Pzcpf /backups/backup.tar.gz --directory=/ \
     --exclude=proc --exclude=sys --exclude=dev/pts \
     --exclude=backups --exclude=var/log 2>&1 | grep -v 'socket ignored' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-13T07:03:10.773

我发现在 gentoo 上，如果 sh 是 /bin/bash 的链接，如果您使用 'sh "scriptname"' 调用脚本，它不会将其作为 bash 脚本运行并失败：

```
matchmorethan.sh: line 34: syntax error near unexpected token `<'
matchmorethan.sh: line 34: `done < <( cat $matchfile )' 
```

因此，如果您需要使用 Process Substitution 功能，您需要专门使用 bash 运行它。但我没有找到任何参考。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-27T05:19:04.523

实际上，当 GNU tar 提供忽略“套接字忽略”警告的选项时，您不必在 std 错误中进行这种重定向。

```
tar --warning='no-file-ignored' -Pzcpf /backups/backup.tar.gz --directory=/ --exclude=proc --exclude=sys --exclude=dev/pts --exclude=backups --exclude=var/log / 2> new.err 
```

[您可以在此处找到带有更多忽略选项的原始链接](https://www.gnu.org/software/tar/manual/html_section/tar_27.html)

# c++ - 给定变量是有限整数，如何让 C++ 程序求解输入值的变量？

> ID：12120605
> 
> 赞同：-2
> 
> 时间：2012-08-25T08:58:57.907
> 
> 标签：c++

> **可能重复：**
> [如何让 C++ 求解输入值的方程？](https://stackoverflow.com/questions/12120369/how-to-have-c-solve-the-equation-for-an-input-value)

我是 C++ 新手，只是在玩……

```
#include <iostream>
using namespace std;

int limbs(int handdmg, int armdmg, int chestdmg, int headshot, int legdmg)
{
    return handdmg + armdmg + chestdmg + legdmg + headshot;

}
main ()
{

    int totaldmg; 
    int handdmg; 
    int armdmg; 
    int chestdmg; 
    int legdmg;
    int headshot;
    int Dmgdial;
    int x;

    // limiting the variables to a smaller range of integers       

    handdmg = 0 < x < 5;
    armdmg = 10 < x < 15;
    chestdmg = 25 < x < 50;
    legdmg = 30 < x < 40;
    headshot = 80 < x < 120;

    cout  << "Enter your total damage taken:" << endl;
    cin >> totaldmg;

    Dmgdial = totaldmg;

    // want the variables to = the input value in the best smallest way possible

    limbs(handdmg, armdmg, chestdmg, headshot, legdmg) = Dmgdial;

    // then print the variables answers to the screen

    cout << "damage given to the hand:   " << handdmg << endl;
    cout << "damage given to the arm:    " << armdmg << endl;
    cout << "damage given to the chest:  " << chestdmg << endl;
    cout << "damage given to the leg:    " << legdmg << endl;
    cout << "damage given to the head:   " << headshot << endl;

    cin.clear();
    cin.ignore(2505, '\n');
    cin.get();

    return 0;

} 
```

所以这个概念很简单——你在程序中输入一个值，例如 156，然后让计算机使用 x 的有限值计算获得该值的最佳方法。

但是，`limbs(handdmg, armdmg, chestdmg, headshot, legdmg) = Dmgdial`不起作用。就编译器而言，它是倒退的。

我怎样才能让这种类型的程序工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:11:31.133

> [..] 获得该价值的最佳方式 [...]

这是你的任务。“计算机”对损坏或爆头一无所知。拿一张纸，写下你想如何从总伤害值中计算伤害细节。例如：

```
struct DamageDetails
{
   int head, leg, arm;
   const int HEAD_MAX = 120;
   const int HEAD_MIN = 80;

   static DamageDetails FromTotalDamage(int totalDamage)
   {
        DamageDetails damage;
        int damageTakenSoFar = totalDamage;
        damage.head = totalDamage / 2;  // 50% damage is taken to head
        if (damage.head > HEAD_MAX)
            damage.head = HEAD_MAX;
        damageTakenSoFar -= damage.head;
        // ...

        return damage;
   }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:05:53.473

您正在尝试求解 1 个具有 5 个未知数的方程，这是一个未定问题。你需要一个包含 5 个方程和 5 个未知数的系统才能得到唯一的答案。

此外，您实际上并没有指定方程 - 现在看起来您正在假设一个线性方程 t = x + y + z + v + w。考虑到限制变量的（奇怪）部分，这可能不正确。

此外，C++ 不是求解方程的数学系统。您需要自己编写代码来解决它们，或者使用第三方库。

总的来说，就数学和编程专业知识而言，我会说你在做你想做的事。在尝试这样的任务之前，您将从学习更多理论中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:06:02.750

这是使用回溯解决您的问题的方法：

```
#include <stdio.h>

int v[100], n, int dmg;

void init(int k)
{
    v[k] = 0;
}

bool solutionReached( int k ) 
{
    if (k <= 5)
        return false;

    int sum = 0;
    for (int i = 1; i <= k; i++)
    {
        sum += v[i];
    }

    if(sum == dmg)
    {
        if( v[1] < 5 &&
            v[2] > 10 && v[2] < 15 &&
            v[3] > 25 && v[3] < 50 &&
            v[4] > 30 && v[4] < 40 &&
            v[5] > 80 && v[5] < 120)
            return true;
    }

    return false;
}

void printSolution( int k ) 
{
    for (int i = 1; i < k; i++)
    {
        printf("%i ", v[i]);
    }
    printf("\n");
}

bool hasSuccesor( int k ) 
{
    if(v[k] < 120 && k <= 5)
    {
        v[k]++;
        return true;
    }
    return false;
}

bool isValid( int k ) 
{
    /*
    if(v[1] > 5)
        return false;
    if(!(v[2] > 10 && v[2] < 15))
        return false;
    if(!(v[3] > 25 && v[3] < 50))
        return false;
    if(!(v[4] > 30 && v[4] < 40))
        return false;
    if (!(v[5] > 80 && v[5] < 120))
        return false;
    */

    return true;
}

void bkt(int k)
{
    if(solutionReached(k))
        printSolution(k);
    else
    {
        init(k);
        while(hasSuccesor(k))
            if(isValid(k))
                bkt(k + 1);
    }
}

int main(int argc, char* argv[])
{
    dmg = 200;
    n = 6;
    bkt(1);

    return 0;
} 
```

# html - 贝宝快递结帐登陆页面计费问题

> ID：12120616
> 
> 赞同：0
> 
> 时间：2012-08-25T09:01:03.100
> 
> 标签：html, forms, paypal

出于某种原因，我无法让我的贝宝快速结账以允许客人在不登录贝宝的情况下结账。我有两个重要的表单域

```
 <input type="hidden" name="SOLUTIONTYPE" value="Sole" />
        <input type="hidden" name="LANDINGPAGE" value="Billing" /> 
```

但它仍然只显示登录。

完整的表格看起来像这样（没有产品，通常会有 item_1、item_2 等等）：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                   <input type="image" src="myimg.png" name="submit" class="wp_cart_checkout_button" alt="Betal med PayPal - det er hurtigt, gratis og sikkert!"><input type="hidden" name="return" value="return.com">
                    <input type="hidden" name="business" value="my@email.dr">
                    <input type="hidden" name="currency_code" value="DKK">
                    <input type="hidden" name="lc" value="da_DK">
                    <input type="hidden" name="SOLUTIONTYPE" value="Sole">
                    <input type="hidden" name="LANDINGPAGE" value="Billing">
                    <input type="hidden" name="logoimg" value="logo.png">
                    <input type="hidden" name="PAYMENTACTION" value="Sale"> 
                    <input type="hidden" name="cmd" value="_cart">
                    <input type="hidden" name="upload" value="1">
                    <input type="hidden" name="rm" value="2">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:10:22.127

如果您在 a 中指定此信息，您很可能没有使用 Express Checkout。
你能分享你剩下的代码吗？我非常怀疑您使用的是 Payments Standard。

使用 Payments Standard，您无法强制使用结算或登录页面；它是由 cookie 决定的。如果找到 PayPal 登录 cookie，它将显示登录页面。如果没有找到登录 cookie，它将显示计费页面。

# ruby-on-rails - 如何在 Rails 中使用 RSpec 测试 neo4j.rb 模型？

> ID：12120618
> 
> 赞同：1
> 
> 时间：2012-08-25T09:01:07.323
> 
> 标签：ruby-on-rails, activerecord, rspec, jruby, neo4j

我是第一次尝试 rails、neo4j.rb 和 rspec，所以对于知识渊博的人来说，这也许有一个非常简单的解决方案。这基本上就是我所做的：

```
(I am using jruby)
rails new graphtest -m http://andreasronge.github.com/neo4j/rails.rb
cd graphtest
bundle
rails generate model testnode
rails generate rspec:install
rspec spec/models/testnode_spec.rb 
```

然后在运行 rspec 时出现此错误：`NoMethodError: undefined method 'active_record' for #<Rails::Application::Configuration:0x15071f28>`

我的印象是 neo4j.rb gem 实现了 active_record。我确实尝试在各个地方包含活动记录，但我从未绕过此错误消息。该怎么办？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T20:33:36.330

Neo4j.rb 确实实现了 Active Record API 的一小部分。您应该确保您的应用程序不需要活动记录或尝试配置活动记录。不确定谁将该依赖项添加到活动记录（rspec:install ？），但 rails new graphtest -m ... 应该开箱即用，并且对活动记录没有任何依赖项。

# html - 在幻灯片上添加 div 标签

> ID：12120621
> 
> 赞同：0
> 
> 时间：2012-08-25T09:01:23.220
> 
> 标签：html, css

我们如何`div`在幻灯片上添加标签，如下面的链接

[http://www.hellofresh.com/](http://www.hellofresh.com/)

在这里`div`，标题为“发现烹饪的乐趣”被放置在幻灯片上。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:13:10.617

首先，欢迎来到[Stackoverflow](http://stackoverflow.com)（哎呀，这不是您的第一个问题！）。将您`div`的幻灯片放在幻灯片上（或任何其他元素上）的关键是使用**绝对定位**。绝对定位使您能够指定元素的确切位置，而不是将其留在文档流中。如果您查看[示例网站](http://www.hellofresh.com/)的 CSS，您会发现`div`“发现烹饪的乐趣”的样式基本上是这样的：

```
position: absolute;
top: 0px;
left: 0px; 
```

`top`并且`left`以某种方式`x`在`y`二维网格系统中运行，除了原点的放置方式不同。向上`top: 0px;`拉并向左拉，所以总而言之，它位于左上角。`div``left: 0px;``div`

要实现半透明黑色的效果，请使用`opacity`属性。`opacity: 0.5;`表示它`div`是半透明的，而`opacity: 0;`表示它根本不可见。您最喜欢的值可能类似于`opacity: 0.7;`- 范围内的任何值`0...1`。

最后一点是告诉浏览器`div`应该**在**幻灯片上，而不是在它后面。为此，请使用该`z-index`属性。`z-index`指定元素的相对“堆栈顺序”。因此，如果您希望您`div`在幻灯片放映中结束，请在设置幻灯片放映样式的`z-index: 5;`同时使用 设置样式`z-index: 1;`，例如。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:04:09.700

好的，你可以这样做（[http://jsfiddle.net/YgpqX/](http://jsfiddle.net/YgpqX/)）：

```
<div class="div1"></div>
<div class="div2"></div>​

​.div1 {
  width: 320px;
  height: 200px;
  background: #aa5;
}

.div2 {
  width: 100px;
  height: 100px;
  margin-top: -200px;
  background: #5aa;
}
​ 
```

或者（[http://jsfiddle.net/YgpqX/1/](http://jsfiddle.net/YgpqX/1/)）

```
<div class="div1"></div>
<div class="div2"></div>​

.div1 {
  position: relative;
  width: 320px;
  height: 200px;
  background: #aa5;
}

.div2 {
  position: relative;
  width: 100px;
  height: 100px;
  top: -200px;
  background: #5aa;
} 
```

如果您在 html 中的块应该早于滑块块，则使用`z-index: 9999;`它来获取它。

还有绝对位置：

```
<div class="div1">
  <div class="div2"></div>
</div>
​
.div1 {
  position: relative;
  width: 320px;
  height: 200px;
  background: #aa5;
}

.div2 {
  position: absolute;
  width: 100px;
  height: 100px;
  background: #5aa;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:05:00.900

通过`opacity`在 CSS 中设置属性

这是关于这个[W3schools Css opaque的一些基本信息](http://www.w3schools.com/css/css_image_transparency.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T09:12:24.390

他们正在使用 CSS 定位来实现这种效果。基本上，他们绝对将发现烹饪块的乐趣放在幻灯片上。您可以在绝对位置 div 上使用 z-index 将其置于相对位置（幻灯片）div 之上。基本上你需要结合使用位置和 z-index。我在这里有一个 CSS/HTML 的基本示例：http: [//jsfiddle.net/jqVAe/1/](http://jsfiddle.net/jqVAe/1/)

HTML：

```
<div id="slideshow">
    Scrolling sideshow goes here.  Scrolling sideshow goes here.  Scrolling sideshow goes here.  Scrolling sideshow goes here.  Scrolling sideshow goes here. Scrolling sideshow goes here.Scrolling sideshow goes here.
    <div id="over-slideshow"></div>
</div> 
```

CSS：

```
 #slideshow{
        width: 400px;
        height: 200px;
        position: relative;
        background: green;    
    }

#over-slideshow{
    position: absolute;
    top: 10px;
    left: 10px;
    width: 100px;
    height: 100px;
    background: red;    
} 
```

这提供了放置幻灯片的基本结构。我建议找到一个好的幻灯片插件，而不是试图重新发明该功能。我确信有很多 Jquery（Javascript 框架）插件可以为您完成这项任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T09:15:43.517

你可以试试`position: absolute`和`z-index`。z 索引用于在图层上方或下方对齐图层。你可以通过；

**[第 15 课：使用 z-index 逐层（图层）](http://www.html.net/tutorials/css/lesson15.php)**、**[了解 CSS z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)**和**[详细了解 z-index CSS 属性](http://www.impressivewebs.com/a-detailed-look-at-the-z-index-css-property/)**

# string - PowerShell 字符串连接提供换行符

> ID：12120623
> 
> 赞同：1
> 
> 时间：2012-08-25T09:01:47.557
> 
> 标签：string, powershell, jar, newline

### **注意**：Java/Closure Compiler 的实际错误来自**--js-** **out** ***putfile***`t`中的缺失！

 *我有这个 PowerShell 脚本：

```
cls
$jsFiles = @();

Get-ChildItem | Where {$_.PsIsContainer} | Foreach {
    $dir = $_.FullName;
    $jsFile = $dir + "\" + $_.Name + ".js";
    if (Test-Path ($jsFile)) {
        $jsFiles += $jsFile;
    }
}

$wd = [System.IO.Directory]::GetCurrentDirectory();

# Build Closure Compiler command line call
$cmd = @("-jar $wd\..\ClosureCompiler\compiler.jar");

Foreach ($file in $jsFiles) {
    # Both insert a newline!

    $cmd += "--js $file";
    #$cmd = "$cmd --js $file";
}

$cmd = "$cmd --js_ouput_file $wd\all.js";

Invoke-Expression "java.exe $cmd" 
```

问题是每个`+=`或`$cmd = "$cmd str"`调用都插入了换行符！

Echoargs 给了我这个输出：

```
Arg 0 is <-jar>
Arg 1 is <S:\ome\Path\compiler.jar>
Arg 2 is <--js>
Arg 3 is <S:\ome\Path\script1.js>
Arg 4 is <--js>
Arg 5 is <S:\ome\Path\script2.js>
...
Arg 98 is <--js_ouput_file>
Arg 99 is <S:\ome\Path\all.js> 
```

（可能）因此，我收到一些错误`java.exe`：

```
java.exe : "--js_ouput_file" is not a valid option
At line:1 char:1
+ java.exe -jar ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ("--js_ouput_file" is not a valid option:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:46:05.210

尝试重写为更简单的版本：

```
cls

$wd = [System.IO.Directory]::GetCurrentDirectory();

# Build Closure Compiler command line call
$cmd = "-jar $wd\..\ClosureCompiler\compiler.jar";

$arrayOfJs = Get-ChildItem -Recurse -Include "*.js" | % { "--js $_.FullName" };

$cmd += [string]::Join(" ", $arrayOfJs);

Invoke-Expression "java $cmd --js_ouput_file $wd\all.js" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:18:35.587

当你这样做

```
$cmd = @(...); 
```

您正在创建一个数组，因此`+=`它的后续操作是将元素附加到数组而不是字符串连接。只需将其作为字符串，或在使用 $cmd 之前。执行以下操作：

```
$cmd -join " " 
```

这会将元素连接在一起，形成一个以空格分隔的字符串。默认情况下，当数组被强制转换为字符串时，您将在元素之间看到新行。*

# objective-c - 使用 CCSpriteBatchNode 进行延迟加载的正确方法是什么？

> ID：12120627
> 
> 赞同：0
> 
> 时间：2012-08-25T09:02:18.853
> 
> 标签：objective-c, cocos2d-iphone

我做了一个吸气剂：

```
@synthesize sheet = _sheet;

-(CCSpriteBatchNode *)sheet {
    if (!_sheet) {
        _sheet = [CCSpriteBatchNode batchNodeWithFile:@"image.png" capacity:500];
        [self addChild:_sheet];
    }
    return _sheet;
} 
```

但我的问题是，声明此属性的正确方法是什么？

在我的界面中，我做了：

```
@property (readonly, unsafe_unretained) CCSpriteBatchNode *sheet; 
```

因为我想，既然这是“只读的”，我不需要对它的强引用——但后来我感到困惑并想——等等，这是否意味着它有可能被释放，这应该是强的？我使用 unsafe_unretained 而不是 weak 来支持 iOS4...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:16:37.827

“readonly”属性意味着没有setter函数来修改属性的值。这与“strong”与“weak/unsafe_unretained”无关。

您应该声明属性“strong”以确保在有人使用该对象时不会释放它。

在您的特定情况下，可能会因为`self`保留，所以至少会存在。但是，如果您将属性声明为“unsafe_unretained”并且另一个类通过`_sheet``[self addChild:_sheet]``_sheet``self`

```
CCSpriteBatchNode *theSheet = yourWhatEver.sheet; 
```

那么`theSheet`一旦`yourWhatEver`被释放，它将是一个无效的指针。

# android - 在没有 GCM 的情况下保持离线数据与服务器同步的节能方法是什么？

> ID：12120629
> 
> 赞同：4
> 
> 时间：2012-08-25T09:02:45.527
> 
> 标签：android, offline-caching

我正在为 Internet 讨论板构建一个 Android 客户端：该应用程序从服务器下载讨论并使用本机 Android UI 显示它们。构建基础知识非常容易，例如获取和显示内容，以及将回复发布回服务器。

现在我想把它提升到一个新的水平：应用程序应该将所有数据本地存储在设备上并定期与服务器同步，获取最近的更改并更新本地数据库。我不希望它按需检查更改；定期更新更好，因为这允许订阅更新等一些不错的功能。

不幸的是，服务器不符合 GCM（而且永远不会），它是一个很好的老式简单 Web 服务器，所以我必须自己实现同步。

我发现[对另一个问题的评论](https://stackoverflow.com/a/1356469/1380150)说基于计时器的检查是一个坏主意，因为设备必须唤醒并连接到互联网。当设备开始自己的数据同步时捕捉会更好，但是有没有一种方法可以在没有定期检查的情况下处理这个问题？

我看过很多关于这个问题的讨论；他们中的大多数讨论内容提供者、协议、GCM/C2DM 等服务。我对电源效率一无所知。

那么如何正确进行同步以使我的应用程序不会耗尽电池？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:13:07.650

如果您使用 GCM 会更好，因为服务器可以推送更新（如果可用），这比轮询更节能，因为只有在更新可用时才会使用网络，它比及时轮询要好得多，因为它会检查并唤醒手机只是为了检查更新

重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为 Android 版 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

但是由于您无法使用 GCM，您将不得不自行进行轮询，您可以通过使用警报管理器和不精确的重复以一种省电的方式使用它

我认为这是定期轮询的最佳节能方式

给出示例代码

```
public class MyScheduleReceiver extends BroadcastReceiver {

    // Restart service every 30 sec
    private static final long REPEAT_TIME = 1000 * 30 ;

    @Override
    public void onReceive(Context context, Intent intent) {
        AlarmManager service = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, MyStartServiceReceiver.class);
        PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();
        // Start 30 seconds after boot completed
        cal.add(Calendar.SECOND, 30);
        //
        // Fetch every 30 seconds
        // InexactRepeating allows Android to optimize the energy consumption
        service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), REPEAT_TIME, pending);

        // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        // REPEAT_TIME, pending);
    }
} 
```

（有[更详细的解释，包括必要的清单项目](http://www.hascode.com/2011/11/managing-background-tasks-on-android-using-the-alarm-manager/)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:53:28.433

您可以构建一个小型服务器端应用程序，该应用程序将执行定期轮询并利用 GCM 通知 Android 客户端任何更新。

当然，您还会遇到其他问题，例如需要对每个用户进行轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:08:16.553

GCM 是一个好主意，但正如你所说，这对你来说是不可能的。在这种情况下，我建议这样做：

1.  如果可能，通过 WiFi 更新。这样，您可能会更快地完成数据传输，从而减少设备无线电激活所需的时间。
2.  捆绑转移。不要传输说 1 个文件，然后稍等片刻再进行另一次传输。相反，一个接一个地转移。这减少了无线电需要激活的时间，从而节省了电池寿命
3.  充电时更新，多更新。如果设备正在充电，您可以在不耗尽电池的情况下让网络连接保持更长时间。因此，您可以在充电时同步 3 天的数据，而不是 24 小时的数据，并在用户想要 2 天无法正常同步的数据时节省电池电量。

您还可以观看IO 2012 中关于使用网络时的效率的[这次](http://www.youtube.com/watch?v=PwC1OlJo5VM)会议。

# c# - 如何在 C# 中识别我的服务器名称以供客户端进行服务器身份验证

> ID：12120630
> 
> 赞同：19
> 
> 时间：2012-08-25T09:02:59.607
> 
> 标签：c#, sslstream, makecert

我最近一直在尝试用 C# 制作 SSL 加密的服务器/客户端。

我在 MSDN 上遵循[了本](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)教程，但是，它需要使用*makecert.exe*为服务器和客户端使用创建一个证书，所以我找到了一个示例，它创建了很好的证书：

> makecert -sr LocalMachine -ss My -n "CN=Test" -sky exchange -sk 123456 c:/Test.cer

但现在问题是服务器启动并等待客户端，当客户端连接时，它使用*机器名称*，据我所知，在这种情况下是我的 IP：

> 127.0.0.1

，然后它要求*服务器名称*必须与证书 ( *Test.cer* )上的*服务器名称匹配。*我尝试了多种组合（例如“Test”“LocalMachine”，“127.0.0.1”，但似乎无法让给定*服务器名称*的客户端匹配，从而允许连接。我得到的错误是：

 **> 证书错误：RemoteCertificateNameMismatch, RemoteCertificateChainErrors 异常：根据验证程序，远程证书无效

这是我使用的代码，它与 MSDN 示例的不同之处仅在于我在应用程序中为服务器分配了证书路径以及客户端的机器名称和服务器名称：

**SslTcpServer.cs**

```
using System;
using System.Collections;
using System.Net;
using System.Net.Sockets;
using System.Net.Security;
using System.Security.Authentication;
using System.Text;
using System.Security.Cryptography.X509Certificates;
using System.IO;

namespace Examples.System.Net
{
    public sealed class SslTcpServer
    {
        static X509Certificate serverCertificate = null;
        // The certificate parameter specifies the name of the file  
        // containing the machine certificate. 
        public static void RunServer(string certificate)
        {
            serverCertificate = X509Certificate.CreateFromCertFile(certificate);
            // Create a TCP/IP (IPv4) socket and listen for incoming connections.
            TcpListener listener = new TcpListener(IPAddress.Any, 8080);
            listener.Start();
            while (true)
            {
                Console.WriteLine("Waiting for a client to connect...");
                // Application blocks while waiting for an incoming connection. 
                // Type CNTL-C to terminate the server.
                TcpClient client = listener.AcceptTcpClient();
                ProcessClient(client);
            }
        }
        static void ProcessClient(TcpClient client)
        {
            // A client has connected. Create the  
            // SslStream using the client's network stream.
            SslStream sslStream = new SslStream(
                client.GetStream(), false);
            // Authenticate the server but don't require the client to authenticate. 
            try
            {
                sslStream.AuthenticateAsServer(serverCertificate,
                    false, SslProtocols.Tls, true);
                // Display the properties and settings for the authenticated stream.
                DisplaySecurityLevel(sslStream);
                DisplaySecurityServices(sslStream);
                DisplayCertificateInformation(sslStream);
                DisplayStreamProperties(sslStream);

                // Set timeouts for the read and write to 5 seconds.
                sslStream.ReadTimeout = 5000;
                sslStream.WriteTimeout = 5000;
                // Read a message from the client.   
                Console.WriteLine("Waiting for client message...");
                string messageData = ReadMessage(sslStream);
                Console.WriteLine("Received: {0}", messageData);

                // Write a message to the client. 
                byte[] message = Encoding.UTF8.GetBytes("Hello from the server.<EOF>");
                Console.WriteLine("Sending hello message.");
                sslStream.Write(message);
            }
            catch (AuthenticationException e)
            {
                Console.WriteLine("Exception: {0}", e.Message);
                if (e.InnerException != null)
                {
                    Console.WriteLine("Inner exception: {0}", e.InnerException.Message);
                }
                Console.WriteLine("Authentication failed - closing the connection.");
                sslStream.Close();
                client.Close();
                return;
            }
            finally
            {
                // The client stream will be closed with the sslStream 
                // because we specified this behavior when creating 
                // the sslStream.
                sslStream.Close();
                client.Close();
            }
        }
        static string ReadMessage(SslStream sslStream)
        {
            // Read the  message sent by the client. 
            // The client signals the end of the message using the 
            // "<EOF>" marker.
            byte[] buffer = new byte[2048];
            StringBuilder messageData = new StringBuilder();
            int bytes = -1;
            do
            {
                // Read the client's test message.
                bytes = sslStream.Read(buffer, 0, buffer.Length);

                // Use Decoder class to convert from bytes to UTF8 
                // in case a character spans two buffers.
                Decoder decoder = Encoding.UTF8.GetDecoder();
                char[] chars = new char[decoder.GetCharCount(buffer, 0, bytes)];
                decoder.GetChars(buffer, 0, bytes, chars, 0);
                messageData.Append(chars);
                // Check for EOF or an empty message. 
                if (messageData.ToString().IndexOf("<EOF>") != -1)
                {
                    break;
                }
            } while (bytes != 0);

            return messageData.ToString();
        }
        static void DisplaySecurityLevel(SslStream stream)
        {
            Console.WriteLine("Cipher: {0} strength {1}", stream.CipherAlgorithm, stream.CipherStrength);
            Console.WriteLine("Hash: {0} strength {1}", stream.HashAlgorithm, stream.HashStrength);
            Console.WriteLine("Key exchange: {0} strength {1}", stream.KeyExchangeAlgorithm, stream.KeyExchangeStrength);
            Console.WriteLine("Protocol: {0}", stream.SslProtocol);
        }
        static void DisplaySecurityServices(SslStream stream)
        {
            Console.WriteLine("Is authenticated: {0} as server? {1}", stream.IsAuthenticated, stream.IsServer);
            Console.WriteLine("IsSigned: {0}", stream.IsSigned);
            Console.WriteLine("Is Encrypted: {0}", stream.IsEncrypted);
        }
        static void DisplayStreamProperties(SslStream stream)
        {
            Console.WriteLine("Can read: {0}, write {1}", stream.CanRead, stream.CanWrite);
            Console.WriteLine("Can timeout: {0}", stream.CanTimeout);
        }
        static void DisplayCertificateInformation(SslStream stream)
        {
            Console.WriteLine("Certificate revocation list checked: {0}", stream.CheckCertRevocationStatus);

            X509Certificate localCertificate = stream.LocalCertificate;
            if (stream.LocalCertificate != null)
            {
                Console.WriteLine("Local cert was issued to {0} and is valid from {1} until {2}.",
                    localCertificate.Subject,
                    localCertificate.GetEffectiveDateString(),
                    localCertificate.GetExpirationDateString());
            }
            else
            {
                Console.WriteLine("Local certificate is null.");
            }
            // Display the properties of the client's certificate.
            X509Certificate remoteCertificate = stream.RemoteCertificate;
            if (stream.RemoteCertificate != null)
            {
                Console.WriteLine("Remote cert was issued to {0} and is valid from {1} until {2}.",
                    remoteCertificate.Subject,
                    remoteCertificate.GetEffectiveDateString(),
                    remoteCertificate.GetExpirationDateString());
            }
            else
            {
                Console.WriteLine("Remote certificate is null.");
            }
        }
        public static void Main(string[] args)
        {
            string certificate = "c:/Test.cer";
            SslTcpServer.RunServer(certificate);
        }
    }
} 
```

**SslTcpClient.cs**

```
using System;
using System.Collections;
using System.Net;
using System.Net.Security;
using System.Net.Sockets;
using System.Security.Authentication;
using System.Text;
using System.Security.Cryptography.X509Certificates;
using System.IO;

namespace Examples.System.Net
{
    public class SslTcpClient
    {
        private static Hashtable certificateErrors = new Hashtable();

        // The following method is invoked by the RemoteCertificateValidationDelegate. 
        public static bool ValidateServerCertificate(
              object sender,
              X509Certificate certificate,
              X509Chain chain,
              SslPolicyErrors sslPolicyErrors)
        {
            if (sslPolicyErrors == SslPolicyErrors.None)
                return true;

            Console.WriteLine("Certificate error: {0}", sslPolicyErrors);

            // Do not allow this client to communicate with unauthenticated servers. 
            return false;
        }
        public static void RunClient(string machineName, string serverName)
        {
            // Create a TCP/IP client socket. 
            // machineName is the host running the server application.
            TcpClient client = new TcpClient(machineName, 8080);
            Console.WriteLine("Client connected.");
            // Create an SSL stream that will close the client's stream.
            SslStream sslStream = new SslStream(
                client.GetStream(),
                false,
                new RemoteCertificateValidationCallback(ValidateServerCertificate),
                null
                );
            // The server name must match the name on the server certificate. 
            try
            {
                sslStream.AuthenticateAsClient(serverName);
            }
            catch (AuthenticationException e)
            {
                Console.WriteLine("Exception: {0}", e.Message);
                if (e.InnerException != null)
                {
                    Console.WriteLine("Inner exception: {0}", e.InnerException.Message);
                }
                Console.WriteLine("Authentication failed - closing the connection.");
                client.Close();
                return;
            }
            // Encode a test message into a byte array. 
            // Signal the end of the message using the "<EOF>".
            byte[] messsage = Encoding.UTF8.GetBytes("Hello from the client.<EOF>");
            // Send hello message to the server. 
            sslStream.Write(messsage);
            sslStream.Flush();
            // Read message from the server. 
            string serverMessage = ReadMessage(sslStream);
            Console.WriteLine("Server says: {0}", serverMessage);
            // Close the client connection.
            client.Close();
            Console.WriteLine("Client closed.");
        }
        static string ReadMessage(SslStream sslStream)
        {
            // Read the  message sent by the server. 
            // The end of the message is signaled using the 
            // "<EOF>" marker.
            byte[] buffer = new byte[2048];
            StringBuilder messageData = new StringBuilder();
            int bytes = -1;
            do
            {
                bytes = sslStream.Read(buffer, 0, buffer.Length);

                // Use Decoder class to convert from bytes to UTF8 
                // in case a character spans two buffers.
                Decoder decoder = Encoding.UTF8.GetDecoder();
                char[] chars = new char[decoder.GetCharCount(buffer, 0, bytes)];
                decoder.GetChars(buffer, 0, bytes, chars, 0);
                messageData.Append(chars);
                // Check for EOF. 
                if (messageData.ToString().IndexOf("<EOF>") != -1)
                {
                    break;
                }
            } while (bytes != 0);

            return messageData.ToString();
        }
        public static void Main(string[] args)
        {
            string serverCertificateName = null;
            string machineName = null;
            /*
            // User can specify the machine name and server name. 
            // Server name must match the name on the server's certificate. 
            machineName = args[0];
            if (args.Length < 2)
            {
                serverCertificateName = machineName;
            }
            else
            {
                serverCertificateName = args[1];
            }*/
            machineName = "127.0.0.1";
            serverCertificateName = "David-PC";// tried Test, LocalMachine and 127.0.0.1
            SslTcpClient.RunClient(machineName, serverCertificateName);
            Console.ReadKey();
        }
    }
} 
```

编辑：

服务器接受客户端连接和所有内容，但在等待客户端发送消息时超时。（由于证书中的服务器名称与我在客户端提供的名称不同，客户端不会向服务器进行身份验证）这就是我的想法，只是为了澄清

更新：

根据答案，我已将证书制造商更改为：

> makecert -sr LocalMachine -ss My -n "CN=localhost" -sky exchange -sk 123456 c:/Test.cer 在我的客户端我有：

```
 machineName = "127.0.0.1";
        serverCertificateName = "localhost";// tried Test, LocalMachine and 127.0.0.1
        SslTcpClient.RunClient(machineName, serverCertificateName); 
```

现在我得到了例外：

> RemoteCertificateChainErrors 异常：根据验证程序，远程证书无效

这是发生在这里：

```
 // The server name must match the name on the server certificate. 
            try
            {
                sslStream.AuthenticateAsClient(serverName);
            }
            catch (AuthenticationException e)
            {

                Console.WriteLine("Exception: {0}", e.Message);
                if (e.InnerException != null)
                {
                    Console.WriteLine("Inner exception: {0}", e.InnerException.Message);
                }
                Console.WriteLine("Authentication failed - closing the connection. "+ e.Message);
                client.Close();
                return;
            } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T09:05:49.373

答案可以在[SslStream.AuthenticateAsClient 方法](http://msdn.microsoft.com/en-us/library/ms145060.aspx)备注部分找到：

> 为 targetHost 指定的值必须与服务器证书上的名称匹配。

如果为服务器使用主题为“CN=localhost”的证书，则必须调用 AuthenticateAsClient 并将“localhost”作为 targetHost 参数才能在客户端成功对其进行身份验证。如果您将使用“CN=David-PC”作为证书主题，那么您必须调用 AuthenticateAsClient 并将“David-PC”作为 targetHost。SslStream 通过将您打算连接的服务器名称（以及您传递给 AuthenticateAsClient）与从服务器接收的证书中的主题进行匹配来检查服务器身份。实践是运行服务器的机器名称与证书主题的名称相匹配，并且在客户端中，您将与用于打开连接的主机名相同的主机名传递给 AuthenticateAsClient（在本例中为 TcpClient）。

但是，在服务器和客户端之间成功建立 SSL 连接还有其他条件：传递给 AuthenticateAsServer 的证书必须有一个私钥，它必须在客户端计算机上受信任，并且不得有任何与建立 SSL 会话相关的密钥使用限制。

现在与您的代码示例有关，您的问题与证书的生成和使用有关。

*   您没有为您的证书提供颁发者，因此它不能被信任 - 这是 RemoteCertificateChainErrors 异常的原因。我建议为开发目的创建一个自签名证书，指定 makecert 的 -r 选项。

*   要获得信任，证书必须是自签名的并放置在 Windows 证书存储中的受信任位置，或者必须通过签名链链接到已经受信任的证书颁发机构。因此，不要使用 -ss My 选项将证书放置在个人存储中，而是使用 -ss root 将其放置在受信任的根证书颁发机构中，并且它将在您的机器上受信任（从代码中我假设您的客户端正在运行在与服务器相同的机器上，并且在其上生成证书）。

*   如果您指定一个输出文件到 makecert，它会将证书导出为 .cer，但这种格式仅包含公钥，而不包含服务器建立 SSL 连接所需的私钥。最简单的方法是从服务器代码中的 Windows 证书存储区读取证书。（您也可以将其以另一种格式从存储中导出，该格式允许存储私钥，如此处所述使用私钥[导出证书并](http://technet.microsoft.com/en-us/library/cc737187%28v=ws.10%29.aspx)在服务器代码中读取该文件）。

您可以在此处找到有关使用的 makecert 选项的详细信息[证书创建工具 (Makecert.exe)](http://msdn.microsoft.com/en-us/library/bfsktky3.aspx)

总之，您的代码需要进行以下更改才能运行（使用最新的代码更新进行测试）：

*   使用以下命令生成证书：

> makecert -sr LocalMachine -ss root -r -n "CN=localhost" -sky exchange -sk 123456

*   从 Windows 证书存储而不是文件中读取证书（为了本示例的简单性），因此替换

> serverCertificate = X509Certificate.CreateFromCertFile(certificate);

在服务器代码中：

```
X509Store store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);
var certificates = store.Certificates.Find(X509FindType.FindBySubjectDistinguishedName, "CN=localhost", false);
store.Close();

if (certificates.Count == 0)
{
    Console.WriteLine("Server certificate not found...");
    return;
}
else
{
    serverCertificate = certificates[0];
} 
```

如果您稍后更改代码，请记住将“CN = localhost”替换为您打算使用的证书主题（在这种情况下，应该与传递给 makecert 的 -n 选项的值相同）。还要考虑在服务器证书的主题中使用运行服务器的机器名而不是 localhost。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T10:51:37.610

服务器证书的 CN 必须与服务器的域名完全相同。我想，在您的情况下，通用名称必须是“localhost”（不带引号）。

重要提示：当然，正如您可能在其他答案中读到的那样，永远不要`CN="localhost"`在生产中使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-01T12:21:36.630

首先，不要创建主题为“CN=localhost”或同等主题的证书。它永远不会在生产中使用，所以不要这样做。始终将其发送到您计算机的主机名，例如 CN="mycomputer"，并在连接时使用主机名而不是 localhost。您可以使用“主题备用名称”扩展名指定多个名称，但`makecert`似乎不支持它。

其次，在颁发服务器 SSL 证书时，需要将“服务器身份验证”OID 添加到证书的增强型密钥使用 (EKU) 扩展中。在您的示例中添加`-eku 1.3.6.1.5.5.7.3.1`参数。`makecert`如果要进行客户端证书身份验证，请使用 1.3.6.1.5.5.7.3.2 的“客户端身份验证”OID。

最后，makecert 创建的默认证书使用 MD5 作为其哈希算法。MD5 被认为是不安全的，虽然它不会影响您的测试，但请养成使用 SHA1 的习惯。添加`-a sha1`到`makecert`上面的参数以强制 SHA1。默认密钥大小也应该从 1024 位增加到 2048 位，但你明白了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T07:23:12.637

要使其与 WCF 一起使用，必须首先创建一个自签名的根颁发机构证书，然后使用它为 localhost 创建证书。

我认为这也可能适用于您的项目，请查看这篇文章[如何：创建临时证书以在开发期间使用](http://msdn.microsoft.com/en-us/library/ms733813.aspx)以获取详细信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T10:58:33.470

你有没有尝试过：？

为完整的域名创建证书，例如`example.net`（最好使用`example.net`，`example.com`或`example.org`任何故意不是真实名称的名称）或将在实时使用中使用的名称（如果这是单个站点并且您知道它将是什么）。

更新您的主机文件，使其使用 127.0.0.1 作为该名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T21:40:51.000

关于您的更新：

[SslStream 构造函数之一](http://msdn.microsoft.com/en-us/library/ms145056.aspx)允许您提供[RemoteCertificateValidationCallback 委托](http://msdn.microsoft.com/en-us/library/system.net.security.remotecertificatevalidationcallback.aspx)。您应该能够在您提供的方法中放置一个断点，以查看您得到的实际错误是什么。检查发送的[SslPolicyErrors](http://msdn.microsoft.com/en-us/library/ms145055.aspx)值。**

# java - Is that possible to do a keystroke simulate to a website?

> ID：12120638
> 
> 赞同：-3
> 
> 时间：2012-08-25T09:04:16.963
> 
> 标签：java, javascript, groovy

I came across [typing.io](http://typing.io/) site. It is nice. I was wondering whether I can write a Java/Groovy/Javascript program to simulate the typing process.

Is that possible to do so?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:14:28.953

如果您要问如何向任何站点上的任何组件发送密钥，我会回答：
**Selenium Webdriver**应该可以完成这项工作。

有关基本示例，请参阅： [http ://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

根据您的喜好，您可以使用 java 或 javascript 实现解决方案。

密钥发送自身的重要方法是：

```
 WebElement element = ...
    // Enter keys to type on element
    element.sendKeys("Magic!"); 
```

# php - transfering data from a php script file to another

> ID：12120645
> 
> 赞同：0
> 
> 时间：2012-08-25T09:06:01.110
> 
> 标签：php, phpmyadmin

here is my code...

```
loginscript.php
<?php
ini_set('display_errors', true);
$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="seelsdb"; // Database name 
$tbl_name="tblteacher"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$uname=$_POST['uname']; 
$pword=$_POST['pword']; 
// To protect MySQL injection (more detail about MySQL injection)
$uname = stripslashes($uname);
$pword = stripslashes($pword);
$uname = mysql_real_escape_string($uname);
$pword = mysql_real_escape_string($pword);
$sql="SELECT * FROM $tbl_name WHERE teacherEmail='$uname' and teacherPass='$pword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_start();
$_SESSION['loginp']=$pword;
$_SESSION['login']=$uname;
header("location:schedule.php");
}
else {
echo "Wrong Username or Password";
}

?> 
```

and here is a snippet of schedule.php

```
<?php
session_start();
$uname=$_SESSION['login'];
echo $uname;
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body class="body">
<table class="maintable">
<tr valign="top">
<td align="center">
<img src="images/banner.jpg"   />
</td>
</tr>

<tr>
<td>
<!-- this part is for the menu area -->
</td>
</tr>
</table>
<table>
<tr valign="top">
<td width="20%">
<!-- this part is for the login part -->
<table>
<tr>
<td>
<!-- i want to display $_SESSION['login'] here -->
WELCOME! $uname 
</td>
</tr>

</table> 
```

now, how can i get the value of $_SESSION['login'] from loginscript.php and display it in one of the table cells in schedule.php???

i am getting an error that says Notice: Undefined index: login

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:43:53.020

利用;

```
WELCOME! <?php echo $uname; ?> 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:10:41.583

simple, you should print the variable with `PHP`

```
WELCOME! <?php echo $uname; ?> 
```

on the other hand, in first file (`loginscript.php`) you should add `session_start()` right before `<?php` because you have `ini_set('display_errors', true);` and that will break your session.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:11:20.233

首先，您应该在 loginscript.php 中发送标头之前启动会话。其次，您应该像 . 在源代码`session_start();`中，您应该在 loginscript.php 中添加一行（这应该是第一行），并且在 HTML 代码中打印用户名时，您应该而不是`echo hello $uname`编写`<? echo"hello $uname"; ?>`

# jsf - How to use .jsf extension in URLs?

> ID：12120648
> 
> 赞同：10
> 
> 时间：2012-08-25T09:06:52.740
> 
> 标签：jsf, jsf-2, url-pattern, servlet-mapping

I'm developing a JSF 2 web application. For prestige purpouses I would like that every URL ends with `.jsf` extension. Now it ends with `.xhtml`. If I change it directly to `.jsf` in web browser address bar, then a HTTP 500 error is shown.

How can I set it to `.jsf`?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T12:14:17.347

JSF 页面的 URL 模式由`<servlet-mapping>`in`FacesServlet`指定`web.xml`。正如您提到的那样`.xhtml`工作正常，您显然已将其配置如下：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>      
</servlet-mapping> 
```

您需要`<url-pattern>`相应地更改以获得所需的虚拟 URL 扩展名。

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>      
</servlet-mapping> 
```

这就是您真正需要更改的所有内容，以实现具体的功能需求。

**然而**，这带来了一个安全问题。`.jsf`将 URL 中的扩展名从更改回 时，最终用户现在可以看到原始 Facelets 文件源代码`.xhtml`。您可以通过添加以下安全约束来防止这种情况`web.xml`：

```
<security-constraint>
    <display-name>Restrict access to Facelets source code.</display-name>
    <web-resource-collection>
        <web-resource-name>Facelets</web-resource-name>
        <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint/>
</security-constraint> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T09:28:25.110

```
 <context-param>
  <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
  <param-value>.xhtml</param-value>
 </context-param>

<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-13T07:14:41.483

```
you can add this code in your web.xml, and you can run your pages ends with xhtml, jsf or faces
 <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping> 
```

# ruby - Using Capybara with Headless in Windows OS

> ID：12120649
> 
> 赞同：2
> 
> 时间：2012-08-25T09:07:33.660
> 
> 标签：ruby, windows, capybara, headless-browser

I am using headless gem to run Capybara without opening browser in Linux. Headless uses xvfb. Is there something similar for Windows OS or Mac?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:07:40.430

capybara-webkit 和 poltergeist 在 Mac 上运行得很好。

Poltergeist 使用[phantomjs](http://phantomjs.org)来完成繁重的工作，这在 Windows 上可用，因此 poltergeist 可能可以在那里工作，尽管它的文档说 Windows 不受支持。

Capybara-webkit 将 32 位 windows 列为社区支持的平台，因此它应该可以在那里工作。

# c# - Web Service check in SOAP UI with Session

> ID：12120653
> 
> 赞同：0
> 
> 时间：2012-08-25T09:08:15.797
> 
> 标签：c#, asp.net, .net, web-services, soapui

I have a simple web-service on .Net 3.5 in which there is a method of HelloWorld() as below

```
[WebMethod(EnableSession=true)]
public string HelloWorld() {
    if (Session["Count"] == null) { Session["Count"] = 1; }
    Session["Count"] = Convert.ToInt32(Session["Count"]) + 1;
    return "Hello World " + Session["Count"];
} 
```

which works in ASP.NET web-browser and IIS and returns output `Hello World 1, 2, 3, 4 and soon....` depend on how much page open or refresh.

After some time according to requirement of project i was used SOAPUI tool (for testing of web service).
I create new project in SOAPUI and insert the url of service like `http://www.myservices/service.asmx?wsdl`

In SOAPUI there is a method with same name but when i execute it the open every time it creates a new session. means its returns me `Hello World 1, 1, 1, 1` at all the time, not maintain Sessions.

However i need to maintain the session for the testing of service.
Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:23:52.537

维护会话需要客户端的 cookie 支持。很可能您的客户端禁用了 cookie。您可以使用任何 http 调试器（如 Fiddler）轻松验证这一点，只需发布​​两个请求并查看第一个请求（应设置 cookie）和第二个请求（应携带 cookie）的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T20:13:40.900

Wiktor Zychla，感谢您的帮助，最后我发现我们如何在 SOAP UI 中处理会话。

我们需要在testCase中添加Request，添加HTTP Test Request。还要检查维护 HTTP 会话的选项。参考：[http ://beforedikshaforgets.blogspot.com/2011/08/soap-ui-creating-test-case.html](http://beforedikshaforgets.blogspot.com/2011/08/soap-ui-creating-test-case.html)

此外，根据我的理解，SOAPUI 4.0 中存在一个错误，因此我将我的服务转移到 SOAOUI 4.5 上以维护会话

# php - How to code a timed membership?

> ID：12120654
> 
> 赞同：0
> 
> 时间：2012-08-25T09:08:22.483
> 
> 标签：php, mysql

Well for my site i want my users to be on a monthly membership. so once they buy the membership they will have it for 31 days. how do i make it so when the 31 days run out they lose there membership. also I want to make the monthly membership Recurring. I guess ill just show you guys my ipn for paypal.

```
 <?php
 include("session1.php");
 ini_set('log_errors', true);
 ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

include('ipnlistener.php'); 
$listener = new IpnListener();

$listener->use_sandbox = true;
try {
$listener->requirePostMethod();
$verified = $listener->processIpn();
 } catch (Exception $e) {
 error_log($e->getMessage());
 exit(0);
 }

 if ($verified) {
 $errmsg = '';  
 if ($_POST['payment_status'] != 'Completed') { 
    exit(0); 
 }
 if ($_POST['mc_currency'] != 'USD') {
    $errmsg .= "'mc_currency' does not match: ";
    $errmsg .= $_POST['mc_currency']."\n";
 }
  else
 require("include/config.php");
 $mailer = "email@email.com";
  $item_name = $_POST['item_name'];
  $item_number = $_POST['item_number'];
 $payment_status = $_POST['payment_status'];
 $payment_amount = $_POST['mc_gross'];
 $payment_currency = $_POST['mc_currency'];
 $txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$email = $_POST['payer_email'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$custom = $_POST["custom"];
$userid = $custom;

mysql_query("UPDATE users SET plan='$item_name', memberstatus='member', subdays='31' WHERE username='$userid'");
$sql = "INSERT INTO orders VALUES 
(NULL, '$userid', '$receiver_email', '$item_name', '$payment_amount')";

    echo "Payment accpeted. Redirecting ";
    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:11:53.673

您可以使用数据库轻松完成此操作。将一个字段添加到您的`members`数据库表中，名为`last_renewed`. 此字段将包含`timestamp`成员最后一次续订帐户的时间。

在您的 php 文件中，将当前时间`last_renewed`与相差 31 天的值进行比较。

例如（使用 unix 时间戳）

```
$period = 31*24*60*60; //31 days in seconds.
if(time() - $member['last_renewed'] > $period)
{
  echo "You'll have to renew your account";
}
else
{
   //He's ok.
} 
```

编辑：您的更新代码：

```
$time = time(); //Current unix timestamp
mysql_query("UPDATE users SET plan='$item_name', memberstatus='member', subdays='$time' WHERE username='$userid'"); 
```

# r - Returning the median from two vectors in r

> ID：12120658
> 
> 赞同：-5
> 
> 时间：2012-08-25T09:08:43.430
> 
> 标签：r, vector, median

I have a vector containing the minimum and maximum of 3 ranges i.e

```
low<-1,2,3
high<-2,3,4 
```

represent the ranges 1-2,2-3,and 3-4

I need to return a third vector containing the midpoint of each range i.e.

```
mid<-1.5,2.5,3.5 
```

Any quick way to do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:12:44.713

假设你实际上有`low <- c(1, 2, 3)`等，那么：

```
mid <- (low + high)/2 
```

# c# - Get data from an object and put it in a textbox

> ID：12120663
> 
> 赞同：2
> 
> 时间：2012-08-25T09:09:33.800
> 
> 标签：c#

I have an object which contains 2 pieces of information in `objData[0]`. The information is `System_ID` and `Network_ID`. The data is coming from a query to a database.

I want to get the data out of the object and display it in two separate text boxes, one for `system_ID` and one for `Network_ID`. Right now I am putting them into a combo box.

See below my code:

```
 //get network ID and systenm name
    private void cmbAddItem_SelectedIndexChanged(object sender, EventArgs e)
    {
        FASystems fSys = new FASystems(sConn);
        object objData =  fSys.getSystemNetworkIDFriendlyName(cmbAddItem.Text.ToString());
        cmbNetworkID.DataSource = objData;
        cmbNetworkID.DisplayMember = "Network_ID";
        cmbSysName.DataSource = objData;
        cmbSysName.DisplayMember = "System_Name";
        // txtNetworkID.Text = objData[0].Network_ID;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:30:07.363

假设您的 C# 编译器是 3.0 或更高版本，请在 api 调用上使用 var 关键字

```
var objData =  fSys.getSystemNetworkIDFriendlyName(cmbAddItem.Text.ToString()); 
```

假设您是正确的，现在 objData 中有一个数组，其中的类型至少具有 Network_ID 作为成员...

```
txtNetworkID.Text = objData[0].Network_ID; 
```

那么应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:50:24.927

您能否发布 getSystemNetworkIDFriendlyName 的函数声明并显示您如何填充返回类型？

我建议创建一个新类来存储 NetworkID 和 SystemID

```
class SystemInfo
{
   public string NetworkID { get; set; } 
   public string SystemId { get; set; } 
} 
```

重写函数 getSystemNetworkIDFriendlyName 以返回 SystemInfo 的实例。然后填充你的文本框变成：

```
 FASystems fSys = new FASystems(sConn);
 SystemInfo inf o=  fSys.getSystemNetworkIDFriendlyName(cmbAddItem.Text.ToString());
 txtNetworkID.Text = info.NetworkID; 
```

希望这可以帮助，

肯C

# mysql - 我应该如何构建我的表格？

> ID：12120667
> 
> 赞同：0
> 
> 时间：2012-08-25T09:10:15.373
> 
> 标签：mysql, sql, database-design

我正在创建一个小在线测验/游戏。我有一个`users`-table 包含一个唯一的 auto-increment `id`、一个`username`字段、一个`password`字段和一个`ip`字段（从它创建的位置）。

它处理登录和类似的东西。

然后我需要跟踪用户进程。用户必须完成多个任务或级别。但是，您希望查看它。

对于每个任务，要求如下：

1.  跟踪用户为给定任务完成了多少次尝试
2.  跟踪他的最后一次尝试
3.  跟踪他失败的地方
4.  跟踪他最短的成功尝试
5.  跟踪他最近的成功尝试。

我要问的基本上是我应该如何构建我的表以使其尽可能顺利地工作，并且需要尽可能少的烦人的 SQL 查询和代码。

我是否应该为每个任务设置一个表，每一行都绑定到用​​户名和与上面列表相对应的字段？或者一个大表，其中一行绑定到用户名，指示哪个任务和所有与上面列表对应的字段？

我不确定，这就是我问的原因。

值得一提的是：我目前拥有的任何东西都不是一成不变的，所以我可以改变你想要的任何东西。

非常感谢任何帮助和/或建议。

提前致谢。

* * *

编辑：我还将为每个任务创建一个表：tasks(id, name, description, finish_message)

有了这个，我需要一个新的表结构来处理类似于我上面为用户和任务描述的任务，但用于任务和测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:24:33.013

我没有完全得到你的问题，但我认为以下结构可能会对你有所帮助：

```
 1\. users(userid, username, password, ipaddress)
    2\. tasks(taskid, task_description,...)--any other details you want
    3\. task_attempted(userid, taskid, last_successful_attempt, shortest_successful_attempt, last_attempt, last_failed_testid);
    4\. tests(testid, taskid, ...)--other details 
```

请澄清您的第三个要求：

```
Keep track of where he failed 
```

如果我没有误会您，用户可能无法继续对任务进行下一次测试，直到她成功完成当前测试，因此您可以为 test_id 添加一个字段，以跟踪特定任务中失败的 test_id。

# php - Display certain content of a web page via PHP

> ID：12120671
> 
> 赞同：1
> 
> 时间：2012-08-25T09:10:43.793
> 
> 标签：php

I'm using WAMP for my projects, but I'm not satisfied with the original index.php. I want to display the projects folder on the WAMP index page. Here's what I've managed to think about:

```
<? 
$sisis = file_get_contents('projektit');
echo $sisis;
?> 
```

But this won't do anything actually. Here's the projects folder displayed in browser:

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
    <head>
        <title>Index of /projektit</title>
    </head>
    <body>
        <h1>Index of /projektit</h1>
        <table>
            <tr>
                <th>
                    <img src="/icons/blank.gif" alt="[ICO]">
                </th>
                <th>
                    <a href="?C=N;O=D">Name</a>
                </th>
                <th>
                    <a href="?C=M;O=A">Last modified</a>
                </th>
                <th>
                    <a href="?C=S;O=A">Size</a>
                </th>
                <th>
                    <a href="?C=D;O=A">Description</a>
                </th>
            </tr>
            <tr>
                <th colspan="5">
                    <hr>
                </th>
            </tr>
            <tr>
                <td valign="top">
                    <img src="/icons/back.gif" alt="[DIR]">
                </td>
                <td>
                    <a href="/">Parent Directory</a>
                </td>
                <td>&nbsp;</td>
                <td align="right">-</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td valign="top">
                    <img src="/icons/folder.gif" alt="[DIR]">
                </td>
                <td>
                    <a href="CCCKauppa/">CCCKauppa/</a>
                </td>
                <td align="right">24-Aug-2012 22:43</td>
                <td align="right">-</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <th colspan="5">
                    <hr>
                </th>
            </tr>
        </table>
    </body>

</html> 
```

How would I display the links only on this page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:16:47.757

据我了解您的问题，您想生成带有链接的目录列表。（如果我理解错了，请评论回答）

# 对于 PHP 5 及更高版本

你可以使用[scandir](http://www.php.net/manual/en/function.scandir.php)（PHP5函数）并做类似的事情

```
<ul> 
<?php 
$dir = '/projektit'; 
$files = scandir($dir); 
foreach($files as $ind_file){ 
?> 
<li><a href="<?php echo $dir."/".$ind_file;?>"><?php echo $ind_file;?></a></li> 
<?php 
} 
?> 
</ul> 
```

我还没有测试它，所以可能需要一些调整。

# 对于较旧的 PHP 版本

如果这不起作用，您需要[opendir](http://php.net/manual/en/function.opendir.php)、[readdir](http://www.php.net/manual/en/function.readdir.php)和[closedir](http://www.php.net/manual/en/function.closedir.php)函数。

```
$dir = opendir('projektit/'); 
echo '<ul>';
while ($read = readdir($dir)) 
{

if ($read!='.' && $read!='..') 
{ 
echo '<li><a href="files/'.$read.'">'.$read.'</a></li>'; 
}

}

echo '</ul>';

closedir($dir); 
```

# 更新

[此处已准备好使用](http://goo.gl/YVC2V)具有返回父文件夹功能的目录列表器。[演示](http://goo.gl/wHlSp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:19:39.530

您可以使用 scandir 获取文件夹中的所有文件。

```
$scanned = scandir($your_path);

// if you want to display only folders then you can:
// But please notice that array filter with anonymous function is available since PHP 5.3.0
$scanned = array_filter($scanned, function($el) { if (strpos($el, '.') === false) return $el; });

foreach($scanned as $folder)
   echo $folder; 
```

基本上，这个想法是获取一个文件夹中的所有文件（`$your_path`在这种情况下），并删除这些带有扩展名的文件。因此，您手头只有文件夹。

# sharepoint - Check if a SharePoint timer job is currently running

> ID：12120672
> 
> 赞同：3
> 
> 时间：2012-08-25T09:10:48.293
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-timer-job

How can I check if a SharePoint timer job is currently running on one of the WFEs ? (Programatically of course).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T10:20:42.247

上面的代码不起作用，它只能找到已完成和中止的作业（因此是“历史”）

以下对正在运行的作业进行检查：

```
if (webapp.RunningJobs.Cast<SPRunningJob>().Any(curRunningJob => curRunningJob.JobDefinitionTitle.Equals(jobTitle))) 
```

来自[http://shareatsharepoint.blogspot.in/2012/11/finding-running-sharepoint-timer-job.html](http://shareatsharepoint.blogspot.in/2012/11/finding-running-sharepoint-timer-job.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:24:13.460

我创建了一个控制台应用程序并尝试放置一些代码，但不确定它是否满足您的要求：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Administration;
namespace SPTimerServices
{
    class Program
    {
        static void Main(string[] args)
        {
            const string MY_SERVER = "spsvr";
            var services = SPFarm.Local.Services;

            foreach (SPService service in services)
            {
                if (service is SPWebService)
                {
                    var webService = (SPWebService)service;
                    foreach (SPWebApplication webApp in webService.WebApplications)
                    {
                        foreach (SPJobDefinition job in webApp.JobDefinitions)
                        {
                            // Match with our server
                            if (job.Server != null && string.Compare(job.Server.Address, MY_SERVER, true) == 0)
                            {
                                // Console.WriteLine(job.Name);
                                foreach (var e in job.HistoryEntries)
                                {
                                    if (e.Status == SPRunningJobStatus.Initialized)
                                    {
                                        Console.WriteLine(job.Name);
                                    }
                                }

                            }
                        }
                    }
                }

            }
            Console.WriteLine("Press any key to continue...");
            Console.ReadLine();    
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T10:35:41.050

使用 PowerShell

```
CLS

Get-SPWebApplication | ForEach-Object {
    $_.WebService.RunningJobs | select JobDefinitionTitle,ServerName,
        StartTime,PercentageDone,status | Format-Table -autosize} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T23:25:30.623

您可能需要探索工作经历。请查看这些链接。

[https://sharepoint.stackexchange.com/questions/32968/timer-job-programatically-check-status](https://sharepoint.stackexchange.com/questions/32968/timer-job-programatically-check-status)

[http://www.c-sharpcorner.com/blogs/7549/programmatically-get-the-timer-jobs-history-for-a-particular.aspx](http://www.c-sharpcorner.com/blogs/7549/programmatically-get-the-timer-jobs-history-for-a-particular.aspx)

# asp.net - ASP.NET MVC：在不使用助手的情况下使用 ASPX 视图引擎？

> ID：12120673
> 
> 赞同：0
> 
> 时间：2012-08-25T09:10:49.423
> 
> 标签：asp.net, razor, runat

我讨厌那些剃须刀帮手。（LabelFor，TextboxFor ...）他们试图帮助我，但他们什么也没教我。

我想尝试使用 ASPX 引擎。当我打开它时，左侧甚至还有工具箱，里面有所有旧的好 html 命令。为什么我不能使用它？

当我知道 MVC 不需要它时，为什么当我尝试构建应用程序智能感知时说 runat="server" 是必需的？

简而言之，如何使用 helpers 编写不带 HTML 的 HTML？任何建设性的建议将不胜感激。

样本：

```
<%@ Page Language="VB" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %>

<asp:Content ID="indexTitle" ContentPlaceHolderID="TitleContent" runat="server">Home Page</asp:Content>

<asp:Content ID="indexContent" ContentPlaceHolderID="MainContent" runat="server">
   <asp:ListBox runat="server">
        <asp:ListItem Text="text1" />
        <asp:ListItem Text="text2" />
    </asp:ListBox>
</asp:Content> 
```

错误：

```
`Server Error in '/' Application.
Control 'MainContent_ctl00' of type 'ListBox' must be placed inside a form tag with runat=server.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Web.HttpException: Control 'MainContent_ctl00' of type 'ListBox' must be placed inside a form tag with runat=server.

Source Error:

Line 22:                 <ul id="menu">
Line 23:                     <li><%: Html.ActionLink("Home", "Index", "Home")%></li>
Line 24:                     <li><%: Html.ActionLink("About", "About", "Home")%></li>
Line 25:                 </ul>
Line 26:             </div>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:22:51.730

您讨厌剃须刀助手，但喜欢使用工具箱中的预定义元素？工具箱中的项目适用于 Web 表单，但也可用于 MVC。这是因为 MVC 和 webforms 仍然是 asp.net 家族的成员。但是，我真的不建议这样做...

> 简而言之，如何使用 helpers 编写不带 HTML 的 HTML？

你如何写一个简单的文本？只需根据需要键入 html 标签。您可以使用 razor/aspx（您选择哪一种并不重要）语法来循环您的集合并根据您的数据构造 html。没有什么会强迫您使用剃刀助手或网络表单控件...

我认为现在可能是了解更多有关您正在使用的技术的正确时间，因为您似乎对这里真正基本的东西感到困惑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:56:39.900

ListBox 是一个 .Net 化的 SELECT 元素。在剃刀模板中，您可能可以执行以下操作：

```
<select id="list1">
  @for // some loop condition
  {
    <option value="@Data.someValue">Text1</option>
  }
</select> 
```

... where`@Data`绑定到模型，`Text1`也可以类似地声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:18:20.877

> 我讨厌那些剃须刀帮手。(LabelFor, TextboxFor...)

ASP.NET MVC 是一种与经典 WebForms 截然不同的模式和概念。如果您不喜欢这些新概念，这可能意味着 ASP.NET MVC 不适合您。您总是可以回到经典的 WebForms 开发。

> 简而言之，如何使用 helpers 编写不带 HTML 的 HTML？

ASP.NET MVC 中没有任何东西会强制您使用帮助程序。您可以在视图中完美地编写纯静态 HTML：

```
<form action="/home/save" action="post">
    <label for="first_name">First name</label>
    <input type="text" name="first_name" id="first_name" />

    <label for="item">Select an item</label>
    <select id="item" name="item">
        <option value="1">item 1</option>
        <option value="2">item 2</option>
        <option value="3">item 3</option>
    </select>

    <button type="sybmit">OK</button>
</form> 
```

显然，现在您可以忘记模型中的自动数据绑定、验证、路由等事情......

就您在带有 runat="server" 的表单中的 ListBox 所遇到的问题而言，您似乎在不受支持的 ASP.NET MVC 应用程序中使用了一些经典的 WebForms 服务器端控件。服务器端控件在 MVC 中不起作用，因为它们依赖于 ViewState 之类的东西，并且需要您将它们放在带有 runat="server", ... 的表单中，这些东西在 MVC 中不再存在。

所以我建议你继续阅读一些关于 MVC 的入门教程：http: [//asp.net/mvc](http://asp.net/mvc)

# android - 如何在启用滚动的情况下并排放置两个文本视图？

> ID：12120675
> 
> 赞同：0
> 
> 时间：2012-08-25T09:11:14.007
> 
> 标签：android, android-layout, android-widget

这是我的代码的一部分，但我不想使用 android:layout_width="240dp"。请帮助。有两个文本视图，两个文本视图都很长，但它们不应该超出布局并且启用了水平滚动。

```
<LinearLayout
    android:id="@+id/layoutSlide1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/option_bar"
    android:orientation="horizontal" >

    <!-- OPtion 1 -->

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView2"
        android:layout_width="240dp"
        android:layout_height="wrap_content"
        android:paddingLeft="30dp"
        android:paddingTop="5dp" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvOptionA"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:maxLines="1"
                android:text="A - Option A "
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#ffffff"
                android:textStyle="bold" />
        </LinearLayout>
    </HorizontalScrollView>

    <!-- OPtion 2 -->

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="5dp"
        android:paddingLeft="60dp"
        android:paddingTop="5dp"
        android:paddingRight="30dp" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvOptionB"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:lines="1"
                android:text="B - Option B"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#ffffff"
                android:textStyle="bold" />
        </LinearLayout>
    </HorizontalScrollView>
</LinearLayout> 
```

我制作了一张 Photoshop 图片来展示我想要的东西；有两种不同的滚动视图。

![我的问题](../Images/cb25fbdd4cd7b2e5bb6ec4d959c5c955.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:40:17.600

根据此操作您的代码：

```
<LinearLayout>

  <HorizontalScrollView
   android:layout_width="0dp"
   android:layout_weight="1">

      <LinearLayout>

         <TextView>
         </TextView>

     </LinearLayout>

  </HorizontalScrollView>

  <HorizontalScrollView
   android:layout_width="0dp"
   android:layout_weight="1">

      <LinearLayout>

         <TextView>
         </TextView>

     </LinearLayout>

  </HorizontalScrollView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:28:59.547

使用此代码，我已对其进行了测试，它可以按照您的喜好工作。 ![在此处输入图像描述](../Images/5164373746243a1b6b20c0ef4b4bebe2.png) **编辑**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="30dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/tvOptionA"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00ff00"
            android:maxLines="1"
            android:padding="30dp"
            android:text="A - Option Aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ff0000"
            android:textStyle="bold" />
    </HorizontalScrollView>
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="30dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/tvOptionB"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#00ff00"
            android:maxLines="1"
            android:padding="30dp"
            android:text="B - Option Bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ff0000"
            android:textStyle="bold" />
    </HorizontalScrollView>
</LinearLayout> 
```

# spring - 为什么 /home.jsp 的 bean 名称不适用于 BeanNameUrlHandlerMapping？

> ID：12120686
> 
> 赞同：0
> 
> 时间：2012-08-25T09:12:59.647
> 
> 标签：spring, spring-mvc

在下面的程序中，如果我将 dispatcher-servlet.xml 和 index.jsp 中的“/home.htm”替换为“/home.jsp”，那么服务器将找不到 home.jsp。以“.jsp”结尾的字符串作为 bean 名称是否无效？

**调度程序-servlet.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    <bean id="handlerMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/>
    <bean name="/home.htm" class="com.sample.HomePageController" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

</beans> 
```

**索引.jsp**

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
  <head>
    <title>Dynamic Tiles</title>
  </head>
  <body>
    <form action="/home.htm" method="post">
        Please enter your name:&nbsp;
        <input type="text" name="visitorName" />
        <input type="submit" value="Go"/>
    </form>
  </body>
</html> 
```

**主页控制器.java**

```
package com.sample;

import org.apache.log4j.Logger;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;

public class HomePageController  extends AbstractController {

    private static Logger logger = Logger.getLogger(HomePageController.class);

    HomePageController () {
        logger.info("Constructing HomePageController object");
    };

    public ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {
        logger.info("Handling request for home.jsp");

        return new ModelAndView("home", "visitorName", request.getParameter("visitorName"));
    }

} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
           version="2.5">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:36:40.633

您的应用程序有几个部分需要修改才能按预期工作。第一部分是 web.xml 中的 Dispatcher Servlet 映射。在 Spring 中，调度程序用于将特定请求从客户端路由到应用程序中的 Spring 控制器。通过调度程序路由的请求由 web.xml 文件中为 servlet 指定的 url-pattern 确定：org.springframework.web.servlet.DispatcherServlet。

在您的情况下，我们希望将 url-pattern 设置为与访问您的 jsp 文件不冲突的内容。由于您在 Spring 配置中指定了一个 viewResolver，它以 /WEB-INF/jsp/ 作为通用名称的前缀并以 .jsp 为后缀，因此我们必须使用 .jsp 以外的 url-pattern。

如果使用 .jsp url 模式，则请求将首先由调度程序 servlet 处理并路由到任何映射的控制器。如果控制器尝试使用视图名称导航到另一个页面，例如主页，则视图名称会带有前缀/后缀，从而产生一个 url：/WEB-INF/jsp/home.jsp。这个构造的 URL 与为调度程序指定的 .jsp url 模式匹配，并尝试路由 /WEB-INF/jsp/home.jsp，很可能失败，因为没有找到映射。

为了解决这个问题，我们如下设置您的 web.xml：

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
</web-app> 
```

如您所见，我们将调度程序映射到 url-pattern *.do。这允许调度程序用于路由请求而不会干扰公共文件前缀。将 url-pattern 更改为 *.do 需要我们更改表单上的操作。我将您的表格修改为以下内容：

**索引.jsp**

```
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<html>
<head>
<title>Dynamic Tiles</title>
</head>
<body>
    <form action="home.do" method="post">
        Please enter your name:&nbsp; <input type="text" name="visitorName" />
        <input type="submit" value="Go" />
    </form>
</body>
</html> 
```

我还假设您的所有 .jsp 文件都位于 WEB-INF 目录中。这要求我们使用控制器来访问这些 .jsp 文件中的每一个。必须在调度程序的 Spring 配置文件中创建到控制器的映射，并且必须为 index.jsp 创建适当的控制器。请注意，我使用 .do 后缀作为映射。

**调度程序-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="handlerMapping"
        class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping" />
    <bean name="/home.do" class="com.sample.HomePageController" />
    <bean name="/index.do" class="com.sample.IndexPageController" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
</beans> 
```

**索引页面控制器.java**

```
package com.sample;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;

public class IndexPageController extends AbstractController {

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest arg0,
            HttpServletResponse arg1) throws Exception {
        return new ModelAndView("index");
    }
} 
```

为了彻底起见，我创建了一个 home.jsp 文件来测试应用程序，因为没有提供它。这是我的 home.jsp 文件：

**主页.jsp**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello, ${visitorName}  
</h1>

<P>  The time on the server is ${serverTime}. </P>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:18:58.967

您决定`dispatcher`只处理`.htm`-ended url，但您希望它处理`.jsp`-ended url。为了让后者工作，只需将`url-pattern`元素的内容更改`web.xml`为，例如，如下所示：

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.jsp</url-pattern>
</servlet-mapping> 
```

# django - 我使用 Django-piston，我如何使用 handler.py 从服务器分页数据？

> ID：12120687
> 
> 赞同：0
> 
> 时间：2012-08-25T09:13:01.770
> 
> 标签：django, django-piston

我的代码

```
class PointHandlerDynamic(BaseHandler):
    model = Points
    fields = ('Point_ID', 'X_Coor', 'Y_Coor', 'Seat_ID_ID')

   def Seat_ID_ID(self, instance):
      return instance.Sear_ID.ID

   def read(self, name=None):
      cursor = connection.cursor()        
      //page=1, offset 4000
      cursor.execute("select Point_ID,Seat_ID,X_Coor,Y_Coor,Seats.Color,Seats.Caption,Seats.Tier,Seats.Area,Seats.Booked,Prices.Price from Points,Seats,Prices where Seat_ID = Seats.ID and Seats.Color = Prices.Color")
       transaction.commit_unless_managed()
       row = cursor.fetchall()
       return row 
```

我想当ajax调用handler.py时，ajax会增加'page'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:56:17.160

默认情况下，该`BaseHandler` `read()`方法接受更多参数：

```
def read(self, request, *args, **kwargs): 
```

因此，您可能希望使用`request.GET`元素进行分页。然后，您可以将请求中的 LIMIT 和 OFFSET 值传递给 SQL 查询。

我不确定您要实现什么目标，但在我看来，您可能可以使用 django ORM 来检索数据，而不是使用连接和游标，您的查询看起来并不太复杂。你的问题也很难理解，但我认为你需要的是某种分页。

# sql - 如何在数据库中实现元数据目录和自动化 SQL？

> ID：12120693
> 
> 赞同：23
> 
> 时间：2012-08-25T09:13:55.910
> 
> 标签：sql, database-design, entity-attribute-value, database-normalization, schema-design

我在这里阅读了关于 5NF、EAV 和 6NF 的讨论，以及对“自动”处理元数据和复杂 SQL 的目录的需求。这在实践中是如何实施的？

PerformanceDBA 在 6NF 和 EAV 上写了几个提到目录的答案，例如在以下问题中：

*   [想通过一个例子来理解 6NF](https://stackoverflow.com/questions/4824714/would-like-to-understand-6nf-with-an-example)

*   [6NF和历史属性数据](https://stackoverflow.com/questions/8973779/6nf-and-historical-attribute-data)

*   尤其是PerformanceDBA[所写的](https://stackoverflow.com/a/4013207/458741)[Multiple fixed tables vs flexible abstract tables](https://stackoverflow.com/questions/4011956/multiple-fixed-tables-vs-flexible-abstract-tables)

    > “例如，对于带有目录的 6NF 数据库，我有一组 proc 将 [重新] 生成执行所有 SELECT 所需的 SQL，并且我为所有用户提供 5NF 视图，因此他们不需要知道或理解底层 6NF 结构。它们被排除在目录之外。因此，更改很容易且自动化。EAV 类型手动执行此操作，因为没有目录。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:08:06.407

首先，通过[LedgerSMB](http://ledgersmb.org)，我们可以尽可能地重用系统目录和信息模式。这意味着应用程序实际上会花费一些时间来查询系统目录。我们也有一些扩展属性的元数据计算。我们这里不做 EAV。相反，我们有关于这些的实际关系和元数据，这使我们能够在客户端创建关系查询。这些在某一点加载并缓存。该目录看起来很像 EAV 目录，但底层存储实际上是关系型的，维护这些底层表的功能会有所不同。这为您提供了 EAV 的灵活性，而没有潜在的困难。

在未来的版本中，我们可能会转向更少的应用程序目录，更多地使用 Pg 系统目录和信息模式，并且从应用程序的角度来看，我们的界面会更简单。

# sql-server - 来自数据库的信号

> ID：12120695
> 
> 赞同：1
> 
> 时间：2012-08-25T09:14:07.487
> 
> 标签：sql-server, database

我通过浏览器从用户那里填写了一个表格。我在数据库中输入值我想在数据库中的条目上调用一个脚本（不想从浏览器调用它，因为浏览器有超时问题。这个脚本可以如果需要，需要 10 小时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:17:46.917

看起来你需要一个触发器：

触发器是一种特殊类型的存储过程，当数据库服务器中发生事件时会自动执行。

例子：

```
USE AdventureWorks2012;
GO
IF OBJECT_ID ('Sales.reminder2','TR') IS NOT NULL
    DROP TRIGGER Sales.reminder2;
GO
CREATE TRIGGER reminder2
ON Sales.Customer
AFTER INSERT, UPDATE, DELETE 
AS
   EXEC msdb.dbo.sp_send_dbmail
        @profile_name = 'AdventureWorks2012 Administrator',
        @recipients = 'danw@Adventure-Works.com',
        @body = 'Don''t forget to print a report for the sales force.',
        @subject = 'Reminder';
GO 
```

[创建触发器 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

# ios - 重新加载视图使用NSUserDefaults后如何保存tableView单元格的复选标记？

> ID：12120696
> 
> 赞同：2
> 
> 时间：2012-08-25T09:14:17.643
> 
> 标签：ios, uitableview, checkmark

我是 ios 开发的新手，我在`UITableView`.

我想将选中的单元格存储在`NSUserDefaults`数据库中，当我重新加载应用程序时，将显示先前选择的选中单元格，我尝试不同的方式，但仍然未能实现它。

任何人都可以帮助我吗？我将不胜感激。对不起，我的英语不好。

**我的代码如下：**

```
#import "FirstRowSubview.h"

@interface FirstRowSubview ()

@end

@implementation FirstRowSubview

@synthesize array = _array;
@synthesize lastIndexPath = _lastIndexPath;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSMutableArray *list = [[NSMutableArray alloc] initWithObjects:@"ffgfgh", @"564654", @"56548", @"fgmjfgmf", @"ggkdj", nil];
    self.array = list;
    [list release];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.array = nil;
}

#pragma mark -
#pragma mark - TableView Datasource Methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *subviewCells = @"Cells";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:subviewCells];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:subviewCells];
    }
    NSUInteger oldRow = [_lastIndexPath row];
    cell.accessoryType = (indexPath.row == oldRow && _lastIndexPath != nil) ?
    UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;
    cell.textLabel.text = [_array objectAtIndex:indexPath.row];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[NSNumber numberWithInt:_lastIndexPath.row] forKey:@"lastIndexPath"];
    [defaults synchronize];

    return cell;
 }

#pragma mark -
#pragma mark - TableView Delegate Methods

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int newRow = [indexPath row];
    int oldRow = (_lastIndexPath != nil) ? [_lastIndexPath row] : -1;

    if (newRow != oldRow) {
        UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
        newCell.accessoryType = UITableViewCellAccessoryCheckmark;

        UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:_lastIndexPath];
        oldCell.accessoryType = UITableViewCellAccessoryNone;

        [indexPath retain];
        [_lastIndexPath release];
        _lastIndexPath = indexPath;

        [tableView deselectRowAtIndexPath:indexPath animated:YES];

    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T09:55:04.160

使用 . 可以很容易地存储和检索检查的单元格信息`NSUserDefaults`。

`NSUserDefaults`可以存储键/值对的数据。在您的情况下，值可能是布尔值，键可以是`NSString`& `indexpath.row`from的组合`UITableView`。

你可以制作一个函数，比如，

```
- (NSString *)getKeyForIndex:(int)index
{
    return [NSString stringWithFormat:@"KEY%d",index];
}

- (BOOL) getCheckedForIndex:(int)index
{                     
    if([[[NSUserDefaults standardUserDefaults] valueForKey:[self getKeyForIndex:index]] boolValue]==YES) 
    { 
        return YES;
    }
    else 
    { 
        return NO; 
    }
}

- (void) checkedCellAtIndex:(int)index
{
    BOOL boolChecked = [self getCheckedForIndex:index];

    [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:!boolChecked] forKey:[self getKeyForIndex:index]];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Here, you can check for previously checked cells like

    static NSString *subviewCells = @"Cells";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:subviewCells];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:subviewCells];
    }

    cell.textLabel.text = [_array objectAtIndex:indexPath.row];

    if([self getCheckedForIndex:indexPath.row]==YES)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    //Use checkedCellAtIndex for check or uncheck cell
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    [self checkedCellAtIndex:indexPath.row];

    if([self getCheckedForIndex:indexPath.row]==YES)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

PS 请注意，此方法仅在您的数据顺序`NSArray`始终保持相同顺序时才有用和建议。否则`NSUserDefaults`，您可以选择`SQLite Database`或`plist file`或任何其他选项！谢谢 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T09:34:38.037

这是一个基本示例，说明如何`NSIndexPaths`根据表的当前选择创建一个数组，然后将该数组保存到`NSUserDefaults`.

```
 -(void)viewDidLoad
{
    [super viewDidLoad];
    for (NSIndexPath *indexPath in [[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"mySavedMutableArray"]) {
        [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
} 
```

在这里，您可以在选择对象时将对象添加到数组中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"mySavedMutableArray"] addObject:indexPath];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

在这里，您将从数组中删除取消选择的对象。

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"mySavedMutableArray"] removeObject:indexPath];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:30:33.533

让您的代码正常工作的最简单方法是在视图中添加一行内容加载方法，如下所示：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if([defaults valueForKey:@"lastIndexPath"])
_lastIndexPath = [defaults valueForKey:@"lastIndexPath"]; 
```

这将解决您的问题:)

快乐编码:)

# c# - 带有gridview的回发请求给出奇怪的输出

> ID：12120697
> 
> 赞同：0
> 
> 时间：2012-08-25T09:14:21.037
> 
> 标签：c#, asp.net

```
 protected void gvRequest_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName == "Delete")
            {
                bm.DeleteBookRequest(Convert.ToInt32(e.CommandArgument));
                GetBooks();
            GetRequest();
            }
        }

    <asp:GridView ID="gvBooks" runat="server" AutoGenerateColumns="false" DataKeyNames="Id"
            BorderStyle="None" OnRowCommand="gvBooks_RowCommand" CssClass="gvBooks" CellPadding="5"
            CellSpacing="7" ForeColor="Blue" OnRowDeleting="gvBooks_RowDeleting">
            <Columns>
                <asp:BoundField DataField="Id" HeaderText="Id" />
                <asp:BoundField DataField="Title" HeaderText="Title" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton CommandName="Select" CommandArgument='<%# Eval("Title") %>' runat="server"
                            ID="lb_Id">Select</asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton CommandName="Delete" CommandArgument='<%# Eval("Title") %>' runat="server"
                            ID="lb_Title">Delete</asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:GridView ID="gvReviews" runat="server" AutoGenerateColumns="false" OnRowCommand="gvReviews_RowCommand"
            OnRowDeleting="gvReviews_RowDeleting" CellPadding="5" CellSpacing="7" ForeColor="Blue">
            <Columns>
                <asp:BoundField DataField="Id" HeaderText="Id" />
                <asp:BoundField DataField="Subject" HeaderText="Subject" />
                <asp:BoundField DataField="Username" HeaderText="Username" />
                <asp:BoundField DataField="Review" HeaderText="Review" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton CommandName="Delete" CommandArgument='<%# Eval("Id") %>' runat="server"
                            ID="lb_IdDel">Delete</asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:GridView ID="gvRequest" runat="server" onrowcommand="gvRequest_RowCommand" AutoGenerateColumns="false">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                    <asp:Label ID="lblName" runat="server" Text='<%# Eval("Title") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                    <asp:Label ID="lblUsername" runat="server" Text='<%# Eval("Username") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                    <asp:LinkButton ID="lbDelete" CommandName="Delete" CommandArgument='<%# Eval("id") %>' runat="server" Text="Delete"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

当我单击删除链接按钮时，输出是一个空白页。

点击按钮点击后的视图源如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content="text/html; charset=windows-1252" http-equiv=Content-Type>
<SCRIPT type=text/javascript src="http://www.google-analytics.com/ga.js" 
async="true"></SCRIPT>

<SCRIPT type=text/javascript src="http://sg.perion.com/v1.1/js/gt.js" 
async="true" onload="null"></SCRIPT>
</HEAD>
<BODY></BODY></HTML>

internal void DeleteBookRequest(int id)
        {
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "Delete from bookrequest where id=@id";
            cmd.Parameters.Add("@id", SqlDbType.BigInt, 19, "id").Value = id;
            cmd.Connection = connection;
            connection.Open();
            cmd.ExecuteNonQuery();
            connection.Close();            
        } 
```

# html - 为什么我的超链接对齐方式不同？

> ID：12120698
> 
> 赞同：1
> 
> 时间：2012-08-25T09:14:33.000
> 
> 标签：html, css

如果您在这里查看[http://jsfiddle.net/Grek/JRqcB/](http://jsfiddle.net/Grek/JRqcB/)，您会发现超链接与文本相比似乎是底部对齐的。有什么问题，我该如何解决？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:17:26.527

`vertical-align:middle`在#activity-container 中删除

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T09:17:13.157

删除`vertical-align:middle`以下样式的 CSS 属性：

```
#activity-container a {
    color: #467FD9;
    text-decoration: none;
} 
```

示例：http: [//jsfiddle.net/JRqcB/3/](http://jsfiddle.net/JRqcB/3/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T09:17:21.860

`vertical-align: middle;`从 css 中删除链接。

另见： http: [//phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

# java - 使用 javaBeans Persistence 机制保存 java GUI

> ID：12120699
> 
> 赞同：1
> 
> 时间：2012-08-25T09:14:45.920
> 
> 标签：java, swing, javabeans

我想使用 JavaBeans Persistence 机制将我的 GUI 保存到本地磁盘。我面临的问题是一次保存两帧。这是我的代码。

```
import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import java.io.*;
import javax.swing.*;

public class BeansTest {
  private static JFileChooser chooser;
private JFrame frame;

public static void main(String[] args){
    chooser = new JFileChooser();
    chooser.setCurrentDirectory(new File("."));
    BeansTest test = new BeansTest();
    test.init();
}

public void init(){
    frame = new JFrame();
    frame.setLayout(new FlowLayout());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("PersistentFrameTest");
    frame.setSize(400,200);

    JButton registryButton = new JButton("Registry");
    frame.add(registryButton);
    registryButton.addActionListener(EventHandler.create(ActionListener.class, this, "registry"));

    JButton saveButton = new JButton("Save");
    frame.add(saveButton);
    saveButton.addActionListener(EventHandler.create(ActionListener.class, this, "save"));

    frame.setVisible(true);
}

public void registry(){

 Registry re = new Registry();
}

public void save()
{
    if(chooser.showSaveDialog(null)==JFileChooser.APPROVE_OPTION)
    {
        try{
            File file = chooser.getSelectedFile();
            XMLEncoder encoder = new XMLEncoder(new FileOutputStream(file));
            encoder.writeObject(frame);
            encoder.close();
        }
        catch(IOException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
}

}

public class Registry {

public Registry(){

    JFrame frame = new JFrame();
    frame.setLayout(new FlowLayout());
    frame.setSize(400,200);

    JLabel nameL = new JLabel("Name:");
    JTextField nameF = new JTextField(8);

    frame.add(nameL);
    frame.add(nameF);

    frame.setVisible(true);

}
} 
```

当我按下保存按钮时，我想同时保存两个帧。现在我只能保存主框架。请帮我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:51:18.483

由于类`JFrame`中`Registry`的 不可访问，因此您需要向该类添加一个 getter。然后，鉴于`Registry`创建依赖于`ActionListener`，您需要在保存*该*帧`re`之前检查您的注册表句柄是否已实例化。在代码中：

 *添加到`Registry`：

```
public JFrame getFrame() {
   return frame;
} 
```

添加到`BeansTest.save()`：

```
if (re.getFrame() != null) {
   encoder.writeObject(re.getFrame());
} 
```

这里的一些变量需要移动到全局范围。我认为你会从自己弄清楚这些位中受益。*

# silverlight - silverlight 数据表单编辑问题

> ID：12120705
> 
> 赞同：0
> 
> 时间：2012-08-25T09:15:32.183
> 
> 标签：silverlight, dataform

我有以下数据表：

```
 <toolkit:DataForm    Margin="0,15,0,0" Height="300" Width="400"
      Name="dfEdit" CurrentItem="{Binding Path=SelectedItem,
ElementName=dgMydataGrid}" LabelPosition="Top" AutoGenerateFields="False" CommandButtonsVisibility="Edit, Commit, Cancel" AutoEdit="False" AutoCommit="False" BeginningEdit="dfEdit_BeginningEdit" EditEnded="dfEdit_EditEnded"> 
```

一切正常，我按下铅笔图标，项目变为可编辑模式，我可以更新数据库。问题是，提交数据表单后，即使我在 dataGrid 上选择任何其他项目，铅笔仍然被禁用。可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:49:21.320

我的错误，我输入了以下

```
dfEdit.IsReadOnly = true; 
```

我这样做是因为我从另一个必须禁用数据表单的方法中复制

# java - 写入文件/大量字节失败

> ID：12120706
> 
> 赞同：-1
> 
> 时间：2012-08-25T09:15:38.360
> 
> 标签：java, sockets, byte, datainputstream, dataoutputstream

我正在通过套接字写入文件/大量字节。

但是可以说我正在写字节。我这样做；

```
//Connection.data is a dataoutputstream
byte[] a = new byte[filelength];
//load file into the array
//write file
for (int i = 0; i < a.length; i++) {
Connection.data.writeByte(a[i]);                                              
} 
```

受到：

```
//dat is a datainputstream
byte[] byteA = new byte[bytestoread]
for (int i = 0; i < toread; i++) {
        byteA[i] = dat.readByte();
} 
```

我确实记录了传入的数据，如果文件是 200000 字节，它会在 199990 字节左右停止，等等。基本上，任何大小的字节 []，它都会在最后一个字节处停止，然后超时。如果你不明白，我会解释更多。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T09:17:58.693

完成写入后，您需要调用[`flush`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#flush%28%29)以确保实际发送了字节。

```
Connection.data.flush(); 
```

从文档中：

> 刷新此数据输出流。这会强制将任何缓冲的输出字节写出到流中。
> 
> DataOutputStream 的 flush 方法调用其底层输出流的 flush 方法。

# web-services - 将 Amazon SQS 直接暴露给客户端或通过 Web 服务作为代理

> ID：12120709
> 
> 赞同：1
> 
> 时间：2012-08-25T09:15:56.353
> 
> 标签：web-services, amazon-web-services, amazon-sqs

我想在我的应用程序中使用 Amazon SQS 对来自不属于我的其他外部系统的请求进行排队。

这样做的更好方法是什么，直接公开 SQS 队列和所需的消息格式或发布对请求进行排队的 Web 服务 (WCF)。

我还读到 SQS 对于单次访问来说相对较慢，但它可以轻松处理来自不同客户端的大量并发访问，我说得对吗？

最佳托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T21:38:08.057

这在很大程度上是一个偏好问题，并且在一定程度上取决于您的情况。但我的建议是用你自己的网络服务包装它。

构建您的 Web 服务允许您执行验证、限制、模式版本控制等操作。例如，您可以拒绝无效消息，并立即向发送者提供同步反馈。如果外部系统直接发布到您的队列，那么无效消息将成为您的问题而不是他们的问题，如果您修改架构并想要拒绝旧架构消息，那么您要么必须删除它们，要么设置一个单独的反向通道来向发布者反馈信息。这给您的系统增加了不必要的复杂性。如果需要，拥有 Web 服务甚至可以让您稍后切换到其他排队技术。

但是构建自己的 Web 服务也有缺点：您自己的服务是否能够以相同的低延迟处理与 SQS API 相同的负载？它不会像 SQS 那样无限扩展，那么您需要对负载变化做出多大的响应？您是否拥有管理单独服务的资源？这不仅仅是授予客户的 AWS 账户发布到您的队列的权限。

如果您对所涉及的额外工作感到满意，并且想要一个更加面向未来的系统，恕我直言，构建 Web 服务包装器是值得的。

# bundler - redmine安装错误

> ID：12120713
> 
> 赞同：-1
> 
> 时间：2012-08-25T09:16:51.793
> 
> 标签：bundler, redmine

我在我的服务器上安装了 Redmine。当我运行时：

```
bundle install --without development test 
```

我看到一个错误，因为我没有 PostgreSQL（而且我不使用它）。我想使用参数**--without-pg**运行捆绑程序，但我看到了这个错误：

```
root@localhost:/home/work/dev.redmine# bundle install --without-pg development test
Unknown switches '--without-pg' 
```

Bundler 版本是 **Bundler 版本 1.1.5**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:23:43.377

我认为你的命令是错误的。你只需要删除 char - without 和 pg

```
bundle install --without pg development test 
```

问候

保罗

# c# - 等效于没有分配和数据复制的 mono_string_to_utf8()

> ID：12120715
> 
> 赞同：0
> 
> 时间：2012-08-25T09:17:03.260
> 
> 标签：c#, c, mono

我正在尝试用`C`更有效的方法替换下面的代码：

```
void mstr2str(MonoString *mstr)
{
   char *str = mono_string_to_utf8(mstr);
   printf("mono string: %s\n", str);
   g_free(str);
} 
```

我的目标是避免 mono_string_to_utf8() 附带的内存分配和数据复制，因为 C# 返回到 C 的字符串可能非常大。

我已经阅读了有关使用 Windows C++ COM 接口的建议，但是在 Linux 下我尝试使用直接的方式来解决`monostring`来自 C的问题。

下面的参考表明这是“*不可能*的”：

[http://www.mono-project.com/Interop_with_Native_Libraries#marshal-step-4](http://www.mono-project.com/Interop_with_Native_Libraries#marshal-step-4)

> *“没有办法控制运行时如何分配封送内存，或者它持续多长时间。这是至关重要的。如果运行时封送字符串（例如 UTF-16 到 Ansi 转换），则封送的字符串只会持续调用。非托管代码不能保留对此内存的引用，因为它将在调用结束后被释放。不注意此限制可能导致“奇怪的行为”，包括内存访问冲突和进程死亡“。*

但该主题后来在同一个文档中用`Marshalling`、`inPtr`和解决`SafeHandles`（没有现成的示例，而参考博客来自 2004/2005）。

还有更多可用的最新文档或代码示例吗？

* * *

感谢您提供狼疮的解决方案。对于像我一样不懂 C# 的人来说，这些调用是定义在一个名为的文件中的宏`object.h`，因此如果您动态加载运行时，它们会被报告为未解析的符号。他们来了：

```
#define mono_string_chars(s) ((gunichar2*)(s)->chars)
#define mono_string_length(s) ((s)->length) 
```

似乎 C# 最终使用了指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:23:03.047

该文档是关于 P/Invoke 上的封送处理，这是一个不同的主题，与您显示的 C 代码无关。

至于您的问题：您可以访问字符串字符并使用 mono_string_chars() 和 mono_string_length() 对它们执行您想要的操作。例如，您可以使用 Linux 和 OSX 上可用的 iconv()，或者您可以手动将 UTF16 转换为 UTF8 以获得最大控制。

# php - PHP HipHop 是否支持带有准备好的语句的 Mysqli 库

> ID：12120716
> 
> 赞同：-2
> 
> 时间：2012-08-25T09:17:08.147
> 
> 标签：php, mysqli, hiphop

我们正在使用 Mysqli 准备好的语句。请让我们知道我们是否可以使用 PHP hiphop 以及它是否支持 Mysqli 特别是准备好的语句。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:22:29.267

自从 10 个月以来，关于此问题一直存在悬而未决的问题。所以我认为它行不通。[https://github.com/facebook/hiphop-php/issues/362](https://github.com/facebook/hiphop-php/issues/362)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T06:38:12.367

No php Hip-Hop does'nt support **Mysql** but it supports **PDO**

I have also tried it but it did'nt work

For Further information please see below link:-

[http://php.webtutor.pl/en/2011/05/10/hiphop-for-php-unimplemented-functions-and-features/](http://php.webtutor.pl/en/2011/05/10/hiphop-for-php-unimplemented-functions-and-features/)

# java - 使用休眠从多个表中检索数据

> ID：12120719
> 
> 赞同：0
> 
> 时间：2012-08-25T09:17:15.650
> 
> 标签：java, hibernate, queryover

我有 2 张桌子，即图书馆和书本

*   在 Library ->lid , lname,laddress 和 Setbooks 中（lid 是主键）
*   在 Books->bid,bname,bauthor(bid 是主键)

即：图书馆--一对多-->图书 我在检索具有作者（bauthor）=“xyz”的图书的图书馆列表时遇到了困难。

我试过这个查询：

```
query=session.createQuery("from Library as l where l.books.bauthor="xyz"); 
```

但出现错误：非法尝试取消引用休眠查询列表中的集合

当我使用这个查询时：

```
query=session.createQuery("from Library as l inner join l.books b where b.bauthor="xyz");
List<Library>list=query.list(); 
```

我得到正确的没有。书，但当我试图检索`(Library l=list.get(0);or Library l=(Library)list.get(0))`

我收到错误： `java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to com.demo.Library`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:26:53.677

您正在获取图书馆和书籍类型列表，因此您只能获得一种类型记录

```
Query query = session.createSQLQuery(sql);
            records = query.list();
            for (Object[] fields : records) {
                Library view = new Library();
                view.setId(StringUtils.toString(fields[1]));
                view.setLName(StringUtils.toString(fields[0]));
                list.add(view);
            } 
```

# android - 如何为安卓应用程序使用服务器？

> ID：12120728
> 
> 赞同：-3
> 
> 时间：2012-08-25T09:18:14.100
> 
> 标签：android, mysql, wamp

我是安卓新手。我正在开发一个需要连接 MySQL 以获取一些数据的应用程序。目前在我的电脑上，我正在使用 WAMP 服务器来测试我的应用程序。但我知道有一些服务器托管网站可以让我们将数据放在他们的服务器上。但我不知道是否可以使用android应用程序。而且我不知道他们是否提供 MySQL 数据库。任何人都可以指导我这个以及这些托管网站的工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:37:10.290

您可以使用 HTTPGet 方法从服务器中提取数据。您还可以使用 HTTPPost 方法将应用程序数据发布到服务器数据库。您必须在服务器上编写一些 php 文件才能在应用程序和服务器之间进行通信。

在服务器端，在您的 php 文件中，您必须从数据库中轮询所需的信息，例如通过查询，然后您必须将它们解析为 JSON 数据。然后从您的应用程序中，您可以创建一些服务，将 HTTPGet 请求发送到您提供的 url 并从服务器轮询 JSON 数据。之后是一个简单的解析工作。

# objective-c - 多次引用实例变量数组元素的效率是否低于局部变量？

> ID：12120730
> 
> 赞同：1
> 
> 时间：2012-08-25T09:18:20.503
> 
> 标签：objective-c, arrays, performance, variables, instance-variables

如果我做：

```
foos[i] = [[Foo alloc] init];
foos[i].prop = @"bar";
[foos[i] baz]; 
```

...这是否比以下效率低：

```
Foo *foo = [[Foo alloc] init];
foo.prop = @"bar";
[foo baz];
foos[i] = foo; 
```

还是它们等效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:21:06.473

它们不是等价的，但它们足够接近，优化编译器可能会生成完全相同的二进制代码。

即使没有，您也将难以衡量差异（除非`foos`C++ 类具有极其昂贵的`operator[]`. 除非分析器另有说明——优化此代码还为时过早。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:35:18.550

如果您的数组是一个简单的 C 数组 ( `Foo * array[11];`)，那么它不会对性能产生重大影响。

如果您的数组是一个`NSMutableArray`（或另一个可下标的 NS 类型），那么它将不得不重复调用该方法的实现（使用短路调度），这样会引入一些开销。尽管有些人会认为这是一种微优化。在这种情况下，编译器无法**知道**实现返回什么，因此它不能省略调用。

* * *

以下是基本的挂钟时间结果：

> MRC：
> 
> > NSArray：27 秒
> > 
> > C 数组：18 秒
> 
> 弧：
> 
> > NSArray：31 秒
> > 
> > C 数组：18 秒

和程序（您可以执行明显的 ARC 更改来测试 ARC）：

```
const int NIter = 10000;

__attribute__((noinline)) void fn1() {
  @autoreleasepool {
    NSMutableArray * foos = [NSMutableArray array];
    for (size_t idx = 0; idx < NIter; ++idx) {
      NSMutableString * str = [NSMutableString new];
      foos[0] = str;
      [foos[0] length];
      [foos removeAllObjects];
      [str release];
    }
  }
}

__attribute__((noinline)) void fn2() {
  @autoreleasepool {
    NSMutableString * foos[1];
    for (size_t idx = 0; idx < NIter; ++idx) {
      foos[0] = [NSMutableString new];
      [foos[0] length];
      [foos[0] release];
      foos[0] = 0;
    }
  }
}

int main() {
  for (size_t idx = 0; idx < NIter; ++idx) {
    if (UseNSArray) {
      fn1();
    }
    else {
      fn2();
    }
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T11:44:30.477

当然，除非编译器将其优化掉。效率是否*显着*降低是另一回事，这取决于您的代码还在做什么。担心这样的微优化通常是徒劳的，除非您已经有证据表明附近存在效率问题。

# java - 使用临时表的数据库连接池

> ID：12120733
> 
> 赞同：1
> 
> 时间：2012-08-25T09:18:49.113
> 
> 标签：java, jdbc, sybase, connection-pooling, apache-commons-dbcp

我正在使用 Apache dbcp 进行连接池，并使用 ibatis 在 Spring 支持下进行数据库事务。我正在尝试锻炼的场景是：

1.  创建最大初始连接为 5 的 BasicDataSource

2.  创建临时表

3.  在临时表中写入大量记录。
4.  将记录写入实际表中。

5.  删除临时表

这里的问题是步骤 2-5 在多线程模式下运行。此外，由于我正在使用连接池，我不能保证 sttep 2、3、4、5 将从池中获得相同的连接对象，因此我在步骤 3/4/5 中看到找不到临时表 XYZ。

我如何保证我可以在 4 个操作中重复使用相同的连接。这是第 3 步和第 4 步的代码。我不打算使用全局临时表。

```
@Transactional  
public final void insertInBulk(final List<Rows> rows) {  
getSqlMapClientTemplate().execute(new SqlMapClientCallback<Object>() {  
    public Object doInSqlMapClient(  
        SqlMapExecutor exe) throws SQLException {  
            executor.startBatch();  
            for (Rows row : rows) {  
                for (Object row : row.getMultiRows()) {  
                    exe.insert("##TEMPTABLE.insert", row);  
                }  
            }  
            exe.executeBatch();  
            return null;  
     }}); 
```

}

```
public void copyValuesToActualTable() {  
    final Map<String, Object> procInput = new HashMap<String, Object>();  
    procInputMap.put("tableName", "MYTABLE");  
    getSqlMapClientTemplate().queryForObject("##TEMPTABLE.NAME", procInput);  
} 
```

我正在考虑通过在初始化连接时只创建一次临时表来进一步改进设计，而不是删除截断表，而是稍后再截断一个表，并且在步骤 3 和 4 中仍然存在问题。临时表的原因是我没有访问权限（权限）直接修改实际表，但通过临时表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:50:26.607

我实际上会在主线程中创建临时表（步骤 2），然后将记录插入临时表（步骤 3 和步骤 4）的工作量分解为块并为每个块生成线程。

JDK 7 为您可能感兴趣的这一步提供了[ForkJoin 。](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

一旦插入临时表和实际表完成，然后在主线程中再次删除临时表。

这样，您无需确保在任何地方都使用相同的连接。您可以对同一个数据库使用不同的连接对象，并并行执行第 3 步和第 4 步。

希望这可以帮助。

# w3c-validation - 第 149 行，第 31 列：没有属性“WIDTH”

> ID：12120735
> 
> 赞同：0
> 
> 时间：2012-08-25T09:19:15.180
> 
> 标签：w3c-validation

我所有的网站 WC3 都很高兴 - 除了[一个](http://www.class-a-studio.co.il/gallery.php)带有三个小注释的页面......在这个页面上，我嵌入了 Slider，它以某种方式导致了这个消息：

```
Line 149, Column 31: there is no attribute "WIDTH"
<a href="images2/1.jpg" width="1280" height="960" border="0"> 
```

也许是因为我的网站不完全支持幻灯片？

此外，即使我`height/width`对所有照片进行了设置，我也得到了一个注释（`website load time testing`）给所有这些设置图片...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:03:06.073

这是一个简单的验证消息。`HTML 4.01 Transitional`因为您使用的DOCTYPE ( ) 不赞成使用`width`,等视觉格式化 html 属性。如果这些属性是由一些设置的，您可以使用或忽略它`height`，`border`例如您的滑块，不会有任何危险。CSS是：`CSS-properties``<script>`

```
img {
    width: 1280px;
    height: 960px;
    border: none;
} 
```

`website load time testing`就像我猜想的那样，是来自您的开发工具的消息。我认为这是正常的。除了一点：您的网站由于某种原因加载速度非常慢，因此该消息指的是该问题。当页面加载速度很快时，您根本没有时间发现它。

# php - 我可以将所需文件的全部内容存储在 JavaScript 变量中吗？

> ID：12120740
> 
> 赞同：0
> 
> 时间：2012-08-25T09:20:02.093
> 
> 标签：php, javascript

这似乎是一个奇怪的问题。也许这也是错误的方法。但我必须这样做：

*   页面上有几个菜单项
*   每个页面的内容都存储在一些`.phtml`文件中
*   当页面加载时显示默认内容（使用`require`）
*   所有其他内容也应加载并应存储在 JavaScript 数组中
*   当用户点击链接时，内容被交换

问题是：

*   不应该使用 AJAX
*   所有内容都不能在开头附加，对于旧的 SEO

所有部分都很简单，除了：如何将内容放入 JavaScript 数组。类似的东西`content.push('<?php print require 'page.phtml'; ?>');`当然行不通，因为它会返回一个多行字符串，这不适用于 JavaScript。欢迎所有想法。也许我忽略了一些非常简单的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:28:49.510

```
<script>
<?php

ob_start();
require 'page.phtml';
$contents = ob_get_clean();

echo "var content = ".json_encode($contents);
?>
</script> 
```

如果你的文件中没有 php 代码，`page.phtml`你可以让它变得更容易

```
<script>
<?php
echo "var content = ".json_encode(file_get_contents('page.phtml'));
?>
</script> 
```

显然你也可以这样使用它：

```
echo "content.push(".json_encode($contents).");"; 
```

为什么不发挥作用

```
<?php
function json_require($filepath) {
  ob_start();
  require($filepath);
  return json_encode(ob_get_clean());
}
?>
...
content.push(<?=json_require('page_1.phtml');?>);
content.push(<?=json_require('page_2.phtml');?>);
content.push(<?=json_require('page_3.phtml');?>);
content.push(<?=json_require('page_4.phtml');?>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:29:09.853

您可以使用隐藏的 div 而不是使用 js 数组，在页面的末尾，这样它们就不会影响 seo。然后使用这些 div id 交换您的内容。

我希望您使用 jQuery，如果不是，即使使用简单的 js 也可以做到这一点。

让我详细说明

```
<script>
function shouldBeCalledAtSomeEvent(page_id)
{
   var html = $('#'+page_id+').html();
   $('#idOfYourTargetElem').html(html)
}
</script>

<!-- end of your main file -->
<div style="display:none" id="page_1">
include('page_1.phtml');
</div>

<div style="display:none" id="page_2">
include('page_2.phtml');
</div>

<div style="display:none" id="page_3">
include('page_3.phtml');
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T09:41:33.153

如果您不能使用 ajax 并且您担心 seo，我建议您使用修改版的@rupesh 答案：将 html 存储在脚本标签中，以便它们可以被 js 访问而不会被爬虫读取：

```
<script type="text/hidden-menu" class="hidden_menu" >
    include('page_1.phtml');
</script>
<script type="text/hidden-menu" class="hidden_menu" >
    include('page_2.phtml');
</script>
<script type="text/hidden-menu" class="hidden_menu" >
    include('page_3.phtml');
</script> 
```

然后您可以轻松地在 js 中构建您的数组：

```
var content = [],
    contentNodes = document.getElementsByClassName('hidden_menu'),
    i=0;
for(;i<contentNodes.length;i++)
   content.push(contentNodes[i].innerHTML); 
```

瞧：你的内容数组保存了从 php 发送的 html，而不使用 ajax 并且不影响 seo。

# asp.net-web-api - 代码分析错误无法在 MVC4 Web API 中加载文件或程序集 'System.Net.Http, Version=2.0.0.0

> ID：12120741
> 
> 赞同：28
> 
> 时间：2012-08-25T09:20:14.567
> 
> 标签：asp.net-web-api

这个问题与这篇文章完全相同[http://forums.asp.net/t/1807797.aspx/1?System+Net+Http+is+not+found](http://forums.asp.net/t/1807797.aspx/1?System%20Net%20Http%20is%20not%20found)和[StackOverflow 上的这个](https://stackoverflow.com/questions/9431975/could-not-load-file-or-assembly-system-net-http-version-2-0-0-0-in-mvc4-web-ap)

我拥有所有最新的 RTM 位，在 .Net 4.5 中启动了新的 MVC 4，添加了 WebAPI nuget 包，现在我的代码分析失败，并出现与上述链接中报告的相同错误。

> CA0058 错误运行代码分析 CA0058：找不到引用的程序集“System.Net.Http，版本=2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”。此程序集是分析所必需的，并被以下程序引用：C:\Projects\InHouse\TimeRecorder\StopGap\TimeRec\bin\TimeRec.dll、C:\Projects\InHouse\TimeRecorder\StopGap\packages\Microsoft.AspNet.WebApi.Core .4.0.20710.0\lib\net40\System.Web.Http.dll。[错误和警告] - （全球）

据我所知，RC 版本似乎会发生这种情况，因为 .NET 4.5 框架 System.Net.Http 和 WebApi 的 System.Net.Http 版本之间存在冲突。

[StackOverflow 响应](https://stackoverflow.com/questions/9431975/could-not-load-file-or-assembly-system-net-http-version-2-0-0-0-in-mvc4-web-ap)上的其他答案谈到从 .Net 4.5 降级到 4.0，出于显而易见的原因，这不是我的首选解决方案！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-11T19:24:36.860

尝试以下操作：

1.  根据您的 Visual Studio 版本，导航到：
    *   **与 2010 年相比**：
        `%ProgramFiles(x86)%\Microsoft Visual Studio 10.0\Team Tools\Static Analysis Tools\FxCop`
    *   **与 2012 年相比**：
        `%ProgramFiles(x86)%\Microsoft Visual Studio 11.0\Team Tools\Static Analysis Tools\FxCop`
2.  打开`FxCopCmd.exe.config`并`AssemblyReferenceResolveMode` 从*StrongName*更改为*StrongNameIgnoringVersion*。
3.  保存更改并重建您的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T18:35:32.230

从 Visual Studio 2012 及更高版本开始，不要修改安装文件，而是使用此处指定的解决方法：[将 Microsoft.Bcl.Async 与代码分析一起使用会导致错误](https://stackoverflow.com/questions/17298281/using-microsoft-bcl-async-with-code-analysis-causes-errors/17935400#17935400)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T10:25:44.857

我遇到了同样的问题（无法在 azure 上本地和远程构建）。这个解决方法帮助了我： [http ://connect.microsoft.com/VisualStudio/feedback/details/760208/nuget-package-for-asp-net-mvc-4-web-api-does-not-reference-correct-net -4-5-组件#](http://connect.microsoft.com/VisualStudio/feedback/details/760208/nuget-package-for-asp-net-mvc-4-web-api-does-not-reference-correct-net-4-5-assemblies#)

这是您需要的部分：

将packages\Microsoft.Net.Http.2.0.20710.0\lib\net40目录下的System.Net.Http.dll和System.Net.Http.xml文件复制到packages\Microsoft.AspNet.WebApi.Core.4.0 .20710.0\lib\net40 目录。由于缺少的 System.Net.Http.dll 程序集现在与引用的 System.Web.Http.dll 程序集位于同一位置，因此代码分析现在可以正确解决冲突的 System.Net.Http 程序集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T21:21:44.050

导致此问题的原因是，您依赖于较新版本的`System.Net.Http`，而不是所引用的其他程序集之一所需的版本。

解决此问题的正确方法是将`dependentAssembly`重定向添加到`app.config`违规项目。禁用错误的公认答案只是掩盖了一个潜在的问题。

将以下内容添加到 的`runtime`部分，`app.config`以将无法解析的旧版本重新映射到项目中引用的版本。版本号显然应该根据您的情况进行更新。

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

# uitableview - 在 wenderlich 教程脉冲 uitableview 中更改 Tabbarcontroller 选项卡

> ID：12120745
> 
> 赞同：0
> 
> 时间：2012-08-25T09:21:07.547
> 
> 标签：uitableview, tabbarcontroller

对于这方面的任何帮助，我将不胜感激 - 我一直在试图弄清楚如何从嵌套的 UITABLEVIEW 中更改 tabbarcontroller 上的选项卡，如 RayWenderlich.com 的关于类似滚动条的脉冲教程[http://www.raywenderlich .com/4723/how-to-make-an-interface-with-horizo​​ntal-tables-like-the-pulse-news-app-part-2](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)但我真的卡住了。我正在使用故事板和 xcode 4.4

几周后我对xcode完全陌生，所以如果这是一个新手问题，我深表歉意。根据上面链接中的图像，我已经使嵌套的水平表格视图工作正常，但我想使用图像切换到新选项卡但不能 - 我认为这是因为表格视图是嵌套的，所以我找不到对层次结构中的 tabbarcontroller 的正确引用。

如果我使用 ArticleListViewController.m didselect 教程包含的注释似乎建议插入导航代码将生成一个 NSLog 输出并更改选项卡，但只使用图像上方的一个小细条（我偶然发现了这一点）但没有任何反应图片。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
   {
      // Navigation logic may go here. Create and push another view controller   

   //THIS SELECTS WHEN CLICK THINSTRIP JUST ABOVE BUTTONS
   NSLog(@"ARTICLELISTVIEWCONTROLLER check didSelect: %u", self.tabBarController.selectedIndex);  

   self.tabBarController.selectedIndex = 2;
       } 
```

当我单击实际图像时， Horizo​​ntaTableCell.m 中的以下代码更合适地生成 NSLog 输出，但我无法找出允许我更改选项卡的 tabbarcontroller 引用。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
   {

    //the following line just generates an Error as follows: Property tabBarController not found on object of type 'HorizontalTableCell *'  

   self.tabBarController.selectedIndex = 2;

   NSLog(@"HORIZONTALTABLECELL DIDSELECT");

   } 
```

我已经寻找并寻找解决方法，但无法弄清楚。发现提到使用 appdelegate 但不确定如何执行此操作。不能以新用户的身份发布故事板图像，但有一个带有 4 个导航控制器的 tabbarcontroller - 第一个是 ArticleListViewController 菜单，其他每个都是 viewcontrollers - 我希望放置一个加载链接/本地页面的 webview 取决于选择的菜单和关于屏幕的其他菜单和一个额外的当前空白屏幕。

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:23:09.193

我猜你有 tabBarController 作为你的应用程序委托中的一个属性？

您可以通过以下方式联系您的应用委托： `[[UIApplication sharedApplication] delegate]`

将其转换为您的应用程序委托类，编译器不会警告您到达标签栏控制器。像这样：

```
((YourAppDelegate *) [[UIApplication sharedApplication] delegate]).tabBarController.selectedIndex = 2; 
```

至于 tableview 委托方法，ArticleListViewController 听起来像是你想要的地方。这些单元格最多应该只是带有少量表示逻辑的哑视图。如果它没有被调用，请确保您已将其正确设置为表视图的委托（如果您遵循链接到的教程，则在界面构建器中）。

# android - 使用自定义ActionBar自定义视图时，图标背景为原色

> ID：12120747
> 
> 赞同：0
> 
> 时间：2012-08-25T09:21:42.960
> 
> 标签：android, background, icons, android-actionbar

在处理我的应用程序时，我使用了自定义 ActionBar 视图：

```
this.getSupportActionBar().setCustomView(R.layout.actionbar_bg);
this.getSupportActionBar().setDisplayShowCustomEnabled(true); 
```

不幸的是，如您所见，整个 ActionBar 没有自定义，并且图标具有默认的操作栏背景。

有没有办法解决这个问题？

![在此处输入图像描述](../Images/738e4c9f2f760905ce5816771f54ec2a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:33:22.127

我目前的解决方法：

```
<resources>
<style name="MyTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">ANY_HEX_COLOR_CODE</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T13:20:31.380

您可以尝试使用 backgroundStacked：

```
 <item name="backgroundStacked">#YourColor</item> 
```

# c# - 创建表达式 > 反射变量

> ID：12120751
> 
> 赞同：6
> 
> 时间：2012-08-25T09:22:35.130
> 
> 标签：c#, reflection, lambda

我创建了以下类：

```
public class Person
{
     public string FirstName { get; set; }
     public string LastName { get; set; }
} 
```

我可以将以下语句设置为方法参数：

```
myClass.SetFieldName<Person>(p => p.LastName); 
```

参数类型为：

```
Expression<Func<Person, object>> 
```

现在我要完成的是为通过反射找到的属性调用 SetFieldName 方法。想象一下，我有一个 PropertyInfo 实例（对于 Person.LastName）。我尝试使用其 Lambda 方法创建表达式，但失败了。

所以，如果你能帮我解决这个问题，那就太好了。

问候， 科雷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:12:53.100

你只需要扩展一点弗莱姆的答案：

```
using System;
using System.Linq.Expressions;
using NUnit.Framework;

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public static class ExpressionBuilder
{
    public static Expression<Func<TClass, TProperty>> Build<TClass, TProperty>(string fieldName)
    {
        var param = Expression.Parameter(typeof(TClass));
        var field = Expression.PropertyOrField(param, fieldName);
        return Expression.Lambda<Func<TClass, TProperty>>(field, param);
    }
}

[TestFixture]
public class Test
{
    [Test]
    public void TestExpressionBuilder()
    {
        var person = new Person { FirstName = "firstName", LastName = "lastName" };
        var expression = ExpressionBuilder.Build<Person, string>("FirstName");

        var firstName = expression.Compile()(person);

        Assert.That(firstName, Is.EqualTo(person.FirstName));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T09:28:16.823

```
// reflected field name
string fieldName = "LastName";

// create the parameter of the expression (Person)
ParameterExpression param = Expression.Parameter(typeof(Person), string.Empty);

// create the expression as a get accessor of a particular 
// field of the parameter (p.LastName)
Expression field = Expression.PropertyOrField(param, fieldName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T21:16:24.467

```
public static class LambdaExpressionExtensions
{
    public static Expression<Func<TInput, object>> ToUntypedPropertyExpression<TInput, TOutput> (this Expression<Func<TInput, TOutput>> expression)
    {
        var memberName = ((MemberExpression)expression.Body).Member.Name;

        var param = Expression.Parameter(typeof(TInput));
        var field = Expression.Property(param, memberName);
        return Expression.Lambda<Func<TInput, object>>(field, param);
    }
} 
```

# wordpress - 在wordpress中链接页面之间

> ID：12120754
> 
> 赞同：0
> 
> 时间：2012-08-25T09:22:53.833
> 
> 标签：wordpress

嗨，我正在尝试链接到我创建的一些自定义模板，但我似乎不知道如何以正确的方式进行操作。例如：

我创建了一个自定义联系页面并将其命名为contact.php。我想从首页链接到它。现在这就是我所做的，但我认为这不是最好的方法：

```
<a href="<?php bloginfo('url') ?>/contact"> 
```

现在这可行，但前提是在设置页面中将永久链接设置为 postname。例如，如果页面设置为默认值，则链接显示 404.php。

如何正确设置链接？

我注意到在创建自定义帖子类型时，有一种方法可以重写永久链接并为新页面定义一个 slug。是否有类似的方法来重写自定义模板的永久链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:59:47.547

您必须使用 get_page_link() 函数 instate 在这里您可以查看详细信息

[http://codex.wordpress.org/Function_Reference/get_page_link](http://codex.wordpress.org/Function_Reference/get_page_link)

谢谢

# backbone.js - Backbone.js 和导航

> ID：12120756
> 
> 赞同：2
> 
> 时间：2012-08-25T09:23:03.387
> 
> 标签：backbone.js, backbone-routing

由于骨干没有做大多数事情的方式，我对很多事情感到困惑。其中一件事是浏览我的应用程序的正确方法。

我意识到 BB 路由器有一个 '.navigate' 方法，可用于推送 url 和触发路由。现在，由于我的应用程序有超过 1 个路由器，我不确定在一个或其他路由器上调用“.navigate”之间有什么区别。

这是我的路由器

```
new Etaxi.Routers.System()
new Etaxi.Routers.Header()
new Etaxi.Routers.Videos()
new Etaxi.Routers.News() 
```

现在我可以做

```
router = Etaxi.Routers.System()
// or i could do
router = Etaxi.Routers.Header()

router.navigate(url) 
```

我用于全球应用导航的路由器有什么不同吗？这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T12:47:47.137

您调用哪个路由器没有区别。事实上，当您有多个路由器时，我建议不要调用特定的路由器。或者，就此而言，根本不用费心打电话给路由器。如果您查看路由器`navigate`方法的源代码，您会发现它只是传递到`Backbone.history.navigate`. 所以直接调用它：

`Backbone.history.navigate(url)`

[http://backbonejs.org/docs/backbone.html#section-114](http://backbonejs.org/docs/backbone.html#section-114)

我几乎在所有应用程序中都使用了多个路由器，这就是我调用该`navigate`方法的方式。它工作得很好，并且避免了调用哪个路由器的混淆。

# python - 索引错误：python代码中的列表索引超出范围

> ID：12120766
> 
> 赞同：-1
> 
> 时间：2012-08-25T09:24:36.967
> 
> 标签：python

这是我用于合并排序的 Python 代码，我不明白为什么我得到了`IndexError`第 23 行。

如果将第 23 行放在`for`循环之前但在`for`循环中它说`list index out of range`. :(

```
from math import floor

def merge_sort(a,p,r):
 if p < r:
  q = (p+r)/2
  merge_sort(a,p,q)
  merge_sort(a,q+1,r)
  merge(a,p,q,r)

def merge(A,p,q,r):
 n1 = q - r +1
 n2 = r - q
 L = []
 R = []
 #print n1
 for i in range (1,n1):
  L.append(a[p+i-1])
 for j in range (1,n2):
  R.append(a[q+j])
 L.append(10000)
 R.append(10000)
 i,j=0,0

 for k in range (p,r):
  if L[i] <= R [j]: # This is where the error occurs
   A[k] = L[i]
   i = i + 1
  else :  
   A[k] = R[j]
   j = j + 1

a=[1,4,9,8,2,3,8,2,9]
merge_sort(a,1,len(a)) 
print a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:53:53.360

我同意评论者/其他海报，这个脚本有一个 Python 语法（除了不是习惯的 4 个空格的缩进......），但*远非*Pythonic......

无论如何，对于您的问题：看起来问题出现在`merge`when `(p,q,r)=(1,2,3)`。在这种情况下，`n1=0`和`n2=1`。循环`range(1,n1)`不会给你任何东西，因此你`L`将只有 1 个元素（`10000`你在循环之外附加到它）。

现在，当您到达`for k in range (p,r)`循环时：

*   在第一次迭代中，`k=p=1`，`L[0] <= R[0]`你添加`1`到`i`，所以`i`=1
*   在第二次迭代中，您尝试访问未定义的`L[i]`ie 。`L[1]`因此，`IndexError`.

一些建议：

*   了解如何使用调试器。许多 IDE 都带有一些实现，这确实很有帮助。
*   请记住，列表从索引 0 开始。当您来自另一种语言时，您往往会忘记这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:52:50.647

这不是 python，这是带有 Python 语法的 Pascal。

这是合并排序算法的实现（基于[合并排序维基文章](http://en.wikipedia.org/wiki/Merge_sort)）：

```
def merge_sort(data):
    if len(data) <= 1:
        return data

    middle = len(data) / 2

    left = merge_sort(data[0:middle])
    right = merge_sort(data[middle:])

    return merge(left, right)

def merge(left, right):
    result = []

    while left or right:
        if left and right:
            if left[0] <= right[0]:
                result.append(left.pop(0))
                continue

            result.append(right.pop(0))
            continue

        if left:
            result.append(left.pop(0))
        elif right:
            result.append(right.pop(0))

    return result

data = [1, 4, 9, 8, 2, 3, 8, 2, 9]
result = merge_sort(data)

assert len(data) == len(result)

print result 
```

# objective-c - 通过终端在 Cocoa 应用程序中的语音

> ID：12120770
> 
> 赞同：1
> 
> 时间：2012-08-25T09:26:10.563
> 
> 标签：objective-c, macos, cocoa, nstextfield

我正在尝试制作一个 Mac 应用程序，它 `NSTextField`使用“系统”说出用户输入的文本以`say`在终端中使用命令。但是，Xcode 不断报错。

```
- (IBAction)speak:(id)sender{
    system("say %@", [textinput stringValue]);
} 
```

*textinput`IBOutlet`是`NSTextField`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:46:59.960

System 将单个 char* 作为参数，因此您必须先格式化命令字符串，然后才能将其传递给系统：

```
- (IBAction)speak:(id)sender {
    NSString *command = [NSString stringWithFormat:@"say %@", [textinput stringValue]];
    system([command UTF8String]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T14:14:36.587

无需调用系统命令，直接使用Cocoa语音合成API即可。例如

```
NSSpeechSynthesizer* speechSynthesizer = [[NSSpeechSynthesizer alloc] init];
[speechSynthesizer startSpeakingString:[textinput stringValue]]; 
```

然后很容易设置声音并调整其他设置。

# cocoa - 如何知道 WebView 何时完成渲染？

> ID：12120772
> 
> 赞同：3
> 
> 时间：2012-08-25T09:26:42.240
> 
> 标签：cocoa, webview, webkit

在 Apple 的 WebKit 框架中，已完成资源加载的 WebView`webView:didFinishLoadForFrame:`会向其`frameLoadDelegate`. 但是，这只是表示资源已经加载完成，而不是渲染完成……如何检测到WebView渲染完成？在 的所有代表中`WebView`，我找不到一个具有我需要的方法的人……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T22:51:36.843

我还希望在委托方法中找到所有内容，也尝试使用资源加载方法，计算开始和结束的负载，但这也不可靠。没有 stackoverflow 答案对我有帮助，但苹果开发论坛上的某个人指出了似乎是答案。

WebView 还发布通知 WebViewProgressStartedNotification、WebViewProgressEstimateChangedNotification 和最相关的 WebViewProgressFinishedNotification。在我的代码中，我观察通知，然后确保在下一个运行循环中调用完成的方法，即。使用 [self performSelector:..withDelay:0] 或 dispatch_async。

# php - 如何使用主键中的值获取数组的值

> ID：12120777
> 
> 赞同：1
> 
> 时间：2012-08-25T09:27:29.943
> 
> 标签：php, html

我正在使用 room_extras 表的主键为我的额外文本字段创建一个唯一名称。

这是示例：

```
<tr>
    <td><?php echo $extrasInfo['description'] ?></td>
    <td>
        <input type="text" name="extra[<?php echo $extrasInfo['re_id'] ?>]" id="qty" value="0" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)" />
    </td>
    <td align="right"><?php echo number_format($extrasInfo['price'],2) ?></td>
</tr> 
```

如您所见，名称是使用此代码生成的`extra[<?php echo $extrasInfo['re_id'] ?>]`。

这个在html中的结果是：

```
<tr>
    <td colspan="3"><h3>Economy Room</h3></td>
</tr>
<tr>
    <td>Extra Person</td>
    <td><input type="text" name="extra[19]" id="qty" value="1" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)"></td>
    <td align="right">560.00</td>
</tr>
<tr>
    <td>Breakfast for Extra Person</td>
    <td><input type="text" name="extra[20]" id="qty" value="1" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)"></td>
    <td align="right">150.00</td>
</tr>
<tr>
    <td colspan="3"><h3>Deluxe</h3></td>
</tr>
<tr>
    <td>Extra Person</td>
    <td><input type="text" name="extra[1]" id="qty" value="0" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)"></td>
    <td align="right">730.00</td>
</tr>
<tr>
    <td>Breakfast for Extra Person</td>
    <td><input type="text" name="extra[2]" id="qty" value="0" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)"></td>
    <td align="right">269.00</td>
</tr> 
```

根据`re_id`字段（即`$extrasInfo['re_id']`）的值，数组返回不同的键，例如：

```
extra[19]
extra[20]
extra[1]
extra[2] 
```

所以我的问题是如何在“额外”之后获得价值？即数字 19、20、1 和 2。

这是我开始的：

```
$size = count($_POST['extra']);

$i = 0;
while ($i < $size) {
    $qty = $_POST['extra'][$i];
    $re_id = ????; //what should be the code here?

    $query = "$sql_extras="INSERT INTO `lf_bookings_extras`(`re_id`, `booking_number`, `price`, `qty`, `amount`) VALUES ('$re_id','$booking_number','$price','$qty','$amount')";";

    mysql_query($query) or die ("Error in query: $query");

    ++$i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:35:37.810

您不应该`extra`从表单输入中命名您的数组，这样您就可以在该数组中循环。

```
$re_id = $_POST['extra'][$i]; 
```

和 HTML

```
<input type="text" name="extra[]" id="qty" value="1" style="text-align: right" size="5" onKeyPress="return isNumberKey(event)"> 
```

或者如果你真的想这样做

```
foreach($_POST['extra'] as $key => $val){
    $qty = $val;
    $re_id = $key;
    // $key will be the id passed from input
    // mysql insert
} 
```

PS：请不要`mysql_*`对新代码使用函数。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://php.net/manual/en/function.mysql-pconnect.php)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

# search-engine - 欧几里得距离还是余弦相似度？

> ID：12120780
> 
> 赞同：2
> 
> 时间：2012-08-25T09:27:54.290
> 
> 标签：search-engine, cluster-analysis, information-retrieval, euclidean-distance, cosine-similarity

我正在阅读 [相似度测量](http://semanticvoid.com/blog/2007/02/23/similarity-measure-cosine-similarity-or-euclidean-distance-or-both/) ，突然间我的整个世界都分崩离析了。我已经使用聚类技术实现了一个搜索引擎。对于聚类，我使用了 K 均值，其距离度量为欧几里德距离。我还使用余弦相似度来显示结果。我得到了惊人的准确结果。但是现在我读到了这篇文章，我所做的是规范化文档向量并计算两个向量之间的欧几里德距离，因此我没有考虑任何地方的幅度。

难道我做错了什么 ？

虽然我认为更高的词频会弥补更高的 tf-idf 值和更高的标准化 tf-idf 值，因此会适当地排名靠前。谢谢

结果（使用未归一化的向量，这些数字是欧几里得距离）

```
61.79689257425985 222Proposed Research Details.doc
144.15451315901478 and_Integrated_Assessment_of__Natural_resources_and_evolution_of_alternate_sustainable_land_management_options_for_tribal_dominated_watersheds_RRPS_24.doc
72.61392308146608 done_Developing live fencing systems for soil & water conservation_NATIP-RNPS-3 SKN Math).doc
72.96125277156261 done_Management strategies for impriing rabi (SKN Math).doc
65.51734241367222 done_RPFIII_dr.dogra.doc
66.72042766100921 Evaluation of crops and their varieties (SKN Math).doc
418.8868087170988 P. VIJAYA KUMAR (DSS).doc
140.3914521621597 RPF - I PIMS-ICAR project proposal for IASRI.doc
72.95414421468679 RPF-III__Indo-US_project.doc
82.25126123574397 220Introduction and objectives.doc 
```

结果（使用归一化向量，数字是欧几里得距离）

```
1.3435369899385359 222Proposed Research Details.doc
1.1277471087250086 and_Integrated_Assessment_of__Natural_resources_and_evolution_of_alternate_sustainable_land_management_options_for_tribal_dominated_watersheds_RRPS_24.doc
1.2741267093494966 done_Developing live fencing systems for soil & water conservation_NATIP-RNPS-3 SKN Math).doc
1.264154265747389 done_Management strategies for impriing rabi (SKN Math).doc
1.2902191708899362 done_RPFIII_dr.dogra.doc
1.3128744973475515 Evaluation of crops and their varieties (SKN Math).doc
0.4924243033927417 P. VIJAYA KUMAR (DSS).doc
1.1747048933792805 RPF - I PIMS-ICAR project proposal for IASRI.doc
1.29150899172647 RPF-III__Indo-US_project.doc
1.318016051789028 220Introduction and objectives.doc 
```

结果（数字为余弦相似度）

```
0.09745417833344654 222Proposed Research Details.doc
0.36409322938119104 and_Integrated_Assessment_of__Natural_resources_and_evolution_of_alternate_sustainable_land_management_options_for_tribal_dominated_watersheds_RRPS_24.doc
0.1883005642611103 done_Developing live fencing systems for soil & water conservation_NATIP-RNPS-3 SKN Math).doc
0.2009569961963377 done_Management strategies for impriing rabi (SKN Math).doc
0.16766724553404047 done_RPFIII_dr.dogra.doc
0.13818027710720598 Evaluation of crops and their varieties (SKN Math).doc
0.8787591527140649 P. VIJAYA KUMAR (DSS).doc
0.3100342067353838 RPF - I PIMS-ICAR project proposal for IASRI.doc
0.16600226214483405 RPF-III__Indo-US_project.doc
0.13141684361322944 220Introduction and objectives.doc 
```

结果 1 和 2 彼此不一致，而 2 和 3 非常一致。相似度更高，距离更小。在聚类质心向量和每个文档的文档向量之间获取距离。

事实上，最奇怪的结果是欧几里得距离为 418 且相似度最高为 0.87 的文档。而归一化距离变为 0.49 并且与相似性一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T18:29:01.660

当我从我的信息检索讲座中记起时，对两个向量进行归一化会导致欧几里得距离和余弦相似度的排序顺序相反。

# c# - SerialPort 读取在 C# 中不起作用

> ID：12120787
> 
> 赞同：1
> 
> 时间：2012-08-25T09:28:33.603
> 
> 标签：c#, .net, serial-port

我正在开发 C# windows 应用程序。它从称重桥机到串行端口读取重量。但是，我的代码不起作用。我尝试从互联网下载的许多示例不起作用。我的代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.IO;

namespace SerialPortTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        String a = "";

        private void button1_Click(object sender, EventArgs e)
        {
        serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
        if (serialPort1.IsOpen == false)
        {
            serialPort1.Open();
        }
        timer1.Start();
        button1.Enabled = false;
        button2.Enabled = true;
        }

        private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            a = a + serialPort1.ReadExisting();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if (a.Length != 0)
            {
                textBox1.AppendText(a);
                a = "";
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen == true)
            {
                serialPort1.Close();
                button2.Enabled = false;
                button1.Enabled = true;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen == true)
            {
                button1.Enabled = false;
                button2.Enabled = true;
            }
            else
            {
                button1.Enabled = true;
                button2.Enabled = false;
            }
        }
    }
} 
```

我的代码中的错误可以任何人帮助我任何工作代码。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:32:08.253

您没有为 serialPort1 注册 serialPort1_DataReceived。

```
serialPort1.DataReceived += new SerialDataReceivedEventHandler(serialPort1_DataReceived); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:16:29.140

您可能需要从流中提取二进制数据，而不是将数据作为字符串读取？

这是可能在 DataReceived 事件处理程序中的一些代码示例...

```
int nb = serialPort1.BytesToRead;
if (nb > 0) 
{
  byte[] buffer = new byte[nb];
  serialPort1.Read(buffer, 0, nb);

  // Depending on the structure of the binary data ...
  int number1 = BitConverter.ToInt32(buffer, 0);
  int number2 = BitConverter.ToInt32(buffer, 4);
  // etc.
} 
```

# javascript - 如何在滚动的 DIV 中获取当前活动文本

> ID：12120788
> 
> 赞同：12
> 
> 时间：2012-08-25T09:28:41.670
> 
> 标签：javascript, jquery, html, css, dom

`DIV`包含需要滚动条的段落的碎片

例如

```
<div id="text" style='overflow:scroll;width:200px;height:200px'>

<div style='font-size:64px;'>BIG TEXT</div> 
Lorem Ipsum is simply dummy text of the printing and typesetting 
industry. Lorem Ipsum    has been the industry's standard dummy text ever  
since the 1500s, when an unknown printer took a galley of type and scrambled it 
to make a type specimen book. It has survived not only five centuries, but also 
the leap into electronic typesetting, remaining essentially unchanged.
It was popularised in the 1960s with the release of Letraset sheets 
containing Lorem Ipsum passages, and more recently with desktop publishing software 
like Aldus PageMaker 
including versions of Lorem Ipsum.

</div> 
```

当滚动条移动时，文本发生变化（由于`overflow:scroll`），是否可以**只选择当前视口中显示的文本？**

示例：http: [//jsfiddle.net/cxgkY/15/](http://jsfiddle.net/cxgkY/15/)

**更新：内部 HTML 可能包含可变大小的文本**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T10:10:08.127

这是一个小演示，应该可以满足您的期望：[小链接](http://jsfiddle.net/Mmpgc/21/)（也适用于可变大小）。这个想法是为每个单词自动创建一个单独`span`的，然后，每次`div`滚动时，检查哪些`span`s 是可见的（通过检查它们的`top`偏移量），从而更新文档选择范围。如果有什么不清楚的地方，我很乐意解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T09:43:33.857

不知道只选择当前视口中的文本是什么意思，但可能是这样的：

```
var elm = $("#text"),
    t = $(elm).text().split(' '),
    html = [],
    selected_text = '';

$.each(t, function(i,e) {
    html.push('<span>'+e+'</span>');
});

elm.html(html.join(' '));

$('span', elm).each(function(i,e) {
    if ($(e).offset().top < elm.height()) {
        $(e).css('background', 'red');
        selected_text += $(e).text()+' ';
    }
}); 
```

[**小提琴**](http://jsfiddle.net/cxgkY/13/)

如果本练习的目的只是在另一个容器元素中显示文本，您可以按常规方式进行并伪造它：

```
$("#text").on('scroll', function() {
    $('#visible').html($(this).html()).scrollTop($(this).scrollTop());
}); 
```

[**小提琴**](http://jsfiddle.net/cxgkY/19/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:41:33.487

可能是这样的（参见演示：http: [//jsfiddle.net/cxgkY/14/](http://jsfiddle.net/cxgkY/14/)）：

**HTML：**

```
<div id="text">
    <div id="wrapper">
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>
</div> 
```

​ ​ **JavaScript:**

```
$('#text').scroll(function () {
  var text = $(this).text();

  var begin = $(this).scrollTop() / 
      $(this).children('#wrapper').height();

  var end = begin + $(this).height() /
    $(this).children('#wrapper').height();

  var text = text.slice(text.length * begin, text.length * end);
  $('#visible').text(text);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T09:58:06.817

```
<div id="text">
    <p>Line 1</p>
    <p>Line 2</p>
    <p>Line 3</p>

</div> 
```

你可以做..

```
$(function(){
    var meanLineHeight = $('#text > p').first().outerHeight();

    var result = $('#result');

    $('#text').scroll(function(){
        var linesScrolled = Math.ceil(this.scrollTop/ meanLineHeight);
        console.log(linesScrolled);

        var linesToSelect = $('#text > p').slice(linesScrolled);
        linesToSelect.css('background-color', 'yellow');
    });​​​​​​​
}); 
```

**[​演示](http://jsfiddle.net/mrobin/cxgkY/17/)**

# javascript - 解释 javascript 中的 +var 和 -var 一元运算符

> ID：12120802
> 
> 赞同：21
> 
> 时间：2012-08-25T09:31:22.263
> 
> 标签：javascript, unary-operator

我试图理解 javascript 中的一元运算符，我在这里找到了本指南[http://wiki.answers.com/Q/What_are_unary_operators_in_javascript](http://wiki.answers.com/Q/What_are_unary_operators_in_javascript)大部分都很有意义，但我不明白以下示例将如何用于一个实际的代码示例：

```
+a;
-a; 
```

据我了解**+a;** **旨在使变量成为 a 和-a**的正值；旨在使变量成为 a 的负值。我尝试了许多示例，例如：

```
a = -10;
a = +a;
document.writeln(a); 
```

**并且输出仍然是-10；**

我也试过：

```
a = false;
a = +a;
document.writeln(a); 
```

**并且输出为0；**

这些一元运算符的实际代码示例是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-25T09:35:43.297

`+`运算符不会更改值的符号，而运算`-`符会更改符号。两个运算符的结果都取决于原始值的符号，无论原始符号如何，两个运算符都不会使值变为正数或负数。

```
var a = 4;
a = -a; // -4
a = +a; // -4 
```

该`abs`函数执行您认为`+`操作员所做的事情；无论原始符号如何，它都会使值变为正值。

```
var a =-4;
a = Math.abs(a); // 4 
```

做`+a`实际上和做是一样的`a * 1`；如果需要，它会将值转换`a`为数字，但之后它不会更改值。

```
var a = "5";
a = +a; // 5 
```

`+`运算符有时用于将字符串转换为数字，但您可以使用和`parseInt`函数`parseFloat`以更具体的方式进行转换。

```
var a = "5";
a = parseInt(a, 10); //5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T09:36:12.943

一个例子是它们可用于将字符串转换为数字，

```
var threeStr = '3.0'
var three = +threeStr
console.log(threeStr + 3) // '3.03'
console.log(three + 3) //6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T09:49:07.530

我想从基本的数学角度来解释这一点：
乘法规则：

```
Positive x Positive = Positive: 3 x 2 = 6  
Negative x Negative = Positive: (-2) x (-8) = 16   
Negative x Positive = Negative: (-3) x 4 = -12  
Positive x Negative = Negative: 3 x (-4) = -12 
```

考虑到你的例子：

```
a = -10;
a = +a
document.writeln(a); 
```

+a = +(-10) = 正 x 负 = 负 = -10

```
a = false;
a = +a;
document.writeln(a); 
```

false == 0, +a = +(+0) = Positive * Positive = Positive = 0（也许使用 true 是一个更好的例子）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T09:35:42.453

```
a = 1
b = -a
console.log(b)

output
-1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T09:43:02.327

变量“a”中的“+”运算符仅表示：a

变量“a”中的“-”运算符仅表示：-a

```
Since, in above example 
a=-10;
a= +a; // means a, ie, +(-10) which is -10

but,
a= -a;  // means -a, ie, -(-10) which is +10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T09:49:13.883

+a 表示 a*1，-a 表示 a*(-1)

就是这样！！！！！！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-25T09:39:29.147

试试这个

```
false == 0 // returns true 
```

所以，

```
a = false

a = +a //a * 1

console.log(a) // prints 0 as expected 
```

# fedora - 在 FEdora 13 中导入时出现 RPM 错误

> ID：12120804
> 
> 赞同：-2
> 
> 时间：2012-08-25T09:31:39.113
> 
> 标签：fedora

我正在尝试在 Fedora 13 上安装 mysql 工作台，在此过程中，我以 root 身份给出以下命令：
rpm --import [http://rpms.famillecollet.com/RPM-GPG-KEY-remi](http://rpms.famillecollet.com/RPM-GPG-KEY-remi) 我收到以下错误：
错误：[http](http://rpms.famillecollet.com/RPM-GPG-KEY-remi) ://rpms.famillecollet.com/RPM-GPG-KEY-remi ：导入失败。
请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:07:19.933

根据[http://forums.fedoraforum.org/showthread.php?t=217480](http://forums.fedoraforum.org/showthread.php?t=217480)可能已经安装了密钥。看看如果你尝试从 remis repo 安装包会发生什么。

# algorithm - 朴素贝叶斯和零频率问题

> ID：12120811
> 
> 赞同：6
> 
> 时间：2012-08-25T09:32:55.973
> 
> 标签：algorithm, machine-learning, bayesian, spam-prevention

我想我已经正确地实现了大部分。有一部分让我很困惑：

零频率问题：当每个类值都没有出现属性值时，每个属性值-类组合（拉普拉斯估计器）的计数加 1。

这是我的一些客户端代码：

```
//Clasify
string text = "Claim your free Macbook now!";
double posteriorProbSpam = classifier.Classify(text, "spam");
Console.WriteLine("-------------------------");
double posteriorProbHam = classifier.Classify(text, "ham"); 
```

现在说“免费”这个词出现在某处的训练数据中

```
//Training
classifier.Train("ham", "Attention: Collect your Macbook from store.");
*Lot more here*
classifier.Train("spam", "Free macbook offer expiring."); 
```

但是这个词出现在我的“垃圾邮件”类别的训练数据中，但不在“火腿”中。所以当我去计算后验概率时，当我遇到“免费”这个词时我会怎么做。

![在此处输入图像描述](../Images/fbde4269685944dc3a513e365f55737e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T23:49:21.247

还是加一个。原因：朴素贝叶斯模型因为是完全独立的`P("free" | spam)`，`P("free" | ham)`所以要估计每个完全独立的概率。您使用的拉普拉斯估计器`P("free" | spam)`是`(count("free" | spam) + 1) / count(spam)`；`P("ham" | spam)`是一样的。

如果您考虑不添加一个意味着什么，那真的没有意义：在火腿中看到“免费”一次会降低在垃圾邮件中看到“免费”的可能性。

# asp.net - 使用 IIS 在不占用 ASP.Net 线程的情况下保护大型静态文件

> ID：12120814
> 
> 赞同：2
> 
> 时间：2012-08-25T09:33:28.923
> 
> 标签：asp.net, iis, download, authorization, static-files

当我的 ASP.NET 代码正在流式传输一个大文件时，它是否完全束缚了一个线程？换句话说，如果有 8 个人在下载大文件，而我只有 8 个线程可用，是否会不再处理请求？

无论如何，我需要找到一种保护大型静态文件的替代方法，最好是在用户获得授权后让 IIS 直接为其提供服务，以便使应用程序服务器不必处理 IIS、Nginx 等可以在不触及任何托管代码的情况下做得更好。

我相信 Nginx 允许这样做，如果您的应用程序在其响应中放置“X-Accel-Redirect”标头：http: [//kovyrin.net/2006/11/01/nginx-x-accel-redirect-php-rails/](http://kovyrin.net/2006/11/01/nginx-x-accel-redirect-php-rails/)。Apache 和 Lighttpd 具有相同的功能。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:42:39.540

返回文件的 URL 是一个合适的解决方案。

您可以使用 asp.net 中的标准身份验证提供程序来防止拥有该 URL 的未经授权的用户也下载该文件。如果您打开`runAllManagedModulesForAllRequests`（请参阅[http://www.iis.net/configreference/system.webserver/modules](http://www.iis.net/configreference/system.webserver/modules)），当用户点击 URL 时将验证用户身份验证，如果他们被授权，他们将被允许访问该文件。

在任何一种情况下，下载都不会锁定线程，只会锁定执行。这就是`maxConnections`设置具有默认设置的原因`4294967295`。（见[http://www.iis.net/configreference/system.applicationhost/sites/site/limits](http://www.iis.net/configreference/system.applicationhost/sites/site/limits)）

# javascript - 如何在 Windows 8 html5 现代 UI 中显示没有背景的图像？

> ID：12120815
> 
> 赞同：0
> 
> 时间：2012-08-25T09:33:44.090
> 
> 标签：javascript, html, windows-8, microsoft-metro, windows-runtime

我有一张我想在 html5 页面上显示的图像。当我在页面上显示图像时，也会出现图像的背景，即白色方形背景。我只希望实际的图像形状出现在页面上。

我在下面给出了类似图片的链接。在这张图片中，我只想要绿色的圆形和里面的箭头，而不是方形的白色背景。

任何想法如何只显示实际图像而不是其他图像。

[http://www.bing.com/images/search?q=next+icon&view=detail&id=F55BB11D07B0F03037054A4112AE608758BDB56D&FORM=IDFRIR](http://www.bing.com/images/search?q=next+icon&view=detail&id=F55BB11D07B0F03037054A4112AE608758BDB56D&FORM=IDFRIR)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:42:32.457

图像必须是透明的 PNG 才能正常工作。如果它有，你还必须删除它在该`img`标签上的背景颜色

例如：

```
<div style="width:300px;height:300px; background-color:#000">
    <img src="http://icons.iconarchive.com/icons/visualpharm/must-have/256/Next-icon.png" style="background: none;" border="0" alt="" />
</div> 
```

# localization - TYPO3 替代页面语言配置

> ID：12120817
> 
> 赞同：0
> 
> 时间：2012-08-25T09:33:53.833
> 
> 标签：localization, typo3

我正在尝试将一堆不同语言的页面加入到具有多种替代页面语言的单个页面中。

这样，我不再有 3 个主页，每个主页都有自己的语言，而是有 1 个主页，有几种可选的页面语言。因此，我将有一页，但内容使用不同的语言，具体取决于它使用的语言记录。

问题是 TYPO3 扩展的行为应根据语言而有所不同，即：应翻译表单字段。

为此，我正在考虑为每个页面语言记录创建一个本地存储文件夹，以保存扩展配置。中文将有一个与英文版分开的存储文件夹，为中文版运行的扩展将使用正确的存储文件夹。

但是如果我不使用新页面，如何指定中文记录中的扩展名应该使用哪个存储文件夹？

因为如果我使用语言记录来区分中文和英文，我就不能有不同的排版配置。语言记录属性页面没有 ts 配置字段，因此我无法判断扩展应该为这种语言使用不同的存储文件夹（不同的 pid）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:28:33.653

对于每种语言，您都可以添加一个 cObj 插件，从而编辑插件配置。您还可以使用条件和 getText 为插件分配新的 pid。例如 plugin.test_pi1.sysfolder < 666。

第一个选项是当您查看 mysql 表语言覆盖时，您有一个单独的插件记录 ctype 插件，因此您可以编辑插件配置。

# c# - Booksleve：使用什么 Redis 版本？

> ID：12120821
> 
> 赞同：1
> 
> 时间：2012-08-25T09:34:49.737
> 
> 标签：c#, redis, booksleeve

参考[这篇](https://blog.stackoverflow.com/2012/02/stack-exchange-open-source-projects/)关于[Booksleeve](http://code.google.com/p/booksleeve/)的帖子以及没有官方 Windows Redistribuition 的事实，[最佳](http://redis.io/download)实践是什么？最好在 Win32 上编译，还是“非官方”的 win32/64 发行版可靠且受维护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:23:38.593

Booksleeve 只是 any-other-redis-client，与您选择使用的 redis-server 版本/平台相当正交。*就个人而言，我目前*只会使用 redis-server 的 win32 实现作为本地开发人员的便利。生产机器可能应该使用 linux 构建（如果重要，我们使用 ubuntu 服务器）。其原因归结为一个简单的事实，即 redis-server 旨在利用廉价的 linux fork/copy-on-write 功能来执行后台保存（以及可能的其他功能）。Windows**没有**这样的分叉，“windows 上的 linux”实现通常会进行内存复制（非常昂贵，并且可能会显着影响某些操作的执行方式）。

更糟糕的是：至少有一个纯 Windows 版本的 redis-server 只是简单地将请求替换`BGSAVE`为`SAVE`请求；在繁忙的服务器上，这就是*死亡*：`SAVE`是同步的，而 redis 是*单线程*的，通常只是利用单个操作非常快的事实，因此您通常不会注意到。但是：如果你突然收到一个`SAVE`需要 20 秒的请求，那么你的 redis 服务器在这 20 秒内***什么都不***做。当您依赖通常在 0.3 毫秒左右的回复时，这是一个**大问题**。

微软一直在研究 redis-server 的端口，很*可能*现在已经准备好生产了；但是，考虑到所有因素，***现在***我宁愿坚持在 linux 服务器上使用经过良好测试的主要实现。

但是：对于临时开发人员使用，任何 win32 构建都应该没问题。

# android - 查看 SQLite 数据库内容

> ID：12120831
> 
> 赞同：3
> 
> 时间：2012-08-25T09:35:52.453
> 
> 标签：android, eclipse, sqlite, eclipse-plugin, adt

我正在使用 sqllite db 开发一个 android 应用程序，我想知道是否有办法探索这个 db 的当前内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:44:50.427

[下载 SqlLite 数据库浏览器](http://www.razorsql.com/docs/sqlite_database_browser.html)。

您需要从设备或模拟器中提取数据库的副本，如下所述，并处理可以稍后恢复的副本。

特定应用程序的数据库位于 /data/data/[packagename]/databases

包名是您在清单中定义的包，例如 /data/data/org.example.com/databases/counts.db。

您可以使用 adb shell 查看它，以查看数据库类型 sqlite3 /data/data/org.example.com/databases/counts.db

**或者您可以从设备中提取它**以使用第三方实用程序查看它，例如 adb pull /data/data/org.example.com/databases/counts.db ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T05:41:48.493

在浏览器中管理您的 Sqlite 数据库非常简单易用。

[https://github.com/skyhacker2/SQLiteOnWeb-Android](https://github.com/skyhacker2/SQLiteOnWeb-Android)

# wordpress - .htaccess 301 重定向

> ID：12120832
> 
> 赞同：0
> 
> 时间：2012-08-25T09:35:58.803
> 
> 标签：wordpress, .htaccess

我将我的网站从 MODx 切换到 Wordpress 到另一个平台，所以现在我必须进行 301 重定向。

我需要做的就是 301 重定向`http://www.domain.com/page-name.html`到`http://www.domain.com/page-name/`.

我应该在我的 Wordpress`.htaccess`文件中添加哪些行？

.htaccess 文件

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:38:33.113

只需一页，请尝试：

```
Redirect 301 /page-name.html /page-name/ 
```

对于以 html 结尾的所有内容，请尝试：

```
RedirectMatch 301 ^/([^.]+)\.html$ /$1/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:57:44.687

请注意完整的 URL 不起作用，只能使用相对 URL

# ios - 只有一个节标题

> ID：12120835
> 
> 赞同：0
> 
> 时间：2012-08-25T09:36:28.253
> 
> 标签：ios, tableview

我想只为最上面的单元格设置部分标题（用于 UITableView），这是一种固定在顶部的表格标题，显示有关最上面的单元格的一些附加信息。

有可能吗？如果不是（我想因为我已经仔细阅读了所有文档）你知道如何复制这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:15:30.317

您需要创建自己的视图以用作标题。最简单的做法是让您的自定义标题视图成为表格视图的同级，并将其放置在屏幕上表格视图的上方。

由于`UITableView`是 的子类`UIScrollView`，因此您的表视图的委托也是滚动视图委托并接收`UIScrollViewDelegate`消息。你想实现这个方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

每次您的委托收到该消息时，您希望它查看哪个表格视图行位于表格视图的顶部（使用`[tableView indexPathForRowAtPoint:tableView.contentOffset]`）并相应地更新您的自定义标题视图的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:41:09.743

阅读有关 UITableView 的 Apple 文档。您要查找的属性是 tableHeaderView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:07:37.523

这很难（并非不可能），`UITableViewController`因为它强制 tableView 成为根视图。

如果您实现自己的控制器，请继承自`UIViewController`而不是`UITableViewController`.

您必须采用数据源和委托协议，并适当地实现这些方法，但随后您将拥有一个普通视图作为您的根视图。然后，您可以`UITableView`在任何您想要的位置和大小添加一个，周围有任何您想要的东西。

唯一真正的限制是您在 IB 中构建的静态表视图。但是，在这种情况下，您可以实现视图控制器包含，并将您的表视图控制器父级到另一个控制器，并给它一个特定的视图来接管。

第一个选项非常简单，但第二个是一种高级技术，您需要了解视图控制器包含才能正确操作。

# c - 对于指向数组的指针，realloc 失败（在 C 中）

> ID：12120836
> 
> 赞同：0
> 
> 时间：2012-08-25T09:36:29.777
> 
> 标签：c, memory, heap-memory, realloc, corruption

我正在尝试为（本质上是）一个二维字符数组动态分配内存 - 即 - 一个字符串数组。

我的代码如下：

```
typedef char LineType[MAX_CHARS+1];
LineType* lines;

int c = 0;
int N = 2;

lines = (LineType *) malloc (N * sizeof( LineType) );
do { 
    if (c > N ) {
        N *=2;
        lines = (LineType*) realloc (lines, N * sizeof( LineType));
    }

    .
    .
    .
    c++;

} while ( . . . ) 
```

这编译得很好，但在运行时失败，给出关于可能的 HEAP CORRUPTION 的警告并在 dbgheap.c 处中断（在：_CrtIsValidHeapPointer）

我究竟做错了什么？我认为这可能是由于数据结构中混合了固定/动态维度......但是，然后为字符串数组（不同大小）声明然后动态分配（和重新分配）内存的最佳方法是什么（每个都是固定大小的）？

非常感谢提前

**2012 年 8 月 26 日更新**

我稍微修改了代码以适应人们的意见和建议。问题依然存在...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:42:54.107

假设`c`是用来索引的`lines`，你需要测试一下`c >= N`，不是`c > N`。

顺便说一句，我建议使用 typedef 使您的代码更具可读性。我也会避免多余的分配代码：

```
typedef char fixed_string[MAX_CHARS + 1];

int c = 0;
int N = 0;
fixed_string *lines = NULL;

do {
    if (c >= N ) {
        N = N ? 2*N : 2;
        lines = (fixed_string*) realloc (lines, N * sizeof(fixed_string));
    }
    ⋮
    c++;
} while (…); 
```

另外，在使用 2 的增长因子时要小心。它留下的孔永远不能被同一阵列重复使用。系数 1.5 ( `3*N/2`) 更安全。

**编辑：**我从其他评论中注意到，您在重新分配时遇到了崩溃。这与写到数组末尾之后是一致的。调试内存分配器将立即用特殊字节填充已分配内存块周围的空间，并在下次对该内存块执行某些操作时检查这些字节是否保留。HEAP CORRUPTION 消息表明您通过在给定的内存之外写入已经损坏了周围的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:47:37.930

使事情更具可读性：

代替

```
char (*lines) [MAX_CHARS +1]; 
```

做一个

```
typedef char LineType[MAX_CHARS+1];
LineType* lines; 
```

以类似的方式，

```
lines = (char (*) [MAX_CHARS +1]) calloc (N, sizeof( char (*) [MAX_CHARS +1]));
...
lines = (char (*) [MAX_CHARS + 1]) realloc (lines, N * sizeof( char (*) [MAX_CHARS +1])); 
```

变成

```
lines = malloc(N*sizeof(LineType));
...
lines = realloc(lines, N * sizeof(LineType)); 
```

注意：我用 malloc 替换了 calloc，只是因为我从不使用 calloc，所以我不确定它是否尝试玩对齐技巧。

无论哪种方式，一个小的 typedef 都可以大大提高可读性。可读的代码更容易理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:39:34.963

这是大错特错

```
lines = (LineType *) malloc (N, sizeof( LineType *) ); 
```

因为它只为单个指针`sizeof(LineType*)`而不是多个字符串分配空间。

（它也碰巧使用了奇怪的[“逗号运算符”](http://en.wikipedia.org/wiki/Comma_operator)，它允许您有两个表达式，其中只有一个表达式。它评估并丢弃左侧的内容，并保留右侧的内容。这里不是很好！ )

更好的分配将是

```
lines = malloc(N * sizeof(LineType)); 
```

我们为 N 个类型的对象分配空间`LineType`。

realloc 也有类似的问题，您为指针而不是整个对象分配空间。

# java - 传递未实现 setter 方法的 JSF 参数

> ID：12120844
> 
> 赞同：-1
> 
> 时间：2012-08-25T09:37:42.533
> 
> 标签：java, jsf-2

我有一个带有命令链接的数据表，我想将一个对象传递给 bean。commandlink 上的 action 属性直接指向同一页面，即。没有导航。结果（我认为/怀疑），或者由于某些其他原因，bean 中的 setter 方法没有被实现，因此我在 beanis 中的对象为 null。我该如何解决这个问题。以下是数据表、setter 和我的方法的摘录。谢谢

```
<h:commandLink value="Delete"actionListener="#bOQMasterManager.removeBOQ}" action="boqmaster">
     <f:setPropertyActionListener target="#{bOQMasterManager.boqmasterPK}" 
        value="#{boqs.boqmasterPK}" />
   </h:commandLink>

public void setBoqmasterPK(BoqmasterPK boqmasterPK) {
     System.out.println("In the setter!!!");
    this.boqmasterPK = boqmasterPK;

}

public void removeBOQ(ActionEvent event) {
    try {
        System.out.println("In removeBOQ!!!");

        request.removeBoq(boqmasterPK);
        logger.info("Removed BOQ .");
    } catch (IllegalArgumentException e) {
        System.out.println("In the exception!!!"+e.getMessage());

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:52:05.300

首先我希望

```
actionListener="#bOQMasterManager.removeBOQ}" 
```

是

```
actionListener="#{bOQMasterManager.removeBOQ}" 
```

And`setBoqmasterPK`是在`bOQMasterManager`Bean 中定义的，并且无论它是什么都`getBoqmasterPK`必须定义。`boqs`

```
public void setBoqmasterPK(BoqmasterPK boqmasterPK) {
    System.out.println("In the setter!!!");
    this.boqmasterPK = boqmasterPK;
} 
```

# c# - 如何使用“IWebDriver”从 C# 中的弹出窗口转到主窗口？

> ID：12120845
> 
> 赞同：0
> 
> 时间：2012-08-25T09:38:25.890
> 
> 标签：c#, .net

**帮助代码**

```
 String parentWindowHandle = browser.getWindowHandle(); // save the current window handle.
      WebDriver popup = null;
      Iterator<String> windowIterator = browser.getWindowHandles();
      while(windowIterator.hasNext()) { 
      String windowHandle = windowIterator.next(); 
      popup = browser.switchTo().window(windowHandle);
        if (popup.getTitle().equals("Google") {
          break;
        }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:15:54.390

如果我理解正确。

```
for (String handle : driver.getWindowHandles()) {
  driver.switchTo().window(handle);
} 
```

[http://code.google.com/p/selenium/wiki/NextSteps](http://code.google.com/p/selenium/wiki/NextSteps)

# jquery - jQuery获取当前数组索引位置

> ID：12120852
> 
> 赞同：1
> 
> 时间：2012-08-25T09:39:55.063
> 
> 标签：jquery, arrays

我有一个数组和一个 div：

```
var urls = ["google", "yahoo", "facebook"];

<div class="yahoo"></div> 
```

是否可以获得作为 div 类加载的任何元素的数组索引？

我试过了：

```
alert(urls.index()); 
```

我的分页符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T09:42:24.950

你可以试试`$.inArray`实用功能。

```
var urls = ["google", "yahoo", "facebook"];    
var cls = $('div').attr('class');
var ind = $.inArray(cls, urls); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:51:45.217

```
var urls = ["google", "yahoo", "facebook"];

var pos = getPosition(urls, 'yahoo'); //returns 1

function getPosition(arrayName,arrayItem) {
    for(var i=0;i<arrayName.length;i++){ 
        if(arrayName[i]==arrayItem)
        return i;
    }
}​ 
```

[**小提琴**](http://jsfiddle.net/xdQhP/)

# c++ - 使用 Openssl 和 C++ 从公钥中提取模数和指数

> ID：12120862
> 
> 赞同：1
> 
> 时间：2012-08-25T09:41:15.447
> 
> 标签：c++, cryptoapi

所以我目前正在研究网络是如何工作的。我有一堆来自wireshark的数据包，我已经复制到缓冲区中（只有内容，没有标题。Wireshark->Follow TPC Stream->C数组）。我可以理解协议，但在第三个数据包中它需要密钥交换。经过一番谷歌搜索后，我发现我需要 RSA 加密。它向我发送了一个公钥 + 令牌。我应该返回我之前收到的加密共享密钥（刚刚生成）和加密令牌。

RSA_key 需要指数和模数，所以我的问题是：如何从单个 char[] 缓冲区（公钥）创建 RSA_key 对象。

注意：经过长时间的谷歌搜索，我在这里发布。我可能没有使用正确的关键字，因为我不会说英语。我只能找到用 php 询问这个问题的线程。我发现的最有用（我认为）的链接是[http://www.techper.net/2012/06/01/converting-rsa-public-key-modulus-and-exponent-into-pem-file/](http://www.techper.net/2012/06/01/converting-rsa-public-key-modulus-and-exponent-into-pem-file/)

谢谢。

PS我正在嗅探我的世界并模拟客户端（我选择它是因为它很受欢迎，我知道如果我遇到困难我会在网上找到资源）。但是我的问题是如何从具有以下格式**的公钥中获取模数和指数：http:** [//pastebin.com/J9ddhgW5](http://pastebin.com/J9ddhgW5)（即代表公钥的字节）

哦，我忘了，第一列是字节位置，第二列是类型转换为 int 的字节值，第 3 列又是值，但是 (int)(unsigned char) 所以我可以看到它的 +127，第 4 列是否是十六进制表示值和最后一列是基于 ascii 表的字符（如果其可见字符）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T05:57:29.207

您发布的数据是 ASN.1 编码 (DER) RSA 公钥：

```
$ openssl ssl rsa -inform der -pubin -text < 12120862.key 
Public-Key: (1024 bit)
Modulus:
    00:81:1f:1d:00:7e:d0:c7:e2:2f:31:3d:0d:f0:a8:
    ab:c1:ea:66:ba:af:1d:a4:eb:b3:fd:51:58:1c:1d:
    81:ae:f0:99:9e:5c:26:67:b5:41:14:28:79:c0:29:
    e5:56:96:06:b7:4b:a0:c9:7f:41:46:9a:7e:85:10:
    a0:91:ea:58:bd:78:78:6d:3c:07:2a:3d:61:f3:ed:
    42:8b:1e:dc:6d:2d:21:41:7a:e8:15:51:0d:75:84:
    be:20:8c:76:43:8b:4b:67:6b:49:09:e9:20:a1:11:
    53:a0:d9:30:b1:c2:27:a6:09:e1:56:36:ed:7e:9b:
    23:e2:df:5b:bd:c5:66:ca:c5
Exponent: 65537 (0x10001)
writing RSA key
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCBHx0AftDH4i8xPQ3wqKvB6ma6
rx2k67P9UVgcHYGu8JmeXCZntUEUKHnAKeVWlga3S6DJf0FGmn6FEKCR6li9eHht
PAcqPWHz7UKLHtxtLSFBeugVUQ11hL4gjHZDi0tna0kJ6SChEVOg2TCxwiemCeFW
Nu1+myPi31u9xWbKxQIDAQAB
-----END PUBLIC KEY----- 
```

在 OpenSSL 中，您可以使用该`d2i_RSA_PUBKEY`函数从 ASN.1 编码的文件（如此文件）中获取公钥。

# c# - 为什么我的 get set 实现会给出我无法捕获的堆栈错误？

> ID：12120863
> 
> 赞同：2
> 
> 时间：2012-08-25T09:41:20.817
> 
> 标签：c#

我有以下内容：

```
 private int order;
    public int Order {
        get { return order; }
        set {
            if ((value < 0) || (value > 99)) {
                throw new Exception(string.Format("{0} must be between 0 and 99", value.ToString()));
            } else {
                order = value;
            }
        }
    } 
```

这在这里被称为：

```
 try {
                property.SetValue(reference, convertedValue, null);
            } catch (Exception e) {
                var a = e;
            } 
```

当我将值设置为 50 时，一切正常。当我将值设置为 123 并逐步进行调试时，它会转到 property.SetValue 行，然后接下来是它给了我这个并指向第一个代码片段中“} else {”代码块的末尾。

```
System.Exception was unhandled by user code
  HResult=-2146233088
  Message=123 must be between 0 and 99
  Source=Test.Storage
  StackTrace:
       at Storage.Models.Reference.set_Order(Int32 value) in C:\Code K\139- Aug  23\Common\Storage\Models\Reference.cs:line 22
  InnerException: 
```

有人可以解释为什么不处理异常吗？我不明白为什么它不会被围绕 property.SetValue 的 try 循环捕获。我在 var a = e; 上有一个调试点；但它不会去那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:58:56.413

问题在于 Visual Studio 调试器，默认情况下，它启用“仅启用我的代码”选项。在您的情况下，您没有处理您的代码，但反射代码正在启动。

如果您要直接从 Windows 资源管理器运行应用程序，您会发现没有任何问题，并且异常得到了正确处理。

可以在[http://msdn.microsoft.com/en-us/library/038tzxdw%28v=vs.100%29.aspx找到更多信息，并且可以在](http://msdn.microsoft.com/en-us/library/038tzxdw%28v=vs.100%29.aspx)[https://](https://stackoverflow.com/a/2831236/146205)找到具有更详细答案的类似帖子[stackoverflow.com/a/2831236/146205](https://stackoverflow.com/a/2831236/146205)。

# ios - 应用程序因内存警告而崩溃

> ID：12120867
> 
> 赞同：1
> 
> 时间：2012-08-25T09:41:48.993
> 
> 标签：ios, uiimageview

我正在开发一款摄影应用程序，我正在为一张图像添加 10 种效果。我为此使用了一些库。一段时间后应用程序崩溃。它显示内存警告。我正在使用压缩后的图像，但应用程序仍然崩溃。谁能告诉我如何解决这个内存警告。我正在使用以下代码进行图像压缩

```
-(UIImage *)resizeImage:(UIImage *)image {
int w = image.size.width;
int h = image.size.height; 

CGImageRef imageRef = [image CGImage];

int width, height;

int destWidth = 640;
int destHeight = 480;
if(w > h){
    width = destWidth;
    height = h*destWidth/w;
} else {
    height = destHeight;
    width = w*destHeight/h;
}

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef bitmap;
bitmap = CGBitmapContextCreate(NULL, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedFirst);

if (image.imageOrientation == UIImageOrientationLeft) {
    CGContextRotateCTM (bitmap, M_PI/2);
    CGContextTranslateCTM (bitmap, 0, -height);

} else if (image.imageOrientation == UIImageOrientationRight) {
    CGContextRotateCTM (bitmap, -M_PI/2);
    CGContextTranslateCTM (bitmap, -width, 0);

} else if (image.imageOrientation == UIImageOrientationUp) {

} else if (image.imageOrientation == UIImageOrientationDown) {
    CGContextTranslateCTM (bitmap, width,height);
    CGContextRotateCTM (bitmap, -M_PI);

}

CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
CGImageRef ref = CGBitmapContextCreateImage(bitmap);
UIImage *result = [UIImage imageWithCGImage:ref];

CGContextRelease(bitmap);
CGImageRelease(ref);

return result;  
} 
```

我正在使用那个 GPUImage 库，并且我添加了 GPUImageView 来显示图像。如果有人有任何想法，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:41:49.477

你需要释放`colorspace`：

```
CGColorSpaceRelease(colorspace); 
```

这可能是泄漏的原因，但是如果您`resizeImage`多次调用，则可能是崩溃的原因

# mysql - SQL选择随机未回答的事情

> ID：12120874
> 
> 赞同：1
> 
> 时间：2012-08-25T09:43:16.663
> 
> 标签：mysql

我正在构建一个调查项目，并且有三个表：`users`、`questions`、`answers`，其中`answers`包含用户回答的每个问题的记录（如果他们还没有回答给定的问题，则没有记录）。

我的数据结构是这样的：

```
CREATE TABLE users (
    id INT NOT NULL, 
    name VARCHAR(255),
    PRIMARY KEY (id)
    )

CREATE TABLE questions (
    id INT NOT NULL, 
    text VARCHAR(255), 
    PRIMARY KEY (id)
    )

CREATE TABLE answers (
    id INT NOT NULL, 
    id_q INT NOT NULL,
    id_u INT NOT NULL,
    answer VARCHAR(255),
    PRIMARY KEY (id),
    FOREIGN KEY (id_q) REFERENCES questions(id),
    FOREIGN KEY (id_u) REFERENCES users(id)
    ) 
```

我已经尝试了一些基本的东西，`LEFT JOIN`但无济于事。我已经用于`ORDER BY RAND() LIMIT 0,1`问题的随机性部分。我怀疑这并不像我想象的那么简单。（我正在自学 SQL .. 我需要使用其中一种我还不知道的子查询吗？）

**如何编写 MySQL 来选择一个没有来自指定用户的相应答案的随机问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T09:56:17.553

你在正确的轨道上`LEFT JOIN`......

您可以使用它对`INNER JOIN`with进行反向选择`WHERE column IS NULL`。就是这么简单：

```
SELECT    q.*
FROM      questions q
LEFT JOIN answers a ON q.id = a.id_q AND a.id_u = <user id here>
WHERE     a.id IS NULL
ORDER BY  RAND()
LIMIT     1 
```

# android - 无法获取具有透明度的 webP 图像的位图大小？

> ID：12120878
> 
> 赞同：1
> 
> 时间：2012-08-25T09:43:56.137
> 
> 标签：android, bitmap, android-4.0-ice-cream-sandwich, webp, image-size

我正在使用相对较新的[**webP**](https://developers.google.com/speed/webp/)图像格式进行一些实验，该格式在 android 4 (ICS) 上受支持，如图[**所示**](http://developer.android.com/guide/appendix/media-formats.html)。

到目前为止，为了在加载之前获取图像大小，我使用了下一个代码（类似于 google[**在此处**](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)显示的内容）：

```
final BitmapFactory.Options options=new BitmapFactory.Options();
options.inJustDecodeBounds=true;
BitmapFactory.decodeStream(inputStream,null,options);
//image size is in options.outWidth,options.outHeight 
```

但是，当我在具有透明度的 webP 图像上使用它时，它似乎根本无法获取此信息（宽度和高度均返回 -1）。

谷歌是否有可能在解码此图像文件类型时出现错误？

有没有办法克服这个？

为了测试它，只需将具有透明度的 png 文件（就像我使用过的[**这个文件，并通过**](http://www.droidforums.net/forum/attachments/droid-news/50527d1338401753-someone-spilled-beans-googles-nexus-tablet-get-gimbals-jellybeans-pile.jpg)[**paint.net**](http://www.getpaint.net/)应用程序添加了一些透明像素）转换为 webP 格式（使用[**谷歌的工具**](https://developers.google.com/speed/webp/download)），并尝试读取分辨率像我使用的代码一样的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:21:55.860

我也遇到了这个问题。

遗憾的是，根据这个[错误报告](https://code.google.com/p/webp/issues/detail?id=147)，仅在 Android JB-MR2 (4.2) 中添加了对具有透明度的 WEBP 的支持。

所以在 android 4.0 到 4.2 WEBP 只有在没有 alpha 通道的情况下才有效。

# prolog - 如何使用差异列表和 3+ 列表连接？

> ID：12120881
> 
> 赞同：0
> 
> 时间：2012-08-25T09:44:25.203
> 
> 标签：prolog

我的代码中有以下状态： ![浓缩前一步](../Images/fdfca75be2510499e2bdac476228101c.png) 在下一步之后我得到

```
(cycle) T1=[26, 25|T1] 
```

在绑定中。如何解决这个问题并使最后一个浓度正常工作？如您所见，我了解如何使用单个 conc，但我不了解如何使用多个 conc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:42:12.757

首先，您对 X 和 List 的尾部使用相同的参数（都是 T）

但我认为这不是唯一的问题

TmpL1 = [[25|T1]-T1,[26|T2]-T2,[24,25|T1]-[25|T1]] 第一个和第三个列表具有相同的尾部（T1），第三个列表也有 25 个tail，tail 应该只有 Unsatisfied 参数

# php - Mysql 加入 1 行和多行 - 组 concat 或 php？

> ID：12120882
> 
> 赞同：1
> 
> 时间：2012-08-25T09:44:43.500
> 
> 标签：php, mysql, group-concat

考虑以下示例：

```
+----------+--------+-------------+----------+
| Person_id| Person | Language_id | Language |
+----------+--------+-------------+----------+
| 1        | Bob    | 5           | English  |
| 1        | Bob    | 3           | Italiano |
| 1        | Bob    | 8           | Deutsch  |
+----------+--------+-------------+----------+ 
```

并且查询是（不是那么重要，只是编写脚本来向您显示表结构）：

```
SELECT pl.Person_id, Person, Language_id, Language FROM people as p
LEFT JOIN people_languages as pl ON p.Person_id = pl.Person_id 
LEFT JOIN languages as l ON pl.language_id = l.language_id
WHERE pl.Person = 1; 
```

所以基本上，如果表是以这种方式构造的，最好检索所有结果，如上所示，然后创建一个 php 函数，该函数创建一个具有语言 ID 和语言在数组中的人员模型，或者使用`group_concat`检索单行然后将语言和languages_id 分解成一个数组？

顺便说一句，无论我做什么，最后我都希望有一个 Person 模型，如下所示：

```
class Person { 

    public $person_id; // 1
    public $person; // Bob
    public $language_id; // Array(5, 3, 8)
    public $language; // Array(English, Italiano, Deutsch);

    .
    . // Functions 
    .

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:05:52.647

这是答案。您可以同时使用这两种方式，但在我看来，使用组连接要好得多。原因是这将提高性能并减少 php 代码。如果你继续你给出的例子，你将不得不在 php 端做很多编码。有时在 php 端处理起来很困难。几个月前我有过这样的经历。相反，使用 group concat 将为您获取单行，其中包含每个人所需的一切。在 php 端简单地提取 Group Concated 单元格并制作另一个循环或将其放入数组中。这很容易处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T10:38:47.203

我认为您应该将查询分成单独的模型

应该有一个`Language`模型，并将保持这个简单

```
class Language
{
   function getId() { return $id; }
   function getDescription { return $description; }
}

class Person { 

public $person_id; // 1
public $person; // Bob
public $languages; //this will store array of Language object

} 
```

//从数据访问

```
function getPerson($person_id)
{
    $person = new Person();
    //select only from Person table
    //fill $person properties from records
    //$person.person_id = $row['person_id']; etc

    //select from people_languages joined to language where person_id=$person_id
    $person->languages = getLanguagesByPerson($person->person_id); //returns array of languages

    return $person;
} 
```

你现在可以拥有

```
$person = getPerson(123);
$person->langauges[0]->getId(); //language id
$person->langauges[0]->getDescription(); //language id

$person->langauges[1]->getId(); //language id
$person->langauges[1]->getDescription(); //language id 
```

或循环浏览语言

```
foreach($person->languages as $lang)
{
   //use($lang->getId());
   //use($lang->getDescription();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:51:26.790

考虑使用字典

```
 class Person { 

        public $person_id; // 1
        public $person; // Bob
        //I don't know php but for your idea
        public Dictionary<int,string> languageList; // KeyValuePairs {(5,English),(3,Italiano),(8,Deutsch)}
        .
        . // Functions 
        .

    } 
```

# android - 从服务向 appWidget 提供者发送广播意图

> ID：12120886
> 
> 赞同：2
> 
> 时间：2012-08-25T09:45:57.893
> 
> 标签：android, android-widget

我想从服务更新小部件。所以我需要发送一个广播，它应该在 AppWidgetProvider 扩展的类中接收。我正在使用如下所示的代码。我无法在班级的 onReceive() 中收到它。

```
if(getAction.equals("update.action")) {
        System.out.println("My Action");
        /*RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.mylayout);
        mAppWidgetManager.updateAppWidget(ids, views);*/
        Intent intent = new Intent("update.action", null);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,receivedIntent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, 0));
        sendBroadcast(intent);
        //updateAppWidget();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:08:50.180

> 我想从服务更新小部件。

伟大的！

> 所以我需要发送一个广播，它应该在 AppWidgetProvider 扩展的类中接收。

不，你没有。只需让您的服务更新应用小部件，使用`AppWidgetManager`.

> 我正在使用如下所示的代码。我无法在班级的 onReceive() 中收到它。

正如 Merlin 所指出的，您可能没有调整`<receiver>`清单中的元素以反映这个新的操作字符串。

另外，请使用更可能是唯一的操作字符串，例如将您的应用程序包名称放在`update.action`.

# c# - 显示列表 到列表框

> ID：12120887
> 
> 赞同：1
> 
> 时间：2012-08-25T09:45:58.350
> 
> 标签：c#, asp.net

```
DateTime StartDate = Convert.ToDateTime(txtDate.Text);
DateTime EndDate = Convert.ToDateTime(TextBox1.Text);

List<DateTime> datetimerange = new List<DateTime>();
while (DateTime.Compare(StartDate, EndDate) <= 0)
{
    datetimerange.Add(StartDate);
    StartDate = StartDate.AddDays(1);
} 
```

如何显示日期列表并将其显示到列表框？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:49:12.973

假设，我有一个 ID 为 lb 的列表框；只需将它的 DataSource 属性设置为等于您的日期时间列表并调用 list.DataBind 方法。

```
 List<DateTime> datetimerange  = new List<DateTime>();
 lb.DataSource = datetimerange ;
 lb.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T09:49:57.273

```
Lstbox.DataSource=datetimerange 
```

其中 Lstbox 是 ListBox 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T09:51:22.517

```
foreach (var datetime in datetimerange)
{
     listBox1.Items.Add(datetime.ToString());
} 
```

# ruby-on-rails - 将 2 个数组的字符串连接成 1 个数组

> ID：12120888
> 
> 赞同：1
> 
> 时间：2012-08-25T09:46:03.820
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, string, concatenation

我阅读（在文档中）如何将一个数组的字符串与另一个字符串连接起来：

```
a = [ "a", "b", "c", "d" ]
a.collect! {|x| x + "!" }
a                          #=>  [ "a!", "b!", "c!", "d!" ] 
```

但我还没有想出的是如何将 2 个数组的字符串连接成一个。例如：

```
field_suffix = %w[prev curr]
field_names = %w[_first_name _last_name] 
```

我想看到的是这样的：

```
["prev_first_name", "curr_first_name", "prev_last_name", "curr_last_name"] 
```

顺序无关紧要。它可能是：

```
["prev_first_name", "prev_last_name", "curr_first_name", "curr_last_name"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:15:11.670

```
field_suffix.product(field_names).map(&:join) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:01:21.617

这里是：

```
field_suffix = %w[prev curr]
field_names = %w[_first_name _last_name]

result = field_suffix.product(field_names).collect {|suffix, name| suffix + name} 
```

有关详细信息，请参见[Array#product](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-product)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T09:53:54.113

我会这样做：

```
out=[]
pre=["sub", "pre"]
suf=["less", "ness"]
pre.each do |p|
  suf.each do |s|
    out.push(p+s)
  end
end
puts out 
```

或者更少的行：

```
out=[]
pre=["sub", "pre"]
suf=["less", "ness"]
pre.each{|p| suf.each{|s| out.push(p+s)}} 
```

这不会**返回**数组（很遗憾），你必须有第二个数组；`out`这将是 subless, subness, preless, preness

# .htaccess - htaccess 获取部分 url 以创建新的 url

> ID：12120889
> 
> 赞同：0
> 
> 时间：2012-08-25T09:46:03.883
> 
> 标签：.htaccess

我的旧网址是这样的

```
http://example.com/dir/999-name/profile.html 
```

现在我想将所有这些 url 重定向到下面显示的那些

```
http://example.com/dir/profile/999-name.html 
```

我尝试了下面的但没有工作

```
RewriteRule ^dir/(.*)/(.*)$ /dir/profile/$1.html [R=301,NC,L] 
```

有人可以帮我获得 htaccess 重定向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:39:46.530

尝试：

```
 RewriteRule ^dir/([^/]*)/(.*).html$ /dir/$2/$1.html [R=301,NC,L] 
```

# javascript - 使用 HTML 和 JS 以及 appMobi 的 iPhone 游戏中的性能问题

> ID：12120891
> 
> 赞同：5
> 
> 时间：2012-08-25T09:46:06.753
> 
> 标签：javascript, iphone, html, canvas, appmobi

在使用 Java 为 Android 创建了一些游戏之后，我正在使用 appMobi 制作我的第一款游戏。我基本上打算创建一个无尽的跑步街机游戏，2d，俯视图。

我正在使用带有普通 JS 和 CSS3 的 appMobi（没有任何其他库，例如 Impact）。

我首先用画布进行了一些测试，并创建了一个非常简单的演示，您可以在其中使用加速度计控制一个球（基本上是一个使用画布渲染的圆圈）并需要收集其他球。我用我的 Galaxy S2 和 iPhone 4 对其进行了测试，看起来 iPhone 运行得更好，所以我开始编写一个简单的引擎来使用 dom 元素。我基本上创建了一个连接到标签的对象，并保存一个位置向量，还添加了一个基本上执行以下操作的绘制函数：this.element.style.left=x+'px'（对于 top 和 y 也是如此）。

在我的主循环中，我调用了对象的绘制函数并根据我的游戏逻辑更新了它们的位置，并使用这个 window.requestAnimationFrame 包装器重新调用了 mainLoop：

```
window.requestAnimFrame = (function(){
       return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })(); 
```

然后我继续创建一个相机对象来控制屏幕定位，并使用 css background-position 属性使其成功滚动背景。我已经用我的新 Galaxy s3 和带有一些图形（2 200x200 png，和一个背景）的 s2 对其进行了测试，一切都以大约 60 fps 的速度运行。我对结果非常满意，并且很高兴在 iPhone 4 iOS 4.x 上进行测试，但令我失望的是它的运行速度为 2-3 FPS！比我的安卓慢 30 倍。我开始进行很多更改（目前我使用的是 720x1280 的视口）所以我尝试使用 320*480，改用画布，删除滚动背景，调整图像大小，但无济于事，而 android 在所有的变化。

我得到的最好的是5 FPS。我有另一部 iPhone 进行测试，一部带有 iOS5 的 iPhone 4S，FPS 非常不稳定。范围从 3 到 50，但无法播放 - 没有人会玩它，而且我什至还没有开始用内容打包它。

我真的很想利用跨平台，放弃苹果市场对我来说是一种耻辱，所以任何提示或建议都会受到热烈欢迎！

谢谢，加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:37:33.443

这是我在 appMobi 论坛上得到的答案，如果有人有这个问题：

> 使用直接画布
> 
> 无论如何，JS/CSS3 在每台设备上都会表现得很糟糕。iOS（Safari）中的股票浏览器启用了 NitroJS，但在 UIWebView 中没有启用......但如果你有时间，请阅读，你会发现如果不利用 Direct 等硬件加速，你就无法编写 JS 游戏帆布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:56:00.460

在此处查找一些示例和链接以帮助您开始使用 directCanvas：

[http://www.appmobi.com/documentation/index.php?DOC=DIRECTCANVAS_SDK](http://www.appmobi.com/documentation/index.php?DOC=DIRECTCANVAS_SDK)

# c++ - 抄袭检测-风选算法-指纹冲突

> ID：12120896
> 
> 赞同：8
> 
> 时间：2012-08-25T09:46:41.130
> 
> 标签：c++, algorithm, plagiarism-detection

我在大文本文件中编写剽窃检测应用程序。在阅读了很多关于它的文章后，我决定使用[Winnowing 算法](http://homepages.math.uic.edu/~saul/Maths/winnowing.pdf)（使用 Karp-Rabin 滚动哈希函数），但我遇到了一些问题。

**数据：**

我有两个简单的文本文件——第一个更大，第二个只是第一个的一个段落。

**使用的算法：**

这是我用来从所有哈希中选择我的指纹的算法。

```
void winnow(int w /*window size*/) {
    // circular buffer implementing window of size w
    hash_t h[w];
    for (int i=0; i<w; ++i) h[i] = INT_MAX;
    int r = 0; // window right end
    int min = 0; // index of minimum hash
    // At the end of each iteration, min holds the
    // position of the rightmost minimal hash in the
    // current window. record(x) is called only the
    // first time an instance of x is selected as the
    // rightmost minimal hash of a window.
    while (true) {
        r = (r + 1) % w; // shift the window by one
        h[r] = next_hash(); // and add one new hash, if hash = -1, then it's end of file
        if(h[r] == -1)
            break;
        if (min == r) {
            // The previous minimum is no longer in this
            // window. Scan h leftward starting from r
            // for the rightmost minimal hash. Note min
            // starts with the index of the rightmost
            // hash.
            for(int i=(r-1)%w; i!=r; i=(i-1+w)%w)
                if (h[i] < h[min]) min = i;
                    record(h[min], global_pos(min, r, w));
        } else {
            // Otherwise, the previous minimum is still in
            // this window. Compare against the new value
            // and update min if necessary.
            if (h[r] <= h[min]) { // (*)
                min = r;
                record(h[min], global_pos(min, r, w));
            }
        }
    }
} 
```

接下来，为了检测两个文件中是否有相同的文本，我只需比较两个文本的指纹以检查我们是否有匹配项。因此，为了检测抄袭，算法必须采用在文本中完全相同的位置开始的哈希，例如：

Text1: A do run |t^his my check your.

文本 2：我的 bla lol |t^his my dasd 鸡。

为了获得正确的哈希值，它具有相同的值（这也意味着我们有相同的文本），算法应该从我用“|”指向的地方获取指纹 或“^”（我假设我们需要 5 个字符来计算哈希，没有空格）。它不能从 '|' 中获取哈希值 在文本 1 中和文本 2 中的 '^' 因为这两个哈希值不同并且不会检测到抄袭。

**问题：**

要检测这一段是否是从文本编号 1 复制的，我必须在两个文本的某个位置有两个相同的指纹。问题是算法选择不适合彼此的指纹，我的意思是他们只是错过了，即使在更大的文本中也是如此。

**问题：**

你有什么想法我可以改进这个算法（这实际上降低了羚牛指纹的正确算法），它会更有可能发现抄袭？

**我的想法：**

我考虑过运行 winnow 函数几次，对于不同的窗口大小（这将导致采用不同的哈希值），但对于该程序必须在其上工作的大文本（如 2MB 只是文本），这将花费太多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:47:14.513

If you have running window over which you are computing the hash, you can update the hash value in constant time when window moves. The method is called [Rabin fingerprint](http://en.wikipedia.org/wiki/Rabin_fingerprint) ([see also](http://www.infineta.com/blog/rabin-algorithm-%E2%80%93-mother-deduplication-technologies)). This should allow you to compute all fingerprints of size X in O(n) running time (n is a size of an input document). I guess the paper you cite is some advanced extension of this method and when implemented correctly it should also give you a similar running time. The key is to update the hash not recompute it.

# javascript - 使用单个按钮上传文件

> ID：12120897
> 
> 赞同：0
> 
> 时间：2012-08-25T09:46:42.440
> 
> 标签：javascript, asp.net-mvc, file-upload

我已经用一个按钮实现了文件上传我已经采取了一个按钮和一个文件上传控制，然后单击按钮我打开文件上传以浏览文件，

选择文件后我必须提交表单，当我点击提交时出现问题，文件上传为空，我的控制器中的 HttpPostedFileBase 为空，但是当我直接使用文件上传控件时（即点击它的浏览按钮）它工作正常

下面是我的代码

```
 $(document).ready(function () {
        $("#btn").click(function () {
            $("#logup").click();
            $("#logup").select();
            return false;
        });

    });

<input type="button" id="btn" value="Choose file" />
<input type="file" id="logup" name="logofile" style="display:none" />

<button type="submit">Submit</button> 
```

第二，我还想在选择文件后显示文件名，除了我的 btn 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:54:22.483

**回答问题 1**

下面是一个带有两个提交按钮的表单。请注意，这两个提交按钮具有相同的名称，即“submitButton”</p>

```
@Html.BeginForm("MyAction", "MyController"); %>
<input type="submit" name="submitButton" value="Button1" />
<input type="submit" name="submitButton" value="Button2" />
} 
```

现在转到控制器，Action 接受一个名为 string stringButton 的输入参数，其余的非常不言自明。

```
public ActionResult MyAction(string submitButton) {
        switch(submitButton) {
            case "Button1":
               // do something here
            case "Button2":
               // do some other thing here
            default:
                // add some other behaviour here
        }
...
} 
```

**回答问题 2**

您将从[HttpFilePostedBase](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.aspx)对象中获取文件名，但由于您不想要回发，您可以创建一个返回此值的操作`JSON`

# php - CodeIgniter 应用程序上下文中的“模型”是什么？

> ID：12120898
> 
> 赞同：1
> 
> 时间：2012-08-25T09:46:47.580
> 
> 标签：php, codeigniter, model

最近我开始使用`Codeigniter`框架来开发`RESTFul`移动应用程序的 Web 服务。

当我查看网站和 youtube 上的各种教程时，我发现 a 的概念`Model`在 PHP 应用程序上下文中的使用方式不同。

**有何不同？**

好吧，正如**我一直认为**的模型类应该是这样的，

***猫.php***

```
<?php

class Cat {

   // Class variables
   private $colour;

   public __construct() {
      $colour = 'Brown';
   }

   // Getters and Setters

   public function getColour() {
      return $this->colour;
   }

   public function setColour($newColour) {
      $this->colour = $newColour;
   }

}

?> 
```

但是，在通过 Internet 搜索好的教程时，我发现人们只是在使用可以访问数据库以获取数据并将其返回到`Controller`.

我还没有看到任何人在 Model 中编写普通类（**如果你是 Java 人，我们称之为 POJO**）

* * *

现在，在阅读和观看这些教程之后，我所需要的，

在 PHP 应用程序框架的上下文中，模型类是数据库的连接器，它在查询时返回与应用程序相关的数据。在我们称之为 SQL 人的语言中，

*   CRUD 函数

    *   创造
    *   读
    *   更新
    *   删除

## 所以，如果我错了，请纠正我。

在使用类似 Codeigniter 的框架创建的 Web 应用程序中，使用 MVC 模式来设计应用程序。模型类将具有将应用程序连接到数据库并返回数据的功能，并有助于在应用程序的数据库上执行所有 CRUD 操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:56:03.347

好吧，如果您使用过 C# 或 Ruby，那么您可以找到应用 MVC 模式的好方法。在我看来，在 PHP 中，人们有时会对这些术语感到困惑。我在 PHP 中使用 MVC 模式的方式如下：

**控制器**

```
class UserController { 

    private $repo;

    public function __construct() { 
        $this->repo = new UserRepository(); // The file which communicates with the db. 
    }

    // GET
    // user/register
    public function register() { 
        // Retrieve the temporary sessions here. (Look at create function to understand better)
        include $view_path;
    }

    // POST
    // user/create
    public function create() { 
        $user = new User($_POST['user']); // Obviously, escape and validate $_POST;
        if ($user->validate())
            $this->repo->save($user); // Insert into database

        // Then here I create a temporary session and store both the user and errors.
        // Then I redirect to register
    }

} 
```

**模型**

```
class User { 

    public $id;
    public $email;

    public function __construct($user = false) {
        if (is_array($user))
            foreach($user as $k => $v) 
                $this->$$k = $v;
    } 

    public function validate() { 
        // Validate your variables here
    }

} 
```

# c++ - 可以 static_cast 一个 void* 指针吗

> ID：12120900
> 
> 赞同：6
> 
> 时间：2012-08-25T09:47:03.237
> 
> 标签：c++, casting

例如，建议总是从`map<int,void*>hold`哪里存储指针，以后通过 static_cast 将其转换回来是否安全？`void*``classA`

```
classA* ptr = static_cast<classA*>( holditerator->second ); 
```

使用的原因`void*`是因为`hold`它是在某些不知道是什么的 cpp 文件使用的标头上定义的类的成员`classA`。我必须`classA`在这些 cpp 文件中包含定义的标题，这有很多原因无法完成。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T09:53:56.197

是的，`static_cast`在这种情况下没问题，而且使用正确。

我不得不问为什么你不`classA*`首先存储指针。如果要将派生类指针放入其中，**请注意**，在将派生类指针放入映射`classA*` *之前*，您需要向上转换/向上转换（隐式或显式）派生类指针。

但是即使您将派生类指针也放入映射中，基类指针就足够了，因为派生类指针可以隐式转换为基类指针。

> 使用 void* 的原因是因为 hold 是在某些不知道 classA 是什么的 cpp 文件使用的标头上定义的类的成员。

这可能是防止分层违规的正当理由。

> 我必须在这些 cpp 文件中包含 classA 定义的标题，这有很多原因无法完成。

在您的情况下，这很可能没有必要。前向声明就足够了。如果标头知道要放入地图中的内容，但只是想避免包含其他标头，那么这就是要走的路。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T10:10:19.340

正如约翰内斯解释的那样，`static_cast`没关系。另一种防止依赖`ClassA`于 cpp 文件的技术是使用[pimpl idiom](http://herbsutter.com/gotw/_100/)。

```
// in header file
class classB {
public:
    classB();
    ~classB();
private:
    class impl;
    unique_ptr<impl> pimpl;
};

// in implementation file
#include "classA.hpp"

class classB::impl 
{
    std::map<int, classA> hold;  // hidden in implementation file
};

classB::classB() : pimpl{ new impl{ /*...*/ } } { }
classB::~classB() { } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T10:05:04.267

仅仅因为地图的用户不应该知道实际类型而在标题中写入 void**并不是*一个好主意，因为您在代码中的任何地方都失去了类型安全性，包括在知道 ClassA 的地方。

考虑

1.  从代码的每个部分都可能知道的类派生 ClassA，
2.  将地图包装到一个对象中，该对象为必须处理地图但不处理 ClassA 的那些代码部分提供接口，
3.  在头文件中声明但未定义类 ClassA（如果在声明但未定义 ClassA 的某个位置销毁对象，则可能很危险），
4.  使用模板，
5.  *将包含*地图的类实现为派生子类，以便可以将地图字段放入派生子类中。

第 5 点：插图（= 模板模式）

代替

```
class Containing {
    private:
       map<int,void*> myMap;
    public:
       void somePublicFunction () { // ...implementation }
}; 
```

你写

```
// Containing.h
class Containing {
   protected:
       virtual void doSomething () = 0;
   public:
       static Containing* Create ();
       void somePublicFunction () { doSomething (); }
       virtual ~Containing () { }
};

// Containing.cc
#include ContainingImplementation.h
Containing* Containing::Create () { return new ContainingImplementation; }

// ContainingImplementation.h / cc
class ContainingImplementation : public Containing {
   protected:
      virtual void doSomething () { // ... }
   private:
      map<int,ClassA*> myMap;
   public:
      virtual ~ContainingImplementation () { }
}; 
```

# ios - CoreData 和线程

> ID：12120901
> 
> 赞同：0
> 
> 时间：2012-08-25T09:47:31.487
> 
> 标签：ios, core-data

我使用以下代码从 Web 服务加载数据并将其存储在 Core Data DB 中。

```
 dispatch_queue_t fetchQ = dispatch_queue_create("fetcher", NULL);
dispatch_async(fetchQ, ^{
    NSArray *list = [WebService loadData];
    dispatch_sync(dispatch_get_main_queue(), ^{
        if (list != nil) {
            for (NSDictionary *data in list) {

                NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Object" inManagedObjectContext:appDelegate.coreDataDatabase.managedObjectContext];
                NSFetchRequest *request = [[NSFetchRequest alloc] init];
                [request setEntity:entityDescription];

                NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id = %i", [[data objectForKey:@"id"] integerValue]];
                [request setPredicate:predicate];

                NSError *error = nil;
                NSArray *data = [appDelegate.coreDataDatabase.managedObjectContext executeFetchRequest:request error:&error];

                Object *object = [data objectAtIndex: 0];
                if (object == nil) {
                    object = [NSEntityDescription insertNewObjectForEntityForName:@"Object" inManagedObjectContext:appDelegate.coreDataDatabase.managedObjectContext];
                    object.id = [NSNumber numberWithInteger:[[data objectForKey:@"id"] integerValue]];
                }

                object.name = [data objectForKey:@"name"];
            }

            [appDelegate.coreDataDatabase saveToURL:appDelegate.coreDataDatabase.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil];
        }
    });
});
dispatch_release(fetchQ); 
```

代码被简化了，但它应该代表序列。对 Web 服务的访问在后台运行。之后，在主线程中调用 store。其实应该没问题吧？

不幸的是，并非所有设备都适用于所有设备。在我的所有设备和其他大多数设备上，都没有问题。在一些但显然如此，因为不幸的是商店里有一些负面的 Bewertugnen 和几个问题。问题是他在数据库中找到了一个已经存在的记录，而不是不断的新投资

谢谢你的帮助，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:44:11.557

我很难理解你的实际问题。我不太清楚你的意思是什么......

> 在一些但显然如此，因为不幸的是商店里有一些负面的 Bewertugnen 和几个问题。问题是他在数据库中找到了一个已经存在的记录，而不是不断的新投资

所以我会采取我最好的猜测。

从代码中，我假设您使用的是 UIManagedDocument。

您不应该`UIManagedDocument`直接保存 (saveToUrl)。相反，您应该让它处理自动保存，因为它会适当地执行此操作。

如果您在`NSUndoManager`上激活，`UIManagedDocument`则无需执行任何操作。所有操作将自动保存。如果您没有撤消管理器，则需要戳它以使其知道它有脏数据。你这样做：

```
[managedDocument updateChangeCount:UIDocumentChangeDone]; 
```

但是，请注意`UIManagedDocument`使用嵌套上下文，并且有一些与插入新对象相关的错误。也就是说，持久性 ID 没有被正确地推回子上下文。我对您的问题的假设是您因此而获得重复的数据条目。

这个 SO question 在一定程度上解决了这个问题。

[在获取 PermanantID 后，Core Data 无法完成对象的错误](https://stackoverflow.com/questions/11321717/core-data-could-not-fullfil-fault-for-object-after-obtainpermanantids/11996211#11996211)

基本上，你有几个选择，考虑到你想继续`UIManagedDocument`。首先，获取永久 ID。替换这一行：

```
[appDelegate.coreDataDatabase saveToURL:appDelegate.coreDataDatabase.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil]; 
```

有了这个（当然——处理错误——这只是传递0）：

```
NSManagedObjectContext *moc = appDelegate.coreDataDatabase.managedObjectContext;
[moc obtainPermanentIDsForObjects:moc.insertedObjects.allObjects error:0];
[appDelegate.coreDataDatabase updateChangeCount:UIDocumentChangeDone]; 
```

这仍然存在一些问题，但它们非常罕见。您的代码似乎没有非常复杂的对象图，所以这就足够了。

另一种选择是导入单独的 MOC（`UIManagedDocument`父上下文的子级），并在导入完成后重新获取主上下文。

使用您的代码示例，一个简单的方法是......

```
dispatch_queue_t fetchQ = dispatch_queue_create("fetcher", NULL);
dispatch_async(fetchQ, ^{
    NSArray *list = [WebService loadData];
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
    moc.parentContext = appDelegate.coreDataDatabase.managedObjectContext.parentContext;
    for (NSDictionary *data in list) {
        NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Object" inManagedObjectContext:moc];
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        [request setEntity:entityDescription];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id = %i", [[data objectForKey:@"id"] integerValue]];
        [request setPredicate:predicate];

        NSError *error = nil;
        NSArray *data = [moc executeFetchRequest:request error:&error];
        Object *object = [data objectAtIndex: 0];
        if (object == nil) {
            object = [NSEntityDescription insertNewObjectForEntityForName:@"Object" inManagedObjectContext:moc];
            object.id = [NSNumber numberWithInteger:[[data objectForKey:@"id"] integerValue]];
        }

        object.name = [data objectForKey:@"name"];
    }

    // Save the MOC you just loaded everything into
    [moc save:&error]; // handle error...
    // Save the parent MOC, which is also the parent of your main MOC
    moc = moc.parentContext;
    [moc performBlock:^{
        [moc save:&error]; // handle error
        // When all the saves are done, run on the main queue and just refetch
        // all the entities that were inserted.
        dispatch_async(dispatch_get_main_queue(), ^{
            // Here, use appDelegate.coreDataDatabase.managedObjectContext
            // to refetch the objects that were altered.  If you are using a
            // table view or FRC just issue a refetch of the data and the
            // main MOC will get everything that was modified.
        });
    }];
});
dispatch_release(fetchQ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:38:39.447

如果您在主线程上创建了上下文，那么对它的每次访问也必须在主线程上（假设 iOS 5 之前的配置 - Core Data 支持 iOS 5 之后的 3 种模式）。

您可以创建一个串行调度队列，在那里创建 moc，并通过该队列汇集对它的所有访问。调度队列将访问序列化，因此您永远不会有并发。

我自己刚刚转换为使用 iOS5 中的私有队列功能，在这种情况下，每次访问都由 '[moc perform block...]' 完成 - 我花了不到 1 小时的时间进行转换，而且代码实际上变得更清晰（我如前所述，一直在使用串行队列）。

# objective-c - 了解“自我”并将自我设置为超级

> ID：12120904
> 
> 赞同：5
> 
> 时间：2012-08-25T09:47:41.053
> 
> 标签：objective-c, ios

我一直在关注一些教程，但我正在与自我堕落。有人可以帮忙吗？

我有以下init，它是一个实例方法。

```
- (id) initWithScore:(int) s {
    self = [super init];

    if (self) {
        score = s;

    }

    return self;
} 
```

现在通读代码，我将 self 设置为 super init，因此 self 现在指向 super。然后我检查 self 是否有效并设置分数等于我在 InitWIthScore 上发送的值。到目前为止，我已经得到了这个。

但是现在我返回指向超级的 self ，那么我如何返回我的子类？

因此，假设有人调用我的类传入 100，我的代码返回的是 super 而不是类，那么它是如何工作的？调用代码的分数如何为 100？

当然，是的，它确实有效，但我不知道为什么:-(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T10:00:10.873

此构造允许初始化程序（`super`初始化程序和您正在编写的初始化程序）以一种失败的方式 -`nil`如果对象无法初始化，则返回。这也是`nil`您`init`在致电后检查的原因`super`。

两者`self`和都`super`指向内存中的相同数据结构，即您分配的对象。区别在于这些特殊指针的语言语义：

使用`self`时，Objective-C 编译器将以您当前的类型启动方法和重载解析。

使用`super`时，Objective-C 编译器将在类的直接超类型处启动方法和重载解析。换句话说，`super`即使当前类中存在相同的方法，也只是能够调用超类中的方法的语义。

换句话说（稍微简化），`super`将内存位置视为超类的实例（例如，您子类化的类型，通常`NSObject`），而`self`将内存位置视为指向您定义的类型的常规指针。

如果您打印`super`并`self`在调试器中，您将看到它们指向相同的内存位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T09:55:58.660

整个对象创建调用看起来有点像这样：

```
SomeClass *foo = [[SomeClass alloc] initWithScore:100]; 
```

现在发生的第一件事就是调用`[SomeClass alloc]`. 这将`SomeClass`在内存中创建一个结构并返回一个指向它的指针。接下来是初始化的东西，`self`上一步的指针在哪里。因此`self`指向 class 的一个对象`SomeClass`。

不过，这个作业看起来有点奇怪：

```
self = [super init]; 
```

在大多数情况下`[super init]`不会改变`self`，它只会返回由`[SomeClass alloc]`. 但是分配模式允许两个额外的选项：

1.  超类`init`可以通过返回来表示构造错误`nil`，在这种情况下，所有后续初始化程序都会退出并获得一个`nil`对象。

2.  超类初始化器可能决定返回一个不同的`self`指针，例如，如果有一些复杂的缓存正在完成。指针应该再次指向一个`SomeClass`类型的对象，以便您的代码工作（您可以访问`score`等）。

我建议你阅读Mike Ash[的 The How and Why of Cocoa Initializers](http://www.mikeash.com/pyblog/the-how-and-why-of-cocoa-initializers.html)。是的，正如 driis 所指出的，意识到这一点`self`并且两者都指向同一个对象是非常好的。`super`

# git - 如何在 Github for windows 上访问一些命令

> ID：12120905
> 
> 赞同：6
> 
> 时间：2012-08-25T09:47:44.943
> 
> 标签：git, github, github-for-windows

由于易于使用和用户友好的设计，我想通过 github for windows。但我必须知道一些我使用经典版本的 Github 的代码。

例如如何到达这些命令？

“gitk-全部”

“git重置--硬头”

“混帐差异”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:12:38.670

[Mark Cramer](https://stackoverflow.com/users/852795/mark-cramer)[在评论中](https://stackoverflow.com/questions/12120905/how-to-reach-some-commands-on-github-for-windows/15888066?noredirect=1#comment38816949_15888066)补充说（2014 年 7 月）：

> 在 GitHub for Windows 2.0 中，下拉菜单略有变化。
> 选择您希望使用的存储库（在左侧），然后从**`Open in Git Shell`**下拉菜单中选择“”，您将看到一个窗口，您可以在其中输入命令行命令。

* * *

原始答案（2013 年 4 月）：

实际上，如果您使用的是 Windows 版 GitHub，则不需要下载单独的 msysgit：它确实在 GitHub for Windows 中附带了自己的 msysgit 安装（一个 Portable_Git，[正如我在此处提到的](https://stackoverflow.com/a/13290969/6309)）。

您可以简单地启动一个命令提示符（Powershell）会话，它将使用来自内部嵌套“PortableGit”的 git.exe：

![GitHub for Windows 的逗号提示符](../Images/cd8f7679fd71c1ea39a3518e1cc39d9a.png)

在那里，你可以输入任何你想要的 git 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:04:04.607

只需下载[http://code.google.com/p/msysgit/downloads](http://code.google.com/p/msysgit/downloads)并安装它，您的命令行中就会包含所有 git 命令。

# javascript - 从另一个文件访问函数的返回值

> ID：12120906
> 
> 赞同：1
> 
> 时间：2012-08-25T09:48:01.377
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我有一个 js 文件，其代码如下：

```
function postResponse(url1,param1)
{
var url = intranetUrl + encodeURI(url1);

 var xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.onload = function(e)
    {
        if (this.status == 200)
        {
            genericRes = this.responseText;
            console.log("inside fun:"+genericRes);
            return genericRes;
        }
        alert("!!!"+this.status);
    };

    xhr.send(param1);

} 
```

现在从另一个文件我想访问这个函数，我在这个文件中导入了上面的文件并调用函数为：

```
<script type="text/javascript">

        var resss = postResponse("myURL","ACC|^ALL|^M|^|$");
        alert("genericRes"+genericRes);
        console.log("genericRes>>>"+genericRes);
        console.log("resss>>>"+resss); 

    </script> 
```

但是在这里我得到了未定义的 genericRes 和 resss 值，并且上面的 console.log 首先打印，然后 `console.log("inside fun:"+genericRes);` 在这里打印我得到了正确的输出，但是从调用代码它给了我未定义的。

在java中，我们编写了可以返回String的假设方法：

```
public String myMethod()
{
      str = "MyString";
      return str;
} 
```

并将该方法称为：

```
String str1 = myMethod(); 
```

但是如何在jquery中做到这一点？

任何建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T09:53:15.987

如果您仔细看，您正在定义另一个函数，如下所示：

```
function(e) //<-- this is the another function
{
    if (this.status == 200)
    {
        var genericRes = this.responseText;
        console.log("inside fun:"+genericRes);
        return genericRes; //<-- this only applies to this function
    }
    alert("!!!"+this.status);
}; 
```

所以它会将该值返回给 的调用者`xhr.onload`，也就是浏览器，浏览器不会对返回值做任何事情。

此外，您不能真正从异步操作中返回，您必须使用回调。

所以：

```
function postResponse(url1, param1, callback) { // <-- take a callback parameter
    var url = intranetUrl + encodeURI(url1);
    var xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.onload = function(e) {
        if (this.status == 200) {
            var genericRes = this.responseText;
            callback( genericRes ); // <-- call the callback
        }
    };
    xhr.send(param1);
} 
```

然后在您的代码中：

```
postResponse("myURL", "ACC|^ALL|^M|^|$", function(result) {
    alert(result); //Result is only available here. In this anonymous function defined inline. Yes.
}); 
```

# ruby-on-rails - 使用 Rails 嵌套资源

> ID：12120907
> 
> 赞同：1
> 
> 时间：2012-08-25T09:48:20.817
> 
> 标签：ruby-on-rails

我是 Rails 新手，我开始使用嵌套资源。我一直在阅读这个[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)所以我创建了 2 个模型，一个产品和一个发件人。产品有许多发件人。我的发件人模型是这样的：

```
class Sender < ActiveRecord::Base
  attr_accessible :product_id, :email, :name

  belongs_to :product
end 
```

我的产品是这个

```
class Product < ActiveRecord::Base
  attr_accessible :name, :price

   #Relationships !
   has_many :senders,  dependent: :destroy
end 
```

在我的 routes.rb 中：

```
 resources :products do
     resources :senders
  end 
```

[根据http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)，现在 rake routes 为我提供了所有正确的路线

所以当我输入网址时

```
http://localhost:3000/products/1/senders/new 
```

所以我为我的产品创建了一个新的发件人 id = 1 我得到了这个：

```
 NoMethodError in Senders#new

undefined method `senders_path' for #<#<Class:0x00000003fcf9d8>:0x00000003e6f408> 
```

为什么我会得到这个未定义的方法，因为它应该为我提供该产品发件人的 new.html.erb 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:18:20.283

请注意，如果您这样做了`rake routes`，您将找不到您正在寻找的路线。这是因为您的路线`senders`嵌套在`products`.

因此，如果您想创建一个新的发件人，路径应该类似于`new_product_sender_path(product)`.

因此，要获取特定产品的所有发件人，路径将是`product_senders_path(product)`.

# c# - 当我想删除文件时出错

> ID：12120914
> 
> 赞同：0
> 
> 时间：2012-08-25T09:49:29.280
> 
> 标签：c#, ms-access, process, createfile

我有一个 Web 应用程序，它创建了一个 Access 数据库。当我创建这个数据库时，如果文件存在，我首先必须删除它，然后重新创建它。

```
 if (File.Exists(DataSourcePath + fileName))
                File.Delete(DataSourcePath + fileName);

            string cnnStr = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + DataSourcePath + fileName + "; Jet OLEDB:Engine Type=5";
            var catType = Type.GetTypeFromProgID("ADOX.Catalog");
            object o = Activator.CreateInstance(catType);
            catType.InvokeMember("Create", BindingFlags.InvokeMethod, null, o, new object[] { cnnStr });

            OleDbConnection cnn = new OleDbConnection(cnnStr);
            var cmd = cnn.CreateCommand();

            cnn.Open();
            cmd.CommandText = "CREATE TABLE TblInfoCompany (Name TEXT, Family TEXT)";
            cmd.ExecuteNonQuery();

            cmd.Dispose();
            cnn.Close();
            cnn.Dispose(); 
```

当我重新创建这个文件时，我会得到一个异常。异常说：“该文件在另一个进程中使用。” 请帮助我关闭此过程或找到解决此问题的任何方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:02:02.537

维护正在使用的文件的进程可能是 Web 应用程序本身。由于关闭/打开该 mdf 文件不是由您直接处理，而是由 Jet Engine 处理，因此并不容易。我建议 PInvoke 系统函数[MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)指定：

*   null 作为第二个参数，表示您要删除
*   `MOVEFILE_DELAY_UNTIL_REBOOT`作为 dwFlags，表示该操作将在下次系统重启时完成

我知道这不是最好的，因为服务器不会经常关闭，但可能是删除无法关闭的锁定文件的更简单的解决方案。

# php - PHP preg_replace_callback() 和 create_function() 与 eval() 不起作用

> ID：12120915
> 
> 赞同：2
> 
> 时间：2012-08-25T09:49:29.853
> 
> 标签：php, oop, eval, preg-replace-callback, create-function

我正在尝试在 Internet 上部署我的网站，以便在真实环境中对其进行测试。它是某种文本编辑器，用户可以在其中使用正则表达式和用户定义的回调函数。

我对 preg_replace_callback() 函数有一些问题。我的主机的 PHP 版本早于 5.3，我不能在我的代码中使用匿名函数（我在 localhost 有 PHP 5.4）。所以我必须重写这部分代码（在本地主机上正常工作）

```
$newString = preg_replace_callback(
                    '#' . $this->pattern . '#' . $this->modifiers,
                    function($match)
                    {
                        return eval('return ' . $this->replacement . ';');
                    },
                    $string); 
```

在这一点上，我不是在谈论使用 eval() 的危险——这个问题稍后会得到适当的注意（“禁止”单词列表检查等）。问题是我在下面的尝试

```
$replacement = $this->replacement;
$newString = preg_replace_callback(
    '#' . $this->pattern . '#' . $this->modifiers,
    create_function('$match', '
                     global $replacement;
                     return eval(\'return \' . $replacement . \';\');
                    '),
                    $string); 
```

不起作用，也不会发生错误。我的代码有什么问题？

任何帮助将非常感激。

* * *

新信息。我试过这个

```
 Class A
{
    public function check()
    {
        $string = 'series 3-4';
        $pattern = 'series[ ]*(\d+)[ ]*-[ ]*(\d+)';
        $modifiers = 'um';
        $replacement = '$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"';
        $newString = preg_replace_callback(
                            '#' . $pattern . '#' . $modifiers,
                            create_function('$match', '
                             global $replacement;
                             echo $replacement;
                             return eval(\'return \' . $replacement . \';\');
                            '),
                            $string);
        echo $newString;
    }
}

$a = new A;
$a->check();//get nothing 
```

并发现 create_function() 中的 $replacement 是空的。但是当我在类之外使用相同的 create_function() 时，$replacement 不为空：

```
$string = 'series 3-4';
$pattern = 'series[ ]*(\d+)[ ]*-[ ]*(\d+)';
$modifiers = 'um';
$replacement = '$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"';
$newString = preg_replace_callback(
                '#' . $pattern . '#' . $modifiers,
                create_function('$match', '
                 global $replacement;
                 echo $replacement . "<br/>";
                 return eval(\'return \' . $replacement . \';\');
                '),
                $string);
echo $newString;
//$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"
//series 3 and 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T11:33:31.227

您可以使用方法代替 lambda 函数：

```
Class A
{
    private $replacement;
    public function check()
    {
        $string = 'series 3-4';
        $pattern = 'series[ ]*(\d+)[ ]*-[ ]*(\d+)';
        $this->replacement = '$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"';
        $modifiers = 'um';
        $newString = preg_replace_callback(
                            '#' . $pattern . '#' . $modifiers,
                            array($this, 'replacementCallback'),
                            $string);
        echo $newString;
    }

    private function replacementCallback($match)
    {
        return eval('return ' . $this->replacement . ';');
    }
}

$a = new A;
$a->check(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:43:19.580

这有效，将`$replacement`正确格式化为 PHP 源的字符串值插入到函数的源中：

```
function check()
{
    $string = 'series 3-4';
    $pattern = 'series[ ]*(\d+)[ ]*-[ ]*(\d+)';
    $modifiers = 'um';
    $replacement = '$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"';
    $newString = preg_replace_callback(
                        '#' . $pattern . '#' . $modifiers,
                        create_function('$match', '
                            return eval("return " . '.var_export($replacement,true).' . ";");
                        '),
                        $string);
    echo $newString;
}
check(); // prints "series 3 and 4"
?> 
```

`eval`但是，当您可以直接将其放入函数的源代码中时，为什么还要麻烦输入代码并对其进行 ing：

```
<?
function check()
{
    $string = 'series 3-4';
    $pattern = 'series[ ]*(\d+)[ ]*-[ ]*(\d+)';
    $modifiers = 'um';
    $replacement = '$match[2] == $match[1] + 1 ? "series $match[1] and $match[2]" : "series $match[1]-$match[2]"';
    $newString = preg_replace_callback(
                        '#' . $pattern . '#' . $modifiers,
                        create_function('$match', '
                            return '.$replacement.';
                        '),
                        $string);
    echo $newString;
}
check(); // prints "series 3 and 4"
?> 
```

# c# - 无法按des顺序对gridview进行排序，也不能对另一列进行排序？

> ID：12120917
> 
> 赞同：0
> 
> 时间：2012-08-25T09:49:37.640
> 
> 标签：c#, asp.net, sorting, gridview

我有这个网格视图，它有两个问题。

1.  如果我通过单击一列对其进行排序，然后再次单击，则它不是按 des 顺序排序的。
2.  如果我用 a 排序`col A`然后单击任何其他列，它不会再次排序？

    ```
     <asp:GridView ID="grdReport" runat="server" AutoGenerateColumns="False" DataKeyNames="CustCode"
    ShowFooter="True" EmptyDataText="No record found" PageSize="50"
    CssClass="mGrid" onrowdatabound="grdReport_RowDataBound"
    AllowSorting="True" onsorting="grdReport_Sorting">
    <Columns>
       <asp:TemplateField HeaderText="Select">
            <ItemTemplate>
                <asp:CheckBox ID="chkSelect" runat="server"/>
            </ItemTemplate>
       </asp:TemplateField>

       <asp:TemplateField Visible="false">
       <ItemTemplate>
       <asp:Label ID="lblCustCodes" runat="server" Text='<%# Eval("CustCode") %>' CssClass="grdCustName"></asp:Label>
       </ItemTemplate>
       </asp:TemplateField>

      <asp:TemplateField HeaderText="Customer" SortExpression="Customer">
      <ItemTemplate>
       <asp:HyperLink Target="_blank" Text='<%# Eval("CustomerName") %>' runat="server" ID="hplNavigate">
       </asp:HyperLink>
       </ItemTemplate>
       </asp:TemplateField>
        <asp:BoundField DataField="QTY" HeaderText="Booked Qty" HeaderStyle-HorizontalAlign="Right" ItemStyle-HorizontalAlign="Right"
            SortExpression="QTY">
            <FooterStyle HorizontalAlign="Right" />
            <ItemStyle HorizontalAlign="Right"></ItemStyle>
        </asp:BoundField>
           <asp:BoundField DataField="Volume" HeaderText="Booked Amt" HeaderStyle-HorizontalAlign="Right" ItemStyle-HorizontalAlign="Right"
            SortExpression="Volume">
            <FooterStyle HorizontalAlign="Right" />
            <ItemStyle HorizontalAlign="Right"></ItemStyle>
        </asp:BoundField>
        </asp:BoundField>
         <asp:BoundField DataField="FirstBill" HeaderText="First Bill" HeaderStyle-HorizontalAlign="left" ItemStyle-HorizontalAlign="left"
            SortExpression="FirstBill">
            <FooterStyle HorizontalAlign="Left" />
            <ItemStyle HorizontalAlign="Left"></ItemStyle>
        </asp:BoundField>
    </Columns>
    <FooterStyle BackColor="Aqua" Font-Bold="true" ForeColor="BlueViolet"/> 
    ```

排序背后的代码是

```
 switch (e.SortExpression)
        {
            case "Customer":
                if (e.SortDirection == SortDirection.Ascending)
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<string>("CustomerName")
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                else
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<string>("CustomerName") descending
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();   
                }                    
                break;

            case "QTY":
                if (e.SortDirection == SortDirection.Ascending)
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<int>("Qty")
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                else
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<int>("Qty") descending
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();   
                }                    
                break;

            case "Volume":
                if (e.SortDirection == SortDirection.Ascending)
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<float>("Volume")
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                else
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<float>("Volume") descending
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                break;

         case "FirstBill":
                if (e.SortDirection == SortDirection.Ascending)
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<DateTime>("FirstBill")
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                else
                {
                    var result = from table in Ob.DataTableOther.AsEnumerable()
                                 orderby table.Field<DateTime>("FirstBill") descending
                                 select table;
                    var dv = result.AsDataView();
                    grdReport.DataSource = dv;
                    grdReport.DataBind();
                }
                break;

            default:
                break;
        } 
```

并且行数据绑定事件是

```
 protected void grdReport_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        # region try
        try
        {
            if (e.Row.RowType == DataControlRowType.DataRow && Ob.DatasetMain.Tables[0].Rows.Count != 0)
            {
                if ((Ob.FromDate != null || Ob.FromDate != "") && (Ob.UptoDate != null || Ob.UptoDate != ""))
                {

                    ((HyperLink)e.Row.Cells[2].FindControl("hplNavigate")).NavigateUrl =
                       String.Format("~//Reports/BookingByCustomerReport.aspx?BC={0},{1},{2},{3}", Ob.DatasetMain.Tables[0].Rows[Ob.Counter][0], Ob.FromDate, Ob.UptoDate, radReportFrom.Checked);

                    Ob.Counter++;
                }
                if (hdnFromCustomer.Value == "true")
                {
                    ((CheckBox)e.Row.Cells[0].FindControl("chkSelect")).Checked = true;
                }
            }

            if (e.Row.RowType == DataControlRowType.Footer)
            {
                if (Ob.DatasetOther.Tables[0].Rows.Count != 0)
                {
                    e.Row.Cells[2].Text = "Total";
                    e.Row.Cells[3].Text = Ob.DatasetOther.Tables[0].Rows[Ob.DatasetOther.Tables[0].Rows.Count - 1][2].ToString();
                    e.Row.Cells[4].Text = Ob.DatasetOther.Tables[0].Rows[Ob.DatasetOther.Tables[0].Rows.Count - 1][3].ToString();
                    e.Row.Cells[5].Text = Ob.DatasetOther.Tables[0].Rows[Ob.DatasetOther.Tables[0].Rows.Count - 1][4].ToString();
                    e.Row.Cells[6].Text = Ob.DatasetOther.Tables[0].Rows[Ob.DatasetOther.Tables[0].Rows.Count - 1][5].ToString();
                }
            }
        }
        # endregion
        catch (Exception ex)
        { }
    } 
```

再次列出问题

1.  再次单击时无法按 des 排序
2.  如果我按客户名称进行排序，然后单击`qty`或任何其他我得到`Specified cast is not valid.`的意思，一旦我按任何特定列排序，我就无法通过单击任何其他列进行排序。

谁能帮我解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:13:01.820

您必须允许您的 gridview 对您的 gridview 属性进行排序

```
 AllowSorting="true" 
```

此外，您必须将排序存储在缓存中（视图状态或会话）。使用会话变量存储最新的排序表达式，并且当您下次对网格进行排序时，将网格的排序表达式与存储上次排序表达式的会话变量进行比较。如果列相等，则检查先前排序的方向并按相反方向排序。

例子：

```
DataTable sourceTable = GridAttendence.DataSource as DataTable;
DataView view = new DataView(sourceTable);
string[] sortData = Session["sortExpression"].ToString().Trim().Split(' ');
if (e.SortExpression == sortData[0])
{
    if (sortData[1] == "ASC")
    {
        view.Sort = e.SortExpression + " " + "DESC";
        this.ViewState["sortExpression"] = e.SortExpression + " " + "DESC";
    }
    else
    {
        view.Sort = e.SortExpression + " " + "ASC";
        this.ViewState["sortExpression"] = e.SortExpression + " " + "ASC";
    }
}
else
{
    view.Sort = e.SortExpression + " " + "ASC";
    this.ViewState["sortExpression"] = e.SortExpression + " " + "ASC";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:40:04.283

在网格中，当 AutoGenerateColumns = “false”时，e.SortDirection 将始终为升序。解决方法是您需要在 ViewState 中存储列的最后一个排序顺序（或者存储每列的最后一个排序顺序）

```
 public const string ASCENDING = "Ascending";
    public const string DESCENDING = "Descending"; 
```

定义属性，保留 SortOrder

```
 public string GridSortOrder
    {
        get { return Convert.ToString(ViewState["SortOrderKey"]) == string.Empty ? ASCENDING : "Descending"; }
        set { ViewState["SortOrderKey"] = value; }
    } 
```

在 grdReport_Sorting 事件中，使

```
 if (GridSortOrder == ASCENDING)
        {
            var result = from table in Ob.DataTableOther.AsEnumerable()
                         orderby table.Field<string>("CustomerName")
                         select table;
            var dv = result.AsDataView();
            grdReport.DataSource = dv;
            grdReport.DataBind();

        }
        else
        {
            var result = from table in Ob.DataTableOther.AsEnumerable()
                         orderby table.Field<string>("CustomerName") descending
                         select table;
            var dv = result.AsDataView();
            grdReport.DataSource = dv;
            grdReport.DataBind();   
        }

         /*
         * logic for remaining columns 
         */

        //Change the sortOrder
        ChangeSortOrder(GridSortOrder); 
```

更改排序顺序方法

```
 public void ChangeSortOrder(string currentOrder)
    {
        GridSortOrder = currentOrder == ASCENDING ? DESCENDING : ASCENDING;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:50:37.213

试试这个方法

```
private const string ASCENDING = " ASC";
private const string DESCENDING = " DESC";
static private DataView dvReports;

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        // i am assuming that you are binding the gridview on page_load
        // you can use the same on a button click event too
        dvReports = new DataView(Ob.DataTableOther);
        BindGridView();
    }
}

protected void grdReport_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortExpression = e.SortExpression;

    if (GridViewSortDirection == SortDirection.Ascending)
    {
        GridViewSortDirection = SortDirection.Descending;
        dvProducts.Sort = sortExpression + DESCENDING;
    }
    else
    {
        GridViewSortDirection = SortDirection.Ascending;
        dvProducts.Sort = sortExpression + ASCENDING;
    }
    BindGridView();
}

private void BindGridView()
{
    GridView1.DataSource = dvReports
    GridView1.DataBind();
}

public SortDirection GridViewSortDirection
{
    get
    {
        if (ViewState["sortDirection"] == null)
            ViewState["sortDirection"] = SortDirection.Ascending;

        return (SortDirection)ViewState["sortDirection"];
    }
    set { ViewState["sortDirection"] = value; }
} 
```

我正在为您写这篇文章，因为如果您与 a 绑定，`DataTable`则无需制作它`IEnumerable`并进行自定义排序。这不是必需的，还有更多的代码行。

框架是你的朋友。快乐编码。

# asp.net-mvc-3 - 条件 MVC Razor 上的验证

> ID：12120924
> 
> 赞同：2
> 
> 时间：2012-08-25T09:50:51.473
> 
> 标签：asp.net-mvc-3

我正在研究 MVC 剃须刀。我必须根据条件进行验证。条件如下所述

1.  我们有国家下拉列表，其中包含国家美国和英国。当我从下拉菜单中选择美国时，我不想对城市和 zip 文本框进行任何验证。

    2.当我从下拉列表中选择美国时，我想要验证城市和 zip 文本框。

如何在 mvc razor 上实现这个场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:38:21.350

对于客户端，您必须通过创建自定义验证方法自己进行验证。[你可以在这里](https://stackoverflow.com/questions/241145/jquery-validate-plugin-how-to-create-a-simple-custom-rule)看到一个例子。

在服务器端，我可能会建议您`IModelValidatable`在模型类中实现。[您可以在此博客文章](http://prideparrot.com/blog/archive/2012/4/model_validation_in_asp_net_mvc)中获得有关此的更多信息。我还建议您可以创建一个`Address`包含属性和验证的模型，这样您就不需要在许多模型中重复验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:10:09.427

您可以使用 jQuery 验证来执行此操作。

```
if(...)
    $('#target').rules('add', { ... });
else
    $('#target').rules('remove'); 
```

或者您可以添加自定义方法：

```
jQuery.validator.addMethod(...); 
```

请参阅：[http ://docs.jquery.com/Plugins/Validation/Validator/addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

# php - 使用views.detail.php SugarCRM在detailview中自定义按钮

> ID：12120925
> 
> 赞同：3
> 
> 时间：2012-08-25T09:51:06.670
> 
> 标签：php, sugarcrm

我在我的模块的详细视图中制作了一个自定义按钮“下载列表”，我还在我的模块目录中制作了一个动作“下载列表”。下载列表的 OnClick 我将操作称为

`array('customCode' => '<input class="button" onclick="window.open(\'index.php?module=av_module&action=downloadList&record={$fields.id.value}&&sugar_body_only=true\');" value="Download List">')`

我所有的代码都做得很好。

但问题是我必须使用views.detail.php 来实现相同的功能。为此，我制作了一个自定义views.detail.php 文件并在其中编写了我的所有代码。

现在我不知道如何在单击按钮时调用该函数。谁能帮忙请...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:18:07.467

我们可以像下面的views.detail.php一样将值分配给smarty变量，并且可以在detailveiwdefs中使用smarty变量，如下所示：

```
$this->dv->ss->assign('mail_to_members', '<input type="button" 
onclick="javascript: location.href=\'mailto:?bcc='.$mem_email.'\'" value="Mail to Members"/>'); 
```

通过在 detailviewdefs.php 中使用以下代码

```
 'buttons' => 
    array (
      5 => 
      array (
        'customCode' => '{$mail_to_members}',
      ),
     ), 
```

# .net - 用于选择嵌套对象的 Linq 语法

> ID：12120926
> 
> 赞同：2
> 
> 时间：2012-08-25T09:51:14.507
> 
> 标签：.net, linq

我正在尝试使用它的一些嵌套属性来过滤 IEnumerable。

我已经绞尽脑汁，但找不到这个查询的解决方案。事实上，我不知道这是否可能。

它的结构是这样的

**T**是一个**Deal** 一个**Deal**有一个**Subcategories**的集合（这个集合可能是空的）一个**Subcategory**有一个**SubcategoryId**

我希望能够选择 Deals 是否具有传递给方法的 SubcategoryId = 参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T09:53:41.953

```
public IEnumerable<Deal> FindDeals(IEnumerable<Deal> source, int subCategoryId)
{    
    return source.Where(d => d.Subcategories.Any(s => s.Id == subCategoryId));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T09:53:38.760

听起来您想用来[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)选择*任何子*类别都是您想要的交易：

```
var foo = deals.Where(deal => deal.Subcategories.Any(sc => sc.Id == parameter)); 
```

请注意，如果`deal.Subcategories`是一个*空集合*，这很好- 但如果它是一个空引用，那么它会爆炸，你需要：

```
var foo = deals.Where(deal => deal.Subcategories != null &&
                              deal.Subcategories.Any(sc => sc.Id == parameter)); 
```

...或修复它，使其永远不会`deal.Subcategories` *为*空，这通常会更可取:)

# javascript - 在嵌入式脚本中将样式规则引入文档的最高效方式？

> ID：12120933
> 
> 赞同：1
> 
> 时间：2012-08-25T09:52:00.067
> 
> 标签：javascript, css, performance, dom, stylesheet

我正在创建一个嵌入式第三方 Javascript，它需要在页面上注入一些样式标记。我知道如何向 DOM 添加样式规则（而不是简单地设置单个元素的样式）的最简单方法是：

```
var l = document.createElement('link');
l.rel = 'stylesheet';
l.media = 'screen';
l.href = 'http://server/stylesheet.css';
document.body.appendChild(l); 
```

我知道有一个 document.styleSheets API，但它似乎相当复杂，而且我不确定在我的项目游戏的这一点上是否值得我学习它的性能提升。我要避免的是额外的 HTTP GET 获取`http://server/stylesheet.css`。因此，除非我使 DOM 样式表 API 成为某种凶猛的恶霸，否则有没有其他方法可以避免额外的网络攻击？

只是有什么：

```
var iH = '' +
         '.sel.ect + or {' +
             'property: rule;' +
         '}';
var s = document.createElement('style');
    s.innerHTML = iH;
document.body.appendChild(s); 
```

除了 CSS 的不可维护性之外，还有什么注意事项吗？我想它会给我的 JS 文件增加一些额外的膨胀，以一种有点违背目的的方式，尽管我可以用 Vim 缩小我的 CSS 并使其成为一个长而难以理解的字符串文字而无需连接。

SO对此有什么要说的？还是我应该把它吸起来并学习样式表 API？

# http - Wget 将文档和标题输出到 STDOUT

> ID：12120935
> 
> 赞同：147
> 
> 时间：2012-08-25T09:52:24.440
> 
> 标签：http, wget

我正在尝试通过执行将文档正文及其标题输出到 STDOUT

```
wget -S -O - http://google.com 
```

...但它只显示 HTML 文档。

**更新：**可以使用

```
wget --save-headers --output-document - http://google.com 
```

`wget --version`显示我的版本是`GNU Wget 1.11.4 Red Hat modified`.

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2014-04-08T02:27:51.880

尝试以下，没有额外的标题

```
wget -qO- www.google.com 
```

注意尾随`-`. 这是`-O`cat out 到文件的常规命令参数的一部分，但由于我们不使用`>`to 指向文件，它会输出到 shell。您可以使用`-qO-`或`-qO -`。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-25T12:10:44.523

`wget -S -O - http://google.com`按我的预期工作，*但*需要注意的是：标头被视为调试信息，因此它们被发送到*标准错误*而不是标准输出。如果您将标准输出重定向到文件或其他进程，您将只获得文档内容。

您可以尝试将标准错误重定向到标准输出作为可能的解决方案。例如，在`bash`：

```
$ wget -q -S -O - 2>&1 | grep ... 
```

或者

```
$ wget -q -S -O - 1>wget.txt 2>&1 
```

该`-q`选项会抑制进度条和`wget`输出中其他一些烦人的聊天部分。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-08-25T10:23:40.470

它在这里工作：

```
 $ wget -S -O - http://google.com
HTTP request sent, awaiting response... 
  HTTP/1.1 301 Moved Permanently
  Location: http://www.google.com/
  Content-Type: text/html; charset=UTF-8
  Date: Sat, 25 Aug 2012 10:15:38 GMT
  Expires: Mon, 24 Sep 2012 10:15:38 GMT
  Cache-Control: public, max-age=2592000
  Server: gws
  Content-Length: 219
  X-XSS-Protection: 1; mode=block
  X-Frame-Options: SAMEORIGIN
Location: http://www.google.com/ [following]
--2012-08-25 12:20:29--  http://www.google.com/
Resolving www.google.com (www.google.com)... 173.194.69.99, 173.194.69.104, 173.194.69.106, ...

  ...skipped a few more redirections ...

    [<=>                                                                                                                                     ] 0           --.-K/s              
<!doctype html><html itemscope="itemscope" itemtype="http://schema.org/WebPage"><head><meta itemprop="image" content="/images/google_favicon_128.png"><ti 

... skipped ... 
```

也许你需要更新你的 wget ( `~$ wget --version GNU Wget 1.14 built on linux-gnu.`)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-02-11T12:36:22.097

这对我打印带有标题的响应很有用：

```
wget --server-response http://www.example.com/ 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-11-15T11:53:47.403

这将不起作用：

```
wget -q -S -O - google.com 1>wget.txt 2>&1 
```

由于重定向是从右到左评估的，这会将 html 发送到 wget.txt 并将标头发送到 STDOUT：

```
wget -q -S -O - google.com 2>&1 1>wget.txt 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2021-03-08T22:18:31.280

在不知道您要做什么的情况下，很难给出最佳答案。您可能想改用 curl。 `curl -i yoururlhere`将标题和文件打印到控制台。

# android - 如何使用 adobe flex builder 获取设备 ID、名称或序列号？

> ID：12120936
> 
> 赞同：2
> 
> 时间：2012-08-25T09:52:24.377
> 
> 标签：android, flash, apache-flex, air, device

我需要我的 Android 设备上的唯一编号或唯一 ID，但我找不到任何东西。

我的应用程序在 Android 设备上运行，并且我使用 Adob​​e Flex Builder，并且我想为数据库表存储设备 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:30:21.733

仔细查看 Adob​​e 论坛上此讨论中提供的答案： [http ://forums.adobe.com/thread/803428](http://forums.adobe.com/thread/803428)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:05:05.370

您可以查看以下内容：http: [//mateuszmackowiak.wordpress.com/category/native-dialog/](http://mateuszmackowiak.wordpress.com/category/native-dialog/)

# ruby-on-rails - Rails 中的国际序数

> ID：12120938
> 
> 赞同：4
> 
> 时间：2012-08-25T09:52:41.923
> 
> 标签：ruby-on-rails

我是新来的轨道，

我的网站是用英语和法语两种语言开发的，我使用 i18n 进行翻译。

我想将 i18n 与 ordinalize 一起使用，任何人都可以在这里帮助我。

我浏览了以下链接，但没有成功

[http://murfy.de/read/i18n-ordinalization](http://murfy.de/read/i18n-ordinalization)

[http://info.michael-simons.eu/2009/02/12/localizing-dates-and-time-with-rails-i18n-using-procs/](http://info.michael-simons.eu/2009/02/12/localizing-dates-and-time-with-rails-i18n-using-procs/)

请指导我必须遵循的确切步骤。

谢谢苏尼尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T07:28:52.403

我遇到了同样的问题，我也尝试了您提供的链接。但是，我也无法让他们工作。最后，我想出了一个解决方案：

1）添加一个新的辅助方法`app/helpers/application_helper.rb`

```
def ordinalize_number number
    case I18n.locale
    when :en
        return number.ordinalize
    when :'zh-TW'
        return number
    else
        return number
    end
end 
```

2）更新你的`config/locales/*.yml`（在这种情况下为en.yml）

```
end_quarter: 'End The %{order} Quarter' 
```

3) 在你的默认 i18n 方法中使用辅助方法`html.erb`

```
<%= t('end_quarter', :order => ordinalize_number(3)) %>
# it will show "End The 3rd Quarter" properly 
```

虽然我不确定它是否是最好的解决方案，但它可以在不更改任何环境设置的情况下工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-09T23:40:56.563

自 2018 年 4 月 19 日起，Ordinalization 支持翻译： [https ://github.com/rails/rails/pull/32168/files](https://github.com/rails/rails/pull/32168/files)

# jquery - Rails delete 在 twitter bootstrap 下拉列表中不起作用（2.1.0）

> ID：12120941
> 
> 赞同：7
> 
> 时间：2012-08-25T09:53:20.300
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

我刚刚升级了 gem less-rails-bootstrap 以使用 twitter bootstrap 2.1.0，在我看来，它似乎破坏了这段代码，在 bootstrap 下拉列表中：

```
<%= link_to 'Logout', destroy_admin_user_session_path, :method => :delete %> 
```

服务器似乎认为这是一个 GET 请求而不是一个 DELETE。但是，如果我采用该视图代码并将其立即放在下拉列表之外，那么它工作得很好，并且服务器识别了 DELETE 请求。

如果我这样更改我的 gemfile：

```
gem 'less-rails-bootstrap', '~> 2.0.4' 
```

然后运行“捆绑更新”并重新启动服务器，然后一切都按预期工作。但如果我只是有：

```
gem 'less-rails-bootstrap' 
```

然后运行 ​​'bundle update' 并重新启动服务器，然后服务器认为 DELETE 是一个 GET 请求。

我尝试切换到 gem 'twitter-bootstrap-rails'，并且发生了完全相同的问题。我想我一定做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:25:19.870

是的，这是一个 Twitter Bootstrap 问题。可能会在下一个版本中修复。在这里，试试这个快速修复：

```
$('body')
  .off('click.dropdown touchstart.dropdown.data-api', '.dropdown')
  .on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T00:08:44.200

显然其他人也有同样的问题：[https ://github.com/twitter/bootstrap/issues/4688](https://github.com/twitter/bootstrap/issues/4688)

现在使用 devise 的快速修复似乎是将 devise.rb 更改为包括：

```
config.sign_out_via = :get 
```

# c - 两个字符串文字的连接如何工作？

> ID：12120944
> 
> 赞同：34
> 
> 时间：2012-08-25T09:53:34.613
> 
> 标签：c, string

```
char* a="dsa" "qwe";
printf("%s", a); 
```

输出：`dsaqwe`

我的问题是为什么这件事有效。如果我在两个字符串文字之间给出一个空格或什么都没有，它会连接字符串文字。

这是如何工作的？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-25T09:58:51.310

它由 ISO C 标准定义，相邻的字符串文字组合成一个。

语言有点枯燥（毕竟这是一个标准），但部分`6.4.5 String literals`州`C11`：

> 在翻译阶段 6，由任何相邻字符序列和相同前缀的宽字符串文字标记指定的多字节字符序列连接成单个多字节字符序列。

这也在`5.1.1.2 Translation phases, point 6`同一标准中提到，虽然更简洁一点：

> 相邻的字符串文字标记被连接起来。

这基本上意味着`"abc" "def"`与`"abcdef"`.

它通常对于制作长字符串同时仍然具有良好的格式很有用，例如：

```
const char *myString = "This is a really long "
                       "string and I don't want "
                       "to make my lines in the "
                       "editor too long, because "
                       "I'm basically anal retentive :-)"; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-25T11:01:37.380

并回答您未提出的问题，“这有什么用？”

一方面，您可以将常量放在字符串文字中。你可以写

```
#define FIRST "John"
#define LAST "Doe"

const char* name = FIRST " " LAST;
const char* salutation = "Dear " FIRST ","; 
```

然后，如果您以后需要更改名称，则只需在一处更改即可。
像这样的东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T09:54:55.843

你是在自问自答。

> 如果我在两个字符串文字之间给出一个空格或什么都没有，它会连接字符串文字。

这是 C 语法的特点之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T10:02:56.503

ISO C标准`§5.1.1.2`说：-

> 1.  相邻的字符串文字标记被连接起来。
> 2.  分隔标记的空白字符不再重要。

# java - 无法使用 java 程序编辑 .java 文件

> ID：12120954
> 
> 赞同：1
> 
> 时间：2012-08-25T09:54:38.840
> 
> 标签：java, string, file, replace, edit

我是java初学者。我有一个字符串替换代码，用户在其中指定文件路径、要替换的字符串和要替换的字符串。该代码适用于 .txt 或 .in 文件。但是当我尝试编辑一个我打算为其编写代码的 .java 文件时，它不知何故无法编辑它。有人可以建议问题出在哪里吗？我的代码如下：

```
import java.io.*;
import java.util.*;
public class StringReplace{
    public static void main(String[] args) throws IOException
    {
        System.out.println("Enter path of file:");
        Scanner sc=new Scanner(System.in);
        String path=sc.nextLine();
        File f=new File(path);
        if (f.canRead())
        {
            System.out.print("Now enter the string to replace:_");
            String oldString=sc.nextLine();
            System.out.print("Now enter the string to replace with:_");
            String newString=sc.nextLine();
            StringBuffer sb=new StringBuffer();
            sc=new Scanner(f);
            sc.useDelimiter("");
            while(sc.hasNext())
            {
                sb.append(sc.next());
            }
            sc.close();
            FileWriter fw=new FileWriter(path);
            PrintWriter pw=new PrintWriter(fw,true);
            System.out.println(sb);
            pw.println(sb.toString().replaceAll(oldString, newString));
            fw.close();
            pw.close();
            System.out.print("DONE!");
        }
        else
            System.out.println("File Does Not Exist");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:11:17.993

正如评论所述，“.java”文件和任何其他文本文件之间应该没有区别。

我怀疑问题在于您没有意识到您的编辑器应用程序实际上被编码为执行**正则表达式**搜索/替换，而不是简单的字符串搜索/替换。（这就是`String.replaceAll(...)`……）如果无意中提供了一个包含正则表达式元字符的“要替换的字符串”，您可能会发现它不匹配，或者它在您不期望的地方匹配。

# javascript - JavaScript 中的函数重载

> ID：12120962
> 
> 赞同：1
> 
> 时间：2012-08-25T09:55:30.853
> 
> 标签：javascript, jquery, overloading

我已经使用 jQuery 一年了，但我仍然不明白这段代码是如何工作的：

```
alert($('#elementID').val()); // It gets the value of element

$('#elementID').val('setting Value'); // the same function is setting value 
```

jquery的其他一些功能也做同样的事情`.html()`

我想知道这个东西是怎么实现的？他们如何重载javascript函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T10:02:17.750

javascript 中没有重载，所以像这样的功能是使用可选参数执行的。JavaScript 允许您在不指定参数的情况下调用函数。例如：

```
function val(text)
{
  if (arguments != null && arguments.length > 0) {
    alert("i'm setting value here to " + text);
  } else {
    alert("i'm getting value here");
  }
}

val(); // alerts value getter
val('hi!'); // alerts value setter and the message 
```

编写此示例是为了指出[您在每个函数中获得的参数集合](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。每个函数都可以将它的参数作为一个集合来获取，并可以相应地执行它的逻辑。但是，显示的示例在现实世界中会以不同的方式编写：

```
function val(text)
{
  if (typeof text === "string") {
    alert("i'm setting value here to " + text);
  } else {
    alert("i'm getting value here");
  }
} 
```

您没有传递给函数的每个参数都会获得`undefined`（不是`null`）的“值”。这使您可以使用最短的逻辑表达式。`if`您可以在语句中使用任何值。`null`被或`undefined`将被简单地评估为的变量`false`。

正如下面的评论所指出的，如果`text`参数为空字符串`if (text)`将返回 false。因此，对于文本参数，请按类型检查参数。

[阅读有关`null`和`undefined`差异](https://stackoverflow.com/a/6031611/187955)对您也很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T09:59:28.310

只需检查函数是否使用参数调用即可完成

```
function stuff(moreStuff){
   if(typeof moreStuff === "undefined"){
      return originalStuff;
   }else{
      setStuff(moreStuff);
   }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T10:00:37.223

很简单，只要检查变量是否有值：

```
function foo(param) {
    // Method 1
    if (param != null) {
        // Parameter is defined
    } else {
        // No parameter (or null given)
    }

    // Method 2
    if (arguments.length > 0) {
        // At least one argument has been defined
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T10:00:11.747

```
function foo(value)
{
     if(typeof value != 'undefined')
     {
         // calling foo(2332)
     }
     else
     {
         // foo()
     }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T10:06:58.890

正如几乎所有其他人提到的那样，他们没有重载参数，但在第一条语句中，没有为函数提供参数。但是，在第二个中，已经提供了一个论点。因此，一个简单的检查`typeof something == "undefined"`可以很容易地修改和区分不同的结果。

这是组成`.val()`函数的相关 jQuery 代码（版本 1.8.0）：

```
val: function( value ) {
        var hooks, ret, isFunction,
            elem = this[0];

        if ( !arguments.length ) {
            if ( elem ) {
                hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

                if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
                    return ret;
                }

                ret = elem.value;

                return typeof ret === "string" ?
                    // handle most common string cases
                    ret.replace(rreturn, "") :
                    // handle cases where value is null/undef or number
                    ret == null ? "" : ret;
            }

            return;
        }

        isFunction = jQuery.isFunction( value );

        return this.each(function( i ) {
            var val,
                self = jQuery(this);

            if ( this.nodeType !== 1 ) {
                return;
            }

            if ( isFunction ) {
                val = value.call( this, i, self.val() );
            } else {
                val = value;
            }

            // Treat null/undefined as ""; convert numbers to string
            if ( val == null ) {
                val = "";
            } else if ( typeof val === "number" ) {
                val += "";
            } else if ( jQuery.isArray( val ) ) {
                val = jQuery.map(val, function ( value ) {
                    return value == null ? "" : value + "";
                });
            }

            hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

            // If set returns undefined, fall back to normal setting
            if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
                this.value = val;
            }
        });
    } 
```

# eclipse - 打开文件中的 Eclipse IDE 搜索（由 Ctrl-F 触发）触发侵入式弹出窗口

> ID：12120966
> 
> 赞同：1
> 
> 时间：2012-08-25T09:55:58.103
> 
> 标签：eclipse, eclipse-rcp

在打开文件中搜索功能（由 Ctrl-F 触发）会触发一个侵入式弹出窗口，如下所示；

![在此处输入图像描述](../Images/ce1507b481dcffaa9f37d25d5a37b281.png)

但是我一直在使用 Aptana studio，我认为这种 UI 样式使对话框与编辑器框架齐平；

![在此处输入图像描述](../Images/9e00c9d6c5c31e16f2099b378c1041c4.png)

这似乎更好一些。

是否有一些可以通过配置本机获得的东西，还是需要对新插件进行一些自定义黑客攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:44:41.990

虽然我只是想推荐`Ctrl`- `J`（增量搜索，没有任何 GUI）问题[如何在 Eclipse 中启用“实时搜索”？](https://stackoverflow.com/questions/7710725/how-to-enable-live-search-in-eclipse)为您提供更多选择，[Eclipse Glance](http://code.google.com/p/eclipse-glance/)最符合您的要求。

# scala - 无法运行喷雾示例

> ID：12120969
> 
> 赞同：2
> 
> 时间：2012-08-25T09:56:08.513
> 
> 标签：scala, sbt, spray

我正在使用 Spray 开始一个项目，并尝试关注他们的 wiki 以运行他们的示例应用程序（以在它们上启动我的项目）。但是，我不能让它们工作，自从编写本文档以来，spray 的 sbt 配置似乎发生了很大变化。

当我像这样被拒绝时，这些[说明](https://github.com/spray/spray/wiki/Example-Projects)对我不起作用：`sbt "project spray-example-simple" shell`

```
~/.../spray/project # sbt "project spray-can-examples" shell

[info] Set current project to default-951202 (in build file:/home/jolivier/projects/external/spray/project/)
[error] Not a valid project ID: spray-can-examples
[error] project spray-can-examples
[error]                           ^ 
```

虽然`Build.scala`（在同一个文件夹中）包含一个具有此名称的项目：

```
 lazy val examples = Project("examples", file("examples"))
    .aggregate(sprayCanExamples, sprayClientExamples, sprayIoExamples, sprayServerExamples)
    .settings(exampleSettings: _*)

  lazy val sprayCanExamples = Project("spray-can-examples", file("examples/spray-can"))
    .aggregate(simpleHttpClient, simpleHttpServer)
    .settings(exampleSettings: _*) 
```

所以我对为什么我被 sbt 拒绝感到很不安。我尝试`sbt project`在其他几个文件夹上运行该命令，`examples`但遇到了同样的错误。我错过了什么？我对此感到非常不安`Set current project to default-951202`，这对我来说看起来不太好，但我不知道如何解决。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:31:32.683

你应该从克隆的 repo 运行 sbt。根：

```
spray> sbt11 "project spray-can-examples" shell 
```

`spray`是我克隆 repo 的文件夹。这里 sbt11 调用`sbt-launch-0.11.2.jar`.

它工作得很好。

# objective-c - didConnectToHost 没有被调用

> ID：12120970
> 
> 赞同：2
> 
> 时间：2012-08-25T09:56:12.180
> 
> 标签：objective-c, ios, cocoa, gcdasyncsocket

我已经使用`GCDAsyncSocket`和导入 了一个名为“NetClass”的类的客户端`CGDAsyncSocket.h`。比我`LoginViewController`调用我的网络类函数来连接到服务器。

在服务器端，我看到客户端已连接，但在客户端`didConnectToHost`没有被调用。

我的`NetClass`电话`LoginViewController`：

```
NetClass *nc = [[NetClass alloc] init];
    [nc ReceiveData:ip login:login password:md5 ]; 
```

我的`NetClass`功能：

```
- (BOOL)ReceiveData:(NSString *)ip login:(NSString*)login password:(NSString*)password
{
    dispatch_queue_t mainQueue = dispatch_get_main_queue();
    asyncSocket = [[GCDAsyncSocket alloc]initWithDelegate:self delegateQueue:mainQueue];

    NSError *error = nil;
    uint16_t port = 2012;
    if (![asyncSocket connectToHost:ip onPort:port error:&error])
    {
        NSLog(@"Error connecting: %@", error);
        return NO;
    }
    else
    {
        NSLog(@"%@",asyncSocket.connectedHost);
        NSData *data = [[NSString stringWithFormat:@"<MOBIL><refreshall>TRUE</refreshall><user>%@</user><password>%@</password>",@"tst",@"tsts"] dataUsingEncoding:NSASCIIStringEncoding];
        NSData *enddata = [[NSString stringWithFormat:@"</ddodata"] dataUsingEncoding:NSASCIIStringEncoding];
        [asyncSocket writeData:data withTimeout:-1 tag:1];
        [asyncSocket readDataToData:enddata  withTimeout:-1 maxLength:-1 tag:1];
        [asyncSocket disconnect];
        return YES;
    }

}
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"%@ %@",@"CONNECTED TO HOST",host);
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{
    NSLog(@"socketDidDiscoffffnnect:%p withError: %@", sock, err);
} 
```

但同时函数 socketDidDisconnect 被调用

NSLog 输出：

```
 2012-08-25 14:16:46.312 TacticalView[34981:f803] (null)
2012-08-25 14:16:46.313 TacticalView[34981:f803] socketDidDiscoffffnnect:0x88024d0 withError: (null) 
```

我看到当像这样更改 ReceiveData 时 asyncSocket 没有连接：

```
 if (![asyncSocket connectToHost:ip onPort:port error:&error])
    {
        NSLog(@"Error connecting: %@", error);
        return NO;
    }
    else
    {
        if ([asyncSocket isConnected])
        {

        NSData *data = [[NSString stringWithFormat:@"<MOBIL><refreshall>TRUE</refreshall><user>%@</user><password>%@</password>",@"tst",@"tsts"] dataUsingEncoding:NSASCIIStringEncoding];

        NSData *enddata = [[NSString stringWithFormat:@"</ddodata"] dataUsingEncoding:NSASCIIStringEncoding];

        [asyncSocket writeData:data withTimeout:-1 tag:1];
        [asyncSocket readDataToData:enddata  withTimeout:-1 maxLength:-1 tag:1];
        [asyncSocket disconnect];
        }
        return YES;
    } 
```

如果我在我的 LoginViewController 中创建套接字，didConnectToHost 方法正在完美调用/出了什么问题&为什么我不能在我的 NetClass 中使用这个方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:16:13.473

众所周知，GCDAsyncSocket 不调用 didConnectToHost: 方法。我建议改用 AsyncSocket 或自己调用委托方法。

# joomla - 如何将当前用户 ID 添加到 joomla 中的菜单链接

> ID：12120972
> 
> 赞同：0
> 
> 时间：2012-08-25T09:56:16.787
> 
> 标签：joomla, menu, hyperlink

我想将用户 ID 作为带有菜单链接的过滤器传递，以从属于该用户的数据库对象列表中选择项目。如何将当前用户 ID 添加到菜单链接。我认为 xml 文件参数是静态的。他们不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:40:43.860

您不需要将用户 ID 添加到菜单链接（从安全角度考虑，这可能是一个非常糟糕的主意）。您可以在 Joomla! 的任何地方检索当前用户的用户 ID。

例如（*您尚未指定您的 Joomla！版本，但对于 2.5，您可以通过这种方式获得*）

```
$user = JFactory::getUser();
$userId = $user->get('id'); 
```

# html - 在没有 CSS3 的情况下有条件地显示带有 Div 元素的 Span 元素

> ID：12120973
> 
> 赞同：2
> 
> 时间：2012-08-25T09:56:20.407
> 
> 标签：html, css

我有如下所示的标记：

```
<span>First Name</span>
<span>Last Name</span>
<div>User Address</div>
<div>User Mobile Number</div>
<span>Edit Link</span> 
```

在页面上呈现标记时，我希望最后一个跨度（“编辑链接”）与前一个元素内联显示。“用户手机号码” div 是可选的，它可能存在也可能不存在，具体取决于用户的选择。简而言之：

1）当`<div>User Mobile number</div>`存在时，“编辑链接”应该与它内联。
2）当`<div>User Mobile number</div>`不存在时，“编辑链接”应该与`<div>User Address</div>`.

预期输出：

案例 1：
约翰米勒
街 JJ 街
+1-56565656 | 编辑链接

案例 2：
John Miller
St. JJ 街 | 编辑链接

**请让我知道如何仅使用 CSS 来实现**。任何帮助将不胜感激
**我不允许使用*CSS3*，因为较低版本的 IE 不支持它**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:00:34.423

**更新答案：**

正如您所说，`div` `User Mobile No`在这种情况下您可能会或可能不会出现，我们可以利用`CSS3 :nth-child`将倒数第二个`div's` `display`属性设置为`display:inline-block;`.The`span` `Edit Link`是最后一个元素，因此倒数第二个元素的`display`属性应该是`display:inline-block`确保`span`出现在它旁边。

我对你做了一个小改动，`HTML`我只是将你的元素包裹在一个`div` `container`

**HTML：**

```
<div id="container">
<span>First Name</span>
<span>Last Name</span>
<br/>

<div>User Address</div>
<div>User Mobile No</div>
<span>Edit Link</span>    
</div> 
```

我还添加了一个`<br/>`标签，`span` `Last Name`否则布局会再次混乱。

**CSS：**

```
div#container div:nth-last-child(2)
{
display:inline-block;
} 
```

这将选择倒数第二个元素并对其应用样式。

**[请参阅工作演示。](http://jsfiddle.net/MDNV9/1/)**

我希望它对你有帮助。

# php - 如何在 CI (codeigniter) 中添加另一个控制器文件

> ID：12120975
> 
> 赞同：1
> 
> 时间：2012-08-25T09:57:06.547
> 
> 标签：php, codeigniter

标题似乎很愚蠢。但我遇到了问题，现在我可以输入[http://ci.tao2tw.com](http://ci.tao2tw.com)，然后路由到我的 index.php/entry 函数但是当我输入[http://ci.tao2tw.com/order](http://ci.tao2tw.com/order)时，我想要路由到另一个控制器 order.php ，但是它不起作用！我的设置有什么问题吗？

现在，我无法在 [http://ci.tao2tw.com/order/test](http://ci.tao2tw.com/order/test)的订单控制器下运行测试功能。**相反，我应该输入htpp** ://ci.tao2tw.com/index.php /order/test 我不知道？？

先谢谢大家了~ ![在此处输入图像描述](../Images/a377187b7bc54318b0ab675a5a0c7378.png) ![在此处输入图像描述](../Images/53f90ca9483158bb513550b84a4298ca.png) ![](../Images/26064fcc5927a5eab1279a6ca6a02bd7.png)

在 routes.php 中

```
$route['default_controller'] = "index/entry";
$route['order'] = "order"; 
$route['404_override'] = ''; 
```

在 config.php 中

```
$config['base_url'] = 'http://ci.tao2tw.com/';
$config['index_page'] = ''; 
```

在控制器/index.php 中（它工作正常）

```
class Index extends CI_Controller {

    public function __construct() // to remember use public
    {
        parent::__construct(); 
        $this->load->helper('url');
        //anchor(); 
    }
    public function entry() //just show index
    {
        $this->load->view('index_view',$data);      

    }

} 
```

在控制器/order.php 中（没有工作）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Order extends CI_Controller {

    public function __construct() // to remember use public
    {
        parent::__construct(); 
        $this->load->helper('url');

    }
    public function fill($action) // 顯示填寫表單
    {
        echo "test";
    }
   //http://codeigniter.com/user_guide/libraries/uri.html
    public function order($action)
    {
        echo $action;
    }
}

?> 
```

.htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|flash|images|img|includes|js|language|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L]
~ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T10:43:28.960

必须在您的*index.php*文件之后在 CI 中调用每个控制器。

因此，如果您不使用 .htaccess 文件，您到订单控制器的链接如下：

```
http://ci.tao2tw.com/index.php/order/ 
```

.htaccess 允许跳过 index.php 文件

```
 RewriteRule ^(.*)$ index.php/$1 [L] 
```

您可以使用以下命令调用您的控制器：

```
http://ci.tao2tw.com/order 
```

然后，如果你想在你的订单控制器中调用一个方法，你的 url 是：

*   没有 .htaccess

    [http://ci.tao2tw.com/index.php/order/fill](http://ci.tao2tw.com/index.php/order/fill)

*   使用 .htaccess

    [http://ci.tao2tw.com/order/fill](http://ci.tao2tw.com/order/fill)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:26:48.047

对不起，各位。我发现解决方案太愚蠢了。我使用 apache 2 并拥有一个虚拟主机，路径为：“/etc/apache2/sites-enabled/ci.tao2tw.com”

我必须改变`AllowOverride None` `to AllowOverride All`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:00:21.447

是的，你需要像这样路由它：

```
$route['order'] = "order/order"; 
```

原因是在您将 url 路由到模型的方法之前，它无法知道您要执行什么功能

现在，它将调用您的 Order 模块的 order() 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:49:22.007

我认为您的 .htaccess 文件有问题。您的应用程序是否位于子文件夹中？

```
RewriteEngine on
RewriteBase /path/to/app  [add this if your application is under a sub folder]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

<IfModule mod_php5.c>
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_php5.c>
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

# java - 大小未知时的java 2d数组

> ID：12120986
> 
> 赞同：1
> 
> 时间：2012-08-25T09:58:32.637
> 
> 标签：java, arrays, arraylist

我需要创建和排序对象数组，问题是对象不能自己排序。相反，它们是根据整数值排序的。所以我想到了使用二维数组。

```
 Object[][] array = new Object[][] 
```

这样我就可以在数组中存储

```
 [integer to order the objects][object] 
```

但问题是我不知道需要订购多少个对象，那么，我是否需要使用 Arraylist 来代替？

无论哪种方式，是否可以使用 collection.sort 命令，我怎样才能让数组按照描述的方式运行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:01:47.003

您需要忘记原始数组并开始考虑 Java 集合框架。

对于排序，请使用`TreeMap<Integer, Object>`. 放入所有对象后，您`put`可以使用`values()`以正确顺序获取对象。

使用地图，您还消除了所有确定尺寸的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:01:55.907

使用`ArrayList`with`Comparator interface`来订购它们。

此外， **TreeMap 是一个排序映射**，它将根据整数值对您的对象进行排序，因为您将它们作为值的键。

```
TreeMap<Integer, Object>

Integer - Key

Object  - Value 
```

你**不需要**像你需要对数组做的那样初始化集合......所以这就是另一个问题了......

# javascript - 如何使用 Dojo 从 Google 地图事件中引用包含类？

> ID：12120991
> 
> 赞同：0
> 
> 时间：2012-08-25T09:59:01.397
> 
> 标签：javascript, google-maps-api-3, dojo, closures, dom-events

我正在做一些工作，将使用 Google Maps API v2 的旧项目转换为 v3。

有一个 Dojo 类，如下所示：

```
dojo.declare
(
    "MyNamespace.MapControl",
    null,
    {
        constructor: function() {
            var mapElement = document.getElementById("map");
            this._map = new google.maps.Map(mapElement, {});
            google.maps.event.addListenerOnce(this._map, "idle", this.map_load);
        },

        map_load: function() {
            this.onLoad();
        },

        onLoad: function () { }
    }
); 
```

问题是，当调用 map_load 函数时，它的上下文*是*Google Map 而不是类。

我尝试在类中创建一个局部变量*self*并使用

```
_self = this; 
```

在构造函数内部，但变量没有 onLoad 函数。这是使用它的代码：

```
dojo.declare
(
    "MyNamespace.MapControl",
    null,
    {
        _self: null,      

        constructor: function() {
            var mapElement = document.getElementById("map");
            this._map = new google.maps.Map(mapElement, {});
            google.maps.event.addListenerOnce(this._map, "idle", this.map_load);

            _self = this;
        },

        map_load: function() {
            _self.onLoad(); // fails as onLoad is undefined
        },

        onLoad: function () { }
    }
); 
```

Dojo 中是否有一种方法可以在 *map_load* 函数中获取对父类的引用，或者是否有另一种连接方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:38:39.680

使用`dojo.hitch(/*Object*/ scope, /*Function|String*/ method)`：

```
google.maps.event.addListenerOnce(this._map, "idle", dojo.hitch(this, "map_load")); 
```

有关更多信息，请参阅[http://livedocs.dojotoolkit.org/dojo/_base/lang#hitch](http://livedocs.dojotoolkit.org/dojo/_base/lang#hitch)

# c - 在模块/驱动程序中打开内核驱动程序

> ID：12120992
> 
> 赞同：0
> 
> 时间：2012-08-25T09:59:19.500
> 
> 标签：c, linux, linux-kernel, kernel

嗨，我编写了一个将数据传递给`/dev/ttyS0`..的用户应用程序。我使用 php 将数据发送到用户应用程序，然后在用户应用程序中有一个 if else 然后将新数据传递给`/dev/ttyS0`..

例如

```
PHP -> user app - > driver(/dev/ttyS0); 
```

php 将“向上”传递给用户应用程序，然后是用户应用程序，然后它执行 if else 进行字符串比较，当它为真时将新数据（例如 0xff）传递给驱动程序（dev/ttyS0）；

我还写了我的第一个 char 驱动程序，它可以读写。这是我关注的网站`http://lwn.net/Kernel/LDD3/`

现在的问题是.. 是否可以在驱动程序中打开驱动程序？.. 我知道这样做是非常非常错误的.. 但我想制作自己的驱动程序，在内部进行 if else 比较，所以不需要用户应用程序，因此传递数据就像这样：

```
PHP - > mydriver(which translates the data like my user app does).. 
```

这是我的用户应用程序代码示例..

```
int main(int argc,char *argv[])   

{

unsigned char pCom[2][7]={{0xFF,0x01,0x00,0x08,0x00,0x3F,0x48},   
                            {0xFF,0x01,0x00,0x10,0x00,0x3F,0x50}};   

int fd;        
int p;       
    fd=open("/dev/ttyS0",O_RDWR | O_NOCTTY | O_NDELAY);

    if(fd<0) exit(1); 
    set_port(fd);

    if(strcmp(argv[1], "go up")==0){

        for(p=0; p<8; p++){
        write(fd,pCom[0],8);
        } 
```

我怎样才能修改我的代码，以便我可以放入我的字符驱动程序？...例如。修改`ssize_t (*read)`or `ssize_t (*write)`? 或者我可以直接在里面写这个`module_init();` 你能告诉我我怎么做的样本吗？..

先感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:30:41.697

不要那样做。正如您自己指出的那样，这不是应该的方式，我也看不到真正的好处：

**好处：**

1.  无需安装用户模式应用程序。

**缺点：**

1.  需要安装内核模式驱动程序。
2.  更新内核时需要更新驱动程序。
3.  如果驱动程序代码有错误，整个系统就会崩溃。

另一方面，您可能想要创建例如fifo 或tcp 套接字，以便PHP 应用程序可以轻松地与您的用户应用程序通信。其他选择是直接在 PHP 中编写 if-else-code 或作为可以从 PHP 调用的库。

# node.js - 缺少 javascript 文件，dotcloud 上的 expressJS“无法加载资源”。路由问题？

> ID：12120994
> 
> 赞同：0
> 
> 时间：2012-08-25T09:59:22.840
> 
> 标签：node.js, routing, express, dotcloud

我在 dotcloud 上部署了一个 express 应用程序，但在这里出现错误：http: [//valgomat-nilsnh.dotcloud.com/valgomat](http://valgomat-nilsnh.dotcloud.com/valgomat)。*除了*questiondata.js之外，我在 html 中包含的所有其他 javascript 文件似乎都已加载。

在铬控制台中，它说，

> 获取[http://valgomat-nilsnh.dotcloud.com/javascripts/questiondata.js](http://valgomat-nilsnh.dotcloud.com/javascripts/questiondata.js) 404（未找到）

这里可能有什么问题？是的，我尝试检查并重新检查我的所有路径等。当我在本地运行该文件时，该文件会被包含在内，但上传时我会丢失该文件。

在查看了其他一些相关的问题之后，我怀疑快递的路由可能有问题？不过，其他资源似乎加载得很好。

从日志中：

> $ dotcloud 日志 valgomat.www
> 
> # tail -F /var/log/supervisor/*.log
> 
> ==> /var/log/supervisor/node-stderr---supervisor-rGnBOT.log <== buf.push(''); __jade.shift(); __jade.shift();
> __jade.shift(); buf.push(''); __jade.shift(); __jade.shift(); buf.push(''); __jade.shift(); __jade.shift();
> 
> ==> /var/log/supervisor/node-stdout---supervisor-MkuIsc.log <== GET /stylesheets/bootstrap/css/bootstrap.min.css 304 3ms GET /stylesheets/style.css 304 3ms GET / images/logo-uib-small.gif 200 2ms - 4.49kb GET /valgomat 304 19ms GET /stylesheets/bootstrap/css/bootstrap.min.css 304 4ms GET /stylesheets/style.css 304 2ms GET /javascripts/jquery-1.8 .0.min.js 304 1ms 调试：提供静态内容 /socket.io.js GET /javascripts/coffee-script.js 304 1ms GET /javascripts/questiondata.js 404 2ms
> 
> ==> /var/log/supervisor/supervisord.log <== 2012-08-25 09:39:23,281 WARN 解析期间包含额外文件“/home/dotcloud/current/supervisord.conf” 2012-08-25 09 :39:23,373 INFO RPC 接口“主管”已初始化 2012-08-25 09:39:23,373 WARN cElementTree 未安装，对 XML-RPC 使用较慢的 XML 解析器 2012-08-25 09:39:23,373 CRIT 服务器“unix_http_server”正在运行没有任何 HTTP 身份验证检查 2012-08-25 09:39:23,378 INFO 守护进程 2012-08-25 09:39:23,379 INFO supervisord 以 pid 140 开始 2012-08-25 09:39:24,388 INFO 产生：' node' pid 147 2012-08-25 09:39:26,148 INFO 成功：节点进入 RUNNING 状态，进程保持超过 1 秒（startsecs）

希望有人可以提供帮助。

干杯，尼尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:25:39.203

“当我推送到 dotCloud 时随机文件丢失”通常与“我正在从 git 或 hg 存储库编码，我忘记添加/提交所述随机文件”押韵。

第一件事：检查推送到 dotCloud 时使用的上传器。在`dotcloud push`输出的最开始，您会看到类似`# hg`、`# git`或的内容`#rsync`。如果您看到 hg 或 git，那么请仔细检查`questiondata.js`您的存储库中是否确实存在。如果不是，你可以添加它，或者，或者，如果你不想每次都创建一个提交，你想每次向 dotCloud 推送一点差异，你可以`--all`在命令中添加标志`dotcloud push`：它将强制使用`rsync`上传者。

# handlers - G-Wan 和默认的 hello 处理程序？

> ID：12120996
> 
> 赞同：1
> 
> 时间：2012-08-25T09:59:30.890
> 
> 标签：handlers, g-wan

我正在尝试 g-wan 附带的处理程序，但我似乎无法找到有关此主题的任何好的文档。

我已将 main_hello.c__ 重命名为 main_hello.c 并重新启动了 g-wan。

但是我如何查看处理程序的结果？

好像什么都没有触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:19:39.840

> 我将 main_hello.c__ 重命名为 main_hello.c

处理程序名称遵循您应该使用的约定。阅读 G-WAN PDF 手册和[开发人员网站页面](http://gwan.com/developers#handler)，其中介绍了不同类型的处理程序以及如何使用它们。

简而言之，`Connection handlers`是按主机定义的，并且必须命名为`main.c`.

并且`Content-type handlers`是按 MIME 类型（HTML、GIF、FLV 等）定义的，并且必须命名为`html.c`、`gif.c`、`flv.c`等。

一个名为的处理程序`main_hello.c`将被忽略，因为它没有定义的用途。

> 我如何查看处理程序的结果？

在一些 G-WAN 处理程序示例的源代码中，您将看到在开发期间执行处理程序状态时让您知道的注释`printf()`或调用。`puts()`

由于*“处理程序的结果”*取决于处理程序所做的事情，因此除非它与服务器的行为（过滤、日志记录、重写等）有可见的交互，否则无法查看它所做的事情。

# math - gluLookAt 实现 - zAxis 方向

> ID：12120998
> 
> 赞同：0
> 
> 时间：2012-08-25T09:59:50.810
> 
> 标签：math, opengl, linear-algebra

在 gluLookAt 函数`zAxis = target - cameraPosition`中，然后在我们放置的视图矩阵中，`-zAxis`或者我们可以编写它`zAxis = cameraPosition - target`，然后在我们放置的视图矩阵`zAxis`中得到相同的结果。为什么我们必须在第一种情况下否定 zAxis 或在第二种情况下更改操作顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:35:39.250

在 OpenGL 中，标准相机空间是右手坐标系。+X 向右，+Y 向上。因为它是右撇子，+Z位于观察者的*后面。*因此，观看者是沿着*-Z 轴*看的。因此否定。