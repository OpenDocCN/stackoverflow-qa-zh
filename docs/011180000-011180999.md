# StackOverflow 问答 11180000-11180999

# facebook - Facebook API 是否允许 3rd 方墙贴？

> ID：11180003
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:15:31.177
> 
> 标签：facebook, facebook-graph-api

Facebook API 是否允许第三方应用或服务代表用户发布墙贴？

例如，我有一个游戏应用程序，它要求用户提前写 10 个墙帖，然后授予游戏应用程序在一周内代表用户发布这些消息的“权利”。

如果是，是否可以将相同的功能扩展到私人消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:32:16.787

Facebook 允许代表用户通过应用程序发布墙帖——但[平台政策](https://developers.facebook.com/policy/) **不允许**，实际上是**禁止**的，是你想要做的：

> 您不得激励用户使用 [...] Facebook 社交渠道，或暗示激励与使用我们的渠道直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:25:00.723

是的，使用 facebook API 几乎一切皆有可能。您可能最好查看 API 本身以获取更多信息，但它非常简单。使用 android 您创建一个 facebook 对象，这允许您执行身份验证，之后根据您要求的访问权限，您可以从您的应用程序向 facebook 发送 POST 请求，这会在别人的墙上创建消息/墙帖/帖子/ 在许多其他事物中列出您的朋友。

# python - 使用 alembic 自动生成迁移

> ID：11180013
> 
> 赞同：5
> 
> 时间：2012-06-24T18:16:40.297
> 
> 标签：python, sqlalchemy, database-migration, alembic

在教程中： [http](http://alembic.readthedocs.org/en/latest/tutorial.html) ://alembic.readthedocs.org/en/latest/tutorial.html 我通过以下命令测试了自动生成迁移功能：

```
alembic revision --autogenerate -m "Added account table" 
```

并得到错误：

```
Traceback (most recent call last):
File "/usr/local/bin/alembic", line 9, in <module>
load_entry_point('alembic==0.3.4', 'console_scripts', 'alembic')()
File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/config.py", line 229, in main
 **dict((k, getattr(options, k)) for k in kwarg)
File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/command.py", line 93, in  revision
script.run_env()
File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/script.py", line 188, in run_env
 util.load_python_file(self.dir, 'env.py')
File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/util.py", line 185, in load_python_file
module = imp.load_source(module_id, path, open(path, 'rb'))
File "alembic/env.py", line 20, in <module>
from myapp.mymodel import Base
ImportError: No module named myapp.mymodel 
```

我只是在学习alembic，也从未使用过python。myapp.mymodel 是否已经存在，或者我需要使用 python 创建它。怎么做？非常感谢你！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T16:33:57.143

“myapp.mymodel 是否已经存在，或者我需要使用 python 创建它。怎么做？” -- 如果您这么问，听起来好像您还没有任何需要迁移的东西。

迁移的想法，à la Alembic，是这样的：

1.  首先，您在 python 代码中定义了数据模型，通常是通过使用 sqlalchemy 的“声明性”建模结构的一堆类声明。这发生在一个名为“mymodel.py”的文件中。或者，如果您的应用程序较大，您可能有多个文件，然后将它们全部导入 mymodel.py 以将它们的符号带入一个方便的命名空间。这个 mymodel.py —— 或任何你命名的文件 —— 将位于名为 myapp 的目录中。您可以通过将文件放入其中来向 python 表明“myapp”是一个模块`__init__.py`（可以是空的，也可以在其中包含其他内容...阅读 python 项目和模块结构以获取更多信息，请参阅链接下面的#3）。

2.  稍后，您更改了该文件或文件中的模型定义，这留下了您的实际数据库模式（正如您的数据库引擎所看到的那样，就像您在 GUI 或命令行数据库管理客户端中看到它的方式一样）退后一步。所以现在你需要一个系统来发出必要的命令来修复差异。

3.  这就是 Alembic 的用武之地。它需要查看两件事：您的实际数据库，这就是您为其提供数据库连接字符串的原因，以及您的数据模型定义，它希望在诸如 mymodel.py 之类的 python 文件中找到它或任何你可以给它起的名字。它可以命名为任何以 .py 结尾的名称，并且可以以任何您希望的方式定位，只要您可以让 Alembic 导入它。如果您不清楚这样做的机制，那么您需要学习的只是一个通用的 Python 习语——模块在文件系统中的结构以及如何相应地导入它们。这是一个开始：http: [//docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

If you don't have anything that you already recognize as the python file containing your model declarations, it might be the case that you just need more practice with sqlalchemy before you worry about issues like migration.

# ipad - 将地球的卫星照片转换为球体上的纹理贴图 (OpenGL ES)

> ID：11180015
> 
> 赞同：4
> 
> 时间：2012-06-24T18:16:56.163
> 
> 标签：ipad, 3d, opengl-es-2.0

我们有 5 颗地球静止卫星，分布在赤道周围（不是等距，而是几乎），每天都在拍摄地球照片。每张照片的输出是 - 惊喜！- 从很远的地方拍摄的球体照片。

我需要将这些照片重新组合成一个纹理映射球体，我不确定如何最好地做到这一点。关键问题：

1.  这些照片 - 显然 - 距离中心越远，就会严重扭曲，因为它们正在看一个球体
2.  在一天中的不同时间拍摄了数百张 5 张照片的“组”。任何解决方案都必须是程序化的——我不能只用手来做:(
3.  输出平台是 iPad3：Open GL ES 2，纹理高达 4096x4096 - 但不如桌面 GPU 强大。我对着色器不是很好（虽然我已经做了很多 OpenGL 预着色器）
4.  照片本身是高分辨率的，我不确定我是否可以同时加载所有 5 个纹理。我还为行星表面加载了非常高分辨率的纹理（在卫星照片下方）。

我已经有了：映射到球体上的单个矩形纹理（我的球体是包裹在球体中的标准网格，顶点均匀分布在表面上），所以......我尝试将 5 张球体照片转换为单个矩形地图（但到目前为止没有成功；尽管有人指出我在做一个“极地罪恶扭曲”，看起来它可能会更好）。

我还想过做一些时髦的事情，用 5 张照片制作立方体贴图，并巧妙地决定要读取给定像素的哪些照片，但我并不完全相信。

有没有更好的办法？我忽略了什么？或者有没有人有实现上述目标的具体方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T11:04:47.973

我会用它做一个矩形纹理。

您将需要 2 x **2D**纹理/数组，一个用于`r,g,b`颜色求和**avg**，一个用于 count **cnt**。此外，我不相信我会使用**OpenGL/GLSL**，在我看来，C/C++ 会更好。

我会这样做：

1.  **空白目标纹理 ( `avg[][]=0, cnt[][]=0`)**
2.  **获取卫星位置/方向、时间**

    从位置和方向创建变换矩阵，以与照片相同的方式投影地球。然后从时间确定旋转移位。

3.  **循环穿过整个地球表面**

    只有两个嵌套循环`a`- 旋转和 `b - 到赤道的距离。

4.  **获取`x,y,z`和`a,b`变换矩阵+旋转移位（`a`-axis）**

    也可以倒着做，`a,b,z = f(x,y)`但它更棘手但更快更准确。您还可以`x,y,z`在相邻的`(pixels/areas)[a][b]`

5.  **添加像素**

    如果`x,y,z`在正面（`z>0`或`z<0`取决于相机`Z`方向）然后

    ```
    avg[a][b]+=image[x][y]; cnt[a][b]++; 
    ```

6.  **从点 #3 结束嵌套循环。**

7.  **转到 #2 下一张照片**
8.  **循环遍历整个`avg`纹理以恢复平均颜色**

    ```
    if (cnt[a][b]) avg[a][b]/=cnt[a][b]; 
    ```

**[笔记]**

1.  **可以测试复制的像素是否为：**

    在白天或晚上获得（仅使用您想要的，不要将两者混合在一起！！！）也可以确定云（我认为灰色/白色不是雪）并忽略它们。

2.  **不要溢出颜色**

    可以使用 3 个单独的纹理`r[][],g[][],b[][]`来`avg`避免这种情况

3.  **可以忽略地球边缘附近的区域以避免扭曲**

4.  **可以应用照明校正**

    来自`time`和`a,b`坐标以标准化照明

希望能帮助到你 ...

**[Edit1]正交投影**

所以这里很清楚我所说的正交投影是什么意思：

![卫星照片纹理（EUMETSAT）](../Images/555765c6b89dfef7ad6c537b5b18ab46.png)

这是使用的纹理（在网络上找不到更合适和免费的）并且想要使用真实的卫星图像而不是一些渲染......

![正交投影](../Images/a5ddc1b19e101084107faa92683b5aae.png)

这是我的正交投影应用程序

*   红、绿、蓝线是地球坐标系（`x,y,z`轴）
*   （红、绿、蓝）白线是卫星投影坐标系（`x,y,z`轴）

关键是将地球顶点坐标转换`(vx,vy,vz)`为卫星坐标`(x,y,z)`，如果`z >= 0`它是处理纹理的有效顶点，那么直接从`x,y`没有任何透视（正交）的情况下计算纹理坐标。

例如`tx=0.5*(+x+1);`......如果`x`被缩放到`<-1,+1>`并且可用的纹理是`tx <0,1>`相同的`y`轴：`ty=0.5*(-y+1);`......如果`y`被缩放到`<-1,+1>`并且可用的纹理是`ty <0,1>`（我的相机具有`y`相对于纹理矩阵的倒置坐标系，因此`y`轴上的倒置符号）

如果`z < 0`您正在处理超出纹理范围的顶点，请忽略它...正如您在图像上看到的那样，纹理的外边界被扭曲，因此您也应该只使用内部（例如地球图像区域的 70%）可以根据与纹理中点的距离进行某种纹理坐标校正。完成此操作后，只需将所有卫星图像投影合并为一张图像即可。

**[Edit2]**好吧，我玩了一下，发现了这一点：

*   反向投影校正根本不适用于我的纹理我认为这可能是后期处理的图像......
*   基于中点距离的校正似乎不错，但使用的比例系数很奇怪，不知道为什么在应该是 4 时乘以 6 我认为......

    ```
    tx=0.5*(+(asin(x)*6.0/M_PI)+1); 
    ty=0.5*(-(asin(y)*6.0/M_PI)+1); 
    ```

![校正的非线性投影](../Images/63f9ed3e339a2a3fbed307b17765f930.png)

*   校正的非线性投影（由 asin 提供）

![校正非线性投影边缘缩放](../Images/0cd5761145e9ceac8b085c83a488a56a.png)

*   校正非线性投影边缘缩放
*   `asin`与没有纹理坐标校正的情况相比，失真要小得多

# php - Codeigniter中的错误PHPExcel

> ID：11180017
> 
> 赞同：5
> 
> 时间：2012-06-24T18:17:07.510
> 
> 标签：php, codeigniter, export-to-excel, phpexcel

我正在尝试将 PHPExcel 与 CodeIgniter 一起使用。

但我有一个错误

**致命错误：从第 949 行 C:\ms4w\Apache\htdocs\plantation\system\core\Loader.php 中的上下文 'CI_Loader' 调用私有 IOFactory::__construct()**

我把 PHPExcel 放在我的应用程序/库中

这是我的代码控制器

```
function excel()
    {

        $this->load->library('phpexcel');
        $this->load->library('PHPExcel/iofactory');

        $objPHPExcel = new PHPExcel();
        $objPHPExcel->getProperties()->setTitle("title")
        ->setDescription("description");

        // Assign cell values
        $objPHPExcel->setActiveSheetIndex(0);
        $objPHPExcel->getActiveSheet()->setCellValue('A1', 'cell value here');

        // Save it as an excel 2003 file
        $objWriter = IOFactory::createWriter($objPHPExcel, 'Excel5');
        $objWriter->save("nameoffile.xls");

    } 
```

[与http://codeigniter.com/wiki/PHPExcel/](http://codeigniter.com/wiki/PHPExcel/)相同

请解决这个问题

我使用 codeigniter 2.0 和 php excel 1.7.7

感谢您的关注

BR

法会

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T03:52:17.270

这是您如何设置函数的方法，这也解决了您的无效字符问题，包括正确的标题并执行 ob_end_clean(); 清理任何输出缓冲。不过，在您执行 save() 之前执行此操作。

```
 public function howToPhpExcel()
{
    $response = $this->_response;

    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender();

    $excel = new PHPExcel();
    $excel->setActiveSheetIndex(0);
    $worksheet = $excel->getActiveSheet();
    $worksheet->getCell('A1')->setValue('tet');
    $worksheet->getCell('B1')->setValue('tet');

    ob_end_clean();

    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
    header("Cache-Control: no-store, no-cache, must-revalidate");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache");
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header('Content-Disposition: attachment;filename="Report.xlsx"');

    $objWriter = PHPExcel_IOFactory::createWriter($excel, 'Excel2007');
    ob_end_clean();

    $objWriter->save('php://output');
    $excel->disconnectWorksheets();
    unset($excel);

} 
```

# ruby-on-rails - 如何引用和更改 a has many through 模型中的额外值

> ID：11180025
> 
> 赞同：0
> 
> 时间：2012-06-24T18:18:08.317
> 
> 标签：ruby-on-rails, activerecord, has-many-through

我有 Lineup 和 Piece 模型加入了 piece_lineup 模型（有很多通过）。我在piece_lineup 模型中添加了一个“状态”列，但我不知道如何引用该属性和/或更改它。在列出与阵容相关的作品时，我还想列出与阵容相关的作品的状态。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:53:20.117

得到这个专栏很简单。添加到您的模型：

```
has_many :pieces, through: :piece_lineup, select: "pieces.*, piece_lineup.status as status" 
```

如果必须更改此值，则应创建`Lineup#status_for_piece=(piece, status)`（作为示例）方法。查找必要的行并更新状态。

插入不是优雅的方式，但连接表根本不是经常更新数据的好地方

# c - 将 MD5 结果转换为 C 中的整数

> ID：11180028
> 
> 赞同：2
> 
> 时间：2012-06-24T18:18:39.757
> 
> 标签：c, casting, md5

我的目标是使用 MD5 结果的结果来索引哈希表。我想对其执行模运算以在表中找到适当的插槽。我尝试将其转换为无符号长长类型。当我打印结果时，对于相同的 MD5 哈希，我每次都会得到一个不同的数字。MD5 哈希最初是一个无符号字符 *。有人可以告诉我我做错了什么吗？

这是我的功能：

```
int get_fp_slot(unsigned char * fingerprint, int size)
{
return (unsigned long long)fingerprint % size;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:34:13.523

MD5 哈希是一个 128 位的数字。因此，为了获得最佳性能，您可能应该保留所有 128 位。

鉴于您的函数将 128 位哈希作为字符串，您需要将该字符串解析为一系列 4 个整数。您的字符串可能看起来像这样：

```
79054025255fb1a26e4bc422aef54eb4 
```

那是一个 32 字节的十六进制字符串。如果是这样，您可以像这样提取二进制版本：

```
int v1, v2, v3, v4;
sscanf( &fingerprint[0], "%x", &v1 );
sscanf( &fingerprint[8], "%x", &v2 );
sscanf( &fingerprint[16], "%x", &v3 );
sscanf( &fingerprint[24], "%x", &v4 ); 
```

你现在做什么真的取决于你希望你的哈希有多好。如果您确实需要使用 32 位数字，那么只需将所有这些数字异或：

```
int hash = v1 ^ v2 ^ v3 ^v4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:37:03.663

您正在转换指针，即哈希的*地址*。当然，该地址与哈希值无关。

如何解决它取决于你想要什么。例如，您可以使用哈希的最后 16 个字节并将其解析为`unsigned long long`,

```
// sanity and error checking omitted for brevity
int get_fp_slot(unsigned char *fingerprint, int size)
{
    size_t len = strlen(fingerprint);
    size_t offset = len < 16 ? 0 : len-16;
    unsigned long long hash_tail = strtoull(fingerprint + offset,NULL,16);
    return hash_tail % size;
} 
```

或增量模数

```
// uses a helper hex_val that converts a hexadecimal digit to the integer it signifies
int get_fp_slot(unsigned char *fingerprint, int size)
{
    unsigned long long hash_mod = 0;
    while(*fingerprint) {
        hash_mod = (16*hash_mod + hex_val(*fingerprint)) % size;
        ++fingerprint;
    }
    return hash_mod;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:39:12.430

在您的代码中，您正在转换指针本身，而不是形成 MD5 值的字节！

一个 MD5 是 128 位，即 16 个字节。假设您的`long long`类型是 64 位（8 字节），您可以将其表示为两个`long long`值，然后对它们进行异或运算以获取哈希值。或者，如果您愿意，您可以简单地选择其中之一……哈希质量可能相似。

您没有说出来，但我假设您的指纹是指向具有 MD5 值的 16 字节数组的指针。然后：

```
unsigned long long a = *(unsigned long long*)fingerprint;
unsigned long long b = *(unsigned long long*)(fingerprint + 8);
return a ^ b; 
```

请注意， 和 的值`a`将`b`取决于您机器的字节序。只要您不将散列发送到不同的架构，这并不重要。

# javascript - 意大利各省（非地区）的谷歌地理地图可视化

> ID：11180034
> 
> 赞同：4
> 
> 时间：2012-06-24T18:19:28.313
> 
> 标签：javascript, google-visualization, geomap

我正在尝试使用 Google Visualization Geomap 来显示意大利地区（西西里岛、托斯卡纳...），然后显示某个地区的省份（在西西里岛，例如卡塔尼亚、巴勒莫...）。

显示区域并不难，而且效果很好。

当我试图显示以地图为中心的区域中的省份时，问题就出现了。

[在这里，您可以在 jsfiddle http://jsfiddle.net/mbutubuntu/uCQRL/1/](http://jsfiddle.net/mbutubuntu/uCQRL/1/)上找到一个示例。

我在 GeoChart 的文档（链接：[https](https://developers.google.com/chart/interactive/docs/gallery/geochart#Configuration_Options) ://developers.google.com/chart/interactive/docs/gallery/geochart#Configuration_Options ）中注意到“分辨率”属性可以是 ['countries', 'provinces '，'地铁']。

医生还说：

> 'provinces' - 仅支持国家地区和美国州地区。并非所有国家都支持；请测试一个国家/地区以查看是否支持此选项。

GeoMap 可能不支持意大利的“省”吗？如果是，我该如何解决这个问题？

最好的问候， F. 布达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T15:51:41.447

也许现在有一个新版本的谷歌图表。

此刻，GeoChart 正在支持`resolution:"provinces"`意大利，但它们实际上对应的是 Regions（西西里岛、撒丁岛、皮埃蒙特等）

谷歌图表似乎只支持一个国家内部的一级细分，称其为“省”。

此外，不可能将省份设置为`region`图表的可见区域（参数）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-12T12:26:53.257

您可以将此代码 [https://github.com/rarylson/geochart-geojson](https://github.com/rarylson/geochart-geojson) 与此 geojson [https://github.com/Dataninja/geo-shapes/blob/master/italy/provinces.geojson一起使用](https://github.com/Dataninja/geo-shapes/blob/master/italy/provinces.geojson)

```
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=<YOURKEY>"
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/rarylson/geochart-geojson/master/build/geochart-geojson.min.js"></script>

    <script type="text/javascript">
      google.charts.load("current");
      google.charts.setOnLoadCallback(drawVisualization);

      function drawVisualization() {

        // Create and populate a data table
        var data = new google.visualization.DataTable();
        data.addColumn("string", "City");
        data.addColumn("number", "Value");
        data.addRows([
          ["VERCELLI", 10],
          ["NOVARA", 5],
        ]);

        // Instantiate our Geochart GeoJSON object
        var vis = new geochart_geojson.GeoChart(document.getElementById("mydiv"));

        // Set Geochart GeoJSON options
        var options = {
          mapsOptions: {
            center: {lat: 42, lng: 12},
            zoom:6

          },
          geoJson: "https://raw.githubusercontent.com/Dataninja/geo-shapes/master/italy/provinces.geojson",
          geoJsonOptions: {
            idPropertyName: "NOME_PRO"
          }
        };

        // Draw our Geochart GeoJSON with the data we created locally
        vis.draw(data, options);
      }
    </script>
  </head>

  <body>
    <div id="mydiv" style="width: 900px; height: 560px;"></div>
  </body> 
```

# python - 如何通过 Internet 在两台计算机之间建立 UDP 连接

> ID：11180035
> 
> 赞同：4
> 
> 时间：2012-06-24T18:19:48.100
> 
> 标签：python, networking, udp

我正在尝试《Python 网络编程基础》一书中的一个示例，其中列出了一个简单的 UDP 客户端/服务器程序。第一个程序在同一台机器上有客户端/服务器，但第二个程序让服务器监听任何机器。书中没有详细说明如何在两台机器之间建立连接。

我有两台都连接到互联网的电脑。如何配置它们以相互发送和接收数据包。

以下是示例的源代码：

```
#!/urs/bin/env python
# UDP client and server for talking over a network

import random, socket, sys

s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

MAX  = 65535
PORT = 1060

if 2<= len(sys.argv) <= 3 and sys.argv[1] == 'server':
    interface = sys.argv[2] if len(sys.argv)>2 else ''
    s.bind((interface,PORT))
    print 'Listening at ', s.getsockname()
    while True:
        data, address = s.recvfrom(MAX)
        if random.randint(0,1):
            print 'The client at ', address, 'says:', repr(data)
            s.sendto('Your data was %d bytes ' % len(data) ,address)
        else:
            print 'Pretending to drop packet from ', address

elif len(sys.argv)==3 and sys.argv[1] == 'client':
    hostname = sys.argv[2]
    s.connect((hostname,PORT))
    print 'Client socket name is', s.getsockname()
    delay = 0.1
    while True:
        s.send('This is another message')
        print 'Waiting up to', delay, 'seconds for a reply'
        s.settimeout(delay)
        try:
            data = s.recv(MAX)
        except socket.timeout:
            delay *= 2 # wait even longer for the next request
            if delay > 2.0:
                raise RuntimeError('I think the server is down')
        except:
            raise # a real error so we let the user see it
        else: 
            break
    print 'The server says ', repr(data) 
```

我找到了作为服务器运行的计算机的公共 IP，并尝试从另一台作为客户端运行的计算机连接到它，但没有得到响应。我不在两台计算机的代理后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:28:06.847

首先，如果您真的想尝试这样的应用程序并学习，您需要将这两台机器连接到同一子网内的本地网络上，这样每台机器的地址都像 192.168.x.2 和 192.168.x.2 这样你会知道发生了什么...

然后，当您在一台机器上运行上述应用程序时，将作为“_application_name 服务器”运行，而在另一台机器上作为“_application_name 客户端”运行。您将看到两台机器都已连接并开始在您的本地网络中进行通信。

在 Internet 上，由于有许多安全通道，很难让您的 IP/PORT 正常工作，而且您几乎不会得到您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T02:41:09.947

假设您的代码文件名为 cs.py ，服务器接口地址 192.168.1.2 和服务器外部地址（互联网地址） 2.2.2.2

在服务器上运行
cs.py server 192.168.1.2

确保 LAN 和 WAN 之间的服务器端路由器具有服务器的 NAT

在客户端运行
cs.py client 2.2.2.2

# android - Android：http post请求期间出现“强制关闭”错误

> ID：11180036
> 
> 赞同：1
> 
> 时间：2012-06-24T18:20:04.320
> 
> 标签：android, http, post, http-post

最初我的活动`new DropboxApi(token).execute();`使用令牌调用。

```
public class DropboxApi extends AsyncTask<Void, Long, Boolean> {
    public String token;
    public DropboxApi(String a) {
        // TODO Auto-generated constructor stub
        token=a;
    }
    String HMAC_SHA1_ALGORITHM = "HmacSHA1";
    public String Sign(String token)// throws Exception
    {
        String uri = "https://api.dropbox.com/1/account/info";
        //Uri json = GetResponse(uri);
        //return ParseJson<Account>(json);
        uri+="?";
        String queryParams = "oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token="+token+"&oauth_nonce=6880853&oauth_timestamp=";

         java.util.Date date= new java.util.Date();
         //System.out.println(new Timestamp(date.getTime()));

         queryParams+=(new Timestamp(date.getTime()).toString())+"&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=";

         uri+=queryParams;
         Mac mac=null;
        try {
            mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         Key key=new SecretKeySpec("2f2y1dyuqhp58ek".getBytes(), HMAC_SHA1_ALGORITHM) ;
         try {
            mac.init(key);
        } catch (InvalidKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         byte[] rawHmac = mac.doFinal(queryParams.getBytes());
         String result=new String(Base64.encode(rawHmac,Base64.DEFAULT));
         uri+=result;
         return uri;

    }

    @Override
    protected Boolean doInBackground(Void... params) {
        // TODO Auto-generated method stub

            HttpClient httpclient = new DefaultHttpClient();   
            HttpPost httpPost = new HttpPost(Sign(token));
            int k=0;
            k=23;
            HttpResponse response;
            try {
                int j=3;
                j=0;
                response = httpclient.execute(httpPost); // the request executes
                Log.d("HTTP","Executed");
        String  responseBody = EntityUtils.toString(response.getEntity());

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            }
            catch(ConnectTimeoutException e){
            e.printStackTrace();
            }
            catch (IOException e) {
                e.printStackTrace();
            }
            //return null;

        return null;
    }

} 
```

在调试中，代码工作正常，直到它返回 uri.. 这是：

[https://api.dropbox.com/1/account/info?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=6880853&](https://api.dropbox.com/1/account/info?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=6880853&) oauth_timestamp=2012-06-24 23:46:51.734&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=s8zaFHmQJ24BTxTYV4VUSLdV9d8=

这是我第一次发出http请求..这段代码应该工作吗？

```
06-24 23:44:47.364: E/AndroidRuntime(11315):    at dalvik.system.NativeStart.main(Native Method)
06-24 23:44:53.033: I/Process(11315): Sending signal. PID: 11315 SIG: 9
06-24 23:45:43.404: W/ActivityThread(11375): Application cloud.mobile is waiting for the debugger on port 8100...
06-24 23:45:43.563: I/System.out(11375): Sending WAIT chunk
06-24 23:45:43.683: I/dalvikvm(11375): Debugger is active
06-24 23:45:43.846: I/System.out(11375): Debugger has connected
06-24 23:45:43.887: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:44.087: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:44.338: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:44.544: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:44.773: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:44.983: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:45.183: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:45.393: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:45.594: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:45.805: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:46.004: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:46.214: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:46.414: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:46.627: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:46.833: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:47.034: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:47.254: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:47.466: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:47.663: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:47.873: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:48.073: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:48.283: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:48.483: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:48.684: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:48.894: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:49.094: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:49.295: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:49.504: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:49.714: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:49.915: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:50.123: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:50.323: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:50.524: I/System.out(11375): waiting for debugger to settle...
06-24 23:45:50.754: I/System.out(11375): debugger has settled (1426)
06-24 23:45:53.493: D/dalvikvm(11375): GC_EXTERNAL_ALLOC freed 721 objects / 53976 bytes in 321ms
06-24 23:48:29.164: D/AndroidRuntime(11375): Shutting down VM
06-24 23:48:29.164: W/dalvikvm(11375): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-24 23:48:29.423: E/AndroidRuntime(11375): FATAL EXCEPTION: main
06-24 23:48:29.423: E/AndroidRuntime(11375): java.lang.IllegalArgumentException: Illegal character in query at index 122: https://api.dropbox.com/1/account/info?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=6880853& oauth_timestamp=2012-06-24 23:46:51.734&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=s8zaFHmQJ24BTxTYV4VUSLdV9d8=
06-24 23:48:29.423: E/AndroidRuntime(11375):    at java.net.URI.create(URI.java:970)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at org.apache.http.client.methods.HttpPost.<init>(HttpPost.java:79)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at cloud.mobile.DropboxApi.httpMethod(DropboxApi.java:67)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at cloud.mobile.MCActivity$3.onClick(MCActivity.java:161)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.view.View.performClick(View.java:2408)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.view.View$PerformClick.run(View.java:8816)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.os.Handler.handleCallback(Handler.java:587)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.os.Looper.loop(Looper.java:123)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at java.lang.reflect.Method.invokeNative(Native Method)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at java.lang.reflect.Method.invoke(Method.java:521)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-24 23:48:29.423: E/AndroidRuntime(11375):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:33:17.533

这是因为您试图在 UI 线程上执行网络访问。你不应该*在*这个线程上执行潜在的昂贵操作（网络访问、文件 I/O、远程数据库连接、数据库事务等），因为它可能会阻塞 UI 线程并阻止你的布局膨胀/响应触摸事件。您需要将您的 HTTP 请求包装在`AsyncTask`（推荐）或`Thread`代替。

阅读我关于该主题的博客文章：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

此外，网址中有一个空格（大声笑）......这就是为什么你得到一个`IllegalArgumentException`字符 122。从`... 6880853& oauth_timestamp=2012 ...`

我上面写的东西仍然适用。请，请，***请***不要在 UI 线程上执行此任务。

# winforms - 将 XElement 绑定到 BindingSource c#

> ID：11180039
> 
> 赞同：0
> 
> 时间：2012-06-24T18:20:38.623
> 
> 标签：winforms, datagridview, linq-to-xml, bindingsource

我正在阅读一些 xml，我想知道是否可以将 XElement 绑定到绑定源并将绑定源绑定到 datagriview winforms。

我已经尝试了各种但没有成功。

此 Xelement 中的每个元素都必须在 datagridview 中创建一个数据行

任何片段或建议？

谢谢

编辑

我正在尝试构建一个数据表以绑定到 datagridView 尝试如下

```
class Program
{
    static void Main()
    {
        //at runtime could be any object
        const string testXElement = @"<MyObject xmlns=""http://www.test.com/"">
          <code>Test</code>
          <Date>2012-06-24T00:00:00+01:00</Date>
          <Name>John</Name>
        </MyObject>";
        XElement element = XElement.Parse(testXElement);
        var dgv=new DataGridView();

        //Build dataTable from it or 
        var dt=new DataTable();
        XNamespace ns = "http://www.test.com/";
        foreach (var x in element.Descendants(ns + "MyObject").Elements())
        {
            var dc = new DataColumn {ColumnName = x.Name.ToString()};
            var row = dt.NewRow();
            //row[dc] = );
        }
        dgv.DataSource = dt;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:53:16.977

```
//at runtime could be any object
            const string testXElement = @"<MyObject xmlns=""http://www.test.com/"">
                                            <code>Test</code>
                                            <Date>2012-06-24T00:00:00+01:00</Date>
                                            <Name>John</Name>
                                         </MyObject>";
            XElement element = XElement.Parse(testXElement); 

            var temp = from obj in element.Elements() 
                       select new
                       {
                           Name = obj.Name.LocalName,
                           Value = obj.Value
                       };

            dataGridView1.DataSource = temp.ToList(); 
```

# ruby-on-rails - Rails - 多个表之间的继承

> ID：11180042
> 
> 赞同：0
> 
> 时间：2012-06-24T18:21:12.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我试图找出实现这一点的rails方式。我有一张载有车辆类型的表格

```
create_table :vehicles do |t|
    t.string make
    t.integer model_year
    t.string type #truck, motorcycle, sedan, etc
end 
```

以及该车实际存在的实例

```
create_table :vehicle_instances do |t|
    t.integer vehicle #links to above table
    t.integer owner
    t.integer bought_date
    t.integer mileage
    t.string type #truck, motorcycle, sedan, etc, but with different methods than above
end 
```

1.  我希望将车辆表中的 :type 移动到 vehicle_instances 表中。我该怎么做呢？
2.  在某些情况下，vehicle_instances 表中的类型更具体（即车辆中的类型：'motorcyle'，但实例中的类型：'dirt_motorcycle' 或类型：'road_motorcycle'）。有没有办法在实例化 Vehicle 时捕获 Motorcycle 类下的两者，但在实例化 VehicleInstance 时捕获更具体的类？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:54:55.720

1.  Id 已将其保留为父级的属性，但如果您必须... 在 vehicleInstance 中执行此操作：

    before_save :pull_type

    def pull_type self.type = self.vechile.type end

此外，将车辆列更改为 vehicle_id - 这是预期的语法，将停止关系冲突。

1.  就我个人而言，我会在“子类型”的实例中添加一列：[dirt, race, nil] 子类型的选项将基于父类型。

# javascript - Javascript从选择中删除元素

> ID：11180044
> 
> 赞同：1
> 
> 时间：2012-06-24T18:21:14.810
> 
> 标签：javascript, html, onclick

我正在使用一个带有两个选择列表和一个按钮的表单。

我正在尝试当我单击按钮时，我将选择元素从一个选择列表传递到另一个。

问题是，不是删除 1 个元素，而是将所选元素与列表中后面的元素一起删除。

这是我的功能：

```
 function removeOptions(s1,s2) {

    if (s1.options.length == 0) {
        alert('You have already removed all list items');
        return false;
    }

    var optionToRemove = s1.options.selectedIndex;
    var optn = s1.options[optionToRemove];

    s2.options.add(optn);
    s1.remove(optionToRemove);

    alert('success');
    return true;
} 
```

我的按钮配置：

```
 <input type=button onClick="removeOptions(selectList1,selectList2)" ; value='Autorizar'> 
```

我正在使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:30:41.850

代替 ：

```
 s2.options.add(optn);
 s1.remove(optionToRemove); 
```

行，试试这个：

```
 s2.appendChild(optn); 
```

`optn`元素将从一个元素移动到另一个`s1`元素`s2`。元素（特别是`optn`）不能同时有 2 个或更多父元素，因此`optn`会自动删除`s1`。

# r - R中的数据框列替换和摘要

> ID：11180046
> 
> 赞同：2
> 
> 时间：2012-06-24T18:21:25.853
> 
> 标签：r, dataframe

我有数据框

```
names <- c("doe.jane", "doe.john", "smith.bob")
number <- c(3, 5, 1)
site <- c("A1", "A1", "A2")
df <- as.data.frame(matrix(c(site, names, number), 3))
names(df) <- c("site", "names", "number") 
```

我只需要用姓氏替换全名，然后折叠数据框，因此输出为

```
names <- c("doe", "smith")
number <- c(8, 1)
site <- c("A1", "A2")
df <- as.data.frame(matrix(c(site, names, number), 2))
names(df) <- c("site", "names", "number") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:40:27.627

你想做这样的事情：

```
last.names <- function(names) {
    names <- as.character(names)
    split.names <- strsplit(names, split='.', fixed=TRUE)
    sapply(split.names, function(x) x[1])
}

df <- within(df, names <- last.names(names))
df <- with(df, aggregate(as.numeric(number), by=list(site=site, names=names), sum)) 
```

我会指出你的定义`df`有点误导。你真的只需要说`df <- data.frame(names, number, site)`。你这样做的方式导致结果中的三`factor`列`data.frame`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:06:21.963

这是一个使用正则表达式来获取名称部分的版本。由于将数字保存为因子，我重新创建了数据 - 感谢 mplourde 指出这一点。

```
#set up the data
names <- c("doe.jane","doe.john","smith.bob")
number <- c(3,5,1)
site <- c("A1","A1","A2")
df <- data.frame(site,names,number)

#get the first part of the name
df$names <- gsub("([[:alpha:]]+)\\.([[:alpha:]]+)","\\1",df$names)
#aggregate the data by site and name
dfnew <- aggregate(df["number"],df[c("site","names")],sum)

> dfnew
  site names number
1   A1   doe      8
2   A2 smith      1 
```

# php - Zend_Db_Table_Rowset 到对象数组

> ID：11180047
> 
> 赞同：3
> 
> 时间：2012-06-24T18:21:33.250
> 
> 标签：php, arrays, zend-framework, zend-db, zend-db-table

我不是在寻找，`$myRowset->toArray();`因为我想得到一个**对象数组**。

我想要做的是能够`$myRowset`与对象数组合并。

```
$myOtherArray = [new Foo(), new Bar()];
$array = array_merge($myRowset, $myOtherArray); 
```

使用 Zend_Db_Table_Rowset，这是不可能的。使用`$myRowset->toArray();`也不起作用，因为我需要一个对象数组。

**编辑**- 执行我想要的代码示例，但如果存在，我正在寻找更好的解决方案：

```
// Convert the Zend_Db_Table_Rowset to an array of Zend_Db_Table_Row
$myRowset = $dbTable->fetchAll();
$rowArray = array();
foreach ($myRowset as $row) {
    $rowArray[] = $row;
}

// Merge with other array of objects
$myOtherArray = [new Foo(), new Bar()];

$finalArray = array_merge($rowArray, $myOtherArray); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:56:59.883

这是我的“最干净”的解决方案：我覆盖 Zend_Db_Table_Rowset

```
class My_RowSet extends Zend_Db_Table_Rowset {

    public function rowArray() {
        $rowArray = array();
        foreach ($this as $row) {
            $rowArray[] = $row;
        }
        return $rowArray;
    }

} 
```

和 Zend_Db_Table：

```
abstract class My_Db_Table extends Zend_Db_Table {

    protected $_rowsetClass = 'My_RowSet';

} 
```

现在我可以这样做：

```
$myRowset = $dbTable->fetchAll();
$rowArray = $myRowset->rowArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-27T14:31:43.120

您可以使用

```
/** @var Zend_Db_Table_Row[] $rows */
$rows = iterator_to_array($rowset) 
```

# r - 仅读取等于特定值的（非常大的）文件行（使用 R）

> ID：11180049
> 
> 赞同：1
> 
> 时间：2012-06-24T18:21:58.030
> 
> 标签：r

我有一个包含 5400 万行的文件，读取整个文件太大了，它不适合内存。使用 R，我想从其中一列的内容等于某个数字的文件中提取 som 100 000 行。有谁知道这是否可能无需阅读整个文件？所有列都包含整数，如果这有什么不同的话。

该文件的内容如下所示：

```
Date,ProductId,Stock,Price
199501,1,271,5
199501,2,145,50
199501,3,16,42
199501,4,32,45
199501,5,96,62 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T18:47:09.753

您的问题的详细信息尚不清楚，但在许多情况下，如果文件结构良好，则通过 sqldf 绕道是最快的解决方案。

[http://code.google.com/p/sqldf/#Example_13._read.csv.sql_and_read.csv2.sql](http://code.google.com/p/sqldf/#Example_13._read.csv.sql_and_read.csv2.sql)

如果这没有帮助，您应该通过发布一个 10 行的简短示例来提供更多详细信息，其中包括执行您想要的简单代码，即使它很慢。有人会介入并优化它，但如果没有样本数据，这是不可能的。

# meteor - 从流星方法内部调用时，this.userId() 通常为空

> ID：11180052
> 
> 赞同：3
> 
> 时间：2012-06-24T18:22:12.797
> 
> 标签：meteor

我最近开始尝试`auth`流星的分支，根据我调用 this.userId() 的流星方法的位置，它将返回 null 或我需要的用户 ID。

更具体地说，当从 Meteor.startup 内部初始化的咖啡脚本类调用我的流星方法时，它可以工作，但当从 Meteor.publish 内部*调用相同的方法时则不行*。

流星方法很简单，可能不相关，但以防万一：

```
Meteor.methods(
  get_user_id: ->
    return @userId()
) 
```

编辑：似乎人们无法重现我的问题，这里是 todo auth 示例的一个补丁，应该演示它。

```
 diff --git a/examples/todos/server/methods.js b/examples/todos/server/methods.js
    index e69de29..d4182a6 100644
    --- a/examples/todos/server/methods.js
    +++ b/examples/todos/server/methods.js
    @@ -0,0 +1,6 @@
    +Meteor.methods({
    +  get_user_id: function() {
    +    console.log(this.userId());
    +    return this.userId();
    +  }
    +});
    diff --git a/examples/todos/server/publish.js b/examples/todos/server/publish.js
    index 1552c5e..87cb29f 100644
    --- a/examples/todos/server/publish.js
    +++ b/examples/todos/server/publish.js
    @@ -16,6 +16,8 @@ Todos = new Meteor.Collection("todos");

     // Publish visible items for requested list_id.
     Meteor.publish('todos', function (list_id) {
    +  Meteor.call('get_user_id');
    +  //console.log(this.userId())
       return Todos.find({
         list_id: list_id,
         privateTo: { 
```

* * *

感谢[Eitan](https://stackoverflow.com/users/1481033/eitan)的补丁！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T17:27:58.953

You should use `Meteor.userId()` to retrieve the current user's ID within `Meteor.methods`. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:57:11.077

这可能很愚蠢：**但是，您登录了吗？**（对不起，这终于是我的问题了。）

* * *

所以最好先检查是否登录：

```
if (this.userId)
    console.log(this.userId) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:11:42.973

`this.userId()`据我所知，它本身没有反应，所以如果你想让其他东西对它做出反应，你需要把它放在一个`Session`变量中。所以，从`Meteor.startup`你做：

```
Session.set('userId', this.userId()); 
```

然后，您可以在需要的地方使用它：

```
Session.Get('userId'); 
```

这样，当它丢失时，`null`它将在以后填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T05:37:55.023

它对我有用。你确定你得到了`Meteor.call`正确的返回值吗？就像是：

`Meteor.call 'get_user_id', (error, result) -> console.log(result)`

如果你`console.log(@userId())`在你的方法中添加会发生什么？

# c# - resources.designer.cs 不是自动生成的。（MonoDevelop 初学者）

> ID：11180057
> 
> 赞同：7
> 
> 时间：2012-06-24T18:22:50.373
> 
> 标签：c#, android, mono, monodevelop

我是 MonoDevelop 的新手，我正在学习为 Android 构建应用程序。我在以下教程中遇到问题：http: [//docs.xamarin.com/android/getting_started/hello_world](http://docs.xamarin.com/android/getting_started/hello_world)

本教程声称如果我更改 resource.xml 文件并重新构建应用程序，resource.designer.cs 中将有一个自动生成的代码，该代码受我在 resource.xml 中所做的更改的影响。但是代码保持原样，没有任何更改。

我错过了什么？谢谢你。

**编辑：** 没关系，它正在工作 XD

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:24:03.870

我有一段时间有同样的问题。如果您只是删除 Resource.Designer.cs 它将正确重新生成。

# build - GNU Make：如何构建一个 32 位和 64 位的通用库？

> ID：11180058
> 
> 赞同：1
> 
> 时间：2012-06-24T18:22:50.393
> 
> 标签：build, build-automation, static-libraries, gnu-make

我有一个文件夹布局的项目，例如：

```
/project_root
  /common-code-sources
    /common1
    /common2
    /...
  /prog-A-sources
  /prog-B-sources
  /prog-C-sources 
```

需要为程序 A、B 和 C 生成三个可执行文件。每个可执行文件都有少量独特的源代码，但大多数都希望静态链接来自各种`libCommonCodeN.a`文件的功能。

但是，我需要构建 Program C 和所有它需要的具有一组特定编译标志的通用代码库。（在这种情况下，32 位并且禁用了一些优化。）

这意味着`common_sources`必须使用正确的标志再次编译程序 C 所需的特定代码。

我正在寻找有关如何最好地创建基于 Makefile 的构建系统来涵盖这种情况的想法。

我认为该解决方案将涉及 lib 文件的并行输出文件夹和所谓的“特定于目标”的`make`变量来指导该过程，但我不确定如何将它们组合在一起。

**问题：**当其中一个源发生更改 时，我如何确保`make`在项目的根目录下运行是正确的？`common-code`

那就是：我怎样才能重建有`.a`问题的两种风格并重新链接3个可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:25:14.333

这里有两种方法：

*   维护单个**Makefile （您始终可以通过****include**指令拆分 Makefile ）。
*   为每个子项目维护自己的 Makefile（[递归 make 考虑有害](http://miller.emu.id.au/pmiller/books/rmch/)的方法）。

在第一种情况下，您可以完全控制依赖项...要进行自定义构建，请使用：

```
  $ 猫 Makefile
...
ifeq '$(DEBUG)' '是'
  BUILD_DIR = 调试
  CFLAGS += $(CFLAGS_DEBUG)
别的
  BUILD_DIR = 释放
  CFLAGS += $(CFLAGS_OPTIM)
万一
...
  $ 使调试=是

```

在第二种情况下，将第一个提示与：

```
  $ 猫 Makefile
...
ifeq '$(DEBUG)' '是'
  BUILD_DIR = 调试
  MODULE_A_BUILD_DIR = ../module-A/_debug_build
  CFLAGS += $(CFLAGS_DEBUG)
别的
  BUILD_DIR = 释放
  MODULE_A_BUILD_DIR = ../module-A/_release_build
  CFLAGS += $(CFLAGS_OPTIM)
万一

构建：$(MODULE_A_BUILD_DIR)/libmodulea.a
    制作 -C $(MODULE_A_BUILD_DIR)/.. DEBUG=$(DEBUG)
...

```

你在你的问题中说的都是正确的。只要做到逻辑一致，不要害怕））

因此，使**build** / **dist**路径依赖于 make 标志或目标模式：

```
ifneq '$(filter %-debug,$(MAKECMDGOALS))' ''
  BUILD_DIR = 调试
  MODULE_A_BUILD_DIR = ../module-A/_debug_build
  CFLAGS += $(CFLAGS_DEBUG)
  ...
万一

```

# javascript - Meteor 中客户端渲染和 Fibers 的性能影响

> ID：11180059
> 
> 赞同：5
> 
> 时间：2012-06-24T18:22:54.480
> 
> 标签：javascript, node.js, meteor

许多人评论了 Fibers（它为您提供 Node.js 中的同步代码）如何破坏与 99% 的 npm 包的兼容性。我对性能影响更感兴趣。

这是否会撤消“Node.js 真的很快，看，它是异步/基于事件的！” 争论？Meteor 团队在 Fibers 中烘焙的实际意义是什么？

此外，在部署了在客户端呈现页面的大规模重写之后，Twitter[改变了他们的决定](http://engineering.twitter.com/2012/05/improving-performance-on-twittercom.html)，转而支持从服务器提供 HTML 以缩短页面加载时间。这对 Meteor 的潜在性能限制（尤其是在第一页加载时）意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:06:56.343

开发团队正计划实施服务器端渲染以解决第一页加载问题并支持搜索引擎，方法是将初始数据作为 HTML 的一部分显示给用户，以便用户查看初始数据同时仍保留所有其余部分。

# javascript - 网格中的组合框

> ID：11180067
> 
> 赞同：0
> 
> 时间：2012-06-24T18:24:33.537
> 
> 标签：javascript, extjs

请帮助我，如何在字段中插入**组合框**？

```
text: "Combo need is here!!!", width: 100, dataIndex: '', sortable: true 
```

这里需要组合框...

关于 extjs 的材料很少:(

还有一个问题，是否适合移动界面的 extjs？我有一个网店，实用用extjs的手机界面吗？

我的代码：

```
Ext.onReady(function(){
  Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
      {name: 'id', type: 'int'},
      {name: 'day', type: 'string'},
      {name: 'time', type: 'string'},
      {name: 'what', type: 'string'},
      {name: 'combo', type: 'string'}
    ]
  });

  var store = Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
      type: 'ajax',
      url: 't.php',
      reader: {
        type: 'json'
      }
    }
  });

  var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    columns: [
      {
        text: "Day", flex: 1, dataIndex: 'day', sortable: true
      },
      {
        text: "Time", width: 115, dataIndex: 'time', sortable: true
      },
      {
        text: "sourse", width: 100, dataIndex: 'what', sortable: true
      },
      {
        text: "Combo need is here!!!", width: 100, dataIndex: '', sortable: true // HERE!!!
      }
    ],
    height:700,

    renderTo: 'grid-example'
  });

  store.load();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:58:08.583

您应该使用 CellEditing 或 RowEditing 插件，并将字段的编辑器属性设置为“组合框”

[http://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html)

您不应该将 Sencha ExtJS 用于移动设备。相反，您应该使用 Sencha Touch 2

[http://www.sencha.com/products/touch/](http://www.sencha.com/products/touch/)

# c# - ReSharper/C# 中的“委托减法具有不可预测的结果”？

> ID：11180068
> 
> 赞同：127
> 
> 时间：2012-06-24T18:24:34.383
> 
> 标签：c#, events, delegates, resharper, compiler-warnings

使用`myDelegate -= eventHandler`ReSharper（版本 6）时出现问题：

> 委托减法具有不可预测的结果

[JetBrains 在这里解释了](http://confluence.jetbrains.net/display/ReSharper/Delegate+subtraction+has+unpredictable+semantics)这背后的原因。这个解释是有道理的，读完之后，我怀疑我`-`对代表的所有使用。

*那么如何*，

*   我可以在不让 ReSharper 脾气暴躁的情况下编写非自动事件吗？
*   或者，是否有更好和/或“正确”的方法来实现这一点？
*   或者，我可以忽略 ReSharper 吗？

这是简化的代码：

```
public delegate void MyHandler (object sender);

MyHandler _myEvent;

public event MyHandler MyEvent
{
    add
    {
        _myEvent += value;
        DoSomethingElse();
    }
    remove
    {
        _myEvent -= value; // <-- ReSharper warning here
    }
} 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-06-24T18:32:14.000

不要害怕！ReSharper 警告的第一部分仅适用于删除代表列表。在您的代码中，您总是删除一个委托。第二部分讨论了删除重复代表后代表的顺序。事件并不能保证其订阅者的执行顺序，因此它也不会真正影响您。

> 由于上述机制可能导致不可预知的结果，因此 ReSharper 在遇到委托减法运算符时会发出警告。

ReSharper 发出此警告是因为多播委托减法可能有问题，它并没有完全谴责该语言功能。幸运的是，这些陷阱存在于边缘案例中，如果您只是检测简单事件，则不太可能遇到它们。没有更好的方法来实现您自己的`add`/`remove`处理程序，您只需要注意。

我建议将该消息的 ReSharper 警告级别降级为“提示”，这样您就不会对他们的警告不敏感，这通常很有用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-10-28T16:12:14.250

您不应该直接使用委托来求和或减法。取而代之的是你的领域

```
MyHandler _myEvent; 
```

相反，也应该将其声明为事件。这将解决问题而不会危及您的解决方案，并且仍然具有事件使用的好处。

```
event MyHandler _myEvent; 
```

使用委托总和或减法是危险的，因为您在简单地分配委托时可能会丢失事件（根据声明，开发人员不会直接推断这是一个多播委托，因为它被声明为一个事件）。举个例子，如果这个问题中提到的属性没有被标记为事件，下面的代码会将前两个分配丢失，因为有人简单地分配给了委托（这也是有效的！）。

```
myObject.MyEvent += Method1; 
myObject.MyEvent += Method2;
myObject.MyEvent = Method3; 
```

在分配 Method3 时，我完全失去了两个初始订阅。事件使用将避免此问题，同时删除 ReSharper 警告。

* * *

## 回答 #3

> 赞同：-17
> 
> 时间：2015-02-23T16:55:50.840

将其设置为 = null 而不是使用 -=

# java - 带有 HTML 链接的 Spring 消息资源

> ID：11180070
> 
> 赞同：3
> 
> 时间：2012-06-24T18:24:57.347
> 
> 标签：java, spring, spring-mvc, localization, resourcebundle

我有一个本地化的基于 spring mvc 的 Web 应用程序，它有一个外部化的消息资源包/文件。

捆绑包中的一些示例消息是：

```
...
msg1=Click here to go to your account
msg2=Click here to go to your inbox
... 
```

如您所见，我的消息形式为：“单击此处...”。现在，**我希望将消息/文本的“单击此处”部分作为链接**，每个链接的目的地都不同用户（例如，对于“msg1”，user1 将具有指向 user1 帐户的链接，而对于 user2，目标将是指向 user2 帐户的链接，依此类推）。

您能否让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:35:58.863

所有用户的链接都应该相同。由于用户经过身份验证，服务器应该知道哪个用户正在执行给定的请求，因此应该使用该信息而不是请求参数来获取当前用户的收件箱或帐户。

也就是说，如果您确实需要为每个用户传递不同的请求参数，只需参数化您的消息：

```
msg1=<a href="{0}">Click here</a> to go to your account 
```

并使用您的消息标签来传递参数。使用 JSTL，这将是这样的：

```
<c:url var="accountUrl" value="/account.action">
    <c:param name="userId" value="${currentUserId}"/>
</c:url>
<fmt:message key="msg1">
    <fmt:param value="${accountUrl}"/>
</fmt:message> 
```

# encoding - 使用 ffmpeg 库编码失败

> ID：11180072
> 
> 赞同：1
> 
> 时间：2012-06-24T18:25:45.097
> 
> 标签：encoding, ffmpeg

我花了一些时间查看 ffmpeg 库并进行设置，我正在打开一个 .flv 文件。读取和解码以及帧，现在我正在尝试将其编码为 MP4，但我的数据包最终是空的。

我的代码如下

```
int main (){

    avformat_open_input(&pFC, "c://wav//test2.flv", NULL, NULL);

    po = av_find_stream_info(pFC);

    //ADD LOGIC TO FIND VIDEO STREAM
    pCodecC = pFC->streams[0]->codec;

    decoder = avcodec_find_decoder(pCodecC->codec_id);
    encoder = avcodec_find_encoder(pCodecC->codec_id);
    po = avcodec_open(pCodecC, decoder);

    pCodecE =  avcodec_alloc_context3(encoder);
    /* put sample parameters */
    pCodecE->bit_rate = 400000;
    /* resolution must be a multiple of two */
    pCodecE->width = 352;
    pCodecE->height = 288;
    /* frames per second */
    pCodecE->time_base.den = 25;
    pCodecE->time_base.num = 1;
    pCodecE->gop_size = 10; /* emit one intra frame every ten frames */
    pCodecE->max_b_frames=1;
    pCodecE->pix_fmt = PIX_FMT_YUV420P;

    if(pCodecC->codec_id == CODEC_ID_H264)
        av_opt_set(pCodecE->priv_data, "preset", "slow", 0);

    po =  avcodec_open2(pCodecE, encoder, NULL);

    AVFrame *pFrame;
    // Allocate an AVFrame structure

    // Allocate video frame
    pFrame=avcodec_alloc_frame();
    int frameFinished = 0;
    int frame = 0;
    int gotpacket = 0;

    while(av_read_frame(pFC, &packet) >= 0)
    {
        if(packet.stream_index==0) //the video stream is 0
        {
            int len = avcodec_decode_video2(pCodecC, pFrame, &frameFinished, &packet);
            if(frameFinished)
            {
                printf("frame # %i", frame);

                po =avcodec_encode_video2(pCodecE, &spacket, pFrame, &gotpacket);
                if(gotpacket)
                {
                    printf("packet recieved");
                }
                frame++;
            }
        }
        av_free_packet(&packet);
    }

    printf("encoding done");

    return 0;
} 
```

基本上一切正常

```
 po =avcodec_encode_video2(pCodecE, &spacket, pFrame, &gotpacket); 
```

where`&gotpacket`返回 0，如在空帧中。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T22:21:55.020

正如文档所说。帧可能在内部缓冲。在这种情况下，您将拥有`gotpacket == 0`. 当您继续编写图像时，您将在某个时候拥有`gotpacket != 0`

我想您也可以尝试通过为帧传递 NULL 来刷新编码器。我没有尝试过这个想法。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:16:52.707

我发现增加 pFrame 中的 pts（在每次编码之后）可以解决这个问题。

```
pFrame->pts += av_rescale_q(1, video_st->codec->time_base, video_st->time_base); 
```

其中 video_st 是输出流。

# jquery - 这个表单验证和 AJAX 提交有什么问题？

> ID：11180073
> 
> 赞同：0
> 
> 时间：2012-06-24T18:25:55.017
> 
> 标签：jquery

我的站点上有一个简单的表单，它通过 Ajax 向它发送数据，然后向下滑动一条消息。发送工作正常，消息向下滑动，但验证部分不起作用。如果用户根本没有向该字段填写任何内容，我希望它显示警报。

这是整个代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Coming Soon!</title>

        <!-- Our CSS stylesheet file -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" />
        <link rel="stylesheet" href="assets/css/styles.css" />
        <link rel="stylesheet" href="assets/countdown/jquery.countdown.css" />

        <!--[if lt IE 9]>
          <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!-- JavaScript includes -->
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script src="assets/countdown/jquery.countdown.js"></script>
        <script src="assets/js/script.js" charset="UTF-8"></script>
        <script>

        $(function() {
    $(".submit").click(function() {
      var sposti = $("input#sposti").val();
        if (sposti == "") {
        alert ('Kirjoita nyt jotain herranjestas tuohon!');
        return false;
      }
var dataString = $('#formi').serialize();
  //alert (dataString);return false;
  $.ajax({
    type: "POST",
    url: "mailer.php",
    data: dataString,
    success: function() {
     $("#thanks").slideDown('slow');
    }   

  });
  return false;

    });
  });

        </script>

</head>

    <body>
    <div id="thanks" style="width:100%; height:100px; background:url('../img/page_bg_center.jpg') no-repeat center center;
    position:absolute; top:0px; border-bottom:2px solid black; text-align:center; display:none;"><span style="position:absolute; top:30px;">Kiitos! Saat tiedon kun sivusto avautuu :)</span></div>

        <div id="countdown"></div>

        <p id="note"></p>
        <p style="text-align:center; color:#666666; text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.3);">Haluatko tiedon kun sivusto aukeaa? Anna s&auml;hk&ouml;postisi alle.<br><br></p>
  <form action="#" method="post" style="text-align:center;" id="formi">
        <input type="email" name="sposti">&nbsp;<input type="submit" class="submit" style="width:50px;">
    </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:30:01.660

您正在使用选择器`$("input#sposti")`。但是，您没有 id 为“sposti”的元素；将元素的*id*设置为 'spotsi' 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:30:21.483

很好。`$.trim`你错过了这里的一件事

```
if ($trim(sposti) == "") 
```

因为如果有人`spacebar`输入电子邮件，它就会放手

并替换 sjhonny`name="sposti"`提到`id="sposti"`的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:47:12.347

替换`var sposti = $("input#sposti").val();`为`var sposti = $.trim($("input#sposti").val());`以删除输入中的空格。

# android - 列表视图中的图像视图

> ID：11180077
> 
> 赞同：0
> 
> 时间：2012-06-24T18:26:43.077
> 
> 标签：android, listview, imageview, listactivity

我正在尝试插入图像`ListView`，当我单击它以在新的图像视图（更大的视图）中显示图像时。

我没有 Android 手机来执行我的应用程序。

这是我的 ImageViewer 类。

```
public class ImageViewer extends ListActivity {

   Uri uri;
   Cursor c;
   ListView l;
   ArrayList<String> al1 = new ArrayList<String>();
   ArrayList<String> al2 = new ArrayList<String>();
   int data, dname;
   String dt, disnam, imgid;
   int id;
   String type;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      // TODO Auto-generated method stub
      super.onCreate(savedInstanceState);

      uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
      String project[] = {MediaStore.Images.Media.DISPLAY_NAME, MediaStore.Images.Media.DATA,
            MediaStore.Images.Media._ID};
      c = getContentResolver().query(uri, project, null, null, null);
      data = c.getColumnIndex(MediaStore.Images.Media.DATA);
      dname = c.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME);
      id = c.getColumnIndex(MediaStore.Images.Media._ID);

      if (c.moveToFirst()) {
         do {
            dt = c.getString(data);
            disnam = c.getString(dname);
            imgid = c.getString(id);
            al1.add(dt);
            al2.add(disnam);
         } while (c.moveToNext());
      }
      l = getListView();
      l.setAdapter(new MyAdapter());
      l.setOnItemClickListener(new OnItemClickListener() {

         @Override
         public void onItemClick(
               AdapterView<?> arg0,
               View arg1, int arg2, long arg3
         ) {

            String filename = al1.get(arg2);
            Intent intent = new Intent(ImageViewer.this, Viewer.class);
            intent.putExtra("image2view", filename);
            intent.putExtra("type", type);
            intent.putExtra("id", id);
            startActivity(intent);
         }
      });
   }

   public class MyAdapter extends BaseAdapter {

      @Override
      public int getCount() {
         // TODO Auto-generated method stub
         return 0;
      }

      @Override
      public Object getItem(int arg0) {
         // TODO Auto-generated method stub
         return null;
      }

      @Override
      public long getItemId(int arg0) {
         // TODO Auto-generated method stub
         return 0;
      }

      @Override
      public View getView(int pos, View convertview, ViewGroup vg) {
         // TODO Auto-generated method stub

         View row = convertview;
         if (row == null) {
            LayoutInflater inf = getLayoutInflater();
            row = inf.inflate(R.layout.image, vg, false);
         }

         TextView filename = (TextView) row.findViewById(R.id.ImageName);
         filename.setText(al2.get(pos) + "\n");

         ImageView thumbs = (ImageView) row.findViewById(R.id.Thumb);
         thumbs.setImageResource(id);
         thumbs.setScaleType(ImageView.ScaleType.CENTER_CROP);
         thumbs.setPadding(8, 8, 28, 8);

         return row;
      }
   }
} 
```

这是我的查看器类，它必须全屏显示所选图像。

```
public class Viewer extends Activity{

    ImageView iv;
    TextView tv;
    public void onCreate(Bundle b1){
        super.onCreate(b1);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        setContentView(R.layout.imageview);
                System.gc();

        Bundle b2=getIntent().getExtras();
        //String file=b2.getString("image2view");
        int id=b2.getInt("id");

        iv=(ImageView)findViewById(R.id.imageView101);
        iv.setImageResource(id);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                R.layout.help_title);
        ImageView iv = (ImageView) findViewById(R.id.header);
        iv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new Intent();
                setResult(RESULT_OK);
                finish();
            }
        });
    }
} 
```

用于`ImageViewer`类的 xml 文件是 image.xml。

```
<RelativeLayout 
    android:id="@+id/RelativeLayout02" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="@drawable/mainbkgnd" 
    xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageView
        android:id="@+id/Thumb"
        android:layout_width="50dp"
        android:layout_height="70dp"
        android:src="@drawable/ic_launcher"/>

    <TextView 
        android:layout_width="wrap_content" 
        android:layout_toRightOf="@+id/Thumb" 
        android:layout_height="wrap_content" 
        android:id="@+id/ImageName"
        android:text="Image Name"
        android:textColor="#000000">
    </TextView>

</RelativeLayout> 
```

Viewer 类的 xml 代码是 imageview.xml。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
    android:id="@+id/itextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:visibility="gone" />

    <ImageView
        android:id="@+id/imageView101"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.62"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

我搜索但找不到合适的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:56:44.067

我不相信这个`id`：

```
id=c.getColumnIndex(MediaStore.Images.Media._ID); 
```

是否适合以下资源`id`：

```
iv.setImageResource(id); 
```

您应该可以在查看器的 onCreate() 中执行此操作：

```
String filename = b2.getString("filename");
if(filename != null)
    iv.setImageUri(Uri.fromFile(new File(filename))); 
```

# java - 拆分文件 - Java/Linux

> ID：11180078
> 
> 赞同：3
> 
> 时间：2012-06-24T18:26:52.313
> 
> 标签：java, linux

我有一个包含近 2.5 亿个字符的大文件。现在，我想将其拆分为每个包含 3000 万个字符的部分（因此前 8 个部分将包含 3000 万个字符，最后一部分将包含 1000 万个字符）。另一点是我想在下一部分的开头包含每个文件的最后 1000 个字符（意味着第 1 部分的最后 1000 个字符附加在第 2 部分的开头 - 所以，第 2 部分包含 3000 万个 1000 个字符，依此类推）。任何人都可以帮助我如何以编程方式（使用Java）或使用Linux命令（以快速方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:10:37.707

一种方法是使用常规的 unix 命令来拆分文件，并在前一个文件中添加最后 1000 个字节。

首先拆分文件：

```
split -b 30000000 inputfile part. 
```

然后，对于每个部分（忽略最远的创建一个新文件，该文件从上一个文件的最后 1000 个字节开始：

```
unset prev
for i in part.*
do if [ -n "${prev}" ]
  then 
    tail -c 1000 ${prev} > part.temp
    cat ${i} >> part.temp
    mv part.temp ${i}
  fi
  prev=${i}
done 
```

在组装之前，我们再次遍历文件，忽略第一个并丢弃前 1000 个字节：

```
unset prev
for i in part.*
do if [ -n "${prev}" ]
  then 
    tail -c +1001 ${i} > part.temp
    mv part.temp ${i}
  fi
  prev=${i}
done 
```

最后一步是重新组装文件：

```
cat part.* >> newfile 
```

由于没有解释为什么需要重叠，我只是创建了它，然后把它扔掉了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:28:56.227

只需使用适当的选项[split](http://www.computerhope.com/unix/usplit.htm)或[csplit](http://www.computerhope.com/unix/ucsplit.htm)命令。

您可能希望使用更复杂的 shell 脚本或使用其他脚本语言来驱动这些程序，为它们提供适当的参数（特别是处理您的重叠需求）。也许您可以将它们与其他实用程序（如`grep`or `head`or `tail`or or `sed`or `awk`etc....）结合使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T19:25:25.573

你可以试试这个。我必须第一次使用读取/模式，因为文件一开始不存在。您可以按照此代码的建议使用只读。

```
long start = System.nanoTime();
long fileSize = 3200 * 1024 * 1024L;
FileChannel raf = new RandomAccessFile("deleteme.txt", "r").getChannel();
long midPoint = fileSize / 2 / 4096 * 4096;
MappedByteBuffer buffer1 = raf.map(FileChannel.MapMode.READ_ONLY, 0, midPoint + 4096);
MappedByteBuffer buffer2 = raf.map(FileChannel.MapMode.READ_ONLY, midPoint, fileSize - midPoint);
long time = System.nanoTime() - start;
System.out.printf("Took %.3f ms to map a file of %,d bytes long%n", time / 1e6, raf.size()); 
```

这是在具有 4 GB 内存的 Window 7 x64 机器上运行的。

```
Took 3.302 ms to map a file of 3,355,443,200 bytes long 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T18:59:02.937

您可以使用 BreakIterator 类及其静态方法 getCharacterInstance() 来完成。它为默认语言环境的字符中断返回一个新的 BreakIterator 实例。

您还可以使用 getWordInstance()、getLineInstance().. 来分词、换行...等

例如：

```
BreakIterator boundary = BreakIterator.getCharacterInstance();

boundary.setText("Your_Sentence");

int start = boundary.first();

int end = boundary.next(); 
```

`Iterate over it... to get the Characters....`

`For more detail look at this link:`

[http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html](http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html)

# c# - 分词算法分为前缀词干和后缀

> ID：11180082
> 
> 赞同：0
> 
> 时间：2012-06-24T18:27:07.700
> 
> 标签：c#, algorithm, split

我有一个问题，我需要将输入字符串拆分为可能的`Prefix`,`Stem`和`Suffix`.

规则是：

`Prefix`= 0-4 个字符

`Stem`= 1-* 个字符

`Suffix`= 0-6 个字符。

假设我输入了“wbAlErbyp”，因此需要对其进行拆分（示例不完整）：

有什么想法可以实现这一目标吗？

![在此处输入图像描述](../Images/c0c1217898cf612381930c743f11d485.png)

编辑 1：

好的，这是我的旧解决方案（它很长且不专业），我不再理解它并想重新设计。

```
 public static List<string> GetMatches(string inputTextArabic)
    {
        // store matches/results here
        List<string> results = new List<string>();

        char[] arabicChars = inputTextArabic.ToCharArray();

        // convert all the arabic chars from array
        // into latin chars in array
        string latString = "";
        for (int i = 0; i < arabicChars.Length; i++)
        {
            switch (arabicChars[i])
            {
                #region ARABIC TO LATIN TABLE
                case 'ا':
                    latString += "A";
                    break;
                case 'آ':
                    latString += "|";
                    break;
                case 'ؤ':
                    latString += "&";
                    break;
                case 'ئ':
                    latString += "}";
                    break;
                case 'أ':
                    latString += ">";
                    break;
                case 'إ':
                    latString += "<";
                    break;
                case 'ء':
                    latString += @"\";
                    break;
                case 'ب':
                    latString += "b";
                    break;
                case 'ت':
                    latString += "t";
                    break;
                case 'ة':
                    latString += "p";
                    break;
                case 'ث':
                    latString += "v";
                    break;
                case 'ج':
                    latString += "j";
                    break;
                case 'ح':
                    latString += "H";
                    break;
                case 'خ':
                    latString += "x";
                    break;
                case 'د':
                    latString += "d";
                    break;
                case 'ذ':
                    latString += "*";
                    break;
                case 'ر':
                    latString += "r";
                    break;
                case 'ز':
                    latString += "z";
                    break;
                case 'س':
                    latString += "s";
                    break;
                case 'ش':
                    latString += "$";
                    break;
                case 'ص':
                    latString += "S";
                    break;
                case 'ض':
                    latString += "D";
                    break;
                case 'ط':
                    latString += "T";
                    break;
                case 'ظ':
                    latString += "Z";
                    break;
                case 'ع':
                    latString += "E";
                    break;
                case 'غ':
                    latString += "g";
                    break;
                case 'ـ':
                    latString += "_";
                    break;
                case 'ف':
                    latString += "f";
                    break;
                case 'ق':
                    latString += "q";
                    break;
                case 'ك':
                    latString += "k";
                    break;
                case 'ل':
                    latString += "l";
                    break;
                case 'م':
                    latString += "m";
                    break;
                case 'ن':
                    latString += "n";
                    break;
                case 'ه':
                    latString += "h";
                    break;
                case 'و':
                    latString += "w";
                    break;
                case 'ى':
                    latString += "Y";
                    break;
                case 'ي':
                    latString += "y";
                    break;
                case 'ً':
                    latString += "F";
                    break;
                case 'ٌ':
                    latString += "N";
                    break;
                case 'ٍ':
                    latString += "K";
                    break;
                case 'َ':
                    latString += "a";
                    break;
                case 'ُ':
                    latString += "u";
                    break;
                case 'ِ':
                    latString += "i";
                    break;
                case 'ّ':
                    latString += "~";
                    break;
                case 'ْ':
                    latString += "o";
                    break;
                #endregion
            }
        }

        // loop thru different stem sizes
        // stem is 1-*
        int lenWord = latString.Length;
        for (int lenStem = 1; lenStem <= lenWord; lenStem++)
        {

            // set max prefix size, strd is 4 but could be
            // less depending on word size
            int lenPrefMax = 4;
            if (lenWord - lenStem < lenPrefMax)
            {
                lenPrefMax = lenWord - lenStem;
            }

            // loop thru different prefix sizes
            // based on the max above
            for (int lenPref = 0; lenPref <= lenPrefMax; lenPref++)
            {
                // set suffix max, std is 6, but could be
                // less depending on word size
                int lenSuffMax = 6;
                if (lenWord - lenStem - lenPref < lenSuffMax)
                {
                    lenSuffMax = lenWord - lenStem - lenPref;
                }

                // loop thru different suffix sizes
                // based on the max above
                for (int lenSuff = 0; lenSuff <= lenSuffMax; lenSuff++)
                {
                    // if sum of parts doesnt equal word size
                    // it means its not a proper match, thus skip
                    if (lenPref + lenStem + lenSuff < lenWord)
                        continue;

                    // otherwise, these are the possible word bits
                    string prefix = latString.Substring(0, lenPref);
                    string stem = latString.Substring(lenPref, lenStem);
                    string suffix = latString.Substring(lenPref + lenStem, lenSuff);

                    // now see if they all exist in the relevant places
                    List<WordBit> prefMatches = (from x in prefixes where x.NoVowels == prefix select x).Distinct().ToList();
                    List<WordBit> stemMatches = (from x in stems where x.NoVowels == stem select x).Distinct().ToList();
                    List<WordBit> suffMatches = (from x in suffixes where x.NoVowels == suffix select x).Distinct().ToList();

                    if (!(prefMatches.Count > 0 && stemMatches.Count > 0 && suffMatches.Count > 0))
                        break;                          

                    // Now that they are found, see if they go together
                    // For each prefix, loop through every stem
                    foreach(WordBit prefMatch in prefMatches)
                    {                       
                        // for each stem, loop through all suffixes
                        foreach (WordBit stemMatch in stemMatches)
                        {
                            // Now we know there is a prefix, suffix and stem
                            foreach (WordBit suffMatch in suffMatches)
                            {
                                // get their types
                                string prefType = prefMatch.Type;
                                string stemType = stemMatch.Type;
                                string suffType = suffMatch.Type;

                                // find out if the types are compatible
                                bool prefStemConnects = (from x in prefixStemConns where x.Type1 == prefType && x.Type2 == stemType select x).Count() > 0;
                                bool stemSuffConnects = (from x in stemSuffixConns where x.Type1 == stemType && x.Type2 == suffType select x).Count() > 0;
                                bool prefSuffConnects = (from x in prefixSuffixConns where x.Type1 == prefType && x.Type2 == suffType select x).Count() > 0;

                                // they all connect
                                // we have found a match!
                                if (prefStemConnects && stemSuffConnects && prefStemConnects)
                                {

                                    Match match = new Match();
                                    //match.MatchMeaning = "";

                                    // 1\. prefix
                                    // 2\. stem
                                    // 3\. 
                                //takeplusesout
                                    match.MatchMeaning = match.RootMeaning = Regex.Match(stemMatch.Extra, @"^.*?(?=\s\s|$)").ToString();

                                    // [fem.sg.] = I 

                                    match.SuffixInfo = Regex.Match(suffMatch.Extra, @"^.*?(?=\s\s)").ToString();
                                    if (match.SuffixInfo != "")
                                    {
                                        if (match.SuffixInfo.Contains("<verb>"))
                                        {
                                            match.MatchMeaning = match.SuffixInfo.Replace("<verb>", match.RootMeaning);
                                            match.SuffixInfo = "";
                                        }
                                        else
                                        {
                                            match.MatchMeaning = match.MatchMeaning + " " + match.SuffixInfo;
                                        }
                                    }

                                    // Get 1st part of prefix
                                    match.PrefixInfo = Regex.Match(prefMatch.Extra, @"^.*?(?=\s|\s\s|$)").ToString();
                                    if (match.PrefixInfo != "")
                                    {
                                        match.MatchMeaning = match.PrefixInfo + " " + match.RootMeaning + " " + match.SuffixInfo;
                                    }

                                    //results.Add(prefMatch.Extra + "--" + stemMatch.Extra + "--" + suffMatch.Extra);
                                    //if (beforeMeaning != "")
                                    //   beforeMeaning += " ";

                                    results.Add(match.MatchMeaning);

                                    Debug.Print("_____________________________________________________________________________________");
                                    Debug.Print(prefMatch.NoVowels + "\t\t" + prefMatch.Vowels + "\t\t" + prefMatch.Type + "\t\t" + prefMatch.Extra);
                                    Debug.Print(stemMatch.NoVowels + "\t\t" + stemMatch.Vowels + "\t\t" + stemMatch.Type + "\t\t" + stemMatch.Extra);
                                    Debug.Print(suffMatch.NoVowels + "\t\t" + suffMatch.Vowels + "\t\t" + suffMatch.Type + "\t\t" + suffMatch.Extra);
                                    Debug.Print("______________________________________________________________________________________");
                                }
                            }
                        }
                    }
                }
            }
        }

        return results;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:34:02.293

只需构建两个嵌套循环，迭代所有可能的前缀和后缀长度。

```
string s="wbAlErbyp";

const int maxPrefixLength = 4;
const int maxSuffixLength = 6;
const int minStemLength = 1;

for(int prefixLength = 0; (prefixLength + minStemLength <= s.Length) && (prefixLength<=maxPrefixLength); prefixLength++)
    for(int suffixLength = 0; (suffixLength + prefixLength + minStemLength <= s.Length) && (suffixLength<=maxSuffixLength); suffixLength++)
    {
        string prefix = s.Substring(0, prefixLength);
        string suffix = s.Substring(s.Length-suffixLength);
        string stem   = s.Substring(prefixLength, s.Length-suffixLength-prefixLength);
        Console.WriteLine("{0} {1} {2}",prefix,stem, suffix);
    } 
```

# matlab - Matlab GUI，带有字符输出的滑块

> ID：11180084
> 
> 赞同：1
> 
> 时间：2012-06-24T18:27:28.817
> 
> 标签：matlab, user-interface, slider, serial-port, matlab-guide

我想让一个 GUI 有一个滑块，这个滑块的值将用于将串行数据传输到 PIC 单片机。

滑块的输出值必须是字符或字符串。

1.  如何在matlab gui中定义输入代码变量？

2.  我怎么知道滑块的输出值的类型？（整数，字符，...）

代码：

```
s=serial('COM7');
slider_value = get(handles.slider3, 'value');
fopen(s);
fprintf(s,'%s',slider_value);
fclose(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:47:15.860

有用信息： http: [//www.mathworks.se/help/techdoc/ref/uicontrol_props.html](http://www.mathworks.se/help/techdoc/ref/uicontrol_props.html)。

属性的类型`Value`是它当前拥有的标量值。该值将分别介于0`Min`和`Max`1 之间，默认为 1。您是否将这些设置为其他值？标量值可能是双重表示，因此您需要转换为字符串：

把它放在你的初始化部分（一个从 0 到 100 的滑块）：

```
set(handles.slider3, 'Min', 0); %set min to 0 (default)
set(handles.slider3, 'Max', 100); %set min to 100 (default)
set(handles.slider3, 'SliderStep', [1 10]); 
```

这在你的回调例程中：

```
s = serial('COM7');
slider_value = get(handles.slider3, 'Value');
fopen(s);
fprintf(s, '%u', uint32(slider_value));
fclose(s) 
```

以上只是一个例子。您应该将`Min`、`Max`和设置`SliderStep`为您想要的。在我一开始链接到的 UIcontrol 属性文档中找到相关部分。您还应该注意，我将数据作为无符号 32 位值（不是重铸）发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:42:12.310

一般来说，滑块的输出值将具有 int 类型。由于滑块的性质，我期望一个 int ，您在其中滑动以某种增加/减少的数字。

您还可以使用 matlab 中的 'class()' 函数来确定变量的类。

此外，您可以通过在滑块的回调例程中指定滑块来使滑块为您提供所需的任何输出。

# html - 使用 Jade/Express.js 渲染表格，每行有多个元素

> ID：11180096
> 
> 赞同：3
> 
> 时间：2012-06-24T18:28:36.883
> 
> 标签：html, node.js, express, html-table, pug

我正在尝试使用简单对象数组中的玉来渲染表格。但不是简单地为每个对象渲染一行，我想在每一行上渲染三个对象。

```
<table>
  <thead>...</thead>
  <tbody>
    <tr>
      <td>obj0</td>
      <td>obj1</td>
      <td>obj2</td>
    </tr>
    <tr>
      <td>obj3</td>
      <td>obj4</td>
      <td>obj5</td>
    </tr>
    ...
  </tbody>
</table 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-15T20:55:20.000

接受的答案在技术上是有效的，但我不喜欢你必须构建数据才能使逻辑有效。我认为逻辑应该容纳数据。因此，我想出了这个：

```
objects = [obj0, obj1, obj2, obj3, obj4, obj5]

table
  thead
  tbody
    - var columns = 3
    - for (var i = 0; i < objects.length; i=i+columns)
      tr
        - for (var j = 0; j < columns && i+j < objects.length; j++)
          td=objects[i+j] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T18:41:57.343

```
objects = [[obj0, obj1, obj2], [obj3, obj4, obj5]]

table
  thead
  tbody
  for object in objects
    tr
      for subobject in object
        td= subobject 
```

# ruby-on-rails - 类别中的 NoMethodError#index 未定义方法“model_name”用于 NilClass:Class

> ID：11180098
> 
> 赞同：0
> 
> 时间：2012-06-24T18:28:37.860
> 
> 标签：ruby-on-rails, haml

好的，已经盯着这个看了两个小时了。

我正在views/categories/index.html.haml中的HAML中尝试一个空表单

```
=form_for @categories do |f|
  =f.submit 
```

我的 categories_controller.rb 看起来像......

```
class CategoriesController < ApplicationController
  # GET /categories
  # GET /categories.json
  def index
    @categories = Category.all

    respond_to do |format|
      format.html # index.html.haml
      format.json { render json: @categories }
    end
  end
end 
```

我得到了......类别中的 NoMethodError #index 未定义方法 `model_name' for NilClass:Class

我知道这很容易，但我现在的想法很混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:23:05.250

您必须使用`form_for`特定模型的方法，而不是它们的数组，例如：

```
- @categories.each do |category|
    = form_for category do |f|
        = f.submit 
```

您的错误似乎是在向您显示您的类别表中没有任何记录。否则抱怨会有所不同:-)

# c# - 在至少一个对象中必须实现接口 IComparable

> ID：11180102
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:28:57.130
> 
> 标签：c#

```
class Program
{
    public class Pokemon
    {
        public string Name;
        public int Weight;
    }

    public class myReverserClass : IComparer
    {

        // Calls CaseInsensitiveComparer.Compare with the parameters reversed.
        int IComparer.Compare(Object x, Object y)
        {
            return ((new CaseInsensitiveComparer()).Compare(x, y));
        }
    }

    static void Main(string[] args)
    {
        IComparer myComparer = new myReverserClass();

        Random r = new Random();

        string[] pokemons = new string[10];
        pokemons[0] = "Bulbasaur";
        pokemons[1] = "Charmander";
        pokemons[2] = "Squirtle";
        pokemons[3] = "Groulit";
        pokemons[4] = "Caterpie";
        pokemons[5] = "Weedle";
        pokemons[6] = "Kakuna";
        pokemons[7] = "Beedrill";
        pokemons[8] = "Pidgey";
        pokemons[9] = "Rattata";

        string[] sovpad = new string[10];
        Pokemon[] pokemon = new Pokemon[10];

        for (int i = 0; i < pokemons.Length; i++)
        {
            string sovpadtrue;
            sovpadtrue = pokemons[r.Next(0, pokemons.Length)];
            for(int p = 0; p<sovpad.Length;p++)
            {
                if(sovpadtrue == sovpad[p])
                {
                    sovpadtrue = pokemons[r.Next(0, pokemons.Length)];
                    p = -1;
                }
            }
            sovpad[i] = sovpadtrue;
            pokemon[i] = new Pokemon();
            pokemon[i].Name = sovpadtrue;
            pokemon[i].Weight = r.Next(10, 1000);
        }
        Array.Sort(pokemon,myComparer);

        Console.ReadLine();
    }
} 
```

如何添加一个类 myReverserClass，对一组口袋妖怪进行排序，首先按名称，然后按重量？错误：至少有一个对象必须实现接口 IComparable。仅对一维数组的 Msdn 示例。而 myReverserClass 取自 msdn。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:34:59.577

[`CaseInsensitiveComparer.Compare`](http://msdn.microsoft.com/en-us/library/system.collections.caseinsensitivecomparer.compare.aspx)文档包括：

> 如果 a 和 b 都是字符串，则此方法使用 CompareInfo.Compare 比较忽略大小写的字符串；否则，它使用任一对象的 IComparable 实现。也就是说，如果 a 实现了 IComparable，则此方法返回 a 的结果。比较（b）；否则，如果 b 实现 IComparable，则返回 b 的否定结果。比较（一）。

在例外情况下：

> ArgumentException：a 和 b 均未实现 IComparable 接口。

在这种情况下，您正在比较两个`Pokemon`对象，并且`Pokemon`没有实现`IComparable`- 因此是例外。

最好使用*通用*比较，并编写一个实现`IComparer<Pokemon>`. 例如：

```
public class PokemonReverseNameComparer : IComparer<Pokemon>
{
    public int Compare(Pokemon x, Pokemon y)
    {
        return StringComparer.OrdinalIgnoreCase.Compare(y.Name, x.Name);
    }
} 
```

请注意，在这里我*实际上*颠倒了参数顺序 - 而您在评论中*声称*这样做，但实际上仍然调用`Compare(x, y)`. （但这并没有做重量部分 - 重要的是你一次理解一个部分......）

就我个人而言，我会以不同的方式处理事情，将反转与“按名称比较”部分分开，我也会尝试使用 LINQ，但那是另一回事。LINQ 让它变得*非常*简单——例如：

```
var ordered = pokemon.OrderByDescending(p => p.Name)
                     .ThenBy(p => p.Weight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:53:43.377

除了 Jon Skeet 的建议，您还可以这样做：

```
Array.Sort(
    pokemon,
    (pokemon1, pokemon2) => {
        // NOTE: Reverse arguments if you want reverse order.
        int result = string.Compare(pokemon1.Name, pokemon2.Name, true);
        if (result != 0)
            return result;
        if (pokemon1.Weight < pokemon2.Weight)
            return -1;
        if (pokemon1.Weight > pokemon2.Weight)
            return 1;
        return 0;
    }
); 
```

`Array.Sort<T>(T[], Comparison<T>)`这使用（而不是接受的重载）对数组进行就地排序（与 LINQ 不同`IComparer`）。

# python - AutoKey Python - How do I create a global function library

> ID：11180103
> 
> 赞同：2
> 
> 时间：2012-06-24T18:28:59.583
> 
> 标签：python, namespaces, autokey

I'm using [AutoKey](http://code.google.com/p/autokey/) (not AutoHotKey), and I'm noticing that multiple scripts are using the same python functions I've created. Up until now, I've just been defining the same function in each script that uses it. However, if I have to go back and modify that function, I have to remember each script that uses, and make those modifications for each.

Using AutoKey, how would I have (custom) global function library, that I'd be able to import into each script, so I'll have a centralized place for propagating function modifications to all scripts?

I've just begun using python (because AutoKey uses it for its scripting engine), so I'm not sure how I'd create my own namespace and I'm also not sure how I'd import a custom library into my AutoKey python scripts. Where would I place the code-file? What would the syntax be inside the file that will be encapsulating my function definitions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-20T18:30:42.140

Using recent AutoKey versions, you can set the preference "User Module Folder" in the "Script Engine" tab to a folder of your liking.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:57:08.153

You could write a module and put it in the `Lib\site-packages` folder of Python.

For example, with this:

```
def foo():
    print("foo called") 
```

stored as `C:\Python32\Lib\site-packages\foo.py`:

```
>>> import foo
>>> foo.foo()
foo called 
```

# javascript - Javascript 用数组和正则表达式替换方法

> ID：11180116
> 
> 赞同：0
> 
> 时间：2012-06-24T18:30:33.107
> 
> 标签：javascript, regex

我如何用 '' 替换除 0-9 az 和某些字符数组之外的任何字符（什么都没有）。

我的代码看起来像这样

```
Var pCharArray = ['l', 'o', 'c'];//local characters
Var stringOrginal = 'Some Text';
stringOrginal.replace(/(^[0-9][a-z]pCharArray)/g, ''); 
```

应该删除每个不是 0-9 且不是 az且不在**pCharArray中的字符****。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:33:05.193

你可以使用这个：

```
stringOrginal.replace(new RegExp("[^0-9a-z" + pCharArray.join('')+"]", 'g'), ""); 
```

笔记：

```
Var => var (lowercase) 
```

[**现场演示**](http://jsfiddle.net/YEza7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T18:34:34.197

^ 字符仅在字符类内部使用时表示否定，即 [^a] 表示除 a 之外的任何字符。当它在字符类之外使用时，它意味着字符串的开头。

正确代码：

```
stringOrginal.replace(new RegExp("[^0-9a-z"+pCharArray.join('')+"]", 'g'), ''); 
```

另请注意，如果您想在 pCharArray 数组中包含反斜杠或右括号，您应该分别在此处将它们声明为 '\\' 和 '\]'。

# c++ - 如何为 waitKey() 动态分配延迟值以便获得正确的 fps？

> ID：11180123
> 
> 赞同：1
> 
> 时间：2012-06-24T18:31:59.737
> 
> 标签：c++, opencv

我有一个视频，我想处理帧。

```
VideoCapture capture("movie.mpg");

while(true) {
  Mat frame;
  capture >> frame;

  // This may take some time to finish
  processFrame(frame);

  if (waitKey(80) == 'q')
    break;
} 
```

问题是，使用硬编码延迟`waitKey(80)`会导致视频的 fps 不正确。例如，上面的代码尝试以每秒 12 帧的速度显示视频，但如果`processFrame()`需要一些时间才能完成，则 fps 会降低，视频看起来会滞后。

我需要在这里对延迟值进行一些计算。您如何动态分配值以使 fps 保持在 12？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:33:55.260

您可以通过查询捕获接口来检索视频的实际[FPS ：](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-videocapture-get)

```
double fps = capture.get(CV_CAP_PROP_FPS); 
```

并且您还可以使用 发现视频中的总帧数`CV_CAP_PROP_FRAME_COUNT`。

有了这些信息，您可以进行简单的计算并找出确切的延迟时间。

# r - 重复一个重复的序列

> ID：11180125
> 
> 赞同：20
> 
> 时间：2012-06-24T18:32:00.847
> 
> 标签：r, sequence, replicate

我们希望得到一个如下所示的数组：

```
1,1,1,2,2,2,3,3,3,4,4,4,1,1,1,2,2,2,3,3,3,4,4,4,1,1,1,2,2,2,3,3,3,4,4,4 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-24T21:20:29.047

你可以通过一个`rep`电话来做到这一点。`each`和参数在先完成的情况`times`下按顺序进行评估`each`。

```
rep(1:4, times=3, each=3)  # 'each' done first regardless of order of named parameters
#[1] 1 1 1 2 2 2 3 3 3 4 4 4 1 1 1 2 2 2 3 3 3 4 4 4 1 1 1 2 2 2 3 3 3 4 4 4 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-24T18:42:28.287

或者，更简单（假设你的意思是一个向量，而不是一个数组）

```
rep(rep(1:4,each=3),3) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-06-20T15:56:43.907

如果您的数字序列递增 1，则 42- 的答案将起作用。但是，如果您想包含按设定间隔增加的数字序列（例如，从 0 到 60 乘 15），您可以这样做：

```
rep(seq(0,60,15), times = 3)
[1]  0 15 30 45 60  0 15 30 45 60  0 15 30 45 60 
```

你只需要改变你想要重复的次数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T18:39:38.630

像这样：

```
rep(sapply(1:4, function(x) {rep(x, 3)}), 3) 
```

rep(x, N) 返回一个重复 x N 次的向量。sapply 将给定函数分别应用于向量 1:4 的每个元素，连续重复每个元素 3 次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-01T20:20:55.997

这是一种使用数组操作的方法`aperm`。这个想法是构造一个包含值的数组。重新排列它们，使它们使用 匹配所需的输出`aperm`，然后使用“展开”数组`c`。

```
c(aperm(array(1:4, dim=c(4,3,3)), c(2, 1, 3)))
 [1] 1 1 1 2 2 2 3 3 3 4 4 4 1 1 1 2 2 2 3 3 3 4 4 4 1 1 1 2 2 2 3 3 3 4 4 4 
```

# php - 重写 URL .htaccess, mod_rewrite - “找不到目录”

> ID：11180127
> 
> 赞同：1
> 
> 时间：2012-06-24T18:32:13.530
> 
> 标签：php, .htaccess, mod-rewrite

我正在重写 url，所以我的会员页面 - domain.com/profile.php?id=123 变为 domain.com/user/John

如果有人尝试访问 domain.com/user，Web 浏览器会显示找不到目录。有没有办法让这个目录“真实”，而不添加文件夹和索引文件？在 .htaccess 文件中？

当我调用一些脚本时，firebug 会警告我该目录也不存在。

这是重写规则和整个 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301]
</IfModule>

RewriteRule ^user/([^/\.]+)/?$ profile.php?username=$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:37:34.833

您是否在您的 URL 中放置`http://`在“domain.com”之前？

如果您未指定协议，您的服务器将尝试查找文件路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:29:08.933

> > “如果 user/ 提交后没有用户名，应该呈现什么？”
> 
> 真的没关系。回根我猜。

然后专门为此编写规则：

```
RewriteRule ^user/?$ / [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T20:28:59.397

你的帖子已经一年了，你仍然救了我，三天我一直在寻找一个解决方案，为什么它不会读取我的斜线，而是它可以读取任何其他字符你得到 404 用户/ “文件夹”，因为你没有任何规则适用于它后面没有用户名... – poncha 2012-06-24 18:41:47

# python - 如何将文本小部件的一部分标记为只读？

> ID：11180130
> 
> 赞同：5
> 
> 时间：2012-06-24T18:32:27.660
> 
> 标签：python, tkinter, text-widget

如何将 tkinter 文本小部件的一部分标记为只读？也就是说，我希望能够只允许在小部件的某些部分进行编辑。例如，我想只允许在提示之后而不是之前进行编辑，以模拟控制台。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T18:32:27.973

最防弹的解决方案是拦截低级别的插入和删除命令，并在其中放置逻辑以根据某种标准防止插入和删除。例如，您可以禁止在具有“只读”标签的任何文本范围内进行编辑。

这是这种技术的一个例子。它利用了所有插入和删除最终调用底层 tk 小部件命令的`insert`or`delete`子命令的事实，以及小部件命令可以用 Tcl proc 替换的事实。

```
try:
    # python 2.x
    import Tkinter as tk
except ImportError:
    # python 3.x
    import tkinter as tk

class Example(tk.Frame):
    def __init__(self, parent):
        tk.Frame.__init__(self, parent)

        text = ReadonlyText(self)
        sb = tk.Scrollbar(self, orient="vertical", command=text.yview)
        text.configure(yscrollcommand=sb.set)
        sb.pack(side="left", fill="y")
        text.pack(side="right", fill="both", expand=True)

        text.insert("end", "You can edit this line\n")
        text.insert("end", "You cannot edit or delete this line\n", "readonly")
        text.insert("end", "You can edit this, too.")

        text.tag_configure("readonly", foreground="darkgray")

class ReadonlyText(tk.Text):
    '''A text widget that doesn't permit inserts and deletes in regions tagged with "readonly"'''
    def __init__(self, *args, **kwargs):
        tk.Text.__init__(self, *args, **kwargs)

        # this code creates a proxy that will intercept
        # each actual insert and delete. 
        self.tk.eval(WIDGET_PROXY)

        # this code replaces the low level tk widget 
        # with the proxy
        widget = str(self)
        self.tk.eval('''
            rename {widget} _{widget}
            interp alias {{}} ::{widget} {{}} widget_proxy _{widget} 
        '''.format(widget=widget))

WIDGET_PROXY = '''
if {[llength [info commands widget_proxy]] == 0} {
    # Tcl code to implement a text widget proxy that disallows
    # insertions and deletions in regions marked with "readonly"
    proc widget_proxy {actual_widget args} {
        set command [lindex $args 0]
        set args [lrange $args 1 end]
        if {$command == "insert"} {
            set index [lindex $args 0]
            if [_is_readonly $actual_widget $index "$index+1c"] {
                bell
                return ""
            }
        }
        if {$command == "delete"} {
            foreach {index1 index2} $args {
                if {[_is_readonly $actual_widget $index1 $index2]} {
                    bell
                    return ""
                }
            }
        }
        # if we passed the previous checks, allow the command to 
        # run normally
        $actual_widget $command {*}$args
    }

    proc _is_readonly {widget index1 index2} {
        # return true if any text in the range between
        # index1 and index2 has the tag "readonly"
        set result false
        if {$index2 eq ""} {set index2 "$index1+1c"}
        # see if "readonly" is applied to any character in the
        # range. There's probably a more efficient way to do this, but
        # this is Good Enough
        for {set index $index1} \
            {[$widget compare $index < $index2]} \
            {set index [$widget index "$index+1c"]} {
                if {"readonly" in [$widget tag names $index]} {
                    set result true
                    break
                }
            }
        return $result
    }
}
'''

def main():
    root = tk.Tk()
    Example(root).pack(fill="both", expand=True)
    root.mainloop()

if __name__ == "__main__":
    main() 
```

# c++ - 经典的生产者消费者线程

> ID：11180134
> 
> 赞同：2
> 
> 时间：2012-06-24T18:32:49.770
> 
> 标签：c++, multithreading, producer-consumer

在[经典的生产者消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)中。`itemCount == BUFFER_SIZE`当AMD 宕机时再次唤醒时，生产者会睡觉。但是一旦`itemCount`长大，生产者线程就会进入睡眠状态。它怎么知道`itemCount`已经下降并且需要下降`wakeup`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:46:07.870

在伪代码中，生产者类似于：

```
void producer_thread()
{
    while(true)
        queue.push( produce() );
} 
```

所以考虑队列推送方法（我在这里使用了 pthreads，但同样的逻辑也适用于其他库）

```
void SynchronizedQueue::push(Item const &i)
{
    pthread_mutex_lock(&mutex);

    // queue is full, so wait for consumer
    while (queue.size() == BUFFER_SIZE)
        pthread_cond_wait(&condition, &mutex);

    // when we get here, the queue has space
    this->queue.push_back(i);

    // make sure we wake a sleeping consumer
    if (queue.size() == 1)
        pthread_cond_signal(&condition);

    pthread_mutex_unlock(&mutex);
} 
```

以及消费者使用的pop方法：

```
Item SynchronizedQueue::pop()
{
    pthread_mutex_lock(&mutex);

    // wait for something to do
    while (queue.size() == 0)
        pthread_cond_wait(&condition, &mutex);

    // if we get here, we have some work
    Item tmp = queue.front();

    // make sure we wake a sleeping producer
    if (queue.size() == BUFFER_SIZE)
        pthread_cond_signal(&condition)

    queue.pop_front();
    pthread_mutex_unlock(&mutex);
    return tmp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:36:46.283

你需要条件变量。

条件变量的典型用法是：

```
//lock the mutex first!
scoped_lock myLock(myMutex); 

//wait till a condition is met
myConditionalVariable.wait(myLock, CheckCondition);

//Execute this code only if the condition is met 
```

where`CheckCondition`是一个检查条件的函数（或函子）（**例如，何时醒来**）。*当它被虚假*唤醒时，它被`wait()`函数内部调用，如果条件尚未满足，则函数再次休眠。在睡觉之前，*原子地*释放互斥锁。*`wait()``wait()`*

 *** * *

如果您的编译器支持`std::conditional`C++11 引入的，那么您可以查看详细信息：

*   [std::condition_variable（C++11 线程）](http://en.cppreference.com/w/cpp/thread/condition_variable)

如果您的编译器不支持它，并且您使用的是 win32 线程，请查看以下内容：

*   [条件变量（Win32 线程）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052(v=vs.85).aspx)

这是一个完整[的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686903(v=vs.85).aspx)例子。

如果您使用 POSIX 线程，请查看以下内容：

*   [条件变量（POSIX 线程）](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)

* * *

你可以在这里看到我`conditional_variable`使用 win32 原语的实现：

*   [生产者-消费者并发阻塞队列的实现](https://codereview.stackexchange.com/questions/12052/implementation-of-concurrent-blocking-queue-for-producer-consumer)

向下滚动，先看看它的实现，再看看并发队列实现中的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:51:17.503

它不需要知道——当消费者发出信号时，操作系统会唤醒它。在 PC 队列代码中，生产者将对某些 OS 同步原语进行 wait() 调用。在消费者线程腾出空间并向操作系统同步对象发出信号之前，此调用不会返回（除非您的故障操作系统“支持”虚假唤醒），此时等待的生产者线程将准备就绪，如果有可用的核心，立即运行 - wait() 调用将返回。

传统上，PC 队列由一个简单的非线程安全队列、一个用于保护其索引/指针的互斥体和两个信号量构成——一个初始化为 0 以计算队列中的项目，一个初始化为 [队列大小] 以计算空白空间. 生产者在“emptySpace”上等待，当它收到信号时，锁定互斥体，将对象入队，锁定互斥体并发出“itemCount”信号。消费者等待“itemCount”，当它收到信号时，锁定互斥体，使对象出队，锁定互斥体并发出“emptySpace”信号。**

# hive - Hive 查询结果以垂直格式（如 MySQL 的“\G”）？

> ID：11180142
> 
> 赞同：17
> 
> 时间：2012-06-24T18:34:31.870
> 
> 标签：hive

有没有办法让 Hive 以柱状方式输出结果，比如 MySQL 提供的“\G”选项？

[http://dev.mysql.com/doc/refman//5.5/en/mysql-commands.html](http://dev.mysql.com/doc/refman//5.5/en/mysql-commands.html)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-02-06T11:35:27.513

如果你使用 HiveServer2 (Hive > 0.14)，你可以使用 "beeline" shell 并且有 " `vertical`" 选项。

```
0: jdbc:hive2://127.0.0.1:10000> !set outputformat table
0: jdbc:hive2://127.0.0.1:10000> select * from sample_07 limit 1;
+-----------------+------------------------+----------------------+-------------------+
| sample_07.code  | sample_07.description  | sample_07.total_emp  | sample_07.salary  |
+-----------------+------------------------+----------------------+-------------------+
| 00-0000         | All Occupations        | 134354250            | 40690             |
+-----------------+------------------------+----------------------+-------------------+
1 row selected (0.131 seconds)

0: jdbc:hive2://127.0.0.1:10000> !set outputformat vertical                          
0: jdbc:hive2://127.0.0.1:10000> select * from sample_07 limit 1;
sample_07.code         00-0000
sample_07.description  All Occupations
sample_07.total_emp    134354250
sample_07.salary       40690
1 row selected (0.063 seconds)

0: jdbc:hive2://127.0.0.1:10000> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T18:43:34.410

不，蜂巢中没有这样的设施。

map-reduce 程序的结果总是逐行显示。

但是，您可以使用 Hive/Thrift 服务器并通过其他脚本语言（如 python）编写配置单元查询并控制输出的显示。唯一的缺点是您必须解析输出然后显示它。

# c# - c# .cs 文件在 Visual Studio 中的注释中带有 http 相对链接

> ID：11180143
> 
> 赞同：4
> 
> 时间：2012-06-24T18:34:33.093
> 
> 标签：c#, visual-studio, unit-testing, comments

假设我在 Visual Studio 中有以下 C# 项目结构

*   规格
    *   UserStory1.html
    *   UserStory2.html
*   测试
    *   测试1.cs
    *   测试2.cs

现在我想通过以下方式将我的单元测试与用 html 编写的规范连接起来

```
//http://../path.to.UserStory1.html#or_even_some_anchor
[TestFixture]
public class Test1
{
    [Test]
    public void SomeTest()
    {

    }        
} 
```

这样，当我在评论中的链接上按 CTRL+单击时，我可以跳转到规范并查看应该真正测试的内容。问题是我不知道如何对项目中包含的 html 文件进行相对路径。

*   我怎样才能做到这一点？
*   如果不在标准 VS 中，是否有一些可用的插件可以启用此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T17:24:06.217

我认为在您的情况下，[`<see/>`](http://msdn.microsoft.com/en-us/library/acd0tfbe%28v=vs.110%29.aspx)文档标签最有意义，但[其他标签是可用的](http://msdn.microsoft.com/en-us/library/5ast78ax%28v=vs.110%29.aspx)。

这会将您的示例代码更改为以下内容：

```
/// <summary>
/// This test does something
/// </summary>
/// <see cref="http://../path.to.UserStory1.html#or_even_some_anchor"/>
[TestFixture]
public class Test1
{
    [Test]
    public void SomeTest() { }        
} 
```

我用[http://www.google.com](http://www.google.com)进行了测试，它在 VS 的新标签中打开了它。所有这些都内置在 VS 中，无需任何额外的附加组件。

# c++ - 二维向量初始化

> ID：11180146
> 
> 赞同：2
> 
> 时间：2012-06-24T18:34:49.380
> 
> 标签：c++, vector

我放弃了尝试将二维数组传递给函数，其中在编译时维度未知。经过一些研究，二维向量似乎是一个很好的替代品。我只是想确认这是声明维度为 totalRows X totalColumns 的二维向量的正确方法，初始化每个单元格以包含空格字符：

```
vector<vector<char> > world(totalRows, vector<char>(totalColumns, ' ')); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T19:33:11.483

这条线本身应该可以工作并且看起来很好。但让我提供更多信息。

尝试使用标准库是个好主意。话虽如此，您需要了解您脑海中的二维数组图像必须线性存在于内存中。您可以轻松地创建一个 m*n 字符的元素向量（在您的示例中）并将其按行主要索引为 (i*n + j) （感谢从零开始的计数）。

事实上，这就是“二维”数组的工作方式。例如，当你做一个规则的元素数组 -`T[][]`时，如果你尝试将它衰减为一个指针，它将是一个简单的`T*`. 在引擎盖下，内存是连续线性排列的，没有形状，只有一条长街（如计算机所见）。它只是通过使用第一段中的表达式（或类似的表达式）来推断人类所看到的行和列的概念。电脑不在乎。

`vector`是标准库的一个很好的部分，它以签名 C++（而不仅仅是臃肿的 C）的方式封装数组。它的设计使内部数组数据结构的大小调整变得容易，并且随着 C++11 的出现，移动语义可以使调整大小的操作变得更便宜。此外，RAII 的概念也适用于此，在构造函数中仔细初始化数据成员并在析构函数中释放它们的想法使您能够规避**作为用户**的动态内存分配问题，并简单地在堆栈上传播新对象，并在需要时传递引用“退出”他们的范围。

需要注意的一点是`vector`s 创建了一个内部内存块，该数组有时可能会超过实际数组的大小，因为弹出和推送新元素。此外，您不必一开始就定义它的大小，但可以通过 push_back、push_front 等轻松扩展它。这意味着其他事情可以即时更改，并且扩展可能会花费您很多，即使使用移动语义.

偏离矢量的唯一原因是，当您进行一些面向数据的繁重 3D 渲染或模拟，并期望数据以一些非常自定义、特定的方式打包并手动打乱时，整洁`vector`可能不容易允许. 但这会将您推向更底层的裸数组领域（您应该为此做好准备）。您应该从中得到的关键是您可以简单地将“心理二维数组”向量（实际上，数据没有真正的几何形状，这就是我们这些微不足道的人类看待它的方式）作为向量并以不同的方式对它们进行索引。确保您按顺序逐一输入所有行数据，您将获得一个非常简单的布局，可以用 (i*n + j) 简单地探测/索引，其中 [i,j] 是经典的 2D 矩阵下标/索引。

然后，它可能很简单：

```
vector<char> world(totalRows*totalColumns, ' '); 
```

然后你只需通过引用传递它需要去的地方，在你正确推送数据后将其索引为 (i*n + j) 。

您的代码应该可以工作，但是在尝试操作数据、移动数据和编写不必要的东西时，不必要的膨胀可能会引入不必要的心理开销，这比实际使用 i*n+j “手动索引”方法来保持您的心理图景要少得多二维数组/字符矩阵。如果您愿意，您甚至可以重写功能以添加语法糖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T18:46:18.043

您的代码有效。正如评论中所注意到的，`vector<vector<T>>`它并不是真正的二维数组。

这里重要的是`(totalRows, vector<char>(totalColumns, ' '))`和`(totalColumns, vector<char>(totalRows, ' '))`是等价的，只要您始终遵循用于创建向量的规则：（`line x column`或`column x line`）

# asp.net-mvc-3 - 如果是 Index，MVC Url.Action 从 url 末尾修剪动作名称

> ID：11180163
> 
> 赞同：2
> 
> 时间：2012-06-24T18:37:22.820
> 
> 标签：asp.net-mvc-3, url

`Url.Action()`即使动作是，如何强制不从 url 末尾修剪动作名称`Index`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:39:26.660

`action = "Index"`从路由定义中删除默认值 ( )。

# apache - 使用 Zend Studio 的 Subversion 存储库位置

> ID：11180166
> 
> 赞同：0
> 
> 时间：2012-06-24T18:37:43.717
> 
> 标签：apache, svn, ssh, zend-studio

我正在尝试第一次使用 Zend Studio 9 通过 IP 地址找到正确的存储库位置以连接到服务器上的我的 SVN 项目。

我已经设置了存储库`/var/www/accountname/rep`和`/var/www/accountname/web`.

然而，Zend 需要一个`http://`存储库位置的位置，否则我将通过以下方式连接：

```
svn ls svn+ssh://root@xx.xxx.xxx.xx/var/www/accountname/web 
```

*注意：我没有使用具有此 IP 地址的域，并且 /var/www/accountname/web/httpdocs 是公共 html 文件夹。*

但是，如果我将`http://xx.xxx.xxx.xx/var/www/accountname/web`其用作存储库位置，并输入用户和密码详细信息，则会收到错误消息：

```
svn: PROPFIND of /var/www/accountname/web 405 Method Not Allowed 
```

谁能告诉我存储库 url 位置的格式/我可以如何使用 Zend 设置此连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:20:11.570

我最终解决了问题；我能够在 Zend 中以以下格式提交一个 url

`svn+ssh://xx.xxx.xxx.xx/var/www/accountname/rep`

*我将把这个问题留在这里，以防其他用户有同样的问题。*

干杯，

# javascript - 替换 JavaScript 中的正则表达式匹配

> ID：11180168
> 
> 赞同：2
> 
> 时间：2012-06-24T18:38:10.963
> 
> 标签：javascript, regex, replace

我正在使用 JavaScript 的 replace() 函数替换匹配 AZ、az、0-9、破折号 (-)、下划线 (_) 和点 (.) 的正则表达式。我正在尝试将其替换为匹配字符串的一部分并带有标签，但我的代码仅将匹配项替换为：<b>$1</b>。

请问有什么帮助吗？

```
<!DOCTYPE html>
<html>
<body>

<textarea id="demo" rows="10" cols="20">
<table></table>
<b><i>#stock-jsod.20</i>
</b>
</textarea>

<button onclick="testit()">test</button>

<script type="text/javascript">

function testit()
{
var str=document.getElementById("demo").value;
var n = str.replace(/#([A-Za-z0-9_.-]+)/gi, "<b>$0</b>");
document.getElementById("demo").innerHTML=n;
}
</script>

</body>
</html> 
```

我的目标是将 #stock-jsod.20 替换为`<b>#stock-jsod.20</b>`，但目前它仅将其替换为`<b>$0</b>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:41:16.027

尝试使用 ' `$&`' 而不是 ' `$1`'。

更多关于外观 -> [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Description](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Description)

**更新**：而不是`document.getElementById("demo").value`您需要`document.getElementById("demo").innerHTML`用于获取 ' `demo`' 元素的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:41:11.713

除了工程师的回答之外，您也没有`A-Za-z0-9_`. 你可以只使用`\w`. 然后你也不需要不区分大小写的开关。这是一个更简单的正则表达式，可以达到相同的效果：

```
var n = str.replace(/#[\w.-]+/g, "<b>$&</b>"); 
```

* * *

示例输出：

```
> str = '#abc #def ghi'
"#abc #def ghi"
> str.replace(/#[\w.-]+/g, "<b>$&</b>");
"<b>#abc</b> <b>#def</b> ghi" 
```

# php - 对文本文件使用explode（）时未定义的偏移量

> ID：11180170
> 
> 赞同：1
> 
> 时间：2012-06-24T18:38:24.070
> 
> 标签：php, arrays, warnings, offset, explode

我打算从一个名为的文本文件中提取内容，该文件`itest.txt`由 100 000 个数字组成，每行一个数字。

我打印了`$contents`恰好是类型的内容，`string`因此所有数字都用空格分隔。

使用后，`explode()`我假设`$ints`每个索引将包含一个数字，但事实并非如此。我试图为每个索引设置一个数字，即`$ints[0]`= 第一个数字，依此类推。后来我希望将它们转换为整数，但我似乎无法解决字符串数组问题。结果，我得到了未定义的偏移错误。

如果我的问题不清楚，并且我对 for 循环中的代码有点担心，请回复我，看起来不是很专业。

这是我的代码：

```
$filename = 'C:\xampp\htdocs\coInv\itest.txt';
$fd       = fopen($filename, "r");
$contents = fread($fd, filesize($filename));    
$ints     = explode(" ", $contents);    
echo $ints[0];  // displays all the elements of the string.

for( $i=0 ; $i<100000 ; )
{
    $ints[$i] = int($ints[$i]);
    echo $ints[$i++];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:40:20.940

您必须按换行符而不是空格来爆炸以匹配您的输入：

```
$ints = explode("\n",$contents); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:40:50.933

由于您得到的只是一个包含整个文件的数组元素，这意味着您`" "`在 explode() 调用中是错误的 - 那里没有空间可供 explode 处理。你说它是“一个人”，所以我建议使用`"\n"`爆炸参数。但是，这取决于这是什么类型的文本文件：windows、mac、unix。你可能需要玩一点。

但是，由于您只是在加载文件，因此您可以跳过整个 fopen/fread 业务，然后执行以下操作：

```
$lines = file('ivtest.txt');
foreach ($lines as $line) {
   echo $line;
} 
```

[file()](http://php.net/file)加载文件并自动为您将行拆分为数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:18:40.733

要将文件中的所有整数值（每行一个整数）获取到数组中，您应该使用该[`file`](http://php.net/file)函数，然后将每一行映射到[它的整数值](http://php.net/intval)：

```
$filename = 'C:\xampp\htdocs\coInv\itest.txt';
$ints = array_map('intval', file($filename)); 
```

# mysql - 时间计算（循环到下一个时间段）

> ID：11180176
> 
> 赞同：2
> 
> 时间：2012-06-24T18:39:21.883
> 
> 标签：mysql, sql, datetime, time

为了对网络服务器上的传入数据进行一些统计，我对这些数据进行了一些 ETL 工作。所以我根据一刻钟来汇总一些东西。IE：

```
inserted  | tstamp
8:00        8:00
8:09        8:00
8:16        8:15
8:29        8:15
8:42        8:30
8:45        8:45
8:59        8:45
9:01        9:00 
```

上面的列是`datetime`列，其中还包含一个日期（我只是为了演示目的而忽略了它）。该作业通过 cron 每 3 分钟运行一次，并且仅获取最后 3 分钟的数据。现在，当 cron 作业在工作时崩溃时，存在风险，即下次重新启动作业时时隙包含错误数据。所以我希望工作从最后一个时段开始。即，当作业最后在 08:24 运行并崩溃时，它应该在 08:15 重新开始。

我现在的问题是，是否有一个简单的 MySQL 语句可以在实际时间之前给我最后一个时间段？

我在 ETL 中用来确定实际时隙的语句是

```
CONCAT(
    DATE_FORMAT(a.inserted, '%Y-%m-%d %H:'),
    IF(MINUTE(a.inserted)<15,'00',
        IF(MINUTE(a.inserted)<30,'15',
        IF(MINUTE(a.inserted)<45,'30',
        '45'))
    ),
    ':00'
) AS tstamp 
```

这可以以更优雅的方式完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:58:35.610

您可以使用`unix_timestamp()`以获取自 1970 年以来的当前时间（以秒为单位）。最后 3 分钟间隔是该时间以 3*60 秒为模：

```
select  from_unixtime(unix_timestamp() - mod(unix_timestamp(), 180))
            as StartOfInterval
,       from_unixtime(unix_timestamp() - mod(unix_timestamp(), 180)-180) 
            as StartOfLastInterval 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/d41d8/930/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:59:55.270

你很亲密。这个怎么样？

```
 SELECT DATE_FORMAT( a.inserted '%Y-%m-%d %H:00:00') +
     INTERVAL (MINUTE(a.inserted) - MINUTE(a.inserted)%15) MINUTE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:00:38.380

只需[`FLOOR()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_floor)将分钟四舍五入到以下的倍数`15`：

```
CONCAT(DATE_FORMAT(a.inserted, '%Y-%m-%d %H:'), 
    15 * FLOOR(MINUTE(a.inserted) / 15)), ':00') AS tstamp 
```

或使用`FLOOR()`以下时间和格式：

```
DATE_FORMAT(FROM_UNIXTIME(900 * FLOOR(UNIX_TIMESTAMP(a.inserted) / 900)), '%Y-%m-%d %H:%M:%s') as tstamp 
```

（`900`是 15 分钟内的秒数）

# html - 可以通过纯 css 禁用输入字段吗？

> ID：11180177
> 
> 赞同：6
> 
> 时间：2012-06-24T18:39:22.673
> 
> 标签：html, css, forms, button

就像html 标签`disable`上的属性一样。`<input>`

我对禁用的效果不感兴趣，例如不包含在表单的 POST 中，并且样式当然可以在 css 中重做，如果它*看起来*应该只是禁用的话。（而且我的输入字段是一个提交按钮，因此从 POST 禁用是无关紧要的。）

我只需要它是不可点击的并且看起来被禁用。

在没有在 html 标签上添加属性的情况下，这在纯 css 中是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T18:42:29.463

不，您不能仅通过 CSS 禁用它的**功能**（因为它只是用于**样式**目的），尽管您可以使用 CSS 使其像禁用按钮一样**显示为灰色。**要使其在功能方面被禁用，您将不得不求助于**JavaScript**。

* * *

使用 CSS，您所能做的就是通过 CSS 将按钮设置为灰色，然后在其上创建另一个元素，使其`z-index`更高、设置`position`和`opactiy`完全透明。这意味着您的实际元素已启用，但由于其上的元素具有完全透明性，因此无法单击它。

* * *

另一种解决方案是只添加`pointer-events: none;`到 dom 元素的样式，应该适用于大多数浏览器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-15T11:35:39.813

> 您可以通过以下方式进行...

```
.input-disable {
  pointer-events: none;
  border: 1px solid grey;
  background-color: lightgrey;
}

input[type=text] {
  height: 30px;
  width: 180px;
  padding: 10px;
}
```

```
<input type="text" value="Normal field">
<input type="text" class="input-disable" tabindex="-1" value="disabled field">
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-15T19:15:02.807

您可以添加以下 CSS 将禁用任何指针事件。这也将禁用悬停、聚焦等。

```
.style { 
   pointer-events: none; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T18:42:21.407

你可以让它看起来像被禁用，但你不能阻止它只用 CSS 是可点击的。一个可怕的 hack 将覆盖一个 div 或其他一些元素，然后该按钮将无法点击。

# postgresql - PostgreSQL 禁用更多输出

> ID：11180179
> 
> 赞同：158
> 
> 时间：2012-06-24T18:39:32.163
> 
> 标签：postgresql, psql, pager

我在我的 PostgreSQL 服务器上运行一个脚本：

```
psql db -f sql.sql 
```

来自`bash`或在`cron`脚本中。

它一直试图用`more`or对输出进行分页`less`。

如何禁用结果分页`psql`？

我想做的就是改变数据，我不关心任何输出。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-06-25T04:19:07.490

要禁用分页但*保留*输出，请使用：

```
\pset pager off 
```

要记住此设置，请将其添加到您的[~/.psqlrc](https://github.com/mcandre/dotfiles/blob/master/.psqlrc)中，例如：`echo \\pset pager off >> ~/.psqlrc`

请参阅[psql 手册](http://www.postgresql.org/docs/9.1/static/app-psql.html)。

在旧版本的 Pg 上，它只是一个切换，所以`\pset pager`

要完全禁止查询输出，`\o /dev/null`请在您的`psql`脚本中使用。

要抑制`psql`的信息输出，请在环境中运行`-q`或设置`QUIET=1`。

* * *

要产生结果并丢弃它们，您可以重定向`stdout`到`/dev/null`：

```
psql db -f sql.sql >/dev/null 
```

您可以使用以下命令重定向 stdout 和 stderr：

```
psql db -f sql.sql >&/dev/null 
```

但我不建议这样做，因为它会丢弃可能会警告您某些事情不正确的错误信息。你也在产生结果并把它们扔掉，这是低效的；你最好不要通过调整你的查询一开始就产生它们。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2013-03-25T17:49:08.290

我也在寻找这个，我在ServerFault上的一个[类似问题中找到了方法：](https://serverfault.com/questions/235184/turn-off-pager-for-psqls-interactive-output)

```
psql -P pager=off <other params> 
```

关闭分页的东西，而不抑制输出。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-06-15T17:06:45.840

这是另一种选择。它确实具有您不必记住 psql 选项名称等的优点。

```
psql ... | cat 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-24T23:24:11.087

作为[shell](http://en.kioskea.net/contents/unix/unix-shell.php3)的 bash有 2 个可以重定向输出数据的[流](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)：stdout 和 stderr，因为这个输出需要重定向到某个地方，linux 有一个特定的“丢弃所有”节点可以通过[/dev/null](http://en.wikipedia.org/wiki//dev/null)访问。你发送到那里的所有东西都会消失在虚空中。

（shell 也有一个输入流，但我会在这里忽略它，因为您要求抑制输出）

这些流由数字表示：1 表示标准输出，2 表示标准错误。

因此，如果您只想重定向标准输出，您可以使用`<`and`>`运算符（基本上它指向的地方就是数据流向的地方）

假设我们想抑制标准输出（重定向到 /dev/null）：

`psql db -f sql.sql > /dev/null`

如您所见，这是默认的标准输出，如果您想使用要编写的流号，则未使用流号

`psql db -f sql.sql 1> /dev/null`

现在，如果您想抑制 stderror（流号 2），您可以使用

`psql db -f sql.sql 2> /dev/null`

您还可以将一个流重定向到另一个流，例如将 stderror 重定向到 stdout，如果您想将所有输出（常规和错误）保存在某处，这很有用。

`psql db -f sql.sql 2>&1 > log.txt`

请注意，您之间不能有空格`2>&1`

最后，有时最有趣的是，您可以通过使用来抑制所有输出`&>`，因为当您希望它“完全安静”时

`psql db -f sql.sql &> /dev/null`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-11-30T13:53:31.043

```
psql -U user -P pager=off -d database -c 'SQL'; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-24T18:42:14.397

```
psql db -f sql.sql > /dev/null 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-22T08:55:24.053

此语法在 SSH 会话中对我有用：

```
psql db user --command "select * from table007" -A -P pager 
```

# drupal - Drupal 7：在电子邮件验证后向匿名用户显示字段

> ID：11180180
> 
> 赞同：0
> 
> 时间：2012-06-24T18:39:36.440
> 
> 标签：drupal, permissions, drupal-7

这是 Drupal 7 站点的要求 -

*   该网站不会为访问者提供任何注册设施。它基本上是一个以内容为导向的网站，所有内容均由内容编辑器创建。
*   所有内容都对匿名用户可见。
*   有特定的内容类型（考虑“文档”）将上传文件。用户可以下载文件。
*   当匿名用户第一次查看节点时，“文档”节点不会显示文件下载链接。相反，它会要求用户输入他的电子邮件地址。
*   一旦用户输入了有效的电子邮件地址，文件的链接就会显示出来。
*   将有用户输入电子邮件地址的日志记录。

我想知道是否有一个贡献的模块已经可以做到这一点。如果没有，是否可以通过使用贡献模块的组合来实现这一点？如果连这都不可能，那么实现这一目标的最佳方法是什么？

# ant - 使用单个 Ant 构建脚本创建多个 jar 文件

> ID：11180182
> 
> 赞同：0
> 
> 时间：2012-06-24T18:39:42.367
> 
> 标签：ant, build.xml

我有一个要求，我需要从工作区中存在的每个项目构建多个 jar 文件。你能告诉我如何编写一个 build.xml 来创建多个 jar 文件吗？我已经尝试过类似的代码并且知道它的可能，但想知道需要遵循的最佳实践是什么。就我而言，我的工作区中有 5 个项目，我必须创建 5 个不同的 jar。还有一些外部依赖 jar，需要包含在某些项目中才能构建 jar 文件。下面是我为创建两个 jar 文件而编写的示例代码。我为生成 jar 文件而编写的代码如下

```
 <target name="compile" depends="compileVal, compileHib " description="compile the source for all">

</target>

<!-- ============================================= 
      target: compile the source for Valueobjects              
     ============================================= -->
<target name="compileVal" depends="clean" description="description">
    <echo message="Creating directory '${target}' if not present "></echo>
        <mkdir dir="${target}"/>
        <mkdir dir="${Classfiles}"/>
        <mkdir dir="${JarLocation}"/>
        <javac srcdir="../ValueObjects/src" destdir="${Classfiles}" />
</target>

    <!-- ================================= 
      target: compile              
     ================================= -->
    <target name="compileHib" depends="clean" description="description">
    <echo message="Creating directory '${target}' if not present "></echo>
        <mkdir dir="${target}"/>
        <mkdir dir="${Classfiles}"/>
        <mkdir dir="${JarLocation}"/>
        <javac srcdir="src" destdir="${Classfiles}" >
            <classpath>
                <pathelement location="${libloc}/hibernate3.jar"/>
                <pathelement location="${libloc}/hsqldb.jar"/>
                <pathelement location="${libloc}/jta.jar"/>
                <pathelement location="${libloc}/ojdbc5.jar"/>
                <pathelement location="${libloc}/commons-logging-1.1.1.jar"/>
                <pathelement location="${libloc}/postgresql-9.1-902.jdbc4.jar"/>
            </classpath>
        </javac>
     </target>

<!-- ================================= 
      target: name              
     ================================= -->
    <target name="copy-non-java-files" depends="" description="description">
        <copy todir="${Classfiles}" includeemptydirs="false">
                <fileset dir="src" excludes="**/*.java" />
        </copy>
    </target>

    <!-- ================================= 
      target: compress              
     ================================= -->
    <target name="build_jar" depends="buildValobj, buildHib" description="description">

    </target>

    <!-- ================================= 
      target: buildValobject jar             
     ================================= -->
<target name="buildValobj" depends="compileVal" description="creates the valueObject jar">
    <echo message="Creating the jar to Folder '${JarDest}'"> </echo>
        <jar destfile="${JarDest}/${RetValObName}" basedir="${Classfiles}" />
</target>

<!-- ================================= 
      target: buildHibjar               
     ================================= -->
<target name="buildHib" depends="compileHib, copy-non-java-files" description="description">
    <echo message="Creating the jar to Folder '${JarDest}'"> </echo>
        <jar destfile="${JarDest}/${RetHibName}" basedir="${Classfiles}" />
</target>

    <!-- ================================= 
      target: clean              
     ================================= -->

    <target name="clean">
        <echo message="Cleaning '${target}' folder"></echo>
        <delete includeemptydirs="true">
            <fileset dir="${target}" includes="**/*"/>
        </delete>
    </target> 
```

在上面的代码中，我面临的问题是在尝试编译Hib 时，尽管我已经指定了depends="clean"。清洁不会发生。创建了一个 jar，其中包括已经存在的文件以及已移动的新文件。不确定为什么？虽然我指定了 clean，但 clean 操作似乎没有发生。你能告诉我上面缺少什么吗？

请协助。提前致谢

# powerbuilder - PowerBuilder 网络部署

> ID：11180183
> 
> 赞同：0
> 
> 时间：2012-06-24T18:39:50.200
> 
> 标签：powerbuilder, powerbuilder.net

我需要知道我们是否可以使用 Sybase PowerBuilder 创建 Web 项目。例如添加网页、添加链接、文本字段等（而不是基于原生表单的项目）。

这对 Sybase powerbuilder 是否可行，如果可以，我可以提供一些有关此的阅读材料吗？

注意：我不想将基于表单的桌面应用程序迁移到 Web。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:32:33.417

是的，您可以使用 PowerBuilder 创建 Web 应用程序，但您需要 EAServer（Sybase 的 Java EE 应用程序服务器）进行部署。

# jsf - Primefaces Slider 不会停止用鼠标移动

> ID：11180185
> 
> 赞同：0
> 
> 时间：2012-06-24T18:39:59.333
> 
> 标签：jsf, primefaces, slider

我已经在我的页面上插入了一个具有非常基本设置的 Primefaces Slider，问题是一旦我点击它的按钮，它就不会停止用鼠标移动。鼠标指针在页面中的哪个位置无关紧要。Slider 按钮跟随鼠标位置向右或向左移动。有没有人知道如何解决这个问题？

```
<h:outputLabel styleClass="form-label-top-right" for="area">Area:
<h:outputText id="output" value="#{formbean.selectedArea}"/> Km
<h:inputHidden id="area" value="#{formbean.selectedArea}" />
<p:slider animate="true" display="output" minValue="0" maxValue="15" step="3" id="areaSlider" for="area" style="margin-top:6px; cursor: pointer" />
</h:outputLabel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:24:33.700

我认为这是您使用 h:outputLabel 包含这些其他标签的方式，不允许 mouseup 事件冒泡。使用 ah:panelGrid 与四列代替。

例如：

```
<h:panelGrid columns="4">
    <h:outputLabel styleClass="form-label-top-right" for="output" value="Area:" />
    <h:panelGroup>
        <h:outputText id="output" value="#{formbean.selectedArea}"/>
        <h:outputText value="Km"/>
    </h:panelGroup>

        <h:inputHidden id="area" value="#{formbean.selectedArea}" />
        <p:slider animate="true" display="output" minValue="0" maxValue="15" step="3" id="areaSlider" for="area" style="margin-top:6px; cursor: pointer" />
</h:panelGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:18:58.350

问题已解决。导致问题的是 FireFox 的“FireQuery”插件。卸载那个

# c++ - boost asio iostream - 如何获取本地IP地址

> ID：11180187
> 
> 赞同：6
> 
> 时间：2012-06-24T18:40:18.593
> 
> 标签：c++, boost, ip, boost-asio, local

这是我的问题：我正在使用 boost::asio::ip::tcp::iostream 连接到服务器：

```
boost::asio::ip::tcp::iostream s(IP, "1237"); 
```

现在我想检索我自己的本地 IP 地址。我在谷歌深处的某个地方找到了如何使用[套接字](https://stackoverflow.com/questions/6846050/boost-asio-socket-how-to-get-your-own-ip-port-adress)来完成它，但是流呢？我希望由于 tcp::iostream 是建立在套接字顶部的，它应该类似于： s.local_endpoint().address() 但经过谷歌和duckduckgo 的长时间搜索后，我发现不知道该怎么做。我已经尝试了几个最明显的排列，但仍然没有运气。那么，有什么简单的方法可以做到这一点，还是我必须使用套接字？如果它很重要，它只需要在 Linux 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:54:11.350

假设 Linux，[`getifaddrs(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)用于获取本地系统的接口列表。

# android - 在 Android 上获取上下文的静态方式 - 安全吗？

> ID：11180194
> 
> 赞同：0
> 
> 时间：2012-06-24T18:40:52.167
> 
> 标签：android

我意识到有一种非常有趣的技术，可以轻松地在 Android 中获取 Context。

[在 Android 上获取“上下文”的静态方法？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

不过，我也遇到了

[Android：内存不足的静态变量null](https://stackoverflow.com/questions/4797187/android-static-variable-null-on-low-memory)

用于保存上下文的静态变量是否有可能在内存不足时变为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:47:23.423

> 用于保存上下文的静态变量是否有可能在内存不足时变为空？

不。

该进程可能会被终止以释放内存，这会`null`在您的代码下次运行时在其新进程中生成静态变量。

# c - 如何在 C 中获取结构的地址？

> ID：11180195
> 
> 赞同：10
> 
> 时间：2012-06-24T18:40:59.643
> 
> 标签：c, memory

我是 C 的绝对新手，所以这可能是一个愚蠢的问题，警告！

如果有人想知道上下文，它的灵感来自于 Learn C the Hard Way 中[练习 16的额外学分部分。](http://c.learncodethehardway.org/book/learn-c-the-hard-waych17.html)

假设这些进口：

```
#include <stdio.h>
#include <assert.h>
#include <stdlib.h> 
```

并给出一个像这样的简单结构：

```
struct Point {
    int x;
    int y;
}; 
```

如果我在堆上创建它的一个实例：

```
struct Point *center = malloc(sizeof(Point));
assert(center != NULL);
center->x = 0;
center->y = 0; 
```

然后我知道我可以像这样打印结构在内存中的位置：

```
printf("Location: %p\n", (void*)center); 
```

但是如果我在堆栈上创建它呢？

```
struct Point offCenter = { 1, 1 }; 
```

位于堆栈中的值在内存中的某个位置仍然存在。那么我如何获得这些信息呢？我是否需要创建一个指向我的新堆栈结构的指针然后使用它？

**编辑：**哎呀，这有点明显。感谢丹尼尔和克利福德！为了完整起见，这里是打印示例，使用`&`：

```
printf("Location: %p\n", (void*)&center); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T18:44:28.270

使用“address-of”运算符一元`&`。

```
struct Point offCenter = { 1, 1 };
struct Point* offCentreAddress = &offCentre ; 
```

# jquery - jQuery FullCalendar，Jscript 运行时错误

> ID：11180198
> 
> 赞同：0
> 
> 时间：2012-06-24T18:41:15.910
> 
> 标签：jquery, fullcalendar

这是我的代码，不断提示我消息“Microsoft Jscript 运行时错误：预期对象”

我的代码有什么问题？？帮助

```
<script type='text/javascript'>
 $(document).ready(function () {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({
            editable: true,
            events: [
                {
                    title: 'All Day Event',
                    start: new Date(y, m, 1)
                },
                {
                    title: 'Long Event',
                    start: new Date(y, m, d - 5),
                    end: new Date(y, m, d - 2)
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d - 3, 16, 0),
                    allDay: false
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: new Date(y, m, d + 4, 16, 0),
                    allDay: false
                },
                {
                    title: 'Meeting',
                    start: new Date(y, m, d, 10, 30),
                    allDay: false
                },
                {
                    title: 'Lunch',
                    start: new Date(y, m, d, 12, 0),
                    end: new Date(y, m, d, 14, 0),
                    allDay: false
                },
                {
                    title: 'Birthday Party',
                    start: new Date(y, m, d + 1, 19, 0),
                    end: new Date(y, m, d + 1, 22, 30),
                    allDay: false
                },
                {
                    title: 'Click for Google',
                    start: new Date(y, m, 28),
                    end: new Date(y, m, 29),
                    url: 'http://google.com/'
                }
            ]
        });

    });

</script>
<style type='text/css'> 

    body {
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        }

    #calendar {
        width: 900px;
        margin: 0 auto;
        }

</style> 
```

# java - 如何在java中使用Runtime类执行多个windows命令

> ID：11180204
> 
> 赞同：1
> 
> 时间：2012-06-24T18:42:00.050
> 
> 标签：java, runtime.exec

我正在尝试使用以下代码从 Java 执行 windows 命令，

```
Process p=Runtime.getRuntime().exec("wget www.anyurl.com/index.html); 
```

它可以工作，但是当我尝试执行另一个命令时，如下所示，

```
Process p1=Runtime.getRuntime().exec("pscp -pw sysadmin c:/mydirectory/mypage.html mahesh@vmstni01:/home/usr"); 
```

它似乎不起作用。如果我注释掉第一个进程行（即进程 p），那么进程 p1 工作正常，它执行并显示文件已成功复制。请问谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:50:51.083

您需要清理第一个进程的流，否则程序将阻塞，因为“wget”进程产生的输出在您当前的实现中永远不会读取。您需要整理出第一个流程的输出和错误流。查看[关于 SO 上 java-runtime-exec 的另一个问题](https://stackoverflow.com/questions/8595748/java-runtime-exec)的答案。

下面的代码可供参考，但依赖于 wget 生成输出到 stderr 和 pscp 到 stdout 的事实。如果有任何东西输出到另一个相应的流，只要输出适合 Java 程序的缓冲区（请注意，这些缓冲区大小往往因平台而异），代码就可以在清空第一个流时工作。如果缓冲区已满，则命令的执行只是阻塞。您应该为 stout 和 stderr 创建一个单独的线程，以读取进程的适当流。

```
 import java.io.BufferedReader;
    import java.io.InputStreamReader; 
```

...

```
 Process p=Runtime.getRuntime().exec("wget http://www.duckduckgo.com/");

    BufferedReader perr=new BufferedReader(new InputStreamReader(p.getErrorStream()));
    BufferedReader pout=new BufferedReader(new InputStreamReader(p.getInputStream()));
    // We read stderror first from wget, because it spits the progress information into stderr
    for (String s=perr.readLine(); s!=null; s=perr.readLine())
    {
        System.out.println("Stderr from p: "+s);
    }
    for (String s=pout.readLine(); s!=null; s=pout.readLine())
    {
        System.out.println("Stdout from p: "+s);
    }
    // if you need to check whether the command actually returned normally
    int returnCode = p.waitFor();
    perr.close();
    pout.close();

    System.out.println("Returned from p with exit code "+returnCode);

    p=Runtime.getRuntime().exec("pscp -pw dontuseplainpwusesshkeys index.html user@10.0.0.11:");
    perr=new BufferedReader(new InputStreamReader(p.getErrorStream()));
    pout=new BufferedReader(new InputStreamReader(p.getInputStream()));
    // We read stdout of pscp first because pscp spits stuff into stdout.
    // The process will block if the buffer gets full and does not get emptied.
    for (String s=pout.readLine(); s!=null; s=pout.readLine())
    {
        System.out.println("Stdout from p: "+s);
    }
    for (String s=perr.readLine(); s!=null; s=perr.readLine())
    {
        System.out.println("Stderr from p: "+s);
    }

    int returnCode1 = p.waitFor();
    perr.close();
    pout.close();

    System.out.println("Process exited with return code "+returnCode1); 
```

# iphone - 两个 UIButtons 的一种方法

> ID：11180213
> 
> 赞同：0
> 
> 时间：2012-06-24T18:42:40.230
> 
> 标签：iphone, ios, uibutton

这种倒带方法适用于倒带按钮以及播放按钮。

```
-(void)rewind:(id)sender
{
    [timer invalidate]; 
    audioPlayer.currentTime = 0;

    MainViewController *viewController = [[MainViewController alloc] init];
    viewController.view.frame = CGRectMake(0, 0, 320, 480);
    [self.view addSubview:viewController.view];
    [self.view addSubview:toolbar];
    [viewController release];

    if([audioPlayer isPlaying])
    {
        [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
        [audioPlayer pause];
        [self pauseTimer];
        [self pauseLayer:self.view.layer];  
    }else{
        [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
        [audioPlayer play];
        [self resumeTimer];
        [self resumeLayer:self.view.layer];
        if(isFirstTime == YES)
        {
            self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                          target:self
                                                        selector:@selector(displayviewsAction:)
                                                        userInfo:nil
                                                         repeats:NO];
            isFirstTime = NO;
        }
    } 
} 
```

现在在这种方法中，发送者是倒带按钮，播放/暂停的切换发生在倒带按钮上，而我希望这个切换播放按钮而不是发送者，它是倒带按钮。所以我尝试给出我想要切换的实际按钮的名称，并在我的代码中将该按钮定义为播放按钮，并且我在此倒带方法中添加了其操作方法。

这就是定义播放按钮的方式

```
//Add Play Button
UIButton *playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[playButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
playButton.frame = CGRectMake(0, 0, 30, 30);
[playButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[playButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:playButton]; 
```

这是我在快退按钮中添加的播放按钮的方法

```
-(void)playpauseAction:(id)sender 
{    
    if([audioPlayer isPlaying])
    {
        [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
        [audioPlayer pause];
        [self pauseTimer];
        [self pauseLayer:self.view.layer];
    }
    else
    {
        [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
        [audioPlayer play];
        [self resumeTimer];
        [self resumeLayer:self.view.layer];

        if(isFirstTime == YES)
        {
            self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                          target:self
                                                        selector:@selector(displayviewsAction:)
                                                        userInfo:nil
                                                         repeats:NO];
            isFirstTime = NO;
        }
    }
} 
```

现在我现在面临的问题是，当我单击倒带按钮时，应该在播放按钮而不是倒带按钮上进行切换。

但是为了解决这个问题，我只是在这样的倒带方法中用 playButton 替换了 sender

```
[playButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected]; 
```

但随后我收到红色警告消息，提示使用未声明的标识符 playButton。

我如何告诉倒带方法在 playButton 而不是倒带按钮上进行切换。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:12:19.803

您的“未声明的标识符 playButton”告诉您您没有实例变量 playButton。

它可能仅在您创建它的方法中可见，但您需要将其保存到 iVar 中才能从其他方法访问它。

# iis - 安装 WAMP 后，在 Firefox 中询问 localhost 的用户名和密码

> ID：11180215
> 
> 赞同：0
> 
> 时间：2012-06-24T18:42:43.523
> 
> 标签：iis, passwords, localhost, wamp

我已经在我的 Windows XP 中运行了 IIS。我还安装了 wamp 服务器。

1.  ** wamp 服务器显示非活动图标。
2.  当我安装 WAMP 时，我被要求将 firefox 设置为 WAMP 的默认浏览器。现在，当我要开始使用它的任何服务（即 localhost 或 phpmyadmin）时，firefox 会要求我输入相同的用户名和密码（对话框显示**“输入 http://localhost 的用户名和密码”**）

我该怎么办 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:56:06.427

您必须通过运行**inetmgr**来关闭 IIS ，然后您将获得 IIS 窗口，您可以关闭 IIS。
因为 IIS 在 80 端口上运行，而 WAMP 的 apache 也在尝试在 80 端口上运行，但这是由 IIS 获取的，所以你必须停止 IIS。

至于火狐，你必须把它设置为默认或不设置。

# iphone - Xcode 4.3“预期标识符或'（'”

> ID：11180216
> 
> 赞同：0
> 
> 时间：2012-06-24T18:42:51.983
> 
> 标签：iphone, xcode, sdk

所以我刚刚创建了一个新项目，它在我接触文件之前就显示了错误，我对 Xcode 很陌生，但这是我的代码：

```
#import "ViewController.h"

@interface "ViewController.h"

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

并且在“@interface”ViewController.h“”处显示了标题中的错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T18:44:02.320

这就是错误。你想要`@interface ViewController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:43:45.733

这是

```
@interface ViewController

@end 
```

`" "`导入标头、`<>`框架时必须使用。

`@interface`是一个objective-c对象，在这种情况下是一个类，所以你不需要`""`.

# javascript - 从 html onload 启动 iPhone 应用程序

> ID：11180220
> 
> 赞同：4
> 
> 时间：2012-06-24T18:43:06.330
> 
> 标签：javascript, iphone, html, ios, ios5

我创建了一个 iPad 应用程序。

我想从 safari 启动它。使用 URL Schema，它已成功完成。

从我的应用程序中，我想发送一个链接。点击哪个应该打开我的应用程序。

我发送的邮件包含以下内容

> 单击此处启动应用程序

这是一个锚标签，其 href = "MyApp://someString"。

但是当我将它作为邮件发送时，在 iPad 配置的邮件上，链接工作正常，但在浏览器中它不起作用。然后我才知道Yahoo，Gmail会停用链接而不是以开头`http://`

现在，我想使用`MyApp://`带有 HTML Onload 的 URL 架构打开我的应用程序，类似于在打开 itunes.apple.com 时在我们的 PC 中打开 iTunes

使用`windows.open('MyApp://')`, 在`onload()`函数中，我的应用程序也没有启动。

怎么做？html加载时如何启动我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:43:57.103

制作一个这样的 PHP 页面：

```
<?php
 header("Location: MyApp://somestring;")(
?>
<html>
 <head>
  <meta http-equiv="Refresh" content="0; MyApp://somestring" />
  <title>Opening App...</title>
  <script>
   function openApp() {
    window.location.href = "MyApp://somestring";
   }
  </script>
 </head>
 <body onload="openApp();">
  <a href="MyApp://somestring">Click here if app doesn't open...</a>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T09:44:41.050

我怀疑任何在线电子邮件客户端都会让您在电子邮件中运行 javascript。这将是非常不安全的。如果他们拒绝处理 HTTP 以外的任何其他 URL 模式，可能是因为同样的安全问题。

我会通过一个链接来解决这个问题

```
<a href="http://mydomain.com/open-app?schema=MyApp">CLICK HERE TO LAUNCH APP</a> 
```

然后你服务器上的页面就会打印出来

```
<script>
    window.location.href="<?= $_GET['schema'] ?>://";
</script> 
```

（PHP 中的示例）

**只需确保在打印之前清理模式变量！**

您可以使用正则表达式来确保它只有 az 或类似的东西。否则，您会遇到 Yahoo 和 Gmail 正在避免的相同安全问题。

# php - PHP 无法动态构建 PDO 查询。

> ID：11180224
> 
> 赞同：3
> 
> 时间：2012-06-24T18:43:39.497
> 
> 标签：php, pdo

所以我正在尝试使用 PDO 构建和准备动态的 mysql 查询。这是我的代码和调试信息。

```
$allowed_filters = array('hotels.star_rating', 'countries.id');

$where = 'WHERE 1 ';
if (!empty($data['filters'])){
    $where = 'WHERE';
    foreach ($data['filters'] as $field => $value){
        if (in_array($field, $allowed_filters)){
            $where .= " $field = :$field &&";
        }
        else unset($data['filters'][$field]);
    }

    $where = rtrim($where, '&&');
    $where = ($where == 'WHERE')? 'WHERE 1 ' : $where;
}

$st = $this->db->prepare("
    SELECT 
        hotels.code,
        hotels.name as name,
        hotels.star_rating,
        hotels.description,
        hotels.cover_image,
        countries.name as country,
        cities.name as city 
    FROM  
        hotels JOIN cities ON cities.id = hotels.city_id
        join countries on countries.id = cities.country_id
    $where
");

$st->execute($data['filters']);
var_dump($st->fetch()); 
```

在 $st->execute($data['filters']) 行之前，我转储了 $st 和 $data['filters']。值如下。

$st 的价值

```
PDOStatement Object
(
    [queryString] => 
        SELECT 
            hotels.code,
            hotels.name as name,
            hotels.star_rating,
            hotels.description,
            hotels.cover_image,
            countries.name as country,
            cities.name as city 
        FROM  
            hotels JOIN cities ON cities.id = hotels.city_id
            join countries on countries.id = cities.country_id
        WHERE 
            hotels.star_rating = :hotels.star_rating && 
            countries.id = :countries.id 
) 
```

$data['filters'] 的值

```
Array
(
    [hotels.star_rating] => 4 stars
    [countries.id] => 5
) 
```

PDO 引发异常并失败并出现以下错误。

> SQLSTATE [HY093]：无效的参数号：未定义参数'

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:47:21.670

`:`您忘记了键中的冒号`$data['filters']`。它应该是：

```
Array
(
    [:hotels.star_rating] => 4 stars
    [:countries.id] => 5
) 
```

# c# - 无法访问视图中的 ModelState 错误

> ID：11180228
> 
> 赞同：1
> 
> 时间：2012-06-24T18:44:00.890
> 
> 标签：c#, .net, html, asp.net-mvc-3, razor

所以我在我的 Razor 视图中访问我的模型错误时遇到了一些问题。

在我的控制器中，当`ModelState`无效或其他一些自定义验证未通过时，我会添加如下模型错误：`ModelState.AddModelError("ModelState", "Please fill out all required fields.");`

然后我像这样返回一个重定向：

```
return RedirectToAction("Register", "Account"); 
```

看起来相当简单，但是，当我尝试访问模型状态错误、循环遍历它们并将它们分别添加`span`到我的视图中时，我什么也没有显示。这是视图中的代码：

```
@foreach (var error in ViewData.ModelState.Values.SelectMany(modelState => modelState.Errors))
{
    <span>@error.ErrorMessage</span>
    <br />
} 
```

我在这里做错了什么，还是没有做我应该做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:51:44.943

您不应该重定向到操作，只需返回相同的视图：

```
///
/// Displays form to edit model
///
public ActionResult Edit(int id)
{
    MyModelClass m = new MyModelClass();
    return View(m);
}

[HttpPost]
public ActionResult Edit(MyModelClass m)
{

    if( !ModelState.IsValid )
    {
        // Got error, return view
        return View(m);
    }
    return RedirectToAction("/mymodel/success");
} 
```

**更新**：ModelState.IsValid - 输入错误:)

# c# - .net 随机生成器是如何实现的？

> ID：11180231
> 
> 赞同：7
> 
> 时间：2012-06-24T18:44:08.937
> 
> 标签：c#, .net

我的意思是 .net /c# 中的标准（？）随机生成器

```
Random random = new Random(seed);
random.next(); 
```

我知道文献中有数十种或数百种方法，但我找不到.net框架目前使用的是哪一种？

问问题的原因：如果我画了很多随机变量，我会回到同一个序列吗？我知道一些 RNG 具有这种不良属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T18:50:14.157

> 从一组有限的数字中以相等的概率选择伪随机数。选择的数字不是完全随机的，因为使用了明确的数学算法来选择它们，但它们对于实际目的来说是足够随机的。**Random 类的当前实现基于 Donald E. Knuth 的减法随机数生成器算法的修改版本。**有关详细信息，请参阅 DE Knuth。“计算机编程的艺术，第 2 卷：半数值算法”。Addison-Wesley，马萨诸塞州雷丁，第二版，1981 年。

[http://msdn.microsoft.com/en-us/library/system.random.aspx](http://msdn.microsoft.com/en-us/library/system.random.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:52:45.950

所有计算均基于种子。如果您定义一个种子，那么对于相同的方法序列，您将获得相同的结果。如果不是，则默认种子是 Environment.TickCount，因此相同的方法序列将在每次运行时生成不同的结果（并行不保证）。

# vb.net - 从 VB.net 应用程序到 Web 服务器的实时数据

> ID：11180232
> 
> 赞同：0
> 
> 时间：2012-06-24T18:44:18.770
> 
> 标签：vb.net, real-time

我对 VB.net 编程相当陌生。我想要一些关于将实时数据从 VB.net 应用程序发送到 Web 服务器 (asp.net) 以进行实时显示的方法/程序的建议。我的问题与从桌面应用程序发送数据的最佳方法以及在服务器上接收和处理数据的最佳方法有关。我不是在要求示例代码，只是对研究什么方法的一些想法。我目前正在使用文本文件上传方法，但我确信有一种更有效的方法可以实现这一点。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:46:27.100

如果你正在使用 ASP.NET 的 MVC 框架（我强烈推荐它而不是 WebForms），最近进入 RC 模式的 MVC4 具有一个非常好的新 Web API：

[http://www.asp.net/web-api](http://www.asp.net/web-api)

“ASP.NET MVC 4 包括 ASP.NET Web API，这是一个用于创建 HTTP 服务的新框架，可以访问包括浏览器和移动设备在内的广泛客户端。ASP.NET Web API 也是构建 RESTful 服务的理想平台。”

它允许您在服务器上定义非常简单的方法，这些方法直接与您的实际域对象一起工作，并且它可以根据传入的请求或您可能的特定配置以适当的内容类型（例如 JSON、XML）返回数据放。

然后，您的 Web 应用程序可以通过 Ajax（jQuery 很好）轮询同一 API 控制器类上的 GET 方法以显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:51:07.687

为了向服务器发送数据，您可以研究 webservice 或 WCF。

[http://en.wikipedia.org/wiki/Web_service](http://en.wikipedia.org/wiki/Web_service)

[http://msdn.microsoft.com/en-us/netframework/dd939784](http://msdn.microsoft.com/en-us/netframework/dd939784)

为了从服务器检索数据到您的 ASP.Net 应用程序，您可以研究 AJAX。

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 隐藏列表并通过单击其标题来显示它

> ID：11180238
> 
> 赞同：1
> 
> 时间：2012-06-24T18:44:51.140
> 
> 标签：javascript, show-hide

我一直在研究一个比我更高级的开发人员传给我的东西。（尽管他不擅长拼写）。我想要做的是，当点击一个主要类别时，它下面的列表会隐藏或显示。但最初是隐藏的。

他的代码将它们全部显示在一个整体框中，单击时成功隐藏并显示。所以这是一个框内的类别列表。如果这是有道理的。（有点像 yipit.com 左侧的框 - 单击标题使其下方的链接出现/消失）。所以这是他的代码：

```
<!-- Box2 -->
    <div class="clsBox clsTags" id="catgories_list">
        <!-- Box Title -->
        <div class="clsBox_Tiitt">
            <a href="javascript:void(0)">Categories</a>
        </div>
        <!-- End of Box Title -->
        <!-- Box content -->
        <div class="clsBox_Cont">
            <p class="clsBoxoption"><a href="javascript:void(0)" id="sel_my_tags">My Tags</a> | <a href="javascript:void(0)" id="clear_all_tag">Clear</a> | <a id="save_tags" href="javascript:void(0)">Save</a></p>
            <a href="javascript:void(0)" id="sel_all_tags" style="color:#fff; font-size:16px; font-weight:bold;">Select All</a>
            <?php
                if(isset($users_category))
                {
                    $mytags=implode(",",$users_category);
                    echo '<input type="hidden" name="my_tags" value="'.$mytags.'" id="my_tags"/>';
                }

                $sub_cat_query='';

                $sub_cats=array();

                $sub_categories=array();

                $conditions=array();

                $output="";

                $checked='';

                if(isset($categories))
                {
                    foreach($categories as $category)
                    {
                        $output.='<div class="clsTags_Cont">
                                    <h3>'.ucfirst($category->name).'</h3>
                                    <ul id="sub_cat_of_'.$category->id.'">';
                        $conditions=array("parent_id"=>$category->id,"status"=>'1');

                        $sub_cat_query=$this->common_model->getTableData("sub_category",$conditions);

                        $sub_categories=$sub_cat_query->result();

                        foreach($sub_categories as $sub_category)
                        {
                            if(count($users_category)!=0)
                            {   
                                if(in_array($sub_category->id,$users_category))
                                    $checked='checked="checked"';
                                else
                                    $checked='';
                            }
                            else
                                $checked='';

                            $output.='<li><label><input type="checkbox" id="check_box_cat'.$category->id.'_'.$sub_category->id.'" name="check_box_cat[]" value="'.$sub_category->id.'" '.$checked.'>&nbsp;'.ucfirst($sub_category->name).'</label></li>';
                        }
                        $output.="<div class='clear'></div></ul></div>";
                    }
                }
                echo $output;
            ?>
        </div>
        <!-- box Content -->
    </div>
    <!-- End of Box2 --> 
```

而且我相信他用于该转换的代码是这样的：

```
$(".clsBox .clsBox_Tiitt").click(function(){
    var cur_id=$(this).parent().attr("id");
    $("#"+cur_id+" .clsBox_Cont").toggle();
    var class_name=$("#"+cur_id+" .clsBox_Tiitt").attr("class");
    if(class_name=="clsBox_Tiitt")
        $("#"+cur_id+" .clsBox_Tiitt").addClass("clsClsoe");
    else
        $("#"+cur_id+" .clsBox_Tiitt").removeClass("clsClsoe");
}) 
```

但是，呃，我不确定如何过渡。我知道我需要调整的一点是

```
$output.='<div class="clsTags_Cont">
                                    <h3>'.ucfirst($category->name).'</h3>
                                    <ul id="sub_cat_of_'.$category->id.'">'; 
```

我想我必须在前面放置一个特殊的 div，在 ul 位之前放置一个内部 div 类，然后在输出处将其关闭。

但是我有点不知所措，因为我将如何做到这一点，以便实际的隐藏/显示位出现和消失。

这有意义吗？希望我说得通。如果有人可以指导我，我将非常感谢您的帮助。我一直在学习！：） 首先十分感谢。

# php - PHP随机生成的id与数据库不匹配

> ID：11180239
> 
> 赞同：0
> 
> 时间：2012-06-24T18:44:58.997
> 
> 标签：php, mysql

我的网站集成了一个登录系统，但我是一名视频游戏程序员，想将我的网站集成到我的游戏中。我正在使用 PHP 来检查用户的密码，并假设它返回一个随机用户 ID，我以后可以使用它来验证用户。我正在从游戏向网络服务器发出 POST 请求以验证用户信息，我无法为用户身份验证托管专用服务器，并且我当前的网络主机不允许远程访问 MYSQL 数据库，所以这是我唯一的选项。这是给我的最后一点代码。

```
$userid = $this->generateRandID();
$time = time();

$database->updateUserField($_POST["username"], "userid", $userid);
$database->addActiveUser($_POST["username"], $time);
$database->removeActiveGuest($_SERVER['REMOTE_ADDR']);
echo($userid); 
```

假设将用户添加为活动用户并更新mysql数据库中的用户ID字段，然后为我回显用户ID然后保存在游戏中。问题是回显的用户标识似乎与数据库中的用户标识不同。这是 updateUserField，它对我来说只是一个快捷方式，所以如果我出于任何原因需要更改它，我不必更改很多代码行。

```
function updateUserField($username, $field, $value){
    return mysqli_query( $this->connection, "UPDATE ".TBL_USERS." SET ".$field." = '$value' WHERE username = '$username'");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:04:17.017

从您的[评论](https://stackoverflow.com/questions/11180239/php-random-generated-id-does-not-match-database#comment14671012_11180239 "评论")看来，您尝试用随机数替换用户 ID 的原因是为了向您的应用程序添加一定的安全级别。我相信更好的方法是将会话与用户数据持久性分开处理。目前，管理第三方应用程序对您系统的编程访问的行业标准是 oAuth。您可以查看[官方 oAuth 文档](http://oauth.net/core/1.0a/ "官方 oAuth 文档")或oAuth[初学者指南](http://hueniverse.com/oauth/ "oAuth 初学者指南")。虽然标准 oAuth 工作流程假定用户将直接在您网站上的网页上进行身份验证，但也有[“双腿 oAuth”](http://blog.nerdbank.net/2011/06/what-is-2-legged-oauth.html)这允许用户在第三方应用程序本身（在您的情况下，您的游戏）中提供他们的凭据。实施 oAuth 的一些原因是安全性、授权与数据的分离或站点的目的、客户端和提供程序[库支持](http://oauth.net/code/)。

# javascript - 创建由变量引用的函数的新实例

> ID：11180242
> 
> 赞同：2
> 
> 时间：2012-06-24T18:45:35.070
> 
> 标签：javascript, function, variables, object, instance

我正在尝试为 HTML5 画布游戏创建一种存储和加载地图的方法。为此，我必须创建由变量引用的对象（函数）的新实例。这是我的代码。

```
 function Map(w, h) {
        if (typeof w == "undefined")
            this.width = 640;
        else
            this.width = w;

        if (typeof h == "undefined")
            this.height = 480;
        else
            this.height = h;

        this.obj = new Array();
        this.x = new Array();
        this.y = new Array();
        this.backgroundColor = "#C0C0C0";
    }

    Map.prototype.addObject = function(cl, xx, yy) {
        this.obj.push(cl);
        this.x.push(xx);
        this.y.push(yy);
    }

    function newInstance(o, x, y) {
        this.tmp = new o(); //This is what doesn't work.
        tmp.x = x;
        tmp.y = y;
        objects.push(tmp);
        tmp.create();
    }

    Map.prototype.load = function() {
        for (var i = 0; i < this.obj.length; i++) {
            newInstance(this.obj[i], this.x[i], this.y[i]);
        }
    } 
```

我希望它被这样使用：

```
 //When I create the map.
    var mMain = new Map();

    //This cannot be new Player() and new Block() because I don't want to load the map yet. I'm just creating the map.
    mMain.addObject(Player, 320, 240);
    mMain.addObject(Block, 0, 256);
    mMain.addObject(Block, 32, 256);
    //etc...

    //When I load the map.
    mMain.load(); 
```

只是 Player 和 Block 对象如何工作的一个示例。

```
 function Player() {
        this.x = 0;
        this.y = 0;
        //Other variables irrelevant to this problem.
    }
    //Block object code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:35:53.347

我解决了这个问题。我忘记在发布之前检查我的所有代码，所以我提供了虚假信息。而不是“function Player()”，我有“var Player = ObjectResource;” 因为我希望它扩展 ObjectResource 函数。我只需要将其更改为我发布的内容。

# entity-framework - 获取实体的 DbContext

> ID：11180250
> 
> 赞同：1
> 
> 时间：2012-06-24T18:46:33.123
> 
> 标签：entity-framework, dbcontext

好吧，我觉得不得不问这个有点愚蠢，但我想我对实体框架的内部工作原理缺乏了解。

我想尝试使用`DbContext`. 我有一个使用 EF 4.2 的现有 ASP.NET MVC 应用程序。我可以使用以下方式获取我的实体：

```
var context = new MyEntities(); 
```

这很好用。

但是我怎么得到由 a 表示的相同数据`DbContext`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:57:36.610

所以我猜你正在使用 EDMX 设计器提供的默认代码生成器 - 它将使用基于`ObjectContext`重量`EntityObject`的实体。

如果你想使用 DbContext，你必须：

*   关闭默认代码生成 - 在属性窗口中删除EDMX 文件的*自定义工具*
*   下载并安装[DbContext T4 生成器](http://visualstudiogallery.msdn.microsoft.com/7812b04c-db36-4817-8a84-e73c452410a2)（您可以直接从 Visual Studio 的扩展管理器中获取）
*   在 EF 设计器中，从设计器表面的上下文菜单中选择*添加代码生成项*（不在实体上）

现在 EF 将向您的项目添加两个 .tt 文件 - 一个将负责为您的 EDMX 文件中定义的每个实体或复杂类型创建一个新类，第二个将负责创建从`DbContext`您的所有实体派生的类和公开集类型

# html - 在 div 中显示内联

> ID：11180252
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:46:39.307
> 
> 标签：html, css

我正在尝试制作一个大页脚。我已尽力使链接显示为内联，但我无法这样做。请帮忙。谢谢

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<style type="text/css">

#footer{
    width:auto;
    height:600px;   
    background:url(footer.png);
}

#footer div{float:left; width:43.5%}
#footer div:nth-child(2n+1){clear:none}
#footer div:nth-child(3n+1){clear:left}
#footer div li a{float:none; width:auto; display:inline; font-size:1em; padding:0; line-height:1.5em; background-color:transparent}
#footer .contribute{border:none; background-color:transparent}​​​​​

#footer div h4{transition:color 0.3s;  -moz-transition:-color 0.3s; -ms-transition:color 0.3s; -o-transition:color 0.3s; -webkit-transition:color 0.3s}

#footer div:hover h4{color:#e53b2c}

#footer div:nth-child(2n){clear:left}

#footer div{width:100%; clear:both}

#footer .contribute{background-color:rgba(255,255,255,0.8); border-bottom:10px solid rgba(0,0,0,0.025); background-color: transparent;
    border: medium none;}

#footer div li {display:block; width:94.5%; float:left; font-size:0.95em; }

#footer li{padding:0.125em 0}

#footer a{border-bottom:1px solid rgba(0,0,0,0.1)}

#footer a:hover{border-bottom:1px solid rgb(65,183,216)}

#footer a:active, #footer a:focus { background-color:#e53b2c; border: none; } 

</style>
</head>
<body>
    <div id="footer">
    <div class="contribute">
        <h4>Best of Design</h4>
    <ul>
        <li><a href="http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/">Responsive Design</a></li>

    </ul>
    </div>
    <div class="contribute" >
        <h4>Best of Coding</h4>
    <ul>
        <li><a href="http://www.smashingmagazine.com/learning-javascript-essentials-guidelines-tutorials/">JavaScript &amp; jQuery</a></li>
    </ul>
    </div>
    <div id="contribute">
        <h4>Smashing Hub</h4>
        <ul>
            <li><a href="http://www.smashingmagazine.com">Smashing Magazine</a></li>

        </ul>
    </div>
    <div class="contribute">
        <h4>Other Resources</h4>
        <ul>
            <li><a href="http://www.smashingmagazine.com/2011/09/08/to-five-smashing-years-and-a-free-anniversary-ebook-treat/">Free Anniversary eBook</a></li>
        </ul>
    </div>           
</div>    
</body>​
</html> 
```

这是我正在尝试进行的设计的视觉效果， ![在此处输入图像描述](../Images/2aff476ed52c3e10f6b9ed43be45cce9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:58:24.727

你看到人们完成这个问题的典型方式是使用`float`属性。请注意，我添加`overflow: hidden`到`#footer`以清除浮动。

```
#footer { overflow: hidden; }
.contribute {
    float: left;
    width: 25%; } 
```

[http://jsfiddle.net/Wexcode/nxvdG/](http://jsfiddle.net/Wexcode/nxvdG/)

如果您尝试坚持使用内联，您将使用类似的代码，只有内联元素在彼此相邻时表现不同。标记中的空白，即`</div> <div>`会在两个元素之间产生间隙。为了使元素接触，您需要删除标记中的空白，例如`</div><div>`.

```
.contribute {
    width: 25%;
    display: inline-block; } 
```

[http://jsfiddle.net/Wexcode/TkxKm/](http://jsfiddle.net/Wexcode/TkxKm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:05:26.677

你可以用`float: left;`代替来做到这一点`display: inline;`。

你的 CSS 的问题是你覆盖`#footer div`了很多样式：

```
#footer div{width:100%; clear:both} 
```

这是其中之一，也是破坏布局的主要原因。

尝试删除部分样式并对其进行重构以清理一下。你会为此感谢我们的。

“如果你不能理解自己的代码，是时候休息一下并重构了。”

# visual-studio-2010 - 如何在 Resharper 或 VS Studio 中重新格式化 MSBUILD xml？

> ID：11180257
> 
> 赞同：1
> 
> 时间：2012-06-24T18:47:20.890
> 
> 标签：visual-studio-2010, visual-studio, resharper

当我的 MSBUILD 文件具有 .Proj 扩展名时，ReSharper 6 和 VS 2010 都将我的 MSBUILD 文件视为 XML，但它不允许我重新格式化文本。这些选项在 ReSharper 和 VS 2010 中显示为灰色。如何打开它？现在，我不得不将代码复制并粘贴到具有 xml 扩展名的文件中重新格式化并将其复制并粘贴回来，或者重命名具有 xml 扩展名的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T10:31:44.553

截至今天（2013 年 12 月 2 日），JetBrains 的回答是项目文件被排除在代码清理之外。[在他们的代码清理页面](http://www.jetbrains.com/resharper/webhelp/Code_Cleanup__Running_Code_Cleanup.html)上有一个关于这个问题的讨论，其中包含一个名为[验证代码清理与 MSBuild .proj 文件一起](http://youtrack.jetbrains.com/issue/RSRP-316642)使用的错误的链接，其中包含修复版本仅为**9.0**的信息！

因此，似乎没有任何外部工具可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:56:14.740

您可以编写一个[Visual Studio 宏](http://msdn.microsoft.com/en-us/library/b4c73967.aspx)来为您完成所有重命名和重新格式化。宏可以绑定到工具栏和命令（键盘快捷键），因此您可以将其变为单击/快捷方式。

# java - 记录生成的 midi 事件：从时间戳到 midi 文件增量时间的内部转换

> ID：11180258
> 
> 赞同：1
> 
> 时间：2012-06-24T18:47:21.740
> 
> 标签：java, timestamp, midi, javasound

我正在开发一个小型桌面应用程序，它从声音输入端口获取单声道旋律，并使用音高跟踪技术将其转换为 midi 消息，以便转储到 midi 端口或存储到 midi 文件。

当我使用`Receiver`来自`RealTimeSequencer`.

该程序在另一个线程中生成一个便利类`TSMidiMessage`（因此，当获取一个和一个时间戳，以毫秒为单位表示时，现在很清楚或有据可查，这个时间戳到 midi delta 时间的转换是如何在.`ShortMessages``System.currentMilliSecs()``BlockingQueue``Receiver``MidiMessage``Sequencer`

此外，使用十六进制编辑器查看 midi 文件，所有 midi 事件的时间戳都是 0x00，因此它解释了为什么它在导入乐谱编辑器时不显示任何音符。

下面是相关代码的 redux 版本：

```
public class MidiListener implements Runnable {
private BlockingQueue<TSMidiMessage[]> messageQueue = new ArrayBlockingQueue<TSMidiMessage[]>(10);

private volatile boolean run=false;
public volatile boolean start=false;

public static long startTime;

public void run() {
    run = true;

    TSMidiMessage[] messageBlock = null;

    Sequencer sequencer = null;
    Sequence sequence = null;
    Track pista1 = null;
    Receiver receiver = null;

    try{
        log.debug("Starting sequencer");
        sequencer = MidiSystem.getSequencer();
        receiver = sequencer.getReceiver();
        // almacenar mensaje midi
        log.debug("Starting sequence");
        sequence = new Sequence(Sequence.PPQ, cuantizeStringToPPQ(cuantizeMode));
        pista1 = sequence.createTrack();

        //****  General MIDI sysex -- turn on General MIDI sound set  ****
        // http://www.automatic-pilot.com/midifile.html
        log.trace("Loading General MIDI");
        byte[] b = {(byte)0xF0, 0x7E, 0x7F, 0x09, 0x01, (byte)0xF7};
        SysexMessage sm = new SysexMessage();
        sm.setMessage(b, 6);
        MidiEvent me = new MidiEvent(sm,(long)0);
        pista1.add(me);

        log.trace("Add tempo message");
        me =  new MidiEvent(midiTools.forgeTempoMessage(dataHolder.bpm), 0L);
        pista1.add(me);
        log.trace("Add signature message");
        me =  new MidiEvent(midiTools.forgeSignatureMessage(dataHolder.highMeasureNibble, dataHolder.lowMeasureNibble), 0L);
        pista1.add(me);

        //****  set omni on  ****
        ShortMessage mm = new ShortMessage();
        mm.setMessage(0xB0, 0x7D,0x00);
        me = new MidiEvent(mm,(long)0);
        pista1.add(me);

        //****  set poly on  ****
        mm = new ShortMessage();
        mm.setMessage(0xB0, 0x7F,0x00);
        me = new MidiEvent(mm,(long)0);
        pista1.add(me);

        mm = new ShortMessage();
        mm.setMessage(0xC0, 0x00, 0x00);
        me = new MidiEvent(mm,(long)0);
        pista1.add(me);

        sequencer.setSequence(sequence);
        sequencer.recordEnable(pista1, 0);
        sequencer.setTempoInBPM(dataHolder.bpm);

        sequencer.open();
        while(!this.start){
            // hold for a moment
        }
        log.debug("Start recording");
        startTime = System.currentTimeMillis();
        sequencer.startRecording();
    }catch (MidiUnavailableException e) {
        log.error("Midi device error", e);
    } catch (InvalidMidiDataException e) {
        log.error("Invalid midi data", e);
    }
    while(run){
        try {
            messageBlock = messageQueue.take();
            // Message load
            log.debug("Message load");

            if(messageBlock[0] == null)
                throw new InterruptedException("Thread interrupted");

            for(int i=0; i < messageBlock.length; i++){
                receiver.send(messageBlock[i].getMessage(), messageBlock[i].getTimeStamp());
            }

        } catch (InterruptedException e1) {
            log.debug("Thread interrupted");
            this.run = false;
        }
    }
    log.debug("Saving midi file");
    log.trace("Sequence "+sequence);
    log.trace("Length  "+sequence.getMicrosecondLength()+"ms");
    MetaMessage endOfTrack = new MetaMessage();
    try {
        endOfTrack.setMessage(0x2F, new byte[]{}, 0);
        receiver.send(endOfTrack, System.currentTimeMillis());
    } catch (InvalidMidiDataException e1) {
        log.error(e1);
    }
    sequencer.stopRecording();
    sequencer.recordDisable(pista1);
    sequencer.close();
    try {
        midiTools.renderMidiFile(sequence, mainControl.selectedFile);
    } catch (IOException e) {
        log.error("Error while saving midi file", e);
    }
} 
```

}

这是一个生成的小 MIDI 文件的十六进制转储：

```
0000000: 4d54 6864 0000 0006 0001 0001 0004 4d54  MThd..........MT
0000010: 726b 0000 0268 00f0 057e 7f09 01f7 00ff  rk...h...~......
0000020: 5103 0b71 b000 ff58 0406 0324 0c00 b07d  Q..q...X...$...}
0000030: 0000 7f00 00c0 0083 b4b0 5990 4c5d 0080  ..........Y.L]..
0000040: 4c00 0090 4e44 0080 4e00 0090 5064 0080  L...ND..N...Pd..
0000050: 5000 0090 4b68 0080 4b00 0090 506c 0080  P...Kh..K...Pl..
0000060: 5000 0090 4d4f 0080 4d00 0090 582d 0080  P...MO..M...X-..
0000070: 5800 0090 473b 0080 4700 0090 4c39 0080  X...G;..G...L9..
0000080: 4c00 0090 5734 0080 5700 0090 4d2c 0080  L...W4..W...M,..
0000090: 4d00 0090 5731 0080 5700 0090 4b2e 0080  M...W1..W...K...
00000a0: 4b00 0090 5832 0080 5800 0090 4d2d 0080  K...X2..X...M-..
00000b0: 4d00 0090 4e30 0080 4e00 0090 4c2f 0080  M...N0..N...L/..
00000c0: 4c00 0090 4c3c 0080 4c00 0090 4f5d 0080  L...L<..L...O]..
00000d0: 4f00 0090 4a76 0080 4a00 0090 5264 0080  O...Jv..J...Rd..
00000e0: 5200 0090 505b 0080 5000 0090 4c60 0080  R...P[..P...L`..
00000f0: 4c00 0090 5059 0080 5000 0090 4d57 0080  L...PY..P...MW..
0000100: 4d00 0090 505c 0080 5000 0090 4e5a 0080  M...P\..P...NZ..
0000110: 4e00 0090 4d6a 0080 4d00 0090 4b63 0080  N...Mj..M...Kc..
0000120: 4b00 0090 5059 0080 5000 0090 4e5d 0080  K...PY..P...N]..
0000130: 4e00 0090 4d53 0080 4d00 0090 4c52 0080  N...MS..M...LR..
0000140: 4c00 0090 4b41 0080 4b00 0090 4c44 0080  L...KA..K...LD..
0000150: 4c00 0090 4a3f 0080 4a00 0090 4c4b 0080  L...J?..J...LK..
0000160: 4c00 0090 4e4e 0080 4e00 0090 4b5a 0080  L...NN..N...KZ..
0000170: 4b00 0090 4c52 0080 4c00 0090 4e5a 0080  K...LR..L...NZ..
0000180: 4e00 0090 504b 0080 5000 0090 4f56 0080  N...PK..P...OV..
0000190: 4f00 0090 5953 0080 5900 0090 4c55 0080  O...YS..Y...LU..
00001a0: 4c00 0090 4a55 0080 4a00 0090 4e54 0080  L...JU..J...NT..
00001b0: 4e00 0090 4b4f 0080 4b00 0090 4a4c 0080  N...KO..K...JL..
00001c0: 4a00 0090 4c4b 0080 4c00 0090 4b49 0080  J...LK..L...KI..
00001d0: 4b00 0090 4e3d 0080 4e00 0090 4f4b 0080  K...N=..N...OK..
00001e0: 4f00 0090 4e52 0080 4e00 0090 4d4b 0080  O...NR..N...MK..
00001f0: 4d00 0090 4b49 0080 4b00 0090 4f3c 0080  M...KI..K...O<..
0000200: 4f00 0090 4d42 0080 4d00 0090 4b47 0080  O...MB..M...KG..
0000210: 4b00 0090 4f41 0080 4f00 0090 4b4c 0080  K...OA..O...KL..
0000220: 4b00 0090 4d44 0080 4d00 0090 4e3e 0080  K...MD..M...N>..
0000230: 4e00 0090 4c44 0080 4c00 0090 5042 0080  N...LD..L...PB..
0000240: 5000 0090 4b3b 0080 4b00 0090 4c3c 0080  P...K;..K...L<..
0000250: 4c00 0090 4b3e 0080 4b00 0090 4c3b 0080  L...K>..K...L;..
0000260: 4c00 0090 4b3a 0080 4b00 0090 4e35 0080  L...K:..K...N5..
0000270: 4e00 0090 4922 0080 4900 00ff 2f00       N...I"..I.../. 
```

可能值得一提的是，我正在使用小的（但我猜那些是正确的）刻度分辨率值（以 PPQ 表示），因为我希望它有助于量化 midi 事件，这可能是对此的解释之一问题。我的另一个想法是发送到接收器的时间戳数据与其内部工作不一致，因为它必须以其他方式而不是纪元时间戳表示。

谢谢你=)

* * *

编辑 1：阅读 Java Sound Api Progrramer 指南（第 10 章，“发送到设备的消息的时间戳”段落）后，我发现了这一点：

> Java Sound API 中设备之间发送的消息可选地伴随的时间戳与标准 MIDI 文件中的时间值完全不同。MIDI 文件中的时序值通常基于节拍和速度等音乐概念，并且每个事件的时序测量自上一个事件以来经过的时间。相比之下，发送到设备接收器对象的消息上的时间戳总是以微秒为单位测量绝对时间。**具体来说，它测量自拥有接收器的设备打开以来经过的微秒数**。

所以我发现我发送的时间戳没有以预期的格式表示，但我做了一个快速测试，将这些时间戳替换为 -1 值，这意味着它应该忽略时间戳值，结果是同样，事件中没有增量时间戳。

* * *

编辑 2：当我仍在使用它时，我将那些纪元时间戳转换为具有微秒分辨率的累积时间戳格式，预期来自`Receiver`. 但这并不能使它起作用（但改进了代码=））。此外，我尝试将 PP 分辨率更改为更高的值，96，这应该足够好，正如 Java 声音指南中所指定的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:44.707

好的，所以我会回答我自己的问题，因为我找到了解决问题的方法。

如果它不能正常工作，为什么要使用 a`Receiver`来获得`MidiMessages`正确的时间？我们可以绕过这个并`MidiEvents`手动伪造，使用以微秒为单位的累积时间戳并将其转换为以刻度表示的累积时间戳，这与 PPQ 参数成正比。

```
private long microsecondTickToPPQTick(long msTick, Sequencer seq){
    long ret = msTick / 1000;
    double rawValue = ret / this.tickSize;

    double valueA  = (rawValue - Math.floor(rawValue)); 
    double valueB = ((Math.floor(rawValue)+1) - rawValue);
    double min = Math.min(valueA, valueB);

    if(min == valueA){
        ret =(long) Math.floor(rawValue);
    }else{
        ret =(long) (Math.floor(rawValue)+1);
    }

    log.info("MidiEvent's timestamp: "+ret);

    return ret;
} 
```

此方法还将音符量化为选定的 PPQ 以及随之而来的音符分辨率。只需使用以下公式，您就可以找到以毫秒为单位的刻度大小：

```
tickSize = (60.0/bpm)/(double)ppq; 
```

然后你得到正确的刻度，并将 MidiEvent 添加到序列中。

```
// startTime holds the value for the epoch time when the sequencer started recording.
long microTS = (messageBlock[i].getTimeStamp() - startTime)*1000;
long tick = microsecondTickToPPQTick(microTS, sequencer);
MidiEvent me = new MidiEvent(messageBlock[i].getMessage(), tick);
track1.add(me); 
```

# android - 在 Animationlistener 中使用变量

> ID：11180265
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:47:57.450
> 
> 标签：android, events, animation

我如何在动画监听器中使用变量

前任。

```
for(int i = 0; i<ids.length; i++) {

    //Doing some animation stuff based on
    //imageView = (ImageView) findViewById(ids[i]);

//I want to play a sound on the specific views animationstart           
    scalePause.addListener(new AnimatorListenerAdapter() {
    public void onAnimationStart(Animator animation) {
    sounds.play(letterSounds[i], 1.0f, 1.0f, 0, 0, 1.0f);
} 
```

}); }

Eclipse 错误：无法引用以不同方法定义的内部类中的非最终变量

（指我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:51:47.173

做这个

```
for(int i = 0; i<ids.length; i++) {
    ...
    ...
    //I want to play a sound on the specific views animationstart 
    final int index = i;      // assign to a final variable and use it.    
    scalePause.addListener(new AnimatorListenerAdapter() {
    public void onAnimationStart(Animator animation) {
    sounds.play(letterSounds[index ], 1.0f, 1.0f, 0, 0, 1.0f);
} 
```

# javascript - 使用 Bookmarklet 检索图像 URL

> ID：11180266
> 
> 赞同：0
> 
> 时间：2012-06-24T18:48:28.307
> 
> 标签：javascript, jquery, html, google-chrome-extension

我正在为我的网站制作书签。

单击时，我需要它来做两件事中的任何一件。

1.  检索页面上的所有图像，然后在书签中显示它们。

或者

1.  打开后，在页面上单击的下一个图像将加载到小书签中。

我认为我正在努力解决的部分是我根本无法让小书签与页面交互，这几乎就好像它不知道页面是否存在，如果这有意义？

Ps 我正在使用 google chrome 进行测试，并将其作为扩展加载。

# linux - 如何检查具有相同名称但不同扩展名的不同目录中的文件

> ID：11180269
> 
> 赞同：1
> 
> 时间：2012-06-24T18:48:52.317
> 
> 标签：linux, bash, text

我有 4 个目录（名称：英语、阿拉伯语、法语和俄语），其中包含一些名称相同但扩展名不同的文件。以下是此类文件的示例：

```
MyFile104.en
MyFile104.ar
MyFile104.fr
MyFile104.ru 
```

在某些情况下，可以看到一个文件存在于一个目录中，但它已从其他目录中删除（例如，只有“MyFile23.ar”和“MyFile23.en”存在）。

我想要做的是比较这些目录中的文件名并删除所有目录中不存在的文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:07:13.000

All files with the specified extensions are processed. Subdirectories of the specified directories are ignored. File .extensions other than the ones specified are ignored. Files, whose names end with any of the specified .extensions, and which don't occur in all of specified directories, are removed.

Note: the script assumes that there are no files with a wrong file extension in the directories being processed. For example, any `.ar` or `.en` or `.fr` in the `Rusian` directory may cause undesirable results!.

```
langs=( Arabic English French Russian )
extns=( ar en fr ru )
rxext="${extns[@]}" 
rxext="${rxext// /\\|}"  # regex: for .extensions

find "${langs[@]}" -maxdepth 1 -type f -regex ".*\.\($rxext\)$" -printf '%f\n' |
  sed -n "s/\(.*\)\..*$/\1/p" | sort | uniq -c |           # name is in how many dirs?
    sed -n "/^ *${#langs[@]} \(.*\)/!{s/^ *[0-9]\+ //p}" | # names not in all dirs
      xargs -I {} find "${langs[@]}" -maxdepth 1 -type f -regex ".*\/{}\.\($rxext\)$" |
        xargs -I {} rm {} 
```

If you want to keep and ignore files with non-native language extensions in a given language's directory, then this next script will do just that.

```
all="/tmp/all_${0##*/}"
del="/tmp/del_${0##*/}"

extns=( ar     en      fr     ru      )
langs=( Arabic English French Russian )

# list names (not paths) whose extensions match a given directory
for (( i=0; i<${#extns[@]}; i++ )) do
  find "${langs[i]}" -maxdepth 1 -type f -name "*.${extns[i]}" -printf '%f\n'
done >"$all"

# list names not in all dirs
sed -nr "s/(.*)\..*$/\1/p" "$all" | sort | uniq -c |         # name is in how many dirs?
  sed -nr "/^ *${#extns[@]} (.*)/!{s/^ *[0-9]+ //p}" >"$del" 

# list names in deficit; add paths; then delete files
grep -F -f "$del" "$all" |
  sed -r "$(for (( i=0; i<${#extns[@]}; i++ )) ;do
              echo "s/.*\.${extns[i]}$/${langs[i]}\\/&/;t;"
            done)" | xargs -d "\n" rm

rm "$all" "$del" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:04:29.357

```
# create test environment
$ for i in ar fr ru en; do mkdir -p $i; touch $i/t1.{fr,en,ru,ar}; done
$ rm en/t1.fr

# print filenames to be deleted (less than 4 occurances)
$ find ar en fr ru  -name t1.'*' | sed 's/^.*\///' | sort | uniq -c | awk '$1!=4{print $2}'

# remove files with less than 4 occurances
$ find ar en fr ru -name $(find ar en fr ru  -name t1.'*' | sed 's/^.*\///' | sort | uniq -c | awk '$1!=4{print $2}') -delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:17:19.793

如果你有支持关联数组的 Bash 4：

```
#!/bin/bash
declare -A languages
languages["English"]=en
languages["Arabic"]=ar
languages["French"]=fr
languages["Russian"]=ru

for language in "${!languages[@]}"
do
    for file in MyFile*."${languages[language]}"
    do
        rmflag=false
        for compare in "${!languages[@]}"
        do
            compfile=compare/${file##*/}
            compfile=${compfile%.${languages[language]}}.${languages[compare]}
            if ! $rmflag && [[ ! -e $compfile ]]
            then
                rm "$file"
                rmflag=true
            elif $rmflag && [[ -e $compfile ]]
            then
                rm "$compfile"
            fi
        done
    done
done 
```

它未经测试，如果有不符合要求的文件`MyFile*.{en,ar,fr,ru}`或主目录下有目录，它可能无法执行您想要的操作。

这是另一个适用于 Bash 3 或 4 的版本：

```
#!/bin/bash
for dir in English Arabic French Russian
do
    for file in "$dir"/*
    do
        base=${file##*/}
        base=${base%.*}
        files=({English,Arabic,French,Russian}/"$base".{en,ar,fr,ru})
        if (( ${#files[@]} != 4 ))
        then
            rm -f {English,Arabic,French,Russian}/"$base".{en,ar,fr,ru}
        fi
    done
done 
```

再次，未经测试。在与以前相同的条件下或文件放在错误的位置（例如，如果一个英国人正在访问法国），它可能无法满足您的需求。;-)

# objective-c - UIScrollView hitTest 中的 UIPickerView 禁用 Scrollview？

> ID：11180272
> 
> 赞同：3
> 
> 时间：2012-06-24T18:49:54.033
> 
> 标签：objective-c, ios, uiview, uiscrollview, uipickerview

我目前正在构建一个在滚动视图上具有调整大小的 UIPickerView 的应用程序，我面临的问题是，当您尝试滚动选择器时，滚动视图正在移动。

在过去的几个小时里，我试图通过创建执行以下 hitTest 的 UIScrollView 子类选择选择器时禁用滚动视图来解决此问题：

```
- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView* result = [super hitTest:point withEvent:event];
    if ([result.superview isKindOfClass:[UIPickerView class]])
    {
        NSLog(@"Cancel touch");
        self.canCancelContentTouches = NO;  
        self.delaysContentTouches = NO;
        self.scrollEnabled = NO;
    }
    else 
    {
        self.canCancelContentTouches = YES; 
        self.delaysContentTouches = YES; 
        self.scrollEnabled = YES;
    }
    return result;
} 
```

使用上面的代码，我发现当我单击并按住 UIPickerView 的某些部分时，它会取消触摸并禁用 UIScrollview OK，我可以移动 UIPicker 以选择新值，但是当我在 PickerView 上的某些区域并执行 NSLog 时在报告的类上，如下所示

```
NSLog(@"%@", [result.superview class]); 
```

它将 UIPickerTableViewWrapperCell 输出到控制台，并且永远不会输入 isKindOfClass[UIPickerView class]。

我也尝试过 isMemberOfClass 也不起作用。

任何帮助，将不胜感激。

谢谢亚伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:27:23.453

我想我已经弄清楚了，通过搜索类描述以查看它是否包含 @"UIPicker*"

```
- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{

    UIView* result = [super hitTest:point withEvent:event];

    NSString *viewDescription = [result.superview class].description;
    NSRange range = [viewDescription rangeOfString : @"UIPicker"];

    if (range.location != NSNotFound) 
    {
        NSLog(@"Cancel touch on ScrollView");
        self.canCancelContentTouches = NO;  
        self.delaysContentTouches = NO;
        self.scrollEnabled = NO;
    }
    else 
    {
        self.canCancelContentTouches = YES; 
        self.delaysContentTouches = YES;
        self.scrollEnabled = YES;
    }
    return result;
} 
```

现在，当我拖动 UIPicker 时，它可以完美运行，并且滚动视图根本不会移动，除非我单击它并拖动它。

亚伦

# php - 如何处理多个表而不获取重复数据？(MySQL/PDO)

> ID：11180278
> 
> 赞同：7
> 
> 时间：2012-06-24T18:51:12.780
> 
> 标签：php, mysql, pdo

我正在尝试创建一个可以容纳大约 1000 支枪的枪支站点。这不是很多数据库条目，但我试图让数据库尽可能轻。我创建了五个表，牢记规范化，并且在一次查询中将数据放入所有五个表时遇到问题。我的数据库结构如下：

```
+-----------------+ +-----------------+ +-----------------+ +-----------------+ 
|       make      + |      model      | |      image      | |      type       |
+-----------------+ +-----------------+ +-----------------+ +-----------------+
| PK | make_id    | | PK | model_id   | | PK | model_id   | | PK | type_id    |
+-----------------+ +-----------------+ +-----------------+ +-----------------+
|    | make_name  | |    | make_id    | |    | image_path | |    | type_name  |
+-----------------+ +-----------------+ +-----------------+ +-----------------+  
                    |    | type_id    |
                    +-----------------+           +------------------+
                    |    | caliber_id |           |      caliber     |
                    +-----------------+           +------------------+
                    |    | model_name |           | PK | caliber_id  |
                    +-----------------+           +------------------+ 
                    |    | cost       |           |    | caliber_name|
                    +-----------------+           +------------------+
                    |    | description|
                    +-----------------+ 
```

这可能太规范化了，但这就是我正在使用的；）

让我展示一下代码：

**形式**

```
<form action="post" method="addProduct.php" enctype="multipart/form-data">
    make:    <input type="text" name="make" />
    model:   <input type="text" name="model" />
    type:    <input type="text" name="type" />
    caliber: <input type="text" name="caliber" />
    cost:    <input type="text" name="cost" />
    desc.:   <input type="text" name="description" />  
    Image:   <input type="file" name="image" id="image" />
             <input type="submit" name="submit" value="Add Item" />
</form> 
```

**添加产品.php**

```
$make        = $_POST['make'];
$model       = $_POST['model'];
$type        = $_POST['type'];
$caliber     = $_POST['caliber'];
$cost        = $_POST['cost'];
$description = $_POST['description'];
$image       = basename($_FILES['image']['name']);
$uploadfile  = 'pictures/temp/'.$image;
if(move_uploaded_file($_FILES['image']['tmp_name'],$uploadfile))
{
    $makeSQL  = "INSERT INTO make (make_id,make_name) VALUES ('',:make_name)";
    $typeSQL  = "INSERT INTO type (type_id,type_name) VALUES ('',:type_name)";
    $modelSQL = "INSERT INTO model (model_id,make_id,type_id,caliber,model_name,cost,description,) VALUES ('',:make_id,:type_id,:caliber,:model_name,:cost,:description)";
    $imageSQL = "INSERT INTO image (model_id,image_path) VALUES (:model_id,:image_path)";       
    try
    {
        /* db Connector */
        $pdo = new PDO("mysql:host=localhost;dbname=gun",'root','');
        /* insert make information */
        $make = $pdo->prepare($makeSQL);    
        $make->bindParam(':make_name',$make);
        $make->execute();
        $make->closeCursor();
        $makeLastId = $pdo->lastInsertId();
        /* insert type information */
        $type = $pdo->prepare($typeSQL);
        $type->bindParam(':type_name',$type);
        $type->execute();
        $type->closeCursor();
        $typeLastId = $pdo->lastInsertId();
        /* insert model information */          
        $model = $pdo->prepare($modelSQL);
        $model->bindParam(':make_id',$makeLastId);
        $model->bindParam(':type_id',$typeLastId);
        $model->bindParam(':caliber',$caliber);
        $model->bindParam(':model_name',$model);
        $model->bindParam(':cost',$cost);
        $model->bindParam(':description',$description);         
        $model->execute();
        $model->closeCursor();          
        $modelLastId = $pdo->lastInsertId();
        /* insert image information */
        $image = $pdo->prepare($imageSQL);
        $image->bindParam(':model_id',$modelLastId);
        $image->bindParam(':image_path',$image);
        $image->execute();
        $image->closeCursor();
        print(ucwords($manu));
    }
    catch(PDOexception $e)
    {
        $error_message = $e->getMessage();
        print("<p>Database Error: $error_message</p>");
        exit(); 
    }
}
else
{
    print('Error : could not add item to database');
} 
```

因此，当我使用上面的代码添加一个项目时，一切正常，但是当我使用相同的制造商名称添加另一个项目时，它会复制它。我只是想让它意识到它已经存在而不是复制它。

我正在考虑进行某种类型的检查以查看该数据是否已经存在，如果存在则不要输入数据，而是获取 id 并在需要的其他表中输入它。

我想到的另一件事是为最有可能被复制的数据创建一个下拉列表，并将该值分配为 id。但是，我简单的头脑无法找出最好的方法:(希望所有这些都是有道理的，如果没有，我会尝试详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:15:06.443

您需要弄清楚是什么构成了独特的（不重复的）品牌、型号、类型和口径。

然后，您需要为那些强制唯一性的表创建唯一索引。见 [http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

例如，您可以使用 make_id、model_name 和 caliber_id 来唯一标识一个模型。你需要

```
CREATE UNIQUE INDEX UNIQUEMODEL ON MODEL(make_id, caliber_id, model_name) 
```

设置您的唯一索引。请注意，主键索引可以是唯一索引，但您也可以有其他唯一索引。

然后，您可以使用`INSERT ON DUPLICATE KEY UPDATE`来填充您的表格。见这里：[http ://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

为了使所有这些正常工作，您必须在尝试填充每一行之前确保存在适当`type`的`caliber`、、和行：您需要前三个表中的 id 来填充第四个表。`make``model`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:20:45.873

如果您的字段只有一组数据（calibre 肯定是一个，我怀疑 manfacturer 也可以），您可以预先填充数据库中的表并将其转换为查找字段。

在您的 HTML 表单上，您可以打印一个选择框，而不是文本输入字段。select 的值是查找字段中的 ID - 您无需担心在数据库中的查找字段中添加任何内容。

当我过去不得不这样做时，我编写了一个函数来进行数据插入；它检查该值是否在表中。如果是，则返回字段的索引；否则，它将其添加为新条目，并返回新条目的 ID。这不是最优雅的解决方案，但效果很好。

# jquery - jquery 展开切换

> ID：11180279
> 
> 赞同：0
> 
> 时间：2012-06-24T18:51:19.293
> 
> 标签：jquery, toggle, expand

[http://jsfiddle.net/w6eqk/1/](http://jsfiddle.net/w6eqk/1/)

我想将内容扩展到它的高度（不固定）。我自己完成了这项工作，并且我在[http://jsfiddle.net/w6eqk/1/](http://jsfiddle.net/w6eqk/1/)上找到了它的解决方案，并且按预期工作正常。但是当我复制它时它搞砸了。我想显示切换扩展功能超过 1 次。它仅适用于单个但不适用于多个。这是多内容的演示链接。[http://jsfiddle.net/w6eqk/129/](http://jsfiddle.net/w6eqk/129/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:11:45.550

```
$(document).ready(function() {
    $('div.view').each(function(){
        $(this).removeClass('view');
        var innerh= $(this).height();
        $(this).next().toggle(function(){
            $(this).prev().animate({height: innerh},200);
        },function(){
            $(this).prev().animate({height:40},200);
        });
        $(this).addClass('view');
    });
});​ 
```

试试这个，每次单击元素时都会触发切换方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:36:11.123

试试这个，只是更新了一点你的代码（为了达到这个[效果](http://jsfiddle.net/w6eqk/129/)）

```
$(document).ready(function() {
    $('div.slide').click(function() {
        $('div.view').each(function(i){
            var $dV = $(this);
            $dV.removeClass('view');  
            var innerHeight = $dV.height();
            $dV.addClass('view');
            if(!$dV.data('innerHeight')) $dV.data('innerHeight', innerHeight);
            $dV.animate({
                height: (($dV.height() == 40)? $dV.data('innerHeight')  : "40")
            }, 500);
        });
    });    
});​ 
```

[**演示。**](http://jsfiddle.net/heera/w6eqk/131/)

# javascript - jscrollpane - 水平滚动

> ID：11180284
> 
> 赞同：0
> 
> 时间：2012-06-24T18:52:15.007
> 
> 标签：javascript, jquery, html, css, jscrollpane

我在我的网络应用程序中使用 jquery jscrollpane 插件[http://jscrollpane.kelvinluck.com/ 。](http://jscrollpane.kelvinluck.com/)我想用它只在水平位置滚动。

如此处所示[http://jscrollpane.kelvinluck.com/basic.html](http://jscrollpane.kelvinluck.com/basic.html)

这是我的html：

```
<div class="addbox horizontal-only scrollpane">
<h4><span class="addbox-text">Pick your best work from <b class="highlight-text">Flickr</b> to display in your portfolio</span></h4>
<div class="addmenu-item"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info">Orchid Profiles</span></div>
<div class="addmenu-item"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info">Orchid Profiles</span></div>
</div> 
```

CSS：

```
.scroll-pane
{
height: auto;
max-height: 400px;
overflow: auto;
}
.horizontal-only
{
height: auto;
max-height: 200px;
} 
```

查询：

```
$(".addbox").jScrollPane(); 
```

但它不起作用（高度搞砸了，jscrollpane 处于垂直位置）。这是其余代码的css [https://gist.github.com/2984404](https://gist.github.com/2984404)

谢谢！

**更新**

请检查这个 jsfiddle [http://jsfiddle.net/cWcWb/](http://jsfiddle.net/cWcWb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T18:09:25.353

这是因为您的宽度`.addbox`足以显示所有内容而无需滚动（**700px**）。

例如，尝试将其更改为**400px**，您将看到水平滚动出现

# python - 将 textarea 值直接上传到 Dropbox

> ID：11180286
> 
> 赞同：1
> 
> 时间：2012-06-24T18:52:30.490
> 
> 标签：python, dropbox-api

上一个问题在这里：[https](https://stackoverflow.com/questions/11173241/uploading-contents-of-a-textarea-to-dropbox#comment14658356_11173241) ://stackoverflow.com/questions/11173241/uploading-contents-of-a-textarea-to-dropbox#comment14658356_11173241 ，这显然对我没有好处。

我解决这个问题的新方法是让我的 Web 界面与 python dropbox api 交互。所以我让用户运行身份验证步骤，对我的应用程序进行身份验证等。我遇到问题的部分是内容html 文本区域作为 html 文件保存到 Dropbox。

例如，textarea 的内容将如下所示：

```
<html>
<head><title>Test Page</title></head>
<body>
<p>This is some testing stuff</p>
</body>
</html> 
```

有什么方法可以将内容作为 html 文件直接保存到 Dropbox？或者有没有办法绕过必须先将内容保存到服务器上的文件然后将其发送到保管箱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:03:44.977

[您可以在https://www.dropbox.com/developers/reference/api](https://www.dropbox.com/developers/reference/api)查看 API - 您想要的调用是**files_put**。

没有理由将其写入文件；您可以直接构造请求。当 API 请求文件句柄时，请改用字符串流。

# mysql - 如何将 Sphider 搜索添加到我的网站？“无法连接到数据库”

> ID：11180289
> 
> 赞同：2
> 
> 时间：2012-06-24T18:53:06.777
> 
> 标签：mysql, sphider

我下载了[Sphider 搜索引擎](http://www.sphider.eu/)，目前正在尝试通过我的本地主机运行它。我将它提取到我的根文件夹中，并在 HTML 中创建了一个搜索栏：

```
<div id="searchwrapper">
<form action="../sphider-1.3.5/search.php" method="get" title="eurobytes search">
<input type="text" class="searchbox" name="s" value="" action="../sphider-1.3.5/include/js_suggest/suggest.php" columns="2" autocomplete="off" delay="1500" bgcolor="transparent"/>
<input type="hidden" name="search" value="1">
<input type="image" src="../images/search.png" height="15" class="searchbox_submit" value="search" />
</form>
</div> 
```

但是当我输入一些东西时，我得到了这个错误：

> 无法连接数据库，请检查用户名、密码和主机是否正确。

我对 MySQL 很`install.txt`陌生，我阅读了 sphider-1.3.5 文件夹中的 , 并执行了以下操作：

> mysql -u 你的用户名 -p 提示时输入你的密码。b) 在 MySQL 中，输入：CREATE DATABASE sphider_db；

但是，当我输入时，`CREATE DATABASE sphider_db`我得到了这个：

![创建数据库](../Images/55d536500743e8e0668559a49cc057a1.png)

我现在不知道该输入什么。我试过`sphider_db` `exit`但没有任何反应？

对不起，如果这个问题对大多数人来说是常识，但我刚刚开始使用 MySQL/Sphider。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:52:39.253

您是否编辑了 settings/database.php？听起来像是配置问题...这里有 2 个步骤来开始故障排除：

1.  检查您的数据库名称、用户名和密码是什么。
2.  确保您已使用该信息编辑了 database.php。

这是您需要使用数据库设置和用户凭据（v1.3.5）编辑的 database.php 中的代码片段

```
/*********************** 
Database 1 settings
***********************/

// Name of database
$database1 = "test";

// MySQL User
$mysql_user1 = "test-user";

// MySQL Password
$mysql_password1 = "test-user-pw";

// MySQL Host
$mysql_host1 = "localhost";

 // Prefix for tables
$mysql_table_prefix1 = "test_";

// Status of database
$db1_set = "1"; 
```

# java - 将 xls 文件放入 jar 中

> ID：11180290
> 
> 赞同：0
> 
> 时间：2012-06-24T18:53:12.540
> 
> 标签：java, eclipse, excel, jar, metamodel

我有一个使用 metaModel 查询的 xls 电子表格，并且我想将 xls 文件保留在 jar 中，因为它不会被更新。用于创建数据上下文的方法不允许输入流，我尝试使用以下代码：

```
DataContext dataContext = DataContextFactory.createExcelDataContext(getClass().getResourceAsStream("database.xls")); 
```

不幸的是，这不起作用，因为方法 createExcelDataContext 不将输入流作为参数。有什么办法可以将文件保存在 jar 中？

似乎最简单的方法就是导出到 csv，因为这很容易完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:10:32.687

鉴于可以从 InputStream 创建其他类型的上下文，我猜这是 Excel 的限制，如果 Excel 文件不在文件系统上，您将无法打开它。

考虑从 jar 中提取文件并将其内容复制到临时文件中，该文件可能会在应用程序结束时被删除。请参阅[File.createTempFile()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)和[File.deleteOnExit()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)。

# php - 如何从 Gearman 获取计划作业列表？

> ID：11180291
> 
> 赞同：4
> 
> 时间：2012-06-24T18:53:14.887
> 
> 标签：php, gearman

我目前正在评估 Gearman 以在我们的后端分出一些昂贵的数据导入工作。到目前为止，这看起来很有希望。但是，缺少一件我似乎无法找到任何信息的东西。**如何从 Gearman 获取计划作业列表？**

我意识到我可以使用管理协议来获取每个功能的当前排队作业的数量，但我需要有关实际作业的信息。还可以选择使用持久队列（例如 MySQL）并在数据库中查询作业，但绕过 Gearman 获取此类信息对我来说是非常错误的。除此之外，我没有想法。

可能我根本不需要这个:) 所以这里有更多关于我想做的背景，我愿意接受更好的建议。客户端和工作人员都在 PHP 中运行。在我们的管理界面中，管理员可以为客户触发新的导入；由于导入需要一段时间，因此它作为后台任务启动。现在我希望能够回答的简单问题是：该客户端的最后一次导入是什么时候？该客户端的导入是否已排队（在这种情况下，触发新导入应该无效）？很高兴：这个工作在队列中的哪个位置（这样我可以估计它什么时候运行）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:21:25.067

Admin 协议是您通常使用的，但正如您所发现的，它不会列出队列中的实际任务。我们通过跟踪我们在应用程序层中启动的当前任务来解决这个问题，并在我们的工作人员中有一个回调告诉应用程序何时任务完成。这允许我们在任务完成时执行清理、通知等，并允许我们将此逻辑保留在应用程序中，而不是工人本身。

与进度相关的最好方法是使用 Gearman 本身内置的进度机制，在 PHP 模块中，您可以使用`$job->sendStatus(percentDone, 100)`. 然后，客户端可以使用任务句柄（将在您启动作业时返回）从服务器检索此值。这将允许您在界面中向用户显示当前进度。

只要您的应用程序中有当前正在运行的任务，您就可以用它来回答是否有类似的任务已经在运行，但您也可以使用 gearman 内置的作业合并/重复数据删除；添加任务时查看 $unique 参数。

当前队列中的位置将无法通过 Gearman 获得，因此您也必须在应用程序中执行此操作。我不会向 Gearman 持久层询问这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T13:20:29.237

您几乎已经给了自己答案：使用 DBRMS（MySQL 或 Postgres）作为持久性后端并查询 gearman_queue 表。

例如，我们开发了一个混合解决方案：我们为作业生成并传递一个唯一 id，我们将其作为第三个参数传递给 doBackground() ( [http://php.net/manual/en/gearmanclient.dobackground.php](http://php.net/manual/en/gearmanclient.dobackground.php) ) 在排队时工作。

然后我们使用这个 id 查询 gearman 表来验证查看 'unique_key' 表字段的作业状态。您还可以获取队列位置，因为记录已经排序。

Pro Bonus：我们还在工作人员内部捕获异常。如果作业失败，我们将作业负载（这是一个 JSON 序列化对象）写入文件，然后通过 cronjob 获取文件并重新排队作业，增加“重试”内部计数器，因此我们最多重试单个作业 3 次，如果仍然失败，请稍后检查作业。

# security - 在线测试安全措施

> ID：11180293
> 
> 赞同：1
> 
> 时间：2012-06-24T18:53:40.723
> 
> 标签：security, authentication

我正在为客户开发一项功能，在该功能中，用户自愿在线进行重要测试。测试很困难，用户会非常有动力去做好（想想 SAT 或 GRE 等）......所以也有很高的作弊动机。显然有 3rd 方服务，其中人工通过网络摄像头虚拟监控应试者，但它们非常昂贵，而且我们没有足够的预算。我们仍然需要尽可能地让用户难以玩弄系统。我们怀疑他们可能会尝试的一些事情是：

*   让其他人为他们参加考试（一个捏打者）。

*   使用不同的配置文件多次参加测试以练习并获得不公平的优势。

*   与朋友一起参加考试，或者在与朋友联系时告诉他们答案。

问题顺序会改变，答案的顺序也会改变。测试将是定时的，并且是“打开书本”格式，所以我们并不真正担心用户在网上查找内容，但我们不能让他们共享他们的屏幕并让其他人帮助他们。**因此，此时的主要关注点是确保用户实际上是他们所说的人**（而不是其他人）。

以下是我们正在考虑的一些安全措施：

*   要求用户的设备有一个网络摄像头，我们将激活它并在测试期间记录/拍摄用户（当然要征得用户的同意）。

*   要求用户验证任意银行存款金额（可能通过 PayPal）。没有什么可以阻止他们开设多个银行账户，但至少这是一个很大的麻烦。

*   真正可怕的使用条款，如果用户被发现作弊，就会威胁到法律诉讼。

**问题：**我们可以/应该采取任何其他措施来确保我们的测试安全且结果可靠吗？

**澄清：**我们意识到，只要有足够的资源和决心，任何安全系统最终都可能被打败。*这个问题的目标不是找到一个神奇的无与伦比的解决方案，而是想办法提高赌注，让大多数*用户不值得作弊。本着这种精神，我更喜欢关注什么*可以*做而不是什么*不能*做的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:36:34.337

众所周知，作弊的方式有很多种。你的目标是尽可能地限制作弊的可能性。 [在线课程中的作弊](http://www.schneier.com/blog/archives/2012/06/cheating_in_onl_1.html)一直是一个热门话题。

*   捏击手：

这种类型的攻击可以通过多种方式进行。即使你有一个摄像头在看这个人，考生看到的视频也可能会镜像到另一个屏幕上。[一个捏打者可以看到问题，只是阅读他的答案或以其他方式在隐蔽的频道](http://en.wikipedia.org/wiki/Covert_channel)中向考生提供答案。

这种攻击的可能对策是让麦克风查看他们是否在与任何人交谈。您还可以在他们参加考试时录制屏幕。这可能会阻止他们打开聊天窗口或查看其他未经授权的内容。（有点像[Elance 追踪器](http://help.elance.com/entries/34645-what-is-elance-tracker#whatiselancetracker)）

*   用户验证：

为了注册，该人应附上其照片身份证的扫描件。通过这种方式，您可以将该人的照片链接到一个唯一标识符，例如驾驶执照号码。在此人开始参加测试之前，请用户直视相机，并确保您获得了可以根据他们的照片 ID 进行验证的他们的良好图像。

针对这个系统的一个简单攻击是使用 Photoshop 修改 id。为了使这种攻击更加困难，您可以根据信用卡/借记卡交易验证他们的姓名。两张卡上的名字应该一致。

evercookie[可](http://en.wikipedia.org/wiki/Evercookie)用于跟踪机器以查看是否正在使用同一台计算机。尽管有正当理由，这可能会发生，但它也可以用来标记测试以供进一步审查。evercookie 的一个变体是删除具有随机值的文件或设置具有随机值的注册表项以“标记”该机器。

# c++ - operator[] 重载和常量

> ID：11180301
> 
> 赞同：0
> 
> 时间：2012-06-24T18:54:16.367
> 
> 标签：c++, operator-overloading, constants

在我的代码中，我创建了两个覆盖 [] 运算符的模板函数（构建我的 STL 映射版本的练习）：

```
const V& operator[](const K& key) const;    // X = map["kuku"]

V& operator[](const K& key);                // map["kuku"] = x 
```

然后我通过以下函数使用运算符：

```
invokeStkCmd (my_stacks[stk_name], my_cmds[crnt_word]); 
```

谁的模板是

```
invokeStkCmd (StackComp* stkPtr, const shake_cmds_t cmd) 
```

此调用使用`V& operator[](const K& key)`模板（至少对于第二个参数），它可以向地图添加条目，而不是我想要的其他模板。参考 Stack Overflow 上最近的运算符重载帖子，看来我的运算符重载模板函数没问题。我是否需要在我的 invokeStkCmd 函数中做一些事情，或者我的运算符重载函数毕竟不准确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:12:47.067

在处理要修改时行为差异很大的对象时，这是一个常见问题。这是由一个简单的事实引起的，即仅基于参数类型而不是返回类型或返回值的使用来解决重载。所以最简单的解决方案是在索引发生之前使用 a`const_cast`来制作地图对象：`const`

```
invokeStkCmd (my_stacks[stk_name], const_cast<my_map<Whatever> const&>(my_cmds)[crnt_word]); 
```

由于冗长且容易出错，这可能无法满足您的要求；在这种情况下，还有一种高级方法可以利用转换运算符重载根据其返回类型解析这一事实，这与普通函数不同。我在[这里](https://stackoverflow.com/a/2440749/51831)发布了这样的答案。请注意，很难做到正确。

# python - 在python中将'A'类型的对象作为'B'类型的实例

> ID：11180308
> 
> 赞同：2
> 
> 时间：2012-06-24T18:55:26.947
> 
> 标签：python, python-2.7

我要问的可能看起来很奇怪，但这里有一个例子：

我有一个**班级'A'**

```
class A:
    a=1 
```

其他我有**'B'类**

```
class B:
    def __init__(self, obj):
        self.obj = obj # obj is any object 
```

现在我使用：

```
first = A()
second = B(first)
isinstance(second, A) 
```

我希望**第 3 步是真的**。即，无论 B 采用什么对象类，它都应该将该**对象类型的****实例添加**到对象。

 **在 Python 中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:58:01.033

使用继承，是的：

```
class B(A):
    def __init__(self, obj):
        self.obj = obj # obj is any object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:08:21.940

2 可能性

而不是`isinstance(second, A)`做`isinstance(second.obj, A)`

第二......更hackish的方式是做这样的事情：

```
class B:
    def __init__(self, obj):
        self.obj = obj # obj is any object
        self.__class__ = obj.__class__ 
```

这是骇人听闻的，因为它基本上使解释器误以为实例是不同的类。那就是`isinstance(second, B)`会回来`False`

要回答下面提出的问题：解释器基本上会像`second`一个类一样`A`工作，并且在类级别定义的任何内容都`B`不会保留。例如，如果你做类似的事情

```
class B:
    b=2 #Won't be visible
    def __init__(self, obj):
        self.obj = obj # obj is any object
        self.b2 = 5 #Instance variable will be visible
        self.__class__ = obj.__class__

    def someFunc(self): #Won't be visible
        return 3 
```

在此处使用与上面用于初始化的代码相同的代码是使用解释器进行某些调用时会发生的情况。通常，任何类变量或方法都将被删除，而是使用`A`'a，但是任何实例变量都会被记住。因为这样做`self.obj = obj`有点多余。基本上实例化`B(obj)` 或多或少会返回一个与`obj`. 虽然它不会调用`obj`'s `__init__`，但为此你需要更多的巫毒/魔法（如果你有兴趣就发帖）。

```
>>> isinstance(second, A)
True
>>> isinstance(second, B)
False
>>> second.a
1
>>> second.b
Traceback (most recent call last):
  File "<pyshell#15>", line 1, in <module>
    second.b
AttributeError: A instance has no attribute 'b'
>>> second.someFunc()
Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    second.someFunc()
AttributeError: A instance has no attribute 'someFunc'
>>> second.b2
5
>>> second.obj
<__main__.A instance at 0x0123CAF8> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T19:18:38.153

您当然可以覆盖`__new__`并派生您的对象，`type`而不是`object`有效地创建类工厂......

你最终做的非常类似于：

```
b = type('B', (A,), {'obj': A()}) 
```

它生成`class B`从 A 派生的，包含 A() 的实例 - 因为这是一个函数，您可以出于任何原因传递您喜欢的任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T19:22:12.910

我很想暗示这不太可能是一个好主意，即使它可能以一种非黑客的方式。（编辑：乔恩克莱门茨的建议让我觉得这是最好/最不老套的方式，但我仍然建议我的帖子的其余部分是相关的。）我会进一步冒险暗示这是将“is-a”关系与什么混为一谈/混淆应该是“有”的关系。除非发布有关 OP 试图实现的目标的更多详细信息，否则无法确定。

无论如何，有人（我认为是 Kent Beck）曾经说过（据我记忆中的解释）继承在代码体之间创建了非常强大的耦合，伴随着维护和增强方面的困难，因此继承真的应该在你的技巧包中非常深入并且不应该轻易使用。换句话说：尽可能选择组合（或聚合）而不是继承。**

# asp.net - ASP.NET RDLC：在 tablix 中显示另一个表中的字段

> ID：11180312
> 
> 赞同：0
> 
> 时间：2012-06-24T18:56:09.427
> 
> 标签：asp.net, entity-framework, dataset, rdlc

我有一个带有 EF 的 ASP.NET MVC 4 项目。我有一个 ASPX 网页来显示 RDLC 报告的 ReportControl。

我有 2 个表：**订单**和**代理**。在我的报告中，我想显示（在 Tablix 中）我的所有订单。

**订单号 | 订购日期 | 订单总额 | 订单状态 | 代理人**

（代理列是代理的名称：“Agent.Name”）

**问：**如何在 Tablix 中显示另一个表（代理）中的字段（代理名称）？

```
if (!IsPostBack)
   {
    var qry = FROM o in db.Orders
              //JOIN a in d.Agents on o.idAgent equals a.idAgent
              SELECT o; // 
    ReportDataSource dataSource = new ReportDataSource("DataSetOrder_Agent", qry);
    ReportViewerOrders.LocalReport.DataSources.Add(dataSource);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:01:33.860

1.  使用 SP：

    ```
    CREATE PROCEDURE [dbo].spAgentOrders    
    (
    @fromdate DATE,
    @todate DATE
    )   
    AS
    DECLARE @from DATE = @fromdate, @to DATE = @todate
    SELECT o.orderbo, o.orderdate, o.ordervalue, o.status, a.name
    FROM orders o 
    JOIN agent a on o.id_agent = a.id_agent
    WHERE o.orderdate between @from and @to
    RETURN 
    ```

更新模型，将 SP 添加为返回复杂类型的函数导入。2\. Webform 代码隐藏：

```
if (!IsPostBack)
{
//...
var qry = db.spAgentOrders(tbFrom.Text, tbTo.Text);

ReportDataSource dataSource = new ReportDataSource("DataSetOrder_Agent", qry);
ReportViewerOrders.LocalReport.DataSources.Add(dataSource);
} 
```

1.  更新报表的 DataSource .xsd。从服务器资源管理器中拖动 SP。

# jquery - jquery slidetoggle立即展开和折叠

> ID：11180316
> 
> 赞同：1
> 
> 时间：2012-06-24T18:35:27.027
> 
> 标签：jquery

请看这里：[http ://www.wunderwedding.com/weddingvenues/search](http://www.wunderwedding.com/weddingvenues/search)

在左侧有一个过滤器“显示更多城市......”

单击它时，我想显示更多城市。但是现在，当它被点击时，框会展开并立即再次折叠。我不知道我做错了什么。这是显示/隐藏的代码：

```
$("#toggle_cities").click(function () {
    if ($("#facets_city").is(":visible")) {
        $("#toggle_cities").text('toon meer steden...');
    }
    else {
        $("#toggle_cities").text('toon minder steden...');
    }
    $("#facets_city").slideToggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:07:54.890

它可能是事件冒泡，所以点击发生了两次。

```
$("#toggle_cities").click(function (e) {
    e.stopPropagation(); // stops event propagation
    if ($("#facets_city").is(":visible")) {
        $(this).html('toon meer steden...');
    }
    else {
        $(this).html('toon minder steden...');
    }
    $("#facets_city").slideToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:55:39.890

jQuery 1.4.2 订阅的点击事件（触发事件） _genfunc-1.6.1.js 中第 252 行定义的函数

```
function () {
    if ($("#facets_city").is(":visible")) {
        $("#toggle_cities").text('toon meer steden...');
    }
    else {
        $("#toggle_cities").text('toon minder steden...');
    }
    $("#facets_city").slideToggle("slow");
} 
```

和：

jQuery 1.4.2 订阅的 click 事件（触发事件） myfuncs_en.js 中第 61 行定义的函数

```
function () {
    if ($("#facets_city").is(":visible")) {
        $("#toggle_cities").text('show more cities...');
    }
    else {
        $("#toggle_cities").text('show less cities...');
    }
    $("#facets_city").slideToggle("slow");
} 
```

您有两个事件处理程序。我猜一个是英文的，一个是...err..Dutch的？

PS Visual Event 小书签对于这样的问题非常有用：[http ://www.sprymedia.co.uk/article/Visual+Event+2](http://www.sprymedia.co.uk/article/Visual+Event+2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:35:45.670

尝试事件切换。[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

```
$("#toggle_cities").toggle(function () {
    $(this).text('toon meer steden...');
    $("#facets_city").slideDown("slow");
},function(){
    $(this).text('toon minder steden...');
    $("#facets_city").slideUp("slow");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T20:48:18.627

当我查看 web 检查器的脚本选项卡时，我看到页面中嵌入了三个 jquery 脚本。踢掉其中两个，然后再试一次。

恕我直言，这不是传播问题，因为#facets_city-element 不是#toggle_cities-element 的子元素。

# jquery - 使用 jQuery 读取多级 JSON 文件

> ID：11180324
> 
> 赞同：1
> 
> 时间：2012-06-24T18:58:14.793
> 
> 标签：jquery, json, multi-level

我被分配了一个项目并收到了一个多级 JSON 文件来读取数据。我需要使用 jQuery 来做到这一点。这是我第一次处理 JSON 文件，所以一个好的解释会有所帮助。我在任何地方都找不到好的答案，因为大多数 jQuery + JSON 教程都是针对非常非常基本的数据结构的。

这是我的 JASON 文件中的数据：http: [//cl.ly/0w19091v290i3p402N0B](http://cl.ly/0w19091v290i3p402N0B)

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:15:32.870

正如 Andy 已经提到的，您可以使用[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)通过 AJAX 获取数据并将其转换为 javascript 对象。因此，您可能会得到一组 javascript 对象，您需要将它们显示在类似表格的可视结构中。为此，您可以查看[JTemplates](http://archive.plugins.jquery.com/project/jTemplates)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:15:56.717

您可以使用[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)来获取 JSON 数据。如前所述，它通过 ajax 获取数据并将 JSON 转换为 javascript 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:45:55.590

这将是来自 ajax 的响应

```
 success: function (doc) {                        
                    var obj = $.parseJSON(doc);
                    $(obj.league).each(function () {   // to get everything in league  
                     ...
                     }); 
```

# mysql - 选择 n 个随机组，每组 n 行

> ID：11180326
> 
> 赞同：2
> 
> 时间：2012-06-24T18:58:24.863
> 
> 标签：mysql, sql

我有这张表`services`，数据如下：

```
service_id  bepro_id    service_name
        1   1   Virtuales
        2   2   Logos1
        3   3   Diseño C
        4   1   Formatos A3
        203 77  Dasdad
        6   2   Publi
        8   4   edificios Vi
        9   3   Maquillaje D
        10  7   Servicio 10 Serv
        11  4   servicio 11 tittle
        14  3   Lorem ipsum dol
        15  30  servicio 15 title
        16  4   Titulo TituloTitulo
        17  8   servicio 17 title Ã±
        19  11  Retoques digital 
        20  4   servicio 20 title
        26  5   service 26 title
        27  7   servicio 27 tittle
        183 3   Excepteur sint occaecat 
        188 3    Duis aute irure dolor 
        185 3   Cillum dolore eu fugiat
        186 3   Eserunt mollit anim i
        190 3   Lorem ipsum dolor
        191 3   general para ed
        192 3   Ingenieria
        193 3   letras
        194 2   bocetos
        196 60  Retoque fotografico
        199 60  Maquetacion de 
        198 28  Revistas en General 
```

我想从`bepro_id`1 到 8 个中的 8 个不同的随机值中选择每个值（最小值 1，最大值 8）`bepro_id`。

我的意思是最多 64 行或最少 8 行。然后我必须加入表“用户”，其中 services.bepro_id=users.users_id 。

这会在@Andomar 下面为每个值选择一个随机行（每个值我需要最少 1 个最多 8 个值）对我有很大帮助，但似乎没有用，而且看起来很复杂，这是我唯一的方法做？：

```
SELECT * FROM  `services` GROUP BY bepro_id ORDER BY RAND( ) LIMIT 8 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:16:07.863

您可以使用 MySQL 变量技巧用行号标记每一行。An`inner join`可用于将结果限制为 N 个 bepro。下面的示例为 3 个随机 bepro 返回 1-2 个随机服务。更改这些值应该很容易。

这就是我需要感谢@Andomar：

```
select  *
from    (
        select  distinct bepro_id
        from    services
        order by
                rand()
        limit   8 -- Eight random bepro_id's
        ) bepro
join    (
        select  if(@last_bepro = bepro_id, @rn := @rn + 1, @rn := 1) as rn
        ,       (@last_bepro := bepro_id)
        ,       service_id
        ,       bepro_id
        ,       service_name
        from    services
        cross join
                (select @rn := 0, @last_bepro := -1) r
        order by
                bepro_id
        ) serv
on      serv.bepro_id = bepro.bepro_id
join    users 
on      users.id = bepro.bepro.id
where   serv.rn <= 8 -- 8 services max , 1 min per bepro_id
order by
        rand(); 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/9ad25/2/0)

# java - Vaadin 日历：如何在事件标题中允许 HTML

> ID：11180327
> 
> 赞同：3
> 
> 时间：2012-06-24T18:58:27.053
> 
> 标签：java, javascript, html, calendar, vaadin

我想在 vaadin 日历事件的标题中支持 HTML。月视图中允许使用 HTML，但周视图中不允许使用 HTML。是否有可能在月视图和周视图中有不同的标题？

# javascript - 围绕 html5 中的中心轴旋转内容

> ID：11180335
> 
> 赞同：5
> 
> 时间：2012-06-24T18:59:10.493
> 
> 标签：javascript, jquery, html, css

所以我是一名图形设计师，我被要求为客户的新网站开发一个概念。它是一个内容有限的微型网站。我想出的想法是将网站的所有部分放在 div 上，然后当用户单击菜单链接时像轮子一样旋转它们。我需要知道的是：是否可以使用 html5 围绕中心枢轴点旋转包含正常内容的整个 div？旋转需要动画，每个旋转的 div 中包含的内容需要与其容器 div 一起旋转。如果可能，怎么做？

![在此处输入图像描述](../Images/e96862c73bcf420182b6ea5abd7e6aa0.png)

我用谷歌搜索了它并找到了使用 CSS3 旋转东西的示例，并且我已经看到了 html5 转换，但我不确定我之前是否见过如此复杂的东西，而且我找不到任何可以解决的示例。所以我有点担心由于某种原因它实际上不可能。我也愿意使用类似 javascript 的东西来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:45:02.070

你可以这样[**做**](http://jsfiddle.net/jasssonpet/nzK7E/embedded/result/)：

HTML

```
<div class="container">
    <div class="first">First</div>
    <div class="second">Second</div>
    <div class="third">Third</div>
</div> 
```

CSS

```
.container {
    transition: transform 1s;
    transform: rotate(0);
    position: relative;
}

.container>div {
    position: absolute;
}

.container.second {
    transform: rotate(120deg);
}

.container.third {
    transform: rotate(240deg);
}

.container .first {
    bottom: 0;
    right: 0;
    transform: rotate(120deg);
}

.container .second {
    left: 0;
    right: 0;
    transform: rotate(240deg);
} 
```

你可以添加一些简单的js来改变容器当前类。

# python - python - 从拆分的路径字符串构建新的路径字符串

> ID：11180337
> 
> 赞同：1
> 
> 时间：2012-06-24T18:59:20.220
> 
> 标签：python, python-2.7

我从 XML 读取路径列表，路径包含不规则的元素，由内部翻译它们的 certian 应用程序使用。当前的路径字符串对我来说没用，我希望将它们标准化。

```
example: 
path = "%personal%\new_lcation\%vendorlibs%\generated"
# split this to a list
omponents = path.split(os.sep)
# replace elemnts 0,2
components[0]="c:\ProgramFiles"  
components[2]="somthing" 
```

我现在如何将所有内容加入标准路径字符串？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:00:37.313

`os.path.join(*components)`. [`os.path.join`文档](http://docs.python.org/library/os.path.html#os.path.join)。

# regex - 正则表达式差异

> ID：11180339
> 
> 赞同：1
> 
> 时间：2012-06-24T18:59:28.880
> 
> 标签：regex

我想了解以下3个正则表达式之间的区别：

我想显示文件中仅包含小写字母的所有行。

以下是我尝试的 3 个正则表达式：

```
cat filename.txt | grep ^[a-z]* 
```

**正则表达式描述：**这将显示以 0 个或多个小写字母开头的所有行。因此，它将匹配以下任一项：

```
zapato
113078
OLIVIA 
```

不完全是我们想要的。

```
cat filename.txt | grep ^[a-z]*$ 
```

**正则表达式描述：**这将显示以 0 个或多个小写字母开头的所有行，直到行尾。这符合以下条件：

```
fubuki
BALLIN
Kristine 
```

这次没有包含数字的结果。

```
cat filename.txt | grep ^[a-z]*[a-z]$ 
```

**正则表达式描述：**这对我很有效。它搜索以 0 个或多个小写字母开头的所有行，并匹配它直到找到另一个小写字母。出于某种原因，这对我有用。但是，我想知道这与以前的正则表达式有何不同。

```
tonia
ecurby
totonno 
```

另外，当*正则表达式中的星号（）表示，0或更多时，那么它应该包括我写的所有结果，^[az]*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:03:59.703

正则表达式的简短说明：

```
^[a-z]* 
```

匹配以 0 个或多个字符开头的字符串`[a-z]`。
匹配**空**字符串和以 set字符**开头的**`[a-z]`每个字符串。

* * *

```
^[a-z]*$ 
```

匹配仅包含 0 个或多个字符的字符串`[a-z]`。
匹配**空**字符串和**仅**包含set 字符的每个字符串`[a-z]`。

* * *

```
^[a-z]*[a-z]$ 
```

匹配以 0 个或多个字符开头的字符串，`[a-z]`后跟恰好最后一个字符 from `[a-z]`。
匹配每个**仅**包含set 字符的**非空**字符串。**`[a-z]`**

 *** * *

使用它而不是您当前的第三个选项：

```
^[a-z]+$ 
```

它在语义上是等价的，但更简单。

表达式`x*x`(or `xx*`) 等价`x+`于正则表达式 (with`x`是任何表达式)。后者基本上只是前者更冗长的表达式的语法糖。

或者换一种说法：while`*`表示**0 或更多**，`+`表示**1 或更多**。

* * ***

# sql - 批量更新网址

> ID：11180344
> 
> 赞同：0
> 
> 时间：2012-06-24T19:00:05.400
> 
> 标签：sql, json, couchdb, video-streaming

我试图构建一个面向未来的 json 文件。这意味着 json 文件中媒体的 url 需要不时更改（例如，如果我更改主机或类似内容）。

所以如果我的网址是

```
http://mediaserver.com/media/video.mp4 
```

然后稍后我需要将所有更改为

```
http://new-mediaserver.com/media/video.mp4 
```

或者

```
rtmp://s2ziuhvw5dd27c.cloudfront.net/cfx/ 
```

这是否可以避免每次来源更改时手动输入数百个或 url？

也许必须使用数据库来做到这一点？有小费吗？

# html - HTML : 一定要写页面标题

> ID：11180346
> 
> 赞同：1
> 
> 时间：2012-06-24T19:00:29.823
> 
> 标签：html, tags, title, page-title

我想知道如何设置页面标题。我目前只知道两种方法：

```
<title>xxxxx</title> 
```

和

```
<meta name="title" content="xxxxx" /> 
```

还有更多吗？

我需要知道这一点的原因是因为我必须创建一个从网页读取页面标题的应用程序，因此它必须处理所有情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:09:20.233

设置标题的唯一真正方法是使用：

```
<title></title> 
```

但是，某些站点可能还具有 Opengraph、Dublin core 或 Schema 标签。

由于标题元素是 HTML 的一部分，我会使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:07:07.800

javascript可以改变它。加载完成后，实际标题可能不是第一次用 html 编写的标题

```
$(document).ready(function ()
{
    document.title = "xxxxxxxx";
}); 
```

# php - Symfony2：成功登录事件后，执行一组动作

> ID：11180351
> 
> 赞同：28
> 
> 时间：2012-06-24T19:00:53.543
> 
> 标签：php, symfony

在用户成功登录后，我需要执行一组操作。这包括从数据库加载数据并将其存储在会话中。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-24T19:25:52.817

您可以向`security.interactive_login`事件添加侦听器。

像这样附加你的听众。在此示例中，我还将安全上下文和会话作为依赖项传递。

> ***注意：*** SecurityContext 从 Symfony 2.6 开始被弃用。请参考 [http://symfony.com/blog/new-in-symfony-2-6-security-component-improvements](http://symfony.com/blog/new-in-symfony-2-6-security-component-improvements)

```
parameters:
   # ...

   account.security_listener.class: Company\AccountBundle\Listener\SecurityListener

services:
   # ...

   account.security_listener:
        class: %account.security_listener.class%
        arguments: ['@security.context', '@session']
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method: onSecurityInteractiveLogin } 
```

在您的听众中，您可以在会话中存储您想要的任何内容。在这种情况下，我设置了用户时区。

```
<?php

namespace Company\AccountBundle\Listener;

use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\HttpFoundation\Session\Session;
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;

class SecurityListener
{

   public function __construct(SecurityContextInterface $security, Session $session)
   {
      $this->security = $security;
      $this->session = $session;
   }

   public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
   {
        $timezone = $this->security->getToken()->getUser()->getTimezone();
        if (empty($timezone)) {
            $timezone = 'UTC';
        }
        $this->session->set('timezone', $timezone);
   }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-17T09:44:11.537

您甚至可以从事件本身获取用户实例，无需注入令牌存储！

```
public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
{
    $event->getAuthenticationToken()->getUser()
} 
```

# c# - 不知道为什么我会收到 InvalidCastException

> ID：11180354
> 
> 赞同：2
> 
> 时间：2012-06-24T19:01:24.277
> 
> 标签：c#, windows-phone-7, isolatedstorage, .net, trygetvalue

我得到一个`InvalidCastException`，我不明白为什么。

这是引发异常的代码：

```
public static void AddToTriedList(string recipeID)
{
    IList<string> triedIDList = new ObservableCollection<string>();
    try
    {
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
        if (!settings.Contains("TriedIDList"))
        {
            settings.Add("TriedIDList", new ObservableCollection<Recipe>());
            settings.Save();
        }
        else
        {
            settings.TryGetValue<IList<string>>("TriedIDList", out triedIDList);
        }
        triedIDList.Add(recipeID);
        settings["TriedIDList"] = triedIDList;
        settings.Save();
    }
    catch (Exception e)
    {
        Debug.WriteLine("Exception while using IsolatedStorageSettings in AddToTriedList:");
        Debug.WriteLine(e.ToString());
    }
} 
```

**AppSettings.cs：（**提取）

```
// The isolated storage key names of our settings
const string TriedIDList_KeyName = "TriedIDList";

// The default value of our settings
IList<string> TriedIDList_Default = new ObservableCollection<string>();

...

/// <summary>
/// Property to get and set the TriedList Key.
/// </summary>
public IList<string> TriedIDList
{
    get
    {
        return GetValueOrDefault<IList<string>>(TriedIDList_KeyName, TriedIDList_Default);
    }
    set
    {
        if (AddOrUpdateValue(TriedIDList_KeyName, value))
        {
            Save();
        }
    }
} 
```

`GetValueOrDefault<IList<string>>(TriedIDList_KeyName, TriedIDList_Default)`并且`AddOrUpdateValue(TriedIDList_KeyName, value)`是微软推荐的常用方法；[你可以在这里](http://msdn.microsoft.com/en-us/library/ff769510%28v=vs.92%29.aspx)找到完整的代码。

编辑：我在这一行遇到了异常：

```
settings.TryGetValue<IList<string>>("TriedIDList", out triedIDList); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:09:28.560

您正在向`ObservableCollection<Recipe>`您的`settings`:

```
settings.Add("TriedIDList", new ObservableCollection<Recipe>());
                             // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

但是你正在读回 a `IList<string>`，这显然是一种不同的类型：

```
settings.TryGetValue<IList<string>>("TriedIDList", out triedIDList);
                  // ^^^^^^^^^^^^^ 
```

您的声明`triedIDList`如下所示：

```
 IList<string> triedIDList = new ObservableCollection<string>();
// ^^^^^^^^^^^^^                // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

首先，选择一种类型，然后在所有这些地方使用完全相同的类型（即使您认为这不是绝对必要的），然后看看是否`InvalidCastException`会消失。

# ios5 - 擦除持久的drawRect

> ID：11180355
> 
> 赞同：0
> 
> 时间：2012-06-24T19:02:11.453
> 
> 标签：ios5, uiview, core-graphics, drawrect

我终于设法得到了一直没有清除的 DrawRect （我也有 setClearsContextBeforeDrawing:YES ）

```
- (void)drawRect:(CGRect)rect
{
    UIGraphicsPushContext(drawingContext);
    CGImageRef cgImage = CGBitmapContextCreateImage(drawingContext); 
    UIImage *uiImage = [[UIImage alloc] initWithCGImage:cgImage];

    CGContextSetLineWidth(drawingContext, 4.0);
    if (draw)
        CGContextSetStrokeColorWithColor(drawingContext, [UIColor  whiteColor] CGColor]);
    else
        CGContextSetStrokeColorWithColor(drawingContext, [[UIColor clearColor] CGColor]);

    CGContextMoveToPoint(drawingContext,    lastPt.x - (31.0 / self.transform.a),  lastPt.y - (31.0 / self.transform.a)  );
    CGContextAddLineToPoint(drawingContext, currPt.x - (31.0 / self.transform.a),  currPt.y - (31.0 / self.transform.a)  );
    CGContextStrokePath(drawingContext);

    UIGraphicsPopContext();
    CGImageRelease(cgImage);
    [uiImage drawInRect: rect];

    lastPt = currPt;
} 
```

这会在绘制时留下一条线
我的问题是当绘制为 NO [UIColor clearColor] 未擦除时我应该用什么来擦除？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:25:50.083

因为`clearColor`alpha 为零，所以用它绘制通常没有任何效果。您需要将上下文的混合模式设置`kCGBlendModeCopy`为使其生效。

但是，将上下文的混合模式设置为`kCGBlendModeClear`您想要擦除的时间并返回到`kCGBlendModeNormal`您想要绘制的时间会更简单：

```
if (draw) {
    CGContextSetBlendMode(drawingContext, kCGBlendModeNormal);
    CGContextSetStrokeColorWithColor(drawingContext, [UIColor  whiteColor] CGColor]);
} else {
    CGContextSetBlendMode(drawingContext, kCGBlendModeClear);
} 
```

# php - Zend_Amf_Server 的空响应

> ID：11180356
> 
> 赞同：0
> 
> 时间：2012-06-24T19:02:15.890
> 
> 标签：php, amf, zend-amf

当我从 flash 调用端点时，所有操作都做得很好，但响应为空。代码是：

```
class AmfController extends Zend_Controller_Action {
    public function indexAction()
    {
        $server = new Zend_Amf_Server();
        $server->setProduction(false);
        $server->setClass('Application_Model_Amf');
        $response = $server->handle();
        echo $response;
    }
} 
```

和

```
class Application_Model_Amf {
    /**
     *
     * @param bytearray $data
     * @param string $dateString
     * @return int
     */
    public function save($data, $dateString)
    {
        $dateString = str_replace(array('|', ':'), array('_', ''), $dateString);
        //file_put_contents("$dateString.jpg", $data);
        $r = new stdClass();
        $r->error = 0;
        return $r;
    }
} 
```

我也试过

```
 public function save($data, $dateString)
    {
        $dateString = str_replace(array('|', ':'), array('_', ''), $dateString);
        //file_put_contents("$dateString.jpg", $data);
        return true;
    } 
```

但它既不工作 - 仍然是空的反应。我怎样才能返回这样的 stdClass() 响应？还是只有整数值 1 或 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T23:59:01.850

解决方案是添加`die()`

```
public function indexAction()
{
    $server = new Zend_Amf_Server();
    $server->setProduction(false);
    $server->setClass('Application_Model_Amf');
    $response = $server->handle();
    echo $response;
    die();
} 
```

# java - 使用孩子们的价值观的超级类

> ID：11180359
> 
> 赞同：0
> 
> 时间：2012-06-24T19:02:32.437
> 
> 标签：java, abstract-class

我想在抽象类中实现一个方法，该方法由继承的类调用并使用它们的值。

例如：

```
abstract class MyClass{
    String value = "myClass";
    void foo(){System.out.println(this.value);}
}

public class childClass{
    String value="childClass";
    void foo(){super.foo();}
}

public static void main(String[] args){
    new childClass.foo();
} 
```

这将输出“myClass”，但我真正想要的是输出“childClass”。这样我就可以在一个类中实现一个“通用”方法，当它被其他类扩展时，它将使用这些类的值。

我可以将值作为函数参数传递，但我想知道是否可以实现我所描述的“架构”。

由继承类调用的超级方法，它使用来自调用者而不是自身的值，而不通过参数传递值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:07:52.423

你可以这样做：

```
abstract class MyClass {

    protected String myValue() {
        return "MyClass";
    }

    final void foo() {
        System.out.println(myValue());
    }
}

public class ChildClass extends MyClass {
    @Override
    protected String myValue() {
        return "ChildClass";
    }
} 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:11:21.020

这是组合优于继承的地方

```
public class Doer{
   private Doee doee;

   public Doer(Doee doee){
       this.doee = doee;
   }
   public void foo(){
       System.out.println(doee.value);
   }
}

public abstract class Doee{
    public String value="myClass"
}

public ChildDoee extends Doee{
    public String= "childClass"
} 
```

...

```
//Excerpt from factory
new Doer(new ChildDoee); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:50:30.200

我相信你在问这是否可能：

```
public class MyClass {
  void foo() {
    if (this instanceof childClass) // do stuff for childClass
    else if (this intanceof anotherChildClass) // do stuff for that one
  }
} 
```

所以答案是“是的，这是可行的”，但非常建议不要这样做，因为它 a) 尝试重新实现多态性而不是使用它，并且 b) 违反了抽象类和具体类之间的分离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T19:14:40.493

您只是希望`value`in`MyClass`的实例有所不同`childClass`。
为此，请更改 childClass 构造函数中的值：

```
public class childClass {
    public childClass() {
        value = "childClass";
    }
} 
```

### 编辑：

如果您无法覆盖/替换构造函数，请添加一个实例块（在构造函数之后执行，甚至是未声明的“默认”构造函数）：

```
public class childClass {
    {
        value = "childClass";
    }
} 
```

# php - 如果某个单词出现在 $_POST[xxx] 中，PHP 将返回 false

> ID：11180361
> 
> 赞同：0
> 
> 时间：2012-06-24T19:03:18.247
> 
> 标签：php

我在一个网站上有一个即将推出的表格，用户填写了一个电子邮件表格，它会通过电子邮件发送给我。但是，垃圾邮件发送者已经访问了该站点，并正在向表单发送垃圾邮件等。IP禁令没有帮助，所以如果它包含山羊或其他东西，我需要停止发送它。这是邮件。

```
<?php
$SPOSTI =$_POST[sposti];

if ($SPOSTI=="")
{
    return false;
}

if ($SPOSTI=="goatse.fr")
{
    return false;
}
if ($SPOSTI=="http://www.goatse.info/hello.jpg")
{
    return false;
}
else
{
    $to = "xxx@gmail.com";
    $subject = "xxx";
    $message = "$_POST[sposti] haluaa tiedon kun kotisivut.name avautuu.
    $_POST[ip]";
    $from = "$_POST[sposti]";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
}
    ?> 
```

如果电子邮件包含某个单词（在这种情况下是山羊），是否有办法阻止它执行代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:05:01.670

您需要使用`exit`or`die`代替`return false`which 在函数/方法中起作用：

```
if ( $SPOSTI =="" || strpos('goatse', $SPOSTI) !== FALSE)
{
   exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:05:09.883

`strpos()`会让你找到一个子字符串，但我真的推荐一个验证码安全系统，因为攻击者可以简单地切换到另一个烦人的词。

Goatse 不是你的问题，这是安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:09:47.617

您可以使用`stristr` [http://php.net/manual/de/function.stristr.php](http://php.net/manual/de/function.stristr.php)来实现这一点。我建议使用验证码，因为它更有效。一个流行的解决方案是 reCaptcha：[https](https://developers.google.com/recaptcha/docs/php) ://developers.google.com/recaptcha/docs/php另一种较弱的可能性是在您的表单中添加一个安全问题，例如“五加五等于多少？”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T19:18:57.347

尝试以下操作：

```
function is_spam($array, $block_pattern){
    $block = false;
    foreach($array as $k => $v){
        if(preg_match('/.*' . $block_pattern . '.*/', $k) ||
           preg_match('/.*' . $block_pattern . '.*/', $v)){
            $block = true;
            break;
        }
    }

    return $block;
}

Usage: is_spam($_POST, 'goatse');
Returns: true if 'goatse' is found in $_POST 
```

该函数将搜索字符串的所有键和值，`$array`如果`$block_pattern`找到`true`该模式将返回。

# c# - 无法在 c# HttpWebRequest 中使用外部代理

> ID：11180369
> 
> 赞同：0
> 
> 时间：2012-06-24T19:04:28.767
> 
> 标签：c#, httpwebrequest, http-proxy

我正在点击这个网址：

```
http://www.google.co.uk/search?q=online stores uk&hl=en&cr=countryUK%7CcountryGB&as_qdr=all&tbs=ctr:countryUK 
```

基本上我得到了 ppcUrls，它在没有任何代理的情况下完美运行。

但是当我尝试使用互联网上可用的代理时：

```
http://proxy-list.org/en/index.php?pp=3128&pt=any&pc=any&ps=any&submit=Filter+Proxy 
```

上面的链接不会以任何方式打开：|，我确实用 Internet Explorer 检查了 ipz 并且它打开了，但是在 HTTPWEBREQUEST 中，有时我得到**503 服务器不可用，或者****重定向**太多

 **该链接不会以任何 ip 打开。

有什么建议吗？下面是我获取 HTML 函数：

```
 public string getHtml(string url, string proxytmp)
    {
        string responseData = "";
        try
        {

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Accept = "*/*";
            request.AllowAutoRedirect = true;
            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
            request.Timeout = 60000;
            request.Method = "GET";

            if (proxies.Count > 0)
            {
                try
                {
                    int customIP = 0;
                    int port = 0;
                    string ip = string.Empty;

                    string[] splitter = proxytmp.Split(':');
                    if (splitter.Length > 0)
                    {

                        ip = splitter[0].ToString();
                        port = Convert.ToInt32(splitter[1].ToString());
                    }

                    WebProxy proxy = new WebProxy(ip, port);
                    request.Proxy = proxy;

                }
                catch (Exception exp)
                {

                }
            }

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Stream responseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(responseStream);
                responseData = myStreamReader.ReadToEnd();
            }
            response.Close();

        }
          catch (System.Exception e)
        {
            responseData = e.ToString();
        }

        return responseData;

    } 
```

> 更新

当我使用与 Internet Explorer 相同的代理时，Url 会打开，所以一定有办法。但我无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:19:09.197

我的猜测是代理阻止了某种性质的传入连接，这就是为什么您遇到各种问题的原因，这些检查在性质上可能很复杂，或者可能就像将 User-Agent 设置为有效的浏览器一样简单。我我不确定代理可以检查哪些其他内容，我建议您在使用浏览器发出请求并在 C# 代码中进行相应更改时查看创建的请求对象（例如 Referrer、Port 等）。

祝你好运，让我知道它对你有用。**

# c# - WPF从线程返回值

> ID：11180371
> 
> 赞同：0
> 
> 时间：2012-06-24T19:05:01.473
> 
> 标签：c#, wpf, multithreading, backgroundworker, return-value

我正在尝试使用线程从外部应用程序打开一个 WPF 表单。我想打开表单（作为对话框），然后我需要向主应用程序返回一个响应（对象）...我实际上是错误当我托盘访问成员时出现 InvalidOperationException。我也尝试使用 BackgroundWorker，但我无法解决问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-24T19:16:53.597

```
 var t = Task<RETURNED_OBJECT>.Factory.StartNew(() => DIALOG());
  t.Result; 
```

在这种情况下，Dialog() 将在新任务中执行。当线程关闭（例如对话框关闭）时，该对话框的结果存储在 t.Result

# css - 你如何定义这个 CSS 选择器？

> ID：11180374
> 
> 赞同：0
> 
> 时间：2012-06-24T19:05:12.333
> 
> 标签：css, css-selectors

代码：

```
#navigation > ul > li > a 
```

后裔和孩子。

是 li 的“a”子代，或holde 码。或者是“一个”子里，但其余的后代。我不太了解规则。希望你能帮助我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:06:45.413

你一一阅读选择器。您是从左到右还是从右到左阅读取决于您，但选择器基本上是线性的。

这个选择器意味着：

> 选择 作为元素 ( )的子元素的任何`a`元素，该元素 是具有 ID ( ) 的元素 的子元素 ( )的子元素。
> `li``li > a`
> `ul``ul > li`
> `navigation``#navigation > ul`

作为其 parent 的 child 的每个元素也是其 parent*以及该 parent 的 parents*的后代。简而言之：包含在另一个元素中的元素是该元素的后代。请注意，*只有*当它直接包含在该元素中时它也是一个子元素（而不是其他嵌套在它们之间的东西）——人们通常将其称为“直接子元素”以强调，但*根据定义*，子元素无论如何都直接包含在其父元素中.

因此，此选择器的结构*意味着*以下内容：

*   `a`是 的后代`#navigation`，`ul`但`li`只是 的孩子`li`

*   `li`是 and 的后代`#navigation`，`ul`但只是 的子代`ul`

*   `ul`既是`#navigation`

补充阅读：

*   规范中的[后代选择器](http://www.w3.org/TR/selectors/#descendant-combinators)和[子选择器](http://www.w3.org/TR/selectors/#child-combinators)
*   [">"（大于号）CSS 选择器是什么意思？](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules/3225905#3225905)（附插图）

# c# - 如何创建具有自定义数据类型的数组？

> ID：11180375
> 
> 赞同：-4
> 
> 时间：2012-06-24T19:05:25.233
> 
> 标签：c#, winforms, class

如何创建一个包含 400 个类型元素的数组`myClass`并将不同的参数传递给每个元素？我应该定义什么类型的数组，我应该*在哪里*做这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:08:03.693

[C# 中的数组](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)基础知识：

```
MyType[] arrayOfMyType = new MyType[400]; 
```

`arrayOfMyType`将为`MyType`. 您将需要对其进行迭代并为*每个*“插槽”分配一个对象，因为这些值将默认为您的类型的默认值（`null`对于引用类型）。

# android - 发现自定义格式的 nfc 标签时打开我的应用程序

> ID：11180377
> 
> 赞同：3
> 
> 时间：2012-06-24T19:05:30.817
> 
> 标签：android, android-intent, android-activity, nfc, intentfilter

我正在制作一个用于库存管理的应用程序。每个 stock_item 都有一个标签，带有一个唯一标识符，带有一个 custom_format。像这样：

```
stock_manager_pro:stock_item:12345
```

或者

```
stock_manager_pro:用户:约翰
```

我想让我的应用程序在设备发现其内容以**stock_manager_pro开头的标签时自动打开**

使用此代码，当手机发现带有纯/文本内容的 nfc 标签时，我的应用程序将打开，但我希望能够过滤客户文本。

```
 <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data android:mimeType="text/plain" />
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T07:58:41.207

我正在解决同样的问题...我发现您应该创建自己的自定义 MIME 类型。在清单文件中你应该简单地删除

```
<action android:name="android.nfc.action.NDEF_DISCOVERED"/> 
```

例如

```
<intent-filter >
   <!--  <action   android:name="android.nfc.action.NDEF_DISCOVERED" />-->
   <category android:name="android.intent.category.DEFAULT" />
   <data android:mimeType="application/vnd.com.nfctagwriter" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T06:02:22.903

您可以添加自己的 mime 类型，并且它不必在开始时具有完全限定的“应用程序”。它还理解“应用程序/自定义名称”.. 这对于保持较小的数据大小很有用。

例如，堆栈溢出 mime 类型可以是“app/so”而不是“application/stackoverflow”。

虽然我猜这取决于你觉得其他人使用“app/so”的可能性有多大。在我们的例子中，这并不重要，因为我们只是在内部使用它。

# c - 灵活数组成员不在结构错误末尾的原因是什么？

> ID：11180378
> 
> 赞同：35
> 
> 时间：2012-06-24T19:05:51.597
> 
> 标签：c, struct, malloc

我想知道为什么我`error: flexible array member not at end of struct`在调用 malloc 时总是出错。我有一个带有可变长度数组的结构，并且我不断收到此错误。

结构是，

```
typedef struct {
  size_t N;
  double data[];
  int label[];
} s_col; 
```

对 malloc 的调用是，

```
col = malloc(sizeof(s_col) + lc * (sizeof(double) + sizeof(int))); 
```

这是对 malloc 的正确调用吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-24T19:08:05.483

一个结构中只能有一个灵活的数组成员，并且它必须始终是结构的最后一个成员。换句话说，在这种情况下，您在调用之前就出错了`malloc`，以至于实际上无法`malloc`正确调用该结构。

要执行您似乎想要的操作（具有相同数量`data`和`label`成员的数组），您可以考虑以下内容：

```
struct my_pair { 
    double data;
    int label;
};

typedef struct { 
   size_t N;
   struct my_pair data_label[];
}; 
```

请注意，这有点不同：它不是一个`double`s 数组后跟一个`int`s 数组，而是给你一个数组 one`double`后跟 one `int`，然后是 next `double`， next `int`，依此类推。这是否足够接近相同将取决于您如何使用数据（例如，为了传递给需要连续数组的外部函数，您可能必须以不同的方式做事）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-02T19:23:33.523

给定一个结构定义和一个指向结构开头的指针，C 编译器必须能够访问该结构的任何成员，而不必访问其他任何内容。由于结构中每个项目的位置由其前面的项目的数量和类型决定，因此访问任何项目都需要知道所有前面项目的数量和类型。在最后一项是数组的特定情况下，这并没有特别困难，因为访问数组中的一项需要知道它从哪里开始（这需要知道*前面的数量和类型*项，而不是数组本身中的项数）和项索引（编译器可能假定它小于存在空间的项数，而不必知道有关数组大小的任何信息）。但是，如果灵活数组成员出现在结构末尾以外的任何位置，则其后面的任何项的位置将取决于数组中的项数——编译器不会知道这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-24T19:09:15.717

```
typedef struct {
  size_t N;
  double data[];
  int label[];
} s_col; 
```

中间不能有灵活`double data[]`的数组成员 ( )。考虑硬编码数组大小或`double *data`

# c# - 在 RTF 中查找字符串并列出这些字符串

> ID：11180380
> 
> 赞同：0
> 
> 时间：2012-06-24T19:06:21.353
> 
> 标签：c#, regex, string, search

我想为邮件（不是数字）创建一个应用程序。这个想法是用户在word中创建一个模板（保存在RTF下，已经放弃了.doc）。下面是一个模板示例（在 rtf 中）：

“生日快乐[用户名]，......”

用特定文本替换 [用户名] 字段很容易。然而，我想要做的是有效地找到所有以 '[' 开头并以 ']' 结尾的字符串。所以我可以让我的应用程序的用户能够选择哪个数据库字段去哪里。

这是我到目前为止得到的：

```
 System.Windows.Forms.RichTextBox rtBox = new System.Windows.Forms.RichTextBox();
    string s = System.IO.File.ReadAllText(path);
    Regex regex = new Regex(@"\[.*\] ");
    rtBox.Rtf = s;
    var Matches = regex.Matches(rtBox.Rtf);
    int i = 0;
    while(i < Matches.Count) {
        MessageBox.Show(Matches[i].ToString());
        i++;
    } 
```

但是，此代码无法按预期工作，如果 2 个参数位于 1 行（例如：“Happy bday [FirstName] [LastName]”，则正则表达式匹配是**[* *FirstName][LastName*** *]* *，而不是 2 个单独的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:16:46.103

用作`@"\[.*?\]"`图案

```
var arr = Regex.Matches("[FirstName] [LastName]", @"\[.*?\]")
           .Cast<Match>()
           .Select(x => x.Value)
           .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:18:15.207

您的正则表达式是贪婪的，它尽可能匹配。您可以通过添加问号使其变得懒惰。

```
\[.*?\] 
```

有关更多信息，请参阅这篇文章：[http](http://www.regular-expressions.info/repeat.html) ://www.regular-expressions.info/repeat.html 。如果您想要一个快速编辑器来显示您的 RegEx 如何匹配，您可以使用这个：[http ://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)

# android - 关于android应用程序的“HelloWorld”程序

> ID：11180385
> 
> 赞同：0
> 
> 时间：2012-06-24T19:06:45.670
> 
> 标签：android

为什么我不能`setContentView(R.layout.main)`在没有 的情况下在最后一行使用`setContentView(tv)`？请给我解释一下。

```
package com.mue.helloworld;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HelloWorldActivity extends Activity 

{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        TextView tv = new TextView(this);

        tv.setText("Hello, Android i am suvankar");

        setContentView(tv);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:21:03.730

您必须在 R.layout.main（一个 xml 文件）中定义 textview，该文件包含活动中对象的信息。如果您使用的是 Eclipse，您可以简单地拖放一个文本视图，只需打开主文件。（文件夹 res -> 布局 -> main.xml）

那么你必须在你的程序中调用它：

```
setContentView(R.layout.main);
TextView tv = (TextView) findViewById(R.id.tv); //<-- yo have to use the same ID that is in the main.xml file 
```

然后你可以设置文本。所有这些都在 oncreate 函数中。

```
tv.setText("Hello, Android i am suvankar"); 
```

好吧，我希望我有所帮助。这是我的第一个回应

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:25:30.093

你不应该`setContentView()`在你的`onCreate`. 要么打电话`setContentView(R.layout.main)`要么打电话，`setContentView(tv)`但不能两者兼而有之。我更喜欢两者中的第一个......但您需要确保`TextView`在您的布局 XML 中声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:07:30.987

让我们首先尝试了解`setContentView()`方法的作用。基本上 `setContentView()`将你的 UI 放在你的`Activity`. 现在要为您的 Activity 创建一个 UI 组件，您可以使用 xml 资源（例如 R.layout.main），也可以在代码中获取 UI 组件的实例并将其动态添加到您的 Activity。例如

```
TextView tv = new TextView(this);

tv.setText("Hello, Android i am suvankar");

setContentView(tv); 
```

在您的情况下，您创建了 的实例，`TextView` `tv`为其设置了一些文本并将其添加到您的活动中。在这里你不需要使用`setContentView(R.layout.main)`. 但是，如果您的布局文件夹中有一个 xml 布局 (main.xml)，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Hello World"
    />
</LinearLayout> 
```

在你编写的应用程序的底部`setContentView(R.layout.main)`，你应该会看到一个黑屏，上面写着*Hello World 。*这是因为您在这里创建了一个`TextView`实例，为其设置了一些文本，但没有通过调用将其放置到您的活动中 `setContentView(tv)`，而是您添加了一个完全不同的布局资源。如果您使用 `setContentView(tv)`并在最后`onCreate()`添加 `setContentView(R.layout.main)`，您将再次看到*Hello World*而不是“Hello, Android i am suvankar”，因为最后您替换了 UI 资源。但是，如果您忘记添加您的 xml 资源并调用 'setContentView(R.layout.main)'，编译器会因为找不到指定的 xml 资源而发出错误。

# oop - 哪些设计模式允许管理相关对象的状态/持有（惰性）（im）可变状态，检查和修改传递/返回的对象等

> ID：11180386
> 
> 赞同：2
> 
> 时间：2012-06-24T19:06:52.467
> 
> 标签：oop, design-patterns, state

考虑两个问题：

1.  我们有一个包装器，它检测被包装的对象是否启动了事务，保留事务号并通过方法将其提供给包装器的用户。假设它当然简化了界面，它可以称为外观吗？

2.  有一个通信层为在附加设备上执行功能所需的低级操作提供高级接口（这些包括通过套接字推送字节并解析答案）。一些答案包含一个特殊的“提示号码”，这是其他一些查询所必需的。通信层检测包含提示号码的答案并将该号码存储在可供呼叫者使用的特殊持有人中。这能叫门面吗？

总的来说，这些问题与一个更普遍的问题有关：哪些设计模式允许存储或管理可变或不可变状态和/或检查传递给包装对象或从它们返回的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:29:08.830

看看观察者模式[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern) 状态模式也可以使用：[http](http://en.wikipedia.org/wiki/State_pattern) ://en.wikipedia.org/wiki/State_pattern 或许还有 Memento [http:// /en.wikipedia.org/wiki/Memento_pattern](http://en.wikipedia.org/wiki/Memento_pattern) 取决于您想要完成的任务。

对于观察者来说，请查看 boost 信号和插槽或 qt 信号和插槽，以获得一些简洁的实现。

# ruby-on-rails - Ruby on Rails：db:migrate 的目的

> ID：11180388
> 
> 赞同：0
> 
> 时间：2012-06-24T19:06:59.033
> 
> 标签：ruby-on-rails, rake

当我阅读 Rails 书时，每次创建新数据库时，总是遵循`db:migrate`.

```
rails generate scaffold school
rake db:migrate 
```

在控制台视图中，我看到第一行，Rails 创建了一些文件，没问题。但在第二行中，我看到 Rails 并没有真正改变任何东西。我查看了 Rails 几乎创建的一些文件，也没有看到任何变化。

那么，第2行的目的是什么，请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:09:52.997

rake 将更改迁移到您的数据库中。它实际上更改了数据库模式以匹配您之前生成的脚手架模型。

没有它，您将没有一个表格可以将您的对象写入其中。或者在更改模型的情况下，表格可能与您的模型不同，从而导致错误。

当您生成模型（或脚手架模型）时，会在您的 db/migration 目录中创建一个迁移文件。它是一个纯文本文件，如果需要，您可以手动创建。这是Rails中关于数据库的迭代开发工具。每次迁移都会对系统进行一些更改。当你运行`rake db:migrate`你的数据库时，给定的迁移会更新。在分布式开发的情况下，这是一个方便的工具，当一个程序员可以从存储库中签出代码，并可以在他自己的开发数据库上运行迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:00:52.330

`db:migrate`, 是告诉 rails 使用新更改更新数据库的命令。这样想

当你说`rails generate scaffold`Rails 会生成模型、控制器等文件时，它会在 db/migrate 下创建一个文件，其中包含用于更新数据库的 sql 脚本。

例如：如果您运行`rails generate scaffold User name:string`，那么您将需要数据库中名为 users 的表，其列为 'name'，该 sql 脚本将在 db/migrate 文件夹下生成

使用`db:migrate`, 命令，您告诉 Rails 将新的 sql 脚本迁移到数据库，在上述情况下，它将创建“用户”表

如果你`rake -T`从你的 Rails 应用程序根目录运行，你可以看到所有的 rake 任务

HTH :)

# .net - 如何将程序集保存到磁盘？

> ID：11180391
> 
> 赞同：6
> 
> 时间：2012-06-24T19:07:15.223
> 
> 标签：.net, save, .net-assembly, disk

如何将程序集保存到文件？即我的意思不是动态程序集，而是“正常”的内存程序集。

```
Assembly[] asslist = AppDomain.CurrentDomain.GetAssemblies();
foreach (Assembly ass1 in asslist)
{
    // How to save?
} 
```

当应用程序从资源加载一些引用的程序集时，可能会发生这种情况。我想将它们保存到磁盘。

不可能从资源中提取程序集，因为它们在那里被加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:05:09.020

根据 Greg Ros 的想法，我开发了这个小片段。请注意，我试图坚持命名约定。

```
public void SaveAllAssemblies()
{   
    Assembly[] asslist = AppDomain.CurrentDomain.GetAssemblies();
    foreach (Assembly ass in asslist)
    {
        FileInfo fi = new FileInfo(ass.Location);

        if (!fi.Extension.Equals(".exe", StringComparison.InvariantCultureIgnoreCase))
        {
            var assName = fi.Name;
            var assConverter = new FormatterConverter(); 
            var assInfo = new SerializationInfo(typeof(Assembly), assConverter);
            var assContext = new StreamingContext();

            using (var assStream = new FileStream(assName, FileMode.Create))
            {
                BinaryFormatter bformatter = new BinaryFormatter();
                ass.GetObjectData(assInfo, assContext);

                bformatter.Serialize(assStream, assInfo);
                assStream.Close();
            }
        }
    }
} 
```

但有些程序集没有标记为可序列化，例如 mscorlib.dll。因此，这可能只是部分解决方案？

尽管可以序列化*某些*程序集，但我建议使用示例中提供的 FileInfo，生成一个列表并检查**原始** 程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:44:04.687

您需要找到您的程序集来自的路径。你可以像这样找到它：

```
Assembly ass = ...;
return ass.Location; 
```

请注意，那`as`是关键字，不能用作标识符。我建议使用`ass`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:22:32.643

尝试序列化程序集怎么样？它是可[序列化](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getobjectdata)的。

# c# - 如何在 WrapPanel 的鼠标单击点中添加控件

> ID：11180392
> 
> 赞同：1
> 
> 时间：2012-06-24T19:07:16.520
> 
> 标签：c#, wpf, wrappanel

我的程序中有一个`WrapPanel`在运行时添加一些按钮的按钮（例如用于在此站点中添加问题标签的面板）。现在我想在按钮之间单击并在单击鼠标的地方添加一个新按钮。但是我不知道如何在按钮之间获取鼠标位置或如何获取在鼠标单击之前放置的按钮的子索引！

我应该说我必须使用`WrapPanel`，我不想使用`Canvas`或其他容器。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:17:56.350

`MouseClick`如果您遇到以下情况，请使用此代码`WrapPanel`：

```
Button b = new Button();
b.Location = new Point(MousePosition.X-this.ClientSize.Width, MousePosition.Y-this.ClientSize.Height);
this.Controls.Add(b); 
```

更新 ：

```
Button b = new Button();
b.Location = new Point(MousePosition.X - this.ClientSize.Width, MousePosition.Y - this.ClientSize.Height);
this.WrapPanel1.Controls.Add(b); 
```

更新 2：

```
Button mybutton = new Button();
        mybutton.Content = "This is wpf button";
        Point mousePoint = this.PointToScreen(Mouse.GetPosition(this));  
        MainWindow win = new MainWindow();  
        win.Left = mousePoint.X;  
        win.Top = mousePoint.Y;
        mybutton.PointToScreen(new Point(win.Left,win.Top));
        wrapPanel1.Children.Add(mybutton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:58:47.520

这段代码解决了我的问题：

```
 private void wpContainer_MouseDown(object sender, MouseButtonEventArgs e)
    {
        Button newButton = new Button()
                         {
                             Content= wpContainer.Children.Count,

                             Margin = new Thickness()
                             {
                                 Right = 10,

                                 Left = 10,
                             }
                         };

        var mousePosition = Mouse.GetPosition(wpContainer);

        int index=0;

        foreach (var child in wpContainer.Children)
        {
            Button currentButton = (child as Button);

            if (currentButton==null)
                continue;

            Point buttonPosition = currentButton.TransformToAncestor(wpContainer).Transform(new Point(0, 0));

            if (buttonPosition.X  > mousePosition.X && buttonPosition.Y+currentButton.ActualHeight > mousePosition.Y)
            {
                wpContainer.Children.Insert(index, newButton);

                return;                    
            }

            index++;
        }

        if(wpContainer.Children.Count==0 || index==wpContainer.Children.Count) //no items where detected so add it to the end of the Children
            wpContainer.Children.Add(newButton);
    } 
```

# c# - SqlCommandBuilder 如何完成它的工作，我如何阻止 ReSharper 删除它的建议？

> ID：11180397
> 
> 赞同：3
> 
> 时间：2012-06-24T19:08:33.833
> 
> 标签：c#, resharper, dataadapter, sqldataadapter, sqlcommandbuilder

我不明白它是怎么[`SqlCommandBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)做的。我有以下代码：

```
public void TestCommandBuilder()
{
    var pubsDataSet = new DataSet("Pubs");
    var pubs = ConfigurationManager.ConnectionStrings["PubsConnectionString"];
    var connection = new SqlConnection(pubs.ConnectionString);
    SqlCommand cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT * FROM Publishers";
    var da = new SqlDataAdapter(cmd);

    da.Fill(pubsDataSet, "publishers");
    foreach (DataRow row in pubsDataSet.Tables["publishers"].Rows)
    {
        row["pub_name"] = "Updated " + DateTime.Now.Minute + DateTime.Now.Second;
    }

    // The variable builder is not used
    var builder = new SqlCommandBuilder(da);

    da.UpdateBatchSize = 3;
    da.RowUpdated += DaRowUpdated;

    da.Update(pubsDataSet, "publishers");
}

private void DaRowUpdated(object sender, SqlRowUpdatedEventArgs e)
{
    Console.WriteLine("Rows: " + e.RecordsAffected + "\r\n");
} 
```

该变量`builder`不在任何地方使用，我也不像在[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)`GetUpdateCommand()`上那样调用该方法。我只创建，将其传递给. 但代码工作正常。`SqlCommandBuilder``SqlDataAdapter`

如果你看一下代码，它似乎是一行

```
var builder = new SqlCommandBuilder(da); 
```

可以安全删除。事实上，ReSharper 建议删除它。但如果我这样做了，代码将不再运行，因为`SqlDataAdapter`它不知道如何执行更新。

在调试模式下，我注意到在执行该行之后，`SqlDataAdapter`'`UpdateCommand`属性仍然是`null`. 从[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)文档中，我了解到将`SqlCommandBuilder`自身注册`RowUpdated`到`SqlDataAdapter`.

但是当那个事件被触发时它会做什么呢？实际上是在`SqlDataBuilder`执行更新本身吗？

我注意到的其他事情，如果我删除`SqlCommandBuilder`，我的`DaRowUpdated`方法被触发一次，就在`da.Update`语句上发生 InvalidOperationException 之前。我没想到的是。我认为该`RowUpdated`事件仅在实际更新行时发生。

所以......三个具体问题：

1.  如何防止 ReSharper 建议删除此行？
2.  编写一个像这样的类是不好的做法`SqlCommandBuilder`，其中代码没有以任何方式表明创建一个实例正在对`SqlDataAdapter`传入的东西做某事？
3.  这是一种[设计模式](http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29)吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:25:07.743

如果您不使用该变量，则绝对没有必要。如果它的构造函数中发生了一些*有用*的事情，你仍然可以调用它：

```
var builder = new SqlCommandBuilder(da); 
```

应该：

```
new SqlCommandBuilder(da); 
```

这应该在不改变代码行为的情况下处理警告。它看起来有点奇怪，如果这真的有必要，我对设计`SqlCommandBuilder`有点质疑。但在实践中，这样的用法与普通的方法调用本质上是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T02:02:53.690

根据我对这个问题的评论：

```
 public void TestCommandBuilder()
    {
        var pubs = ConfigurationManager.ConnectionStrings["PubsConnectionString"];

        using (var pubsDataSet = new DataSet("Pubs"))
        using (var connection = new SqlConnection(pubs.ConnectionString))
        using (SqlCommand cmd = connection.CreateCommand())
        {
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT * FROM Publishers";

            using (var da = new SqlDataAdapter(cmd))
            using (new SqlCommandBuilder(da))
            {
                da.UpdateBatchSize = 3;
                da.RowUpdated += DaRowUpdated;
                da.Fill(pubsDataSet, "publishers");
                foreach (DataRow row in pubsDataSet.Tables["publishers"].Rows)
                {
                    row["pub_name"] = "Updated " + DateTime.Now.Minute + DateTime.Now.Second;
                }

                da.Update(pubsDataSet, "publishers");
            }
        }
    }

    private void DaRowUpdated(object sender, SqlRowUpdatedEventArgs e)
    {
        Console.WriteLine("Rows: " + e.RecordsAffected);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T01:19:48.113

我的理解是在构建命令构建器对象期间，它在 DataAdapter 上添加了对自身的引用，因此它知道如何构建 CRUD 命令。

请注意您在上面发布的链接的备注下的此部分。

*

> SqlDataAdapter 不会自动生成对 DataSet 所做的更改与 SQL Server 的关联实例进行协调所需的 Transact-SQL 语句。但是，如果您设置 SqlDataAdapter 的 SelectCommand 属性，您可以创建一个 SqlCommandBuilder 对象来自动生成单表更新的 Transact-SQL 语句。然后，您未设置的任何其他 Transact-SQL 语句都由 SqlCommandBuilder 生成。

*

# iphone - NSTimer 没有停止？

> ID：11180400
> 
> 赞同：2
> 
> 时间：2012-06-24T19:09:06.850
> 
> 标签：iphone, xcode, nstimer, nsrunloop

我正在尝试使用以下代码停止 NSTimer：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    timer3 = [NSTimer timerWithTimeInterval:5.0 target:self selector:@selector(start) userInfo:nil repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:timer3 forMode:NSDefaultRunLoopMode];
}

-(void)invalidate
{  
    [timer3 invalidate];
    timer3 = nil; 
} 
```

我`-(void)invalidate`从另一个班级打电话是这样的：

```
-(void)timer
{
    ClassOfMyTimer *class = [[ClassOfMyTimer alloc] init];
    [class invalidate];
} 
```

但计时器不会停止。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:14:21.947

您需要在创建计时器的类`invalidate`的同一*实例上调用您的方法。*在您的`timer`方法中，您创建了一个新的类实例，它可以有自己的计时器并使之无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:16:01.513

我对您在这里尝试做的事情感到有些困惑，但我猜您没有维护对 timer3 的引用。

您是否在 .h 文件中为计时器创建了一个属性：

```
@property (strong) NSTimer *timer3; 
```

然后在.m文件中添加了synthesize语句：

```
@synthesize timer3; 
```

然后，在 viewDidLoad: 中，您可以通过以下方式维护对您正在创建的计时器的引用：

```
self.timer3 = [[[NSTimer timerWithTimeInterval:5.0 target:self selector:@selector(start) userInfo:nil repeats:YES]; 
```

[[NSRunLoop mainRunLoop] addTimer:self.timer3 forMode:NSDefaultRunLoopMode];

并且，稍后使计时器无效：

```
[self.timer3 invalidate]
self.timer3 = nil 
```

在预览版中，Sven 还为可能影响您的问题提供了有效的解决方案。

# ruby-on-rails - 获取 user_id 不是 1 的所有任务

> ID：11180414
> 
> 赞同：0
> 
> 时间：2012-06-24T19:10:24.437
> 
> 标签：ruby-on-rails, request

我想选择 user_id 不是 1 的所有任务。

我试图在控制台中找到我的答案，但我无法弄清楚。

我尝试过的事情：

```
@otherUsers = User.offset(1).pluck(:id)<br>
User.find(@otherUsers).tasks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:19:10.057

试过这个吗？

```
Client.where("user_id != ?", 1) 
```

对于 user_id 不是 1 的所有用户。

最好的祝福。

# iphone - FB返回崩溃应用程序xcode ios iphone

> ID：11180419
> 
> 赞同：0
> 
> 时间：2012-06-24T19:11:00.123
> 
> 标签：iphone, ios, xcode

当将 FB 集成到我的应用程序时，它会出现并确认它已连接，但是当它返回到应用程序时它会崩溃，

这是从 fb 开发者页面返回的过程，并添加到我的视图控制器页面

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [[Ball_GameViewController facebook] handleOpenURL:url]; 

} 
```

在开始的线路上有一个咨询

> 返回

说

> 警告：“Ball_GameViewController”可能不会响应“+facebook”

任何想法我将它引导到错误的区域。

## Ball_GameViewController.h

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@interface Ball_GameViewController : UIViewController <FBSessionDelegate, FBDialogDelegate>
{
    Facebook *facebook;
}

@property (nonatomic, retain) Facebook *facebook;
@property (nonatomic, retain) IBOutlet UIWindow *window;

- (IBAction)facebookpost;
- (IBAction)start;
- (IBAction)reset;
- (void)countdown;
- (void)scorecount;
- (void)checkTime;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:16:01.060

在你的你需要使用：**`Ball_GameViewController`** `@interface`

```
@property (nonatomic, strong) Facebook * facebook; 
```

在你需要**`Ball_GameViewController`** `@implementation``@synthesize facebook;`

## 更新

试试这个：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

    Ball_GameViewController * ballGame = [[Ball_GameViewController alloc] init];

    return [[ballGame facebook] handleOpenURL:url]; 
} 
```

# spring - Spring集成：通过适配器随机接收JMS消息失败

> ID：11180420
> 
> 赞同：2
> 
> 时间：2012-06-24T19:11:10.760
> 
> 标签：spring, jms, activemq, spring-integration

我正在尝试为 JMS 队列编写通道适配器。我想向 JMS 队列发送消息并在 Spring Integration 的频道上接收它。

当我使用普通的 JMS（使用 ActiveMQ）时，一切正常，所以我认为错误存在于我的 Spring 代码中。

所以这是我的 Spring 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:int="http://www.springframework.org/schema/integration"
        xmlns:jms="http://www.springframework.org/schema/integration/jms"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration
        http://www.springframework.org/schema/integration/spring-integration.xsd
        http://www.springframework.org/schema/integration/jms
        http://www.springframework.org/schema/integration/jms/spring-integration-jms.xsd">

    <!-- jms beans -->
    <bean id="jms.msgQueue" class="org.apache.activemq.command.ActiveMQQueue">
        <constructor-arg value="MSG_QUEUE" />
    </bean>

    <bean name="jms.connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="tcp://localhost:61616" />
    </bean>

    <!-- spring integration beans -->
    <int:channel id="channels.jms.allMessages">
        <int:queue capacity="1000" />
    </int:channel>

    <jms:inbound-channel-adapter id="adapters.jms.msgAdapter"
        connection-factory="jms.connectionFactory"
        destination="jms.msgQueue"
        channel="channels.jms.allMessages">
        <int:poller fixed-rate="500" />
    </jms:inbound-channel-adapter>

</beans> 
```

这是可以正常工作的普通 JMS 发送-接收代码：

```
 @Test
    public void testPlainJms() throws JMSException {
        MessageProducer producer = session.createProducer(msgQueue);
        MessageConsumer consumer = session.createConsumer(msgQueue);

        // send to JMS queue
        TextMessage textMessage = session.createTextMessage();
        textMessage.setText("Message from JMS");
        producer.send(textMessage);

        connection.start();
        javax.jms.Message message = consumer.receive(TIMEOUT);
        assertEquals("Message from JMS", ((TextMessage) message).getText());
        connection.stop();
    } 
```

这是使用 Spring 的 MessageChannel 的代码，它通常不起作用（有时会起作用，但我无法确定何时）：

```
@Test
public void testInboundAdapter() throws JMSException {
    MessageProducer producer = session.createProducer(msgQueue);

    // send to JMS queue
    TextMessage textMessage = session.createTextMessage();
    textMessage.setText("Message from JMS");
    producer.send(textMessage);

    // receive in local channel (using inbound adapter)
    Message<?> received = ((PollableChannel) msgChannel).receive(TIMEOUT);
    String payload = (String) received.getPayload();
    assertEquals("Message from JMS", payload);
} 
```

我收到来自可轮询 msgChannel 的消息时收到**NullPointerException 。**以下是我如何将 bean 从 Spring 配置自动装配到我的测试类：

```
@Autowired @Qualifier("jms.msgQueue")
Queue msgQueue;

@Autowired @Qualifier("channels.jms.allMessages")
MessageChannel msgChannel;

@Autowired
ConnectionFactory connectionFactory; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:03:57.017

奇怪，我能够重现您的问题，可能是入站通道适配器的错误，但我有一些始终有效的东西，通过从`inbound-channel-adapter`to 更改`message-driven-channel-adapter`，试试这个：

```
<jms:message-driven-channel-adapter id="adapters.jms.msgAdapter"
    connection-factory="jms.connectionFactory"
    destination="jms.msgQueue"
    channel="channels.jms.allMessages" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T19:18:18.957

超时时失败。

```
Message<?> received = ((PollableChannel) msgChannel).receive(TIMEOUT); 
```

你必须`received`检查`null`

# javascript - Javascript翻转/镜像图像

> ID：11180427
> 
> 赞同：0
> 
> 时间：2012-06-24T19:11:53.203
> 
> 标签：javascript, jquery, transformation, image-rotation

有谁知道是否可以翻转图像并在其背面有内容。这就是我的意思：想象你手里拿着一幅肖像。然后您翻转并查看肖像的背面，背面有文字。我正在寻找类似的东西，onClick 图像将镜像/翻转到另一侧，该侧将有文字。没有 90 180 度旋转。它是一种三维旋转。有谁知道这是否可能？如果是这样，如何？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:14:27.280

查看[Flip jQuery 插件及其演示](http://lab.smashup.it/flip/)或[QuickFlip](http://jonraasch.com/blog/quickflip-2-jquery-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:24:11.737

您可以在 css 中使用带有负值的 scale 选项。翻转图像。然后你在 css 中也有 3dtransforms。与 javascript 一起，它们提供了很好的效果。

# scala - 异常解析浮点值

> ID：11180429
> 
> 赞同：12
> 
> 时间：2012-06-24T19:12:07.163
> 
> 标签：scala, playframework-2.0, anorm

在 Play framework 2.0 中，我尝试使用这样的行解析器从 PostgreSQL 加载一个真实（即单精度浮点）类型的列：

```
case class Foo(bar: Float)

object Foo {
    def all = DB.withConnection { implicit c =>
        SQL("SELECT * FROM foo").as(fooParser *)
    }

    val fooParser = {
        get[Float]("bar") map {     
          case bar => Foo(bar)
        }
    }
} 
```

这会产生一个错误：`could not find implicit value for parameter extractor: anorm.Column[Float]`

当使用双精度类型时，一切正常。是否可以在 Anorm 中使用单精度浮点数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T07:02:53.020

您始终可以基于现有的列解析器创建自己的列解析器：

```
 implicit def rowToFloat: Column[Float] = Column.nonNull { (value, meta) =>
  val MetaDataItem(qualified, nullable, clazz) = meta
  value match {
    case d: Float => Right(d)
    case _ => Left(TypeDoesNotMatch("Cannot convert " + value + ":" + value.asInstanceOf[AnyRef].getClass + " to Float for column " + qualified))
  }
} 
```

但它与 JDBC 驱动程序返回的值类型匹配，这可能不正确（取决于列定义）。

# grails - 如何在 Grails 中更改 joda--time 默认 DateTime 格式

> ID：11180431
> 
> 赞同：3
> 
> 时间：2012-06-24T19:12:30.407
> 
> 标签：grails, jodatime, formatting

我正在使用带有 joda-time:1.3.1 和 joda-time-templates 插件的 Grails 2.0.3 (groovy 1.8.6)。一切正常，但我想更改日期和时间的显示格式。我怎样才能做到这一点？每个域都是脚手架，因此我无法访问任何视图来手动呈现它。

我的域名

```
import org.joda.time.*
import org.joda.time.contrib.hibernate.*

    class Game {

        Team host
        Team guest
        String location
        DateTime date

        static mapping = {
            date type: PersistentDateTimeTZ, {
                column name: "date_timestamp"
                column name: "date_zone"
            }
        }
    } 
```

呈现日期

```
Date 5/24/12 5:53 PM 
```

我想得到它

```
Date 5 may 2012 17:53 PM 
```

有没有办法翻译月份的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T01:28:25.400

在 config.groovy 中定义它

```
jodatime {  format.org.joda.time.DateTime = "dd MMM YYYY HH:mm a" } 
```

那应该照顾它。

# c++ - C++：在命名空间中的多个文件中使用 typedef。

> ID：11180432
> 
> 赞同：3
> 
> 时间：2012-06-24T19:12:42.477
> 
> 标签：c++, namespaces, header-files

我正在跨多个文件定义一个命名空间。在一个文件中，在命名空间中，我声明了一个名为 MyType 的类型。在另一个文件中并且仍在命名空间中，我不应该能够看到该类型，而不必包含头文件吗？下面是一个例子：

```
FILE A
namespace EE
{
    typedef int MyType;
}

FILE B
namespace EE
{
    MyType a = 10;
} 
```

同样，据我了解，命名空间有助于清理包含。如果我定义了 30 个文件将使用的类型，那么如果我使用命名空间，我不应该在所有文件中都包含标题，或者我想。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T19:22:35.600

引入了命名空间来解决名称冲突的问题。差不多就是这样。编译一个文件时，会生成一个目标文件。当编译下一个文件时，来自这个目标文件的信息并没有丰富编译器的知识。这意味着您需要将您的`typedef`定义作为某些标头的一部分包含在每个 C/C++ 文件中。你的 typedef 是否是命名空间的一部分并不重要。

请注意，typedef 是“单一定义规则”的例外。您可以在一个翻译单元中拥有多个相同的 typedef，如下所示：

```
typedef int MyInt;
....
typedef int MyInt; 
```

这不会导致语法错误。

导出模板的“不丰富知识”规则有一个例外。但这仅适用于模板，编译器不支持此功能。经过深思熟虑，它甚至从标准中删除。

# python - 聚合来自多个模块的多个测试用例以在 PyDev TestRunner 中运行

> ID：11180433
> 
> 赞同：6
> 
> 时间：2012-06-24T19:12:46.187
> 
> 标签：python, unit-testing, pydev

聚合来自多个模块的测试用例的最佳方法是什么，以便单个测试运行将全部执行并在 PyDev UnitTest 窗口中显示结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T10:50:46.480

根据您的需要，PyDev 有很多选择：

1.  右键单击一个文件夹并选择'run as > Python unit-test'（将运行目录下的所有模块作为单元测试）。

2.  右键单击多个 Python 模块并选择“运行方式 > Python 单元测试”（将为所有这些模块加载测试并运行它们）。

3.  创建一个导入所有具有不同名称的测试的模块，并为该模块选择“运行方式 > Python 单元测试”。

IE：

```
from test_mod1 import Test as Test1
from test_mod2 import Test as Test2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:57:12.510

```
import sys
import unittest
# add here some import paths
sys.path.append(r'..\..')

if True: #__name__ == '__main__':
    try:
        __file__
    except NameError:
        path = '.'
    else:
        path = os.path.split(__file__)[0]
    caseset = dict()
    def addSuite(suite):
        for case in suite:
            if isinstance(case, unittest.TestSuite):
                addSuite(case)
                continue
            key = case.id()
            if key in caseset:
##                print 'in:', type(case).__name__
                pass
            else:
##                print 'new:', type(case).__name__
                caseset[key] = case

    for filename in os.listdir(path): # could also be os.walk
        if filename.startswith('test_'):
            filepath = os.path.join(path, filename)
            modname, ext = os.path.splitext(filename)
            if os.path.isfile(filepath) and ext.lower() in ('py', 'pyw'):
                mod = __import__(modname)
            else:
                try:
                    mod = __import__(modname)
                except ImportError:
                    ty, er, tb = sys.exc_info()
                    if tb.tb_next:
                        traceback.print_exception(ty, er, tb)
                    continue

            cases = unittest.defaultTestLoader.loadTestsFromModule(mod)
            addSuite(cases)
    l = caseset.values()
    suite = unittest.TestSuite(l)
    ##if __name__ == '__main__':
        ##unittest.TextTestRunner(verbosity=1).run(suite) # run all tests 
```

此文件导入同一目录中以“test_”开头的所有模块并将它们全部添加到`suite`变量中。

`suite`应该由 pydev 运行，但我无法测试它 - 我没有 pydev。

# asp.net - 解码和 RequestQueryString

> ID：11180437
> 
> 赞同：0
> 
> 时间：2012-06-24T19:13:21.087
> 
> 标签：asp.net, vb.net, query-string

我的网址是

```
www.domainname.com/default.aspx?l=en&amp;t=32600483-1618-4f09-9a86-c12de4dafc7b 
```

我很想阅读 QueryString 的值`t`。所以我可以将其解析为 GUID。

不幸的是，这`&amp;`件事似乎把事情搞砸了。

如何解析`t`查询字符串的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:15:47.833

> 我的网址是

我希望您意识到这**不是一个有效的 URL**。这是一个 HTML 编码的字符串。不要与 URL 混淆。URL 应该是正确的 URL 编码，而不是 HTML 编码。而且由于您从无效的内容开始，您唯一的机会是使用一些丑陋的字符串解析/正则表达式来提取必要的信息。由于这看起来像一个 HTML 编码的字符串，您可以先对其进行 HTML 解码：

```
var myUrl = "http://www.domainname.com/default.aspx?l=en&amp;t=32600483-1618-4f09-9a86-c12de4dafc7b";
myUrl = HttpUtility.HtmlDecode(myUrl);
var values = HttpUtility.ParseQueryString(myUrl);
var t = values["t"]; 
```

但我再次重申：不要这样做：从根本上解决问题。你的问题的根源是这个 URL 的来源。因此，如果您可以控制此 URL 的生成，请对其进行修复，以便您可以拥有一个可以轻松使用内置方法的有效 URL。如果您无法控制 URL 的生成，请通知代码作者他有一个错误并要求他修复它，因为他为您提供了一个未正确编码的 URL，您有义务使用一些丑陋的字符串解析机制来从中提取信息。

# javascript - 通过css包含javascript？

> ID：11180441
> 
> 赞同：3
> 
> 时间：2012-06-24T19:14:17.047
> 
> 标签：javascript, css, styles

好吧，基本上我有一个网站，其样式包含在各种 css 文件中，现在我想添加某种 js，但只有一种样式。所以我希望能够将它添加到我的css文件中，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:15:40.960

不，这是不可能的，也不应该是这样。将您的应用程序逻辑与您的样式分开。

当两者需要交互时，您可以使用 JavaScript 检测某些样式并从那里加载各种其他 JavaScript 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:17:20.640

不，这是不可能的。但是，请查看 jQuery 选择器以将 JavaScript 功能附加到某些 CSS 类名称：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

例如，您可以像这样声明具有特定类名的元素：

```
<div class="class-name"></div> 
```

然后在您的文档中包含一些 JavaScript，这些 JavaScript 根据其类名对元素执行某些操作，如下所示：

```
$('.class-name').click(function() {
alert('You clicked .class-name');
}); 
```

这是上面的 jsFiddle 示例：http: [//jsfiddle.net/YAZpE/](http://jsfiddle.net/YAZpE/)

# terminal - 终端编辑文件以删除某些字符

> ID：11180449
> 
> 赞同：1
> 
> 时间：2012-06-24T19:14:42.687
> 
> 标签：terminal

我有几个文件格式如下：

```
TCTCTGGAAAGGGACGCCTGGGGAGG 10
AAAAATACATTCTAACCTCGGCGT 1
TAATTTCATCAATATATCAATG 1
（ETC...）

```

我想删除空格后的所有内容，以便最后得到这个：

```
TCTCTGGAAAGGGACGCCTGGGGAGG
AAAAATACATTCTAACCTCGGCGT
TAATTTCATCAATATATCAATG
（ETC...）

```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:26:04.093

您可以使用 awk 执行此操作：

```
cat oldfile | awk '{print $1}' > newfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:37:08.173

```
cut -d' ' -f1 file.txt 
```

或者：

```
sed 's/ .*//' file.txt 
```

或者

```
sed -e 's/[^ACTG]//g' file.txt 
```

或者

```
awk '{print $1}' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:41:15.537

不像 timos 的回答那样简洁漂亮:)，而是另一个使用 Ruby 编写的相同功能的快速示例。

```
#!/usr/bin/env ruby

data = File.read("data.txt")
f = File.open("outData.txt", "w")
finalData = data.scan(/^\w+/)
finalData.each {|i| f.write(i + "\n")}
f.close 
```

# ruby-on-rails - 使用表单在 Rails 中持久化嵌套资源

> ID：11180450
> 
> 赞同：0
> 
> 时间：2012-06-24T19:14:47.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个对以下动作/对象进行操作的 form_for：

```
 def new
     @student = Students.new
   end 
```

另外，表单是从以下路径调用的

```
 schools/4/students/new 
```

将学校的 id（在这种情况下为 4）保存到数据库中的新学生记录的最佳方法是什么？我无法用它预加载他的@student 对象，因为它在下一次请求时丢失了。我在表单中使用了hidden_​​field，但是rails中一定有更好的方法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:24:44.663

`students`控制器：

```
def new
  @school = School.find(params[:school_id])
  @student = @school.students.build
end

def create
  @school = School.find(params[:school_id])
  @student = @school.students.build(params[:student])
  if @student.save
    ...
  else
    ...
  end
end 
```

形式：

```
<%= form_for([@school, @student]) do |f| %>
...
<% end %> 
```

# jquery - jQuery：如何知道 div 的 id 值？

> ID：11180457
> 
> 赞同：1
> 
> 时间：2012-06-24T19:15:53.910
> 
> 标签：jquery

我有一个带有 youtube 结果的 div

```
 <div id="result" style="display: block;">

    <div id="lqT_dPApj9U" class="item view-item">
      <div style="float: left;"><img class="thumbnail" alt="" src=
      "http://i.ytimg.com/vi/m0SdBmkp9cw/default.jpg" /></div>

      <div id="name">
        <p class="title">Title goes here</p>

        <p class="views">2192501</p>
      </div><input id="video_id" type="hidden" />
    </div>

    <div id="hKoB0MHVBvM" class="item view-item">
      <div style="float: left;"><img class="thumbnail" alt="" src=
      "http://i.ytimg.com/vi/lqT_dPApj9U/default.jpg" /></div>

      <div id="name">
        <p class="title">Coca-Cola Happiness Machine</p>

        <p class="views">4791156</p>
      </div><input id="video_id" type="hidden" />
    </div>
  </div> 
```

问题

如何从结果 div 中获取 div id="hKoB0MHVBvM" 的值？

我尝试了以下 jQuery

```
$(function(){
    $('.item').live('click', function(){
        alert($(this).id);
    });
});​ 
```

但它似乎不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T19:17:48.170

```
$(function(){
    $('.item').live('click', function(){
        alert(this.id);
    });
});​ 
```

`this.id`是“原生的”并且比 jQuery 更快`$(this).attr('id');`（缓慢而冗长）。

PS：从 jQuery 1.6 开始`.live()`，方法已被弃用。如果您有更新的版本，请使用`.on()`：

`$('#result').on('click', '.item', function(){`

[http://api.jquery.com/on](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:17:24.923

attr 方法是您所需要的：

```
$(function(){
    $('.item').live('click', function(){
        alert($(this).attr('id'));
    });
});​ 
```

# android - 从标准java类设置通知栏图标

> ID：11180466
> 
> 赞同：0
> 
> 时间：2012-06-24T19:16:54.290
> 
> 标签：android, notifications, icons

我目前正在开发一个 android 项目，并且正在尝试从标准 java 类（不是活动类）创建通知。

我已经在名为 icon.png 的可绘制文件夹中添加了一个图标，但是当我尝试使用`R.drawable.icon`图标将图标设置为 int 时，永远不会只显示默认的内置 android 图标。

我不明白为什么它没有显示我自己的图标。

感谢您的任何帮助，您可以提供。

**更新** 如下要求是设置通知的代码

```
private void showNotification(String username, String password)
{
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notificationManager = (NotificationManager)context.getSystemService(ns);

    CharSequence tickerText = "Username Copied";
    long when = System.currentTimeMillis();

    int icon = 0;

    Notification notification = new Notification(icon, tickerText, when);
    CharSequence contentTitle = "BPM - Login Management";
    CharSequence contentText = "Username Copied";

    Intent intentNotification = new Intent();
    intentNotification.setAction(Long.toString(when));
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intentNotification, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    final int NOTIFICATION_ID = 1;
    notificationManager.notify(NOTIFICATION_ID, notification);
} 
```

我`icon = 0`只是为了阻止它给我错误而设置。我知道我需要以某种方式使用 R.drawable 来获取实际的图标 ID。只是不确定为什么这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:34:17.217

检查你的进口。

您要导入 COM.YOURAPP.R，而不是 android.R

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:23:44.040

我不知道为什么我不能对这个问题添加评论。无论如何，您是否厌倦了单击项目菜单，然后单击清理..？然后打开 R.java 文件，看看你的图标是否列在那里？试试这个 ：

```
 int icon = R.drawable.icon; 
```

代替

```
int icon =0; 
```

# android - 进度条设置可见不起作用

> ID：11180467
> 
> 赞同：6
> 
> 时间：2012-06-24T19:17:09.777
> 
> 标签：android, progress-bar

我有这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
android:background="@drawable/menu_background"
>

<ProgressBar 
  android:id="@+id/aPBar"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_centerInParent="true"
  style="@android:style/Widget.ProgressBar.Inverse"/>

 ...

</RelativeLayout> 
```

在我的 onCreate 方法中，我首先隐藏 ProgressBar：

```
LayoutInflater inflater = getLayoutInflater();
RelativeLayout layout = (RelativeLayout)inflater.inflate(R.layout.achievements_screen, null);

progressBar=(ProgressBar)layout.findViewById(R.id.aPBar);
progressBar.setVisibility(View.INVISIBLE); 
```

但是`ProgressBar`仍然一直可见......我也试过了`View.GONE`。

当我设置

```
android:visible="gone" 
```

在 XML 文件中，`ProgressBar`没有出现，但我不能让它出现

```
 progressBar.setVisibility(View.Visible); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:39:07.260

您正在使用 Layout Inflater 为新视图充气。这**不是**当前屏幕上的视图。

因此更改它的可见性不会影响屏幕 UI。

更进一步，您必须调用您的 Activity `setContentView`，**这是**您的 UI 上可见的布局。

因此调用：

`findViewById`将在屏幕上返回您的进度条，但调用`layout.findViewById`将返回该布局进度条（正确），但这不是您可以在屏幕上看到的进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T09:07:44.183

这对我有用：

```
rootView.findViewById(R.id.progress_bar).setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T14:03:42.027

我的解决方法是在 XML 中隐藏视图，然后在需要时在运行时取消隐藏/隐藏它： `android:visibility="gone"`

# javascript - Javascript 三维数组，得到错误

> ID：11180468
> 
> 赞同：0
> 
> 时间：2012-06-24T19:17:14.193
> 
> 标签：javascript, arrays, multidimensional-array

我想在 JavaScript 中创建一个三维数组，但在 Chrome 中出现错误：

```
Error: Uncaught SyntaxError: Unexpected token [ 
```

我的 JavaScript 看起来像这样：

```
 function ThreeDimensionalArray(iRows,iCols,iHig)
   {
      var i;
      var j;
      var z;
      var a = new Array(iRows);
      for (i=0; i < iRows; i++)
         d  {
           a[i] = new Array(iCols);
           for (j=0; j < iCols; j++)
               {           
                  var a[i][j] = new Array(iHig);
                  for (z=0; z < iHig; z++){
                  a[i][j][z] = "";
               };
          };
     };
  return(a);
  }; 

  var hello = ThreeDimensionalArray(3,3,3); 
```

[​http://jsfiddle.net/JknVF/1/](http://jsfiddle.net/JknVF/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:20:02.037

改变

`var a[i][j] = new Array(iHig);`

到

`a[i][j] = new Array(iHig);`.

`var`表示您要定义一个新变量。`a`已经定义了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:32:43.253

从以下行中删除“var”：

```
var a[i][j] = new Array(iHig); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:36:31.353

我已经更正了您的代码以在此处制作工作版本：

[http://jsfiddle.net/JknVF/7/](http://jsfiddle.net/JknVF/7/)

# android - 切换活动/标签时如何关闭Android键盘

> ID：11180469
> 
> 赞同：3
> 
> 时间：2012-06-24T19:17:14.970
> 
> 标签：android, keyboard, android-activity

我创建了一种方法来检查键盘是否在带有editText的活动（选项卡）中使用：搜索字段。每当我离开活动（选项卡）并切换到另一个活动时，我都想关闭键盘。因此我调用 onStop() 中的方法。但是什么也没发生，为什么这不起作用，任何对 onStop() 如何在 Android 中工作有更多见解的人？我怎样才能让它工作？/非常感谢！

```
@Override
protected void onStop()
{
    super.onStop();
    this.hideKeyboard();  <----------------------
    if(this.data != null)
    {
        this.data.destroy();
    }
}

private void hideKeyboard()
{
    if (this.searchField != null)
    {
        InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(this.searchField.getWindowToken(), 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:53:18.640

您可能应该这样做，`onPause()`而不是因为`onDestroy()`通常切换到新的 Activity 不会完成当前的，除非您明确地这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:35:01.560

*来自评论*

`onStop()`切换选项卡时不会调用。改为使用`onPause()`。

# html - 响应式网页设计的问题

> ID：11180470
> 
> 赞同：-1
> 
> 时间：2012-06-24T19:17:19.213
> 
> 标签：html, css, responsive-design

我正在编写新网站的代码，但在满足所有设计和 SEO 要求时遇到了一些麻烦。全屏网站的最大宽度为 950 像素，顶部和底部具有页面的全宽，中间区域的左侧部分宽度为 200 像素，内容区域具有动态宽度 - 当网站以小尺寸显示时屏幕顶部和底部将保持顶部和底部，但左侧将移动到内容下方。对 SEO 的要求是，代码中的内容应该放在左侧部分之上，并且没有用于修复设计问题的 javascript。

我的大问题是放置左侧部分，因为如果我使用绝对位置，底部将不会是页面的底部 - 当屏幕小于 950 像素但大于 320 像素时，我会在更改左侧位置时使用浮动给我带来麻烦。

谁能给我一个关于这些要求的例子？

编辑：

一个绝对位置的简单例子；

```
<!doctype html>
<html>
<head>
  <title>TEST</title>
</head>
<body>
  <div style="max-width: 750px; background-color: Red;">TOP</div>
  <div style="max-width: 750px; position: relative;">
    <div style="margin-left: 200px; background-color: Green;">CONTENT</div>
    <div style="width: 200px; position: absolute; top: 0; background-color: Silver;">LEFT<br>LEFT<br>LEFT<br>LEFT</div>
  </div>
  <div style="max-width: 750px; background-color: Blue;">BOTTOM</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:47:24.793

只需使用“浮动：对；” — [http://jsfiddle.net/ZeFf4/](http://jsfiddle.net/ZeFf4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:18:42.247

关闭 - 不使用 JavaScript 似乎是不可能的。

# css - 用css固定左列

> ID：11180473
> 
> 赞同：0
> 
> 时间：2012-06-24T19:17:24.387
> 
> 标签：css, html, css-position

我一直在尝试获得一个带有固定标题的布局（工作正常），并且左列也固定为可滚动内容。

我有以下div的布局：

```
 <header>
    <div class="header_content">
        <div class="search_box_area">
            <div class="input_box">
                <input name="search_input" type="text" class="main_input_search" maxlength="75" />
            </div>
            <div class="input_box_glass"></div>
        </div>
        <div class="advanced_search">advance search</div>
        <div class="icons_container">
            <div class="header_icon icon_1"></div>
            <div class="header_icon icon_2"></div>
            <div class="header_icon icon_3"></div>
        </div>
    </div>
</header>
<div class="content">
    <div class="left_column">
        <div class="left_column_menu">
            <div class="left_menu profile_left_menu"></div>
            <div class="left_menu multi_left_menu"></div>
            <div class="left_menu calendar_left_menu"></div>
            <div class="left_menu app_left_menu"></div>
            <div class="left_menu contact_left_menu"></div>
            <div class="left_menu noticias_left_menu"></div>
        </div>
        <div class="left_column_degraded"></div>
    </div>
    <div class="space_1"></div>
    <div class="main_user_content">
        -------- Here goes the scrollable content --------
    </div>
</div> 
```

left_column 有一组垂直显示的图标，即使内容滚动也应该始终可见。

每个 div 的 CSS 是下一个：

```
header {
    width:100%;
    min-width:980px;
    position:fixed;
    top:0;
    height:43px !important;
    background-image:url(/images/header/header_background.png);
    background-position:center top;
    background-repeat:no-repeat;
    z-index:999;
}
.header_content {
    width:980px;
    height:43px;
}
.content {
    position:relative;
    top:-6px;
    width:980px;
    padding:43px 0 0 0;
    margin:0 auto 0 auto;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}
.space_1 {
    width:18px;
    height:100%;
}
.main_user_content {
    min-width:520px;
    margin-left:70px;
    margin-right:380px;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
}
.left_column {
    top:0px;
    left:0;
    bottom:0px;
    width:52px;
    height:100%;
    position:absolute;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    -o-box-sizing:border-box;
    -ms-box-sizing:border-box;
    box-sizing:border-box;
    background-color:#F5F5F5;
}
.left_column_menu {
    width:52px;
    background-color:#F5F5F5;
    height:100%;
}
.left_column_degraded {
    position:absolute;
    top:0px;
    left:-110px;
    width:110px;
    height:100%;
    background: #ffffff; /* Old browsers */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZGVkZWQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(left,  #ffffff 0%, #ededed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#ffffff), color-stop(100%,#ededed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #ffffff 0%,#ededed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #ffffff 0%,#ededed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #ffffff 0%,#ededed 100%); /* IE10+ */
    background: linear-gradient(left,  #ffffff 0%,#ededed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=1 ); /* IE6-8 */
}
.left_menu {
    width:32px;
    height:32px;
    margin-bottom:13px;
} 
```

问题是“ **left_column** ”也滚动，这不是想要的效果。我的代码中缺少什么？

一件事是所有内容（包括标题）即使水平调整大小也是居中的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:19:57.590

你只需要改变你的 .left_menu 规则位置：

```
position:fixed; 
```

根据您要执行的操作，您最好在所有内容周围创建一个 980px 宽度和边距设置为 0 auto 的包装器，然后不要强制修复标题和左侧边栏，只需在内容上设置一个高度和使其溢出隐藏和可滚动

# ruby-on-rails - ActionController::RoutingError (No route matches [GET] "/") with ALL pages

> ID：11180476
> 
> 赞同：1
> 
> 时间：2012-06-24T19:18:15.067
> 
> 标签：ruby-on-rails

在使用 Capistrano 部署后，我得到`ActionController::RoutingError (No route matches [GET] "/")`了 production.log 中的所有页面（请参阅 404 页面）。而且我可以通过 rake 路线查看所有路线 - 它们都很好！我现在该怎么办？？？

生产日志：

```
Started GET "/" for 79.143.104.251 at 2012-06-24 23:53:06 +0400

ActionController::RoutingError (No route matches [GET] "/"):
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
unicorn (4.3.1) lib/unicorn/http_server.rb:531:in `process_client'
unicorn (4.3.1) lib/unicorn/http_server.rb:606:in `worker_loop'
unicorn (4.3.1) lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
unicorn (4.3.1) lib/unicorn/http_server.rb:498:in `maintain_worker_count'
unicorn (4.3.1) lib/unicorn/http_server.rb:272:in `join'
unicorn (4.3.1) bin/unicorn:121:in `<top (required)>'
/home/centervakansiy/apps/centervakansiy/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
/home/centervakansiy/apps/centervakansiy/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:44:08.420

问题是您可能对路由器或型号进行了更改，*但没有重新启动*。为了查看这些更改，您必须重新启动服务器。

# jquery - jquery 自动完成返回值

> ID：11180484
> 
> 赞同：0
> 
> 时间：2012-06-24T19:18:57.670
> 
> 标签：jquery, asp.net-mvc-3, entity-framework

我在视图上使用了几个 jQuery 自动完成功能来检索 CustomerName 和 CustomerID。

```
$(document).ready(function () {
    $('#CustomerByName').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Cases/FindByName",
                type: "GET",
                dataType: "json",
                data: {
                    searchText: request.term,
                    maxResults: 10
                },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.CustomerName,
                            value: item.CustomerName,
                            id: item.CustomerID
                        }
                    }));
                }
            });
        },
        minLength: 1,
        select: function (event, ui) {
            $('#CustomerID').val(ui.item.id);
        },
    });
}); 
```

成功响应给了我标签、值、id。有没有办法访问 json 数据中返回的其他字段？在这种情况下，整个表将作为 json 返回。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:48:20.710

修改成功函数以包含您要在选择中使用的任何额外字段，例如

```
success: function (data) {
              response($.map(data, function (item) {
                  return {
                      label: item.CustomerName,
                      value: item.CustomerName,
                      id: item.CustomerID,
                      // extra fields go here
                      address: item.CustomerAddress
                  }
              }));
          } 
```

然后你可以像这样在 select 函数中访问它们：

```
select: function (event, ui) {
    $('#CustomerID').val(ui.item.id);
    alert('CustomerAddress is ' + ui.item.address);
}, 
```

# c++ - C/C++ 中奇怪的数组到指针的转换

> ID：11180487
> 
> 赞同：2
> 
> 时间：2012-06-24T19:19:10.967
> 
> 标签：c++, c

看看函数**f**中奇怪的一行：

```
typedef char thing[1];

void f(thing t){
    thing *p;

    /* Strange line. Changing t to  &t is wrong. 
       C++ require a (thing *) cast.
     */
    p = t;

    *(*p) = 'C';
}

int main(int argc, char* argv[])
{
    thing g;
    thing *h;

    /* Works as expected. */
    h = &g;  

    g[0] = 'A';
    *(*h) = 'B';
    f(g);

    /* g[0] is now  'C' */

    return 0;
} 
```

**将f**更改为

```
void f(thing t){
    char **p; 
    p = &t; /* note the & */
    *(*p) = 'C';
} 
```

也有效。

我期待**`p=&t`**的是正确的指示，而不是**`p=t`**。毕竟**`t`**是 a**`thing`**并且**`&t`**必须是 a **`thing*`**。

那条奇怪的线发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:22:49.417

将数组作为参数传递时，它会衰减为指针。所以`f`实际上得到了一个`char *`.
然后您尝试取消引用它两次 - 您将其视为指向另一个指针的指针，该指针指向`char`. 不管你怎么做，这都行不通。
如果您不强制转换，C++（和 C，如果您启用警告）会告诉您有问题。如果您进行强制转换，您实际上是在告诉编译器忽略该错误。但这仍然是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:29:59.577

不，`t`不是`thing`。

作为形式参数，数组类型（但不是对数组的引用）衰减为指向第一个元素的指针，而函数类型衰减为指向函数的指针。

因此，在函数中，您不是获取数组的地址，而是获取指针变量的地址，这会产生指向指针的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:35:33.243

只是一个替代解决方案：

您可以通过引用传递数组来防止数组到指针的衰减。这应该可以按您的意愿工作：

```
void f(thing& t){
    thing *p;

    p=&t;

    *(*p)='C';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T19:47:28.770

让我们逐行逐句理解，希望您不理解的任何内容都变得清晰：

```
void f(thing t){ 
```

在这里，您没有通过引用传递数组，因此它衰减为指向数组第一个元素的指针（`t`is a `char *`）。

```
thing *p; 
```

这里，`p`是一个指向 1 个字符的数组的指针，所以`char (*p) [1]`.

```
p=t; 
```

现在您正试图将指向字符的指针分配给指向数组的指针。类型根本不匹配（我得到类似的东西`invalid conversion from char * to char (*)[1]`）。

```
*(*p)='C'; 
```

这只是简单地取消引用`p`以获取实际的数组，然后将其衰减为指向要取消引用的第一个元素的指针，从而有效地为您提供第一个元素。

* * *

主要：

```
thing g;
thing *h 
```

现在您无需处理将其传递给函数的问题。`g`是一个`char [1]`并且`h`是一个`char (*)[1]`。

```
h=&g; 
```

`h`是指向数组的指针，`g`是数组。这很有意义。

```
g[0]='A'; 
```

`g`是一个数组；这很正常。

```
*(*h)='B'; 
```

在这里，您正在做与 中相同的事情`f()`。

* * *

在修改后的函数
中：首先记住`t`是一个指向第一个元素的指针（`char *`）

```
char * *p; 
```

`p`是指向 的指针`char *`。

```
p=&t; /* note the & */ 
```

您将 a 的地址分配给`char *`指向 的指针`char *`。完全正常。

```
*(*p)='C'; 
```

`*p`取消引用`p`以获取`char *`( `t`)。另一个取消引用为您提供了 所指向的内容`t`，它是数组的第一个元素。

我希望这能消除任何困惑。

# jquery - JQuery.load() 或 $this->load->view() - 在 codeigniter 中刷新 div

> ID：11180496
> 
> 赞同：1
> 
> 时间：2012-06-24T19:20:35.343
> 
> 标签：jquery, ajax, codeigniter

我在页面上加载的 div 中有一些视图。

我有类似的东西：

```
<div id=header>
...
...
</div>

<div id=content>
...
...
...
<a href="#" class="ref"> refresh extra div </a>

<div id=extra>
<?php $this->load->view('extra.php'); ?>
</div>
....
...
...
</div>

<div id=footer>
...
...
</div> 
```

现在我想在某些操作后刷新我的#extra div，例如单击“刷新额外 div”链接。

```
I was trying to use jquery in a way:
$(".ref").click(function() {    
$('#extra').load(<?php $this->load->view('extra.php'); ?>);
}); 
```

但它不起作用 - 怎么做？如何使用加载到其中的视图动态刷新 div？

谢谢！

**@@更新**

我有很长的 extra.php 视图文件，并且 jquery.html() 仅在所有文件都在一行中（不可读）时才获取它，这是一种使 jquery.html() 以它的形式获取整个文件的方法吗？

它加载：

```
<table><tr></tr><tr></tr><tr></tr></table> 
```

但它不加载这个：

```
<table>
<tr>....</tr>
<tr>....</tr>
<tr>....</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:28:20.147

你只需要试试这个

```
$('#extra').load('extra.php'); 
```

代替`$('#extra').html("<?php $this->load->view('extra.php'); ?>");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T23:42:26.230

以及如何将“true”作为第二个参数传递以返回视图标记？

```
$('#extra').html("<?php $this->load->view('extra.php', TRUE); ?>"); 
```

# javascript - 如何处理 IE10 触摸事件？

> ID：11180497
> 
> 赞同：3
> 
> 时间：2012-06-24T19:20:36.343
> 
> 标签：javascript, touch, windows-8

我知道如何使用 obtouchstart ontouchmove 等事件。但是 IE10 以不同的方式支持它。有没有关于它的教程？

没有触摸屏win8怎么测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:35:03.340

这是一个关于指针事件的教程，它似乎规范了所有类型的指针（触摸、笔、鼠标）

[http://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx](http://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx)

# php - 根据以前的销售数据定义项目的市场需求

> ID：11180502
> 
> 赞同：0
> 
> 时间：2012-06-24T19:21:37.950
> 
> 标签：php, probability

我正在开发一个应用程序，该应用程序有一个模块，该模块需要根据一组以前的销售排名数据来定义一个项目在亚马逊上上市的可能性有多大。如果您不熟悉亚马逊销售排名，它本质上是为亚马逊上所有商品定义的一个数字，用于将该商品当前看到的与该类别中的所有其他商品相关的先前销售额排名。这是一个专有数字，但它本质上意味着销量排名第一的产品目前在 Amazon.com 上销售的副本最多，而 1,000,000 的销量排名意味着还有 999,999 件其他商品的销量更高。

我有一个数据集，其中包含之前几个月的销售排名；每天一个这样：

```
$previousranks = array(
    array('1/4/2010',567),
    array('1/5/2010',674),
    array('1/6/2010',505),
    array('1/6/2010',343),
    array('1/6/2010',578),
    array('1/6/2010',789),
    array('1/6/2010',1012),
); 
```

我还可以比较当前的销售排名。我想知道这个项目是否在需求图的“低谷”中。如果您将这些排名绘制在 XY 轴上，日期为 X 轴，销售排名为 Y 轴，我指的是“低谷”。如果这有意义的话，我需要这个函数来决定它是否在它的过去历史中的低销售排名中。

编辑：例如，从上面的数组中，我需要知道当前的销售排名是否介于 505 和 578 之间。那将是“低谷”。我不太明白的是如何定义“低谷”，因为范围不会一直相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:43:27.760

我希望，我理解你的问题。您想确定，该项目是否曾经有比当前更高的销售排名（= 更低的销售额）？

您可以按销售排名的降序对数组进行排序。然后将第一个数组条目（具有最高销售排名）与您当前的销售排名进行比较。

要对多维数组进行排序（在本例中，按过去的销售排名降序排列），请使用[usort](http://www.php.net/manual/en/function.usort.php)，您可以在其中定义自己的比较函数：

```
function mySort($a, $b) 
{
    return $b[1] - $a[1];
}

usort($previousranks, 'mySort');
if($currentrank > $previousranks[0][1])
    // current sales rank highest, do something 
```

# android - 小部件未出现

> ID：11180505
> 
> 赞同：0
> 
> 时间：2012-06-24T19:22:04.447
> 
> 标签：android, widget, android-3.0-honeycomb

我正在尝试制作一个小部件，但是当我安装我的应用程序时，它没有出现在小部件列表中，我认为这意味着我的清单文件有问题。已经为 1.5-2.2 尝试了几个不同的示例，re-honeycomb 和 post-honeycomb Widgets 的工作方式有什么不同吗？

无论如何，这是我清单的小部件部分

```
 <!-- Broadcast Receiver that will process AppWidget updates -->
    <receiver android:name=".ButtonWidget" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

        <!-- Broadcast Receiver that will also process our self created action -->
        <action android:name="com.dotpubs.counterpro.ButtonWidget.ACTION_WIDGET_RECEIVER"/>
    </intent-filter>
    <meta-data android:name="android.appwidget.provider" android:resource="@xml/button_widget_provider" />
    </receiver>

    <!-- this activity will be called, when we fire our self created ACTION_WIDGET_CONFIGURE -->
    <activity android:name=".ClickOneActivity">
        <intent-filter>
            <action android:name="com.dotpubs.counterpro.ACTION_WIDGET_CONFIGURE"/>
        </intent-filter>
    </activity>

    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:24:51.100

您是否有机会运行 Android 4.0.3？

该版本存在一个已知问题。见[问题 24208](http://code.google.com/p/android/issues/detail?id=24208)

# c - fgets 读取的最大大小

> ID：11180509
> 
> 赞同：2
> 
> 时间：2012-06-24T19:22:39.577
> 
> 标签：c, string, fgets

用于`fgets`输入字符串，我对读取的字符串长度有疑问。

例如，考虑以下程序。

```
char str[50];
int i;
int len;
printf("Enter name:\n");
fgets(str,11,stdin);
len = strlen(str);
printf("len :  %d\n",len); 
```

1.  如果我输入`123456789`，`strlen`给出 10。

2.  如果我输入`1234567890`，`strlen`给定的又是 10 ??

我认为`strlen`正在考虑换行符也用于字符串长度。我对么？（我理解`fgets`使用换行符作为字符串的一部分）

(2) 我正好输入 10 个字符有什么问题，这里的字符串长度应该是 11 对吗？10 + 1（换行）= 11

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:25:37.857

`fgets`读取的字符最多比给定的长度参数少 1 个字符，并且**确实**保留换行符作为输入的一部分 - 只要换行符是第一个 (length - 1) 个字符的一部分。

所以在你的第一种情况下，假设`123456789`后面跟着一个换行符，`fgets`已经读取了 9 个字符，包括换行符，产生的字符串长度为 10；在您的第二种情况下，`fgets`将在读取 10 个字符后停止`1234567890`，产生一个长度为 10 的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:42:49.717

这是一个例子：

```
#include <stdio.h>
#include <string.h>

#define MAX_DIGITS 5

int
main ()
{
  char buf[80];
  char *s = NULL;
  printf ("\n>>Enter string, %d digits or less: ", MAX_DIGITS);
  s = fgets (buf, MAX_DIGITS+1, stdin);
  printf ("strlen(buf)=%d, buf=%s, strlen(s)=%d, s=%s\n",
    strlen(buf), buf, strlen(s), s);
  return 0;
} 
```

示例输出，带有“MAX_DIGITS”和“MAX_DIGITS + 1”：

```
>>Enter string, 5 digits or less: 1
strlen(buf)=2, buf=1
, strlen(s)=2, s=1
.

>>Enter string, 5 digits or less: 12
strlen(buf)=3, buf=12
, strlen(s)=3, s=12
.

>>Enter string, 5 digits or less: 123
strlen(buf)=4, buf=123
, strlen(s)=4, s=123
.

>>Enter string, 5 digits or less: 1234
strlen(buf)=5, buf=1234
, strlen(s)=5, s=1234
.

>>Enter string, 5 digits or less: 12345
strlen(buf)=5, buf=12345, strlen(s)=5, s=12345.

>>Enter string, 5 digits or less: 123456
strlen(buf)=5, buf=12345, strlen(s)=5, s=12345. 
```

你会注意到：

1.  只要#/digits < MAX_DIGITS，返回缓冲区就会保留“\n”。

2.  当 #/digits >= MAX_DIGITS 时，“\n”被删除。

3.  您的缓冲区必须容纳 MAX_DIGITS+1

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-12T17:50:05.783

实际上`fgets`需要一个`size`规范（在您的情况下`11`）说明`\0`字符串末尾的 。从`fgets`手册页：

> **fgets()** 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。终止的空字节 ('\0') 存储在缓冲区中的最后一个字符之后。

所以我们知道`\n`，当你进入时，阅读就停止了`123456789\n`。但是，当您输入时`1234567890\n`，会`fgets()`处理输入，但它只需要 10 个字符，之后会忽略其他所有内容。

您的字符串和您的字符串的任何额外输入都将`size-1`使用`fget()`最后一个字符，`\0`因此输出保持不变。

# informix - Informix - 涉及单表的死锁场景

> ID：11180512
> 
> 赞同：1
> 
> 时间：2012-06-24T19:23:27.420
> 
> 标签：informix, database-deadlocks

我正在寻找一种方法来强制 Informix IDS 11.50 出现死锁。解决方案必须满足以下条件：

*   只涉及一张桌子，
*   隔离等级：`COMMITTED READ`,
*   `ROW`水平锁定，
*   两个线程，但只有一个线程可以访问另一个线程修改的行。

我想出了满足除最后一个条件之外的所有条件的解决方案：

表`t1`的创建和填充如下：

```
CREATE TABLE t1
(
    id SERIAL PRIMARY KEY,
    name CHAR(20)
)
LOCK MODE ROW;

CREATE INDEX idx_name on t1 (name);
INSERT INTO t1 (name) VALUES ('A');
INSERT INTO t1 (name) VALUES ('B'); 
```

在 2 个单独的 dbaccess 控制台（锁定模式设置为等待 15 秒）上，我执行以下命令：

```
dbaccess #1: BEGIN;
dbaccess #1: UPDATE t1 SET name = name WHERE name = 'A';
dbaccess #2: BEGIN;
dbaccess #2: UPDATE t1 SET name = name WHERE name = 'B';
dbaccess #1: SELECT * FROM t1;
dbaccess #2: SELECT * FROM t1; -- 143: ISAM error: deadlock detected 
```

这些线程是死锁的，因为 SELECT 正在等待其他线程提交。这个解决方案不好，因为两个线程都选择了另一个线程更新的行，这违反了第四个条件。任何人都可以想出一种方法来改进此解决方案或提供满足所有标准的其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:51:05.873

第四个条件否定了死锁的可能性。

当两个线程都在等待对方释放资源（同时持有对方想要的资源）时，就会发生死锁，但您的第四个条件排除了这种可能性。

# android - 在动态文本字段中显示数组中的货币格式数字 (Flash AS)

> ID：11180513
> 
> 赞同：0
> 
> 时间：2012-06-24T19:23:43.843
> 
> 标签：android, actionscript-3, air, flash-cs5

我正在开发一个 AIR 或 Android 应用程序，该应用程序从 CSV 文件加载数据并在动态文本框中显示该数据。

CSV 文件中的某些字段是数字，我无法将它们设置为货币格式并显示在动态文本字段中。

```
import flash.events.MouseEvent;
import flash.text.*;
import flashx.textLayout.formats.Float;

function internationalFormat(number:Number):String {
    return String(number).replace(".", ",").replace(String(number).indexOf(".") > -1 ?/(?<=\d)(?=(\d\d\d)+(?!\d)(?:\,\d*))/g : /(?<=\d)(?=(\d\d\d)+(?!\d))/g, ".").replace(/\.{2,}/g, ".");
}

var toFixed:Function = function(number, factor) {
    return (Math.round(number * factor)/factor);
}

var tf1:TextFormat = new TextFormat();
tf1.font ="Arial Rounded MT Bold";
tf1.size = 20;
tf1.align = "left";

var img1Requestf:URLRequest = new URLRequest("http://www.maineventjamaica.com/digicelpad/photo.png");
var img1Loaderf:Loader = new Loader();
img1Loaderf.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
img1Loaderf.load(img1Requestf);
_1.addChild(img1Loaderf);
stop();
//CSV PATH
var myRequest1:URLRequest = new URLRequest("http://www.maineventjamaica.com/digicelpad/table_database_final.csv");

//Load ARRAY
var loadedData1:Array = [];
//loader variable
var myLoader1 = new URLLoader();

myLoader1.addEventListener(Event.COMPLETE, onload1);

myLoader1.load(myRequest1);

function onload1(Event):void

{

//Now, lets put each row into its own array. To do that, we split the data by /\r\n|\n|\r/, which is a RegExp pattern that works with CSV files that can be created on all platforms (Windows puts \r\n between variables, Mac puts \r and Linux puts \n).
loadedData1 = myLoader1.data.split(/\r\n|\n|\r/);

for (var i:int=0; i<loadedData1.length; i++){
loadedData1[i] = loadedData1[i].split(",");
//Number(loadedData1[i].attributes.time.toString())
}

//var sprice:Number = loadedData1[1][5];

//var test:Number = loadedData1[1][5];

//Testing datatype convertion
//var myInt:int = parseInt(loadedData1[1][5]);
//var myFloat:Number = parseFloat(loadedData1[1][5]);
var number:Number = Number(loadedData1[1][5]);

trace(internationalFormat(number));
//-trace(loadedData1[1][5]);

myTXTh0.text = Number("$" + trace(internationalFormat(number)));
trace(myTXTh0.text);
myTXTh1.text = String("$" + loadedData1[1][3]);
myTXTh2.text = String(loadedData1[1][6]);
//myTXTh3.text = String(loadedData1[1][8]);
//myTXTh4.text = String(loadedData1[1][7]);
myTXTh5.text = String(loadedData1[1][4]);

myTXTh0.defaultTextFormat = tf1;
myTXTh1.defaultTextFormat = tf1;
myTXTh2.defaultTextFormat = tf1;
//myTXTh3.defaultTextFormat = tf1;
//myTXTh4.defaultTextFormat = tf1;
myTXTh5.defaultTextFormat = tf1;
//myTXTh5s.defaultTextFormat = tf1;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:42:50.403

flash.globalization.CurrencyFormatter

[CurrencyFormatter.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/globalization/CurrencyFormatter.html)

# xampp - Fedora Xampp 问题

> ID：11180516
> 
> 赞同：1
> 
> 时间：2012-06-24T19:23:52.073
> 
> 标签：xampp, fedora

我最近刚刚在我的新上网本上安装了 Fedora，并正在寻找一种在其上运行 Web 开发服务器的方法。我很容易安装并运行它，但是当我去使用它时，我发现我没有足够的权利将内容放在那里。从那以后，我尝试使用 sudo vi 更改文档根目录。然后，当我使用浏览器连接到 localhost 时，它说文件的权限被拒绝。所以然后我使用 GUI 来允许“其他”组完全访问它可以完美地工作。直到我重新启动，在这种情况下，我无法再登录，而不会出现出现问题的屏幕。如果有人遇到同样的问题或知道如何解决它，我们将不胜感激

# php - 犹太日期表示编码问题

> ID：11180517
> 
> 赞同：0
> 
> 时间：2012-06-24T19:23:52.237
> 
> 标签：php, date

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我正在尝试将当前日期转换为当前的犹太日期。为了做到这一点，我找到[了这个](http://php.net/manual/en/function.jdtojewish.php)php 函数。但是，当我将代码打印到屏幕上时，我只会在屏幕上看到奇怪的字符。经过更多调查后，我发现这只发生在我遍历一组日期时。

为了显示：

## 代码示例 1

我的代码：

```
$aJulianFormat = array('month'=>date('m'), 'day'=>date('d'), 'year' => date('Y'));
$jewishDate = jdtojewish(
               gregoriantojd($aJulianFormat['month'], 
                             $aJulianFormat['day'],
                             $aJulianFormat['year']),
                             true,
                             CAL_JEWISH_ADD_GERESHAYIM + 
                             CAL_JEWISH_ADD_ALAFIM + 
                             CAL_JEWISH_ADD_ALAFIM_GERESH
              );
echo('jdtojewish' . ' : ' . $jewishDate . '<br>');
echo('iconv' . ' : ' . iconv('ISO-8859-8', 'UTF-8', $jewishDate) . '<br>'); 
```

**输出：**

jdtojewish : �' ���� �' ��������"�</p>

iconv : ד' תמוז ה' אלפים תשע"ב <----- 这是所需的输出，很好。

## 代码示例 2

```
 $aDates = $this->createDateRangeArray('2012-09-01', '2013-09-01');
    foreach ($aDates as $aDate) {

        $aJulianFormat = $this->splitDate($aDate);
        //         $aJulianFormat = array('month'=>date('m'), 'day'=>date('d'), 'year' => date('Y'));
        $jewishDate = jdtojewish(
                gregoriantojd($aJulianFormat['month'], 
                        $aJulianFormat['day'], 
                        $aJulianFormat['year']), 
                        true, 
                        CAL_JEWISH_ADD_GERESHAYIM +
                        CAL_JEWISH_ADD_ALAFIM +
                        CAL_JEWISH_ADD_ALAFIM_GERESH
        );
        echo('jdtojewish' . ' : ' . $jewishDate . '<br>');
        echo('iconv' . ' : ' . iconv('ISO-8859-8', 'UTF-8', $jewishDate) . '<br>');

    } 
```

**输出**

> jdtojewish : é"ã àìåì ä' àìôéí úùò"á iconv : ×™"×“ ××œ×•×œ ×”'
> 
> ××œ×¤×™× ×ª×©×¢"×' jdtojewish : è"å àìåì ä' àìôéí úùò"á iconv :
> 
> ×∼"×• ××œ×•×œ ×"' ××œ×¤×™× ×ª×©×¢"×' jdtojewish : è"æ àìåì ä' àìôéí
> 
> úùò"á iconv : ×∼"×– ××œ×•×œ ×"' ××œ×¤×™× ×ª×©×¢"×' jdtojewish : é"æ
> 
> àìåì ä' àìôéí úùò"á iconv : ×™"×– ××œ×•×œ ×"' ××œ×¤×™× ×ª×©×¢"×'</p>
> 
> jdtojewish : é"ç àìåì ä' àìôéí úùò"á iconv : ×™"×— ××œ×•×œ ×”'
> 
> ××œ×¤×™× ×ª×©×¢"×' jdtojewish : é"è àìåì ä' àìôéí úùò"á iconv :
> 
> ×™"×～ ××œ×•×œ ×”' ××œ×¤×™× ×ª×©×¢"×' jdtojewish : ë' àìåì ä' àìôéí
> 
> úùò"á iconv : ×›' ××œ×•×œ ×"' ××œ×¤×™× ×ª×©×¢"×' jdtojewish : ë"à
> 
> àìåì ä' àìôéí úùò"á iconv : ×›"× ××œ×•×œ ×”' ××œ×¤×™× ×ª×©×¢"×'</p>
> 
> jdtojewish : ë"á àìåì ä' àìôéí úùò"á iconv : ×›"×' ××œ×•×œ ×”'
> 
> ××œ×¤×™× ×ª×©×¢"×' jdtojewish : ë"â àìåì ä' àìôéí úùò"á
> 
> ETC....

这都是错误的/不是所需的输出。

编码似乎出了点问题。

对于那些有兴趣的人，我在这里发布了我的完整代码：[http](http://pastebin.com/kc2LHPrg) ://pastebin.com/kc2LHPrg ：

```
<?php

namespace Luach\Controller;

use Zend\Mvc\Controller\ActionController,
    Zend\View\Model\ViewModel;

class LuachController extends ActionController {

    public function indexAction() {
        $aDates = $this->createDateRangeArray('2012-09-01', '2013-09-01');
        foreach ($aDates as $aDate) {

            $aJulianFormat = $this->splitDate($aDate);
            //         $aJulianFormat = array('month'=>date('m'), 'day'=>date('d'), 'year' => date('Y'));
            $jewishDate = jdtojewish(
                    gregoriantojd($aJulianFormat['month'], 
                            $aJulianFormat['day'], 
                            $aJulianFormat['year']), 
                            true, 
                            CAL_JEWISH_ADD_GERESHAYIM +
                            CAL_JEWISH_ADD_ALAFIM +
                            CAL_JEWISH_ADD_ALAFIM_GERESH
            );
            echo('jdtojewish' . ' : ' . $jewishDate . '<br>');
            echo('iconv' . ' : ' . iconv('ISO-8859-8', 'UTF-8', $jewishDate) . '<br>');

        }

    }

    private function createDateRangeArray($strDateFrom, $strDateTo) {
        // takes two dates formatted as YYYY-MM-DD and creates an
        // inclusive array of the dates between the from and to dates.
        // could test validity of dates here but I'm already doing
        // that in the main script

        $aryRange = array();

        $iDateFrom = mktime(1, 0, 0, substr($strDateFrom, 5, 2), substr($strDateFrom, 8, 2), substr($strDateFrom, 0, 4));
        $iDateTo = mktime(1, 0, 0, substr($strDateTo, 5, 2), substr($strDateTo, 8, 2), substr($strDateTo, 0, 4));

        if ($iDateTo >= $iDateFrom) {
            array_push($aryRange, date('Y-m-d', $iDateFrom)); // first entry

            while ($iDateFrom < $iDateTo) {
                $iDateFrom+=86400; // add 24 hours
                array_push($aryRange, date('Y-m-d', $iDateFrom));
            }
        }
        return $aryRange;
    }

    private function splitDate($sDate) {

        return date_parse_from_format("Y-m-d", $sDate);

    }

} 
```

有人知道第二个代码示例出了什么问题吗？

非常感谢。

# actionscript - 请求运行脚本中的程序

> ID：11180519
> 
> 赞同：-1
> 
> 时间：2012-06-24T19:24:25.247
> 
> 标签：actionscript

我想编写一个程序，该程序将使用键盘箭头键运行动画进行导航。请帮忙。此 ActionScript 是编程语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:31:34.287

Flash Pro 中的示例设置：

![Flash Pro 设置](../Images/e763706947377b82aca36a297c44f349.png)

你可以从我的网站下载这个项目：

Flash Pro CS5.5：[http](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.5.fla)
://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.5.fla Flash Pro CS5：[http ://www.jasonsturges.com/labs/stack -overflow/examples/hero/Hero-cs5.fla](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.fla)
SWF：[http ://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero.swf](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero.swf)

```
import flash.ui.Keyboard;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.display.DisplayObject;

// put walls in collection
var walls:Array = [ northWall, southWall, eastWall, westWall ];

// animtion listener
addEventListener(Event.ENTER_FRAME, frameHandler);

// key listeners
stage.addEventListener(KeyboardEvent.KEY_DOWN, keydownHandler);

// keyboard handling
function keydownHandler(event:KeyboardEvent):void
{
    switch (event.keyCode)
    {
        case Keyboard.RIGHT:
            moveWalls(-5, 0);
            break;
        case Keyboard.LEFT:
            moveWalls(5, 0);
            break;
        case Keyboard.UP:
            moveWalls(0, -5);
            break;
        case Keyboard.DOWN:
            moveWalls(0, 5);
            break;
    }
}

// utility to move all walls
function moveWalls(x:Number, y:Number):void
{
    for each (var wall:DisplayObject in walls)
    {
        wall.x += x;
        wall.y += y;
    }
}

// animation handler
function frameHandler(event:Event):void
{
    for each (var wall:DisplayObject in walls)
    {
        if (hero.hitTestObject(wall))
        {
            switch (wall)
            {
                case northWall:
                    moveWalls(0, -5);
                    break;
                case southWall:
                    moveWalls(0, 5);
                    break;
                case westWall:
                    moveWalls(-5, 0);
                    break;
                case eastWall:
                    moveWalls(5, 0);
                    break;
            }
        }
    }
} 
```

# php - 使用 php 在 FILTER_VALIDATE_EMAIL 上“重置连接”

> ID：11180522
> 
> 赞同：1
> 
> 时间：2012-06-24T19:24:41.867
> 
> 标签：php

我在网上找不到任何东西，也不知道为什么：打电话

```
filter_var($address, FILTER_VALIDATE_EMAIL) 
```

导致连接被重置（至少 Firefox 是这样告诉我的）。`5.3.13 with Suhosin-Patch`服务器在 FreeBSD 上有 PHP 版本。在我自己的运行 Debian 和 PHP 版本的服务器上测试这个`5.3.3`也可以使用 Suhosin 工作正常，尽管我似乎记得它之前确实表现出相同的行为。

PHP 手册表明这是在 PHP 5.2.0 上引入的，所以它应该可以工作，不是吗？

编辑：为了更好地展示失败的原因，我向您展示了两个示例，一个带有重置，另一个带有正确的`die("message");`

此示例`Before validate`在浏览器窗口上输出：

```
if (function_exists('filter_var')) { //Introduced in PHP 5.2

    die("Before validate");
  if(filter_var($address, FILTER_VALIDATE_EMAIL) === FALSE) {
    return false;
  } else {
    return true;
  }
} else {
return preg_match('/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!\.)){0,61}[a-zA-Z0-9_-]?\.)+[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!$)){0,61}[a-zA-Z0-9_]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/', $address);
} 
```

该示例导致上述“连接已重置...”：

```
if (function_exists('filter_var')) { //Introduced in PHP 5.2

  if(filter_var($address, FILTER_VALIDATE_EMAIL) === FALSE) {

  die("After validate");
    return false;
  } else {

  die("After validate");
    return true;
  }
} else {
  return preg_match('/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!\.)){0,61}[a-zA-Z0-9_-]?\.)+[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!$)){0,61}[a-zA-Z0-9_]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/', $address);
} 
```

我在这里**没有**得到像“验证后”这样的输出。该地址也是一个非常简单的“no-reply@domain.com”地址，因此它甚至是有效的。

好的另一个编辑：我做了一个只运行这个函数的单行器并在控制台上执行它。这是输出：

```
/libexec/ld-elf.so.1: /usr/local/lib/php/20090626/filter.so: Undefined symbol "php_pcre_exec" 
```

我把它交给了服务器管理员。从我在谷歌上找到的内容来看，一个简单的更新可以解决它，但我将不得不等待他的回答。如果问题解决了，我会在这里注明。在那之前，这将不得不休息，因为我无法修复这样一个系统深度的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:46:08.523

在这个[suhosin](http://rpmfind.net/linux/RPM/opensuse/updates/11.3/x86_64/php5-suhosin-5.3.3-0.17.1.x86_64.html)摘要中，他们讨论了使用该标志时对段错误的修复，这是一个 opensuse 报告，但可能是您的安装容易受到它的影响。您可能需要确保您的 suhosin 补丁至少达到与 opensuse 版本 0.17.1 对应的版本。[问题是我在 suhosin 的官方变更日志](http://rpmfind.net/linux/RPM/opensuse/updates/11.3/x86_64/php5-suhosin-5.3.3-0.17.1.x86_64.html)上找不到任何相关信息。在这种情况下，freebsd 从哪里获得端口源？

> *   2010 年 10 月 26 日星期二 pgajdos@novell.com
>     *   修复“带有大量数据的 FILTER_VALIDATE_EMAIL 的 filter_var 中的段错误”[bnc#649210]
>     *   CVE-2010-3710.patch

# javascript - 文本下方的 CSS 导航栏滑动线

> ID：11180532
> 
> 赞同：1
> 
> 时间：2012-06-24T19:25:58.993
> 
> 标签：javascript, html, css, navigation

鼠标悬停时是否可以在链接之间移动一条线。具有流畅的动画效果。

首页关于博客图片 *_* _-->

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:05:56.787

这里是： http: [//fiddle.jshell.net/KzFQB/25/](http://fiddle.jshell.net/KzFQB/25/) 当然，你需要稍微调整一下，取决于你的div的宽度，等等。但我认为这个想法很简单。

希望能帮助到你！^^

# java - 安排对方法的调用？

> ID：11180534
> 
> 赞同：0
> 
> 时间：2012-06-24T19:26:05.497
> 
> 标签：java, android

> **可能重复：**
> [如何在延迟后调用方法](https://stackoverflow.com/questions/3072173/how-to-call-a-method-after-a-delay)

当用户单击一个按钮时，我想要 doThis(myVar1);。1 秒后我想这样做（myVar2）；。如何安排第二次通话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:28:01.463

创建一个处理程序并`postDelayed()`在一个可运行对象上执行。检查[Handler 的文档](http://developer.android.com/reference/android/os/Handler.html)。

```
Handler handler = new Handler();
final Runnable r = new Runnable()
{
    public void run() 
    {
        doThis(myVar2);.
    }
};
...
...
handler.postDelayed(r, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:33:03.400

使用线程尝试这种方式：

```
 btnbtnstart.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
        if(mthreadRunning==false)
        {
            doThis(myVar1);
            mthreadRunning=true;
            dojobThread();
        }
    }
});

 public void dojobThread(){
        Thread th=new Thread(){
         @Override
         public void run(){
          try
          {
           while(mthreadRunning)
           {
           Thread.sleep(100L);
           mthreadRunning=false;
           doThis(myVar2);//call doThis(myVar2); here after 1 second delay

           }
          }catch (InterruptedException e) {
            // TODO: handle exception
          }
         }
        };
        th.start();
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:37:32.503

在桌面 GUI 应用程序中，我会使用`javax.swing.Timer`Swing API。也许Android API有类似的东西？当然，上面 imran khan 的 Thread 示例本质上是相同的。

# javascript - 是否有关于何时在 Node.js 中使用同步函数的约定？

> ID：11180535
> 
> 赞同：2
> 
> 时间：2012-06-24T19:26:34.210
> 
> 标签：javascript, node.js

我在 Node.js 中制作了一些模块并想知道：“是否有关于何时在 Node.js 中使用 return 语句的约定？”。

据我了解，应该避免使用 return 语句，因为它们会使进程成为阻塞操作，但是是否有关于何时应该使用它们以及何时应该坚持回调的指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:09:23.677

是否“阻塞”取决于您 - 是否需要很多时间？

任何 IO 操作都应该被认为是阻塞的，因为它依赖于脚本之外的东西（这可能需要任何时间）。

如果您自己的脚本要说，循环某个东西几百次（而且您知道这需要不到一秒钟的时间），您可能会认为它阻塞了。

*   如果一个方法是阻塞的，它应该接受一个“回调”参数，并异步调用它。
*   如果一个方法是非阻塞的，它不应该接受一个“回调”参数，并且应该至少有一个“返回”语句。

您的约定应该只是您知道函数是异步的，因为它接受回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:30:40.767

如果这是一个“便宜”的操作，那很好。任何在不执行 CPU 密集型操作的情况下多次执行的操作都可以（并且通常应该）重构为“正常”功能。这可以：

```
function add(x, y) { return x + y; } 
```

这不是：

```
function fib(n) {
    if (n <= 1) return 1;
    // this may take a long time if n is large
    return fib(n - 1) + fib (n - 2);
} 
```

fib 的一种可能实现将采用一个函数将结果作为参数返回，并将计算分散到多个调用中。类似于下面的代码，来自“ [Node Web Development](https://rads.stackoverflow.com/amzn/click/com/184951514X) ”一书：

```
function fib(n, done) {
    if (n <= 1) {
        done(1);
    } else {
        process.nextTick(function() {
            fib(n - 1, function(val1) {
                process.nextTick(function() {
                    fib(n - 2, function(val2) {
                        done(val1 + val2);
                    });
                });
            });
        });
    }
} 
```

线程不会被长时间阻塞的地方。

是的，更好的选择是以迭代方式实现斐波那契，而不是递归方式。但这只是为了演示如何“拆分”一个 CPU 密集型功能。

# database - 连接两个表

> ID：11180537
> 
> 赞同：1
> 
> 时间：2012-06-24T19:26:42.993
> 
> 标签：database, database-design, relational-database

我正在为出租车/出租车服务设计一个数据库。有一张出租车服务详情表。

*出租车服务*

```
+---------------------+
|  SID  |     Name    |
|---------------------|
|  S001 |   ABC Taxi  |
|  S002 |   XYZ Cabs  |
|  S003 |   MN Taxi   |
|  S004 |   OP Cabs   |
|_______|_____________| 
```

还有另一个位置表。

*地点*

```
+-----------------------------------+
|  LID  |  Code  |     Location     |
|----------------|------------------|
|  L001 |   CO   |   Akarawita      |
|  L002 |   CO   |   Angamuwa       |
|  L003 |   CO   |   Batawala       |
|  L004 |   CO   |   Avissawella    |
|  L005 |   CO   |   Battaramulla   |
|  L006 |   GQ   |   Ambepussa      |
|  L007 |   GQ   |   Bemmulla       |
|  L008 |   GQ   |   Biyagama       |
|  L008 |   GQ   |   Alawala        |
|  L010 |   GQ   |   Andiambalama   |
|  L011 |   GQ   |   Biyagama IPZ   |
|  L012 |   KT   |   Bellana        |
|  L013 |   KT   |   Bolossagama    |
|  L014 |   KT   |   Bombuwala      |
|  L015 |   KT   |   Alutgama       |
|  L016 |   KT   |   Alubomulla     |
|_______|________|__________________| 
```

请注意，它们是按地区分类的。（**CO**，**GQ**，**KT**）每个区都有多个城镇/城市。

出租车服务可能会在多个地区提供服务。一个区可能有多个出租车服务。它是一种多对多的场景。

我正在尝试将 cab_services 表与位置表连接起来。但我不知道该怎么做。如果该地区只有一项服务，我会做这样的事情。

```
+-------+-------------+---------+
|  SID  |     Name    |  Locs   |
|-------+-------------+---------|
|  S001 |   ABC Taxi  |   CO    |
|_______|_____________|_________| 
```

但是就像我之前说的，一个服务可以有很多区。

```
+-------+-------------+---------+
|  SID  |     Name    |  Locs   |
|-------+-------------+---------|
|  S001 |   ABC Taxi  |  CO, KT |
|_______|_____________|_________| 
```

这将违反 1NF。

我希望能够在这样的情况下获得结果，例如，如果用户使用位置名称进行搜索，他应该获得该区域的出租车服务。

我必须在我的数据库、表结构中进行哪些更改才能完成此操作？

如果某些部分令人困惑，请告诉我，我会尽力进一步澄清。我很不擅长解释事情。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:29:50.133

您将在连接表上有多个条目。

```
SID   Name         Locs
-----------------------
S001  ABC Taxi     CO
S001  ABC Taxi     KT 
```

这仍然在 1NF 中，尽管您通过在表中具有`SID`和来复制数据。`Name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:45:43.100

似乎您的连接表只需要为 cab_services 表和位置表定义 FK 列（即，请注意 Oded 关于重复的陈述）。例如，如果“ABC Taxi”在所有“CO”位置都可用，则连接表将具有以下记录：

```
 SID | LID
-----------
S001 | L001
S001 | L002
S001 | L003
S001 | L004
S001 | L005 
```

# java - 在java中打印出多个对象的属性

> ID：11180544
> 
> 赞同：1
> 
> 时间：2012-06-24T19:27:59.910
> 
> 标签：java, arrays, loops, tostring

我创建了一个人员类，具有年龄和姓名属性。我还在一个对象数组中创建了 5 个该类的实例，并且想用一个 for 循环打印出属性。我的理解是，`toString`当您尝试打印出一个对象时，它会被显式调用，所以我重写了它，以便`toString`在调用它时打印出对象的两个属性。

这是我的代码：

```
class Person
{
    int age;
    String name;

    public Person(String name, int age)
    {
        this.age = age;
        this.name = name;
    }

    public String toString(Person p)
    {
        return "Name: " + p.name +"Age: "+ p.age;
    }
}

public class P1Q5Bubble {

public static void main(String[] args) {

        Person [] pp = new Person [5];

        pp[0] = new Person("Andy" , 18);
        pp[1] = new Person("Lisa" , 20);
        pp[2] = new Person("Bob" , 10);
        pp[3] = new Person("Eva" , 18);
        pp[4] = new Person("Tim" , 13);       

        for(int i = 0; i> pp.length ; i++)
            System.out.println(pp[i]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:35:24.947

你需要改变两件事

1) 在`i > pp.length`为`i < pp.length`

2）`toString()`方法中使用`System.out.print`或`System.out.println`没有参数，因此将其更改为类似

```
public String toString() {
    return "Name: " + name + "Age: " + age;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T19:31:42.130

您的`for`循环终止条件不正确，您需要`i < pp.length`.

使用`i > pp.length`您的循环将不执行任何语句。循环只会在终止条件为 时执行`true`。

此外，您没有`toString`正确覆盖：您的`toString`方法不应接受任何参数：您的实例变量`name`将`age`可用于函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:44:58.150

您需要在 Person 类中覆盖的 toString() 函数不应包含任何参数（因为定义它的 Object 类不包含参数）。该功能的更正代码将是

```
@Override public String toString()
{
   return return "Name: " + name +"Age: "+ age;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T19:34:49.430

您应该覆盖默认 toString() （不带参数），而不是添加一个新方法。因此，删除该论点并使用“this”代替人论点

# haskell - Data.Map 实现中的错误？

> ID：11180546
> 
> 赞同：16
> 
> 时间：2012-06-24T19:28:10.603
> 
> 标签：haskell, containers, monadfix, tying-the-knot

我偶然发现了一些我*猜*是 中的错误`Data.Map`，但这也很可能是我的 Haskell 知识中的错误。希望有人能澄清它是什么:)

请参考[这个要点](https://gist.github.com/2984512)。我正在将循环链表结构序列化为字节流。对于任何给定的节点，形式为：

```
data Node = Node
  { val  :: Word8
  , next :: Node
  } 
```

我希望它被序列化为一对字节：第一个字节表示`val`，第二个字节表示字节流中`next`可以定位的偏移量。例如，我期望：

```
let n0 = Node 0 n1
    n1 = Node 1 n0 
```

被序列化为`[0, 1, 1, 0]`. 没什么大不了的。

这里稍微棘手的部分是我正在利用该`MonadFix`实例`RWST`来“打结”字节流偏移量：我维护一个从节点到偏移量的映射，在序列化期间填充映射，但也引用映射中不存在的条目在序列化完成之前必然存在。

当地图实现是[`Data.HashMap.Lazy`](http://hackage.haskell.org/packages/archive/unordered-containers/latest/doc/html/Data-HashMap-Lazy.html)（来自[unordered-containers](http://hackage.haskell.org/package/unordered-containers-0.2.1.0)）时，这很有效。但是，当实现是通常的[`Data.Map`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map.html)（来自[容器](http://hackage.haskell.org/package/containers-0.5.0.0)）时，程序堆栈溢出 - 没有双关语 -`Map`无限尝试使用`(==)`.

**所以我的问题是：**这是一个错误`Data.Map`，还是我对这些结构在存在`mfix`缺陷的情况下应该如何表现的假设？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T19:48:23.500

您的`Ord`实例不起作用：

```
instance Ord Node where -- for use in Data.Map
  Node a _ < Node b _ = a < b 
```

对于工作`Ord`实例，您必须定义`compare`or `(<=)`。如果您只定义，则对或`(<)`的任何调用都将无限循环，因为两者都具有彼此的默认实现。的其他成员也是根据 定义的，因此除此之外没有任何作用。`compare``(<=)``Ord``compare``(<)`

# jquery - 何时使用 on("selector") 以及何时使用 on("selector", "selector")

> ID：11180553
> 
> 赞同：3
> 
> 时间：2012-06-24T19:29:09.520
> 
> 标签：jquery

使用 jQuery`on()`版本 1.7。我通常像这样绑定我的事件：

```
$(".foo").on("click", function() {
    console.log("foo clicked");
}) 
```

现在看到别人的代码后，我看到你也可以这样绑定，为特定元素指定一个辅助参数（不知道为什么这样写）：

```
$(document).on("click", ".bar", function() {
    console.log("bar clicked");
}) 
```

正如在这个[**小提琴**](http://jsfiddle.net/JWUyn/1/)中看到的，他们都做同样的事情。

我总是直接绑定到第一个代码示例中的元素，并且从来没有任何问题。

我什么时候需要使用另一种绑定方式，一种比另一种有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:30:32.537

您的第二个代码示例等效于不推荐使用的 now[`.live()`](http://api.jquery.com/live/)事件。因此，当您想要订阅在订阅时 DOM 中尚不存在的 DOM 元素的事件时，您将使用它（例如在 AJAX 调用之后添加到 DOM 的元素）。

您的第一个示例完全等同于`$(".foo").click(function() { ... });`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T19:31:27.053

```
$(document).on("click", ".bar", function() {
    console.log("bar clicked");
}); 
```

它不是现在不推荐使用的`.live()`方法
，而是将您的事件处理程序直接委托给元素/s（动态生成的'on the go'）

* * *

如果您使用`$('.button').on('click',function(){`并假设您动态生成一个按钮 - 单击该元素将无济于事。
如果您使用`$('#navigation').on('click','.button',function(){`点击处理程序被附加（委托）到任何现在和未来的`.button`元素，使其可点击。

哪里`$(document)`（它更慢）可以是你的父元素：（`$('#your_parent')`更快）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T19:32:48.703

始终使用最近的父元素。jQuery 监视冒泡的事件，并在找到事件后立即附加它们，这称为事件委托。当您使用`document`which 也是默认值时，jQuery 必须等待，而不是单击元素的最近父元素。

您的第一个示例适用于当您将事件绑定到它们时应该存在的元素，而稍后的方法适用于当前和新/动态创建的元素

# javascript - 从远程 Flash 调用 javascript 函数

> ID：11180555
> 
> 赞同：0
> 
> 时间：2012-06-24T19:29:53.980
> 
> 标签：javascript, flash

我有一个闪存文件位于一台服务器上，[http://www.somewhere.com/myflash.swf](http://www.somewhere.com/myflash.swf)

第二台服务器[http://www.righthere.com](http://www.righthere.com)上的 Web 应用程序包含嵌入该 Flash 文件的 html 页面。

Flash 文件有时会调用一个未触发的 javascript 函数。

如果我将 swf 文件复制到本地 web 应用程序所在的位置，则会触发 javascript 函数，因此可以自行刷新。

当闪存位于远程服务器上时，如何使其工作？

提前致谢！

为了情节，地名已更改=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:28:13.590

解决了这个问题。这是参考：

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7c9b.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7c9b.html)

# nhibernate - 使用 CreateQuery/CreateCriteria/QueryOver 从 T 中选择 TOP 10 在存储库级别而不是在实体级别

> ID：11180558
> 
> 赞同：0
> 
> 时间：2012-06-24T19:30:29.127
> 
> 标签：nhibernate, c#-4.0, hql, nhibernate-criteria, queryover

我在获取用户发布的最新 10 个帖子时遇到问题。我编写了以下 Nhibernate 查询，如下所示。

```
 public IList<T> GetLatest10Posts()
    {
        using (var session = sessionFactory.OpenSession())
        using (var transaction = session.BeginTransaction())
        {
            var queryString = String.Format("SELECT TOP 10 FROM {0} ORDER BY DateUpdated DESC", typeof(T));
            var returnVal = session.CreateQuery(queryString).List<T>();
            transaction.Commit();
            return returnVal;
        }
    } 
```

抛出异常

> 引发了“Antlr.Runtime.NoViableAltException”类型的异常。靠近第 1 行第 11 列

注意：DateUpdated 是列名，属于 DateTime 类型，存在于所有继承实体中。

QueryOver api有什么运气，因为我正在尝试实现这样的目标：

```
session.QueryOver<T>().Take(10).OrderBy().Desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:01:31.533

去年我写了一篇[关于HQL 语法的文章。](http://sessionfactory.blogspot.com/2011/04/support-for-skip-and-take-in-hql.html "支持 HQL 中的 SKIP 和 TAKE")

简而言之，`from {0} order by DateUpdated desc take 10`

# api - Flickr API 结果可缓存？

> ID：11180570
> 
> 赞同：1
> 
> 时间：2012-06-24T19:32:10.003
> 
> 标签：api, flickr

当使用 Flickr API[获取照片信息时](http://www.flickr.com/services/api/flickr.photos.getInfo.html)，我得到的结果如下所示：

```
<photo id="2733" secret="123456" server="12" isfavorite="0" license="3" rotation="90" originalsecret="1bc09ce34a" originalformat="png">
  <owner nsid="12037949754@N01" username="Bees" realname="Cal Henderson" location="Bedford, UK" />
  <title>orford_castle_taster</title>
  <description>hello!</description>
  [...]
</photo> 
```

我计划将结果缓存在数据库中，但是我想知道**某些照片信息是否可能无法长期缓存**，尤其是用于[构建 URL](http://www.flickr.com/services/api/misc.urls.html)的属性（秘密、服务器、农场 ID ...）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:50:36.277

[Flickr API 小组](http://www.flickr.com/groups/api/)中的讨论表明开发人员正在成功缓存结果。我发现[了这篇使用 PHP 的帖子](http://www.allthegoodness.com/projects/map/flickr/flickrapi.php)（有点旧），以及[这个更新的线程](http://www.flickr.com/groups/api/discuss/72157628245659073/?search=cache)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T00:46:57.787

我为 ExpressionEngine CMS 构建了一个插件，它使用 Flickr API 将图像及其元数据拉入 CMS。插件缓存了大部分照片信息，包括包含服务器、农场 ID 等的 URL。

即使在几个月/几年之后，这些 URL 仍然有效。因此，这些值似乎不会改变，至少不会经常改变。

不久前确实发生了变化的一件事是用于获取特定尺寸的后缀。我相信他们增加了一些新的尺寸或改变了一两个的后缀。

并不是说他们不能在下周完全激发 API ;)

# javascript - 在 javascript 弹出窗口中打开 php 链接

> ID：11180571
> 
> 赞同：0
> 
> 时间：2012-06-24T19:32:17.940
> 
> 标签：javascript

我有一个带有这样的链接的 PHP 脚本`<a href='iteminfo.php?ID={$i['itmid']}]}`

我想在弹出窗口中打开此链接，但我无法将该变量从链接中放入 javascript。我的问题是`$i['itmid']`来自数据库，对于每个链接，id 都是不同的，js 只从该数组中获取最后一个变量。

这是我的代码

```
if($i['weapon'])
{
 $i['itmname']="<a href onclick='javascript:poponload();'><font color='red'>*</font>" .$i['itmname'] ."";

 echo " <script type='text/javascript'>

function poponload()
{

    testwindow = window.open('iteminfo.php?ID={$i['itmid']}', 'mywindow', 'location=1,status=1,scrollbars=1,width=500,height=500');
    testwindow.moveTo(400, 130);
    testwindow.focus;
}

</script>"; 
```

# php - php下回显时空格丢失

> ID：11180578
> 
> 赞同：1
> 
> 时间：2012-06-24T19:33:19.903
> 
> 标签：php, html, postgresql

我在 PHP 和 PostgreSQL 方面遇到了以下问题。在表格中，我添加了以下值，标记空格。

```
Things: 10                     POLI 
```

当我用 PHP 读出来时，它会变成

```
Things 10 POLI 
```

我的简化代码（对于没有错误的理想世界）是：

```
$query = "SELECT stuff, thing, planets FROM 42 WHERE answer = '-'";
$result = pg_query($connection, $query);
$resultTable = pg_fetch_all($result); 
```

然后与

```
echo "Things: $result[stuff]"; 
```

我的问题是，哪一步消除了所有的空白？以及如何找回这些空间？我知道大多数人都想删除它们，我想保留它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:36:16.453

那是因为浏览器不能识别多个空格，你可以使用这段代码将连续空格转换为`&nbsp;`（浏览器理解的空格）

```
$str = str_replace(' ', '&nbsp;', $origText); 
```

或者，`<pre>`如果符合您的要求，请按照以下评论中的建议将您的文本包装在标签中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:38:31.990

这不是 PHP 问题，而是 HTML 问题，因为如果您使用 echo 输出，您实际上会生成 HTML 代码。

HTML 规范定义，多个连续的空格只呈现为一个空格。

如果你想避免这种情况，`<pre>`请在字符串周围加上一个标签：

```
echo "<pre>Things: $result[stuff]</pre>"; 
```

# javascript - 如何在 HTML 中的 Image-Click 上播放声音？

> ID：11180581
> 
> 赞同：3
> 
> 时间：2012-06-24T19:33:26.303
> 
> 标签：javascript, html, audio, playback

当我单击或将鼠标悬停在我的播放按钮上时，我正在尝试播放声音？这是我到目前为止所拥有的。我有一个按钮，如果我将鼠标悬停在它上面它会改变图像，现在我也希望它播放 mp3。

```
play a {
    position:relative;
    float:left;
    width:155px;
    height:134px;
    background-image:url(../images/Goodsound_PLAY_UP.png);
}
play a:hover {
    background-image:url(../images/Goodsound_PLAY_P.png);

I want to play a sound here

} 
```

很抱歉问了这么简单的问题。我是一个 html 菜鸟，从上周开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:46:36.673

在 HTML 中播放声音并不容易。事实上，直到 html5`audio`才出现！即使不是所有地方都支持 html5，但现在在浏览器中播放声音会更容易一些。

我的建议是使用[mediaelementJS](http://mediaelementjs.com/)，这是一个 javascript 库，它填补了旧浏览器和 html5 音频（和视频）规范之间的空白。不要使用播放器（带有完整的控制栏），而只使用 mediaelementjs 组件。要使用它，只需在页面头部包含库

```
<script src="js/libs/mediaelement.min.js"></script> 
```

首先，您必须在 html 中放置一个音频标签：

```
<audio id="mySound" src="my_audio_file.mp3" type="audio/mpeg"></audio> 
```

然后，调用 Mediaelement 库

```
var mySound = new MediaElement('mySound'); 
```

最后，在您的点击或结束事件上播放它（这里我使用 jQuery）

```
$('.play a').mouseover(function(){ mySound.play() }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:45:10.220

你可以使用这个：

**JavaScript**

```
var audio = $("#audio");
$("play a").mouseenter( function() {
    audio.play();
} 
```

where`audio`是一个`<audio>`元素，并且`play a`是悬停的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T12:48:05.140

使用**jQuery**：

```
$("object_element_id") .on ('mouseover', function(e){
    // audio play code here
});

$("object_element_id") .on ('mouseout', function(e){
    // audio pause/stop code here
}); 
```

为什么是“*开*”？想象一下“AJAX 页面刷新”。删除它：

```
$("object_element_id") .off ('mouseenter'); 
```

为什么是“ *mouseover* ”和“ *mouseout* ”？也许您想为每个状态添加额外的功能，例如更改按钮的 IMG SRC，制作一些效果......随意。为什么是“ *e* ”元素？E 元素是触发事件的对象——图像、链接等。用它做所有事情（或者只是删除它）。

对于音频播放，您可以使用 HTML5 标签。这很简单，并且受到主要浏览器的支持（你没有问“retrocompatibility”）你可以缓存元素（如 Mateusz 的回答）并使用它：

```
var $audio = $("#audio_element_id"); //for cache the element
$audio.setAttribute('src', url_link); //for change the URL file (ir can be MP3, OGG...)

$audio.play(); //for the mouseover
$audio.stop(); //for the mouseout 
```

然后，最后的代码：

```
var $audio = $("audio_element"); //caching

$("object_element_id") .on ('mouseover', function(e){
    $audio.play();
});

$("object_element_id") .on ('mouseout', function(e){
    $audio.stop();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T17:54:42.170

您可能还会发现此代码很有用（我认为它相当现代，因此它可能不适用于旧浏览器；我将它与 Firefox 32 一起使用）。

```
<audio controls> <source src="song.mp3" type="audio/mpeg"> </audio> 
```

视频也有类似的：

```
<video width="320" height="240" controls> <source src="clip.mp4" type="video/mp4"> </video> 
```

# sql-server - Azure - SQL 同步 - Windows Server 2008 R2 - 越野车？

> ID：11180582
> 
> 赞同：0
> 
> 时间：2012-06-24T19:33:34.697
> 
> 标签：sql-server, windows, sync, azure-sql-database

是否有人使用 Windows Server 2008 R2 + SQL Server 2008 R2 并已成功将数据库从本地主机同步到 Azure 上的云？我的目标是优先考虑本地计算机数据库，并且我希望云数据库与本地计算机上的任何内容同步。

首先，我很难下载依赖项，但是在过去之后，我仍然遇到错误（错误？），或者希望我在加载客户端同步代理时做错了什么？

我下载了“SQLDataSyncAgent-Preview-ENU.msi”文件。我正在输入本地 Box 管理员密码，但收到错误消息“无法安装服务 MS SQL 数据同步。请验证您是否有足够的权限来安装系统服务”。你们是否使用了一些单独创建的特殊帐户而不是使用本地管理员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:50:11.283

这个和其他类似的问题在论坛中讨论了解决方案：

[无法安装 MS SQL Azure 数据同步（预览版）](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/8c967fd1-b952-4f79-87ca-98027cac4719)

# doctrine-orm - Doctrine2 查询返回一个不存在的对象

> ID：11180584
> 
> 赞同：1
> 
> 时间：2012-06-24T19:34:15.010
> 
> 标签：doctrine-orm

我有一个包含三个表的**Doctrine2项目：** **Product**、**Category**和**Rating**。每个产品都有一个且只有一个类别。一个类别可能有一个父级和许多子级。每个产品都有很多评价。

我运行以下查询：

```
SELECT DISTINCT p, AVG(r.value)*COUNT(r) as globalrating 
FROM AcmeProductBundle:Product p 
JOIN p.ratings r JOIN p.category cat JOIN cat.parent par
WHERE par = '.$categoryID.' OR cat = '.$categoryID.'
ORDER BY globalrating DESC, p.name ASC 
```

其中 $categoryID 是我正在搜索产品的类别的 ID。关键是，尽管该类别中没有产品，但仍会报告一个结果。特别是，该对象的类型是 Acme\ProductBundle\Product 并且在字段中没有值，并且**id 是 0**！“globalrating”值也是空的！我不明白为什么？

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:05:55.607

你能试试这个：

```
$query = $this->em->createQuery('SELECT DISTINCT p, AVG(r.value)*COUNT(r) as globalrating 
                                 FROM AcmeProductBundle:Product p 
                                 JOIN p.ratings r JOIN p.category cat JOIN cat.parent par
                                 WHERE par = :category OR cat = :category
                                 ORDER BY globalrating DESC, p.name ASC');

$query->setParameter('category', $categoryID);
$returned = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:07:05.843

我今天回到问题上，我终于找到了问题！

阅读相关的[Doctrine 文档](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#pure-and-mixed-results)，我发现`GROUP BY`缺少一个子句。因此，正确的*DQL 查询*是：

```
SELECT DISTINCT p, AVG(r.value)*COUNT(r) as globalrating 
FROM AcmeProductBundle:Product p 
JOIN p.ratings r JOIN p.category cat JOIN cat.parent par
WHERE par = '.$categoryID.' OR cat = '.$categoryID.'
GROUP BY p.id
ORDER BY globalrating DESC, p.name ASC 
```

# iphone - 从 url 加载二维码并显示为图像视图

> ID：11180586
> 
> 赞同：0
> 
> 时间：2012-06-24T19:34:38.917
> 
> 标签：iphone, objective-c, ios, xcode

正如标题所说，我正在尝试使用这样的二维码 - [http://chart.apis.google.com/chart?cht=qr&chs=200x200&chl=044779-A55W6UZD&chld=H|0](http://chart.apis.google.com/chart?cht=qr&chs=200x200&chl=044779-A55W6UZD&chld=H|0)并将其显示为 UIImageview。我已经搜索过，但在任何地方都找不到答案。请帮忙。我已经尝试过了，但它似乎不起作用

```
 NSData *receivedData =  [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
UIImage *image = [[UIImage alloc] initWithData:receivedData];
UIImageView * myImageView = [[UIImageView alloc] initWithImage:image];
myImageView.frame = CGRectMake(20, 160, 200, 200);
[self.view addSubview:myImageView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:45:39.117

尝试像这样对 url 进行编码，然后`encodedUrl`在其余代码中使用：

```
NSString* encodedUrl = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

您还应该记住释放您创建的对象，否则您会泄漏内存。

```
NSData* receivedData =  [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:encodedUrl]];
UIImage* image = [[UIImage alloc] initWithData:receivedData];
UIImageView* myImageView = [[UIImageView alloc] initWithImage:image];
myImageView.frame = CGRectMake(20, 160, image.size.width, image.size.height;
[self.view addSubview:myImageView];

[receivedData release];
[image release];
[myImageView release]; 
```

# ios - 仅将 AdMob 用于自家广告

> ID：11180588
> 
> 赞同：3
> 
> 时间：2012-06-24T19:34:55.130
> 
> 标签：ios, admob, ads

我正在更新我的一个 iOS 应用程序以包含广告。但是，我只想在我卖给当地公司的合同上展示自己的广告。我相信 AdMobs 已经足够好，因为我可以添加自己的“自家广告”，但我想“禁用”AdMob 以显示我选择显示的任何其他广告。

这可能吗？或者我应该以其他方式做到这一点，如果是这样..怎么办？（我可以使用任何框架或服务吗？）

***编辑***
为了让我的问题更清楚一点：我相信我不能仅将 AdMob 用于自家广告，那么我如何才能仅将外部“合作伙伴”用于自家广告。可以在 AdMobs 的代码中完成，还是应该使用其他框架/合作伙伴？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:36:54.117

听起来您正在寻找可以管理自己的广告资源的[DFP 广告管理系统之类的产品。](http://www.google.com/dfp/info/sb/index.html)DFP 还与 AdMob 集成，因此您可以[使用 AdMob SDK](https://developers.google.com/mobile-ads-sdk/docs/ios/doubleclick/)向您的 DFP 网络发送请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:46:49.847

如果您的意思是您只想展示自家广告而不展示其他任何内容，那么可以这样做。

创建广告活动时，将应用程序的广告分配 100% 分配给自家广告。然后，您的应用中将不会出现付费广告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T00:21:06.913

[使用 AdMob，您可以使用自定义事件](https://developers.google.com/admob/android/custom-events)实现第三方广告和独家自家广告。*您可以使用Impression Goal Campaigns*运行固定的自家广告库存。如果这些自家广告库存用完 AdMod，我们将恢复为基于 eCPM 的广告投放，这将选择最高 eCPM。要获得唯一的自家广告，请在 AdMob 管理界面中添加一个新的自定义事件，并将其 eCPM 设置为高于*AdMob 网络*通常产生的值。请参阅：[按 eCPM 排序的广告来源](http://i.stack.imgur.com/a1gu2.png)。最后，在 Android 中，将您的自定义事件作为一个类 (com.appname.NoDisplayCustomEvent) 在您的应用程序中实现，以 (1) 显示 AdMob 广告，(2) 显示手工制作的广告或 (3) 什么都不做。

```
public class NoDisplayCustomEvent implements CustomEventInterstitial {
    CustomEventInterstitialListener listener;

    public void requestInterstitialAd(Context context, CustomEventInterstitialListener interstitialListener, String params, MediationAdRequest request, Bundle extra) {
        listener = bannerListener;

        if ( ... some criteria ...  )
            // Do custom event
            listener.onAdLoaded(); 
        else
            // Show AdMob
            listener.onAdFailedToLoad(AdRequest.ERROR_CODE_NO_FILL); 
    }

    public void showInterstitial() {
        listener.onAdOpened();
        listener.onAdClosed();
    }
    ... 
```

# expressionengine - 表达式引擎通道条目彼此相邻

> ID：11180591
> 
> 赞同：0
> 
> 时间：2012-06-24T19:34:58.347
> 
> 标签：expressionengine, channel

我试图让我的频道条目彼此相邻。

打印频道条目的常用方法：

```
{exp:channel:entries channel="news" limit="10"}
                <h2>{title}</h2>

               {news_body}
{/exp:channel:entries} 
```

所以新闻打印如下：

```
 Title 1 Blah Blah

  ashdjsdsd asdsda ada
  adasdasda asdsda adad

  Title 2 Blah Blah

  jsaudwi llasdju alsl
  asdasdas 
```

我想像这样打印两篇彼此相邻的新闻文章：

```
 Title 1 Blah Blah            Title 2 Blah Blah

  jsaudwi llasdju alsl        ashdjsdsd asdsda ada
  asdasdas                    adasdasda asdsda adad 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:26:14.123

这比 ExpressionEngine 更像是一个 html/css 问题，有几种方法可以做到这一点：

*   [http://jsfiddle.net/xJyqs/](http://jsfiddle.net/xJyqs/)
*   [http://jsfiddle.net/xJyqs/2/](http://jsfiddle.net/xJyqs/2/)（如果您不关心旧浏览器支持）

我这样做的方式如下 -

```
{exp:channel:entries channel="news" limit="10"}
<div class="entry">
<h2>{title}</h2>
{news_body}
</div><!--/.entry-->
{/exp:channel:entries} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:20:01.703

[从 HTML/CSS 的角度来看， imjared 的答案](https://stackoverflow.com/a/11183515/174299)很好，但是由于这被标记为 ExpressionEngine 问题，因此这里是如何通过 EE 语法和不言自明的 HTML 来解决这个问题。

```
{exp:channel:entries channel="news" limit="10"}
<div class="{switch="float-left|float-right"}">
    <h2>{title}</h2>
    {news_body}
</div>
{/exp:channel:entries} 
```

# android - 在 Android 中移植基于 Qt 的应用程序

> ID：11180594
> 
> 赞同：6
> 
> 时间：2012-06-24T18:12:39.087
> 
> 标签：android, qt

我开发了一个基于 Qt 的应用程序，我想将它移植到 Android。我有办法做到这一点吗？

我正在开发 Android Gingerbread。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T19:25:45.640

您可以使用[Necessitas](http://necessitas.kde.org/)，它有一个漂亮的 GUI，可以轻松帮助您创建、构建、调试和部署 Android 的 Qt 应用程序。

> **什么是必需品？**
> 
> Necessitas 是 Android 操作系统上 Qt 端口的代号以及用户友好的 Qt Creator 与 Android 集成的代号，
> 
> 该项目为您提供适用于 Android 操作系统的 Qt，以及一个一流的公民 IDE，让您可以在 Android 设备上管理、开发、部署、运行和调试您的 Qt 应用程序。

[下载必需品](http://sourceforge.net/projects/necessitas/files/)

[如何安装 Necessitas SDK](http://sourceforge.net/p/necessitas/wiki/How%20to%20install%20Necessitas%20SDK/)

* * *

**相关阅读：**

[将 Qt 应用程序引入 Android – 快速入门视频](http://labs.qt.nokia.com/2011/02/28/necessitas/)

# javascript - jQuery 没有捕捉到点击某些加载的内容

> ID：11180598
> 
> 赞同：0
> 
> 时间：2012-06-24T19:35:42.857
> 
> 标签：javascript, jquery, click, twitter-bootstrap, html5boilerplate

我正在使用带有 Zoomy 和 jmpress 插件的 jQuery 1.7.2。我也在使用从 initializr.com 下载的样板+引导程序

当您必须在照片中找到某些角色时，我正在尝试创建像 [Waldo/Wally] 这样的“游戏”。每张照片都有不同的字符可供查找。

我使用 jmpress 作为演示插件，每次找到角色时从一张照片转到另一张照片。jmpress 通过 ajax 加载内容（我需要这种行为），因为我想要快速加载网络。

**问题：** .on("click") 事件没有被加载的内容中存在的元素之一捕获。

作为一个例子，我将用其中一个字符解释我的问题（仅使用部分代码）。

我的 index.html 中有一些 div 来加载字符，我将使用护士角色：

```
<div id="nurse" class="step container" data-src="women/nurse.html" data-x="7500">
  Loading...
</div> 
```

当用户靠近该 div（步骤）时，jmpress 通过 ajax 加载 data-src（women/nurse.html）。它加载得很好。

这是nurse.html的代码

```
<script type="text/javascript">
    new Image().src = "img/nurse_big.jpg";
</script>
<div class="descripcion">
    <p>Bla, bla, bla.</p>
</div>
<div class="imagen">
    <a href="img/nurse_big.jpg" class="zoom"> <img src="img/nurse.jpg" alt="Find the nurse" /> </a>
</div> 
```

如您所见，我在#nurse div（具有 .step 类）中加载了两个 div。

当我尝试捕获点击事件时，我的 js/script.js 文件中有此代码：

```
$(".step").on("click", function(event){
    console.log(event.target);
}); 
```

我也在尝试使用“body”标签来看看会发生什么

```
$("body").on("click", function(event){
    console.log(event.target);
}); 
```

如果您在显示消息时检查控制台 (div.descripcion)，它会捕获事件并打印。但是，在 div.descripcion 被删除并且图像出现之后，它就没有了。就像那个 div.imagen 甚至它里面的元素不存在一样。未捕获单击事件。我试图捕捉 mousemove 事件，它确实如此。

为什么没有捕捉到点击？任何的想法？

您可以看到一个*工作版本*：[已删除]

和*不工作的版本*：[删除]

**更新：**我忘了，如果我使用 .on("click") 它不起作用。但是，如果我使用 .on("mousemove") 例如，它可以工作。这就是奇怪的部分。.on() 正在工作，但不适用于点击事件。

**更新 2：**我删除了实时示例的链接，因为它们在开发版本中。我会在发布时发布最终作品的链接。感谢大家抽出宝贵的时间。特别是给我答案的@Esailija。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:37:34.120

再次，您需要`on`用于稍后加载的内容：

```
$("body").on("click", ".step", function(event){
    console.log(event.target);
}); 
```

替换`body`为最近的包含元素的**静态**`.step`元素。
执行该行时，DOM 中存在静态方法：

```
$(...).on("click", ".step", function(event){ 
```

例子：

```
$('#ContainerId').on("click", ".step", function(event){
    // Do what you want.
}); 
```

> **委托事件**的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要

[`on`文档](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:12:20.473

您正在使用的 zoomy 插件执行此操作：

```
 'click': function () {
    return false;
} 
```

由于您在图像上单击的元素实际上是缩放元素，因此这些元素首先处理事件。他们通过 处理它`returning false`，这意味着`e.stopPropagation()`做得好`e.preventDefault()`。所以这个事件甚至不会来`.imagen`。

您的代码中还有未终止的多行注释，不确定它的作用，但它不会很好。考虑只删除代码而不是注释掉它。

无论如何，清除这样的所有内容：

```
$.cache = {}; //Can also do $("*").off() I think 
```

然后做：

```
$(".step").on("click", ".imagen", function(event){
    console.log(event.target);
    event.preventDefault();
}); 
```

它工作正常。您可能想编辑插件来执行此操作：

```
'click': function (e) {
    e.preventDefault();
} 
```

或者，您可以寻找一个由知道自己在做什么的人开发的插件，或者自己编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:55:21.920

在[http://zoomy.me/Options.html](http://zoomy.me/Options.html)的文档中，您可以通过在可点击选项中添加 true 来允许插件具有可点击区域。

因此，当调用`zoomy()`一个元素时，您所要做的就是在 zoomy 函数中添加一点代码。

```
$('.element').zoomy({clickable:true}); 
```

这应该可以解决所有问题，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T07:45:48.560

在点击事件上捕获该功能的另一种方法如下所示。

```
 <div onclick="fireClickEvent();" > Just firing the click event!</div>

    function fireClickEvent() {
        console.log(event.target);
    } 
```

# ruby-on-rails - 如何检测到 dom 元素已被删除

> ID：11180606
> 
> 赞同：1
> 
> 时间：2012-06-24T19:37:05.110
> 
> 标签：ruby-on-rails, rspec, capybara

我刚刚开始学习 rspec 和 capybara；我看到很多测试加载到 dom 中的新内容的示例，但并没有太多验证元素是否已被删除的示例。

我想找到一个元素，单击链接使其消失，并确认它已消失。

就像是：

```
item = find(".list-delete")
item.click
page.driver.browser.switch_to.alert.accept
page.should not_have(item) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:50:12.977

我会尝试以下方法：

```
item = find(".list-delete")
item.click
page.driver.browser.switch_to.alert.accept
item.reload.should be_nil 
```

# file - 大型 clojure 项目是如何组织的？

> ID：11180608
> 
> 赞同：10
> 
> 时间：2012-06-24T19:37:16.553
> 
> 标签：file, class, methods, clojure, namespaces

在大多数编程语言中，您通常具有“命名空间 > 文件 > 类 > 方法”或类似的组织。这是如何在clojure中完成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T19:49:49.070

大致是：

```
namespace > files > vars 
```

注意：

*   命名空间经常在单个文件中定义，但并非必须如此（您可以使用多个文件来定义命名空间）
*   vars 可以包含任何东西：函数、Java 对象、数据、宏等。大多数时候，它们要么是函数，要么是顶级数据字面量
*   命名空间是动态的：它们可以在运行时修改。这为您提供了很大的灵活性，可以根据需要以不同的方式组织代码（例如，您可以以编程方式生成和填充命名空间）

也可以看看：

*   [http://clojure.org/namespaces](http://clojure.org/namespaces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:36:02.920

Clojure 命名空间是 java 包，因此大多数 Clojure 程序的组织方式与 java 程序非常相似，至少在包级别上是这样。

在包级别之后，我看到许多 Clo​​jure 程序往往比 Java 同类程序更扁平。

# drupal - 挂钩drupal的密码机制

> ID：11180614
> 
> 赞同：0
> 
> 时间：2012-06-24T19:37:48.680
> 
> 标签：drupal, drupal-7, drupal-modules, mybb

我正在将一个站点从论坛系统 (mybb) 转换为一个 drupal 站点，显然密码方案完全不同。

我打算导入所有用户，他们的旧密码哈希前缀为“mybb_”。

我想编写一个模块，如果用户登录使用旧机制进行身份验证，然后用 drupal 7 散列密码替换密码，它会检测前缀密码。

我对drupal开发相对较新，所以我对执行此操作所需的钩子等不够熟悉。

任何指导都会很棒:)

（另外，如果有比我建议的更好的方法来解决这个问题，请随时加入。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:33:12.077

Drupal 在函数[user_check_password()](http://api.drupal.org/api/drupal/includes!password.inc/function/user_check_password/7)中进行类似的检查。它由验证函数[user_login_authenticate_validate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_login_authenticate_validate/7)调用，因此您可以使用[hook_form_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)覆盖它并指向包含 mybb 检查的 user_check_password() 的自定义版本。

另一种方法，而不是覆盖，只需在登录表单中的默认表单之前添加一个验证处理程序，并在那里检测、验证和重新散列密码。

# css - Firefox 不恢复光标属性

> ID：11180615
> 
> 赞同：2
> 
> 时间：2012-06-24T19:38:03.050
> 
> 标签：css, flash, firefox, cursor

我正在使用网络摄像头并遇到了一个奇怪的问题。

我的网络摄像头视频有一个 Flash 对象，我在它上面放了一个 div（具有绝对定位），作为切换视频的按钮。HTML 是这样的：

```
<div id="container">
  <object></object>
  <div class="camicon"></div>
</div> 
```

和CSS：

```
div.camicon {
    height: 32px;
    width: 32px;
    background-image: url('../../images/broadcast/webcam-icon.png');
    position: absolute;
    top: 5px;
    right: 5px;
    cursor: pointer;
} 
```

现在的问题是，在 Firefox 中，当光标离开图标并停留在 flash 对象上时，光标不会恢复到其默认值（即箭头）。但是，当光标移出 flash 对象时，它会正确恢复。

这不会在 Chrome 上发生，所以我想这可能是一些烦人的错误。

有人知道吗？我已经尝试了很多可能的修复方法，但到目前为止还没有成功。

更多信息：

*   Ubuntu 11.10 32 位
*   火狐 13.0.1
*   闪存 11.2.202.236

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:24:35.550

我没有任何代码来测试它，但我认为这样的事情应该有助于强调这一点（也许这是你已经尝试过的解决方案之一）：

```
#container {
    cursor: auto; /* or "default" */
}

#container div.camicon {
    height: 32px;
    width: 32px;
    background-image: url('../../images/broadcast/webcam-icon.png');
    position: absolute;
    top: 5px;
    right: 5px;
    cursor: pointer;
} 
```

# php - MySql SELECT 查询

> ID：11180616
> 
> 赞同：0
> 
> 时间：2012-06-24T19:38:16.520
> 
> 标签：php, sql

我正在编写一个脚本，该脚本根据从 MySQL 表中获得的值计算杀伤率 (KDR)。我正在修复别人的代码。我已经设法让它的大部分再次工作。但是，我被困在这里。KDR 的计算方法是将所有击杀数相加，然后除以玩家的死亡数。但是，如果玩家从未死过，那么 KDR 的值为 0。我需要一种读取 0 的方法，在评估 KDR 时将其作为 1。我确实谷歌了这个，并尝试编写一个我可以使用的 UDF，但是它没有帮助。

下面是有问题的 SQL 查询

```
function get_leaders($civ, $neu, $riv){
    $sSQL = "SELECT *, ((civilian_kills * _civ + neutral_kills * _neu + rival_kills * _riv) / deaths ) as KDR
              from sc_players
              order by KDR DESC
              LIMIT 100;"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:43:09.513

[http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)

```
SELECT *,
IF(deaths,civilian_kills * $civ + neutral_kills * $neu + rival_kills * $riv) / deaths,1) as KDR
from sc_players
order by KDR DESC
LIMIT 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:55:49.507

I think you mean the divisor should be treated as 1 when it is 0\. In that case, you would do

```
SELECT *, ((civilian_kills * $civ + neutral_kills * $neu + rival_kills * $riv) / 
    (IF deaths = 0 THEN 1 ELSE deaths)
) as KDR from sc_players order by KDR DESC LIMIT 100; 
```

Assuming deaths is nonnegative, you could also do:

```
SELECT *, ((civilian_kills * $civ + neutral_kills * $neu + rival_kills * $riv) / 
    GREATEST(deaths, 1)
) as KDR from sc_players order by KDR DESC LIMIT 100; 
```

# python - pyparsing 中的可选字符串段

> ID：11180622
> 
> 赞同：4
> 
> 时间：2012-06-24T19:39:13.727
> 
> 标签：python, pyparsing

我正在使用 pyparsing 并尝试定义如下两项：

```
identifier = Word(alphas, alphanums).setName('identifier)

database_name = Optional(identifier.setResultsName('user') + Suppress('.')) + identifier.setResultsName('database')
table_name = database_name + Suppress('.') + identifier.setResultsName('table') 
```

这个想法是匹配`table_name`，它将采用一个包含两个或三个段的字符串，并产生以下结果：

```
mark.foo.bar
=> tokens.user = 'mark'
   tokens.database = 'foo'
   tokens.table = 'bar' 
```

或者如果第一段丢失：

```
foo.bar
=> tokens.user = ''  #anything is acceptable: none, empty string or just plain missing
   tokens.database = 'foo'
   tokens.table = 'bar' 
```

`table_name`应该总是有两个段和一个点，或三个段（两个点）如上。一段是不可接受的。

`database_name`应该有一个段（数据库）或两个（user.database）。

使用的实例可以`database_name`正常工作 - 它会匹配一个或两个段。但是，`table_name`在某些情况下会失败：

```
# Works for three segments
mark.foo.bar
=> tokens.user = 'mark'
   tokens.database = 'foo'
   tokens.table = 'bar'

# Fails for two
foo.bar
=> Expected "." (at char 7), (line:1m col:8) 
```

我可以看到它在做什么：`foo.bar`已与 user.database 匹配，现在它正在期待代表表名的第三个块。然而它不是我想要的。

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T22:47:58.793

问题是，当您匹配前导标识符时，您不知道它是否会成为用户字段，直到您查看了所有可能的表字段。不幸的是，这意味着您不能单独使用其前导的可选“用户”字段来定义数据库名称，您必须定义一个`table_name`具有两个或三个字段的综合表达式。

以下代码显示了解决前导可选标识符歧义的 3 个选项：

1.  首先尝试匹配完整的 3 字段形式，如果失败，请尝试匹配 2 字段形式

2.  匹配可选的前导“用户”字段时显式前瞻，仅在“用户”后面跟随时才使用 FollowedBy 匹配“用户”`2*(DOT+identifier)`

3.  匹配任何长度的所有点分隔列表，并使用解析操作来验证是否仅传递了 2 或 3 个标识符，并分配结果名称

查看评论以了解每个选项是如何实现的。（请注意，为了简化代码，我还将使用 full 替换`expr.setResultsName('something')`为 just `expr('something')`，我认为总体上更易于阅读。）

```
from pyparsing import *

identifier = Word(alphas, alphanums).setName('identifier')
DOT = Suppress('.')

# Option 1 - fully specified options
full_database_name = identifier('user') + DOT + identifier('database')
just_database_name = identifier('database')
table_name = (full_database_name + DOT + identifier('table') | 
              just_database_name + DOT + identifier('table'))

# Option 2 - use FollowedBy to explicitly lookahead when checking for leading user
table_name = (Optional(identifier('user') + FollowedBy(2*(DOT+identifier)) + DOT) + 
                identifier('database') + DOT + identifier('table'))

# Option 3 - use liberally matching expression, with a parse action to assign fields
def assignTableFields(fields):
    if len(fields) == 2:
        fields['database'],fields['table'] = fields
    elif len(fields) == 3:
        fields['user'],fields['database'],fields['table'] = fields
    else:
        raise ParseException("wrong number of fields")
table_name = delimitedList(identifier, delim='.').setParseAction(assignTableFields)

for test in ("a.b.c", "b.c"):
    print test
    print table_name.parseString(test).dump()
    print 
```

您可能还会发现这种匹配器过于自由，因为它还允许交错的空格，因此`"a . b"`也可以作为有效的表名。您可以定义另一个验证解析操作，并将其添加到 table_name 为：

```
def noWhitespace(source, locn, tokens):
    if not source[locn:].startswith('.'.join(tokens)):
        raise ParseException("found whitespace between fields")
table_name.addParseAction(noWhitespace) 
```

看到对于这个解析动作，我调用`addParseAction`了代替`setParseAction`，以便保留任何现有的解析动作（在选项 3 的情况下），并将这个新的动作添加到要运行的解析动作链中。

# scheduled-tasks - MPI 任务调度

> ID：11180624
> 
> 赞同：3
> 
> 时间：2012-06-24T19:39:25.443
> 
> 标签：scheduled-tasks, mpi

我想使用 MPI 开发一个任务调度程序，其中有一个主处理器并且有工作/客户端处理器。每个工作人员都有它需要计算的所有数据，但从主服务器获取索引来处理。计算完成后，worker 将一些数据返回给 master。问题是有些进程会很快，有些进程会很慢。如果我运行一个循环，以便在每次迭代中主机发送和接收（阻塞/非阻塞）数据，那么它无法继续下一步，直到它从分配给它的上一个索引中接收到来自当前工作人员的数据。底线是，如果一个 worker 的计算时间过长，那么它就会成为限制因素，即使使用了非​​阻塞技术，master 也无法继续为下一个 worker 分配索引。

我开始认为 MPI 可能不是这样做的范例。python会是一个很好的平台来进行任务调度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:34:01.170

使用`MPI_Irecv()`and是绝对可能的`MPI_Test()`。主进程需要做的就是为每个工作进程发布一个非阻塞接收，然后在循环中测试每个工作进程的传入数据。如果一个进程完成，给它发送一个新的索引，为它发布一个新的非阻塞接收，然后继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:32:34.790

每个进程的一个 MPI_IRecv 是一种解决方案。这具有在工作完成时需要取消不匹配的 MPI_IRecv 的缺点。

MPI_ANY_SOURCE 是备用路径。这将允许管理器进程在任何给定时间有一个未完成的 MPI_IRecv，并且 MPI_Send 的“下一个”进程将与 MPI_ANY_SOURCE 匹配。当没有额外的工作要做时，这具有 MPI_Send 中多个等级阻塞的缺点。需要制定某种“无事可做”的信号，这样队伍才能干净利落地退出。

# eclipse - 如何使 \uXXXX 出现在 Eclipse 中？

> ID：11180626
> 
> 赞同：-1
> 
> 时间：2012-06-24T19:39:28.073
> 
> 标签：eclipse

如何让我的 Eclipse 使用 \uXXXX 符号？

我应该更改字体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:57:33.543

If you're just trying to see unicode output in the console, make sure the font you're using supports unicode and that the output encoding is set to UTF-8.

When running this in my pretty vanilla install of Eclipse:

```
System.out.println("\u0CA0_\u0CA0"); 
```

I get this as expected in the Eclipse console output:

```
ಠ_ಠ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:49:30.550

Eclipse 永远不会使用 \u 转义符在控制台窗口中显示。那只是不在它的保留曲目中。

但是，这可能不是您想要的。

如果您在源代码中使用 \u 转义编码了一些 Java，那么您的第一个问题是配置运行/调试配置以对控制台窗口使用适当的编码。UTF-8 通常是正确的答案。然后，您需要在 eclipse 首选项中为您选择的特定字符选择合适的字体。然而，无论你做什么，"\uxxxx" 永远不会是*出来的*。您将得到的是您的 unicode 转义指定的字符。

# javascript - 验证密码字段是否为空

> ID：11180630
> 
> 赞同：0
> 
> 时间：2012-06-24T19:40:15.927
> 
> 标签：javascript, jquery

我有一个登录表单，用户在其中输入用户名和密码以尝试登录他的个人资料。我想在开始进行服务器端处理之前动态验证两个字段是否都已填写。

* * *

```
<form id="form" method="post" action="student.jsp">

          <label><strong>Username :</strong><br/><br/>
          <input type="text" value="" name="username" id="idusername">
        </label><br/><br/>

          <label><strong>Password :</strong><br/><br/>
          <input type="text" value="" name="password" id="idpassword">
            </label><br/><br/><br/>

          <input id="minibutton" name="send" type="submit" value="Login" />
        </form> 
```

* * *

我正在使用 javascript，只要用户名留空并且我们尝试登录，它就会正确验证并发出警报。但是，密码字段并没有这样做，我们可以将其留空。

* * *

```
$(document).ready(function(){
//global vars
var form = $("#form");
var username= $("#idusername");
var password = $("idpassword");

//On Submitting
form.submit(function(){
    if(username.val().length==0 || password.val().length==0){
                    alert('Please enter the username');
        return false;
                    }
    else
    {
                if(password.val().length==0)
                    {
                        alert('Please enter the password');
                        return false;
                    }

                 else   
                    return true;
    }
});
}); 
```

* * *

我不擅长 javascript，但我需要使用它进行动态验证。Plaese指出验证密码字段的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T19:41:35.137

缺少的哈希符号：

```
var password = $("idpassword"); 
```

应该：

```
var password = $("#idpassword"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:41:59.943

更改`var password = $("idpassword");`为`var password = $("#idpassword");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:46:25.160

也在你的逻辑中：

```
if(username.val().length==0 || password.val().length==0){
    alert('Please enter the username');
    return false;
}
else{
    if(password.val().length==0)
    {
        alert('Please enter the password');
        return false;
    }
    else   
        return true;
} 
```

如果用户名或密码为空，它总是会说“请输入用户名”，因为它与 if 子句匹配，

你应该把它改成 2 if's

```
if(username.val().length==0){
    alert('Please enter the username');
    return false;
}
if(password.val().length==0){
    alert('Please enter the password');
    return false;
}
return true; 
```

这样，它会检查用户名是否已填写，如果密码已填写，如果两者都填写，则返回 true，否则，如果其中一个为空，则将其标记为空并返回 false。

希望这可以帮助

# iphone - 数据库未更新应用程序版本 2

> ID：11180631
> 
> 赞同：0
> 
> 时间：2012-06-24T19:40:25.443
> 
> 标签：iphone, ipad, sqlite

我开发了与`sqlite database`.

当为应用程序添加增强功能时，会发生变化`database`，所以我`database`通过将额外的表添加到现有的`db`.

现在，当设备 [版本 1] 中所有就绪的应用程序更新为应用程序的新功能时。`database`版本 2 没有更改。

任何人都可以给我建议如何反映`db`版本 2。

@提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:51:26.767

我在[这里](https://stackoverflow.com/questions/8794397/sqlite-database-update-when-app-version-changes-on-appstore-in-iphone/8794731#8794731)回答了一个类似的问题，我认为它可以帮助你。这个想法是检测您的应用程序是否在安装后首次启动。如果它在安装后第一次启动，您可能会删除旧表或更新它们...上面的链接说明了如何检测它是否是第一次启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:10:56.683

检查何时打开与运行 CREATE TABLE IF NOT EXISTS 的数据库的连接

我在我的数据库初始化中有这个因此每次检查表是否存在，如果不存在则重新创建它们。然后我可以随时删除并重新创建表格，或者在更新和添加新表格时，它也会检查并添加任何新表格

# c - HDF5 C 代码生成

> ID：11180633
> 
> 赞同：6
> 
> 时间：2012-06-24T19:40:54.997
> 
> 标签：c, api, code-generation, hdf5

我想知道是否有一种工具能够从 C 数据结构生成 C HDF5 读写代码。

我希望该工具能够解析 C 头文件并生成相应的 C HDF5 读/写代码。

可以区分静态分配和动态分配的情况。第一次，我只对静态分配感兴趣。

例如，我想从结构体 sensor_t 的定义中生成以下代码，其中包含一个 int 和两个 double。显示的代码是将 typedef C 结构直接转换为 C HDF5 结构。

```
typedef struct {
    int     serial_no;
    double  temperature;
    double  pressure;
} sensor_t;

#include "hdf5.h"
hid_t memtype;
herr_t      status;
memtype = H5Tcreate (H5T_COMPOUND, sizeof (sensor_t));
status = H5Tinsert (memtype, "serial_no",    HOFFSET (sensor_t, serial_no), H5T_NATIVE_INT);
status = H5Tinsert (memtype, "temperature",  HOFFSET (sensor_t, temperature), H5T_NATIVE_DOUBLE);
status = H5Tinsert (memtype, "pressure",     HOFFSET (sensor_t, pressure), H5T_NATIVE_DOUBLE);

sensor_t    wdata[1];
status = H5Dread (dset, memtype, H5S_ALL, H5S_ALL, H5P_DEFAULT, rdata);
status = H5Dwrite (dset, memtype, H5S_ALL, H5S_ALL, H5P_DEFAULT, wdata); 
```

我看过hdf网站没有成功

[http://www.hdfgroup.org](http://www.hdfgroup.org)

我知道有些人用 Perl 脚本尝试过 HDF4

[http://www.srl.caltech.edu/ACE/ASC/exhdfgen/index.htm](http://www.srl.caltech.edu/ACE/ASC/exhdfgen/index.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:17:58.413

有趣的。在 NetCDF 土地上有["ncgen"](http://www.unidata.ucar.edu/software/netcdf/docs/netcdf/ncgen.html)。NetCDF-4 引入了复合类型的概念。NetCDF4 也可以使用 HDF5 文件格式作为底层容器格式。

因此，它不需要 C 头文件，但“CDL”标记非常简单：

```
netcdf demo {
types:
  compound mything {
    int id ;
    double d1 ;
    double d2 ;
  }; // mything
dimensions:
        d1 = 1 ;
variables:
        mything v1(d1) ;

// global attributes: 
```

然后，您可以从中制作 netcdf C 代码：

```
ncgen -c mine.cdl 
```

这不完全是你想要的。这根本不是你想要的，但它可能是你现在能得到的最接近的。

# javascript - 序列化一个javascript数组

> ID：11180635
> 
> 赞同：3
> 
> 时间：2012-06-24T19:41:16.270
> 
> 标签：javascript, json

我观察到，在 php 中，您可以对数组进行编码，并且生成的 json 不带有方括号。但是，在我的 javascript 数组中，

```
var arrCars = new Array("Toyota", "Mercedes", "BMW");           
        var jsonStr = JSON.stringify(arrCars);
        alert(jsonStr); 
```

我不断得到方括号。我还注意到，如果我使用 json stringfy，

```
var foo = {};  
foo.bar = "new property";  
foo.baz = 3;  

var JSONfoo = JSON.stringify(foo); 
```

我得到了没有正方形的 json，就像我想要的那样。我必须对我的数组做什么才能去掉括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:44:22.853

javascript 中的数组 ( `[]`) 和对象 ( )是有区别的。`{}`您的第一个示例使用数组。您的第二个示例使用了一个对象。主要区别在于，当您有一个数组 ( `[]`) 时，索引只能是从零开始的整数。而对象可以具有字符串的属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:49:10.077

第一个示例中数组`["Toyota","Mercedes","BMW"]`的正确 JSON 是 ，第二个示例中对象的正确 JSON 是`{"bar":"new property","baz":3}`or `{"baz":3,"bar":"new property"}`。

JSON 字符串包含一个对象或一个数组，因此它总是包含大括号`{}`或方括号`[]`。

如果你得到其他任何东西，结果是不正确的。如果你期望别的，你的期望是错误的。

如果你想要大括号而不是方括号，你必须序列化一个对象，而不是一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T20:03:13.093

不知道为什么你不想要括号，因为括号是制作数组文字的正常方法（而不是像你一样使用 Array() 函数，这是老式的）

如果您想要不带括号的 JSON，例如，如果您正在构建更大的 JSON 字符串或其他内容，您可以使用如下内容：

```
function jsonifyArrayWithoutBrackets(a) {
    var output = [];
    for (var i=0; i<a.length; i++)
        output.push(JSON.stringify(a[i]));
    return output.join(',');
} 
```

或者，很明显，只需在使用一次 JSON.stringify() 调用后去掉括号即可。

# jquery - 使用 jQuery 的 CSS 停止灯

> ID：11180639
> 
> 赞同：0
> 
> 时间：2012-06-24T19:41:33.720
> 
> 标签：jquery

我正在尝试创建一个停止灯动画（以红色>黄色>绿色开始的旋转闪烁灯），当我将鼠标悬停在任何灯上时，它会暂停动画并点亮所选灯并显示悬停div。

到目前为止一切正常（尽管我确信代码可以使用一些优化）但是当我将鼠标悬停在任何灯上时，动画不会立即停止。我尝试使用 clearTimeout & clearInternal 但没有任何效果。

jsfiddle：http: [//jsfiddle.net/JZ86B/](http://jsfiddle.net/JZ86B/)

这是我的 jQuery

```
stopLight();

$('[class^="stopLight"]').mouseenter(function(){
     clearTimeout(window.flashLightTimer);
     clearInterval(window.stopLightInterval);
     $(this).css('background-position-x','-106px');
     $(this).find('span').fadeIn('fast');
}).mouseleave(function() {
     $(this).css('background-position-x','0px');         
     $(this).find('span').hide('fast');
     stopLight();
}); 

function stopLight() {
    window.stopLightInterval = setInterval(function() {
        flashLight('red',1000);     
        flashLight('yellow',2000);
        flashLight('green',3000);
    }, 3000);
};

function flashLight (a, b) {
    window.flashLightTimer = setTimeout(function(){
        $(".stopLight-"+a).animate({
            'background-position-x': '-106px'
        }, 0, 'linear')
        .delay(1000)
        .animate({
            'background-position-x': '0px'
        }, 0, 'linear')
    }, b);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:49:09.873

您是否尝试在触发 mouseenter 事件后立即重置所有灯的背景位置？就像是：

```
$(".light div").css('background-position-x','0px'); 
```

您需要进行更多的调整，但这至少会立即“取消”所有其他灯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:11:12.203

这是一个很大的帮助：

[鼠标退出时清除超时](https://stackoverflow.com/questions/9488311/cleartimeout-on-mouse-exit)

这是我的最终代码

```
var timerID = [];

$('[class^="stopLight"]').mouseenter(function() {
    $(this).css('background-position-x', '-106px');
    $(this).find('span').fadeIn('fast');
    for (var i = 0; i < timerID.length; i++) {
        clearTimeout(timerID[i]);
    };
    clearInterval(window.stopLightInterval);    
}).mouseleave(function() {
    $(this).css('background-position-x', '0px');
    $(this).find('span').hide('fast');
    stopLight();
});

function stopLight() {
    window.stopLightInterval = setInterval(function() {
        flashLight('red', 1000);
        flashLight('yellow', 2000);
        flashLight('green', 3000);
    }, 3000);
};

function flashLight(a, b) {
    timer = setTimeout(function() {
        $(".stopLight-" + a).animate({
            'background-position-x': '-106px'
        }, 0, 'linear').delay(1000).animate({
            'background-position-x': '0px'
        }, 0, 'linear')
    }, b);
    timerID.push(timer);
};

stopLight();? 
```

# mysql - 外键创建的差异

> ID：11180642
> 
> 赞同：5
> 
> 时间：2012-06-24T19:41:38.853
> 
> 标签：mysql

`CREATE TABLE`以下两种说法有什么区别？（第一个使用`KEY`，第二个不使用。）

```
CREATE TABLE `title` (
    `title` VARCHAR(255) NOT NULL,
    `order_number` VARCHAR(35) NOT NULL,
    KEY `order_number` (`order_number`),
    CONSTRAINT `order_number_fk` FOREIGN KEY (`order_number`)
        REFERENCES `order` (`order_number`) ON DELETE CASCADE
)

CREATE TABLE `title` (
    `title` VARCHAR(255) NOT NULL,
    `order_number` VARCHAR(35) NOT NULL,
    CONSTRAINT `order_number_fk` FOREIGN KEY (`order_number`)
        REFERENCES `order` (`order_number`) ON DELETE CASCADE
) 
```

他们都创建了有效的表。它们有什么不同，我想使用哪个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T19:46:38.740

它们（几乎*）相同。

创建外键约束时，如果不存在合适的索引，则会自动在引用表的相关列上创建索引。

[从外键约束](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)的手册页：

> InnoDB 需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。**如果引用表不存在，则会在引用表上自动创建此类索引。**如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。index_name，如果给定，如前所述使用。

强调我的。

* * *

(*) 我说的*几乎*一样，因为有一些细微的差别。

**索引名称**

在第一个版本中，您为索引指定了一个明确的名称，但在第二个版本中，索引的名称与约束的名称相同（如果已指定）。

比较`SHOW INDEX`两种情况下的输出：

版本 1：

```
Table Non_unique Key_name Seq_in_index Column_name ...
标题 1 order_number 1 order_number ...

```

版本 2：

```
Table Non_unique Key_name Seq_in_index Column_name ...
标题 1 order_number_fk 1 order_number ...

```

如您所见，这里唯一的区别是索引的名称。

**无声滴**

另一个微妙的区别是，在第二种情况下，正如文档所述，添加新索引时自动创建的索引可能会被静默删除：

> 如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。

这意味着，如果您稍后在以下位置创建多列索引，例如`(order_number, title)`：

```
CREATE INDEX ix_order_number_title ON title (order_number, title); 
```

然后`SHOW INDEX`再次运行：

版本 1：

```
Table Non_unique Key_name Seq_in_index Column_name ...
标题 1 order_number 1 order_number ...
标题 1 ix_order_number_title 1 订单号 ...
标题 1 ix_order_number_title 2 标题 ...

```

版本 2：

```
Table Non_unique Key_name Seq_in_index Column_name ...
标题 1 ix_order_number_title 1 订单号 ...
标题 1 ix_order_number_title 2 标题 ...

```

现在您可以看到第一个版本有两个索引，但第二个版本只有一个。在第二个版本中，由外键约束自动创建的索引在添加多列索引时再次自动删除。通常这不是一个严重的问题，因为新索引使原始索引大多是多余的。

> 我想使用哪个？

通常，您无需担心在外键约束的引用表上显式创建索引。

但在以下情况下，您可能希望显式创建索引：

*   您希望给它一个与约束名称不同的名称，或者
*   当添加其他索引时，您不希望索引静默消失。

# javascript - 当文本框匹配条件时显示 div

> ID：11180643
> 
> 赞同：-2
> 
> 时间：2012-06-24T19:41:39.213
> 
> 标签：javascript, html, input, textbox, show

当文本框的值为（作为示例）“Hello”时，我需要显示一个 div，当然它并不真正需要“Hello”，这只是一个示例。所以，对于 JavaScript，我认为我可以做到这一点，但我对 JavaScript 不是很好，需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:46:03.443

如果没有进一步明确您希望*何时*发生这种情况，我无法提供具体答案，但作为指导，以下内容就足够了：

```
var stringToMatch = 'hello',
    input = document.getElementById('inputElementId'),
    div = document.getElementById('divId');

input.onkeyup = function(e){
    if (this.value == stringToMatch){
        div.style.display = 'block';
    }
    else {
        div.style.display = 'none';
    }
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DzSA7/1/)。

如果您更喜欢不区分大小写的匹配：

```
var stringToMatch = 'hello',
    input = document.getElementById('inputElementId'),
    div = document.getElementById('divId');

input.onkeyup = function(e){
    if (this.value.toLowerCase() == stringToMatch.toLowerCase()){
        div.style.display = 'block';
    }
    else {
        div.style.display = 'none';
    }
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DzSA7/2/)。

参考：

*   [`document.getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById).
*   [`element.onkeyup`](https://developer.mozilla.org/en/DOM/element.onkeyup).
*   [`element.style`](https://developer.mozilla.org/en/DOM/element.style).
*   [`string.toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:53:38.357

也许这就是你要找的。

[http://jsfiddle.net/dvZHx/](http://jsfiddle.net/dvZHx/)

```
<div id="div2show">Show me</div>
<textarea id="text"></textarea>​ 
```

```
input = document.getElementById('text'), div = document.getElementById('div2show');

input.onkeyup = function (e) {
    if (this.value == 'hello') {
        div.style.display = 'block';
    }
};​ 
```

# php - 如何计算多维数组值？

> ID：11180646
> 
> 赞同：3
> 
> 时间：2012-06-24T19:41:57.510
> 
> 标签：php, arrays, recursion, multidimensional-array

我正在用 PHP 构建一个传销软件，它的一个功能是统计下线性能。它从父子关系创建一个数组，如下所示。如何通过第五级获得我的孩子及其孙辈的表现（数组键：积分）？

```
 Array
(
    [children] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [name] => Medvedev
                    [email] => 
                    [points] => 7
                    [children] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 3
                                    [name] => Putin
                                    [email] => 
                                    [points] => 4
                                    [children] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [id] => 5
                                                    [name] => Nathan
                                                    [email] => 
                                                    [points] => 3
                                                )

                                            [1] => Array
                                                (
                                                    [id] => 7
                                                    [name] => George
                                                    [email] => 
                                                    [points] => 666
                                                )

                                        )

                                )

                            [1] => Array
                                (
                                    [id] => 4
                                    [name] => Lucas
                                    [email] => 
                                    [points] => 43
                                )

                        )

                )
        )

    [id] => 27
    [name] => Boss
    [email] => 
    [points] => 99999
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:18:10.570

这应该从像这样的主数组开始以无限深度工作

```
$array = array(
    'children' => array( /* ADD HERE INFINITE COMBINATION OF CHILDREN ARRAY */ ),
    'id' => #,
    'name' => '',
    'email' => '',
    'points' => #
);

function recursive_children_points($arr) {
    global $hold_points;
    if (isset($arr['points'])) {
        $hold_points[] = $arr['points'];
    }
    if (isset($arr['children'])) {
        foreach ($arr['children'] as $children => $child) {
            recursive_children_points($child);
        }
    }
    return $hold_points;
}

$points = recursive_children_points($array);
print "<pre>";
print_r($points);
/**
     // OUTPUT
     Array
(
    [0] => 99999
    [1] => 7
    [2] => 4
    [3] => 3
    [4] => 666
    [5] => 43
)
**/
    print "<pre>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:24:52.853

在我看来，这需要[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)，因为您将对数组的每个平面级别执行相同的操作：添加点。

所以你需要

*   循环遍历每个数组
*   添加找到的点
*   如果我们找到任何孩子，请再做一次，但要使用孩子数组

同时跟踪级别并在达到极限时跳出

考虑到这一点，我想到了以下解决方案：

```
<?php

$values = array();

//first
$values[] = array('name'=>'andrej','points'=>1,'children'=>array());
$values[] = array('name'=>'peter','points'=>2,'children'=>array());
$values[] = array('name'=>'mark','points'=>3,'children'=>array());

//second
$values[0]['children'][] = array('name'=>'Sarah','points'=>4,'children'=>array());
$values[2]['children'][] = array('name'=>'Mike','points'=>5,'children'=>array());

//third 
$values[0]['children'][0]['children'][] = array('name'=>'Ron','points'=>6,'children'=>array());

//fourth
$values[0]['children'][0]['children'][0]['children'][] = array('name'=>'Ronny','points'=>7,'children'=>array());

//fifth
$values[0]['children'][0]['children'][0]['children'][0]['children'][] = array('name'=>'Marina','points'=>10,'children'=>array());

//sixth
$values[0]['children'][0]['children'][0]['children'][0]['children'][0]['children'][] = array('name'=>'Pjotr','points'=>400,'children'=>array());

function collect_elements($base, $maxLevel,$child='children',$gather='points', &$catch = array(), $level = 0) {
/*    I pass $catch by reference so that all recursive calls add to the same array
      obviously you could use it straight away but I return the created array as well
  because I find it to be cleaner in PHP (by reference is rare and can lead to confusion)

  $base = array it works on
  $maxLevel = how deep the recursion goes

  $child = key of the element where you hold your possible childnodes
      $gather = key of the element that has to be collected
*/

  $level++;
  if($level > $maxLevel) return; // we're too deep, bail out

  foreach ($base as $key => $elem) {
    // collect the element if available
    if(isset($elem[$gather])) $catch[] = $elem[$gather];

    /*
    does this element's container have children? 
       [$child] needs to be set, [$child] needs to be an array, [$child] needs to have elements itself
    */
    if (isset($elem[$child]) && is_array($elem[$child]) && count($elem[$child])){
       // if we can find another array 1 level down, recurse that as well  
       collect_elements($elem[$child],$maxLevel,$child,$gather, $catch,$level); 
    }
  }
return $catch;
}

print array_sum(collect_elements($values,5)) . PHP_EOL; 
```

`collect_elements`将收集您感兴趣的元素（直到达到最大深度）并将其附加到平面数组中，以便您可以在返回时对其进行操作。在这种情况下，我们执行[array_sum](http://www.php.net/manual/en/function.array-sum.php)来获取收集的总点数

只有第一个参数是有趣的：

```
collect_elements($base, $maxLevel,$child='children',$gather='points' 
```

非可选： `$base`要处理的数组 `$maxLevel`是函数需要下降到数组中的最大深度可选： `$child`定义包含当前元素（数组）的子元素 `$gather`的元素的键定义包含我们想要的元素的键聚集

其余参数只是用于递归的参数

# iphone - iOS，如何检测用户下拉列表超出第一行？

> ID：11180648
> 
> 赞同：0
> 
> 时间：2012-06-24T19:42:03.773
> 
> 标签：iphone, ios

我有一个包含多行图片的列表，我想要这样的功能，当用户拉下列表时（使用手指向下滑动列表，导致第一行向下一段时间并弹回顶部）我刷新列表.

如何检测用户是否下拉列表超出第一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:42:45.903

为什么要这么努力？ [http://cocoacontrols.com/controls/pull-to-refresh-tableview](http://cocoacontrols.com/controls/pull-to-refresh-tableview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T22:05:01.643

在委托上实现 scrollViewDidScroll: 并检查是否有负 contentOffset。@stavash 是对的，有一些网络代码也可以提供帮助。

# ajax - 在 Ajax 调用结束时刷新 symfony2 中的页面

> ID：11180660
> 
> 赞同：0
> 
> 时间：2012-06-24T19:43:27.970
> 
> 标签：ajax, symfony

如何在执行 ajax 调用后刷新页面。我的 Ajax 调用是

```
 $.ajax({
         type: "POST",
         data: data,
         url:"{{ path('v2_pm_patents_trashpatents') }}",
         cache: false
}); 
```

这个ajax执行的方法是

```
 public function trashpatentAction(Request $request){
    if ($request->isXmlHttpRequest()) {
        $patent_id = $request->get("pid");
        $em = $this->getDoctrine()->getEntityManager();
        $patent = $em->getRepository('MunichInnovationGroupPatentBundle:SvPatents')->find($patent_id);
        if (!$patent) {
            throw $this->createNotFoundException('No patent found for id '.$patent_id);
        }
        $patent->setIs_deleted(1);
        $em->flush();
    }
} 
```

**编辑**

投资组合控制器指数行动

```
public function indexAction(Request $request) {
     $switch_form = $this->createForm(new SwitchPortfolioType($portfolios));
     ////rest of action code
     return $this->render('MunichInnovationGroupPatentBundle:Portfolio:index.html.twig', array('new_patentgroup_form' => $new_patentgroup_form->createView(),'switch_form' => $switch_form->createView(), 'new_form' => $new_form->createView(), "portfolios" => $portfolios ,"selected_portfolio" => $selected_portfolio,"portfolio_groups" => $portfolio_groups,"patents" => $patents));

} 
```

索引.html.twig

```
 <form name="portfolios" action="{{ path('v2_pm_portfolio') }}" method="post" >
            {{ form_widget(switch_form) }}
            <input type="submit"class="portfolio_input button2 tooltip" value="Switch">
 </form> 
```

开关组合类型

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class SwitchPortfolioType extends AbstractType
{
public function __construct($portfolios)
{
    $this->portfolios = $portfolios;
}

public function buildForm(FormBuilder $builder, array $options)
{
    $builder
    ->add('', 'choice', array(
        'choices'   => array(
                'test' => 'Test'
        ),
            'empty_value' => 'Switch your Portfolio',
    ));
}

public function getName()
{
    return 'switch_portfolio';
} 
```

}

在此操作结束时，我想刷新页面

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:52:29.273

刷新必须在 javascript 中完成。我不确定为什么你会通过 ajax 发布只是为了重新加载页面，为什么不只是正常发布呢？

无论如何，按照您的要求，我会在控制器中返回一些简单的 JSON 响应以表示成功，然后在 ajax 回调中执行以下操作：

```
$.ajax({
     type: "POST",
     data: data,
     url:"{{ path('v2_pm_patents_trashpatents') }}",
     cache: false,
     success: function(data) {
         // optionally check if the response is what you wanted
         //if (data.response == 'deleted') {
             document.location.reload(true);
         //}
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:04:51.800

**使用jQuery：**

```
$('your_form').disable=true; 
```

**纯JS：**

```
your_form.disabled = true; 
```

# c# - 使用 Visual Studio IDE 使用 Mono for Android

> ID：11180661
> 
> 赞同：0
> 
> 时间：2012-06-24T19:43:34.360
> 
> 标签：c#, android, mono, monodevelop

我一直在检查是否使用 VS IDE 而不是 Mono，我知道我必须下载 vsprj2me，类似的东西，但找不到任何激活下载。我必须下载它是真的吗？如果是这样，谁能给我一个下载链接？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:02:58.367

默认的 MonoDroid 安装程序会自动执行必要的配置。您只需提供 Android SDK 的路径：http: [//docs.xamarin.com/android/getting_started/installation/Installation_for_Windows#Configuring_Visual_Studio](http://docs.xamarin.com/android/getting_started/installation/Installation_for_Windows#Configuring_Visual_Studio)

# phantomjs - 运行脚本后自动关闭 PhantomJs

> ID：11180662
> 
> 赞同：3
> 
> 时间：2012-06-24T19:43:34.733
> 
> 标签：phantomjs

我想从我的程序运行 PhantomJs 脚本，但由于脚本可能不是我编写的，我需要确保 PhantomJs 在执行完成或因任何原因（例如，无效语法、超时等）失败后退出。到目前为止，我所读到的所有内容都说您必须始终包含指令 phantom.exit() 以便 PhantomJs 退出。有没有办法在执行给定脚本后自动关闭 PhantomJs？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T22:24:42.293

创建一个文件**run-javascript.js**：

```
var system = require('system');

try {
  for (var i=1; i<system.args.length; i++) {
    var scriptFileName = system.args[i];
    console.log("Running " + scriptFileName + " ...");
    require(scriptFileName);
  }
}
catch(error) {
  console.log(error);
  console.log(error.stack);
}
finally {
  phantom.exit();
} 
```

然后运行你的文件**myscript.js**：

```
phantomjs run-javascript.js ./myscript.js 
```

您必须包含**myscript.js**的显式路径，即**./myscript.js**，否则**phantomjs**会将脚本作为模块查找。

这里处理了三种执行场景：

1.  成功执行，在这种情况下，在**finally**子句中调用**phantom.exit() 。**
***   正在运行的脚本出错，在这种情况下，**require**函数会打印堆栈跟踪并返回（不会向调用代码抛出任何错误）。*   运行脚本时出错（例如它不存在），在这种情况下，**catch**子句打印出堆栈跟踪，并且在**finally**子句中调用**phantom.exit() 。****

# php - 阻止来自同一服务器会话的同一请求

> ID：11180665
> 
> 赞同：0
> 
> 时间：2012-06-24T19:44:10.767
> 
> 标签：php, javascript, http, block

这不是真正要解决问题的问题。我想要的只是找出阻止来自同一用户的相同类型的 http 请求的常用方法。

**为什么我需要这个：**

当用户单击按钮时，Ajax 请求会发出，并通过返回结果`append();`
如果用户两次单击按钮（并且如果他快速单击），
则从数据库中获取的结果会搞砸，这不好. 但是，如果用户在第一个请求得到完全处理后单击按钮，则返回的结果很好！

**我认为我能做的：**

1）我可以通过 .js（通过切换 id 或禁用按钮）
来做到这一点 2）我可以通过 php 来做到这一点（我确信有一组功能）
3）或者通过服务器设置来做到这一点（但我对这些几乎一无所知！）

那么，**在处理第一个请求之前，阻止来自同一用户的第二个 http 请求的最佳方法是什么？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:21:01.730

只需禁用按钮或设置一个在执行回调后重新打开的标志。

没有必要使 PHP 过于复杂或弄乱服务器（虽然不确定你的意思）。

# colorbox - 彩盒显示在 iframe 之间加载 GIF

> ID：11180668
> 
> 赞同：0
> 
> 时间：2012-06-24T19:44:41.813
> 
> 标签：colorbox

我正在使用 colorbox 在 iframe 中加载外部页面。当页面正在加载时，您可以看到正在加载的 GIF。到目前为止一切都很好:)

加载页面后，会出现一个带有提交按钮的表单。当我单击该按钮时，它会将第二页加载到同一个 iframe 中。这一切都很好，除了它在第二个外部页面加载时不显示加载 GIF。

有没有办法让我在单击提交按钮时显示它，然后在页面加载后再次隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:20:11.830

行为不同的原因是：iframe 的第一次加载是由 ColorBox 完成的，其中包括显示微调器的代码。第二个事件由（我假设）您的提交按钮触发，因此不会调用 ColorBox 插件。

顺便说一句，这不是严格意义上的 ColorBox 问题，但我建议您研究插件的代码，看看您是否可以重用显示微调器的技术。只是一个想法。

在任何情况下，您都可能需要一些 javascript 来处理微调器显示和事件计时。

# ruby-on-rails-3 - Rails 3 Time.now 没有年份？

> ID：11180670
> 
> 赞同：0
> 
> 时间：2012-06-24T19:44:46.580
> 
> 标签：ruby-on-rails-3, date, time, controller

我有一个 Rails 3 应用程序，它是我们公司的基本 Intranet。我有一个公告控制器，它检查已创建的与当前日期匹配的预定日期的任何公告。

```
class Announcement < ActiveRecord::Base
  scope :active, lambda {
    where("starts_at <= ? AND ends_at >= ?", Time.now.utc, Time.now.utc)
  }
  scope :since, lambda { |hide_time|
    where("updated_at > ? OR starts_at > ?", hide_time.utc, hide_time.utc) if hide_time
  }

  def self.display(hide_time)
    active.since(hide_time)
  end

end 
```

但是，大多数公告将在预定结束日期后一周左右被删除。所有其他公告都是给工作人员的简单的生日快乐消息。由于我们使用公告系统的方式，只检查日/月而不是年似乎是明智的，因为生日消息等将是每年一次。

在我的控制器代码中“忽略”年份的最简单方法是什么？

**更新**

我已将控制器代码更新为以下代码，但是，在结束日期时间之后不再隐藏公告。

```
class Announcement < ActiveRecord::Base
  scope :active, lambda {
  where("day(starts_at) <= ?
         AND month(starts_at) <= ?
         AND day(ends_at) >= ? 
         AND month(ends_at) >= ?",
         Time.now.utc.day,
         Time.now.utc.month,
         Time.now.utc.day,
         Time.now.utc.month)
  }
  scope :since, lambda { |hide_time|
    where("day(starts_at) > ?
           AND month(starts_at) > ?", 
           hide_time.utc.day, hide_time.utc.month) if hide_time
  }

  def self.display(hide_time)
    active.since(hide_time)
  end

end 
```

示例记录：

```
22, 'Test Announcement', 'This is a test announcement, please ignore it. Seriously - stop  reading.', '2012-06-25 13:40:00', '2012-06-25 13:55:00', '2012-06-25 13:47:23', '2012-06-25   13:52:15'); 
```

即使我在日期时间字段的输入选择框中设置了 :exclude_year ，它仍然会放入当前年份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:25:16.307

如果你使用 MySQL 数据库，你可以使用它的 day() 和 month() 方法。我不知道这些方法是否也适用于其他数据库。所以这样做可能会使你的代码变得依赖于数据库服务器。

```
scope :active, lambda {
  where("day(starts_at) <= ?
         AND month(starts_at) <= ?
         AND day(ends_at) >= ? 
         AND month(ends_at) >= ?",
         Time.now.utc.day,
         Time.now.utc.month,
         Time.now.utc.day,
         Time.now.utc.month)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:54:19.880

夫妇的事情。您应该使用 AND 而不是 OR，如果我理解正确，您希望时间介于项目之间。第二件事是您需要指定它是在一天的开始和结束时。现在它只是被设置为现在并没有很清楚地说明 24 小时的范围：

```
 class Announcement < ActiveRecord::Base
  scope :active, lambda {
    where('starts_at < ? AND ends_at > ?', Time.zone.now.end_of_day, Time.zone.now.beginning_of_day)
  }
  scope :since, lambda { |hide_time|
    where('updated_at > ? AND starts_at > ?', Time.zone.now.end_of_day, Time.zone.now.beginning_of_day)
  } 
```

# android - 重新配置现有的 AppWidget

> ID：11180671
> 
> 赞同：0
> 
> 时间：2012-06-24T19:44:52.433
> 
> 标签：android, android-appwidget, htcsense

当我使用默认的 Sense 启动器在 HTC Incredible 2 的主屏幕上单击并按住一个小部件时，我会在屏幕底部看到“删除”和“编辑”的拖动目标。

如何在我自己的小部件中启用“编辑”选项？我只能在创建小部件时运行配置活动，但想使用“编辑”操作重新打开它。此选项是否特定于 Sense 而不是一般的 Android？

更新：我似乎找不到任何适用于 Android < 4.0 的 HTC API 的文档。我还确认此功能仅在 HTC 设备上可用，而且我只看到它对 HTC 小部件有效。所以我认为只能通过仅针对 HTC 设备（愚蠢的想法）或根本不来利用此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:32:20.997

Android AOSP 似乎不支持小部件重新配置。除了初始小部件配置之外，[文档甚至都没有提到它。](http://developer.android.com/guide/topics/appwidgets/index.html#UpdatingFromTheConfiguration)

我记得这个选项只能使用 HTC 的 Sense 手机......无论如何，一些著名的售后市场[似乎也不](https://android.stackexchange.com/questions/6839/how-do-i-configure-existing-power-controls-widget-in-android)支持它，即使是预装的小部件也是如此。

# html - -webkit-linear-gradient 在 Dreamweaver CS6 中不工作

> ID：11180678
> 
> 赞同：1
> 
> 时间：2012-06-24T19:45:47.167
> 
> 标签：html, webkit, adobe, dreamweaver

我多次尝试在 CSS 文档中应用以下代码：

```
display: block;
width: 500px;
margin: 500px auto;
padding: 15px;
text-align: center;
border: 4px solid blue;
background: -webkit-linear-gradient(top,black,white);
outline: 7px solid red; 
```

一切都显示正确，除了渐变。我打开了 CS6 Live View，但它仍然拒绝出现。我在盒子里得到的只是白色背景，而不是黑白渐变。但是，当我在下载的 Coda 2 试用版中键入同一行代码时，它运行良好。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:00:37.287

试试这个：

```
background-image: linear-gradient(top, rgb(0,0,0) 0%, rgb(255,255,255) 100%);
background-image: -o-linear-gradient(top, rgb(0,0,0) 0%, rgb(255,255,255) 100%);
background-image: -moz-linear-gradient(top, rgb(0,0,0) 0%, rgb(255,255,255) 100%);
background-image: -webkit-linear-gradient(top, rgb(0,0,0) 0%, rgb(255,255,255) 100%);
background-image: -ms-linear-gradient(top, rgb(0,0,0) 0%, rgb(255,255,255) 100%);

background-image: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0, rgb(0,0,0)),
    color-stop(1, rgb(255,255,255))
); 
```

来自： http: [//gradients.glrzad.com/](http://gradients.glrzad.com/)

# css - 当使用页面宽度时，它会向下跳而不是创建水平溢出

> ID：11180684
> 
> 赞同：0
> 
> 时间：2012-06-24T19:46:23.413
> 
> 标签：css, scroll, overflow

我的页面上有内容在框中。

它们是这样显示的。

```
Box1  Box2  Box3  Box4 
```

然后，如果我再添加它，它会向下跳并产生垂直溢出。

但我希望它有一个水平滚动条。

这就是包装器在 css 中的方式。

```
#content {
    overflow:auto;
    width:100%;
    height:450px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:49:42.833

我假设你的意思是这样的：http: [//jsfiddle.net/9vvtg/](http://jsfiddle.net/9vvtg/)

只需要添加

```
空白：nowrap；
```

到容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:55:27.070

的宽度`#content`是参考其父级的宽度，很可能是视口。如果您需要水平滚动，请设置显式宽度。如果您知道包含元素的宽度，只需进行数学运算并将宽度设置为匹配，或者懒惰并将其设置为更宽。

```
/* there are four of these */
.insides { 
     width: 200px;
     display: block;
     float: left;
}

#content {
     width: 800px;
} 
```

# java - Java - 字符文件的文件处理

> ID：11180690
> 
> 赞同：1
> 
> 时间：2012-06-24T19:46:50.217
> 
> 标签：java

我有一个包含如下字符的文件：`ABCD...HHCCCCHH..BC`

`H`现在，如果两个字符之间的间隔`H`小于 20 个字符，我想删除两个字符之间的字符。并将输出写入一个新文件。因此，新文件将如下所示：

`ABCD...HH..BC`

这可以快速完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:03:46.853

如果文件可以轻松放入内存，则可以使用 Apache commons-io。

```
String input = FileUtils.readFileToString(new File("inputFile"), "UTF-8");
Pattern p = Pattern.compile("H[^H]{1,19}H");
Matcher m = p.matcher(input);
String output = m.replaceAll("HH");
FileUtils.writeStringToFile(new File("outputFile"), output, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:20:25.477

纯Java代码

```
public static void main(String[] args) throws Exception {

    BufferedReader in=new BufferedReader(new FileReader("d:\\data1.txt"));
    StringBuilder sb=new StringBuilder();
    String line=null;
    while((line=in.readLine())!=null)
        sb.append(line);

    String alteredData=sb.toString().replaceAll("H.{1,19}H", "HH");

    BufferedWriter out=new BufferedWriter(new FileWriter("d:\\data2.txt"));
    out.write(alteredData);

    in.close();
    out.close();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T20:30:07.410

我会将此作为对 John Watts 回答的评论，但它有点太长了......

缓冲 I/O 是 Java 非常高效的。无需将整个文件加载到内存中即可获得不错的性能。假设它是一个面向行的文件，并且模式不跨越行边界，这就足够了：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.util.regex.Pattern;
import java.util.regex.Matcher;

...

BufferedReader r = new BufferedReader(new FileReader(inputFile));
FileWriter w = new FileWriter(outFile);
String line;
Pattern p = Pattern.compile("HH.{1,19}HH");

while (((line = r.readLine()) != null)
{
    Matcher m = p.matcher(line);
    w.write(m.replaceAll("HHHH"));
    w.write('\n');
}

w.close();
r.close();

... 
```

# javascript - 正则表达式匹配模式中的前一个组？

> ID：11180691
> 
> 赞同：13
> 
> 时间：2012-06-24T19:46:50.230
> 
> 标签：javascript, regex

我似乎永远找不到任何关于正则表达式的文档来匹配捕获组作为模式的一部分。例如：

```
(\w\d\w):$1 
```

..应该匹配`a4b:a4b`

`$1`不起作用，但我知道这是类似的东西。有人知道吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T19:48:17.247

在正则表达式模式中，对第一个捕获组的反向引用始终是`\1`，而不是`$1`。

原因：`$`表示正则表达式中的“字符串结尾”（或行尾，取决于上下文）。

在替换模式（不是正则表达式）中，一些方言允许`$1`（例如 .NET、Java、Perl 和 JavaScript），一些允许`\1`（Python 和 Ruby），还有一些允许两者（PHP 和 JGSoft）。

编辑：由于您写道您找不到任何关于此的文档，请查看regular-expressions.info 上的这些概述：

*   [分组和反向引用](http://www.regular-expressions.info/brackets.html)
*   [正则表达式替换语法](http://www.regular-expressions.info/refreplace.html)

# sql-server - 最高效的多对多 Linq 查询

> ID：11180694
> 
> 赞同：0
> 
> 时间：2012-06-24T19:46:59.150
> 
> 标签：sql-server, linq, linq-to-sql, many-to-many

我有以下设置：

表：问题

*   问题 ID

表：问题标签

*   问题 ID
*   标签 ID

表：标签

*   标签 ID
*   标签名称

一个问题可以有很多标签，一个标签可以有很多问题（多对多）

我正在使用 LingToSql。我正在尝试创建一个基于方法的查询，该查询将允许我传入标签名称列表并返回带有这些标签的所有问题。我只是想不通如何做到这一点。

有人可以向我展示一个如何使用基于方法的 Linq 查询的示例吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:48:52.670

```
List<string> tagNames = ...;
var questions = db.Questions.Where(
     q => q.QuestionTags.Any(
          qt => tagNames.Contains(qt.Name))); 
```

理解这一点的难点在于操作符的深层嵌套。过一段时间就自然了。

# c - c函数返回格式化字符串

> ID：11180695
> 
> 赞同：8
> 
> 时间：2012-06-24T19:46:59.953
> 
> 标签：c, string, printf

我想做这样的事情：

```
writeLog(printf("This is the error: %s", error)); 
```

所以我正在寻找一个返回格式化字符串的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T20:29:05.977

鉴于不存在这样的函数，请考虑一种稍微不同的方法：`writeLog`类似于 printf，即采用字符串和可变数量的参数。然后，让它在内部格式化消息。这将解决内存管理问题，并且不会破坏`writeLog`.

如果您发现这可能，您可以使用以下内容：

```
void writeLog(const char* format, ...)
{
    char       msg[100];
    va_list    args;

    va_start(args, format);
    vsnprintf(msg, sizeof(msg), format, args); // do check return value
    va_end(args);

    // write msg to the log
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T19:54:00.417

标准库中没有这样的功能，标准库中也永远不会有。

如果你想要一个，你可以自己写。以下是您需要考虑的事项：

1.  谁将为返回的字符串分配存储空间？
2.  谁将为返回的字符串释放存储空间？
3.  它是否会是线程安全的？
4.  返回字符串的最大长度是否有限制？

# java - 在我的碰撞检测中出现抖动

> ID：11180700
> 
> 赞同：1
> 
> 时间：2012-06-24T19:48:23.063
> 
> 标签：java, math, trigonometry

所以我正在做一个简单的碰撞检测，其中玩家每次更新时都会向下移动 3 而不是在地面上，但是当它在地面上时，它会移动它的位置和地面的差异。但我越来越紧张（它上下移动太多，而且不是完全处于静止状态）。

我的问题是：如何让这段代码正确计算差异？

```
Vector3f pos = new Vector3f(25,-50,25);
//Vector3f pos = new Vector3f(25,-50,25); isn't actually in the update method, 
//but is in the object's constructer.

onGround = false;

Vector3f projPos = new Vector3f(pos);
projPos.y += fallSpeed;
//get a vector of all the triangles touching the player
Vector<Tri> tris = getTrisTouching(pos);

float minY;

//make it so if we don't have a list we don't get tossed into infinity
if(tris.size() > 0) minY = Float.POSITIVE_INFINITY;
else minY = 0;

for(int i = 0; i < tris.size(); i++){
    Tri tri = tris.get(i);
    if(projPos.y + radius <= tri.max.y){

        float difference = tri.min.y - projPos.y;
        if(difference < minY) minY = difference;
        onGround = true;
    }
}

if(onGround){
    pos.y = minY;           
}

else{
    pos.y = projPos.y;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:19:26.390

您的碰撞检测代码（第一个“if”语句中的 3 行）令人困惑，但让我们假设当您在地面上时，玩家没有接触任何三角形（因为它可能在它们上方 1 个像素），所以下一帧你被向下移动，然后下一帧你被向上移动。

一个解决方法可能是在你的 for 循环中使用 projPos 而不是实际位置。

# php - 当涉及两个表时如何检查一行是否存在？

> ID：11180706
> 
> 赞同：-1
> 
> 时间：2012-06-24T19:49:01.903
> 
> 标签：php, mysql

我有两个类似这样的 MySQL 表：

工具所有者：

```
tool_owners_id | user_id | ... 
```

工具：

```
tools_id | tool_owners_id | tool_name | ... 
```

我有 user_id 和工具名称。我需要检查用户是否拥有特定工具。挑战在于这些信息（user_id 和 tool_name）位于单独的表中，其中的行由 tool_owners_id 链接。

如果有人想知道，我无法更改表格的结构。

我问的可能吗？我知道如何做到这一点的唯一方法是进行第一个查询，从 tool_owners 表中获取 tool_owners_id，然后从 tools 表中执行 COUNT(*) 的第二个查询，其中 tool_owners_id = xxx AND tool_name = xxxx。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:52:23.997

使用连接

```
SELECT * 
FROM table1 
LEFT JOIN table2 
    ON table1.tool_owners_id=table2.tool_owners_id 
WHERE table1.user_id=1 
AND table2.tool_name='hammer' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:52:51.900

```
select count(o.*) 
from tool_owners o
inner join tools t on t.tools_owners_id = o.tools_owners_id
where o.user_id = 123
and t.tool_name = 'toolname' 
```

# php - 不知道为什么 Apache 服务器发送 PHP 文件来下载而不是运行它们

> ID：11180707
> 
> 赞同：1
> 
> 时间：2012-06-24T19:49:08.807
> 
> 标签：php, wordpress, apache

Wordpress 的 Apache 和 PHP 文件有问题。

当我转到任何 WP 页面时，浏览器会尝试将 PHP 文件作为静态文件下载。我用它创建了 test.php，`<?php echo 'test'; ?>`它运行正常。

* * *

**解决了！**我发现 php5.conf 被禁用： /etc/apache2/mods-enabled/ **php5.conf.disabled**。PHP在重命名后工作。

* * *

我运行了一个干净的 Debian 6 映像，安装了 Apache 和 PHP 5.3（在 ISPmanager 中），创建了一个启用 PHP 的域，并从共享主机复制了一个 Wordpress 安装。所以这里的一切都来自堆栈，没有修改，应该可以工作。

有一个类似的问题，但没有解决： [为什么浏览器试图下载我的 php 脚本文件？](https://stackoverflow.com/questions/3185272/why-browser-is-trying-to-download-my-php-script-file).

如果有人知道答案，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:53:37.110

您在问号和“php”之间有一个“空格”字符。去掉它。这应该可以解决问题。

如果这没有帮助，请检查 PHP 是否配置正确。打开您的 httpd.conf 文件并检查这些行：

```
LoadModule php5_module php5apache2.so
AddType application/x-httpd-php .php 
AddType application/x-httpd-php-source .phps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:27:08.393

我也为这个问题感到非常沮丧，最后我找到了解决方案。

这是解决方案。

步骤-1：运行此命令。

sudo apt-get install libapache2-mod-php5

步骤-2：启用它。

须藤a2enmod php5

第 3 步：重新启动 apache。

sudo 服务 apache2 重启

注意：有时，当您运行第一个命令时，它将启用并重新启动 apache，然后您不需要运行第 2 步和第 3 步。

如需任何帮助，请写下评论。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:53:31.427

通常是因为代码中存在浏览器无法读取的内容，因此浏览器下载了它，解决方案只是调试您的代码并查看您的问题是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T20:21:59.863

webservers unix 用户是否具有 PHP 文件的执行权限？

如果文件的权限属性为“rwx”，请检查您的 ftp 客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T17:23:08.450

这也可能发生在常规浏览器环境中。如果您有这个问题，您可以尝试在浏览器的地址栏中使用您的本地 IP 地址和 Web 服务器端口。我在地址栏中输入 /var/www/foo.php 时遇到了这个问题。浏览器正在寻找一个本地地址来下载文件。试试 exp 192.168.0.6:80/foo.php。这解决了我的问题。

# qt - Qt 和键盘集成

> ID：11180711
> 
> 赞同：0
> 
> 时间：2012-06-24T19:49:35.737
> 
> 标签：qt

在我的项目中，我将使用一个按钮组（10 个按钮）进行输入（键盘）和 Windows Embedded。我想将 qt 用于 gui，组中的每个按钮都有特殊的任务，就像手机的键盘一样。

如何在 qt 中使用用于普通键盘的函数或类？

# bash - 如何使用间接引用遍历数组？

> ID：11180714
> 
> 赞同：35
> 
> 时间：2012-06-24T19:49:51.683
> 
> 标签：bash, scripting, indirection

我怎样才能使这段代码工作？

```
#!/bin/bash
ARRAYNAME='FRUITS'
FRUITS=( APPLE BANANA ORANGE )
for FRUIT in ${!ARRAYNAME[@]}
do
    echo ${FRUIT}
done 
```

这段代码：

```
echo ${!ARRAYNAME[0]} 
```

打印**苹果**。我正在尝试做类似的事情，但使用“[@]”来迭代数组。

提前致谢，

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-24T20:07:16.443

`${!ARRAYNAME[@]}`表示“的索引`ARRAYNAME`”。如[bash 手册页](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)中所述，因为`ARRAYNAME`已设置，但作为字符串，而不是数组，它返回`0`.

这是一个使用`eval`.

```
#!/usr/bin/env bash

ARRAYNAME='FRUITS'
FRUITS=( APPLE BANANA ORANGE )

eval array=\( \${${ARRAYNAME}[@]} \)

for fruit in "${array[@]}"; do
  echo ${fruit}
done 
```

* * *

您最初尝试做的是创建一个[Indirect Reference](http://tldp.org/LDP/abs/html/bashver2.html#VARREFNEW)。这些是在 bash 版本 2 中引入的，旨在在很大程度上取代`eval`尝试在 shell 中实现类似反射的行为时的需要。

在对数组使用间接引用时，您必须做的是`[@]`在您对变量名的猜测中包含以下内容：

```
#!/usr/bin/env bash

ARRAYNAME='FRUITS'
FRUITS=( APPLE BANANA ORANGE )

array="${ARRAYNAME}[@]"
for fruit in "${!array}"; do
  echo $fruit
done 
```

* * *

综上所述，在这个简单的示例中使用间接引用是一回事，但是，正如 Dennis Williamson 提供的链接中所指出的，您应该对在实际脚本中使用它们犹豫不决。它们几乎可以保证使您的代码比必要的更加混乱。通常，您可以使用关联数组获得所需的功能。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-17T00:56:13.190

这是一种无需评估的方法。

请参阅此处描述的 **Bash 技巧 #2 ：http:** [//mywiki.wooledge.org/BashFAQ/006](http://mywiki.wooledge.org/BashFAQ/006)

似乎在 bash 3 及更高版本中工作。

```
#!/bin/bash

ARRAYNAME='FRUITS'
tmp=$ARRAYNAME[@]
FRUITS=( APPLE BANANA ORANGE "STAR FRUIT" )
for FRUIT in "${!tmp}"
do
    echo "${FRUIT}"
done 
```

这是一个更现实的示例，展示了如何通过引用函数来传递数组：

```
pretty_print_array () {
  local arrayname=$1
  local tmp=$arrayname[@]
  local array=( "${!tmp}" )
  local FS=', ' # Field seperator
  local var
  # Print each element enclosed in quotes and separated by $FS
  printf -v var "\"%s\"$FS" "${array[@]}"
  # Chop trailing $FS
  var=${var%$FS}
  echo "$arrayname=($var)"
}
FRUITS=( APPLE BANANA ORANGE "STAR FRUIT" )
pretty_print_array FRUITS
# prints FRUITS=("APPLE", "BANANA", "ORANGE", "STAR FRUIT") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-05T16:14:11.563

`eval`执行包含数组元素的代码，即使它们包含例如命令替换。它还通过解释其中的 bash 元字符来更改数组元素。

避免这些问题的工具是`declare` **参考**，参见`man bash`声明：

> **-n**为每个名称赋予 nameref 属性，使其成为对另一个变量的名称引用。另一个变量由 name 的值定义。所有对 name 的引用、赋值和属性修改，除了使用或更改 -n 属性本身的那些，都在 name 的值引用的变量上执行。nameref 属性不能应用于数组变量。

```
#!/bin/bash
declare -n ARRAYNAME='FRUITS'
FRUITS=(APPLE BANANA ORANGE "BITTER LEMON")
for FRUIT in "${ARRAYNAME[@]}"
do
    echo "${FRUIT}"
done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-23T23:59:58.287

这个答案来得很晚，但我想有比目前提出的方法更干净的方法（尊重他们的作者）。

它是关于使用/ bash 内置`-n`选项的。（有关更多信息，请在您的 bash 中键入）。`declare``local``help declare`

所以我们开始：

```
ARRAYNAME='FRUITS';
FRUITS=(APPLE BANANA ORANGE);

# This is the critical addition. With help of option `-n` we declare
# variable `fruits` as indirect reference to another variable. Anytime
# we refer to ${fruits} we would actually refer to a variable whose
# name is stored in `fruits` variable:
declare -n fruits="${ARRAYNAME}";

# Here we use ${fruits} as ordinary variable, but in reality it refers
# to `FRUITS` variable:
for FRUIT in ${fruits[@]}; do
    echo "${FRUIT}";
done; 
```

结果是：

```
APPLE
BANANA
ORANGE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T01:59:29.163

尽管有一个简单的 OP 问题，但这些答案不适用于最常见的实际用例，即包含不应扩展为文件名的空格或通配符的数组元素。

```
FRUITS=( APPLE BANANA ORANGE 'not broken' '*.h')
ARRAYNAME=FRUITS
eval ARRAY=\(\${$ARRAYNAME[@]}\)

$ echo "${ARRAY[4]}"
broken
$ echo "${ARRAY[5]}"
config.h
$ 
```

这有效：

```
FRUITS=( APPLE BANANA ORANGE 'not broken' '*.h')
ARRAYNAME=FRUITS
eval ARRAY="(\"\${$ARRAYNAME[@]}\")"

$ echo "${ARRAY[3]}"
not broken
$ echo "${ARRAY[4]}"
*.h
$ 
```

**正如您应该养成使用`"$@"`not的习惯一样`$@`，始终在内部引用`( )`以进行数组扩展，除非您想要文件名扩展或知道数组元素不可能包含空格。**

**做这个：`X=("${Y[@]}")`**

**不是这个：`X=(${Y[@]})`**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-14T19:10:54.490

我认为对他的问题的正确方法和最佳答案与实际的间接引用有关，对提问者的原始代码进行最少的修改，您甚至可以使用关联数组来做到这一点。

**OP 的最少修改代码**

```
declare -n ARRAYNAME='FRUITS'
declare -a FRUITS=( APPLE BANANA ORANGE )
for FRUIT in ${!ARRAYNAME[@]}
do
    echo "${ARRAYNAME[${FRUIT}]}"
done 
```

**输出**

```
APPLE
BANANA
ORANGE 
```

**在关联数组中的用法**

```
declare -A associative_array
declare -n array_name=associative_array
associative_array[kittens]='cat'
associative_array[puppies]='dog'
associative_array[kitties]='cat'
associative_array[doggies]='dog'
for name in ${!array_name[@]} ; do 
echo $name has the value of "${associative_array[$name]}"
done 
```

**输出：**

```
puppies has the value of dog
kittens has the value of cat
kitties has the value of cat
doggies has the value of dog 
```

无需阅读整个 bash 手册页，只需使用内置`help`(

```
$ help help
help: help [-dms] [pattern ...]
    Display information about builtin commands.

    Displays brief summaries of builtin commands.  If PATTERN is
    specified, gives detailed help on all commands matching PATTERN,
    otherwise the list of help topics is printed.

    Options:
      -d    output short description for each topic
      -m    display usage in pseudo-manpage format
      -s    output only a short usage synopsis for each topic matching
            PATTERN

    Arguments:
      PATTERN   Pattern specifying a help topic

    Exit Status:
    Returns success unless PATTERN is not found or an invalid option is given. 
```

)

**声明的用法：**

```
declare: declare [-aAfFgilnrtux] [-p] [name[=value] ...]
    Set variable values and attributes.

    Declare variables and give them attributes.  If no NAMEs are given,
    display the attributes and values of all variables.

    Options:
      -f    restrict action or display to function names and definitions
      -F    restrict display to function names only (plus line number and
            source file when debugging)
      -g    create global variables when used in a shell function; otherwise
            ignored
      -p    display the attributes and value of each NAME

    Options which set attributes:
      -a    to make NAMEs indexed arrays (if supported)
      -A    to make NAMEs associative arrays (if supported)
      -i    to make NAMEs have the `integer' attribute
      -l    to convert the value of each NAME to lower case on assignment
      -n    make NAME a reference to the variable named by its value
      -r    to make NAMEs readonly
      -t    to make NAMEs have the `trace' attribute
      -u    to convert the value of each NAME to upper case on assignment
      -x    to make NAMEs export

    Using `+' instead of `-' turns off the given attribute.

    Variables with the integer attribute have arithmetic evaluation (see
    the `let' command) performed when the variable is assigned a value.

    When used in a function, `declare' makes NAMEs local, as with the `local'
    command.  The `-g' option suppresses this behavior.

    Exit Status:
    Returns success unless an invalid option is supplied or a variable
    assignment error occurs. 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-08T05:12:48.007

我只是想添加另一个有用的用例。我在网上搜索一个不同但相关的问题的解决方案

```
ARRAYNAME=( FRUITS VEG )
FRUITS=( APPLE BANANA ORANGE )
VEG=( CARROT CELERY CUCUMBER )
for I in "${ARRAYNAME[@]}"
do
    array="${I}[@]"
    for fruit in "${!array}"; do
        echo $fruit
    done
done 
```

# r - R：将列表的第二个和第三个值设置为第一个的值

> ID：11180715
> 
> 赞同：-2
> 
> 时间：2012-06-24T19:49:53.320
> 
> 标签：r, equation, repeat

我们得到了一个包含 2 列的数据框，如下所示：这是一个带有值的月份列表，并分配了它们的季度。

```
quarter_number base_quarter 
1            63.44767
1            71.12924
1            95.58290
2            56.85544
2            45.89876
2            47.88994
3            65.54654
... 
```

该季度的数字重复 3 次，然后得到 +1。目的是为一个季度的第二个月和第三个月的每个值设置与第一个相同的值。所以它看起来像这样：

```
quarter_number base_quarter 
1            63.44767
1            63.44767
1            63.44767
2            56.85544
2            56.85544
... 
```

感谢您的提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:35:39.330

使用`ave`：

```
R> set.seed(1)
R> Data <- data.frame(quarter_number=rep(1:3, each=3), base_quarter=10*rnorm(9))
R> Data
  quarter_number base_quarter
1              1    -6.264538
2              1     1.836433
3              1    -8.356286
4              2    15.952808
5              2     3.295078
6              2    -8.204684
7              3     4.874291
8              3     7.383247
9              3     5.757814
R> head1 <- function(x) head(x,1)
R> Data$base_quarter <- ave(Data$base_quarter, Data$quarter_number, FUN=head1)
R> Data
  quarter_number base_quarter
1              1    -6.264538
2              1    -6.264538
3              1    -6.264538
4              2    15.952808
5              2    15.952808
6              2    15.952808
7              3     4.874291
8              3     4.874291
9              3     4.874291 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:26:24.460

我支持 Joran 和 Andrie，最好使用您的代码发布可重现的数据。这是我的方法，解决这个问题

```
set.seed(1)
Dat <- data.frame(number = rep(1:10, each =3), value = rnorm(30))
head(Dat)

  number    value
1      1 -0.62645
2      1  0.18364
3      1 -0.83563
4      2  1.59528
5      2  0.32951
6      2 -0.82047

require(plyr) # for join
join(number = unique(Dat$number)), Dat, match = "first")
Joining by: number
   number     value
1       1 -0.626454
2       2  1.595281
3       3  0.487429
4       4 -0.305388
5       5 -0.621241
6       6 -0.044934
7       7  0.821221
8       8  0.782136
9       9  0.619826
10     10 -1.470752

Dat2 <- join(data.frame(number = unique(Dat$number)), Dat, match = "first")
Result <- Dat2[rep(1:nrow(Dat2), each = 3), ]
head(Result)    

    number    value
1        1 -0.62645
1.1      1 -0.62645
1.2      1 -0.62645
2        2  1.59528
2.1      2  1.59528
2.2      2  1.59528 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:41:15.350

这里有几个很好的答案。这是另一种方式：

```
Data <- data.frame(quarter_number=rep(1:3, each=3), base_quarter=10*rnorm(9))
merge(Data, Data[! duplicated(Data$quarter_number), ], 
      by='quarter_number', suffix=c('.orig', '.first')) 
```

# javascript - 与可编辑对象分组？

> ID：11180719
> 
> 赞同：4
> 
> 时间：2012-06-24T19:50:19.983
> 
> 标签：javascript, fabricjs

有没有办法在 a 中有可编辑的对象`fabric.Group`，以便可以移动其中一个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T20:10:23.947

**注意：**我没有独立测试此代码。

这样的事情可能是一种解决方法，至少我们可以稍微检测到子对象。

```
var $canvas = {};
$canvas.activePaths = [];

function onMouseDown = function (options) {

    var mousePos = canvas.getPointer(options.e);
    mousePos.x = parseInt(mousePos.x);
    mousePos.y = parseInt(mousePos.y);

    var width =  canvas.getWidth();
    var height = canvas.getHeight();

    var pixels = canvas.getContext().getImageData(0, 0, width, height);
    var pixel = (mousePos.x + mousePos.y * pixels.width) * 4;

    var activePathsColor = new fabric['Color']('rgb(' + pixels.data[pixel] + ',' + pixels.data[pixel + 1] + ',' + pixels.data[pixel + 2] + ')');
    var colorHex = '#' + activePathsColor.toHex().toLowerCase();

    var activeObject = canvas.getActiveObject();
    var activePath = [];

    if(activeObject.type == 'group') {

          for (var i = 0; i < activeObject.getObjects().length; i++) {
            var path = activeObject.getObjects()[i];
            if (path.getFill().toLowerCase() == colorHex) {
                $canvas.activePaths.push(path);
            }
        }

    }

}

function warpActiveObject() {
    for(var i = 0; i < $canvas.activePaths.length; i++) {
        canvas.add(
            new fabric.Rect({
                left: $canvas.getActiveObj().left + ($canvas.activePaths[i].left),
                top: $canvas.getActiveObj().top + ($canvas.activePaths[i].top),
                fill: '',
                width: $canvas.activePaths[0].width,
                height: $canvas.activePaths[0].height,
                stroke: 'white', 
                opacity: 0.5 
            })
    );
    }
} 
```

# twitter - 过滤具有已知组 twitter 句柄 id 的哈希标记流？

> ID：11180721
> 
> 赞同：0
> 
> 时间：2012-06-24T19:50:50.247
> 
> 标签：twitter

例如，我有 1000 个 twitter 句柄 ID，我的公司哈希标签是“#test1。有没有一种可能的方法可以让我使用我拥有的 1000 个句柄 ID 过滤 #test1 搜索流。

因此，#test1 的搜索结果将仅包含这 1000 人的推文，而不包含其他任何人。

任何建议表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:22:17.533

您不能将搜索限制在 ID 列表中。还有另外两个选项：

a) 获取这些用户的所有推文并在本地搜索（`statuses/user_timeline`每次调用 200 条推文，单个用户最多 3200 条推文）

b) 将所有已知用户放入列表中（1 个列表中最多 500 个用户）`lists/members/create_al`您可以在单个呼叫中添加多达 100 个 ID。然后用 . 获取他们所有的推文`lists/statuses`。并在本地搜索。这种方法可以节省您的 API 调用，但我不知道您可以获得多少旧推文。

# java - 摆动组件未出现在 JScrollPane 中

> ID：11180722
> 
> 赞同：-1
> 
> 时间：2012-06-24T19:50:57.780
> 
> 标签：java, swing

我正在尝试在可滚动窗格中加载一些图像。但由于某种原因，它没有出现。这是我添加图像的一段代码。

```
 private JFileChooser fileChooser = new JFileChooser(){
        @Override
        public void approveSelection(){
            File files[] = fileChooser.getSelectedFiles();
            JPanel panel = new JPanel(new GridLayout(files.length, 1));
            for(int lop=0; lop< files.length; lop++){

                BufferedImage image = null;
                try {                
                    image = ImageIO.read(files[lop]);
                } catch (IOException ex) {}
                BufferedImage img = new BufferedImage(100, 100, 1);
                Graphics2D g = img.createGraphics();
                g.drawImage(image, 0, 0, 100, 100, null);
                g.dispose();

                ImageIcon icon = new ImageIcon(img);
                JLabel lable = new JLabel(icon);
                panel.add(lable);    

            }
            jScrollPane1.getViewport().add(panel);    
            super.approveSelection();
        }
    }; 
```

使用上面的fileChooser，我选择了一些图像加载到垂直滚动窗格中，不知何故，滚动窗格水平滚动显示长度变化，但滚动窗格中没有内容。请检查以下屏幕截图。在 Shapes 标题下：您将看到一个带有扩展滚动条的空容器

![截屏](../Images/3af843d6417e61b0685c3b1c04b7ec8b.png)

问候， 阿基夫·哈米德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:57:10.883

The problem is with this line of code:

```
jScrollPane1.getViewport().add(new JFrame().add(panel)); 
```

Why do you create a JFrame?

You should just create the JScrollPane like this:

```
jScrollPane = new JScrollPane(panel); 
```

Or set the view of the scrollpane like this:

```
jScrollpane.setViewportView(panel); 
```

Also, you should just use `panel.add(lable)`. The GridLayout will put the label at the appropriate location. And you should not ignore exceptions. Transform the empty catch block to:

```
try {                
    image = ImageIO.read(files[lop]);
} 
catch (IOException ex) {
    throw new RuntimeException(ex);
} 
```

# ruby-on-rails - 文件未使用 Paperclip、Heroku + AWS 永久存储在 S3 上

> ID：11180724
> 
> 赞同：0
> 
> 时间：2012-06-24T19:51:17.033
> 
> 标签：ruby-on-rails, heroku, amazon-s3, amazon-web-services, paperclip

我正在使用带有 heroku 的回形针将照片存储在 AWS 上的 S3 上。一切似乎工作正常，图像出现在我的网站上，但当我从亚马逊仪表板查看 S3 存储桶时，什么也没有显示。它显示桶是空的。然后，当我下一次去我的应用程序时，当我在 heroku 上的开发服务器“旋转”时，图像就消失了。亚马逊似乎没有保留我的图像。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:49:15.890

你的模型填写`has_attached_file`正确了吗？

```
class User < ActiveRecord::Base
  has_attached_file :image,
    :storage => :s3,
    :bucket => ENV['S3_BUCKET_NAME'],
    :s3_credentials => {
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    }
end 
```

请参阅Heroku 的本[教程和](https://devcenter.heroku.com/articles/s3)[config-vars](https://devcenter.heroku.com/articles/config-vars)的本教程。

# android - 如何拦截来电android 2.3.x

> ID：11180727
> 
> 赞同：1
> 
> 时间：2012-06-24T19:51:41.183
> 
> 标签：android

我可以拦截来电和去电。我的问题是它在 2.3.x 版本中不起作用

这是我的代码：

```
public class PhoneCallReceiver extends BroadcastReceiver {

/**
 * Call back which fires off when the phone changes state.  
 */
@Override
public void onReceive(Context context, Intent intent) {

    //TODO
    //===========
    //here i need to chack the number

    //      Bundle b = intent.getExtras();
    //      String incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
    // Additional Step
    // Check whether this number matches with your defined Block List
    // If yes, Reject the Call
    //===========

    /* examine the state of the phone that caused this receiver to fire off */
    String phone_state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if (phone_state.equals(TelephonyManager.EXTRA_STATE_RINGING)) 
    {
        //                    if (context.getSharedPreferences(Hc.PREFSNAME,0).getBoolean(Hc.PREF_CALL_ANSWER_TOOLS_KEY, true))
        //                    {
        logMe("Phone Ringing: the phone is ringing, scheduling creation call answer screen activity");
        Intent i = new Intent(context, CallAnswerIntentService.class);
        i.putExtra("delay", 100L);
        context.startService(i);
        logMe("Phone Ringing: started, time to go back to listening");
        //                    } else {
        //                            logMe("Phone Ringing: Call Answer tools disabled by user");
        //                    }
    }
    if (phone_state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
    {
        //                    if (context.getSharedPreferences(Hc.PREFSNAME,0).getBoolean(Hc.PREF_SCREEN_GUARD_TOOLS_KEY, true))
        //                    {

        //TODO
        Intent i = new Intent(context,InCallScreenGuardService.class);
        i.putExtra("delay", 100L);
        logMe("Phone Offhook: starting screen guard service");
        context.startService(i);
        //                    } else {
        //                            logMe("Phone Offhook: In-Call Screen Guard disabled by user");
        //                    }
    }
    if (phone_state.equals(TelephonyManager.EXTRA_STATE_IDLE))
    {
        //                    if (context.getSharedPreferences(Hc.PREFSNAME,0).getBoolean(Hc.PREF_SCREEN_GUARD_TOOLS_KEY, true))
        //                    {
        //TODO
        Intent i = new Intent(context,InCallScreenGuardService.class);
        logMe("Phone Idle: stopping screen guard service");
        context.stopService(i);
        //                    } else {
        //                            logMe("Phone Idle: In-Call Screen Guard disabled by user");
        //                    }
    }

    return;
} 
```

这发送意图到服务和服务发送意图到以下活动：

```
public class CallAnswerActivity extends Activity {
/**
 * whether or not to use the AIDL technique or 
 * the HEADSET_HOOK/package restart techniques
 */
private static final boolean USE_ITELEPHONY = true;

/**
 * internal phone state broadcast receiver
 */
protected BroadcastReceiver r;

/**
 * TelephonyManager instance used by this activity
 */
private TelephonyManager tm;

/**
 * AIDL access to the telephony service process
 */
private com.android.internal.telephony.ITelephony telephonyService;

// ------------------------------------------------------------------------
// primary life cycle call backs
// ------------------------------------------------------------------------

/**
 * main() :)
 */
@Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    debugLog("onCreate called");
    setContentView(R.layout.callanswerscreen);

    // grab an instance of telephony manager
    tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);

    // connect to the underlying Android telephony system
    if (USE_ITELEPHONY)
        connectToTelephonyService();

    // turn our idle phone state receiver on
    registerReciever();

    // touch screen return button
    Button returnToCallScreen = (Button) findViewById(R.id.returnToCallScreen);
    returnToCallScreen.setOnClickListener(new ReturnButtonOnClickListener());

    // touch screen reject/ignore call button
    Button rejectCall = (Button) findViewById(R.id.rejectCallButton);
    //            if (getSharedPreferences(Hc.PREFSNAME,0).getBoolean(Hc.PREF_ALLOW_REJECT_KEY, true)) 
    rejectCall.setOnLongClickListener(new RejectCallOnLongClickListener());
    //            else 
    //                    rejectCall.setVisibility(View.GONE);                    

    // touch screen answer button
    Button answerButton = (Button) findViewById(R.id.answerCallButton);
    //            if (getSharedPreferences(Hc.PREFSNAME,0).getBoolean(Hc.PREF_ANSWER_WITH_BUTTON_KEY, true)) 
    answerButton.setOnLongClickListener(new AnswerCallOnLongClickListener());
    //            else 
    //                    answerButton.setVisibility(View.GONE);                  
}

/** 
 * (re)register phone state receiver on resume, exit if the phone is idle 
 */
@Override protected void onResume() {
    super.onResume();

    registerReciever();

    if (tm.getCallState() == TelephonyManager.CALL_STATE_IDLE) {
        debugLog("phone is idle, stopping.");
        exitCleanly();
    }
}

/** 
 * unregister phone state receiver, schedule restart if not exiting at the users request 
 */
@Override protected void onPause() {
    super.onPause();

    unHookReceiver();

    if (!isFinishing()) 
    {
        debugLog("system forced pause occured, scheduling delayed restart");
        Intent i = new Intent(getApplicationContext(), CallAnswerIntentService.class);
        i.putExtra("delay", Hc.RESTART_DELAY);
        startService(i);
    }
}

// ------------------------------------------------------------------------
// Input event handler call backs
// ------------------------------------------------------------------------

/** 
 * Track ball press event handler that will answer a call 
 */
@Override public boolean onTrackballEvent(MotionEvent event) {

    switch(event.getAction())
    {
    case MotionEvent.ACTION_MOVE: return true;
    case MotionEvent.ACTION_DOWN: answerCall(); return true;
    default: debugLog("trackball event: "+event);
    }
    return super.dispatchTrackballEvent(event);
}

/**
 * Camera button press event handler that will answer a call
 */
@Override public boolean dispatchKeyEvent(KeyEvent event) {

    switch (event.getKeyCode()) 
    {
    case KeyEvent.KEYCODE_FOCUS: return true;
    case KeyEvent.KEYCODE_CAMERA: answerCall(); return true;
    default: debugLog("Unknown key event: "+event);
    }
    return super.dispatchKeyEvent(event);
}

/**
 * Return button click listener will exit back to the
 * phones stock answer call application.
 */
private class ReturnButtonOnClickListener implements OnClickListener {
    public void onClick(View v) {
        debugLog("returnToCallScreen onClick event");
        exitCleanly();
    }
}

/**
 * Reject button long click listener will reject the
 * incoming call. 
 */
private class RejectCallOnLongClickListener implements OnLongClickListener {
    public boolean onLongClick(View v){
        debugLog("touch screen ignore call button onClick event");
        ignoreCall();
        exitCleanly();
        return true;
    }               
}

/**
 * Answer button long click listener will answer the
 * incoming call.
 */
private class AnswerCallOnLongClickListener implements OnLongClickListener {
    public boolean onLongClick(View v){
        debugLog("touch screen answer button onClick event");
        answerCall();
        return true;
    }               
}

// ------------------------------------------------------------------------
// broadcast receivers
// ------------------------------------------------------------------------

/**
 * register phone state receiver 
 */
private void registerReciever() {
    if (r != null) return;

    r = new BroadcastReceiver() {
        @Override
        public void onReceive(Context c, Intent i)      {
            String phone_state = i.getStringExtra(TelephonyManager.EXTRA_STATE);
            if (!phone_state.equals(TelephonyManager.EXTRA_STATE_RINGING)) 
            {
                debugLog("received "+phone_state+", time to go bye bye, thanks for playing!");
                        exitCleanly();
            }
        } 
    };

    registerReceiver(r, new IntentFilter("android.intent.action.PHONE_STATE"));
}

/**
 * unregister phone state receiver 
 */
private void unHookReceiver() {
    if (r != null) 
    {
        unregisterReceiver(r);
        r = null;
    }
}

// ------------------------------------------------------------------------
// application methods
// ------------------------------------------------------------------------

/** 
 * get an instance of ITelephony to talk handle calls with 
 */
@SuppressWarnings("unchecked") private void connectToTelephonyService() {
    try 
    {
        // "cheat" with Java reflection to gain access to TelephonyManager's ITelephony getter
        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
          telephonyService = (com.android.internal.telephony.ITelephony) m.invoke(tm);
    } catch (Exception e) {
        e.printStackTrace();
        debugLog("FATAL ERROR: could not connect to telephony subsystem");
        debugLog("Exception object: "+e);
        finish();
    }               
}

//
// answer call
//

/** 
 * answer incoming calls
 */
private void answerCall() {
    if (USE_ITELEPHONY)
        try {
            answerCallAidl();
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    else
        answerCallHeadsetHook();

    exitCleanly();
}

/**
 * ACTION_MEDIA_BUTTON broadcast technique for answering the phone
 */
private void answerCallHeadsetHook() {
    KeyEvent headsetHook =  new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_HEADSETHOOK);
    Intent mediaButtonIntent = new Intent(Intent.ACTION_MEDIA_BUTTON);
    mediaButtonIntent.putExtra(Intent.EXTRA_KEY_EVENT, headsetHook);
    sendOrderedBroadcast(mediaButtonIntent, null);
}

/**
 * AIDL/ITelephony technique for answering the phone
 */
private void answerCallAidl() throws RemoteException {
    telephonyService.silenceRinger();
    telephonyService.answerRingingCall();               
}

//
// ignore call
//

/**
 * ignore incoming calls 
 */
private void ignoreCall() {
    if (USE_ITELEPHONY)
        try {
            ignoreCallAidl();
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    else
        ignoreCallPackageRestart();
}

/**
 * package restart technique for ignoring calls 
 */
private void ignoreCallPackageRestart() {
    ActivityManager am = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
    am.restartPackage("com.android.providers.telephony");
    am.restartPackage("com.android.phone");
}

/** 
 * AIDL/ITelephony technique for ignoring calls
 */
private void ignoreCallAidl() throws RemoteException {
    telephonyService.silenceRinger();
    telephonyService.endCall();
}       

/** 
 * cleanup and exit routine
 */
private void exitCleanly() {
    unHookReceiver();
    moveTaskToBack(true);           
    finish();
} 
```

我需要帮助才能使其在 2.3 上运行
谢谢

这个例外：

```
java.lang.SecurityException: Neither user 10156 nor current process has android.permission.MODIFY_PHONE_STATE.
at android.os.Parcel.readException(Parcel.java:1322)
at android.os.Parcel.readException(Parcel.java:1276)
at com.android.internal.telephony.ITelephony$Stub$Proxy.silenceRinger(ITelephony.java:1231)
at com.y_y_full.photo_dailer.CallAnswerActivity.answerCallAidl(CallAnswerActivity.java:281)
at com.y_y_full.photo_dailer.CallAnswerActivity.answerCall(CallAnswerActivity.java:256)
at com.y_y_full.photo_dailer.CallAnswerActivity.access$3(CallAnswerActivity.java:253)
at com.y_y_full.photo_dailer.CallAnswerActivity$AnswerCallOnLongClickListener.onLongClick(CallAnswerActivity.java:181)
at android.view.View.performLongClick(View.java:2556)
at android.widget.TextView.performLongClick(TextView.java:8358)
at android.view.View$CheckForLongPress.run(View.java:9128)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:04:52.903

它在 Gingerbread 2.3.x 中不起作用的原因是[这个 15031 issue](http://code.google.com/p/android/issues/detail?can=1&q=audio%20redirect%20https&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&id=15031)和[15872 issue](http://code.google.com/p/android/issues/detail?can=1&q=15872&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&id=15872) Google 更改了围绕电话权限的框架，这让开发人员很烦恼。虽然不能保证，但一些手机制造商保留了许可（想到的是索尼！），其他人已经从谷歌的 AOSP 中删除了代码，并根据他们的制造过程构建了自己的变体，并更改了框架许可到位。

简单地说，另一种方法是让手机植根并在电话套接字层上创建一个 MITM，并在 Android 堆栈看到事件之前进行拦截……但从表面上看，它太复杂了，不值得做。

现在 ICS 已经推出，并且许可仍然没有改变，所以要记住这一点。与此同时，随着谷歌的前进，GB 源代码被尘封，尽管在 15031 问题页面中“请修复此问题”，但几乎没有什么可以做的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:18:14.610

`MODIFY_PHONE_STATE`权限仅供系统使用，`ITelephony.silenceRinger()`需要`MODIFY_PHONE_STATE`权限。如果需要在通话时使您的手机静音，请使用 AudioManager。但是`EndCall(`）会正常工作。

# assembly - 我如何解释这个 x86_64 汇编操作码？

> ID：11180731
> 
> 赞同：15
> 
> 时间：2012-06-24T19:52:28.490
> 
> 标签：assembly, x86-64

在我的 Mac 上查看一些 x86_64 的汇编代码，我看到以下指令：

```
48 c7 c0 01 00 00 00  movq    $0x1,%rax 
```

但是我在任何地方都找不到分解操作码的参考。似乎 48c7 是一条移动指令，c0 定义了 %rax 寄存器等。

那么，我在哪里可以找到能告诉我所有这些的参考资料？

我知道[http://ref.x86asm.net/](http://ref.x86asm.net/)，但是看着 48 个操作码，我看不到任何类似于移动的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T19:58:01.570

Actually, `mov` is [0xc7](http://ref.x86asm.net/coder64.html#xC7) there; 0x48 is, in this case, a long mode [REX.W prefix](http://wiki.osdev.org/X86-64_Instruction_Encoding#REX_prefix).

Answering also the question in comments: 0xc0 is b11000000\. [Here](http://wiki.osdev.org/X86-64_Instruction_Encoding#64-bit_addressing) you can find out that with `REX.B = 0` (as REX prefix is 0x48, the .B bit is unset), 0xc0 means "RAX is first operand" (in Intel syntax; `mov rax, 1`, RAX is first, or, in case of `mov`, output operand). You can find out how to read ModR/M [here](http://wiki.osdev.org/X86-64_Instruction_Encoding#ModR.2FM).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T12:55:59.343

当您查看二进制文件时

```
 48 c7 c0 01 00 00 00 
```

你需要拆开它才能理解它的含义。

反汇编的算法并不难，但很复杂。它假设查找多个表。

该算法在英特尔开发人员手册第 2 卷中进行了描述，

```
Intel® 64 and IA-32 Architectures
Software Developer’s Manual
Volume 2 (2A, 2B & 2C):
Instruction Set Reference, A-Z 
```

您从名为 的章节开始阅读`INSTRUCTION FORMAT`。

或者，有好书专门讨论这个主题的整章，例如

```
 X86 Instruction Set Architecture, Mindshare, by Tom  Shanley. 
```

一整章专门用于反汇编二进制 X86。

或者您可以从 AMD 制作的同一语言的手册中开始阅读通用算法：

```
AMD64 Architecture
Programmer’s Manual
Volume 3:
General-Purpose and System Instructions 
```

在这里，在本章中，`Instruction Encoding`您将找到定义这种指令语言的自动机，并且从这个图形方案中，您可以轻松编写解码器。

完成此操作后，您可以返回英特尔手册第 2 卷，并将其用作参考书。

我还发现来自[http://opensecuritytraining.info/的](http://opensecuritytraining.info/)[逆向工程课程](http://opensecuritytraining.info/IntroductionToReverseEngineering.html)很有用。这个网站是CMU的博士生做的，大部分做的不是很好，但是需要比较长的时间去学习和应用。

了解基本思想后，您可以查看实现该算法的免费项目。我发现[distorm](https://github.com/gdabah/distorm)项目很有用。一开始不要看抽象项目（如 qemu 或 objdump），这些项目试图在相同的代码中为多种语言实现反汇编程序，因为你会迷失方向。 `Distorm`仅关注 x86 并正确且详尽地实现它。它以形式语言传达了 X86 语言的定义，而 Intel 和 AMD 的手册使用自然语言来定义 X86 语言。

其他运行良好的项目是[udis86](http://udis86.sourceforge.net)。

# .htaccess - 用 get 变量重写 url

> ID：11180736
> 
> 赞同：1
> 
> 时间：2012-06-24T19:52:52.600
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想写`<a href="product.php?id=5">`为 product/5。我不是在谈论用户键入 doamin.com/product/5 以获得结果，我正在寻找的是 - 当用户单击链接时，浏览器地址栏将显示 url作为 domain.com/product/5。

有可能吗？任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:59:03.033

Just write:

```
<a href="/product/5">LINK</a> 
```

What you also need is a **.htaccess** file, that handles **mod_rewrite**, for example:

```
# turn mod_rewrite engine on 
RewriteEngine On

# rewrite all physical existing file or folder
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d

# allow things that are certainly necessary
RewriteCond %{REQUEST_URI} "/css/" [OR]
RewriteCond %{REQUEST_URI} "/images/" [OR]
RewriteCond %{REQUEST_URI} "/images/" [OR]
RewriteCond %{REQUEST_URI} "/javascript/"

# rewrite rules
RewriteRule .* - [L]
RewriteRule (.*) index.php?_route=$1 [QSA] 
```

With you'll get a **$_GET['_route']** which's value will be **/product/5**. The rest is up to your php code to parse that string.

# android - 自定义微调器空指针异常

> ID：11180743
> 
> 赞同：0
> 
> 时间：2012-06-24T19:53:53.240
> 
> 标签：android, custom-component

MySpinner.java

下面是我的自定义适配器

```
public class MyAdapter extends ArrayAdapter<String>
{

public MyAdapter(Context context, int textViewResourceId,String[] objects)
{
    super(context, textViewResourceId, objects);
      // TODO Auto-generated constructor stub
}

public View getDropDownView(int position, View convertView,ViewGroup parent)
{
    return getCustomView(position, convertView, parent);
}

public View getView(int position, View convertView, ViewGroup parent) 
{
    return getCustomView(position, convertView, parent);
}

public View getCustomView(int position, View convertView, ViewGroup parent) 
{
      inflater1=(LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      rowlayout=inflater1.inflate(R.layout.spinnerlayout, parent, false);
      txt1=(TextView)rowlayout.findViewById(R.id.textView1);
      txt1.setText(s[position]);                
      txt1.setTextSize(TypedValue.COMPLEX_UNIT_DIP,DropDownTextSize);
      txt1.setHeight(RowSize);
      return rowlayout;
 } 
```

}

我在另一个项目中制作了自定义微调器，我将其标记为库项目。

假设我有一个线性布局的 main.xml 文件。如果我只向它添加自定义微调器，即使 main.xml 在同一个项目或其他项目中，它也可以正常工作而不会出现任何错误。

但是，如果我将任何其他小部件与自定义微调器一起添加到线性布局，它会给我空指针异常，只有当 main.xml 不在同一个项目中时。

对于同一个项目中的 main.xml，它工作得很好。

1）为什么我的自定义微调器在具有不同目标 api 的项目中的托盘中不可见？

2）在其他项目的 main.xml 中，如果我只添加自定义微调器，它可以正常工作，但如果有任何其他组件，如按钮、textview 等，它会给我一个空指针异常

```
txt1.setText(s[position]); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:02:22.000

您将不得不在调试器中查看它。txt1 为 null 表示您的布局有问题，或者 s 为 null，可能表示适配器尚未初始化。

将代码分解成更小的部分。在单步执行该行之前，检查每行在调试器中使用的任何变量。你的问题会出现。

# ruby-on-rails - RoR 教程第 6 章不断收到语法错误，意外 tIDENTIFIER，期待关键字_end (SyntaxError

> ID：11180744
> 
> 赞同：0
> 
> 时间：2012-06-24T19:53:53.613
> 
> 标签：ruby-on-rails, syntax, syntax-error, railstutorial.org

我不断收到以下错误：

```
syntax error, unexpected tIDENTIFIER, expecting keyword_end (SyntaxError)

    from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
        from /Users/shazias/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

这是我的 user.rb 文件：

```
 class User < ActiveRecord::Base
    attr_accessible :name, :email

    email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

   validates :name,  :presence => true,
                    :length   => { :maximum => 50 }
   validates :email, :presence => true,
                    :format   => { :with => email_regex },
                    :uniqueness => { :case_sensitive => false}
   end

    and my user_spec.rb file: 

       require 'spec_helper'

    describe User do

before(:each) do
    @attr = { :name => "Example User", :email => "user@example.com" }
  end

  it "should create a new instance given valid attributes" do
    User.create!(@attr)
  end

  it "should require a name" do
      no_name_user = User.new(@attr.merge(:name => ""))
      no_name_user.should_not be_valid
  end

  it "should require an email address" do
        no_email_user = User.new(@attr.merge(:email => ""))
        no_email_user.should_not be_valid
  end

  it "should reject names that are too long" do
          long_name = "a" * 51
          long_name_user = User.new(@attr.merge(:name => long_name))
          long_name_user.should_not be_valid
  end

  it "should accept valid email addresses" do
            addresses = %w[user@foo.com THE_USER@foo.bar.org first.last@foo.jp]
            addresses.each do |address|
              valid_email_user = User.new(@attr.merge(:email => address))
              valid_email_user.should be_valid
  end
 end 
  it "should reject invalid email addresses" do
              addresses = %w[user@foo,com user_at_foo.org example.user@foo.]
              addresses.each do |address|
                invalid_email_user = User.new(@attr.merge(:email => address))
                invalid_email_user.should_not be_valid
  end
 end
  it "should reject duplicate email addresses" do
    #Put a user with given email address into the database. 
    User.create! (@attr)
    user_with_duplicate_email = User.new (@attr)
    user_with_duplicate_email.should_not be_valid
  end
end
  it "should reject email addresses identical up to case" do
    upcased_email = @attr [:email].upcase
    User.create! (@attr.merge(:email => upcased_email))
    user_with_duplicate_email = User.new (@attr),
    user_with_duplicate_email.should_not be_valid
  end
end 
```

我真的不知所措..在我将这部分代码添加到 user_spec.rb 文件后（在添加和/或删除我的测试通过的这部分代码之前），我的测试一直失败：

```
 it "should reject email addresses identical up to case" do
    upcased_email = @attr [:email].upcase
    User.create! (@attr.merge(:email => upcased_email))
    user_with_duplicate_email = User.new (@attr),
    user_with_duplicate_email.should_not be_valid
  end
end 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:56:47.353

Directly above this line:

```
it "should reject email addresses identical up to case" do 
```

You have an extra `end` statement in there. That statement should probably be moved to the end of the file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:14:30.737

你使用 ruby​​ 1.9.3

在您的验证中替换：***=>***为***：***

```
validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:42:57.320

你有很多额外的`ENDs`...

当您打开 a`do`时，就像`it "should something" do`您需要用 a 关闭打开`do`一样`end`：

```
it "should something" do
  ...
end 
```

但是，在某些情况下，您要关闭它两次：

```
it "should something" do
  ...
end
end 
```

您修改后的代码应该是：

```
require 'spec_helper'

describe User do
  before(:each) do
  @attr = { :name => "Example User", :email => "user@example.com" }
end

it "should create a new instance given valid attributes" do
  User.create!(@attr)
end

it "should require a name" do
  no_name_user = User.new(@attr.merge(:name => ""))
  no_name_user.should_not be_valid
end

it "should require an email address" do
  no_email_user = User.new(@attr.merge(:email => ""))
  no_email_user.should_not be_valid
end

it "should reject names that are too long" do
  long_name = "a" * 51
  long_name_user = User.new(@attr.merge(:name => long_name))
   long_name_user.should_not be_valid
end

it "should accept valid email addresses" do
  addresses = %w[user@foo.com THE_USER@foo.bar.org first.last@foo.jp]
  addresses.each do |address|
  valid_email_user = User.new(@attr.merge(:email => address))
  valid_email_user.should be_valid
end

it "should reject invalid email addresses" do
  addresses = %w[user@foo,com user_at_foo.org example.user@foo.]
  addresses.each do |address|
  invalid_email_user = User.new(@attr.merge(:email => address))
  invalid_email_user.should_not be_valid
end
it "should reject duplicate email addresses" do
  #Put a user with given email address into the database. 
  User.create! (@attr)
  user_with_duplicate_email = User.new (@attr)
  user_with_duplicate_email.should_not be_valid
end

it "should reject email addresses identical up to case" do
  upcased_email = @attr [:email].upcase
  User.create! (@attr.merge(:email => upcased_email))
  user_with_duplicate_email = User.new (@attr),
  user_with_duplicate_email.should_not be_valid
end 
```

# python - 为什么装饰类会破坏描述符协议，从而阻止 staticmethod 对象按预期运行？

> ID：11180745
> 
> 赞同：9
> 
> 时间：2012-06-24T19:53:57.627
> 
> 标签：python, python-2.7, decorator

我需要一点帮助来理解 Python 中描述符协议的微妙之处，因为它与`staticmethod`对象的行为特别相关。我将从一个简单的示例开始，然后迭代地扩展它，检查它在每个步骤中的行为：

```
class Stub:
    @staticmethod
    def do_things():
        """Call this like Stub.do_things(), with no arguments or instance."""
        print "Doing things!" 
```

此时，它的行为符合预期，但这里发生的事情有点微妙：当您调用 时`Stub.do_things()`，您并没有直接调用 do_things。相反，它`Stub.do_things`指的是一个`staticmethod`实例，它已经将我们想要的函数包装在它自己的描述符协议中，这样你实际上正在调用`staticmethod.__get__`，它首先返回我们想要的函数，*然后*被调用。

```
>>> Stub
<class __main__.Stub at 0x...>
>>> Stub.do_things
<function do_things at 0x...>
>>> Stub.__dict__['do_things']
<staticmethod object at 0x...>
>>> Stub.do_things()
Doing things! 
```

到目前为止，一切都很好。接下来，我需要将类包装在一个装饰器中，该装饰器将用于自定义类实例化——装饰器将确定是允许新实例化还是提供缓存实例：

```
def deco(cls):
    def factory(*args, **kwargs):
        # pretend there is some logic here determining
        # whether to make a new instance or not
        return cls(*args, **kwargs)
    return factory

@deco
class Stub:
    @staticmethod
    def do_things():
        """Call this like Stub.do_things(), with no arguments or instance."""
        print "Doing things!" 
```

现在，自然这部分原样会破坏静态方法，因为该类现在隐藏在它的装饰器后面，即`Stub`根本不是一个类，但它的一个实例`factory`能够`Stub`在您调用它时产生实例。的确：

```
>>> Stub
<function factory at 0x...>
>>> Stub.do_things
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'function' object has no attribute 'do_things'
>>> Stub()
<__main__.Stub instance at 0x...>
>>> Stub().do_things
<function do_things at 0x...>
>>> Stub().do_things()
Doing things! 
```

到目前为止，我了解这里发生了什么。我的目标是恢复`staticmethods`如你所期望的那样运行的能力，即使类被包装了。幸运的是，Python 标准库包含了一个叫做 functools 的东西，它提供了一些专门用于此目的的工具，即，使函数的行为更像它们包装的其他函数。所以我把我的装饰器改成这样：

```
def deco(cls):
    @functools.wraps(cls)
    def factory(*args, **kwargs):
        # pretend there is some logic here determining
        # whether to make a new instance or not
        return cls(*args, **kwargs)
    return factory 
```

现在，事情开始变得有趣了：

```
>>> Stub
<function Stub at 0x...>
>>> Stub.do_things
<staticmethod object at 0x...>
>>> Stub.do_things()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'staticmethod' object is not callable
>>> Stub()
<__main__.Stub instance at 0x...>
>>> Stub().do_things
<function do_things at 0x...>
>>> Stub().do_things()
Doing things! 
```

等等……*什么？* `functools`将静态方法复制到包装函数，但它不可调用？为什么不？我在这里错过了什么？

我正在玩这个，实际上我想出了我自己的重新实现`staticmethod`，让它在这种情况下运行，但我真的不明白为什么它是必要的，或者这是否是这个问题的最佳解决方案. 这是完整的示例：

```
class staticmethod(object):
    """Make @staticmethods play nice with decorated classes."""

    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        """Provide the expected behavior inside decorated classes."""
        return self.func(*args, **kwargs)

    def __get__(self, obj, objtype=None):
        """Re-implement the standard behavior for undecorated classes."""
        return self.func

def deco(cls):
    @functools.wraps(cls)
    def factory(*args, **kwargs):
        # pretend there is some logic here determining
        # whether to make a new instance or not
        return cls(*args, **kwargs)
    return factory

@deco
class Stub:
    @staticmethod
    def do_things():
        """Call this like Stub.do_things(), with no arguments or instance."""
        print "Doing things!" 
```

事实上，它的工作原理完全符合预期：

```
>>> Stub
<function Stub at 0x...>
>>> Stub.do_things
<__main__.staticmethod object at 0x...>
>>> Stub.do_things()
Doing things!
>>> Stub()
<__main__.Stub instance at 0x...>
>>> Stub().do_things
<function do_things at 0x...>
>>> Stub().do_things()
Doing things! 
```

您将采取什么方法使静态方法在装饰类中按预期运行？这是最好的方法吗？为什么内置的静态方法不`__call__`自己实现，以便它可以正常工作而不大惊小怪？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T00:32:03.450

问题是您正在将类型`Stub`从类更改为函数。这是一个非常严重的违规行为，事情发生了也就不足为奇了。

`staticmethod`您的 s 破坏的技术原因是通过将 s等（来源：[http](http://hg.python.org/cpython/file/3.2/Lib/functools.py) ://hg.python.org/cpython/file/3.2/Lib/functools.py ）从包装实例`functools.wraps`复制到包装器`__name__`，同时从包装实例的. 现在应该很明显为什么不起作用 - 它的描述符协议是在函数而不是类上调用的，所以它放弃返回绑定的可调用对象，而只返回其不可调用的自身。`__doc__``__module__``__dict__``__dict__``staticmethod`

wrt 实际上在做你感兴趣的事情（某种单例？），你可能希望你的装饰器返回一个`__new__`具有所需行为的类。您不必担心`__init__`被称为不需要，只要您的包装类`__new__`实际上没有返回包装类类型的值，而是包装类的实例：

```
def deco(wrapped_cls):
    @functools.wraps(wrapped_cls)
    class Wrapper(wrapped_cls):
        def __new__(cls, *args, **kwargs):
            ...
            return wrapped_cls(*args, **kwargs)
    return Wrapper 
```

请注意装饰器的参数`wrapped_cls`（在包装类中变得封闭）和.`cls``Wrapper.__new__`

请注意，`functools.wraps`在包装类的类上使用是完全可以的——只是不能在包装函数的类上使用！

您还可以修改包装类，在这种情况下您不需要`functools.wraps`：

```
def deco(wrapped_cls):
    def __new__(cls, *args, **kwargs)
        ...
        return super(wrapped_cls, cls)(*args, **kwargs)
    wrapped_cls.__new__ = classmethod(__new__)
    return wrapped_cls 
```

但是请注意，此方法最终*会*在现有实例上调用`__init__`，因此您必须解决这个问题（例如，通过包装`__init__`到现有实例上的短路）。

作为附录：在您知道的情况下，您可能需要付出很多努力才能使您的 function-wrapping-a-class 装饰器工作，但您仍然会遇到问题 - 例如，`isinstance(myObject, Stub)`没有机会作为`Stub`不再是一个`type`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:42:04.453

你几乎做了我应该做的事：

```
def deco(cls):
    class factory(cls):
        def __new__(cls_factory, *args, **kwargs):
            # pretend there is some logic here determining
            # whether to make a new instance or not
            return cls.__new__(*args, **kwargs)
    return factory 
```

应该这样做。问题可能是`__init__`在由`__new__`.

# hibernate - NHibernate：（一或零）到（一或零）映射

> ID：11180747
> 
> 赞同：4
> 
> 时间：2012-06-24T19:54:14.770
> 
> 标签：hibernate, nhibernate, nhibernate-mapping, hibernate-mapping

我有两个实体，`Foo`就像`Bar`这样：

```
public class Foo
{
    public virtual Guid FooID { get; set; }
    public virtual Bar MyBar { get; set; }
}

public class Bar
{
    public virtual Guid BarID { get; set; }
    public virtual Foo MyFoo { get; set; }
} 
```

这两个实体可以彼此独立存在，但有时它们是相关的，当这种情况发生时，我想确保它们在持久层中链接。

我希望我的表类似于：

```
create table Foo (
    FooID int primary key,
    -- other stuff
);

create table Bar (
    BarID int primary key,
    FooID int null references Foo(FooID) on delete no action on update no action
); 
```

...并且 NHibernate 能够创建它们之间的关系。

我将如何映射这个（首选 XML）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T21:44:35.170

所以@JBNizet 以他讽刺和讽刺的方式指出，就 Hibernate 和 NHibernate 而言，零或一到零或一的关系被认为是可以为空的双向一对一关系；因此，根据[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-bidirectional-121](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-bidirectional-121)，映射将是这样的：

```
<class name="Foo">
    <id name="FooID" column="FooID">
        <generator class="guid" />
    </id>
    <one-to-one name="MyBar" property-ref="MyFoo" />
</class>

<class name="Bar">
    <id name="BarID" column="BarID">
        <generator class="guid" />
    </id>
    <many-to-one name="MyFoo" column="FooID" unique="true" not-null="false" />
</class> 
```

（......我认为。欢迎进行澄清的编辑。）

# oop - 包装集合元素

> ID：11180749
> 
> 赞同：3
> 
> 时间：2012-06-24T19:54:30.437
> 
> 标签：oop, design-patterns

这是一个设计问题，我将尽可能清楚地描述它，但我不确定如何称呼我面临的问题。

我正在开发一款视频游戏，设置和玩游戏涉及多个步骤。我想将这些步骤中的每一个都包装在某种对象中，以保持一切清洁。

我选择将游戏流程拆分为会话、回合和生成。游戏的会话是最高范围级别，您可以配置哪些玩家处于活动状态（通过加入屏幕）然后继续开始一轮。您可以在单个会话中进行多轮比赛，并且每一轮都将继承全局会话数据。同样，您可以在每一轮中多次死亡和重生，从轮次和会话中继承数据。

所以想象某种免费的。

*   第 1 节
*   第 2 节
    *   A轮
    *   B轮
        *   产生 1
        *   产卵 2
    *   C轮
*   第三节

Spawn 1 将有权访问 Round B 和 Session 2 的数据。

这似乎是一个非常干净的设计。我可以将会话范围的数据保存在一个地方，并使该对象在整个会话期间保持活动状态，每一轮都分支并继承这些数据。

现在有趣的问题。就像我之前说的，会话包含一组玩家（加入游戏并在整个会话期间处于活动状态的玩家）。回合还需要保留一些关于每个玩家的额外数据，但这些数据只存在于回合内（例如最后一个生成点，或当前分数）。我想遵循相同的模式并创建另一个类，该类将保存此轮特定数据。

这在维护集合时出现故障。因为会话包含玩家的权威列表，并且每一轮都提供额外的附加数据，所以该轮是否应该只更新 SessionPlayer 的成员？回合是否应该有自己的球员名单，每个球员都有回合级别的数据和指向会话级别数据的指针？它们是否应该包含具有匹配 ID 的单独集合？

这似乎可以通过一种巧妙的设计模式来解决，但我一直找不到。

总结一下：如何临时包装一个包含集合的对象，同时包装该集合的所有元素？

我希望我解释得当。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:38:31.427

首先回答你的最后一个问题：

> 总结一下：如何临时包装一个包含集合的对象，同时包装该集合的所有元素？

这可以通过[复合设计模式](http://en.wikipedia.org/wiki/Composite_pattern)来实现，其中类包含自身的元素，并且该类可以是独立的，也可以是容器。对此类的操作将对其自身及其包含的每个元素起作用。

关于您之前关于将播放器存储在哪里的问题，这有点困难，但您在决定时应该考虑以下几点：

*   玩家数据确实应该都在一个地方。如果你将它的所有权分离到不同的对象，那是一个混乱的设计并且难以维护。
*   尽量避免在依赖层次结构（Session、Round、Spawn）中来回使用指针/引用，因为这会很快变得非常复杂，并且它将不再是依赖层次结构，而是由非常高的相互交织的类组成的扭曲混乱耦合。
*   如果依赖层次结构的所有级别都需要玩家数据，那么它应该包含在有意义的地方，并且层次结构的所有级别都可以轻松访问。如果是这种情况，您还应该考虑问自己是否真的有必要让所有级别都需要了解玩家数据。

如果绝对有必要拥有这些双向引用，那么实现它的最佳方法可能是使用[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)。这将简化维护双向引用所涉及的典型难题。尝试只注入所需的最具体的实体，而不仅仅是整个根级对象，如 Session。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:24:11.140

所以有 SessionPlayer 和 RoundPlayer 类。让 RoundPlayer 成为 SessionPlayer 的非静态成员类怎么样？这样，您可以维护 2 个不同的集合，1 个用于 Session，1 个用于 Round，其中 RoundPlayer 隐式引用了 SessionPlayer。

# google-maps - 在 AngularJS 中初始化谷歌地图

> ID：11180750
> 
> 赞同：27
> 
> 时间：2012-06-24T19:54:33.130
> 
> 标签：google-maps, angularjs

我正在考虑从backbonejs 迁移到angularjs。

在主干中，我能够初始化一个视图，此时我创建了一个谷歌地图的实例。然后我可以平移/缩放/等并在视图之间切换，而不会丢失地图的当前状态。

使用 angularjs 给出以下内容：

布局.html

```
<body>
  <div class="container-fluid" ng-view></div> 
```

地图.html

```
<div id="map_canvas" ng-controller="MapCtrl"></div> 
```

我能够创建一个指令来渲染地图就好了。问题是每次我切换回地图视图时它都会重新加载地图。

```
<map></map> 
```

因此，根据我对 Angular 的了解，我想我会创建一个 MapController 并在那里初始化地图。没有成功。

底线是我需要异步初始化一个谷歌地图并将数据推送到本地或远程，并且能够导航应用程序而无需每次都从头开始重新加载地图。

有人可以提出正确的方法吗？

谢谢 ：）

**尝试根据安迪乔斯林的建议：**

**在 app.js 中：**

```
// Generated by CoffeeScript 1.3.3
(function() {
  "use strict";

  angular.module("ofm", ["ofm.filters", "GoogleMaps", "ofm.directives"]).config([
    "$routeProvider", "$locationProvider", function($routeProvider, $locationProvider) {
      $routeProvider.when("/", {
        templateUrl: "partials/home"
      }).when("/map", {
        templateUrl: "partials/map",
        controller: MapCtrl
      }).otherwise({
        redirectTo: "/"
      });
      return $locationProvider.html5Mode(true);
    }
  ]);

}).call(this); 
```

**在 services.js 中：**

```
angular.module('GoogleMaps', []).
  factory('wasMapInitialized', function() {
    console.log("inside service");
    var maps = 0;

    if (!maps) {
      maps += 1;
      return 0;
    } else {
      return 1;
    }
  }); 
```

**在 controllers.js 中：**

```
function MapCtrl($scope) {
  if (!GoogleMaps.wasMapInitialized()) {
    var lat = 46.87916;
    var lng = -3.32910;
    var map_id = '#map';
    initialize(map_id, lat, lng);
  }
  function initialize(map_id, lat, lng) {
    var myOptions = {
      zoom : 8,
      center : new google.maps.LatLng(lat, lng),
      mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map($(map_id)[0], myOptions);
  }
} 
```

**在 map.html 中**

```
#map
<div ng-controller="MapCtrl"></div> 
```

**我收到错误：未知提供者：GoogleMapsProvider <- GoogleMaps**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T21:13:42.490

由于视图会在视图更改时创建和销毁控制器，因此您希望地图数据保留在其他地方。尝试创建一个将存储数据的 GoogleMap 服务。

```
myApp.factory('GoogleMaps', function() {
  var maps = {};

  function addMap(mapId) {
    maps[mapId] = {};
  }
  function getMap(mapId) {
    if (!maps[mapId]) addMap(mapId);
    return maps[mapId];
  }

  return {
    addMap: addMap,
    getMap: getMap
  }
});

function MyController($scope, GoogleMaps) {
  //Each time the view is switched to this, retrieve supermanMap
  $scope.map = GoogleMaps.getMap('supermanMap');

  $scope.editMap = function() {
    $scope.map.kryptonite = true;
  };
} 
```

如果你不喜欢这个解决方案，还有其他一些方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:13:15.710

这就是我在 Backbone 中所做的，以保留视图而不是破坏它。假设你有一个 id="container" 的 div 并且你的路由器有相应的路由。

```
routes: {
    "":"home",
    "map": "showMap"
},

showMap: function() {
    $("#container").children().detach();
    if(!this.mapView) {
        this.mapView = new MapView(); 
        this.mapView.render();
    }
    $("#container").html(this.mapView.el);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T15:34:50.210

这是我将 maps api 与 Angularjs routeProvider 一起使用的解决方案：在您的索引中，您必须添加：

angular-google-maps.min.js 和 lodash.min.js

在 application.js 中：

```
(function() {

var app = angular.module("myApp", ["ngRoute", "uiGmapgoogle-maps"]);

app.config(function(uiGmapGoogleMapApiProvider) {
    uiGmapGoogleMapApiProvider.configure({
        key: 'YOUR KEY HERE',
        v: '3.17',
        libraries: 'weather,geometry,visualization'
    });
});

app.config(function($routeProvider) {
    $routeProvider
        .when("/home", {
            templateUrl: "home.html",
            controller: "HomeController"
        })
        .when("/workwith", {
            templateUrl: "workwith.html",
            controller: "WorkwithController"
        })

    .otherwise({
        redirectTo: "/home"
    });

}); 
```

})();

最后但并非最不重要的是在您的控制器中：

```
(function() {
var app = angular.module("myApp");
var MyController = function($scope, $http, $log, $location, $routeParams, uiGmapGoogleMapApi) {
    $log.info("MyController");
    $log.info($routeParams);

    // Define variables for our Map object
    var areaLat = 44.2126995,
        areaLng = -100.2471641,
        areaZoom = 3;

    uiGmapGoogleMapApi.then(function(maps) {
        $scope.map = {
            center: {
                latitude: areaLat,
                longitude: areaLng
            },
            zoom: areaZoom
        };
        $scope.options = {
            scrollwheel: false
        };
    });    
 };
app.controller("MyController", MyController); 
```

})();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-15T01:05:11.377

嗨拉里艾特尔和大家，我有以下方法：

首先，我们需要创建一些全局变量：

```
var mapGlobal, flag=0, CurrentmapNode; 
```

然后在`Controller`：

```
 function MapCtrl($scope) {
    var lat = 46.87916;
    var lng = -3.32910;
    var map_id = '#map';

     if (flag==0)
       initMap(mapId, lat, lng);
     else
       reinitMap(mapId);

  function initMap(map_id, lat, lng) {
    var myOptions = {
      zoom : 8,
      center : new google.maps.LatLng(lat, lng),
      mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    mapGlobal = new google.maps.Map($(map_id)[0], myOptions);

    if (typeof mapGlobal != 'undefined')
       flag=1;
  }

  function reinitMap(mapId){
     $(mapId)[0].append(CurrentmapNode);
   }

   $scope.$on("$destroy", function(){
        CurrentmapNode = mapGlobal.getDiv(); //save current map in an auxiliar variable
   });

} 
```

“on destroy”函数将当前地图状态保存在另一个全局变量中，然后，当重新创建视图时，我们不需要创建另一个地图实例。

每次重新创建视图时，创建另一个地图实例可能会导致内存泄漏并增加 Google 地图 API 的使用。

此致

# c# - 没有 MediaTypeFormatter 可用于读取“InventoryItem”类型的对象

> ID：11180752
> 
> 赞同：8
> 
> 时间：2012-06-24T19:55:05.587
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

AJAX 调用

```
$.ajax({
    url: '/api/Inventory',
    cache: false,
    type: 'POST',
    data: json,
    contentType: 'application/json, charset=utf-8',
    statusCode: {
        201: function (data) {
            console.log(data);
            viewModel.items.push(data);
        }
    }
}); 
```

发送数据 ( `json`) / 请求负载

```
{"Id":0,"Upc":"3456789012","Quantity":"200","Category":"Vodka","TransactionType":"Audit","MetaData":"ABSOLUT 750ml"} 
```

**响应错误**

> 没有 MediaTypeFormatter 可用于从媒体类型为“未定义”的内容中读取类型为“InventoryItem”的对象。”

路由 POST 方法

```
public HttpResponseMessage PostItem(InventoryItem item) 
```

JSON 字符串中的所有属性都存在于`InventoryItem`模型中。

关于复杂类型的**[类似问题](https://stackoverflow.com/questions/10934077/upgrading-to-mvc4-rc-no-mediatypeformatter-is-available-to-read-an-object-of-ty)**建议从 Beta 升级到 RC 以修复模型绑定更改，我已经这样做了。

如果问题不明显，我该如何纠正这个错误？如果我将 [FromUri] 属性添加到 Routed POST 方法，则 AJAX 调用会正确路由，但`InventoryItem`. 如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-24T19:58:37.180

```
contentType: 'application/json, charset=utf-8', 
```

should be:

```
contentType: 'application/json; charset=utf-8', 
```

Notice the usage of `;` instead of `,` which is the correct separator between the content type and the charset. Also if you follow standard RESTful conventions your controller action should be called `Post` and not `PostItem` as you have shown:

```
public HttpResponseMessage Post(InventoryItem item)
{
    ...
} 
```

# css - 使用两个带有 * 的 css 属性选择器

> ID：11180757
> 
> 赞同：0
> 
> 时间：2012-06-24T19:55:47.873
> 
> 标签：css, css-selectors

我有以下四种不同类型的身体标签情况：

```
<body class= 'not-front logged-in page-calendar two-sidebars page-calendar-practices-2012-06 section-calendar admin-menu'>

<body class= 'not-front logged-in page-calendar two-sidebars page-calendar-practices section-calendar admin-menu'>

<body class= 'not-front logged-in page-calendar two-sidebars page-calendar-practices-2012-06-games section-calendar admin-menu'>

<body class= 'not-front logged-in page-calendar two-sidebars page-calendar-practices-all-games section-calendar admin-menu'> 
```

我想编写一个css选择器，它将选择前两个body标签案例中的一个而不是最后两个，另一个选择器将单独选择最后两个body标签案例。我可以为第二种情况做这样的事情吗？我怎么写第一个案例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T19:58:45.173

根据您的评论描述，您正在寻找以下选择器：

```
body:not([class*="-games"]) 
```

[请`:not`](https://developer.mozilla.org/en/CSS/%3anot)参阅[伪类](https://developer.mozilla.org/en/CSS/%3anot)和[属性选择器](https://developer.mozilla.org/en/CSS/Attribute_selectors)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T20:20:23.363

四个示例中的每一个都只有 1 个 CSS 类。他们每个人都有以下 4 个类之一：

```
page-calendar-practices-2012-06
page-calendar-practices
page-calendar-practices-2012-06-games
page-calendar-practices-all-games 
```

基于此，选择前两个：

```
.page-calendar-practices-2012-06,
.page-calendar-practices {...} 
```

并选择最后两个：

```
.page-calendar-practices-2012-06-games,
.page-calendar-practices-all-games {...} 
```

**编辑：**

更普遍地应用它（类似于@Rob W's answer）。

```
/* First two, if -games doesn't appear anywhere */
body[class*="page-calendar-practices"]:not([class*="-games"]) {...}

/* Last two, if -games does appear somewhere */
body[class*="page-calendar-practices-"][class*="-games"] {...} 
```

不幸的是，使用`[class$="-games"]`不起作用。类属性被视为具有此类选择器的任何其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:13:21.973

你总是可以链接它们而不是使用选择器。注意：我在这里使用了你所有的课程，但这些都是很长的陈述，可以/应该减少，但你必须自行决定这样做。

```
.not-front.logged-in.page-calendar.two-sidebars.page-calendar-practices-2012-06.section-calendar.admin-menu,
.not-front.logged-in.page-calendar.two-sidebars.page-calendar-practices.section-calendar.admin-menu{}

.not-front.logged-in.page-calendar.two-sidebars.page-calendar-practices-2012-06-games.section-calendar.admin-menu,
.not-front logged-in.page-calendar.two-sidebars.page-calendar-practices-all-games.section-calendar.admin-menu{} 
```

# database - stxxl map

> ID：11180762
> 
> 赞同：0
> 
> 时间：2012-06-24T19:56:50.713
> 
> 标签：database, indexing, spatial, stxxl

I am looking for a storage to index points in 2 dimensions. To be more specific, I would like to store the geometry of ways (or edges) in OpenStreetMap and have it searchable. Queries to the storage would be looking up geometry based on two endpoints of a way. This query would be run to reconstruct the geometry of a path found by an algorithm similar to Dijkstra, so the speed of geometry lookup is important.

Nodes in my case are just unsigned ints and geometry can be encoded as a string or as a vector of points, either way would work.

The number of nodes would be around 1 billion so keeping everything in memory does not work, so it would be nice to find an external or disk based storage.

I have already tried Stxxl but it doesn't seem to support non-POD types like string or vectors as values.

Thanks for suggestions in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:09:53.633

您可以通过维护两个单独的向量来模拟类似地图的行为。比如说，你有两`<key, value>`对`<0, "hello">`, `<1, "world">`。然后第一个`vector (of char)`包含，

```
h, e, l, l, o, \0, w, o, r, l, d, \0 
```

第二个`vector (of pair of two 'size_type's)`包含每个这样的`begin position`和，`one past end position``string`

```
<0, 6>, <6, 12> 
```

如您所见，后面的不是必需`"world"`的`"hello"`。这样，对于任何新 `<key, value>`对，您只需更新第二个向量中的***开始和结束位置***（*索引访问*），然后将值放在第一个向量的***末尾***（*不需要移位*）。

编辑：代替`vector (of pair of two 'size_type's)`，您还可以使用`map< int, pair<size_type, size_type> >`which 弥补了我猜的更好的解决方案。任你选。

# git - 是否可以分段推送 git 存储库？

> ID：11180763
> 
> 赞同：0
> 
> 时间：2012-06-24T19:57:00.090
> 
> 标签：git, push, commit, refspec

我现在的连接速度非常慢，我需要将一个新分支推送到我公司的 git 服务器中。使用 SVN，如果我愿意，我可以一次将文件提交/推送到远程 SVN 服务器。过去，当我的连接速度很慢时，我可以一次上传一个文件夹，效果很好。我当然可以在 git 中使用类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:28:45.083

当您执行 git-push(1) 时，手册中说：

> 通常`<src>`是您想要推送的分支的名称，但它可以是任意的“SHA-1 表达式”，例如 master~4 或 HEAD（参见 gitrevisions(7)）。

因此，您应该能够通过按时间顺序组织单个提交到远程，然后在详细的 refspec 中指定每个提交。例如：

```
# Get all commits not in remotes/origin/master and
# sort in chronological order.
commits_list=$(
    git log --oneline --reverse refs/remotes/origin/master..HEAD | 
    awk '{print $1}'
)

# Push each commit one-by-one to origin/master.
for commit in $commits_list; do
    git push origin $commit:refs/heads/master
done 
```

我在本地对此进行了测试，它似乎按预期工作。试试看; 如果不出意外，它会让你指向正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:06:33.987

如果您的分支由许多小提交组成一个大更改，您可以通过分阶段推送提交来实现这一点。也许从您的代码与公司服务器上的代码不同的点开始创建一个新分支，然后分阶段从您的分支中提取提交范围，并在提取每个范围后推送。

但是推送单独的文件夹/文件 - 我很确定这是不可能的：它违反了 git 的要求，即提交是一个原子实体。

# javascript - Accessing,filling and submitting a form using the URL it resides on from another form using javascript or jquery

> ID：11180765
> 
> 赞同：1
> 
> 时间：2012-06-24T19:57:19.993
> 
> 标签：javascript, jquery

I have a blog (Blogger). I want to make a contact form. I made it using google forms. However the theme is not matching with my blog. Also I cannot customize that form. so what i thought is to build my own form. So when a user fills and submits the form i shall fill the google form (that has got a url) with the same and submit.

So my question is: Is it possible to access, fill and submit one form through its URL from another form using javascript or jquery. I know that we can fill a form or access elements of a form using javascript and also submit it FROM THE SAME FORM. But here the requirement is like Form A will be filled and submitted that will trigger a javascript function which using the URL, of say Form B, fill that form and hit the submit button of that form.

Kindly provide the solution. Thanks and Regards. Daniel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:32:17.687

这是不可能的。相反，您可以复制此表单并查看它提交到的位置等。另一种选择是获取表单 html 并使用自定义样式将其添加到您的页面中。

# c++ - 为 WH_MOUSE 设置 WindowsHookEx

> ID：11180773
> 
> 赞同：5
> 
> 时间：2012-06-24T19:58:01.103
> 
> 标签：c++, mouse, hook

我手中有一些代码可以在全局范围内打印鼠标的坐标（使用 WH_MOUSE_LL）。我的目标是使用 WH_MOUSE 而不是 WH_MOUSE_LL 因为（根据我的阅读）它更快。我在论坛上读过，当使用 WH_MOUSE 时，需要在 DLL 中声明它以实现全局效果，但是，当在程序中使用时，它应该在声明它的应用程序上工作，但它不起作用（它什么都不打印）当我将 WH_MOUSE_LL 更改为 WH_MOUSE 时。这是代码：

```
#define _WIN32_WINNT 0x0400
#pragma comment( lib, "user32.lib" )

#include <windows.h>
#include <stdio.h>

HHOOK hMouseHook;

LRESULT CALLBACK mouseProc (int nCode, WPARAM wParam, LPARAM lParam)
{
    MOUSEHOOKSTRUCT * pMouseStruct = (MOUSEHOOKSTRUCT *)lParam;
    if (pMouseStruct != NULL){
        if(wParam == WM_LBUTTONDOWN)
        {
            printf( "clicked" ); 
        }
        printf("Mouse position X = %d  Mouse Position Y = %d\n", pMouseStruct->pt.x,pMouseStruct->pt.y);
    }
    return CallNextHookEx(hMouseHook, nCode, wParam, lParam);
}

DWORD WINAPI MyMouseLogger(LPVOID lpParm)
{
    HINSTANCE hInstance = GetModuleHandle(NULL);

    // here I put WH_MOUSE instead of WH_MOUSE_LL
    hMouseHook = SetWindowsHookEx( WH_MOUSE_LL, mouseProc, hInstance, NULL );

    MSG message;
    while (GetMessage(&message,NULL,0,0)) {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }

    UnhookWindowsHookEx(hMouseHook);
    return 0;
}

int main(int argc, char** argv)
{
    HANDLE hThread;
    DWORD dwThread;

    hThread = CreateThread(NULL,NULL,(LPTHREAD_START_ROUTINE)MyMouseLogger, (LPVOID) argv[0], NULL, &dwThread);
    if (hThread)
        return WaitForSingleObject(hThread,INFINITE);
    else
        return 1;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T20:04:06.417

```
// here I put WH_MOUSE instead of WH_MOUSE_LL
hMouseHook = SetWindowsHookEx( WH_MOUSE_LL, mouseProc, hInstance, NULL ); 
```

还必须将第四个参数更改为 GetCurrentThreadId() 以使其成为本地参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T20:01:48.610

因为你在那里有一个“main”，我猜你需要把它变成一个 dll 才能处理 *_LL 类型以外的消息

[了解低级鼠标和键盘钩子（win32）](https://stackoverflow.com/questions/3134183/understanding-the-low-level-mouse-and-keyboard-hook-win32/3134570#comment27597902_3134570)

[http://developer-resource.blogspot.com/2008/07/setwindowshookex-example.html](http://developer-resource.blogspot.com/2008/07/setwindowshookex-example.html) has a dll example

# printing - print a highlighted text in acrobat reader

> ID：11180775
> 
> 赞同：1
> 
> 时间：2012-06-24T19:58:11.497
> 
> 标签：printing, acrobat

I am trying to print a pdf document annotated with yellow highlights. While printing this document, my printer does not print the highlights and prints only the text. Also, I can't find any settings. I have acrobat reader 9.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:36:11.413

在打印对话框中有一个“评论和表格”的下拉菜单。选择“文档和标记”也会打印亮点。

# java - 调用 InputSplit 的 getClass() 时来自 Hadoop 的 JobSplitWriter / SerializationFactory 的 NullPointerException

> ID：11180776
> 
> 赞同：5
> 
> 时间：2012-06-24T19:58:21.453
> 
> 标签：java, hadoop, nullpointerexception, mapreduce

我`NullPointerException`在开始`MapReduce`工作时遇到了问题。它被`SerializationFactory`'s`getSerializer()`方法抛出。我正在使用自定义`InputSplit`、、`InputFormat`和值类`RecordReader`。`MapReduce`

我知道在我的班级创建拆分后的某个时间`InputFormat`，但在创建`RecordReader`. 据我所知，它是在“清理暂存区”消息之后直接发生的。

`getSerialization()`通过在堆栈跟踪指示的位置检查 Hadoop 源，当接收到空`Class<T>`指针时，似乎正在发生错误。JobClient`writeNewSplits()`像这样调用该方法：

```
Serializer<T> serializer = factory.getSerializer((Class<T>) split.getClass()); 
```

因此，我假设当`getClass()`在我的自定义对象上被调用时`InputSplit`，它会返回一个`null`指针，但这只是令人困惑。有任何想法吗？

错误的完整堆栈跟踪如下：

```
12/06/24 14:26:49 INFO mapred.JobClient: 清理暂存区 hdfs://localhost:54310/tmp/hadoop-s3cur3/mapred/staging/s3cur3/.staging/job_201206240915_0035
线程“主”java.lang.NullPointerException 中的异常
    在 org.apache.hadoop.io.serializer.SerializationFactory.getSerializer(SerializationFactory.java:73)
    在 org.apache.hadoop.mapreduce.split.JobSplitWriter.writeNewSplits(JobSplitWriter.java:123)
    在 org.apache.hadoop.mapreduce.split.JobSplitWriter.createSplitFiles(JobSplitWriter.java:74)
    在 org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:968)
    在 org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
    在 org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 javax.security.auth.Subject.doAs(Subject.java:396)
    在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    在 org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    在 org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    在 org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    在 edu.cs.illinois.cogcomp.hadoopinterface.infrastructure.CuratorJob.start（CuratorJob.java:94）
    在 edu.cs.illinois.cogcomp.hadoopinterface.HadoopInterface.main(HadoopInterface.java:58)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.apache.hadoop.util.RunJar.main(RunJar.java:156)

```

谢谢！

编辑：我的自定义 InputSplit 代码如下：

```
import . . .

/**
 * A document directory within the input directory. 
 * Returned by DirectoryInputFormat.getSplits()
 * and passed to DirectoryInputFormat.createRecordReader().
 *
 * Represents the data to be processed by an individual Map process.
 */
public class DirectorySplit extends InputSplit {
    /**
     * Constructs a DirectorySplit object
     * @param docDirectoryInHDFS The location (in HDFS) of this
     *            document's directory, complete with all annotations.
     * @param fs The filesystem associated with this job
     */
    public  DirectorySplit( Path docDirectoryInHDFS, FileSystem fs )
            throws IOException {
        this.inputPath = docDirectoryInHDFS;
        hash = FileSystemHandler.getFileNameFromPath(inputPath);
        this.fs = fs;
    }

    /**
     * Get the size of the split so that the input splits can be sorted by size.
     * Here, we calculate the size to be the number of bytes in the original
     * document (i.e., ignoring all annotations).
     *
     * @return The number of characters in the original document
     */
    @Override
    public long getLength() throws IOException, InterruptedException {
        Path origTxt = new Path( inputPath, "original.txt" );
        HadoopInterface.logger.log( msg );
        return FileSystemHandler.getFileSizeInBytes( origTxt, fs);
    }

    /**
     * Get the list of nodes where the data for this split would be local.
     * This list includes all nodes that contain any of the required data---it's
     * up to Hadoop to decide which one to use.
     *
     * @return An array of the nodes for whom the split is local
     * @throws IOException
     * @throws InterruptedException
     */
    @Override
    public String[] getLocations() throws IOException, InterruptedException {
        FileStatus status = fs.getFileStatus(inputPath);

        BlockLocation[] blockLocs = fs.getFileBlockLocations( status, 0,
                                                              status.getLen() );

        HashSet<String> allBlockHosts = new HashSet<String>();
        for( BlockLocation blockLoc : blockLocs ) {
            allBlockHosts.addAll( Arrays.asList( blockLoc.getHosts() ) );
        }

        return (String[])allBlockHosts.toArray();
    }

    /**
     * @return The hash of the document that this split handles
     */
    public String toString() {
        return hash;
    }

    private Path inputPath;
    private String hash;
    private FileSystem fs;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:32:26.313

InputSplit 不扩展 Writable，您需要明确声明您的输入拆分实现 Writable

# ruby - 提取字符串，它们是数组中其他字符串的最小部分或唯一的

> ID：11180781
> 
> 赞同：0
> 
> 时间：2012-06-24T19:59:02.110
> 
> 标签：ruby, arrays, string

我有以下数组：

```
str_ary = ["Thursday morning", "Twitter users", "Thursday morning , 140 characters",
"of Twitter users", "the virtual pockets of Twitter users","Beginning Thursday morning , 140 characters","in the virtual pockets of Twitter users"] 
```

我想过滤它并得到 str_ary2 = ["Thursday morning", "Twitter users"]。

此外，如果那里有一个唯一的字符串（它不属于任何其他字符串，我也想保留它..）。

最好的方法是什么？

现在我有了这个，但它不起作用......

```
def select_correct_sizes(arrays)
  result = []
  arrays.each do |a|
    arrays.each do |b|
      res = nil
      if b != a
        if a.split(' ').length >= b.split(' ').length
          res = self.substract_and_check(a, b)
        elsif a.split(' ').length < b.split(' ').length
          res =  self.substract_and_check(b, a)
        end
        if !res.nil?
          result << res
        end
      end
    end
  end
  result = result.uniq
  return result
end

def substract_and_check(a, b)
  res = a.gsub(/#{b}/, '')
  res = res.split(' ')
  if res.length + b.split(' ').length == a.split(' ').length
    puts "#{b} IS PART OF THE #{a}"
    return b
  elsif text_uniq?(a,b)
    puts "#{b} IS UNIQUE"
    return b
  else
    return nil
  end
end

def text_uniq?(a,b)
  res = a.gsub(/#{b}/, '')
  res = res.split(' ')
  if res.length == a.split(' ').length
    return true
  else
    return false
  end
end

str_ary2 = select_correct_sizes(str_ary) 
```

编辑：对不起，如果问题不是很清楚..我需要提取字符串，即

A) 1) 存在于数组中的其他字符串中 2) 大小最小 B) 1) 唯一（例如，不存在于数组中的任何其他字符串中）。

所有的字符串都是过滤后的短语，所以不会有任何像“the”、“one”等随机的垃圾词。

在上面的示例中，“Twitter users”和“Thursday Morning”都出现在数组的其他字符串中。

因此，如果数组包含“绿球”之类的东西，我也需要提取它，因为它相对于数组中的其他字符串是唯一的。

希望现在更清楚，否则请告诉我。

EDIT2：我不希望任何人使用上面的代码来回答，我也会接受不同的代码或详细的伪代码..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:44:39.127

如果我正确理解了这个问题，那么您想要*所有不包含任何其他元素的元素*。

```
str_ary = ["Thursday morning", "Twitter users", "Thursday morning , 140 characters",
  "of Twitter users", "the virtual pockets of Twitter users",
  "Beginning Thursday morning , 140 characters","in the virtual pockets of Twitter users",
  'green ball']

str_ary.reject{|e| (str_ary - [e]).any?{|e1| e.include?(e1)}}
# => ["Thursday morning", "Twitter users", "green ball"] 
```

# windows-phone-7 - WP7: How to block click event on Grid when clicking on child control?

> ID：11180783
> 
> 赞同：0
> 
> 时间：2012-06-24T19:59:12.080
> 
> 标签：windows-phone-7, events, click

I wrote my own checkbox ContentControl for better design control.

**What the scenario looks like:**

I got a Listbox with custom templated list items, which, in turn, have a text item and my custom checkbox.

**Wanted behaviour:**

*   clicking on the list item changes page to a detailed view of that item.
*   clicking the checkbox only toggles the checkmark on it and does not trigger the page change.

**Actual behaviour:**

You may guess, when clicking on my checkbox, the page change event is still fired.

**How I implemented that:**

My checkbox has a Grid, which holds a Rectangle and an Icon. I bound a Tap event to the Grid, to toggle the IsChecked status. (Grid objects don't have a click event).

Is it because I'm not using a click event? If so, which interface does my ContentControl have to implement for it? Or how does the default Checkbox (Button?) control manage that?

Thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:25:20.440

> 我编写了自己的复选框 ContentControl 以获得更好的设计控制

如果你觉得你真的必须创建你自己的 CheckBox，你的控件应该扩展 ToggleButton。这会给你你想要的行为。如果标准复选框不适合您，我会感到非常惊讶。您可以更改复选框的样式以做任何您想做的事情，更改为您想要的任何内容。我正在做你想做的事情，而且效果很好。`ItemTemplate`我在a中使用了一个复选框`ListBox`。我已将复选框设置为与常规复选框不同的外观。这是我的 ListBox 的示例

```
<ListBox ItemsSource="{Binding Items}"
         SelectionChanged="Stations_SelectionChanged"
         toolkit:TiltEffect.IsTiltEnabled="True"
         SelectionMode="Single">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid Margin="0,0,0,17">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="48"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
                <CheckBox IsChecked="{Binding YesOrNo, Mode=TwoWay}" Width="48"
                          Style="{StaticResource MinimalCheckBoxStyle}"/>
                <TextBlock Text="{Binding Name}" VerticalAlignment="Center"
                   Style="{StaticResource PhoneTextExtraLargeStyle}"
                           Grid.Column="1"/>
                <TextBlock Text="{Binding OtherProperty}"
                           Style="{StaticResource PhoneTextSubtleStyle}"
                           Grid.Column="1" Grid.Row="1"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# iphone - 如何将 UIView 的 backgroundColor 设置为图像

> ID：11180784
> 
> 赞同：2
> 
> 时间：2012-06-24T19:59:27.703
> 
> 标签：iphone

> **可能重复：**
> [如何设置视图的背景图像？](https://stackoverflow.com/questions/2167623/how-to-set-background-image-of-a-view)

如何将 UIView backgroundColor 设置为 UIimage

```
view.backgroundColor = [UIColor redColor]; 
```

我需要设置为 UIImage。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:00:25.527

```
myView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]; 
```

# wpf - 如何使用新项目更新 listView？

> ID：11180787
> 
> 赞同：0
> 
> 时间：2012-06-24T20:00:18.107
> 
> 标签：wpf, listview, mvvm

我有 2 个字段

`string Name`

和

`int Age`

如何将此信息添加到绑定到`listView`用户按下 a的集合中`Button`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:32:04.053

这是一个简单的例子。[它假定使用本文](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中描述的 RelayCommand 和 ObservableObject 类。

`MainWindow.xaml`

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="60*" />
        <RowDefinition Height="20*" />
        <RowDefinition Height="20*" />
    </Grid.RowDefinitions>

    <ListBox ItemsSource="{Binding People}"
             Margin="5">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" />
                    <TextBlock Text=", " />
                    <TextBlock Text="{Binding Age}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <Grid Grid.Row="1">
        <Grid.RowDefinitions>
            <RowDefinition Height="50*" />
            <RowDefinition Height="50*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Label>Name:</Label>
        <Label Grid.Row="1">Age:</Label>

        <TextBox Grid.Column="1"
                 Margin="5"
                 Text="{Binding Name}"/>
        <TextBox Grid.Column="1"
                 Grid.Row="1"
                 Margin="5"
                 Text="{Binding Age}"/>

    </Grid>

    <Button Grid.Row="2"
            Margin="5"
            Command="{Binding AddPersonCommand}">Add Person</Button>

</Grid> 
```

接下来，创建一个简单的类来保存您的信息。

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

最后，创建一个简单的 viewModel 来操作信息。

```
public class AppViewModel : ObservableObject
{
    private int _age;
    private string _name;

    private RelayCommand _AddPersonCommand;

    private ObservableCollection<Person> _people = new ObservableCollection<Person>()
    {
        new Person { Name="Ben", Age=26 },
        new Person { Name="George", Age=40 },
        new Person { Name="Amy", Age=38 },
        new Person { Name="April", Age=22 },
        new Person { Name="Mick", Age=45 },
        new Person { Name="Steph", Age=32 },
        new Person { Name="Mel", Age=35 },
        new Person { Name="Emma", Age=28 },
    };

    public IEnumerable People
    {
        get { return _people; }
    }

    public ICommand AddPersonCommand
    {
        get
        {
            if (_AddPersonCommand == null)
            {
                _AddPersonCommand = new RelayCommand(p=> this.AddPerson());
            }
            return _AddPersonCommand;
        }
    }

    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            NotifyPropertyChanged("Name");
        }
    }

    public int Age
    {
        get { return _age; }
        set
        {
            _age = value;
            NotifyPropertyChanged("Age");
        }
    }

    private void AddPerson()
    {
            Person p = new Person();
            p.Name = _name;
            p.Age = _age;
            _people.Add(p);
    }
} 
```

# php - Ajax? loaded content and using the shadowbox

> ID：11180791
> 
> 赞同：1
> 
> 时间：2012-06-24T20:00:37.047
> 
> 标签：php, ajax, shadowbox

im using a script called masonry to load posts at mine website dynamicaly when scrolling. This works fine. Now I want to open links which are in this post in shadowbox (lightbox like) [http://www.shadowbox-js.com/index.html](http://www.shadowbox-js.com/index.html)

The problem is that links from posts which are normaly at site are opening in this shadowbox but those from loaded posts are not. Well some time ago I had the same issue with facebook like buttons and I made it working with this code:

```
<script type="text/javascript">
$(document).ajaxComplete(function(){
try{
FB.XFBML.parse(); 
}catch(ex){}
});
</script> 
```

Now I was looking how to solve this problem with shadowbox and only thing that I've found is this code:

```
$('.klasa').live('click', function () {
Shadowbox.open(this);
return true;
}); 
```

Which Im supposed to use at the end of the oryginal shadowbox JS code. I did it and it make something, when I click at the loaded links the screen become darker like it should with lightboxes but that's all, it doesnt load the content etc.

Can anyone try to help me? :)

# javascript - 如何在 GAE 端通过多项选择获取 select 的所有值？

> ID：11180794
> 
> 赞同：1
> 
> 时间：2012-06-24T20:01:10.613
> 
> 标签：javascript, jquery, google-app-engine, html-select

我在客户端选择如下：

```
<select multiple="multiple" id="reason" class="input-xlarge">
  <option value="001">reason1</option>
  <option value="002">reason2</option>
  <option value="003">reason3</option>
  <option value="004">reason4</option>
  <option value="005">reason5</option>
</select> 
```

使用以下代码将数据发送到服务器：

```
var reason = $('#reason').val();
$.ajax({
  data: {'reason': reason},
  ...
});
... 
```

在我做的服务器上：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
arguments = self.request.arguments()
for argument in arguments:
    if self.request.get(argument):
        self.response.out.write(argument+': '+self.request.get(argument)+'<br>') 
```

结果即使选择了几个原因，我也看到：

```
reason[]: 002 
```

如何选择所有值？

**更新1**。它们在请求中传递为：

```
reason%5B%5D=001&reason%5B%5D=002&reason%5B%5D=003&reason%5B%5D=004 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:34:43.150

好的，我可以使用下面的代码获得所有这些（感谢来自 gae irc的**lericson ）：**

```
reasons = self.request.get_all('reason[]')
for reason in reasons:
    logging.info(reason) 
```

但我不喜欢它，因为它假定在服务器端对字段值进行硬编码。所以，我修改了 javascript 来发送`reason.join()`而不是仅仅`reason`.

# python - nginx和uWSGI在Python中获取认证数据

> ID：11180795
> 
> 赞同：1
> 
> 时间：2012-06-24T20:01:14.287
> 
> 标签：python, authentication, uwsgi

我需要在我的小型 Python 应用程序（只有一个脚本）中从 nginx + uWSGI 获取身份验证数据。身份验证必须在 Web 服务器端（例如 nginx，nginx.conf 中的基本身份验证）而不是在 Python 应用程序中实现，这很重要！所以，没有中间件或类似的东西会有所帮助......

我想 uWSGI 必须通过它的 API 或 smth 将此数据发送到我的 Python 应用程序。

如何在我的 Python 脚本中获取这些数据？我需要像

```
$_SERVER['PHP_AUTH_USER'] 
```

在 php.ini 中。

uWSGI 配置：

```
[uwsgi]

socket = /tmp/uwsgi.sock
processes = 4
master = true
module = myapp
harakiri = 30
cache = false
daemonize = /var/log/uwsgi.log 
```

nginx配置：

```
server {
listen       8080;
server_name  _;

location / {
    include        uwsgi_params;
    uwsgi_pass     unix:///tmp/uwsgi.sock;
uwsgi_cache off;    
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:28:10.263

尝试添加

uwsgi_param REMOTE_USER $remote_user;

在 nginx 配置中

您将在 environ['REMOTE_USER'] 中找到用户名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:37:12.557

我更期待你的应用程序使用 uwsgi 的入口点。在文档中有这个链接可以帮助你。

[http://projects.unbit.it/uwsgi/wiki/Quickstart](http://projects.unbit.it/uwsgi/wiki/Quickstart)

这是最简单的设置。

```
def application(env, start_response):
    start_response('200 OK', [('Content-Type','text/html')])
    return "Hello World" 
```

start_response 是按照 wsgi 协议创建新响应的变量。而 env 是所有数据的去向。换句话说，$_GET、$_POST 等应该在某个时候包含在该变量中。

您要查找的变量应按其在 nginx 中的名称命名。通常它被称为 HTTP_AUTHENTICATION，为了查看所有内容，您应该转储到终端或使用调试器检查该变量。

# php - PHP：为什么将日期字符串转换为时间戳然后再转换回日期字符串不起作用？

> ID：11180797
> 
> 赞同：2
> 
> 时间：2012-06-24T20:01:31.270
> 
> 标签：php, date, time, timestamp

我的代码

```
$time = "Tuesday, 26 June 2012";
//str_replace(',','',$time);<--this also doesn't work.
$a = strptime($time, "%l, %j %F %Y");
$stmp = mktime(0,0,0,$a['tm_mon'],$a['tm_mday'],$a['tm_year'],0);
$from_stmp = date("l, j F Y H:i:s", $stmp);
echo $from_stmp; //Tuesday, 30 November 1999 00:00:00 
```

现在我知道有一种更优雅的方式，它确实有效：

```
$time = "Tuesday, 26 June 2012";
$stmp = strtotime($time);
$from_stmp = date("l, j F Y H:i:s", $stmp);
echo $from_stmp;//Tuesday, 26 June 2012 00:00:00 
```

但是第一个版本有什么问题？我只是好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:04:33.423

### 问题 #1

```
$a = strptime(time, "%l, %j %F %Y"); 
```

你写了`time`；它应该是`$time`。

### 问题 #2

您的格式字符串错误。`strptime`不使用与 相同的格式字符串`date`，只是在前面加上百分号；它有自己的一套。您的格式字符串应如下所示：

```
$a = strptime($time, "%A, %e %B %Y"); 
```

### 问题 #3

*   `strptime`*返回自 1900*年以来的若干年。您需要添加`1900`.
*   `strptime`返回从 0 到 11 的月份。您需要添加`1`.

### 都总结了

这是您的代码，已修复：

```
<?php
$time = "Tuesday, 26 June 2012";
$a = strptime($time, "%A, %e %B %Y");

$stmp = mktime(0, 0, 0, $a['tm_mon'] + 1, $a['tm_mday'], 1900 + $a['tm_year'], 0);
$from_stmp = date("l, j F Y H:i:s", $stmp);
echo $from_stmp;
?> 
```

[万岁，它有效！](http://codepad.org/gx2F7Guz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:19:41.000

您仍然必须删除 mktime 函数的最后一个 0 它应该是正确的，

```
$time = "Tuesday, 26 June 2012";
$a = strptime($time, "%A, %e %B %Y");

$stmp = mktime(0, 0, 0, $a['tm_mon'] + 1, $a['tm_mday'], 1900 + $a['tm_year']);
$from_stmp = date("l, j F Y H:i:s", $stmp);
echo $from_stmp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T20:34:43.590

$time 的格式不对，应该是“%A, %e %B %Y”。

如果你 var_dump $a ，

```
array(9) {
  ["tm_sec"]=>
  int(0)
  ["tm_min"]=>
  int(0)
  ["tm_hour"]=>
  int(0)
  ["tm_mday"]=>
  int(26)
  ["tm_mon"]=>
  int(5)
  ["tm_year"]=>
  int(112)
  ["tm_wday"]=>
  int(2)
  ["tm_yday"]=>
  int(177)
  ["unparsed"]=>
  string(0) ""
} 
```

如果您查看文档，您会发现返回的实际值。

```
"tm_sec"    Seconds after the minute (0-61)
"tm_min"    Minutes after the hour (0-59)
"tm_hour"   Hour since midnight (0-23)
"tm_mday"   Day of the month (1-31)
"tm_mon"    Months since January (0-11)// increment month
"tm_year"   Years since 1900// add years from 1900
"tm_wday"   Days since Sunday (0-6)
"tm_yday"   Days since January 1 (0-365)
"unparsed"  the date part which was not recognized using the specified format 
```

你发现传递给你的 mktime 的实际值，调整你传递给 mktime 的值来解决这个问题。

```
<?
$time = "Tuesday, 26 June 2012";
$a = strptime($time, "%A, %e %B %Y");
var_dump($a);
$stmp = mktime(0, 0, 0, $a['tm_mon'] + 1, $a['tm_mday'], 1900 + $a['tm_year']);
$from_stmp = date("l, j F Y H:i:s", $stmp);
echo $from_stmp;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T20:08:22.283

好吧，因为`strptime()`已经过时了！

从[php 文档](http://php.net/manual/en/function.strptime.php)：`(PHP 5 >= 5.1.0)`

所以你应该使用`strtotime()`...

# c# - 检查依赖项是否已正确解决 IOC

> ID：11180798
> 
> 赞同：1
> 
> 时间：2012-06-24T20:01:59.373
> 
> 标签：c#, .net, dependency-injection, castle-windsor

我在我的代码中使用属性注入。当我使用这些类时，如果我的属性不为空，我会结束检查每个函数的条目，并且我会在每个函数中进行大量检查。

在这种情况下有什么建议？如何使验证更好，或者我应该进行验证？也许有一些非空属性？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:19:17.713

如果您的依赖项是强制性的，请将它们设为强制性。

```
Container.Register(Component.For<Foo>().Properties(PropertyFilter.RequireAll)); 
```

这样，Windsor 将确保在将对象还给您之前满足所有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:06:54.030

如果依赖项不是可选的并且您没有合理的本地默认值，则不要使用属性注入，而是使用构造函数注入。

如果无法解决依赖关系，Castle Windsor 将抛出异常。如果您不想依赖此 Castle 功能，则应验证传递给构造函数的依赖项是否不为空。

# arrays - WordPress 查询返回每个帖子

> ID：11180799
> 
> 赞同：0
> 
> 时间：2012-06-24T20:02:10.893
> 
> 标签：arrays, wordpress

我有一个自定义 WP 查询，它使用数组搜索单个自定义字段。

自定义字段用于帖子的来源国。我使用的数组是一个地区各个国家的名称。目标是能够返回一个地区或大陆的所有帖子。

这是我的查询：

```
$args = array(
        'posts_per_page' => '-1',
        'cat' => '4',
        'meta_query' => array(
                array(
                'meta_key' => 'Country',
                'meta_value' => $country_search,
                'compare' => 'IN'
                )
        )
    );
    $country_query = new WP_Query( $args ); 
```

变量是一个内`$country_search`爆数组：'Albania','Andorra','Armenia','Austria','Belarus','Belgium' 等。

发生的情况是，无论我搜索哪个区域，在返回正确的国家/地区数组时，查询都会返回数据库中的所有帖子。

我敢肯定这很简单，但我的头因为敲击键盘而感到疼痛。

我非常感谢任何帮助。

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:27:54.197

感谢所有的帮助！

原来是一个问题的组合：

1.  而不是内爆`$country_search_array`，它需要按原样添加到查询中。
2.  由于它是一个数组，我们不能使用`'='`比较值。它需要是`'IN'`

如果没有我在这里得到的帮助，我无法弄清楚。再次，谢谢！

# ruby-on-rails - Ruby on rails rake db:reseed abort

> ID：11180800
> 
> 赞同：0
> 
> 时间：2012-06-24T20:02:19.950
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

I've a problem Rolify. When I use the command rake db:reseed in the shell, to reset my database I have this error:

> undefined local variable or method `rolify' for Customer:Class

Here's my code in my model with Rolify:

```
class Customer
  include Mongoid::Document
  include Mongoid::Timestamps
  rolify
  embeds_one :contact
  has_many :orders

  devise :database_authenticatable, :recoverable, :registerable, :timeoutable, :validatable,
         :token_authenticatable, :confirmable

  attr_accessible :email, :password, :password_confirmation, :add_role

  field :first_name
  field :last_name
  field :password
  field :gender
  field :confirmed_at
  field :unconfirmed_email
  field :confirmation_url
  field :confirmation_token
  field :confirmation_sent_at
  field :email
  field :encrypted_password

  gender_regex = /^(Male|Female)$/

  validates :first_name, presence: true, :allow_blank => true
  validates :last_name, presence: true, :allow_blank => true
  validates :password, presence: true
  validates :gender, presence: true, :allow_blank => true,
                     format: { with: gender_regex }
end 
```

If you know why, please help me :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T20:04:08.060

It might be late to answer, but for the sake of others who might still be facing this kind of problem.

I fixed this by restarting my server after adding rolify and resourcify in models.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:51:20.390

`rolify`从您的`Customer`模型中删除。
您需要按照[https://github.com/EppO/rolify上的说明进行操作](https://github.com/EppO/rolify)

您应该将其包含在`Gemfile`您的模型中而不是模型中：

```
gem "rolify" 
```

在要应用角色的资源模型中，必须包括：

```
resourcify 
```

我觉得是你的错......

# python - 在瓶中创建子项目

> ID：11180806
> 
> 赞同：6
> 
> 时间：2012-06-24T20:03:20.160
> 
> 标签：python, frameworks, module, bottle

我刚刚开始 Python Web 开发，并选择了 Bottle 作为我选择的框架。

我正在尝试拥有一个模块化的项目结构，因为我可以拥有一个围绕它构建的模块的“核心”应用程序，这些模块可以在设置期间启用/禁用（或者在运行中，如果可能的话.. .不确定我将如何设置它）。

我的“主要”课程如下：

```
from bottle import Bottle, route, run
from bottle import error
from bottle import jinja2_view as view

from core import core

app = Bottle()
app.mount('/demo', core)

#@app.route('/')
@route('/hello/<name>')
@view('hello_template')
def greet(name='Stranger'):
    return dict(name=name)

@error(404)
def error404(error):
    return 'Nothing here, sorry'

run(app, host='localhost', port=5000) 
```

我的“子项目”（即模块）是这样的：

```
from bottle import Bottle, route, run
from bottle import error
from bottle import jinja2_view as view

app = Bottle()

@app.route('/demo')
@view('demographic')
def greet(name='None', yob='None'):
    return dict(name=name, yob=yob)

@error(404)
def error404(error):
    return 'Nothing here, sorry' 
```

当我进入`http://localhost:5000/demo`浏览器时，它显示 500 错误。瓶子服务器的输出是：

```
localhost - - [24/Jun/2012 15:51:27] "GET / HTTP/1.1" 404 720
localhost - - [24/Jun/2012 15:51:27] "GET /favicon.ico HTTP/1.1" 404 742
localhost - - [24/Jun/2012 15:51:27] "GET /favicon.ico HTTP/1.1" 404 742
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/bottle-0.10.9-py2.7.egg/bottle.py", line 737, in _handle
    return route.call(**args)
  File "/usr/local/lib/python2.7/dist-packages/bottle-0.10.9-py2.7.egg/bottle.py", line 582, in mountpoint
    rs.body = itertools.chain(rs.body, app(request.environ, start_response))
TypeError: 'module' object is not callable 
```

文件夹结构为：

```
index.py
views (folder)
|-->hello_template.tpl
core (folder)
|-->core.py
|-->__init__.py
|-->views (folder)
|--|-->demographic.tpl 
```

我不知道我在做什么（错误）:)

任何人都知道如何/应该如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T02:12:03.470

您正在将模块“核心”传递给 mount() 函数。相反，您必须将瓶子应用程序对象传递给 mount() 函数，因此调用将是这样的。

```
app.mount("/demo",core.app) 
```

这是 mount() 函数的正式文档。

> ```
> mount(prefix, app, **options)[source] 
> ```
> 
> 将应用程序（Bottle 或普通 WSGI）挂载到特定的 URL 前缀。
> 例子：
> 
> ```
> root_app.mount('/admin/', admin_app) 
> ```
> 
> 参数：
> prefix – 路径前缀或挂载点。如果它以斜线结尾，则该斜线是强制性的。
> **app – Bottle 或 WSGI 应用程序的实例**

# python - 如何在列表中找到最常见的元素（使用 all()）

> ID：11180808
> 
> 赞同：1
> 
> 时间：2012-06-24T20:03:25.857
> 
> 标签：python

我正在尝试返回列表中最常见的元素（统计模式）。不幸的是，我不知道如何使用`all`可迭代的。如果我不使用 all()，这就是它的样子：

```
def large(a):
for i in set(a):
    for j in set(a):
        if a.count(i)<a.count(j):
            break
return i 
```

但是我知道这可以写得更有说服力。有人也可以写更雄辩的版本吗？我相信它是这样的：

```
[i for i,j in set(a) if all(a.count(i)>a.count(j)] 
```

此代码有 2 个问题。首先是`set(a)`需要第二个值来解包，第二个是在`all`这里不起作用。

请帮帮我。谢谢！

示例：`{'a','a','b','b','b','c'}`你会期望 ' `b`' 是最大的元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:10:39.447

好的 - 现在理解你的问题。下面的代码不是一般应该如何解决这个问题的。但是学习 all() 的工作原理是可以的。请注意，它的效率远低于 Counter。有趣的是，它将返回最频繁的每个元素 - 因此在需要准确处理多模式数据时可能很有用。

```
>>> q = list("aaabbbbcc")
>>> q
['a', 'a', 'a', 'b', 'b', 'b', 'b', 'c', 'c']
>>> r = set(q)
>>> r
set(['a', 'c', 'b'])
>>> [x for x in r if all([q.count(x) >= q.count(y) for y in r])]
['b'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:11:24.357

```
from collections import Counter

def most_common(a):
    return Counter(a).most_common(1)[0][0] 
```

如果你绝对必须这样做`all`——我认为这不是最好的方法——试试

```
def most_common(a):
    a_count = [(i, a.count(i)) for i in set(a)]
    for i,c in a_count:
        if all(c >= cc for ii,cc in a_count):
           return i 
```

# mysql - 我应该在 MySQL 中将时间戳保存为 UTC 吗？

> ID：11180810
> 
> 赞同：1
> 
> 时间：2012-06-24T20:03:38.927
> 
> 标签：mysql

假设我需要捕获订单，并且需要保存人们下订单的时间戳。此外，我需要一种方法来根据用户请求密码重置代码的时间来跟踪令牌何时设置为过期。我的服务器位于德克萨斯州，如何容纳遍布美国的用户？我想做的最后一件事是问他们在哪个时区，所以我不确定如何处理以 UTC 显示的时间，这会让普通人感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:09:32.097

首先，您应该将*display*与*storage*隔离。仅仅因为您以特定方式存储值并不意味着您必须以这种方式显示它。

其次，考虑一下您实际捕获的内容：它是一个时间戳。“现在”的全球理念。时区在这里无关紧要 - 不同时区的两个合理的人会就他们中的哪一个先下订单达成一致，无论他们的时区如何。

因此，将时间戳存储在 UTC 中感觉完全合理。事实上，时间戳几乎总是最好以 UTC 格式存储。只有当您询问*用户*对日期/时间的想法时，当地时间有时才有意义。

至于如何在用户本地时间显示值 - 这很棘手：

*   您可以根据他们的收货地址等猜测
*   您可以根据他们的 IP 地址猜测（可能有一些有趣的问题）
*   您可以猜测一次并将其存储在首选项中，以便他们*可以*在必要时进行修复
*   您可以在 Javascript 中执行此操作，提供 UTC 值，然后在客户端将其转换为本地时间

（当然，在猜测时区时，您始终可以使用 UTC 到 Javascript 中的本地转换来帮助使猜测准确。）

# jquery - 鼠标悬停上的jQuery slideDown

> ID：11180815
> 
> 赞同：0
> 
> 时间：2012-06-24T20:04:42.220
> 
> 标签：jquery, html

嘿伙计们，这是我的 html 代码：

```
<div class="nakupy">
     <li class="icn_kategorie"><a href="#">Nákupy</a>
        <div class="sub_menu">
            <sub_menu class="icn_kategorie"><a href="#">TESCO</a></sub_menu>
            <sub_menu class="icn_kategorie"><a href="#">Potraviny</a></sub_menu>
            <sub_menu class="icn_kategorie"><a href="#">Drogéria</a></sub_menu>
            <sub_menu class="icn_kategorie"><a href="#">Oblecenie</a></sub_menu>
        </div>
    </li>
</div>

<div class="domacnost">
    <li class="icn_kategorie"><a href="#">Domácnost</a>
        <div class="sub_menu">
            <sub_menu class="icn_kategorie"><a href="#">TESCO</a></sub_menu>
            <sub_menu class="icn_kategorie"><a href="#">Potraviny</a></sub_menu>
            <sub_menu class="icn_kategorie"><a href="#">Drogéria</a></sub_menu>
             <sub_menu class="icn_kategorie"><a href="#">Oblecenie</a></sub_menu>
        </div>
    </li>
</div> 
```

通过 jQuery，我只想在该类“nakupy”中选择 class="nakupy" 和 slideDown class="sub_menu"。我使用了这个脚本，但对我不起作用：

```
$(".nakupy").mouseover(function(){
     $(".sub_menu").parent(".nakupy").slideDown('slow');
}); 
```

它不是只向下滑动“nakupy”类和“sub_menu”类，而是在两者中都向下滑动“nakupy”、“domacnost”类和“sub_menu”类。

如何让它只在一节课上滑动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:09:57.900

也许改变：

```
$(".nakupy").mouseover(function(){ 
   $(".sub_menu").parent(".nakupy").slideDown('slow'); 
 }); 
```

为了：

```
$(".nakupy").mouseover(function(){ 
   $(this).find(".sub_menu").slideDown('slow'); 
 }); 
```

# opengl - 如何使用 glBlendFunc 来近似 Photoshop 差异合成？

> ID：11180816
> 
> 赞同：0
> 
> 时间：2012-06-24T20:04:48.617
> 
> 标签：opengl, opengl-es, opengl-3, nsopenglview

我正在使用 glBlendFunc() 将一个图像合成到另一个图像上，试图近似 Photoshop 的差异合成功能。我希望两个图像中的相似之处是黑色的，而弹出任何不同的东西。

据我了解， glBlendfunc() 与上下文中合成的任何图像相关联。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:27:00.133

我真的想不出任何办法用 glBlendFunc 做到这一点。你可以使用这样的东西：

```
glBlendEquation(GL_FUNC_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); 
```

但它只有在第二个纹理的大小比第一个更大时才会起作用（任何负的减法结果都将被钳制为零）。

我建议使用多重采样着色器同时对两个纹理进行采样，并将结果作为绝对差异输出。

```
gl_FragColor = abs(texture2D(tex1, uv) - texture2D(tex2,uv)); 
```

# sql - 不确定我的 SQL JOIN 是否为我的作业返回了正确的集合

> ID：11180817
> 
> 赞同：1
> 
> 时间：2012-06-24T20:04:52.113
> 
> 标签：sql, database, oracle

我正在学习 JOINS 并需要以下问题的帮助：

> 在 BOOKS 表中显示所有书籍的列表。如果客户已经订购了一本书，还要列出订单号并说明客户的居住地。

这是我能做到的。甲骨文 11g。

```
SELECT B.TITLE, O.ORDER#, C.STATE FROM BOOKS B
   LEFT OUTER JOIN ORDERITEMS OI ON B.ISBN = OI.ISBN
   LEFT OUTER JOIN ORDERS O ON O.ORDER# = OI.ORDER#
   LEFT OUTER JOIN CUSTOMERS C ON C.CUSTOMER# = O.CUSTOMER#; 
```

这个查询在结果中给了我 35 行。我的 BOOKS 表只有 14 行。我的 ORDERITEMS 表有 32 行。我假设额外的 3 行是从未订购过的书？我所拥有的是否有意义。我在想是因为 books 表只有 14 行，那我就应该返回？我认为这是不可能的，因为同一本书存在于多个订单上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:27:37.500

您可能已经开始区分`INNER JOIN`，并且`LEFT JOIN`基于此`LEFT JOIN`不会过滤掉左侧任何不匹配的行。然而，这并不能阻止相反的情况发生。

如果您有多个具有相同 ISBN 的“订单项”（或者，不太可能的是具有相同 ORDER# 的多个订单，或具有相同 CUSTOMER# 的多个客户），那么*每个*这样的匹配都会复制相应的左侧行， “书”在你的情况下。

您可以像这样显示有问题的书籍：

```
SELECT B.TITLE, B.ISBN, COUNT(*) FROM BOOKS B
LEFT OUTER JOIN ORDERITEMS OI ON B.ISBN = OI.ISBN
GROUP BY B.ISBN, B.TITLE
HAVING COUNT(*) > 1 
```

# symfony - 使用 symfony 创建自定义用户提供程序

> ID：11180822
> 
> 赞同：2
> 
> 时间：2012-06-24T20:05:36.240
> 
> 标签：symfony

我正在尝试做自己的自定义用户提供程序，但我被困在 Symfony 教程的这一部分（[创建用户提供程序](http://symfony.com/doc/current/cookbook/security/custom_provider.html#create-a-user-provider)）。

我需要对 $userdata 变量做什么？数据库连接？

我不知道我需要在这个地方做什么：

```
public function loadUserByUsername($username)
{
    // here
    // $userData = ...
    if ($userData) {
        //here too
        //$password = ...
        return new DomixBlogUser($username, $password, $salt, $roles)
    } else {
        throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
    }
} 
```

编辑#1

```
public function loadUserByUsername($username)
{
    $userData = $this->_em->getRepository("DomixBlogBundle:User")->findOneBy(array('username' => $username));
    var_dump($userData);
    if ($userData) {
        $salt = '54hg5g4hfjh4g5sdgf45gd4h84gjhdf54gf4g2f2gfdhggfdg';
        $password = $userData->getPassword().'{'.$salt.'}';

        return new DomixBlogUser($username, $password, $salt, $roles);
    } else {
        throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
    }
} 
```

那挺好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:14:30.487

是的，很可能是来自数据库连接。真的，虽然它可能来自任何地方。它的意思是，您的`loadUserByUsername`方法应该根据给定的用户名从存储用户的任何位置/服务获取一些“用户数据”，然后返回。

```
public function loadUserByUsername($username)
{
    $userData = $this->_em->getRepository("DomixBlogBundle:User")->findOneBy(array('username' => $username));

    if (null !== $userData) {

        return $userData;
    } else {
        throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
    }
} 
```

[你可以在默认的 symfony entity user provider](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Security/User/EntityUserProvider.php#L52)中看到一个例子。

# windows-phone-7 - Windows Phone 7：从本地登录和注册到远程

> ID：11180825
> 
> 赞同：0
> 
> 时间：2012-06-24T20:06:11.033
> 
> 标签：windows-phone-7

我刚刚构建了一个屏幕，用户可以在其中输入自己的电子邮件地址和密码。现在，当用户单击“登录”按钮时，我需要 Windows Phone 应用程序连接到 PHP 中的一个页面，如果该用户已经注册，该页面会显示 Windows Phone 应用程序。如果没有，PHP 页面会创建一个新帐户并向用户发送一封验证电子邮件。否则，如果用户已经注册，PHP 页面会返回一个代码，告诉我的 Windows Phone 应用程序当前用户已经注册。现在，Windows Phone 应用程序会将本地文件（文本文件）上传到我的网站（用户登录的地方），删除已经存在的文件。这个怎么做？我必须使用 LINQ 吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:13:57.963

您可以使用以下内容： 1\. 通过 SSL (HTTPS) 的标准 HTTP 请求 2\. 用于提交登录名和密码的标准 POST 变量 3\. XML 响应 4\. 用于轻松 XML 解码的 Linq

此外，在服务器上将每个例程放在单独的模块中，例如 login.php 和 send.php（例如发送消息）。因此 index.php 会加载 index.php?module=login 之类的模块，而您必须在 index.php 中预先定义模块。

我相信这是最简单的方法。如果您不使用 XML 提交登录，那么在格式错误的登录命中 PHP 工作人员之前，在 Web 服务器级别上保护它要容易得多。这也是因为安全性，因此如果您计划拥有数百万用户，这样您以后可以将登录分开到其他地方。此外，在加载模块时，您需要确保该模块存在，而不是通过 file_exists 而是通过预定义的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:55:36.867

您需要为您的登录方法向您的 PHP 页面发出 Web 请求，它将按照您指定的方式返回您的响应。然后您可以根据您的逻辑解析该响应或显示内容。

# git - 如何处理文件被添加到 git 中的错误提交？

> ID：11180827
> 
> 赞同：3
> 
> 时间：2012-06-24T20:06:32.250
> 
> 标签：git

我在我的 git 历史记录中有一个过去的提交，当时我正在处理功能“X”并意外提交了一个与此功能无关的文件以及其他相关文件。

现在我正在研究功能“Y”，它实际上与之前错误提交的文件有关。

如何以最好的方式处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T22:07:27.780

That's how I would have dealt with your problem:

Start an interactive rebase:

```
git rebase -i COMMIT-OF-FEAT-X^ # notice the ^ at the end 
```

Then change *pick* to *edit* for the concerned commit.
You would then be *in* (please suggest a better wording) that specific commit.

Remove the file from the commit:

```
git remove --cached wrong_file 
```

That file would then be untracked.

Continue the rebase:

```
git rebase --continue 
```

You're done.

You can now just switch to the *feat-Y* branch and add the file, commit it, or do whatever you want with it:

```
git co feat-Y
git add wrong_file 
```

# accordion - AccordionContainer 内的 ContentPane 忽略高度

> ID：11180832
> 
> 赞同：0
> 
> 时间：2012-06-24T20:07:09.850
> 
> 标签：accordion, dojo

我希望有一个顶部内容窗格仅下降 300 像素的手风琴容器，以便用户可以轻松单击下一个标题以调出完整的内容窗格。由于某种原因，顶部的 ContentPane（搜索查询手风琴窗格）忽略了我在样式中给出的高度值。有谁知道为什么？

谢谢

```
<!-- Search Accordian Container -->
            <div id="accordion" dojoType="dijit.layout.AccordionContainer">

                <!-- Search Query Accordian Pane -->
                <div style="height:300px; background-color: #F2EFED;" title="Search Query" dojoType="dijit.layout.ContentPane" selected="true" >
                    <label for="first_name">First Name:</label>
                    <input type="text" name="first_name" id="first_name" 
                           size="30" /><br/>
                    <label for="last_name">Last Name:</label>
                    <input type="text" name="last_name" id="last_name" 
                           size="30" /><br/>
                    <label for="middle_initial">Middle Initial:</label>
                    <input type="text" name="middle_initial" id="middle_initial" 
                           size="1" /><br/>
                </div>

                <!-- Search Results Accordian View -->
                <div class="searchAccordianPane" title="Search Results" dojoType="dijit.layout.ContentPane">
                    <img src="http://davidwalsh.name/dw-content/accordion/every-picture.jpg" class="image" />
                    <p>Roderick "Rod" David Stewart, CBE (born January 10, 1945), is a singer and songwriter...</p>
                </div>

            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:10:49.767

我认为您不能将这种行为与 AccordionPane 一起使用...我认为所有窗格都应该具有相同的大小。一个技巧可能是对有限大小使用 titlePane，然后对其他窗格使用accordionPane。

# windows - Windows 共享主机上的 Bazaar VCS

> ID：11180834
> 
> 赞同：1
> 
> 时间：2012-06-24T20:07:13.130
> 
> 标签：windows, version-control, shared-hosting, bazaar

是否可以在没有 SSH 访问的情况下在我的 Windows 共享主机上使用 Bazaar？ [http://bazaar.canonical.com/en/](http://bazaar.canonical.com/en/)

如果可以的话，请您解释一下如何设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:04:02.863

例如，如果您`bzr.example.com`在 Windows 服务器上设置了一个域，其文档目录位于 中`/websites/bzr.example.com`，那么您可以使用以下命令推送您的 bzr 项目：

```
bzr push ftp://username:password@server/websites/bzr.example.com/project1 --create-prefix 
```

您的朋友可以通过以下方式从它只读分支：

```
bzr branch http://bzr.example.com/project1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:18:33.873

如果您的提供商支持使用[ftp 或 sftp](http://doc.bazaar.canonical.com/beta/en/user-reference/urlspec-help.html)上传，您可以使用它。你是如何正常上传文件的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:06:32.857

您可以使用 http 或 ftp 协议来解决您的问题。

*   **http**：简单的 http 浏览对于只读访问是可以的。
*   **ftp** : 添加写入权限，ftp 即可。

请参阅此处的文档：http:
[//doc.bazaar.canonical.com/bzr.2.5/en/admin-guide/other-setups.html](http://doc.bazaar.canonical.com/bzr.2.5/en/admin-guide/other-setups.html)

# c# - 解析字符串的整数部分

> ID：11180836
> 
> 赞同：0
> 
> 时间：2012-06-24T20:07:30.513
> 
> 标签：c#

我有一个可以输入的字符串`{n}d {n}h {n}m {n}s`where`{n}`是一个整数，表示天数、小时数、分钟数、秒数。我如何`{n}`从字符串中提取这个数字？

用户不必输入所有 4 - d、h、m、s。他只能输入 4d 表示 4 天或 5h 2s 表示 5 小时 2 秒。

这就是我所拥有的。绝对应该有更好的方法来做到这一点。此外，并不涵盖所有情况。

```
int d; int m; int h; int sec;
string [] split = textBox3.Text.Split(new Char [] {' ', ','});
List<string> myCollection = new List<string>();

foreach (string s in split)
{
    d = Convert.ToInt32(s.Substring(0,s.Length-1));
    h = Convert.ToInt32(split[1].Substring(1));
    m = Convert.ToInt32(split[2].Substring(1));
    sec = Convert.ToInt32(split[3].Substring(1));
}
dt  =new TimeSpan(h,m,s); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:28:58.143

如果天、小时、分钟和秒的顺序是固定的，那么您可以使用正则表达式：

```
string input = textBox3.Text.Trim();
Match match = Regex.Match(input,
    "^" +
    "((?<d>[0-9]+)d)? *" +
    "((?<h>[0-9]+)h)? *" +
    "((?<m>[0-9]+)m)? *" +
    "((?<s>[0-9]+)s)?" +
    "$",
    RegexOptions.ExplicitCapture);

if (match.Success)
{
    int d, h, m, s;
    Int32.TryParse(match.Groups["d"].Value, out d);
    Int32.TryParse(match.Groups["h"].Value, out h);
    Int32.TryParse(match.Groups["m"].Value, out m);
    Int32.TryParse(match.Groups["s"].Value, out s);
    // ...
}
else
{
    // Invalid input.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:10:36.493

编写自定义解析器 - 使用状态机来确定字符串中的每个部分到底是什么。

这个想法是迭代字符串中的每个字符并根据它是什么来改变状态。因此，您将有一个`Number`状态和`Day`, `Month`, `Hour`,`Seconds`状态`Space`和`Start` `End`状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:11:30.393

一种方法可能是使用`sscanf()`，这很容易做到这一点。我在[本文中用](http://www.blackbeltcoder.com/Articles/strings/a-sscanf-replacement-for-net)C# 实现了这个函数的一个版本。

如果您需要更好地处理潜在的语法错误，那么您只需实现自己的解析器。我会通过一个一个地检查每个角色来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T20:16:31.390

这里有多种选择。您可以尝试使用 TimeSpan.TryParse 函数，但这需要不同的输入格式。另一种方法是将字符串拆分为空格并遍历每个部分。这样做时，您可以检查该部分是否包含*d*、*h*、*s*等，并将值提取到所需的变量中。您甚至可以使用 RegEx 来解析字符串。下面是一个基于迭代的例子：

```
 static void Main(string[] args)
    {
        Console.WriteLine("Enter the desired Timespan");
        string s = Console.ReadLine();

        //ToDo: Make sure that s has the desired format

        //Get the TimeSpan, create a new list when the string does not contain a whitespace.
        TimeSpan span = s.Contains(' ') ? extractTimeSpan(new List<string>(s.Split(' '))) : extractTimeSpan(new List<string>{s});

        Console.WriteLine(span.ToString());

        Console.ReadLine();
    }

    static private TimeSpan extractTimeSpan(List<string> parts)
    {
        //We will add our extracted values to this timespan
        TimeSpan extracted = new TimeSpan();

        foreach (string s in parts)
        {
            if (s.Length > 0)
            {
                //Extract the last character of the string
                char last = s[s.Length - 1];

                //extract the value
                int value;
                Int32.TryParse(s.Substring(0, s.Length - 1), out value);

                switch (last)
                {
                    case 'd':
                        extracted = extracted.Add(new TimeSpan(value,0,0,0));
                        break;
                    case 'h':
                        extracted = extracted.Add(new TimeSpan(value, 0, 0));
                        break;
                    case 'm':
                        extracted = extracted.Add(new TimeSpan(0, value, 0));
                        break;
                    case 's':
                        extracted = extracted.Add(new TimeSpan(0, 0, value));
                        break;
                    default:
                        throw new Exception("Wrong input format");
                }
            }
            else
            {
                throw new Exception("Wrong input format");
            }
        }

        return extr 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T20:38:05.567

您可以稍微改进您的方法

```
int d = 0;
int m = 0;
int h = 0;
int s = 0;

// Because of the "params" keyword, "new char[]" can be dropped.
string [] parts = textBox3.Text.Split(' ', ',');

foreach (string part in parts)
{
    char type = part[part.Length - 1];
    int value = Convert.ToInt32(part.Substring(0, part.Length - 1));
    switch (type) {
        case 'd':
            d = value;
            break;
        case 'h':
            h = value;
            break;
        case 'm':
            m = value;
            break;
        case 's':
            s = value;
            break;
    }
} 
```

现在您已经拥有了完整的非缺失部件集。缺失的部分还在`0`。您可以将值转换`TimeSpan`为

```
var ts = TimeSpan.FromSeconds(60 * (60 * (24 * d + h) + m) + s); 
```

这涵盖了所有情况！

# jquery - 需要一个响应式内容滑块

> ID：11180837
> 
> 赞同：3
> 
> 时间：2012-06-24T20:07:43.107
> 
> 标签：jquery, slider, responsive-design

有人知道响应式 jQuery 内容滑块吗？

我需要一个全宽滑块，其中一张图片向左或向右浮动，占据滑块区域的 50%。然后它需要有一个额外的文本区域占据幻灯片的其他 50%。

我可能梦想着不可能的事情，但如果有人能指出我正确的方向，那就太酷了。

也许幻灯片看起来有点像这样。

![滑块](../Images/ed8ab8c76b9288776dd005213b7ee716.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:57:50.520

查看[http://www.swiperjs.com/以获取基于移动的滑动解决方案，或对](http://www.swiperjs.com/)[http://www.woothemes.com/flexslider](http://www.woothemes.com/flexslider)进行一些调整

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T02:12:35.120

[Liquid Slider](http://liquidslider.kevinbatdorf.com/)是我写的一个完全响应的。内容可以是任何大小和形状。如果您有任何问题，请与我联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T19:38:56.327

Unslider 非常棒……非常小巧、强大、灵活。[http://unslider.com](http://unslider.com)

# java - 服务器上的 php javascript java applet 智能卡签名 pdf

> ID：11180838
> 
> 赞同：0
> 
> 时间：2012-06-24T20:07:46.433
> 
> 标签：java, php, javascript

我正在制作一个 php 应用程序，我在服务器上生成了 pdf 文件，该文件需要 2 到 60 人使用智能卡（使用智能卡读卡器）进行数字签名。

一个简单的按钮，上面写着

> 符号...

然后如果用户在阅读器应用程序中没有智能卡说：

> 插卡，

一个新的弹出窗口：

> 输入引脚，

一切以：

> 签署的文件。

可以做到吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:03:55.827

您将需要在用户计算机上运行并且允许突破其常规沙箱的东西，例如签名的 Java 小程序。有了这样的事情，一些 javascript + AJAX 以及与您的服务器的来回通信，您当然可以做您正在谈论的事情。

您可能必须从用户的计算机上载文件。

例如

[了解 Java Card 2.0](http://www.javaworld.com/javaworld/jw-03-1998/jw-03-javadev.html)

[如何编写一个 Java 智能卡小程序](http://www.javaworld.com/jw-07-1999/jw-07-javacard.html)

[官方 Java Card 技术站点](http://www.oracle.com/technetwork/java/javacard/overview/index.html)

作为比利时公民，我也有一种智能卡类型的[id-card](http://eid.belgium.be/en/)，可用于通过网络签署文件或通过[小程序访问事物](http://code.google.com/p/eid-applet/)

这很容易，现在这是另一个问题。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:55:20.967

我已经使用 bouncy castle 和 itext 库完成了小程序。我遇到的问题主要是在我的小程序和库的签名方式上。通过在 Eclipse 中使用 Ant 解决了这个问题。小程序可以在[http://www 看到。补偿meonline.com/applet/japplet.html](http://www.compensatemeonline.com/applet/japplet.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:22:08.983

```
package compensatemeonline8;

import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.*;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.security.*;
import java.security.cert.CertificateException;
import java.util.Enumeration;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import java.io.File;
import java.lang.reflect.Method;

public class CompensateMeOnlineApplet extends java.applet.Applet {
private static final long serialVersionUID = -5290769300644275624L;
String alias = new String();

@Override
public void init() {
    try {

        try {
            java.awt.EventQueue.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    initComponents();
                }
            });
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        File file = new File("..");
        System.out.println("where the pdf you should :"
                + file.getAbsolutePath());

        KeyStore keyStore = null;
        Provider pjacapi = Security.getProvider("CAPI");
        final Provider pmscapi = Security.getProvider("SunMSCAPI");

        System.out.println("pmscapi:" + pmscapi);

        if (pmscapi != null) {
            AccessController
                    .doPrivileged(new PrivilegedExceptionAction<Boolean>() {
                        @Override
                        public Boolean run() throws Exception {
                            pmscapi.setProperty("Signature.SHA1withRSA",
                                    "sun.security.mscapi.RSASignature$SHA1");
                            return true;
                        }
                    });

            keyStore = KeyStore.getInstance("Windows-MY", pmscapi);
            System.out.println("keystore: " + keyStore);

        } else if (pjacapi != null) {
            keyStore = KeyStore.getInstance("CAPI");
        }
        if (keyStore != null) {
            keyStore.load(null, null);
            Enumeration<String> enums = keyStore.aliases();

            while (enums.hasMoreElements()) {
                this.jComboBox1.addItem((String) enums.nextElement());
            }
        }

    } catch (IOException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (CertificateException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (KeyStoreException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (Exception ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    }
}

/**
 * This method is called from within the init() method to initialize the
 * form. WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jComboBox1 = new javax.swing.JComboBox();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();

    setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

    jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(
            new String[] { "Choose signature to sign with" }));

    jButton1.setText("Sign");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Exit");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                    layout.createSequentialGroup()
                            .addContainerGap()
                            .addGroup(
                                    layout.createParallelGroup(
                                            javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                    layout.createSequentialGroup()
                                                            .addComponent(
                                                                    jComboBox1,
                                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addPreferredGap(
                                                                    javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                            .addComponent(
                                                                    jButton1,
                                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                    75,
                                                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addGap(0,
                                                                    89,
                                                                    Short.MAX_VALUE))
                                            .addGroup(
                                                    javax.swing.GroupLayout.Alignment.TRAILING,
                                                    layout.createSequentialGroup()
                                                            .addGap(0,
                                                                    0,
                                                                    Short.MAX_VALUE)
                                                            .addComponent(
                                                                    jButton2)))
                            .addContainerGap()));
    layout.setVerticalGroup(layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                    layout.createSequentialGroup()
                            .addContainerGap()
                            .addGroup(
                                    layout.createParallelGroup(
                                            javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(
                                                    jComboBox1,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jButton1))
                            .addPreferredGap(
                                    javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                    23, Short.MAX_VALUE)
                            .addComponent(jButton2).addContainerGap()));
}// </editor-fold>

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    alias = (String) jComboBox1.getSelectedItem();
    if (alias.equals("Choose signature to sign with")) {
        JOptionPane.showMessageDialog(jComboBox1,
                "Must select a signature to sign with!");
        // System.exit(1);
        return;
    }
    // JOptionPane.showMessageDialog(jComboBox1, alias);
    try {
        potpisi();
        JOptionPane.showMessageDialog(jComboBox1, "Document signed");

        // TODO add your handling code here:
    } catch (KeyStoreException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (NoSuchAlgorithmException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (CertificateException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (UnrecoverableKeyException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (DocumentException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (InvalidKeyException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (SignatureException ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    } catch (Exception ex) {
        Logger.getLogger(CompensateMeOnlineApplet.class.getName()).log(
                Level.SEVERE, null, ex);
    }
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    System.exit(1); // TODO add your handling code here:
}

// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JComboBox jComboBox1;

// End of variables declaration
@Override
public void start() {

}

public void potpisi() throws KeyStoreException, IOException,
        NoSuchAlgorithmException, CertificateException,
        UnrecoverableKeyException, DocumentException, InvalidKeyException,
        SignatureException, Exception {

    KeyStore ks = null;
    Provider pjacapi = Security.getProvider("CAPI");
    final Provider pmscapi = Security.getProvider("SunMSCAPI");
    if (pmscapi != null) {
        AccessController
                .doPrivileged(new PrivilegedExceptionAction<Boolean>() {
                    @Override
                    public Boolean run() throws Exception {
                        pmscapi.setProperty("Signature.SHA1withRSA",
                                "sun.security.mscapi.RSASignature$SHA1");
                        return true;
                    }
                });

        ks = KeyStore.getInstance("Windows-MY", pmscapi);
    } else if (pjacapi != null) {
        ks = KeyStore.getInstance("CAPI");
    }
    if (ks != null) {
        ks.load(null, null);
    }

    ks.load(null, null);
    // ovo smo ubacili
    Enumeration en = ks.aliases();

    PrivateKey key = (PrivateKey) ks
            .getKey(alias, "password".toCharArray());

    java.security.cert.Certificate[] chain = ks.getCertificateChain(alias);

    PdfReader reader = new PdfReader(
            "Compensate.pdf");
    FileOutputStream fout = new FileOutputStream("signed.pdf");
    PdfStamper stp = PdfStamper.createSignature(reader, fout, '\0', null,
            true);
    PdfSignatureAppearance appearance = stp.getSignatureAppearance();

    appearance.setCrypto(null, chain, null,
            PdfSignatureAppearance.SELF_SIGNED);

    appearance.setReason("Potpis kompenzacije");
    appearance.setLocation("Foobar");
    appearance.setVisibleSignature(new Rectangle(100, 100, 200, 200), 1,
            "jedan");

    appearance.setExternalDigest(new byte[128], null, "RSA");
    appearance.preClose();
    Signature signature = Signature.getInstance("SHA1withRSA");
    signature.initSign(key);
    byte buf[] = new byte[8192];
    int n;
    InputStream inp = appearance.getRangeStream();
    while ((n = inp.read(buf)) > 0) {
        signature.update(buf, 0, n);
    }
    PdfPKCS7 sig = appearance.getSigStandard().getSigner();
    sig.setExternalDigest(signature.sign(), null, "RSA");
    PdfDictionary dic = new PdfDictionary();
    dic.put(PdfName.CONTENTS,
            new PdfString(sig.getEncodedPKCS1()).setHexWriting(true));

    appearance.close(dic);

}

} 
```

# iphone - 无法在 Xcode 4.3 中将 outlets/IBActions 添加到 .m

> ID：11180839
> 
> 赞同：1
> 
> 时间：2012-06-24T20:07:48.380
> 
> 标签：iphone, xcode

![在此处输入图像描述](../Images/a2ff21d454beefa683df240744eb29e5.png)

为什么我不能这样拖它？

它没有突出显示或您所说的内容，当我发布时没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:18:48.807

我认为你不能因为你的文件所有者没有连接到你的 viewController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:37:04.183

尝试这个：

1 在 .h 中声明一个 IBAction

```
@interface 视图控制器：UIViewController

- (IBAction)sampleSelector:(UIButton *)sender;
@结尾

```

2 现在尝试将按钮的已发送事件-> 触摸到左侧面板中的“First Responder”。现在你应该被允许绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:12:48.633

尝试拖入`.h`文件。以这种方式设置网点一直对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T22:42:25.230

如果您正在处理 nib 文件。您需要通过选择文件的所有者来指定相应的视图控制器。但我猜你正在使用故事板。因此，在情节提要的左侧视图中选择相应的视图控制器，选择就在第一响应者下方。

然后在实用程序部分（最右边的视图）中指定选择标识符部分（左起第三个..那个看起来像报纸）。在自定义课程部分中指定您相应的课程，您就可以开始了。

请注意，此 IBOutlets 仅在此步骤成功完成时才有效。

# ios - iOS 颜色选择器

> ID：11180840
> 
> 赞同：-3
> 
> 时间：2012-06-24T20:07:53.423
> 
> 标签：ios, ios5

我对 iPhone 完全陌生，有人可以建议我使用自动引用计数的颜色选择器吗？我需要通过选择颜色来创建简单的项目，我尝试添加 [https://github.com/hayashi311/Color-Picker-for-iOS](https://github.com/hayashi311/Color-Picker-for-iOS)，但我收到了 synthesize 关键字的错误。是否有任何已经成为框架一部分的颜色选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:12:57.500

您可以使用编译器标志为选择的文件禁用 ARC，例如您提到的颜色选择器`-fno-objc-arc`。更多信息：[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

# sql - SQL 计数的行数多于它的行数

> ID：11180844
> 
> 赞同：0
> 
> 时间：2012-06-24T20:08:23.353
> 
> 标签：sql, count, row

我有这些表：

**评论**

```
uid
id
pid 
```

**页面**

```
pid
user 
```

**用户**

```
id
rank
.
.
. 
```

这个查询：

```
SELECT
   u.*, 
   count(p.id) as 'pages',
   count(c.id) as 'comments' 
FROM 
  `users` u 
   LEFT OUTER JOIN `pages` p ON p.user = u.id
   LEFT OUTER JOIN `comments` c ON c.uid = u.id
GROUP BY u.id 
```

出于某种原因，当用户只有 1 条评论时，它会显示 2 条评论。

查询有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:11:38.800

问题是用户乘以他的页数，然后乘以他的评论数。解决此问题的一种方法是`count(distinct ..)`：

```
count(distinct p.id) as 'pages',
count(distinct c.id) as 'comments' 
```

# python - 是否有将整数转换为第一/第二/第三的库

> ID：11180845
> 
> 赞同：23
> 
> 时间：2012-06-24T20:08:31.043
> 
> 标签：python

我有一个整数列表 - 是否有一个库可以将它们转换为纯文本排名？IE: 1,2,3 -> “第一，第二，第三”？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2017-01-29T16:44:06.790

python[`inflect`](https://pypi.python.org/pypi/inflect)包有一个将数字转换为序数的方法：

```
import inflect
p = inflect.engine()

for i in range(1,25,5):
    print(p.ordinal(i)) 
```

显示：

```
1st
6th
11th
16th
21st 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T20:30:59.670

你打算去多高？（你有没有期望高于，比如说，“二十”？）

也许你只需要一个[`dict`](https://docs.python.org/2/tutorial/datastructures.html#dictionaries)，

```
nth = {
    1: "first",
    2: "second",
    3: "third",
    4: "fourth"
    # etc
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-28T18:57:17.760

由于要点，无法评论 ryvantage 的帖子，但我为 python 编写了相同的代码：

```
def appendInt(num):
    if num > 9:
        secondToLastDigit = str(num)[-2]
        if secondToLastDigit == '1':
            return 'th'
    lastDigit = num % 10
    if (lastDigit == 1):
        return 'st'
    elif (lastDigit == 2):
        return 'nd'
    elif (lastDigit == 3):
        return 'rd'
    else:
        return 'th'

def appendInt2(num):
    value = str(num)
    if len(value) > 1:
        secondToLastDigit = value[-2]
        if secondToLastDigit == '1':
            return 'th'
    lastDigit = value[-1]
    if (lastDigit == '1'):
        return 'st'
    elif (lastDigit == '2'):
        return 'nd'
    elif (lastDigit == '3'):
        return 'rd'
    else:
        return 'th' 
```

第二个更像是直接翻译，但我发现第一个变体要快得多：

2015 年 8 月 28 日星期五 11:48:13 结果

```
 300000005 function calls in 151.561 seconds

   Ordered by: call count, name/file/line

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
100000000    6.674    0.000    6.674    0.000 {len}
100000000   43.064    0.000   43.064    0.000 test.py:7(appendInt)
100000000   66.664    0.000   73.339    0.000 test.py:22(appendInt2)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.000    0.000  151.561  151.561 <string>:1(<module>)
        1    0.000    0.000  151.561  151.561 test.py:51(main)
        1   16.737   16.737   59.801   59.801 test.py:39(test1)
        1   18.421   18.421   91.759   91.759 test.py:45(test2) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-27T17:45:25.853

[与@](https://stackoverflow.com/users/33258/hugh-bothwell) [Hugh Bothwell](https://stackoverflow.com/users/33258/hugh-bothwell) [所遵循](https://stackoverflow.com/questions/11180845/is-there-a-library-to-convert-integer-to-first-second-third#11180993)的脉络类似，只是不使用 a `dict`（因为您的键已经很好并且是数字的），我将以下*“一个衬里”*放在一起：

```
ordinal=lambda x:["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth"][x-1] 
```

它涵盖了最多 12 个的所有情况。如果您需要更高（到数百个等），那么您可能需要更健壮的东西（我想像递归等）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-20T12:31:51.803

根据您的情况，您可能会发现保留整数并附加“st”、“nd”、“rd”和“th”很有用。如果是这样，这是一个简单的算法：

注意：此算法是用 Java 编写的。我不知道Python。任何想用 Python 重写它的人，请成为我的客人。

```
public static String appendInt(int number) {
    String value = String.valueOf(number);
    if(value.length() > 1) {
        // Check for special case: 11 - 13 are all "th".
        // So if the second to last digit is 1, it is "th".
        char secondToLastDigit = value.charAt(value.length()-2);
        if(secondToLastDigit == '1')
            return "th";
    }
    char lastDigit = value.charAt(value.length()-1);
    switch(lastDigit) {
        case '1':
            return "st";
        case '2':
            return "nd";
        case '3':
            return "rd";
        default:
            return "th";
    }
} 
```

所以

```
System.out.println(1 + appendInt(1));
System.out.println(2 + appendInt(2));
System.out.println(3 + appendInt(3));
System.out.println(4 + appendInt(4));
System.out.println(5 + appendInt(5));
System.out.println(11 + appendInt(11));
System.out.println(21 + appendInt(21)); 
```

显示

```
1st
2nd
3rd
4th
5th
11th
21st 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-20T09:37:13.330

一个漂亮而简单的重写：

```
def num_to_ith(num):
    """1 becomes 1st, 2 becomes 2nd, etc."""
    value             = str(num)
    before_last_digit = value[-2]
    last_digit        = value[-1]
    if len(value) > 1 and before_last_digit == '1': return value +'th'
    if last_digit == '1': return value + 'st'
    if last_digit == '2': return value + 'nd'
    if last_digit == '3': return value + 'rd'
    return value + 'th' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-28T22:37:24.503

我的代码使用列表、整数模数来查找第一个数字和整数下除法来检查规则 11 到 13。

```
 def stringify(number):
        suffix = ["th","st","nd","rd","th","th","th","th","th","th"]
        return str(number) + suffix[number % 10] if str(number // 10)[-1] != 1 else str(number) + "th" 
```

最后一行更具可读性：

```
 if str(number // 10)[-1] != '1':     
        return str(number) + suffix[number % 10]
    else:
        return str(number) + "th" 
```

基本上，我正在检查第二个数字的 1*，这表明可能存在第 11、12、13 个规则破坏者。对于规则保持者，列表由除以 10（模运算符）的其余部分引用。

我没有对代码效率进行任何测试，并且检查长度更具可读性，但这很有效。

*(str(number)[-2] 如果输入是单个数字，则生成 IndexError。对整数使用下除法始终会产生至少 1 位数字，因此字符串将始终具有 -1 索引）

# asp.net - 如何从头开始创建 http 响应？

> ID：11180847
> 
> 赞同：3
> 
> 时间：2012-06-24T20:08:36.450
> 
> 标签：asp.net, html, httpresponse, google-checkout

我有返回 http 响应的代码，但它也包含页面的内容。我怎样才能从头开始创建一个响应，以便它除了我放入的内容之外不包含任何内容？

我现在的代码：

```
GCheckout.AutoGen.NotificationAcknowledgment response = new GCheckout.AutoGen.NotificationAcknowledgment();
response.serialnumber = serialNumber;
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.BinaryWrite(GCheckout.Util.EncodeHelper.Serialize(response));
HttpContext.Current.Response.StatusCode = 200; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:13:46.830

设置状态码并写出响应内容后，调用[`HttpContext.Current.Response.End()`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)停止当前请求的执行。

# c#-4.0 - 与 sql 命令结合使用的 for 循环

> ID：11180848
> 
> 赞同：0
> 
> 时间：2012-06-24T20:09:26.747
> 
> 标签：c#-4.0, ado.net, sqlcommand

我有一个 SProc，它返回两次之间所有列的平均值，即 04:00 到 04:14。我希望有一个选项以相同的时间间隔返回 24 小时的结果（在这种情况下，时间间隔为 15 分钟。04:14 - 04:00）所以结果如下所示：

00:00 - 00:14 = x.xxx

00:15 - 00:29 = x.xxx

……

我假设我不能在 using 语句中更改 sqlcommand（特别是 SProc 的参数），并且需要在之前放置 for 循环，从而每次创建一个新的 SqlCommand 对象？

```
 for(int i = x; .....)
    {
        using (SqlCommand cmd = new SqlCommand())
        {
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:39:18.743

这是一种不错的方法，只要您不每次都打开新连接。不过，我不确定性能影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:40:32.803

如果您真的想使用 for 循环，那么您应该执行以下操作：

```
using(SqlCommand cmd = new SqlCommand())
{
  //Setup the command object and connection.
  for(int i=0; i<....)
  {
    cmd.CommandText = "set your dynamic sql here based on current iteration";
    var reader = cmd.ExecuteReader();
    //Now read you rows
  }
} 
```

我会在存储过程中的 SQL 中执行此操作，并为您的时间范围数据返回所有行。

# java - 为什么无论我将组件存储在何处，我的 Java 代码都不能在 Eclipse 中运行？

> ID：11180850
> 
> 赞同：0
> 
> 时间：2012-06-24T20:09:48.540
> 
> 标签：java, eclipse, error-handling

我对使用 Java 和 Eclipse 还很陌生，我正在尝试继续其他人创建的项目，该项目已在一组文件夹中提供给我，每个文件夹都包含几个 .Java 文档（主要是类）。我正在使用 Eclipse EE，并且我尝试编写自己的一些简单程序来让自己习惯 Eclipse 的一般格式，并取得了成功。但是，我绝对无法让项目代码运行。我采取的步骤是：

1.  创建了一个名为 SC 的新项目（它还自动创建了 src 文件夹和 JRE 系统库）
2.  通过执行 New > Folder 将项目文件夹直接添加到项目文件夹 SC（我没有在 src 中放置任何内容；我不确定这是否会导致问题）
3.  单击“运行”按钮（我尝试同时作为 Java 小程序和 Java 应用程序运行）

在原始项目的预先存在的文件夹中有一个 main 函数，它位于一个单独的 .Java 文件中，而不是任何文件夹或 src 文件夹中，它使用了一些其他 Java 类。但是，当我单击主文件的“运行”时，它给了我错误“编辑器不包含主类型”，这显然是错误的。我不确定这是否是因为我没有将文件夹上传到 src 文件夹，或者将所有文件夹放入同一个包或其他东西中，但它根本无法运行。我还尝试通过将文件夹全部添加到 src 文件夹中来重新排列这些文件夹，以查看会发生什么，但是每当有关于导入 JPanel 等 Java 包的行时，这都会导致大量错误。我觉得这个问题应该很容易解决，但我可以' 不知道它是什么，因为我对 Eclipse 的了解如此有限。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:16:10.160

如果没有更多关于您所使用的内容和结构的详细信息，就很难给出详细的建议。但是 Eclipse 确实包含一些关于设置项目的优秀教程和文档。打开帮助 > 帮助内容，然后导航到**Java 开发用户指南**>**入门**在此您将找到帮助入门和配置各种布局项目的教程。我强烈建议花时间阅读整个教程部分——从长远来看，它会带来十倍的回报；这比在自己周围挣扎着尝试同时学习 Java 和 Eclipse 要好得多。

从提供的有限信息来看，我的第一个想法是您的源文件夹 ( ) 中没有任何 Java 代码`src`；我认为其中一个或多个教程将帮助您正确组织事情。

# php - 我将 sql 语句存储在 blueimp/jQuery-File-Upload 的数据库中的位置？

> ID：11180852
> 
> 赞同：1
> 
> 时间：2012-06-24T20:09:55.063
> 
> 标签：php, javascript, jquery, sql, ajax

我正在使用[Blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)进行多个图像上传，我将 sql 语句用于在数据库中为 blueimp/jQuery-File-Upload存储**图像文件名的位置？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T20:33:23.880

在您的 blueimp_root > server > php 文件夹中，打开并在右侧`upload.class.php`添加您的代码：`public function post()``header('Vary: Accept');`

```
$con = mysql_connect("localhost","root","root");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("zeeshan", $con);
for($i=0; $i<count($info); $i++) {
    if (!isset($info[$i]->error)) {
        $filename = $info[$i]->name;
        mysql_query("INSERT INTO zeeshan.scroll_images (scroll_images.name, scroll_images.order) VALUES ('$file_name', 0)");
    }
} 
```

这将遍历所有上传，检查它们是否成功并将其文件名插入数据库。

您也可以使用`$info[$i]->url`来获取上传的文件`url`。

如果您需要更多参考，这是我原始查询的完整代码：http: [//codepaste.net/p84dao](http://codepaste.net/p84dao)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:25:50.310

转到 server/php/upload.class.php 行：313，添加新行并写入：

```
$file_path = $this->options['upload_dir'].$file_name; 
```

并回显这个，它是上传文件的路径，如果是真的，在那里写你的sql查询。

# ruby-on-rails-3 - button_to 助手，里面有嵌套标签

> ID：11180860
> 
> 赞同：1
> 
> 时间：2012-06-24T20:10:58.220
> 
> 标签：ruby-on-rails-3

rails guru 可以告诉我如何使用`button_to`帮助程序生成此代码：

```
<a class="btn btn-primary" href="#"><i class="icon-shopping-cart icon-white"></i> Primary</a> 
```

到目前为止我有这个，但我不知道如何将`i`标签嵌套在里面：

```
<a class="btn btn-primary" href="#"><i class="icon-shopping-cart icon-white"></i> Primary</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T15:17:37.677

# 解决方案 1

使用 Rails 4。

Rails 4 中的 button_to 可以传递像 link_to 这样的块

# 解决方案 2

我构建了一个名为 button_link_to 的 gem。

使用 button_link_to 方法将生成按钮标签，但不会被表单标签嵌套。

只需像 link_to 一样使用它。

在你的情况下：

```
<%= button_link_to link_path do %>
    <i class="icon-shopping-cart icon-white"></i> Primary
<% end %> 
```

您可以从这里获得更多信息：[https ://github.com/tonilin/button_link_to](https://github.com/tonilin/button_link_to)

如果你想看演示：[http ://button-link-to.herokuapp.com/](http://button-link-to.herokuapp.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:39:57.820

我不确定`button_to`，但`link_to`可以将一段代码用作`<a>`标签的主体。

因此，如果您像这样创建按钮，它应该可以工作：

```
<%= link_to your_link_path, class: "btn btn-primary" do %>
    <i class="icon-shopping-cart icon-white">Styled text.</i>
<% end %> 
```

**编辑**

或者使用更多 Rails 助手：

```
 <%= link_to your_link_path, class: "btn btn-primary" do %>
        <%= content_tag :i, class: "icon-shopping-cart icon-white" do %>
          Primary
        <% end %>
    <% end %> 
```

# cloud-foundry - 无法启动 Cloud Foundry 码头应用程序

> ID：11180863
> 
> 赞同：1
> 
> 时间：2012-06-24T20:11:28.633
> 
> 标签：cloud-foundry

我正在尝试在 Cloud Foundry 上启动一个 jetty runner 应用程序。代码是

[https://github.com/simbo1905/ZkToDo2](https://github.com/simbo1905/ZkToDo2)

可以在本地启动

```
java -Djetty.host=localhost -Djetty.port=8080 -DDATABASE_URL=jdbc:postgresql://postgres:postgres@localhost/postgres -jar jetty-runner-jmx.jar zktodo2.war 
```

所以我创建了一个postgresql

```
vmc create-service postgresql pgsql 
```

当将 jar 和 war 压缩成 zip 然后尝试部署到云代工厂时，它给了我一个内存不足的错误。是什么赋予了？

```
simbo$ vmc push zktodo2 --path=cf.zip 
Detected a Standalone Application, is this correct? [Yn]: Y
1: java
2: node
3: node06
4: ruby18
5: ruby19
Select Runtime [java]: \1
Selected java
Start Command: java -Djetty.host=${VCAP_APP_HOST} -Djetty.port=${VCAP_APP_PORT} -DDATABASE_URL=jdbc:postgresql://postgres:postgres@localhost/postgres -jar jetty-runner-jmx.jar zktodo2.war
Application Deployed URL [None]: 
Memory reservation (128M, 256M, 512M, 1G, 2G) [512M]: 1G
How many instances? [1]: 
Bind existing services to 'zktodo2'? [yN]: y
1: pgsql
Which one?: 1
Create services to bind to 'zktodo2'? [yN]: 
Would you like to save this configuration? [yN]: y
Manifest written to manifest.yml.
Creating Application: OK
Binding Service [pgsql]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (0K): OK   
Push Status: OK
Staging Application 'zktodo2': OK                                               
Starting Application 'zktodo2': .
Error: Application [zktodo2] failed to start, logs information below.

====> /logs/stderr.log <====

Could not create the Java virtual machine.

====> /logs/stdout.log <====

  Error occurred during initialization of VM
  Could not reserve enough space for object heap

  Delete the application? [Yn]: 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:40:26.367

Cloud Foundry 将您选择的内存分配的 -Xmx 设置添加到 JAVA_OPTS 环境变量中，您需要将其包含在启动命令中 (java $JAVA_OPTS -Djetty....)。或者，您可以在启动命令中包含 -Xmx。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:35:06.110

我确实使用jetty-runner[在 cloudfoundry 上部署了 ZkToDo2 。](http://zktodo2.cloudfoundry.com/)这是我使用的启动命令：

```
java -Djava.io.tmpdir=. -Dorg.apache.jasper.compiler.disablejsr199=true -Xmx512M -jar jetty-runner-jmx.jar --port ${VCAP_APP_PORT} zktodo2.war 
```

为了使 DATABASE_URL 与 cloudfoundry 提供的 postgresql 数据库的连接参数相匹配，我不得不对应用程序进行一些小的修改。

这是[拉取请求](https://github.com/simbo1905/ZkToDo2/pull/2)。

# python - Python 中是否可以使用 C++ 样式的日志记录宏？

> ID：11180865
> 
> 赞同：1
> 
> 时间：2012-06-24T20:11:33.467
> 
> 标签：python, c++, logging, macros

是否可以在 Python 中实现等效于以下（伪）代码？

```
#define DEBUG(topic, msg) LOG_IMPL(Logger.DEBUG, topic, msg)
#define INFO(topic, msg) LOG_IMPL(Logger.INFO, topic, msg)
#define LOG_IMPL(level, topic, msg) if(Logger.level() <= level) { Logger.log(level, topic, msg); }

DEBUG("MyComponent", "What you logging at?") 
```

这样做的好处是您不必评估字符串日志消息，例如加入字符串、调用 .format() 等）

**更新**：

[懒惰的记录器消息字符串评估](https://stackoverflow.com/questions/4148790/lazy-logger-message-string-evaluation)- 这回答了我的问题，所以我将投票关闭这篇文章。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T20:16:46.963

Python 附带了电池，并且 a[`logging module`](http://docs.python.org/library/logging.html)是 stdlib 的一部分：

```
from logging import getLogger

log = getLogger('my.module')

log.debug('Debug level messages')
log.warning('Warning!')
log.info('Informative message')
log.error('Error messages')
log.exception('Use this in an exception handler, the exception will be included automatically') 
```

上面的一组方法是该方法的快捷`log.log(level, msg)`方式，它采用任意（整数）级别，并且`logging`模块定义了`DEBUG`,`WARNING`和其他级别。

[这些方法支持对python 字符串格式化模板](http://docs.python.org/library/stdtypes.html#string-formatting-operations)的惰性求值；*仅*当消息的日志级别实际上超过正在记录的日志级别时，才会插入额外的参数：

```
log.warning('Warning message: the %s is missing %i frobnars', systemname, count) 
```

`'Warning message: the %s is missing %i frobnars' % (systemname, count)`仅当日志消息实际到达处理程序时，才会记录上述消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:15:27.790

对消息使用 lambdas 怎么样：

```
log( lambda : (string1 + string2 + "%d %d" % (val1, val2)) ) 
```

并且只有在启用日志记录的情况下才调用传入的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T20:19:19.720

你试过这个`logging`模块吗？例子：

```
import logging
logging.basicConfig(filename='example.log',level=logging.DEBUG)
logging.debug('This message should go to the log file')
logging.info('So should this')
logging.warning('And this, too') 
```

来源：[http ://docs.python.org/howto/logging.html#logging-basic-tutorial](http://docs.python.org/howto/logging.html#logging-basic-tutorial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:53:36.460

我想出了一个解决方案，允许对日志消息进行延迟评估，同时仍然允许我将自定义格式化程序和处理程序封装在一个小型日志记录代理类中。

除非写入日志消息（日志处理此问题），否则不会评估格式字符串；这是通过分别传递格式字符串和参数来实现的。

```
@classmethod 
def info(cls, component, msg, *args):     
    """Log an info message"""     
    cls.__log(cls.Level.INFO, component, msg, (args)  

@classmethod 
def __log(cls, level, component, msg, *args):    
    """Log a message at the requested level"""     
    logging.getLogger("local").log(level, " - ".join([component, msg.format(*args)])) 

Logger.info("MyComponent", "My message with arg '{0}'", "TestArg") 
```

# java - 内存中会创建多少个字符串对象？

> ID：11180866
> 
> 赞同：6
> 
> 时间：2012-06-24T20:11:33.943
> 
> 标签：java, string, memory, object

以下代码将创建多少个字符串对象？

```
String s="";
s+=new String("a");
s+="b"; 
```

我考试时有这个问题。我想知道正确答案。我说2个对象。
池中包含 "" 、 "b" 的对象和由 new String("a"); 创建的对象；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T20:32:56.213

我将回答另一个更清晰的问题：以下代码片段中涉及多少个 String 实例：

```
String s="";
s+=new String("a");
s+="b"; 
```

答案是 6：

*   空字符串文字：`""`;
*   字符串文字`"a"`；
*   字符串文字“a”的副本：`new String("a")`；
*   `s`通过连接和副本创建的字符串`"a"`；
*   字符串字面量`"b"`
*   `s`通过连接和创建的字符串`"b"`。

如果您假设之前加载的代码已经创建了三个 String 文字，那么代码片段将创建 3 个新的 String 实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T20:21:01.187

> 字符串 s="";

不创建对象。

> s+=新字符串("a");

创建五个对象。、`new String`StringBuilder 及其 char[] 以及 String 结果及其 char[]

> s+="b";

创建四个对象，StringBuilder 及其 char[] 和 String 结果及其 char[]

所以我一共得到了九个对象，其中三个是 String 对象

注意：您可以确定“”已经被加载，因为它出现在许多系统类中，包括 ClassLoader 和 Class。

就本问题而言，字符串“a”和“b”可能被视为新字符串，也可能不被视为新字符串。恕我直言，我不会计算它们，因为它们最多只会创建一次，如果这段代码只运行一次，那么创建多少个字符串就无关紧要了。更有可能有用的是知道每次运行代码时创建了多少对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:10:15.620

> 创建新字符串
> 
> 早些时候，我们承诺会更多地讨论创建字符串的各种方法之间的细微差别。让我们看几个如何创建 String 的示例，并进一步假设池中不存在其他 String 对象：

```
String s = "abc"; // creates one String object and one reference variable 
```

> 在这个简单的例子中，“abc”将进入池中，s 将引用它。

```
String s = new String("abc"); // creates two objects, and one reference variable 
```

> 在这种情况下，因为我们使用了`new`关键字，Java 将在普通（非池）内存中创建一个新的 String 对象，并`s`引用它。此外，文字“abc”将被放入池中。

来自 SCJP Sun Certified Programmer for Java 6 Study Guide (Exam 310-065).pdf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T20:36:32.747

在 JITC 情况下实际创建的对象数量是不确定的。JITC 可以很好地识别出这`new String("a")`是一个身份，并且没有`s`引用 的中间值，因此只创建了 StringBuilder。在一般情况下必须模仿几个潜在的副作用（例如，参数`new String()`可能无效），但对于文字，它们不会发生。

事实上，javac 可以很好地识别结果是“ab”，没有潜在的副作用，并且只生成该值的字符串文字。（它在稍微不太复杂的情况下进行字符串组合。）

# javascript - 有人解释为什么这没有填满广场

> ID：11180869
> 
> 赞同：0
> 
> 时间：2012-06-24T20:11:40.240
> 
> 标签：javascript, libpng

它只是沿着顶部和左侧边缘画一条红线，我不明白为什么。嵌套的 for 循环不应该遍历每个可能的 x,y 坐标吗？

```
function createSquare() {
    var height = 50;
    var width = 50;
    var img = new PNGlib(width, height, 256);
    var background = img.color(0, 0, 0, 0);

    for (var x = 0; x <= width; x ++) {
        for (var y = 0; y <= height; y ++) {
            img.buffer[img.index(x, y)] = img.color(0xFF, 0x00, 0x00);
        }
    }

    return ('<img src="data:image/png;base64,' + img.getBase64() + '">');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:20:00.640

我从未使用过 PNGLib（尽管尝试一下会很有趣），但根据我`<=`在`for`循环退出条件中使用的经验，几乎总是一个错误。)

# c++ - 如何创建指向对象的指针的复制构造函数（深拷贝）？

> ID：11180874
> 
> 赞同：1
> 
> 时间：2012-06-24T20:12:19.017
> 
> 标签：c++

如何创建指向对象的动态指针数组的深层副本？我相信这段代码，我只是为指向对象的指针分配新内存，但它们仍然指向同一个位置。因此，当我更改“复制”图像时，原始图像也会更改，反之亦然。

谢谢！

声明：

```
Class Scene
{
public: 
    .
    .
    .
    .
private:
    Image ** sceneImage;
    int * coordinateX;
    int * coordinateY;
    int inputMax;
}; 
```

在复制构造函数中...

```
 Scene::Scene (const Scene & source)
 {
    inputMax = source.inputMax;
    sceneImage = new Image*[inputMax];
    coordinateX = new int[inputMax];
    coordinateY = new int[inputMax];

    // copy even null indexes, because you can put images on null indexes
    for (int i = 0; i < inputMax; i++)
    {
        sceneImage[i] = source.SceneImage[i];
        coordinateX[i] = source.coordinateX[i];
        coordinateY[i] = source.coordinateY[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:15:32.500

立即放弃所有用途`new[]`。使用`std::vector`. 然后它会为你复制自己。此外，放弃所有使用拥有指针并使用智能指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:15:21.047

I suggest you rather use vectors for this. They are more elegant for dynamic arrays than pointers and will be automatically copied.

Use naked pointers only when it makes semantic sense (array≠pointer). This will only rarely be the case in C++.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T20:21:16.757

向量是个好主意。但是如果你不能重构所有的代码来使用它们：

```
for (int i = 0; i < inputMax; i++)
{
    sceneImage[i] = new Image( *(source.SceneImage[i] ));
    coordinateX[i] = source.coordinateX[i];
    coordinateY[i] = source.coordinateY[i];
} 
```

稍后您将需要删除这些图像。

# lisp - 在 Jess 中对数字列表求和

> ID：11180877
> 
> 赞同：1
> 
> 时间：2012-06-24T20:12:28.180
> 
> 标签：lisp, jess

我正在尝试总结 Jess 中的数字列表，但我不确定如何去做：

```
(deffunction sumAll ($?n) (return (+ ?n)))

(sumAll 1 2 3) 
```

上面的代码不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:57:56.620

这里有两种方法。您可以通过将函数调用构建为字符串并让解析器重新解析它来实现单线：

```
(deffunction sumAll($?args)
    (eval (str-cat "(+ " (implode$ ?args) ")" ))) 
```

或者你可以明确地进行迭代。

```
(deffunction sumAll($?args)
    (bind ?sum 0)
    (foreach ?num ?args
        (bind ?sum (+ ?sum ?num)))) 
```

第二个可能会更有效率。

# django - 干草堆和嗖嗖指数大小

> ID：11180878
> 
> 赞同：1
> 
> 时间：2012-06-24T20:12:33.760
> 
> 标签：django, django-haystack, whoosh

我正在使用 django haystack + whoosh 作为搜索后端。

当我运行索引更新时，它很容易创建具有相同大小的新索引文件并且索引增长非常快（假设我的内容变化很快，我想保持索引新鲜并每 5-10 分钟更新一次）。

那么这种行为是否可取？我可以减小索引大小吗？也许 whoosh 不能愚蠢地制作新的完整索引文件，而是使用一些增量来保持索引更小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:30:58.280

我知道 Whoosh 提供了一个 IndexWriter 对象，可用于将某个文件添加到索引中，而无需重新索引所有内容，但我不确定如何使其与 Haystack 一起使用。也许像

```
from haystack import site
site.get_index(model).update_object(instance) 
```

# java - OnTouchListener 不适用于相对布局

> ID：11180879
> 
> 赞同：17
> 
> 时间：2012-06-24T20:12:37.167
> 
> 标签：java, android

我有一个`RelativeLayout`在其中动态添加许多`TextViews`。我面临的问题是，每当我`TextViews`单独应用 onTouch 侦听器时，它都会检测到触摸，但是当我将触摸添加到我的相对布局时，它永远不会响应。

此代码可以很好地检测触摸事件：

```
TextView tv = new TextView(this);
tv.setText(values[i]);
Drawable d = getResources().getDrawable(R.drawable.level_small_corners);

tv.setClickable(true);
tv.setId(i+1);
tv.setTextSize(18);
tv.setOnTouchListener(cellTouch); 
```

但是当我在 myRelativeLayout 中添加所有这些 TextView 时：

```
myRelativeLayout.setOnTouchListener(cellTouch); 
```

现在，onTouchListener 永远不会被调用。为什么呢？

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="@android:color/black">
    .
    .
    .

    <ScrollView 
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"
        android:layout_below="@+id/levelFirstLayout"
        android:layout_marginBottom="70dp" > 

        <RelativeLayou
            android:id="@+id/wordsRelativeLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:focusable="true"
            android:focusableInTouchMode="true" >

        </RelativeLayout>

    </ScrollView> 
    .
    .
    .
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-24T20:16:23.377

在 myRelativeLayout.xml 添加：

```
android:clickable="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-20T08:25:46.277

这对我有用：

```
yourRelativeLayout.setOnTouchListener(new View.OnTouchListener() {  
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        //gesture detector to detect swipe.
        gestureDetector.onTouchEvent(arg1);
        return true;//always return true to consume event
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-25T02:38:50.107

```
tv.setClickable(true); 
```

导致您的布局，而不是触发触摸事件。尝试删除它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-28T13:16:10.777

您认为某些东西可能位于 myRelativeLayout 的“顶部”。如果是，它首先获得触摸事件。最糟糕的是，事件的默认处理是对事件不做任何事情，然后使用它。

一种解决方案是将此代码添加到应处理事件的视图（或布局）“上方”的任何显示组件上：

```
someView.setOnTouchListener (new View.OnTouchListener()
{
    @Override
    public boolean onTouch (View v, MotionEvent event)
    {
        return false;
    }
}); 
```

关键（显然）是返回 false。当您这样做时，该事件将不会被消耗，而是“向下”传递到您的相对布局中的某些东西——希望它是您希望它去的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-26T19:54:37.750

我知道这不是您问题的解决方案，但您的问题与我的问题最接近，所以也许这会对其他人有所帮助。

尽管在设计器中看起来是这样，但在某些设置下，布局实际上并不是“屏幕宽”。

宽度包裹，**填充/布局中没有点击事件**

```
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
```

或者这个，**填充/布局中没有点击事件**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="0dip"
            android:layout_height="fill_parent" 
```

使用匹配父级，**点击事件正在触发**

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T20:14:20.707

您必须`RelativeLayout`将此属性设置为 true：`android:clickable="true"`

# oop - Clojure 中使用什么来代替类和对象？你能举个例子吗？

> ID：11180882
> 
> 赞同：3
> 
> 时间：2012-06-24T20:13:04.797
> 
> 标签：oop, class, clojure

您能否提供一个示例，说明如何表示具有可变属性（例如 HP 和 position（3d 矢量））的“播放器”类，以及诸如 init、setter 和 getter 之类的函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T20:35:07.913

在真正惯用的 Clojure 中，您的“播放器”将是不可变的，您可能会将其表示为地图，例如：

```
{:type        :player
 :team        :red
 :hit-points  10
 :location    [17 9 6]} 
```

玩家可能包含在一个更大的“世界”数据结构中，并且会有一个纯函数`update-world`可以创建一个带有任何必要修改的新世界（例如将玩家移动到新位置）。

至于 getter / setter - 只需使用法线贴图操作功能。当您只是在操作标准 Clojure 数据时，通常不需要 getter/setter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:26:35.407

您还可以定义记录，它们具有与地图类似的界面和语义，但提供了一些好处。例如，访问记录中的成员比访问地图中的成员要快。此外，您可以在记录上扩展协议并将其用于记录上的快速多态调度。例如，您可以将绘图协议扩展到各种形状对象。根据 Rich Hickey (http://www.infoq.com/interviews/hickey-clojure-reader#) 的说法，使用协议帮助他们使用 Clojurescript 编译器。

例如

```
(defrecord Action [time key args state] 
    (comment protocol extension can go here)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T19:40:30.223

我同意 mikera，您应该尝试不可变地做到这一点，但是您专门要求可变属性，所以我可能建议的方式与 mikera 的答案非常相似，但是要在地图中使用[原子](http://clojure.org/atoms)，您可能会拥有可变属性想要改变。

```
(def player1
  {:type       :player
   :team       :red
   :hit-points (atom 10)
   :location   (atom [17 9 6])}) 
```

请注意，只有您可能想要更改的内容才包含在原子中。为了访问可变数据，您必须取消引用它，如下所示：

```
@(player1 :hit-points)
10 
```

为了设置您可以使用的值[`swap!`](http://clojuredocs.org/clojure_core/clojure.core/swap!)or [`reset!`](http://clojuredocs.org/clojure_core/clojure.core/reset!)，如下所示：

```
(swap! (player1 :hit-points) dec)
9
@(player1 :hit-points)
9
(reset! (player1 :hit-points) 2)
2
@(player1 :hit-points)
2 
```

这将是您制作一个播放器的示例，尽管您要求诸如 init、getter 和 setter 之类的东西。在这一点上，我应该说，我几乎没有 Clojure 之外的编程经验，所以我可能无法完全掌握那些会是什么，但这里是我将如何设置它。

```
(defn new-player
  [hit-points location]
  {:type       :player
   :team       :red
   :hit-points (atom hit-points)
   :location   (atom location)}) 
```

然后当我想制作一个新玩家时，我会这样做：

```
(def my-player
  (new-player 20 [0 0 0]))
{:type       :player
 :team       :red
 :hit-points #<Atom@1959415: 20>
 :location   #<Atom@12d0e49: [0 0 0]>} 
```

我认为没有必要明确地定义“getter”和/或“setter”，因为您可以通过取消引用来简单地获取任何可变数据，并使用[`swap!`](http://clojuredocs.org/clojure_core/clojure.core/swap!)或[`reset!`](http://clojuredocs.org/clojure_core/clojure.core/reset!)以与我在上面展示的方式完全相同的方式设置任何可变数据。话虽如此，如果你愿意，你可以这样做：

```
(defn get-hp
  [player]
  @(player :hit-points))
(defn get-loc
  [player]
  @(player :location))
(defn set-hp
  [player new-hp]
  (reset! (player :hit-points) new-hp))
(defn set-loc
  [player new-loc]
  (reset! (player :location) new-loc)) 
```

现在有了这些你可以做：

```
(get-hp my-player)
20
(get-loc my-player)
[0 0 0]
(set-hp my-player 17)
17
(get-hp my-player)
17
(set-loc my-player [0 1 1])
[0 1 1]
(get-loc my-player)
[0 1 1] 
```

由于这个答案还不够长，我认为在制作新玩家时包含默认值可能会很好。我可以想到一个简单但不一定优雅的方法来做到这一点：

```
(defn new-player
  ([]
   (new-player 20 [0 0 0]))
  ([hp-or-loc]
    (cond
      (integer? hp-or-loc) (new-player hp-or-loc [0 0 0])
      (vector? hp-or-loc)  (new-player 20 hp-or-loc)
      :else                (throw (Exception. "Value must be either integer for hp or vector for location."))))
  ([hp loc]
   {:type       :player
    :team       :red
    :hit-points (atom hp)
    :location   (atom loc)})) 
```

现在默认情况下，新玩家将拥有 20 hp 并位于 [0 0 0] 位置。如果传递了一个整数或一个向量，它将假定应该是 hp 或 location 的值（分别），否则它会抛出异常。

同样，我认为在大多数情况下，可变数据可能是不必要的，最简单的解决方案可能不是将问题设想为“如何制作这种可变数据结构”，而是“我如何创建新的、更新版本的不可变的数据，然后将这些数据传递回循环的开头，之后我可以更新并再次重复”。

希望其中一些是有帮助的。

# tableview - 如何填充在 JavaFx Scene Builder 中设计的 fxml 文件中定义的 TableView

> ID：11180884
> 
> 赞同：24
> 
> 时间：2012-06-24T20:13:24.567
> 
> 标签：tableview, javafx-2, builder, populate, scene

我想知道如何用数据填充 TableView... 我看到的所有示例都创建了一个包含列和所有内容的 TableView 并将其添加到场景中。全部在 java 代码中完成。

我想知道：如果我在 JavaFx Scene 构建器中设计我的“表单”。在那里定义所有的表和列。如何访问它以从 java 填充它？或者，如果有人可以向我指出一个适当的教程，请。

我在 JavaFx Scene Builder 中定义了我的表单 - 只有一个具有 3 列的 TableView

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="288.0" prefWidth="293.0" xmlns:fx="http://javafx.com/fxml">
<children>
    <TableView fx:id="tableView" layoutX="35.0" layoutY="28.0" prefHeight="200.0" prefWidth="227.0">
    <columns>
        <TableColumn prefWidth="75.0" text="UserId" fx:id="UserId" />
        <TableColumn prefWidth="75.0" text="UserName" fx:id="UserName" />
        <TableColumn prefWidth="75.0" text="Active" fx:id="Active" />
    </columns>
    </TableView>
</children>
</AnchorPane> 
```

我的 Java 代码中的 ResultSet 中有我的数据。

```
ResultSet rs = c.createStatement().executeQuery(SQL); 
```

我需要填充 TableView。

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-25T09:00:10.883

要访问 tableview，您需要定义 FXML 页面的控制器。添加

```
fx:controller="path.to.MyController" 
```

FXML 文件的属性`AnchorPane`。`@FXML`然后通过在这些变量前面添加注释来创建控制器并从 FXML 文件链接 TableView、TableColumns ：

```
package path.to;

public class MyController implements Initializable {

    @FXML private TableView<User> tableView;
    @FXML private TableColumn<User, String> UserId;
    @FXML private TableColumn<User, String> UserName;
    @FXML private TableColumn<User, String> Active;

    @Override
    public void initialize(URL location, ResourceBundle resources) {
        UserId.setCellValueFactory(new PropertyValueFactory<User, String>("id"));
        UserName.setCellValueFactory(new PropertyValueFactory<User, String>("name"));
        Active.setCellValueFactory(new PropertyValueFactory<User, String>("active"));

        tableView.getItems().setAll(parseUserList());
    }
    private List<User> parseUserList(){
        // parse and construct User datamodel list by looping your ResultSet rs
        // and return the list   
    }
} 
```

表格视图填充在`initialize`方法中。请注意，在控制器中，我们不会创建新的 tableview 或 tablecolumns，因为它们已经在加载 FXML 文件时创建。另请注意，TableView 和 Tablecolumn 变量名称必须与`fx:id`相应 FXML 文件中的值相同。因此，虽然 UserId、UserName 和 Active 名称不是方便的命名，但在 FXML 文件和 Controller 中将它们分别更改为 userIdCol、userNameCol 和 userActiveCol 等名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T14:00:33.007

你可以在你的控制器中做到这一点：

```
 @FXML
private TableView<User> table;
private List<User> users;

@Override
public void initialize(URL url, ResourceBundle rb) {
    // Set the columns width auto size
    table.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);
    table.getColumns().get(0).prefWidthProperty().bind(table.widthProperty().multiply(0.33));    // 33% for id column size
    table.getColumns().get(1).prefWidthProperty().bind(table.widthProperty().multiply(0.33));   // 33% for dt column size
    table.getColumns().get(2).prefWidthProperty().bind(table.widthProperty().multiply(0.33));    // 33% for cv column size
    table.getItems().setAll(this.users);
} 
```

# c - 强制 GCC 放弃将某些全局变量归零

> ID：11180892
> 
> 赞同：8
> 
> 时间：2012-06-24T20:14:49.673
> 
> 标签：c, gcc

有没有办法告诉 GCC 不要将特定的全局数组初始化为零？

我想保留一大块内存来存储我的代码管理的大型数据结构，所以我说：

```
#define SIZE_16_MB 0x01000000
BYTE mChunkSpace[SIZE_16_MB]; 
```

问题是 crtinit() 需要一百万年才能将这个空间初始化为零，而且根本没有必要。

有什么办法可以强制它不初始化那个空间？

目前我正在硬编码一个超出链接器所知的内存地址，但这不是一种特别强大的做事方式。

此外，这是一个缓慢的嵌入式 proc（50MHz Microblaze），所以不要假设我在谈论 PC。确实需要很长时间才能将该空间归零。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T20:37:34.560

您可以使用`gcc`属性将对象存储在另一个新的内存部分中，例如在`.noinit`内存部分中。

```
 BYTE mChunkSpace[SIZE_16_MB] __attribute__ ((section (".noinit"))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T20:29:50.917

尝试动态初始化：

```
BYTE* mChunkSpace = (BYTE*)malloc(SIZE_16_MB * sizeof(BYTE)); 
```

然后这个数据是未初始化的，等待你初始化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T20:58:52.553

您将在 SO 上获得的大多数答案都将倾向于 Visual Studio 或 GCC，无论是在通用平台（即 PC，无论是 Windows 还是 Linux）上，都将在“标准说......”引文中占据重要地位，这些都不适用于小型嵌入式系统，除非您碰巧正在运行嵌入式 Linux 或 Windows CE。

ouah 的答案可能最接近您的需要……如果您真正使用 GCC，也许正是您需要的。由于您想要的内存块非常大，可能会占用系统内存的大部分份额，因此最好的办法是在构建的链接器命令文件中定义一个特殊部分，或者通过 C、C++ 或汇编文件中的链接器指令定义. 这样做的语法因编译器而异。如果您在源/程序集文件中使用链接器指令，则可能需要指定有关内存区域的读/写能力等的属性……如果 Microblaze 没有 MMU/内存控制器，则可能不需要. 您需要在该部分的开头放置一个链接器符号，并在您的 C 代码中，使用“extern char symName[]”指令，这样你的 C 代码就可以在 reloc 中编译，链接器将用该节的实际地址覆盖。根据编译器和架构，您可能还需要使用某种“远”属性声明 symName[] extern；我对 Microblaze 的了解还不够，无法对此发表任何评论。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-24T20:26:01.870

该标准规定，在声明时未显式初始化的静态数据将被零初始化。您可以通过自己将第一个元素初始化为非零值来避免运行时初始化：

```
#define SIZE_16_MB 0x01000000
BYTE mChunkSpace[SIZE_16_MB] = {1}; 
```

请注意，如果您指定`0`，编译器可能只会将其存储在该`.bss`部分中，即，它仍将在运行时初始化。它不必这样做，但不这样做是愚蠢的。所以现在你的数组被扔进了这个`.data`段。

当然，这会使生成的可执行文件变得更大（确切地说是大约 16MB），但内存不会在运行时初始化。所以问题归结为什么对你很重要；将内存归零所需的时间，或生成的可执行文件大小？

# ios - 在自定义 UITableviewCell 中设置图像不会 *Stick*

> ID：11180898
> 
> 赞同：0
> 
> 时间：2012-06-24T20:15:33.250
> 
> 标签：ios, uitableview

我有一个自定义的 UITabvleViewCell ，其中有一个 UIImageView 。当在 cellForRowAtIndexPath 中设置单元格时，我可以很好地设置图像（尽管我没有）但是在某些条件下我需要更改图像并且一直在使用以下代码进行更改。

```
-(void)updateCellForUPC
{
    AppData* theData = [self theAppData];

    NSInteger cellIndex;
    for (cellIndex = 0; cellIndex < [productArray count]; cellIndex++) {

      NSString *cellUPC = [NSString stringWithFormat:@"%@",[[productArray objectAtIndex:cellIndex] objectForKey:@"UPC"]];

        if ([cellUPC isEqualToString:theData.UPC]) {

            OrderDetailCell *activeCell = [[OrderDetailCell alloc] init];
            activeCell = (OrderDetailCell *) [orderDetailTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:cellIndex inSection:0]];

            UIImage* image = [UIImage imageNamed:@"checkmark.png"];
            activeCell.statusImageView.image = image;
            activeCell.checked = YES;
        }
    }
} 
```

这有效，并且图像会更新，但是当您将单元格从屏幕上滚动并返回到屏幕上时，图像会被重置！

我需要它来*坚持新形象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:22:43.953

不建议这样做，因为您没有从未使用单元的出列机制中受益。在创建单元时考虑这样做，或者创建一个知道应该对哪些单元执行此操作的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:18:11.353

对于任何对我将来如何做到这一点感兴趣的人。

我制作了一个 NSMutableArray 并将索引添加为 NSString 。如果当时正在显示单元格，我还设置了单元格的图像。

```
-(void)updateCellForUPC
{
    AppData* theData = [self theAppData];

    NSInteger cellIndex;
    for (cellIndex = 0; cellIndex < [productArray count]; cellIndex++) {

      NSString *cellUPC = [NSString stringWithFormat:@"%@",[[productArray objectAtIndex:cellIndex] objectForKey:@"UPC"]];

        if ([cellUPC isEqualToString:theData.UPC]) {

            OrderDetailCell *activeCell = [[OrderDetailCell alloc] init];
            activeCell = (OrderDetailCell *) [orderDetailTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:cellIndex inSection:0]];

            UIImage* image = [UIImage imageNamed:@"checkmark.png"];
            activeCell.statusImageView.image = image;

            NSString *index = [NSString stringWithFormat:@"%d",cellIndex];
            [selectionArray addObject:index];
        }
    }
} 
```

然后在我的 cellForRowAtIndexPath 中，我只使用以下代码检查索引是否在数组中，如果是则设置我的图像。这样，当单元格被重绘（滚动）时，它就有了图像。

```
NSString *index = [NSString stringWithFormat:@"%d",indexPath.row];

if ([selectionArray containsObject:index]) {
    UIImage* image = [UIImage imageNamed:@"checkmark.png"];
    cell.statusImageView.image = image;
} 
```

# c# - 使用情节提要调用动态创建的用户控件中的方法

> ID：11180903
> 
> 赞同：0
> 
> 时间：2012-06-24T20:16:23.673
> 
> 标签：c#, wpf, user-controls, storyboard

以增加以下内容的清晰度。我正在考虑使用计时器或 storyboard.CurrentTimeInvalidated 但情节提要用于节拍器，时间以毫秒为单位：因此：

CurrentTimeInvalidated 不会从我在调试中看到的每毫秒引发事件，它似乎每 200 毫秒引发一次。

计时器必须在代码中初始化，显然这会在 storyboard.begin 中顺序发生。因此，计时器会在大约 30 秒的时间段内失准。

我认为标题几乎总结了我想做的事情，但是，很详细。

我有 8 个在运行时动态创建的用户控件。我有一个窗口在整个窗口的生命周期中运行故事板和动画（重复行为=永远和自动反转=真）。

我需要做的是在情节提要中以设定的时间间隔调用用户控件中的方法（按顺序）。

是否可以绑定到情节提要并创建调用用户控件方法的触发器？

谢谢

担。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:43:17.273

首先，WPF 帧率为 60 FPS，因此无法进行毫秒级的 UI 更新。如果要利用每一帧的渲染，请使用`CompositionTarget.Rendering`事件

[http://msdn.microsoft.com/en-us/library/system.windows.media.compositiontarget.rendering.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.compositiontarget.rendering.aspx)

# c# - C#中方法参数中的通用T

> ID：11180905
> 
> 赞同：0
> 
> 时间：2012-06-24T20:16:32.887
> 
> 标签：c#, .net, generics, methods, generic-list

我喜欢做这样的事情：

```
public static List<string> ItemsOfEnum(T typeT)
{
    List<string> items = new List<string>();
    foreach (typeT tItem in Enum.GetValues(typeof(typeT)))
       items.Add(tItem);
    return items;
} 
```

如何在不更改返回类型（List）的情况下获取参数列表中的“T”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T20:23:38.733

似乎很容易......但也许这就是你想要的？

```
public static List<string> ItemsOfEnum<typeT>()
        where typeT: struct, IComparable, IFormattable, IConvertible {
    List<string> items = new List<string>();
    foreach (typeT tItem in Enum.GetValues(typeof(typeT)))
       items.Add(tItem.ToString());
    return items;
} 
```

请注意，C# 不允许限制枚举，因此这些限制或多或少是您可以获得的关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:23:02.547

我认为您混淆了语法。我猜你想要这样的东西：

```
public static List<string> ItemsOfEnum<T>(T inputList) {...} 
```

在您的每个语句中，您需要将 typeT 与 T 交换。也许对于您的内部列表，您需要调用 toString 函数来获取字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:22:29.923

```
 public static List<string> itemsofenum<typet>()
  { ... } 
```

# rest - 如何为同一个 Azure blob 生成多个临时访问 URL？

> ID：11180908
> 
> 赞同：4
> 
> 时间：2012-06-24T20:16:57.800
> 
> 标签：rest, azure, azure-storage, azure-blob-storage

我们正在开发使用云中文件的不同客户端应用程序。文件必须通过安全的授权访问安全地存储在云中。此外，多个客户端应用程序必须可以同时通过临时 URL 读取这些文件。我们试图在 Azure 中实现这一点，但遇到了以下问题： - 当您将 blob 存储在私有容器中并生成共享访问密钥时，只有一个用户可以在特定时间读取该文件。系统是这样工作的：客户端应用程序要求 Web 服务器为该 blob 生成一个公共 URL 并将其返回以供使用。问题是如果一秒钟另一个客户端应用程序要求服务为同一个 blob 生成一个公共 URL。在那一刻，第一个变得无法使用。- 我们公开了容器，但我们无法保留 blob 的永久 URL

那么，我们如何为存储在私有容器中的同一个 blob 生成多个临时访问 URL（共享密钥或类似的）？将 URL 从 Windows Azure 传输到 Windows Azure 的最佳实践是什么，即使是临时的，例如 20 分钟，也不会被其他人捕获并重用它？任何解决方案都适用于未来的 CDN 集成吗？

我们感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T01:07:09.613

您可以为 blob 生成多个共享访问签名，并且它们都可以同时使用。每次生成新的共享访问签名时，听起来您可能无意中撤销了旧的存储访问策略。通过保留（并可能重复使用）旧的存储访问策略来解决问题。有关更多信息和示例代码，请参阅这些链接：

[http://msdn.microsoft.com/en-us/library/windowsazure/jj721951.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj721951.aspx)

[http://msdn.microsoft.com/en-us/library/windowsazure/ee393341.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee393341.aspx)

为了保护共享访问签名，您应该通过加密通道将其从服务器发送到客户端。为此使用 SSL 或类似的。

我不相信 CDN 解决方案可以帮助您满足您的要求。

# ruby - 定义的奇怪行为？（超级）检查

> ID：11180909
> 
> 赞同：10
> 
> 时间：2012-06-24T20:17:20.997
> 
> 标签：ruby, metaprogramming

最近，我遇到了一些`defined?`用于检查`super`关键字是否可以在当前上下文中使用的运算符的奇怪行为。通常它工作得很好，但是当我尝试将`defined? super`检查与一点点元编程结合起来时，它给了我意想不到的结果。

显示然后描述起来更容易，所以这里有一个提炼的例子来说明这个问题：

```
class A; 
  def self.def_f!; 
    singleton_class.send(:define_method, :f) { defined? super }
  end
end
class AA < A; end 
```

（`A`和`AA`类都有`.def_f!`类方法）

```
A.def_f!

A.f  # => nil
AA.f # => nil 
```

（`A.f`没有 super 和`AA.f`dispatch to `A.f`，所以到目前为止一切都很好，但是......）

```
AA.def_f! # define its own .f method in the AA class

AA.f # => "super"
A.f  # => "super" # WHY??? 
```

谁能解释我最后一行？`A.f`没有超级方法，那为什么它返回`"super"`而不是`nil`？它是一个错误吗？

（我在 1.9.2 和 1.9.3 中尝试过——结果相同）

**UPD：**我在 Ruby bugtracker 上开了一张票：http: [//bugs.ruby-lang.org/issues/6644](http://bugs.ruby-lang.org/issues/6644)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T12:17:02.920

好的，所以@Niklas 是对的，我向 Ruby bugtracker 报告了这个问题，他们确认并修复了这个错误：[https](https://bugs.ruby-lang.org/issues/6644) ://bugs.ruby-lang.org/issues/6644 。

据我了解，该修复程序将包含在 ruby​​ 2.0.0 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:25:31.030

是的，有一些怪癖`define_method`，这`defined?(super)`真的不是问题，但更多的是`define_method`. 话虽如此，每当我遇到像这样的边缘情况时`define_method`，我通常只是最终评估一串 Ruby 代码，它总是按预期工作。

```
module M;
  def def_f!
    singleton_class.class_eval <<-RUBY
      def f
        defined?(super)
      end
    RUBY
  end
end

class A; extend M; end
class AA < A; end

A.def_f!

p A.f  # => nil
p AA.f # => nil

AA.def_f! # define its own .f method in the AA class

p AA.f # => "super"
p A.f # => nil 
```

至于为什么它会这样工作，我对 Ruby 的源代码没有足够的经验来知道，也许比我了解更多的人可以插话。但出于实际目的，评估字符串一直对我有用。

# c - 为什么这个简单的多线程程序在 eclipse - mingw32/gdb 中冻结？

> ID：11180911
> 
> 赞同：0
> 
> 时间：2012-06-24T20:17:45.650
> 
> 标签：c, multithreading, gcc, gdb, mingw

下面的程序绝对随机地在 GDB 7.4（MinGW32、Eclipse、Windows）中保持挂起/冻结，估计大约每 5 或 6 次运行。通过在 Eclipse 中混合调试按钮，然后检查尚未终止的调试实例，最容易找到它。您当然可以通过像正常人一样运行它来做同样的事情，并且很可能很快就会得到相同的结果。

未连接到 GDB 时，样本永远不会冻结。曾经。我也无法在 VC++ Express 下暴露同样的问题（这是一个不同的示例，但实际上只是相同的想法）。

它主要围绕线程创建、线程删除和程序终止。另外值得注意的是，即使 main 返回 -1 作为退出代码，当附加到 GDB 时，只要程序不冻结它就会以代码 0 退出。

另一个有趣的事实——当我取消注释“Sleep(1)”调用它停止挂起 80% 的时间。但是，当它确实冻结时，它会在打印“Return -1\n”后冻结。所有其他终止继续返回 0（除了没有 gdb 运行时）。

废话不多说，代码：

```
#include <stdio.h>
#include <windows.h>
#include <process.h>

void __cdecl callback(void *arg)
{
    int count = 0;

    while(count < 10)
    {
        printf("Thread 2(%i): looping %i\n", (int)arg, count);
        count++;
    }

    printf("Ending thread...\n");
    _endthread();
}

int main(int argc, char *argv[])
{
    // Mingw32 on windows w/ eclipse - fix console output not showing up until the app terminates
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);

    bool runMain = true;

    int runCount = 0;

    while(runMain == true)
    {
        if(runCount == 5)
        {
            printf("Thread starting... ");
            int result = _beginthread(callback, 0, (void*)5);
//          Sleep(1);

            if(result == 0)
                printf("[FAILURE]\n");
            else
                printf("[SUCCESS]\n");
        }

        printf("Thread 1: %i\n", runCount);
        runCount++;

        if(runCount == 20)
            runMain = false;
    }

    printf("Return -1\n");
    return -1;
} 
```

您认为是什么原因造成的，更重要的是 - 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-18T14:18:07.570

没有解决办法。GDB [#17247](https://sourceware.org/bugzilla/show_bug.cgi?id=17247)相关的错误。

向 gdb 或您的应用程序发送 SIGCONT 信号使其再次工作。

下次尝试运行此命令：

```
killall -s SIGCONT <gdb | your application process name> 
```

或者

```
kill -18 <gdb pid|application pid> 
```

# memory - 确定内存空间的函数

> ID：11180920
> 
> 赞同：0
> 
> 时间：2012-06-24T20:20:42.983
> 
> 标签：memory

我需要确定公式或函数来确定为在以下函数中存储内存地址而保留和/或分配的内存空间：通过从文本文件中获取数据来创建一个循环简单列表。我该如何实施？

这就是我创建循环简单列表的函数的样子：

```
void creare_lista(listaSimpla *&cap,ContBancar *cont)
{
        listaSimpla *nou = (listaSimpla*)malloc(sizeof(listaSimpla));
        nou->info=cont;
        nou->next=NULL;
        if(cap==NULL)
        {
            cap=(listaSimpla*)malloc(sizeof(listaSimpla));
            cap=nou;
            cap->next=cap;
        }
        else
        {
            listaSimpla *aux=cap;
            while(aux->next!=cap)
                aux=aux->next;
            aux->next=nou;
            nou->next=cap;
        }

} 
```

在 void main() 我有以下代码用于从文本文件中获取数据：

```
listaSimpla *cap=NULL;
    char buff[100];
    FILE *f;
    f=fopen("fisier.txt", "r");
    if(f)
    {
            while(!feof(f))
            {
                ContBancar *cont=new ContBancar;
                fscanf(f,"%d", &cont->nrCont);
                fscanf(f,"%s", &buff);
                cont->nume=(char*)malloc(strlen(buff)+1);
                strcpy(cont->nume,buff);
                fscanf(f,"%d",&cont->data.zi);
                fscanf(f,"%d",&cont->data.luna);
                fscanf(f,"%d",&cont->data.an);
                fscanf(f,"%f",&cont->sold);
                fscanf(f,"%f",&cont->rata);
                creare_lista(cap,cont);
            }
    fclose(f);
    } 
```

# java - 如何在 Java 游戏中表示和编程人、物品等之间的关系

> ID：11180923
> 
> 赞同：-3
> 
> 时间：2012-06-24T20:21:10.917
> 
> 标签：java

我将开发一款游戏，它将模拟人们相互交流的环境，游戏的目标是通过活动、购买武器、物品等来达到顶峰。有很多物品和模拟人的名字，我想知道如何存储和检索这些信息。我可以使用 XML 之类的东西或任何其他相关语言来做到这一点吗？我将使用 java btw 开发它

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:24:04.100

您几乎肯定会在这里需要一个关系数据库。我认为 MySQL 是最容易学习/开始使用/设置的，但如果有更多“开箱即用”选项，我肯定会很好奇。

# android - 带有ListView的android EditText检测变化

> ID：11180926
> 
> 赞同：0
> 
> 时间：2012-06-24T20:21:17.310
> 
> 标签：android, listview, android-edittext

我有一个简单的列表视图，其中包含一个 TextView 和一个使用 SQLITE 查询中的 SimpleCursorAdapter 填充的 Editview。我试图弄清楚用户何时离开 EditView，以便我可以进行一些简单的验证并更新数据库。我已经尝试了其他帖子中建议的几种方法来做到这一点，但我无法抓住这个事件。下面包括我尝试执行此操作的两种不同方法。请帮忙。我将不胜感激。

```
 private void showClasses(Cursor cursor) {

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.classrow, cursor, FROM, TO);

    setListAdapter(adapter);
    adapter.notifyDataSetChanged(); 

                //ATTEMPT 1     
    for (int i = 0; i < adapter.getCount(); i++){
        EditText et = (EditText) adapter.getView(i, null, null).findViewById(R.id.classpercentage);

        et.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            Log.d("TEST","In onFocusChange");

        }
    }); 

        //METHOD 2  
         et.addTextChangedListener(new TextWatcher(){ 
        public void afterTextChanged(Editable s) { 
            Log.d("TEST","In afterTextChanged");

        } 
        public void beforeTextChanged(CharSequence s, int start, int count, int after){Log.d("TEST","In beforeTextChanged");} 
        public void onTextChanged(CharSequence s, int start, int before, int count){Log.d("TEST","In onTextChanged");} 
    }); 

    }
} 
```

我在 LogCat 中没有看到任何内容，并且我在调试器中的断点没有被命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:31:29.150

您从中接收的视图`getView`未膨胀为`ListView`，因此您`TextWatcher`的工作未按预期工作。要使其工作，您必须创建自己的适配器。例如

```
public class MySimpleCursorAdapter extends SimpleCursorAdapter {
    public MySimpleCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
    }

    @Override
    public View getView(int pos, View v, ViewGroup parent) {
        v = super.getView(pos, v, parent);
        final EditText et = (EditText) v.findViewById(R.id.classpercentage);
        et.addTextChangedListener(new TextWatcher() { 
            public void afterTextChanged(Editable s) { Log.d("TEST", "In afterTextChanged"); } 
            public void beforeTextChanged(CharSequence s, int start, int count, int after) { Log.d("TEST", "In beforeTextChanged"); } 
            public void onTextChanged(CharSequence s, int start, int before, int count) { Log.d("TEST", "In onTextChanged"); } 
        }); 
        return v;
    }
} 
```

然后你的方法将被修改为此

```
private void showClasses(Cursor cursor) {
    SimpleCursorAdapter adapter = new MySimpleCursorAdapter(this, R.layout.classrow, cursor, FROM, TO);
    setListAdapter(adapter);
} 
```

# c++ - 将 C++ 对象传递给 CUDA 内核

> ID：11180927
> 
> 赞同：1
> 
> 时间：2012-06-24T20:21:23.403
> 
> 标签：c++, object, cuda

我有一段代码，其中包含我无权修改的对象。另一方面，我必须编写 CUDA 内核来进行一些计算。目前，我正在将所需信息转换为数组或结构并传递它。是否可以将这样的对象传递给 CUDA 内核，并且 CUDA 内核有什么方法可以访问该类的私有成员。也有人向我建议推力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:45:41.757

您可以在 CUDA 代码中使用 c++ 功能。它有一些额外的要求。例如，内核函数不能让我成为班级成员。对于使用您拥有的数据结构，它需要满足一些要求。

*   您需要在设备代码中使用的成员应注释为`__device__`
*   您需要实现`__device__`构造函数。
*   如果您的结构封装了指针，则需要在设备内存中分配。
*   您可以使用模板，但不能使用具有虚函数的类。

您可以在编程指南附录 D. C/C++ 语言支持中看到一些 c++ 数据结构的示例。

至于你的具体问题：

1.  是的，您可以在内核中传递对象。您需要`__device__`为它实现复制构造函数。
2.  您可以在类方法中访问私有成员。您应该实现`__device__`访问器方法以在类外使用它。**但是**您不能通过内核调用传递具有私有成员的类。

# c++ - Visual Studio (std::cout) 不打印我的变量值

> ID：11180930
> 
> 赞同：1
> 
> 时间：2012-06-24T20:21:37.493
> 
> 标签：c++, visual-studio-2010, cout

我很困惑为什么 cout 语句没有在函数 find_depth 中打印数组 c_braces_array 的内容；

我要做的就是传递一个数组并打印它的值。

```
#include <iostream>

int find_depth(char c_braces_array[], int no_of_braces)
{
    for(int i=0; i<no_of_braces; i++)
    {
        std::cout<<"val is:"<<c_braces_array[i]<<"F\n";
    }
    return 0;
}

int main()
{
    char braces[100] = {0};
    int ret_val = find_depth(braces, 100);
    std::cout<<ret_val;
    system ("pause");
    return 0;
} 
```

输出/输出：

> ...
> val is: F
> val is: F
> val is: F
> val is: F
> val is: F
> 0按任意键继续。. .

![在此处输入图像描述](../Images/ecbb212b0b927546d06da39f0c294e90.png)

编辑：我将数组初始化为包含主中的所有 0。所以我期待 0 被打印出来。我不确定 O（如哦！）的事情在哪里出现。有人可以解释一下吗？

我期待这个o / p

> 值是：0 F

编辑 - 2：伙计们，谢谢。感谢您指出错误。我也不明白为什么下面的行只用'a'而不是整个数组初始化大括号[0]。什么是初始化整个数组而不是运行 for 循环的正确方法。

现在我的代码如下所示。

```
main(){
        ...
    char a_char = 'a';
    char braces[100] = {a_char};
      }

find_depth(..)
{
     ...
    std::cout<<"val is:"<<c_braces_array_ptr[i]<<"X\n";
} 
```

O/P
内部 main：a
val is：aX
val is：X
val is：X
val is：X
val is：X
val is：X
val is：X
val is：X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:28:28.843

尝试：

```
std::cout<<"val is:"<< (int)(c_braces_array[i]) <<"F\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T00:56:35.807

似乎您的大部分问题都已得到解答，但为了完整起见，让我们回顾一下。

1.  没有在您期望的地方打印的原因是您已经初始化了数组以包含所有`0`值。A`0`是 c 字符串的空终止符，这意味着它标志着字符串的结尾。它也是一个非打印字符，我们不想以打印字符结束每个 c 字符串，这是没有意义的。如果你想要 ASCII 字符 0，你需要`'0'`它是 decimal `48`。（见：[http](http://www.asciitable.com/) ://www.asciitable.com/ ）
2.  当用数据声明和初始化一个数组时，它将用初始化列表中的相应数据填充每个元素。例如；`char myArray[10] = {'a', 'b', 'c'};`会用这些值初始化数组，`myArray[0] = 'a'; myArray[1] = 'b'; myArray[2] = 'c';`但是所有其他元素呢？它不假设您想要重复一个元素，它还假设您不想要垃圾。相反，它用值填充数组`0`。
3.  我假设您的下一个问题可能是“我怎样才能用不同的值填充它？” 如果不明确说明每个元素的每个值，就无法更改数组的初始化方式。*但是*- 您可以设置每个值。

    ```
    unsigned int i;
    char myArray[100]; // Don't waste time initializing any data yet.

    for(i = 0; i < 100; ++i)
    {
         myArray[i] = 'a'; // Set each element to 'a' - Now it's initialized!
    } 
    ```

    另一种选择是使用`memset();`，它是`<string.h>`. 这会将每个元素设置为给定值，并且对于您的情况可能是您所需要的。这样做是这样的：

    ```
    #include <string.h>

    char myArray[100]; // Declare, don't initialize.
    memset(myArray, 'a', 100); // Initialize by setting each value to 'a'! 
    ```

希望这有帮助！只是练习和玩弄 c 字符串以更好地理解它们可能会很有用。`'0'`请注意，和之间有区别`0`，`0`只是零的值，而`'0'`零字符的字符值。（阅读：）`48`。所以如果你想 memset 打印 0，你必须`memset(myArray, '0', 100);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:27:59.217

它正在尝试打印您的变量值。该值为 0，而不是`'0'`。0 不是可打印字符，因此无法打印任何内容。

# facebook - Facebook 实时更新 API：我没有收到对我的 callback_url 的请求

> ID：11180933
> 
> 赞同：1
> 
> 时间：2012-06-24T20:22:01.603
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

我目前正在尝试使用来自 Facebook API的[实时更新。](https://developers.facebook.com/docs/reference/api/realtime/)

我成功订阅了他们并收到了订阅验证。当我发出 GET 请求时

```
https://graph.facebook.com/[APP_ID]/subscriptions?access_token=[ACCESS_TOKEN] 
```

我收到 ：

```
{"data":[{"object":"user","callback_url":"http:\/\/example.com:8454\/social\/facebook\/realtime\/facebookrequest","fields":["books","friends","music"],"active":true}]} 
```

然后，我转到我的应用程序页面，其中有一个“连接到 Facebook”表单。此表单包含一个隐藏字段：

```
<input id="scope" name="scope" type="hidden" value="publish_stream,user_photos,email,user_likes,friends_likes"/> 
```

当我提交表单时，我被转移到 Facebook，在那里我必须为应用程序授予指定的权限。确认后，应用程序可以访问并显示我的 Facebook 电子邮件，因此注册成功！

使用同一个用户，我回到 Facebook 并在我的“音乐”部分添加了一个乐队。

我等待，等待，等待，但应用程序从未收到来自 Facebook 的 POST 请求来提醒它发生了变化！

当我使用像[http://web-sniffer.net](http://web-sniffer.net)这样的服务时，我可以使用 POST 请求调用指定的 callback_url url。所以我的服务器正在监听并且不涉及防火墙问题。

知道为什么它不起作用吗？我错过了什么吗？

我能做些什么来调试这个问题？

**更新 ：**

我终于能够收到实时更新，但仅限于“朋友”的变化！添加或删除*乐队*仍然不会触发 Facebook 的任何实时更新……很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:52:03.397

出于某种原因，注册“音乐”字段不正确。我尝试注册帮助页面上列出的*所有内容：*

```
feed, friends, activities, interests, music, books, movies, television, likes, checkins, location, events 
```

然后我在 Facebook 个人资料中添加了一个新乐队，我确实收到了实时更新！更新被列为“**提要**”changed_fields。所以似乎注册“饲料”字段修改是要走的路......

# actionscript-3 - 在 ActionScript 3 中动态改变图片而不闪烁

> ID：11180935
> 
> 赞同：0
> 
> 时间：2012-06-24T20:22:34.863
> 
> 标签：actionscript-3, flash, actionscript-2

我想在我的 Flash 文件中有一个可以从另一个程序更改的图像。

在 ActionScript 2 中，我使用了 a `Loader`，在 Timeline 中设置`contentPath`并制作了 a `Motiontween`，效果非常好。

但是现在在 Actionscript 3 中我也这样做了，我使用`UILoader`，我设置`source`并创建了 a`Motiontween`但现在图像消失了一小段时间，每次 Tween 重新开始时。

有没有办法正确地做到这一点？

我现在的代码：

```
var myXML:XML;
var myLoader:URLLoader = new URLLoader();

var text:String;
var imagePath:String;

myLoader.load(new URLRequest("C:/Flash/paths.xml"));
myLoader.addEventListener(Event.COMPLETE, processXML);

function processXML(e:Event):void
{       
    myXML = new XML(e.target.data);

    text = myXML.text;
    imagePath = myXML.path;

    TextContainer.text = team1name;
    imageContainer.source = team2logoPath;

    trace("trace");    
} 
```

文本不闪烁，但图像闪烁，所以我不认为 XML 加载器是它与 AS3 一起工作而不是与 AS3 一起工作的原因。

即使我每次只更改图像的来源，图像也会在短时间内不可见：

```
imageContainer.source = "C:/images/no_image.png"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:11:31.020

好的，您得到的闪烁是下载图像或在您提供的 3sample 中从磁盘加载图像所需的加载时间。如果您想避免这种情况，您需要以一种或另一种方式预加载图像。
您会发现开源预加载很容易。我要做的是创建一个图像容器数组，然后从舞台中删除当前元素，然后在您想要更改图像时将下一个元素添加到数组中。
使用此方法，您将源分配给项目，即使它没有显示，它也会下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:51:35.903

检查加载内容时是否触发 UILoader 的 Event.COMPLETE 事件，然后在事件处理程序中启动补间。

# php - 在 php 中更改值 xml，但使用节点名称 id-7 更改为 false

> ID：11180937
> 
> 赞同：0
> 
> 时间：2012-06-24T20:22:51.603
> 
> 标签：php, xml

> **可能重复：**
> [带有连字符名称的 SimpleXML Reading 节点](https://stackoverflow.com/questions/3626901/simplexml-reading-node-with-a-hyphenated-name)

我想更改一个 xml，但此代码失败。

我认为 php 中的变量名称（ID-1）有误。

chang.php

```
<?php 

include 'example.php'; 
$xml = new SimpleXMLElement($xmlstr); 
$xml->ID-1 = '8';
$xml->name = 'Big Cliff'; 
$xml->asXML('test2.xml');
echo $xml->asXML(); 
?> 
```

例子.php

```
<?php
$xmlstr = <<<XML
<?xml version="1.0" encoding="utf-8"?>
<film>
  <ID-1>29</ID-1>
  <name>adf</name>
  </film>
XML;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:42:37.863

**为什么这不起作用？**

请参阅 php 变量。变量中不能有“-”。在 PHP（可能是任何 C 类型语言）中，您不能使用连字符/破折号创建变量的要点一直是这样，因为该字符用于**减法运算符**。

[http://www.php.net/manual/en/language.variables.basics.php](http://www.php.net/manual/en/language.variables.basics.php)

变量名称遵循与 PHP 中其他标签相同的规则。**有效的变量名称以字母或下划线开头，后跟任意数量的字母、数字或下划线。**

如果您理解正则表达式：作为正则表达式，它会这样表达：'[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*'

**如果我不能用 '-' 控制元素名称怎么办？**

但是，从[文档](http://de2.php.net/manual/en/simplexml.examples-basic.php)中，可以通过将元素名称封装在大括号和撇号中来完成访问 XML 文档中包含 PHP 命名约定中不允许的字符（例如连字符）的元素。您可以将 var 包装在 {} 中以简化Xml elemnts 使这项工作[在这里](https://stackoverflow.com/questions/3626901/simplexml-reading-node-with-a-hyphenated-name)看到一些很好的解释 所以你仍然可以通过改变使它工作：

```
<?php 
include 'example.php'; 
$xml = new SimpleXMLElement($xmlstr); 
$xml->{'ID-1'} = '8';//change here
$xml->name = 'Big Cliff'; 
$xml->asXML('test2.xml');
echo $xml->asXML(); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:53:22.943

更改这些行：

```
$xml->{"ID-1"}[0] = '8';
$xml->name[0] = 'Big Cliff'; 
```

# javascript - localStorage 在 IE9 和 Firefox 中不起作用

> ID：11180941
> 
> 赞同：0
> 
> 时间：2012-06-24T20:23:35.667
> 
> 标签：javascript, firefox, internet-explorer-9, local-storage

我正在使用本地存储。我的代码在 Chrome 中完美运行，但在 IE9 和 Firefox 中却不行。

这是代码：

```
document.addEventListener("DOMContentLoaded", restoreContents, false);
document.getElementsByTagName("body")[0].onclick=function(){saveContents('myList','contentMain', event, this);};

function amIclicked(e, eleObject)
{
    alert("amIClicked");
    e = e || event;
    var target = e.target || e.srcElement;
    alert("target = " + target.id);
    if(target.id=='pageBody' || target.id=='Save')
        return true;
    else
        return false;
}

function saveContents(e, d, eveObj, eleObject) {
    //alert("saveContents");
    if (amIclicked(eveObj, eleObject)) {
        var cacheValue = document.getElementById(e).innerHTML;
        var cacheKey = "key_" + selectedKey;
        var storage = window.localStorage;
        //alert ("cacheKey = " + cacheKey + " ,cacheValue = " + cacheValue); 
        if(typeof(Storage)!=="undifined"){
        localStorage.setItem("cacheKey","cacheValue");
        }
        //alert ("Saved!!"); 
        var dd = document.getElementById(d);
        //document.getElementById("contentMain").style.display == "none";       
        dd.style.display = "none";
    }
}

function restoreContents(e,k) {
    //alert("test");
    if(k.length < 1) { return; }
    var mySavedList = localStorage["key_" + k];

    if (mySavedList != undefined) {
        document.getElementById(e).innerHTML = mySavedList;
    }
}

    <a onclick="ShowContent('contentMain','myList','Sample_1'); return true;" href="#" >Sample 1</a><br/><br/>
    <a onclick="ShowContent('contentMain','myList','Sample_2'); return true;" href="#" >Sample 2</a><br/><br/>

    <div style="display:none;display:none;position:absolute;border-style: solid;background-color: white;padding: 5px;"id="contentMain">
    <ol id="myList" contenteditable="true">
        <li>Enter Content here</li>
    </ol>
<!--<input id="editToggleButton" type="button" value="Edit"/>-->
</div> 
```

当我尝试使用 Firebug 调试 Firefox 中的代码时，我在不同的行中收到错误。我在这里完全困惑:)

这是我收到错误的代码：

```
function amIclicked(e, eleObject)
{
    alert("amIClicked");
    e = e || event;
    var target = e.target || e.srcElement;
    alert("target = " + target.id);
    if(target.id == 'pageBody' || target.id == 'Save'){
        return true;
    }
    else{
        return false;
    }
} 
```

我在 Mozilla Firefox 中遇到的错误是：

```
 target is undefined
[Break On This Error]   

alert("target = " + target.id); 
```

我已经宣布了目标

```
<body id="pageBody"> 
```

太迷茫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:42:47.747

您检查 localstorage 是否存在的方式有点不正统，实际上可能无法检测到旧版浏览器没有 localstorage。下面，您在此代码中有拼写错误，例如“未定义”：

```
var storage = window.localStorage;
//alert ("cacheKey = " + cacheKey + " ,cacheValue = " + cacheValue); 
if(typeof(Storage)!=="undifined"){
    localStorage.setItem("cacheKey","cacheValue");
} 
```

相反，这是检查 localStorage 是否可用的正确方法：

```
if(window.localStorage) { 
    localStorage.setItem("cacheKey","cacheValue"); 
} 
```

话虽如此，在这种情况下，这实际上并没有引起您的问题。相反，您指出调试器在这一行发现了一个错误：

```
if(k.length < 1) { return; } 
```

您还会看到以下错误：

```
SCRIPT5007: Unable to get value of the property 'length': object is null or undefined sample_1.html, line 157 character 3 
```

该错误消息中的关键信息是**对象为 null**。换句话说，您传入一个空值作为参数 k! 的参数！

DOMContentLoaded 事件没有传入这个参数；因此，对于您来说，现在最简单的方法可能是简单地使用全局变量，您可以从`restoreContents`函数内部访问它。

此外，正如@omri 在他的回答中指出的那样，+1 BTW，您将 cacheKey 作为字符串传递给 localStorage，而不是作为代表密钥的实际变量。这是正确的用法：

```
localStorage.setItem(cacheKey, cacheValue); 
```

这可能不是您代码中的所有问题，但这应该可以帮助您入门。*我可以为您建议的最好、最有用的提示是学习如何使用这些浏览器调试器*并学习识别错误消息的含义，因为我可以告诉您是新手。如有必要，请谷歌错误消息。如果你能学会使用这些工具，你会发现识别某些问题并想出解决这些问题的计划会变得容易得多。祝你好运！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:44:09.783

这在任何浏览器中都有效吗？！您将“cacheValue”作为字符串，typeof Storage 永远不会等于“未定义”（可能未定义），并且从未定义变量 selectedKey。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:08:37.190

我已经尝试了几个步骤 :) 对于 localstorage 我们需要 http 然后它只能在 IE9 中工作

但最后在 Tomcat 的帮助下，我创建了 http: 从那里我运行了 localstorage html 文件，它工作正常。

感谢在这里支持我的人

谢谢你

# django - method_decorator login_required 不起作用？

> ID：11180945
> 
> 赞同：0
> 
> 时间：2012-06-24T20:24:25.510
> 
> 标签：django, authentication, django-class-based-views

我是 django 新手，刚刚完成教程（第 4 部分），所以现在我想继续看看是否可以为我的项目添加一些身份验证。我想限制对 polls_results 页面的访问，您只能在登录时看到它。在最后一部分中，结果页面由一个通用视图（DetailView）提供服务，我将其子类化并添加了一个方法装饰器到覆盖的调度方法。

```
class VoteResults(DetailView):
    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(VoteResults, self).dispatch(*args, **kwargs) 
```

按照教程，在提交我的投票后，我希望看到一个`not authorized error`（401？），但即使我肯定没有登录，我仍然看到结果页面（没有错误）。我错过了什么吗？正如我相信的文档所示，所有中间件和已安装的应用程序都存在于 settings.py 中。

任何线索我在这里做错了什么？

可能是调度方法名称中的拼写错误。所以装饰器从未被击中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T23:16:32.847

代替装饰器，使用具有类似行为的 mixin。你可以自己写一个，但我强烈建议使用`LoginRequiredMixin`Django [Braces](http://django-braces.readthedocs.org/en/v1.2.2/access.html#loginrequiredmixin)。

编辑：详细说明，方法装饰器不起作用，因为您将其应用于错误的方法。您可以使用`login_required`, 但在 URLConf 中调用实际视图时，如下所示：

```
url(r'^my_url$', login_required(MyClassView.as_view()), name='my_view') 
```

但是，mixin 是一种更简洁、更通用的方法。

# android - Android系统中的irq/308-mxt224_是什么？

> ID：11180949
> 
> 赞同：0
> 
> 时间：2012-06-24T20:25:09.583
> 
> 标签：android, process

这是什么 irq/308-mxt224_ 进程？更具体地说，这个过程的功能是什么。我发现这个过程在 Android 中非常活跃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:36:03.720

按照描述的字母，得到了一个 Atmel mXT 224 触摸屏，所以我想没什么好担心的:)

很可能只是进程/内核驱动程序级别错误地将 logcat 中的信息发送到垃圾邮件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:43:53.383

它是触摸屏控制器的线程中断处理程序。

# php - 与 die() 的行为不一致

> ID：11180954
> 
> 赞同：-2
> 
> 时间：2012-06-24T20:26:08.847
> 
> 标签：php

当我使用[`die()`](http://php.net/die). 以下代码不产生任何输出：

```
die($test); 
```

但是，以下代码**会**输出存储在 $test 中的整数值：

```
die('test: ' . $test); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:28:39.643

die 与 exit 相同，并且由于 $test 是一个整数，因此您使用整数参数调用 exit。在您的第二个版本中，您正在创建一个字符串，这会导致显示该字符串。

看看这个：

[http://www.php.net/manual/en/function.exit.php](http://www.php.net/manual/en/function.exit.php)

```
void exit ([ string $status ] )
void exit ( int $status ) 
```

“如果状态是一个字符串，这个函数在退出之前打印状态。

如果 status 是一个整数，则该值将用作退出状态而不打印。退出状态应在 0 到 254 的范围内，退出状态 255 由 PHP 保留，不得使用。状态 0 用于成功终止程序。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:28:46.460

如果`$test`是整数，则不会打印。从[手册](http://us3.php.net/manual/en/function.exit.php)：

> 注意：如果是整数，PHP >= 4.2.0 不会打印状态。

# ruby-on-rails-3 - 在我的控制器内将 3 个哈希组合成一个数组

> ID：11180961
> 
> 赞同：0
> 
> 时间：2012-06-24T20:27:07.507
> 
> 标签：ruby-on-rails-3

我有一个带有 3 个哈希的控制器，我想将其组合成 1 个对象以传递给视图。

```
@feedorders = current_user.orders.order("created_at DESC")
@feedcustomers = current_user.customers.order("created_at DESC")
@feedbooks = current_user.books.order("created_at DESC") 
```

我该怎么回去做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:39:07.827

```
@combined = {orders: @feedorders, customers: @feedcustomers, books: @feedbooks} 
```

然后你可以得到订单

```
@combined[:orders] 
```

编辑：

如果您只想获得一个数组并且不在乎不同类型的对象混合在一起，那么您可以这样做

```
@combined = @feedorders + @feedcustomers + @feedbooks 
```

在视图中使用这样的数组可能会有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:12:36.717

将它们加在一起可能是最简单的解决方案，您可能还想重新调整存储方式。似乎您也希望它们排序，这意味着您应该将总和传递给这样的排序函数：

```
@combined = (@feedorders + @feedcustomers + @feedbooks).sort { |x, y| x.created_at <=> y.created_at} 
```

# java - 使用 JTwitter 更新 Twitter 状态

> ID：11180962
> 
> 赞同：0
> 
> 时间：2012-06-24T20:27:16.520
> 
> 标签：java, android

我正在尝试在 android 中编写一个代码，这将有助于从我的应用程序中更新我的 twitter 状态，但我遇到了问题。下面是代码片段

```
public void onClick(View v) {
    String statusText = edit.getText().toString();
    new PostToTwitter().execute(statusText);
}

public static String getLogtag() {
    return LOGTAG;
}

class PostToTwitter extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        try{
        Twitter twitter = new Twitter("screenname", "password");
        // twitter.getStatus("winterstein");
        twitter.setAPIRootUrl("https://twitter.com/#!/nindevworks");
        twitter.setStatus(params[0]);
        Log.d(TweetActivity.getLogtag(),"Successfully Posted: " + params[0]);
        return "Successfully Posted: " + params[0];
        } catch (TwitterException e) {
            Log.e(TweetActivity.getLogtag(),"Died ", e);
            e.printStackTrace();
            return "Failed Posting: " + params[0];
        }

    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        Toast.makeText(TweetActivity.this, "result " + result ,Toast.LENGTH_SHORT).show();

    }

} 
```

请有人解释一下这部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:04:09.013

您的代码中有几个错误...

首先：

```
Twitter twitter = new Twitter("screenname", "password"); 
```

您不能在 Twitter 上使用基于密码的登录。
（为什么存在这个构造函数？它是用于其他服务，比如支持 Twitter API 的 Wordpress 和 identi.ca）

您需要使用基于 oauth 的登录。

如果您拥有最新版本的[JTwitter](http://www.winterwell.com/software/jtwitter.php)`AndroidTwitterLogin` ，那么您可以使用一个名为的类来处理登录。

第二：

```
twitter.setAPIRootUrl("https://twitter.com/#!/nindevworks"); 
```

您不需要为 Twitter 设置 API 根 URL（这也适用于 Wordpress 或 identi.ca）

我希望这会有所帮助！

# .net - 将 Mef 的组装路径添加到 AppDomain 的 .Load 路径

> ID：11180966
> 
> 赞同：0
> 
> 时间：2012-06-24T20:27:51.027
> 
> 标签：.net, mef, .net-assembly

我有一个通过 Mef 加载某些（可扩展）功能的应用程序。因为这些模块（可能）使用 3rd 方控件（Telerik）我想最小化用户感知的加载时间（在使用上述控件打开表单时），我想预加载这些 Mef 模块引用的程序集。

我正在做的是使用 Assembly.GetReferencedAssemblies(..) 方法来获取每个 Mef 模块引用的程序集的名称并尝试使用 Assembly.Load(..) 它们。

由于模块位于文件系统上的“某处”（通常不同于 ExecutingAssembly 的路径），因此对于不在 Gac 中的这些 Mef 模块的引用，加载失败。

有什么办法可以修改我的 AppDomain.CurrentDomain 的程序集加载路径？我知道 AppDomain.AssemblyLoad 事件，但是使用它有点麻烦，因为每个模块可能驻留在不同的目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:33:59.587

您过去可以简单地调用`AppDomain.AppendPrivatePath`，但此方法现在被标记为已过时，因为它会引入加载顺序问题（[请阅读此处](http://blogs.msdn.com/b/dotnet/archive/2009/05/14/why-is-appdomain-appendprivatepath-obsolete.aspx)）。推荐的方法是更新您的配置以包含其他路径，或使用`AppDomainSetup.PrivateBinPath`（但后者将用于创建新的应用程序域时）。

要应用配置更改：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="bin;bin2\subbin;bin3"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

（直接从[相关的 MSDN 页面中](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)提取）。请注意，您可以通过用分号分隔多个探测路径来指定它们。您可以冒险使用`AppDomain.AppendPrivatePath(...)`.NET BCL v4.0，它仍然存在，但出于某种原因，它被标记为过时。

# c# - 端口扫描器慢

> ID：11180969
> 
> 赞同：0
> 
> 时间：2012-06-24T20:28:18.363
> 
> 标签：c#, .net, sockets

我在 C# 中制作了一个端口扫描器，但我似乎无法让它更快：

```
private void Scan()
{
    int startPort = Convert.ToInt32(txtFrom.Text);
    int endPoint = Convert.ToInt32(txtTo.Text);

    progressBar1.Value = 0;
    progressBar1.Maximum = endPoint - startPort + 1;

    for (int currPort = startPort; currPort <= endPoint; currPort++)
    {
        TcpClient tcpportScan = new TcpClient();
        tcpportScan.SendTimeout = 10;
        try
        {
            tcpportScan.Connect(txtIPaddress.Text, currPort);
            txtDisplay.AppendText("Port " + currPort + " open.\n");
        }
        catch (Exception)
        {
            txtDisplay.AppendText("Port " + currPort + " closed.\n");
        }
        progressBar1.PerformStep();
    }
} 
```

有谁知道如何加快这个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:30:39.683

在请求被视为失败之前，创建连接会超时，这就是让您的扫描如此缓慢的原因。使用异步代码和/或多线程来加快速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:34:12.353

以下 C# 4 代码将并行扫描端口，并在其中一项扫描完成时通知 UI。

每次扫描都由 ScanSinglePortTask 方法执行，该方法启动扫描并返回字符串结果以及要显示的消息。每个任务都以[LongRunning](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions)选项开始，以通知运行时并行运行大量任务是可以的，因为每个操作都会花费很长时间。

[每次扫描后，在 UI 线程上运行的新任务将使用TaskScheduler.FromCurrentSynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext)更新消息和进度条。

ToArray 调用是强制枚举 LINQ 查询和启动任务所必需的。任务数组可以与[Task.Factory.ContinueWhenAll](http://msdn.microsoft.com/en-us/library/dd321258)一起使用，以在扫描完成后运行一些其他代码，例如。更新忙碌指示器

```
 private void ScanP()
    {
        int startPort = Convert.ToInt32(txtFrom.Text);
        int endPoint = Convert.ToInt32(txtTo.Text);

        progressBar1.Value = 0;
        progressBar1.Maximum = endPoint - startPort + 1;

        var scans = from i in Enumerable.Range(startPort, 
                                               endPoint - startPort + 1)
                    select ScanSinglePortTask(i)
                        .ContinueWith(t => Report(t.Result),
                            TaskScheduler.FromCurrentSynchronizationContext());
        var tasks=scans.ToArray();

    }

    private Task<string> ScanSinglePortTask(int currPort)
    {
        return Task.Factory.StartNew(() =>
            {
                try
                {
                    using (var tcpportScan = new TcpClient())
                    {
                        tcpportScan.SendTimeout = 10;
                        tcpportScan.Connect(txtIPaddress.Text, (int) currPort);
                    }
                    return "Port " + currPort + " open.\n";
                }
                catch (Exception)
                {
                    return "Port " + currPort + " closed.\n";
                }
            }, TaskCreationOptions.LongRunning);
    }

    private void Report(object message)
    {
        txtDisplay.AppendText((string)message);
        progressBar1.PerformStep();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T00:56:29.690

尝试使用 parallel.foreach / for 循环。这会快很多。

```
 Parallel.For(0, 100, d =>
    {
        // Do processing here
        // d is the equivalent to i in a standard for loop             
    });

   List<int> numbers = new List<int>();
   Parallel.ForEach(numbers, n =>
       {
        // Do Processing here
        // n is the current item 
    }); 
```

这是我的博客的链接，其中包含更多详细信息。

[http://tsells.wordpress.com/2011/03/03/using-parallel-for-and-foreach-loops-in-net-4-2/](http://tsells.wordpress.com/2011/03/03/using-parallel-for-and-foreach-loops-in-net-4-2/)

# .net - 处理大文件

> ID：11180971
> 
> 赞同：1
> 
> 时间：2012-06-24T20:28:31.023
> 
> 标签：.net, f#

我有一个大型日志文件，需要在 Windows 8 上使用 F# 进行解析。服务器不断运行，通过添加新行来写入日志文件的末尾。每分钟检查一次日志文件是否有更改。我宁愿从最后读取并将新添加的行组合到先前解析的结果中，而不是重新解析整个文件。更好的是，我希望能够在文件更改时注册回调。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T15:44:13.097

您可以`Seek()`通过文件流执行此操作。像这样的东西：

```
open System.IO

let WatchLog directory file =
    // Keep track of last read position
    let lastRead = ref 0L

    // Function that's called whenever the file changes
    let processLog (e : FileSystemEventArgs) =
        // Open file, and seek to the last read location
        use fs = new FileStream(Path.Combine(directory, file), FileMode.Open, FileAccess.Read)
        fs.Seek(!lastRead, SeekOrigin.Begin) |> ignore

        // Read the rest of the file
        use sr = new StreamReader(fs)
        printfn "Reading log: %A" (sr.ReadToEnd())

        // Store the length so that we know how much to seek over next time
        lastRead := fs.Length
        ()

    // Create a FS watched to be notified when a file changes
    let fs = new FileSystemWatcher(directory, file)
    fs.Changed.Add(processLog)
    fs.EnableRaisingEvents <- true

WatchLog "M:\Coding\" "TestLog.txt" 
```

但是，由于某种原因，在我的机器上出现“该进程无法访问该文件，因为它正在被另一个 proc 使用”错误，我无法追踪。这些`use`语句应该在超出范围时进行处理，甚至显式调用`Close`也不能解决它：/

# java - 关于单选按钮的选中状态

> ID：11180977
> 
> 赞同：0
> 
> 时间：2012-06-24T20:29:01.563
> 
> 标签：java, android, xml, button, radio

我目前有一个布局，如果用户按下选项 1 按钮，则会设置一个新布局，其中选中右侧的单选按钮。然后“Checker”按钮获得一个新的 onClick 值。如何在 java 代码中更改它，以便 option1clicked 方法将第一个单选按钮选中的值设置为“true”。

另外，在我完成之后，我如何做到这一点，以便当我单击按钮时系统会检查选中的单选按钮？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="Checker"  
        android:onClicked="nobuttonpressed"    />

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"    >

    <Button
        android:text="Option 1"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:onClick="option1clicked"    />

    <RadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
             android:checked="false"
        android:layout_alignParentRight="true"  />

</RelativeLayout>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:text="Option 2"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:onClick="option2clicked"    />

    <RadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
             android:checked="false"
        android:layout_alignParentRight="true"/>

</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T03:04:51.473

试试这个，

在**Button 的 onClickListener() 中使用 radioButton1.setChecked(true)。**

例如：

```
button1.setOnClickListener(new onClickListener(){

      public void onClick(View v){

      radioButton1.setChecked(true);

      }

 } 
```

# java - Maven JAR 模块依赖于 WAR 中的类

> ID：11180980
> 
> 赞同：2
> 
> 时间：2012-06-24T20:29:18.657
> 
> 标签：java, maven, jar, war

我有一个打包为 .war 文件的应用程序。它有 GWT 代码和一组网络服务。

我想将 Web 服务代码移动到一个单独的 jar 文件中，这样就可以在没有它们的情况下构建应用程序。

**服务依赖于当前打包到 .war 文件中的代码，因此在 jar 文件的 pom.xml 中我指定了以下依赖项：**

```
<dependency>
    <groupId>my.group</groupId>
    <artifactId>my-war</artifactId>
    <version>1.0.4</version>
</dependency> 
```

**但是要打包 .war 存档，我还需要为 jar 指定一个依赖项，如下所示：**

```
<dependency>
    <groupId>my.group</groupId>
    <artifactId>my-services-jar</artifactId>
    <version>1.0.4</version>
    <scope>test</scope>
</dependency> 
```

**这导致循环依赖。**

我该如何解决这个问题？或者也许我应该采用不同的方法？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T20:35:21.010

再模块化一点 - 引入一个核心 jar，其中包含 my-war 和 my-services-jar 之间共有的依赖关系，然后你的依赖结构将不具有循环依赖。

```
my-war
    - core-jar
my-services-jar
    - core-jar 
```

# sharppcap - SharpPcap - 如何区分收入/传出数据包？

> ID：11180982
> 
> 赞同：2
> 
> 时间：2012-06-24T20:29:37.330
> 
> 标签：sharppcap

**简介：** *这个问题是关于使用 SharpPcap 进行数据包嗅探/发送的。*

*   其实主要的想法是：

有一个与服务器端通信的客户端应用程序。我制作了一个嗅探器，它记录了所有（由我的过滤器指定的）数据包。现在我只想将这些数据包重新发送回服务器端......不是从客户端......而是通过我自己的应用程序。一种模拟动作（假设按钮点击速度快 100 倍）

**问题是：**

1.我应该发送什么样的数据包：

*   原始数据包？
*   SharpPcap 解释数据包？`(ipPacket)`例如：
    `var rawPacket = Packet.ParsePacket(packet.Packet.LinkLayerType, packet.Packet.Data);
    var ipPacket = IpPacket.GetEncapsulated(rawPacket);`

*   `The payLoadData`只有？如果是.. 谁的payloadData？来自原始还是来自ipPacket？

2\. 有人可以提供一个非常好的和工作的代码。

3.如何区分是传入还是传出包？？

*谢谢你的合作！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:55:49.310

你可以试试这个：

```
var ipPacket = IpPacket.GetEncapsulated(rawPacket);
IPAddress localIPs = Dns.GetHostAddresses(Dns.GetHostName())[0];
if(localIPs.ToString()== ipPacket.SourceAddress.ToString())
{
//outgoing packet
} 
```

# .net - .net 的 ListBox 数据（大）需要太多时间才能显示

> ID：11180983
> 
> 赞同：0
> 
> 时间：2012-06-24T20:29:45.907
> 
> 标签：.net, vb.net, listbox

我是一个 .net 新手，我遇到了一个问题，列表框需要很长时间才能显示出来。

这在 java 中是不一样的（花费的时间非常少 - 最多一秒）。

那么，有什么补救措施吗？？，任何其他形式的控制？？或其他方式？

```
imports System.Threading
imports System.Windows.Forms

Class form1
         Inherits Form

    Public d As Object() = New Object(400000) {}

    Private lb As ListBox
    Public Sub New()
        lb = New ListBox()
        Controls.Add(lb)
    End Sub

    Public Sub update_list()
        For i As Integer = 0 To 400000
            d(i) = i
        Next
        lb.DataSource = d
    End Sub

    Public Shared Sub main()
        Dim fobj As New form1()
        Dim t As New Thread(AddressOf fobj.ShowDialog)
        t.Start()
        Dim t2 As New Thread(AddressOf fobj.update_list)
            t2.Start()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:19:10.367

您需要一个支持分页的控件，因为人类无法一次处理这么多数据（不管控件是否可以）。

[这](http://vb.net-informations.com/datagridview/vb.net_datagridview_paging.htm)是以这种方式使用 DataGrid 的一种方式。另请参阅[此问题](https://stackoverflow.com/questions/4848440/paging-control-for-windows-application)。

# c# - 检索 DataGrid 单元格值

> ID：11180988
> 
> 赞同：1
> 
> 时间：2012-06-24T20:30:29.793
> 
> 标签：c#, asp.net

我刚开始学习 ASP.Net。昨晚我正在研究网格视图，我通过直接向数据库发出命令来填充数据。我没有为我的网格定义任何模板字段，并且我已将 AutoGenerated 编辑按钮设置为 true。数据显示正确，但在尝试处理更新事件时我遇到了问题，因为我无法检索我正在更新的行的单元格值。

我搜索了很多，但所有检索单元格值的示例都基于模板字段，但在我的情况下，我没有在设计时定义网格的列。请帮我。

我的代码如下：（当我通过应用断点进行检查时，GridView1_RowUpdating 方法给出了空值）

```
 private void FillGrid()
        {
            SqlConnection con = new SqlConnection("Data Source=.\\sqlexpress;Initial Catalog=TestDatabase;Integrated security=true;");
            DataTable dt = new DataTable("Student");
            using (SqlDataAdapter adapter = new SqlDataAdapter("select name,age,Fathername,dob from student", con))
            {
                adapter.Fill(dt);
            }
            GridView1.DataSource = dt;
            GridView1.DataBind();
        }
        protected void Button1_Click(object sender, EventArgs e)
        {
            FillGrid();
        }

        protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            //Response.Write("RowDataBoundEvent Occured"+" "+e.Row.RowType+"\n");
        }

        protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
        {
            GridView1.EditIndex = -1;
            FillGrid();
        }

        protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
        {
            GridView1.EditIndex = e.NewEditIndex;
            FillGrid();
        }

        protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {

            string name = GridView1.Rows[e.RowIndex].Cells[2].Text;
            string age = GridView1.Rows[GridView1.EditIndex].Cells[3].Text;
            string salary = GridView1.Rows[GridView1.EditIndex].Cells[4].Text;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:40:44.217

查看 GridViewUpdateEventArgs.OldValues 和 GridViewUpdateEventArgs.NewValues。

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
 {
    string name = e.NewValues[2];
    string age = e.NewValues[3];
    string salary = e.NewValues[4];
 } 
```

# android - 我们还能从 Google Play 中删除从未发布过的应用吗？

> ID：11180996
> 
> 赞同：7
> 
> 时间：2012-06-24T20:31:38.233
> 
> 标签：android, google-play

我们开发和发布我们自己的应用程序以及供其他人在 Google Play 上发布的应用程序。当 Google Play 还是 Android Market 时，我们使用以下策略来测试我们为他人开发的应用程序中的许可代码：

1.  将应用上传（但不发布）到我们的发布者帐户。该应用程序包括我们的发布者公钥和许可证检查代码。
2.  在我们通过开发者控制台设置不同的许可响应时测试应用程序。
3.  当我们对一切正常工作感到满意时，我们从我们的 Android Market 帐户中删除了上传的应用程序。**我们可以这样做，因为该应用程序从未发布过。**
4.  将许可代码中的发布者公钥更改为我们合作伙伴的公钥。
5.  将 .apk 交付给我们的合作伙伴，以便在他们的 Android Market 上的发布者帐户中发布。**这很有效，因为我们已经从我们的 Android Market 帐户中删除了该应用程序。**

自从我们这样做以来，这是一年中最好的部分。有谁知道 Google Play 是否可以使用相同的策略？特别是，上面粗体部分仍然有效吗？是否仍然可以完全删除已上传但从未发布的应用程序的所有痕迹，以便其他人可以上传并发布它？

如果必须，我们会做的另一种选择是在我们的许可证测试阶段更改应用程序的包名称。但是，这很复杂，并且在我们改回包名称时会引入额外的错误。

另一种选择是让我们的合作伙伴为我们设置一个用户帐户。但是，虽然可以限制用户帐户查看财务数据，但他们不能（据我们所知）仅限于使用单个应用程序。我们可以理解为什么合作伙伴不想允许如此广泛的访问。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T20:09:02.220

更新答案：

遗憾的是，Google Play 根本不再支持草稿应用程序。所以整个策略都失效了。有关Google 提供的替代方案，请参阅[有关测试应用内结算的 Android 文档。](http://developer.android.com/google/play/billing/billing_testing.html#draft_apps)

原始答案：

好吧，答案是该策略仍然有效。如果您从未发布过该应用程序，您可以从 Google Play 中删除该应用程序的所有痕迹，然后另一个发布者帐户可以上传具有相同软件包名称的应用程序。您需要做的就是停用（如有必要），然后删除所有 .apk 文件，该应用程序将从您的开发者控制台中消失。

如果该应用程序曾经发布过，这将不起作用。您可以取消发布应用程序，但不能删除在应用程序发布时曾经处于活动状态的任何 .apk 文件。（据我所知，这种行为没有记录。）这很不幸；如果能够完全删除任何人从未下载过的应用程序的所有痕迹，那就太好了。更好的是模拟 Google Play 各个方面的沙盒区域，包括购买您自己的应用程序（并支持通过模拟器进行操作）。

I also discovered that the delays involved in propagating changes to all Google Play servers seems worse than it did a year ago with Android Market. In one case, when testing license responses I had to wait two hours after uploading (but not publishing) an app before the response came back as anything from "NOT_MARKET_MANAGED".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:19:16.437

您需要做的就是转到 APK 文件并删除控制台中的每个 .apk 文件，这将从 Google Play 中删除该应用程序，我已尝试未发布。但不是为了出版。

PS。我只是用我的一个做测试：D

# redis - redis dump.rdb / 保存小文件

> ID：11180999
> 
> 赞同：35
> 
> 时间：2012-06-24T20:32:25.737
> 
> 标签：redis

## 语境

*   我正在使用redis。数据库小于 100 MB。
*   但是，我想进行每日备份。
*   我也在 Ubuntu Server 12.04 上运行

输入时：

> **redis-cli**保存

我不知道 dump.rdb 保存到哪里（因为 redis 是作为服务启动的，而不是在我的本地目录中）。

## 问题：

1.  如何找到 redis 将我的 dump.rdb 保存到的位置？

2.  有没有办法我可以指定一个文件名来“保存”，所以我输入如下内容：

    > **redis-cli**保存 ~/db-2012-06-24.rdb

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-17T12:06:22.967

更有帮助...如何查找或设置redis保存dump.rdb文件的位置（ubuntu服务器）：首先找到redis.conf文件：在终端运行：

```
ps -e aux | grep redis 
```

我在以下位置找到了我的 redis.conf 文件：

```
var/etc/redis/ 
```

如果您的位置相同，则使用以下命令打开文件：

```
pico var/etc/redis/redis.conf 
```

寻找：

```
# The filename where to dump the DB
dbfilename dump.rdb

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
#
# Also the Append Only File will be created inside this directory.
#
# Note that you must specify a directory here, not a file name.
dir /var/lib/redis 
```

根据您对“dbfilename”和“dir”的设置，您可以在此处找到您的 redis dump.rdb 文件。

* * *

**更新**：要查看您的 redis 配置，只需运行：

```
redis-cli CONFIG GET * 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-24T20:41:42.147

您可以在 redis.conf 文件（用于启动服务器）上设置文件位置，查看服务器配置：

```
# The filename where to dump the DB
dbfilename dump.rdb 
```

查找当前保存文件的位置，这取决于您如何启动服务器-您拥有 redis-server 文件的位置-我认为您可以使用`ps -e aux | grep redis`或找到它`ps -e | grep redis`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-01T13:29:25.493

在我的（默认，Ubuntu）设置中，db 文件位于

```
/var/lib/redis/redis.rdb 
```

正如 Christoffer 指出的那样，您可以从命令行客户端查看所有设置

```
CONFIG GET * 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-11-22T14:24:24.187

一个获取目录和转储文件名的衬垫

```
echo "CONFIG GET *" | redis-cli | grep -e "dir" -e "dbfilename" -A1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-25T04:38:44.660

在 mac 中，

dump.rdb 的位置在`/usr/local/etc/dump.rdb`.
redis.conf 的位置在`/usr/local/etc/redis.conf`.

为了找到位置，请使用命令`find`-`sudo find / -name "redis.conf"`