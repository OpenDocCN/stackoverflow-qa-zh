# StackOverflow 问答 12067000-12067999

# mysql - 未找到 solr 字段

> ID：12067000
> 
> 赞同：0
> 
> 时间：2012-08-22T05:50:13.337
> 
> 标签：mysql, solr

我是 Solr 的新手，并且已经设法从我的 SQL DB 上传了大约 500K 行（*请原谅我对尖括号的粗略尝试:-)：

```
[lst name="statusMessages"]
       [str name="Total Requests made to DataSource">1</str]
       [str name="Total Rows Fetched">499999</str]
       [str name="Total Documents Skipped">0</str]
       [str name="Full Dump Started">2012-08-21 22:30:55</str]    
       [str name="">Indexing completed. Added/Updated: 499999 documents. Deleted 0 documents.</str]
       [str name="Committed">2012-08-21 22:31:18</str]
       [str name="Total Documents Processed">499999</str]
       [str name="Time taken">0:0:23.321</str]
 [/lst] 
```

相关内容的架构是：

```
[field name="tid" type="int" indexed="true" stored="true" /] 
[field name="ReviewAuthor" type="text_general" indexed="false" stored="true" /]
[field name="ReviewTitle" type="text_general" indexed="false" stored="true" /]         
[field name="ReviewText" type="text_general" indexed="true" stored="true" /] 
[field name="ReviewRating" type="float" indexed="true" stored="true" /] 
[field name="VersionNumber" type="text_general" indexed="true" stored="true" /] 
```

但是，当我尝试查询`ReviewText`or`ReviewRating`时，没有返回任何结果。`tid`另一方面，已检索到但不返回任何关联的其他字段。只是`tid + id`。

有什么我可以尝试的建议吗？先感谢您。

安库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:21:03.613

首先查看使用[Luke](https://stackoverflow.com/questions/10425371/view-raw-solr-tokens-for-a-single-field-on-a-single-document/10427874#10427874)实际索引的内容。

然后，如果您仍然无法解决问题，请报告调查结果。

# objective-c - 正确调整基于视图的 NSTableView 上的行大小

> ID：12067018
> 
> 赞同：9
> 
> 时间：2012-08-22T05:51:30.230
> 
> 标签：objective-c, macos, cocoa, nstableview, appkit

当表视图大小发生变化时，具有动态高度的行的基于视图的`NSTableView`行不会调整其行大小。当行高来自表格视图的宽度时，这是一个问题（想想填充一列并换行从而扩展行大小的文本块）。

每当它改变大小时，我一直试图`NSTableView`调整其行的大小，但收效甚微：

*   如果我通过查询仅调整可见行的大小`enumerateAvailableRowViewsUsingBlock:`，则某些不可见行不会调整大小，因此在用户滚动并显示这些行时以旧高度显示。
*   如果我调整所有行的大小，当有很多行时（在我的 1.8Ghz i7 MacBook Air 中每个窗口调整 1000 行后大约延迟 1 秒），它会变得明显变慢。

有人可以帮忙吗？

这是我检测到表视图大小变化的地方 - 在表视图的委托中：

```
- (void)tableViewColumnDidResize:(NSNotification *)aNotification
{
    NSTableView* aTableView = aNotification.object;
    if (aTableView == self.messagesView) {
        // coalesce all column resize notifications into one -- calls messagesViewDidResize: below

        NSNotification* repostNotification = [NSNotification notificationWithName:BSMessageViewDidResizeNotification object:self];
        [[NSNotificationQueue defaultQueue] enqueueNotification:repostNotification postingStyle:NSPostWhenIdle];
    }
} 
```

而以下是上面发布的通知的处理程序，其中可见行的大小被调整：

```
-(void)messagesViewDidResize:(NSNotification *)notification
{
    NSTableView* messagesView = self.messagesView;

    NSMutableIndexSet* visibleIndexes = [NSMutableIndexSet new];
    [messagesView enumerateAvailableRowViewsUsingBlock:^(NSTableRowView *rowView, NSInteger row) {
        if (row >= 0) {
            [visibleIndexes addIndex:row];
        }
    }];
    [messagesView noteHeightOfRowsWithIndexesChanged:visibleIndexes];   
} 
```

调整所有行大小的替代实现如下所示：

```
-(void)messagesViewDidResize:(NSNotification *)notification
{
    NSTableView* messagesView = self.messagesView;      
    NSIndexSet indexes = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0,messagesView.numberOfRows)];      
    [messagesView noteHeightOfRowsWithIndexesChanged:indexes];  
} 
```

注意：这个问题与基于视图的 NSTableView 有点相关，[其中行具有动态高度](https://stackoverflow.com/questions/7504546/view-based-nstableview-with-rows-that-have-dynamic-heights)，但更侧重于响应表格视图的大小变化。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T19:49:21.700

我刚刚经历了这个确切的问题。我所做的是监视滚动视图的内容视图的 NSViewBoundsDidChangeNotification

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(scrollViewContentBoundsDidChange:) name:NSViewBoundsDidChangeNotification object:self.scrollView.contentView]; 
```

并在处理程序中，获取可见行并调用 noteHeightOfRowsWithIndexesChange:。我在执行此操作时禁用动画，因此用户在调整大小期间不会看到行在视图进入表格时摆动

```
- (void)scrollViewContentBoundsDidChange:(NSNotification*)notification
{
    NSRange visibleRows = [self.tableView rowsInRect:self.scrollView.contentView.bounds];
    [NSAnimationContext beginGrouping];
    [[NSAnimationContext currentContext] setDuration:0];
    [self.tableView noteHeightOfRowsWithIndexesChanged:[NSIndexSet indexSetWithIndexesInRange:visibleRows]];
    [NSAnimationContext endGrouping];
} 
```

这必须快速执行，以便表格很好地滚动，但它对我来说工作得很好。

# r - rmongodb：在查询中使用 $or

> ID：12067020
> 
> 赞同：2
> 
> 时间：2012-08-22T05:51:34.387
> 
> 标签：r, mongodb, rmongodb

我正在努力在 R 和 rmongodb 中使用 $or 创建查询。我想效仿的是来自 cmdline mongo 的：

```
db.people.find( { $or : [ {"person.cell": { $exists : true } }, {"person.home": { $exists : true } } ] }) 
```

我想提取 person.cell 不为 null 或 person.home 不为 null 的记录。我可以单独查询每个，但是当我使用 $or 在 rmongodb 中创建缓冲区时无法取回数据，使用 rmongodb 的 R 代码如下所示：

```
l <- list("$exists"="true")
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.array(buf, "$or")
mongo.bson.buffer.append.list(buf, "person.cell", l)
mongo.bson.buffer.append.list(buf, "person.home", l)
mongo.bson.buffer.finish.object(buf)  
b <- mongo.bson.from.buffer(buf)
mongo.find(mongo, "work.people", b) 
```

这不会返回任何记录，没有错误，只是一个空集。正如我所提到的，我可以在 person.cell 或 person.home 上进行查找并获得结果，但当我尝试执行 $or（在 rmongodb 中）以便我使用 person.cell 或 person.home 提取记录时却不行.

我也试过这个：

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.array(buf, "$or")
mongo.bson.buffer.start.object(buf, "person.cell")
mongo.bson.buffer.append(buf, "$exists", "true")
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.start.object(buf, "person.home")
mongo.bson.buffer.append(buf, "$exists", "true")
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
b <- mongo.bson.from.buffer(buf)
mongo.find(mongo, "work.people", b) 
```

但是我得到了相同的空集结果（当我查看它时，“b”看起来是一样的）。我坚持这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T01:43:16.873

```
bson <- mongo.bson.from.JSON('{ "$or" : [ {"person.cell": { "$exists" : true } }, {"person.home": { "$exists" : true } } ] }')
mongo.find(mongo, "work.people", bson) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T15:06:00.690

为了避免编写 mongo.bson.buffer-statements 的序列，我编写了一个包（[rmongodbHelper](https://github.com/joyofdata/rmongodbHelper)），它将 JSON 或 list() 转换为 BSON 对象，然后可以与 rmongodb 一起使用。

首先让我们设置环境：

```
library(rmongodb)

# install rmongodbHelper package from GitHub

library(devtools)
devtools::install_github("joyofdata/rmongodbHelper")
library(rmongodbHelper)

# the MongoDB instance

ns <- "dbx.collx"
M <- mongo.create()
mongo.is.connected(M)
mongo.remove(M, ns, json_to_bson("{}"))

# inserting a number of dummy objects
# JSON keys currently are expected to be wrapped in double quotes!

objs <- c(
  '{"_id":-1}',
  '{"_id":-2, "person":{}}',
  '{"_id":-3, "person":{"x":0}}',
  '{"_id":1,  "person":{"cell":0}}',
  '{"_id":2,  "person":{"home":0}}',
  '{"_id":3,  "person":{"cell":0,"home":0}}'
)

for(obj in objs) {
  mongo.insert(M, ns, json_to_bson(obj))
} 
```

让我们通过 MongoDB shell 看看它们是否成功插入：

```
> use dbx
switched to db dbx
> db.collx.find().pretty()
{ "_id" : -1 }
{ "_id" : -2, "person" : { } }
{ "_id" : -3, "person" : { "x" : 0 } }
{ "_id" : 1, "person" : { "cell" : 0 } }
{ "_id" : 2, "person" : { "home" : 0 } }
{ "_id" : 3, "person" : { "cell" : 0, "home" : 0 } } 
```

现在让我们使用查询搜索文档：

```
# searching for those objects
# JSON keys currently are expected to be wrapped in double quotes!

json_qry <- 
'{
  "$or" : [ 
    {"person.cell": { "$exists" : true } }, 
    {"person.home": { "$exists" : true } } 
  ] 
}'

cur <- mongo.find(M, "dbx.collx", json_to_bson(json_qry))

while(mongo.cursor.next(cur)) {
    print(mongo.cursor.value(cur))
} 
```

这就是我们最终得到的：

```
_id : 1      1.000000
person : 3   
    cell : 1     0.000000

_id : 1      2.000000
person : 3   
    home : 1     0.000000

_id : 1      3.000000
person : 3   
    cell : 1     0.000000
    home : 1     0.000000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T19:05:40.543

您创建 mongo bson 数组的方式是错误的。你缺少零件

```
mongo.bson.buffer.start.object(buf, "0")
...
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.start.object(buf, "1")
...
mongo.bson.buffer.finish.object(buf) 
```

有关工作示例，请查看以下最新评论： [https ://github.com/mongosoup/rmongodb/issues/17](https://github.com/mongosoup/rmongodb/issues/17)

我希望这暂时有效。

所有 .to.list / .from.list / .append.list 命令都有一个错误。我正在研究一个更简单的解决方案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T12:51:45.793

[我发现这个查询在RMongo](https://github.com/tc/RMongo)中更容易解决：

```
mongo <- mongoDbConnect(dbName="work", host="localhost",port='27017')
result <- dbGetQuery(mongo, "people","
    { '$or': [
        {'person.cell':{'$exists':true}},
        {'person.home':{'$exists':true}}
    ]}"
) 
```

结果将是一个`data.frame`.

# linq - 在 LINQ 中将 int 列转换为双精度 - 函数 addHours

> ID：12067024
> 
> 赞同：0
> 
> 时间：2012-08-22T05:51:51.013
> 
> 标签：linq, linq-to-sql, double

我将 LinqDataSource Where 设置为：

```
LinqDataSource1.Where ="StartDate.Value.AddHours((double)TimeLimitHour) < DateTime.Parse(\"" + DateTime.Now.ToString() + "\")"; 
```

我想将`TimeLimitHour`列（`int`类型）添加到`StartDate`列（`DateTime`类型），我需要将 TimeLimitHour 转换为双精度类型。我该怎么做？？？

# java - 当使用 Home 而不是 Back 时，从不调用 onActivityResult()

> ID：12067027
> 
> 赞同：0
> 
> 时间：2012-08-22T05:52:16.473
> 
> 标签：java, android, android-activity

我有一个通过 startActivityForResult 启动另一个活动的应用程序。如果用户通过后退按钮退出调用的 Activity，一切都会很好，但是如果用户按下 Home，则调用的 Activity 退出并且永远不会调用 onActivityResult。

这是预期的行为还是应该起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:04:23.710

> 按主页按钮和返回按钮之间的区别。

默认情况下，按下后退按钮完成（销毁）当前活动并向用户显示上一个活动。

默认情况下，按下 Home Button 活动会停止并移动到后台而不是被销毁

[更多详细信息](http://developer.android.com/guide/practices/ui_guidelines/activity_task_design.html)-**阅读使用返回和主页按钮远离活动**

# git - 子模块的 Gitolite 镜像

> ID：12067033
> 
> 赞同：2
> 
> 时间：2012-08-22T05:53:12.667
> 
> 标签：git, gitolite

我试图设置[Gitolite 镜像概念](http://sitaramc.github.com/gitolite/mirroring.html)，除了子模块外一切正常。

当我从从服务器克隆 repo（具有子模块）并更新子模块时，子模块是从主服务器克隆的。

如何使这些子模块也从从服务器克隆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:07:18.427

[一种方法是，例如在 post-receive 钩子中，通过更改这些子模块地址](https://stackoverflow.com/questions/913701/changing-remote-repository-for-a-git-submodule)来确保`.gitmodules`反映足够的子模块地址，然后更改. `git submodule sync`

或者，请参阅“ [Git submodule url changed](https://stackoverflow.com/a/59364554/6309) ”和新命令（Git 2.25+，Q1 2020）

```
git submodule set-url [--] <path> <newurl> 
```

[maxmelbin](https://stackoverflow.com/users/1288207/maxmelbin)对象：

> 但改变`.gitmodules`意味着新的提交——对吧？

不一定：您可以进行该修改而不提交它，将其保持为纯粹的“私有”（您的从属服务器本地）。

> 问题是，由于所有 repo 都镜像在从属设备中，有没有办法在子模块更新期间自动选择本地 repo url，无论在 .gitmodules 中为该提交配置了哪些站点 url

我认为命令的`--reference`参数`git submodule update`可以实现这一点。

```
--reference <repository> 
```

> 此选项仅对添加和更新命令有效。
> 这些命令有时需要克隆远程存储库。在这种情况下，此选项将传递给[`git-clone`](http://git-scm.com/docs/git-clone.html)(1) 命令。
> **注意**：除非您仔细阅读了['s](http://git-scm.com/docs/git-clone.html#_options)[和](http://git-scm.com/docs/git-clone.html#_options)[options的](http://git-scm.com/docs/git-clone.html#_options)[注释，`git-clone``--reference``--shared`](http://git-scm.com/docs/git-clone.html#_options)否则不要使用此选项。

# jakarta-ee - respose.sendredirect 问题的 url

> ID：12067034
> 
> 赞同：1
> 
> 时间：2012-08-22T05:53:12.510
> 
> 标签：jakarta-ee

我正在像这样从 bean 类发送一个 url

```
 String url="/jsp/browse/browse.jsp";
    response.sendRedirect(url); 
```

但在浏览器中它想调用 url

```
http://localhost:8080/alfresco/faces/jsp/browse/browse.jsp 
```

但它在召唤

```
http://localhost:8080/jsp/browse/browse.jsp 
```

请告诉可能是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T10:52:02.003

你可以写如下：

```
String url="../jsp/browse/browse.jsp"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:56:38.823

也许写作

```
String url="jsp/browse/browse.jsp"; 
```

可以解决问题，因为使用 /jsp/browse/browse.jsp 您正在传递绝对路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:37:53.110

提供完整的 URL，包括协议、主机和端口，您就可以保存了。

```
String url="http://localhost:8080/jsp/browse/browse.jsp"; 
```

此外，您应该用一些变量替换协议/主机/端口部分

# python - 表wx Python的多个标题

> ID：12067035
> 
> 赞同：2
> 
> 时间：2012-08-22T05:53:23.777
> 
> 标签：python, wxpython, wxwidgets

Howdi 伙计们，我最近开始使用 Python 涉足 WX 小部件，并且想为我想要完成的任务寻求一些方向。这里的挑战是有一个包含多个标题的表，即跨越多行的标题并进行逻辑分组。举个例子：

```
-----------------------------------------------------
|        header_main_1      |     header_main_2     |
-----------------------------------------------------
| sub_1       |  sub_2      |  sub_3     |   sub_4  |
-----------------------------------------------------
-----------------------------------------------------
| data1       |  data2      |  data3     |   data4  |
-----------------------------------------------------
| data5       |  data6      |  data7     |   data8  |
----------------------------------------------------- 
```

在这里，`header_main_1`是包含另外两个标题的主标题`sub_1`和`sub_2`. 与`header_main_2`. 接下来是数据。标题是可点击的，因此可以对数据进行排序等。

是否有任何涉及这种布局的组件/教程？如果没有，如果我必须自己创建它，关于我应该如何去做的任何提示？网格上是否有任何选项可以触发此行为？

TIA，
佐助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:31:04.980

您可以使用网格控件跨越单元格。wxPython 演示包中有示例。但是，您不能让列中的标签本身跨越多个列。我认为单元跨越会让你大部分时间到达那里。这些列将继续可排序。如果您希望对右侧的两列进行排序而不影响左侧的列，那么您必须自己添加该逻辑或创建两个网格并将它们彼此相邻放置。

# java - JasperViewer：如何在保存报告时设置文件名？

> ID：12067036
> 
> 赞同：1
> 
> 时间：2012-08-22T05:53:26.253
> 
> 标签：java, jasper-reports

我正在创建 Java 桌面应用程序。我正在使用[DynamicReports API](http://dynamicreports.sourceforge.net/)创建报告。

该报告是在*JasperViewer*中查看的。当我点击保存按钮时，我想显示一个默认保存的报告名称。默认情况下如何设置报告的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T05:23:05.380

然后我认为你必须改变`JFileChooser`而不是调查`API`。您可以指定要显示的默认名称。

这样的方法将是：

```
JFileChooser jFileChooser = new JFileChooser();
jFileChooser.setSelectedFile(new File("fileToSave.txt"));
jFileChooser.showSaveDialog(parent); 
```

如果你传递一个带有绝对路径的文件，`JFileChooser`将尝试将自己定位在那个目录中（如果它存在的话）。

我从[以下地方得到了这个来源](https://stackoverflow.com/questions/356671/jfilechooser-showsavedialog-how-to-set-suggested-file-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:22:18.093

有必要导入包 `com.jasperassistant.designer.viewer.ViewerComposite` ，以便在该查看器组合中，您可以在左上角看到一个保存图标。您可以提供要保存的任何名称和位置。我认为通过您的碧玉报告保存报告的好方法。

# c# - 自动映射异常

> ID：12067037
> 
> 赞同：3
> 
> 时间：2012-08-22T05:53:37.383
> 
> 标签：c#, automapper

以下映射代码导致 automapper 在映射完成时抛出异常。

```
mapper.CreateMap<SqlDataReader, CodeModel>()
      .ForMember(dest => dest.Code, 
                 options => options.MapFrom(src => src["code"] != null ? 
                                                   src["code"].ToString() :
                                                   string.Empty)); 
```

这真的很奇怪，`src["code"]`有一个价值，它是`"E"`，这甚至在 automapper 消息中都有说明。

有没有人对这个问题或如何解决这个问题有任何见解？

堆栈跟踪：

> [NullReferenceException：对象引用未设置为对象的实例。] AutoMapper.Mappers.TypeMapMapper.Map（ResolutionContext 上下文，IMappingEngineRunner 映射器）+116
> AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map（ResolutionContext 上下文）+459
> 
> [AutoMapperMappingException：
> 
> 映射类型：字符串 -> 字符串 System.String -> System.String
> 
> 目标路径：CodeModel.Code
> 
> 源值：E]
> AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +537
> AutoMapper.Mappers.DataReaderMapper.MapPropertyValue(ResolutionContext context, IMappingEngineRunner mapper, Object mappedObject, PropertyMap propertyMap) +305
> AutoMapper.Mappers.DataReaderMapper.MapPropertyValues( ResolutionContext context, IMappingEngineRunner mapper, Object result) +210
> AutoMapper.Mappers.DataReaderMapper.Map(ResolutionContext context, IMappingEngineRunner mapper) +639
> AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +477 AutoMapper.MappingEngine.Map(Object source , 输入 sourceType, 输入destinationType, Action 1 opts) +162`1 opts) +176
> AutoMapper.MappingEngine.Map(Object source, Action`
> AutoMapper.MappingEngine.Map（对象源）+143

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:17:13.430

尝试使用`ResolveUsing`method 而不是 method `MapFrom`，但在您的情况下，这两种方法都应该按预期工作。尝试查看是否存在任何配置问题。

```
 mapper.CreateMap<SqlDataReader, CodeModel>()
          .ForMember(dest => dest.Code, 
                     options => options.ResolveUsing(src => src["code"] != null ? 
                                                       src["code"].ToString() :
                                                       string.Empty)); 
```

我用 SqlReaderMock 创建了一个工作示例。我假设您的 SqlReader 执行上下文很好。

```
//Arrange
var configStore = new ConfigurationStore(new TypeMapFactory(), MapperRegistry.AllMappers());
configStore.CreateMap<SqlDataReaderMock, Destination>()
    .ForMember(dest => dest.Name, opt => opt.ResolveUsing(src => src["tyto"] != null
                                                                        ? src["tyto"].ToString()
                                                                        : String.Empty));
var _mappingEngine = new MappingEngine(configStore);

//Act
var result = _mappingEngine.Map<Destination>(new SqlDataReaderMock());

//Assert
Assert.AreEqual("otyt", result.Name);

class Destination
{
    public string Name { get; set; }
}

class SqlDataReaderMock
{
    public string this[string value]
    {
        get
        {
            return new string(value
                                    .ToCharArray()
                                    .Reverse()
                                    .ToArray());
        }
    }
} 
```

# joomla2.5 - 网址中的 Joomla 类别

> ID：12067038
> 
> 赞同：0
> 
> 时间：2012-08-22T05:53:38.637
> 
> 标签：joomla2.5

我正在尝试构建一个几乎包含一个主页和两个站点的站点结构。我试图用类别来做到这一点，但似乎没有成功，因为该类别并没有真正显示在 url 中。

我正在尝试这样做：

```
 Home (www.mysite.com)
       - Subsite 1 -> Menu (www.mysite.com/subsite1)
       - Subsite 2 -> Menu (www.mysite.com/subsite2) 
```

然后我想将所有文章分配给“子站点 1”或“子站点 2”类别并创建诸如

```
 www.mysite.com/subsite1/(other categories)/article.html 
```

是否有可能在类别上实现这一点？这样某人添加到某个类别的每篇文章都会像这样显示？

此外，是否可以在该类别的每篇文章上显示子站点 1 的菜单？（与子站点 2 相同）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:16:36.593

是的，这是可能的：
在（Joomla）管理控制面板中，`global configuration->site`您可以启用部分`Search Engine Friendly URLs`下的选项`SEO Settings`。

如果您启用 SEF 并安装`Subsite 1`在`Subsite1`apache 根文件夹下的文件夹中，并假设您的类别称为`category1`，您将能够像这样访问您的页面：

```
http://www.mysite.com/Subsite1/category1/<article-id>-<article-alias> 
```

密切注意`-`article-id 到 article-alias 之间的关系。

# struts2 - struts2 和 不工作

> ID：12067040
> 
> 赞同：0
> 
> 时间：2012-08-22T05:53:39.580
> 
> 标签：struts2

我正在显示带有标签的列表值。同时我想为显示值提供一个超链接以提供显示值的操作。我正在使用`<s:param>`它。但值没有通过。我写如下

```
<s:iterator status="stat" value="transactionList">
        <s:url id="open" action="openTransaction">
              <s:param name="transactionCode" value="<s:property value='monthName'/>"/>
         </s:url>
 <tr class="gradeB">
  <td>
    <s:a href="%{open}"><s:property value='transactionCode'/></s:a>
  </td>
  <td><s:property value="monthName"/></td>
  <td><s:property value="transactionDesc"/></td>

  </tr>
  </s:iterator> 
```

现在该`transactionCode`属性显示超链接，并通过单击该操作正在转发到`openTransaction`方法。但是我传递的值`<s:param>`没有，它给出了 null。在该特定事务代码的迭代中，我只想传递该特定事务代码。在 struts 1.x 中，我为此使用了显示标记表装饰器，它采用当前行对象。这里我还想将当前行值传递给操作。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:12:12.020

如果您想使用`<s:property>`标签将参数放在 url 中，您必须这样做：

```
<s:url ...>
    <s:param name="foo"><s:property value="bar"/></s:param>
</s:url> 
```

的[文档](http://struts.apache.org/2.3.4/docs/param.html)`<s:param>`解释了使用这种放置参数的方式和你的方式之间的区别。

> 注意：声明 param 标记时，可以在 value 属性中定义值，也可以将值定义为开始和结束标记之间的文本。根据这两种情况，Struts 的行为有点不同。最好用一个例子来说明这一点：

```
<param name="color">blue</param> <-- (A) --> 
<param name="color" value="blue"/> <-- (B) --> 
```

> 在第一种情况 (A) 中，该值将作为 java.lang.String 对象评估到堆栈中。在情况 (B) 中，该值将作为 java.lang.Object 对象评估到堆栈中。有关详细信息，请参阅 WW-808。

**编辑：**还请记住，如果您使用的是 2.1.x 或更高版本，则不推荐使用 的`id`属性，`<s:url>`并且已将其替换为`var`. 你可以在[这里](http://struts.apache.org/2.3.4/docs/url.html)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T07:39:52.947

```
<c:url var="search" value="/image/search.action">
<c:forEach items="${filtersMap}" var="map">
<c:param name="filtersMap.${map.key}" value="${map.value}"/>
</c:forEach> 
```

${filtersMap} 是来自动作的地图参数

# android - 如何在gridview中添加标题？

> ID：12067043
> 
> 赞同：0
> 
> 时间：2012-08-22T05:54:06.563
> 
> 标签：android, gridview, header

我希望我的 gridview 的内容与标题分开！我们可以在 listview 中轻松完成此操作！如何在gridview中做这部分？

![这就是它在列表视图中的做法](../Images/56de1b95376869be51aa4a061ff27131.png)

我想要相同的，因为标题必须相同，并且每个标题的内容必须是项目的网格视图！请不要查看和比较下图中的内容。它只是一个下载的！有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:10:29.910

GridView 没有列。它旨在在屏幕上二维排列一个平面（无列）项目数组。您应该使用 TableLayout，它旨在对列式行进行布局。

使用 TableLayout 时，您可以添加标题行作为第一行，然后添加数据行。两者没有区别。

# java - 跳过列表中的随机级别函数

> ID：12067045
> 
> 赞同：4
> 
> 时间：2012-08-22T05:54:16.140
> 
> 标签：java

我正在查看[Java 中的跳过列表实现](http://en.literateprograms.org/Skip_list_%28Java%29)，我想知道以下方法的目的：

```
public static int randomLevel() {
    int lvl = (int)(Math.log(1.-Math.random())/Math.log(1.-P));
    return Math.min(lvl, MAX_LEVEL);
} 
```

以及上面的方法和有什么区别

```
Random.nextInt(6); 
```

谁能解释一下？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T06:03:11.140

[`Random.nextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)应该提供一个随机变量，其概率分布是（大约）在区间*[0, 6)上的*[离散均匀分布](http://en.wikipedia.org/wiki/Uniform_distribution_(discrete))。[您可以在此处](http://www.wolframalpha.com/input/?i=discrete+uniform+distribution+%5B0%2C6%29)了解更多信息。 [http://puu.sh/XMwn](http://puu.sh/XMwn)

 *请注意，内部`Random`使用[*线性同余生成器*](http://en.wikipedia.org/wiki/Linear_congruential_generator)，其中[*m = 2^48*、*a = 25214903917*和*c = 11*](http://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use)。

* * *

`randomLevel`相反（大约）使用*p* = *0.5*的[*几何分布*](http://en.wikipedia.org/wiki/Geometric_distribution)。[您可以在此处](http://www.wolframalpha.com/input/?i=geometric+distribution+for+p%3D0.5)了解有关分发的更多信息。

 **[http://puu.sh/XMwT](http://puu.sh/XMwT)

从本质上讲，`randomLevel`返回`0`概率为*0.5*、*0.25*`1`、*0.125*等，直到0.5 *^7*即 *0.0078125** -与***~0.14*** **from****大不相同**。*`2`*`6`****`Random.nextInt`******

 **** * *

现在这一点的重要性在于，[跳过列表是一种固有的*概率*数据结构](http://en.wikipedia.org/wiki/Skip_list)。通过利用多个**稀疏**级别的链表，它们可以实现*O(log n)*搜索的平均运行时性能——类似于平衡二叉搜索树，但**不太复杂**且**占用空间更少**。[在这里使用均匀分布是不合适**的**](http://www.csee.umbc.edu/courses/undergraduate/341/fall01/Lectures/SkipLists/skip_lists/skip_lists.html#SECTION00020000000000000000)，看看如何与较低级别相比，较高级别的人口密度较低（**注意**：下面，级别向下增长） - 这对于快速搜索是必要的。

![](../Images/72c885e41688bf3783b8c8c84ca76069.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:02:18.293

就像链接说的那样......

“这给了我们 50% 的 random_level() 函数返回 0 的机会，25% 的返回 1 的机会，12.5% 的返回 2 的机会……”因此分布不均匀。但是， Random.nextInt() 是。选择 0 到 5 之间的任何数字的可能性相同。

我还没有查看完整的实现，但可能发生的是我们用来选择一个数字的 randomLevel()，比如 n。然后，需要添加到跳过列表的元素将具有指针 0、1、...、n。您可以将每个级别视为一个单独的列表。

为什么要使用这样的发行版？好吧，一个均匀的分布将需要太多的内存来获得它所带来的好处。通过使用几何分布减少机会，获得了“最佳”点。现在实现了快速获取值、内存占用更少的优势。******

# php - 如何从同一字段中选择某些数据

> ID：12067049
> 
> 赞同：0
> 
> 时间：2012-08-22T05:54:23.690
> 
> 标签：php

现在目前面临的问题是.. 我的表名是 schedule 数据字段之一是“Depart”，记录是

```
row 1 = 19-08-2012 08:00:00AM,
row 2 = 19-08-2012 12:00:00PM,
row 3 = 20-08-2012 07:00:00PM, 
```

我只想显示日期并且它是不同的

```
mysql_query(Select distinct depart from schedule); 
```

这显示日期和时间。这里有人知道如何只显示日期吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:00:25.747

可以`DATE_FORMAT()`在Mysql中使用函数，如下：

```
select DATE_FORMAT(distinct(Depart),'%m-%d-%Y') from schedule 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:02:09.927

是的，使用`DATE`：

```
SELECT DISTINCT DATE(`depart`) FROM `schedule` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:02:34.150

例子

SQL（推荐）

```
SELECT DISTINCT DATE( depart ) 
FROM `tbl` 
```

PHP

```
$d = "19-08-2012 08:00:00AM";
echo date("d-m-Y",strtotime($d)); 
```

# node.js - Node.js 加密 AES 密码

> ID：12067051
> 
> 赞同：1
> 
> 时间：2012-08-22T05:54:34.223
> 
> 标签：node.js, aes, encryption

出于某种奇怪的原因，Node 的内置`Cipher`和`Decipher`类没有按预期工作。该[文件](http://nodejs.org/api/crypto.html#crypto_cipher_update_data_input_encoding_output_encoding)指出`cipher.update`

> “返回加密的内容，并且可以在流式传输时使用新数据多次调用。”

文档还[指出](http://nodejs.org/api/crypto.html#crypto_cipher_final_output_encoding)`cipher.final`

> “返回任何剩余的加密内容。”

但是，在我的测试中，您*必须*调用`cipher.final`以获取所有数据，从而使 Cipher 对象变得毫无价值，并且要处理下一个块，您必须创建一个新的 Cipher 对象。

```
var secret = crypto.randomBytes(16)
  , source = crypto.randomBytes(8)
  , cipher = crypto.createCipher("aes128", secret)
  , decipher = crypto.createDecipher("aes128", secret);

var step = cipher.update(source);
var end = decipher.update(step);

assert.strictEqual(source.toString('binary'), end); // should not fail, but does 
```

请注意，当使用`crypto.createCipher`or时会发生这种情况`crypto.createCipheriv`，其中密钥作为初始化向量。解决方法是将第 6 行和第 7 行替换为以下内容：

```
var step = cipher.update(source) + cipher.final();
var end = decipher.update(step) + decipher.final(); 
```

但是，如前所述，这会使两者都`cipher`变得`decipher`毫无价值。

这就是我希望 Node 的内置密码学能够工作的方式，但它显然没有。这是我如何使用它的问题还是 Node 中的错误？还是我期待错误的事情？我可以直接去实现 AES，但这既费时又烦人。每次需要加密或解密时，我是否应该只创建一个新对象`Cipher`或对象？`Decipher`如果我将其作为流的一部分这样做，那似乎很昂贵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:01:51.047

我遇到了两个问题：第一个是我错误地假设一个块的大小是 64 位或 8 个字节，这是我用来创建“明文”的。实际上，AES 的内部将 128 位明文分成两个 64 位块，然后从那里开始。

第二个问题是，尽管在应用上述更改后使用了正确的块大小，但`crypto`模块正在应用自动填充，并且禁用自动填充解决了第二个问题。因此，工作示例如下：

```
var secret = crypto.randomBytes(16)
  , source = crypto.randomBytes(16)
  , cipher = crypto.createCipheriv("aes128", secret, secret); // or createCipher
  , decipher = crypto.createDecipheriv("aes128", secret, secret);

cipher.setAutoPadding(false);
decipher.setAutoPadding(false);

var step = cipher.update(source);
var end = decipher.update(step);

assert.strictEqual(source.toString('binary'), end); // does not fail 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:28:58.563

AES 使用 16 字节的块大小（不是您建议的 8 的两倍）。此外，如果启用了填充，它应该总是填充。这样做的原因是，否则 unpadding 算法无法区分填充和明文的最后一个字节。

大多数时候，您不应该期望密文与纯文本大小相同。确保`doFinal()`始终调用它。如果您正在实施自己的加密方案，则应仅以这种方式使用 update 进行加密/解密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:01:10.923

连续多次调用更新存在[node.js 问题。](https://github.com/joyent/node/issues/3719)我想它已经解决并反映在下一个版本中。

# ruby-on-rails - facebook将访问代码放在网页中

> ID：12067053
> 
> 赞同：0
> 
> 时间：2012-08-22T05:54:45.110
> 
> 标签：ruby-on-rails, facebook

尝试编写 facebook 应用程序并尝试进行身份验证。这是一个 Rails 3.1 应用程序

我给 facebook 我的 api 并返回代码的第一个重定向似乎运行良好。但是，当我尝试从 access_token 获取该代码并“交换它”时，我遇到了问题。

访问令牌出现在 iframe aws 的位置。

这是我的代码。

```
def index
#Load facebook.yml info
config = YAML::load(File.open("#{Rails.root}/config/facebook.yml"));
# setup client

redirect_to "https://graph.facebook.com/oauth/authorize?client_id=#{config['development']['app_id']}&redirect_uri=#{CALLBACK_URI}"

end
def callback

   logger.debug("c")
  config = YAML::load(File.open("#{Rails.root}/config/facebook.yml"));
  if (!params.key?('access_token'))
     logger.debug("A")
     redirect_to "https://graph.facebook.com/oauth/access_token?client_id=#    {config['development']['app_id']}&redirect_uri=#{CALLBACK_URI}&client_secret=#{config['development']['client_secret']}&code=#{params['code']}"
   return
 end
   logger.debug("B")
 access_token = params['access_token']
 @me = FbGraph::User.me(ACCESS_TOKEN)
 @name=@me.name

 end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:09:01.743

# android - 如何向私人电子书阅读器 Android 应用程序添加自动更新功能

> ID：12067055
> 
> 赞同：0
> 
> 时间：2012-08-22T05:54:50.250
> 
> 标签：android

我有一个私人电子书阅读器应用程序，我想不断向该应用程序添加新内容（文章），我想向该应用程序添加自动更新功能，以便当用户打开该应用程序时，如果有一些新内容，应用程序会自动更新添加。

我还想添加一些功能，当我添加一些新内容（文章）时，用户可以收到应用程序新版本的通知，如果他愿意，他可以下载它，如果他不想更新版本他也可以拒绝。

任何机构都可以建议我如何实现这个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:09:42.657

对于初学者来说，您想为后端创建一堆 JSON RESTful 服务。至于协调，您应该研究 C2DM 云到设备消息传递。还有很多应用程序使用 UrbanAir 进行推送通知。我认为您真的应该寻求推动能力。

# javascript - 编辑图像字段javascript验证空白图像不插入

> ID：12067058
> 
> 赞同：-1
> 
> 时间：2012-08-22T05:55:37.483
> 
> 标签：javascript

我在编辑图像字段时遇到问题。当点击编辑链接然后打开一个页面，页面中的一个字段是图像字段。我想在图像为空白时对其进行验证，然后显示“请输入图像”的消息，当字段不为空时，不显示此消息。所以请给我一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:05:18.570

如果您希望使用`Javascript`..

你必须使用`alert`..

```
<script>
function checkExt() {
 if(document.mainForm.myfile.value.lastIndexOf(".jpeg")==-1) {
    alert("Please enter .jpeg image file");
    return false;
 }
}
</script>
<form name="mainForm">
<input type="file" name="myfile" onchange="checkExt();"/>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这将帮助你！

# .net - 我的 ListView 的 GridViewColumn 模板中忽略了 TextAlignment

> ID：12067061
> 
> 赞同：1
> 
> 时间：2012-08-22T05:55:59.513
> 
> 标签：.net, wpf, xaml

我为我的 ListView 设置了以下样式：

```
<Style TargetType="{x:Type ListViewItem}">
            <!-- <Setter Property="IsSelected" Value="{Binding Path=Delta, Converter=}" /> -->
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Foreground" Value="#000000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border Name="Border" Padding="2" SnapsToDevicePixels="true"
                                CornerRadius="4" Margin="0,4,0,0">
                            <GridViewRowPresenter VerticalAlignment="{TemplateBinding
                                     VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                                <Setter Property="Background" TargetName="Border"
                                        Value="#A5FFFFFF"></Setter>
                            </Trigger>
                            <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                                <Setter Property="Background" TargetName="Border"
                                        Value="#01FFFFFF">
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Background" TargetName="Border" 
                                        Value="#99B4C6"/>
                                <Setter Property="Foreground" Value="#000000"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Background" TargetName="Border"
                                        Value="#c5d7e5"/>
                                <Setter Property="Foreground" Value="#000000"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="#000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

现在强制量将使我的 TextBlocks 正确对齐自己，如果我设置

```
<Setter Property="HorizontalContentAlignment" Value="Right" /> 
```

在我的风格中，我会遇到相反的问题。我这样定义我的模板：

```
<GridViewColumn Header="Bid Price">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock TextAlignment="Right" HorizontalAlignment="Right" 
                 Text="{Binding Path=BidPx, StringFormat='{}{0:C}'}" />
         </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

# ios - 在 iOS 中为 URL 和 Google 搜索使用相同的文本字段

> ID：12067065
> 
> 赞同：0
> 
> 时间：2012-08-22T05:56:10.167
> 
> 标签：ios, uitextfield, google-search

我试图在同一个文本字段中获取 URL 和谷歌搜索。我使用的方法工作正常，但可能有更好的方法。我正在做的是检查输入中是否有一个点，如 www.google.com，如果没有找到一个点，然后在 google 上搜索它。

```
NSRange range = [textField.text rangeOfString:@"."];
    textField.text = (range.location != NSNotFound)          ?
                [NSString stringWithFormat:@"%@", textField.text]  :
                [@"http://www.google.com/search?q=" stringByAppendingString:textField.text ]; 
```

如果输入有一个点，则搜索失败。有没有更好的方法呢？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:06:50.377

U 可以阻止用户进入。通过使用 UITextField 的委托方法，像这样在 UITextField 中添加点：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
   if([string isEqualToString:@"."])
   {
     return NO;
   }
   else
   {
     return YES;
   }
 } 
```

# windows-phone-7 - 程序集上的 GetExportedTypes() 引发 NotSupportedException

> ID：12067070
> 
> 赞同：3
> 
> 时间：2012-08-22T05:56:41.947
> 
> 标签：windows-phone-7, reflection

我在将 Windows Phone 7.5 类库加载到 WP 单元测试框架中时遇到了一些严重的问题。它在我的程序集内部调用 GetExportedTypes()，它抛出了一个不包含任何细节的 ReflectionTypeLoadException。它的消息是“ReflectionTypeLoadException”，并且它的 LoaderExceptions 为空（“无法评估表达式”）。该程序集未使用任何第 3 方程序集。如果我创建一个单独的 WP7 应用程序并做同样的事情，我会得到相同的结果。我是一位经验丰富的 Reflection 用户，但是由于没有任何详细的错误，我的研究完全停止了。为了完整起见，它是 Fluent Assertions 的 Windows Phone 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:11:01.210

异常上的`Types`数组呢？它包含值吗？如果是，它是否也包含`null`s？如果是这样，您可以找出哪些类加载失败：您知道程序集中的所有类，并且您知道哪些类加载正确。缺少的是无法加载的类。也许这个信息提供了一些线索。

这个答案基于[文档](http://msdn.microsoft.com/en-us/library/system.reflection.reflectiontypeloadexception.aspx)，尤其是这些位：

来自`LoaderExceptions`物业的备注：

> LoaderExceptions 属性检索与 Types 数组并行的 Exception 类型数组。每当反射无法加载类时，此数组将包含空值。

并从`Types`财产的文件中：

> 一个 Type 类型的数组，其中包含在模块中定义并加载的类。该数组可以包含一些空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:35:23.320

我找到了！[@GeertvanHorrik](http://twitter.com/GeertvanHorrik)指给我看他最近写的[一篇博文。](http://web.archive.org/web/20111230171548/http://blog.catenalogic.com/post/2011/08/27/Windows-Phone-7-and-MissingMethodException.aspx)我正在使用运行时（！）不支持的协变接口（使用*out参数）。*为什么编译器不保护我免受这对我来说是一个很大的谜团（也是一个巨大的失望）

# javascript - JavaScript 正则表达式不匹配

> ID：12067071
> 
> 赞同：0
> 
> 时间：2012-08-22T05:56:54.797
> 
> 标签：javascript, regex

我很难获得一个看似简单的正则表达式。我试图抓住字符串中方括号之间最后出现的单词字符。我的代码：

```
pattern = /\[(\w+)\]/g;
var text = "item[gemstones_attributes][0][shape]";
if (pattern.test(text)) {
    alert(RegExp.lastMatch);
} 
```

当我希望它输出“形状”时，上面的代码正在输出“gemstones_attributes”。为什么这个正则表达式不起作用，或者我获得最后一场比赛的方法有问题？我确信我犯了一个明显的错误——正则表达式从来都不是我的字符串套装。

**编辑：** 在某些情况下，字符串不会以右括号终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:04:15.600

你可以在你的模式之前尽可能地贪婪地匹配，这将导致你的组只匹配最后一个匹配：

```
pattern = /.*\[(\w+)\]/g;
var text = "item[gemstones_attributes][0][shape]";
var match = pattern.exec(text);
if (match != null) alert(match[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:05:40.567

RegExp.lastMatch 给出最后一个正则表达式的匹配。这不是文本中的最后一个匹配项。

正则表达式从左到右解析并且是贪婪的。所以你的正则表达式匹配它看到的第一个'['并抓住它之间的单词。当您调用 lastMatch 时，它会为您提供最后匹配的模式。您需要先匹配所有可以匹配的 .* ，然后再匹配您的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:08:12.157

使用`match()`代替`test()`

* * *

```
if (text.match(pattern)) 
```

* * *

`test()`检查字符串中的匹配项。这是第一次出现后成功，因此无需进一步解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T06:09:15.123

我认为您的问题出在您的正则表达式中，而不是在您的 src 行 .lastMatch 中。

您的正则表达式仅返回方括号的第一个匹配项，而不是所有匹配项。您可以尝试将一些组添加到您的正则表达式中 - 通常您应该得到所有匹配项。

克里基特

# javascript - 如何在 Extjs 中覆盖 lovcombo 中的函数

> ID：12067082
> 
> 赞同：0
> 
> 时间：2012-08-22T05:58:03.340
> 
> 标签：javascript, extjs

在 ExtJs 的 lovcombo 中，选择的条目用分号分隔。我想要的是用逗号分隔它们。应该重写什么方法以及如何重写？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:03:25.687

它是

```
separator:',' 
```

在定义组合时

# haskell - 具有许多构造函数的 ADT 的 Haskell Zipper

> ID：12067084
> 
> 赞同：6
> 
> 时间：2012-08-22T05:58:10.827
> 
> 标签：haskell, algebraic-data-types, zipper

我有一些 ADT 代表 Haskell 中的简单几何树。将我的操作类型与树形结构分开的事情让我很困扰。我正在考虑让 Tree 类型包含运算符的构造函数，看起来它会更干净。我看到的一个问题是我的 Zipper 实现必须改变以反映所有这些新的可能的构造函数。有没有办法解决？还是我错过了一些重要的概念？总的来说，我觉得我很难掌握如何在 Haskell 中构建我的程序。我了解大多数概念、ADT、类型类、单子，但我还不了解大局。谢谢。

```
module FRep.Tree
   (Tree(‥)
   ,Primitive(‥)
   ,UnaryOp(‥)
   ,BinaryOp(‥)
   ,TernaryOp(‥)
   ,sphere
   ,block
   ,transform
   ,union
   ,intersect
   ,subtract
   ,eval
   ) where

import Data.Vect.Double
--import qualified Data.Foldable as F
import Prelude hiding (subtract)
--import Data.Monoid

data Tree = Leaf    Primitive
          | Unary   UnaryOp   Tree
          | Binary  BinaryOp  Tree Tree
          | Ternary TernaryOp Tree Tree Tree
          deriving (Show)

sphere ∷  Double → Tree
sphere a = Leaf (Sphere a)

block ∷  Vec3 → Tree
block v = Leaf (Block v)

transform ∷  Proj4 → Tree → Tree
transform m t1 = Unary (Transform m) t1

union ∷  Tree → Tree → Tree
union t1 t2 = Binary Union t1 t2

intersect ∷  Tree → Tree → Tree
intersect t1 t2 = Binary Intersect t1 t2

subtract ∷  Tree → Tree → Tree
subtract t1 t2 = Binary Subtract t1 t2

data Primitive = Sphere { radius ∷  Double }
               | Block  { size   ∷  Vec3   }
               | Cone   { radius ∷  Double
                        , height ∷  Double }
               deriving (Show)

data UnaryOp = Transform Proj4
             deriving (Show)

data BinaryOp = Union
              | Intersect
              | Subtract
              deriving (Show)

data TernaryOp = Blend Double Double Double
               deriving (Show)

primitive ∷  Primitive → Vec3 → Double
primitive (Sphere r) (Vec3 x y z) = r - sqrt (x*x + y*y + z*z)
primitive (Block (Vec3 w h d)) (Vec3 x y z) = maximum [inRange w x, inRange h y, inRange d z]
   where inRange a b = abs b - a/2.0
primitive (Cone r h) (Vec3 x y z) = undefined

unaryOp ∷  UnaryOp → Vec3 → Vec3
unaryOp (Transform m) v = trim (v' .* (fromProjective (inverse m)))
   where v' = extendWith 1 v ∷  Vec4

binaryOp ∷  BinaryOp → Double → Double → Double
binaryOp Union f1 f2     = f1 + f2 + sqrt (f1*f1 + f2*f2)
binaryOp Intersect f1 f2 = f1 + f2 - sqrt (f1*f1 + f2*f2)
binaryOp Subtract f1 f2  = binaryOp Intersect f1 (negate f2)

ternaryOp ∷  TernaryOp → Double → Double → Double → Double
ternaryOp (Blend a b c) f1 f2 f3 = undefined

eval ∷  Tree → Vec3 → Double
eval (Leaf a) v             = primitive a v
eval (Unary a t) v          = eval t (unaryOp a v)
eval (Binary a t1 t2) v     = binaryOp a (eval t1 v) (eval t2 v)
eval (Ternary a t1 t2 t3) v = ternaryOp a (eval t1 v) (eval t2 v) (eval t3 v)

--Here's the Zipper--------------------------

module FRep.Tree.Zipper
   (Zipper
   ,down
   ,up
   ,left
   ,right
   ,fromZipper
   ,toZipper
   ,getFocus
   ,setFocus
   ) where

import FRep.Tree

type Zipper = (Tree, Context)

data Context = Root
             | Unary1   UnaryOp   Context
             | Binary1  BinaryOp  Context Tree
             | Binary2  BinaryOp  Tree    Context
             | Ternary1 TernaryOp Context Tree    Tree
             | Ternary2 TernaryOp Tree    Context Tree
             | Ternary3 TernaryOp Tree    Tree    Context

down ∷  Zipper → Maybe (Zipper)
down (Leaf p, c)             = Nothing
down (Unary o t1, c)         = Just (t1, Unary1 o c)
down (Binary o t1 t2, c)     = Just (t1, Binary1 o c t2)
down (Ternary o t1 t2 t3, c) = Just (t1, Ternary1 o c t2 t3)

up ∷  Zipper → Maybe (Zipper)
up (t1, Root)               = Nothing
up (t1, Unary1 o c)         = Just (Unary o t1, c)
up (t1, Binary1 o c t2)     = Just (Binary o t1 t2, c)
up (t2, Binary2 o t1 c)     = Just (Binary o t1 t2, c)
up (t1, Ternary1 o c t2 t3) = Just (Ternary o t1 t2 t3, c)
up (t2, Ternary2 o t1 c t3) = Just (Ternary o t1 t2 t3, c)
up (t3, Ternary3 o t1 t2 c) = Just (Ternary o t1 t2 t3, c)

left ∷  Zipper → Maybe (Zipper)
left (t1, Root)               = Nothing
left (t1, Unary1 o c)         = Nothing
left (t1, Binary1 o c t2)     = Nothing
left (t2, Binary2 o t1 c)     = Just (t1, Binary1 o c t2)
left (t1, Ternary1 o c t2 t3) = Nothing
left (t2, Ternary2 o t1 c t3) = Just (t1, Ternary1 o c t2 t3)
left (t3, Ternary3 o t1 t2 c) = Just (t2, Ternary2 o t1 c t3)

right ∷  Zipper → Maybe (Zipper)
right (t1, Root)               = Nothing
right (t1, Unary1 o c)         = Nothing
right (t1, Binary1 o c t2)     = Just (t2, Binary2 o t1 c)
right (t2, Binary2 o t1 c)     = Nothing
right (t1, Ternary1 o c t2 t3) = Just (t2, Ternary2 o t1 c t3)
right (t2, Ternary2 o t1 c t3) = Just (t3, Ternary3 o t1 t2 c)
right (t3, Ternary3 o t1 t2 c) = Nothing

fromZipper ∷  Zipper → Tree
fromZipper z = f z where
   f ∷  Zipper → Tree
   f (t1, Root)               = t1
   f (t1, Unary1 o c)         = f (Unary o t1, c)
   f (t1, Binary1 o c t2)     = f (Binary o t1 t2, c)
   f (t2, Binary2 o t1 c)     = f (Binary o t1 t2, c)
   f (t1, Ternary1 o c t2 t3) = f (Ternary o t1 t2 t3, c)
   f (t2, Ternary2 o t1 c t3) = f (Ternary o t1 t2 t3, c)
   f (t3, Ternary3 o t1 t2 c) = f (Ternary o t1 t2 t3, c)

toZipper ∷  Tree → Zipper
toZipper t = (t, Root)

getFocus ∷  Zipper → Tree
getFocus (t, _) = t

setFocus ∷  Tree → Zipper → Zipper
setFocus t (_, c) = (t, c) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:38:55.003

这可能不会触及您 API 设计问题的核心，但可能会给您一些想法。

我已经编写了两个基于[lens](http://hackage.haskell.org/packages/archive/data-lens/2.10.2/doc/html/Data-Lens-Common.html)的通用拉链库。镜头封装了一种类型的“解构/重组”，让您可以查看上下文中的内部值，这允许“获取”和“设置”例如数据类型中的特定字段。您可能会发现这种通用的拉链配方更可口。

如果这听起来很有趣，那么您应该查看的库是[zippo](http://hackage.haskell.org/packages/archive/zippo/0.1/doc/html/Data-Lens-Zipper.html)。这是一个非常小的库，但有一些奇特的部分，所以你可能会对[这里](http://brandon.si/code/zippo/)的简短演练感兴趣。

**好东西**：拉链是*异构*的，允许您“向下移动”不同类型（例如，您可以将注意力放在`radius`a上，或者向下通过一些您还没有想到的`Sphere`新递归类型）。`Primitive`此外，类型检查器将确保您的“向上移动”永远不会让您越过结构的顶部；唯一需要的地方`Maybe`是通过 sum 类型“向下”移动。

**不太好的事情：**我目前正在使用我自己的镜头库，`zippo`并且还不支持自动派生镜头。所以在一个理想的世界里，你不会用手写镜头，所以当你的`Tree`类型改变时，你也不必改变任何东西。自从我写这个东西以来，镜头库的格局发生了很大变化，所以当我有机会看到新的热点或更新的旧热点时，我可能会过渡到使用 ekmett 的一个。

## 代码

如果这不是类型检查，请原谅我：

```
import Data.Lens.Zipper
import Data.Yall

-- lenses on your tree, ideally these would be derived automatically from record 
-- names you provided
primitive :: Tree :~> Primitive
primitive = lensM g s
    where g (Leaf p) = Just p
          g _ = Nothing
          s (Leaf p) = Just Leaf
          s _ = Nothing

unaryOp :: Tree :~> UnaryOp
unaryOp = undefined -- same idea as above

tree1 :: Tree :~> Tree
tree1 = lensM g s where
    g (Unary _ t1) = Just t1
    g (Binary _ t1 _) = Just t1
    g (Ternary _ t1 _ _) = Just t1
    g _ = Nothing
    s (Unary o _) = Just (Unary o)
    s (Binary o _ t2) = Just (\t1-> Binary o t1 t2)
    s (Ternary o _ t2 t3) = Just (\t1-> Ternary o t1 t2 t3)
    s _ = Nothing
-- ...etc. 
```

然后使用拉链可能看起来像：

```
t :: Tree
t = Binary Union (Leaf (Sphere 2)) (Leaf (Sphere 3))

z :: Zipper Top Tree
z = zipper t

-- stupid example that only succeeds on focus shaped like 't', but you can pass a 
-- zippered structure of any depth
incrementSpheresThenReduce :: Zipper n Tree -> Maybe (Zipper n Tree)
incrementSpheresThenReduce z = do
    z1 <- move (radiusL . primitive . tree1) z
    let z' = moveUp $ modf (+1) z1
    z2 <- move (radiusL . primitive . tree2) z'
    let z'' = moveUp $ modf (+1) z2
    return $ modf (Leaf . performOp) z'' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:26:23.867

我建议学习[免费的 monad](http://www.haskellforall.com/2012/06/you-could-have-invented-free-monads.html)，它受到范畴论的启发，构成了在 Haskell 中构建抽象语法树的惯用方式。自由单子实现了两全其美，因为树被抽象在任何可能的函子上，并且您通过定义提供给自由单子的函子来定义抽象语法树支持的操作集。

在你的情况下，你会写：

```
{-# LANGUAGE DeriveFunctor, UnicodeSyntax #-}

import Control.Monad.Free -- from the 'free' package

data GeometryF t
  = Sphere Double
  | Block Vec3
  | Transform Proj4 t
  | Union t t
  | Intersect t t
  | Subtract t t
  deriving (Functor)

type Vec3 = Int -- just so it compiles
type Proj4 = Int

type Geometry = Free GeometryF

sphere ∷  Double → Geometry a
sphere x = liftF $ Sphere x

block ∷  Vec3 → Geometry a
block v = liftF $ Block v

transform ∷  Proj4 → Geometry a -> Geometry a
transform m t = Free $ Transform m t

union ∷  Geometry a -> Geometry a -> Geometry a
union t1 t2 = Free $ Union t1 t2

intersect ∷  Geometry a -> Geometry a -> Geometry a
intersect t1 t2 = Free $ Intersect t1 t2

subtract ∷  Geometry a -> Geometry a -> Geometry a
subtract t1 t2 = Free $ Subtract t1 t2 
```

但是，这只是对您所写内容的精确翻译，完全忽略了您可以使用免费 monad 做的所有很酷的事情。例如，每个免费的 monad 都是免费的 monad，这意味着我们实际上可以使用 do 表示法构建几何树。例如，您可以重写您的转换函数以完全不采用第二个参数，并让 do 表示法隐式提供它：

```
transform' :: Proj4 -> Geometry ()
transform' m = liftF $ Transform m () 
```

然后您可以使用普通的 do 表示法编写转换：

```
transformation :: Geometry ()
transformation = do
    transform m1
    transform m2
    transform m3 
```

您也可以改为在代码中编写分支操作，例如`union`和分支`intersect`

```
union :: Geometry Bool
union = liftF $ Union False True 
```

然后你只需检查`union`函数的返回值，看看你是在左分支还是右分支上操作，就像你检查`C`s`fork`函数的返回值以查看你是作为父还是子继续的方式：

```
branchRight :: Geometry a
branchLeft :: Geometry a

someUnion :: Geometry a
someUnion = do
    bool <- union
    if bool
    then do
        -- We are on the right branch
        branchRight
    else do
        -- We are on the left branch
        branchLeft 
```

请注意，尽管您使用的是`do`符号，但它仍然会生成一个普通的几何树，就好像您是手工构建的一样。此外，您可以选择根本不使用`do`符号并仍然手动构建它。`do`符号只是一个很酷的奖励功能。

# javascript - Django中的URL检测和缩短

> ID：12067086
> 
> 赞同：1
> 
> 时间：2012-08-22T05:58:19.207
> 
> 标签：javascript, python, django

我只是想知道 Django 中是否有一种方法可以从一堆文本中检测 URL，然后自动缩短它们。我知道我可以使用 urlize 来检测 url，但我不确定我是否可以使用 bitly 或其他东西来缩短链接。

而且用javascript而不是python来完成这个任务会更好吗？如果是这样的话，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:35:47.513

对于 bit.ly，如果您只想缩短 URL，它非常简单：

首先创建一个帐户，然后访问[http://bitly.com/a/your_api_key](http://bitly.com/a/your_api_key)以获取您的 API 密钥。

[向 API 的缩短方法](http://dev.bitly.com/links.html)发送请求，结果是您的缩短 URL：

```
from urllib import urlencode
from urllib2 import urlopen

ACCESS_KEY = 'blahblah'
long_url = 'http://www.example.com/foo/bar/zoo/hello/'
endpoint = 'https://api-ssl.bitly.com/v3/shorten?access_token={0}&longUrl={1}&format=txt'
req = urlencode(endpoint.format(ACCESS_KEY, long_url))
short_url = urlopen(req).read() 
```

您可以将其包装到模板标签中：

```
@register.simple_tag
def bitlyfy(the_url):
    endpoint = 'https://api-ssl.bitly.com/v3/shorten?access_token={0}&longUrl={1}&format=txt'
    req = urlencode(endpoint.format(settings.ACCESS_KEY, the_url))
    return urlopen(req).read() 
```

然后在您的模板中：

`{% bitlyfy "http://www.google.com" %}`

*注意：标签中的位置参数是 django 1.4 的一个特性*

如果您想要 bit.ly API 的所有功能，请先阅读[dev.bitly.com/get_started.html](http://dev.bitly.com/get_started.html)上的文档，然后下载官方[python 客户端](https://github.com/bitly/bitly-api-python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T18:36:19.883

如果你想使用 Bitly API，模板标签应该变成：

```
from django import template from django.conf import settings

import bitly_api import sys import os

register = template.Library()

BITLY_ACCESS_TOKEN="blahhhh"

@register.simple_tag def bitlyfy(the_url):
    bitly = bitly_api.Connection(access_token=BITLY_ACCESS_TOKEN)
    data = bitly.shorten(the_url)
    return data['url'] 
```

不过，我无法在模板中管理一件事：

```
{% bitlyfy request.get_full_path %}
{% bitlyfy {{request.get_full_path}} %} 
```

这些都不起作用，不知道如何解决它。欢迎任何帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T13:11:13.037

```
If you are using bit.ly then the best code to shorten url is:

import urllib
import urllib2
import json

link = "http://www.example.com/foo/bar/zoo/hello/"
values = {'access_token' : BITLY_ACCESS_TOKEN,
          'longUrl'      : link}
url = "https://api-ssl.bitly.com/v3/shorten"

data = urllib.urlencode(values)
req = urllib2.Request(url,data)
response = (urllib2.urlopen(req).read()).replace('\/', '/')
bitly_url = (json.loads(response))['data']['url']
return bitly_url 
```

# camera - 你如何破解/反编译相机固件？（带反编译切线）

> ID：12067088
> 
> 赞同：7
> 
> 时间：2012-08-22T05:58:29.803
> 
> 标签：camera, firmware

我想知道需要采取哪些步骤来“破解”相机的固件以添加/更改功能，特别是佳能或奥林巴斯制造的相机。

我可以理解这是一个涉及的主题，但我将不胜感激步骤的概要以及我应该注意的问题。

我认为第一步是获取固件，将其加载到反编译器中（有什么建议吗？）并检查内容。我承认我以前从未反编译过代码，所以这对我来说是一个很好的挑战，有什么建议吗？图书？教程？我应该期待什么？

一如既往地感谢堆栈！

注意：我知道 Magic Lantern 和 CHDK，我想获得有关它们是如何开始和形成的技术建议。

[http://magiclantern.wikia.com/wiki/反编译](http://magiclantern.wikia.com/wiki/Decompiling)

[http://magiclantern.wikia.com/wiki/Struct_Guessing](http://magiclantern.wikia.com/wiki/Struct_Guessing)

[http://magiclantern.wikia.com/wiki/Firmware_file](http://magiclantern.wikia.com/wiki/Firmware_file)

[http://magiclantern.wikia.com/wiki/GUI_Events/550D](http://magiclantern.wikia.com/wiki/GUI_Events/550D)

[http://magiclantern.wikia.com/wiki/Register_Map/Brute_Force](http://magiclantern.wikia.com/wiki/Register_Map/Brute_Force)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-24T21:31:00.923

> 我想知道需要采取哪些步骤来“破解”相机的固件以添加/更改功能，特别是佳能或奥林巴斯制造的相机。

此黑客/逆向工程的一般步骤：

1.  收集有关相机系统的信息（主 CPU、图像协处理器、RAM/闪存芯片......）。挑战：相机系统制造商倾向于隐藏此类敏感信息。此外，专有芯片的数据表/文档根本不会向公众发布。

2.  获取固件：通过转储相机内部的闪存或从用于相机固件更新的更新包中提取固件。挑战：访问闪存的读出电路并非易事，尤其是相机系统拥有最密集的 PCB 之一。此外，专有固件在嵌入更新包时受到复杂加密算法的高度保护。

3.  反汇编：从操作码固件中获得“一点”更具可读性的指令。挑战：尽管反汇编程序广泛可用，但它们会给您提供操作码之外的“可操作”等效汇编代码，但不能保证人类可读/有意义。

4.  定制：在了解大部分代码功能后，您可以进行修改，而不会损害相机系统的正常运行。挑战：不是一件容易的事。

或者，我强烈建议您寻找已经开源的相机软件（也是硬件）。你可以学到很多关于相机系统的知识。此类项目有：[Elphel](http://www3.elphel.com/index.php)和[AXIOM](https://www.apertus.org/)

# php - 当我将返回结果的数量限制为 40 时，为什么 $cursor 返回 45 限制

> ID：12067091
> 
> 赞同：0
> 
> 时间：2012-08-22T05:58:48.417
> 
> 标签：php, json, mongodb

```
 $startplushowmany=$startfrom+$howmany; //$startplush is 40
    $cursor=$cursor->limit($startplushowmany);  

    $numberReturned=$cursor->count();   //$numberReturned is 45 
```

我不能给你看 $cursor 的内容，因为 $cursor 没有实现 _toString。请让我知道该怎么做。

现在 $cursor 中的查询由以下命令定义： $cursor = $collection->find($rangeQuery, $field);

$rangeQuery 在哪里

```
(string:592) Array
(
    [LongitudeLatitude] => Array
        (
            [$within] => Array
                (
                    [$center] => Array
                        (
                            [0] => Array
                                (
                                    [0] => 106.772835
                                    [1] => -6.186753
                                )

                            [1] => 0.044983732050783
                        )

                )

        )

    [indexContents] => bas
    [Prominent] => Array
        (
            [$gte] => 15
        )

) 
```

和

$字段是

```
(string:39) Array
(
    [LongitudeLatitude] => 1
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:09:54.107

您需要使用布尔标志来考虑计数限制，否则它会给出实际计数

`$numberReturned=$cursor->count(true);`

引用[PHP doc](http://php.net/manual/en/mongocollection.count.php)中的示例：

```
<?php

$collection->insert(array('x'=>1));
$collection->insert(array('x'=>2));
$collection->insert(array('x'=>3));

$cursor = $collection->find();

var_dump($cursor->count());
var_dump($cursor->count(true));

$cursor->limit(2);

var_dump($cursor->count());
var_dump($cursor->count(true));

?> 
```

将输出：

```
int(3)
int(3)
int(3)
int(2) 
```

# c - c中与strcat相关的分段错误

> ID：12067095
> 
> 赞同：-3
> 
> 时间：2012-08-22T05:59:20.630
> 
> 标签：c

当我尝试运行我的代码时遇到分段错误，我已将其范围缩小到此块，但我不知道为什么：

```
string myNewKey = "";

if (keylength < length){
    int myValue = ((length - keylength) / keylength) + 1;

    for (int i=0; i < myValue; i++)
        myNewKey = strcat(key, myNewKey);  
}

printf("%s", myNewKey); 
```

我知道它与 . 有关系`strcat`，但我不知道具体是什么。

只是为了澄清。这不适用于学校或工作。我只是想自学 C，我正在关注哈佛的编程入门课程的公开课程讲座。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:43:39.003

与乔纳森相同的假设：

strcat 已经进行了追加和修改键，然后它返回一个指向键的指针。你知道吗？

这意味着在第二步中，您将获得等效的 strcat(key,key) 可能足以导致分段错误（这取决于 strcat 实现）。

如果 strcat(key,key) 没有导致故障，则会发生以下情况。

Staring key = "A" 和 myvalue 5 你会得到以下步骤：

1.  键 = “A”，myNewKey = “A”
2.  键 = “AA”，myNewKey = “AA”
3.  键 = “AAAA”，myNewKey = “AAAA”
4.  键 = “AAAAAAA”，myNewKey = “AAAAAAAAA”
5.  键 = “AAAAAAAAAAAAAAAA”，myNewKey = “AAAAAAAAAAAAAAAA”

正如您在每一步中看到的那样，两个字符串的长度会呈指数增长。我不认为那是你的本意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:13:45.430

C 没有称为 的标准类型`string`，您也没有向我们展示您是如何定义它的。

但是，我们可以猜测它类似于：

```
char *myNewKey = "";

if (keylength < length)
{
  int myValue = ((length - keylength) / keylength) + 1;
  for (int i = 0; i < myValue; i++)
      myNewKey = strcat(key, myNewKey);
}

printf("%s", myNewKey); 
```

即使没有看到 的声明`key`，我们也可以看到麻烦来了。假设您有：

```
char key[100] = "a"; 
```

如果您足够频繁地迭代循环（同样，我们没有足够的信息来确定您在做什么——请复习一下构成[简短、自包含、正确（可编译）示例](http://sscce.org/)的内容），那么您迟早会溢出缓冲区，这将导致麻烦并*可能*导致分段错误。

如果`key`也`string`像我假设的那样`myNewKey`，那么您会遇到各种空间分配问题，而且您可能正在写入只读内存（获得分段错误和核心转储的好方法）。

对于 和 的其他定义（更不用说和） `string`，还有其他遇到问题的方法。`key``myNewKey``length``keylength`

您可能应该在语句中的格式字符串 ( `"%s\n"`)的末尾添加一个换行符。`printf()`没有它，你不能保证及时看到输出（即使有它，你可能不会及时看到输出，但是在终端窗口中运行的程序通常会将每一行输出为结束它的换行符已写）。

# ruby-on-rails - heroku：rails 应用程序不会部署

> ID：12067099
> 
> 赞同：0
> 
> 时间：2012-08-22T06:00:01.040
> 
> 标签：ruby-on-rails, heroku

我不知道如何描述这一点。我有一个现有的 Rails 应用程序。我们决定尝试使用 Heroku 作为测试平台。所以我做了：

```
heroku login
heroku create
git push heroku r31heroku 
```

得到这个：

```
git push heroku r31heroku
Counting objects: 4096, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2895/2895), done.
Writing objects: 100% (4096/4096), 1.91 MiB | 33 KiB/s, done.
Total 4096 (delta 2716), reused 1882 (delta 1123)
To git@heroku.com:ancient-falls-9918.git
 * [new branch]      r31heroku -> r31heroku 
```

基本上......它把它写到heroku上的某个地方，但我没有得到神奇的线条：

```
-----> Heroku receiving push
-----> Ruby/Rails app detected 
```

然后让它安装捆绑器等。

它在做什么？就像 heroku 只是一个 git 存储库，而 heroku 没有看到我正在部署它。

我已经两次删除并创建了一个新的 heroku 应用程序，结果相同。我还创建了一个全新的 Rails 应用程序，并将其成功部署到 Heroku。所以这个应用程序特别重要。

我相信它与 git 配置有关，但我该如何进一步调试呢？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:03:07.633

您需要推送到远程主机。

```
git push heroku r31heroku:master 
```

# python - 通过图形 api 或 FQL 通过用户 ID 获取用户拥有的朋友数量的 url 是什么

> ID：12067104
> 
> 赞同：0
> 
> 时间：2012-08-22T06:00:17.153
> 
> 标签：python, facebook-graph-api, facebook-fql

嗨，这是我通过 python 获取用户拥有的朋友数量的代码。它什么也不返回。谁能告诉我应该授予哪个访问权限或到目前为止我所做的任何错误？

```
friend_count = 0
q = urllib.urlencode({'SELECT friend_count FROM user WHERE uid': 784877761})

url = 'https://api.facebook.com/method/fql.query?query=' + q

request = urllib2.Request(url)
data = urllib2.urlopen(request)
doc = parse(data)

friend_count_node = doc.getElementsByTagName("friend_count")
test = friend_count_node[0].firstChild.nodeValue
logging.info(test) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:08:56.833

尝试用以下代码替换您的代码：

```
q = urllib.urlencode({'SELECT friend_count FROM user WHERE uid = 784877761'})

url = 'https://graph.facebook.com/fql?q=' + q 
```

您不需要访问令牌即可获取`friend_count`.

# mysql - MySql Join 查询两个表

> ID：12067108
> 
> 赞同：1
> 
> 时间：2012-08-22T06:00:39.727
> 
> 标签：mysql, join

嗨，我正在尝试使用 mysql 查询连接两个表，但我无法检索数据

两个表是 accountheader 和 accountheadermonths。

询问：

```
Select ah.AH_SUBNAME,ahm.AH_OPENINGBALANCE1 
from erp_updated.accountheader ah,erp_updated.accountheader_months ahm 
where ah.AH_CODE =" " AND ahm.AH_CODE=" " ; 
```

提前谢谢请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:11:47.180

要加入两个表，你应该有一个共同的来加入这两个表

```
Select ah.AH_SUBNAME,
       ahm.AH_OPENINGBALANCE1 
from   erp_updated.accountheader ah 
join
erp_updated.accountheader_months ahm 
on     ah.<col>=ahm.<col>
where  ah.AH_CODE =" " 
AND    ahm.AH_CODE=" " ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:38:43.673

在任何连接查询中，您必须指定连接多个表的条件。看起来 AH_CODE 是在您的情况下关联两个表的关键。所以，查询将是

```
SELECT 
   ah.AH_SUBNAME,
   ahm.AH_OPENINGBALANCE1 
FROM
   erp_updated.accountheader ah, 
   erp_updated.accountheader_months ahm 
WHERE
   ah.AH_CODE=ahm.AH_CODE
   AND ah.AH_CODE =" "; 
```

# metadata - 在基于声明的身份验证中，联合元数据中包含哪些所有信息？

> ID：12067109
> 
> 赞同：0
> 
> 时间：2012-08-22T06:01:01.133
> 
> 标签：metadata, federation

我正在尝试了解基于声明的身份验证和单点登录。与此同时，当我们创建一个在应用程序和身份提供者之间创建信任的步骤时，还有一个选择联合元数据的步骤。我想知道那里的信息是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:55:41.560

STS 提供联合元数据以自动执行应用程序的信任配置。这是一个未加密（但已签名）的 XML 文档，因此您可以打开它并查看它。至少您会看到：STS 端点（例如，用于知道重定向到的位置）、将用于签署令牌的加密信息（因此它可以由应用程序评估和验证）以及提供的声明（例如 this info 可能不包含他们提供的所有内容）。

例如，如果您在 APS.NET 上使用 WIF 和“添加 STS 引用”向导，您可以在 web.config 中看到提取此信息的结果。

# magento - 如何在 Magento 的产品详细信息页面上添加“添加到愿望清单”按钮

> ID：12067112
> 
> 赞同：2
> 
> 时间：2012-08-22T06:01:15.140
> 
> 标签：magento

我是 Magento 的新手。我正在学习它。我想在 Magento 产品详细信息页面的“添加到购物车”按钮附近添加一个“添加到愿望清单”按钮。我该怎么做才能将所选产品添加到愿望清单中。

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:18:35.770

Magento 中已经存在此功能。

如果您想通过代码检查此功能而不是检查 -

```
<div class="add-to-box">
   <?php echo $this->getChildHtml('addto') ?>
</div> 
```

您可以在**[Theme]/template/catelog/product/view.phtml 中找到此代码。**

此代码导致调用产品详细信息页面中的“添加到愿望清单”按钮，此按钮来自**[Theme]/template/catelog/product/view/addto.phtml。**

从这里您可以管理此按钮。

* * *

**您还可以通过管理部分启用或禁用此功能 -**

要控制“添加到愿望清单”链接的显示：

1.  从管理面板中，选择系统 > 配置。
2.  在左侧的配置面板中，在客户下，选择愿望清单选项卡。
3.  单击以展开“常规选项”部分并执行以下操作之一：

    *   将启用设置为是以在类别页面和产品页面上显示添加到愿望清单链接。

    *   将启用设置为否以从类别页面和产品页面中删除添加到愿望清单链接。

* * *

希望它会有所帮助。

谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-05T16:20:12.393

简单地转到： ...catalog/product/view/addto.phtml 然后：

```
<a href="<?php echo $this->
helper('wishlist')->getAddUrl($_product) ?>">
<?php echo $this->__('Add to Wishlist') ?></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T07:36:28.633

将以下代码用于“添加到愿望清单”按钮

```
<a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" 
   class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a> 
```

将以下代码用于“添加到购物车”按钮

```
<button type="button" title="<?php echo $this->__('Add to Cart') ?>" 
   class="button btn-cart" 
   onclick="setLocation('<?php echo $this->helper('checkout/cart')->getAddUrl($_product) ?>')">
    <span>
        <span><?php echo $this->__('Add to Cart') ?></span>
    </span>
</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-23T18:30:06.527

我会写这个作为对 Anx 答案的评论，但我还没有 50 名声望（有趣的系统，评论肯定比答案更琐碎？）所以我要添加另一个答案。

如果您在遵循 Anx 的建议后仍然遇到问题，那么您可能遇到了与我相同的奇怪情况 - core_config_data 表中没有配置设置“wishlist/general/active”的条目。即使它在管理面板中被标记为活动。要修复它，我只需转到系统 > 配置 > 愿望清单并单击“保存配置”而不进行任何更改。很快，该条目出现在 core_config_data 中（以及“wishlist/email/email_template”、“wishlist/email/email_identity”和“wishlist/wishlist_link/use_qty”）。

# registry - wso2 治理注册表无法通过注册表 api 获取服务路径

> ID：12067115
> 
> 赞同：1
> 
> 时间：2012-08-22T06:01:24.370
> 
> 标签：registry, wso2

我的代码是这样的：

```
public static void main(String[] args) throws MalformedURLException, RegistryException{
    System.setProperty("javax.net.ssl.trustStore", "D:/Program Files (x86)/keystores/MyCompany.jks");
    System.setProperty("javax.net.ssl.trustStorePassword", "4362976");
    System.setProperty("javax.net.ssl.trustStoreType","JKS");
    RemoteRegistry registry = new RemoteRegistry(new URL("https://localhost:9443/registry"), "admin", "admin");
    ServiceManager serviceManager = new ServiceManager(registry);
    Service[] services = serviceManager.findServices(new ServiceFilter() {
        public boolean matches(Service service) throws GovernanceException {
            String attributeVal = service.getAttribute("interface_transportProtocols");

            return (attributeVal != null && attributeVal.equals("HTTPS"));
        }
    });

    System.out.println(services[0].isActive());

} 
```

并发生异常：

```
Exception in thread "main" org.wso2.carbon.governance.api.exception.GovernanceException: **A path is not associated with the artifact.**
    at org.wso2.carbon.governance.api.common.dataobjects.GovernanceArtifact.checkRegistryResourceAssociation(GovernanceArtifact.java:570)
    at org.wso2.carbon.governance.api.services.dataobjects.Service.isActive(Service.java:186)
    at org.wso2.carbon.registry.ws.client.sample.RemoteReg.main(RemoteReg.java:36) 
```

任何人都可以帮忙吗？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:22:53.270

您用来初始化 ServiceManager 的注册表实例应该是**治理注册表**的实例。

例如：

```
RemoteRegistry registry = new RemoteRegistry(new URL("https://localhost:9443/registry"), "admin", "admin");

Registry govRegistry = GovernanceUtils.getGovernanceUserRegistry(registry,"admin");

ServiceManager serviceManager = new ServiceManager(govRegistry); 
```

# php - 如何将html中的列表项解析为javascript数组

> ID：12067120
> 
> 赞同：0
> 
> 时间：2012-08-22T06:01:49.630
> 
> 标签：php, javascript, json

我要将数组形式 php 传递给 javascript，我的解决方案是使用 php 生成 html 列表项，如下所示：

```
<ul id="data" class="hidden">
  <li value="0"> 
    <ul>
      <li value="id">1</li> 
      <li value="productLine">Vintage Cars</li> 
    </ul>
  </li>
  <li value="1"> 
    <ul>
      <li value="id">2</li> 
      <li value="productLine">Ships</li>    
    </ul>
   </li>
   <li value="2"> 
    <ul>
      <li value="id">3</li> 
      <li value="productLine">Trains</li>   
    </ul>
  </li>
</ul> 
```

并使用 javascript DOM API 使其成为多维关联数组：

```
function selectProductLine(){
    var rootUlNode = document.getElementById('data');
    var rootLiNodes = rootUlNode.children;
    var hiddenHash = {};
    for(var i=0;i< rootLiNodes.length;i++){
        var rootLiNodeValue = rootLiNodes[i].getAttribute('value');     
        var liNodes = rootLiNodes[i].firstElementChild.children;
        for(var i=0; i < liNodes.length;i++){
            hiddenHash[rootLiNodeValue] = {};
            var liNodeValue = liNodes[i].getAttribute('value');
            var liNodeContent = liNodes[i].textContent;
            hiddengegHash[rootLiNodeValue][liNodeValue] = liNodeContent;
        }
    }
return hiddenHash;
} 
```

但是运行代码可能会使我的浏览器崩溃，所以我无法调试它，任何人都可以指出我的问题在哪里？而且我认为应该有一种元素方式将数据从 php 传输到 javascript，比如使用 json，有人可以在这个主题上提供更好的解决方案或资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:04:53.843

如果您有一个 PHP 数组，您可以使用`[json_encode][1]`它来将其呈现为 JSON 对象。例如：

```
<?php
$arr = array(
    array('id' => 1, 'productLine' => 'Vintage Cars'),
    array('id' => 2, 'productLine' => 'Ships')
);
echo 'var products = ' . json_encode($arr) . ';';
?> 
```

将呈现如下：

```
var products = [ { 'id': 1, 'productLine': 'Vintage Cars' }, { 'id': 2, 'productLine': 'Ships' } ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:06:29.503

更好的方法是在 PHP 中将数据结构编码为 JSON，然后在生成的字符串客户端调用 JSON.parse()。您可以使用`json_encode`编码数据和[json2.js](http://www.json.org/js.html)来解析字符串。

注意适当地转义 JSON 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:09:25.700

好吧，据我所知，你的脚本几乎没问题。但是，您从底部拼错了 hiddenHash 5 行。如果我只是将 hiddengeghash 更改为 hiddenhash 它至少在 jsfiddle 中运行没有错误。我冒昧地添加了一个 document.write 只是为了确保它实际上返回一个数组。

[http://jsfiddle.net/2WBjJ/](http://jsfiddle.net/2WBjJ/)

我还将第二个 i 更改为 i2 因为它们在同一个循环中使用

# c# - 如何从 ListViewItem 中的单元格获取 DataTrigger 以选择行？

> ID：12067125
> 
> 赞同：1
> 
> 时间：2012-08-22T06:02:17.997
> 
> 标签：c#, .net, wpf, xaml

我在 CellTemplate 中为 ListView 内的 ListViewItem 中的一行定义了一个 DataTrigger ...如何让它选择它所属的整个行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:58:40.513

您不应该在`DataTrigger`. 在您的视图模型中选择它：

a) 定义`IsSelected`属性并更改此属性值，当`DataTrigger`基于的条件变为真时：

```
public class DiabloIICharacter : ViewModelBase
{
    public String Name
    {
        get { return name; }
        set
        {
            if (name != value)
            {
                name = value;
                OnPropertyChanged("Name");
            }
        }
    }
    private String name;

    public Boolean IsBoss
    {
        get { return isBoss; }
        set
        {
            if (isBoss != value)
            {
                isBoss = value;
                OnPropertyChanged("IsBoss");

                if (isBoss)
                    // when a character becomes a boss, it becomes selected too
                    IsSelected = true;
            }
        }
    }
    private Boolean isBoss;

    public Boolean IsSelected
    {
        get { return isSelected; }
        set
        {
            if (isSelected != value)
            {
                isSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }
    }
    private Boolean isSelected;
}

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new[]
        {
            new DiabloIICharacter { Name = "Diablo", IsBoss = true },
            new DiabloIICharacter { Name = "Oblivion Knight", IsBoss = false },
            new DiabloIICharacter { Name = "Blood Lord", IsBoss = false },
            new DiabloIICharacter { Name = "Andariel", IsBoss = true },
            new DiabloIICharacter { Name = "Baal", IsBoss = true },
            new DiabloIICharacter { Name = "Minion of Destruction", IsBoss = false },
            new DiabloIICharacter { Name = "Megademon", IsBoss = false },
        };
    }
} 
```

b) 绑定`ListViewItem.IsSelected`和`ViewModel.IsSelected`通过`ItemContainerStyle`：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" 
        SizeToContent="WidthAndHeight">
    <Grid>
        <ListView ItemsSource="{Binding}">
            <ListView.Resources>
                <DataTemplate x:Key="IsBossTemplate">
                    <Rectangle Fill="Red" Width="50" Height="20" x:Name="IsBossMark"/>
                    <DataTemplate.Triggers>
                        <DataTrigger Value="True" Binding="{Binding IsBoss}">
                            <Setter TargetName="IsBossMark" Property="Fill" Value="DarkRed"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ListView.Resources>
            <ListView.ItemContainerStyle>
                <Style TargetType="{x:Type ListViewItem}">
                    <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Character name"
                                    DisplayMemberBinding="{Binding Name}"/>
                    <GridViewColumn Header="Is boss" 
                                    CellTemplate="{StaticResource IsBossTemplate}"/>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:06:23.597

只需将名称应用于 ListView。就像`<ListView Name="mylistView"... />`现在你可以像这样在你的单元格模板中创建一个绑定， `{Binding SelectedItem, ElementName=mylistView}`你就可以绑定到选定的项目

# ios - 调整 UIButton 的 imageView 属性

> ID：12067140
> 
> 赞同：4
> 
> 时间：2012-08-22T06:03:46.667
> 
> 标签：ios

我无法弄清楚我可以调整多少 UIButton 的 imageView 属性。在文档中，它说：

> 虽然这个属性是只读的，但它自己的属性是读/写的。使用这些属性来配置按钮视图的外观和行为。

我希望执行一个过渡，在动画中缩小按钮的大小，并且我希望按钮的图像也相应地缩小。但是，我发现我无法控制该图像的大小。如果我修改 UIButton 的 imageView 属性的框架或边界，似乎什么都没有发生。图像似乎想要保留它的标准尺寸。更改按钮上的 imageView 或 contentMode 属性的自动布局属性似乎也无济于事。

事实上，似乎唯一可行的方法是使用 UIEdgeInsetsMake 从各个方面“挤压”图像，但这不是动画。

我也不想使用 backgroundImage 属性，因为我已经在使用它来设置按钮的样式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:09:35.807

您可以将自己的 UIImageView 作为子视图添加到 UIButton，而不是使用“嵌入式”imageView。您可以将“您的”图像视图的框架设置为通常相对于周围的 UIButton。您将完全控制它的位置，还可以对其进行动画处理。

# user-interface - wxpython 角落中的 UI

> ID：12067142
> 
> 赞同：3
> 
> 时间：2012-08-22T06:04:01.720
> 
> 标签：user-interface, wxpython

现在，我正在使用 wxpython 来制作 UI。但是我发现在windows环境下，四个角都是角。 ![在此处输入图像描述](../Images/c5d0e13d4e696704d2cf863e4f5baf9d.png)

是否可以像这样改变四个角的形状，使它们更光滑？

![在此处输入图像描述](../Images/97c727b399798bd2ff838068864551e7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:42:17.197

简短的回答：没有。

WxPython 基于 WxWidgets，正如您在[WxWidget 的主页](http://www.wxwidgets.org/)上看到的那样：

> 与其他跨平台工具包不同，wxWidgets 为其应用程序提供了真正的原生外观，因为它使用平台的原生 API 而不是模拟 GUI

基本上，这意味着如果您想要设计自动符合每个平台的 GUI 风格的跨平台 GUI，WxWidgets 以及扩展的 WxPython 是很好的选择。这样做的缺点是，如果您想制作自定义 GUI 元素（例如那些圆角），它不是工具包的最佳选择。

我对 Tkinter（另一个流行的 Python GUI 工具包）不太熟悉，但[这个之前的 SO 问题](https://stackoverflow.com/questions/11892521/tkinter-custom-window)似乎正是你想要的。或许您应该尝试使用 Tkinnter 而不是 WxPython。

**----编辑----**
原来我错了。[正如这个 SO question所证明的那样，在](https://stackoverflow.com/questions/12087140/custom-window-frame-and-window-appearance-with-wxpython)**WxPython**中有一种方法可以做到这一点。然而，我认为 WxPython 最适合原生风格的窗口，如果你想制作完全自定义的 UI，那么你会发现使用另一个工具包可以更好地支持。

# c# - jQuery $.ajax 成功没有从 JsonResult 触发

> ID：12067143
> 
> 赞同：1
> 
> 时间：2012-08-22T06:04:06.280
> 
> 标签：c#, asp.net-mvc, jquery

我的代码进行了 ajax 调用：

```
$.ajax({
    url: "/Controller/EmailUserKeys",
    dataType: 'json',
    success: function () {
        alert('success');
    },
    error: function () {
        alert('error');
    }
}); 
```

它在我的控制器中调用一个返回一些 JSON 的操作：

```
public JsonResult EmailUserKeys(string UserId)
{
    ...
    return Json(new { success = true });
} 
```

我的问题是调用了ajax错误函数而不是ajax成功函数。

为什么？

PS。如果我的操作返回“return null;”，则调用 ajax 成功函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T06:07:10.897

您必须允许返回 JSON 结果时默认禁用的 GET：

```
public JsonResult EmailUserKeys(string UserId)
{
    ...
    return Json(new { success = true }, JsonRequestBehavior.AllowGet);
} 
```

或使用 POST 请求：

```
$.ajax({
    url: "/Controller/EmailUserKeys",
    type: "POST",
    dataType: 'json',
    data: { userId: 'some user id' },
    success: function () {
        alert('success');
    },
    error: function () {
        alert('error');
    }
}); 
```

也永远不要像您那样将 url 硬编码到您的控制器操作。在 ASP.NET MVC 应用程序中处理 url 时始终使用 url 助手：

```
url: "@Url.Action("EmailUserKeys", "Controller")", 
```

这里有一条建议：如果您正在做任何 Web 开发，请使用 javascript 调试工具，例如[FireBug 。](http://getfirebug.com/)除了其他有用的东西之外，它还允许您检查 AJAX 请求。如果您使用过它，您会看到从服务器发送的响应，如下所示：

> 此请求已被阻止，因为在 GET 请求中使用敏感信息可能会泄露给第三方网站。要允许 GET 请求，请将 JsonRequestBehavior 设置为 AllowGet。

而且您不需要来 StackOverflow 并提出这个问题，因为您已经知道答案了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T06:07:00.260

您应该将代码编辑为：

```
public JsonResult EmailUserKeys(string UserId)
{
    return Json(new { success = true }, JsonRequestBehavior.AllowGet);
} 
```

有关更多信息，请参阅官方文档：

[http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonrequestbehavior.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonrequestbehavior.aspx)

默认禁用此功能的原因是因为 JSON 劫持。可以在此处找到有关此的更多信息：

[http://haacked.com/archive/2009/06/25/json-hijacking.aspx](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)

希望这可以帮助你！

# .htaccess - .htaccess 到假子域

> ID：12067154
> 
> 赞同：1
> 
> 时间：2012-08-22T06:04:37.103
> 
> 标签：.htaccess

我有一个要求，我想为我的网站的用户提供他们的个人网址。像“ [http://abc.example.com](http://abc.example.com) ”这样的东西，当任何用户在浏览器中输入这个网址时，它应该打开这个链接“ [http://www.example.com/index/sub-domain?username=abc](http://www.example.com/index/sub-domain?username=abc) ”所以我尝试编写和尝试许多代码，最后成功使用下面的代码，但问题是它重定向。我想要一个内部重定向。URL 地址窗口应保持为“ [http://abc.example.com](http://abc.example.com) ”。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^.*$ index.php [NC]
RewriteCond %{HTTP_HOST} !^www.
RewriteCond %{HTTP_HOST} ^([a-z]+)\.example.com$
RewriteRule ^(.*)$ http://www.example.com/index/sub-domain?username=%1
</IfModule> 
```

我不确定这是否可能？任何建议或帮助都会有很大帮助。也有人可以建议我一些 .htaccess 教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:26:23.263

如果您没有在 RewriteRule 上指定 R 标志，mod_rewrite 通常会执行内部重写。但是，由于您使用绝对 URL 作为重写目标，因此它必须是完全相同的主机，否则将发出外部重定向。

如果你真的想在内部重定向到另一个主机，你应该检查 mod_proxy。

# python - Nonetype 对象不可调用

> ID：12067156
> 
> 赞同：1
> 
> 时间：2012-08-22T06:04:39.950
> 
> 标签：python, beautifulsoup

```
import urllib2
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/weather/usa/tucson).read())
for row in soup('table', {'class' : 'rpad'})[0].tbody('tr'):
  tds = row('td')
  print tds[0].string, tds[1].string 
```

执行时收到错误“Nonetype object not callable”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:11:49.753

```
import urllib2
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/weather/usa/tucson').read())

>>> print soup('table', {'class' : 'rpad'})[0]
<table class="rpad"><tr><td>Location:</td><td>Davis-Monthan Air Force Base</td></tr><tr><td>Temperature:</td><td>25&nbsp;°C</td></tr><tr><td>Comfort Level:</td><td>26&nbsp;°C</td></tr><tr><td>Dew point:</td><td>21&nbsp;°C</td></tr><tr><td>Pressure:</td><td>1009 millibars</td></tr><tr><td>Humidity:</td><td>77%</td></tr><tr><td>Visibility:</td><td>16 km</td></tr><tr><td>Wind:</td><td>11 km/h from 280&deg; West<img src="http://c.tadst.com/gfx/comp/sa8.png" width="14" height="14" alt="Direction East" title="Wind blowing from West to East" /></td></tr><tr><td>Last update:</td><td>Tue 9:55 PM MST</td></tr></table>

>>> 'tbody' in soup('table', {'class' : 'rpad'})[0]
False
>>> print soup('table', {'class' : 'rpad'})[0].tbody
None 
```

`None`不可调用，即你不能调用`None('tr')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T06:14:44.773

如果您看到您的网址的页面来源

> [http://www.timeanddate.com/weather/usa/tucson](http://www.timeanddate.com/weather/usa/tucson)

，`table`具有类的元素`rpad`没有`tbody`子元素。

`<table class=rpad><tr><td>Location:</td><td>Davis-Monthan Air Force Base</td></tr><tr><td>Temperature:....`

您需要记住这个结构来提取数据。直接遍历`tr`and`td`元素。

# javascript - 如何动态追加到 JavaScript 数组？

> ID：12067158
> 
> 赞同：6
> 
> 时间：2012-08-22T06:04:46.677
> 
> 标签：javascript

> **可能重复：**
> [如何动态创建 Javascript 数组（JSON 格式）？](https://stackoverflow.com/questions/2250953/how-do-i-create-javascript-arrayjson-format-dynamically)

我正在尝试创建以下内容：

```
var employees = {"accounting": [   // accounting is an array in employees.
                    { "firstName" : "John",  // First element
                      "lastName"  : "Doe",
                      "age"       : 23 },

                    { "firstName" : "Mary",  // Second Element
                      "lastName"  : "Smith",
                      "age"       : 32 }
                  ] // End "accounting" array.                                  

    } // End Employees 
```

我开始：

```
 var employees=new Array(); 
```

如何继续动态附加到数组（可能会用变量更改 firstName）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T06:08:15.807

```
var employees = {accounting: []};

employees.accounting.push({
    "firstName" : "New",
    "lastName"  : "Employee",
    "age"       : 18
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:08:58.940

```
employees.accounting.push({ "firstName" : "New",  // First element
                      "lastName"  : "Person",
                      "age"       : 55 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:11:33.217

```
var urNewFirstName='new john';
employees.accounting[0].firstName = urNewFistName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T06:12:22.730

```
function Employee(firstName, lastName, age) {
  this.firstName = firstName;
  this.lastName = lastName;
  this.age = age;
}

var employees = {};
employees.accounting = [];
employees.accounting.push(new Employee('John', 'Doe', 23));
employees.accounting.push(new Employee('Mary', 'Smith', 32)); 
```

# ssas - 立方计算中位年龄 (MDX)

> ID：12067164
> 
> 赞同：1
> 
> 时间：2012-08-22T06:05:07.353
> 
> 标签：ssas, mdx

我需要为 HR 多维数据集中的中位数年龄创建多维数据集计算。

措施：人数和 FTE

维度：Age (Age, Age_Group, ...), Duty_type, Staff (Staff_ID, ...), Date等

我尝试使用以下 MDX 脚本：

```
Median([Month Date].[Staff Profile Month Date - Hierarchy].[Month Date Calendar Year].currentmember.Children ,IIF([Age].[Age].currentmember.name ='All' ,0,StrToValue([Age].[Age].currentmember.name))) 
```

我使用了以下帮助：http: [//msdn.microsoft.com/en-us/library/ms145570.aspx](http://msdn.microsoft.com/en-us/library/ms145570.aspx)

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:29:14.277

创建名为 Sum Age 的基本度量（使其不可见）并使用它来创建中值计算度量。

```
Median([Staff].[Staff ID].currentmember.children,[Measures].[Sum Age]) 
```

# google-apps-script - Google Apps 脚本触发器不触发 - 但只是有时

> ID：12067172
> 
> 赞同：1
> 
> 时间：2012-08-22T06:05:59.443
> 
> 标签：google-apps-script

我有一些脚本要在一夜之间运行，所以我设置了脚本触发器来执行这些脚本。这一切都非常简单，而且运行良好。但偶尔，比如一个月一次，其中一个无法执行。Google 或类似的东西不会向我发送任何错误消息。

有没有其他人经历过这个？有没有人有任何想法我可以检查这个错误？显然，如果它的实际触发器一开始没有触发，那么代码将不会实际运行，因此它将无法运行任何检查。

我还将在 google-apps-script-issues 论坛中向 Google 自己标记这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T14:51:07.350

Google 脚本以各种方式受到限制，您的脚本可能会遇到这些限制之一。除了其他之外，您可以发送的电子邮件数量和脚本的执行时间也有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:41:59.510

我有一个触发器设置为每五分钟触发一次，每月触发几次它会失败。通常它会说明未找到该功能。

您可以通过设置“执行失败通知”来通知您执行失败。在 Resources > Current Script's Triggers 中，每个触发器之后都会有一个“通知”链接。单击它将打开“执行失败通知”窗口。

对于失败的电子邮件通知时间，您有一些选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T00:09:41.113

也许：我怀疑，在我编辑我的代码之后，有时触发器会错过触发。但我从来没有仔细检查过这个。

建议：

1) 添加一些日志记录，并在脚本的最后，获取日志并将其通过电子邮件发送给自己。

2) 在您的代码周围添加一个 try catch，并将您发现的任何错误通过电子邮件发送给自己。

# ruby-on-rails - Rails + Postgres：不返回连接表中列的时区信息

> ID：12067173
> 
> 赞同：1
> 
> 时间：2012-08-22T06:06:01.940
> 
> 标签：ruby-on-rails, postgresql

事件有很多变化。

我的班次表包含一个日期时间格式的列`starts_at`。`ends_at`

如果我查询班次表，`starts_at`and`ends_at`列返回一个包含时区信息的字符串，Rails 将其识别为一个`ActiveSupport::TimeWithZone`对象——我可以相应地对其进行操作。

如果我在涉及连接的更复杂的查询中包含`shifts.starts_at`or`shifts.ends_at`列，我似乎会丢失结果集中的时区信息。考虑以下查询：

```
SELECT events.id, events.name, events.default_shift_start,
shifts.id AS shift_id, shifts.starts_at, shifts.ends_at, users.id AS user_id,
users.first_name, users.last_name 
FROM "events" 
INNER JOIN "shifts" ON "shifts"."event_id" = "events"."id" 
INNER JOIN "requests" ON "requests"."shift_id" = "shifts"."id" 
INNER JOIN "users" ON "users"."id" = "requests"."user_id" 
WHERE (events.default_shift_start > '2012-08-22 05:55:22.069340' AND requests.status = 'accepted') 
ORDER BY default_shift_start ASC 
```

**编辑：我在 Rails 中通过以下方式调用此查询：**

```
Event.joins(:shifts => { :requests => :user}).where(["events.default_shift_start > ? AND requests.status = ?", Time.now, "accepted"]).select("events.id, events.name, events.default_shift_start, shifts.id AS shift_id, shifts.starts_at, shifts.ends_at, users.id AS user_id, users.first_name, users.last_name").order("default_shift_start ASC") 
```

产生：

```
+-----+---------+---------+---------- ------------+
| 编号 | shift_id | 开始时间 | end_at |
+-----+---------+---------+---------- ------------+
| 17 | 80 | 2012-08-23 00:30:00 | 2012-08-23 07:30:00 |
| 17 | 55 | 2012-08-23 00:30:00 | 2012-08-23 07:30:00 |
+-----+---------+---------+---------- ------------+

```

问题是 JOINed 表 ( `shifts`) 中的列没有返回任何时区数据，导致 Rails 将它们识别为字符串数据。数据以 UTC 格式存储在数据库中。如果我在同一个查询中包含表中的一`datetime`列，它会在结果中包含时区数据。`events`

我一直在搜索文档，试图了解这里发生了什么，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:26:11.970

我想你应该从掌握所涉及的数据类型开始。PostgreSQL 中的“日期时间”数据类型实际上[`timestamp`有两种变体：`with`和`without time zone`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html). 默认值为`without`.

在内部，PostgreSQL 总是存储一个 UTC 时间戳。时区数据本身根本*不*使用时间戳保存，无论是否有时区。这些只是适应客户端时区设置的输入和输出装饰器。

在此相关答案中找到更[详细的解释、示例和链接](https://stackoverflow.com/a/9576170/939860)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:16:04.250

我认为如果您输入starts_at::timestamptz，那么您就很好。

# php - 如何在 symfony2 中清除会话变量

> ID：12067174
> 
> 赞同：27
> 
> 时间：2012-08-22T06:06:27.187
> 
> 标签：php, symfony

我正在用这个设置会话变量

```
$session->get('user_id'); 
```

我想清除所有会话数据或单个变量。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-22T06:10:42.357

访问此链接

[http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#remove%28%29](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Session.html#remove%28%29)

`$session->remove('user_id')`;

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-12T17:35:01.820

要清除所有会话数据（属性），您应该使用[clear](http://api.symfony.com/2.7/Symfony/Component/HttpFoundation/Session/Session.html#method_clear)。例子：

```
$session->clear(); 
```

另请参阅[Symfony 会话属性文档](http://symfony.com/doc/current/components/http_foundation/sessions.html#session-attributes)。

# android - 为什么物理键盘在我的 Android 应用程序中不起作用？

> ID：12067180
> 
> 赞同：2
> 
> 时间：2012-08-22T06:06:51.877
> 
> 标签：android

在我的 Android 应用程序中，软键盘工作正常，但物理键盘**不**工作。我找不到原因。是因为我的应用程序的任何编码错误，还是我的手机问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:12:28.473

**如果在模拟器中出现问题，那么试试这个**

这是 android AVD 管理器问题。

转到窗口-> ADV 管理器

然后选择模拟器并按编辑按钮

然后转到硬件部分并按新建

按新的选择属性键盘支持后按确定

并将值设置为 TRUE

**手机有问题然后试试这个**

我会去设置>语言和键盘...并检查您的键盘设置...看看“快捷方式”是否打开...另外，尝试清除“学习单词”...这通常有助于解决任何操作系统键盘问题... :-)

如果没有，然后从 Market 获取 1-click Cleaner...它是免费的...下载...安装..运行它...然后运行，关闭手机...取出电池...等待 2 分钟.. . 插入电池并打开... 现在可以工作了吗？

如果不是再次...那么您可能需要恢复出厂设置...是的，这将听到您放在手机上的任何数据...除了 SD 卡和 SIM ---这两个不会被触及...但是内部存储器将被擦除为出厂设置——它在您第一次拿到手机时的第 1 分钟 1 时的样子......

如果恢复出厂设置对问题没有帮助...然后致电 tmobile 进行更换... g2 是旧的，我非常怀疑您的保修是否仍然有效...您可能需要升级或获得保险更换...都需要钱！....祝你好运！来源：真诚的，

# xml - XSL 为转换定义复杂（非标准）XML 属性

> ID：12067183
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:06:53.813
> 
> 标签：xml, xslt

嗨，我有一个正在使用 XSL 模板进行转换的 xml。问题是其中存储的许多属性似乎导致我的转换失败。有没有办法预定义这些属性/命名空间前缀，以便转换可以继续停止并且我必须手动删除有问题的名称？

我正在使用 Satimage xmlLib 进行转换。

例如 ：

```
<ConstantValue>
     <Value abc:actualType="Int32">2</Value>
</ConstantValue> 
```

或者

```
<OperationDefinition abc:uid="urn:uuid:f9ff09d2-cc85-3d29-a982-a8776842dac0">
   <OperationInputCount>2</OperationInputCount>
</OperationDefinition> 
```

我的元素名称中也有带有冒号的元素，这会破坏转换。

```
 <this:AppCode>14</this:AppCode> 
```

出于我转换的目的，我不需要保留这些属性，只需要保留元素内的值。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:05:19.150

在核心 XML 中允许使用带有冒号的名称，但在名称空间格式良好的 XML 中不允许使用，除非冒号之前的部分被正确声明为名称空间前缀。XSLT 和几乎所有其他现代 XML 应用程序都要求 XML 具有良好的命名空间格式，因此除非您首先对其进行转换，否则您将无法使用 XSLT 处理此 XML。例如，您可以通过将所有冒号更改为点或下划线来转换它。

# javascript - 为什么叫 XMLHttpRequest？

> ID：12067185
> 
> 赞同：66
> 
> 时间：2012-08-22T06:07:01.067
> 
> 标签：javascript, ajax, xmlhttprequest

我一直想知道为什么这个对象被这样称呼？

您的请求正文不必采用 XML 格式。此外，从服务器接收的数据可以以 JSON、XML、HTML 或纯文本的形式获取。XML 在这个对象中并不重要。这是某种陈词滥调吗？这个对象最初创建时是什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-22T06:57:27.460

`XMLHttpRequest`由 Microsoft 的 Outlook Web Access 团队发明。这个高度创新的团队之前给了我们远程脚本，这是“AJAX”风格开发的开始。远程脚本类似于 JSONP，但过于复杂（它使用 Java 小程序，最重要的是）。我不记得是否可以`<script>`在 IE 4 或 5 中动态注入元素，但这似乎是不可能的。否则，JSONP 似乎足够强大，可以消除对`XMLHttpRequest`.

Outlook 团队将 XML 从服务器传输到客户端，因此命名 ActiveX 控件以反映其当时的主要用途。它作为 MSXML 解析器的一部分包含在内。

到 Firefox 进入游戏并实现他们自己的版本时，`XMLHttpRequest`它的使用更像今天，而用于 XML 的则更少，但 Firefox 还是使用了相同的名称。由于两家最大的浏览器制造商创建了一个具有相同名称、界面和功能的对象，w3c 坚持使用现有名称。太糟糕了，有人没有对这个误称产生更多的恶臭，并坚持我们称之为更准确的东西，比如`HttpRequest`.

我不知道“AJAX”如何或为什么成为描述网页与服务器交互而不需要完整页面加载的编程风格的流行术语。与“XMLHttpRequest”相比，“AJAX”用词不当，因为它不仅暗示 XML 是一个重要方面，而且还没有提供服务器交互的指示。我可以使用 JavaScript 异步处理 XML，而无需与服务器通信。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-01-05T08:04:22.313

## 短的

是的，名称中的 XML 部分都是错误的。

## 长

最好的解释来自发明 XHR 的 MS 工程师：

> 这是过去几天，关键特性在发布前几天就被塞满了……我意识到 MSXML 库是随 IE 一起提供的，我在 XML 团队中有一些很好的联系人，他们可能会提供帮助——我取得了联系与当时管理该团队的 Jean Paoli 合作，我们很快达成了一项协议，将这个东西作为 MSXML 库的一部分提供。这才是 XMLHTTP 这个名字的由来的真正解释——它主要是关于 HTTP 的，并且与 XML 没有任何特定的联系，除了这是发布它的最简单的借口，所以我需要把 XML 塞进这个名字。

*-- Alex Hopmann [XMLHTTP 的故事](http://www.alexhopmann.com/xmlhttp.htm)*

这清楚地表明，寻求与 XML 的联系，无论它们多么合理，基本上都是对作者意图的过度解释。
很抱歉破坏了乐趣。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-22T06:13:13.393

AJAX 代表异步 Javascript 和 XML。开始时所有的通信都是使用 XML（HTML 也类似于 XML，而 XHTML 是 XML）。JSON 是后来出现的。所以这是出于历史原因。（也看看这个[维基页面](http://en.wikipedia.org/wiki/Ajax_%28programming%29)）

# php - 使用上一个下拉 onchange 事件更改下一个下拉值

> ID：12067192
> 
> 赞同：1
> 
> 时间：2012-08-22T06:07:43.520
> 
> 标签：php, mysql

我对以下问题有点困惑。

在我当前的基于 Web 的应用程序中，我有两个下拉列表。

```
 <select  name="country">
        <option value="">All</option>
        <option value="">India</option>
        <option value="">China</option>
 </select> 
```

和

```
 <select  name="state">
        <option value="">All</option>
        <option value="">state1</option>
        <option value="">state2</option>
 </select> 
```

现在我需要做的是，**当我从国家/地区选择印度时，第二个下拉列表应该显示所有印度州，当我选择中国时，它应该在第二个下拉列表中显示所有中国州。**

我正在为国家和州使用两个表格，其中包含以下字段

**带有列的表国家：** country_id、country_name

**带有列的表状态：** state_id、country_id、state_name

我将基于 country_id 的州名存储在州表中。

请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:03:26.623

```
<td>Country</td>
<td>
      <select  id="country" onChange="getState(this.value)" name="country">
                            <option value="">All</option>
                            <option value="1">India</option>
                            <option value="2">China</option>

      </select>
</td>

function getState(str){
  if(str=='All'){
    document.getElementById("state").innerHTML="";     
  }else{
    document.getElementById("state").innerHTML="<img src='<?php echo $serverimage?>ajax-loader.gif' />";
        if(window.XMLHttpRequest){
            xmlhttp=new XMLHttpRequest();
    }
    else
    {
     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
            if(xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("state").innerHTML=xmlhttp.responseText;
            }
    }
    xmlhttp.open("GET","state.php?countryid="+str,true);
    xmlhttp.send();
   }//ELSE ENDS
}//FUNCTION ENDS 
```

//状态.php

```
<?php
  $country=$_GET["country"];  
  /*
    code to fetch all states from database with $country and fetch in variable $states
    Fetch records based on value passed in country dropw down. ie id or countryname 
  */
    echo '<select name="state" id="state">';
   foreach($states as $state)                
     echo '<option value="'.$state.'">'.$state.'</option>';            

   echo '<option value="Other">Other</option>'; 
   echo '</select>';
   exit;    

?> 
```

我没有测试过这段代码，所以可能会有一些愚蠢的错误，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:21:55.163

使用以下帖子尝试此操作：

[链式 Ajax 选择 jQuery](http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/)

# ios - 使用opencv在从相机捕获的图像中查找一些模式的方法

> ID：12067193
> 
> 赞同：-4
> 
> 时间：2012-08-22T06:07:47.163
> 
> 标签：ios, opencv

> **可能重复：**
> [matchTemplate opencv 无法正常工作，如 opencv 文档中所示](https://stackoverflow.com/questions/12049358/matchtemplate-opencv-not-working-as-shown-in-opencv-document)

我之前也发布了一些问题，但仍然找不到解决方案。根据我的要求，我必须创建一个扫描纸应用程序。在这种情况下，相机拍照，如果它出现在捕获的图像中，我必须检测模式（这将是预定义的）。我用 matchTemplate(opencv) 尝试过，但没有成功。

由于图像是从相机捕获的，因此捕获图像中的图案可能会比图案图像的大小小或大，所以在这种情况下 matchTemplate 将正常工作，或者如果这不能解决方案，那么我现在应该尝试什么另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:32:59.570

the wrong size of the template is a standard problem of template matching. Since I don t see any example code it is not easy to understand where maybe the real problem of your question is. Did you try different thresholds in the algorithm ? For the theoretical aspect there are two big main problems for feature extraction the size (distance) and the rotation (object orientation). The general hough transformation could be a solution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:18:45.510

匹配模板不适用于不同的比例（尺寸）。为此，您可以进行多尺度搜索。基本上，您可以在不同比例的输入图像中运行模板匹配。您可以做的另一种方法是训练一个 opencv Haar 级联来检测模板。它内置了多尺度检测。

# asp.net-mvc-3 - 使用 MVC3 Azure 导入 gmail 帐户

> ID：12067197
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:08:15.513
> 
> 标签：asp.net-mvc-3, azure

任何人都可以在下面的线程上帮助我吗？

我已经编写了导入 Gmail 联系人的代码，它在我的本地服务器上运行良好，但是当我在 Azure 服务器上发布它时，它会抛出以下异常：

> Google.GData.Client.InvalidCredentialsException：Google.GData.Client.GDataGAuthRequest.QueryAuthToken（GDataCredentials gc，String serviceName，String applicationName，Boolean fUseKeepAlive，IWebProxy proxyServer，Uri clientLoginHandler）的凭据无效（ GDataCredentials gc) 在 Google.GData.Client.GDataGAuthRequest.EnsureCredentials() 在 Google.GData.Client.GDataRequest.EnsureWebRequest() 在 Google.GData.Client.GDataGAuthRequest.EnsureWebRequest() 在 Google.GData.Client.GDataRequest.Execute() ) 在 Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter) 在 Google.GData.Client.Service.Query(Uri queryUri, DateTime ifModifiedSince, String etag, Int64& contentLength) 在 Google.GData.Client.Service.Query(FeedQuery feedQuery) 在 Google.GData.Client.Feed`1.get_AtomFeed() at Google.GData.Client.Feed`1.d__0.MoveNext() 在 RCFO.SocialPlugins.Google.GoogleExtract.FetchGoogleContacts(String appName, String userName, String password, String& GoogleError) in

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:26:54.570

有什么来源吗？我不太了解 Google gmail 联系人 API。如果它是在本地工作的相同代码，但在 Azure 中失败，我将首先查看任何 IIS/安全上下文更改，然后查看网络端口/防火墙更改。

# php - 如何在php中查找数组中索引的位置

> ID：12067199
> 
> 赞同：0
> 
> 时间：2012-08-22T06:08:22.283
> 
> 标签：php, arrays

我有一个这样的数组

```
Array
(
[33] => 
[53] => 
[82] => 
[36] => 
[47] => 
[42] => 
[1] => 
[12] => 
[86] => 
[68] => 
[31] => 1.00
[2] => 1.00
[87] => 2.00
[50] => 3.00
[10] => 3.00
[55] => 3.00
[48] => 3.00
[70] => 3.00
[90] => 3.00
[37] => 3.00
[69] => 3.00
[8] => 3.00
[49] => 3.00
[26] => 3.00
[13] => 3.00
[61] => 3.00
[59] => 3.00
[73] => 4.00
[64] => 4.00
[77] => 4.00
[78] => 4.00
[65] => 4.00
[66] => 4.00
[63] => 4.00
[76] => 4.00
[51] => 4.00
[52] => 4.00
[43] => 4.00
[58] => 4.00
[60] => 4.00
[74] => 4.00
[67] => 4.00
[35] => 4.00
[17] => 4.00
[16] => 4.00
[18] => 4.00
[20] => 4.00
[41] => 4.00
[15] => 4.00
[11] => 4.00
[4] => 4.00
[5] => 4.00
[6] => 4.00
[7] => 4.00
[83] => 4.00
[22] => 4.00
[34] => 4.00
[38] => 4.00
[40] => 4.00
[25] => 4.00
[32] => 4.00
[80] => 4.00
[81] => 4.00
[27] => 4.00
[30] => 4.00
[79] => 5.00
[89] => 5.00
[88] => 5.00
[72] => 5.00
[71] => 5.00
[44] => 5.00
[21] => 5.00
[23] => 5.00
[24] => 5.00
[19] => 5.00
[14] => 5.00
[3] => 5.00
[9] => 5.00
[28] => 5.00
[29] => 5.00
[56] => 5.00
[57] => 5.00
[54] => 5.00
[46] => 5.00
[39] => 5.00
[45] => 5.00
[62] => 5.00
) 
```

现在我想找到特定索引的位置。即如果我搜索`53`然后它返回它的位置即`2`。正如我正在考虑`53`的`SECOND`位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:14:57.823

使用 array_keys() 获取键，然后尝试 array_search() 获取它的索引。

```
$keys = array_keys($yourArray);
$key = array_search('53', $keys); 
```

没有测试它，但应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T06:14:50.347

您可以使用

```
$a = array_keys($array) 
```

得到一个数组，它的值是 $array => 键

之后你可以使用

```
$a = array_flip($a); 
```

使数组值是数组的索引（**您想要的位置！**）

然后

```
$a["53"];//for example will get what you want 
```

希望能帮助到你

**注意：**如果您经常访问 $a 使用我的方式，因为它构建了数组，之后您将有 O(1) 访问时间，如果您需要它进行一两次访问，最好使用它`array_search`来获取索引O(n)的`array_keys`数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T06:17:32.777

```
function findIndex($arr, $needle) {
    $i = 0;
    foreach ($arr as $key => $value) {
      if ($key === $needle) {
         return $i;
      }
      $i++;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T06:16:16.240

通过 array_keys() 函数获取所有数组键，然后提取所需的键值。见[http://www.php.net/manual/en/function.array-keys.php](http://www.php.net/manual/en/function.array-keys.php)

# java - jsoup 获取 Tablw 中的特定元素

> ID：12067204
> 
> 赞同：1
> 
> 时间：2012-08-22T06:08:58.770
> 
> 标签：java, css, jsoup

我有从以下位置提取信息的 html 页面：

```
table class="students">
<tbody>
<tr class="rz" style="color:red;" onclick="location.href='//andy.pvt.com';">
<td>
<a title="Display Andy website,Andy" href="//andy.pvt.com">15</a>
</td>
<td>Andy jr</td>
<td align="right">44.31</td>
<td align="right">23.79</td>
<td align="right">57</td>
<td align="right">1,164,700</td>
<td align="right">0.12</td>
<td align="center">
<td align="left">0.99</td>
<td align="right">
</tr> 
```

= 我想得到安迪，15 andy.pvt.lom。

我可以使用 doc.select(table).get 提取此表

我无法提取我正在查找的信息。

如何获取“tables.select("xxxx");” 你能帮我解决我所缺少的xxx吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:18:19.470

你说：

> 我试过了 ; 表格 = doc.select("table").get(0); 比tables.select("一个标题)。

你想要更多的东西

```
tables.select("a[href]").attr("href"); // to get your String 
```

和

```
tables.select("a[href]").text(); // to get your number 
```

例如，

```
 Elements tables = doc.select("table");
  String hrefAttr = tables.select("a[href]").attr("href");
  System.out.println("href attribute: " + hrefAttr);
  String number = tables.select("a[href]").text();
  System.out.println("number: " + number); 
```

# java - Gson 强制使用 int 而不是 double

> ID：12067206
> 
> 赞同：12
> 
> 时间：2012-08-22T06:09:08.213
> 
> 标签：java, json, javabeans, gson

嗨，我可以将 gson 配置为他使用 int 而不是 double 得到的数据，例如：

```
{fn: chat, data: {roomId: 1, text: "Some brabble"}} 
```

我有一个 PacketClass 将其反序列化为：

```
public class DataPacket {
  private String fn;
  private Object p; // will be a StringMap
} 
```

并像这样解码：

```
DataPacket pkg = gson.fromJson(message, DataPacket.class); 
```

为了更好的类型处理，我得到了 DataPacket.p 字段的数据 pojo，例如：

```
public class ChatPacket {
  public int roomId;
  public String message;
  public String from;
  // getter & setter
} 
```

要将数据解析为数据包，我使用 BeanMaps 之类的（我删除了错误处理等）：

```
public Object getData(Class<?> pojoClass) {
  pojo = pojoClass.newInstance();
  BeanMap b = new BeanMap();
  b.setBean(pojo);
  b.putAll(this.p);
  pojo = b.getBean();
} 
```

现在的问题是 gson 在 StringMap 中将 roomId: 1 设置为双 1.0 并且 beanmap 尝试将其解析为整数并抛出 NumberFormatException，有人知道如何解决这个问题吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:14:26.747

我认为您可以简单地将 DataPacket 类更改为

```
public class DataPacket {
  private String fn;
  private ChatPacket p; // will be a StringMap
} 
```

（用 ChatPacket 替换 Object） - 如果这适合您的应用程序的其余部分。然后，Gson 将识别 ChatPacket 类的数据类型，并将“1”作为 int 进行表征。

**编辑**（因为您不能在评论中使用完整的格式化功能：-（）

您可以像这样使用 Gson 和它的低级助手 JsonParser 的组合：

```
String testStr = "{fn: chat, data: {roomId: 1, message: \"Some brabble\"}}";
DataPacket dp = new Gson().fromJson(testStr, DataPacket.class); 
JsonParser parser = new JsonParser(); 
JsonElement e = parser.parse(testStr); 
ChatPacket cp = new Gson().fromJson(e.getAsJsonObject().getAsJsonObject("data"), ChatPacket.class); 
```

# c# - ASP.NET 转发器控件中的图像复选框

> ID：12067208
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:09:23.737
> 
> 标签：c#, asp.net

我正在使用 ASP.NET。我正在使用中继器来显示图像，并且我还为每个图像使用了一个复选框。

如何选择单个图像并根据图像 ID 更新它们的值？

我的代码是：

```
 <asp:Repeater ID="Repeater1" runat="server">
      <ItemTemplate>
           <img ID="ImageZoom" runat="server" 
                src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> '
                style="display: inline; height:auto; left: 0pt; top: 0pt;
                width:auto;" />
           <asp:CheckBox ID="CheckBox1" runat="server" />
      </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:33:09.480

您可以使用 javascript 来实现这一点，这样的事情应该可以解决问题：

**没有 jQuery**

```
<asp:Repeater ID="Repeater1" runat="server">
      <ItemTemplate>
           <img ID="ImageZoom" runat="server"
                onclick="imageClickHandler(this,event);" 
                src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> '
                style="display: inline; height:auto; left: 0pt; top: 0pt;
                width:auto;" />
           <asp:CheckBox ID="CheckBox1" runat="server" />
      </ItemTemplate>
</asp:Repeater>

function imageClickHandler(s,e){
//do something with the current image that is being clicked on.
//The parameter 's' is a reference to the caller of this method and the 'e' contains
//event data  
} 
```

**使用 jQuery**

如果你使用 jQuery，你也可以尝试这样的事情：

```
<asp:Repeater ID="Repeater1" runat="server">
      <ItemTemplate>
           <img ID="ImageZoom" runat="server"
                class="handled" 
                src='<%# DataBinder.Eval(Container.DataItem, "ImageUrl") %> '
                style="display: inline; height:auto; left: 0pt; top: 0pt;
                width:auto;" />
           <asp:CheckBox ID="CheckBox1" runat="server" />
      </ItemTemplate>
 </asp:Repeater>

<script type="text/javascript" src="jquery-1.7.3"></script>
$(function(){
  $("img.handled").click(function(){
    //alerts the id of the image thats being clicked on.
    alert($(this).attr("id"));
  });
}); 
```

# android - phoneGap 数据库创建示例

> ID：12067215
> 
> 赞同：0
> 
> 时间：2012-08-22T06:09:49.287
> 
> 标签：android, cordova

我正在尝试使用phonegap的api创建一个数据库：为了做到这一点，我使用了以下html：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("test", "1.0", "Test DB", 1000000);
        alert("database created");
    }

    </script>

</head>
<body>
    <form name="input" action="html_form_action.asp" method="get">
        <input type="submit" value="Create Db" />
    </form>

</body>
</html> 
```

纽扣没有任何作用。这个想法是，当应用程序启动时，我应该确认数据库已创建。然而，这并没有发生。请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:38:54.137

```
**Hi check whether Deviceready fires or not  then try this ** 
```

函数 onDeviceReady() {

```
alert("onDeviceReady");

try {
        if (!window.openDatabase) {
            alert('Browser does not Support this');
        } else {

            var shortName = 'DbName';
            var version = '1.0';
            var displayName = 'DBName';
            var maxSize = 100000; // in bytes
            openDatabase(shortName, version, displayName, maxSize);
            alert('DB created');  
        }
    } catch(e) {
        if (e == 2) {
            // Version mismatch..
            console.log("Invalid database version.");
        } else {
            console.log("Unknown error "+ e +".");
        }
        return;
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:28:25.273

我认为您的 js 位置路径有问题。我运行你的代码，我没有收到任何错误。

请检查您的 cordova.js 路径。我想你把那个 js 放在 js 文件夹中`assets/www/js`

![在此处输入图像描述](../Images/3431a6f934c63eb70ea6ed8d8f2309e0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:38:05.593

我不认为'alert()' 在 webview 中按原样工作。尝试使用 console.log() 代替输出消息（如果您使用的是 eclipse），或其他一些方法 - 可能会更改 div 的内容 - 以向您显示结果。

# c# - 为一个更新面板使用多个更新进度

> ID：12067219
> 
> 赞同：1
> 
> 时间：2012-08-22T06:10:28.677
> 
> 标签：c#, asp.net

我的页面在不同的地方有多个更新进度，但它们都有一个更新面板的 ID，因为我只使用一个更新面板我的问题是如何让一个更新进度在更新完成后显示其内容。

这是我的代码示例：

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server">
      <ContentTemplate>
               <asp:Label ID="platformLabel" runat="server" 
                          Text=" <%$Resources:Resource,SelectPlatform  %>">
               </asp:Label>
               <asp:LinkButton ID="platformHyperLink" runat="server"
                               CssClass="platformElementHL"  
                               CommandArgument='<%# Eval("PLATFORM_ID")%>'
                               OnClick="platformHyperLink_Click" 
                               OnClientClick="ShowSearchButton();" />
               <asp:Label ID="PlatformNameLabel" runat="server" 
                          Text='<%# Eval("PLATFORM_NAME")%>' >
               </asp:Label>
               <telerik:RadButton ID="findDevice" runat="server"   
                                  Text="<%$Resources:Resource,Search  %>" 
                                   OnClientClicked="HideTootltip" 
                                   OnClick="findDevice_Click" 
                                   style="display:none">
                </telerik:RadButton>
         <asp:UpdateProgress ID="updProgress1" 
                       AssociatedUpdatePanelID="UpdatePanel" runat="server">
              <ProgressTemplate>           
                 <img src="App_Themes/WebPortalTheme/images/HomePage/icon-loading-
                           animated.gif" width="20" height="20" alt="Progress" />           
               </ProgressTemplate>
         </asp:UpdateProgress>
         <asp:UpdateProgress ID="updProgress2" 
                       AssociatedUpdatePanelID="UpdatePanel" runat="server">
              <ProgressTemplate>           
                 <img src="App_Themes/WebPortalTheme/images/HomePage/icon-loading-
                           animated.gif" width="20" height="20" alt="Progress" />           
              </ProgressTemplate>
        </asp:UpdateProgress>
     </ContentTemplate>
 </asp:UpdatePanel> 
```

当我单击链接按钮时，应该显示 updateProgress1，当我单击 radButton 时，应该显示 updateprogress2 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:40:49.580

您必须使用两个更新面板（一个用于链接按钮，另一个用于单选按钮）并将每个更新进度与相应的相关联。如果您需要更新整个页面，请使用一个全局 updatepanel ，方法是根据需要设置 childatrigger 选项。

```
 <asp:UpdatePanel ID="UpdtGlobal" runat="server" ChildrenAsTriggers="true">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text=" <%$Resources:Resource,SelectPlatform  %>" />
            <asp:UpdatePanel ID="UpdtLinkButton" runat="server" ChildrenAsTriggers="true">
                <ContentTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CssClass="platformElementHL" CommandArgument='<%# Eval("PLATFORM_ID")%>'
                        OnClick="platformHyperLink_Click" OnClientClick="ShowSearchButton();" />
                </ContentTemplate>
            </asp:UpdatePanel>
            <asp:Label ID="Label2" runat="server" Text='<%# Eval("PLATFORM_NAME")%>' />
            <asp:UpdatePanel ID="UpdtRadButton" runat="server" ChildrenAsTriggers="true">
                <ContentTemplate>
                    <telerik:radbutton id="findDevice" runat="server" text="<%$Resources:Resource,Search  %>"
                        onclientclicked="HideTootltip" onclick="findDevice_Click" style="display: none" />
                </ContentTemplate>
            </asp:UpdatePanel>
            <asp:UpdateProgress ID="UpdateProgress1" AssociatedUpdatePanelID="UpdtLinkButton"
                runat="server">
                <ProgressTemplate>
                    <img src="App_Themes/WebPortalTheme/images/HomePage/icon-loading-animated.gif" width="20"
                        height="20" alt="Progress" />
                </ProgressTemplate>
            </asp:UpdateProgress>
            <asp:UpdateProgress ID="UpdateProgress2" AssociatedUpdatePanelID="UpdtRadButton"
                runat="server">
                <ProgressTemplate>
                    <img src="App_Themes/WebPortalTheme/images/HomePage/icon-loading-animated.gif" width="20"
                        height="20" alt="Progress" />
                </ProgressTemplate>
            </asp:UpdateProgress>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

# hibernate - Hibernate 在枚举数据类型列上执行 IN 查询

> ID：12067225
> 
> 赞同：0
> 
> 时间：2012-08-22T06:11:17.773
> 
> 标签：hibernate, enums

目前，我有一个表，其中有一列具有数据类型枚举。我的问题是我可以在该列上执行 IN 查询吗？

例如：

```
enum Gender { MALE, FEMALE, GAY };
Table Student (
  String name;
  Gender gender;
) 
```

我可以执行：

```
SELECT * FROM Student WHERE gender IN ('MALE', 'FEMALE'); 
```

请注意，我使用字符串作为 in 的参数，但我得到：

```
Caused by: java.lang.IllegalArgumentException: Parameter value [('MALE')] did not match expected type [Gender] 
```

这个问题有解决方法吗？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:24:15.143

由于无法识别字符串值，因此请执行以下代码（假设您已将 Enum 与默认[EnumType](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/type/EnumType.html)一起使用）：

```
SELECT * FROM Student WHERE gender IN (0,1); 
```

如果使用 EnumType.String

```
Query query = session.createQuery(
    "SELECT s FROM Student s WHERE s.gender=:g1 or s.gender=:g2");
query.setParameter("g1", Gender.MALE);
query.setParameter("g2", Gender.FEMALE); 
```

# node.js - Node Express 中的 Jade URL 路由

> ID：12067230
> 
> 赞同：2
> 
> 时间：2012-08-22T06:11:45.640
> 
> 标签：node.js, express, pug

我正在使用 Jade 构建一个 Node Express 应用程序，我对如何将我的视图路由到浏览器将发出的特定请求感到困惑。我知道为了让 URL 在浏览器中工作，我们需要使用 Node 的路由；但是，从网上看，我发现 Express 有自己的路由器。

我使用 PHPStorm 启动我的项目，并且 index.jade 将加载...但是我如何加载其他的？这是我现有的代码：

```
var express = require('express'), routes = require('./routes'), http = require('http'), path = require('path');

var app = express();

app.configure(function ()
{
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser('your secret here'));
    app.use(express.session());
    app.use(app.router);
    app.use(require('less-middleware')({ src:__dirname + '/public' }));
    app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function ()
{
    app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function ()
{
    console.log("Express server listening on port " + app.get('port'));
}); 
```

路由我的应用程序的最基本方法是什么，我在哪里可以找到有关此主题的更广泛的文档？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:33:03.737

> 我知道为了让 URL 在浏览器中工作，我们需要使用 Node 的路由；但是，从网上看，我发现 Express 有自己的路由器。

Node.js 本身不提供对“路由”的支持，但 Express 提供。您可以使用以下语法在 Express 中构建路由：

```
app.[verb]('[url-path]', [handler]); 
```

因此，您的路由**app.get('/', routes.index)**将使用 routes.index 函数处理对 URL 路径 / 的 HTTP GET 请求。Express 会自动将请求和响应对象传递给您的处理程序。

您可以像这样添加更多路线：

```
app.get('/users', routes.userList);
app.get('/user/:id', routes.userInfoView);
app.post('/user/:id', routes.userInfoSave); 
```

您可以在此处找到有关此的更多信息[http://expressjs.com/api.html#app.param](http://expressjs.com/api.html#app.param)

> 我正在使用 Jade 构建一个 Node Express 应用程序，我对如何将我的视图路由到浏览器将发出的特定请求感到困惑。

一旦调用了路由处理程序，比如说 (routes.userList)，您可以在 userList 中调用 res.render() 方法来呈现您想要的 Jade 文件。例如：

```
res.render('user_list', 
    { users: [{name: "user1", age: 10}, {name: "user2", age: 20}] }); 
```

有关更多信息，请参见此处：http: [//expressjs.com/api.html#res.render](http://expressjs.com/api.html#res.render)

# c - FMOD如何在C中使用DSP getParameter函数？

> ID：12067234
> 
> 赞同：0
> 
> 时间：2012-08-22T06:11:55.870
> 
> 标签：c, parameters, signal-processing, fmod, getparameter

我正在使用 FMOD。如何在 C 中使用 DSP getParameter 函数？当我使用跟随的代码时，程序关闭。我不知道我的代码有什么问题。当然，我已经实现了 DSP setParameter 功能。现在我在 getParameter 函数上遇到了麻烦。如果有人知道这个问题，请给我一个提示。

这是我之前尝试过的代码：

```
float Java_com_chocolate_player_equalizer_EQ_cGetEQCenter(JNIEnv *env, jobject thiz, 
int band)
{
    FMOD_RESULT result = FMOD_OK;
    FMOD_BOOL active = 0;

    if(!active){
        result = FMOD_System_AddDSP(gSystem, gDSPParameq[band], 0);
    }
    float * freq;
    char * valueStr = "";
    int valueStrLength = 16;

    result = FMOD_DSP_GetParameter(gDSPParameq[band], FMOD_DSP_PARAMEQ_CENTER, freq,
        valueStr, valueStrLength);

    return *freq;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T10:13:17.903

问题是 FMOD 函数想要写入您传递给它的指针（即 freq），但您没有给它任何要写入的内存，只是一个未初始化的值。

最好将其用作“浮点频率”，然后在 fmod 函数调用中使用 &freq 。

您也对 valueStr 做了同样的事情。你说长度是 16，但你只给了它 0 个字节（“”）的内存。请改用 char valueStr[16]。顺便说一句，你不做任何事情，所以为什么要传递任何东西。只需将 0,0 用于函数的最后 2 个参数。

您还必须调整和使用 return freq，而不是 return *freq;

# java - 使用 Hibernate、Primefaces 和 Spring 更新记录

> ID：12067235
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:11:58.303
> 
> 标签：java, spring, hibernate, jakarta-ee, primefaces

我正在使用`spring 3` `hibernate 4` `jsf`和的集成`primefaces`。在我的数据表中我可以记录`insert`，`delete`但我的更新代码不起作用并且无法更新表和数据库。我不想使用 primefaces `cell editor`，我想要`command button`执行更新。但是当我单击命令按钮时，它会删除数据库和数据表中的单元格（字段），除了 personel_id 字段。请帮助我获得正确的代码。 ![在此处输入图像描述](../Images/9dcb1b8d499c6e3b55c53a515db00211.png) 当我编辑字段并单击更新按钮时： ![在此处输入图像描述](../Images/3bf5c8654528f9af0d18e324126287ab.png) **personelDao.java**

```
public class PersonelDao implements IPersonelDao {
    private SessionFactory sessionFactory;
    public void addPersonel(Personel personel) {
        getSessionFactory().getCurrentSession().save(personel);
    }
    public Personel updatePersonel(Personel personel) {

final Session session = getSessionFactory().getCurrentSession();
if(session.contains(personel)){
    session.update(personel);
} else {
    personel = (Personel) session.merge(personel);
}
return personel;
}
public void deletePersonel(Personel personel) {
            getSessionFactory().getCurrentSession().delete(personel);
        }
    } 
```

**个人服务.java**

```
@Transactional(readOnly=true)
public class PersonelService implements IPersonelService{
    IPersonelDao personeldao;
    @Transactional(readOnly=false)
    public void addPersonel(Personel personel) {
        getPersoneldao().addPersonel(personel);
    }

    @Transactional(readOnly=false)
    public void updatePersonel(Personel personel){
        getPersoneldao().updatePersonel(personel);
    }
    @Transactional(readOnly=false)
    public void deletePersonel(Personel personel) {
        getPersoneldao().deletePersonel(personel);
    }
} 
```

**个人豆类.java**

```
@ManagedBean(name="personelMB")
@RequestScoped
public class PersonelBean implements Serializable{
    private static final long serialVersionUID = 1L;
    @ManagedProperty(value="#{PersonelService}")
    IPersonelService personelservice;
    List<Personel> personelList;
    private int personel_id;
    private String pname;
    private String pfamily;
    private String paddress;
    private String pphone;

    //getter and setter
    public void addPersonel(){
            Personel personel=new Personel();
            personel.setPaddress(getPaddress());
            personel.setPersonel_id(getPersonel_id());
            personel.setPfamily(getPfamily());
            personel.setPname(getPname());
            personel.setPphone(getPphone());
            getPersonelservice().addPersonel(personel);
            reset();
    }

    public void deletePersonel(int personel_id){
            Personel personel=(Personel)personelservice.getPersonelId(personel_id);
            getPersonelservice().deletePersonel(personel);
    }

    public void update(int personel_id){
        Personel personel=(Personel)personelservice.getPersonelId(personel_id);
        personel.setPaddress(getPaddress());
        personel.setPfamily(getPfamily());
        personel.setPname(getPname());
        personel.setPphone(getPphone());
        getPersonelservice().updatePersonel(personel);
    }
} 
```

**个人资料.xhtml**

```
 <h2>مشاهده اطلاعات پرسنل</h2>   
     <h:form  prependId="false">  
      <p:dataTable id="pdataTable" var="personel" value="#{personelMB.personelList}" rowKey="#{personelMB.personel_id}" editable="true"
         >  
            <f:facet name="header">  
                اطلاعات پرسنل 
            </f:facet>  
              <p:column> 
             <f:facet name="header">  
                   شماره پرسنلی  
                </f:facet>  
                <h:outputText value="#{personel.personel_id}" />  
                <f:facet name="footer">  
                    کدملی 
                </f:facet>  
            </p:column>  
      <p:column headerText="نام">
            <p:inputText value="#{personel.pname}" size="5"/>
                 </p:column>  
      <p:column headerText="نام خانوادگی"> 
             <p:inputText value="#{personel.pfamily}" size="5"/>
                </p:column>  
      <p:column headerText="آدرس"> 
            <p:inputText value="#{personel.paddress}" size="5"/>
            </p:column>  
       <p:column headerText="تلفن"> 
                <p:inputText value="#{personel.pphone}" size="5"/> 
            </p:column>
            <p:column headerText="حذف">
          <f:facet name="حذف">
             <h:outputText value="" />
          </f:facet>
          <p:commandButton icon="ui-icon-trash" title="حذف"
                           actionListener="#{personelMB.deletePersonel(personel.personel_id)}"  update="@form" ajax="true"/>
       </p:column>
       <p:column headerText="ويرايش">
      <p:commandButton icon="ui-icon-pencil" title="ويرایش"
                           actionListener="#{personelMB.update(personel.personel_id)}"  update="@form" ajax="true"/>
</p:column>
        <f:facet name="footer">  
            تعداد رکورد#{fn:length(personelMB.getPersonelList())} میباشد.  
        </f:facet>  

    </p:dataTable> 
```

**个人资料.java**

```
@Entity
@Table(name="TBLPERSONEL")
public class Personel {
    @Id
    @Column(name="PERSONEL_ID")
    private int personel_id;
    @Column(name="PNAME")
    private String pname;
    @Column(name="PFAMILY")
    private String pfamily;
    @Column(name="PADDRESS")
    private String paddress;
    @Column(name="PPHONE")
    private String pphone;
    @OneToOne
    @PrimaryKeyJoinColumn
    private Manager manager;
    @OneToMany(mappedBy="personel")
    private Set<Stufftransfer> stufftransfers;
    public Personel(){

    }
    //getter and setter
} 
```

痕迹：

```
Hibernate: update TBLPERSONEL set PADDRESS=?, PFAMILY=?, PNAME=?, PPHONE=? where PERSONEL_ID=?
Hibernate: select personel0_.PERSONEL_ID as PERSONEL1_1_, personel0_.PADDRESS as PADDRESS1_, personel0_.PFAMILY as PFAMILY1_, personel0_.PNAME as PNAME1_, personel0_.PPHONE as PPHONE1_ from TBLPERSONEL personel0_
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=?
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=?
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=?
Hibernate: select personel0_.PERSONEL_ID as PERSONEL1_1_, personel0_.PADDRESS as PADDRESS1_, personel0_.PFAMILY as PFAMILY1_, personel0_.PNAME as PNAME1_, personel0_.PPHONE as PPHONE1_ from TBLPERSONEL personel0_
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=?
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=?
Hibernate: select manager0_.ID as ID0_1_, manager0_.PASSWORD as PASSWORD0_1_, manager0_.PERSONEL_ID as PERSONEL3_0_1_, personel1_.PERSONEL_ID as PERSONEL1_1_0_, personel1_.PADDRESS as PADDRESS1_0_, personel1_.PFAMILY as PFAMILY1_0_, personel1_.PNAME as PNAME1_0_, personel1_.PPHONE as PPHONE1_0_ from TBLMANAGER manager0_ left outer join TBLPERSONEL personel1_ on manager0_.ID=personel1_.PERSONEL_ID where manager0_.ID=? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:13:03.487

为防止更新时出现会话丢失问题，dao 中的更改：

```
public class PersonelDao implements IPersonelDao {
    ...
    public Personel updatePersonel(Personel personel) {
        final Session session = getSessionFactory().getCurrentSession();
        if(session.contains(personel)){
            session.update(personel);
        } else {
            personel = (Personel) session.merge(personel);
        }
        return personel;
    }
    ...
} 
```

因此，如果实体不在会话中，将被迫将其与合并链接。

您还必须检索合并返回的对象，您可能不得不强制并更改内存中的引用。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:01:23.497

仅在方法中定义事务性并分配传播，如果您在类上定义“事务性”，则适用于所有方法。

personelservice.java 的更改：

```
//@Transactional(readOnly=true)
public class PersonelService implements IPersonelService{
    IPersonelDao personeldao;
    @Transactional(propagation=Propagation.REQUIRED)
    public void addPersonel(Personel personel) {
        getPersoneldao().addPersonel(personel);
    }

    @Transactional(propagation=Propagation.REQUIRED)
    public void updatePersonel(Personel personel){
        getPersoneldao().updatePersonel(personel);
    }

    @Transactional(propagation=Propagation.REQUIRED)
    public void deletePersonel(Personel personel) {
        getPersoneldao().deletePersonel(personel);
    }
} 
```

问候，

马努·纳瓦罗。

PS：原谅我的英文小流水

# jquery - 使用 JqueryRotate 旋转图像后调整表 TD 的大小

> ID：12067248
> 
> 赞同：0
> 
> 时间：2012-08-22T06:13:17.867
> 
> 标签：jquery, html-table, rotation, filemaker

我有一个 Filemaker 摄影数据库，我正在尝试为 35 毫米底片生成一个联系表。

我使用脚本动态创建在 Web 查看器中呈现的简单 html 表。

我使用 JQueryRotate 仅将那些具有纵向方向的图像旋转 90 度，并调整所有图像的大小以使其更小：

```
<script>
    $(document).ready(function(){
        $('img.portrait').rotate(90);
        $('img.landscape').width(191);
        $('img.portrait').height(191);
    });
</script> 
```

这是一个典型的表格行：

```
<tr>
    <td>A</td>
    <td><img class="landscape" src="CM04_F20_A1.jpg"></td>
    <td><img class="landscape" src="CM04_F20_A2.jpg"></td>
    <td><img class="portrait" src="CM04_F20_A3.jpg"></td>
    <td><img class="landscape" src="CM04_F20_A4.jpg"></td>
    <td><img class="portrait" src="CM04_F20_A5.jpg"></td>
    <td><img class="landscape" src="CM04_F20_A6.jpg"></td>
</tr> 
```

到目前为止，这是我的 CSS：

```
 <style type="text/css">
    table.noborder {border:none;}
    td.noborder {border:none; text-align: left; padding:0px;}
    body, h1, h2, h3 {
        margin:0px;
        padding:0px;
    }
    h2 {font-family:"Calibri",Arial,Helvetica,sans-serif; font-size:16pt; font-weight:bold;}
    table {border-collapse:collapse; border:1px solid black;} 
    td {
        border:1px solid black;
        vertical-align:middle;
        text-align:center;
        }
    th {border:1px solid black;}
</style> 
```

这是结果（如您所见，我正在尝试为保存在档案相册的一个给定支架中的 35 毫米负片条创建参考联系表）：

[http://i1163.photobucket.com/albums/q545/callyphage/contactSheet.png](http://i1163.photobucket.com/albums/q545/callyphage/contactSheet.png)

无论我做什么，已经通过 Jquery 旋转的图像的表格行的高度似乎一直设置为旋转前图像的高度。（这就是细胞具有方形外观的原因。）

我想尽可能多地摆脱图像下方上方的空白，但一直无法做到。我尝试将表格行的高度设置为固定数字（例如，130 像素），但无济于事。

我希望我已经说清楚了。我对这一切都很陌生。我有一种感觉，必须有更好的方法来完成这一切。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:07:35.283

我想我终于成功了。我从这篇博文中得到了一些半夜的灵感：

[http://bavotasan.com/2011/rotated-images-with-css3/](http://bavotasan.com/2011/rotated-images-with-css3/)

我所做的是，在所有包含我的图像的表格单元格中创建一个 div 类“image_box”：

```
<td><div class="image_box"><img class="landscape" src="CM04_F20_A1.jpg"></td></div> 
```

然后将我的 CSS 更改为仅此：

```
 <style type="text/css">
.image_box { 
   width: 192px;
   height: 130px;
   overflow: hidden;
   position: relative;
    border: 5px solid #eee;
   }    
.portrait { 
   position: absolute;
   left: 50%;
   top: 50%;
   margin: -96px 0 0 -65px;
   }
.landscape { 
   position: absolute;
   left: 0px;
   margin: 0px;
   }
</style> 
```

其中旋转的 .portrait 图像的边距大小是调整后图像大小一半的负数。

结果是：http: [//i1163.photobucket.com/albums/q545/callyphage/contactSheet2.png](http://i1163.photobucket.com/albums/q545/callyphage/contactSheet2.png)

我希望这对其他人有所帮助，尽管我只在 Chrome 中尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:45:50.447

在我看来，您需要在运行 jquery 调用后强制 TD.height 的 HTML 末尾（在标记之前）加载 javascript 或样式（我假设在您的标题中）。

IE：

```
<style>td {height:130px !important;}</style> 
```

或者：

```
<style>td {max-height:130px;}</style> 
```

确保您还在代码中将 cellpadding 设置为零，以防填充生成空白。

最后的建议是将 html 文件保存到桌面并在 chrome 中加载，右键单击并在 TD 上选择“检查元素”以查看 CSS 是如何应用的。

# php - 使用 php 和 redis

> ID：12067253
> 
> 赞同：1
> 
> 时间：2012-08-22T06:13:32.407
> 
> 标签：php, redis

我是新手`redis`和`predis`。我想创建一个简单的`sign up`表单并将数据发送到用户电子邮件 ID。我已经编写了脚本`sign up`并`email`发送。现在我想做一个`queue`我想把这两个工作都放在里面的东西。并且当用户单击提交时，处理器不应等待发送电子邮件。发送电子邮件应该排队。并且应该在后台处理。请大家给我一个这样的脚本在`php`使用中的参考`redis`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:21:37.363

您可以做的是，将数据推送到 redis 列表并从正在轮询列表以获取任何数据的工作人员那里选择数据，然后通过电子邮件发送。

脚步：

制作一个新的predis客户端`$redis = new Predis\Client("parameter");`

predis 列表`$redis->lpush(listname, "Data");`

最后是一个工人（Cron），它从同一个列表中获取数据

```
$redis->rpop(listname, variable); 
```

其他解决方法是使用 redis 的 pub/sub。

[在此处](http://try.redis-db.com/)尝试 redis和文档 - [redis 命令](http://redis.io/commands)

Predis[示例](https://github.com/nrk/predis)。在示例文件夹中。

# c# - 如何比较两个对象之间的属性

> ID：12067255
> 
> 赞同：6
> 
> 时间：2012-08-22T06:14:00.877
> 
> 标签：c#, reflection

我有两个类似的课程：`Person`，`PersonDto`

```
public class Person 
{
    public string Name { get; set; }
    public long Serial { get; set; }
    public DateTime Date1 { get; set; }
    public DateTime? Date2 { get; set; }
} 
```

&

```
public class PersonDto
{
    public string Name { get; set; }
    public long Serial { get; set; }
    public DateTime Date1 { get; set; }
    public DateTime? Date2 { get; set; }
} 
```

我有两个值相等的对象。

```
 var person = new Person { Name = null , Serial = 123, Date1 = DateTime.Now.Date, Date2 = DateTime.Now.Date };
    var dto = new PersonDto { Name = "AAA", Serial = 123, Date1 = DateTime.Now.Date, Date2 = DateTime.Now.Date }; 
```

我需要通过反射检查两个类中所有属性的值。我的最终目标是定义此属性的差异值。

```
 IList diffProperties = new ArrayList();
    foreach (var item in person.GetType().GetProperties())
    {
        if (item.GetValue(person, null) != dto.GetType().GetProperty(item.Name).GetValue(dto, null))
            diffProperties.Add(item);
    } 
```

我这样做了，但结果并不令人满意。`diffProperties`结果的计数是，但`4`我期望的计数是`1`。

当然，所有属性都可以有空值。

我需要一个通用的解决方案。我必须做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T06:14:42.593

如果您想坚持通过反射进行比较，则不应使用 != （引用相等，这将使 GetProperty 调用的装箱结果的大多数比较失败），而是使用[静态 Object.Equals 方法](http://msdn.microsoft.com/en-us/library/w4hkze5k%28v=vs.100%29)。

示例如何使用 Equals 方法比较反射代码中的两个对象。

```
 if (!Object.Equals(
     item.GetValue(person, null),
     dto.GetType().GetProperty(item.Name).GetValue(dto, null)))
 { 
   diffProperties.Add(item);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:25:11.930

您可以考虑让`Person`类实现`IComparable`接口并实现`CompareTo(Object obj)`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:25:59.743

实现[IEquatable 接口](http://msdn.microsoft.com/en-us/library/ms131187.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T06:26:16.820

看看你的类，并不是所有的值都可以为空，你有一个可以为空的 long。但这就是说。

我也做了类似的东西并使用[了这个网站](http://www.sidesofmarch.com/index.php/archive/2007/08/03/use-reflection-to-compare-the-properties-of-two-objects/)。只需让它可以接受 2 个不同的对象。由于许可抱歉，我无法共享我的代码。

# javascript - 未捕获的ReferenceError：尝试在Android webview中访问时未定义函数

> ID：12067260
> 
> 赞同：2
> 
> 时间：2012-08-22T06:14:33.887
> 
> 标签：javascript, android, webview

我在 Android 中使用 WebView。我正在使用 loadDataWithBaseURL 来加载下面的 url：

（出于安全原因，这里我使用“XXXX”来替换我的实际网页 URL）

wb.loadDataWithBaseURL(" [http://XXXX.html](http://XXXX.html) ", formattedHTML, "text/html", "UTF-8", null);

formattedHTML 的内容包含由我的服务类填充的实际 html 源代码。

[http://XXXX.html](http://XXXX.html)的完整源代码如下：

```
<html>
    <head>

        <script language="javascript">
            function displayAlert()
            {
                alert("this is in function displayAlert()");
            }
        </script>
    </head>
    <body onload="displayAlert();">dummy
    </body>
</html> 
```

我有一个按钮。单击它时，我希望执行 javascript 函数“displayAlert”： wb.loadUrl("javascript:displayAlert()");

我的问题：

1.  我在 logCat 视图中遇到此错误消息： Uncaught SyntaxError: Unexpected identifier at [http://XXXX.html:1](http://XXXX.html:1)。

我搜索了很多网页，其中大多数都说这是由于 javascript 中的“{”和“}”不匹配造成的。但我检查了我的，发现我的 javascript 代码格式正确，如上所示。

2.  当我单击按钮时，javascript 无法执行。错误消息：E/Web 控制台（534）：未捕获的 ReferenceError：displayAlert 未在 null:1 处定义。

我已经通过以下方式在 webview 中启用了 javascript：

```
WebSettings webSettings = wb.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

[为什么“ http://XXXX.html](http://XXXX.html) ”中实现的javascript函数找不到执行？

你能帮帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T16:04:35.857

用这个

```
webView.setWebViewClient(new WebViewClient() {
                @Override
                public void onPageFinished(WebView view, String url)
                {
                    webView.loadUrl("javascript:(function() { " +
                            "alert('hello') " +
                            "})()");
                }
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T23:42:52.503

您的问题在于您的`type`属性的编写方式，有`text/javascript`和没有`javascript/text`非常重要（的顺序`type`必须绝对正确）

```
 <script type="text/javascript">
        function displayAlert()
        {
            alert("this is in function displayAlert()");
        }
    </script> 
```

# mysql - 没有连接条件的两个表的结果

> ID：12067261
> 
> 赞同：4
> 
> 时间：2012-08-22T06:14:40.987
> 
> 标签：mysql

我有这样的查询

```
SELECT COUNT(u.user_id) AS count1 FROM users WHERE user_id>1001 
UNION
SELECT COUNT(c.hits) AS count2 FROM source c WHERE loginid LIKE 'fb%'; 
```

结果

```
count1 
250
56 
```

像这样单行怎么做

```
count1   count2
250      56 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:19:43.633

您可以使用子查询来实现此目的：

```
select 
      (SELECT COUNT(u.user_id) AS count1 from users where user_id>1001) as count1,
      (select count(c.hits) AS count2 from source  c where loginid like 'fb%') as count2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:21:52.460

```
SELECT SUM(count1) AS count1,
       SUM(count2) AS count2
FROM(
    SELECT COUNT(u.user_id) AS count1, 0 AS count2 from users where user_id>1001

    UNION ALL

    SELECT 0 AS count1, count(c.hits) AS count2 from source  c where loginid like 'fb%';
)a; 
```

# c# - 如何在 OnNavigatedFrom 事件中更新辅助磁贴

> ID：12067264
> 
> 赞同：0
> 
> 时间：2012-08-22T06:14:45.057
> 
> 标签：c#, windows-phone-7, live-tile

我在我的应用程序中实现了动态磁贴，用户可以将辅助磁贴固定到开始屏幕。我遇到的问题是当用户在应用程序中选择新图像时如何更新辅助磁贴的 BackgroundImage。据我所知，更新 BackgroundImage 以便用户始终看到他或她选择的新图像的最佳方法是更新 MainPage 上 OnNavigatedFrom 事件中的辅助磁贴。我不确定如何更新辅助磁贴，尽管它不是在点击事件中创建的。

为了添加更多细节，我的应用程序有一个 hubtile，我创建了一个带有“pin to start”选项和“change image”选项的 ContextMenu。“更改图像”选项加载 PhotoChooserTask 并允许用户从那里选择图像，然后将该图像保存在隔离存储中并将其应用于 hubtile。当用户单击“pin to start”时，会创建一个辅助图块，该图块具有与其各自的 hubtile 相同的图像。到目前为止，这是可行的，但是当我更改应用程序的 hubtile 中的图像时，我不知道如何在开始屏幕上自动更新相应的辅助磁贴图像。我在网上研究的每种方法都显示了如何在与创建磁贴的位置相同的单击事件中更新磁贴实例（可能在按钮单击事件中显示“创建磁贴”），

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:05:55.367

您可以删除辅助磁贴并将其添加为您的 onnavigatedfrom 代码中的新磁贴

# berkeley-db - 将另一个关系数据库插入 OpenDS

> ID：12067265
> 
> 赞同：0
> 
> 时间：2012-08-22T06:14:49.093
> 
> 标签：berkeley-db, opends

目前我正在开发一个带有opends的项目。我必须在 OpenDS 中上传超过 200k 的条目。但不幸的是，当文件限制超过 10k - 15k 时，它会随机失败。

当我搜索该特定错误时（警报 ID 9896233：与后端 id userRoot 对应的 JE 数据库环境已损坏。重新启动目录服务器以重新打开环境）似乎 openDS 后端数据库 [BerklyDB] 在添加大量条目。我如何将新的商业或开源可靠关系数据库 [Oracle/H2] 插入到 openDS。任何配置？还是我必须更改 openDS 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:06:06.030

首先，您应该知道 Oracle 已经停止了 OpenDS 项目，现在它完全停止了。开发继续作为 OpenDJ 项目的开源项目：http: [//opendj.forgerock.org](http://opendj.forgerock.org)。

这就是说，我相信你的环境有问题。当我还在开发 OpenDS 时，我们的基本压力测试是针对 1000 万用户导入和运行非常高的负载。200K 条目并不是一个庞大的数字。我在笔记本电脑上的日常 OpenDJ 测试是使用 100K 到 1M 条目完成的。我们有客户使用 OpenDJ 进行生产，条目超过 2000 万，每 6 个月增长 40%！

Berkeley DB 已被证明是非常可扩展和可靠的。您可能想要检查的事情：您机器上的单个进程可以打开的最大文件数是多少？Linux 默认为 1024，使用 OpenDS 或 OpenDJ 可能很容易达到此限制。您使用的是本地文件系统吗？Berkeley DB 在 NFS 或其他 NAS 等联网 FS 上不受支持。

最后，检查日志/错误文件和您的系统日志。其中一个可能会有一条包含问题根本原因的消息（很可能是日志/错误）。

亲切的问候，

卢多维奇·普瓦图

ForgeRock - OpenDJ 产品经理

# android - 如何使用 ffmpeg android 对媒体文件进行硬件解码？

> ID：12067268
> 
> 赞同：2
> 
> 时间：2012-08-22T06:15:02.310
> 
> 标签：android, video, ffmpeg, stagefright

我正在 android 中开发一个媒体播放器应用程序，它使用 ffmpeg 进行解码，我认为这是软件解码。它不能流畅地播放高分辨率视频，所以我想切换到硬件解码。我开始知道 libstagefright 会做这件事。但是如何使用 libstagefright 来实现呢？是否有任何样品或文档。请帮助使用 libstagefright。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:53:49.890

如果您使用的是 ICS，则可以使用 MediaCodec 使用硬件进行编码或解码。有关更多详细信息和示例，请参阅[http://developer.android.com/reference/android/media/MediaCodec.html](http://developer.android.com/reference/android/media/MediaCodec.html)。谢谢，NinjAndroid，MoMinis 研发团队

# javascript - 将 javascript 变量分配给 ruby 变量

> ID：12067270
> 
> 赞同：2
> 
> 时间：2012-08-22T06:15:18.333
> 
> 标签：javascript, ruby

我正在处理一个从 websocket 调用的脚本。本页代码是 html.erb

它将变量传递给 javascript，并从该 javascript 变量中将其分配给 ruby​​ 变量，

这是代码

```
function set_color(val1,val2)
{

  <%background_color_id = %>
  var obj_color_id = '<%=background_color_id ='+val2+'%>' ;
  console.log(obj_color_id)
 } 
```

控制台日志的结果是`+val2+`

如果我通过`var obj_color_id = '<%=background_color_id ='val2'%>' ;`

控制台日志的结果是`val2`

请帮我将javascript变量分配给ruby变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:23:49.837

你不可以做这个。Javascript 运行客户端，Ruby 运行服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:25:04.520

你不能那样做。所有值`<%=`都在服务器端进行翻译，并将它们的值发送到客户端。客户端没有红宝石。您必须向您的 websocket 或 http 服务器发送请求，以便将一些数据传递给服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:33:45.953

实际上，如果我理解您的代码（不幸的是，您的问题措辞不好），简单的解决方案是：

1-通过服务器端代码分配一个值：

```
function set_color(val1,val2)
{
  var bkgdColorId = "<%= background_color_id %>";
  var obj_color_id = bkgdColorId;
  console.log(obj_color_id)
} 
```

2-（或，）从客户端代码分配一个值：

```
function set_color(val1,val2)
{
  /** pseudo-code **/
  on-click-event: makeAjaxCallToServer(){
    urlForWebService, { color: val2 }
  }
} 
```

使用一些 jQuery（如果从客户端事件分配给服务器）将极大地促进这个过程。

# javascript - 如何正确停止 mousemove 事件？

> ID：12067272
> 
> 赞同：3
> 
> 时间：2012-08-22T06:15:19.517
> 
> 标签：javascript, html, events, dom, drag-and-drop

我正在尝试了解拖放在本机 javascript 中的工作方式。我正在编写一个简单的 javascript 函数来实现它。它有效，但不正确。

[http://jsfiddle.net/FKM5S/](http://jsfiddle.net/FKM5S/)

当您将白盒缓慢移向黑盒时，白盒按设计停止。当您足够快地移动白盒时，它实际上会与黑盒重叠。

在我的 javascript 代码中，我检查白框是否与黑框重叠，然后返回 false。

```
var beforeMovePassed = this.callbacks.beforeMove();

if( beforeMovePassed )
{
    return false;
} 
```

我不确定为什么会这样。

如何正确停止事件，以使白框不会与黑框重叠，无论您的拖动速度如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:21:00.183

请注意，并非每次更改都会调用事件处理程序，调用之间的毫秒数有一些限制，这取决于许多因素。

所以你会很好，每次检查白框是正确的黑框，如果是这样，然后你自己将它移动到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:25:41.667

我不确定

但是在这种情况下尝试使用 event.preventDefault() 你必须有事件对象的引用。

希望它会奏效！！

# android - 如何通过 Android 应用程序进行 USB 网络共享？

> ID：12067274
> 
> 赞同：2
> 
> 时间：2012-08-22T06:15:23.877
> 
> 标签：android, sockets, mobile-application, android-networking, android-2.3-gingerbread

我正在开发适用于手机和平板电脑的 Android 应用程序。我想让 USB 网络共享自动进行。

在我的应用程序中，如果用户单击“USB 同步”按钮，则应自动启用网络共享。

**我使用的是 Android 2.3.3 及更高版本。**

有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:25:07.593

只是把它作为一个答案:) 在某些条件下绝对可能。[这](https://stackoverflow.com/questions/7509924/detect-usb-tethering-on-android)可能会帮助你。但我不确定它在 3.0 或更高版本上是否可行 :(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:52:00.773

某些最新版本的 android 无法自动进行 USB ttithering。**Android 3.0 及更高版本**无法自动进行 USB 同步。
所以如果android版本低于3.0意味着我们使用自动usbtithering。
**自动usbtithering是一个非常糟糕的主意，**它有很多困难，缺点等。所以没有人遵循它。
**我也离开了自动十一奉献。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:22:23.553

你应该实现这个：虽然没有时间尝试： [https ://android.googlesource.com/platform/packages/apps/Settings/+/master/src/com/android/settings/TetherSettings.java](https://android.googlesource.com/platform/packages/apps/Settings/+/master/src/com/android/settings/TetherSettings.java)

# sql - 在 SQLite 中删除低于给定平均值的项目：我收到语法错误

> ID：12067276
> 
> 赞同：0
> 
> 时间：2012-08-22T06:15:29.873
> 
> 标签：sql, sqlite

我有一张很大的桌子。

每行都有一个 uniqueId 和一个 itemId。我想删除价格低于给定平均值的所有项目。我认为这样的事情应该可以工作，但它没有：

```
 DELETE FROM items GROUP BY itemId HAVING avg(price) < ? 
```

SQLite 抱怨：

> “GROUP”附近：语法错误

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:27:46.110

```
DELETE 
FROM items as i1 
WHERE i1.itemID in (
    Select i2.itemID 
    FROM items as i2
    GROUP BY i2.itemId 
    HAVING avg(price) < "user defined threshold" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:21:07.377

试试这个：

```
delete I 
from   items I join
       (select itemId,avg(price) as price
       from items
       GROUP BY itemId)a
on     I.itemId=a.itemId
where  I.price<a.price 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T06:20:56.770

我认为应该是这样的

```
DELETE FROM items WHERE itemId HAVING avg(price) < ? 
```

# html - Chrome 手机中的 MJPEG

> ID：12067277
> 
> 赞同：2
> 
> 时间：2012-08-22T06:15:49.883
> 
> 标签：html, google-chrome, mjpeg

我有来自 IP-Camera 的流。它在 safari 和 opera mini 中运行良好，但在 chrome 上我什么也没收到，或者如果直接打开流我得到这个：

![在此处输入图像描述](../Images/234b56ce2eaec190c86905ec713f2e94.png)

要显示我使用此代码

```
<input width="320" type="image" height="240" border="0" id="Сamera" src="url"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:27:18.323

你也可以试试这个[node.js 代理](https://github.com/wilhelmbot/Paparazzo.js)。它解析 m-jpeg 流并将图像传送到所有浏览器。

[显示 MJPEG 流的跨浏览器解决方案](https://stackoverflow.com/questions/5269376/cross-browser-solution-for-displaying-mjpeg-stream/12966492#12966492)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:53:23.823

您可能会遇到 Chrome[问题 135337](http://code.google.com/p/chromium/issues/detail?id=135337)，其中直接获取的 MJPEG 图像无法制作动画。

据报道，它已在版本 22 中得到修复。因此，您可以升级到该版本或更改代码以将图像嵌入 HTML 页面。例如，以下在 Chrome 21 中有效（即使没有发生任何事情，时间戳仍应递增）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>
      Test MJPEG Animation
    </title>
  </head>
  <body>
    <h2>
      Test MJPEG Animation
    </h2>
    <img src="http://193.40.245.181/mjpg/video.mjpg">
  </body>
</html> 
```

但是，只需将浏览器指向就`http://193.40.245.181/mjpg/video.mjpg`只显示第一帧。

# c++ - 如何通过 SFINAE 测试类中是否存在内部类？

> ID：12067278
> 
> 赞同：9
> 
> 时间：2012-08-22T06:15:49.097
> 
> 标签：c++, template-specialization, sfinae

我正在尝试为具有特定名称的内部类的类提供不同的模板专业化。我从[这里](http://www.boost.org/doc/libs/1_51_0/libs/utility/enable_if.html#sec%3aenable_if_classes)得到了一个线索并尝试了以下方法：

```
#include <iostream>

template< typename T, typename Check = void > struct HasXYZ
{ static const bool value = false; };

template< typename T > struct HasXYZ< T, typename T::XYZ >
{ static const bool value = true; };

struct Foo
{
  class XYZ {};
};

struct FooWithTypedef
{
  typedef void XYZ;
};

int main()
{
  // The following line prints 1, as expected
  std::cout << HasXYZ< FooWithTypedef >::value << std::endl;
  // The following line prints 0\. Why?
  std::cout << HasXYZ< Foo >::value << std::endl;

  return 0;
} 
```

如您所见，如果我在 中测试`typedef`-defined 类型`FooWithTypedef`，它可以工作。但是，如果类型是真正的内部类，则它不起作用。它也仅在`typedef`-ed 类型`FooWithTypedef`与初始模板声明中第二个参数的默认值匹配时才有效（`void`在我的示例中）。有人能解释一下这里发生了什么吗？专业化过程在这里如何运作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:38:39.507

**回答最初的问题**

您在此处定义的模板专业化：

```
template <typename T> struct HasXYZ <T,typename T::XYZ>
{ static const bool value = true; }; 
```

`HasXYZ<A,A::XYZ>`当有人将该数据类型用于某些数据类型时将生效`A`。

请注意，无论`A`是什么，`A::XYZ`都是完全独立于`A`. 内部类本身就是数据类型。当您`A`用作第一个模板参数时，编译器绝对没有理由假设您想要使用称为`A:XYZ`第二个参数的东西，即使存在该名称的内部类，即使这样做会导致编译器到与模板参数完全匹配的模板特化。模板特化是根据编码器提供的模板参数找到的，而不是基于更多*可能的*模板参数。

因此，当您使用 时`HasXYZ<Foo>`，它会回退到使用`void`第二个参数的默认模板参数。

不用说，如果您要`HasXYZ<Foo,Foo:XYZ>`明确使用，您将获得预期的输出。但这显然不是你想要的。

恐怕获得所需东西的唯一方法是`std::enable_if`（或以类似方式工作的东西）。

* * *

**回答附加问题（更新后）**

考虑下面的简化：

```
template <typename T, typename Check = void>
struct A
{ static const bool value = false; };

template <typename T>
struct A<T,void>
{ static const bool value = true; }; 
```

主要*定义*`void`为第二个模板参数指定默认参数。但是*专业化*（上面的第二个定义）定义了`class A`如果第二个模板参数真的*是* `void`.

这意味着，如果您`A<int>`在代码中使用，例如，默认参数将被补充，因此您得到`A<int,void>`，然后编译器会找到最合适的模板特化，即上面的第二个。

因此，虽然默认模板参数被定义为主模板声明的一部分，但使用它们并不意味着使用主模板定义。这基本上是因为默认模板参数是模板声明的一部分，而不是模板定义 (*)。

这就是为什么在您的示例中，当`typedef void XYZ`包含在 中时`FooWithTypedef`，第二个模板参数默认为`void`，然后找到最合适的特化。即使在模板特化中第二个参数被定义为`T::XYZ`而不是，这仍然有效`void`。如果在评估时这些相同，则将选择模板专业化（第 14.4 节“类型等效”）。

(*) 我没有在标准中找到一个声明如此清楚。但是有 §14.1/10，它描述了一个模板有多个声明（但只有一个主要定义）的情况：

> （第 14.1/10 节）可用于模板声明或定义的默认模板参数集是通过将定义中的默认参数（如果在范围内）和范围内的所有声明以相同的方式合并默认函数参数来获得的(8.3.6)。[ 例子：
> 
> ```
>  template<class T1, class T2 = int> class A;
>   template<class T1 = int, class T2> class A; 
> ```
> 
> 相当于
> 
> ```
>  template<class T1 = int, class T2 = int> class A; 
> ```
> 
> ]。

这表明默认模板参数背后的机制独立于用于识别模板最合适的特化的机制。

此外，还有两个现有的 SO 帖子也提到了这种机制：

[如果类成员 typedef 不存在，](https://stackoverflow.com/questions/3008571/template-specialization-to-use-default-type-if-class-member-typedef-does-not-exi)[此对模板专业化的回复](https://stackoverflow.com/a/3009891/777186)以使用默认类型

[类模板特化中模板参数的默认值](https://stackoverflow.com/questions/11148845/default-values-of-template-parameters-in-the-class-template-specializations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:47:56.150

这是另一个检测内部类存在的版本：

```
#include <iostream>

template< typename T >
struct HasXYZ
{
  typedef char                 yes;
  typedef struct{ char d[2]; } no;

  template<typename T1>
  static yes test( typename T1::XYZ * );
  template<typename T1>
  static no test(...);

  static const bool value = ( sizeof( test<T>(0) ) == sizeof( yes ) );
};

struct Foo
{
  class XYZ {};
};
struct Bar
{
  class ABC {};
};

int main()
{
  std::cout << std::boolalpha << HasXYZ< Foo >::value << std::endl;
  std::cout << std::boolalpha << HasXYZ< Bar >::value << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:35:32.810

`A::XYZ`将需要`void`选择部分专业化，而类类型永远不会出现这种情况。使其工作的一种方法是使用虚假的依赖`void`类型名：

```
template<class T>
struct void_{ typedef void type; };

template<class T, class = void>
struct has_XYZ{ static bool const value = false; };

template<class T>
struct has_XYZ<T, typename void_<typename T::XYZ>::type>{
  static bool const value = true;
}; 
```

有关其工作原理的说明，请参阅[此问题](https://stackoverflow.com/q/6543652/500104)。

# asp.net-mvc - asp.net MVC 应用程序和 WCF 服务之间的通信，具有基于 Windows 的安全性

> ID：12067279
> 
> 赞同：0
> 
> 时间：2012-08-22T06:15:49.820
> 
> 标签：asp.net-mvc, wcf, security

我正在制作一个与 IIS 上的 wcf 服务通信的 asp.net MVC 应用程序。asp.net MVC 应用程序使用正常的登录机制（用户名、密码）。在 wcf 服务中，我想登录（使用此密码和用户名）以获取用户的 windowsidentity。（wcf 服务上的安全性是基于 windows 的）

问题是如何以这种方式从 asp.net MVC 应用程序与服务进行通信，并使 asp.net MVC 应用程序尽可能无状态（绝对不允许在会话状态中输入密码）

非常感谢有关如何完成这项工作的想法。

这张图可能会让事情更清楚： ![建筑移动应用网站](../Images/6103a6b370cd263e76b5f13a860446c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:19:55.680

这是一篇逐步解释如何在 WCF 服务中使用用户名/密码进行身份验证的文章：

[http://blog.adnanmasood.com/2010/04/29/step-by-step-guide-for-authenticating-wcf-service-with-username-and-password-over-ssl/](http://blog.adnanmasood.com/2010/04/29/step-by-step-guide-for-authenticating-wcf-service-with-username-and-password-over-ssl/)

它在服务端使用自定义[UserNamePasswordValidator ：](http://msdn.microsoft.com/en-us/library/aa702565.aspx)

```
public class CustomValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        if (userName == "test" && password == "secret")
        {
            return;
        }
        throw new SecurityTokenException("Unknown Username or Password");
    }
} 
```

可以配置为服务行为：

```
<system.serviceModel>
    <services>
        <service behaviorConfiguration="WcfService.Service1Behavior" name="MySamples.WcfService">
            <endpoint address="" binding="wsHttpBinding" contract="MySamples.IWcfService" bindingConfiguration="SafeServiceConf">
                <identity>
                    <dns value="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="WcfService.Service1Behavior">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="true" />
                <serviceCredentials>
                    <userNameAuthentication
                        userNamePasswordValidationMode="Custom"
                        customUserNamePasswordValidatorType="MySamples.CustomValidator, WcfService" 
                    />
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <wsHttpBinding>
            <binding name="SafeServiceConf" maxReceivedMessageSize="65536">
                <readerQuotas maxStringContentLength="65536" maxArrayLength="65536" maxBytesPerRead="65536" />
                <security mode="TransportWithMessageCredential">
                    <message clientCredentialType="UserName" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
</system.serviceModel> 
```

在客户端：

```
using (var client = new WcfServiceClient())
{
    client.ClientCredentials.UserName.UserName = "test";
    client.ClientCredentials.UserName.Password = "secret";
    var result = client.SomeMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:41:33.147

经过大量的实验，我找到了一种方法来做到这一点。我将 ASP.NET MVC 应用程序称为客户端。

通过 loginService ，客户端可以传递用户名和密码。在此服务中，此数据用于检查是否有相应的 windows 帐户。如果是这样，则会创建一个**guid ，并且这个 guid****以及用户名和密码**（均已加密）将**存储在数据库**中。该服务将 guid 返回给客户端，客户端将该**guid 置于会话状态**。

当对 wcf 服务进行另一个调用时，客户端会在名为 'id'的消息头中发送此 guid **。**在 wcf 中，我使用**ServiceAuthorizationManager**来检查传入的消息。如果有一个名为'id'的messageheader，这个id将用于获取数据库中对应的用户名和密码，并用这个用户名和密码获取**windowsidentity**然后**模拟**它。（这一切都发生在它到达服务本身之前)

当用户访问该服务时，他将被模拟为他的 windows 帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:29:13.073

如果我正确理解了您的问题，您需要一种方法来为您的 WCF 服务提供 Windows 身份验证。以下链接可以提供帮助。

[关联](http://www.codeproject.com/Articles/36289/8-steps-to-enable-windows-authentication-on-WCF-Ba)

# iphone - 触摸移动时查找触摸下方的对象

> ID：12067282
> 
> 赞同：0
> 
> 时间：2012-08-22T06:16:26.810
> 
> 标签：iphone, objective-c, ios, ipad

如何确定我悬停或拖动的对象下方的属性或对象？

为了清楚地提出我的问题，让我悬停一个 uiview，我想找出我悬停的视图下方的（对象或视图）是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:11:44.177

一方面，如果您知道两个对象的框架，您可以使用`CGRectIntersectsRect`.

```
 if (CGRectIntersectsRect(topObjectsRect, bottomObjectsRect)) {
        //
    } 
```

此外，您可以获取被触摸的点，然后使用以下内容检查该点是否在某个矩形中。

```
 if (CGRectContainsPoint(CGRectMake(someX, someY, someWidth, someHeight), pointOfTouch))
  {
      //
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:22:30.780

在自定义视图中，您可以覆盖 touchesEnded 方法。此示例代码可能有助于您的自定义视图命中测试问题。

```
 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

            if ([touches count] == 1) {
                UITouch *touch = [touches anyObject];
                CGPoint point = [touch locationInView:custom_view];

                if (CGRectContainsPoint(custom_view.bounds, point)) {
                   //if touch hit to custom_view
                };
            }
            [super touchesEnded:touches withEvent:event];
        } 
```

# php - Mysql按索引排序查询

> ID：12067288
> 
> 赞同：0
> 
> 时间：2012-08-22T06:16:57.443
> 
> 标签：php, mysql, database

我正在运行一个 mysql 查询，我试图通过自动递增索引值对结果进行排序。我正在使用此代码运行我的查询。

```
 $query = mysql_query("SELECT * FROM chanels WHERE videolocation != '' ORDER BY index DESC "); 
```

这在我添加 ORDER BY 函数之前有效，现在当我运行 mysql_num_rows 测试时它返回 0 行。如果您有任何想法，谢谢，我很感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T06:18:18.743

您确定该列被调用`index`吗？这不是列名的理想选择，因为它是[保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)。通常应该调用自动增量列`id`或类似的。

如果您确实*调用*了您的列`index`，那么您需要在 SQL 查询中使用反引号将其引用：

```
SELECT * FROM chanels
WHERE videolocation != ''
ORDER BY `index` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:05:59.110

像这样编辑yoru代码

```
 $query = mysqli_query("SELECT * FROM chanels 
                        WHERE videolocation != '' 
                        ORDER BY 'index' desc"); 
```

可以帮助你吗

# jquery - Jquery简单变量问题

> ID：12067293
> 
> 赞同：0
> 
> 时间：2012-08-22T06:17:23.603
> 
> 标签：jquery

我正在尝试将变量传递给 Jquery 中的回调函数

我有：

```
var test;

$('.img').hover(function(){
   test='this is test';

}, function (){
   //how do I pass the test value to the callback function..??
   console.log(test)

}) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:19:40.963

你不需要传递它，你可以`test`在第二个回调函数中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:26:32.577

```
var test;
$('.img').on('hover', function(){
test ='this is a test';
console.log(test);
}); 
```

# scala - scala：如何以功能方式处理验证

> ID：12067296
> 
> 赞同：7
> 
> 时间：2012-08-22T06:17:41.773
> 
> 标签：scala, error-handling

如果它通过条件列表，我正在开发一种应该持久化对象的方法。

如果任何（或许多）条件失败（或出现任何其他类型的错误），则应返回包含错误的列表，如果一切顺利，则应返回已保存的实体。

我在想这样的事情（当然是伪代码）：

```
request.body.asJson.map { json =>
  json.asOpt[Wine].map { wine =>
    wine.save.map { wine => 
      Ok(toJson(wine.update).toString)
    }.getOrElse  { errors => BadRequest(toJson(errors))}
  }.getOrElse    { BadRequest(toJson(Error("Invalid Wine entity")))}
}.getOrElse      { BadRequest(toJson(Error("Expecting JSON data")))} 
```

也就是说，我想把它当作一个 Option[T]，如果任何验证失败，而不是返回`None`它会给我错误列表......

这个想法是返回一系列 JSON 错误......

所以问题是，这是处理这种情况的正确方法吗？在 Scala 中实现它的方法是什么？

--

糟糕，刚刚发布了问题并发现了

[http://www.scala-lang.org/api/current/scala/Either.html](http://www.scala-lang.org/api/current/scala/Either.html)

无论如何，我想知道您对所选方法的看法，以及是否有其他更好的选择来处理它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T09:04:48.597

使用 scalaz 你有`Validation[E, A]`，它类似于`Either[E, A]`但具有 if`E`是一个半组（意思是可以连接的东西，如列表）的属性，而不是多个验证结果可以以保留所有发生的错误的方式组合。

例如，使用 Scala 2.10-M6 和 Scalaz 7.0.0-M2，其中 Scalaz 有一个自定义`Either[L, R]`命名`\/[L, R]`，默认情况下是右偏的：

```
import scalaz._, Scalaz._

implicit class EitherPimp[E, A](val e: E \/ A) extends AnyVal {
  def vnel: ValidationNEL[E, A] = e.validation.toValidationNEL
}

def parseInt(userInput: String): Throwable \/ Int = ???
def fetchTemperature: Throwable \/ Int = ???
def fetchTweets(count: Int): Throwable \/ List[String] = ???

val res = (fetchTemperature.vnel |@| fetchTweets(5).vnel) { case (temp, tweets) =>
  s"In $temp degrees people tweet ${tweets.size}"
} 
```

这`result`是一个`Validation[NonEmptyList[Throwable], String]`，包含所有发生的错误（温度传感器错误和/或 twitter 错误~~或 none~~）或成功消息。然后，您可以切换回`\/`方便。

注意：Either 和 Validation 的区别主要在于 Validation 可以累积错误，但不能`flatMap`丢失累积的错误，而使用 Either 不能（轻松）累积但可以`flatMap`（或在理解中）并且可能丢失除了第一条错误信息。

### 关于错误层次结构

我想这可能会让你感兴趣。不管使用 scalaz/ `Either`/ `\/`/ `Validation`，我都觉得上手很容易，但接下来需要做一些额外的工作。问题是，如何以有意义的方式从多个错误函数中收集错误？当然，您可以在任何地方使用`Throwable`or`List[String]`并享受轻松的时光，但听起来不太实用或可解释。想象一下得到一个错误列表，如“缺少儿童年龄”::“IO 错误读取文件”::“除以零”。

所以我的选择是创建错误层次结构（使用 ADT-s），就像将 Java 的已检查异常包装到层次结构中一样。例如：

```
object errors {

  object gamestart {
    sealed trait Error
    case class ResourceError(e: errors.resource.Error) extends Error
    case class WordSourceError(e: errors.wordsource.Error) extends Error
  }

  object resource {
    case class Error(e: GdxRuntimeException)
  }

  object wordsource {
    case class Error(e: /*Ugly*/ Any)
  }

} 
```

然后，当使用具有不同错误类型的错误函数的结果时，我将它们加入到相关的父错误类型下。

```
for {
  wordSource <-
    errors.gamestart.WordSourceError <-:
    errors.wordsource.Error <-:
    wordSourceCreator.doCreateWordSource(mtRandom).catchLeft.unsafePerformIO.toEither

  resources <-
    errors.gamestart.ResourceError <-:
    GameViewResources(layout)

} yield ... 
```

这里`f <-: e`映射`f`左边的函数，`e: \/`因为`\/`是一个双函子。因为`se: scala.Either`你可能有`se.left.map(f)`。

这可以通过提供[shapeless](http://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/monoids.scala) `HListIso` s 以绘制漂亮的错误树来进一步改进。

**修订**

更新：`(e: \/).vnel`将故障侧提升为 a `NonEmptyList`，因此如果我们有故障，我们至少有一个错误（是：或没有）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T09:15:07.183

如果您有`Option`值，并且希望将它们转换为成功/失败值，则可以使用or方法将 an`Option`转换为 an 。`Either``toLeft``toRight`

通常 a`Right`代表成功，所以使用`o.toRight("error message")`turn `Some(value)`into`Right(value)`和`None`into `Left("error message")`。

不幸的是，Scala 默认情况下无法识别这种右偏，因此您必须跳过一个圈（通过调用该`.right`方法）才能整齐地组合您`Either`的 s 以供理解。

```
def requestBodyAsJson: Option[String] = Some("""{"foo":"bar"}""")

def jsonToWine(json: String): Option[Wine] = sys.error("TODO")

val wineOrError: Either[String, Wine] = for {
  body <- requestBodyAsJson.toRight("Expecting JSON Data").right
  wine <- jsonToWine(body).toRight("Invalid Wine entity").right
} yield wine 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T08:02:32.533

`Either[A,Option[B]]`如果你需要一个空值，你可以使用 lift代替使用`Box`，它可以有三个值：

*   `Full`（有一个有效的结果）
*   `Empty`（没有结果，但也没有错误）
*   `Failure`（发生错误）

`Box`比`Either`丰富[的 API](https://www.assembla.com/spaces/liftweb/wiki/Box)更灵活。当然，尽管它们是为 Lift 创建的，但您可以在任何其他框架中使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T06:45:47.933

好吧，这是我尝试使用 Either

```
def save() = CORSAction { request =>
  request.body.asJson.map { json =>
    json.asOpt[Wine].map { wine =>
      wine.save.fold(
        errors => JsonBadRequest(errors),
        wine => Ok(toJson(wine).toString)
      )
    }.getOrElse     (JsonBadRequest("Invalid Wine entity"))
  }.getOrElse       (JsonBadRequest("Expecting JSON data"))
} 
```

而 wine.save 如下所示：

```
def save(wine: Wine): Either[List[Error],Wine] = {

  val errors = validate(wine)
  if (errors.length > 0) {
    Left(errors)
  } else {
    DB.withConnection { implicit connection =>
      val newId = SQL("""
        insert into wine (
          name, year, grapes, country, region, description, picture
        ) values (
          {name}, {year}, {grapes}, {country}, {region}, {description}, {picture}
        )"""
      ).on(
        'name -> wine.name, 'year -> wine.year, 'grapes -> wine.grapes,
        'country -> wine.country, 'region -> wine.region, 'description -> wine.description,
        'picture -> wine.picture
      ).executeInsert()

      val newWine = for {
        id <- newId;
        wine <- findById(id)
      } yield wine

      newWine.map { wine =>
        Right(wine)
      }.getOrElse {
        Left(List(ValidationError("Could not create wine")))
      }
    }
  }
} 
```

Validate 检查几个先决条件。我仍然需要添加一个 try/catch 来捕获任何 db 错误

我仍在寻找一种方法来改善整个事情，感觉很冗长，符合我的口味......

# php - mod_rewrite 屏蔽查询以获得更好的 SEO

> ID：12067299
> 
> 赞同：1
> 
> 时间：2012-08-22T06:18:01.630
> 
> 标签：php, apache, mod-rewrite

我试图`SEO`在我的网站上创建更友好的目录，需要帮助`mod_rewrite`。我总是讨厌 reg 表达式。

我想更改网址，例如：`mysite.com/result.php?cat=Beach`

进入

`mysite.com/category/beach`这样 PHP 仍然可以获取 get 而不在标头中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:31:50.247

```
RewriteRule ^category\/(.+)$ result.php?cat=category&$1 
```

# java - 如何在java中下载整个文件夹？

> ID：12067301
> 
> 赞同：1
> 
> 时间：2012-08-22T06:18:12.060
> 
> 标签：java, download

我想从服务器下载整个文件夹/目录。该文件夹包含文件。我尝试使用 zip 功能，但为此我需要提供文件路径而不是文件夹路径。

喜欢 -

```
BufferedInputStream in = new BufferedInputStream(new FileInputStream("d:\\StoreFiles\\Temp\\profile.txt")); 
```

我想要类似 ("d:\StoreFiles") 的东西，它将下载 Storefiles 文件夹中的所有文件夹以及文件夹内的文件。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:29:43.100

我建议查看`Apache Commons IO`FileUtils 来复制目录。它很容易使用。[看看javadoc](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html)

一些可能派上用场的有用方法（*请注意，有几个可用的方法*）：

*   `copyDirectory(File srcDir, File destDir)`
*   `copyDirectory(File srcDir, File destDir, FileFilter filter`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:25:42.420

这个怎么样？它递归地进入目录并下载：

```
 public static void main(String[] args) {
       directoryDownloader(new File("/Users/eugene/Desktop"));
  }

  private static void directoryDownloader(File input){
       if(input.isDirectory()){
           for(File file : input.listFiles()){
               directoryDownloader(file);
           }
       } else {
           downloadFile(input);
       }
}

 private static void downloadFile(File someFile){
     System.out.println("Downloading file : " + someFile.getPath());
 } 
```

PS如何实现你想要的downloadFile。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T06:23:42.473

我认为这个例子对你有用

```
public class CopyDirectoryExample
{
    public static void main(String[] args)
    {   
        File srcFolder = new File("c:\\mkyong");
        File destFolder = new File("c:\\mkyong-new");

        //make sure source exists
        if(!srcFolder.exists()){

           System.out.println("Directory does not exist.");
           //just exit
           System.exit(0);

        }else{

           try{
            copyFolder(srcFolder,destFolder);
           }catch(IOException e){
            e.printStackTrace();
            //error, just exit
                System.exit(0);
           }
        }

        System.out.println("Done");
    }

    public static void copyFolder(File src, File dest)
        throws IOException{

        if(src.isDirectory()){

            //if directory not exists, create it
            if(!dest.exists()){
               dest.mkdir();
               System.out.println("Directory copied from " 
                              + src + "  to " + dest);
            }

            //list all the directory contents
            String files[] = src.list();

            for (String file : files) {
               //construct the src and dest file structure
               File srcFile = new File(src, file);
               File destFile = new File(dest, file);
               //recursive copy
               copyFolder(srcFile,destFile);
            }

        }else{
            //if file, then copy it
            //Use bytes stream to support all file types
            InputStream in = new FileInputStream(src);
                OutputStream out = new FileOutputStream(dest); 

                byte[] buffer = new byte[1024];

                int length;
                //copy the file content in bytes 
                while ((length = in.read(buffer)) > 0){
                   out.write(buffer, 0, length);
                }

                in.close();
                out.close();
                System.out.println("File copied from " + src + " to " + dest);
        }
    }
} 
```

# android - 让 TextView 换行

> ID：12067302
> 
> 赞同：1
> 
> 时间：2012-08-22T06:18:16.787
> 
> 标签：android, textview, word-wrap

我知道这个问题已经被问过很多次了，但我似乎仍然无法让它发挥作用。我尝试了各种组合，但它只是拒绝换行到 2 行。

现在是这样的：

```
 <TextView
        android:id="@+id/doctor_details_clinic_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="3dip"
        android:textSize="12sp"
        android:maxLines="1"
        android:layout_gravity="right"
        android:gravity="right"
        android:scrollHorizontally="false"
        android:singleLine="false"
        android:ellipsize="none"
        /> 
```

我试过让宽度为 0dip 和所有其他建议的东西，但不符合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:34:54.617

首先，您应该将 Max lines 设置为 2 而不是 1。这样的事情会起作用：

```
 <TextView
        android:id="@+id/myText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:maxLines="2"
        android:ellipsize="end"
        android:text="this is the most interesting use of text view I have seen so far,this is the most interesting use of text view I have ever seen so far,this is the most interesting use of text view I have ever seen so far this is the most interesting use of text view I have ever seen so far"/> 
```

# git - 如何在redhat上安装gitweb

> ID：12067311
> 
> 赞同：2
> 
> 时间：2012-08-22T06:19:15.280
> 
> 标签：git, gitweb

如何在 Redhat 上安装 Gitweb？

> Red Hat 版本是 2.6.18-308.11.1.el5 ， x86_64 机器。
> Git版本是1.7.10-rc4

我下载了 gitweb-1.7.9.6-1.el5.rf.x86_64.rpm 文件并运行如下命令。

> rpm -i /home/user/gitweb-1.7.9.6-1.el5.rf.x86_64.rpm
> 警告：/home/user/gitweb-1.7.9.6-1.el5.rf.x86_64.rpm: Header V3 DSA 签名：NOKEY，密钥 ID 6b8d ....
> 错误：依赖项失败：
> gitweb-1.7.9.6-1.el5.rf.x86_64 需要 git = 1.7.9.6-1.el5.rf

是否有一些好的文档或步骤可以让我设置 Gitweb？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:49:29.320

尝试这个：

```
sudo yum install gitweb 
```

`yum`将在存储库中查找包并处理依赖项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T19:23:25.620

尝试这个：

首先安装“Webtatic”回购。根据我的经验，这是最新的。去做这个：

`rpm -Uvh http://repo.webtatic.com/yum/centos/5/latest.rpm`

（假设您有 RHEL 5）在您的问题中**注意**您所说的 RedHat 版本是 Linux Kernel 版本。获取 RedHat 版本`cat /etc/redhat-release`

`yum install git-core gitweb`

如果您遇到任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-04T10:11:31.240

安装非常简单。只需一个命令即可完成所有工作。

gitweb 在 EPEL 存储库[http://fedoraproject.org/wiki/EPEL](http://fedoraproject.org/wiki/EPEL)中可用。

要将 Epel 存储库添加到您的系统，请打开终端并以 root 身份运行：

对于 RedHat/centos 6

`rpm -ivh http://mirror.datacenter.by/pub/fedoraproject.org/epel/6/i386/epel-release-6-8.noarch.rpm`

对于 RedHat/centos 5

`rpm -ivh http://www.mirrorservice.org/sites/dl.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm`

添加 Epel 存储库后，使用命令安装 gitweb

`yum install gitweb gitweb-caching.noarch`

或者

尝试在[http://rpm.pbone.net/](http://rpm.pbone.net/)上进行高级搜索，以查找可以从中获取 gitweb 包的位置。

# c# - 卸载c#应用程序时如何恢复保存的数据

> ID：12067313
> 
> 赞同：0
> 
> 时间：2012-08-22T06:19:23.917
> 
> 标签：c#, sql, windows, visual-studio-2010

例如我开发了 c# 应用程序（带有 sql 数据库）并安装在 win OS 上，然后用于保存一些数据。现在我需要安装新窗口，我保存的数据发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:38:47.900

通常，您所指的数据可能是在安装过程中创建的，也可能是在使用程序本身时创建的（如 OLTP 应用程序）。如果假设您已遵循所有最佳实践并使用创建的安装包创建了应用程序，那么卸载程序应该为您提供存储您的首选项（如模板和布局等）的选项（如果您的程序支持这些东西）。但至于数据，甚至在您的情况下，存储在 SQL 中的数据不会被删除，除非您在卸载时特别提到要删除表或数据库。因此，当您提到新窗口时，只需确保数据库存在并且所有数据都处于联系状态（很可能会如此）。然后还要确保新窗口指向具有所有必要的约束和身份验证的数据。

# validation - grails中用户定义的表单验证

> ID：12067318
> 
> 赞同：0
> 
> 时间：2012-08-22T06:19:48.030
> 
> 标签：validation, grails

我想验证三个表单域。
通常的方法是这样的：

```
class User {

  String name
  String password
  String personalInfo

  static constraints = {
    name(size: 4..20, unique:true, blank:false)
    password(size:8..20, blank:false)
    personalInfo(size: 1000, nullable:true)
  }
} 
```

但在我的 gsp 中，我将使用同名的所有三个文本字段，例如：

```
<td>Name:</td><td><g:textfield name="property"/></td>
<td>Password:</td><td><g:textfield name="property"/></td>
<td>PersonalInfo:</td><td><g:textfield name="property"/></td> 
```

如何验证此表格？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:42:02.870

为表单中的输入字段赋予相同的名称是一种非常糟糕的做法，这些字段将映射到同一域类中的不同属性。
但如果你不能，这些字段将作为列表发送到你的控制器。因此，您可以像这样在控制器中提取值：

`def parameterList = params.property as List`
`def name = parameterList[0]`
`def password = parameterList[1]`
`def personalInfo = parameterList[2]`

然后你可以创建你的用户对象
`def user = new User(name:name, personalInfo:personalInfo, password:password)`
`if (user.save()){ } else{ }`

作为最佳实践，您必须以不同的方式命名表单中的字段

# android - Android 警报在 Release 中不起作用

> ID：12067319
> 
> 赞同：1
> 
> 时间：2012-08-22T06:19:50.887
> 
> 标签：android, android-intent, broadcastreceiver, alarmmanager, android-alarms

我是 android 新手，这是我的第一个应用程序。

我创建了我的应用程序，一切正常，警报触发。创建签名版本并安装后，我的警报不起作用:(。

这是我的闹钟，用于注册接收器：

```
public void enable(){
    if(enabled == true) return;
    IntentFilter filter = new IntentFilter();
    filter.addAction(INTENT);
    mContext.registerReceiver(this, filter);
    enabled = true;
} 
```

然后设置闹钟：

```
private void setAlarm(Long interval){
    Intent startIntent = new Intent(INTENT);
    mPendingIntent = PendingIntent.getBroadcast(context, 0, startIntent, 0);
    AlarmManager alarm = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
    alarm.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime() + 60000, 60000, mPendingIntent);
} 
```

最初我调用 enable，然后调用 setAlarm。

在非发行版中一切正常。我没有将接收器放在我的清单中，因为我是手动注册的。正在调用设置警报方法，我肯定知道这一点，因为我举杯进行测试。但是，它从不接收任何广播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:16:50.547

好的，我发现了问题。

由于这是动态壁纸，因此引擎会被调用两次，一次用于预览，一次用于设置实际壁纸。

事件的顺序决定了警报是否会起作用。事实证明，如果在创建论文后预览被破坏，那么我所有的警报都会被关闭，因为意图匹配？

```
AlarmManager alarm = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
alarm.cancel(mPendingIntent); 
```

所以我所做的不是在预览时注册警报 - 为什么你仍然需要它们。尽管我的新问题是如果我无法禁用预览，那么解决此问题的最佳方法是什么。每篇论文的独特意图？

有趣的是，这只是在发布时才被发现的原因是因为它在测试过程中很少见，我会通过手动设置 wallaper 过程，所以直到现在才被选中。

# html - 将浏览按钮设置为看起来像一个链接

> ID：12067324
> 
> 赞同：0
> 
> 时间：2012-08-22T06:20:15.280
> 
> 标签：html, css

> **可能重复：**
> [在 HTML 中制作一个 <button> 链接](https://stackoverflow.com/questions/3341011/making-a-button-thats-a-link-in-html)
> [如何将 CSS 应用于浏览按钮](https://stackoverflow.com/questions/4365431/how-apply-css-to-browse-button)

如何将浏览按钮设置为看起来像一个链接？

我的意思是

```
<input type=file /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:52:50.143

试试这个方法：

1.  在输入文件的顶部覆盖一个 div。
2.  将输入文件的不透明度更改为 0。

    ```
    div.text {
        position: absolute;
        top: 0;
        left: 0;
        text-decoration: underline;
        color: blue;
    }
    div.wrapper {
        position: relative;
    }
    input { opacity: 0; }
    ​

    <div class="wrapper">
         <div class="text">I'm not a link you fool</div>
        <input type="file"/>
    </div>
    ​ 
    ```

演示：http: [//jsfiddle.net/codef0rmer/BZeMG/](http://jsfiddle.net/codef0rmer/BZeMG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:03:43.543

本教程应该对你有所帮助，

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:22:37.760

如果您谈论的是 a 的浏览按钮，`<input type=file />`则不能这样做。你必须去一个 jquery/ajax 文件上传插件，用自定义的东西替换原来的按钮。看看这里的列表：

[http://creativefan.com/10-ajax-jquery-file-uploaders/](http://creativefan.com/10-ajax-jquery-file-uploaders/)

看看你是否找到你喜欢的东西。

# php - 我可以在这样的表单元素中使用 php 吗？

> ID：12067325
> 
> 赞同：-2
> 
> 时间：2012-08-22T06:20:27.503
> 
> 标签：php, html, css, codeigniter, codeigniter-datamapper

我正在做一个活动项目，管理员可以使用管理面板保留一些席位。当他想编辑它时，以前选择的座位应该突出显示。这就是我为实现这一目标所做的

```
if ($mode == 'EDIT')
        {
            $k=1;
            for($i=1;$i<=10;$i++)
            {
            for($j=1;$j<=10;$j++)
            { ?>
                <div id='<?php echo $k ;?>' class="seat_selection"
                <?php foreach($seat_data as $seats)
                {
                if($seats->iSeatNumber == $k)
                {?>
                    style='min-height:25px;min-width:25px;background-color:#12B22F;float:left;margin:0 0 5px 10px;cursor:pointer;'
                <?php
                }
                else
                {?>
                    style='min-height:25px;min-width:25px;background-color:#969696;float:left;margin:0 0 5px 10px;cursor:pointer;'
                <?php
                }
                }
                ?>
                >
                <?php echo $k;?>
                </div>
            <?php $k++;
            } ?>
            <br /><br />
            <?php
            }
        } 
```

但只有所选座位中的第一个座位被突出显示（如屏幕截图中的**第 5 个座位**​​）。休息保持不变。

**截屏** ![座位选择](../Images/060834865b1a1721a1eddc8cfd672d74.png)

我认为问题在于`foreach`. 我做错了吗？或者还有其他方法吗？任何帮助将不胜感激。

我正在将`datamapper`（db 操作）用于`codeigniter`（php 框架）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:32:22.770

如果我理解你的任务，我认为这是实现它的一种非常糟糕的方式。

尝试首先使用所有突出显示的座位制作一个数组：

```
$highlighted = array();
foreach($seat_data as $seat) {
    $highlighted[] = $seat->iSeatNumber;
}

$k = 1;
for($i=1;$i<=10;$i++)
{
    for($j=1;$j<=10;$j++)
    {
        if(in_array($k, $highlighted))
        {
             echo '<div id="'.$k.'" class="seat_selection" style="min-height:25px;min-width:25px;background-color:#12B22F;float:left;margin:0 0 5px 10px;cursor:pointer;">'.$k.'</div>';
        } else {
             echo '<div id="'.$k.'" class="seat_selection" style="min-height:25px;min-width:25px;background-color:#969696;float:left;margin:0 0 5px 10px;cursor:pointer;">'.$k.'</div>';
        }
        $k++;
    }
    echo "<br/><br/>";
} 
```

干净多了。虽然我没有对此进行测试，但它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:49:07.473

这是一个类似于 Vlakarados 的示例，但仅使用一个循环。这个想法是你构建一个突出显示的座位 ID 的数组，然后`$i`在循环时检查是否在这个数组中，如果是，则添加突出显示的类。

您可以为突出显示/不突出显示创建一个类，而不是使用所有内联 CSS，如下例所示。

```
$highlightedSeats = array(2, 6, 12, 21, 44);
for($i=1; $i<=100; $i++) { 
    $class = (in_array($i, $highlightedSeats)) ? 'highlighted' : 'not-highlighted';
    echo '<div id="' . $i . '" class="seat_selection ' . $class . '">' . $i . '</div>';
    if($i % 10 == 0) {
        echo '<br /><br />';
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:50:30.767

尝试更改为：

```
if ($mode == 'EDIT'){
$k=1;
for($i=1;$i<=10;$i++){
for($j=1;$j<=10;$j++){ ?>
<?php foreach($seat_data as $seats){
if($seats->iSeatNumber == $k){
$style="min-height:25px;min-width:25px;background-color:#12B22F;float:left;margin:0 0 5px 10px;cursor:pointer;";
}
else{
$style='min-height:25px;min-width:25px;background-color:#969696;float:left;margin:0 0 5px 10px;cursor:pointer;';
} 
}
?>
<div id='<?php echo $k ;?>' class="seat_selection" style="<?php echo $style; ?>">
<?php echo $k;?>
</div>
<?php $k++;
} ?>
<br /><br />
<?php
}
} 
```

# c# - NLog 在跟踪中挂起（多线程问题？）

> ID：12067330
> 
> 赞同：7
> 
> 时间：2012-08-22T06:20:45.757
> 
> 标签：c#, .net, multithreading, logging, nlog

症状是应用程序挂起（托管在 IIS 7 中） 附加调试时发现有大约 100 个线程具有这样的堆栈：

```
NLog.dll!NLog.Targets.Target.WriteAsyncLogEvent(NLog.Common.AsyncLogEventInfo logEvent) + 0x54 bytes     
NLog.dll!NLog.LoggerImpl.WriteToTargetWithFilterChain(NLog.Internal.TargetWithFilterChain targetListHead, NLog.LogEventInfo logEvent, NLog.Common.AsyncContinuation onException) + 0x8b bytes    
NLog.dll!NLog.LoggerImpl.Write(System.Type loggerType, NLog.Internal.TargetWithFilterChain targets, NLog.LogEventInfo logEvent, NLog.LogFactory factory) + 0xee bytes    
NLog.dll!NLog.Logger.WriteToTargets(NLog.LogLevel level, string message, object[] args) + 0x14 bytes     
NLog.dll!NLog.Logger.Trace<System.__Canon,long>(string message, System.__Canon argument1, long argument2) + 0x90 bytes
... <my app code> ... 
```

一个与

```
mscorlib.dll!System.Collections.Generic.Dictionary<NLog.Layouts.Layout,string>.FindEntry(NLog.Layouts.Layout key) + 0xd0 bytes   
mscorlib.dll!System.Collections.Generic.Dictionary<System.__Canon,System.__Canon>.TryGetValue(System.__Canon key, out System.__Canon value) + 0x14 bytes     
NLog.dll!NLog.Layouts.SimpleLayout.GetFormattedMessage(NLog.LogEventInfo logEvent) + 0x81 bytes  
NLog.dll!NLog.Targets.FileTarget.GetBytesToWrite(NLog.LogEventInfo logEvent) + 0x1c bytes    
NLog.dll!NLog.Targets.FileTarget.Write(NLog.Common.AsyncLogEventInfo[] logEvents) + 0x308 bytes  
NLog.dll!NLog.Targets.Target.WriteAsyncLogEvents(NLog.Common.AsyncLogEventInfo[] logEvents) + 0x258 bytes    
NLog.dll!NLog.Targets.Wrappers.AsyncTargetWrapper.ProcessPendingEvents(object state) + 0x1e6 bytes   
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool ignoreSyncCtx) + 0xdc bytes     
mscorlib.dll!System.Threading._TimerCallback.PerformTimerCallback(object state) + 0x97 bytes     
... <my app code> ... 
```

和一个

```
mscorlib.dll!System.Collections.Generic.Dictionary<NLog.Layouts.Layout,string>.Insert(NLog.Layouts.Layout key, string value, bool add) + 0x1e0 bytes     
NLog.dll!NLog.LogEventInfo.AddCachedLayoutValue(NLog.Layouts.Layout layout, string value) + 0x6c bytes   
NLog.dll!NLog.Layouts.Log4JXmlEventLayout.GetFormattedMessage(NLog.LogEventInfo logEvent) + 0xf5 bytes   
NLog.dll!NLog.Targets.Target.PrecalculateVolatileLayouts(NLog.LogEventInfo logEvent) + 0xb8 bytes    
NLog.dll!NLog.Targets.Wrappers.AsyncTargetWrapper.Write(NLog.Common.AsyncLogEventInfo logEvent) + 0x23 bytes     
NLog.dll!NLog.Targets.Target.WriteAsyncLogEvent(NLog.Common.AsyncLogEventInfo logEvent) + 0x151 bytes    
NLog.dll!NLog.LoggerImpl.WriteToTargetWithFilterChain(NLog.Internal.TargetWithFilterChain targetListHead, NLog.LogEventInfo logEvent, NLog.Common.AsyncContinuation onException) + 0x8b bytes    
NLog.dll!NLog.LoggerImpl.Write(System.Type loggerType, NLog.Internal.TargetWithFilterChain targets, NLog.LogEventInfo logEvent, NLog.LogFactory factory) + 0xee bytes    
NLog.dll!NLog.Logger.WriteToTargets(NLog.LogLevel level, string message, object[] args) + 0x14 bytes     
NLog.dll!NLog.Logger.Debug<Werp.Controller.Common.Interfaces.EntityEventAction,System.__Canon>(string message, Werp.Controller.Common.Interfaces.EntityEventAction argument1, System.__Canon argument2) + 0x8d bytes     
... <my app code> ... 
```

这种情况有时会发生，可能是一周一次，我没有精确的场景来重现它。

我怎样才能解决这个问题？是 NLog 中的错误，还是我的一些误用或错误配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:36:28.790

`Dictionary<T>`不是线程安全的，因此在多个线程中访问它可能会导致此类问题，

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

[http://blogs.msdn.com/b/asiatech/archive/2009/05/11/100-cpu-caused-by-system-collections-generic-dictionary.aspx](http://blogs.msdn.com/b/asiatech/archive/2009/05/11/100-cpu-caused-by-system-collections-generic-dictionary.aspx)

很难说您是否可以将 NLog 配置为在多线程中工作。您是否尝试使用它的 AsyncWrapper？

[http://nlog-project.org/wiki/AsyncWrapper_target](http://nlog-project.org/wiki/AsyncWrapper_target)

根据 NLog 论坛，使用异步方式应该可以解决问题，

[http://nlog-forum.1685105.n2.nabble.com/Multi-Threading-in-NLog-td3728834.html](http://nlog-forum.1685105.n2.nabble.com/Multi-Threading-in-NLog-td3728834.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T18:11:32.247

我最近遇到了同样的问题 - 很多线程阻塞在`WriteAsyncLogEvent`. 虽然我没有任何`Dictionary`线程。我有一个线程卡在 中`AsyncRequestQueue.Enqueue`，您可能在线程列表中错过了它。

就我而言，问题是`overflowAction`on`AsyncWrapper`设置为... `Block`！将其设置`Discard`为处理重载记录器的更明智的方法。

有时日志消息的累积并不是 NLog 本身的错误。有时该进程因其他原因（磁盘阻塞、大量交换、防病毒混乱、完整 GC）而卡住。然后，线程列表包含许多停留在 NLog 上的线程，这仅仅是因为 NLog 恰好依赖于相同的重载资源。

# android - ANDROID 拆分变量字符串

> ID：12067332
> 
> 赞同：0
> 
> 时间：2012-08-22T06:20:56.877
> 
> 标签：android, json, split, gdata

我已经解析了一个 YouTube GDATA JSON-C 文件，因此它是 JSON，每个视频的持续时间在两者之间没有：（它被解析为 23 或 432 而不是 0:23 或 4:32）怎么会我在不知道长度的情况下在最后 2 个字符之前拆分一个字符串，因为它可以是 2 到 6 个字符串之间的任何位置

```
public class Uploads  extends Activity {

static final String KEY_VIDEOITEM = "item"; 
static final String KEY_VIDEOID = "id";
static final String KEY_VIDEOTITLE = "title";
static final String KEY_VIDEODESCRIPTION = "description";
static final String KEY_VIDEOCOUNT = "viewCount";
static final String KEY_VIDEODURATION = "duration";
static final String KEY_VIDEODURATIONFORMATTED = "duration";
static final String KEY_VIDEOTHUMB_URL = "thumb_url";
static final String KEY_VIDEOURL = "videourl";
static String Duration = "duration";

ListView list;
org.scouts.android.videos.LazyAdapter adapter;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video_lsitview);
    TextView lblTitle = (TextView) findViewById(R.id.actionbar);
    lblTitle.setText("Uploads");

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    //Get the data (see above)
    //JSONObject json = getJSON.getJSONfromURL("http://gdata.youtube.com/feeds/api/users/worldscouting/playlists?alt=jsonc");

    HttpClient client = new DefaultHttpClient();
    // Perform a GET request to YouTube for a JSON list of all the videos by a specific user
    HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/users/worldscouting/uploads?v=2&alt=jsonc");
    // Get the response that YouTube sends back
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // Convert this response into a readable string
    String jsonString = null;
    try {
        jsonString = StreamUtils.convertToString(response.getEntity().getContent());
    } catch (IllegalStateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // Create a JSON object that we can use from the String
    JSONObject json = null;
    try {
        json = new JSONObject(jsonString);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

           try{

               //JSONArray  earthquakes = json.getJSONObject("data").getJSONArray("items");
               JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");
                //Loop the Array
        for(int i=0;i < jsonArray.length();i++){                        

            HashMap<String, String> map = new HashMap<String, String>();
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            //JSONObject uploads = earthquakes.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("videoid", jsonObject.getString("id"));

            map.put(KEY_VIDEOTITLE, jsonObject.getString(KEY_VIDEOTITLE));
            map.put(KEY_VIDEODESCRIPTION, jsonObject.getString(KEY_VIDEODESCRIPTION));
            map.put(KEY_VIDEOCOUNT, "Views: "+jsonObject.getString(KEY_VIDEOCOUNT));
            map.put(KEY_VIDEODURATION, jsonObject.getString(KEY_VIDEODURATION));
            map.put(KEY_VIDEOURL, jsonObject.getJSONObject("player").getString("mobile"));
            map.put(KEY_VIDEOTHUMB_URL, jsonObject.getJSONObject("thumbnail").getString("sqDefault"));

            mylist.add(map);

        }
           }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
           }

           list=(ListView)findViewById(R.id.videolist);         
           adapter=new org.scouts.android.videos.LazyAdapter(this, mylist);        
           list.setAdapter(adapter);

           list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String videourl = ((TextView) view.findViewById(R.id.video_id)).getText().toString();

                Uri uri = Uri.parse(videourl);
                startActivity( new Intent( Intent.ACTION_VIEW, uri ) );

    ;}});}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:25:36.783

公共类字符串 { 公共静态 void main(String[] args) {

```
String str= "45";
String op=addToString(str, ":");
System.out.println(op);
}
static String addToString(String str,  String ins) {
    if(str.length()<=2)
    {
        str="00"+str;
    }
    int i = str.length()-(str.length()-2);
    return str.substring(0, i) + ins + str.substring(i);
} 
```

}

# android - 如何将android默认应用程序添加到自定义应用程序

> ID：12067335
> 
> 赞同：0
> 
> 时间：2012-08-22T06:21:06.470
> 
> 标签：android

我使用 Android 3.1 为 Android 平板电脑开发了一个应用程序。现在我想将平板电脑随附的默认应用程序（例如：计算器）添加到我的应用程序和它自己的图标中。这可能吗？

谢谢

# c++ - C++中指向对象的指针

> ID：12067336
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:21:13.603
> 
> 标签：c++, class, object, pointers, new-operator

我在`Stackoverflow.com`. 我正在寻找相同的代码，因为我有疑问。如果我们将看到下面的代码
`CRectangle r1, *r2;` `r2= new CRectangle;`
1\. 我们为什么要这样做`new CRectangle`？我们实际上想要做什么？

1.  一位同事告诉我，当我们编写我们制作的代码时
    `CRectangle *r2 = 0;`，

然后我们`initialize`用一些其他的值或地址。我真的很困惑。请帮我。

```
using namespace std; 
class CRectangle
{
    int width, height;  
public:    
    void set_values (int, int);  
    int area (void) {return (width * height);
    } 
}; 
void CRectangle::set_values (int a, int b) 
{    
    width = a;   
    height = b;
} 
int main () 
{   
    CRectangle r1, *r2;    
    r2= new CRectangle;    
    r1.set_values (1,2);  
    r2->set_values (3,4);   
    cout << "r1.area(): " << r1.area() << endl;    
    cout << "r2->area(): " << r2->area() << endl;  
    cout << "(*r2).area(): " << (*r2).area() << endl;  
    delete r2;    
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:28:15.237

> C矩形 r1, *r2; r2=新的CRectangle；

`r1`是对象。`r2`是指向对象的指针。

```
CRectangle *r2 = 0; 
```

指针包含对象的地址。如果指针没有初始化，它可以有任何值（我们不知道）。因此，我们进行初始化`0`，以便我们知道我们的指针具有 value `0`。我们可以使用该值来避免双重初始化或一些内存错误。

当我们即将将对象赋值给指针时，我们通常做的是_

```
if (r2 == 0)
    r2 = new CRectangle;
else
    std::cout << "Pointer is not empty or invalid" << std::endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:28:40.013

在您的示例中，`r1`具有类类型`CRectangle`，但`r2`具有指向 CRectangle 类的指针类型。指针只是全局内存（[堆](http://en.wikipedia.org/wiki/Memory_management)）中的地址。为了将内存分配和标记为`CRectangle`对象，我们需要使用`new`.

请阅读[书籍中的详细信息](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T06:28:53.867

```
CRectangle r1, *r2;    
r2= new CRectangle; 
```

这段代码声明了一个`CRectangle`对象 ( `r1`) 和一个指向`CRectangle`对象的指针，该对象还没有指向任何东西 ( `r2`)。这两个变量都分配在堆栈上。

第二行为新`CRectangle`对象（从堆中）分配内存，调用该类的任何构造函数，然后返回地址并将其分配给`r2`. 所以`r2`then 指向一个`CRectangle`对象。

Setting `r2` to 0 or `NULL` is simply a standard way to indicate that the pointer doesn't actually point to anything.

# asp.net-mvc-3 - 将 MVC 3 应用程序连接到 sql server 2008

> ID：12067343
> 
> 赞同：0
> 
> 时间：2012-08-22T06:22:12.413
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4, connection-string

我是新手，很困惑如何去做。

我在 Visual Studio 2010 中构建了 MVC 3 应用程序并发布到本地主机，它工作正常。

在这里，我真正想要的是使用安装在我计算机中的 Sql Server 2008，而不是使用 Visual Studio 创建的文件夹 APP_DATA 下的数据库。

我是 MVC 的新手，不了解数据库连接的详细信息。以下是 web.config 文件的连接字符串：

```
 <connectionStrings>
   <add name="IVRControlPanelEntities" connectionString="metadata=res://*/Models.IVRControlPanelModel.csdl|res://*/Models.IVRControlPanelModel.ssdl|res://*/Models.IVRControlPanelModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\IVRControlPanelDB.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

这是 Visual Studio 在添加数据实体模型时自动添加的连接字符串。

发布到 localhost 后，mvc 3 使用的数据库位于 wwwroot 文件夹的 APP_DATA 文件夹下。

我需要更改以连接到安装在我的计算机中的 Sql Server 2008，而不是在 Visual Studio 上创建的数据库。

还有一件事，我无法将 Visual Studio 创建的数据库导入 IVRControlPanelDB 形式的 sql server 2008。**密度板**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:32:16.360

您应该在 Global.asax 的 Application_Start 方法中使用 Database.SetInitializer<> 方法

阅读[这个](https://stackoverflow.com/a/6368696/1135871)和[这个](https://stackoverflow.com/a/3673736/1135871)，[这篇文章](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/using-web-api-with-entity-framework,-part-3)也可能有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:47:28.547

您需要修改您的连接字符串以将地址添加到您的 sql 服务器。例子：

```
 <connectionStrings>
    <add name="ApplicationServices"
         connectionString="Server=localhost;Database=myDatabase;User Id=myUser;Password=myPassword;"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

# android - 活动可以改变它的外观吗

> ID：12067346
> 
> 赞同：1
> 
> 时间：2012-08-22T06:22:27.077
> 
> 标签：android

我有一个活动和一个布局，其中附加了九个 ImageButtons 和活动（认为所有这些都是子应用程序），我还有一些附加的 ImageButtons 和活动附加到这些按钮（更多子应用程序），用户应该能够选择主布局只有九个活动（子应用程序），这是可能的。

如果我们想要该活动，请选择子应用程序，否则从主屏幕中删除任何活动（子应用程序）。

例如

就像我们在 Windows 桌面上所做的一样，无论我们想要保留什么快捷方式，我们都将其保留为图标，如果我们不需要我们替换它或删除图标，同样可以在 android 中重现。

任何帮助或指示都会有所帮助。

谢谢。

# javascript - 这是否可以在 JQuery 中获取 div 元素位置

> ID：12067348
> 
> 赞同：0
> 
> 时间：2012-08-22T06:22:32.447
> 
> 标签：javascript, jquery, html

这可以在 JQuery 中获取 div 元素位置吗？

homebox 是隐藏的，并且具有 0px 的权限，我想将 homebox 设置为容器的动画。

所以我尝试了这段代码

```
 $("#homebox").animate({ left:$("container").position().left}, 500); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:27:02.927

我想这是[`.offset()`](http://api.jquery.com/offset/)你要找的。

```
$("#homebox").animate({ left: $("#container").offset().left }, 500); 
```

以上应该有*希望*工作。

另外，不应该`container`有身份证吗？`#`您的选择器中缺少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:35:58.467

您可以使用[偏移](http://api.jquery.com/offset/)或[位置](http://api.jquery.com/position/)

> Offset - 获取匹配元素集中第一个元素相对于文档的当前坐标。
> 
> Position - 获取匹配元素集中第一个元素相对于偏移父元素的当前坐标。

# javascript - jQuery Slider SetInterval 重复设置间隔

> ID：12067352
> 
> 赞同：0
> 
> 时间：2012-08-22T06:22:44.913
> 
> 标签：javascript, jquery, jquery-ui, slider, intervals

我正在使用 Jquery UI Slider 来更新显示的 div 的刷新率。这是一个无限循环（用于照片）。看起来 div 在更改时并没有跟随滑块值。

```
var setSpeed = 1000;
var interval;

function makeTimeout() {
    $('#currentCount').html(i+1); // do actions, etc
    interval = setTimeout(function() {
    makeTimeout();
  }, setSpeed);
}

// start loop
  makeTimeout();

// slider update
$("#slider").slider({                   
  value: 0,
  min: -1000,
  max: 1000,
  step: 100,
  change: function(event, ui) {
    clearTimeout(interval);
    var setSpeed = ui.value;
    makeTimeout();
  }
}); 
```

当我移动滑块时会发生什么 div#currentCount 反复刷新非常快 - 但与滑块的值无关。

如何更新 Javascript 以便（无限循环）间隔可以快或慢 - 取决于每个重复的滑块幻灯片？

谢谢

# php - 另一个....html 表没有填充 mysql/PHP

> ID：12067355
> 
> 赞同：0
> 
> 时间：2012-08-22T06:23:20.957
> 
> 标签：php, mysql, html-table

我通过该站点进行了广泛的查看，并得出结论，我遇到了很多人都会遇到的问题，但我所看到的答案似乎都不起作用！

基本上，我试图从存储在 mySQL 表中的数据中填充一个 HTML 表。数据位于名为“类别”的表中。当我加载页面时，表格标题出现但没有表格数据。

我已经编写和重写了我的代码不少于 4 次 - 它作为“ul”或仅呈现为纯文本时可以正常工作，但是一旦我将其放入“表”中似乎就停止工作了！

这是我的代码：

```
<?php
include("includes/dbconnect.php"); //This works fine as tested on the page

$sql = "SELECT * FROM products";
$myData = mysql_query($sql) or die (mysql_error());
$product = mysql_fetch_array($myData);

?>

<html>
<head>
<title></title>
</head>
<body>
    //This plain text works
<?php do {
echo $product['title']." <br />"; 
} while ($product = mysql_fetch_array($myData));
//-----------------------------------------
    //Table - doesnt work
echo "<table border=1>
<tr>
    <th>Title</th>
    <th>Category</th>
    <th>Sport</th>
    <th>Team</th>
    <th>Price</th>
    <th>Shipping</th>
</tr>";
while ($product = mysql_fetch_array($myData)) {
    echo "<tr>";
    echo "<td>".$product['title']."</td>";
    echo "<td>" . $product['category'] . "</td>";
    echo "<td>" . $product['sport'] . "</td>";
    echo "<td>" . $product['team'] . "</td>";
    echo "<td>" . $product['price'] . "</td>";
    echo "<td>" . $product['shipping'] . "</td>";
    echo "</tr>";
}
echo "</table>";
?>

</body>
</html> 
```

我真的束手无策，我已经通过无数的 YouTube 教程工作，但由于某种原因，代码仍然无法工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:26:56.623

您已经`mysql_fetch_array`在代码顶部运行了一个 do while 循环。您不能多次提取结果行。相反，将所有返回的行推送到一个数组中：

```
$products = array();
while ($product = mysql_fetch_array($myData)) {
    $products[] = $product;
} 
```

然后，您可以根据需要循环`$products`多次来构建您的页面。所以对于你的桌子，这看起来像：

```
echo "<table border=1>
<tr>
    <th>Title</th>
    <th>Category</th>
    <th>Sport</th>
    <th>Team</th>
    <th>Price</th>
    <th>Shipping</th>
</tr>";
foreach($products as $item) {

    echo "<tr>";
    echo "<td>" . $item['title'] . "</td>";
    echo "<td>" . $item['category'] . "</td>";
    echo "<td>" . $item['sport'] . "</td>";
    echo "<td>" . $item['team'] . "</td>";
    echo "<td>" . $item['price'] . "</td>";
    echo "<td>" . $item['shipping'] . "</td>";
    echo "</tr>";    

}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:27:24.847

如果该代码真的看起来像这样，请删除 do-while 循环以及您迭代的所有内容，`$mydata`它会起作用，因为您浪费了内部 mysql-counter

意思是在第二个循环中你`$result`已经在最后，或者你再次查询或者你将所有结果推送到一个数组中以供多次使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:32:53.923

你已经用这个提取了一次数据......`$product = mysql_fetch_array($myData);` 所以只需将此数组与 foreach 循环一起使用......

```
foreach($product as $sProduct){
// User $sProduct to access that single product.
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T06:49:38.143

您的代码包含许多错误和实现

如果它适合你，试试这个：

```
<?php
include("includes/dbconnect.php"); 
$sql = "SELECT * FROM products";
$myData = mysql_query($sql) or die (mysql_error());
?>
<html>
<head>
<title></title>
</head>
<body>
    //This plain text works
<?php 

if(mysql_num_rows ($myData) > 0)
{
    $html = "<table border=1><tr> 
                    <th>Title</th>
                    <th>Category</th>
                    <th>Sport</th>
                    <th>Team</th>
                    <th>Price</th>
                    <th>Shipping</th></tr>";

    while ($product = mysql_fetch_array($myData)) 
    {   
        $html .= "<tr>";
        $html .= "<td>".$product['title']."</td>";
        $html .= "<td>".$product['category']."</td>";
        $html .= "<td>".$product['sport']."</td>";
        $html .= "<td>".$product['team']."</td>";
        $html .= "<td>" . $product['shipping'] . "</td>";
        $html .=  "</tr>";
    }
    $html .=  "</table>";
    echo $html;
}
else
{
    echo "No Product Found";
}   
?>
</body>
</html> 
```

如果这对你有用，你可以找出问题，或者我会解释:)

# php - 在php中以不同的方式加入两个mysql表

> ID：12067363
> 
> 赞同：0
> 
> 时间：2012-08-22T06:23:52.770
> 
> 标签：php, mysql

我有以下 mysql 表。

```
1\. members
----------
|id |name|
----------
|001|aaa |
|002|bbb |
|003|ccc |
|004|ddd |
----------

2\. membershipfees
----------------
|id |date      |
----------------
|001|2012-01-01|
|002|2012-01-01|
---------------- 
```

我想显示当月未支付费用的成员列表。我的php代码是，

```
SELECT Members.id, Members.Name FROM Members
    LEFT JOIN MembershipFees
    ON Members.id = MembersipFees.id
    WHERE DATE_FORMAT(MembershipFees.Date, '%Y%m') <> DATE_FORMAT(NOW(), '%Y%m')
    ORDER BY Members.id ASC 
```

但它显示 0 行。请有任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:29:25.313

你需要把`MembersipFees.id IS NULL`条件是 where 子句。此外，如果`date`字段是 varchar 列，那么您应该使用`STR_TO_DATE`函数。

```
SELECT Members.id, Members.Name
FROM Members
     LEFT JOIN membershipfees
        ON Members.id = membershipfees.id
           AND DATE_FORMAT(STR_TO_DATE(membershipfees.`Date`, '%d-%m-%Y'), '%Y%m') = 
                           DATE_FORMAT(NOW(), '%Y%m')
WHERE membershipfees.id IS NULL
ORDER BY Members.id ASC; 
```

[**在此处查看 SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/61c79/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:32:11.137

我现在无法测试它，但请尝试让我知道它是否适合您：

```
SELECT m.id, m.Name FROM Members m
Where not exists 
    (select 1 from membershipfees mm 
     where 
     mm.Date > DATE_FORMAT(NOW(), '%Y-%m')
     and mm.id = m.id) 
```

**更新：**
它对[*我有用*](http://sqlfiddle.com/#!2/b324f/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:33:31.757

试试这个：

您只需在查询中添加**membershipfees.id IS NULL**条件

```
SELECT members.id, members.Name  
FROM   members 
LEFT outer JOIN membershipfees 
ON       members.id = membershipfees.id 
and    DATE_FORMAT(membershipfees.Date, '%Y%m')
                          <> DATE_FORMAT(NOW(), '%Y%m') 
where  membershipfees.id IS NULL
ORDER BY members.id ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:11:22.363

试试这个查询..

```
SELECT Members.id, Members.Name FROM Members where id not in (select id from membershipfees WHERE DATE_FORMAT(MembershipFees.Date, '%Y%m') <> DATE_FORMAT(NOW(), '%Y%m') ORDER BY Members.id ASC) 
```

# codeigniter - 我是否需要转换常规 html 代码以遵循 codeigniter 标准？

> ID：12067366
> 
> 赞同：0
> 
> 时间：2012-08-22T06:24:10.560
> 
> 标签：codeigniter

由于我将我的网站移植到 codeigniter，我想知道我是否真的需要将常规 html 代码转换为 codeigniter 编码标准。

例如，我有以下 html 代码：

```
<input type="text" id="first_name" name="first_name" size="32" maxlength="32" value="<?php echo $first_name ?>"> 
```

在 codeigniter 中，我可以执行与上述相同的操作或使用以下代码：

```
$format = 'size="32" maxlength="32"';

echo form_input('first_name', '$first_name', $format); 
```

那么我应该关注哪一个呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:59:50.793

这样做是为了方便：

```
echo '<input type="text" id="first_name" name="first_name" size="32" maxlength="32" value="'.$first_name.'">'; 
```

它更好，更值得推荐，并且每个浏览器都支持该死的肯定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:25:17.763

Leave your code as it is, there is no standard in writing HTML here, use whatever suits you best and whatever is more readable for you. Your way is much more rapid, than CodeIgniter's as it's basically plain html with echo of one variable. CodeIgniter's helper is basically an option for lazy ones to get things up faster, if you're familiar with them. If you work in a team and then ask for your designer or the one that's usually working with frontend and he's not familiar with CodeIgniter you will have to change things by yourself.

# javafx - JavaFX Hello World 在启动时抛出 java.net.ConnectException

> ID：12067368
> 
> 赞同：4
> 
> 时间：2012-08-22T06:24:18.000
> 
> 标签：javafx, javafx-2

我似乎无法弄清楚为什么我不断收到这些 java.net.ConnectExceptions。我正在运行 Windows 7 并全新安装了 Java 7u6 x64。我已经关闭了防火墙（以防万一）。我遵循了此处发布的解决方案：

[java.net.SocketException：无效参数：连接](https://stackoverflow.com/questions/8216713/java-net-socketexception-invalid-argument-connect)

但没有什么能摆脱这些问题。我什至使用 Microsoft FixIt 应用程序来重置我的 IP 堆栈。我还在环境变量 JAVA_TOOL_OPTIONS 变量中添加了“-Djava.net.preferIPv4Stack=true”。没有任何效果。

这是来自 Netbeans IDE 的 JavaFX“Hello World”程序。（在我的 Mac 上我没有问题。）

任何帮助将不胜感激！我不再确定在哪里可以解决这个问题。最终结果是每个 JavaFX 程序都需要很长时间才能运行。看起来他们都在等待套接字连接的超时，然后再继续使用应用程序。Java 程序不会发生这种情况，只有 JavaFX 会发生这种情况。

这是代码：

```
package anotherjavafxtest;

import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

/**
 *
 * @author redacted
 */
public class AnotherJavaFXTest extends Application
{

    @Override
    public void start(Stage primaryStage)
    {
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>()
        {
            @Override
            public void handle(ActionEvent event)
            {
                System.out.println("Hello World!");
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    /**
     * The main() method is ignored in correctly deployed JavaFX application. main() serves only as fallback in case the application can not be launched through deployment
     * artifacts, e.g., in IDEs with limited FX support. NetBeans ignores main().
     *
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        launch(args);
    }
} 
```

这是例外列表：

```
java.net.ConnectException: Connection refused: connect
    at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:378)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:473)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:203)
    at sun.net.www.http.HttpClient.New(HttpClient.java:290)
    at sun.net.www.http.HttpClient.New(HttpClient.java:306)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:995)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:974)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:849)
    at sun.net.www.protocol.http.HttpURLConnection.followRedirect(HttpURLConnection.java:2380)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1546)
    at com.sun.deploy.net.proxy.AbstractAutoProxyHandler.getJSFileFromURL(Unknown Source)
    at com.sun.deploy.net.proxy.AbstractAutoProxyHandler.init(Unknown Source)
    at com.sun.deploy.net.proxy.DynamicProxyManager.reset(Unknown Source)
    at com.sun.deploy.net.proxy.DeployProxySelector.reset(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.javafx.main.Main.tryToSetProxy(Main.java:572)
    at com.javafx.main.Main.launchApp(Main.java:640)
    at com.javafx.main.Main.main(Main.java:805) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:13:19.853

这是 FX 与系统代理的问题，FX 正在尝试检查系统代理，如果配置错误则失败。原因是下一个增强：http: [//javafx-jira.kenai.com/browse/RT-21705](http://javafx-jira.kenai.com/browse/RT-21705)

在项目属性中的 JVM 参数旁边添加：`"-Djavafx.autoproxy.disable=true"`或修复系统代理以解决该问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T06:55:17.657

您不应该运行与预期不同的应用程序，因为该示例代码与网络连接无关。还要检查 Netbeans 的 JavaFX 运行时平台以及您的应用程序。您可以在“工具”菜单下的“Java 平台”中找到它。

# ruby - ruby 中的 strip/gsub 恢复

> ID：12067369
> 
> 赞同：-3
> 
> 时间：2012-08-22T06:24:24.543
> 
> 标签：ruby, regex

我目前正在使用以下内容创建标题 slugged 版本。

```
title_slug = self.title.downcase.strip.gsub(' ', '-').gsub(/[^\w-]/, '') 
```

在某些情况下，我收到蛞蝓，我应该把它转换回原来的名字。

是否有任何简单的方法可以在 ruby​​ 中执行上述代码的逆操作（将 slug 名称恢复为其原始名称。）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:27:38.700

嗯，不。您正在从字符串中*删除信息*（例如，删除所有不是字母数字的字母），因此您无法在之后重建它们。

您甚至不能安全地将破折号转换回空格——它们可能是原始字符串中的破折号。（感谢@XavierHolt！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:00:50.443

您的 slugification 功能：

```
.downcase.strip.gsub(' ', '-').gsub(/[^\w-]/, '') 
```

显然是一个不可逆的函数，所以你不能简单地回去。如果你需要回去，你有几个选择：

1.  将 slug 存储在您的数据库中，以便您可以查询它。
2.  用您的数据库语言（SQL、JavaScript 等）实现您的 slugification 功能，这样您就可以再次对其进行查询。

在任何一种情况下，当您通过 slug 查询时都会得到重复项，因此您要么首先防止重复（通过修改 slug 以强制唯一性），要么找出某种方法来选择您想要的结果。

# java - Log4j 如何阻止我的记录器打印到控制台？

> ID：12067370
> 
> 赞同：9
> 
> 时间：2012-08-22T06:24:39.420
> 
> 标签：java, console, log4j

好的，所以我正在尝试制作一个内存附加程序（只是一个记录器，它记录到 ArrayList 而不是控制台或文件）但现在我想禁用它打印到控制台。

到目前为止，我读过的问题和网站（但我仍然无法弄清楚）..

*   [StackOverFlow 问题 log4j：将特定类的输出记录到特定附加程序](https://stackoverflow.com/questions/2763740/log4j-log-output-of-a-specific-class-to-a-specific-appender)
*   [StackOverFlow 问题 log4j：禁用 log4j 控制台日志记录并启用文件日志记录](https://stackoverflow.com/questions/6095992/disable-log4j-console-logging-and-enable-file-logging)
*   [编码器启动：log4j：停止记录到控制台](https://coderanch.com/t/61779/open-source/log-stop-logging-console)

它包含了我想要实现的所有部分，但我仍然有点困惑。

我还从[Logback 或 Log4j Additivity Explained](http://blog.idleworx.com/2010/07/logback-log4j-additivity-explained.html) which states 中读到了这个片段。

> 但是，如果 logger X 的 aditivity 标志设置为 false 或禁用，则调用 x.debug() 将仅记录到文件。

所以理论上我的`log4j.properties`文件

```
log4j.rootLogger=ERROR, console
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%d %5p %c (%F:%L) - %m%n
#hide the Log4jMemoryAppender from console
log4j.logger.nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender= ERROR, MEMORY_APPENDER
log4j.appender.MEMORY_APPENDER=nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender.Log4jMemoryAppender
log4j.additivity.rootLogger = false
log4j.additivity.console = false
log4j.additivity.MEMORY_APPENDER=false 
```

应该只打印`***Hello World`和排除`MEMORY_APPENDER`,`rootLogger`和`console`.

```
package nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender;

import java.util.ArrayList;
import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.spi.LoggingEvent;

import org.apache.log4j.BasicConfigurator;
import org.apache.log4j.Level;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class Log4jMemoryAppender extends AppenderSkeleton {

ArrayList<LoggingEvent> eventsList = new ArrayList();

public static void main (String [] args) {

    PropertyConfigurator.configure("Lib/log4j.properties");
    Log4jMemoryAppender app = new Log4jMemoryAppender();
    Logger logger = Logger.getLogger(Log4jMemoryAppender.class);
    logger.setLevel(Level.INFO);

    logger.addAppender(app);
    logger.info("Hello World");
    logger.debug("Level DEBUG Is SET");

    for (LoggingEvent le: app.eventsList) {
        System.out.println("***" + le.getMessage());
    }
} 

@Override
protected void append(LoggingEvent event) {
    eventsList.add(event);
}

public void close() {
}

public boolean requiresLayout() {
    return false;
}
} 
```

但它不...

[![appender](../Images/3b43ab313f0fb194833e87ab07428294.png)](https://i.stack.imgur.com/fbwyX.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/2jypxucr.ilb.png)）]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:34:55.350

线

```
MEMORY_APPENDER=false 
```

将不起作用，您不能将附加程序设置为值为 false。

在你的情况下，最好做这样的事情：

```
log4j.rootLogger=ERROR, console
log4j.appender.console=org.apache.log4j.ConsoleAppender

log4j.logger.nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender = ERROR, MEMORY_APPENDER
log4j.additivity.nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender = false 
```

在您的一个示例中使用的 Logger 是`nz.ac.massey.cs.sdc.log4jassignment.s06005586.MemoryAppender`并且应该映射到`log4j.properties`或只是包部分中的记录器，例如`nz.ac.massey.cs.sdc.log4jassignment`.

* * *

看起来你在这里混合了很多。是`Log4jMemoryAppender`你的`MEMORY_APPENDER`还是不是？

你为什么打电话`BasicConfigurator.configure()`？你不想用`log4j.properties`吗？

* * *

Normally in a class you do this to get a logger:

```
package com.mycompany;

public class MyClass {
    private static final Logger log = Logger.getLogger(MyClass.class);
    ...
} 
```

The logger name will be the fully qualified classname `com.mycompany.MyClass`.

Then you can have a `log4j.properties` like this:

```
log4j.rootLogger=ERROR, console
log4j.appender.console=org.apache.log4j.ConsoleAppender

log4j.logger.com.mycompany=INFO, file
log4j.additivity.com.mycompany=false

logfj.appender.file = <some file appender> 
```

* * *

OK, starting from beginning. A *very* simple example.

`src/main/java/Log4JTest.java`

```
package org.stackoverflow;

import org.apache.log4j.Logger;

/**
 * @author maba, 2012-08-22
 */
public class Log4JTest {

    public static final Logger log = Logger.getLogger(Log4JTest.class);

    public static void main(String[] args) {
        log.error("Error in main");
    }
} 
```

`src/main/resources/log4j.properties`

```
log4j.rootLogger = ERROR, console

log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

Now compile and make sure that `log4j.properties` is in your classpath together with the `log4j.jar` and your own classes when running.

You will see this:

```
0    [main] ERROR org.stackoverflow.Log4JTest  - Error in main 
```

From here you can try to add a file appender or your own memory appender.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-09T01:14:39.290

I've just fixed this issue by setting this at log4j.xml, replaced value="TRACE" to value="ERROR". Hope this can help some one :)

```
 <root>
        <priority value="ERROR" />
        <appender-ref ref="STDOUT"/>
    </root> 
```

# jquery - 区分混合应用或网络应用

> ID：12067372
> 
> 赞同：0
> 
> 时间：2012-08-22T06:24:41.603
> 
> 标签：jquery, html, webkit, hybrid

我正在为 Android/IOS 编写一个混合应用程序，在 web-kit 上进行渲染，我想为我的移动 web 应用程序使用相同的视图 (HTML5)。

有没有办法通过 jQuery 或纯 javascript 来识别加载的东西是混合应用程序还是移动网络，这样我就可以有条件地显示隐藏移动网络和混合应用程序的组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:31:33.223

仅供参考，现在我们可以使用 HTML、CSS 和 JS 编写我们的移动应用程序（混合）。并将其包装在包装器（android/ios）中，有时使用[Phonegap](http://build.phonegap.com/)。

您的方法看起来不错，但让我们尝试另一种方法。为什么不在代码库中设置某种标志来帮助您确定您的应用程序是在 webview 中运行还是在浏览器本身中运行？

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T07:39:25.193

我使用适合我的这个片段

```
function isApp() {

var app = document.URL.indexOf('http://') === -1 && document.URL.indexOf('https://') === -1;
  if (app) {
      // PhoneGap application
      //alert("U're using cordova");
      return true;
  } else {
      //alert("U're using browser");
      return false;
  }
} 
```

希望它可以帮助你。问候。

# c# - 中继器控制内部的 IF 条件？

> ID：12067373
> 
> 赞同：1
> 
> 时间：2012-08-22T06:24:47.843
> 
> 标签：c#, javascript, asp.net, repeater

```
<asp:CheckBox ID="chkBox1" runat="server" Text="1" />
<asp:CheckBox ID="chkBox2" runat="server" Text="2" /> 
```

我有两个复选框，基于我需要运行查询并绑定到转发器控件的选择。

在中继器控制中：

```
<asp:Repeater runat="server" ID="Repeater1">
<HeaderTemplate >
<table class="list_table" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<th>1</th>
<th>2</th>
</tr>
</HeaderTemplate>
<ItemTemplate>
<tr>
<td><%=CheckBox1.Checked ? Eval("1") : "" %></td> 
 <td><%=CheckBox2.Checked ? Eval("2") : "" %></td> 

    </tr>
    </ItemTemplate>
    <FooterTemplate>
    </table>
    </FooterTemplate>
    </asp:Repeater> 
```

AVD 建议我已经更改了我的编码，如果条件工作正常，但我需要将数据库中的数据绑定到转发器控件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:36:59.493

你可以试试，

```
 <ItemTemplate>
    <tr>
        <td><%=CheckBox1.Checked ? "1" : "" %></td>
        <td><%=CheckBox2.Checked ? "2" : "" %></td>
   </tr>
  </ItemTemplate> 
```

编辑：

@Prince Antony G：如果我选择 checkbox1 然后运行查询 - select 1 from table1; 或者如果我选择 checkbox2 然后运行查询 - 从 table2 中选择 2；并将数据绑定到我的转发器控件中（并且这两个表都有不同的字段）

您不能将不同的数据源绑定到*DataControl ，因为在**任何一种*情况下，某些绑定表达式（列）都不可用（找到）。

Page1.aspx 标记

* * *

```
<div>
<asp:MultiView ID="MultiView1" runat="server">
    <asp:View ID="View1" runat="server">
        <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <!--Bind the result from first table -->
        </ItemTemplate>
        </asp:Repeater>
    </asp:View>

    <asp:View ID="View2" runat="server">
        <asp:Repeater ID="Repeater2" runat="server">
        <ItemTemplate>
            <!--Bind the result from second table -->
        </ItemTemplate>
        </asp:Repeater>
    </asp:View>
</asp:MultiView>
</div> 
```

Page1.aspx.cs - 后面的代码

* * *

```
protected void BindResult(object sender, EventArgs e)
{
    CheckBox check = sender as CheckBox;
    switch (check.Text)
    {
        case "1": 
            /* 
                * 1\. Execute - Select * from Table1
                * 2\. Bind the DataSource to Repeater1
                */
            /* Shows the first View*/
            MultiView1.ActiveViewIndex = 0;
            break;
        case "2":
            /* 
                * 1\. Execute - Select * from Table2
                * 2\. Bind the DataSource to Repeater2
                */
            /* Shows the second View*/
            MultiView1.ActiveViewIndex = 1;
            break;
    }
} 
```

# asp.net-mvc - Html.DisplayFor十进制格式？

> ID：12067375
> 
> 赞同：27
> 
> 时间：2012-08-22T06:25:00.200
> 
> 标签：asp.net-mvc, string-formatting

例如，我有一个十进制值：`59625879,00`

我想这样显示这个值：`59.625,879`或`59625,879`

我该怎么做`@Html.DisplayFor(x => x.TAll, String.Format())`？

谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-22T06:31:22.427

使用属性装饰您的视图模型`[DisplayFormat]`属性并指定所需的格式：

```
[DisplayFormat(DataFormatString = "{0:N}", ApplyFormatInEditMode = true)]
public decimal TAll { get; set; } 
```

然后在你看来：

```
@Html.DisplayFor(x => x.TAll) 
```

* * *

如果您不想在视图模型上执行此操作，则另一种可能性也可以在视图内执行：

```
@Model.tAll.ToString("N") 
```

但我会推荐你​​第一种方法。

* * *

另一种可能性是为小数类型 ( `~/Views/Shared/DisplayTemplates/MyDecimalTemplate.cshtml`) 编写自定义显示模板：

```
@string.Format("{0:N}", Model) 
```

进而：

```
@Html.DisplayFor(x => x.TAll, "MyDecimalTemplate") 
```

# c# - 防止触发自定义控件事件

> ID：12067379
> 
> 赞同：1
> 
> 时间：2012-08-22T06:25:10.543
> 
> 标签：c#, winforms, events, treeview, controls

我有一个继承自[`TreeView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview%28v=vs.100%29.aspx). 在此`CustomTreeView`，我处理`OnNodeMouseClick`事件以在更改 `node.Checked`用户期望的状态之前执行一些过程：

```
public class CustomTreeView : TreeView {
    // Constructor...

    protected override void OnNodeMouseClick(TreeNodeMouseClickEventArgs e) {
       base.OnNodeMouseClick(e);

       // Do something...

       e.Node.Checked = !e.Node.Checked;
    }
} 
```

我的问题是，当开发人员在 a 上订阅`AfterCheck`事件时`CustomTreeView`， 的值`e.Action`始终为[`TreeViewAction.Unknown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeviewaction%28v=vs.100%29.aspx)（因为节点的已检查状态在代码中已更改），而开发人员正在等待`TreeViewAction.ByMouse`：

```
public partial class Form1: Form {
    private void customTreeView1_AfterCheck(object sender, TreeViewEventArgs e) {
        // e.Action == TreeViewAction.Unknown
        // [developer] The user clicked on the node, it should be 
        //             TreeViewAction.ByMouse!?
    }
} 
```

我想做的是禁用`AfterCheck`事件触发并在我的`CustomTreeView`班级中自己调用它，这样我就可以传递参数`TreeViewAction`等于`ByMouse`。像这样的东西：

```
public class CustomTreeView : TreeView {
    // Constructor...

    protected override void OnNodeMouseClick(TreeNodeMouseClickEventArgs e) {
       base.OnNodeMouseClick(e);

       // Do something...

       // Prevent all AfterCheck events from firing, just for a moment
       // ??

       e.Node.Checked = !e.Node.Checked;

       // Allow AfterCheck events to fire
       // ??

       // Call myself the AfterCheck event
       base.OnAfterCheck(new TreeViewEventArgs(e.Node, TreeViewAction.ByMouse));
    }
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:37:03.863

当然，只需覆盖它`OnAfterCheck`，`CustomTreeView`它就会像你想要的那样工作。

```
public class CustomTreeView : TreeView {

    protected override void OnNodeMouseClick(TreeNodeMouseClickEventArgs e) {
       base.OnNodeMouseClick(e);

       // your stuff

       // Call myself the AfterCheck event
       base.OnAfterCheck(new TreeViewEventArgs(e.Node, TreeViewAction.ByMouse));
    }

    protected override void OnAfterCheck(TreeViewEventArgs e)
    {
       // do nothing   
    }
} 
```

* * *

![在此处输入图像描述](../Images/303236f8b95b410844b19e585ca5639e.png)

# php - PHP 检查报告 CSS 选择器未使用。它被 PHP 回显标签使用

> ID：12067382
> 
> 赞同：0
> 
> 时间：2012-08-22T06:25:19.700
> 
> 标签：php, html, css, phpstorm

我有创建 HTML 的 PHP 代码

```
echo('<div id="keyboard">'); 
```

在我的 CSS 中，我有

```
#keyboard {
} 
```

PHPStorm 报告未使用 CSS 选择器。它被使用。我能让它意识到吗？不是，我曾经看到过某种禁用单个错误或警告的方法，但我在文档中再也找不到了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:34:49.400

您可以尝试将 html 从 php 脚本中移出，并在需要时打开括号。我怀疑 IDE 无法区分 php echoed html 和 php 标签之外的 html。

```
<?php
 //add php code here
?>
<div id="keyboard">
<?php
 //php code here
?>
</div>
<?php
 //add php code here
?> 
```

IDE 现在应该能够将 CSS 与相关 id 匹配。

# c# - 如何在 Silverlight 中的两个组合框中进行双向绑定

> ID：12067387
> 
> 赞同：1
> 
> 时间：2012-08-22T06:25:31.727
> 
> 标签：c#, wpf, silverlight, xaml, data-binding

在一个项目中，我展示了两个 ComboBoxes，比如说 ComboBox1 和 ComboBox2。我将 ComboBox 与 KeyValue 对绑定在一起 让我们说 dictionary1 如下所示。

```
ComboBox1.ItemsSource = dictionary1 ;
ComboBox1.SelectedItem = ComboBox1.Items[0];

//Setting the Item Source of Patient Name Combo Box.
ComboBox2.ItemsSource = dictionary1 ;
ComboBox2.SelectedItem = ComboBox2.Items[0]; 
```

在 XAML 部分，我在 Dictionary 的 CombBox1 中显示 Key，在 ComboBox2 中显示 Value，如下所述：-

```
<ComboBox
       x:Name             ="ComboBox1"
       DisplayMemberPath  ="Key"
       SelectedValue      ="{Binding Source=ComboBox2, Path=DisplayMemberPath, Mode=TwoWay}"/>

<ComboBox
       x:Name              ="ComboBox2"
       DisplayMemberPath   ="Value"
       SelectionChanged    ="ComboBox2_SelectionChanged"
       /> 
```

**目标：-** 如果我更改 ComboBox1 中的选择，那么它应该影响 ComboBox2.SelectedItem 的相应值，如果我更改 ComboBox2 中的选择，那么它应该影响 ComboBox1.SelectedItem 中的相应键值。

谁能告诉我上述代码中的错误在哪里，或者请帮助我完成上述目标。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:30:08.950

这应该工作

```
<ComboBox
       x:Name             ="ComboBox1"
       DisplayMemberPath  ="Key"
       SelectedItem      ="{Binding ElementName=ComboBox2, Path=SelectedItem, Mode=TwoWay}"/>

<ComboBox
       x:Name              ="ComboBox2"
       DisplayMemberPath   ="Value"
       /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:31:25.753

我至少可以看到两个问题：

1.  需要是*ElementName*而不是*Source*
2.  应该是*Path*而不是*DisplayMemberPath*

我认为这应该有效：

```
<ComboBox
   x:Name             ="ComboBox1"
   DisplayMemberPath  ="Key"
   SelectedValue      ="{Binding ElementName=ComboBox2, Path=SelectedValue}"/>

<ComboBox
   x:Name             ="ComboBox2"
   DisplayMemberPath  ="Value" /> 
```

# geb - 在 Geb 中设置请求头和用户代理

> ID：12067388
> 
> 赞同：6
> 
> 时间：2012-08-22T06:25:32.837
> 
> 标签：geb, cucumber-jvm

使用 Geb 时，是否可以在使用浏览器 API（而不是直接下载 API）时设置自定义请求标头和用户代理？

虽然使用 FirefoxDriver（请参阅[此处](http://markmail.org/message/qiainbyebjuhisie)）可以做到这一点，但我正在寻找一种使用 WebKitDriver 执行此操作的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:18:46.600

一个可能的解决方案是通过代理。

*   BrowserMob 具有带有 REST api 的独立模式，或者以编程方式嵌入到您的测试中：[https](https://github.com/webmetrics/browsermob-proxy) ://github.com/webmetrics/browsermob-proxy 。当您要测试大量自定义标头时很有用。
*   如果您已经拥有 Apache，您可以在具有该特定请求标头的不同端口上创建另一个 VirtualHost，并在测试之前将您的浏览器指向该端口。鉴于您的标题在测试之间没有变化。

这可能不是您问题的直接解决方案：直接在浏览器 API 中修改请求标头，但它达到了最终结果。

# java - 是否可以加快在 Activity 子类中初始化 AlertDialogs 的速度？

> ID：12067396
> 
> 赞同：2
> 
> 时间：2012-08-22T06:26:07.673
> 
> 标签：java, android, android-activity, android-alertdialog, builder

我知道创建静态方法来创建 AlertDialogs 不是一个好兆头。但是，每当我想创建一些 AlertDialogs 时，我总是必须将它们放在 Activity 子类中。我一直在寻找 SO，试图找到一种分解代码的好方法，这样我就不必从 Activity 子类初始化和创建 AlertDialogs。

这是我的代码示例，其设计方式是我必须牺牲 AlertDialogs 的性能速度，这在我的项目计划中是**非常**必要的。

```
public void onCreate(Bundle b) {
    super.onCreate(b);
    accelerometer = new Accelero();
    leaderboard = new Score(this);
    renderView = new RenderView(this);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(renderView);

    // TODO: Refactor this, to speed things up.
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    input = new EditText(this);
    builder.setView(input);
    builder.setTitle("Enter Name for High Score!");
    builder.setPositiveButton("Retry", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // TODO: Polish the dialog.
            // TODO: Add a method of obtaining the score from RenderView.
            renderView.getStage().reset();
            renderView.setDialogFlag(false);
        }
    });
    builder.setNegativeButton("Back", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            PlayActivity.this.onBackPressed();
        }
    });
    renderView.setLosingDialog(builder.create());
    builder = new AlertDialog.Builder(this);
    builder.setTitle("You win!");
    builder.setPositiveButton("Next Stage", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            renderView.createStage(getAssets(), stageNumber);
            renderView.pauseGame();
        }
    });
    renderView.setWinningDialog(builder.create());
    builder = new AlertDialog.Builder(this);
    builder.setTitle("Game Paused!");
    builder.setPositiveButton("Back to Game", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            renderView.unpauseGame();
        }
    });
    builder.setNeutralButton("Restart", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            renderView.resetGame();
        }
    });
    builder.setNegativeButton("Main Menu", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // TODO: Will probably improve some more on this.
            PlayActivity.this.finish();
        }
    });
    renderView.setPausingDialog(builder.create());
} 
```

这不是我想要的。我尝试将它们放在一个新线程中运行，但它会泄漏内存，所以它不起作用。此外，由于问题（静态 AlertDialog 方法会泄漏内存等），我只是没有任何其他想法来解决这个问题。

我不知道下一步该做什么。那么，请问，在不牺牲性能速度的情况下，还有谁有更好的方法来初始化 AlertDialogs？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:05:13.260

我要做的第一件事是添加一些性能分析工具（测量）来确定代码在哪里花费时间。没有什么比花时间尝试优化不需要优化的东西更痛苦的了 ;-)

从这里我可以看到至少一个简单的优化：这段代码创建了 6 个不同匿名类的 6 个实例，只是为了处理`onClick()`回调。恕我直言，这不是必需的。您可以只`this`用作回调接口并确保您的活动实现`DialogInterface.OnClickListener`. 然后在您的活动中编写一个处理所有点击事件的方法：

```
public void onClick(DialogInterface dialog, int which) {
    if (dialog == renderView.getLosingDialog()) {
        if (which == DialogInterface.BUTTON_POSITIVE) {
            // TODO: Polish the dialog.
            // TODO: Add a method of obtaining the score from RenderView.
            renderView.getStage().reset();
            renderView.setDialogFlag(false);
        } else if (which == DialogInterface.BUTTON_NEGATIVE) {
            PlayActivity.this.onBackPressed();
        }
    } else if dialog == renderView.getWinningDialog()) {
        // etc...
    } else if dialog == renderView.getPausingDialog()) {
        // etc...
    }
} 
```

我不能保证这会提高性能，但它肯定会让垃圾收集器非常高兴:-)

# node.js - Node.js - 如何在 express.js (2.5.8) 中使用jade partials

> ID：12067402
> 
> 赞同：0
> 
> 时间：2012-08-22T06:26:30.680
> 
> 标签：node.js, express, partial-views, pug

我在阅读了这个[类似的 SO 问题后发布了这个问题](https://stackoverflow.com/questions/5764693/how-do-i-render-partials-with-jade-without-express-js)

我有一个使用 Express 2.5.8 和 Jade 0.26.0 的 node.js 应用程序正在运行

我有一个包含许多小部件的翡翠页面。在网上搜索时，使用部分来模块化这些小部件似乎是理想的选择。

所以我的翡翠主页 comp.jade 是

```
!!! 5
html(lang='en')
head
  body
    h2.page-header REPORT FOR #{comp_name}
    .other_ds
      partial('partials/ln_profile') 
```

我的 ln_profile.jade 是

```
p.ln_profile
    strong  #{comp_ln_name}  
      br
      | #{comp_description} 
```

在服务器端，我的脚本看起来像

```
res.render('comp',{comp_name: 'Some Company'}); // to pass data to comp.jade
res.partial( 'partials/ln_profile',{comp_ln_name: 'Test Company',comp_description:'Test Description'});  // to pass data to ln_profile.jade 
```

但是当我这样做时，只有 ln_profile.jade 被渲染，而 comp.jade 没有被渲染。

我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T16:59:24.390

部分已弃用。您必须使用 Include 语句而不是部分语句。

# javascript - 主要 JavaScript 引擎中 JavaScript 关联数组（动态对象属性）中检索/插入的复杂性是什么？

> ID：12067404
> 
> 赞同：10
> 
> 时间：2012-08-22T06:26:36.837
> 
> 标签：javascript, data-structures, time-complexity, javascript-objects, javascript-engine

以下面的代码示例为例：

```
var myObject = {};
var i = 100;

while (i--) {
    myObject["foo"+i] = new Foo(i);
}

console.log(myObject["foo42"].bar()); 
```

我有几个问题。

主要引擎（IE、Mozilla、Chrome、Safari）使用什么样的数据结构来存储键值对？我希望它是某种二进制搜索树，但我认为它们可能使用链表（因为迭代是按插入顺序完成的）。

如果他们确实使用搜索树，它是自我平衡的吗？因为上面的代码使用传统的搜索树会创建一个不平衡的树，导致搜索的最坏情况是 O(n)，而不是平衡树的 O(log n)。

我之所以这么问，是因为我将编写一个库，该库需要从数据结构中有效检索键，虽然我可以实现自己的或现有的红黑树，但如果它们是，我宁愿使用本机对象属性足够高效。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T07:42:57.660

由于几个原因，这个问题很难回答。首先，现代浏览器在代码执行时都会对代码进行大量动态优化，因此选择访问属性的算法对于相同的代码可能会有所不同。其次，每个引擎使用不同的算法和启发式方法来确定使用哪种访问算法。第三，ECMA 规范规定了结果必须是什么，而不是如何获得结果，因此引擎在该领域有很大的创新自由。

也就是说，鉴于您的示例，我熟悉的所有引擎都将使用某种形式的哈希表来检索与`foo42`from关联的值`myobject`. 如果你使用像关联数组这样的对象，JavaScript 引擎会倾向于使用哈希表。我不知道将树用于字符串属性。哈希表是最坏情况 O(N)，最好情况 O(1)，如果密钥生成器好的话，它往往更接近 O(1) 而不是 O(N)。每个引擎都会有一个模式，您可以使用它来让它执行 O(N)，但每个引擎都会有所不同。平衡树将保证最坏情况 O(log N)，但在保持平衡的同时修改平衡树不是 O(log N)，并且对于字符串键，哈希表通常比 O(log N) 更好，并且是 O(1)更新（一旦您确定需要，

然而，数值属性是特殊的。如果您使用范围内几乎没有或没有间隙的整数数字属性访问对象，也就是说，像使用数组一样使用对象，则值将倾向于存储在具有 O(1) 访问权限的线性内存块中。即使您的访问存在间隙，引擎也可能会转向稀疏数组访问，最坏的情况可能是 O(log N)。

通过标识符访问属性也很特殊。如果您像这样访问该物业，

```
myObject.foo42 
```

并经常执行此代码（即，此代码的速度很重要），并且对于相同或相似的对象，这可能会优化为一两条机器指令。每个引擎使对象相似的原因也不同，但如果它们是由相同的文字或函数构造的，则它们更有可能被视为相似。

在 JavaScript 基准测试中表现出色的引擎不会对每个对象使用相同的算法。它们都必须动态确定对象的使用方式，并尝试相应地调整访问算法。

# java - 反序列化 ArrayList。没有有效的构造函数

> ID：12067405
> 
> 赞同：3
> 
> 时间：2012-08-22T06:26:38.110
> 
> 标签：java, serialization, io, persistence, deserialization

这就是我如何反序列化包含标识对象的 arrayList

```
public void deserializeArrayList(){
    String path = "./qbank/IdentificationHARD.quiz";
    try{
          FileInputStream fileIn = new FileInputStream(path);
            ObjectInputStream in = new ObjectInputStream(fileIn);
            ArrayList<Identification> list = (ArrayList<Identification>) in.readObject();
            System.out.println(list);
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

这就是我序列化它的方式

```
public void saveItemIdentification(ArrayList<Identification> identification,File file){
    try{
        ObjectOutputStream out = new ObjectOutputStream(
                                      new FileOutputStream(file));
        out.writeObject(identification);
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

但是当我反序列化它时，它给了我这个错误

```
java.io.InvalidClassException: quizmaker.management.Identification; quizmaker.management.Identification; no valid constructor
    at java.io.ObjectStreamClass.checkDeserialize(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.ArrayList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at quizmaker.management.Manage.deserializeArrayList(Manage.java:92) 
```

这是第 92 行

```
ArrayList<Identification> list = (ArrayList<Identification>) in.readObject(); 
```

为什么会这样？

这是`Identification`对象的代码。

```
 package quizmaker.management; 
 import java.io.Serializable;
 import quizmaker.Accounts.Rights.IAnswerable;

public class Identification extends Question implements Serializable{

    private static final long serialVersionUID = 2L;
    private String question;
    private String answer;

    public Identification(String q , String a){
        super(q,a);
    }

    public String toString(){
        return String.format("Question: %s\n Answer %s", getQuestion(),getAnswer());
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T06:45:13.993

问题是->在java中

```
Java serialization process  only continues in object hierarchy till the class
is Serializable i.e. implements Serializable interface in Java. 
```

在您的类中，您正在调用`super`未实现可序列化的类构造函数。

所以这就是问题所在.. :)

对于您的第二个问题，请查看[JavaDoc](https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)

```
During deserialization, the fields of non-serializable classes will be 
initialized using the public or protected no-arg constructor of the class.
A no-arg constructor must be accessible to the subclass that is serializable.
The fields of serializable subclasses will be restored from the stream. 
```

# java - Glassfish 3.1.2 JDBCRealm 配置

> ID：12067410
> 
> 赞同：7
> 
> 时间：2012-08-22T06:27:20.510
> 
> 标签：java, glassfish

您好，我已阅读[Glassfish 3.1.2 的 JDBCRealm 有一个新的密码加密算法字段。它是干什么用的？](https://stackoverflow.com/questions/9437897/glassfish-3-1-2s-jdbcrealm-has-a-new-password-encryption-algorithm-field-what)并搜索了类似的主题，但似乎没有发布明确的答案。

简而言之，我有一个在 glassfish 3 中工作的 jdbc 领域，当我升级到 3.1.2 时，相同的配置不起作用。根据前面的线程，我将 JaasContext 设置为 jdbcDigestRealm（除了 jdbcRealm 也不起作用），将 Digest Algorithm 设置为 MD5（我在 v 3 中使用了 MD5 并且它有效）。对于密码加密算法，我尝试了“空白”和“十六进制”，两者都不起作用。

有人可以告诉我应该如何配置。[根据http://jugojava.blogspot.hk/2011/02/jdbc-security-realm-with-glassfish-and.html](http://jugojava.blogspot.hk/2011/02/jdbc-security-realm-with-glassfish-and.html)，我的凭据表基于带有 MD5 哈希密码的 mysql 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T13:28:30.347

我成功使它适用于以下设置。我根据我目前的（错误）理解添加了一些评论。

*   JAASContext = "jdbcRealm" => 该值必须根据文件 'glassfish3/glassfish/domains/domain1/config/login.conf' 设置。默认情况下，“com.sun.enterprise.security.auth.login.JDBCLoginModule”类（实现 JDBCrealm）配置在“jdbcRealm”下。在“jdbcDigestRealm”下配置了另一个登录模块。这不是当前主题的一部分。
*   JNDI = "..." => 我把我的应用程序数据库中已经存在的数据源的名称放在那里。
*   UserTable = "MY_SCHEMA.usertable" => 数据库表的“全限定名”。
*   UserNameColumn = "userid" => 存储用户名的列名
*   PasswordColumn = "password" => 存储用户密码（哈希）的列名。
*   GroupTable = "MY_SCHEMA.grouptable" => 数据库表的“全限定名”。
*   GroupTableUserNameColumn = "" => 不知道这个的用法...
*   GroupNameColumn = "groupid" => 存储用户名的列名
*   AssignGroups = "" => 据我了解 GF 代码，这是一种将组列表分配给在领域中注册的每个用户的方法。这是一种硬编码。GlassFish 上可用的每个领域（可以）或多或少都使用此属性。
*   DatabaseUser = "" => 据我了解，如果您不使用 JNDI（第二个参数），则需要这个。
*   DatabasePassword = "" => 据我了解，如果您不使用 JNDI（第二个参数），则需要这个。
*   DigestAlgorithm = "SHA-256" => 'MD5'、'SHA-1' 或 'SHA-256'。“SHA-256”是默认值。让我们以“SHA-256”为例。
*   PasswordEncryptionAlgorithm = "AES" => 在存储密码之前将摘要算法应用于密码。新的密码加密是一个附加的安全层，它允许对“散列”（DA 后的字符串应用于密码）进行加密。这样，如果攻击者从数据库中检索密码，它们就会被加密和散列。此类数据对攻击者有用的可能性很小。
*   Encoding = "Hex" => 您可以选择“Hex”或“Base64”。Hex对我来说很方便。
*   Charset = "" => 由于我的数据库没有“异国情调”字符集，我认为我不需要在那里设置一些聪明的东西。我把它留空，它可以工作。

希望它会有所帮助。

PS：如果有人有**真实**文档的链接（不是目前完全没用的官方文档），请在此处放置链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T02:12:17.417

我今天花了一段时间玩这个（Java EE 7，Ubuntu 12.04 上的 Glassfish 4）。事实证明，Realm Page 上的大多数字段都不需要。以下字段是与数据库建立成功连接所需的唯一字段。

*   领域名称 - 任何名称，只要您在 web.xml 中使用相同的名称

*   JAAS 上下文 - 任何名称

*   JNDI - 任何名称（我使用 jdbc/DB 名称）

*   用户表 - 包含所有用户的表

*   用户名列 - 用户表中包含您的用户名的列

*   密码 - 包含散列密码的列​​ (SHA 256)

*   组表 - 包含组的表

*   组名列 - 组表中包含组名的列

我把其他所有内容都留空了。我的数据库密码列使用 SHA 256 对密码进行了哈希处理。

我通过在“密码加密”字段中填写随机文本并保存它来测试这一点。重新部署我的应用程序并重新启动 Glassfish 4。仍然有效。这意味着该字段虽然仍然存在，但不再被读取。

PS - 第一个答案中提到的真实文档仍然很差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:37:10.570

第一件事。你的日志输出是什么？你的“不工作问题”的症状是什么？是否出现了基本身份验证弹出窗口？你懂吗

```
No login module configured for jdbcDigestRealm 
```

或其他错误信息？

如果不成功的登录尝试没有任何日志输出，请更改安全日志级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:39:44.280

我对这个`jdbcRealm`问题有两种变体。第一个存在于使用 GF 3.1.1 创建的域中，该域在将 GF 服务器更新到 3.1.2.2 版本后继续工作。然后我在这台服务器上创建了一个新域。新域是使用`jdbcRealm`. 除了在 3.1.1 配置屏幕下不存在的“密码加密算法”之外，所有参数与 3.1.1 配置相同。当我尝试使用我的 Web 应用程序登录时，我不断在日志文件中收到“jdbcrealm.invaliduserreason[#]”错误。

我能够解决并成功登录我的应用程序的唯一方法是将 AES 添加到“密码加密算法”字段中。我保存了更改并重新启动了服务器，我再次能够成功地通过`jdbcRealm`连接对用户进行身份验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-06T13:54:16.937

这里有一个更详细的指南-> [http://is.gd/Jx6Gnp](http://is.gd/Jx6Gnp)

# android - Activity 中的内存管理使用 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 和 getApplicationContext()？

> ID：12067411
> 
> 赞同：0
> 
> 时间：2012-08-22T06:27:19.950
> 
> 标签：android, memory-management, android-intent, memory-leaks, android-activity

我正在使用下面的代码在我的应用程序中启动另一个活动 -

**意图 itab = new Intent(getApplicationContext(), TabhostScreen.class); itab.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 开始活动（itab）；**

我如何在这种情况下管理内存，因为每次调用 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 时活动都会恢复。

那么我们将如何管理内存？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:26:21.390

我们使用 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 标志，这样就不会创建同一活动的多个实例，并且活动会以相同的状态被带到最前面，而不会从历史堆栈中弹出其他活动。就android文档建议而言，内存管理不是这里的关注点。
当您旋转设备时，您的活动将重新创建，并且使用不同的布局非常好，事实上这在 android 中是一个**很好的做法。**因此内存需求会增加。您可以通过在清单文件中修复屏幕方向来停止此行为。

# android - 无法在android中显示图表

> ID：12067415
> 
> 赞同：0
> 
> 时间：2012-08-22T06:27:42.260
> 
> 标签：android, eclipse, charts

我正在尝试使用 achartengine 库在 android 中创建一个图形。运行模拟器后，它只显示**“抱歉您的应用程序意外关闭。再试一次。强制关闭”**

我只对 Manifest.xml 文件有疑问，我的清单文件是吗？如果不是，请让我清楚。

*请找到我的来源、manifest.xml 和 logcat 以供参考*

**LOGCAT**

```
08-22 11:47:05.763: D/AndroidRuntime(537): Shutting down VM
08-22 11:47:05.775: W/dalvikvm(537): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-22 11:47:05.783: E/AndroidRuntime(537): FATAL EXCEPTION: main
08-22 11:47:05.783: E/AndroidRuntime(537): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.graphs_test/com.example.graphs_test.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.graphs_test/org.achartengine.GraphicalActivity}; have you declared this activity in your AndroidManifest.xml?
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.os.Looper.loop(Looper.java:123)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 11:47:05.783: E/AndroidRuntime(537):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 11:47:05.783: E/AndroidRuntime(537):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 11:47:05.783: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 11:47:05.783: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 11:47:05.783: E/AndroidRuntime(537):  at dalvik.system.NativeStart.main(Native Method)
08-22 11:47:05.783: E/AndroidRuntime(537): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.graphs_test/org.achartengine.GraphicalActivity}; have you declared this activity in your AndroidManifest.xml?
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.Activity.startActivityForResult(Activity.java:2817)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.Activity.startActivity(Activity.java:2923)
08-22 11:47:05.783: E/AndroidRuntime(537):  at com.example.graphs_test.MainActivity.onCreate(MainActivity.java:21)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-22 11:47:05.783: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-22 11:47:05.783: E/AndroidRuntime(537):  ... 11 more 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.graphs_test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

**MainActivity.java**

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent intent = buildIntent();
    startActivity(intent);         
}

public Intent buildIntent() {
     int[] values = new int[] { 5, 15, 25, 50, 75 };       
     String[] bars = new String[] {"Francesca's",  "King of Clubs", 
                                "Zen Lounge", "Tied House", "Molly Magees"};
     int[] colors = new int[] { Color.BLUE, Color.GREEN, Color.MAGENTA, 
                                  Color.YELLOW, Color.CYAN };

     CategorySeries series = new CategorySeries("Pie Chart");  
     DefaultRenderer dr = new DefaultRenderer();  

     for (int v=0; v<5; v++){    
         series.add(bars[v], values[v]);
         SimpleSeriesRenderer r = new SimpleSeriesRenderer();
         r.setColor(colors[v]);
         dr.addSeriesRenderer(r);
     }
     dr.setZoomButtonsVisible(true);
     dr.setZoomEnabled(true);
     dr.setChartTitleTextSize(20);
     return ChartFactory.getPieChartIntent(    
                             this, series, dr, "Pie of bars");
   }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:38:52.767

`org.achartengine.GraphicalActivity`在您的清单中找不到，因为它是库的一部分。

将以下行添加到您的*project.properties*文件以启用清单的自动合并。

```
manifestmerger.enabled=true 
```

![project.properties 文件](../Images/2a5023d567077717c5d80dd83eb073eb.png)

**编辑：**

我认为 achartengine 是一个图书馆项目。原来它是一个JAR。

您需要将活动添加到清单中：

```
<activity android:name="org.achartengine.GraphicalActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:16:23.623

您需要像这样将活动添加到 AndroidManifest.xml：

```
<activity android:name="org.achartengine.GraphicalActivity"></activity> 
```

# uitabbarcontroller - iPhone ModalViewController 来自第一个标签栏视图

> ID：12067424
> 
> 赞同：1
> 
> 时间：2012-08-22T06:28:54.737
> 
> 标签：uitabbarcontroller, modalviewcontroller

我正在尝试在加载 TabBarController 视图之前启动初始登录/注册屏幕。我已经读过将 ModalViewController 放在第一个视图中是一个不错的方法。这可行，但我正在尝试将导航控件添加到 ModalViewController。我遇到以下问题：

**1 - 错误：在“AppDelegate”类型的对象上找不到属性“navigationController”**

**2 - 警告：使用不兼容类型“id”的表达式初始化“AppDelegate *”**

这是我的 ModalViewController 上的代码：

```
-(IBAction)signUpButtonTapped {
// i need to get the control for main navigation controller
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
[appDelegate.navigationController popToRootViewControllerAnimated:NO];
// create object from app main view to push it
SignUpViewController *signUpViewController = [[SignUpViewController alloc] initWithNibName:@"SignUpViewController" bundle:nil];
[AppDelegate.navigationController pushViewController:signUpViewController animated:YES]; } 
```

有人有想法么？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:42:32.137

**您的代码中有两个问题**

1) 使用类名访问 OBJECT。它必须是**appDelegate.nav...**（`a`对于解决 1 错误来说很小）

```
[appDelegate.navigationController pushViewController:signUpViewController animated:YES]; 
```

2）类型转换分配（用于解决2警告）

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

因此，您的完整工作代码必须为

```
-(IBAction)signUpButtonTapped {
  // i need to get the control for main navigation controller
  AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
  [appDelegate.navigationController popToRootViewControllerAnimated:NO];
  // create object from app main view to push it
  SignUpViewController *signUpViewController = [[SignUpViewController alloc] initWithNibName:@"SignUpViewController" bundle:nil];
  [appDelegate.navigationController pushViewController:signUpViewController animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:36:11.933

在您的代码中修改此行

```
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate]; 
```

作为

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

现在试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:36:42.710

AppDelegate 实例声明如下：

```
 AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate]; 
```

改变这个，你很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T06:46:12.890

1.确保您的 appDelegate 有一个`UINavigationController`名为`navigationController`.

2.代码的第 2 行： `AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];`

3.你的代码的最后一行： `[appDelegate.navigat....`
不是：
`[AppDelegate.navigatio....`

# spring - 如何使用 Spring MVC @PathVariable 制作动态 url 模式？

> ID：12067433
> 
> 赞同：1
> 
> 时间：2012-08-22T06:29:47.730
> 
> 标签：spring, spring-form

我正在做搜索功能。我在 jsp 视图上有一个搜索表单。

```
<form action="<c:url value="/community/board/list/search" />">
    <p class="serch_Area">
        <select name="searchCategory">
            <option value="subject" selected="selected">subject</option>
            <option value="contents">contents</option>
        </select>
        <input type="text" name="searchWord" class="inputCom" style="width:150px; height:17px;" value="" maxlength="15" />
        <input type="image" src="<c:url value="/resources/images/common/btn_search.gif" />" alt="search" />
    </p>
</form> 
```

我想提出请求 url 模式，如“/community/board/list/search/subject/abc”。但是这个表单操作 url 像“/community/board/list/search?subject=abc”我怎样才能使请求 url 模式像 RESTful？

这是我的控制器。

```
@RequestMapping("/list/search/{searchCategory}/{searchWord}/{pageNum}")
public String getSearchList(@PathVariable(value = "searchCategory") String searchCategory,
                            @PathVariable(value = "searchWord") String searchWord,
                            @PathVariable(value = "pageNum") int pageNum, ModelMap model) { 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:34:53.703

你可以用 JavaScript 做到这一点。您应该在表单上添加一个`onSubmit`侦听器并在该方法中更改表单操作。

# c++ - 将字符串拆分为标记 - 没有特定于操作系统的功能

> ID：12067434
> 
> 赞同：1
> 
> 时间：2012-08-22T06:29:54.960
> 
> 标签：c++, c, string, tokenize

> **可能重复：**
> [如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

strtok 函数不是线程安全的。Microsoft 具有 Windows 特定的 strtok_s 和 CString::Tokenize 安全函数。是否有跨平台 CRT/C++ 库方法可以做到这一点而无需手动编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:34:37.347

`boost::split`. [http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp)

使用示例

```
#include <vector>
#include <string>
#include <boost/algorithm/string.hpp>

int main()
{
   const std::string s = "hello and what";
   std::vector<std::string> v;
   boost::split(v, s, [](char c) { return c == ' '; }, boost::token_compress_on);
   for (const auto& str : v)
   {
      std::cout << str << std::endl;
   }
} 
```

[http://liveworkspace.org/code/3dfc9ee9c8497741f9976ac41a14a390](http://liveworkspace.org/code/3dfc9ee9c8497741f9976ac41a14a390)

或使用`boost::tokenizer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:34:15.567

的线程安全版本`strtok()`是`strtok_r()`. 它也[符合 POSIX 标准](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T06:46:58.677

实际上，`strtok()`通常是线程安全的（几乎任何支持多线程操作系统的运行时都将具有线程安全的`strtok()`）。`strtok()`不能用于以“交替”方式标记不同的字符串，但这种情况非常罕见，并且在您的代码控制之下。

然而，这就是说，`strtok_r()`它是一个常见的（尽管不是 C 标准的一部分 -[它是 POSIX](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)）变体，它可以让您保持对上下文的控制，以便您可以同时处理尽可能多的`strtok_r()`上下文。它不适用于 MSVC，但您可以在此处找到公共域实现：http: [//snipplr.com/view/16918/](http://snipplr.com/view/16918/)

# android - 运行android程序后模拟器挂起

> ID：12067435
> 
> 赞同：0
> 
> 时间：2012-08-22T06:30:01.180
> 
> 标签：android, android-emulator

我正在尝试在 android 模拟器上运行应用程序。显示带有图像的列表视图的应用程序。当我尝试运行应用程序时，如果我让模拟器空闲 1-2 分钟，它会在模拟器上很好地启动而不会出现任何警告或错误，它会挂起。它完全停止响应。Evert 时间我需要手动启动它，然后我可以再次运行应用程序。

我没有得到错误的地方，为什么我的模拟器会挂起。

我还面临一个问题，我设置了 minSdkVersion="8" 和 targetSdkVersion="16" 但是当我在低于 API 级别 16 的模拟器上运行它时，应用程序以黑白显示。

任何人都可以为此指导我。

非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:40:30.630

第一个问题：

尝试创建一个新的模拟器，尝试重新启动 eclipse，最后尝试更新所有的 ADT 和 SDK。最后，尝试关闭并重新打开计算机。

第二个问题：

在清单中设置主题。如果您不设置主题，它将默认为 API 级别默认值。holo 主题是在 Honeycomb 中引入的，因此 Honeycomb 下的所有内容通常看起来会有很大不同。

# javascript - 通过 vb.net 使用 javascript

> ID：12067439
> 
> 赞同：2
> 
> 时间：2012-08-22T06:30:28.687
> 
> 标签：javascript, vb.net-2010, registerstartupscript

我想通过 ScriptManager.RegisterStartupScript 方法写消息。但在此声明中出现错误。

```
my code
-------
ScriptManager.RegisterStartupScript(Me, Me.GetType, "temp", ("<script language='javascript'>alert(' No data in the database  ');</script>")), False)

error(in particular position)
-----
 , False)   error   -   end of the statement expected

 scriptmanager     Error 'System.Web.UI.Page.Friend ReadOnly Property ScriptManager As System.Web.UI.IScriptManager' is not accessible in this context because it is 'Friend'. 
```

帮助我纠正问题。我是 javascript 新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:39:08.267

奇怪的消息，您可以尝试以下操作：

```
System.Text.StringBuilder sb = new System.Text.StringBuilder();
sb.Append(@"<script language='javascript'>");
sb.Append(@"alert(' No data in the database  ');");
sb.Append(@"</script>");

If (Not ClientScript.IsStartupScriptRegistered("JSScript")) Then
        ClientScript.RegisterStartupScript(Me.GetType(), "JSScript", sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:32:22.430

这对我有用：

```
Dim js As String = "alert('TGIF!!.')"
ScriptManager.RegisterClientScriptBlock(Me.Page, Me.GetType, "popup", js, True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T21:09:02.487

我知道这是一个旧的步骤，但我想我会提到我在 2.0 中使用来自 .net 3.5 的代码时遇到了同样的问题，因此它正在寻找与我需要的不同的 ScriptManager 定义。

一旦我将项目更改为 3.5，它就可以正常工作。

# mysql - MYSQL - 从选择中删除

> ID：12067442
> 
> 赞同：2
> 
> 时间：2012-08-22T06:30:39.853
> 
> 标签：mysql, phpmyadmin

下面的查询给了我“#1093 - 您不能在 FROM 子句中指定目标表 'reservation_seats' 进行更新”错误。

```
DELETE 
FROM reservation_seats 
WHERE id IN ( SELECT id 
              FROM reservation_seats 
              WHERE reservation_id NOT IN ( SELECT id FROM reservation)
            ); 
```

表结构：

```
reservation_seats - id,reservation_id,seat_no
reservation       - id,txn_id,name......
reservation table(id) column is used as the foreign in the reservation_seats table.
(reservation.id = reservation_seats.reservation_id ) 
```

你能告诉我为什么会这样以及如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:32:06.610

在 MySQL 中，您不能从您选择的表中删除。尝试

```
DELETE FROM reservation_seats
WHERE id IN ( 
              select * from 
              (
                   SELECT id FROM reservation_seats
                   WHERE reservation_id NOT IN ( SELECT id FROM reservation)
              )
); 
```

无论如何都要欺骗MySQL。顺便说一句，这可以像这样变得更简单

```
DELETE FROM reservation_seats
WHERE reservation_id NOT IN ( SELECT id FROM reservation) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:35:11.243

你想删除没有任何保留的座位

```
DELETE FROM reservation_seats
WHERE  reservation_id NOT IN (SELECT id
                              FROM   reservation); 
```

# html - 如何解决 document.createelement('form').submit 和 &submit=Submit 之间的冲突

> ID：12067443
> 
> 赞同：0
> 
> 时间：2012-08-22T06:30:49.933
> 
> 标签：html, dom, javascript-events

以下代码创建一个必须以 &submit="Submit" 结尾的 POST 语句

不幸的是，这会与 DOM 表单对象产生冲突。

我无权访问 Web 应用程序，因为这是大学安全任务的一部分。我已经能够通过代理手动编辑数据并将元素添加到成功运行的 POST 正文中，但我希望能够通过自动代码完成这一切。

任何帮助将非常感激。

```
 <html>
<body>
<h1>
This page sends a HTTP POST request onload. </h1>
<script>
function post(url,fields) {
//create a <form> element.
var p = document.createElement('form');
//construct the form
p.action = url;
p.innerHTML = fields;
p.target = '_self';
p.method = 'post';
//append the form to this page
document.body.appendChild(p);
//submit the form
p.submit();
}
function csrf_hack() {
var fields;
// You should replace/augment the following lines with
// your form parameters
fields += "<input type='hidden' name='username' value='bob'>";
fields += "<input type='hidden' name='email' value='bob@seed.com'>";
fields += "<input type='hidden' name='cur_password' value=''>";
fields += "<input type='hidden' name='new_password' value=''>";
fields += "<input type='hidden' name='password_confirm' value=''>";
fields += "<input type='hidden' name='icq' value=''>";
fields += "<input type='hidden' name='aim' value=''>";
fields += "<input type='hidden' name='msn' value='456'>";
fields += "<input type='hidden' name='yim' value=''>";
fields += "<input type='hidden' name='website' value=''>";
fields += "<input type='hidden' name='location' value=''>";
fields += "<input type='hidden' name='occupation' value=''>";
fields += "<input type='hidden' name='interests' value='Hacking'>";
fields += "<input type='hidden' name='signature' value='Free spicy sauce @ www.getyourfreespicysauce.com'>";
fields += "<input type='hidden' name='viewemail' value='0'>";
fields += "<input type='hidden' name='hideonline' value='0'>";
fields += "<input type='hidden' name='notifyreply' value='0'>";
fields += "<input type='hidden' name='notifypm' value='1'>";
fields += "<input type='hidden' name='popup_pm' value='1'>";
fields += "<input type='hidden' name='attachsig' value='1'>";
fields += "<input type='hidden' name='allowbbcode' value='1'>";
fields += "<input type='hidden' name='allowhtml' value='0'>";
fields += "<input type='hidden' name='allowsmilies' value='1'>";
fields += "<input type='hidden' name='language' value='english'>";
fields += "<input type='hidden' name='style' value='1'>";
fields += "<input type='hidden' name='timezone' value='0'>";
fields += "<input type='hidden' name='dateformat' value='D M d, Y g:ia'>";
fields += "<input type='hidden' name='mode' value='editprofile'>";
fields += "<input type='hidden' name='agreed' value='true'>";
fields += "<input type='hidden' name='coppa' value='0'>";
fields += "<input type='hidden' name='sid' value='341942b39d0e2af257286aabd65b1e31'>";
fields += "<input type='hidden' name='user_id' value='4'>";
fields += "<input type='hidden' name='current_email' value='bob@seed.com'>";
//this causes p.submit to not be invoked
fields += "<input type='hidden' name='submit' value='Submit'>";

post('http://www.originalphpbb.com/profile.php',fields);

}
window.onload = function() { csrf_hack(); }
</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:33:18.120

在表单上创建一个输入`type="submit"`，将整个内容附加到页面，然后调用`.click()`按钮`type="submit"`。

```
function post(url, fields) {
    //create a <form> element.
    var p = document.createElement('form');
    //construct the form
    p.action = url;
    p.innerHTML = fields;
    p.target = '_self';
    p.method = 'post';
    //append the form to this page
    var s = document.createElement("input");
    s.type = "submit";
    p.appendChild(s);
    document.body.appendChild(p);
    //submit the form
    s.click();
} 
```

概念演示：http: [//jsfiddle.net/9dMxC/1/](http://jsfiddle.net/9dMxC/1/)

# c# - “太平洋标准时间（墨西哥）”和“太平洋标准时间”之间的差异

> ID：12067445
> 
> 赞同：0
> 
> 时间：2012-08-22T06:31:06.143
> 
> 标签：c#

单个偏移值有很多时区，这些时区对于单个偏移值是否有任何差异。如果是，那么如何区分这些。例如，在我的情况下，我需要为“-08:00”的偏移值返回“太平洋标准时间”，但我得到的是“太平洋标准时间（墨西哥）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:36:07.400

您无法仅根据偏移量进行区分；您需要更多信息。这种事情通常是不同地区夏令时规则不同的结果。

# machine-learning - 取多少主成分？

> ID：12067446
> 
> 赞同：46
> 
> 时间：2012-08-22T06:31:16.407
> 
> 标签：machine-learning, data-mining, svd

我知道主成分分析对矩阵进行 SVD，然后生成特征值矩阵。要选择主成分，我们只需要取前几个特征值。现在，我们如何确定应该从特征值矩阵中获取的特征值的数量？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-22T13:11:33.607

要决定保留多少个特征值/特征向量，您应该首先考虑您进行 PCA 的原因。您这样做是为了减少存储需求，减少分类算法的维数，还是出于其他原因？如果您没有任何严格的约束，我建议绘制特征值的累积和（假设它们按降序排列）。如果在绘图之前将每个值除以特征值的总和，那么您的绘图将显示保留的总方差与特征值数量的比例。然后，该图将很好地指示您何时达到收益递减点（即，通过保留额外的特征值获得的方差很小）。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-04T15:29:27.000

没有正确答案，它介于 1 和 n 之间。

将主要组成部分想象为您从未去过的城镇中的一条街道。您应该走多少条街道才能了解这座城市？

好吧，您显然应该参观主要街道（第一个组成部分），也许还应该参观其他一些大街道。您是否需要走遍每条街道才能充分了解这座城市？可能不是。

要完全了解这个小镇，你应该走遍所有的街道。但是，如果你可以参观，比如说 50 条街道中的 10 条，并且对小镇有 95% 的了解，那会怎样？这够好吗？

基本上，您应该选择足够多的组件来解释您所接受的足够多的方差。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-22T21:08:34.213

正如其他人所说，绘制解释的方差并没有什么坏处。

如果您使用 PCA 作为监督学习任务的预处理步骤，您应该交叉验证整个数据处理管道并将 PCA 维度的数量视为超参数，以使用最终监督分数的网格搜索（例如分类的 F1 分数）或 RMSE 进行回归）。

如果对整个数据集进行交叉验证的网格搜索成本太高，请尝试使用 2 个子样本，例如，一个具有 1% 的数据，第二个具有 10% 的数据，看看您是否为 PCA 维度得出相同的最佳值。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-22T08:42:33.717

有许多启发式方法用于此。

**例如，取前 k 个特征向量，它至少**捕获总方差的 85% 。

然而，对于高维，这些启发式方法通常不是很好。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-22T14:42:53.993

根据您的情况，通过在`ndim`维度上投影数据来定义最大允许相对误差可能会很有趣。

**Matlab 示例**

我将用一个小的 matlab 示例来说明这一点。如果您对它不感兴趣，请跳过代码。

我将首先生成一个包含恰好 100 个非零主成分的`n`样本（行）和特征的随机矩阵。`p`

```
n = 200;
p = 119;
data = zeros(n, p);
for i = 1:100
  data = data + rand(n, 1)*rand(1, p);
end 
```

该图像将类似于：

[![在此处输入图像描述](../Images/6fc4137c295447a0346c7c44e412c512.png)](https://i.stack.imgur.com/2P0Be.png)

对于此示例图像，可以通过将输入数据投影到`ndim`维度来计算相对误差，如下所示：

```
[coeff,score] = pca(data,'Economy',true);

relativeError = zeros(p, 1);
for ndim=1:p
    reconstructed = repmat(mean(data,1),n,1) + score(:,1:ndim)*coeff(:,1:ndim)';
    residuals = data - reconstructed;
    relativeError(ndim) = max(max(residuals./data));
end 
```

绘制维数（主成分）函数的相对误差，得到下图：

[![在此处输入图像描述](../Images/3d8f7b9626b2df5af193f62e811ce229.png)](https://i.stack.imgur.com/0cZvD.png)

根据此图，您可以决定需要考虑多少主成分。在这个理论图像中，100 个分量会产生精确的图像表示。所以，取超过 100 个元素是没有用的。例如，如果您想要最大 5% 的误差，您应该采用大约 40 个主成分。

**免责声明**：获得的值仅对我的人工数据有效。因此，不要在您的情况下盲目使用建议的值，而是执行相同的分析并在您犯的错误和您需要的组件数量之间进行权衡。

**代码参考**

*   迭代算法是基于源代码的[`pcares`](https://mathworks.com/help/stats/pcares.html)
*   一篇关于[StackOverflow 的帖子](https://stackoverflow.com/questions/30353432/dimensionality-reduction-in-matlab)`pcares`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-07T01:32:32.867

我强烈推荐 Gavish 和 Donoho 的以下论文：[*The Optimal Hard Threshold for Singular Values is 4/sqrt(3)*](http://arxiv.org/abs/1305.5870)。

我在[CrossValidated *(stats.stackexchange.com)*](https://stats.stackexchange.com/questions/44060/choosing-number-of-principal-components-to-retain/189645#189645)上发布了一个更长的总结。简而言之，他们在非常大的矩阵的限制下获得了一个最佳过程。该过程非常简单，不需要任何手动调整的参数，并且在实践中似乎效果很好。

他们在这里有一个很好的代码补充：[https ://purl.stanford.edu/vg705qn9070](https://purl.stanford.edu/vg705qn9070)

# c - 重定向到一个端口

> ID：12067447
> 
> 赞同：0
> 
> 时间：2012-08-22T06:31:17.250
> 
> 标签：c, sockets, redirect, iptables

我正在使用 iptables 将所有连接到我的路由器的客户端重定向到另一个端口（比如 8080）

```
iptables -t nat -A PREROUTING -p tcp -j REDIRECT --to-port 8080 
```

我正在运行一个二进制文件，它将客户端重定向到一个网站。说 www.google.com。我正在使用以下代码。

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <time.h> 

#include<stdlib.h>

int main(int argc, char *argv[])
{
int listenfd = 0, connfd = 0;
struct sockaddr_in serv_addr; 

char *reply = "HTTP/1.1 301 Moved Permanently\r\n"
    "Server: Apache/2.2.3/r/n"
    "Location: http://www.google.com\r\n"
    "Content-Length: 0\r\n"
    "Connection: close\r\n"
    "Content-Type: text/html; charset=UTF-8\r\n"
    "\r\n";

    char sendBuff[1025];
time_t ticks; 

listenfd = socket(AF_INET, SOCK_STREAM, 0);
memset(&serv_addr, '0', sizeof(serv_addr));
memset(sendBuff, '0', sizeof(sendBuff)); 

serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
serv_addr.sin_port = htons(8080); 

bind(listenfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr)); 

listen(listenfd, 10); 

while(1)
{
connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); 

printf("client connected\n");
send(connfd, reply, strlen(reply), 0);

close(connfd);
sleep(1);
}
} 
```

当我这样做时，客户端不会被重定向。它在客户端浏览器的地址栏中显示重定向的地址。并尝试了很长时间去 www.google.com。并以以下错误消息结束。

此页面未正确重定向。Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我已经修改了回复变量。即使现在它也没有按预期工作。我怎么解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:37:19.507

首先，换行符应该是`"\r\n"`. 其次，您没有正确终止标题，它应该是最后一个标题字段之后的换行符，然后是一个额外的空行。第三，您将`Content-Length`标头字段的长度设置为 1000 字节，这可能会使客户端期望回复的正文中应包含 1000 字节，但显然它没有。

# sql-server - 分区主从表

> ID：12067448
> 
> 赞同：6
> 
> 时间：2012-08-22T06:31:21.573
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, database-partitioning

我使用`SQL Server 2008 R2`并希望将主表和详细表一起分区。如何`MasterTypeID`在主表中按字段对详细表进行分区。

我的分区功能是：

```
CREATE PARTITION FUNCTION MasterTypeFN(int)
AS 
RANGE LEFT FOR VALUES (1,2,3) 
```

我的分区架构是：

```
CREATE PARTITION SCHEME MasterTypeScheme 
AS 
PARTITION MasterTypeFN 
TO ([FG1], [FG2], [FG3], [PRIMARY]) 
```

我的主表结构是：

```
CREATE TABLE [dbo].Master  
(
   [MasterID] [int] NOT NULL,
   [MasterTypeID] [int] NOT NULL,
   ...
) 
ON MasterTypeScheme (MasterTypeID) 
```

我的详细表结构是：

```
CREATE TABLE [dbo].Detail
(
   [DetailID] [int] NOT NULL,
   [MasterID] [int] NOT NULL,
   ...
) 
```

我想要关于主分区的分区详细信息表。换句话说，我想将主表记录和相关详细信息保存在一个文件组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:29:52.057

您应该`MasterTypeID`在 Detail 表中定义列并对其定义权限以禁用更新此列。并在表上创建触发器以将表中的列与表中的列`Master`同步。`MasterTypeID``Master``MasterTypeID``Detail`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:53:48.187

你想要的都是可能的。您需要将 的值复制`MasterTypeID`到表的每一行，`Detail`以便可以将分区函数应用于`Detail`。

创建一个新列`Detail.MasterTypeID`并适当地填充该列。在您的应用程序代码中或在数据库中使用触发器。

正确填充列后，您可以应用分区函数。

# c# - 查找名称中具有特定子字符串的文件

> ID：12067452
> 
> 赞同：4
> 
> 时间：2012-08-22T06:31:47.280
> 
> 标签：c#

我有一个这样的目录`"C:/Documents and Settings/Admin/Desktop/test/"`，其中包含很多 microsoft word office 文件。我的应用程序中有一个文本框和一个按钮。文件名是这样的`Date_Name_Number_Code.docx`。用户应输入此选项之一，我的目的是在整个文件名中搜索用户条目并找到并打开文件。谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T06:37:27.167

```
string name = textBox2.Text;
string[] allFiles = System.IO.Directory.GetFiles("C:\\");//Change path to yours
foreach (string file in allFiles)
    {
        if (file.Contains(name))
        {
            MessageBox.Show("Match Found : " + file);
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T07:02:40.987

天，

这是我使用的方法。您需要在表单上添加一个文本框 (txtSearch) 和一个按钮 (cmdGo)，然后连接适当的事件。然后你可以添加这个代码：

```
 private void cmdGo_Click(object Sender, EventArgs E)
    {
        //  txtSearch.Text = "*.docx";

        string[] sFiles = SearchForFiles(@"C:\Documents and Settings\Admin\Desktop\test", txtSearch.Text);
        foreach (string sFile in sFiles)
        {
            Process.Start(sFile);
        }
    }

    private static string[] SearchForFiles(string DirectoryPath, string Pattern)
    {
        return Directory.GetFiles(DirectoryPath, Pattern, SearchOption.AllDirectories);
    } 
```

此代码将启动并搜索根目录（您可以根据需要进行设置）以及此目录下的所有目录，以查找与文本框提供的搜索模式匹配的任何文件。您可以将此模式更改为您喜欢的任何内容：

*   *.docx 将查找所有扩展名为 .docx 的文件
*   *foogle* 将查找所有包含 foogle 的文件

我希望这有帮助。

干杯!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T06:35:52.260

您可以使用`Directory.GetFiles($path$).Where(file=>file.Name.Contains($user search string$)`.

*应该*为你工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T07:12:18.137

您可以使用[Directory.GetFiles(string, string)](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)在目录中搜索模式。因此，对于您的情况，这将类似于：

```
 string[] files =
          Directory.GetFiles("C:/Documents and Settings/Admin/Desktop/test/",
                              "Date_Name_Number_Code.docx"); 
```

然后通过`files`数组查找您要查找的内容。

# android - 谁能指导我如何使用 JSON 在两个位置之间获取 Google 路线

> ID：12067454
> 
> 赞同：1
> 
> 时间：2012-08-22T06:31:49.823
> 
> 标签：android, json, google-maps, kml

我听说 KML 文件自 2012 年 7 月 27 日起不再可用（因为谷歌已经改变了检索谷歌方向的结构，现在你只能通过 JSON 或 XML 获取它）所以请指导我如何在 2 个位置之间制作道路路线。

下面的代码运行良好 NW 享受伙计们这是我的代码：

我参考了这个链接：[http:](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/) //www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/ PlacesMapActivity.java

在下面的代码中，它显示了 2 点之间的直线。

```
public class PlacesMapActivity extends MapActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.map_places);
Intent i = getIntent(); // Getting intent data  
String user_latitude = i.getStringExtra("user_latitude");// Users current geo location
String user_longitude = i.getStringExtra("user_longitude");//Userscurrent geo location      
nearPlaces = (PlacesList) i.getSerializableExtra("near_places");// Nearplaces list
mapView = (MapView) findViewById(R.id.mapView);
mapView.setBuiltInZoomControls(true);
mapOverlays = mapView.getOverlays();
geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),                              (int) (Double.parseDouble(user_longitude) * 1E6));// Geopoint to place on map
geoPoint1 = new GeoPoint((int) (Double.parseDouble("12.930621") * 1E6),
            (int) (Double.parseDouble("77.581710") * 1E6));//Geopoint to Clientplace on map     
Drawable drawable_user = this.getResources()
    .getDrawable(R.drawable.mark_red);      // Drawable marker icon     
Drawable drawable_client = this.getResources() 
    .getDrawable(R.drawable.mark_blue);     // Drawable Client icon 
Drawable drawable = this.getResources()
    .getDrawable(R.drawable.clientflag);    // Drawable marker icon
// Map overlay item
itemizedOverlay = new AddItemizedOverlay(drawable_user, this);
overlayitem = new OverlayItem(geoPoint, "Your Location","That is you!");
itemizedOverlay.addOverlay(overlayitem);        
mapOverlays.add(itemizedOverlay);
itemizedOverlay.populateNow();      
// Map client overlay item
itemizedOverlay1 = new AddItemizedOverlay(drawable_client, this);       
overlayitem1 = new OverlayItem(geoPoint1, "Your Location2", "I am ur client!");
itemizedOverlay1.addOverlay(overlayitem1);              
mapOverlays.add(itemizedOverlay1);
itemizedOverlay1.populateNow();
// Map client overlay item  
itemizedOverlay = new AddItemizedOverlay(drawable, this);
mc = mapView.getController();

// These values are used to get map boundary area
// The area where you can see all the markers on screen
int minLat = Integer.MAX_VALUE;
int minLong = Integer.MAX_VALUE;
int maxLat = Integer.MIN_VALUE;
int maxLong = Integer.MIN_VALUE;

// check for null in case it is null
if (nearPlaces.results != null) {
// loop through all the places
for (Place place : nearPlaces.results) {
latitude = place.geometry.location.lat; // latitude
longitude = place.geometry.location.lng; // longitude
// Geopoint to place on map
geoPoin = new GeoPoint((int) (latitude * 1E6),
    (int) (longitude * 1E6));
// Map overlay item
overlayitem = new OverlayItem(geoPoin, place.name,
    place.vicinity);
itemizedOverlay.addOverlay(overlayitem);
// calculating map boundary area
minLat  = (int) Math.min( geoPoin.getLatitudeE6(), minLat );
minLong = (int) Math.min( geoPoin.getLongitudeE6(), minLong);
maxLat  = (int) Math.max( geoPoin.getLatitudeE6(), maxLat );
maxLong = (int) Math.max( geoPoin.getLongitudeE6(), maxLong );
}
mapOverlays.add(itemizedOverlay);

// showing all overlay items
itemizedOverlay.populateNow();
}
// Adjusting the zoom level so that you can see all the markers on map
mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong -     maxLong ));
// Showing the center of the map
mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
mc.animateTo(geoPoint1);
//mapView.postInvalidate();
myoverlay = new MyOverlay();
mapOverlays.add(myoverlay); 
}
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
MenuInflater menuInflater = getMenuInflater();
menuInflater.inflate(R.menu.activity_main, menu);
return true;
}
/**
* Event Handling for Individual menu item selected
* Identify single menu item by it's id
* */
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
switch (item.getItemId())
{
case R.id.mylocation:
// Single menu item is selected do something
Toast.makeText(PlacesMapActivity.this, "Moving To Current location",      Toast.LENGTH_SHORT).show();
// geoPoint.gpsCurrentLocation();
 return true;
case R.id.mapStreet:
Toast.makeText(PlacesMapActivity.this, "Map Normal Street View",   Toast.LENGTH_SHORT).show();
if(mapView.isSatellite()==true){
mapView.setSatellite(false);
}
return true;
case R.id.mapSatellite:
Toast.makeText(PlacesMapActivity.this, "Map Satellite View",  Toast.LENGTH_SHORT).show();
if(mapView.isSatellite()==false){
mapView.setSatellite(true);
}
return true;
default:
return super.onOptionsItemSelected(item);
}
}        
@Override
protected boolean isRouteDisplayed() {
return false;
}

add this road route
private void DrawPath(GeoPoint scrgeoPoint, GeoPoint destgeoPoint, GeoPoint destgeopointsearch, int green, MapView mMapView) {
     HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(makeUrl(scrgeoPoint, destgeoPoint, destgeopointsearch));
        HttpResponse response;
        try {
            response = httpclient.execute(httppost);

            HttpEntity entity = response.getEntity();
            InputStream is = null;

            is = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            reader.close();
            String result = sb.toString();
            JSONObject jsonObject = new JSONObject(result);
            JSONArray routeArray = jsonObject.getJSONArray("routes");
            JSONObject routes = routeArray.getJSONObject(0);
            JSONObject overviewPolylines = routes.getJSONObject("overview_polyline");
            String encodedString = overviewPolylines.getString("points");
            List<GeoPoint> pointToDraw = decodePoly(encodedString);
            mMapView.getOverlays().add(new MyOverLay(pointToDraw));
        } catch (ClientProtocolException e) {            
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

private List<GeoPoint> decodePoly(String encoded) {
     List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }
        return poly;
    }

private String makeUrl(GeoPoint scrgeoPoint, GeoPoint destgeoPoint, GeoPoint destgeopointsearch) {
    StringBuilder urlString = new StringBuilder();

    urlString.append("http://maps.googleapis.com/maps/api/directions/json");
    urlString.append("?origin=");// from
    urlString.append(Double.toString((double) scrgeoPoint.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString.append(Double.toString((double) scrgeoPoint.getLongitudeE6() / 1.0E6));

    urlString.append("&destination=");// to
    urlString.append(Double.toString((double) destgeoPoint.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString.append(Double.toString((double) destgeoPoint.getLongitudeE6() / 1.0E6));

   /* urlString.append("&destination=");// searchto
    urlString.append(Double.toString((double) destgeopointsearch.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString.append(Double.toString((double) destgeopointsearch.getLongitudeE6() / 1.0E6));
    */
    urlString.append("&sensor=false");

    Log.d("xxx", "URL=" + urlString.toString());
    return urlString.toString();
} 
```

最后我得到了两点之间的路线图..添加此代码。

```
class MyOverLay extends Overlay {
private int pathColor;
private final List<GeoPoint> points;
private boolean drawStartEnd;

public MyOverLay(List<GeoPoint> pointToDraw) {         
    this(pointToDraw, Color.MAGENTA, true);
}

public MyOverLay(List<GeoPoint> points, int pathColor, boolean drawStartEnd) {
    this.points = points;
    this.pathColor = pathColor;
    this.drawStartEnd = drawStartEnd;
}

private void drawOval(Canvas canvas, Paint paint, Point point) {
    Paint ovalPaint = new Paint(paint);
    ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    ovalPaint.setStrokeWidth(2);
    ovalPaint.setColor(Color.BLUE);
    int _radius = 6;
    RectF oval = new RectF(point.x - _radius, point.y - _radius,
            point.x + _radius, point.y + _radius);
    canvas.drawOval(oval, ovalPaint);
}

public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
    Projection projection = mapView.getProjection();
    if (shadow == false && points != null) {
        Point startPoint = null, endPoint = null;
        Path path = new Path();
        // We are creating the path
for (int i = 0; i < points.size(); i++) {
GeoPoint gPointA = points.get(i);
Point pointA = new Point();
projection.toPixels(gPointA, pointA);
if (i == 0) { // This is the start point
startPoint = pointA;
path.moveTo(pointA.x, pointA.y);
} else {
if (i == points.size() - 1)// This is the end point
                endPoint = pointA;
            path.lineTo(pointA.x, pointA.y);
        }
    }

    Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setColor(pathColor);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(5);
    paint.setAlpha(90);
    if (getDrawStartEnd()) {
        if (startPoint != null) {
            drawOval(canvas, paint, startPoint);
        }
        if (endPoint != null) {
            drawOval(canvas, paint, endPoint);
        }
    }
    if (!path.isEmpty())
        canvas.drawPath(path, paint);
}
return super.draw(canvas, mapView, shadow, when);
}

public boolean getDrawStartEnd() {
return drawStartEnd;
}

public void setDrawStartEnd(boolean markStartEnd) {
drawStartEnd = markStartEnd;
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:00:50.333

[您可以在此处](https://stackoverflow.com/a/11745316/1230123)查看我的帖子，其中包含自 Google 关闭 KML 以来如何在 JSON 中执行此操作的完整答案。

# ant - 为几个 Jenkins 作业编写 Ant 构建文件

> ID：12067458
> 
> 赞同：1
> 
> 时间：2012-08-22T06:32:00.260
> 
> 标签：ant, jenkins, phpunit

我正在使用 Jenkins 和 Ant 插件来运行 PHPUnit/Selenium 测试。我正在尝试设置几个 Jenkins 工作（我以前只有一份工作）。这些作业的测试在同一个 GitHub 存储库中，但在不同的文件夹中。所以，我可以在我的 build.xml 中创建不同的 Ant 目标，但是我是否需要为每个作业单独的 phpunit.xml 文件（如果需要，我如何在 Ant 构建脚本中指定文件名？）或者有没有办法让Ant区分同一个phpunit.xml文件中的测试？还有其他好方法吗？任何示例将不胜感激。

蚂蚁构建文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="MyProject" default="build">
<target name="build" depends="clean,prepare,phpunit"/>

 <target name="clean" description="Cleanup build artifacts">
  <delete dir="${basedir}/build"/>
 </target>

 <target name="prepare" description="Make log and coverage directories">
  <mkdir dir="${basedir}/build/logs"/>
  <mkdir dir="${basedir}/build/coverage_selenium"/>
 </target>

 <target name="phpunit" description="MyTests">
  <exec dir="${basedir}" executable="phpunit" failonerror="true"/>
 </target>

</project> 
```

phpunit.xml：

```
<phpunit>
  <testsuites>
     <testsuite name="MyTests">

          <file>path/to/test.php</file>

    </testsuite>
  </testsuites>
</phpunit> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:57:03.367

`-c`您可以使用或指定测试配置文件[`--configuration`](http://www.phpunit.de/manual/current/en/textui.html#textui.clioptions)。Ant [exec 任务](http://ant.apache.org/manual/Tasks/exec.html)允许您为要运行的进程指定参数，例如：

```
<exec dir="${basedir}" executable="phpunit" failonerror="true">
    <arg value="-c" />
    <arg value="php_unit_1.xml"/>
<exec> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:55:51.370

我建议为每个项目创建一个单独的`build.xml`和。`phpunit.xml`您可以在包含在每个中心中的中心中定义公共目标`build-base.xml`以避免重复。`phpunit.xml`不幸的是，我所知道的没有等效的机制。

# python - 多处理需要更长的时间？

> ID：12067459
> 
> 赞同：2
> 
> 时间：2012-08-22T06:32:04.583
> 
> 标签：python

我试图了解如何让孩子写入父母的变量。也许我在这里做错了什么，但我会想象多处理会花费它实际花费的时间的一小部分：

```
import multiprocessing, time

def h(x):
    h.q.put('Doing: ' + str(x))
    return x

def f_init(q):
    h.q = q

def main():
    q = multiprocessing.Queue()
    p = multiprocessing.Pool(None, f_init, [q])
    results = p.imap(h, range(1,5))
    p.close() 
```

- - -结果 - - -：

```
1
2
3
4
Multiprocessed: 0.0695610046387 seconds
1
2
3
4
Normal: 2.78949737549e-05 seconds # much shorter

    for i in range(len(range(1,5))):
        print results.next() # prints 1, 4, 9, 16

if __name__ == '__main__':
    start = time.time()
    main()
    print "Multiprocessed: %s seconds" % (time.time()-start)             

    start = time.time()
    for i in range(1,5):
        print i
    print "Normal: %s seconds" % (time.time()-start) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:55:35.130

@Blender 基本上已经回答了您的问题，但作为评论。有一些与`multiprocessing`机器相关的开销，所以如果你在没有做任何重要工作的情况下产生开销，它会变慢。

尝试实际做一些可以很好地并行化的工作。例如，编写 Python 代码打开一个文件，使用正则表达式扫描它，并拉出匹配的行；然后列出十个大文件，并计算使用多处理与普通 Python 完成所有十个文件所需的时间。或者编写代码来计算一个昂贵的函数并尝试一下。

我以前`multiprocessing.Pool()`只是运行一堆外部程序的实例。我曾经`subprocess`运行一个音频编码器，它一次运行四个编码器实例以显着加快速度。

# ios - 在报亭应用程序中，我如何找到订阅的设备列表？

> ID：12067463
> 
> 赞同：1
> 
> 时间：2012-08-22T06:32:14.817
> 
> 标签：ios, push-notification, newsstand-kit

我买不起 UrbanAirship，所以我正在尝试自己编写 Newsstand 应用程序的服务器端。

我计划使用 JavaPNS API。我似乎无法弄清楚的一件事是如何找到在我的应用程序中订阅的用户列表。

我可以通过某种方式从 Apple 查询这些信息吗？

如果我不能，那么我猜这意味着每次用户订阅时，他们都会将他们的设备令牌直接发送到我的服务器。我希望不是这样，因为我想在我的笔记本电脑上运行服务器并自己发送推送，而不必让笔记本电脑整天运行以监听新订户。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:00:54.310

看起来我确实需要在我的服务器上注册每个设备：http: [//www.ibm.com/developerworks/web/library/mo-ios-push/index.html#resources](http://www.ibm.com/developerworks/web/library/mo-ios-push/index.html#resources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:03:33.287

你找到了你的答案，但以防万一你真的需要一个服务器来处理推送通知（告诉你在报亭中的应用程序检查新问题并在后台下载它），而且还用于订阅和应用内购买.

每次启动应用程序时，您都应该在刷新 UI 之前检查一些事项。您应该检查用户是否是订阅者或用户已经购买了该问题，以便您可以显示查看/下载按钮而不是购买按钮。

如果它们有助于更好地理解这些通信，请查看这些教程，但相信我，您最终会使用 Urban Airship 之类的服务之一（我认为 UA 是最好的选择，因为它可以同时处理所有内容，而不仅仅是推送通知）：

[http://ios-blog.co.uk/tutorials/how-to-make-a-magazine-app-in-ios-part-i/](http://ios-blog.co.uk/tutorials/how-to-make-a-magazine-app-in-ios-part-i/)

这个更关注服务器部分：

[http://ios-blog.co.uk/tutorials/how-to-make-a-magazine-app-in-ios-part-ii/](http://ios-blog.co.uk/tutorials/how-to-make-a-magazine-app-in-ios-part-ii/)

[http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial)

[http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

和往常一样，这是最好的起点（它拥有您需要的一切）： [https ://developer.apple.com/devcenter/ios/newsstand/](https://developer.apple.com/devcenter/ios/newsstand/)

这些资源可以帮助您为报亭开发应用程序，但仍然没有足够的人来分享他们的经验。

祝你好运。

编辑：将这两个链接添加到此列表中：

[http://www.marco.org/2012/10/11/the-magazine](http://www.marco.org/2012/10/11/the-magazine)

[http://www.marco.org/2012/12/12/the-magazine-future-of-publishing](http://www.marco.org/2012/12/12/the-magazine-future-of-publishing)

# c# - DrawText在DrawingContext中的一个角度？

> ID：12067470
> 
> 赞同：4
> 
> 时间：2012-08-22T06:32:39.137
> 
> 标签：c#, wpf, drawingcontext, drawingvisual

因此，我使用以下代码获取现有图像，输入表单中的文本，然后将输入表单中的文本放置到现有图像上并将其另存为新图像：

```
using (FileStream output = new FileStream(match_outputFile, FileMode.Create))
{
    BitmapImage bitmap = new BitmapImage(new Uri(match_sourceFile, UriKind.Relative));
    DrawingVisual visual = new DrawingVisual();

    using (DrawingContext image = visual.RenderOpen())
    {
        image.DrawImage(bitmap, new Rect(0, 0, bitmap.PixelWidth, bitmap.PixelHeight));

        buildText(image, "text1", this.text1.Text);
        buildText(image, "text2", this.text2.Text);
        buildText(image, "text3", this.text3.Text);
    }

    RenderTargetBitmap target = new RenderTargetBitmap(bitmap.PixelWidth, bitmap.PixelHeight, bitmap.DpiX, bitmap.DpiY, PixelFormats.Default);
    target.Render(visual);

    BitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(target));
    encoder.Save(output);
} 
```

如您所见，它调用以下函数来绘制文本：

```
private void buildText(DrawingContext image, string settings, string input)
{
    string[] setting = (Properties.Settings.Default[settings].ToString()).Split(',');

    FormattedText text = new FormattedText(
        input,
        System.Globalization.CultureInfo.InvariantCulture,
        FlowDirection.LeftToRight,
        new Typeface(new FontFamily(setting[0]), FontStyles.Normal, FontWeights.Bold, FontStretches.Normal),
        Convert.ToDouble(setting[5]),
        (Brush) new BrushConverter().ConvertFromString(setting[4])
    );
    text.MaxTextWidth = Convert.ToDouble(setting[8]);
    text.MaxTextHeight = Convert.ToDouble(setting[9]);

    Point position = new Point(Convert.ToDouble(setting[7]), Convert.ToDouble(setting[6]));

    switch (setting[2])
    {
        case "center": position.X += (Convert.ToDouble(setting[8]) - text.Width) / 2; break;
        case "right": position.X += Convert.ToDouble(setting[8]) - text.Width; break;
    }

    switch (setting[3])
    {
        case "middle": position.Y += (Convert.ToDouble(setting[9]) - text.Height) / 2; break;
        case "bottom": position.Y += Convert.ToDouble(setting[9]) - text.Height; break;
    }

    image.DrawText(text, position);
} 
```

现在我需要的很简单......我需要从中心位置以某个角度绘制 text2（并且只有 text2）。中心位置很简单，应该是：

```
centerX = (setting[8] - setting[7]) / 2;
centerY = (setting[9] - setting[6]) / 2; 
```

那么，如果我想在中心位置旋转 -30 度角来绘制这个文本呢？请记住，我只想要旋转文本 2，而不是其他文本，也不是原始图像源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T07:17:36.803

在绘制文本之前，您可以简单地将[RotateTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform.aspx)[推到 DrawingContext 上。](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.pushtransform.aspx)绘制后，[弹出](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.pop)变换。

```
buildText(image, "text1", this.text1.Text);
image.PushTransform(new RotateTransform(angle, centerX, centerY));
buildText(image, "text2", this.text2.Text);
image.Pop();
buildText(image, "text3", this.text3.Text); 
```

# c# - 从匹配生成 RegEx

> ID：12067471
> 
> 赞同：2
> 
> 时间：2012-08-22T06:32:50.340
> 
> 标签：c#, regex

我想从给定的匹配中生成正则表达式模式
，例如我想`<b>\d+<\b>`从以下匹配数组中获取

`<b>1</b>
<b>2</b>
<b>3</b>
<b>4</b>
<b>5</b>
...`
有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:35:28.440

## 工具

从对类似问题的[回答](https://stackoverflow.com/a/776323/471214)中，以下链接可能会对您有所帮助：

> **[txt2re](http://www.txt2re.com/)**：在线正则表达式生成器。

## 理解

如果您寻求对主题的更深入理解而不是快速解决方案，您应该阅读以下问题的答案：**[计算机是否可以通过用户提供的示例“学习”正则表达式？](https://stackoverflow.com/q/616292/471214)**

## 编码

如果您想自己编写一个快速解决方案，**[这个答案](https://stackoverflow.com/a/12085500/471214)**值得一看。

## 笔记

正如有意义的**[笑话](https://stackoverflow.com/a/776330/471214)**所示，不要忘记**[计算机无法读懂您的想法](http://www.regexmagic.com/autogenerate.html)**，并且可以为相同的输入生成几个不同的正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T18:18:28.840

针对您的问题的基于遗传编程 (GP) 的解决方案：[Regex Generator++](http://regex.inginf.units.it)。它将一些示例作为输入，运行机器学习算法并生成与示例匹配的正则表达式作为输出。

在内部，系统试图通过进化算法来解决问题，这是一种受生物进化启发的计算范式。它随机生成许多可能的候选解决方案（在这种情况下：多个正则表达式），并为每个解决方案评估一个适应度度量，以及候选解决方案的性能指标。

有不同类型的进化算法，在这种情况下（GP），解决方案表示为抽象语法树。

您可以[在此处](http://regex.inginf.units.it/how.html)或[相关论文中找到更多详细信息](http://machinelearning.inginf.units.it/publications/international-journal-publications/automaticsynthesisofregularexpressionsfromexamples)

# php - 加载了一个 XML 文件响应，我现在如何从中获取数据？

> ID：12067474
> 
> 赞同：0
> 
> 时间：2012-08-22T06:32:56.703
> 
> 标签：php, xml, zend-framework

我收到了这个 XML 数据并将其 var_dumped。

我现在如何使用它并从内部获取其中一条记录？像 $this->{product}->name 等？

```
object(SimpleXMLElement)#189 (1) { ["products"]=> object(SimpleXMLElement)#188 (2) { ["@attributes"]=> array(3) { ["total-matched"]=> string(1) "3" ["records-returned"]=> string(1) "3" ["page-number"]=> string(1) "1" } ["product"]=> array(3) { [0]=> object(SimpleXMLElement)#206 (19) { ["ad-id"]=> string(8) "10581256" ["advertiser-id"]=> string(7) "2466656" ["advertiser-name"]=> string(18) "Everydaysource.com" ["advertiser-category"]=> string(21) "MP3 Accessories>Cases" ["buy-url"]=> string(245) "http://www.kqzyfj.com/click-4107027-10581256?url=http%3A%2F%2Fwww.everydaysource.com%2Fproduct%2Fsnap-on-case-compatible-with-apple-ipod-touch-4th-gen-colorful-zebra%2Fdapptoucco62%3Fesaffcojudtf120626%3Daf%2Bcj%2Bdapptoucco62&cjsku=DAPPTOUCCO62" ["catalog-id"]=> string(8) "cjo:2691" ["currency"]=> string(3) "USD" ["description"]=> string(57) "Compatible With Apple®:iPod touch® 4th Generation" ["image-url"]=> string(73) "http://cdn1.everydaysource.com/cdn2/110207/fb/28/d2/dapptoucco62_1_es.jpg" ["in-stock"]=> object(SimpleXMLElement)#98 (0) { } ["isbn"]=> object(SimpleXMLElement)#99 (0) { } ["manufacturer-name"]=> string(14) "EverydaySource" ["manufacturer-sku"]=> string(12) "DAPPTOUCCO62" ["name"]=> string(69) "Snap-on Case Compatible with Apple iPod Touch 4th Gen,Colorful Zebra" ["price"]=> string(4) "8.99" ["retail-price"]=> string(3) "0.0" ["sale-price"]=> string(3) "0.0" ["sku"]=> string(12) "DAPPTOUCCO62" ["upc"]=> string(12) "628569324674" } [1]=> object(SimpleXMLElement)#100 (19) { ["ad-id"]=> string(8) "10402409" ["advertiser-id"]=> string(7) "1636472" ["advertiser-name"]=> string(8) "Eforcity" ["advertiser-category"]=> string(21) "MP3 Accessories>Cases" ["buy-url"]=> string(233) "http://www.jdoqocy.com/click-4107027-10402409?url=http%3A%2F%2Fwww.eforcity.com%2Fsnap-on-case-compatible-with-apple-ipod-touch-4th-gen-colorful-zebra-dapptoucco62.html%3Fefaffcojudtf120626%3Daf%2Bcj%2Bdapptoucco62&cjsku=DAPPTOUCCO62" ["catalog-id"]=> string(8) "cjo:1136" ["currency"]=> string(3) "USD" ["description"]=> string(57) "Compatible With Apple®:iPod touch® 4th Generation" ["image-url"]=> string(68) "http://cdn1.eforcity.com/cdn2/110101/41/86/a3/dapptoucco62_1_efc.jpg" ["in-stock"]=> object(SimpleXMLElement)#99 (0) { } ["isbn"]=> object(SimpleXMLElement)#98 (0) { } ["manufacturer-name"]=> string(8) "eForCity" ["manufacturer-sku"]=> string(12) "DAPPTOUCCO62" ["name"]=> string(69) "Snap-on Case Compatible with Apple iPod Touch 4th Gen,Colorful Zebra" ["price"]=> string(4) "7.99" ["retail-price"]=> string(3) "0.0" ["sale-price"]=> string(3) "0.0" ["sku"]=> string(12) "DAPPTOUCCO62" ["upc"]=> string(12) "628569324674" } [2]=> object(SimpleXMLElement)#101 (19) { ["ad-id"]=> string(8) "10581247" ["advertiser-id"]=> string(7) "2466659" ["advertiser-name"]=> string(15) "iTrimming Corp." ["advertiser-category"]=> string(21) "MP3 Accessories>Cases" ["buy-url"]=> string(165) "http://www.dpbolvw.net/click-4107027-10581247?url=http%3A%2F%2Fwww.itrimming.com%2Fdapptoucco62.html%3Fitaffcojudtf120626%3Daf%2Bcj%2Bdapptoucco62&cjsku=DAPPTOUCCO62" ["catalog-id"]=> string(8) "cjo:2690" ["currency"]=> string(3) "USD" ["description"]=> string(57) "Compatible With Apple®:iPod touch® 4th Generation" ["image-url"]=> string(68) "http://cdn1.itrimming.com/cdn2/110301/c9/cc/33/dapptoucco62_1_it.jpg" ["in-stock"]=> object(SimpleXMLElement)#98 (0) { } ["isbn"]=> object(SimpleXMLElement)#99 (0) { } ["manufacturer-name"]=> string(9) "iTrimming" ["manufacturer-sku"]=> string(12) "DAPPTOUCCO62" ["name"]=> string(69) "Snap-on Case Compatible with Apple iPod Touch 4th Gen,Colorful Zebra" ["price"]=> string(4) "7.59" ["retail-price"]=> string(3) "0.0" ["sale-price"]=> string(3) "0.0" ["sku"]=> string(12) "DAPPTOUCCO62" ["upc"]=> string(12) "628569324674" } } } } 
```

相同的粘贴箱：http: [//pastebin.com/XYN8ysEG](http://pastebin.com/XYN8ysEG)

谢谢！

** 编辑 **

这是原始数据

```
object(SimpleXMLElement)#189 (1) {
  ["products"]=>
  object(SimpleXMLElement)#188 (2) {
    ["@attributes"]=>
    array(3) {
      ["total-matched"]=>
      string(1) "4"
      ["records-returned"]=>
      string(1) "4"
      ["page-number"]=>
      string(1) "1"
    }
    ["product"]=>
    array(4) {
      [0]=>
      object(SimpleXMLElement)#206 (19) {
        ["ad-id"]=>
        string(8) "10450940"
        ["advertiser-id"]=>
        string(7) "1427863"
        ["advertiser-name"]=>
        string(12) "Bookbyte.com"
        ["advertiser-category"]=>
        string(5) "Books"
        ["buy-url"]=>
        string(151) "http://www.anrdoezrs.net/click-4107027-10450940?url=http%3A%2F%2Fwww.bookbyte.com%2Fproduct.aspx%3Fisbn%3D1576751740%26noredirect%3Dtrue&cjsku=13671976"
        ["catalog-id"]=>
        string(8) "cjo:1574"
        ["currency"]=>
        string(3) "USD"
        ["description"]=>
        string(34) "This book is in Like New condition"
        ["image-url"]=>
        object(SimpleXMLElement)#77 (0) {
        }
        ["in-stock"]=>
        object(SimpleXMLElement)#74 (0) {
        }
        ["isbn"]=>
        string(10) "1576751740"
        ["manufacturer-name"]=>
        object(SimpleXMLElement)#75 (0) {
        }
        ["manufacturer-sku"]=>
        object(SimpleXMLElement)#72 (0) {
        }
        ["name"]=>
        string(53) "Leadership and Self Deception: Getting Out of the Box"
        ["price"]=>
        string(4) "13.5"
        ["retail-price"]=>
        string(5) "14.95"
        ["sale-price"]=>
        string(3) "0.0"
        ["sku"]=>
        string(8) "13671976"
        ["upc"]=>
        object(SimpleXMLElement)#73 (0) {
        }
      }
      [1]=>
      object(SimpleXMLElement)#78 (19) {
        ["ad-id"]=>
        string(8) "10450940"
        ["advertiser-id"]=>
        string(7) "1427863"
        ["advertiser-name"]=>
        string(12) "Bookbyte.com"
        ["advertiser-category"]=>
        string(5) "Books"
        ["buy-url"]=>
        string(148) "http://www.jdoqocy.com/click-4107027-10450940?url=http%3A%2F%2Fwww.bookbyte.com%2Fproduct.aspx%3Fisbn%3D1576751740%26noredirect%3Dtrue&cjsku=1084348"
        ["catalog-id"]=>
        string(8) "cjo:1574"
        ["currency"]=>
        string(3) "USD"
        ["description"]=>
        string(41) "This book is in New - Excellent condition"
        ["image-url"]=>
        object(SimpleXMLElement)#73 (0) {
        }
        ["in-stock"]=>
        object(SimpleXMLElement)#72 (0) {
        }
        ["isbn"]=>
        string(10) "1576751740"
        ["manufacturer-name"]=>
        object(SimpleXMLElement)#75 (0) {
        }
        ["manufacturer-sku"]=>
        object(SimpleXMLElement)#74 (0) {
        }
        ["name"]=>
        string(53) "Leadership and Self Deception: Getting Out of the Box"
        ["price"]=>
        string(5) "11.21"
        ["retail-price"]=>
        string(5) "14.95"
        ["sale-price"]=>
        string(3) "0.0"
        ["sku"]=>
        string(7) "1084348"
        ["upc"]=>
        object(SimpleXMLElement)#77 (0) {
        }
      }
      [2]=>
      object(SimpleXMLElement)#79 (19) {
        ["ad-id"]=>
        string(8) "10450940"
        ["advertiser-id"]=>
        string(7) "1427863"
        ["advertiser-name"]=>
        string(12) "Bookbyte.com"
        ["advertiser-category"]=>
        string(5) "Books"
        ["buy-url"]=>
        string(148) "http://www.kqzyfj.com/click-4107027-10450940?url=http%3A%2F%2Fwww.bookbyte.com%2Fproduct.aspx%3Fisbn%3D1576751740%26noredirect%3Dtrue&cjsku=12530742"
        ["catalog-id"]=>
        string(8) "cjo:1574"
        ["currency"]=>
        string(3) "USD"
        ["description"]=>
        string(34) "This book is in Like New condition"
        ["image-url"]=>
        object(SimpleXMLElement)#77 (0) {
        }
        ["in-stock"]=>
        object(SimpleXMLElement)#74 (0) {
        }
        ["isbn"]=>
        string(10) "1576751740"
        ["manufacturer-name"]=>
        object(SimpleXMLElement)#75 (0) {
        }
        ["manufacturer-sku"]=>
        object(SimpleXMLElement)#72 (0) {
        }
        ["name"]=>
        string(53) "Leadership and Self Deception: Getting Out of the Box"
        ["price"]=>
        string(5) "29.25"
        ["retail-price"]=>
        string(5) "14.95"
        ["sale-price"]=>
        string(3) "0.0"
        ["sku"]=>
        string(8) "12530742"
        ["upc"]=>
        object(SimpleXMLElement)#73 (0) {
        }
      }
      [3]=>
      object(SimpleXMLElement)#76 (19) {
        ["ad-id"]=>
        string(8) "10586024"
        ["advertiser-id"]=>
        string(7) "2172304"
        ["advertiser-name"]=>
        string(5) "Chegg"
        ["advertiser-category"]=>
        string(45) "Media > Books > Non-Fiction > Education Books"
        ["buy-url"]=>
        string(116) "http://www.dpbolvw.net/click-4107027-10586024?url=http%3A%2F%2Fwww.chegg.com%2Fdetails%2F1576751740&cjsku=1576751740"
        ["catalog-id"]=>
        string(8) "cjo:2718"
        ["currency"]=>
        string(3) "USD"
        ["description"]=>
        string(584) "The disease of self-deception (acting in ways contrary to what one knows is right) underlies all leadership problems in today&#39;s organizations, according to the premise of this work. However well intentioned they may be, leaders who deceive themselves always end up undermining their own performance.This straightforward book explains how leaders can discover their own self-deceptions and learn how to escape destructive patterns. The authors demonstrate that breaking out of these patterns leads to improved teamwork, commitment, trust, communication, motivation, and leadership."
        ["image-url"]=>
        string(53) "http://c.chegg.com/covers2/10000/15246_1307127219.jpg"
        ["in-stock"]=>
        object(SimpleXMLElement)#73 (0) {
        }
        ["isbn"]=>
        string(10) "1576751740"
        ["manufacturer-name"]=>
        string(9) "chegg.com"
        ["manufacturer-sku"]=>
        object(SimpleXMLElement)#72 (0) {
        }
        ["name"]=>
        string(29) "Leadership and Self-Deception"
        ["price"]=>
        string(4) "9.99"
        ["retail-price"]=>
        string(5) "15.95"
        ["sale-price"]=>
        string(3) "0.0"
        ["sku"]=>
        string(10) "1576751740"
        ["upc"]=>
        string(13) "9781576751749"
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:39:22.497

它们是对象（SimpleXMLElement）

```
$result->products->product[0]->name 
```

# java - 自定义键对象是否应该是不可变的？如果是，那为什么？

> ID：12067475
> 
> 赞同：0
> 
> 时间：2012-08-22T06:33:00.073
> 
> 标签：java, collections, immutability

好的，我想将自定义用户定义的对象作为我的键`HashMap`而不是 say `String`。候选对象应该是不可变的吗？我在某处读到最好的做法是使它们不可变，但我自己无法弄清楚原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T06:37:17.933

如果您在 HashMap 中有一个可变键，那么它将最终进入错误的存储桶，这完全破坏了 Map。

1.  插入键，hashCode() 被调用，桶分配
2.  改变key，hashCode改变，不再匹配bucket
3.  通过（新）键查找，hashCode() 导致错误的存储桶，找不到值
4.  通过（旧）键查找，hashCode（）导致“正确”存储桶，但现在找到的键不再存在`equal`（因为它现在是“新”键），所以它也被丢弃

如果您在 TreeMap 中有一个可变键，那么它将最终位于树的错误位置，该位置应该被排序（并且发生在插入时）。基本上和上面的流程一样。

而且由于我们喜欢这里的明喻，这就像用魔术笔在现有电话簿中更改您的名字而不打印一整本新书：所以您的新名字“Smith”仍将列在“John”和“Johnston”之间（其中没有人会寻找它），也没有人会在“Smart”和“Smithers”（他们正在寻找它的地方）之间找到它。TreeMap 就像电话簿一样工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T06:34:29.337

是的，它们应该是不可变的，因为如果可以更改它们，它们就不能很好地用作键。想象一下为你的房子买了一把锁和钥匙，然后决定你想通过把它锤成不同的形状来让它更漂亮。它不会很好地工作，不是吗？同样的原则也适用于此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:38:32.457

是的。如果您从其他地方更新密钥，那么您将无法再查找为该密钥存储的值。

# c - 使用 fread 函数读取二进制文件时出现问题

> ID：12067480
> 
> 赞同：0
> 
> 时间：2012-08-22T06:33:19.963
> 
> 标签：c, stdin, fread

我想要做的是读取“.d”二进制文件的内容并将它们存储在一个数组中。所以我写了以下代码：

```
void viewFile()
{
   unsigned char inFileData[SIZE];
   char fileName[SIZE];
   int numRead;

   FILE *inBinFile;

    printf("Enter the file name:");
    scanf("%s", fileName);

    inBinFile = fopen( fileName, "rb");
        if(( inBinFile = fopen(fileName, "rb")) == NULL )
        {
           fprintf( stderr, "Error opening %s\n", fileName );
           clearStdin();/*a function to clear stdin*/
           mainMenu();/*a function to prompt user input*/
        }
    numRead = fread( inFileData, sizeof(unsigned char), SIZE, inBinFile );
    inFileData[SIZE] = '\0';

    printf("U coded data:\n%s\n", inFileData);
    printf("%d\n", numRead);

    fclose(inBinFile);
   return;
} 
```

输出是一堆不可读的垃圾。我做错了哪一部分？我不明白。

另外，我写了我的 clearStdin 函数如下：

```
void clearStdin(void)
{
    scanf("%*[^\n]");
    scanf("%*1[\n]");
   return;
} 
```

编译器没有报告任何错误，但不知何故，函数调用似乎并没有完全按照我想要的方式工作。它确实清除了标准输入，但在调用此函数的任何地方都会出现错误，例如，提示用户输入的 mainmenu 函数。

请帮忙！！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:37:36.787

“输出是一堆不可读的垃圾” - 是的，它*会*的。它是一个二进制文件，并不意味着可以作为文本读取。

如果您想以可读形式查看二进制信息，请考虑对其进行十六进制转储。

请参阅[此处](https://stackoverflow.com/questions/2376915/how-to-print-out-the-memory-contents-of-a-variable-in-c/2377115#2377115)了解执行此操作的方法。

# asp.net - ASP.net 中的两个数据集 SQL 查询

> ID：12067482
> 
> 赞同：0
> 
> 时间：2012-08-22T06:33:31.503
> 
> 标签：asp.net, sql

我正在尝试在我的 asp 页面上的网格内显示一个网格。
我有两个数据集，主数据集和子数据集

```
<asp:SqlDataSource ID="mainDS"
SelectCommand="SELECT [client_ID], [client_Name],[client_Phone],
[client_Description],[client_Devices_Type],[client_Remarks],
[client_Email] FROM [Client_Company]"

<asp:SqlDataSource ID="subDS" .........
SelectCommand="SELECT [cp_ID], [cp_Name], [cp_Phone], [cp_Email] 
FROM [contact_Person] WHERE [cp_companyID]=?????? " 
```

`cp_companyID`是来自的外键`client_ID`，我只需要选择与客户相关的联系人，我所拥有的显示所有客户的所有联系人

我怎样才能将两者联系起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:02:57.000

查看`DataSource`参数 - 可能是`ControlParameter`- 取决于您如何选择公司来显示联系人

[http://msdn.microsoft.com/en-us/library/z72eefad(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/z72eefad(v=vs.100).aspx)

# dialog - 在 ObjectListView 中自动显示一个对话框，wxpython

> ID：12067502
> 
> 赞同：0
> 
> 时间：2012-08-22T06:34:56.457
> 
> 标签：dialog, wxpython, objectlistview

我在 ObjectListView 中遇到问题。当我选择一些对象或使用复选框来选择它们时，这些对象上的函数将通过按下按钮并利用 GetCheckedObjects() 来调用。 ![在此处输入图像描述](../Images/0f0eb5e29d2a258d7988549f7716b6dd.png)

当我选择或检查这样的对象时，是否可以自动显示对话框？ ![在此处输入图像描述](../Images/8a53baae8acf381057a7304ca465a810.png)

如果 ObjectListView 不支持该功能，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:31:05.407

根据[this previous SO question](https://stackoverflow.com/questions/7576067/wxpython-wx-evt-list-item-selected-not-working-when-same-item-is-clicked-twice-i)，当用户点击a时触发的事件与a`ObjectListView`相同`wx.ListCtrl`，即`wx.EVT_LIST_ITEM_SELECTED`。

所以你需要做的就是创建你的对话框（[这里](http://zetcode.com/wxpython/dialogs/)和[这里](http://wiki.wxpython.org/AnotherTutorial/#Custom_dialogs)的教程）然后绑定一个函数来`wx.EVT_LIST_ITEM_SELECTED`启动你的对话框。

# haskell - Haskell pattern matching on GADTs with Data Kinds

> ID：12067503
> 
> 赞同：15
> 
> 时间：2012-08-22T06:35:07.260
> 
> 标签：haskell, pattern-matching, gadt, data-kinds

I have found that I really like combining GADTs with Data Kinds, as it gives me further type safety than before (for most uses, almost as good as Coq, Agda et al.). Sadly, pattern matching fails on the simplest of examples, and I could think of no way to write my functions except for type classes.

Here's an example to explain my sorrow:

```
data Nat = Z | S Nat deriving Eq

data Le :: Nat -> Nat -> * where
    Le_base :: Le a a
    Le_S :: Le a b -> Le a (S b)

class ReformOp n m where
    reform :: Le (S n) (S m) -> Le n m

instance ReformOp a a where
    reform Le_base = Le_base

instance ReformOp a b => ReformOp a (S b) where
    reform (Le_S p) = Le_S $ reform p

class TransThm a b c where
    trans :: Le a b -> Le b c -> Le a c

instance TransThm a a a where
    trans = const

instance TransThm a a b => TransThm a a (S b) where
    trans Le_base (Le_S p) = Le_S $ trans Le_base p

instance (TransThm a b c, ReformOp b c) => TransThm a (S b) (S c) where
    trans (Le_S p) q = Le_S $ trans p $ reform q 
```

We have 2 type classes (one for the theorem, one for a utility operation) and 5 instances - just for a trivial theorem. Ideally, Haskell could look at this function:

```
-- not working, I understand why
trans :: Le a b -> Le b c -> Le a c
trans Le_base Le_base = Le_base
trans Le_base (Le_S p) = Le_S $ trans Le_base p
trans (Le_S p) q = Le_S $ trans p $ reform q 
```

And type-check each clause on its own, and per-call decide which cases are possible (thus worth trying to match) and which are not, so when calling `trans Le_base Le_base` Haskell will notice that only the first case allows for the three variables to be the same, and only attempt matching on the first clause.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T07:23:45.677

I don't see how your pattern-matching definition of `trans` would work in Agda or Coq.

If you write the following instead, it works:

```
reform :: Le (S n) (S m) -> Le n m
reform Le_base         = Le_base
reform (Le_S Le_base)  = Le_S Le_base
reform (Le_S (Le_S p)) = Le_S (reform (Le_S p))

trans :: Le a b -> Le b c -> Le a c
trans Le_base  q        = q
trans (Le_S p) Le_base  = Le_S p
trans (Le_S p) (Le_S q) = Le_S (trans p (reform (Le_S q))) 
```

Of course, you could also more directly define:

```
trans :: Le a b -> Le b c -> Le a c
trans p Le_base  = p
trans p (Le_S q) = Le_S (trans p q) 
```

# javascript - 将目标从 li 更改为 jQuery 中的类

> ID：12067505
> 
> 赞同：1
> 
> 时间：2012-08-22T06:35:10.883
> 
> 标签：javascript, jquery, jquery-ui

`div`我目前有这个代码，我拼凑在一起，用连接它们的画线完成拖放。

[http://jsfiddle.net/GnY34/](http://jsfiddle.net/GnY34/)

但是我根本不想使用`li`s 。我宁愿将它直接附加到`div`s （类`circle`）。

我不确定我需要改变什么才能做到这一点？我尝试的一切都打破了它..

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:41:39.597

只需更新`"li"`到`"div"`您的`updateCanvas`功能。

```
$("div", this).each(function() { 
```

[演示](http://jsfiddle.net/na8Qz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:50:19.737

您只是不需要内部循环（每个）。

源包括从元素中间开始抚摸的线条。 [http://jsfiddle.net/GnY34/2/](http://jsfiddle.net/GnY34/2/)

# objective-c - 在 iPad 上隐藏 UITableView 的第一个单元格

> ID：12067506
> 
> 赞同：0
> 
> 时间：2012-08-22T06:35:26.923
> 
> 标签：objective-c, uitableview

我有一个包含各种条目的 TableView。有时我需要向下滚动，有时只有几个条目，所以一切都是可见的。

我想要我的第一个单元格中的一些设置和过滤器，但它不应该是可见的，只有当用户向下滚动时。

我的尝试：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    float rowHeight = [self tableView:self.tableView heightForRowAtIndexPath:indexPath];
    self.tableView.contentOffset = CGPointMake(0, rowHeight);
} 
```

和

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTopanimated:NO];

} 
```

两者都没有工作。

对我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:05:07.037

你在寻找这样的东西吗？

```
[self.tableView setContentInset:UIEdgeInsetsMake(t,l,b,r)]; 
```

这将改变`tableView`你想要的任何方式，但你绝对可以向后滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:16:43.597

在 TableView 委托方法中尝试您的逻辑

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    静态 NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    如果（单元格 == 零）
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    if (indexPath.row == 0) {
        //你的过滤器在这里
    }
    别的 {
        //显示单元格
    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    返回单元格；
}

```

此外，如果您不希望显示第一个单元格，只需编写

```
返回零；//对于 indexpath.row 的条件 == 0

```

并调整行的高度

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    if (section == 0 && isDisplayThisSection) {//第一次可见

        UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 5, 320, 25)] autorelease];

        UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(17, 10, 300, 25)];

        [titleLabel setFont:[UIFont boldSystemFontOfSize:17.0]];

        titleLabel.text = @"临时测试";

        [titleLabel setBackgroundColor:[UIColor clearColor]];

        [headerView addSubview:titleLabel];

        [标题标签发布]；

        [headerView setBackgroundColor:[UIColor clearColor]];

        返回标题视图；

    }
    return [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)] autorelease];

}

```

将值设置为 0

希望这有帮助！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T07:02:54.403

在 TableView 委托方法中尝试您的逻辑

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    静态 NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    如果（单元格 == 零）
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    if (indexPath.row == 0) {
        //你的过滤器在这里
    }
    别的 {
        //显示单元格
    }
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    返回单元格；
}

```

此外，如果您不希望显示第一个单元格，只需编写

```
返回 ; //对于 indexpath.row 的条件 == 0

```

并调整行的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;

```

将值设置为 0

如果你想像 Pull_to_Refresh 那样实现，你最好把你的逻辑写在

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section;

```

希望这有帮助！！

# ios - 每 2 次点击，步进值增加一次

> ID：12067507
> 
> 赞同：0
> 
> 时间：2012-08-22T06:35:28.213
> 
> 标签：ios, uitableview, uistepper

我正在使用带有步进器和标签的自定义表格视图单元格。但是当我检查步进器的值时，它每 2 次按下只会增加一次。问题是什么？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cellData";
    ItemCell *cell = [self.myTableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[ItemCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    cell.stepper.tag = indexPath.row;
    cell.countLabel.text = [NSString stringWithFormat:@"%g",cell.stepper.value];
    NSLog(@"value = %g",cell.stepper.value);
    cell.itemLabel.text = [self.groceryItems objectAtIndex:indexPath.row];
    return cell;
}

- (IBAction)valueChanged:(id)sender
{
    UIStepper *step = sender;
    NSIndexPath *index = [NSIndexPath indexPathForRow:step.tag inSection:0];
    NSArray *rowsToReload = [NSArray arrayWithObject:index];
    [self.myTableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:48:14.137

尝试将此添加到您的 valueChanged 方法中：

```
[self.myTableView beginUpdates];
[self.myTableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:NO];
[self.myTableView endUpdates]; 
```

# c# - Windows 服务中的 Signalr .net 客户端

> ID：12067508
> 
> 赞同：2
> 
> 时间：2012-08-22T06:35:33.040
> 
> 标签：c#, .net, signalr, signalr-hub

我在 Windows 服务中遇到了 .net 客户端的问题。一段时间后它冻结了。

用例是这样的。

用户将一个或多个文件上传到我们的网站。该服务检测到这一点并开始处理文件，在处理开始和结束时向网站发送信号。

该服务每 10 秒检查一次新文件。在此迭代中，我们与服务器建立新连接并再次停止它，大多数情况下没有发送任何消息。

我怀疑连接/断开连接是造成这种情况的原因。在服务启动时打开连接然后在每次迭代中使用这个连接会更好吗？该服务必须能够在不重新启动的情况下运行数月。

# c# - 通过 c#.net 代码 reg 运行 bat 文件

> ID：12067509
> 
> 赞同：0
> 
> 时间：2012-08-22T06:35:39.587
> 
> 标签：c#, .net, batch-file

我在c#中通过dotnet运行了bat文件如下

```
Process p = new Process();
                p.StartInfo.UseShellExecute = false;
                p.StartInfo.RedirectStandardOutput = true;
                p.StartInfo.FileName = "d://s.bat";
                p.Start();
                string output = p.StandardOutput.ReadToEnd();
                p.WaitForExit(); 
```

它在通过 dotnet ide 运行时工作正常。

但我的问题是，当我通过 IIS 发布后运行上述代码时，它会返回错误为

> StandardOut-has-not-been-redirected-或-the-process-hasn-t-started-yet。

你能给我一些指导方针来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:40:45.793

你必须使用`RedirectStandardOutput = true`. 来自[MSDN的链接](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)

引用链接：

> ProcessStartInfo.RedirectStandardOutput 属性 获取或设置一个值，该值指示应用程序的输出是否写入 Process.StandardOutput 流。

当我确保我们的服务器正在启动时，从我的问题到同一个问题的片段。

```
if (IsProcessRunning(ServerProcessName)) { return; }
        var p = new Process
        {
            StartInfo = new ProcessStartInfo
                            {
                                FileName = path,
                                RedirectStandardOutput = true, 
                                UseShellExecute = false
                            }
        };
        p.Start();
        var a = "";
        while (!a.Contains("ServicesStarted"))
        {
            a = p.StandardOutput.ReadLine();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:40:45.917

这样做，以克服错误： -

```
StringBuilder content = new StringBuilder();
while ( ! p.HasExited ) {
    content.Append(p.StandardOutput.ReadToEnd());
}
string output = content.ToString(); 
```

# java - 如何解决狡猾的：声纳中未经检查/未经确认的演员？

> ID：12067510
> 
> 赞同：3
> 
> 时间：2012-08-22T06:35:42.597
> 
> 标签：java, eclipse, exception, sonarqube, findbugs

我在以下代码中通过声纳获取异常。我该如何解决这个问题。建议我。

```
 @Override 
     public boolean validate(BaseInfo infoObject) { 
     boolean isValid = true; 
     AckTransferPaymentInfo ackTransferPaymentInfo = (AckTransferPaymentInfo) infoObject; 
```

Dodgy - 未经检查/未经确认的演员
表 未经检查/未经确认的演员表从 com.vocalink.acsw.common.validation.info.BaseInfo 到 com.vocalink.acsw.common.validation.info.AckTransferPaymentInfo 在 com.vocalink.acsw.validation.rule.T170Rule .validate(BaseInfo)

```
AckTransferPaymentElement payment = ackTransferPaymentInfo.getTransferPayment();  
if(CreditDebitIndicator.CRDT.equals(ackTransferPaymentInfo.getCreditDebitIndicator()) 
&& ackTransferPaymentInfo.getOriginalPaymentAccount().getAccountName() != null 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T21:18:04.957

您可以检查 infoObject 的类型是否正确，并在不正确时对其进行适当处理：

```
if (!(infoObject instanceof AckTransferPaymentInfo)) {
    throw new AssertionError("Unexpected type: " + infoObject);
}
AckTransferPaymentInfo ackTransferPaymentInfo = (AckTransferPaymentInfo) infoObject; 
```

当 infoObject 为空时，您应该验证这是否符合您的要求。

# html - 构建html5页面采用什么statagy？

> ID：12067514
> 
> 赞同：0
> 
> 时间：2012-08-22T06:36:01.113
> 
> 标签：html

HTML5 的特性无疑非常引人注目，但现在是开始使用 HTML5 开发的好时机吗？

我刚刚开始使用 HTML5 进行开发，当时意识到并非所有浏览器都支持所有 HTML5 输入类型。这意味着它不确定输入表单等基本内容。

请分享您是如何管理这些事情的？（在当前支持 HTML5 的浏览器中使用 HTML5 代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:41:41.780

HTML 5 仍在开发中，因此您必须小心。某些功能，例如更基本的功能，如`<header>`和`<footer>`，在最终发布之前不太可能更改。doctype decleration 不太可能改变。我不会依赖多媒体支持，因为支持的格式因浏览器而异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:46:51.250

看看[这篇维基百科文章](https://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28HTML_5%29)中的表格。关于当前支持 HTML5 的哪些部分，浏览器之间存在很大差异。[该网站](https://html5test.com/)测试您的网络浏览器以查看它支持哪些功能，因此请在您的计算机上安装一堆不同的浏览器并自己测试它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T06:47:03.043

与所有跨浏览器开发一样，您永远不能依赖浏览器中的任何支持。如果您针对较旧的浏览器，则不要依赖 HTML5 功能。*我在旧浏览器中使用 HTML5文档*类型没有问题，但特定功能可能会很麻烦——例如，您可以使用`<header>`元素，但 IE 不会让您以任何方式设置它们的样式，因为它将`header`样式视为无效。

只要您需要支持足够旧的浏览器，就永远不是开始使用 HTML5 的好时机。决定是否可以使用 HTML5 的唯一因素是您要支持哪些浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T07:17:27.837

HTML5 比以前的要容易得多，它已经在输入字段中开发了分配，尽管它仍在开发中，尚未完成。

你可以在这里查看[http://html5test.com/](http://html5test.com/)哪个浏览器支持 HTML5 多少？目前，Chrome 是最好的支持 HTML5 的浏览器。

-谢谢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T07:38:28.843

HTML5 的发展势头强劲，如果您还没有开始，这确实是一个很好的开始时间。

在最低级别，您需要在页面中编写功能检测，以查看特定浏览器是否支持您要使用的 HTML5 功能。

我建议如下：

*   使用[caniuse.com](http://www.caniuse.com)等网站来确定当前跨浏览器对特定功能的支持。
*   使用[HTML5 Boilerplate 之](http://html5boilerplate.com/)类的模板，它为您提供了可以使用的 HTML5 页面结构，并支持各种 shim，从而在旧版浏览器中支持 HTML5 功能。
*   如果您更喜欢自己进行检测，请使用[Modernizr](http://www.modernizr.com)之类的库。

# php - PHP 对象+集合到 JSON 使用 json_encode

> ID：12067516
> 
> 赞同：0
> 
> 时间：2012-08-22T06:36:07.840
> 
> 标签：php, oop, collections, json

在 PHP 中，我有一个包含属性集合的产品对象。json_encode 产生这个：

```
{"id":"123","name":"abc","attributes":{"attributes":[{"key":"sku","value":"xyz"}]}} 
```

列出两次的“属性”是多余的。构造对象集合以使 json 干净的最佳方法是什么？

```
class Product {

    public $id;
    public $name;
    public $attributes;

    public function __construct()
    {
        $this->attributes = new Attributes();
    }

    public function get($id)
    {
        $this->id = "123";
        $this->name = "abc";
        $attribute = new Attribute("sku", "xyz");
        $this->attributes->add($attribute);
    }
}

class Attributes
{
    public $attributes;

    public function __construct()
    {
        $this->attributes = array();
    }

    public function add($attribute)
    {
        array_push($this->attributes, $attribute);
    }
}

class Attribute
{
    public $key;
    public $value;

    public function __construct($key, $value)
    {
        $this->set($key, $value);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:50:27.990

您可以通过实现[JsonSerializable](http://www.php.net/manual/en/jsonserializable.jsonserialize.php)为您的类提供自定义的 json 编码格式。

在您的情况下，您只需要让 Attributes 实现它并给它一个返回 $this->attributes 的 jsonSerialize 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:58:08.070

我只会使用关联数组。

```
class Product {
...
    public $attributes=array();
    ...
    public function get($id)
    {
        ...
        $this->attributes["sku"]="xyz";
        $this->attributes["foo"]="bar";
    }
} 
```

json_encode() 应该产生如下内容：

```
{"id":"123","name":"abc","attributes":{"sku":"xyz","foo":"bar"}} 
```

或使用可变变量：

```
class Attributes
{
    public function add($key,$value)
    {
        $this->{$key}=$value;
    }
    public function drop($key)
    {
        unset($this->{$key});
    }
}

$a=new Attributes();
$a->add('sku','xyz');
$a->add('foo','bar');
echo json_encode($a).'<br>';
$a->drop('sku');
echo json_encode($a).'<br>'; 
```

输出：

```
{"sku":"xyz","foo":"bar"}
{"foo":"bar"} 
```

# c# - vs2010 web应用包deploy.cmd——指定应用池

> ID：12067520
> 
> 赞同：2
> 
> 时间：2012-08-22T06:36:18.337
> 
> 标签：c#, asp.net, visual-studio-2010, iis

我正在尝试使用 Web 应用程序包将 Web 应用程序部署到 IIS。当我尝试使用 web deploy 命令行运行我的 application.deploy.cmd 时，我收到一条错误消息，指出我的托管运行时版本是版本 2，而不是我的应用程序需要的版本 4。

我知道我必须使用配置为使用 ASP.NET 4.0 的应用程序池，并且我有一个配置为使用 ASP.NET 4.0 的应用程序池。

我的问题是如何告诉 Web 部署命令行工具在运行 application.deploy.cmd 时使用哪个应用程序池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:42:49.613

看看这个。如果您询问 MSDeploy 将起作用

[使用 MSDeploy 为包设置应用程序池](https://stackoverflow.com/questions/4023762/set-application-pool-for-package-using-msdeploy)

命令 ：

```
msdeploy.exe 
  -verb:sync -source:appHostConfig="Default Web Site" 
  -enableLink:AppPoolExtension 
  -dest:package=site.zip 
  -declareParam:name="Application Pool",
       defaultValue="Default Web Site",
       description="Application pool for this site",
       kind=DeploymentObjectAttribute,
       scope=appHostConfig,
       match="application/@applicationPool 
```

# scripting - 解析文本文件并将输出作为文件名

> ID：12067522
> 
> 赞同：0
> 
> 时间：2012-08-22T06:36:42.267
> 
> 标签：scripting, batch-file, filenames

我有一个棘手的问题：有一个文件（version.txt）包含两行版本号。我用

`FOR /F "tokens=*" %i IN (c:\install\version.txt) DO @echo %i`

但现在计划是将输出作为文件名并在前面添加计算机名，例如

`%computername%_contens-from-version-file.txt`

有人能帮我吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:48:54.837

使用此批处理文件。

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
SET MAJOR=
SET MINOR=
FOR /F "tokens=*" %%i IN (c:\install\version.txt) DO (
  IF "!MAJOR!" == "" (
    SET MAJOR=%%i
  ) ELSE (
    IF "!MINOR!" == "" SET MINOR=%%i
  )
)
ECHO Version is %MAJOR%.%MINOR%
SET computername=just_example
SET FILENAME=%computername%%MAJOR%.%MINOR%.txt
ECHO File name is %FILENAME%
ECHO File contents>"c:\install\%FILENAME%" 
```

# flash - 在 Flash 应用程序中嵌入 iframe 和文档

> ID：12067524
> 
> 赞同：0
> 
> 时间：2012-08-22T06:36:43.847
> 
> 标签：flash, apache-flex, iframe

我正在寻找在我的 Flash 应用程序中显示文档（docx、pdf、...）的可能性。可能吗？另一个问题是是否可以将 iframe 嵌入到 flash 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:32:18.603

如果它是 swf，您可以将 iframe 浮动在顶部。如果您进行网络搜索，您可能会发现这更多地与 Flex 相关，而不是纯 Flash。

如果这是一个 AIR 文件，您可以使用 HTMLLoader 加载它。

# php - htaccess 规则在本地主机上不起作用

> ID：12067528
> 
> 赞同：4
> 
> 时间：2012-08-22T06:37:08.453
> 
> 标签：php, html, .htaccess, url, redirect

对不起，我改变了上一个问题。我在 localhost 上的 .htaccess 重写规则有问题，我在 http://localhost/testing/.htaccess 中有 .htaccess 文件。我想更改如下网址

```
http://localhost/testing/site.php?site=test 
```

到

```
http://localhost/testing/test 
```

我在 .htaccess 中有代码

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ site.php?site=$1 [L] 
```

哪个工作正确，但我也有类似的网址

```
http://localhost/testing/pages.php?site=test&pid=2 
```

这里 pages.php 有两个参数作为站点名称和页面 id。我想把它改写为

```
http://localhost/testing/test/2 
```

对于这两种情况，我都有以下代码不起作用

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ site.php?site=$1 [L]
RewriteRule ^([^/\.]+)/?$ pages.php?site=$1&pid=$2 [L] 
```

请帮忙

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:49:10.740

您需要做的是通过执行以下步骤打开服务器`mod_rewrite`：`Apache`

1.  假设您已经解压了`xampp`目录中的文件夹`C:\`，导航到包含 apache 配置文件的文件夹。完整路径是`C:\xampp\apache\conf\.`

2.  在 conf 文件夹中，您将找到一个名为`httpd.conf`. 该文件包含 apache 的所有配置参数。在文本编辑器中打开文件。

3.  搜索`mod_rewrite.so`，你会遇到如下一行：`#LoadModule rewrite_module modules/mod_rewrite.so`

4.  通过删除井号 (#) 标记取消注释该行。

5.  保存文件并重新启动 Apache Web 服务器。

如果文件已经在`testing`文件夹中，您的代码应该如下所示：

```
RewriteEngine on
RewriteRule ^site\.html$ site.php?site_id=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:02:35.007

我得到了对我有用的解决方案。

```
RewriteEngine on
RewriteRule ^([^/\.]+)/?$ site.php?site=$1 [L]
RewriteRule ^([^/]+)/([^/\.]+)/?$ pages.php?site=$1&pid=$2 [L,QSA] 
```

谢谢大家 ：）

# database - ORM自引用实体未正确保存到数据库中

> ID：12067537
> 
> 赞同：1
> 
> 时间：2012-08-22T06:37:36.807
> 
> 标签：database, orm, symfony, doctrine, fosuserbundle

我已经尝试了 2 个小时来解决这个问题，但我似乎无法理解出了什么问题。

我正在使用 Symfony2 和 FOSUserBundle。

我创建了一个扩展 FOSUserBundle 的 BaseUser 类的用户实体。在这个用户实体中，我有 3 个变量，id、my_mentors 和 my_mentees。更多详情如下：

```
class User extends BaseUser
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;                

/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="my_mentees")
 */
protected $my_mentors;

/**
 * @ORM\ManyToMany(targetEntity="User", inversedBy="my_mentors")
 * @ORM\JoinTable(name="mentor_and_mentee_relationship",
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="mentors_or_mentees_user_id", referencedColumnName="id")}
 *      )
 */
protected $my_mentees;

public function __construct()
{
    parent::__construct();
    $this->my_mentors = new ArrayCollection();
    $this->my_mentees = new ArrayCollection();
}

public function __toString()
{
    return $this->getUsername();
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}    

/**
 * Add my_mentors
 *
 * @param Fitness\FitBundle\Entity\User $myMentors
 */
public function addUser(\Fitness\FitBundle\Entity\User $myMentors)
{
    $this->my_mentors[] = $myMentors;
}

/**
 * Get my_mentors
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getMyMentors()
{
    return $this->my_mentors;
}

/**
 * Get my_mentees
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getMyMentees()
{
    return $this->my_mentees;
}
} 
```

我创建了自我引用，因为被指导者（也是用户）将订阅导师（也是用户）。我尝试使用以下功能来做到这一点：

```
public function subscribeAction($menteeID, $mentorID)
{                
    $em = $this->getDoctrine()
               ->getEntityManager();

    $mentor = $em->getRepository('TestBundle:User')
                ->find($mentorID);
    $mentee = $em->getRepository('TestBundle:User')
                ->find($menteeID);                

    $currentMentors = $mentee->getMyMentors();
    if ($currentMentors->contains($mentor))
        $this->get('session')->setFlash('subscribe-notice', 'You have already signed up to this mentor!');
    else
    {
        $mentee->setIsMentor(false);
        $mentee->addUser($mentor);
        $mentor->addUser($mentee);
        $em->persist($mentee);
        $em->persist($mentor);
        $em->flush();            
        $this->get('session')->setFlash('subscribe-notice', 'Subscription succesful!');
    }

    return $this->redirect($this->generateUrl('TestBundle_testpage', array('id' => $mentor->getMentorProfile()->getId()) ));
} 
```

这里的问题是，当我检查数据库时，它不会保留数据。如注释所声明的，导师-被指导者关系信息未存储在表“mentor_and_mentee_relationship”中。

我坚持使用 $mentor 和 $mentee 试图让它工作，但显然它没有。

我的 ORM 注释会被错误地声明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:53:23.590

您正在使用相同的功能 (addUser) 来添加导师和被指导者。这是错误的。首先，您的实体中需要两个不同的设置器（我更改了 addUser 的名称以使其清楚）

```
/**
 * Add my_mentors
 *
 * @param Fitness\FitBundle\Entity\User $myMentors
 */
public function addMentor(\Fitness\FitBundle\Entity\User $myMentors)
{
    $this->my_mentors[] = $myMentors;
}

/**
 * Add my_mentees
 *
 * @param Fitness\FitBundle\Entity\User $myMentees
 */
public function addMentee(\Fitness\FitBundle\Entity\User $myMentees)
{
    $this->my_mentees[] = $myMentees;
} 
```

然后在您的控制器中执行以下操作：

```
 $mentee->addMentor($mentor);
        $mentor->addMentee($mentee); 
```

# android - 使用 ksoap2 从 android 调用 webmethod

> ID：12067550
> 
> 赞同：0
> 
> 时间：2012-08-22T06:38:43.313
> 
> 标签：android, eclipse, ksoap2

我正在尝试使用 ksoap2 从 android 调用 webmethod。我使用soapobject方法addProperty设置webmethod的参数，但不能在webmethod中设置参数。我创建了一个 AsyncTask 类，它的 doInBackgroud() 方法覆盖并从中调用 webmethod。

```
 cannot set webmethod parameters 
```

以下是代码：

```
package com.example.locumapllication;

import android.os.AsyncTask;

public class MyAsyncTask extends AsyncTask<String, Void, Object> {

private String METHOD_NAME="";
private String NAMESPACE="http://ws.easyway3e.com/";
private String SOAP_ACTION="";
private static final String URL="http://192.168.2.155:8080/WebService/DBConn?wsdl";

@Override
protected Object doInBackground(String... params) {

    System.out.println("Call-1"+params[0]+params[1]+params[2]+params[3]);
    METHOD_NAME="openConnection";               
    SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);

    request.addProperty("arg0",params[0]);
    request.addProperty("arg1",params[1]);
    request.addProperty("arg2",params[2]);
    request.addProperty("arg3",params[3]);
    System.out.println("Property Set ="+request.getPropertyCount());

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);

    System.out.println(envelope.bodyOut.toString());

    HttpTransportSE androidHttpTranportSE=new HttpTransportSE(URL);

        try {
            SOAP_ACTION= METHOD_NAME + NAMESPACE;

            androidHttpTranportSE.call(SOAP_ACTION, envelope);

            SoapPrimitive  resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

                System.out.println(" Connection is =>"+resultsRequestSOAP.toString());

        } catch (IOException e) {

            e.printStackTrace();
        } catch (XmlPullParserException e) {

            e.printStackTrace();
        }
        Object result = null;
        try {
            result = envelope.getResponse();
        } catch (SoapFault e) {

            e.printStackTrace();
        }

    return result;
} 
```

}

我可以做soapobject的setproperty方法来设置webmethod的属性，但它不能设置webmethod的参数。

我已经使用 jaxws 创建了 web 服务，所以我想知道与 ksoap2 和 jaxws 集成是否有任何问题。也指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:51:02.077

看看这里的属性是如何设置的，我希望这可能会有所帮助

```
 SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
  //parameters added here..  
  PropertyInfo pi = new PropertyInfo();
    pi.setName("EmailAddress");
    pi.setValue("dilip.mariya@gmail.com");
    pi.setType(String.class);
    Request.addProperty(pi);

 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Request);

    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
    Log.e("above try","");
    try
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject response = (SoapObject)envelope.bodyIn;

        String result =  (response.getProperty(0).toString());
       // String gfdgf =  (response.getProperty(1).toString());
        Log.e("", result);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:01:22.567

尝试更改您的 URL（如果您使用的是虚拟设备）：

URL="http://10.0.2.2:8080/WebService/DBConn?wsdl"

# javascript - 我可以在 Windows 7 中执行 Windows 8 Metro 风格的应用程序吗？

> ID：12067551
> 
> 赞同：0
> 
> 时间：2012-08-22T06:38:43.600
> 
> 标签：javascript, windows, html, microsoft-metro

关于上述问题，我已经浏览了 2 个多小时，但仍然找不到明确的答案。在我安装 Windows 8 预览版之前，我想知道 Metro 应用程序（用 JS 和 HTML5 编写）是否也可以在 Windows 7 中运行？如果不是：MetroTwit 是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:56:45.027

你不能。Windows 8 (ex Metro) 应用程序需要在 Windows 7 中不存在的 API。无论如何，当您从在 Windows 7 中运行的 Visual Studio 2012 构建它时，即使没有安装 Windows 8，您也可以在模拟器中运行它来调试您的应用程序。

# javascript - exec命令自定义

> ID：12067555
> 
> 赞同：0
> 
> 时间：2012-08-22T06:39:04.387
> 
> 标签：javascript

使用 execCommand 不同的浏览器会创建不同的代码。firefox 可能会占用 span 并设置 font-weight ，IE 决定写标签 strong 或 p。这是 execCommand 演示的链接。 [http://help.dottoro.com/ljcvtcaw.php](http://help.dottoro.com/ljcvtcaw.php)

反正有自定义 execCommand 生成的代码吗？有没有像 execCommand 这样的命令可以在所有浏览器中生成相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:09:15.050

我只会为多个函数构建多个数组，当用户完成他们的文件时，只需运行`.replace();`

# php - 编辑节点时，格式变得混乱

> ID：12067559
> 
> 赞同：0
> 
> 时间：2012-08-22T06:39:15.740
> 
> 标签：php, html, drupal-6

我正在以编程方式创建节点....并使用 FILTER HTML 格式（必须将所有电子邮件转换为节点）。但是，当我再次尝试编辑该节点时，所有格式（如行距）都在正文区域的编辑框中弄乱了。

任何线索为什么会发生？

# ruby-on-rails - ubuntu12.04 vps 上的 RVM

> ID：12067562
> 
> 赞同：0
> 
> 时间：2012-08-22T06:39:30.823
> 
> 标签：ruby-on-rails

```
~# curl -L get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0     11      0  0:00:16  0:00:15  0:00:01  1057
100  9979  100  9979    0     0    317      0  0:00:31  0:00:31 --:--:-- 20235
Downloading RVM from wayneeseguin branch stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   125  100   125    0     0      8      0  0:00:15  0:00:15 --:--:--   384
100   125  100   125    0     0      1      0  0:02:05  0:01:33  0:00:32     0curl: (7) couldn't connect to host

Could not download 'https://github.com/wayneeseguin/rvm/tarball/stable'.
  curl returned status '7'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:00:05.907

我想你的答案在这里： [https ://github.com/wayneeseguin/rvm/issues/804](https://github.com/wayneeseguin/rvm/issues/804)

# java - 如何通过 JMX 以编程方式查看我的应用程序的内存使用情况

> ID：12067563
> 
> 赞同：1
> 
> 时间：2012-08-22T06:39:38.470
> 
> 标签：java, jmx

我有四个应用程序。我想开发简单的应用程序，它会给我

内存使用情况，CPU使用情况就像事情一样。就像在列表框中我已经把我的

四个应用程序，当用户选择一个时，它将显示其选项，例如

ShowMemoryUsageOfThisSelectedApplication（方法必须使用 JMX）

ShowCPUUsageOfThisSelectedApplication（方法必须使用 JMX）。

这个怎么做 ？

我有简单的知识来运行简单的应用程序并在 jconsole 中查看。

我做了以下 URL 的示例。

[http://java.sun.com/developer/technicalArticles/J2SE/jmx.html](http://java.sun.com/developer/technicalArticles/J2SE/jmx.html)

我的四个应用程序在单个 Tomcat 中运行。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:23:24.527

我认为通过 JMX 是不可能的。您可以转储内存堆并对其进行分析，以调查哪个类加载器消耗了多少内存，我想 Eclipce 可以在这里提供帮助。

如果每个应用程序都可以在自己的 tomcat 实例上运行，事情会简单得多。

# php - 如何使用 jquery 委托方法？

> ID：12067565
> 
> 赞同：0
> 
> 时间：2012-08-22T06:39:52.347
> 
> 标签：php, javascript, jquery

你好我有问题...

我必须使用 php 显示从 mysql 查询生成的所有结果，最后我生成一个缩短的“块”，如下所示：

```
<div class="resultado">

    <div class="titulo_articulo">

        <h2>Título del artículo</h2>

    </div>

    <div class="detalles_articulo">    

        <div class="datos_articulo">    

            <div class="encabezado_autores">
                <img src="images/gente.png"><span> AUTORES</span>
            </div>

            <div class="autores_instituciones">
                <li>Daniel OC - UTPL</li>
                <li>Francisco V - UTPL</li>
            </div>      

        </div>

    </div>

</div> 
```

有时搜索会返回 5 个结果，因此考虑到不同的值，代码会被插入 5 次（我不应该使用不是 .hide() 和 .slide 的 antyhing，所以这就是我得到大量代码的原因）...

我为每个结果生成了一行： Mostrar resultado n1

单击该行并调用以下事件：

```
<script type="text/javascript">
    $(document).ready(function(){

        $(".resultado").hide(); 

        $('.mostrar').click(function(e){
            $(".resultado").slideToggle();          
        }); 
    });
</script> 
```

好的，那么我该怎么做才能只使用一次该事件？否则我必须给出 5 个不同的 id 并将脚本放置 5 次......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:45:18.887

您必须为可用性分配一个`ID`，当​​涉及到这部分事情时，类不是很好：

```
<div class="mostrar" id="mostrarn1">Click me to show/hide result 1</div>
<div class="resultado" id="mostrarn1result">
    <div class="titulo_articulo">
        <h2>Título del artículo</h2>
    </div>
    <div class="detalles_articulo">    
        <div class="datos_articulo">    
            <div class="encabezado_autores">
                <img src="images/gente.png"><span> AUTORES</span>
            </div>
            <div class="autores_instituciones">
                <li>Daniel OC - UTPL</li>
                <li>Francisco V - UTPL</li>
            </div>      
        </div>
    </div>
</div>

<div class="mostrar" id="mostrarn2">Click me to show/hide result 2</div>
<div class="resultado" id="mostrarn2result">
    <div class="titulo_articulo">
        <h2>Título del artículo</h2>
    </div>
    <div class="detalles_articulo">    
        <div class="datos_articulo">    
            <div class="encabezado_autores">
                <img src="images/gente.png"><span> AUTORES</span>
            </div>
            <div class="autores_instituciones">
                <li>Daniel OC - UTPL</li>
                <li>Francisco V - UTPL</li>
            </div>      
        </div>
    </div>
</div>
<script type="text/javascript">
 $('.resultado').hide();
    $('.mostrar').click(function(e){
        var divId = $(this).attr('id');
        $('#'+divId+'result').slideToggle();       
    }); ​
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:08:45.247

使用 html 看起来像这样：

```
<div class="resultado">
...
</div>
<div class="resultado">
...
</div>
<div class="resultado">
...
</div>
<span class='mostrar' > Mostrar result 1</span>
<span class='mostrar' > Mostrar result 2</span>
<span class='mostrar' > Mostrar result 3</span> 
```

您可以通过执行以下操作来完成所需的功能：

```
$(document).ready(function(){

    $(".resultado").hide(); 

    $('.mostrar').click(function(e){
        var i = $(this).index('.mostrar');
        $(".resultado").eq(i).slideToggle();          
    }); 
}); 
```

这依赖于显示结果链接与 html 中的结果块的顺序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:23:26.053

我这样做是为了让它工作：

创建了一个名为 resultado 的 div，里面有一个 href，它有类 mostrar，我发布的块有类 datos，这是生成它的脚本：

```
<script type="text/javascript">
    $(document).ready(function(){

        $(".datos").hide();

        $('.resultado').delegate('.mostrar','click',function(event){

          $(this).parent().find(".datos").slideToggle();

        }); 
    });
</script> 
```

HTML最终像这样

```
<div class="resultado">

    <a class="mostrar" href="#">Mostrar/Ocultar resultado 1</a>

    <div class="datos">

        <div class="titulo_articulo">

            <h2>Título del artículo</h2>

        </div>

        <div class="detalles_articulo">    

            <div class="datos_articulo">    

                <div class="encabezado_autores">

                    <img src="images/gente.png"><span> AUTORES</span>

                </div>

                <div class="autores_instituciones">

                    <li>Daniel OC - UTPL</li>
                    <li>Francisco V - UTPL</li>

                </div>      

            </div>

        </div>

    </div>

</div> 
```

# backbone.js - 将 jQuery 插件与 Backbone.js 一起使用的最佳实践是什么

> ID：12067566
> 
> 赞同：0
> 
> 时间：2012-08-22T06:39:52.810
> 
> 标签：backbone.js

我正在使用带有使用backbone.js 的rails 应用程序的jQuery UI。我想做一个可拖动的元素？我必须把这个功能放在哪里：

```
$('.area-tools').draggable({handle: ".grap-area", "containment" : "parent"}) 
```

是在视图中吗？在渲染功能之后？因为，初始化函数没有找到我的元素，我认为 DOM 还没有创建？

所以，我这样做了：

```
class Myapp.Views.Tools extends Backbone.View
  template: JST['pdfs/tools']

  tagName: "div"

  className: "pdf-tools"

  events:
    'click div.rect' : 'drawRect'

  initialize: ->
    @previewWrapper = $('.preview')
    @count = 0;
    @

  render: ->
    $(@el).html(@template())

    @initColorPicker()

    this

  initColorPicker: ->
    $('.area-tools').draggable({handle: ".grap-area", "containment" : "parent"})

  drawRect: (event) =>
    newElement = $('<div id="resizable" class="resizable"><div class="close">x</div><input type="text" name="text_' + @count++ + '" /></div>');
    @previewWrapper.append(newElement);
    newElement.draggable().resizable(); 
```

好吗？有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:45:17.303

[将timeago](http://timeago.yarp.com/)插件集成到我的 rails/backbone.js 应用程序时，我也遇到了同样的问题。

我的解决方案与您的几乎相同，只是我没有将插件应用于整个文档，而是将其应用于视图元素。即`this`在您的选择器之前添加一个：

```
initColorPicker: ->
  @.$('.area-tools').draggable({handle: ".grap-area", "containment" : "parent"}) 
```

这将您对插件所做的范围限制在您从中调用插件的特定视图中，这很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:50:51.670

您的分析是正确的，除非您的视图附加到 Dom，否则您的代码将无法工作。您现在确实有多种选择：

1.  [通过事件](http://backbonejs.org/#View-delegateEvents)选项将事件处理移动到视图中。然后，我还建议将事件处理程序附加到您的视图中。
2.  [在创建期间通过el 选项](http://backbonejs.org/#View-el)将视图附加到 dom 。阅读这篇[文章](http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/)，尤其是“将视图与其他 DOM 元素分离”部分
3.  遵循 shioyama 的建议，是解决问题的第三个选项。

所有这三个应该可以解决您的问题。但是所有 3 个都是最佳实践，因此您可能想要应用所有 3 个。

# java - JScrollPane 不起作用

> ID：12067568
> 
> 赞同：3
> 
> 时间：2012-08-22T06:40:06.460
> 
> 标签：java, swing, jscrollpane, jtextarea

这是一个简单编辑器的代码。

```
public class editor {
    public static void main(String[] args) {
        JFrame f = new JFrame();
        final JTextArea area = new JTextArea(20,120);
        JScrollPane scrollingResult = new JScrollPane(area,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        f.getContentPane().add(scrollingResult);
        ...
    }
} 
```

这行不通。`JTextArea`很好，`Frame`, 但`JScrollPane`仍然被禁用。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:44:42.937

您刚刚创建了 a`JTextArea`并将其添加到 a`JScrollPane`中。但是我看不到任何文本被添加到您的`JTextArea`. 滚动选项仅在您有要滚动的内容时才会激活。

另外，我建议您将`HorizontalScrollBarPolicy`and分别`VerticalScrollBarPolicy`从 are `JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS`&更改`JScrollPane.VERTICAL_SCROLLBAR_ALWAYS`为`HORIZONTAL_SCROLLBAR_AS_NEEDED`and `VERTICAL_SCROLLBAR_AS_NEEDED`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:05:58.230

对我来说很好，我什至可以在文本区域输入。

![看着我](../Images/df36d54e4cda25851ed334c36e153a91.png)

# java - Jsoup 删除嵌套标签但保留文本

> ID：12067570
> 
> 赞同：14
> 
> 时间：2012-08-22T06:40:20.450
> 
> 标签：java, html, parsing, jsoup

我在一组元素中有 html，所以可能还有其他类似的项目

```
<b><a title="San Francisco/Twin Peaks-Lake Merced">Twin Peaks</a></b> 
```

但我想像这样用 jsoup 清理它

```
<b>Twin Peaks</b> 
```

使用白名单会是最好的主意吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T07:22:21.523

很抱歉弄乱了stackoverflow，但 unwrap 解决了这个问题。

```
document.select("a").unwrap() 
```

# r - 使用 R 中的 txt 文件在 tm 中制作军团时出错

> ID：12067572
> 
> 赞同：0
> 
> 时间：2012-08-22T06:40:29.943
> 
> 标签：r, tm

我正在尝试使用 R 中的 tm 包来执行一些文本分析。我收到以下错误：

我已手动更改目录

```
library(tm)
a<-Corpus(DirSource ("/st"), readerControl=list(language="english"))

Error in if (vectorized && (length <= 0)) stop("vectorized sources must have positive length") : missing value where TRUE/FALSE needed 
```

我无法理解这个错误，请建议我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T16:02:49.547

您可以尝试指定完整路径。

```
a <- Corpus (DirSource("C:/Users/USER/Downloads/ST"))
inspect(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:09:13.297

您的问题的上下文非常不清楚，因此我不确定您是否完全了解您想要什么。

正如您所说，您已经手动更改了目录，要使用`DirSource`，您必须执行以下操作：

`DirSource("./st")`如果“st”是您要读取文档的目录（如果使用 Windows，则为“.\st”）。`.`必须使用字符。

# java - Android致命：创建套接字时单击按钮时出错java.lang.IllegalStateException

> ID：12067577
> 
> 赞同：1
> 
> 时间：2012-08-22T06:40:46.320
> 
> 标签：java, android, sockets, illegalstateexception

我正在尝试通过手机连接到正在运行计算机的服务器。每次我单击连接按钮时，它都会给我 java.lang.IllegalStateException。单击连接按钮时，它会创建一个套接字，该套接字应该连接到我计算机上的服务器。这是错误

```
08-21 23:45:26.427: E/AndroidRuntime(4986): FATAL EXCEPTION: main
08-21 23:45:26.427: E/AndroidRuntime(4986): java.lang.IllegalStateException: Could not execute method of the activity
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.view.View$1.onClick(View.java:3044)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.view.View.performClick(View.java:3511)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.view.View$PerformClick.run(View.java:14105)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.os.Handler.handleCallback(Handler.java:605)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.os.Looper.loop(Looper.java:137)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.lang.reflect.Method.invoke(Method.java:511)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at dalvik.system.NativeStart.main(Native Method)
08-21 23:45:26.427: E/AndroidRuntime(4986): Caused by: java.lang.reflect.InvocationTargetException
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.lang.reflect.Method.invoke(Method.java:511)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.view.View$1.onClick(View.java:3039)
08-21 23:45:26.427: E/AndroidRuntime(4986):     ... 11 more
08-21 23:45:26.427: E/AndroidRuntime(4986): Caused by: android.os.NetworkOnMainThreadException
08-21 23:45:26.427: E/AndroidRuntime(4986):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at libcore.io.IoBridge.connect(IoBridge.java:112)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.net.Socket.startupSocket(Socket.java:566)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at java.net.Socket.<init>(Socket.java:225)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at com.example.socketconnection.Singleton.connect(Singleton.java:44)
08-21 23:45:26.427: E/AndroidRuntime(4986):     at com.example.socketconnection.MainActivity.connect(MainActivity.java:47)
08-21 23:45:26.427: E/AndroidRuntime(4986):     ... 14 more 
```

这是 MainActivity.java 的代码

```
package com.example.socketconnection;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    private TextView errorMessageField;
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        errorMessageField = (TextView)findViewById(R.id.errorMessageText);
        errorMessageField.setKeyListener(null);
        initSingleton();
    }

    protected void initSingleton()
    {
        Singleton.initSingleton();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

   public void connect(View view)
   {
       EditText userNameField = (EditText)findViewById(R.id.userNameText);
       EditText passwordField = (EditText)findViewById(R.id.passwordText);
       String userName = userNameField.getText().toString();
       String password = passwordField.getText().toString();
       userNameField.setText("");
       passwordField.setText("");
       errorMessageField.setText("");
       String member = Singleton.getInstance().connect(userName, password);
       if(member.equalsIgnoreCase("true"))
       {
           errorMessageField.setText("");
           Intent intent = new Intent(this, UserList.class);
           intent.putExtra(EXTRA_MESSAGE, userName);
           startActivity(intent);
       }
       else if(member.equalsIgnoreCase("false"))
       {
           errorMessageField.setText("Invalid User Name/Password");
       }
       else
       {
           errorMessageField.setText("Invalid User Name/Password");
       }
   }

} 
```

Singleton.java 的代码

```
package com.example.socketconnection;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.InetAddress;
import java.net.Socket;

public class Singleton 
{
    private Socket socket;
    private DataInputStream input;
    private DataOutputStream output;
    private boolean logged;
    private static Singleton instance;
    private String information;
    private String userName;
    private String password;

    private Singleton()
    {
    }

    public static Singleton getInstance()
    {
            return instance;
    }

    public static void initSingleton()
    {
        if(instance == null)
        {
            instance = new Singleton();
        }
    }

    public String connect(String userName, String password)
    {
        this.userName = userName;
        this.password = password;

        try
        {
            this.socket = new Socket(InetAddress.getByName("192.168.1.79"), 9000);
            this.input = new DataInputStream(socket.getInputStream());
            this.output = new DataOutputStream(socket.getOutputStream());
            output.writeUTF("login");
            output.flush();
            output.writeUTF(userName);
            output.flush();
            output.writeUTF(password);
            output.flush();
            this.information = input.readUTF();
        }
        catch(IOException ex)
        {
            this.information = "Cannot connect to Server";
        }

        return information;
    }

    public void setLogged(boolean logged)
    {
        this.logged = logged;
    }

    public Socket getSocket()
    {
        return socket;
    }

    public DataInputStream getInput()
    {
        return input;
    }

    public DataOutputStream getOutput()
    {
        return output;
    }

    public boolean getLogged()
    {
        return logged;
    }
} 
```

UserList.java 的代码

```
package com.example.socketconnection;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class UserList extends Activity 
{

    private Socket socket;
    private DataInputStream input;
    private DataOutputStream output;
    private String userName;
    private String [] users;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_list);

        Intent intent = getIntent();
        userName = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        ListView userList = (ListView)findViewById(R.id.userList);
        users = new String[0];
        ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, users);
        userList.setAdapter(listAdapter);
        socket = Singleton.getInstance().getSocket();
        input = Singleton.getInstance().getInput();
        output = Singleton.getInstance().getOutput();
        Runnable task = new UpdateTask(listAdapter);
        Thread thread = new Thread(task);
        thread.start();
    }

    class UpdateTask implements Runnable
    {
        private ArrayAdapter<String> adapter;
        private boolean logged = true;

        public UpdateTask(ArrayAdapter<String> adapter)
        {
            this.adapter = adapter;
        }

        public void loggedOut(boolean logged)
        {
            this.logged = logged;
        }

        public void run()
        {
            try
            { 
                while(logged)
                {
                    if(input.available() > 0)
                    {
                        String message = input.readUTF();
                        if(!message.equalsIgnoreCase("chat"))
                        {
                           users = getList(message);
                            adapter.notifyDataSetChanged();

                        }
                    }  
                    Thread.sleep(100);
                }
            }    
            catch(IOException ex)
            {
            }
            catch(InterruptedException ex)
            {
            }
        }
        public String[] getList(String message)
        {
            String line = message;
            String[] list;
            String[] split;
            int counter = 0;

            String temp = line.substring(1, line.length() - 1);
            split = temp.split(", ");
            if(split.length == 1)
            {
                list = new String[0];
            }
            else
            {
                list = new String[split.length - 1];
                for(int i = 0; i < split.length; i++)
                {
                    if(!split[i].equalsIgnoreCase(userName))
                    {
                        list[counter] = split[i];
                        counter++;
                    }
                }
        }

        return list;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:54:36.180

你不能仅仅用你的`Singleton.connect`调用来阻塞主应用线程。

相反，利用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)您可以从:-)`connect`的上下文中安全**调用**的优势，然后可以在.`doInBackground`**`onPostExecute`**

# android - 所有元素都被hashmap的arraylist中的最后一个元素替换

> ID：12067579
> 
> 赞同：0
> 
> 时间：2012-08-22T06:40:51.830
> 
> 标签：android, arraylist, hashmap

我有价值观

问题 Q-id
Q1 1
Q2 2
...等等

我想通过调用函数来检索它们。所以我使用了一个HashMaps的arraylist，如下所示..

```
public ArrayList<HashMap<String,String>> getAllQuestions(Integer id)
 {
     try
     {
         HashMap<String,String> QuesList = new HashMap<String,String>();
         ArrayList<HashMap<String, String>> QuestionArrayList = new ArrayList<HashMap<String, String>>();
         // Select All Query
         String selectQuery = <some query here>;

          cursor = mDb.rawQuery(selectQuery, null);

         // looping through all rows and adding to list
         if (cursor.moveToFirst()) 
         {
             do 
             {

                 QuesList.put("ques_id", cursor.getString(2));
                 QuesList.put("ques_text", cursor.getString(8));
                 QuestionArrayList.add(QuesList);
                 Log.i("ques",cursor.getString(8) );
             } while (cursor.moveToNext());
         }

         Log.i("check"," Ques list returned");
         return QuestionArrayList;

     }
     catch (SQLException mSQLException) 
     {
         Log.e(TAG, "getTestData >>"+ mSQLException.toString());
         throw mSQLException;
     }
 } 
```

现在 Logcat 显示在单个提取时成功检索了所有问题（如 Log.i 语句所示），但是当我在最后运行以下循环时，所有元素都被最后一个提取的问题替换。任何帮助深表感谢。

```
 for(HashMap<String, String> t : QuesList )
    {
        Log.d("out there", "count" + t.getString());
        Log.i("mapping....",t.get("ques_id"));
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:51:09.270

调用该`add`方法时，仅添加对该对象的引用。所以下次修改对象时，引用指的是修改后的对象，不会保留对象的旧状态。

在您的情况下，每次要将新对象添加到`List`：

```
 // looping through all rows and adding to list
     if (cursor.moveToFirst()) 
     {
         do 
         {
             //Create a new object instance of the Map
             HashMap<String,String> QuesList = new HashMap<String,String>();

             QuesList.put("ques_id", cursor.getString(2));
             QuesList.put("ques_text", cursor.getString(8));
             QuestionArrayList.add(QuesList);
             Log.i("ques",cursor.getString(8) );
         } while (cursor.moveToNext());
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:54:19.373

这样做的原因是，在您的循环中，您只使用了一个添加到 QuestionArrayList 中的 Questlist 实例。

尝试移动

```
 HashMap<String,String> QuesList = new HashMap<String,String>(); 
```

循环内。

```
 do 
         {

             HashMap<String,String> QuesList = new HashMap<String,String>();

             QuesList.put("ques_id", cursor.getString(2));
             QuesList.put("ques_text", cursor.getString(8));
             QuestionArrayList.add(QuesList);
             Log.i("ques",cursor.getString(8) );
         } while (cursor.moveToNext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:54:43.857

这里不需要列表，使用映射来存储所有键/值对：

```
QuesList.put(cursor.getString(2), cursor.getString(8)); 
```

将您的问题存储在地图中。然后你可以循环：

```
for(String q : QuesList.values()) {…} 
```

Ps：您的问题是您只使用一个地图并继续使用相同的键，覆盖以前的条目。

# android - 如何在android中读取xml sax解析器

> ID：12067581
> 
> 赞同：4
> 
> 时间：2012-08-22T06:41:00.487
> 
> 标签：android, saxparser, xmlreader

我有这个代码，这是有效的，但问题出在这个 example.xml 文件中，在这个文件中单值单行被接受。

```
(value>Northland College, 1411 Ellis Avenue, Ashland, Wisconsin</value>) 
```

如果我们给出多行，则只需要读取一行。

```
<value>Northland Community and Technical College has been in existence in one form or other since 1949,
     when the Minnesota State Board of Education approved an area vocational school for Thief River Falls.</value> 
```

但我想多行阅读。请给我一个答案

例子.xml

```
<list>
<lists name="clg_history">
    <tag>College_History</tag>
    <value>Northland Community and Technical College has been in existence in one form or other since 1949,
     when the Minnesota State Board of Education approved an area vocational school for Thief River Falls.</value>

</lists> 
<lists name="clg_courses">
    <tag>College_Courses</tag>
    <value>BTECH: CSC,IT, Civil Eng, Chemical Eng, Mechanical Eng, EEE,
     PG: MCA, MBA</value>

</lists>
<lists name="clg_address">
    <tag>College_Address</tag>
    <value>Northland College, 1411 Ellis Avenue, Ashland, Wisconsin</value>

</lists>
<lists name="clg_contact">
    <tag>College_Contact_Details</tag>
    <value>54806-3999, 
    (715) 682-1699</value>

</lists>
<lists name="clg_logo">
    <tag>College_Logo</tag>
    <value>http://www.logotypes101.com/logos/626/EC8E12391BD7F7C504C68C89A0E93484/Canisius_College.png</value>
</lists>
</list> 
```

MyXMLHandler.java

```
public class MyXMLHandler extends DefaultHandler {

 Boolean currentElement = false;
 String currentValue=null;
 public static SitesList sitesList = null;

 public static SitesList getSitesList() {
 return sitesList;
 }

 public static void setSitesList(SitesList sitesList) {
 MyXMLHandler.sitesList = sitesList;
 }

 @Override
    public void startElement(String uri, String localName, String qName,Attributes attributes) throws SAXException {

        currentElement = true;

        if (localName.equals("list"))
        {
            /** Start */ 
            sitesList = new SitesList(); 
        }
    }    

    /** Called when tag closing ( ex:- <name>AndroidPeople</name> 
     * -- </name> )*/
    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {

        currentElement = false;

        /** set value */ 
        if (localName.equalsIgnoreCase("tag"))sitesList.setTag(currentValue);
        else if (localName.equalsIgnoreCase("value"))sitesList.setValue(currentValue);

    }

    /** Called to get tag characters ( ex:- <name>AndroidPeople</name> 
     * -- to get AndroidPeople Character ) */
    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {

        if (currentElement) {
            currentValue = new String(ch, start, length);
            currentElement = false;
        }
}
} 
```

站点列表.java

```
public class SitesList {

/** Variables */
private static ArrayList<String> tag = new ArrayList<String>();
private static ArrayList<String> value = new ArrayList<String>();

private static String ctag;
    private static String cvalue;

private static String clg_history_tag;
private static String clg_history_value;

private static String clg_address_tag;
private static String clg_address_value;

private static String clg_courses_tag;
private static String clg_courses_value;

private static String clg_contact_tag;
private static String clg_contact_value;

private static String clg_logo_tag;
private static String clg_logo_value;

/** In Setter method default it will return arraylist 
 *  change that to add  */

public ArrayList<String> getTag() {
    return tag;
}

public void setTag(String name) {
    tag.add(name);
}

public ArrayList<String> getValue() {
    return value;
}

public void setValue(String value1) {
    value.add(value1);
} 

public String getClgHistoryTag()
{
    return clg_history_tag;
}
public void setClgHistoryTag(String currentValue) {
    clg_history_tag=currentValue;
}

public String getClgHistoryValue()
{
    return clg_history_value;
}
public void setClgHistoryValue(String currentValue) {
    clg_history_value=currentValue;
}

public String getClgAddressTag()
{
    return clg_address_tag;
}
public void setClgAddressTag(String currentValue) {
    clg_address_tag=currentValue;
}

public String getClgAddressValue()
{
    return clg_address_value;
}
public void setClgAddressValue(String currentValue) {
    clg_address_value=currentValue;
}

public String getClgCoursesTag()
{
    return clg_courses_tag;
}
public void setClgCoursesTag(String currentValue) {
    clg_courses_tag=currentValue;
}

public String getClgCoursesValue()
{
    return clg_courses_value;
}
public void setClgCoursesValue(String currentValue) {
    clg_courses_value=currentValue;
}

public String getClgContactTag()
{
    return clg_contact_tag;
}
public void setClgContactTag(String currentValue) {
    clg_contact_tag=currentValue;
}

public String getClgContactValue()
{
    return clg_contact_value;
}
public void setClgContactValue(String currentValue) {
    clg_contact_value=currentValue;
}

public String getClgLogoTag()
{
    return clg_logo_tag;
}
public void setClgLogoTag(String currentValue) {
    clg_logo_tag=currentValue;
}

public String getClgLogoValue()
{
    return clg_logo_value;
}
public void setClgLogoValue(String currentValue) {
    clg_logo_value=currentValue;
}
} 
```

xmlparser.java

```
public class Xmlparser extends Activity {
SitesList sitesList = null;

    @Override
protected void onCreate(Bundle TravisLoveBacon) {
    super.onCreate(TravisLoveBacon);
    // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    TextView tag[];
    TextView value[];

    try {

    /** Handling XML */
    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();
    XMLReader xr = sp.getXMLReader();

    /** Send URL to parse XML Tags */
     InputSource is = new InputSource(getResources().openRawResource(R.raw.example));

    /** Create handler to handle XML Tags ( extends DefaultHandler ) */
    MyXMLHandler myXMLHandler = new MyXMLHandler();
    xr.setContentHandler(myXMLHandler);
    xr.parse(new InputSource(is.getByteStream()));

    } catch (Exception e) {
    System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Get result from MyXMLHandler SitlesList Object */
    sitesList = MyXMLHandler.sitesList;

    //System.out.println("");
    /** Assign textview array lenght by arraylist size */
    tag = new TextView[sitesList.getTag().size()];
    System.out.println("tags"+sitesList.getTag().size());
    value = new TextView[sitesList.getValue().size()];
    System.out.println("values"+sitesList.getValue().size());

    /** Set the result text in textview and add it to layout */

    sitesList.setClgHistoryTag(sitesList.getTag().get(0));
    sitesList.setClgHistoryValue(sitesList.getValue().get(0));

    sitesList.setClgCoursesTag(sitesList.getTag().get(1));
    sitesList.setClgCoursesValue(sitesList.getValue().get(1));

    sitesList.setClgAddressTag(sitesList.getTag().get(2));
    sitesList.setClgAddressValue(sitesList.getValue().get(2));

    sitesList.setClgContactTag(sitesList.getTag().get(3));
    sitesList.setClgContactValue(sitesList.getValue().get(3));

    sitesList.setClgLogoTag(sitesList.getTag().get(4));
    sitesList.setClgLogoValue(sitesList.getValue().get(4));

    System.out.println(sitesList.getClgHistoryValue());
    System.out.println(sitesList.getClgCoursesValue());
    System.out.println(sitesList.getClgAddressValue());
    System.out.println(sitesList.getClgContactValue());
    System.out.println(sitesList.getClgLogoValue());

}
    @Override
    protected void onPause() {
        super.onPause();
        finish();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:22:14.253

我还没有对此进行测试，但我怀疑字符中的换行会出现问题。尝试将 xml 处理程序中的 character() 方法更改为：

```
currentValue = new String(ch, start, length).replaceAll("\\r\\n|\\r|\\n", " "); 
```

# django - 自定义 Django 二进制字段和 SQL Server 2008

> ID：12067587
> 
> 赞同：0
> 
> 时间：2012-08-22T06:41:43.810
> 
> 标签：django, sql-server-2008, pyodbc, django-pyodbc

我有一张小桌子：

```
CREATE TABLE [organization_division] (
[id] int IDENTITY (1, 1) NOT NULL PRIMARY KEY,
[uuid] binary(16) NOT NULL
) 
```

我可以用 SQL 查询插入一条记录：

```
INSERT INTO [organization_division] ([uuid]) VALUES (0x244c71c6c9444f38b67ab1dcfbb5fc32) 
```

该表的 Django 模型是：

```
from apps.lib.fields import GUIDField

class Division(models.Model):
    uuid = GUIDField() 
```

GUIDField 是我尝试创建自定义字段：

```
class GUIDField(models.Field):    
    description = "GUID binary field"
    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 16
        super(GUIDField, self).__init__(*args, **kwargs)

    def db_type(self, connection):
        return 'binary(16)' 
```

我需要将 16 字节的二进制数据从 ORM 实例传递到数据库。很可能我必须在 SQL Server 端获得一个不带引号的字符串，后跟**0x** ......但是如何？

*我正在使用 unixodbc、pyodbc、django-odbc。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:05:53.023

```
from django.db import models
import pyodbc

class GUIDField(models.Field):    
    description = "GUID binary field"
    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = 16
        super(GUIDField, self).__init__(*args, **kwargs)

    def db_type(self, connection):
        return 'binary(16)'

    def get_db_prep_value(self, value):
        if value is None:
            return None
        return pyodbc.BINARY(value) 
```

# ply - 用于字符串的 flex (python PLY) 正则表达式

> ID：12067592
> 
> 赞同：1
> 
> 时间：2012-08-22T06:42:19.627
> 
> 标签：ply

我正在使用 python 模块 PLY 来编写解析器，并且我正在实施。我有一个简单的规则来检测字符串：

```
r'("|\').*("|\')' 
```

当抛出词法分析器错误时，我有这个：

```
def t_error (t) :
    print 'Illegal lexer input line ' + str(t.lineno) + ' ' + t.value[:16]
    sys.exit(-1) 
```

当我向解析器提供以下输入时：

```
parse("preg_match('%^[\*\%]+$%', $keywords)") 
```

作为回报，我得到了回报：

```
Illegal lexer input line 1 %^[\*\%]+$%', $k 
```

我的问题是：

1）为什么我不解析这个字符串？看来我的正则表达式应该正确处理这个字符串。

2）我该如何解决这个问题？

编辑：

我把问题缩小了一点。以下字符串本身会引发非法的词法分析器输入错误：

```
'%'
'^' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T23:21:32.267

即使这个正则表达式正在工作，它也并没有*完全*按照你的意愿去做，例如它会接受`"this'`，这不是一个真正的字符串。这也是“非法词法输入”的原因......

完成它的工作后，`"preg_match('`当接下来的 11 个字符中的每一个字符`%^[\*\%]+$%`都是非法的（而不是 in `t_ignore`）时，词法分析器中的第一个字符串就会被打乱，因为它们甚至不以`"`or开头`'`。

.

`"`尝试对and使用两种情况`'`：*“以引号开头，一些不是引号的东西，以引号结尾。”* 那是：

```
r'("[^"]*")|(\'[^\']*\')' 
```

或者，如果您想包含转义的语音标记：

```
r'("(\\"|[^"])*")|(\'(\\\'|[^\'])*\')' 
```

# python - 为什么'$ pull'在cherrypy中不起作用

> ID：12067593
> 
> 赞同：1
> 
> 时间：2012-08-22T06:42:20.487
> 
> 标签：python, mongodb, cherrypy

我用于`$pull`删除 mongodb 中嵌入文档中的字段。我用cherrypy来实现这个。这是我的代码。

```
models.login_info.update({},{$pull:{location:{time:date}}}) 
```

但是当我运行这段代码时，它给了我如下的词法错误。

`Lexical error at line 48, column 39\. Encountered: "$" (36), after : ""`

在终端中我收到以下错误通知

`models.login_info.update({},{$pull:{location:{time:date}}}) ^ SyntaxError: invalid syntax`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T06:44:39.423

用引号`$pull`括起来：

```
'$pull': {... 
```

# wpf - 解决 URI 错误的最佳实践

> ID：12067595
> 
> 赞同：5
> 
> 时间：2012-08-22T06:42:37.227
> 
> 标签：wpf, uri

我有一个`ProjectA`包含基类（xaml + 代码隐藏）的主项目 ()。
此外，我还有另一个项目 ( `ProjectB`) 与`ProjectA`. 在最后一个项目中，我继承了一些在`ProjectA`.

启动主应用程序时，我收到以下错误：

```
The component 'XXX' does not have a resource identified by the URI  
'/My.Assembly;component/.../simplegridview.xaml' 
```

有没有解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T05:38:02.390

我知道这并不是真正解决问题的方法。但我发现 Clean and Build 使错误消失...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T08:31:23.193

我有时会遇到与 VS 2013 相同的问题，但没有任何直接原因，例如在重新启动并从头开始重建之后。在这种情况下，解决方案构建成功，它也会运行，但错误列表仍然显示例如 5 个 URI 错误。虽然有时清理和构建就足够了，但有时您必须关闭 VS，删除有错误的项目的 bin/obj 文件夹，重新打开 VS，然后错误就消失了。

# date - struts 2 s：日期标签，请求中变量的值，请求中的名称

> ID：12067597
> 
> 赞同：1
> 
> 时间：2012-08-22T06:42:50.143
> 
> 标签：date, struts2, tags

我的 web 应用程序中存在 struts 2 和日期值的问题。我有一个表格，里面有一个 s:textfield 显示日期值。我从请求中读取了这个值，问题是该值的名称在其他变量中。

**我打电话 **的行动是这样做的：****

 **```
...   
public String execute(){ return SUCCESS;}

public MyObject getObject1(){   
  MyObject result = new MyObject();  
  result.setDate(new java.util.Date());  
  return result;  
}  
... 
```

成功后，它进入我的表格。

**我表单**中的代码（我想写的）是：

```
<s:form action="save">
  <s:set name="objName" value="object1"></s:set>  
  <jsp:include page="../includedform.jsp"></jsp:include>  
</s:form> 
```

在**“includedform.jsp”**中有：

```
<s:textfield name="%{objName}.date" label="Date" >  
  <s:param name="value">  
    <s:date name="%{%{objName}.date}" format="dd/MM/yyyy" />  
  </s:param>  
</s:textfield> 
```

语法： `%{%{objName}.anagrafica.dataNascita}`
不起作用（显然，它什么也没显示）。**所以我需要这样的东西，但工作:)**

没有日期字段的“includedform.jsp”中的其他标签 s:textfield（为简单起见在下面的代码中省略）正在工作，因为我只使用 name 属性，而 struts 会自动查找该值。这是我用于这些文本字段的代码：

```
<s:textfield name="%{objName}.name" label="Name"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:10:18.600

您的问题非常令人困惑，您需要重新措辞以使其更加清晰易读。我不知道你为什么这样做

```
<s:textfield name="%{objName}.date" label="Date" > 
```

虽然这可以像

```
<s:textfield name="objName.date" label="Date" > OR 
<s:textfield name="%{objName.date}" label="Date" > 
```

当您编写`objName.date`OGNL 时，假设您的操作类中有一个 bean，`objName`并且该 bean 具有属性`date`，最终这将转换为

`getObjName().getDate()`通过 ONGL

在类似的时尚`<s:date name="%{%{objName}.date}" format="dd/MM/yyyy" />`datee 标签上工作更多详情请参考官方文档

*   [Struts2 日期标签](http://struts.apache.org/2.3.1/docs/date.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T10:02:34.213

我尝试了一种解决方案并且它有效:)
1）仅将要在数据库表中存储日期的列保留为“DATE”数据类型。
2）在JSP页面中只使用Textfield标签。不要使用Date标签。 **注意：确保仅通过在文本字段标记中放置占位符来以 YYYY-MM-DD 格式输入用户日期！**
3) 只保留用于访问字符串类型字段的变量。不要使用 DATE 数据类型。
4) 现在运行查询：**Select DATE_FORMAT(datecolumnname,'%d/%m%/Y') as date_two from tablename;** 并且您将从该列中以 dd/mm/yyyy 格式获取日期，即使它以 YYYY-MM-DD 格式存储在 table 中。
5）您还可以将 datecolumn 的数据与 curdate() 和相关函数进行比较，并且它可以工作:)。
6）就像我使用查询：**从表名中选择 id,name,DATE_FORMAT(datecolumnname,'%d/%m/%Y') as datecolumn2 where datecolumnname >= curdate();****

# android - MediaPlayer 与 InputStream 一起使用

> ID：12067598
> 
> 赞同：2
> 
> 时间：2012-08-22T06:43:05.987
> 
> 标签：android, inputstream, android-mediaplayer

我希望能够使用从串行端口接收的 InputStream 提供 MediaPlayer 控件。能做到吗？

# wix - 具有相同版本但大小不同的.exe在wix中进行majot升级时未升级

> ID：12067602
> 
> 赞同：-2
> 
> 时间：2012-08-22T06:43:08.913
> 
> 标签：wix, wix3.6

我正在用 wix 进行 majot 升级。我有一个 service.exe，其大小在 MR 中从 7k 变为 21k。在执行 msi 时它仍然没有被替换。其他文件被替换了会有什么问题。

我将进一步探索。我正在进行重大升级。我已经安装了版本 1.1.0.1 的 msi。现在主要升级版本是 1.1.1.0。具有非 .exe 扩展名的文件在主要升级中被覆盖。两个 msi 中都有一个文件 service.exe 的版本相同，因此主要升级跳过了该文件被覆盖。应该怎么做才能使 service.exe 升级。

service.exe 的版本是 1.0.0.0 都是构建的，但是它的大小发生了变化。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T11:27:25.877

您好，解决方案[是强制升级在初始安装期间修改的文件](https://stackoverflow.com/questions/1432251/forcing-an-upgrade-of-a-file-that-is-modified-during-its-initial-installation)

我已经设置了 REINSTALLMODE = amus 属性 Id=REINSTALLMODE value=amus

谢谢...

# jquery - Drupal Ajax 回调 null

> ID：12067605
> 
> 赞同：0
> 
> 时间：2012-08-22T06:43:15.680
> 
> 标签：jquery, ajax, drupal-7

我正在尝试通过 Jquery 和 AJAX 处理页面数据。我想向 Drupal 发送一个字符串，附加另一个字符串，然后将其发送回客户端。我收到“ *Uncaught TypeError: Cannot read property 'messageLog' of null* ”错误

这就是我到目前为止所拥有的。谢谢您的帮助：

Drupal 模块：

```
function exoticlang_chat_log_init(){
drupal_add_js('misc/jquery.form.js');
drupal_add_library('system', 'drupal.ajax');
}

function exoticlang_chat_log_permission() {
   return array('access ExoticLang Chat Log');
}

/**
 * Implementation of hook_menu().
 */
function exoticlang_chat_logger_menu() {
    $items = array();
    $items['chatlog'] = array(
        'title'            => t('ChatLog'),
        'type'             => MENU_CALLBACK,
        'page callback'    => 'exoticlang chat log ajax',
        'access_callback' => 'user_access',
        'access arguments' => array('save chat log')
    );
    return $items;
}

function exoticlang_chat_log_ajax($logData){
    $messageLog= 'Drupal has processed this: '.$logData;
    ajax_deliver($messageLog);
    exit;
} 
```

Javascript：

```
function sendPrivateMessageLog(privateSessionID, privateChatLog){
    var privateMessageLogJson={'user': myNick, 'chatLog': privateChatLog, 'sessionId': privateSessionID}
    privateMessageLogJson = JSON.stringify(privateMessageLogJson);
    console.log('JSONstringified: ' + privateMessageLogJson);
    jQuery.ajax({
        type: 'POST',
        url: '/chatlog',
        success: exoticlangAjaxCompleted,
        data:'messageLog=' + privateMessageLogJson,
        dataType: 'json'

    });
    return false;
}

function exoticlangAjaxCompleted(data){
    console.log('exoticlangAjaxCompleted!');
    console.log('chat log is: ' + data.messageLog);
    console.log('chat log is: ' + dump(data.messageLog));
    //console.log(dump(data));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:55:25.157

@Krister Andersson，您使用 Firebug 的建议为我指明了正确的方向。我通常不使用它，因为它在 Linux 中不能很好地工作。

javascript 很好，但我必须对 PHP 进行一些更改：

1）在聊天记录菜单中，我删除了访问回调行。

2) 我在 items[chatlog] 页面回调中添加了下划线

3) 在exoticlang_chat_log_ajax 中，我使用了$_POST['messageLog'] 而不是将其作为函数参数传入

4) 我没有使用drupal 的ajax_deliver，而是简单地回应了结果。

最终模块：

```
<?php

function exoticlang_chat_log_init(){
drupal_add_js('misc/jquery.form.js');
drupal_add_library('system', 'drupal.ajax');
}

function exoticlang_chat_log_permission() {
  return array(
    'Save chat data' => array(
      'title' => t('Save ExoticLang Chat Data'),
      'description' => t('Send private message on chat close')
    ));
}

/**
 * Implementation of hook_menu().
 */

function exoticlang_chat_logger_menu() {
    $items = array();
    $items['chatlog'] = array(
        'type'             => MENU_CALLBACK,
        'page callback'    => 'exoticlang_chat_log_ajax',
        'access arguments' => 'Save chat data');
        //'access callback' => 'user_access');
    return $items;
}

function exoticlang_chat_log_ajax(){
    $messageLog=$_POST['messageLog'];
    $chatLog= 'Drupal has processed this: '.$messageLog;
    echo $chatLog;
    drupal_exit();
} 
```

我希望这对将来的某人有所帮助...

# javascript - 获取结果未定义（Backbone.js）

> ID：12067606
> 
> 赞同：2
> 
> 时间：2012-08-22T06:43:27.047
> 
> 标签：javascript, asynchronous, backbone.js, callback

```
var ListView = Backbone.View.extend({
    el: $('hello'),
    initialize: function() {
        var stuff = new FieldCollection();
        var output;
        stuff.parse();
        stuff.fetch({
            success: function (collection, response) {
                console.log(response);
                output=response;
                return response;
             }
        });
        this.render(output);
   },
   render:function(output){
        console.log(output);
        $(this.el).append("<button id='add'>hiii</button>");
        $(this.el).append("<button id='removeAll'>Remove all list item</button>");
    }
}); 
```

在这里，我试图在`output`变量中捕捉响应的值......但它正在出现“未定义”。有什么想法我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:46:42.063

该`fetch`方法是异步的，因此在`output`您使用它时不会分配变量。尝试将`render`调用放在成功回调中：

```
var self = this;
stuff.fetch({
        success: function (collection, response) {
            console.log(response);
            output=response;
            self.render(output);
            return response;
         }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:17:38.403

考虑到您的设置，dbasemans 解决方案是正确的。但是，我宁愿将事件处理程序绑定到“重置”事件。这需要在获取之前发生。这更干净，也可以在应用程序运行时稍后进行进一步的提取。

# fpga - 翻牌与亚稳定性之间的关系

> ID：12067608
> 
> 赞同：5
> 
> 时间：2012-08-22T06:43:43.620
> 
> 标签：fpga, asic

在进行时钟域转换（速率匹配）时，我们通常会双重翻转数据以避免亚稳态。双翻牌只是降低了亚稳定的可能性。三重翻牌将进一步减少它。

如何计算亚稳定性和使用的时钟域触发器数量之间的概率/关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:42:57.643

The canonical answer to metastability queries always involves referring to articles written by [the late, great, Peter Alfke](http://www.eetimes.com/electronics-blogs/pop-blog/4230228/Peter-Alfke-Remembered--1931-2011). In particular, [the XAPP094 appnote](http://www.xilinx.com/support/documentation/application_notes/xapp094.pdf) - don't worry about the age of it, the theory is still the same.

There are also [numbers for some more recent families](http://forums.xilinx.com/t5/PLD-Blog/Metastable-Delay-in-Virtex-FPGAs/ba-p/7996) available - although I can't see anything for the 6 and 7 series as yet.

# backbone.js - 如何监听使用backbone.js插入的新元素的事件

> ID：12067611
> 
> 赞同：2
> 
> 时间：2012-08-22T06:44:15.050
> 
> 标签：backbone.js

在我的主干.js 应用程序中，我在 dom 中插入一个元素：

```
newElement = $('<div id="resizable" class="resizable"><div class="close">x</div><input type="text" name="text_' + @count++ + '" /></div>');
@previewWrapper.append(newElement); 
```

如何监听关闭按钮上的点击事件。我可以使用我的视图的事件属性吗？

也许插入元素的更好方法是创建一个特定的主干视图和模板，这样我就可以使用 events 属性来监听它的事件？

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:04:03.267

`events`您可以通过-hash 监听分配给视图及其子、孙等的 DOM 元素生成的事件。因此，在您插入这些新元素的视图中，您可以执行

```
events: {
  ...
  'eventType .close': 'callbackFuncName',
  ...
} 
```

这些事件将冒泡到它们的父 DOM 元素。

如果您要插入的元素甚至具有一点功能，我建议创建一个表示此类元素的视图，以便您保持一些功能分离。

希望这可以帮助！

# c# - 授予 ASP.NET 访问权限以从 sharepoint 网站下载文件

> ID：12067622
> 
> 赞同：1
> 
> 时间：2012-08-22T06:44:54.463
> 
> 标签：c#, asp.net, iis-7.5

我有一个 ASP.NET 应用程序，我正在 ASP.NET 开发服务器上对其进行测试。该应用程序旨在从 Intranet 共享点站点下载文件。我正在`WebClient.DownloadFile()`为此目的使用。但我得到以下异常 -

> “远程服务器返回错误：（401）未经授权。”

我在运行应用程序时登录到 Windows 的帐户可以访问我要下载的资源。

我也尝试在 ro 上运行应用程序，`IIS 7.5`为应用程序池提供下载文件所需的身份。但仍然得到同样的错误。

知道究竟是什么问题以及如何克服它？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:51:39.750

这是双跳委托的问题。看看这个：[http ://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx](http://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:56:22.903

假设 SharePoint 站点上的正常 Windows (NTLM) 身份验证。

您最可能通过设计行为“双跳委派”有时称为“单跳 NTLM 地狱” - 从客户端（浏览器）传递到服务器（您的 ASP.Net 应用程序）的凭据不能开箱即用。结果，您的 ASP.Net 应用程序自动成为或多或少的匿名用户，并且无法在 SharePoint 网站上进行授权。

解决它的常用方法 - 拥有某种受信任的帐户并在该帐户下运行您网站的代码。比访问站点时，您在进程帐户下运行代码（不冒充用户）。您需要审查代码以采取合理的安全措施，因为错误将允许任何人使用您的网站访问该特殊帐户下的 SharePoint/其他资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:16:02.680

*通过将 WebClient 的UseDefaultCredentials*属性设置为 true 解决了问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T06:57:03.773

正如 Kirill 所提到的，这是一个 Kerberos 问题。在开始设置 SPN 等之前，请先按照[此链接](http://blogs.technet.com/b/proclarity/archive/2011/03/08/useapppoolcredentials-true-with-kerberos-delegation-on-2008.aspx)上的建议进行操作。

我最近经历了令人沮丧的一周，试图让 Kerberos 在锁定的域上工作，最后我发现我所要做的就是将 useAppPoolCredentials 设置为 true。

如果这没有帮助，[这个链接](http://www.microsoft.com/en-us/download/details.aspx?id=4754)也对我很有用。

祝你好运！

# asp.net-mvc - 将模型映射到 dto 并仅“包含”子元素的键

> ID：12067623
> 
> 赞同：0
> 
> 时间：2012-08-22T06:44:57.007
> 
> 标签：asp.net-mvc, entity-framework, automapper

我有以下项目模型：

```
public class Project
{
    [Key]
    public int      ProjectID       { get; set; }
    public string   Name            { get; set; }
    public string   Description     { get; set; }     
    public virtual  ICollection<Screenshot> Screenshots { get; set; }   
} 
```

我有以下截图模型：

```
public class Screenshot
{
    [Key]
    public int    ScreenshotID { get; set; }
    public string ScreenshotName { get; set; }
    public byte[] ScreenshotContent { get; set; }
    public string ScreenshotContentType { get; set; }
} 
```

如您所见，每个项目都附有一些屏幕截图。在下面的函数中，我想检索一些项目，并且只检索相应截图的 ID。

```
public SearchResultDTO<ProjectDTO> GetProjects(SearchParametersProjectDTO dto)
{
    ...
    var resultDTO = new SearchResultDTO<ProjectDTO>
    {
        Entities = Mapper.Map<IEnumerable<Project>, IEnumerable<ProjectDTO>>(projects.ToList()),
        TotalItems = projects.Count()
    };
    return resultDTO;
} 
```

这是项目DTO：

```
[DataContract]
public class ProjectDTO : BaseDTO<ProjectDTO, Project>
{
    [DataMember]
    public int ProjectID { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public IEnumerable<int> ScreenshotID { get; set; } 
```

所以我不知道如何在我的 DTO 中映射 ScreenshotID。

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:47:47.803

`Screenshot`在和之间创建一个映射`int`：

```
Mapper
    .CreateMap<Screenshot, int>()
    .ConvertUsing(s => s.ScreenshotID); 
```

和里面的映射`Project`和`ProjectDTO`使用它：

```
Mapper
    .CreateMap<Project, ProjectDTO>()
    .ForMember(
        dest => dest.ScreenshotID,
        opt => opt.MapFrom(src => src.Screenshots)
    ); 
```

当你想映射时：

```
var project = new Project
{
    Screenshots = new[]
    {
        new Screenshot { ScreenshotID = 1 },
        new Screenshot { ScreenshotID = 2 },
        new Screenshot { ScreenshotID = 3 },
    }
};

var projectDto = Mapper.Map<Project, ProjectDTO>(project);

// at this stage the projectDto.ScreenshotID collection will contain 
// the necessary information 
```

# java - 关于日食的缓慢表现

> ID：12067625
> 
> 赞同：2
> 
> 时间：2012-08-22T06:45:03.707
> 
> 标签：java, eclipse

我正在使用 eclipse 3.7 indigo，我面临的问题是当我启动我的 eclipse 时，我的机器变得太慢，即使 eclipse 有时会挂起，我的 eclipse.ini 文件的设置如下..

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx512m 
```

请告知如何克服这个..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:48:26.130

将此值更改为更高的值：

```
--launcher.XXMaxPermSize 256m
-Xms40m
-Xmx512m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:48:29.507

也许这会有所帮助？我的意思是，我不知道您使用的机器的规格，但这在功能较弱的机器上很好。

[Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:02:36.263

检查 eclipse.ini 文件并添加以下 java 参数和值。

```
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xmn128m
-Xms1024m
-Xmx1024m
-Xss2m
-XX:PermSize=256m
-XX:MaxPermSize=256m
-XX:+UseParallelGC 
```

这对我有用。可能有帮助。

# visual-c++ - 使用 DXGI 复制 Windows 8 桌面的限制？

> ID：12067631
> 
> 赞同：2
> 
> 时间：2012-08-22T06:45:37.390
> 
> 标签：visual-c++, windows-8, remote-desktop, dxgi

我正在开发一个在 Windows 7 及其先前版本上运行良好的远程桌面应用程序。但在 windows 8 中，镜像驱动程序已被删除，因此我们必须使用 DXGI 开发相同的远程桌面功能。我已阅读文档，但我想知道**DXGI 是否有任何限制？**

> 如果有人在 Windows 8 中创建桌面仿真时遇到一些限制，请分享。

# iphone - Cocos2d iphone中的NSNotification

> ID：12067637
> 
> 赞同：0
> 
> 时间：2012-08-22T06:46:06.053
> 
> 标签：iphone, ios, cocos2d-iphone

我的游戏开始屏幕上有一个按钮，当用户点击该按钮时，它将重定向到下一页，我在此按钮单击事件中调用通知，代码为

```
- (void)switchsounds
{
    CCLOG(@"hiii");
    [[NSNotificationCenter defaultCenter] postNotificationName:@"reloadvieweyes" object:nil];
    CCTransitionJumpZoom *transition = [CCTransitionJumpZoom transitionWithDuration:1.0 scene:[HelloWorldLayer scene]];

    // Tell the director to run the transition
    [[CCDirector sharedDirector] replaceScene:transition];

} 
```

上面的代码是按钮点击功能

在 init statmnet 的下一页上，我输入此代码以获取按钮事件的功能

```
-(id) init
{
    if( (self=[super init])) {
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(viewreloadedeyes) name:@"reloadvieweyes" object:nil];
}
return self;

}

-(void)viewreloadedeyes
{

 CCLOG(@"hiii");

} 
```

我没有在按钮单击事件中获得 cclog 以及下一页中的功能。但是页面重定向是通过按钮 lcick 完成的。我的代码有什么问题。如何在按钮单击中从一个页面获取 nsnofication 到另一个页面.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:03:56.670

通知选择器[需要 NSNotification* 参数](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Registering.html)。将您的代码更改为：

```
-(id) init
{
    if( (self=[super init])) {
 [[NSNotificationCenter defaultCenter] addObserver:self 
  selector:@selector(viewreloadedeyes:)
      name:@"reloadvieweyes"
    object:nil];
 }
 return self;

}

-(void)viewreloadedeyes:(NSNotification*)notification
{
 CCLOG(@"hiii");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:49:49.900

嘿伙计们，我找到了解决方案，我只是像这样将通知放在视图转换中

```
- (void)switchsounds
{
    CCLOG(@"hiii");

    CCTransitionJumpZoom *transition = [CCTransitionJumpZoom transitionWithDuration:1.0 scene:[HelloWorldLayer scene]];

 [[NSNotificationCenter defaultCenter] postNotificationName:@"reloadvieweyes" object:nil];
    // Tell the director to run the transition

    [[CCDirector sharedDirector] replaceScene:transition];

} 
```

现在它工作得很好。谢谢。

# jakarta-ee - Java 集成测试。何时使用嵌入式服务器？

> ID：12067640
> 
> 赞同：0
> 
> 时间：2012-08-22T06:46:24.947
> 
> 标签：jakarta-ee, continuous-integration, integration-testing

我们正在为`Java EE`应用程序编写集成测试，但不能在一件事上达成一致。

集成测试应该在嵌入式服务器上运行还是在真实服务器上运行？

在成熟的 Java EE 服务器上运行测试真的有什么好处吗？

我实际上在这种方法中看到了很多问题，最大的问题是我们应该以某种`EJB`方式通过`@Remote`interface 或 some公开业务方法`Web Service`。

此外，我们计划在`Jenkins`服务器上运行这些集成测试。我们已经有了一个构建配置，可以打包我们的应用程序并将其部署到`Glassfish`服务器上。那么，也许考虑到这一点，应该会影响我们的决定，是使用嵌入式服务器还是真正的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:01:10.000

是否嵌入了服务器并不重要。但它需要有非常快的启动和低内存消耗。这样您就可以在开发人员机器上本地运行它们。好处：

*   测试将更频繁地运行，错误将更快地被发现
*   当您可以在本地快速运行测试时，更容易编写和调试测试
*   它允许（更容易）TDD
*   如果没有在开发人员机器上运行的集成测试，某些功能根本无法构建，例如 REST API。

而且您不需要将 EJB 与`@Remote`或作为 Web 服务公开以在嵌入式服务器中运行。事实上，您根本不需要修改它们。如果您决定是否使用 Java EE 集成框架，我不知道，但您可以看看[Arquilian](http://www.jboss.org/arquillian.html)。

我还可以建议将[OpenEJB](http://openejb.codehaus.org/)作为本地集成测试的快速 EJB 容器。

在真实的（生产）服务器测试上运行 Jenkins 上的集成测试，以测试提交的**代码**。作为一个额外的安全网非常有用。但是开发人员应该有自己的方法在开发时和提交之前测试他们的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:25:02.163

要针对 EJB 的视图执行测试`@Local`，您可以将容器嵌入到测试 vm 中，或者将测试嵌入到容器中。

你可以吃蛋糕也可以吃……两者都做:) Arquillian API 非常好，你可以有一个可以配置为两者都做的测试。

[在使用OpenEJB](http://openejb.apache.org)之类的嵌入式容器进行开发时快速运行测试，然后在 Jenkins 中针对看起来像生产服务器的东西再次运行它们（这会更慢）。

不要限制自己认为你只需要选择一个或另一个。

# php - get_browser 减慢页面加载速度，还有其他选择吗？

> ID：12067641
> 
> 赞同：3
> 
> 时间：2012-08-22T06:46:28.970
> 
> 标签：php, javascript, user-agent, browser-detection, browscap

我已经使用 PHP 的`get_browser`功能很长一段时间了，但从未真正注意到我的任何网站上有任何滞后。但是，最近我注意到我的一个网站在服务器端加载的时间比它应该花费的时间要多一秒左右。我注释掉了该`get_browser`功能并立即加载了页面。

这可能与我的服务器有关还是`get_browser`已知该功能很慢？该网站是我唯一在 Windows 服务器上运行的网站，这可能是问题吗？或者这可能与我的 browscap.ini 文件有关（每天从[http://browsers.garykeith.com](http://browsers.garykeith.com)更新）？

如果我无法加快该`get_browser`功能的速度，是否有任何替代方案？我需要可靠地收集有关浏览器的以下信息：

1.  它是什么浏览器，即Chrome、IE、Safari等
2.  它是什么版本（完整），即 10.1 等
3.  无论是爬虫还是机器人

我不知道从用户代理收集此信息的任何其他方法，使用 javascript 会更好（我宁愿不需要值服务器端）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-15T15:01:32.860

我在使用时也遇到了大约 5 秒的延迟，`get_browser`所以我也寻找了另一种解决方案。

piwik 中的一个库很有效，并且肯定会在很长一段时间内保持最新状态：

*   [**Piwik 设备检测器**](https://github.com/piwik/device-detector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:17:28.107

这个类会派上用场：[http](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/) ://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/ 。我在我的许多项目中都使用它，它不使用 get_browser，而是查看浏览器的用户代理。我已经用 Windows Phone 浏览器更新了我的版本，您可以从以下网址下载：[http](http://cl.ly/code/1V3E1k1G3B25) ://cl.ly/code/1V3E1k1G3B25 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:08:28.827

到目前为止，我还没有设法找到该`get_browser`功能的合适替代方案，也无法找到为什么它在我的 Windows 服务器上而不是在我的 Linux 上很慢。

目前，我将应用一个基本的 cookie 解决方法。在第一次访问我的网站时，我会将浏览器详细信息存储在 cookie 中，然后从那时起检索这些信息。这比`get_browser`暂时使用该功能要快。

**如果其他人有任何其他解决方案，请发表评论或发布**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T10:01:57.337

目前 PHP 的完整 browscap.ini 大小约为 10MB。对 get_browser() 的单个调用或访问该“数据库”的其他方法需要大量资源。

这就是我更改格式并将**数据导入 MySQL 数据库**的原因。我编写了两个简单的脚本，让我可以在新的 browscap.ini 出现时轻松更新数据库。第一个脚本从 browscap.ini 文件生成表结构 - 第二个脚本为表提供种子。如果您对脚本感兴趣，请在下面的评论中告诉我，我会为您上传。他们充满了意大利面，但他们工作。

由于浏览器不会在会话期间发生变化，因此您应该在每个会话中仅从 browscap.ini 获取数据一次，然后将其存储。

# jquery - 当用户完成使用滑块时，jQuery滑块运行代码？

> ID：12067644
> 
> 赞同：3
> 
> 时间：2012-08-22T06:46:38.160
> 
> 标签：jquery, jquery-ui

我有一个 id="slider" 的滑块，当滑块改变位置时，我目前正在写一个日志。这是我的代码：

```
$("#slider").slider({
    value:40,
    min: 0,
    max: 80,
    step: 10,
    slide: function( event, ui ) {
        console.log('moved'); // Run code if slider value changes
        }
    }); 
```

我也知道如何在用户释放/鼠标悬停手柄时运行一些代码：

```
$("#slider .ui-slider-handle").click({
    console.log('released handle');
    }); 
```

我的问题是，在我当前的实现中，每次用户移动手柄时我都会运行代码，有时他仍然在移动手柄并且还没有决定它的最终位置。当用户完成滑块后，我需要运行一些代码。我清楚我需要做什么吗？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T06:51:46.163

```
$("#slider").slider({
    value:40,
    min: 0,
    max: 80,
    step: 10,
    slide: function( event, ui ) {
        console.log('moved'); // Run code if slider value changes
    },
    stop: function(event, ui) {
        console.log('released handle');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:49:45.387

尝试使用该`stop`事件：http: [//jqueryui.com/demos/slider/#event-stop](http://jqueryui.com/demos/slider/#event-stop)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T06:51:54.927

尝试这个

```
$( ".selector" ).slider({
   stop: function(event, ui) { ... }
}); 
```

# javascript - 调用JS函数时应用程序被冻结有alert()

> ID：12067646
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:46:43.590
> 
> 标签：javascript, awesomium

我正在使用 Awesomium .NET 1.6.6。

当我在 C# 中使用 CallJavascriptFunction 和 ExecuteJavascriptWithResult 时，当调用的 JS 函数中有 alert() 时，整个应用程序将被冻结。JS代码就是这样的：

```
function Helloworld()
{
alert("");
} 
```

如何预防这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:17:35.947

在单击 OK 之前阻止您的脚本的警报**是一种正常行为**，警报以这种方式命名是有原因的。

如果您想为用户创建一条消息，只需将其写在您的页面中即可。

根据您的函数名称，我想说您现在只是在测试，您应该尝试使用**具有控制台**`console.log("Hello world!")`的浏览器：

 ***   火狐的萤火虫。[http://getfirebug.com/](http://getfirebug.com/)
*   Chrome/Safari 控制台。
*   歌剧蜻蜓。
*   IE9 F12 键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:09:12.613

虽然我不知道你的情况 100% 听起来问题是 alert() 是一个阻塞调用。

解决方案：使用基于 DOM 的消息框。

例如：

[http://yuilibrary.com/yui/docs/panel/panel-form-example.html](http://yuilibrary.com/yui/docs/panel/panel-form-example.html)

或者

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)**

# c# - 在 c# .net 中将 Oracle 数据库数据类型迁移到 Sql 数据库数据类型

> ID：12067647
> 
> 赞同：0
> 
> 时间：2012-08-22T06:46:46.693
> 
> 标签：c#, sql

这里我们需要将qracle数据库迁移到sql server。这里我们使用 c#.net 应用程序。

下面给出了 Oracle 的示例代码。

这里我们使用的是 OracleType.Cursor，那么 sqldbtype 中的等号是什么

```
public DataSet GetL3CompanyDesc()
{
    DataSet dsCompanyDetails = new DataSet();
    try
    {
        oracleConnection = new OracleConnection(connectionString);
        OracleParameter[] arrayParameter = new OracleParameter[2];
        arrayParameter[0] = new OracleParameter(IODDALConstants.GetL3CompanyDescRefCur, OracleType.Cursor);
        arrayParameter[0].Direction = ParameterDirection.Output;
        arrayParameter[1] = new OracleParameter(IODDALConstants.GetL3CompanyDescCubeVersion, OracleType.Cursor);
        arrayParameter[1].Direction = ParameterDirection.Output;
        OracleHelper.FillDataset(oracleConnection, CommandType.StoredProcedure, IODDALConstants.GetL3CompanyDesc, dsCompanyDetails, new string[] { IODDALConstants.GetL3CompanyDescTableName }, arrayParameter);
    }
    catch (Exception ex)
    {
        bool rethrow = ExceptionLogEntry.HandleDALException(ex);
        if (rethrow)
        {
            throw;
        }
    }
    finally
    {
        if (oracleConnection != null)
            oracleConnection.Dispose();
    }
    return dsCompanyDetails;
} 
```

在 Oracle 存储过程中，它们将游标作为参数传递。是否有可能将游标作为 SQL 中的参数传递。以及如何将游标作为输出参数从 c# 代码传递给 sql 存储过程？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:46:20.190

您不能将 CURSOR 作为 T-SQL 中的 SP 参数传递。[使用此MSDN 示例](http://msdn.microsoft.com/en-us/library/bb510489.aspx)中所示的 Table-Values 参数。

# html - HTML5：在一个主画布上绘制多个画布

> ID：12067650
> 
> 赞同：4
> 
> 时间：2012-08-22T06:46:58.487
> 
> 标签：html, canvas, html5-canvas

我正在寻找一种 [快速] 方法来在主画布元素上从多个画布绘制图像。什么是正确和最快的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:53:05.510

Canvas的`drawImage`方法可以接受一个 Canvas 对象作为第一个参数。这是最快和推荐的方式。

这是[w3.org](http://dev.w3.org/html5/2dcontext/#drawing-images-to-the-canvas)的摘录：

> // 绘制图像
> 
> void drawImage((HTMLImageElement or **HTMLCanvasElement** or HTMLVideoElement) image, double dx, double dy);
> 
> void drawImage((HTMLImageElement or **HTMLCanvasElement** or HTMLVideoElement) image, double dx, double dy, double dw, double dh);
> 
> void drawImage((HTMLImageElement or **HTMLCanvasElement** or HTMLVideoElement) image, double sx, double sy, double sw, double sh, double dx, double dy, double dw, double dh);

请注意，您的画布元素不必添加到您的文档中。我在内存画布中使用所有缓冲或精灵对象（`someSprite = document.createElement('canvas');...`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:39:55.027

Dystroy 是对的，如果你想保存画布画，那么你可以使用 getCanvasData。

# c++ - C++ 和 Maya：构造函数在此上下文中是私有的

> ID：12067653
> 
> 赞同：2
> 
> 时间：2012-08-22T06:47:07.880
> 
> 标签：c++, maya

我正在编译一个使用 Autodesk Maya API 的程序，并收到有关构造函数在此上下文中为私有的错误：

```
/usr/autodesk/maya2013-x64/include/maya/MFnTransform.h: In member function ‘MayaEggGroup* MayaEggLoader::MakeGroup(EggGroup*, EggGroup*)’:
/usr/autodesk/maya2013-x64/include/maya/MFnTransform.h:181:2: error: ‘MFnTransform::MFnTransform(const MFnTransform&)’ is private
pandatool/src/mayaegg/mayaEggLoader.cxx:373:60: error: within this context 
```

一点背景知识 - 我正在使用 Maya 2013 在 Ubuntu 12.04 上构建[Panda3D](http://www.panda3d.org)（一个开源游戏引擎）。它正在编译将文件从 Maya 转换为 Panda 模型格式的导出器的一部分。

我（有点）理解错误的含义，但不知道如何解决它。奇怪的是，相同的代码在 Maya 2011 和 Maya 2012 中编译得很好，据我所知，类声明 (MFnTransform) 在 Maya 2013 中没有改变。

这是完整的 g++ 命令：

```
g++ -ftemplate-depth-30 -fPIC -c -o built/tmp/mayaegg2013_loader.o -Ibuilt/tmp -Ibuilt/include -I/usr/include/python2.7 -I/usr/include/eigen3 -I/usr/autodesk/maya2013-x64/include -DMAYAVERSION=MAYA2013 -DMAKEPANDA= -Ipandatool/src/mayaegg -Ipandatool/src/maya -pthread -msse2 -ggdb -D_DEBUG pandatool/src/mayaegg/mayaEggLoader.cxx 
```

以及一些相关的代码。

在 mayaEggLoader.cxx 中，错误的来源如下：

```
class MayaEggGroup
{
public:
  string  _name;
  MObject _parent;
  MObject _group;

  bool _addedEggFlag;
};
MayaEggGroup *MayaEggLoader::MakeGroup(EggGroup *group, EggGroup *context)
{
    MStatus status;
    MayaEggGroup *result = new MayaEggGroup;
    ...
    MFnTransform tFn = MFnTransform(result->_group, &status); 
```

从 MFnTransform.h 开始，这里是 MFnTransform 定义的开始：

```
class OPENMAYA_EXPORT MFnTransform : public MFnDagNode
{
declareDagMFn( MFnTransform, MFn::kTransform );
public:
MObject     create( MObject parent = MObject::kNullObj,MStatus * ReturnStatus = NULL );
    ... 
```

我根本看不到在哪里定义了私有构造函数……我该如何寻找它？或者这个错误是否意味着其他事情实际上是错误的？

更新：

事实证明，这是 Maya 2013 C++ API 中引入的一个已知错误：

> MAYA-6512：MFnDependencyNode、MFnDagNode 复制构造函数应该是公共的，而不是私有的 解决方法：创建一个对同一对象进行操作的新函数集，例如：MFnDependencyNode fn2(fn1.object()); 如果要将函数集传递给另一个方法，请改为传递引用。

好的，但是如果我需要设置一个成员变量呢？这是我遇到相同错误的另一个地方。

```
MayaBlendDesc::
MayaBlendDesc(MFnBlendShapeDeformer deformer, int weight_index) 
{
    _weight_index=weight_index;
    _deformer=deformer;
    ostringstream strm;
    strm << _deformer.name().asChar() << "." << _weight_index;
    set_name(strm.str());

    _anim = (EggSAnimData *)NULL;
} 
```

在“_deformer=deformer”这一行。

这是 MayaBlendDesc 的定义。这是我可以编辑的代码。

```
////////////////////////////////////////////////////////////////////
//       Class : MayaBlendDesc
// Description : A handle to a Maya blend shape description.  This is
//               just one target of a Maya BlendShape object, and
//               thus corresponds more or less one-to-one with a
//               single Egg morph target.  (We don't attempt to
//               support Maya's chained target shapes here; should we
//               need to later, it would mean breaking each of those
//               target shapes on the one continuous Maya slider into
//               a separate MayaBlendDesc object, and synthesizing the
//               egg slider values appropriately.)
////////////////////////////////////////////////////////////////////
class MayaBlendDesc : public ReferenceCount, public Namable {
public:
  MayaBlendDesc(MFnBlendShapeDeformer deformer, int weight_index);
  ~MayaBlendDesc();

  void set_slider(PN_stdfloat value);
  PN_stdfloat get_slider() const;

private:
  void clear_egg();

  MFnBlendShapeDeformer _deformer;
  int _weight_index;

  EggSAnimData *_anim;

public:
  static TypeHandle get_class_type() {
    return _type_handle;
  }
  static void init_type() {
    ReferenceCount::init_type();
    Namable::init_type();
    register_type(_type_handle, "MayaBlendDesc",
                  ReferenceCount::get_class_type(),
                  Namable::get_class_type());
  }

private:
  static TypeHandle _type_handle;

  friend class MayaNodeTree;
}; 
```

这是 MFnBlendShape 及其祖先的定义（Maya API 的一部分，我无法触及）：

```
class OPENMAYAANIM_EXPORT MFnBlendShapeDeformer : public MFnDependencyNode
{
    declareMFn(MFnBlendShapeDeformer, MFnDependencyNode );

public:
    //! Specifies the space to use for the deformation origin.
    enum Origin {
        kLocalOrigin,   //!< \nop
        kWorldOrigin    //!< \nop
    };

    //! Specifies where in the shape's history to place the deformer.
    enum HistoryLocation {
        kFrontOfChain,  //!< \nop
        kNormal     //!< \nop
    };

    MObject  create(  MObject baseObject,
                      Origin originSpace = kLocalOrigin,
                      MStatus * ReturnStatus = NULL );
    MObject  create(  const MObjectArray& baseObjects,
                      Origin originSpace = kLocalOrigin,
                      HistoryLocation = kNormal,
                      MStatus * ReturnStatus = NULL );
    MStatus  addBaseObject( MObject & object );
    MStatus  getBaseObjects( MObjectArray & objects ) const;

    MStatus  addTarget( const MObject & baseObject, int weightIndex,
                        const MObject & newTarget, double fullWeight );

    MStatus  removeTarget( const MObject & baseObject,
                           int weightIndex,
                           const MObject & target,
                           double fullWeight );
    MStatus  getTargets( MObject baseObject, int weightIndex,
                         MObjectArray & targetObjects ) const;

    unsigned int numWeights( MStatus * ReturnStatus = NULL ) const;

    MStatus  weightIndexList( MIntArray& indexList ) const;

    MStatus  targetItemIndexList( unsigned int weightIndex,
                                  MObject baseObject,
                                  MIntArray& targetItemIndices ) const;

    float    weight( unsigned int index, MStatus * ReturnStatus = NULL ) const;
    MStatus  setWeight( unsigned int index, float weight );

    float    envelope( MStatus * ReturnStatus = NULL ) const;
    MStatus  setEnvelope( float envelope );

    Origin   origin( MStatus * ReturnStatus = NULL ) const;
    MStatus  setOrigin( Origin space );

BEGIN_NO_SCRIPT_SUPPORT:

    declareMFnConstConstructor( MFnBlendShapeDeformer, MFnDependencyNode );

END_NO_SCRIPT_SUPPORT:

protected:
// No protected members

private:
// No private members
}; 
```

MFnDependencyNode：

```
// ****************************************************************************
// CLASS DECLARATION (MFnDependencyNode)

//! \ingroup OpenMaya MFn
//! \brief Dependency node function set.
/*!
  MFnDependencyNode allows the creation and manipulation of dependency
  graph nodes.  Traversal of the dependency graph is possible using
  the getConnections method.

  This function set does not support creation or removal of connections.
  MDGModifier should be used for that purpose.
*/
class OPENMAYA_EXPORT MFnDependencyNode : public MFnBase
{
    declareMFn(MFnDependencyNode, MFnBase);

public:
    //! Specifies the scope of the attribute.
    enum MAttrClass {
        kLocalDynamicAttr = 1,  //!< Dynamically added, applies to this specific node.
        kNormalAttr,        //!< Static attribute which is part of the original definition for this node type.
        kExtensionAttr,     //!< Extension attribute which is part of all nodes of this or derived node types
        kInvalidAttr        //!< None of the above
    };

    MObject         create( const MTypeId &typeId,
                                MStatus* ReturnStatus = NULL );
    MObject         create( const MTypeId &typeId,
                                const MString& name,
                                MStatus* ReturnStatus = NULL );

    MObject         create( const MString &type,
                                MStatus* ReturnStatus = NULL );
    MObject         create( const MString &type,
                                const MString& name,
                                MStatus* ReturnStatus = NULL );

    MTypeId         typeId( MStatus* ReturnStatus = NULL ) const;
    MString         typeName( MStatus* ReturnStatus = NULL ) const;
    MString         name( MStatus * ReturnStatus = NULL ) const;
    MString         pluginName( MStatus * ReturnStatus = NULL ) const;

    MString         setName( const MString &name,
                             bool createNamespace = false,
                             MStatus * ReturnStatus = NULL );                        
    MStatus         getConnections( MPlugArray& array ) const;
    unsigned int        attributeCount( MStatus* ReturnStatus=NULL) const;
    MObject         attribute(  unsigned int index,
                                MStatus* ReturnStatus=NULL) const;
    MObject         reorderedAttribute( unsigned int index,
                                MStatus* ReturnStatus=NULL) const;
    MObject         attribute(  const MString& attrName,
                                MStatus* ReturnStatus=NULL) const;
    MAttrClass      attributeClass( const MObject& attr,
                                    MStatus* ReturnStatus=NULL) const;
    MStatus         getAffectedAttributes ( const MObject& attr,
                                    MObjectArray& affectedAttributes ) const;
    MStatus         getAffectedByAttributes ( const MObject& attr,
                                    MObjectArray& affectedByAttributes ) const;
    MPlug           findPlug(   const MObject & attr, bool wantNetworkedPlug,
                                MStatus* ReturnStatus=NULL) const;
    MPlug           findPlug(   const MString & attrName, bool wantNetworkedPlug,
                                MStatus* ReturnStatus=NULL) const;
    // Obsolete
    MPlug           findPlug(   const MObject & attr,
                                MStatus* ReturnStatus=NULL) const;
    // Obsolete
    MPlug           findPlug(   const MString & attrName,
                                MStatus* ReturnStatus=NULL) const;
    MStatus         addAttribute    ( const MObject & attr );
    MStatus         removeAttribute ( const MObject & attr );
    MPxNode *       userNode( MStatus* ReturnStatus=NULL ) const;
    bool            isFromReferencedFile(MStatus* ReturnStatus=NULL) const;
    bool            isShared(MStatus* ReturnStatus=NULL) const;
    bool            hasUniqueName(MStatus* ReturnStatus=NULL) const;
    MString         parentNamespace(MStatus* ReturnStatus=NULL) const;
    bool            isLocked(MStatus* ReturnStatus=NULL) const;
    MStatus         setLocked( bool locked );
    static MString  classification( const MString & nodeTypeName );
    bool            isNewAttribute( const MObject& attr,
                                MStatus* ReturnStatus=NULL) const;
    static unsigned int allocateFlag(
                        const MString pluginName, MStatus* ReturnStatus=NULL
                    );
    static MStatus  deallocateFlag(const MString pluginName, unsigned int flag);
    static MStatus  deallocateAllFlags(const MString pluginName);
    MStatus         setFlag(unsigned int flag, bool state);
    bool            isFlagSet(unsigned int flag, MStatus* ReturnStatus=NULL) const;
    bool            isDefaultNode(MStatus* ReturnStatus=NULL) const;

    MStatus         setDoNotWrite ( bool flag );
    bool            canBeWritten(MStatus* ReturnStatus=NULL) const;

    bool            hasAttribute(const MString& name, MStatus* ReturnStatus=NULL) const;

    MObject         getAliasAttr(bool force, MStatus* ReturnStatus=NULL);
    bool            setAlias(const MString& alias,const MString& name, const MPlug& plug, bool add=true,
                    MStatus* ReturnStatus=NULL);
    bool            findAlias(const MString& alias, MObject& attrObj, MStatus* ReturnStatus=NULL) const;
    bool            getAliasList(MStringArray& strArray, MStatus* ReturnStatus=NULL);
    MString         plugsAlias(const MPlug& plug, MStatus* ReturnStatus=NULL);

    MStatus         setIcon( const MString &filename );
    MString         icon( MStatus* ReturnStatus=NULL ) const;

BEGIN_NO_SCRIPT_SUPPORT:

    //! OBSOLETE FUNCTION, NO SCRIPT SUPPORT
    MString         setName( const MString &name,
                             MStatus * ReturnStatus );

    //! NO SCRIPT SUPPORT
    declareMFnConstConstructor( MFnDependencyNode, MFnBase );
    //! NO SCRIPT SUPPORT
    bool            getPlugsAlias(const MPlug& plug, MString& aliasName, MStatus* ReturnStatus=NULL);

END_NO_SCRIPT_SUPPORT:

    // turn on timing on for all nodes in the DG
    static void enableDGTiming(bool enable);

    // For turning node timing on and off, and querying the state...
    MStatus         dgTimerOn();
    MStatus         dgTimerOff();

    //! Possible states for the node's timer.
    enum MdgTimerState {
        kTimerOff,      //!< \nop
        kTimerOn,       //!< \nop
        kTimerUninitialized,    //!< \nop
        kTimerInvalidState  //!< \nop
    };

    MdgTimerState   dgTimerQueryState( MStatus* ReturnStatus = NULL );

    // For resetting node timers to zero...
    MStatus         dgTimerReset();

    //! The different timer metrics which can be queried.
    enum MdgTimerMetric {
        // Primary metrics. The qualities that we measure.
        kTimerMetric_callback,  //!< Time spent within node callbacks for this node.
        kTimerMetric_compute,   //!< Time spent within the compute method for this node.
        kTimerMetric_dirty, //!< Time spent propogating dirty messages from this node.
        kTimerMetric_draw,  //!< Time spent drawing this node.
        kTimerMetric_fetch, //!< Time spent fetching data from plugs.

        // Sub metrics. These are finer-grained breakdowns of the primary
        // metrics. There could be many combinations of the above metrics.
        // Currently we only support the following.
        kTimerMetric_callbackViaAPI,    //!< Time spent in callbacks which were registered through the API.
        kTimerMetric_callbackNotViaAPI, //!< Time spent in callbacks not registered through the API (i.e internal Maya callbacks).
        kTimerMetric_computeDuringCallback, //!< Time spent in this node's compute while executing node callbacks on any node.
        kTimerMetric_computeNotDuringCallback   //!< Time spent in this nodes compute when not executing any node callbacks on any nodes.
    };

    //! The types of timers which can be queried.
    enum MdgTimerType {
        /*!
        Time spent performing an operation, not including any time
        spent by child operations. For example, if we are drawing a
        node and that requires a compute, self time will only include
        the time spent drawing and not the compute time. Self time
        measures wall-clock time as opposed to CPU time and the values
        are in seconds.
        */
        kTimerType_self,

        /*!
        Time spent performing an operation including all time spent by
        child operations. For example, if we are drawing a node and
        that requires a compute, inclusive time is the time for the
        draw plus compute. Inclusive time measure wall-clock time as
        opposed to CPU time and the values are in seconds.
        */
        kTimerType_inclusive,

        /*!
        The number of operations that occurred. Ideally we should
        return an integer when this timer type is queried, but there
        are two advantages to using a double. 1) it keeps the interface
        consistent and 2) integer has a fixed upper bound of roughly
        four billion so using a double allows us to exceed this.
        */
        kTimerType_count
    };

    // Query the timer value given a given metric and timer type.
    double  dgTimer( const MdgTimerMetric           timerMetric,
                            const MdgTimerType      timerType,
                            MStatus* ReturnStatus = NULL ) const;

    // Query the callback timer values.
    MStatus dgCallbacks( const MdgTimerType         type,
                            MStringArray            &callbackName,
                            MDoubleArray            &value );

    // Query the callbackId timer values.
    MStatus dgCallbackIds( const MdgTimerType       type,
                            const MString           &callbackName,
                            MCallbackIdArray        &callbackId,
                            MDoubleArray            &value );

    // Obsolete
    MStatus addAttribute    ( const MObject & attr, MAttrClass type );
    // Obsolete
    MStatus removeAttribute ( const MObject & attr, MAttrClass type );

protected:
// No protected members

private:
// No private members
}; 
```

和MFnBase：

```
// ****************************************************************************
// CLASS DECLARATION (MFnBase)

//! \ingroup OpenMaya MFn
//! \brief  Function Set Base Class. 
/*!
  Defines the interface for the API RTTI and Maya Object attachment
  methods common to all Function Set Classes.

  Implements the Function Set compatibility test methods for all
  Function Sets.

  The API provides access to Maya Objects as generic MObjects.  Under
  the C++ class scheme MObjects simply have type MObject with no base
  or derived hierarchy.  However, MObjects may be many different types
  of model or scene objects, from Attributes to Transforms, within
  Maya.  This allows many different types of objects to be moved
  across or accessed through the API without undue concern on the part
  of plug-in developers for the type of object being manipulated.

  Since it is impractical to provide every applicable method on
  MObjects, the methods applicable to Maya Objects are encapsulated in
  Function Sets.  Function Sets can be attached to compatible MObjects
  to provide an external interface to methods appropriate to that
  MObject.  All Function Sets provide a method setObject() which
  attaches them to the specified Maya Object.  Additionally, most
  Function Sets provide a version of their constructor which attaches
  the new Function Set to a specified MObject.

  The link between an MObject and the role it performs as a Maya scene
  or model object, as well as the compatibility between MObjects and
  Function Sets is managed by the API Run-Time Type Identification
  (RTTI) system.  The two key concepts of this system are the Maya
  Object type and the Function Set type (both are MFn::Type).  All
  MObjects have one and only one Maya Object type.  All Function Sets
  have one and only one Function Set type.  MObjects may, however, be
  compatible with many types of Function Sets.  This compatibility
  follows the class hierarchy of the Function Sets.  Thus an MObject
  with Maya Object type MFn::kNurbsSurface would be compatible with
  MFnNurbsSurface, MFnDagNode, MFnDependencyNode, MFnNamedObject and
  MFnBase.

  Any MObject can be queried with the MObject::hasFn() method to
  determine if it is comaptible with a given Function Set.

  The purpose of the Base Function Set (MFnBase) is to provide methods for
  determining whether or not a Function Set is compatible with a given Maya
  Object (MObject) type (MFn::Type) or a specific MObject.  See:
                    MFnBase::hasObj(MFn::Type)
                            and
                    MFnBase::hasObj(const MObject &)

  As well, this Function Set provides virtual methods for determining the type
  of a Function Set under the API RTTI system.
*/
class OPENMAYA_EXPORT MFnBase
{
public:
    virtual             ~MFnBase();
    virtual MFn::Type   type() const;
    bool                hasObj( MFn::Type ) const;
    bool                hasObj( const MObject & ) const;
    MObject             object( MStatus* ReturnStatus = NULL ) const;
    virtual MStatus     setObject( MObject & object );

BEGIN_NO_SCRIPT_SUPPORT:

    //! NO SCRIPT SUPPORT
    virtual MStatus     setObject( const MObject & object );

END_NO_SCRIPT_SUPPORT:

    static const char* className();

protected:
    MFnBase();
    void                setPtr( MPtrBase* );
    void                setPtr( const MPtrBase* );
    void                setPtrNull();
    virtual bool        objectChanged( MFn::Type, MStatus * );
    MPtrBase*           f_ptr;      // initialized/set with volatile
    const MPtrBase*     f_constptr; // initialized/set with volatile/const

    // Specific for function sets which use internally reference
    // counted objects!  Only those function sets which use these
    // objects need to set this to true.  By default it is set to
    // false.
    //
    // Classes which do not use internally reference counted objects
    // must not tamper with this boolean value. Doing so can cause
    // crashes when dealing with manually deleted objects.
    //
    bool                fIsReferenceCounted;

private:
    MFnBase( const MFnBase &rhs );
    MFnBase & operator=( const MFnBase & );
    MFnBase * operator& () const;
};

// ****************************************************************************
#define declareMinimalMFn( MFnClass )                               \
    public:                                                         \
        virtual MFn::Type type() const;                             \
        virtual ~MFnClass();                                        \
                                                                    \
        static const char* className();                             \
                                                                    \
    private:                                                        \
        MFnClass( const MFnClass &rhs );                            \
        MFnClass & operator=( const MFnClass & );                   \
        MFnClass * operator& () const;

#define declareMFn( MFnClass, MFnParentClass )                      \
    declareMinimalMFn( MFnClass );                                  \
    public:                                                         \
        MFnClass() {};                                              \
        MFnClass( MObject & object, MStatus * ReturnStatus = NULL )

#define declareMFnConstConstructor( MFnClass, MFnParentClass )      \
        MFnClass( const MObject & object, MStatus * ReturnStatus = NULL )

// Standard MFn class interface *without* the class constructor. This
// is to allow derived MFn classes to optionally specify their own
// custom constructor. For example if they wanted to declare that they
// use internally reference counted objects, they could set fIsReferenceCounted
// to true inside their own custom constructor.
//
#define declareMFnNoVoidConstructor( MFnClass, MFnParentClass )     \
    declareMinimalMFn( MFnClass );                                  \
    public:                                                         \
        MFnClass( MObject & object, MStatus * ReturnStatus = NULL )

#define declareMFnNoVoidConstructorConstConstructor( MFnClass, MFnParentClass )         \
        MFnClass( const MObject & object, MStatus * ReturnStatus = NULL )

#endif /* __cplusplus */
#endif /* _MFnBase */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:37:31.977

我没有看到`MFnTransform::MFnTransform(const MFnTransform&)`任何地方定义的构造函数（您没有提供足够的代码，但我认为它已被隐式定义为私有）但没关系 - 您可能不需要它。只是改变：

```
MFnTransform tFn = MFnTransform(result->_group, &status); 
```

至：

```
MFnTransform tFn(result->_group, &status); 
```

# android - 解析数组android中的JSON值

> ID：12067654
> 
> 赞同：0
> 
> 时间：2012-08-22T06:47:15.117
> 
> 标签：android, json

这是我想在我的应用程序中解析的 JSON 数据：

```
{
  "viewdeal":[
  {
     "viewdeal1":{
        "teetimeId":"33",
        "golfcourseId":"127",
        "offers":"descount of $2",
        "time":"8\/7\/pm",
        "amount":"90",
        "month":"august",
        "year":"2012",
        "date":"21",
        "day":"monday",
        "created_date":"0",
        "golfcourse_name":"SilverHorn Golf Club"
     },
     "msz":"Book"
   }
 ]
} 
```

我用来解析 JSON 数据的代码是：

```
JsonParser jParser = new JsonParser();
JSONObject json = jParser.getJSONfromUrl("http://mygogolfteetime.com/iphone/viewdeal/127");
JSONArray viewdeal = json.getJSONArray(TAG_VWDL);
                vwdlsList.clear();
                for(int i=0; i<viewdeal.length(); i++)
                {
                    JSONObject v1 = viewdeal.getJSONObject(i);
                    msz = v1.getString(TAG_MSZ);
                    viewdeal1 = v1.getString(TAG_VWDL1);
                    JSONArray viewdeal1 = json.getJSONArray(TAG_VWDL1); 
                    for(int j=0; j<viewdeal1.length(); j++)
                    {
                        JSONObject v2 = viewdeal.getJSONObject(j);
                        teetimeId = v2.getString(TAG_TTIMEID);
                        golfcourseId = v2.getString(TAG_GLFCRSID);
                        offers = v2.getString(TAG_OFR);
                        time = v2.getString(TAG_TIME);
                        amount = v2.getString(TAG_AMNT);
                        month = v2.getString(TAG_MNTH);
                        year = v2.getString(TAG_YEAR);
                        date = v2.getString(TAG_DATE);
                        day = v2.getString(TAG_DAY);
                        created_date = v2.getString(TAG_CRTDATE);
                        golfcourse_name = v2.getString(TAG_GLFCRSNAME);
                    }

                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put(TAG_TTIMEID, teetimeId);
                    map.put(TAG_GLFCRSID, golfcourseId);
                    map.put(TAG_MSZ, msz);
                    map.put(TAG_OFR, offers);
                    map.put(TAG_TIME, time);
                    map.put(TAG_AMNT, amount);
                    map.put(TAG_MNTH, month);
                    map.put(TAG_YEAR, year);
                    map.put(TAG_DATE, date);
                    map.put(TAG_DAY, day);
                    map.put(TAG_CRTDATE, created_date);
                    map.put(TAG_GLFCRSNAME, golfcourse_name);

                    vwdlsList.add(map);
                }
            } 
```

在上面的代码中，我能够解析 msz 和 viewdeal1 的值，但是当我尝试解析 viewdeal1 中的剩余值时，我在 LogCat 中收到以下消息：

```
08-22 12:03:46.034: V/GoGolf(1178): org.json.JSONException: No value for viewdeal1 
```

如何解析 viewdeal1 中的剩余值。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:12:24.190

尝试这个...

```
nParser jParser = new JsonParser();
JSONObject json = jParser.getJSONfromUrl("http://mygogolfteetime.com/iphone/viewdeal/127");
JSONArray viewdeal = json.getJSONArray(TAG_VWDL);
                vwdlsList.clear();
                for(int i=0; i<viewdeal.length(); i++)
                {

             ---->> **JSONObject v1= viewdeal.getJSONObject(i).getJSONObject("viewdeal1");**

                         .....
                         .....      
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:58:42.553

您两次要求“viewdeal1”键：

```
 viewdeal1 = v1.getString(TAG_VWDL1);
     JSONArray viewdeal1 = json.getJSONArray(TAG_VWDL1); 
```

第二行是正确的，您希望将其作为**对象**，应删除第一个列表。

```
 JSONObject viewdeal1 = json.getJSONObject(TAG_VWDL1); 
```

* * *

如果您检查 LogCat，它会告诉您确切的行：

高尔夫(1178)

这是 GoGolf.java 第 1178[行，在 eclipse 中打开行号，](http://www.mkyong.com/wp-content/uploads/2012/02/line-number-eclipse-1.png)我猜第 1178 行是`viewdeal1 = v1.getString(TAG_VWDL1);`因为`No value for viewdeal1`它找不到`String`与该键匹配的，因为它是`JSONObject`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:01:43.757

嗨，这`viewdeal1`不是`array`一个`object`

改变

```
JSONArray viewdeal1 = json.getJSONArray(TAG_VWDL1); 
```

至

```
JSONObject viewdeal1 = json.getJSONObject(TAG_VWDL1); 
```

并删除

```
viewdeal1 = v1.getString(TAG_VWDL1); 
```

`array`并请删除 for 循环，因为没有`viewdeal1`

a`json array`以`'['`括号开头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:25:09.190

尝试这个

```
JsonParser jParser = new JsonParser();
JSONObject json = jParser.getJSONfromUrl("http://mygogolfteetime.com/iphone/viewdeal/127");
 JSONArray viewdeal = json.getJSONArray(TAG_VWDL);
            vwdlsList.clear();

for(int i=0; i<</>viewdeal.length(); i++)
          {
                JSONObject v1 = viewdeal.getJSONObject(i);
                msz = v1.getString(TAG_MSZ);
JSONObject v2 = v1.getJSONObject(TAG_VWDL1);
 teetimeId = v2.getString(TAG_TTIMEID);
                    golfcourseId = v2.getString(TAG_GLFCRSID);
                    offers = v2.getString(TAG_OFR);
                    time = v2.getString(TAG_TIME);
                    amount = v2.getString(TAG_AMNT);
                    month = v2.getString(TAG_MNTH);
                    year = v2.getString(TAG_YEAR);
                    date = v2.getString(TAG_DATE);
                    day = v2.getString(TAG_DAY);
                    created_date = v2.getString(TAG_CRTDATE);
                    golfcourse_name = v2.getString(TAG_GLFCRSNAME);
 }

                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_TTIMEID, teetimeId);
                map.put(TAG_GLFCRSID, golfcourseId);
                map.put(TAG_MSZ, msz);
                map.put(TAG_OFR, offers);
                map.put(TAG_TIME, time);
                map.put(TAG_AMNT, amount);
                map.put(TAG_MNTH, month);
                map.put(TAG_YEAR, year);
                map.put(TAG_DATE, date);
                map.put(TAG_DAY, day);
                map.put(TAG_CRTDATE, created_date);
                map.put(TAG_GLFCRSNAME, golfcourse_name);

                vwdlsList.add(map);
            }
        } 
```

# postgresql - 如何从我的 postgresql 查询中获取最小值、中值和最大值？

> ID：12067656
> 
> 赞同：29
> 
> 时间：2012-08-22T06:47:19.707
> 
> 标签：postgresql

我写了一个查询，其中一列是一个月。从中我必须得到最小月、最大月和中月。以下是我的查询。

```
select ext.employee,
       pl.fromdate,
       ext.FULL_INC as full_inc,
       prevExt.FULL_INC as prevInc,
       (extract(year from age (pl.fromdate))*12 +extract(month from age (pl.fromdate))) as month,
       case
         when prevExt.FULL_INC is not null then (ext.FULL_INC -coalesce(prevExt.FULL_INC,0))
         else 0
       end as difference,
       (case when prevExt.FULL_INC is not null then (ext.FULL_INC - prevExt.FULL_INC) / prevExt.FULL_INC*100 else 0 end) as percent
from pl_payroll pl
  inner join pl_extpayfile ext
          on pl.cid = ext.payrollid
         and ext.FULL_INC is not null
  left outer join pl_extpayfile prevExt
               on prevExt.employee = ext.employee
              and prevExt.cid = (select max (cid) from pl_extpayfile
                                 where employee = prevExt.employee
                                 and   payrollid = (
                                   select max(p.cid)
                                   from pl_extpayfile,
                                        pl_payroll p
                                   where p.cid = payrollid
                                   and   pl_extpayfile.employee = prevExt.employee
                                   and   p.fromdate < pl.fromdate
                                 )) 
              and coalesce(prevExt.FULL_INC, 0) > 0 
where ext.employee = 17 
and (exists (
    select employee
    from pl_extpayfile preext
    where preext.employee = ext.employee
    and   preext.FULL_INC <> ext.FULL_INC
    and   payrollid in (
      select cid
      from pl_payroll
      where cid = (
        select max(p.cid)
        from pl_extpayfile,
             pl_payroll p
        where p.cid = payrollid
        and   pl_extpayfile.employee = preext.employee
        and   p.fromdate < pl.fromdate
      )
    )
  )
  or not exists (
    select employee
    from pl_extpayfile fext,
         pl_payroll p
    where fext.employee = ext.employee
    and   p.cid = fext.payrollid
    and   p.fromdate < pl.fromdate
    and   fext.FULL_INC > 0
  )
)
order by employee,
         ext.payrollid desc 
```

如果不可能，是否可以获得最大月份和最小月份？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2016-10-29T07:45:15.123

要计算*PostgreSQL*中的中位数，只需取 50% 的百分位数（无需添加额外的函数或任何东西）：

```
SELECT PERCENTILE_CONT(0.5) WITHIN GROUP(ORDER BY x) FROM t; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-22T07:00:27.407

您想要名为`min`and的聚合函数`max`。请参阅 PostgreSQL 文档和教程：

*   [http://www.postgresql.org/docs/current/static/tutorial-agg.html](http://www.postgresql.org/docs/current/static/tutorial-agg.html)
*   [http://www.postgresql.org/docs/current/static/functions-aggregate.html](http://www.postgresql.org/docs/current/static/functions-aggregate.html)

PostgreSQL 中没有内置的中位数，但是已经实现并为 wiki 做出了贡献：

[http://wiki.postgresql.org/wiki/Aggregate_Median](http://wiki.postgresql.org/wiki/Aggregate_Median)

它的使用方式`min`与`max`加载后相同。用 PL/PgSQL 编写会慢一些，但如果速度很重要，你甚至可以适应那里的 C 版本。

**更新**评论后：

听起来您想在单个结果旁边显示统计汇总。您不能使用普通的聚合函数来执行此操作，因为您无法引用`GROUP BY`结果列表中没有的列。

您将需要从子查询中获取统计信息，或者将您的聚合用作窗口函数。

给定虚拟数据：

```
CREATE TABLE dummystats ( depname text, empno integer, salary integer );
INSERT INTO dummystats(depname,empno,salary) VALUES
('develop',11,5200),
('develop',7,4200),
('personell',2,5555),
('mgmt',1,9999999); 
```

...并[从 PG wiki 添加中位数聚合](http://wiki.postgresql.org/wiki/Aggregate_Median)后：

您可以使用普通聚合执行此操作：

```
regress=# SELECT min(salary), max(salary), median(salary) FROM dummystats;
 min  |   max   |         median          
------+---------+----------------------
 4200 | 9999999 | 5377.5000000000000000
(1 row) 
```

但不是这个：

```
regress=# SELECT depname, empno, min(salary), max(salary), median(salary)
regress-# FROM dummystats;
ERROR:  column "dummystats.depname" must appear in the GROUP BY clause or be used in an aggregate function 
```

因为在聚合模型中将平均值与单个值一起显示是没有意义的。您可以显示组：

```
regress=# SELECT depname, min(salary), max(salary), median(salary) 
regress-# FROM dummystats GROUP BY depname;
  depname  |   min   |   max   |          median          
-----------+---------+---------+-----------------------
 personell |    5555 |    5555 | 5555.0000000000000000
 develop   |    4200 |    5200 | 4700.0000000000000000
 mgmt      | 9999999 | 9999999 |  9999999.000000000000
(3 rows) 
```

...但听起来你想要个人价值观。为此，您必须使用一个[window](http://www.postgresql.org/docs/current/static/tutorial-window.html)，这是 PostgreSQL 8.4 中的一个新功能。

```
regress=# SELECT depname, empno, 
                 min(salary) OVER (), 
                 max(salary) OVER (), 
                 median(salary) OVER () 
          FROM dummystats;

  depname  | empno | min  |   max   |        median         
-----------+-------+------+---------+-----------------------
 develop   |    11 | 4200 | 9999999 | 5377.5000000000000000
 develop   |     7 | 4200 | 9999999 | 5377.5000000000000000
 personell |     2 | 4200 | 9999999 | 5377.5000000000000000
 mgmt      |     1 | 4200 | 9999999 | 5377.5000000000000000
(4 rows) 
```

也可以看看：

*   [http://www.postgresql.org/docs/current/static/tutorial-window.html](http://www.postgresql.org/docs/current/static/tutorial-window.html)
*   [http://www.postgresql.org/docs/current/static/functions-window.html](http://www.postgresql.org/docs/current/static/functions-window.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-01T21:07:18.413

中位数的另一种选择：

```
SELECT x
FROM table
ORDER BY x
LIMIT 1 offset (select count(*) from x)/2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-31T15:36:24.063

要找到中位数：例如考虑我们在表中有 6000 行。首先我们需要从原始表中取出一半行（因为我们知道中位数总是中间值）所以这里 6000 的一半是 3000（取 3001以获得精确的两个中间值）。

```
SELECT *
      FROM (SELECT column_name
            FROM Table_name
            ORDER BY column_name
            LIMIT 3001)As Table1
      ORDER BY column_name DESC ---->Look here we used DESC(Z-A)it will display the last 
                                --   two values(using LIMIT 2) i.e (3000th row and 3001th row) from 6000 
                                --   rows  
      LIMIT 2; 
```

# database - 关联一些表格的最佳方式是什么？

> ID：12067663
> 
> 赞同：1
> 
> 时间：2012-08-22T06:48:06.633
> 
> 标签：database, doctrine-orm

我想制作一个应用程序，其中会有不同的用户，每个用户都会有一组朋友，这些朋友将被分类。会有一些默认类别，但用户可以添加自己的类别。我想知道哪种方法是最好的方法。

我的想法是有 3 个表 - 用户、朋友和类别。

用户表具有朋友和类别的字段（一对多）（但我不知道用户表是否需要有关朋友和类别的任何信息）。

朋友表有一个类别字段（一对多）和一个用户字段（多对一）。

类别表具有用户（多对多？）和朋友（多对多？）的字段。

我也不确定关系。我将 PHP 与 MySQL 以及 Symfony2 和 Doctrine2 一起使用。请帮忙！

* * *

**编辑**

也许我没有准确描述我需要什么。当您打开应用程序时，您会看到一个登录表单。如果您没有帐户，则应该注册 - 注册会创建一个新用户。该用户与其他用户没有联系（我还是编程新手，我想要一些更简单的东西，所以它就像电话簿一样）。每个用户都有一个朋友列表，朋友是表中的一行，其中包含姓名、地址、电话、电子邮件、照片、生日等字段，但它们是由当前用户添加的。朋友不是用户。每个用户实际上都是一个带有密码和用户名的帐户，当您登录时，只有一个朋友列表。因此，每个用户都为自己创建类别，而他与其他用户及其类别无关。该类别将只有 id 和 name。

所以这个想法是你创建一个帐户，然后创建一些类别并向他们添加朋友只是为了在你的朋友出生或他们居住的地方或他们的电话号码时有一个组织者，但你创建它们并添加有关的信息他们，他们是用户自己。它不像社交网络。只是一个笔记本，每个用户都可以在其中写下他朋友的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:41:48.597

我可以为此建议设置下表（此方案也适用于电话簿或社交网络任务）：

存储有关用户的所有信息的“用户”表：

*   用户身份
*   姓名
*   电话
*   地址
*   ...（任何其他领域）

存储关系类别信息的表“类别”：

*   类别 ID
*   姓名

存储有关用户之间关系的信息的“关系”表：

*   FirstUserId -> 链接到用户表
*   SecondUserId -> 链接到用户表
*   CategoryId -> 链接到类别表

因此，任何用户都可以添加新类别，然后在向另一个人添加新关系时引用它们。

如果您需要选择所有用户的朋友，您必须：

```
select fr.* from Relationships r join Users fr on r.SecondUserId = fr.UserId where r.FirstUserId = <Current user id> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:10:01.870

首先，您需要了解[交集表](http://en.wikipedia.org/wiki/Junction_table)的作用：如果用户 A 将用户 B 标记为朋友（即与自身存在多对多关系`user`），并且您创建一个新表来表示该关系（表），有关此“友谊”的`friends`任何其他信息都应链接到该表。因此，如果用户以某种方式对他的朋友进行分类，则该类别适用于`friends`，而不适用于`user`。没有必要在*此特定目的*`category`之间建立关系。`user`

 ***更新：**由于朋友不是用户，因此该`friends`表不会是交集表（因此只有一个对 的引用`user`，表示“所有者”），但答案的其余部分仍然适用。

我假设每个类别将是`category`表中的一行。*可能会添加有关该类别的*其他信息，但应仅限于此。例如，如果您想知道哪个用户创建了一个类别，您可以添加一个外键来`user`标记例如“所有者”或“created_by”。如果一个用户创建的类别不被其他人看到，这可能很有用。

最后，您可以`friends`与`category`. 如果用户 A 最多可以将用户 B 归入一个类别，那么来自`friends`to的外键`category`就足够了（即一对多关系）。否则，您可能需要另一个多对多关系，因此应该创建一个额外的交集表（例如`friend_category`）。

[您可以通过使用反规范化](http://en.wikipedia.org/wiki/Denormalization)来避免这个额外的表，在`friends`其中两个用户相同（并且顺序相同）但类别不同的​​多行中（另请参见此[示例](http://en.wikipedia.org/wiki/First_normal_form#Normalization_beyond_1NF)）。这是否有利超出了此答案的范围，但恕我直言，现在使用额外的表更好（它可能看起来更复杂，但从长远来看会更容易维护）。（**更新：**如果`friends`不是交集表，这样的非规范化并不是一个真正的选择，所以坚持使用该`friend_category`表）

最后，您的布局将如下所示：

```
user              friends           friend_category   category
----              -------           ---------------   --------
(user fields) <-- user (owner)    <--  friend         (category fields)
                  (friend fields)      category   --> user (owner) --+
^                                                                    |
|                                                                    |
+--------------------------------------------------------------------+ 
```*

# android - 应用程序不启动？

> ID：12067665
> 
> 赞同：-1
> 
> 时间：2012-08-22T06:48:12.097
> 
> 标签：android, android-activity

这是我遇到的一个奇怪的错误，我的活动或应用程序没有启动。一旦我触摸我的应用程序的图标并按下锁定按钮，然后当我解锁它时，我看不到我的应用程序已打开，而且它也不处于活动应用程序状态。根据应用程序运行的流程，它应该在后面打开还是至少可以在活动应用程序状态下看到？有什么办法可以解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:52:38.143

也许您可以从 adb 跟踪您的代码或在 android sdk 工具文件夹中查找工具 查找获取日志的工具

# javascript - jQuery 更改为返回选中或未选中状态

> ID：12067669
> 
> 赞同：1
> 
> 时间：2012-08-22T06:48:25.307
> 
> 标签：javascript, jquery, callback, return, onchange

我正在尝试使用以下函数返回`true`或`false`，基于复选框的状态，我正在使用`jQuery` `iButton`插件（隐藏复选框并用`iPhone`支持拖动事件的样式滑动按钮替换它）我发现的唯一方法检测拖动以及单击事件正在使用 jQuery 更改。

```
var testChecked= function(){
    $('#status').change(function(){ // #status is the checkbox ID
        if($(this).is(':checked')){
            console.log('is_checked');//works
            return true;
        }
        else{
            console.log('is_unchecked');//works
            return false 
        } 
    });
} 
```

[http://jsfiddle.net/fnt5J/1/](http://jsfiddle.net/fnt5J/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:21:57.223

我不知道`status`你的代码中有什么。

正如你提到的 iButton jQuery 插件，我在谷歌搜索后找到了这个页面。[http://www.givainc.com/labs/ibutton_jquery_plugin.htm](http://www.givainc.com/labs/ibutton_jquery_plugin.htm)

我刚刚`$('#iButton').attr('checked');` 在 chrome 控制台中输入了这个语句，我得到了正确的状态，`true`或者`false`基于 ON 和 OFF 状态。

所以我认为你必须在你的代码中做以下事情。

```
$('#status').change(function(){
    return $('#iButton').attr('checked');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T19:39:57.650

在 iButton jQuery Plug-in 中有许多可用的选项，因此您可以使用事件处理程序：change。

```
$('#ibutton').iButton({
  change: function (){
    if($('#ibutton').attr('checked'))
       console.log("TRUE");
    else
       console.log("FALSE");
  }
}); 
```

# reporting-services - 显示报告服务日志的代码行号

> ID：12067673
> 
> 赞同：1
> 
> 时间：2012-08-22T06:48:42.010
> 
> 标签：reporting-services, ssrs-2008

我正在尝试将自定义 HttpModule 添加`MyHttpModuler`到报告服务。但是当我将我的自定义 HttpModule 部署到位于远程机器上的 SSRS 时。然后浏览报表管理站点中的一些报表。我的页面出现了一些错误。我曾经检查 SSRS 日志文件夹下的日志文件以了解发生了什么。而且我总是发现其中记录了一些异常信息。但是异常日志不显示代码行号。日志的示例可能如下所示。

```
library!ReportServer_0-1!728!08/22/2012-13:36:29:: e ERROR: Throwing Microsoft.ReportingServices.Diagnostics.Utilities.InternalCatalogException: An internal error occurred on the report server. See the error log for more details., ;
 Info: Microsoft.ReportingServices.Diagnostics.Utilities.InternalCatalogException: An internal error occurred on the report server. See the error log for more details. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at HandlerLib.MyHttpModuler.TryAuthenticate(HttpApplication context)
   at HandlerLib.MyHttpModuler.Application_BeginRequest(Object sender, EventArgs e)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

有没有办法显示异常日志的代码行，以便我可以了解我的代码缺陷的更多细节？谢谢

# doctrine - 扩展 SonataUser - 更新 setter getter

> ID：12067674
> 
> 赞同：1
> 
> 时间：2012-08-22T06:48:49.733
> 
> 标签：doctrine, symfony-sonata, symfony-2.1

我用 SonataEasyExtends 扩展了 SonataUser 所以我现在有一个`Application/Sonata/UserBundle`

我在模型中添加了一个字段`Application/Sonata/UserBundle/Resources/config/doctrine/User.orm.xml`

试图用

```
$ php app/console doctrine:generate:entities Application/Sonata/UserBundle/Entity/User 
```

似乎进展顺利。现在尝试更新数据库

```
$ php app/console doctrine:schema:update --force 
```

我明白了

> PHP 致命错误：对 Application\Sonata\UserBundle\Entity\User::$groups 的访问级别必须受到保护（如 FOS\UserBundle\Entity\User 类）或在 /home/glide/bouygues/src/Application/Sonata 中的访问级别较弱/UserBundle/Entity/User.php 第 26 行

所以问题是：我应该如何正确更新 getter 和 setter `Entity/User.php`，我应该重用 EasyExtends 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T19:10:27.727

我遇到了这个问题，简单的解决方案是将groups变量的声明从public更改为protected：

```
 /**
   * @var \Doctrine\Common\Collections\Collection
   */
   protected $groups; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:56:32.800

你能粘贴你的实体和xml配置吗？

该错误往往意味着您的变量“$groups”需要受到保护，因此它要么被声明为“普通”var，要么被声明为私有。

# java - 如何为类的每个对象生成一个唯一的 Id？

> ID：12067686
> 
> 赞同：-2
> 
> 时间：2012-08-22T06:49:54.370
> 
> 标签：java

将`java.util.UUID`适用于 Java 中的类吗？也就是说，我有一个需要唯一 id 的类，这样每次我在 main 方法中构造该类的对象时，它都会有一个唯一的 ID 号。

构造函数可能看起来像这样：

```
class flight{
        private UUID id;

        public void flight(){
           id = UUID.randomUUID();
        }
} 
```

主方法调用可能看起来像这样：

```
public static void main(String[] args){
    flight[] allflights = new flight[100];
    flight tempFlight;

    for(int i=0; i<100; i++){
        tempFlight = new flight()
        allflights[i] = tempFlight;
    } 
```

这是否会为航班数组中的所有航班生成一个唯一 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:58:52.487

正如[文档](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html#randomUUID%28%29)所解释的，这确实会为每个对象生成一个唯一的 id：

> 静态工厂检索类型 4（伪随机生成）`UUID`。它`UUID`是使用加密强的伪随机数生成器生成的。

正如[Vidkor](https://stackoverflow.com/users/240078/vikdor)在评论中解释的那样，尽管[有发生碰撞的可能性](https://stackoverflow.com/questions/325443/generate-uuid-in-java)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:00:57.150

是的，这就是 UUID 的用途。每次调用 randomUUID() 都会得到一个新的随机 UUID；UUID 是一个 128 位的值。

所以理论上你在使用随机 UUID 时可能会发生冲突，但正如它所说的那样，使用了加密强的随机生成器，我认为你不需要担心这种可能性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T06:56:02.120

你的问题的答案就在你的问题中。

运行打印 UUID 的代码，您会发现，添加 有什么难的`System.out.println`？

public static void main(String[] args){ flight[] allflights = new flight[100]; 飞行温度飞行；

```
for(int i=0; i<100; i++){
    tempFlight = new flight()
    allflights[i] = tempFlight;
    System.out.println(tempFlight.getId());
} 
```

# mysql - Mysql按日期分组显示

> ID：12067687
> 
> 赞同：2
> 
> 时间：2012-08-22T06:49:55.897
> 
> 标签：mysql

我正在为 mysql 中的酒店管理应用程序制作预订模块，我正在尝试执行以下操作：

假设有一个房间，并且在这些日期已被 3 位客户预订：

```
2012-09-01 12:00:00 Customer #1
2012-09-02 12:00:00 Customer #1
2012-09-03 12:00:00 Customer #1
2012-12-03 12:00:00 Customer #2
2013-02-01 12:00:00 Customer #3
2013-02-02 12:00:00 Customer #3 
```

这些是我的mysql数据。我正在尝试根据这些数据制作主视图：

```
2012-09-01 :: 2012-09-03 -> Customer #1
2012-12-03 :: 2012-12-03 -> Customer #2
2013-02-01 :: 2013-02-02 -> Customer #3 
```

这样当管理员单击相应的客户/日期链接时，将仅显示该客户的数据（取自第一个屏幕）作为详细视图。

这可能吗？它需要存储过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:54:23.990

```
SELECT
DATE(MIN(your_date_column)), DATE(MAX(your_date_column)), customer
FROM your_table
GROUP BY customer 
```

# java-me - lwuit 选项卡数

> ID：12067688
> 
> 赞同：1
> 
> 时间：2012-08-22T06:49:58.957
> 
> 标签：java-me, lwuit, nokia-s40

我已经创建了许多 LWUIT 选项卡，当我在表单屏幕上显示这些选项卡时，我只能在表单屏幕上看到 4 个选项卡，其余选项卡正在显示但那些隐藏了，如何使用用户友好的选项卡显示我的表单？

```
tabs.addTab("Tab1", newsList);
tabs.addTab("Tab2", myNewsList);
tabs.addTab("Tab3", cinemaNewsList);
tabs.addTab("Tab4", gossipList);
tabs.addTab("Tab5", list);
tabs.addTab("Tab5", list);

form1.addComponent(BorderLayout.CENTER, tabs);

form1.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:31:36.473

它会根据屏幕大小而有所不同。如果您的屏幕尺寸为 240*320，它将仅显示 4 个选项卡。如果您的屏幕尺寸为 320*240，它将显示所有 6 个选项卡。

您只能通过使用按钮以一种方式执行此操作。

```
 int tabsCount = 6;

    Button btnOne = new Button(" Tab 1 ");
    btnOne.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    Button btnTwo = new Button(" Tab 2 ");
    btnTwo.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    Button btnThree = new Button(" Tab 3 ");
    btnThree.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    Button btnFour = new Button(" Tab 4 ");
    btnFour.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    Button btnFive = new Button(" Tab 5 ");
    btnFive.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    Button btnSix = new Button(" Tab 6 ");
    btnSix.setPreferredW(Display.getInstance().getDisplayWidth()/tabsCount);

    tabs.addTab(btnOne, new Label("Tab one selected"));
    tabs.addTab(btnTwo, new Label("Tab Two selected"));
    tabs.addTab(btnThree, new Label("Tab three selected"));
    tabs.addTab(btnFour, new Label("Tab four selected"));
    tabs.addTab(btnFive, new Label("Tab five selected"));
    tabs.addTab(btnSix, new Label("Tab six selected")); 
```

它不会在小屏幕上完全显示按钮的文本。但是，当该选项卡聚焦时，该标题将显示为股票代码。

# java - 如何使用列表 findByCriteria(Criterion...criterion) 函数

> ID：12067690
> 
> 赞同：-3
> 
> 时间：2012-08-22T06:50:13.697
> 
> 标签：java, hibernate

您好，我在我的应用程序中添加了持久层，我想使用下面给出的功能

```
List<C> findByCriteria(Criterion... criterian); 
```

请告诉我如何使用此功能创建具有限制、预测和顺序的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:52:32.187

我想[医生](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html)会回答你的问题。（来自[hibernate 中的 findByCriteria](https://stackoverflow.com/questions/6813207/findbycriteria-in-hibernate)）

# java - 通过远程桌面共享查看时，未修饰的 JInternalFrame 变为修饰

> ID：12067691
> 
> 赞同：7
> 
> 时间：2012-08-22T06:50:15.680
> 
> 标签：java, swing, remote-desktop, jinternalframe

我面临`JInternalFrame`实施问题。我做了`JInternalFrame`未装饰的，以便`JInternalFrame`删除标题栏和边框。在以下情况下会出现此问题。

1.  在 Windows 7 机器上执行程序。

    *   此时`JInternalFrame`遗体未装饰。
2.  使用来自另一台机器的远程桌面共享访问 Windows 7 机器。

    *   现在内部框架的标题栏和边框变得可见。

此问题仅在 Windows 7 机器中出现，在 Windows XP 中不会出现。您可以使用来自另一台 Windows 7 机器或 Windows XP 机器的远程桌面共享来访问 Windows 7 机器。

此外，如果您先使用远程桌面共享访问机器，然后执行该程序，则`JInternalFrame`仍然没有修饰。

重现步骤

第 1 步：在 Windows 7 机器上执行应用程序。

第 2 步：使用远程桌面共享从另一台 Windows 7 或 Windows XP 机器访问 Windows 7 机器。

第 3 步：检查应用程序的 GUI

结果：- 未装饰的标题栏和边框`JInternalFrame`变得可见。

如果有人遇到过这个问题或者如果有人有这个问题的解决方案，请分享你的想法。

下面给出了一个示例代码，您可以使用它来重现此问题。

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */ 

import javax.swing.JInternalFrame;
import javax.swing.JDesktopPane;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JMenuBar;
import javax.swing.JFrame;
import javax.swing.KeyStroke;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

import java.awt.event.*;
import java.awt.*;

/*
 * InternalFrameDemo.java requires:
 *   MyInternalFrame.java
 */
public class InternalFrameDemo extends JFrame
                               implements ActionListener {
    JDesktopPane desktop;

    public InternalFrameDemo() {
        super("InternalFrameDemo");

        //Make the big window be indented 50 pixels from each edge
        //of the screen.
        int inset = 50;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(inset, inset,
                  screenSize.width  - inset*2,
                  screenSize.height - inset*2);

        //Set up the GUI.
        desktop = new JDesktopPane(); //a specialized layered pane
        createFrame(); //create first "window"
        setContentPane(desktop);
        setJMenuBar(createMenuBar());

        //Make dragging a little faster but perhaps uglier.
        desktop.setDragMode(JDesktopPane.OUTLINE_DRAG_MODE);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();

        //Set up the lone menu.
        JMenu menu = new JMenu("Document");
        menu.setMnemonic(KeyEvent.VK_D);
        menuBar.add(menu);

        //Set up the first menu item.
        JMenuItem menuItem = new JMenuItem("New");
        menuItem.setMnemonic(KeyEvent.VK_N);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_N, ActionEvent.ALT_MASK));
        menuItem.setActionCommand("new");
        menuItem.addActionListener(this);
        menu.add(menuItem);

        //Set up the second menu item.
        menuItem = new JMenuItem("Quit");
        menuItem.setMnemonic(KeyEvent.VK_Q);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_Q, ActionEvent.ALT_MASK));
        menuItem.setActionCommand("quit");
        menuItem.addActionListener(this);
        menu.add(menuItem);

        return menuBar;
    }

    //React to menu selections.
    public void actionPerformed(ActionEvent e) {
        if ("new".equals(e.getActionCommand())) { //new
            createFrame();
        } else { //quit
            quit();
        }
    }

    //Create a new internal frame.
    protected void createFrame() {
        MyInternalFrame frame = new MyInternalFrame();
        frame.setVisible(true); //necessary as of 1.3
        desktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {}
    }

    //Quit the application.
    protected void quit() {
        System.exit(0);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Make sure we have nice window decorations.
        JFrame.setDefaultLookAndFeelDecorated(true);

        //Create and set up the window.
        InternalFrameDemo frame = new InternalFrameDemo();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Display the window.
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}

/* Used by InternalFrameDemo.java. */
@SuppressWarnings("serial")
class MyInternalFrame extends JInternalFrame {
    static int openFrameCount = 0;
    static final int xOffset = 30, yOffset = 30;

    public MyInternalFrame() {
        super("Document #" + (++openFrameCount),
              true, //resizable
              true, //closable
              true, //maximizable
              true);//iconifiable

        //...Create the GUI and put it in the window...

        //...Then set the window size or call pack...
        setSize(300,300);
        // Undecorating the internal frame
        BasicInternalFrameTitlePane titlePane =  
            (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) this.getUI()).  
            getNorthPane();  
        this.remove(titlePane);
        this.setBorder(null);
        //Set the window's location.
        setLocation(xOffset*openFrameCount, yOffset*openFrameCount);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:59:52.890

对于 InternalFrame 实例，您需要将 undecorated 属性设置为 shared 而不是 .setUndecorated(true) 。

或尝试

```
JInternalFrame frame = new JInternalFrame("frame", false, false, false, false);
frame.putClientProperty("JInternalFrame.isPalette", Boolean.TRUE);
frame.getRootPane().setWindowDecorationStyle(JRootPane.NONE); 
```

# sql - Oracle中记录表类型上的光标

> ID：12067696
> 
> 赞同：1
> 
> 时间：2012-08-22T06:50:35.713
> 
> 标签：sql, oracle, stored-procedures, plsql, stored-functions

我有一个如下所示的声明

```
type respond_field
IS
  record
  (
    provider_id          VARCHAR2(100),
    provider_name        VARCHAR2(100));

type respond_field_group
IS
  TABLE OF respond_field INDEX BY BINARY_INTEGER; 
```

我为**respond_field_group**创建了一个变量， 并为这个虚拟表填充了值。我的问题是如何将此虚拟表转换/传输到游标。

我尝试过的是在respond_values下面显示**的是****respond_field_group**的变量

 **```
OPEN v_result_cursor for SELECT provider_id FROM TABLE (Cast(respond_values AS respond_field)); 
```

但我得到无效的数据类型

请帮助我找到解决此问题的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:34:49.720

您不能像这样使用 pl/sql 类型，只能使用 sql 类型（即在模式级别而不是包或过程级别定义的类型）。记录和关联数组（按表索引）是 pl/sql 类型。相反，您必须创建适当的对象类型并在代码中使用它们，例如：

```
SQL> create type respond_field as object
  2  (
  3    provider_id   varchar2(100),
  4    provider_name varchar2(100)
  5  )
  6  /

Type created.

SQL> create type respond_field_group as table of respond_field
  2  /

Type created.

SQL> create or replace function test_fun return respond_field_group as
  2    l_rfgroup respond_field_group := respond_field_group();
  3  begin
  4    l_rfgroup.extend(2);
  5    l_rfgroup(1) := respond_field('abc', '123');
  6    l_rfgroup(2) := respond_field('def', '456');
  7    return l_rfgroup;
  8  end;
  9  /

Function created.

SQL> select * from table(test_fun);

PROVIDER_ID     PROVIDER_NAME
--------------- ---------------
abc             123
def             456 
```**

# java - 将当前日期转换为整数

> ID：12067697
> 
> 赞同：44
> 
> 时间：2012-08-22T06:50:38.753
> 
> 标签：java, date

我想将当前日期转换为整数值。默认情况下，它返回 long。当我尝试将 long 转换为整数，然后我将整数值转换为日期时，意味着它显示 1970 年的日期，

```
 int i = (int) new Date().getTime();
 System.out.println("Integer : " + i);
 System.out.println("Long : "+ new Date().getTime());
 System.out.println("Long date : " + new Date(new Date().getTime()));
 System.out.println("Int Date : " + new Date(i)); 
```

输出如下：

```
Integer : 1292838124
Long : 1345617601771
Long date : Wed Aug 22 12:10:01 IST 2012
Int Date : Fri Jan 16 04:37:18 IST 1970 
```

任何人请帮助我，如何将当前日期转换为整数（10位数字）？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-22T06:56:57.867

问题是 Integer 不足以存储当前日期，您需要使用 Long。

日期在内部存储为自 1970 年 1 月 1 日以来的毫秒数。

最大 Integer 值为 2147483648，而自 1970 年以来的毫秒数目前约为 1345618537869

将最大整数值放入日期会得出 1970 年 1 月 26 日星期一。

编辑：根据以下评论显示除以 1000 的代码：

```
 int i = (int) (new Date().getTime()/1000);
    System.out.println("Integer : " + i);
    System.out.println("Long : "+ new Date().getTime());
    System.out.println("Long date : " + new Date(new Date().getTime()));
    System.out.println("Int Date : " + new Date(((long)i)*1000L));

Integer : 1345619256
Long : 1345619256308
Long date : Wed Aug 22 16:37:36 CST 2012
Int Date : Wed Aug 22 16:37:36 CST 2012 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-22T07:13:13.733

为了获取当前日期为整数（10 位数字），您需要将 new Date().getTime() 返回的 long 除以 1000。

这将在 int 范围内，并且在 2038 年 1 月 18 日之前有效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-10T18:38:13.880

如果您只需要一个表示自 1970 年 1 月 1 日以来经过的天数的整数，您可以尝试以下方法：

```
// magic number=
// millisec * sec * min * hours
// 1000 * 60 * 60 * 24 = 86400000
public static final long MAGIC=86400000L;

public int DateToDays (Date date){
    //  convert a date to an integer and back again
    long currentTime=date.getTime();
    currentTime=currentTime/MAGIC;
    return (int) currentTime; 
}

public Date DaysToDate(int days) {
    //  convert integer back again to a date
    long currentTime=(long) days*MAGIC;
    return new Date(currentTime);
} 
```

更短但可读性更低（稍微快一点？）：

```
public static final long MAGIC=86400000L;

public int DateToDays (Date date){
    return (int) (date.getTime()/MAGIC);
}

public Date DaysToDate(int days) {
    return new Date((long) days*MAGIC);
} 
```

希望这可以帮助。

编辑：这可以工作到 Fri Jul 11​​ 01:00:00 CET 5881580

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-12T23:02:27.030

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-22T07:00:24.177

你需要这样的东西（没有时间）吗？

```
public static Integer toJulianDate(Date pDate) {
if (pDate == null) {
  return null;
}
Calendar lCal = Calendar.getInstance();
lCal.setTime(pDate);
int lYear = lCal.get(Calendar.YEAR);
int lMonth = lCal.get(Calendar.MONTH) + 1;
int lDay = lCal.get(Calendar.DATE);
int a = (14 - lMonth) / 12;
int y = lYear + 4800 - a;
int m = lMonth + 12 * a - 3;
return lDay + (153 * m + 2) / 5 + 365 * y + y / 4 - y / 100 + y / 400 - 32045;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-20T20:40:00.403

我已经解决了这个问题，如下所示：

```
 long year = calendar.get(Calendar.YEAR);
    long month = calendar.get(Calendar.MONTH) + 1;
    long day = calendar.get(Calendar.DAY_OF_MONTH);
    long calcDate = year * 100 + month;
    calcDate = calcDate * 100 + day;
    System.out.println("int: " + calcDate); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-30T10:06:30.357

尝试这个

```
Calendar currentDay= Calendar.getInstance();
int currDate= currentDay.get(Calendar.DATE);
int currMonth= currentDay.get(Calendar.MONTH);
int currYear= currentDay.get(Calendar.YEAR);
System.out.println(currDate + "-" +  currMonth + "-" + currYear); 
```

使用 LocalDate 的另一种方法。

```
LocalDate today = LocalDate.now();
int currentDate= today.getDayOfMonth();
int currentMonth= today.getMonthValue();
int currentYear= today.getYear() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T06:58:33.247

你的问题是因为[getTime()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#getTime%28%29)。它总是返回以下。

> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

因为最大整数值小于返回值`getTime()`，所以为什么显示错误结果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-22T07:01:18.390

在我的 Java 7 上，输出不同：

```
Integer : 1293732698
Long : 1345618496346
Long date : Wed Aug 22 10:54:56 MSK 2012
Int Date : Fri Jan 16 02:22:12 MSK 1970 
```

这是预期的行为。

不可能将当前日期以毫秒为单位显示为整数（10 位数字），因为最新的可能日期是`Sun Apr 26 20:46:39 MSK 1970`：

```
Date d = new Date(9999_9999_99L);
System.out.println("Date: " + d);

Date: Sun Apr 26 20:46:39 MSK 1970 
```

您可能需要考虑以秒/分钟显示它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-22T07:08:36.840

可能你不能，Long 是比 Integer 更高的数据类型。

或者这个链接可能会帮助你

[http://www.velocityreviews.com/forums/t142373-convert-date-to-integer-and-back.html](http://www.velocityreviews.com/forums/t142373-convert-date-to-integer-and-back.html)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-11-23T21:47:51.257

很简单，真正创建一个代表程序默认开始日期的长变量 将日期获取到另一个长变量。然后减去长开始日期并转换为整数瞧，要读取并转换回来，只需加法而不是减法。显然，这取决于您需要多大的日期范围。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-01-15T06:23:58.443

Java`Date`到`int`转换：

```
public static final String DATE_FORMAT_INT = "yyyyMMdd";

public static String format(Date date, String format) {
    return isNull(date) ?  
    null : new SimpleDateFormat(format).format(date);
}

public static Integer getDateInt(Date date) {
    if (isNull(date)) {
        throw new IllegalArgumentException("Date must not be NULL");
    }

    return parseInt(format(date, DATE_FORMAT_INT));
} 
```

# c# - 通过连接 c# 和 mysql 如何删除一个 db 并再次创建它并连接？

> ID：12067704
> 
> 赞同：0
> 
> 时间：2012-08-22T06:51:33.993
> 
> 标签：c#, mysql

在 C# 中连接到数据库后

```
string MyConString2 = "SERVER=localhost;" + "user id=mytest;" + "DATABASE=clusters;" + "PASSWORD=mypass;"; 
```

我有一个算法，在每次运行将填充数据库的算法之后，我需要手动删除 mysql 的数据库“集群”，然后再次连接到空数据库并再次运行它，在我想要制作的表中获得新数据如果存在于 C# 中，如何自动删除或清空我的数据库，然后运行我的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:09:53.617

这是有效的示例代码，我认为这就是您所说的，如果不是，请随时纠正我。

```
using (var connection = new MySqlConnection("server=localhost;user=root;password="))
{
    connection.Open();

    var command = connection.CreateCommand();
    command.CommandText = "drop schema if exists clusters";
    command.ExecuteNonQuery();

    command = connection.CreateCommand();
    command.CommandText = "create schema clusters";
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:59:19.887

准备用于清除数据库的 sql 查询并在 fe MySQL 工作台中对其进行测试。在此之后，只需像在 C# 中对 DB 执行常规查询一样执行它。一种方法是使用 TRUNCATE 语句清除数据库中的所有表，第二种方法是 DROP DATABASE 并重新创建它。

# c# - 如何在窗体中添加表格控件？

> ID：12067707
> 
> 赞同：0
> 
> 时间：2012-08-22T06:51:40.220
> 
> 标签：c#, vb.net, c#-4.0, c#-3.0

我想在表单中添加一个表，该表包含 2 列和 3 行。这 3 行是名称、年龄和地点。在运行时这个表中，我想更新第二列中尊重行的值。我想添加这样的表

![在此处输入图像描述](../Images/9ff2eb32c5a7b1ed5bdfee391d508efb.png)

例如，在上图中，Name 是 column1 中的表行项目之一，column2 中的第一行包含 Name 的值。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:10:15.717

创建某种容器类（即某种集合）来存储您的键值对，并`DataGrid`在运行时将它们绑定到 a。

* * *

**Quick'n'dirty 示例：**

```
Class Container
    Inherits BindingList(Of Value)

    Class Value
        Public Property Key As String
        Public Property Value As Object
    End Class

    Public Sub New()
        Add(New Value With {.Key = "Name"})
        Add(New Value With {.Key = "Age"})
        Add(New Value With {.Key = "Place"})
    End Sub

    Default Public Overloads Property Item(ByVal key As String) As Object
        Get
            Return Me.FirstOrDefault(Function(v) v.Key = key)
        End Get
        Set(ByVal value As Object)
            Dim v = Me.FirstOrDefault(Function(e) e.Key = key)
            If v Is Nothing Then
                Add(New Value With {.Key = key, .Value = value})
            Else
                v.Value = value
            End If
        End Set
    End Property

End Class 
```

在你的`Form`：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim grd = New DataGrid With {.Dock = DockStyle.Fill}
    Controls.Add(grd)
    Dim container = New Container()

    grd.DataSource = container

    container("Age") = 12
    container("Place") = "Somewhere"
End Sub 
```

* * *

![在此处输入图像描述](../Images/b940d2531e47700250278da321171efa.png)

* * *

然后，您当然必须调整 DataGrid 的外观，这取决于您。

这样，网格就绑定到`container`对象上，您可以轻松读取/更改值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T07:10:10.677

试试这些链接 这些可能会有所帮助

[在 html 表中转置/交换 x,y 轴](https://stackoverflow.com/questions/4410084/transpose-swap-x-y-axes-in-html-table)

[http://www.w3.org/TR/html4/struct/tables.html#h-11.3.2](http://www.w3.org/TR/html4/struct/tables.html#h-11.3.2)

[http://www.stylusstudio.com/xsllist/200312/post00920.html](http://www.stylusstudio.com/xsllist/200312/post00920.html)

[将 TD 列转换为 TR 行](https://stackoverflow.com/questions/2730699/convert-td-columns-into-tr-rows)

# android - ViewPager 刷卡速度可控？

> ID：12067709
> 
> 赞同：0
> 
> 时间：2012-08-22T06:51:51.967
> 
> 标签：android, android-layout

我在视图（不是片段）之间滑动，是的，每个视图在列表中都有相当多的东西发生，但我希望快速切换。它有时会在中间犹豫。无论页面中发生了什么，我都想毫不犹豫地切换到发生。我正在使用兼容性 4。无论我如何使用它都会犹豫并显示两个页面的时间过长。几乎停在中间。犹豫了一下，然后显示另一页。

# android - 更改屏幕方向时整数值丢失？

> ID：12067710
> 
> 赞同：0
> 
> 时间：2012-08-22T06:51:52.993
> 
> 标签：android, screen-orientation

我正在检查在实际设备上调试应用程序的外观。以下代码只是根据重复按下的次数更改按钮的文本。

它正在完美地增加，但是当我倾斜设备并切换到横向时，按钮将其文本更改为初始状态。我再次按下并再次倾斜，值再次被重置。

后台发生了什么？以及如何阻止它？

```
b.setOnClickListener( new OnClickListener() {
    int i = 1;

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        // Toast.makeText(MainActivity.this, "Pressed ", Toast.LENGTH_SHORT).show();
        b.setText("press "+ i);
        i++;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:57:26.090

当您倾斜设备时，您的活动被破坏并再次调用 oncreate。您必须保留重新启动时想要取回的值。有几种方法可以做到这一点。在快捷方式中，您可以在清单文件中的 Activity 中添加一个标志，即 android:configchanges = "orientation"。

```
<activity
            android:name=".Splash"
            android:configChanges="orientation"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

Aur 将您的值保存在 onPause 或 onBundleSaveinstance 生命周期回调方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:58:47.903

您需要使用 onSaveInstanceState 来保存数据，因为方向更改时数据会丢失。谷歌 onSaveInstanceState 如果你仍然有问题问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T06:55:55.667

是的，因为您的活动将重新开始。您需要将有关方向更改的数据保存到已保存的即时，否则您需要限制活动中的方向更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T06:55:38.203

你需要`android:screenOrientation="landscape"`在 AndroidManifest.xml 中分配，看下面的代码，

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MainActivity" android:label="@string/app_name" android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T07:03:19.567

当屏幕方向改变时，Activity 会被销毁并重新创建。

您可以将其锁定到一个方向。

或者

[使用onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)保存应用程序的状态，然后在 onCreate 或[onRestoreInstanceState中恢复它](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T06:58:35.143

每次活动更改方向时，您的活动都会重新启动（调用 onCreate），为避免这种情况，您可以在 androidmanifest android:configChanges="orientation" 中设置活动。

# java - 在 Swing 中使用 setBounds() 的缺点

> ID：12067719
> 
> 赞同：2
> 
> 时间：2012-08-22T06:52:08.270
> 
> 标签：java, swing

我想知道`setBounds()`在 Java Swing 中使用方法有什么缺点吗？我已经硬编码了*xy*坐标值以适应我的 17 英寸屏幕。假设我的应用程序是在 21 英寸的屏幕上启动的。屏幕会自动调整还是会变形？使用这种方法还有其他缺点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T07:11:45.843

> 使用 setBounds 有什么缺点吗

是的，很多。但最重要的是，你刚才提到的那个。

您基本上忽略了 Java 的 UI 工具包中最强大和最有用的 API 之一，即布局管理器。

这些经理负责决定如何最好地在不同的屏幕尺寸和分辨率上代表您的组件，而无需您考虑。

如果您决定不再使用这些布局管理器，则管理它成为您的责任，我不了解您，我已经有更多的事情要做了。

另一个问题是更新您的屏幕。当您想添加新标签时会发生什么。您需要检查所有代码并计算出需要移动多少其他内容才能容纳它，包括当您没有足够空间时该怎么办。

甚至不要让我开始`FontMetrics`：P

# blackberry - 黑莓6、7、10申请

> ID：12067721
> 
> 赞同：0
> 
> 时间：2012-08-22T06:52:24.663
> 
> 标签：blackberry

我有一个项目。这个应用程序应该在黑莓 6,7 和 10 上运行。我已经为 Eclipse 下载了黑莓 7.0.1 插件。当我编译几次时，它在控制台中没有显示错误，并且在黑莓模拟器上显示了应用程序图标，但该应用程序没有运行。我可以知道我应该添加的文件或我应该在项目中进行的相关更改以运行它吗？

当我上网时，我知道相同的源代码不能用于黑莓 6 ,7 和黑莓 10。只有 Android 在黑莓 10 上运行。

该项目最糟糕的部分是，它是由客户开发的，我们不知道它是在哪个平台上开发的，代码非常难以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:46:09.830

要为 RIM OS 6.x 和 7.x 开发应用程序，您需要安装了相关插件版本（6.x 和 7.x）的 Eclipse。使用 SDK 6.x 编译的应用程序可以在 RIM OS 7.x 上运行，但它不会提供最佳的用户体验。使用预处理器使用一个源文件集为单独的设备操作系统版本编译单独的 .cod 文件集。

BB 10 - 与 RIM OS 6.x/7.x 没有任何共同之处，为 RIM OS 6.x/7.x 编译的应用程序无法在 BB 10 上运行，反之亦然。BB 10 与以前的 BB RIM 操作系统不兼容。它是全新的平台，需要单独的 SDK（用于 C++ 语言）。

一个例外是当您不编写本机应用程序时，您正在制作 WebWorks/PhoneGap 应用程序。但据我从您的问题中了解到，您的项目是本机应用程序。

# c# - EF对group by子句的空检查

> ID：12067722
> 
> 赞同：0
> 
> 时间：2012-08-22T06:52:31.467
> 
> 标签：c#, linq, entity-framework

我需要以下代码来处理任何 IQueryable，即使底层存储库只是一个数组。在我的单元测试期间，这会在内存阵列后备存储中使用伪造的 NRE 引发。显然，因为`y`可能为空，尤其是在左外连接之后，`y`无法自救，只能为空。

```
var x = from y in SomeIQueryable
        group y by y.someForeignKey
        into z
        select z; 
```

我已将其更改为以下内容。

```
var x = from y in SomeIQueryable
        group y by y != null ? y.someForeignKey : null
        into z
        select z; 
```

当针对实际的 SQL 后备存储运行时，按上述方式设置组会导致任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:29:17.377

我对此类检查的经验是 EF 确实支持它们，会将它们转换为正确的 SQL。但是，生成的 SQL 将包括空检查，并且至少在 SQL Server 上，查询的性能会稍差一些。对于复杂的查询，它变得很明显。

但只要第二种形式在您的查询中表现得足够好，它可能就足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:39:11.097

一般来说，这样的修改应该不会引起任何问题。如果是这样，您将生成一个异常，声称底层提供程序由于某种原因无法将查询转换为 SQL。是的，任何问题都将是特定于提供商的，一般来说没有人能够回答。

对于newser T-SQL（SqlServer），它应该可以正常工作（IIRC）对计算列进行分组 - 对于SQL，您提供的表达式正是这样：计算列。

但是，您必须非常小心其他陷阱，例如，当按值传递和按变量传递时，空检查的行为会有所不同..

如果查询完全包含，`x != null`那么它将被翻译到`x NOT NULL`SQL 后端。但是，如果您按名称捕获值，甚至是本地值，即。`int? blah = null; .... from ... x != blah`然后 EF 将“错误地”翻译它`x <> @param`，`@param = NULL`因为代码将无法按预期工作..

C#<->SQL 翻译还有更多这样的细微差别。但是，在您提供的确切代码中，我没有看到任何危险。它看起来不错。如果您尝试一次并且如果它没有抛出类似的东西`NotSupportedException`，那么您可以假设它会正常工作。如果 linq 提供程序不能正确翻译某些表达式，它们通常会抛出该类的异常。

# jquery - 如何使用 Jquery 在 asp.net 中隐藏/显示自定义文件上传？

> ID：12067728
> 
> 赞同：0
> 
> 时间：2012-08-22T06:52:50.843
> 
> 标签：jquery, asp.net, file-upload

我有一个样式文件上传放置在香草 asp.net 文件上传控件的顶部，该控件是隐藏的。如果用户回来编辑他选择的文件，有按钮可以查看文件或从数据集中删除文件；此外，控件是隐藏的。然而，假文件上传仍然可见。我已经编写了一个自定义方法来从代码后面调用 Jquery，但是我缺乏 Jquery 技能来隐藏这个假控件并按需显示它。

任务是：隐藏包含在 a 中的文件上传，如果用户单击“删除文件”并再次将控件设置为可见，则再次显示它，以便他可以选择另一个文件。

亲切的问候。

编辑：包含 Jquery 代码的 c# 方法现在看起来像这样：

```
runjQueryCode(@"$(document).ready(function() {
                 $('#" + Btn_removeFile.ClientID + @"').click(function(){
                    $('.fakefile').show();
                    $('"+ fu.ClientID +@"').show();
                  });
                    $('.fakefile').hide();
                    $('"+ fu.ClientID +@"').hide();
                  });"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:12:38.057

jQuery("#a").show(); 显示它。

jQuery("#a").hide(); 隐藏它。

a 将是您的文件上传控件的 id。您在代码中从自定义方法调用它，然后无需将其绑定到任何点击事件。只需从后面的代码中按需调用它。

使用 FileUpload1.ClientID 作为一个。

Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "dtp", "$('.fakefile').show();$('#"+ fu.ClientID +@"').show();",真的）;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:21:47.770

你可以做的如下......如果文件上传已经隐藏，它将显示它，如果它已经可见，它将隐藏......

**代码隐藏：-**

```
Btn_removeFile.Attributes["onClick"] = "ShowHideFileUpload('"+fu.ClientID+"');" 
```

**Javascript：-**

```
function ShowHideFileUpload(fuID)
{
   if($(fuID).is(":visible"))
   {
        $('.fakefile').hide(); 
        $(fuID).hide(); 
   }
   else
   {
       $('.fakefile').show(); 
       $(fuID).show();     
   }    
} 
```

# c# - 打开最近的 txt 文件

> ID：12067733
> 
> 赞同：1
> 
> 时间：2012-08-22T06:53:28.843
> 
> 标签：c#, file-io

遇到一些麻烦，我正在尝试打开最新的 txt 文件。我正在使用一个按钮，我需要打开 txt 文件，因为有几百个文本文件，我需要按日期和时间列出的最后一个文件

//..............更新.............//

这是我的文件外观的一个更好的示例，有一些额外的日志，它们会内容更新

```
commandlog2012081410   (2012-08-14 /  01:01)
commandlog2012081411   (2012-08-14 /  10:30)
commandlog2012081412   (2012-08-14 /  12:36)
Sample2012082207   (2012-08-22   /  02:12)
Sample2012082208   (2012-08-22   /  06:28)
Sample2012082209   (2012-08-22   /  09:14)
faillog2012075671   (2012-07-17  /  01:20)
faillog2012075672   (2012-07-17  /  08:00)
faillog2012075673   (2012-07-17  /  09:00)
chargedlog203416771   (2012-07-05 /  20:36)
chargedlog203416772   (2012-07-05 /  21:20)
chargedlog203416773   (2012-07-05 /  22:42)
vanishlog2012324795   (2012-07-21 / 17:00)
vanishlog2012324796   (2012-07-21 / 19:31)
vanishlog2012324797   (2012-07-21 / 20:28)
debuglog123131231    (2012-08-22 / 05:10)
debuglog123131232    (2012-08-22 / 06:12)
debuglog123131233    (2012-08-22 / 09:14)
droplogg12313131    (2012-08-06 / 10:10)
droplogg12313132    (2012-08-06 / 16:41)
exitlog123131313     (2012-08-22  /   01:01)
exitlog123131314     (2012-08-22  /   01:12)
exitlog123131315     (2012-08-22  /   09:14)
log201123131     (2012-08-22  / 09:12)
log201123132     (2012-08-22  / 09:14) 
```

我需要打开 //Sample2012082209 (2012-08-22 / 09:14)// 因为你可以看到其他几个 txt 文件在同一日期同时结束，甚至可以选择一个文件并打开它

```
 catch (Exception ex)
        {
            MessageBox.Show("Error" + ex.Message.ToString());
         (Open newest Sample txt file here)
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:00:05.980

您可以使用 Linq 和[`File.GetLastAccessTime`Method](http://msdn.microsoft.com/en-us/library/system.io.file.getlastaccesstime.aspx) 来获取最后一个 openend 文件：

```
var openedFiles = from fName in Directory.EnumerateFiles(dir, "*.txt")
                 orderby File.GetLastAccessTime(fName) descending
                 select new FileInfo(fName);
if (openedFiles.Any())
{
    var lastOpenedFile = openedFiles.First();
} 
```

[`Directory.EnumerateFiles(dir, "*.txt")`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)仅返回`txt`给定目录中的 -files。

**编辑**：恐怕这个问题仍然不清楚，即使你已经编辑了它并且你已经写了几条评论。但是，如果您只想要以给定名称开头的文件（fe *"Sample"*），您只需调整以下搜索模式`EnumerateFiles`：

```
var name = "Sample";
var openedFiles = from fName in Directory.EnumerateFiles(dir, name + "*.txt")
                  orderby File.GetLastAccessTime(fName) descending
                  select new FileInfo(fName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:00:48.343

您可以使用类 DirectoryInfo 来获取有关给定目录的信息。从那里您可以获取文件，并使用 FileInfo 类获取有关创建日期等信息的信息。这是一个例子：

```
 DirectoryInfo dirInfo = new DirectoryInfo(@"C:\");
    foreach (FileInfo file in dirInfo.GetFiles())
    {
        DateTime creationdate = file.CreationTime;
    } 
```

如果您需要更多信息，请发表评论

# apache-flex - Flex 气泡图数据结构

> ID：12067738
> 
> 赞同：0
> 
> 时间：2012-08-22T06:53:51.487
> 
> 标签：apache-flex, charts, bubble-chart

我一直在尝试在 Flex 气泡图中表示以下数据。请参阅下面的图表代码。

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        [Bindable]
        var BBCData:ArrayCollection= new ArrayCollection([
            {Industry: "In1", Range:"0-10 Days",  lcount:10},
            {Industry: "In1", Range:"10-20 Days",  lcount:20},
            {Industry: "In1", Range:"20-30 Days",  lcount:30},
            {Industry: "In1", Range:"30-40 Days",  lcount:40},
            {Industry: "In1", Range:"40-50 Days", lcount:50},

            {Industry: "In2", Range:"0-10 Days", lcount:10},
            {Industry: "In2", Range:"10-20 Days",  lcount:20},
            {Industry: "In2", Range:"20-30 Days",  lcount:30},
            {Industry: "In2", Range:"30-40 Days",  lcount:40},
            {Industry: "In2", Range:"40-50 Days",  lcount:50}
        ]);
    ]]>
</fx:Script>
<mx:BubbleChart  id="PriorityLowBubbleChart" width="400" height="250" 
                minRadius="1" 
                maxRadius="50" dataProvider="{BBCData}" 

                showDataTips="true">
    <mx:verticalAxis>
        <mx:CategoryAxis categoryField="Range" dataProvider="{BBCData}"/>
    </mx:verticalAxis>
    <mx:horizontalAxis>
        <mx:CategoryAxis categoryField="Industry"  dataProvider="{BBCData}"/>
    </mx:horizontalAxis>
<mx:series> 
    <mx:BubbleSeries dataProvider="{BBCData}" radiusField="lcount">

    </mx:BubbleSeries>
</mx:series>

</mx:BubbleChart> 
```

而且我得到的气泡图不是我所期望的。我正在查看气泡图以显示半径为“计数”的气泡，X 和 Y 分别由工业和范围表示。因此，例如，图表应在 Industry In1 和 Range 0-10 Days 的交点处显示半径为 10 的圆圈。

实际上，我得到以下图表

![在此处输入图像描述](../Images/24a5b2781ed1af0a2965a37e914c6f79.png)

因此，对于每个数据点，它都会创建一个新的 X 项（“in1”重复 5 次，“in2”重复 5 次），实际上，它应该只是一个。y 标记也是如此。

图表似乎无法在两个轴上对相同的字段值进行分组，因此出现了这个问题

是否需要采用不同的数据结构，或者是否有图表设置可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:32:37.230

我可以在气泡图中显示气泡，请找到下面的代码，这可能会给你一些想法。我已经注释了几行，您可以取消注释并查看结果，对于实际结果，您必须对其进行更多工作并了解 GroupingCollection 概念。对于 refrel 链接[如何在 Flex 饼图中显示分组的 XML 数据？](https://stackoverflow.com/questions/3010110/how-do-i-display-grouped-xml-data-in-a-flex-pie-chart): -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.charts.series.BubbleSeries;
            import mx.collections.ArrayCollection;

            [Bindable]
            public var BBCData:ArrayCollection = new ArrayCollection([
                {id:1, Industry: "In1", Range:"0-10 Days",  lcount:10},
                {id:2, Industry: "In1", Range:"10-20 Days",  lcount:20},
                {id:3, Industry: "In1", Range:"20-30 Days",  lcount:30},
                {id:4, Industry: "In1", Range:"30-40 Days",  lcount:40},
                {id:5, Industry: "In1", Range:"40-50 Days", lcount:50},

                {id:6, Industry: "In2", Range:"0-10 Days", lcount:10},
                {id:7, Industry: "In2", Range:"10-20 Days",  lcount:20},
                {id:8, Industry: "In2", Range:"20-30 Days",  lcount:30},
                {id:9, Industry: "In2", Range:"30-40 Days",  lcount:40},
                {id:10, Industry: "In2", Range:"40-50 Days",  lcount:50}
            ]);

            protected function verticalLabelFunction(value:Object, pre:Object, axis:Object, item:Object):Object 
            {
                return item.Range;
            } 
            protected function horizontalLabelFunction(value:Object, pre:Object, axis:Object, item:Object):Object 
            {
                return item.Industry;
            }

            private function clickHandler():void
            {
                horizontalAxisID.labelFunction = horizontalLabelFunction;
                horizontalAxisID.displayName = "Industry";

                verticalAxisID.labelFunction = verticalLabelFunction
                verticalAxisID.displayName = "Range";

                var columnSeries:Array = new Array();
                var series:BubbleSeries = new BubbleSeries();
                series.radiusField = "lcount";
                //Solution 1 - OutPut as per your dataProvider
                horizontalAxisID.categoryField = series.xField = "id";
                verticalAxisID.categoryField = series.yField = "id";

                //Solution 2 - OutPut as per your dataProvider
                //verticalAxisID.categoryField = series.yField = "Range";
                //horizontalAxisID.categoryField = series.xField = "Industry";

                columnSeries.push(series);
                PriorityLowBubbleChart.series = columnSeries;
                series.percentWidth = 100;
                series.percentHeight = 100;
                PriorityLowBubbleChart.dataProvider = BBCData;
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <mx:BubbleChart  id="PriorityLowBubbleChart" width="400" height="250" 
                     minRadius="1" maxRadius="50" dataProvider="{BBCData}" showDataTips="true" 
                     creationComplete="clickHandler()" >
        <mx:horizontalAxis>
            <mx:CategoryAxis id="horizontalAxisID" categoryField="id" />
        </mx:horizontalAxis>
        <mx:verticalAxis>
            <mx:CategoryAxis id="verticalAxisID" categoryField="id" />
        </mx:verticalAxis>
    </mx:BubbleChart>

</s:Application> 
```

或另一种实现您正在寻找的方法如下： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.charts.series.BubbleSeries;
            import mx.collections.ArrayCollection;
            import mx.utils.ObjectUtil;

            [Bindable]
            private var BBCData:ArrayCollection = new ArrayCollection([
                {id:1, Industry: "In1", Range:"0-10 Days",  lcount:10},
                {id:2, Industry: "In1", Range:"10-20 Days",  lcount:20},
                {id:3, Industry: "In1", Range:"20-30 Days",  lcount:30},
                {id:4, Industry: "In1", Range:"30-40 Days",  lcount:40},
                {id:5, Industry: "In1", Range:"40-50 Days", lcount:50},
                {id:6, Industry: "In2", Range:"0-10 Days", lcount:10},
                {id:7, Industry: "In2", Range:"10-20 Days",  lcount:20},
                {id:8, Industry: "In2", Range:"20-30 Days",  lcount:30},
                {id:9, Industry: "In2", Range:"30-40 Days",  lcount:40},
                {id:10, Industry: "In2", Range:"40-50 Days",  lcount:50}
            ]);

            protected function verticalLabelFunction(value:Object, pre:Object, axis:Object, item:Object):Object 
            {
                return item.Range;
            } 
            protected function horizontalLabelFunction(value:Object, pre:Object, axis:Object, item:Object):Object 
            {
                return item.Industry;
            }

            [Bindable]
            public var range:Array = [
                {Range:"0-10 Days"},
                {Range:"10-20 Days"},
                {Range:"20-30 Days"},
                {Range:"30-40 Days"},
                {Range:"40-10 Days"}
            ];

            [Bindable]
            public var industry:Array = [
                {Industry: "In1"},
                {Industry: "In2"}
            ];

        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <s:Panel title="Line Chart">
        <s:layout>
            <s:VerticalLayout/>
        </s:layout>
        <mx:BubbleChart id="myChart"
                      dataProvider="{BBCData}" 
                      showDataTips="true"
                      maxRadius="50" minRadius="1">
            <mx:horizontalAxis>
                <mx:CategoryAxis 
                    dataProvider="{industry}" 
                    categoryField="Industry"
                    displayName="Industry"
                    labelFunction="horizontalLabelFunction"/>
            </mx:horizontalAxis>
            <mx:verticalAxis>
                <mx:CategoryAxis 
                    dataProvider="{range}" 
                    categoryField="Range"
                    displayName="Range"
                    labelFunction="verticalLabelFunction"/>
            </mx:verticalAxis>
            <mx:series>
                <mx:BubbleSeries xField="Industry" yField="Range"
                    displayName="Industry" radiusField="lcount"/>
            </mx:series>
        </mx:BubbleChart>
    </s:Panel>

</s:Application> 
```

希望这可以帮助你....

# python - python regex replace 返回一个额外的 \n

> ID：12067739
> 
> 赞同：0
> 
> 时间：2012-08-22T06:53:51.670
> 
> 标签：python, file, search, replace

我正在尝试用 python 2.6 替换文件中的一些文本

但是，它返回一个额外的换行符，这是我的代码：

```
for line in fileinput.input('/etc/php5/apache2/php.ini', inplace=True):
   replace = re.sub(r'(post_max_size =).[0-9]+(M)', r'\1 64\2', line)
   print replace 
```

输入：

```
post_max_size = 6M
sdfsdfsd
post_max_size = 4M
sdfsdf
post_max_size = 164M
dfsdfsdfsdfsdf 
```

输出：

```
post_max_size = 64M

sdfsdfsd

post_max_size = 64M

sdfsdf

post_max_size = 64M

dfsdfsdfsdfsdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:55:45.193

您看到的额外输出来自`print`，如果您将文件写回，您不应该看到额外的换行符。

试试这个：`print replace,`

这是一个小问题，但您也应该选择一个不同的名称，就像`replace`标准库中字符串方法的名称一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:58:38.350

你的正则表达式很好。`print`添加换行符。改为使用`write`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:58:48.327

尝试： `print replace,`改为。尾随逗号抑制换行符（但添加尾随空格）。为了完全控制，请改用打印功能`__future__`。

# .net - 实体框架 - 父子

> ID：12067746
> 
> 赞同：0
> 
> 时间：2012-08-22T06:54:23.620
> 
> 标签：.net, entity

我有一个代表文件夹的父子实体。每个文件夹都有一个 ParentFolderID 外键。我需要编写一个获取文件夹名称并返回指向相关文件夹的根文件夹（ParentFolder - NULL 的文件夹）的方法。我不想看到特定文件夹的其他子文件夹。我该怎么做？

例如 - 我有一个文件夹树 - Michael-->A & A1-->B-->C-->D

我搜索名称为 C 的文件夹。所以我需要返回的方法： Michael-->A1-->B-->C ('A' 文件夹没有看到，因为它不会导致 'C'文件夹）

# mysql - SQL 结果水平而不是垂直

> ID：12067750
> 
> 赞同：3
> 
> 时间：2012-08-22T06:54:37.680
> 
> 标签：mysql, sql

我有一个表，我有一个`ticket_id's`,`field_id's`和值。例如。

```
ticket_id field_id 值
1001 1 彼得
第1002章 1个
1001 2 555-2565
1002 2 554-2548

```

目标是我正在尝试编写一个查询，该查询将在同一个表中水平显示值。例如。

```
Ticket_ID 字段 1 字段 2
1001 彼得 555-2565
1002 戴夫 554-2548

```

有很多`field_ids`。我尝试过使用，`rownumber()`但它没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:01:48.483

```
Select Temp_field1.ticket_id,Field1,Field2
From
    (Select ticket_id,value as Field1 from table where field_id = 1) as Temp_field1,
    (Select ticket_id,value as Field2 from table where field_id = 2) as Temp_field2
Where Temp_field1.ticket_id = Temp_field2.ticket_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:08:55.843

```
SELECT TICKET_ID, MAX(FIELD_1),MAX(FIELD_2)
FROM (
    SELECT TICKET_ID, 
        CASE field_id
            WHEN 1 THEN VALUE
            ELSE NULL end AS FIELD_1,
        CASE field_id
            WHEN 2 THEN VALUE
            ELSE NULL end AS FIELD_2
)
GROUP BY FIELD_1,FIELD_2 
```

这有点古怪，但我试图最小化选择。我们的想法是在我们不需要该值时设置 null 并且当我们执行 MAX 时，它将采用不为 null 的值（MAX 适用于 VARCHAR）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:13:16.773

这个答案之前已经给出了。你可以在这里查看。

[MySQL 数据透视表](https://stackoverflow.com/questions/7674786/mysql-pivot-table)

基本上你必须在你的 field_id 上旋转一个“组”（或一个不同的）选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T07:36:28.510

这是一种选择。不知道如果有很多性能`field_ids`。

```
SELECT t1.`ticket_id` AS Ticket_ID, t1.`value` AS Field1, t2.`value` AS Field2 FROM `ticket` t1
  LEFT JOIN `ticket` t2 ON t1.`ticket_id` = t2.`ticket_id`
  WHERE t1.`value` != t2.`value`
  GROUP BY t1.`ticket_id` 
```

# html - 外部 div 匹配内部 div 的宽度

> ID：12067755
> 
> 赞同：3
> 
> 时间：2012-08-22T06:55:04.903
> 
> 标签：html, css

我已经画了一个草图，所以我更容易解释这个问题：（ [来源：][[mielai.lt](http://www.mielai.lt/sketch.png)][）][![草图](../Images/5cb07f97ddce75c1a08f2928b60b7c96.png)](https://i.stack.imgur.com/r5NZ0.png)

所以，正如你所理解的，三个彩色矩形是 div，红色矩形是容器，绿色 div 有徽标和其他东西，蓝色 div 有缩略图，包裹在 li 标签中。所有 div 都在自动宽度上。缩略图是浮动的，所以屏幕越宽，动态的一排缩略图就越多，但右侧总是有剩余空间，因为它太窄，无法再多一个拇指到达那里。

我希望蓝色 div 的宽度接近拇指末端的位置，蓝色虚线所在的位置，并且它应该动态变化。

第二件事是绿色 div，理想情况下，我希望它与蓝色 div 的宽度相匹配，它以虚线结束，所以绿色 div 中的东西不会超出整个外观。

这些有可能做到吗？如果是，请说明方法或举例。

我自己尝试过各种事情，包括各种示例（[仅让某些内部 div 控制外部 div 的宽度](https://stackoverflow.com/questions/11215670/only-let-certain-inner-divs-control-outer-divs-width)），但它们对我不起作用。

如果有任何帮助，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-28T11:31:17.010

我用以下方法解决了这种情况：

```
float:left; 
```

到外部 DIV；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:15:56.360

据我所知，您必须使用 JavaScript 来做到这一点（或者至少在 JavaScript 中很容易做到）。例如，使用 jQuery，您可以执行以下操作：

```
$(window).resize(function(){
    var original_blue_width = $("#red").width() - 2*3;
    var blue_width = original_blue_width - (original_blue_width % (10+5));
    $("#blue").width (blue_width);
    $("#green").width (blue_width);
}); 
```

其中 3 是红色和蓝色框之间的填充，5 是缩略图之间的填充，10 是缩略图的宽度。
如果有不清楚的地方，请询问/评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:00:20.717

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/8fgjs/3/)

**Step 1：**计算thumb box的实际宽度即width + 2*(border + margin + padding)

**第 2 步：**连续计算拇指的数量（这是您必须考虑的地方）我所做的是我检查了每个拇指的顶部 请参阅 Function **calculate_in1Row ()**

HTML：

```
<div class="red">
    <div class="green">Logo</div>
    <div class="blue">
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
        <div class="thumb"></div>
    </div>
</div>​ 
```

CSS：

```
.red {border:1px solid red; }
.green{border:1px solid green; margin:2px;}
.blue{border:1px solid blue; margin:2px; overflow:auto;}
.thumb {border:1px solid black; width:40px; height:40px; margin:2px; padding:3px;  float:left} 
```

jQuery：

```
$(document).ready(function() {
    var tw = $(".thumb").width() + 2 * (1 + 2 + 3); // width + 2*(border+margin + padding)
    tw = tw * calculate_in1Row()
    $(".blue").width(tw);
    $(".green").width(tw);
});

// function ti calculate no of thumb box in single row
function calculate_in1Row() {
    var in1Row = 0;
    $('.blue .thumb').each(function() {
        if ($(this).prev().length > 0) {
            if ($(this).position().top != $(this).prev().position().top) return false;
            in1Row++;
        }
        else {
            in1Row++;
        }
    });

    return in1Row;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:23:41.110

由于问题未标记 javascript/jquery，因此 CSS 解决方案可以如下：

我想说的是，您可以创建一个围绕绿色和蓝色框的外部 div。给这个外部 div 设置宽度并让它设置属性`margin:0 auto;`这将适合所有从左右相等间距包围的小黑框。

# ios - iPad 4.3 模拟器使用 xcode 4.3.3 显示黑屏

> ID：12067768
> 
> 赞同：2
> 
> 时间：2012-08-22T06:56:02.117
> 
> 标签：ios, ios-simulator, xcode4.3

我最近将我的 Xcode 更新到 4.3.3，我正在尝试使用 iPad 4.3 模拟器运行我的旧 iPad 项目，但它只显示黑屏。但是，这在具有 iOS 5.1 的 iPad 5.1 模拟器和 iPad 设备上正常工作。有谁知道这背后的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:15:33.740

尝试通过选择重置 iOS 模拟器`iPhone Simulator > Reset Content and Settings`

或者甚至尝试通过删除文件夹 iPhone Simulator 完全删除 iOS 模拟器

```
~/Library/Application Support/ 
```

删除您的 Xcode 项目的派生数据并重新启动 Xcode（并希望它恢复运行）否则再试一次但也重新启动计算机

尝试将您的方案的调试器设置为无

```
Product->Edit Scheme->(Select the run Scheme)->Debugger->None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T21:16:31.237

“尝试通过选择 iPhone 模拟器 > 重置内容和设置来重置 iOS 模拟器”为我解决了这个问题。

# angularjs - 重定向到推荐人

> ID：12067772
> 
> 赞同：9
> 
> 时间：2012-08-22T06:56:44.987
> 
> 标签：angularjs

在 AngularJS 中，我有一个登录控制器，如果用户到达该页面但未登录，应用程序中的每个页面都会重定向到该控制器。在登录序列之后，我想将用户重定向回他们的页面来自。最好的方法是什么？将旧位置保​​存在`$rootScope`? 重定向到`'/login?returnto=' + $location.path()`? 有内置功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:43:39.607

您可以使用`$rootScope`或定义服务来保存旧位置。这是一个对比这两种方法的[SO 帖子](https://stackoverflow.com/questions/11938380/how-to-go-globals/11938785#11938785)。我个人不喜欢添加`returnto=`到 URL。

您可能会对这篇博文[AngularJS 中的身份验证感兴趣。](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)请注意 Vojta（AngularJS 的作者之一）在该博客文章中关于使用的评论`$rootScope`——他推荐了一项服务。

# java - 允许访问tomcat服务器中的外部IP地址

> ID：12067774
> 
> 赞同：0
> 
> 时间：2012-08-22T06:56:50.933
> 
> 标签：java, tomcat

我有谷歌地图网络应用程序。我在 tomcat 服务器中有一个设置。它在本地主机中运行良好。然后通过路由器我将端口转发到我的本地PC。那个时候它不起作用。

我已经在`conf/context.xml`文件中尝试过。

```
 <Valve className="org.apache.catalina.valves.RemoteAddrValve"
       allow="220\.247\.236\.207,192\.168\..*"/> 
```

我的本地主机：192.168.1.122:8080/Ornox - 工作正常

```
 220.247.236.207:8080/Ornox    -- It didn't work. 
```

相同的相关问题：[端口转发正确，但无法访问 LAN 外的 Tomcat](https://stackoverflow.com/questions/10435420/port-is-forwarded-correctly-but-cant-access-tomcat-outside-lan?rq=1)

还是没有解决办法。。

请帮助我如何解决这个问题？

提前致谢。

# django - 使用 Amazon S3 链接到 Django 中上传的文件

> ID：12067778
> 
> 赞同：1
> 
> 时间：2012-08-22T06:57:09.747
> 
> 标签：django, amazon-s3, sorl-thumbnail, django-storage

我正在使用 django-storages 后端，我以前没有使用过 Amazon S3。我已通过 Firefox 的 S3 管理器上传文件迁移到 Amazon S3。

问题是，使用此代码：

```
<a href="{{ MEDIA_URL }}{{ g.photo }}" class="lightbox" title="{{ g.description }}">
    {%  thumbnail g.photo '95x95' crop="center" as im %}
        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" />
    {% endthumbnail %}
</a> 
```

生成的请求不包括 GET 请求中所需的参数，如签名。但是，sorl 生成的缩略图可以工作！

关于在 S3 中上传我的文件，我有什么遗漏吗？是否需要在 href 中添加其他代码？为什么 sorl 能够检索文件并从中创建缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:13:43.440

该文件不可公开访问。这可能发生在上传或由于存储桶限制。

您可以在 S3 Manager 中将此文件的 ACL 设置更改为公开访问（如果只有此文件应该是公开可读的），或者为存储桶上的细粒度权限创建存储桶策略 - 您可以在 AWS 控制台中执行此操作。

如果存储桶中的任何文件是公开的，您应该相应地更改 S3 客户端中的默认 ACL 设置。

# javascript - 在 Sharepoint 中创建弹出菜单/使用 SP.UI.PopoutMenu

> ID：12067779
> 
> 赞同：4
> 
> 时间：2012-08-22T06:57:10.870
> 
> 标签：javascript, sharepoint-2010

我想在 sharepoint 中创建一个带有 javascript 的弹出菜单，就像您单击文档库中的第一个元素时一样：

![在此处输入图像描述](../Images/a620ccb15932699c985def124068abc0.png)

我认为应该可以使用**SP.UI.PopoutMenu**，但[MSDN](http://msdn.microsoft.com/en-us/library/ff409127)文档在这个元素上的表现更差，并且找不到任何使用它的教程。

如果我只是尝试像这样打开它，则不会发生任何事情：

```
var anchorId = 'myAnchorId',
    menuId = 'myMenuDivId',
    iconId = '',
    anchorOpenCss = '', 
    textDirection = 'ltr', 
    closeIconUrl = '', 
    isClustered = false, 
    x = 500, 
    y = 500, 
    height = 500, 
    width = 500;

SP.UI.PopoutMenu.createPopoutMenuInstanceAndLaunch(anchorId, menuId, 
    iconId, anchorOpenCss, textDirection, closeIconUrl, isClustered, 
    x, y, height, width); 
```

有任何想法吗？

*PS：我不想扩展文档库的菜单，我想创建一个自己的弹出菜单！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T18:02:49.070

好吧，我参加聚会可能为时已晚，但我在 SharePoint 2013 上开始工作了。在前端弹出菜单上仍然找不到真正的文档，但是在后端版本上搞乱了我对所有内容进行了逆向工程 :)

免责声明：我没有用这个 PopoutMenu 东西测试所有的可能性，我不确定下面的元素是否必须按照所述标签的顺序排列，我几乎可以肯定它们实际上不是，你可以将它们放在任何其他标签、类中。但不要相信我的话。

这种配置只是让一切看起来都很好。

```
<a id="anchorID">
    Cool Test bro
</a>
<div class="ms-popoutMenu ms-breadcrumb-menu" id="menuID" style="display:none">
    Content and ...
    <div> Divs and
        <a href="http://www.google.com">And Links</a>
    </div>
</div>

<script type="text/javascript">
var menu = new SP.UI.PopoutMenu("anchorID", "menuID", "", "", "ltr", "", false);
menu.launchMenu();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:55:21.930

我以前从未使用过 PopoutMenu 对象，但您所指的也是上下文菜单或编辑控制块 (ECB) 菜单。我试图为 PopoutMenu 提供一个工作示例，但你是对的，它很难使用。如果有帮助，我确实找到了这篇关于在共享点网格视图中使用自定义 ecb 菜单的文章：http: [//blogs.msdn.com/b/powlo/archive/2007/02/25/displaying-custom-data-through-sharepoint -lists-using-spgridview-and-spmenufield.aspx](http://blogs.msdn.com/b/powlo/archive/2007/02/25/displaying-custom-data-through-sharepoint-lists-using-spgridview-and-spmenufield.aspx)

# xslt - XSLT 将节点移动到新创建的元素

> ID：12067782
> 
> 赞同：0
> 
> 时间：2012-08-22T06:57:19.437
> 
> 标签：xslt

努力寻找使用 XSLT 进行以下操作的方法，感谢您的帮助。RJ

输入：

```
<root>
    <a>a1</a>
    <b>b1</b>
    <c>c1</c>
    <a>a2</a>
    <b>b2</b>
    <c>c2</c>
    ...
</root> 
```

输出：

```
<root>
    <item>
        <a>a1</a>
        <b>b1</b>
        <c>c1</c>
    </item>
    <item>
        <a>a2</a>
        <b>b2</b>
        <c>c2</c>
    </item>
    ...
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:26:19.003

如果您希望使用**a**元素作为组的第一个元素将元素“分组”为“项目”，一种方法是使用**xsl:key**按最前面的**a**元素对元素进行分组

```
<xsl:key name="items" match="root/*" use="generate-id(preceding-sibling::a[1])" /> 
```

然后你可以简单地匹配**a**元素，并复制所有在 key 中查找的元素

```
<xsl:copy-of select="key('items', generate-id())" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="items" match="root/*" use="generate-id(preceding-sibling::a[1])" />

   <xsl:template match="/root">
      <root>
         <xsl:apply-templates select="@*"/>
         <xsl:apply-templates select="a" />
      </root>
   </xsl:template>

   <xsl:template match="a">
      <item>
         <xsl:copy-of select="." />
         <xsl:copy-of select="key('items', generate-id())" />
      </item>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<root>
   <item>
      <a>a1</a>
      <b>b1</b>
      <c>c1</c>
      <a>a2</a>
   </item>
   <item>
      <a>a2</a>
      <b>b2</b>
      <c>c2</c>
   </item>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:26:12.713

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="text()"/>

    <xsl:template match="/root">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>
    <xsl:template match="a">
        <item>
            <a><xsl:value-of select="text()"/></a>
            <b><xsl:value-of select="following-sibling::b/text()"/></b>
            <c><xsl:value-of select="following-sibling::c/text()"/></c>
        </item>
    </xsl:template>
</xsl:stylesheet> 
```

# android - 设置单选按钮的图像选项 - Android

> ID：12067787
> 
> 赞同：0
> 
> 时间：2012-08-22T06:57:29.333
> 
> 标签：android, radio-button, radiobuttonlist

我正在尝试将单选按钮的选项设置为 Android 中的图像。基本上我在四个不同的文件路径中有 4 个图像，我想将它们设置为四个单选按钮（不是按钮本身，而是在它旁边选择的实际选项）。对于文本，我只是进行 textview cast 并将文本添加到按钮，如下所示

```
TextView option2 = (TextView) getView().findViewById(R.id.answer2);
option2.setText(secondOption.substring(5)); 
```

但是我对图像做什么，它不允许我用 imageview 投射单选按钮。所以像这样

```
ImageView option2 = (ImageView) getView()
                    .findViewById(R.id.answer2);
option2.setImageBitmap(BitmapFactory.decodeFile(firstOption
                    .substring(5))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:12:19.760

我没有找到一个好的选择，所以我最终将文本设置为空白，然后将左侧可绘制设置为单选按钮的图像

# xml - Json解析与xml解析？

> ID：12067794
> 
> 赞同：6
> 
> 时间：2012-08-22T06:58:05.863
> 
> 标签：xml, json

json解析的优缺点是什么？为什么开发人员更喜欢使用 json 而不是 xml 解析？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T07:10:23.563

杰森...

与 XML 相比，开销更小 - XML 的结束标记将样板代码大小增加了大约 2 倍。它也更易于阅读 - 考虑一下

```
{
  "key": "value",
  "other key": 3.1415926535897932,
  "arr": [
    1,
    2,
    3
  ]
} 
```

相对

```
<?xml version="1.0"?>
<!-- not to mention the DTD declaration -->
<myXmlFormat>
  <key>value</key>
  <otherKey>3.1415926535897932</otherKey>
  <arr>
    <number>1</number>
    <number>2</number>
    <number>3</number>
  </arr>
</myXmlFormat> 
```

更容易和更快地解析（因为它更轻量级） - 有很多 JSON 解析器本身比相同编程语言中的 XML 解析器对应物更小和更快（考虑 libxml2 与 js0n）。

JSON 的数据类型还与传统上被认为是“原始”的数据类型进行 1:1 映射 - 例如字符串、整数和实数、数组和键值表。此外，这些原始数据类型很容易与 Foundation 一起使用，它们内置于其中 - 上面的 JSON 可以轻松解析为包含“key”、“other key”和“arr”作为键的 NSDictionary，它们对应于字符串“值”，pi 分别作为 NSNumber 和 NSArray。同时还必须考虑 XML ——也许您甚至必须创建自定义类来表示您自己在 XML 中描述的数据结构。

专门针对 iOS 平台：Cocoa 的原生 XML 解析器，NSXMLParser 使用起来不仅违反直觉。iOS 上的 Foundation 框架不包括 Mac OS X 上 Foundation 的 NSXMLNode 类，这迫使开发人员编写自己的意大利面条代码来将所有 XML 包装到一些结构化数据中……嗯……结构而不是能够使用包含的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:29:01.993

# XML

### 好处

*   XML 最重要的优点是它是其他人最容易阅读的格式。

*   第二个优点是 XML 已经存在了很长一段时间，而且许多开发人员已经习惯了它。

### 缺点

*   将数据插入 HTML 页面所需的 JavaScript 非常冗长。

## JSON

### 好处

*   最重要的优势是 JSON 绕过 JavaScript 的同源策略，如果您将 JSON 文件作为新标签导入。有关血腥细节，请参见 Simon Willison 的示例。JavaScript 不允许您访问来自其他服务器的文档（无论是 XML 还是 HTML）。但是，如果您将 JSON 文件作为脚本标签导入，则可以规避此问题，并且可以将任何 JSON 数据导入任何网站。这取决于您的业务目标，这是好事还是坏事，但目前它是唯一允许无限制访问的数据格式。

*   第二个优点是 JSON 数据的脚本比 XML 数据的脚本稍微简单一些，并且更符合 JavaScript 语言的其余部分。

### 缺点

*   JSON 最重要的缺点是该格式很难被人类阅读，当然，每个逗号、引号和括号都应该在正确的位置。虽然 XML 也是如此，但 JSON 的大量看起来很复杂的语法，例如数据片段末尾的 }}]}，可能会吓到新手并导致复杂的调试。

从评论来看，JSON 被认为比 XML 处理得更快。

# javascript - 打开一个具有某些约束的新窗口

> ID：12067796
> 
> 赞同：-5
> 
> 时间：2012-08-22T06:58:06.933
> 
> 标签：javascript, browser, window, constraints

使用 JavaScript 我想打开一个具有以下特征的新浏览器窗口。请指教：

1.  打开一个新窗口（不是新标签）
2.  新窗口不应有工具栏、地址栏、菜单栏、状态栏
3.  新窗口应最大化
4.  新窗口不应调整大小
5.  在新窗口中，我应该无法打开新标签
6.  以上应该适用于所有现代浏览器

**更新**：我使用了来自[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)的代码，但在浏览器中出现了不希望的结果。例如，location=no 仍会在 FireFox 中显示地址栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:18:55.540

1.  您不能覆盖浏览器设置，如果用户需要，它将在选项卡中打开。
2.  您可以在特征字符串中尝试`menubar=0,location=0,status=0`，但您不太可能将它们全部删除。在大多数浏览器中，通常无法删除地址字段。
3.  您无法打开最大化的窗口。您可以尝试`fullscreen=1`在特征字符串中，这将产生类似的效果。
4.  您可以在功能字符串中尝试`resizable=0`，但它不太可能使窗口无法调整大小。
5.  那是不可能的。您可能可以删除一些打开新窗口/标签的方式（例如菜单），但不能禁用打开新窗口的功能。
6.  对此的支持因浏览器而异，您将永远无法在所有浏览器中完成所有这些工作。

查看 Microsoft 的[open 方法](http://msdn.microsoft.com/en-us/library/ie/ms536652%28v=vs.85%29.aspx)文档，或Mozilla 的[window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)以获得支持的功能列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:03:50.927

> 例如，location=no 仍会在 FireFox 中显示地址栏。

[如何使用 javascript window.open 在 Firefox 中隐藏地址栏](https://stackoverflow.com/questions/5664992/how-to-hide-address-bar-in-firefox-using-javascript-window-open)

设置浏览器 GUI 不是程序员的事。用户定义它，而不是你。

# iphone - iPhone上的模态框没有滚动

> ID：12067802
> 
> 赞同：15
> 
> 时间：2012-08-22T06:58:19.760
> 
> 标签：iphone, html, twitter-bootstrap

您好想知道我是否可以得到一些帮助，因为我在网上没有找到任何可以解决这个问题的东西，在 iphone 上，当页面很大时，twitter 引导模式框没有滚动来获取页脚盒子。

使用的代码

```
 <div class="modal hide" id="electricityModal">

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Submit A Electricity Reading</h3>
        </div>

        <div class="modal-body">

            <div class="control-group">
                <label class="control-label">Date/Time</label>
                    <div class="controls">
                        <span class="input-medium uneditable-input">22 Aug 2012, 9:45AM</span>
                    </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="reading-peak">Peak</label>
                <div class="controls">
                    <input style="letter-spacing: 10px;" type="text" id="reading-peak" class="input-medium">
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="reading-off-peak">Off Peak</label>
                <div class="controls">
                    <input style="letter-spacing: 10px;" type="text" id="reading-off-peak" class="input-medium">
                </div>
            </div>

        </div>

        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-primary">Lodge Reading</button>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T04:06:21.657

对此的修复是添加以下 css（在 bootstraps github 问题上找到）

```
 @media (max-width: 480px) {

        .modal {
            height: 500px; /* Set a default max height of the modal (adjusted later)*/
            position: fixed; /* Display modal in the centre of your screen */
            overflow-y: scroll; /*  Ensure that the modal is scroll-able */
            -webkit-overflow-scrolling: touch; /* Avoid having to use 2 finger scroll on iOS    */
        }
        .modal.fade.in{
            top: 5px; /* Use more screen real estate */
        }
        .modal-body{
            /* Increase the max height of the modal body to try & avoid both it,
             * and the modal container having scroll bars which results in odd behavior */ 
            max-height: 2400px; 
        }   
    }

    /* Now adjust the height so it handles various screen sizes & orientations */
    /* You could make this as granular as you like, or have it more granular at common screen sizes
     * but it should start at the height we set on .modal (i.e. 500px) & work down */
    @media (max-width: 480px) and (max-height: 500px){.modal{ height: 450px}}
    @media (max-width: 480px) and (max-height: 450px){.modal{ height: 400px}}
    @media (max-width: 480px) and (max-height: 400px){.modal{ height: 350px}}
    @media (max-width: 480px) and (max-height: 350px){.modal{ height: 300px}}
    @media (max-width: 480px) and (max-height: 300px){.modal{ height: 250px}}
    @media (max-width: 480px) and (max-height: 250px){.modal{ height: 200px}}
    @media (max-width: 480px) and (max-height: 200px){.modal{ height: 150px}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:52:30.153

我相信`max-height`为父 div (id:electricityModal) 提供一个 css 属性可能会有所帮助并提供一个滚动条。选择最适合您的高度。说像 250 像素这样的东西。

# php - TCPDF 自定义页码格式

> ID：12067803
> 
> 赞同：1
> 
> 时间：2012-08-22T06:58:32.047
> 
> 标签：php, pdf, tcpdf

是否可以在 TCPDF 中实现自定义页码格式？如果是，怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:22:03.167

```
$this->Cell(0, 10, 'Page '.$this->getAliasNumPage().' of '.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M'); 
```

您必须扩展 TCPDF 类，如下例所示：

```
 class MYPDF extends TCPDF {  
       // Page footer
        public function Footer() {
            // Position at 15 mm from bottom
            $this->SetY(-8);
            // Set font
            $this->SetFont('helvetica', 'I', 8);
            // Page number
          $this->Cell(0, 10, 'Page '.$this->getAliasNumPage().' of '.$this->getAliasNbPages(), 0, false, 'C', 0, '', 0, false, 'T', 'M');     
        }      
    }

$pdf = new MYPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

$pdf->AddPage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:15:14.800

如果你想改变 TCPDF 的工作方式，你需要覆盖页脚方法并实现你的自定义逻辑。

```
class CUSTOMPDF extends TCPDF {
  public function Footer() {

    $this->SetY(-10);
    $this->SetFont('verdana', 'N', 9);
    //more logic, take a look at the parent::Footer method

 }
} 
```

通过调用使用它`$pdf = new CUSTOMPDF(<options>);`

# django - 如何确保芹菜任务在工人身上连续运行？

> ID：12067806
> 
> 赞同：2
> 
> 时间：2012-08-22T06:58:37.150
> 
> 标签：django, rabbitmq, celery, django-celery

我有一个 celery 任务，它进行子进程调用，只能在系统范围内并行运行。虽然我想出了一个更好的解决方案，但我需要能够执行在单个工作人员上串行运行的任务。

我知道我可以创建一个表来跟踪当前正在运行任务的服务器，并等待它完成，然后再运行未来的任务，但似乎必须有更好的方法。我已经非常广泛地查看了 celery 文档，并简要地查看了 rabbitmq 文档，但无济于事。

有没有人想出一个优雅的解决方案来解决这个问题，并与上述技术的一些隐藏特性挂钩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:08:48.420

如果你在 django 中设置一个[数据库缓存](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#database-caching)，它使用所有服务器通用的数据库，你可以实现这个[celery 食谱解决方案来一次执行一个任务](http://celery.readthedocs.org/en/latest/tutorials/task-cookbook.html#ensuring-a-task-is-only-executed-one-at-a-time)。而不是使用变量`lock_id`，只需使用常量。

如果锁对执行任务的工作人员不可用，请调用[重试](http://celery.github.com/celery/userguide/tasks.html#retrying)将任务放回队列中。

# android - 强制 ViewAnimator 使用第一个子元素作为布局大小

> ID：12067808
> 
> 赞同：0
> 
> 时间：2012-08-22T06:58:39.583
> 
> 标签：android, android-layout

我有一个`ViewAnimator`包含两个子视图的。`ViewAnimator`无论哪个孩子当前处于活动状态，我都希望成为第一个孩子的大小。这可以通过一些配置实现还是我必须实现自己的子类和覆盖`onMeasure`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:59:12.917

我最终通过将布局的尺寸扩展`ViewAnimator`、覆盖和设置为第一个孩子的尺寸来解决这个问题。`onMeasure`这就是我想出的。这基本上是对`FrameLayout.onMeasure`方法的一个小修改。

```
/**
 * Overrides the default {@link android.widget.FrameLayout#onMeasure(int, int)}
 * behavior to allow a main child to be defined which determines the size of the
 * layout. By default, the max size of all children is used as the layout size.
 */
public class SizePinnedViewAnimator extends ViewAnimator {
    private final int mainChildIndex;

    @SuppressWarnings("UnusedDeclaration")
    public SizePinnedViewAnimator(final Context context) {
        super(context);
        mainChildIndex = 0;
    }

    @SuppressWarnings("UnusedDeclaration")
    public SizePinnedViewAnimator(final Context context, final AttributeSet attrs) {
        super(context, attrs);

        TypedArray a = context.obtainStyledAttributes(
                attrs,
                R.styleable.SizePinnedViewAnimator);
        mainChildIndex = a.getInt(R.styleable.SizePinnedViewAnimator_mainChild, 0);
        a.recycle();
    }

    /**
     * {@inheritDoc}
     *
     * Copied from {@link android.widget.FrameLayout#onMeasure(int, int)}
     */
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        final int count = getChildCount();

        View mainChild = getChildAt(mainChildIndex);
        if(mainChild == null) {
            throw new IllegalStateException("No child at index " + mainChildIndex);
        }

        measureChildWithMargins(mainChild, widthMeasureSpec, 0, heightMeasureSpec, 0);

        int maxHeight = mainChild.getMeasuredHeight();
        int maxWidth = mainChild.getMeasuredWidth();

        widthMeasureSpec = MeasureSpec.makeMeasureSpec(maxWidth, MeasureSpec.AT_MOST);
        heightMeasureSpec = MeasureSpec.makeMeasureSpec(maxHeight, MeasureSpec.AT_MOST);

        // Find rightmost and bottommost child
        for (int i = 0; i < count; i++) {
            if(i == mainChildIndex) continue;

            final View child = getChildAt(i);
            if (getConsiderGoneChildrenWhenMeasuring() || child.getVisibility() != GONE) {
                measureChildWithMargins(child, widthMeasureSpec, 0, heightMeasureSpec, 0);
            }
        }

        // Don't have access to the foreground padding numbers, but we're not
        // using a foreground drawable anyway, so ignore it.

        // Account for padding too
        maxWidth += getPaddingLeft() + getPaddingRight();
        maxHeight += getPaddingTop() + getPaddingBottom();

        // Check against our minimum height and width
        maxHeight = Math.max(maxHeight, getSuggestedMinimumHeight());
        maxWidth = Math.max(maxWidth, getSuggestedMinimumWidth());

        setMeasuredDimension(resolveSize(maxWidth, widthMeasureSpec),
                resolveSize(maxHeight, heightMeasureSpec));
    }
} 
```

并且在中定义的属性`res/values/attrs.xml`：

```
<declare-styleable name="SizePinnedViewAnimator">
    <attr name="mainChild" format="integer" />
</declare-styleable> 
```

# ajax - Ajax-Solr 不查询或查找 Solr 服务器

> ID：12067809
> 
> 赞同：1
> 
> 时间：2012-08-22T06:58:39.873
> 
> 标签：ajax, solr, nutch

我用 Apache Nutch、Solr 和 Ajax-Solr 作为前端设置了一个小型搜索服务器。如果我使用 ajax-solr 教程中的 solr 服务器，一切正常，但如果我要使用我自己的 solr 服务器（在同一台计算机上运行），我的前端似乎正在搜索服务器但没有找到它。我用谷歌搜索并在论坛中搜索，但我没有找到有效的东西。有谁知道出了什么问题？（Solr 服务器正在启动，没有任何异常）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:27:18.227

感谢你的回答。我用萤火虫检查了一切，发现了问题。reuters.js 中只是缺少一个字段声明

现在搜索服务器工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:21:23.723

您是否能够在 SOLR 日志中看到 UI 发出的搜索查询？尝试使用萤火虫调试javascript ..

# javascript - marquee 属性左右滚动文本

> ID：12067811
> 
> 赞同：3
> 
> 时间：2012-08-22T06:58:44.737
> 
> 标签：javascript, jquery, html, css, marquee

选框标签中有什么属性可以让我连续滚动选框内容？如果我有 5 个项目作为其内容，我想为所有 5 个项目平均分隔空间，以及一个卷轴的第 5 个和下一卷的第一个之间的空间。

因为通常选取框会在开始下一个滚动之前完成所有项目，但在我的情况下，最后一个项目和第一个项目比选取框内容中存在的每个项目分开更多。

例如，1-2-3-4-5-1-2-3-4-5-1-2-3-4-5 等每个“-”是选取框中项目均分的空间和时间。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:01:05.470

该`loop`属性是您正在寻找的属性，其值为`-1`连续滚动。您可以从[Mozilla 开发者网络文档](https://developer.mozilla.org/en-US/docs/HTML/Element/marquee)中找到更多信息。

我觉得我应该提前警告您该`marquee`标签不是标准标签，并且在所有浏览器中呈现方式不同。许多属性不支持跨浏览器。你我想找到一个合适的 jQuery 插件来为你处理跨浏览器。如果您正在做一些简单的事情，那么选框标签可能对您有用，尽管我不提倡这样做。

至于宽度，您可以将每个项目放在一个容器中，例如`div`标签，然后添加适当的边距，如下所示：

```
<marquee>
    <div>1</div>
    <div>2</div>
</marquee> 
```

如果您想更“语法正确”，您可以使用`ul`with`li`标签

```
<marquee>
    <ul>
        <li>1</li>
        <li>2</li>
     </ul>
</marquee> 
```

更多 html/css，但为了屏幕阅读器和打印目的而更合乎逻辑地分组。

# mysql - mysql - 根据列选择最后 n 条记录

> ID：12067814
> 
> 赞同：1
> 
> 时间：2012-08-22T06:58:48.493
> 
> 标签：mysql, sql

我有一个存储汽车价格的表格，其结构如下：

```
+-----------------+--------------+------+-----+---------+----------------+
| Field           | Type         | Null | Key | Default | Extra          |
+-----------------+--------------+------+-----+---------+----------------+
| id              | int(11)      | NO   | PRI | NULL    | auto_increment |
| model           | varchar(255) | YES  |     | NULL    |                |
| make            | varchar(255) | YES  |     | NULL    |                |
| year            | varchar(255) | YES  |     | NULL    |                |
| avg_price       | decimal(8,2) | YES  |     | NULL    |                |
| median_price    | decimal(8,2) | YES  |     | NULL    |                |
| created_at      | datetime     | YES  |     | NULL    |                |
| updated_at      | datetime     | YES  |     | NULL    |                |
+-----------------+--------------+------+-----+---------+----------------+ 
```

给定年份的数据可能会在不同时间插入。

```
For example model 'Honda', make 'Accord' might have results like:
+------+-----------+--------------+--------+---------------------+
| year | avg_price | median_price | model  | created_at          |
+------+-----------+--------------+--------+---------------------+
| 1992 |   2431.29 |      2000.00 | accord | 2012-02-23 17:31:41 |
| 1993 |   2609.13 |      2195.00 | accord | 2012-02-23 17:31:44 |
| 1994 |   2858.81 |      2400.00 | accord | 2012-02-23 17:31:44 |
| 2000 |   4771.99 |      4450.00 | accord | 2012-02-23 17:31:46 |
| 2001 |   5260.16 |      5000.00 | accord | 2012-02-23 17:31:46 |
| 2000 |   4860.19 |      4795.00 | accord | 2012-08-15 06:09:52 |
| 2001 |   5071.49 |      4990.00 | accord | 2012-08-15 06:09:52 |
| 2002 |   5872.80 |      5795.00 | accord | 2012-08-15 06:09:52 |
| 2003 |   7521.44 |      7950.00 | accord | 2012-08-15 06:09:52 |
| 2004 |   8348.19 |      8495.00 | accord | 2012-08-15 06:09:52 | 
```

我想检索该年汽车制造商的所有最新本田雅阁数据。

所以在上面的例子中，我想从 2012-08-15 06:09:52 检索 2000,2001,2002,2003,2004 年的数据，但较早的年份将从 2012-02-23 17 开始： 31:41

```
select year,avg_price,median_price,model,created_at 
from car_prices 
where make='honda' and    model= 'accord' group by year asc 
```

上面的查询获取每年的不同数据，但不是每年插入的最后一条记录。

任何想法如何获得每年以及最新的不同数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:19:22.790

```
SELECT p.*
FROM car_prices p
JOIN (SELECT year, MAX(created_at) latest
      FROM car_prices
      WHERE make = 'honda' AND model = 'accord'
      GROUP BY year) mp
ON p.year = mp.year AND p.created_at = mp.latest
WHERE p.make = 'honda' AND p.model = 'accord' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:01:29.863

```
select * from(
select year,avg_price,median_price,model,created_at 
from car_prices 
where make='honda' and    model= 'accord'     
order by created_at desc,year desc) m
group by year asc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:22:18.203

对于性能和保证行为，您应该创建一个查找并加入它。

在您的情况下，您希望找到任何给定组的最新`created_at`值。`make, model, year`下面代码中的子查询就是这样做的。

然后，您再次将其加入原始数据，仅查找具有这些`make, model, year, created_at`值的记录。

这确实意味着如果您有多个具有相同`make, model, year, created_at`值的记录，您将获得多个结果`make, model, year`。

确保您有一个索引覆盖，以便快速`(make, model, year, created_at)`搜索最近的内容`created_at`以及连接。

```
SELECT
  *
FROM
  car_prices
INNER JOIN
(
  SELECT
    make, model, year, MAX(created_at) as created_at
  FROM
    car_prices
  GROUP BY
    make, model, year
)
  AS most_recent
    ON  car_prices.make       = most_recent.make
    AND car_prices.model      = most_recent.model
    AND car_prices.year       = most_recent.year
    AND car_prices.created_at = most_recent.created_at
WHERE
      most_recent.make  = 'honda'
  AND most_recent.model = 'accord' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-12T10:16:57.107

添加一个默认设置为 0 的新布尔列。我用：`is_old`。

```
| is_old            | TINYINT(1) | NO  |     | 0    |                | 
```

在插入新品牌、型号、年份的价格时，我首先会：

```
UPDATE car_prices 
   SET `is_old`=1
WHERE 
   `make`='make_to_insert' AND
   `model`='model_to_insert' AND
   `year`='year_to_insert'; 
```

然后我插入新行。

获取最近的价格很简单：

```
SELECT * FROM car_prices
WHERE `is_old` = 0; 
```

您的示例查询将是：

```
SELECT * FROM
  car_prices
WHERE
      make  = 'honda'
  AND model = 'accord'
  AND is_old = 0; 
```

# c# - XtraGrid 已修改

> ID：12067817
> 
> 赞同：0
> 
> 时间：2012-08-22T06:58:58.803
> 
> 标签：c#, winforms, devexpress, xtragrid

我需要知道是否`XtraGrid`已修改（更改值或添加行）。

我可以制作一个`boolean var`并更改它`GridView_CellValueChanged`：

```
void suppGridView_CellValueChanged(object sender, CellValueChangedEventArgs e) {
    isModified = true;
} 
```

或者
我可以读取所有 DataSource 并检查[DataRow.RowState](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowstate.aspx)属性值（`Modified`或`Added`）：

```
foreach (DataRow row in dataSource.Rows) {
    if (row.RowState == DataRowState.Modified || row.RowState == DataRowState.Added) 
        return true;
} 
```

你知道更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:58:34.593

您可以通过以下方式知道数据表是否发生了变化：

```
DataTable changes = table.GetChanges(DataRowState.Added | DataRowState.Modified);
bool isModified = (changes != null); 
```

这`table`是一个数据表。
来自[msdn](http://msdn.microsoft.com/en-us/library/5dxfaha8.aspx)：

> **DataTable.GetChanges 方法：**
> 获取 DataTable 的副本，其中包含自上次加载或调用 AcceptChanges 以来对其所做的所有更改，并由 DataRowState 过滤。

**备注：** 如果没有找到所需 DataRowState 的行，则该方法返回**null**。

# javascript - ruby eval 方法正在停止在 ruby on rails 中显示 UI 表单

> ID：12067819
> 
> 赞同：1
> 
> 时间：2012-08-22T06:59:03.733
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我在 rails 中编写了一种辅助方法，用于填充 select 标记中的数据。

选择标签中的数据填充是使用 eval 方法完成的，该方法评估一些 ruby​​ 代码，并在执行从该 ruby​​ 代码返回的任何数据之后，然后将其填充到 select_tag 选项中。

我的问题是 UI 表单（select_tag 和一些标签）在 eval 方法完成其代码执行之前不会显示，但我的要求是先向用户显示表单，然后使用一些 ajax 调用加载选择列表中的数据.

由于从中填充选择列表的数据以某种文本格式存在于某个表中，因此我必须使用 ruby​​ eval 方法来执行该代码。

但是 eval 的问题是它会暂停 UI 的显示，直到它完全执行。

那么有什么方法可以完成上述任务吗？让我知道是否有人有任何方法可以解决上述问题。

感谢：D

# java - 停止方法执行并等待事件？

> ID：12067821
> 
> 赞同：1
> 
> 时间：2012-08-22T06:59:16.797
> 
> 标签：java, jakarta-ee, servlets

我有一个支持方法，应该在执行之间停止，应该等待特定`flag`的设置或`event`发生。

目前我只是`polling`一个`application-scoped variable`. 如果它被任何其他请求设置，则等待方法可能会继续。

但是是`polling`正确的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:03:52.803

希望我理解正确。轮询效率低下，因为它浪费 CPU 周期。您可以将对象用作信号：

```
Object signal = new Object();
volatile boolean shouldWait = true; 
```

在等待方法中：

```
// ...    
synchronized(signal) {
   while(shouldWait) {
      signal.wait();
   }    
} 
```

在信令代码中：

```
synchronized(signal) {
   shouldWait = false;
   signal.notify();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:06:17.077

我建议使用[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式，其中第一个 servlet 将是实现[Observable的对象的](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)[观察者](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)。当发生某些事情时，第二个 servlet 将更新 observable，并调用 setChanged() 方法，该方法又会通知观察者（在这种情况下是您的第一个 servlet）。

# android - 如何删除微调器中上一个选定项目的单选按钮焦点

> ID：12067823
> 
> 赞同：0
> 
> 时间：2012-08-22T06:59:21.183
> 
> 标签：android, radio-button, android-spinner

我创建了包含泰卢固字体项目的微调器。
我正在使用 ttf 文件显示泰卢固语字体。我正在覆盖数组适配器视图方法和下拉视图方法，以在泰卢固语中显示项目。但我的问题是默认选择是第一项。但是如果我选择第三个项目，单选按钮焦点仍然在第一个项目上。那么如何解决呢？我有这样的视图和下拉方法。

获取视图和下拉视图用于在泰卢固语中获取微调器元素文本。我已将微调器元素声明为包含泰卢固语文本的字符串数组。

```
final ArrayAdapter<String> cropAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, cropElements) {
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);

            Typeface externalFont = Typeface.createFromAsset(getAssets(),
                    "DroidSansRegionalAAD.ttf");
            ((TextView) v).setTypeface(externalFont);
            return v;
        }

        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            View v = super.getDropDownView(position, convertView, parent);

            Typeface externalFont = Typeface.createFromAsset(getAssets(),
                    "DroidSansRegionalAAD.ttf");
            ((TextView) v).setTypeface(externalFont);

            return v;

        };

    };
    cropAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# scipy - scipy.sparse.linalg.lsmr 和 scipy.sparse.linalg.lsqr 之间的区别

> ID：12067830
> 
> 赞同：9
> 
> 时间：2012-08-22T07:00:00.273
> 
> 标签：scipy, linear-algebra, sparse-matrix

有人知道什么时候选择哪个更好吗？他们在我看来是一样的...

[lsmr](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.lsmr.html#scipy.sparse.linalg.lsmr) [lsqr](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.lsqr.html#scipy.sparse.linalg.lsqr)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T07:23:34.727

两个包都做同样的事情。LSMR 基于 2010 年的 Fong & Saunders 算法（参见[论文](http://arxiv.org/abs/1006.0758)），并且最近在 scipy 中引入（即 0.10 版及更早版本没有它）。根据该论文，LSMR 的收敛速度应该比 LSQR 快，后者使用已经存在近 30 年的 Paige & Saunders 算法。

# cryptography - 我的签名和加密方案安全吗？

> ID：12067835
> 
> 赞同：0
> 
> 时间：2012-08-22T07:00:11.510
> 
> 标签：cryptography, bouncycastle, keystore, public-key-encryption, pkcs#7

我需要在客户端机器上对数据进行签名和加密。之后，我将使用 SFTP 将文件发送到服务器计算机。在服务器上，我想验证签名并解密数据。

这个方案安全吗？我应该怎么做才能提高安全性？

我正在执行以下步骤：

1.  创建 Java 密钥库；
2.  创建自签名 X509 v3 证书并将其插入 JKS 密钥库；
3.  将此 JKS 密钥库提供给客户端和服务器；
4.  签名数据：从 JKS 密钥库中获取私钥和​​证书，并使用`CMSSignedDataGenerator`and对数据进行签名`CMSSignedData`；
5.  `CMSEnvelopedDataGenerator`使用;加密上一步的有符号字节

在服务器端，我执行以下步骤：

1.  加载 JKS；
2.  从 JKS 检索私钥；
3.  检索 CMSEnvelopedData 并获取 Content；
4.  加载 X509 证书并使用 CMSSignedData 验证签名并恢复数据；

我只有一个公私钥对。我正在使用 Bouncy Castle 和 PKCS 7。

* * *

JKS的创建：

```
public static KeyStore createKeyStore() throws Exception {
         KeyStore keyStore = KeyStore.getInstance("JKS");
         keyStore.load(null, null);

    X500PrivateCredential rootCredential = createRootCredential();
    X500PrivateCredential interCredential = createIntermediateCredential(
            rootCredential.getPrivateKey(), rootCredential.getCertificate());
    X500PrivateCredential endCredential = createEndEntityCredential(
            interCredential.getPrivateKey(),
            interCredential.getCertificate());

    keyStore.setCertificateEntry(rootCredential.getAlias(),
            rootCredential.getCertificate());
    keyStore.setKeyEntry(
            endCredential.getAlias(),
            endCredential.getPrivateKey(),
            ConfigurationClass.PRIVATE_KEY_PASSWORD.toCharArray(),
            new Certificate[]{endCredential.getCertificate(),
                interCredential.getCertificate(),
                rootCredential.getCertificate()});

    keyStore.store(new FileOutputStream(ConfigurationClass.JAVA_KEY_STORE_PATH), ConfigurationClass.KEY_STORE_PASSWORD.toCharArray());
    return keyStore;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:02:00.973

不要这样做。只需通过 SFTP 传输数据，但使用证书（由服务器颁发）进行身份验证。根据[这篇](https://stackoverflow.com/a/15937/980922)文章，这可以通过[JSch 库](http://www.jcraft.com/jsch/)来完成。

如果您在发送数据之前对数据进行了加密，然后在之后立即对其进行解密，那么您所做的是传输安全，而不是静态数据安全。

滚动你自己的加密，即使你是用好的原语组装它，也是不好的，而且通常会失败。就你正在做的事情而言，你至少有两个问题：

1.  您需要对加密数据进行加密然后签名，以防止诸如 Padding oracle 攻击之类的事情
2.  您的密钥管理可能会出现问题：

    3.  你如何处理新客户的到来？
    4.  是什么阻止了攻击者将他们的密钥添加到服务器？

        这似乎是一个愚蠢的问题，但实际上，如果您有一个外部服务提供服务器密钥，那么服务器如何验证该服务？正确的方法是让服务器发出在其（自签名）“root”权限下签名的密钥（这也可能是您拥有的其他一些受信任的服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T00:04:00.920

你所描述的肯定是不安全的。私钥不应该旅行；密钥对通常在需要它们的位置生成。

您需要做的是使用自签名证书创建某种基础架构 CA。您应该为此非常安全地保存私钥（实际上，由于私钥仅用于签署其他证书，您可以将其存储在保险箱中）。

现在，您在客户端和服务器上都生成了两个密钥对和两个证书请求。将两个证书请求都发送到基础架构 CA。该 CA 应签署请求（并添加数据），生成证书。证书被发送到客户端和服务器，将它们添加到它们自己的（受密码保护的）JKS 存储中。

现在要传输数据，您应该使用服务器的公钥加密，然后使用客户端的私钥签名。服务器应*首先*验证客户端的签名，然后使用自己的私钥解密。如果你不这样做，你很容易受到填充 oracle 攻击。为此，它需要 CA 证书来验证证书链。

在继续之前，请尝试尽可能多地了解 PKI。请记住，您的方案仅与您的私钥（以及 JKS 密码）一样安全。我描述的只是大体结构，还有很多实现细节。

注意：我忽略了 SFTP，因为您也没有扩展到它。严格来说，你应该不需要它。

# java - 声纳可折叠 if 语句

> ID：12067837
> 
> 赞同：4
> 
> 时间：2012-08-22T07:00:25.317
> 
> 标签：java, eclipse, performance, sonarqube, pmd

我收到异常“可折叠的 if 语句”。

通过以下代码中的声纳。

```
if(getSomething().equals(getSomething()){
  if(getsomehing.contains(getSomething()){

  }
} 
```

可折叠的 if 语句 这些语句可以组合在一起。

这个指标的含义是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T07:04:55.280

请参阅 pmd 解释：http: [//qa.nuiton.org/sonar/rules/show/pmd :CollapsibleIfStatements?layout=false](http://qa.nuiton.org/sonar/rules/show/pmd:CollapsibleIfStatements?layout=false)

PMD/Sonar 确定，您不需要 2 个 if 语句，而是可以使用 AND/OR 运算符将其组合为一个。

这应该没问题：

```
if (getSomething().equals(getSomething()) && getsomehing.contains(getSomething())) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:06:06.060

如果第一个`getSomething`通过字符串相等等于您的第二个，那么当然两者都包含彼此;-)

# session - cakephp 读取会话变量

> ID：12067839
> 
> 赞同：1
> 
> 时间：2012-08-22T07:00:38.233
> 
> 标签：session, cakephp

我创建了一个需要将会话变量插入表单的页面。我遇到的问题是我`Session->read();`将变量放入表单中的正确字段。

这是创建会话变量（last）的控制器

```
function add($last=null){

    $accounttemplates=$this->Template->find('list', array(
    'fields'=>array('name'),
    'conditions' => array(
    'account_id' => $this->Auth->user('account_id'))));

        //retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        $templatefields=$this->Field->find('all', array(
        'conditions' => array(
        'Field.template_id' => "10002")));

        $this->set('accountid', $accountid); 
        $this->set('templatefields', $templatefields); 

        $this->set('accounttemplates', $accounttemplates);

    if($this->request->is('post'))
    {

    $this->Field->create(); 

    if ($this->Field->save($this->request->data))
    {   
        if($this->request->data['submit'] == "type_1") 
            {

                $last=$this->Session->write('last', $this->data['Field']['template_id']);
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'fields','action' => 'add_again',$last));
            } 
            if($this->request->data['submit'] == "type_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 
 }

     $this->set('last', $last); 

  } 
```

在这个函数中是读取会话变量的地方。

```
function add_again($last=null){

    $accounttemplates=$this->Template->find('list', array(
    'fields'=>array('name'),
    'conditions' => array(
    'account_id' => $this->Auth->user('account_id'))));

        //retrieve Account Id of current User       
        //$accountid=$this->Auth->user('account_id');

        $templatefields=$this->Field->find('all', array(
        'conditions' => array(
        'Field.template_id' => "10002")));

        //$this->set('accountid', $accountid); 
        $this->set('templatefields', $templatefields); 
        $last=$this->Session->read('last');
        $this->set('accounttemplates', $accounttemplates);

    if($this->request->is('post'))
    {

    $this->Field->create(); 

    if ($this->Field->save($this->request->data))
    {   
        if($this->request->data['submit'] == "type_1") 
            {
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'fields','action' => 'add_again'));
            } 
            if($this->request->data['submit'] == "type_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 

  }
} 
```

这是我试图将变量 $last 输入的表格

```
<?php echo $this->Form->create('Field', array('action'=>'add'));?>
                        <td><?php echo $this->Form->input('name', array('label'=>false)); ?></td>
                        <td><?php echo $this->Form->input('description', array('label'=>false)); ?></td>
                        <td><?php echo $this->Form->input('default_value', array('label'=>false)); ?></td>
                        <td><?php echo $this->Form->input('template_id', array('value' => $last, 'type'=>'text'));?></td>
                    <?php   echo $this->Form->hidden('active',array('default'=>'1')); ?> 
```

在第一个函数中是最后创建会话变量的位置，我试图将该变量放在视图中的 template_id 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:55:39.767

您没有将变量设置`$last`到您的`add_again()`方法中。只需在下面从会话中读取值的地方写下以下行。

```
 $last = $this->Session->read('last');
 $this->set('last', $last); // write this line just below the above line. 
```

# wpf - 在 Visual Studio 2012（RTM，在 Windows 8 RTM 上）中没有带有断点的 XAML 绑定调试？

> ID：12067841
> 
> 赞同：4
> 
> 时间：2012-08-22T07:00:44.903
> 
> 标签：wpf, xaml, microsoft-metro, silverlight-5.0, visual-studio-2012

在将我的 Silverlight 5 解决方案升级到 Visual Studio 2012 (RTM)，然后更新到 Windows 8 (RTM) 后，我注意到当您在 XAML 中设置断点时，您会在调试模式下获得以下工具提示：

*当前不会命中断点。未找到符号：System.Xml.Xsl.Runtime.XmlQueryRuntime.OnCurrentNodeChanged2。*

然后，我尝试在 Windows Store App 测试项目的 XAML 中设置断点，然后在 WPF 应用程序中设置断点，但我得到了完全相同的工具提示。

我试图修复 Visual Studio 2012，但这并没有改变任何东西。

在 Visual Studio 2010 中，此类断点运行良好。

有人遇到同样的问题吗？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:46:26.327

尝试从 MS 启用符号下载和源。正如这里建议的那样 [http://msdn.microsoft.com/en-us/library/cc667410.aspx](http://msdn.microsoft.com/en-us/library/cc667410.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:34:02.430

我的解决方案是使用源代码编辑器打开 xaml 页面。

右键单击xaml页面->打开方式...->源代码（文本）编辑器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:47:19.757

选择您的应用程序 project.web 的 silverlight 伴侣项目，右键单击 na 转到属性，选择选项卡“WEB”，然后在“调试器”底部激活 Silverlight 复选框。

# asp.net - 如何在中显示十进制值 控制？

> ID：12067848
> 
> 赞同：4
> 
> 时间：2012-08-22T07:00:53.687
> 
> 标签：asp.net, html, vb.net, telerik

我正在使用 Telerik:radnumerictextbox 控件提供十进制输入，我需要以十进制输入，例如 10，但 radnumerictextbox 默认显示值 10.00，如何设置属性以获取十进制值。

这是我在客户端使用的代码。

```
<telerik:radnumerictextbox 
        ID="txtDirectTime" 
        ShowSpinButtons="True" 
        InterceptArrowKeys="True" 
        Step="5" MinValue="0" runat="server"> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:07:38.367

试试这个

```
<telerik:RadNumericTextBox runat="server"
                           ID="YourTextBox"
                           NumberFormat-DecimalDigits="2" /> 
```

有关更多信息，`RadNumericTextBox`请访问[此处](http://www.telerik.com/help/aspnet-ajax/input-numerictextbox-formatting-numeric-values.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T07:50:01.633

`NumberFormat-GroupSeparator=""`工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T20:18:23.857

在回答您的补充问题时，“如何删除 ',' [千分隔符]？”。

使用 NumberFormat GroupSeparator 属性，或者作为控件标记上的属性：

```
<telerik:RadNumericTextBox ID="RadNumericTextBox1" Runat="server"
    NumberFormat-GroupSeparator="" /> 
```

或作为子元素：

```
<telerik:RadNumericTextBox ID="RadNumericTextBox1" Runat="server">
    <NumberFormat GroupSeparator="" />
</telerik:RadNumericTextBox> 
```

参考：[RadNumericTextBox 格式化数值 (Telerik)](http://www.telerik.com/help/aspnet-ajax/input-numerictextbox-formatting-numeric-values.html)

# authentication - 应用程序如何识别来自身份提供者的安全令牌？

> ID：12067849
> 
> 赞同：1
> 
> 时间：2012-08-22T07:00:54.443
> 
> 标签：authentication, single-sign-on, identity, provider

当应用程序与发行者或身份提供者之间存在信任关系时，该应用程序如何识别安全令牌仅来自发行者？因此，令牌中的某些信息是否与声明一起，或者是在我们在应用程序中创建身份提供者时最初定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:00:13.200

两者：RP（应用程序）具有“受信任的发行者”（STS）列表，并且令牌由 STS 进行数字签名。令牌的完整性在应用程序中根据之前配置的列表进行验证。

如果应用程序接收到未妥协的令牌，但它来自不在列表中的颁发者，它将被拒绝。

还有其他验证（领域，观众Uri）。

此外，“信任”是一种方式，但通常必须在两端进行配置。

# visual-c++ - 使用 Directx 在窗口中渲染 DIB 图像

> ID：12067852
> 
> 赞同：0
> 
> 时间：2012-08-22T07:01:03.537
> 
> 标签：visual-c++, directx

我是 VC++ 的新手。我已经使用 WinApi 创建了一个窗口。现在我想使用 DirectX 在创建的窗口中渲染一个 DIB 图像。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:25:13.977

您可以尝试以下方法： 1\. 创建纹理。2.将DIB数据加载到纹理中。3\. 渲染纹理。

# iphone - 拒绝后如何重新提交iOS应用

> ID：12067854
> 
> 赞同：2
> 
> 时间：2012-08-22T07:01:16.900
> 
> 标签：iphone, ios, app-store

我有一个被 Apple 拒绝的 iPhone 应用程序。在调解中心，拒绝原因的消息是：

> * * *
> 
> 您可以在 iTunes Connect 中应用元数据的“查看备注”部分提供演示帐户信息，包括密码。
> 
> * * *
> 
> 虽然您的 iTunes Connect 应用程序状态显示为已拒绝，但我们不需要新的二进制文件来纠正此问题。请访问 iTunes Connect，管理您的应用程序，编辑元数据以在查看备注部分添加演示帐户详细信息，然后单击“保存”。完成后，单击“提交新元数据”，我们可以继续审核您的应用。
> 
> * * *
> 
> 此外，请尽早查看以下问题并提供尽可能详细的信息作为回复。您可以提前提供的信息越多，我们就能越早完成您的审核。
> 
> * * *

所以我正在提交新的元数据。

现在的问题是我需要提交新的二进制文件，当我提交新的二进制文件时，我是否应该在解决中心自行提供 Apple 所需的信息？还是不需要，因为我正在提交新的二进制文件？

更新：在我的情况下，Apple 要求提供除模拟帐户详细信息之外的更多信息，并且当我提交新的二进制文件时，我应该在新的元数据审查说明或当前版本的解决中心中提供该详细信息，但被拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:33:46.067

无论如何，提交新的二进制文件都会停止对“旧”二进制文件的审查过程 - 因此，Apple 需要在新二进制文件元数据的“审查说明”字段中正确测试您的应用程序就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:36:21.973

当您重新提交二进制文件时，我建议您在新提交随附的审阅者注释中输入对调解中心先前交换的引用。这样，他们将了解过去的问题并能够确认它是否已得到解决。

我这样做是为了之前的拒绝，我不得不改变一些东西*并*解释更多关于应用程序的信息，它运行良好。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:40:25.920

[查看 Apple 的文档](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html)

对于新的二进制文件，您需要再次添加元数据（以及审查说明）并再次完成所有审查程序。为了使旧的二进制文件进入审查过程，请在已经存在的审查说明中添加评论，这将减少审查过程的时间框架。希望这可以帮助

# php - MsSQL 编码问题

> ID：12067861
> 
> 赞同：6
> 
> 时间：2012-08-22T07:01:46.030
> 
> 标签：php, sql-server, pdo

我在 MsSQL 中有一个数据库，我通过 PDO 对象从我的 PHP 代码连接到该数据库。数据库有“Kadź”列。

现在 - 如果我执行

```
SELECT Kadź FROM <tablename> 
```

从我的 SQL Server Management Studio 查询 - 一切正常，我得到了结果。但是，当我尝试执行

```
$sql = "SELECT Kadź FROM <tablename>"; 
```

我收到一个

> > SQLSTATE [HY000]：一般错误：207 一般 SQL Server 错误：检查来自 SQL Server [207]（严重性 16）的消息 [（null）]

错误。查询任何其他列不会产生任何问题，但这一列会。我怀疑这是因为该列名称中的“ź”字符在我的 PHP 代码和数据库之间的路径上编码不正确。

我的服务器使用的排序规则是“Polish_Cl_Al”。我尝试通过添加属性来修复它

```
$this->setAttribute(PDO::MYSQL_ATTR_INIT_COMMAND, "SET NAME'utf8'"); 
```

但是 PDO 回答我，驱动程序不支持它...

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T07:04:37.163

你可以试试：

```
$pdo = new PDO('dblib:host=localhost;dbname=databasename;charset=UTF-8', 'username', 'password'); 
```

或（对于窗户）

```
$smth->setAttribute(PDO::SQLSRV_ATTR_ENCODING, PDO::SQLSRV_ENCODING_UTF8); 
```

# php - Mysql DATE_ADD INTERVAL 与 mysql 表字段

> ID：12067864
> 
> 赞同：6
> 
> 时间：2012-08-22T07:02:04.363
> 
> 标签：php, mysql

我有一张名为 datas 的表，我有`id`, `start_date`, `end_date`, `day_count`, `day_type`.
主键在哪里`id`，开始`end_date`是日期时间，`day_count`是 int`day_type`是 varchar。现在 day_type 将 DAY、WEEK、MONTH 存储为用户提出请求时的值，并且 day 字段保存天数，例如 1 到 60。

现在我想使用这个计数并输入 date_add mysql 内置函数。

我试图按如下方式传递它，但它的显示错误。

```
SELECT
datas.day_count,
datas.day_type,
MIN( datas.start_date ) AS MinDate,
MAX( datas.end_date ) AS MaxDate, 
DATE_ADD(MaxDate,INTERVAL datas.day_count datas.day_type) AS ExactDate,
datas.trade_service_id
FROM datas 
```

错误是 `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'datas.day_type)) AS ExactDate, datas' at line 13` 请一点提示会很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T07:51:00.003

此查询在 MySQL 中有效，但您究竟想在没有 Group 等的情况下输出什么？

```
SELECT
datas.day_count,
datas.day_type,
MIN( datas.start_date ) AS MinDate,
MAX( datas.end_date ) AS MaxDate,

start_date, min(start_date) as min_date,
case day_type 
  when 'MONTH' then DATE_ADD(MAX( datas.end_date ),INTERVAL datas.day_count MONTH) 
  when 'DAY' then DATE_ADD(MAX( datas.end_date ),INTERVAL datas.day_count DAY) 
end as ExactDate,

datas.trade_service_id
FROM datas 
```

# image - 我可以在 MediaWiki 的同一行中放置多个图像映射吗？

> ID：12067867
> 
> 赞同：2
> 
> 时间：2012-08-22T07:02:29.310
> 
> 标签：image, mediawiki, wiki, imagemap

我正在为三个图像使用[ImageMap](http://www.mediawiki.org/wiki/Extension%3aImageMap)`a.gif`扩展，`b.gif`和分别`c.gif`链接到页面`Page 1`，`Page 2`和`Page 3`。因此，将其添加到页面的代码很简单：

```
<imagemap>
File:a.gif|50px
default [[Page 1]]
desc none
</imagemap>

<imagemap>
File:b.gif|50px
default [[Page 2]]
desc none
</imagemap>

<imagemap>
File:c.gif|50px
default [[Page 3]]
desc none
</imagemap> 
```

但是，图像出现在一列中（即每个都在一个新行上），而我希望它们彼此相邻。删除代码中的空格没有帮助。这是我可以减少的最多，它仍然有效，但效果是一样的：

```
<imagemap>File:a.gif|50px
default [[Page 1]]
desc none</imagemap><imagemap>File:b.gif|50px
default [[Page 2]]
desc none</imagemap><imagemap>File:c.gif|50px
default [[Page 3]]
desc none</imagemap> 
```

我曾尝试使用[图片库](http://www.mediawiki.org/wiki/Help%3aImages#Optional_gallery_attributes)，但这不起作用 - 显然图片库与图片地图不兼容。

如何使用工作链接连续获取这三个图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:17:41.917

ImageMap 扩展生成的 HTML 代码如下所示：

```
<div>
  <a href="Page Name">
    <img src="image" />
  </a>
</div> 
```

因为`<div>`HTML 中的元素默认显示为块元素，所以它显示在自己的行上，其他 div 被推到下一行。有几种方法可以解决这个问题。最简单的方法是将图像放在这样的表格中：

```
{| width="100%"
|
<imagemap>
File:a.gif|50px
default [[Page 1]]
desc none
</imagemap>
|
<imagemap>
File:b.gif|50px
default [[Page 2]]
desc none
</imagemap>
|
<imagemap>
File:c.gif|50px
default [[Page 3]]
desc none
</imagemap>
|} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-21T12:24:58.060

要将图像内联，我们使用带有 css 规则的 div 语句，如下所示：

```
<div style="display:inline;">

[[File:image1.jpg]]
[[File:image2.jpg]]

</div> 
```

希望对你有帮助！

# java - 根据用户输入动态填充 log4j 中日志文件的位置

> ID：12067869
> 
> 赞同：2
> 
> 时间：2012-08-22T07:02:38.397
> 
> 标签：java, logging, log4j

我正在使用 log4j 进行日志记录。我有一个要求，应该在用户在命令提示符下输入的路径中创建日志文件。是否可以动态更改日志文件路径。我还必须在文件名中创建一个带有当前时间戳的单独日志文件。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:41:07.980

**根据用户输入设置文件路径**：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

import org.apache.log4j.FileAppender;
import org.apache.log4j.Logger;
import org.apache.log4j.PatternLayout;

public class DemoClass {

  public static void main(String[] args) {
    Logger logger = Logger.getLogger("main");
    FileAppender fileAppender = new FileAppender();
    fileAppender.setLayout(new PatternLayout("%-5p [%t]: %m%n"));
    logger.addAppender(fileAppender);
    String userLogFileName = "";
    BufferedReader  reader = new BufferedReader(new InputStreamReader(System.in));
    try {
      userLogFileName = reader.readLine();//read the users input
    } catch (IOException e) {
      System.out.println("error on reading user input");
      e.printStackTrace();
    }
    File file = new File(userLogFileName);
    try {
      if(!file.exists()) {//if the file does not exist
        file.createNewFile();//create a new file
      }
    } catch (IOException e) {
      System.out.println("error on creating file");
      e.printStackTrace();
    }
    fileAppender.setFile(userLogFileName);//the file must exist
    fileAppender.activateOptions();//activate the new file
    logger.error("test");
  }

} 
```

**第二个问题**：每次记录事件时都应该更新文件名？这听起来像一个糟糕的表现。最好使用 a`DailyRollingFileAppender`以您选择的时间步长获取一个新的日志文件，并将最后一个事件的时间戳放在文件名中（默认）。

# java - 如何设置没有布局的画布的大小

> ID：12067873
> 
> 赞同：1
> 
> 时间：2012-08-22T07:02:48.773
> 
> 标签：java, swt

我在 SWT 中对 Canvas 进行子类化，并在构造函数内部调用 pack()，Canvas 的大小计算为 64x64。

我的班级内没有样式或布局。

*   这里的大小是如何计算的？
*   如何更改班级规模？ `this.setSize()`不起作用。

```
 public MyClass(Composite parent, int style) {
        super(parent, SWT.NONE);
        this.setBackground(getDisplay().getSystemColor(SWT.COLOR_YELLOW));

        this.computeSize(1000, 1000, true);
        this.pack();

        Point s = this.getSize();
        System.out.println(s.x); //prints 64
    } 

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:23:00.870

如果你是 Canvas 的子类，那么你也可以重写 computeSize 方法来强制特定的元素大小。这对于使其他元素围绕固定大小的组件流动而不必使用布局提示，或者如果您想根据正在渲染的图像设置画布大小非常有用。

这在您的 MyCanvas 类中可能是这样的：

```
public Point computeSize (int widthHint, int heightHint, boolean changed) {
  Point initialSize = super.computeSize (widthHint, heightHint, changed);
  initialSize.x = 1000;
  initialSize.y = 1000;
  return initialSize;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:08:04.873

你不给自己大小：它是由使用你的 MyClass 的组件布局给出的。

所以你的画布应该准备好处理任何尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T07:09:54.750

您是否尝试过通过 暗示指定尺寸`GridData`？

```
final GridData data = new GridData();
data.widthHint = 1000;
data.heightHint = 1000;
canvas.setLayoutData(data); 
```

# ios - UIScrollView 不释放图像

> ID：12067875
> 
> 赞同：0
> 
> 时间：2012-08-22T07:02:56.873
> 
> 标签：ios, uiscrollview, uiimage

我有一个 UIScrollView 显示来自 plist 文件的图像库。我还有一个从图库图像列表中删除图像的功能，该功能基本上删除了 plist 文件中的对象，然后在 ScrollView 中重新加载图像。问题是当我使用该方法时，我无法在重新加载新内容之前释放 UIScrollView 的图像`- (IBAction)deleteimage:(id)sender`。新内容已加载，但在旧内容之上，然后图像仍位于新内容后面。在重新加载滚动视图内容之前我应该​​怎么做才能释放图像？

我正在使用的代码是：

```
#import "ImageScrollViewController.h"

@interface ImageScrollViewController ()

@end

@implementation ImageScrollViewController

@synthesize images,scrollView,pageControl,subview;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
scrollView.autoresizingMask = ( UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

[self setupthescroll];
self.pageControl.currentPage = 0;
}

- (void)setupthescroll{

//Get the images of the Array
NSUserDefaults *success = [NSUserDefaults standardUserDefaults];
images = [success mutableArrayValueForKey:@"imagelist"];
NSLog(@"list of images%@",images);

pageControlBeingUsed = NO;

for (int i = 0; i < images.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    subview = [[UIImageView alloc] initWithFrame:frame];
    NSString *str4 = [images objectAtIndex:i];
    subview.image = [[[UIImage alloc] initWithContentsOfFile:str4] autorelease];
    self.subview.contentMode = UIViewContentModeScaleAspectFit;
    [self.scrollView addSubview:subview];
    [subview release];
}

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height);

self.pageControl.numberOfPages = images.count;

//Get the number of the images
int page;
page = self.pageControl.currentPage;
printf("Current Page: %d", page);

}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
if (!pageControlBeingUsed) {
    // Switch the indicator when more than 50% of the previous/next page is visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
}
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
}

- (IBAction)changePage {
// Update the scroll view to the appropriate page
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES];
pageControlBeingUsed = YES;
}

- (IBAction)deleteimage:(id)sender{
//Get the number of the image
int page;
page = self.pageControl.currentPage;
printf("Current Page: %d", page);

//Remove the images of the Array
NSUserDefaults *success = [NSUserDefaults standardUserDefaults];
images = [success mutableArrayValueForKey:@"imagelist"];
[images removeObjectAtIndex:page];
NSLog(@"list of images%@",images);

//Update the Array
NSUserDefaults *arrayofimages = [NSUserDefaults standardUserDefaults];
[arrayofimages setObject:images forKey:@"imagelist"];

//Refresh the ScrollView
[self setupthescroll];

//post the notification than images have been updated
NSUserDefaults *deleted = [NSUserDefaults standardUserDefaults];
[deleted setObject:@"deleted" forKey:@"deletedimages"];
}

- (IBAction)closepage:(id)sender{
[self dismissModalViewControllerAnimated:YES];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)dealloc {
[pageControl release];
[scrollView release];
//[images release];
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:25:36.153

如果您要重新加载整个滚动视图（即重新添加所有图像），您首先需要删除现有图像。

使用 UIView 的**removeFromSuperview**方法从滚动视图中删除视图。

所以从滚动视图中删除所有图像视图的代码片段看起来像这样

```
NSArray *imgViews = [scrollView subviews];
for(id aView in imgViews){
    if([aView isKindOfClass:[UIImageView class]]){
      [aView removeFromSuperview]; //remove only if its an imageview
    }
} 
```

如果您已经引用了图像视图，则可以直接在它们上调用方法，而无需遍历滚动视图的所有子视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:20:36.273

您应该删除滚动视图中的所有 UIImageView。

就像是

```
NSArray* subviews = [[scrollview subviews] copy];
for (UIView* v in subviews) {
    [v removeFromSuperview];
}
[subviews release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:34:31.853

您忘记从 scrollView 子视图中删除以前的图像视图。对此（至少用于测试假设）的一种残酷方法是在开头添加以下行`setupthescroll`：

```
[self.scrollView.subviews makeObjectsPerfomSelector:@selector(removeFromSuperview)]; 
```

这样做的问题是滚动视图的私有子视图（例如滚动条）也将被删除。因此，在实践中，您应该跟踪您在 ivar 数组中创建的子视图，并在该数组而不是子视图数组上执行上述行，然后清除该数组。

或者，一种更简洁的方法是仅删除与已删除图像对应的子视图，并更新剩余图像视图的帧，而不是删除并重新创建所有内容。您可以使用字典或 subviews`tag`属性来跟踪与哪个图像相关联的视图。

# python - 在 python 中处理非常大的 netCDF 文件

> ID：12067876
> 
> 赞同：13
> 
> 时间：2012-08-22T07:03:16.860
> 
> 标签：python, numpy, netcdf

我正在尝试处理来自非常大的 netCDF 文件（每个约 400 Gb）的数据。每个文件都有一些变量，它们都比系统内存大得多（例如 180 Gb 与 32 Gb RAM）。我正在尝试使用 numpy 和 netCDF4-python 通过一次复制一个切片并对该切片进行操作来对这些变量进行一些操作。不幸的是，读取每个切片需要很长时间，这会影响性能。

例如，其中一个变量是一个 shape 数组`(500, 500, 450, 300)`。我想对 slice 进行操作`[:,:,0]`，所以我执行以下操作：

```
import netCDF4 as nc

f = nc.Dataset('myfile.ncdf','r+')
myvar = f.variables['myvar']
myslice = myvar[:,:,0] 
```

但是最后一步需要很长时间（在我的系统上大约 5 分钟）。例如，如果我`(500, 500, 300)`在 netcdf 文件中保存了一个形状变量，那么相同大小的读取操作只需几秒钟。

有什么办法可以加快速度吗？一个明显的路径是转置数组，以便我选择的索引首先出现。但在如此大的文件中，这在内存中是不可能的，而且考虑到一个简单的操作已经花费了很长时间，尝试它似乎更慢。我想要的是一种以 Fortran 接口 get_vara 函数的方式读取 netcdf 文件片段的快速方法。或某种有效转置数组的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T22:42:33.107

您可以使用 nccopy 实用程序转置太大而无法放入内存的 netCDF 变量，此处记录了该实用程序：

[http://www.unidata.ucar.edu/netcdf/docs/guide_nccopy.html](http://www.unidata.ucar.edu/netcdf/docs/guide_nccopy.html)

这个想法是通过指定变量所需的块形状（多维图块）来“重新分块”文件。您可以指定将多少内存用作缓冲区以及将多少内存用于块缓存，但不清楚如何在这些用途之间以最佳方式使用内存，因此您可能只需要尝试一些示例并为它们计时。您可能不想完全转置变量，而是希望通过指定沿切片的 2 个大维度具有大量数据而沿其他维度只有少数值的块来“部分转置”它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:36:53.663

这是评论，不是答案，但我无法对上述内容发表评论，对不起。

我了解您要`myvar[:,:,i]`处理`i`in `range(450)`。在这种情况下，您将执行以下操作：

```
for i in range(450):
    myslice = myvar[:,:,i]
    do_something(slice) 
```

瓶颈在于访问`myslice = myvar[:,:,i]`. 您是否尝试过比较访问需要多长时间`moreslices = myvar[:,:,0:n]`？这将是连续数据，也许您可​​以节省时间。您可以选择`n`内存所能提供的最大容量，然后处理下一个数据块，`moreslices = myvar[:,:,n:2n]`依此类推。

# c# - Word 文档中的高级搜索

> ID：12067888
> 
> 赞同：0
> 
> 时间：2012-08-22T07:03:53.763
> 
> 标签：c#, search, ms-word

我必须在 C#.NET 中构建一个应用程序，我可以使用它在 Word 文档中搜索某些单词。我已经看到 C#.NET 中有用于此的 API。但我需要更进一步。

我想做的一件事是使用正则表达式字符串进行搜索。

我需要做的另一件事是搜索一系列数字。所以我应该可以说类似的话`>500`。然后它应该找到每个值大于 的“单词” `500`。

所以最后两件事是我的问题。我找不到任何有关此的直接信息。是否可以使用带有 C# 代码的正则表达式在 Word 文档中进行搜索？如果它应该找到数字，是否有一种好方法来指定范围？

我想在 C#.NET 中执行此操作。

对此的任何信息表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:46:41.237

我已经在`.txt`文件上完成了，您必须更改第一行代码并打开 word 文件，但它应该是：

```
string fileData = System.IO.File.ReadAllText(@"C:\1\1.txt");  
        string[] words = fileData.Split(' ');  
        List<int> integers = new List<int>();  
        foreach (string word in words)  
        {  
            try  
            {  
                int integer = int.Parse(word);  
                if(integer > 500)  
                    integers.Add(integer);  
            }  
            catch (Exception)  
            {  
                //some code maybe 
            }  
        }  
        foreach (int integer in integers)  
        {  
            MessageBox.Show(integer.ToString());  
        } 
```

对于打开 word 文档，请查看[如何阅读 .docx 文件](https://stackoverflow.com/questions/3633615/how-can-i-read-docx-file)。

# java - 处理金钱和大十进制

> ID：12067895
> 
> 赞同：1
> 
> 时间：2012-08-22T07:04:56.993
> 
> 标签：java, bigdecimal, money-format

我正在尝试编写一个将钱存储在变量中的程序，所以我使用 Bigdecimal 类型，正如其他成员在这里所建议的那样。但我想要做的是......用户可以输入他想要的任何方式意思是说，他可以打字

```
 24
 or
 24.0
 or
 24.00 
```

如您所见，我让用户可以灵活地在自己方便的时候输入。但最终变量将存储在一个数组（BigDecimal 数组）中，所以当它存储时，我只想存储 2 个小数位。为什么我这么说是如果用户输入 24 我想存储 24.00 NOT 24 或 24.0 JUST 24.00 或者如果他输入 24.00 那么它将被存储而无需对其进行任何修改.. 如何做到这一点.. 提供的示例代码以下。

```
 BigDecimal bala;
    BigDecimal balintake;
    static BigDecimal[] bal= new BigDecimal[20];
    Scanner sc = new Scanner(System.in);
    balintake = sc.nextBigDecimal();

     bala.setScale(2,RoundingMode.HALF_UP);
     bal[0] = bala; 
```

但这不符合我的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:22:08.550

请记住，BigDecimal 对象是不可变的。所以，当你这样做

```
balintake.setScale(2,RoundingMode.HALF_UP); 
```

你应该把它分配回一个变量，比如

```
balintake = balintake.setScale(2,RoundingMode.HALF_UP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:20:56.727

[java.math.BigDecimal.setScale(int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#setScale%28int%29)返回一个**新**的 BigDecimal，而不是改变原来的 BigDecimal。

> 请注意，由于 BigDecimal 对象是不可变的，因此调用此方法不会导致修改原始对象，这与使用名为 setX 的方法更改字段 X 的通常约定相反。相反，setScale 返回具有适当比例的对象；返回的对象可能是新分配的，也可能不是新分配的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:21:27.997

对于初学者，您从未初始化变量“bala”

因此，您将“balintake”设置为扫描仪的下一个大小数。“setScale”方法不会改变 BigDecimal 本身，因为 BigDecimal 是不可变的，它会返回一个带有比例集的新 BigDecimal。

我相信这就是你想要的：

```
BigDecimal balintake;
BigDecimal[] bal= new BigDecimal[20];
Scanner sc = new Scanner(System.in);
balintake = sc.nextBigDecimal();

balintake = balintake.setScale(2,RoundingMode.HALF_UP);
bal[0] = balintake; 
```

# r - 使用新颖的距离函数创建相关矩阵

> ID：12067897
> 
> 赞同：2
> 
> 时间：2012-08-22T02:20:24.020
> 
> 标签：r

我正在尝试编写一个函数，该函数将使用一个奇特的距离估计（`dcorr`布朗距离）创建一个相关矩阵。更一般地说，我想为一个通用的“相关”矩阵编写代码，您可以在其中插入任何距离估计器。

我的数据被格式化，使得列是变量，行是观察。

我的基本代码有问题。我的算法如下：

*   使用 apply 获取变量
*   传递给将再次应用于整个矩阵的函数
*   此时你应该有两对变量
*   用于`na.omit`删除缺失的观测值（dcorr 所必需的）
*   计算 dcorr

我希望这会产生相关矩阵，但我在基本变量管理方面遇到了很多问题。我很难将变量传递给应用函数。特别是，我想传递在第一个应用中拉出的列并将其传递给第二个应用（即应用于整个原始矩阵）

我的代码：

```
dcormatrix <- function(Matrix){
  dcorhelper <- function (Col1){
    as.matrix(apply(Matrix,2,function(Col2){
      B <- na.omit(cbind(Col1,Col2))
      dcor(B[,1],B[,2],index=1)
    },Col1=Col1))
  }
 apply(Matrix,2,dcorhelper(),Matrix=Matrix)
} 
```

有任何想法吗？我相信一定有一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:58:08.383

您可能想`designdist`从`vegan`包裹中签出。它允许定义交替的距离/相异矩阵。见[这里](http://cc.oulu.fi/~jarioksa/softhelp/vegan/html/designdist.html)。

# python - sqlite3 set_authorizer 方法的问题

> ID：12067902
> 
> 赞同：1
> 
> 时间：2012-08-22T07:05:29.917
> 
> 标签：python, sqlite

我正在尝试使用该`Connection.set_authorizer`方法仅允许使用连接对象进行某些 DB 操作。（文档在[这里](http://docs.python.org/library/sqlite3.html#sqlite3.Connection.set_authorizer)）

我正在使用此代码进行测试：

```
import sqlite3 as sqlite

def select_authorizer(sqltype, arg1, arg2, dbname):  
    print("Test")  
    return sqlite.SQLITE_OK  #should allow all operations           

conn = sqlite.connect(":memory:")
conn.execute("CREATE TABLE A (name integer PRIMARY KEY AUTOINCREMENT)")
conn.set_authorizer(select_authorizer)
conn.execute("SELECT * FROM A").fetchall() #should still work 
```

这给了我一个`sqlite3.DatabaseError: not authorized`，没有打印出“测试”。我猜我可能错误地设置了我的授权人，而且它甚至都没有调用它。（虽然错误消息肯定没有传达）但是根据文档，这个设置看起来是正确的。

编辑：更改`sqlite.SQLITE_OKAY`为`sqlite.SQLITE_OK`，但由于该方法似乎根本没有被调用，所以这没有帮助也就不足为奇了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:04:14.127

授权回调接受*5 个*参数，但你的只接受 4 个：

> 回调的第一个参数表示要授权哪种操作。第二个和第三个参数将是参数或 None 取决于第一个参数。第 4 个参数是数据库的名称（“main”、“temp”等）（如果适用）。第 5 个参数是负责访问尝试的最内层触发器或视图的名称，如果此访问尝试直接来自输入 SQL 代码，则为 None。

因此，签名*应该*是：

```
def select_authorizer(sqltype, arg1, arg2, dbname, source): 
```

通常，在测试这样的回调时，使用`*args`通配符参数可以轻松进行测试：

```
def select_authorizer(*args):
     print(args)
     return sqlite.SQLITE_OK 
```

上面的回调打印出来：

```
(21, None, None, None, None)
(20, 'A', 'name', 'main', None) 
```

当我运行你的测试时`SELECT`。

请参阅[SQLite 的 C 参考`set_authorizer`](https://www.sqlite.org/c3ref/set_authorizer.html)和使用的各种常量的[操作代码参考](https://www.sqlite.org/c3ref/c_alter_table.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:48:56.823

Martijn Pieter 的回答是正确的；当我阅读那段时，我不知何故错过了第五个论点。

我还发现更仔细地阅读文档可以真正帮助我自己弄清楚这一点是以下行：`sqlite.enable_callback_tracebacks(True)`
此行将导致 sqlite 打印回调函数中发生的错误的回溯。

# android - 在我的应用程序设置中更改状态“使用 GPS 卫星”

> ID：12067903
> 
> 赞同：0
> 
> 时间：2012-08-22T07:05:40.240
> 
> 标签：android, gps, location

我有切换来更改状态在设置检查/取消选中使用 GPS 卫星。当我签入我的应用程序，但不知道在设置中更改状态时。帮我修一下。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:07:02.830

ICS 后您无法再更改 GPS 设置。为此，您必须修改 Settings.Secure，但只有制造商可以更改这些值。

# asp.net-mvc-3 - 在 mvc3 中查看控制器

> ID：12067907
> 
> 赞同：1
> 
> 时间：2012-08-22T07:06:08.470
> 
> 标签：asp.net-mvc-3, razor, radiobuttonfor

我在将值从视图传递到控制器时遇到问题

这是我的**观点**：

```
 @model  IEnumerable<SQLOperation.Models.QuestionClass.Tabelfields>

@{
     ViewBag.Title = "Question";
 }

 <h3> Question</h3>

 @{int i = 0;}

 @foreach (var item  in Model)
 {

  using (Html.BeginForm("Question", "Home"))
  {
      @Html.DisplayFor(modelItem => item.QuestionName)
      @Html.HiddenFor(m => item.QuestionID)      
         <br /><br />   
      if (item.Option1 != "")
      {
        @Html.RadioButtonFor(m => item.SelectedOption, item.Option1, item)                
        @Html.DisplayFor(modelItem => item.Option1)
                    <br /><br />                
      }

      if (item.Option2 != "")
      {
         @Html.RadioButtonFor(m => item.SelectedOption, item.Option2, item)              
         @Html.DisplayFor(modelItem => item.Option2)
                    <br /><br />
      }

      if (item.Option3 != "")
      {           
        @Html.RadioButtonFor(m => item.SelectedOption, item.Option3, item)              
        @Html.DisplayFor(modelItem => item.Option3)
                    <br /><br />
      }

      if (item.Option4 != "")
      {
       @Html.RadioButtonFor(m => item.SelectedOption, item.Option4, item)             
                    @Html.DisplayFor(modelItem => item.Option4) 
                <br /><br />     
      }
      i = (Int16)i + 1;

      if (Model.Count() == i)
      {
                <input name="btnsumbit" type="submit" value="Submit Feedback" 
                style="font-family:Segoe UI Light;font-size:medium;"/>
      }
  }
 } 
```

我的**控制器**：

```
[HttpGet]
    public ActionResult Question(string email)
    {
        var tf = new QuestionClass.Tabelfields();

        IList<QuestionClass.Tabelfields> viewmodel = new List<QuestionClass.Tabelfields>();
        var q = QuestionClass.getallQuestion(email).ToList();

        foreach (SQLOperation.Models.Question item in q)
        {
            QuestionClass.Tabelfields viewItem = new QuestionClass.Tabelfields();

            viewItem.Email = item.Email;
            viewItem.QuestionID = item.QuestionID;
            viewItem.QuestionName = item.QuestionName;
            viewItem.Option1 = item.Option1;
            viewItem.Option2 = item.Option2;
            viewItem.Option3 = item.Option3;
            viewItem.Option4 = item.Option4;                
            viewmodel.Add(viewItem);
        }
         return View(viewmodel);
    }

    [HttpPost, ActionName("Question")]
    public void Question(IEnumerable<QuestionClass.Tabelfields> items)
    {

    } 
```

我的**模型**：

```
public class QuestionClass
{
    public static FeedbackDatabaseDataContext context = new FeedbackDatabaseDataContext();

    public class Tabelfields : Question
    {
        //public decimal QuestionID { get; set; }
        //public string Email { get; set; }
        //public string QuestionName { get; set; }
        //public string Option1 { get; set; }
        //public string Option2 { get; set; }
        //public string Option3 { get; set; }
        //public string Option4 { get; set; }
        public string SelectedOption { get; set; }
    }

    public static List<Question> getallQuestion(string email)
    {
        var list = (from q in context.Questions where q.Email == @email select q);

        return list.ToList();
    }
 } 
```

但是我在控制器的**“项目”**中得到 NULL 。

```
[HttpPost, ActionName("Question")] 
    public void Question(IEnumerable<QuestionClass.Tabelfields> items) 
    { 
    } 
```

而如果我将 View & Controller 更改为 below ，我会从控制器中的数据库中获取最后一个值

**看法：**

```
@foreach (var item in Model)
{
  using (Html.BeginForm("Question", "home", new { email=item.Email,  q=item.QuestionID}))
  {
      @Html.DisplayFor(modelItem => item.QuestionName)
      @Html.HiddenFor(m => item.QuestionID)
       .

       .

       .
       . 
  }
} 
```

**控制器：**

```
[HttpPost, ActionName("Question")] 
    public void Question(string email,int q) 
    {   
    } 
```

我在电子邮件和 q 中得到值

那么如何获得所有价值观，即CondertsID，电子邮件，问题名称和它是控制器中的适当所选值（RadioButton）？

即在以下**控制器中：**

```
[HttpPost, ActionName("Question")] 
    public void Question(IEnumerable<QuestionClass.Tabelfields> items) 
    { 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:11:57.790

您需要索引 Html.*For 项目；

```
@Html.RadioButtonFor(m => m[i].SelectedOption, item.Option3, item) 
```

为了使事情更简单，我可能会摆脱`foreach`& 和单独`i`的声明并使用以下内容；

```
@for(int i=0; i < Model.Count; i++)
{
    @Html.HiddenFor(m => m[i].QuestionID) 
    @Html.RadioButtonFor(m => m[i].SelectedOption, Model[i].Option3, Model[i])
} 
```

等等

像这样的索引将导致 html 以完整的索引呈现：

```
<input type='hidden' name=[0].'QuestionId' />
<input type='hidden' name=[1].'QuestionId' />
<input type='hidden' name=[2].'QuestionId' /> 
```

而不是您当前正在做的事情，最终呈现为这样；

```
<input type='hidden' name='QuestionId' />
<input type='hidden' name='QuestionId' />
<input type='hidden' name='QuestionId' /> 
```

如果没有索引，每个表单字段都会被赋予相同的名称，因此您的控制器会认为只返回了一个。

# mongodb - 如何获取相邻记录的记录

> ID：12067908
> 
> 赞同：3
> 
> 时间：2012-08-22T07:06:10.167
> 
> 标签：mongodb

比如在创建记录时间字段之前和之后获取一个帖子

尝试使用以下语句获取文章

```
# Created is the time of the creation of the current article
# Before a
prev_post = db.Post.find ({'created': {'$ lt': created}}, sort = [('created', -1)], limit = 1)
# After a
next_post = db.Post.find ({'created': {'$ gt': created}}, sort = [('created', 1)], limit = 1) 
```

结果变得不连续，有时会跳过几条记录。我不知道为什么，也许我误解了FIND？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:47:47.743

这看起来确实是一种奇怪的行为，但 MongoDB 并不能保证您存储记录的顺序，除非您正在查询一个数组（其中记录按插入顺序保存）。我相信 MongoDB 所做的 - 它到达与您的查询匹配的第一个文档并返回它。底线：如果逻辑需要邻居记录，请使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:08:39.293

我认为这是你*创造*的。时间类型有问题，如果记录时间相同，系统不知道选择哪个。你可以使用**_id**，试试看。

# c# - C# Selenium wedriver：是否可以点击上面那个级别的对象

> ID：12067915
> 
> 赞同：1
> 
> 时间：2012-08-22T07:06:43.627
> 
> 标签：c#, xpath, selenium

我在一页中有很多对象，其中 xpath 是：

//td[@class='bxec-day' or @class='bxec-day bxec-holiday' 而不是(@class='bxec-day bxec-day-past-hol')]//div//div //一个[文本（）='10']

它们仅在最后一个“a”中的文本不同：a[text()='5'] a[text()='6'] 等。

我不需要点击“a”，但我需要在最后一个或最后一个 div 旁边点击。

像这样 //td[@class='bxec-day' 或 @class='bxec-day bxec-holiday' 而不是(@class='bxec-day bxec-day-past-hol') 和 @text( )='10'] 不起作用。

是否可以在 xpath 中升级一到两级？或者也许还有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:54:36.940

..可能是你需要的。所以在你的例子中：

//td[@class='bxec-day' or @class='bxec-day bxec-holiday' 而不是(@class='bxec-day bxec-day-past-hol')]//div//div //a[text()='10']/../../

然而，这会在一棵树中上升，因此如果“div”和“a”之间有任何其他元素，则需要将其考虑在内。

# javascript - 带有真实复选框的 Dynatree

> ID：12067920
> 
> 赞同：1
> 
> 时间：2012-08-22T07:07:01.877
> 
> 标签：javascript, dynatree, jquery-dynatree

我想要一个复选框树形式，我使用 dynatree jquery 树来做到这一点。然后我发现 dynatree 不使用真正的复选框，所以我在树中放置了 html 复选框。

它工作正常，直到我意识到当节点展开/折叠时它会删除检查的（勾号）值在javascript中有没有办法我可以编写一个函数来防止这种情况发生？

非常感谢。这是我的代码

```
 $(function(){
      $("#tree").dynatree({
        // using default options

        checkbox: false,
        selectMode: 3,
        noLink: true,

    });

 <div id="tree">
    <ul>
      <li id="key1" title="Look, a tool tip!">
        <input type="checkbox" id="chb-key1" name="selected_items" value="Item 1" class="" />Item 1</li>
      <li id="key2">
        <input type="checkbox" id="chb-key2" name="selected_items" value="Item 2" />Item 2</li>
      <li id="key3">
        <input type="checkbox" id="chb-key3" name="selected_items" value="Item 3" />Folder with some children
        <ul>
          <li id="key31">
            <input type="checkbox" id="chb-key31" name="selected_items" value="Item 3.1" />Sub-item 3.1</li>
          <li id="key32" class="selected">
            <input type="checkbox" id="chb-key32" name="selected_items" value="Item 3.2" />Sub-item 3.2
            <ul>
              <li id="key321" class="selected">
                <input type="checkbox" id="chb-key321" name="selected_items" value="Item 3.2.1" />Sub-item 3.2.1</li>
              <li id="key322" class="selected">
                <input type="checkbox" id="chb-key322" name="selected_items" value="Item 3.2.2" />Sub-item 3.2.2</li>
            </ul>
          </li>
        </ul>
      </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:39:04.463

我遇到了同样的问题。我解决它的方法是放置“复选框：true”并隐藏您的真实复选框并在每次选中/取消选中假框时选中/取消选中它们。

这是我的代码：

```
 $("#storyCategories").dynatree({
    //Tree parameters
    persist: false,
    checkbox: true,
    selectMode: 3,
    activeVisible: true,

    //Un/check real checkboxes recursively after selection
    onSelect: function (select, dtnode) {
        if (select) {
            $("#chb-" + dtnode.data.key).attr("checked", "checked").addClass("hidden");
        } else {
            $("#chb-" + dtnode.data.key).removeAttr("checked").addClass("hidden");
        }
        //  $("#chb-" + dtnode.data.key).attr("checked", select).addClass("hidden");
        dtnode.visit(function (dtnode) {
            if (select) {
                $("#chb-" + dtnode.data.key).attr("checked", "checked").addClass("hidden");
            } else {
                $("#chb-" + dtnode.data.key).removeAttr("checked").addClass("hidden");
            }
        }, null, true);
    },
    //Hack to prevent appearing of checkbox when node is expanded/collapsed
    onExpand: function (select, dtnode) {
        $("#storyCategories :checkbox").addClass("hidden");
        //$("#chb-" + dtnode.data.key).attr("checked", dtnode.isSelected()).addClass("hidden");
        if (dtnode.isSelected()) {
            $("#chb-" + dtnode.data.key).attr("checked", "checked").addClass("hidden");
        } else {
            $("#chb-" + dtnode.data.key).removeAttr("checked").addClass("hidden");
        }
    }
});
    //Hide real checkboxes
    $("#storyCategories :checkbox").addClass("hidden"); 
```

我使用了这篇文章中的代码，但不得不更新它：[http](http://www.llakomy.com/articles/adding-dynatree-with-checkboxes-to-a-form) ://www.llakomy.com/articles/adding-dynatree-with-checkboxes-to-a-form 。

# html - ie中的长标签标题问题

> ID：12067922
> 
> 赞同：0
> 
> 时间：2012-08-22T07:07:04.203
> 
> 标签：html, internet-explorer

我们使用标题标签来显示标签的描述。但是当描述很长时，值会在 IE 中被修剪掉。相同的描述在 Firefox 中正确显示。

`<label title="An test used by the test test teszt aaaaa contains combination of numbers to identify the specific state and city in which the subject resides. Design Note: This element stores the complete test test test as it is being returned by the address standardization application. It might be different from the combination of postal code and the postal code extension code. Note: This test any test test test Extension. If this data has been derived by concatenating the elements Postal Code and Postal Code Extension then these elements will be separated by a hyphen (-). This is a test test test element which test test test test data already test testt test test in the test test test stest tes t Address Line." > Full Test test Code :</label>`

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:16:36.963

问题是一个固定大小的缓冲区，用于在 IE 中存储工具提示文本。[文档](http://msdn.microsoft.com/en-us/library/ie/ms534683%28v=vs.85%29.aspx)指出 `title`属性限制为 512 个字符。`title`一般来说，无论如何都不建议将小说放在属性中。[»此属性提供有关为其设置的元素的咨询信息。«](http://www.w3.org/TR/html401/struct/global.html#h-7.4.3) - 它并不是真的用于过长的描述。

# php - Magento 想在迁移后重新安装

> ID：12067923
> 
> 赞同：0
> 
> 时间：2012-08-22T07:07:14.690
> 
> 标签：php, mysql, magento, installation, magento-1.6

在过去的几天里，我将 Magento 安装移到了新的登台服务器和新的生产服务器上。生产服务器上一切顺利，网站又回来了，但我无法让它在登台服务器上工作......它一直说表“admin_assert”已经存在（mysql错误）和错误来自安装脚本......但我不想要另一个安装。

magento 怎么可能试图在另一个预配置的基础上执行安装？

我移动了整个基础（源代码），没有执行全新安装，然后我转储了数据库并更改了基础 url。

你有什么主意吗？

仅供参考，这是整个错误日志：

```
a:5:{i:0;s:193:"Error in file:  "/home/lex/code/mycommerce/app/code/core/Mage/Admin/sql/admin_setup/install-1.6.0.0.php" - SQLSTATE[42S01]: Base table or view already exists: 1050 Table 'admin_assert' already exists";i:1;s:920:"#0 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/Resource/Setup.php(421): Mage_Core_Model_Resource_Setup->_modifyResourceDb('install', '', '1.6.1.0')
#2 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/Resource/Setup.php(327): Mage_Core_Model_Resource_Setup->_installResourceDb('1.6.1.0')
#3 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/Resource/Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/App.php(412): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 /home/lex/code/mycommerce/app/code/core/Mage/Core/Model/App.php(338): Mage_Core_Model_App->_initModules()
#6 /home/lex/code/mycommerce/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#7 /home/lex/code/mycommerce/index.php(90): Mage::run('', 'store')
#8 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:14:20.723

没有大碍。你会发现更多这样的错误。

简单的错误说您的数据库已经有 table name `admin_assert`。

您可以通过打开安装脚本并注释掉尝试重新创建表的代码来忽略这一点，然后再次刷新 magento。

一旦一切设置正确，不要忘记取消注释创建表脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T12:04:50.037

我在一个相当大的数据库中也遇到了这个问题，结果发现 PHPMyAdmin 无法同时导出整个东西，所以我的数据不完整。在我的情况下，解决方案是批量导出表而不是一次全部导出，然后以相同的方式导入它们。

**tl;dr** 确保您的数据库匹配

# android - Cordova php文件连接错误

> ID：12067924
> 
> 赞同：1
> 
> 时间：2012-08-22T07:07:16.967
> 
> 标签：android, cordova, android-emulator, cordova-2.0.0

当我运行我的应用程序时，我使用 php 文件从 phonegap 制作了简单的登录页面，那会出现错误。如何解决错误，这样的错误

1.  **找不到从方法 org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse 引用的类 'android.webkit.WebResourceResponse'**
2.  **TypeError：表达式“l.attr”[未定义]的结果不是函数。在文件：///android_asset/www/jquery.mobile-1.0a3.min.js:49**

我的日志猫

```
08-22 12:25:59.439: I/dalvikvm(302): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
    08-22 12:25:59.439: W/dalvikvm(302): VFY: unable to resolve direct method 3117: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    08-22 12:25:59.439: D/dalvikvm(302): VFY: replacing opcode 0x70 at 0x0001
    08-22 12:25:59.439: D/dalvikvm(302): VFY: dead code 0x0004-0059 in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    08-22 12:25:59.730: I/CordovaLog(302): config.xml missing, reverting to cordova.xml
    08-22 12:25:59.739: I/CordovaLog(302): Changing log level to DEBUG(3)
    08-22 12:25:59.739: I/CordovaLog(302): Found preference for useBrowserHistory=false
    08-22 12:25:59.739: D/CordovaLog(302): Found preference for useBrowserHistory=false
    08-22 12:25:59.790: E/dalvikvm(302): Could not find class 'android.webkit.WebResourceResponse', referenced from method org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse
    08-22 12:25:59.790: W/dalvikvm(302): VFY: unable to resolve new-instance 452 (Landroid/webkit/WebResourceResponse;) in Lorg/apache/cordova/CordovaWebViewClient;
    08-22 12:25:59.790: D/dalvikvm(302): VFY: replacing opcode 0x22 at 0x0046
    08-22 12:25:59.790: W/dalvikvm(302): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    08-22 12:25:59.790: D/dalvikvm(302): VFY: dead code 0x0048-004c in Lorg/apache/cordova/CordovaWebViewClient;.generateWebResourceResponse (Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    08-22 12:26:00.059: W/dalvikvm(302): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    08-22 12:26:00.069: W/dalvikvm(302): VFY: unable to find class referenced in signature (Landroid/webkit/WebResourceResponse;)
    08-22 12:26:00.069: I/dalvikvm(302): Could not find method android.webkit.WebViewClient.shouldInterceptRequest, referenced from method org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest
    08-22 12:26:00.080: W/dalvikvm(302): VFY: unable to resolve virtual method 3129: Landroid/webkit/WebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    08-22 12:26:00.080: D/dalvikvm(302): VFY: replacing opcode 0x6f at 0x0015
    08-22 12:26:00.080: D/dalvikvm(302): VFY: dead code 0x0018-0019 in Lorg/apache/cordova/CordovaWebViewClient;.shouldInterceptRequest (Landroid/webkit/WebView;Ljava/lang/String;)Landroid/webkit/WebResourceResponse;
    08-22 12:26:00.080: D/DroidGap(302): DroidGap.init()
    08-22 12:26:00.140: D/CordovaWebView(302): >>> loadUrl(file:///android_asset/www/index.html)
    08-22 12:26:00.140: D/PluginManager(302): init()
    08-22 12:26:00.149: I/PluginManager(302): Using plugins.xml instead of config.xml.  plugins.xml will eventually be deprecated
    08-22 12:26:00.341: D/CordovaWebView(302): >>> loadUrlNow()
    08-22 12:26:00.529: D/SoftKeyboardDetect(302): Ignore this event
    08-22 12:26:00.779: D/SoftKeyboardDetect(302): Ignore this event
    08-22 12:26:01.130: D/DroidGap(302): onMessage(onPageStarted,file:///android_asset/www/index.html)
    08-22 12:26:01.889: D/dalvikvm(302): GC_FOR_MALLOC freed 1963 objects / 156568 bytes in 412ms
    08-22 12:26:07.049: D/Cordova(302): onPageFinished(file:///android_asset/www/index.html)
    08-22 12:26:07.049: D/CordovaWebView(302): >>> loadUrlNow()
    08-22 12:26:07.049: D/DroidGap(302): onMessage(onNativeReady,null)
    08-22 12:26:07.049: D/DroidGap(302): onMessage(onPageFinished,file:///android_asset/www/index.html)
    08-22 12:26:07.330: I/Database(302): sqlite returned: error code = 14, msg = cannot open file at source line 25467
    08-22 12:26:07.719: D/DroidGap(302): onMessage(networkconnection,3g)
    08-22 12:26:07.799: D/DroidGap(302): onMessage(spinner,stop)
    08-22 12:26:09.129: D/DroidGap(302): onMessage(spinner,stop)
    08-22 12:26:14.079: D/dalvikvm(302): GC_FOR_MALLOC freed 2869 objects / 442888 bytes in 53ms
    08-22 12:26:25.599: D/CordovaLog(302): TypeError: Result of expression 'l.attr' [undefined] is not a function.
    08-22 12:26:25.599: D/CordovaLog(302): file:///android_asset/www/jquery.mobile-1.0a3.min.js: Line 49 : TypeError: Result of expression 'l.attr' [undefined] is not a function.
    08-22 12:26:25.599: E/Web Console(302): TypeError: Result of expression 'l.attr' [undefined] is not a function. at file:///android_asset/www/jquery.mobile-1.0a3.min.js:49
    08-22 12:26:25.620: D/DroidGap(302): onMessage(onPageStarted,file:///android_asset/www/index.html)
    08-22 12:26:30.729: D/Cordova(302): onPageFinished(file:///android_asset/www/index.html)
    08-22 12:26:30.729: D/CordovaWebView(302): >>> loadUrlNow()
    08-22 12:26:30.740: D/DroidGap(302): onMessage(onNativeReady,null)
    08-22 12:26:30.740: D/DroidGap(302): onMessage(onPageFinished,file:///android_asset/www/index.html)
    08-22 12:26:31.000: I/Database(302): sqlite returned: error code = 14, msg = cannot open file at source line 25467
    08-22 12:26:31.320: D/DroidGap(302): onMessage(spinner,stop) 
```

我的 html 文件是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login</title>
 <link rel="stylesheet" href="jquery.mobile-1.0a3.min.css" />
 <script type="text/javascript" src="jquery-1.5.min.js"></script>
 <script type="text/javascript" src="jquery.mobile-1.0a3.min.js"></script>
 <script type="text/javascript" src="cordova-2.0.0.js"></script>
 <script type="text/javascript" src="jquery-latest.js"></script>
 <script type="text/javascript">

    $(document).bind( "mobileinit",function() {

        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;

        $('#loginForm').submit(function() {
            $('#output').html('Connecting....');
            var postTo = 'http://xemesolutions.com/kirit/login.php';

            $.post(postTo,
            {
                username: $('[name=username]').val() , 
                password: $('[name=password]').val()
            },

            function(data) {
                if(data.message) {
                    $('#output').html(data.message);
                } else {
                    $('#output').html('Could not connect');
                }
            }
            ,'json');

        return false;
    });
 });

</script>

</head>
<body>

<div data-role="page" id="foo">

 <div data-role="header">
     <h1>Login</h1>
 </div>

 <div data-role="content">

 <p id="output"></p>
 <p>
 <form method="post" id="loginForm">
 name: <input type="text" name="username"><br />
 Password: <input type="password" name="password"><br />
 <input type="submit" value="Login">
 <a href="http://api.jquery.com/load/" >Page</a>
 </form>
 </p>
 </div>

 <div data-role="footer">
 <h4>Footer</h4>
 </div>
</div>

</body>
</html> 
```

我的 php 文件是

```
<?php

if(isset($_POST['username']) && isset($_POST['password'])){

 // do logic for logining in (usually query your db)
 if ($_POST['username'] == 'test' && $_POST['password'] == 'test') {
 $data['success'] = true;
 $data['message'] = 'Login succesful';
 } else {
 $data['success'] = false;
 $data['message'] = 'Login failed';
 }
 // return json
 echo json_encode($data);
}
?> 
```

和我的cordova.xml

```
<access origin="http://xemesolutions.com/kirit/*"/> 
```

如何解决我想尝试很多次但我没有解决。请帮我。我该怎么办？

# authorization - 生成授权过程是做什么的，什么是配置文件？

> ID：12067926
> 
> 赞同：1
> 
> 时间：2012-08-22T07:07:33.383
> 
> 标签：authorization, abap, sap-basis

在尝试理解 SAP 中的授权概念时，我遇到了“生成”授权并生成配置文件编号的阶段。

现在我有以下问题：

Q1。“生成”授权是什么意思。按钮实际上做了什么新的事情，因为我们已经为一个类分配了一个授权对象。我认为这只应该用于将此授权分配给用户的目的？

Q2。什么是个人资料？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:59:48.063

“配置文件”是内核读取以实际评估权限的技术内容。在 The Good (?) Old Days [TM] 中，只有手动维护的配置文件。角色/活动组后来建立在此之上，添加了功能和更多设置。他们因此从那里组装的设置生成配置文件。这允许从手动配置文件逐渐过渡到生成的配置文件/角色，而不会丢弃已知可以工作的内核和用户代码。您仍然可以在技术名称中看到这一点：PRGN = 配置文件生成器...

# asp.net - 最佳方法从静态与实例方法返回新对象/实例

> ID：12067928
> 
> 赞同：0
> 
> 时间：2012-08-22T07:07:50.913
> 
> 标签：asp.net, methods, static, instance

我们有一个 Basewebpage 类，它有许多常用功能，如填充下拉列表、格式化、返回格式化数据表等。

什么是好的方法。

```
Public Class BaseWebPage
{
 ...

    public static DataTable Static_GetPersonDataTable()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("Age");

        return dt;
    }
  ...
    public DataTable NonStatic_GetPersonDataTable()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("Age");

        return dt;
    }
} 
```

这就是两者都可以调用的方式

```
DataTable dt1 = BaseWebPage.Static_GetPersonDataTable();  // calling static method
...
BaseWebPage pageBase = new BaseWebPage();
DataTable dt2 = pageBase.NonStatic_GetPersonDataTable();  // calling non-static method 
```

上述场景中的几个问题

*   两种方法都会返回数据表的新实例还是静态方法总是返回相同的？
*   在重负载（许多请求）情况下，是否会有任何与线程相关的问题？
*   如果没有副作用，哪个比其他更好？为什么？

如果你能写一点描述性的东西，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:12:20.787

• 两种方法都会返回数据表的新实例还是静态方法总是返回相同的？

是的，他们将返回一个新实例。

•在重负载（许多请求）的情况下，这些中的任何一个是否会出现与线程相关的问题？

不，除非您在方法中使用共享状态。目前他们没有，但他们可能会。甚至实例方法也可以使用共享状态。这与静态无关（静态？）

• 如果没有副作用，哪一个比其他更可取？为什么？

这并不重要，但我会去实例方法。在某些时候，您可能想要添加测试，您可以提取接口中的方法并模拟对象。

加分项：DataTables 糟透了！避免使用它们并使用类/对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:32:56.223

就我个人而言，我会让你所有的页面成为这个 baseWebPage 的子类。
您可以安全地访问所有方法，而无需实例化 BaseWebPage 类，甚至无需输入名称（当变为静态时）。

代码如下所示：
所有网页（假设您使用的是 webforms 而不是 mvc）：

```
public partial class Index : BaseWebPage{
    protected void Page_Load(object sender, EventArgs e){
        var data = GetPersonDataTable();
    }
} 
```

您的 baseWebPage ：

```
Public Class BaseWebPage : System.Web.UI.Page{
    protected DataTable GetPersonDataTable(){
        //Do your thing
    }
} 
```

关于安全性和行为：这取决于您如何在这些方法中编写代码。
但是在静态和非静态中，您可以安全地让多线程返回 DataTable 的多个不同实例。
但是，如果有意，您也可以每次都返回相同的实例。这取决于您使用的代码和资源。

# php - 在 Codeigniter 中重定向后会话丢失

> ID：12067929
> 
> 赞同：21
> 
> 时间：2012-08-22T07:07:52.783
> 
> 标签：php, codeigniter, session, redirect

我正在使用 codeigniter 作为框架。

首先，我使用，`localhost`但是当我更改为我的 IP 地址时，登录功能不再起作用。我发现重定向到另一个控制器后会话丢失了。

这是结果`print_r($this->session->all_userdata());`

```
[session_id] => 7b00fa0f8790f48d24446f9eb4e6aab2 
[ip_address] => 10.42.68.71 
[user_agent] => Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1
[last_activity] => 1285962398 
[user_data] => 
```

如您所见，它没有传递任何数据，`user_data`但在我测试时它是在重定向之前设置的。

我将控制器分为两个，第一个是用户 - >登录功能的处理程序，另一个是规划器，我从用户控制器重定向的链接的处理程序。

`users.php`（第一个控制器）：

```
$this->load->model('users_model');
$this->load->model('mymodel');
$this->load->database();

$email = $this->input->post('email');

$pass = $this->input->post('password');

$type = $this->input->post('type');

// Authenticate the user
$userdata = $this->users_model->auth_user($email,$pass,$type);

if($userdata)
{
    $data = array('FIRSTNAME' => $userdata->FIRSTNAME, 
                  'LASTNAME' => $userdata->LASTNAME, 
                  'EMAIL' => $userdata->EMAIL,
                  'LOGIN' =>TRUE, 'TYPE' => $type);
    $this->session->set_userdata($data);
    redirect('planner/view_system','refresh');
} 
```

`planner.php`（第二个控制器）：

```
function __construct() {
    parent::__construct();

    if ( ! ($this->session->userdata('LOGIN')))
    { 
        print_r (var_dump($this->session->userdata('FIRSTNAME')));
        print_r($this->session->all_userdata());
    }
    $this->load->helper(array('form','html','url')); 
```

这是我的配置

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = FALSE;
$config['sess_time_to_update']  = 300; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-08T13:22:14.480

我有完全相同的问题，这就是我所做的。首先，转到文件`system/libraries/Session/Session.php`. `session_start();`在线评论`140`。上`function _configure`，在下面注释几行`// Security is king`

```
//      ini_set('session.use_trans_sid', 0);
//      ini_set('session.use_strict_mode', 1);
//      ini_set('session.use_cookies', 1);
//      ini_set('session.use_only_cookies', 1);
//      ini_set('session.hash_function', 1);
//      ini_set('session.hash_bits_per_character', 4); 
```

其次，转到`index.php`根项目上的文件。放，`session_start();`下面`<?php`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:56:46.570

首先，您必须确保会话项中没有特殊字符，例如“\n”或“\v”。这些字符可能会导致您的字符串在中间中断。尝试[trim()](http://www.php.net/trim)寻求帮助。

如果这没有用，可能是一些编码问题。尝试在设置会话项之前对其进行加密，并在需要使用时对其进行解密。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T13:25:26.590

我通过将 $config['cookie_domain'] 配置为 localhost 解决了这个问题

```
$config['cookie_domain']    = "localhost"; 
```

我最初将该变量设置为完全限定的域名，例如 www.exampledomain.com，但同时我使用的是本地服务器。

运行脚本的域应与 $config['cookie_domain] 下设置的域相同，以避免 codeigniter 会话类出现意外失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-04T19:46:50.650

我也有类似的问题，结果这个问题很常见......

我的问题的根源是包含字符“_”的名称

例如，之前是

```
$this->session->set_flashdata('message_success', 'some message'); 
```

之后成为

```
$this->session->set_flashdata('messagesuccess', 'some message'); 
```

我的问题解决了感谢这个资源[http://biostall.com/losing-codeigniter-sessions/](http://biostall.com/losing-codeigniter-sessions/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-13T13:17:40.707

我遇到了同样的问题，在我的情况下，会话文件夹的权限不足。请检查 php.ini`session.save_path`和 config.php`$config['sess_save_path']`并确保文件夹的权限设置为 777 或 757。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-21T09:10:59.040

就我而言，经过一些测试（在 localhost 中使用 https 和 http）后，该问题出现了错误，并且没有正确设置 $config['cookie_secure']，因此您可以尝试在 config.php 中进行更改：

```
$config['cookie_secure']    = FALSE; // if is not under https, or true if you use https 
```

干杯!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-25T19:26:43.497

根据我的经验，问题可能是：

1.  您的一个（或多个）文件不是“带有 BOM 的 UTF-8”（如果您的网站不只是英文并且像我的一样使用 UTF-8 作为编码）。您必须将所有文件更改为“带有 BOM 的 UTF-8”。记事本++会有所帮助。
2.  php标签之前或之后有一些字符？>（最好去掉？>）。请确保没有任何字符包括空格。
3.  当调用 localhost/xxxxxx 作为地址时，将其更改为 127.0.0.1/xxxxxx 或您的 LAN IP
4.  我总是将会话存储在数据库中而不是文件中（更易于调试）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-06T07:22:06.007

当我遇到这个问题时，我一开始很震惊。这发生在我身上是因为我的会话数据有一个@符号。

解决方案是使用 base64_encode 简单地对数据进行编码。

例如：

```
$Data = urlencode(  base64_encode($Email) );
$this->session->set_userdata('Data', $Data); 
```

要重用它，只需执行以下操作：

```
$Data = base64_decode( urldecode( $this->session->userdata('Data') ) ); 
```

希望这可以帮助。

**新发现：此问题在***某些*浏览器和设备上仍然存在。因此，这不再是真正的解决方案。例如，它适用于三星 Android、MicroMAX And​​roid，但不适用于华为 Android。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-25T11:55:13.753

请检查您的链接并确保它们写得正确。编写绝对 URL 时，请确保添加“www”部分。这就是我的问题。我希望这可以帮助别人。

* * *

好：header("位置：[http](http://www.yourdomain.com/controller/page) ://www.yourdomain.com/controller/page ");

* * *

坏（中断你的会话）： header("Location: [http://yourdomain.com/controller/page](http://yourdomain.com/controller/page) ");

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-29T17:58:03.717

您应该在您的**autoload.php**文件中添加一件事。

> `$autoload['libraries'] = array('database','session');`

*这将解决您的会话重定向问题*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-08T11:25:28.910

跟我一样的问题。

请检查您是否在控制器中加载了会话库。

```
$this->load->library('session'); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-20T14:01:13.470

为时已晚，但幸运的是我遇到了同样的问题，我通过改变如下配置来解决这个问题。

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = TRUE; // change this
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE; // change this
$config['sess_match_useragent'] = TRUE; // change this
$config['sess_time_to_update']  = 300; 
```

希望这对你也有用。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-06-16T08:38:52.810

在 Codeigniter 中重定向后会话丢失

我也发现了问题。

你还是遇到了问题。请注意 codeigniter 的会话方向。当您的浏览器访问您的网站并刷新几次时，codeigniter 在 codeigniter 的 session 方向下生成了更多的 session 文件。

您在控制器文件上重新加载库会话。

请参考以下 config.php 设置。

[![在此处输入图像描述](../Images/3dc8d6b85a81539bf0cda1df55be7a8a.png)](https://i.stack.imgur.com/hwtjf.jpg)

当您更改about设置时，请删除或清除浏览器的所有离线数据和codeigniter的所有会话文件。然后你试着再做一次。这可能是修复问题。

如果您仍然无法修复问题。您可以再次从 codeigniter.org 下载 codeigniter 包，然后将包解压用于测试环境。

# sql-server - 从 SQL Server 存储过程中获取最后一个表

> ID：12067934
> 
> 赞同：2
> 
> 时间：2012-08-22T07:08:03.033
> 
> 标签：sql-server

我有一个存储过程 SP1，它使用 SELECT 语句返回两个表 T1 和 T2。我想在另一个存储过程 SP2 中对 T2 执行一些操作。有人可以指导我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:48:50.867

**选项1**

更改 SP1 以将 T2 保存到表中，此外还使用 SELECT 将其返回。然后将该表用作 SP2 的输入。

**选项 2**

如果您无法更改 SP1，则可以在表中捕获存储过程的输出。查看 StackOverflow 上的这个问题，了解如何使用 OPENROWSET 或提前定义临时表：[How to SELECT * INTO [temp table] FROM [stored procedure]](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)。

如果 T1 和 T2 的定义不同，此选项*将不起作用。*如果它们具有相同的定义，您可以将两个结果集导入到**一个**表中，如下所示：

```
--create a temporary table with the same definition as T1 and T2
CREATE TABLE #temp (
    Col1 SOME DATATYPE,
    Col2 SOME DATATYPE
);

--fill your temp table with the result sets of T1 and T2
INSERT INTO #temp
EXEC [dbo].[SP1]; 
```

但是你必须处理 T1-plus-T2 表而不是 T2。

所以看来选项1是你最好的选择。

# java - 我收到错误 500 和空指针异常

> ID：12067937
> 
> 赞同：-3
> 
> 时间：2012-08-22T07:08:23.877
> 
> 标签：java, forms, jsp

我正在用java制作在线考试项目。我面临一个问题。

在开始时，我的数据库中有 15 个问题，我正在按顺序获取这些问题。问题是，如果我尝试所有答案，我会得到结果，否则我会得到`error 500`and `NullPointerException`。题目为多项选择题。每个问题都有四个选项。如果我不尝试所有问题，那么我会收到上述错误。

```
<%@page import="java.sql.*"%>

<%
    String st[] = new String[20];
    String ans[] = new String[20];
    int k=0;
    //int length = Integer.parseInt(request.getAttribute("length").toString());
    for (int i = 0; i < 15; i++)
    {
        int j = i + 1;
        st[i] = request.getParameter("radio" + j);
        System.out.println(st[i]);
    }
    Class.forName("oracle.jdbc.OracleDriver");
    Connection connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "root", "root");
    Statement stmt = connection.createStatement();
    ResultSet rs = stmt.executeQuery("Select ANS from ANSWERS order by ID");
    //String ans = "";
    int t;
    while (rs.next()) {

        ans[k] = rs.getString("ans");
        k++;
        System.out.println(ans[k]);
    }

    int count = 0;
    //String answers[] = ans.split(" ");
    for (int i = 0; i < 15; i++) {
        if (st[i].equals(ans[i])) {
            count++;
        }

    }
    out.println("Your " + count + " answers are correct");
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:35:20.493

我想说的是，您的答案根本没有随您的请求一起提交。如果问题的单选组没有选定的值，则该单选组不会成为您在表单提交后处理的 POST 请求的一部分。

这就是为什么你首先得到空指针异常的原因。我无法运行您上面的示例，但我假设错误发生在示例末尾的比较行中：

```
if (st[i].equals(ans[i])) { 
```

**更新**
为了快速修复，只需将评估值切换`st[i].equals(ans[i])`为`ans[i].equals(st[i])`. 这样，您始终可以对 null 进行等于并获得正确的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:36:28.637

在您的代码开始时，您正在初始化您`st[]`的`request.getParameter("radio" + j);`This 可能为空。根据[javadoc](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)`getParameter()`：_

> 将请求参数的值作为字符串返回，如果参数不存在，则返回 null。

因此，当您尝试执行以下代码时：

```
for (int i = 0; i < 15; i++) {
    if (st[i].equals(ans[i])) {
        count++;
    }
} 
```

`st[i]`事实上有一个机会`null`。这可能*是*`NullPointerException`您的代码中出现的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:40:08.383

您应该将您的逻辑包含在 try catch 中，并最终处理连接的 SQL 异常，rs （在单独的 try catch 块中）此外，尝试查看堆栈跟踪，关于哪一行给出空指针异常

# vtk - VTK 智能指针 New()

> ID：12067941
> 
> 赞同：2
> 
> 时间：2012-08-22T07:08:36.410
> 
> 标签：vtk

我正在使用 VTK 进行可视化，我的代码中充满了他们的智能指针，例如：

```
vtkSmartPointer<vtkPolyDataMapper> mapper = vtkSmartPointer<vtkPolyDataMapper>::New();
vtkSmartPointer<vtkRenderer> renderer = vtkSmartPointer<vtkRenderer>::New(); 
```

我想知道`New()`以后是否不应该遵循`Delete()`. 或者VTK会“自动”摧毁一切。多次使用`Delete()`我的代码崩溃。所以，我想知道我是否应该首先使用它，后面是什么`New()`，共享指针或类似的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T07:33:07.670

vtkSmartPointer 将在超出范围时“自动”销毁对象。Delete() 方法在它的 dtor 中被调用。

如果没有 vtkSmartPointer，您需要自己处理内存管理问题并调用 Delete()，如下所示

```
vtkObject* MyObject = vtkObject::New();
MyObject->Delete();

vtkSmartPointer<vtkObject> MyObject = vtkSmartPointer<vtkObject>::New(); 
```

请参阅 wiki 页面：[http ://www.vtk.org/Wiki/VTK/Tutorials/SmartPointers](http://www.vtk.org/Wiki/VTK/Tutorials/SmartPointers)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-01T00:00:34.237

另一种选择

```
vtkSmartPointer<vtkObject> MyObject = vtkSmartPointer<vtkObject>::New(); 
```

是

```
vtkNew<vtkObject> MyObject; 
```

请注意，当将 MyObject 传递给采用 vtkObject* 的函数/方法时，您必须使用 MyObject.GetPointer() 例如

```
foo->SetObject(MyObject.GetPointer()); 
```

# c# - 在虚拟主机服务器上复制数据库 (*.mdf) 时的连接字符串

> ID：12067943
> 
> 赞同：1
> 
> 时间：2012-08-22T07:08:36.207
> 
> 标签：c#, asp.net, sql-server, database, deployment

我继续我[之前的问题](https://stackoverflow.com/questions/12057431/connection-string-for-remote-sql-server-2008-without-sql-management-studio/12057547)，因为答复导致了进一步的疑问/观点/担忧。我需要有关 Web 主机服务器上的连接字符串的帮助。

我在本地计算机中的连接字符串是：

> string connectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\data.mdf;Integrated Security=True;User Instance=True";

现在，我只是简单地使用了VS 2010的网站复制工具，整个网站被复制到了虚拟主机上，数据库在`domainName/httpdocs/Experiment/App_Data/data.mdf`

现在，我不知道虚拟主机服务器上完整的连接字符串是什么样子的。我学到的一些东西，在这些基础上，我想应该是：

> string connectionString = "数据源=IP_Address_Of_WebHostingServer;AttachDbFilename=|DataDirectory|\data.mdf;用户 ID=XXXX;密码=XXXX;用户实例=True";

是正确的（或完整的？）？另外，我不知道用户名或密码是什么？所以在本地计算机上，`Integrated Security=True`在 Windows 身份验证的帮助下进行。如何在远程 Web 主机上执行此操作？

在虚拟主机控制台中，我看到了创建数据库、创建数据库用户等功能，我可以在那里看到用户名和密码方面。如果这些是必需的，那么我如何将它与我刚刚复制的数据库连接起来？似乎那些是从头开始创建数据库的地方，而我已经上传/复制了 *.mdf （数据库）。

我被困在这个阶段，不知道如何进一步进行。我知道它是微不足道的，但超出了我的知识范围。请帮助我完成连接字符串。如何使数据库 (data.mdf) 文件可访问/可访问？

我遇到了一些告诉导入数据库等的文章（但在哪里/为什么？），但我不明白。当数据库在`App_Data`文件夹中时，为什么/我该怎么做？

我很困惑，请帮助。我将非常感谢逐步解决它的方法。谢谢。

**编辑（解决方案）**：

下面给出的解决方案是完美的。除此之外，这个网站/博客值得一试。-- [http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/asp-net-hosting-options-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/asp-net-hosting-options-cs)

如果您没有 SQL Management Studio，最好的安装方法如下： -- [http://blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing -sql-server-management-studio-2008-express-after-visual-studio-2010.aspx](http://blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing-sql-server-management-studio-2008-express-after-visual-studio-2010.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:53:14.587

**第 1 步 - 从 SQL Management Studio 创建数据库脚本**

您需要首先编写数据库架构和数据的脚本（不像听起来那么可怕 - 请按照此处的步骤操作[http://blog.sqlauthority.com/2011/05/07/sql-server-2008-2008-r2-创建脚本复制数据库模式和所有对象数据模式存储过程函数触发器表视图约束和所有其他数据库对象/](http://blog.sqlauthority.com/2011/05/07/sql-server-2008-2008-r2-create-script-to-copy-database-schema-and-all-the-objects-data-schema-stored-procedure-functions-triggers-tables-views-constraints-and-all-other-database-objects/)）。

**第 2 步 - 在 HostGator 创建您的数据库并导入您的数据库脚本**

在 HostGator 创建您的数据库并导入您的脚本文件（在此处遵循本指南[http://support.hostgator.com/articles/plesk/plesk-9/how-to-create-or-import-databases-plesk-9](http://support.hostgator.com/articles/plesk/plesk-9/how-to-create-or-import-databases-plesk-9)）。

**第 3 步 - 更新您的连接字符串并部署！**

您需要将连接字符串更新为类似这样（您需要添加您的详细信息）。

```
<add name=”CRMConnectionString” connectionString=”Data Source=Server IP;Initial Catalog=DBName;User ID=UserName;Password=Pwd;” providerName=”System.Data.SqlClient”/> 
```

这个连接字符串是从这里的资源中抄袭的[http://asoftwaredeveloper.wordpress.com/2012/01/06/hostgator-web-hosting-and-mssql-db-access/](http://asoftwaredeveloper.wordpress.com/2012/01/06/hostgator-web-hosting-and-mssql-db-access/)

然后发布您的网站并上传您的文件。值得注意的是，您在发布时不需要更新 App_Data 文件夹及其内容，因为您将指向他们服务器上的数据库，而不是您目录中的数据库。

# mysql - 如何验证 MYSQL 日期字段是否为 NULL/EMPTY？

> ID：12067944
> 
> 赞同：1
> 
> 时间：2012-08-22T07:08:40.007
> 
> 标签：mysql, validation, date, stored-procedures

我正在开发一个 MYSQL 存储过程，并且我需要验证一个日期字段，如下所示，

```
IF (dt_wedding_date<>'') THEN
     IF (int_days_to_wedding>0) THEN
      SET vc_wedding ='F';
    ELSE
      SET vc_wedding ='P';
    END IF;
  ELSE
    SET vc_wedding = 'NA';
  END IF; 
```

但是当**dt_wedding_date**为空时，它永远不会进入 ELSE 部分。我试过“is null”、“is not null”、“>”、<>、修剪函数，没有任何效果。

知道如何评估此日期字段的空值/空值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:28:11.107

试试isnull函数，我在本地mysql上试过

```
mysql> select * from data_test;
+----+------------+
| id | gmt_create |
+----+------------+
|  1 | NULL       |
+----+------------+
1 row in set (0.00 sec)

mysql> select id, isnull(gmt_create) from data_test;
+----+--------------------+
| id | isnull(gmt_create) |
+----+--------------------+
|  1 |                  1 |
+----+--------------------+
1 row in set (0.00 sec)

mysql> 
```

来自[w3c 参考](http://www.w3schools.com/sql/sql_isnull.asp)

> MySQL 确实有一个 ISNULL() 函数。但是，它的工作方式与 Microsoft 的 ISNULL() 函数有点不同。

# jquery - jqgrid中的冻结列不起作用

> ID：12067945
> 
> 赞同：2
> 
> 时间：2012-08-22T07:08:41.113
> 
> 标签：jquery, jqgrid

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Freeze.aspx.cs" Inherits="Freeze" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Untitled Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="Styles/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" />
    <link href="Styles/ui.jqgrid.css" rel="stylesheet" type="text/css" />

    <script src="Scripts/Lib/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script src="Scripts/Lib/jquery.jqGrid.min.js" type="text/javascript"></script>

    <script src="Scripts/Lib/jquery.jqGrid.src.js" type="text/javascript"></script>

    <script src="Scripts/Lib/grid.custom.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function() {

            var lastsel2;
            $("#sample").jqGrid({
                datatype: "local",
                height: 250,
                scroll: false,
                shrinkToFit: false,
                colNames: ['ID Number', 'Name', 'Stock', 'department', 'Notes', 'Service', 'Delivery', 'Result', 'Feedback', 'Total', 'Data', 'Views', 'Rows', 'Columns', 'Table'],
                colModel: [
           { name: 'id', index: 'id', width: 90, sorttype: "int", editable: true, frozen: true },
           { name: 'name', index: 'name', width: 150, editable: true,frozen: true, editoptions: { size: "20", maxlength: "30"} },
           { name: 'stock', index: 'stock', width: 60, editable: true,frozen: true, edittype: "select", editoptions: { value: "aw:Yes;bk:No"} },
           { name: 'dep', index: 'dep', width: 90, editable: true,frozen: true, edittype: "select", editoptions: { value: "a:km;b:bc;c:we;i:gg"} },
           { name: 'note', index: 'note', width: 200, sortable: false, editable: true, edittype: "textarea", editoptions: { rows: "2", cols: "10"} },
           { name: 'Service', index: 'Service', width: 90, sorttype: "int", editable: true },
           { name: 'Delivery', index: 'Delivery', width: 90, sorttype: "int", editable: true },
           { name: 'Result', index: 'Result', width: 90, sorttype: "int", editable: true },
           { name: 'Feedback', index: 'Feedback', width: 90, sorttype: "int", editable: true },
           { name: 'Total', index: 'Total', width: 90, sorttype: "int", editable: true },
           { name: 'Data', index: 'Data', width: 90, sorttype: "int", editable: true },
           { name: 'Views', index: 'Views', width: 90, sorttype: "int", editable: true },
           { name: 'Rows', index: 'Rows', width: 90, sorttype: "int", editable: true},
           { name: 'Columns', index: 'Columns', width: 90, sorttype: "int", editable: true },
           { name: 'Table', index: 'Table', width: 90, sorttype: "int", editable: true }
       ],

                caption: "sample table"
            });
            var mydata2 = [
        { id: "12345", name: "Desktop Computer", note: "note", stock: "Yes", dep: "km", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "23456", name: "Laptop", note: "Long text ", stock: "Yes", dep: "bc", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "34567", name: "LCD Monitor", note: "note3", stock: "Yes", dep: "we", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "45678", name: "Speakers", note: "note", stock: "No", dep: "gg", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "56789", name: "Laser Printer", note: "note2", stock: "Yes", dep: "km", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "67890", name: "Play Station", note: "note3", stock: "No", dep: "gg", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "76543", name: "Mobile Telephone", note: "note", stock: "Yes", dep: "we", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "87654", name: "Server", note: "note2", stock: "Yes", dep: "bc", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" },
        { id: "98765", name: "Matrix Printer", note: "note3", stock: "No", dep: "km", Service: "abc", Delivery: "ccv", Result: "bbc", Feedback: "yes", Total: "100", Data: "rre", Views: "dgx", Rows: "5", Columns: "8", Table: "13" }
        ];

            for (var i = 0; i < mydata2.length; i++) {

                jQuery("#sample").jqGrid('addRowData', mydata2[i].id, mydata2[i]);
            }
        });

        $("#sample").jqGrid('setFrozenColumns');
        $("#sample").trigger('reloadGrid', [{ current: true}]);
       </script>

</head>
<body>
    <form id="form1" runat="server">
    <table id="sample">
    </table>
    </form>
</body>
</html> 
```

这是我的代码。我正在使用 jquery version4.4.0 但该列仍然没有被冻结。请帮助我解决这个问题。我也尝试过调试代码。方法“setFrozencolumns”被调用，但即使列没有被冻结

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:01:56.883

试过这种方式，现在工作正常..

```
$("#sample").jqGrid("destroyFrozenColumns")
            .jqGrid("setColProp", "id", { frozen: true })
            .jqGrid("setFrozenColumns")
            .trigger("reloadGrid", [{ current: true}]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:46:42.303

要使用，您需要通过在 colModel 中`setFrozenColumns`设置来标记应冻结哪些列。`frozen:true`请在此处阅读更多内容：

*   [Frozen Columns - 设置和限制](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afrozencolumns)

**更新**

从 4.3.0 版开始，该`setFrozenColumns`方法在 jqGrid 中可用。您还应该确保您已检查[下载页面上](http://www.trirand.com/blog/?page_id=6)*基本*部分中的*自定义*模块（如果您使用的是未压缩分发，则为参考文件）。*`grid.custom.js`*

# java - Jetty 上的静态部署

> ID：12067954
> 
> 赞同：1
> 
> 时间：2012-08-22T07:09:24.330
> 
> 标签：java, web-applications, jetty, hotdeploy

如何配置 jetty 仅部署一个特定的 Web 应用程序，并禁用热部署（禁用监控 webapps 目录，禁用检查该单个应用程序的更改）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:01:01.670

我只会使用上下文提供程序，而只是禁用 webapp 提供程序。然后你没有扫描 webapps 目录，只是一个指向你的 webapp 的上下文文件。

编辑 start.ini 文件并确保 jetty-deploy.xml 和 jetty-contexts.xml 文件处于活动状态，并注释掉 jetty-webapps.xml 行。然后你只需要一个指向你的 webapp 的 contexts 目录中的文件。

更多关于上下文提供者的信息：

[http://wiki.eclipse.org/Jetty/Feature/ContextDeployer](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:45:50.407

如果我的问题是正确的，那么这意味着你想在你的应用程序中嵌入码头，而不是在码头中部署你的 web 应用程序。

如果是这种情况，请阅读以下内容：[http](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty) ://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty否则请告诉我您遇到的确切问题。

# c# - 无法使 EF Code First 与手动更改的数据库一起使用

> ID：12067955
> 
> 赞同：4
> 
> 时间：2012-08-22T07:09:38.790
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first

我已经向我的域模型类添加了两个新属性，并相应地向数据表添加了两个属性。然后我尝试启动我的 mvc Web 应用程序并得到

```
The model backing the 'EFDbContext' context has changed since the database was created.  
Consider using Code First Migrations to update the database  
(http://go.microsoft.com/fwlink/?LinkId=238269). 
```

阅读了以下帖子：

[MVC3 和代码优先迁移](https://stackoverflow.com/questions/10254613/mvc3-and-code-first-migrations)

[EF 4.3 自动迁移演练](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

我试图`Update-Database`通过*包管理器控制台*，但得到一个错误

```
Get-Package : Не удается найти параметр, соответствующий имени параметра "ProjectName".
C:\Work\MVC\packages\EntityFramework.5.0.0\tools\EntityFramework.psm1:611 знак:40
+     $package = Get-Package -ProjectName <<<<  $project.FullName | ?{ $_.Id -eq 'EntityFramework' }
+ CategoryInfo          : InvalidArgument: (:) [Get-Package], ParameterBindingException
+ FullyQualifiedErrorId : NamedParameterNotFound,NuGet.PowerShell.Commands.GetPackageCommand

The EntityFramework package is not installed on project 'Domain'. 
```

但是*Entityframework*安装在项目*Domain*上。我从引用中删除了它，删除了*package.config*并成功地重新安装了 EF。但`Update-Database`仍然返回相同的错误。`Update-Database -Config`也可以

我究竟做错了什么？

**编辑**

非常感谢 Ladislav Mrnka，我会尝试重新表述我的问题。就我手动更改数据表而言，我预计不会使用迁移。但是我现在如何使 EF 与手动编辑的域模型类和数据表一起工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T07:45:56.947

尝试将此添加到您的应用程序的启动中（您可以将其放入`App_Start`）：

```
Database.SetInitializer<EFDbContext>(null); 
```

它应该关闭与从 EF 处理数据库相关的所有逻辑。您现在将完全负责使您的数据库与您的模型保持同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T06:00:26.073

我遇到了同样的问题，这就是我解决问题的方法。

我使用 sql 命令删除了表 __MigrationHistory 并再次运行 update-database -verbose。

显然这个自动创建的表有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T02:56:42.053

答案 2 正是所需要的。虽然当我到达 App_Start 时，我意识到有 4 个配置文件并且没有看到它适合任何一个。相反，我将其添加到我的 EF 数据库上下文中

```
namespace JobTrack.Concrete
{
    public class EFDbContext : DbContext 
    {
        //Set the entity framework database context to the connection name
        //in the Webconfig file for our SQL Server data source QSJTDB1
        public EFDbContext() : base("name=EFDbConnection")
        {            
        }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //Remove the tight dependency on the entity framework that 
        //wants to take control of the database. EF by nature wants
        //to drive the database so that the database changes conform
        //to the model changes in the application. This will remove the
        //control from the EF and leave the changes to the database admin
        //side so that it continues to be in sync with the model.
        Database.SetInitializer<EFDbContext>(null);

        //Remove the default pluaralization of model names
        //This will allow us to work with database table names that are singular
        base.OnModelCreating(modelBuilder);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();            
    }

    //Allows for multiple entries of the class State to be used with 
    //interface objects such as IQueryTables for the State database table  
    public DbSet<State> State { get; set; } 

} 
```

}

# python - Python - 确保字符串转换为正确的浮点数

> ID：12067959
> 
> 赞同：1
> 
> 时间：2012-08-22T07:10:00.447
> 
> 标签：python, regex

我有可能的价格字符串，例如：

```
20.99, 20, 20.12 
```

有时，用户可能会错误地将字符串发送给我，如下所示：

```
20.99.0, 20.0.0 
```

这些应转换回：

```
20.99, 20 
```

所以基本上从 2nd 中删除任何东西。如果有的话。

*需要明确的是，他们会一个人，一次一个，所以一串只有一个价格*

有什么好的单线创意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T07:14:56.403

对于单线，您可以使用`.split()`and `.join()`：

```
>>> '.'.join('20.99.0'.split('.')[:2])
'20.99'
>>> '.'.join('20.99.1231.23'.split('.')[:2])
'20.99'
>>> '.'.join('20.99'.split('.')[:2])
'20.99'
>>> '.'.join('20'.split('.')[:2])
'20' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T07:16:16.727

你可以做这样的事情

```
>>> s = '20.99.0, 20.0.0'
>>> s.split(',')
['20.99.0', ' 20.0.0']
>>> map(lambda x: x[:x.find('.',x.find('.')+1)], s.split(','))
['20.99', ' 20.0'] 
```

看find的内在表达。我正在寻找第一个“。” 并以 1 递增，然后找到下一个 '.' 并将所有内容留在字符串切片操作中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T07:17:07.833

*编辑：*请注意，此解决方案不会丢弃第二个小数点后的所有内容，而是仅丢弃第二个点并保留其他数字。如果您想丢弃所有数字，您可以使用例如@Blender 的解决方案

如果每行有两条指令并计数，则它只有资格作为单行`;`，但这是我想出的：

```
>>> x = "20.99.1234"
>>> s = x.split("."); x = s[0] + "." +  "".join(s[1:])
>>> x
20.991234 
```

不过，它应该比多次扫描字符串要快一些。为了性能成本，您可以这样做：

```
>>> x = x.split(".")[0] + "." +  "".join(x.split(".")[1:]) 
```

对于整个列表：

```
>>> def numify(x):
>>>     s = x.split(".")
>>>     return float( s[0] + "." + "".join(s[1:]))
>>> x = ["123.4.56", "12.34", "12345.6.7.8.9"]
>>> [ numify(f) for f in x ] 
[123.456, 12.34, 12345.6789] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T07:21:36.673

如果您正在寻找基于正则表达式的解决方案，并且您的预期行为是在第二个之后丢弃所有`.(decimal)`内容

```
>>> st = "20.99.123"
>>> string_decimal = re.findall(r'\d+\.\d+',st)
>>> float(''.join(string_decimal))
20.99 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T07:24:39.407

```
>>> s = '20.99, 20, 20.99.23'
>>> ','.join(x if x.count('.') in [1,0] else x[:x.rfind('.')] for x in s.split(','))
'20.99, 20, 20.99' 
```

# openlaszlo - openlaszlo 是否具有数据 uri 之类的功能？

> ID：12067965
> 
> 赞同：1
> 
> 时间：2012-08-22T07:10:26.433
> 
> 标签：openlaszlo, data-uri, lzx

我想知道 open laszlo 是否具有数据 uri 功能。下面的示例将显示一个红点，其中红点是图像，base64 数据被传递给它。有可能做这样的事情吗？

示例如下

```
<div>
    <p>Taken from wikpedia</p>
    <img src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
    9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:36:46.003

您指的是[RFC 2397](https://www.rfc-editor.org/rfc/rfc2397)中指定的数据 URL 。OpenLaszlo 不支持该功能，无论如何它只与 DHTML 应用程序相关。对于 SWF 运行时，可以将图像作为静态资源编译成 SWF 文件，从而增加文件大小并减少发送到服务器所需的请求数。

内联图像也有大小限制。根据上述 RFC，浏览器只需要支持长度不超过 1,024 字节的 URL。然而，浏览器在他们将接受的内容方面更加自由。Opera 将数据 URL 限制为大约 4,100 个字符。Firefox 支持最大 100K 的数据 URL，这意味着您应该只将该技术用于中小型图像。

尽管 OpenLaszlo 不支持数据 URL，但有一个类似的 - 在我看来 - 更强大的选项可用。为您添加为静态资源的图像自动生成[CSS 精灵](http://en.wikipedia.org/wiki/CSS_Sprites#Sprites_by_CSS)。当您选择“使用主精灵”编译选项时，OpenLaszlo 编译器将创建一个包含所有这些静态资源的 PNG 精灵映射。

![OpenLaszlo DHTML 运行时“使用主精灵”编译选项](../Images/13a1393b5b601503c90538a8ce923b23.png)

这是 OpenLaszlo 天气小部件的主精灵 PNG 的示例。浏览器不必发出多个请求来下载单个图像，而只需发出一个请求。

![OpenLaszlo 天气演示由 OpenLaszlo 编译器生成的 CSS 精灵](../Images/22b4e36f8d9eb4339a6690d1baa8671f.png)

# java - 为什么编译器不能在编译时检测到这个关于 Serializable 声明的错误？

> ID：12067967
> 
> 赞同：3
> 
> 时间：2012-08-22T07:10:29.850
> 
> 标签：java, exception, serialization, compiler-construction

[从Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口的 JavaDoc 的第二段：

> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。仅当它扩展的类具有可访问的无参数构造函数来初始化类的状态时，子类型才可以承担此责任。如果不是这种情况，则声明类 Serializable 是错误的。将在运行时检测到错误。

为什么在编译时不能检测到这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:18:18.613

编译器旨在根据语言的要求检查代码，而不是单独的库。可以更改语言以添加执行额外检查的关键字或注释，并且库可以在理论上使用这些。

如果编译器能够以加载注释（目前是纯数据）的方式运行特定于库的检查代码，这将是有用的，这样可以在编译时执行额外的检查，而无需知道任何单个库的行为。

# informatica-powercenter - 在 Informatica Designer 中处理删除后插入

> ID：12067968
> 
> 赞同：1
> 
> 时间：2012-08-22T07:10:39.133
> 
> 标签：informatica-powercenter, informatica

我正在使用 Informatica PowerCenter Designer 8.1.1

我有一个包含三列的源表，它们是

```
PORT_ID
ISSUE_ID
MKT_VAL 
```

我需要将源表中的数据同步到包含不同数据库上相同三个表的目标表。

**PORT_ID**和**ISSUE_ID**之间存在 1:n 的关系

 **在执行此数据同步时，我必须执行 DELETE，然后执行 INSERT，原因是映射到 PORT_ID 的 ISSUE_ID 的数量可能会发生变化。假设最初，Source 和 Target 中的数据是这样的：

```
PORT_ID    ISSUE_ID
1          A
1          B
1          C 
```

源中的数据更改为：

```
PORT_ID    ISSUE_ID
1          A
1          B
1          D 
```

因此，在同步期间，我必须首先删除映射到 PORT_ID = 1 的所有行，然后插入传入记录。

我无法弄清楚如何在地图设计器中完成这项工作。有人可以给我一些意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:39:08.903

最常见的方法是使用预查询。如果 port_id 和 issue_id 在表中是唯一的，您可以使用....

```
delete from tgt_table
where (port_id, issue_id)
  not in (select port_id, issue_id
            from src_table
         );
commit; 
```

第二种方式：

如果可以将这两列添加为映射中的键，那么您可以“检查”将目标行视为“插入、更新、删除”（所有三个）以确保目标数据与源数据相同。但是，在大多数情况下，业务规则比这更复杂，因此很少使用此功能。

另一种常见的实现是基于对目标表的查找来“标记要删除的行”。

```
 Source -> Lookup (target_table) -> 
   exp (flag to see if the value exists) -> 
   mark for delete ->
   Delete using update_strategy_transformation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:18:35.303

编写一个简单的存储过程，它执行以下操作：

1) Delete statement (Given by Rajesh) (delete from tgt_table where (port_id, issue_id) not in (select port_id, issue_id from src_table ); commit;)

2) 插入语句

```
Insert into tgt_table where not in src_table
 commit; 
```

3）在映射中使用dummy作为源和目标，并使用STORED_PROCEDURE_TRANSFORMATION调用存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-30T01:41:42.717

我认为我们不需要在这里进行动态查找，因为要求在源中没有重复..

为什么不使用更新策略而不是删除和插入进行定期查找和更新记录？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T09:19:53.607

您可以在源表上创建动态查找。

您可以做些什么来创建动态查找，

> -> 转到查找属性，
> 
> -> 检查动态查找缓存框
> 
> -> 然后检查插入其他更新框。

一旦你这样做了，一个新的端口 NewLookupRow 就会出现在端口选项卡中。您可以使用此端口检查记录是插入还是更新具有以下相应值

> 0 没有变化
> 
> 1是插入
> 
> 2是更新

现在您可以相应地更新目标。

希望这可以帮助..

干杯。**

# jsf - JSF中按钮单击的两个连续事件

> ID：12067970
> 
> 赞同：0
> 
> 时间：2012-08-22T07:11:00.367
> 
> 标签：jsf, jstl

我必须对按钮单击执行两个操作。

1.  在 bean 中调用一个方法，该方法将返回一个 url，并将其设置在某个变量中。

2.  之后，我必须在另一个选项卡中打开该 url。我正在使用 CommandButton 的 action 属性，它正确设置了 URL 值，但是如何在新选项卡中以 pdf 格式打开该 URL。即“pdf的URL应该在新标签中打开”

代码示例如下：

```
<div class="form-options">
    <h:commandButton value="Download Report" styleClass="btn btn-primary btn-icon buttonCustom" actionListener="#{reportBean.GenerateReport}">
    </h:commandButton>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:29:55.647

使用 commandLink 而不是 commandButton.. 使用 commandLink 时，您需要为目标属性提供值作为新窗口。

```
<h:commandLink target="new window"> 
```

其余所有代码将根据您的要求。由于您的报告所在的 URL 已经存在于其中一个变量中，因此您可以使用 commandLink 中 bean 中的此变量来提供 URL。

也可以使用 iframe。它通常用于在同一页面上显示报告...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:29:59.420

希望我理解你的正确。这对我有用：

1.  在 commandButton 的 actionListener-attribute 中提供生成报告的方法和 URL（根据您的示例代码，您已经做了什么）。
2.  在 commandButton 的 action-attribute 中提供返回 URL 的方法（它将在 actionListener-method 之后调用）。
3.  要打开新选项卡，请添加`target="_blank`父级`<h:form>`（取自[此问题答案](https://stackoverflow.com/questions/11611296/open-new-window-using-hcommandbutton)）

XHTML 代码：

```
<h:form target="_blank">
    <h:commandButton value="Show Report" 
                     actionListener="#{reportBean.generateReport}"
                     action="#{reportBean.getUrl}" />
</h:form> 
```

由于这种方法适用`target="_blank"`于所有非 ajax 调用，因此这是使用 Javascript 的另一种方法：

```
<h:form>
    <h:commandButton value="Show Report" 
                     actionListener="#{reportBean.generateReport}"
                     action="#{reportBean.getUrl}" 
                     onclick="this.form.target='_blank'"/>
</h:form> 
```

Java代码：

```
public void generateReport(final ActionEvent evt) {
    // ... generating report and setting url-variable
}

public String getUrl() {
    return url;
} 
```

如果您必须转发到外部链接，请参阅[此问题](https://stackoverflow.com/questions/7159358/hcommandbutton-how-to-redirect-to-external-sitejsf-2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:39:29.387

据我了解，您的问题不在于将操作结果重定向到新选项卡，而是您想要显示报告（如果我的猜测是正确的，您正在使用 JasperReport 并希望以 PDF 格式显示它）。为此，您必须将文件下载到客户端计算机，然后让客户端上的默认编辑器/程序处理该文件。

关于文件下载我不会详述，BalusC 提供了关于这个问题的很好的信息：

*   [如何在 JSF 支持 bean 中流式传输文件下载？](https://stackoverflow.com/q/9391838/1065197)
*   [如何使用 JSF 2.0 下载存储在数据库中的文件](https://stackoverflow.com/q/5498391/1065197)

在浏览器中显示 PDF（或任何其他）文件的相关部分是响应的 ContentType。这将告诉浏览器文件必须如何受到威胁。一些内容类型值

*   PDF：申请/pdf
*   Excel：应用程序/vnd.ms-excel
*   Microsoft Word：应用程序/ms-word
*   更多：[网络媒体类型](http://en.wikipedia.org/wiki/MIME_type)

如果我错了并且您不想显示（下载）文件并且需要在新窗口中打开文件，您有两种方法（恢复@JanisK。和@AngelsandDemons 的答案）：

*   将表单的目标设置为“_blank”，但这样**所有**执行的操作都将打开一个新的选项卡/窗口。

    ```
    <h:form target="_blank">
        <h:commandButton ... />
    </h:form> 
    ```

*   使用 commandLink 而不是 commandButton，您可以在其中仅为此链接请求设置目标。

    ```
    <h:form>
        <h:commandLink target="_blank" ... />
    </h:form> 
    ```

# mysql - 根据字段名称插入 CSV 文件

> ID：12067972
> 
> 赞同：1
> 
> 时间：2012-08-22T07:11:01.960
> 
> 标签：mysql, csv, ftp

现在正在使用下面的代码通过 FTP 将 CSV 文件上传到 MYSQL 数据库。它工作正常。CSV 列有一个字段名称“状态”。它有两个值 A 和 D。但我想仅基于字段“状态”A 插入特定行。我如何插入这个？

```
 LOAD DATA LOCAL INFILE '/root/782012_10.csv'
 INTO TABLE tbl_dndno
 FIELDS TERMINATED BY ',' ENCLOSED BY '"'
 LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:58:56.140

您可以将文件加载到临时表中，然后使用选择所需行的查询从临时表中插入主表。

# java - Android在其他类的数组上获取特定值

> ID：12067980
> 
> 赞同：1
> 
> 时间：2012-08-22T07:11:29.620
> 
> 标签：java, android

我的 Activity 上有一个数组，其中包含在公共类 ImageAdapter 扩展 BaseAdapter 中声明的 R.drawables 图像。所以它由

```
private   Integer[] imageIDs = {
            R.drawable.medal_my_first_perxtamp_gray,
            R.drawable.medal_you_complete_me_gray,
            R.drawable.medal_the_gift_of_sharing_gray,
            R.drawable.medal_gimme_5_gray,
            R.drawable.medal_a_cup_of_coffee_gray,
            R.drawable.medal_seven_up_gray,
            R.drawable.medal__gray,
            R.drawable.medal_midnight_madness_gray,
            R.drawable.medal_loyalista_gray,
            R.drawable.medal_15_30_gray,
            R.drawable.medal_kmh_gray,
            R.drawable.medal_champion_gray
            }; 
```

现在在扩展我的活动的类上，我如何调用该数组并获取特定值？对不起一个简单的问题，但我是这个 Android 开发的新手

**编辑：**

我忘了添加这个，一个声明来获取该数组的长度，该数组也存储在 ImageAdapter 类中

```
 public int getCount() {
        return imageIDs.length;
    } 
```

并为getter添加了这段代码

```
public  Integer[] getImageIDs()
    {
        return this.imageIDs;
    } 
```

*先生* ，这是我试图在我的其他扩展活动的类上创建的代码

```
 GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {   
             //Integer[] imageIDs = this.getImageIDs();
            // clicked picture here
            Integer[] imageIDs = this.getImageIDs();
            //Toast.makeText(getBaseContext(),"pic" + (position + 1) + " selected",Toast.LENGTH_SHORT).show();
            //Integer[] imageIDs = ImageAdapter.this.getImageIDs();
            //for (Integer imageId : ImageAdapter.getImageIDs()){
                //  System.out.println(imageId );
                //}
        }
    }); 
```

看到我可以得到这个职位，但我不想在 if else [Tutorial Here](https://stackoverflow.com/questions/10769989/how-do-i-get-the-selected-item-from-a-gridview-with-imageadapter-android)中使用那些教程，因为我认为 if else 会很长。我在想的是，既然我有一个数组，为什么我不能用它来得到我正在寻找的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:14:28.920

您将有两个选择，要么是面向对象的方式，要么创建一个带有 // 访问修饰符的 getter，`public`否则，只需声明数组//`protected`而不是私有的。`default``public``protected``default`

这应该允许您访问扩展类中的数组。如果您只想能够访问扩展您的类的类中的数组，只需将数组或 getter 方法声明为`protected`.

所以，你可以这样做：

```
public ActivityClass
{
    private Integer[] imageIDs = ...;

    protected Integer[] getImageIDs()
    {
        return this.imageIDs;
    } 
} 
```

然后在你的扩展类中：

```
public SomeOtherClass extends ActivityClass
{
    ...    
    Integer[] imageIDs = this.getImageIDs();
    ...
} 
```

看到这个后：

```
GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {   
             //Integer[] imageIDs = this.getImageIDs();
            // clicked picture here
            Integer[] imageIDs = this.getImageIDs();
            //Toast.makeText(getBaseContext(),"pic" + (position + 1) + " selected",Toast.LENGTH_SHORT).show();
            //Integer[] imageIDs = ImageAdapter.this.getImageIDs();
            //for (Integer imageId : ImageAdapter.getImageIDs()){
                //  System.out.println(imageId );
                //}
        }
    }); 
```

问题是这段代码：

```
gridView.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, 
            View v, int position, long id) 
            {   
                 //Integer[] imageIDs = this.getImageIDs();
                // clicked picture here
                Integer[] imageIDs = this.getImageIDs();
                //Toast.makeText(getBaseContext(),"pic" + (position + 1) + " selected",Toast.LENGTH_SHORT).show();
                //Integer[] imageIDs = ImageAdapter.this.getImageIDs();
                //for (Integer imageId : ImageAdapter.getImageIDs()){
                    //  System.out.println(imageId );
                    //}
            }
        }); 
```

是一个自身内部的类（称为[内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)）。就编译器而言，您不再位于从您的活动扩展的类中。这可以解释为什么编译器会这样抱怨：`The method getImageIDs() is undefined for the type new AdapterView.OnItemClickListener(){}`.

要解决这个问题，您需要做的就是这样：

```
GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(this));
    final Integer[] imageIDs = this.getImageIDs();

    gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {   
            for (Integer imageId : imageIDs){
                System.out.println(imageId );
            }
        }
    }); 
```

上面的代码*应该可以*工作。从事件处理程序外部获取 ID 并且将数组声明为 final 以便它可以传递给负责事件处理的内部类，这一点很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:16:40.673

使用公共 getter 方法`imageIDs`：

```
for (Integer imageId : imageAdapter.getImageIDs()){
  System.out.println(imageId );
} 
```

在特定索引处访问 id ：

```
imageAdapter.getImageIDs()[i];  // i is index of array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:19:06.617

在您的活动中使 imageIDs 受到保护：

```
protected Integer[] imageIDs = {
...
}; 
```

比你可以从扩展你的活动的类中访问它。

# iis - 用于启动/停止 iis 和 mssql 的 powershell 脚本代码

> ID：12067983
> 
> 赞同：1
> 
> 时间：2012-08-22T07:11:36.823
> 
> 标签：iis, powershell

我想使用 powershell 脚本代码启动/停止 iis 和 mssql 意味着当我运行 ps 脚本时我想启动/停止 iis 和 mssql

我在网上搜索它，我找到了一些代码，但它没有按照我的要求工作

代码：

```
$iis = get-wmiobject Win32_Service -ComputerName "xyz" -Filter "name='IISADMIN'"
$iis.State=4

if($iis.State -ne "Running")
{
Write-Host "IIS Stop successfuly"
} 
```

上面的代码向我显示了输出 IIS 停止成功，但在代码执行后 iis 仍在运行是使用 powershell 脚本停止 iis 的正确代码还是缺少的东西请也建议我使用 iis 和 mssql

先谢谢了...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:31:14.483

您可以通过运行以下命令获取所有***依赖 IISAdmin 服务***的服务：

```
$query = "ASSOCIATORS OF {Win32_Service.Name='IISAdmin'} WHERE ResultRole=Dependent"
Get-WmiObject -Query $query | Select Name 
```

您可以通过运行以下命令获取***IISAdmin 服务所依赖的所有服务：***

```
$query = "ASSOCIATORS OF {Win32_Service.Name='IISAdmin'} WHERE ResultRole=Antecedent"
Get-WmiObject -Query $query | Select Name 
```

现在，一旦你知道了依赖和需要的服务，就很容易停下来。

例如，***停止所有依赖 IISAdmin 的服务***：

```
$query = "ASSOCIATORS OF {Win32_Service.Name='IISAdmin'} WHERE ResultRole=Dependent"
Get-WmiObject -Query $query
$services | Foreach-Object { "Stopping $($_.Name)";$_.StopService() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:31:31.710

您需要调用 StopService 方法并检查 ReturnValue。要获取支持的方法列表，请使用管道 $iis 到`Get-Member`：

```
if($iis.State -eq 'Running')
{
    $rv = $iis.StopService()

    if($rv.ReturnValue -eq 0)
    {
        Write-Host "IIS Stopped successfuly"
    }
    else
    {
        Write-Host "IIS did not stop successfuly. Return value is $($rv.ReturnValue)"
    }
} 
```

# c# - 调试、信息等中的 app.config

> ID：12067988
> 
> 赞同：0
> 
> 时间：2012-08-22T07:12:05.253
> 
> 标签：c#, debugging, logging, app-config, log-level

`app.config`我在 C# 中有一个问题。

我`app.config`用`key`and写了一个`value=DEBUG`，而在`main`我写了

```
DEBUG,INFO,WARN AND ERROR. 
```

问题是该值不起作用，它在`main`不考虑级别的情况下将其打印到我的日志中。

这是我的应用程序配置：

```
<?xml version="1.0"?>
<configuration>
<appSettings>
<add key="FolderName" value="C:\Users\mpilas\Desktop\logs\" />
<add key="FileSize" venter code herealue="10240" />
<add key="LogNameType" value="Date"/> <!--Value can be Size or "Date" -->
<add key="Level" value='DEBUG'/>
</appSettings>
</configuration> 
```

我`main`的是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Configuration;

namespace ConsoleApplication8 {
    class Program {
        static void Main(string[] args) {
            for (int i = 0; i < 2; i++) {
                LogWriter.Write("Hello", Severity.DEBUG);
                LogWriter.Write("Hello", Severity.INFO);
                LogWriter.Write("Hello", Severity.WARNING);
                LogWriter.Write("Hello", Severity.ERROR);
            }
        }
    }
} 
```

我还有一个名为 的课程`:LogWriter`。

```
namespace ConsoleApplication8 {
    public enum Severity { ERROR, WARNING, INFO, DEBUG };

    public class LogWriter {
        private static string _folder = ConfigurationManager.AppSettings["FolderName"];
        private static long _fileSize = int32.Parse(ConfigurationManager.AppSettings["FileSize"]);
        private static string kindOfType = ConfigurationManager.AppSettings["LogNameType"];

        static LogWriter() {}

        private static string GetFileNameByDate() {
            string dateName= DateTime.Now.ToString("yyyy-MM-dd");
            return  _folder + dateName + ".log";
        }

        private static string GetFileNameBySize() {
            string name = "";
            int counter = 0;

            do {
                if (counter == 0) { name = _folder + kindOfType + ".log"; }
                else {name = _folder + kindOfType + "-" + counter + ".log"; }
                if (File.Exists(name) {
                    counter++;
                    FileInfo realFile = new FileInfo(name);
                    if (realFile.Length > _fileSize) { 
                        name = _folder + kindOfType + "-" + counter + ".log";
                    }
                    else { break; }
                }
                else { break; }
            } while (true);
            return name;
        }

        private static string GetFileName() {
            clearFiles();
            if(kindOfType == "Size") { return GetFileNameBySize(); }
            else { 
              if(kindOfType == "Date") { return GetFileNameByDate(); }
            }
            return "";
        }

        public static void Write(string messgae, Severity severity) {
            try {
                string file = GetFileName();
                StreamWriter log = new StreamWriter(file, true);
                log.WriteLine(DateTime.Now.ToString() + " " + severity.ToString() + ": [" + messgae + "]");
                log.Flush();
                log.Close();
            }
            catch (Exception) {}
        }

        private static void clearFiles() {
            string[] files = Directory.GetFiles(_folder);
            foreach (string file in files) {
                FileInfo fi = new FileInfo(file);
                if (fi.LastAccessTime < DateTime.Now.AddDays(-14)) { fi.Delete(); }
            }
        }
    }
} 
```

我应该如何对待`key=level`我的应用程序及其价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:06:32.490

您最好使用`System.Diagnostics`您自己的实现中提供的现有日志脚手架[`TraceListener`](http://msdn.microsoft.com/en-us/library/sk36c28t.aspx)，它可以处理您的 14 天滚动日志等，然后您需要做的就是通过 注册您的跟踪侦听器，然后使用[跟踪](http://blogs.msdn.com/b/abhinaba/archive/2007/06/07/adding-trace-to-a-net-application-and-listening-to-it.aspx)`app.config`配置您的跟踪级别[开关](http://blogs.msdn.com/b/abhinaba/archive/2007/06/07/adding-trace-to-a-net-application-and-listening-to-it.aspx)。

*请注意，`traceSwitch`支持代码中的实例由`<add name="TraceLevelSwitch" value="0" />`config 字段控制。*

```
<configuration>
    <system.diagnostics>
        <switches>
            <!--  0-off, 1-error, 2-warn, 3-info, 4-verbose. -->
            <add name="TraceLevelSwitch" value="0" />
        </switches>
        <trace autoflush="true" indentsize="4">
            <listeners>
                <add name="myListener" type="MorPilasTraceListener" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration> 
```

* * *

```
private static TraceSwitch traceSwitch = new TraceSwitch("TraceLevelSwitch", null);

private static void LogInfo(string message)
{
    if(traceSwitch.TraceInfo)
        Trace.TraceInformation(message);
} 
```

# jquery - 两列和背景复杂性

> ID：12067994
> 
> 赞同：0
> 
> 时间：2012-08-22T07:12:18.757
> 
> 标签：jquery, css

我需要与侧栏（提醒等）和每个页面内容的中心栏交互。

我有两列将等于他们的水平，我可以做到。问题右栏由壁纸的三个部分组成。具有固定高度的顶部和底部。中间部分的高度根据其中的内容而变化。

我的问题是我需要中间部分将高度匹配到最终所有将等于第二列的高度列。

我试着用一个脚本来做。问题是，当我使用 jquery animate 函数列时没有添加高度 Banmtzih 然后创建了一个小跳转。

有办法做到这一点吗？

我的代码：

```
<div class="main_content">
    <div id="area_right">
        <div id="area_right_top">
            <div id="area_right_bottom">
                <div id="area_right_content">
                    My content..
                </div>
            </div>
        </div>
    <div>

    <div id="area_left">
        <div id="area_left_top">
            <div id="area_left_bottom">
                 <div id="area_left_content">
                    My left content
                 </div>
            </div>
        </div>
    </div>
</div> 
```

预览：[预览](https://dl.dropbox.com/u/18298179/ps.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:36:07.033

我建议您使用如下所示的分区的其他分层实施例，使用**css**样式表并使用[此技巧](http://ryanfait.com/sticky-footer/)。

```
<div class="main_content">
    <div id="area_right">
        <div class="wrarper">
            <!-- 100% height and margin-bottom -XXXpx throught CSS-->
            <div id="area_right_top"><!-- determined height throught CSS-->
            </div>
                    My content..
            <div class="push"></div><!-- height:XXXpx throught CSS-->
        </div>
        <div id="area_right_bottom"><!-- height:XXXpx throught CSS-->
        </div>
    <div>
    ect ect     
</div> 
```

您可能想在搜索引擎中搜索“CSS 粘性页脚”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:46:08.417

实际上有一个技巧可以在没有任何 js 的情况下实现这一点，我认为这总是一个加分项。我将尝试解释：

*   将您提供的整个图像分成 3 部分，固定的顶部和底部部分，以及可以重复的 1 像素高的中间部分。
*   按如下方式构建您的html：

 `````
​&lt;div id="page-wrap"/>
    <div id="top-bg"></div>
    <div id="content">
        <div id="left">
            ...
        </div>
        <div id="right">
            ...
        </div>
        <div style="clear: both;"><!-- clearfix --></div>
    </div>
    <div id="bottom-bg"></div>     
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
````  `*   接下来，您将背景图像应用到 top-bg 和 bottom-bg 作为无重复图像，并将尺寸设置为固定
*   您将中心图像应用于内容 div 并将其设置为沿 y 轴重复
*   浮动你的右列和左列，并在顶部和底部给它们一个负边距，使它们流过顶部和底部 div

这应该可以解决问题。现在无论哪个获得最大，左或右，整个内容都会拉伸。并且通过将背景设置为包装器，最小的列将显示为沿延伸，尽管它只会占用所需的高度。

我知道从我低俗的解释中这有点难以理解，所以我设置了一个小例子供您澄清：http: [//jsfiddle.net/jczXV/](http://jsfiddle.net/jczXV/)``

# asp.net-mvc - MVC 列表在 Visual Studio 2012 中不起作用

> ID：12067999
> 
> 赞同：1
> 
> 时间：2012-08-22T07:12:33.000
> 
> 标签：asp.net-mvc, visual-studio-2012

是否需要任何其他配置才能使 MVC 站点在 Visual Studio 2012 中工作？我有一个非常基本的网站设置，但它不工作。它表示错误，但表示模型。

**控制器**

```
 public class ISPLinkController : Controller

    {

        // GET: /ISPLink/Details/5

        public Models.test Details(int id)
        {
            return new Models.test { url = "www.google.com", productGroup = "blah", name = "blah" };
        }
} 
```

**模型**

```
 public class test
    {
        public string name { get; set; }
        public string url { get; set; }
        public string productGroup { get; set; }
    } 
```

看法

```
@model StopAtNothingAdmin.Models.test

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>test</legend>

    <div class="display-label">
     @Html.DisplayNameFor(model => model.name)
   ....Snip 
```

**进行`http://localhost:57608/ISPLink/Details/5`**

```
StopAtNothingAdmin.Models.test 
```

（即查看源代码）。没有别的了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:15:30.083

您需要从您的操作中返回一个[视图](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.view%28v=vs.98%29.aspx)：

假设您的视图已命名`Details.cstml`

```
 public ActionResult Details(int id)
 {
     var model = new Models.test 
         { 
             url = "www.google.com", 
             productGroup = "blah", 
             name = "blah" 
         };
     return View(model);
 } 
```

[aps.net mvc](http://www.asp.net/mvc/tutorials)站点上有很多很好的介绍性教程。