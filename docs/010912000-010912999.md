# StackOverflow 问答 10912000-10912999

# javascript - div onclick 与 Form 和其他元素

> ID：10912000
> 
> 赞同：0
> 
> 时间：2012-06-06T09:59:29.270
> 
> 标签：javascript, jquery, triggers, onclick

我想解决一个问题，我将一个 onclick 元素附加到一个 div （并且只附加到它！）

请看以下代码：

```
<script>
function  goToo(url,idd){
alert(idd);
if (idd=="onlyMe")
window.location=url;
}
</script>
<div id="onlyMe" onclick="javascript:goToo('http://www.google.com', this.id)" style="<-index:-150">
<form><input type="text" name="coap"></form>

<h3>This is an element where click should work!</h3>

<div id="notME">
<h3>In this point it should not work!</h3>
</div>

</div> 
```

我希望仅在 div 单击时触发 onlick。

请现场查看示例@http: [//modacalcio.com/HtmlProblemForm.html](http://modacalcio.com/HtmlProblemForm.html)

到处都会触发点击，特别是在表单输入中。

Obiovusly 我希望在不删除子节点中的 onclick 的情况下使用它，因为它们有自己的 onclick 仍然需要工作

还有 jquery 我有同样的问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:11:08.977

```
$('#onlyMe').on('click', function(evt) {
    if ($(evt.target).parents('#notME').length === 0 && evt.target.id !== 'notME') {
        location.href = "http://...";
    }       
}); 
```

小提琴示例：http: [//jsfiddle.net/zhkr2/2/](http://jsfiddle.net/zhkr2/2/)

这个想法是检查事件是在`#notME`元素上还是在包含的元素内触发的`#notME`，所以我检查祖先是否是那个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:15:11.103

只给'div'一些宽度

```
#onlyMe
{
width:
height:

} 
```

并正确关闭 div 。

# android - Android TabHost setCurrentTab()

> ID：10912003
> 
> 赞同：0
> 
> 时间：2012-06-06T09:59:46.003
> 
> 标签：android, tabs, host

我使用 TabHost 并且我有 2 个带有 2 个活动的选项卡我想将第二个选项卡设置为默认选项卡但是当 tabhost 启动时他加载第一个 tab1 和 tab2 之前这是错误的，因为在这 2 个活动中我从 web 服务加载数据！我的问题是如何在不加载第一个选项卡的情况下设置当前选项卡的第二个选项卡！

我的标签主机代码：

```
public class TabsHandler extends TabActivity    {
private static TabHost tabHost;
Intent intent;
    private void setupTabHost() {
    tabHost = (TabHost) findViewById(android.R.id.tabhost);
    tabHost.setup(this.getLocalActivityManager());
    tabHost.setCurrentTab(1);
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            if(!isOnline())
                Utils.DialogNoInternet(this);
            String authToken = getIntent().getExtras().getString("token");
            Long role = getIntent().getExtras().getLong("role");
            String EventIdNotification =getIntent().getExtras().getString("EventIdNotification");
            setContentView(R.layout.event_list_tabs);    

            setupTabHost();
            Resources res = getResources();
            tabHost.getTabWidget().setClipChildren(false);

            setupTab(new TextView(this), res.getString(R.string.tab1_List),new Intent().setClass(this, EventListActivity.class).putExtra("authToken", authToken).putExtra("role", role).putExtra("EventIdNotification", EventIdNotification));
            setupTab(new TextView(this), res.getString(R.string.tab2_List),new Intent().setClass(this, PastEventListActivity.class).putExtra("authToken", authToken).putExtra("role", role).putExtra("isPast", "true"));
            tabHost.setCurrentTab(1);

    }
    public void switchTab(int tab){
            tabHost.setCurrentTab(tab);
    }
    public boolean isOnline() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }
    private void setupTab(final View view, final String tag,Intent intent) {
            View tabview = createTabView(tabHost.getContext(), tag);
            TabSpec setContent = tabHost.newTabSpec(tag);
            setContent.setIndicator(tabview);
            setContent.setContent(intent);
            tabHost.addTab(setContent);
    }

    private static View createTabView(final Context context, final String text) {

            View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
            TextView tv = (TextView) view.findViewById(R.id.tabsText);
            tv.setText(text);
            return view;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:05:26.980

替换`tabHost.setCurrentTab(1);`它`tabHost.setCurrentTab(2);`会将第二个选项卡设置为默认选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:03:23.317

```
public class TabsHandler extends TabActivity    {
private static TabHost tabHost;
   Intent intent;
private void setupTabHost() {
tabHost = (TabHost) findViewById(android.R.id.tabhost);
tabHost.setup(this.getLocalActivityManager());
tabHost.setCurrentTab(2);
}
@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(!isOnline())
            Utils.DialogNoInternet(this);
        String authToken = getIntent().getExtras().getString("token");
        Long role = getIntent().getExtras().getLong("role");
        String EventIdNotification =getIntent().getExtras().getString("EventIdNotification");
        setContentView(R.layout.event_list_tabs);    

        setupTabHost();
        Resources res = getResources();
        tabHost.getTabWidget().setClipChildren(false);

        setupTab(new TextView(this), res.getString(R.string.tab1_List),new Intent().setClass(this, EventListActivity.class).putExtra("authToken", authToken).putExtra("role", role).putExtra("EventIdNotification", EventIdNotification));
        setupTab(new TextView(this), res.getString(R.string.tab2_List),new Intent().setClass(this, PastEventListActivity.class).putExtra("authToken", authToken).putExtra("role", role).putExtra("isPast", "true"));
        tabHost.setCurrentTab(2);

}
public void switchTab(int tab){
        tabHost.setCurrentTab(tab);
}
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}
private void setupTab(final View view, final String tag,Intent intent) {
        View tabview = createTabView(tabHost.getContext(), tag);
        TabSpec setContent = tabHost.newTabSpec(tag);
        setContent.setIndicator(tabview);
        setContent.setContent(intent);
        tabHost.addTab(setContent);
}

private static View createTabView(final Context context, final String text) {

        View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
        return view;
} 
```

# qt - 无法在配置文件中设置阈值

> ID：10912005
> 
> 赞同：0
> 
> 时间：2012-06-06T09:59:50.180
> 
> 标签：qt, logging

到目前为止，我已经设法创建了一个 Log4Qt 配置文件并使用 PropertyConfigurator 加载它。一切似乎都运行良好，我可以设置记录器、附加程序、分配级别等
。唯一不起作用的是为附加程序设置阈值。

这就是我设置配置文件的方式：

```
void createNewLoggerConfigurationFile(QString fileName)
{
        QSettings settings(fileName, QSettings::IniFormat);

        settings.setValue("log4j.appender.A1", "org.apache.log4j.FileAppender");
        settings.setValue("log4j.appender.A1.file", "C:/Users/Fujitsu/Desktop/LogOutput.txt");
        settings.setValue("log4j.appender.A1.layout", "org.apache.log4j.TTCCLayout");
        settings.setValue("log4j.appender.A1.layout.DateFormat", "ISO8601");

        settings.setValue("log4j.appender.ADataManager", "org.apache.log4j.FileAppender");
        settings.setValue("log4j.appender.ADataManager.file", "C:/Users/Fujitsu/Desktop/DataManagerLogOutput.txt");
        settings.setValue("log4j.appender.ADataManager.layout", "org.apache.log4j.TTCCLayout");
        settings.setValue("log4j.appender.ADataManager.layout.DateFormat", "ISO8601");
        settings.setValue("log4j.appender.ADataManager.threshold", "DEBUG");

        settings.setValue("log4j.rootLogger", "ALL, A1");
        settings.setValue("log4j.logger.DataManager", "ALL, ADataManager");
} 
```

生成的错误消息（我猜来自 Log4Qt）如下所示：

> 10 [] 错误 Log4Qt::Factory - 无法将类“Log4Qt::FileAppender”对象的属性“阈值”转换为类型“级别”（Log4Qt::Factory::CONFIGURATOR_UNKNOWN_TYPE_ERROR，29）

有任何想法吗？

# ruby-on-rails-3 - 参数数量错误（2 比 1）

> ID：10912006
> 
> 赞同：2
> 
> 时间：2012-06-06T09:59:53.240
> 
> 标签：ruby-on-rails-3

这是什么错误？BrandsController#index 中的 ArgumentError 参数数量错误（1 为 2） 我在控制器中的索引代码是：

```
 def index
    @brands = Brand.all
    #@brands = Brand.paginate :page => params[:page],:per_page => 6 
    respond_to do |format|
      format.html
      format.xml { render :xml => @brands.to_xml }
    end
  end 
```

我的 index.html.haml 视图代码是：

```
- content_for :title do
  Listing Brands
- content_for :div do
  Listing Brands
- content_for :subnav do
  #navigation-search
    /= yield :brand_img
    %img{:src => "images/lifestyle.gif", :height => "35"}
    /= link_to 'Change Brand', new_brand_path
    %a.Metro-16{:href => new_brand_path, :title => "Change brand"} Change Brand   
  = render :partial => 'updatemesg'

- content_for :brand_img do 
  %img{:src => "images/lifestyle.gif", :height => "35"}
-#
  - content_for :subnav do
    #navigation-search
      %form
        #{yield :brand_img}

  %ul
    %li
      %a.tt-top-center{:title => "Total Events"}#{Event.all.size}
      %span Total events
    %li
      %a.blue.tt-top-center{:title => "Today's Events"} 12
      %span Today's Events
    %li
      %a.green.tt-top-center{:title => "Tomorrow's Events"} 3
      %span Tomorrow's Events
    %li
      %a.tt-top-center{:title => "Upcoming Events"} 7
      %span Upcoming Events

  %a#show-modal.create-24.tt-top-center{:href => new_brand_path, :title => "New Brand"} New Brand

- @brands.each do |brand|
  .ovr
    %ol.hoverbox
      %li
        = link_to image_tag(brand.photo.url, :alt => brand.name, :class => "preview"), brand_path(brand)
        /= link_to image_tag(brand.photo.url), { :class => "preview"}
        .abc      
          = brand.name 
```

我不明白为什么会出现这个错误 BrandsController#index 中的 ArgumentError 参数数量错误（2 比 1）

# php - Solr 按功能排序 - 意外结果

> ID：10912011
> 
> 赞同：1
> 
> 时间：2012-06-06T10:00:08.993
> 
> 标签：php, apache, solr, lucene, indexing

我们正在尝试基于一个复杂的函数来查询 solr 并对结果进行排序，该函数涉及到几个嵌套的 sum(...product(...div(...))) 函数非常复杂。为了调试，我们运行了一个与上述排序参数计算等效的 SQL，并尝试将它们与上述 solr 以相同顺序返回的相同实体进行匹配。我们没有看到任何比赛。更可靠的 SQL 查询返回有偏差的结果。分数都是乱七八糟的，没有特别的顺序。这导致我们认为 solr 无法在这里对事物进行排序，或者我们做错了什么。

一些可疑的东西： fl=*,score 对所有返回的文档产生相同的分数值。这个因素还在排序吗？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:26:44.690

fl=*,score 按预期工作。它为不同的文件给出不同的分数。你用的是什么版本的solr。我只在 3.6 上测试过

# forms - 如何在创建表单中使用引导下拉菜单？

> ID：10912014
> 
> 赞同：1
> 
> 时间：2012-06-06T10:00:14.620
> 
> 标签：forms, twitter-bootstrap

我不知道如何才能满足与数据库的连接。

现在我的 _form 中有这段代码：

```
 <div class="field">
    <%= f.select :language, options_for_select(%w[English Chinese Ukrainian]) %>
  </div> 
```

我如何使用 bootstrap 或如何使它看起来像 bootstrap ？

# svn - SVN 存储库出现故障，工作副本中缺少 .svn 文件夹

> ID：10912018
> 
> 赞同：1
> 
> 时间：2012-06-06T10:00:19.773
> 
> 标签：svn, svn-repository

我的 SVN 存储库（服务器宕机了几个小时）宕机了。

当 SVN 用户更新他们的工作副本时，同步到存储库的“.svn”文件夹和文件/文件夹丢失了！

如何解决这个问题？或者当服务器启动时这个问题会自动解决吗？

谢谢， 潘迪亚拉扬 K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:30:15.833

由于 SVN 是专门为确保可以离线工作而设计的，因此似乎大致有三种主要可能性：

1.  您正在使用一些定制的脚本，这些脚本把您搞砸了（这不是一个纯粹的猜想——我已经看到这里提出的一些问题最终完全解决了这个问题）。

2.  你误会了。

3.  有人故意或错误地破坏了你的系统（这*是*一个纯粹的猜想）。

*看到您的最后一条评论后更新：*它使 (3) 更有可能 - 有人无意中删除了*HEAD*上的内容。这不是一个大问题，因为您总是可以恢复这些更改。

# javascript - 如何为动态子域启用 fb-login

> ID：10912031
> 
> 赞同：0
> 
> 时间：2012-06-06T10:01:00.990
> 
> 标签：javascript, subdomain, fbconnect, facebook-iframe

为动态子域启用 FB 登录的方式（而不是最好的方式）是什么？假设我有 domain.com，现在我的应用程序是自助服务的，并允许最终用户创建他们的个人应用程序（例如 myapp.domain.com），其中将启用 FB 登录/注册。

我们如何使用单个 fb 脚本来处理这种情况？
感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:23:11.030

究竟是什么问题？

如果您在应用程序设置中将 example.com 设置为您的域，则无论实际情况如何，您*都应该能够从**所有*.example.com 登录。

# javascript - 预加载图像并不总是出现

> ID：10912032
> 
> 赞同：0
> 
> 时间：2012-06-06T10:01:02.623
> 
> 标签：javascript, html, css, ajax

我创建了一个简单的 ajax 请求：

```
 var params = "postdata=" + mydata;
             if (window.XMLHttpRequest) {
                 xmlhttp = new XMLHttpRequest();
             } else {
                 xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
             }
             xmlhttp.onreadystatechange = function () {
                 if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                     document.getElementById("data").innerHTML = xmlhttp.responseText;
                 }
             }
             xmlhttp.open("POST", "data.php", true);
             xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
             xmlhttp.setRequestHeader("Content-length", params.length);
             xmlhttp.setRequestHeader("Connection", "close");
             xmlhttp.send(params); 
```

这是 HTML 代码：

```
 <div id="data">
    <img src="/images/preload.gif" />
    <b style="color:#9ca6dc;font-size:12px;">Wait</b>
    </div> 
```

问题是 preload.gif 和“Wait”文本只是有时而不是总是出现。

为什么 ？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:13:10.543

唯一的解释是 AJAX 请求工作得太快而无法看到内容（正如 Alessandro Pezzato 所说）。如果您没有看到它，则 XMLHTTP 请求的 readyState 必须更改。

或者您有其他一些异步运行的 Javascript 并对相同的内容进行更改。

# alfresco - 如何在 amp 文件中添加已保存的搜索？

> ID：10912036
> 
> 赞同：0
> 
> 时间：2012-06-06T10:01:09.510
> 
> 标签：alfresco

我在露天保存了一些搜索，现在我想将这些保存的搜索添加到 AMP 文件中。有人知道怎么做吗？

当我们保存任何搜索时，新的 xml 文件会生成在`Company Home>>Data Dictionary>>Saved Searches`

我们需要将此文件存储在 amp 文件中的什么位置？

需要做什么改变`model-context.xml`？

谢谢，约格什

# facebook - 构建一个drupal模块

> ID：10912037
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:01:11.773
> 
> 标签：facebook, facebook-graph-api, drupal-7, drupal-modules

首先感谢您的支持。

我正在尝试构建一个 facebook 模块，我需要为该模块创建一个管理界面，并为该模块创建一个前端以显示用户的朋友。

我需要从模块的管理面板中选择权限，然后检索用户的朋友。

我可以通过使用任何特定模块来做到这一点（Facebook 的 drupal 除外，因为它不支持图形 api），你能指导我完成这个吗？

我只需要一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:21:50.330

> 我正在尝试构建一个 facebook 模块，我需要为该模块创建一个管理界面，并为该模块创建一个前端以显示用户的朋友。

然后我建议你从解释创建模块的基础知识的 Drupal 教程开始！

# apache-flex - 为什么添加 Flex DateChooser 组件会引发索引越界错误？

> ID：10912039
> 
> 赞同：0
> 
> 时间：2012-06-06T10:01:25.517
> 
> 标签：apache-flex, flex4

我目前正在处理的 flex 应用程序遇到问题。当我使用“createPopUp”方法打开一个弹出窗口时，我得到了这个索引超出范围的错误消息：

> RangeError：提供的索引超出范围。在 mx.core::FTETextField/getLineMetrics()[E:\dev\4.y\frameworks\projects\spark\src\mx\core\FTETextField.as:2169] 在 mx.core::UIFTETextField/get baselinePosition( )[E:\dev\4.y\frameworks\projects\spark\src\mx\core\UIFTETextField.as:784] 在 mx.controls::DateChooser/get baselinePosition()[E:\dev\4.y \frameworks\projects\mx\src\mx\controls\DateChooser.as:994] 在 spark.components::Group/get baselinePosition()[E:\dev\4.y\frameworks\projects\spark\src\spark \components\Group.as:282] 在 spark.layouts::ConstraintLayout/parseElementConstraints()[E:\dev\4.y\frameworks\projects\spark\src\spark\layouts\ConstraintLayout.as:1818] 在 spark .layouts::ConstraintLayout/parseConstraints()[E:\dev\4.y\frameworks\projects\spark\src\spark\layouts\ConstraintLayout.as:1632] 在 spark.layouts：

似乎此错误是由我的弹出窗口中的“dateChooser”组件引起的：

```
<mx:DateChooser id="endDate"/> 
```

当我评论这一行时，不再抛出错误并且弹出窗口正确加载。

这真的很奇怪，因为直到今天早上我才遇到这个问题。与此同时，我所做的只是改变了一些与布局相关的东西，但我不明白这与这个问题有什么关系。
我不明白...

有谁知道如何解决这个问题？我需要我的 DateChooser ！

谢谢 ！

劳拉

*   编辑 -

看来问题不是由 DateChooser 本身引起的，而是由它周围的 FormItem 引起的。这是我的代码的样子：

```
<Form width="100%">
[...]
    <s:HGroup width="100%">
        <s:FormItem label="Date de début">
            <mx:DateChooser id="startDate" 
                    firstDayOfWeek="1"/>
        </s:FormItem>

        <s:FormItem label="Date de fin">
            <mx:DateChooser id="endDate"
                    firstDayOfWeek="1"/>
        </s:FormItem>
    </s:HGroup>
</Form> 
```

如果我删除了两个 FormItem，它就可以工作。谁能解释我为什么？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:16:09.347

尝试将组件包装在一个`<s:Group>`元素中，即

```
<s:FormItem label="Start date">
    <s:Group>
        <mx:DateChooser id="startDate"
            firstDayOfWeek="1" />
    </s:Group>
</s:FormItem> 
```

显然，这与 Spark 组件的组成有关。大声笑Flex。

（我遇到了完全相同的问题，在互联网上也找不到任何解决方案！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:05:36.263

我认为您应该升级到最新的 TLF。这让我想起了 TLF 1.x 中的一个错误。试试 2.x。

# macos - PDOexception - '找不到驱动程序'

> ID：10912040
> 
> 赞同：1
> 
> 时间：2012-06-06T10:01:26.547
> 
> 标签：macos, pdo, mamp, php

我使用 MAMP 在本地站点上工作。直到昨天一切都很顺利。现在，当我运行我的代码时，我得到一个：“致命错误：未捕获的异常 'PDOException' 并带有消息'找不到驱动程序'......” 似乎我没有安装驱动程序，但直到今天它都运行良好。我该如何解决这个问题？

最好的，纽本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:20:20.340

你安装了 MacPorts 吗？如果您的回答是“是”，请打开您的 Shell 并输入：

1.  `cd ~/`
2.  `sudo nano .profile`
3.  更改： `export PATH=/opt/local/bin:/opt/local/sbin:$PATH`
    替换为： `export PATH=/Applications/MAMP/Library/bin/:/Applications/MAMP/bin/php/php5.3.6/bin/:$PATH`

4.  关闭你的外壳并重新打开它

这就是全部。我在这里找到了解决方案：[thewebfactory](http://thewebfactory.wordpress.com/2011/10/26/symfony-2-pdoexception-could-not-find-driver-with-mamp-2-0/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:07:03.123

我有一个类似的问题。Sfblaauw 的解决方案不起作用，但它帮助我发现了问题。首先，我使用 MacPorts 安装了 php5-mysql：

```
sudo port install php5-mysql 
```

在安装过程中，我收到以下警告：

> 您的 php.ini 包含一行会阻止 php5-mysql 和其他 PHP 扩展工作。要解决此问题，请编辑 /opt/local/etc/php5/php.ini 并删除此行：
> 
> extension_dir = "/usr/lib/php/extensions/no-debug-non-zts-20090626"

我注释掉了这一行并重新启动了 Apache。现在一切似乎都很好。

# ruby-on-rails - Rails Devise gem 是否使用 cookie 进行身份验证？

> ID：10912056
> 
> 赞同：3
> 
> 时间：2012-06-06T10:02:19.743
> 
> 标签：ruby-on-rails, cookies, devise

有一个同样的支持文档会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T05:40:08.150

我假设这个问题可以重述为“设计是否使用 cookie 来跟踪身份验证后的会话”。如果是这样，答案是肯定的。

要对此进行测试，请清除您的 cookie，登录，然后再次检查您的 cookie。您会看到一个以您的应用命名的网站。

@Rodrigo，会话由 cookie 启用。这就是会话可以通过多个页面跟随您的方式。HTTP 本质上是无状态的。Cookies 允许您保存状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:16:39.470

不是直接的。

[Devise 建立在Warden](https://github.com/hassox/warden)之上，它使用会话。我没有看到任何使用 cookie 进行身份验证的简单方法（尽管您可以使用 rememberable 在会话之间记录它）。会话由 cookie 启用，因此它间接使用 cookie。

# android - android中运行时的小部件样式属性

> ID：10912061
> 
> 赞同：0
> 
> 时间：2012-06-06T10:02:34.243
> 
> 标签：android, android-widget

有什么方法可以在 XML 文件中定义样式属性并将它们应用于在运行时创建的小部件。

属性

```
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:textColor="#0000ff"
android:typeface="serif"   
android:textSize="15sp" 
```

我正在创建一个我想应用这些的按钮

```
Button b = new Button(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:06:30.983

一个很好的应用程序在[这里](http://www.vogella.com/articles/AndroidWidgets/article.html)详细解释。这个例子使用一个样式来设置它自己的小部件。

希望这会帮助你。

# uibutton - setBackgroundImage 适用于模拟器但真实设备（IOS5.1.1）

> ID：10912065
> 
> 赞同：1
> 
> 时间：2012-06-06T10:02:45.160
> 
> 标签：uibutton, ios-simulator, device, ios5.1, setbackground

我在 viewWillAppear 中编写了一些代码，以更改某些按钮的背景图像。它在模拟器中运行良好。但是，当我将它加载到真实设备时，它不起作用。设备为IOS5.1.1。

有没有人知道是什么问题？？谢谢！！

```
(void)viewWillAppear:(BOOL)animated
{

    [super viewWillAppear:animated];

    ...

    //set dataTypeSelect buttons background

    UIImage *tmpImage = [UIImage imageNamed:@"White.png"];

    [self.dataTypeSelectBut0 setBackgroundImage:tmpImage forState:UIControlStateNormal];

    [self.dataTypeSelectBut1 setBackgroundImage:tmpImage forState:UIControlStateNormal];

    [self.dataTypeSelectBut2 setBackgroundImage:tmpImage forState:UIControlStateNormal];

    tmpImage = [UIImage imageNamed:@"Cyan.png"];

    iTDLAppDelegate *tmpAppDelegate = (iTDLAppDelegate *)[[UIApplication sharedApplication] delegate];

    switch(tmpAppDelegate.viewingDataType)
    {
        case EnumDataType_HkHorse:
            [self.dataTypeSelectBut0 setBackgroundImage:tmpImage forState:UIControlStateNormal];
            break;
        case EnumDataType_S1:
            [self.dataTypeSelectBut1 setBackgroundImage:tmpImage forState:UIControlStateNormal];
            break;
        case EnumDataType_S2:
            [self.dataTypeSelectBut2 setBackgroundImage:tmpImage forState:UIControlStateNormal];
            break;
    }

    ...

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T02:07:53.340

我已经确定这是由图像文件名引起的。

文件名是“White.PNG”和“Cyan.PNG”。
我的代码如下

```
UIImage *tmpImage = [UIImage imageNamed:@"White.png"];
UIImage *tmpImage = [UIImage imageNamed:@"Cyan.png"]; 
```

它们在模拟器中运行良好，但在真实设备中运行良好。 我发现在真实设备中
的返回值为null。`tmpImage`

现在我将它们更改为

```
UIImage *tmpImage = [UIImage imageNamed:@"White.PNG"];
UIImage *tmpImage = [UIImage imageNamed:@"Cyan.PNG"]; 
```

他们现在都可以正常工作。:)

# ruby - 使用 Mongoid 从 mongoDB 获取对象

> ID：10912067
> 
> 赞同：0
> 
> 时间：2012-06-06T10:02:49.433
> 
> 标签：ruby, mongodb, orm, sinatra, mongoid

很简单的情况。我有一个 MongoDB 数据库，其中包含来自以前开发人员的大量信息。但是，我对之前出现的模型的信息有限，并且我无权访问原始模型类。我一直在修改 MongoDB 驱动程序以获取有关它的更多信息（最终必须使用 MongoID 将对象映射回来），如下所示。

```
#The flow is as follows
  #Connection
  #Databases
  #Database
  #Collection
  #Hash Info

  #Setup the connection. you can supply attributes in the form of ("db",portno) but most of the time it will pick up the defaults
  conn = Mongo::Connection.new

  #Database info
  mongodbinfo =conn.database_names
  conn.database_info.each { |info| puts info.inspect }

  db = conn.db("db_name_here")
  db.collection_names.each { |collection| puts collection.inspect  }

  collection = db.collection("model_name_here")
  puts collection.inspect

  collection.find.each { |row|
    puts row.inspect
    puts row.class
  } 
```

每行都是一个单独的对象，并且随着 MongoDB 的工作，每个对象/文档都是一个 BSON 对象。

所以底线问题是如何使用 mongoID 将 BSON 反序列化为模型？

Ps 如果您试图找出一个新的 mongoDB，请随意使用上面的代码，它对于调试恕我直言很方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:22:21.863

所以这是一个半身像。

最后，我使用 Mondb 驱动程序通过查询手动提取数据。然而，创建对象要困难得多。

使用 ORM 时最好有实际模型。

# html - html5 getImageData 然后 putImageData 导致图像褪色

> ID：10912069
> 
> 赞同：1
> 
> 时间：2012-06-06T10:02:55.767
> 
> 标签：html, html5-canvas, getimagedata, putimagedata

我对 Html5 很陌生，我想知道是否有人可以对此有所了解：

```
<script type="text/javascript">
        window.onload = function () {

            var canvas = document.getElementById('canvas'); //682 x 111 pixel canvas
            var context = canvas.getContext('2d');

            var image = new Image();
            image.src = "/Content/ImageTestOne/logo-for-dissolve.png"; //682 x 111 pixel image
            image.onload = function () { context.drawImage(image, 0, 0); drawFrame(); };

            function drawFrame() {

                window.requestAnimationFrame(drawFrame, canvas);

                imageData = context.getImageData(0, 0, canvas.width, canvas.height);

                //Do something to some pixels here that persists over time

                context.clearRect(0, 0, canvas.width, canvas.height);

                context.putImageData(imageData, 0, 0);
            };

       };
</script> 
```

根据我对 Html5 的有限知识，除了不断显示“图像”之外，这段代码应该什么都不做。但是相反，图像很快就烧成了几乎白色，这表明每次从画布读取或写入画布时，imageData 都会发生轻微变化......

基本上我想淡化鼠标所在的图像，以便在鼠标移动时显示背景图像。有没有办法解决这个问题，还是我必须在这个过程中变得更有创意？无论如何我可以操纵“图像” ImageData 而不是每次都从画布上获取它？

在此先感谢，我尝试使用 jpg 和 png 并加载到 DOM 而不是通过 image.src 但它们都有相同的问题。

顺便说一句，使用最新的 Chrome。

这是 requestionAnimationFrame 的设置，用于处理故障转移到 SetTimeout 的一系列浏览器：

```
(!window.requestAnimationFrame)
{
    window.requestAnimationFrame = (window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    window.oRequestAnimationFrame ||
                    window.msRequestAnimationFrame ||
                    function (callback) {
                        return window.setTimeout(callback, 1000/60);
                    });
} 
```

这是画布的代码

```
<canvas id="canvas" width="682" height="111"></canvas> 
```

这就是所有的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:30:24.903

putImageData() 和 getImageData() 可能是有损的。[规范](http://www.w3.org/TR/2dcontext/)中有关于此的注释：

> 由于与预乘 alpha 颜色值相互转换的有损特性，刚刚使用 putImageData() 设置的像素可能会作为不同的值返回给等效的 getImageData()。

另请参阅此相关问题： [为什么 HTML Canvas getImageData() 不返回刚刚设置的完全相同的值？](https://stackoverflow.com/questions/4309364/why-does-html-canvas-getimagedata-not-return-the-exact-same-values-that-were-j)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T05:15:24.123

我也尝试将它应用到我的游戏中，我将在其中操纵选定的像素以产生效果，但它并没有给我预期的结果

这是我用来操作像素以更改的一些示例代码

获取图像信息并存储

```
var img = context.getImageData(0,0, width, height)
var imgdata = img.data
var len = imgdata.length 
```

循环到所有数据并操作像素信息

```
var i = 0;

for(i; i<leng; i++) {
    var red = imgdata[i]
    var green = imgadata[i+1]
    var blue = imgdata[i+2]
    var alpha = imgdata[i+3]

    imgdata[i] = new value
    imgdata[i+1] = new value
    imgdata[i+2] = new value
    imgdata[i+3] = new value
} 
```

context.putImageData(img, 0,0)

然后创建动画帧看看效果

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T12:18:15.927

requestAnimationFrame 是一项实验性功能（2012 年 6 月），它使用基于时间的帧访问。这样做的原因是避免动画中的延迟。我建议你看看这篇[Moz 文章](http://hacks.mozilla.org/2011/08/animating-with-javascript-from-setinterval-to-requestanimationframe/)。

# java - 如何在 Java 的 GlazedLists/JTable 中使列、行或单元格可编辑？

> ID：10912084
> 
> 赞同：0
> 
> 时间：2012-06-06T10:04:26.177
> 
> 标签：java, swing, glazedlists

任何人都可以放下一行代码来展示如何使 GlazdJTable 的单元格可编辑吗？

```
JTable table = new Jtable();
    TableFormat tableFormat = GlazedLists.tableFormat(properties, headers);
    model = new EventTableModel<Artikel>(filterList, tableFormat);
    selectionModel = new EventSelectionModel<Artikel>(filterList);

    table.setSelectionModel(selectionModel);
    table.setModel(model); 
```

//**如何设置表格单元格可编辑？**

**注意：**我知道 TableFormat 必须实现 WritableTableFormat 接口。但我不知道我应该创建自定义表格格式还是可以像 JTable 一样设置 Jtable 单元格可编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:10:13.843

覆盖`TableModel's`方法 `public boolean isCellEditable(int rowIndex, int columnIndex)`以对可编辑返回 true，对其余单元格返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:55:56.900

推荐的方法是使用[WritableTableFormat](http://publicobject.com/glazedlists/glazedlists-1.8.0/api/ca/odell/glazedlists/gui/WritableTableFormat.html)。EventTableModel 检查表格格式是否为 WritableTableFormat，如果是，则将 isEditable() 问题委托给该格式（如[EventTableModel 文档](http://publicobject.com/glazedlists/glazedlists-1.8.0/api/ca/odell/glazedlists/swing/EventTableModel.html#isCellEditable%28int,%20int%29)中所述）。否则 EventTableModel 假定表格不可编辑。

目前您正在使用 GlazedLists.tableFormat() 便捷方法，而不是实例化您自己的 TableFormat。没关系，有一种方法恰好适用于这种情况，您可以通过传入布尔数组来指定每列是否可编辑。请参阅[GlazedLists.tableFormat(String[] propertyNames, String[] columnLabels, boolean[] editable) 文档](http://publicobject.com/glazedlists/glazedlists-1.8.0/api/ca/odell/glazedlists/GlazedLists.html#tableFormat%28java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20boolean%5B%5D%29)。

# wpf - 应用程序空闲

> ID：10912086
> 
> 赞同：0
> 
> 时间：2012-06-06T10:04:41.490
> 
> 标签：wpf

`WPF`当特定事件触发时，如何让我的应用程序空闲？

```
void SystemEvents_SessionSwitch(object sender, Microsoft.Win32.SessionSwitchEventArgs e)
    {
        if (e.Reason == SessionSwitchReason.SessionLock) {
            //make application idle
        }
        else if (e.Reason == SessionSwitchReason.SessionUnlock) {
            //run the app again
        }
    } 
```

我有这样的代码，当用户锁定 Windows 时，如果条件被触发，当他解锁时，它会被触发。

有人可以建议我让应用程序空闲并再次运行它的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:49:33.927

您不能在 Windows 中使应用程序“空闲”。[您可以使用Thread.Suspend](http://msdn.microsoft.com/en-us/library/system.threading.thread.suspend.aspx)方法使应用程序线程挂起，但您至少需要一个线程（即主线程）运行，以便应用程序恢复其他线程。

不过，暂停和恢复线程**并不是**一个好主意。智能地暂停和恢复应用程序正在执行的任务将是一个更好的解决方案。例如，如果您的应用程序正在播放视频，您应该找到一种简洁的方法来暂停视频控件并在需要时恢复视频。暂停和恢复线程可能会产生意外行为和糟糕的用户体验。

# java - 如何在不重启服务器的情况下清除 ehcache

> ID：10912087
> 
> 赞同：6
> 
> 时间：2012-06-06T10:04:46.647
> 
> 标签：java, caching, ehcache, tomcat5.5

虽然我猜它极不可能 - 但有没有办法在不重新启动服务器的情况下清除 ehcache？我需要清除缓存以进行一些测试 - 我无法更改代码并且无法多次重新启动服务器。

PS：我正在使用 apache-tomcat-5.5.25 请告诉我。谢谢，psvm

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T20:29:30.503

您是否通过 JMX 公开 Ehcache？然后，您可以使用诸如 jvisualvm 之类的工具使用 JMX 操作清除缓存。寻找`net.sf.ehcache.CacheManager`提供`clearAll()`操作的 MBean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T07:20:27.470

使用spring+hibernate并暴露mbean：

```
import org.hibernate.Cache;
import org.hibernate.SessionFactory;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Component;

import javax.annotation.Resource;

@Component("CacheManagerMBean")
public class CacheManagerMBean {

    private static final org.slf4j.Logger logger = LoggerFactory.getLogger(CacheManagerMBean.class);

    @Resource(name = "sessionFactory")
    private SessionFactory sessionFactory;

    public void clearCache() {
        Cache cache = sessionFactory.getCache();
        if (null != cache) {
            logger.info("Clearing cache...");
            cache.evictAll();
            cache.evictAllRegions();
            logger.info("Clearing cache...Done!");
        } else {
            logger.error("No second level cache available for session-factory");
        }
    }

} 
```

XML配置：

```
<bean id="jmxExporterCacheManagerMBean" class="org.springframework.jmx.export.MBeanExporter">
        <property name="beans">
            <map>
                <entry key="CacheManager:type=SecondLevelCacheManager">
                    <ref bean="CacheManagerMBean"/>
                </entry>
            </map>
        </property>
    </bean> 
```

然后使用jconsole连接java进程，使用Mbean方法调用——清除二级缓存！

# android - DDMS 在 Eclipse 中不起作用

> ID：10912088
> 
> 赞同：0
> 
> 时间：2012-06-06T10:04:49.913
> 
> 标签：android, file, ddms

我以前有 sdk 2.2。然后我安装了 android sdk 2.3，但后来卸载了它。但现在 DDMS 透视图文件资源管理器无法正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:06:50.723

Eclipse 首选项中的 Android SDK 设置可能已被重置。将其更改为：

```
Window-> Preferences->Android->SDK Location 
```

# c# - C#从asp.net web api返回一个父子JSON对象？

> ID：10912095
> 
> 赞同：0
> 
> 时间：2012-06-06T10:05:23.963
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-web-api

这与我昨天发表的一篇文章有​​关，但未能解决：[ASP.Net Web API 在 VS 中正确显示但给出 HTTP500](https://stackoverflow.com/questions/10897523/asp-net-web-api-showing-correctly-in-vs-but-giving-http500)

我认为我需要简化我正在尝试做的事情，并从那里开始工作。

谁能告诉我一个使用 asp.net Web API（我正在使用 VS 2012 Express RC）从父/子模型返回 JSON 的示例？

例如：（伪Json）：

```
Parent: Mark
..Child: Tom
..Child: Adam
..Child: Becki

Parent: Terry
..Child: Sophie
..Child: robert 
```

我可以让它从一个表中返回数据，但不能从链接表中返回数据。

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:15:31.657

有两种方法可以解决这个问题。

1.  创建一个新的模板类，遍历使用 EF 获取的列表并将值分配给模板类中定义的属性。如果有的话，这将为您提供一个到多个表的准确结果。最后将列表返回给 json 调用。

2.  从 EF 获取列表时，创建一个新的匿名类型并选择所需的列。为此，您的 webmethod 将返回类型为 IEnumerable

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:08:51.720

查看您的原始帖子后，我的猜测是您的对象中有循环引用。[这篇文章](https://stackoverflow.com/a/10897975/523496)提到了使用 Json.Net，这将使您能够更好地控制返回给客户端的内容。

`tblCustomerBooking`您的另一个选择是从对象中删除外键引用`tblRental`（见下文）。

这可能允许您返回 JSON 对象并测试循环引用是否存在问题。

```
[ForeignKey("customer_id")]
public virtual tblCustomerBooking tblCustomerBooking { get; set; } 
```

如果您打算返回域（即实体对象），我建议您使用 Json.NET，因为这将避免所有循环引用，并允许您保持双向对象关系。

我个人的偏好是使用 DTO 并将您的域对象映射到这些 DTO，允许您更好地控制客户端看到的内容（因为在对象名称中看到 'tbl' 前缀不是好的做法）

# c# - 如何从facebook获取好友列表？（桌面应用）

> ID：10912096
> 
> 赞同：2
> 
> 时间：2012-06-06T10:05:25.360
> 
> 标签：c#, wpf, facebook-c#-sdk

[根据堆栈溢出的](https://stackoverflow.com/questions/1986461/vs2008-c-facebook-rest-api-how-to-use-it-to-get-friends-list)此链接代码，我尝试使用此代码获取好友列表，但登录后出现此错误**“需要有效签名”**

```
string APIKey = ConfigurationManager.AppSettings["API_Key"];
string APISecret = ConfigurationManager.AppSettings["API_Secret"];

Facebook.Session.ConnectSession connectsession = new Facebook.Session.ConnectSession(APIKey, APISecret);
        Facebook.Rest.Api api = new Facebook.Rest.Api(connectsession);
        var friends = api.Friends.GetLists();
        foreach (var friend in friends)
        {
            System.Console.WriteLine(friend.name);
        } 
```

指导我找出解决方案

谢谢灰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:29:26.927

如果您开始使用新应用程序，则绝对应该使用 Graph API 而不是旧的 Rest API。Rest API 已经被弃用了很长一段时间，并且无法保证 Facebook 会支持它多久。

有关使用 Graph API 的示例，请尝试[http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)

您可以通过以下方式获取好友列表`me/friends`

[您可以使用Graph API explorer](http://developers.facebook.com/tools/explorer)测试其他请求。

# javascript - 使用ajax调用将高图表转换为图像并发送到服务器

> ID：10912104
> 
> 赞同：2
> 
> 时间：2012-06-06T10:05:52.850
> 
> 标签：javascript, json, image, highcharts

我需要使用 ajax 调用将多个图表导出到服务器并将其存储为 pdf。我使用不同的容器在单个页面中呈现多个图表。我需要将它们转换为图像并将它们发送到服务器并将它们导出为单个 pdf 以保存在服务器上。感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:07:19.450

看到这篇文章：[http ://highslide.com/forum/viewtopic.php?f=10&t=10463](http://highslide.com/forum/viewtopic.php?f=10&t=10463)

并且：[http ://highslide.com/forum/viewtopic.php?f=10&t=9239](http://highslide.com/forum/viewtopic.php?f=10&t=9239)

设置服务器端导出有点混乱。很多鸭子要排成一排才能起作用。

# android - Trail期间存储文件的最佳地点/区域

> ID：10912105
> 
> 赞同：4
> 
> 时间：2012-06-06T10:05:56.200
> 
> 标签：android, file, sharedpreferences, trial

我的申请需要有一个试用期（7 天）。由此我了解到，您可以通过保留永久**文件、数据库或共享首选项来做到****[这](https://stackoverflow.com/questions/995719/creating-an-android-trial-application-that-expires-after-a-fixed-time-period)**一点。

 **我在哪里保存该文件，以便*用户无法查看/删除它*。

如果我将该逻辑放在 Sharedpreference 或具有路径“ `data/data/packagename`”的文件中，则在卸载应用程序时，所有历史记录都将丢失。

还有其他解决方法/想法吗？

*注意：没有服务器，应用程序在本地工作，没有互联网。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:14:43.727

我会说更好的解决方法是加密您的文件，然后将其存储在随机位置。这样，即使用户有权访问该文件，他/她也最不可能说出它的目的并无论如何都将其删除。Android 对加密也有很好的支持。

看看这些让你开始：

[Android 加密实现](http://source.android.com/tech/encryption/android_crypto_implementation.html)

[Android 开发者：加密包总结](http://developer.android.com/reference/javax/crypto/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:11:49.450

您可以存储为隐藏，因此用户没有机会删除

看到[这个](https://stackoverflow.com/q/4985904/1289716)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:37:26.497

我想说，使应用程序的数据无法从清单中清除，如下所示：

```
android:manageSpaceActivity="YourStartingActivity" 
```

在应用程序标签中。

现在将应用程序放在数据库或应用程序文件夹中。此解决方案将使您免于清除应用程序数据。现在解决卸载问题。制作一个广播接收器，当从设备上卸载任何应用程序时触发。一旦用户尝试卸载您的应用程序，您就可以通过接收器捕获它并阻止它。这个广播接收器可以在一个单独的类中，比如将与您的应用程序一起安装的 Watcher 类。你可以轻松做到。有很多例子。**

# c# - 当我尝试输出值时它说 System.String[]

> ID：10912107
> 
> 赞同：0
> 
> 时间：2012-06-06T10:06:14.817
> 
> 标签：c#

当我尝试输出约会。类别值时，它说：**System.String []**

但它将所有其他值都输出为纯文本。

我尝试过 ToString()，但这似乎不起作用。

```
myText.InnerHtml += "subject::" + appointment.Subject + "\n";
myText.InnerHtml += "starttime::" + appointment.StartTime + "\n";
myText.InnerHtml += "endtime::" + appointment.EndTime + "\n";
myText.InnerHtml += "categori::" + appointment.Categories + "\n"; 
```

这些是来自 Microsoft [http://msdn.microsoft.com/en-us/library/dd635637(v=exchg.80](http://msdn.microsoft.com/en-us/library/dd635637(v=exchg.80) )的值

如何将 System.String 输出为纯文本？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T10:07:55.650

类别不是一个字符串，而是一个字符串数组，您需要一次打印一个字符串。

代替

```
myText.InnerHtml += "categori::" + appointment.Categories + "\n"; 
```

和

```
foreach(var category in appointment.Categories)
{
    myText.InnerHtml += "categori::" + category  + "\n";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T10:08:09.687

> 如何将 System.String 输出为纯文本？

它*不是*一个`System.String`. 它是一个字符串*数组*。您*想*如何将字符串数组转换为单个字符串？例如，您可以使用：

```
string joined = string.Join(",", appointment.Categories); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:08:19.597

好吧，似乎`appointment.Categories`是一个**字符串数组**而**不是**字符串。您可以使用以下内容：

```
myText.InnerHtml += "categori::" + String.Join(", ", appointment.Categories) + "\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:08:43.767

`System.String[]`或默认情况下字符串数组不会覆盖该`ToString`方法。这就是为什么它在与其他字符串连接时打印类型名称的原因。用于[`String.Join()`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)获取用户友好的字符串表示。

```
string categories = String.Join(", ", appointment.Categories) 
```

`categories`现在包含数组的“Cat1，Cat2，Cat3” `["Cat1", "Cat2", "Cat3"]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T10:10:32.010

只需加入数组

```
myText.InnerHtml += string.Join("categori::", appointment.Categories) + "\n"; 
```

# iphone - NSMutableArray insertObject: atIndex

> ID：10912110
> 
> 赞同：0
> 
> 时间：2012-06-06T10:06:32.343
> 
> 标签：iphone, objective-c, nsmutablearray

我对 NSMutableArray 有疑问。我想创建一个循环来填充 mutableArray 最初为空，但 Xcode 生成两个错误：“从不兼容的类型 'void' 分配给“NSMutableArray””、“不应忽略的 void 值”。这是代码：

```
NSMutableArray * arrayToFill =[[NSMutableArray alloc]init];
int i=0;
while (i<4){
    NSDictionary * dictionary =[[NSDictionary dictionaryWithObjectsAndKeys: @"value1", @"key1",@"value2",@"key2", nil];
    arrayToFill =[arrayToFill insertObject:dictionary atIndex:i];
    i++;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:08:42.457

换行：

```
arrayToFill =[arrayToFill insertObject:dictionary atIndex:i]; 
```

到

```
[arrayToFill insertObject:dictionary atIndex:i]; 
```

不需要再次赋值，调用insert方法即可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:08:56.107

只需删除`arrayToFill =`

```
 NSMutableArray * arrayToFill = [NSMutableArray array];
    for (int i = 0; i < 4; i++){
        NSDictionary * dictionary = [NSDictionary dictionaryWithObjectsAndKeys: @"value1",  @"key1", @"value2", @"key2", nil];
        [arrayToFill insertObject: dictionary atIndex: i ];
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:10:46.940

将第 5 行更改为：

```
[arrayToFill insertObject:dictionary atIndex:i]; 
```

您不必重新分配 arrayToFill

# android - 迭代自定义 ListView

> ID：10912112
> 
> 赞同：0
> 
> 时间：2012-06-06T10:06:37.083
> 
> 标签：android, android-layout, for-loop, android-listview, simpleadapter

我正在尝试创建一个显示事件名称、日期和开始时间的自定义 ListView。

我能够创建 ListView，但是只显示事件的名称。我已经用列表适配器尝试了几次实验，并为每个项目制作了单独的 ArrayLists，但没有奏效。你能告诉我如何在`displaylist()`打印出“事件日期”和“事件时间”的方法中获取for循环中的数据吗？我正在遵循的教程对所有不实用的数据进行硬编码。请点击此链接获取我的应用程序的图片以及我希望显示的内容（位于页面底部）：[查看图片](http://leobee.com/android/push/so/listview.html)

```
public class DataView extends ListActivity{

    FileInputStream inputStream;
    String s = "";
    List<String> eventNames;
    List<String>eventDate;
    List<String>eventStart;
    List<String>eventEnd;
    List<String>eventLocation;
    List<String>eventDelete;

    @Override
    protected void onCreate(Bundle pop) {

        super.onCreate(pop);

        setContentView(R.layout.columns);
        eventNames = new ArrayList<String>();

        eventDate = new ArrayList<String>();
        eventStart = new ArrayList<String>();
        eventEnd = new ArrayList<String>();
        eventLocation = new ArrayList<String>();
        eventDelete = new ArrayList<String>();

        File myFile = new File(getApplicationContext().getFilesDir().getAbsolutePath()+ "/Test.txt");

        DownloadFileAsync FileTask = new DownloadFileAsync();

        FileTask.execute(myFile);

    }// end of onCreate

    private class DownloadFileAsync extends AsyncTask<File, Void, String> {

        @Override
        protected String doInBackground(File... params) {
            // TODO Auto-generated method stub

            File myFile = new File(getApplicationContext().getFilesDir().getAbsolutePath()+ "/Schedule.txt");

            while(!myFile.exists()){
                try {
                    Thread.sleep(1000);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

            File myDir = new File(getApplicationContext().getFilesDir().getAbsolutePath());
            BufferedReader br = null;
            try {
                br = new BufferedReader(new FileReader(myDir + "/Schedule.txt"));

            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try {
                s = br.readLine();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            String result = s;
            return result;
        }// end of do in background

        @Override
        protected void onPostExecute(String result) {

            JSONArray jsonArray;
            try {
                jsonArray = new JSONArray(result);

                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    String eventname =jsonObject.getString("event_name");
                    String eventdate =jsonObject.getString("event_date");
                    String eventstart =jsonObject.getString("event_start");
                    String eventend =jsonObject.getString("event_end");
                    String eventlocation =jsonObject.getString("event_location");
                    String eventdelete =jsonObject.getString("event_delete_flag");

                    Log.v("event web address", eventname+ " "+ eventdate+ " "+eventstart+ " "+eventend+ " "+eventlocation+ " "+eventdelete);
                    eventNames.add(eventname);
                    eventDate.add(eventdate);
                    eventStart.add(eventstart);
                    eventEnd.add(eventend);
                    eventLocation.add(eventlocation);
                    eventDelete.add(eventdelete);

                }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            String[] EventName = new String[ eventNames.size()];
            eventNames.toArray(EventName);

            String[] EventDate = new String[ eventDate.size()];
            eventDate.toArray( EventDate );

            String[] EventStart = new String[ eventStart.size()];
            eventStart.toArray(EventStart);

            String[] EventEnd = new String[ eventEnd.size()];
            eventEnd.toArray( EventEnd);

            String[] EventLocation = new String[ eventLocation.size()];
            eventLocation.toArray(EventLocation);

            String[] EventDelete = new String[ eventDelete.size()];
            eventDelete.toArray( EventDelete);

            displaylist(EventName,EventDate,EventStart,EventEnd,EventLocation, EventDelete);

        }// end of onPostExecute

    }/// end of  DownloadFileAsync
    public void displaylist(String[] EventName, String[] EventDate, String[] EventStart, String[] EventEnd, String[] EventLocation, String[] EventDelete){

        ArrayList<HashMap<String, String>> mylistData =new ArrayList<HashMap<String, String>>();

        int x=(int)EventName.length;
        for(int i=0; i<x; i++)
        {
            HashMap<String,String> map = new HashMap<String, String>();
            //initialize row data
            for(int j=0; j<1; j++)
            {
                map.put("Event Name", EventName[i]);
                map.put("Event Date", EventDate[i]);
                map.put("Event Time", EventStart[i]);

            }
            mylistData.add(map);
        }

        SimpleAdapter arrayAdapter = new SimpleAdapter(this, mylistData, R.layout.mylistrow,new String []{"Event Name", "Event Date","Event Time"} , new int[]{R.id.text1,R.id.text2,R.id.text3});
        setListAdapter(arrayAdapter);

    }

    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        Object o = this.getListAdapter().getItem(position);
        String event = o.toString();
        Toast.makeText(this, "You have chosen event: " + " " + event, Toast.LENGTH_LONG).show();
    }

} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:background="#000fff"
        android:drawSelectorOnTop="false" >
    </ListView>

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FFff00"
        android:text="No data" />

</LinearLayout> 
```

mylistrow.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textColor="#FFFF00"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:textSize="12sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/text3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        android:textStyle="italic"
        android:typeface="sans" />

</LinearLayout> 
```

# windows - 在 Windows 上捕获 SIGINT（和其他信号）

> ID：10912113
> 
> 赞同：4
> 
> 时间：2012-06-06T10:06:37.573
> 
> 标签：windows, perl, signals

为什么这个简单的脚本：

```
#! perl -w

use strict;
use warnings;
$| = 1;

my $LOCKFILE = "$0.lock";

sub mklock {
    open my $lf, ">", $LOCKFILE;
    print $lf $$;
    close $lf;
}

sub rmlock { unlink $LOCKFILE; }

sub clean_exit { rmlock;  exit 0; }

sub work {
    print "working...";
    sleep 10;
    # although `sleep 1 foreach (1..10);`
    # *does* interrupt---between `sleep`s--see my answer
    print "done.\n"
}

$SIG{INT} = "clean_exit";

mklock;
work;
rmlock; 
```

适用于Debian但不适用于Windows？

*   在 Windows 上，此脚本运行时会忽略`Ctrl`+`C`
*   在 Debian 上，按预期执行干净退出
*   ，`$SIG{INT} = \&clean_exit;`行为似乎相同
*   （如果我对`SIGHUP`( `$SIG{HUP} = "clean_exit";`) 做同样的事情，窗口会关闭但不会执行干净退出）

（好吧，我承认它是`perl 5, version 14, subversion 2 (v5.14.2) built for MSWin32-x86-multi-thread`Windows 7 amd64 -vs-`perl, v5.10.1 (*) built for x86_64-linux-gnu-thread-multi`在 Debian 6.0.4 盒子上的草莓，但我怀疑它对这些基本的东西很重要。**编辑：**我刚刚用 ActiveState perl 5.12 在类似的盒子上检查过它，它是一样的，所以显然这个问题并不局限于草莓。）

我知道[perlport](http://perldoc.perl.org/perlport.html#System-Interaction)说得很清楚，

> 不要指望信号或 %SIG 做任何事情。

但必须有办法......（另外，我想了解。）

那么应该做些什么不同的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:47:57.770

您可以使用[`sigtrap`](http://perldoc.perl.org/sigtrap.html)编译指示：

```
use sigtrap 'handler', \&cleanup, 'normal-signals'; 
```

这将在捕获信号时调用该方法`cleanup`并将信号标识作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:34:59.357

在 DOS 应用程序中遵守 unix 行规是一种奢侈，而不是一种权利。

它确实服从`Ctrl+Break`，这是 Ctrl+C 的 windows 等效项

**编辑**更改为 Ctrl+Break - 这是我使用 mac 键盘得到的。

为了测试中断处理的目的，您应该在您的工作子程序中使用以下循环，否则它会等到整个睡眠完成后再触发处理程序：

```
sub work {
    print "working...";
    my $i = 0;
    while ($i < 10) {
       sleep(1);
       $i--;
    }
    say "done."
} 
```

这样，它更容易检测到按键 - 在睡眠过程中不会检测到中断处理。

让我感到困惑 - INT 处理程序现在正在工作！

**编辑**perl 的原始源代码声称它应该支持 HUP 作为关闭窗口事件，但是当我单击 CMD 窗口的关闭时似乎没有传递该事件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:20:54.620

在添加了更多之后`print`，我发现实际上，代码*确实*可以工作，只是它在`sleep`.

因此，仅仅改变`sleep 60`为更“现实”`sleep 1 foreach (1..10);`会带来更多可接受的行为。

当然，它在 Windows 上的工作方式与在 *nix 上的工作方式不同。

# opengl-es - 如何使用 Cocos2d 游戏引擎将 Sprite 裁剪成不规则形状？

> ID：10912119
> 
> 赞同：0
> 
> 时间：2012-06-06T10:06:55.457
> 
> 标签：opengl-es, cocos2d-iphone

如何使用 Cocos2d 游戏引擎将 Sprite 裁剪成不规则形状？我需要以不规则的形状显示图片。不仅是矩形形状或其他一些规则形状，而且是我想要的任何形状。有没有办法将精灵、纹理或图像切割成不规则的形状？

据我所知，没有 API 可以归档目的。也许 OpenGL 是做到这一点的最佳方式，但我不知道如何将其归档并制作成 CCSprite。

我希望有人可以帮助我，因为我真的很需要它。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:38:29.027

我使用 Cocos2d 2.0 的本教程实现了这一点

[http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0](http://www.raywenderlich.com/4428/how-to-mask-a-sprite-with-cocos2d-2-0)

如果您使用的是 1.0，则可以使用这个

[http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0](http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:25:58.007

OpenGL 可以帮助您实现这一点。`draw`您需要对所需形状进行三角测量，然后在您的方法中用您的精灵纹理填充它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T19:12:53.460

你可以使用掩蔽来做这种事情。Cocos2D 社区已经为此目的开发了一些类。[在这个 Cocos2D 线程](http://www.cocos2d-iphone.org/forum/topic/15890)上查看 CCMask或者如 @Ben 引用的文章中所述，您可以使用 Cocos2D 2.0 中的着色器来执行此操作

# iphone - UIView (XIB) 之上的 UIScrollView 和滚动视图不会滚动

> ID：10912121
> 
> 赞同：2
> 
> 时间：2012-06-06T10:07:11.950
> 
> 标签：iphone, objective-c, ios, xcode, xib

在我的 xib 中，我创建了一个 UIView。

我向那个 UIView 添加了一个孩子，它是一个 UIScrollView。scrollView 不会滚动。

**但是** ，如果我将 UIScrollView 拖出 UIView 使它们处于同一级别，那么它将按预期**滚动。**

那么为什么我的滚动视图**在我的 XIB 上的 UIView 内时会停止滚动。**

这是一个错误还是我需要做更多的事情来让滚动视图在 UIView 的孩子滚动时滚动。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:22:29.170

根据 Apple 关于滚动视图的文档..

滚动视图必须知道内容视图的大小，以便知道何时停止滚动；默认情况下，当滚动超出内容范围时，它会“弹回”。

可能，您应该设置它的 contentSize：

```
 [scrollView setContentSize:CGSizeMake(320, 480)]; 
```

由于您的 scrollView 是您的视图的子视图，因此您必须将其内容大小设置为小于您的视图。

另外，不要忘记启用滚动视图。

```
 [scrollView setEnabled:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:25:55.350

`scroll.contentSize= CGSizeMake(320,2000)`设置滚动的内容大小...。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:14:45.593

检查容器 UIView 的`userInteractionEnabled`属性是否为 FALSE。这是唯一的原因，它不允许您在将滚动视图添加到任何 UIView 时滚动。

# c++ - 生成超立方体链接数据

> ID：10912126
> 
> 赞同：3
> 
> 时间：2012-06-06T10:07:32.843
> 
> 标签：c++, bash

^(我正在尝试获得一个生成超立方体链接数据的简单方法（可能是脚本或 c++ 片段），即，给定一个顶点编号为 1, ..., 2 n)的 n 维超立方体，它会产生输出：

```
1 3
1 5
2 3
... 
```

其中每一行代表两个顶点之间的连接。（[相关问题](https://stackoverflow.com/questions/10077008/)）

但在某种不同的背景下。我希望有人已经这样做了。输入应该是超立方体维度。提醒您，两个节点之间存在链接当且仅当它们的节点 id 恰好在一位位置上不同。我的意图是使用 XOR 运算符，当结果可以表示为 2 ^k对于某些 k 时，那么位表示在一个位置上有所不同，我写了一个链接。但是，我不确定如何实现它（C++ 或脚本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:15:45.927

C++ 中的蛮力方法 O(2^(2k))：

```
int n = 32 // or any other power of 2
for(int i = 0; i < n; i++){
   // we check with which vertices is it connected
   for(int j = 0; j < i; j++){
     // we stop when j >= i, because we want to output each unordered pair once
     int u = i ^ j;

     // we check if U is a power of 2, by rounding it up to next power of two and
     // checking if it changed
     int k = u - 1;
     k |= k >> 1;
     k |= k >> 2;
     k |= k >> 4;
     k |= k >> 8;
     k |= k >> 16;

     if(k + 1 == u)
       cout << i << " " << j << endl;
   } 
} 
```

如果您需要更快的解决方案，我建议您尝试递归，因为超立方体的结构本身就是递归的：n 维超立方体由两个 n-1 维超立方体组成，它们仅在一个坐标上不同。以一个正方形为例 - 它由两个在一个坐标上不同的段（一维）组成。

递归解决方案的算法将或多或少像这样（python）：

```
# outputs pair (list of vertices, list of connections beetween them), for n
# dimensional hypercube with vertices starting at x
def hypercube(n, i):
  if n == 1:
    return (i, [])
  v1, e1 = hypercube(n-1, i)
  v2, e2 = hypercube(n-1, i + len(v1))
  return(v1 + v2, zip(v1, v2) + e1 + e2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:58:48.447

这是一个简短的、独立的 C++ 版本，它打印 n 维超立方体的连接顶点：

```
int n = 3;
// examine all vertices from 0...2^n-1
unsigned long long max = 1ULL << n;  
for (unsigned long long vertex = 0; vertex < max; ++vertex) {
  std::cout << vertex << ':';
  // print all vertices that differ from vertex by one bit
  unsigned long long mask = 1;
  for (int shift_amt = 0; shift_amt < n; ++shift_amt) {
    std::cout << ' ' << (vertex ^ (mask << shift_amt));
  }
  std::cout << '\n';
} 
```

当 n 为 3 时的示例输出（假设您可以接受从 0 开始的顶点，而不是 1）：

```
0: 1 2 4
1: 0 3 5
2: 3 0 6
3: 2 1 7
4: 5 6 0
5: 4 7 1
6: 7 4 2
7: 6 5 3 
```

# sql - SQL Server在带有条件的VIEW中添加计算列

> ID：10912127
> 
> 赞同：7
> 
> 时间：2012-06-06T10:07:36.860
> 
> 标签：sql, sql-server-2008, calculated-columns, sql-view

这是我的情况：

在我的表中有两个字段：

```
- Price (decimal (15,4)
- TaxId (int) 
```

`TaxId`value 没有存储在任何地方，但只有两个值（实际上是 3 个）。

```
- 1 (8.5%)
- 2 (20%)
- NULL (no tax) 
```

现在我需要在我的视图中计算列来计算含税的新价格。

任何的想法？

我选择了类似的东西：

```
SELECT...
CASE TaxId
   WHEN 1 THEN Price *1.085 AS test
   WHEN 2 THEN Price *1.2 AS test
   WHEN NULL THEN Price  AS test END
FROM... 
```

更新：

我已成功执行查询。

```
CASE dbo.Table.TaxId WHEN 1 THEN dbo.Table.Price*1.085 WHEN 2 THEN dbo.Table.Price*1.2 ELSE dbo.Table.Price END AS CalcualtedPrice 
```

现在我只需要将 CalculatedPrice 设为十进制 (15,4)。我该如何设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T10:29:13.397

是的，谷歌如何在 SQL Server 中创建视图，并在视图的 SELECT 语句中将 Price 列与 TaxId 列相乘。由于您必须考虑 NULL 值，因此您应该`COALESCE`像这样使用

```
SELECT
Price * (1 + COALESCE(TaxId/100), 0) AS newValue
... 
```

假设您的列中只有“8.5”而不是“8.5%”。是varchar还是不是？

PS：`COALESCE()`返回第一个非空值

**编辑问题后**更新：****

 **你只需要稍微修改你的语法

```
SELECT 
CAST(
CASE 
   WHEN TaxId = 1 THEN Price *1.085
   WHEN TaxId = 2 THEN Price *1.2
   WHEN TaxId IS NULL THEN Price END AS decimal(15,4)
) AS CalculatedPrice
FROM... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T09:00:20.753

如果你计算的字段是数字，它是基于计算的，它可以通过简单的计算直接实现，如下所示。

```
CREATE VIEW [dbo].[TestComputedViewColumn]
AS
SELECT   Tab1.Col1, Tab1.Col2, CONVERT(varchar, Tab1.Col1 + Tab2.Col2) AS 
[ComputedViewColumn]
FROM         Tab1 
GO 
```

如果正在计算的列是字符串，那么它可以使用 sql CASE。下面是一个布尔列被计算为“YES”或“NO”的示例

```
select CASE dbo.table1.Payment WHEN 1 THEN 'Yes' ELSE 'No' END AS 
PaymentText from dbo.table1 
```**

# c - 打印浮点数的整数部分

> ID：10912128
> 
> 赞同：4
> 
> 时间：2012-06-06T10:07:44.350
> 
> 标签：c, string, floating-point, floating-accuracy

我试图弄清楚如何在不使用库函数的情况下打印浮点数。打印浮点数的小数部分非常容易。打印整体部分更难：

```
static const int base = 2;
static const char hex[] = "0123456789abcdef";

void print_integral_part(float value)
{
    assert(value >= 0);
    char a[129]; // worst case is 128 digits for base 2 plus NUL
    char * p = a + 128;
    *p = 0;
    do
    {
        int digit = fmod(value, base);
        value /= base;
        assert(p > a);
        *--p = hex[digit];
    } while (value >= 1);
    printf("%s", p);
} 
```

`FLT_MAX`使用 base 2 和 base 16 完美打印作品的组成部分：

```
11111111111111111111111100000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000 (base 2)

ffffff00000000000000000000000000 (base 16) 
```

但是，以 10 为基数打印会导致前 7 位数字后出现错误：

```
340282368002860660002286082464244022240 (my own function)
340282346638528859811704183484516925440 (printf) 
```

我认为这是除以 10 的结果。如果我使用 double 而不是 float，效果会更好：

```
340282346638528986604286022844204804240 (my own function)
340282346638528859811704183484516925440 (printf) 
```

（如果您不相信`printf`，请进入`2^128-2^104`Wolfram Alpha。它是正确的。）

现在，如何`printf`设法打印正确的结果？它是否在内部使用了一些 bigint 设施？还是我缺少一些浮点技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:34:35.690

我相信问题出在`value /= base;`. 不要忘记 10 在二进制系统中不是有限分数，因此这种计算永远不会正确。`fmod`我还假设由于相同的原因会发生一些错误。

`printf`将首先计算积分部分，然后将其转换为十进制（如果我`printf`正确理解了积分部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:45:49.787

/编辑：首先阅读[Unni的答案](https://stackoverflow.com/a/10913132/1059969)。此结果来自[http://codepad.org/TLqQzLO3](http://codepad.org/TLqQzLO3)。

```
void print_integral_part(float value)
{
    printf("input : %f\n", value);
    char a[129]; // worst case is 128 digits for base 2 plus NUL
    char * p = a + 128;
    *p = 0;
    do
    {
        int digit = fmod(value, base);
        value /= base;
        printf("interm: %f\n", value);
        *--p = hex[digit];
    } while (value >= 1);
    printf("result: %s\n", p);
}

print_integral_part(3.40282347e+38F); 
```

看看你的价值是如何被操作弄乱的`value /= base`：

```
input : 340282346638528859811704183484516925440.000000
interm: 34028234663852885981170418348451692544.000000
interm: 3402823466385288480057879763104038912.000000
interm: 340282359315034876851393457419190272.000000
interm: 34028234346940236846450271659753472.000000
interm: 3402823335658820218996583884128256.000000
interm: 340282327376181848531187106054144.000000
interm: 34028232737618183051678859657216.000000
interm: 3402823225404785588136713388032.000000
interm: 340282334629736780292710989824.000000
interm: 34028231951816403862828351488.000000
interm: 3402823242405304929106264064.000000
interm: 340282336046446683592065024.000000
interm: 34028232866774907300610048.000000
interm: 3402823378911210969759744.000000
interm: 340282332126513595416576.000000
interm: 34028233212651357863936.000000
interm: 3402823276229139890176.000000
interm: 340282333252413489152.000000
interm: 34028234732616232960.000000
interm: 3402823561222553600.000000
interm: 340282356122255360.000000
interm: 34028235612225536.000000
interm: 3402823561222553.500000
interm: 340282366859673.625000
interm: 34028237357056.000000
interm: 3402823735705.600098
interm: 340282363084.799988
interm: 34028237619.200001
interm: 3402823680.000000
interm: 340282368.000000
interm: 34028236.800000
interm: 3402823.600000
interm: 340282.350000
interm: 34028.234375
interm: 3402.823438
interm: 340.282349
interm: 34.028235
interm: 3.402824
interm: 0.340282
result: 340282368002860660002286082464244022240 
```

如有疑问，请向其添加更多 printfs ;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:17:47.627

根据 IEEE 单精度浮点实现，任何时候都只有 24 位数据存储在浮点变量中。这意味着浮点数中最多只能存储 7 个十进制数字。

其余的巨大数字存储在指数中。FLT_MAX 初始化为 3.402823466e+38F。因此，在第 10 位精度之后，应该打印哪个数字在任何地方都没有定义。

从 Visual C++ 2010 编译器，我得到这个输出 340282346638528860000000000000000000000.000000，这是唯一有效的输出。

所以，最初我们有这么多有效数字 3402823466 所以在第一次除法之后我们只有 0402823466 所以，系统需要去掉左边的 0 并在右边引入一个新数字。在理想的整数除法中，它是 0。因为您正在进行浮点除法 (value /= base;) ，系统正在获取其他数字来填充该位置。

因此，在我看来，printf 可以将上述可用的有效数字分配给一个整数并使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T10:50:33.347

看起来浮点到字符串转换的工作马是`dtoa()`函数。请参阅newlib 中的[dtoa.c](https://cygwin.com/git/gitweb.cgi?p=newlib-cygwin.git;a=blob_plain;f=newlib/libc/stdlib/dtoa.c)了解他们是如何做到的。

> 现在， printf 如何打印正确的结果？

我认为它接近于魔法。至少来源看起来像是某种黑暗的咒语。

> 它是否在内部使用了一些 bigint 设施？

是的，`_Bigint`在链接的源文件中搜索。

> 还是我缺少一些浮点技巧？

可能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T18:48:44.293

让我们再解释一次。在整数部分被打印（准确）之后，除了向 0 切入之外没有任何舍入，现在是小数位的时候了。

从一串包含二进制零的字节（比如 100 开始）开始。如果 fp 值中小数点右边的第一位被设置，则意味着 0.5 (2^-1 或 1/(2^1) 是分数的一个组成部分。所以在第一个字节上加 5。如果下一位设置为 0.25 (2^-2 或 1/(2^2)) 是分数的一部分，第二个字节加 5，第一个字节加 2（哦，别忘了进位，它们会发生 -初中数学）。下一个位集表示 0.125，因此第三个字节加 5，第二个字节加 2，第一个字节加 1。依此类推：

```
 value          string of binary 0s
start 0              0000000000000000000 ...
bit 1 0.5            5000000000000000000 ...
bit 2 0.25           7500000000000000000 ...
bit 3 0.125          8750000000000000000 ...
bit 4 0.0625         9375000000000000000 ...
bit 5 0.03125        9687500000000000000 ...
bit 6 0.015625       9843750000000000000 ...
bit 7 0.0078125      9921875000000000000 ...
bit 8 0.00390625     9960937500000000000 ...
bit 9 0.001953125    9980468750000000000 ...
... 
```

我是手工完成的，所以我可能遗漏了一些东西，但是在代码中实现它是微不足道的。

因此，对于所有那些“无法使用浮点数获得精确结果”的人来说，不知道他们在这里谈论什么的人证明了浮点分数是完全精确的。极其精确。但是二进制。

对于那些花时间了解其工作原理的人来说，更好的精度是触手可及的。至于其他人......好吧，我想他们会继续不浏览论坛来回答以前已经回答过无数次的问题，老实说，他们已经发现了“破碎的浮点”（或任何他们所说的）并每天发布同一问题的新变体。

“接近魔法”、“黑暗咒语”——太搞笑了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-12T05:25:11.000

该程序将为您工作。

```
#include<stdio.h>
int main()
{
    float num;
    int z;
    scanf("%f",&num);
    z=(int)num;
    printf("the integral part of the floating point number is %d",z);
} 
```

# ajax - Ajax 确定表单的id

> ID：10912130
> 
> 赞同：1
> 
> 时间：2012-06-06T10:07:54.833
> 
> 标签：ajax, codeigniter

我在一页上有多个表单，我在我的 CodeIgniter 应用程序中使用 ajax 来确定每次提交表单后显示哪些表单。无论如何，我已经用 id 标记了每个表单，因此我可以检查提交了哪个表单，并且我正在使用 ajax 重命名表单但是我需要一个默认表单名称，但我不确定我是如何做到这一点的？

```
$.ajax({                  
   url:$(this).attr('action'),
   type:'POST',
   // this is where I have added a function to put in a default response                
   data:function(respond) {
      if(respond.result == 'false') {
         var form = "form#part-one";
      } else {
         var form = respond.form;
      }
      $(form).serialize(),
   }
   dataType:'json',
   success:function(respond) {
      if(respond.result == 'false') {
         $('#error_messages').html(respond.errors);                 
      } else {
         $('#error_messages').html('');
      }
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:40:01.473

我不太清楚您要做什么，但是如果您需要从表单中传递一个变量，我建议这样做。

```
$('form').submit(function(e) {
   e.preventDefault();
   var formId = $(this).attr('data-id');
   // ajax goes here
});

<form name="common_name" data-id="2">
<input type="submit" value="Go">
</form> 
```

对于添加到 HTML 标签的任何变量，我建议您始终在其中使用“data-”，以便它们符合 HTML。

希望这可以帮助。

# java - 将 JSONArray 转换为 JSONObject 数组

> ID：10912131
> 
> 赞同：1
> 
> 时间：2012-06-06T10:07:55.553
> 
> 标签：java, json

我有 JSONArray 如下：

```
[["title","details"],["abc","xyz"],["abc2","xyz2"]] 
```

如何使用 Java /JavaScript 转换为 JSONObject 数组，如下所示？

```
[ { 'title': abc,  'details':xyz,}, {'title': abc2, 'details':xyz2}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:15:23.947

我现在已经找到了解决方法。仍在寻找内置功能或具体实现。

```
String inputStr = "[[\"title\",\"details\"],[\"abc\",\"xyz\"],[\"abc2\",\"xyz2\"]]";

try {
    JSONArray inputArray = new JSONArray(inputStr);
    JSONArray outputArray = new JSONArray();

    for (int i = 0; i < inputArray.length(); i++) {
        JSONArray inArr = inputArray.getJSONArray(i);
        for (int j = 0; j < inArr.length(); j++) {
            if (i != 0) {
                outputArray.put(new JSONObject().put(
                        inputArray.getJSONArray(0).getString(j), inArr.get(j)));
            }
        }
    }
    System.out.println("outputArray = " + outputArray.toString());
} catch (JSONException jse) {
    System.out.println("jse = " + jse.toString());
} 
```

输出：

```
outputArray = [{"title":"abc"},{"details":"xyz"},{"title":"abc2"},{"details":"xyz2"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:37:15.423

下面的代码是从[这里](https://stackoverflow.com/questions/1117916/merge-keys-array-and-values-array-into-an-object-in-javascript)的解决方案修改的，以允许传递多个值数组。

```
function makeObject(keys, array) {
    var output = [];
    for (var o = 0; o < array.length; o++) {
        var object = {};
        for (var i = 0; i < array[o].length; i ++ ) {
         object[keys[i]] = array[o][i];
        }
        output.push(object);
    }
    return output;
}

// input array
var array = [["title","details"],["abc","xyz"],["abc2","xyz2"]];    

// extract keys leaving only values in array
var keys = array.shift();

// build object
var output = makeObject(keys, array); 
```

示例：http: [//jsfiddle.net/u54tT/1/](http://jsfiddle.net/u54tT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:39:57.930

这是你想要的 ？

```
jQuery.parseJSON( json ) Returns: Object 
```

描述：采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。 [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:42:33.837

如果我正确理解了这项任务，则没有任何方法可以完成这项工作，因为这似乎有点不重要。所以你应该编写自己的转换..

# java - 休眠（或不休眠）：查询先前填充的 Iterable

> ID：10912133
> 
> 赞同：1
> 
> 时间：2012-06-06T10:07:59.600
> 
> 标签：java, hibernate, filtering, iterable

假设这些是我的实体：

*表1.java*

```
@Entity
public class Table1 {

    // Many to one
    private Table2 table2;

    // Raw attributes
    // ...

} 
```

*表2.java*

```
@Entity
public class Table2 {

    // Many to one
    private Table3 table3;

    // Raw attributes
    // ...

} 
```

*表3.java*

```
@Entity
public class Table3 {

    // Raw attributes
    private String lang; // "fr", "en", "de"...

} 
```

当我想列出属性为的所有行时`Table1`，我这样做：`table2.table3.lang``en`

```
Query query = entityManager.createQuery("SELECT t1 FROM Table1 t1 WHERE t1.table2.table3.lang = :lang");
query.setParameter("lang", "en"); 
```

也就是说，我怎样才能对先前填充的查询执行该查询`Iterable<Table1>`？只有可行吗？如果不使用 Hibernate，那么使用什么？例如，即使我知道下面的代码不起作用，例如：

```
Set<Table1> set = new HashSet<Table1>();
set.add(new Table1(INIT_DEFAULT_VALUES));
set.add(new Table2(INIT_DEFAULT_VALUES));
set.add(new Table3(INIT_DEFAULT_VALUES));

Query query = entityManager.createQuery("SELECT t1 FROM :set t1 WHERE t1.table2.table3.lang = :lang");
query.setParameter("set", set);
query.setParameter("lang", "en"); 
```

对于那些想知道为什么我需要这样的东西的人，我正在使用[Apache Lucene](http://lucene.apache.org/core/)在行中执行用户的搜索，这些`Table1`行之前也由 Lucene 索引。一旦我得到一些结果，我必须在返回的列表上提出一些过滤器/排序，例如选择链接`Table3`实体的语言。

任何建议将不胜感激`:)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:19:01.950

Hibernate 查询被翻译成 SQL 查询并在数据库中执行。如果该集合包含不在数据库中的实体实例，则 Hibernate 无法查询它们。

如果这些实体实际上是数据库中的实体，正如您所指出的，那么您可能只使用一个`IN`子句：

```
Set<Long> ids = createSetOfIdsFromEntities(set);
String hql = select t1 FROM Table1 t1 WHERE t1\. id in (:ids) and t1.table2.table3.lang = :lang";
... 
```

但是请确保您没有太多的 ID，并且您没有达到数据库施加的限制（例如，Oracle 将 IN 子句的元素限制为 1000）。

如果这些实体已经加载到内存中，您也可以遍历它们：

```
Set<Table1> found = new HashSet<Table1>();
for (Table1 t1 : set) {
    if (t1.getTable2().getTable3().getLang().equals(theLang)) {
        found.add(t1);
    }
} 
```

# c# - 发现任何 Windows 服务的安装目录

> ID：10912137
> 
> 赞同：0
> 
> 时间：2012-06-06T10:08:13.883
> 
> 标签：c#, service

我有一个 Windows 服务，它可以在工作站上获取所有已安装的服务。现在我想获取特定服务的可执行文件的位置。路径必须是绝对的。我怎样才能以编程方式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:25:39.647

我不太了解 .net 接口，但如果您找不到可以读取每个服务的注册表值的方法：LocalMachine/System/CurrentControlSet/Services/ *SERVICENAME* ，然后您需要访问显示完整路径（如果不是绝对路径，则基本路径是 Windows 主文件夹）

我也找到了一个例子：http: [//bytes.com/topic/c-sharp/answers/268807-get-path-install-service](http://bytes.com/topic/c-sharp/answers/268807-get-path-install-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T14:56:01.453

我最近需要这个，这就是我创建的。鉴于，在此代码中我检查匹配`imagePath`但它可以很容易地修改为返回`imagePath`，它已经返回匹配的服务名称。您可以在此循环中`{foreach (string keyName...}`检查`keyName`并返回`imagePath`。像魅力一样工作，但请记住，会有安全和用户访问方面的考虑。如果用户没有访问权限，它可能会失败。我的用户“以管理员身份”运行它，从这个意义上说我没有问题

```
// currPath - full file name/path of the exe that you trying to find if it is registered as service
// displayName - service name that you return if you find it
private bool TryWinRegistry(string currPath, out string displayName)
{
    displayName = string.Empty;

    try
    {
        using (RegistryKey regKey = Registry.LocalMachine.OpenSubKey("SYSTEM\\CurrentControlSet\\services", false))
        {
            if (regKey == null)
                return false;

         // we don't know which key because key name is configured by config file and equals to service name
            foreach (string keyName in regKey.GetSubKeyNames())
            {
                try
                {
                    using (RegistryKey serviceRegKey = regKey.OpenSubKey(keyName))
                    {
                        if (serviceRegKey == null)
                            continue;

                        string val = serviceRegKey.GetValue("imagePath") as string;
                        if (val != null && String.Equals(val, currPath, StringComparison.OrdinalIgnoreCase))
                        {
                            displayName = serviceRegKey.GetValue("displayName") as string;
                            return true;
                        }

                    }
                }
                catch
                {
                }

            }
        }
    }
    catch
    {
        return false;
    }

    return false;
} 
```

# iphone - 如果CALayer的display调用UIView的drawRect，那为什么drawRect调用的频率更高呢？

> ID：10912138
> 
> 赞同：2
> 
> 时间：2012-06-06T10:08:16.113
> 
> 标签：iphone, ios, ipad, uiview, calayer

据我所知，什么时候`drawRect`调用 UIView？由 CALayer`display`调用`drawInContext`or调用`drawLayer:InContext`，然后调用`UIView`'s `drawRect`。

但同时，我知道`drawRect`调用的频率比调用的频率高`display`，例如，当应用程序启动时，`drawRect`会调用，但`display`不会调用，所以我们需要调用`setNeedsDisplay`layer 来绘制它。

但是这两个想法是相互冲突的：如果`drawRect`被`display`间接调用（通过`drawInContext`或`drawLayer:InContext`），那么无论何时`drawRect`被调用，`display`也应该已经被调用。所以，按照这个逻辑，`display`至少和 一样经常被调用`drawRect`，但是这张图片有什么问题呢？

# ajax - 通过静态文件提供动态内容

> ID：10912140
> 
> 赞同：0
> 
> 时间：2012-06-06T10:08:18.587
> 
> 标签：ajax, django, apache, file

我正在开发一个本质上高度动态的 Django 1.3.1 网站。在许多页面上，某些元素必须每 10-20 秒刷新一次。我们为此使用 AJAX 请求。

现在，在后端，每个 AJAX 都通过执行数据库查询或可能来自缓存（我预计 95% 的时间来自缓存）来处理。我们正在考虑更改方法，改为将更新放到 Web 服务器提供的某些文件中。然后，不再使用 Django，而是通过提供文件来处理 AJAX。如果有必要，后端会负责更新文件（这些文件非常小；几个数字）。

有没有人尝试过这样的事情？您可以看到哪些可能的缺点（例如来自并发读/写文件访问）？是否有可能从这种方法中获得一些性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:28:35.377

为什么要将数据库中的常用数据放到静态文件中。如果您想快速渲染，请查看 MEMCAHED ...我想这会让您满意。下方链接：

[MEMCAHCED](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#memcached)

# html - three.js 阴影截止

> ID：10912143
> 
> 赞同：8
> 
> 时间：2012-06-06T10:08:26.440
> 
> 标签：html, canvas, webgl, three.js

正如标题所说。当我渲染当前场景时，一切正常。只有白猴的影子被切断了。这怎么会发生，是否有解决方案？

这是网站：[http](http://hammer.bz/test/) ://hammer.bz/test/ 和一个屏幕；）
[http://i.stack.imgur.com/6jd0h.png](https://i.stack.imgur.com/6jd0h.png)

我想这与相机或灯光有关..所以它们是：

```
renderer.shadowMapEnabled   = true;
renderer.sortObjects = false;
renderer.shadowMapWidth = 3072;
renderer.shadowMapHeight = 3072
renderer.shadowCameraNear = 2;
renderer.shadowCameraFar = 40000;
renderer.shadowCameraFov = 50;
renderer.shadowMapBias = -0.00022;
renderer.shadowMapDarkness = 0.55;
renderer.shadowMapSoft      = true;
renderer.physicallyBasedShading = true;
renderer.setClearColorHex( 0x999999, 1 );

camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.1, 40000 );
camera.position.x = x;
camera.position.y = y;
camera.position.z = z;  
camera.rotation.x = -0.8;
scene.add( camera );

var light = new THREE.DirectionalLight( 0xffffff, 1 );
light.position.set( -2, 5, 2 ).normalize();
light.shadowCameraNear  = 0.01;
light.shadowCameraFar   = 1000000;
light.castShadow        = true;
light.shadowDarkness        = 0.5;
light.shadowCameraVisible   = false;
scene.add( light ); 
```

提前致谢！
布拉姆

编辑：明白了：

只是使用`THREE.SpotLight`。这是一个愚蠢的问题。

只需戴上`shadowCameraVisible = true;`即可看到光线，它会起作用。现在对这个问题感到有点愚蠢哈哈；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:11:04.960

只是使用`THREE.SpotLight`。

只需戴上`shadowCameraVisible = true;`即可看到光线，它会起作用。Offcourse你需要设置位置`position.set(x, y, z);`

# c++ - 将文件从 Windows Qt 应用程序传输到 Linux 并执行

> ID：10912144
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:08:26.903
> 
> 标签：c++, qt

**项目背景**-> 我必须远程升级 Linux 嵌入式系统。这需要将 tar 球文件从 Windows Qt 应用程序传输到通过以太网电缆连接的 Linux 盒子。Linux 机器有固定的 IP 地址。

**到目前为止我所做的**-> 作为 Qt 的完全新手，我创建了一个对话框来浏览文件并检查 tar 球文件。

**问题**-> 现在我希望当我单击另一个按钮时，比如*Upgrade*，它应该将文件从 Windows 传输到 Linux 框（具有固定 IP 地址）并执行包含如何升级不同文件的代码的 bash 脚本。

请问各位大神，我将如何将文件从 Windows 发送到 Linux 机器。我查看了 Qt 的 FTP 客户端，我猜它下载文件而不是传输文件。

谢谢和问候，
山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:17:49.347

QFtp 和 QNetworkAccessManager 类都可以将文件上传到 FTP 服务器。QNetworkAccessManager 类比 QFtp 更适合您的工作。但是，它需要在您的 linux 机器上进行特定设置。
您还可以使用 TCP Socket 连接传输文件（请参阅类[QTcpServer](http://qt-project.org/doc/qt-4.8/qtcpserver.html)和[QTcpSocket](http://qt-project.org/doc/qt-4.8/qtcpsocket.html)），这也需要在 linux 上运行其他应用程序。因此，如果您想自动化该过程，我想您可以编写一个 Qt 应用程序，将文件上传到您的 linux 机器上运行的 FTP 服务器上，或者创建两个可以作为客户端和服务器工作的简单应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:05:49.300

1）我的批处理脚本说 upgrade.bat 接受 2 个参数，如 ip 地址，升级 tar 球，然后使用 putty.exe 将文件传输到通过以太网电缆连接的 linux 机器。
bat 脚本中的示例

> pscp -pw "blabla" "%TARGET_UPDATE_FILE%" user@"%TARGET_IP%":"%BASE_DIR%"/

其中 target_update_file = tar 球文件从 Qt 接受，目标 ip = ip 地址作为参数从 qt 接收到 bat 文件。

现在在 qt 上，在升级按钮代码中

```
void Qt_test::ReadOut()     
{       
     QProcess *processInfo = dynamic_cast< QProcess* >( sender() );

   if( processInfo )
     {
       ui->upgrade_info->append( processInfo->readAllStandardOutput() );
     }        
 }    

void Qt_test::ReadError()
{
     QProcess *processInfo = dynamic_cast< QProcess* >( sender() );

    if( processInfo )
   {
       ui->upgrade_info->append( processInfo->readAllStandardError() );
   }
 }

void Qt_test::on_file_browse_clicked()
{
     ui->selected_file->setText( QFileDialog::getOpenFileName( this, tr( "Open File" ),
                                                        "/home",
                                                        tr( "Upgrade file ( *.tar.gz )"     ) ) );
 }

void  Qt_test::on_file_upgrade_clicked()
 {
        QFileInfo upgradeFileInfo( ui->selected_file->text() );
        if( !upgradeFileInfo.exists() )
       {
             QMessageBox::information( this, tr( "Information" ),
                             tr( "Unable to find file for upgrading!" ) );
            return;
       }     

    QString batchPath= QDir::currentPath() + "\\testUpgrade.bat" ;
    QFileInfo batchFile( batchPath ) ;
    if( !batchFile.exists() )
    {
             QMessageBox::information( this, tr( "Information" ),
                             tr("Failed to find the upgrade batch file....... ") ) ;
         return;
     }

    //Check if cmd.exe is present in Clients system and is located at correct path
       QFileInfo cmdFile( "C:\\Windows\\system32\\cmd.exe");
     if( !cmdFile.exists() )
      {
           QMessageBox::information( this, tr( "Information" ),
                             tr("Failed to find the cmd.exe ... Check cmd.exe is   installed and is in  C:\\Windows\\system32\\ !") ) ;
          return;
      }

     QFileInfo puttyFile( "C:\\Windows\\system32\\putty.exe");
     if( !puttyFile.exists() )
     {
           QMessageBox::information( this, tr( "Information" ),
                              tr("Failed to find the putty.exe ... Check putty.exe(ideally version 0.62.0.0) is installed and is in  C:\\Windows\\system32\\ !") ) ;
          return;
     }

      QFileInfo plinkFile( "C:\\Windows\\system32\\plink.exe");
     if( !plinkFile.exists() )
     {
          QMessageBox::information( this, tr( "Information" ),
                              tr("Failed to find the plink.exe ... Check plink.exe(ideally version 0.62.0.0) is installed and is in  C:\\Windows\\system32\\ !") ) ;
          return;
     }

    QString upgradeFile =   upgradeFileInfo.absoluteFilePath();
   QString ipAddress   =   ui->selected_ip->text();
    qDebug() << " checksum valu is " <<checkSum.count() ;
    QStringList arguments ;

    arguments << " /c" << batchFile.absoluteFilePath()<< upgradeFile << ipAddress ;
   // copying update
   QProcess *processUpgrade = new QProcess( this );
   if( processUpgrade )
    {   std::cout <<" starting to upgrade " << std::endl ;

       processUpgrade->setEnvironment( QProcess::systemEnvironment() )  ;
       processUpgrade->setProcessChannelMode( QProcess::MergedChannels ) ;

        processUpgrade->start( cmdFile.absoluteFilePath(), arguments ) ;
        processUpgrade->waitForStarted() ;
        connect( processUpgrade, SIGNAL( readyReadStandardOutput() ), this, SLOT( ReadOut() ) ) ;
          connect( processUpgrade, SIGNAL( readyReadStandardError()  ), this, SLOT( ReadErr() ) ) ;
  }
 } 
```

# sql - 如何用最接近的值四舍五入时间

> ID：10912146
> 
> 赞同：0
> 
> 时间：2012-06-06T10:08:33.353
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

例如

表格1

```
time

01:02
00:02
02:37
02:58
.... 
```

时间格式为`HH:MM`

我想用最接近的值四舍五入时间。喜欢

```
01 to 04 means 00 only, 05 to 09 means 05 only, 10 to 14 means 10 only..... 55 to 59 means 55 only, 01:00 to 01:04 means 01:00 only.... 
```

预期产出

表格1

```
time

01:00
00:00
02:35
02:55
.... 
```

如何查询上述条件。

需要查询帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:13:15.740

```
select substring([time], 1, 3) + 
       right(rtrim(('0' + cast(substring([time], 4, 2) / 5 * 5 as CHAR))), 2)
from table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T07:58:40.797

```
SELECT
  CONVERT(
    char(5),
    DATEADD(MINUTE, DATEDIFF(MINUTE, 0, time) / 5 * 5, 0),
    108
  ) AS time
FROM Table1 
```

# c - 将大型结构转储到文本文件的一些智能方法

> ID：10912148
> 
> 赞同：1
> 
> 时间：2012-06-06T10:08:40.473
> 
> 标签：c, file, struct, structure, asn.1

我正在编写一段代码，用于将 ASN.1 BER 二进制转换为 CSV 文本。我的所有 ASN 类型都有（相当大的）结构，这些结构要写入输出文本文件。现在我可以使用正常的方法一个一个地编写元素（因为输出文件必须是纯文本），但我正在寻找一些聪明的方法来处理这个问题。我希望我能得到一些提示/技巧和建议来做到这一点。

样本结构（实际结构*要大得多*）：

```
typedef struct
{
    unsigned    short   intrecordType;
    unsigned    long    long    int  callingNumber;
    unsigned    long    long    int  calledNumber;
    char recordingEntity[7];
    char mscIncomingTKGP[4];
    char mscOutgoingTKGP[4];
    char seizureTime[9];
    char answerTime[9];
    char releaseTime[9]
    struct 
    {
        int gsm0408Cause;
        int gsm0902MapErrorValue;
        int ccittQ767Cause;
        int networkSpecificCause;
        int manufacturerSpecificCause;
    } diagnostics;
    unsigned    long    long    int  callReference;
    int  sequenceNumber;
    int  lastLongPartInd;
    int  recordExtensions;
    char  exchangeIdentity[MAX_IA5STRING_SIZE];
} IncGatewayRec; 
```

有 33 个这样的结构（每个结构大约 60-70 个元素）及其相应的用于存储标志的结构，注意哪些字段已填充，哪些未填充（相同的结构，只有`unsigned short int`用于存储标志的所有数据类型）

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:12:46.520

编写一个解析结构声明并生成打印函数的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:44:53.100

如果打印解码消息的常规功能不足以满足您的需求，一些商业 ASN.1 工具（例如来自[OSS Nokalva的工具）可以让您将 fprintf() 函数替换为您自己的功能。](http://www.oss.com)考虑下载 OSS ASN.1 工具的免费试用版，看看它是否适合您。

# java - HttpClient 获取状态码

> ID：10912151
> 
> 赞同：41
> 
> 时间：2012-06-06T10:08:45.943
> 
> 标签：java, apache-httpclient-4.x

使用 Apache HttpClient 4.1.3 并尝试从以下位置获取状态代码`HttpGet`：

```
HttpClient client = new DefaultHttpClient();
HttpGet response = new HttpGet("http://www.example.com");
ResponseHandler<String> handler = new BasicResponseHandler();
String body = client.execute(response, handler); 
```

**如何从中提取状态码（202、404 等）`body`？**或者，如果在 4.1.3 中有另一种方法可以做到这一点，那是什么？

此外，我假设一个完美/良好的 HTTP 响应是一个`HttpStatus.SC_ACCEPTED`但也希望对此进行确认。提前致谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-06T10:17:25.033

**编辑：**

尝试：

```
HttpResponse httpResp = client.execute(response);
int code = httpResp.getStatusLine().getStatusCode(); 
```

HttpStatus 应该是 200 ( `HttpStatus.SC_OK`)

（我读得太快了这个问题！）

* * *

尝试：

```
GetMethod getMethod = new GetMethod("http://www.example.com");
int res = client.executeMethod(getMethod); 
```

这应该可以解决问题！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T19:33:42.513

这个怎么样？

```
HttpResponse response = client.execute(getRequest);

// Status Code
int statusCode = response.getStatusLine().getStatusCode();

ResponseHandler<String> responseHandler = new BasicResponseHandler();
// Response Body
String responseBody = responseHandler.handleResponse(response); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T10:33:02.783

我这样做：

```
HttpResponse response = client.execute(httppost);
int status = response.getStatusLine().getStatusCode(); 
```

为了通过不使用 responseHandler 将 respose 主体作为 String 获取，我首先将其作为 InputStream 获取：

```
InputStream is = response.getEntity().getContent(); 
```

然后将其转换为字符串（如何在[此处](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)执行此操作）

# objective-c - 简化 Objective-C 中的循环

> ID：10912154
> 
> 赞同：0
> 
> 时间：2012-06-06T10:08:59.397
> 
> 标签：objective-c, loops, nested

我的代码中有这个巨大的循环（不是自愿的），因为我似乎无法让它以任何其他方式工作。如果有某种方法可以让这个简单，而不是我重复 +20 次，那就太好了，谢谢。

```
for (NSUInteger i = 0; i < 20; i++) {
     if (a[0] == 0xFF || b[i] == a[0]) {
         c[0] = b[i];
         if (d[0] == 0xFF) {
             d[0] = c[0];
         }

         ... below repeats +18 more times with [i+2,3,4,etc] ...

         if (a[1] == 0xFF || b[i + 1] == a[1]) {
             c[1] = b[i + 1];
             if (d[1] == 0xFF) {
                 d[1] = c[1];
             }

           ... when it reaches the last one it calls a method ...

           [self doSomething];
           continue;
           i += 19;

          ... then } repeats +19 times (to close things)...
      }
   } 
} 
```

我已经尝试了几乎所有我知道的试图使这个更小和更高效的组合。看看我的流程图——漂亮吧？我不是疯子，老实说。

![流动的oldskool风格](../Images/4f00318dde4ec8fc94d94612d3884ea7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:21:05.057

如果我没有记错：

```
for (NSUInteger i = 0; i < 20; i++) {
    BOOL canDoSomething = YES;

    for (NSUInteger j = 0; j < 20; j++) {
        if (a[j] == 0xFF || b[i+j] == a[j]) {
            c[j] = b[i+j];
            if (d[j] == 0xFF) {
                d[j] = c[j];
            }
        }
        else {
            canDoSomething = NO;
            break;
        }
    }

    if (canDoSomething) {
         [self doSomething];   
         break;     
         // according to your latest edit: continue; i+=19; 
         // continue does nothing as you use it, and i+=19 makes i >= 20
    }
} 
```

这就是你的代码所做的。但看起来它会导致索引超出范围异常。也许嵌套循环的子句应该看起来像

```
for (NSUInteger j = 0; i+j < 20; j++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:31:12.187

You want to use recursion.

Declare another method:

```
-(BOOL)doSthWithA:(int*)a B:(int*)b C:(int*)c D:(int*)d Integer:(int)j AnotherInteger:(int)i {

  // end of recursion 
  if(j == 20) {
    return YES;
  }

  if (a[j] == -0x1 || b[i+j] == a[j]) {
     c[j] = b[i+j];
     if (d[j] == -0x1) {
         d[j] = c[j];
     }
     return doSthWithA:a B:b C:c D:d Integer:j+1 AnotherInteger:i;
  }
  else return NO;
} 
```

and in your code:

```
for (NSUInteger i = 0; i < 20; i++) {
  if(doSthWithA:a B:b C:c D:d Integer:0 AnotherInteger:i;) {
    [self doSomething];  
    i+=19;
  }
} 
```

It probably can be all done better, but that translates your code into a more compact form.

# c# - 使用批处理文件的控制台应用程序设置

> ID：10912157
> 
> 赞同：0
> 
> 时间：2012-06-06T10:09:12.113
> 
> 标签：c#, .net, batch-file

我创建了一个控制台应用程序，它通过从数据库中选择他们的电子邮件地址来向人们发送电子邮件。我已经使用实体框架进行数据库连接。我在 app.config 中存储了连接字符串和 SMTP 设置。我从批处理文件中调用了这个应用程序 exe。我已经从批处理文件中调用了这个控制台应用程序的 exe 文件。我已经为客户提供了 exe 和批处理文件。此 exe 使用我的 gmail smtp 设置和连接字符串。客户端如何更新此 EXE 的连接字符串和 SMTP 设置？当 app.config 中的设置发生更改时，批处理文件中是否有任何选项来构建 exe？请建议。

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:12:58.160

.NET 配置功能的全部目的是您不必*重新* 构建应用程序。

当您正确使用应用程序设置时，`xyz.exe.config`会在输出文件夹（`xyz.exe`编译后的位置）中创建一个文件。只需将`xyz.exe`、`xyz.exe.config`和 批处理文件复制到客户端并相应地更改文件中的值`xyz.exe.config`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:04:06.333

App.config 设置是运行时设置 -> 将在运行应用程序时读取它们（而不是在编译时）。这意味着如果您修改 app.config 中的设置，它们将在下次启动应用程序时可见/读取。

编译时 app.config 将转换为*YourConsoleApplicationName* .exe.config（例如，我的控制台应用程序称为 ConsoleApp1，生成的 exe 将是*ConsoleApp1* .exe，配置文件将是*ConsoleApp1* .exe.config），因此请确保您分发这与 exe 和 bat 一起（.exe.config 应与 .exe 位于同一目录中）。

一旦客户端获得上述文件，他/她可以修改配置文件中的设置，并在其网络中使用修改后的设置部署应用程序

您可以在运行应用程序之前修改批处理文件以修改 app.config 的内容（例如，根据经过身份验证的用户进行切换），但这似乎太麻烦了（实际上没有意义，因为您可以从控制台应用程序）。

# qt - 从 QNetworkReply 中获取要使用的数据

> ID：10912158
> 
> 赞同：0
> 
> 时间：2012-06-06T10:09:15.810
> 
> 标签：qt

我需要从中获取一些数据`QNetworkReply`以便稍后解析，但每次返回`data`都是`0`在使用`qDebug() << getData()`.

我不想将它保存在文件中，那么如何从`QNetworkReply`插槽中获取数据并将其存储在字符串中？

请帮忙！非常感谢。

```
#include <QByteArray>
#include <QNetworkAccessManager>
#include <QNetworkRequest>
#include <QNetworkReply>

class Fetch : public QObject

{

    Q_OBJECT

public:

      Fetch(){};
      void go(const QString &str, QUrl &url)
      {
          QNetworkRequest request;
          request.setUrl(url);

          QByteArray data = str.toUtf8();

          QNetworkAccessManager* manager = new QNetworkAccessManager(this);
          reply = manager->post(request, data);

          connect(reply, SIGNAL(finished()), SLOT(httpFinished()));
      }

      QString getData()
      {
          return QString::fromUtf8(m_data);
      }

private slots:

      void httpFinished()
      {
          m_data = reply->readAll();
      }

private:

      QByteArray m_data;
      QNetworkReply* reply;

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:28:36.337

如果你做这样的事情：

```
//...some code
some->go("some string", "your url");
qDebug() << some->getData();
//..some code 
```

问题是异步的。当您调用 getData 时，服务器没有立即回复。您必须等待处理请求并在之后调用此方法。你必须使用信号和插槽

# regex - 正则表达式，匹配“UnQualified”字符串

> ID：10912160
> 
> 赞同：3
> 
> 时间：2012-06-06T10:09:19.383
> 
> 标签：regex

测试数据

```
1: "Abc.TestCase For TestCase By Abc.TestCase Using TestCase"           --> 2 matches 
2: "(Abc.TestCase For TestCase By Abc.TestCase Using TestCase)"         --> 2 matches
3: "(TestCase For TestCase By Abc.TestCase Using TestCase)"             --> 3 matches
4: "(Abc.TestCase For TestCase By Abc.TestCase Using Xyz.TestCase.Sub)" --> 1 match
5: "(Abc.TestCase For TestCase By Abc.TestCase Using Xyz.TestCase1)"    --> 1 match 
```

目标是获取**不合格**的“TestCase”

尝试了以下

```
[^.]\bTestCase\b[^.] 
```

虽然这可行，但它在 2 和 3 情况下失败，它返回 "(TestCase" "TestCase)" 作为匹配项，这会导致替换的错误结果。

对此束手无策！

将不胜感激这里的一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:12:52.777

你很近

问题是 ) 和 " 被认为是单词边界

因此，如果您像这样将异常添加到字符类

```
[^.]\bTestCase\b[^").] 
```

您的正则表达式将仅匹配第一次出现的 TestCase

**更新 1**

![在此处输入图像描述](../Images/27789556121b851751b11cb07489c16d.png)

顺便说一句，查看您的示例输入，我认为“TestCase”作为正则表达式也可以。但也许你有更多的边缘情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:07:03.277

我想这就是你要找的：

```
(?<!\.)\bTestCase\b(?!\.) 
```

换句话说，您想要匹配整个单词`TestCase`（即，不在另一个单词字符之前或之后），但如果它紧跟在 . 之前或之后则不匹配`.`。这是一个稍微整洁的版本：

```
(?<!\.\w)TestCase(?!\.\w) 
```

你写这个问题的方式，听起来你也想排除前面或后面有括号的匹配，比如`(TestCase`or `TestCase)`，但我终于意识到你只是不想在匹配中包含括号。将否定字符类 ( `[^.]`) 替换为否定环视 (`(?<!\.)`和`(?!\.])`) 满足该要求，因为环视不会消耗它们匹配的内容。

# javascript - 从服务器下载文件的最佳方法是什么

> ID：10912164
> 
> 赞同：15
> 
> 时间：2012-06-06T10:09:43.727
> 
> 标签：javascript, asp.net, wcf

我有一个有趣的任务，需要我从服务器（ASP.NET）下载一个动态生成的文件到客户端。在客户端，它只是 JavaScript (jQuery)，客户端能够生成大量参数来自定义数据的导出方式。

从服务器下载文件的最佳方法是什么？我应该使用 WCF 服务，例如[这里描述的还是像](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)[这样](http://shawpnendu.blogspot.com/2009/05/how-to-download-file-from-server-using.html)的简单页面？

我不知道如何在不重新加载页面的情况下下载文件（我不确定 $.ajax 在这种情况下是否有效）。有人可以给我一些关于这个话题的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T11:05:36.207

首先，您可以从处理程序创建文件`.ashx`

假设您有要下载的文件，`download.ashx`并且您有一些参数要从您的 javascript 传递，例如`download.ashx?p1=8827&p2=8831`，要知道您要创建什么。

然后在您的 javascript 上，您可以简单地将重定向设置为

```
window.location = "download.ashx?p1=8827&p2=8831"; 
```

或者你可以使用`window.open`for 做同样的想法

```
window.open("download.ashx?p1=8827&p2=8831"); 
```

您的文件将开始下载。

只需确保您已设置附件的标题，并在您的句柄上设置正确的内容类型，例如：

```
 HttpContext.Current.Response.ContentType = "application/octet-stream";
  HttpContext.Current.Response.AddHeader("Content-Disposition", 
                    "attachment; filename=" + SaveAsThisFileName); 
```

简单明了，经过测试和工作。

您也可能对这个答案感兴趣：[如何处理错误](https://stackoverflow.com/a/14616216/159270)。

# javascript - dojo xhrPost 问题

> ID：10912165
> 
> 赞同：2
> 
> 时间：2012-06-06T10:09:46.783
> 
> 标签：javascript, ajax, dojo, xmlhttprequest

这是我的源代码：

```
<script>
  function sendText(){
    require([ "dijit/form/Button", "dojo/_base/xhr"],
      function(Button,xhr) {

        xhr.post({
          url: "validURL1.html",
          form: dojo.byId("myForm"),
          load: function(data){
            var newStore = 
              new ItemFileWriteStore({url:'validURL2.html'});
            dijit.byId("grid").setStore(newStore);
          },
          error: function(error){
            alert("error!");
          }
        });
    });
  }
</script>

<button data-dojo-type='dijit.form.Button' onClick ='sendText()'>submit</button> 
```

但是当我按下按钮并尝试将我的数据发布到服务器时，萤火虫说：

> _145 未定义

那么我的代码有什么问题？什么是错误'_145'？

更新

```
<script>

require([ "dijit/form/Button", "dojo/_base/xhr","dijit/form/Form",  "dojo/data/ItemFileWriteStore", 
          "dojo/dom-form","dijit/registry","dojo/ready", "dojox/grid/EnhancedGrid"],
        function(Button,xhr, Form, ItemFileWriteStore, domForm, registry,ready, EnhancedGrid) {
        var hasBeenSent = false;

        window.sendText = function() {

        xhr.post({
            url: "validURL1.html",
            form: dojo.byId("myForm"),
            handleaAs: "text",
            load: function(data) {
                var newStore = new ItemFileWriteStore({url:'validURL2.html'});
                dojo.byId("grid").setStore(newStore);
          },
          error: function(error){

            alert("error!");
          },
          handle: function() {

                hasBeenSent = true;
            }
        });

            }   
});
</script> 
```

现在它说：

```
TypeError: dojo.byId("grid").setStore is not a function 
```

但是，我需要“enhancedGrid”。所以也许我应该需要一些其他的模块或类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:23:45.220

将 dojo.byId("grid") 更改为**dijit.byId("grid")**因为您对 dojo.byId("grid") 的调用只会返回 DOMNode 而不是 Widget。

此外，请确保如果您的“网格”是标记声明，则 dojo.parser.parse() 已运行。如果 parseOnLoad:true 已设置，您需要等待 dojo.ready 触发，例如`dojo.ready(function() { require.... });`或`require(["dojo/domReady!", ....], function(..) { XHR });`

最终，如果在您的 require 语句中调用的是 update-xhr，那么这个构造最终会表现得更好。

```
require([
     "dojo/parser", // Pull in parser to manually run it if parseOnLoad is not set true
     "dijit/form/Button",
     "dojo/_base/xhr",
     ...
     "dojox/grid/EnhancedGrid",
     "dojo/domReady!" // Wait untill DOM is done loading and all of the dojo base has been prepared
   ], function(
      Parser,
      Button,
      ...
   ) {
        Parser.parse();
        var hasBeenSent = false;

        window.sendText = function() {

        xhr.post({
            url: "sample/update.html",
            form: dojo.byId("updateUser"),
            handleaAs: "text",
            load: function(data) {
                var newStore = new ItemFileWriteStore({url:'sample/userLissts.html'});
                dijit.byId("grid").setStore(newStore);
          },
          error: function(error){

            alert("error!");
          },
          handle: function() {

                hasBeenSent = true;
            }
        });

            }   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:12:41.730

您正在使用 dojo 的压缩/缩小版本。执行此操作的算法将用较小的变量名（即_145）替换变量名，以减小 javascript 文件的大小。

查看压缩的dojo文件，我发现了这个：

```
function formToObject(_145){var ret={},_146=dom.byId(_145).elements; 
```

我猜那`dojo.byId("myForm")`不是返回您的表格。

我还建议设置您的开发环境，以便能够使用未压缩的文件。它将允许在浏览器中进行更好的调试。

[http://swingingcode.blogspot.com/2012/03/dojo-configurations.html](http://swingingcode.blogspot.com/2012/03/dojo-configurations.html)

# actionscript-3 - 域锁定 - 多个域

> ID：10912166
> 
> 赞同：0
> 
> 时间：2012-06-06T10:09:53.657
> 
> 标签：actionscript-3

Noob 在这里需要一些帮助。

我正在尝试使用此代码片段将 swf 锁定到几个域名。

```
var allowedDomains:String = "ghostwire.com|somewhere.net|elsewhere.org";

var allowedPattern:String = "^http(|s)://("+allowedDomains+")/";
var domainCheck:RegExp = new RegExp(allowedPattern,"i");
if (!domainCheck.test(url))
{
    // domain check failed, abort application
    stop();
    // abort();
}
else
{
    // domain okay, proceed
} 
```

问题是即使我添加了我的网站，例如：

var allowedDomains:String = "mysite.nl|mysite.de|mysite.co.uk";

swf 使用 abort() 函数。

这可以很好地获取域 URL。但是没有办法添加多个域

```
var url:String = stage.loaderInfo.url;
            var goodPattern:RegExp = /^(http:\/\/)(www\.)?mysite\.nl/;
            if (goodPattern.test(url) == true)
            {
                trace("This flash is hosted on mysite");
            }
            else
            {
                trace("This flash is not hosted on mysite");
                this.alpha = 0;
            }; 
```

上面的片段有效。但后来给了我另外两个问题。1：我不能添加多个域名。2：代码混淆后，舞台被清空，所以当我尝试播放 swf 时，我得到一个调试器错误。

类型错误：错误 #1009：空对象

有人可以告诉我我在这里做错了什么！！！

原链接在这里：

PS：我是新手，这里没有禁止。我只是找不到我以前的详细信息，当试图让脚本通过电子邮件向我发送新的详细信息时，我收到一条使用电子邮件的消息，这很好，没有进入这个数据库。

所以我有一条消息提示我使用我的谷歌帐户，如果这是错误的，对不起。

希望能得到一些帮助 consern 我的线程。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:18:20.207

在您的第二个代码中，要检查您使用略有不同的正则表达式的域，它查找“www”，也许试试这个：

```
var allowedDomains:String = "mysite\\.nl|mysite\\.de|mysite\\.co\\.uk";
var allowedPattern:String = "^http(|s)://(www\\.)?("+allowedDomains+")/"; 
```

# facebook - Facebook API：签到和状态消息

> ID：10912168
> 
> 赞同：1
> 
> 时间：2012-06-06T10:09:56.347
> 
> 标签：facebook, facebook-graph-api, facebook-android-sdk

我即将开始将 Facebook 集成到 Android 原生应用程序中。我希望能够张贴到用户的墙上，让她可以附加她的位置，我被告知可以通过 Android 应用程序执行此操作......但我需要有人解释签入之间的区别并且带有附加地点的状态消息是，因为我无法通过在 Facebook API 文档中查找清楚...它们是不同的对象，但它们似乎具有相同的地点信息，并且签入对象也一个消息字段。

有人可以帮助我吗？多谢！

# c# - 删除节点的 Xpath 查询

> ID：10912170
> 
> 赞同：1
> 
> 时间：2012-06-06T10:10:06.870
> 
> 标签：c#, xml, xslt, xpath

我有这样的xml文件的soap序列化部分，现在我想要删除一些对象ex：我想要带有名称组件的图像

```
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<a1:Image id="ref-1" xmlns:a1="http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">
<Name id="ref-4">Component</Name>
<ImmediateState xsi:type="a2:ModifiedState" xmlns:a2="http://schemas.microsoft.com/clr/nsassem/Spo.Plugins/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">Current</ImmediateState>
</a1:Image>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<a1:Image id="ref-1" xmlns:a1="http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">
<Name id="ref-4">Connect</Name>
<ImmediateState xsi:type="a2:ModifiedState" xmlns:a2="http://schemas.microsoft.com/clr/nsassem/Spo.Plugins/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">Current</ImmediateState>
</a1:Image>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

所以请给我一些想法如何实现这一点，我已经尝试了几种我未能实现的方法，请帮助我......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:34:44.130

1.  您可以像这样使用 XSLT：

    ```
    <xsl:template match="spo:Image | Name | spo:Image/@id | Name/@id | Name/text()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="@* | node()">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:template> 
    ```

2.  Linq2Xml：

    ```
     var doc = XDocument.Parse(xml);
        var elementName = XName.Get(
            "Image",
            "http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58");
        var items = 
            from x in doc.Descendants().Elements(elementName)
            select new { ImageId = x.Attribute("id").Value, NameId = x.Element("Name").Attribute("id").Value, Name = x.Element("Name").Value }; 
    ```

3.  XPath（XDocument）：

    ```
    var doc = XDocument.Parse(xml);

    var navigator = doc.CreateNavigator();
    var manager = new XmlNamespaceManager(navigator.NameTable);
    manager.AddNamespace("spo", "http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58");
    var sel = navigator.Select("//descendant::spo:Image", manager);

    foreach (XPathNavigator node in sel)
    {
        Console.WriteLine(node.OuterXml);
    } 
    ```

4.  XPath (XSLT)：

    ```
    <xsl:template match="*">
        <xsl:for-each select="/descendant::spo:Image">
            <xsl:copy>
                <xsl:copy-of select="Name"/>
            </xsl:copy>
        </xsl:for-each>
    </xsl:template> 
    ```

**更新**：

```
var xml = string.Format(@"<root>{0}</root>", Resource1.String1);
var doc = XDocument.Parse(xml);
// process document
using (var file = File.CreateText(@"file.xml"))
{
    foreach (XElement nodes in doc.Root.Elements())
    {
        file.Write(nodes);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:30:47.660

这对我有用：

```
XElement root = XElement.Load(file);
IEnumerable<XElement> images = root.XPath("//Image[Name]"); 
```

将此库用于 XPath：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:09:57.867

**使用这个 XSLT 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[local-name() = 'Image' and Name]"/>
</xsl:stylesheet> 
```

# google-analytics - Google Analytics - 访问者级别的自定义变量问题和观察结果

> ID：10912173
> 
> 赞同：4
> 
> 时间：2012-06-06T10:10:20.137
> 
> 标签：google-analytics, analytics, google-analytics-api, web-analytics, web-analytics-tools

我使用 Facebook JSSDK（即客户端）来验证我的网络应用程序的当前用户是谁。

代码看起来像这样：

```
 ... inited google analytics ...

       ...
       //events *before* authentication
       _gaq.push(['_trackEvent', 'TEST', 'EVENT BEFORE AUTH', 1]);   

       ... 
       //events *after* attempt at client-side authentication
       // callback might return after, say, 7 seconds
        authenticateUser(function(userInfo) {
             // setting visitor-level custom var
            _gaq.push(['_setCustomVar', 1, 'AUTHED-USER', userInfo, 1]);
            _gaq.push(['_trackEvent', 'TEST', 'EVENT AFTER AUTH', 1]);   
        }); 
```

（如果您尝试对此进行模拟，请确保在第一个事件触发后运行“setCustomVar”一段时间 - 因为您想给 GA“足够的时间”来发送第一个事件）

这会在自定义变量下创建以下跟踪事件的“问题”：

1.  在其他事件已经发送到 Google Analytics 之后，来自 Facebook 的响应以及用户信息可能会返回 - 访问者级别的自定义变量似乎“解决了这个问题”，因为它似乎甚至是之前在此会话中跟踪的事件（在自定义之前var 已设置）列在自定义 var 值（在它们之后设置）的“下方”。

2.  不同的用户可能会使用相同的浏览器来使用该应用程序。“覆盖”访问者级自定义变量的行为是有问题的 - 似乎从此浏览器发出的所有预授权事件都列在 LATEST custom-var 值下/分组。我尝试在覆盖之前发出 _deleteCustomVar 调用 - 但这并没有解决问题。

以不同的方式“解决”第一个问题 - 我想不使用访问者级别的自定义 var（而是页面/会话） - 但这意味着所有预授权事件都不会列在自定义 var 下 - 到解决*这个*问题，我想以某种方式将所有事件跟踪推迟到身份验证完成*后*- 但这似乎.. umm.. 很奇怪。

另一种解决方案是使用我自己的“visitor-cookie”。但是 GA 已经这样做了，所以我不愿意重新发明轮子..（而且在用户切换之后，访问者的 cookie 将为预授权事件“撒谎”）

关于如何处理这种情况的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:25:48.300

也许对每个 customVar 范围的一些解释会对您有所帮助。

**访客级别简历**

从您设置 CV 开始，访客级别的 CV 将适用于所有访问。如果您在单次访问期间更改了 CV，则该访问将在 GA 中的旧值下列出，但以后的访问将具有更新的 CV。

**会话级简历**

会话级别 CV 仅在当前会话中有效。在未来的会话中，它是空的。如果您在访问期间更改了会话级别 CV，GA 中报告的值是最后一个。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#usage](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#usage)

> 会话中调用的最后一个会话级变量是用于该会话的变量。示例：如果在会话开始时插槽 #1 的 login=false 并且稍后插槽 #1 的 login=true，则会话设置为 true 以进行登录。
> 
> 覆盖在同一会话中调用的任何先前设置的页面级变量。示例：如果插槽 #1 首先用于 category=sports，然后用于某个会话的 login=true，则不会为该会话记录 category=sports。

**页面级简历**

在你的情况下，你必须小心这个。当您使用页面级 CV 时，切勿将访问量视为指标，始终使用综合浏览量（如果您在设置 CV 后立即触发事件，则使用 totalEvens）。

**使用哪一个？**

现在回答你的问题。我首先会问自己是否有任何理由相信多个用户会使用同一个浏览器。我见过为信息亭（如计算机）设计的系统，在这种情况下，这是一个完全正确的观点。但除了您使用同一浏览器的用户数量可能与您的指标无关。

即使在使用相同浏览器的情况下，如果您使用会话级别的 CV，在用户设置它之前它始终是空白的，如果他在访问期间更改它，您将获得最新的，这可能是您想要的。使用会话级别 CV 的唯一缺点是，如果用户从不登录，您将没有该访问的 CV。

因此，如果您有任何理由相信您的受众很有可能与多个用户共享同一个浏览器，而不是使用会话级别的简历。否则，我会保留用户级别的 CV，因为该值更改的可能性很小，并且即使用户决定在特定访问期间不登录，您也会拥有 CV。

**附言**

我不知道您代码中的事件是否只是示例，但它们是错误的。事件中的前 3 个参数是字符串，您似乎传递了 2 个字符串和一个整数。

设置 CV 后，您肯定需要事件或综合浏览量，设置 CV 不会向 GA 发送点击，因此发送点击是绝对必要的。如果您发送事件只是为了注册 CV，您最好发送这样的事件：

```
_gaq.push(['_trackEvent', 'CV', 'set', '', 0, true]); 
```

这将触发一个非交互式事件，并且不会影响跳出率等指标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:14:06.787

所以谷歌考虑了这个问题，但认为这不是那么重要：

> ... 同样，如果两个不同的访问者使用相同的浏览器，但每个访问者都有一个单独的计算机帐户，则活动将记录在两个唯一的访问者 ID 下。另一方面，如果浏览器碰巧被共享同一计算机帐户的两个不同的人使用，则会记录一个唯一的访问者 ID，即使两个唯一的个人访问了该站点。

我确实找到了一个解决方案：在加载 GA 之前删除 __utma cookie。

# java - Kestrel 指南/教程/文档？

> ID：10912174
> 
> 赞同：2
> 
> 时间：2012-06-06T10:10:22.497
> 
> 标签：java, kestrel

我试图看看 Kestrel 是如何工作的，但即使在 Java 中找到一个使用它作为库的工作示例，我也遇到了一些困难。

有人有链接或可以帮助我设置队列吗？

我找到[了这个](https://gist.github.com/784413)，但它在最后一个版本上不起作用..：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T01:08:25.507

我有同样的问题。我最初使用的是 xmemcached 客户端，但后来发现使用简单的包装器更容易使用。该包装器变成了 jestrel，在 Apache 许可下可在此处获得：

[https://github.com/cobbzilla/jestrel](https://github.com/cobbzilla/jestrel)

我设计了 jestrel API 以非常简单。它已经在生产环境中进行了测试并且表现良好。试一试，让我知道你的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:50:50.763

我有同样的问题。我发现这个链接显示了一个使用 PHP 创建的客户端。我能够以此作为创建 Java 客户端的基础：http: [//blog.shupp.org/2011/05/07/getting-started-with-kestrel-from-a-php-application/](http://blog.shupp.org/2011/05/07/getting-started-with-kestrel-from-a-php-application/)

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import net.spy.memcached.MemcachedClient;

public class KestrelClient {
    private MemcachedClient client = null;
    private String kestrelHost = null;
    private int kestrelPort = -1;

    public KestrelClient(final String kestrelHost, final int kestrelPort)
    {
        this.kestrelHost = kestrelHost;
        this.kestrelPort = kestrelPort;

        try
        {
            this.client = new MemcachedClient(new InetSocketAddress(this.kestrelHost, this.kestrelPort));
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    public boolean set(final String queueName, final int expiration, final Object data)
    {
        Future<Boolean> setFuture = this.client.set(queueName, expiration, data);

        try
        {
            return setFuture.get().booleanValue();
        }
        catch (InterruptedException e)
        {
            e.printStackTrace();
        }
        catch (ExecutionException e)
        {
            e.printStackTrace();
        }

        return false;
    }

    public Object reliableRead(final String queueName, final int timeout)
    {
        Object object = this.client.get(queueName + "/close/open/t=" + timeout);
        closeReliableRead(queueName);
        return object;
    }

    public void closeReliableRead(final String queueName)
    {
        this.client.get(queueName + "/close");
    }

    public void abortReliableRead(final String queueName)
    {
        this.client.get(queueName + "/abort");
    }
} 
```

它并不完美，但它应该让你开始。（依赖于 spymemcached。）

祝你好运！

# awk - 在 awk 中连接字符串

> ID：10912175
> 
> 赞同：3
> 
> 时间：2012-06-06T10:10:24.770
> 
> 标签：awk

我有一个日志文件，我需要在服务器上“重播”。

它包含这样的条目：

```
Request:
        query: EXEC prc_insert_customer
        @param0: 110040851
        @param1: 137463
        @param2: user@example.com
        @param3: John
        @param4: Smith
        @param5: Some address
        @param6:
        @param7:
        @param8: Some city
        @param9: GBR
        @param10: POSTCODE
        @param11: (555) 123-45-67
Response:

... 
```

我需要将每个块像这样转换成

```
EXEC prc_insert_customer '110040851', '137463',  ..., '(555) 123-45-67' 
```

我尝试为此使用 awk：

```
/EXEC prc_insert_customer/ {
        str = "EXEC prc_insert_customer";
}

str && /@param/ {
        if ($1 == "@param0:")
                sep = ""
        else
                sep = ","
        str = ((str) (sep) " '"($2) ("'"))
}

/^Response/ {
        if (str)
                print str
        str = ""
} 
```

但我得到的输出是：

```
', '(555)'DE', '', 'Some', 'GBR0851 
```

如何获得正确的输出？

我`GNU Awk 4.0.0`使用`Fedora 17`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:33:58.603

如果日志文件基于 Windows，那么您几乎可以肯定是在处理邪恶的 ^M 字符的副作用（影响？;->）。正如您所描述的，它肯定会产生问题。

```
 sub(/^M/,"", $0) 
```

应该有帮助。

那是一个真正的 Ctrl-M 字符，而不是 2 个字符'^'，'M'，在符合 vi 的编辑器中通过按 Ctrl-V 和 tne Ctrl-M 生成。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:36:16.187

此代码片段的轻微变化将起到作用：

```
BEGIN { processing = 0 }
/^Request/ { processing = 1 }
/^Response/ { processing = 0 }

{
    if (! processing)
        next

    if ($1 ~ /^@param/)
    {
        sep = ($1 == "@param0:" ? "" : ", ")
        rest = "'"
        for (i = 2; i <= NF; ++i)
            rest = rest (i == 2 ? "" : " ") $i
        rest = rest "'"

        str = str sep rest
    }
    else if (str != "")
    {
        print "EXEC prc_insert_customer", str
        str = ""
    }
} 
```

这为我打印：

```
 EXEC prc_insert_customer '110040851', '137463', 'user@example.com', 'John', 'Smith', 'Some address', '', '', 'Some city', 'GBR', 'POSTCODE', '(555) 123-45-67' 
```

在 Mac OSX 上进行了`awk version 20070501`测试。`GNU Awk 4.0.0`

# jquery - jquery传输效果不适用于oppsite进程

> ID：10912177
> 
> 赞同：0
> 
> 时间：2012-06-06T10:10:31.370
> 
> 标签：jquery

我有以下代码。单击#eve 元素时它可以工作，但是当我单击主页链接时它不起作用。

```
 <style type="text/css">
        #eve{min-height: 200px;width: 200px;background-color: #666600;top: 57px;left: 212px}
        .ui-effects-transfer { border: 1px solid #9999ff }
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="transfer.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){
            $("#eve").click(function () {
                $(this).effect("transfer",{to: $("#home")}, 500,function(){$(this).hide()});
            });
            $("#home").click(function () {
                $("#eve").show()
                $("#eve").effect("transfer",{to: $("#here")}, 500,function(){$("#eve").show()});
            });
        });
    </script> 
```

家端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:24:49.023

如果#home 是一个链接，你要记住，浏览器会执行这个链接，所以你看不到效果。

尝试：

```
$("#home").click(function () {
    $("#eve").show();
    $("#eve").effect("transfer",{to: $("#here")}, 500,function(){$("#eve").show()});
    return false;
}); 
```

或者

```
$("#home").click(function (e) {
    $("#eve").show();
    $("#eve").effect("transfer",{to: $("#here")}, 500,function(){$("#eve").show()});
    e.preventDefault();
}); 
```

# c# - 从控制器返回一个 html 文件

> ID：10912180
> 
> 赞同：0
> 
> 时间：2012-06-06T10:10:41.590
> 
> 标签：c#, asp.net-mvc-3

我想`somename.htm`从 MVC 中控制器的操作方法返回一个 HTML 文件。我怎样才能做到这一点？

**编辑**

我有很多 html 模板（小型网站），当用户在客户端选择其中任何一个时，我想向用户展示它们。因此，我没有将所有这些模板作为`view`我将其保存为服务器上的 html 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:19:27.870

```
public ActionResult downloadFile()
{
    var path = "somename.htm";

    StreamReader reader = new StreamReader(path);

    var fileBytes = System.IO.File.ReadAllBytes(path);            

    FileContentResult file = File(fileBytes, "text/html");

    return file;
} 
```

# c# - c# winforms如何按正确顺序获取列表中的DataGridViewCells

> ID：10912183
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:10:59.833
> 
> 标签：c#, winforms, list, datagridview

```
List<string> a = new List<string> {};    
foreach (DataGridViewCell cell in dgvC.SelectedCells)
{
a.Add(cell.Value.ToString());
}
string line = string.Join(",", a.ToArray());
MessageBox.Show(line); 
```

MyCellsValues 是 1 2 3 4 5
为什么我的字符串是 5 4 3 2 1
多么愚蠢的行为！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:13:46.783

利用

```
a.Insert(0, cell.Value.ToString()); 
```

或使用

```
a.Reverse();
string line = string.Join(",", a.ToArray()); 
```

# php - 如何在 MySQL IN 语句中的内爆数组的字符串周围添加撇号？

> ID：10912185
> 
> 赞同：0
> 
> 时间：2012-06-06T10:11:11.513
> 
> 标签：php, mysql, arrays, string, implode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:18:57.643

[`array_map()`](http://php.net/manual/en/function.array-map.php) lets you call a function on every element of an array.

```
$tag_array = array_map ( function($var) {
  return "'" . mysql_real_escape_string($var) . "'";
}, $tag_array ); 
```

But I suggest you use prepared statements ([PDO](http://php.net/manual/en/book.pdo.php) or [mysqli](http://php.net/manual/en/book.mysqli.php) instead of the soon deprecated `mysql_` functions).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:29:58.707

**Update**

Misread the earlier question.

You have to escape each individual item in your array before you use it in the query:

```
function apply_quotes($item)
{
    return "'" . mysql_real_escape_string($item) . "'";
}

$list = array('3D', '瑪丹娜','電影','情報','大獨裁');

$list = array_map('apply_quotes', $list); 
```

Then, to construct the query:

```
$query = "select * FROM news WHERE upordown = 1 AND tagkey IN (" . 
    join(',', $list) . 
    ") AND id <> $id ORDER BY udate DESC"; 
```

If all your items are inside a string instead of an array, you have to turn it into an array first:

```
$list = explode(',', '3D,瑪丹娜,電影,情報,大獨裁'); 
```

I'm assuming that you're using `mysql_` functions; if not, let me know :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T10:16:50.277

Your question is not clear, but try like this ;

```
$tag_array = array($line["tagkey"]);
$tag_str = implode(" ", array($line["tagkey"]));
echo $tag_str;
$query = "select * FROM news WHERE upordown = 1 AND tagkey IN ('".$tag_str."') AND id <> '".$id."' ORDER BY udate DESC "; 
```

# java - redis中是否总是需要protobuf？

> ID：10912186
> 
> 赞同：4
> 
> 时间：2012-06-06T10:11:19.873
> 
> 标签：java, redis, protocol-buffers

我正在使用 redis 开发一个键值存储。我建议使用 a `hashmap`of type `String(key)-->Object(value)`。建议我`serilaize`使用`protobuf`.

如果我们要使用 Java（独立于平台）填充和读取这些数据，那么使用 有什么好处`protobuf`吗？只是将对象直接放入redis并取回并转换它会导致任何问题吗？

这个产品非常强调效率，所以我们不想做任何不必要的处理。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T10:16:11.417

redis 完全没有必要使用 protobuf；关键通常很简单：选择一个能够在今天、明天和明年可靠地取回数据的序列化框架。您也可以使用 json、xml 等。在许多情况下，单个字符串值绰绰有余，完全绕过序列化（除非您将“编码”视为序列化）。

我通常建议不要使用平台专有的序列化，因为如果您需要在几年内将数据恢复到（比如）C++ 中，它们可能对您没有帮助，而且它们在版本控制方面通常不太灵活。

Protobuf 是一个合理的选择，因为它具有以下关键特性：

*   小输出（减少应用程序和 redis 之间的带宽，以及存储需求）
*   CPU 高效处理（减少应用程序中的处理）
*   专为版本公差而设计
*   跨平台

但是，其他序列化程序也可以工作。您甚至可以只使用纯文本和 redis 哈希，即每个对象属性的哈希属性。但是，在大多数情况下，您想要获取整个对象，因此简单的“获取”并将数据交给合适的序列化 API 通常更合适。

在我们自己使用 redis 时，我们*确实*碰巧使用了 protobuf，但我们也做了一个推测性的“protobuf 输出是否使用 gzip 压缩？” - 如果是，我们发送 gzip 数据（或者如果更小，我们存储原始未压缩数据 - 显然是一个标记来说明它是哪个）。

# networking - 如何远程控制嵌入式设备

> ID：10912187
> 
> 赞同：2
> 
> 时间：2012-06-06T10:11:24.920
> 
> 标签：networking, ssh, embedded

我正在为一家提供设备的公司工作，我们希望为其提供基于 Web 的访问和控制。

我们目前在运行 linux 的设备中嵌入了 ts-7800 板。这提供了一个静态本地 IP 地址，可在局域网上进行访问。

我希望使这些设备在世界任何地方都可以查看和控制。我还希望他们使用 dhcp 进行自我配置，类似于 Skype 与其客户端软件的通信方式。

我想知道设备是否有办法打开与我的服务器的连接，然后保持可用以获取可能的指令，例如使用某种反向 ssh 隧道过程。

有人可以让我知道这是否可能，或者给我一个正确的方向。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:01:31.057

MQTT ( [http://mqtt.org/](http://mqtt.org/) ) 是一种机器对机器 (M2M)/“物联网”连接协议。它被设计为一个极其轻量级的发布/订阅消息传输。它对于与需要少量代码和/或网络带宽非常宝贵的远程位置的连接非常有用。

My-Devices.net ( [http://www.my-devices.net/](http://www.my-devices.net/) ) 一个基于 Web 和云的平台，可以使用 PC 上运行的任何 Web 客户端安全地远程访问智能设备的内置 Web 服务器，服务器、智能手机或平板电脑。

Yaler ( [https://yaler.net/](https://yaler.net/) ) 为 Linux 设备和其他平台的库提供命令行工具，使您的设备可以从任何地方通过 Web 浏览器或 SSH 访问。（披露：我是创始人）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:35:21.457

[这篇](http://www.raspberrypi.org/archives/1348)关于使用运行 Linux 的 Raspberry Pi 进行远程监视和控制的项目可能描述了一种合适的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:59:23.963

我不知道您项目的全部要求，但 ts7800 是一头野兽，可能有点矫枉过正。你需要linux吗？

通过 SSL 网页或 ssh 隧道进行控制怎么样？您可以使用[NetBurner 的 SB70LC 设备](http://www.netburner.com/products/serial_to_ethernet/sb70lc.html)以 59 美元的价格完成其中任何一项。这也将满足您的 DHCP 要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:45:47.923

如果可能，您可以添加 GPRS 调制解调器并远程访问此嵌入式设备。

# php - 是否可以“静态”检查 FQCN 是否属于 PHP 中的给定类型？

> ID：10912190
> 
> 赞同：3
> 
> 时间：2012-06-06T10:11:39.747
> 
> 标签：php, reflection, types, instance

如果包含 FQCN 的字符串如下所示，则可以*静态*检查（意味着不创建实例）`$fqcn`：

```
function checkCreatingInstance($fqcn)
{
    // Create a new instance
    $instance = new $fqcn;

    return ($instance instanceof 'MyNamespace\Entity\SendMessage');
}

function checkStatically($fqcn)
{
    /* TODO */
}

$fqcn = 'MyNamespace\Entity\SendSmallTextMessage';
var_dump(checkCreatingInstance($fqcn)); // true 
```

是给定的类型吗？一个示例层次结构：

```
namespace MyNamespace\Entity;

class SendMessage { /* Stuff */ }

namespace MyNamespace\Entity;

class SendNewsletter extends SendMessage { /* Stuff */ }

namespace MyNamespace\Entity;

class SendSmallTextMessage extends SendMessage { /* Stuff */ } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:20:47.380

是的。**如果**你作为第三个参数传递[`is_a()`](http://php.net/manual/en/function.is-a.php)，就会这样做。**`TRUE`**

 **[例子](http://codepad.viper-7.com/U0szGT)

这样做的好处是您可以编写函数，使其接受对象或字符串，并且无论哪种方式都可以工作，您不必为静态和实例化检查提供两个函数：

```
function checkIsChildOf ($objOrFQCN, $parent)
{
    return is_a($objOrFQCN, $parent, TRUE);
} 
```

PHP 手册的另一个例子很差 - 这种行为记录在手册中，据我所知，但我不知道你为什么没有看到它，所以手册很差，不能让它可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:22:49.943

```
namespace Foo;

class A { }

class B extends A { }

class C { }

is_subclass_of('\Foo\A', '\Foo\A');  // false
is_subclass_of('\Foo\B', '\Foo\A');  // true
is_subclass_of('\Foo\C', '\Foo\A');  // false 
```

[http://php.net/is_subclass_of](http://php.net/is_subclass_of)**

# c++ - 如何记录或重播崩溃前立即执行的行或指令

> ID：10912191
> 
> 赞同：9
> 
> 时间：2012-06-06T10:11:45.163
> 
> 标签：c++, windows, debugging, windbg

通常我必须在 Windows 上调试崩溃的 C++ 程序，以便重现崩溃，但很难确定代码中的指令序列导致崩溃（例如，另一个线程覆盖崩溃线程的内存）。在这种情况下，即使是调用堆栈也无济于事。通常我会通过注释掉源代码部分来缩小崩溃原因的范围，但这非常乏味。

有谁知道一个 Windows 工具，它可以报告或重播崩溃前在所有线程中执行的最后几行源代码行或机器代码指令？即类似于gdb 的反向调试功能或类似于Mutek 的BugTrapper 的东西（不再可用）。我正在寻找一个已发布且稳定的工具（我知道 SoftwareVerify 的 'Bug Validator' 和 Hexray 的 IDA Pro 6.3 Trace Replayer，它们都仍处于封闭测试程序中）。

我已经尝试过的是 WinDbg 跟踪命令`wt`和`ta @$ra`，但这两个命令都有缺点，它们会在几秒钟后自动停止。我需要在崩溃发生之前一直运行的跟踪命令，并跟踪正在运行的程序的所有线程。

**注意：**我**不是**在寻找旨在修复特定问题的调试工具，例如 gflags、pageheap、内存验证器、Purify 等。我正在寻找已发布且稳定的工具来在指令级别进行跟踪或重放。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T11:05:39.240

如果您遇到使用[gflags](http://blogs.msdn.com/b/webdav_101/archive/2010/06/22/detecting-heap-corruption-using-gflags-and-dumps.aspx)（[GFlags 和 PageHeap](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549561%28v=vs.85%29.aspx)`another thread overwriting memory of the crashing thread` ）很有用的情况。它不会告诉您崩溃前已执行的几行代码，而是会准确地告诉您算法覆盖正确分配的内存块的位置。

您首先激活此类检查：

`gflags /p /enable your_app.exe /full`或者
`gflags /p /enable your_app.exe /full /backwards`

检查您是否已正确激活
`gflags /p`

运行您的应用程序并收集转储文件

然后使用 gflags 禁用检查：

`gflags /p /disable your_app.exe`

* * *

**更新 1**

`It does not immediately detect problems like *p = 0; where p is an invalid pointer`
至少检测到一些问题。
例如：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
  int *p = new int;
  printf("1) p=%p\n",p);
  *p = 1;
  delete p;
  printf("2) p=%p\n",p);
  *p = 2;
  printf("Done\n");
  return 0;    
} 
```

当我在启用 gflags 的情况下运行时，我得到一个转储文件并且问题被正确识别：

```
STACK_TEXT:  
0018ff44 00401215 00000001 03e5dfb8 03dfdf48 mem_alloc_3!main+0x5b [c:\src\tests\test.cpp\mem_alloc\mem_alloc\mem_alloc.3.cpp @ 11]
0018ff88 75f8339a 7efde000 0018ffd4 77bb9ef2 mem_alloc_3!__tmainCRTStartup+0x10f [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 586]
0018ff94 77bb9ef2 7efde000 2558d82c 00000000 kernel32!BaseThreadInitThunk+0xe
0018ffd4 77bb9ec5 004013bc 7efde000 00000000 ntdll!__RtlUserThreadStart+0x70
0018ffec 00000000 004013bc 7efde000 00000000 ntdll!_RtlUserThreadStart+0x1b

STACK_COMMAND:  ~0s; .ecxr ; kb

FAULTING_SOURCE_CODE:  
     7:   printf("1) p=%p\n",p);
     8:   *p = 1;
     9:   delete p;
    10:   printf("2) p=%p\n",p);
>   11:   *p = 2;
    12:   printf("Done\n");
    13:   return 0;
    14: 
    15: } 
```

* * *

**更新 2**

@fmunkert 的另一个例子：

```
#include <stdio.h>

int main()
{

        int *p = new int;  
        printf("1) p=%p\n",p);  
        *p = 1;  
        p++;
        printf("2) p=%p\n",p);
        *p =  2;   // <==== Illegal memory access
        printf("Done\n");  
        return 0;

} 
```

`gflags /p /enable mem_alloc.3.exe /full /unaligned`

```
STACK_TEXT:  
0018ff44 00401205 00000001 0505ffbe 04ffdf44 mem_alloc_3!main+0x52 [c:\src\tests\test.cpp\mem_alloc\mem_alloc\mem_alloc.3.cpp @ 12]
0018ff88 75f8339a 7efde000 0018ffd4 77bb9ef2 mem_alloc_3!__tmainCRTStartup+0x10f [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 586]
0018ff94 77bb9ef2 7efde000 2577c47c 00000000 kernel32!BaseThreadInitThunk+0xe
0018ffd4 77bb9ec5 004013ac 7efde000 00000000 ntdll!__RtlUserThreadStart+0x70
0018ffec 00000000 004013ac 7efde000 00000000 ntdll!_RtlUserThreadStart+0x1b

STACK_COMMAND:  ~0s; .ecxr ; kb

FAULTING_SOURCE_CODE:  
     8:         printf("1) p=%p\n",p);  
     9:         *p = 1;  
    10:         p++;
    11:         printf("2) p=%p\n",p);
>   12:         *p =  2;   // <==== Illegal memory access
    13:         printf("Done\n");  
    14:         return 0;
    15: 
    16: } 
```

不幸的是**/unaligned**选项可能会导致程序无法正常运行（[如何使用 Pageheap.exe](http://support.microsoft.com/kb/286470)）：

> 一些程序假设 8 字节对齐，并且它们停止使用 /unaligned 参数正常工作。Microsoft Internet Explorer 就是这样一种程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T01:14:31.790

我找到了一个解决方案：使用 VMware Workstation 和 Visual Studio 2010 进行“重放调试”。设置它需要花费大量时间，但您会得到一个可以及时向后调试的 Visual Studio C++ 调试器。这是一个演示重放调试如何工作的视频：http: [//blogs.vmware.com/workstation/2010/01/replay-debugging-try-it-today.html](http://blogs.vmware.com/workstation/2010/01/replay-debugging-try-it-today.html)。

该解决方案的一个缺点是 VMware 似乎已停止在最新的 VMware 版本中进行重放调试。此外，似乎只有某些处理器类型支持重放。我没有找到任何支持处理器的完整列表；我在我的三台 PC 上测试了回放功能：回放在 Core i7 200 上不起作用；回放在 Core2 6700 和 Core2 Q9650 上工作。

我真的希望 VMware 重新考虑并在未来的 VMware Workstation 版本中再次引入重放调试，因为这确实为调试增加了一个新的维度。

对于那些感兴趣的人，这里描述了如何设置重放调试环境：

在下面的描述中，“本地调试”是指 Visual Studio 和 VMware 安装在同一台 PC 上。“远程调试”是指Visual Studio 和VMware 安装在不同的PC 上。

*   在主机系统上安装 Visual Studio 2010 SP1。

*   确保 Visual Studio 已配置为使用 Microsoft 的符号服务器。（在“工具 | 选项 | 调试 | 符号”下）。

*   在主机系统上，安装“Windows 调试工具”。

*   安装 VMware 工作站 7.1。（8.0 版不再包含重放调试功能）。这还将在 Visual Studio 中安装一个插件。

*   使用 Windows XP SP3 在 VMware 上安装虚拟机 (VM)。

*   如果正在测试的应用程序是调试版本，请在 VM 上安装 Visual Studio 调试 DLL。（有关如何执行此操作的说明，请参阅[http://msdn.microsoft.com/en-us/library/dd293568.aspx ，但使用“调试”配置而不是“发布”）。](http://msdn.microsoft.com/en-us/library/dd293568.aspx)

*   将主机“Debugging Tools for Windows”目录下的“gflags.exe”复制到VM，在VM上运行gflags.exe，在“System Registry”选项卡下选择“Disable paging of kernel stacks”，点击OK。重新启动虚拟机。

*   将被测应用程序的所有 EXE 和 DLL 文件复制到 VM 并确保您可以启动应用程序并重现问题。

*   关闭 VM 并创建快照（通过 VMware Workstation 中的上下文菜单项“Take Snapshot”）。

*   （仅用于远程调试：）在 Visual Studio PC 上启动以下命令并输入任意密码：

    C:\Program Files\VMware\VMware Workstation\Visual Studio Integrated Debugger\dclProxy.exe*主机名*

    将*主机名*替换为 PC 的名称。

*   （仅用于远程调试：）为 VM 手动创建记录。即登录到 VM 的操作系统，开始记录（通过上下文菜单“记录”），运行被测应用程序并执行重现问题所需的操作。然后停止并保存录音。

*   启动 Visual Studio 并转到“VMware | 选项 | 在 VM 中重放调试 | 常规”，并设置以下值：

    *   “本地或远程”必须设置为“本地”以进行本地调试或设置为“远程”以进行远程调试。
    *   “虚拟机”必须设置为 VM 的 .vmx 文件的路径。
    *   “远程机器密码”必须设置为您上面使用的密码（仅用于远程调试）。
    *   “Recording to Replay”必须设置为您之前使用 VMware 创建的录制名称。
    *   “Host Executable Search Path”必须设置为一个目录，在该目录中保存被测应用程序所需的 DLL，以及 Visual Studio 显示正确堆栈跟踪所需的 DLL。

    按“应用”。

*   转到“VMware | 选项 | 在 VM 中重放调试 | 预记录事件”，并设置以下值：

    *   “用于录制的基本快照”：先前创建的快照的名称。

    按“确定”。

*   （对于本地调试：）在 Visual Studio 中，选择“VMware | Create Recording for Replay”；这将重新启动 VM。登录到 VM，运行被测应用程序并执行重现问题所需的操作。然后停止并保存录音。

*   选择“VMware | 开始重放调试”。VMware 现在会自动重新启动 VM 和被测应用程序并重播记录的操作。等到应用程序崩溃；Visual Studio 调试器然后自动变为活动状态。

*   在 Visual Studio 调试器中，将断点设置到您认为应用程序在崩溃之前所在的位置。然后，选择“VMware | 反向继续”。调试器现在**向后**运行到断点。此操作可能需要一些时间，因为 VM 将重新启动并重播，直到达到断点。（您可以通过在记录场景时在崩溃发生前几秒钟添加快照来加快此操作。您可以在重放调试期间添加额外的快照。）

*   一旦 VMware 将 VM 重播到断点，您可以使用“Step Over”和“Step Into”从断点向前推进，即重播记录的事件历史记录，直到您可以确定原因你的应用程序崩溃了。

更多信息：[http ://www.replaydebugging.com/](http://www.replaydebugging.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T11:10:35.183

使用 BMC 的 AppSight 怎么样？

我们在以前的公司使用过它（抱歉，我花了一段时间才记住这个名字），它被用来研究崩溃等。ISTR 你运行它，然后运行你的软件，它在一个日志文件中记录了发生的一切您可以稍后查看。

它绝对适用于 Windows，因为这就是我使用的。

这很可能是您正在寻找的东西？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T12:15:27.210

我会在程序运行时附加 WinDbg，并在它调试崩溃或异常时执行 minidump：

```
.dump /ma c:\mem.dmp // c:\mem.dmp could be any other location you desire 
```

我将为您的应用程序启用 gflags，无论是从 WinDbg 中的命令行：

```
!gflag +ust 
```

记得在之后删除这个标志！

然后你可以运行一个自动的异常分析：

```
!analyze -v 
```

这可能会告诉您它认为导致崩溃的原因，您可以转储所有线程的调用堆栈：

```
~* kb 
```

如果看到任何可疑之处，您可以切换线程并进一步检查：

```
~x s 
```

您可以检查异常上下文记录：

```
.ecxr 
```

关于如何从 catch 块中恢复调用堆栈有一个很好的链接：http://blogs.msdn.com/b/slavao/archive/2005/01/30/363428.aspx 还有这个：[http:// blogs.msdn.com/b/jmstall/archive/2005/01/18/355697.aspx](http://blogs.msdn.com/b/jmstall/archive/2005/01/18/355697.aspx)

这里的主要内容是附加了 windbg，您应该能够检查所有线程和调用堆栈的状态，您还可以在 Visual Studio 中打开 minidump：http: [//msdn.microsoft.com/en-us/ library/windows/desktop/ee416349%28v=vs.85%29.aspx#Analysis_of_a_minidump](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416349%28v=vs.85%29.aspx#Analysis_of_a_minidump)如果您更喜欢 Visual Studio 进行导航，您可以在 Windbg 中打开相同的转储以使用其分析工具和 Visual Studio 来导航代码。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T12:57:12.743

gdb 不是开箱即用地提供此功能吗？

自从我使用它已经有一段时间了，但我记得它可以运行一个程序直到它崩溃，然后在调试器中为你重播这些步骤。

此外，设置您自己的日志记录应用程序会很简单，它可以输出您选择的任何数量的数据，并且可以通过命令行参数激活到 exe？

您现在可以设置它来解决您遇到的崩溃，或者只是覆盖基础知识，然后在修复错误或添加新功能时对其进行扩展。优点是您将能够准确捕获您认为有用的数据，甚至可以指定日志记录级别以避免被噪音淹没？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T04:06:26.780

不完全确定这是否是您想要的，但“u”将反汇编当前线程上当前 IP 寄存器中的最后一条指令。这将向您显示最后运行的指令，并且您通常可以通过反汇编代码来确定不同寄存器的值。大多数情况下，这是一个缓慢而艰难的过程，但它为您提供了几乎 100% 的准确度（除非出现一些奇怪的硬件问题，或者非常奇怪的代码问题）。我过去曾使用这种方法来弄清楚为什么当我没有源代码时某些事情会被取消。

如果您查看 windbg 帮助文件，您会发现更多信息。

# iphone - UIButton 的标题在 iphone 中未设置为空或空白

> ID：10912197
> 
> 赞同：0
> 
> 时间：2012-06-06T10:12:23.640
> 
> 标签：iphone, xcode

我希望当用户在文本文件中输入错误的值时，它会显示警报，并使文本字段为空，并且按钮标题为空。在我的代码中，文本字段为空，但按钮没有获得空值

下面是我的代码

```
 if (monthText>totalnumber) {
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"Value Must Be Less than total number of dogs " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];

    NSString *titleMonth =@"0";
    [cereniaButton setTitle:@"" forState:UIControlStateNormal];

    cereniaTextField.text=@"";

  }

int year=12;
int monthButtonTitle=monthText*year;
NSString *titleMonth =[NSString stringWithFormat:@"%d",monthButtonTitle];
[cereniaButton setTitle:titleMonth forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:29:40.003

如果您直接分配喜欢会发生什么

[btn setTitle:@"" forState:UIControlStateNormal];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:39:12.147

将标题设置为按钮后写入此行

```
[self.view setNeedsDisplay]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:46:49.690

您正在重置标题，但在您的标题之后会出现 ripopolate。

尝试

```
if (monthText>totalnumber) {
    //...yourcode...

   return;
} 
```

让我知道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:52:19.137

可能是您缺少将按钮与文件所有者连接，试试这个：

1.  将 IBOutlet 声明为 .h 文件中的按钮，由 xib 创建的按钮。
2.  @synthesize btn in .m
3.  将按钮 (btn) 连接到 xib 中的文件所有者。并使用这个委托：

-(void)textFieldDidEndEditing:(UITextField *)textField

```
 int txtValue = [textField.text intValue];
 if(txtValue < 10)

     btn.titleLabel.text = [NSString stringWithFormat:@"%d",txtValue];
        else 
        {
            btn.titleLabel.text = [NSString stringWithFormat:@""];
        } 
    }
    - (BOOL)textFieldShouldReturn: (UITextField *)textField 
    {
        [textField resignFirstResponder];
        return YES;
    } 
```

# actionscript-3 - 动态创建的 Flex Form 仅将最后添加的 CheckBox 识别为 Checkbox

> ID：10912198
> 
> 赞同：0
> 
> 时间：2012-06-06T10:12:43.343
> 
> 标签：actionscript-3, apache-flex, checkbox

我有一个问题一直让我发疯。我使用以下代码在 Flex 中动态创建了一个表单：

```
private function init():void {
            //Dynamically create form based on profiles
            for each(var role:AclRoleDTO in _profiles) { 
                //Create form item
                var fi:FormItem = new FormItem();
                fi.label = role.name;

                //Create checkbox
                var cbx:CheckBox = new CheckBox();
                cbx.id = "role_"+role.id.toString();
                cbx.label = role.description;
                cbx.width = 250;
                cbx.selected = true;

                //Add Checkbox for form item
                fi.addChild(cbx);
                profileForm.addChild(fi);
            }

            //Add save button
            var fib:FormItem = new FormItem();
            var btn:Button  = new Button();
            btn.name    = "Save";
            btn.label   = "Save";
            btn.id      = "saveButton";

            btn.addEventListener(MouseEvent.CLICK, onSubmitClicked);

            fib.addChild(btn);

            profileForm.addChild(fib);
        } 
```

这可以正常工作并创建一个带有 FormItems 的表单，其中包括基于可用配置文件的复选框 + 一个保存按钮来保存这些配置文件。

但是，当用户单击保存按钮以保存配置文件时，我使用以下方法检索选定的框，但该函数仅将最后添加的 CheckBoxes 识别为 CheckBox ...

```
private function onSubmitClicked(event:MouseEvent):void {
            var formElements:Array = profileForm.getChildren();
            var roleIds:ArrayCollection = new ArrayCollection();
            var i:int = 0;
            var j:int = 0;

            //Parse the entire form
            for (i; i < formElements.length; i++) {

                if (formElements[i] is FormItem) {
                    var formItem:FormItem = formElements[i];
                    var itemElements:Array = formItem.getChildren();

                    for (j;j<itemElements.length;j++) {

                        //If form item is a checkbox, check if the box is checked!
                        if (itemElements[j] is CheckBox) {
                            var tmpBox:CheckBox = itemElements[j];

                            if (tmpBox.selected) {
                                //random stuff
                            }
                        }
                    }
                }
            }

            //Send event with roleIds!
            //More random stuff

        } 
```

我已经尝试了各种方法来确保循环正常工作并且确实如此：它循环通过适当数量的 FormItem 元素并检索适当数量的 childrenElements。除了循环通过添加的最后一个 FormItem 时，它只是不将任何子项识别为 CheckBox。如果我使用 flash.utils.getQualifiedClassName(itemElements[j]) 来找出其他 FormItem 子项是什么，它会返回一个空字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:58:59.670

这是您的问题的工作代码：

```
 private function onSubmitClicked(event:MouseEvent):void
        {
            var selectedRoles:ArrayCollection = new ArrayCollection();

            var formItems:Array = rolesForm.getChildren();

            for (var i:int = 0; i < formItems.length; i++)
            {
                var formItem:FormItem = formItems[i];
                var formItemElements:Array = formItem.getChildren();
                for each (var control:UIComponent in formItemElements)
                {
                    if (control is CheckBox)
                    {
                        var tempBox:CheckBox = control as CheckBox;

                        if(tempBox.selected)
                            selectedRoles.addItem(tempBox);
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:46:41.500

我现在无法真正解决问题，但你为什么不简单地引用数组中的 CheckBox 呢？这将是一种快速简便的解决方法。您还将受益于扁平的层次结构，使访问更容易（更快，这在大多数情况下都无关紧要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:24:39.100

假设这是 Flex4 / Spark：原因是您使用的是组件的原始“子代”而不是“元素”。对于 Spark 架构中的容器，您应该始终使用元素（使用类似`numElements`or`getElementAt()`而不是`getChildren()`or的方法`addChild()`）。'children' 方法仅由 Spark 组件在内部使用；你永远不应该使用它们将元素添加到容器中。

因此，如果您将每次出现的替换为 ，您的问题将得到`addChild()`解决`addElement()`。该`onSubmitClicked()`方法可能如下所示：

```
 for (var i:int = 0; i < profileForm.numElements; i++) {
        var formItem:FormItem = profileForm.getElementAt(i) as FormItem;
        if (formItem) {
            var cb:CheckBox = formItem.getElementAt(0) as CheckBox;
            trace(cb); //null if it's not a CheckBox
        }
    } 
```

话虽如此，我认为您没有理由要动态创建此表单。如果您需要的是 CheckBoxes 列表，则`List`使用自定义创建 a 并将`ItemRenderer`a`CheckBox`和设置`_profiles`为其`dataProvider`.

# c# - 连接 Web 服务客户端和映射实体

> ID：10912201
> 
> 赞同：0
> 
> 时间：2012-06-06T10:12:51.113
> 
> 标签：c#, wcf, interface, mapping, service-reference

我有以下（简化的）场景。

有一个 WCF 服务 (MyService)，它公开了一些实体 MyEntityDTO。在客户端，我创建了一个接口 IMyServiceClient，它被传递给我的客户端组件，因此它们可以从任何底层实现请求 MyEntityDTO。而且现在我可以使用一些 MockedMyServiceClient 运行客户端单元测试：IMyServiceClient。目前看来还不错。

现在我创建了一个实际的 MyRealWCFServiceClient ：IMyServiceClient，它基本上只是包装了由 Visual Studio 创建的 WCF 服务引用。

一个问题是 WCF 服务引用返回完全另一种 MyEntityDTO，因此我必须将它从服务引用实体类型映射到从 IMyServiceClient 返回的 MyEntityDTO 类型。我可以为此使用 AutoMapper。

但最大的问题来了。假设，我想在我的项目的其他一些应用程序中重用我的 MyRealWCFServiceClient。如果这些应用程序中的每一个都有自己的 WCF 服务引用和它自己的 DTO 类型，我将不得不以某种方式传递当前服务引用的所有 DTO 类型，并使用一些棘手的反射配置 AutoMapper 以将我的通用类型注入其中。真是一团糟...

但是我可以将我的常见 WCF 引用与他们在一些公共库中包装的 MyRealWCFServiceClients 一起收集，因此所有 MyRealWCFServiceClients 只使用那些已知的常见 WCF 引用。

我想知道，为服务引用创建一个公共库是一种好习惯吗？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:39:05.290

如果您创建一个通用客户端，那么我会将其创建为从服务端发送的可分发程序集。换句话说，创建一个通用客户端，然后分发。不要从客户端构建代理。

至于生成不同的代理（对于DTO），如果您可以引用包含DTO实现的合同程序集。然后使用VS构建代理，代理生成器足够聪明，可以使用引用的原始DataContracts（而不是生成新的代理类）。

所以，我认为你有两个选择。一、创建一个普通客户的项目，然后分发。和/或二，在生成客户端之前引用合约组装目录。

希望这可以帮助。

# java - Spring MVC中的表单处理页面

> ID：10912205
> 
> 赞同：1
> 
> 时间：2012-06-06T10:12:59.607
> 
> 标签：java, spring, model-view-controller, spring-mvc

我是春季新手，如果问题很愚蠢，请见谅。我有 Spring MVC 表单，以及基于注释的控制器中的 2 个方法。

```
@RequestMapping(method = RequestMethod.GET)
public String getUploadForm(Model model) {
    model.addAttribute(new UploadItem());
    initModel(model);
    return "upload/uploadForm";
}

@RequestMapping(method = RequestMethod.POST)
public String create(UploadItem uploadItem, BindingResult result, Model model) throws IOException, ServletException {
    // Some type of file processing...
} 
```

我的业务要求是添加“正在处理任务”页面，因为处理需要几分钟，所以应该通知用户，该任务正在进行中（但不需要进度条）只是简单的按摩：“请稍等"

在 Spring 中是否有任何简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:17:41.310

我认为你所追求的并不完全与春天有关。如果您想在较长的任务运行时显示一些消息，则需要在较长的任务执行时使用 Ajax/JQuery 来显示一些文本/动画。我建议你看一下[这个](http://jquery-howto.blogspot.com/2009/04/display-loading-gif-image-while-loading.html)例子，看看你如何用 JQuery 做这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:55:02.167

我还建议您在客户端处理此问题。最好的方法之一是您可以使用 jquery ajax 调用服务器，它允许您编写自己的方法来执行直到响应返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:54:16.283

thx 伙计们，我正在考虑在后台运行一些线程，然后在服务器端重定向控件，但确实客户端解决方案更好更简单。

我将使用 jquery/js 显示消息并提交表单，甚至不需要 ajax。

# java - 节奏模板引擎优于 Japid for Play Framework 1.x 的优势？

> ID：10912207
> 
> 赞同：4
> 
> 时间：2012-06-06T10:13:04.153
> 
> 标签：java, playframework, template-engine, rythm, japid

Rythm 是 Play 的模板引擎！框架视图。

它是类型安全的，并提供了默认 groovy 模板的替代方案。

Japid 也是一个类似的 Play 模板引擎！Rythm 和 Japid 都在解决类似的问题。

节奏

[http://www.playframework.org/modules/rythm](http://www.playframework.org/modules/rythm)

[http://www.rythmengine.com/](http://www.rythmengine.com/)

雅皮德

[http://www.playframework.org/modules/japid](http://www.playframework.org/modules/japid)

Rythm 比 Japid 有什么优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:47:55.513

Rythm 语法接近 Play2 模板语法，因此迁移路径会更容易。

基于 Ryhtm 的 Razor 语法是为 C# 模板定义的，并且清晰一致。

另一方面，Japid 比 Rythm 更老，因此可以有更多的功能和更少的错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T01:19:37.647

Japid 相对于 Rythm 的最大优势是前者有一个 Eclipse 插件，而后者目前没有工具支持。

Rythm 在提供更好的 Play-1.x 集成方面获胜。请参阅[集成指南](http://www.playframework.org/modules/rythm-1.0.0-RC6/integration)和[迁移指南](http://software-lgl.blogspot.com.au/2012/05/step-by-step-migrate-your-groovy.html)

这里值得一提的另一件事是 Rythm[默认转义表达式输出](http://www.playframework.org/modules/rythm-1.0.0-RC6/user_guide#escape)，如 Groovy 引擎，而 Japid 要求您将其显式转义为`${escape(expr)}`. 也就是说，Rythm 使用起来更安全，而 Japid 对性能的投票更多。

根据我的理解，两者的功能集应该没有其他大的差异。——格林，《节奏》的作者

**更新**

Rythm 刚刚发布了一个名为**[String Interpolation Mode](http://www.playframework.org/modules/rythm-1.0.0-20120630/string_interpolation)** (SIM) 的功能，它允许您在简单的情况下省略参数声明，使其成为`String.format`大多数情况下的良好替代品：

```
String result = Rythm.render("Hello @who!", "world"); 
```

注意 SIM`String.format`以 2 种方式节拍：

1.  表现。`Rythm.render`是 2 到 3 倍比`String.formant`
2.  清除。“Hello @who”比“Hello %s”更清晰。
3.  您只能`String.format()`按位置传递参数，同时`Rythm.render`支持按位置和名称传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T11:18:58.280

我已经实现了[static-mustache 库](https://github.com/sviperll/static-mustache)，以提供基于 mustache 语法的类型安全模板引擎。

它在编译时检查语法错误和类型错误（如缺少属性），如 Rythm 或 Japid。

它几乎需要零构建配置（与需要自定义插件的 Rytm 和 Japod 相比），因为它是标准注释处理器。

在 static-mustache 中，所有类型信息都是从用于呈现的普通 Java 类中提取的。模板语言仍然是纯粹的“无逻辑”胡子。因此模板可以在服务器端和客户端渲染器之间共享。

# sharepoint-2010 - 如何限制用户使用共享点 2010 中的功能更改站点管理员以外的主题？

> ID：10912208
> 
> 赞同：0
> 
> 时间：2012-06-06T10:13:08.280
> 
> 标签：sharepoint-2010

我是 sharepoint 2010 的新手。我想限制用户更改主题，而不是使用 sharepoint 2010 中的功能的站点管理员。我尝试了下面的代码来做同样的事情。

```
 SPSecurity.RunWithElevatedPrivileges(delegate() 

           { 

               SPWebApplication webApp = properties.Feature.Parent as SPWebApplication; 

               SPPolicyRole RestrictThemes; 

               //we are removing the ApplyStyleSheets permission and ApplyThemeAndBorder permission by passing this 

               //to Policyroles. 

               SPBasePermissions RestrictPermissions = SPBasePermissions.ApplyStyleSheets | SPBasePermissions.ApplyThemeAndBorder; 

               //we are not granting any permissions 

               SPBasePermissions GrantPermissions = new SPBasePermissions(); 

               RestrictThemes = webApp.PolicyRoles["Restrict Themes"]; 

               if (RestrictThemes == null) 

               { 

                   RestrictThemes = webApp.PolicyRoles.Add("Restrict Themes", "Restricts themes to be modified by anybody", 

                                                   GrantPermissions, 

                                                   RestrictPermissions); 

                   webApp.Update(); 

               } 

               SPPolicy policy = webApp.Policies.Add("NT Authority\\Authenticated users", "All Authenticated Users"); 

               policy.PolicyRoleBindings.Add(RestrictThemes); 

               webApp.Update(); 
```

});

但是当我尝试这段代码时，它甚至不允许网站管理员。请提供任何想法或建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:25:12.467

为什么要在代码中这样做？应用主题的能力由“[应用主题和边框](http://technet.microsoft.com/en-us/library/cc288074.aspx)”权限控制。默认情况下，这被分配给“设计”权限级别。

只需确保您网站的成员拥有适当的权限，而不是尝试修改每个人的权限。您可以通过修改默认**SharePoint**网站组的权限或创建具有所需权限的新组来执行此操作。

此外，您不应该将权限直接分配给 Windows 组。SharePoint 不会将 Windows（或 AD）组视为 SharePoint 组。您可以通过创建特定的 SP 组并将 AD 组分配给它们来避免很多麻烦。

# button - sencha touch2：鼠标悬停在按钮上时变为光标

> ID：10912210
> 
> 赞同：1
> 
> 时间：2012-06-06T10:13:12.260
> 
> 标签：button, sencha-touch-2

我注意到我的按钮有些问题。我创建了一个按钮，鼠标悬停时鼠标指针变为光标。我知道在移动设备中我们不会有光标，所以这个问题不会存在，但我想知道在浏览器中测试时是否有可能的解决方案？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:47:42.700

您可以附加设置光标的 CSS 规则。

# c - 有什么理由在 64 位 CPU 上使用 32 位整数进行常见操作？

> ID：10912219
> 
> 赞同：10
> 
> 时间：2012-06-06T10:14:13.497
> 
> 标签：c, 64-bit, int, 32bit-64bit

我想知道在 64 位程序上继续使用`int`（在 x86 和 x86_64 上都是 32 位）对于没有什么特别的并且不需要跨越 2^64 的变量（例如迭代计数器）是否是一个好主意，或者如果最好使用`size_t`与 CPU 的字长匹配的。

如果你继续使用`int`你可以节省一半的内存，这可能意味着关于 CPU 缓存的事情，但我不知道在 64 位机器上是否每个 32 位数字都必须在任何使用之前扩展到 64 位。

编辑：我已经用我的程序进行了一些测试（请参阅[自我答案](https://stackoverflow.com/a/10915367/1073006)，我仍然保持 janneb 被接受，因为它很好）。事实证明，有显着的性能改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:28:56.570

对于数组索引和指针运算，与指针大小相同的类型（通常是 size_t 和 ptrdiff_t）可能会更好，因为它们避免了对寄存器进行零或符号扩展的需要。考虑

```
 float onei(float *a, int n)
{
  return a[n];
}

float oneu(float *a, unsigned n)
{
  return a[n];
}

float onep(float *a, ptrdiff_t n)
{
  return a[n];
}

float ones(float *a, size_t n)
{
  return a[n];
} 
```

在 x86_64 上使用 GCC 4.4 -O2 会生成以下 asm：

```
 .p2align 4,,15
.globl onei
    .type   onei, @function
onei:
.LFB3:
    .cfi_startproc
    movslq  %esi,%rsi
    movss   (%rdi,%rsi,4), %xmm0
    ret
    .cfi_endproc
.LFE3:
    .size   onei, .-onei
    .p2align 4,,15
.globl oneu
    .type   oneu, @function
oneu:
.LFB4:
    .cfi_startproc
    mov %esi, %esi
    movss   (%rdi,%rsi,4), %xmm0
    ret
    .cfi_endproc
.LFE4:
    .size   oneu, .-oneu
    .p2align 4,,15
.globl onep
    .type   onep, @function
onep:
.LFB5:
    .cfi_startproc
    movss   (%rdi,%rsi,4), %xmm0
    ret
    .cfi_endproc
.LFE5:
    .size   onep, .-onep
    .p2align 4,,15
.globl ones
    .type   ones, @function
ones:
.LFB6:
    .cfi_startproc
    movss   (%rdi,%rsi,4), %xmm0
    ret
    .cfi_endproc
.LFE6:
    .size   ones, .-ones 
```

可以看出，具有 int 和 unsigned int 索引（onei 和 oneu）的版本需要额外的指令（movslq/mov）来对寄存器进行符号/零扩展。

正如评论中提到的，缺点是对 64 位寄存器进行编码比 32 位部分占用更多空间，从而使代码体积膨胀。其次，ptrdiff_t/size_t 变量比等效的 int 需要更多的内存；如果你有这样的数组，它肯定会影响性能，而不是避免零/符号扩展的相对较小的好处。如果不确定，请配置文件！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:06:44.990

我正在编写一个小[硬球模型](http://en.wikipedia.org/wiki/Hard_spheres "维基百科中的硬球体")。源代码可以在[github](https://github.com/pisto/laurea)上找到。

我试图继续使用`size_t`用作数组索引的变量，以及`int`我在哪里执行与字长无关的其他操作。性能提升非常*显着*：大约 27 到 24 次执行时间下降。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T10:27:48.543

在Cache方面，会节省空间；缓存处理数据块，无论 CPU 是否请求单个地址或等于缓存块大小的完整块。

因此，如果您询问 32 位数字是否在 64 位机器上的缓存内占用 64 位空间，那么答案是否定的，它们仍然会占用 32 位。所以总的来说，它会为你节省一些空间，特别是如果你使用的是频繁访问的大型数组等。

在我个人看来，简单`int`看起来比`size_t`大多数编辑器都无法识别`size_t`类型，因此如果您使用`int`. ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:38:10.960

This should be the compiler developer's decision.

`int` is the natural type for "normal" signed integers. It's up to the compiler to decide what it is.
If, on a specific platform, there's a real advantage in using 64bit integers, the compiler developer is expected to make `int` 64bit. The standard allows it.

If the compiler developer decided to stick with 32bit integers, you should normally trust him.
Maybe, in some rare cases, after a significant optimization effort, you'll find that `long` works better. Then you might want to change.

# php - OpenCart 用户数据库 [BLOB - 198B]

> ID：10912220
> 
> 赞同：1
> 
> 时间：2012-06-06T10:14:16.480
> 
> 标签：php, mysql, blob, opencart

在我的 OpenCart 数据库层中，我有以下示例

```
FirstName   cart        wishlist
John        [BLOB - 132B]   [BLOB - 0B]
Sarah       [BLOB - 198B]   [BLOB - 19B] 
```

这个 BLOB 是什么，我可以做些什么来创建自己的？（我正在创建一个不使用官方的外部注册页面）我可以使用相同的字段还是将它们留空？

MySQL 记录显示 (phpMyAdmin)：

```
Field: cart
Type: TEXT
Length/Values: blank
Default: Null
Collation: ut8_bin
Attributes: Blank 
Null: Checked
Auto Increment: Not Checked
Comments: Blank 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:47:02.787

购物车和愿望清单字段将自动填充已保存的购物车和愿望清单数据，分别用于登录用户。他们习惯于记住一个人在再次登录时添加到购物车/愿望清单中的内容。当有人购买时，购物车字段将被重置

# java - 自定义 Android 实用程序类

> ID：10912223
> 
> 赞同：1
> 
> 时间：2012-06-06T10:14:21.823
> 
> 标签：java, android

我想知道您是否可以指出一个好的 Android Utility 类，其中包含各种常用 Android 和/或 Java 功能的静态方法（例如检查网络可用性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:20:28.953

不完全是你需要的，但在这里可以找到几个.......

[https://github.com/kaeppler/droid-fu/tree/master/src/main/java/com/github/droidfu/support](https://github.com/kaeppler/droid-fu/tree/master/src/main/java/com/github/droidfu/support)

[http://droid4me.googlecode.com/svn/trunk/droid4me/src/com/smartnsoft/droid4me/](http://droid4me.googlecode.com/svn/trunk/droid4me/src/com/smartnsoft/droid4me/)

Android 助手/实用程序类库

您将获得诸如 writeToFile、isNullOrEmpty 和其他 AnimationUtils AppUtils LayoutUtils 之类的实用程序......

[http://developerlife.com/tutorials/?page_id=217](http://developerlife.com/tutorials/?page_id=217)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:19:15.180

> 想知道您是否可以指出一个好的 Android Utility 类，其中包含各种常用 Android 和/或 Java 函数的静态方法

谷歌是你的朋友 :)。你可以收集/编写方法 + 使它们成为静态 + 添加到实用程序类。

**用于检查网络连接。**

```
 ConnectivityManager connectivityManager=ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected()
                    || connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected())
            {
                //Connected to internet

    }
 else
 {
  //Not Connected to internet
 } 
```

# java - webapp 和独立 java 应用程序的不同依赖范围

> ID：10912228
> 
> 赞同：1
> 
> 时间：2012-06-06T10:14:45.880
> 
> 标签：java, tomcat, maven

我正在使用 maven 构建一个在 Tomcat 中运行的 Java Web 应用程序。某些 JAR 文件（例如 mail-1.4.1.jar 和数据库驱动程序）已放入 tomcat/lib 目录，并且 maven 依赖项设置为“provided”。（我不是 100% 确定为什么，但我认为这与 JNDI 有关。）

现在，我在尝试使用`mvn exec:java`. 不出所料，它找不到mail.jar，我得到了错误`java.lang.NoClassDefFoundError: javax/mail/Session`

如何为独立 Java 程序指定 javax.mail scope="runtime" 同时仍然为 Tomcat 应用程序“提供”？我必须使用 Maven 配置文件吗？如果是这样，我在哪里可以找到有关其工作原理的有用文档（配置文件的依赖项是附加的还是它们会覆盖默认的依赖项等？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:10:05.843

您可以阅读[简介简介](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)。

当配置文件处于活动状态时，配置文件中声明的依赖项的范围将覆盖默认范围。因此，您应该能够`<runtime>`在您的个人资料中指定相关 jar 的范围，并使其可用于您的标准应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:29:15.703

Raghuram 的答案是正确的，但我想指出一些事情。

正如 Sonatype 在其博客中所写：http: [//www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)

> 我想非常清楚这个答案。我们强烈建议您不要将 Maven 项目配置为从单个项目创建两个单独的 JAR。它违反了 Maven 最重要的核心概念之一：模块化。

您正在做的事情似乎不在“The Maven Way”中。当你开始被这样一个问题困扰时，你应该总是认为这可能不是你选择的正确解决方案。

关于这种问题有很多话题，围绕着用一个 pom 处理多个工件：

[处理来自单个 Maven 项目的多个工件](https://stackoverflow.com/questions/3915588/handling-multiple-artifacts-from-single-maven-project)

[Maven：附加多个工件](https://stackoverflow.com/questions/8239627/maven-attaching-multiple-artifacts)

...

正如 Raghuram 所建议的，关于如何处理多个环境配置文件有一个很好的建议： [Maven best practice for generate artifacts for multiple environment [prod, test, dev] with CI/Hudson support?](https://stackoverflow.com/questions/2424118/maven-best-practice-for-generating-artifacts-for-multiple-environments-prod-te)

所以，我建议你拆分你的项目，考虑它们之间的真正关系。它可能会驱使您进入一个多模块项目，例如

```
parent
|
+--project:jar
|
+--web-app:war 
```

...

看看这里： http: [//www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:18:58.833

是的，正如 Raghuram 所建议的，创建具有不同范围的依赖项的配置文件是可行的。

```
<profiles>
    <profile>
        <id>standalone</id>
        <dependencies>
            <dependency>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
                <version>1.4.1</version>
                <scope>runtime</scope>
            </dependency>
        </dependencies>
    </profile>
</profiles> 
```

根据 Web 应用程序的需要，在其他地方使用提供的范围声明工件。

运行使用：

> mvn exec:java -Dexec.mainClass=XXX -Pstandalone

但我不相信使用配置文件是正确的答案。

# objective-c - facebook ios api 发布到页面 - 链接或消息

> ID：10912229
> 
> 赞同：0
> 
> 时间：2012-06-06T10:14:47.577
> 
> 标签：objective-c

我在 facebook 上创建了一个页面，并希望发布到该页面。我的 facebook 用户是该页面的管理员。通过请求“我/帐户”，我取回了该页面的 access_token 和 id，下面的代码发布到该页面。

```
Facebook* facebook = app.facebook;

NSDictionary* pg = [fbpages objectAtIndex:0]; // page access_token, id and name 
NSLog(@"page %@\n",[pg valueForKey:@"name"]);

NSMutableDictionary *params = [[NSMutableDictionary alloc] init];       

NSString *graphPath = [NSString stringWithFormat:@"%@/feed", [pg valueForKey:@"id"] ];
[params setObject:[pg valueForKey:@"access_token"] forKey:@"access_token"];
[params setObject:@"This is my message coming from my ios app." forKey:@"message"];

// ----- specify that this is a link ----------------------
[params setObject:@"link" forKey:@"type"];
[params setObject:@"http://www.whatever.com" forKey:@"link"];
// ------ this is the difference between case 1 and 2 -----

[facebook requestWithGraphPath:graphPath andParams:params andHttpMethod:@"POST" andDelegate:app]; 
```

现在，奇怪的是，（case1）如果我发布一条简单的消息（没有指定链接部分），它会出现在页面上，因为它是由页面发布的，（case2）但是当链接信息存在时，它会出现作为我的帖子。
case1 -以简单消息的 形式出现在时间线的左侧**case2 - 以“其他帖子”的形式出现在时间线的****右侧**，并且页面未呈现，而仅显示“附件”标志。

 **除了“type”和“link”这两个参数，case 1 和 2 相同。有人遇到过同样的问题吗？有什么建议么？我究竟做错了什么？我希望我发布到页面的链接与它在用户墙上的显示方式相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:18:06.043

好吧，自己想通了。如果我使用给定页面的令牌调用 requestWithGraphPath，它会按预期工作。

所以它看起来像：

```
facebook.accessToken = [pg valueForKey:@"access_token"];
[facebook requestWithGraphPath:graphPath andParams:params andHttpMethod:@"POST" andDelegate:app]; 
```

显然，当请求完成时，您需要重置原始的 accessToken。**

# php - MySQL从不在另一个表中的表中选择特定条目

> ID：10912230
> 
> 赞同：2
> 
> 时间：2012-06-06T10:14:51.903
> 
> 标签：php, mysql, sql, database

尝试从不在另一个表中的表中选择特定条目时，我在 MySQL 中遇到问题。我知道这句话听起来很疯狂，但这是我正在尝试做的一个例子。

表用户：

```
 user_id,username,password (plus other columns not important to this) 
```

表文章：

```
 article_is,user_id,content (plus others) 
```

表视图（如果用户查看特定文章，则用于存储数据）：

```
 view_id,article_id,user_id,date 
```

现在，我正在尝试选择那些没有阅读特定文章的用户，例如 id 为 10 的文章。所以他们在视图表中没有条目。

我希望它现在更有意义。感谢您的回答。五。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:30:06.093

```
SELECT user_id FROM users u
LEFT JOIN views v ON v.user_id=u.user_id AND v.article_id = 10
WHERE v.user_id IS NULL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T10:17:13.663

尝试这个：

```
SELECT user_id
FROM users
WHERE user_id NOT IN (
  SELECT user_id
  FROM views
  WHERE article_id = 10
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T10:30:34.247

doing NOT IN queries are not typically great for performance... instead, using LEFT JOIN and looking for NULL would be better.

```
select 
      u.User_ID
   from 
      Users U
         LEFT JOIN Views V
            on U.User_ID = V.User_ID 
           AND v.Article_ID = 10
   where
      V.User_ID IS NULL 
```

# codeigniter - Codeigniter邮件库，第五个参数错误

> ID：10912235
> 
> 赞同：1
> 
> 时间：2012-06-06T10:15:31.243
> 
> 标签：codeigniter, php

托管我网站的公司禁用了 mail() 中的第五个参数，并且无法激活它。我想知道他们为什么要这样做？是否存在安全风险？

我在开发时使用 Codeigniter。当我使用他们的邮件库时，我收到以下 PHP 警告：“mail()：策略限制生效。第五个参数在此系统上被禁用”。我想知道我应该如何编写代码，以免收到警告。

这是我今天的代码的样子：

```
$this->load->library('email');
$this->email->from('My e-mail', 'Web site´s name');
$this->email->to('An e-mail');
$this->email->subject('A subject');
$this->email->message("A message");

if ($this->email->send()) { } else { } 
```

我需要更改什么以避免警告？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:23:00.467

这是因为 PHP 在安全模式下运行，您可以在导致警告的函数调用之前添加“@”，因为您无能为力（我猜您在共享主机上）。

例子：

```
@functionCauingWarning($param1, $param2); 
```

当然，只有当它与警告一起工作时。

# mysql - SQL 选择不同的行，如果为空则忽略行

> ID：10912237
> 
> 赞同：23
> 
> 时间：2012-06-06T10:15:48.107
> 
> 标签：mysql, phpmyadmin

我正在使用 sql 查询从表中获取行。我只想选择具有不同值的行，如果没有为某些行输入值，则该行不应该存在。

```
SELECT DISTINCT meta_value FROM `wp_postmeta` WHERE meta_key = "aaa"; 
```

这是我正在使用的查询，我通过这个查询得到了不同的行，但也得到了空白行。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-06T10:18:35.443

简单的解决方案：

```
SELECT DISTINCT meta_value 
FROM `wp_postmeta` 
WHERE meta_key = "aaa" AND meta_value != ""; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-06T10:29:51.883

Try this query with `IS NOT NULL`

```
SELECT DISTINCT meta_value
FROM `wp_postmeta`
WHERE meta_key = "aaa"
AND meta_value IS NOT NULL ; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-21T15:25:10.697

我会用

```
where meta_key = "aaa"
AND (meta_value IS NOT NULL or meta_value != ""); 
```

但这取决于您使用的引擎，最重要的是 - 您插入空值的方式。空 <> 0 <> ' '

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T10:19:45.093

```
SELECT DISTINCT meta_value
FROM `wp_postmeta`
WHERE meta_key = "aaa"
AND meta_value != ""; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-10T13:20:09.117

您需要处理`meta_value`列中的空值。你可以像下面这样。

```
SELECT DISTINCT meta_value FROM wp_postmeta WHERE meta_key = 'aaa' and meta_value != ISNULL(meta_value,'') 
```

希望这会正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-14T10:25:28.923

在此查询中，显示不同的值，如果列包含一些空值，也会被删除。

" `select distinct color from tbl_product where color is not null`"

我希望这段代码对所有人都有帮助..

# java - 如何从托管 bean 中的 ejb 访问 jpql 返回的集合

> ID：10912239
> 
> 赞同：1
> 
> 时间：2012-06-06T10:15:53.927
> 
> 标签：java, jakarta-ee, jpa, managed-bean

我有一个应用程序，我需要使用 sum() 和 Func(year,...) 函数触发 jpql 查询，这意味着只有 2 个字段将被提取并存储到一个集合中，然后将这个集合返回到托管 bean。现在我的问题是我如何使用这个集合来检索每个值。下面是会话 bean 和托管 bean 代码：

```
 public Collection getScripQtyYearWise(Integer scripID)
 {
    try
    {
     Collection coll=em.createQuery("select sum(t.tradeExecutedQuantity), FUNC('YEAR',t.tradeDateTime) from TradeStock t where t.scripID.scripID = :scripID group by FUNC('YEAR',t.tradeDateTime) ").setParameter("scripID", scripID).getResultList();
     return coll;
    }catch(Exception e){return null;}
 } 
```

例如返回的数据： sum(qty) 年 210 2011 198 2012 我需要提取在 followinf 托管 bean 中返回的每条记录中的每个值：

```
 objejb=(StockCommodityEJBStateless) new InitialContext().lookup("StockCommodityTest");
 Collection coll=objejb.getScripQtyYearWise(scripID1); // how to use this collection? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:29:11.680

`coll`是`Collection`of `Object[]`，所以你可以像这样解析它：

```
 for (Object o : coll) {
        Object[] res = (Object[]) o;
        Object sum = res[0];
        Object year = res[1];

    } 
```

如果你想要一个 List 而不是 Object[] 你可以像这样改变你的选择：

```
Collection coll=em.createQuery("select new list(sum(t.tradeExecutedQuantity), FUNC('YEAR',t.tradeDateTime)) from TradeStock t where t.scripID.scripID = :scripID group by FUNC('YEAR',t.tradeDateTime) ").setParameter("scripID", scripID).getResultList(); 
```

[在这里](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/queryhql.html#queryhql-select)阅读更多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:28:41.797

这样的查询将返回一个`List<Object[]>`. 每个 Object[] 将包含两个元素：总和和函数调用的结果。

因此，迭代结果，并为每个结果创建一个有意义的对象：

```
public List<ScripQtyYearWise> getScripQtyYearWise(Integer scripID) {
    List<Object[]> list = em.createQuery("...").list();
    List<ScripQtyYearWise> result = new ArrayList<ScripQtyYearWise>(list.size());
    for (Object[] row : list) {
        result.add(new ScripQtyYearWise((Long) row[0], (Date) row[1]));
    }
    return result;
} 
```

# android - 如何在android中进行多个facebook帐户登录？

> ID：10912242
> 
> 赞同：0
> 
> 时间：2012-06-06T10:16:07.710
> 
> 标签：android, facebook, facebook-oauth

我正在创建一个 Android 应用程序，用户可以通过该应用程序使用不同的 Facebook 帐户在 Facebook 上发布消息并更新他们的状态，因此他们是否有可能使用同一个（我的）应用程序进行多个 Facebook 登录，请向我提供建议我该怎么做在安卓。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:30:14.967

如果您使用 fb android sdk 进行身份验证，则登录名将绑定到移动设备上主要 facebook 应用程序（katana）中的登录用户（如果已安装）。

即使您在用户下次打开应用程序时将其从您的应用程序中注销，仍然会使用同一用户，因为他是使用 facebook 应用程序登录的。
只有当用户退出 Facebook 应用程序并使用其他帐户登录时，您的应用程序才能使用该帐户。

您可以做的是在没有 SSO 的情况下对用户进行身份验证。
在这种情况下，就像设备上未安装 facebook 应用程序一样，身份验证是使用打开 oAuth 对话框的 SDK 进行的。
这种方法的问题是用户需要输入他的电子邮件和密码，这对于大多数移动设备来说并不是那么有趣的任务。
如果您决定采用这种方法，请阅读此主题：[How to disable Facebook single sign on for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)

# javascript - 使用正则表达式和 javascript 查找字符串

> ID：10912245
> 
> 赞同：0
> 
> 时间：2012-06-06T10:16:16.477
> 
> 标签：javascript, regex

我试图匹配`6c81748b9239e96e`每次随机的字符串。使用下面的代码。我的问题是它匹配整个字符串，我只需要包含字母和数字的随机字符串。

细绳

```
<a href="playgame.aspx?gid=4&tag=6c81748b9239e96e">Play</a> 
```

正则表达式

```
string.match(/\&tag\=[A-Za-z0-9]+\"\>/i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:21:29.143

您可以使用正则表达式组进行匹配，然后访问您所追求的模式。您需要使用的正则表达式是这样的：`/\&tag\=([A-Za-z0-9]+)\"\>/i`. 圆括号 (`(`和`)`) 将表示您要捕获的组。[然后，您可以访问捕获组，如此处](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regex)所示。

编辑：仔细检查后，您似乎可能使用了不正确的正则表达式。我不太习惯 Javascript 正则表达式，但似乎您正在转义`&`and`=`和`>`，这不是必需的。试试这个：`/&tag=([A-Za-z0-9]+)\">/i`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:21:36.857

这是我的建议：

1.  将@Artem Barger 提供的代码段添加到您的代码中：[https](https://stackoverflow.com/a/901144/851498) ://stackoverflow.com/a/901144/851498 不过，您需要稍微修改它（添加`str`参数）：

    ```
    function getParameterByName( name, str )
    {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec( str );
        if(results == null)
            return "";
        else
          return decodeURIComponent(results[1].replace(/\+/g, " "));
    } 
    ```

2.  以这种方式使用它：

    ```
    var str = getParameterByName( 'tag', string ); 
    ```

Jsfiddle 演示：http: [//jsfiddle.net/Ralt/u9MAv/](http://jsfiddle.net/Ralt/u9MAv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:25:04.373

```
var myregexp = /(&tag=)([A-Za-z0-9]+)\b/img;
var match = myregexp.exec(subject);
while (match != null) {
    for (var i = 0; i < match.length; i++) {
        // matched text: match[i]
    }
    match = myregexp.exec(subject);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:29:55.290

你的正则表达式

```
&tag=([A-Za-z\d]+)" 
```

它被简化了（你逃脱了太多）并添加了括号以将你想要的东西放在第 1 组中

在 javascript 中，这变成

```
var myregexp = /&tag=([A-Za-z\d]+)"/;
var match = myregexp.exec(subject);
if (match != null) {
    result = match[1];
} else {
    result = "";
} 
```

解释

```
Match the characters “&amp;tag=” literally «&tag=»
Match the regular expression below and capture its match into backreference number 1 «([A-Za-z\d]+)»
   Match a single character present in the list below «[A-Za-z\d]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      A character in the range between “A” and “Z” «A-Z»
      A character in the range between “a” and “z” «a-z»
      A single digit 0..9 «\d»
Match the character “"” literally «"» 
```

# javascript - 通过 Jquery 发布表单不传递数据

> ID：10912253
> 
> 赞同：0
> 
> 时间：2012-06-06T10:16:54.550
> 
> 标签：javascript, jquery, html, ajax

我正在使用以下代码发布表单，但没有将表单数据传递给后面的代码？

```
 <script type="text/javascript">
        $(document).ready(function () {

            $("#Submit").live("click", function () {
                var formData = $("#CreateOrder").serialize();
                $.post("/Orders/SaveExtra", formData, function (result) {                    
                    if (result.created) {
                        alert("Saved successfully!");
                    } else {
                        alert("Error!");
                    }
                });                
            });
        });
    </script>

    <input id='Submit' type='submit' value='Save Extra' style="height: 30px; width: 130px; margin-top:8px;margin-right: 15px; float:right " />   

<form id="CreateOrder" method="post" action="/Orders/Create" enctype="application/x-www-form-urlencoded" >     

...

</form> 
```

我的主表单调用了与保存方法不同的方法，所以我需要两次提交，但它似乎没有从表单中发布数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:23:23.837

在帖子的第一个参数中，您需要指定服务**的完整路径**。例子：

```
$.post("http://localhost:8080/Orders/SaveExtra", formData, function(result){...} 
```

附带说明一下，如果您的 jquery 版本高于 1.7，建议您将 .live() 更改为 .on()，因为不推荐使用 .live()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:07:25.627

如果您收到的数据是`JSON`，我会将其作为值添加到 POST 调用中`datatype`。

```
 $.post("/Orders/SaveExtra", formData, function (result) {                    
           if (result.created) {
                alert("Saved successfully!");
            } else {
                   alert("Error!");
            }
   },"json"); 
```

如果您使用的是 jQuery 1.7+，我建议您切换到[`on`](http://api.jquery.com/on/)而不是`live`. 所以你的代码看起来像

```
 $(function(){
      $(document).on("click","#Submit",function(e){
          e.preventDefault();
          var formData = $("#CreateOrder").serialize();
          $.post("/Orders/SaveExtra", formData, function (result) {                    
              if (result.created) {
                   alert("Saved successfully!");
               } else {
                   alert("Error!");
               }
         },"json");   
       });
 }); 
```

# sql - JPA/SQL 中依赖于语言的 ORDER BY

> ID：10912255
> 
> 赞同：0
> 
> 时间：2012-06-06T10:17:07.290
> 
> 标签：sql, jpa, jpa-2.0

我使用 Hibernate 作为具有命名查询的 JPA 提供程序，并想知道是否有一种本地方式来订购结果语言相关的。底层数据库是一些 Oracle R10。

假设您有一个表格动物，其中有一个英文名称列和一个拉丁名称列（可能还有更多.. 法语、德语、意大利语、西班牙语），您必须根据其中一种语言进行排序。

要获得有序列表，您可以使用不同的选择语句，例如这些

```
SELECT animal from Animal animal order by animal.name_EN;
SELECT animal from Animal animal order by animal.name_LA;
SELECT animal from Animal animal order by animal.name_FR; 
```

等等。或者我所做的是编写一个比较器来根据语言对结果列表进行排序。

有没有更好、更优雅的方式来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:25:49.977

相反，操作系统为表中的每种语言添加一列，您应该规范化并有一个附加表 ANIMAL_TRANSLATION：

```
ID : technical ID, auto incremented
ANIMAL_ID: foreign key to the ANIMAL table
LANGUAGE: the language of this translation
NAME: the translated name 
```

然后，您将在 Animal 和 AnimalTranslation 之间建立一个 OneToMany 关联：

```
public class Animal {
    /**
     * The translations, indexed by language
     */
    @OneToMany(mappedBy = "animal")
    @MapKey(name = "language")
    private Map<String, AnimalTranslation> translations;

    ...
}

public class AnimalTranslation {
    @ManyToOne
    @JoinColumn(name = "ANIMAL_ID")
    private Animal animal;

    ...
} 
```

例如，您的查询可能是：

```
select translation from AnimalTranslation translation
inner join fetch transalation.animal animal
where translation.language = :language
order by translation.name; 
```

这将检索给定语言的所有动物翻译及其动物。

这可能看起来更复杂，但也更加规范化，并且不会在每次出现新语言时都强制您更改架构和实体。

# jquery - 禁用可拖动对象时这个参数是什么？

> ID：10912257
> 
> 赞同：0
> 
> 时间：2012-06-06T10:17:15.907
> 
> 标签：jquery

禁用可拖动对象时，下面的 1 参数是什么，是等待禁用可拖动对象的秒数吗？

```
$("#drop-target").droppable({
    drop: function(event, ui) {
        ui.draggable.draggable("disable", 1); 
}); 
```

我在 Boblet 的回答中看到了这个问题：[如何禁用 jquery-ui 可拖动？](https://stackoverflow.com/questions/1324044/how-to-disable-jquery-ui-draggable)

如果此构造函数无效，为什么它会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:44:56.393

哪有这回事。不需要传递1。我在jquery可拖动中找不到这个构造函数。

你从哪儿弄来的这个？

# android - Android ExceptionInitializerError

> ID：10912259
> 
> 赞同：0
> 
> 时间：2012-06-06T10:17:23.003
> 
> 标签：android

我在以下代码行中收到“ExceptionInitializerError”：

（活动一）

```
Activity2.selection = AudioColumns.ARTIST + "=?"; 
```

（活动二）

```
static String selection; 
```

有人可以告诉我我做错了什么吗？

有关完整代码，请参见下文。

（活动一）

```
package awesome.music.player;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.BaseColumns;
import android.provider.MediaStore;
import android.provider.MediaStore.Audio.AlbumColumns;
import android.provider.MediaStore.Audio.ArtistColumns;
import android.provider.MediaStore.Audio.AudioColumns;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class ArtistsActivity extends Activity implements OnItemClickListener {

    private Cursor artistCursor;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.artistsview);

        String[] artistColumns = { BaseColumns._ID, ArtistColumns.ARTIST };
        // The columns to return for each row.

        artistCursor = managedQuery(
                MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI, artistColumns,
                null, null, null);

        ListView listView = (ListView) findViewById(R.id.listViewArtists);
        listView.setOnItemClickListener(this);
        // set an on item click listener to the first list view in this activity

        String[] displayFields = new String[] { ArtistColumns.ARTIST };
        // set all the artist names to the array "displayfields"
        int[] displayViews = new int[] { R.id.artistTitle };
        // number of rows to display and where to bind them

        SimpleCursorAdapter artistAdapter = new SimpleCursorAdapter(this,
                R.layout.artistitem, artistCursor, displayFields, displayViews);
        listView.setAdapter(artistAdapter);
    }

    // Take the display fields array, and bind to the matching display row

    public void onItemClick(AdapterView<?> a, View v, int position, long id) {
        if (artistCursor.moveToPosition(position)) {

            Playlist.selection = AudioColumns.ARTIST + "=?";

            Playlist.selectionArgs = new String[] { artistCursor
                    .getString(artistCursor.getColumnIndex(AlbumColumns.ARTIST)) };

            Playlist.artist = artistCursor.getString(artistCursor
                    .getColumnIndex(ArtistColumns.ARTIST));

            Intent intent = new Intent(ArtistsActivity.this,
                    ArtistAlbumsActivity.class);

            startActivity(intent);

        }
    }

} 
```

（活动二）

```
package awesome.music.player;

import java.util.ArrayList;

import android.content.ContentUris;
import android.net.Uri;

public class Playlist {

    static ArrayList<String> pathList = new ArrayList<String>();
    static ArrayList<String> artistList = new ArrayList<String>();
    static ArrayList<String> albumList = new ArrayList<String>();
    static ArrayList<String> titleList = new ArrayList<String>();
    static ArrayList<String> idList = new ArrayList<String>();
    static ArrayList<String> durationList = new ArrayList<String>();

    static int currentSongIndex;
    static String currentSongPath;
    static String artist;
    static String album;
    static String albumId;
    static String numSongs;
    static String selection;
    static String[] selectionArgs;
    static String totalSongduration; // Set

    static String songDuration = durationList.get(currentSongIndex);

    static String currentAlbumId = Playlist.idList
            .get(Playlist.currentSongIndex);

    static Integer currentAlbumIdLong = Integer.parseInt(currentAlbumId);

    static Uri artworkUri = Uri
            .parse("content://media/external/audio/albumart");

    static Uri currentSongUri = ContentUris.withAppendedId(artworkUri,
            currentAlbumIdLong);;

    static int totalSongDuration = Integer.parseInt(songDuration);

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:23:07.970

抛出 ExceptionInInitializerError 以指示在评估静态初始化程序或静态变量的初始化程序期间发生异常。检查您的代码是否有任何静态初始化逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:21:06.223

不要使用`Static`它是一个坏习惯，而是使用“静态”使一个对象成为类并使用它。

```
public class Playlist {

    ArrayList<String> pathList = new ArrayList<String>();
....
...
} 
```

实施。

```
public class ArtistsActivity extends Activity implements OnItemClickListener {

    private Playlist mPlaylist;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.artistsview);
        mPlaylist= new Playlist();
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T22:28:53.147

检查 处的静态初始化`Playlist`，就像`Integer.parseInt(currentAlbumId);`在初始化处`currentAlbumId`有`null`值一样。

# c# - listbox.itemsource = null; 在 wp7 中抛出异常

> ID：10912261
> 
> 赞同：0
> 
> 时间：2012-06-06T10:17:26.147
> 
> 标签：c#, silverlight, windows-phone-7, xaml, listbox

我有一个列表框和一个文本框。我想处理它的 keyup 事件，但它给了我一个错误。

```
<ListBox Name="lstSelectedNumber" Height="50" MaxHeight="120" VerticalAlignment="Top" Grid.Column="1" SelectionChanged="lstSelectedNumber_SelectionChanged">
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Padding" Value="-15" />
                                    <Setter Property="Margin" Value="0"/>
                                </Style>
                            </ListBox.ItemContainerStyle>
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <toolkit:WrapPanel>
                                    </toolkit:WrapPanel>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                    <TextBox x:Name="txtNumber" Text="{Binding Name,Mode=TwoWay}" IsEnabled="{Binding IsEnabled,Mode=TwoWay}" Background="Transparent" Foreground="{StaticResource ContactSelectorBrush}" Style="{StaticResource DialNumberStyle}" FontSize="24" KeyUp="txtNumber_KeyUp">
                                        <TextBox.CaretBrush>
                                            <SolidColorBrush Color="{StaticResource CaretBrush}" />
                                        </TextBox.CaretBrush>
                                    </TextBox>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

private void txtNumber_KeyUp(object sender, KeyEventArgs e)
      {
          TextBox txtbox = sender as TextBox;
          if (txtbox.Text.Contains(';'))
          { 
              lstSelectedNumber.ItemsSource = null;
              // My Application Got crashed at this point when i assign nullto item source
              lstSelectedNumber.ItemsSource = lstContactModel;
          } 
```

是否有任何替代我更新的集合是该列表框的 itemsource。请告诉我任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:22:33.573

那是因为它会触发`lstSelectedNumber_SelectionChanged`事件。将调试器放在异常语句上并按 F11 将带您进入此事件。

代替

```
lstSelectedNumber.ItemsSource = null;
lstSelectedNumber.ItemsSource = lstContactModel; 
```

和

```
lstSelectedNumber.SelectionChanged -= lstSelectedNumber_SelectionChanged;
lstSelectedNumber.ItemsSource = null;
lstSelectedNumber.ItemsSource = lstContactModel;
lstSelectedNumber.SelectionChanged += lstSelectedNumber_SelectionChanged; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:48:01.460

我自己解决了这个问题。问题是，当我的文本框事件被调用时，它会在我的列表中进行一些更改并将空源绑定到我的列表框，并且此更改会影响我的 UI 和 UI 无法处理该更改，因此我将所有代码都放在调度程序中事情已经完成，它反映了 UI 的变化和 UI 接受

```
 private void txtNumber_KeyUp(object sender, KeyEventArgs e)
        {
            TextBox txtbox = sender as TextBox;
            if (txtbox.Text.Contains(';'))
            {
                Dispatcher.BeginInvoke(() =>
                { 
                    lstSelectedNumber.ItemsSource = null;
                    lstSelectedNumber.ItemsSource = lstContactModel;
                });
            }
        } 
```

# django - Django-tables2 在视图上定义自定义列

> ID：10912263
> 
> 赞同：0
> 
> 时间：2012-06-06T10:17:38.777
> 
> 标签：django, dynamic, dry, django-tables2

我想像这样定义一个通用的 django-tables2 表：

```
类 GenericTable(tables.Table):
    c1 = tables.TemplateColumn("占位符")

```

现在，根据我的观点，我想做这样的事情*（警告 - 伪代码）*：

```
g=GenericTable() # 现在不向表传递数据
g.columns[0].verbose_name="基于视图的特定名称"
g.columns[0].template = "基于视图的特定模板"
g=初始化（[...]）

```

有没有办法做到这一点 ？

如果那不可能，是否可以在初始化之前更改 GenericTable 类的定义？

我可以定义许多具有不同 c1 字段的表，但这不会是 DRY :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:32:38.060

你可以在 init 方法中......它是一样的：

```
class GenericTable(tables.Table):

    def __init__(self, name_based_in_the_view, *args, **kwargs):
        super(GenericTable, self).__init__(*args, **kwargs)
        self.base_columns['c1'].verbose_name = name_based_in_the_view 
```

在您看来：

```
g = GenericTable(name_based_in_the_view = "Specific name based on view") 
```

# python - Python：并发读取和写入同一个文件

> ID：10912266
> 
> 赞同：1
> 
> 时间：2012-06-06T10:17:59.447
> 
> 标签：python, apache, file

我有一个写入自定义日志文件的 Apache 服务器（通过 cgi 脚本）。我还有一个 Python 脚本，它会定期获取该日志文件的尾部。这是我的尾巴功能：

```
def tail(f, window = 1):
    f = open(f, 'r')
    BUFSIZ = 1024
    f.seek(0, 2)
    bytes = f.tell()
    size = window
    block = -1
    data = []
    while size > 0 and bytes > 0:
        if (bytes - BUFSIZ > 0):
            # Seek back one whole BUFSIZ
            f.seek(block*BUFSIZ, 2)
            # read BUFFER
            data.append(f.read(BUFSIZ))
        else:
            # file too small, start from begining
            f.seek(0,0)
            # only read what was not read
            data.append(f.read(bytes))
        linesFound = data[-1].count('\n')
        size -= linesFound
        bytes -= BUFSIZ
        block -= 1

    f.close()
    return '\n'.join(''.join(data).splitlines()[-window:]) 
```

单独来看，Python 脚本和 Apache 日志都可以正常工作。但是，当我让他们同时处理同一个日志文件时，日志文件将停止更新。

如何在 Python 中实现不干扰 Apache 写入的尾部读取功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:23:45.057

您可以查看[pytailer](http://code.google.com/p/pytailer/)项目或 ActiveState 上的这个[配方](http://code.activestate.com/recipes/157035-tail-f-in-python/)，以获得有关实现细节的一些灵感。

# printing - 打印中缺少 jstree 图标

> ID：10912267
> 
> 赞同：0
> 
> 时间：2012-06-06T10:18:11.040
> 
> 标签：printing, icons, themes, jstree

我有一个使用 jstree 的网页。它完美地展示了我想要的东西。但是当我打印页面时，打印中缺少 jstree 图标。

知道为什么会这样吗？

我尝试了大多数可能的 CSS 设置。

我使用的代码在这里。以下是图像 1\. 显示和 2\. 打印。

```
$(document).ready(function () {
    $('#Tree').jstree({ "themes": {
        "theme": "apple"
    },
        "plugins": ["themes", "html_data"]
    });
    $.jstree._themes = GetThemePath() + "jsTree/themes/";
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:04:28.000

您可能想使用插件进行打印： [http ://www.jquery4u.com/plugins/10-jquery-print-page-options/](http://www.jquery4u.com/plugins/10-jquery-print-page-options/)

我过去曾成功使用过 jqPrint。

# ruby - “使用依赖项保存页面”（使用 Nokogiri？）

> ID：10912268
> 
> 赞同：1
> 
> 时间：2012-06-06T10:18:15.277
> 
> 标签：ruby, rubygems, nokogiri

我想在 ruby​​ 中开发一个“页面下载器”——给定一个 url，它会下载 html、相关的 css、图像文件和 javascript，然后更改 html 以引用本地副本而不是远程副本。就像某些浏览器使用“另存为完整页面”选项一样。

我正在考虑使用 Nokogiri 进行页面的初始解析。但我不确定它是否是这项工作的最佳工具：

*   它可以获取外部依赖项（样式表、图像和 javascript）的列表吗？我不关心 javascript 生成的依赖项。
*   它会解析 CSS 吗？我可能也想下载图像或@imported css 文件。

是否有一颗宝石已经可以满足我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:11:16.600

1.  不，Nokogiri 不知道外部依赖项。您可以执行以下操作：

    ```
    js_urls  = doc.xpath('//script/@src').map(&:content)
    css_urls = doc.xpath('//link/@href').map(&:content)
    img_urls = doc.xpath('//img/@src').map(&:content) 
    ```

    ……但这不会找到：

    *   由 JavaScript 动态加载的脚本或 CSS（创建元素并将它们附加到文档
        *中）你说你不关心*
    *   JavaScript 请求的图像，例如`var img = new Image; img.src="...";`
        *你说你不关心的图像*
    *   从 CSS 链接的 CSS，例如`@import url(foo.css);`
    *   CSS 引用的图像，例如`#nav { background:url(/images/navhead.png) }`

    此外，您将返回的所有 URL 都可能与当前 URL 相关，因此您需要[解析相对 URL](https://stackoverflow.com/questions/4861517/getting-the-absolute-url-when-extracting-links)。

2.  不，Nokogiri 是一个 X/HTML DOM 库（位于 libxml2 之上）。它不解析 JavaScript，不执行 JavaScript，不解析 CSS，也不能将 CSS 应用到页面。它不是网络浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:53:06.887

看来我想要的还没有实现。Nokogiri 可用于解析 html，还有其他可以解析 CSS 的 gem（即 css_parser），但我个人没有使用过它们，它们可能会遇到现代 css 的问题（媒体查询、导入等） ）。

# php - PHP - 无法在返回的数组中回显值

> ID：10912275
> 
> 赞同：0
> 
> 时间：2012-06-06T10:18:47.160
> 
> 标签：php, mysql, arrays, foreach, pdo

我有一个从 Mysql 数据库中检索数据、将值存储在数组中并将该数组返回给调用函数的函数。

```
$stmt = $dbh->prepare("SELECT img_file_name FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_active = 0 AND post_id = ? ");
        $stmt->bindParam(1,$post_id);
        $stmt->execute();

        $resultarray = array();

        while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

                $resultarray[] = $row;
        }

        return $resultarray; 
```

我试图在该数组中回显 $values，如下所示：

```
$resultarray = get_post_data($post_id);

print_r($resultarray);

foreach($resultarray as $key => $value){
    echo 'The value is: '. $value . '<br />';
} 
```

但是当我浏览网页时，它只会回显“Array”。当我 print_r 数组时，值肯定在数组中。那么如何正确显示这些值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:23:06.497

说得通。当你保存`$row`到你的数组时，你实际上是在创建一个二维数组。`$row`是一个数组，即使您只选择了一个值。如果您只想保存您选择的图像文件名，请保存`$row['img_file_name']`到数组中，而不是`$row`.

或者，使用 echo`$value['img_file_name']`而不是`$value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:20:04.503

替换此行

```
$resultarray[] = $row; 
```

有了这个：

```
$resultarray[] = $row['img_file_name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:24:29.363

```
foreach($resultarray as $row){
    foreach($row as $key=>$value) {
        echo 'The value is: '. $value . '<br />';
    }
} 
```

# python - Redis：内存优化/性能策略

> ID：10912281
> 
> 赞同：3
> 
> 时间：2012-06-06T10:19:00.953
> 
> 标签：python, memory, redis, nosql

我编写了一个应用程序，它本质上是嗅探以太网设备，并研究某些模式。我正在使用 Python 和 Scapy 来捕获数据。由于需要在数据库中捕获数据以供后代使用，并且用于模式研究，我们正在考虑以下策略。

1）我们希望使用高性能的键值存储来捕获基本数据。这基本上是一个 key:value 存储，大约有 200 个键。2）每隔一小时，我们将汇集密钥存储，并根据某些条件和模式，我们将根据存储在 K:V 存储中的值填充 Postgres 数据库。

我们计划将 Redis 用于 K:V。我们曾考虑过其他解决方案，包括数据库、基于文件的缓存等，但存在性能瓶颈。一方面，每分钟要处理数千个数据包，并且从数据库来回调用 SQL 会减慢程序的速度。

我从未使用过 Redis。但有人告诉我它是最快和最有效的 K:V No SQL 数据存储。并且 redis python APi 使它非常 Pythonic。基本上数据库存储将有 200 个奇数键和一个长整数值，与 80% 的键相关联，或者在某些情况下，字符字段少于 200 个字符。

问题

1）这是正确的方法吗？2) 需要考虑的其他参数是什么？3) 内存可以扩展多少？我应该怎么做才能确保优化内存大小以获得更快的性能？4）如何计算内存大小？

Python 是我们唯一知道的语言。因此，任何像 C/C++ 这样的建议都可能不会吸引人。

我们可以偶尔丢失一些数据包，因为我们的想法是研究模式而不是获得绝对准确的结果。键的数量将保持不变，并且它们的值可以上下浮动..

我们最终需要将计算的数据存储在 RDBMS 中，因为未来的主运算是 SQL 密集型的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:44:52.407

**1）这是正确的方法吗？**

嗯，当然可以这样实现，而且 Redis 的速度足以承受这种工作负载。你的瓶颈将是你的 Python 代码，而不是 Redis 本身。

**2) 需要考虑的其他参数是什么？**

您可能希望将数据累积在内存（字典）而不是 Redis 中。除非您使用全 fsync AOF 配置 Redis（这会使其变慢），否则 Redis 对系统崩溃的恢复能力并不比您的 Python 进程强多少。

但是，如果您有多个捕获进程，并且需要在将数据存储到 PostgreSQL 之前聚合数据，那么 Redis 是一个非常好的解决方案。

**3) 内存可以扩展多少？我应该怎么做才能确保优化内存大小以获得更快的性能？**

如果您有 200 个值，则内存消耗不是问题（因为它可以忽略不计）。Redis 对于这种工作负载已经足够快了，你不需要在这里使用任何花哨的技巧。

但是，您应该维护您的密钥列表（这样您就可以在不依赖 KEYS 命令的情况下访问它们），并使用流水线以一种有效的方式检索您的数据（即不是逐个键）。如果您有多个键，请考虑使用 SORT 命令一次性获取所有内容，或者考虑定义一个唯一的哈希对象来存储您的 200 个键/值并一次性检索它们。

**4）如何计算内存大小？**

在这里没用。但如果你真的需要，启动一个 Redis 实例，放入你的数据，然后使用 INFO 命令获取统计信息。您还可以转储数据，并使用以下 Python 脚本从转储文件中获取统计信息：[https ://github.com/sripathikrishnan/redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)

# codeigniter - codeigniter uri 段无法正常工作，输出为 0

> ID：10912283
> 
> 赞同：0
> 
> 时间：2012-06-06T10:19:04.283
> 
> 标签：codeigniter, uri

`localhost/backend/administrator/authentication/8218/0`

在 codeigniter 中，我想获取这些值 8218 和 0。

我的代码是：

```
class Administrator extends Controller {

function Administrator()
    {
            parent::Controller();
            $this->load->library('uri');
    }

function authentication()
    {        
        echo $seg1= $this->uri->segment(3);
        echo $seg2 = $this->uri->segment(4);
        echo $this->uri->total_segments(); 
    }

} 
```

我没有得到任何输出，但是当我使用时我输出为“0” `$this->uri->total_segments();`

```
my config.php 

'AUTO'          Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|

$config['uri_protocol'] = "AUTO";

i am using .htaccess

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /backend/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]    

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

任何人都可以找出我的错误并建议我正确的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:26:43.077

您不需要加载核心库。它已为您自动加载。从构造函数中删除以下行，一切都应该正常工作。

```
$this->load->library('uri'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:23:23.710

`$this->load->helper('url');` 使用 controller/Method/param/param加载这个Codigniter。所以你可以像这样访问这些值。

```
 function authentication($first_calue = '0', $second_value='0')
        {        
            echo $seg1= $this->uri->segment(3);
            echo $seg2 = $this->uri->segment(4);
            echo $this->uri->total_segments(); 
            echo $first_calue;
            echo $second_value;

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:31:00.300

IF you always have this url structure for this controller method I would recommend you use method arguments. The way controller methods usually deal with url segments is by declaring them as method arguments:

```
public function method_name($agr_1 = 0, $arg_2 = 0) 
```

Here $arg_1 will hold 8218, and $arg_2 - 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T14:20:35.250

不需要在codeignitor中调用库直接启动代码 `$this->uri->segment(3);`

# html - 从本地资源加载页面不显示图像

> ID：10912289
> 
> 赞同：1
> 
> 时间：2012-06-06T10:19:30.920
> 
> 标签：html, vb.net, image, browser

我有一个 WebBrowser1 控件引用来自*My.Resources*的网页（本地页面），当我将与页面一起出现的图像放在根文件夹中并尝试从*My.Resources*加载网页时，图像不会加载并显示红色X 即使在 html 的源代码中它对所有图像都有**src="rv ss 1.jpg"**。

我正在使用此命令加载页面。

```
If HelpMenu.SelectedNode.Name = 33 Then
    HelpContainer.DocumentText = My.Resources.Systemrequirements
End If 
```

但它不加载图像：/

# javascript - 如何使用 onclick 事件创建多个框

> ID：10912291
> 
> 赞同：0
> 
> 时间：2012-06-06T10:19:41.797
> 
> 标签：javascript

之后`onclick`，我需要生成多个具有唯一 ID 和随机位置的框。

[到目前为止，](http://jsfiddle.net/christopherpl/gnVj6/)这是我的努力：

```
<h1>The Amazing Box App</h1>
<form id="data">
<ol>
<li>Pick a name for your Amazing Box: <br>
<label for="name">Name: </label>
<input type="text" id="name" size="20" placeholder="My Amazing Box ..">
</li>
<li>Pick a color for your Amazing Box: <br>
<select id="color">
<option value="">Pick a color</option>
<option value="red">Red</option>
<option value="orange">Orange</option>
<option value="yellow">Yellow</option>
<option value="green">Green</option>
<option value="blue">Blue</option>
<option value="indigo">Indigo</option>
<option value="violet">Violet</option>
</select>
</li>
<li>How many Amazing Boxes do you want to create?<br>
<input type="radio" id="five" name="amount" value="5">
<label for="five">5</label><br>
<input type="radio" id="ten" name="amount" value="10">
<label for="ten">10</label><br>
<input type="radio" id="fifteen" name="amount" value="15">
<label for="fifteen">15</label><br>
</li>
</ol>
<p>
<input type="button" id="generateButton" value="Generate My Amazing Boxes">
<input type="button" id="clearButton" value="Clear My Amazing Boxes">
</p>
</form>
<div id="scene">
</div> 
```

我正在寻找一个仅限 javascript 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:54:27.563

要生成，您需要使用 div“场景”或您希望使用的任何其他空 div 标签。

这些功能需要类似于以下内容：

```
function generateboxes(num, color) {
    clearboxes(); //first clear them
    for (var i=0; i<num; i++) {
        var top = Math.floor(Math.random()*300); //300 is the max vertical offset
        var left = Math.floor(Math.random()*200); //200 is the max horizontal offset
        var boxstyle = "position:absolute; top:"+top+"px; left:"+left+"px; background-color:"+color+";"; //Definition of box styles (you must set width and height for them to be visible)
        document.getElementById('scene').innerHTML += "<div style=\""+boxstyle+"\"></div>"; //Add one more box to the group
    }

function clearboxes() {
    document.getElementById('scene').innerHTML = ""; //By resetting the HTML of the div, we remove the boxes.
} 
```

此外，不要忘记**函数参数**-**您需要阅读可见框的注释**。

# dotnetnuke - Javascript 在 dot net nuke 模块中不起作用？

> ID：10912293
> 
> 赞同：0
> 
> 时间：2012-06-06T10:19:50.983
> 
> 标签：dotnetnuke

我正在研究 dotnetnuke 模块。我正在使用以下 javascript

```
<script type="text/javascript">

$(function () {
    alert($('#sl-slider').slitslider());
});

</script> 
```

用于滑动图像。这里所有的 js 文件正在加载。但 javscript 根本不起作用。我正在使用 dotnetnuke 的 06.01.02 (98) 版本。我应该更改版本还是什么？请帮我解决这个问题？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T02:26:58.857

作为 DNN 的安全措施，我倾向于始终使用 jQuery 而不是 $ 示例 jQuery(function(){ alert(jQuery('#sl-slider').slitslider();});

我假设您使用警报只是为了查看 Javascript 是否正在运行？看看将 $ 切换到 jQuery 是否有帮助...有时取决于您安装的其他模块，它们可能会发生冲突。

我没有看到它粘贴在上面，但我假设你也有一个开始

# php - 是否可以使用以下方法创建具有完整 Alpha 通道的 PNG：imagecolortransparent()

> ID：10912295
> 
> 赞同：0
> 
> 时间：2012-06-06T10:20:00.280
> 
> 标签：php, png, transparency, alpha, gdlib

我正在寻找一种通过使用其 aplha 通道在图像中创建透明区域的方法。

*我刚刚找到了这种方式：*

定义一种颜色并将其设置为透明。

```
imagealphablending($img, false);   // has to be false for imagecolortransparent
imagesavealpha($img, false);       // false = single color transparency

$mask_color = imagecolorallocatealpha($img, 0, 255, 0, 127);
imagecolortransparent( $img, $mask_color ); 
```

但结果是单色透明。如果我尝试将其与具有 alpha 通道的图像合并，则蒙版颜色会再次可见。

这发生在我再次启用 imagesavealpha() 的那一刻，这是合并过程所需的。

顺便说一句：我通过将源图像与蒙版图像合并来创建*$img*。

```
$new_img = imagecreatetruecolor( 150, 100 );
$new_white = imagecolorallocatealpha( $new_img, 255, 255, 255, 0 );
imagefill( $new_img, 0, 0, $new_white );

imagealphablending($new_img, false);   // has to be false for full alpha
imagesavealpha($new_img, true);       // true = full alpha channel

imagecopyresampled( $new_img, $img       ,0, 0, 0, 0, 150, 100, 150, 100);
imagecopyresampled( $new_img, $alpha_img ,0, 0, 0, 0, 150, 100, 150, 100);

// save preview
imagepng( $new_img, $image_path . $preview_dir_name . $new_file_name ); 
```

*$img*中的透明区域现在再次可见。

那么，有没有办法通过使用完整的 Alpha 通道使特定的彩色区域透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:36:11.737

我找到了一个方法：

```
// get source image
$img = imagecreatefromjpeg( $image_path . $image_file );

// save transparency in alpha channel
imagealphablending($img, false);
imagesavealpha($img, true);

// define index for transparent color
$transparent = imagecolorallocatealpha( $preview_temp, 255, 255, 255, 127 );

// replace pixel information
imagesetpixel( $img, $x, $y, $transparent ); 
```

使用`imagesetpixel()`我可以替换一个像素并通过使用其 alpha 通道在给定图片中获取透明区域。

它对我有用，也许我稍后会发布完整的代码。

但是您知道其他解决方案吗？

# content-management-system - 如何识别导致问题的php.ini配置？

> ID：10912300
> 
> 赞同：0
> 
> 时间：2012-06-06T10:20:28.683
> 
> 标签：content-management-system, php

我创建了一个自定义 CMS，它可以在使用 MAMP 的本地服务器上完美运行，即使内容存储在远程数据库中也是如此。但是，当我在客户端的主机服务器上运行它时，会发生一些事情。

**问题是 CMS 无法处理超过几个单词的文本。**例如，如果文本是“lorem ipsum”，它会正常工作，但如果文本是三段长，则会显示提交帖子的错误。

我假设这是一个 php.ini 问题，**我们已经将 php.ini memory_limit 从 16M 更改为 128M。但是，问题仍然存在**。

**所以我的问题是：**除了一个一个地改变它们之外，有没有人知道识别哪些 php.ini 配置会导致问题的好方法？

不用说，如果我在本地服务器和主机服务器上运行 phpinfo() 很多配置是不同的......

感谢您的时间和帮助。

[编辑]

此编辑已被重写为答案;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:14:12.443

我决定检查像 Drupal 或 WordPress 这样的 CMS 通常需要的最常见的 php.ini 配置。其中之一与`magic_quotes_gpc`.

我发现我的本地服务器有这个`On`并且主机服务器有它`Off`，所以我尝试了它是否有问题，并且......有。

我很惭愧地说，但问题与我这边的不良做法有关。我没有正确地逃避来自帖子表单的数据。在逃离所有一切`$_POST`后`mysql_real_escape_string()`一切正常。

**得到教训**

1.  始终转义表单的数据。没有例外。
2.  [魔术引号已被弃用](http://php.net/manual/en/security.magicquotes.php)，并在 PHP 5.4 中被删除
3.  不良做法在某些时候会导致错误

我希望这对某人有用。

# android - 如何在打开首选项屏幕上打开 EditTextPreference

> ID：10912309
> 
> 赞同：3
> 
> 时间：2012-06-06T10:20:58.753
> 
> 标签：android, edittextpreference

我想在打开首选项屏幕时打开 EditTextPreference。我试试

```
mLabel = (EditTextPreference) findPreference("labelKey");
mLabel.getDialog().show() // this does not work. getDialog return null
mLable.getEditText().requestFocus(); // this does not work too. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:40:00.647

如果我理解正确，您需要在打开首选项后立即在首选项屏幕中打开一个首选项 (??)。

您可能想看看这个：[https ://stackoverflow.com/a/4869034/668240](https://stackoverflow.com/a/4869034/668240)

```
// the preference screen your item is in must be known
PreferenceScreen screen = (PreferenceScreen) findPreference("pref_key");

// the position of your item inside the preference screen above
int pos = findPreference("abc").getOrder();

// simulate a click / call it!!
screen.onItemClick( null, null, pos, 0 ); 
```

# macos - 使文件不适用于 s3fs

> ID：10912313
> 
> 赞同：0
> 
> 时间：2012-06-06T10:21:09.250
> 
> 标签：macos, makefile, s3fs

嗨，我正在尝试安装 s3fs，但出现以下错误。

```
*** No targets specified and no makefile found.  Stop. 
```

我遵循安装教程 [http://code.google.com/p/s3fs/wiki/InstallationNotes的任何想法](http://code.google.com/p/s3fs/wiki/InstallationNotes)

这是我的终端代码，我正在使用 mac os x lion。

```
stealth:cd ~/Desktop
stealth:Desktop sam$cd s3fs-1.61
stealth:s3fs-1.61 sam$ ./configure --prefix=/sam
checking build system type... x86_64-apple-darwin11.4.0
checking host system type... x86_64-apple-darwin11.4.0
checking target system type... x86_64-apple-darwin11.4.0
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for pkg-config... /usr/local/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for DEPS... no
configure: error: Package requirements (fuse >= 2.8.4 libcurl >= 7.0 libxml-2.0 >= 2.6 libcrypto >= 0.9) were not met:

No package 'fuse' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables DEPS_CFLAGS
and DEPS_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
stealth:s3fs-1.61 sam$ make
make: *** No targets specified and no makefile found.  Stop. 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:15:43.603

脚本输出告诉你该怎么做，

安装 fuse、libcurl、libxml 和 libcrypto

而不是做这个手册，我会用一个包管理框架来做这个，比如 MacPorts

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T21:32:10.403

我遇到过这样的问题（RHEL 6.4，x86_64）。主要原因是：

```
configure: error: Package requirements (fuse >= 2.8.4 libcurl >= 7.0 libxml-2.0 >= 2.6 libcrypto >= 0.9) were not met:
No package 'fuse' found 
```

我的解决方案如下：

```
cd /usr/src/
wget http://downloads.sourceforge.net/project/fuse/fuse-2.X/2.9.3/fuse-2.9.3.tar.gz
tar -xzf ./fuse-2.9.3.tar.gz
cd ./fuse-2.9.3
./configure
make && make install
cd /usr/src/
wget http://s3fs.googlecode.com/files/s3fs-1.71.tar.gz
tar -xzf ./s3fs-1.71.tar.gz
cd ./s3fs-1.71 
```

然后我们正在尝试配置它：

```
./configure --prefix=/usr 
```

但如果失败:) 所以，我们需要在 pkgconfig 中添加 fuse 并导出 pfgconfig：

```
cp /usr/src/fuse-2.9.3/fuse.pc /usr/lib64/pkgconfig
export PKG_CONFIG_PATH=/usr/lib64/pkgconfig 
```

尝试再次成功配置它并执行 make && make install：

```
./configure --prefix=/usr
make && make install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T00:50:24.177

我今天早些时候在 OS X 上安装**s3fs**时遇到了同样的问题。**make**配置不起作用，因为二进制`fuse`文件在路径中不可用。要解决此问题，[请安装 fuse](https://osxfuse.github.io/)然后重新运行`./configure`。完成后，您将能够运行`make`以编译源代码。

# java - 在 where 子句中带有 like 的命名查询

> ID：10912320
> 
> 赞同：34
> 
> 时间：2012-06-06T10:21:46.067
> 
> 标签：java, sql, jpa, named-query

是否可以在命名查询的 where 子句中有类似的内容？我正在尝试执行以下操作，但遇到异常

```
@NamedQuery(name = "Place.getPlaceForCityAndCountryName",
query = "SELECT p FROM Place p WHERE " +
        "lower(p.city) like :city and " +
        "lower(p.countryName) like :countryName"); 
```

我尝试像在普通 SQL 中那样添加 % ，但会编译异常。

任何指针都非常感谢！

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-06T10:25:10.770

您不能在 % 中包含 % `NamedQuery`，但可以在分配参数的值中包含它。

如：

```
String city = "needle";
query.setParamter("city", "%" + city + "%"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-07T08:56:01.580

您还可以使用 CONCAT 功能

```
@NamedQuery(name = "Place.getPlaceForCityAndCountryName",
     query = "SELECT p FROM Place p WHERE " +
        "lower(p.city) like CONCAT(:city,'%')"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-07T21:16:30.750

```
@Query("select c from Curso c where c.descripcion like CONCAT(:descripcion,'%')")

List<Curso> findByDescripcionIgnoreCase(@Param("descripcion") String descripcion); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-29T08:39:42.683

仅使用 JPA，没有 Spring Data Jpa，您必须定义命名查询`%`，然后将模式本身包含`%`为值的一部分，如 @esej 所述：

```
 @NamedQuery(
    name = ParametersQueryOnEntityEntity.Queries.BY_LIKE,
    query = "SELECT e FROM SomeEntity e WHERE name LIKE :name") 
```

使用 Spring `@Query`，您可以使用 include 定义查询本身，`%`并在方法中仅传递模式值：

```
 @Query("SELECT e FROM SomeEntity e WHERE name LIKE %:name%")
  List<SomeEntity> byLike(@Param(PARAM_NAME) String name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-17T14:45:42.370

如果你使用的是位置参数，你可以使用这种方式

```
@Query("select p from ABC p where p.name like CONCAT('%',?1,'%') ") 
```

# c# - 参数无效

> ID：10912323
> 
> 赞同：0
> 
> 时间：2012-06-06T10:21:54.383
> 
> 标签：c#, winforms

我收到错误消息：

> 参数无效。

从这一行：

```
e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds); 
```

这是我的绘图功能：

```
private int mouseIndex = -1;

private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{
  if (e.Index == -1) return;

  Brush textBrush = SystemBrushes.WindowText;
  if (e.Index > -1)
  {
    if (e.Index == mouseIndex)
    {
      e.Graphics.FillRectangle(SystemBrushes.HotTrack, e.Bounds);
      textBrush = SystemBrushes.HighlightText;
    }
    else
    {
      if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
      {
        e.Graphics.FillRectangle(SystemBrushes.Highlight, e.Bounds);
        textBrush = SystemBrushes.HighlightText;
      }
      else
      {
        // This Line:
        e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);
      }
    }
     e.Graphics.DrawString(contact.P_DISPLAYNAME, 
     e.Font, textBrush, e.Bounds.Left + 20, e.Bounds.Top);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:44:20.107

你提供的信息太少。可能 e.Bounds 不是有效的矩形。（矩形为 0 或空）。

# php - PHP, Codeigniter 2.1 - 多文件上传和数组返回

> ID：10912324
> 
> 赞同：0
> 
> 时间：2012-06-06T10:22:03.120
> 
> 标签：php, codeigniter

这是文件上传的基本功能。我需要它返回一个包含所有图像名称的字符串，如果没有要上传的图像返回 FALSE。我怎样才能做到这一点？

```
function img_upload($folder) {
            $this->path = './public/img/' . $folder;
            $imgs = array();
            $g = true;
            $config = array(
                'allowed_types' => 'jpg|jpeg|png|gif',
                'upload_path' => $this->path
            );
            $CI = &get_instance();
            $CI->load->library('upload', $config);
            foreach ($_FILES as $key => $value) {

                if (!$CI->upload->do_upload($key)) {
                    return FALSE;
                } else {
                    $q = $CI->upload->data();
                    $config['image_library'] = 'gd2';
                    $config['source_image'] = $this->path . '/' . $q['file_name'];
                    $config['new_image'] = $this->path . '/thumbs';
                    $config['create_thumb'] = FALSE;
                    $config['maintain_ratio'] = TRUE;
                    $config['width'] = 128;
                    $config['height'] = 128;

                    $CI->load->library('image_lib', $config);
                    $CI->image_lib->resize();
                    echo $q['file_name'];                
                    $imgs = array_push($imgs, $q['file_name']);
                }      
            }        
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:33:52.847

如果我理解你是正确的，那么这段代码可能会对你有所帮助..

```
 function img_upload($folder) {
            $this->path = './public/img/' . $folder;
            $imgs = array();
            $g = true;
            $config = array(
                'allowed_types' => 'jpg|jpeg|png|gif',
                'upload_path' => $this->path
            );
            $CI = &get_instance();
            $CI->load->library('upload', $config);
            foreach ($_FILES as $key => $value) {

                if (!$CI->upload->do_upload($key)) {
                    return FALSE;
            } else {
                $q = $CI->upload->data();
                $config['image_library'] = 'gd2';
                $config['source_image'] = $this->path . '/' . $q['file_name'];
                $allimages = array();
                $allimages = $q['file_name'];
                $config['new_image'] = $this->path . '/thumbs';
                $config['create_thumb'] = FALSE;
                $config['maintain_ratio'] = TRUE;
                $config['width'] = 128;
                $config['height'] = 128;

                $CI->load->library('image_lib', $config);
                $CI->image_lib->resize();
                echo $q['file_name'];                
                $imgs = array_push($imgs, $q['file_name']);

                 if(count($allimages) > 0)
                   {
                     return $allimagename = ('',$allimages);
                   }
                 else
                   {
                     return 'Thre is no images';
                    }
                }      
            }        
        } 
```

# javascript - 是否可以在没有 JavaScript 的情况下执行此操作（html 布局）

> ID：10912329
> 
> 赞同：12
> 
> 时间：2012-06-06T10:22:21.410
> 
> 标签：javascript, html

该页面具有以下布局：

```
<div id="main" style="min-height:500px;"> 
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
<div> 
```

主 div 可以有一个固定的高度或最小高度（`style="height:500px;"`或`style="min-height:375px;"`）。

是否可以使页脚和页眉尽可能多地占据他们需要的高度，并允许内容占据其余部分`(content.height = main.height - (header.height + footer.height))`（不使用 JavaScript，弹性页眉和页脚，内容占据其余部分）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:40:45.623

是的，这**是**可能的。

HTML：

```
<div id="main"> 
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
<div> 
```

CSS：

```
html, body {
    margin: 0;
    padding: 0;
    height: 100%; /* needed for #main min-height */
}

div#main {
    position: relative; /* needed for footer positioning */
    height: auto !important; /* real browsers */
    height: 500px; /* IE6: treated as min-height*/
    min-height: 500px; /* real browsers */
}

div#header {
    /* Will be as high as its content */
}

div#content {
    /* Will be displayed below #header regardless to its height */
    padding: 0px 0px 50px 0px; /* bottom padding for footer + space */
}

div#footer {
    position: absolute;
    width: 100%;
    height: 40px; /* Needs to be fixed size because of #content padding-bottom */
    bottom: 0; /* stick to bottom */
} 
```

这实际上并没有`#content`按照您的意愿设置高度，而是按应有的方式显示所有内容（`#main`具有预期高度，`#footer`位于底部且不覆盖`#content`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:47:48.867

我找到的唯一解决方案（在 IE6/7 中无法正常工作）...

```
<table height="500" cellpadding="0" cellspacing="0" border="0">
    <tr height="1"><td>Header goes here</td></tr>
    <tr><td>Main content goes here</td></tr>
    <tr height="1"><td>Footer goes here</td></tr>
</table> 
```

关键是为顶行和底行设置一个小的高度，而不是为中间行设置任何高度。这鼓励浏览器保持顶部和底部行尽可能小，并使用中间行来占用任何未使用的空间。但是 IE6/7 忽略了这一点，并试图将未使用的空间均匀地分布在所有 3 行上。

尽管如此，这可能是您在不使用 JavaScript（或添加某种特定于 IE 的 CSS 表达式（即动态属性）的情况下获得的最接近的结果，我不建议这样做）。

HTML 表格是唯一一个不使用 JavaScript 就可以控制垂直布局（大小和对齐方式）的选项。如果这就是您所需要的，那么 HTML 表格就是您要走的路。但是你最好不要停留在基于 CSS 的布局的限制内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:34:49.473

要使用简单的 CSS 页脚需要有固定的大小。

# hibernate - hibernate 中的值类型

> ID：10912330
> 
> 赞同：0
> 
> 时间：2012-06-06T10:22:31.817
> 
> 标签：hibernate

值类型是没有自己的实体，也没有自己的生命周期的类型。值类型的另一个属性表示它不能有共享引用。例如 - 如果有一个类用户，它有一个实例变量地址指向地址类的对象。即使两个用户有相同的地址，那么他们也不能指向同一个对象。

这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:35:07.557

原因是，如果您有两个用户具有相同的地址实例，则以下内容会修改两个用户的地址，这显然是您不想要的：

```
user1.getAddress().setStreet("new street"); 
```

这两个地址，即使它们包含相同的值，也代表数据库中两个不同行的单元格，因此它们应该是不同的实例。

# oracle - 如何使用 desc 操作显示列的注释

> ID：10912337
> 
> 赞同：22
> 
> 时间：2012-06-06T10:22:56.653
> 
> 标签：oracle, oracle-sqldeveloper

我想要*desc 表；*操作以显示列的注释。我已经看到有些人做到了这一点，但我不知道如何。也许这取决于 SQL Developer 版本，我的是 2.1.0.63。数据库是Oracle 11g。

这是我在做*desc table 时得到的；*：

```
Desc table;
    Name                Nullable Type
    ------------------- -------- -----
    ID                  NOT NULL NUMBER(38)
    ITEM_ID                      NUMBER(38) 
```

我想得到这样的东西：

```
Desc table;
    Name                Nullable Type        Comment
    ------------------- -------- ----------  ---------------------------------
    ID                  NOT NULL NUMBER(38)  Table's id
    ITEM_ID                      NUMBER(38)  Reference to an item 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T11:03:38.030

desc 命令对于不同的工具有不同的解释。它所做的是选择一些标准的 Oracle 视图。

这是对那些将提供所需列数据的视图的查询，但我鼓励您执行 select * 以查看所有可用的内容。

您有 3 种类型的视图，dba_ *、all_*和 user_* 视图。我使用 user_* 因为它适用于每个模式/用户，但它仅列出该模式/用户拥有的对象。dba_ 视图通常仅供 dba 使用，而 all_ 视图可能对您可用也可能不可用，具体取决于您的 dba 对您的信任程度。^_^

```
select tc.column_name
,      tc.nullable
,      tc.data_type || case when tc.data_type = 'NUMBER' and tc.data_precision is not null then '(' || tc.data_precision || ',' || tc.data_scale || ')'
                            when tc.data_type like '%CHAR%' then '(' || tc.data_length || ')'
                            else null
                       end type
,      cc.comments
from   user_col_comments cc
join   user_tab_columns  tc on  cc.column_name = tc.column_name
                            and cc.table_name  = tc.table_name
where  cc.table_name = upper(:tablename) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-06T10:32:03.953

这是来自 Oracle SQL Developer 的定义（如表列视图所示）：

```
SELECT "COLUMN_NAME", "DATA_TYPE", "NULLABLE", "DATA_DEFAULT", "COLUMN_ID", "COMMENTS" FROM(
select c.column_name,  case when data_type = 'CHAR'     then      data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            when data_type = 'VARCHAR'  then      data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            when data_type = 'VARCHAR2' then      data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            when data_type = 'NCHAR'    then      data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            when data_type = 'NUMBER' then      
                                    case when c.data_precision is null and c.data_scale is null then          'NUMBER' 
                                    when c.data_precision is null and c.data_scale is not null then          'NUMBER(38,'||c.data_scale||')' 
                                    else           data_type||'('||c.data_precision||','||c.data_SCALE||')'      end    
                            when data_type = 'NVARCHAR' then      data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            when data_type = 'NVARCHAR2' then     data_type||'('||c.char_length||decode(char_used,'B',' BYTE','C',' CHAR',null)||')'    
                            else      data_type    end data_type,
  decode(nullable,'Y','Yes','No') nullable,  
c.DATA_DEFAULT,column_id,   com.comments         
  from sys.Dba_tab_Columns c, 
       sys.Dba_col_comments com
  where c.owner      = :OBJECT_OWNER  
  and  c.table_name =  :OBJECT_NAME   
  and c.table_name = com.table_name
  and c.owner = com.owner
  and c.column_name = com.column_name                 
  order by column_id
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-27T19:41:05.313

在[Oracle SQLcl](http://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html)中，一个用于 Oracle 数据库的新的现代 CLI，我们有 DESC。但我们还构建了一个名为 INFO[RMATION] 的新命令。

它默认显示列注释。

```
I am HR on orcl > info locations
TABLE: LOCATIONS
         LAST ANALYZED:2017-03-02 17:00:31.0
         ROWS         :23
         SAMPLE SIZE  :23
         INMEMORY     :DISABLED
         COMMENTS     :Locations table that contains specific address of a specific office,
                       warehouse, and/or production site of a company. Does not store addresses /
                       locations of customers. Contains 23 rows; references with the
                       departments and countries tables.

Columns
NAME             DATA TYPE           NULL  DEFAULT    COMMENTS
*LOCATION_ID     NUMBER(4,0)         No               Primary key of locations table
 STREET_ADDRESS  VARCHAR2(40 BYTE)   Yes              Street address of an office, warehouse, or
                                                      production site of a company.Contains building
                                                      number and street name
 POSTAL_CODE     VARCHAR2(12 BYTE)   Yes              Postal code of the location of an office,
                                                      warehouse, or production siteof a company.
 CITY            VARCHAR2(30 BYTE)   No               A not null column that shows city where an office,
                                                      warehouse, orproduction site of a company is
                                                      located.
 STATE_PROVINCE  VARCHAR2(25 BYTE)   Yes              State or Province where an office, warehouse, or
                                                      production site of acompany is located.
 COUNTRY_ID      CHAR(2 BYTE)        Yes              Country where an office, warehouse, or production
                                                      site of a company islocated. Foreign key to
                                                      country_id column of the countries table.

Indexes
INDEX_NAME                 UNIQUENESS   STATUS   FUNCIDX_STATUS   COLUMNS
HR.LOC_ID_PK               UNIQUE       VALID                     LOCATION_ID
HR.LOC_CITY_IX             NONUNIQUE    VALID                     CITY
HR.LOC_COUNTRY_IX          NONUNIQUE    VALID                     COUNTRY_ID
HR.LOC_STATE_PROVINCE_IX   NONUNIQUE    VALID                     STATE_PROVINCE

References
TABLE_NAME    CONSTRAINT_NAME   DELETE_RULE   STATUS    DEFERRABLE       VALIDATED   GENERATED
DEPARTMENTS   DEPT_LOC_FK       NO ACTION     ENABLED   NOT DEFERRABLE   VALIDATED   USER NAME

I am HR on orcl > 
```

如果您运行 INFO+，它会将列注释替换为列统计信息。

```
I am HR on orcl > info+ locations
TABLE: LOCATIONS
         LAST ANALYZED:2017-03-02 17:00:31.0
         ROWS         :23
         SAMPLE SIZE  :23
         INMEMORY     :DISABLED
         COMMENTS     :Locations table that contains specific address of a specific office,
                       warehouse, and/or production site of a company. Does not store addresses /
                       locations of customers. Contains 23 rows; references with the
                       departments and countries tables.

Columns
NAME             DATA TYPE           NULL  DEFAULT    LOW_VALUE               HIGH_VALUE              NUM_DISTINCT   HISTOGRAM
*LOCATION_ID     NUMBER(4,0)         No                   1000                    3200                    23             NONE
 STREET_ADDRESS  VARCHAR2(40 BYTE)   Yes                  12-98 Victoria Street   Schwanthalerstr. 7031   23             NONE
 POSTAL_CODE     VARCHAR2(12 BYTE)   Yes                  00989                   YSW 9T2                 22             NONE
 CITY            VARCHAR2(30 BYTE)   No                   Beijing                 Whitehorse              23             NONE
 STATE_PROVINCE  VARCHAR2(25 BYTE)   Yes                  BE                      Yukon                   17             NONE
 COUNTRY_ID      CHAR(2 BYTE)        Yes                                                                  14             FREQUENCY

Indexes
INDEX_NAME                 UNIQUENESS   STATUS   FUNCIDX_STATUS   COLUMNS
HR.LOC_ID_PK               UNIQUE       VALID                     LOCATION_ID
HR.LOC_CITY_IX             NONUNIQUE    VALID                     CITY
HR.LOC_COUNTRY_IX          NONUNIQUE    VALID                     COUNTRY_ID
HR.LOC_STATE_PROVINCE_IX   NONUNIQUE    VALID                     STATE_PROVINCE

References
TABLE_NAME    CONSTRAINT_NAME   DELETE_RULE   STATUS    DEFERRABLE       VALIDATED   GENERATED
DEPARTMENTS   DEPT_LOC_FK       NO ACTION     ENABLED   NOT DEFERRABLE   VALIDATED   USER NAME

I am HR on orcl > 
```

# javascript - Javascript 时间戳无效

> ID：10912340
> 
> 赞同：1
> 
> 时间：2012-06-06T10:23:02.207
> 
> 标签：javascript, timestamp

我整个早上都在摆弄 javascripts 时间戳。我通过运行不断得到无效的时间戳

`today = (new Date()).setHours(0,0,0,0)`或者`today = (new Date()).getTime()`

这 2 个输出`1338930000000`和`1338978151748`.

我认为这只是一个 chrome js 引擎错误，但用 Firefox 重现了它。这两条语句的预期输出是`1338930000`和`1338977700`。

但是，我确实对此进行了修复。修复是这样的：

`today = parseInt(((new Date()).setHours(0,0,0,0) * Math.pow(10, -3)).toFixed(0))`

或没有 setHours()

`today = parseInt(((new Date()) * Math.pow(10, -3)).toFixed(0))`

这是一个常见的错误吗？我做错了什么来得到这些结果吗？时间戳的格式为时间戳 * 10^3。

编辑：

原来我期待的时间是秒（该死的 PHP），而 JAVASCRIPT 以毫秒为单位输出它。我正在使用 phpJS 日期/时间库，而 javasctipt 时间戳似乎与 strtotime() 和 date() 本身不兼容

我试图使用 unix 时间戳，以秒为单位。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T10:27:16.790

`getTime()`返回自 1970/01/01 以来的毫秒数，而不是秒数。

```
//milliseconds
var milliseconds = new Date().getTime();

//seconds
var seconds = new Date().getTime() / 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:27:34.250

这不是一个错误 - 您期望以秒为单位的时间戳（为什么？），而 javascript 提供毫秒精度的时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:31:40.613

Unix 时间戳使用秒，但 Javascript 时间戳使用毫秒！这就是为什么你需要乘以 1000。

[http://www.w3schools.com/jsref/jsref_utc.asp](http://www.w3schools.com/jsref/jsref_utc.asp)

> UTC() 方法根据世界时返回指定日期和 1970 年 1 月 1 日午夜之间的毫秒数。

# jquery - 未捕获的类型错误：对象 [object Object] 没有“on”方法

> ID：10912346
> 
> 赞同：28
> 
> 时间：2012-06-06T10:23:21.130
> 
> 标签：jquery, onclick, bind

谁能帮我解决这个问题？

当我使用最新（或较新）版本的 jQuery 时，下面的小脚本可以正常工作。但是，当我使用旧版本的 jQuery 时，我的脚本说该`on`函数不存在。

这是我的脚本，它不适用于旧版本的 jQuery：

```
$(document).ready(function () {
    $(".theImage").on("click", function(){
        // In the event clicked, find image, fade slowly to .01 opacity
        $(this).find("img").fadeTo("slow", .01).end()
        // Then, of siblings, find all images and fade slowly to 100% opacity
               .siblings().find("img").fadeTo("slow", 1);           
    })
}) 
```

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-06T10:25:00.190

您必须使用[`bind`](http://api.jquery.com/bind/)而不是[`on`](http://api.jquery.com/on)，因为`on`仅在[jQuery 1.7](http://blog.jquery.com/2011/11/03/jquery-1-7-released/)中引入。

```
$(document).ready(function () {
    $(".theImage").bind("click", function(){
        // In the event clicked, find image, fade slowly to .01 opacity
        $(this).find("img").fadeTo("slow", .01).end()
        // Then, of siblings, find all images and fade slowly to 100% opacity
        .siblings().find("img").fadeTo("slow", 1);           
    })
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T03:46:47.760

您可以使用[`delegate()`](http://api.jquery.com/delegate/)，例如：

```
$("table").delegate("td", "click", function() {
  $(this).toggleClass("chosen");
}); 
```

这相当于使用以下代码编写的`on()`：

```
$("table").on("click", "td", function() {
  $(this).toggleClass("chosen");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:43:48.520

您必须使用 jQuery 版本 1.7+ 才能使用`on()`. `bind()`已弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T15:19:50.807

`on`将函数更改为`bind`：

`.children().on("click",function()`
**到**
`.children().bind("click",function()`

# c++ - 相似代码检测器

> ID：10912349
> 
> 赞同：17
> 
> 时间：2012-06-06T10:23:24.827
> 
> 标签：c++, c, detection, copy-paste, plagiarism-detection

我正在寻找一种可以比较源代码的相似性的工具。

我们现在有一个非常琐碎的系统，它有大量的误报，而真正的正则很容易被埋没。

我的要求是：

*   相当少量的误报
*   良好的检测率（是的，这些是相互矛盾的）
*   理想情况下，输出比单个值更复杂
*   可用于 C (C99) 和 C++（C++03 和最佳 C++11）
*   仍然保持
*   可用于比较两个源文件
*   可在非交互模式下使用

编辑：

为避免混淆，以下两个代码片段是相同的，应该这样检测：

`for (int i = 0; i < 10; i++) { bla; }`

`int i; while (i < 10) { bla; i++; }`

和这里一样：

`int x = 10; y = x + 5;`

`int a = 10; y = a + 5;`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-06T10:43:07.697

我过去使用过 MOSS：http: [//theory.stanford.edu/~aiken/moss/](http://theory.stanford.edu/~aiken/moss/)来检测抄袭代码。由于它在语义级别上工作，因此它将检测您上面介绍的情况。该工具是语言感知的，因此在分析中不考虑注释，并且它在检测通过简单搜索和替换变量和/或函数名称而修改的代码方面有很长的路要走。

注意：几年前我在研究生院教授计算机科学时使用了该工具，它在检测从互联网上下载的代码方面表现出色。这是类似应用程序的详细记录：http: [//fie2012.org/sites/fie2012.org/history/fie99/papers/1110.pdf](http://fie2012.org/sites/fie2012.org/history/fie99/papers/1110.pdf)

如果你谷歌“测量软件相似度”，你应该会发现一些更有用的点击： http: [//www.ics.heacademy.ac.uk/resources/assessment/plagiarism/detectiontools_sourcecode.html](http://www.ics.heacademy.ac.uk/resources/assessment/plagiarism/detectiontools_sourcecode.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T10:37:45.493

您在计算机科学术语中的问题可能被描述为源代码抄袭检测。一个好的开始是阅读 Dobbs 博士的这篇文章：[检测源代码抄袭](http://www.drdobbs.com/architecture-and-design/184405734)。它列出了检测源代码中抄袭的算法。

注意：您所要求的确实是一个棘手的计算问题:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T10:33:56.453

可能是[PMD](http://pmd.sourceforge.net/pmd-5.0.0/)的复制粘贴检测器？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-24T07:41:16.150

我开始使用 JPLAG ( [https://github.com/jplag/jplag](https://github.com/jplag/jplag) ) 来检查代码相似性并比较学生在 Java 和文本文件中的作品。它可以很好地检查相同的代码结构和变量替换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T11:03:46.493

你可以试试[duplo](https://github.com/houseofzeus/duplo-fork)。它会找到共同的线路。它有一些忽略空白更改的能力，但不会检测带有重命名变量的代码，因此在检测抄袭时它更像是清理辅助而不是帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-26T11:26:48.970

（回复迟了，但问题的相关性永远不会消失）

我遇到了类似的问题并编写了一个基于 Web 的应用程序。

[https://jefferey-cave.gitlab.io/miss/](https://jefferey-cave.gitlab.io/miss/)

我在教 javascript 和 python，所以这些是它处理的语言。它不处理 C/C++（当前）。我很想知道 Javascript 解释器如何处理 C。

[在 gitlab 上可用](https://gitlab.com/jefferey-cave/miss)

* * *

我面临的问题是跨国际边界提交学生代码是非法的（禁止使用 MOSS），因此需要可以在本地运行的东西。该实现是纯客户端浏览器。

有趣的是，我认为它可能会以独特的方式满足您的“低误报”标准。分配之间总是*有一些*相似之处，但使用一种独特的技术来识别“开始看起来可疑”的点。

我发现它在确定课堂中的团队动态（谁与谁一起工作/学习）时更有用。

它有一些有趣的实时图形，因此在本科生提交第一份作业后展示给他们很有用。第一个作业总是有高度的相似性，所以现场演示它没有坏处（提交名称匿名）。

我总是讲述我认为（严重和公然）作弊的学生的故事。他们的工作与另一个学生非常独特的答案非常相似。将该学生的作业与班上其他人进行比较，结果表明与班上其他人**没有显着的相似性**。它远低于“有趣”的门槛。这导致了对提交的更深入的调查......原来有一个教程，风格表现出来，但工作是独一无二的。

什么都没有发生，那些学生从来不知道他们离他们有多近。

# database - Magento 重置一个模块数据库

> ID：10912351
> 
> 赞同：2
> 
> 时间：2012-06-06T10:23:27.910
> 
> 标签：database, magento, magento-1.6

我搞砸了一个模块，如何像新安装的一样重置它的表（不是空的，而是重置）？我不会重新安装模块，我只想重置数据库中的数据。

Magento 版本：1.6.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T10:30:18.267

To reset a module data, you have to delete it's resource related entry, this way magento will rerun setup script again.

Example: Let's say you want to reset the newsletter module data.

If you check

```
app/core/Mage/Newsletter/etc/config.etc 
```

You can find

```
<resources>
    <newsletter_setup>
        <setup>
            <module>Mage_Newsletter</module>
        </setup>
    </newsletter_setup>
</resources> 
```

This means the resource name is **newsletter_setup**

Log in to your database, find the table **core_resource**, find the entry where the code = **newsletter_setup** delete it.

Now if you refresh the page, Magento will run the setup script again, in this case, it is

```
app/core/Mage/Newsletter/etc/sql/install-1.6.0.0.php 
```

# windows - Windows NT 是否缓存或刷新 INI 文件写入？

> ID：10912352
> 
> 赞同：2
> 
> 时间：2012-06-06T10:23:28.233
> 
> 标签：windows, winapi, caching, flush, ini

我正在更新一个相当旧的应用程序。它使用 INI 文件访问所有代码，在这里和那里创建和释放 INI 访问类实例。

我想将其集中到几个单个实例中，每个使用的文件一个。因此，我们将摆脱在任何地方创建/释放复制粘贴的实例，并且可以自由地完全替换这些类，这将决定从 INI 切换到其他设置存储。

是否应该调用 WritePrivateProfileString(NULL, NULL, NULL...) 来应用更改？假设： 1) 访问直接访问真实的 INI 文件，而不是注册表映射的文件。2）操作系统是NT家族的（可能很少是Win2000，很可能是WinXP及更高版本）。Win9x/ReactOS/WinE/Odin/etc 不关心。

那么，我们现在是否应该明确地刷新 ini 储蓄？

NT 不缓存注册表键写入，现在不需要 regFlushKey。但是 INI 文件呢？

关于 WritePrivateProfileString 的 MSDN 页面仅描述了 wrt Win9x 和 NT File-to-Reg 映射的刷新技术。它对真正的 INI 文件保持沉默。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:49:44.700

文档自相矛盾（我的粗体）：

> 系统保留最新**注册表文件映射**的缓存版本以提高性能。如果所有参数都为 NULL，则该函数会刷新缓存。当系统正在编辑文件的**缓存版本时**，编辑文件本身的进程将使用原始文件，直到缓存被清除。

Windows 是在缓存映射还是文件（什么文件）？但是示例代码中的注释说明了这一点：

```
// Force the system to read the mapping into shared memory 
// so that future invocations of the application will see it 
// without the user having to reboot the system 
```

它是缓存的注册表文件**映射**。如果您更改注册表中的映射，则需要告诉 Windows 刷新其缓存。

这也与 Windows 3.1 中 API 的使用一致，您不需要刷新任何内容。Windows 不太可能从根本上改变 API 的使用。

为了仔细检查，我`WritePrivateProfileString`在运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)时打电话。正如预期的那样，Windows 打开 INI 文件，更新它并再次关闭它。

无需冲洗。

# javascript - 如何使用phonegap为android获取可折叠的listview

> ID：10912355
> 
> 赞同：2
> 
> 时间：2012-06-06T10:24:06.833
> 
> 标签：javascript, android, html, cordova

我有 3 个名为的列表视图

活动-今天，活动-本周，活动-本月。

我想使用可折叠列表视图格式来显示列表。我已经看到了使用 jquery mobile 的可折叠列表视图的示例，但我想使用 java 脚本、html 和 css 来实现这一点。谁能帮我？![在此处输入图像描述](../Images/3cc7dc57e423e387b8c0e73469f05c8a.png)

我想要这样的东西，如图所示。希望我的问题很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:12:13.250

我已经为你设置了这个jsfiddle，点击标题就会出现内容：

[jsfiddle](http://jsfiddle.net/7WPs6/38/)

基本上，通过标题的 onclick 事件，您可以决定是显示还是隐藏内容，然后更改标题以更改 +/- 符号。当然，这个例子只是向你展示了如何实现逻辑，但并没有应用好看的样式。

的HTML：

```
<div class='collapsibleCont'>
<h3 id='collapsible1' class='collapsibleTitle' onclick="handleCollapsible('collapsible1')">+ title</h3>
<p  style="display:none" class='collapsibleContent'>helloooooooooooo</p>
</div> 
```

handleCollapsible(id) 函数：

```
function handleCollapsible(id){
var clickedTitle = document.getElementById(id);
var contentC = clickedTitle.parentNode.childNodes[1];
if(contentC.style.display=='none'){
        contentC.style.display = 'block';
        var mysplittedtitle = clickedTitle.innerHTML.split(" ");
        var newTitle = "- "+mysplittedtitle[1];
        clickedTitle.innerHTML =newTitle;

}else{
        contentC.style.display = 'none';
        var mysplittedtitle = clickedTitle.innerHTML.split(" ");
        var newTitle = "+ "+mysplittedtitle[1];
        clickedTitle.innerHTML=newTitle;

}
        } 
```

用 jquery 做这件事会容易得多。用 jquery-mobile 做会容易得多。这段代码的坏处是需要将**onclick**事件添加到每个可折叠项，包括 id，这是可以避免的，并且使用 jquery 更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:53:09.423

试试这个方法：

```
<div data-role="page" id="home"> 

    <div data-role="header"> 
        <h1>jQuery Mobile</h1> 
    </div> 

    <div data-role="content">

        <div data-role="collapsible-set">

    <div data-role="collapsible" data-collapsed="false">
    <h3>Section 1</h3>

        <ul data-role="listview" data-inset="true">
                <li data-filtertext="11:first:one"><a href="#">one</a></li>
<li data-filtertext="22:second:two"><a href="#">two</a></li>
<li data-filtertext="33:third:three"><a href="#">three</a></li>
<li data-filtertext="44:fourth:four"><a href="#">four</a></li>            
            </ul>

    </div>

    <div data-role="collapsible">
    <h3>Section 2</h3>
    <p>I'm the collapsible set content for section B.</p>
    </div>

</div>

    </div>
</div>
​ 
```

完整源[http://jsfiddle.net/dhavaln/UCDfU/](http://jsfiddle.net/dhavaln/UCDfU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:35:21.400

我想你想使用嵌套列表视图.....

```
<h3>Nested List Example</h3>
<ul data-role="listview">
 <li>Restaurants
  <ul>
   <li>French
     <ul>
           <li>Le Central</li>
           <li>Bistro Vandome</li>
           <li>Antoine's</li>
   </ul>
  </li>
  <li>Cajun and Creole
    <ul>
         <li>Bayou Bob's</li>
         <li>Pappadeaux</li>
         <li>Lucile's</li>
   </ul>
  </li>
  <li>American
    <ul>
         <li>Dixon's</li>
         <li>Vesta Dipping Grill</li>
         <li>Steuben's</li>
    </ul>
  </li>
</ul>
</li>
</ul> 
```

# c - 为什么输出总是-1？

> ID：10912356
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:24:15.960
> 
> 标签：c, unsigned, signed, bit-shift

这是代码：

```
char x=-1>>2;
printf("%d",x); 
```

即使我这样做`x = -N>>2`，它只会给`1`。

```
x = -1 => 11111111 
x= -1>>2 ==> 00111111 = 3F ?? 
```

即使我做 int`x = -1>>2`输出也会是`1`.

你能解释一下这个计算是如何进行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:28:56.087

负值的右移是实现定义的。

在您的情况下，您看到的右移行为是保留符号。

考虑`char x = -38;`。下面演示了在保留符号时位移是如何工作的：

```
x       11011010
x >> 1  11101101
x >> 2  11110110
x >> 3  11111011
etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:58:16.127

我相信如果你使用你的代码会起作用

```
unsigned char x=-1>>2; 
```

对于有符号数（包括字符），右移不附加零。这称为符号位扩展。C 使用 2 的补码形式来存储负数。对于负数，符号位 (MSB) 以这种形式为 1，在操作期间被填充。使用无符号数字将解决此问题。

# data-structures - lisp等链表的表示

> ID：10912357
> 
> 赞同：2
> 
> 时间：2012-06-06T10:24:21.113
> 
> 标签：data-structures, lisp, computer-architecture

谁能概述一下 LISP 中的链表是如何在计算机内存中表示的？计算机是使用 cpu 寄存器来保存列表的头部和其余部分的指针，还是使用堆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:41:48.090

这在很大程度上取决于所使用的特定编译器和语言运行时。然而，在类 Lisp 语言中，一般的数据结构是堆分配的单元，带有指向其邻居的指针。然后，当函数对数据进行操作时，它们会被加载到硬件寄存器中。

考虑 Haskell 中的链表类型：

```
 data [a] = [] | a : [a] 
```

给定的列表可以写成：

1：（2：（3：（4：（5：[]））））

或更简洁地说：

[1,2,3,4,5]

这表示为以下形式的堆分配对象：

![在此处输入图像描述](../Images/20c73e0813c8e0243a804a64cb6303e7.png)

其中箭头代表指针；并`(:)`表示一个“cons cell”，一个存储指向当前元素的指针的小结构，以及列表的尾部。

现在，当一个函数访问这个数据结构时，它会将指向该结构的指针加载到寄存器中，并开始从这些指针中加载数据。其中的精确细节取决于编译模型和运行时系统模型。例如，对于 GHC Haskell，这是由[STG Machine](http://research.microsoft.com/apps/pubs/default.aspx?id=67083)给出的。此外，指针中的低端位可用于指示所指向的特定构造函数；它的评估状态（已评估或未评估），如果它很小，甚至是值本身（这是[指针标记优化](http://community.haskell.org/~simonmar/papers/ptr-tagging.pdf)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T06:43:40.143

For such philosophical questions about Lisp, one of the most inspiring source is [Anatomy of Lisp](https://rads.stackoverflow.com/amzn/click/com/007001115X). Even if it is a bit dated now. Reading it (well, many years ago) was an enlightenment for me, not only about Lisp but about programming in general. Another excellent book about Lisp implementation is [Lisp in Small Pieces](https://rads.stackoverflow.com/amzn/click/com/0521545668). If you are serious about learning Lisp internals, these two will help you a lot.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T10:48:48.043

要看。如果您遇到真正的问题，最好使用 Stackoverflow。

“LISP”是一大类语言和数百种不同的实现。

各种实现链表的方式都已经尝试过了。

有关于 Lisp 实现的书籍，还有很多大大小小的开源 Lisp 实现需要研究。

相关文献可以在这里找到，例如：http: [//library.readscheme.org/page8.html](http://library.readscheme.org/page8.html)

# iphone - 游戏中心 GKMatchmakerViewController 显示的图标

> ID：10912364
> 
> 赞同：1
> 
> 时间：2012-06-06T10:24:40.827
> 
> 标签：iphone, ios, game-center

Match Maker 对话框使用哪个图标（应用程序图标）（在 iPad 上），是否可以提供分辨率更高的图标

# function - 创建 Lua 函数以避免在同一文件中重复代码

> ID：10912366
> 
> 赞同：0
> 
> 时间：2012-06-06T10:24:53.983
> 
> 标签：function, lua, arguments, string-matching

我有以下类型的代码，我在同一个文件中使用了 6-7 次：

```
str=(line):match("constraints(.*)end")
for split in string_gsplit(str, '\n', true) do
if
string.match(split,'%a+')
then
a=(split):match("(.-)%s")
a=null_value(a)
b=(split):match("tx=(%a+)")
b=null_value(b)
c=(split):match("ty=(%a+)")
c=null_value(c)
d=(split):match("tz=(%a+)")
d=null_value(d)
e=(split):match("rx=(%a+)")
e=null_value(e)
f=(split):match("ry=(%a+)")
f=null_value(f)
g=(split):match("rz=(%a+)")
g=null_value(g)
print(a..b..c..d..e..f..g)
end 
end 
```

为了避免重复，我想在这个中使用函数。这样我只调用该函数并获得打印结果。由于每个匹配函数中的参数都不同。双引号 ("abc") 中给出的字符串不同且不能相同。请帮助我创建一个函数。

我尝试创建它。看一看：

```
function f(s)
assert(type(s) == "string")
str=(line):match(s)
for split in string_gsplit(str, '\n', true) do
if
string.match(split,'%a+')
then
end
end
return s
end 
```

为了调用相同的函数，我输入：

```
s="constraints(.*)end"
f(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:25:37.690

目前还不是很清楚你在问什么。您要删除哪些重复项？`split:match`-行列表`null_value`？您可以通过将模式放入列表中来循环执行此操作：

```
local patterns = { "(.-)%s", "tx=(%a+)", "ty=(%a+)", "tz=(%a+)", "rx=(%a+)", "ry=(%a+)", "rz=(%a+)" }
local results = {}
for i,pattern in ipairs(patterns) do
    results[#results+1] = null_value( split:match(pattern) )
end
print(table.concat(results)) 
```

* * *

提示：

1.  您随意且不必要地将变量放在括号中。`split:match(patt)`与 的意思相同`(split):match(patt)`。

2.  你没有使用本地人。变量的范围越大，代码的某一部分的更改将对代码中一些遥远的、不相关的部分产生不利影响的风险就越大，这很难推理和调试。您应该尽可能将变量设置为本地变量，这在 Lua 中也恰好更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:36:13.147

您可以在字符串表上创建与 match 和 find 类似的函数：

```
function string.ReadArgument( str, pattern )
  return null_value( str:match( pattern ) )
end 
```

您将在这样的代码中使用它

```
a = split:ReadArgument( "(.-)%s" )
b = split:ReadArgument( "tx=(%a+)" ) 
```

等等。

# html - 如何触发浏览器通过 CGI 保存文件？

> ID：10912369
> 
> 赞同：0
> 
> 时间：2012-06-06T10:24:59.223
> 
> 标签：html, perl, browser, user-interface, cgi

我有以下隐藏形式：

```
<form id='export_svg_container_single_form'
      action='exportSVG.pl'
      method='post'
      target='_blank'
      style='display:none;'>
  <input type='text'
         id='export_svg_container_single_form_data'
         name='export_svg_data'
         style=';' />
</form> 
```

在提交表单之前，该`export_svg_data`字段值会使用 SVG 文档填充。

提交后，它将作用于以下用 Perl 编写的简单 CGI 脚本：

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI;
use CGI::Pretty qw/:standard/;

my $val = param('export_svg_data');
print "Content-Type:image/svg+xml\n";
print "Content-Disposition: inline\n";
print "Content-Description: File to download\n\n";
print $val; 
```

提交时，隐藏的表单还会打开一个新选项卡并显示（在本例中）一个 SVG 文档。然后，最终用户可以将窗口保存到文件中。

相反，在提交表单时，我想做的是让浏览器自动打开“**保存**”或“**另存为**”对话框，以便用户可以选择文件名并保存文档，而不是在浏览器窗口中呈现 SVG。

我如何使用 JavaScript 或对 CGI 脚本进行适当的更改来做到这一点？（如果需要，我想保持父表单页面不变，即打开一个新选项卡或窗口。）感谢您的建议。

再次澄清一下，我正在寻找一种可以打开“**保存**”对话框的解决方案。我不希望脚本在没有任何用户干预的情况下确定文件名并将其随机保存在某处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T10:27:01.263

改为使用[`Content-Disposition: attachment; filename="example.svg"`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T13:03:26.733

顺便说一句......你能澄清一下这是为了什么吗？可能是替代解决方案...

Content-Disposition 不会有普遍的帮助，你最终需要的是从虚拟 URL 提供这个文件，比如说

/生成图像/生成名称.svg

然后你在你的 HTML 中说

```
<form ... action="/generated-images/generatedname.svg" ...> 
```

并且您的脚本类似于这些 Apache 指令（在 config 或 .htaccess 中），我不保证这可以正常工作，但我认为它接近事实（您还需要正确的路径和设置才能通过 Apache 运行该 CGI）

```
<Directory /.../generated-images/>
    Action mirror-svg-data /path/somescript.cgi
    AddHandler mirror-svg-data .svg
</Directory> 
```

或者您也可以将您的 URL 重写为脚本，但我不确定内部重定向如何与 POST 一起使用，您可以尝试以下方法：

```
RewriteRule /generated-images/.*\.svg /somepath/script.cgi [L] 
```

祝你好运！

# vbscript - VBScript 正则表达式循环

> ID：10912375
> 
> 赞同：0
> 
> 时间：2012-06-06T10:25:13.693
> 
> 标签：vbscript, coordinate-transformation

我正在使用带有正则表达式的 vbscript 来解析文件，这样我就可以转换一堆坐标。这是我拥有的当前代码：

```
Class cFormat
Private m_oSB
Private Sub Class_Initialize()
  Set m_oSB = CreateObject("System.Text.StringBuilder")
End Sub ' Class_Initialize

Public Function formatOne(sFmt, vElm)
 m_oSB.AppendFormat sFmt, vElm
  formatOne = m_oSB.ToString()
  m_oSB.Length = 0
End Function ' formatOne

Public Function formatArray(sFmt, aElms)
  m_oSB.AppendFormat_4 sFmt, (aElms)
  formatArray = m_oSB.ToString()
  m_oSB.Length = 0
End Function ' formatArray

End Class ' cFormat

Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")

Dim oFmt : Set oFmt = New cFormat

Dim oRE  : Set oRE  = New RegExp
oRE.Global    = True
oRE.Multiline = True
'                 0     1        2        3
oRE.Pattern = "^(\d+)d(\d+)'(\d+\.\d+)""([WN])$"

Dim sALL : sALL = goFS.OpenTextFile("C:\...\lat1.txt").ReadAll()
WScript.Echo sALL

WScript.Echo oFmt.formatArray( _
  "|{0,-5}|{1,-11}|{2,-11}|{3,-15}|" _
, Array("LoLa", "Degrees", "Minutes", "Seconds") _
)

 Dim oMTS : Set oMTS = oRE.Execute(sALL)

Dim oMT
For Each oMT In oMTS
  Dim sLoLa    : sLoLa    =      oMT.SubMatches(3)
  Dim nDegrees : nDegrees = CDbl(oMT.SubMatches(0))
  Dim nMinutes : nMinutes = CDbl(oMT.SubMatches(1))
  Dim nSeconds : nSeconds = CDbl(oMT.SubMatches(2))

WScript.Echo oFmt.formatArray( _
      "|{0,-5}|{1,11:N2}|{2,11:N2}|{3,15:N6}|" _
    , Array(sLoLa, nDegrees, nMinutes, nSeconds) _
)
Next 
```

我基于这个[答案](https://stackoverflow.com/questions/10739339/convert-latitude-longitude-to-decimal-degrees)。

我遇到的问题是，循环中的所有变量都是空的，所以在最后一个回显中我什么也没有得到。我似乎无法确定问题，是正则表达式吗？周期？我真的不知道。

lat1.txt 文件是一个简单的 txt 文件，包含以下几行：

```
41d3'40.313"N  
38d42'29.295"N  
41d28'13.616"N 
```

第一个回显语句正在工作......问题出在最后一个。

有人可以帮助我吗？

在此先感谢，克劳迪奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:00:21.863

这是您的模式，将其替换为

```
oRE.Pattern = "^(\d+)d(\d+)\'(\d+\.\d+)""(N|W) *$" 
```

给出以下，秒的输出在我的系统上不正确，但这可能是区域设置

```
41d3'40.313"N   
38d42'29.295"N   
41d28'13.616"N   

|LoLa |Degrees    |Minutes    |Seconds        |
|N    |      41,00|       3,00|  40.313,000000|
|N    |      38,00|      42,00|  29.295,000000|
|N    |      41,00|      28,00|  13.616,000000| 
```

# php - 将时间戳列添加到预先存在的 csv

> ID：10912376
> 
> 赞同：1
> 
> 时间：2012-06-06T10:25:14.857
> 
> 标签：php, csv

所以我有一个 CSV 文件，其中的行如下所示：

> 126404 "560-00877" "中心盖，A 级，灰色，" 877 2 34.29 0

我想添加一个时间戳列，使它们看起来像这样：

> 126404 "560-00877" "中心盖，A 级，灰色，" 877 2 34.29 0 2005-04-06

是否有一种简单的(r) php 方法可以打开 CSV 文件并将时间戳附加到每一行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:37:24.563

您可以将文件的每一行读入一个数组，并在写回时将时间戳附加到每一行：

```
$filename="/path/to/file.txt";

// Backup
if(!copy($filename, 'backup.txt')){
    die('Failed to backup!');
}

// Store file contents in array
$arrFile = file($filename);

// Open file for output
if(($fp = fopen($filename,'w')) === FALSE){
    die('Failed to open!');
}

// Write contents, inserting $data as second line
$currentLine = 0;
$cntFile = count($arrFile);
while( $currentLine <= $cntFile ){
    fwrite($fp, $arrFile[$currentLine].",".date('y-m-d').",\n");
    $currentLine++;
}

// Delete backup
unlink('backup.txt'); 
```

只需修改行`date('Y-M-D')`以适合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:43:40.413

这个？

```
$data = file("file.csv",FILE_IGNORE_NEW_LINES);
$fp = fopen("file_new.csv","w");
foreach((array)$data as $val) {
   fwrite($fp,$val." ".$timestamp."\r\n");   // build the $timestamp   
}
fclose($fp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:51:31.913

与标准函数最接近的是使用 fgetcsv/fputcsv 为您执行解析/转义工作：

```
$hSrc = fopen('path/to/file.csv', 'o');
if ($hSrc === false) {
    throw new Exception('Cannot open source file for reading!');
}

$hDest = fopen('path/to/new.csv', 'w');
if ($hDest === false) {
    throw new Exception('Cannot open destination file for writing!');
}

$timestamp = date('Y-m-d');

// reading source file into an array line by line
$buffer = 1000; // should be enough to accommodate the longest row
while (($row = fgetcsv($hSrc, $buffer, ' ')) !== false) {
    $data['timestamp'] = $timestamp;

    // writing that modified row into a new file
    if (fputcsv($hDest, $data, ' ') === false) {
        throw new Exception('Failed to write a CSV row!');
    }
}

fclose($hDest);
fclose($hSrc); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:59:35.107

我会这样做：

```
<?php
$file_path = "yourfile.txt";
$file = file($file_path, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
foreach ($file as $line => $content)
{
    $file[$line] = $content." ".date('Y-m-d');
}
$file = implode("\n",$file);
file_put_contents($file_path, $file);
?> 
```

# json - ASP.net REST 中的 json 日期序列化

> ID：10912381
> 
> 赞同：0
> 
> 时间：2012-06-06T10:25:33.667
> 
> 标签：json, rest, date-formatting

我正在开发一些以 json 格式返回数据的 REST API。ASP.net 将序列化数据，输出将是这样的。

```
[
  {

  "DueDate": "/Date(1338316200000+0530)/",
  "User": "XYZ"

 }
] 
```

在这里，我想以标准格式（如 C# datetime 格式）提供日期。尽管有很多方法可以在 javascript 中对其进行格式化，但我没有考虑这一点。有什么方法可以使用 json 生成标准日期格式，以便访问我的 API 的人可以在没有任何格式的情况下使用它们。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:20:37.813

这就是 .Net 序列化 DateTime obj 的方式，这是 .Net 知道您想要反序列化为 DateTime 对象而不是保留字符串表示的最安全方式。

为什么不直接返回一个格式化为你想要的格式的字符串，或者你的用户期望的格式。

# c - 在 C 中定义宏

> ID：10912387
> 
> 赞同：0
> 
> 时间：2012-06-06T10:26:06.363
> 
> 标签：c, macros

假设我定义了一个宏：

```
#define MAX(x,y)    ((x)>(y)?(x):(y)) 
```

如果我打电话会发生什么`MAX(I++,J++)`？

我不明白为什么答案不会像预期的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T10:28:21.290

宏仅用于预处理器。这是由 C 编译器编译的内容：

```
(((I++)>(J++))? ((I++):(J++))) 
```

如您所见，如果 I 大于 J，那么我将增加**两次**，而 J 增加一次，反之亦然。

* * *

你的宏甚至不正确。此处括号外层错误，会导致编译错误：

```
((I++):(J++)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:28:29.033

`MAX(I++,J++)`会扩大到`(((I++)>(J++))? ((I++):(J++)))`. `I++`请注意， and出现了两次`J++`，所以它们都会在比较之后递增，然后无论结果是哪个，都会再次递增。

您可以改用内联函数：

```
inline int MAX(int x, int y)
{
    return x > y ? x : y;
} 
```

但我认为宏具有适用于任何类型的优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:46:16.930

在`int res = MAX(x,y);`宏中将花费到

```
(((x) > (y)) ? (x):(y)); 
```

现在如果`x = a++`和`y = b++`那将转化为

```
(((a++) > (b++)) ? (res = a++):(res = b++)); 
```

因此，对于条件为真的路径，无论它是哪个变量，总共将是两次 inc，但存储的结果值`res`将只有一个增量（因为您使用的是后增量）。

在函数/宏调用中使用 post-inc 可能会很棘手，因为它们会引入微妙的逻辑故障。

更喜欢将变量按原样传递给函数/宏，并单独对其进行任何更改，这将节省您处理此类问题的时间。

# matlab - 矩阵？？？下标分配尺寸不匹配

> ID：10912388
> 
> 赞同：1
> 
> 时间：2012-06-06T10:26:14.357
> 
> 标签：matlab

如何解决以下问题。我正在尝试通过使用它的 x 和 y 分量（嵌入在 c 和 r 中）同时附加 z 维度来创建向量 distvec 和 magvec。

```
for pxRow = 1:h % fixed pixel row
 for pxCol = 1:w % fixed pixel column

 for r = 1:h % row of distant pixel
 for c = 1:w % column of distant pixel

 R(c,r) = sqrt((r-pxRow)^2 + (c-pxCol)^2);                               % pythagoras theorem to get distance to each pixel
 O(c,r) = sqrt(Ox(c,r).^2 + Oy(c,r).^2);                                 % orientation vector 
 If(c,r) = sqrt((dx(c,r)).^2 + (dy(c,r)).^2);                            % magnitude of current 
 Rxs(c,r) = R(c,r)./norm(R(c,r));                                        % unit vector from x to s                     
 dist(c,r) = Rxs(c,r)./R(c,r);
 mag(c,r) = O(c,r).*If(c,r);
 distvec(c,r) = [dist(c) dist(r) 0];
 magvec(c,r) = [mag(c) mag(r) 0];                      
 b(c,r) = cross(magvec,distvec);% b field = If(s)O(s) x Rxs/R.^2  BIOT SAVART LAW
 end
 end
 B(i) = {b}; % filling a cell array with results. read below 
```

？？？下标分配尺寸不匹配。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:46:16.857

下标赋值维度不匹配通常意味着左侧数组和右侧数组的大小不匹配。

由于您要进行如此多的数组分配，而我们看不到数组有多大，因此很难诊断。

错误还说什么？它是否指定了哪一行是问题？

我担心这两行：

```
distvec(c,r) = [dist(c) dist(r) 0];
magvec(c,r) = [mag(c) mag(r) 0]; 
```

而这条线

```
B(i) = {b}; 
```

使用 size 函数或类似函数检查左右向量的大小是否相同。

在 for 循环之前，添加

```
size(distvec)
size(magvec)
size(B)
size(b) 
```

distvec 和 magvec 都应该是 3D 数组。

# c# - 使用 eval 在 gridview 列中进行数据绑定

> ID：10912389
> 
> 赞同：1
> 
> 时间：2012-06-06T10:26:19.233
> 
> 标签：c#, asp.net

我有一个网格，其中包含一个用于显示国名的列。我需要将该列中的值显示为 contrycode-first 10 个国家名称的字母（印度）。我在项目模板中使用 Eval 函数进行了尝试：

```
<asp:TemplateField>
  <ItemTemplate>
      <asp:Label ID="CountryNameLabe" runat="server" Text='<%# Eval("CorporateAddressCountry").SubString(0,6) %>' ></asp:Label>
  </ItemTemplate>
</asp:TemplateField> 
```

但它显示错误。我可以在 eval 中使用自定义函数吗？请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T10:31:10.877

您可以使用三元运算符`?`：

```
<asp:Label ID="CountryNameLabel" runat="server" 
    Text='<%# Eval("CorporateAddressCountry").ToString().Length <= 10 ? Eval("CorporateAddressCountry") : Eval("CorporateAddressCountry").ToString().Substring(0,10) %>' >
</asp:Label> 
```

另一种在我看来更具可读性的方法是使用 GridView 的[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件：

```
protected void Gridview1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        var row = (DataRowView) e.Row.DataItem;
        var CountryNameLabel = (Label) e.Row.FindControl("CountryNameLabel");
        String CorporateAddressCountry = (String) row["CorporateAddressCountry"];
        CountryNameLabel.Text = CorporateAddressCountry.Length <= 10 
                               ? CorporateAddressCountry
                               : CorporateAddressCountry.Substring(0, 10);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:53:44.687

我是用

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                Label countryNameLabel = (Label)e.Row.FindControl("CountryNameLabel");
                countryNameLabel.ToolTip = countryNameToolTip(countryNameLabel.Text);
                countryNameLabel.Text = countryNameDisplay(countryNameLabel.Text);
            }
        }

protected string countryNameDisplay(string key)
        {
            CustomerBusinessProvider business = new CustomerBusinessProvider();
            string country = business.CountryName(key);
            country = key + "-" + country;
            if (country.Length > 10)
            {
                country = country.Substring(0, 10) + "...";
            }
            return country;
        }
        protected string countryNameToolTip(string key)
        {
            CustomerBusinessProvider business = new CustomerBusinessProvider();
            return business.CountryName(key);
        } 
```

# mobile - 短信银行服务器

> ID：10912391
> 
> 赞同：2
> 
> 时间：2012-06-06T10:26:28.197
> 
> 标签：mobile, sms, banking

我们使用什么硬件来实现 SMS 服务器来处理和接收来自客户端的 SMS 以用于移动银行应用程序等大型应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:34:55.820

对于非常大的事情，您通常会与电信提供商交谈，他们会为您提供网络容量，并可能为您提供兼容的硬件等（当然要收取高额费用）。如果不参考网络环境，您可能不会只使用现成的东西。

# php - YUIdoc 不解析我的文件

> ID：10912399
> 
> 赞同：0
> 
> 时间：2012-06-06T10:27:04.637
> 
> 标签：php, node.js, yui, documentation-generation

我试图摆脱 YUIdoc 的困扰，但我无法让它工作：这是我的 PHP 代码的一部分：

```
/**
* Estimates whether a number is odd or even
*
*@method odd_or_even
*@param num {number} String to fix
*@return {Boolean} Returns True on even number, False on odd
*/
function odd_or_even($num)
{
return ($num%2); // Returns 0 for odd and 1 for even
}

/**
* Detects if user runs one of the most common browsers
*
*@method detect_browser
*@return {string} Returns the browser name. 'Undefined' for undefined
*/
function detect_browser()
    {
$useragent = $_SERVER['HTTP_USER_AGENT'];

if(strpos($useragent, 'MSIE'))
    $browser = 'Internet explorer';

elseif(strpos($useragent, 'Firefox'))
    $browser = 'Firefox';

elseif(strpos($useragent, 'Chrome'))
    $browser = 'Google Chrome';

elseif(strpos($useragent, 'Opera'))
    $browser = 'Opera';

elseif(strpos($useragent, 'Safari'))
    $browser = 'Safari';

elseif(strpos($useragent, 'SeaMonkey'))
    $browser = 'SeaMonkey';

elseif(strpos($useragent, 'Flock'))
    $browser = 'Flock';

elseif(strpos($useragent, 'Prism'))
    $browser = 'Prism';

elseif(strpos($useragent, 'Deepnet Explorer'))
    $browser = 'Deepnet Explorer';

elseif(strpos($useragent, 'Maxthon'))
    $browser = 'Maxthon';

elseif(strpos($_SERVER['HTTP_USER_AGENT'], 'Avant'))
    $browser = 'Avant';

elseif(strpos($useragent, 'Camino'))
    $browser = 'Camino';

elseif(strpos($useragent, 'Shiira'))
    $browser = 'Shiira';

elseif(strpos($useragent, 'OmniWeb'))
    $browser = 'OmniWeb';

elseif(strpos($useragent, 'iCab'))
    $browser = 'iCab';

elseif(strpos($useragent, 'Stainless'))
    $browser = 'Stainless';

elseif(strpos($useragent, 'Fluid'))
    $browser = 'Fluid';

elseif(strpos($useragent, 'Konqueror'))
    $browser = 'Konqueror';

elseif(strpos($useragent, 'Galeon'))
    $browser = 'Galeon';

elseif(strpos($useragent, 'Epiphany'))
    $browser = 'Epiphany';

elseif(strpos($useragent, 'Swiftfox'))
    $browser = 'Swiftfox';

elseif(strpos($useragent, 'Swiftweasel'))
    $browser = 'Swiftweasel';

else
    $browser = 'Undefined';

return $browser; 
```

}

保存为 lib.php 然后我运行 'yuidoc 。这是输出：

```
info: (yuidoc): Starting YUIDoc@0.3.13 using YUI@3.5.1 with NodeJS@0.6.12
info: (yuidoc): Scanning for yuidoc.json file.
info: (yuidoc): Starting YUIDoc with the following options:
info: (yuidoc): { port: 3000, nocode: false, paths: [ '.' ], outdir: './out' }
info: (yuidoc): YUIDoc Starting from: .
info: (yuidoc): Making out dir: ./out
info: (yuidoc): Parsed 0 files in 0.004 seconds
info: (builder): Building..
info: (builder): Compiling Templates
info: (builder): Making default directories: classes,modules,files
info: (builder): Copying Assets
info: (builder): Rendering and writing 0 modules pages.
info: (builder): Finished writing module files
info: (builder): Rendering and writing 0 class pages.
info: (builder): Finished writing class files
info: (builder): Rendering and writing 0 source files.
info: (builder): Finished writing source files
info: (builder): Preparing index.html
info: (builder): Loading theme from/usr/local/lib/node_modules/yuidocjs/themes/default/theme.json
info: (builder): Writing API Meta Data
info: (builder): Writing index.html
info: (builder): Finished writing 1 files in 0.077 seconds
info: (yuidoc): Completed in 0.085 seconds 
```

而且文档是空的。我也尝试过使用 javascript，结果相同。我错了什么？

提前谢谢亚当

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T23:44:38.717

您的 YUIDoc 语法格式不正确。星号和@ 标记之间必须有空格。以下标题对我来说很好：

```
/**
* Estimates whether a number is odd or even
*
* @method odd_or_even
* @param num {number} String to fix
* @return {Boolean} Returns True on even number, False on odd
*/
function odd_or_even($num)
{
return ($num%2); // Returns 0 for odd and 1 for even
}

/**
* Detects if user runs one of the most common browsers
*
* @method detect_browser
* @return {string} Returns the browser name. 'Undefined' for undefined
*/ 
```

# python - django 我如何访问模型表单变量？

> ID：10912403
> 
> 赞同：0
> 
> 时间：2012-06-06T10:27:26.137
> 
> 标签：python, django

我有一个像这样的模型：

```
class CommentForm(forms.ModelForm):
    storyId = forms.IntegerField(required=True, widget=forms.HiddenInput())
    postId = forms.IntegerField(required=True, widget=forms.HiddenInput()) 
```

所以现在我想改变“storyId”的值

我发现，在我的代码中我需要这样做：

```
form = CommentForm()
form.initial['storyId'] = xyz 
```

或者在模型的**初始化**中我需要这个：

```
self.initial['storyId'] = xyz 
```

“最初”在做什么？为什么我不能直接去：

```
form = CommentForm()
form.storyId = xyz 
```

谢谢！

更新如果我运行`form.storyId = xyz`，那么在模板中，我将看不到传入的值。如果我运行

```
form.initial['storyId'] = xyz 
```

然后在模板中我*确实*看到了传入的值！没有其他代码更改，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:35:06.497

Modelform 只是一个类，因此您可以直接访问 modelform 变量。不需要首发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:48:40.813

参数“initial”在 forms.Form 类中使用，通常用于在呈现表单时初始化您希望看到的自动填充值。

在 ModelForm 的情况下，当您需要自动填充从表单的**init**方法调用的字段时使用初始值。

```
form = CommentForm()
form.storyId = xyz 
```

在上面的代码中，您直接将值分配给 Python 实例的属性，然后属性的类型也会发生变化。

变量storyId实际上是一个django.forms.fields.IntegerField，它有一个参数“initial”来初始化这个值。

一旦你指定了 form.storyId=xyz，那么 storyId 就取 xyz 的值，并且不会被渲染为一个表单域。

我希望这很清楚。

# php - Codeigniter 包含文件

> ID：10912405
> 
> 赞同：2
> 
> 时间：2012-06-06T10:27:41.890
> 
> 标签：php, codeigniter

我正在尝试在我的应用程序中包含一个标头。我创建了一个控制器`site`并在其中定义了一个函数`header`，它将数据变量呈现为`views/header.php`

但是，当我尝试访问`myUrl/site/header`所有变量时工作正常，但是当我在站点控制器中创建另一个函数`index`并包含`views/header`在其中时，我运行`site/index`然后我在标题中得到未定义的变量通知。

任何的想法？？

`class site extends CI_Controller { function header() {`

`$data =array('name'=>'foo');`

`$this->load->view('includes/header',$data); }`

`function index() {`

`$this->load->view('includes/index');` `} }`

`INDEX.PHP`

`$this->load->view('includes/header');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:48:27.890

如果您想保留 Html 页面的单独段（例如页眉、页脚、导航栏等）以分隔视图文件，我认为最好通过以下方式执行此操作

将您想要成为标题的内容保存到文件名 header.php（或您喜欢的任何其他内容）到视图文件夹中。假设，header.php 的内容是

```
<html>
    <head>
        <title>This is title</title>
    </head>
    <body> 
```

另一个名为 footer.php 的文件包含以下内容

```
</body>
</html> 
```

视图文件夹中的另一个文件 my_view.php 将保存该页面的内容。样本内容是

```
<?php $this->load->view('header');?>
<h1>Welcome</h1>
<p>Main contents here</p>
<?php $this->load->view('footer');?> 
```

现在，如果您从控制器函数加载 my_view，整个 HTML 页面将被渲染。

```
function my_controller_function(){
    $this->load->view('my_view');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:49:55.753

这不是正确的做法。基本上我像 Rafiqunnabi 那样做，除了我不在视图中加载视图。

例如：

```
 public function index()
{
  $this->load->view('include/header');
  $this->load->view('home');
  $this->load->view('include/footer');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:39:36.187

解决了！！！！

编写了一个新的助手并从那里返回数据，然后使用 load->view('includes/header',$data); 将数据传递给查看

# c++ - 编译 gSOAP 2.8.8 包错误

> ID：10912409
> 
> 赞同：0
> 
> 时间：2012-06-06T10:27:54.713
> 
> 标签：c++, compilation, gsoap

我正在使用 autoconf 和语句构建 gSOAP-2.8.8 包，如 ./configure、make、make install，同时使用语句 make 我得到以下错误：

```
C:\MinGW\msys\1.0\local\bin\bison.exe :cannot open file '/usr/local/share/bison/m4sugar/m4sugar.m4' 
```

并且制作不成功。

请帮我解决这个问题，非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:49:21.277

为了从源代码构建 gsoap，您需要安装许多工具，至少您需要确保您已经下载并构建了最新版本：au

*   自动配置
*   汽车制造
*   野牛
*   柔性
*   m4

如果你打算加密你的 SOAP 消息，那么还需要**openssl 。**

根据您的错误消息，我怀疑 m4 预处理器很可能丢失。

# android - 如何解析soap对象数据android？

> ID：10912410
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:28:08.703
> 
> 标签：android, parsing, soap

我正在使用 ksoap2 从 Java Web 服务获得响应，例如

> CouponsListResponseParams{response=anyType{CouponId=333; 优惠券名称=REMEDY2；优惠券金额=1500；Coupon_expiry_date=2012-05-02 00:00:00.0; }; 响应=anyType{CouponId=111; 优惠券名称=补救措施；优惠券金额=500；Coupon_expiry_date=2012-05-02 00:00:00.0; }; 响应=anyType{CouponId=222; 优惠券名称=REMEDY2；优惠券金额=1000；Coupon_expiry_date=2012-05-02 00:00:00.0; }; }

请任何人帮助我如何解析数据，我想获取 copon id、优惠券名称等。

请帮我

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:07:24.820

如果您在读取此类复杂数据时遇到问题，那么您可以使用 HttpPost 方法来读取 SOAP 服务。HttpPost 方法在读取 SOAP 服务后返回 XML。

您可以使用 XML DOM 解析轻松解析此返回 XML。

# matlab - Matlab 对话框

> ID：10912411
> 
> 赞同：1
> 
> 时间：2012-06-06T10:28:09.473
> 
> 标签：matlab, dialog

请帮我：

我希望用户输入一个包含数字或/和字母（没有空格）的文件名。

所以我有两个问题：

1）我尝试了下一个代码，但对话框打开又打开又打开......因为我不知道如何编辑'answer'输入而不再次调用'inputdlg'。

2) 检查文件名的有效性：我使用了 'isempty' 和 'strfind' 函数，但我知道有一个更简单的选项可以做到这一点。在我的代码中，我必须在其他情况下检查每个字母：

```
 while isempty(strfind(answer,'=')) == 0 || isempty(strfind(answer,'*')) == 0 || ... 
```

也许有“正则表达式”功能，但我不知道该怎么做：/

所以我的代码是：

```
prompt={'Enter the File name:'};
name='Input for file name';
numlines=1;
answer=inputdlg(prompt,name,numlines);
while isempty(strfind(answer,'=')) == 0
    answer=inputdlg(prompt,name,numlines);
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:01:42.927

正如[@bdecaf](https://stackoverflow.com/questions/10912411/matlab-dialog-box/10914739#comment14232022_10912411)在评论中建议的那样，您可以使用[UIPUTFILE](http://www.mathworks.com/help/techdoc/ref/uiputfile.html)函数来显示“另存为”类型的对话框：

```
[fName,pName] = uiputfile({'*.xlsx' 'Excel (*.xlsx)'}, 'Save as', 'myfile.xlsx');
if pName==0, error('No file selected'); end
fullName = fullfile(pName,fName); 
```

![截屏](../Images/373ec3f6901a452b9207c12b77e8ad02.png)

它返回类似：

```
>> fName
fName =
test.xlsx

>> fullName
fullName =
C:\Users\Amro\Documents\example\test.xlsx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:00:20.483

您的变量`answer`是一个单元格数组。因此，您应该检查元胞数组的内容：

```
name='Input for file name';
numlines=1;
answer={''};
% answer=inputdlg(prompt,name,numlines);
while  all( cellfun(@isempty,strfind(answer,'=')) ) 
    answer = inputdlg(prompt,name,numlines);
end 
```

在更全球化的背景下，我同意@bdecaf 和@Amro，你应该使用`uigetfile`. 您也可以使用检查文件的有效性`exist(fileName,'file')`

# javascript - 当字符串中包含单引号时，如何将字符串分配给javascript中的变量

> ID：10912422
> 
> 赞同：-5
> 
> 时间：2012-06-06T10:28:36.367
> 
> 标签：javascript, string

在我的程序中有一个变量名“quotes”，它从 API 调用中获取输入字符串。
**当字符串中有单引号时，程序不起作用。**

```
<script>
    var quotes = "Empty"
        if(user.quotes)
           quotes = user.quotes;    // get the string to 'quotes' variable
</script> 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:37:54.657

替换单引号（像 PHP 一样转义）：

```
<script>
    var quotes = "Empty"
        if(user.quotes)
           quotes = user.quotes.replace(/'/g,"\\\'");    // get the string to 'quotes' variable
</script> 
```

然后，无论您使用引号，将“\'”替换回“'”。

# bluetooth - Hcitool 扫描检测到手机，但 Bluez Inquiri 没有

> ID：10912423
> 
> 赞同：1
> 
> 时间：2012-06-06T10:28:36.807
> 
> 标签：bluetooth, rssi

我正在尝试获取 Android 和 Apple 手机的 RSSI。

我可以使用 hcitool scan 检测到它们，但是当我使用 [blueZ inquisitor](http://www.wensley.org.uk/c/inq/inq.c)运行我的程序时，我无法检测到必须最近使用的手机。使用我的旧诺基亚和苹果鼠标，该程序可以检测到，但其他人没有...

我正在使用 BlueZ 3.36... 我应该如何检测最新手机的 RSSI 值？

# api - 页面中的 Facebook 应用程序：redirect_uri 上的身份验证和错误 191

> ID：10912427
> 
> 赞同：0
> 
> 时间：2012-06-06T10:28:47.610
> 
> 标签：api, facebook-apps, facebook-page, facebook-oauth

我正在关注[这个文档](http://developers.facebook.com/docs/authentication/pagetab/)来创建在页面中工作的我的 facebook 应用程序，但我有一些错误。我创建了一个 index.php ：

```
$i = parse_signed_request($_POST['signed_request'], $mysecret);
if ($i['oauth_token']){ 
        echo "<script type='text/javascript'>
        var oauth_url = 'http://www.facebook.com/dialog/oauth/';
        oauth_url += '?client_id=MYAPPID';
        oauth_url += '&redirect_uri=' + encodeURIComponent('http://www.facebook.com/pages/null/PAGE_ID/app_MYAPPID');
        oauth_url += '&scope=email';
        window.top.location = oauth_url;
        </script>"; 
}else{
 location.href="mypage.html";
} 
```

我的应用程序的设置是：

```
Website with Facebook Login: http://mysite.com/app/
Canvas URL  : http://mysite.com/app/index.php?canvas=1
Page TAB URL: http://mysite.com/app/index.php 
```

此代码生成

> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：'无效的 redirect_uri 给定的 URL 不受应用程序配置的允许。'

我也尝试使用'http://www.facebook.com/MYPAGEALIAS/app_MYAPPID'作为redirect_uri，但得到同样的错误。

如果我将redirect_uri 更改为[http://apps.facebook.com/MYAPPID/index.php](http://apps.facebook.com/MYAPPID/index.php)（但这不是我想要的！）facebook 问我身份验证，并且在firefox 上一切正常（IE 进入无限循环）。

我在任何地方读过书，也做过其他测试，但我总是出错......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:35:40.413

将 Canvas URL 和页面选项卡 URL 放置为

```
http://mysite.com/app/ 
```

# java - 等效于 Java 中的 doesNotRecognizeSelector

> ID：10912431
> 
> 赞同：0
> 
> 时间：2012-06-06T10:29:08.533
> 
> 标签：java, android, exception

在 Java 中是否有一个等价物或技巧来捕获未实现的方法调用，就像我们可以在 Objective C 中使用 dosNotRecognizeSelector 一样。我正在寻找一种方法，让对象在方法未实现时以默认行为回复任何方法调用? 是否可以在 Java 中使用这种模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:31:59.827

你可以使用`UnsupportedOperationException`which 会做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:38:40.410

“任何”方法调用？

你不能对没有实现方法的对象*进行*方法调用，它不会编译。除非您通过反射谈论，否则在这种情况下，反射本身会引发异常。

如果您谈论的是一种空洞的“不要打电话给我”的方法，那么 Rishi 的回答可能是最好的。

# asp.net-mvc - 在 ASP.NET MVC 中的“ViewContainer”中动态添加视图

> ID：10912437
> 
> 赞同：0
> 
> 时间：2012-06-06T10:29:29.527
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在尝试制作以下布局： http: [//i.imgur.com/JS8hO.png](http://i.imgur.com/JS8hO.png)
*（由于垃圾邮件规则，我无法直接放置图像。）*

我想使用加载 HeaderView、SidebarContainerView 和 ContentContainerView 的布局文件。控制器需要向 SidebarContainerView 添加一个数据网格。当您单击数据视图中的一行时，必须在 ContentContainerView 中打开一个 ChartView。问题是在 ContentContainerView 中动态添加视图。我使用 HTML.RenderPartialView 和 Sections 进行了尝试，但没有得到我想要的结果。

我正处于学习 MVC 4.0 的初级阶段，所以这可能是一个简单的问题，但 Google 似乎并不知道答案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:38:49.013

```
<div id="ContentContainerView">

</div> 
```

在侧边栏容器视图中：

您应该将行单击事件绑定到此函数：

```
function AddChart(chartType) {
    $.getJSON("/MyController/AddChart",
    {
        chartType: chartType
    },
    function (data) {
        $('#ContentContainerView').append(data);
    });
} 
```

这里的data是部分图表视图，会附加到contentcontainerview中。请注意，您应该在从 AddChart 操作方法返回为 Json 之前序列化图表视图。

# asp.net-mvc - MVC3（Razor）如何在Controller中使用json传递的数据做一些事情

> ID：10912438
> 
> 赞同：1
> 
> 时间：2012-06-06T10:29:32.797
> 
> 标签：asp.net-mvc, json, razor

我已使用以下 jQuery Ajax 代码将视图中的模型传递给控制器​​：

```
$.ajax({
        data: model,
        type: "POST",
        url: '@Url.Action("createDoc")',
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert('Done '+ result.toString());
        }
    }); 
```

问题是：在Controller方法“createDoc”

```
[HttpPost]
    public ActionResult createDoc(IEnumerable<Movie> movies)
    {
        CreateWordprocessingDocument(movies);
        return Json(new { result = movies.Count()});
    } 
```

我无法对电影 Enumerable 数据做任何事情。调用 CreateWordProcessingDocument 创建一个包含电影数据的文档。但事实并非如此。这是方法代码：

```
public void CreateWordprocessingDocument(IEnumerable<Movie> movies)
{
    HttpContextWrapper context = new HttpContextWrapper(System.Web.HttpContext.Current);
    context.Response.Clear();
    context.Response.Buffer = true;
    context.Response.AddHeader("content-disposition", "attachment;filename=example.doc");
    context.Response.ContentType = "application/vnd.ms-word.document";
    context.Response.Charset = "";
    StringBuilder sb = new StringBuilder();
    sb.AppendLine("<p  align='Center'><b> GENERAL TITLE</b></p>");
    sb.Append("<br>"+movies.Count());
    for (int i = 0; i < movies.Count(); i++) {
        sb.Append("<br>Title:" + movies.ElementAt(i).Title +"");
    }
    context.Response.Output.Write(sb.ToString());
    context.Response.Flush();
    context.Response.End();
} 
```

但它不起作用：它返回到 ajax 帖子并弹出“完成”警报，result.tostring() 显示我在 createWordProcessingDocument 方法上创建的 HTML 代码。我怎样才能避免这种行为，以便我可以对从视图传递给控制器​​的数据做一些事情？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:58:36.270

ASP.net MVC 包含一个`FileResult`用于向浏览器返回具有 mime 类型的文件。

改为执行以下操作：

```
public ActionResult  createDoc(IEnumerable<Movie> movies)
{
    byte[] fileContents = CreateFileFromMovies(movies);

    return File(fileContents, "application/vnd.ms-word.document");
} 
```

与其直接访问响应，不如将文档创建为字节数组并使用该`File()`方法返回内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:18:44.397

问题已解决：我在这里发布解决方案，如果它可以帮助解决我的问题。在我的*createDoc*方法中，我使用所需数据创建字符串，然后将它们放入 tempData 属性中。这就是*createDoc*的样子：

```
[HttpPost]
    public void createDoc(IEnumerable<Movie> movies)
    {
        String mov="";
        mov = mov + "<br>" + movies.Count();
        for (int i = 0; i < movies.Count(); i++)
        {
           mov=mov+"<br>Title:" + movies.ElementAt(i).Title + "";
        }
        TempData["movies"] = mov;
    } 
```

然后“控制”返回到 Ajax 的 post 方法，在它的最后我放了这个：

```
success: function (result) {
            window.location.href = '@Url.Action("CreateWordprocessingDocument","Movies")'
        } 
```

所以我的 Ajax 发布完整代码是：

```
<script type="text/javascript">
function postData() {
    var urlact = '@Url.Action("createDoc")';
    var model = '@Html.Raw(Json.Encode(Model))';

    alert(model);
    alert(JSON.stringify(model));

    $.ajax({
        data: model,
        type: "POST",
        url: urlact,
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            window.location.href = '@Url.Action("CreateWordprocessingDocument","Movies")'
        }
    });
}
</script> 
```

现在“控件”被重定向到*CreateWordProcessingDocument*操作，我实际上是在其中创建文档：

```
public void CreateWordprocessingDocument()
    {
        string movies = TempData["movies"] as string;
        context.Response.Clear();
        context.Response.Buffer = true;
        context.Response.AddHeader("content-disposition", "attachment;filename=example.doc");
        context.Response.ContentType = "application/vnd.ms-word.document";
        context.Response.Charset = "";
        StringBuilder sb = new StringBuilder();
        sb.AppendLine("<p  align='Center'><b>TITLE</b></p>");
        sb.Append(movies);
        context.Response.Output.Write(sb.ToString());
        context.Response.Flush();
        context.Response.End();
    } 
```

就这样。感谢大家的帮助，希望我可以帮助某人解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:46:45.370

您获得在 CreateWordprocessingDocument 中创建的 HTML 代码的原因是因为这是您直接输出到 HTTP 响应的内容。然后您结束了响应。基本上，您通过自己直接编写响应绕过了很多 ASP.NET MVC。

# iphone - iOS in-app-purchase restore returns many transactions

> ID：10912442
> 
> 赞同：4
> 
> 时间：2012-06-06T10:29:42.297
> 
> 标签：iphone, ios, in-app-purchase, restore

When I am restoring my previous purchase. `Storekit` is calling `updateTransations` with large number of previous transactions. Don't know why it is returning these large amount like 100, 200 ,245, 360, 650 seems like random in every restore.

Is that happen in the sandbox only? If no, what should be the criteria of selecting the item. I have many items with the same product id?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:56:28.323

有很多关于使用 updateTransactions 进行恢复的投诉。下面的代码可以工作，但它要求用户输入他们的用户名和密码。（现在开发人员一直将它放在需要按钮的 IBAction 调用中）

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

然后调用下面的委托。

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
     for (SKPaymentTransaction *transaction in queue.transactions) 
    {
        if ([myItem.productID isEqualToString:transaction.payment.productIdentifier])
        {
            myItem.purchased = YES;
        }
    }
} 
```

如果没有需要恢复的项目，我想知道如何在我的界面上不放置“恢复”按钮的情况下执行此操作。

# windows-phone-7 - WP7.1：如何通过代码打开收件箱（设备原生）

> ID：10912447
> 
> 赞同：0
> 
> 时间：2012-06-06T10:29:56.010
> 
> 标签：windows-phone-7, email, inbox

我正在使用功能注册部分，当用户注册成功时，它将导航到带有“打开电子邮件”按钮的页面 - 此按钮将打开设备上用户电子邮件的收件箱。我做了一些研究，但没有运气，我找不到任何有用的文章。请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:53:50.473

虽然您无法将客户导航到他们的收件箱，但您可以指导[他们](http://msdn.microsoft.com/en-us/library/hh394003%28v=vs.92%29)使用[`EmailComposeTask`](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.emailcomposetask%28v=vs.92%29).

如果您试图让他们阅读您的电子邮件（除了考虑他们*可能*使用他们没有在手机上配置的电子邮件地址进行注册；或者他们*可能*有多个收件箱可供选择），那么您可能需要稍微重新考虑您的工作流程 - 可能允许使用该应用程序，或者将您需要的任何令牌传输回手机作为注册过程的一部分。

# json - Micro Cloud Foundry Sinatra Hello world application fails to upload - JSON error

> ID：10912452
> 
> 赞同：0
> 
> 时间：2012-06-06T10:30:12.703
> 
> 标签：json, cloud-foundry

I'm just trying to get started with CloudFoundry and am attempting to upload the sample Hello World sinatra app. It fails with a JSON 413 error as follows:

*Would you like to deploy from the current directory? [Yn]: y
Pushing application 'hello'...
Creating Application: OK
Uploading Application:
Checking for available resources: OK
Processing resources: OK
Packing application: OK
Uploading (1009M): OK
Error (JSON 413):
413 Reques...*

I think this is something to do with the package being too large, the above output seems to suggest it's 1009M!?

Any thoughts on what might be going wrong here?

Cheers,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:12:57.337

您的应用所在的文件夹中必须有数据，因为它报告的有效负载为 1009MB。尝试创建一个新文件夹，将 sinatra 文件移到那里，然后再次推送到 Cloud Foundry。

# django - Django - “帮助者”不是有效的标签库

> ID：10912455
> 
> 赞同：3
> 
> 时间：2012-06-06T10:30:25.770
> 
> 标签：django, django-templates, django-filters

遵循[自定义模板标签和过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)教程时，我收到此错误：

```
'helpers' is not a valid tag library: Template library helpers not found, tried django.templatetags.helpers,django.contrib.staticfiles.templatetags.helpers,django.contrib.admin.templatetags.helpers 
```

我看到很多关于这个问题的问题，但以下操作都没有解决它。

文件夹结构：

```
container/
  module/
    templatetags/
      __init__.py
      helpers.py
    templates/
      ...
    ... (views, models, ...)
  system/
    ... (urls, settings, ...) 
```

在`system/settings.py`中，该模块包括：

```
INSTALLED_APPS = (
    ...
    'module',
) 
```

我的助手源不会从 django shell 触发任何语法或导入错误：

```
from django import template
register = template.Library()

@register.filter
def myhelper(value):
    return value 
```

最后，调用的模板`myhelper`很简单：

```
{% load helpers %}
{{ "hello"|myhelper }} 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:31:06.260

多亏了`sergzach`'s 的想法，我能够通过将其文件从 重命名为 来使我的过滤器`helpers.py`工作`somethingelse.py`。

* * *

## 编辑

Django 有自己的[帮助](http://code.djangoproject.com/svn/django/tags/releases/1.2.5/django/contrib/admin/helpers.py)程序来生成管理页面。这将是命名冲突的原因。

# string - Perl : Couldn’t use Text::Wrap:wrap() as per exact requirement

> ID：10912456
> 
> 赞同：0
> 
> 时间：2012-06-06T10:30:27.913
> 
> 标签：string, perl

I would like to restrict the column number to 45 characters. I am using the `Text::Wrap:wrap` as below.

```
$Text::Wrap::columns = 44;
print FOUT wrap('','' ,<FIN>); 
```

It is making all the colums to 44 chars without word breakage. But it is reducing spaces for some of the lines at the begining.

**Text before using `wrap()`:**

```
EVENTS: KINJHK QDFMED QDFMED
        QDFMED KINJHK QDFMED
        KINJHK

BUTIONS: 52314 KINJHK KINJHKQDFMED
         QDFMED42 KINJHK524 MBCXZ
         56.321 ILOLKI 421 
```

**TeXt after using `wrap()`**

```
EVENTS: KINJHK QDFMED QDFMED
      QDFMED KINJHK QDFMED
      KINJHK

BUTIONS: 52314 KINJHK KINJHKQDFMED
      QDFMED42 KINJHK524 MBCXZ
      56.321 ILOLKI 421 
```

For example in the `EVENTS` section the spaces are reduced before the line `QDFMED KINJHK QDFMED` and the below lines. But I want the alignment should not be disturbed after using `wrap()` method.

I have tried many ways of using this wrap, but no use. Could any please help me.

Thanks. Vis.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:52:23.473

您使用的是哪个版本的 Text::Wrap 模块？使用 2009.0305 如

```
#! /usr/bin/env perl

use strict;
use warnings;

use Text::Wrap;

# demo only
*FIN = *DATA;
*FOUT = *STDOUT;

$Text::Wrap::columns = 44;
print FOUT wrap('', '', <FIN>);

__DATA__
EVENTS: KINJHK QDFMED QDFMED
        QDFMED KINJHK QDFMED
        KINJHK

BUTIONS: 52314 KINJHK KINJHKQDFMED
         QDFMED42 KINJHK524 MBCXZ
         56.321 ILOLKI 421 
```

产生您想要的输出并且不会减少缩进。

```
事件：KINJHK QDFMED QDFMED
        QDFMED KINJHK QDFMED
        金杰香港

BUTIONS: 52314 KINJHK KINJHKQDFMED
         QDFMED42 KINJHK524 MBCXZ
         56.321 伊洛基 421
```

注意：代码中的所有空格都是空格字符，没有制表符。但是，用前导 TAB 字符替换空格对输出没有影响。

也许您的代码中还有其他一些我们还不知道的重要上下文。

# asp.net-mvc-3 - jqgrid reload is not working

> ID：10912457
> 
> 赞同：0
> 
> 时间：2012-06-06T10:30:28.890
> 
> 标签：asp.net-mvc-3, jqgrid

my code....

```
public string ConstructButtonEvents(string buttonid, string gridID, string GridControlId, string ActionUrl)
    {
        StringBuilder sbButtonEvents = new StringBuilder();
        GridControlId = GridControlId.Trim();
        sbButtonEvents.Append(" $('#" + buttonid + "').die().live('click', function () { ");
        sbButtonEvents.Append("var SelectedArtifactDetails = new Array();");
        sbButtonEvents.Append(" var CurrentArtifactDetails = new Array();");
        sbButtonEvents.Append("for (var i = 0; i < $('#" + gridID + " tbody tr').length; i++) {");
        sbButtonEvents.Append(" var rowId = jQuery('#" + gridID + " tr:eq(' + i + ')').attr('id');");
        sbButtonEvents.Append("var row = $('#" + gridID + "').jqGrid('getRowData', rowId);");

        sbButtonEvents.Append(" if (($('#Status" + GridControlId + "'+rowId).attr('checked') == 'checked') && ($('#Status" + GridControlId + "'+rowId).attr('disabled') != 'disabled')) {");

        sbButtonEvents.Append("CurrentArtifactDetails = {");
        sbButtonEvents.Append(" Complete: 'Y',");
        sbButtonEvents.Append("StakeHolderEmail: $('#Stakeholder" + GridControlId + "'+rowId).attr('value'),");
        sbButtonEvents.Append("UploadFile: $('#uploadFile" + GridControlId + "'+rowId).attr('value'),");
        sbButtonEvents.Append("PhaseArtifactId: $(row).attr('ID'),");

        sbButtonEvents.Append("Status: $('#list" + GridControlId + "'+rowId+'  option:selected').text()");
        sbButtonEvents.Append("};");

        sbButtonEvents.Append("SelectedArtifactDetails.push(CurrentArtifactDetails);");
        sbButtonEvents.Append("}");
        sbButtonEvents.Append("}");

        sbButtonEvents.Append(" $.ajax({");
        sbButtonEvents.Append(" url: '" + ActionUrl + "',");
        sbButtonEvents.Append(" async: false,");
        sbButtonEvents.Append(" loadonce:false, type: 'POST', dataType: 'json', data: JSON.stringify(SelectedArtifactDetails), contentType: 'application/json; charset=utf-8',");
        sbButtonEvents.Append(" success: function () {");
        //sbButtonEvents.Append(" $('#" + gridID + "').jqGrid('GridUnload');");
        sbButtonEvents.Append(" $('#" + gridID + "').trigger('reloadGrid');");            
        sbButtonEvents.Append(" }, error: function () { alert('error'); }");
        sbButtonEvents.Append("});");
        sbButtonEvents.Append("});");

        return sbButtonEvents.ToString();
    } 
```

i have mutliple tabs yet the grid id generation is perfect. I'm constructing the grid in the .cs itself. i need to update the data in the rows to the DB. so, i have an update button... on click of it i post (ajax) the data. The data is getting updated pretty much well. But the grid is not getting reloaded.

on click of update button i fetch the values and then the below ajax post is called

```
$.ajax({ url: '/SDLCMClassic/EditProject/BatchUpdate',
    type: 'POST',
    dataType: 'json',
    data: JSON.stringify(SelectedArtifactDetails),
    contentType: 'application/json; charset=utf-8',
    success: function () {
        $('#tblArtifact1').trigger('reloadGrid');
    }, error: function () { alert('error'); }
}); 
```

});

I'm able to fetch the row values in the grid and i'm able to post it successfully. It is getting updated in DB as well. But immediate reload is not happening. if i refresh the whole page then only i'm able to see the updated data.

Here is the code to construct jqgrid in js

```
$(function () {
    $('#tblArtifact1').jqGrid({
        url: '/SDLCMClassic/EditProject/FillArtifactGrid?ppmno=188035&phaseName=Project Startup',
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Artifact', 'Complete', 'Status', 'Stakeholder', 'App Reference', 'Document', 'URL', 'ID'],
        colModel: [
        { name: 'Name', index: 'Name', editable: false, edittype: '', align: 'left', key: false, hidden: false, formatter: 'showlink', formatoptions: { target: '_blank', baseLinkUrl: '' }, width: $(window).width() * .1, sortable: false },
        { name: 'Complete', index: 'Complete', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .06, sortable: false },
        { name: 'Status', index: 'Status', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .10, sortable: false },
        { name: 'StakeHolderEmail', index: 'StakeHolderEmail', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .15, sortable: false },
        { name: 'App Reference', index: 'App Reference', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .15, sortable: false },
        { name: 'Document', index: 'Document', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .18, sortable: false },
        { name: 'URL', index: 'URL', editable: false, edittype: '', align: 'center', key: false, hidden: false, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .15, sortable: false },
        { name: 'ID', index: 'ID', editable: false, edittype: '', align: 'center', key: false, hidden: true, formatter: '', formatoptions: { target: '', baseLinkUrl: '' }, width: $(window).width() * .01, sortable: false }
         ],
        viewrecords: true,
        sortname: 'Complete',
        sortorder: 'asc',
        width: 'auto',
        height: 'auto',
        subGrid: true,
        subGridRowExpanded: function (subgrid_id, row_id) {
            $('#' + subgrid_id).html(renderhtmlforSubgrid(this, subgrid_id, row_id));
        },
        gridComplete: function () {
            var dataIds = $('#tblArtifact1').jqGrid('getDataIDs');
            for (var i = 0; i < dataIds.length; i++) {
                $('#tblArtifact1').editRow(dataIds[i], false);
            }
        },
        loadComplete: function () {
            ModifyGridDefaultStyles('tblArtifact1');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:18:34.073

您没有发布代码中最重要的部分：定义 jqGrid 的代码。所以我不得不猜测。

不重新加载网格的典型问题`.trigger('reloadGrid');`是因为您使用`loadonce: true`jqGrid 中的选项。它`datatype`从初始值`"json"`或`"xml"`值变为`datatype: "local"`。所以重新加载确实有效，但重新加载本地数据。如果您需要从服务器重新加载数据，您必须重置`datatype`为*初始*值`"json"`或`"xml"`在触发之前`reloadGrid`。有关详细信息，请参阅[答案](https://stackoverflow.com/a/5398136/315935)和[答案](https://stackoverflow.com/a/7067579/315935)。

# web-applications - web application startup (spring 3.0)

> ID：10912458
> 
> 赞同：1
> 
> 时间：2012-06-06T10:30:30.263
> 
> 标签：web-applications, spring-mvc, startup

I want a method (or some functionality) to be executed after my web application starts (context loaded). I am using spring 3.0 as framework.

I tried using ServletContextListener which I implemented in my class

my listener class

```
package myapp.listner;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class MyContextListner implements ServletContextListener{

    public static long appStart=0L;
    @Override
    public void contextDestroyed(ServletContextEvent arg0) {

        System.out.println("Context Destroyed");
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
        appStart=System.currentTimeMillis();
        System.out.println("Context Initialised");

    }

} 
```

and part of web.xml is

```
<listner>
     <listner-class>myapp.listner.MyContextListner</listner-class>
    </listner>

    <servlet>
      <servlet-name>dispatcher</servlet-name>

      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
      <servlet-name>dispatcher</servlet-name>
      <url-pattern>/forms/*</url-pattern>
    </servlet-mapping> 
```

but its not printing that message.....

Please help me....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:41:51.363

PostConstruct 和 PreDestroy 注释，如下所示：

```
@Configuration
public class MyConfig{

    @PostConstruct
    public void contextInitialized(){
      System.out.println("Context Initialised");
    }

    @PreDestroy
    public void contextdestroyed(){
      System.out.println("Context Destroyed");
    }
} 
```

您不必在配置 bean 中使用，它可以在[任何地方](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/)。

# c - Skip fingerprint reader PAM module to authenticate with PAM from C application

> ID：10912459
> 
> 赞同：1
> 
> 时间：2012-06-06T10:30:31.750
> 
> 标签：c, linux, unix, networking, pam

I would like to authenticate users of my C network application with PAM and I have a found [a nice PAM example](https://stackoverflow.com/a/5970078/403571) here on Stack, which I attach at the bottom. The problem is that in my development machine I have a fingerprint reader which PAM is set up to use, as in `/etc/pam.d/common-auth`:

```
#%PAM-1.0                                                                                                                                                                                                                        
#                                                                                                                                                                                                                                
# This file is autogenerated by pam-config. All changes                                                                                                                                                                          
# will be overwritten.                                                                                                                                                                                                           
#                                                                                                                                                                                                                                
# Authentication-related modules common to all services                                                                                                                                                                          
#                                                                                                                                                                                                                                
# This file is included from other service-specific PAM config files,                                                                                                                                                            
# and should contain a list of the authentication modules that define                                                                                                                                                            
# the central authentication scheme for use on the system                                                                                                                                                                        
# (e.g., /etc/shadow, LDAP, Kerberos, etc.). The default is to use the                                                                                                                                                           
# traditional Unix authentication mechanisms.                                                                                                                                                                                    
#                                                                                                                                                                                                                                
auth    required    pam_env.so                                                                                                                                                                                                 
auth    sufficient  pam_fprint.so                                                                                                                                                                                             
auth    optional    pam_gnome_keyring.so                                                                                                                                                                                         
auth    required    pam_unix2.so 
```

`pam_fprint.so` is the fingerprint reader plugin. When you normally log in, the scan can fail and you are prompted for a password. However, sshd daemon does not initiate the fingerprint at all and I would like to understand how it skips it, because for example `/etc/pam.d/sshd` references the common-auth module so it must pull it ..

```
#%PAM-1.0
auth     requisite  pam_nologin.so
auth     include        common-auth
account  requisite      pam_nologin.so
account  include        common-account
password include        common-password
session  required   pam_loginuid.so
session  include        common-session
session  optional       pam_lastlog.so   silent noupdate showfailed 
```

I have tried to reference the 'sshd' scheme from the C program but it still initiates the fingerprint reader. I want to skip the fingerprint reader somehow in C and retain my fingerprint reader default config.

```
 #include <stdlib.h>
    #include <iostream>
    #include <fstream>
    #include <security/pam_appl.h>
    #include <unistd.h>

// To build this:
// g++ test.cpp -lpam -o test

struct pam_response *reply;

//function used to get user input
int function_conversation(int num_msg, const struct pam_message **msg, struct pam_response **resp, void *appdata_ptr)
{
  *resp = reply;
  return PAM_SUCCESS;
}

int main(int argc, char** argv)
{
  if(argc != 2) {
      fprintf(stderr, "Usage: check_user <username>\n");
      exit(1);
  }
  const char *username;
  username = argv[1];

  const struct pam_conv local_conversation = { function_conversation, NULL };
  pam_handle_t *local_auth_handle = NULL; // this gets set by pam_start

  int retval;

  // local_auth_handle gets set based on the service
  retval = pam_start("common-auth", username, &local_conversation, &local_auth_handle);

  if (retval != PAM_SUCCESS)
  {
    std::cout << "pam_start returned " << retval << std::endl;
    exit(retval);
  }

  reply = (struct pam_response *)malloc(sizeof(struct pam_response));

  // *** Get the password by any method, or maybe it was passed into this function.
  reply[0].resp = getpass("Password: ");
  reply[0].resp_retcode = 0;

  retval = pam_authenticate(local_auth_handle, 0);

  if (retval != PAM_SUCCESS)
  {
    if (retval == PAM_AUTH_ERR)
    {
      std::cout << "Authentication failure." << std::endl;
    }
    else
    {
      std::cout << "pam_authenticate returned " << retval << std::endl;
    }
    exit(retval);
  }

  std::cout << "Authenticated." << std::endl;

  retval = pam_end(local_auth_handle, retval);

  if (retval != PAM_SUCCESS)
  {
    std::cout << "pam_end returned " << retval << std::endl;
    exit(retval);
  }

  return retval;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:42:11.737

我怀疑 sshd 实际上跳过了那个模块。相反，我怀疑指纹读取器身份验证模块（明智地）正在检查身份验证用户是在本地系统上还是来自网络（它可以从 PAM 数据中找出来`rhost`），如果这样的话，只是默默地什么都不做是一种网络认证。您可以尝试查看源代码以查看它是否有这样的测试，或者尝试设置`PAM_RHOST`via`pam_set_item`并查看是否会改变行为。

要回答您的实际问题，我不相信有办法告诉 PAM 运行一个特定的 PAM 组，除了一个模块。执行您想要做的事情的预期方法是创建一个新的配置文件，`/etc/pam.d`该文件与您传递给的应用程序名称匹配，该名称`pam_start`不包括*但*`common-auth`仅包含您要运行的模块。

# java - 用于保存和加载多个选项卡的设计模式/框架

> ID：10912461
> 
> 赞同：0
> 
> 时间：2012-06-06T10:30:40.393
> 
> 标签：java, design-patterns, frameworks, vaadin

我正在开发一个应用程序几个月，并且时不时地考虑设计模式。

假设您有一个带有多个选项卡的（Web）应用程序。在每张表中，您都为用户提供了一些字段和表格以供填写或更改。有一个全局保存按钮可以保存所有工作表内容。首先，您必须在允许保存之前验证字段值。此外，如果在持久化对象时发生某些事情，您必须停止事务并保存所有工作表。

我自己用一个逻辑处理程序类实现了一些东西，并为每个选项卡工作表一个工作表逻辑类。逻辑处理程序控制工作表逻辑类。单击保存按钮后，逻辑处理程序为每个工作表逻辑调用它的 screenToData 方法，该方法返回要保存的对象。加载工作表时会调用 dataToScreen 方法。

另外我想提一下，工作表逻辑有一个单独的类来处理 UI 及其组件。如您所见，逻辑与 UI 处理程序是分开的。

在我看来，带有标签表并将 UI 处理程序与逻辑分开的场景非常常见。所以我想知道是否有 Java 框架或设计模式可以支持你开发这种情况。MVC 设计模式非常适合分离 UI 和逻辑，但我正在寻找保存/填充场景或它的组合。这里的最新技术是什么？

我正在使用 Java 开发并使用 vaadin，这并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:05:22.870

您不需要为每个问题都有一个设计模式（[KISS](http://en.wikipedia.org/wiki/KISS_principle)原则）。我认为首先使用验证方法检查所有选项卡的正确性然后将它们保存在事务中的方法就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:32:29.967

如果每个选项卡都有一个表单，您可以使用保存按钮遍历所有表单并进行提交。您可以让表单字段的验证器阻止它提交。您应该检查Vaadin 书中的[表格页面](https://vaadin.com/book/-/page/components.form.html)。

# xml - Convert a whole Xdocument in an array

> ID：10912466
> 
> 赞同：0
> 
> 时间：2012-06-06T10:30:48.343
> 
> 标签：xml, vb.net, linq

I am stuck on a project which needs to exchange data between two programs who have different coontrol files. Program A just creates a a XML File whereas Program B needs the input as an array with two "columns" - but how do can I do the conversion?

Example: The xml looks like:

```
` <Presentation>
  <Options Name="1">
  <Output>MyOutPut</Output>
    <Slides Name="1">
    <Template>Template2</Template> 
      <Diagram Name="Name4">
         <More Elements...>
      </Diagram>
    </Slides>
    </Options>
  </Presentation>` 
```

The output should like this:

```
 `
    Presentation ""
    Options 1
    Output Myoutput
    Slides 1
    Template Template2

...
` 
```

But how can I achieve this? I am using vb.net and LINQ and have no idea how to solve this problem. I tried some LINQ queries but I get only indivudal nodes or attributes so I think it would be better to try a different idea. Any advice would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:59:25.177

不幸的是，我无法提供`VB`代码，但我希望这个`C#`片段会有所帮助。

```
void Main()
{
    var doc = XElement.Load(@"path-to-the-file");

    doc.DescendantsAndSelf()
       .Select(ElementSelector).Dump();
}

private static KeyValuePair<string, string> ElementSelector(XElement e)
{
    var name = e.Name.ToString();
    var value = String.Empty;
    if (e.Descendants().Any())
    {
        if (e.Attributes().Any())
        {
            value = e.Attributes().First().Value;
        }
    }
    else
    {
        value = e.Value;
    }
    return new KeyValuePair<string, string>(name, value);
} 
```

# textbox - How to restrict input for a trinidad input date control?

> ID：10912468
> 
> 赞同：1
> 
> 时间：2012-06-06T10:31:07.040
> 
> 标签：textbox, datepicker, readonly, trinidad

I have a control on a page, and would like to restrict users entering dates directly into the textbox associated with the date picker.

Is there any way to do this.

Thanks and Regards,

Wriju

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:07:28.510

一个简单的解决方案是添加`onkeydown="return false"`到您的`<tr:inputDate/>`. 这将阻止用户在日期字段中键入内容。

```
<tr:inputDate chooseId="chooseDate1"
              value="#{myBean.myDate}"
              onkeydown="return false"/>
<tr:chooseDate id="chooseDate1"/> 
```

# sql-server-2008 - Set Parameter value from select query

> ID：10912475
> 
> 赞同：13
> 
> 时间：2012-06-06T10:31:41.050
> 
> 标签：sql-server-2008

I have two parameter

```
DECLARE @nOdc_Id VARCHAR(50)
DECLARE @nProject_Id VARCHAR(50) 
```

And a Select Query

```
Select nOdc_Id ,nProject_Id  From ProjectTable Where ProjectId='53' 
```

Now I want to set the parameter's value as

```
Set @=nOdc_Id =nOdc_Id 
And @nProject_Id =nProject_Id 
```

Please any one help how can I implement this in StoredProcedure.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T10:34:00.723

```
Select @nOdc_Id = nOdc_Id, 
       @nProject_Id = nProject_Id  
From ProjectTable 
Where ProjectId = 53 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T10:38:15.907

你可以这样做。还有更多的方法。

```
SET @nOdc_Id = (select nOdc_Id From ProjectTable Where ProjectId='53');
SET @nProject_Id = (select nProject_Id From ProjectTable Where ProjectId='53'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T11:51:46.480

像这样：

```
DECLARE @nOdc_Id VARCHAR(50) 
DECLARE @nProject_Id VARCHAR(50) 

Select @nOdc_Id = nOdc_Id From ProjectTable Where ProjectId='53' 
select @nProject_Id  = nProject_Id From ProjectTable Where ProjectId='53' 
```

# oracle - glassfish 3.1.2 - ResultSetWrapper40 无法转换为 oracle.jdbc.OracleResultSet

> ID：10912483
> 
> 赞同：0
> 
> 时间：2012-06-06T10:32:12.750
> 
> 标签：oracle, jdbc, glassfish, connection-pooling, resultset

我最近从 glassfish 3.1.1 迁移到 3.1.2 并收到以下错误

```
java.lang.ClassCastException: com.sun.gjc.spi.jdbc40.ResultSetWrapper40 cannot be cast to oracle.jdbc.OracleResultSet 
```

在线

```
oracle.sql.BLOB bfile = ((OracleResultSet) rs).getBLOB("filename"); 
```

在以下例程中：

```
public void fetchPdf(int matricola, String anno, String mese, String tableType, ServletOutputStream os) {
    byte[] buffer = new byte[2048];
    String query = "SELECT filename FROM "
                + tableType + " where matricola = " + matricola
                + " and anno = " + anno
                + ((tableType.equals("gf_blob_ced") || tableType.equals("gf_blob_car")) ? " and mese = " + mese : "");

    InputStream ins = null;

    //--------
    try {

        Connection conn = dataSource.getConnection();
        //Connection conn = DriverManager.getConnection(connection, "glassfish", pwd);
        java.sql.Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery(query);
        if (rs.next()) {
            logger.info("select ok " + query);
            oracle.sql.BLOB bfile = ((OracleResultSet) rs).getBLOB("filename");

            ins = bfile.getBinaryStream();

            int length;
            while ((length = (ins.read(buffer))) >= 0) {
                os.write(buffer, 0, length);
            }

            ins.close();

        } else {
            logger.info("select Nok " + query);
        }
        rs.close();
        stmt.close();
        //conn.close();

    } catch (IOException ex) {
        logger.warn("blob file non raggiungibile: "+query);
    } catch (SQLException ex) {
        logger.warn("connessione non riuscita");
    }
} 
```

我正在使用 glassfish 连接池

```
@Resource(name = "jdbc/ape4")
    private DataSource dataSource; 
```

并且 jdbc/ape4 资源属于具有以下参数的 oracle 连接池

```
NetworkProtocol tcp
LoginTimeout    0
PortNumber  1521
Password    xxxxxxxx
MaxStatements   0
ServerName  server
DataSourceName  OracleConnectionPoolDataSource
URL jdbc:oracle:thin:@server:1521:APE4
User    glassfish
ExplicitCachingEnabled  false
DatabaseName    APE4
ImplicitCachingEnabled  false 
```

oracle驱动是ojdbc6.jar，oracle DB是10g。

任何人都可以帮助我发生了什么吗？在 Glassfish 3.1.1 上它运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:38:53.803

无需在此代码中不使用标准 JDBC api。您没有使用任何特定于 Oracle 的功能，因此`rs.getBlob("filename").getBinaryStream()`也可以正常工作。

如果您坚持保留它，请关闭数据源的[JDBC 对象包装](http://docs.oracle.com/cd/E18930_01/html/821-2418/giyde.html)选项。

# c++ - 地图 std::map< std::string, Stock*> &stocks 上的模板参数无效

> ID：10912489
> 
> 赞同：6
> 
> 时间：2012-06-06T10:32:38.897
> 
> 标签：c++, templates, map, eclipse-cdt

我有声明（或类似的）

```
std::map< std::string, Stock*> &stocks; 
```

在我的代码中。Eclipse 不喜欢这样并产生“无效的模板参数”错误。

库存声明为：

```
class Stock {

 public:
    Stock(std::string, qbbo::Financial_status_indicator, qbbo::Security_class,
          qbbo::Current_trading_state,
          qbbo::Market_category, qbbo::Reg_sho_action);
    ~Stock();
    void setFinancialStatusIndicator(qbbo::Financial_status_indicator financialStatusIndicator);
    void setSecurityClass(qbbo::Security_class securityClass);
    void setCurrentTradingState(qbbo::Current_trading_state tradingState);
    void setMarketCategory(qbbo::Market_category marketCategory);
    void setREGShoAction(qbbo::Reg_sho_action regSHOAction);
    bool isStockTrading();

  private:
    enum StockState {
      STOCK_STATE_OK, STOCK_STATE_UNKNOWN, STOCK_STATE_UNEXPECTED_CHARACTERISTIC
    };

    std::string name;
    int inventory;
    StockState currentState;

    // Expected values initialised in constructor
    qbbo::Financial_status_indicator expectedFinancialStatusIndicator;
    qbbo::Security_class expectedSecurityClass;
    qbbo::Current_trading_state expectedCurrentTradingState;
    qbbo::Market_category expectedMarketCategory;
    qbbo::Reg_sho_action expectedRegSHOAction;

    // Actual values as set by messages
    qbbo::Financial_status_indicator financialStatusIndicator;
    qbbo::Security_class securityClass;
    qbbo::Current_trading_state currentTradingState;
    qbbo::Market_category marketCategory;
    qbbo::Reg_sho_action regSHOAction;

    void nextState();
}; 
```

我看不出这个声明有什么无效的，它编译得很好。有什么我遗漏的东西而 Eclipse 正在捕捉吗？

简短的自包含正确示例

```
#include <string>
#include <map>

#include "stock.h"

int main() {
  std::map<std::string, Stock*> stocks;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:05:24.333

原来是一个eclipse错误。创建一个新项目并重新按照[Eclipse CDT C++11/C++0x 支持](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)对其进行排序的步骤进行操作。

# jquery - 使用 JQuery serializeArray 时合并相同的命名字段

> ID：10912491
> 
> 赞同：3
> 
> 时间：2012-06-06T10:33:04.957
> 
> 标签：jquery, serialization

嗨，我有以下示例表格

```
<form id="search" method="GET" action="/results">
    <input type="text" name="name">
    <input type="checkbox" name="rating" value="1">
    <input type="checkbox" name="rating" value="2">
    <input type="checkbox" name="rating" value="3">
    <input type="checkbox" name="rating" value="4">
    <input type="checkbox" name="rating" value="5">
    <input type="submit" value="Submit" name="submit">
</form> 
```

当我在选择一些评级复选框并使用 JQuery serialize() 后提交表单时，如下所示

```
$('#search').submit(function() {
    var $form = $(this);
    var strFormData = $form.serialize();
    //var objFormData = $form.serializeArray();
    //var strFormDataParamResult = $.param(objFormData);
}); 
```

我得到了这样的 strFormData 示例

```
"name=help&rating=1&rating=2&rating=3" 
```

有没有办法将任何具有相同名称的参数组合到这个结果中

```
"name=help&rating=1,2,3" 
```

通过操作 serializeArray() 的结果然后使用 $.param(..) ？

如果是这样，有人有这方面的例子吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:56:30.763

如果您使用 Johannes 建议的帖子，那么您应该将复选框中的 name 属性更改为“rating[]”。

否则，如果您确实需要使用 GET 来执行此操作，则可以尝试以下操作：

```
$('#search').submit(function() {
   var serialized = $(this).serialize(),
       ratings = '';

   $('#search input[type=checkbox]:checked').map(function(i, n) {
       ratings += (i ? ',' : '') + n.value;
   });

   serialized += '&rating='+ratings;

   ...

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:52:38.200

这最终是我的解决方案.. serializeArray 并以这种方式操作对象似乎有点复杂，下面的并没有好多少，但它可以满足我的需求。

```
 // Combine key=value pairs in escaped serialised form data that have the same key
    // example: "&rating=5&rating=4&rating=3" becomes "&rating=5,4,3"
    function combineSerialisedFormData(strEscapedSerialisedFormData) {
        var arrFormData = strEscapedSerialisedFormData.split("&");
        var dictCombinedKeys = {};
        for (var i = 0; i < arrFormData.length; i++) {
            var arrParam = arrFormData[i].split("=");
            var strKey = arrParam[0];
            var strValue = arrParam[1];

                         if (strKey !== "" && strValue !== "") {
            if (typeof (dictCombinedKeys[strKey]) === "undefined") {
                dictCombinedKeys[strKey] = strValue;
            }
            else {
                dictCombinedKeys[strKey] += "," + strValue;
            }
                        }
        }

        // { name : "help" , rating : "5,4,3,2,1,0", test : "" }
        // change this object into an array of key value pairs like this
        // ["name=help","rating=5,4,3,2,1,0","test="]
        var arrKeyValuePairs = [];
        for (var key in dictCombinedKeys) {
            if (dictCombinedKeys.hasOwnProperty(key)) {
                arrKeyValuePairs.push(key + "=" + dictCombinedKeys[key]);
            }
        }

        return arrKeyValuePairs.join("&");
    } 
```

# jquery - jQuery：悬停时暂停幻灯片

> ID：10912495
> 
> 赞同：1
> 
> 时间：2012-06-06T10:33:51.483
> 
> 标签：jquery, jquery-ui

所以我有这个代码：

```
$(document).ready(function(){
  $("#slideshow > div:gt(0)").hide();
     setInterval(function() {
     $("#slideshow > div:first")
          .fadeOut(1000)
          .next()
          .fadeIn(1000)
          .end()
          .appendTo("#slideshow");
},  3000);
}); 
```

可以 100% 正常工作.. 我在哪里添加`.hover()`幻灯片的功能以在悬停时暂停？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:58:03.883

方法[setInterval()](https://developer.mozilla.org/en/DOM/window.setInterval)返回一个 intervalID，您可以使用[clearInterval()](https://developer.mozilla.org/en/DOM/window.clearInterval)清除当前间隔/超时。

你可以这样做：

```
$(document).ready(function() {

    var timer;

    $("#slideshow > div:gt(0)").hide();

    $("#slideshow")
        // when mouse enters, clear the timer if it has been set
        .mouseenter(function() {
            if (timer) { clearInterval(timer) }
        })
        // when mouse goes out, start the slideshow
        .mouseleave(function() {
            timer = setInterval(function() {
                $("#slideshow > div:first")
                    .fadeOut(1000)
                    .next()
                    .fadeIn(1000)
                    .end()
                    .appendTo("#slideshow");
            }, 3000);
        })
        // trigger mouseleave for initial slideshow starting
        .mouseleave();

});​ 
```

[**演示**](http://jsfiddle.net/didierg/Cvxe2/)

# macos - 连接到 mac 的设备

> ID：10912501
> 
> 赞同：2
> 
> 时间：2012-06-06T10:34:05.753
> 
> 标签：macos

如何在 mac 上列出所有连接的设备？需要列出在该时间点之前连接到 mac 的所有 wifi 设备、蓝牙设备、usb 设备。请提供任何指向我可以拉出列表的 API 的指针。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:19:04.620

IOKit.framework。请参阅[http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/IOKitFundamentals/Introduction/Introduction.html)

# java - 什么决定了 Collections.sort 中的排序顺序，其中 List 包含非字母数字字符？

> ID：10912503
> 
> 赞同：0
> 
> 时间：2012-06-06T10:34:15.487
> 
> 标签：java, sorting

我有代码可以根据一个名为“title”的属性对元素的 ArrayList 进行排序，该属性是 String 类型。该代码使用 Collat​​or，如下所示：

```
Collator( Collator collator = Collator.getInstance(); ). 
```

我有两个标题为“@a”的对象，另一个对象的标题为“#a”

我将这些对象作为列表传递并调用

```
Collections.sort(list,comparator) 
```

这给出了顺序

```
"@a" "#a" 
```

为什么 "#a" 的 ASCII 值小于 "@a" 却最后出现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:03:26.393

根据您的一条评论，您正在使用整理器对标题进行排序。为什么你没有在你的问题中这么说是我无法理解的。

无论如何，整理者根据语言环境偏好对字符串进行排序。它不按字典顺序排序。您使用的整理者认为正确的顺序是您观察到的顺序。如果你想要字典顺序，你不应该使用整理者。

另请注意，整理者始终与语言环境相关联。方法的javadoc`Collator.getInstance()`说：

> 获取当前默认语言环境的 Collat​​or。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T10:36:06.163

不，输出是“#a”、“@a”。这是绝对正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:38:38.807

> ### 为什么 # 出现在最后，即使它的 ASCII 值小于 @ ？

我的洁净室实施：

```
final List<String> list = Arrays.asList("@a", "#a");
Collections.sort(list);
System.out.println(list); 
```

输出：

> [#a，@a]

此代码不会重现您的问题。

供参考：
'#' 是 0x23
'@' 是 0x40

一切看起来都很正常。

* * *

编辑：您的评论后的新代码*“代码使用整理器，但它`Collator collator = Collator.getInstance();`不特定于任何语言环境。”* ：

```
final List<String> list = Arrays.asList("@a", "#a");
final Collator c = Collator.getInstance();

Collections.sort(list, c);
System.out.println(list); 
```

输出：

> [@a，#a]

**这会重现您的问题。**

如果我使用`Collator.getInstance()`对 ASCII 表进行排序，这是我得到的输出：

> -, _, ,, ;, :, !, ?, /, ., `, ^, ', ", (, ), [, ], {, }, @, $, *, \, &, #, %, +, <, =, >, |, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, a, A, b, B, c, C, d, D, e, E，f，F，g，G，h，H，i，I，j，J，k，K，l，L，m，M，n，N，o，O，p，P，q，Q， r, R, s, S, t, T, u, U, v, V, w, W, x, X, y, Y, z, Z

您可以看到这与 ASCII 整理顺序完全不同：

> ", #, $, %, &, ', (, ), *, +, ,, -, ., /, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, :, ;, <, =, >, ?, @, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T、U、V、W、X、Y、Z、[、\、]、^、_、`、a、b、c、d、e、f、g、h、i、j、k、l、 m、n、o、p、q、r、s、t、u、v、w、x、y、z、{、|、}

对于 OP 的兴趣，这是用于创建此输出的代码：

```
final List<String> list = new ArrayList<String>();
final Collator col = Collator.getInstance();

for (char c = '!'; c < '~'; c++)
{
  list.add(c+"");
}

Collections.sort(list, col);
System.out.println(list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:42:50.660

当您希望订单与正常订单不同时，您通常会提供一个比较器。

```
List<String> words = new ArrayList<>();
words.add("#a");
words.add("@a");
Collections.sort(words);
System.out.println("Natural order: " + words);

Collections.sort(words, Collections.reverseOrder());
System.out.println("Reverse natural order: " + words); 
```

印刷

```
Natural order: [#a, @a]
Reverse natural order: [@a, #a] 
```

因此，如果顺序是 ASCII 的倒数，那是因为您在 Comparator 中定义的顺序（无论您是否知道您这样做了）

# image - 带有图像的 NSButton - 如何获取图像子视图？

> ID：10912504
> 
> 赞同：0
> 
> 时间：2012-06-06T10:34:16.190
> 
> 标签：image, cocoa, subview, nsbutton

我找不到，如何从`NSButton`. 我需要它来获得实际的图像比例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:28:21.290

没有子视图，它是由纽扣电池绘制的。使用 eg`-[NSCell imageRectForBounds:]`获取有关其位置的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-06T13:54:29.030

你可以遍历按钮子视图，你会看到 NSImageView 和 NSTextfield。像这样的伪代码：

```
foreach (NSView view in Subviews)
                if (view.GetType() == typeof(NSImageView))
                    imageView = (NSImageView)view;
                else if (view.GetType() == typeof(NSTextField))
                    textField = (NSTextField)view; 
```

# javascript - chrome ext：限制 DOMNodeInserted

> ID：10912506
> 
> 赞同：0
> 
> 时间：2012-06-06T10:34:23.707
> 
> 标签：javascript, google-chrome-extension, mutation-events

我正在开发一个 chrome 插件，为页面中的每个元素注入一个类。但是在 facebook 或 twitter 等页面中会动态加载内容，因此我使用此代码检查何时加载此内容：

```
document.addEventListener('DOMNodeInserted', function() {
    console.log('fatto');
}, true); 
```

问题是这样，每次插入节点时都会触发脚本。因此，我想添加某种限制。类似于：插入节点时触发脚本，然后等待 2 秒。

我正在尝试这样的事情但没有成功：

```
var check = 1;

document.addEventListener('DOMNodeInserted', function() {
    if(check == 1) {
        check = 0;
        setInterval( function() {

            //do stuff

            check = 1;

        }, 1000);

        console.log('fatto');
    }
}, true); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:13:44.867

我见过这种技术被称为去*抖动*。这是一个例子：

```
(function() {
    var timer;

    var doStuff = function() {
        timer = null;
        alert("Doing stuff");
    };

    document.addEventListener('DOMNodeInserted', function() {
        if (timer) {
            window.clearTimeout(timer);
        }
        timer = window.setTimeout(doStuff, 2000);
    }, false);
})(); 
```

你可以概括一下：

```
function addDebouncedEventListener(obj, eventType, listener, delay) {
    var timer;

    obj.addEventListener(eventType, function(evt) {
        if (timer) {
            window.clearTimeout(timer);
        }
        timer = window.setTimeout(function() {
            timer = null;
            listener.call(obj, evt);
        }, delay);
    }, false);
}

addDebouncedEventListener(document, 'DOMNodeInserted', function(evt) {
    alert(evt.target.nodeName + " inserted");
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:25:15.833

我会说：

```
var timeout;

document.addEventListener('DOMNodeInserted', function() {
    startNewTimeout();
}, true);

function startNewTimeout() {
    //only if there is no active timeout already
    if(timeout === undefined) {
        timeout = setTimeout( function() {

           timeout = undefined;
           //do stuff

        }, 1000);
    }
} 
```

​此脚本不会`//do stuff`无限期延迟执行。它将确保`//do stuff`最大执行。`DOMNodeInserted`第一个事件后 1 秒。

# javascript - 页脚中的 JavaScript 函数

> ID：10912508
> 
> 赞同：1
> 
> 时间：2012-06-06T10:34:26.210
> 
> 标签：javascript, load, footer

我目前正在使用 html5 样板，它将 jQuery 和您的插件放入页脚。唯一的问题是，我在每个页面中使用相同的 footer.php 文件。如果插件还没有加载，我该如何去包含页面特定的功能？IE

```
<?php include_layout_template('header.php', '../');?>
<div id='mediaspace'>This text will be replaced</div>

<!-- Video for this page: -->

<script type='text/javascript'>
  jwplayer('mediaspace').setup({
  'flashplayer': '../resources/player.swf',
  'file': 'http://content.longtailvideo.com/videos/flvplayer.flv',
  'controlbar': 'bottom',
  'width': '470',
  'height': '320'
});
</script>

<?php //This file has the jwplayer function in it: 
include_layout_template('footer.php', '../'); ?> 
```

这样做我得到

```
Uncaught ReferenceError: jwplayer is not defined 
```

将插件包含在标题中会更容易吗？人们通常如何在最后的样板/加载脚本中处理这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:44:36.403

您是否尝试过 document.onready() 功能？这样脚本将在页面准备好后触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:36:29.913

The “jwplayer is not defined” ReferenceError is exactly what it says it is. Your jwplayer reference is being called before your jwplayer.js file is loaded, which defines your jwplayer function.

If you can’t move the jwplayer.js file to the head of your document (so it’s loaded before you call jwplayer()), then you need to rethink how and when this script will be called.

I’m assuming the ‘mediaspace’ is referencing the id of an object/div? If so, leave that in the middle of the page where it belongs, and move the script below the footer.php include.

# facebook - 如何在不显示授权对话框的情况下授权 Facebook 应用程序获得基本权限

> ID：10912511
> 
> 赞同：1
> 
> 时间：2012-06-06T10:34:46.407
> 
> 标签：facebook, facebook-graph-api, authorization

从文档看来，用户应该始终授权 Facebook 应用程序，甚至访问基本权限。

但是，像烂番茄和 Clicker.com 这样的网站会自动授权登录的 facebook 用户，而不显示授权对话框。如果您第一次访问其中一个网站，他们将能够在未经您授权的情况下访问您的公共数据。如果我在我的 facebook 设置中访问应用程序，将出现一个条目，显示我授予了对这些应用程序的访问权限（但我没有）。

这怎么可能？是否与选定合作伙伴的“即时个性化”功能有关？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:09:43.213

好吧，我正在做一些研究，是的，这都是关于即时个性化的。

来自脸书：

> 我们与一些网站合作，在您到达的那一刻为您提供出色的个性化体验，例如立即播放您喜欢的音乐或显示朋友的评论。为了定制您的体验，**这些合作伙伴**仅**访问公共信息**（例如您的姓名和头像）以及您公开的其他信息。

来自其合作伙伴之一：
[Clicker.com](http://www.clicker.com/popup/fbWhyConnect/)

所以——在我写这篇文章的时候——除非你是 Facebook 的合作伙伴，否则你必须展示旧的 OAuth 对话框。

希望能帮助到你！

# silverlight - Silverlight 数据绑定 crm 类型

> ID：10912516
> 
> 赞同：0
> 
> 时间：2012-06-06T10:34:59.247
> 
> 标签：silverlight, dynamics-crm-2011, crm, model-binding

我正在从 crm 中显示在网格上的实体中检索货币类型对象，但是我想将其显示为字符串，以便我可以看到值。

我将如何在 Silverlight 中执行此操作，我需要转换器吗？

# c# - Show print preview in Telerik reportiviewer when it loads

> ID：10912521
> 
> 赞同：6
> 
> 时间：2012-06-06T10:35:12.703
> 
> 标签：c#, telerik

I am using the Telerik ReportViewer and would like to display it in "Print preview" imediatly without the user having to click on the PP icon. Is this possible?

EDIT: I have a Telerik report viewer which is inside a silverlight child window. When the report loads it is displayed not how it is going to be printed out (print preview mode). I would like to programaticaly set the window state to "Print preview" instead of having the user first click on the print preview icon to see how it's going to look on paper

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T16:33:13.997

Have you tried setting the ViewMode?

[Telerik Reporting R2 2016 | ReportViewer.ViewMode Property](http://www.telerik.com/help/reporting/p_telerik_reportviewer_silverlight_reportviewer_viewmode.html)

If you are creating this control in XAML, then it would look something like:

```
<telerik:ReportViewer ViewMode="PrintPreview" /> 
```

# javascript - 带孩子的正确方法

> ID：10912526
> 
> 赞同：0
> 
> 时间：2012-06-06T10:35:30.570
> 
> 标签：javascript, jquery, jquery-selectors

我有下面的代码，它可以工作，但什么是正确的方法来获取表 onclick 的 add

**HTML**

```
<div> 
    <h4 class="titlebar">
        Skills
        <small><a onclick="return false;" href="/add/" data-span="3">Add</a></small>
    </h4>

    <div class="body">
        <table class="table">
            <tbody>
                <tr><td width="125"></td></tr>
            </tbody>
        </table>
    </div>
</div> 
```

**jQuery**

```
var TableBlock = $(this).closest('.titlebar').next().children('table'); 
```

`this`指向添加链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:38:02.423

你没有提到谁是父母，谁`<div class="body">`是`<h4 class="titlebar">`关键的。

```
$(this).closest('table-parent(the missing parent)').find('table'); 
```

`find`更好，`childern`因为即使表格在未来的开发中嵌套，它也会起作用。

如果您只想要第一个匹配的表：

```
.find('table').first();
//Or
.find('table:first'); 
```

* * *

**更新：** 根据您的问题更新，我会向父级添加`div`一个类或一个`id`：

```
<div class="parent" >
    <h4 class="titlebar">
    ... 
```

然后：

```
$(this).closest('div.parent').find('table'); 
```

如果您无法更改 DOM：

```
$(this).closest('h4.titlebar').parent().find('table'); 
```

或者：

```
$(this).closest('h4.titlebar').siblings('.body').find('table'); 
```

# node.js - mongoose.js：嵌入文档的_id

> ID：10912530
> 
> 赞同：4
> 
> 时间：2012-06-06T10:35:42.730
> 
> 标签：node.js, mongodb, mongoose

我正在尝试使用猫鼬和 MongoDB 将任务保存到任务列表中。我想将它冗余地保存在任务集合和相应的列表文档中作为嵌入文档。

它工作正常，但有一件小事：列表的嵌入文档没有它们的 objectId。但我需要它们以便将它们与任务集合中的文档进行逻辑连接。

我的架构：

```
var TaskSchema = new Schema({
    _id: ObjectId,
    title: String,
    list: ObjectId

});

var Task = mongoose.model('task', TaskSchema);

var ListSchema = new Schema({
    _id: ObjectId,
    title: String,
    tasks: [Task.schema]
});

var List = mongoose.model('list', ListSchema); 
```

我的控制器/路由器：

```
app.post('/lists/:list_id/tasks', function(req, res) {

        var listId = req.params.list_id;   

        // 1\. Save the new task into the tasks-collection.

        var newTask = new Task();
        newTask.title = req.body.title;
        newTask.list = listId; 

        console.log('TaskId:' + newTask._id);  // Returns undefined on the console!!!

        newTask.save(); // Works fine!

        // 2\. Add the new task to the coresponding list.

        list.findById(listId, function(err, doc){

            doc.tasks.push(newTask);

            doc.save();  // Saves the new task in the list but WITHOUT its objectId

            });

        res.redirect('/lists/' + listId)

}); 
```

我可以使用猫鼬不同的方式来实现这一目标吗？还是我必须保存任务然后在将其保存到列表中之前对其进行查询？

谢谢你的建议:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T13:59:41.307

**我通过使用一个名为[populate](http://mongoosejs.com/docs/populate.html)的很棒的功能解决了这个问题！**

dtryon 也是对的：您不需要在模型中声明您的 _id ObjectIds，它们无论如何都会被添加。而且你必须嵌套这些东西，因为你的任务是异步保存的，所以你必须确保它在其他东西之前运行。

**这是解决方案：**

架构：

```
var TaskSchema = new Schema({
    title: String,
    list: { type: Schema.ObjectId, ref: 'list' }

});

var Task = mongoose.model('task', TaskSchema);

var ListSchema = new Schema({
    title: String,
    tasks: [{ type: Schema.ObjectId, ref: 'task' }]
});

var List = mongoose.model('list', ListSchema); 
```

控制器/路由器：

```
app.post('/lists/:list_id/tasks', function(req, res) {

    var listId = req.params.list_id;   

    var newTask = new Task();
    newTask.title = req.body.title;
    newTask.list = listId; 

    // WHEN SAVING, WRAP THE REST OF THE CODE

    newTask.save(function (err){
       if (err) {
            console.log('error saving new task');
            console.log(err);
        } else {
            console.log('new task saved successfully'); 

            list.findById(listId), function(err, doc){

                doc.tasks.push(newTask);

                doc.save(function (err){
                    if (err) {
                    console.log('error adding new task to list');
                    console.log(err);
                    } else {

                    console.log('new task saved successfully'); 
                    res.redirect('/lists/' + listId);

                    }  
                });
            });
        });
    });
}); 
```

现在它正确引用并使用填充功能，您可以非常舒适地访问条目。像魅力一样工作:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:53:05.140

我认为这可能与异步有关。`list.findById` *您可能*看不到 ObjectId，因为您在推送`newTask`. `res.redirect`此外，您在执行异步操作之外也会遇到麻烦。

试试这个：

```
app.post('/lists/:list_id/tasks', function(req, res) {

        var listId = req.params.list_id;   

        // 1\. Save the new task into the tasks-collection.

        var newTask = new Task();
        newTask.title = req.body.title;
        newTask.list = listId; 

        console.log('TaskId:' + newTask._id);  // Returns undefined on the console!!!

        // WHEN SAVING, WRAP THE REST OF THE CODE
        newTask.save(function (err){
            if (err) {
                console.log(err);
                    // do something
            }

            // 2\. Add the new task to the coresponding list.

            list.findById(listId, function(err, doc){

                doc.tasks.push(newTask);

                doc.save();  // Saves the new task in the list but WITHOUT its objectId

                // REDIRECT AFTER SUCCESS
                res.redirect('/lists/' + listId)

            });
       });
}); 
```

# android - 如何在 Android WebView 中设置字体

> ID：10912531
> 
> 赞同：2
> 
> 时间：2012-06-06T10:35:46.880
> 
> 标签：android, webview

[我在这里](https://stackoverflow.com/questions/3900658/how-to-change-font-face-of-webview-in-android)读到了这个

但我的问题是我们是否可以使用 SetStandardFontFamily 命令来设置字体？

```
 mWebView.getSettings().setStandardFontFamily 
```

# objective-c - ObjC 获取属性名称

> ID：10912540
> 
> 赞同：2
> 
> 时间：2012-06-06T10:36:32.240
> 
> 标签：objective-c, ios, xcode, cocoa, runtime

我正在寻找一种从方法内部获取属性名称作为 StringValue 的方法。

让我们说：

我的班级有来自 UILabel 类型的 X 子视图。

```
@property (strong, nonatomic) UILabel *firstLabel;
@property (strong, nonatomic) UILabel *secondLabel;
[...] 
```

等等。

在方法 foo 中，视图迭代如下：

```
-(void) foo 
{

for (UIView *view in self.subviews) {
 if( [view isKindOfClass:[UILabel class]] ) {
 /*
codeblock that gets the property name.
*/

 }
}
} 
```

结果应该是这样的：

```
THE propertyName(NSString) OF view(UILabel) IS "firstLabel" 
```

我尝试**了 class_getInstanceVariable**、**object_getIvar**和**property_getName** ，但没​​有成功。

例如，以下代码：

```
[...]
property_getName((void*)&view)
[...] 
```

回报：

```
<UILabel: 0x6b768c0; frame = (65 375; 219 21); text = 'Something'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x6b76930>> 
```

但我正在寻找这种结果：“ **firstLabel** ”、“ **secondLabel** ”等等。

* * *

# 解决了

正如在graver的回复中描述的那样，解决方案是：class_copyIvarList，它返回Ivar的名称。

```
Ivar* ivars = class_copyIvarList(clazz, &count);
NSMutableArray* ivarArray = [NSMutableArray arrayWithCapacity:count];
for (int i = 0; i < count ; i++)
{
    const char* ivarName = ivar_getName(ivars[i]);
    [ivarArray addObject:[NSString  stringWithCString:ivarName encoding:NSUTF8StringEncoding]];
}
free(ivars); 
```

请参阅帖子： [https](https://stackoverflow.com/a/2302808/1228534) ://stackoverflow.com/a/2302808/1228534 和 [Objective C Introspection/Reflection](https://stackoverflow.com/questions/2299841/objective-c-introspection-reflection)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:19:14.263

未经测试的代码来自[在 Objective-C 中获取对象的属性数组](https://stackoverflow.com/questions/1920590/getting-an-array-of-properties-for-an-object-in-objective-c)

```
id currentClass = [self class];
NSString *propertyName;
unsigned int outCount, i;
objc_property_t *properties = class_copyPropertyList(currentClass, &outCount);
for (i = 0; i < outCount; i++) {
    objc_property_t property = properties[i];
    propertyName = [NSString stringWithCString:property_getName(property)];
    NSLog@("The propertyName is %@",propertyName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T04:28:33.507

无需运行循环即可获取特定属性名称的简便方法

可以说自定义对象如下

```
@interface StoreLocation : NSObject
@property (nonatomic, strong) NSString *city;
@property (nonatomic, strong) NSNumber *lat;
@property (nonatomic, strong) NSNumber *lon;
@property (nonatomic, strong) NSString *street;
@property (nonatomic, strong) NSString *state;
@property (nonatomic, strong) NSString *code;
@end

@interface AppleStore : NSObject

@property (nonatomic, strong) StoreLocation *storeLocation;

@end 
```

下面的目标宏将获得所需的结果

```
#define propertyKeyPath(property) (@""#property)
#define propertyKeyPathLastComponent(property) [[(@""#property)componentsSeparatedByString:@"."] lastObject] 
```

使用下面的代码获取属性名称

```
NSLog(@"%@", propertyKeyPath(appleStore.storeLocation)); //appleStore.storeLocation
NSLog(@"%@", propertyKeyPath(appleStore.storeLocation.street)); //appleStore.storeLocation.street
NSLog(@"%@", propertyKeyPathLastComponent(appleStore.storeLocation)); //storeLocation
NSLog(@"%@", propertyKeyPathLastComponent(appleStore.storeLocation.street)); //street 
```

来源：[http ://www.g8production.com/post/78429904103/get-property-name-as-string-without-using-the-runtime](http://www.g8production.com/post/78429904103/get-property-name-as-string-without-using-the-runtime)

# android - android 上的 JUnit 测试没有找到类定义错误

> ID：10912542
> 
> 赞同：0
> 
> 时间：2012-06-06T10:36:34.270
> 
> 标签：android, junit

我有一些非常奇怪的行为。我的 Android 应用程序有大量测试用例，除了一个之外，它们都可以工作。当我运行这个时，我得到一个 java.lang.NoClassDefFoundError: org.JUnit.test

是的，我已将 JUnit 4 库导入到项目中，并且我的其他 JUnit 测试正在运行，没有任何问题。特别奇怪的是，在我遇到这个问题之前，我的代码中有一个错误——基本上，我尝试将文件写入只读文件夹。当发生这种情况时，JUnitTest 将执行到它会遇到 IO 异常以访问它无法访问的内存的一部分。我解决了这个问题，突然 Android 模拟器似乎不知道 org.JUnit.test 是什么。

我已经检查了这个测试类的运行配置，它和我的其他人一样。它也与其他测试位于同一文件夹中。它还使用相同的导入语句。知道发生了什么吗？

我正在使用 Android 10 模拟器和 Eclipse 版本 3.7.2。

编辑：为了澄清，我得到的错误出现在 Logcat 而不是我的 Eclipse 项目中。

# emacs - 如何有效使用 Emacs 的自文档系统？

> ID：10912543
> 
> 赞同：10
> 
> 时间：2012-06-06T10:36:41.623
> 
> 标签：emacs

我是 Emacs 的新手。我要学习如何关闭缓冲区，所以我输入了`M-x` `apropos-documentation RET` `close buffer`. 然后我得到了很多无用的信息。

鉴于上述情况，使用自我记录系统查找我想知道的内容的正确方法是什么？

或者，与现代的谷歌相比，自我记录系统毫无用处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:14:39.810

当您刚开始使用 Emacs 时，最好的文档是教程。您可以使用`C-h t`. 花半小时学习本教程将向您展示所有基础知识，包括缓冲区管理。与通过 Google 或 apropos 单独搜索每个命令相比，这将为您节省大量时间。

本教程的另一个好处是您将快速了解 Emacs 的特殊术语。例如，“kill”这个词被用作“delete”的近义词。用 apropos 搜索“kill buffer”可能会回答您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T14:59:52.507

在您知道术语之前，甚至在此之后，您最好使用 Google。我经常使用 emacs 文档系统，但主要是为了查找我已经知道的东西，或者我已经知道确切术语的东西。

如果您不确定如何在文档中搜索某些内容，那么 Google 会更有效，因为它还会考虑同义词，并且会从论坛和其他东西中找到与您类似的问题。它不仅适用于 Emacs，也适用于任何其他软件。不管是什么软件，我总是先尝试谷歌搜索，因为在大多数情况下，谷歌给出的答案比浏览文档要快得多，

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T17:30:08.017

所以一个基本的术语问题让你在这里绊倒了。我会说 Emacs 在这里没有帮助，因为它没有在词汇表中满足这种情况，而是将相关菜单项命名为“关闭”并将其绑定到`C-x``k`序列的不同功能（这是为了避免再次提示您）。我注意到该菜单项的工具提示至少表明了“杀死”术语，但是，这肯定会有助于您的搜索。

这种不匹配总是会导致使用`apropos`. 真的，教程或用户手册应该是您的下一步。（实际上，本教程应该是您的*第一步*。）

即使不知道“杀死”一词，以下任何一项都会很快为您找到答案。

*   浏览教程：`C-h``t`
*   在手册的内容页面中查找“缓冲区”：`C-h``r`
*   搜索手册的索引`C-h``r``I` `buffers` `RET`
    （诚然搜索`buffer`（单数）会提供更杂乱的结果）
*   搜索键绑定：（`C-h``b``M-x` `occur` `RET` `buffer` `RET`
    有点`occur`高级，但`C-s`也可以）
*   `C-h``k` *单击“文件”->“关闭”菜单项*
    （与上面评论的绑定`C-x``k`不同；但这也会显示“杀死”术语）

我认为对于题为“如何有效地使用 Emacs 的自文档系统？”的问题的公认答案有点遗憾。是一种引导您远离这些系统的方法，因为一旦您了解了它们的方法，除了 Emacs 自己的文档之外*，您几乎不需要任何东西。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-06T11:08:05.500

首先，仅仅因为你没有理解这些信息，并不意味着它没有用。

其次，一旦您对调用了哪些命令有了一点点了解，您就可以执行`M-x`, 并使用制表符扩展该命令。一旦你调用了它，emacs 也会闪现一条消息，告诉你该命令的键绑定（如果有的话）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-06T11:57:04.323

熟悉 th`C-h`和弦[[1]](http://www.math.uh.edu/~bgb/emacs_keys.html)：

```
C-h a        command-apropos      What commands work like this...?
C-h c        describe-key-briefly What command does this key sequence do?
C-h b        describe-bindings    What are the key bindings for this buffer?
C-h k        describe-key         What command does this sequence do?
C-h l        view-lossage         What are the last 100 characters typed?
C-h w        where-is             What is the key binding for this?
C-h f        describe-function    What does this function do?
C-h v        describe-variable    What is this variable?
C-h o        describe-symbol      What is this symbol? (function, variable or face)
C-h m        describe-mode        Tell me about this mode.
C-h s        describe-syntax      What is the syntax table for this buffer? 
```

尽管它们不会帮助您处理特定的查询，但它们经常派上用场。至于`apropos`，放弃。请改用 Google 和 Emacs Wiki。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-07T07:00:43.837

我通过其内置帮助和 elisp 源代码编写了有关学习 Emacs 的详尽教程：http: [//david.rothlis.net/emacs/howtolearn.html](http://david.rothlis.net/emacs/howtolearn.html)

有几个人发现它非常有用。

Emacs 的自我记录特性是*惊人的*（一旦你学会了自己的方式）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-07T11:29:22.980

还

```
 emacs-index-search
 elisp-index-search 
```

# xml - 使用 XSLT 删除重复元素

> ID：10912544
> 
> 赞同：7
> 
> 时间：2012-06-06T10:36:56.277
> 
> 标签：xml, xslt, formatting, duplicates

我需要使用特定节点 (ItemID) 从我的 XML 中消除重复元素

我的 XML 如下所示；

```
<XML>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>723073</ItemID>
        <ColorID>02</ColorID>
        <Description>Pentel LR7 Energel Metal Tip Refill 0.7mm</Description>
        <MainCategory>WRITING INSTRUMENTS</MainCategory>
        <SubCategory>Refill</SubCategory>
        <LineNum>               1.0000000</LineNum>
        <Qty>               6.0000000</Qty>
        <UnitPriceExclTax>              10.0200000</UnitPriceExclTax>
        <LineTax>               8.4200000</LineTax>
        <LinePriceExclTax>              60.1200000</LinePriceExclTax>
        <ColorName>Black</ColorName>
        <UOM>EA</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637542_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>903420</ItemID>
        <ColorID />
        <Description>STEPHENS JUNIOR Stapler Half Strip KW586</Description>
        <MainCategory>OFFICE SUNDRIES</MainCategory>
        <SubCategory>Staplers</SubCategory>
        <LineNum>               2.0000000</LineNum>
        <Qty>               3.0000000</Qty>
        <UnitPriceExclTax>              32.2500000</UnitPriceExclTax>
        <LineTax>              13.5400000</LineTax>
        <LinePriceExclTax>              96.7500000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637547_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>867241</ItemID>
        <ColorID />
        <Description>TRODAT PRINTY S/Inking Stamp Copy 4911</Description>
        <MainCategory>STAMPS DATERS NUMBERERS</MainCategory>
        <SubCategory>Self Inking Stamps</SubCategory>
        <LineNum>               3.0000000</LineNum>
        <Qty>               1.0000000</Qty>
        <UnitPriceExclTax>              42.1500000</UnitPriceExclTax>
        <LineTax>               5.9000000</LineTax>
        <LinePriceExclTax>              42.1500000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               1.0000000</Backorder>
        <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>941151</ItemID>
        <ColorID />
        <Description>PENTEL Correction Tape 5mx5mm ZT35</Description>
        <MainCategory>OFFICE SUNDRIES</MainCategory>
        <SubCategory>Correction Fluid/Pens/Tape</SubCategory>
        <LineNum>               4.0000000</LineNum>
        <Qty>               2.0000000</Qty>
        <UnitPriceExclTax>              25.1500000</UnitPriceExclTax>
        <LineTax>               7.0400000</LineTax>
        <LinePriceExclTax>              50.3000000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637549_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>801215</ItemID>
        <ColorID />
        <Description>MONDI ROTATRIM Copy Paper A4 80Gsm White</Description>
        <MainCategory>A4 Paper</MainCategory>
        <SubCategory>White Bond Paper</SubCategory>
        <LineNum>               5.0000000</LineNum>
        <Qty>             100.0000000</Qty>
        <UnitPriceExclTax>              29.0100000</UnitPriceExclTax>
        <LineTax>             406.1400000</LineTax>
        <LinePriceExclTax>            2901.0000000</LinePriceExclTax>
        <ColorName />
        <UOM>Pkt 500</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637552_060</INVENTTRANSID>
    </Line>
    <Line>
        <SALESID>         CAP716197SO</SALESID>
        <INVOICEID>         CAP600795SI</INVOICEID>
        <INVOICEDATE>2010/05/06</INVOICEDATE>
        <NUMBERSEQUENCEGROUP />
        <LINENUM>               2.0000000</LINENUM>
        <ITEMID>805236</ITEMID>
        <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
        <NAME>Ruled Paper A4 Fnt/Marg JD76</NAME>
        <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
        <INVENTTRANSID>      CAP5637543_060</INVENTTRANSID>
        <QTYSALES>               4.0000000</QTYSALES>
        <QTYORDERED>               4.0000000</QTYORDERED>
        <QTYBACKORDERSALES>               4.0000000</QTYBACKORDERSALES>
        <QTYBACKORDERINVENT>               4.0000000</QTYBACKORDERINVENT>
        <SALESUNIT>EA</SALESUNIT>
        <ORIGSALESID>         CAP716197SO</ORIGSALESID>
        <DATAAREAID>wal</DATAAREAID>
        <RECID>622392608</RECID>
        <RecVersion>1</RecVersion>
    </Line>
    <Line>
        <SALESID>         CAP716197SO</SALESID>
        <INVOICEID>         CAP600795SI</INVOICEID>
        <INVOICEDATE>2010/05/06</INVOICEDATE>
        <NUMBERSEQUENCEGROUP />
        <LINENUM>               3.0000000</LINENUM>
        <ITEMID>941150</ITEMID>
        <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
        <NAME>PENGUIN Correction Fluid 20ml White</NAME>
        <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
        <INVENTTRANSID>      CAP5637546_060</INVENTTRANSID>
        <QTYSALES>               6.0000000</QTYSALES>
        <QTYORDERED>               6.0000000</QTYORDERED>
        <QTYBACKORDERSALES>               6.0000000</QTYBACKORDERSALES>
        <QTYBACKORDERINVENT>               6.0000000</QTYBACKORDERINVENT>
        <SALESUNIT>EA</SALESUNIT>
        <ORIGSALESID>         CAP716197SO</ORIGSALESID>
        <DATAAREAID>wal</DATAAREAID>
        <RECID>622392609</RECID>
        <RecVersion>1</RecVersion>
    </Line>
    <Line>
        <SALESID>         CAP716197SO</SALESID>
        <INVOICEID>         CAP600795SI</INVOICEID>
        <INVOICEDATE>2010/05/06</INVOICEDATE>
        <NUMBERSEQUENCEGROUP />
        <LINENUM>               5.0000000</LINENUM>
        <ITEMID>867241</ITEMID>
        <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
        <NAME>TRODAT PRINTY S/Inking Stamp Copy 4911</NAME>
        <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
        <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
        <QTYSALES>               2.0000000</QTYSALES>
        <QTYORDERED>               2.0000000</QTYORDERED>
        <QTYBACKORDERSALES>               1.0000000</QTYBACKORDERSALES>
        <QTYBACKORDERINVENT>               1.0000000</QTYBACKORDERINVENT>
        <SALESUNIT>EA</SALESUNIT>
        <ORIGSALESID>         CAP716197SO</ORIGSALESID>
        <DATAAREAID>wal</DATAAREAID>
        <RECID>622392610</RECID>
        <RecVersion>1</RecVersion>
    </Line>
</XML> 
```

您会看到 XML 不相同但标签始终在同一个位置，并且当前有 1 个重复 867241

我不想改变顺序，只是删除了元素。

期望的输出是；

```
<XML>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>723073</ItemID>
        <ColorID>02</ColorID>
        <Description>Pentel LR7 Energel Metal Tip Refill 0.7mm</Description>
        <MainCategory>WRITING INSTRUMENTS</MainCategory>
        <SubCategory>Refill</SubCategory>
        <LineNum>               1.0000000</LineNum>
        <Qty>               6.0000000</Qty>
        <UnitPriceExclTax>              10.0200000</UnitPriceExclTax>
        <LineTax>               8.4200000</LineTax>
        <LinePriceExclTax>              60.1200000</LinePriceExclTax>
        <ColorName>Black</ColorName>
        <UOM>EA</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637542_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>903420</ItemID>
        <ColorID />
        <Description>STEPHENS JUNIOR Stapler Half Strip KW586</Description>
        <MainCategory>OFFICE SUNDRIES</MainCategory>
        <SubCategory>Staplers</SubCategory>
        <LineNum>               2.0000000</LineNum>
        <Qty>               3.0000000</Qty>
        <UnitPriceExclTax>              32.2500000</UnitPriceExclTax>
        <LineTax>              13.5400000</LineTax>
        <LinePriceExclTax>              96.7500000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637547_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>867241</ItemID>
        <ColorID />
        <Description>TRODAT PRINTY S/Inking Stamp Copy 4911</Description>
        <MainCategory>STAMPS DATERS NUMBERERS</MainCategory>
        <SubCategory>Self Inking Stamps</SubCategory>
        <LineNum>               3.0000000</LineNum>
        <Qty>               1.0000000</Qty>
        <UnitPriceExclTax>              42.1500000</UnitPriceExclTax>
        <LineTax>               5.9000000</LineTax>
        <LinePriceExclTax>              42.1500000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               1.0000000</Backorder>
        <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>941151</ItemID>
        <ColorID />
        <Description>PENTEL Correction Tape 5mx5mm ZT35</Description>
        <MainCategory>OFFICE SUNDRIES</MainCategory>
        <SubCategory>Correction Fluid/Pens/Tape</SubCategory>
        <LineNum>               4.0000000</LineNum>
        <Qty>               2.0000000</Qty>
        <UnitPriceExclTax>              25.1500000</UnitPriceExclTax>
        <LineTax>               7.0400000</LineTax>
        <LinePriceExclTax>              50.3000000</LinePriceExclTax>
        <ColorName />
        <UOM>Ea</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637549_060</INVENTTRANSID>
    </Line>
    <Line>
        <SupplierID>Waltons</SupplierID>
        <InvoiceID>CAP600795SI</InvoiceID>
        <InvoiceDate>20100506</InvoiceDate>
        <ItemID>801215</ItemID>
        <ColorID />
        <Description>MONDI ROTATRIM Copy Paper A4 80Gsm White</Description>
        <MainCategory>A4 Paper</MainCategory>
        <SubCategory>White Bond Paper</SubCategory>
        <LineNum>               5.0000000</LineNum>
        <Qty>             100.0000000</Qty>
        <UnitPriceExclTax>              29.0100000</UnitPriceExclTax>
        <LineTax>             406.1400000</LineTax>
        <LinePriceExclTax>            2901.0000000</LinePriceExclTax>
        <ColorName />
        <UOM>Pkt 500</UOM>
        <Backorder>               0.0000000</Backorder>
        <INVENTTRANSID>      CAP5637552_060</INVENTTRANSID>
    </Line>
    <Line>
        <SALESID>         CAP716197SO</SALESID>
        <INVOICEID>         CAP600795SI</INVOICEID>
        <INVOICEDATE>2010/05/06</INVOICEDATE>
        <NUMBERSEQUENCEGROUP />
        <LINENUM>               2.0000000</LINENUM>
        <ITEMID>805236</ITEMID>
        <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
        <NAME>Ruled Paper A4 Fnt/Marg JD76</NAME>
        <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
        <INVENTTRANSID>      CAP5637543_060</INVENTTRANSID>
        <QTYSALES>               4.0000000</QTYSALES>
        <QTYORDERED>               4.0000000</QTYORDERED>
        <QTYBACKORDERSALES>               4.0000000</QTYBACKORDERSALES>
        <QTYBACKORDERINVENT>               4.0000000</QTYBACKORDERINVENT>
        <SALESUNIT>EA</SALESUNIT>
        <ORIGSALESID>         CAP716197SO</ORIGSALESID>
        <DATAAREAID>wal</DATAAREAID>
        <RECID>622392608</RECID>
        <RecVersion>1</RecVersion>
    </Line>
    <Line>
        <SALESID>         CAP716197SO</SALESID>
        <INVOICEID>         CAP600795SI</INVOICEID>
        <INVOICEDATE>2010/05/06</INVOICEDATE>
        <NUMBERSEQUENCEGROUP />
        <LINENUM>               3.0000000</LINENUM>
        <ITEMID>941150</ITEMID>
        <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
        <NAME>PENGUIN Correction Fluid 20ml White</NAME>
        <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
        <INVENTTRANSID>      CAP5637546_060</INVENTTRANSID>
        <QTYSALES>               6.0000000</QTYSALES>
        <QTYORDERED>               6.0000000</QTYORDERED>
        <QTYBACKORDERSALES>               6.0000000</QTYBACKORDERSALES>
        <QTYBACKORDERINVENT>               6.0000000</QTYBACKORDERINVENT>
        <SALESUNIT>EA</SALESUNIT>
        <ORIGSALESID>         CAP716197SO</ORIGSALESID>
        <DATAAREAID>wal</DATAAREAID>
        <RECID>622392609</RECID>
        <RecVersion>1</RecVersion>
    </Line>
</XML> 
```

我可以使用 XSLT 1 或 2

问候，

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-06T12:46:43.790

**一、XSLT 1.0解决方案：**

**这是使用 Muenchian 分组的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLineById" match="Line" use="ItemID|ITEMID"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Line[not(generate-id() = generate-id(key('kLineById', ItemID|ITEMID)[1]))]"
  />
</xsl:stylesheet> 
```

**请注意**：

1.  **[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**是 XSLT 1.0 中已知的最有效的通用分组方法。

2.  使用纯**[“推”式](http://www.dpawson.co.uk/xsl/sect2/pushpull.html)**。

* * *

**二、XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     <XML>
       <xsl:for-each-group select="Line" group-by="ItemID | ITEMID">
         <xsl:sequence select="."/>
       </xsl:for-each-group>
     </XML>
 </xsl:template>
</xsl:stylesheet> 
```

**两种解决方案在应用于提供的 XML 文档时：**

```
<XML>
        <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>723073</ItemID>
            <ColorID>02</ColorID>
            <Description>Pentel LR7 Energel Metal Tip Refill 0.7mm</Description>
            <MainCategory>WRITING INSTRUMENTS</MainCategory>
            <SubCategory>Refill</SubCategory>
            <LineNum>               1.0000000</LineNum>
            <Qty>               6.0000000</Qty>
            <UnitPriceExclTax>              10.0200000</UnitPriceExclTax>
            <LineTax>               8.4200000</LineTax>
            <LinePriceExclTax>              60.1200000</LinePriceExclTax>
            <ColorName>Black</ColorName>
            <UOM>EA</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637542_060</INVENTTRANSID>
        </Line>
        <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>903420</ItemID>
            <ColorID />
            <Description>STEPHENS JUNIOR Stapler Half Strip KW586</Description>
            <MainCategory>OFFICE SUNDRIES</MainCategory>
            <SubCategory>Staplers</SubCategory>
            <LineNum>               2.0000000</LineNum>
            <Qty>               3.0000000</Qty>
            <UnitPriceExclTax>              32.2500000</UnitPriceExclTax>
            <LineTax>              13.5400000</LineTax>
            <LinePriceExclTax>              96.7500000</LinePriceExclTax>
            <ColorName />
            <UOM>Ea</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637547_060</INVENTTRANSID>
        </Line>
        <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>867241</ItemID>
            <ColorID />
            <Description>TRODAT PRINTY S/Inking Stamp Copy 4911</Description>
            <MainCategory>STAMPS DATERS NUMBERERS</MainCategory>
            <SubCategory>Self Inking Stamps</SubCategory>
            <LineNum>               3.0000000</LineNum>
            <Qty>               1.0000000</Qty>
            <UnitPriceExclTax>              42.1500000</UnitPriceExclTax>
            <LineTax>               5.9000000</LineTax>
            <LinePriceExclTax>              42.1500000</LinePriceExclTax>
            <ColorName />
            <UOM>Ea</UOM>
            <Backorder>               1.0000000</Backorder>
            <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
        </Line>
        <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>941151</ItemID>
            <ColorID />
            <Description>PENTEL Correction Tape 5mx5mm ZT35</Description>
            <MainCategory>OFFICE SUNDRIES</MainCategory>
            <SubCategory>Correction Fluid/Pens/Tape</SubCategory>
            <LineNum>               4.0000000</LineNum>
            <Qty>               2.0000000</Qty>
            <UnitPriceExclTax>              25.1500000</UnitPriceExclTax>
            <LineTax>               7.0400000</LineTax>
            <LinePriceExclTax>              50.3000000</LinePriceExclTax>
            <ColorName />
            <UOM>Ea</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637549_060</INVENTTRANSID>
        </Line>
        <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>801215</ItemID>
            <ColorID />
            <Description>MONDI ROTATRIM Copy Paper A4 80Gsm White</Description>
            <MainCategory>A4 Paper</MainCategory>
            <SubCategory>White Bond Paper</SubCategory>
            <LineNum>               5.0000000</LineNum>
            <Qty>             100.0000000</Qty>
            <UnitPriceExclTax>              29.0100000</UnitPriceExclTax>
            <LineTax>             406.1400000</LineTax>
            <LinePriceExclTax>            2901.0000000</LinePriceExclTax>
            <ColorName />
            <UOM>Pkt 500</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637552_060</INVENTTRANSID>
        </Line>
        <Line>
            <SALESID>         CAP716197SO</SALESID>
            <INVOICEID>         CAP600795SI</INVOICEID>
            <INVOICEDATE>2010/05/06</INVOICEDATE>
            <NUMBERSEQUENCEGROUP />
            <LINENUM>               2.0000000</LINENUM>
            <ITEMID>805236</ITEMID>
            <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
            <NAME>Ruled Paper A4 Fnt/Marg JD76</NAME>
            <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
            <INVENTTRANSID>      CAP5637543_060</INVENTTRANSID>
            <QTYSALES>               4.0000000</QTYSALES>
            <QTYORDERED>               4.0000000</QTYORDERED>
            <QTYBACKORDERSALES>               4.0000000</QTYBACKORDERSALES>
            <QTYBACKORDERINVENT>               4.0000000</QTYBACKORDERINVENT>
            <SALESUNIT>EA</SALESUNIT>
            <ORIGSALESID>         CAP716197SO</ORIGSALESID>
            <DATAAREAID>wal</DATAAREAID>
            <RECID>622392608</RECID>
            <RecVersion>1</RecVersion>
        </Line>
        <Line>
            <SALESID>         CAP716197SO</SALESID>
            <INVOICEID>         CAP600795SI</INVOICEID>
            <INVOICEDATE>2010/05/06</INVOICEDATE>
            <NUMBERSEQUENCEGROUP />
            <LINENUM>               3.0000000</LINENUM>
            <ITEMID>941150</ITEMID>
            <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
            <NAME>PENGUIN Correction Fluid 20ml White</NAME>
            <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
            <INVENTTRANSID>      CAP5637546_060</INVENTTRANSID>
            <QTYSALES>               6.0000000</QTYSALES>
            <QTYORDERED>               6.0000000</QTYORDERED>
            <QTYBACKORDERSALES>               6.0000000</QTYBACKORDERSALES>
            <QTYBACKORDERINVENT>               6.0000000</QTYBACKORDERINVENT>
            <SALESUNIT>EA</SALESUNIT>
            <ORIGSALESID>         CAP716197SO</ORIGSALESID>
            <DATAAREAID>wal</DATAAREAID>
            <RECID>622392609</RECID>
            <RecVersion>1</RecVersion>
        </Line>
        <Line>
            <SALESID>         CAP716197SO</SALESID>
            <INVOICEID>         CAP600795SI</INVOICEID>
            <INVOICEDATE>2010/05/06</INVOICEDATE>
            <NUMBERSEQUENCEGROUP />
            <LINENUM>               5.0000000</LINENUM>
            <ITEMID>867241</ITEMID>
            <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
            <NAME>TRODAT PRINTY S/Inking Stamp Copy 4911</NAME>
            <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
            <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
            <QTYSALES>               2.0000000</QTYSALES>
            <QTYORDERED>               2.0000000</QTYORDERED>
            <QTYBACKORDERSALES>               1.0000000</QTYBACKORDERSALES>
            <QTYBACKORDERINVENT>               1.0000000</QTYBACKORDERINVENT>
            <SALESUNIT>EA</SALESUNIT>
            <ORIGSALESID>         CAP716197SO</ORIGSALESID>
            <DATAAREAID>wal</DATAAREAID>
            <RECID>622392610</RECID>
            <RecVersion>1</RecVersion>
        </Line>
</XML> 
```

**产生想要的正确结果**：

```
<XML>
   <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>723073</ItemID>
            <ColorID>02</ColorID>
            <Description>Pentel LR7 Energel Metal Tip Refill 0.7mm</Description>
            <MainCategory>WRITING INSTRUMENTS</MainCategory>
            <SubCategory>Refill</SubCategory>
            <LineNum>               1.0000000</LineNum>
            <Qty>               6.0000000</Qty>
            <UnitPriceExclTax>              10.0200000</UnitPriceExclTax>
            <LineTax>               8.4200000</LineTax>
            <LinePriceExclTax>              60.1200000</LinePriceExclTax>
            <ColorName>Black</ColorName>
            <UOM>EA</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637542_060</INVENTTRANSID>
        </Line>
   <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>903420</ItemID>
            <ColorID/>
            <Description>STEPHENS JUNIOR Stapler Half Strip KW586</Description>
            <MainCategory>OFFICE SUNDRIES</MainCategory>
            <SubCategory>Staplers</SubCategory>
            <LineNum>               2.0000000</LineNum>
            <Qty>               3.0000000</Qty>
            <UnitPriceExclTax>              32.2500000</UnitPriceExclTax>
            <LineTax>              13.5400000</LineTax>
            <LinePriceExclTax>              96.7500000</LinePriceExclTax>
            <ColorName/>
            <UOM>Ea</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637547_060</INVENTTRANSID>
        </Line>
   <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>867241</ItemID>
            <ColorID/>
            <Description>TRODAT PRINTY S/Inking Stamp Copy 4911</Description>
            <MainCategory>STAMPS DATERS NUMBERERS</MainCategory>
            <SubCategory>Self Inking Stamps</SubCategory>
            <LineNum>               3.0000000</LineNum>
            <Qty>               1.0000000</Qty>
            <UnitPriceExclTax>              42.1500000</UnitPriceExclTax>
            <LineTax>               5.9000000</LineTax>
            <LinePriceExclTax>              42.1500000</LinePriceExclTax>
            <ColorName/>
            <UOM>Ea</UOM>
            <Backorder>               1.0000000</Backorder>
            <INVENTTRANSID>      CAP5637548_060</INVENTTRANSID>
        </Line>
   <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>941151</ItemID>
            <ColorID/>
            <Description>PENTEL Correction Tape 5mx5mm ZT35</Description>
            <MainCategory>OFFICE SUNDRIES</MainCategory>
            <SubCategory>Correction Fluid/Pens/Tape</SubCategory>
            <LineNum>               4.0000000</LineNum>
            <Qty>               2.0000000</Qty>
            <UnitPriceExclTax>              25.1500000</UnitPriceExclTax>
            <LineTax>               7.0400000</LineTax>
            <LinePriceExclTax>              50.3000000</LinePriceExclTax>
            <ColorName/>
            <UOM>Ea</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637549_060</INVENTTRANSID>
        </Line>
   <Line>
            <SupplierID>Waltons</SupplierID>
            <InvoiceID>CAP600795SI</InvoiceID>
            <InvoiceDate>20100506</InvoiceDate>
            <ItemID>801215</ItemID>
            <ColorID/>
            <Description>MONDI ROTATRIM Copy Paper A4 80Gsm White</Description>
            <MainCategory>A4 Paper</MainCategory>
            <SubCategory>White Bond Paper</SubCategory>
            <LineNum>               5.0000000</LineNum>
            <Qty>             100.0000000</Qty>
            <UnitPriceExclTax>              29.0100000</UnitPriceExclTax>
            <LineTax>             406.1400000</LineTax>
            <LinePriceExclTax>            2901.0000000</LinePriceExclTax>
            <ColorName/>
            <UOM>Pkt 500</UOM>
            <Backorder>               0.0000000</Backorder>
            <INVENTTRANSID>      CAP5637552_060</INVENTTRANSID>
        </Line>
   <Line>
            <SALESID>         CAP716197SO</SALESID>
            <INVOICEID>         CAP600795SI</INVOICEID>
            <INVOICEDATE>2010/05/06</INVOICEDATE>
            <NUMBERSEQUENCEGROUP/>
            <LINENUM>               2.0000000</LINENUM>
            <ITEMID>805236</ITEMID>
            <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
            <NAME>Ruled Paper A4 Fnt/Marg JD76</NAME>
            <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
            <INVENTTRANSID>      CAP5637543_060</INVENTTRANSID>
            <QTYSALES>               4.0000000</QTYSALES>
            <QTYORDERED>               4.0000000</QTYORDERED>
            <QTYBACKORDERSALES>               4.0000000</QTYBACKORDERSALES>
            <QTYBACKORDERINVENT>               4.0000000</QTYBACKORDERINVENT>
            <SALESUNIT>EA</SALESUNIT>
            <ORIGSALESID>         CAP716197SO</ORIGSALESID>
            <DATAAREAID>wal</DATAAREAID>
            <RECID>622392608</RECID>
            <RecVersion>1</RecVersion>
        </Line>
   <Line>
            <SALESID>         CAP716197SO</SALESID>
            <INVOICEID>         CAP600795SI</INVOICEID>
            <INVOICEDATE>2010/05/06</INVOICEDATE>
            <NUMBERSEQUENCEGROUP/>
            <LINENUM>               3.0000000</LINENUM>
            <ITEMID>941150</ITEMID>
            <INVENTDIMID>      CAP0000594_061</INVENTDIMID>
            <NAME>PENGUIN Correction Fluid 20ml White</NAME>
            <CONFIRMEDDLV>2010/05/06</CONFIRMEDDLV>
            <INVENTTRANSID>      CAP5637546_060</INVENTTRANSID>
            <QTYSALES>               6.0000000</QTYSALES>
            <QTYORDERED>               6.0000000</QTYORDERED>
            <QTYBACKORDERSALES>               6.0000000</QTYBACKORDERSALES>
            <QTYBACKORDERINVENT>               6.0000000</QTYBACKORDERINVENT>
            <SALESUNIT>EA</SALESUNIT>
            <ORIGSALESID>         CAP716197SO</ORIGSALESID>
            <DATAAREAID>wal</DATAAREAID>
            <RECID>622392609</RECID>
            <RecVersion>1</RecVersion>
        </Line>
</XML> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:24:44.743

以下转换对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="Line">
        <xsl:copy-of select="." />
    </xsl:template>
    <xsl:template match="/XML">
    <XML>
    <xsl:apply-templates select="Line[not(
        ItemID=preceding-sibling::Line/ItemID or
        ItemID=preceding-sibling::Line/ITEMID or
        ITEMID=preceding-sibling::Line/ItemID or
        ITEMID=preceding-sibling::Line/ITEMID)]" />
    </XML>
</xsl:template>
</xsl:transform> 
```

`ItemID`如果/`ITEMID`拼写一致，全部大写或驼峰式，则表达式可以简化。

# web-services - 基于 SSL 的 INDY WebService 包含与 HTTP 协议的链接，而不是 WSDL 中的 HTTPS

> ID：10912548
> 
> 赞同：1
> 
> 时间：2012-06-06T10:37:16.467
> 
> 标签：web-services, ssl, https, indy, transport

当使用 Delphi XE2 创建新的 SOAP WebService 服务器项目时，向导允许设置更改端口和 HTTPS 属性。端口设置为 443，检查 HTTPS 标志，但是当尝试连接到创建的服务器时，它在 WSDL 中返回不正确的传输（HTTP 而不是 HTTPS）并在服务信息页面上生成 HTTP 链接。自动生成的页面不是那么重要，但是 WSDL 文件中的错误信息是一个问题。您可以在下面看到返回的 WSDL - 没有 HTTPS：

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="Itest123service" targetNamespace="http://tempuri.org/" xmlns:tns="http://tempuri.org/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:ns1="urn:test123Intf">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:test123Intf">
      <simpleType name="TEnumTest">
        <restriction base="string">
          <enumeration value="etNone"/>
          <enumeration value="etAFew"/>
          <enumeration value="etSome"/>
          <enumeration value="etAlot"/>
        </restriction>
      </simpleType>
      <complexType name="TDoubleArray">
        <complexContent>
          <restriction base="soapenc:Array">
            <sequence/>
            <attribute ref="soapenc:arrayType" n1:arrayType="xs:double[]" xmlns:n1="http://schemas.xmlsoap.org/wsdl/"/>
          </restriction>
        </complexContent>
      </complexType>
      <complexType name="TMyEmployee">
        <sequence>
          <element name="LastName" type="xs:string"/>
          <element name="FirstName" type="xs:string"/>
          <element name="Salary" type="xs:double"/>
        </sequence>
      </complexType>
    </schema>
  </types>
  <message name="echoEnum0Request">
    <part name="Value" type="ns1:TEnumTest"/>
  </message>
  <message name="echoEnum0Response">
    <part name="return" type="ns1:TEnumTest"/>
  </message>
  <message name="echoDoubleArray1Request">
    <part name="Value" type="ns1:TDoubleArray"/>
  </message>
  <message name="echoDoubleArray1Response">
    <part name="return" type="ns1:TDoubleArray"/>
  </message>
  <message name="echoMyEmployee2Request">
    <part name="Value" type="ns1:TMyEmployee"/>
  </message>
  <message name="echoMyEmployee2Response">
    <part name="return" type="ns1:TMyEmployee"/>
  </message>
  <message name="echoDouble3Request">
    <part name="Value" type="xs:double"/>
  </message>
  <message name="echoDouble3Response">
    <part name="return" type="xs:double"/>
  </message>
  <portType name="Itest123">
    <operation name="echoEnum">
      <input message="tns:echoEnum0Request"/>
      <output message="tns:echoEnum0Response"/>
    </operation>
    <operation name="echoDoubleArray">
      <input message="tns:echoDoubleArray1Request"/>
      <output message="tns:echoDoubleArray1Response"/>
    </operation>
    <operation name="echoMyEmployee">
      <input message="tns:echoMyEmployee2Request"/>
      <output message="tns:echoMyEmployee2Response"/>
    </operation>
    <operation name="echoDouble">
      <input message="tns:echoDouble3Request"/>
      <output message="tns:echoDouble3Response"/>
    </operation>
  </portType>
  <binding name="Itest123binding" type="tns:Itest123">
    <binding xmlns="http://schemas.xmlsoap.org/wsdl/soap/" style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="echoEnum">
      <operation xmlns="http://schemas.xmlsoap.org/wsdl/soap/" soapAction="urn:test123Intf-Itest123#echoEnum" style="rpc"/>
      <input>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </input>
      <output>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </output>
    </operation>
    <operation name="echoDoubleArray">
      <operation xmlns="http://schemas.xmlsoap.org/wsdl/soap/" soapAction="urn:test123Intf-Itest123#echoDoubleArray" style="rpc"/>
      <input>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </input>
      <output>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </output>
    </operation>
    <operation name="echoMyEmployee">
      <operation xmlns="http://schemas.xmlsoap.org/wsdl/soap/" soapAction="urn:test123Intf-Itest123#echoMyEmployee" style="rpc"/>
      <input>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </input>
      <output>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </output>
    </operation>
    <operation name="echoDouble">
      <operation xmlns="http://schemas.xmlsoap.org/wsdl/soap/" soapAction="urn:test123Intf-Itest123#echoDouble" style="rpc"/>
      <input>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </input>
      <output>
        <body xmlns="http://schemas.xmlsoap.org/wsdl/soap/" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:test123Intf-Itest123"/>
      </output>
    </operation>
  </binding>
  <service name="Itest123service">
    <port name="Itest123Port" binding="tns:Itest123binding">
      <address xmlns="http://schemas.xmlsoap.org/wsdl/soap/" location="http://localhost:443/soap/Itest123"/>
    </port>
  </service>
</definitions> 
```

当我尝试将 WSDL 导入到 soapUI 工具以检查 WebService 工作时，我需要将手动绑定链接更改为“https://”，然后 RPC 才会起作用。

我将非常感谢任何想法如何强制 INDY 使用 HTTPS 协议返回 WSDL 中的链接。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:16:01.413

我遇到了同样的问题并像这样解决了它：

查看生成的 WSDLHTMLPublish1 的属性。将属性 PublishOptions -> poPublishLocationAsSecure 更改为 true

# xml-rpc - Windows RPC 与 XML-RPC

> ID：10912552
> 
> 赞同：2
> 
> 时间：2012-06-06T10:37:34.970
> 
> 标签：xml-rpc, rpc, distributed-computing, hpc, dce

与在 XML-RPC中事实上的 C/C++ 实现中的[XML](http://xmlrpc.scripting.com/default.html) [-RPC-C/C++](http://xmlrpc-c.sourceforge.net/windows.php)相比，在[Microsoft RPC NDR 引擎](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802751%28v=vs.85%29.aspx)( [DCE 1.1](http://pubs.opengroup.org/onlinepubs/9692999399/) ) 中编码/解码某些常见类型数据是否有任何基准？

实际上，我必须在[Windows RPC](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374358%28v=vs.85%29.aspx)和[XML-RPC-C/C++](http://xmlrpc-c.sourceforge.net/windows.php)之间进行选择，以在 Windows上实现我自己的高性能计算通用对象基础架构。关于他们的表现有什么建议吗？谢谢你。

此致，

杨

# jquery - 将 json 字符串转换为对象并返回 $.post 工作 $.ajax 不起作用

> ID：10912564
> 
> 赞同：1
> 
> 时间：2012-06-06T10:38:26.747
> 
> 标签：jquery, ajax, arrays, json

我刚刚理解 js 中的数组无法包含值的键，所以我正在寻找将数组从 js 传递到 php 并返回的选项。当我搜索相关信息时，我找到了 json 选项。但我看到 js 不完全支持，除非你在我的情况下添加插件 json2.js 。我有两个不同的代码，它们运行 `$.post`良好 `$.ajax`但不起作用。如果你告诉我为什么`$.ajax`不工作，我会很高兴你有完整的代码可以测试。json2.js 来自[这里](https://github.com/douglascrockford/JSON-js).thx `$.ajax`代码：

```
 $.ajax({
            type: "POST",
            contentType: "application/json;charset=utf-8",
            url: "phpfile.php",
            data: "{ data : dataString }",
            dataType: "json",
            success: function (res) {
               alert('sucsses');
      var obj = jQuery.parseJSON(res);
        if(obj.somebool === true)
          $("#result").html(obj.hello + ' ' + obj.array[1] + obj.worked + ". Message from PHP: "+obj.php_message);
            },
            error: alert ('there was problem with ajax');
        }); 
```

*
`$.post`代码：

```
 $.post('phpfile.php', {data: dataString}, function(res){
      alert('sucsses');
      var obj = jQuery.parseJSON(res);
        if(obj.somebool === true)
          $("#result").html(obj.hello + ' ' + obj.array[1] + obj.worked + ". Message from PHP: "+obj.php_message);
      }); 
```

html代码：

```
<html>
<head>
<title>Json Test</title>
<SCRIPT src="jquery-1.7.2.min.js"></SCRIPT> 
<SCRIPT src="json2.js"></SCRIPT> 
<script>
$(document).ready(function(){
  var data = new Object();
  data.hello = "Hello";
  data.world = 'World';
  data.worked = " it worked ";
  data.somebool = true;
  data.array = new Array("he\"ll\"o", '"World"');
  alert (data.hello);
  var dataString = JSON.stringify(data);
  alert(dataString);
  $.post('phpfile.php', {data: dataString}, function(res){
  alert('sucsses');
  var obj = jQuery.parseJSON(res);
    if(obj.somebool === true)
      $("#result").html(obj.hello + ' ' + obj.array[1] + obj.worked + ". Message from PHP: "+obj.php_message);
  });
});
</script>
</head>
<body>
<div id="result"></div>
</body>
</html> 
```

php代码：

```
<?php
$res = json_decode($_REQUEST['data'], true);
$res["php_message"] = "I am PHP";
echo json_encode($res);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:40:30.833

在您的`$.ajax()`请求中设置`dataType: 'json'`了 ，这意味着响应已经是一个 JSON 对象，而不是代表一个的字符串。因此，调用`var obj = jQuery.parseJSON(res);`您的回调函数实际上不会对您有任何帮助。直接使用`res`即可。

等效的`$.post()`函数调用会将可选`dataType`参数传递给函数，如下所示：

```
$.post('phpfile.php', {data: dataString}, function(res){
    alert('sucsses');
    var obj = jQuery.parseJSON(res);
    if(obj.somebool === true)
        $("#result").html(obj.hello + ' ' + obj.array[1] + obj.worked + ". Message from PHP: "+obj.php_message);
}, 'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:45:20.503

另一件事是您要发送：

```
data: "{ data : dataString }", 
```

这只是一个字符串，但不是有效的 JSON。该`dataString`部分只是一些不引用任何内容的字符串字符。你可能的意思是：

```
data: { data : dataString }, 
```

这是一个引用 的真实对象`dataString`，并且该对象被转换为 JSON。

# scala - 如何修改 REPL 中的上一行 - scala 修改输入错误以节省时间，与使用向上/向下箭头输入每一行相比

> ID：10912565
> 
> 赞同：8
> 
> 时间：2012-06-06T10:38:37.217
> 
> 标签：scala, terminal, multiline, scala-repl

有可能发生一些输入错误（在 Ubuntu 终端 - scala -version Scala 代码运行器版本 2.9.1），示例如下所示，其中在参数中输入了 (l: Int) (l: int) 而不是 (l: Int) (l: int)。

```
 scala> class Rectangle (l:int, w: Int){
 | val length = l
 | val length = w
    .
    .
    .
    few more lines but still ... module Rectangle is not defined. Or sometimes enter command given and error shows up. 
```

无论如何，可以直接编辑/修改输入错误并重新运行代码吗？这将节省大量时间，否则我将使用向上/向下箭头逐行输入。

请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:13:38.207

我不知道是否有更好的解决方案，但就我而言，我倾向于使用我常用的文本编辑器编写代码片段并使用 REPL 的粘贴模式粘贴它们（您可以通过`:paste`命令进入粘贴模式） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:29:22.493

现在，你不能。不过，有 Scala GUI REPL（请参见[此处](https://wiki.scala-lang.org/display/SW/Tools+and+Libraries#ToolsandLibraries-Miscellaneous)，以及[kojo](http://code.google.com/p/kojo/)和大型 IDE）允许这种事情。选择其中之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-29T00:49:54.470

由于基于 JLine 3 的 REPL[支持](https://github.com/scala/scala/pull/8036)Scala 2.13.2 多行编辑

> JLine 3 支持多行编辑、更好的制表符完成 UI 等等。
> 
> `-Xjline:emacs`使用（默认）或配置键绑定`-Xjline:vi`；禁用`-Xjline:off`
> 
> 历史文件现在`~/.scala_history_jline3`

例如，要尝试使用 vim 键绑定进行多行编辑，请像这样启动 REPL

```
scala -Xjline:vi 
```

然后输入多行定义并按向上箭头键。注意它是如何给出的

```
scala> class Foo {
     |   val x = 42
     | }
class Foo

scala> class Foo {
     |   val x = 42
     | } 
```

而不是旧的行为

```
scala> class Foo {
     |   val x = 42
     | }
defined class Foo

scala> } 
```

# excel - Excel 对报纸样式列中的数据进行排序

> ID：10912568
> 
> 赞同：0
> 
> 时间：2012-06-06T10:38:43.137
> 
> 标签：excel, sorting, spreadsheet

我有一张包含姓名和分机号码的 Excel 表格。该工作表旨在作为参考打印，因此它的数据分为 3 列，就像报纸的布局方式一样。

```
EXT Name EXT Name  EXT Name
1   bob  4   pete  8   sam
2   dave 5   sally 9   john 
```

我需要让 excel 按名称 AZ 对这些数据进行排序。我只能弄清楚如何一次对一列进行排序，因此每次添加或删除信息时我都必须手动对数据进行排序。

excel可以从上到下和从左到右对所有3列进行排序吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:59:55.413

也许[这个知识库](http://support.microsoft.com/kb/247311)文章有帮助。

或者你可以尝试使用像这样的小功能

A栏

```
=SMALL($A$1:$A$9;0+ROWS(A$1:A1)) 
```

C栏

```
=SMALL($A$1:$A$9;30+ROWS(A$1:A1)) 
```

在这种情况下，您克隆已排序的数据集，它位于两列中。可以使用 vlookup 找到 B 列的值。值 0 和 0 是一个偏移量，所以页面的长度是固定的

# ios - 从我的应用打开设置

> ID：10912570
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:38:49.900
> 
> 标签：ios, ipad, ios5, icloud

我将 iCloud 用于核心数据。如果用户没有在 iCloud 上登录，我想带他到设置页面，在 ios 中是否可以。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:44:50.893

如果您正在为 iOS < 5.1 编写应用程序，那么您可以使用自定义 URL 方案 - 在[此处](https://stackoverflow.com/a/8246814/194544)查找列表。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: myUrlString ]]; //find myUrlString in link above 
```

但是这个功能在 iOS 5.1 中被删除了，很可能在这个功能中不可用

# objective-c - 将部分 UTF-8 解码为 NSString

> ID：10912571
> 
> 赞同：3
> 
> 时间：2012-06-06T10:38:52.887
> 
> 标签：objective-c, ios, utf-8, nsstring, nsurlconnection

在使用该类通过网络获取`UTF-8`-encoded 文件时，`NSURLConnection`委托的`connection:didReceiveData:`消息很可能会与`NSData`截断`UTF-8`文件一起发送 - 因为`UTF-8`它是一种多字节编码方案，并且单个字符可以在两个单独的`NSData`

换句话说，如果我加入我从中获得的所有数据，`connection:didReceiveData:`我将拥有一个有效的`UTF-8`文件，但每个单独的数据都是无效的`UTF-8`（）。

我不想将所有下载的文件存储在内存中。

我想要的是：给定`NSData`，将任何你能解码的东西都解码成`NSString`. 如果 的最后几个字节`NSData`是未闭合的代理，请告诉我，以便我可以将它们保存到下一个`NSData`.

一个明显的解决方案是反复尝试使用 解码`initWithData:encoding:`，每次都截断最后一个字节，直到成功。不幸的是，这可能非常浪费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:40:32.477

如果要确保不会在 UTF-8 多字节序列的中间停止，则需要查看字节数组的末尾并检查前 2 位。

1.  如果最高位是 0，那么它是 ASCII 样式的未转义 UTF-8 代码之一，您就完成了。
2.  如果最高位为 1 且倒数第二位为 0，则它是转义序列的延续，可能表示该序列的最后一个字节，因此您需要缓冲该字符以供稍后使用，然后查看前面的特点*
3.  如果最高位是 1 并且倒数第二位也是 1，那么它是多字节序列的开始，您需要通过查找第一个 0 位来确定序列中有多少个字符。

查看维基百科条目中的多字节表：[http ://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

```
// assumes that receivedData contains both the leftovers and the new data

unsigned char *data= [receivedData bytes];
UInteger byteCount= [receivedData length];

if (byteCount<1)
    return nil;  // or @"";

unsigned char *lastByte = data[byteCount-1];
if ( lastByte & 0x80 == 0) {
    NSString *newString = [NSString initWithBytes: data length: byteCount 
                                    encoding: NSUTF8Encoding];
    // verify success
    // remove bytes from mutable receivedData, or set overflow to empty
    return newString;
}

// now eat all of the continuation bytes
UInteger backCount=0;
while ( (byteCount > 0)  && (lastByte & 0xc0 == 0x80)) {
    backCount++;
    byteCount--;
    lastByte = data[byteCount-1];
}
// at this point, either we have exhausted byteCount or we have the initial character
// if we exhaust the byte count we're probably in an illegal sequence, as we should 
// always have the initial character in the receivedData

if (byteCount<1) {
    // error!
    return nil;
}

// at this point, you can either use just byteCount, or you can compute the 
// length of the sequence from the lastByte in order
// to determine if you have exactly the right number of characters to decode UTF-8.

UInteger requiredBytes = 0;
if (lastByte & 0xe0 == 0xc0) {  // 110xxxxx
    // 2 byte sequence
    requiredBytes= 1;
} else if (lastByte & 0xf0 == 0xe0) {   // 1110xxxx
    // 3 byte sequence
    requiredBytes= 2;
} else if (lastByte & 0xf8 == 0xf0) {   // 11110xxx
    // 4 byte sequence
    requiredBytes= 3;
} else if (lastByte & 0xfc == 0xf8) {   // 111110xx
    // 5 byte sequence
    requiredBytes= 4;
} else if (lastByte & 0xfe == 0xfc) {   // 1111110x
    // 6 byte sequence
    requiredBytes= 5;
 } else {
    // shouldn't happen, illegal UTF8 seq
 }

 // now we know how many characters we need and we know how many
 //  (backCount) we have, so either use them, or take the 
 // introductory character away.
 if (requiredBytes==backCount) {
     // we have the right number of bytes
     byteCount += backCount;
 } else { 
     // we don't have the right number of bytes, so remove the intro character 
     byteCount -= 1;   
 }

 NSString *newString = [NSString initWithBytes: data length: byteCount 
                                 encoding: NSUTF8Encoding];
 // verify success
 // remove byteCount bytes from mutable receivedData, or set overflow to the 
 // bytes between byteCount and [receivedData count]
 return newString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:21:13.217

UTF-8 是一种非常简单的解析编码，旨在使检测不完整序列变得容易，并且如果您从不完整序列的中间开始，则可以轻松找到它的开头。

从末尾向后搜索 <= 0x7f 或 > 0xc0 的字节。如果它 <= 0x7f，它就完成了。如果它在 0xc0 和 0xdf（含）之间，则需要后面的一个字节才能完成。如果它在 0xe0 和 0xef 之间，则需要两个后续字节才能完成。如果 >= 0xf0，则需要三个以下字节才能完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T15:04:17.490

我有一个类似的问题 - 部分解码 utf8

前

```
 NSString * adsTopic = [components[2] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    adsInfo->adsTopic = malloc(sizeof(char) * adsTopic.length + 1);
    strncpy(adsInfo->adsTopic, [adsTopic UTF8String], adsTopic.length + 1); 
```

[已解决] 之后

```
 NSString *adsTopic = [components[2] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSUInteger byteCount = [adsTopic lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"number of Unicode characters in the string topic == %lu",(unsigned long)byteCount);

    adsInfo->adsTopic = malloc(byteCount+1);
    strncpy(adsInfo->adsTopic, [adsTopic UTF8String], byteCount + 1);

    NSString *text=[NSString stringWithCString:adsInfo.adsTopic encoding:NSUTF8StringEncoding];
                NSLog(@"=== %@", text); 
```

# ant - Ant jUnit WebDriver - 文件编码

> ID：10912573
> 
> 赞同：1
> 
> 时间：2012-06-06T10:39:11.653
> 
> 标签：ant, junit

我在我的 WebDriver 测试中使用西班牙 UTF-8 字符，如果从 Eclipse 运行它可以正常工作，但是如果我尝试通过 Ant 运行相同的测试，则测试失败，因为它找不到一些带有特殊字符的元素。我发现编码搞砸了，但我似乎无法正确设置它。我尝试了以下无济于事

```
<junit printsummary="yes" haltonfailure="no" fork="yes">
    <jvmarg value="-Dfile.encoding=UTF-8"/>
        <classpath>
            <pathelement location="${bin}" />
            <fileset dir="${lib}">
                <include name="**/*.jar" />
            </fileset>
        </classpath>

    <test name="com.yourcompany.selenium.MyTest" haltonfailure="no" todir="${report}/xml" outfile="TEST-result">
        <formatter type="xml" />
    </test>
</junit> 
```

也尝试通过将编码值添加到命令行，但测试仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:20:25.707

找到了罪魁祸首。junit 任务正确处理了编码，问题出在编译级别，因为 Ant 似乎使用 Cp1250 编码进行编译。在编译任务中添加 encoding="UTF-8" 解决了这个问题。

# html - Html：如何使用相对路径将子页面中的链接添加到（其中一个）父级

> ID：10912575
> 
> 赞同：1
> 
> 时间：2012-06-06T10:39:16.450
> 
> 标签：html

我有一个本地文件夹层次结构，每个文件夹都有一些 HTML 文件。“父”文件（外部文件）包含指向“子”文件的链接（在这种情况下 - 单级链接 - 父链接到其直接子文件），因此层次结构就像某种树。

我想在每个页面的顶部添加一个指向父页面（“inxed.html”文件）的链接。

我的代码使用相对路径（因此有可能移动文件夹并且它仍然可以工作）

例子：

```
 .\index.html
  .\folder1\p1.html
  .\folder1\folder2\p2.html 
```

我希望有可能在“folder1\folder2\p2.html”文件中有一个链接，该链接将向上树并打开“index.html”页面。

我更喜欢仅使用 HTML（如果可以的话）

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:55:12.973

在相对路径中，双点表示父目录，因此如果您想走得更远，可以使用双点的组合。

`<a href="../../index.html">test</a>`应该管用。

# iphone - 如何查找导致编码失败的字符

> ID：10912577
> 
> 赞同：1
> 
> 时间：2012-06-06T10:39:22.973
> 
> 标签：iphone, encoding

我正在通过 http 请求获取一个字符串。该字符串是带有 ANSI 颜色编码的 Big 5。

如果我只是运行：

```
NSStringEncoding big5 = CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingBig5);
NSString *httpResponse2 = [[NSString alloc] initWithData:data encoding:big5]; 
```

它失败了，我相信是因为 ANSI 颜色。

所以，我遍历字符串并删除任何字符 27（esc），然后是 91（[），直到我达到 109（m）。这应该摆脱任何 ANSI 格式。它适用于一些字符串，但如果字符串足够长，我会遇到问题。编码失败，由于 iPhone 编码静默失败并返回 nil，我很难找到对此负责的字符。有什么办法可以找出是哪个字符导致我的编码失败？

# java - 来自十六进制代码的 Apache POI XSSFColor

> ID：10912578
> 
> 赞同：45
> 
> 时间：2012-06-06T10:39:28.430
> 
> 标签：java, apache-poi

我想将单元格的前景色设置为十六进制代码中的给定颜色。例如，当我尝试将其设置为红色时：

```
style.setFillForegroundColor(new XSSFColor(Color.decode("#FF0000")).getIndexed()); 
```

无论我在 decode 函数的参数中设置什么 Hex 值，getIndexed 函数都将始终返回黑色。

会不会是我做错了什么？我认为这是一个错误，但我不确定...

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-07T01:19:17.397

好消息是，如果您使用的是 XSSF，而不是 HSSF，那么您的问题的解决方案相当容易。您只需要将样式变量转换为 XSSFCellStyle。如果你这样做了，那么有一个版本的 setFillForegroundColor 接受 XSSFColor 参数，所以你不需要调用 getIndexed()。这是一些示例代码：

```
XSSFCellStyle style = (XSSFCellStyle)cell.getCellStyle();
XSSFColor myColor = new XSSFColor(Color.RED);
style.setFillForegroundColor(myColor); 
```

但是，如果您使用的是 HSSF，那么事情就更难了。HSSF 使用调色板，它只是一组颜色。传入 setFillForegroundColor 的短值是调色板的索引。

因此，您遇到的问题是将 rgb 值转换为调色板索引。您提出的使用 getIndexed() 的解决方案是合乎逻辑的，但不幸的是，它确实适用于 XSSFColor，就像您可能认为的那样。

幸运的是，有一个解决方案。目前，让我们假设您会满意使用默认调色板中的一种颜色，而不是使用自定义颜色。在这种情况下，您可以使用 HSSFPalette 和 HSSFColor 类来解决问题。这是一些示例代码：

```
HSSFWorkbook hwb = new HSSFWorkbook();
HSSFPalette palette = hwb.getCustomPalette();
// get the color which most closely matches the color you want to use
HSSFColor myColor = palette.findSimilarColor(255, 0, 0);
// get the palette index of that color 
short palIndex = myColor.getIndex();
// code to get the style for the cell goes here
style.setFillForegroundColor(palIndex); 
```

如果您想使用默认调色板中尚未包含的自定义颜色，则必须将它们添加到调色板中。HSSFPalette 的 javadoc 定义了您可以使用的方法。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-05-06T09:36:21.493

对于 4.0 之前的 Apache POI，您可以简单地执行以下操作：

```
 XSSFColor grey = new XSSFColor(new java.awt.Color(192,192,192));
 cellStyle.setFillForegroundColor(grey); 
```

从 POI 4.0 开始，您必须提供工作台 IndexedColorMap：

```
 IndexedColorMap colorMap = workbook.getStylesSource().getIndexedColors();
 XSSFColor grey = new XSSFColor(new java.awt.Color(192,192,192), colorMap);
 cellStyle.setFillForegroundColor(grey); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-24T00:19:55.173

用于. `XSSFColor`_ 可以带或。请参阅以下示例：`XSSFWorkbook``XSSFColor``byte[] rgb``java.awt.Color`

1.  ```
    XSSFWorkbook wb = new XSSFWorkbook();
    XSSFCellStyle cellStyle = wb.createCellStyle();
    byte[] rgb = new byte[3];
    rgb[0] = (byte) 242; // red
    rgb[1] = (byte) 220; // green
    rgb[2] = (byte) 219; // blue
    XSSFColor myColor = new XSSFColor(rgb); // #f2dcdb
    cellStyle.setFillForegroundColor(myColor);
    cellStyle.setFillPattern(CellStyle.SOLID_FOREGROUND); 
    ```

2.  见GuenSeven的回答

    ```
    XSSFColor myColor = new XSSFColor(new java.awt.Color(242, 220, 219)); // #f2dcdb
    cellStyle.setFillForegroundColor(myColor);
    cellStyle.setFillPattern(CellStyle.SOLID_FOREGROUND); 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-23T14:06:27.610

我不想使用 AWTs Color，并且由于现在没有只接受字节数组的构造函数（我使用的是 3.17 版）：有一个构造函数`public XSSFColor(byte[] rgb, IndexedColorMap colorMap)`，这对我有用：

```
byte[] byteColor = new byte[]{255,0,0};
XSSFColor color = new XSSFColor(byteColor, null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T08:48:48.817

XSSFCellStyle 在 setFillForegroundColor 方法中接受颜色，用于 poi 3.07 以上的版本......所以首先检查你的版本以避免遇到我面临的问题......以前的版本需要简短作为参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-23T11:40:38.400

您可以使用以下代码从字符串十六进制颜色（FFEEDDCC 或 112233 格式）中获取 XSSFColor。如果您使用的是 RGB，只需删除 # 字符：

```
XSSFWorkbook workbook = new XSSFWorkbook();
XSSFColor color = new XSSFColor(workbook.getStylesSource().getIndexedColors());
color.setARGBHex("#000000".substring(1)); 
```

# php - 将序列分段为最大随机性（数组，任何语言）

> ID：10912579
> 
> 赞同：0
> 
> 时间：2012-06-06T10:39:41.037
> 
> 标签：php, javascript, arrays, random

我和我的好开发者朋友进行了一次有趣的讨论。我想创建一个给定数组值的随机序列，但碎片最大，没有任何可检测的模式。对于任何唯一序列，这种所谓的最大随机性实际上总是相同的。

示例输入数组：

```
array(1, 2, 3, 4, 5); 
```

标准 rand() 函数的示例结果：

```
array(2, 3, 1, 5, 4); 
```

我在上面的输出中不喜欢的是像“2, 3”和“5, 4”这样的序列值，它不够碎片化。

预期结果将/可能是：

```
array(3, 5, 1, 4, 2); 
```

**所以我的问题；**是否有任何已知的公式来计算最大随机性或更好地选择单词，最大碎片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:56:04.163

所以你在说什么，不是随机化，而是排序。随机化的结果不应依赖于初始数据的顺序。

在这种情况下，通过碎片化，有必要了解排序前后数组之间的差异。但必须根据任务进行不同的评估。例如，可以评估元素位置或其顺序之间的差异。

排序示例。

```
 <?
// it must be uksort() function with sequence formula, but for me easier do like this
    $array = array(1, 2, 3, 4, 5);
    uk_sort($array);
    function uk_sort(&$array) {
        for($i=0;$i<count($array);$i++) {
            if($i%2==0) {
                $even[] = $array[$i];
            } else {
                $odd[] = $array[$i];
            }
        }
        $even[] = array_shift($even);
        rsort($odd);
        $array = array_merge($even, $odd);
    }
    print_r($array);
    ?>
Array
(
    [0] => 3
    [1] => 5
    [2] => 1
    [3] => 4
    [4] => 2
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:02:00.827

您可以将列表分成两个（或更多）集合，将它们打乱然后按顺序混合它们？

```
array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

array(1, 2, 3, 4, 5);
array(6, 7, 8, 9, 10);

array(2, 3, 1, 5, 4);
array(8, 7, 10, 9, 6);

array(2, 8, 3, 7, 1, 10, 5, 9, 4, 6) 
```

这会给你一个相当高的碎片，但不是最大值。我怀疑要获得最大值将需要更多的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:53:33.210

我认为这听起来像是一个[旅行推销员](http://en.wikipedia.org/wiki/Travelling_salesman_problem)类型的问题，“距离”是两个选定条目之间的差异，除了你的目标是最大化总距离而不是最小化它。

我实际上对这个话题并不了解很多，但这是我认为我知道的：

旅行商问题有一些算法，但在极限范围内它们可能非常慢（它们是[NP-hard](http://en.wikipedia.org/wiki/P_versus_NP_problem)）。另一方面，有很好的近似，简单的情况可能是可以解决的，尽管它仍然是一个不平凡的算法。

根据最大碎片的重要性，您还可以尝试一种简单的方法：给定一个元素，选择下一个元素，使其与给定元素相距甚远。然后选择下一个元素，依此类推。这样做的问题是，您的早期选择会使您陷入困境。因此，如果碎片对您来说非常重要，这将不起作用。

```
[2,5,1,3,4] // the first three choices force us to not fragment the last two 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:50:44.923

假设碎片被定义为连续值的绝对差之和，则最大碎片序列不是唯一的——反向序列将始终具有完全相同的碎片，并且还有更多选项，例如以下所有排序将具有11 的碎片，这是该数组的最大值：(3,1,5,2,4), (3,2,5,1,4), (2,5,1,4,3), (2 ,4,1,5,3), (4,1,5,2,3), (4,2,5,1,3), (3,5,1,4,2), (3,4 ,1,5,2)。如果还包含最后一个元素和第一个元素之间的差异，则会有更多的对称性。

如果要确定一个特定的最大碎片序列，例如“没有明显模式”的序列，则必须将后一种概念形式化并执行搜索，我怀疑从计算的角度来看，这将是昂贵的，除非目标可以被形式化以允许有效解码。我怀疑出于所有实际目的，一个好的启发式方法就足够了，例如将元素一个一个地插入到数组中（贪婪的方式），以便在每个步骤中最大化碎片的增益。

但是，如果数组的元素不是数字，而是一些实体，每对都有定义的距离，那么问题确实等同于旅行商问题，正如 user802500 指出的那样。

# windows-8 - 为剪贴板创建 RTF 文本并在 WinRT 中共享 DataPackage

> ID：10912581
> 
> 赞同：1
> 
> 时间：2012-06-06T10:39:42.080
> 
> 标签：windows-8, clipboard, windows-runtime, rtf

我确信这只是一个谷歌搜索，但我找不到正确的搜索词来找到我正在寻找的内容。

我创建了一个包含 HTML 和纯文本内容的 DataPackage。我已经在我的副本和共享代码中使用了它，它工作正常。我现在想创建 RTF 输出，因为某些应用似乎不接受 HTML 剪贴板内容。

我正在寻找一个很好的指南来制作可以添加到 DataPackage 的 RTF 文本。我只需要简单的格式，包括更改字体系列、字体大小、字体粗细和添加换行符。数据来自我想序列化为 RTF 的对象列表，而不是来自屏幕上的文本控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:30:15.820

写字板输出相当干净的 RTF，其他一些文本编辑器也是如此。如果这还不够，您可以下载[RTF 规范 1.9.1](http://www.microsoft.com/en-us/download/details.aspx?id=10725)，尽管与任何规范一样，这可能对您正在做的事情来说太过分了。

您还可以使用Metro 风格应用程序中[RichEditBox](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richeditbox.aspx)的[Document 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.richeditbox.document.aspx)的[SaveToStream 方法进行共享。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.text.itextdocument.savetostream.aspx)

# r - 在 r 中加载 bquant 包时出错

> ID：10912582
> 
> 赞同：0
> 
> 时间：2012-06-06T10:39:47.713
> 
> 标签：r

我在我的 Windows 系统中安装了 BQuant 包。当我加载包时，它显示以下错误**Error: package 'BQuant' is not installed for 'arch=i386'** 。任何人都可以解决它。如果没有，R中是否还有其他用于核磁共振分析的软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:56:41.827

由于根据您最近的其他问题，您只对良好的峰值检测算法感兴趣，因此您可以直接从包源中获取相关函数的代码（查看 zip 中的文件夹 R）。

# regex - Mongo反向正则表达式

> ID：10912583
> 
> 赞同：3
> 
> 时间：2012-06-06T10:39:51.707
> 
> 标签：regex, mongodb, reverse

在 SQL 中，可以运行类似于

```
SELECT result FROM table WHERE 'abc-def-ghi' LIKE col1 
```

在这样的桌子上：

```
col1      | result
abc-%     | 1
abc-d%    | 2
as%       | 3
...       | ... 
```

并得到一个包含 1 和 2 的结果集。

问题：如何在 mongodb 中达到相同的效果？我可以运行正则表达式来匹配字段，但是有没有办法可以将字段与提供的数据匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T19:17:11.233

您可以使用 $where 运算符，例如：

```
db.col.find({$where: "\"abc\".match(this.col1)"}) 
```

尽管 MongoDB 文档不建议使用 $where，但据我所知，这是唯一的可能性。

（这个问题可能是重复的。参见[MongoDB reverse regex](https://stackoverflow.com/questions/15966991/mongodb-reverse-regex)）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-12T14:49:16.387

```
db.stuff.find( { col1 : /supplied_data/ }, { result : 1 } ); 
```

将仅返回结果字段。

# jsf - 从 Primefaces 微调器的值变化更新表单

> ID：10912587
> 
> 赞同：3
> 
> 时间：2012-06-06T10:40:05.040
> 
> 标签：jsf, primefaces

我正在尝试根据微调器的更改更新我的表单

```
<p:spinner id="spin1" min="1" max="#{editPhoto.max}" size="1" 
           value="#{editPhoto.page}" validator="#{editPhoto.validator()}" 
           valueChangeListener="#{editPhoto.refreshForm()}" />
<p:commandButton value="Insert" action="#{editPhoto.insertImage()}"  />
<p:commandButton value="Delete" action="#{editPhoto.deleteImage()}" /> 
```

我已经在值、setPage 以及验证器和 valueChangeListener 中设置了断点，并且**只有**在我按下 commandButton 时才会触发它们。我试过立即=“真”，但这并没有增加任何东西。我真正想要的是知道值何时更改，但不必点击命令按钮。

在之前的[问题](https://stackoverflow.com/questions/10869174/further-continuing-of-double-press)中，BalusC 建议使用

```
<f:event type="preRenderView" listener="#{nextpageBacking.onPreRenderView}" /> 
```

我怀疑我在这里需要类似的东西，但我应该寻找什么样的事件？也许不是，那么我需要做什么才能在微调器中进行更改而无需按下命令按钮？谢谢，伊兰

我的 bean 是视图范围的。也许答案是使用另一个请求作用域 bean 并让请求作用域 bean 对视图作用域 bean 进行操作？如果这看起来是正确的方向，我会试试这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:28:51.760

您应该使用`f:ajax`或`p:ajax`。

valueChangeListener 只会在提交整个表单或微调器时触发。

```
<p:spinner id="spin1" min="1" max="#{editPhoto.max}" size="1" 
           value="#{editPhoto.page}" validator="#{editPhoto.validator()}">
    <p:ajax listener="#{editPhoto.refreshForm()}" 
            update="@form" process="@this" />
</p:spinner> 
```

微调器的`valueChangeListener`属性不是触发您的方法的最佳位置。你最好把它`listener`放在`p:ajax`. *如果您对旧值和*新值感兴趣，则应使用 valueChangeListener 。

# mysql - 从 3 个表中获取 id

> ID：10912588
> 
> 赞同：0
> 
> 时间：2012-06-06T10:40:09.517
> 
> 标签：mysql

一个包含团队 ID 和团队名称的团队表，然后是另外 2 个包含测验数据的表和另一个包含问卷数据的表。

我需要获取已完成测验（所以有一些测验数据）和问卷（所以有一些问卷数据）的团队 ID 列表，但我看不到如何加入 3 个表以获取 id 列表我需要。

收到任何指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:16:31.700

正如你在上面的评论中所说..

> 我实际上想要两个数据表中的团队 ID。那将如何修改查询？– 戴夫

试试这个，这就是我对你的话的理解..

```
select teamID,teamName from team where teamID in (select teamID from quiz) or teamID in (select teamID from questionnaire); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:46:29.457

假设您在测验和问卷表中有一些团队表参考，您将需要以这种方式加入 -

```
SELECT team.id, team.name
from 
 team, quiz, questionnaire
where
 team.id=quiz.team_id
 AND team.id=questionnaire.team_id 
```

当您这样做时，`team.id=quiz.team_id AND team.id=questionnaire.team_id`结果中只会显示测验和问卷表中都存在的那些团队 ID。

* * *

如果您需要表格测验或问卷中存在的团队 ID，那么您将替换`AND`为`OR`-

```
SELECT team.id, team.name
from 
 team, quiz, questionnaire
where
 team.id=quiz.team_id
 OR team.id=questionnaire.team_id 
```

# extjs - Extjs how to decode a json string?

> ID：10912590
> 
> 赞同：7
> 
> 时间：2012-06-06T10:40:25.333
> 
> 标签：extjs, decode, json

I have to decode JSON with `Extjs 4`:

I have used `Ext.decode(string, true)`, but it doesn't work 'cause my string is a JSON with a JSON string (escaped) inside... like this:

```
var string = '{
    success: true,
    rows: [{
        "id": 33,
        "defaultset": 1,
        "name": "Generico",
        "jsonfields": "[{\"name\":\"cm:addressees\",\"title\":\"Destinatari\",\"description\":\"Destinatari\",\"dataType\":\"d:text\",\"url\":\"\/api\/property\/cm_addressees\"}]",
        "eliminato": 0
    }]
}'; 
```

as you can see the field `jsonfields` is a JSON string. When I use

```
Ext.decode(string, true); 
```

nothing happens neither error.

Any suggestions?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T15:11:09.407

You may try like this:

```
var string = '{success:true, rows:[{"id":33,"defaultset":1,"name":"Generico","jsonfields":"[{\\"name\\":\\"cm:addressees\\",\\"title\\":\\"Destinatari\\",\\"description\\":\\"Destinatari\\",\\"dataType\\":\\"d:text\\",\\"url\\":\\"/api/property/cm_addressees\\"}]","eliminato":0}]}';

var decodedString = Ext.decode(string);
console.log(decodedString); 
```

that's a little bit tricky. If you remove safe parameter you will see that your json misses `\` in your `jsonfields` thats because your string is in `'` quotes and one `\` does the job for it but you want something different... so you have to double it.

[fiddle example](http://jsfiddle.net/H4QEP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T15:52:09.160

It does work, for example I am getting my Json from the server,

```
websocket.onmessage = function(event) 
```

from the websocket actually and later when I want to decode my json,

```
var json = Ext.decode(event.data); 
```

and where I need my string for example

```
json.map.MessageType 
```

My json looks like this:

```
mpty":false,"map":{"MessageText":"Ciao, how are you?","MessageType":"IN"},"hashtable":{"MessageText":"Ciao, how are you?","MessageType":"IN"},"persistData":{"MessageText":"Ciao, how are you?","MessageType":"IN"}} 
```

Hope this helps, cheers!

# iphone - 我应该使用哪种技术在 iOS 上绘图？

> ID：10912591
> 
> 赞同：0
> 
> 时间：2012-06-06T10:40:28.533
> 
> 标签：iphone, objective-c, ios5, core-graphics

我正在开发一个应用程序，其中包含一个我必须在其中绘制几件东西的视图。

我的观点是这样的：

![截图应用](../Images/bc79c7c1f0181219ef85f97ef8d05b35.png)

这只是整个视图的一部分，但所有视图的高度都是一样的。

这代表火车的轨道。所以在我的应用程序中，一些火车会出现在轨道上。

我的问题是，我应该使用哪种技术：

*   CoreGraphics 在我的视图上绘制所有内容？
*   UITableView，然后只逐行绘制一个轨道，并在里面绘制一些组件（更容易管理？）
*   或其他 ？

非常感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:47:19.790

你可以同时做：使用 UITableView 进行布局，然后使用 CoreGraphics 独立绘制每个 UITableViewCell。这保留了表格视图的灵活性，同时释放了 CoreGraphics 的绘图功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:53:04.877

最简单也可能是最有效的方法是使用 png 和`UIImageView`. 您可以使用它执行简单的循环动画，并使用`.frame.origin`或为其位置设置动画`.center`。

如果您想对单独的组件有更多的控制，也许您希望火车的某些部分由于各种参数而产生不同的动画，那么您可以使用`CALayer`s 来构建更精细的动画。

作为最后的手段，您可以`drawRect:`在`UIView`子类中覆盖。在此方法中，您可以使用`UIKit`CoreGraphics 函数（`UIBezierPath`等）的包装器。`UIKit`和 CoreGraphics 使用不同的坐标系统，使用 UIKit 包装器可以缓解这个问题。

# xtk - 将原始顶点信息传输到 XTK？

> ID：10912592
> 
> 赞同：1
> 
> 时间：2012-06-06T10:40:29.203
> 
> 标签：xtk

我们使用 XTK 来显示在服务器上处理和创建的数据。在我们的特殊情况下，它是一个并行等高线应用程序。按照目前的情况，我们正在转换为（文本）VTK 格式，并将整个（虚构的）VTK 文件通过网络传递给客户端，XTK 在那里呈现它。这提供了一些实质性的开销，因为文本格式在内存中的格式中占了相当大的比重。

是否有推荐的机制可用于直接传输二进制数据，或者通过描述良好的替代格式，或者通过在 JavaScript 代码本身中构造 XTK 原语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:31:47.610

**XMLHTTPRequest**在其第二个规范（最后一个）中允许跨域 http 请求（但您必须控制服务器端的 php 标头）。

此外，它还允许发送 ArrayBuffer、Blob 或 Documents（看[这里](http://www.w3.org/TR/XMLHttpRequest2/#dom-xmlhttprequest-send)）。然后在客户端，您可以为该 blob 或（我认为它更适合您的情况）使用二进制缓冲区视图的 BinaryBuffer 编写自己的解析器（请参阅[此处](https://developer.mozilla.org/en/JavaScript_typed_arrays)的文档）。然而 XMLHTTPRequest 是从客户端到服务器的，但是看看**HTML5 WebSocket**，它似乎也可以传输 binaryArrays （他们[在这里](https://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html#articlecontentAdobe_numberedheader_2)说：） 。

在每种情况下，您都需要一个解析器将二进制文件转换为字符串或客户端的 X.object。

我希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:25:25.137

应该支持从 JSON 中解析 X.object。因此，您可以在服务器端生成 JSON 并使用 X.object(jsonobject) 复制构造函数来安全地向下转换它。这也应该带来这样的优势，即对象可以“准备好 webgl”，并且不需要任何客户端解析，这会导致即时加载。

我打算很快自己玩，但如果你有任何工作，请告诉我们。

请记住，即使在 JSON 中，您也需要匹配 X.object 结构。查看 xtk 预期内容的最佳方法是 JSON.stringify 一个 webgl-ready X.object。

# android - 使用 google api: android 获取酒吧和餐馆的位置

> ID：10912594
> 
> 赞同：1
> 
> 时间：2012-06-06T10:40:43.540
> 
> 标签：android

我想获取最近的位置、酒吧和餐馆的纬度、经度，我没有任何用于获取位置坐标的网络服务，所以你在 android 中是否可以直接使用谷歌 api 获取最近的位置经度、经度，如果它可能的话请告诉我方法..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:55:04.520

请检查链接。在这里您可以找到有关最近位置、酒吧和餐馆的所有信息

[关联](https://developers.google.com/maps/documentation/places/#PlaceSearches)

# javascript - 如何为 Youtube 启用 onseek 缩略图视图

> ID：10912595
> 
> 赞同：2
> 
> 时间：2012-06-06T10:40:45.570
> 
> 标签：javascript, api, youtube

在这段视频[http://www.youtube.com/watch?v=ylLzyHk54Z0](http://www.youtube.com/watch?v=ylLzyHk54Z0)中，当我按住进度条中的播放器旋钮并将其向前拖动时，它会显示一串缩略图。但是当我去看这个视频[http://www.youtube.com/watch?v=36AP68tGoAs](http://www.youtube.com/watch?v=36AP68tGoAs)时，同样的拖动不会生成缩略图轨迹。我尝试使用一些选项嵌入视频（使用 YouTube API），但找不到解决方案。

有人可以帮忙吗？

我只想在拖动 YouTube 的进度条时启用缩略图跟踪，特别是在使用 YouTube JavaScript API 嵌入时。

谢谢你的帮助。

# python - Boto 无法遍历实例

> ID：10912597
> 
> 赞同：4
> 
> 时间：2012-06-06T10:40:53.937
> 
> 标签：python, boto

以下代码返回一个空列表：

```
instancelist = list()
instancelist = [x for x in conn.get_all_instances()]

for instance in instancelist:
       print instance.groups 
```

在每种情况下，代码都不会进入 for 循环，您能否提供有关原因的见解？

boto API 应该从 conn.get_all_instances 返回所有预留对象的列表。我能够从同一个连接对象运行/杀死实例就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:10:16.280

您可以尝试这样做吗：

```
>>> import boto
>>> boto.set_stream_logger('foo')
>>> conn = boto.connect_ec2(debug=2)
>>> conn.get_all_instances() 
```

看看你的控制台打印了什么？这应该启用对 EC2 服务的请求和响应的完整调试日志记录，因此我们将准确地知道请求的内容和返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:05:57.433

我是一个明确的 Python 新手，但我目前使用以下方法遍历所有实例并返回组列表：

```
import boto

conn = boto.connect_ec2()
all_instances = conn.get_all_instances()

for i in all_instances:
    print i
    for instance in i.instances:
        print instance.groups 
```

我认为您可能遇到的问题是保留作为实例集合返回。

正如我所说，我可能错了，但以上内容对我有用。

# html - 适合 iPhone css 上的表格

> ID：10912599
> 
> 赞同：1
> 
> 时间：2012-06-06T10:41:09.070
> 
> 标签：html, css, layout

我目前正在为网络和 iPhone 设计一个网站。我遇到了一个问题，在 iPhone 上显示表格。

在我的电脑上，这张桌子看起来很正常。我可以看到一切。但是在我的 iPhone 上，我只能看到两行，另外两行是不可见的，因为它们超出了屏幕。（没有滚动条）

我该怎么做才能使表格适合屏幕宽度？这是CSS：

我在css中使用@media。

这是表格的 .css：

```
 .blacklist{
        width:100%;
    }

.blacklist thead th{
    border:1px solid #e2e2e2;
    width:25%;    
}
.blacklist thead th img{
    width:72px;
    height:72px;
    float:left;
}
.blacklist thead .title{
    text-align:left;
    padding-top:23px;
    font-size:18px;
}
.blacklist tbody td{
    border:1px solid #e2e2e2;  
    padding:5px;  
}
.blacklist .button-holder{
        text-align:center;
        margin:7px;
} 
```

这是 iPhone 版本的 .css：

```
 .blacklist table{
        visibility:collapse;
    }
    .blacklist th{
        width:25%;  

    }
    .blacklist thead th img{
        display:none;
    }
    .blacklist thead th .title{
        text-align:center;
        padding:7px;
    } 
```

我想……把桌子拆开……就像展示两个 TH 和两个 TD。在此之下，还有两个 TH 和两个 TD。等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:30:11.027

看看[响应式数据表综述](http://css-tricks.com/responsive-data-table-roundup/)。这里没有完美的解决方案，但您可以找到解决您遇到的问题的灵感。

另外，为什么只在移动设备方面为 iPhone 开发？还有数以百万计的其他设备也值得爱！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T03:20:35.263

The best that worked for me is, beside decrasing font-size, is enabling the **horizontal scroll** for the table. Example bellow:

HTML:

```
<div class="wrap">
    <table>
    ...
    </table>
</div> 
```

CSS:

```
div.wrap { width: 100%; overflow-x: auto; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:45:57.027

将单独的表格放入 div 并将 div 向左浮动。这会将桌子水平放置在彼此旁边。

# android - SwipeyTabs - 如何使用 ActionBarSherlock 库创建 Swipey 选项卡？

> ID：10912602
> 
> 赞同：10
> 
> 时间：2012-06-06T10:41:19.623
> 
> 标签：android, actionbarsherlock

我已经使用 ViewPagerExtensions 创建了滑动标签，但这次我在我的应用程序中只使用了一个库 ActionBarSherlock，我不知道如何创建像谷歌游戏商店这样的滑动标签。如果你能帮我完成它，我会非常感谢你。

这是我的活动类的 onCreate 方法

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_tabs);
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

        mTabManager.addTab(mTabHost.newTabSpec("simple").setIndicator("Groups"),FragmentStackSupport.CountingFragment.class, null);
        mTabManager.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),LoaderCursorSupport.CursorLoaderListFragment.class, null);
        mTabManager.addTab(mTabHost.newTabSpec("custom").setIndicator("Logs"),LoaderCustomSupport.AppListFragment.class, null);
        mTabManager.addTab(mTabHost.newTabSpec("throttle").setIndicator("Gallery"),LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    } 
```

![在第一张图片中，Top New Paid 是当前屏幕标题，其他两个显示上一个或下一个屏幕磁贴。 我如何在角落显示上一个和下一个屏幕标题，并带有一些类似的褪色效果。](../Images/101481f6485ef85df140ea7ae34bae1d.png)

在第一张图片中，Top New Paid 是当前屏幕标题，其他两个显示上一个或下一个屏幕磁贴。我如何在角落显示上一个和下一个屏幕标题，并带有一些类似的褪色效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T02:25:24.343

您需要使用 ActionBar 选项卡、一个 TabsAdapter 和一个 ViewPager（滚动位）。这是我制作的完整教程：[http](http://davidjkelley.net/?p=34) ://davidjkelley.net/?p=34 （只使用 ABS 导入，而不是标准兼容性库）。

以下是一些相关代码：

```
import java.util.ArrayList;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.MenuItem.OnMenuItemClickListener;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
public class Polling extends FragmentActivity {
private ViewPager mViewPager;
private TabsAdapter mTabsAdapter;
private final static String TAG = "21st Polling:";

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

mViewPager = new ViewPager(this);
mViewPager.setId(R.id.pager);
setContentView(mViewPager);
final ActionBar bar = getActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
bar.setDisplayShowTitleEnabled(false);
bar.setDisplayShowHomeEnabled(false);

mTabsAdapter = new TabsAdapter(this, mViewPager);
mTabsAdapter.addTab(bar.newTab().setText(R.string.login),
LoginFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.economics),
EconFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.elections),
ElectionsFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.politics),
PoliticsFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.science),
ScienceFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.finance),
FinanceFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.religion),
ReligionFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.military),
MilitaryFragment.class, null);
mTabsAdapter.addTab(bar.newTab().setText(R.string.international),
InternationalFragment.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter
    implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
        private final Context mContext;
        private final ActionBar mActionBar;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(Class<?> _class, Bundle _args) {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(FragmentActivity activity, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        public int getCount() {
            return mTabs.size();
        }

        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        public void onPageSelected(int position) {
            mActionBar.setSelectedNavigationItem(position);
        }

        public void onPageScrollStateChanged(int state) {
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            mViewPager.setCurrentItem(tab.getPosition());
            Log.v(TAG, "clicked");
            Object tag = tab.getTag();
            for (int i=0; i<mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {}

        public void onTabReselected(Tab tab, FragmentTransaction ft) {}

        public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {}

        @Override
        public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {    
            Object tag = tab.getTag();
            for (int i=0; i<mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {}
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:04:34.100

我有一个类似的问题，但我根本没有实现任何 ActionBar。我遇到了这个博客，它让我找到了一个名为“SwipeyTabs”的实现，它只是与 ViewPager 一起使用。

[http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T02:28:30.197

您所指的*滑动标签实际上只是一个 ViewPager，每个页面都有相应的标题标签。*默认情况下，这不包含在 Android SDK 中，但您可以使用 Jake Wharton`ViewPagerIndicator`为 ViewPager 中的每个选项卡添加标题。我相信`ActionBarSherlock`（也是由 Jake Wharton 创建的）也提供了相同的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T02:20:50.550

如果您使用 ActionBarSherlock，您最好使用操作栏选项卡，而不是`TabHost`. 此外，我相信 ABS 中有一些示例可以说明如何做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T02:25:44.020

您将需要使用 ViewPager，并放弃 TabHost。

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# apache - Apache cxf 使用 XSLTJaxbProvider 作为 JAXRSDataBinding

> ID：10912603
> 
> 赞同：1
> 
> 时间：2012-06-06T10:41:34.380
> 
> 标签：apache, xslt, cxf

（对于 stackoverflow 上的链接断开表示歉意，将新用户限制为一篇文章中的 2 个！）

我已经使用 Spring STS 和 MyEclipse for spring 搭建了一个 Web 服务服务器，并且对转换输出的肥皂消息很感兴趣。

我要转换的第一件事是命名空间前缀，所以我的 spring 配置看起来像这样

```
<jaxws:endpoint xmlns:tns="ttps://etc etc">
    <jaxws:dataBinding>
        <ref bean="data-binding"/>
        </jaxws:dataBinding>
</jaxws:endpoint>

<bean ref="data-binding" class="org.apache.cxf.jaxb.JAXBDataBinding">
        <property name="namespaceMap">
        <map>
            <entry>
                   <key>
                          <value>ttp://thing</value>
                       </key>
                       <value>BeepBeep</value>
            </entry>
            </map>
        </property>
  </bean> 
```

这工作得很好，我的肥皂信息完全正确地输出了。

```
<as>
<b>
    <stuff/>
</b>
<c>
    <more stuff/>
</c>
</as> 
```

其次，我需要更改soap xml，但不仅仅是[http://cxf.apache.org/docs/transformationfeature.html](http://cxf.apache.org/docs/transformationfeature.html)允许的转换功能

[所以我在http://cxf.apache.org/docs/jax-rs-advanced-xml.html](http://cxf.apache.org/docs/jax-rs-advanced-xml.html)阅读了有关 XSLTJaxbProvider 的信息，并在 ttp://cxf.apache.org/ 将 rs 提供程序插入到 ws 绑定docs/jax-rs-data-bindings.html#JAX-RSDataBindings-CXFDataBindingsasJAXRSproviders 创建以下配置

```
<jaxws:endpoint xmlns:tns="ttps://etc etc">
    <jaxws:dataBinding>
         <ref bean="jaxrs-data-binding"/>
    </jaxws:dataBinding> 
```

```
<bean id="jaxrs-data-binding" class="org.apache.cxf.jaxrs.provider.JAXRSDataBinding">
           <property name="namespaceMap">
       <map>
    <entry>
           <key>
                  <value>ttp://thing</value>
               </key>
               <value>BeepBeep</value>
    </entry>
        </map>
    </property>
    <property name="provider" ref="xsltProvider"/> 
```

```
 <bean id="xsltProvider" class="org.apache.cxf.jaxrs.provider.XSLTJaxbProvider"> 
        <property name="outTemplate" value="classpath:/WEB-INF/templates/transform.xsl"/>
</bean> 
```

现在我得到一个 JAXB Exception: Class not known to this context for classes b and c 即使我有一个空的 xslt 样式表，我也会得到 xml

```
<as/> 
```

我已经对配置进行了修改，并在各处添加了@XmlSeeAlso，但无济于事。

我想我不得不问我在配置中做了什么？在我尝试将 rs 提供程序作为 ws 数据绑定连接之前，这一切都按预期工作，这一事实可能意味着它不是？

非常感谢任何建议。也许有更好的方法来使用 xslt/操纵 xml？

谢谢

# c# - 使用 WebClient 将数组作为消息正文的一部分传递以进行发布操作

> ID：10912604
> 
> 赞同：2
> 
> 时间：2012-06-06T10:41:45.997
> 
> 标签：c#, model-view-controller, post, webclient

我正在编写一个需要对 MVC 控制器执行 POST 的控制台应用程序。我正在使用 WebClient 类来执行 POST。但是我无法理解如何将数组添加到消息正文中。

对于简单的参数，如果我这样做似乎可以工作：

```
 using (var client = new WebClient())
        {

            var values = new NameValueCollection 
            { 
                { "userName", "userName" },
                { "password", "passwordGoesHere"}

            };
            byte[] responseArray = client.UploadValues(String.Format("{0}/Mobile/StartSession", serverAddress), values);
            Debug.WriteLine(String.Format("\r\nResponse received was :\n{0}\n", Encoding.ASCII.GetString(responseArray)));

        } 
```

我试图找到在使用 WebClient 时如何在消息正文中传递数组（用于调用其他方法之一）。我遇到了这个解决方案：[POST'ing arrays in WebClient (C#/.net)](https://stackoverflow.com/questions/3942427/posting-arrays-in-webclient-c-net)

看来解决方案实际上是在查询字符串中传递参数（而不是在消息正文中）。这似乎在任何情况下都有效，因为 MVC 控制器上的 HttpPost 方法仍在接收正确的信息。但是，另一种方法要求我将图像作为字节数组传递。这太大而无法在查询字符串中传递，因此调用失败。

所以我的问题是，使用我上面提供的代码，我怎样才能在其中添加数组。例如一个字节数组，还有一个字符串数组。

如果有人可以为我提供解决方案，将不胜感激，或者如果我的想法不正确，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:45:57.663

而不是使用字节数组，也许您应该以与从文件输入从浏览器上传文件相同的方式发布文件。这样您将节省一些传输的字节，但您必须使用 HttpWebRequest 而不是 WebClient。有关此解决方案的更多信息在这里：

[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

您将字节上传为“multipart/form-data”内容类型。在服务器上，您将收到 Request.Files 集合中的字节流。

# smtp - Microsoft Exchange NDR 是否符合 RFC 3461、RFC 3834？

> ID：10912608
> 
> 赞同：1
> 
> 时间：2012-06-06T10:41:52.120
> 
> 标签：smtp, exchange-server, exchange-server-2007, exchange-server-2010

我正在尝试从众多提供商中解析 NDR（未送达报告），包括但不限于 Microsoft Exchange、GMail、Yahoo！和微软直播。但是，我不确定 Microsoft Exchange（所有当前支持的版本）是否符合上面列出的其他提供商所遵循的相关 RFC。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:46:39.120

一个非常快速的“Exchange RFC 3461”谷歌返回[这个知识库](http://support.microsoft.com/kb/262986)页面，其中包含所有受支持的 RFC。两个 RFC 都在里面

# jquery - 敏捷上传器 onReady

> ID：10912610
> 
> 赞同：0
> 
> 时间：2012-06-06T10:42:15.537
> 
> 标签：jquery, flash

在上传到服务器之前，我正在使用敏捷上传器来调整图像大小，但我无法确定上传器何时准备就绪。

有谁知道是否有办法在浏览按钮准备好之前显示一个简单的“加载”消息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:45:30.840

您可以使用`.holdReady()`延迟就绪事件，直到加载自定义插件。

例如：

```
$.holdReady(true);
$.getScript("myplugin.js", function() {
     $.holdReady(false);
}); 
```

[http://api.jquery.com/jQuery.holdReady/](http://api.jquery.com/jQuery.holdReady/)

# ruby-on-rails-3 - Rails 捆绑安装仅生产

> ID：10912614
> 
> 赞同：92
> 
> 时间：2012-06-06T10:42:39.467
> 
> 标签：ruby-on-rails-3, bundler

我对 rails/ruby/bundle 还是新手，有点困惑。

在我们的`config/application.rb`文件中有这个捆绑程序段：

```
if defined?(Bundler)         
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

在我们的`Gemfile`我们使用不同的组，例如

```
group :development, :test do
  gem "rspec-rails", ">= 2.7.0", :group => [:development, :test]
  gem 'shoulda-matchers'
  gem 'watchr'
  gem 'spork', '~> 1.0rc'
  gem 'spectator'                          
  gem 'debugger'
  gem 'wirble'
end 
```

但是当我运行`RAILS_ENV=production bundle install`（或`bundle install --deployment`）时，它仍然会从开发/测试组安装 gem...

为什么会发生这种情况，或者我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-06-06T10:46:00.313

看看`--without`选项：

`bundle install --without development test`

默认情况下，Bundler 会安装所有 gem，并且您的应用程序会使用它需要的 gem。Bundler 本身对 Rails 和当前环境一无所知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-14T09:57:08.683

另一种解决方案是使用[`bundle-only`ruby​​ gem](https://github.com/MOZGIII/bundle-only)。它可以按如下方式使用：

```
> gem install bundle-only
> bundle-only production 
```

该库不会污染您的捆绑器配置或扩充`Gemfile.lock`；它是提供的内置`bundle --without every other group`选项的简单替代方案[`bundler`](https://github.com/bundler/bundler)。

# c++ - 使用 c++ 的 c/c++ 源文件的词法分析器

> ID：10912615
> 
> 赞同：0
> 
> 时间：2012-06-06T10:42:43.003
> 
> 标签：c++

我有用于 c/c++ 的词法分析器的代码，该代码适用于表达式，如何将其用于 ac/c++ 源文件。我试过像下面的代码..它产生不正确的令牌集..

代码：

```
 #include<iostream.h>
#include<conio.h>
#include<string.h>
#include<ctype.h>
#include<stdio.h>
#include<fstream.h>
#include<stdlib.h>
class Lex_Ana
{
public :
    int i,j,k,ti,oprfl,delfl,keyfl,Litfl,cLitfl,ptfl,tfl,mxIdeni,Liti,mxIdenj,mxOpri,mxOprj,mxDeli,Erri;
    int uqIdi,uqOpi,uqDei,defOpi,defKeyi,cLiti;
    char mStr[50],mxIden[20][20],mxOpr[20][20],mxDel[20],tmpStr[50];
    char defOprStr[20][20],defOpr[15],defDel[15],defKey[20][20];
    char uqOpr[20][20],uqIden[20][20],uqIdfl[20],uqOpfl[20],uqDefl[20],uqDel[20];
    char Opr[20][20],invalTok[20][20],Con[20][20],Iden[20][20],
         Key[20][20],inTok[20],Lit[20][20],Err[20][20],cLit[20][20];
    int Opri,invToki,Coni,Ideni,Keyi,Deli,inToki;

    Lex_Ana(char *str)
    {
        strcpy(mStr,str);

        //Defined Keywords
        defKeyi=13;
        strcpy(defKey[0],"int");
        strcpy(defKey[1],"float");
        strcpy(defKey[2],"double");
        strcpy(defKey[3],"for");
        strcpy(defKey[4],"if");
        strcpy(defKey[5],"else");
        strcpy(defKey[6],"while");
        strcpy(defKey[7],"do");
        strcpy(defKey[8],"return");
        strcpy(defKey[9],"char");
        strcpy(defKey[10],"break");
        strcpy(defKey[11],"goto");
        strcpy(defKey[12],"void");

        //Defined Operators
        defOpi=18;
        strcpy(defOprStr[0],"+");
        strcpy(defOprStr[1],"-");
        strcpy(defOprStr[2],"*");
        strcpy(defOprStr[3],"/");
        strcpy(defOprStr[4],"%");
        strcpy(defOprStr[5],"=");
        strcpy(defOprStr[6],"<");
        strcpy(defOprStr[7],">");
        strcpy(defOprStr[8],"<=");
        strcpy(defOprStr[9],">=");
        strcpy(defOprStr[10],"==");
        strcpy(defOprStr[11],"=+");
        strcpy(defOprStr[12],"=-");
        strcpy(defOprStr[13],"=*");
        strcpy(defOprStr[14],"=/");
        strcpy(defOprStr[15],"=%");
        strcpy(defOprStr[16],"++");
        strcpy(defOprStr[17],"--");
        strcpy(defOpr,"+-/*%=<>");
        strcpy(defDel,";,:{}[]()");
    }

    int IsMxIden(char ch)
    {
        return((IsIden(ch)||IsFloat(ch))?1:0);
    }

    int IsIden(char ch)
    {
        return((isalpha(ch)||ch=='_')?1:0);
    }

    int IsFloat(char ch)
    {
        return((isdigit(ch)||ch=='.')?1:0);
    }

    int IsOpr(char ch)
    {
        oprfl=0;
        for(ti=0;ti<strlen(defOpr)&&!oprfl;ti++)
        {
        if(ch==defOpr[ti])
        {
            oprfl=1;
        }
        }
        return oprfl;
    }

    int IsDel(char ch)
    {
        delfl=0;
        for(ti=0;ti<strlen(defDel)&&!delfl;ti++)
        {
        if(ch==defDel[ti])
        {
            delfl=1;
        }
        }
        return delfl;
    }

    int IsKey(char *str)
    {
        keyfl=0;
        for(ti=0;ti<defKeyi&&!keyfl;ti++)
        {
        if(!strcmp(defKey[ti],str))
        {
            keyfl=1;
        }
        }
        return keyfl;
    }

    void Find_Lex()
    {
        i=0;
        cLiti=0;
        Liti=0;
        Erri=0;
        mxIdeni=0;
        mxIdenj=0;
        mxOpri=0;
        mxOprj=0;
        mxDeli=0;
        inToki=0;
        while(mStr[i]!='\0')
        {
        if(IsMxIden(mStr[i]))
        {
            while(IsMxIden(mStr[i]))
            {
            mxIden[mxIdeni][mxIdenj++]=mStr[i++];
            if(!IsMxIden(mStr[i]))
            {
                mxIden[mxIdeni++][mxIdenj]='\0';
                mxIdenj=0;
            }
            }
        }
        else if(mStr[i]=='"')
        {
            Litfl=1;
            k=0;
            tmpStr[k++]=mStr[i];
            for(j=i+1;j<strlen(mStr)&&Litfl;j++)
            {
                tmpStr[k++]=mStr[j];
                if(mStr[j]=='"')
                {
                    tmpStr[k]='\0';
                    strcpy(Lit[Liti++],tmpStr);
                    Litfl=0;
                    i=j+1;
                }
            }
            if(Litfl)
            {
                strcpy(Err[Erri++],"Invalid Use of \"");
                i++;
            }
        }
        else if(mStr[i]=='\'')
        {
            cLitfl=0;
            k=0;
            tmpStr[k++]=mStr[i];
            for(j=i+1;j<strlen(mStr)&&!cLitfl;j++)
            {
                tmpStr[k++]=mStr[j];
                if(mStr[j]=='\'')
                {
                    tmpStr[k]='\0';
                    if(strlen(tmpStr)!=3)
                    {
                        strcpy(Err[Erri++],"Invalid Use of \'");
                        cLitfl=1;
                        i++;
                    }
                    else
                    {
                        strcpy(cLit[cLiti++],tmpStr);
                        cLitfl=1;
                        i=j+1;
                    }
                }
            }
            if(!cLitfl)
            {
                strcpy(Err[Erri++],"Invalid Use of \'");
                cLitfl=1;
                i++;
            }
        }
        else if(IsOpr(mStr[i]))
        {
            while(IsOpr(mStr[i]))
            {
            mxOpr[mxOpri][mxOprj++]=mStr[i++];
            if(!IsOpr(mStr[i]))
            {
                mxOpr[mxOpri++][mxOprj]='\0';
                mxOprj=0;
            }
            }
        }
        else if(IsDel(mStr[i]))
        {
            while(IsDel(mStr[i]))
            {
            mxDel[mxDeli++]=mStr[i++];
            }
            mxDel[mxDeli]='\0';
        }
        else if(mStr[i]!=' ')
        {
            inTok[inToki++]=mStr[i++];
            inTok[inToki]='\0';
        }
        else
        {
            i++;
        }
        }
    }

    void Rem_Dup()
    {
        uqIdi=0;
        uqDei=0;
        uqOpi=0;
        for(i=0;i<20;i++)
        {
        uqOpfl[i]=0;
        uqIdfl[i]=0;
        uqDefl[i]=0;
        }
        for(i=1;i<mxIdeni+1;i++)
        {
        if(uqIdfl[i-1]==0)
        {
            strcpy(uqIden[uqIdi++],mxIden[i-1]);
            for(j=i;j<mxIdeni;j++)
            {
            if(!strcmp(mxIden[j],mxIden[i-1]))
            {
                uqIdfl[j]=1;
            }
            }
        }
        }
        for(i=1;i<mxOpri+1;i++)
        {
        if(uqOpfl[i-1]==0)
        {
            strcpy(uqOpr[uqOpi++],mxOpr[i-1]);
            for(j=i;j<mxOpri;j++)
            {
            if(!strcmp(mxOpr[j],mxOpr[i-1]))
            {
                uqOpfl[j]=1;
            }
            }
        }
        }
        for(i=1;i<mxDeli+1;i++)
        {
        if(uqDefl[i-1]==0)
        {
            uqDel[uqDei++]=mxDel[i-1];
            uqDel[uqDei]='\0';
            for(j=i;j<mxDeli;j++)
            {
            if(mxDel[j]==mxDel[i-1])
            {
                uqDefl[j]=1;
            }
            }
        }
        }
    }

    void Sep_Val()
    {
        Opri=0;
        invToki=0;
        Ideni=0;
        Coni=0;
        Keyi=0;
        for(i=0;i<uqIdi;i++)
        {
        if(IsIden(uqIden[i][0]))
        {
            if(IsKey(uqIden[i]))
            {
            strcpy(Key[Keyi++],uqIden[i]);
            }
            else
            {
            ptfl=1;
            for(j=0;j<strlen(uqIden[i])&&ptfl;j++)
            {
                if(uqIden[i][j]=='.')
                {
                    strcpy(invalTok[invToki++],uqIden[i]);
                    ptfl=0;
                }
            }
            if(ptfl)
            {
                strcpy(Iden[Ideni++],uqIden[i]);
            }
            }
        }
        else
        {
            tfl=1;
            ptfl=0;
            for(j=0;j<strlen(uqIden[i])&&tfl;j++)
            {
            if(IsIden(uqIden[i][j]))
            {
                strcpy(invalTok[invToki++],uqIden[i]);
                tfl=0;
            }
            else if(uqIden[i][j]=='.')
            {
                if(ptfl)
                {
                    strcpy(invalTok[invToki++],uqIden[i]);
                    tfl=0;
                }
                if(!ptfl)
                {
                    ptfl=1;
                }
            }
            }
            if(tfl)
            {
            strcpy(Con[Coni++],uqIden[i]);
            }
        }
        }
        for(i=0;i<uqOpi;i++)
        {
        tfl=1;
        for(j=0;j<defOpi&&tfl;j++)
        {
            if(!strcmp(uqOpr[i],defOprStr[j]))
            {
            strcpy(Opr[Opri++],uqOpr[i]);
            tfl=0;
            }
        }
        if(tfl)
        {
            strcpy(invalTok[invToki++],uqOpr[i]);
        }
        }
    }

    void Display()
    {
        printf("\n\n\t: Lexical Analysis Report :\n\t%c Input String: %s\n\n\n",272,mStr);
        printf("\t%c Total Identifiers: %d\n",272,Ideni);
        for(i=0;i<Ideni;i++)
        {
        printf("\t\t");
        puts(Iden[i]);
        }
        printf("\n\t%c Total Constants: %d\n",272,Coni);
        for(i=0;i<Coni;i++)
        {
        printf("\t\t");
        puts(Con[i]);
        }
        printf("\n\t%c Total Literals: %d\n",272,Liti+cLiti);
        for(i=0;i<Liti;i++)
        {
        printf("\t\t");
        puts(Lit[i]);
        }
        for(i=0;i<cLiti;i++)
        {
        printf("\t\t");
        puts(cLit[i]);
        }
        printf("\n\t%c Total Keywords: %d\n",272,Keyi);
        for(i=0;i<Keyi;i++)
        {
        printf("\t\t");
        puts(Key[i]);
        }
        printf("\n\t%c Total Operators: %d\n",272,Opri);
        for(i=0;i<Opri;i++)
        {
        printf("\t\t");
        puts(Opr[i]);
        }
        printf("\n\t%c Total Delimeters: %d\n",272,uqDei);
        if(uqDei)
        {
        printf("\t\t");
        puts(uqDel);
        }
        printf("\n\t%c Total Invalid Tokens: %d\n",272,invToki+inToki);
        for(i=0;i<invToki;i++)
        {
        printf("\t\t");
        puts(invalTok[i]);
        }
        if(inToki)
        {
        for(i=0;i<strlen(inTok);i++)
        {
            printf("\t\t");
            printf("%c\n",inTok[i]);
        }
        }
        printf("\n\t%c Invalid Used Tokens: %d\n",272,Erri);
        for(i=0;i<Erri;i++)
        {
        printf("\t\t");
        puts(Err[i]);
        }
    }

};

void main()
{
clrscr();
FILE *fp;
    int size=0;
char file_name[40],ch;
char mystring[200];
printf("\n\n\tEnter File name: ");
gets(file_name);
fp=fopen(file_name,"r");
if(fp==NULL)
{
 perror("Error while opening the file.\n");
 exit(EXIT_FAILURE);
}
else
{
      fseek(fp, 0, SEEK_END);
  size = ftell(fp);
  fseek(fp, 0, SEEK_SET);
 while(( ch = fgetc(fp)) != EOF)
 {
   //printf("%c",ch);
   if(fgets (mystring , size , fp) != NULL )
   {
     //puts(mystring);//Here prints full file
     Lex_Ana oblex(mystring);//But here the last line going for lexical analysis
     oblex.Find_Lex();
     oblex.Rem_Dup();
     oblex.Sep_Val();
     oblex.Display();
     break;
   }
 }
}
fclose(fp);
getch();
} 
```

任何人都可以解决这个问题..
编译器：Turbo c 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:46:47.653

```
while(indata.eof()) 
```

它应该是

```
while(!indata.eof()) 
```

更好地使用

```
while(indata.getline(ch,800)) 
```

此外，在

```
{
 while(indata.eof())
 {
    indata>>ch;
 }
}
Lex_Ana oblex(ch);
    oblex.Find_Lex();
    oblex.Rem_Dup();
    oblex.Sep_Val();
    oblex.Display(); 
```

你为什么要重写到**ch**直到 eof？如果这样做，分析器只会分析文件的最后一个单词。

我想你想要这样的东西

```
while(indata.getline(ch,800))
{
    Lex_Ana oblex(ch);
    oblex.Find_Lex();
    oblex.Rem_Dup();
    oblex.Sep_Val();
    oblex.Display();
} 
```

# api - Twitter问题：超出速率限制

> ID：10912623
> 
> 赞同：2
> 
> 时间：2012-06-06T10:43:17.070
> 
> 标签：api, twitter

我正在使用 Twitter 的 API 来查找推文的位置/地点。我正在使用 Twitter 的 Status/Show/:Id

[http://api.twitter.com/1/statuses/show/205935129938497537.json](http://api.twitter.com/1/statuses/show/205935129938497537.json)

这通过 Tweet Id 为我提供了 Tweet 的位置。

但是我收到“ `Rate limit exceeded. Clients may not make more than 150 requests per hour`”错误。

有谁知道这个的解决方案？我在 Google 上搜索过它，但它说将 access_token 传递到 url 将超过对 350 Only 的请求。我想要更多的请求。

还是有人有更好的解决方案/替代方法来寻找 Twitters Tweers 的位置/位置？

# android - Play 开发者控制台：关于 13k 活跃用户的 2 个错误报告

> ID：10912624
> 
> 赞同：1
> 
> 时间：2012-06-06T10:43:26.987
> 
> 标签：android

作为初级开发人员，我有一个小问题。我创建了一个应用程序，该应用程序在过去 2 周内下载了很多，并且拥有 13k 活跃用户。我已经在几部（三星）手机上进行了测试，当然也在模拟器中进行了测试。我不能产生任何错误，因为应用程序很简单，我没想到它会这样做。

但是今天我查看了我的 Play 开发者控制台，发现了 2 个错误报告。这是我应该关注的事情还是可以随机生成这个错误？例如，我知道糟糕的自定义 rom 会导致崩溃，我自己也经历过。

我将发布创建它的类，单击按钮时会播放选定的声音。单击按钮时出现 nullPointerException 崩溃之一，另一个是调用 mp.stop() 时生成的非法状态异常。对我来说，这似乎不可能产生错误，但我当然可能是错的。这是代码：

```
public class SoundActivity extends Activity implements OnClickListener,
    OnCheckedChangeListener {

Button btn;
MediaPlayer mp;
RadioGroup slct;
RadioButton radio0, radio1, radio2, radio3, radio4;
int t = 1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.btclayout);
    initialize();
    btn.setOnClickListener(this);
    slct.setOnCheckedChangeListener(this);
    mp = MediaPlayer.create(this, R.raw.sound1);

}

public void initialize() {
    btn = (Button) findViewById(R.id.button1);
    slct = (RadioGroup) findViewById(R.id.radioGroup1);
    radio0 = (RadioButton) findViewById(R.id.radio0);
    radio1 = (RadioButton) findViewById(R.id.radio1);
    radio2 = (RadioButton) findViewById(R.id.radio2);
    radio3 = (RadioButton) findViewById(R.id.radio3);
    radio4 = (RadioButton) findViewById(R.id.radio4);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    mp.stop();
    mp.reset();
    switch (t) {
    case 1:
        mp = MediaPlayer.create(this, R.raw.sound1);
        break;
    case 2:
        mp = MediaPlayer.create(this, R.raw.sound2);
        break;
    case 3:
        mp = MediaPlayer.create(this, R.raw.sound3);
        break;
    }
    mp.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    mp.release();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    mp = MediaPlayer.create(this, R.raw.sound1);
}

@Override
public void onCheckedChanged(RadioGroup arg0, int arg1) {
    // TODO Auto-generated method stub
    switch (arg1) {
    case R.id.radio0:
        t = 1;
        break;
    case R.id.radio1:
        t = 2;
        break;
    case R.id.radio2:
        t = 3;
        break;
    case R.id.radio3:
        t = 4;
        break;
    case R.id.radio4:
        t = 5;
        break;
    }
}
} 
```

编辑：这是来自 Play 控制台的堆栈跟踪：

> java.lang.IllegalStateException at android.media.MediaPlayer._stop(Native Method) at android.media.MediaPlayer.stop(MediaPlayer.java:1033) at com.ddroid.DisMyApp.SoundActivity.onClick(SoundActivity.java:57) at android.view.View.performClick(View.java:3549) 在 android.os.Handler.handleCallback(Handler.java:605) 在 android.os.view.View$PerformClick.run(View.java:14400) 在 android.os .Handler.dispatchMessage(Handler.java:92) 在 android.os.Looper.loop(Looper.java:154) 在 android.app.ActivityThread.main(ActivityThread.java:4944) 在 java.lang.reflect.Method。在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 在 com.android.internal 的 java.lang.reflect.Method.invoke(Method.java:511) 的 invokeNative(Native Method)。 os.ZygoteInit.main(ZygoteInit.java:551) 在 dalvik.system.NativeStart.main(Native Method)

第二个：

> java.lang.NullPointerException at com.ddroid.DisMyApp.SoundActivity.onClick(SoundActivity.java:76) at android.view.View.performClick(View.java:2538) at android.view.View$PerformClick.run(View. java:9152) 在 android.os.Handler.handleCallback(Handler.java:587) 在 android.os.Handler.dispatchMessage(Handler.java:92) 在 android.os.Looper.loop(Looper.java:130) 在android.app.ActivityThread.main(ActivityThread.java:3687) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com.android。 internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:12:15.120

虽然这些错误不应该发生，但根据我的经验，用户总是会找到一种方法以意想不到的方式使您的应用程序崩溃:) 在这些失败中的每一个中，它都发生在 中`onClick()`，所以我会将`onClick()`代码包装在 a 中`try/catch`，然后简单地记录错误。您在开发人员控制台中看到错误的事实意味着用户遇到了`Force Close`问题，因此捕获错误肯定更好。

在我见过的许多与状态相关的问题中，主要是用户在执行操作的同时在设备上进行旋转。有时使用[Android Monkey](http://developer.android.com/guide/developing/tools/monkey.html)也可以随机模拟这些类型的错误。

# android - 自定义 ImageView 不显示位图

> ID：10912628
> 
> 赞同：1
> 
> 时间：2012-06-06T10:43:41.463
> 
> 标签：android, android-imageview, ondraw

我正在制作一个简单的指南针视图，它显示在`MapView`. 和其他视图的布局`MapView`在布局 xml 文件中声明。
我以[这篇](http://www.intuitor.com/student/Android%20Phone%20Site/RichardCompassAndroid.php "这个")文章为例。我已经`onDraw`为指南针视图编写了方法，但它没有显示任何内容。指南针对象在`onSensorChanged`方法中无效。
**为什么图片不显示？**

XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.mapviews.MyCompass
        android:id="@+id/compass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="20dp" />

    <com.mapviews.TransparentPanel
        android:id="@+id/transparent_panel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="3dp"
        android:padding="5dp" />

    <ImageButton
        android:id="@+id/map_zoom_out"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:contentDescription="@string/cd_zoom_out"
        android:src="@drawable/zoom_out" />

    <ImageButton
        android:id="@+id/map_zoom_in"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/map_zoom_out"
        android:contentDescription="@string/cd_zoom_in"
        android:src="@drawable/zoom_in" />

    <ImageButton
        android:id="@+id/map_center_user"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/map_zoom_in"
        android:contentDescription="@string/cd_center_user"
        android:src="@drawable/directions" />

    <com.mapviews.MyMap
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="MyAPIKey"
        android:clickable="true"
        android:state_enabled="true" /> 
```

MyCompass 类的一部分

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawColor(Color.TRANSPARENT);

        canvas.rotate(
                -1 * Values.accelValues[0]
                , Values.width / 10
                , Values.height / 10);

        canvas.drawBitmap(
                bitmap
                , Values.width / 10 - bitmap.getWidth() / 10
                , Values.height / 10 - bitmap.getHeight() / 10
                , paint);
    }

    public void setup(Context c) {
        paint = new Paint();
        bitmap = BitmapFactory.decodeResource(c.getResources(), R.drawable.compass1);
    } 
```

在`onCreate`方法

```
 compass = (MyCompass) findViewById(R.id.compass);
    compass.setup(this);
    compass.bringToFront(); 
```

# java - 编译ant构建和运行jar

> ID：10912629
> 
> 赞同：1
> 
> 时间：2012-06-06T10:43:42.563
> 
> 标签：java, spring, ant, compiler-construction, jar

嗨，我正在尝试创建一个可以从命令提示符运行的 ant 构建。当我运行包含主要方法的 jar 文件时，我得到了这个：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: com/fmd/raptorurls/RaptorURLs
    Caused by: java.lang.ClassNotFoundException: com.fmd.raptorurls.RaptorURLs
            at java.net.URLClassLoader$1.run(Unknown Source)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source)
            at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
            at java.lang.ClassLoader.loadClass(Unknown Source)
            at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    Could not find the main class: com.fmd.raptorurls.RaptorURLs. Program will exit. 
```

这是我的蚂蚁构建：

```
<?xml version="1.0"?>
    <project name="RaptorURLCheck" basedir="." default="cleanDistFiles">
    <tstamp>
    <format property="currentYear" pattern="yyyy" />
    </tstamp>

    <!-- =================================================================== -->
    <!-- Global Properties - define in build.properties                      -->
    <!-- =================================================================== -->
    <property file="build.properties" />

    <!-- =================================================================== -->
    <!-- Paths                                                               -->
    <!-- =================================================================== -->
    <path id="runtime-libs">
    <fileset dir="${lib.dir}">
        <include name="**/*.jar" />
    </fileset>
    </path>

    <path id="manifest-classpath">
    <fileset dir="${lib.dir}">
        <include name="**/*.jar" />
    </fileset>
    </path>

    <manifestclasspath property="jar.classpath" jarfile="${lib.dir}/${project.name}.jar" >
    <classpath refid="manifest-classpath" />
    </manifestclasspath>

    <target name="clean" >
    <echo>***** Deleting files for ${project.name} *****</echo>
    <delete failonerror="false" dir="${bin.dir}" />
    <delete failonerror="false" dir="${dist.dir}" />
    <delete failonerror="false" dir="${log.dir}" />
    <delete failonerror="false" dir="${conf.dir}" />
    </target>

    <target name="init" depends="clean">
    <echo>***** Creating required directories for ${project.name} build *****</echo>
    <tstamp />
    <mkdir dir="${bin.dir}" />
    <mkdir dir="${dist.dir}" />
    <mkdir dir="${log.dir}" />
    <mkdir dir="${conf.dir}" />
    </target>

    <target name="compile" depends="init" >
    <echo>***** Compiling source files for ${project.name} *****</echo>
    <!--This javac compiles the java/src directory-->
    <javac srcdir="${src.dir}" includeantruntime="false" destdir="${bin.dir}" debug="on" debuglevel="lines,var,source">
        <include name="**/*.java" />
        <classpath refid="runtime-libs" />
    </javac>

    <copy todir="${bin.dir}">
        <fileset dir="${src.dir}">
        <include name="**/*.html" />
        <include name="**/*.css" />
        </fileset>
        <fileset dir="${config.dir}">
        <include name="*-.xml" />
        <include name="*.xsd" />
        <include name="*.properties" />
        </fileset>
    </copy>
    </target>

    <target name="jar" depends="compile" description="Packages app as jar" >
    <echo>***** Creating jar distribution for ${project.name} *****</echo>
    <jar destfile="${lib.dir}/${project.name}.jar">
        <manifest>
        <attribute name="Class-Path" value="${jar.classpath}" />
        <attribute name="Built-By" value="${user.name}" />
        <attribute name="Main-Class" value="${main.class}" />
        </manifest>
        <fileset dir="${bin.dir}">
        <include name="**/*.class*" />
        <include name="**/*.xml" />
        <include name="**/*.html" />
        <include name="**/*.css" />
        <include name="**/*.properties" />
        </fileset>
        <fileset dir="${config.dir}">
        <include name="**/*.xml" />
        <include name="**/*.xsd" />
        </fileset>
    </jar>
    </target>

    <target name="copyDistFiles" depends="jar">
    <echo>***** Copying distribution files for ${project.name} *****</echo>
    <mkdir dir="${dist.dir.lib}" />
    <mkdir dir="${dist.dir.conf}" />
    <mkdir dir="${dist.dir.log}" />
    <copy todir="${dist.dir.lib}">
        <fileset dir="${lib.dir}" excludes="*.db" />
    </copy>
    <copy todir="${dist.dir.conf}">
        <fileset dir="${conf.dir}" />
    </copy>
    </target>

    <target name="zip" depends="copyDistFiles">
    <echo>***** Zipping distribution files for ${project.name} *****</echo>
    <zip destfile="./Linux_5.5_${project.name}.zip" basedir="${dist.dir}" excludes="*.db" />
    </target>

    <target name="cleanDistFiles" depends="zip">
    <echo>***** Deleting distribution files for ${project.name} *****</echo>
    <delete dir="${dist.dir}/lib" />
    <delete dir="${dist.dir.conf}" />
    <delete dir="${dist.dir}/log" />
    </target>
</project> 
```

这是我的构建属性：

```
 project.name=${ant.project.name}
    app.dir=${basedir}
    src.dir=${basedir}/src
    lib.dir=${basedir}/lib
    log.dir=${basedir}/logs
    conf.dir=${basedir}/config
    bin.dir=./bin
    bin.dir.lib=${bin.dir}/lib
    dist.dir=./dist
    dist.dir.conf=${dist.dir}/config
    dist.dir.lib=${dist.dir}/lib
    dist.dir.log=${dist.dir}/logs
    main.class=com.fmd.raptorurls.RaptorURLs
    spring.config.dir=./lib
    config.dir=./config/
    all.config.dir=./apps/fps/raptorurls/config
    build_env=all 
```

不知道我做错了什么。我也在用弹簧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:42:50.303

A `NoClassDefFoundError`（与 a 不同`ClassNotFoundException`）可能表示[许多事物](https://stackoverflow.com/q/6663810/127035)。但首先，我猜想当你执行你的主类时，缺少一些依赖。检查您的运行时类路径。您需要的所有库都存在吗？

# web-services - 基于 nusoap 的扩展

> ID：10912630
> 
> 赞同：3
> 
> 时间：2012-06-06T10:43:47.257
> 
> 标签：web-services, nusoap, base

我想在 nusoap 上创建 xml 架构，如下所示：

```
<xsd:complexType name="WSMessage">
    <xsd:sequence>
        <xsd:element minOccurs="0" maxOccurs="1" name="ErrorMessage" type="s:string"/>
        <xsd:element minOccurs="0" maxOccurs="1" name="ErrorCode" type="s:string"/>
    </xsd:sequence>
</xsd:complexType>

<s:complexType name="ResultSet">
    <s:complexContent mixed="false">
        <s:extension base="tns:WSMessage">
            <s:sequence>
                <s:element minOccurs="0" maxOccurs="1" name="TestData" type="tns:ArrayOfTestData"/>
            </s:sequence>
        </s:extension>
    </s:complexContent>
</s:complexType> 
```

我看不到任何关于如何做到这一点的文档。有人知道吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-15T05:10:52.487

添加两个复杂类型的输入，我在你的问题中理解的是它的输入和输出

```
$this->nusaop->wsdl->addComplexType(
            'WSMessage',
            'complexType',
            'struct',
            'all',
            '',
            array(
                'ErrorMessage ' => array(
                    'MethodParameters' => 'ErrorMessage',
                    'type' => 'xsd:string'
                ),
                'ErrorCode' => array(
                    'MethodParameters' => 'ErrorCode',
                    'type' => 'xsd:string'
                )
               )
        ); 
```

/*输入数据类型*/

```
$this->nusaop->wsdl->addComplexType(
            'ResultSet',
            'complexType',
            'struct',
            'all',
            '',
            array(
                'TestData' => array(
                    'MethodParameters' => 'TestData',
                    'type' => 'xsd:string'
                ),
            )
        ); 
```

/*输出数据类型*/

```
$this->FM_SoapServer->register(
        'Methodcall',// parameter list:
        array('Credentials'=>'tns:WSMessage'),// return value(s):
        array('return'=>'tns:ResultSet'),// namespace:
        false,// soapaction: (use default)
        false,// style: rpc or document
        'rpc',// use: encoded or literal
        'encoded',// description: documentation for the method
        ''
    );

function Methodcall(){
  ///  validations ....
  code....
  return array("ResultSet" => $return);

} 
```

**未经测试，但逻辑在那里**

# c# - 如何使用 C# 保留关键字作为不带 @ 前缀的属性名称？

> ID：10912631
> 
> 赞同：8
> 
> 时间：2012-06-06T10:43:50.210
> 
> 标签：c#, keyword, reserved

我需要设计一个必须有一个属性名称的类`return`，但是当我创建一个属性名称时，`return`我得到一个错误。

经过一番研究，我发现可以通过在 C# 中添加前缀或在 VB.NET`@`中将其括在方括号中来将保留关键字用作属性或变量名。`[]`例如：

```
var @class = new object(); 
```

所以这是我的课程设计代码。

```
public class Person
{
    string _retVal;

    public string @return
    {
        get { return _retVal; }
        set { _retVal = value; }
    }
}

...
Person p = new Person();
p.@return = "hello"; 
```

现在我没有收到任何错误，但是当我尝试访问属性名称时，`return`我需要写出`@return`我不想要的名称。我想访问属性名称`p.return = "hello";`而不是`p.@return = "hello";`所以我想知道是否有任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-06T10:46:58.987

你不能。它是一个**保留关键字**。这**意味着**“你不能”。与“上下文关键字”形成对比，这通常意味着“我们稍后添加了这个，所以我们需要它在一些预先存在的场景中工作”。

这里的温和答案是：使用`@return`.

这里更好的答案是：重命名您的属性。也许`ReturnValue`。

还可以选择，例如`Return`- 但您可能也需要考虑不区分大小写的语言。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-01T13:26:07.337

您可以像这样重命名命名空间：

```
using Test = System.Diagnostics; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-06T10:48:28.880

无法实现这一点，因为保留关键字是预定义的保留标识符，对编译器具有特殊含义。

最好更改属性名称并在代码中使用它...@Marc 答案中给出的内容...

# sql-server - 从动态数据透视结果在 SQL Server 上创建表

> ID：10912632
> 
> 赞同：3
> 
> 时间：2012-06-06T10:44:00.397
> 
> 标签：sql-server, pivot, create-table

有没有办法将动态数据透视查询的结果直接存储到固定表中？由于结果是动态的，我无法通过指定列名和方法来创建表，例如“create table MyTable as (pivot select statement)”似乎在 SQL Server 上失败（“关键字'AS'附近的语法不正确”）。我试图格式化下面的 SQL 以获得 SELECT - INTO - FROM 结构，但没有这样做。任何帮助显然都非常感谢！

用于枢轴的 SQL 是（感谢这个伟大的网站！）：

```
declare @pivot varchar(max), @sql varchar(max)
create table pivot_columns (pivot_column varchar(100))

insert into pivot_columns
select distinct DateField from MyTable order by 1

select @pivot=coalesce(@pivot+',','')+'['+pivot_column+']'from pivot_columns

set @sql = 'SELECT * FROM (select DateField, RefCode, SumField from MyTable) p
PIVOT
(sum(SumField) FOR DateField IN  ( ' + @pivot + ') ) 
AS pvl'

drop table pivot_columns

exec (@sql) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:35:47.650

除非我没有遵循您要执行的操作，否则您应该能够`INTO mynewTable`将要执行的 sql 添加到您的 sql 中，并且您应该获得新表。

```
declare @pivot varchar(max), @sql varchar(max)
create table pivot_columns (pivot_column varchar(100))

insert into pivot_columns
select distinct DateField from MyTable order by 1

select @pivot=coalesce(@pivot+',','')+'['+pivot_column+']'from pivot_columns

set @sql = 'SELECT * INTO mynewTable FROM (select DateField, RefCode, SumField from MyTable) p
PIVOT
(sum(SumField) FOR DateField IN  ( ' + @pivot + ') ) 
AS pvl'

drop table pivot_columns

exec (@sql) 
```

我只是测试在以下脚本中创建一个新表，它为我提供了一个在数据库中使用的新表：

```
create table t
( 
    [month] int, 
    [id] nvarchar(20), 
    [cnt] int 
)

insert t values (4,'TOTAL',214)
insert t values (5,'TOTAL',23)
insert t values (6,'TOTAL',23)
insert t values (4,'FUNC',47)
insert t values (5,'FUNC',5)
insert t values (6,'FUNC',5)
insert t values (4,'INDIL',167)
insert t values (5,'INDIL',18)
insert t values (6,'INDIL',18)

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(month) 
            FROM t 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT *
            INTO tabletest from 
            (
                select month, id, cnt
                from t
           ) x
            pivot 
            (
                 sum(cnt)
                for month in (' + @cols + ')
            ) p '

execute(@query)

drop table t 
```

# c# - 如何使用 Umbraco 5 API 获取内容节点

> ID：10912633
> 
> 赞同：0
> 
> 时间：2012-06-06T10:44:05.037
> 
> 标签：c#, content-management-system, umbraco5

我是 Umbraco 新手，正在努力跟上进度。我正在尝试的一件事是 API 和访问内容树中的节点。不幸的是，文档有点薄，我找不到任何涵盖如此基本任务的信息......

我有一个简单的内容结构

```
Content > Home > About 
```

如何使用 C# 和 API 从普通的旧模型类中检索 About 节点？

在其他 CMS 中，它就像调用 Database.GetItem("/content/home/about") 一样简单

这是如何通过 Umbraco v5 实现的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:01:36.737

如果您想要获取单个特定的内容，您可以使用 hiveid 选择它，如下所示：

```
 Umbraco.GetContentById("content://p__nhibernate/v__guid/0000000000000000") 
```

您可以通过从后台检查内容的属性来找到您的内容 ID。

编辑：

如果您确实*必须*通过 uri 获取内容，则可以通过查询 hive 来实现。我不能推荐它的性能。

```
_context.Application.Hive.QueryContent().Where(x => x.NiceUrl().Equals("/faq/functionality/submit-a-question",StringComparison.InvariantCultureIgnoreCase); 
```

# android - 如何在 ProgressDialog 和文本外观之间同步？

> ID：10912638
> 
> 赞同：0
> 
> 时间：2012-06-06T10:44:22.157
> 
> 标签：android, progress-bar

我得到了这个进度对话框代码：

```
new Thread() {
    @Override
    public void run() {
        try {
            sleep(1000);
        } 
        catch (Exception e) {
            Log.e("tag", e.getMessage());
        }
        // dismiss the progress dialog
        progressDialog.dismiss();
    }
}.start(); 
```

我得到了一些 httprequest 操作后会出现的文本：

> editText2.setText(stringEr);

我如何在它们之间同步？我希望在进度完成之前隐藏文本

天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:46:14.770

我认为您应该为此使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，并且您可以隐藏`in OnPreExecute Method`我的意思是何时启动 asynctask 并在`OnPostExecute method.`完成进度后显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:46:48.207

Android 跳过了痛苦的线程概念，使用`Asyntask`类。 [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
private class UIOperation extends AsyncTask<String, Void, String> {

      @Override
      protected void onPreExecute() {
         //show dialog
      }

      @Override
      protected String doInBackground(String... params) {
            //collect data
            return null;
      }      

      @Override
      protected void onPostExecute(String result) {
           //dismiss dialog
           //update UI
      }

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:47:48.537

您必须使用处理程序来更新您的 UI。这里稍作修改，

```
new Thread() 
            {
                @Override
                public void run()
                    {
                        try
                        {
                           //Instead of sleep, call your http request method here. 
                           handler.sendEmptyMessage(0);
                         } 

                         catch (Exception e)
                          {

                          Log.e("tag", e.getMessage());

                          }
                           // dismiss the progress dialog
                           progressDialog.dismiss();
                    }

              }.start(); 
```

并在 onCreate() 中创建一个处理程序，

```
 Handler handler=new Handler()
{
public void handleMEssage(Message msg)
{
 if(msg.what==0)
editText2.setText(stringEr);
}
}; 
```

# google-app-engine - 你能调整 appengine 的 appcfg 记住密码的时间吗？

> ID：10912640
> 
> 赞同：1
> 
> 时间：2012-06-06T10:44:35.030
> 
> 标签：google-app-engine

我定期通过命令行实用程序`appcfg.sh`/发布 Google Appengine 应用程序`appcfg.cmd`。不幸的是，存储我的密码的 cookie 的过期时间很短；一周或更短的时间。是否可以延长此期限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:56:59.530

为什么不使用[OAuth2](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth)令牌而不是使用基于密码的身份验证？

更方便，可以永久保存，不用再输入密码！

# jsonp - 从 wicket 组件获取 HTML 输出数据

> ID：10912645
> 
> 赞同：2
> 
> 时间：2012-06-06T10:45:10.070
> 
> 标签：jsonp, wicket

我目前正在编写一个**网络小部件**，我想用我的服务器上的**检票口组件生成的一些 HTML 数据填充这个小部件的内容。**

为此，服务器将通过 JSONP 输出 HTML 数据。到现在为止还挺好。

但是我需要获取这个 HTML 数据。**如何**在服务器上获取**某个检票口组件的 HTML 输出**？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:50:55.477

我不知道这是否可以应用于您的配置，但我正在使用视图代码行来检索我前段时间编写的渲染 html，用于构建基于 html 的电子邮件，以便能够在其中使用 wicket 组件

```
protected final String renderPage(Component page)  {
        final Response oldResponse = RequestCycle.get().getResponse();
        BufferedWebResponse tempResponse = new BufferedWebResponse((WebResponse) RequestCycle.get().getOriginalResponse());

        try {
            RequestCycle.get().setResponse(tempResponse);
            page.render();
        }
        finally {
            RequestCycle.get().setResponse(oldResponse);
        }

        return tempResponse.toString();
    } 
```

由于此渲染是在实际的 Web 应用程序周期内进行的，但独立于实际的请求周期，因此建议保留原始请求周期。该页面将在您的临时 Web 响应中呈现，您可以从中检索呈现的 html 输出。

希望这可能是您正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:38:55.390

您可能会在这篇 Wicket Wiki 文章和链接的源代码中找到所需的一切：[使用 wicket 作为模板引擎](https://cwiki.apache.org/WICKET/use-wicket-as-template-engine.html "使用 wicket 作为模板引擎")

尽管我必须承认我从未尝试过，但请阅读并记住以供进一步参考...

# java - HashCodeBuilder 和 EqualsBuilder 使用风格

> ID：10912646
> 
> 赞同：33
> 
> 时间：2012-06-06T10:45:13.243
> 
> 标签：java, hibernate, apache-commons

我经常使用 apache HashCodeBuilder 和 EqualsBuilder 使用反射来实现对象相等，但最近我的一位同事告诉我，如果实体包含大量属性，使用反射可能会导致巨大的性能损失。担心我可能使用了错误的实现，我的问题是，您更喜欢以下哪种方法？为什么？

```
public class Admin {

    private Long id;
    private String userName;

    public String getUserName() {
        return userName;
    }

    @Override
    public boolean equals(Object o) {
        if (!(o instanceof Admin)) {
            return false;
        }
        Admin otherAdmin  = (Admin) o;
        EqualsBuilder builder = new EqualsBuilder();
        builder.append(getUserName(), otherAdmin.getUserName());
        return builder.isEquals();
    }

    @Override
    public int hashCode() {
        HashCodeBuilder builder = new HashCodeBuilder();
        builder.append(getUserName());
        return builder.hashCode();
    }
} 
```

比。

```
public class Admin {

    private Long id;
    private String userName;

    public String getUserName() {
        return userName;
    }

    @Override
    public boolean equals(Object o) {
      return EqualsBuilder.reflectionEquals(this, o, Arrays.asList(id));
    }

    @Override
    public int hashCode() {
        return HashCodeBuilder.reflectionHashCode(this, Arrays.asList(id));
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-06T11:39:58.370

当然，第二种选择更加优雅和简单。但是，如果您担心性能，则应该采用第一种方法。如果安全管理器正在运行，第二种方法也会失败。如果我处于你的情况，我会选择第一个选项。

在生成 hashCode 的第一种方法中也**有一个错误**：
它应该`builder.toHashCode()` 代替`builder.hashCode()`. 后者返回哈希码构建器对象的哈希码。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-07T20:03:42.670

即使第二个选项更有吸引力（因为它只是一行代码）我会选择第一个选项。

原因只是性能。在运行了一个小测试后，我发现它们之间的时间差非常大。

为了了解时间，我创建了这两个简单的类：

```
package equalsbuildertest;

import java.math.BigDecimal;
import java.util.Date;

import org.apache.commons.lang3.builder.EqualsBuilder;
import org.apache.commons.lang3.builder.HashCodeBuilder;

public class Class1 {

    private int field1;

    private boolean field2;

    private BigDecimal field3;

    private String field4;

    private Date field5;

    private long field6;

    public Class1(int field1, boolean field2, BigDecimal field3, String field4,
            Date field5, long field6) {
        super();
        this.field1 = field1;
        this.field2 = field2;
        this.field3 = field3;
        this.field4 = field4;
        this.field5 = field5;
        this.field6 = field6;
    }

    public Class1() {
        super();
    }

    public int getField1() {
        return field1;
    }

    public void setField1(int field1) {
        this.field1 = field1;
    }

    public boolean isField2() {
        return field2;
    }

    public void setField2(boolean field2) {
        this.field2 = field2;
    }

    public BigDecimal getField3() {
        return field3;
    }

    public void setField3(BigDecimal field3) {
        this.field3 = field3;
    }

    public String getField4() {
        return field4;
    }

    public void setField4(String field4) {
        this.field4 = field4;
    }

    public Date getField5() {
        return field5;
    }

    public void setField5(Date field5) {
        this.field5 = field5;
    }

    public long getField6() {
        return field6;
    }

    public void setField6(long field6) {
        this.field6 = field6;
    }

    @Override
    public boolean equals(Object o) {
      return EqualsBuilder.reflectionEquals(this, o);
    }

    @Override
    public int hashCode() {
        return HashCodeBuilder.reflectionHashCode(this);
    }

} 
```

和：

```
package equalsbuildertest;

import java.math.BigDecimal;
import java.util.Date;

import org.apache.commons.lang3.builder.EqualsBuilder;
import org.apache.commons.lang3.builder.HashCodeBuilder;

public class Class2 {

    private int field1;

    private boolean field2;

    private BigDecimal field3;

    private String field4;

    private Date field5;

    private long field6;

    public Class2(int field1, boolean field2, BigDecimal field3, String field4,
            Date field5, long field6) {
        super();
        this.field1 = field1;
        this.field2 = field2;
        this.field3 = field3;
        this.field4 = field4;
        this.field5 = field5;
        this.field6 = field6;
    }

    public Class2() {
        super();
    }

    public int getField1() {
        return field1;
    }

    public void setField1(int field1) {
        this.field1 = field1;
    }

    public boolean isField2() {
        return field2;
    }

    public void setField2(boolean field2) {
        this.field2 = field2;
    }

    public BigDecimal getField3() {
        return field3;
    }

    public void setField3(BigDecimal field3) {
        this.field3 = field3;
    }

    public String getField4() {
        return field4;
    }

    public void setField4(String field4) {
        this.field4 = field4;
    }

    public Date getField5() {
        return field5;
    }

    public void setField5(Date field5) {
        this.field5 = field5;
    }

    public long getField6() {
        return field6;
    }

    public void setField6(long field6) {
        this.field6 = field6;
    }

    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof Class2)) {
            return false;
        }
        Class2 other = (Class2) obj;
        EqualsBuilder builder = new EqualsBuilder();
        builder.append(field1, other.field1);
        builder.append(field2, other.field2);
        builder.append(field3, other.field3);
        builder.append(field4, other.field4);
        builder.append(field5, other.field5);
        builder.append(field6, other.field6);
        return builder.isEquals();
    }

    @Override
    public int hashCode() {
        HashCodeBuilder builder = new HashCodeBuilder();
        builder.append(getField1());
        builder.append(isField2());
        builder.append(getField3());
        builder.append(getField4());
        builder.append(getField5());
        builder.append(getField6());
        return builder.hashCode();

    };

} 
```

第二个类与第一个类几乎相同，但具有不同的 equals 和 hashCode。

之后，我创建了以下测试：

```
package equalsbuildertest;

import static org.junit.Assert.*;

import java.math.BigDecimal;
import java.util.Date;

import org.junit.Test;

public class EqualsBuilderTest {

    @Test
    public void test1() {
        Class1 class1a = new Class1(1, true, new BigDecimal(0), "String", new Date(), 1L);
        Class1 class1b = new Class1(1, true, new BigDecimal(0), "String", new Date(), 1L);
        for (int i = 0; i < 1000000; i++) {
            assertEquals(class1a, class1b);
        }
    }

    @Test
    public void test2() {
        Class2 class2a = new Class2(1, true, new BigDecimal(0), "String", new Date(), 1L);
        Class2 class2b = new Class2(1, true, new BigDecimal(0), "String", new Date(), 1L);
        for (int i = 0; i < 1000000; i++) {
            assertEquals(class2a, class2b);
        }
    }

} 
```

该测试非常简单，仅用于测量时间。

结果如下：

*   **测试1（2,024 秒）**
*   **测试2（0,039 秒）**

我选择他们完全平等是为了拥有最伟大的时代。如果您选择使用 NotEquals 条件进行测试，您将有更短的时间，但也会保持很大的时间差。

我在带有 Fedora 21 和 Eclipse Luna 的 64 位 Intel Core i5-3317U CPU @1.70GHz x4 上运行此测试。

总之，我不会冒如此大的性能差异来保存几行您可能无法使用模板输入的代码（在 Windows 下的 Eclipse -> Preferences 在 Java -> Editor -> Templates 中找到) 比如这样：

```
${:import(org.apache.commons.lang3.builder.HashCodeBuilder, org.apache.commons.lang3.builder.EqualsBuilder)}
@Override
public int hashCode() {
    HashCodeBuilder hashCodeBuilder = new HashCodeBuilder();
    hashCodeBuilder.append(${field1:field});
    hashCodeBuilder.append(${field2:field});
    hashCodeBuilder.append(${field3:field});
    hashCodeBuilder.append(${field4:field});
    hashCodeBuilder.append(${field5:field});
    return hashCodeBuilder.toHashCode();
}

@Override
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    ${enclosing_type} rhs = (${enclosing_type}) obj;
    EqualsBuilder equalsBuilder = new EqualsBuilder();
    equalsBuilder.append(${field1}, rhs.${field1});
    equalsBuilder.append(${field2}, rhs.${field2});
    equalsBuilder.append(${field3}, rhs.${field3});
    equalsBuilder.append(${field4}, rhs.${field4});
    equalsBuilder.append(${field5}, rhs.${field5});${cursor}
    return equalsBuilder.isEquals();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-26T18:02:15.500

我更喜欢第二种选择，原因有两个：

1.  显然更容易阅读

2.  我不会为第一个选项购买性能参数，除非这些参数包含相关指标。例如，基于反射的“等于”会增加多少毫秒到典型的端到端请求延迟？总体而言，那会增加多少%？不知道优化是为时过早的好机会

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-16T00:51:19.380

我想说这些都不是很好的实现。我认为 EqualsBuilder 不是一个很好的框架，原因如下：

1.  不可扩展。如果您尝试断言相等的字段之一应该将空值和空白视为相等怎么办？
2.  您必须维护变量列表，就好像它们是硬编码变量一样。这意味着您必须列出要比较的所有变量。此时 a == o.getA() && b == o.getB() 之间没有任何不同 ...
3.  正如您所指出的，使用反射会占用额外的资源，并且在粉碎数十亿对象的企业应用程序中。进行这种反射等于与内存泄漏一样糟糕。

我会说需要一个比 Apache 更好的框架。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-28T02:51:35.007

您所写的问题清楚地说明了第二种方法的好处之一：

在第一种情况下，*很*容易犯错误`return builder.hashCode()`，而不是正确的`return builder.toHashCode()`，这将导致难以追踪的细微错误。

第二种情况消除了这种错字的可能性，从而减少了试图找到错误的头撞键盘。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-16T15:10:26.500

同意@Churk，Apache HashCodeBuilder 和 EqualsBuilder 没有很好地实现。HashCodeBuilder 仍在玩质数！此外，它还做了很多不必要的工作。你读过源码吗？

从 Java 5（如果不是更早）开始，AbstractHashMap<> 没有使用素数的模来定位哈希桶。相反，桶的数量是 2 的幂，并且哈希码的低 N 位用于定位桶。

此外，它将“混合”应用程序提供的哈希码，以便比特均匀分布，从而均匀地填充桶。

因此，重写 int Object.hashCode() 的正确方法是返回最简单的常量值，该值在使用该类 的*任何集合*中共存的对象中具有最高的数量。

通常，*未修改*的 ID 值是您的最佳选择。如果您的 ID 字段是完整的，只需将其转换为 (int) 并返回即可。如果是 String 或其他 Object，则只返回其哈希码。你明白了。对于复合标识符，返回具有最不同值的字段（或其 hashCode）。少即是多。

当然，必须满足 hashCode() 和 equals() 之间的约定。因此，应该相应地实现equals()。hashCode() 不需要使用相等所需的完整限定符，但 hashCode() 中使用的任何字段都必须在 equals() 中使用。在这里，像 StringUtils.equals(s1, s2) 这样的方法对于一致且安全地处理空值很有用。

# java - 如何从 Web 服务器异步下载图像

> ID：10912647
> 
> 赞同：3
> 
> 时间：2012-06-06T10:45:13.070
> 
> 标签：java, design-patterns, blackberry, threadpool, observer-pattern

我的应用程序屏幕看起来与所附图像相似。我有多行，每行都有一个位图图像、标题和描述字段。所有信息都以 XML 的形式从我们的支持网络服务器获取。现在，我使用了观察者设计模式，它创建了一个单独的线程来通过 HTTP 连接到我的远程服务器、下载和解析 XML。XML 包括每行的图像、标题和描述的 URL。

![在此处输入图像描述](../Images/9268b4c518c7e496d0dc7fcf69ab0b1a.png)

到目前为止，我尝试了几种方法，

**方法一：**

*   创建了一个单独的方法 (drawRow())，它通过指定布局将内容放在一起。
*   然后，使用方法 downloadImage()，我尝试从 drawRow() 方法下载远程 URL。**但它很糟糕，因为它使用相同的线程下载并且 UI 被阻止。**

**方法二：**

在搜索上述问题时，我从[coderholic.com 遇到](http://www.coderholic.com/blackberry-webbitmapfield/)了黑莓中的[WebBitmapField](http://coderholic.com)。

然后，我使用 drawRow() 方法中的以下代码。据我了解 WebBitmapField，这里使用的是观察者设计模式，并且图像是通过 UI 线程以外的线程下载的。当我的行数有限（如 5 或 10）时，它可以正常工作。但是当我要绘制的行数更多时，它会引发`TooManyThreads`异常，因为它会为每一行创建一个新线程。

我有这个链接[taskworker-thread-blackberry](http://blog.vimviv.com/j2me/taskworker-thread-blackberry/)，但不太清楚如何实现我的要求。

据我了解，在黑莓中，一个应用程序最多可以创建 16 个线程。所以，现在我相信了。我可能需要创建一个指定最大大小为 10 的线程池。

**任何人都可以帮我理解并为我当前的问题实现黑莓的线程池吗？**

**另外，我感谢任何人给我任何其他适合我要求的最佳方法。**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:06:08.740

You have everything what you need. So:

1.  Create one `TaskWorker` for your application (use singelton)
2.  Implement `Task` class from `TaskWorker` - `DownloadImageTask` (simply put everything from `Runnable.run()` to `Task.doTask()` method)
3.  Instead of new thread creation in `Util.getWebData()` call `TaskWorker.addTask()`

There are probably more minor details but you could figure out how to finish it.

And I think it's better to have two method in `Callback` - `success(byte[] data)` and `error(Throwable error)` - to determine end result and escape converting images to `String` and back.

# c# - 尝试使用实体框架保存大型 xml 时出现“ORA-00932：不一致的数据类型：预期的 NUMBER 得到 NCLOB”错误

> ID：10912650
> 
> 赞同：3
> 
> 时间：2012-06-06T10:45:27.990
> 
> 标签：c#, entity-framework, oracle11g

当我尝试使用 ADO.NET Entity Framework 将带有大 xml 的新记录插入到带有 XmlType 列的 oracle 表中时，出现以下错误。

```
Oracle.DataAccess.Client.OracleException
            Message=ORA-06550: line 5, column 22:
PL/SQL: ORA-00932: inconsistent datatypes: expected NUMBER got NCLOB
ORA-06550: line 4, column 1:
PL/SQL: SQL Statement ignored 
```

映射到该列的属性的数据类型是字符串。

但是，当我尝试插入一个小 xml 时，它会毫无问题地保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:40:03.643

在 Oracle ODAC 文档中，他们注意到当前保存为 XML 数据类型有 2000 个字符的限制。

> 尝试将长度等于或大于 2,000 个字符的字符串绑定到 XMLType 列或参数时，将遇到“ORA-00932：不一致的数据类型：预期 - 得到 NCLOB”错误。[错误 12630958]

# actionscript-3 - 使用投影仪调试 AS3 Flash 投影仪

> ID：10912655
> 
> 赞同：1
> 
> 时间：2012-06-06T10:45:45.910
> 
> 标签：actionscript-3, flash, debugging

我正在开发一款在通过 Flash Professional 测试时运行良好的 Flash 游戏，但是一旦将其导出到投影仪，它就无法在 PC 或 Mac 上运行。

我有一台 PC（Windows 7），它基本上会在投影仪打开后立即以白屏关闭窗口。FWIW，它曾经在投影仪上工作，直到最近我实现了一些新功能，包括舞台 Web 视图、DesktopFacebook API 集成等。

如何调试投影仪的这个问题？有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:10:28.433

你可以使用[怪物调试器](http://demonsterdebugger.com/downloads)

它应该能够解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:17:56.027

您可以使用[Vizzy](http://code.google.com/p/flash-tracer/)。它将使您可以访问所有跟踪和错误消息（无需更改代码）。或者，正如 AyoubKaanich 建议的那样，您可以使用适当的调试器。

[您必须先安装调试版本](http://www.adobe.com/support/flashplayer/downloads.html)的投影仪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T16:08:34.473

感谢您的回复。事实证明，Flash 正在寻找独立投影仪不可用的 StageWebView 类——它在 Flash Pro 中编译并运行良好，因为我将它设置为 Air Desktop 应用程序进行测试。当我构建投影仪时，它并没有在发布时抛出编译错误，而是在之后拒绝加载。

我最终通过在调试器投影仪中运行 SWF 来诊断这个问题，我可能应该从一开始就这样做......

# php - CURL 脚本 - POST

> ID：10912658
> 
> 赞同：1
> 
> 时间：2012-06-06T10:45:56.570
> 
> 标签：php, curl

我是新手`curl`。只是我尝试使用`curl`脚本发布值，但我得到空响应。帮帮我，我的代码有什么错误吗？如何使用`curl`

```
$params = array('name' => 'karthick', 'type' => 'data'); 

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://example.com/test.php?action=create');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt($ch, CURLOPT_POST, true );
// curl_setopt($ch, CURLOPT_USERPWD,$authentication);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
// curl_setopt($ch, CURLOPT_REFERER,'http://www.example.com.au');
curl_setopt($ch, CURLOPT_POSTFIELDS,$params);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/plain')); 

$result = curl_exec($ch);
curl_close($ch);

var_dump($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:52:38.193

你可以试试这段代码

```
public function getDataThroughCurlPost($param)
{ 
    $ch = curl_init("$url");
    error_reporting(E_ALL);
    curl_setopt ($ch, CURLOPT_POST, true);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, "$param");

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_NOBODY, 0);

    $response = curl_exec($ch);
    $ch = curl_close("$url");
    return $response;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:25:42.543

在我的很多网站上都使用了这个。希望这可以帮助。

```
$sPost .= "<Username>".$username."</Username>";
$sPost .= "<Password>".$password."</Password>";

$url = "YOUR_POST_URL";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$sPost);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$logindetails = curl_exec($ch);
curl_close($ch);

$xmlarray = xml2array($details);

echo "<pre>"; 
print_r($xmlarray); 
echo "</pre>"; 
```

xml2array 类在这里找到：http: [//www.bin-co.com/php/scripts/xml2array/](http://www.bin-co.com/php/scripts/xml2array/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:21:50.560

// curl 函数启动

```
 function get_web_page( $url )
     {
             $options = array(
             CURLOPT_RETURNTRANSFER => true,     // return web page
             CURLOPT_HEADER         => false,    // don't return headers
             CURLOPT_FOLLOWLOCATION => true,     // follow redirects
             CURLOPT_ENCODING       => "",       // handle compressed
             CURLOPT_USERAGENT      => "spider", // who am i
             CURLOPT_AUTOREFERER    => true,     // set referer on redirect
             CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
             CURLOPT_TIMEOUT        => 120,      // timeout on response
             CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
             );
         $ch      = curl_init( $url );
         curl_setopt_array( $ch, $options );
     $content = curl_exec( $ch );
     $err     = curl_errno( $ch );
     $errmsg  = curl_error( $ch );
     $header  = curl_getinfo( $ch );
     curl_close( $ch );

     $header['errno']   = $err;
     $header['errmsg']  = $errmsg;
     $header['content'] = $content;
     return $header;
} 
```

// curl函数结束

```
$cont = get_web_page("http://website.com/filename.php");

$handle = explode("<br>",$cont['content']);
print_r($handle); 
```

# seo - 为公司的每种产品设置不同的网站图标是一种好习惯吗？

> ID：10912662
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:03.287
> 
> 标签：seo, favicon

我公司生产的产品（应用）有5个。

为每种产品设置不同的网站图标是一种好习惯吗？

哪个更好：针对所有 5 种产品的产品特定图标或一个图标（公司徽标）？

特定于产品的网站图标是否有助于 SEO？

请提出优缺点。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:03:14.120

这真有趣。当有人为页面添加书签时也会使用网站图标 - 只要您可以保持风格的某种连贯性，那么它应该对用户很好 - 但显然，对于 SEO 的影响是零。

通过为单个页面（图像、描述、标题、url 等）提供其他元数据，您将获得更好的结果，但猜想您已经跟上进度了。

# mysql - Mysql更新查询与选择连接

> ID：10912663
> 
> 赞同：5
> 
> 时间：2012-06-06T10:46:05.580
> 
> 标签：mysql, join

我正在尝试使用其中的 select 运行 mysql 更新查询，但出现错误。查询是这样的：

```
UPDATE keywords_stats_google_temp SET (Impressions_chg, Clicks_chg, AveragePosition_chg, Ctr_chg, AverageCpc_chg, CurrentMaxCpc_chg, FreeJoins_chg, PaidJoins_chg) = (SELECT 
                SUM(Impressions) AS Impressions,
                SUM(Clicks) AS Clicks,
                SUM(Impressions*AveragePosition)/SUM(Impressions) AS AveragePosition,
                (SUM(Clicks)*revenue_price)/SUM(Impressions) AS Ctr,
                SUM(Spend)/SUM(Clicks) AS AverageCpc,
                CurrentMaxCpc,
                SUM(free_joins) AS FreeJoins,
                SUM(paid_joins) AS PaidJoins
                FROM (SELECT KeywordId FROM keywords_stats_google_temp) a JOIN keywords_stats_google_naughtymeetings b ON b.KeywordId = a.KeywordId WHERE b.TimePeriod >= '2012-04-01 00:00:00'
                AND b.TimePeriod <= '2012-04-23 00:00:00' GROUP BY a.KeywordId, MatchType) 
```

但我只收到“#1064 - 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 '(Impressions_chg, Clicks_chg, AveragePosition_chg, Ctr_chg, AverageCpc_chg, Curr' 附近使用的正确语法在第 1 行"

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T11:08:11.263

你不能`SET (a,b) = (value_a, value_b)`在 MySQL 中拥有。

重写查询。像这样的东西：

```
UPDATE 
    keywords_stats_google_temp AS u
  JOIN
    ( SELECT 
          SUM(Impressions) AS Impressions,
          SUM(Clicks) AS Clicks,
          SUM(Impressions*AveragePosition)/SUM(Impressions) AS AveragePosition,
          (SUM(Clicks)*revenue_price) / SUM(Impressions) AS Ctr,
          SUM(Spend)/SUM(Clicks) AS AverageCpc,
          CurrentMaxCpc,
          SUM(free_joins) AS FreeJoins,
          SUM(paid_joins) AS PaidJoins
      FROM keywords_stats_google_naughtymeetings AS b  
      WHERE b.TimePeriod >= '2012-04-01 00:00:00'
        AND b.TimePeriod <= '2012-04-23 00:00:00' 
      GROUP BY KeywordId, 
               MatchType
    ) AS tmp
        ON  tmp.KeywordId = u.KeywordId 
        AND tmp.MatchType = u.MatchType
SET 
  u.Impressions_chg     = tmp.Impressions, 
  u.Clicks_chg          = tmp.Clicks, 
  u.AveragePosition_chg = tmp.AveragePosition, 
  u.Ctr_chg             = tmp.Ctr,
  u.AverageCpc_chg      = tmp.AverageCpc, 
  u.CurrentMaxCpc_chg   = tmp.CurrentMaxCpc, 
  u.FreeJoins_chg       = tmp.FreeJoins, 
  u.PaidJoins_chg       = tmp.PaidJoins ; 
```

# java - 在 Java 中将 IST 转换为 GMT 时出现问题

> ID：10912664
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:11.517
> 
> 标签：java

将 IST 转换为 GMT 时遇到奇怪的问题。除下午 5:30 和下午 6:30 外，转换全天候工作正常。在此期间，不是将时间转换为 12:00:00，而是将其转换为 00:00:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:20:57.927

我在这个答案中使用 24 小时制来保持清晰。

您确定要从 IST 17:30 转换吗？如果您实际上是在转换 05:30（即早上五点三十分），那将是格林威治标准时间午夜。在 24 小时制中，午夜是 00:00，所以这一切都会加起来。

然而，这并不能解释从 06:30 开始的转换，这将是格林威治标准时间 01:30。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:01:01.633

好的，所以我猜 IST 表示印度标准时间；即格林威治标准时间 + 5:30。

因此，IST 下午 5:30 将是格林威治标准时间中午 12 点，使用传统的 24 小时时钟是 12:00:00。（或者他们过去所说的“铁路时间”。）

如果没有您的任何进一步输入，我最好的猜测是您的时间处理代码中存在一些错误（例如，输入时间不是您认为的那样），或者区域设置有一些奇怪的影响时间的显示方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T08:11:40.973

# windows - 访问 localhost 时，IIS 要求输入用户名和密码

> ID：10912666
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:14.020
> 
> 标签：windows, iis

我已经在`Windows XP SP3`. 当我想从浏览器访问 localhost 时，会出现身份验证窗口并询问用户名和密码。为`IUSR_`用户启用了匿名访问，并且该用户对`wwwroot`文件夹具有完全控制权限。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:51:29.650

您已将您的网站设置为使用集成 Windows (NTLM) 身份验证，IE 默认支持该身份验证，但 Firefox 不支持该身份验证。Firefox 要求您逐个站点允许 NTLM。

[本页](http://support.mozilla.org/en-US/kb/Firefox%20asks%20for%20user%20name%20and%20password%20on%20internal%20sites)介绍如何在 Firefox 中启用 NTLM 和删除登录框。

基本上，您需要`about:config`在地址栏中键入并将主机名添加到设置的逗号分隔值列表中`network.automatic-ntlm-auth.trusted-uris`。

假设您有两个要启用 NTLM 身份验证的站点：[http://www.foo.com/](http://www.foo.com/)和[http://www.bar.com/](http://www.bar.com/)。您需要设置`network.automatic-ntlm-auth.trusted-uris`为`www.foo.com, www.bar.com`.

如果您希望匿名用户可以访问您的网站，则需要确保您的 IUSR_xxx 帐户至少对您的网站在文件系统级别提供的文件具有读取权限。您可以通过 Windows 资源管理器执行此操作。我认为您还需要授予对父目录的列表权限。

# c# - 通过按钮动态更改网站主题

> ID：10912667
> 
> 赞同：1
> 
> 时间：2012-06-06T10:46:14.793
> 
> 标签：c#, asp.net, visual-web-developer

我一直在学习一点 asp.net 并且我一直对整个动态主题更改遇到问题，我一直在关注一本教如何通过下拉菜单进行操作的书，但我想挑战自己并用按钮来做。

我的网站有 2 个主题，因此有两个按钮代表每个主题（orangefresh 和 greenfresh），这是我的母版页代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class mpage : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            string selectedTheme = Page.Theme;
            HttpCookie webtheme = Request.Cookies.Get("webtheme");
            if (webtheme != null)
            {
                selectedTheme = webtheme.Value;
            }

        }
    }
    protected void orangefresh_Click(object sender, EventArgs e)
    {
        HttpCookie webtheme = new HttpCookie("webtheme");
        webtheme.Expires = DateTime.Now.AddMonths(3);
        webtheme.Value = "orangefresh";
        Response.Cookies.Add(webtheme);
        Response.Redirect(Request.Url.ToString());
    }

    protected void greenfresh_Click(object sender, EventArgs e)
    {
        HttpCookie webtheme = new HttpCookie("webtheme");
        webtheme.Expires = DateTime.Now.AddMonths(3);
        webtheme.Value = "greenfresh";
        Response.Cookies.Add(webtheme);
        Response.Redirect(Request.Url.ToString());
    }
} 
```

这是我的基本页面：

```
using System;
using System.Web;
public class BasePage : System.Web.UI.Page
{
private void Page_PreInit(object sender, EventArgs e)
{
HttpCookie webtheme = Request.Cookies.Get("webtheme");
if (webtheme != null)
{
    Page.Theme = webtheme.Value;
}
}
public BasePage()
{
    this.PreInit += new EventHandler(Page_PreInit);
}
} 
```

鉴于我没有使用 cookie 的经验，我决定从一开始就查看代码，我测试了 Click 事件是否在 cookie 上存储了一个值，我在网站上创建了一个 Label 并将它的 .Text 属性赋予 cookie .Value，什么也没发生。所以我开始删除代码以查看是什么停止了事件，我发现这一行......

```
 Response.Redirect(Request.Url.ToString()); 
```

……对此负责。只是为了它，我删除了那一行并再次测试了我的网站，但主题仍然没有变化。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:42:27.307

固定的。我忘记进行更改，以便我在继承 BasePage 中测试的页面......它继承了默认页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:26:37.250

检查以下链接

[http://www.codeproject.com/Articles/18300/How-to-change-page-theme-in-asp-net-2-0-dynamicall](http://www.codeproject.com/Articles/18300/How-to-change-page-theme-in-asp-net-2-0-dynamicall)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:12:07.103

**一切正常..**
您的主题可能存在问题。在页面级别检查它们（如 Duane 所说！！）。尝试这个..

`<%@ Page Title="" Language="C#" MasterPageFile="~/mpage.master" AutoEventWireup="true" CodeFile="index.aspx.cs" Inherits="index" Theme="orangefresh"%>`

# sql - 在 Sql 中更新字符串

> ID：10912672
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:32.950
> 
> 标签：sql, sql-server, regex, sql-server-2008, tsql

我正在寻找为特定列更新多个字符串中的一个单词。

例如;

```
Update Column A = 'This is a line of text.'
To 'This is a string of text.' 
```

其中 A 列可能在数据库中出现多次。显然我只能说；

```
Update
    TABLE
Set
    A = 'This is a string of text.'
Where
    A = 'This is a line of text.' 
```

但我很好奇一种更好的方式，也许使用正则表达式？类似的东西；

```
Update
    TABLE
Set
    A = [First Part of A] + 'string' + [Second Part of A]
Where
    A = 'This is a line of text.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:58:17.047

用这个：

```
A = REPLACE(A, 'string', 'line') WHERE A LIKE '%line%' 
```

# soundcloud - Soundcloud JS 自定义播放器 - 如何将场景拆分为最小皮肤的轨道？

> ID：10912673
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:33.323
> 
> 标签：soundcloud

我正在尝试自定义 JS 自定义播放器包中包含的 sc-player-minimal.html 示例。

默认操作是您必须在 html 中将多个 soundcloud 链接添加到**单个曲目**，并且在加载时会为每个曲目显示一个 wav 播放器。

我想做的只是添加一个链接到一个集合而不是多个轨道，并让播放器将轨道从集合中分离出来，然后用一个单独的 wav 播放器呈现集合中的所有轨道。目前它只是创建一个只有一个播放器的曲目列表。

任何帮助或想法将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:27:15.267

没有预先打包的方法来执行此操作，但您可以使用 API 获取设置信息，然后将每个轨道的链接动态写入页面，然后让插件完成它的工作。

# php - Zend PHP - 带有 fetchOne 的 sqlsrv 插入和 Select_Scope()

> ID：10912675
> 
> 赞同：0
> 
> 时间：2012-06-06T10:46:35.523
> 
> 标签：php, sql-server, zend-framework, zend-db

我正在使用 PHP 和 Zend 框架创建一个网站。我正在使用 sqlsrv 适配器与我的数据库通信。我正在尝试编写插入查询并存储新行的 ID。我写了一个这样的 SQL 查询：

```
$db = Zend_Db_Table::getDefaultAdapter();               
$id = $db->fetchOne("
    INSERT INTO    MyTable
    (Title, CreatedBy, Created, LastUpdatedBy, LastUpdated)
    SELECT  'MY Title',
        UserTable.UserId,
        CONVERT(datetime, '".$this->details["Created"]."', 120),
        UserTable.UserId,
        CONVERT(datetime, '".$this->details["LastUpdated"]."', 120)
    FROM    UserTable
    WHERE   UserName = '".$this->details["CreatedBy"]."'
    SELECT  CAST(SCOPE_IDENTITY() AS int) AS Id"
); 
```

但它会产生此错误：

```
'Zend_Db_Statement_Sqlsrv_Exception' with message 'The active result for the query contains no fields. 
```

如何避免此错误并运行此查询并检索插入的行 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:50:19.393

您似乎在这里使用了错误的方法。

您应该使用[`insert()`](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.insert) Zend_Db_Table 的方法：-

```
$table = new Zend_DB_Table(array('name' => 'mytable', primary => 'myPrimaryKey'));
$data = array()// of data to be inserted
$id = $table->insert($data); 
```

# asp.net - 轮询非专用 Windows 服务器内的访问数据库

> ID：10912685
> 
> 赞同：2
> 
> 时间：2012-06-06T10:47:03.890
> 
> 标签：asp.net, service, windows-server-2008

我们有一个在 ASP.NET 上运行的网站。我想运行一个服务，每 XX 小时检查一次数据库表，如果不满足某些条件，则执行一个操作（发送邮件）。

我们不能使用

1.  作为托管服务器的 Windows 服务不是专用服务器。（我们只有控制面板）
2.  用于发送邮件的 SQL 服务，因为我们使用 Access 2003 (mdb) 作为我们的数据库。它位于 App_Data
3.  IIS 也不可用

我们需要在服务器中进行某种轮询，这一点非常关键。
我们现在有点卡住了。我们有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:59:52.823

您可以使用一个技巧来仅使用您的 ASP.NET Web 服务来模拟 Windows 服务。

它的要点如下：

在缓存中放置一个项目，其有效期等于您希望轮询数据库的频率。

添加从缓存中删除项目时触发的回调。在回调方法中，添加你的轮询代码来做你想做的事情（调用访问数据库、发送邮件等）

所以：在你的全局 asax 中，是这样的：

```
private const string DummyCacheItemKey = "pollingCacheKey";

protected void Application_Start(Object sender, EventArgs e)
{
    RegisterCacheEntry();
}

private bool RegisterCacheEntry()
{ 
    if( null != HttpContext.Current.Cache[ DummyCacheItemKey ] ) return false;

    HttpContext.Current.Cache.Add( DummyCacheItemKey, "Test", null, 
       DateTime.MaxValue, TimeSpan.FromMinutes(1), 
       CacheItemPriority.Normal,
       new CacheItemRemovedCallback( CacheItemRemovedCallback ) );

    return true;
}

public void CacheItemRemovedCallback( string key, 
        object value, CacheItemRemovedReason reason)
{
    Debug.WriteLine("Cache item callback: " + DateTime.Now.ToString() );

    // Do the service works

    DoWork();

    ReregisterCacheItem();
} 
```

虽然它并不理想，但它符合您的限制。

该技术的完整细节可以在这里找到：http: [//www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:55:28.487

它在这里提到

[ASP.NET 中的简单后台任务](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

这是该链接的一些片段

```
private static CacheItemRemovedCallback OnCacheRemove = null;

protected void Application_Start(object sender, EventArgs e)
{
    AddTask("DoStuff", 60);
}

private void AddTask(string name, int seconds)
{
    OnCacheRemove = new CacheItemRemovedCallback(CacheItemRemoved);
    HttpRuntime.Cache.Insert(name, seconds, null,
        DateTime.Now.AddSeconds(seconds), Cache.NoSlidingExpiration,
        CacheItemPriority.NotRemovable, OnCacheRemove);
}

public void CacheItemRemoved(string k, object v, CacheItemRemovedReason r)
{
    // do stuff here if it matches our taskname, like WebRequest
    // re-add our task so it recurs
    AddTask(k, Convert.ToInt32(v));
} 
```

> 在我的测试中运行良好；徽章每 60 秒颁发一次，就像所有 > 用户的发条一样 - [Jeff Atwood](https://blog.stackoverflow.com/author/admin/)

# magento - 我需要为多站点安装两个单独的 Magento 吗？

> ID：10912686
> 
> 赞同：0
> 
> 时间：2012-06-06T10:47:04.090
> 
> 标签：magento

一个多星期以来，我一直在尝试在 Magento 中设置多站点多域设置。而且没有成功！我首先尝试在本地主机上执行此操作，然后尝试在实时服务器（共享主机）上执行此操作。

我按照本教程[http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)但没有任何反应。

有人可以回答我的基本问题吗？我需要两个单独的 Magento 安装来执行多站点多域设置还是只需要一个具有两个域的安装？我很困惑。请帮忙！

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:25:26.160

您可以在一次安装中运行多个 Magento 商店。线索在 中`index.php`，特别是：

```
/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : 'default';

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run($mageRunCode, $mageRunType); 
```

`$mageRunCode`定义了我们正在初始化的商店或网站的代码（在管理区域的部分中定义）`Manage Store`。定义了`$mageRunType`我们是要初始化一个商店还是一个网站。

如您所见，Magento 首先检查适当的值作为环境变量。以 apache 为例，这些变量的值需要在`VirtualHost`您的部分`httpd.conf`或类似部分中设置。`SetEnv`我们使用指令设置环境变量：

```
SetEnv MAGE_RUN_TYPE website
SetEnv MAGE_RUN_CODE website_code_001 
```

我们可以`DocumentRoot`对所有域使用相同的值，因为我们允许根据请求的主机名`VirtualHost`切换值。`$_SERVER['MAGE_RUN_{CODE,TYPE}']`

# java - 在 Java 中模拟单击提交按钮

> ID：10912688
> 
> 赞同：0
> 
> 时间：2012-06-06T10:47:07.187
> 
> 标签：java, http-request

我正在用Java编写程序，我想填写表单的指定字段，模拟提交点击，所以得到结果页面。我在`http://stu21.kntu.ac.ir/Login.aspx` 有两个字段`txtusername`和`txtpassword`. 我正在尝试如下代码，但它没有为我返回结果页面。我该怎么做 ？我在这段代码中有什么问题？

```
 DefaultHttpClient conn = new DefaultHttpClient();
        conn = new DefaultHttpClient();

        ArrayList<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("txtusername", "8810103"));
        pairs.add(new BasicNameValuePair("txtpassword", "8810103"));

        HttpPost httpPost = new HttpPost("http://stu21.kntu.ac.ir/Login.aspx");
        UrlEncodedFormEntity entity = new UrlEncodedFormEntity(pairs,
                "UTF-8");

        httpPost.setHeader(
                "UserAgent",
                "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19");

        httpPost.setEntity(entity);
        HttpResponse response = conn.execute(httpPost);
        InputStream is = response.getEntity().getContent();
        RandomAccessFile raf = new RandomAccessFile(
                "/home/hossein/Desktop/random.aspx", "rw");
        raf.seek(0);

        int bytes = 0;
        byte[] buffer = new byte[1024];

        while ((bytes = is.read(buffer)) != -1)
            raf.write(buffer, 0, bytes);

        raf.close();
        is.close(); 
```

抱歉，如果我的问题与其他线程重复，我无法在其他线程上找到我的解决方案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:53:11.793

我认为您需要[HTTPUnit](http://httpunit.sourceforge.net/doc/tutorial/index.html)。[javaworld](http://www.javaworld.com/javaworld/jw-04-2004/jw-0419-httpunit.html)有一个很好的教程。

看看下面的例子：

```
public void testGoodLogin() throws Exception {
    WebConversation     conversation = new WebConversation();
    WebRequest  request = new GetMethodWebRequest( "http://www.meterware.com/servlet/TopSecret" );
    WebResponse response = conversation.getResponse( request );

    WebForm loginForm = response.getForms()[0];
    request = loginForm.getRequest();
    request.setParameter( "name", "master" );

    // "clicking the button" programatically
    response = conversation.getResponse( request );

    assertTrue( "Login not accepted", 
               response.getText().indexOf( "You made it!" ) != -1 );
    assertEquals( "Page title", "Top Secret", response.getTitle() );
} 
```

我相信您可以像这样进行测试。

# tableview - 从模型中自动更新 TableView 中的行

> ID：10912690
> 
> 赞同：6
> 
> 时间：2012-06-06T10:47:14.853
> 
> 标签：tableview, javafx-2

我一直在寻找有关将数据刷新到表格视图中的信息。我试图直接修改模型，但我得到了一个错误。我修改了模型，但表格没有刷新，只有当我移动一列时，表格才会显示修改后的值。

为了给你看一个例子（13-6），我学习了这个教程：

[http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJABIEED](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJABIEED)

我对其进行了修改，包括一个按钮及其操作：

```
Button button = new Button("Modify");
button.setOnAction(new EventHandler<ActionEvent>() {
@Override
public void handle(ActionEvent arg0) {
    String name = table.getItems().get(0).getFirstName();
    name = name + "aaaa";
    table.getItems().get(0).setFirstName(name);
    }
});

final VBox vbox = new VBox();
vbox.setSpacing(5);
vbox.getChildren().addAll(label, table, button);
vbox.setPadding(new Insets(10, 0, 0, 10)); 
```

我猜这是表格视图中的一个错误，但有没有机会解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T12:37:37.587

要使 TableView 能够跟踪数据更改，您需要将相关字段公开为 JavaFX 属性。将下一个方法添加到`Person`教程中的类：

```
 public SimpleStringProperty firstNameProperty() {
        return firstName;
    }

    public SimpleStringProperty lastNameProperty() {
        return lastName;
    }

    public SimpleStringProperty emailProperty() {
        return email;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T00:23:42.417

There is a bug in TableView update ([https://javafx-jira.kenai.com/browse/RT-22463](https://javafx-jira.kenai.com/browse/RT-22463)). I had similar problem and after some search this is my workaround. I found that if the columns are removed and then re-added the table is updated.

```
public static <T,U> void refreshTableView(TableView<T> tableView, List<TableColumn<T,U>> columns, List<T> rows) {        
    tableView.getColumns().clear();
    tableView.getColumns().addAll(columns);

    ObservableList<T> list = FXCollections.observableArrayList(rows);
    tableView.setItems(list);
} 
```

Example of usage:

```
refreshTableView(myTableView, Arrays.asList(col1, col2, col3), rows); 
```

# javascript - 如何将数组值推送到不同的数组？

> ID：10912692
> 
> 赞同：0
> 
> 时间：2012-06-06T10:47:22.530
> 
> 标签：javascript, jquery, arrays

我有一个包含键和值的数组，我想将哪些元素推入 2 个不同的数组（键入一个，值入另一个）

这是我使用的代码：

```
// the array i want to split
var defaultc = {
    'a':'r019',
    'b':'r027',
    'c':'r027',
    'd':'r027',
    'e':'r047'
};
// the array i want to add to
var step_layer = []; // keys to this
var step_colour = {}; // values to this

$('#reset').click(function() {
    $.each(defaultc, function(layer, colour) {

        // both these functions are working properly
        apply_changes(layer, colour);
        sumary(layer, colour);
    });

    // this part is not
    for (var layer in defaultc) {
        if (!defaultc.hasOwnProperty(layer)) {
        step_layer.push(layer);
        step_colour[layer].push(colour);
    }}
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:55:46.207

```
var defaultc = {
    'a':'r019',
    'b':'r027',
    'c':'r027',
    'd':'r027',
    'e':'r047'
};

var step_layer = []; // keys to this
var step_colour = []; // values to this

for(var key in defaultc) {
   setip_layer.push(key);
   step_colour.push(defaultc[key]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:53:47.117

你有一个对象，而不是一个数组。它很简单：

```
var step_layer = Object.keys(defaultc); // array of property names
var step_colour = Object.values(defaultc); // arrray of property values 
```

但作为`.values`一种非标准方法，[`.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)仅在现代浏览器上可用并且对象属性的迭代顺序不固定，您应该在对象上使用单个循环：

```
var step_layer = []; // array of property names
var step_colour = []; // arrray of property values
for (var layer in defaultc) {
    step_layer.push(layer);
    step_colour.push(defaultc[layer]);
} 
```

这就是您的代码不同的地方。首先，您从`var step_colour = {};`. 这又是一个对象，用于键值映射。因此，甚至可以使用 访问它的属性`step_colour[layer]`，但这仍然是`undefined`。您似乎认为它将是一个数组，`.push`在其上使用 - 这将引发错误（查看您的调试控制台）。我不确定你想用它来实现什么。创建一个数组，克隆`defaultc`变量？

另一个问题是`if (!defaultc.hasOwnProperty(layer))`。首先，你`defaultc`是一个普通的对象，不继承任何可枚举的属性，所以只要离开那个条件。其次，由于`layer`您循环的所有 s*都是*的自己的属性`defaultc`，因此该块将永远不会被执行。

# mysql - MySQL数据库中所有行的精确计数

> ID：10912693
> 
> 赞同：9
> 
> 时间：2012-06-06T10:47:23.450
> 
> 标签：mysql, sql, database, innodb

我目前正在使用脚本

```
SELECT SUM(TABLE_ROWS) FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'Tables'; 
```

然而，这并不准确，因为我的 MySQL 表使用的引擎是 InnoDB（我现在才意识到这可能是一个问题，因为这些数据库已经存在了一段时间）。

有什么方法可以用 MySQL 准确计算数据库每个表中的每一行？

干杯。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T10:52:21.803

我认为唯一准确（且较慢）的方法是为每个表做：

```
SELECT COUNT(*) FROM Table 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T01:37:43.533

这条 SQL 语句会生成一个联合查询，可以一步完成任务：

```
SELECT CONCAT('SELECT \'', table_name ,'\' as tbl, (SELECT COUNT(*) FROM ', table_name, ') AS ct UNION')
FROM information_schema.tables
WHERE table_schema = 'your_database'; 
```

运行 SQL 语句后，只需将输出粘贴到文本编辑器中，从输出末尾删除单词“UNION”，您将获得联合查询。

请注意，运行联合查询可能会占用大量资源，具体取决于您的数据库大小、负载和硬件，因此您可能不想一次全部运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T14:40:50.583

我遇到了同样的问题，导致我提出了这个问题。

感谢computerGuy12345的回答，我想出了一个存储过程，无需复制粘贴即可。正如他所说，请注意这将扫描每个表并且可能需要一段时间。

```
DELIMITER $$

CREATE PROCEDURE `all_tables_rowcount`(databaseName VARCHAR(250))
BEGIN
DECLARE p_done INT DEFAULT FALSE;
DECLARE p_queryString varchar(250) ;
DECLARE p_cur CURSOR FOR SELECT queryString FROM tmp.tableCountQueries;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET p_done = TRUE;

DROP TEMPORARY TABLE IF EXISTS tmp.tableCountQueries;
DROP TEMPORARY TABLE IF EXISTS tmp.tableCounts;

CREATE TEMPORARY TABLE tmp.tableCounts(TableName varchar(250), RowCount BIGINT) ;

CREATE TEMPORARY TABLE tmp.tableCountQueries(queryString varchar(250)) AS 
(
    SELECT CONCAT(
        'INSERT INTO tmp.tableCounts(TableName, RowCount) SELECT "', 
        table_name, 
        '", COUNT(*) AS RowCount FROM ', 
        table_schema,
        '.',
        table_name
    ) AS queryString
    FROM INFORMATION_SCHEMA.TABLES 
    WHERE table_schema = databaseName
) ;

OPEN p_cur;

read_loop: LOOP
    FETCH p_cur INTO p_queryString;
    IF p_done THEN
      LEAVE read_loop;
    END IF;
    SET @queryString = p_queryString ;
    PREPARE rowcountTable FROM @queryString; 
    EXECUTE rowcountTable ;
END LOOP;

SELECT * FROM tmp.tableCounts ;
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T13:24:19.180

`Select Sum(column_Name) from table`，不能给出表中行的准确计数，它会给出总行数+1，也会给出下一个数据插入行。还有一件事是，在`sum(Column_Name)` column_Name 中应该是 int ，如果它是 varchar 或 char sum 函数将不起作用。soo 最好的方法是 `Select Count(*) from table` 用来获取表中的确切行数。

ThnQ,

文卡特

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T17:45:49.637

```
select table_name,table_rows from INFORMATION_SCHEMA.TABLES where TABLE_SCHEMA='database name'; 
```

**table_name**表示“数据库”中存在的表数

**table_rows**表示每列中的行数

**table_schema**是数据库名称。您要从哪个数据库中查找计数

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-06T11:46:36.853

这对我有用

```
 <?php 

             mysql_connect("localhost", "root", "pass") or die(mysql_error());

             mysql_select_db("csl") or die(mysql_error());

             $dtb=mysql_query("SHOW TABLES") or die (mysql_error()); 

             $jmltbl=0; $jml_record=0; $jml_record=0; $total =0;

             while($row=mysql_fetch_array($dtb)) 

    { 

 $sql=mysql_query("select * from $row[0]");

 $jml_record=mysql_num_rows($sql);

 $total += $jml_record;   // this counts all the rows

 $jmltbl++; $jml_record+=$jml_record;

    } 
      // echo"--------$jmltbl Tables, $jml_record records."; // will print count of indivual table

echo $total;  // this will print you count of all rows in MySQL database 

       ?> 
```

我已经测试了这段代码及其作品

为我输出 1145

# javascript - Javascript顺利移动一个div并让另一个出现

> ID：10912695
> 
> 赞同：0
> 
> 时间：2012-06-06T10:47:42.693
> 
> 标签：javascript, animation, html, smooth

我正在尝试创建一个站点，您可以在其中单击菜单中的链接，然后菜单下方的 div**平滑地**向下移动，当它到达该位置时，文本应该出现在新的间隙中。

我目前正处于学习 js 的开始阶段，所以不要期望那么多。不知何故，动画无法正常工作，而使用 setInterval 我无法做到。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style>
    /* CSS Document */
    #container{
        border: 1px solid #339999;  
        width: 798px;
    }
    #top{
        background-image:url(images/background1.jpg);
        width: 800xp;
        height: 289px;
        background-repeat:no-repeat;
    }
    #bot{
        background-image:url(images/background2.jpg);
        width: 800xp;
        height: 250px;
        background-repeat:no-repeat;
        margin-top:0px;
    }
    ul.menu{
        list-style-type: none;
        padding-left: 30px;
        font-size:13pt;
        font-family: FrizQuadrata, Calibri;
        color: #339999;
    }
    ul.menu li{
        display:inline;
    }
    #text{
    }
    #footer{
        font-size: 16px;
        color: white;
        font-family: FrizQuadrata, Calibri;
        position: relative;
        top: 150px;
        left: 450px;
    }
    .title{
        font-size:48px;
        color: #339999;
        font-family: FrizQuadrata, Calibri;
    }
    .subtitle{
        font-size:33px;
        color: #339999;
        font-family: FrizQuadrata, Calibri;
    }
    #logo{
        position: relative;
        top: 10px;
        left: 500px;
    }
    ul li a{
        text-decoration: none;
        color: inherit;
    }
    #d0{
    height:80px;
    }
    #d1{
    height:80px;
    }
    #d2{
    height:80px;
    }
    #d3{
    height:80px;
    }
</style>

<script type="text/javascript">
var finished = false;
var timeout = null;
function OpenSite(site, finished){
    menu = document.getElementById(site);
    bot = document.getElementById('bot');
    marg = bot.style.marginTop;
    sheight = menu.offsetHeight;
    marg = marg.slice(0,-2);
    intmarg = parseInt(marg, 10);
    intheight = parseInt(sheight, 10);
    bot.style.marginTop = intmarg + 2 + 'px';
    if (intmarg > intheight) {
        finished = true;
    }
    if(finished == false){
        timeout = setTimeout('OpenSite(site, finished)', 500);
        clearTimeOut(timeout)
    }
}
</script> 

</head>

<div id="container">
    <div id="top">
        <div id="logo">
            <span class="title">INTERPRESA</span><br />
            <span class="subtitle">Consulting GmbH</span>
        </div>
    </div>
    <div id="text">
        <ul class="menu">
            <li><a href="javascript:OpenSite('d0', false)">Projektmanagement</a>&nbsp; &nbsp; </li>
            <li><a href="javascript:OpenSite('d1', false)">Unternehmensberatung</a> &nbsp; &nbsp; </li>
            <li><a href="javascript:OpenSite('d2', false)">Interimsmanagement</a>  &nbsp; &nbsp; </li>
            <li><a href="javascript:OpenSite('d3', false)">Finanzwesen</a></li>
        </ul>

        <div id="d0">
        d0<br /><br /><br /><br />
        </div>
        <div id="d1">
        d1<br /><br /><br /><br />
        </div>
        <div id="d2">
        d2<br /><br /><br /><br />
        </div>
        <div id="d3">
        d3<br /><br /><br /><br />
        </div>
    </div>
    <div id="bot" style="margin-top:0px;">
        <div id="footer">
            <table cellpadding="3">
                <tr>
                    <td>Schützenegg 956&nbsp;&nbsp;·</td>
                    <td>5728 Hontenschwil</td>
                </tr>
                <tr>
                    <td> Tel. 062 773 80 00 ·</td>
                    <td> Fax 062 773 80 05</td>
                </tr>
                <tr>
                    <td colspan="2">info@interpresa.ch</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:24:29.447

我在运行 Firebug 的 Firefox 中打开了该页面，以查看我能看到的内容。

## 错误

点击项目管理

clearTimeOut 未定义

我不知道 clearTimeOut 函数是什么，也不知道你想用它做什么，但是 Firefox 无法识别它，所以让我们重新开始。

## 阶段1

检查基本错误和问题：

请注意，在文件的底部，您放置了一个空的 body 元素，并且您将所有 div 元素放在了 body 元素之外。我不知道这是否是导致问题的原因，但这很奇怪。

奇怪的全局变量以及如何声明变量：

我不知道你为什么声明`finished`为全局变量。您将它用作`OpenSite`函数中的参数，因此它是局部作用域的，因此这个全局变量是多余的。同样`timeout`。您实际上根本不需要它，但是如果您这样做了，本地范围的变量就可以了。

在函数范围内声明变量时，一定要使用单词`var`，否则会变成全局变量。在函数顶部的一个逗号分隔语句中声明它们。如果你不这样做，声明无论如何都会被提升到函数的顶部，所以你最好把它们放在首位，使代码尽可能地可读。

命名约定：

`OpenSite`是一个函数而不是一个构造函数，所以应该是骆驼的情况： `openSite`

我也将变量更改`intmarg`为`intMarg`. 它们更具可读性。

## 第二阶段

将标记与脚本分开

我知道您只是从 javascript 开始，但最好从 Good Parts（参见 Doug Crockford 的书）和最佳实践开始。将您的 javascript 代码放入一个单独的文件中。

我已将您的原始页面分成 2 个文件：animation.html animation.js

在 html 元素中嵌入 javascript 不是一个好习惯。我们通常以编程方式将事件侦听器添加到元素。但是，您没有使用像 YAHOO 的 YUI 或 jQuery 这样的知名库之一，所以我不想以编程方式添加事件处理程序变得过于复杂。

我认为如果您将事件处理程序添加到每个菜单项的 onclick 事件而不是使用 href 属性会更清楚。使用 javascript 协议不是一个好习惯。不记得细节，但我认为这是一个安全风险。

因此，通过向 onclick 事件添加处理程序来更改菜单项。更改 css 以便在将鼠标悬停在菜单项上时获得指针光标： ul li a{ text-decoration: none; 颜色：继承；光标：指针；}

我更改了一些其他 css 细节只是为了更容易看到发生了什么。

## 第三阶段

采取婴儿步骤。注释掉 OpenSite 函数中的所有内容，一次添加一行。使用 alert 来检查每一行是否符合您的预期。

```
alert(site); 
```

然后：

```
menu = document.getElementById(site);
alert(menu.offsetHeight); 
```

然后：

```
menu = document.getElementById(site);
bot = document.getElementById('bot');
marg = bot.style.marginTop;
alert(marg); 
```

等等

请注意，marg 的值为“0px”。您显然意识到这不是一个数字，因为您稍后会调用 parseInt。但是之后：

```
menu = document.getElementById(site);
bot = document.getElementById('bot');
marg = bot.style.marginTop;
//marg.slice(0,-2);
marg = parseInt(marg);
alert(marg); 
```

我想你正试图用那个奇怪的`slice`电话从 marg 中删除“px”。我敢肯定你在某处搞混了参数。为什么不立即调用 parseInt 呢？

## 第 4 阶段

在阅读了[平滑的 javascript 动画](https://stackoverflow.com/questions/1322228/smooth-javascript-animation)后，我将`openSite`函数与`move`函数分开，以避免重复调用`getElementById`等。

## 第 5 阶段

我减少了 setTimeout 的时间间隔并使用了值。对我来说，每毫秒调用`move`一次似乎更生涩，每 24 毫秒一次是最流畅的，但你可以自己尝试一下。

## 第 6 阶段

考虑非常认真地使用像 jQuery 或 YUI 这样的现代框架，因为坦率地说，动画不适合新手程序员，而无休止的跨浏览器怪癖最好留给有经验的程序员团队。

## 最终点

我已将其版本上传到[http://selfstudy-online.co.uk/js/animation.html](http://selfstudy-online.co.uk/js/animation.html)。让我知道它是否回答了您的一些问题，或者至少让您走上了正确的道路。我对我的版本的流畅度不满意，这似乎是你问题的一个关键因素。由于我没有您的背景图像的副本，因此尚不完全清楚最终的外观和感觉将如何工作。你有第一次尝试上传的版本吗？

# postgresql - 无法删除数据库

> ID：10912697
> 
> 赞同：8
> 
> 时间：2012-06-06T10:47:43.027
> 
> 标签：postgresql, psql

我是 PostgreSQL 新手，对我认为简单的命令`DROP DATABASE`和`DROPDB`. 为什么以下命令不会删除我的数据库？

```
postgres=# drop database clientms
postgres-# \l
                                    List of databases
   Name    |    Owner     | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+--------------+----------+-------------+-------------+-----------------------
 clientms  | clientmsuser | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 postgres  | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 template0 | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |              |          |             |             | postgres=CTc/postgres
 template1 | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |              |          |             |             | postgres=CTc/postgres
(4 rows)

postgres-# dropdb clientms
postgres-# \l
                                    List of databases
   Name    |    Owner     | Encoding |   Collate   |    Ctype    |   Access privileges   
-----------+--------------+----------+-------------+-------------+-----------------------
 clientms  | clientmsuser | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 postgres  | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 template0 | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |              |          |             |             | postgres=CTc/postgres
 template1 | postgres     | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres          +
           |              |          |             |             | postgres=CTc/postgres
(4 rows) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-06T10:51:00.663

您忘记了命令后的分号`;`。尝试：

```
DROP DATABASE clientms; 
```

不完整的命令也由提示符指示：`-`而不是`=`. 这是为了允许多行命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-26T08:22:22.277

**使用 PGAdmin：** 检查您是否与服务器连接，转到您的数据库并右键单击它并删除数据库。刷新数据库或重新打开服务器！

**手动执行：**

```
$ sudo -u postgres psql
# \l                         // check db in list
# q                          // to quit that menu
# Drop Database <db_name>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-01T20:15:40.917

恼人的是，我已经解决了这个问题，然后在一年后又遇到了它，并以不同的方式解决了它，因为我没有注意到我已经得到了关于如何解决它的注释。这是我的笔记：

[http://www.itsupportforum.net/topic/unable-to-delete-drop-postgresql-database/](http://www.itsupportforum.net/topic/unable-to-delete-drop-postgresql-database/)

总之，我无法删除数据库，因为我用来删除它的接口正在使用它。哑的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:57:06.717

显然`destroydb clientms`有效（虽然花了我很多时间）[[链接]](http://www.yolinux.com/TUTORIALS/LinuxTutorialPostgreSQL.html)

# javascript - jQuery submit() - 仍然发送表单

> ID：10912699
> 
> 赞同：2
> 
> 时间：2012-06-06T10:47:53.130
> 
> 标签：javascript, jquery, submit

我有这个

```
$("#formNewsletter").submit(function(){

                        return false;
                    }) 
```

它按预期工作 - 未提交表单。当我写这篇文章时，它似乎正在返回 true（正在发送表单）

```
$("#formNewsletter").submit(function(){
                        if($("#newsletterSelSpec div").length() > 0)
                        {
                            alert("Good");
                        }
                        else
                        {
                            alert("Please add at least one speciality!");
                        }
                        return false;
                    }) 
```

我想了解为什么会发生这种情况以及如何使其发挥作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:51:15.587

属性长度不是一种方法。

使用`$("#newsletterSelSpec div").length > 0`.

* * *

`preventDefault()`您可以使用第一个参数中的方法来防止事件的默认行为。( `event`)。

```
$("#formNewsletter").submit(function(event) {
    event.preventDefault();

    if($("#newsletterSelSpec div").length() > 0)
        {
            alert("Good");
        }
    else
        {
            alert("Please add at least one speciality!");
        }
}); 
```

* * *

不确定，但问题可能是警报停止了脚本的进程，而不是提交事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:48:48.440

```
$("#formNewsletter").submit(function(e) {

    if ($("#newsletterSelSpec div").length > 0) {
        alert("Good");
    } else {
        e.preventDefault();  // prevent the form submission
        alert("Please add at least one speciality!");
    }
}); 
```

* * *

### 笔记

你正在使用`.length()`，但它应该`.length`只是，这意味着

```
$("#newsletterSelSpec div").length 
```

# objective-c - 使用 iOS Twitter API 递归使用 Objective-c 块

> ID：10912701
> 
> 赞同：5
> 
> 时间：2012-06-06T10:47:59.313
> 
> 标签：objective-c, ios, recursion, twitter, objective-c-blocks

因此，我尝试使用 iOS 5 中内置的 Twitter API 来检索给定用户的所有关注者列表。在我能找到的所有示例文档中，向 API 发出请求，传递内联块以在请求返回时执行，这对于大多数简单的东西来说都很好，但是当我试图获得大约 1000 个关注者时，以及请求正在返回它们以〜100的大小分页，我被困在如何使用完成块内返回和处理的“下一个分页地址”再次递归调用请求。这是代码：

```
- (void)getTwitterFollowers {
    //  First, we need to obtain the account instance for the user's Twitter account
    ACAccountStore *store = [[ACAccountStore alloc] init];
    ACAccountType *twitterAccountType = 
    [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    //  Request access from the user for access to his Twitter accounts
    [store requestAccessToAccountsWithType:twitterAccountType 
                     withCompletionHandler:^(BOOL granted, NSError *error) {
        if (!granted) {
            // The user rejected your request 
            NSLog(@"User rejected access to his account.");
        } 
        else {
            // Grab the available accounts
            NSArray *twitterAccounts = 
            [store accountsWithAccountType:twitterAccountType];

            if ([twitterAccounts count] > 0) {
                // Use the first account for simplicity 
                ACAccount *account = [twitterAccounts objectAtIndex:0];

                // Now make an authenticated request to our endpoint
                NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
                [params setObject:@"1" forKey:@"include_entities"];

                //  The endpoint that we wish to call
                NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/followers.json"];

                //  Build the request with our parameter 
                request = [[TWRequest alloc] initWithURL:url 
                                           parameters:params 
                                        requestMethod:TWRequestMethodGET];

                [params release];

                // Attach the account object to this request
                [request setAccount:account];

                [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    if (!responseData) {
                        // inspect the contents of error 
                        FullLog(@"%@", error);
                    } 
                    else {
                        NSError *jsonError;
                        followers = [NSJSONSerialization JSONObjectWithData:responseData 
                                                                  options:NSJSONReadingMutableLeaves 
                                                                    error:&jsonError];            
                        if (followers != nil) {                          
                            // THE DATA RETURNED HERE CONTAINS THE NEXT PAGE VALUE NEEDED TO REQUEST THE NEXT 100 FOLLOWERS, 
                            //WHAT IS THE BEST WAY TO USE THIS??
                            FullLog(@"%@", followers);
                        } 
                        else { 
                            // inspect the contents of jsonError
                            FullLog(@"%@", jsonError);
                        }
                    }
                }];         
            } // if ([twitterAccounts count] > 0)
        } // if (granted) 
    }];
    [store release];
} 
```

理想情况下，我想要某种方式来监听返回的数据，检查下一页值，如果存在，重用代码块并附加返回的数据。我，当然必须有一个“最佳实践”的方法来实现这一点，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:14:59.837

要递归使用任何块，您必须先声明它，然后再定义它。尝试这个：

```
__block void (^requestPageBlock)(NSInteger pageNumber) = NULL;

requestPageBlock =  [^(NSInteger pageNumber) {
    // do request with some calculations 
    if (nextPageExists) {
        requestPageBlock(pageNumber + 1);
    }
} copy];

// now call the block for the first page
requestPageBlock(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T18:29:46.897

要扩展@Eimantas 的答案，您的请求处理程序需要一个特定的块签名，因此您需要一种不同的方式来处理页码。

```
-(void)getTwitterFollowers {
    // set up request...
    __block int page = 0;
    __block void (^requestHandler)(NSData*, NSHTTPURLResponse*, NSError*) = null;
    __block TWRequest* request = [[TWRequest alloc] initWithURL:url 
                                                     parameters:params 
                                                  requestMethod:TWRequestMethodGET];
    requestHandler = [^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        followers = [NSJSONSerialization JSONObjectWithData:responseData 
                                          options:NSJSONReadingMutableLeaves 
                                            error:&jsonError];            
        if (followers != nil) {                          
            // process followers
            page++;
            NSMutableDictionary *params = [NSMutableDictionary dictionaryWithDictionary:request.parameters];   
            // update params with page number
            request = [[TWRequest alloc] initWithURL:url 
                                          parameters:params 
                                       requestMethod:TWRequestMethodGET];
            [request performRequestWithHandler:requestHandler];
        } 
    } copy];

    // now call the block for the first page
    [request performRequestWithHandler:requestHandler];
} 
```

# c++ - 如何获取特定 WCHAR 字符的代码点？

> ID：10912704
> 
> 赞同：0
> 
> 时间：2012-06-06T10:48:39.217
> 
> 标签：c++, wchar-t

例如我`codepoint`这里需要第 5 个字符，即`ð`

```
const WCHAR* mystring = L"Þátíð"; 
```

我知道它有代码点：`U+00F0`- 但是如何使用 c++ 获取这个整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:23:46.227

Windows 2000 及更高版本中的 WCHAR 是 UTF-16LE，因此按索引访问字符串中的特定字符不一定安全。您应该使用[CharNext](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647469%28v=vs.85%29.aspx)之类的东西来遍历字符串，以正确处理代理对和组合字符/变音符号。

在这个特定示例中，Forgottn 的答案取决于编译器发出的`á`和`í`字符的预组合版本......（对于大多数 Windows 编译器来说，这可能是正确的，移植到 Mac OS 可能是有问题的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:52:09.370

```
const WCHAR myString[] = L"Þátíð";
size_t myStringLength = 0;
if(SUCCEEDED(StringCchLengthW(myString, STRSAFE_MAX_CCH, &myStringLength))
{
    LPCWSTR myStringIterator = myString;
    for(size_t sz = 0; sz < myStringLength; ++sz)
    {
        unsigned int mySuperSecretUnicodeCharacter = *myStringIterator;
        LPCWSTR myNextIterator = CharNext(myStringIterator);
        std::vector<unsigned int> diacriticsOfMySuperSecretUnicodeCharacter(myStringIterator+1, myNextIterator);
        myStringIterator = myNextIterator;
    }
} 
```

编辑1：让它真正起作用

编辑 2：让它实际查找所有代码点

# python - 在 django 中国际化图像

> ID：10912706
> 
> 赞同：3
> 
> 时间：2012-06-06T10:48:47.103
> 
> 标签：python, django, image, internationalization

我将如何根据语言从静态文件夹中实现不同的图像？例如，当访问主站点时，布局将以英语加载，但当更改为日语时，附加到布局的徽标和图像将根据请求的语言而变化。请帮忙.....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T10:52:40.913

您可以创建 iso 文件夹，例如：

```
/static/
  /img/
    /fr/
    /en/
    /us/ 
```

并创建一个模板标记，该标记根据语言环境设置返回语言 iso 前缀，例如：

```
{% static "img"|append_i18n_prefix %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T10:55:20.227

在您的模板中：

```
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %} 
```

然后是徽标等：

```
<img src="{{MEDIA_URL}}{{ LANGUAGE_CODE }}/logo.png" alt="" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T10:50:50.430

您可以将`language`参数传递给页面模板并将其用作媒体文件 URL 的一部分。

这将要求您在一个文件夹中托管所有媒体文件（例如英语）`SITE_MEDIA/english`，而其他（例如日语图像）可以从`SITE_MEDIA/japanese`.

在您的页面模板中，您可以使用`{{MEDIA_URL}}{{language}}/my-image.jpg`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T10:11:52.713

我推荐的方法是拥有您的基本模板（例如 page.html），然后针对差异进行扩展（即 page-fr.html）

在图像需要不同的地方，您有一个模板块，然后在 page-fr.html 中，您可以在该块中放入不同的图像。

这样，如果我们有图像，我们支持不同的语言，但如果我们没有翻译的图像，它仍然使用普通模板。您甚至可以为不同的语言提供不同的文本/布局（如果您愿意或需要，某些语言的文本非常长，可以改变标签的布局）。

然后在视图中，我们让它尝试加载 page-[locale].html（如果存在）（我们可以让它回退到 page-[lang].html 以获取类似 fr-ca 的内容），然后最终回退到 page.html如果存在。

模板页面.html：

```
{% blocktrans %}Some text{% endblocktrans %}
{% block image_one %}<img src='{% static "image_one.png" %}'>{% endblock %} 
```

模板页面-fr.html：

```
{% extends 'page.html' %}
{% block image_one %}<img src='{% static "image_one-fr.png" %}'>{% endblock %} 
```

那么在你看来：

```
context = {'data': data}
templates = ['page-fr.html', 'page.html']
return render(request, templates, context) 
```

您可以将 page-fr.html 替换为一些查找当前语言并执行此操作的代码。你甚至可以制作一个简单的模板加载器来做到这一点（如果 django 应用程序没有，我不会感到惊讶）

这样做的好处是：

*   使用静态标签而不是 media_url 加入，因此您的所有静态中间件都可以正常工作（如散列文件名）
*   您可以覆盖任何内容，而不仅仅是图像
*   其他技术假设图像将始终存在于所有语言环境中，在这个技术中，它仅在您定义它时使用，并且您知道您拥有哪些图像。例如，如果您还没有 zh 图像，则可以将其保留为英文而不是 404（或者如果您有一些，您可以只做您想要的）。

我真的建议不要在这里使用其他答案，将字符串连接起来以生成最终内容。您正在为静态内容创建动态 url。如果您没有它，创建可能 404 的 url 的风险很大。此外，加入字符串不会让您访问静态中间件（因此没有长期缓存的散列 url）。您可以在加入后通过静态标签运行最终字符串，但如果该静态标签不存在，则会出现更糟糕的服务器错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-09T20:38:36.290

Mikael 的回答略有不同，使用[`get_static_prefix`](https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#get-static-prefix)：

```
{% load i18n static %}
{% get_current_language as LANGUAGE_CODE %}

<img src="{% get_static_prefix %}path/to/image_{{ LANGUAGE_CODE }}.svg"> 
```

# java - 这个 Java 语法是什么意思？（`类clazz`）

> ID：10912709
> 
> 赞同：0
> 
> 时间：2012-06-06T10:48:55.140
> 
> 标签：java, generics, reflection

我已经开发 android 应用程序大约 1 个月了，现在我对 Java 语法非常熟悉，但今天我偶然发现了这段代码：

```
try {
    Class<? extends ContactAccessor> clazz =
                      Class.forName(className).asSubclass(ContactAccessor.class);
    sInstance = clazz.newInstance();
} catch (Exception e) {
    throw new IllegalStateException(e);
} 
```

有人可以解释一下这 `Class<? extends ContactAccessor> clazz`是做什么的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:51:56.337

`Class`用于反射。`<>`表示泛型类型。`?`是通用通配符。结合这意味着`clazz`表示一个类的定义，该类是`ContactAccessor`. 如需进一步解释，请在`generics`google`wildcards`和`reflection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:51:13.863

这意味着您使用扩展特殊基类的类。这在 Java 中也称为泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:51:58.920

这意味着`Class`您需要它的类型是未知的（因此是`?`）。但是你知道它的一个属性——它是`ContactAccessor`. 你需要找到那个特定的类 - 所以你这样做： `Class.forName(className).asSubclass(ContactAccessor.class);`说按它的类来取我的类，它是`ContactAccessor`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T10:52:07.420

这是 Java 泛型的一个示例（更多信息请参见[此处](http://docs.oracle.com/javase/tutorial/java/generics/gentypeinference.html)）。这意味着该`clazz`变量将属于 extends 类型`ContactAccessor`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T10:52:13.057

这意味着您有一个类，它是 ContactAccessor 类或该类或接口的子类。

既然你已经`ContactAccessor.class`有了，我会假设你有一个子类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T10:52:22.630

它定义了一个变量，该变量`clazz`是`Class`扩展`ContactAccessor`该类的泛型类的对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T10:53:56.707

使用通配符 ("?") 以便该类将仅接受由 ContactAccessor 扩展的类，仅接受这些类，但也接受它们中的任何一个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-06T11:15:32.410

任何属于类`subclass`的`ContactAccessor`类。

# jasper-reports - iReport 具有不同标签的同一报告的多个副本

> ID：10912710
> 
> 赞同：0
> 
> 时间：2012-06-06T10:49:06.797
> 
> 标签：jasper-reports, ireport

我正在使用*iReport 4.1.3*。我已经创建了发票报告，我想要 3 份相同的发票报告。第一张发票上应标有“ORIGINAL”标签，第二张发票上应标有“DUPLICATE”，第三张发票上应标有“TRIPLICATE”标签。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T17:49:31.967

如果您想在每次打开报告时都显示所有三个副本，如果不是优雅的解决方案，这是一个有创意的解决方案。

向返回三个不同副本的查询的 FROM 子句添加交叉连接。在 MySQL 中，它看起来像这样：

```
CROSS JOIN
(
Select 'ORIGINAL' as copy, 1 as sequence
UNION
SELECT 'DUPLICATE' as copy, 2 as sequence
UNION
SELECT 'TRIPLICATE' as copy, 3 as sequence
) x 
```

然后将“复制”字段添加到您的选择语句中。这将导致您的查询为之前返回的每条记录返回 3 条记录。一条记录在复制字段中带有“ORIGINAL”，一条带有“DUPLICATE”，一条带有“TRIPLICATE”。在您的 ORDER BY 子句中添加“序列”。

然后在报告中，按“复制”字段分组。强制为每个组创建一个新页面，您应该已经准备就绪。您在报告级别汇总的任何变量都需要更改为组级别（“复制”组）。如果您在“摘要”部分中有任何控件，请将它们移动到新的组页脚部分。还要创建一个文本字段以在页面或组标题中显示“复制”字段。

它不一定漂亮，但它应该工作。

# c# - 如何从控制数据源获取对象上下文

> ID：10912712
> 
> 赞同：1
> 
> 时间：2012-06-06T10:49:34.563
> 
> 标签：c#, winforms, frameworks, entity

我是 C# 和实体框架的新手。`ObjectContext`有没有办法从控制数据源取回？

我有三个项目，两个用于实体框架，最后一个用于窗口窗体应用程序。winform有两个datagridview，每个来自每个EF项目。

问题是当我想为 datagridview A 保存更改时，我必须调用`MyEF_A.SaveChanges()`，当我想保存 datagridview B 时，我必须调用`MyEF_B.SaveChanges()`.

有没有解决方案，所以我可以调用`SaveChanges()`基于（datagridview A 或 datagridview B）从to`Form.ActiveControl`追溯的方法？`control.datasource``ObjectContext`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:46:12.703

恐怕不是。问题是 DataSource 属于“对象”类型。即使您可以将其转换为其原始类型，但您永远不会将 ObjectContext 本身用作绑定对象，因此您只会得到集合。

我可能错了，如果是这种情况，请纠正我。

# php - 替换php中的非标准字符

> ID：10912715
> 
> 赞同：0
> 
> 时间：2012-06-06T10:49:54.893
> 
> 标签：php, html, post, str-replace

我正在尝试用诸如等数字实体替换一些非标准字符，如 ë,Ë,ç,Ç `&#203;`，`&#039;`但我遇到了一些问题。

当我尝试像这样直接替换它们时，它工作正常：

```
$string = "Ë";
$vname = str_replace("Ë","AAAA",$string);
echo $vname."<br>"; 
```

结果我得到了 AAAA。但是，当我尝试用 POST 替换从表单中获取的字符串中的字符时，它不会更改字符。这是一个例子：

```
<?php
if(isset($_POST['submit'])) {
$string = $_POST['title'];
if ($string == "Ë")
echo "Yes";
else
echo "No";
$vname = str_replace("Ë","AAAA",$string);
echo $vname."<br>";
echo $string;
}
?>
<form method="post" name="Form">
Title: <input name="title" type="text" value="" size="20"/>
<input name="submit" type="submit" value="submit"/>
</form> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:52:47.497

您的字符集很可能是错误的。我建议在输出 html 时发送以下标头：

```
<?php header("content-type: text/html; charset=utf-8"); ?> 
```

字符集与您存储文件的字符集匹配的位置。

编辑：只是更多的信息。您存储的文件位于一个字符集中，例如 latin1，而您的浏览器将您的 html 页面解释为另一个字符集（例如 utf-8）。当浏览器再发送Ë字符时，它会发送utf-8代码0xc38b，而同样的字符是0xcb。如您所见，这些不匹配。

编辑 - 您还可以通过 HTML5 或 xHTML 更新 CHARSET：

**HTML5**

```
<meta charset="UTF-8"/> 
```

**xHTML**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# android - 使用相机警报前插入 SD 卡。安卓模拟器？

> ID：10912718
> 
> 赞同：8
> 
> 时间：2012-06-06T10:50:00.050
> 
> 标签：android, android-emulator, android-camera, android-activity

我想要做的是：打开相机并将拍摄的照片保存在 SD 卡中，但是当相机活动开始时，我收到一个自动生成的警告，显示在“toast”中并说：“插入 SD 卡之前使用相机“

注意：我正在使用模拟器。

知道如何解决这个问题吗？

![在此处输入图像描述](../Images/dab8b304030b1d7e2854dff55bb4d79a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:19:01.173

创建 AVD 时，可以说明是否模拟 SDCard（以及大小）。看起来您根本没有指定 SDCard 的存在。编辑您的 AVD 设置并确保您已明确请求 SDCard 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T10:58:00.277

我有同样的吐司错误信息。似乎这是一个真实设备也可能出现的问题。就我而言，我可以通过使用虚拟设备接口来解决问题。我从主屏幕单击 SD 卡图标（在我的情况下位于左上角），我接受仅在此 android 设备中使用 SD 卡，我接受将文件移动到 SD 卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T00:02:57.960

我通过在 AVD Manager 中增加 SD 卡的大小来解决它，我有 100 MB 然后我将它上传到 512 MB 并且消息消失了

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-30T02:13:43.413

好的。在花费了足够多的时间更改 AVD 管理器设置之后，似乎 Adan 的回答为我指明了正确的方向。但是，我不得不增加我的 SD 卡：工作室管理的设置为 1024（GB），这样消息才会消失，相机按钮才能拍照。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-01-23T21:36:29.387

大多数时候我们在创建 AVD 时忽略了这些选项，后来意识到我们没有选择这些选项。还要确保选择合适的前置和后置摄像头。

# c++ - googletest EXPECT_NO_THROW 中没有合适的默认构造函数

> ID：10912719
> 
> 赞同：4
> 
> 时间：2012-06-06T10:50:14.377
> 
> 标签：c++, googletest

宣言：

```
class ClassOne
{
    ClassOne (ClassTwo* classTwo, ClassThree const& classThree);
} 
```

测试：

```
ClassTwo* classTwo;
ClassThree classThree;
EXPECT_NO_THROW (ClassOne (classTwo, classThree)); 
```

这会编译并运行，但现在我将其更改为：

宣言：

```
class ClassOne
{
    ClassOne (ClassThree const& classThree);
} 
```

测试：

```
ClassThree classThree;
EXPECT_NO_THROW (ClassOne (classThree)); 
```

这失败了，“没有适当的默认构造函数可用”。

以下行编译：

```
ClassOne classOne (classTwo, classThree);    // First case
ClassOne classOne (classThree);    // Second case 
```

有什么原因我不能`EXPECT_NO_THROW`使用一个参数的构造函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:20:41.860

我认为这是 gtest 中的一个错误（尽管我不是宏专家）。 `EXPECT_NO_THROW`最终扩展为：

```
#define GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_(statement) \
  if (::testing::internal::AlwaysTrue()) { statement; } 
```

`statement`如果包裹在正文中的括号中，则您的代码将使用 VS2012RC 进行编译`if`：

```
#define GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_(statement) \
  if (::testing::internal::AlwaysTrue()) { (statement); }
//                                         ^         ^ 
```

作为一种解决方法，您可以执行以下操作：

```
EXPECT_NO_THROW ((ClassOne (classThree))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T14:45:56.263

你已经被 C++[最令人头疼的 parse](https://en.wikipedia.org/wiki/Most_vexing_parse)咬了。EXPECT_NO_THROW 宏的“语句”参数`ClassOne (classThree)`不是无名对象的**定义**`ClassOne`，其构造函数获取一个`ClassThree`名为 的对象`classThree`。它是一个名为的**默认构造**对象的**声明**。就像你写的一样- 括号是可选的。 **`ClassOne``classThree``EXPECT_NO_THROW (ClassOne classThree);`**

 **见[https://youtu.be/lkgszkPnV8g?t=1750](https://youtu.be/lkgszkPnV8g?t=1750)

解决方案（如果可以使用 C++11）是使用统一初始化：

`EXPECT_NO_THROW (ClassOne {classThree});`**

# python - 如何将 blog.urls 发送到我的主页

> ID：10912720
> 
> 赞同：0
> 
> 时间：2012-06-06T10:50:14.550
> 
> 标签：python, django

我有一个博客应用程序，应用程序有一个包含通用视图的 urls.py

```
urlpatterns = patterns("",
    url(r'^', ListView.as_view(
                        queryset=Post.objects.all().order_by("-created")[:2],
                        template_name='index.html')),
) 
```

我发送2个数据。

在主项目 urls.py 中是这样的：

```
urlpatterns = patterns("",
    url(r"^$", direct_to_template, {"template": "index.html"}, name="home"),
    url(r"^admin/", include(admin.site.urls)),
    url(r"^blog/", include('blog.urls')),

) 
```

我可以看到从 db 127.0.0.1/blog/ 检索到的数据，我还想在 127.0.0.1 中看到我的意思是在起始页中。我添加这个：

```
 url(r"^$", include('blog.urls), direct_to_template, {"template": "index.html"}, name="home"), 
```

但不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:58:16.470

这应该可行，似乎您错过了 urls.py 上单引号的关闭。我正在使用它，它工作正常。

```
 (r'^$',process.internal.views.HomePage.as_view(template_name='homepage.html')), 
```

# arrays - 每个文件后的 awk 换行符

> ID：10912722
> 
> 赞同：0
> 
> 时间：2012-06-06T10:50:27.847
> 
> 标签：arrays, awk, printf

使用此脚本，每个字段都根据当前文件的最长单词打印出来，但每个文件都需要换行。如何做到这一点？

```
awk 'BEGIN{ORS="\n"}FNR=NR{a[i++]=$0; if(length($0) > length(max)) max=$0;l=length(max)}  END{ for(j=1; j<=i;j++) printf("%-"(l+1)"s,",a[j-1])}' file1 file2 >outfile 
```

文件 1

```
HELLO
WORLD
SOUTH IS
WARM
NORTH IS
COLD 
```

文件2

```
HELLO
WORLD
SOUTH
WARM
NORTH
COLD 
```

输出

```
HELLO     ,WORLD     ,SOUTH IS  ,WARM      ,NORTH IS  ,COLD      
HELLO ,WORLD ,SOUTH ,WARM  ,NORTH ,COLD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:12:00.277

目前尚不完全清楚您要的是什么，但也许您只是想要：

```
FNR==1 {print "\n"} 
```

每当它开始读取文件的第一行时，它将打印一个换行符。确保此模式/操作在任何其他操作之前，以便在任何其他操作为当前文件的第一行打印任何内容之前打印换行符。（这似乎不适用于您的情况，因为不存在此类操作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T10:22:16.067

花了我一些时间，用这个脚本解决了它。

```
awk '{ NR>1 && FNR==1 ? l=length($0) && a[i++]= "\n" $0 : a[i++]=$0 }
{if(NR>1 && FNR==1) for(e=(i-c);e<=(i-1);e++) b[e]=d ;c=FNR; d=l }
{ if( length($0) > l) l=length($0)+1 } 
END{for(e=(i-c+1);e<=i;e++) b[e]=d; for(j=1;j<=i;j++) printf("%-"b[j]"s,",a[j-1] )}' infiles* >outfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:57:52.803

```
#!/usr/bin/awk -f
function beginfile (file) {
    split("", a)
    max = 0
    delim = ""
}

function endfile (file) {
    for (i = 1; i <= lines; i++) {
        printf "%s%-*s", delim, max, a[i]
        delim = " ,"
    }
    printf "\n"
}

FILENAME != _oldfilename \
     {
         if (_oldfilename != "")
             endfile(_oldfilename)
         _oldfilename = FILENAME
         beginfile(FILENAME)
     }

     END   { endfile(FILENAME) }

{
    len = length($0)
    if (len > max) {
        max = len
    }
    a[FNR] = $0
    lines = FNR
} 
```

要运行它：

```
chmod u+x filename
./filename file1 file2 
```

请注意，`gawk`您可以`delete a`代替`split("", a)`. GAWK 4 具有内置`BEGINFILE`和`ENDFILE`.

# sql - SQL Server 活动监视器显示所有查询

> ID：10912723
> 
> 赞同：23
> 
> 时间：2012-06-06T10:50:32.370
> 
> 标签：sql, sql-server, monitoring

我正在使用 SQL Server 2005，我想知道是否有可能查看发送到 SQL Server 的每个查询？

SQL Server Management Studio 有一个名为 Activity Monitor 的内置工具，它几乎为我提供了我在“最近昂贵的查询窗格”中搜索的内容

此窗格显示过去 30 秒内在实例上运行的最昂贵查询的相关信息。

对于所有最近的查询，我都需要这个，而不仅仅是昂贵的查询......

谁能帮我？

命名一个工具，或者给我一个提示要搜索什么......

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-06-21T19:23:01.800

要使用 SQL Profiler 监视发送到 SQL Server 的每个查询，您可以使用 SQL Profiler 预定义模板之一。它是 TSQL_Duration。

![在此处输入图像描述](../Images/10f5f65d20cfcadc923bedec9b54d41e.png)

它旨在跟踪已完成的存储过程和 TSQL 代码。

![在此处输入图像描述](../Images/851c8f568a2a1f1afcd87609348bf1e8.png)

跟踪将准确显示执行的批处理。

![在此处输入图像描述](../Images/e41de2023c628e261aad2cd5ece9c7a4.png)

您可以展开跟踪的事件和显示的列。您可以在此处找到更多信息：[如何：使用 SQL 事件探查器](http://msdn.microsoft.com/en-us/library/ff650699.aspx)

[ApexSQL Comply](http://www.apexsql.com/sql_tools_comply.aspx)中也提供了相同的功能，这是一种使用 SQL 跟踪来捕获事件的审计工具，然后将它们存储在中央存储库数据库中，并提供内置和自定义报告，您可以在其中轻松过滤事务并导出它们Excel、Word 或 PDF 文件。

![在此处输入图像描述](../Images/ae797fde685f532a8a332eccf23e0bc8.png)

![在此处输入图像描述](../Images/24cca0685fe6356becc42862303722c3.png) *免责声明：我作为支持工程师在 ApexSQL 工作*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T11:56:05.367

您正在寻找[SQL Profiler](http://msdn.microsoft.com/en-us/library/ms181091%28v=sql.90%29.aspx)，它通常与 SSMS 一起安装。

# c# - if() 语句行为，为什么这会进入循环？

> ID：10912728
> 
> 赞同：1
> 
> 时间：2012-06-06T10:50:37.767
> 
> 标签：c#, if-statement, parameters

我遇到了一个简单的循环，无论我查询的参数如何，它似乎都会进入循环，以确定循环是否应该处理。下面是循环；

```
 if (result[4] == 0x01 || result[5] == 0x01 || result[6] == 0x01 || result[7] == 0x01 || result[8] == 0x01 || result[9] == 0x01 & deviceState == false)
                {

                        deviceState = true;
                        mainUI.setAlarmColour(result, device);

                } 
```

注意：我已经为最终参数尝试了“&”和“&&”，但两者都没有区别。

使用此循环，即使 deviceState 设置为 true，它也会继续进入循环。但是，如果我使用以下循环，它将停止此问题：

```
 if (result[4] == 0x01 || result[5] == 0x01 || result[6] == 0x01 || result[7] == 0x01 || result[8] == 0x01 || result[9] == 0x01)
                {
                    if (deviceState == false)
                    {
                        deviceState = true;
                        mainUI.setAlarmColour(result, device);
                    }
                } 
```

第二个循环解决了问题，它不再进入循环，这意味着我的函数没有被调用。

我在这里错过了一些基本的东西吗？我已经尝试过 messageBoxes 来验证它是否为假，并且它们以我期望的方式返回，但它仍然进入第一个循环。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T10:52:14.167

首先，`&&`就像您已经尝试过（`&`是位运算符），但是您应该将您`OR`的 s 组合在一起并拥有最终的`AND`独立，如下所示：

```
if (
    (result[4] == 0x01 || result[5] == 0x01 || result[6] == 0x01 ||
     result[7] == 0x01 || result[8] == 0x01 || result[9] == 0x01)
   && deviceState == false)
{
    deviceState = true;
    mainUI.setAlarmColour(result, device);
} 
```

请注意，您也可以`deviceState == false`简单地更改为`!deviceState`（如果它是不可为空的`bool`）。`!`将 false 翻转为 true 以进行比较，因此您实际上是在说完全相同的事情，尽管时间更短。

*（请忽略丑陋的格式，只是想更清楚地显示它）*

# r - R对象身份

> ID：10912729
> 
> 赞同：15
> 
> 时间：2012-06-06T10:50:42.927
> 
> 标签：r, object, identity

有没有办法在 R 语言中测试两个对象是否相同？

**为清楚起见：**我并不是指`identical`函数意义上的相同，它根据某些属性（如数值或逻辑值等）比较对象。

我对对象标识非常感兴趣，例如可以使用`is`Python 语言中的运算符对其进行测试。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-06T11:27:43.233

**更新：在**[data.table v1.8.9](http://datatable.r-forge.r-project.org/)中添加了一个更健壮和更快的`address(x)`（不使用`.Internal(inspect(x))`）实现。来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：

> 新函数`address()`返回其参数在 RAM 中的地址。有时在以编程方式确定值是否已被 R 复制时很有用。

* * *

可能有一种更简洁的方法，但这似乎有效。

```
address = function(x) substring(capture.output(.Internal(inspect(x)))[1],2,17)
x = 1
y = 1
z = x
identical(x,y)
# [1] TRUE
identical(x,z)
# [1] TRUE
address(x)==address(y)
# [1] FALSE
address(x)==address(z)
# [1] TRUE 
```

您可以通过更改`17`为`9`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-01T14:02:43.103

您可以使用该[`pryr`](https://cran.r-project.org/web/packages/pryr/index.html)软件包。

例如，返回`mtcars`对象的内存位置：

```
pryr::address(mtcars) 
```

然后，对于变量`a`和`b`，您可以检查：

```
address(a) == address(b) 
```

# html - 高级 HTML 多行格式 - 从新行中删除不需要的空格

> ID：10912732
> 
> 赞同：1
> 
> 时间：2012-06-06T10:50:52.793
> 
> 标签：html

问题很简单，但我还没有找到解决方案 - 可能不可能或很难找到，因为它非常微不足道。

问题是如何避免在新行之后在格式化的 HTML 中添加空格——尤其是在值列表中。

第一个例子见例子：

```
1, 2 
```

它生成所需的 HTML，如下所示：

```
1, 2 
```

现在另一个不起作用的例子：

```
1
, 
2 
```

它会产生如下无效的 HTML：

```
1 , 2 required is 1, 2 
```

如何获得与第一个示例相同的结果，但使用多行文本布局 - 我知道我们可以在一行中完成，但希望在多行中完成以简化程序代码（而不是 HTML）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:00:30.397

它按定义工作：在正常内容中，换行符等同于空格。在 HTML 中没有办法改变这个原则。只需将您的内容分成几行，以便该原则对您有用，而不是对您不利。也就是说，仅在空格可以的点处换行。

# c# - 行动代表。如何获取委托中调用的方法信息？

> ID：10912734
> 
> 赞同：8
> 
> 时间：2012-06-06T10:51:03.763
> 
> 标签：c#, delegates

我需要获取 Action 委托中调用的方法的 MethodInfo 以检查 Action 中调用的方法是否具有 MyCustomAttibute

```
 public void Foo( Action action )
    {
        if(Attribute.GetCustomAttributes(action.Method, typeof(MyCustomAttribute)).Count() == 0)
        {
            throw new ArgumentException("Invalid action");
        }
    } 
```

Foo 方法应该可以如下调用：

```
 Foo(() =>
    {
            instanceOfFooClass.Method1().Method2();
    }); 
```

在 Foo 方法中，我想确保 Method1 和 Method2 具有 MyCustomAttribute。但是 action.Method 给了我 MethodInfo，这是委托的操作，在使用 lambda 表达式时发生。有什么方法可以获取 Method1 和 Method2 MethodInfo 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:04:13.443

正如评论中提到的，`Expression<T>`这可能是实现这一目标的最佳方式。但是，它需要`Compile()`在运行时进行，因此应该对其进行性能分析。

通过`Expression<T>`您可以轻松访问方法信息，如下所示：

```
public MethodInfo GetMethodInfo(Expression<Action> action)
{
    return ((MethodCallExpression)action.Body).Method;
} 
```

但是，在执行操作之前，您必须执行以下操作：

```
private void InvokeMethod(Expression<Action> action)
{
    action.Compile().Invoke();
} 
```

**编辑** 啊，是的，我忘记了如何访问客户属性。你会这样做：

```
var methodInfo = ((MethodCallExpression)myAction.Body).Method;
var attributes = methodInfo.GetCustomAttributes<T>(true); 
```

**示例** 下面是一个示例，显示将链式方法调用传递给`Expression<Action>`：

```
public class ActionTest
{
    public void DoAction(Action action)
    {
        action();
    }

    public void DoExpressionAction(Expression<Action> action)
    {
        var method2Info = ((MethodCallExpression)action.Body).Method;

        // a little recursion needed here
        var method1Info = ((MethodCallExpression)((MethodCallExpression)action.Body).Object).Method;

        var myattributes2 = method2Info.GetCustomAttributes(typeof(MyAttribute), true);
        var myattributes1 = method1Info.GetCustomAttributes(typeof(MyAttribute), true);

        action.Compile().Invoke();
    }
}

[AttributeUsage(AttributeTargets.Method)]
public class MyAttribute : Attribute
{
    private string message;

    public MyAttribute(string message)
    {
        this.message = message;
    }
}

public class MethodTest
{
    [MyAttribute("Number1")]
    public MethodTest Method1()
    {
        Console.WriteLine("Action");
        return this;
    }

    [MyAttribute("Number2")]
    public MethodTest Method2()
    {
        Console.WriteLine("ExpressionAction");
        return this;
    }
}

class Program
{
    static void Main(string[] args)
    {
        ActionTest target = new ActionTest();
        MethodTest instance = new MethodTest();

        target.DoExpressionAction(() => instance.Method1().Method2() );

        Console.ReadLine();
    }

    static void Method1()
    {
        Console.WriteLine("Action");
    }

    static void Method2()
    {
        Console.WriteLine("ExpressionAction");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T11:50:40.753

如果你`Foo()`这样调用你的方法：

```
Foo(instanceOfFooClass.Method); 
```

您的代码可以按预期工作（毕竟，无效方法*是操作）。*在旁注中，我认为“链接”方法调用实际上很重要，因为您只传递了最后一个。

演示行为的完整示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication4
{
    class MyCustomAttribute : Attribute { }
    class FooClass
    {
        [MyCustom]
        public void DecoratedMethod() { Console.WriteLine("Decorated Method - executed."); }
        public void NotDecoratedMethod() { Console.WriteLine("Not Decoreated Method - executed."); }
    }

    class Program
    {
        static void Main(string[] args)
        {
            FooClass instanceOfFooClass = new FooClass();
            Foo(instanceOfFooClass.DecoratedMethod);
            Foo(instanceOfFooClass.NotDecoratedMethod);
            Console.ReadLine();
        }

        public static void Foo(Action action)
        {
            if (Attribute.GetCustomAttributes(action.Method, typeof(MyCustomAttribute)).Count() == 0)
                Console.WriteLine(string.Format("Invalid method {0}", action.Method.Name));
            else
            {
                Console.WriteLine(string.Format("Valid method {0}", action.Method.Name));
                action.Invoke();
            }
        }
    }
} 
```

# iphone - dyld：库未加载：/System/Library/Frameworks/Accounts.framework/Accounts

> ID：10912737
> 
> 赞同：5
> 
> 时间：2012-06-06T10:51:14.107
> 
> 标签：iphone, ios, xcode, linker

在 iOS 模拟器 4.2/4.3 上运行应用程序时出现以下错误。它在 iOS 5 上运行良好。

```
dyld: Library not loaded: /System/Library/Frameworks/Accounts.framework/Accounts
  Referenced from: /Users/User/Library/Application Support/iPhone Simulator/4.3/Applications/FBFD053F-E816-4114-AFEB-D90A6A67259B/SampleApp.app/SampleApp
  Reason: image not found 
```

我在我的应用程序中使用 AssetsLibrary 和 OpenCV 框架。我没有得到错误的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:35:46.627

更好的是，您可以保留它，但将其从 Link Binary With Libraries：从必需更改为可选。然后在您的代码中跳过 4.x 设备中的框架方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T10:55:04.837

您收到此错误是因为 Accounts.framework 仅在 iOS 5.0 或更高版本中可用。所以你无法在 iOS 4.2/4.3 上运行它。

您还可以将 Accounts.framework 标记为可选。在 Xcode 中，选择 Targets > Build Phases > Link with binary libraries > Accounts.framework 并标记为可选。

另外请确保在 iOS 4.3 中跳过此代码（需要 iOS 5.0 或更高版本的代码）。您可以使用以下代码进行检查：

```
NSString *reqSysVer = @"5.0";
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
if ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending) {

     //Add any code that requires iOS 5.0
} 
```

# jquery - 在 td 中为 div 设置动画会导致 Chrome 中的行为不稳定

> ID：10912739
> 
> 赞同：4
> 
> 时间：2012-06-06T10:51:17.700
> 
> 标签：jquery, html, css, google-chrome

我正在构建一个相当复杂的 UI 小部件，它在 Chrome 中存在一些问题。我能够隔离问题并在[http://jsfiddle.net/8Kb3B/上展示它](http://jsfiddle.net/8Kb3B/)

我有一个`div`内部 a `td`，我正在尝试用 jQuery 切换 div `.animate()`。在 Chrome 中发生的情况是，当它恢复到原来的宽度`td`时，它不会重新长出来。`div`另外，如果您密切注意“隐藏”动画的结尾，您会看到`td`' 的宽度在 的内容的宽度处短暂闪烁`div`，我觉得这很奇怪。

使用时也会发生同样的事情`.toggle(delay)`。如果我`.toggle()`毫不拖延地使用，整个事情都会按预期工作。

该动画在 Mozilla 的产品甚至 IE 中都能正常工作。

我在这里错过了一些非常简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:19:49.190

我从我身边尝试可能对你有帮助。`webkit`对于基于浏览器的这样写：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    td {
    padding-right:2px;
    }
    span{
    left:5px;
    position:absolute;
    }
    #content {
    border: 2px solid red;
    width: 100px;
    height:20px;
    display:table;
    overflow:hidden;
    position:relative;
   }
} 
```

检查更多[http://jsfiddle.net/8Kb3B/3/](http://jsfiddle.net/8Kb3B/3/)

# php - mysql_result() 期望参数 1 是资源，给定的布尔值

> ID：10912741
> 
> 赞同：0
> 
> 时间：2012-06-06T10:51:22.693
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在](https://stackoverflow.com/questions/5473981/warning-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-i)

我认为标题说明了一切。

这是我的代码：

```
function user_count(){
    $query = "SELECT COUNT * FROM  users  WHERE  active = 1";
    $result = mysql_query($query);
    return mysql_result($result, 0);
} 
```

有了这个功能。我正在尝试从数据库中获取所有“活跃”的用户......数据库连接和那些东西都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:52:52.600

你的查询是错误的。尝试用下面的替换

```
$query = "SELECT COUNT(*) FROM  users  WHERE  active = 1"; 
```

您应该实施一些 mysql 错误处理以避免此类警告。

建议：最好使用[PDO](http://php.net/manual/en/book.pdo.php)与您的数据库对话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:53:03.793

在 mysql 中，count 是一个函数，所以你应该使用**COUNT(*)**而不是**COUNT ***

当 mysql_query 函数返回 false 而不是资源时，您还应该考虑使用[mysql_error](http://php.net/mysql_error)等函数跟踪错误

另外，常见的旁注：考虑切换到 PDO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:30:15.480

```
function user_count(){
    $query = "SELECT COUNT(user_id) FROM  `users` WHERE  `active` = 1";
    $result = mysql_query($query) or die($query."<br/><br/>".mysql_error());
    return mysql_result($result, 0);
} 
```

这行得通。

# linq - Linq PredicateBuilder 多条件

> ID：10912742
> 
> 赞同：2
> 
> 时间：2012-06-06T10:51:23.730
> 
> 标签：linq, predicatebuilder, multiple-select-query

```
List<Product> Prs = data.Products
                    .Where(x=> x.ProductColors
                                .Where(y=> y.Color=="blue")
                                .Select(z=> z.ProductID)
                                .Contains(x.ID) && x.ProductColors
                                                     .Where(y=> y.Color== "red")
                                                     .Select(z=> z.ProductID)
                                                     .Contains(x.ID))
                    .ToList(); 
```

如何 PredicateBuilder 多标准？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:57:25.187

类似于以下内容：

```
var inner = PredicateBuilder.False<Product>();
inner = inner.Or (p => p.Description.Contains ("foo"));
inner = inner.Or (p => p.Description.Contains ("far"));

var outer = PredicateBuilder.True<Product>();
outer = outer.And (p => p.Price > 100);
outer = outer.And (p => p.Price < 1000);
outer = outer.And (inner);

var results = data.Products.AsExpandable().Where(outer) 
```

[您可以在此处](http://www.albahari.com/nutshell/predicatebuilder.aspx)阅读有关 PredicateBuilder的更多信息

# android - h:inputText 在 chrome 浏览器和 android 上得到错误的值

> ID：10912743
> 
> 赞同：1
> 
> 时间：2012-06-06T10:51:26.967
> 
> 标签：android, forms, jsf, google-chrome, input

我有几个 inputText 字段绑定到支持 bean 的表单。最后一个文本字段发生了奇怪的行为，该文本字段显示其他文本字段中存在的值（随机）。如果我将最后一个文本字段设置为 outputText，那么该值将转移到前一个 textField 并且 outputText 具有正确的值。

另一个值得注意的行为是当表单被加载时，它显示正确的值，但是当它完全加载时，它将该值更改为错误的值（随机）。此外，在取消时，它会立即显示正确的值。

我希望这个解释有点道理。还有其他人有同样的问题吗？请让我知道，如果有任何解决方案。如果需要更多信息，请告诉我。

这特别发生在 Android 和 chrome 浏览器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:53:22.410

我在 Chrome 中也遇到了一些奇怪的自动完成错误，这些错误是由非常特定的表单/输入名称/标签触发的。Android stock 浏览器使用相同的 Webkit 浏览器引擎（以及 Apple Safari），这解释了为什么它们有相同的问题。尝试更新浏览器。请注意，这与 JSF 无关。

从服务器端开始，最好的办法是尝试通过将`autocomplete`输入元素的属性设置为来关闭自动完成功能`off`。

```
<h:inputText ... autocomplete="off" /> 
```

# java - 按主键排序

> ID：10912747
> 
> 赞同：2
> 
> 时间：2012-06-06T10:51:45.087
> 
> 标签：java, sql, sql-server, sql-order-by, primary-key

我正在尝试在某些操作之前和之后对 SQLServer 数据库表的数据进行比较。我将第一个数据保存在文件中（实际上我保存了数据的 MD5，但不相关），因此我可以在操作后将新数据与其进行比较。第一个问题是查询返回的数据并不总是相同的顺序。

所以为了解决这个问题，我想到了使用 ORDER BY 子句对数据进行排序。第二个问题来了。我正在执行用户定义的查询，因此查询和表可能不同。

所以这里有一个问题：如果事先不知道将使用哪个表，我如何按 PRIMARY_KEY（一个或多个）排序？

任何其他解决方案也将受到欢迎，

感谢您的时间和精力，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:53:44.067

您可以使用动态 sql 并查询元表以发现主键是什么

```
SELECT column_name
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
WHERE OBJECTPROPERTY(OBJECT_ID(constraint_name), 'IsPrimaryKey') = 1
AND table_name = 'Person' 
```

使用动态 sql，您可以像字符串一样构建 sql 语句并将其交给 sp_executeSQL

更多信息请访问[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:12:02.457

> 我正在尝试在某些操作之前和之后对 SQLServer 数据库表的数据进行比较。

如果您使用的是 SQL Server 2008，则可以使用[CDC](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)

你真的需要按主键排序吗？如果没有，你可以做

```
ORDER BY 1, 2, 3 
```

无论列的名称如何，都将按列 1、2 和 3 排序。如果您的主键位于表的第一列，这将适用于 PK

# apache-flex - 如何使用 AIR 包创建签名本机 DMG 安装程序

> ID：10912748
> 
> 赞同：1
> 
> 时间：2012-06-06T10:51:54.033
> 
> 标签：apache-flex, air

如何从 MAC 上的 AIR 包创建签名的本机 DMG 安装程序。使用以下命令，我可以为 Windows 创建签名的本机 EXE 安装程序，

adt -package -target native -storetype pkcs12 -storepass PASSWORD -keystore comodo.pfx myApp.exe myApp.air

现在，我想创建签名的 DMG 安装程序。我在互联网上对此进行了很多研究，但仍然没有运气。

我在 MAC 上使用了 adt -package -storetype pkcs12 -storepass PASSWORD -keystore comodo.pfx -target native myApp.dmg myApp.air 命令，但出现“参数不足”错误。

我在这里缺少哪些论点？有没有人使用 AIR 包为 MAC 签署了本机 DMG 安装程序？

先谢谢了。

# asp.net - 如何加载从数据层继承的业务对象（欢迎新答案）

> ID：10912751
> 
> 赞同：0
> 
> 时间：2012-06-06T10:51:58.973
> 
> 标签：asp.net, entity-framework-4, casting, layer, n-tier-architecture

我的应用程序中有一个数据层和业务层。
在数据层中，我使用实体框架将数据库表作为对象导入。
例如，其中之一是**Unit**表。
现在在业务层我想向数据层单元添加一些方法，所以我有这个类：

```
namespace Business.Entity
{
    public class Unit : Data.Unit 
    {
     //Some business affairs here
    } 
} 
```

为了在 UI 中加载单元，我在业务层创建了一个存储库：

```
 public static IEnumerable<Data.Unit> LoadUnits()
    {
        return from entity in StaticDataContext.Units select entity;
    } 
```

到目前为止一切都很好。

但我想在 UI 中加载一个**Business.Unit**列表，所以我写了这个：

```
 public static IEnumerable<Business.Entity.Unit> LoadUnits()
    {
        var result = (from entity in StaticDataContext.Units
                      select entity).ToList().Cast<Business.Entity.Unit>();
        return result;
    } 
```

它编译得很好，但是在将它绑定到网格时出现了这个运行时错误：

```
InvalidCastException: Unable to cast object of type 'Data.Unit' to type 'Business.Entity.Unit' 
```

谁能说如何安排类以在 UI 中加载业务类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:59:10.600

尝试以下方法，返回您的类`Business.Entity.Unit`对象列表而不是转换为另一个类。

```
public static IEnumerable<Business.Entity.Unit> LoadUnits()
        {
            var result = (from entity in StaticDataContext.Units
                          select new Business.Entity.Unit { 
                          ///set properties of this class as 
                          Id = entity.ID, .. son  
                          }).ToList();
            return result;
        } 
```

我建议您阅读 ScottGu 关于[使用 Entity Framework 4 进行代码优先开发](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:59:34.827

您不能直接将父对象转换为子对象。您的问题的可能解决方案：

1.  在`Business.Entity.Unit`类中创建一个构造函数，接受`Data.Unit`作为参数并分配所有必要的属性，例如：

    ```
    namespace Business.Entity
    {
        public class Unit : Data.Unit 
        {
            public Unit(Data.Unit parent)
            {
                // Assign proprties here
            }
            //Some business affairs here
        } 
    } 
    ```

    之后，您可以执行以下操作：

    ```
    public static IEnumerable<Business.Entity.Unit> LoadUnits()
    {
        var result = (from entity in StaticDataContext.Units
                      select new Business.Entity.Unit(entity)).ToList().Cast<Business.Entity.Unit>();
        return result;
    } 
    ```

2.  重写您的`Business.Entity.Unit`类，使其不继承`Data.Unit`，但接受`Data.Unit`实体作为构造函数参数，聚合它（存储在本地私有成员中）并提供包装器属性和函数以对其进行操作

3.  完全删除您的`Business.Entity.Unit`类并将所有其他方法实现为[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

我会投票给第三个，因为恕我直言，它使代码更简洁，并且没有引入和管理其他实体的开销。

# c++ - qt：QInputDialog::getText 不起作用

> ID：10912755
> 
> 赞同：2
> 
> 时间：2012-06-06T10:52:10.197
> 
> 标签：c++, qt, settext

我有这个代码：

```
bool ok;                
QString text = QInputDialog::getText(this, tr("Set Text"), tr("Text:"), QLineEdit::Normal, this->text(), &ok);

if (ok && !text.isEmpty()) 
{
   this->setText(text); 
   aggiorna_text_t();
} 
```

但结果是窗口和按钮完全是黑色的，只有文本可见，当我更改文本时，窗口不会重新绘制它，因此文本被覆盖。

怎么了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T10:01:08.163

为了解决它，我添加了这一行：

```
bool ok;            

**this->setStyleSheet( "QMenu {background-color: rgba(255,255,255,255);}" );**
QString text = QInputDialog::getText(this, tr("Set Text"), tr("Text:"), QLineEdit::Normal, this->text(), &ok);

if (ok && !text.isEmpty()) 
{
   this->setText(text); 
   aggiorna_text_t();
} 
```

# php - 从包含的文件中仅获取一个函数调用

> ID：10912762
> 
> 赞同：1
> 
> 时间：2012-06-06T10:52:31.727
> 
> 标签：php

包含文件的最佳方法是什么，但除了调用单个定义的函数（例如 register("name","id")）之外不执行任何操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:54:23.860

在单独的文件中重构该函数并包含该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:25:37.257

我知道的唯一方法是：（除了像*@Hasan Khan*所说的那样重组你的文件）

```
$mode = "call_func_func1";
include("file.php"); 
```

在**文件.php**

```
...
if ($mode=="call_func_func1") { func1(); return; } 
```

那是; 检查 $mode，执行 func 并返回。如果你有代码，`...`这也将被执行..

另请注意，在这些情况下，请勿在此类文件中定义函数，否则将**再次定义**它们！（碰撞）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:56:16.553

当你[包含](http://nl3.php.net/manual/en/function.include.php)一个 php 文件时，只有全局代码被执行，所以如果你把所有的内容放在（他们自己的）函数中，除非你显式调用这些函数，否则什么都不会执行

# javascript - 只有在 Win7+IIS7.5 上单击刷新时，页面才能正确加载

> ID：10912763
> 
> 赞同：1
> 
> 时间：2012-06-06T10:52:35.680
> 
> 标签：javascript, css, iis-7.5

我最近将我的开发网站从旧计算机（带有 IIS5.1 的 WinXP）迁移到新计算机（带有 IIS7.5 的 Win7）。该应用程序使用 ASP.NET 和一堆 javascript 和 CSS 文件开发。

在新计算机上，使用默认配置在默认网站下创建虚拟目录，但启用 ASP.NET 模拟和 Windows 身份验证（匿名禁用）

该应用程序使用 IIS7.5 附带的 Classic .NET AppPool (.NET 2.0) 上的 Classic Pipeline。

通过上述配置，应用程序在 IIS5.1 上运行良好，但在 IIS7.5 上运行良好。页面将正确加载，但如果点击刷新按钮，页面将通过仅显示 ASP.NET 页面而不加载 JS 和 CSS 来错误加载。

但是，通过在地址栏中重新输入 URL 并按回车键重新加载页面，它会正确显示。

起初，我以为是IE9，但我可以用IE9在旧电脑上打开应用程序没有问题。

如果有人知道任何线索，请告诉我。

谢谢

# java - 一个令人困惑的异常：ClassCastException

> ID：10912768
> 
> 赞同：0
> 
> 时间：2012-06-06T10:52:48.167
> 
> 标签：java, swing, jframe, jpanel, parent

`InsertPanel`扩展`JPanel`，我将它添加到`JFrame`（我的主框架）中。我想创建一个`JDialog`，将我的主框架给它的构造函数作为它的父框架，不`InsertPanel.this.getParent()`返回一个`JFrame`？

为什么它给我一个`ClassCastException`？

```
eclipse said:Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: javax.swing.JPanel cannot be cast to javax.swing.JFrame 
```

我的代码：

```
 createClassButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            new CreateClassDialog((JFrame) InsertPanel.this.getParent());
        }
    }); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:55:26.717

将 a 添加`Component`到 a会将其添加到可以是 any`JFrame`的内容窗格中。在您的情况下，它似乎是一个. 结果，父母不是你所期望的`JFrame``Container``JPanel``JFrame`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T10:56:43.463

如果你使用面板的方法呢？`public Container getTopLevelAncestor()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T10:55:07.987

从异常的消息可以清楚地看出：不，你的具体`InsertPanel.this.getParent()`不返回 a `JFrame`，它返回 a `JPanel`。（这是因为`JFrame`s 还具有内部窗口管理和图层等内容，因此面板的父级只是其他面板。但在链中的某个位置，您会找到`JFrame`。）您应该找到另一种方法将框架交给对话。

# jquery - YUI 中最接近（元素）（jQuery）的等价物是什么？

> ID：10912775
> 
> 赞同：2
> 
> 时间：2012-06-06T10:53:05.240
> 
> 标签：jquery, yui

有谁知道 YUI 库中最接近（元素）（jQuery）的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:37:59.193

[http://yuilibrary.com/yui/docs/api/classes/Node.html#method_ancestor](http://yuilibrary.com/yui/docs/api/classes/Node.html#method_ancestor)

祖先（fn，testSelf，stopFn）节点

返回通过提供的布尔方法应用的测试的最近祖先。参数：

```
fn String | Function

A selector string or boolean method for testing elements. If a function is used, it receives the current node being tested as the only argument.
testSelf Boolean

optional Whether or not to include the element in the scan
stopFn String | Function

optional A selector string or boolean method to indicate when the search should stop. The search bails when the function returns true or the selector matches. If a function is used, it receives the current node being tested as the only argument. 
```

返回： Node：匹配的 Node 实例，如果没有找到则返回 null

# android - 如何使用 ViewPager 在 Activity 中显示存储在 SD 卡上的图像？

> ID：10912776
> 
> 赞同：2
> 
> 时间：2012-06-06T10:53:07.043
> 
> 标签：android, android-activity, android-viewpager, android-gallery

我在 SD 卡上有图像，我想`Activity`用`ViewPager`.

在水平滚动图像应该改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T00:05:49.187

使用此方法，您可以从 SD 卡中的可读取对象中检索您的图片

```
public Drawable getImageFromSdCard(String imageName) {
    Drawable d = null;
    try {
        String path = Environment.getExternalStorageDirectory().toString()
                + "/YourSubDirectory/";
        Bitmap bitmap = BitmapFactory.decodeFile(path + "/" + imageName
                + ".png");
        d = new BitmapDrawable(bitmap);
    } catch (IllegalArgumentException e) {
        // TODO: handle exception
    }
    return d;

} 
```

然后在你的 ViewPager 中调用这个 Drawable。

幸运儿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:12:38.097

使用这个：[当触发 android 图像选择器意图](https://stackoverflow.com/questions/4991464/retrieving-only-images-from-gallery-when-firing-android-image-chooser-intent)从图库中获取图像时，仅从图库中检索图像。

并使用它来水平显示：http: [//developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

您需要将这两个代码组合在一起。

# ruby-on-rails - ArgumentError 递归数组连接

> ID：10912784
> 
> 赞同：1
> 
> 时间：2012-06-06T10:53:22.487
> 
> 标签：ruby-on-rails, ruby

在控制器或模板中以数组为参数调用方法“polymorphic_url”，例如：

```
polymorphic_url([@agency, @agency.divisions.first]) 
```

导致名为“递归数组连接”的 ArgumentError 异常。有什么建议么？

我可以使用任何模型重现此异常：

```
@e = Estate.where(:booklets => {'$exists' => true}).first
@b = @e.booklets.first
polymorphic_url [@e,@b] 
```

*导轨 3.2.3、3.2.4、3.2.5*

*红宝石 1.9.2、1.9.3*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:45:50.140

您可以使用包含对自身的引用的数组来创建错误：

```
a = []
a<<a
a.join #ArgumentError: recursive array join 
```

我在这里猜测，但如果`divisions`指向与`@agencie`（例如，一个机构是它自己的部门）相同的数组，我可以想象上面会发生类似的事情。可能与更新无关，而是与数据有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:15:23.387

我相信你在滥用它。根据 APIDock，这里有一些 polymorphic_url 使用的例子：

```
# calls post_url(post)
polymorphic_url(post) # => "http://example.com/posts/1"
polymorphic_url([blog, post]) # => "http://example.com/blogs/1/posts/1"
polymorphic_url([:admin, blog, post]) # => "http://example.com/admin/blogs/1/posts/1"
polymorphic_url([user, :blog, post]) # => "http://example.com/users/1/blog/posts/1"
polymorphic_url(Comment) # => "http://example.com/comments" 
```

所以也许你应该使用：

```
polymorphic_url([@agency, @division]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T13:38:17.200

我通过强制应用程序使用 bson '1.6.2' [https://github.com/mongoid/mongoid/issues/2069来解决这个问题](https://github.com/mongoid/mongoid/issues/2069)

# jsp - JSP 将字符串解析为日期

> ID：10912785
> 
> 赞同：0
> 
> 时间：2012-06-06T10:53:26.477
> 
> 标签：jsp, date, jsp-tags

> **可能重复：**
> [在 Java 中解析任何日期](https://stackoverflow.com/questions/3389348/parse-any-date-in-java)

我正在尝试将日期字符串解析为我的 JSP 模板中的日期。问题是，我不知道 Date-String 的样子，因为它是从不同的 RSS-Feed 加载的，这些 RSS-Feed 并不总是具有相同的日期格式。

例如：

```
<fmt:parseDate value="Tue, 05 Jun 2012 11:45:47" var="date" pattern="EEE, dd MMM yyyy HH:mm:ss" parseLocale="US" /> 
```

仅适用于格式为“Tue, 05 Jun 2012 11:45:47”的日期...

我需要更动态的东西，因为日期也可能是“05.06.2012 11:45:47 GMT”或类似的东西。

我也尝试将模式排除在外，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:57:10.217

有一些方法可以获得积极的输出。但它们不可能每一分钱都可靠。

例如，如果输入日期是`2012-06-05`并且您有模式`yyyy-MM-dd`和`yyyy-dd-MM`要匹配，那么生成的月份将是`06`ie`June`和`05`ie `May`。这些结果会引起您的困惑，并且您无法确定输出与 RSS 服务器日期相比是否正确。

SO上有类似的讨论和建议。

1.  [在解析之前确定字符串是否为有效日期](https://stackoverflow.com/questions/962953/determine-if-a-string-is-a-valid-date-before-parsing)
2.  [如何在不知道格式的情况下将字符串转换为日期？](https://stackoverflow.com/questions/3707485/how-to-convert-string-to-date-without-knowing-the-format)
3.  [在 Java 中解析任何日期](https://stackoverflow.com/questions/3389348/parse-any-date-in-java)
4.  并且可能更多...

# java - 将带有通配符的 Java 泛型编译为 C++ 模板

> ID：10912786
> 
> 赞同：5
> 
> 时间：2012-06-06T10:53:28.347
> 
> 标签：java, c++, templates, generics, compiler-construction

我正在尝试构建一个 Java 到 C++ 的反编译器（即 Java 代码进入，语义上“等效”（或多或少）C++ 代码出来）。

不考虑垃圾收集，语言很熟悉，所以整个过程已经很好了。然而，一个问题是 C++ 中不存在的泛型。当然，最简单的方法是像 java 编译器那样执行擦除。但是，生成的 C++ 代码应该很好处理，所以如果我不会丢失泛型类型信息会很好，也就是说，如果 C++ 代码仍然可以使用`List<X>`而不是`List`. 否则，C++ 代码在使用此类泛型的任何地方都需要显式转换。这是容易出错且不方便的。

所以，我试图找到一种方法来以某种方式获得更好的泛型表示。当然，模板似乎是一个不错的选择。尽管它们是完全不同的东西（元编程与仅编译时类型增强），但它们仍然很有用。只要不使用通配符，只需将泛型类编译为模板就可以很好地工作。但是，一旦通配符开始发挥作用，事情就会变得非常混乱。

例如，考虑以下列表的 java 构造函数：

```
class List<T>{
List(Collection<? extends T> c){
    this.addAll(c);
}
}

//Usage
Collection<String> c = ...; 
List<Object> l = new List<Object>(c); 
```

如何编译这个？我有在模板之间使用链锯重新解释演员表的想法。然后，上面的例子可以这样编译：

```
template<class T>
class List{
List(Collection<T*> c){
    this.addAll(c);
}
}

//Usage
Collection<String*> c = ...; 
List<Object*> l = new List<Object*>(reinterpret_cast<Collection<Object*>>(c)); 
```

然而，问题是这种重新解释演员是否会产生预期的行为。当然，它很脏。但它会起作用吗？通常，`List<Object*>`并且`List<String*>`应该具有相同的内存布局，因为它们的模板参数只是一个指针。但这能保证吗？

我想到的另一个解决方案是将使用通配符的方法替换为实例化每个通配符参数的模板方法，即将构造函数编译为

```
template<class T>
class List{

template<class S>
List(Collection<S*> c){
    this.addAll(c);
}
} 
```

当然，所有其他涉及通配符的方法，比如`addAll`然后也需要模板参数。这种方法的另一个问题是处理类字段中的通配符。我不能在这里使用模板。

第三种方法是混合方法：将泛型类编译为模板类（称为它`T<X>`）和一个擦除类（称为它`E`）。模板类`T<X>`继承自擦除类`E`，因此总是可以通过向上转换为 E 来放弃泛型。然后，所有包含通配符的方法都将使用擦除类型编译，而其他方法可以保留完整的模板类型。

您如何看待这些方法？您在哪里看到它们的缺点/优点？对于如何尽可能干净地实现通配符，同时在代码中保留尽可能多的通用信息，您是否还有其他想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:18:44.247

> 不考虑垃圾收集，语言很熟悉，所以整个过程已经很好了。

不。虽然这两种语言实际上*看起来*很相似，但它们在“如何完成”方面却大不相同*。*您尝试的这种 1:1 反编译将导致糟糕的、性能不佳的，并且很可能是错误的 C++ 代码，*特别是*如果您不是在查看独立应用程序，而是在手动查看可能与“正常”接口的东西时- 编写的 C++。

C++ 需要与 Java 完全不同的编程*风格*。首先*不是*所有类型都派生自`Object`，除非绝对必要，否则会涉及避免`new`（然后尽可能将其限制在构造函数中，并`delete`在析构函数中使用相应的 - 或者更好的是，遵循下面 Potatoswatter 的建议），并且不会结束在“模式”中，例如使您的容器符合 STL 标准并将`begin`- 和 -`end`迭代器传递给另一个容器的构造函数而不是整个容器。我也没有在您的代码中看到 const-correctness 或 pass-by-reference 语义。

请注意有多少早期的 Java“基准”声称 Java 比 C++ 更快，因为 Java 传播者采用 Java 代码并将其 1:1 转换为 C++，就像您计划做的那样。这种转译没有什么可取胜的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T11:37:57.583

您尚未讨论的一种方法是使用包装类模板处理通用通配符。因此，当您`Collection<? extends T>`看到. 然后你在这个包装器（和其他类似的包装器）中进行类型擦除，这意味着生成的 C++ 处理起来相当不错。`Collection<T>``Collection<?>`

`reinterpret_cast`您的电锯*不能*保证正常工作。例如，如果在 中存在多重继承`String`，那么通常甚至不可能将 a 类型双关语`String*`作为 a `Object*`，因为从`String*`to的转换`Object*`可能涉及对地址应用偏移量（不仅如此，使用虚拟基类）[**] . 我希望您将在 C++-from-Java 代码中对接口使用多重继承。好的，所以它们将没有数据成员，但它们将具有虚函数，并且 C++ 对您想要的东西没有特别的考虑。我认为使用标准布局类，您可能可以重新解释指针本身，但是（a）这对您来说太强了，并且（b）它仍然不意味着您可以重新解释集合。

[*] 管他呢。我忘记了通配符在 Java 中如何工作的详细信息，但是当您尝试将 a 添加`T`到 a时会发生什么`List<? extends T>`，`T`结果不是 的实例`?`，请这样做:-) 棘手的部分是自动生成任何给定的泛型类或接口的包装器。

[**] 而且因为严格的别名禁止它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T11:48:04.923

如果目标是在 C++ 中表示 Java 语义，那么请以最直接的方式进行。不要使用`reinterpret_cast`它，因为它的目的是*破坏*C++ 的本机语义。（在高级类型之间这样做几乎总是会导致程序崩溃。）

您应该使用引用计数或类似的机制，例如自定义垃圾收集器（尽管在这种情况下这听起来不太可能）。所以这些对象无论如何都会进入堆。

将通用`List`对象放在堆上，并使用单独的类将其作为 a`List<String>`或其他对象访问。通过这种方式，持久对象具有可以处理 Java 可以表达的任何格式错误的访问方法的泛型类型。访问器类只包含一个指针，您已经拥有该指针用于引用计数（即，它是“本机”引用的子类，而不是堆的对象），并公开适当的向下转换接口。您甚至可以使用泛型源代码为访问器生成模板。如果你*真的*想试试。

# javascript - 以变 量为选择器淡入淡出

> ID：10912789
> 
> 赞同：0
> 
> 时间：2012-06-06T10:53:50.780
> 
> 标签：javascript, jquery

我目前正在尝试在用户已上传的图片列表上制作悬停效果（使 div 淡入，然后在不悬停时退出）。因为我不希望我的所有图片在选择其中一张图片时都悬停，所以我让 PHP 回显了一个用于 div id 的变量。

在下面的 jQuery 代码中，我有一个循环，我从 1 计数到 16（这是我画廊中的图片数量），并且选择器具有 div 的名称。

PHP部分：

```
 echo "<div class='cell1' id=sovs$sovs style='overflow: hidden; position: relative;'>
                                <a href=image.php?p=$presentnew->upload_id>
                                <img style='min-width: 177px; min-height: 177px;' src='content/$presentnew->user_name/thumbs/medium_$presentnew->file_name'>
                                <div class='celltext'>
                                <b style='color: white; line-height: 28px; margin-left: 5px; font-size: 10pt;'><a style='color: white;' href='profil.php?bruger=$presentnew->user_name'>$presentnew->user_name</a></b>
                                </div>
                                </a>
                            </div>";
                        $sovs++;
                    } 
```

Javascript部分：

```
for (var h = 1; h <= 16; h++) {
    $(function() {
        $("#sovs" + h).hover(

        function() {
            alert("g");
        });
    });
}​ 
```

上面的代码只是我希望我的 div 响应函数的测试。

问题是他们不这样做。如果我将选择器的名称更改为，例如，他们会做出响应`$('#sovs1')`。

有人可以告诉我我做错了什么吗？

```
$(document).ready(function(){
for(var h=1; h<=16; h++){   
        $("#sovs"+h).mouseover(function(){
                alert("G");                                  
            });   

    }
}); 
```

有效，但如果我将fadeIn函数附加到它，它不会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:58:50.307

您将不得不提供更多信息才能获得答案，这只是一件重要的事情：

```
for (var h = 1; h <= 16; h++) {
    $(function() { // <======= This will create 16! dom ready event handlers
        $("#sovs" + h).hover(

        function() {
            alert("g");
        });
    });
}​ 
```

将其移动到外部范围（如果需要的话..）

```
$(function() {
    for (var h = 1; h <= 16; h++) {
        $("#sovs" + h).hover(function() {
            alert("g");
        });
    }
}​ 
```

试试这段代码，看看问题是否出在委托事件 VS 直接事件上。

```
$(function() {
    for (var h = 1; h <= 16; h++) {
        $('body').on('mousemove', "#sovs" + h, function() {
            alert('g');
        });
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:58:58.760

```
$(document).ready(function() {
     for(var h=1; h<=16; h++) {   
        $("#sovs"+h).live('hover', function() {
                alert("g");                                         
        });   
    }
}); 
```

# mpi - MPI 进程是如何启动的？

> ID：10912793
> 
> 赞同：14
> 
> 时间：2012-06-06T10:54:06.397
> 
> 标签：mpi

`mpirun`当使用or开始 MPI 作业时`mpiexec`，我可以理解如何开始每个单独的进程。但是，如果没有任何编译器魔法，这些包装器可执行文件如何将安排（MPI 通信器）传达给 MPI 进程？

我对细节感兴趣，或者在哪里看的指针。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T12:02:58.890

有关各个流程如何建立 MPI 领域的详细信息是特定于实现的。您应该查看特定库的源代码以了解其工作原理。不过，有两种几乎通用的方法：

*   命令行参数：MPI 启动器可以将参数传递给生成的进程，指示如何以及在何处连接以建立 Universe。这就是为什么必须通过在 C中调用和`MPI_Init()`调用来初始化 MPI - 因此库可以访问命令行并提取所有用于它的参数；`argc``argv`
*   环境变量：MPI 启动器可以设置特定的环境变量，其内容可以指示连接的位置和方式。

例如，Open MPI 设置环境变量，并将一些 Universe 状态写入到同一节点上运行的所有进程都知道的磁盘位置。您可以通过执行以下命令轻松查看其运行时组件 ORTE（OpenMPI 运行时环境）使用的特殊变量`mpirun -np 1 printenv`：

```
$ mpiexec -np 1 printenv | grep OMPI
... <many more> ...
OMPI_MCA_orte_hnp_uri=1660944384.0;tcp://x.y.z.t:43276;tcp://p.q.r.f:43276
OMPI_MCA_orte_local_daemon_uri=1660944384.1;tcp://x.y.z.t:36541
... <many more> ... 
```

（出于安全原因更改了 IP）

一旦远程启动`MPI_Init()`或`MPI_Init_thread()`调用子进程，ORTE 就会启动并读取这些环境变量。`mpirun`然后它使用“home” /进程连接回指定的网络地址`mpiexec`，然后协调所有产生的进程以建立 MPI 世界。

其他 MPI 实现以类似的方式工作。

# javascript - Processing.js 计时器

> ID：10912795
> 
> 赞同：5
> 
> 时间：2012-06-06T10:54:24.910
> 
> 标签：javascript, timer, processing.js

我正在使用 Processing.js 开发一个应用程序。

在绘图循环的每一步，我都会将帧数增加一`frame++`。

我想知道已经过去了多少时间。目前为了让时间过去（知道我的应用程序设置为在 60FPS 上运行），我确实喜欢这样：`time=frame/60`. 但这仅适用于应用程序始终以精确的 FPS 运行并且我们都知道情况并非如此，因为它取决于用户的硬件。

我希望计时器非常准确（只有 0.0001 秒的错误）。

也欢迎提出一些用于计算 now() 和 start_time() 之间差异的 javascript 算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:48:49.830

如果您想要准确性，请查看[高分辨率计时器](http://forrst.com/posts/High_resolution_JavaScript_timer-eNm)。但是，此功能并非在所有浏览器上都可用。

此外，Processing.js 有一个名为 frameCount 的内置只读变量。您可以查询它而不是自己计算帧数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:58:06.977

您可以将开始时间存储在变量中。

然后随时创建一个新计时器并从中减去开始时间变量。结果将以毫秒为单位。

您还可以使用实际时间除以帧计数器来获得应用程序的准确平均帧速率。

就像是

```
var startTimer = new Date(); // at start (once) 
```

每当你想检查

```
var passed = new Date() - startTimer; // in milliseconds 
```

演示在[http://jsfiddle.net/gaby/CF4Ju/](http://jsfiddle.net/gaby/CF4Ju/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T17:33:38.300

我为一个游戏编了这门课。它使用`millis()`并且独立于`frameRate`

```
class Timer{
  boolean increment, inProgress;
  int spawn, end;
  int seconds, tm_limit;

  Timer(int tm_limit){
    this.tm_limit = tm_limit;
    seconds = tm_limit;
    increment = false;
    inProgress = false;
  }

  Timer(){
    seconds = 0;
    increment = true;
    inProgress = false;
  }

  void start(){
    inProgress = true;
    spawn = millis();
  }

  void stop(){
    inProgress = false;
    end = millis();
  }

  int getSeconds(){
    if(inProgress){
      if(increment){
        seconds = int((millis() - spawn) / 1000);
      }
      else{
        if(seconds - int((millis() - spawn) / 1000) != seconds){
          seconds = seconds - int((millis() - spawn) / 1000);
          if(seconds <= 0) { stop(); }
          else spawn = millis();
        }
      }
    }
    return seconds;
  }

  void reset(){
    if(!increment)
      seconds = tm_limit;
    else
      seconds = 0;

    inProgress = false;
  }
} 
```

如果使用参数实例化 Timer 对象，则假定 Timer 应该减少。`getSeconds()`否则，可以通过从方法中获取值来检查退出条件。

# delphi - Delphi XE2 不兼容类型指针和 PAnsiChar

> ID：10912796
> 
> 赞同：2
> 
> 时间：2012-06-06T10:54:30.367
> 
> 标签：delphi, delphi-xe2

我正在用**Delphi XE2**编译我的应用程序。它是在**delphi 7**中开发的。。我的代码如下：

```
type
 Name = array[0..100] of PChar;
 PName = ^Name;
var
  HEnt: pHostEnt;
  HName: PName;
  WSAData: TWSAData;
  i: Integer;

begin
     Result := False;
     if WSAStartup($0101, WSAData) <> 0 then begin
     WSAErr := 'Winsock is not responding."';
       Exit;
     end;
    IPaddr := '';
    New(HName);

 if GetHostName(HName^, SizeOf(Name)) = 0 then <-----ERROR
   begin
      HostName := StrPas(HName^);      

      HEnt := GetHostByName(HName^);    
            "
            "
         so on...
   end; 
```

当我尝试编译代码时，出现以下错误： ![在此处输入图像描述](../Images/ecc0c25b65715b602773f1bfed4fd279.png)

当我在另一个应用程序中尝试此代码时，它在 Delphi 7 中运行良好。如何从字符指针转换为**PAnsiChar**类型以使其在**Delphi XE2**上运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:01:03.763

我的 Delphi 知识可能有点生疏，但据我所知：

PChar 是（有点像，不完全是）一个指向字符串本身的指针，所以这种类型实际上是一个包含 101 个 PChars（字符串）的数组：

`Name = array[0..100] of PChar;`

我认为您应该将其更改为`array [0..100] of Char`，或者为什么不从一开始就声明`HName`为`PAnsiChar`权利？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T20:05:23.393

这不是正确的使用方法`gethostname()`。改用这个：

```
var
  HName: array[0..100] of AnsiChar;
  HEnt: pHostEnt;
  WSAData: TWSAData;
  i: Integer;
begin
  Result := False;
  if WSAStartup($0101, WSAData) <> 0 then begin
    WSAErr := 'Winsock is not responding."';
    Exit;
  end;
  IPaddr := '';

  if gethostname(HName, SizeOf(Name)) = 0 then
  begin
    HostName := StrPas(HName);
    HEnt := gethostbyname(HName);
    ...
  end;
  ...
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:18:13.570

是的...我明白了:) 我将 HName 声明为**HName:PAnsiChar;** 和

```
if GetHostName(PAnsiChar(HName^), SizeOf(Name)) = 0 
HostName := StrPas(PAnsiChar(HName^)); 
HEnt := GetHostByName(PAnsiChar(HName^)); 
```

# time - ActiveMQ 消息传输时序

> ID：10912798
> 
> 赞同：1
> 
> 时间：2012-06-06T10:54:50.633
> 
> 标签：time, jms, message, activemq

在 ActiveMQ 中，我是否可以检测到消息从发布者传递给订阅者需要多长时间？或者我可以看到消息从发布者到主题（JMS 服务）和从（JMS 服务）主题到订阅者的单独时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:40:09.027

当 JMS 消息到达消费者时，您可以查看`JMSTimestamp`header 属性。根据Javadoc：

> JMSTimestamp 标头字段包含传递消息以发送的时间。

然后，您可以简单地从当前系统时间中减去 JMSTimestamp 并`time taken`通过该 JMS 消息计算运行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:26:13.957

有一个[用于 AMQ 性能测试的 Maven 插件](http://activemq.apache.org/activemq-performance-module-users-manual.html)，它可能是您正在寻找的。

[否则，您可以通过使用诸如Apache jMeter](http://jmeter.apache.org/)之类的负载测试工具进行一些测量，然后查看每秒可以读取/写入多少条消息。

请注意，如果您坚持和/或交易与否，您将有相当大的差异。

更新：

您可以通过配置 conf/log4j.properties 和设置来对日志做一些事情：

```
log4j.rootLogger=TRACE, logfile, console 
```

然后在 data/activemq.log 中，您可以获得一些关于 put 消息的信息。这些数字代表什么并不是很明显，因此您应该确保定义一个测试场景。以下时间戳来自 HermesJMS 放入队列 (myqueue) 到 ActiveMQ 的消息：

```
2012-06-06 16:31:19,979 | DEBUG | localhost adding consumer: ID:GOTL19946-53234-
1338993070006-0:2:3:1 for destination: queue://myqueue |org.apache.activemq.broker.region.AbstractRegion | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:19,989 | DEBUG | queue://myqueue add sub: QueueBrowserSubscription: consumer=ID:GOTL19946-53234-1338993070006-0:2:3:1, destinations=0, dispatched=0, delivered=0, pending=0, dequeues: 0, dispatched: 0, inflight: 0 | org.apache.activemq.broker.region.Queue | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:19,989 | DEBUG | myqueue toPageIn: 1, Inflight: 0, pagedInMessages.size 0, enqueueCount: 1, dequeueCount: 0 | org.apache.activemq.broker.region.Queue | Queue:myqueue
2012-06-06 16:31:19,989 | TRACE | QueueStorePrefetch513024249 - fillBatch | org.apache.activemq.broker.region.cursors.AbstractStoreCursor | Queue:myqueue
2012-06-06 16:31:19,989 | DEBUG | dispatch to browser: QueueBrowserSubscription: consumer=ID:GOTL19946-53234-1338993070006-0:2:3:1, destinations=1, dispatched=0, delivered=0, pending=0, already dispatched/paged count: 1 | org.apache.activemq.broker.region.Queue | Queue:myqueue
2012-06-06 16:31:19,999 | TRACE | ID:GOTL19946-53234-1338993070006-0:2:3:1 dispatched: ID:GOTL19946-53234-1338993070006-0:2:2:1:1 - queue://myqueue, dispatched: 1, inflight: 1 | org.apache.activemq.broker.region.PrefetchSubscription | ActiveMQ Connection Dispatcher: /127.0.0.1:53236
2012-06-06 16:31:19,999 | TRACE | ack:MessageAck {commandId = 13, responseRequired = false, ackType = 2, consumerId = ID:GOTL19946-53234-1338993070006-0:2:3:1, firstMessageId = ID:GOTL19946-53234-1338993070006-0:2:2:1:1, lastMessageId = ID:GOTL19946-53234- 1338993070006-0:2:2:1:1, destination = queue://myqueue, transactionId = TX:ID:GOTL19946-  53234-1338993070006-0:2:2, messageCount = 1, poisonCause = null} | org.apache.activemq.broker.region.PrefetchSubscription | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:19,999 | DEBUG | commit: TX:ID:GOTL19946-53234-1338993070006-0:2:2 syncCount: 1 | org.apache.activemq.transaction.LocalTransaction | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:19,999 | DEBUG | myqueue toPageIn: 0, Inflight: 1, pagedInMessages.size 1, enqueueCount: 1, dequeueCount: 0 | org.apache.activemq.broker.region.Queue | Queue:myqueue
2012-06-06 16:31:20,049 | DEBUG | localhost removing consumer: ID:GOTL19946-53234-1338993070006-0:2:3:1 for destination: queue://myqueue | org.apache.activemq.broker.region.AbstractRegion | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:20,049 | DEBUG | queue://myqueue remove sub: QueueBrowserSubscription: consumer=ID:GOTL19946-53234-1338993070006-0:2:3:1, destinations=1, dispatched=0, delivered=1, pending=0, lastDeliveredSeqId: 67, dequeues: 0, dispatched: 1, inflight: 0 | org.apache.activemq.broker.region.Queue | ActiveMQ Transport: tcp:///127.0.0.1:53236
2012-06-06 16:31:20,049 | DEBUG | myqueue toPageIn: 0, Inflight: 0, pagedInMessages.size 1, enqueueCount: 1, dequeueCount: 0 | org.apache.activemq.broker.region.Queue | Queue:myqueue 
```

# ajax - 如何在提琴手中放置多个断点？

> ID：10912804
> 
> 赞同：3
> 
> 时间：2012-06-06T10:55:11.660
> 
> 标签：ajax, wcf, fiddler

在提琴手中，我们可以通过以下命令放置断点：-

`[bpv or bpm]`为指定的 HTTP 方法创建请求断点。设置此命令将清除该命令之前的任何值；不带参数调用它会禁用断点。bpv POST bpv <-- 无参数调用以清除

`[bpu]` 为包含指定字符串的 URI 创建请求断点。设置此命令将清除该命令之前的任何值；不带参数调用它会禁用断点。bpu /myservice.asmx bpu

如果我想中断请求

a) 如果要求`http://url_1/dummy1.svc`

b）如果请求`http://url_2/dummy2.svc/DoWork`（从 yui ajax 请求中调用）

两个网址都在发出 POST 请求。所以我尝试了`bpv POST`命令，但它只在“a”场景中中断。

我给予`bpu http://url_2/dummy2.svc/DoWork`和`bpv POST`命令。但它似乎`bpv`工作但不是`bpu`。如果我给`bpv POST`然后工作`bpu http://url_2/dummy2.svc/DoWork`但`bpu`不是`bpv`。

让我知道如何同时使用`bpu`两者`bpv`？

如何使用 fiddler 捕获两个 url 请求？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T00:37:54.860

单击自动回复选项卡。

使用 Rules 和 ActionText 添加两个新条目，如下所示：

```
http://url_1/dummy1.svc           *bpu
http://url_2/dummy2.svc/DoWork    *bpu 
```

或者，单击规则 > 自定义规则。滚动`OnBeforeRequest`并添加

```
if (oSession.HTTPMethodIs("POST"))
{
    // Careful, URLs are Case-Sensitive...
    if ((oSession.fullUrl == "http://url_1/dummy1.svc") ||
        (oSession.fullUrl == "http://url_1/dummy2.svc/DoWork"))
    {
        oSession["X-BreakRequest"] = "script";  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:42:52.167

查看 Fiddler 中的内置规则代码（在 Fiddler 中键入 ctrl-r），这是设置断点的方式：

```
if ((null!=bpRequestURI) && oSession.uriContains(bpRequestURI)) {
    oSession["x-breakrequest"]="uri";
}

if ((null!=bpMethod) && (oSession.HTTPMethodIs(bpMethod))) {
    oSession["x-breakrequest"]="method";
} 
```

这个逻辑意味着基于 URI 和 Method 的断点是互斥的。我对创建自定义规则知之甚少，无法知道是否可以创建满足您需要的复合规则。

# axapta - Dynamics AX 2009 开发人员安装

> ID：10912806
> 
> 赞同：1
> 
> 时间：2012-06-06T10:55:13.957
> 
> 标签：axapta, microsoft-dynamics, ax

我正在尝试使用开发人员安装的 MS Dynamics AX 2009 来设置我的新笔记本电脑。

我从安装 MS SQL Server 2008 R2 开始，一切顺利，我在这里创建了一个新数据库。

然后我启动 AX 2009 安装程序，我首先安装应用程序文件，通过这个，一切正常。然后我重新启动 AX 2009 设置，安装 AOS，使用 AOS 的特定用户名/密码设置登录。然后我重新启动 AX 2009 设置并安装客户端和调试器。

当我在服务中启动 AOS 时，服务卡在“正在启动”上，并且在 5/10/15 分钟等待和刷新后没有任何反应？

我是否还需要在 AX 2009 设置中安装数据库文件？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:37:06.697

是的，您需要有一个 AX 2009 数据库。通过 AX 2009 安装程序安装它或从 Microsoft 部署 contoso 示例数据库。从安装程序安装更容易。

AOS 的第一次启动可能需要一些时间，但如果您没有数据库，我无法想象它会如何工作。

转到（管理工具>Microsoft Dynamics AX 2009 服务器配置）并单击实例的数据库选项卡，它有什么？该数据库是否存在或是否已选择任何内容？

您应该检查“应用程序”下的 Windows 事件查看器以查看服务启动期间的问题。

/这不是真正的代码顺便说一句...

# javascript - mcDropDown 插件：如何显示父节点属性？

> ID：10912815
> 
> 赞同：0
> 
> 时间：2012-06-06T10:55:57.150
> 
> 标签：javascript, jquery, drop-down-menu

我正在使用非常有效的[mcDropDown插件。](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm)

没有报告所有代码，我只是放了jsfiddle的例子。[http://jsfiddle.net/SwxP3/](http://jsfiddle.net/SwxP3/)

我想做的并且浪费了数小时的试验，是获取所选节点的父节点。

例子

```
<li rel="1"> 
        Arts &amp; Humanities 
        <ul> 
            <li rel="2"> 
                Photography 
                <ul> 
                    <li rel="3"> 
                        3D 
                    </li> 
                    <li rel="4"> 
                        Digital 
                    </li> 
                </ul> 
            </li> 
            <li rel="5"> 
                History 
            </li> 
            <li rel="6"> 
                            Literature 
            </li> 
        </ul> 
    </li> 
```

在这样的示例中，如果我选择“3D”，我希望能够检索其父级的 rel 属性。

我玩了一下`getValue`mcDropDown插件的功能，没有成功。

我看到这个插件在 dom 树中创建了报告列表树结构的隐藏元素，并且`getValue`函数也使用它们，但是我找不到检索父级的方法（我`parent()`当然尝试了 jquery 的功能） ...

有人知道如何获得父母吗？

我真的需要这个功能，所以如果有人有一些解决方案，包括不使用 mcDropDown 而是使用任何其他插件（或使用 css 和 jquery 本机创建下拉菜单），它会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:27:03.877

```
$(document).ready(function (){
    $("#current_rev").html("v"+$.mcDropdown.version);
    $("#category").mcDropdown("#categorymenu",{
        select: function(value,name){
             alert($("[rel="+value+"]").parents('li').attr("rel"))
        }            
    });
}); 
```

这是父级的 rel 。如果所选元素没有父元素，则未定义。

# bash - 如何在 shell 脚本中说 ${foo}123？

> ID：10912817
> 
> 赞同：0
> 
> 时间：2012-06-06T10:56:08.423
> 
> 标签：bash, shell, unix

我正在构建一个 shell 脚本，用于检查循环中是否存在日志文件。我试图打开的日志文件是这样命名的：`access_log-%02d00-%02d59`%02d 是一个小时。在 perl 中我只能说`"access_log-${hour}00-${hour}59"`. 但是我如何在 shell 脚本中做到这一点？这是我的代码。它不起作用，因为它认为 var 名称是`$HOUR00`and `$HOUR59`。

```
for HOUR in 00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23; do
   if [ -e tmp/access_log-$HOUR00-$HOUR59 ]; then
        # do stuff here
   fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:59:03.027

我自己想通了。我的工作方式与 perl 相同。`${HOUR}00`成功了。

# c# - 使用 LINQ 找到价值最低的产品？

> ID：10912819
> 
> 赞同：4
> 
> 时间：2012-06-06T10:56:24.680
> 
> 标签：c#, linq

我正在学习 LINQ，我想从以下列表中找到最便宜的产品：

```
List<Product> products = new List<Product> { 
                new Product {Name = "Kayak", Price = 275M, ID=1}, 
                new Product {Name = "Lifejacket", Price = 48.95M, ID=2}, 
                new Product {Name = "Soccer ball", Price = 19.50M, ID=3}, 
            }; 
```

我想出了以下方法，但不知何故感觉这不是最好的方法：

```
var cheapest = products.Find(p => p.Price == products.Min(m => m.Price)); 
```

你能告诉我实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T10:59:54.280

你应该使用`MinBy`：

```
public static TSource MinBy<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, IComparable> projectionToComparable
) {
    using (var e = source.GetEnumerator()) {
        if (!e.MoveNext()) {
            throw new InvalidOperationException("Sequence is empty.");
        }
        TSource min = e.Current;
        IComparable minProjection = projectionToComparable(e.Current);
        while (e.MoveNext()) {
            IComparable currentProjection = projectionToComparable(e.Current);
            if (currentProjection.CompareTo(minProjection) < 0) {
                min = e.Current;
                minProjection = currentProjection;
            }
        }
        return min;                
    }
} 
```

只需将其添加为`public static`类中的方法（`EnumerableExtensions`？）。

现在你可以说

```
var cheapest = products.MinBy(x => x.Price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:58:10.107

或者，您可以简单地订购它们并获取第一个结果，这是假设您在`Product`对象而不是`Price`值之后；像这样。

```
var cheapestProduct = products.OrderBy(p => p.Price).FirstOrDefault();
var mostExpensiveProduct = products.OrderByDescending(p => p.Price).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:59:18.047

您需要先按价格订购，然后选择第一个。

```
if(products.Any()){
    var productWithCheapestPrice = products.OrderBy(p => p.Price).First();
} 
```

# c - InterlockedExchange() 类型函数/内在函数的 MSDN 文档不一致？

> ID：10912822
> 
> 赞同：0
> 
> 时间：2012-06-06T10:56:26.473
> 
> 标签：c, visual-c++, x86, intrinsics, lock-free

首先，我们有 InterlockedExchange64()；

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683593%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683593%28v=vs.85%29.aspx)

```
LONGLONG __cdecl InterlockedExchange64( __inout LONGLONG volatile *Target, __in LONGLONG Value ); 
```

其次，我们有编译器内在函数 _InterlockedExchange64()，注意没有 volatile；

[http://msdn.microsoft.com/en-us/library/1s26w950%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/1s26w950%28v=vs.80%29.aspx)

```
__int64 _InterlockedExchange64( __int64 * Target, __int64 Value ); 
```

接下来，我们有 InterlockedExchangePointer()，它与 ​​InterlockedExchange64() 一样，使用 volatile。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683609%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683609%28v=vs.85%29.aspx)

```
PVOID __cdecl InterlockedExchangePointer( __inout  PVOID volatile *Target, __in PVOID Value ); 
```

但是现在我们来到了指针交换的内在函数 _InterlockedExchangePointer() ，在这里我们看到了 volatile 的使用！

[http://msdn.microsoft.com/en-us/library/853x471w.aspx](http://msdn.microsoft.com/en-us/library/853x471w.aspx)

```
void * _InterlockedExchangePointer( void * volatile * Target, void * Value ); 
```

底层指令在所有情况下都是相同的，那么给出了什么？文档错误？

GCC instrincs 没有提到 volatile 进行交换，但是他们也没有提到 CAS ！所以这没有帮助。

我的观点是 CAS 目标是易变的，因为你只能在运行时知道交换是否会发生；但是原子交换不应该是易失的，因为目标总是更新的（即使它的值没有改变），所以编译器没有不确定性。

我还看到 InterlockedIncrement() 的函数是易变的，但 instrincs 不是。CAS 的内在函数对于它们的目的地来说是 volatile 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:29:16.197

MSDN 充斥着大多数小的文档错误（例如，`__readfsdword`仅在 VS 2005 文档下被标记为内核），您真正应该注意的是编译器使用的定义，在这种情况下，定义`intrin.h`（取自 VS2010 Ultimate SP1):

```
__MACHINEI(long _InterlockedExchange(long volatile *, long)) 
__MACHINEIA64(__int64 _InterlockedExchange64(__int64 volatile *, __int64)) 
```

正如我们所看到的，它们确实`volatile`是必需的指针。

最后要注意的是，您的所有链接都是 VS 2005 文档（谷歌默认链接到旧的内在函数），因此请确保使用页面顶部的下拉菜单切换到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T16:24:14.440

这些函数并不需要指向 volatile 的指针，*而是*允许*它*。也就是说，如果参数被声明为 long* 而不是 long volatile* ，那么传递 volatile 变量的地址会出现此错误：

```
cannot convert argument 1 from 'volatile LONGLONG *' to 'LONGLONG *' 
```

可以通过以下简单代码看出这一点：

```
LONGLONG a;
volatile LONGLONG b;

void DoSomething(LONGLONG* p) {}

int main() {
  DoSomething(&a);
  DoSomething(&c); // Error!
  return 0;
} 
```

在 C/C++ 中有一个悠久的传统，即误用 volatile 作为一种指示变量可能被其他线程修改的方式。这是被误导的，因为 volatile 实际上并没有为多线程提供有意义的有用语义，但是当 C++ 不承认多线程开发人员绝望时。使用 volatile 的问题在于它不会阻止编译器或 CPU 重新排序，因此在多线程代码中 99% 的情况下它都是错误的。

如果没有 C++11，安全的做法是只使用 Interlocked* 函数引用这些线程共享变量。如果你这样做，那么 volatile 是不必要的。或者，像理智的人一样使用锁。

但是，由于许多开发人员使用 atomic 标记他们的线程共享变量，因此 Interlocked* 函数必须接受这些变量。这就是为什么它们都采用指向易失性指针的类型。

# php - 如何导出动态生成的临时 csv 文件？

> ID：10912824
> 
> 赞同：7
> 
> 时间：2012-06-06T10:56:30.060
> 
> 标签：php, file-io, csv, content-type

我想生成一个包含数据的 csv 文件，我通过查询数据库获得。然后浏览器应该提示用户下载文件。问题是，readfile 函数需要一个文件名而不是句柄，但我找不到一个函数来获取这个临时文件的文件名。我想有更好的方法可以做到这一点，但我找不到它们。

```
$handle = tmpfile();
fputcsv($handle, array('year', 'month', 'product', 'count'));
header('Content-Type: application/csv');
header('Content-Disposition:attachment;filename=LS_export');
echo readfile($handle);
fclose($handle);
exit(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T10:59:22.650

您正在寻找[rewind](http://php.net/rewind)以将文件指针重置为文件的开头，然后使用[fpassthru](http://php.net/fpassthru)输出文件的所有内容。

```
rewind($handle);
fpassthru($handle); 
```

另一种解决方案是使用[tempnam](http://php.net/tempnam)生成一个独特的文件，该文件在关闭时不会被删除。完成后不要忘记手动删除它。

```
$name = tempnam('/tmp', 'csv');
$handle = fopen($name, 'w');
...
fclose($handle);
readfile($name);
unlink($name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:00:42.827

采用

```
$tmpfname = tempnam("/", "");
$handle = fopen($tmpfname, "w");
...
fclose($handle); 
```

你也有文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:02:52.510

来自 mysql

```
SELECT id, name, email INTO OUTFILE '/tmp/result.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
ESCAPED BY ‘\\’
LINES TERMINATED BY '\n'
FROM users WHERE 1 
```

并按需删除

根据需要重新定义分隔符和其他参数

# sql-server - 为什么这个不相关的查询这么慢？

> ID：10912826
> 
> 赞同：2
> 
> 时间：2012-06-06T10:56:40.903
> 
> 标签：sql-server, query-optimization

我有这个查询...

```
SELECT Distinct([TargetAttributeID]) FROM
    (SELECT distinct att1.intAttributeID as [TargetAttributeID]
        FROM AST_tblAttributes att1
        INNER JOIN
        AST_lnkProfileDemandAttributes pda
        ON pda.intAttributeID=att1.intAttributeID AND pda.intProfileID = @intProfileID

    union all

    SELECT distinct ca2.intAttributeID as [TargetAttributeID] FROM
        AST_lnkCapturePolicyAttributes ca2
        INNER JOIN
        AST_lnkEmployeeCapture ec2 ON ec2.intAdminCaptureID = ca2.intAdminCaptureID AND ec2.intTeamID = 57
        WHERE ec2.dteCreatedDate >= @cutoffdate) x 
```

[上述查询的执行计划](http://pastebin.com/gh2R510y)

两个内部差异分别查看 32 行和 10,000 行。此查询返回 5 行并在 1 秒内执行。

如果我然后使用此查询的结果作为`IN`类似的主题......

```
SELECT attx.intAttributeID,attx.txtAttributeName,attx.txtAttributeLabel,attx.txtType,attx.txtEntity FROM
    AST_tblAttributes attx WHERE attx.intAttributeID 
    IN
    (SELECT Distinct([TargetAttributeID]) FROM
    (SELECT Distinct att1.intAttributeID as [TargetAttributeID]
        FROM AST_tblAttributes att1
        INNER JOIN
        AST_lnkProfileDemandAttributes pda
        ON pda.intAttributeID=att1.intAttributeID AND pda.intProfileID = @intProfileID
    union all
    SELECT  Distinct ca2.intAttributeID as [TargetAttributeID] FROM
        AST_lnkCapturePolicyAttributes ca2
        INNER JOIN
        AST_lnkEmployeeCapture ec2 ON ec2.intAdminCaptureID = ca2.intAdminCaptureID AND ec2.intTeamID = 57
        WHERE ec2.dteCreatedDate >= @cutoffdate) x) 
```

[上述查询的执行计划](http://pastebin.com/grRPXveK)

然后它需要超过3分钟！如果我只是获取查询的结果并执行`IN`“手动”，那么它会很快返回。

但是，如果我删除两个内部`DISTINCTS`......

```
SELECT attx.intAttributeID,attx.txtAttributeName,attx.txtAttributeLabel,attx.txtType,attx.txtEntity FROM
    AST_tblAttributes attx WHERE attx.intAttributeID 
    IN
    (SELECT Distinct([TargetAttributeID]) FROM
    (SELECT att1.intAttributeID as [TargetAttributeID]
        FROM AST_tblAttributes att1
        INNER JOIN
        AST_lnkProfileDemandAttributes pda
        ON pda.intAttributeID=att1.intAttributeID AND pda.intProfileID = @intProfileID
    union all
    SELECT ca2.intAttributeID as [TargetAttributeID] FROM
        AST_lnkCapturePolicyAttributes ca2
        INNER JOIN
        AST_lnkEmployeeCapture ec2 ON ec2.intAdminCaptureID = ca2.intAdminCaptureID AND ec2.intTeamID = 57
        WHERE ec2.dteCreatedDate >= @cutoffdate) x) 
```

[上述查询的执行计划](http://pastebin.com/GK9A9gku)

..然后它会在一秒钟内恢复。

SQL Server 在想什么？难道它不知道它可以执行两个子查询并将结果用作`IN`. 它看起来和相关子查询一样慢，但它不相关！！！

在 Show Estimate Execution 计划中，有三个 Clustered Index Scans，每个扫描的成本为 100%！（执行计划在[这里](http://pastebin.com/CLdQGGsq)）

谁能告诉我为什么内部`DISTINCTS`使这个查询慢得多（但仅在用作`IN`...的主题时）？

**更新**

抱歉，我花了一段时间才制定这些执行计划......

[查询 1](http://pastebin.com/gh2R510y)

[查询 2（慢一）](http://pastebin.com/grRPXveK)

[查询 3 - 没有内部差异](http://pastebin.com/GK9A9gku)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T17:15:01.940

老实说，我认为归根结底是这样一个事实，就关系运算符而言，您在那里有一个无偿的巴洛克式查询，并且 SQL Server 在允许自己找到替代执行计划的时间内停止搜索替代执行计划。

在计划编译的解析和绑定阶段之后，SQL Server 将对生成的树应用逻辑转换，估计每个的成本，并选择成本最低的一个。它不会穷尽所有可能的转换，只是在给定窗口内可以计算的尽可能多。因此，据推测，它在达到一个好的计划之前已经烧毁了那个窗口，并且它是在 AST_tblAttributes 上添加的外部半自连接将它推到了边缘。

巴洛克风格如何？好吧，首先，有这个（为降噪而简化）：

```
select distinct intAttributeID from (
   select distinct intAttributeID from AST_tblAttributes ....
   union all
   select distinct intAttributeID from AST_tblAttributes ....
   ) 
```

连接两组，并投射独特的元素？原来有运营商，它被称为`UNION`. 因此，如果在计划编译期间有足够的时间和足够的逻辑转换，SQL Server 将意识到您*真正*的意思是：

```
select intAttributeID from AST_tblAttributes ....
union
select intAttributeID from AST_tblAttributes .... 
```

**但是等等**，你把它放在一个相关的子查询中。好吧，相关子查询是半连接，正确的关系不需要在半连接中进行逻辑重复数据删除。因此 SQL Server 可能会在逻辑上将查询重写为：

```
select * from AST_tblAttributes
where intAttributeID in (
  select intAttributeID from AST_tblAttributes ....
  union all
  select intAttributeID from AST_tblAttributes ....
  ) 
```

然后进行物理计划选择。但要做到这一点，它必须先看清楚细节，这可能会超出优化窗口。

* * *

编辑：

实际上，自己探索并证实上述推测的方法是将查询的两个版本放在同一个窗口中并并排比较估计的执行计划（SSMS 中的 Ctrl-L）。保留一个，编辑另一个，看看有什么变化。

您将看到一些替代形式被认为是逻辑等效的并生成相同的良好计划，而其他形式则生成不太理想的计划，因为您使用了优化器。**

然后，您可以使用`SET STATISTICS IO ON`并`SET STATISTICS TIME ON`观察 SQL Server 执行查询的实际工作量：

```
SET STATISTICS IO ON
SET STATISTICS TIME ON

SELECT ....
SELECT ....

SET STATISTICS IO OFF
SET STATISTICS TIME OFF 
```

输出将出现在消息窗格中。

** 或者不是——如果它们都生成相同的计划，但实际执行时间仍然像你说的那样变化，那么可能会发生其他事情——这并非闻所未闻。尝试比较实际的执行计划并从那里开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:24:21.067

埃尔龙诺科

首先是一个可能的解释：

您说：“此查询返回**5 行**并在 1 秒内执行。”。但是它 ESTIMATE 返回了多少行？如果估计值相差很大，使用查询作为 IN 部分的一部分可能会导致您扫描整个：外部部分中的 AST_tblAttributes，而不是查找它的索引（这可以解释很大的差异）

如果您共享了不同变体的查询计划（请作为文件），我想我应该能够让您了解这里发生了什么。它还可以让我们验证解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T00:28:51.383

编辑：每个 DISTINCT 关键字都会为您的查询计划添加一个新的排序节点。基本上，通过在其中放置其他 DISTINCT，您将迫使 SQL 一次又一次地重新排序整个表，以确保它不会返回重复项。每个这样的操作都可以使查询成本增加四倍。[这是](http://webbtechsolutions.com/2009/07/24/the-effects-of-distinct-in-a-sql-query/)对 DISTINCT 运算符可以产生的效果的一个很好的回顾，意料之外的。我自己也被这个咬过。

* * *

您使用的是 SQL 2008 吗？如果是这样，您可以试试这个，将 DISTINCT 工作放入 CTE，然后加入您的主表。我发现 CTE 非常快：

```
WITH DistinctAttribID
AS
(
SELECT Distinct([TargetAttributeID]) 
FROM (
    SELECT distinct att1.intAttributeID as [TargetAttributeID] 
        FROM AST_tblAttributes att1 
        INNER JOIN 
        AST_lnkProfileDemandAttributes pda 
        ON pda.intAttributeID=att1.intAttributeID AND pda.intProfileID = @intProfileID 

    UNION ALL 

    SELECT distinct ca2.intAttributeID as [TargetAttributeID] FROM 
        AST_lnkCapturePolicyAttributes ca2 
        INNER JOIN 
        AST_lnkEmployeeCapture ec2 ON ec2.intAdminCaptureID = ca2.intAdminCaptureID AND ec2.intTeamID = 57 
        WHERE ec2.dteCreatedDate >= @cutoffdate
) x

SELECT attx.intAttributeID,
    attx.txtAttributeName,
    attx.txtAttributeLabel,
    attx.txtType,
    attx.txtEntity 
FROM AST_tblAttributes attx 
JOIN DistinctAttribID attrib
    ON attx.intAttributeID = attrib.TargetAttributeID 
```

# iphone - 我应该把我的图像放在我的 iPhone 项目的什么地方？

> ID：10912827
> 
> 赞同：2
> 
> 时间：2012-06-06T10:56:42.727
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我是 iPhone 开发新手。

现在我有一个项目，它的目录结构如下所示：

```
Tutorial
       \__Tutorial\
                 \__1.png
                 \__TutorialViewController.h
                 \__TutorialViewController.m
                 \__TutorialViewController.xib
                 \__Supporting Files\
       \__Frameworks\
       \__Products\ 
```

我尝试使用 [UIImage imageNamed:@"1.png"] 将图像渲染到视图：

```
 UIImage *image = [UIImage imageNamed:@"1.png"];
 imageView.image = image;
 [image release]; 
```

但是图像不显示。

所以我想知道我应该在哪里放置图像？

另外，如果我有很多图像（比如 1000 个数字），应该怎么办？

* * *

这是我的代码：

```
#import "TutorialViewController.h"

@implementation TutorialViewController
@synthesize labelText;
@synthesize imageView;

-(void) click:(id)sender {
    NSString *titleOfButton = [sender titleForState:UIControlStateNormal];
    NSString *newText = [[NSString alloc]initWithFormat:@"%@",titleOfButton];
    // Change Image When Clicking Color Button
    if([titleOfButton isEqualToString:@"Blue"]){
        NSLog(@"Blue");
        imageView.image = [UIImage imageNamed:@"a.png"];
    }else{
        imageView.image = [UIImage imageNamed:@"b.png"];;
        NSLog(@"Else");
    }
    labelText.text = newText;
    [newText release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:58:12.620

您应该创建一个名为 Resources 的文件夹并在其中添加图像。

```
UIImage *image = [UIImage imageNamed:@"IMG_0270.PNG"];
imgView_.image = image; 
```

我已经使用了上面的代码，它在我的系统上运行良好。可能是您没有在界面生成器中连接 imgView 的插座。

编辑：

我发现的问题是您没有将其添加为子视图。您应该像这样更改代码：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"]];

NSString *titleOfButton = [sender titleForState:UIControlStateNormal];
NSString *newText = [[NSString alloc] initWithFormat:@"%@", titleOfButton];

// Change Image When Clicking Color Button
if([titleOfButton isEqualToString:@"Blue"]) {
    NSLog(@"Blue");
    imageView.image = [UIImage imageNamed:@"IMG_0270.png"];
} else {
    imageView.image = [UIImage imageNamed:@"b.png"];
    NSLog(@"Else");
}

[imageView setFrame:CGRectMake(10, 10, 230, 123)];
[self.view addSubview:imageView];

// labelText.text = newText;
[newText release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:12:47.503

你的代码没有prbm。但有时图像损坏，由于这个原因它不显示，尝试一些其他图像，如果图像未添加到捆绑路径添加

> 项目目标>构建阶段>复制捆绑资源

. 可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:13:42.907

您对此声明有疑问

```
[image release]; 
```

记住何时使用 release 的最简单方法是`NARC`关键字 :)

永远记得在 4 种情况下进行释放调用。

> N 新
> 
> 一个分配
> 
> R 保留
> 
> C 复制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:34:10.443

尝试删除方法的第一行，如果您已`UIImageView`在 xib 中连接，则无需重新分配它。而且改为调用`self.imageView.image`而已`imageView.image`。

# zend-framework - 使用逻辑运算符检查权限时 Zend_Acl 内存失败

> ID：10912837
> 
> 赞同：0
> 
> 时间：2012-06-06T10:57:15.537
> 
> 标签：zend-framework, zend-acl

我正在尝试实现自定义的 Acl Assert。

```
if($acl->isAllowed($role,$resource,$privilege.':all')) {
   return true; 
} 
```

工作正常。但

```
if(($acl->isAllowed($role,$resource,$privilege.':all')) 
     || ($acl->isAllowed($role,$resource,$privilege))) {
     return true; 
} 
```

抛出一个

致命错误：第 837 行 ........\library\Zend\Acl.php 中允许的内存大小为 134217728 字节已用尽（试图分配 261904 字节）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:52:56.427

我有一个类似的问题。我已经评论了我的模型中的所有 ACL 断言，并且

> 致命错误：第 1109 行 /var/www/project/library/Zend/Acl.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 261900 字节）

变成了

> 致命错误：第 17 行 /var/www/project/application/models/User.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 261900 字节）

这实际上意味着 ACL 没有任何问题——我在无限递归调用中从自身调用一个函数。

# emacs - 如何使用 org-export 生成索引？

> ID：10912838
> 
> 赞同：4
> 
> 时间：2012-06-06T10:57:16.267
> 
> 标签：emacs, org-mode

这里的索引不是一个网站的 index.html，而是告诉你一个关键词在书中的位置的东西。
PS：导出为 HTML 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:53:59.650

用于`:makeindex`生成关键字索引。您需要在 org 文件中输入一些特殊类型。

在您的 org 文件中，您需要在相关位置添加行：

```
#+index: some-keyword 
```

在您的 .emacs 文件中，确保您`org-publish-project-alist`已打开该 `:makeindex`选项。

现在，您可以检查 theindex.html 中的关键字索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:51:11.147

使用`:makeindex`，参见[组织手册第 13 章](https://orgmode.org/manual/Generating-an-index.html)：

> 13.1.8 生成索引
> 
> Org 模式可以跨发布项目的文件生成索引。
> 
> ```
> :makeindex 
> ```
> 
> 当非零时，在文件'theindex.org'中生成索引并将其发布为'theindex.html'。
> 
> 该文件是在首次发布带有 :makeindex 集的项目时创建的。该文件仅包含一条语句
> 
> ```
> #+INCLUDE: "theindex.inc"` 
> ```
> 
> 然后，您可以通过添加标题、样式信息等来围绕此包含语句构建。
> 
> 索引条目使用“INDEX”关键字指定。包含感叹号的条目会创建一个子项。
> 
> ```
> *** Curriculum Vitae
> #+INDEX: CV
> #+INDEX: Application!CV 
> ```

# c# - 图形性能提升/GDI 替代方案？

> ID：10912840
> 
> 赞同：2
> 
> 时间：2012-06-06T10:57:23.620
> 
> 标签：c#, performance, gdi, slimdx, sharpdx

任何人都可以建议 GDI 的任何替代方案吗？原因是我有快速更新的数据，而 GDI 不支持那种渲染速度……我试过 SharpDX 和 SlimDX，但似乎没有一个能正常工作（不能强迫他们在没有错误的情况下绘制表格)

**更新 1：**我正在用 C# 开发

**更新 2：**数据绑定到 Visual Studio 2010 默认图表控件。已经编写了很多代码来添加功能，并且在大量数据传入后发现了滞后。原因是我需要与 .NET Framework 4 和 Windows XP 及更高版本兼容。经过一番调查，我发现 SlimDX 和 SharpDX 对显卡、驱动程序以及在 Windows XP 上运行的问题都有严格的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:11:14.457

GDI 是纯软件渲染，以及处理透明度渲染的 alpha 通道的 GDI+。与基于 GPU 的库相比，这两个库非常有限且速度较慢。

我的建议是你应该花时间来实现一个基于 SharpDX Direct2D 的绘图引擎。我从来没有听说过你谈到的表单问题，我将 SharpDX 与 Winforms 和 WPF 一起使用，一切都很好！

如果速度是最重要的标准，那么您将不得不在基于 GPU 的渲染引擎上投入时间，GDI 会变慢并且不适合实时渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:20:07.077

老实说，我觉得奇怪的是 GDI 在这种情况下还不够，但有很多选择：你可以选择 DirectDraw 以获得完整的功能，GDI+ 可以获得更高级的操作和选项，甚至是 GTK+ 等外部软件。

# android - 安卓 | 使用.Class文件在Linux、Window上编译

> ID：10912845
> 
> 赞同：0
> 
> 时间：2012-06-06T10:57:41.893
> 
> 标签：android, jar, saxon

我的最终目标是在 Android 上使用 Saxon [SaxOn](http://sourceforge.net/projects/saxon/files/)，从给定链接（ .JAR ）中获取其类文件，然后挂断，

1 -- 这些类文件我不能直接在 Android 上使用，它说找不到类，（.net.sf.saxon.transformimpl）它显示运行时异常，

2 -- 通过看到上述错误，我的结论是，似乎我需要在 Android 上移植 Saxon，但无法消化，因为 Android 也是基于 Java 的，这些是 Java 库

3 -- 我们认为 Saxon Compiled on JVM 和 Android 具有 DVM 可能这会导致问题，

4——我做了一个简单的实验，在linux中实现了一个hello world library (.JAR)文件，并导入到Android中，

5 -- 现在使用这个类文件 (Hello World) Android 程序再次出现同样的错误 (class not foud),

总之 ：

是不是可以利用现有的JAR文件（通过在任何平台上编译）直接进入Android，

如果可能的话，那将是什么方法，

任何人都可以通过在 Android 上使用 Saxon

谢谢看问题，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:26:32.673

如果您使用的是 Eclipse，则必须将 jar 文件添加到构建路径。然后你应该能够简单地使用`import com.example.ClassName`来导入你的类。

在 Eclipse 中添加你的 jar：

1.  通过右键单击您的项目名称选择“属性”。
2.  从列表中选择“Java 构建路径”。
3.  按下“添加罐子”按钮，从系统中选择罐子文件。
4.  从该 Jar 文件添加您使用的类所需的导入。
5.  重新编译。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T23:38:49.003

Android 目前不支持 Saxon。如果我们能抽出时间，这是我们想做的事情，但是我们的时间很多，而且我们的资源有限。我不认为这样做有任何不可克服的问题，但是需要进行相当多的小改动，并且在不分叉代码的情况下这样做将是一个挑战，这显然是不可取的。

# php - PHP $_SESSION 值在 www 上有所不同

> ID：10912847
> 
> 赞同：0
> 
> 时间：2012-06-06T10:57:45.300
> 
> 标签：php

我有一个网站。人们可以在这里登录

```
sub.domain.com 
```

如果他们在这里登录，会话将完成其工作并且用户将登录。在 sub.domain.com 的任何页面上，将返回会话值，因此它可以正常工作。

但也可以从 www.sub.domain.com 访问站点。当用户登录 sub.domain.com 时，会话值在 www.sub.domain.com 为空。我的意思是如果用户在 sub.domain.com 登录，当他导航到 www.sub.domain.com 时，网站会说“请登录”，但用户已经在没有“www”的网站上登录。希望一切都清楚，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:59:43.470

**在 session_start 之前**的顶部添加主脚本。

```
 ini_set('session.cookie_domain', '.domain.com' ); 
```

如果您在启用 suhosin 的情况下运行 PHP，请尝试禁用那里的设置

```
 ini_set("suhosin.session.cryptdocroot", "Off");
  ini_set("suhosin.cookie.cryptdocroot", "Off"); 
```

源[PHP 错误跟踪器](https://bugs.php.net/bug.php?id=43682)

感谢@RandomDave

> 您可以从 $_SERVER['HTTP_HOST'] 动态确定域，因此您不必对域名进行硬编码

```
 ini_set('session.cookie_domain', strtolower(substr($_SERVER['HTTP_HOST'], 0, 4)) == 'www.' ? substr($_SERVER['HTTP_HOST'], 3) : '.'.$_SERVER['HTTP_HOST'] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:00:13.850

为您的会话设置 cookie_domain。

```
ini_set('session.cookie_domain', '.domain.com' ); 
```

或者在您的`php.ini`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:01:18.577

PHP Sessions 使用 cookie 来存储会话标识符，如果您正在浏览`www.`它，则将设置 cookie。

您可以通过设置以点为前缀的会话 cookie 域来缓解此问题，该点本质上将充当`*.domain.com`使用`.domain.com`. 你这样做`session_set_cookie_params`是这样的：

```
session_set_cookie_params(0, '/', '.domain.com'); 
```

一个更安全的例子是使用`session_get_cookie_params`并重新传递其他值。更好的是，您可以修改`php.ini`服务器上的`session.cookie_domain`值以将值设置为`.domain.com`（您也可以`ini_set`用于此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:06:59.050

您还可以`.htaccess`在网站的根目录添加一个

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^sub\.domain\.com
RewriteRule ^(.*)$ http://www.sub.domain.com$1 [R=permanent,L] 
```

# javascript - JayData 上下文中的实体未定义

> ID：10912848
> 
> 赞同：1
> 
> 时间：2012-06-06T10:57:46.907
> 
> 标签：javascript, google-chrome, jaydata

我编写了这段代码以在 Chrome 中将 WebSQL 与 JayData 一起使用：

```
 $data.Entity.extend("$org.types.Department",
 {
     Id: { type: "int", key: true, computed: true },
     Name: { type: "string", required: true }
 });

$data.EntityContext.extend("$org.types.OrgContext", {
    Department: { type: $data.EntitySet, elementType: $org.types.Department }
});

$org.context = new $org.types.OrgContext({ name: "WebSQL", databaseName:"Organization",
    dbCreation: $data.storageProviders.sqLite.DbCreationType.DropTableIfChanged
});

var department = new $org.types.Department({ Name: 'Department1' });
$org.context.Department.add(department);
$org.context.saveChanges(); 
```

但问题是，在 $org.context.Department.add(department); 行， ***“部门”***未定义。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:09:41.530

问题是： $data WebSQL 提供程序名称是: `webSql`，这样该示例就可以完美运行。当然，还需要 onReady 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:06:16.877

您必须使用上下文的 onReady 函数。当您尝试将新的部门实体添加到实体集时，上下文尚未初始化。使用是这样的：

```
$org.context.onReady(function(db){
    var department = new $org.types.Department({ Name: 'Department1' });
    db.Department.add(department);
    db.saveChanges(function(){
        ...
    });
}); 
```

建议始终使用回调函数，因为一切都是异步的，并且您不知道该进程在回调之外已准备好。

# jquery - 在下一个和上一个按钮上更改当前选定选项卡的类

> ID：10912861
> 
> 赞同：1
> 
> 时间：2012-06-06T10:58:55.160
> 
> 标签：jquery

我想通过单击下一个和上一个按钮来更改当前选定选项卡的 css 类。下一次和上一次点击工作正常。但是我也想更改当前选定选项卡的 css 类。

```
$(".next-tab").click(function () {
            var selected = $("#tab-div").tabs("option", "selected");
            $("#tab-div").tabs("option", "selected", selected + 1);

        });

        $(".prev-tab").click(function () {
            var selected = $("#tab-div").tabs("option", "selected");
            $("#tab-div").tabs("option", "selected", selected - 1).addClass("current");
            var selected_tab = $(this).find("a").attr("href");
            $("#tab-div li a:not(first)").removeClass("current");
            $("#tab-div li a:first").addClass("current");
        }); 
```

有什么意见或建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:00:22.097

你可以使用这个方法`.andSelf()`

[http://api.jquery.com/andself/](http://api.jquery.com/andself/)

```
.andSelf().addClass("current"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:20:18.993

使用 jquery ui 选项卡解决。

谢谢大家

# android - Phonegap Android应用程序重新启动而不是在单击主页按钮后恢复

> ID：10912867
> 
> 赞同：3
> 
> 时间：2012-06-06T10:59:04.157
> 
> 标签：android, cordova, application-restart, home-button

我已经使用带有插件的 Android 应用程序创建了 PhoneGap 1.4/。

我的客户报告说，当他使用主页按钮离开应用程序，然后使用应用程序图标重新启动它时，应用程序从头重新启动而不是恢复。但是，当他按下锁定或进入睡眠状态时，应用程序会以预期的方式恢复。

应用程序的初始化过程是这样声明的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("EMOFIDActivity", "onCreatee " + this.getIntent());
    super.loadUrl("file:///android_asset/www/index.html");
}
    @Override
public void onPause() {
    Log.d("EMOFIDActivity", "onPause " + this.getIntent());
    super.onPause();
}// On click of home button this method is getting called

@Override
public void onResume() {
    Log.d("EMOFIDActivity", "onResume " + this.getIntent());
    super.onResume();
} // On click of app icon application is getting relaunched without coming to this function. 
```

我已经包含了三个 android 插件，并像这样覆盖了 onPause() 和 onResume() 方法。这里也根本没有调用 OnResume() 方法。

```
 @Override
public void onPause(boolean multitasking) {
    Log.d(TAG, "onPause " + ctx.getIntent());
    super.onPause(multitasking);
    stopNfc();
}

@Override
public void onResume(boolean multitasking) {
    Log.d(TAG, "onResume " + ctx.getIntent());
    super.onResume(multitasking);
    startNfc();
} 
```

有没有办法解决这个问题并回到我暂停我的应用程序的状态？在这个过程中可能会出现什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T20:47:25.237

我有同样的问题 。当我单击应用程序图标以在后台重新启动已经运行的应用程序时，我的应用程序正在重新启动。

基本上如果

> 安卓：启动模式

设置为标准或未设置，然后为应用程序创建一个新的意图，并且应用程序的旧暂停状态不会恢复。

所以我发现最好的方法是申请

```
android:launchMode="singleTask" 
```

在 AndroidManifest.xml -> 里面。

请考虑这个例子：

```
 <activity android:name="Example" android:label="@string/app_name"
                 android:theme="@android:style/Theme.Black.NoTitleBar"                android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
                 android:launchMode="singleTask">
              <intent-filter>
                  <action android:name="android.intent.action.MAIN" />
                  <category android:name="android.intent.category.LAUNCHER" />
              </intent-filter>
          </activity> 
```

# iphone - C# 中 iPhone 应用程序的 SQLite 连接字符串

> ID：10912870
> 
> 赞同：0
> 
> 时间：2012-06-06T10:59:13.943
> 
> 标签：iphone, string, sqlite, connection

我正在尝试使用 MonoDevelop 和 C# 学习 iPhone 应用程序开发。我创建了一个 sqlite 数据库文件`userinfodb_v1.sqlite`并将其放在我的项目中名为 Data 的子文件夹中。现在我正在尝试为应用程序编写连接以从表中获取数据。我对如何形成连接字符串没有太多线索，因为我才刚刚开始。这就是我正在做的事情：

```
string strconn=Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Personal), "Data");
scon=new SqliteConnection(strconn);
scon.Open(); 
```

但是，由于连接失败，这不起作用。我应该怎么做才能建立连接？我的代码中的错误在哪里？你能帮我改正吗？任何帮助将不胜感激。是什么`Environment.SpecialFolder`意思？我应该将数据库文件保存在哪里才能正确访问它？

非常感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:30:42.793

当您的应用程序启动时，您需要将数据库文件从捆绑包复制到个人文件夹。

# lotus-notes - Note 中的版本升级是否会导致任何重大问题？

> ID：10912873
> 
> 赞同：0
> 
> 时间：2012-06-06T10:59:19.990
> 
> 标签：lotus-notes, lotus-domino

实际上我们使用的是notes 6.5。我们计划将其升级到 8.x。但是我们维护了很多大约50个数据库。如果我们升级服务器。它会引起什么重大的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:27:30.607

它应该是向后兼容的。升级数据库 ODS 以避免任何奇怪。新功能是复合应用程序、Eclipse 插件、小部件/实时文本和 XPage。但是您不需要编写这些代码来运行早期的应用程序。

我还建议阅读信息中心的“……中的新功能”部分。它将详细说明添加/更改的任何编程功能。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp)

您的问题已标记为 XPages，但 R6 中没有 XPages，所以我不确定这与您要问的内容相关吗？（或者你可以扩展吗？）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T00:16:50.117

西蒙是正确的，它*应该*是向后兼容的。Notes 和 Domino 在兼容性方面有着出色的记录。你不应该有任何重大问题。IBM 偶尔会出现小错误，但它几乎总是被视为错误并在下一个版本中修复。一个例外是 @IfError 函数，IBM 已宣布该函数已过时。

但是，您谈论的是版本的大跃进，跨越了超过 8 年的产品发布差异。我认为这些年发生了什么小问题，靠人们的记忆太长了，但是有一家名为 TeamStudio 的公司在跟踪此类问题方面做得非常好，并且有一个产品（TS 升级过滤器）这将扫描您的应用程序以识别它们。无论如何，我强烈建议您创建一个测试服务器并彻底测试您的应用程序。

# java - 我一按 Escape，jvm 就会崩溃

> ID：10912878
> 
> 赞同：-1
> 
> 时间：2012-06-06T10:59:32.190
> 
> 标签：java, c, multithreading, java-native-interface

> **可能重复：**
> [这个对 java 方法的调用有什么问题？](https://stackoverflow.com/questions/10895826/what-is-wrong-with-this-call-to-the-java-method)

每当按下转义键时，以下 C 代码片段都会调用 java 函数。C 代码片段的第一个块在不同的线程上执行，第二个块在不同的线程上执行。当我按转义键时，`escape key pressed`显示消息，然后 jvm 崩溃。为什么不调用 java 函数？

*C代码：*

```
 if(called) {// starts on a different thread
    switch(param) {
        case VK_CONTROL:
            printf("Control pressed !\n");
            //(*Env)->CallVoidMethodA(Env,Obj,mid,"11");
            break;
        case VK_SHIFT:
            printf("Shift pressed !\n");
            //(*Env)->CallVoidMethodA(Env,Obj,mid,"10");
            break;
        case VK_ESCAPE:
            printf("Escape pressed !\n");
            JavaVM *jvm;
            JNIEnv *env;
            jmethodID mid;
            env = (*jvm)->AttachCurrentThread(jvm,&env,NULL);
            jclass cls = (*env)->GetObjectClass(env,Obj);
            mid = (*env)->GetMethodID(env,cls,"callBack","(Ljava/lang/String;)V");
            (*env)->CallVoidMethodA(env,Obj,mid,(*env)->NewStringUTF(env,"1B")); // Calling the java function
            break;
        default:
            printf("The default case\n");
            break;
    }}

    void Java_keylogger_TestKeys_initializeJNIVars
     (JNIEnv *env, jobject obj) { // starts on a different thread

      Obj = (*env)->NewGlobalRef(env,obj);
      if(Obj == NULL) {
        printf("Obj is Null\n");
      }
      called = TRUE;
   } 
```

*Java 代码段：*

```
 public void callBack(String key) {
      String x = KeyEvent.getKeyText(Integer.parseInt(key, 16));
      System.out.println(x);
    } 
```

[我已经上传了带有输出的完整代码here。](http://programworks.co.cc/bummers/TestKeys.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:05:06.710

您需要初始化`jvm`变量。您可以使用`JNI_CreateJavaVM()`方法来执行此操作。有关更多信息，请参见此处：http: [//docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/invocation.html](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/invocation.html)

# javascript - mediaelement.js 不在 IE 9 中播放视频

> ID：10912881
> 
> 赞同：2
> 
> 时间：2012-06-06T10:59:35.647
> 
> 标签：javascript, internet-explorer-9, mediaelement.js

几天前我才开始使用 mediaelement.js。

到目前为止一切正常，除了 IE9 不显示任何视频（本机），即使声音播放正常。使用 Flash 可以正常工作。

成功回调运行后，视频元素似乎消失了（宽度和高度 = 0）。如果我手动更改大小，它只是黑色。

我尝试从 mediaelementjs.com 播放演示视频，但视频也是黑色的。

我尝试在成功回调后手动设置大小（[mediaelement.js：本地 Flash 播放显示带声音的黑色视频，除非全屏显示](https://stackoverflow.com/questions/9182682/mediaelement-js-local-flash-playback-shows-black-video-with-sound-unless-shown)）。这会显示视频元素，但它仍然只是黑色。声音还在播放。

在[IE 中的 Mediaelement.js 故障中，没有闪回工作](https://stackoverflow.com/questions/6190831/mediaelement-js-malfunction-in-ie-no-flashback-works)我找到了使用未记录属性的可能解决方案。

```
/*@cc_on
@if (@_jscript_version == 9)
    mode: 'shim',
@end
@*/ 
```

这迫使 IE 使用 flash，但我不太习惯在生产环境中使用它。

有没有人有更好的解决方案？

**更新：**我刚刚在另一台具有相同操作系统和浏览器（Windows 7，IE 9.0.8112）的计算机上进行了测试，mediaelementjs.com 上的视频播放正常。它可能与我的安装有关吗？我通常从不使用 IE，也没有改变任何东西......

# c# - 在 RavenDB 中，如何查询文档中嵌套的“对象”？

> ID：10912888
> 
> 赞同：1
> 
> 时间：2012-06-06T10:59:55.177
> 
> 标签：c#, database, nosql, ravendb

如果我存储了如下所示的文档：

```
Category {
    public string Id {get;set;}
    public List<Category> Categories {get;set;}
    ...
} 
```

本质上是一个类别，带有子类别。就我而言，只有 2 个级别（1 个父级，n 个子类别）。

查询所有类别效果很好，显示了一个不错的列表（也有嵌套的子类别列表）。我的用户只能单击一个子类别来查看所选类别中的内容。我想拉出 1 个子类别，作为`Category`.

给定一个子类别 ID，我将如何将其中一个子类别拉出来，因为它是独立的`Category`？

**更新**

我想补充一下，我通过这样做来解决这个问题：

```
 Category pCat = RavenSession.Query<Category>().Where(x => x.Categories.Any(c => c.Id == id)).FirstOrDefault();
        Category cat = pCat.Categories.Where(x => x.Id == id).FirstOrDefault(); 
```

首先获取包含子类别的类别，然后查询该类别上的子类别以拉取特定的子类别。

也许这更好，我不知道......但似乎它正在执行 2 个步骤，而 1 就足够了。

**更新 2**

这些类别中的所有 id 都是手动添加的，没有 RavenDB 自动 id（即使是子类别也有一个 Id）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:57:05.723

您的*Categories*属性包含一个对象列表，您可以在其中拥有嵌套类别的 ID。子类别，您构建它的方式，不会有 id，只有数据。

```
Category {
    public string Id {get;set;}
    public List<Category> Categories {get;set;}
    ...
} 
```

而是尝试这个模型和这个查询：

```
Category {
    public string Id {get;set;}
    public List<string> CategoryIDs {get;set;}
    ...
}

var parent = session
    .Include(i => i.CategoryIDs)
    .Load<Category>("category/1");

var children= session.Load<Category>(parent.CategoryIDs); 
```

一个警告：我没有测试这个代码，因为我现在没有一个项目来测试它，但这里是我的来源：

1.  [http://ayende.com/blog/4584/ravendb-includes](http://ayende.com/blog/4584/ravendb-includes)
2.  [RavenDB 包含 - Session.Load<T>(string[] ids)](https://stackoverflow.com/questions/9049408/ravendb-include-session-loadtstring-ids)
3.  [http://richarddingwall.name/2012/03/08/ravenb-includes-much-simpler-than-you-think/](http://richarddingwall.name/2012/03/08/ravendb-includes-much-simpler-than-you-think/)

# javascript - JavaScript `onscroll` 事件独立（无框架）

> ID：10912893
> 
> 赞同：13
> 
> 时间：2012-06-06T11:00:16.283
> 
> 标签：javascript

我需要一个独立的 JavaScript`onscroll`事件处理程序（**没有**jQuery、Prototype、mootools 等框架），它也是跨浏览器的。

我找了一个，我只能找到数千个使用 jQuery 或 Prototype 的示例。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T13:19:44.220

从[element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)：

```
 function onScrollEventHandler(ev)
    {
        alert(ev);
        //http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#event-type-scroll
    } 

    var el=window;

    if(el.addEventListener)
        el.addEventListener('scroll', onScrollEventHandler, false);   
    else if (el.attachEvent)
        el.attachEvent('onscroll', onScrollEventHandler); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-06T11:01:59.787

在 MDN 上查看：

[https://developer.mozilla.org/en/DOM/window.onscroll](https://developer.mozilla.org/en/DOM/window.onscroll)

```
window.onscroll = function (e) {
  // called when the window is scrolled.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-25T21:12:34.577

这是另一种方式

```
function ScrollFunction(){ ... }

var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
var AddEvent = window[eventMethod];
var scrollEvent = eventMethod == "attachEvent" ? "onscroll" : "scroll";

AddEvent(scrollEvent, ScrollFunction, false); 
```

# ios - 普通非管理员用户通过 iOS 应用程序将照片发布到 Facebook 粉丝页面

> ID：10912901
> 
> 赞同：14
> 
> 时间：2012-06-06T11:00:38.350
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我正在尝试将照片发布到我的应用程序 facebook 粉丝页面和用户墙上。我已经成功将照片发布到用户墙，但未能将其发布到粉丝页面墙。（**用户不一定是管理员或页面所有者，只是普通用户。由于粉丝页面具有任何人都可以发布的选项，因此用户甚至不需要先喜欢页面。对吗？**）

谷歌搜索了一段时间后，我找到[了这个答案](https://stackoverflow.com/a/9051364/1156026)。根据它，我需要一个粉丝页面的 access_token 和一个 album_id 来这样做。但我找不到任何关于如何获得它们的线索。到目前为止，我已经尝试过这段代码：

```
if ([appDelegate.facebook isSessionValid]) 
    {
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       resultImage, @"picture",
                                       nil];

        [appDelegate.facebook requestWithGraphPath:@"me/photos"
                                         andParams:params
                                     andHttpMethod:@"POST"
                                       andDelegate:self]; // to post on users wall, works fine

         NSString *path = [NSString stringWithFormat:@"my/accounts /fan_page_id?fields=access_toke/photos"];
        [appDelegate.facebook setAccessToken: FACEBOOK_ACCESS_TOKEN];

        [appDelegate.facebook requestWithGraphPath:path andParams:params andHttpMethod:@"POST" andDelegate:self]; // to post on fan page wall,  this doesn't work
    } 
```

谁能帮我这个？我在这里想念什么？提前致谢。

**更新**

根据[这个答案](https://stackoverflow.com/a/9354402/1156026)，普通用户不能从 iOS 应用程序将照片发布到粉丝页面墙上，但可以在上面分享照片。现在，我的问题是，如何实现将照片发布到用户墙并同时分享到粉丝页面墙上？是否可以？如何在粉丝专页墙上分享照片？

**更新 2**

[这个答案和问题](https://stackoverflow.com/a/8691767/1156026)说普通用户可以通过新闻提要发布到粉丝页面墙上，所以我修改了我的代码，如下所示：

```
if ([appDelegate.facebook isSessionValid]) {
        NSMutableDictionary *page_params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"fan_page_id", @"to",
                                       @"Test", @"name",
                                       @"Test", @"caption",
                                       resultImage, @"picture",
                                       nil];
        [appDelegate.facebook   dialog:@"feed"
                                andParams:page_params
                                andDelegate:self];

} 
```

但是，我不断收到这个荒谬的错误消息并且应用程序崩溃：

```
-[UIImage length]: unrecognized selector sent to instance 0x24d110
2012-06-06 19:59:03.114 app_name[2739:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage length]: unrecognized selector sent to instance 0x24d110' 
```

我现在该怎么办？

**等了这么久，现在我的脑海里浮现出一个问题，这可能吗？如果是这样，我该如何完成这项任务？如果没有，那么有什么替代方案？请帮忙。**

**更新 3**

刚刚发现iOS sdk 和 javascript sdk 中都有一个[已知的错误，用于在粉丝页面墙中发布对话框。](https://developers.facebook.com/bugs/379697955378489)图片上传也是这样吗？如果有人有避免此错误的解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T20:08:35.033

由于 API 中的错误，目前（2012 年 6 月）不可能：[https](https://developers.facebook.com/bugs/206254392780441) ://developers.facebook.com/bugs/206254392780441有详细信息。

一种解决方法是发布到`/feed`页面的连接并将图像附加到提要故事。该图像不会显示为正确上传的照片那么大，但应该可以正常工作。

该错误意味着`/PAGE_ID/photos`使用用户发布到页面的连接`access_token`会错误地将照片上传到用户的`/photos`连接。

使用页面的;时，发布到页面的`/photos`连接将按预期工作 `access_token`照片将出现在页面的照片页面、页面的时间轴上，并归属于页面本身（即“来自”页面）

如果您的应用专门用于向页面添加内容，并且具有服务器端组件，则将用户的照片放到页面上的另一种解决方法是让用户通过您自己的界面向您提供照片（即上传从用户的设备到您的服务器），并使用页面管理员之一`access_tokens`获取[页面`access_token`](https://developers.facebook.com/docs/authentication/pages/)并以这种方式进行上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:23:18.303

除了使用对话框，您可以要求用户授予[权限](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)- publish_stream
（因为对话框组件中存在错误，否则不需要）

然后您可以在页面墙上发布（假设页面允许在页面设置中）。

您可以尝试使用[graph api explorer](https://developers.facebook.com/tools/explorer/?method=POST&path=135578877774?fields=can_post,name)。您可以通过在扩展权限选项卡中授予上述权限来更改页面 ID 和测试。

**注意**
您应该记住的另一件事是，您不能在图片参数中发送图像数据。您应该提供指向图像的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:19:16.647

我只是尝试解决异常错误。可以发布到您的粉丝页面新闻提要。不可能作为粉丝页面本身发布，因为这需要身份验证（因此访问令牌要求......您必须以该用户身份登录才能以他们的身份发布）。@Igy 已经在上面解决了这个问题。

但是，您没有使用图像选择器获取图像的位置的代码。你得到的例外是因为你试图检查 UIImage 对象而不是 NSData 对象的长度（这是 Facebook 需要的）。要将您的图像从选择器转换为数据，请使用下面的代码段（将 img 变量替换为您的 UIImage）。

```
NSData *imgData = UIImageJPEGRepresentation(img, 0);

// Now call to length by facebook SDK will work and the exception will not fail
NSLog(@"Size of Image(bytes):%d",[imgData length]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:44:41.843

我认为您在发布照片时使用了错误的论据

你应该使用`@"url"`而不是`@"picture"`

我不确定这一点，但它可能会起作用。

我在 javaScript 中遇到了同样的问题，已解决。

请查看[此处](https://stackoverflow.com/questions/4999024/facebook-graph-api-upload-photo-using-javascript)以参考我的问题

# c# - 单元测试自定义角色提供者

> ID：10912902
> 
> 赞同：3
> 
> 时间：2012-06-06T11:00:42.250
> 
> 标签：c#, tdd, asp.net-membership, membership-provider

我正在尝试使用自定义角色提供者方法。每个测试都是独立的，这意味着它独立于其他测试，并且在每个测试中我都会创建测试用户、测试角色等。这很好，我知道其他方法，但这适合这个目的。

所以，我正在为 can_get_roles_for_user 苦苦挣扎，这是代码

```
[Test]
public void can_get_roles_for_user()
{
    MembershipCreateStatus status = new MembershipCreateStatus();
    provider.CreateUser("testuser", "password", "testuseremail@google.com", "question", "answer", true, Guid.NewGuid(), out status);
    provider.CreateUser("testuser2", "password", "testuseremail@google.com", "question", "answer", true, Guid.NewGuid(), out status);

    roleProvider.CreateRole("TestRole");
    roleProvider.CreateRole("AdministratorRole");

    string[] users = { "TestUser", "TestUserAdministrator" };
    string[] roles = { "TestRole", "AdministratorTestRole" };

    roleProvider.AddUsersToRoles(users, roles);

    var user = _provider.GetUser("TestUser", false);
    string[] userRoles = _roleProvider.GetRolesForUser(user.UserName);

    **//WHAT SHOULD I ASSERT HERE?**

} 
```

欢迎任何指向您或其他测试角色提供者的建议、链接。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:24:06.103

您可以简单地比较角色集合：

```
CollectionAssert.AreEquivalent(roles, _roleProvider.GetRolesForUser(user.UserName)); 
```

# codeigniter - 将 ion auth 扩展为仅允许来自某些电子邮件地址/域的注册

> ID：10912911
> 
> 赞同：0
> 
> 时间：2012-06-06T11:01:14.247
> 
> 标签：codeigniter, ion-auth

我想扩展 Ion Auth 以仅允许某些电子邮件地址注册。

我相当肯定我可以将它破解并得到一些工作，但作为codeigniter和ion auth的新手，我想知道是否有“正确的方法”来做我需要的事情？

例如，我可以“扩展” ion auth（这样我就可以更新 ion auth 核心文件而无需覆盖我的更改？）。

我注意到还有包括这个的钩子（在注册函数中）：

```
$this->ci->ion_auth_model->trigger_events('pre_account_creation'); 
```

这些在哪里解决，我可以使用它来拦截来自与我希望注册的列表不匹配的电子邮件地址的注册吗？

如果是这样，我会怎么做？我需要`$email`从`register()`函数访问变量。

还是只是从 ion auth 更改基本代码而不在将来更新它的情况？

感谢你给与我的帮助。不要担心电子邮件位，我能够确定电子邮件地址是否与所需的电子邮件域匹配，我更感兴趣的是扩展库的最佳方法是什么。

汤姆

编辑：嗨，本，感谢您的回答，并感谢您抽出宝贵时间查看我的问题。不幸的是，这没有帮助。

我猜你想要做的是在 sql 查询中添加一点“where in”子句？我猜这个`where in`位不正确，因为没有列名。

此外，此时我无法令人满意地修改 sql 查询以产生所需的输出。例如，我可以将一个钩子添加到一个字面上的函数，`$this->db->where('1=1')`并在下一个查询中输出这个 sql：

```
SELECT COUNT(*) AS `numrows` FROM (`users`) WHERE `1=1` AND `email` = 'rawr@rawr.com' 
```

该`AND email = 'rawr@rawr.com'`位将始终不返回任何行。应该是`OR email = 'rawr@rawr.com'`，但如果不编辑 Ion Auth 核心代码，我将无法更改它。

我开始怀疑（从最后几个小时的修补）我可能必须编辑 ion auth 核心才能实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:58:54.007

看看这个例子：[https ://gist.github.com/2881995](https://gist.github.com/2881995)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:24:28.120

最后我只写了一个小`form_verification`回调函数，我把它放在`auth`ion_auth 的控制器中，它检查了一个允许域的列表。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:06:50.583

当您在 auth 控制器中验证您的表单时，您会添加一个回调：

```
$this->form_validation->set_rules('email', 'Email Address', required|callback_validate_email'); 
```

在控制器中创建一个名为 validate_email 的方法：

```
function validate_email() {

    if (strpos($this->input->post('email'), '@mycompany.com') === false) {
        $this->form_validation->set_message('validate_email', 'Not official company email address.');
        return false;
    } else return true;
} 
```

这将导致创建用户失败，因为所有规则都必须通过。您还提供了一条错误消息。只要确保在表单视图端有这条线：

```
echo validation_errors(); 
```

# java - 什么时候包括什么？

> ID：10912914
> 
> 赞同：0
> 
> 时间：2012-06-06T11:01:36.177
> 
> 标签：java, hashmap, comparable, compareto

我创建了一个类`Person`（如书中所说）来保存从键盘输入的人的姓名和姓氏，然后还有另一个类`PhoneNumber`将国家代码、区号和一个人的号码封装为字符串。
Person 旨在用作 Hashmap 中的键。
类`BookEntry`封装了`Person`和`PhoneNumber`。许多`BookEntry`对象组成了一个代表电话簿的 HashMap。

`Person`实现`Comparable<Person>`所以它包含`CompareTo(Person)`方法。后来书中增加了`equals(Object anotherPerson)`方法。
我的问题是，`CompareTo`比较两个键的方法还不够吗？还是 HashMap<> 的内部机制要求我包含`equals()`比较两个键的方法？
**相比于（）**

```
public int compareTo(Person person) {
    int result = lastName.compareTo(person.lastName);
    return result==0? firstName.compareTo(person.firstName):result;
} 
```

**等于（）**

```
public boolean equals(Object anotherPerson){
    return compareTo((Person)person)==0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:10:10.857

有些数据结构将使用`compareTo`（例如 a `TreeMap`），有些将使用`equals`（例如 a `HashMap`）。

`compareTo`更重要的是，强烈建议`equals`保持一致，如[`Comparator`javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)中所述：

> 强烈建议但不严格要求 (x.compareTo(y)==0) == (x.equals(y))。一般来说，任何实现了 Comparable 接口并违反此条件的类都应该清楚地表明这一事实。推荐的语言是“注意：这个类有一个与equals不一致的自然顺序。”

[`TreeMap`在javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)中找到的另一个提示（重点是我的）：

> 请注意，树形映射维护的排序，就像任何排序映射一样，以及是否提供显式比较器，**如果该排序映射要正确实现 Map 接口，则必须与 equals 保持一致**。

最后，如果您覆盖，`equals`您还应该覆盖`hashcode`以防止在使用基于散列的结构时出现意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:06:21.540

`compareTo()`方法用于排序，

此方法的实现将确定两个人之间谁更大（更小，相同），以及在什么程度上

而`equals()`&`hashcode()`在您的情况下将用于基于哈希的数据结构（HashMap）

> 用户自定义类作为HashMap的key

`hashcode()`是的，您需要`equals()`正确实施

**另见**

*   [覆盖-等于和哈希码-in-java](https://stackoverflow.com/questions/3919331/overriding-equals-and-hashcode-in-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:17:34.297

`HashMap`uses `equals()`and not `compareTo()`，所以你必须实现它。 `TreeMap`使用`compareTo()`.

# mysql - 使用 vb.net 将插入乘以 MySQL

> ID：10912917
> 
> 赞同：0
> 
> 时间：2012-06-06T11:02:01.127
> 
> 标签：mysql, vb.net, visual-studio-2010

我在输入乘法输入时遇到问题

```
Try
    Dim StrSQL As String = "INSERT INTO boranga" & _
                           "(IdBorangA,Answers)" & _
                           "VALUES (@B_IdA,@B_Answer);"
    Dim myCommand As MySqlCommand = New MySqlCommand(StrSQL, conn.open)
    myCommand.CommandType = CommandType.Text
    Dim parameterB_IdA As MySqlParameter = New MySqlParameter("@B_IdA", MySqlDbType.VarChar, 300)
    parameterB_IdA.Value = Label1.Text

    Dim parameterB_Answer As MySqlParameter = New MySqlParameter("@B_Answer", MySqlDbType.VarChar, 300)
    parameterB_Answer.Value = TextBox1.Text

    With myCommand.Parameters
        .Add(parameterB_IdA)
        .Add(parameterB_Answer)
    End With

    Dim result As MySqlDataReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection)
    MsgBox("Tersimpan", vbYes, "boranga")

Catch SqlEx As MySqlException
    Throw New Exception(SqlEx.Message.ToString())
End Try 
```

此当前代码用于为每个表“IdBorangA”和“Answer”只输入一个输入，我尝试稍微调整一下

```
Try
    Dim StrSQL As String = "INSERT INTO boranga" & _
                           "(IdBorangA,Answers)" & _
                           "VALUES (@B_IdA,@B_Answer);"
    Dim myCommand As MySqlCommand = New MySqlCommand(StrSQL, conn.open)
    myCommand.CommandType = CommandType.Text
    Dim parameterB_IdA As MySqlParameter = New MySqlParameter("@B_IdA", MySqlDbType.VarChar, 300)
    parameterB_IdA.Value = Label1.Text
    parameterB_IdA.Value = Label2.Text

    Dim parameterB_Answer As MySqlParameter = New MySqlParameter("@B_Answer", MySqlDbType.VarChar, 300)
    parameterB_Answer.Value = TextBox1.Text
    parameterB_Answer.Value = TextBox2.Text

    With myCommand.Parameters
        .Add(parameterB_IdA)
        .Add(parameterB_Answer)
    End With

    Dim result As MySqlDataReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection)
    MsgBox("Tersimpan", vbYes, "boranga")

Catch SqlEx As MySqlException
    Throw New Exception(SqlEx.Message.ToString())
End Try 
```

通过为 IdBorangA 添加更多参数“parameterB_IdA.Value = Label1.Text”和为 Answer 添加更多参数“parameterB_Answer.Value = TextBox2.Text”

但我得到的结果是表格只填充了来自 Label2.text 和 Textbox2.text 的数据。

我不知道出了什么问题..如果你们有任何想法可以帮助我解决这个问题。随意回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:17:55.823

这条线是错误的

```
Dim myCommand As MySqlCommand = New MySqlCommand(StrSQL, conn.open) 
```

正确的是

```
Dim myCommand As MySqlCommand = New MySqlCommand(StrSQL, conn) 
```

此查询是一个**INSERT**，因此您需要调用**ExecuteNonQuery**而不是 ExecuteReader，它用于使用 MySqlDataReader 进行数据检索

而且，当然，您在数据库中只写入一条记录而不是两条，您只是在将命令发送到数据库之前更改参数的值，只会写入最后一个值。

# solr - 使用 Solr ExtendedDisMax 查询解析器进行字段搜索

> ID：10912919
> 
> 赞同：0
> 
> 时间：2012-06-06T11:02:10.230
> 
> 标签：solr, lucene, edismax, dismax

我在将 Solr **ExtendedDisMax**查询解析器与包含非普通查询中的字段**搜索的查询一起使用时遇到问题。**

案例如下。

如果我向 SOLR 发送带有参数的 edismax 请求（defType=edismax）

1.  qf=字段1^10
2.  q=field2:ciao
3.  debugQuery=on（用于调试目的）

solr 按照我的预期解析查询，实际上响应的调试部分告诉我

```
 [parsedquery_toString] => +field2:ciao 
```

但是，如果我使表达式稍微复杂一点，例如将条件放入括号中： 1\. qf=field1^10 2\. q=(field2:ciao) 我得到

```
[parsedquery_toString] => +(((field1:field2:^2.0) (field1:ciao^2.0))~2) 
```

Solr 似乎无法识别字段语法。

我在文档中没有发现任何关于这种行为的提及[，](http://wiki.apache.org/solr/ExtendedDisMax)而是他们说

> 此解析器支持完整的 Lucene QueryParser 语法，包括布尔运算符“AND”、“OR”、“NOT”、“+”和“-”、**字段搜索**、术语提升、模糊...

这个问题真的让我很恼火，因为即使使用 edismax 解析器，我也想做复杂的布尔和字段查询。

您知道解决此问题的方法吗？

**编辑**：Solr 版本是 3.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:44:17.093

如果您使用的是 Solr 3.6，则当前存在与 Solr 3.6 一起引入的 eDisMax 和 Fielded 搜索的问题。解决方法是在字段名称前加一个空格。

因此，将您的查询更改为以下内容：

1.  qf=字段1^10
2.  q=(field2:ciao)

有关详细信息，请参阅[eDismax：无法识别由括号包裹的字段查询](https://issues.apache.org/jira/browse/SOLR-3377)。

# c - 使用 c/c++ 发送和验证 SSL 证书

> ID：10912921
> 
> 赞同：0
> 
> 时间：2012-06-06T11:02:31.573
> 
> 标签：c, ssl, openssl, ssl-certificate, x509certificate

我实际上正在研究协议安全性。我需要发送证书并在另一端进行验证。

现在这是我的计划：
1 像普通数据流一样发送证书链
2\. 在另一端捕获它并将其存储在 char[] 缓冲区中

现在，如何从这个 char[]buffer 中验证证书并提取所需的参数？

我需要它在 c/c++ 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T05:49:37.730

[这篇关于使用 OpenSSL 验证使用证书存储的](http://kahdev.wordpress.com/2009/02/15/verifying-using-a-certificate-store/)博客文章展示了如何针对 CA 验证证书。

# mysql - 在mysql中创建每周计划事件

> ID：10912923
> 
> 赞同：1
> 
> 时间：2012-06-06T11:02:56.050
> 
> 标签：mysql, scheduled-tasks, mysql-event

错误 #1064 如果我做错了什么，请给我一些好的教程，当前关注 mysql 文档

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DO BEGIN INSERT INTO week_stats (profileid,likes,dislikes,ragepoints) SELECT id' at line 3

DELIMITER $$
CREATE EVENT week_stats
ON SCHEDULE EVERY  WEEK 
DO
BEGIN
INSERT INTO week_stats (id,likes,dislikes,points) 
SELECT id,likes,dislikes,points FROM profile;
END $$
DELIMITER ; 
```

mysql版本为5.1.61-0ubuntu0.11.10.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:50:01.900

语法不正确。您必须在 EVERY 子句中指定时间间隔，例如 - 'EVERY 1 WEEK' 或 'EVERY 2 WEEK'。

[创建事件语法](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)。

# javascript - 使用 Javascript 函数重新加载 HTML 元素

> ID：10912925
> 
> 赞同：3
> 
> 时间：2012-06-06T11:03:02.960
> 
> 标签：javascript, html

我有一个嵌入在 DIV 中的 flash 对象。现在我想在该 div 上方使用一个链接（'a' 标签），以便用户能够重新加载该 flash 拨号程序，或者更具体地说，它包含在其中的 div 标签（我无法以任何方式更改 flash 文件）。

我试过使用下面的这个 JS 函数，但它不起作用（点击“重新加载”链接时不重新加载 div 和内容。

```
<div class="userProfile">
<script type="text/javascript">
     function refreshDialer(){
             document.getElementById("dialerDiv1").contentWindow.location.reload(true);
            }
</script>
<a href="javascript: refreshDialer()">Reload</a>
<div id="dialerDiv1">
    <embed type="application/x-shockwave-flash" wmode="opaque"                     
            src="http://dummysite.com"
            width="301"
            height="401"
            id="popUpSwf"
            name="popUpSwf"
            quality="high"
            border="none"
            allowscriptaccess="always"
                            pluginspage="http://www.adobe.com/go/getflashplayer"
            scale="noscale"
            menu="false"
            flashvars="#" />
</div>
</div> 
```

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T11:29:19.537

尝试这个：

```
function refreshDialer(){
   //alert("In function");
   var container = document.getElementById("dialerDiv1");
   var content = container.innerHTML;
   //alert(content);
   container.innerHTML= content;
} 
```

[以](http://jsfiddle.net/NR2k6/)youtube 链接为例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:22:05.510

你可以，但你使用的方式是错误的。当您想重新加载某些内容时，您只需附加一个搜索查询，以便它刷新源。

例如，当有一个经常变化的图像（比如验证码）并且你想再次加载它而不刷新浏览器时，你可以这样做：

初始代码：

```
<img src="captcha.png" alt="captcha" /> 
```

刷新代码：

```
<img src="captcha.png?1" alt="captcha" /> 
```

因此，同样的技术也可以在您的页面中使用。所以`DIV`的 ID 是`'dialerDiv1'`对的，为此，如果你使用 jQuery，你可以这样刷新：

```
function refreshDialer()
{
    var d = new Date();
    document.getElementByTagName('embed')[0].setAttribute('src',  + document.getElementByTagName('embed')[0].getAttribute('src') + d.getMilliseconds());
} 
```

或者，如果您不使用 jQuery，则需要以`setAttribute()`这种方式使用该函数：

```
function refreshDialer()
{
    var d = new Date();
    $('#dialerDiv1 embed').attr('src', $('#dialerDiv1 embed').attr('src') + d.getMilliseconds());
} 
```

简单的。希望这可以帮助。

# php - 使用正则表达式 PHP 搜索字符串

> ID：10912928
> 
> 赞同：0
> 
> 时间：2012-06-06T11:03:11.047
> 
> 标签：php, regex, string

我有一个字符串，我需要搜索这个字符串并能够将地址详细信息分配给一个变量：

它在字符串中的外观：

```
infoone:"infoone"infotwo:"infotwo"address:"123 fake street pretend land"infothree:"infothree"infofour:"infofour" address:"345 fake street pretend land"infofive: "infofive"infosix: "infosix" 
```

我将如何使用正则表达式来搜索这个字符串，以仅在单词地址之后提取反逗号中的数据，？

注意：我不能定位短语“123 fake street fake land”，因为这只是使用引号中可能出现的内容的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:10:09.450

这是一个很好的正则表达式

```
^address:"([^"]*) 
```

这就是 php 中的选项，以便 ^ 在行的开头匹配，我们取出第 1 组

```
preg_match_all('/^address:"([^"]*)/m', $subject, $result, PREG_PATTERN_ORDER);
$result = $result[1]; 
```

**更新 1**

```
preg_match_all('/^address:"([^"]*)/m', $subject, $result, PREG_SET_ORDER);
for ($matchi = 0; $matchi < count($result); $matchi++) {
    for ($backrefi = 0; $backrefi < count($result[$matchi]); $backrefi++) {
        # Matched text = $result[$matchi][$backrefi];
    } 
} 
```

**更新 2**

使用新的样本输入，只需在开头的 ^ 处留下，这样它就变成了

```
address:"([^"]*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:06:26.413

好吧，正则表达式本身就是`^address:"(.*)"$`.

显然，您需要添加相关[`preg_match()`](http://php.net/manual/en/function.preg-match.php)调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:55:10.663

使用这个正则表达式

```
$str='infoone:"infoone"infotwo:"infotwo"address:"123 fake street pretend land"infothree:"infothree"infofour:"infofour" address:"345 fake street pretend land"infofive: "infofive"infosix: "infosix"';

preg_match_all("/address:\"(.*)\"/siU",$str,$out);
print_r($out[1]); 
```

# android - 如何在android中更改我的应用程序的安装位置

> ID：10912929
> 
> 赞同：0
> 
> 时间：2012-06-06T11:03:11.690
> 
> 标签：android, installation

我正在为 android 应用程序创建一个应用商店。每当从我的应用商店安装应用时，它都应该安装在 /data/app/mycompanyname 文件夹中，而不是任何其他安装位置。我这样做是为了管理和控制。

到目前为止浏览网页，我知道我们可以通过在清单文件中指定来更改它。

`<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="preferExternal" ...>`

但是使用它，我们可以指定我们应该安装在内部存储还是外部存储中。我们无法使用此清单提供安装的确切路径。

谁能帮我弄清楚这个..？？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:08:09.733

> 每当从我的应用商店安装应用时，它都应该安装在 /data/app/mycompanyname 文件夹中，而不是任何其他安装位置。

你没有那种程度的控制。您的应用程序将安装在设备制造商确定的路径上。

> 但是使用它，我们可以指定我们应该安装在内部存储还是外部存储中。我们无法使用此清单提供安装的确切路径。

正确的。

# javascript - 加载时滚动窗口

> ID：10912931
> 
> 赞同：0
> 
> 时间：2012-06-06T11:03:24.617
> 
> 标签：javascript, html

我将表单中的一些值提交到另一个页面...该页面返回的 URL 如下：localhost:8084/abc.jsp?ok=true

我在我的页面主体的“onLoad”上应用了一个名为 checkscroll() 的函数......并且 javascript 中的这个函数应该滚动我的窗口..

代码：用于 javascript

```
function checkscroll()
                  {

                     var rr = new String();
                        rr = request.getParametr("ok");
                     if(rr=="true")
                         window.scrollBy(0, 60);

                  } 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:08:51.870

使用`location.search`：

```
var qs = location.search;
if (qs.indexOf('ok') >=0 && qs.indexOf('true') >=0) {
  window.scrollBy(0, 60);
} 
```

或者

```
var qs = location.search,
         param = qs.split('=')[0].split('?').join(''),
         val = qs.split('=')[1];

if (param === 'ok' && val === 'true') {
  window.scrollBy(0, 60);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:10:18.047

您使用过`request.getParametr`，它是一个 JSP / Java 函数，而不是 JavaScript。您需要`location.search`用于获取参数。

该代码`window.scrollBy(x,y)`仅适用于 Firefox。你使用的是什么浏览器？为了更好的兼容性，请使用 jQuery 的`animate()`函数。要使用它，你可以试试这个脚本。

```
function checkscroll()
{
    var rr = location.search;
    rr = rr.indexOf('ok');
    if(rr=="true")
        $("html, body").animate({scrollTop: 60}, 'slow');
} 
```

让我们知道，如果这解决了。

# java - 如何使用 Rational Software Architect 中的 findbugs？

> ID：10912935
> 
> 赞同：1
> 
> 时间：2012-06-06T11:03:43.483
> 
> 标签：java, eclipse, rational-rsa

我在公司中层工作。我使用 Rational Software Architect(RSA)7.5.5，我想使用“FINDBUGS”。如何在 RSA 中添加插件。现在我下载了它。不知道怎么用？你能给我一个使用它的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:32:17.390

该[博客](http://chappidivenkata.blogspot.com.au/2009/10/using-findbugs-eclipse-plugin-in.html)简要说明了如何在 RSA 7.0 中安装和使用 Eclipse FindBugs 插件。我想他们会使用 RSA 7.5.5。

有关如何使用该插件的更多信息，请查看[此页面](http://andrei.gmxhome.de/findbugs/index.html)...其中包含指向 15 分钟演示视频的链接。该插件似乎没有任何“官方”文档站点。

# php - 如何在 wordpress 中连接 jquery、连接的脚本和在管理员面板中以及在 wordpress 页面上

> ID：10912939
> 
> 赞同：0
> 
> 时间：2012-06-06T11:03:51.780
> 
> 标签：php, jquery, wordpress

如何在wordpress中连接jquery，连接的脚本和管理员面板，以及wordpress php wp_deregister_script('jquery'); wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"), false); wp_enqueue_script('jquery');

```
 function admintuts_scripts_with_jquery1(){
 wp_deregister_script('jquery');
 wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"),   
  false);
 wp_enqueue_script('jquery');
}
add_action( 'admin_enqueue_scripts', 'admintuts_scripts_with_jquery1' );
add_action( 'admin_enqueue_scripts', wp_enqueue_script ("JQuery") );

function admintuts_scripts_with_jquery(){
wp_register_script( 'vote', plugins_url( '/js/vote.js', __FILE__ ), array( 'jquery' ) );
wp_register_script( 'vote', get_template_directory_uri() . '/js/vote.js', array( 'jquery' ) );
wp_enqueue_script( 'vote' );
}
add_action( 'admin_enqueue_scripts', 'admintuts_scripts_with_jquery' );

function wptuts_scripts_with_jquery(){
wp_register_script( 'formtest', plugins_url( '/www/js/formtest.js', __FILE__ ), array( 'jquery' ) );
    wp_register_script( 'formtest', get_template_directory_uri() . '/www/js/formtest.js', array( 'jquery' ) );
wp_enqueue_script( 'formtest' );
}
add_action( 'wp_enqueue_scripts', 'wptuts_scripts_with_jquery' );

/* echo "
<script type=\"text/javascript\" src=\"../wp-content/plugins/votefe/js/jquery.js\"></script>"; */ 
```

如果对谁感兴趣，这就是我解决问题的方法

php

```
function wptuts_scripts_with_jquery(){
  wp_deregister_script('jquery');
  wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"),   false);
  wp_enqueue_script('jquery');

  wp_register_script( 'formtest', plugins_url( '/www/js/formtest.js', __FILE__ ), array( 'jquery' ) );
  wp_register_script( 'formtest', get_template_directory_uri() . '/www/js/formtest.js', array( 'jquery' ) );
  wp_enqueue_script( 'formtest' );
}
add_action( 'wp_enqueue_scripts', 'wptuts_scripts_with_jquery' );

function votefe_load_style_css()
{   
  /*jquery for admin panel*/
  wp_deregister_script('jquery');
  wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"), false);
  wp_enqueue_script('jquery');
  if to whom it will be interesting, here is how I solved a problem

  /*js-script for admin panel*/
  wp_register_script( 'vote', plugins_url( '/js/vote.js', __FILE__ ), array( 'jquery' ) );      
  wp_register_script( 'vote', get_template_directory_uri() . '/js/vote.js', array( 'jquery' ) );    
  wp_enqueue_script( 'vote' );

  /*css-style for admin panel*/
  wp_register_style( 'styleforvote', plugins_url( '/css/styleforvote.css', __FILE__ ), array(), 'all' );
  wp_register_style( 'styleforvote', get_template_directory_uri() . '/css/styleforvote.css', array(), 'all' );
  wp_enqueue_style( 'styleforvote' );
}
add_action( 'admin_enqueue_scripts', 'votefe_load_style_css' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:11:20.560

嗯嗯

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js' type='text/javascript'> 
```

在标题之前没有？我一直用这个

# c# - 为什么序列化对象列表后所有值都为空？

> ID：10912940
> 
> 赞同：1
> 
> 时间：2012-06-06T11:04:02.693
> 
> 标签：c#, json, json.net

我试图序列化包含对象列表的类，但不是使用适当的值创建字符串，而是该方法`JsonConvert.SerializeObject()`返回 JSON 字符串，其中列表中的所有值都为空。

应该从对象创建字符串的行如下：

```
string json = JsonConvert.SerializeObject(msg); 
```

其中 msg 是类

```
public class JSONPlayerListResponse
{
    public List<Player> Players {get; set;}

    public MessageType Action
    {
        get { return MessageType.GetPlayerListResponse; }
    }

    public string CommID { get; set; }

    public string PlayerID { get; set; }
} 
```

和播放器是

```
[DataContract]
public class Player
{
    [DataMember]
    public string UserName { get; set; }
    [DataMember]
    public string Password { get; set; }
    [DataMember]
    public string CurrencyCode { get; set; }
    [DataMember]
    public string CountryCode { get; set; }
    [DataMember]
    public string FName { get; set; }
    [DataMember]
    public string LName { get; set; }

    public decimal Ballance { get; set; }

    public System.Collections.Concurrent.ConcurrentQueue<Bet> BetsHistory { get; set; }

    public string ID { get; set; }

    public string Name { get; set; }

} 
```

msg 实例中的 Players 列表包含一个元素，其值 FName 设置为 Player1，但返回字符串如下：

```
{\"Players\":[{\"UserName\":null,\"Password\":null,\"CurrencyCode\":null,\"CountryCode\":null,\"FName\":null,\"LName\":null}],\"Action\":18,\"CommID\":null,\"PlayerID\":\"27de1\"} 
```

有谁知道为什么返回的字符串中的所有值都是 null 以及如何修改逻辑以生成包含实际值的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:42:05.283

似乎您没有`Players`使用实际值进行初始化。`Players.Add(new Player())`还不够。

试试这个。

```
var result = JsonConvert.SerializeObject(
        new JSONPlayerListResponse() { 
            Players = new List<Player>() { new Player(){UserName="test name"} } 
        }
    ); 
```

您将看到 UserName 不为空。

# java - 简单的 Quartz/Cron 作业设置

> ID：10912941
> 
> 赞同：0
> 
> 时间：2012-06-06T11:04:06.150
> 
> 标签：java, cron, quartz-scheduler

我正在使用 Quartz 用 Ja​​va 编写一个简单的服务器监视器：

```
public class ServerMonitorJob implements Job {
    @Override
    public void execute(JobExecutionContext ctx) {
        // Omitted here for brevity, but uses HttpClient to connect
        // to a server and examine the response's status code.
    }
}

public class ServerMonitorApp {
    private ServerMonitorJob job;

    public ServerMonitorApp(ServerMonitorJob jb) {
        super();

        this.job = jb;
    }

    public static void main(String[] args) {
        ServerMonitorApp app = new ServerMonitorApp(new ServerMonitorJob());
        app.configAndRun();
    }

    public void configAndRun() {
        // I simply want the ServerMonitorJob to kick off once
        // every 15 minutes, and can't figure out how to configure
        // Quartz to do this...

        // My initial attempt...
        SchedulerFactory fact = new org.quartz.impl.StdSchedulerFactory();
        Scheduler scheduler = fact.getScheduler();
        scheduler.start();

        CronTigger cronTrigger = new CronTriggerImpl();

        JobDetail detail = new Job(job.getClass()); // ???

        scheduler.schedule(detail, cronTrigger);

        scheduler.shutdown();
    }
} 
```

我*想*我在 70% 左右；我只需要帮助连接点来让我一直到那里。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:43:53.020

你快到了：

```
JobBuilder job = newJob(ServerMonitorJob.class);

TriggerBuilder trigger = newTrigger()
        .withSchedule(
            simpleSchedule()
                .withIntervalInMinutes(15)
        );

scheduler.scheduleJob(job.build(), trigger.build()); 
```

查看[文档](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-05)，请注意，当您只想每 15 分钟运行一次作业时，您不需要 CRON 触发器。

# c# - 将 SQL Server 结果与 XML 文件进行比较的最快方法

> ID：10912952
> 
> 赞同：1
> 
> 时间：2012-06-06T11:05:09.970
> 
> 标签：c#, dictionary, xml-parsing

我们的一位客户有一家网上商店，可以与他们的 ERP 系统同步。由于他们的仓库既为他们的网上商店服务，也为他们的实体商店提供服务，因此经常更新网上商店中每种产品的现有数量很重要，因为他们不想在网上商店中销售在网上商店中没有的产品。仓库。

目前通过以下方式解决此问题：
每五分钟就有一个 XML 文件从 ERP 系统发布到网上商店。该文件看起来像这样：

```
<products>
  <product>
    <productID>1</productID>
    <stock>20</stock>
  </product>
  <product>
    <productID>2</productID>
    <stock>3</stock>
  </product>
</products> 
```

XML 包含数据库中的所有数千种产品，无论该产品的现有数量是否发生变化。根据 ERP 提供商的说法，将其减少到仅更改的产品不是一个选项，因此我们需要自己处理它。

然后，网上商店处理 XML 文件，并更新数据库中所有产品的现有数量，每次更新都有单独的交易。正如您可能理解的那样，这不必要地缓慢且资源繁重。该数据库包含数千种产品，大多数情况下，实际上没有或很少有产品真正改变了库存数量。

所以我的想法是，最好的方法是首先从数据库中为所有产品选择 productID 和库存，将结果与 XML 进行比较，然后只更新数据库中库存不匹配的产品XML 文件中的库存。

我的问题是将 XML 与数据库结果进行比较的最快方法是什么？将 XML 读入内存，循环访问数据库中的结果集，然后在 XML 上使用 XPath 来获取每个产品的库存值？首先将 XML 转换为字典，然后使用它进行查找？

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:09:43.167

避免不必要的文件导入的一种方法是从文件生成哈希码。下次导入之前，再次生成哈希码并将其与旧的进行比较，如果它们相同，则不导入任何内容。

```
using(var stream = File.OpenRead("C:\\temp\\file.xml"))
using(var sha = new SHA1Managed())
{
    var hashCode = sha.ComputeHash(stream);
} 
```

如果散列不匹配，则将数据库读入字典，并在解析 XML 文件时将其与它进行比较。相应地更新数据库。您甚至可以更新字典并将其保留（可能在静态变量中）以备下次需要导入时使用，这样您就不必一直从数据库中填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:08:11.993

为什么你认为从数据库中读取，可能接着写入，会比直接写入更快？不要从数据库中选择，不需要将数据从数据库服务器传输到您的 Web 或应用程序服务器。

对于 XML 中的每个产品项，只需执行

```
UPDATE tablename SET stock = @stock WHERE productID = @productID AND stock <> @stock 
```

为了提高性能，不要为每一行启动一个事务，而是对它们进行批处理，例如每个事务 10 次更新。无论如何，您不必担心可恢复性。如果发生崩溃，只需从头开始再次处理整个文件。

在输入端，读取 XML 的最快方法是使用 XmlReader 读取它，并在读取时执行数据库更新。在开始更新数据库之前不要将整个 XML 读入内存。

# windows-7 - SSIS 2008 是否与 .Net 框架 3.5 兼容

> ID：10912959
> 
> 赞同：1
> 
> 时间：2012-06-06T11:06:01.733
> 
> 标签：windows-7, .net-3.5, ssis, .net-2.0

我在安装了 .Net framework 3.5、Windows Xp 的机器上开发了 SSIS 包。但是，当我在操作系统为 Windows 7.0 和 .Net 框架 2.0 的机器上部署这些时，没有脚本组件的包运行良好。但是带有脚本组件的包会出现错误，因为访问文件路径被拒绝。当我尝试在部署机器上调试包时，我发现异常来自脚本组件。

我想知道在脚本组件的情况下，SSIS 2008 和 .Net 框架之间是否有任何关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:07:47.857

看看[这里](https://stackoverflow.com/questions/2065673/reference-a-net-3-5-assembly-in-a-script-task-in-ssis-2005)

基本上使用 SSIS 2005，你会被 .net 2.0（和 VB）困住

在 SSIS 2008 上，.net 2.0 是默认值，但您可以将其设置为使用 3.5。[在这里](https://stackoverflow.com/questions/4692944/how-do-i-find-the-net-framework-version-used-in-an-ssis-2008-r2-package)，您可以打印有关如何操作的屏幕

# bash - 在 bash 脚本中使用 xargs 执行 find 命令

> ID：10912968
> 
> 赞同：1
> 
> 时间：2012-06-06T11:06:45.423
> 
> 标签：bash, find, exec

我正在尝试在 bash 脚本中执行此命令

```
找到 /var/log/apache2/access*.gz -type f -newer ./tmpoldfile ！-较新的 ./tmpnewfile | xargs zcat | grep -E '$MONTH\/$YEAR.*GET.*ad=$ADVERTISER HTTP\/1' -c
```

如果我直接执行它或将它分配给一个变量它返回 0

但是，如果我对命令进行回显（将变量替换为脚本）并在命令行中执行它，它就可以工作。

```
echo "find /var/log/apache2/access*.gz -type f -newer ./tmpoldfile !-newer ./tmpnewfile | xargs zcat | grep -E '$MONTH\/$YEAR.*GET.*ad=$广告商 HTTP\/1' -c"
```

我应该如何为工作编写代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:29:31.913

变量不在单引号内展开，即'...$NOT_EXPANDED ...'。尝试

```
find /var/log/apache2/access*.gz -type f -newer ./tmpoldfile ! -newer ./tmpnewfile \
| xargs zcat | grep -E "$MONTH\/$YEAR.*GET.*ad=$ADVERTISER HTTP\/1" -c
# newstuff ------------^------------------------------------------^----------- 
```

与“或将其分配给变量”相同

```
varCount=$(find /var/log/apache2/access*.gz -type f -newer ./tmpoldfile ! -newer ./tmpnewfile \
| xargs zcat | grep -E "$MONTH\/$YEAR.*GET.*ad=$ADVERTISER HTTP\/1" -c ) 
```

另外，我必须评论`-exec`。许多 find 现在支持`find ... -exec ... \+`（我假设）相当于`xargs`，但并非所有操作系统都将 GNU find 作为他们的第一个工具。如果您确定自己永远不会在 Solaris、AIX 或 HPUX 商店中工作，那么请使用改进的功能。此外，如果您使用的是新操作系统，那么`xargs`可能支持并行处理，我认为`find ... -exec ... \+` 不会这样做。

我希望这有帮助。

# c# - .net 4 部分信任来自 GAC 的程序集

> ID：10912969
> 
> 赞同：7
> 
> 时间：2012-06-06T11:06:53.053
> 
> 标签：c#, .net, security, appdomain

我正在尝试创建一个沙盒应用程序域。为了实现这一点，我使用`AppDomain.CreateDomain`，给出要沙盒化的 DLL 的路径。

但是，我注意到如果该 DLL 在 GAC 中，则该 DLL 是完全受信任的，因此如果其中有一个`PermissionSet.Assert`，它可以接收不受限制的访问。

所以，我想知道是否有办法

1.  强制DLL从路径加载，而不是从GAC加载，因此它将是部分信任的。
2.  或 - 将 GAC 中的某个 DLL 标记为部分信任。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T12:36:16.620

如果两个程序集都已完全签名，则 CLR 将使用 GAC 中的一个。如果您将目标路径中的那个保留为无符号，CLR 将使用那个代替。

如果这不是一个选项，那么您需要使用 CreateDomain 覆盖之一，您可以在其中定义程序集所需的权限集。可以在此处找到有关覆盖的更多信息：http: [//msdn.microsoft.com/en-us/library/ms130766.aspx](http://msdn.microsoft.com/en-us/library/ms130766.aspx)。

使用示例取自[http://davedewinter.com/2009/05/22/how-to-host-a-partial-trust-sandbox/](http://davedewinter.com/2009/05/22/how-to-host-a-partial-trust-sandbox/) ...

```
static void RunInPartialTrust()
{
    AppDomainSetup setup = new AppDomainSetup
    {
        ApplicationBase = Environment.CurrentDirectory
    };

    PermissionSet permissions = new PermissionSet(null);
    permissions.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));
    permissions.AddPermission(new ReflectionPermission(ReflectionPermissionFlag.RestrictedMemberAccess));
    AppDomain appDomain = AppDomain.CreateDomain(
        "Partial Trust AppDomain",
        null,
        setup,
        permissions
    );

    Program p = (Program)appDomain.CreateInstanceAndUnwrap(
        typeof(Program).Assembly.FullName,
        typeof(Program).FullName
    );

    p.PartialTrustMain();
} 
```

# javascript - 匹配模式不起作用

> ID：10912976
> 
> 赞同：1
> 
> 时间：2012-06-06T11:07:12.663
> 
> 标签：javascript, regex

我正在尝试匹配其中只有 a、g、c 或 t 的字符串（不敏感），因此字符串：“AAaaatCCCc”有效，而“catb”无效。这是我的功能：

```
var pattern = "/^[agct]+$/i";
if (!this.inputSeq.value.trim().match(pattern)){
    this.errMsg = "Invalid input sequence -must contain only a,g,c or t"
    updateErrorBox(this.errMsg);
} 
```

当我输入有效字符串时，我仍然收到错误消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:09:49.250

从正则表达式文字中删除引号：

```
var pattern = "/^[agct]+$/i"; 
```

到：

```
var pattern = /^[agct]+$/i; 
```

有一个隐式转换

> **正则表达式**
> 
> 一个正则表达式对象。如果传递了一个非正则表达式对象 obj，它会通过使用 new RegExp(obj) 隐式转换为正则表达式。

[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)

但这不起作用，因为您在模式和斜杠中有标志：`/../`.

```
var pattern = "^[agct]+$";
... .match(pattern) 
```

`i`由于隐式转换可以工作，但由于缺少标志而区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:13:57.810

假设您的输入文本被正确提取，其值的控制台日志可能有助于隔离问题，此代码应该可以工作：

```
if (!this.inputSeq.value.match(/^\s*[agct]+\s*$/i)) {
    this.errMsg = "Invalid input sequence -must contain only a,g,c or t"
    updateErrorBox(this.errMsg);
} 
```

您使用的是文字字符串而不是模式的正则表达式，因此会出现错误消息。

# c++ - 与 Ruby 的 Rack 最接近的 C++ 类似物是什么？

> ID：10912978
> 
> 赞同：8
> 
> 时间：2012-06-06T11:07:40.290
> 
> 标签：c++, ruby, interface, webserver, rack

[我是Rack](http://rack.github.com/)的忠实粉丝，在过去的几年里我用它构建了几个轻量级的 Web 应用程序。我一直很好奇 C++ 是否存在类似的东西。我花了相当多的时间搜索谷歌，却空手而归。我发现 Rack 很难描述，这于事无补。它的标语是“A Ruby Webserver Interface”。搜索 {c++ "webserver interface"}，我发现了比我想要的更多的东西，比如[wt](http://www.webtoolkit.eu/wt)，并且我发现了直接使用 FastCGI 的建议。我觉得 Rack 正好适合这两个选项。

我不确定我是否很难找到与 Rack 类似的 C++，因为不存在这样的东西，或者因为我只是使用了糟糕的搜索词。

是否有与 Rack 相近的 C++ 类似物？如果没有，是否有一个库或一小组库可以为我完成大部分较低级别、容易出错的事情，但仍然让我拥有 Rack 所做的控制级别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:36:04.850

你可以看看[cpp-netlib](http://cpp-netlib.github.com/latest/index.html#)。它提供了一个相当低级别的 http（客户端和服务器端）视图，但足够高，以至于您不会经常处理最低级别的网络 api。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T02:46:51.280

以下是我迄今为止找到的最佳选择：

*   [cpp-net-lib](http://cpp-netlib.github.com/latest/index.html) （感谢@Managu）-这似乎与我的想法很接近。
*   [fastcgi++](http://www.nongnu.org/fastcgipp/) - 这似乎比直接的 FastCGI 提供了很多细节，而不是变成一个完整的框架 - 所以也接近我的想法。
*   [Mongrel2](http://mongrel2.org/) -[根据 Zed](http://news.ycombinator.com/item?id=2542135)的说法，“Mongrel2 的协议也倾向于消除对任何‘中间件’（如 WSGI 或 Rack）的需求，因为它的协议已经与那些类似。” 这来自一个非常不同的角度，但看起来也符合我的一般标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:20:13.393

有一个 Rack 的直接端口，称为（显然 ;-)）Crack。不过，我现在找不到它，而且搜索`c++ crack`几乎没用。

# fonts - 转换字体 - TrueType (TTF) 到 PostScript Type 1 (PT1)

> ID：10912984
> 
> 赞同：6
> 
> 时间：2012-06-06T11:08:04.033
> 
> 标签：fonts, truetype

无论如何我可以将我的 ttf 字体转换为 PostScript Type 1 (pt1) 格式吗？我试用了这个 ttf2pt1 工具 (http://ttf2pt1.sourceforge.net/)，它在 Internet 上被提及很多，但它不起作用（无法在我的服务器上编译）。最后一次更新是从 2003 年开始的，所以没什么大惊小怪的。那么，还有其他方法可以将 ttf 转换为 pt1 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:04:59.130

[http://fontforge.sourceforge.net/](http://fontforge.sourceforge.net/)应该在这里做你需要的。

不过，我很好奇你为什么需要这样做？一定是一个非常古老的应用程序/框架？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T12:51:38.900

结帐[https://everythingfonts.com/ttf-to-pt1](https://everythingfonts.com/ttf-to-pt1)。它适用于我尝试过的几种字体。你的旅费可能会改变。

# magento - 缩略图不会出现在 Magento 中，除非我保存产品

> ID：10912988
> 
> 赞同：0
> 
> 时间：2012-06-06T11:08:15.180
> 
> 标签：magento, magmi

我四处寻找答案，但似乎都不适用于我的情况。

该产品的图像是通过 Magmi 使用具有以下结构的 csv 文件更改的：

```
"sku","image","small_image","thumbnail" 
```

它们已从 png 文件更改为 jpg 文件。

我已经刷新了所有 7 种缓存类型，我已经刷新了目录图像缓存，我已经刷新了 Magento 缓存。我没有刷新缓存存储，因为警告消息吓到了我......

如果我在管理区域打开产品，我会看到图像设置正确。如果我保存产品，图像会正确显示在目录视图中。这让我相信这是索引或临时文件的问题。我在想它可能是 Category Products 索引，但 Magmi 在导入产品时会更新它。

我已经清除了浏览器的缓存...我没有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T16:09:59.893

通过命令行手动重新索引： $ php /yoursite/shell/indexer.php --reindexall

问候。

# blackberry - 黑莓：检测配置文件模式

> ID：10912990
> 
> 赞同：-1
> 
> 时间：2012-06-06T11:08:23.923
> 
> 标签：blackberry

我在我的应用程序中播放铃声以获取通知消息

```
 InputStream stream = (InputStream)this.getClass()
 .getResourceAsStream("/storm.mp3");
  p = Manager.createPlayer(stream, "audio/x-wav");
  p.realize();
  p.prefetch();
  p.start(); 
```

但是，即使设备处于静音模式或振动模式，它也会继续播放。如何检测设备配置文件模式？那是它是否处于正常，静音或振动模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:05:34.137

[Profiles](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/blackberry/api/profiles/Profiles.html)类允许您查询配置文件的某些方面。它是 OS 7.1 中的新功能，因此对于大多数 BlackBerry 用户来说这对您没有帮助。

# common-table-expression - 如何在 Entity Framework 5 中集成 CTE 查询

> ID：10912994
> 
> 赞同：0
> 
> 时间：2012-06-06T11:08:32.817
> 
> 标签：common-table-expression, entity-framework-5

我有一个使用 CTE 编写的 SQL 查询。现在，我正在移动存储库以使用 Entity Framework 5。

我不知道如何使用 Entity Framework 5 集成（或重写）基于 CTE 的查询。

我正在使用带有 EF5 的 POCO 实体，并且有一堆 Map 类。没有 EDMX 文件等。

我现在感觉自己像个菜鸟，如果有任何帮助指出我正确的方向，我将不胜感激。

CTE查询如下

```
WITH CDE AS
(
    SELECT * FROM collaboration.Workspace AS W WHERE W.Id = @WorkspaceId
    UNION ALL
    SELECT W.* FROM collaboration.Workspace AS W INNER JOIN CDE ON W.ParentId = CDE.Id AND W.ParentId <> '00000000-0000-0000-0000-000000000000'
)
SELECT
    W.Id AS Id,
    W.Name AS Name,
    W.Description AS Description,
    MAX(WH.ActionedTimeUtc) AS LastUpdatedTimeUtc,
    WH.ActorId AS LastUpdateUserId
FROM
    collaboration.Workspace AS W
    INNER JOIN
    collaboration.WorkspaceHistory AS WH ON W.Id = WH.WorkspaceId
    INNER JOIN
    (
        SELECT TOP 10
            CDE.Id
        FROM
            CDE
            INNER JOIN
            collaboration.WorkspaceHistory AS WH ON WH.WorkspaceId = CDE.Id
        WHERE
            CDE.Id <> @WorkspaceId
        GROUP BY
            CDE.Id,
            CDE.ParentId,
            WH.ActorId,
            WH.Action
        HAVING
            WH.ActorId = @UserId
            AND
            WH.Action <> 4
        ORDER BY
            COUNT(*) DESC
    ) AS Q ON Q.Id = WH.WorkspaceId
GROUP BY
    W.Id,
    W.Name,
    W.Description,
    WH.ActorId
HAVING
    WH.ActorId = @UserId 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:48:54.600

您必须为 SQL 查询创建存储过程（或直接使用该查询）并通过`dbContext.Database.SqlQuery`. 您正在使用没有任何其他选择的代码优先方法。在 EDMX 中，您可以使用映射表值函数，但代码优先还没有这样的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T08:56:56.400

我已经构建了一个存储过程，它将 id 数组作为输入参数并使用递归 cte 查询返回数据表[看看这里的代码，它使用 EF 和代码优先方法](https://stackoverflow.com/a/48870595/8618595)

# asp.net - ASP.NET 应用程序为来自单个进程的多个请求提供服务

> ID：10912995
> 
> 赞同：2
> 
> 时间：2012-06-06T11:08:38.080
> 
> 标签：asp.net, iis, cassini

我目前正在调试一些关于此的问题。

我们有一个 ASP.NET Web 应用程序，我正在 Cassini 上进行调试。当我尝试使用 IE 并向服务器发送请求时，需要一些时间（例如大约 20 分钟）来处理然后发送响应。

在多选项卡 IE 的情况下，我尝试将不同选项卡中的请求同时发送到同一台服务器，但只有在发送响应之一后才会处理响应。

如果启动一个新的 IE 实例并在这些不同的实例中发出请求，则服务器几乎可以同时处理和发出响应。在做了一些研究后，我发现 IIS express 可以解决我的问题，但我不能。任何人都遇到过类似的问题，或者我错过了一些非常重要的事情要先检查？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-20T19:19:18.677

这主要是由于 ASP.net 的会话状态变量以及一次只有一个请求可能对特定会话具有 R/W 访问权限（由 SessionID cookie 确定）的事实。

任何需要任何形式的会话访问的附加请求（因为读/写是默认设置）将被阻止，直到前一个请求完成。

基于以下链接：

*   [http://johnculviner.com/asp-net-concurrent-ajax-requests-and-session-state-blocking/](http://johnculviner.com/asp-net-concurrent-ajax-requests-and-session-state-blocking/)
*   [https://msdn.microsoft.com/en-us/library/ms178581.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/ms178581.aspx?f=255&MSPPError=-2147217396)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:13:36.567

我认为您错过了会话​​锁定所有请求，每次只留下一个运行这一点。

阅读相关内容以及原因： [完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely/9021543#9021543)

另外：[在共享同一会话时处理另一个 Web 应用程序时，Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:21:26.523

原因是 ASP.NET 中的会话不是线程安全的。因此，ASP.NET 序列化对来自同一会话的请求的访问。

如果您有一个多标签 IE，那么您的标签共享一个会话。第一个请求立即执行，其他请求排队。如果您有不同的实例，那么每个实例都会创建一个新会话，因此请求会并行执行。

# jquery - asp.net / [WebMethod] - 只为本地主机序列化异常？

> ID：10912997
> 
> 赞同：1
> 
> 时间：2012-06-06T11:08:38.423
> 
> 标签：jquery, asp.net, web-services

## 概括

[WebMethod] 的异常序列化行为在“所有在同一服务器上”使用和“真实世界使用”之间有所不同。

## 情况

我在**foo.aspx**中实现了一个 web 服务，如下所示：

```
[WebMethod]
[ScriptMethod(UseHttpGet = false, ResponseFormat = ResponseFormat.Json, XmlSerializeString = false)]
public static Fruit InsertUpdateFruitWebService()
{
    return FruitHelper.InsertUpdateFruit();

} 
```

使用 jQuery - $.ajax从**bar.aspx中调用 Web 服务。**

**如果在InsertUpdateFruit**中发生某种问题，则会引发异常，则会调用 $.ajax 中指定的“错误”回调，并将 JSON blob 作为参数传递给“错误”回调函数。

## 好消息

当浏览器和服务器在同一台机器上时，一切正常。

## 不太好的消息

当浏览器和服务器不是同一台机器时，您在作为参数传递给“错误”回调的 JSON blob 中得到的所有内容是：

```
{"Message":"There was an error processing the request.","StackTrace":"","ExceptionType":""} 
```

没有堆栈跟踪，没有异常详细信息等。

## 问题

谁能指出我可能导致这种情况的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:30:14.133

好的，对此的答案是对 Web.config 文件（或您想要使用的任何 .config 文件）进行修改，以便将 customErrors 属性设置为“关闭”，就像这样......

```
<system.web>
    ... other stuff
    <customErrors mode="Off" />
</system.web> 
```

在很多情况下，这可能不是一个很好的解决方案，但它在这个项目上对我有用。

信用需要去 Dave Ward 和他在[http://encosia.com/use-jquery-to-catch-and-display-aspnet-ajax-service-errors/](http://encosia.com/use-jquery-to-catch-and-display-aspnet-ajax-service-errors/)上的博客帖子（实际上在评论中）这让我想起了这 。

# c++ - 如何将 wince sdk 6 添加到嵌入式 Visual c++ 4？

> ID：10912998
> 
> 赞同：3
> 
> 时间：2012-06-06T11:08:39.503
> 
> 标签：c++, configuration, windows-mobile, embedded, windows-ce

> **可能重复：**
> [为什么在 WIN CE 6.0 中运行简单的控制台应用程序但基于对话框的不运行？](https://stackoverflow.com/questions/10959134/why-simple-console-app-runs-but-dialog-based-does-not-run-in-win-ce-6-0)

我安装了**Windows CE 5.0 标准软件开发工具包 (SDK).msi**，现在我在 eMbedded Visual c++ 4 中有 STANDARDSDK_500。

现在我已经安装了**Windows Embedded CE 6.0 Evaluation Edition.exe**。如何将其添加到 eMbedded Visual c++ 4\. 作为 STANDARDSDK_600？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:29:34.350

这里发生了一些事情，但最重要的是，eVC 只会显示 SDK。我不确定您的上下文中的“ **Windows Embedded CE 6.0 Evaluation Edition.exe** ”到底是什么，但我怀疑它是一个 SDK，因为 SDK 滚轮不会生成 EXE。

您必须构建并安装一个实际的 SDK。这*必须*使用 Platform Builder 创建。值得庆幸的是，微软在 CE 5.0 之后放弃了“Stndard SDK”，因此没有可以安装的开箱即用的通用 SDK。您需要生成一个（这很简单，因为您似乎已经安装了 Platform Builder）或从 OEM 获取一个。

另外，既然你安装了 PB 6.0，它安装了 Studio 2005，你为什么要使用 eVC？您可以使用 Visual Studio 进行应用程序开发。

# android - 使用嵌套选择 Android SQLite 的复杂更新查询

> ID：10912999
> 
> 赞同：3
> 
> 时间：2012-06-06T11:08:49.760
> 
> 标签：android, sqlite, select

*android noob ...* 我有两个表，country_tbl 和 city_tbl 之间存在一对多关系，我想将 city_tbl.landmark_col 中的值与 GROUP_CONCAT() 连接起来，并将所有 landmark_col 值作为单个字符串插入 country_tbl.all_landmarks柱子。SQL 似乎需要一个嵌套的 SELECT 来连接 landmark_col 值，然后再将它们传递给 country_tbl ......类似于：

```
UPDATE country_tbl 
SET country_tbl.all_landmarks = (SELECT landmarks_col FROM 
                                    (SELECT country_id, group_concat(landmarks_col) 
                                            FROM city_tbl INNER JOIN country_tbl
                                            ON country_tbl.country_id = city_tbl.country_id
                                            GROUP BY country_tbl.country_id) 
                                    AS country_landmarks      
                                WHERE country_tbl.country_id = country_landmarks.country_id)
WHERE
EXISTS (
    SELECT *
    FROM country_landmarks
    WHERE country_tbl.country_id = country_landmarks.country_id
); 
```

不确定是否甚至支持嵌套选择语句，或者是否过于资源密集......必须有更好的方法，因为使用 rawQuery 似乎不是最好的解决方案。不确定我是否应该创建临时表、使用 ContentProviders 或传递游标...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:41:15.040

我通过将长 SQL 查询分成两部分来回答这个问题。首先，我使用 SQLiteQueryBuilder 创建了一个子查询，并使用 rawQuery 运行以获取具有 location_id 和地标名称的 group_concat 值的两列游标。然后，我能够循环浏览光标以使用该国家所有地标名称的每个适当的连接值来更新国家表。

下面的查询比上面的问题稍微复杂一点（我在发布之前对其进行了简化），只是因为我必须通过 landmark_type_id 将地标列表表与另一个 landmark_type 表连接起来，而我的真正目标是连接更短的 landmark_type 列表按国家/地区，而不是按国家/地区列出的所有地标名称的长列表。无论如何，它有效。

```
 public void UpdateCountryLandmarks() throws SQLException {
    Cursor c = null;
    String subquery = SQLiteQueryBuilder.buildQueryString(
            // include distinct
            true,
            // FROM tables
            LANDMARK_TYPE_TABLE + "," + LANDMARKS_TABLE,
            // two columns (one of which is a group_concat()
            new String[] { LANDMARKS_TABLE + "." + LOCATION_ID + ", group_concat(" + LANDMARK_TYPE_TABLE + "." + LANDMARK_TYPE + ",\", \") AS " + LANDMARK_NAMES },
            // where
            LANDMARK_TYPE_TABLE + "." + LANDMARK_ID + "=" + LANDMARKS_TABLE + "." + LANDMARK_TYPE_ID,
            // group by
            LANDMARKS_TABLE + "." + LOCATION_ID, null, null, null);

    c = mDb.rawQuery(subquery, null);

    if (c.moveToFirst()) {
        do {
            String locationId = c.getString(c.getColumnIndex(LOCATION_ID));
            String landmarkNames = c.getString(c.getColumnIndex(LANDMARK_NAMES));
            ContentValues cv = new ContentValues();
            cv.put(LANDMARK_NAMES, landmarkNames);
            mDb.update(COUNTRY_TABLE, cv, LOCATION_ID + "=" + locationId, null);
        } while (c.moveToNext());
    }

    c.close();

    } 
```