# StackOverflow 问答 12069000-12069999

# java - Hibernate 查询调用 toString() 方法

> ID：12069007
> 
> 赞同：1
> 
> 时间：2012-08-22T08:20:19.953
> 
> 标签：java, hibernate, jpa, hql, jpql

我有一个名称列表：`List<Name>`，`Name`有两种方法：

*   `toString()`返回“姓名：汤姆”
*   `getName()`返回“汤姆”

要查询具有某些姓名的人的数据库，我会这样做

```
// Query a single database entry
Query query = em.createQuery("FROM person WHERE name = :name");
query.setParameter("name", names.get(0).getName()); 
```

当我想查询多个条目时（使用`WHERE ... IN (...)`我必须这样做：

```
// Convert the list of name instances to a list of strings
List<String> nameStrings = new ArrayList<String>(names.size());
for (Name name : names) {
  nameStrings.add(name.getName());
}

// Query multiple database entries
Query query = em.createQuery("FROM person WHERE name in (:name)");
query.setParameter("name", nameStrings); // JPA
query.setParameterList("name", nameStrings); // Hibernate 
```

我必须建立第二个列表吗？我宁愿这样做：

```
// Query a single database entry
Query query = em.createQuery("FROM person WHERE name = :name");
query.setParameter("name", names.get(0)); 
```

和

```
// Query for multiple database entries
Query query = em.createQuery("FROM person WHERE name in (:name)");
query.setParameter("name", names); // JPA
query.setParameterList("name", names); // Hibernate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:01:10.943

简短的回答是肯定的，您需要构建第二个列表。您需要提供 a `List`of `String`s （或者更确切地说是 a `Collection`）， a`List<Name>`永远不会匹配这个。我建议制作某种实用方法，该方法采用 a`List<Name>`并返回 a`List<String>`名称。

```
public static List<String> toNameStrings(List<Name> names) {
    List<String> list = new ArrayList<String>(names.size());
    for (Name name : names) {
        list.add(name.getName());
    }
    return list;
} 
```

我无法测试以下内容，并且我不确定是否要以任何方式推荐它，但我*认为*您可以创建一个`List`实现，根据它所处的状态返回不同的对象类型。使用这个你' 将能够做一些事情，比如`list.setStringMode(false)`将它用作 a `List<Name>`（尽管在这个阶段泛型正在退出窗口，它们都将返回为`Object`），然后`list.setStringMode(true)`，将它用作`List<String>`. 它看起来像下面这样：

```
public class NameAndStringList extends ArrayList<Object> implements List<Object>
{
    private boolean stringMode = false;

    @Override
    public boolean add(Object object)
    {
        return super.add(toName(object));
    }

    // Do the same for add(index, element)
    // Do the same for set(index, element)
    // Do the same for remove(object)

    @Override
    public boolean addAll(Collection<? extends Object> collection)
    {
        final List<Name> convertedCollection = new ArrayList<Name>();
        for (Object object : collection)
        {
            convertedCollection.add(toName(object));
        }
        return super.addAll(convertedCollection);
    }

    // Do the same for addAll(index, collection)
    // Do the same for removeAll(index, collection)
    // Do the same for retainAll(index, collection)

    @Override
    public boolean contains(Object o)
    {
        return super.contains(toName(o));
    }

    // Do the same for containsAll(collection)
    // Do the same for indexOf(object)
    // Implement Iterator that checks the stringMode variable before returning value.
    // Override all iterator methods to retrieve custom Iterator implementation.
    // Override subList(fromIndex, toIndex) to make subList be an instance of NameAndStringList as well.

    @Override
    public Object get(int index)
    {
        if (stringMode)
        {
            return ((Name) super.get(index)).getName();
        }
        return super.get(index);
    }

    // Implement setStringMode(boolean)

    protected Object toNameString(Object object)
    {
        if (object instanceof Name)
        {
            // Convert to String here
        }
        return object;
    }

    protected Name toName(Object object)
    {
        if (object instanceof String)
        {
            // Convert to Name here.
        }
        return object;
    }
} 
```

请注意，这依赖于您能够将 a 转换`String`为 a`Name`以及反之亦然，但如果您知道始终使用`Name`实例自己填充它，则始终可以摆脱该位。这里的一般想法是`List`存储`Name`实例，但可以自由返回`String`实例，因为它是一个`List<Object>`. 同样，我不确定我是否会推荐这种方法，但它应该满足您的要求，或者至少尽可能接近 atm。

# ios - Objective-C / iOS：PopOver

> ID：12069010
> 
> 赞同：2
> 
> 时间：2012-08-22T08:20:32.447
> 
> 标签：ios, styles, uipopover

我在 iOS 中使用 UIPopOver，但我的看起来像这样： ![在此处输入图像描述](../Images/23352ca5b91bada2f99df93e536b0975.png)

但我想让它看起来像这样：

![在此处输入图像描述](../Images/0f5933816efc496ca42b944cdeb7e8ad.png)

请注意，我不想使用任何 3rd-party-libary。

迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:24:05.150

您可以使用[`UIPopoverBackgroundView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPopoverBackgroundView_class/Reference/Reference.html#//apple_ref/occ/cl/UIPopoverBackgroundView)来修改弹出视图的设计。

# android - Android 多包问题

> ID：12069012
> 
> 赞同：2
> 
> 时间：2012-08-22T08:20:33.743
> 
> 标签：android

我在我的 Eclipse 中有一个项目，我为所有包使用了多个具有相同前缀的包。这是结构的截图！

![Eclipse IDE 屏幕截图](../Images/dc0a12136f16f05697529065160d7d31.png)

问题是，当我运行应用程序时，我收到以下错误消息：

> 无法启动活动 ComponentInfo{com.td.bookshelf/com.td.bookshelf.SplashActivity}：java.lang.NullPointerException）

我已经手动添加了所有包并从另一个项目中复制了类文件。因此，我清理了构建项目并重新启动了 Eclipse，但徒劳无功。

请帮助我摆脱错误。

```
08-22 13:43:07.367: E/AndroidRuntime(4900): FATAL EXCEPTION: main
08-22 13:43:07.367: E/AndroidRuntime(4900): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.td.bookshelf/com.td.bookshelf.SplashActivity}: java.lang.NullPointerException
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.os.Looper.loop(Looper.java:123)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at java.lang.reflect.Method.invokeNative(Native Method)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at java.lang.reflect.Method.invoke(Method.java:507)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at dalvik.system.NativeStart.main(Native Method)
08-22 13:43:07.367: E/AndroidRuntime(4900): Caused by: java.lang.NullPointerException
08-22 13:43:07.367: E/AndroidRuntime(4900):     at com.td.bookshelf.SplashActivity.onCreate(SplashActivity.java:56)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-22 13:43:07.367: E/AndroidRuntime(4900):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-22 13:43:07.367: E/AndroidRuntime(4900):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:30:36.447

看起来错误**不是**来自您的包结构。

在堆栈跟踪中，您可以阅读：

```
E/AndroidRuntime(4900): Caused by: java.lang.NullPointerException
E/AndroidRuntime(4900):     at com.td.bookshelf.SplashActivity.onCreate(SplashActivity.java:56) 
```

`NullPointerException`当`onCreate` SplashActivity 的方法被调用时，你会得到一个。

`onCreate`你的方法可能有问题。

# git - Azure 云服务和 Git 持续部署？

> ID：12069014
> 
> 赞同：11
> 
> 时间：2012-08-22T08:20:41.033
> 
> 标签：git, azure, continuous-deployment, azure-cloud-services

有没有一种方法可以让我不仅将 Git 用作代码存储库，还可以将其用于构建和持续部署到 Azure（云服务，而不是网站）？我怀疑没有给出缺少的构建环境，除非但想在注销之前确认这一点。

从理论上讲，我可以看到将 Git 托管在 Windows 服务器上，该服务器也进行构建和部署 - 不确定是否有人将其简化为实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T00:28:25.033

更新：这现在是可能的

[http://www.windowsazure.com/en-us/documentation/articles/cloud-services-continuous-delivery-use-vso/#step6](http://www.windowsazure.com/en-us/documentation/articles/cloud-services-continuous-delivery-use-vso/#step6)

与 git 和 tfs 一起工作就像魅力一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:56:22.960

新的管理门户支持从 Git 直接发布“网站”，但不支持您已经注意到的云服务。但是，支持使用 TFS 执行此操作。目前有一个免费的[TFS 托管预览](http://aka.ms/tfspreview)可用，我有一篇博文介绍如何配置[与 Azure 网站和 TFS 预览的持续集成](http://aka.ms/tfsazwsvsci)。对于云服务，该过程几乎相同。

# php - 如何在 foreach/for 循环中每次添加超过 1 个？

> ID：12069015
> 
> 赞同：2
> 
> 时间：2012-08-22T08:20:53.983
> 
> 标签：php, for-loop, foreach

如何在 foreach/for 循环中每次添加超过 1 个？

我知道基本的 +1 是这样的：

```
for ($i=1;$i<$nc;$i++){

 echo $i;

} 
```

但我需要添加另一个元素，每次也增加 5

```
 for ($i=1;$i<$nc;$i++){

       // what ever maths to make $plus5 go up by 5 each time

       echo $i . ' - ' . $plus5;

} 
```

所以结果是：

```
1 - 5
2 - 10
3 - 15
4 - 20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:23:46.633

```
for ($i=1,$j=5;$i<$nc;$i++,$j=$i*5){
 echo $i.' - '.$j;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T08:24:11.950

```
for ($i=1; $i<$nc; $i++) {
    echo $i . '-' . $i*5;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T08:24:24.870

```
for($i=1;$i<$nc;$i++)
{
    echo $i.' - '.$i*5;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T08:23:10.060

```
 for ($i=1;$i<$nc;$i++){

       $b = $i*5;

       echo $i . ' - ' . $b . '<br/>';           

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T08:33:36.177

这可能有用：

```
<?php
for ($i=1;$i<nc;$i++){

     $b = $i*5;
     echo $i . ' - ' . $b;     
     echo '<br/>';
}
?>" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T08:30:34.163

如果您只想将迭代次数 5`$i * 5`用作其他提及

你可以这样使用：

```
for($i=0, $j=0 ; $i<10 ; $i++,$j = $j+5 ){
    echo $i . "<br/>";
    echo $j. "<br/>";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T08:24:08.113

```
for ($i=1,$plus5=5;$i<$nc;$i++,$plus5+=5){
   echo $i . ' - ' . $plus5 . "\n";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T08:24:33.850

```
 for ($i=1;$i<$nc;$i++){
    $plus5 = $i*5;
    echo $i." - ".$plus5."\n";
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-22T10:45:57.310

只需尝试：

```
for ($i=1;$i<$nc;$i++){
   // what ever maths to make $plus5 go up by 5 each time
   echo $i*5; 
```

就是这样。然后它输出 5,10,15,20 .....

# cakephp - CakePHP 路由 MissingControllerException

> ID：12069021
> 
> 赞同：1
> 
> 时间：2012-08-22T08:22:28.100
> 
> 标签：cakephp, routing

我目前有一个 CakePHP 路由设置：[CakePHP 中的变量前缀路由](https://stackoverflow.com/questions/11463716/variable-prefixed-routing-in-cakephp)

这是我的routes.php：

```
路由器::连接(
    "/:forum/:controller/:action/*",
    大批（），
    数组（“通过”=> 数组（“论坛”））
);

路由器::连接(
    “/：论坛”，
    大批（
        “控制器” => “论坛”，
        “动作” => “索引”
    ),
    数组（“通过”=> 数组（“论坛”））
);

```

这完美地工作，例如`/example/users/login`将被路由到 UsersController::login，并且`$this->request->params["forum"]`将包含`example`.

但是，在查看时，`tmp/logs/debug.log`我发现这条路由产生了很多错误，我不明白为什么会发生这种情况，因为路由显然工作得很好：

```
2012-08-22 02:29:09 错误：[MissingControllerException] 找不到控制器类 ExampleController。
#0 /var/www/app/webroot/index.php(92): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {主要}

```

它本质上是在尝试寻找 ExampleController（因为我正在尝试访问`/example/users/login`），但`routes.php`特别告诉 CakePHP 寻找 Users 控制器而不是 Example Controller。

有没有办法解决这个问题？我无法理解为什么会发生这种情况，因为一切*显然*都正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:13:09.660

/example/users 是否有效，就像它路由到 UsersController::index() 一样。如果没有，您应该只需要 /:forum/:controller 的路由，因此请尝试在当前路由之前添加它，看看它是否能清除错误：

```
Router::connect(
    "/:forum/:controller",
    array('action' => 'index'),
    array("pass" => array("forum"))
); 
```

# java - Java - 如何将 String 设置为静态 int

> ID：12069026
> 
> 赞同：0
> 
> 时间：2012-08-22T08:22:58.113
> 
> 标签：java

我有一个只接受字符串的方法。

```
public void setVerticalAlignment(String align) {
            ...
    gd.verticalAlignment = align;   // accepts only int.
            ...
} 
```

但`gd.verticalAlignment`只接受一个int。通常这是由`gd.verticalAlignment = SWT.TOP`SWT.TOP 是静态 int 之类的东西设置的。

是否可以使用类似的方法调用此方法`setVerticalAlignment("SWT.TOP")`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:26:39.297

如果你使用 Java 7，你总是可以`switch`在字符串上使用：

```
switch (align) {
    case "SWT.TOP":
        gd.verticalAlignment = SWT.TOP;
    /* etc */
} 
```

老实说，我会避免使用像`"STW.TOP"`. 如果我真的不得不以其他方式存储对齐状态，而不仅仅是`int`我会使用可能`switch`在旧版本 Java 中使用的枚举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:29:04.493

听起来你想要一张地图：

```
// Ideally use ImmutableMap from Guava
private static final Map<String, Integer> ALIGNMENTS = mapAlignments();

private static final Map<String, Integer> mapAlignments() {
    Map<String, Integer> ret = new HashMap<String, Integer>();
    ret.put ("SWT.TOP", SWT.TOP);
    // etc
    return ret;
} 
```

然后您可以稍后从地图中获取（并取消装箱）。

或者，更好的是，首先更改您的方法声明以避免这种情况:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:33:39.013

```
Integer.parseInt(String) 
```

如果字符串未指定为整数值，则可以抛出[NumberFormatException 。](http://developer.android.com/reference/java/lang/NumberFormatException.html)同样在 Java 的先前版本中，您不能在字符串上应用 switch-case。所以更好的是你可以使用以下内容：

```
if(("SWT.TOP").equals(align))
{
     gd.verticalAlignment = SWT.TOP;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:42:10.820

为什么要使用文本字段？对齐方式只有几个合法的选择，因此您应该真正使用[JComboBox](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)之类的东西。您可以将自定义对象存储在 JComboBox 中，以便它们显示命名常量但也存储整数常量：

```
public class SwingAlignOption {
  public final String name;
  public final int value;
  public SwingAlignOption(String name, int value) {
    this.name = name;
    this.value = value;
  }
  public String toString() { return name; }
} 
```

然后，您可以将实例添加到组合框中，例如`comboBox.addItem(new SwingAlignOption("TOP", SWT.TOP))`.

请注意，JComboBox 在 Java 6 和 7 之间发生了变化。在 Java 7 库中，JComboBox 是通用的，这使得在内部存储这样的自定义对象并在以后检索它们的值变得更加容易。在 Java 6 中，当您访问选定的值时，您必须使用强制转换。

# ios - xtify 是否支持自动引用计数 (ARC)？

> ID：12069030
> 
> 赞同：1
> 
> 时间：2012-08-22T08:23:19.827
> 
> 标签：ios, push-notification, push, urbanairship.com, xtify

我需要为我的一个项目实施推送通知。所以我正在寻找第三方解决方案，我最终找到了其中两个：

1- Urban Airship。
2- Xtify。

我对此事进行了一些研究，发现 Urban Airship 不支持 ARC！。
我的问题是：与 Urban Airship 不同，Xtify 是否支持 ARC？

在严格的期限内，创建我自己的 APNS 不是我的选择。

最好的祝福。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:38:09.153

如果您下载 Xtify SDK，您可以看到它是一个预编译框架。因此没有提供源代码，您不必担心是否支持 ARC。它已经编译好了。

您可以选择是否要在自己的项目中使用 ARC。

# android - 带有扩展 SimpleCursorAdapter 的 nullPointerException

> ID：12069036
> 
> 赞同：2
> 
> 时间：2012-08-22T08:23:42.760
> 
> 标签：android, android-contentprovider, android-cursoradapter, android-loadermanager

我正在学习自定义提供程序和加载程序。作为一个简单的例子，我正在尝试实现一个`GridView`显示存储在外部 SD 卡中的图片。尽管我已经阅读了很多（文档、SO 上的主题、Google 群组、论坛......），但我无法让我的代码正常工作。我知道此示例中可能存在几个问题，但我想逐步进行。停止代码的第一个错误是 a `NullPointerException`，所以我的问题是如何修复它。

这是我的最小版本`Activity`（它使用支持库 v4）：

```
public class MainActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {
    private String[] columns = {
            MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID
    };
    private String orderBy = MediaStore.Images.Media._ID;
    private ImageAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Prepare the loader
        getSupportLoaderManager().initLoader(0, null, this);
        // Initialize the layout Adapter
        String[] cols = new String[] {MediaStore.Images.Media.DATA};
        int[] views = new int[] {R.id.thumbImage}; 
        mAdapter = new ImageAdapter(getApplication(), R.layout.galleryitem,
                null, cols, views, 0);
        // Set the layout Adapter
        GridView gridview = (GridView) findViewById(R.id.gallery_gridview);
        gridview.setAdapter(mAdapter);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        Uri baseUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
        return new CursorLoader(getApplication(), baseUri, columns,
                null, null, orderBy);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        mAdapter.swapCursor(data);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader){
        mAdapter.swapCursor(null);
    }
} 
```

这是我的扩展`SimpleCursorAdapter`：

```
public class ImageAdapter extends SimpleCursorAdapter {
    private int columnIndex;
    private LayoutInflater mInflater;
    private class ViewHolder {
        ImageView imageView;
    }

    public ImageAdapter(Context c, int layout, Cursor aCursor, String[] from,
            int[] to, int flags) {
        super(c, layout, aCursor, from, to, flags);
        this.mContext = c;
        this.mCursor = aCursor;
        mInflater = (LayoutInflater) 
                c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {return mCursor.getCount();}

    @Override
    public Object getItem(int position) {return position;}

    @Override
    public long getItemId(int position) {return position;}

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder vh;
        View cell = convertView;
        if (cell == null) {
            vh = new ViewHolder();
            // No View passed, create one.
            cell = mInflater.inflate(R.layout.galleryitem, null);
            // Populate the ViewHolder
            vh.imageView = (ImageView) cell.findViewById(R.id.thumbImage);
            // Store the ViewHolder inside the layout
            cell.setTag(vh);
            // Setup the View behavior by setting some listeners...
        } else {
            vh = (ViewHolder) cell.getTag();
        }
        // Update the cell View state
        // Move the cursor to the current position
        mCursor.moveToPosition(position);
        // Get the current value for the requested position
        columnIndex = mCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        int imageID = mCursor.getInt(columnIndex);
        // Set the content of the image based on the provided Uri
        vh.imageView.setImageURI(Uri.withAppendedPath(
                MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" +
        imageID));
        return cell;
    }    
} 
```

当我运行代码时，logcat在适配器`NullPointerException`的方法中显示一个。`getCount()`似乎没有将光标传递给适配器。

**更新**：

在活动中，我将 null 作为光标参数传递给适配器构造函数，因为：

*   我不知道如何获取对光标的引用，因为我正在使用`getSupportLoaderManager().initLoader()`
*   由于同样的原因，在其他 SO 线程上也做了同样的事情，而且对他们来说似乎工作正常

**更新**：

这是 logcat 输出

```
08-22 09:19:44.754: I/Process(5758): Sending signal. PID: 5758 SIG: 9
08-22 09:23:16.041: D/AndroidRuntime(8691): Shutting down VM
08-22 09:23:16.041: W/dalvikvm(8691): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-22 09:23:16.041: E/AndroidRuntime(8691): Uncaught handler: thread main exiting due to uncaught exception
08-22 09:23:16.061: E/AndroidRuntime(8691): java.lang.RuntimeException: Unable to start activity ComponentInfo{uvesoft.com.mycustomadapter/uvesoft.com.mycustomadapter.MainActivity}: java.lang.NullPointerException
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.os.Looper.loop(Looper.java:123)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread.main(ActivityThread.java:4363)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at java.lang.reflect.Method.invokeNative(Native Method)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at java.lang.reflect.Method.invoke(Method.java:521)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at dalvik.system.NativeStart.main(Native Method)
08-22 09:23:16.061: E/AndroidRuntime(8691): Caused by: java.lang.NullPointerException
08-22 09:23:16.061: E/AndroidRuntime(8691):     at uvesoft.com.mycustomadapter.ImageAdapter.getCount(ImageAdapter.java:34)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.widget.GridView.setAdapter(GridView.java:128)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at uvesoft.com.mycustomadapter.MainActivity.onCreate(MainActivity.java:37)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-22 09:23:16.061: E/AndroidRuntime(8691):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
08-22 09:23:16.061: E/AndroidRuntime(8691):     ... 11 more
08-22 09:23:16.081: I/dalvikvm(8691): threadid=7: reacting to signal 3
08-22 09:23:16.081: E/dalvikvm(8691): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

我真的很感激任何帮助。TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:00:20.263

第一：摆脱这一行：

```
private Cursor mCursor; 
```

而不是`mCursor`使用，`getCursor()`因为您没有覆盖`swapCursor`方法并且`mCursor` 将指向旧光标。

第二：改变

```
@Override
    public int getCount() {return mCursor.getCount();} 
```

到：

```
@Override
public int getCount() {
  if(getCursor()==null) 
     return 0; 
  return getCursor().getCount();
} 
```

或者最好不要覆盖`getCount`，`getItem`并且`getItemId`完全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:46:30.367

```
public class ImageAdapter extends SimpleCursorAdapter {
    private int columnIndex;

    private Context mContext;
    private Cursor mCursor;

    private LayoutInflater mInflater;
    private class ViewHolder {
        ImageView imageView;
    }

    public ImageAdapter(Context c, int layout, Cursor aCursor, String[] from,
            int[] to, int flags) {
        super(c, layout, aCursor, from, to, flags);
        this.mContext = c;
        this.mCursor = aCursor;
        mInflater = (LayoutInflater) 
                c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {return mCursor.getCount();}

    @Override
    public Object getItem(int position) {return position;}

    @Override
    public long getItemId(int position) {return position;}

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder vh;
        View cell = convertView;
        if (cell == null) {
            vh = new ViewHolder();
            // No View passed, create one.
            cell = mInflater.inflate(R.layout.galleryitem, null);
            // Populate the ViewHolder
            vh.imageView = (ImageView) cell.findViewById(R.id.thumbImage);
            // Store the ViewHolder inside the layout
            cell.setTag(vh);
            // Setup the View behavior by setting some listeners...
        } else {
            vh = (ViewHolder) cell.getTag();
        }
        // Update the cell View state
        // Move the cursor to the current position
        mCursor.moveToPosition(position);
        // Get the current value for the requested position
        columnIndex = mCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        int imageID = mCursor.getInt(columnIndex);
        // Set the content of the image based on the provided Uri
        vh.imageView.setImageURI(Uri.withAppendedPath(
                MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" +
        imageID));
        return cell;
    }    
} 
```

您的问题可能是因为您没有为光标和上下文初始化对象。试试上面的代码。可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T22:00:54.187

需要传入 loader.loadInBackground() 中

```
 mAdapter = new ImageAdapter(getApplication(), R.layout.galleryitem,
                loader.loadInBackground(), cols, views, 0); 
```

# sql - 搜索并获取具有给定列名的表名？

> ID：12069038
> 
> 赞同：1
> 
> 时间：2012-08-22T08:23:44.057
> 
> 标签：sql, oracle, db2

我可以编写一个 sql 查询来查找数据库中所有表的名称，这些表的列名如 %COL_FAX_ID%。如果是这样，怎么做？

使用的数据库是 oracle 或 db2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:27:29.407

对于 Oracle，您可以尝试：

```
SELECT owner,
       table_name,
       column_name
  FROM all_tab_cols
 WHERE column_name LIKE '%COL_FAX_ID%'
 ORDER BY owner,
          table_name; 
```

有关 Oracle 数据字典视图等的完整列表，请参见[此处](http://www.oracle.com/pls/tahiti/tahiti.catalog_views)。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:28:49.127

我没有安装 oracle 来测试它，但您应该能够执行以下操作：

```
SELECT TABLE_NAME
FROM ALL_TAB_COLUMNS
WHERE COLUMN_NAME LIKE '%COL_FAX_ID%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:26:46.077

可能的重复[如何在 MySQL 中找到所有具有特定列名的表？](https://stackoverflow.com/questions/193780/how-to-find-all-the-tables-in-mysql-with-specific-column-names-in-them)

回答：

```
SELECT DISTINCT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME IN ('columnA','ColumnB')
        AND TABLE_SCHEMA='YourDatabase'; 
```

编辑：对不起，我错过了 sql for beeeing mysql 标签...但这也可以工作吗？不知道。Gl & Hf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:28:17.647

```
select distinct table_name from all_tab_columns where column_name like %'COL_FAX_ID%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T15:33:02.100

对于 DB2，您将希望使用[`SYSCAT.COLUMNS`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001038.html)目录视图。

```
SELECT *
FROM SYSCAT.COLUMNS
WHERE COLNAME LIKE '%COL_FAX_ID%' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T08:31:34.023

For oracle:

```
SELECT table_name,column_name from all_tab_columns 
where column_name like '%COL_FAX_ID%' 
```

# python - 如何向 wx.TreeCtrl 项目添加额外数据？wxpython

> ID：12069040
> 
> 赞同：2
> 
> 时间：2012-08-22T08:23:47.330
> 
> 标签：python, user-interface, wxpython

如何将额外数据添加到下面`wx.TreeCtrl`命名的附加树项中`fileTree`。我将文本文件中的数据读入数组以构建树。树中的附加项目是图像的文件名，但我想知道如何将完整的文件路径添加到每个项目。当我在一个项目上加倍时，必须显示完整的文件路径，而不仅仅是它的文件名。

```
def __init__(self, *args, **kwds):

    self.fileTree = wx.TreeCtrl(self, size=(200, 100))
    self.root = self.fileTree.AddRoot('Images')
    self.allImages = self.fileTree.AppendItem(self.root, 'All')
    imgLst=self.generateList(imagelist)# Reads a text file with filepaths into list

    for item in imgLst:
        tmp=item
        tmp = tmp[tmp.rfind("\\")+1:tmp.rfind(".")]
        self.fileTree.AppendItem(self.allImages, tmp)

    self.Bind(wx.EVT_TREE_ITEM_ACTIVATED, self.onTreeDClick, self.fileTree)

def onTreeDClick(self,event):
    print 'Double clicked on', self.fileTree.GetItemText(event.GetItem())

def generateList(self, fname):
    f = open(fname, "rb")

    a=[]
    for line in f:
        a.append(line.strip())
    return a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:36:36.240

在您的内部[`wx.TreeCtrl`](http://wxpython.org/docs/api/wx.TreeCtrl-class.html)，您可以拥有一些与它们相关联的数据的项目。该数据是一个`wx.TreeItemData`可以包含任意 Python 对象的类实例。让我们用代码澄清一下：

```
# Let fullPath be holding full path you your file (i.e. in Python string)
fileInfo = wx.TreeItemData(fullPath) 
```

这个对象`fileInfo`实例[`wx.TreeItemData`](http://wxpython.org/docs/api/wx.TreeItemData-class.html)可以与任意`wx.TreeCtrl`项目相关联：

```
# Let item variable contain your tree item object
self.fileTree.SetPyData(item, fileInfo) 
```

在这里，在上面的代码中，我们将 item 对象与`fileInfo`object 关联起来。您可以访问事件处理程序中的关联对象：

```
self.fileTree.GetPyData(event.GetItem()) 
```

就这样。请注意，任何 Python 对象都可以与`wx.TreeCtrl`item 关联。

# java - 简单 DFS 遍历的停止条件

> ID：12069042
> 
> 赞同：0
> 
> 时间：2012-08-22T08:23:53.920
> 
> 标签：java, algorithm, depth-first-search

我正在尝试[在 topcoder 上解决这个问题](http://community.topcoder.com/stat?c=problem_statement&pm=8268&rd=10794)作为一种实践，我尝试为它实现 DFS 解决方案，它运行良好，除了一个错误：即使它到达死胡同，它也会不断遍历每个未访问的单元格，初始代码是：

```
public void func(int[][] x, StringBuilder s, int i, int j, int n) {
    if (i < 0 || j < 0 || i > n || j > n || x[i][j] == 1) {
        return;
    }
    s.append((char) (97 + j));
    s.append(n - i + 1 + "-");
    x[i][j] = 1;
    func(x, s, i, j + 1, n);
    func(x, s, i - 1, j, n);
    func(x, s, i + 1, j, n);
    func(x, s, i, j - 1, n);
    return;
}

public String dukePath(int n, String initPosition) {
    String p = initPosition;
    int x[][] = new int[n][n];
    StringBuilder s = new StringBuilder("");
    func(x, s, n - Integer.parseInt(p.charAt(1) + ""), (int) p.charAt(0) - 97, n - 1);
    s.replace(s.length() - 1, s.length(), "");
    if (s.length() > 40) {
        s.replace(20, s.length() - 20, "...");
    }
    return s.toString();
} 
```

所以我尝试通过添加一个布尔标志和初始位置 (z,y) 来修改函数“func()”的签名，以将当前单元格与 ; 如果代码试图重新访问初始位置，那么它应该返回，但它也没有工作..

当再次到达死胡同或初始位置时，如何停止遍历？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:51:47.213

您错误地处理了这个问题，您需要做的就是在每一步移动到词典上最大的邻居，直到您到达访问所有相邻单元格的点。这是简单的迭代，不需要 DFS：

```
public static String dukePath(int n, String initPosition) {
    int x = initPosition.charAt(0) - 'a';
    int y = n - (initPosition.charAt(1) - '0');
    boolean grid[][] = new boolean[n][n];
    StringBuilder s = new StringBuilder(initPosition);

    while (true) {
        grid[x][y] = true;

        if (x < (n - 1) && !grid[x + 1][y])
            x++; // Right
        else if (y > 0 && !grid[x][y - 1])
            y--; // Up
        else if (y < (n - 1) && !grid[x][y + 1])
            y++; // Down
        else if (x > 0 && !grid[x - 1][y])
            x--; // Left
        else
            break; // Nowhere left to go!

        s.append("-" + (char)('a' + x) + (char)('0' + n - y));
    }

    if (s.length() > 40) {
        s.replace(20, s.length() - 20, "...");
    }

    return s.toString();
}

public static void main(String args[])
{
    System.out.println(dukePath(3, "b2"));
    System.out.println(dukePath(4, "d4"));
    System.out.println(dukePath(3, "a2"));
    System.out.println(dukePath(4, "d3"));
    System.out.println(dukePath(8, "a8"));
} 
```

给出预期的结果：

```
b2-c2-c3-b3-a3-a2-a1-b1-c1
d4-d3-d2-d1-c1-c2-c3...b3-b2-b1-a1-a2-a3-a4
a2-b2-c2-c3-b3-a3
d3-d4-c4-c3-c2-d2-d1...b2-b3-b4-a4-a3-a2-a1
a8-b8-c8-d8-e8-f8-g8...a1-a2-a3-a4-a5-a6-a7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:30:40.483

我认为最简单的解决方案是创建一组包含 i 和 j 的对象。在每次调用 func 时，如果此集合包含具有 i 和 j 的目标对象，则不应调用 func 函数。这种方法既涵盖了后退，也涵盖了循环。

# hibernate - Discriminator column not accessible

> ID：12069044
> 
> 赞同：0
> 
> 时间：2012-08-22T08:23:56.710
> 
> 标签：hibernate

in @inheritance type Joined

I have class person, employee and Student

i have common columns in Person , and getters setters for discriminator column if i have to access it from person class

@Inheritance(strategy=InheritanceType.JOINED) @DiscriminatorColumn(name="PERSON_TYPE", discriminatorType=DiscriminatorType.STRING) public class Person

@Column(name = "RELATIONSHIP_TYPE",insertable=false,nullable=false,updatable=false) private String relationType;

// getters and setters

@DiscriminatorValue("STUDENT") @PrimaryKeyJoinColumn(name="PERSON_ID") public class Student

@DiscriminatorValue("EMPLOYEE") @PrimaryKeyJoinColumn(name="PERSON_ID") public class Employee

so when i am saving the Employee or Student record and then retrieving Person record, It is giving me discriminator column value as NULL but after restarting the server its giving me value accordingly

if i manually set the value of discriminator column value and then save and retrieve then its giving me the value (Do i need to manaully set the discriminator column value?) then what is benefit of using discriminator column

why should i not use OneToMany relation of person with employee and student having column Type and via enum i can enter the perspective value into the column and i will also apply lazy fetching on that columns

Please Suggest

Thanks In Advance Ramandeep Singh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:19:23.827

我有相同的用例，但做了一点不同。我有一个枚举 PersonType 和一个在每个扩展类中都被覆盖的抽象属性。Hibernate 使用鉴别器来决定创建哪个类，并且类决定哪个是鉴别器值，既作为映射又作为属性。

```
pubilc abstract PersonType getType(); 
```

# jquery - UpdatePanel Animation only running after Timeout

> ID：12069045
> 
> 赞同：3
> 
> 时间：2012-08-22T08:24:00.457
> 
> 标签：jquery, asp.net, updatepanel, updatepanelanimationexte

Consider the following scenario:

MasterpageFile1:

```
<%@ Master Language="VB" AutoEventWireup="false" CodeBehind="Frame.master.vb" Inherits="Project.Frame" ClientIDMode="Static" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server" name="form1">
        <asp:ContentPlaceHolder ID="BodyPlaceHolder" runat="server">
        </asp:ContentPlaceHolder>
    </form>
</body>
</html> 
```

Nested Masterpagefile:

```
<%@ Master Language="VB" MasterPageFile="/Project/Code/MasterPages/Frame.Master" CodeBehind="Master2.master.vb" Inherits="Project.Master2" %>
<asp:Content ID="Content2" ContentPlaceHolderID="BodyPlaceHolder" runat="server">
    <input type="submit" id="btSubmit" runat="server" value="start" class="input" />
    <asp:UpdatePanel ID="up" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <div>CALCULATION RESULT GETS DISPLAYED HERE</div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btSubmit" />
        </Triggers>
    </asp:UpdatePanel>
    <ajaxToolkit:UpdatePanelAnimationExtender ID="upae" runat="server" TargetControlID="up">
        <Animations>
            <OnUpdating>
                <Sequence>
                    <ScriptAction FPS="20" Duration="0.5" script="DoSomething();" />
                </Sequence>
            </OnUpdating>
            <OnUpdated>
                <Parallel>
                    <ScriptAction FPS="20" Duration="0" script="DoSomethingElse();" />
                </Parallel>
            </OnUpdated>
        </Animations>
    </ajaxToolkit:UpdatePanelAnimationExtender>
</asp:Content> 
```

An ASPX-Page which loads some Styles.

And the follwing jQuery code:

```
$(document).ready(function () {
    $("#btSubmit").click();
}); 
```

This Code triggers the UpdatePanel to Refresh. The OnUpdating Animation is playing, the Server does some calculation stuff and sends the result to the client. The client builds in the result, but the OnUpdatedAnimation nevers plays.

If i change the jQuery code to the follwing, it works fine.

```
$(document).ready(function () {
    setTimeout(function () {
        $("#btSubmit").click();
    }, 1500);
}); 
```

May someone can tell me, why this happens and how to achieve, that the calculation starts when the DOM is ready and not 1.5 seconds later?

Kind Regards, Sören

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:09:10.873

我相信这种行为的原因是当`btSubmit`点击发生部分回发时，并非所有客户端对象都被初始化。

尝试使用这个脚本（把它放在`ScriptManager`控制之后）：

```
Sys.Application.add_load(applicationLoadHandler);

function applicationLoadHandler(sender, args) {
     if (args.get_isPartialLoad() !== true) {
          $("#btSubmit").click();
     }
} 
```

# asp.net - 在 IIS 错误上发布网站

> ID：12069058
> 
> 赞同：1
> 
> 时间：2012-08-22T08:24:42.980
> 
> 标签：asp.net

大家好，当我通过 IIS 发布我的网站时，我收到此错误代码，如下所示。你能帮助我吗 ？

```
 Configuration Error 
    Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

    Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

    Source Error: 

    Line 27:       </assemblies>
    Line 28:     </compilation>
    Line 29:     <authentication mode="Forms">
    Line 30:       <forms loginUrl="~/Account/LogOn" timeout="2880" />
    Line 31:     </authentication>

    Source File: C:\Users\furkan\Desktop\WebCity\webcity\web.config    Line: 29 
```

然后我将我的根字典转换为应用程序，但我收到了这个错误

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Unrecognized attribute 'targetFramework'. Note that attribute names are case-sensitive.

Source Error: 

Line 17:   <system.web>
Line 18:     <httpRuntime requestValidationMode="2.0" />
Line 19:     <compilation debug="true" targetFramework="4.0">
Line 20:       <assemblies>
Line 21:         <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

Source File: C:\Users\furkan\Desktop\WebCity\WebCity\web.config    Line: 19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:30:12.573

第一个问题的答案是这样的：

这通常意味着您尚未将网站的目录配置为应用程序。打开 IIS 管理器，找到您网站的根目录（web.config 所在的位置），右键单击，然后选择“转换为应用程序”。

对于新问题，这是.NET版本的问题。您要么没有安装 asp.net 4.0，要么将应用程序池设置为使用错误的框架。可能是后者，所以转到您网站的高级设置，选择应用程序池设置，然后选择一个名为 ASP.NET 4.0 或任何其他使用 4.0 框架的应用程序池。如果没有，则需要安装 .NET 4.0

![选择应用程序池：](../Images/683af3975c78d3fde589e2faee0d0d34.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:29:19.327

您是否检查过某个子目录中是否有多个 web.config？[在此处](http://forums.devarticles.com/net-development-43/section-registered-as-allowdefinition-machinetoapplication-beyond-application-level-10027.html)
描述问题的链接

# ruby-on-rails - Mongoid, complex query, something similar to has_many : through

> ID：12069061
> 
> 赞同：0
> 
> 时间：2012-08-22T08:25:02.967
> 
> 标签：ruby-on-rails, mongodb, mongoid

I have the following models:

```
class Company
  # ...
  has_many :invoices
end

class Invoice
  # ...
  belongs_to :company
  has_many :items

  field :type, String

  scope :expense, where(type: 'expense')
  scope :income, where(type: 'income')
end

class Item
  # ...
  belongs_to :invoice
end 
```

The question is how to fetch all `income` Items for the given company?

Something similar to `company.items.expense`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T20:30:03.540

使用嵌入式关系不会有任何区别。调用`company.items.expense`仍然会返回一个错误，因为`company.items`返回一个数组。

尝试这样的事情：

```
class Company
  #...
  def expenses
     self.invoices.where(type: 'expense')
  end

  def incomes
     self.invoices.where(type: 'income')
  end
end 
```

然后你可以调用`company.expenses`and `company.incomes`。

根据您的使用情况，您可能会发现最好嵌入`Item`其中`Invoice`或将其保留为单独的集合。此外，由于您正在处理发票，请记住要小心您的回调并在必要时使它们级联，因此`Invoice`如果更改时间，则修改时间`Item`会更改。

# xslt - 排除空元素

> ID：12069062
> 
> 赞同：1
> 
> 时间：2012-08-22T08:25:08.530
> 
> 标签：xslt, xslt-2.0

在我的示例 xml 文件中，我有这个：

```
<AAA mandatory = "true"> good </AAA>
<BBB mandatory = "true"></BBB>
<CCC /> 
```

在生成的 xml 中，结果应该是这样的：

```
<AAA> good </AAA>
<BBB></BBB> 
```

我应该在我的转换文件 xslt 中放入什么来生成这个 xml？

目前，我有这个：

```
<xsl:template match="node()[(@mandatory='true' or (following-sibling::*[@mandatory='true' and string-length(normalize-space(.)) > 0] or preceding-sibling::*[@mandatory='true' and string-length(normalize-space(.)) > 0])) or descendant-or-self::*[string-length(normalize-space(.)) > 0]]"> 
```

但这一直显示

```
 <CCC /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:22:15.697

当我在输入 XML 上运行 XSLT 时，我没有得到任何输出。您提供的 XML 格式不正确，我认为“匹配”中的 XPATH 太复杂了。

我想出了一个 XSL 1.0 解决方案，但我不知道您是否可以在 XSL 2.0 中使用它。我没有使用 XSL 2.0 的经验。

这个 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:template match="/">
    <list>
        <xsl:apply-templates/>
    </list>
</xsl:template>

<xsl:template match="*[@mandatory='true']">
    <xsl:copy>
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

应用于此输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<AAA mandatory="true"> good </AAA>
<BBB mandatory="true"/>
<CCC/>
</list> 
```

给出这个输出 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<AAA> good </AAA>
<BBB/>
</list> 
```

我不确定您是否还想检查元素的文本长度或仅检查强制属性。我只检查我的 XSL 中的属性。

# android - 如何在验证用户验证时关注编辑框？

> ID：12069063
> 
> 赞同：0
> 
> 时间：2012-08-22T08:25:10.283
> 
> 标签：android, xml

我需要专注于所需的编辑框吗？当我单击保存按钮时，我设置提示此字段为必填项，但焦点仍保留在先前的编辑框中我需要的是在该编辑框中获得焦点 setfocusable(true) 不适用于此代码`

```
save.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                boolean valid = getvalid();
                if (valid == false) {
                    String field = getField();

                    Toast.makeText(writeRFIDTag.this,
                            "field " + field + " required", Toast.LENGTH_SHORT)
                            .show();
                }` 
```

和getfield方法

```
private String getField() {
                String empty = null;
                String required = "this field required";
                String mUser = userId.getText().toString();
                if (mUser.isEmpty()) {
                    empty = "User Id";
                    userId.setHint(required);
                } else {

                    String mCompany = company.getText().toString();
                    if (mCompany.isEmpty()) {
                        empty = "Company";
                        company.setHint(required);
                    } else {

                        String mFirstName = firstName.getText().toString();
                        if (mFirstName.isEmpty()) {
                            empty = "First Name";
                            firstName.setHint(required);
                        } else {
                            String mLastName = lastName.getText().toString();
                            if (mLastName.isEmpty()) {
                                empty = "Last Name";
                                lastName.setHint(required);
                            } else {

                                String mEncryptionKey = encryptionKey.getText()
                                        .toString();
                                if (mEncryptionKey.isEmpty()) {
                                    empty = "encryption key";
                                    encryptionKey.setHint(required);
                                }
                            }
                        }
                    }
                }

                return empty;
            }

and getvalid method

private boolean getvalid() {

                String mUser = userId.getText().toString();
                // if (mUser == null)
                // userId.setError("First name is required!");
                String mCompany = company.getText().toString();
                // if (mCompany == null)
                // userId.setError("First name is required!");
                String mFirstName = firstName.getText().toString();
                // if (mFirstName == null)
                // userId.setError("First name is required!");
                String mLastName = lastName.getText().toString();
                // if (mLastName == null)
                // userId.setError("First name is required!");
                String mEncryptionKey = encryptionKey.getText().toString();
                // if (mEncryptionKey == null)
                // userId.setError("First name is required!");

                if (mUser.equalsIgnoreCase("") || mCompany.equalsIgnoreCase("")
                        || mFirstName.equalsIgnoreCase("")
                        || mLastName.equalsIgnoreCase("")
                        || mEncryptionKey.equalsIgnoreCase(""))

                    return false;
                else {
                    return true;
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:39:16.220

添加

```
.requestFocus() 
```

在必填字段上

# c# - NHibernate Delete from Where COLUMN in (collection)

> ID：12069064
> 
> 赞同：3
> 
> 时间：2012-08-22T08:25:16.720
> 
> 标签：c#, sql, nhibernate

我正在尝试`where column in (collection)`使用以下方法从表中删除行：

```
public void DeleteRows(int parentId, List<int> years)
{
    var yearsAsCommaSeperatedString = ListToCommaSeperatedString(years);
    const string query = "DELETE FROM TABLE t WHERE t.PARENT_ID=:Parent AND t.YEAR in(:yearList)";
    Session
            .CreateSQLQuery(query)
            .SetParameter("Parent", parentId)
            .SetParameter("yearList", yearsAsCommaSeperatedString)
            .ExecuteUpdate();
}

private static string ListToCommaSeperatedString(IEnumerable<int> ints)
{
    var aggregate = ints.Aggregate("", (current, i) => current + (i + ", "));
    return aggregate.Substring(0, aggregate.LastIndexOf(",", StringComparison.Ordinal));
} 
```

问题是这`yearsAsCommaSeperatedString`是一个字符串，因此数据库无法解释它的数字。我也尝试添加整数列表作为参数，但 NHibernate 不知道如何处理它。

如何使用`where in(collection)`CreateSQLQuery？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:36:07.350

你可以使用这样的东西

```
 ISession session = GetSession();
    string hql = @"from Product p
                   where p.Category in (:categories)";

    var categoriesToSearch = new[] {new Category {Id = 1}, new Category {Id = 2}};

    var query = session.CreateQuery(hql);
    query.SetParameterList("categories", categoriesToSearch);

    var products = query.List<Product>(); 
```

或者你可以试试这个

```
public void DeleteRows(int parentId, List<int> years)
{        
    const string query = "DELETE FROM TABLE t WHERE t.PARENT_ID=:Parent AND t.YEAR in (:yearList)";
    Session
            .CreateSQLQuery(query)
            .SetParameter("Parent", parentId)
            .SetParameterList("yearList", years)
            .ExecuteUpdate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:48:13.303

如果您的方法有效，您可以再次使用 SetParamter，但必须将 SQL-Query 更改为以下内容：

```
var yearsAsCommaSeperatedString = ListToCommaSeperatedString(years);
const string query = "DELETE FROM TABLE t WHERE t.PARENT_ID=:Parent AND t.YEAR in(\":yearList\")";
Session .CreateSQLQuery(query)
        .SetParameter("Parent", parentId)
        .SetParameter("yearList", yearsAsCommaSeperatedString)
        .ExecuteUpdate(); 
```

应该比字符串连接（sql-injection）更好:)

问候

# tridion - 观众管理 API：无法打开 RSA 密钥容器

> ID：12069070
> 
> 赞同：5
> 
> 时间：2012-08-22T08:25:41.890
> 
> 标签：tridion, tridion-2011

这是对此问题的后续问题：[Outbound E-mail Profile API: Get list of e-mailaddresses](https://stackoverflow.com/questions/12050123/outbound-e-mail-profile-api-get-list-of-e-mailaddresses)

我正在编写一个简单的示例来探索 Audience Management API。我所有的代码都在这里。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Tridion.AudienceManagement.API;

namespace OEPasswordEncrypt
{
    class Program
    {
        static void Main(string[] args)
        {
            StaticAddressBook importAddressBook = new StaticAddressBook(new UserContext());
        }
    }
} 
```

我在 CM 服务器上运行它时遇到的错误是：

```
Unhandled Exception: System.TypeInitializationException: The type initializer for 'Tridion.AudienceManagement.DomainModel.Utilities.Configuration' threw an exception. ---> Tridion.AudienceManagement.DomainModel.Exceptions.LocalizableConfiguationErrorsException: Loading of the configuration failed. ---> System.Configuration.ConfigurationErrorsException: The RSA key container could not be opened.
   at System.Configuration.RsaProtectedConfigurationProvider.ThrowBetterException(Boolean keyMustExist)
   at System.Configuration.RsaProtectedConfigurationProvider.GetCryptoServiceProvider(Boolean exportable, Boolean keyMustExist)
   at System.Configuration.RsaProtectedConfigurationProvider.Decrypt(XmlNode encryptedNode)
   at Tridion.AudienceManagement.DomainModel.Utilities.ConfigurationEncryption.TraverseAndProcessChildren(Dictionary`2 protectedConfigurationProviders, XmlNodenode)
   at Tridion.AudienceManagement.DomainModel.Utilities.ConfigurationEncryption.DecryptConfiguration(XmlDocument rawConfiguration)
   at Tridion.AudienceManagement.DomainModel.Utilities.Configuration.Reload()
   --- End of inner exception stack trace ---
   at Tridion.AudienceManagement.DomainModel.Utilities.Configuration.Reload()
   at Tridion.AudienceManagement.DomainModel.Utilities.Configuration..cctor()
   --- End of inner exception stack trace ---
   at Tridion.AudienceManagement.DomainModel.Utilities.Configuration.get_LogFolder()
   at Tridion.AudienceManagement.DomainModel.Utilities.Logger.AssertValidLogFolder()
   at Tridion.AudienceManagement.DomainModel.Utilities.Logger.WriteLine(LogLevel logLevel, String message, Object[] objects)
   at Tridion.AudienceManagement.DomainModel.Utilities.Logger.WriteLine(LogLevel logLevel, String message)
   at Tridion.AudienceManagement.DomainModel.Utilities.Logger.Info(String message)
   at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.LogBindingInfo(Exception ex)
   at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.GetConfiguredCoreService()
   at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.GetClient(UserContext userContext, UserData& userData)
   at Tridion.AudienceManagement.DomainModel.ServiceClient.ContentManagerClient.LoadCurrentUser(UserContext userContext, String userDataXml)
   at Tridion.AudienceManagement.DomainModel.UserContext..ctor(String trusteeName)
   at Tridion.AudienceManagement.DomainModel.UserContext..ctor()
   at Tridion.AudienceManagement.API.UserContext..ctor()
   at OEPasswordEncrypt.Program.Main(String[] args) in c:\users\kaht\documents\visual studio 2010\Projects\OEPasswordEncrypt\OEPasswordEncrypt\Program.cs:line 13 
```

我已经尝试使用我自己的用户名运行 aspnet_regiis TridionRsaKeyContainer，但这告诉我 RSA 密钥容器不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:03:07.767

尝试运行以下命令：

aspnet_regiis -pa "TridionRsaKeyContainer" "User_Name"

# android - 当我调用 stopService(intent)

> ID：12069072
> 
> 赞同：0
> 
> 时间：2012-08-22T08:25:44.637
> 
> 标签：android, android-service, android-lifecycle

在生命周期方面，当我调用 stopService(intent) 时，服务的 onDestroy() 是否会立即被调用？我之所以问，是因为我在调用 onDestroy() 来杀死服务生成的这个线程时遇到问题。

提前致谢！

```
button.setOnClickListener(new OnClickListener(){
        public void onClick(View v){

            Log.d(Tag, "in button's onClick");

            Log.d(Tag, field.getText().toString());
            String busNo = field.getText().toString();
            field.setText("");
            field.setAdapter(clearAdapter);
            String url = makeURL(busNo);
            Log.d(Tag, "after makeURL(), url is now "+url);
            Intent intent = new Intent(JSoupTest9Activity.this, ServiceTest.class);
            Log.d(Tag, "intent created...");
            intent.putExtra("URL", url);
            Log.d(Tag, "intent's extra put");
            Log.d(Tag, "stopping intent service");
            stopService(intent);
            Log.d(Tag, "starting intent service");

            startService(intent);
            Log.d(Tag, "service started");

            //pendingIntent = PendingIntent.getService(JSoupTest8Activity.this, 0, intent,  0);
            //alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 30*1000, pendingIntent);

        }
    }); 
```

如您所见，我调用了 stopService() 来终止任何以前的服务（查询线程）以启动新服务（新查询线程）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:47:18.787

仅通过静态调用 stopService 不会立即调用它。正如活动的[生命周期](http://developer.android.com/reference/android/app/Activity.html)图中所指出的，如果 vm 需要资源，它将被销毁

当我有疑问时，我只需使用日志工具并在 LogCat 上检查它们的输出。如果您像这样覆盖 OnDestroy 方法：

```
protected void onDestroy() {
Log.d("event","onDestroy was Called!");
super.onDestroy();
} 
```

您可以在调用时验证自己。

如果您想在后台销毁您的一项活动，您可以使用活动管理器：

```
ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
activityManager.killBackgroundProcesses("<packagename>"); 
```

如果它不在您的应用程序中，您当然需要在清单上设置权限。以我有限的经验，我还没有找到需要破坏任何进程的时间；但我确实发现很多文档告诉我不要这样做，[例如](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)

进一步检查，我认为这个问题[已经涵盖](https://stackoverflow.com/questions/2176375/android-service-wont-stop/2176415#2176415)

# codeigniter - Codeigniter 消息：数组到字符串的转换

> ID：12069074
> 
> 赞同：1
> 
> 时间：2012-08-22T08:25:51.700
> 
> 标签：codeigniter

我在我的 CodeIgniter 安装中收到以下错误，我似乎无法解决：

> 遇到 PHP 错误 严重性：通知
> 
> 消息：数组到字符串的转换
> 
> 文件名：helpers/form_helper.php
> 
> 行号：515

这是我的代码

```
 <div class="control-group">
                <?php $attributes = array('class' => 'control-label'); echo form_label(lang('settings_dateofbirth'),$attributes); ?>
                <div class="controls">   
                <?php $m = $this->input->post('settings_dob_month') ? $this->input->post('settings_dob_month') : (isset($account_details->dob_month) ? $account_details->dob_month : ''); ?>
                <select name="settings_dob_month" class="span1">
                    <option value=""><?php echo lang('dateofbirth_month'); ?></option>
                    <option value="1"<?php if ($m == 1) echo ' selected="selected"'; ?>><?php echo lang('month_jan'); ?></option>
                    <option value="2"<?php if ($m == 2) echo ' selected="selected"'; ?>><?php echo lang('month_feb'); ?></option>
                    <option value="3"<?php if ($m == 3) echo ' selected="selected"'; ?>><?php echo lang('month_mar'); ?></option>
                    <option value="4"<?php if ($m == 4) echo ' selected="selected"'; ?>><?php echo lang('month_apr'); ?></option>
                    <option value="5"<?php if ($m == 5) echo ' selected="selected"'; ?>><?php echo lang('month_may'); ?></option>
                    <option value="6"<?php if ($m == 6) echo ' selected="selected"'; ?>><?php echo lang('month_jun'); ?></option>
                    <option value="7"<?php if ($m == 7) echo ' selected="selected"'; ?>><?php echo lang('month_jul'); ?></option>
                    <option value="8"<?php if ($m == 8) echo ' selected="selected"'; ?>><?php echo lang('month_aug'); ?></option>
                    <option value="9"<?php if ($m == 9) echo ' selected="selected"'; ?>><?php echo lang('month_sep'); ?></option>
                    <option value="10"<?php if ($m == 10) echo ' selected="selected"'; ?>><?php echo lang('month_oct'); ?></option>
                    <option value="11"<?php if ($m == 11) echo ' selected="selected"'; ?>><?php echo lang('month_nov'); ?></option>
                    <option value="12"<?php if ($m == 12) echo ' selected="selected"'; ?>><?php echo lang('month_dec'); ?></option>
                </select>
                <?php $d = $this->input->post('settings_dob_day') ? $this->input->post('settings_dob_day') : (isset($account_details->dob_day) ? $account_details->dob_day : ''); ?>
                <select name="settings_dob_day" class="span1">
                    <option value="" selected="selected"><?php echo lang('dateofbirth_day'); ?></option>
                    <?php for ($i=1; $i<32; $i++) : ?>
                    <option value="<?php echo $i; ?>"<?php if ($d == $i) echo ' selected="selected"'; ?>><?php echo $i; ?></option>
                    <?php endfor; ?>
                </select>
                <?php $y = $this->input->post('settings_dob_year') ? $this->input->post('settings_dob_year') : (isset($account_details->dob_year) ? $account_details->dob_year : ''); ?>
                <select name="settings_dob_year" class="span1">
                    <option value=""><?php echo lang('dateofbirth_year'); ?></option>
                    <?php $year = mdate('%Y', now()); for ($i=$year; $i>1900; $i--) : ?>
                    <option value="<?php echo $i; ?>"<?php if ($y == $i) echo ' selected="selected"'; ?>><?php echo $i; ?></option>
                    <?php endfor; ?>
                </select>
                <?php if (isset($settings_dob_error)) : ?>
                <span class="field_error"><?php echo $settings_dob_error; ?></span>
                <?php endif; ?>
            </div>
            </div> 
```

有人可以解释这与什么有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:29:01.467

该错误指的是`form_label`. 第二个参数应该是一个字符串，而第三个参数可以是一个数组。

```
 form_label(lang('settings_dateofbirth'), 'dateofbirth', $attributes); 
```

# java - 通过 JButton 激活 BufferedReader 有困难

> ID：12069075
> 
> 赞同：0
> 
> 时间：2012-08-22T08:25:57.630
> 
> 标签：java, eclipse, jbutton, bufferedreader, final

我正在寻找一个快速解决这个问题的方法：这是我的代码：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JTextField;

public class Directory{
    public static void main(String args[]) throws IOException{

    JFrame frame = new JFrame("Directory");
    frame.setPreferredSize(new Dimension(300,300));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    final JProgressBar searchprogress = new JProgressBar();
    JPanel panel = new JPanel();
    final JButton searchbutton = new JButton("Search");
    final JTextField searchfield = new JTextField();
    searchfield.setPreferredSize(new Dimension(100,30));
    searchprogress.setPreferredSize(new Dimension(200, 30));
    searchbutton.setLocation(100, 100);

    /*                  Start Buffered Reader                       */
    BufferedReader br = new BufferedReader(new FileReader("test1.txt"));
    String housetype = br.readLine();
    String housenumber = br.readLine();
    String housestreet = br.readLine();
    String housepostal = br.readLine();
    String houseplace = br.readLine();
    String seperation = br.readLine();
    /*                  Finish Buffered Reader                      */

    /*                      Start Content Code                      */
    JButton done = new JButton("Done");
    done.setVisible(false);
    JLabel housetype_label = new JLabel();
    JLabel housenumber_label = new JLabel();
    JLabel housestreet_label = new JLabel();
    JLabel housepostal_label = new JLabel();
    JLabel houseplace_label = new JLabel();

    /*                      Finish Content Code                     */

    /*                      Start Button Code                       */

    searchbutton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae)
        {
            String searchquery = searchfield.getText();
            searchprogress.setValue(100);
            searchfield.setEnabled(false);
            if(searchquery.equals(housetype)){
                System.out.println("We Have Found  A Record!!");
            }}
        });

    /*                      Finish Button Code                      */
    /*                          Test Field                          */

    /*                      End Test Field                          */

    panel.add(searchfield);
    panel.add(done);
    panel.add(searchbutton);
    panel.add(searchprogress);
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);

}
} 
```

基本上在我写完这段代码之后，Eclipse 告诉我必须将 housetype 的修饰符更改为 final。这真的不行，因为如果它要通过不同的记录，我需要成为一个不断变化的价值。请帮我！丁：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:34:51.993

您在这里有几个选择：

*   最快的方法是按照 Eclipse 告诉你的去做，实际上是 Java 告诉你的。为了能够在方法内部类中使用方法局部变量，变量必须是最终的。
*   另一种选择是在类定义之后立即将 housetype 变量声明为实例变量。但是，在静态 main 方法中使用它意味着变量也需要是静态的，这使其成为类变量。
*   另一种方法是保持代码不变，但声明一个像下面这样的额外变量，然后在内部类中使用 house 变量而不是 housetype。请参阅下面的完整代码：

    ```
    public class Directory {
      public static void main(String args[]) throws IOException {

        JFrame frame = new JFrame("Directory");
        frame.setPreferredSize(new Dimension(300, 300));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JProgressBar searchprogress = new JProgressBar();
        JPanel panel = new JPanel();
        final JButton searchbutton = new JButton("Search");
        final JTextField searchfield = new JTextField();
        searchfield.setPreferredSize(new Dimension(100, 30));
        searchprogress.setPreferredSize(new Dimension(200, 30));
        searchbutton.setLocation(100, 100);

        /* Start Buffered Reader */
        final List<String> housetypes = new ArrayList<String>();
        String line = "";
        BufferedReader br = new BufferedReader(new FileReader("test1.txt"));
        while (line != null) {
            line = br.readLine();
            housetypes.add(line);
            String housenumber = br.readLine();
            String housestreet = br.readLine();
            String housepostal = br.readLine();
            String houseplace = br.readLine();
            String seperation = br.readLine();
        }
        /* Finish Buffered Reader */

        /* Start Content Code */
        JButton done = new JButton("Done");
        done.setVisible(false);
        JLabel housetype_label = new JLabel();
        JLabel housenumber_label = new JLabel();
        JLabel housestreet_label = new JLabel();
        JLabel housepostal_label = new JLabel();
        JLabel houseplace_label = new JLabel();

        /* Finish Content Code */

        /* Start Button Code */
        searchbutton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                String searchquery = searchfield.getText();
                searchprogress.setValue(100);
                searchfield.setEnabled(false);
                for (String housetype : housetypes) {
                    if (searchquery.equals(housetype)) {
                        System.out.println("We Have Found  A Record!!");
                    }
                }
            }
        });

        /* Finish Button Code */
        /* Test Field */

        /* End Test Field */

        panel.add(searchfield);
        panel.add(done);
        panel.add(searchbutton);
        panel.add(searchprogress);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
      }
    } 
    ```

*   还有更多选择，但这些是最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:37:54.010

一种解决方法是在类目录中创建一个新方法，该方法从 ActionListener 调用并执行您的任务：

```
private void searchButtonAction() {
    String searchquery = searchfield.getText();
    searchprogress.setValue(100);
    searchfield.setEnabled(false);
    if(searchquery.equals(housetype)){
        System.out.println("We Have Found  A Record!!");
    }
} 
```

然后这样称呼它：

```
public void actionPerformed(ActionEvent ae)
{
    searchButtonAction();
}); 
```

这仅在您在类中创建构造函数并从 main 方法调用它时才有效。此外，在 searchButtonAction 方法中使用的所有变量都必须是类可见的。

完整代码：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JTextField;

    public class Directory {

    private final JTextField searchfield = new JTextField();
    private final JProgressBar searchprogress = new JProgressBar();

    private String housetype;

    public Directory() throws IOException {

        JFrame frame = new JFrame("Directory");
        frame.setPreferredSize(new Dimension(300, 300));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel();
        final JButton searchbutton = new JButton("Search");
        searchfield.setPreferredSize(new Dimension(100, 30));
        searchprogress.setPreferredSize(new Dimension(200, 30));
        searchbutton.setLocation(100, 100);

        /* Start Buffered Reader */
        BufferedReader br = new BufferedReader(new FileReader("test1.txt"));
        housetype = br.readLine();
        String housenumber = br.readLine();
        String housestreet = br.readLine();
        String housepostal = br.readLine();
        String houseplace = br.readLine();
        String seperation = br.readLine();
        /* Finish Buffered Reader */

        /* Start Content Code */
        JButton done = new JButton("Done");
        done.setVisible(false);
        JLabel housetype_label = new JLabel();
        JLabel housenumber_label = new JLabel();
        JLabel housestreet_label = new JLabel();
        JLabel housepostal_label = new JLabel();
        JLabel houseplace_label = new JLabel();

        /* Finish Content Code */

        /* Start Button Code */

        searchbutton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                searchButtonAction();
            }
        });

        /* Finish Button Code */
        /* Test Field */

        /* End Test Field */

        panel.add(searchfield);
        panel.add(done);
        panel.add(searchbutton);
        panel.add(searchprogress);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);

    }

    private void searchButtonAction() {
        String searchquery = searchfield.getText();
        searchprogress.setValue(100);
        searchfield.setEnabled(false);
        if (searchquery.equals(housetype)) {
            System.out.println("We Have Found  A Record!!");
        }
    }

    public static void main(String args[]) throws IOException {

        new Directory();

    }
    } 
```

# sql - Allen 在 SQL 中的区间代数运算

> ID：12069082
> 
> 赞同：14
> 
> 时间：2012-08-22T08:26:38.707
> 
> 标签：sql, algorithm, plsql, oracle11g, intervals

我一直在努力解决 SQL 中的一些棘手问题，我需要从事件间隔推断资产利用率，并且刚刚了解了[Allen 的间隔代数](https://i.stack.imgur.com/holbD.png)，这似乎是解决这些问题的关键。

代数描述了 13 种区间之间的关系，下图显示了前 7 种关系，其余为逆关系（即 y 在 x 之前，y 遇到 x 等）

![在此处输入图像描述](../Images/d7b5837dd6df161e3ee0ac7f8db4995a.png)

但我无法找出如何实施相关操作。

给定我的示例数据，我该如何从 SQL 或 PLSQL 中的以下三种类型的操作中获取结果？

1.  **脱离**
2.  **减少**
3.  **寻找差距**

* * *

请查看我的 SQLFiddle 链接： [http ://sqlfiddle.com/#!4/cf0cc](http://sqlfiddle.com/#!4/cf0cc)

* * *

## 原始数据

```
 start end width
[1]     1  12    12
[2]     8  13     6
[3]    14  19     6
[4]    15  29    15
[5]    19  24     6
[6]    34  35     2
[7]    40  46     7 
```

![在此处输入图像描述](../Images/b643179d04629541e85292c088c68061.png)

* * *

## 操作 1 - 脱节的结果

我想要一个查询来`disjoint set`从上面的数据中返回，其中所有重叠的间隔都被分成几行，这样就不存在重叠了。

我该如何处理这个 SQL？

```
 start end width
[1]      1   7     7
[2]      8  12     5
[3]     13  13     1
[4]     14  14     1
[5]     15  18     4
[6]     19  19     1
[7]     20  24     5
[8]     25  29     5
[9]     34  35     2
[10]    40  46     7 
```

![在此处输入图像描述](../Images/b643179d04629541e85292c088c68061.png) ![在此处输入图像描述](../Images/b4c51d5a41fb65a51525fbeea2fbd2c3.png)

* * *

## 操作 2 - 减少结果

我该如何减少/拉平间隔，使它们是：

*   不为空（即它们具有非空宽度）；
*   不重叠；
*   从左到右排序；
*   甚至不相邻（即两个连续范围之间必须有非空间隙）

对于我的示例，这看起来像：

```
 start end width
[1]     1  29    29
[2]    34  35     2
[3]    40  46     7 
```

![在此处输入图像描述](../Images/b643179d04629541e85292c088c68061.png) ![在此处输入图像描述](../Images/d387549ed6c4bf2406e9a7a9c4274b36.png)

* * *

## 操作 3 - 差距结果

另外，我如何找到差距？

```
 start end width
[1]    30  33     4
[2]    36  39     4 
```

![在此处输入图像描述](../Images/b643179d04629541e85292c088c68061.png) ![在此处输入图像描述](../Images/0ed3a127ce0337b1efe985b80e29bdbd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:06:39.950

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!4/23a73/2) 首先创建临时表以简化查询，尽管您可以将这些创建查询放入最终查询中并在没有临时表的情况下执行此操作：

```
create table t as select * from
(
select null s ,"start"-1 as e  from data
union all
select "start" s,null e  from data
union all
select "end"+1 s ,null e  from data
union all
select null s ,"end" e  from data
) d where exists (select "start" 
                  from data where d.s between data."start" and data."end"
                               or d.e between data."start" and data."end"
                                );
--Operation 1 - Disjoined Result   
create table t1 as select s,e,e-s+1 width from
(
select distinct s,(select min(e) from t where t.e>=t1.s) e from t t1
) t2 where t2.s is not null and t2.e is not null;

--Operation 2 - Reduced Result
create table t2 as 
select s,e,e-s+1 width from
(
select s,(select min(d2.e) from t1 d2 where d2.s>=d.s and not exists
          (select s from t1 where t1.s=d2.e+1) ) e
from
t1 d where not exists(select s from t1 where t1.e=d.s-1) 
) t2;

--Temp table for Operation 3 - Gaps
create table t3 as 
select null s, s-1 e from t2
union all
select e+1 s, null e from t2; 
```

现在这里是查询：

```
--Operation 1 - Disjoined Result
select * from t1 order by s;

--Operation 2 - Reduced Result

select * from t2 order by s;

--Operation 3 - Gaps

select s,e,e-s+1 width 
from
(
select s,(select min(e) from t3 where t3.e>=d.s) e from t3 d
) t4 where s is not null and e is not null
order by s; 
```

# java - 如何将String设置为静态int？

> ID：12069090
> 
> 赞同：0
> 
> 时间：2012-08-22T08:27:14.167
> 
> 标签：java

> **可能重复：**
> [Java - 如何将 String 设置为静态 int](https://stackoverflow.com/questions/12069026/java-how-to-set-string-as-static-int)

我有一个只接受字符串的方法。

```
public void setVerticalAlignment(String align) {
...
gd.verticalAlignment = align; 
// accepts only int.   
... 
} 
```

但`gd.verticalAlignment`只接受一个int。通常这是由诸如`gd.verticalAlignment = SWT.TOP`where `SWT.TOP`is a static int 之类的东西设置的。

是否可以使用类似的方法调用此方法`setVerticalAlignment("SWT.TOP")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:28:38.270

If`align`是字符串格式的数字。那么你可以这样做：

```
gd.verticalAlignment = Integer.parseInt(align); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:29:23.247

如果您要推出自己的框架，请使用[Swing 常量或类似的东西](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/SwingConstants.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:30:06.490

你可以，通过转换为字符串。但你不应该那样做。您应该在方法中更改代码并调用 gd.verticalAlignment = Integer.valueOf(align);

# c++ - c++ C2440 错误无法从 'const BWAPI::UpgradeType' 转换为 'const BWAPI::Type *'

> ID：12069091
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:27:18.160
> 
> 标签：c++, inheritance, syntax-error

错误 C2440：“=”：无法从“const BWAPI::UpgradeType”转换为“const BWAPI::Type *”

在这条线上

```
this->generalType = type; 
```

问题是什么？因为 UnitType extends Type 不应该被允许？

```
class CombatEvent {

public:
    CombatEvent& setUnitType(const UnitType& type);
    const Type* getGeneralType() const;

private:
    UnitType unitType;
    const Type* generalType;
}

// implementation

CombatEvent& CombatEvent::setUnitType(const UnitType& type) {

    this->generalType = type;
    this->unitType = type;

    return *this;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:28:59.673

您需要获取地址：

```
this->generalType = &type; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:29:37.923

您正在分配对指针的引用。正确代码：

```
this->generalType = &type; 
```

你可以看看这些链接

[引用与指针](http://eetimes.com/discussion/programming-pointers/4023307/References-vs-Pointers)

[C++中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T04:35:20.240

您在使用 BWAPI 类型时存在一个基本问题。

**1.** BWAPI::Type 是一个模板类，包含所有类型中通用的所有实用函数。没有必要使用它。没有办法知道它是 UnitType 还是 UpgradeType，它只包含一个整数作为基础类型。

**2.**不需要将 BWAPI 类型转换为指针或引用。编译器将其解析为整数，没什么特别的。你会`const int&`在你的代码中到处使用吗？

# javascript - 我想从 iframe 获取 url

> ID：12069102
> 
> 赞同：7
> 
> 时间：2012-08-22T08:28:46.070
> 
> 标签：javascript

这是我使用的代码......

我想从下面的代码中获取**当前**url(href) ......

```
<html>
<head>
<script type="text/javascript">
        function load() {
            var url =  document.getElementById("iframeid");  

          //get the ifram onload url of href 
    //(i.e)   http://www.image.com/home.html     

        }
    </script>
</head>
<body>
<iframe onload="load()" name="Google"  id="iframeid"  scrolling="auto" style="width:95%;height:600px" src="http://www.image.com" >

    </iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T08:33:50.513

仅当它们位于相同的域、协议和端口中时，这才有效：

```
document.getElementById("iframe_id").contentWindow.location.href 
```

否则使用：

```
document.getElementById("iframe_id").src 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T08:32:13.383

***[演示。](http://jsfiddle.net/Az9Qw/)***

```
<html>
<head>
<script type="text/javascript">
        function load(frame) {
            console.log(frame.src);
        }
</script>
</head>
<body>
<iframe onload="load(this)" name="Google"  id="iframeid"  scrolling="auto" style="width:95%;height:600px" src="http://www.image.com" >
</iframe>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T08:31:16.113

试试这个：

`document.getElementById("iframeid").src;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T08:33:47.047

试试这个。有时您无法访问 iframe 网址

```
var CurrentUrl = document.getElementById('MyIFrame').contentWindow. location.href; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T08:32:05.677

只有两个丢失的位（用 <== 标记）

```
<html>
<head>
<script type="text/javascript">
        function load() {
            var url =  document.getElementById("iframeid").src; // <== .src

            //get the ifram onload url of href 
            //(i.e)   http://www.image.com/home.html     

        }
    </script>
</head>
<body>
<iframe onload="load()" name="Google"  id="iframeid"  scrolling="auto" style="width:95%;height:600px" src="http://www.image.com" > // <== Opening angle bracket

    </iframe>
</body>
</html> 
```

# c++ - 在 CameraCaptureUI 中的“更改相机”按钮中限制相机类型

> ID：12069104
> 
> 赞同：0
> 
> 时间：2012-08-22T08:28:51.293
> 
> 标签：c++, windows-runtime, windows-store-apps, winrt-xaml

CameraCaptureUI 是一种从相机捕捉、录制视频的简单方法。
我正在开发相机应用程序，我只使用特定的相机，例如，只显示罗技相机。因此，当用户在 UI 中按下“更换摄像头”时，它只会在罗技摄像头之间切换，而不会在其他摄像头之间切换。

我可以使用 Media Capture UI 来做到这一点。我想知道是否可以通过 CameraCapture UI Api 来实现，因为这会减少开发时间。

我使用 C++ 作为编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:53:13.567

它似乎不是 CameraCaptureUI 上的一个选项 - 它确实非常简化。如果您使用 MediaCapture/CaptureElement 路线 - 您可能需要检查WinRT XAML 工具包中的[CameraCaptureControl](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/17626#326623)。它是 C# 代码，但它有一些用于控制相机的东西。

# input - 在 Lua 中获取用户的输入

> ID：12069109
> 
> 赞同：16
> 
> 时间：2012-08-22T08:29:01.937
> 
> 标签：input, lua

如何在 Lua 中（如`scanf`在 C 中）从用户那里获得输入？
例如，程序询问用户他的名字，然后他写他的名字，然后程序将输出他的名字。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-22T09:40:32.860

使用 io.read() 请注意，该函数可以使用不同的参数进行自定义。这里有些例子。

```
 s = io.read("*n") -- read a number
 s = io.read("*l") -- read a line (default when no parameter is given)
 s = io.read("*a") -- read the complete stdin
 s = io.read(7) -- read 7 characters from stdin
 x,y = io.read(7,12) -- read 7 and 12 characters from stdin and assign them to x and y
 a,b = io.read("*n","*n") -- read two numbers and assign them to a and b 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-22T09:19:50.943

可以使用 检索最简单的输入`io.read()`。这将从标准输入中读取一行（通常是键盘，但可以从文件中重定向）。

你可以像这样使用它：

```
io.write('Hello, what is your name? ')
local name = io.read()
io.write('Nice to meet you, ', name, '!\n') 
```

`io.read()`只是 的捷径`io.input():read()`，同样`io.write()`是 的捷径`io.output():write()`。[请参阅`read()`此处](http://www.lua.org/manual/5.2/manual.html#pdf-file%3aread)的 API 。

请注意，它`io.write()`不会像那样自动终止您的线路`print()`。

# html - 阻止标题添加换行符？

> ID：12069111
> 
> 赞同：0
> 
> 时间：2012-08-22T08:29:04.477
> 
> 标签：html, css, dom

我正在创建一个小型网上商店，产品名称和价格需要在同一行。产品名称和价格显示为`h2`。

`h2`是否可以在同一行上使用两个标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:30:49.933

`h1`等`h2`是块元素，它们可以得到所有宽度。您可以使用（参见演示：http: [//jsfiddle.net/VZc4Q/](http://jsfiddle.net/VZc4Q/)）：

```
h2 {
  display: inline;
} 
```

但这不好，我认为，标题应该是块元素。作为变体，您可以将名称和价格放在跨度中并为其添加样式。或者将名称和价格放在一个标题中。

# javascript - 使用 javascript api 创建 youtube 的屏幕截图？

> ID：12069113
> 
> 赞同：6
> 
> 时间：2012-08-22T08:29:11.310
> 
> 标签：javascript, html, youtube-javascript-api

我正在使用播放器 javascript api v3。 [https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

当我执行 player.pauseVideo() 时，我想在 img 元素中提取当前帧。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:43:38.010

看看这里。我认为您无法使用 API 进行屏幕截图，但这将帮助您
[使用 HTML5/Canvas/JavaScript 进行屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots/6678156#6678156)

# android - 是否可以在 GLES2.0 的 VertexShader 中使用 struct array uniform？

> ID：12069116
> 
> 赞同：1
> 
> 时间：2012-08-22T08:29:18.627
> 
> 标签：android, opengl-es-2.0

是否可以在 GLES2.0 的 VertexShader 中使用 struct array uniform？

```
attribute highp vec4 vPosition;

struct TestStruct{
    highp vec4 v;
};
uniform TestStruct tmp[32];

void main() {
    // test code
    gl_Position = vPosition + tmp[31].v;
} 
```

我收到着色器编译错误。
“顶点着色器中的统一变量不适合 512 个向量”

我的 GPU 是高通 adreno220。

有人知道它的一些信息吗？
我很烦恼。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:19:59.613

有可能的。您的阵列可能太大。尝试一个低于 10 的数字，而不是 32。

# django - 新贵 - Django 和 Celeryd

> ID：12069118
> 
> 赞同：2
> 
> 时间：2012-08-22T08:29:21.547
> 
> 标签：django, celery, django-celery, celeryd, celerybeat

我有我的 Ubuntu 服务器设置，所以我的 Django 项目将由暴发户启动，如下所示：

```
#!/bin/bash
  set -e
  LOGFILE=/var/log/gunicorn/foo.log
  LOGDIR=$(dirname $LOGFILE)
  NUM_WORKERS=3
  # user/group to run as
  USER=django
  GROUP=django
  cd /var/www/webapps/foo
  source ../env/bin/activate
  test -d $LOGDIR || mkdir -p $LOGDIR
  exec ../env/bin/gunicorn_django -w $NUM_WORKERS \
    --user=$USER --group=$GROUP --log-level=debug \
    --log-file=$LOGFILE 2>>$LOGFILE && celeryd -l info -B 
```

如您所见，我还在最后添加了 celeryd。但它没有开始我确定它没有开始，因为我的任务没有完成。当我在服务器上的终端中启动它时：

**manage.py celeryd -l info -B 它确实启动了，我可以看到正在完成的任务。**

我应该如何从 Django 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:31:49.627

您应该创建一个单独的 upstart 脚本来启动 celeryd。[这](https://stackoverflow.com/a/10251072/473232)应该让你开始。

# ruby - 使用 rapns 向多个设备推送通知（在 Rails 上）

> ID：12069124
> 
> 赞同：0
> 
> 时间：2012-08-22T08:29:30.437
> 
> 标签：ruby, ruby-on-rails-3, push-notification, apple-push-notifications

如果我想使用 rapns on Rails 向多个设备（例如 1000 多个设备）推送通知，我可以只创建一个 Rapns::Notification 实例吗？

我尝试将一个包含所有设备令牌的数组分配给变量“device_token”，但它总是只返回 nil。因此，我必须创建与设备数量一样多的 Rapns::Notification 实例。是对的吗？或者有什么更好的推动方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:56:53.623

我在实现 rapns 方面并没有那么远，但我想你必须为每个`device_token`.

# asp.net - C# - 动态按钮的事件处理程序

> ID：12069126
> 
> 赞同：1
> 
> 时间：2012-08-22T08:29:33.387
> 
> 标签：asp.net, button, event-handling, webforms, postback

我有一个使用设计模式创建的文本框和提交按钮。

当按下提交按钮时，它将从文本框中检索用户输入，然后对我的数据库进行查询。然后它将根据从我的数据库中检索到的信息显示动态按钮列表。

但是，按钮的事件处理程序在单击时不会触发。我想我的问题是回发，但**我无法在 page_load 等中创建这些按钮，**因为我需要先获取用户输入（按下提交按钮时从文本框中），然后才能加载按钮。

我怎么解决这个问题？

谢谢你。

**编辑（代码）：**

```
protected void subBtn_Click(object sender, EventArgs e)
{
       //database setup codes
        .......

       while (reader.Read())
       {
            Button detailsBtn = new Button();
            detailsBtn.Text = reader["fName"].ToString();
            //doesn't fire
            detailsBtn.Click += new EventHandler(detailsBtn_Click);
            memPanel.Controls.Add(detailsBtn);
       }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:16:28.120

主要问题是 Postback 如果这些控件不存在，则在每个 postback 上重新生成动态控件。如需快速演示，请参阅此代码

**ASPX 代码**

```
<form id="form1" runat="server">
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
<asp:Panel ID="pnl" runat="server"></asp:Panel>
</form> 
```

**ASPX.CS 代码**

```
protected void Page_Load(object sender, EventArgs e)
        {
            if(IsPostBack)
            {
                generate();                
            }
        }
        public void generate()
        {
            if (!pnl.HasControls())
            {
                for (int i = 0; i < 4; i++)
                {
                    Button detailsBtn = new Button();
                    detailsBtn.Text = "fName" + i.ToString();
                    detailsBtn.ID = i.ToString();
                    detailsBtn.Click += new EventHandler(detailsBtn_Click);
                    pnl.Controls.Add(detailsBtn);
                }
            }
        }
        protected void Button1_Click(object sender, EventArgs e)
        {
            generate();
        }

        protected void detailsBtn_Click(object sender, EventArgs e)
        {
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:57:16.267

在我看来，您可以轻松地重构您的页面以使用简单`<asp:Repeater runat="server" ..></asp:Repeater>`的而不是动态地将控件添加到面板。

这是一个非常简单的完整示例：

**RepeaterTest.aspx**

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <asp:TextBox ID="theTextBox" runat="server"></asp:TextBox>
    <asp:Button ID="theButton" runat="server" OnClick="theButton_Click" Text="Click me" />
    <asp:Repeater ID="test" runat="server">
        <ItemTemplate>
            <asp:Button ID="theRepeaterButton" runat="server" Text='<%# Eval("fName") %>' OnClick="theRepeaterButton_Click" />
        </ItemTemplate>
    </asp:Repeater>
</asp:Content> 
```

**RepeaterTest.aspx.cs**

```
public partial class RepeaterTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }
    protected void theButton_Click(object sender, EventArgs e)
    {
        string filter = theTextBox.Text;
        // below row simulates fetching data using the filter text in the text box
        var data = Enumerable.Range(0, 20).Select(i => new { fName = filter + " " + i });
        test.DataSource = data;
        test.DataBind();
    }
    protected void theRepeaterButton_Click(object sender, EventArgs e)
    {
        var button = (Button)sender;

        // do something here based on text/commandname/commandargument etc of the button

    }
} 
```

# html - 修剪在 Coldfusion 8.0 中不起作用

> ID：12069135
> 
> 赞同：0
> 
> 时间：2012-08-22T08:30:01.543
> 
> 标签：html, coldfusion, coldfusion-8

我正在尝试修剪由我的 Coldfusion 组件之一返回的字符串，但是无论我做什么 Coldfusion 在字符串的开头添加换行符，没有任何原因导致我的 Javascript 出错。你知道这段代码有什么问题吗？

```
function back(){            
        window.location = <cfoutput>"#Trim(Session.history.getBackUrl())#"</cfoutput>;
} 
```

上面的代码产生了下面的 HTML：

```
function back(){
      window.location = "

            http://dummy_server_address/index.cfm?TargetUrl=disp_main";
} 
```

在这里查看 Coldfusion 规范是修剪定义：字符串参数的副本，在删除前导和尾随空格以及控制字符之后。

所以它应该完成工作！因此，我想知道如何正确地做到这一点，我不想使用替换或一些类似的功能。

编辑：非常令人惊讶的是，这是有效的......但我不喜欢这个解决方案，所以如果你有任何其他想法，或者至少解释一下这种行为。

```
 <cfset backUrl = Session.history.getBackUrl()>
    function back(){            
            window.location = <cfoutput>"#backUrl#"</cfoutput>;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T11:50:09.057

确保您的历史组件已禁用输出。IE：

```
 <cfcomponent output=false > 
```

然后确保 CFC 中的 getBackUrl 函数（以及所有其他函数）*也*已`output=false`设置。

另外，**不要忘记在变量上使用[JsStringFormat](http://cfdocs.org/jsstringformat)**，以确保它被适当地转义：

```
<cfoutput>"#JsStringFormat( Session.history.getBackUrl() )#"</cfoutput> 
```

否则，如果 URL 恰好包含`"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:58:17.933

我已经测试了你当前的代码，它对我来说很好，我怀疑你的 CFC 可能会返回比你想象的更多，我显然无法复制。我个人会始终确保组件返回“干净”的结果，而不是事后删除垃圾字符:)

过去我也遇到过类似的问题，但结果总是与 cfoutput 相关，但从未深究。作为一个起点，我会以这种方式重写，看看它是否有所作为......

```
<cfset variables.stWindowLocation = '"' & Trim(Session.history.getBackUrl()) & '"'> 
<cfoutput>    
  function back() {            
    window.location = #variables.stWindowLocation#;}
</cfoutput> 
```

# java - 等到线程执行结束再执行下一个方法

> ID：12069136
> 
> 赞同：0
> 
> 时间：2012-08-22T08:30:03.203
> 
> 标签：java, multithreading

我有一个 JFrame 子类，它管理我的 UI 并调用 Item Object 的方法来在我的数据库中导入项目：

```
public TestGUI() throws IOException
{

    initComponents();

    Item.importItems(progressBar); // static method that execute a new thread to import item witouth freeze my UI (I update a progressBar in it)

    table.refresh(); //Metodh that I need to execute only after "importItems()" methods is completed

} 
```

Item对象实现Runnable在新的Thread中执行导入操作

```
public Item implements Runnable
{

    private JProgressBar progressBar;

    public void importItems (JProgressBar progressBar) throws IOException //Metodo per importare articoli da un file esterno. Usa i Thread.
    {

        this.progressBar = progressBar;

        Thread importThread = new Thread (new RefreshTable(),"Importer Thread");

        importThread.start();

    }

    void run ()
    {

        // I execute here all the DB operation that i need. I also update the progress bar             here

    }

} 
```

如何修改该代码以`table.refresh()`仅在`Item.importImtes(progressBar)`其执行结束后执行？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:31:27.393

use the .join() method on the thread.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:21:49.940

如果您希望一个线程等待另一个线程，您也可以随时使用**CountDownLatch**。使用一个还意味着您不必等到某些线程完全完成。如果您想让*我们*更好地理解您的问题，我们可以提供更多详细信息。

例如，您需要在线程之间共享一个 CountDownLatch：

```
public TestGUI() throws IOException{
      initComponents();
      private final CountDownLatch latch = new CountDownLatch(1);
      Item.importItems(progressBar, latch); // static method that execute a new thread to import item witouth freeze my UI (I update a progressBar in it)
      latch.await();
      table.refresh(); //Metodh that I need to execute only after "importItems()" methods is completed
} 
```

另一方面：

```
public Item implements Runnable {
    private JProgressBar progressBar;
    public void importItems (JProgressBar progressBar, CountDownLatch latch) throws IOException { //Metodo per importare articoli da un file esterno. Usa i Thread.

        this.progressBar = progressBar;

        Thread importThread = new Thread (new RefreshTable(),"Importer Thread");

        importThread.start();

    }

    void run () {

        // I execute here all the DB operation that i need. I also update the progress bar here
        //After everything finishes:
        latch.countDown(); // you want this to be executed in a finally block of the try catch
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T08:38:39.423

如果[您](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)[使用](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html)`Swing`. _ _
它们包含辅助线程 API

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:14:33.493

您可以做的是移动`table.refresh();`子线程代码末尾的代码并用于`SwingUtilities.InvokeLater`将其转发到 GUI 线程事件队列：

```
 public void run() {
      //...
      SwingUtilities.InvokeLater(
            new Runnable() {
                 public void run() {
                     table.refresh();
                 }
            });         
 } 
```

这样，您就在 GUI 线程上执行它，但仅在子线程完成其工作时才执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T08:38:21.117

这是你应该如何使用它：

```
class ProgressBar extends Thread{
    public void run(){
        System.out.println("Progress Bar - start");
        try {
            Thread.currentThread().sleep(2000);
        } catch (InterruptedException e) {}
        System.out.println("Progress Bar - end");
    }
}
public class ThreadDemo {
    public static void main(String[] args) throws InterruptedException {
        System.out.println("Main Thread Start");
        Thread t1 = new Thread(new ProgressBar());
        t1.start();
        t1.join();
        System.out.println("Main Thread End");
    }
} 
```

输出：

```
Main Thread Start
Progress Bar - start
Progress Bar - end
Main Thread End 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T08:31:56.987

<Thread>.join() 方法会阻塞当前线程，直到 <Thread> 完成。

# linux - 用于运行 linux 的小型嵌入式系统的平衡处理器/SOC (?)

> ID：12069139
> 
> 赞同：3
> 
> 时间：2012-08-22T08:30:12.463
> 
> 标签：linux, linux-kernel, embedded, embedded-linux, system-on-chip

所以，我知道 Linux 内核在考虑较小规模的嵌入式系统时相当“重”，但目前我们是一个 2 人团队，试图了解如何创建自己的嵌入式系统。我是所有软件的负责人（另一个人是硬件人），因此我想尽可能地重用现有的库和框架，我想与周围的大师们一起提出一些想法这里。

我在 Linux 中相当自如，但引导和初始化过程对我来说是新的，我需要尽快投入其中。也欢迎任何书籍推荐！我以前没有设计过任何嵌入式系统。只拥有一些 ARM 开发板（beagleboard 和 raspberry pi）。

目前我已经有了在 beagleboard 上运行的软件原型，现在我们正在考虑如何将成本降到最低，并创建我们自己的东西..

这是一个连接到互联网的系统，我需要运行一个带有一些脚本支持的小型 Web 服务器。性能方面，我认为它不需要太强大。

我想尽量减少所有引导加载程序等工作，因为我是一个单人软件团队，只专注于应用程序本身。当然我知道我需要为此配置我们的内核，但这确实是为什么我认为选择一些 SoC 会很好，因为它们通常已经准备好一些 linux 和引导加载程序。

首先我认为 Cirrus EP9301 会是完美的，因为它似乎是一个很好的包装，而且不是很贵.. 但是它似乎已经报废了，而且对此的支持也很糟糕（人们在卷云论坛不断抱怨它）。

这种项目是否有一些好的选择，可以让我们“轻松”启动并运行 linux 内核，同时仍然保持某种体面的 BOM（希望 20 美元左右）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:09:01.117

您的硬件人员应该已经知道这一点，但请使用现有的参考设计。使用 raspberry pi、beagleboard/bone、open-rd 或任何数量的其他现有系统并克隆您需要的部分。因此，Linux 移植将是从参考设计中删除您未使用的内容，而不是添加新内容并希望它有效。如果您使用扁平包装零件，您可以在车库中完成工作，如果您使用 bgas，则需要设备或花钱请人来做。（你能说我讨厌 bgas 吗？）。

是否需要 linux，如果不是，这会为使用 freertos 或 chibios 或许多其他解决方案的更多设备打开大门。例如，stm32f4 发现板是 20 美元，它使用几乎不能称为微控制器的所有功能（cortex-m4）。据说可以在 cortex-m 上运行 uclinux，但绝对可以运行任意数量的 rtose 并拥有一个 ip 堆栈等。 Stellaris (ti.com) 有许多评估板，其中一个/一些已经带有以太网（用作参考设计）。您还可以采用 wiznet 方法（或 spi 以太网）并使用任何微控制器（使您进入 avr/msp430 级别和价格范围）。物有所值，皮质-m 很好，基于手臂，使用起来很舒服，等等。

如果您还没有移植到嵌入式平台的经验，并且不想在此过程中学习，那么使用 linux，我肯定会使用现有设计的克隆，尽可能多地利用与人们合作的项目在将 linux 移植到平台方面经验丰富。如果需要使用现有的板（beagle/raspi/openrd）并通过可以访问现有端口的备忘单完成移植到平台的动作，看看你是否无法移植 uboot 和 linux 引导等。（根本不需要uboot，这可能是一个不必要的复杂性，只需启动并将atags等传递给linux并分支到它，很容易从裸机启动linux）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:39:28.493

您可能会比将在 Raspberry Pi 上使用的 Broadcom BCM2835 作为您的起点做得更糟 - 特别是如果您想避免内核和引导加载程序工作以及参考原理图的来源。如果这被证明太贵，请查看 Broadcom 系列中的其他设备。

几点建议

*   您可能需要一些闪存而不是用于生产的 MMC 卡接口。eMMC 是一种选择。NAND 闪存是一场噩梦，因为组件迅速过时，并且需要自己使用 MTD 驱动程序并弄脏。
*   与悬挂在通用总线上的控制器相比，USB 以太网更容易集成，但性能不佳。SmSC 似乎是两者的流行来源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T17:20:52.907

您还可以查看 Olimex 使用他们的 linux 板所做的工作。甚至可以订购 som，然后将其与其他外部组件结合使用。

# android - android网络共享限制

> ID：12069141
> 
> 赞同：1
> 
> 时间：2012-08-22T08:30:21.127
> 
> 标签：android, tethering

在android中，是否可以限制通过网络共享连接到手机的设备数量？操作系统的限制是 10 ，有没有办法通过应用程序减少这个值？？

或者有没有办法限制系留连接的带宽？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T08:17:13.433

是的，您可以使用第三方应用程序，例如[WiFi Tether for Root 用户](https://play.google.com/store/apps/details?id=com.googlecode.android.wifi.tether&hl=en)。此应用程序将允许您选择哪些设备可以使用您的移动数据连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:42:18.787

不和不，分别。通过修改后的 ROM 安装的操作系统的自定义版本大概可以做到这一点。

# linux - bash 脚本中的 pdsh

> ID：12069142
> 
> 赞同：1
> 
> 时间：2012-08-22T08:30:22.433
> 
> 标签：linux, bash

我有一个bash脚本如下，

```
#!/bin/bash
zone=$1
if  [ "$zone" == "A" ]; then
    pdsh -l abc -w server[01-12] 'sudo abc stop'
elif ["$zone" == "B" ]; then
    pdsh -l abc -w server[1-12].abc.def.com 'sudo abc stop'
fi 
```

服务器字符串`.abc.def.com`引发错误。我该怎么做才能让它接受字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:35:34.023

您的`elif`行中缺少一个空格：

```
elif [ "$zone" == "B" ]; then 
```

# python - python中的多进程同步

> ID：12069148
> 
> 赞同：1
> 
> 时间：2012-08-22T08:30:42.963
> 
> 标签：python, synchronization, multiprocessing

我正在使用 multimechanize (MM) 进行性能测试。MM 创建代表不同“用户”的多个进程。我需要为这些进程中的每一个分配一组唯一的（用户名、密码）对。我应该如何同步这个？我是否应该创建一个单独的进程，在进程要求时配对？这似乎太过分了，有没有更简单的方法来做到这一点？

编辑：我不控制这些进程的创建方式，MM 处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:16:49.857

在`multimechanize/core.py`：

```
# scripts have access to these vars, which can be useful for loading unique data
trans.thread_num = self.thread_num
trans.process_num = self.process_num 
```

所以每个`Transaction()`实例都可以访问它的线程id/进程id。

# c# - 如何触发空白或空白

> ID：12069151
> 
> 赞同：0
> 
> 时间：2012-08-22T08:30:59.670
> 
> 标签：c#, .net, wpf, xaml

我的 WPF 网格中有以下按钮：

```
<Button FontSize="18" Height="32" Content="Add Module" Name="AddModuleButton" Click="AddModuleButton_Click">
    <Button.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=val_Name, Path=Text}" Value="{x:Static sys:String.Empty}">
                    <Setter Property="Button.IsEnabled" Value="false" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

如您所见，如果文本不为空，则启用该按钮。但我真正想要的是在文本框为空或只有空格的情况下启用它。

谁能告诉我如何在 WPF XAML 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:19:40.040

想到了三种方法。

1.  （视图）模型状态：在对象中有一个布尔属性并[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)它。

    ```
     public bool CanAddModule { get { return !String.IsNullOrWhiteSpace(Text); } }
     public string Text
     {
         get { return _text; }
         set
         {
             if (value != _text)
             {
                 _text = value;
                 OnPropertyChanged("Text");
                 OnPropertyChanged("CanAddModule"); // Notify dependent get-only property
             }
         }
     } 
    ```

    ```
    <TextBox Text="{Binding Text}" .../>
    <Button IsEnabled="{Binding CanAddModule}" .../> 
    ```

2.  上面的扩展将绑定[`Button.Command`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommandsource.command.aspx)，该命令内部有一个`CanExecute`用于此功能的命令。如果该功能为假，则被`Button`禁用。您需要`CanExecuteChanged`在函数所依赖的每个更改的属性中引发事件。

3.  [转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)：将转换器添加到绑定。

    ```
     // In converter class
     public object Convert(object value, ...)
     {
          var input = (string)value;
          return String.IsNullOrWhiteSpace(input);
     } 
    ```

    ```
     <!--Resources-->
     <vc:IsNullOrWhiteSpaceConverter x:Key="NWSConv" /> 
    ```

    ```
     <DataTrigger Binding="{Binding Text,
                                    ElementName=val_Name,
                                    Converter={StaticResource NWSConv}}"
                  Value="false"> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:26:10.110

我想出了一个解决方案，它不是这个问题的完整答案，但可以作为我的问题的解决方案。

我在我的 TextBox 上添加了一个 TextChanged 事件：

```
TextBox lTextBox = (TextBox)sender;
string lCurrText = lTextBox.Text;
string lNewText = Regex.Replace(lCurrText, @"\W", "");
lTextBox.Text = lNewText; 
```

它现在不允许空格。

# php - LinkedIn Api 登录按钮未显示

> ID：12069152
> 
> 赞同：0
> 
> 时间：2012-08-22T08:31:02.157
> 
> 标签：php, javascript

我正在尝试将 LinkedIn 的登录功能集成到我的网站上，但该按钮未显示。代码是：

```
 <head><script type="text/javascript" src="http://platform.linkedin.com/in.js">
    <body>

 <script type="IN/Login" data-onAuth="onLinkedInAuth"></script>
</script>
    </body>
</head> 
```

我已经制作了这个[jsfiddle](http://jsfiddle.net/v8X9H/136/)它也有帮助。

我在编程方面相当耳熟能详，所以我确信在理解整个 api 时我缺少一些简单的东西。一点帮助就绰绰有余了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:44:11.067

您提供的 html 都搞砸了 - 正文不应该在头顶！检查[此](http://www.scriptingmaster.com/html/basic-structure-HTML-document.asp)或[此](http://www.basewebmaster.com/html/html5-page-structure.php)以了解基础知识。

![在此处输入图像描述](../Images/cd50c5027516999bef0734996a583b71.png)

要获取登录页面，请按照[链接在开发人员页面](http://developer.linkedin.com/documents/sign-linkedin)中的说明进行操作。

首先，您需要[获取 API 密钥](http://developer.linkedin.com/documents/getting-started-javascript-api)。

然后，像这样构建 HTML：

```
<html>
<head>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: YOUR_API_KEY_GOES_HERE
  authorize: true
</script>

<script type="text/javascript">
function onLinkedInAuth() {
  IN.API.Profile("me")
    .result( function(me) {
      var id = me.values[0].id;
      // AJAX call to pass back id to your server
    });
}
</script>
</head>

<body>
<script type="IN/Login" data-onAuth="onLinkedInAuth"></script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T06:32:18.993

```
<head>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: YOUR_API_KEY

</script>
</head>
<body>
<script type="IN/Login">
  Hello, <?js= firstName ?> <?js= lastName ?>.
</script>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:45:30.867

好吧，您的标签有订单问题。你不能把身体标签放在头上。试试这个：

```
<head>
    <script type="text/javascript" src="http://platform.linkedin.com/in.js"></script>
</head>
<body>
    <script type="IN/Login" data-onAuth="onLinkedInAuth"></script>
</body> 
```

但我不确定您的第二个脚本是否正确完成，因为我不知道 LinkedIn Api 是如何工作的。

# javascript - ExtJS 4、自定义Ext.grid.Panel的布尔列值

> ID：12069153
> 
> 赞同：4
> 
> 时间：2012-08-22T08:31:02.200
> 
> 标签：javascript, extjs, extjs4

美好的一天，我有一个带有布尔列的网格：

```
 var grid = Ext.create('Ext.grid.Panel', {
      ...
      columns: [{
           dataIndex: 'visibleForUser',
           text: 'Visible',
           editor: {
              xtype: 'checkboxfield',
              inputValue: 1 // <-- this option has no effect
           }
      },
      ... 
```

Grid 的存储是通过 JSON 代理远程存储的。当我保存或更新行时，生成的 JSON 如下所示：

```
{... visibleForUser: false, ... } 
```

如您所见，ExtJS 将复选框值序列化为JSON 术语`true`。`false`我需要对此进行自定义并序列化，例如，`1`以及`0`如何完成此操作的任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:47:09.077

我刚刚将系统范围内的复选框更改为始终执行/响应`0`和`1`：

```
Ext.onReady(function(){
    // Set the values of checkboxes to 1 (true) or 0 (false), 
    // so they work with json and SQL's BOOL field type
    Ext.override(Ext.form.field.Checkbox, { 
        inputValue: '1',
        uncheckedValue: '0'
    });
}); 
```

但是您可以为每个复选框添加此配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:05:48.650

Ext JS 4.1.1`serialize`在记录字段上有一个新配置。当 writer 准备记录数据时，调用 serialize 方法来生成输出值，而不是仅仅获取实际的字段值。所以你可以做这样的事情：

```
fields: [{
    name: "visibleForUser",
    type: "boolean",
    serialize: function(v){
        return v ? 1 : 0;
    }
    /* other fields */
}] 
```

我尽量避免覆盖默认组件行为。正如我所提到的，这只适用于 4.1.1（它是在 4.1.0 中引入的，但我相信它已经被破坏了）。因此，如果您使用的是早期版本，那么其他答案之一会更适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:15:07.763

您可以尝试覆盖 getValue

```
Ext.define('Ext.form.field.Checkbox', {
    override : 'Ext.form.field.Checkbox',
    getValue: function () {
        return this.checked ? 1 : 0;
    }
}); 
```

# javascript - Accessing images in javascript in rails 3.2

> ID：12069154
> 
> 赞同：2
> 
> 时间：2012-08-22T08:31:04.973
> 
> 标签：javascript, html, ruby-on-rails, assets

I have view *diplay.html.erb* corresponding to action display in *locations* controller.
I am using application.js in assets/javascript folder.
I am using javascript function of *application.js* in the *display.html.erb* file.
In this function I am loading image but the image is not loaded when used path:
such as `"car.png"` or `"\images\car.png"`
but when used path
`"http://localhost:3000/assets/car.png"` it is displayed properly.

so what path should I give in *application.js* to access image in /assets/images folder?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:03:33.517

There is no confusion,
you need to use `http://localhost:3000/assets/car.png` to see image
if car.png is located at assets/images/car.png -that's rails convention.

I found the answer:

using `<img src="/assets/car.png" />` when car.png in `assets/images/car.png`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T10:59:27.663

您似乎对自己的文件夹结构感到困惑。如果图像位于 /assets/car.png 下，那么您可能应该在路径中使用“assets”而不是“images”。这不行吗？

```
<img src="/assets/car.png" /> 
```

但是如果图像在 /assets/images/car.png 下，那么它宁愿是：

```
<img src="/assets/images/car.png" /> 
```

# url - What protocol is loaded when using protocol-relative URLs?

> ID：12069156
> 
> 赞同：5
> 
> 时间：2012-08-22T08:31:16.787
> 
> 标签：url, protocols

I just started to test the idea behind "protocol less Urls".

The problem I´m looking to solve is: **on a https page I need to load an external css file from http.**

Doing this the "normal" way results in failure... the css file is blocked. (Just testing with chrome for now).

So my question is: **Will "protocol less Urls" load the file from http/https/both?**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T08:43:11.007

如果您指的是类似的 URL `www.example.com/style.css`，那将无法正常工作，因为该协议完全缺失；浏览器会将`www.example.com`其视为某种目录路径名。

如果您指的是类似的 URL `//www.example.com/style.css`，那是一个相对于协议的 URL；它使用与浏览器已用于请求引用页面的协议相同的协议。例如，如果浏览器请求了一个带有 的页面`https://www.example.com`，那么将通过 HTTPS 而不是 HTTP 请求该 URL。

浏览器对这些 URL 的支持通常非常好；请参阅以下问题：

*   [在 <script src="http://..."> 中用 // 替换 http:// 是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)
*   [我可以将所有 http:// 链接更改为 // 吗？](https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just)

# iphone - Stop NSTimer running from application didFinishLaunchingWithOptions

> ID：12069160
> 
> 赞同：0
> 
> 时间：2012-08-22T08:31:24.870
> 
> 标签：iphone, objective-c, xcode

> I have start a timer to call a method after 10 seconds. the timer start from didFinishLaunchingWithOptions. it works fine but I want to stop that timer from another UISubclass at the time of logout. How I can do this my code is

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{  
    [NSThread sleepForTimeInterval:2.0];

    [self.window addSubview:viewController.view];
    [self setupTimer];
    [self.window makeKeyAndVisible];

    return YES;
}
-(void)setupTimer;
{
    timer = [NSTimer timerWithTimeInterval:10 
                                    target:self
                                  selector:@selector(triggerTimer:)
                                  userInfo:nil
                                   repeats:YES];
    [[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];
}

-(void)triggerTimer:(NSTimer*)timer;
{
    NSLog(@"===============this method is call after every 10            second===========================");
    Getlocation *object=[[Getlocation alloc] init];
    [object updatelocation];
}
  -(void)stopTimer:(NSTimer*)timer;
 {
   [timer invalidate];
   timer=nil;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:34:09.580

```
if([timer isValid])
     [timer invalidate];

timer = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:43:57.383

在注销 ButtonAction 方法中编写代码。

> -(IBAction)LogOutButtonPressed:(id)sender {
> 
> [定时器无效]；计时器=无；[定时器释放]；
> 
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:40:07.047

取一个 NSTimer 的对象。
写下这一行你想在哪里调用方法

```
timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(NEWTIMER) userInfo:nil repeats:YES]; 
```

写这段代码你想停止计时器。

```
[timer invalidate];
timer = nil;
[timer release]; 
```

如果您想在您的应用程序进入后台时停止计时器。您应该将此代码写入此方法。

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
   [timer invalidate];
   timer = nil;
   [timer release];
} 
```

# java - How to dynamically generate Validations for the Front end depending upon the Logic

> ID：12069162
> 
> 赞同：1
> 
> 时间：2012-08-22T08:31:25.897
> 
> 标签：java, javascript, jquery, spring, drools

Consider the page below. As in the image I have attached. ![enter image description here](../Images/cee1353efdfce69c471c962965f4dbb5.png)

Now my problem is that I have multiple clients accessing the same page as given below. Now consider that each client has their own requirement such as:-

1.  Name is mandatory for some clients not for others.
2.  Age is mandatory for some clients but not for others along with some specific validations like age<20 or age>30 etc.
3.  Search is also optional depending upon the clients.

Now I am searching for any such tools or technologies or methods that could help me to sort out the issue of dynamically validating the fields as well as hiding and showing the fields depending upon my clients. Please let me know any tools or technologies that can help in order to solve the above problem. I also heard about rule engine and templating .... Is it possible to work together with it to achieve the same. Please suggest.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:38:04.097

我不知道为什么 hibernate-validator 不能在这里工作。您可以根据需要通过实现接口并在需要时创建自己的验证注释来实现验证。这是一个服务器端验证顺便说一句。

在 JSP 的情况下显示或不显示某些内容是通过条件完成的：

```
c:when/c:choose 
```

例如，假设您使用的是 JSP。

# silverlight - 从私有数据中查找 SPS 和 PPS

> ID：12069164
> 
> 赞同：1
> 
> 时间：2012-08-22T08:31:29.360
> 
> 标签：silverlight, windows-phone-7, h.264, codec, mediastreamsource

我有网络服务，它为我提供了包含 H.264 NAL 单元的自定义格式的容器。我想使用自定义 MediaStreamSource 通过 Silverlight 中的 MediaElement 播放它们。

根据[这篇](http://msdn.microsoft.com/en-us/library/hh180779%28v=vs.95%29.aspx?ppud=4)文章，我需要设置私有编解码器数据。Web 服务为我提供了 configCodec，但采用 base64 格式（看起来像“AUIAHv/hABhnQsAe2gMg7+IhAAADAAEAAAAMAMo8WLqABAARozgvI”）

因此，在其他平台（iOS、Android）中，我需要的只是设置为编解码器的额外数据属性。

```
codec->extra-data = info; 
```

但在 Windows Phone 中，我应该提供类似 00000001 [SPS] 00000001 [PPS] 这样的信息。那么，有人可以告诉我如何解析来自 Web 服务的提供的私有数据以从中获取 SPS 和 PPS 值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:27:46.117

您解码为十六进制的数据是：

```
0x01 0x42 0x00 0x1E 0xFF 
0xE1 
0x00 0x18 (SPS length in bytes)
0x67 0x42 0xC0 0x1E 0xDA 0x03 0x20 0xEF (SPS...)
0xE2 0x21 0x00 0x00 0x03 0x00 0x01 0x00 
0x00 0x03 0x00 0x32 0x8F 0x16 0x2E 0xA0 (...SPS)
0x01 
0x00 0x04 (PPS length in bytes)
0x68 0xCE 0x0B 0xC8 (PPS) 
```

我不知道这个结构到底是什么以及它在哪里 rfom，但是 SPS 和 PPS 肯定在它上面。

# extjs - 3个不同的商店提供相同的服务

> ID：12069170
> 
> 赞同：0
> 
> 时间：2012-08-22T08:31:50.903
> 
> 标签：extjs, model, load, store

我为我的网格使用 json 服务。我使用相同的服务有 3 个网格。我现在要做的是每次为网格加载此服务

```
storeGridEvents = new Ext.data.Store({
model: 'intern',
proxy: {
    url: storeUrl,
    reader: {
         type: 'json',
         root: 'data'
            }
        }
});

storeGridEventData = new Ext.data.Store({
model: 'dataEvents',
proxy: {
    url: storeUrl,
    reader: {
         type: 'json',
         root: 'data'
            }
        }
});

storeGridEventLocation = new Ext.data.Store({
model: 'locations',
proxy: {
    url: storeUrl,
    reader: {
         type: 'json',
         root: 'data'
            }
        }
}); 
```

有没有办法我只加载一次服务并将其用于三个模型？这样可以节省一些加载时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:47:12.757

您可以加载一次存储，然后克隆它，这样您将拥有另外两个本地副本。

更新：这是简单克隆存储功能的示例：

```
cloneStore: function(store, storeClass) {
  var new_st = Ext.create(storeClass),
      recs = [];

  store.each(function(r) { recs.push(r.copy)});
  new_st.add(recs);

  return new_st;
} 
```

# asp.net-mvc - 将 JSON 对象作为参数传递给 MVC 控制器

> ID：12069171
> 
> 赞同：5
> 
> 时间：2012-08-22T08:31:55.557
> 
> 标签：asp.net-mvc, json, jsonresult

我有以下任意 JSON 对象（字段名称可能会更改）。

```
 {
    firstname: "Ted",
    lastname: "Smith",
    age: 34,
    married : true
  } 
```

-

```
public JsonResult GetData(??????????){
.
.
.
} 
```

我知道我可以定义一个类，就像 JSON 对象一样，具有与参数相同的字段名称，但我希望我的控制器接受具有不同字段名称的任意 JSON 对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T06:27:28.903

如果你想将自定义 JSON 对象传递给 MVC 操作，那么你可以使用这个解决方案，它就像一个魅力。

```
 public string GetData()
    {
        // InputStream contains the JSON object you've sent
        String jsonString = new StreamReader(this.Request.InputStream).ReadToEnd();

        // Deserialize it to a dictionary
        var dic = 
          Newtonsoft.Json.JsonConvert.DeserializeObject<Dictionary<String, dynamic>>(jsonString);

        string result = "";

        result += dic["firstname"] + dic["lastname"];

        // You can even cast your object to their original type because of 'dynamic' keyword
        result += ", Age: " + (int)dic["age"];

        if ((bool)dic["married"])
            result += ", Married";

        return result;
    } 
```

此解决方案的真正好处是您不需要为每个参数组合定义一个新类，除此之外，您可以轻松地将对象转换为其原始类型。

**更新**

现在，您甚至可以合并您的 GET 和 POST 操作方法，因为您的 post 方法不再有任何参数，就像这样：

```
 public ActionResult GetData()
 {
    // GET method
    if (Request.HttpMethod.ToString().Equals("GET"))
        return View();

    // POST method 
    .
    .
    .

    var dic = GetDic(Request);
    .
    .
    String result = dic["fname"];

    return Content(result);
 } 
```

你可以使用这样的辅助方法来促进你的工作

```
public static Dictionary<string, dynamic> GetDic(HttpRequestBase request)
{
    String jsonString = new StreamReader(request.InputStream).ReadToEnd();
    return Newtonsoft.Json.JsonConvert.DeserializeObject<Dictionary<string, dynamic>>(jsonString);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:50:59.047

拥有一个具有相同签名的 ViewModel 并将其用作参数类型。然后模型绑定将起作用

```
public class Customer
{
  public string firstname { set;get;}
  public string lastname { set;get;}
  public int age{ set;get;} 
  public string location{ set;get;}
   //other relevant proeprties also
} 
```

你的 Action 方法看起来像

```
public JsonResult GetData(Customer customer)
{
  //check customer object properties now.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T08:53:35.113

你也可以在 MVC 4 中使用它

```
public JsonResult GetJson(Dictionary<string,string> param)
{
    //do work
} 
```

# php - 使用 facebook 图表检索 fb 页面信息.. 没有得到图片

> ID：12069174
> 
> 赞同：0
> 
> 时间：2012-08-22T08:31:57.753
> 
> 标签：php, facebook, facebook-graph-api

我可以通过以下方式访问 Facebook 页面信息：[https](https://graph.facebook.com/yorganic) ://graph.facebook.com/yorganic 。但响应不包含个人资料图片。

当我指定要选择的字段时，如下所示.. [https://graph.facebook.com/yorganic?fields=id,name,picture,were_here_count](https://graph.facebook.com/yorganic?fields=id,name,picture,were_here_count)我可以看到图片。

以前使用第一种方法，我得到了图片，但现在没有。谁能告诉我使用第二种方法是否安全？还有其他标准方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:42:36.357

你能做的最好的事情是：

首先获取用户的 Facebook 用户 ID。

然后获取图片：

> [https://graph.facebook.com/FACEBOOK_ID/picture](https://graph.facebook.com/FACEBOOK_ID/picture)

例如：[https ://graph.facebook.com/100001228933230/picture](https://graph.facebook.com/100001228933230/picture)

**编辑** 您甚至不需要用户的 Facebook ID，您也可以使用

> [https://graph.facebook.com/yorganic/picture](https://graph.facebook.com/yorganic)

您还可以使用 Graph API Debugger 工具进行测试：

> [http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)

# xcode - 本地化 - 向 localizable.strings 文件添加其他语言

> ID：12069175
> 
> 赞同：14
> 
> 时间：2012-08-22T08:31:59.860
> 
> 标签：xcode, localization, xcode4.4

我找到 [了这篇](https://stackoverflow.com/questions/5349066/how-to-localize-my-app-with-xcode-4)关于如何向应用程序添加本地化的帖子。答案非常广泛且非常有帮助。

只有一件事：

选择“Localizable.strings”文件时，我打开文件检查器，然后单击“本地化”窗格中的“本地化..”按钮。在弹出窗口中我可以选择一种语言，但实际上只有一种语言可供选择；英语。没有其他选择。但是好的，选择英语选项后，我单击“本地化”按钮。

现在，在文件检查器的本地化窗格中，我看到选择了英语选项。

我的问题：我**没有**“+”按钮来添加其他语言。

有人知道是什么原因造成的吗？如何添加其他语言？我正在使用 Xcode 4.4。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-22T19:00:23.537

您必须首先在项目“信息”选项卡的“本地化”部分添加本地化。添加到项目后，新的本地化可用于字符串文件。

# .net - 使用稍微复杂的方法引用 WCF 服务时获取“递归集合数据契约”

> ID：12069176
> 
> 赞同：6
> 
> 时间：2012-08-22T08:32:01.793
> 
> 标签：.net, wcf, exception-handling, wsdl

如果我在 WCF 服务中只使用简单的方法，一切正常。但是，如果我包含以下方法，则会出现问题：

```
[OperationContract]
public List<KeyValuePair<string, string>> GetAllAccounts()
{
    return AccountBusiness.GetAllAccounts();
} 
```

从另一个项目引用服务时出现此错误：

> 警告 5 自定义工具警告：无法导入 wsdl:portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：**类型“Newtonsoft.Json.Linq.JToken”是递归收集数据合同，它不支持**。考虑修改集合“Newtonsoft.Json.Linq.JToken”的定义以删除对自身的引用。错误源的 XPath：//wsdl:definitions[@targetNamespace=' [http](http://tempuri.org) ://tempuri.org']/wsdl:portType[@name='NodeService'] C:\inetpub\wwwroot\MyclientProject\Service References\NodeService\ Reference.svcmap 1 1 MyClientNode

如果我删除上面的方法，重新编译并更新引用，那么它工作正常。但是当我添加上述方法时，我一直收到这个警告。

我发现的一个建议是卸载 Visual Studio 2012 并修复 Visual Studio 2010。我不想这样做。

另一个[建议](https://stackoverflow.com/a/11128845/392362)取消选中“在所有引用的程序集中重用类型”，但这会弄乱方法签名并且不可用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T08:52:21.143

事实证明，这个错误是由于我从 NuGet 安装了一个 Microsoft Web API 包，其中包括 Json.NET。卸载后，它工作正常。

这可能是您的答案 - 如果没有，请查看您安装了哪些其他软件包（您不需要）并删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T21:28:08.737

安装在服务器上的 NewtonSoft.Json 库与从 NuGet 安装在客户端上的库不同。这就是服务引用无法重用它的原因。

在这种情况下，只需单击“在指定引用的程序集中重用类型”，检查除 Newtonsoft.Json 程序集之外的所有内容并重新生成。

服务参考现在将毫无错误地生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-25T16:44:36.667

您不能直接在 WCF REST 服务中返回类型 JObject 或 JToken，因为您会收到可怕的错误“Type 'Newtonsoft.Json.Linq.JToken' is a recursive collection data contract”。

我通过在返回 JSON 对象之前将它们序列化为 Stream 类型来解决这个问题......

```
[WebInvoke(Method = "GET",
RequestFormat = WebMessageFormat.Json,
ResponseFormat = WebMessageFormat.Json,
BodyStyle = WebMessageBodyStyle.WrappedResponse,
UriTemplate = "/api/myGetRequest")]
public Stream myFunction(string x, string y)
{ 
  WebOperationContext webcontext = WebOperationContext.Current;
  webcontext.OutgoingResponse.Headers[HttpResponseHeader.ContentType] = "application/json";

  string json = JsonConvert.SerializeObject(myJsonObject, Newtonsoft.Json.Formatting.Indented);`

  return new MemoryStream(Encoding.UTF8.GetBytes(json ?? ""));
} 
```

# html - 不透明元素可以隐藏其他元素吗？

> ID：12069177
> 
> 赞同：0
> 
> 时间：2012-08-22T08:32:03.857
> 
> 标签：html, css, background, opacity

我在这里使用了 jQuery、HTML 等技术。如果我选择一个元素，它的背景将是一个滑动线动画 gif，所以如果我将另一个 div 放在它前面，并且我使后面的 div 比前面宽 1 个像素，那么它看起来就像 Photoshop 上的选择效果。问题是有时我希望元素不透明（例如文本元素不应该有背景颜色，我希望其他元素具有该功能）。因此，如果我将前面的 div 设置为具有文本的不透明，我将看到滑动线 gif 本身。有没有办法在前面 div 可见的那个区域越过背景 div 的背景图像，我可以看到后面 div 后面的所有内容？

# jquery - jquery附加大量html

> ID：12069182
> 
> 赞同：0
> 
> 时间：2012-08-22T08:32:22.743
> 
> 标签：jquery, append

我一直在使用 $.get 来获取我的灯箱的内容

```
$.get('sidebar-lightbox.html', function(data, elem) {

//DO STUFF HERE
 }); 
```

我正在寻找一种巧妙的方法来将大（ish）（可能是 20 行）的 HTML 添加到追加中。目前正在做

```
 $('.selector').append('<div id="wrapper"><div id="inner"><div id="content"></div></div></div>') 
```

随着 html 变大，这有点混乱且难以阅读，正在寻找一种好方法:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:35:57.217

```
$('<div/>', { id: 'wrapper' }).appendTo('.selector');
$('<div/>', { id: 'inner' }).appendTo('#wrapper');
$('<div/>', { id: 'content' }).appendTo('#inner'); 
```

如果您愿意，您还可以执行以下操作：

```
$('<div/>', { id: 'wrapper' }).append(
    $('<div/>', { id: 'inner' }).append(
        $('<div/>', { id: 'content' })
     )
).appendTo('.selector')​; 
```

您当然可以在此处设置任意数量的属性，记住将作为 JavaScript 关键字的属性放在字符串中，即`$('<div/>', { id: 'id', 'class': 'x' })`. 您还可以链接多个`.attr`和`.html`调用以获取所需的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:35:18.967

首先创建一个 var，然后附加它。它会更具可读性

```
var stuff = '<div id="wrapper">';
    stuff += '<div id="inner">';

// etc. then you append it
$('.selector').append(stuff); 
```

# java - 在 GXT 2.2.5 中单击网格标题列时如何设置默认排序方向

> ID：12069183
> 
> 赞同：4
> 
> 时间：2012-08-22T08:32:33.590
> 
> 标签：java, gwt, grid, gxt

有没有办法控制第一次单击网格标题时使用的默认排序顺序？假设，我有两列，一列是名称，另一列是下载。我想将名称设置为`ASC`订单，并将下载设置为`DESC`第一次单击网格标题时。这意味着当我第一次单击下载列标题时，它应该首先显示下载次数最多。

是否可以设置列的初始排序顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:00:01.267

**我有一个不同的解决方案**

我遇到了类似的情况，我希望在第一次单击时对日期列进行 DESC 排序，而在第一次单击时对其他列进行 ASC 排序。我编写了自己的 GridView，并在其中重写了 onHeaderClick 函数，如下所示：

```
 /**
     * Make sure that Date columns are sorted in a DESCENDING order by default
     */
    @Override
    protected void onHeaderClick(Grid<ModelData> grid, int column)
    {
        if (cm.getColumn(column).getDateTimeFormat() != null)
        {
            SortInfo state = getSortState();

            if (state.getSortField() != null && state.getSortField().equals(cm.getColumn(column).getId()))
            {
                super.onHeaderClick(grid, column);
                return;
            }
            else
            {
                this.headerColumnIndex = column;
                if (!headerDisabled && cm.isSortable(column))
                {
                    doSort(column, SortDir.DESC);
                }
            }
        }
        else
        {
            super.onHeaderClick(grid, column);
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T09:22:49.860

**我得到了解决方案。**

您可以使用 Store Sorter 设置初始排序方向。

```
store.setStoreSorter(new StoreSorter<TemplateContentItem>(){
        @Override
        public int compare(Store<TemplateContentItem> store,
                TemplateContentItem m1, TemplateContentItem m2,
                String property) {
            if(property.equals("downloads")){
                return (super.compare(store, m1, m2, property) * -1);
            }
            return super.compare(store, m1, m2, property);
        }
    }); 
```

在上面的代码中，它将检查列是否被下载，而不是反向排序结果。

# jquery - 使用 Ajax 和 beforeSend 显示图像

> ID：12069184
> 
> 赞同：1
> 
> 时间：2012-08-22T08:32:51.593
> 
> 标签：jquery

我对 jquery 和 ajax 比较陌生，我对这些可能性感到惊讶！

我正在开发我的第一个 ajax，jquery（带有验证插件）网络表单。它几乎完成了，但有一点我不明白。我想显示一个加载图标并使用 beforeSend 方法禁用发送按钮。但它不起作用，chrome 不显示任何错误消息。

这是代码

```
$(document).ready(function(){
$("#Formular").validate({
    rules: {
        name: "required",
        email: {
            required: true,
            email: true
        },
        yname: "required",
        yemail: {
            required: true,
            email: true
        }  
    },
    submitHandler: function(form) {
        theUrl = 'send.php';
        var params = $(form).serialize();
        $.ajax ({
            type: "POST",
            url: theUrl,
            data: params,
            beforeSend : function(){
                $('.loading_icon').show();
            },              
            processData: false,
            async: false,
            success: function(response) {
                $('#response').hide();
                $('#response').html(response);
                $('#response').fadeIn('slow');
                $('.loading_icon').hide();  
            }
        });
    }
}); 
```

});

加载图标不显示。它在 submitHandler 之前工作，所以 css 是正确的，图像也是。

这里没有任何作用的部分：

```
 beforeSend : function(){
                $('.loading_icon').show();
            }, 
```

我在此处和文档中也进行了搜索，但没有找到任何解决方案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:49:27.763

JQuery 文档说：

> 一个预请求回调函数，可用于在发送之前修改 jqXHR（在 jQuery 1.4.x 中为 XMLHTTPRequest）对象。使用它来设置自定义标题等。jqXHR 和设置映射作为参数传递。这是一个 Ajax 事件。在 beforeSend 函数中返回 false 将取消请求。从 jQuery 1.5 开始，无论请求的类型如何，都将调用 beforeSend 选项

这让我认为它不应该用于加载图标之类的东西。你为什么不只是：

```
var params = $(form).serialize();
$('.loading_icon').show();       
 $.ajax ({
            type: "POST",
            url: theUrl,
            data: params,             
            processData: false  
        }).done(function(response) {
            $('#response').hide();
            $('#response').html(response);
            $('#response').fadeIn('slow');
        }).always(function() {
          $('.loading_icon').hide();
        }); 
```

**编辑**

我已经使用 Firebug 调试了代码，工作正常。只是你的帖子太快了，你永远看不到它。

**编辑** 更新以使用 jqXHR 对象取得成功等。删除`async:false`，因为这永远不应该使用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T12:01:55.860

它加载得如此之快以至于您看不到轮子是不正确的。实际上，当您连续添加 css 更改和同步 ajax 请求时，更改会延迟，直到请求在某些浏览器（如 Chrome）中完成。查看您的 ajax 调用：

```
async: false, 
```

调试时同步 ajax 调用期间的问题是调试器本身允许在停止之前完全执行每个方法，从而改变您最终看到的内容。因此，在任何代码行中设置断点，如下所示：

```
$('.loading_icon').show();       
$.ajax ({something}); 
```

它将显示加载图标。对此要非常小心！因为当您不设置任何断点时，加载图标将不会显示，直到结果发生（成功，错误）。

我发现在这种情况下正常工作的唯一方法是将 ajax 中的同步调用转换为异步调用。如果您担心您会允许用户在此过程中触摸不适当的内容，只需在整个页面上添加一个 div 并禁用任何通过它的点击事件。这样做，你会发现加载图标出现在整个ajax请求的过程中，而不仅仅是在它的末尾。

# spring - 一段时间后activemq队列上没有新的消费者

> ID：12069188
> 
> 赞同：3
> 
> 时间：2012-08-22T08:33:01.827
> 
> 标签：spring, jms, activemq, spring-jms

一个月以来，我们在 activemq 和 spring 中反复出现问题。一段时间后（一天到一周之间），我们没有更多的消费者，也没有新的消费者开始，队列开始填满。

这个设置运行了一年多，没有任何问题，据我们所见，没有任何相关的改变。

我们使用的另一个队列也开始显示相同的行为，但频率较低。

来自activemq webconsole（你可以看到很多待处理的消息并且没有消费者）

```
Name ↑ Number Of Pending Messages Number Of Consumers Messages Enqueued Messages Dequeued Views Operations
queue.readresult 19595 0 40747 76651 Browse Active Consumers 
```

我们的 bundle-context.xml 的内容

```
<!-- JMS -->
<bean id="jmsConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">
    <property name="maxConnections" value="5" />
    <property name="maximumActive" value="5" />

    <property name="connectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL">
                <value>tcp://localhost:61616</value>
            </property>
        </bean>
    </property>
</bean>

<bean id="ResultMessageConverter" class="com.bla.ResultMessageConverter" />

<jms:listener-container connection-factory="jmsConnectionFactory" destination-resolver="jmsDestinationResolver"
    concurrency="2" prefetch="10" acknowledge="auto" cache="none" message-converter="ResultMessageConverter">
    <jms:listener destination="queue.readresult" ref="ReaderRequestManager" method="handleReaderResult" />
</jms:listener-container> 
```

任何日志中都没有例外。有谁知道为什么一段时间后无法启动新消费者的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T23:25:37.410

我之前遇到过“消费者停止消费”的问题，但还没有看到消费者停止存在。您可能正在用完池中的内存和/或连接。您是否必须重新启动 ActiveMQ 才能解决问题或只是您的应用程序？

这里有几个建议：

1.  将队列预取设置为 0
2.  在连接字符串上添加“useKeepAlive=false”
3.  增加队列的内存限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:44:17.050

我在配置中看不到任何明显的原因，提供了它应该失败的原因。所以你需要求助于经典的故障排除。

尝试将日志记录设置为调试并重新创建问题。然后您应该能够看到更多，并且您可能能够检测到它的根本原因。

此外，检查 JMS 异常侦听器并尝试将其附加到您的实现中以掌握真正的问题。

[http://docs.oracle.com/javaee/6/api/javax/jms/ExceptionListener.html](http://docs.oracle.com/javaee/6/api/javax/jms/ExceptionListener.html)

# python - python下的SNMP OID，试图让MAC连接到交换机

> ID：12069189
> 
> 赞同：0
> 
> 时间：2012-08-22T08:33:03.837
> 
> 标签：python, snmp, oid

我正在尝试使用 snmpwalk 在 python 中创建一个脚本，以获取连接到我的交换机的当前设备以及它们使用的端口（我获取 MAC 地址，然后，使用我拥有的数据库，我将转换为 IP 或主机名）。

好吧，一切都很好，但我意识到此信息的 OID 编号在某些交换机之间会发生变化。

我正在尝试获取此 OID：1.3.6.1.2.1.17.4.3.1.2

这工作正常，我得到了 MAC 和端口号。

但在我的一些开关中是这个：1.3.6.1.2.1.17.7.1.2.2 而在其他开关中是：1.3.6.1.2.1.17.4.3.1.2

我对此感到很困惑，我想知道我是否在寻找 OID 号码而不是名称方面做得很好。无论如何，我尝试使用某些名称（sysUpTime 等）查找信息，但 snmpwalk 不适用于名称（至少，它对我不起作用，我不确定我必须使用哪个名称来获取此信息）。例如，我试过：

```
$ snmpwalk -v 1 -c public sea-kmSwitch dot1dTpFdbPort
dot1dTpFdbPort: Unknown Object Identifier (Sub-id not found: (top) -> dot1dTpFdbPort) 
```

我知道 python 中有 snmp 模块，但我没有找到好的文档和示例（pysnmp、pynetsnmp），所以我尝试使用 linux 命令来编写脚本。

所以，问题是：我怎么知道我必须得到哪个 OID 号码？我可以使用任何 OID 名称吗？如何？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:20:30.087

您的程序不适用于 SNMP 名称，因为您没有导出放置 MIB 文件的路径和要使用的 MIB 文件列表。

如果你想使用带有 NET-SNMP 框架的 Linux（即 snmpwalk 命令），那么请在执行脚本之前设置以下环境变量：MIBDIR 和 MIBS。

```
export MIBDIR=<path_to_mib_files>
export MIBS=ENTITY-MIB:SNMPv2-TC:<any_other_mibs_you_need> 
```

您可以在运行时直接在脚本中导出这些变量，就在调用任何使用 OID 以 SNMP 名称形式的命令之前（即 sysLocation.0 而不是 1.3.6.1.2.1.1.6.0）。

请注意，您必须为 MIB 变量定义比要求更广泛的 MIB 文件集 - 这是因为您的特定 MIB 文件很可能使用一些基于 RFC 的 MIB 文件。要确定您需要导出哪些 MIB 文件，请查看您感兴趣的 MIB 中的 IMPORTS 部分。

希望有帮助。

# android - 使用 Robolectric 的 Android 库 JUnit 测试：java.lang.InstantiationException

> ID：12069191
> 
> 赞同：5
> 
> 时间：2012-08-22T08:33:07.517
> 
> 标签：android, unit-testing, junit, junit4, robolectric

尝试使用 Robolectric 在 Android 库项目上运行 JUnit 测试时，出现以下错误：

```
java.lang.RuntimeException: java.lang.InstantiationException
    at com.xtremelabs.robolectric.ApplicationResolver.newApplicationInstance(ApplicationResolver.java:56)
    at com.xtremelabs.robolectric.ApplicationResolver.resolveApplication(ApplicationResolver.java:36)
    at com.xtremelabs.robolectric.RobolectricTestRunner.createApplication(RobolectricTestRunner.java:246)
    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:233)
    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:177)
    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:157)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.InstantiationException
    at sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at com.xtremelabs.robolectric.ApplicationResolver.newApplicationInstance(ApplicationResolver.java:54)
    ... 20 more 
```

我的第一个想法是我在测试中犯了一个错误，所以我尽可能简化了测试运行：

```
import static org.junit.Assert.*;

import org.junit.Test;
import org.junit.runner.RunWith;

import com.xtremelabs.robolectric.RobolectricTestRunner;

@RunWith(RobolectricTestRunner.class)
public class CommonDataTest {

    @Test
    public void test(){
        assertTrue(true);
    }

} 
```

但我仍然得到同样的错误。我按照此处所述设置项目：[http](http://robolectric.org/eclipse-quick-start/) ://robolectric.org/eclipse-quick-start/ 奇怪的是它可以与其他 Android 库项目一起使用而没有任何问题。

任何帮助，将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T05:17:27.977

似乎 Robolectric 无法从我的库中创建应用程序，所以我更换了 TestRunner：

```
import org.junit.runners.model.InitializationError;

import android.app.Application;

import com.xtremelabs.robolectric.RobolectricTestRunner;

public class MyTestRunner extends RobolectricTestRunner {

    public MyTestRunner(Class<?> testClass)
            throws InitializationError {
        super(testClass);
    }

    @Override protected Application createApplication() {
        return new Application() {
        };
    }

} 
```

并使用它代替 RobolectricTestRunner：

```
@RunWith(MyTestRunner.class) 
```

现在测试运行正常。

# android - 弹出安卓应用

> ID：12069195
> 
> 赞同：0
> 
> 时间：2012-08-22T08:33:37.990
> 
> 标签：android, image, popup

我有一个弹出窗口，在单击按钮时显示图像。我必须显示弹出窗口，但图像太小，我希望它占据屏幕的 90%，并为其添加一个关闭按钮。

这是我的代码：

```
PopupWindow popUp;
LinearLayout layout;
TextView tv;
LayoutParams params;
ImageView imageView;
boolean click = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_bmi);

    popUp = new PopupWindow(this);
    layout = new LinearLayout(this);
    tv = new TextView(this);

    imageView = new ImageView(this);

    imageView.setImageResource(R.drawable.animalbite);

    WindowManager wm = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    int fullScreenWidth = display.getWidth();

    int dialogWidth = (int) (fullScreenWidth * 0.9);
    WindowManager.LayoutParams params = getWindow().getAttributes();
    params.height = LayoutParams.WRAP_CONTENT;
    params.width = dialogWidth;
    getWindow().setAttributes(params);

    imageView.setLayoutParams(params);
    //tv.setText("Hi this is a sample text for popup window");
    layout.addView(imageView, params);
    popUp.setContentView(layout);

      Button ViewBmi = (Button) findViewById(R.id.ViewBmi);

      ViewBmi.setOnClickListener(new View.OnClickListener() {

             public void onClick(View v) {

                  if (click) {
                        popUp.showAtLocation(layout, Gravity.CENTER, 10 ,10);
                        click = false;
                    } else {
                        popUp.dismiss();
                        click = true;
                    }

             }
             });

} 
```

这是显示：

![在此处输入图像描述](../Images/b63b60dd0da488cac8f5c04e609fb45d.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:25:27.177

试试这个...

```
PopupWindow popUp;
    LinearLayout layout;
    TextView tv;
    LayoutParams params,params2;
    ImageView imageView;
    boolean click = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Display display = getWindowManager().getDefaultDisplay();
        final int height = (display.getHeight()*90)/100;
        final int width = (display.getWidth()*90)/100;

        popUp = new PopupWindow(this);
        layout = new LinearLayout(this);
        tv = new TextView(this);

        imageView = new ImageView(this);
        imageView.setImageResource(R.drawable.ic_launcher);
        params = new LayoutParams(width,height-50);
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.addView(imageView, params);

        Button button = new Button(this);
        button.setText("Close");
        params2 = new LayoutParams(100,50);
        layout.addView(button,params2);   

        popUp.setContentView(layout);

        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                 popUp.dismiss();
                 click = true;
            }
        });

          Button ViewBmi = (Button) findViewById(R.id.button1);

          ViewBmi.setOnClickListener(new View.OnClickListener() {

                 public void onClick(View v) {

                      if (click) {
                            popUp.showAtLocation(layout, Gravity.CENTER, 10, 10);
                            popUp.update(10, 20, width,height);
                            click = false;
                        } else {
                            popUp.dismiss();
                            click = true;
                        }

                 }
                 });

    } 
```

试试这个....

```
Button button = new Button(this);
        button.setText("Close");
        params2 = new LayoutParams(100,50);
    --->params2.setMargins(100, 0, 0, 0);
        layout.addView(button,params2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:37:39.987

尝试：

```
params = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);
...
layout.addView(imageView, params); 
```

这样 ImageView 将尽可能宽。

如果底层对话框不够宽，那么你可以设置它的宽度也全屏：

```
WindowManager.LayoutParams params = getWindow().getAttributes();
params.height = LayoutParams.WRAP_CONTENT;
params.width = LayoutParams.MATCH_PARENT;
getWindow().setAttributes(params); 
```

或者，如果您希望它占据屏幕的 90%，那么：

```
// get the width of the whole screen
Display display = getWindow().getDefaultDisplay();
int fullScreenWidth = display.getWidth();

//then set 90% of it to the width of the Dialog:
int dialogWidth = (int) fullScreenWidth * 0.9);
WindowManager.LayoutParams params = getWindow().getAttributes();
params.height = LayoutParams.WRAP_CONTENT;
params.width = dialogWidth;
getWindow().setAttributes(params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:15:20.287

我会这样做：

```
height = (int)(0.9*getWindow().getWindowManager().getDefaultDisplay().getHeight());
params.height = height; 
```

# java - 在 Java 中侦听连接时防止崩溃

> ID：12069198
> 
> 赞同：0
> 
> 时间：2012-08-22T08:33:48.970
> 
> 标签：java, sockets

有什么方法可以防止我的应用程序在创建套接字后立即崩溃？该程序在收到连接后会立即解冻，但它可能会误导用户。

我曾尝试将套接字创建方法等放在一个线程中并从那里运行它，但这不起作用。

编辑：除非给套接字一定的时间然后在过期后断开连接是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:37:52.117

在单独的线程中运行它是正确的方法，因为 Socket.accept() 调用是阻塞的（即它会阻塞您调用它的线程，直到它获得连接）。

你的线程架构一定有问题。发布一些代码，也许我可以告诉你到底是什么。

编辑：给套接字一个短暂的超时不会避免阻塞，或者在有人连接之前超时，而在超时之前获得连接与当前设置没有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:36:37.610

您的程序不会崩溃，它只是在等待连接，因为`java.io`库正在阻塞。

为了防止等待连接，您可以使用非阻塞`java.nio`类*或*启动一个`Thread`新线程并让这个新线程成为等待连接的线程。

# c# - 实现 C# IEnumerable 对于 LinkedList 类

> ID：12069205
> 
> 赞同：3
> 
> 时间：2012-08-22T08:34:02.417
> 
> 标签：c#, mono, monodevelop

我正在尝试在 Linux 上使用 monoDevelop 在 C# 中编写一个自定义 LinkedList 类，只是为了测试和学习。以下代码永远不会编译，我不知道为什么！它甚至没有告诉我出了什么问题。它所说的只是：错误：编译器似乎已经崩溃。检查构建输出板以获取详细信息。当我去检查输出垫时，它也没有帮助：未处理的异常：System.ArgumentException：必须在泛型类型定义上声明指定的字段。参数名称：字段

我能做些什么？

```
using System;
using System.Text;
using System.Collections.Generic;

namespace LinkedList
{
    public class myLinkedList<T> : IEnumerable<T>
    {
        //List Node class
        //===============
        private class ListNode<T>
        {
            public T data;
            public ListNode<T> next;

            public ListNode(T d)
            {
                this.data = d;
                this.next = null;
            }

            public ListNode(T d, ListNode<T> n)
            {
                this.data = d;
                this.next = n;
            }
        }

        //priavte fields
        //===============
        private ListNode<T> front;
        private int size;

        //Constructor
        //===========
        public myLinkedList ()
        {
            front = null;
            size = 0;
        }

        //public methods
        //===============
        public bool isEmpty()
        {
            return (size == 0);
        }

        public bool addFront(T element)
        {
            front = new ListNode<T>(element, front);
            size++;
            return true;
        }

        public bool addBack(T element)
        {
            ListNode<T> current = front;
            while (current.next != null)
            {
                current = current.next;
            }

            current.next = new ListNode<T>(element);
            size++;
            return true;
        }

        public override string ToString()
        {
            ListNode<T> current = front;
            if(current == null)
            {
                return "**** Empty ****";
            }
            else
            {
                StringBuilder sb = new StringBuilder();
                while (current.next != null)
                {
                    sb.Append(current.data + ", ");
                    current = current.next;
                }
                sb.Append(current.data);

                return sb.ToString();
            }
        }

        // These make myLinkedList<T> implement IEnumerable<T> allowing
        // a LinkedList to be used in a foreach statement.
        public IEnumerator<T> GetEnumerator()
        {
            return new myLinkedListIterator<T>(front);
        }

        private class myLinkedListIterator<T> : IEnumerator<T>
        {
            private ListNode<T> current;
            public virtual T Current
            {
                get
                {
                    return current.data;
                }
            }
            private ListNode<T> front;

            public myLinkedListIterator(ListNode<T> f)
            {
                front = f;
                current = front;
            }

            public bool MoveNext()
            {
                if(current.next != null)
                {
                    current = current.next;
                    return true;
                }
                else
                {
                    return false;
                }
            }

            public void Reset()
            {
                current = front;
            }

            public void Dispose()
            {
                throw new Exception("Unsupported Operation");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T08:40:44.843

您需要添加非通用 API；所以添加到迭代器：

```
object System.Collections.IEnumerator.Current { get { return Current;  } } 
```

和可枚举的：

```
System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
{
    return GetEnumerator();
} 
```

然而！如果你手动实现这个，你就错过了一个技巧。“迭代器块”会容易得多。

下面是一个**完整**的实现；***您根本***不需要编写枚举器类（您可以完全删除`myLinkedListIterator<T>`）：

```
public IEnumerator<T> GetEnumerator()
{
    var node = front;
    while(node != null)
    {
        yield return node.data;
        node = node.next;
    }
}
System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
{
    return GetEnumerator();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T08:41:25.003

当我尝试您粘贴的代码时，我在尝试构建时遇到 2 个错误。

> myLinkedList' 没有实现接口成员'System.Collections.IEnumerable.GetEnumerator()'。“.myLinkedList.GetEnumerator()”无法实现“System.Collections.IEnumerable.GetEnumerator()”，因为它没有匹配的返回类型“System.Collections.IEnumerator”。

解决方案是在第一堂课中实现以下内容。

```
IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        } 
```

第二个错误是：

> myLinkedList.myLinkedListIterator' 没有实现接口成员'System.Collections.IEnumerator.Current'。“JonasApplication.myLinkedList.myLinkedListIterator.Current”无法实现“System.Collections.IEnumerator.Current”，因为它没有匹配的“object”返回类型。

第二类的解决方案可能如下在第二类中实现。

> 对象 IEnumerator.Current { 获取 { 返回当前；} }

# ruby-on-rails - 如何在开发中使回形针只读？（防止上传/删除/覆盖）

> ID：12069206
> 
> 赞同：1
> 
> 时间：2012-08-22T08:34:08.047
> 
> 标签：ruby-on-rails, paperclip

我的生产和开发数据库有些同步，因此开发可以从生产路径（S3）读取图像。

问题是当我删除、更新或创建开发记录时，它会影响 S3 映像。

我不希望这种行为发生在开发中，但它应该发生在生产中。

有没有将回形针变成只读模式的选项？我仍然想看到来自 S3 的图像（而不是 404 图像）。

我看到了`:preserve_files`可以很好地保护删除的选项。是否有保护覆盖/禁用上传的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:59:51.217

好吧，对于未来的版本来说，不完整、丑陋和不安全，但同时也能完成这项工作。

`config/initializers/paperclip.rb`

```
if Rails.env.development?
  module Paperclip
    class Attachment
      def assign uploaded_file
      end

      def save
      end

      def clear(*)
      end

      def destroy
      end

      private
      def post_process(*)
      end

      def post_process_styles(*)
      end

      def post_process_style(*)
      end

      def queue_some_for_delete(*)
      end

      def queue_all_for_delete
      end

      def after_flush_writes
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T16:22:36.990

假设您需要在开发中使用生产数据，我认为创建一个用户只能读取某些 S3 资源的“用户策略”会更有意义。然后相应地更改您的环境变量 [https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-policies-s3.html](https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-policies-s3.html)

然后，您可以处理开发中的错误（如果您尝试使用只读权限进行更新，S3 客户端应该会失败）。这可确保您在生产中无法触及任何东西

例如（伪代码），

```
if Rails.env.development?
  // do not update
else
  Model.attachment.assign()
end 
```

# asp.net - ASP.NET Gridview：如何停止回发时在 Gridview 中重置？

> ID：12069216
> 
> 赞同：0
> 
> 时间：2012-08-22T08:34:42.293
> 
> 标签：asp.net, gridview, postback

我有一个 Gridview，其中包含一些控件，当用户从 gridview 中进行选择时，这些控件会从服务器更新。

从下拉列表中进行选择后，用户可以在一行的文本框中输入一个百分比，我有一些 javascript，然后执行一些计算并输出到 Gridview 中的项目模板内的跨度。

这一切都有效，但如果用户随后在任何行上进行另一个下拉列表选择，gridview 中的所有跨度都将重置为空白（我尝试过使用各种控件，包括 asp.net 和 html）。

这都在更新面板中。

代码：

```
 <asp:GridView runat="server" ID="gdvIngredients" AutoGenerateColumns="false" CssClass="table table-stripped"
                        GridLines="None" Visible="false" ShowFooter="true" EnableViewState="true">
                        <Columns>
                            <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label runat="server" ID="lblId" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Ingredient" ItemStyle-Width="12%">
                                <ItemTemplate>
                                    <asp:DropDownList runat="server" ID="ddlName" AutoPostBack="true" OnSelectedIndexChanged="ddlName_SelectedIndexChanged"
                                        ForeColor="Black" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="%" ItemStyle-Width="6%">
                                <ItemTemplate>
                                    <asp:TextBox runat="server" Text="0" Width="50px" ID="txtPercentage" onkeyup="calculate(this);"
                                        ForeColor="Black" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="kj" ItemStyle-Width="6%">
                                <ItemTemplate>
                                    <asp:Label runat="server" ID="lblKj" CssClass="Kj" Style="display: none;" />
                                    <span runat="server" id="spnKj" class="NewKj">0</span>
                                </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:27:14.383

您可以使用“AutoPostBack”属性来控制某些控件的 Postback 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:43:07.697

看看您的下拉列表选择是否执行任何 PostBack。

如果是，则 span 值消失，因为 Span 不是 ASP.NET webcontrol。页面回发后，从 ViewState 恢复 asp.net webcontrol 值。因此，spans 没有 ViewState 并且没有值被恢复。您可以尝试将标签更改为

```
 <span runat="server" id="spanIDHere">SomeValue here</span> 
```

***runat="server"***使 span 为 HtmlGenericControl 并维护其 ViewState。

如果您使用 Javascript 更新跨度值，则回发后将不会保存它们。您应该调用服务器端函数来更新跨度值或尝试使用隐藏字段来存储您的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:43:13.897

根据您的问题，我了解到您正在使用 javascript 进行计算并将其分配给 span，但是当下次回发发生时，该值不会保留...如果我是对的，我建议您尝试以下步骤。使用 HiddenFields还可以将值分配为 HiddenFields 在回发期间保留值。

1.  在项目模板中添加隐藏字段

2.  从 Codebehind（来自 rowdatabound 事件）将“计算”函数设置为文本框，并将当前的 HiddenField 值作为计算（this，'HiddenFieldId'）传递给它；

    ```
    protected void grd_RowDataBound(object sender,GridViewRowEventArgs e)                   
     {              
              if (e.Row.RowType == DataControlRowType.DataRow)        
               {            
                  HiddenField hdn = ((HiddenField)e.Row.FindControl("HiddenFieldID"));   

                  TextBox txtPercentage = (TextBox)e.Row.FindControl("txtPercentage");

                   HtmlGenericControl spnKj=(HtmlGenericControl )e.Row.FindControl("spnKj");

                  txtPercentage.Attributes["onClick"]="calculate(this,'"+hdn .ClientID+"');"   

                  spnKj.innerHTML=hdn.Value;
               }

     } 
    ```

    **Javascript：**

将计算值分配给隐藏字段...

```
 function calculate(hdnID)
      {
         var CalcValue=//do your Calculation
         document.getElementByID(hdnID).Value=CalcValue;
      } 
```

3.在DropDown PostBack 事件中再次绑定GridView。

上面的代码应该解决您面临的问题。

# perl - 如何使用 awk 在 ant 构建文件目标范围内插入一行

> ID：12069217
> 
> 赞同：1
> 
> 时间：2012-08-22T08:34:43.103
> 
> 标签：perl, sed, awk

我需要有关使用 awk（首选）、sed 或 perl 的解决方案的帮助。该解决方案应该集成在 bash shell 脚本中。这是我的问题，我需要在 ant 构建文件目标的目标中插入一行，如下所示：

```
<target name="-AAAA" unless="non_AAAA_buildpackage">
              <antcall target="init"/>
              many antcall lines
</target>
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              many antcall lines here
              The line should be inserted here  as <antcall target="ZZZZ"/>
</target>
<target name="-BBBB" unless="non_BBBB_buildpackage">
              <antcall target="init"/>
              many antcall lines here
</target>
many targets here as this is a large file 
```

请注意，该 build.xml 文件中有许多目标名称，但`name="XXXX"`始终是唯一的。所有其他目标的结束分隔符与`</target>`. 请注意，该行应插入该行之前...`</target>` 请注意 build.xml 是一个包含许多目标的 lagre 文件，单词**“name="-XXXX"**是唯一的，但不是单词**“-XXXX”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:56:27.727

简单的 Perl 解决方案：使用一个标志`$inside`来告诉您您是否在所需的目标内：

```
perl -pe ' $inside = 1 if /<target name="-XXXX"/;
           print qq(              <antcall target="ZZZZ"/>\n) if $inside and m{</target>};
           $inside = 0 if m{</target>};
         ' 1.xml 
```

或者，使用[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)包装器[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)：

```
open 1.xml ;
insert chunk { qq(              <antcall target="ZZZZ"/>\n) } append //target[@name="-XXXX"] ;
save ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:59:37.920

与`GNU sed`：

内容`infile`：

```
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              ...............
              <antcall target="YYYY"/>
              <antcall target="ZZZZ"/>  **###The line should be inserted here**
</target>
<target name="-YYYY" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              ...............
              <antcall target="YYYY"/>
              <antcall target="ZZZZ"/>  **###The line should be inserted here**
</target> 
```

内容`script.sed`：

```
/^<target[ \t]\+name="-XXXX"/,/^<\/target>/ {
        /^<\/target>/ { i\
Your line                                                                                                                                                                                                                                   
        }
} 
```

像这样运行它：

```
sed -f script.sed infile 
```

具有以下输出：

```
<target name="-XXXX" unless="non_XXXX_buildpackage">                                                                                                                                                                                         
              <antcall target="init"/>                                                                                                                                                                                                       
              ...............                                                                                                                                                                                                                
              <antcall target="YYYY"/>                                                                                                                                                                                                       
              <antcall target="ZZZZ"/>  **###The line should be inserted here**                                                                                                                                                              
Your line                                                                                                                                                                                                                                    
</target>                                                                                                                                                                                                                                    
<target name="-YYYY" unless="non_XXXX_buildpackage">                                                                                                                                                                                         
              <antcall target="init"/>                                                                                                                                                                                                       
              ...............                                                                                                                                                                                                                
              <antcall target="YYYY"/>                                                                                                                                                                                                       
              <antcall target="ZZZZ"/>  **###The line should be inserted here**                                                                                                                                                              
</target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:01:09.453

这可以通过`sed`实用程序实现：

```
sed -i -e '/-XXXX/,/<\/target>/s/<\/target>/NEWLINEINSERTEDHERE\n<\/target>/' infile 
```

我们告诉`sed`只考虑`<target>...</target>`文件的正确部分，然后我们`</target>`用您添加的行 替换`</target>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:17:14.623

这样做`awk`：将记录分隔符设置为，`</target>`然后您将锚定在正确的位置：

```
awk -v RS='</target>' -v ORS='' -v OFS='' '
{ print }
/name="-XXXX"/ { print "              INSERTED LINE", "\n" }
{ print RT }' 
```

应该做你需要的。输出记录和字段分隔符应该为空以使空格正确。

### 更新

在新数据上运行上述脚本的示例：

**构建.xml**

```
<target name="-AAAA" unless="non_AAAA_buildpackage">
              <antcall target="init"/>
              many antcall lines
</target>
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              many antcall lines here
              The line should be inserted here  as <antcall target="ZZZZ"/>
</target>
<target name="-BBBB" unless="non_BBBB_buildpackage">
              <antcall target="init"/>
              many antcall lines here
</target>
many targets here as this is a large file 
```

运行脚本：

```
awk -v RS='</target>' -v ORS='' -v OFS='' '
{ print }
/name="-XXXX"/ { print "\t\t<antcall target=\"ZZZZ\"/>", "\n" }
{ print RT }' build.xml > out.tmp 
```

请注意，您需要转义双引号。另请注意，如果您想在添加的行前面添加制表符，请在`print`语句中添加适当的数量。

**输出.tmp**

```
<target name="-AAAA" unless="non_AAAA_buildpackage">
              <antcall target="init"/>
              many antcall lines
</target>
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              many antcall lines here
              The line should be inserted here  as <antcall target="ZZZZ"/>
              <antcall target="ZZZZ"/>
</target>
<target name="-BBBB" unless="non_BBBB_buildpackage">
              <antcall target="init"/>
              many antcall lines here
</target>
many targets here as this is a large file 
```

验证添加：

```
diff build.xml out.tmp 
```

输出：

```
8a9                        
> <antcall target="ZZZZ"/> 
```

## 编辑

这是脚本的更便携版本：

```
awk 'BEGIN { RS="</target>"; ORS=""; OFS="" }
{ print }
/name="-XXXX"/ { print "\t\t<antcall target=\"ZZZZ\"/>", "\n" }
{ print RS }' build.xml > out.tmp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:18:21.710

```
> cat temp
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              <antcall target="YYYY"/>
</target> 
```

一个 awk 解决方案：

```
> awk '{if($0~/\/target/){p="\t<antcall target=\"ZZZZ\"/>\n"$0;print p}else print}' temp
<target name="-XXXX" unless="non_XXXX_buildpackage">
              <antcall target="init"/>
              <antcall target="YYYY"/>
        <antcall target="ZZZZ"/>
</target> 
```

# cakephp - Cakephp Data validation - This field cannot be left blank

> ID：12069218
> 
> 赞同：2
> 
> 时间：2012-08-22T08:34:45.677
> 
> 标签：cakephp

I'm using cakephp and I get a strange behavior with it.

Here is my validation rule in the Model:

```
 public $validate = array(
    'flyer' => array(
        'rule' => array('fileValidation', 'flyer', array('image/jpeg', 'image/pjpeg'), NULL, TRUE)
    )
    // Other rules...
); 
```

Here is the fileValidation method (yes I'm french =) )

```
 public function fileValidation(array $check, $field, array $allowedMimeTypes = NULL, $maxFileSize = NULL, $allowEmpty = FALSE)
{
    $file = array_shift($check);
    $message = NULL;

    if($file['error'] === UPLOAD_ERR_OK){
        //  checking uploaded file
        if(empty($file['tmp_name']) || empty($file['tmp_name']) || $file['tmp_name'] === 'none' || !is_uploaded_file($file['tmp_name'])){
            $message = "Une erreur est survenue lors de l'envoi du fichier, veuillez réessayer à nouveau. Si le problème persiste, merci de contacter le support technique.";
        }

        //  checking mimeTypes if required
        elseif(!empty($allowedMimeTypes) && !in_array($file['type'], $allowedMimeTypes)){
            $message = "Le type de fichier envoyé n'est pas celui attendu.";
        }

        //  checking file size if required
        elseif(!empty($maxFileSize) && $file['size'] > $maxFileSize){
            $message = "Le fichier envoyé est trop volumineux, réduisez sa taille et réessayez.";
        }

        else{
            return TRUE;
        }
    }
    elseif($file['error'] === UPLOAD_ERR_NO_FILE){
        // validates if no upload is allowed
        if(!$allowEmpty){
            $message = "Une erreur est survenue lors de l'envoi du fichier, veuillez réessayer à nouveau. Si le problème persiste, merci de contacter le support technique.";
        }
        else{
            return TRUE;
        }
    }
    elseif($file['error'] === UPLOAD_ERR_INI_SIZE){
        $message = "Le fichier envoyé est trop volumineux, réduisez sa taille et réessayez.";
    }
    elseif($file['error'] === UPLOAD_ERR_FORM_SIZE){
        $message = "Le fichier envoyé est trop volumineux, réduisez sa taille et réessayez.";
    }
    elseif($file['error'] === UPLOAD_ERR_PARTIAL){
        $message = "Une erreur est survenue lors de l'envoi du fichier, le serveur n'a reçu qu'une partie du fichier, veuillez réessayer à nouveau.";
    }
    elseif($file['error'] >= UPLOAD_ERR_NO_TMP_DIR){
        $message = "Une erreur interne est survenue, veuillez réessayer à nouveau. Si le problème persiste, merci de contacter le support technique.";
    }

    // Here is the problem
    $this->validationErrors[$field][] = $message;

    return FALSE;
} 
```

So far so good, my Validation rule seems to work correctly but when à get an error, I have two messages: "My custom message" and "This file cannot be left blank".

How to remove this message, where am I wrong?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:53:35.670

May be it will works for you

> ```
> $this->validationErrors[$field][] = $message; // comment this Line
> return FALSE // comment this Line 
> ```
> 
> And Add the following line at last of your fileValidation function
> 
> **return implode("\n", $message);**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:37:18.080

Cakephp.Saint's solution doesn't work because $message is a string, not an array but this works fine:

```
return $message; 
```

# git - 如何使用 PHPStorm 将标签推送到远程 git 存储库？

> ID：12069219
> 
> 赞同：18
> 
> 时间：2012-08-22T08:34:47.657
> 
> 标签：git, phpstorm

我在日常开发中使用 PHPStorm IDE。它与许多 CVS 很好地集成在一起。但是当我开始使用 git 时，我发现很多 git 函数不受支持。或者我只是错过了一些东西。这就是我问的原因。

有没有办法用 PHPStorm 推送标签（git push --tags）？

当我跑

> 简历 | 吉特 | 标记文件

标签已创建，我什至可以在 PHPStorm git log 中看到它。但它只存在于本地。没有任何东西被推送到远程。如果我在创建标签后尝试进行推送，IDE 会显示“无推送”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-12-14T14:53:15.887

## 它在“推送提交”对话框中

> 风险控制系统 | 吉特 | 推送 → ☑ 推送标签

[![在此处输入图像描述](../Images/4ca35ec7f188455c5047af6edf06cf21.png)](https://i.stack.imgur.com/T2vuA.png)

请参阅：[Jetbrains Ticket IDEA-77483 - 推送对话框中缺少 GIT“推送标签”](https://youtrack.jetbrains.com/issue/IDEA-77483#focus=streamItem-27-1509368-0-0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T08:55:15.107

我不知道 PHPStorm，但`git push <remote> <branch>`命令行中的正常操作不会拾取标签。您需要发出：

```
git push <remote> --tags ;# push all tags
git push <remote> <tag> ;# push one tag 
```

同样，我无法与 PHPStorm 交谈，但从命令行执行此操作非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T08:35:07.583

你做不到。但是您可以在这里加入请求[http://youtrack.jetbrains.com/issue/IDEA-77483](http://youtrack.jetbrains.com/issue/IDEA-77483) 唯一的可能性是命令行和`git push –tags`

# excel - Matlab 向 Excel 发送数据

> ID：12069223
> 
> 赞同：0
> 
> 时间：2012-08-22T08:35:05.427
> 
> 标签：excel, matlab

我在将数据导出到 Excel 文件时遇到了一些问题。例如

这是结果，问题是右端的空白。假设有 0.947227532 但有些是空的。我有一个模糊的猜测，这是因为它连续具有相同的值。请告诉我该怎么办。

```
 0.690745994    18.05949033 1.192653957 0.396440197
-0.044258514    3.46265691  0.947227532 
 0.679917786    12.28067074 1.322402497 0.396440197
 0.639375225    16.35981089               
 0.254060838
 0.637346185    16.30103417 1.034478957 0.241511727
 0.317693262    0.947227532 1.000000167 2.23117E-06
 0.669425212    14.80575942 1.007101536 0.094840169
 0.635785401    15.01130502 1.021861337 0.194297042
 0.640530449    16.36085872 1.039032143 0.254278537

rhoV3;
xlswrite('MING.xls', rhoV3, 'MING', 'M17')

rhoV4;
xlswrite('MING.xls', rhoV4, 'MING', 'Q17')

PV;
xlswrite('MING.xls', PV, 'MING', 'AA17')

WP2;
xlswrite('MING.xls', WP2, 'MING', 'S17')

Cd2;
xlswrite('MING.xls', Cd2, 'MING', 'T17') 
```

这些

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:42:43.503

更改您的代码，以便您可以在屏幕上看到您正在编写的数组的值：

```
rhoV3
xlswrite('MING.xls', rhoV3, 'MING', 'M17')

rhoV4
xlswrite('MING.xls', rhoV4, 'MING', 'Q17')

PV
xlswrite('MING.xls', PV, 'MING', 'AA17')

WP2
xlswrite('MING.xls', WP2, 'MING', 'S17')

Cd2
xlswrite('MING.xls', Cd2, 'MING', 'T17') 
```

我敢打赌，xlswrite 运行良好，问题是其中`rhoV4`的元素比你想象的要少。所以修复`rhoV4`，你就完成了。

如果我错了，请返回该测试的结果，修改您的问题，我们都可以尝试弄清楚。

# h2 - 如何压缩h2数据库的内存空间（内存模式）？

> ID：12069224
> 
> 赞同：1
> 
> 时间：2012-08-22T08:35:05.800
> 
> 标签：h2

h2好像占用了太多内存空间，怎么压缩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:49:23.957

您是否使用内存模式（数据库 URL`jdbc:h2:mem:test`或类似模式）？H2 使用[可插入的文件系统/文件系统抽象](http://h2database.com/html/advanced.html#file_system)，作为其中的一部分，有两个内存文件系统实现，其中一个压缩数据。要使用它，请使用以下数据库 URL 之一：

*   `jdbc:h2:memFS:test`（常规的内存文件系统；比内存慢一点，`jdbc:h2:mem:test`但使用的内存少一点）
*   `jdbc:h2:memLZF:test`（压缩的内存文件系统；比上述速度慢，但使用的内存更少，可能是一半或三分之一）

如果您使用持久模式：H2 默认使用很少的内存用于缓存（16 MB），但如果需要，您可以减小缓存大小（请参阅文档）。

# android - 如何获取默认的音频流类型？

> ID：12069228
> 
> 赞同：0
> 
> 时间：2012-08-22T08:35:20.917
> 
> 标签：android, audio

我正在使用`AudioManager.adjustSuggestedStreamVolume(int direction, int suggestedStreamType, int flags)`with `suggestedStreamType`set to `AudioManager.USE_DEFAULT_STREAM_TYPE`。它的作用是决定哪种流类型（`STREAM_RING`等`STREAM_MEDIA`）与给定上下文（我的应用程序）最相关，并相应地调整其音量。我的问题是，有没有办法“解决”给定上下文中最相关的流到底是什么？

我一直在搜索Android源代码，有一种方法`AudioService.getActiveStreamType(int suggestedStreamType)`可以完全满足我的要求，但它被标记为私有，所以我不能在我的应用程序中使用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:59:05.403

如果这只是为了调整应用程序中的流音量，则最好在创建过程中手动设置它：

```
 activity.setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

（或任何其他流类型）并在其中修改适当的流。

# c++ - 什么是...函数参数？

> ID：12069234
> 
> 赞同：-4
> 
> 时间：2012-08-22T08:35:38.267
> 
> 标签：c++, c, function, parameters

> **可能重复：**
> [关于函数定义的问题（参数中的三个点..）](https://stackoverflow.com/questions/599744/question-about-a-function-definition-three-dots-in-parameters)

我想调用一个看起来像的函数

```
 void        (*CallVoidMethod)(JNIEnv*, jobject, jmethodID, ...); 
```

'...' 是什么？

我如何调用这个函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T08:38:11.693

它是一个具有可变数量参数的函数，例如`printf`.

[在这里](http://www.eskimo.com/~scs/cclass/int/sx11b.html)您可以找到这些功能的小教程。它们也被称为“可变参数”函数。

# python - sqlalchemy 选择 to_date

> ID：12069236
> 
> 赞同：1
> 
> 时间：2012-08-22T08:36:06.580
> 
> 标签：python, oracle, sqlalchemy

连接到 Oracle 数据库，我需要运行以下查询：

```
SELECT
    ad_campaign_id as campaign_id,
    TO_DATE("DAY", 'YYYY-MM-DD') as DAY,
    NVL(spent, 0) as spent,
    impressions,
    clicks 
FROM sometable 
```

我怎样才能用 SQLAlchemy 做到这一点？如何将参数发送到`func.to_date`函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T00:25:31.493

SQLAlchemy 的**func**将接受任何 Oracle 函数作为属性。

```
from sqlalchemy import func

campaign_id = sometable.c.ad_campaign_id
day = func.to_date(sometable.c.day, 'YYYY-MM-DD') # Is this what you need?
spent = func.nvl(sometable.c.spent, 0)
clicks = sometable.c.clicks
cols = [campaign_id, day, spent, clicks]

# Feel free to skip, this is just so you get the labels you want
labels = "campaign_id day spent clicks".split()
col_label = zip(cols, labels)
labelled = [c.label(l) for (c,l) in col_label]

q = session.query(*labelled) # or use *cols if you don't care about labels
q.all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:30:17.527

以下是执行任意查询的方式：

```
engine.execute(query_string) 
```

设置引擎是另一回事。虽然它有很好的记录。

如果您再次询问如何使用一些不同的模型来做到这一点......

所以这是你问题的第一部分回答（可能）。但是 func.to_date 函数是什么意思？请澄清

# c# - 在同一解决方案中添加 WCF 引用而不添加服务引用

> ID：12069240
> 
> 赞同：2
> 
> 时间：2012-08-22T08:36:18.483
> 
> 标签：c#, wcf, web-services, azure, cloud

我正在使用 Windows Azure 开展一个项目，并且在工作人员角色中我想使用 Web 服务向它提交一些信息。我的问题是：我可以在不添加服务引用的情况下使用 Web 服务吗？或者以某种方式添加它，当我在 azure 中发布我的项目时，我不需要更改服务引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:18:40.217

您可以使用通道工厂直接连接。这是一个示例基础存储库类，您将覆盖它，其中 T 是您的服务合同，例如 IMyService，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Channels;
using Microsoft.WindowsAzure.ServiceRuntime;

namespace pageengine.clients
{
    public class RepositoryBase<T> : IDisposable
    {

        #region Channel
        protected String roleName;
        protected String serviceName;
        protected String endpointName;
        protected String protocol = @"http";

        protected EndpointAddress _endpointAddress;
        protected BasicHttpBinding httpBinding;
        protected NetTcpBinding tcpBinding;

        protected IChannelFactory channelFactory;
        protected T client;

        protected virtual AddressHeader[] addressHeaders
        {
            get
            {
                return null;
            }
        }

        protected virtual EndpointAddress endpointAddress
        {
            get
            {
                if (_endpointAddress == null)
                {
                    var endpoints = RoleEnvironment.Roles[roleName].Instances.Select(i => i.InstanceEndpoints[endpointName]).ToArray();
                    var endpointIP = endpoints.FirstOrDefault().IPEndpoint;
                    if(addressHeaders != null)
                    {
                        _endpointAddress = new EndpointAddress(new Uri(String.Format("{1}://{0}/{2}", endpointIP, protocol, serviceName)), addressHeaders);
                    }
                    else
                    {
                        _endpointAddress = new EndpointAddress(String.Format("{1}://{0}/{2}", endpointIP, protocol, serviceName));
                    }

                }
                return _endpointAddress;
            }
        }

        protected virtual Binding binding
        {
            get
            {
                switch (protocol)
                {
                    case "tcp.ip":
                        if (tcpBinding == null) tcpBinding = new NetTcpBinding();
                        return tcpBinding;
                    default:
                        //http
                        if (httpBinding == null) httpBinding = new BasicHttpBinding();
                        return httpBinding;
                }
            }
        }

        public virtual T Client
        {
            get
            {
                if (this.client == null)
                {
                    this.channelFactory = new ChannelFactory<T>(binding, endpointAddress);
                    this.client = ((ChannelFactory<T>)channelFactory).CreateChannel();
                    ((IContextChannel)client).OperationTimeout = TimeSpan.FromMinutes(2);
                    var scope = new OperationContextScope(((IContextChannel)client));
                    addCustomMessageHeaders(scope);
                }
                return this.client; 
            }
        }

        protected virtual void addCustomMessageHeaders(OperationContextScope operationContextScope)
        {
            // Overidden
        }
        #endregion

        #region CTOR
        public RepositoryBase()
        {

        }
        #endregion

        #region IDisposable Members

        public virtual void Dispose()
        {
            if (client != null)
            {
                try
                {
                    ((ICommunicationObject)client).Close();
                }
                catch
                {
                    try
                    {
                        ((ICommunicationObject)client).Abort();
                    }
                    catch { } // Die quietly.
                }
            }
            if (channelFactory != null)
            {
                try
                {
                    channelFactory.Close();
                }
                catch
                {
                    try
                    {
                        channelFactory.Abort();
                    }
                    catch { } // Die quietly.
                }
                channelFactory = null;
            }
            _endpointAddress = null;
            httpBinding = null;
            tcpBinding = null;
        }

        #endregion
    }
} 
```

然后，您将发现端点，该端点将在已发布和模拟环境中工作。扩展此基础的类可能如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

using pageengine.services.entities.account;
using pageengine.services;

namespace pageengine.clients.accounts
{
    public class AccountsRepository : RepositoryBase<IAccounts>, IDisposable
    {
        #region CTOR
        public AccountsRepository()
        {
            this.roleName = "EntitiesRole";      // Name of the role my service is on
            this.endpointName = "HttpInternal";  // Name of the endpoint configured on that role. Can be internal or input, tcp or http.
            this.serviceName = "Accounts.svc";   // Name of my service.
        }
        #endregion
    }
} 
```

对您的服务的调用（在这种情况下来自 MVC 控制器操作）的形式为：

```
 public ActionResult ListAccounts()
    {
        using (var accountsRepository = new AccountsRepository())
        {
            return View("ListAccounts", accountsRepository.Client.ListAccounts());
        }
    } 
```

# collections - 使用 JUNG2 将节点添加到集合

> ID：12069243
> 
> 赞同：0
> 
> 时间：2012-08-22T08:36:34.557
> 
> 标签：collections, jung

我正在尝试添加这样的节点`( C.add(n)))`

我有这个问题：

> java.util.Collections$UnmodifiableCollection.add（未知来源）处的线程“主”java.lang.UnsupportedOperationException 中的异常）

不可执行的代码示例：

```
UndirectedSparseMultigraph<MyNode, MyLink> g = getgraph1();
Collection<MyNode> c = null ;
for( MyNode n : g.getVertices() ){
  if( n.id == 3 ){
    c = g.getNeighbors(n);
    System.out.println(C); C.add(n); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:24:37.653

您正在尝试使用`UndirectedSparseMultigraph.getNeighbors(V vertex)` 此`Vertices`方法返回一个不可修改的集合

```
 public Collection<V> getNeighbors(V vertex) {
  ...
    return Collections.unmodifiableCollection(neighbors);
  } 
```

一样

```
 public Collection<V> getVertices()
  {
    return Collections.unmodifiableCollection(vertex_maps.keySet());
  } 
```

和

```
 public Collection<E> getEdges()
  {
    Collection<E> edges = new ArrayList<E>(directed_edges.keySet());
    edges.addAll(undirected_edges.keySet());
    return Collections.unmodifiableCollection(edges);
  } 
```

根据您的评论，您正在尝试将节点添加`n`到其`neighbors`. 如果是这种情况，请尝试更换

`( C.add(n)))`

和

`g.addEdge(new MyLink(), n, n);`

添加一个自交点。

# javascript - document.createelement 不工作（javascript）

> ID：12069245
> 
> 赞同：-4
> 
> 时间：2012-08-22T08:36:43.880
> 
> 标签：javascript, html, dom

我正在学习 javascript，我对创建元素感到震惊。它在任何浏览器中都不起作用。这是我的代码：

```
<body>
<div id="cont">
<script type="text/javascript">
function hi()
{
    alert("hi");
}
function replace()
{
    var a=document.getElementById('cont');
    var b=new Element("form",{name:"pnrForm",action:"\frame.html",method:"post"});
    var c=new Element("input",{name:"lccp_trnname",type:"text",id:"lccp_trnname",size:"15",maxlength:"15",alt:"Train Name/Number"});
    var d=new Element("input",{type:"image",name:"getIt",src:"button-get-pnr.png",align:"middle"});
    b.appendChild(c);
    b.appendChild(d);
    a.appendChild(b);
}
replace();
hi();
</script>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:47:05.807

我相信您的代码期望 Mootools 存在。试试这个：

```
<body>
<div id="cont">
<script src="//ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<script type="text/javascript">
function hi()
{
    alert("hi");
}
function replace()
{
    var a=document.getElementById('cont');
    var b=new Element("form",{name:"pnrForm",action:"\frame.html",method:"post"});
    var c=new Element("input",{name:"lccp_trnname",type:"text",id:"lccp_trnname",size:"15",maxlength:"15",alt:"Train Name/Number"});
    var d=new Element("input",{type:"image",name:"getIt",src:"button-get-pnr.png",align:"middle"});
    b.appendChild(c);
    b.appendChild(d);
    a.appendChild(b);
}
replace();
hi();
</script>
</div>
</body> 
```

[MooTools](http://mootools.net/)不是[DOM](https://developer.mozilla.org/en-US/docs/DOM)，也不是[document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:51:52.687

使用`document.createElement`（见演示：http: [//jsfiddle.net/WQaaY/1](http://jsfiddle.net/WQaaY/1)）：

```
function replace() {
  var div = document.getElementById('div');

  var form = document.createElement('form');
  form.name = "pnrForm";
  form.action = "\frame.html"
  form.method = "post";

  var a = document.createElement('input');
  a.id = "lccp_trnname";
  a.type = "text";
  a.name = "lccp_trnname";
  a.alt = "Train Name/Number";
  a.size = "15";
  a.maxlength = "15";

  var b = document.createElement('input');
  b.type = "image";
  b.name = "getIt";
  b.src = "button-get-pnr.png";
  b.align = "middle";

  form.appendChild(a);    
  form.appendChild(b);
  div.appendChild(form);
}

replace();
​ 
```

# android - 用sencha连接在线mysql数据库？

> ID：12069247
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:36:49.403
> 
> 标签：android, iphone, mysql, database, extjs

我用 sencha 制作了一个应用程序，我有一个页面，我希望人们能够检查他们的请求状态，所以基本上，如果他们输入 id，他们就会得到状态，这个状态是从由控制的在线 mysql 数据库获取的一个在线的 php 页面，所以如果它更容易与电话差距数据库将只有 id 和状态我不介意切换 pleeeeaaaasssseee 帮助:(

伙计们，我已经尝试了一段时间，但从未找到具体的答案......请帮忙！它非常紧急！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:00:44.580

我不确定您是否在问如何创建 PHP 脚本，或者如何从 Sencha 访问 PHP 脚本。

对于前者，您只需像往常一样`mysql_connect()`连接到您的数据库，然后`$_GET["id"]`检索您在 URL 中作为参数提供的 id，假设您想使用 GET 传递 ID 并且您希望“服务” RESTful。`$_GET["id"]`然后可以在您的语句中使用返回的值`mysql_query()`，其结果可以被回显。

对于后者，再次假设您想以 RESTful 方式执行此操作，您将访问`www.domainforyourphpscript.com/path/to/your/php/script.php?id=31`，其中 31 是示例 ID。不过，这并不是 Sencha 特有的，因此您也可以使用 JQuery 之类的工具轻松访问它，甚至只需将 URL 输入 Web 浏览器即可。

这回答了你的问题了吗？如果您需要更详细的信息，我可以详细说明特定部分。

# php - 用于 NginX 配置的 PHP 和 Rails

> ID：12069248
> 
> 赞同：1
> 
> 时间：2012-08-22T08:36:59.020
> 
> 标签：php, ruby-on-rails, nginx, rewrite, passenger

我在同一台服务器上运行 PHP 和 Rails。我曾经在 nginx.conf 有一个重写规则

```
location / {
    index index.php; 
} 
```

并且在 URL like 的情况下`/foo/bar` `/foo/bar/index.php`被提供。

但现在我也有 Rails (Passenger)，有了这条规则，我不能撞到铁轨。如何检查之前是否存在 index.php 并仅在不存在时才点击 rails。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:34:53.060

如果我理解您的问题，您将需要定义另一个位置块，“命中”轨道并在当前位置使用 try_files。像这样的东西。

```
index index.html index.php # better place this outside location block

upstream thin {
    unix:/tmp/thin.0.socket;  # this could be any other rails server socket
    unix:/tmp/thin.1.socket;
}

location / {
    try_files $uri @rails;
}

location @rails {
    proxy_pass http://thin;
} 
```

这些将是此类配置的重要部分，当然它缺少代理配置。 [类似应用的更详细示例](http://wiki.nginx.org/RubyonRailsMongrel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:56:44.087

应该`try_files`

```
server {
        try_files $uri $uri/ $uri/index.php @passenger;

        location @passenger {
                passenger_enabled on;
                rails_env development;
        }
} 
```

# php - getUser() 在 Codeigniter 中总是返回 0

> ID：12069249
> 
> 赞同：0
> 
> 时间：2012-08-22T08:37:07.140
> 
> 标签：php, facebook, codeigniter

我开始使用 codeigniter 框架创建一个小型应用程序，并且在 facebook 中创建我的应用程序后，我已经从 github 下载了 Facebook connect，此时一切正常，我唯一的问题是 getUser() 总是返回 0

我在里面创建了一个 facebook.php，我也在里面`application/config/` 提取了`facebook.php & base_facebook.php``application/libraries/`

这是我的代码

```
class Welcome extends CI_Controller {

    private $data = array();

    public function index() {
        $this->data['loginUrl'] = $this->facebook->getLoginUrl();
        $this->data['userId'] = $this->facebook->getUser();
        $this->load->view('welcome_message', $this->data);
    }

} 
```

在自动加载中我有：

```
$autoload['libraries'] = array('database','session','facebook'); 
```

那么为什么`getUser()`返回 0 以及如何解决这个问题 thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:00:35.890

on `base_facebook.php`，找到`makeRequest()`方法，然后在函数内部找到这一行：

```
$opts = self::$CURL_OPTS; 
```

紧随其后，添加：

```
$opts[CURLOPT_SSL_VERIFYPEER] = false; 
```

或从[这里阅读](http://net.tutsplus.com/tutorials/php/how-to-authenticate-your-users-with-facebook-connect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:41:49.040

它有时会这样做。我从来没有弄清楚为什么，但我现在总是遵循一个简单的解决方案。

与请求 getUser 不同，请求包含在 try catch 块中的 api(/me)。如果失败，则用户未登录/令牌无效。如果它有效，则用户已登录，并且您从结果数组中获取用户 ID。

你可能正在保存一个电话，因为无论如何你都会要求 /me。请记住用于错误捕获的 try catch！

# c# - 使用 nhibernate 将日志审计到重复表

> ID：12069263
> 
> 赞同：2
> 
> 时间：2012-08-22T08:38:00.047
> 
> 标签：c#, nhibernate, fluent-nhibernate, audit

我们有一个使用 NHibernate 作为 ORM 的 Web 应用程序，现在我们需要对一些实体添加审计以跟踪谁更改了什么。但是，我还没有设法找出最好和最简单的方法来处理它。

如果可能的话，我希望审计信息进入每个实体的单独表中，如下所示（伪 sql）：

```
create table MethodStatus (MethodId, Enabled)
create table MethodStatusAudit (MethodId, Enabled, AdminId, Date, ChangeType(U,D,I)) 
```

问题是如何使用 (Fluent)NHibernate 设置它以便于管理？

我最初的想法是使用 IPreInsertEventListener / IPreUpdateEventListener / IPreDeleteEventListener 并让我的可审计对象实现 IAuditable 接口，然后做一些事情。但我不知道如何保存审计..

```
public interface IAuditable {}

public class MethodStatus : IAuditable
{
    public virtual int MethodId { get; set; }
    public virtual bool Enabled { get; set; }
}

public class MethodStatusMap : ClassMap<MethodStatus>
{
    public MethodStatusMap()
    {
        Id(x => x.MethodId);
        Map(x => x.Enabled);
    }
}

public bool OnPreInsert(PreInsertEvent @event)
{
    var e = @event.Entity as IAuditable;
    if (e != null)
        //save audit.. but how? 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:32:20.250

[NHibernate Envers](https://bitbucket.org/RogerKratz/nhibernate.envers/)可以帮助您。

# c# - asp.net web 表单客户端验证总是回发

> ID：12069265
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:38:03.893
> 
> 标签：c#, javascript, asp.net, webforms

我正在开发一个触发 asp.net 客户端验证的棕地网站，无论结果如何，它总是会进行回发。如果验证失败，有人有什么想法可以阻止这种行为吗？

提前致谢。

波奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:24:20.903

just for example: validate the textbox , if its empty postback not called else postback called.

button click event:

```
<asp:TextBox id="vTextBox" runat="server" />

<asp:button id="okButton" runat="server OnClick="okButton_Click" OnClientClick=" return isValidate();"/>

<script type="text/javascript"> 

function isValidate() {   var txt = $("#vTextBox").val();  
if ( txt === "") {  alert("error"); return false; }
else { alert(" no error "); return true; } }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:48:43.937

您可以利用自定义验证器控件[w3schools](http://www.w3schools.com/aspnet/control_customvalidator.asp)或[MSDN](http://msdn.microsoft.com/en-us/library/9eee01cx%28v=vs.71%29.aspx)链接。它允许您执行客户端验证。用法[示例](http://www.w3schools.com/aspnet/showasp.asp?filename=demo_customvalidator)。

```
<asp:CustomValidator id="CustomValidator1" runat="server" 
    ErrorMessage="Number not divisible by 2!" 
    ControlToValidate="txtCustomData" 
    OnServerValidate="ServerValidate" 
    ClientValidationFunction="CheckEven" /><br>
Input:
<asp:TextBox id="txtCustomData" runat="server" />
<script language="javascript">
<!--
function CheckEven(source, args) {
    var val = parseInt(args.Value, 10);
    if (isNaN(val)) {
        args.IsValid = false;
    }
    else {
        args.IsValid = ((val % 2) == 0);
    }
}
// -->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:09:10.183

我得到了相同的行为并通过将 CausesValidation 属性设置为 True 来修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-14T22:07:25.070

就我而言，我有几个 CustomValidators 缺少 ClientValidationFunction。

确保页面上没有也可能导致此问题的 JavaScript 错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T08:46:34.717

对于客户端验证，您必须调用一些 JS 函数进行验证：

如果您在单击按钮时调用客户端验证方法，那么您应该像下面这样调用它：

```
<asp:Button runat="server" id ="btnSubmit" onClientClick="return ValidateForm();" > 
```

Validate Form 方法应该返回 true 或 false。

喜欢 ：

```
function ValidateForm()

{

/// Validation goes here 

if (validated)
{
  return true;
}
else{
  return false;
}
}
} 
```

# ruby-on-rails-3 - 使用 previous_changes 跟踪虚拟属性的模型更改

> ID：12069268
> 
> 赞同：1
> 
> 时间：2012-08-22T08:38:08.847
> 
> 标签：ruby-on-rails-3, activemodel

我正在跟踪我的模型的更改，我想跟踪 has_many 关系的更改。该模型具有：

```
define_attribute_method :tag_tokens
attr_reader :tag_tokens

def tag_tokens=(ids)
  tag_tokens_will_change! unless ids == @tag_tokens
  self.tag_ids = ids.split(",")
end 
```

[http://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)和[http://api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)的组合

结果就是在线上引起的这个异常`define_attribute_method`。我相信这个方法是创建方法所必需的`tag_tokens_will_change`。

```
ruby-1.9.3-p194@mm/gems/activerecord-3.2.8/lib/active_record/attribute_methods/time_zone_conversion.rb:59:in `create_time_zone_conversion_attribute?': undefined method `type' for nil:NilClass (NoMethodError) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:10:40.547

我收到了同样的错误，事实证明我们所指的文档已经过时。

当前触发此更改的方法是调用`attribute_will_change! :attr_name`

[有关更多详细信息，请参阅此处](https://stackoverflow.com/questions/5666745/track-dirty-for-not-persisted-attribute-in-an-activerecord-object-in-rails)接受的答案。

# java - 如何将堆栈跟踪添加到肥皂故障（websphere）中

> ID：12069270
> 
> 赞同：2
> 
> 时间：2012-08-22T08:38:14.660
> 
> 标签：java, soap, websphere, axis2, stack-trace

我们已经将 Webservice 部署到 websphere 服务器中，我想询问有关控制肥皂故障响应的设置。当肥皂故障发生时，我想将堆栈跟踪日志添加到回复中。我知道这在 weblogic 中是可能的。如何在 websphere 中实现这一点？或者有没有办法手动添加它（不是通过创建自定义元素）？

谢谢

编辑：我使用 apache cxf 来生成基本的 java 类，所以我有：

```
@WebMethod public returnType method(param) throws CustomException 
```

并制造故障

```
CustomExceptionWSDLType ex = new CustomExceptionWSDLType ()
throw new CustomException(error.getMessage(), ex , error); 
```

CustomException 为 Exception 且
CustomExceptionWSDLType 为复杂类型（均由 cxf 生成）

EDIT2：我使用 CXF 生成 POJO，但 Websphere 使用自己的轴实现来部署我的 WS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:29:37.180

我不是 Websphere 专家，无法告诉您是否有配置选项可以让您执行此操作。

> 或者有没有办法手动添加它（不是通过创建自定义元素）？

抛出故障时，您始终可以在 Web 服务中添加详细信息并修改故障字符串和代码。现在，有很多方法可以构造和抛出错误，我不知道您的 Web 服务是如何做到的。这是一个非常简单的示例，它将异常的堆栈跟踪放入故障字符串中。

```
 @WebMethod
public void throwFault(){
    try {
        SOAPFactory factory = SOAPFactory.newInstance();            
        IndexOutOfBoundsException e = new IndexOutOfBoundsException("index out of bounds");         
        SOAPFault fault = factory.createFault(getStackTraceString(e), new QName("http://whatever.com","CustomFault"));          
        throw new SOAPFaultException(fault);
    } catch (SOAPException e) {
        // ignore for the example           
    }
}

private String getStackTraceString(Exception e){
    StringWriter sw = new StringWriter();
    PrintWriter pw = new PrintWriter(sw);
    e.printStackTrace(pw);
    return sw.toString();
} 
```

该方法`throwFault`由服务公开，并简单地创建并抛出一个新的`SOAPFault`. 这在您的代码中可能看起来不同。私有方法`getStackTraceString`将堆栈跟踪转换为字符串表示。

此解决方案确实向您的 WSDL 添加了一个附加元素，它只是将错误字符串重用于堆栈跟踪。

调用网络服务，我得到以下响应：

```
 <S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
 <S:Body>
 <S:Fault xmlns:ns4="http://www.w3.org/2003/05/soap-envelope">
  <faultcode xmlns:ns0="http://whatever.com">ns0:CustomFault</faultcode> 
  <faultstring>java.lang.IndexOutOfBoundsException: index out of bounds at Faulter.throwUndeclaredFault(Faulter.java:23) at  <!--rest of stacktrace omitted for readability--!> </faultstring> 
 </S:Fault>
  </S:Body>
  </S:Envelope> 
```

编辑：假设`error`代码中的变量是异常，您可以将 throw 语句更改为

```
throw new CustomException(getStackTraceString(error),error); 
```

这应该以上述方式为您提供堆栈跟踪。

# php - PHP HTML 实体：将字符与 html 代码进行比较（急性）

> ID：12069274
> 
> 赞同：0
> 
> 时间：2012-08-22T08:38:20.040
> 
> 标签：php, html, entity

我怎样才能使这个比较返回真实？

```
$var1="á";
$var2="&aacute;";

if ($var1==$var2) {
    return true;
} 
```

有趣的是我不知道 html 实体是在 var1 中还是在 var2 中，所以我需要在比较的两侧放置相同的函数。

我尝试使用 html_entity_decode、htmlentities 和两者的组合。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:43:43.590

你不能`or`在你的 if 语句中使用比较吗？如果其中一个`$var1`或是`$var2`一个 HTML 实体，它应该很好地返回 true。

```
<?php 
    $var1="á";
    $var2="&aacute;";

    if (html_entity_decode($var1)==$var2 || html_entity_decode($var2)==$var1) {
        return true;
    }
?> 
```

如果您可能将它们放在 boht 或任一字段中，则可以添加第三个比较，如下所示：

```
<?php 
    $var1="á";
    $var2="&aacute;";

    if ($var1==$var2 || html_entity_decode($var1)==$var2 || html_entity_decode($var2)==$var1) {
        return true;
    }
?> 
```

# sharepoint - sharepoint 2010 搜索说明

> ID：12069276
> 
> 赞同：1
> 
> 时间：2012-08-22T08:38:22.233
> 
> 标签：sharepoint, search, sharepoint-2010

我的一个客户有 2 个 Web 应用程序，共享相同的内容类型。这些内容类型（我们称它们为“A”）属于基本类型 DocumentSet，并包括一个托管元数据属性“B”（它是所有库中 WebApp 2 上的索引列）。

然而，发生了一件奇怪的事情。搜索和索引工作正常。但是当我们在 WebApp 2 中搜索时，它总是在描述中显示托管元数据属性字段“B”的值。它总是错误的。无论该文档集中属性 B 的实际值是什么，它总是显示分类存储中的某个其他值。

我尝试检查 Powershell 中项目的每个属性和字段，但找不到对显示的属性值的任何引用。

我在这件事上的问题是：

1）如果列表项中不存在此值，那么究竟如何抓取该值并将其包含在描述中？

2）如何检查爬网数据库以检查它存储了哪些属性？

# javascript - 捕获点击 addThis 按钮

> ID：12069281
> 
> 赞同：0
> 
> 时间：2012-08-22T08:38:42.803
> 
> 标签：javascript, jquery, social-networking, social, addthis

我正在使用 addThis 小部件在我的网站上显示 Facebook、Twitter、Google、Blogger、Wordpress 徽标。

```
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=xa-1324kj34h243kjh2"></script> 
```

我想知道当有人出于 Google Analytics 跟踪原因单击其中一个按钮时可以捕获的一种方式。我试图将 onClick 添加到锚点，但这不会触发 - 大概是因为标记是由包含的 JavaScript 重写的。

这是我的代码：

```
<div class="addthis_toolbox addthis_default_style"> 
    <div class="share-icons" id="share-icons">
        <span id="share-title">Share</span>
        <span class="spacer"></span>
        <a class="addthis_button_email left" title="Email" onClick="_gaq.push(['_trackSocial', 'addThis', 'email']);">&nbsp;</a>

        <a class="addthis_button_facebook left" title="Facebook">&nbsp;</a>
        <a class="addthis_button_twitter left last" title="Twitter">&nbsp;</a>

        <a class="addthis_button_google left" title="Google">
        <img src="images/google.gif" alt="G" />
        </a>
        <a class="addthis_button_blogger left" title="Blogger">&nbsp;</a>
        <a class="addthis_button_digg left last" title="Wordpress">&nbsp;</a>
    </div>  
</div> 
```

我目前正在使用 addthis_config 报告 GA 活动，但我希望向两个配置文件报告，因此我正在寻找一种捕获点击的方法，因为这似乎是解决问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:14:27.827

确保您在 DOM 上附加了该 div 以确保您可以使用事件。否则检查[liveQuery](http://docs.jquery.com/Plugins/livequery)。

我没有使用 addThis 小部件，但我会尝试使用 jQuery 使用类名：

```
$.('.addthis_button_email').click(function(){
    //Count it...
}); 
```

或者在每个按钮中使用自定义方法：

```
<div class="addthis_toolbox addthis_default_style"> 
    <div class="share-icons" id="share-icons">
        <span id="share-title">Share</span>
        <span class="spacer"></span>
        <a class="addthis_button_email left" title="Email" onClick="notifyGA(information....)">&nbsp;</a> 
```

# java - 从 java 代码中检索文件

> ID：12069282
> 
> 赞同：0
> 
> 时间：2012-08-22T08:38:46.237
> 
> 标签：java, ftp-client, apache-commons-net

我正在尝试从 ftp 检索文件。我收到以下异常。有时可能会并发访问同一文件。我的防火墙已关闭。

**我的问题是如何摆脱这个异常，因为它无法下载必要的文件，我的程序无法正常工作**

我的下载代码：

```
 public boolean downloadFile(String sourceFilePath, String destinationDirPath, String newFileName)
            throws IllegalStateException {

//      final FTPClient client = this.getClient();
        FileOutputStream output = null;
        try {
            client.setFileType(FTP.BINARY_FILE_TYPE);
            // The remote filename to be downloaded.
            String filename = new File(sourceFilePath).getName();
            // Downloads the selected file to the C drive
            output = new FileOutputStream(destinationDirPath + File.separator + newFileName);
            this.cd(new File(sourceFilePath).getParent());
            // Download file from FTP server
            boolean result = client.retrieveFile(filename, output);
            log.trace("File is downloaded from server:" + filename + ", to destination:"+newFileName);
            return result;
        }
        // Indicate that an exception is occurred while downloading file
        catch (Exception ioe) {
            throw new FileTransferException("Could not download file", ioe);
        } finally {
            if (output != null) {
                try {
                    // trying to close FileOutputStream
                    output.close();
                } catch (IOException e) {
                    log.warn("Error closing writer to file:"+newFileName, e);
                }
                output = null;
            }
        }
    } 
```

这是堆栈跟踪：

```
Exception during data transfer, closing data connection socket
    java.net.SocketException: Software caused connection abort: socket write error
        at java.net.SocketOutputStream.socketWrite0(Native Method)
        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
        at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
        at java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)
        at org.apache.ftpserver.impl.IODataConnection.transfer(IODataConnection.java:289)
        at org.apache.ftpserver.impl.IODataConnection.transferToClient(IODataConnection.java:161)
        at org.apache.ftpserver.command.impl.RETR.execute(RETR.java:166)
        at org.apache.ftpserver.impl.DefaultFtpHandler.messageReceived(DefaultFtpHandler.java:210)
        at org.apache.ftpserver.listener.nio.FtpHandlerAdapter.messageReceived(FtpHandlerAdapter.java:61)
        at 
```

# android - 在 Android 中创建 Sqlite 表

> ID：12069288
> 
> 赞同：-1
> 
> 时间：2012-08-22T08:39:20.363
> 
> 标签：android, sql, sqlite

我尝试在数据库中创建三个表，但它只创建 tbl_alarms、tbl_bookmarks 和 android_metadata。为什么我不能创建 tbl_locationfrommap ？

```
 SQLiteDatabase db;
    db = openOrCreateDatabase("Informations.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);
    db.setVersion(1);
    db.setLocale(Locale.getDefault());
    db.setLockingEnabled(true);
    Cursor cursor=db.rawQuery("select DISTINCT tbl_name from sqlite_master where tbl_name = 'tbl_alarms'", null);

    if(cursor.getCount()==0) {
        final String CREATE_TABLE_ALARMS = "CREATE TABLE tbl_alarms (" + 
                                               "alarmName TEXT PRIMARY KEY," + 
                                               " distance INTEGER, 
                                                 ringtone TEXT, 
                                                 vibrate INTEGER, 
                                                 latitude INTEGER, 
                                                 longitude INTEGER, 
                                                 note TEXT, 
                                                 alarmTime LONG, 
                                                 alarmSnoozeTime LONG);";
        final String CREATE_TABLE_BOOKMARKS = "CREATE TABLE tbl_bookmarks (" +
                                              "bookmarkName TEXT PRIMARY KEY," + 
                                              "latitude INTEGER, 
                                               longitude INTEGER);";
        final String CREATE_TABLE_MAPLOCATION = "CREATE TABLE tbl_locationfrommap (" +
                                                "latitude INTEGER PRIMARY KEY"+
                                                " , longitude INTEGER PRIMARY KEY);";
        db.execSQL(CREATE_TABLE_ALARMS);
        db.execSQL(CREATE_TABLE_BOOKMARKS);
        db.execSQL(CREATE_TABLE_MAPLOCATION);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:42:42.920

表中只能有一个**PRIMARY KEY**。您在创建表时添加了两个主键。

我建议你修改如下，

```
final String CREATE_TABLE_MAPLOCATION = "CREATE TABLE tbl_locationfrommap (" +  " latitude INTEGER PRIMARY KEY"+" , longitude INTEGER UNIQUE );"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:45:26.260

基本的sql问题。更改 sql 从

CREATE TABLE tbl_locationfrommap (" + " 纬度整数主键"+" ，经度整数主键)

至

CREATE TABLE tbl_locationfrommap (" + " latitude INTEGER"+" , longitude INTEGER, PRIMARY KEY(latitude, longitude))

如果您打算创建对主键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:41:38.227

在表中，您只能分配一个**Primary Key**。

**创建另一个字段 id 并将其设为主要并将其从纬度和经度中删除。**

```
final String CREATE_TABLE_MAPLOCATION = "CREATE TABLE tbl_locationfrommap (" + "id INTEGER PRIMARY KEY"+  " latitude INTEGER"+" , longitude INTEGER );"; 
```

# ant - 如果我需要查找带有模式的文件，ant:waitfor 任务的替代方法是什么？

> ID：12069290
> 
> 赞同：1
> 
> 时间：2012-08-22T08:39:21.490
> 
> 标签：ant

我必须在给定文件夹中查找*.xls（比如测试结果*.xls）。如果不可用，它应该等待 60 分钟以在超时之前创建 *.xls。测试执行目标将同时创建这个测试结果文件。

我正在尝试使用 ant: waitfor 任务和文件名的关联“可用”任务。但是“可用”任务需要一个特定的文件名（例如：test-results.xls）。我不能这样做，因为文件附加了时间戳（例如：test-result_08-22-2012 9:45 PM.xls）。我尝试使用文件集任务，但它说文件集不能在等待任务中使用。

我必须使用 ant: waitfor 任务并查找具有特定模式的文件（例如：test-result*.xls 或 *.xls）。请让我知道这是否可能，或者对于这种特定情况是否有替代等待任务的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:32:25.827

您好，您可以使用这个组合[ant-contrib PropertyRegex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)和 waitfor 任务。我们已将这种组合用于我们的要求，这与您的要求相似。

# css - 带有侧边栏和内容的 CSS 100% 高度（内部的 div）

> ID：12069292
> 
> 赞同：0
> 
> 时间：2012-08-22T08:39:24.900
> 
> 标签：css, height

我以前问过这个问题并得到了解决方案，但是当我努力解决这个问题时，我发现解决方案不是最好的（建议将两者都设置为 display:table-cell）

当我在其中添加 div 时，高度会发生变化，并且布局会失控。

我想要的很简单，就像显示的图像

**[编辑：这是我遇到问题的主要原因，我正在尝试添加一个 div 以包含一个阴影]** ![在此处输入图像描述](../Images/310210a4ca03727624076822e88a44d7.png)

我希望带纹理的 BG 一直伸展，与页面的高度一样高（因此随着内容的变化，带纹理的 bg 会跟随）

所以我做了一些东西，比如

```
<body>
<div id="page">
<div id="sidecolumn">
<div id="sidebar"></div>
</div>
<div id="maincolumn">
<div id="content"></div>
</div>
</div>
</body> 
```

通过将所有 div 和 body 样式设置为 height:100%；但问题是，当我的内容超出页面限制（出现滚动条）时，带纹理的 BG 不会溢出，它只会停在原来的位置。假设屏幕高度为 800px，如果内容超出并达到 1000px，则纹理背景将停止在 800px。

当我尝试使用 display:table-cell 为我推荐的内容时，带纹理的 bg 与内容一起流动，但我无法在侧栏中添加，因为当我这样做时，内容 div 上方会有一个空白区域。关于我应该如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:12:43.740

编辑：使用荀阳的方法会奏效。正如他自己所说，这只是非常规;）

小提琴：http: [//jsfiddle.net/Nu2wH/](http://jsfiddle.net/Nu2wH/)

```
html, body {
    height: 100%:
    padding: 0;
    margin: 0;  
}

#page {
    background: #444444;
    min-height: 100%; 
    height:auto !important; 
    height:100%;
    overflow: hidden !important;
    background: url("http://upload.wikimedia.org/wikipedia/commons/3/3e/Social_icons-google-22x22.png?uselang=de") repeat;
}

#sidecolumn  {
    width: 45%;
    padding-left: 5%;
    padding-top: 5%;
    padding-bottom: 5%;
    float: left;
}   

#sidebar {
    background: #ddd;
}
#maincolumn  {
    padding: 5%;
    width: 40%;
    float: right;
    background: #AA9933;
    height: 100%:
}    
#content {
    background: #ddd;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:10:29.013

```
#page
{
background:url(images/bg.png);
width:200px;/*Width of your sidebar*/
}
#maincolumn
{
margin-left:200px;/*width of your sidebar*/
} 
```

不是很传统但很有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:46:57.423

您可以对所有浏览器使用 css 3 声明背景大小

```
background: url(images/bg.jpg) no-repeat center center fixed; //fallback for unsupported browsers and sets the background image
-webkit-background-size: 100% 100%;
-moz-background-size: 100% 100%;
-o-background-size: 100% 100%;
background-size: 100% 100%; 
```

# virtualization - 使用与 AppArmor 相关的 libvirt 错误创建虚拟机

> ID：12069297
> 
> 赞同：8
> 
> 时间：2012-08-22T08:39:55.470
> 
> 标签：virtualization, qemu, libvirt

我正在尝试使用以下命令使用 libvirt 创建虚拟机：

```
virsh create file 
```

内容`"file"`：

```
<domain type='qemu' id='3'>
        <name>testvm</name>
        <memory>100</memory>
        <vcpu>1</vcpu>
        <os>
                <type arch='i686'>hvm</type>
        </os>
        <devices>
                <disk type='file' device='disk'>
                        <source file='/libtmp/VM-linux.0.2.img'/>
                        <target dev='hdc'/>
                </disk>
        </devices>
        <on_reboot>restart</on_reboot>
        <on_poweroff>preserve</on_poweroff>
        <on_crash>restart</on_crash>
</domain> 
```

这是发生的错误。

```
error: Failed to create domain from file
error: internal error cannot load AppArmor profile 'libvirt-9cb01efc-ed3b-ff8e-4de5-7227d311dd15' 
```

我能够在不加载图像文件的情况下创建 vm。

每次配置文件名称不断变化。我尝试停止它并创建虚拟机，但我得到了同样的错误。

任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-19T11:54:24.070

我遇到了同样的问题，原因是我有一个坏主意，将只读 cdrom 映像放置到 /etc，如下所示：

```
<disk type="file" device="cdrom">
  <driver name='qemu' type="raw" />
  <source file="/etc/libvirt/qemu/cdrom.iso" />
  <target dev='hdb' bus='virtio'/>
  <readonly/>
</disk> 
```

移动到 /var 删除了错误消息并允许启动虚拟机。这一行：

```
<source file="/var/lib/libvirt/images/cdrom.iso" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T05:00:09.917

这是 libvirt 中的一个错误。见[https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/665531](https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/665531)

使用“virsh edit domainname”命令编辑虚拟域的 xml 定义。在 xml 定义中将 type='host_device' 替换为 type='raw'。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T11:58:20.397

这是一种解决方法，但不是正确的方法。使用以下命令将 AppArmor 设置为抱怨模式：

```
sudo aa-complain /usr/sbin/libvirtd 
```

# erlang - 将我的应用链接到另一个应用

> ID：12069298
> 
> 赞同：1
> 
> 时间：2012-08-22T08:40:04.623
> 
> 标签：erlang, chicagoboss

我刚刚开始开发一个新的 ChicagoBoss 应用程序（称之为`my_app`）。我有一个`ext_app`想要链接到的现有应用程序（调用它），所以我可以调用诸如`ext_app:start()`from之类的函数`my_app`。目前我正在使用 来完成这个`rebar`，它确实有效，但我宁愿按照共享库的方式做一些事情。

在`my_app/src/my_app.app.src`我有这条线：

```
{applications, [kernel, stdlib, crypto, boss]} 
```

我设想我会将其更改为：

```
{applications, [kernel, stdlib, crypto, boss, ext_app]} 
```

但我不知道把路径放在哪里`ext_app`？

我想如果我花一到三周时间仔细研究 OTP 文档，我可能会弄明白，但是 . . . 我想我宁愿花时间编码。

哦，是的 - 这是在 Debian “wheezy” 系统上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:49:38.800

我的猜测是，您只想在启动应用程序时包含 ext_app 的路径，这将允许 erlang 调用 ext_add:start()。

启动 erl 时使用标志 -pa 或 -pz 将目录添加到代码路径的开头或结尾。它等效于使用 code:add_pathsa/1 或 code:add_pathsz/1。

# batch-file - 批处理文件 - 发现的程序路径（变量） - 从发现的 reg 值（路径）运行程序

> ID：12069300
> 
> 赞同：4
> 
> 时间：2012-08-22T08:40:06.097
> 
> 标签：batch-file, registry, steam

我正在尝试创建一个批处理文件，该文件将在这种情况下发现一个 EXE 的位置 Steam，并使用从注册表中发现的路径运行该 EXE。我想通过注册表发现安装路径的原因是因为这个批处理文件要在多台机器上运行，并且 Steam 安装路径可能不同。

注册表是保存这些路径的常量。现在我相信 Steam 将其安装路径存储在：

```
"HKEY_CURRENT_USER\Software\Valve\Steam\"
SteamExe = X:\Path\Steam.exe 
```

所以首先我需要知道如何获取该值，然后我想知道如何获取该值并将其输入到运行命令中以便 Steam 运行。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:50:17.187

```
@echo off

for /f "tokens=1,3" %%E in ('reg query "HKEY_CURRENT_USER\Software\Valve\Steam"') do (
    if %%E==SteamExe echo "%%F"
)

pause 
```

`reg query`获取注册表路径的所有键和值。

`for /f`访问查询的注册表数据的每一行并拆分数据，以便“名称”存储在“E”中，“数据”存储在“F”中。如果“E”等于“SteamExe”，则回显“F”，这将显示 Steam 可执行文件路径。

命令行版本：

```
@for /f "tokens=1,3" %E in ('reg query "HKEY_CURRENT_USER\Software\Valve\Steam"') do @if %E==SteamExe @echo "%F" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T01:13:13.893

我采用了另一种方式，这将起作用。

```
setlocal

regedit /e reg_exported.tmp "HKEY_CURRENT_USER\Software\Valve\Steam"
find "SteamExe" reg_exported.tmp | findstr "SteamExe" >> line_exported.tmp
set /p SteamPath= < line_exported.tmp
set SteamPath=%SteamPath:~11%

del reg_exported.tmp
del line_exported.tmp

start "Steam" %SteamPath%

endlocal 
```

# wcf - Wcf 同步数据库应用程序 IIS 寻找错误的路径

> ID：12069301
> 
> 赞同：0
> 
> 时间：2012-08-22T08:40:06.513
> 
> 标签：wcf, iis-7, microsoft-sync-framework, data-synchronization

我目前正在将 Wcf 与 Sync 应用程序一起使用。

我已将应用程序部署在 C:/Inetpub/wwwroot/DbSyncWcfService 我已从路径 D:\MySyncService\MySyncServiceProject\MySyncService\MySyncService\DBSyncWCF 部署。

我能够成功浏览应用程序。但是当我使用 WCf 应用程序时。它给了我一个错误，如下所示。DBSyncHandler :: initScopeInfo() :: Exception ==System.ServiceModel.FaultExcepti on`1[System.ServiceModel.ExceptionDetail]: 超时已过期。在操作完成之前超时时间已过或服务器没有响应。（Fault Detail等于An ExceptionDetail，可能由IncludeExceptionDetailInFaults=true创建，其值为：System.Data.SqlClient.SqlException: Timeout expired。在操作完成之前超时时间已过或服务器没有响应。在 D:\MySyncService\MySyncServiceProject\MySyncService\MySyncService\DBSyncWCF\DB SyncService.svc.cs 中的 DBSyncWcfService.DBSyncService.InitializeScopeConfig(String xmlasstring)：

基本上我很惊讶，因为它显示的路径来自我的物理路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:53:16.113

那是嵌入在您的应用程序中的调试信息。路径是您编译应用程序的时间。您的 wcf 服务的部署路径与此无关。

# concurrency - 进程 P0 将打印多少次“0”？

> ID：12069305
> 
> 赞同：0
> 
> 时间：2012-08-22T08:40:14.370
> 
> 标签：concurrency, operating-system, semaphore

下面的程序由3个并发进程和3个二进制信号量组成，信号量，初始化为S0=1 S1=0 S2=0

进程 P0：

```
while(1)
{
wait (S0);
print '0';
release (S1);
release (S2);
} 
```

流程 P1：

```
wait(S1);
release (S0); 
```

过程 P2：

```
wait(S2);
release (S0); 
```

处理 PO 打印 '0" 多少次？

(A) 至少两次 (b) 正好两次 (c) 正好三次 (d) 正好一次

在此我感到困惑的是，进程 P1 和 P2 将执行一次，或者它们将在执行一次后继续，因为它们没有像进程 P0 那样的 while 循环，如果它们只会执行一次，那么根据我的答案应该是（b） ，如果他们将再次执行，那么答案将是 (A)

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:10:48.870

最初`P0`将执行，因为只有`S0=1`. 它将打印单个 0。

现在 when`S1`和`S2`are 发布到`P0`那时它们中的任何一个都可以执行。

让我们假设 P1 执行并释放 S0（现在 S0 的值为 1）。

现在有两种可能`P0`或者`P2`可以执行。

让我们`P2`执行和释放`S0`，所以最后 P0 执行并打印 0（意味着两个 0），但如果`P0`在此之前执行，`P2`则总共会打印 3 个 0（一个在那个时候释放，`P0`然后再次执行）。`P2``S0``P0`

所以完美的答案是至少两个 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:44:14.643

解决方案如下：

1.  只有进程 P0 可以先执行。这是因为进程 P0 使用的信号量，即 S0 的初始值为 1。现在当 P0 调用等待 S0 时，S0 的值变为 0，这意味着 S0 已被 P0 占用。就 Process P1 和 P2 而言，当它们分别在 S1 和 S2 上调用 wait 时，它们无法继续进行，因为信号量已经被初始化为取 0，所以它们必须等到 S1 和 S2 被释放！

2.  P0 首先执行并打印 0。现在下一条语句释放 S1 和 S2！当 S1 被释放时，进程 P1 的等待结束，因为 S1 的值增加了 1 并被标记为未占用。P1 取 S1 并使 S1 为取。过程 P2 也是如此。

3.  现在，`only one of P1 or P2 can execute, because either of them can be in the critical section at a given time`.. 假设 P2 执行。它释放 S0 并终止。

4.  让 P1 执行下一步.. P1 启动 释放 S0 并终止。

5.  `Now only P0 can execute because its in a while loop whose condition is set to true, which makes it to run always.`P0 执行第二次打印 0 并释放 S1 和 S2。但是 P1 和 P2 已经终止，所以 P0 永远等待 S0 的释放。

这是第二个解决方案，它打印 0 三次：

1.  P0 启动，打印 0 并释放 S1 和 S2。

2.  让 P2 执行。P2 启动，释放 S0 并终止。此后只有 P0 或 P1 可以执行。

3.  让 P0 执行。第二次打印 0 并释放 S1 和 S2。此时只有 P1 可以执行。

4.  P1 启动，释放 S0，P1 终止。此时只有 P0 可以执行，因为它在条件设置为 true 的 while 循环中！

5.  P0 启动，第三次打印 0 并释放 S1 和 S2。然后它等待某人释放 S0，而这永远不会发生。

所以答案就变成了正好两倍或正好三次，也可以说是“ `atleast twice`”！

请告诉我我是否在任何地方错了！！

有关信号量的更多问题，请参阅[此](http://6004.mit.edu/Spring12/tutprobs/semaphores.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:59:46.550

P0 将首先执行，因为只有 S0=1。因此它将打印 0（第一次）。P0 也释放 S1 和 S2。由于 S1=1 且 S2=1，因此 P1 或 P2，其中任何一个都可以执行。让我们假设 P1 执行并释放 S0（现在 S0 的值 = 1）。请注意，P1 过程已完成。现在 S0=1 和 S2=1，因此 P0 可以执行或 P2 可以执行。让我们检查两个条件：-

1.  让我们假设 P2 执行，并释放 S0 并完成其执行。现在 P0 执行；S0=0 并打印 0（即第二个 0）。然后释放 S1 和 S2。但请注意，P1 和 P2 进程已经完成了它们的执行。同样，如果 P0 尝试执行，它会因为 S0=0 而进入睡眠状态。因此，打印“0”的最小次数为 2。

2.  现在，让我们假设 P0 执行。因此 S0=0，（由于等待（S0）），它将打印 0（第二个 0）并释放 S1 和 S2。现在只有 P2 可以执行，因为 P1 已经完成了它的执行，而 P0 因为 S0 = 0 不能执行。现在 P2 执行并释放 S0（即 S0=1）并完成它的执行。现在 P0 开始执行并再次打印 0（第三个 0）并释放 S1 和 S2（注意现在 S0=0）。P1 和 P2 已经完成了它的执行，因此 P1 再次轮到它，但由于 S0=0，它进入睡眠状态。并且可以唤醒 P0 的进程 P1 和 P2 已经执行完毕。因此，“0”被打印的最大次数为 2。

参考： http: [//www.btechonline.org/2013/01/gate-questions-os-synchronization.html](http://www.btechonline.org/2013/01/gate-questions-os-synchronization.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:21:24.560

阅读问题和代码我也会说（A）。我假设这些进程在完成任务之前不能被抢占。

它说初始状态是`S0=1` `S1=0` `S2=0`，并且根据我们所知道的`P1`并且`P2`将执行一次。

并发流程可能很复杂，但是我尝试描述流程，人们会发现我的想法有问题，没关系，我也是来学习的。

现在，您有几种情况会根据流程的顺序产生不同的结果。

```
P0 -> P1 -> P0 -> P2 -> P0 = Three times

P0 -> P1 -> P2 -> P0 = Twice

P0 -> P2 -> P1 -> P0 = Twice 
```

这给了我们至少两次的答案。

**编辑：**

所有这一切都是在 wait() 阻塞而 semaphore == 0 并且 release() 设置 semaphore = 1 的假设下进行的，否则代码将主要是疯狂的。

如果过程可以随时中断，那么事情就会变得有趣。

```
P0 starts out running because S0=1 at start
P0 print '0';
P0 release(S1);
-- here S1 may take over or not --
P0 release(S2);
-- here S2 may take over or not --
P0 goes back to wait(S0)
-- here P0 continues or if S1 *and* S2 have not run blocks --
-- it may also be that only S1 or S2 ran and now the other will run -- 
```

现在我试图找出一种方法来可视化事情的结果，但我没有找到一种很好的方法将它放入代码块中。

如果 S1 和 S2 都尽可能快地运行，因为信号量是二进制的并且只能处于两种状态中的一种，P0 只会运行两次，但是如果调度是不正当的，以至于延迟 S1 或 S2 直到 P0 过去wait() 再次 P0 将运行 3 次。

但我认为这个问题并不意味着有可中断的过程，它只是变得混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T08:48:21.037

我假设 wait() 减少信号量并在它变为 <= 0 时阻塞，而 release 增加计数器并唤醒下一个进程。

给定您的代码， P1 和 P2 执行一次（它们周围没有循环）。这意味着他们每个人都会触发一次 S0。由于 P0 在每次打印之前都在 S0 上等待，因此它最终会打印 '0' 两次。

要检查的另一件事是 S0 的初始状态，因为 P0 只有在 S0 为 0 时才会阻塞。根据您的陈述，情况就是这种情况。因此，答案是 P0 将*精确地*打印 0两次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-29T17:00:46.827

最初只有 P0 可以进入 while 循环，因为 S0 = 1，S1 = 0，S2 = 0。P0 首先打印 '0'，然后在释放 S1 和 S2 之后，P1 或 P2 将执行并释放 S0。所以 0 再次打印。

# php - 提供的密码无效 - Symfony2

> ID：12069310
> 
> 赞同：1
> 
> 时间：2012-08-22T08:41:03.937
> 
> 标签：php, symfony, doctrine-orm

我正在尝试创建一个登录表单，它将从数据库中获取用户。我阅读了一些教程，但我不能很好地理解安全性。我遵循[了这一点](http://symfony.com/doc/current/cookbook/security/entity_provider.html)，我所做的唯一区别是我从 User 类中删除了 salt 和 isActive 。我只是复制了其余部分，然后在数据库中创建了表并添加了一个用户和一个组 - 名称：admin，角色：ROLE_ADMIN 并在 user_group 表中列出了他们的 id-s。但无论我尝试什么，我都会遇到同样的错误 - 提供的密码无效。你能帮我解决这个问题吗？也许一些教程会有所帮助，尽管我阅读了大约 4-5 篇，但我仍然没有得到所有内容。

这是我的配置文件：

```
security:
   encoders:
      EM\MyFriendsBundle\Entity\User:
        algorithm:        sha1
        encode_as_base64: false
        iterations:       1

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

providers:
    administrators:
        entity: { class: EMMyFriendsBundle:User }

firewalls:
    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            login_path:  /login
            check_path:  /login_check

access_control:
    - { path: ^/admin, roles: ROLE_ADMIN } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:48:32.990

您需要在将密码保存到数据库之前对其进行编码。请参见：

[http://symfony.com/doc/current/book/security.html#book-security-encoding-user-password](http://symfony.com/doc/current/book/security.html#book-security-encoding-user-password)

# ruby-on-rails - Geocoder gem - 显示附近的其他模型

> ID：12069313
> 
> 赞同：2
> 
> 时间：2012-08-22T08:41:10.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-geocoder

正确的问题，我有两个模型，房屋和商店，当我进入我的视图展示时，我不仅想展示附近的所有房屋，还想展示商店，我不知道在我的控制器中放什么，但在我的看它对于房子来说是这样的，对于商店来说，如果我把类似的只打电话给商店，它会抛出一个错误，因为附近人的未定义函数..

```
#app/views/houses/show.html.erb

<h3>Houses</h3>
<ul>
<% for house in @house.nearbys(10) %>
  <li><%= link_to house.address, house %> (<%= house.distance.round(2) %> km)</li>
<% end %>
</ul> 
```

仅适用于一种型号，但适用于其他型号...我需要您的帮助

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T02:45:20.053

.near 方法是一个类方法，所以你可以这样做：

Shop.near(@house.address)

这将返回房屋附近的商店（假设您正在通过一个名为“地址”的属性/方法为您的房屋模型进行地理编码）。您还可以使用来自@house 的坐标，并输入距离您想要的坐标多远作为第二个参数。

Shop.near([@house.latitude, @house.longitude], 20)

将返回房屋地理坐标 20 英里范围内的所有商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:21:31.047

[http://media.railscasts.com/assets/episodes/videos/273-geocoder.mp4](http://media.railscasts.com/assets/episodes/videos/273-geocoder.mp4)

# ios - iOS 和 Xcode：自定义框架链接错误、未定义符号

> ID：12069320
> 
> 赞同：3
> 
> 时间：2012-08-22T08:42:01.657
> 
> 标签：ios, xcode, frameworks

我使用自定义的静态框架来打包我的模块，比如A、B、C...，而A是基础层，所以B&C依赖于A，它们都在A中使用了一个名为“Semaphore”的符号。

现在我将A、B、C添加到我的App“DemoX”中，DemoX只直接使用B&C，链接时出错。

> 已更改：DemoX 依赖于直接使用 A 的静态库“libM”。

```
Undefined symbols for architecture i386:

"_OBJC_CLASS_$_Semaphore", referenced from:
      objc-class-ref in libM.a
      objc-class-ref in B
      objc-class-ref in C
ld: symbol(s) not found for architecture i386 
```

实际上，我使用“nm”命令来显示 A 中的符号，它有“_OBJC_CLASS_$_Semaphore”。那么，如何解决这个问题呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:14:14.823

我解决了这个问题。

都是我的错，这个错误只发生在发布中，因为我编译A时“默认隐藏符号”是的，所以其他人看不到A的所有符号。将其设置为 NO，一切都很好。

# html - 2 个静态高度之间的 div 元素的 100% 高度

> ID：12069325
> 
> 赞同：0
> 
> 时间：2012-08-22T08:42:12.893
> 
> 标签：html, css, height

我正在尝试使 div 具有 100% 的高度。这总是让人头疼...我希望我的#wrapper 是 100% 并且我的#middle 也是..

```
<div id="wrapper" style="margin-left:auto; margin-right:auto; width:900px;">
    <div id="top" style="height: 100px;width:inherit;">
        This stays top, with static height.
    </div>
    <div id="middle" style="width:inherit;">
        This should take all space that is left in height...
    </div>
    <div id="footer" style="height:50px;width:inherit;">
        This stays in bottom, with static height
    </div>
</div> 
```

[JsFiddle 演示](http://jsfiddle.net/6Xgsz/9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:10:53.633

使用可以在没有 JS 的情况下使用绝对定位和一个棘手的`overflow: auto`：

```
html, body {
    height: 100%; 
}
#wrapper {
    position: relative;
    margin-left:auto; 
    margin-right:auto; 
    width:500px;
    height: 100%;
}
#top {
    height: 100px;
    width: 100%;
    background: blue;
}
#middle {
    position:absolute;
    bottom: 50px;
    top: 100px;
    overflow: auto;
    width: 100%;
    background: red;
}
#footer {
    position:absolute;
    bottom: 0px;
    height:50px;
    width: 100%;
    background: green;
}
```

```
<div id="wrapper">
    <div id="top">
        This stays top, with static height.
    </div>
    <div id="middle">
        This should take all space that is left in height...
    </div>
    <div id="footer">
        This stays in bottom, with static height
    </div>
</div>
```

注意：使用`width: 100%;`代替`width: inherit;`，IE7 不支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:06:28.700

嗯，如果我是正确的，你可以尝试使用 javascript 或 jquery。不要忘记链接 jQuery。

```
<script type="text/javascript" language="javascript">
$(document).ready(function()
{   
    //minus 150 because > top = 100px, footer = 50px == 150px
    //offsetHeight gives you the height in pixels from the div "wrapper"
    newHeight = document.getElementById('wrapper').offsetHeight - 150;

    //updates the height of the div #middle
    $("#middle").css({'height' : newHeight});
});
</script> 
```

它对我有用^^

# wpf - 加载 MahApps.Metro.Controls 的 WPF 设计器错误 (System.NullReferenceException)

> ID：12069326
> 
> 赞同：1
> 
> 时间：2012-08-22T08:42:14.073
> 
> 标签：wpf, reactiveui, mahapps.metro

加载设计器时出现未处理的异常（VS2010）

这些是细节。

```
System.NullReferenceException
Object reference not set to an instance of an object.
at MahApps.Metro.Controls.TextboxHelper.TextBoxLoaded(Object sender, RoutedEventArgs e)
at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
at System.Windows.BroadcastEventHelper.BroadcastEvent(DependencyObject root, RoutedEvent routedEvent)
at System.Windows.BroadcastEventHelper.BroadcastLoadedEvent(Object root)
at MS.Internal.LoadedOrUnloadedOperation.DoWork()
at System.Windows.Media.MediaContext.FireLoadedPendingCallbacks()
at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

我努力了

--注释掉所有文本框

--注释掉我的视图模型构造函数中的所有代码

-- 在 MainWindow 构造函数中注释掉 MainWindowVieWModel 的创建...

我很困惑。。

代码...

```
public partial class MainWindow : MetroWindow
{
    public MainWindowViewModel ViewModel { get; protected set; }

    public MainWindow()
    {
        ViewModel = new MainWindowViewModel(new AppModel());
        InitializeComponent();
    }

public class AppModel : ReactiveValidatedObject
{
    public ReactiveCollection<SheetModel> CompletedSheets { get; protected set; }

    public void RefreshData()
    {
        List<SheetModel> sheets = DataLayer.LoadData();

        CompletedSheets = new ReactiveCollection<SheetModel>();

        foreach (var sheetModel in sheets)
        {
            CompletedSheets.Add(sheetModel);
        }
    }

    public AppModel()
    {
        CompletedSheets = new ReactiveCollection<SheetModel>();
    } 
```

主窗口视图模型的构造函数是空的，所以那里不应该有任何问题。

主窗口Xaml...

```
<Controls:MetroWindow
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
mc:Ignorable="d" 
x:Class="TimeSheet.MainWindow" 
Title="MainWindow" 
x:Name="Window"
Height="270" 
MinWidth="490"
Width="600"
xmlns:local="clr-namespace:TimeSheet"
ShowTitleBar="False" WindowStartupLocation="CenterScreen" 
DataContext="{Binding ViewModel, ElementName=Window}">

<Controls:MetroWindow.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
            <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
        </ResourceDictionary.MergedDictionaries>

        <DataTemplate x:Key="CompletedBlockTile">
            <StackPanel Orientation="Vertical" Margin="10,0,0,0">
                <TextBlock Text="{Binding Date}" FontWeight="Bold" FontFamily="Segoe UI" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="TaskTemplate">
            <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MinWidth="80px"/>
                    <ColumnDefinition Width="50px" />
                    <ColumnDefinition Width="40px"/>
                    <ColumnDefinition Width="40px"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding Description}"  Height="25.3" Margin="0" HorizontalAlignment="Stretch"/>
                <TextBlock Grid.Column="1" Text="{Binding Duration}" Margin="0,0,0,0" Height="25.3" Width="45.625"/>
                <Button Grid.Column="2" Content="&gt;&gt;" HorizontalAlignment="Right" Width="38" Command="{Binding ReStartCommand}"/>
                <Button Grid.Column="3" Content="STOP" VerticalAlignment="Top" Margin="0,0,0,0" Command="{Binding StopCommand}" HorizontalAlignment="Right" Width="35"/>
            </Grid>
        </DataTemplate>

        <BitmapImage x:Key="SearchImage" UriSource="Images/blue-37.png" />
    </ResourceDictionary>

</Controls:MetroWindow.Resources>

<Controls:MetroWindow.WindowCommands>
    <Controls:WindowCommands>
        <Button x:Name="thisButton">
            <StackPanel Orientation="Horizontal">
                <StackPanel Orientation="Horizontal">

                    <Label Margin="0,0,55,0" Content="09:00"/>
                    <Label Margin="0,0,5,0" Content="Friday 20th July 2012"/>

                    <TextBox Controls:TextboxHelper.Watermark="search"
                                 Controls:TextboxHelper.ClearTextButton="True"
                                 VerticalAlignment="Top"
                                 HorizontalAlignment="Left"
                                 Width="154.002" />

                    <Button Style="{DynamicResource ChromelessButtonStyle}" Click="Button_Click">
                        <Image Source="{StaticResource SearchImage}" Width="20"/>
                    </Button>

                </StackPanel>
            </StackPanel>
        </Button>
    </Controls:WindowCommands>
</Controls:MetroWindow.WindowCommands>

<DockPanel Margin="0,0,0,0" >
    <DockPanel DockPanel.Dock="Left" Margin="0,0,0,0" Width="176.625" >

        <ListBox Background="Transparent"
                 BorderBrush="Transparent"
                 Margin="0,30,0,0" 
                 ItemsSource="{Binding CompletedSheets}" 
                 ItemTemplate="{DynamicResource CompletedBlockTile}"
                 SelectedItem="{Binding SelectedTimeSheet}"/>

    </DockPanel>
    <DockPanel DockPanel.Dock="Right" >
        <Grid Margin="0,30,0,0" VerticalAlignment="Top" DockPanel.Dock="Top">
            <Grid Margin="0,0,14,0.805">

                <local:TextBoxChangeExt
                    MinWidth="200" 
                         Controls:TextboxHelper.Watermark="Task Name"
                         Controls:TextboxHelper.ClearTextButton="True" 
                         d:LayoutOverrides="Height" 
                         Margin="8,0,70,0" 
                         Background="{x:Null}"
                    Text="{Binding NewTaskName}">

                </local:TextBoxChangeExt>

                <Button HorizontalAlignment="Right" 
                        Width="57" 
                        d:LayoutOverrides="HorizontalAlignment, Height" 
                        Content="Start"
                        Command="{Binding StartCommand}" IsEnabled="{Binding StartNewEnabled}"/>

            </Grid>
        </Grid>
        <Grid DockPanel.Dock="Bottom">
            <ListBox Margin="8,8,5,5" 

                     BorderBrush="{x:Null}" 
                     ItemTemplate="{DynamicResource TaskTemplate}"
                     ItemsSource="{Binding SelectedTimeSheet.Tasks}"
                     HorizontalContentAlignment="Stretch"
                     />
        </Grid>

    </DockPanel>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:36:21.987

我很确定这是一个错误。我遇到了同样的错误，当跟踪堆栈跟踪到我的 ViewModel 中的行时，我看到我正在适当地检查 null。一切似乎都在运行时工作，但我认为这是在设计器中使用 iCommand 的实现时的错误。

如果您发现自己的原因有所不同，请告诉我们。

我也在使用 VS 2010。

# php - 将mysql返回的值存储在php变量中

> ID：12069327
> 
> 赞同：0
> 
> 时间：2012-08-22T08:42:19.867
> 
> 标签：php, mysql

对于下面的代码，我试图在 gen 中获取性别值，然后将其存储在 $gender 中，但我得到了错误的输出。我得到`Resource id #8`的是我的输出，而不是男性或女性。我应该怎么做才能获得性别值并 `$gender`使用最少的编码将其存储起来。

```
$gender=mysql_query("SELECT `gender` as gen FROM `register` WHERE `reg_id` = 'reg252'");
echo $gender; 
```

我可以做的一种方法是通过以下方式调用 -

```
$gender=mysql_query("SELECT `gender` FROM `register` WHERE `reg_id` = 'reg252'");
while($erow = mysql_fetch_array($gender))
{
    echo $erow['gender'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:44:19.740

```
list($gender) = mysql_fetch_row(mysql_query("SELECT `gender` as gen FROM `register` WHERE `reg_id` = 'reg252'")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:44:27.757

你的 SQL 中有

```
SELECT `gender` as gen ... 
```

当你输出`echo $erow['gender'];`

所以要么输出`echo $erow['gen'];`，要么`SELECT gender FROM ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:46:38.870

您将列作为 gen 返回，因此您必须检查 gen `echo $erow['gen'];`

一般来说，请查看 PeeHaa 的评论

# wpf - 在wpf中检测自相交折线

> ID：12069328
> 
> 赞同：2
> 
> 时间：2012-08-22T08:42:20.697
> 
> 标签：wpf, intersection, polyline

我正在尝试编写一种方法来确定折线是否自相交。我已经在这个网站上找到了一些类似的答案，但没有一个符合我的条件。这里我的折线是用一些逻辑动态创建的。

是否有任何 wpf 内置功能可以做到这一点？如果不是，那么这样做的逻辑是什么？

# actionscript-3 - flex4在addEventListener中调用带有动态后缀的函数

> ID：12069329
> 
> 赞同：0
> 
> 时间：2012-08-22T08:42:24.033
> 
> 标签：actionscript-3, apache-flex, dynamic, flex4, addeventlistener

我想根据函数参数从 addEventListener 内部动态调用函数名。

打电话`newMod("moduleA", "A");`但是我收到错误`TypeError: Error #1006: value is not a function.`

关于如何动态调用此函数的任何建议。我已经看到了一些使用 an 的答案，`instance[function]()`但不确定它如何适用于听众，

```
public function newMod(mdLd,evtTyp,param):void {
   info = ModuleManager.getModule(mdLd);
   var mevth:String =  ("modEventHandler"+(evtTyp));
   info.addEventListener(ModuleEvent.READY, function(e:ModuleEvent){
                this[mevth](e, param)});
   info.load(null, null, null, moduleFactory);
}
private function modEventHandlerA(e:ModuleEvent):void {
    vg1.addElement(info.factory.create() as IVisualElement);
    } 
```

[编辑] 看起来像是改变了对`this[mevth]()`作品的调用，但我似乎无法根据需要传递额外的参数，即`this[mevth](parm)`欢迎任何建议。

我还更新了侦听器以包含一个函数调用，但仍然没有乐趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:34:33.157

当您创建闭包时，“this”并不指向真实实例“this”。你可以写这样的东西

```
public function newMod(mdLd,evtTyp,param):void {
   info = ModuleManager.getModule(mdLd);
   var self:Object = this;
   var mevth:String =  ("modEventHandler"+(evtTyp));
   info.addEventListener(ModuleEvent.READY, function(e:ModuleEvent){
                self[mevth](e, param)});
   info.load(null, null, null, moduleFactory);
}

... 
```

但是我真的不建议你写这样的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:30:32.683

要遮盖您的评论：

函数闭包意味着函数会记住创建它的上下文。在您的代码中，以下行创建了一个闭包：

```
info.addEventListener(ModuleEvent.READY, function(e:ModuleEvent){
            this[mevth](e, param)}); 
```

事件处理函数是在包含方法的类的上下文中创建的`public function newMod(mdLd,evtTyp,param):void`，因此您的处理程序可以访问该类的所有成员。这包括在周围方法中声明的变量、类的私有变量/方法和类的整个继承链中的受保护变量/方法。

`this`正如*Ivan Dyachenko*所写的那样，问题在于您的处理程序函数实际上是顶级类的一个实例`Function`。因此，如果您尝试`this`在 Function 对象中调用方法，它将与在任何其他对象中调用方法相同 -`this`指的是对象。在您的情况下，这将是 Function 对象。但是您的函数没有您要调用的方法。

此外，您的代码还会遇到另一个问题。因为您创建了内联事件处理程序 - 直接作为`addEventListener()`您的参数，以后将无法删除事件侦听器。您应该使用[此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/IEventDispatcher.html#addEventListener%28%29)所述的`useWeakReference`参数 on或将处理函数存储在变量中以保存对其的引用，以便稍后使用.`addEventListener()``removeEventListener()`

# c++ - Perl 正则表达式中的“~”标记有什么用？

> ID：12069330
> 
> 赞同：1
> 
> 时间：2012-08-22T08:42:27.560
> 
> 标签：c++, regex, boost

我在 C++ 中使用 boost 库进行正则表达式。`~`Perl 正则表达式中的标记有什么用？

它表示什么？例如

```
~myName 
```

或者

```
ab~dc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:47:56.810

这是一个正常字符，逐字匹配，没有特殊含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:49:51.753

AFAIK，~ 在 perl 正则表达式中没有特殊作用，所以 ~myName 真的是“~myName”。

# json - 仅在设备 HTC Desire HD A9191 上出现 Gson 错误

> ID：12069332
> 
> 赞同：0
> 
> 时间：2012-08-22T08:42:35.887
> 
> 标签：json, exception, gson, android

我使用以下代码将我的 Json 字符串转换为对象：

```
Gson gson = new Gson();             
EntPocketPCDataCollection entPocketPCDataCollection = gson
            .fromJson(strJson,
            EntPocketPCDataCollection.class); 
```

我有这些课程：

```
public class EntPocketPCDataCollection extends ArrayList<EntPocketPCData> {

    private static final long serialVersionUID = 1L;

} 
```

和

```
public class EntPocketPCData {

    private String strFormat = "Can not convert %s to %s value for column %s";

    public String Command;
    public EntColumn[] Columns;
    public List<List<String>> RowsList;
    public String TypeName;
} 
```

这些代码行适用于 Emulator、Asus 平板电脑、galaxy note、galaxy s 和 HTC Sensation，没有任何错误。但我仅在具有 Android 2.2 的 HTC Desire HD A9191 设备上收到以下错误。

为什么？

```
com.google.gson.JsonParseException: The JsonDeserializer com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter@47751a08  
failed to deserialized json object [{"Command":"Insert","Columns":[{"Name":"Id","Type":"System.Int32"}, 
{"Name":"Caption","Type":"System.String"},{"Name":"Category","Type":"System.String"}, 
{"Name":"DefaultValue","Type":"System.String"},{"Name":"Description","Type":"System.String"}, 
{"Name":"Name","Type":"System.String"},{"Name":"Val1","Type":"System.String"},{"Name":"Val2","Type":"System.String"}, 
{"Name":"Val3","Type":"System.String"},{"Name":"Val4","Type":"System.String"},{"Name":"ValDesc1","Type":"System.String"}, 
{"Name":"ValDesc2","Type":"System.String"},{"Name":"ValDesc3","Type":"System.String"}, 
{"Name":"ValDesc4","Type":"System.String"},{"Name":"Visible","Type":"System.String"}, 
{"Name":"order","Type":"System.Int32"}],"RowsList":[[7,"تعداد رقم اعشار","Common","0","تعداد رقم  
اعشار","Common_DecimalDigits","","","","","","","","","false",1],[8,"فلدر مستندات برنامه","Common","","مستندات و عکس هاي  
دريافتي از وب سرويس در اين فلدر ذخيره مي شود","Common_DocumentsFolder","","","","","","","","","false",1],[9,"بازه زماني همسان سازي  
سريع","DataExchange","-1","بازه زماني همسان سازي سريع","DataExchange_SyncPartial_Interval","","","","","","","","","false",1], 
[10,"بازه زماني همسان سازي کامل","DataExchange","-1","بازه زماني همسان سازي  
کامل","DataExchange_SyncFull_Interval","","","","","","","","","false",1],[11,"بازه زماني ارسال سفارشات","DataExchange","2","بازه  
زماني ارسال سفارشات","DataExchange_Send_Interval","","","","","","","","","false",1],[12,"آدرس وب سرويس  
شرکت","WebService","http://test/MobileService/Service.asmx","آدرس وب سرويس داخلي شرکت جهت تبادل اطلاعات با  
سرور","WebService_URL","","","","","","","","","false",1],[13,"آدرس وب سرويس  
","WebService","http://test/Service.asmx","آدرس وب سرويس  جهت دريافت  
قفل","WebService_URL","","","","","","","","","false",1],[15,"شماره سرور","SMS","","شماره  
سرور","SMS_Server_NO","","","","","","","","","false",1],[17,"ارسال پيامک","SMS","0","نحوه ارسال  
پيامک","SMS_SendingOption","0","1","2","","عدم ارسال پيامک","ارسال پيامک با سوال از کاربر","ارسال پيامک بدون سوال از کاربر","","false",1], 
[18,"بازه زماني دريافت مکان جاري کاربر","GPS","2","بازه زماني دريافت مکان جاري کاربر","GPS_Interval","","","","","","","","","false",1], 
[19,"وضعيت مکان يابي","GPS","1","وضعيت مکان يابي","GPS_StartOption","0","1","2","","خاموش","روشن","روشن در غير اينصورت خروج از  
برنامه","","false",1],[20,"نحوه ارسال پيامک جي پي اس","GPS","false","هنگام ارسال پيامک درخواست اگر اين مقدار فعال باشد، چهار نقطه آخر دريافتي نيز با  
پيامک ارسال مي شود","GPS_SendSms","","","","","","","","","false",1],[21,"بازه ارسال پيامک جي پي اس","GPS","-1","اگر تنظيمات ارسال پيامک  
جي پي اس فعال باشد بازه زماني ارسال پيامک بر حسب دقيقه را مشخص مي کند","GPS_SmsInterval","","","","","","","","","false",1],[24,"نام کاربري  
فعالسازي ","Security","1","نام کاربري فعالسازي ","Security_UserName","","","","","","","","","false",1],[25,"کلمه عبور  
فعالسازي ","Security","","کلمه عبور فعالسازي ","Security_Password","","","","","","","","","false",1],[26,"مشخصه شرکت دوره  
مالي","Common","2012","مشخصه شرکت دوره مالي","Common_ScuCmpyDurID","","","","","","","","","false",1],[27,"مشخصه عمليات ثبت  
سفارش","Common","3","مشخصه عمليات ثبت سفارش","Common_InvOperationIDOrder","","","","","","","","","false",1],[28,"مشخصه  
عمليات اعلام برگشتي","Common","53","مشخصه عمليات اعلام برگشتي","Common_InvOperationIDBack","","","","","","","","","false",1], 
[29,"مشخصه مرکز هزينه","Common","10","مشخصه مرکز هزينه","Common_TotCostCenterID","","","","","","","","","false",1],[30," 
مشخصه ويزيتور","Common","8","مشخصه ويزيتور","Common_HrsEmployeeID","","","","","","","","","false",1],[32,"مقدار تعيين کننده فعال  
بودن برنامه توسط شرکت محلي","Security","true","مقدار تعيين کننده فعال بودن برنامه توسط شرکت  
محلي","Security_ActivationCompany","","","","","","","","","false",1],[33,"فعال بودن پروتکل پرينتر","Printer","false","فعال بودن پروتکل  
پرينتر","Printer_Protocol","","","","","","","","","true",1],[34,"نام پرينتر","Printer","","نام  
پرينتر","Printer_Name","","","","","","","","","true",1],[36,"آخرين شماره سريال ثبت شده سندها","Common","5","آخرين شماره سريال ثبت شده  
سندها","Common_Serial","","","","","","","","","false",1],[37,"آدرس سرور اف تي پي جهت دريافت فايلها","Ftp","ftp://1.2.3.4","آدرس سرور  
اف تي پي جهت دريافت فايلها","Ftp_URL","","","","","","","","","false",1],[38,"نام کاربر سرور اف تي پي","Security","ftpuser","نام کاربر  
سرور اف تي پي","Security_FtpUserName","","","","","","","","","false",1],[39,"رمز عبور سرور اف تي پي","Security","Symbian1","رمز  
عبور سرور اف تي پي","Security_FtpPassword","","","","","","","","","false",1],[40,"آدرس وب سرويس دريافت  
نقاط","WebService","http://test/MobileService/Service.asmx","آدرس وب سرويس دريافت موقعيت  
ويزيتور","WebService_GpsPointsURL","","","","","","","","","false",1],[41,"آدرس داخلي وب  
سرويس","WebService","http://test/MobileService/Service.asmx","آدرس داخلي وب  
سرويس","WebService_LanURL","","","","","","","","","false",1],[42,"کنترل نمايش موجودي","Common","true","کنترل نمايش  
موجودي","Common_ShowStockQty","","","","","","","","","false",1],[43,"فيلتر کردن مشتري ها بر اساس فاصله","Common","false","مشترياني  
که در فاصله مشخصي از ويزيتور هستند نشان داده مي شوند","Common_FilterNearCustomers","","","","","","","","","false",1],[44,"نمايش مشتريان  
اطراف در اين فاصله به متر","Common","50","فقط مشترياني که در اين فاصله از ويزيتور هستند نمايش داده مي  
شوند","Common_NearCustomersDistance","","","","","","","","","false",1],[45,"نمايش اعتبارسنجي مشتري","Common","true","اطلاعات  
اعتبارسنجي و صورت وضعيت مشتري نمايش داده مي  
شود","Common_ShowCustomerCredit","","","","","","","","","false",1]],"TypeName":"EntPreferences"}] given the type class  
org.order.dataModel.transferTools.EntPocketPCDataCollection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:00:38.327

我们曾经在 Desire HD 上遇到过 Gson 的问题，因为在运行时使用的不是嵌入在应用程序中的 gson.jar 文件，而是 HTC 随 ROM 一起提供的过时版本。我想，你也有类似的问题。一种可能的解决方法是使用 jarjar ( [http://code.google.com/p/jarjar/](http://code.google.com/p/jarjar/) ) 来确保您的应用程序使用您的 gson jar。

**编辑** 这里很可能是同样的问题：[GSON + HTC Desire: Conflict。可能的解决方案 jarjar.jar 导致错误](https://stackoverflow.com/questions/10266143/gson-htc-desire-conflict-possible-solution-jarjar-jar-causes-error?rq=1)

# android - 在属性文件中设置颜色值

> ID：12069335
> 
> 赞同：0
> 
> 时间：2012-08-22T08:42:53.240
> 
> 标签：android, colors, attributes

我需要了解如何设置我在`color.xml`文件中定义的颜色`attrs.xml`。

例如在 color.xml 我使用`<color name="mypreferencesummary">#e27229</color>`

在 attrs.xml 我使用`<attr name="mypreferencesummary" format="reference|color" />`

当我调用它时，我得到了`android.view.InflateException: Binary XML file line #43: Error inflating class <unknown>`例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:01:49.883

它实际上是从那些 xml 中发生的吗？当您创建自定义视图并在 xml 布局中使用它时，该错误似乎是缺少构造函数错误。

# python - Django 是否有相当于 Rails 的“捆绑安装”？

> ID：12069336
> 
> 赞同：11
> 
> 时间：2012-08-22T08:42:54.980
> 
> 标签：python, django

我喜欢 Rails 项目的一件事是，当部署到远程服务器时，如果一切设置正确，您可以这样做：

```
$: bundle install 
```

系统将安装运行项目所需的各种依赖项（ruby gems）。

Python/Django 有类似的东西吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T08:51:56.260

您可以冻结需求。这会生成项目所需的所有 Python 模块的列表。我相信`bundle`在概念上是相似的。

例如：

```
virtualenv --no-site-packages myproject_env # create a blank Python virtual environment
source myproject_env/bin/activate # activate it
(myproject_env)$ pip install django # install django into the virtual environment
(myproject_env)$ pip install other_package # etc.
...
(myproject_env)$ pip freeze > requirements.txt 
```

最后一行生成一个文本文件，将所有安装在您的自定义环境中的包。您可以使用该文件在其他服务器上安装相同的要求：

```
pip install -r requirements.txt 
```

当然你不需要使用`pip`，你可以手动创建需求文件；它没有任何特殊的语法要求。每行只有一个包和（可能）版本标识符。这是一个带有一些额外包的典型 django 项目的示例：

```
Django==1.4
South==0.7.4
Werkzeug==0.8.3
amqplib==1.0.2
anyjson==0.3.1
celery==2.5.1
django-celery==2.5.1
django-debug-toolbar==0.9.4
django-extensions==0.8
django-guardian==1.0.4
django-picklefield==0.2.0
kombu==2.1.4
psycopg2==2.4.5
python-dateutil==2.1
six==1.1.0
wsgiref==0.1.2
xlwt==0.7.3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T08:48:59.037

最接近的可能是[virtualenv](http://pypi.python.org/pypi/virtualenv/)、[pip](http://www.pip-installer.org/en/latest/index.html)和[需求文件](http://www.pip-installer.org/en/latest/requirements.html)。使用这 3 个成分很容易编写一个简单的引导脚本。

更苛刻和更复杂的是[扩建](http://www.buildout.org/)。但我只会在 virtualenv 和 pip 不够用的情况下才去做。

如果您使用[结构](http://docs.fabfile.org/en/1.4.3/index.html)和可选[美食](https://github.com/sebastien/cuisine)扩展此方法，您的项目部署已经自动化。查看这些链接以获取更多信息：

*   [http://www.caktusgroup.com/blog/2010/04/22/basic-django-deployment-with-virtualenv-fabric-pip-and-rsync/](http://www.caktusgroup.com/blog/2010/04/22/basic-django-deployment-with-virtualenv-fabric-pip-and-rsync/)
*   [http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/](http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/)
*   [http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/](http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/)

# jquery - jquery对话框确认后如何隐藏行

> ID：12069337
> 
> 赞同：0
> 
> 时间：2012-08-22T08:43:00.690
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我在桌子上有一个@Html.Actionlink (....)。我正在显示一个用于确认的 jquery 对话框。一切正常。但是我想在用户单击“继续”并且链接操作返回“真”后隐藏该行。

我正在使用以下 jquery 代码。

```
var unapproveLinkObj;
    // delete Link
    $('.unapprove-link').click(function () {
        unapproveLinkObj = $(this);  //for future use
        $('#unapprove-dialog').dialog('open');
        return false; // prevents the default behaviour
    });

    $('#unapprove-dialog').dialog({
        autoOpen: false, width: 400, resizable: false, modal: true, 
        buttons: {
            "Continue": function () {
                $.post(unapproveLinkObj[0].href, function (data) {  //Post to action
                    if (data == '<%= Boolean.TrueString %>') {

                      // I want to hide the row here.....

                    }
                    else {
                        //Display Error
                    }
                });
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    }); 
```

有什么方法可以刷新页面，或者可能只是隐藏行而不刷新..？？

编辑：这是 HTML

```
 @foreach (var i in Model)
{
    <tr class="grtr">
        <td>@i.CustomerName</td>
        <td>@i.BranchName
        <br />
        @i.Address
        </td>

        <td>@i.PostCode</td>
        <td>@i.City</td>
        <td>@i.Telephone</td>

            @if (!string.IsNullOrEmpty(i.Latitude))
            {
                <td>Yes</td>
            }
            else
            {
                <td>No</td>
            }
            @if (!string.IsNullOrEmpty(i.Longitude))
            {
                <td>Yes</td>
            }
            else
            {
                <td>No</td>
            }

        <td>@i.IsClaimed</td>
        <td>@Html.ActionLink("Approve", "Approve", "Location", new { id = @i.ID }, new 
       {
           @class="unapprove-link"

       })</td>
        <td>
        @Html.ActionLink("Delete", "Delete", "Location", new { id = @i.ID }, new {@class="delete-link"})

       </td>
        <td>Map</td>
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:54:56.390

据我了解，您的链接位于 a 内，`<td>`并且您想隐藏包含该 td 的那一行，并且您将锚对象存储在`unapproveLinkObj`

因此，隐藏包含该`unapproveLinkObj`对象的那一行。你可以试试

```
unapproveLinkObj.parents('tr').hide(); 
```

或者如果想刷新页面，你可以试试

```
location.reload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:40:24.237

```
if (data == '<%= Boolean.TrueString %>') {

       // I want to hide the row here.....
       $(".grtr").hide(); // access the row contents    

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:05:07.483

`continue`考虑到如果用户点击尝试时没有错误，则属于以下条件

```
if (data == '<%= Boolean.TrueString %>') {

       // I want to hide the row here.....
       $("table").hide(); // table is the id or class to access the table contents    

} 
```

# android - 使 DialogFragment 适合图像大小

> ID：12069338
> 
> 赞同：2
> 
> 时间：2012-08-22T08:43:06.230
> 
> 标签：android, android-viewpager, android-dialogfragment

我有一个带有 ViewPager 的 DialogFragment，它显示了一些图片。问题是顶部有一条奇怪的黑色条纹，并且这些图片变形了。

这是我目前拥有的，正如你所看到的，图片看起来不太好，对话框顶部有一条奇怪的黑色条纹。

![在此处输入图像描述](../Images/d7446b5f5c6b109d77ea67bcc2a06e6b.png)

这是它应该看起来的样子，没有黑色条纹，并且图片适合屏幕的宽度。

![在此处输入图像描述](../Images/b81471ede398ecc38082ddd7daedb4c8.png)

我怎么能这样做？

提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T18:20:03.633

要摆脱顶部的黑框，请尝试`DialogFragment.setStyle(int style, int theme)`在您的方法中调用该方法`DialogFragment.onCreate(Bundle savedInstanceState)`，例如`setStyle(DialogFragment.STYLE_NO_TITLE, 0)`or `setStyle(DialogFragment.STYLE_NO_FRAME, 0)`。

我也遇到了像你得到`DialogFragment`一定宽度的问题。my的`layout_width`值`DialogFragment`（在 my`DialogFragment`的 xml 布局文件中指定）似乎在某处被覆盖，有时 my`DialogFragment`会扩展，有时会根据内容缩小。我知道有点技巧，但我能想到的最好的`getDialog().getWindow().setLayout(int width, int height)`方法是在我的方法中调用该方法`DialogFragment.onResume()`，例如`getDialog().getWindow().setLayout(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)`.

然后调整您的图像大小以适合您的`DialogFragment`，请使用`ImageView.setScaleType(ImageView.ScaleType scaleType)`该线程中其他答案所暗示的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:41:57.947

您可以设置 imageview`android:scaleType="centerCrop"`或者只是将 viewpager 和图像的高度设置为 wrap_content。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:06:01.697

`android:adjustViewBounds="true"`你应该在你的 imageView 中设置属性

# emacs - 桌面保存模式不保存的问题

> ID：12069341
> 
> 赞同：0
> 
> 时间：2012-08-22T08:43:11.303
> 
> 标签：emacs, save

最近我遇到了桌面保存模式的问题，它实际上不会保存我的桌面。在回显栏中，它显示“保存桌面时出错...”在输入 no 后显示“正在打开输出文件：没有这样的文件或目录，然后给出文件路径的位置”。保存 .emacs.desktop 文件然后重新启动 emacs 后，我注意到它正在将缓冲区位置保存在该文件中，但没有加载该文件。谢谢。此外，我不确定是什么导致了这种情况的发生，因为它在几周前就开始工作了，而且没有任何改变应该有所作为。

我在桌面模式下的 .emacs 中唯一拥有的是

```
(desktop-save-mode 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:07:04.727

查看 desktop.el [here](http://web.mit.edu/ghudson/dev/third/emacs/lisp/desktop.el)的代码，看起来错误从 冒泡`desktop-kill`，当您退出 Emacs 时运行。我要尝试的第一件事是检查它尝试保存桌面的目录是否正常。

查看 中的代码，它只会在变量非零`desktop-kill`时尝试做任何事情。`desktop-dirname`但这只有在您`M-x desktop-save`第一次运行时才会设置：您确定它设置为合理的吗？要快速检查其值，您可以键入`M-: desktop-dirname RET`，它应该在消息区域中显示为字符串。

如果目录是合理的（目录存在并且您可以写入它......），那么我不确定。您可能需要提供更多信息才能获得解决方案，而对于 StackOverflow 来说，这是否是一个理想的问题还不是很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T06:26:42.870

我应该冒险通过单击文件夹`addpm.exe`在Windows 启动手册中创建快捷方式来获得此错误。`...\emacs-version\bin\`

您可以进一步修改快捷方式。转到它的`property->shortcut`选项卡，您会发现`Target`具有类似 的值`...\emacs-version\bin\runemacs.exe`，而`Start in`是无效的。尝试填写`Start in`对应的文件夹`...\emacs-version\bin`（其实大多数目录都可以，只是不要留空），然后一切都很好。尽管如此，我仍然不清楚这背后的机制。

或者您总是可以手动创建自己的快捷方式，只需确保目标是`runemacs.exe`，而不是任何其他 exe 文件。

# java - 在java中查找两个给定日期之间的所有月份名称

> ID：12069342
> 
> 赞同：11
> 
> 时间：2012-08-22T08:43:16.993
> 
> 标签：java

我需要两个给定日期之间的所有月/年名称。我只需要在 java 上输出这个。

例子 ：

```
Input Date:

    date 1- 20/12/2011 
    date 2- 22/08/2012

Now ,my expected result should be :- 

        Dec/2011
        Jan/2012
        Feb/2012
        Mar/2012
        Apr/2012
        May/2012
        Jun/2012
        Jul/2012
        Aug/2012 
```

任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T09:12:18.500

使用 Joda-Time（由于未指定，我*假设*您至少可以看看 joda time 是什么）：

```
 LocalDate date1 = new LocalDate("2011-12-12");
 LocalDate date2 = new LocalDate("2012-11-11"); 
 while(date1.isBefore(date2)){
     System.out.println(date1.toString("MMM/yyyy"));
     date1 = date1.plus(Period.months(1));
 } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T08:44:52.903

您可以简单地使用[Calendar 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)并通过在每次迭代中添加一个月来从一个日期迭代到另一个日期`using myCalendar.add(Calendar.MONTH, 1);`。

Calendar 类负责避免溢出并为您更新其他字段（此处为年份）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-04T12:57:05.280

# `java.time.YearMonth`

虽然其他答案在编写时是很好的答案，但它们现在已经过时了。自从 Java 8 引入了这个`YearMonth`类，这个任务被大大简化了：

```
 String date1 = "20/12/2011";
    String date2 = "22/08/2012";

    DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("dd/MM/uuuu", Locale.ROOT);
    DateTimeFormatter monthFormatter = DateTimeFormatter.ofPattern("MMM/uuuu", Locale.ROOT);
    YearMonth endMonth = YearMonth.parse(date2, dateFormatter);
    for (YearMonth month = YearMonth.parse(date1, dateFormatter);
            ! month.isAfter(endMonth);
            month = month.plusMonths(1)) {
        System.out.println(month.format(monthFormatter));
    } 
```

这打印：

```
Dec/2011
Jan/2012
Feb/2012
Mar/2012
Apr/2012
May/2012
Jun/2012
Jul/2012
Aug/2012 
```

请为第二次调用提供适当的语言环境，以`DateTimeFormatter.ofPattern()`使用您的语言获取月份名称。第一个电话也是为了安全起见。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-22T08:59:45.073

根据上面的对话。使用 Calendar 和 add 方法。

我没有测试过这个，但它就在那里：

```
public static List<Date> datesBetween(Date d1, Date d2) {
    List<Date> ret = new ArrayList<Date>();
    Calendar c = Calendar.getInstance();
    c.setTime(d1);
    while (c.getTimeInMillis()<d2.getTime()) {
        c.add(Calendar.MONTH, 1);
        ret.add(c.getTime());
    }
    return ret;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T09:01:10.337

做这个

```
 Calendar cal = Calendar.getInstance();
 cal.setTime(your_date_object);
 cal.add(Calendar.MONTH, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-14T06:58:48.040

所以假设你有这两个日期。您可以通过迭代一个while循环来轻松比较它，直到fromDate在toDate之前。

```
Date fromDate= new Date("1/4/2016");
Date toDate = new Date("31/12/2016");

int i=0;
while(fromDate.before(toDate)){
    i=i+1;
    fromDate.setMonth(i);
    System.out.println(fromDate);
} 
```

您可以在列表中添加日期或做任何想做的事！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-21T03:53:16.810

# php - 为什么 XDebug/kcachegrind 中显示的函数被调用了两次？

> ID：12069349
> 
> 赞同：0
> 
> 时间：2012-08-22T08:43:55.243
> 
> 标签：php, xdebug

当调用下面的 php 代码片段时，在 kcachegrind 中，函数 aaa 被调用了两次，函数 bbb 被调用了 4 次。

谁能解释为什么函数 aaa 被调用两次？谢谢。

```
<?php
echo "1111<br>\r\n"; 
aaa('Demo');

function aaa($p)
{
    echo 'current loop '.$p."<br>\r\n";
    for($j = 0; $j < 2; $j++){
        bbb($j);
    }
}

function bbb($p){
   echo 'bbb func loop: '.$p."<br>\r\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:46:51.757

您的数组中有四个元素，并且 aaa 函数内的 for 循环仅执行 3 次，因此它再次调用。

# javascript - 使开销 div 标签对劣质 div 不导电

> ID：12069354
> 
> 赞同：1
> 
> 时间：2012-08-22T08:43:59.597
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [jquery 停止子触发父事件](https://stackoverflow.com/questions/2364629/jquery-stop-child-triggering-parent-event)

我有 2 个 div 标签，父母和孩子，我想点击父母 div - alert() 一些。问题是：在子 div 中单击时，alert() 也发生了，我只想调用警报单击父 div 标签区域，请告诉如何做到这一点？这是我的 html 代码

```
<div id="out_div" style="width: 200px; height: 200px; background-color: #090; position:    absolute; z-index: 1">
        <div id="inner_div" style="width: 100px; height: 100px; background-color: #009; position: absolute; z-index: 2; margin-left: 50px; margin-top: 50px;">

        </div>
    </div> 
```

和js代码：

```
$(document).ready( function () {

            $("#out_div").on("click", function () {
                alert("asd");
            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:58:39.463

您可以检查`event.target`：

[jsFiddle 演示](http://jsfiddle.net/53TrW/1/)

```
$(document).ready( function () {

    $("#out_div").on("click", function ( e ) {
         if (!$(e.target).is(this)){ return; }
         alert("asd");
    });

}); 
```

# android - 条码扫描器 zxing 的代码保存在哪里？

> ID：12069355
> 
> 赞同：0
> 
> 时间：2012-08-22T08:43:59.213
> 
> 标签：android, database, zxing, barcode-scanner

我已将 BarCode Scanner 应用程序集成到我的应用程序中。现在我想使用扫描的代码将其与我的数据库进行比较并找到产品。我怎样才能得到代码？它保存在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:57:43.193

您应该在 startActivityForResult() 中调用 zxing。如果是这样，那么当它完成时，它将在对 ActivityResult() 的调用中返回到您的活动，该活动将包含意图中的捆绑包和您的结果。这是关于SO的[this question](https://stackoverflow.com/questions/10966658/zxing-onactivityresults-not-firing)的一些示例代码

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent){
    if (resultCode == RESULT_OK) {
        String contents = intent.getStringExtra("SCAN_RESULT");
        String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
        // Handle successful scan
        EditText passphrase = (EditText) findViewById(R.id.txtPassphrase);
        passphrase.setText(contents);
    } else if (resultCode == RESULT_CANCELED) {
        // Handle cancel
} 
```

# php - 使用 Codeigniter 2.1 获取 404 - HMVC 5.4

> ID：12069356
> 
> 赞同：0
> 
> 时间：2012-08-22T08:44:01.920
> 
> 标签：php, codeigniter, codeigniter-2, hmvc

这是我的第一次 hmvc 尝试，但它出错了......我试图通过不同的模块分隔我的站点区域。然后我的意图是使用 ion_auth 控制 hmvc 的访问。那是我的初始结构：

```
/application
  /modules     <-- hmvc
    /public_zone
       /controller
        public_zone.php
       /view
        ...
    /private_zone
     ... 
```

因此，为了做到这一点（在 core 和 third_party 文件夹上安装 hmvc），我尝试将“public_zone”控制器设置为“default_controller”。**他的任务是加载根页面（'localhost'），但 **它返回 404 错误。****

这是我的 public_zone.php 文件：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Public_zone extends MX_Controller {

   public function index()
    {
      $this->load->view('include/header');
      $this->load->view('frontpage');
      $this->load->view('include/footer');
    }

} 
```

也许问题出在 routes.php (application/config/routes.php) 文件上？我会试试这个：

```
$route['default_controller'] = "public_zone"; 
$route['404_override'] = ''; 
```

**谁能告诉我我做错了什么？**当然我误解了一些 hmvc 概念......但事实是我不知道为什么它不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:29:12.060

首先，保持 CI 结构完整是很重要的。所以你需要这个结构：

```
/application
    /controllers
        public_zone.php
    /views
        frontpage.php
        /include
           header.php
           footer.php
    /models 
```

当然，您还需要 CI 附带的其他文件夹。

其次，您需要对控制器进行一些更改才能使其正常工作。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Public_zone extends CI_Controller {

 public function __construct()
 {
   parent::__construct();
 }

 public function index()
 {
   $this->load->view('include/header');
   $this->load->view('frontpage');
   $this->load->view('include/footer');
 }

} 
```

进行此更改后，它应该可以工作:) 请务必阅读用户指南：[http ://codeigniter.com/user_guide/](http://codeigniter.com/user_guide/)

阅读可能会花费您一些时间，但稍后会为您节省大量时间。

祝你好运！

# java - 无法使用 Hbase 连接到远程服务器

> ID：12069365
> 
> 赞同：4
> 
> 时间：2012-08-22T08:44:26.123
> 
> 标签：java, hadoop, mapreduce, hbase

我对 Hadoop 和 Hbase 非常陌生。我正在尝试从 java 代码创建一个表并连接到我的远程服务器 (Hbase)，它是 (172.80.72.86)。它是一台 linux 机器（172.80.72.86）。我试过上面的

我收到以下错误

```
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.5-1301095, built on 03/15/2012 19:48 GMT
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:host.name=user-8329a7141c
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.version=1.6.0_25
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Sun Microsystems Inc.
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.home=C:\Program Files\Java\jre6
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.class.path=D:\workspace\Hbase\bin;C:\Documents and Settings\user\Desktop\HAdoop\jars\commons-cli-1.2.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\commons-logging-1.1.1.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\log4j-1.2.16.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\hbase-dsl-0.1.2-SNAPSHOT.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\commons-lang-2.5.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\commons-logging-api-1.1.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\hadoop-core-0.20.2.jar;C:\Documents and Settings\user\My Documents\Downloads\slf4j-1.6.6\slf4j-api-1.6.6.jar;C:\Documents and Settings\user\My Documents\Downloads\slf4j-1.6.6\slf4j-log4j12-1.6.6.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\hbase-0.92.1.jar;C:\Documents and Settings\user\Desktop\HAdoop\jars\lib\zookeeper-3.3.5.jar
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.library.path=C:\Program Files\Java\jre6\bin;.;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:\WINDOWS\system32;D:\oracle\product\10.2.0\db_1\bin;C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\servlet-api.jar;D:\Pervasive Stuff\New Training stuff\datarush-6.0.0-26\bin;C:\Program Files\Java\jdk1.6.0_25\bin;C:\Program Files\grails-2.0.4\bin;.;
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=C:\DOCUME~1\user\LOCALS~1\Temp\
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:os.name=Windows XP
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:os.arch=x86
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:os.version=5.1
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:user.name=user
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:user.home=C:\Documents and Settings\user
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Client environment:user.dir=D:\workspace\Hbase
12/08/22 14:06:49 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=hconnection
12/08/22 14:06:50 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:06:50 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 3416@user-8329a7141c
12/08/22 14:06:50 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:06:51 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
12/08/22 14:06:51 INFO util.RetryCounter: The 1 times to retry  after sleeping 2000 ms
12/08/22 14:06:52 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:06:53 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:06:53 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
12/08/22 14:06:53 INFO util.RetryCounter: The 2 times to retry  after sleeping 4000 ms
12/08/22 14:06:54 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:06:55 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:06:57 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:06:58 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:06:58 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
12/08/22 14:06:58 INFO util.RetryCounter: The 3 times to retry  after sleeping 8000 ms
12/08/22 14:07:00 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:01 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:02 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:03 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:05 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:06 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:06 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
12/08/22 14:07:06 ERROR zookeeper.RecoverableZooKeeper: ZooKeeper exists failed after 3 retries
12/08/22 14:07:06 WARN zookeeper.ZKUtil: hconnection Unable to set watcher on znode /hbase/master
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:580)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
12/08/22 14:07:06 ERROR zookeeper.ZooKeeperWatcher: hconnection Received unexpected KeeperException, re-throwing exception
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:580)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
12/08/22 14:07:06 FATAL client.HConnectionManager$HConnectionImplementation: Unexpected exception during initialization, aborting
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/master
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:580)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
12/08/22 14:07:08 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:09 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:09 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
12/08/22 14:07:09 INFO util.RetryCounter: The 1 times to retry  after sleeping 2000 ms
12/08/22 14:07:10 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:11 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:11 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
12/08/22 14:07:11 INFO util.RetryCounter: The 2 times to retry  after sleeping 4000 ms
12/08/22 14:07:12 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:13 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:15 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:16 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:16 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
12/08/22 14:07:16 INFO util.RetryCounter: The 3 times to retry  after sleeping 8000 ms
12/08/22 14:07:18 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:19 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:20 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:21 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:23 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:24 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:25 INFO zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
12/08/22 14:07:26 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused: no further information
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1143)
12/08/22 14:07:26 WARN zookeeper.RecoverableZooKeeper: Possibly transient ZooKeeper exception: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
12/08/22 14:07:26 ERROR zookeeper.RecoverableZooKeeper: ZooKeeper exists failed after 3 retries
12/08/22 14:07:26 WARN zookeeper.ZKUtil: hconnection Unable to set watcher on znode /hbase/root-region-server
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:583)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
12/08/22 14:07:26 ERROR zookeeper.ZooKeeperWatcher: hconnection Received unexpected KeeperException, re-throwing exception
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:583)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
12/08/22 14:07:26 FATAL client.HConnectionManager$HConnectionImplementation: Unexpected exception during initialization, aborting
org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase/root-region-server
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:815)
    at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:154)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:226)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:583)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:569)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:186)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:194)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20)
Exception in thread "main" java.io.IOException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@b61fd1 closed
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:794)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:782)
    at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:249)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:213)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
    at HBaseConnector.main(HBaseConnector.java:20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:16:39.587

指定 zookeeper IP 并继续。客户端 PC 必须知道 zookeeper 在哪里运行。
在程序中的配置旁边附加以下行。

```
config.set("hbase.zookeeper.quorum", "172.80.72.86");  // Your remote Pc where the zookeeper is running. Mention the port if needed."172.80.72.86:60020" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T04:47:41.300

更好的方法是加载您的配置文件，而不是手动放置它。

当收到错误“Session 0x0 for server null”时，可能的问题之一是您的 HBase 代码不知道在哪里连接。解决此问题的最佳方法是加载您的 hbase-site.xml 配置文件。

```
Configuration config = HBaseConfiguration.create();
config.addResource(new Path("/XXXX/hbase/hbase-0.98.9/conf/hbase-site.xml")); 
```

# delphi - 我如何处理 idhttp 错误？

> ID：12069368
> 
> 赞同：0
> 
> 时间：2012-08-22T08:44:34.713
> 
> 标签：delphi, indy

如何避免在我的应用程序中使用 idHTTP 获取网页 HTML 的任何中断？因为我的应用程序必须在时间周期内自动获取一些数据并将其保存以与另一个应用程序一起使用，并且当该应用程序因错误而停止并等待用户在错误消息框中按下 OK 按钮时，这对我来说是个大问题。 ..

我想消除任何错误并`idHTTP.get()`在发生这些错误时重试。

我的应用程序中发生的大多数错误是“连接正常关闭”，有时是“主机无法访问”。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:20:52.300

将`idHttp.get`调用包含在一个`try except`子句中，更多内容请参见：[在 Delphi 中处理异常](http://edn.embarcadero.com/article/25665)

# javascript - 在javascript中显示/隐藏链接

> ID：12069369
> 
> 赞同：1
> 
> 时间：2012-08-22T08:44:37.853
> 
> 标签：javascript, extjs

我有 4 个单独放置的链接`<td>`，我想根据父对象的特定选择显示/隐藏 td

```
<td nowrap align=right id="dis_mirr" style="visiblility: visible;">
    <a id="first" style=font-weight:normal href=javascript:createwin();>
        &nbsp;Mirror&nbsp;
    </a>
</td>
<td nowrap align=right>
    <a id="second" style=font-weight:normal href=javascript:breakwin();>
        &nbsp;Break Mirror
    </a>
</td> 
```

这是代码：

```
if(record.get('model') == 'top'){
    document.getElementById('first').visibility = "hidden";
}else{
    document.getElementById('first').visibility = "visible";
} 
```

该代码有效，但`<td>`仍然存在，当我隐藏它时应该将其删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:49:45.217

您必须使用 parentNode 属性，该属性将返回父元素，这里是`<td>`：

```
if(record.get('model') == 'top'){
    document.getElementById('first').parentNode.visibility = "hidden";
} else {
    document.getElementById('first').parentNode.visibility = "visible";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:46:12.440

尝试这个：

```
document.getElementById("first").parentNode.style.display = 'none'; 
```

# javascript - 如何设置 svg 打印（CorelDraw 以 mm 为单位）和真实/预览（以 px 为单位）尺寸？

> ID：12069370
> 
> 赞同：1
> 
> 时间：2012-08-22T08:44:44.627
> 
> 标签：javascript, web, svg, coreldraw

我有一个基本的 SVG 文件，它有一个固定的 50mm x 25mm 打印尺寸（所以如果我用 CorelDraw 打开它，文档尺寸就是这个。）

```
<svg 
    width=50mm
    height=25mm
    xmlns="http://www.w3.org/2000/svg"
    version="1.1"
>
    <g>
        <text
            x=0
            y=55
            font-family="Verdana"
            font-size=55
            fill="black"
        >NOS?</text>
        <line
            class='v_pos'
            stroke="green"  
            x1=0 
            y1=55 
            x2=500
            y2=55
            stroke-width="1"  
        />
    </g>
</svg> 
```

如何在浏览器中实现 500x250 像素大小？比例没有改变，但我也需要在网络浏览器中固定画布大小。

我需要改写/扩展问题：

我想将图形（在浏览器中创建）导出到 CorelDraw，因为它可以读取 SVG 文件。浏览器中的画布例如为 500x250px，每个对象都以像素为单位进行测量。导出后一切都必须驻留，**从画布**（到 50x25mm）开始，然后是对象：

![我需要设置这个](../Images/0344fda1b214bf90f0dc29b4865f87b4.png)

所以问题是：

*   女巫属性负责CorelDraw中的画布宽度和高度？
*   是否有任何快速调整包含对象大小的方法（preserveAspectRatio、viewBox、样式媒体），或者我必须一一转换每个对象的宽度、高度、x、y 等属性？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:48:07.443

SVG 图像有两个不同的*大小*方面：您希望从无限画布中看到多少，以及生成的图像应该有多大。第一个由 定义`viewBox`，其中包含左上角的*x*和*y*坐标，以及*width*和*height*。第二个是使用`width`and`height`属性或样式属性定义的。

因此，您使用该`viewBox`属性表示您对`(0px, 0px)`和`(500px, 250px)`矩形内的区域感兴趣，因为这是您在浏览器中看到的：`viewBox="0 0 500 250"`

然后，由于您希望图像显示为`50mm`宽和`25mm`高，因此相应地设置宽度和高度。您可以将它们设置为根 svg 元素上的属性，这意味着您必须仅在导出时设置它们，否则它们也将应用于浏览器，或者您可以使用`style`仅对`print`媒体有效的元素来设置它们.

对于浏览器，如果您要定义 ，则`viewBox`无需明确指定宽度和高度，因为默认情况下 viewBox 中定义的区域按像素显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:15:29.720

当处理不同的*媒体*时，使用样式表*媒体选择器*。并且 SVG 使用元素的[`media`属性](http://www.w3.org/TR/SVG/styling.html#StyleElementMediaAttribute)本机地支持这一点。`<style>`基本语法是：

```
<style media="something" type="text/css">
  svg:root {
    width: 50mm;
    height: 25mm; 
  }
</style> 
```

现在，根据您想做什么，您可以：

1.  用于`media="print"`指定打印介质的大小，让在根`<svg>`元素上设置的属性中指定的默认宽度和高度用于所有其他情况
2.  用于在使用*屏幕*`media="screen"`显示时为浏览器指定目标宽度和高度，其中*屏幕*定义[为](http://www.w3.org/TR/CSS2/media.html#media-types)：“主要用于彩色计算机屏幕”。

# iphone - iPhone - 我如何检测切换选项卡视图和 BackBarButtonItem？

> ID：12069372
> 
> 赞同：1
> 
> 时间：2012-08-22T08:44:56.417
> 
> 标签：iphone, uinavigationcontroller

我需要在基于 Tab 的应用程序上切换选项卡时检测 Navigation BackBarButton 和 View。我怎样才能做到这一点。我需要代码示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:48:09.350

NavigationBar 是在被推送的 viewController 加载之后绘制的。此外，modalViewController 位于 navigationController 的“堆栈”中的 topViewController 之上。并检测 UINavigationController 的后退按钮按下是通过验证当前视图控制器不存在于导航控制器的视图控制器堆栈中。它可以安全地检查 - (void)viewDidDisappear:(BOOL)animated 中的这个条件，逻辑上，当调用该方法时，视图控制器极有可能从堆栈中删除。使用navigationController.topViewController 可以检测切换视图或相同视图，使用isKindOfClass 触发backBarButtonItem。这是对我有用的示例。

```
- (void)viewDidDisappear:(BOOL)animated{
if ([self.navigationController.topViewController isKindOfClass:[SDWebImageRootViewController class]]) {
    NSLog(@"Is kind of");
    //condition goes here
  }
if (!self.navigationController.topViewController) {
    NSLog(@"Is kind of topViewController");
   //condition goes here
} 
```

}

# r - 使用 lapply 沿网格最大化函数

> ID：12069377
> 
> 赞同：2
> 
> 时间：2012-08-22T08:45:23.613
> 
> 标签：r

我重写了问题以使其可重现。假设我想沿着我自己选择的网格最大化函数`exp(alpha+eta+gamma)`。`alpha,eta,gamma`我已经使用 for-loops 完成了这项工作，但我想使用 apply-functions 来加快该过程。这就是我所做的（eta 和 gamma 在这里被固定）。

```
eta=0.11
gamma=0.06
alpha=0.5    
alpha_vals=seq(0.1,1,by=0.1)
eta_vals=eta
gamma_vals=gamma

ml_temp=-Inf

lapply(alpha_vals,function(alpha_v){
  lapply(eta_vals,function(eta_v){
    lapply(gamma_vals,function(gamma_v){
      temp=exp(alpha_v+eta_v+gamma_v)
      if (temp >= ml_temp) {
        ml_temp=temp
        mle_matrix=c(alpha_v,eta_v,gamma_v)
      }  
    })  
  })    
}) 
```

输出`mle_matrix`I get `0 0 0`，所以有些东西显然不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:24:51.533

最简单的方法是使用 expand.grid() 和 apply()

```
toTest <- expand.grid(
    alpha = seq(0.1, 1, by = 0.1), 
    eta = seq(0.1, 1, by = 0.1), 
    gamma = seq(0.1, 1, by = 0.1))
ml <- apply(toTest, 1, function(x){
  exp(sum(x))
})
toTest[which.max(ml), ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:25:26.293

1.  我假设您的目标函数是矢量化的。`exp`是，如果可能的话，你也应该尝试编写你真正的目标函数向量化。

2.  目前，我假设您可以将整个结果保存在内存中。如果没有，您将不得不使用`lapply`一个或多个参数，但可能不需要遍历所有参数。

现在是建议：

```
search.pts <- expand.grid (alpha_v = alpha_vals, 
                           gamma_v = gamma_vals, 
                           eta_v   = eta_vals)
target.val <- exp (search.pts$alpha_v + search.pts$gamma_v + search.pts$eta_v)
solution <- which.max (target.val)

search.pts [solution,] 
```

或者可能返回

```
list (params = search.pts [solution,], value = target.val [solution]) 
```

`apply`这是向量化计算与具有 100 个值的三个参数向量中的每一个的基准：

```
microbenchmark (
    vectorized = exp (search.pts$alpha_v + search.pts$gamma_v + search.pts$eta_v),
    apply      = apply (search.pts, 1, function (x) exp (sum (x))), 
    times = 10)

## Unit: milliseconds
##         expr        min        lq     median          uq       max
## 1      apply 9569.52277 9687.8617 9940.53103 10140.13430 11413.508
## 2 vectorized   44.37456   45.3286   46.75505    67.38978   314.196 
```

# grails - groovy：保存 gsp 状态

> ID：12069379
> 
> 赞同：2
> 
> 时间：2012-08-22T08:45:29.867
> 
> 标签：grails

我有 2 个 gsp 的说法，“a.gsp”和“b.gsp”。

“a.gsp”有组合框，用户可以从中选择选项。

我的问题是，如果用户切换到“b.gsp”然后回到“a.gsp”，组合框选择的选项应该仍然存在。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:17:57.107

你可以做很多事情来实现这一点。根据您的要求，您可以：

*   使用 javascript 和 cookie。
*   当您导航到 b.gsp 并进入 b.gsp 中的隐藏字段时，将在组合框中选择的值传递给控制器​​，但是当您想查看 a.gsp 时，您必须再次将其传递回控制器。
*   在会话/闪存范围内传递选定的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:46:06.733

从您的问题来看，您似乎没有完全接受 Grails 的 MVC 架构，也没有正确使用控制器来准备数据并将结构化数据传递到您的视图。

首先，将控制器操作和视图重命名为有意义的名称，而不是 a、b。即使只是为了测试一个小样本，走捷径也会导致长期的坏习惯......

其次，如果您使用标签，那么您将使用 value 属性来指示应该选择什么。

在此处阅读标签及其属性：http: [//grails.org/doc/2.1.0/ref/Tags/select.html](http://grails.org/doc/2.1.0/ref/Tags/select.html)

给我们更多细节，也许我们可以提供帮助。

* * *

感谢您的澄清，所以我假设用户可能会通过多种方式离开当前的 a.gsp 页面并返回，但无论发生什么，您都希望浏览器记住所选的选项。在这种情况下，我将使用 jQuery cookie 库，它非常小，不会影响性能，因为您正在做非常小的工作，并且应该非常快速地进行设置。请参阅：[https ://github.com/carhartl /jquery-cookie](https://github.com/carhartl/jquery-cookie)

1.  根据您选择的 val() 值在 onChange 处理程序中设置 cookie。

2.  当您的页面加载（文档准备好）时，如果您在读取 ​​cookie 时得到一个值，则尝试设置选择值。

# javascript - 根据页眉和页脚高度改变高度的动态内容

> ID：12069383
> 
> 赞同：0
> 
> 时间：2012-08-22T08:45:32.940
> 
> 标签：javascript, html, css

我正在尝试制作一个包含 3 个元素的页面：页眉、页脚和内容。顾名思义，我希望页眉贴在顶部，页脚在底部，内容位于中间。我已经做了一个布局，将页眉和页脚放在它们应该在的位置，但内容要么与它们重叠，要么相反，内容应该变小。

我的问题是页眉和页脚将用于许多不同的事情，因此它们在高度方面是动态的。

有没有办法让内容填充页眉和页脚之间留下的空间，而不重叠它们？

如果可能的话，我更喜欢纯 CSS，但如果那不可能，我也想要一个 JavaScript 建议。:)

谢谢！

编辑：这就是我得到的自动取款机。

```
<div class="container">
    <div id="header"></div>
    <div id="footer"></div>
    <div id="content"></div>
</div> 
```

CSS：

```
#content {
    position:absolute;
    background: url('img/textures/fabric.png');
    background-color: gray;
    height:auto;
    width:auto;
    margin:0 auto 0 48px; /* Center content */
    left:0;
    right:0;
    top:0;
    bottom:0;
    text-align:center;  
}

#dashtop {
    position:fixed;
    width:auto;
    background-color:aqua;
    opacity: .5;
    margin-left: 48px;
    top:0;
    left:0;
    right:0;
    text-align:center;
}

#footer {
    position: fixed;
    margin-left: 48px;
    background-color:green;
    bottom:0;
    right:0;
    left:0;
    width:auto;
    height:auto;
    text-align:center;
    opacity:0.5;
    z-index:0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:40:30.133

对页眉和内容使用相对定位（无位置属性），对页脚使用固定定位。

# database - Django HTSQL TransactionManagementError 与 sqlite 以及 PostgreSQL 后端

> ID：12069384
> 
> 赞同：2
> 
> 时间：2012-08-22T08:45:37.933
> 
> 标签：database, django, transactions, htsql

我正在尝试将 HTSQL 用于我的 Django 项目之一。为此，我按照[此处](http://htsql.org/blog/2012/introducing-django-gateway.html)给出的程序来提供 HTSQL/Django 要求。然后我克隆了 HTSQL 存储库，以便从[HERE](https://bitbucket.org/prometheus/htsql/src/e236a434ad3b/demo/django)尝试其中的示例/演示。演示示例中使用的默认数据库是 sqlite3。我已经在 Django v 1.4 和 Django v 1.3.1 上尝试过这个演示（必须在 Django v 1.3.1 的 settings.py 中进行一些调整）。按照[HTSQL Django-gateway Blog](http://htsql.org/blog/2012/introducing-django-gateway.html)中的说明，我在 django 项目 shell 中编写了以下代码：

```
>>> from htsql_django import produce
>>> query = "/polls_poll{question, total:=sum(polls_choice.votes)}"
>>> for row in produce(query):
>>>    print "%s: %s" % (row.question, row.total) 
```

它抛出以下错误：

```
TransactionManagementError: This code isn't under transaction management 
```

可以在[pastebin中查看整个错误跟踪](http://pastebin.ca/2197235)

我也在我自己的新项目上试过这个，但同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:47:04.643

当你在 Django shell 中使用 HTSQL 时，你必须显式地打开一个事务：

```
>>> from django.db import transaction
>>> from htsql_django import produce
>>> with transaction.commit_on_success():
...     query = "/polls_poll{question, total:=sum(polls_choice.votes)}"
...     for row in produce(query):
...        print "%s: %s" % (row.question, row.total) 
```

很抱歉，文档对此并不清楚。我们可能会在未来的版本中对其进行更改。

# django - Django、mod_python、apache 部署：mod_python 导入错误

> ID：12069386
> 
> 赞同：1
> 
> 时间：2012-08-22T08:45:49.417
> 
> 标签：django, apache, mod-python

我已经安装了 mod_python，但是当我尝试使用它时：

例如。

```
>>>import mod_python
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  ImportError: No module named mod_python 
```

-

```
[root@lab6 /]# yum install mod_python
Loaded plugins: rhnplugin, security
Setting up Install Process
Package mod_python-3.2.8-3.1.x86_64 already installed and latest version
Nothing to do 
```

即使我已经将它安装在 Redhat 服务器中，我也无法导入它。

它应该被用来在 Redhat 服务器中部署 Django，并带有这个 httpd.conf 条目：

```
<VirtualHost mritest2.domain.ch:80>
        ServerName mritest2.domain.ch
        DocumentRoot /home/django_www/hardi

        <Location "/">
            SetHandler python-program
            PythonHandler django.core.handlers.modpython
            SetEnv DJANGO_SETTINGS_MODULE mri.settings
            PythonDebug On

            PythonPath "['/home/django_www', '/home/django_www/hardi'] + sys.path"
        </Location>

        <Location "/static/">
            SetHandler None
        </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T08:48:46.433

mod_python 是一个 HTTPd 模块，而不是 Python 包；它的虚拟模块只能用于它正在运行的代码，而不是 REPL。

但事实上 mod_python 已经[死了一段时间了](http://blog.dscpl.com.au/2010/06/modpython-project-is-now-officially.html)，你应该尽快迁移到 mod_wsgi。

# jaxb - jaxb-generate classes from wsdl ，每个模式类都应该去对应的包

> ID：12069388
> 
> 赞同：1
> 
> 时间：2012-08-22T08:45:50.380
> 
> 标签：jaxb, wsdl, schema, jax-ws, wsdl2java

我有一个包含模式的 wsdl 文件，我想为不同包中的每个模式生成 java 类，请帮助我。

我使用了以下代码，它生成与所有模式相关的类

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings version="1.0"     
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<jaxb:bindings schemaLocation="Event.xsd" node="/xsd:schema">         
<jaxb:schemaBindings>             

<jaxb:package name="com.event.dto" />

 <jaxb:nameXmlTransform>
       <jaxb:typeName suffix="CHASE"/>
 </jaxb:nameXmlTransform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:40:42.117

对于每个 shema 文件`xml`，在您的问题中添加类似的内容，但名称不同

```
<jaxb:package name="com.event.dto" /> 
```

# jquery - nestedSortable 文本 id

> ID：12069389
> 
> 赞同：0
> 
> 时间：2012-08-22T08:45:56.223
> 
> 标签：jquery, html, drag-and-drop, sortables

我正在使用 jQuery 插件[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)进行嵌套排序，但他的 ID 有问题。

我意识到，每当我`<li>`在nestedSortable 中设置元素的ID 时，使用toArray、toHierarchy 或serialize 的输出都会返回null。

```
 <ol class="sortable">
            <li id="list1"><div>A</div>
                <ol>
                    <li id="list2"><div>1</div></li>
                    <li id="list3"><div>2</div></li>
                    <li id="list4"><div>3</div></li>
                    <li id="list5"><div>4</div></li>
                </ol>
            </li>
            <li id="list6"><div>B</div>
                <ol>
                    <li id="list7"><div>1</div></li>
                    <li id="list8"><div>2</div></li>
                </ol>
            </li>
        </ol>
        <script type="text/javascript">
            $(document).ready(function(){

                $('.sortable').nestedSortable({
                    handle: 'div',
                    items: 'li',
                    toleranceElement: '> div',
                    update: function() {
                        list = $(this).nestedSortable('toHierarchy');
                        $("#abc").html(JSON.stringify(list));
                    }
                });

            });
        </script>
        <pre id="abc"></pre> 
```

我得到的输出是`[null,null]`. 这是某种限制还是有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:29:13.103

您的 ID 属性应包含下划线。

改成等等`id="list1"`。`id="list_1"`

# php - Magento Observer 如果不存在则保存属性

> ID：12069390
> 
> 赞同：0
> 
> 时间：2012-08-22T08:46:00.100
> 
> 标签：php, magento

我创建了一个观察者将选定的多选属性值保存在单独的表中。属性值仅在不存在时才应保存。这是我的代码

```
public function catalogProductSaveBefore(Varien_Event_Observer $observer)
{
    $product=$observer->getProduct();
    $_product=Mage::getModel('catalog/product')->load($product->getId());
    $makeOptions=$_product->getAttributeText('make'); //array  [0] => Audi [1] => BMW
    $partsfindermodel=Mage::getModel('partsfinder/parts');
    foreach($makeOptions as $makeOption)
    {
        if(!$partsfindermodel->getMake($makeOption))
        {
            $partsfindermodel->setMake($makeOption)->save();
        }
    }
} 
```

只有数组中的最后一个元素保存在表中。

如果不存在如何保存值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:57:06.697

我认为您需要考虑通过属性获取模型 - 例如部件号 - 如果加载，您将拥有一个 ID。如果还没有条目，那么您将不会获得 ID。因此，在保存时，它应该起作用。

另一个问题是您可以在数据库中添加更多字段的模型，但有时它们不起作用 - 除非您再次运行安装脚本。因此，您可能想在删除表和 core_resource 中的条目以设置模块后尝试此操作。然后，在初始安装时，所有表格都在后端制作，并神奇地与在线表格一起正常工作。

# android - ViewFlipper - 如何使我的 ImageView 居中

> ID：12069395
> 
> 赞同：2
> 
> 时间：2012-08-22T08:46:15.947
> 
> 标签：android, android-layout, imageview, viewflipper

我有一个带有图像的取景器，我的问题是图像（图像视图）没有居中。我已经解决了几个小时，不幸的是没有工作。我在 imageview 中找不到 setGravity 或重力。这是我不工作的代码：

我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<ViewFlipper android:id="@+id/flipper" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center"   
    android:scaleType="centerInside"
    android:background="#000000"
> 
</ViewFlipper> 
```

在我的 src 文件中：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
     View view = inflater.inflate(R.layout.slider_image, container, false);      

     viewFlipper = (ViewFlipper)view. findViewById(R.id.flipper);
     desc = (TextView)view.findViewById(R.id.textDesc);
     desc.setText("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur elementum " +
            "libero dapibus mi semper accumsan. Vestibulum tortor diam, " +
            "imperdiet in consectetur faucibus, vulputate eget turpis." +
            " Nullam nec aliquet arcu. Nunc pretium nulla non nulla pulvinar " +
            "ac interdum risus dictum. Morbi viverra condimentum elit sit amet lobortis.");
     desc.setMovementMethod(new ScrollingMovementMethod());
     for(int i=0;i<mThumbIds.length;i++)
     {
         setFlipperImage(mThumbIds[i]);
     }
     viewFlipper.setAutoStart(true);
     viewFlipper.setFlipInterval(8000);
     viewFlipper.setPadding(20, 10, 20,0);
     viewFlipper.setInAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(), R.anim.view_right_in));
     viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(),R.anim.view_right_out));
     viewFlipper.startFlipping();

     viewFlipper.setOnTouchListener(new OnTouchListener(){

         public boolean onTouch(View arg0, MotionEvent arg1) {

             switch (arg1.getAction()){

                    case MotionEvent.ACTION_DOWN:{
                        downXValue = arg1.getX();
                        break;
                    }

                    case MotionEvent.ACTION_UP:{
                        float currentX = arg1.getX();            
                        if (downXValue < currentX)
                        {
                             viewFlipper.setInAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(), R.anim.view_right_in));
                             viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(),R.anim.view_right_out));
                             viewFlipper.showPrevious();
                        }
                        if (downXValue > currentX)
                        {
                            viewFlipper.setInAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(),R.anim.view_left_in));
                            viewFlipper.setOutAnimation(AnimationUtils.loadAnimation(getActivity().getApplicationContext(),R.anim.view_left_out));
                            viewFlipper.showNext();
                        }
                        break;
                    }
              }
             return true;
         }
     });

     super.setMenuVisibility (true);
     super.setHasOptionsMenu(true);

     return view; 
 } 
```

我的 setflipper 功能：

```
private void setFlipperImage(int res) {

    ImageView image = new ImageView(getActivity().getApplicationContext());

    image.setBackgroundResource(res);
    @SuppressWarnings("deprecation")
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(  LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    layoutParams.gravity = Gravity.CENTER_HORIZONTAL;
    image.setLayoutParams(layoutParams);
    image.setMaxHeight(350);
    image.setMaxWidth(600);
    image.setAdjustViewBounds(true);
    image.getLayoutParams().height = 350;
    image.getLayoutParams().width = 350;
    viewFlipper.addView(image);
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:17:18.510

尝试将 ViewFlippers 宽度设置为

```
 android:layout_width="wrap_content" 
```

我有一个类似的问题，这很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:00:00.407

如何设置你`ImageView`这样的：

```
image.setScaleType(ImageView.ScaleType.FIT_CENTER); 
```

# testing - QA Server 代表什么？

> ID：12069396
> 
> 赞同：11
> 
> 时间：2012-08-22T08:46:16.507
> 
> 标签：testing, webserver, lifecycle

据我了解，QA 服务器是一个测试服务器……我想知道 QA 代表什么以及与暂存/预生产服务器有什么区别。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T08:47:24.500

我只能回答一半的问题。QA 代表质量保证。可能 QA 服务器适用于测试，测量软件/硬件的质量。可能单元测试/回归测试旨在在此服务器上运行。

所谓的登台/预生产服务器，可能是一个运行生产代码的系统，用于定期使用软件/硬件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-14T17:18:09.327

我知道这是一篇旧帖子，但我在搜索时发现了这个，所以我想我会添加一些我自己的知识，以防其他人来到这里想要更多信息。

米歇尔大部分是对的，但如果可以的话，我想纠正一些事情。首先，QA 服务器通常是指处理 QA 流程的机器，并运行有助于创建可以测试不同代码分支的环境的软件，作为 QA 流程的一部分。这可以从切换环境和签出分支，到重建与生产环境匹配的整台机器并将代码部署到它们。QA Server 的基本原理是帮助创建用于测试的 QA 环境。

暂存/预生产环境通常是指一个或多个与代码将部署到的生产环境尽可能匹配的环境。同样，这可以像安装了与生产机器版本相匹配的软件安装的机器一样简单，也可以是一个小型 Web 服务器场，其中多台机器和数据库以匹配生产环境的方式连接在一起。再次，目标是拥有一个与生产相匹配但不是生产的地方，同样，为了测试和质量保证的目的。

我希望这对仍然不确定原始问题的回答的人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-20T18:22:24.880

暂存/生产环境之间不存在如此明显的区别。QA Server 环境是一个平台，其中部署应用程序用于测试目的，执行功能、安全和性能测试用例。

暂存是部署应用程序的环境（再次用于测试目的），但它坚持认为它在操作系统和规范方面尽可能与生产环境匹配。

# plone - 是否可以在 Plone 中定义有关组的规则？

> ID：12069397
> 
> 赞同：0
> 
> 时间：2012-08-22T08:46:24.390
> 
> 标签：plone

当我进入“Zope 管理界面”>“安全”时，我可以为用户设置权限。我可以为团体做同样的事情吗？有这个目标的方法或插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:49:13.143

不，你不能（为用户设置权限）；该选项卡设置*角色*的权限；请参阅“了解权限”手册中的[权限和角色](http://plone.org/documentation/kb/understanding-permissions/permissions-and-roles)。

您*可以*将角色分配给各个用户和组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:39:10.080

不建议通过 ZMI 中的“安全”选项卡将权限映射到角色。相反，您应该创建工作流（ZMI-->portal_workflow）并通过它自定义权限。

在您的工作流程中，您需要定义状态和转换。在每个州内，您都可以管理授予特定角色的权限。如果需要，您还可以将组映射到角色。

自定义您的工作流程后，您可以将其分配给特定的内容类型（在 portal_workflow 中）。

不要忘记运行“更新安全”，以便您的新工作流程将应用于现有内容。

# c# - 使用 Jabber.net (C#/Mono) 和 SASL 连接到 facebook 聊天

> ID：12069401
> 
> 赞同：1
> 
> 时间：2012-08-22T08:46:39.920
> 
> 标签：c#, xmpp, facebook-chat, sasl

我正在尝试使用 Jabber.net(c#/Mono) 连接到 facebook 聊天。我正在使用的代码是这样的：

```
 static ManualResetEvent done = new ManualResetEvent(false);

    const bool VERBOSE = true;
    const string TARGET = "friends_username@chat.facebook.com";

    void Start () 
    {

        JabberClient j = new JabberClient();

        j.User = "my_facebook_alias";  //Later to be removed
        j.Server = "chat.facebook.com"; 
        j.Port = 5222;
        j.NetworkHost = "chat.facebook.com";
        j.AutoStartCompression = true;
        j.KeepAlive = 30F;
        j.AutoStartTLS = false;
        j.AutoStartCompression = true;
        j.PlaintextAuth = true;
        j.Password = "my_facebook_password";  //Later to be removed
        j.RequiresSASL = true;
        j.LocalCertificate = null;
        // don't do extra stuff, please.
        j.AutoPresence = false;
        j.AutoRoster = true;
        j.AutoReconnect = -1;

        j.OnInvalidCertificate += new System.Net.Security.RemoteCertificateValidationCallback(j_OnInvalidCertificate);

        // listen for errors.  Always do this!
        j.OnError += new bedrock.ExceptionHandler(j_OnError);

        // what to do when login completes
        j.OnAuthenticate += new bedrock.ObjectHandler(j_OnAuthenticate);

        // listen for XMPP wire protocol
        if (VERBOSE)
        {
            j.OnReadText += new bedrock.TextHandler(j_OnReadText);
            j.OnWriteText += new bedrock.TextHandler(j_OnWriteText);
        }

        // Set everything in motion
        j.Connect();

        // wait until sending a message is complete
        done.WaitOne();

        // logout cleanly
        j.Close();
    }

    static void j_OnWriteText(object sender, string txt)
    {
        if (txt == " ") return;  // ignore keep-alive spaces
        Console.WriteLine("SEND: " + txt);
    }

    static void j_OnReadText(object sender, string txt)
    {
        if (txt == " ") return;  // ignore keep-alive spaces
        Console.WriteLine("RECV: " + txt);
    }

    static void j_OnAuthenticate(object sender)
    {
        Debug.Log ("OnAuth...");
        // Sender is always the JabberClient.
        JabberClient j = (JabberClient)sender;
        j.Message(TARGET, "My test message!!!");

        // Finished sending.  Shut down.
        done.Set();
    }

    static void j_OnError(object sender, Exception ex)
    {
        // There was an error!
        Console.WriteLine("Error: " + ex.ToString());
        Debug.Log ("Error: "+ex.ToString());
        // Shut down.
        done.Set();
    }

    bool j_OnInvalidCertificate(object sender, System.Security.Cryptography.X509Certificates.X509Certificate certificate, System.Security.Cryptography.X509Certificates.X509Chain chain, System.Net.Security.SslPolicyErrors sslPolicyErrors)
    {
        Debug.Log("Invalid certificate "+sslPolicyErrors.ToString() +" : "+certificate.ToString(true));

        return true;
    } 
```

我到了 j_OnAuthenticate，这很好。它使用我的 ID/密码，因为将密码更改为其他内容会出现错误。但是我确实想使用 X-FACEBOOK-PLATFORM SASL 机制来登录而不保存用户 ID/密码。

完整的日志是：

```
RECV: <?xml version="1.0"?><stream:stream id="E34678B6" from="chat.facebook.com" version="1.0" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" xml:lang="en">
RECV: <stream:features><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism>X-FACEBOOK-PLATFORM</mechanism><mechanism>DIGEST-MD5</mechanism></mechanisms></stream:features>
SEND: <auth mechanism="DIGEST-MD5" xmlns="urn:ietf:params:xml:ns:xmpp-sasl" />
RECV: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">cmVhbG09ImNoYXQuZmFjZWJvb2suY29tIixub25jZT0iMDBENjAwQ0UyNjZBNzgyMEE5MUIzRDhGNjZDODQ1QjMiLHFvcD0iYXV0aCIsY2hhcnNldD11dGYtOCxhbGdvcml0aG09bWQ1LXNlc3M=</challenge>
SEND: <response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">dXNlcm5hbWU9ImpvbmFzMiIscmVhbG09ImNoYXQuZmFjZWJvb2suY29tIixub25jZT0iMDBENjAwQ0UyNjZBNzgyMEE5MUIzRDhGNjZDODQ1QjMiLGNub25jZT0iMzUzMzMyM2E2YTZmNmU2MTczMzIzYTUxNGU1ZjQxNjI0YzM4NjYiLG5jPTAwMDAwMDAxLHFvcD1hdXRoLGRpZ2VzdC11cmk9InhtcHAvY2hhdC5mYWNlYm9vay5jb20iLHJlc3BvbnNlPTcxN2ExNjM0MzdjOWU5MDM2NDcwYjViNTBhOTYxODIxLGNoYXJzZXQ9dXRmLTg=</response>
RECV: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">cnNwYXV0aD1hM2ZlZGM1NGRmYzNmMGEzMTU5Y2EyZDVmMmVkMmE2Zg==</challenge>
SEND: <response xmlns="urn:ietf:params:xml:ns:xmpp-sasl" />
RECV: <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
SEND: <stream:stream xmlns:stream="http://etherx.jabber.org/streams" id="10996e3a" xmlns="jabber:client" to="chat.facebook.com" version="1.0">
RECV: <?xml version="1.0"?><stream:stream id="2AF2D483" from="chat.facebook.com" version="1.0" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" xml:lang="en">
RECV: <stream:features><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"/><session xmlns="urn:ietf:params:xml:ns:xmpp-session"/></stream:features>
SEND: <iq id="JN_1" type="set" to="chat.facebook.com"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><resource>Jabber.Net</resource></bind></iq>
RECV: <iq id="JN_1" type="result"><bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"><jid>jonas2@chat.facebook.com/Jabber.Net_c938c6a2_4C7D6EF9DCFDC</jid></bind></iq>
SEND: <iq id="JN_2" type="set" to="chat.facebook.com"><session xmlns="urn:ietf:params:xml:ns:xmpp-session" /></iq>
RECV: <iq type="result" from="chat.facebook.com" id="JN_2"><session xmlns="urn:ietf:params:xml:ns:xmpp-session"/></iq>
OnAuth...
SEND: <message id="JN_3" type="chat" to="friends_username@chat.facebook.com"><body>My test message!!!</body></message>
SEND: <presence type="unavailable"><status>offline</status></presence>
SEND: </stream:stream>
SEND: <iq id="JN_4" type="get"><query xmlns="jabber:iq:roster" /></iq> 
```

在 MatriX XMPP 中有一个 OnBeforeSasl 委托，其中自定义方法可以设置所需的 facebook Sasl 属性（如 facebook 应用程序 ID、应用程序密码和访问令牌）。但是 Jabber.net 中没有这样的代表！

Jabber.net 上没有 SASL 支持吗？或者你是怎么设置的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:49:20.347

jabber-net 中支持 SASL，但不支持 X-FACEBOOK-PLATFORM SASL 机制。如果你想使用这个机制，你必须通过添加这个 SASL 机制来扩展 jabber-net。

Facebook 正在关闭 XMPP 连接。这可能与您在 Authenticate 事件中发送的消息有关。尝试在 jabber-net 发送您的初始状态后或在您获得名册后发送您的消息。

亚历克斯

# drupal - 在 Drupal 中更改块的顺序

> ID：12069402
> 
> 赞同：0
> 
> 时间：2012-08-22T08:46:46.247
> 
> 标签：drupal, drupal-blocks

如何更改[本网站](http://nineteenfifteen.prototype-interactive.com/category/seasons/summer-2012)右侧块的块顺序（它是 Drupal）？
“本周精选”和“档案”有两个区块，我想将“档案”放在顶部，将“本周精选”放在底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:52:42.117

在您的管理员中，您可以转到“块”页面（管理员/结构/块）。

找到您要更改的区域，然后使用拖放来更改块出现的顺序。不要忘记按页面底部的“保存更改”。

![在此处输入图像描述](../Images/485dc38e6553b905f0ea60353fbae01f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:39:19.687

结构 > 块 > 侧边栏第二

拖动档案并将其放在本周精选的顶部。

# wpf - 在 ListView 上使用鼠标激活水平滚动

> ID：12069407
> 
> 赞同：3
> 
> 时间：2012-08-22T08:47:09.040
> 
> 标签：wpf, listview, scroll, mouse

我有一个自定义的水平 ListView，它的模板中有自定义的 ScrollViewer（使用 Blend 创建）。我希望它在使用鼠标滚轮时水平滚动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-29T21:29:43.917

这应该通过 a 来实现，`Behavior`以提高可重用性。此外，ZSH 的逻辑是多余的，可以简化。这是我的代码：

```
/// <summary>
/// Allows an <see cref="ItemsControl"/> to scroll horizontally by listening to the
/// <see cref="PreviewMouseWheel"/> event of its internal <see cref="ScrollViewer"/>.
/// </summary>
public class HorizontalScrollBehavior : Behavior<ItemsControl>
{
    /// <summary>
    /// A reference to the internal ScrollViewer.
    /// </summary>
    private ScrollViewer ScrollViewer { get; set; }

    /// <summary>
    /// By default, scrolling down on the wheel translates to right, and up to left.
    /// Set this to true to invert that translation.
    /// </summary>
    public bool IsInverted { get; set; }

    /// <summary>
    /// The ScrollViewer is not available in the visual tree until the control is loaded.
    /// </summary>
    protected override void OnAttached()
    {
        base.OnAttached();

        AssociatedObject.Loaded += OnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        AssociatedObject.Loaded -= OnLoaded;

        ScrollViewer = VisualTreeHelpers.FindVisualChild<ScrollViewer>(AssociatedObject);

        if (ScrollViewer != null)
        {
            ScrollViewer.PreviewMouseWheel += OnPreviewMouseWheel;
        }
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        if (ScrollViewer != null)
        {
            ScrollViewer.PreviewMouseWheel -= OnPreviewMouseWheel;
        }
    }

    private void OnPreviewMouseWheel(object sender, MouseWheelEventArgs e)
    {
        var newOffset = IsInverted ?
            ScrollViewer.HorizontalOffset + e.Delta :
            ScrollViewer.HorizontalOffset - e.Delta;

        ScrollViewer.ScrollToHorizontalOffset(newOffset);
    }
} 
```

您需要添加以下引用： `System.Windows`、`System.Windows.Controls`、`System.Windows.Input`，并且您可能需要获取 Blend SDK NuGet 包，并`System.Windows.Interactivity`在“程序集扩展”部分找到并引用 DLL。

将此用于`VisualTreeHelpers`：

```
public class VisualTreeHelpers
{
    /// <summary>
    /// Return the first visual child of element by type.
    /// </summary>
    /// <typeparam name="T">The type of the Child</typeparam>
    /// <param name="obj">The parent Element</param>
    public static T FindVisualChild<T>(DependencyObject obj) where T : DependencyObject
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(obj, i);
            if (child != null && child is T)
                return (T)child;
            else
            {
                T childOfChild = FindVisualChild<T>(child);
                if (childOfChild != null)
                    return childOfChild;
            }
        }
        return null;
     }
} 
```

参考： [https ://codereview.stackexchange.com/questions/44760/is-there-a-better-way-to-get-a-child](https://codereview.stackexchange.com/questions/44760/is-there-a-better-way-to-get-a-child)

请注意，它与`VisualTreeHelper`中的不同`Windows.System.Media`。

以下是如何在 XAML 中使用它：

```
<ListBox>
    <i:Interaction.Behaviors>
        <behaviors:HorizontalScrollBehavior />
    </i:Interaction.Behaviors>
</ListBox> 
```

命名`i`空间声明为`xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"`和

`behaviors`被声明为

`xmlns:behaviors="clr-namespace:MyNamespace"`

`MyNamespace`包含`HorizontalScrollBehavior`该类的命名空间在哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T10:18:10.883

如果您实施`IScrollInfo`，您可以以相同的方式覆盖`MouseWheelUp`to do`MouseWheelLeft` 和 down\right

编辑（更简单）：

添加到您的 ScrollViewer PreviewMouseWheel

```
private void ScrollViewer_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
        {
            if (e.Delta < 0) // wheel down
            {
                if (myScrollViewer.HorizontalOffset + e.Delta > 0)
                {
                    myScrollViewer.ScrollToHorizontalOffset(myScrollViewer.HorizontalOffset + e.Delta);  
                }
                else
                {
                    myScrollViewer.ScrollToLeftEnd();
                }
            }
            else //wheel up
            {
                if (myScrollViewer.ExtentWidth > myScrollViewer.HorizontalOffset + e.Delta)
                {
                    myScrollViewer.ScrollToHorizontalOffset(myScrollViewer.HorizontalOffset + e.Delta);  
                }
                else
                {
                    myScrollViewer.ScrollToRightEnd();
                }
            }

        } 
```

xml:

```
<ScrollViewer x:Name="myScrollViewer" HorizontalScrollBarVisibility="Visible" Mouse.PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-09T14:55:36.840

我有点在寻找最简单的方法来使任何`ScrollViewer`滚动左右而不是上下滚动。所以这是其他答案的最简单组合。

```
<ScrollViewer HorizontalScrollBarVisibility="Visible"
              PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"> 
```

和：

```
private void ScrollViewer_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
{
    ScrollViewer scrollViewer = (ScrollViewer)sender;
    if (e.Delta < 0)
    {
        scrollViewer.LineRight();
    }
    else
    {
        scrollViewer.LineLeft();
    }
    e.Handled = true;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-11T08:10:06.207

**Xaml 代码：**

```
<ScrollViewer HorizontalScrollBarVisibility="Visible" 
              VerticalScrollBarVisibility="Visible" 
              PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"> 
</ScrollViewer> 
```

**C# 代码**

```
private void ScrollViewer_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
{
    var scrollViewer = (ScrollViewer)sender;
    if (Keyboard.IsKeyDown(Key.LeftShift) || Keyboard.IsKeyDown(Key.RightShift))
    {
        scrollViewer.ScrollToHorizontalOffset(scrollViewer.HorizontalOffset - e.Delta);
        e.Handled = true;
    }
} 
```

# php - 如何使用传递复选框值 example.php ~ 当我选中 example.php 网页中的复选框时.. 然后我点击打印按钮，该值将传递给 example1.php if($items) { foreach($items as $i) { print""; } } echo "[](example1.php?checkbox=" . $checkbox . ")" ?> 例子2.php  Zend_Soap_Client 得到“看起来我们没有 XML 文档”错误 我正在尝试从提供程序访问 Web 服务 (SOAP)。我无法控制服务器响应。为此，我使用 Zend_Soap_Client 在构造函数中传递 WDSL 和选项，我可以执行 getFunctions，但是当尝试访问第一个 Soap 方法时，我得到 [Sender] looks like we got no XML document 环顾四周并检查了我使用soapUI从服务器获得的答案后，我发现答案缺少XML声明：  那么，有没有办法让 Zend_Soap_Client 省略基于 XML 声明的 XML 验证？假设缺少声明是我的问题。 这是我用于此的代码： private $_connection_settings = array('login' => self::API_user, 'pwd' => self::API_password, 'key'=> self::API_Key); private static $CONNEXION_PARAMS = array( 'soap_version' => SOAP_1_1, 'encoding' => 'UTF-8' ); ... //somewhere in my code: $client = new Zend_Soap_Client('http://server_URL?wsdl', self::$CONNEXION_PARAMS); $response = $client->fistSoapMethod($this->_connection_settings); 并且没有分配响应。 谢谢！ phpjquery 4 4 回答 4 This answer is useful 0 $checkbox_string = htmlentities(http_build_query(array('checkbox'=>$checkbox))); echo "[...](example1.php?$checkbox_string)" 于 2012-08-22T09:09:00.293 回答 This answer is useful 0 简单的话—— checkbox= 但不要依赖用户输入，...清理数据 于 2012-08-22T08:51:12.207 回答 This answer is useful 0 如果我正确理解您的问题，您想使用链接提交表单，首选方式是将提交按钮设置为链接，但您可以使用 javascript 使用链接提交表单。你可以在这里找到更深入的解释 http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml 于 2012-08-22T08:55:16.213 回答 This answer is useful 0 我猜他的问题是他如何评估复选框的当前值并以 aa href "GET" 编码样式使用它。 我建议不要使用href，而是使用另一种带有post方法“get”的表单（为您编码url）。否则我相信你会被 javascript 困住。 于 2012-08-22T08:56:05.103 回答 Related 2 android - 在 Android Volley 中处理 Session Cookie 1 fiddler - 在 Fiddler 中，如何编辑会话上下文菜单？ 3 c - 为什么我会收到预期标识符或“（”？ 1 c++ - 将内容传送到 C++ 可执行文件时 procmail 的奇怪行为 3 symfony - Symfony2 缩小没有 java 或节点 5 ruby-on-rails-3.2 - 简单的形式和引导程序 3 1 c# - nunit 如何使用一次性设置方法（适用于所有测试） 1 android - 错误消息-> shouldOverrideUrlLoading Webview Android 2 mysql - select 语句返回一部分结果 1 google-app-engine - NotSerializableException FacebookConnectionFactory Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12069412
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, jquery

example.php ~ 当我选中 example.php 网页中的复选框时.. 然后我点击打印按钮，该值将传递给 example1.php

```
if($items) {    
    foreach($items as $i)
    {
        print"<input name='checkbox[]' type='checkbox' id='checkbox[]' value='$i->logi_id'>";
    }
}

echo "<a href='example1.php?checkbox=" . $checkbox . "'><input type='button' name='print' id='delete' value='Print'></a>"
?> 
```

* * *

例子2.php

```
<?php
$keyword = $_REQUEST['keyword'];
$keycateg = $_REQUEST['keycateg'];
$print = $_REQUEST['print'];    
$checkbox = $_REQUEST['checkbox']; 
$count = count($_REQUEST['checkbox']);

if($print){
    for($i=0;$i<$count;$i++){    
        $del_id = $checkbox[$i];
        $sql = "select * FROM sampleDB WHERE logi_id='$del_id'";
        $result = mysql_query($sql);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:09:00.293

```
$checkbox_string = htmlentities(http_build_query(array('checkbox'=>$checkbox)));

echo "<a href='example1.php?$checkbox_string'>...</a>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:51:12.207

简单的话——

```
checkbox=<?php echo $checkbox; ?> 
```

但不要依赖用户输入，...清理数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:55:16.213

如果我正确理解您的问题，您想使用链接提交表单，首选方式是将提交按钮设置为链接，但您可以使用 javascript 使用链接提交表单。你可以在这里找到更深入的解释

[http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:56:05.103

我猜他的问题是他如何评估复选框的当前值并以 aa href "GET" 编码样式使用它。

我建议不要使用href，而是使用另一种带有post方法“get”的表单（为您编码url）。否则我相信你会被 javascript 困住。

# php - Zend_Soap_Client 得到“看起来我们没有 XML 文档”错误

> ID：12069414
> 
> 赞同：1
> 
> 时间：2012-08-22T08:47:33.670
> 
> 标签：php, zend-framework, soap

我正在尝试从提供程序访问 Web 服务 (SOAP)。我无法控制服务器响应。为此，我使用 Zend_Soap_Client 在构造函数中传递 WDSL 和选项，我可以执行 getFunctions，但是当尝试访问第一个 Soap 方法时，我得到

```
[Sender] looks like we got no XML document 
```

环顾四周并检查了我使用soapUI从服务器获得的答案后，我发现答案缺少XML声明：

```
<?xml version="1.0" encoding="XXXXXXX"?> 
```

那么，有没有办法让 Zend_Soap_Client 省略基于 XML 声明的 XML 验证？假设缺少声明是我的问题。

这是我用于此的代码：

```
private $_connection_settings = array('login' => self::API_user, 'pwd' => self::API_password, 'key'=> self::API_Key);

private static $CONNEXION_PARAMS = array(                                            
                                        'soap_version'   => SOAP_1_1,
                                        'encoding'      => 'UTF-8'
                                     );

...

//somewhere in my code: 

$client = new Zend_Soap_Client('http://server_URL?wsdl', self::$CONNEXION_PARAMS);
$response = $client->fistSoapMethod($this->_connection_settings); 
```

并且没有分配响应。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:13:43.917

除了 SOAP 错误之外，您的代码中没有其他警告/错误吗？

不确定它是 WSDL。可以随时尝试使用[在线工具](http://xmethods.net/ve2/Tools.po)验证 WSDL 。

您是否使用过 getLastResponse() 和 getLastRequest() 方法？听起来您可能会在请求开始时发送一些垃圾。测试时我经常做的另一件事是关闭 WSDL 缓存。

`ini_set("soap.wsdl_cache_enabled", 0);`

# asp.net - IIS 7、HttpHandler 和 HTTP 错误 500.21

> ID：12069415
> 
> 赞同：16
> 
> 时间：2012-08-22T08:47:36.040
> 
> 标签：asp.net, iis, iis-7, httphandler, ihttphandler

在 IIS 7 上，我正在尝试为我的 ASP.NET Web 应用程序使用自定义 HttpHandler。我使用管道模式“经典”，.NET 版本是 4.0.30319，我的处理程序的 web.config 配置是：

```
<system.webServer>
<handlers>
    <add name="MyHandler" path="*.myExtension" verb="*" type="Company.App.UI.Controls.MyHandler, Company.App.UI" resourceType="Unspecified" />
</handlers>
</system.webServer> 
```

当我调用这个处理程序时，我得到这个错误：

```
HTTP Error 500.21 - Internal Server Error
Handler "MyHandler" has a bad module "ManagedPipelineHandler" in its module list 
```

我做了一个谷歌搜索，大多数人通过 aspnet_regiis.exe /i 命令重新注册 ASP.NET 来解决这个问题，但这对我**不起作用**（命令完成，我重新启动 IIS，但同样的错误）。我在两台不同的服务器上尝试过，但得到了相同的结果。

我还应该尝试什么？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T09:53:55.640

无法将 IIS 托管处理程序配置为在经典模式下运行。如果你想这样做，你应该在集成模式下运行 IIS。

您可以在以下博客文章中了解有关模块、处理程序和 IIS 模式的更多信息：

[IIS 7.0、ASP.NET、管道、模块、处理程序和前置条件](http://blogs.msdn.com/b/tmarq/archive/2007/08/30/iis-7-0-asp-net-pipelines-modules-handlers-and-preconditions.aspx)

> 对于处理程序，如果您在映射中设置 preCondition="integratedMode"，则处理程序将仅在集成模式下运行。另一方面，如果您设置 preCondition="classicMode" 处理程序将仅在经典模式下运行。 **如果你省略这两个，处理程序可以在两种模式下运行，尽管这对于托管处理程序是不可能的**。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-14T14:26:32.680

幸运的是，这很容易解决。从提升的命令提示符处运行以下命令：

```
%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

如果您使用的是 32 位计算机，则可能必须使用以下内容：

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-12-01T15:22:30.210

我有同样的问题，并通过在运行中运行以下解决

%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-22T21:06:55.410

我有同样的问题，刚刚解决了。我在stackoverflow上发布了我自己的问题：

[无法 PUT 到我的 IHttpHandler，GET 工作正常](https://stackoverflow.com/questions/33285257/cant-put-to-my-ihttphandler-get-works-fine/33290675#33290675)

解决方案是在 modules 元素中将 runManagedModulesForWebDavRequests 设置为 true。我的猜测是，一旦你安装了 WebDAV，那么所有的 PUT 请求都与它相关联。如果您需要将 PUT 转到您的处理程序，则需要删除 WebDAV 模块并将此属性设置为 true。

```
<modules runManagedModulesForWebDavRequests="true">
...
</modules> 
```

因此，如果您在使用 PUT 动词时遇到问题并且您已经安装了 WebDAV，那么希望这个解决方案能够解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T10:58:28.500

在 Windows Server 2016 上，我使用过：

`dism /online /enable-feature /featurename:IIS-ASPNET45 /all`

也可以通过 Powershell 完成：

`Install-WindowsFeature .NET-Framework-45-Features`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-16T11:14:14.737

出现这种情况是因为您还没有安装/启动 ASP.net 服务。

在 Windows 7、8、10 中使用以下命令。

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-17T12:44:50.547

我发现的一种解决方案是，您应该通过在高级设置中的应用程序池下右键单击您拥有管理器的站点，将 .Net Framework 更改回 v2.0。

# twitter - 如何验证 Twitter 消费者密钥和秘密

> ID：12069417
> 
> 赞同：4
> 
> 时间：2012-08-22T08:47:53.253
> 
> 标签：twitter

我有一对密钥：消费者密钥和消费者密钥。我想验证它。怎么做？

就像 Facebook 使用[http://graph.facebook.com/](http://graph.facebook.com/)验证appID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:00:34.150

[https://dev.twitter.com/docs/auth/oauth/single-user-with-examples](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples)

Twitter开发中心的这个页面应该可以解释所有内容，我不确定你所说的验证是什么意思（比如你的意思是测试还是实现），但无论哪种方式这都会有所帮助:)

# php - php - 获取图像的来源

> ID：12069418
> 
> 赞同：0
> 
> 时间：2012-08-22T08:47:55.157
> 
> 标签：php, image

我需要从容器内的所有图像中获取所有源值。我对此有一些困难。

请允许我解释一下这个过程。所有的数据都来自一个数据库。在后台，用户在文本区域内输入所有文本和图像。要将文本与图像分开，用户必须输入分页符。让我们去代码

```
while ($rowClients = mysql_fetch_array($rsClients)) {
    $result = $rowClients['content'];
    $resultExplode = explode('<!-- pagebreak -->', $result);
    // with resultExplode[0] I get the code and with resultExplde[1] I get the image

    // Now with I want to get only the src value from resultExplode[1] 
```

我已经尝试过`strip_tags`

```
$imageSrc = strip_tags($resultadoExplode[1]); 
```

但它不打印任何东西。

我找到[了这篇文章](https://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php)，但没有成功。我停在第一个 print_r。

谁能帮我？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:52:50.877

尝试foreach，如果你不能打印出来..（如果那是问题）

```
 foreach($resultExplode as $key => $value){
    echo "[".$key."]".$value;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:48:16.130

我找到了一个解决方案：

继续前面的代码，我使用了 split 函数。

所以我开始剥离标签。这样我就可以将 img 与其他部分隔离开来。

```
$image = strip_tags($resultExplode[1],"<img>"); 
```

因为所有的 img 都具有这样的结构：`<img width="111" height="28" alt="alternative text" src="/path/to/the/file.png" title="title of the image">`

我拆分这个字符串，使用 " 作为分隔符

```
$imgSplit = split('"', $image);
$src = $imgSplit[3]; 
```

瞧。它正在工作

你对这个程序有什么看法？？

# extjs - 网格中的过滤选项

> ID：12069421
> 
> 赞同：0
> 
> 时间：2012-08-22T08:48:04.953
> 
> 标签：extjs, filter, grid

我在网格中使用过滤器选项，我可以在其中每列选择我想要过滤的内容。对于我需要这样做的选项：

```
Ext.ux.ajax.SimManager.init({
    delay: 300,
    defaultSimlet: null
}).register({
    'filterEvents': {
        data: [
            ['Dag 1', 'Dag 1'],
            ['Dag 2', 'Dag 2']
        ],
        stype: 'json'
    }
});

 dagenFilter = Ext.create('Ext.data.Store', {
     fields: ['id', 'text'],
    proxy: {
        type: 'ajax',
        url: 'filterEvents',
        reader: 'array'
    }
}); 
```

但是因为过滤器选项需要是动态的而不是静态的，所以我想从服务中加载选项。该json的输出如下所示

```
{
"dagen": [{
    "name": "Dag 1",
    "reference": "Dag 1"
}, {
    "name": "Dag 2",
    "reference": "Dag 2"
}, {
    "name": "Dag 3",
    "reference": "Dag 3"
}, {
    "name": "Dag 4",
    "reference": "Dag 4"
}] 
```

}

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:48:10.127

如果通过“网格中的过滤器选项”您指的是[FiltersFeature](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature)答案很简单。ListFilter 可以由 DataStore 支持。

[在这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.filter.ListFilter)`options`查看ListFilter的配置。具体来说，也可能是相关的。这是一个例子：`store``phpMode`

```
{
    header: 'List Filter Column',
    dataIndex: 'list_data',
    width: 120,
    filter: {
        type: 'list',
        store: Ext.getStore('FilterOptions'),
        phpMode: true
    }
} 
```

# trigger.io - 关闭在 Trigger.IO 下运行的移动 Web 应用程序

> ID：12069429
> 
> 赞同：2
> 
> 时间：2012-08-22T08:48:39.960
> 
> 标签：trigger.io

在使用 Trigger.IO 托管应用程序时，告诉应用程序关闭的最佳做法是什么？

我想在前面有一个按钮来退出应用程序......我听说这适用于 Android `navigator.app.exitApp();`，但出现错误说 exitApp() 没有退出，但我希望有更多跨浏览器的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:53:03.870

您可以使用`forge.event.backPressed`来监听返回按钮的按下，并可选择在那里退出应用程序。例如：

```
forge.event.backPressed.preventDefault(function () {
  forge.event.backPressed.addListener(function (closeMe) {
    closeMe(); // this closes the app
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T21:13:00.400

James 发布了关闭应用程序的文档化方法，但内部方法也可以这样调用：

```
forge.internal.call('event.backPressed_closeApplication'); 
```

此方法已确认适用于 Android，不确定是否适用于 iOS。

# c# - 根据 db 值在转发器中动态更改标签前景色

> ID：12069444
> 
> 赞同：2
> 
> 时间：2012-08-22T08:49:24.113
> 
> 标签：c#, asp.net, sql-server

我有一个从数据库返回的字符串值。该值将始终为“红色”或“绿色”。我正在尝试根据此字符串值更改中继器中标签的前景色。如果值为“红色”，则标签的前景色应为红色，反之亦然。

我尝试在我的 asp 页面中使用此代码：

```
 ForeColor='<%# Eval("Color")%>' 
```

但是我得到了流动的错误：

```
Specified cast is not valid. 
```

我之前尝试动态设置图像的宽度并最终像这样转换值时遇到过类似的问题：

```
<asp:Image 
  ID="Image1" 
  runat="server" 
  Width='<%# System.Web.UI.WebControls.Unit.Parse(Eval("ImageSize").ToString()) %>'
  ImageUrl="~/Images/ProgressBar.jpg"/> 
```

问题是如何对系统颜色使用相同的技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T08:53:19.430

[`ForeColor`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.forecolor.aspx)需要一个[`Color`](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx)对象而不是字符串。

所以你可以使用[`ColorTranslator.FromHtml`](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.fromhtml.aspx)：

```
 ForeColor='<%# Drawing.ColorTranslator.FromHtml(Eval("Color").ToString())%>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:52:30.923

尝试

```
 style='color:<%# Eval("Color")%>' 
```

反而

# cuda - 使用 CUDA 纹理内存进行插值

> ID：12069448
> 
> 赞同：1
> 
> 时间：2012-08-22T08:49:40.660
> 
> 标签：cuda, textures, gpu, cuda.net

我想使用纹理内存进行数据插值。我有 2 个数组（即 A[i] 和 B[i]），我想在它们之间插入数据。我以为我可以将它们绑定到纹理内存并设置插值，但我不确定我该怎么做。

CUDA 附带的示例使用 A[i-1] 和 A[i+1] 进行插值。

有什么办法可以按照我的计划去做吗？我正在尝试这个，因为我认为我可以获得很好的加速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:04:36.873

如果您不习惯使用 CUDA 进行开发，那么使用纹理内存并不是最容易开始的事情。

我建议您尝试在没有优化的情况下在 CUDA 中编写您的算法**的第一个并行版本**。然后，在您的应用程序上**使用 NVIDIA Visual Profiler**来确定是否需要设置纹理内存来优化内存访问。

请记住，**越早优化，调试就越棘手**。

最后但并非最不重要的一点是，最新的 CUDA 版本（CUDA 5，仍处于候选版本中）能够**自动将您的数据存储在纹理内存**中，只要您将作为参数传递给内核的输入缓冲区声明为`const restrict`指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:28:54.887

是的，你可以用纹理内存来做到这一点，而且速度很快。我个人使用[ArrayFire](http://accelereyes.com/arrayfire)来完成这些操作，因为它比我希望的手动编码要快。

如果您想在 CUDA 中自己编写代码，您想要的是这样的：

```
// outside kernel

texture<float,1>  A;
cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();
cudaArray *arr = NULL;
cudaError_t e = cudaMallocArray(&arr, &desc, 1, length);
A.filterMode = cudaFilterModePoint;
A.addressMode[0] = cudaAddressModeClamp;
cudaBindTextureToArray(A, arr, desc);

...

// inside kernel

valA = tex1D(A,1,idx)
valB = tex1D(B,1,idx)

float f = 0.5;
output  = (f)*valA + (1-f)*valB; 
```

如果您只想插入 ArrayFire（根据我的经验，它比我尝试手动编写代码要快，更不用说使用更简单了），那么您需要：

```
// in arrayfire
array A = randu(10,1);
array B = randu(10,1);
float f = 0.5;
array C = (f)*A + (1-f)*B; 
```

以上假设您要在 2 个不同数组或矩阵的相应索引之间进行插值。还有[其他可用的插值函数](http://www.accelereyes.com/arrayfire/c/group__interpolation.htm)。

# android-webview - 带有证书的 Android 4.0 Webview SSL 身份验证

> ID：12069451
> 
> 赞同：4
> 
> 时间：2012-08-22T08:49:53.297
> 
> 标签：android-webview, android-4.0-ice-cream-sandwich

我试图在需要 ssl 身份验证的 web 视图中查看 https url。我遇到了与这篇文章类似的问题： [如何在 WebView](https://stackoverflow.com/questions/4220832/webview-basic-authentication-help) 中处理基本身份验证，我收到 401 未经授权的错误。

我不希望用户输入用户名或密码，因为我正在使用证书进行身份验证。我有两种方式获得客户端证书，作为使用密钥库的 X509Certificate 和作为 bks 密钥库。

任何人都可以帮助我，我应该如何告诉 webview 在加载 url 时使用这个证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-21T19:24:59.043

代码来自[https://github.com/potaka001/WebViewBasicAuthTest](https://github.com/potaka001/WebViewBasicAuthTest)

当然，您对 onReceivedHttpAuthRequest 方法感兴趣。

```
package com.webviewbasicauthtest;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Bitmap;
import android.net.http.SslError;
import android.webkit.CookieManager;
import android.webkit.HttpAuthHandler;
import android.webkit.SslErrorHandler;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MyWebViewClient extends WebViewClient {
  private String loginCookie;
  private Context mContext;
  private WebView mWebView;
  public MyWebViewClient(Context context, WebView webview) {

  super();
  mContext = context;
  mWebView = webview;
}

@Override
public void onPageStarted( WebView view, String url, Bitmap favicon ) {
}

@Override
public void onPageFinished( WebView view, String url ) {
  CookieManager cookieManager = CookieManager.getInstance();
  cookieManager.setCookie(url, loginCookie);
}

@Override
public void onReceivedError( WebView view, int errorCode, String description, String failingUrl ) {
  Toast.makeText(view.getContext(), "ページ読み込みエラー",   Toast.LENGTH_LONG).show();
}

@Override
public void onLoadResource( WebView view, String url ){
  CookieManager cookieManager = CookieManager.getInstance();
  loginCookie = cookieManager.getCookie(url);
}

@Override
public boolean shouldOverrideUrlLoading( WebView view, String url ) {
  return false;
}

@Override
public void onReceivedSslError( WebView view, SslErrorHandler handler, SslError error ) {
  handler.proceed();
}

@Override
public void onReceivedHttpAuthRequest( WebView view, final HttpAuthHandler handler, final String host, final String realm ){

  String userName = null;
  String userPass = null;

  if (handler.useHttpAuthUsernamePassword() && view != null) {
    String[] haup = view.getHttpAuthUsernamePassword(host, realm);

  if (haup != null && haup.length == 2) {
    userName = haup[0];
    userPass = haup[1];
 }
}

if (userName != null && userPass != null) {
    handler.proceed(userName, userPass);
}
else {
    showHttpAuthDialog(handler, host, realm, null, null, null);
}
}

private void showHttpAuthDialog( final HttpAuthHandler handler, final String host, final String realm, final String title, final String name, final String password ) {
    LinearLayout llayout = new LinearLayout((Activity)mContext);
    final TextView textview1 = new TextView((Activity)mContext);
    final EditText edittext1 = new EditText((Activity)mContext);
    final TextView textview2 = new TextView((Activity)mContext);
    final EditText edittext2 = new EditText((Activity)mContext);
    llayout.setOrientation(LinearLayout.VERTICAL);
    textview1.setText("username:");
    textview2.setText("password:");
    llayout.addView(textview1);
    llayout.addView(edittext1);
    llayout.addView(textview2);
    llayout.addView(edittext2);

    final Builder mHttpAuthDialog = new AlertDialog.Builder((Activity)mContext);

    mHttpAuthDialog.setTitle("Basic Authentication")
    .setView(llayout)
    .setCancelable(false)
    .setPositiveButton("OK", new    DialogInterface.OnClickListener() {

public void onClick(DialogInterface dialog, int whichButton) {
  EditText etUserName = edittext1;
  String userName = etUserName.getText().toString();
  EditText etUserPass = edittext2;
  String userPass = etUserPass.getText().toString();
  mWebView.setHttpAuthUsernamePassword(host, realm, name, password);
  handler.proceed(userName, userPass);
}
})
.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int whichButton) {
  handler.cancel();
}
})
.create().show();
}
} 
```

# c++ - 引用如何共享内存地址

> ID：12069454
> 
> 赞同：2
> 
> 时间：2012-08-22T08:49:55.997
> 
> 标签：c++

[我正在阅读 C++ 中的](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)黑白指针变量和引用变量有什么区别。我从中得到了一点，**而引用共享相同的内存地址，但也占用了堆栈上的一些空间。**. 它共享相同的地址空间是什么意思。请明确引用是如何在 C++ 中实现的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T08:55:32.000

这是一个措辞有些混乱的答案。但这意味着相当简单的事情。关于占用堆栈空间的部分只是意味着引用实际上占用了内存。即，它占用与指针相同的内存量（并且在每个 C++ 实现中[我知道]它都是通过使用实际指针来实现的）。

关于“共享相同的内存地址”的部分实际上意味着引用不是可独立寻址的值。如果您有指向某物的指针，则可以获取该指针的地址并最终得到指向某物的指针的指针。但是，如果您对某物有引用，则不能获取该引用的地址。尝试这样做实际上会获取所引用事物的地址。这就是他所说的“共享相同的内存地址”的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:55:50.643

粗略地说，引用变量就像一个看起来不像指针的指针变量（即没有用于访问内容的指针语法）。这与堆栈或堆无关。

```
int i = 5; // integer on the Stack
int * j = new int (5); // integer on the Heap (accessible through pointer, naturally)

int & iref = i; // reference to integer on the Stack
int & jref = *j; // reference to integer on the Heap

int * ipointer = & i; // pointer to integer on the Stack
int * jpointer = j; // pointer to integer on the Heap 
```

# javascript - Highcharts 在图例项目之间放置了额外的空间

> ID：12069455
> 
> 赞同：3
> 
> 时间：2012-08-22T08:50:04.230
> 
> 标签：javascript, highcharts, space, legend

我正在使用 highcharts 并且我试图在图例项之间显示一些额外的空间，例如图例应该看起来像

学校老师

网球 篮球 足球

纸笔

所以基本上是一些额外的空间，比如项目分组。有谁知道这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T11:36:04.310

您可以在图例选项中的两个图例项之间提供边距。

尝试：

```
legend: {
    ..// other options
    itemMarginTop: 5,
    itemMarginBottom: 5
} 
```

阅读更多：[http ://api.highcharts.com/highcharts#legend.padding](http://api.highcharts.com/highcharts#legend.padding)

# makefile - 如何在 GNU make 中更改具有多个扩展名的列表中每个文件的扩展名？

> ID：12069457
> 
> 赞同：95
> 
> 时间：2012-08-22T08:50:10.240
> 
> 标签：makefile, gnu-make

在 GNU makefile 中，我想知道是否可以使用文件列表输入来制作带有新扩展名的文件列表输出。

在输入中，我得到这个列表：

```
FILES_IN=file1.doc file2.xls 
```

我想从**FILES_IN**变量在我的 makefile 中构建这个变量：

```
FILES_OUT=file1.docx file2.xlsx 
```

是否可以 ？如何 ？

这非常困难，因为我必须解析文件列表，并检测每个扩展名（.doc、.xls）以将其替换为正确的扩展名。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-08-22T11:18:22.430

在以空格分隔的文件名列表中替换扩展名是一项常见要求，并且为此提供了内置功能。如果要`x`在列表中每个名称的末尾添加一个：

```
FILES_OUT = $(FILES_IN:=x) 
```

一般形式是`$(VARIABLE:OLD_SUFFIX=NEW_SUFFIX)`。这将取值`VARIABLE`并替换`OLD_SUFFIX`以该后缀结尾的每个单词结尾处`NEW_SUFFIX`（不匹配的单词保持不变）。GNU make 调用这个特性（存在于每个 make 实现中）[替换引用](http://www.gnu.org/software/make/manual/make.html#Substitution-Refs)。

如果您只是想更改`.doc`并使用此功能`.docx`，则需要使用中间变量。`.xls``.xlsx`

```
FILES_OUT_1 = $(FILES_IN:.doc=.docx)
FILES_OUT = $(FILES_OUT_1:.xls=.xlsx) 
```

您也可以使用稍微更通用的语法`$(VARIABLE:OLD_PREFIX%OLD_SUFFIX=NEW_PREFIX%NEW_SUFFIX)`。此功能不是 GNU make 独有的，但它不像普通的后缀更改替换那样可移植。

还有一个 GNU make 功能可以让您在同一行上链接多个替换：[`patsubst`函数](http://www.gnu.org/software/make/manual/make.html#Text-Functions).

```
FILES_OUT = $(patsubst %.xls,%.xlsx,$(patsubst %.doc,%.docx,$(FILES_IN))) 
```

# visual-studio-2010 - MSB6006：“cmd.exe”以代码 9009 退出

> ID：12069464
> 
> 赞同：15
> 
> 时间：2012-08-22T08:50:45.063
> 
> 标签：visual-studio-2010, vtk

当我尝试在 VS 2010 上构建 VTK 时，出现此错误 `error MSB6006: "cmd.exe" exited with code 9009\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 151 6 vtkhdf5`

在此之前，我从 VS 命令提示符成功构建了 QT。
我的观点是目录的路径有问题。
我已经在互联网上搜索了一段时间，但找不到解决方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-16T02:31:19.510

您应该首先检查 VS2010 的**输出窗口**消息，而不仅仅是**错误列表窗口**。

在那之后，你可以找到一些关于你的错误的提示，比如缺少可执行文件或类似的东西。错误可能会有所不同，但如果您的情况是 - 缺少 exe 文件，请转到项目属性：

> 项目（您的项目名称） -> 属性 -> 配置属性 -> VC++ 目录 -> 可执行目录

，添加您丢失的exe的文件夹。

# php - 传递给 ivXml::setNodeTree() 的参数

> ID：12069466
> 
> 赞同：0
> 
> 时间：2012-08-22T08:51:02.110
> 
> 标签：php, gallery

我有这个错误：

> 遇到 PHP 错误
> 严重性：用户错误
> 消息：传递给 ivXml::setNodeTree() 的参数必须是 ivXmlNode
> 文件名的实例：/imagevue/include/ivXml.class.php
> 行号：140

我阅读了很多关于这个问题的帖子，但没有任何帮助。我试图删除文件folders.xml，试图用原始文件替换folderdata.xml。但没有任何帮助。

# asp.net-mvc - 我应该使用 ASP.NET Membership Provider

> ID：12069467
> 
> 赞同：1
> 
> 时间：2012-08-22T08:51:01.847
> 
> 标签：asp.net-mvc, asp.net-membership, membership-provider

好的，我知道之前有一些关于此的问题，但我只想知道现在的情况。如果我正在创建一个 ASP.NET MVC Web 应用程序，我应该使用内置的 Membership Provider 还是自己动手？

我觉得现有的可能有点矫枉过正，但话又说回来，它已经过死测试并且效果很好。我不喜欢它放在数据库中的数百万个表和存储过程，但我应该删除我不需要的东西，还是不担心它并使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:55:23.187

尽管您说这可能是重复的，但我认为寻求对当前情况的澄清是公平的，而且您似乎确实考虑了可能性。

由于您所说的原因，我仍然倾向于使用内置的会员提供程序（它只是工作），然后为 OpenId、Facebook 等添加我自己的表，并将它们绑定回 aspnet_Users 表中的用户 ID .

到目前为止，我倾向于不担心它放入数据库中的无关内容。

# authorization - 通过运行任何功能授权脚本不起作用

> ID：12069468
> 
> 赞同：0
> 
> 时间：2012-08-22T08:51:02.360
> 
> 标签：authorization, google-apps-script

通过启动脚本编辑器并运行任何功能来授权脚本不起作用。脚本作为 Web 应用程序发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:40:15.853

[将脚本服务发布为 Web 应用程序](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1703)存在一个未解决的问题 #1703

# perl - Perl Net::SSH 检查文件是否存在

> ID：12069470
> 
> 赞同：0
> 
> 时间：2012-08-22T08:51:14.470
> 
> 标签：perl

我需要使用 Net::SSH 远程检索文件，但如果该文件远程不存在，我的脚本就会终止。我怎样才能停止这种情况并让脚本继续执行？

```
eval {  
    my $login_output = $ssh->login($user, $pass);

    foreach $device (keys %{$deviceHashRef})
    {   
                    my $transfer_output = $scpe->scp("$host:/home/portal/runtime/portal_daemon/data/journal/2012.07/refrigeration.case.$device.hourly", '/tmp/poop/input');
    }
};

if($@)
{       
    print Dumper $@;
} 
```

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:59:12.497

如果将调用包装在 eval {} 中，它将捕获 die()，并且您可以处理错误。

```
 my $transfer_output = eval { $scpe->scp("$host:/home/portal/runtime/portal_daemon/data/journal/2012.07/refrigeration.case.$device.hourly", '/tmp/poop/input') };
 if ($@) {
   my $err = $@;

   # you can parse the error message out of $err and build an error message
   if ($err =~ /not found/) {
      logger->err('the input file was not found on the remote server');
   }
   else {
     logger->err("file copy encountered a problem: $err");
   }
 } 
```

# asp.net - 未调用 HttpModule Init 方法

> ID：12069472
> 
> 赞同：3
> 
> 时间：2012-08-22T08:51:22.017
> 
> 标签：asp.net, httpmodule

最近我正在实现一个 HttpMoudle。并坚持所说的错误`System.NullReferenceException: Object reference not set to an instance of an object.`

这是我的代码。

```
public class MyHttpModuler : IHttpModule
    {
        private static IAuthProvider authProvider=null;
        #region IHttpModule members
        /// <summary>
        /// Disposes of the resources (other than memory) used by the module that implements <see cref="T:System.Web.IHttpModule"/>.
        /// </summary>
        public void Dispose()
        {
            authProvider.Dispose();
            authProvider = null;
        }

        public void Init(HttpApplication application)
        {
            authProvider = new BasicAuthProvider("achievo");
            application.BeginRequest += new EventHandler(Application_BeginRequest);

        }

        private void Application_BeginRequest(object sender, EventArgs e)
        {
            HttpApplication app = (HttpApplication)sender;
            HttpRequest request = app.Request;
            HttpResponse response = app.Response;
            TryAuthenticate(app);                    
        }
        #endregion

        #region private method
        /// <summary>
        /// Tries to authenticate the user
        /// </summary>
        /// <param name="context">The context.</param>
        /// <returns></returns>
        private bool TryAuthenticate(HttpApplication context)
        {
            string authHeader = context.Request.Headers["Authorization"];
            if (!string.IsNullOrEmpty(authHeader))
            {
                if (authHeader.StartsWith("basic ", StringComparison.InvariantCultureIgnoreCase))
                {

                    string userNameAndPassword = Encoding.Default.GetString(
                        Convert.FromBase64String(authHeader.Substring(6)));
                    string[] parts = userNameAndPassword.Split(':');
                     if (authProvider.IsValidUser(parts[0], parts[1]))
                    {
                        //the authProvider object sometimes is null .Why?                            
                        return true;
                    }
                }
            }
            return false;
        }
        #endregion
    }

public class BasicAuthProvider : IAuthProvider
    {

        #region IAuthProvider Members

        public string DomainName { get; set; }

        public BasicAuthProvider(string sDmName)
        {
            DomainName = sDmName;
        }

        public bool IsValidUser(string userName, string password)
        {

            string sFullName = "LDAP://" + DomainName + ".com";
            bool bLogin = ADHelper.IsAuthenticated(sFullName, DomainName + @"\" + userName, password);
            return bLogin;
        }

        public bool IsRequestAllowed(HttpRequest request,string sName)
        {
            return sName == "joe.wang";
        }

        public void Dispose()
        {

        }

        #endregion
    } 
```

尤其是当多个用户进入网站时。发生 NullReferenceException 异常。当我调试时，我发现有时`Init`方法可能不会被调用。也许这就是发生异常的原因。任何人都可以帮我检查一下吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:25:51.673

您已将主要对象设置为静态`authProvider`，因此您需要在制作和删除它时进行同步。

```
private static IAuthProvider authProvider=null; 
```

所以你需要把它写成：

```
public class MyHttpModuler : IHttpModule
    {
        //can not be shared with others request.
        //private IAuthProvider authProvider = null;

        //We do not need it now.
        //private static readonly object _lockObj = new object();

        #region IHttpModule members
        /// <summary>
        /// Disposes of the resources (other than memory) used by the module that implements <see cref="T:System.Web.IHttpModule"/>.
        /// </summary>
        public void Dispose()
        {
            //authProvider.Dispose();
        //authProvider = null;
        }

        public void Init(HttpApplication application)
        { 

            application.BeginRequest += new EventHandler(Application_BeginRequest);       
        }

        private void Application_BeginRequest(object sender, EventArgs e)
        {
            HttpApplication app = (HttpApplication)sender;
            HttpRequest request = app.Request;
            HttpResponse response = app.Response;
            TryAuthenticate(app);                    
        }
        #endregion

        #region private method
        /// <summary>
        /// Tries to authenticate the user
        /// </summary>
        /// <param name="context">The context.</param>
        /// <returns></returns>
        private bool TryAuthenticate(HttpApplication context)
        {
            IAuthProvider authProvider = new BasicAuthProvider("achievo");  
            string authHeader = context.Request.Headers["Authorization"];
            if (!string.IsNullOrEmpty(authHeader))
            {
                if (authHeader.StartsWith("basic ", StringComparison.InvariantCultureIgnoreCase))
                {

                    string userNameAndPassword = Encoding.Default.GetString(
                        Convert.FromBase64String(authHeader.Substring(6)));
                    string[] parts = userNameAndPassword.Split(':');
                     if (authProvider.IsValidUser(parts[0], parts[1]))
                    {
                        //the authProvider object sometimes is null .Why?     
                        authProvider=null;                        
                        return true;
                    }
                }
            }
            authProvider=null;  
            return false;
        }
        #endregion
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:12:25.940

问题是（正如**Aristos**指出的那样）您已经制作了`authProvider`静态文件。

这意味着当多个用户同时生成请求时，将会有多个您的实例`HttpModule`同时运行。但他们都会共享**一个** `authProvider`。

因此，**用户 A**可能会启动一个请求，从而导致您的模块的一个新实例运行它的`Init`方法。然后处理该请求的线程被搁置，来自**用户 B**的另一个请求开始，导致另一个新的模块实例运行它的`Init`方法。**这将覆盖在用户 A**的请求中放置的 authProvider 中的实例。然后*该*线程被搁置，来自**用户 A**的前一个线程被恢复并完成处理请求，从而处置`authProvider`（由**用户 B**的请求设置）并将其设置为空。之后，来自用户 B 的请求再次恢复并发现`authProvider`现在为空。

根据您提供的代码，似乎最简单的解决方案是简单地`static`从行中删除关键字：

```
private static IAuthProvider authProvider=null; 
```

然后每个实例都`HttpModule`将拥有它自己的副本，`authProvider`并且一个请求不会影响另一个请求的状态。

# linux - Tmux .tmux.conf 无法正确加载

> ID：12069477
> 
> 赞同：9
> 
> 时间：2012-08-22T08:51:39.350
> 
> 标签：linux, shell, tmux

我是一个新的 Tmux 用户。我有一个带有一堆设置的 .tmux.conf 文件，但是当我尝试获取该文件时，它会引发一堆错误。

```
############
# Settings #
############
# http://alexyu.se/content/2012/04/tmux-and-irssi-sitting-tree

# Define default shell
set -g default-command /bin/zsh

# Start numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Allows for faster key repetition
set -s escape-time 0

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize on

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# Status bar configuration
set -g status-utf8 on
set -g status-justify center
set -g status-interval 60
set -g status-left-length 40

# Status bar data
set -g status-left "#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P"
set -g status-right "#(~/battery Discharging) | #[fg=cyan]%d %b %R"

# Enable the mouse
setw -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on
# setw -g mode-mouse off

# Settings tmux for 256 colors
set -g default-terminal "screen-256color"

# enable vi keys.
setw -g mode-keys vi

################
# Key bindings #
################

# C-b is not acceptable -- Vim uses it
set-option -g prefix C-a
unbind C-b
bind-key a last-window

# reload source file
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Allows us to use C-a a <command> to send commands
# to a TMUX session inside another TMUX session
bind-key C-a send-prefix

# Vertical and horizontal splitting
bind | split-window -h
bind - split-window -v

# Home row movement between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Cycle through windows
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Resizing Panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Open panes in the same directory using the tmux-panes script
unbind v
unbind h
bind v send-keys " ~/tmux-panes -h" C-m
bind h send-keys " ~/tmux-panes -v" C-m

# Maximize and restore a pane
unbind Up
bind Up new-window -d -n tmp \; swap-pane -s tmp.1 \; select-window -t tmp
unbind Down
bind Down last-window \; swap-pane -s tmp.1 \; kill-window -t tmp

# vi like keybindings
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection

# copy and paste with system clipboard using xclip
bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"
bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"

# Pipe the current pane to a log file with Shift-H - Press Shift-H again to stop.
bind-key H pipe-pane -o "cat >>$HOME/#W-tmux.log" \; display-message "Toggled logging to $HOME/#W-tmux.log"

# Sync panes - send what you're typing to other panes.
bind C-s set-window-option synchronize-panes 
```

**我得到的错误是：**

*   未知选项：pane-base-index
*   坏值：on​</li>
*   未知值：中心​</li>
*   值无效：60​</li>
*   未知命令：绑定
*   未知命令：​解除绑定
*   未知命令：​setw
*   未知命令：​set

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:23:36.170

问题是文档内部出现了不可见的字节。只有在 Vim 中编辑时我才能看到它。谢谢。

# visual-studio-2008 - 为 VC++ 智能设备应用程序加载 DLL 问题

> ID：12069479
> 
> 赞同：1
> 
> 时间：2012-08-22T08:51:45.637
> 
> 标签：visual-studio-2008, visual-c++, windows-mobile-6

我正在使用 VC++ win32 控制台应用程序创建一个简单的项目，并尝试使用函数“LoadLibrary("D:\SRV\RFIDReader.dll");”加载一个 dll 文件。我可以通过这种方式加载它。但是当我尝试在智能设备应用程序中做同样的事情时，它在编译时给了我一个错误。错误提示：“错误 C2664：‘LoadLibraryW’：无法将参数 1 从‘const char [22]’转换为‘LPCWSTR’”。

我已经尝试过的解决方案如下： 1\. 在字符串（dll 的路径）之前使用“L”或“_T”或“TEXT”时，它会编译但在运行应用程序时，LoadLibrary 返回 NULL。2\. 将属性中的字符集更改为“使用多字节字符集”也没有帮助。

我正在使用 Visual Studio 2008 和 Windows Mobile SDK 6.0。关于这个问题的任何想法？我对 VC++ 和 Windows Mobile 都很陌生。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:10:49.547

两个问题！！

1) 所有 Windows CE / Windows Mobile API 都是 Unicode。因此，您需要为 Unicode 编译应用程序，并且需要将字符串常量包装在`_T()`宏中。（显式`L`前缀可能`_T()`更健壮。）

2) Windows CE / Windows Mobile 设备没有驱动器号，因此您的路径不可能正确。

所以你的电话应该更像

`LoadLibrary(_T("\SRV\RFIDReader.dll"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:38:14.453

这是真正的“windows ce”设备还是“Windows Mobile”？我问是因为您使用 cout 不会在 Windows Mobile 设备上的屏幕上输出任何内容。

所有 Windows CE 和 Mobile 都是 UNICODE（也称为 WideCharString、WCS，每个字符在内存中保存为两个字节）。

请从头开始一个新项目，并在新建项目向导中使用 C/C++-SmartDevice。

```
#include <iostream> 
#include <windows.h> 
#include <stdio.h> 
#include <tchar.h> 
using namespace std;
 HINSTANCE hDLL_platform;
 HINSTANCE hDLL_stack;

 int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow) {
    DWORD err;
     hDLL_stack = LoadLibrary(_T("**\\SRV\\RFIDReader.dll**"));
     if (hDLL_stack != NULL) { 
        cout<<"done"<<endl;
    } else { 
        err = GetLastError();
         cout<<"failed\n"<<endl;
     } 
    FreeLibrary(hDLL_stack);
    return (1);
 } 
```

字符串中的单个 \ 是转义开始字符。例如 \n 是换行符，\r 是 CR。您必须将字符串更改为“\SRV\RFIDReader.dll”。

DLL 在设备上的 \SRV 上是否真的可用？

只需使用众所周知的 DLL 检查您的代码，例如“\Windows\coredll.dll”。

问候

约瑟夫

# java - 在 doView() 上编辑响应内容

> ID：12069487
> 
> 赞同：1
> 
> 时间：2012-08-22T08:52:39.460
> 
> 标签：java, portlet, jsr286, jsr168

我有一个简单的`JSR 286`Portlet，它显示用户手册（纯`HTML`代码，而不是`JSP`）。

实际上，我的`doView`方法只包含以下内容：

```
public class UserManualPortlet extends GenericPortlet
{

    @Override
    protected void doView(RenderRequest request, RenderResponse response)
            throws PortletException, IOException
    {
        PortletRequestDispatcher rd = getPortletContext().getRequestDispatcher(
                "/html/usermanual.html");

        rd.include(request, response);    
    }
} 
```

这可以按预期工作，但是在包含图像时我遇到了麻烦。我知道图像的路径应该是这样的：

```
<img src='<%=renderResponse.encodeURL(renderRequest.getContextPath() + "/html/image.jpg")%>'/> 
```

但是，我的包含用户手册的 HTML 文件在其他地方使用，所以我想将其保存为纯 HTML 文件。

有没有办法用上面的例子动态**替换**我的经典`images urls`？也许使用`PrintWriter`响应？

如果这样的事情是不可能的，我认为我需要在构建`JSP`过程中生成一个文件。`Maven`

欢迎任何解决方案或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:19:38.447

使用 JSR-268 portlet，您可以更好地引用资源：`ResourceURL`使用创建`renderResponse.createResourceURL()`，然后`resourceID`在`ResourceURL`. 这应该会在所有 portlet 容器中提供更一致的结果。

也就是说，如果您想修改生成的内容，`usermanual.html`但又不想将其转换为 JSP，那么我将自己加载文件内容，同时解析它，而不是使用请求调度程序我做了 URL 替换，然后将所有内容打印到 portlet 的响应中。

# cordova - Phonegap 和 Twitter 网络意图

> ID：12069488
> 
> 赞同：1
> 
> 时间：2012-08-22T08:52:41.283
> 
> 标签：cordova, twitter, webintents

我有一个 Phonegap 1.3 应用程序。我想介绍一些适用于 iOS 和 Android 的 twitter 集成。

我想使用 Twitter Web Intents 但这给了我一个简单设置的白屏。

有没有人成功集成 Web Intents？它是否需要子浏览器功能，如果需要，它是如何工作的？

谢谢！

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:05:55.910

嗨检查这可能会帮助你[link1](http://a.shinynew.me/post/20369076673/bridging-the-phonegap-twitter-plugin)

或此[链接2](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/Twitter)

# jquery - 自动完成中的jquery ajax回调

> ID：12069489
> 
> 赞同：0
> 
> 时间：2012-08-22T08:52:42.160
> 
> 标签：jquery, jsonp

我正在使用 jquery 自动完成。当 ajax 请求完成时 jquery 调用 jsonpCallback 和响应。你能建议将 jsonpCallback(data) 函数放在哪里以使用 $.each 中的数据

```
$(".autoComplete").autocomplete({ source: function(req, add){

            $.ajax({
                  type: "GET",
                  url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
                  dataType:"jsonp"
            });

                var suggestions = [];  

                //process response  
                $.each(data, function(i, val){       //how do I get data variable                         
                suggestions.push(val.value); });

                 add(suggestions);
            }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:56:27.053

根据：[jquery api](http://api.jquery.com/jQuery.ajax/1) 你应该实现一个“成功块”

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

对于您的示例：

```
var suggestions = [];  
$(".autoComplete").autocomplete({ source: function(req, add){

            $.ajax({
                  type: "GET",
                  url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
                  dataType:"jsonp"
                  success: function(data) {

                    $.each(data, function(i, val){                         
                    suggestions.push(val.value); });
                          add(suggestions);
                    }
                 }
            });

}); 
```

//**编辑**：也许这会有所帮助：[jsonpcallback](https://stackoverflow.com/questions/6215235/jsonpcallback-function-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:59:33.310

```
 $(".autoComplete").autocomplete({ source: function(req, add){

            $.ajax({
                  type: "GET",
                  url: "http://herokory.herokuapp.com/autocomplete/jsonpCallback/a",
                  dataType:"jsonp"
    success: function(data) 
            {
                alert('Here is my data' +  data);
            }

            });

}); 
```

您应该在 ajax 调用中添加一个成功函数，这意味着如果 GET 请求成功，请执行以下操作，这是您将放置 .each 循环以遍历数据的地方。

还有其他块可以帮助您调试代码，例如错误块等。

# algorithm - RGB相似颜色逼近算法

> ID：12069494
> 
> 赞同：7
> 
> 时间：2012-08-22T08:53:11.050
> 
> 标签：algorithm, colors, approximation

鉴于在 RGB 中我们可以表示 256^3 组合 = 16,777,216 种颜色，并且由于人眼只能区分大约 10,000,000 种颜色，因此显然有 6,777,216 种 RGB 组合在颜色上与对应颜色无法区分。

压缩算法在此基础上工作时，我相信在估计整个帧的颜色范围的空间差异时。考虑到这一点，如何可靠地计算给定颜色是否在与另一种“相似”范围内？

当然，“相似性”将是某种可以调整的任意/可调参数，但无论如何这是一个近似值。那么是否有任何指针、伪代码、直观的代码示例、资源来帮助我对这样的函数进行建模？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T10:15:40.673

计算颜色之间距离的方法有很多，最简单的方法是在任何颜色空间中的颜色分量上定义的。这些是 RGB 颜色 (r1,g1,b1) 和 (r2,g2,b2) 之间的常见“距离”或度量：

*   L [1] : abs(r1-r2) + abs(g1-g2) + abs(b1-b2)
*   L [2] : sqrt((r1-r2)² + (g1-g2)² + (b1-b2)²)
*   L [∞</sub>: max(abs(r1-r2), abs(g1-g2), abs(b1-b2))]

然而，这些都没有考虑到人类视觉对颜色的敏感度低于对亮度的敏感度。为了获得最佳结果，您应该从 RGB 转换为分别编码亮度和颜色的颜色空间。然后在新的色彩空间中使用上述指标之一，可能会给亮度分量更多的权重，而对颜色分量的权重更少。

彼此无法区分的颜色区域称为[麦克亚当椭圆](http://en.wikipedia.org/wiki/MacAdam_ellipse)。[椭圆在CIELUV](http://en.wikipedia.org/wiki/CIELUV)和[CIELAB](http://en.wikipedia.org/wiki/CIELAB)颜色空间中变得接近圆形，这对计算非常有用，但不幸的是，从 RGB 进入这些颜色空间并不是那么简单。

JPEG 将颜色转换为[YC [b] C [r]](http://en.wikipedia.org/wiki/YCbCr)，其中 Y 是亮度，两个 C 编码颜色，然后将 C 分量的分辨率减半。您可以这样做，然后使用上述指标之一的加权版本，例如：

```
diff = sqrt(1.4*sqr(y1-y2) + .8*sqr(cb1-cb2) + .8*sqr(cr1-cr2)) 
```

维基百科中关于[色差](http://en.wikipedia.org/wiki/Color_difference)的文章有更多不同颜色空间的示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T10:04:42.663

可以使用[CIEDE2000 色差公式](http://www.ece.rochester.edu/~gsharma/ciede2000/)计算感知色差。[CIEDE2000 公式](http://en.wikipedia.org/wiki/Color_difference#CIEDE2000)基于LCH 颜色空间（亮度、色度和色调）。LCH 颜色空间表示为圆柱体（参见[此处](http://www.colorbasics.com/ColorSpace/)的图像）。

一个不太准确（但更易于管理）的模型是[CIE76](http://en.wikipedia.org/wiki/Color_difference#CIE76)色差公式，它基于[Lab 颜色空间 (L*a*b*)](http://en.wikipedia.org/wiki/L%2aa%2ab%2a)。RGB 或 CMYK 值与 L*a*b* 之间的转换没有简单的公式，因为 RGB 和 CMYK 颜色模型取决于设备。RGB 或 CMYK 值首先需要转换为特定的绝对色彩空间，例如 sRGB 或 Adob​​e RGB。此调整将取决于设备，但转换的结果数据将与设备无关，允许将数据转换为 CIE 1931 颜色空间，然后转换为 L*a*b*。[这篇](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.94.3205&rep=rep1&type=pdf)文章解释了过程和公式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:57:11.377

RGB 颜色系统的设计使得如果 2 种颜色的值彼此接近，则颜色在感知上也接近。

例子：

由 RGB = (100, 100, 100) 定义的颜色在感知上与颜色 RGB = (101, 101, 100)、RGB = (98, 100, 99) 等几乎相同...

# mediawiki - 要求新用户在 MediaWiki 中由管理员确认

> ID：12069496
> 
> 赞同：1
> 
> 时间：2012-08-22T08:53:16.013
> 
> 标签：mediawiki

设置后

```
$wgGroupPermissions['*']['read']    = true;
$wgGroupPermissions['*']['edit']    = false; 
$wgEmailConfirmToEdit = true; 
```

匿名用户不能编辑任何页面，因为每次他们都被要求确认他们的电子邮件地址。我想再添加一个只有管理员才能确认新用户的条件。这个怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:08:52.170

匿名用户无法使用您描述的设置编辑页面，因为您已通过设置明确禁用了他们的编辑权限：`$wgGroupPermissions['*']['edit'] = false;` 。

听起来您想要做的是创建一个具有编辑权限的新组，然后让管理员在确认用户而不是使用电子邮件确认后将用户添加到该组。例如：

```
$wgEmailConfirmToEdit = false;

$wgGroupPermissions['*']['read']    = true;
$wgGroupPermissions['*']['edit']    = false; 
$wgGroupPermissions['user']['edit']    = false;

$wgGroupPermissions['confirmeduser']['edit']    = true; 
```

然后管理员可以将用户添加到 Confirmeduser 组以授予他们编辑权限。

# android - Android网络监听器

> ID：12069498
> 
> 赞同：1
> 
> 时间：2012-08-22T08:53:33.797
> 
> 标签：android, networking, android-intent, broadcastreceiver

请帮助解决问题。任务：创建一个网络监听器。当 Internet 丢失时，显示 ProgressDialog。

```
ProgressDialog dialog;
private IntentFilter mNetworkStateChangedFilter;
private BroadcastReceiver mNetworkStateIntentReceiver;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mNetworkStateChangedFilter = new IntentFilter();
        mNetworkStateChangedFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);

        mNetworkStateIntentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {

            if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
                NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
                mTypeName = info.getTypeName();
                mSubtypeName = info.getSubtypeName();
                mAvailable = info.isAvailable();

                Log.i(LOGTAG, "Network Type: " + mTypeName 
                    + ", subtype: " + mSubtypeName
                    + ", available: " + mAvailable + " isConnected: " + info.isConnected());
                if (!info.isConnected()){
                    try{
                    showDialog();
                    }catch (Exception e){

                    }

                    }
                else if (info.isConnected()){
                        dismissDialog();    
                }

            }
            }
        };

        setContentView(R.layout.activity_main);
    } 
```

检查模拟器。我进入设置（操作OnPause），拔掉互联网，我回去（onResume） - 创建一个对话，没关系。再次在设置中，打开互联网，对话仍然存在。

```
@Override
    protected void onPause() {
        Log.d(LOGTAG, "onPause");
        super.onPause();
        unregisterReceiver(mNetworkStateIntentReceiver);
    };
    @Override
    protected void onResume() { 
        Log.d(LOGTAG, "onResume");
        super.onResume();
        registerReceiver(mNetworkStateIntentReceiver, mNetworkStateChangedFilter);
        unregisterReceiver(mNetworkStateIntentReceiver);
        registerReceiver(mNetworkStateIntentReceiver, mNetworkStateChangedFilter);
    };

public void showDialog() {
        dialog = ProgressDialog.show(this, "", "");
    }

public void dismissDialog() {
    try {
        dialog.dismiss();
    } catch (Exception e) {
        Log.i(LOGTAG, e.getMessage()); //Crash application
    }

    } 
```

尝试调试失败。`Log.i(LOGTAG, e.getMessage());`在dismissDialog() 中导致应用程序崩溃。

java.lang.RuntimeException：在 com.t.network.MainActivity$1@40519848 中接收广播 Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000000 (has extras) } 时出错

引起：java.lang.NullPointerException: println 需要一条消息

我如何使用进度/警报对话框来收听连接？

感谢

附言

```
Log.i(LOGTAG, "Network Type: " + mTypeName 
                    + ", subtype: " + mSubtypeName
                    + ", available: " + mAvailable + " isConnected: " + info.isConnected()); 
```

工作正常

PPS 我为我的英语道歉 :)

# php - htaccess 重定向松散的帖子数据！如何在使用 htaccess 重定向时保留发布数据？

> ID：12069501
> 
> 赞同：0
> 
> 时间：2012-08-22T08:53:44.953
> 
> 标签：php, .htaccess, post, rewrite

我有一个`.htaccess`文件重写`.php`为`.htm`：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php\s
RewriteRule .* %1.htm [L,R=301]
RewriteRule ^(.*)\.htm$ $1.php 
```

重定向工作正常，但重定向会丢失`$_POST`数据。`$_POST`重定向时如何保留数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:05:21.683

浏览器在重定向时将 POST 请求转换为 GET 请求。[RFC](http://www.ietf.org/rfc/rfc2616.txt)声明如果方法需要更改，他们应该提示用户，但他们都没有遵循，而是无条件地强制方法更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:06:34.653

如果您想简单地将 URL 从`.php`文件重写到`.htm`文件，您需要做的就是这样 -

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php\s
RewriteRule ^(.*)\.php$ $1.htm 
```

3行`.htaccess`详细说明流动行为 -

1.  打开重写引擎
2.  请求匹配给定的正则表达式。
3.  重写整个 URL 以使用`.htm`文件。

# scala - 阿卡演员+玩！2.0 Scala 版生成和捆绑actor实例的最佳实践

> ID：12069503
> 
> 赞同：3
> 
> 时间：2012-08-22T08:54:02.690
> 
> 标签：scala, playframework-2.0, akka

`Something`我的应用程序通过无状态控制器上的 API 调用获得了一个新实例。在我完成了我的关键任务（比如将其保存到我的 Postgres 数据库并提交事务）之后，我现在想做一堆即*发即弃*的操作。

在我的控制器中，我将模型实例发送到后处理器：

```
import _root_.com.eaio.uuid.UUID
import akka.actor.Props
// ... skip a bunch of code
play.api.libs.concurrent.Akka.system.actorOf(
    Props[MySomethingPostprocessorActor],
    name = "somethingActor"+new UUID().toString()
) ! something 
```

`MySomethingPostprocessorActor`演员长这样：

```
class MySomethingPostprocessorActor extends Actor with ActorLogging {

    def receive = {
        case Something(thing, alpha, beta) => try {
                play.api.libs.concurrent.Akka.system.actorOf(
                    Props[MongoActor],
                    name = "mongoActor"+new UUID().toString()
                ) ! Something(thing, alpha, beta)
                play.api.libs.concurrent.Akka.system.actorOf(
                    Props[PubsubActor],
                    name = "pubsubActor"+new UUID().toString()
                ) ! Something(thing, alpha, beta)
                // ... and so forth
        } catch {
            case e => {
                log.error("MySomethingPostprocessorActor error=[{}]", e)
            }
        }
    }
} 
```

**所以，这是我不确定的：**

[我知道根据此页面上的警告](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)不鼓励 Actor 工厂。我对此的补救措施是使用 提供的唯一字符串命名每个演员实例`UUID`，以绕过 your-actor-is-not-unique 错误：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1:
    Execution exception [[InvalidActorNameException:
        actor name somethingActor is not unique!]] 
```

有没有更好的方法来完成上述操作，即而不是给所有东西一个唯一的名称？我遇到的 Akka 文档中的所有示例都给演员一个静态名称，这有点误导。

（也欢迎任何其他评论，例如我使用的捆绑模式是否不受欢迎等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:46:27.283

据我所知，名称参数是可选的。

这可能是也可能不是 Akka + Play 的情况（尚未检查）。但是，在使用独立的 Actor 系统时，您通常只在以后需要该引用时才命名一个 Actor。

从它的声音来看，您在使用这些实例后会丢弃它们，因此您可能会跳过命名步骤。

更好的是，您可以通过将操作包装在 Futures 中并在需要时使用回调来节省创建每个参与者实例的开销：http: [//doc.akka.io/docs/akka/2.0.3/scala/futures。 html](http://doc.akka.io/docs/akka/2.0.3/scala/futures.html)

# powershell - 文件的 HashTable 不会产生对 Values 的 PsIsContainer 测试

> ID：12069507
> 
> 赞同：2
> 
> 时间：2012-08-22T08:54:34.417
> 
> 标签：powershell

```
$source = @{}
gci | %{$source.Add($_.FullName,$_)}
$source.getEnumerator() | %{($_.value).PsIsContainer} 
```

没有把我带到任何地方；但

```
gci | % {$_.PsIsContainer} 
```

我是否已经使用

```
$source.getEnumerator() | %{
if ((($_.Value).Attributes).toString() -eq "Directory")
   {
   ...
   } 
```

}

这似乎有点笨重

为什么 PsIsContainer 不适用于 HashTable 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:00:57.240

但是，当我使用更直接的方法将项目添加到表中时，它确实对我有用：

```
PS> $source =@{}
PS> gci|%{$source[$_.FullName] = $_}
PS> $source.GetEnumerator() | %{$_.Value.PSIsContainer}
True
False
False
False
False
False
False
True
False
... 
```

这似乎是使用`Add`将事物放入哈希表的方法的神器。

# r - 如何将向量和列表列表转换为 R 中的 data.frame？

> ID：12069508
> 
> 赞同：9
> 
> 时间：2012-08-22T08:54:37.850
> 
> 标签：r, dataframe

本质上，我追求的是向量和 LoL 具有任意长度的列表列表的乘积。

```
dose<-c(10,20,30,40,50)  
resp<-list(c(.3),c(.4,.45,.48),c(.6,.59),c(.8,.76,.78),c(.9)) 
```

我可以得到一些非常接近的东西

```
data.frame(dose,I(resp)) 
```

但这并不完全正确。我需要扩展列表的 resp 列，将值与剂量列配对。

所需的格式是：

```
10 .3
20 .4
20 .45
20 .48
30 .6
30 .59
40 .8
40 .76
40 .78
50 .9 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T09:03:41.323

这是使用`rep()`and的解决方案`unlist()`。

*   用于`rep`重复 的元素`dose`，每个元素的长度为`resp`。
*   用来`unlist`转`resp`成向量

编码：

```
data.frame(
  dose = rep(dose, sapply(resp, length)),
  resp = unlist(resp)
)

   dose resp
1    10 0.30
2    20 0.40
3    20 0.45
4    20 0.48
5    30 0.60
6    30 0.59
7    40 0.80
8    40 0.76
9    40 0.78
10   50 0.90 
```

# java - 如何使用 DOM 解析器从 XML 文件中读取注释

> ID：12069509
> 
> 赞同：2
> 
> 时间：2012-08-22T08:54:41.017
> 
> 标签：java, dom

我正在尝试阅读 XML 文件中的注释。用 DOM 解析后无法获取评论节点。

代码：

```
DocumentBuilderFactory docBldrFactry = DocumentBuilderFactory.newInstance();
docBldrFactry.setIgnoringComments(false);
DocumentBuilder docBuilder = docBldrFactry.newDocumentBuilder();
Document document = docBuilder.parse(new File("C:\\webser.xml"));
Element rootElement = document.getDocumentElement();
NodeList list = rootElement.getElementsByTagName("Bean"); 
```

注释在 Bean 元素下。当我遍历 Bean 元素的子节点时，我没有得到注释节点。

这是XML

```
<Beans>
  <Bean>
    <!-- Testing Comments -->
    <API name ="xyz" />
  </Bean>
</Beans> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-27T21:18:51.153

希望这可以帮助 ：）

```
XMLStreamReader xr = XMLInputFactory.newInstance().createXMLStreamReader(new FileInputStream("file.xml")); 
while (xr.hasNext()) {
    if (xr.next() == XMLStreamConstants.COMMENT) {
        String comment = xr.getText();
    } } 
```

# android - 只描述一次 AndroidManifest 中的所有活动

> ID：12069510
> 
> 赞同：2
> 
> 时间：2012-08-22T08:54:45.260
> 
> 标签：android, android-manifest

在`AndroidManifest.xml`文件中，我注册了一些使用相同属性描述的活动。只是`name`s 不同。

是否可以定义一些属性组并使用这个定义的组来描述所有这些活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:11:35.440

可悲的是，这是不可能的。

AndroidManifest.xml 由不同的应用程序（如启动器）解析，因此无法对活动进行分组，因为它们是应用程序的官方入口点。

# php - 即使未满足 PHP“if”语句，HTML 表单也会显示

> ID：12069512
> 
> 赞同：0
> 
> 时间：2012-08-22T08:54:48.913
> 
> 标签：php, html, if-statement, form-submit

我对编程很陌生（尤其是在 PHP 中）。无论如何，我现在一直在尝试创建一个同时使用 PHP 和 HTML 的登录页面。

主要思想是，如果用户是第一次来到登录页面，那么他们必须先点击“提交”按钮；然后它将重新加载页面，但现在将有一个用户将输入信息以调用另一个 PHP 脚本的位置。

我尝试了以下代码来实现这一点：

```
 <form method = "post"
                action = "Sign-In2.html">

          <p>
          <br />
            <input type = "submit"
                   name = "returnUser"
                   value = "Click To Log In">
          </P>
          </form>

          <?php

          if (isset($_POST['returnUser'])) {

          ?>    

          <form method = "post"
                action = "Login2.php">

            <p>
            <br />
            In Honor Of:
            <input type = "text"
                   name = "userName"
                   value = "">

            <br />
            EDGE Code:
            <input type = "password"
                   name = "edgeCode"
                   value = "">

            <br /><br />
            <input type = "checkbox"
                   name = "rememberUser"
                   value = "remembered">Remember Me

            <br />
            <input type = "submit"
                   value = "Log Me In">

            </p>
            </form>

          <?php

          } else {

          } //end if

          ?> 
```

从我在线阅读的所有内容（来自本网站和其他网站），我的印象是我的代码包括两种形式和一个 PHP“if”语句。

FIRST 表单只提供了一个名为“returnUser”的“提交”按钮并重新加载页面（名为 Sign-In2.html）。

然后 PHP 介入并运行条件检查。如果第一个表单中的“提交”按钮实际上已经被点击，那么第二个表单将被运行。如果它没有被点击，那么什么都不会发生。

所以我的问题是，当我从 localhost WAMPserver 运行此代码时，两种形式都会出现！我无法理解或找出为什么当我加载页面时不仅第一个表单而且两者都出现了！我只想显示第一个提交按钮，以便我可以单击它并使用第二个表单中的输入字段刷新页面:( 任何帮助将不胜感激！

注意：第二种形式和它的 phpscript 都运行没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:57:42.550

您想显示一种形式或另一种形式，因此请使用`if`语句选择要显示的形式。您的代码目前正在执行的操作是显示第一个表单 - 然后如果您`$_POST`发送了一个值，则显示第二个表单。

将代码更改为以下将显示一种或另一种形式，具体取决于是否`$_POST`设置。

```
<?php

if (isset($_POST['returnUser']))
{
?>    

    <form method = "post"
    action = "">

    <p>
    <br />
    In Honor Of:
    <input type = "text"
       name = "userName"
       value = "">

    <br />
    EDGE Code:
    <input type = "password"
       name = "edgeCode"
       value = "">

    <br /><br />
    <input type = "checkbox"
       name = "rememberUser"
       value = "remembered">Remember Me

    <br />
    <input type = "submit"
       value = "Log Me In">

    </p>
    </form>

<?php
} 
else 
{
?>

    <form method = "post"
    action = "">

    <p>
    <br />
    <input type = "submit"
       name = "returnUser"
       value = "Click To Log In">
    </P>
    </form>

    <?php
} //end if

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:48:34.450

将文件名更改`Sign-In2.html`为`Sign-In2.php`与表单操作相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:49:42.153

这是一个普通的 .html 页面吗？

默认情况下，PHP 不在这些上运行，因此您的`<?php ?>`标签被解释为普通的 HTML 标签。

将文件的扩展名更改为 PHP 以解决它。

# java - 如何配置 JBoss/JMS 消息速率限制/流量控制

> ID：12069513
> 
> 赞同：0
> 
> 时间：2012-08-22T08:54:48.787
> 
> 标签：java, jboss, jms, jboss5.x

我有一个快速的生产者 ESB（将 CSV 转换为 XML）和一个慢的消费者 ESB（执行 XML 的 zip/base64/SOAP 包装）。ESB 通过 JMS 主题进行通信。此设计是遗留的，无法更改。当处理一个大的 CSV 文件时，JBoss AS (5.2) 会因为生产者淹没消费者而停止，即使堆大小为 4096M。请原谅我是 JBoss/JMS 的新手，发现这一切都令人困惑。

生产者发送配置

```
<action class="com.example.FooAction" name="ProcessFoo">
    <property name="springJndiLocation" value="FooEsbSpring" />
    <property name="exceptionMethod" value="exceptionHandler" />
    <property name="okMethod" value="processSuccess" />
    <property name="jndiName" value="topic/FooTopic" />
    <property name="connection-factory" value="ConnectionFactory" />
    <property name="unwrap" value="true" />
    <property name="security-principal" value="guest" />
    <property name="security-credential" value="guest" />
</action> 
```

生产者发送代码：

```
Message msg = MessageFactory.getInstance().getMessage(MessageType.JAVA_SERIALIZED);
msg.getBody().add(foo); // foo is the business specific message
new JMSRouter(config).process(msg); 
```

消费者接收配置：

```
<jms-jca-provider connection-factory="ConnectionFactory" name="FooMessaging">
    <jms-bus busid="fooChannel">
        <jms-message-filter dest-name="topic/FooTopic"
            dest-type="TOPIC" transacted="false" />
    </jms-bus>
    <activation-config>
        <property name="dLQMaxResent" value="1" />
    </activation-config>
</jms-jca-provider> 
```

主题配置

```
<server>
<mbean code="org.jboss.jms.server.destination.TopicService"
    name="jboss.esb.quickstart.destination:service=Topic,name=FooTopic"
    xmbean-dd="xmdesc/Queue-xmbean.xml">
    <depends optional-attribute-name="ServerPeer">jboss.messaging:service=ServerPeer
    </depends>
    <depends>jboss.messaging:service=PostOffice</depends>
</mbean>
</server> 
```

到目前为止我尝试过的事情。

*   在没有消费者 ESB 的情况下运行发布者 ESB - 正如预期的那样没有问题。
*   大量谷歌搜索，寻找关于stackoverflow的现有问题
*   找到了一些对[速率限制](http://docs.jboss.org/hornetq/2.3.0.Alpha/docs/user-manual/html/examples.html#producer-rate-limiting-example)的引用，但我看不到如何将它们放入我的配置中。
*   我试图找到一个 API 来发现有多少消息已经在未处理的主题上（希望我可以实现自己的退避策略）。
*   看了这个[文档](http://docs.jboss.org/jbossas/admindevel326/html/ch6.chapt.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:08:46.883

请看本节[6.3.17.2。org.jboss.mq.server.jmx.Topic](http://docs.jboss.org/jbossas/admindevel326/html/ch6.chapt.html#d0e12805)并使用 JMX 使用“深度”相关属性。

它可能会帮助您建立您正在寻找的退避策略

# php - PHP - 访问其他网络数据库

> ID：12069514
> 
> 赞同：0
> 
> 时间：2012-08-22T08:54:51.070
> 
> 标签：php, database, web

新手问题。我有一个项目需要使用 PHP 访问其他 Web 数据库。可能吗？

例如：我有一个域 www.domain1.com 和 database1，我有另一个域 www.domain2.com 和 database2 不同的主机。我可以从同样使用 database2 的 www.domain2.com 访问 database1 吗？

如果它是具有 2 个不同域的同一主机，是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:59:11.517

是的。为此，只需按照此处的其他答案进行操作。

但是，为了以正确的方式做事，更推荐在您的 Web 应用程序和远程数据库之间创建一些中间件（例如 SOAP、RESTful 或只是原始的 ad-hoc XML）。它将增加安全性和解耦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:22:15.543

如果您可以访问本地主机之外的其他内容，则可以这样：

```
$conn2 = mysql_connect($otherhost, $otheruser, $otherpassword, true);
//the true at the end makes a new link

$query = mysql_query($your_query, $conn2); 
```

这只是向另一个数据库发送查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T08:56:55.387

可以，只要服务器端口对 PHP 托管域开放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T08:58:02.980

有可能如果

*   远程数据库用户正在接受来自本地脚本的连接
*   machine2的 mysql 端口`3306`对 machine1 开放

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T08:58:28.130

您可以连接到应用程序需要的任意数量的数据库。

开始：

[http://dev.mysql.com/doc/refman/5.0/en/connecting.html](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)

确保 domain2 的端口允许来自 domain1 的身份验证（或者您可以保持对所有人开放，不推荐）。

如果您说的是 JOINING 数据库，那么到目前为止，我已经参与了许多项目，其中我们在同一台服务器上拥有多个数据库。所以 HOST 不是问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T08:58:38.857

是的，如果您使用 MySql，您必须将其设置为允许远程连接，然后在 mysql 连接函数中传递远程数据库的 IP/域

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T08:59:02.307

是的，只要你有一个开放的 80 端口就可以了，确保你让主机知道，这样他们就可以让你的帐户通过。

# jquery - jQuery 切换不起作用

> ID：12069515
> 
> 赞同：1
> 
> 时间：2012-08-22T08:54:53.810
> 
> 标签：jquery, append, toggle, accordion, show

我对 JQuery 手风琴有一些问题。我想创建“动态”手风琴（通过单击“addBtn”添加新项目），创建了一个新项目，但切换不适用（仅应用第一个项目）

**HTML**

```
<div id="accordion">

        <div id="aE">
                <div id="aT" class="aT_val"> 
                        <h3></h3>
                </div>
                <div id="aC" class="aC_val">
                        <p></p>
                </div>
        </div>

</div> 
```

**JS**

```
var conTit = 'title';
var conCont = 'content';

var count = 0;

$('.aC_val').hide();

$('.aT_val').toggle(
    function() {
        $(this).next('.aC_val').show();
    },
    function() {
        $(this).next('.aC_val').hide();
    }
);

$('#addBtn').click(function() {
        count++;

        $('#accordion').append('<div id="aE' + count + '"><div id="aT' + count + '" class="aT_val"><h3>' + conTit + '</h3></div><div id="aC' + count + '" class="aC_val"><p>' + conCont + '</p></div></div>'); 
```

错误在哪里，同事们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:12:18.513

手风琴功能是否不期望`<h3>`在

```
<div id="accordion"> tag 
```

例子：

```
<div id="accordion">
    <h3><a href="#"></a>General Variables</h3>
    <div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:03:28.173

对于动态生成的元素，应该委托事件，可以使用[`on`](http://api.jquery.com/on/)方法：

```
$(document).on('click', '.aT_val', function(){
     $(this).next().toggle();
}) 
```

请注意，`toggle`事件已[弃用](http://api.jquery.com/category/deprecated/)。

# wpf - 如何在我的 ViewModel 中从 ListView 获取 SelectedItems

> ID：12069521
> 
> 赞同：1
> 
> 时间：2012-08-22T08:55:11.773
> 
> 标签：wpf, listviewitem

> **可能重复：**
> [绑定 Listview 的 SelectedItems](https://stackoverflow.com/questions/8999509/binding-selecteditems-of-listview)

我有一个 ListView，用户可以选择多个项目。我需要在我的视图模型中获取从 ListView 中选择的项目列表。

请建议从 ListView 中获取 SelectedItems。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:29:22.607

我通常有两种方法

如果我只需要知道出于命令的目的选择了什么，我将设置我的`RelayCommand`or`DelegateCommand`以`ViewModel`期望一个类型的参数`IList<SomeClass>`并将`ListView.SelectedItems`in 作为`CommandParameter`

```
<Button Command="{Binding SomeCommand}"
        CommandParameter="{Binding ElementName=MyListView, Path=SelectedItems}" /> 
```

`IsSelected`我经常使用的另一种方法是在 中使用的任何数据项上创建一个属性`ListView`，并将其绑定到该`ListViewItem.IsSelected`属性

```
<Style TargetType="{x:Type ListViewItem}">
    <Setter Property="IsSelected" Value="{Binding IsSelected}" />
</Style> 
```

然后我`ViewModel`可以通过查看它的`IsSelected`属性来确定一个项目是否被选中

```
foreach(var item in MyCollection)
{
    if (item.IsSelected)
        // Do work
} 
```

# jsf - picklist PrimeFaces - 如何从目标列表中获取数据？

> ID：12069526
> 
> 赞同：0
> 
> 时间：2012-08-22T08:55:28.897
> 
> 标签：jsf, primefaces

我通过 PrimeFaces 创建了一个选择列表。现在，当我单击命令按钮时，我想处理目标列表中列出的选定项目。

我想通过控制器传递数据并将它们存储在我的数据库中。但是每次我调用函数 duallist.getTarget() 它都是空的。

我创建了一个 foreach 循环，我想在其中选择目标列表中的所有项目：

**控制器（豆）：**

```
private List<DTOAktivitaet> source = new ArrayList<DTOAktivitaet>();
private List<DTOAktivitaet> target = new ArrayList<DTOAktivitaet>();

private List<DTOAktivitaet> zwischen = new ArrayList<DTOAktivitaet>();

public void speicherAktiZug() {

    DTOAktivitaet aktivitaet_vorgaenger = null;

    for (DTOAktivitaet item : controller.getAktivitaeten()) {
        if (item.toString().equals(selected)) {
            aktivitaet_vorgaenger = item;
        }
    }

    for (DTOAktivitaet aktivitaet : zwischen) {
        try {
            dao.aktiZugAkt(aktivitaet_vorgaenger, aktivitaet);
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}

public AktiListController() {
    for (DTOAktivitaet ak : controller.getAktivitaeten()) {
        source.add(ak);
    }
    aktis = new DualListModel<DTOAktivitaet>(source, target);
    zwischen = aktis.getTarget();
} 
```

**JSF：**

```
 <h:form id="form" name="formular">
                <h:outputText id="aktivitaet"
                                value="#{aktiListController.selected}" />

                <p:pickList id="pickList" value="#{aktiListController.aktis}"
                    var="aktivitaet" itemValue="#{aktivitaet}"
                    itemLabel="#{aktivitaet}" converter="aktivitaetsConverter"
                    showSourceControls="true" showTargetControls="true" />
                <h:commandButton
                    action="#{aktiListController.speicherAktiZug}"
                    value="Aktivität-Abhängigkeit anlegen" class="commandButton">
                </h:commandButton>
            </h:form> 
```

**转换器：**

```
@EJB
public class AktiListConverter implements Converter {

private InitialisierungController controller = InitialisierungController
        .getInstance();
DTOAktivitaet aktivitaet = new DTOAktivitaet();
String name = "";

@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {

    for (DTOAktivitaet item : controller.getAktivitaeten()) {
        if (item.toString().equalsIgnoreCase(arg2)) {
            this.aktivitaet = item;
            System.out.println(aktivitaet);
            return aktivitaet;
        }

    }

    return null;

}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {

    this.aktivitaet = (DTOAktivitaet) arg2;

    return this.name = aktivitaet.getTeambezeichnung();

}
} 
```

**我的问题：**在我想将项目存储在我的数据库中之前，目标列表是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:29:19.553

我不完全理解您的代码，因为它不是用英文编写的，但据我所知，您的 Converter 写得不好。据我所知，你基本上做了一个`toString()`和一个`fromString()`。这很容易出错，而且你这样做的方式在性能上很重要。最好使用唯一 ID（业务或数据库）。

例子：

```
@FacesConverter(value = "aktiListConverter")
public class AktiListConverter implements Converter
{
    private InitialisierungController controller = InitialisierungController.getInstance();

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2)
    {
        //Get object by it's unique ID
        return controller.getById(Long.parseLong(arg2));
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2)
    {
        //Return object's unique ID
        return ((DTOAktivitaet) arg2).getId();
    }
} 
```

与其将对象用作 itemLabel （执行 a `toString()`），不如使用可以为人生成漂亮标签的东西`getName()`。

```
itemLabel="#{aktivitaet.nameOrSomething}" 
```

该`speicherAktiZug()`方法对我来说真的没有意义，所以我走了这么远：

```
public class AktiListController
{
    private List<DTOAktivitaet> source;
    private List<DTOAktivitaet> target = new ArrayList<DTOAktivitaet>();
    private DualListModel<DTOAktivitaet> aktis;

    public AktiListController()
    {
        source = controller.getAktivitaeten();
        aktis = new DualListModel<DTOAktivitaet>(source, target);
    }

    //Getters and setters

    public void speicherAktiZug()
    {
        target = aktis.getTarget();

        //target should contain the picked items here.
    }
} 
```

我看到你也在使用`aktiListController.selected`，但我看不到它的用途。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-02T19:47:54.897

# (XHTML) 和 (Class Converter) 之间的 Conterter 名称不相等。

转换器="aktivitaetsConverter"

公共类 AktiListConverter 实现 Converter {...}

# java - 是否存在通过 JavaScript 通过 Java 进行的 FTP 上传？

> ID：12069530
> 
> 赞同：0
> 
> 时间：2012-08-22T08:56:02.153
> 
> 标签：java, silverlight, ftp

我有以下场景：silverlight-plugin 记录一些音频并将`byte[]`其存储在我想上传到 FTP 的文件中。不幸的是，Silverlight 中的 FTP 上传很痛苦，因为我需要实现套接字。
所以我虽然，嗯...

![在此处输入图像描述](../Images/5e4e553aac3f86736f6db51a8bb5dbf7.png)

那么，是否存在一个可以完成这项工作**并且**是开源的 Java-Applet？啊，还有……是的……只有真正的 (S)FTP 才是理想的，因为我会尝试上传 laaaaarge 文件……哦，是的……任何 HTML5 特定的时髦东西都是（不幸的是）不可能...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:00:23.700

请理解 Applet 和 JavaScript 是客户端的。您仍然必须使用服务器端脚本来执行 FTP 操作。在您的情况下，可能必须使用 JSP / Servlet。

# objective-c - setRightBarButtonItems：ios4 不支持动画

> ID：12069535
> 
> 赞同：1
> 
> 时间：2012-08-22T08:56:14.963
> 
> 标签：objective-c, ios, ios5, ios4

iOS4 不支持`setRightBarButtonItems:animated:`a的方法。`UINavigationItem`

我如何重写此代码以在栏右侧添加 2 个按钮？

```
[viewController.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:helpButton, settingsButton, nil] animated:YES]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:03:13.737

您可以在将按钮添加到视图之前将其 alpha 设置为 0，然后将其值设置为 1.0。

```
//..Create the buttons
//Make it invisible
helpButton.alpha = 0.0;
settingsButton.alpha = 0.0

//Add them to the navBar
[self.navigationController.navigationBar addSubview:helpButton];
[self.navigationController.navigationBar addSubview:settingsButton];

//Animate it to 1.0
[UIView animateWithDuration:0.3 animations:^(void) {
      helpButton.alpha = 1.0;
      settingsButton.alpha = 1.0
    }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:13:24.117

如果要在 iOS4 中显示多个按钮，则必须手动创建它们。

例如，您可以将 titleView 设置为自定义视图，并通过覆盖 ViewController 的 setTitle 来做任何您想做的事情：

```
- (void)setTitle:(NSString *)title
{
        UIView *titleView = (UIView *)self.navigationItem.titleView;
        if(!titleView)
        {
            titleView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.bounds.size.width, 40.0)];
            titleView.backgroundColor = [UIColor greenColor];
            self.navigationItem.titleView = titleView;
        }
} 
```

而且您需要使用 a`UIButton`而不是`UIBarButtonItem`.

# python - matplotlib - 第二个 X 轴有一个偏移量（相对于第一个 X 轴）我无法确定

> ID：12069541
> 
> 赞同：2
> 
> 时间：2012-08-22T08:56:43.080
> 
> 标签：python, matplotlib

继我的问题之后：[强制 Y 轴只使用整数](https://stackoverflow.com/questions/12050393/force-the-y-axis-to-only-use-integers)和我在那里得到的巨大帮助我在绘制一个漂亮的图表时遇到了另一个问题。

我正在使用 pyplot 模块在图表顶部绘制带有一些参考点的第二轴，但我似乎无法让底部和顶部 x 轴就据称相同的位置达成一致......

![图形制作器的当前输出...](../Images/b9ff8b301d6aca2c4065d68528857c2f.png)

如果您查看图表，您会看到 1 Kb 的标记（虚线）和相同的第 2 轴股票标签不一致。与 1 Mb 相同，但 1Gb 似乎排成一行。

第二个轴来自一个重叠的子图（据我所知）从这里开始：

```
fig = plt.figure()
ax1 = fig.add_subplot(111) 
```

我对两个轴都使用相同的约束：

```
 ax1.set_xscale("log", basex=2)
 ax1.set_xlim(0,34359738368) 
```

和：

```
ax2 = ax1.twiny()
ax2.set_xlim(0,34359738368)
ax2.set_xscale("log", basex=2) 
```

并且两组标记的值相同：

```
ax1.axvline(x=1024, color='black', linestyle='--')
ax1.axvline(x=1048576, color='black', linestyle='--')
ax1.axvline(x=1073741824, color='black', linestyle='--') 
```

和：

```
ax2.set_xticks([1024, 1048576, 1073741824])
ax2.set_xticklabels(['1 Kbyte','1 Mbyte','1 Gbyte'], fontsize=8) 
```

任何想法为什么他们不排队？我确定我一路上做了一些愚蠢的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:25:57.670

当我准确运行您发布的代码片段时，我会得到一个图表，显示您看到的分歧，但也不同意 x 限制是什么：

```
In [68]: ax1.get_xlim()
Out[68]: (9.9999999999999995e-08, 34359738368.0)

In [69]: ax2.get_xlim()
Out[69]: (0.0, 34359738368.0) 
```

这（显然）是因为您以不同的顺序调用不同的轴，`set_xscale()`并给出. 如果你有一个边界，然后设置一个轴，它显然会尝试从中恢复，但不是相反。`set_xlim()``log(0)``-inf``0``log`

如果您使用`0`但使用相同的顺序：

```
In [103]: ax1.get_xlim()
Out[103]: (0.0, 34359738368.0)

In [104]: ax2.get_xlim()
Out[104]: (0.0, 34359738368.0) 
```

或者如果您使用下限 of`1`代替，您会看到：

```
In [88]: ax1.get_xlim()
Out[88]: (1.0, 34359738368.0)

In [89]: ax2.get_xlim()
Out[89]: (1.0, 34359738368.0) 
```

我自己，我会使用第二种方法：更明确，并且不引入顺序依赖。

# android - 关闭 ProgressDialog 后点亮屏幕

> ID：12069543
> 
> 赞同：0
> 
> 时间：2012-08-22T08:56:49.363
> 
> 标签：android, android-layout

我有一个使用 ProgressDialog 的活动。

执行后`dialog.dismiss()`，屏幕一直是灰色的，直到用户按下屏幕才会亮起。

命令后如何使屏幕亮起`dialog.dismiss()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:58:42.433

```
int brightnessMode = Settings.System.getInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS_MODE);
if (brightnessMode == Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC) {
    Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS_MODE, Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
}

WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
layoutParams.screenBrightness = 0.5F; // set 50% brightness
getWindow().setAttributes(layoutParams); 
```

# maven - 如何正确分叉一个Maven项目？

> ID：12069546
> 
> 赞同：8
> 
> 时间：2012-08-22T08:56:54.607
> 
> 标签：maven

我正在尝试分叉一个已经在主存储库中的已停产的 Maven 库。

这样做时要遵循哪些好的指导方针？

是否应该更改 groupId/artifactId 以使其不与 maven 存储库中已经存在的库发生冲突？

这个库将是一个项目的依赖项，该项目也将公开可用（在 maven repo 中），所以这个库也应该在那里。

这些修改增加了库工作方式的改进和一些更改，所以我希望它与旧版本分开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-26T19:42:57.440

Sonatype[建议](http://central.sonatype.org/pages/choosing-your-coordinates.html)`groupId`您在 fork 项目时更改。

> B2）在您的分叉项目 groupId 下上传它们（大概是您拥有并适合分叉的一个）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T09:02:39.123

我假设您正在分叉另一个项目以供内部使用？然后我会保留原来的 groupId/artifactId，但在版本中添加一个后缀。如果上游版本是 1.0.0，您的自定义版本将是 1.0.0-custom。

如果您创建一个公共分叉，那么您基本上必须使用一个新的项目名称和一个新的 groupId/artifactId。

# ruby-on-rails - 如何确保对象在视图中始终可用？

> ID：12069547
> 
> 赞同：0
> 
> 时间：2012-08-22T08:56:54.860
> 
> 标签：ruby-on-rails, ruby

我的应用程序布局视图中有一些代码需要对象存在才能工作。该对象存在于某些控制器上，但不是全部。

起初我以为我可以在 application_controller 上使用 after_filter 来确保对象存在。但这不起作用，因为 after_filter 仅在视图渲染后应用，而且它显然也是一种[反模式](http://gilesbowkett.blogspot.com/2006/12/afterfilter-in-rails-pitfall.html)。

什么是确保对象始终存在的最佳方法，而不是在已经创建对象的控制器上不必要地创建对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:07:40.493

假设您的变量是@foo。

application_helper.rb

```
def foo
  @foo ||= generate_foo()
end 
```

然后从任何角度来看，您只需通过 foo 而不是 @foo 调用您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:07:11.347

这可能也有它自己的缺陷，但就个人而言，我将在我的方法中创建一个方法`application_controller`来返回实例。要使其在视图中可用，只需将方法传递给`helper_method`. `helper_method`用于在视图、助手和控制器之间共享方法。

我主要通过身份验证来做到这一点。所以你我会有类似的东西；

```
def current_user
  @current_user ||= User.find_by_id(session[:user_id])
end

helper_method :current_user # make current_user available in the views 
```

# wordpress - 如何将 wordpress 从 mamp 推送到 hostgator

> ID：12069548
> 
> 赞同：0
> 
> 时间：2012-08-22T08:57:08.270
> 
> 标签：wordpress, mamp

我在 mamp 上写了一篇博客，想加入 hostgator。我必须重新创建 hostgator 中的所有内容，例如[在 Hostgator 上安装 Wordpress](http://www.probloggingsuccess.com/install-wordpress-hostgator-step-step-guide/)。有什么办法可以直接将我的东西推入 hostgator 而不重做 hostgator 中的所有内容。需要一些建议。。谢谢。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:09:02.463

将本地版本的 Wordpress 部署到实时服务器非常容易。首先，你是对的，我不会费心在你的服务器上安装一个干净的 Wordpress 副本，然后你必须完全重建网站。

你需要做的是；

1.  将所有文件从本地计算机 FTP 到服务器。
2.  将整个数据库从本地 phpmyadmin 转移到服务器上的新数据库
3.  更改 wp-config.php 中的数据库连接详细信息
4.  对您的默认 Wordpress .htaccess 进行任何必要的更改。我的意思是您的 MAMP 站点可能不在根目录中，但您的实时站点可能会在根目录中。如果您设置了 SEO 永久链接，那么您将从重写规则和 .htaccess 中的基础中删除 Mamp 子目录。您的主机可能还要求您在此处添加规则（即指定要使用的 PHP 版本等）。您总是可以使用他们的安装程序安装 Wordpress，看看他们是否自己添加了任何特殊规则。

到目前为止一切都很容易 - 现在是我的小费。将 Wordpress 数据库从本地开发环境迁移到现场可能会非常痛苦，因为 Wordpress（以及许多插件/主题开发人员）使用序列化数组来存储数据。因此，如果您在数据库上进行查找和替换以将旧网址替换为新网址，您将禁用很多东西，例如配置设置和小部件（特别是文本小部件，但最终需要重新创建大量内容）。

下载此文件；

[http://interconnectit.com/124/search-and-replace-for-wordpress-databases/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)

并将其上传到服务器并直接在浏览器中访问。运行快速表单并在您的数据库 url 上执行序列化的数组友好查找和替换。任务完成。祝你好运。

# javascript - 自定义 jquery 验证器

> ID：12069551
> 
> 赞同：0
> 
> 时间：2012-08-22T08:57:31.437
> 
> 标签：javascript, jquery, jquery-validate, validation

我有以下代码：

```
<form id="reg_form_pay" class="fancy_form" action="" method="POST">
  <div class="wrap_input" style="margin-bottom: 10px;">
    <p class="inp_label">Firstname:</p>
    <i> </i>
    <input id="pay_firstname" type="text" value="" name="FirstName" style="width: 157px;">
  </div>
  <div class="wrap_input" style="margin-bottom: 10px;">
    <p class="inp_label">Surname:</p>
    <i> </i>
    <input id="pay_lastname" type="text" value="" name="Surname" style="width: 157px;">
  </div>
  <div class="wrap_input" style="margin-bottom: 10px; margin-top: 34px;">
    <p class="inp_label">E-mail:</p>
    <i> </i>
    <input id="pay_email" type="text" value="" name="Email" style="width: 157px;">
  </div>
  <div class="wrap_input" style="margin-top: 34px;">
    <p class="inp_label">Phone:</p>
    <i> </i>
    <input id="pay_phone" type="text" value="" name="PhoneNumber" style="width: 157px;">
  </div>
</form> 
```

和验证：

```
$("#reg_form_pay").validate({
            rules: {
                Email: { required: true, email: true, checkEmail: true },
                PhoneNumber: { required: true, checkPhoneNumber: true },
                FirstName: { required: true },
                Surname: { required: true }
            }, 
        }); 
```

默认情况下，验证器`label`在验证为假时写入。我不想添加带有错误描述的元素。我想用 class 将类添加`error`到父`div`级`wrap_input`。我怎么能告诉验证者这样做呢？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:11:21.337

将此添加到发送到的选项`validate`中将起作用：

```
showErrors: function(errorMap, errorList) {
    $.each(errorList,function(i,e){
        $(e.element).parents('.wrap_input').addClass('error');
    });                   
} 
```

现场示例：http: [//jsfiddle.net/nqp8J/](http://jsfiddle.net/nqp8J/)

# matlab - 缺失数据的修正线性插值

> ID：12069561
> 
> 赞同：0
> 
> 时间：2012-08-22T08:58:24.637
> 
> 标签：matlab, interpolation, nan, linear-interpolation

想象一组具有给定 x 值（作为列向量）和几个 y 值组合在矩阵中的数据（列向量的行向量）。矩阵中的某些值不可用：

```
%% Create the test data
N = 1e2; % Number of x-values

x = 2*sort(rand(N, 1))-1;
Y = [x.^2, x.^3, x.^4, x.^5, x.^6]; % Example values
Y(50:80, 4) = NaN(31, 1); % Some values are not avaiable 
```

现在我有一个用于插值的新 x 值的列向量。

```
K = 1e2; % Number of interplolation values
x_i = rand(K, 1); 
```

我的目标是找到一种快速的方法来插入给定 x_i 值的所有 y 值。如果 y 值中有 NaN 值，我想使用缺失数据之前的 y 值。在示例情况下，这将是 中的数据`Y(49, :)`。

如果我使用`interp1`，我会得到 NaN 值，并且对于大型`x`和执行速度很慢`x_i`：

```
starttime = cputime;
Y_i1 = interp1(x, Y, x_i);
executiontime1 = cputime - starttime 
```

另一种方法是`interp1q`，它大约快两倍。

**什么是允许我修改的非常快速的方法？**

可能的想法：

1.  进行后处理`Y_i1`以消除- 值`NaN`。
2.  使用循环和 - 命令的组合`find`始终使用邻居而不进行插值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:47:48.543

使用`interp1`样条插值 ( `spline`) 会忽略 NaN。

# mongodb - MongoDB：通过索引加速聚合还是找到不同的解决方案？

> ID：12069568
> 
> 赞同：3
> 
> 时间：2012-08-22T08:58:49.837
> 
> 标签：mongodb

好的，MongoDB专家，请看一下我的收藏：

```
[{
  "_id" : "item_0",
  "Name" : "Item 0",
  "Description" : "Some description for this item...",
  "Properties" : {
    "a" : 5.0,
    "b" : 0.0,
    "c" : 6.0,
    "d" : 6.0,
    "e" : 2.0,
    "f" : 0.0,
    "g" : 9.0,
    "h" : 3.0,
    "i" : 4.0,
    "j" : 5.0
  }
},
{ // 5.000-10.000 more items... }
] 
```

我正在使用这个聚合来乘以一组选定的属性（在本例中为 a、b、c 和 d），然后按它们的乘积对它们进行排序：

```
{
    "aggregate": "item",
    "pipeline": [
        {
            "$project": {
                "_id": 1,
                "Name": 1,
                "s": {
                    "$multiply": [
                        "$Properties.a",
                        "$Properties.b",
                        "$Properties.c",
                        "$Properties.d"
                    ]
                }
            }
        },
        {
            "$sort": {
                "s": -1
            }
        },
        {
            "$limit": 100
        }
    ]
} 
```

现在这一切都很好，但是当项目和属性的数量增加时，执行聚合的时间会增加很多！

有没有更好的方法（**更有效**）来实现这样的目标？**搜索**最高的产品（一组属性的倍数）必须很快。如果有办法对此进行索引，具有所有不同的属性组合并将它们缓存或其他什么？索引需要一段时间没关系，只要查询快！

感谢您在这件事上的任何帮助，我非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:11:29.703

鉴于您对更快搜索和效率的要求，我认为更好的方法是将 Map/Reduce 与输出集合一起使用（至少在聚合框架支持使用集合作为输出之前）。

为您的用例使用输出集合有几个优点。

尤其：

*   你可以有灵活的索引和排序
*   不必为每个查询实时计算结果
*   您不受内联结果的 16Mb BSON 文档大小的限制

您可以使用 Map/Reduce 的[`merge`输出选项](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)来更新输出集合中的计算（本质上，这将是您的缓存）。

根据您的各种属性的更新频率，我将研究一种基于“上次更新”时间戳或其他一些标准的增量方法，这些标准允许您确定何时需要重新计算值。这将允许您随着收藏的增长使批量大小更易于管理。

# powershell - Get-AzurePublishSettingsFile 给出类未注册错误

> ID：12069570
> 
> 赞同：3
> 
> 时间：2012-08-22T08:58:49.317
> 
> 标签：powershell, azure

我安装了 Azure Powershell 命令让（从这里[https://www.windowsazure.com/en-us/manage/downloads](https://www.windowsazure.com/en-us/manage/downloads)）

我也跑了

```
Set-ExecutionPolicy RemoteSigned 
```

然后我在管理员凭据下运行 Windows Azure PowerShell

但是我收到以下错误

```
Get-AzurePublishSettingsFile : Class not registered
At line:1 char:1
+ Get-AzurePublishSettingsFile
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : CloseError: (:) [Get-AzurePublishSettingsFile],  Win32Exception
+ FullyQualifiedErrorId : Microsoft.WindowsAzure.Management.Cmdlets.GetAzurePublishSettingsCommand 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:20:58.257

在使用 Chrome 作为我的默认浏览器时，我在 Windows 8 上遇到了完全相同的问题。

解决方案是拥有**`Internet Explorer`**用于打开浏览器相关文件的默认程序，例如`*.html`.

```
Internet Explorer > Internet Settings > Programs > Set associations = Select all 
```

这可以解决问题。也许一个条目就足够了，但我没有检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:35:55.600

检查值是什么`$pshome`

如果你看到你在 32 位模式下`%windir%\System32\WindowsPowerShell\v1.0`运行[powershell 。](/questions/tagged/powershell "显示标记为“powershell”的问题")**这是您要用于 Windows Azure PowerShell Cmdlet 的 PowerShell 版本。**

如果您看到`%windir%\SysWOW64\WindowsPowerShell\v1.0`您在 x64 模式下运行，这可能会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T22:07:36.270

另外，请确保您没有以“管理员身份”运行 powershell

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:20:01.287

您需要证书的私钥（或证书上的私钥）才能正常工作。经过大量的跟踪和错误后，我发现了这一点。

但简而言之，如果您的证书管理器在证书上没有小钥匙图标（屏幕截图中的第二个证书），则意味着您没有私钥，这意味着 Powershell 将无法连接到天蓝色。

![在此处输入图像描述](../Images/dbfb765d7471de640e75822978037753.png)

我记下了我在这里学到的东西：

[管理证书和 Powershell 部署到 Windows azure](http://frameworkone.wordpress.com/2012/09/10/management-certificates-and-powershell-deployment-to-windows-azure/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T00:16:38.013

我使用非管理员帐户打开powershell然后它工作。

[请注意，启动该命令将在此URL](https://manage.windowsazure.com/publishsettings/index?client=powershell)处打开一个网页，以下载您的 Azure 帐户的发布设置文件。

如此有效，您可以在不使用命令的情况下打开上面的链接。

希望这可以帮助。

# php - 包括导航栏

> ID：12069571
> 
> 赞同：1
> 
> 时间：2012-08-22T08:58:56.513
> 
> 标签：php, html, css

我看了一遍，似乎找不到答案。我有两个页面 1：default.html 和另一个 navisystem.html。我想将导航系统包含到 html 中。我试过了

```
<!--#include virtual="navsystem.html" --> 
```

和

```
<!--#include file="navsystem.html" --> 
```

并且（**顺便说一句，我在下面尝试这些时将我的 default.html 更改为 default.php。**）

```
<?php
require($DOCUMENT_ROOT . "navisystem.html");
?> 
```

我也试过这个：

```
require($_SERVER'DOCUMENT_ROOT' . "navisystem.html"); 
```

还有这个……

```
require("navisystem.html"); 
```

**返回的错误：**

> 注意：未定义变量：第 139 行 C:\webprojects\sites\default.php 中的 DOCUMENT_ROOT
> 
> 警告：需要（navisystem.html）[function.require]：无法打开流：第 139 行的 C:\webprojects\sites\default.php 中没有这样的文件或目录
> 
> 致命错误：require() [function.require]: Failed opening required 'navisystem.html' (include_path='.;C:\php5\pear') in C:\webprojects\sites\default.php on line 139

我已经读到您必须更改 php ini 文件才能更正此错误，但不确定是什么。

我在 Windows 2008 服务器上。我正在学习并且不太了解 PHP，但我知道 Classic asp，我不想使用它，因为它已经过时了。其他人如何将导航页面包含到常规 HTML 页面中？任何建议或帮助谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:01:00.820

更改`$DOCUMENT_ROOT`为`$_SERVER['DOCUMENT_ROOT']`

尝试

```
 $projectFolder ='myProjectFolder'; // update after your comment
 require_once($_SERVER['DOCUMENT_ROOT'].'/'.$projectFolder.'/navisystem.html'); 
```

### [DOCUMENT_ROOT](http://php.net/manual/en/reserved.variables.server.php)

> 当前脚本在其下执行的文档根目录，如服务器的配置文件中所定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:01:19.703

> 注意：未定义变量：第 139 行 C:\webprojects\sites\default.php 中的 DOCUMENT_ROOT

正如它所说，没有变量`$DOCUMENT_ROOT`。我想你的意思是`$_SERVER['DOCUMENT_ROOT']`

> 警告：需要（navisystem.html）[function.require]：无法打开流：第 139 行的 C:\webprojects\sites\default.php 中没有这样的文件或目录

找不到文件。不是很明显吗？

* * *

编辑：这似乎对弗兰克有用：

```
<?php require dirname(__FILE__).'/navsystem.html' ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:00:40.313

Document_root 是 SERVER 变量的全局值。

因此，

```
<?php
require($_SERVER['DOCUMENT_ROOT'] . "navisystem.html");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:03:56.193

将 default.html 重命名为 default.php 并尝试

```
<?php
  require_once "navisystem.html";
?> 
```

# android - 数组微调器选择

> ID：12069576
> 
> 赞同：0
> 
> 时间：2012-08-22T08:59:02.733
> 
> 标签：android, android-spinner

```
int nvalue=2;
Spinner[] spinner = new Spinner[nvalue];
spinner[].setonitem? 
```

我有微调器数组，我想`setOnItemSelectedListener` 用于每个`setOnItemSelectedListener`微调器。如何用于数组微调器？

```
spinner[0].setOnItemSelectedListener(new OnItemSelectedListener() 
    {
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) 
        {
        }
        public void onNothingSelected(AdapterView<?> arg0) 
        {
            // TODO Auto-generated method stub              
        }

    }); 
```

将显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:21:22.670

如果这就是您拥有的所有代码，那么看起来您可能没有实例化实际的微调器。该行`Spinner[] spinner = new Spinner[nvalue];`实例化了 Spinners 数组，但此时`Spinner`数组中每个的值都是`null`默认值。因此，如果您尝试调用`setOnItemSelectedListener()`空值，则会引发空指针异常。因此，您必须执行一些操作，例如`spinner[0] = new Spinner(context)`创建一个新`Spinner`实例，然后调用`spinner[0].setOnItemSelectedListener()`.

编辑：蒂姆已经回答了:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:14:15.737

您是否初始化了数组中的 Spinners 而只是没有添加代码片段？您可以为所有微调器设置一个侦听器，但您必须通过从 xml 膨胀它们或使用 Java 创建它们来初始化它们。

干杯，蒂姆

# google-docs-api - 使用 java gdata sdk 时的未知授权标头

> ID：12069583
> 
> 赞同：0
> 
> 时间：2012-08-22T08:59:37.590
> 
> 标签：google-docs-api, google-drive-api

最近，我们在回归测试中遇到了大约 30% 的失败 API 调用，这是由“未知授权标头”异常引起的。我们从 gdata java sdk 得到以下异常：

```
Caused By AuthenticationException:

com.google.gdata.util.AuthenticationException: Unknown authorization header
<HTML>
<HEAD>
<TITLE>Unknown authorization header</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Unknown authorization header</H1>
<H2>Error 401</H2>
</BODY>
</HTML>

at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:600)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:552)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:530)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:998)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:631)
at com.google.gdata.client.Service.getFeed(Service.java:1017) 
```

我们正在使用 gdata api 运行我们的回归测试，每个测试用例使用超过 20 个 JVM。这个错误是新的。它的出现没有改变我们的实现，也没有显着改变负载。但是，随着我们更改并发 JVM 的数量，错误率会相应地发生变化，当我们将 JVM 的数量减少到几个时，错误率会下降到 10% 左右。

我们将不胜感激有关错误原因和可能修复的任何帮助。

谢谢阿萨夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:26:47.780

```
 private DocsService getDocsService(boolean withHeader) {

    DocsService docsService = new DocsService(APP_NAME);

    try {

        docsService.setOAuthCredentials(getAuthParameters(),
                new OAuthHmacSha1Signer());

        if (withHeader) {
            docsService.getRequestFactory().setHeader("If-Match", "*");
        }

        return docsService;

    } catch (OAuthException oAuthException) {

        throw new TestFlowException(
                "Failed to set Google Drive Oauth Credentials",
                oAuthException);
    }

}

private GoogleOAuthParameters getAuthParameters() {

    GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();

    oauthParameters.setOAuthConsumerKey(GOOGLE_DRIVE_KEY.getKey());
    oauthParameters.setOAuthConsumerSecret(GOOGLE_DRIVE_KEY.getSecret());
    oauthParameters.setOAuthToken(ACCESS_CREDENTIALS.getKey());
    oauthParameters.setOAuthTokenSecret(ACCESS_CREDENTIALS.getPassword());

    return oauthParameters;
} 
```

# javascript - ajax Internet Explorer onchange

> ID：12069589
> 
> 赞同：0
> 
> 时间：2012-08-22T09:00:05.057
> 
> 标签：javascript, html, ajax, internet-explorer

我用于加载第二个选择框的 ajax 脚本在 Firefox 和 chrome 中工作，但国际资源管理器无法处理它。我从我的选择框中调用 onChange 函数，并将选择框中的值赋予该函数。

代码：

```
function getXMLHTTP() 
{
var xmlhttp;

if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

return xmlhttp;
}

function getType(categoryName) 
{       

    var strURL="includes/get.php?c="+categoryName+"&sid="+Math.random();
        var req = getXMLHTTP();

        if (req) {

                req.onreadystatechange = function() {
                        if (req.readyState == 4) {
                                // only if "OK"
                                if (req.status == 200)
                                    {document.getElementById('type').innerHTML=req.responseText;                        
                                } else {
                                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                                }
                        }               
                }           
                req.open("GET", strURL, true);
                req.send(null);
        }       
} 
```

我的第二个问题是，是否可以在选项标签之间发送文本而不是选项标签中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:46:49.917

对于你的第一个问题，我假设你的`if (req)`回报是假的。你用的是哪个IE版本？尝试在`getXMLHTTP()`函数中添加调试代码以开始诊断代码。试试微软提供的这个解决方案：http: [//msdn.microsoft.com/en-us/library/ms537505 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx)

我尽量不重复别人的回答。这是在选定选项标签中获取文本的答案：[从下拉框中获取文本](https://stackoverflow.com/questions/5913/getting-the-text-from-a-drop-down-box)

# lotus-notes - 视图中用于删除指定行的操作按钮

> ID：12069591
> 
> 赞同：0
> 
> 时间：2012-08-22T09:00:19.503
> 
> 标签：lotus-notes, lotus

是否有任何 Lotus 公式可用于视图中的操作，用于删除/擦除某些指定的视图行？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:38:34.420

您可以添加一个按钮，该按钮使用名为从数据库中删除的简单操作。它将删除选定的文档。

# blackberry - 在黑莓中将字节转换为可读的字符串格式？

> ID：12069596
> 
> 赞同：0
> 
> 时间：2012-08-22T09:00:29.960
> 
> 标签：blackberry, httpresponse

我正在开发一个 BB 应用程序，我需要在该应用程序中维护 HTTP 连接，并使用存储在服务器上的图像名称来获取写入该图像文档的文本。

我收到了 RTF 格式的回复。当我在打开的浏览器 Chrome 上直接点击服务器时，我的 RTF 文件被下载。现在我需要以编程方式执行该操作，

```
1) Either convert the bytes which are coming in response in a simple string format so that I can read that. 
```

或者

```
2) Download the file as its happening on the browser manually so that by reading that file I read the information written in the document. 
```

请建议我如何通过点击任何 URL 从服务器读取数据？

目前我正在使用此代码：

```
try {
    byte []b = send("new_image.JPG");
    String s = new String(b, "UTF-8");
    System.out.println(s);
    } catch (Exception e) {
    e.printStackTrace();
    }

public byte[] send(String Imagename) throws Exception
    {
        HttpConnection hc = null;
        String imageName = "BasicExp_1345619462234.jpg";
            InputStream is = null;
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            byte[] res = null;

        try
        {
        hc = (HttpConnection) Connector.open("http://webservice.tvdevphp.com/basisexpdemo/webservices/ocr.php?imgname="+imageName);
            hc.setRequestProperty("Content-Type", "multipart/form-data;");
        hc.setRequestMethod(HttpConnection.GET);
            int ch;
        StringBuffer sb= new StringBuffer();
        is = hc.openInputStream();
            while ((ch = is.read()) != -1)
            {
            bos.write(ch);
            sb.append(ch);
            }
        System.out.println(sb.toString());
        res = bos.toByteArray();
        }
        catch(Exception e){
            e.printStackTrace();
        }
        finally
        {
            try
            {
                if(bos != null)
                    bos.close();

                if(is != null)
                    is.close();

                if(hc != null)
                    hc.close();
            }
            catch(Exception e2)
            {
                e2.printStackTrace();
            }
        }
        return res;
    } 
```

响应如下：

**{\rtf1\ansi\ansicpg1252\uc1\deflang1033\adeflang1033 ....................**

我可以读取数据，但它没有格式化，所以我也可以通过编程方式读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:15:15.230

我已经完成了这项任务....实际上错误出在服务器端。当他们执行 OCR 时，格式参数未更正，这是原因。

# unit-testing - 是否有可用于全面测试 base64 编码/解码器的数据集？

> ID：12069598
> 
> 赞同：8
> 
> 时间：2012-08-22T09:00:33.083
> 
> 标签：unit-testing, base64

我看到开源中有许多 base64 实现可用，并且我在我正在维护的产品中发现了多个内部实现。

我正在尝试排除重复项，但我不能 100% 确定所有这些实现都给出相同的输出。因此，我需要一个数据集来测试所有可能的输入组合。

那地方有吗？谷歌搜索并没有真正报告它。

我在 stackoverflow 上看到了一个类似的问题，但还没有完全回答，它实际上只是要求一个短语（在 ascii 中）来测试所有 64 个字符。例如，它不处理带有 = 的填充。因此，一个测试字符串肯定不适合 100% 测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T18:12:39.253

也许像[Bouncy Castle 中的 Base64Test](http://www.docjar.org/html/api/org/bouncycastle/util/encoders/Base64Test.java.html)这样的东西会做你想做的事？base64 中的棘手部分是正确处理填充。正如您所提到的，涵盖这一点当然很重要。因此，RFC 4648 指定了这些测试向量：

```
 BASE64("") = ""
   BASE64("f") = "Zg=="
   BASE64("fo") = "Zm8="
   BASE64("foo") = "Zm9v"
   BASE64("foob") = "Zm9vYg=="
   BASE64("fooba") = "Zm9vYmE="
   BASE64("foobar") = "Zm9vYmFy" 
```

您的某些实现可能会产生 base64 输出，其不同之处仅在于它们是否插入换行符，以及断行的实现在何处插入断行符和使用的行终止符。您必须进行额外的测试以确定您是否可以安全地将使用一种样式的实现替换为不同的样式。特别是，解码器可能会假设行长度或终止。

# php - 我可以用什么来替换通过 memcache 共享的 PHP 会话

> ID：12069600
> 
> 赞同：2
> 
> 时间：2012-08-22T09:00:33.773
> 
> 标签：php, security, session, memcached, centralized

我正在寻找共享我的 PHP 会话，所以最简单的解决方案是使用 memcache。但我需要更安全的东西，因为 memcache 没有故障转移、集群化、持久性……</p>

我考虑过 Redis，但它没有处理它的 PHP 模块，所以没有 session_handler

所以基本上，我需要一些东西来集中管理会话并且相对安全。而且我在互联网上的研究也不是很顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T10:34:21.040

> I thought about Redis, but it doesn't have a PHP module that handle it, so no session_handler

Check [phpredis](https://github.com/nicolasff/phpredis), it provides [a session handler](https://github.com/nicolasff/phpredis#php-session-handler) for redis, and as for security I don't think you need to configure some sort of authentication, you can somehow make the server only accept the IP's of the application servers.

# spring - 在 Freemarker 中添加 spring 库以使用 JSP Taglibs 以实现安全性

> ID：12069602
> 
> 赞同：9
> 
> 时间：2012-08-22T09:00:36.830
> 
> 标签：spring, security, jsp, freemarker, taglib

我正在使用带有freemarker的spring作为模板引擎。Freemarker 允许使用 Jsp Taglibs，例如，通过添加

```
 <#assign security=JspTaglibs["http://www.springframework.org/security/tags"] /> 
```

到模板，例如允许我使用什么

```
 <@security.authorize ifNotGranted="ROLE_ADMIN">
        whatever
    </@security.authorize> 
```

但是，Spring/Freemarker 找不到标记库，除非它们被添加到类路径中，所以我添加了

```
 <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${spring.version}</version>
    </dependency> 
```

到我项目中的 pom.xml 。

但是无论如何，标签都找不到！我必须将 spring-security-taglibs.jar 添加到 WEB-INF/lib 文件夹中才能找到标签。

有人知道为什么必须将 jar 显式添加到 lib 文件夹中吗？就我而言，为什么它们没有被tomcat找到？

编辑@ddekany

谢谢你。stacktrace如下，如果没有将spring-security-taglibs.jar复制到WEB-INF/lib目录下

```
 No mapping defined for http://www.springframework.org/security/tags 
    The problematic instruction: ---------- ==> assignment: 
            security=JspTaglibs["http://www.springframework.org/security/tags"] 
            [on line 12, column 1 in home.ftl] in user-directive content.main 
            [on line 8, column 9 in home.ftl] in user-directive layout.global 
            [on line 2, column 1 in home.ftl] 
    ---------- Java backtrace for programmers: ----------      
    freemarker.template.TemplateModelException: 
            No mapping defined for http://www.springframework.org/security/tags at         
    freemarker.ext.jsp.TaglibFactory.get(TaglibFactory.java:180) at 
    ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T01:39:00.000

万一其他人遇到这个......

您需要添加弹簧支持文件，如此处所述（只是一些剪切和粘贴）[http://static.springsource.org/spring-webflow/docs/2.2.x/reference /html/ch13s09.html](http://static.springsource.org/spring-webflow/docs/2.2.x/reference/html/ch13s09.html)。

然后添加一些依赖项：

```
<dependency>
  <groupId>org.springframework.security</groupId>
  <artifactId>spring-security-taglibs</artifactId>
  <version>2.0.0</version>
</dependency>
<dependency>
  <groupId>org.springframework.webflow</groupId>
  <artifactId>spring-faces</artifactId>
  <version>2.3.1.RELEASE</version>
</dependency> 
```

假设您已经完成了所有其他工作，您现在应该能够将 taglib 添加到您的页面中。例如：

xmlns:sec="http://www.springframework.org/security/tags"

< sec:authorize ifAllGranted="USER_ROLE">
Hello user
</sec:authorize>

*必须添加一个空格 b/f 'sec'发表它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T18:32:11.853

使用这个 Maven 依赖项：

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-taglibs</artifactId>
    <version>3.2.5.RELEASE</version>
</dependency> 
```

`org.springframework`并且`org.springframework.security`是具有不同版本号的不同框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:16:46.590

Did you include the `JspSupportServlet` as stated [here](http://freemarker.624813.n4.nabble.com/Loading-JSP-Taglib-from-URI-instead-of-path-td625178.html) and [here](http://struts.apache.org/2.3.4/docs/freemarker.html#FreeMarker-TagSupport)

[EDIT] After reading your post a bit more careful I advise you the read section "JSP.7.3.2" (and onwards) from the [JSP specification](http://jsp.java.net/spec/jsp-2_1-fr-spec.pdf).

# javascript - 不调用主干路由

> ID：12069605
> 
> 赞同：5
> 
> 时间：2012-08-22T09:00:42.913
> 
> 标签：javascript, backbone.js, backbone-routing

我有一个使用 Backbone 0.5.3 的工作应用程序，它不再使用主干 0.9.2 工作。

我发现 Router.navigate() 出于某种原因没有调用我的路由。

这是我的路由器：

```
var Router = Backbone.Router.extend({
    routes: {
      '/mypage': 'mypage', 
    },

    mypage: function() { 
      // show page ...
   }
}); 
```

像这样手动调用路由可以正常工作：

```
Router.mypage() 
```

我还尝试覆盖主干的 .navigate 方法来调试我的应用程序...

```
var Router = Backbone.Router.extend({
    routes: {
      '/mypage': 'mypage', 
    },

    navigate: function(fragment, options) {
      console.log("navigate called");
      Backbone.history.navigate(fragment, options);
    },

    mypage: function() { 
      // show page ...
   }
}); 
```

...似乎调用了 .navigate 但是...

```
Backbone.history.navigate(fragment, options); 
```

...只是不调用路线。

我正在使用 PushState，这是我最初的电话：

```
Backbone.history.start({ 
  root: '/',
  pushState: true,
  silent: true
}); 
```

已经在没有 root 和 silent 参数的情况下尝试过 - 没有成功。

**同样：这适用于 Backbone 0.5.3。**

感谢大家留下回复！

阿奇姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:54:34.953

您必须为导航方法设置触发选项，例如：

`Router.navigate("/mypath", {trigger: true})`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:25:49.197

来自[精美手册](http://backbonejs.org/#Router-extend)：

> **延长** `Backbone.Router.extend(properties, [classProperties])`
> 
> 从创建自定义路由器类开始。[...] 请注意，您需要避免在路由定义中使用前导斜杠：

我猜你只需要从你的 中删除前导斜杠`routes`，例如：

```
routes: {
  'mypage': 'mypage', 
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:13:50.247

您必须创建路由器实例。

```
var router = new Router();
router.navigate(...); 
```

# itext - 如何读取pdf表格内容数据？

> ID：12069608
> 
> 赞同：2
> 
> 时间：2012-08-22T09:00:52.147
> 
> 标签：itext

我需要读取具有表格格式数据的 pdf 文件，就像在 excel 文件中一样。我需要提取给定 pdf 文件的单元格值。无论如何都可以使用itext API。如果您有什么要分享的，请分享它或任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:08:13.943

该`PDF`格式只是一个没有任何结构信息的放置文本和图形的画布。因此，`iText-objects`PDF文件中没有任何内容。在每一页中可能会有一些`Strings`，但您不能使用这些字符串重构短语或段落。可能绘制了许多线条，但您无法`Table-object`根据这些线条检索 a 。

简而言之：解析 PDF 文件的内容是**不可能**的`iText`。

[你可以试试这个！](http://www.setasign.de/products/pdf-php-solutions/fpdi/)这使您可以阅读`PDF`页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T15:37:57.770

我最近遇到了这个问题。我无法使其与 itext 一起使用。

我发现的另一种解决方案是在 Adob​​e 中打开 PDF 文档并将其导出为 xml。至少在我的 PDF 中，它保留了表格信息，然后我能够以编程方式使用 XML 生成表格文件，如 excel 等。

我遇到的另一个问题是 Adob​​e 一次只允许您导出一个文件，而我有很多文件。幸运的是，Adobe 也有合并功能。我最终将所有文件合并在一起，然后将它们导出为一个大的 XML 文件，并使用该文件生成我需要的文件。

# visual-studio - 使用 Windows 7 为 Windows 8 开发？

> ID：12069610
> 
> 赞同：0
> 
> 时间：2012-08-22T09:00:58.173
> 
> 标签：visual-studio, windows-8, winapi

是否可以使用 Windows 7 开发 Windows 8 应用程序？

根据页面[http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx#Requirements](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx#Requirements)

SDK 支持 Windows 7。我下载了它。

现在我想下载visual studio（免费，那是快递，对吧？），但发现只有这个：

[http://www.microsoft.com/visualstudio/11/en-us/downloads#vs](http://www.microsoft.com/visualstudio/11/en-us/downloads#vs)

根据这个：

[http://www.microsoft.com/visualstudio/11/en-us/products/compatibility](http://www.microsoft.com/visualstudio/11/en-us/products/compatibility)

它应该在 Windows 7 上运行。我发现的唯一免费下载是 Express “for Windows 8” -

[http://www.microsoft.com/visualstudio/11/en-us/downloads#express-win8](http://www.microsoft.com/visualstudio/11/en-us/downloads#express-win8)

是的，它只在 Windows 8 上运行。

我必须下载什么才能在 Windows 7 上为 Windows 8 进行开发？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:48:19.920

Windows 8 SDK 本身并不是像 Visual Studio 这样的 IDE。它也没有附带编译器。所以是的，您可以在 Windows 7 上安装它，但除非您愿意做很多工作，否则您将无法使用它做很多事情。你不会有任何模板或类似的东西。构建 Windows 应用商店应用程序（以前称为 Metro 风格）的最简单方法是使用在 Windows 8 机器上运行的 Visual Studio 和/或 Blend - 直接在机器上运行（推荐）或在虚拟环境中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:05:04.710

您在 和 之间感到`Visual Studio for Windows 8`困惑`Windows 8 SDK`。Windows 8 SDK 不需要`Visual Studio for Windows 8`.

请参阅其[系统要求](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx#Requirements)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:07:30.090

这是 VS2010 C# Express [http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express的链接](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-csharp-express)

下载并安装

下载并安装.net 4.5（在您在问题中链接的要求中提到）

下载并安装 Win8 SDK

从那里希望在 VS2010 C# Express 中，您将能够以 .NET 4.5 为目标并在您的项目中包含对 Win8 SDK 内容的引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:05:38.837

您不能在 Windows 7 上开发 Windows 8（如在 WinRT 应用程序中）应用程序。您需要安装 Windows 8，无论是本机还是虚拟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T15:00:19.977

很少有资源是最新的。从 Microsoft 开发中心检查[你](https://dev.windowsphone.com/en-us/oem?contentName=docs%2FGetting_Started%2FPreparing_for_Windows_Phone_development)

# javascript - 如何在 div 中获取 3 p 标签的总高度？

> ID：12069612
> 
> 赞同：1
> 
> 时间：2012-08-22T09:01:08.000
> 
> 标签：javascript, jquery

这是我的代码

```
<div class="entry-content"> <p>some text...</p> <p>some text...</p> <p>some text...</p> </div> 
```

我的 entry-content div 具有绝对定位，因此 p 标签内的文本位于页脚下方。我必须使用 javascript 将 entry-content 的高度固定为所有 p 标签的总高度。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:08:48.327

使用[outerHeight](http://api.jquery.com/outerHeight/)（获取匹配元素集中第一个元素的当前计算高度，**包括填充、边框和可选的边距**。）

```
var total = 0;
$('.entry-content').find('p').each(function() {
  total += $(this).outerHeight(true);
});
$('.entry-content').height(total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:08:50.370

像这样尝试......**[工作演示](http://jsfiddle.net/B3aRH/1)**

```
var height = 0;
$('div.entry-content p').each(function() {
    height += parseInt($(this).outerHeight(true));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:03:46.847

您是否尝试过使用`$('.entry-content').height()`或类似的功能`.innerHeight()`？（[jQuery 文档](http://api.jquery.com/height/)）。

您不需要设置 的高度`<div>`，但您可以测量默认高度，并使用它来定位您的页脚。

*一个警告*：由于文本换行，当窗口调整大小时，该 div 的高度可能会改变。您可能希望使用`$(window).resize(...)`, 设置回调以在发生这种情况时更新定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:04:57.953

## *[jsBin 演示](http://jsbin.com/onepok/1/edit)*

采用：`outerHeight(true)`

```
var entryHeight = $('.entry-content').outerHeight(true);

$('#footer').height(entryHeight); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:05:09.353

```
$(function(){
var totaltHeight; 
  $('.entry-content p').each(function(){
    totaltHeight = totaltHeight +$(this).height();
  });
}); 
```

类似的东西也许这取决于jQuery

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T09:09:00.137

不久前我制作了一个小 jQuery 插件，希望它能在解决这样的问题时派上用场：

## 插入

```
(function ($) {
    // helper 'plugin' for getting the total height
    $.fn.totalHeight = function ()
    {
        var totalHeight = 0;
        this.each(function () {
            totalHeight += $(this).height();
        });

        return totalHeight;
    }
})(jQuery); 
```

## 用法

```
var totalHeight = $('.entry-content p').totalHeight(); 
```

*编辑：这可以很容易地适应支持`outerHeight()`或`innerHeight()`.*

# objective-c - NSArray 持久化

> ID：12069618
> 
> 赞同：0
> 
> 时间：2012-08-22T09:01:26.803
> 
> 标签：objective-c, ios, amazon-web-services, persistence

我知道这个问题被问了很多次，但我已经尝试了所有我能找到的答案，但这并没有解决我的问题。

我有亚马逊云存储桶的 NSArray。它们需要保存在文件中。我做的第一件事是尝试 NSUserDefaults 但这不起作用：

```
-[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value 
```

我尝试过的另一件事是对其进行编码：

```
[NSKeyedArchiver archivedDataWithRootObject:array]; 
```

但我得到：

```
-[S3Bucket encodeWithCoder:]: unrecognized selector sent to instance 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:18:47.097

您可以使用 NSArray 对象将数组写入磁盘

```
- (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag 
```

并将其读回：

```
- (id)initWithContentsOfFile:(NSString *)aPath 
```

或者

```
+ (id)arrayWithContentsOfFile:(NSString *)aPath 
```

样品请[点击此](http://mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html)链接

# android - 媒体播放器未运行

> ID：12069621
> 
> 赞同：0
> 
> 时间：2012-08-22T09:01:30.433
> 
> 标签：android

我正在尝试使用媒体播放器运行 mp3 文件。它编译得很好，但它没有播放 mp3 文件。即使我检查了 isPlaying()，它也返回 false。请告诉我它有什么问题。这是代码：

```
package com.example.soundplayer;

import java.io.IOException;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    /**
     * Variables
     */
    MediaPlayer mp = null;
    String hello = "Hello!";
    String goodbye = "GoodBye!";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /**
         * Talking with the buttonHello
         */
        final Button buttonHello = (Button) findViewById(R.id.idHello);
        buttonHello.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                managerOfSound(hello);
            } // END onClick()
        }); // END buttonHello
    }     
    /**
     * Manager of Sounds
     */
    protected void managerOfSound(String theText) {
        mp = MediaPlayer.create(MainActivity.this, R.raw.sound);
        mp = new MediaPlayer();
        if (theText.equals(hello))
        {
            MediaPlayer.create(this, R.raw.sound);
            mp.setVolume(1.0F, 1.0F);
            mp.reset();
            try {
                mp.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (mp != null) {
                mp.start();
            }
            if(mp.isPlaying()== true){
                Toast.makeText(this, "mp is playing ", Toast.LENGTH_LONG).show();}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:17:04.733

试试下面的代码

```
protected void managerOfSound(String theText) {
    mp = MediaPlayer.create(MainActivity.this, R.raw.sound);
    mp.setVolume(1.0F, 1.0F);
    if (theText.equals(hello))
    {            
        if (mp != null) {
            mp.start();
        }
        if(mp.isPlaying()== true){
            Toast.makeText(this, "mp is playing ", Toast.LENGTH_LONG).show();}
    }
} 
```

# ios - UIWebview 启用cookies

> ID：12069622
> 
> 赞同：4
> 
> 时间：2012-08-22T09:01:37.427
> 
> 标签：ios, cookies, uiwebview

我正在尝试访问需要 cookie 的特定 URL，`UIWebView`但我无法访问它，因为 cookie 被禁用。所以我做了以下事情：

*   启用的 cookie：

    ```
    NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];

    [cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways]; 
    ```

*   从响应中创建`NSURLConnection`和提取 cookie：

    ```
    NSArray *cookies = [ NSHTTPCookie cookiesWithResponseHeaderFields: [ httpResponse allHeaderFields ] forURL:response.URL];

    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies: cookies forURL: response.URL mainDocumentURL:nil]; 
    ```

但这都没有帮助。但是，如果我在 safari 中启动 URL，它会成功加载，之后我也可以加载相同的 URL `UIWebView`。你能帮我解决这个问题，我怎样才能启用cookies `UIWebView`？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T09:12:39.927

创建后`NSURLRequest`，将 sharedHTTPCookieStorage 中的所有 cookie 复制到`NSURLRequest`：

```
NSArray *cookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPShouldHandleCookies:YES];
[self addCookies:cookies forRequest:request];
[_webView loadRequest:request]; 
```

并添加`addCookies:forRequest`方法

```
- (void)addCookies:(NSArray *)cookies forRequest:(NSMutableURLRequest *)request
{
    if ([cookies count] > 0)
    {
        NSHTTPCookie *cookie;
        NSString *cookieHeader = nil;
        for (cookie in cookies)
        {
            if (!cookieHeader)
            {
                cookieHeader = [NSString stringWithFormat: @"%@=%@",[cookie name],[cookie value]];
            }
            else
            {
                cookieHeader = [NSString stringWithFormat: @"%@; %@=%@",cookieHeader,[cookie name],[cookie value]];
            }
        }
        if (cookieHeader)
        {
            [request setValue:cookieHeader forHTTPHeaderField:@"Cookie"];
        }
    }
} 
```

# c++ - printf 和自定义类

> ID：12069623
> 
> 赞同：3
> 
> 时间：2012-08-22T09:01:42.857
> 
> 标签：c++, printing, visual-studio-2012

我有自己的代表自定义字符串类的类。我正在使用 VS2012RC。我已经重载了我的类 CustomString 的一些运算符。

这是一些代码：

```
CustomString::CustomString(string setstr)
{           
    str = setstr;
}

CustomString::operator const char *()
{   
    return (this->str.c_str());
}

CustomString &CustomString::operator = (char *setstr)
{
    str = setstr;
    return *this;
} 
```

我可以定义我的对象并像这样使用它：

```
CustomString str = "Test string"; 
```

我可以将结果打印为：

```
printf(str);

printf((string)(str).c_str());

printf((string)(str).data());

printf("%s\n",(string)(str).c_str());

printf("%s\n",(string)(str).data()); 
```

并且没有任何错误。

但如果我这样使用它：

```
printf("%s\n", str); 
```

msvcr110d.dll 有异常（内存访问错误）

为什么**printf(str)**可以，但**printf("%s\n",str)**不行？

如何修改我的代码以使用**printf("%s\n",str)**？

...

经过数小时的谷歌搜索，我发现显式转换 (string)、static_cast (str) 和 _str() 方法添加了一个以空字符结尾的字符：'\0';

我已将我的代码修改为：

```
printf("%s\n",str + '\0'); 
```

它成功了！

有什么方法可以修改我的自定义构造函数以添加一个以空字符结尾的字符串并使用以空字符结尾的字符传递一个正确的值来运行以下代码：

```
printf("%s\n",str); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:04:02.913

你不能（至少不能以便携的方式）。`printf`查看作为参数传递的对象并将其视为 a `%s`，它是一个 char 数组。您遇到未定义的行为。此外，传递给的参数可以`printf`说是无类型的。

> 为什么 printf(str) 没问题？

因为第一个参数是类型，并且是一个`const char*`. 隐式转换是通过您的运算符进行的。其余参数的行为不同。

我会改用`cout`和重载`operator << (ostream&, const CustomString&)`。

### 不要这样做：

我说你不能，*以便携的方式*。对于像这样的课程

```
class CustomString
{
   char* str;
   //...
}; 
```

这可能会起作用，因为类在内存中的表示方式。但是，同样，它仍然是未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:05:48.297

不要使用`printf`，它比 C++ 更像 C。相反，使用`iostream`s，它为您提供了一种工具来格式化您自己的自定义类并将其发送到文件或标准输出。

这是一个可能对您有用的快速（未经测试）示例：

```
std::ostream& operator<< (std::ostream &os, const CustomString& str)
{ 
    os << str.data();
    return os; 
} 
```

并且您可以通过执行类似的操作将自定义字符串打印到标准输出

```
CustomString str;
// put some text in the custom string, then:
std::cout << str << std::endl; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T10:44:12.693

printf 定义为

```
int printf(char const *fmt, ...) 
```

将类或结构传递给 ... 参数列表具有未定义的行为，可能会工作或崩溃，或者只是随机做一些事情（我已经看过所有 3 个），具体取决于类和编译器。

```
printf(str) 
```

需要一个 char *，编译器发现你有一个合适的转换运算符，所以它调用它。请注意，这是非常狡猾的，因为您不知道 str 是否可能包含 % 。

所以，你确实想要`printf("%s", str)`，但正如你所说，那是行不通的。一些编译器会给你一个警告（尽管在我看来，由 gcc 产生的“警告：这将崩溃”并不是经过深思熟虑的），所以你必须强制它被强制转换为字符串。所以，你最好的解决方案是自己显式地转换它，

```
printf("%s", static_cast<char const *>(str)); 
```

我不确定您所拥有的所有示例需要多少代码，因为其中大多数将涉及从您的自定义字符串构造一个 std::string，然后输出它，然后删除 std::string .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:03:58.980

你必须使用`printf("%s\n", str.c_str());`. `%s`需要一个 char 数组，而你给了它一个`CustomString`不同的对象。您必须通过调用`c_str()`函数从字符串中获取字符数组。

# python - AssertionError：大小不兼容：参数“高度”的长度必须为 2 或标量（Matplotlib、Python 2.7、绘图图表）

> ID：12069624
> 
> 赞同：9
> 
> 时间：2012-08-22T09:01:43.293
> 
> 标签：python, matplotlib

不幸的是，新的一天给 Python 带来了新的问题：/

我有一个由我用 Java 编写的其他应用程序生成的文件。这个应用程序生成带有一些数据的文件，这是一种随机的东西，因为我无法说出每个文件会有多少行。示例文件如下所示：

```
3   Sat Jan 21 00:00:00 2012
7   Sun Mar 11 00:00:00 2012
5   Fri Jan  1 00:00:00 2010
4   Sat Feb  5 00:00:00 2011
8   Sun Apr 11 00:00:00 2010
4   Wed Aug 24 00:00:00 2011
8   Sat Feb 20 00:00:00 2010
3   Thu Oct 13 00:00:00 2011
9   Fri Dec 17 00:00:00 2010
4   Tue Jul 20 00:00:00 2010
8   Fri Dec  2 00:00:00 2011
6   Mon May 31 00:00:00 2010
5   Mon May 16 00:00:00 2011
8   Mon Apr 30 00:00:00 2012
3   Thu Oct 28 00:00:00 2010
1   Tue Jun 19 00:00:00 2012
7   Wed Sep  8 00:00:00 2010 
```

我想用这些数据画一个图表。在 X 轴上，我想要格式化日期，在 Y 轴上我的文件第一列的数字。这是我可爱的python代码：

```
# -*- coding: utf-8 -*-
#!/usr/bin/env python
import wx
import matplotlib
matplotlib.use("TkAgg")
import matplotlib.pyplot as pl
import datetime

def monthNum(month) :
        if month == "Jan" :
            return 1
        elif month == "Feb" :
            return 2
        elif month == "Mar" :
            return 3
        elif month == "Apr" :
            return 4
        elif month == "May" :
            return 5
        elif month == "Jun" :
            return 6
        elif month == "Jul" :
            return 7
        elif month == "Aug" :
            return 8
        elif month == "Sep" :
            return 9
        elif month == "Oct" :
            return 10
        elif month == "Nov" :
            return 11
        elif month == "Dec" :
            return 12

def convertDate(dateTime) :
        line = dateTime.split(' ')
        date = (str(line[2]) + "-" + str(monthNum(line[1])) + "-" + str(line[4]))
        return date

def readFile(filename) :
        values = []
        dates = []
        try :
                with open(filename, "r") as openedFile:
                        for line in openedFile :
                                line = line.strip()
                                data = line.split("\t")
                                values.append(int(data[0]))
                                newDate = convertDate(data[1])
                                dates.append(datetime.datetime.strptime(newDate, "%d-%m-%Y").date())
        except IOError :
                print("IOERROR")
        except ValueError :
                print("VALUE ERROR")
        if len(values) != 0 and len(dates) != 0 :
                drawChart(values, dates, filename)

def drawChart(values, dates, filename):
        fig = pl.figure(dpi=60,figsize=(18, 10))
        ax = fig.add_subplot(1,1,1)
        fig.subplots_adjust(left=0.1, right=0.95, top=0.95, bottom=0.2)
        ax.bar(range(len(dates)), values, facecolor='#777777', align='center', width=0.5, ecolor='black')
        pl.axis('tight')
        ax.set_xticks(range(len(dates)))
        pl.yticks(values)
        ax.set_xticklabels(dates, rotation = 90)
        pl.savefig(filename + ".png")
        pl.show()
        pl.close()

readFile("file.txt") 
```

一切都很好，如果`file.txt`有一个单排。当它有更多行时，python代码会给我一个错误：

> ```
> VALUE ERROR
> Traceback (most recent call last):
>   File "test.py", line 71, in <module>
>     readFile("file.txt")
>   File "test.py", line 56, in readFile
>     drawChart(values, dates, filename)
>   File "test.py", line 62, in drawChart
>     ax.bar(range(len(dates)), values, facecolor='#777777', align='center', width=0.5, ecolor='black')
>   File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 4733, in bar
>     nbars)
> AssertionError: incompatible sizes: argument 'height' must be length 2 or scalar 
> ```

而且我真的不知道如何解决它。很好，如果`file.txt`有一行，但正如我之前写的：我无法说出`file.txt`会有多少行（这取决于我的 Java 应用程序）。

有人吗？我在 Kubuntu 12.04 上使用 Python 2.7 和 Matplotlib。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T09:41:15.453

这是因为日期只有 2 个值。日期的长度和值的长度必须相同，matplotlib 才能知道该做什么。如果值是一个标量，那么所有的条都将具有相同的高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:08:22.543

谢谢，我想我明白了 - 问题出在`readFile(arg)`函数上，它应该如下所示：

```
def readFile(filename) :
    values = []
    dates = []
    openedFile = open(filename, "r")
    content = openedFile.readlines()
    openedFile.close()
    for line in content :
        line = line.strip()
        data = line.split("\t")
        values.append(int(data[0]))
        newDate = self.convertDate(data[1])
        dates.append(newDate)
    print(values)
    print(dates) 
```

# javascript - 如何将 Markdown 与 MathJax 一起使用，例如 Math StackExchange

> ID：12069625
> 
> 赞同：26
> 
> 时间：2012-08-22T09:01:43.003
> 
> 标签：javascript, markdown, mathjax

**更新后的帖子**

好的，我已经设法让 Markdown 和 MathJax 一起工作，实际上它相对简单。我[`marked`](https://github.com/chjj/marked)和 MathJax 一起使用过。

```
$(function() {
    var $text       = $("#text"), // the markdown textarea
        $preview    = $("#preview"); // the preview div

    $text.on("keyup", function() {
        $preview.html( marked($text.val()) ); // parse markdown
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]); // then let MathJax do its job
    })
}); 
```

现在的问题是：我认为 Markdown 在 MathJax 可以更改它之前首先解析我的数学。我该如何解决？我认为它固定在 Math StackOverflow 上，但是如何？我需要停止 Markdown 解析数学

**更新 2**

这行得通，但不确定它是否是 math.stackexchange 的方式，但它似乎与我迄今为止测试的结果相似/相同...

```
$(function() {
    var $text       = $("#text"),
        $preview    = $("#preview");

    $text.on("keyup", function() {
        $preview.html( $text.val() );
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]);
    });

    MathJax.Hub.Register.MessageHook("End Process", function (message) {
        $preview.html( marked($preview.html()) );
    });
}); 
```

* * *

**下面的旧帖子**

在数学堆栈交换中，我可以将 MathJax 与 Markdown 一起使用。我想知道我需要做什么？我可以使用类似`marked`渲染 Markdown 的库，但对于 MathJax，它似乎只是在页面加载时渲染。我如何调用它来重新渲染或更好地渲染所需的内容（由我指定）

```
html = marked("some markdown string") // a HTML string
// is there something like
html = MathJax.parse(html) 
```

* * *

**更新**

我想我应该看看[http://www.mathjax.org/docs/1.1/typeset.html#manipulating-individual-math-elements](http://www.mathjax.org/docs/1.1/typeset.html#manipulating-individual-math-elements)。但是当我尝试

```
$text.on("keyup", function() {
    $preview.html( marked($text.val()) );
    var math = MathJax.Hub.getAllJax("preview");
    console.log(math);
    MathJax.Hub.Queue(["Text", math, "a+b"]);
}) 
```

在哪里：

*   `$text`: 是我的 textarea 的 jQuery 元素
*   `$preview`: 是预览`div`

我发现这`math`是未定义的，所以它似乎`var math = MathJax.Hub.getAllJax("preview")`不起作用。我有一个`div#preview`顺便说一句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T22:22:17.743

最快的方法是保护数学免受降价解析器的影响。

有关 Davide Cervone 的详细答案，请参阅[此问题](https://stackoverflow.com/questions/11228558/let-pagedown-and-mathjax-work-together/11231030#11231030)，包括指向 math.SE 使用的代码的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T14:35:07.960

对于崇高，将以下代码添加到`Markdown Preview --> Settings - User`，

```
{
    /*
        Enable or not mathjax support.
    */
    "enable_mathjax": true
} 
```

如下所示，

[![在此处输入图像描述](../Images/cdf8cd5cdc13ab8c45561e500a4d7f03.png)](https://i.stack.imgur.com/xNmB4.png)

请参阅[如何在 Sublimetext Markdown Preview 中启用 MathJax 渲染](https://stackoverflow.com/questions/27972177/how-to-enable-mathjax-rendering-in-sublimetext-markdown-preview)。

# wso2 - 主机名中的 WSO2 API Manager 更改未反映

> ID：12069627
> 
> 赞同：0
> 
> 时间：2012-08-22T09:01:54.087
> 
> 标签：wso2, wso2carbon, wso2-am

我正在 EC2 Ubuntu 实例中尝试 Wso2 API Manager。当我运行 ./wso2server.sh 时，主机名设置为 EC2 机器的私有 IP。要将私有 IP 更改为我的弹性 IP，我更改了

```
<ServerURL>https://${carbon.local.ip}:${carbon.management.port}${carbon.context}/services/</ServerURL> 
```

至

> https:// <-- elastic_IP --
> 
> > :${carbon.management.port}${carbon.context}/services/

在 PRODUCT_HOME/repository/conf/carbox.xml 中。

这并没有解决我的问题。所以我将所有 ${carbon.local.ip} 替换`PRODUCT_HOME/repository/conf/`为我的弹性 IP，但是当我启动服务器时，我仍然得到“带有我的私有 IP 的 CarbonUIServiceComponent 管理控制台 URL”

有人可以帮我解决将 Private_IP 更改为 elastic_IP 的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:42:11.307

感谢您在 EC2 上试用 API Manager。这似乎是 API Manager 1.0.0 中的一个错误。创建了一个问题 (https://wso2.org/jira/browse/APIMANAGER-703) 来跟踪进度。修复将在 API Manager 1.0.1 版本中提供（计划在 2012 年 9 月中旬发生）。

# ruby-on-rails-3 - rails 3 生成的 url 的绝对链接

> ID：12069628
> 
> 赞同：1
> 
> 时间：2012-08-22T09:02:01.633
> 
> 标签：ruby-on-rails-3, actionmailer

我正在研究生成看起来像[https://mywebsite.com/user/check_email_confirmation/46cee41bc2044104aff8cf7746687ea8的网址](https://mywebsite.com/user/check_email_confirmation/46cee41bc2044104aff8cf7746687ea8)

对于著名的“请单击此链接以确认您的电子邮件”。

所以我有一条路线，我打算在我的 routes.rb 中使用它：

```
 resources :user do
    collection do
      get  'check_email_confirmation/:generated_url', :to => 'user#check_email_confirmation'
    end
  end 
```

现在，我的麻烦是生成上面的完整地址。我生成了 SHA (46cee41bc2044104aff8cf7746687ea8) 部分，但是如何在我的视图中编写“https://mywebsite.com/user/check_email_confirmation/”部分？

添加视图的代码：

```
<p>Please click <%= url_for(:action => 'check_email_confirmation', :controller => 'user', :only_path => false, :id => @confirmation_url) %> to confirm your e-mail address.</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:19:23.230

替换`id:`为`generated_url:`。

您还可以通过在路线中命名路线来简化`url_for`ing`as:`

```
get  'check_email_confirmation/:generated_url', to: 'user#check_email_confirmation', as: :confirmation 
```

更多信息请访问[http://viget.com/extend/rails-named-routes-path-vs-url](http://viget.com/extend/rails-named-routes-path-vs-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:04:41.270

```
get "check_email_confirmation/:id" => "users#check_email_confirmation", :as => "check_email_confirmation" 
```

# ms-access - 根据列的值选择特定列

> ID：12069631
> 
> 赞同：2
> 
> 时间：2012-08-22T09:02:12.067
> 
> 标签：ms-access, ms-access-2007, vba

我的 ms 访问表是这样的：

```
ID | Group | Detail(A) | Detail(B)
1  | A     | ABC       |
2  | A     | DEF       |
3  | B     |           | GHI 
```

当 Group=A 时，我的访问 sql 如何将 Detail(A) 选择为“Details”，当 Group=B 时将 Detail(B) 选择为“Details”？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:26:31.503

您可以使用立即 if，IIF。

```
 SELECT IIf(Group="A",DetailA,DetailB) As Detail 
 FROM Table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:06:39.780

我喜欢 Remou 的回答，IIF 是一个很好的简单函数，但是如果您要比较多个值，它可以快速增长以适应所有 IIF，作为多场景中的替代方案，或者如果您希望可以使用单值，则可以使用切换方式：

```
SELECT Switch(Group="A", DetailA, Group="B", DetailB) AS Detail
FROM Table 
```

然后您只需继续添加例如 Group="C"、DetailC 等

# c# - 如何在 Visual Studio 2010 中禁用隐式转换？

> ID：12069635
> 
> 赞同：0
> 
> 时间：2012-08-22T09:02:33.150
> 
> 标签：c#, visual-studio-2010, ide, implicit-conversion

使用 DateTime/DateTimeOffset 或 int/decimal 变量时的隐式转换可能会在运行时导致意外行为，因此我希望在检测到此类转换时在编译时发出警告或错误。

如何在 Visual Studio 2010 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:06:53.397

**在 C# 中无法禁用隐式转换。**

但是，Visual Basic 可以使用`Option Strict On`.

# c# - 计算出第 160 个用户的公式？

> ID：12069636
> 
> 赞同：0
> 
> 时间：2012-08-22T09:02:34.487
> 
> 标签：c#

我每天都会更新一张用户表 - 我希望每 160 个用户都有。

我知道我需要进行计数以查看是否有超过 160 或 320 个用户，这样我就可以将那个用户排除在外，但是这个公式将如何工作？

我是否将用户数除以 160？

但是我怎么知道它是需要第 160 位用户还是第 320 位用户呢？

此检查将在每个用户注册后进行，因此一旦将用户添加到数据库中，我需要查看它们是否是 160 的倍数，然后基本上向他们发送电子邮件（数据库用户可以超过 165000）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:05:10.327

检查除以 160 是否等于 0

**编辑：**您可以通过使用像这样的另一个计数器来检查它是第 160 位还是第 320 位：

```
int counter1 = 0;
int counter2 = 0;
     if(counter1 % 160 == 0)
{
    counter2++;
     //DO SOMETHING 
} 
```

现在，`counter2`每 160 人就会养 1 人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:05:51.833

如果您的 users 表有整数 id，您可以获取 id 低于或等于当前用户 id 的用户数，然后检查 count % 160 == 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T09:07:11.963

如果您的数据库有一个自动递增的字段（大多数数据库倾向于对其主键执行此操作），您可以执行一个查询来检查`userID % 160 == 0`. 这应该从第 0 个用户开始，每 160 个用户返回一次。

然后，在您的应用程序中，您可以`userId / 160`查看第 0 个用户、第 160 个用户、第 320 个用户等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:08:01.947

有一个简单的方法可以知道用户是否是第 160 位。

```
if (userCount % 160 == 0)
        {
            //User is 160th user, or 320, 480 etc...
        } 
```

这将验证用户是否可被 160 整除且没有小数。有关模的更多信息：http: [//www.dotnetperls.com/modulo](http://www.dotnetperls.com/modulo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:12:59.013

类似的东西

```
for (int i = 1; i < (int)(users.Count/160); i++)
{
    newUsers.Add(users[160 * i]);
} 
```

...这是假设您使用列表，但您没有说过。你的“db”应该有类似的方法来完成同样的事情。

这将返回第 160、第 320 等用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T09:24:55.997

假设您要扫描大量数据（*db users 可以超过 165000*），首先查询所有用户，然后在客户端过滤它们可能不是一个好主意。

更好地在您的数据库中处理此问题，如下所示：

```
SELECT R, userid FROM
(SELECT ROWNUM R, userid FROM (SELECT userid FROM users ORDER BY userid ))
WHERE MOD(R, 160) = 0 
```

（这个例子是针对 Oracle 的，可能有更有效的方法来查询这个）

* * *

旁注：
由于您没有提供更多信息（您使用的数据库、表格布局等），因此很难找到更好的答案。另请注意，例如 Sql Server 具有发送电子邮件的能力，因此您可能可以在不涉及客户端的情况下使用此功能。

# regex - Postgres正则表达式问题

> ID：12069639
> 
> 赞同：5
> 
> 时间：2012-08-22T09:02:40.043
> 
> 标签：regex, postgresql

我需要找到存储在 postgres 中的所有记录，这些记录与以下正则表达式匹配：

```
^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$ 
```

像这样的东西：

```
SELECT * FROM users WHERE users.phone ~ '^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$' 
```

但是这个错误：

> 无效的正则表达式：量词操作数无效

为什么 Postgres 不能使用这个正则表达式？

在普通的 Ruby 中使用相同的就可以了。

**更新**

问题只出在 WHERE 上。当我尝试：

```
SELECT '+79637434199' ~ '^((8|\+7)[\- ]?)(\(?\d{3}\)?[\- ]?)[\d\- ]{7,10}' 
```

Postgres 返回真。但是当我尝试时：

```
SELECT * FROM users WHERE users.phone ~ '^((8|\+7)[\- ]?)(\(?\d{3}\)?[\- ]?)[\d\- ]{7,10}' 
```

结果：**“无效的正则表达式：量词操作数无效”**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T17:25:57.177

当你把它放在第一个或最后一个位置时，你不需要`-`在字符类中转义，因为它不会被误读为范围：

`[\- ]`-> `[- ]`
`[\d\- ]`->`[\d -]`

最终获得上限的方式`10`是徒劳的。在末尾
添加以禁止尾随字符。 或禁止尾随*数字*（但需要非数字）。 或者在那里结束字符串或有一个非数字跟随。`$`
`\D` *`($|\D)`*

 *放在一起：

```
SELECT '+79637434199' ~ '^(8|\+7)[ -]?(\(?\d{3}\)?[ -]?)[\d -]{7,10}($|\D)' 
```

否则你的表达就好了，它适用于我在 PostgreSQL 9.1.4 上。`WHERE`无论您在子句中还是在列表中使用它都不应该有任何区别`SELECT`- 除非您遇到一些旧版本的错误（如评论中建议的@kgrittn）。

* * *

如果我在字符串文字前加上`E`，我可以引发您收到的错误消息。这*无法*解释您的问题，因为您声明该表达式作为`SELECT`项目工作正常。

但是，正如夏洛克·福尔摩斯所引述的那样，“当你排除了不可能的事情时，剩下的任何事情，无论多么不可能，都必须是真相。”

也许您运行了一个测试，[`standard_conforming_strings = on`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)另一个运行了`standard_conforming_strings = off`- 这是 9.1 之前的旧版本中字符串文字的默认解释。也许有两个不同的客户（对此有不同的设置）。

在手册中[使用 C 样式转义符的字符串常量](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)一章中阅读更多信息。*

# delphi - 在运行时构建 TcxGrid 时将 TcxSpinEdit 属性设置为列

> ID：12069640
> 
> 赞同：1
> 
> 时间：2012-08-22T09:02:48.010
> 
> 标签：delphi, delphi-xe2, tcxgrid

我正在处理其他人的代码，他们正在构建 TcxGrid 而无需通过可视化编辑器。我将该网格导出到 excel，所以我需要将列类型设置为 TcxSpinEdit（内容都是数字）。

如何设置属性？我尝试使用 PropertyClass 和 PropertyClassName，但它们都不起作用（我仍然在 excel 中收到“数字作为文本”警告）。

这是相关部分：

```
var
Stolpec: TcxGridDBColumn;

[...]

if CheckBoxStevilkoMultiTime.Checked    then
    begin
      Stolpec := cxGrid1DBTableView3.CreateColumn;
      Stolpec.DataBinding.FieldName := 'STVLK_INI_C';
      Stolpec.Width := larghCol;
      Stolpec.FooterAlignmentHorz := taRightJustify;
      Stolpec.GroupSummaryAlignment := taRightJustify;
      Stolpec.Name := 'cxGrid1DBTableView3' + Colonna.DataBinding.FieldName;
      TcxGridDBTableSummaryItem(cxGrid1DBTableView3.DataController.Summary.DefaultGroupSummaryItems[5]).Column := Stolpec;
      TcxGridDBTableSummaryItem(cxGrid1DBTableView3.DataController.Summary.DefaultGroupSummaryItems[5]).Position := posIndx;
      Stolpec.Caption := 'Stevilko';
      Stolpec.Options.Editing := False;
    end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:45:44.850

```
uses
   cxSpinEdit;

...
  Stolpec.PropertiesClass := TcxSpinEditProperties;
  TcxSpinEditProperties(Stolpec.Properties).MaxValue:= 10;
... 
```

# html - 使用CSS垂直对齐未知高度的响应图像

> ID：12069643
> 
> 赞同：3
> 
> 时间：2012-08-22T09:02:53.130
> 
> 标签：html, css, image, layout, responsive-design

我正在尝试在具有未知高度的图像的响应式布局中布局垂直对齐底部的图像（见下图）。

图像被缩放以适应列的宽度，但高度各不相同，我无法提前找出它是什么。

![在此处输入图像描述](../Images/9c8eba3393dd972fdbcdae63d47c2b15.png)

不幸的是，目前我设法得到的最接近的是这个

![在此处输入图像描述](../Images/3598a0c837479c679a01616306f4b001.png)

如果可能的话，我真的很想避免使用 javascript，因为列数会根据使用媒体查询的屏幕宽度而变化——这会使 javascript 更加复杂。

我现在使用的 CSS 是

```
#catalogue-items {
  @include clearfix;
  margin: 40px 0;

  .catalogue-item {
    width: 20%;
    float: left;
    margin-left: 4%;
    @include box-sizing(border-box);
    margin-bottom: 20px;

    img {
      width: 100%;
    }

    p {
      font-family: sans-serif;
      font-size: 0.8em;
      padding: 0.5em;
    }

    &:nth-child(4n + 1) {
      clear:left;
    }
  }
} 
```

使用媒体查询更改第 n 个子选择器。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:03:49.357

我会用`display: inline-block`

HTML：

```
<ul>
    <li>
        <img width="50" height="100" src="/img/logo.png"/><br/>
        Description
    <li>
    <li>
        <img width="50" height="125" src="/img/logo.png"/><br/>
        Description
    <li>
    <li>
        <img width="50" height="75" src="/img/logo.png"/><br/>
        Description
    <li>
<ul> 
```

CSS：

```
ul {
    margin-left: -10px;
}

li {
    display: inline-block;
    margin: 0 10px 0 10px;
}

img {
    border: 1px solid red;
} 
```

[见小提琴](http://jsfiddle.net/BaHpc/1/)

# tridion - SDL Tridion 2011 - 无法添加父出版物

> ID：12069649
> 
> 赞同：9
> 
> 时间：2012-08-22T09:03:13.630
> 
> 标签：tridion, tridion-2011

我安装了 SDL Tridion 2011 SP1 的开发 VM 出现问题。

添加新出版物时，我无法将现有出版物添加为父级，因此无法创建蓝图层次结构。

添加发布按钮使对话框闪烁，但随后消失。

每个出版物似乎都是在其自己的蓝图层次结构中创建的。

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T09:48:36.450

您需要先创建根结构组，然后才能将出版物用作父出版物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:18:36.933

我遇到过这种情况，但这只是 Chrome 浏览器的原因，你在 IE 中试过吗？

# objective-c - 在 XCode 4.4 中使用 '[]' 语法访问容器似乎不起作用

> ID：12069650
> 
> 赞同：0
> 
> 时间：2012-08-22T09:03:21.077
> 
> 标签：objective-c, xcode4.4, llvm-4.0

有没有人尝试过 Xcode 4.4 (iOS 5.1) 中引入的新语法糖，比如自动调用 @synthesize 或 NSArray 的 Literal Syntax ？它们非常方便。

但是我不能正确地使用它，“使用'[]'语法来访问”。我试过跟随，但他们没有工作。我做错什么了 ？谢谢。

```
NSArray *tmp = @[@"hello",@"world"];  //This one works fine
NSString *i = tmp[0]; // or tmp[@0];  this one does not work. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:32:06.557

您在那里使用了两种不同的功能。您的第一行 ( `tmp = @[@"hello",@"world"]`) 是文字。这应该适用于 Xcode 4.4。

第二行 ( `i = tmp[0]`) 需要运行时支持（需要一些额外的方法才能使其工作），因此在 iOS 5 及更低版本中将无法工作。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/11425976/objective-c-literals-accessing-nsarray)。

# asp.net - WCF 和 ASP.NET Web API：两者的好处？

> ID：12069653
> 
> 赞同：9
> 
> 时间：2012-08-22T09:03:28.500
> 
> 标签：asp.net, .net, wcf, rest, asp.net-web-api

我即将开始一个项目，我们有一个后端服务来进行冗长的处理，以便我们的 ASP.NET 网站可以自由地执行更快的请求。因此，我一直在阅读 WCF 和 Web API 等服务，以了解它们的功能。由于这个后端服务实际上将由多个相互通信的服务组成，并且不会对我们的客户公开可用，因此 WCF 似乎是这种场景的理想技术。

但是在做了很多研究之后，我仍然对 WCF 和 Web API 之间的好处和区别感到困惑。总的来说，似乎：

*   如果您想要一个公共和/或 RESTful API，那么 Web API 是最好的
*   WCF 可以支持比 HTTP 更多的传输，因此您可以对它们进行更多控制
*   由于 WCF 的附加功能/复杂性，Web API 开发似乎比 WCF 更容易

但也许我的问题归结为以下几点：

1.  为什么 REST 服务会更有益呢？一个完整的 WCF 服务对于公共 API 来说会是一个好主意吗？还是 WCF 服务可以提供 Web API 无法提供的任何东西？
2.  相反，如果我有许多需要相互通信的内部服务，并且很乐意只使用 HTTP 作为传输，那么 Web API 会突然成为一个可行的选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T09:12:42.137

我回答了几个相关的问题：

*   [ASP.NET Web API 发布后 ASP.NET MVC 框架的未来是什么](https://stackoverflow.com/q/11621550/1268570)

*   [它应该是 WebAPI 还是 asmx](https://stackoverflow.com/q/11643072/1268570)

作为附加资源，我建议您阅读：

[http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec](http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec)

如果您想了解有关 REST 的更多信息，[请查看这篇 Martin Fowler 文章](http://martinfowler.com/articles/richardsonMaturityModel.html)

总结：

据我所知，这两种技术都是由微软的同一个团队开发的，WCF 不会停产，它仍然是一种选择（例如，如果你想提高服务的性能，你可以公开它们通过 TCP 或命名管道）。未来显然是 Web API

*   WCF 是为与 SOAP 一起工作而构建的

*   Web API 是为使用 HTTP 而构建的

为了做出正确的选择：

> *   如果您的意图是创建支持特殊场景的服务——单向消息传递、消息队列、双工通信等，那么您最好选择 WCF
> *   如果您想创建可以在可用时使用快速传输通道的服务，例如 TCP、命名管道，甚至可能是 UDP（在 WCF 4.5 中），并且您还希望在所有其他传输不可用时支持 HTTP，那么您就是最好使用 WCF 并同时使用基于 SOAP 的绑定和 WebHttp 绑定。
> *   如果你想通过 HTTP 创建可以使用 HTTP 全部功能的面向资源的服务——使用 ETags 定义浏览器的缓存控制、版本控制和并发，传递各种内容类型，如图像、文档、HTML 页面等，使用 URI 模板要在您的响应中包含任务 URI，那么新的 Web API 是您的最佳选择。
> *   如果你想创建一个多目标服务，它既可以用作 HTTP 上的面向资源的服务，也可以用作 TCP 上的 RPC 样式的 SOAP 服务——请先跟我谈谈，我会给你一些建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:44:30.763

WCF 的一大亮点是需要在服务中的输入和/或输出模型发生变化时生成新的客户端代理。REST 服务不需要代理，客户端只需更改发送的查询字符串或更改以解析和/或使用不同的输出。

我发现 .Net 中的默认 JSON 序列化程序有点慢，我实现了[http://json.codeplex.com/](http://json.codeplex.com/)来进行入站和输出序列化。

WCF 服务并不复杂，REST 服务同样具有挑战性，因为您在 HTTP 的范围内工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:49:16.633

ASP.net Web API 是关于基于 HTTP 和 REST 的 GET、POST、PUT、DELETE 以及众所周知的 ASP.net MVC 编程风格和 JSON 可返回；Web API 适用于所有轻量级进程和纯 HTTP 组件。对于一个继续使用 WCF 的人来说，即使是简单或最简单的单一 Web 服务，它也会带来所有额外的包袱。对于 ajax 或动态调用的轻量级简单服务，WebApi 总是能解决需求。这巧妙地补充或有助于与 ASP.net MVC 并行。查看[播客：Hanselminutes Podcast 264 - 这不是你父亲的 WCF - 关于 WebAPI 与](http://www.hanselman.com/blog/HanselminutesPodcast264ThisIsNotYourFathersWCFAllAboutTheWebAPIWithGlennBlock.aspx)Scott Hanselman 的 Glenn Block 的更多信息。

# php - 在 MySQL 中使用 LIKE 和变量

> ID：12069654
> 
> 赞同：0
> 
> 时间：2012-08-22T09:03:29.197
> 
> 标签：php, mysql

好的，所以我想在我的 SQL 语句中使用 LIKE 运算符来匹配数据库查询。

我正在查看一个包含日期和时间的字段，就像这样

```
2012-04-27 12:00:00 
```

我只想比较字符串的第一部分，只是日期位，所以我使用 LIKE 但我没有得到任何匹配。

这是代码

```
$colname_cruises = "-1";
if (isset($_GET['id'])) {
$colname_cruises = str_replace('-', ' ', $_GET['id']);
}

$colname_date = "-1";
if (isset($_GET['date'])) {
$colname_date = $_GET['date'];
}

$query_cruises = sprintf("SELECT * FROM cruises WHERE title = %s AND departs LIKE %s", GetSQLValueString($colname_cruises, "text"), GetSQLValueString($colname_date, "text"));
$cruises = mysql_query($query_cruises, $connection) or die(mysql_error());
$row_cruises = mysql_fetch_assoc($cruises);
$totalRows_cruises = mysql_num_rows($cruises); 
```

我很确定仅仅做一个 LIKE %s 是不够的......我还能在这里添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:08:56.283

对于日期比较，您可以使用 between。尝试使用类似的东西：

```
departs between <date> and DATE_ADD(<date>,INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:08:26.860

如果您只想比较字符串的第一部分，只是日期，那么为什么不使用MySQL [**DATE()**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)

> 提取日期或日期时间表达式 expr 的日期部分

```
 SELECT DATE('2003-12-31 01:02:03');
   -> '2003-12-31' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:16:56.937

请试试

```
 "SELECT * FROM cruises WHERE title = '".$colname_cruises."' AND departs LIKE '".$colname_date."%'"; 
```

如果要获取包含此日期的起始值起始字符串的记录，则必须使用`Like $str%`.

谢谢

# c# - 我如何从当前项目编辑极乐世界主题？

> ID：12069655
> 
> 赞同：1
> 
> 时间：2012-08-22T09:03:35.147
> 
> 标签：c#, wpf, xaml, blend

我如何从当前项目中**编辑** [Ellysium主题？](http://elysium.codeplex.com/)需要编辑所有颜色和其他功能！我在我的项目中找不到可以编辑当前主题的源代码的地方。[这](http://elysium.codeplex.com/SourceControl/changeset/view/10074#146162) 一切都很好，但在标准的极乐世界控制中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:20:35.983

我不确定 ellysium 主题资源字典的确切文件名是什么，但如果你打开 App.xaml，你应该在合并字典下找到它的路径引用以找到它。一旦你有了它，你就可以打开文件并相应地编辑值。

如果您使用的是 Expression Blend，则此任务会更容易，因为您应该在“资源”选项卡（默认右上角）下列出资源字典，并且可以从那里单独编辑每个样式模板。希望这可以帮助。

（你可能会鼓励他们在他们实际的 CodePlex 项目下解决这个问题，因为上次我检查了它的所有文档，比如“即将推出”或类似的东西......）

# ruby-on-rails - 当我输入命令 bundle exec rspec spec/requests/static_pages_spec.rb 时出错

> ID：12069657
> 
> 赞同：0
> 
> 时间：2012-08-22T09:03:42.200
> 
> 标签：ruby-on-rails, command-line

每当我尝试输入命令时：

`bundle exec rspec spec/requests/static_pages_spec.rb`

它出现了以下错误消息：

```
/var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load': /home/nathan/Rails_Projects/sample_app/spec/requests/static_pages_spec.rb:40: syntax error, unexpected kEND, expecting $end (SyntaxError)
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
    from /var/lib/gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `autorun'
    from /usr/local/bin/rspec:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:09:16.830

您的测试文件s 中`static_pages_spec.rb`包含太多`end`s，或者之前的错误意味着它缺少有效`end`.

解析器遇到的是`kEND`（即“关键字结尾”）而不是`$end`（即文件结尾）。

编辑：看起来您缺少`do`粘贴的第 12 行（并且第 7-14 行的缩进不正常）。

# python - 等待孩子使用 os.system

> ID：12069659
> 
> 赞同：2
> 
> 时间：2012-08-22T09:03:46.000
> 
> 标签：python, shell, os.system

我使用大量`os.system`调用在 for 循环中创建后台进程。如何等待所有后台进程结束？

`os.wait`告诉我没有子进程。

ps：我使用的是 Solaris

这是我的代码：

```
#!/usr/bin/python
import subprocess
import os

pids = []
NB_PROC=30

for i in xrange(NB_PROC):
        p = subprocess.Popen("(time wget http://site.com/test.php 2>&1 | grep real )&", shell=True)
        pids.insert(0,p)
        p = subprocess.Popen("(time wget http://site.com/test.php 2>&1 | grep real )&", shell=True)
        pids.insert(0,p)

for i in xrange(NB_PROC*2):
        pids[i].wait()
os.system("rm test.php*") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:21:28.487

通常，`os.system()`当子进程完成时返回。所以确实没有什么`os.wait()`可做的。它相当于`subprocess.call()`。

用于`subprocess.Popen()`创建后台进程，然后对象的`wait()`or`poll()`方法`Popen`等待它们退出。

默认情况下，Popen 不会生成 shell，而是直接执行程序。这可以节省资源并防止可能的 shell 注入攻击。

根据以下文档`os.system()`：

> subprocess 模块提供了更强大的工具来生成新进程并检索它们的结果；使用该模块优于使用此功能

如果您想并行执行多个作业，请考虑使用`multiprocessing`，尤其是`Pool`对象。它在多个过程中处理了许多农业工作的细节。

**编辑：**定时执行程序；

```
import time
import subprocess

t1 = time.clock()
t2 = time.clock()
overhead = t2-t1

t1 = time.clock()
subprocess.call(['wget', 'http://site.com/test.php'])
t2 = time.clock()
print 'elapsed time: {:.3f} seconds.'.format(t2-t1-overhead) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:16:39.920

解决方案确实在 subprocess 模块中

```
#!/usr/bin/python
import subprocess
import os

pids = []
NB_PROC=4
cmd="(time wget http://site.com/test.php 2>&1 | grep elapsed | cut -d ' ' -f 3)"

for i in xrange(NB_PROC):
    p = subprocess.Popen(cmd,stdin=None,stdout=None, shell=True)
    pids.insert(0,p)
    print "request %d processed" % (i+1)

for i in xrange(NB_PROC):
    pids[i].wait()
os.system("rm test.php*") 
```

在此过程中切换到 debian，但由于某种原因，有时脚本会挂起，而有时它运行良好

# c# - 如何知道双字符串是否是往返安全的？

> ID：12069664
> 
> 赞同：5
> 
> 时间：2012-08-22T09:03:57.623
> 
> 标签：c#, parsing, double, double-precision

我有一个双精度的文本表示，想知道将它往返双精度和返回是否安全。如果我还想接受任何类型的数字样式的输入，我怎么知道这一点？或者我如何知道使用 Double.Parse 解析双字符串时是否丢失了任何精度？或者我如何 ToString 一个 double 以匹配与另一个双字符串相同的格式？我认为任何这些问题的答案都是一个解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:12:27.190

使用`R`格式说明符将 转换`double`为 a `string`：

```
myDouble.ToString("R") 
```

请参阅MSDN 上[的往返 ("R") 格式说明符。](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString)

> 往返 ("R") 格式说明符保证转换为字符串的数值将被解析回相同的数值。**仅 Single、 Double**和 BigInteger 类型支持此格式。

（强调我的）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T09:09:23.620

当然，这不是往返安全的，原因如下：

1.  将字符串解析为双精度时，数字格式会丢失，因为双精度不包含有关其视觉表示的任何信息。

2.  虽然字符串表示通常是十进制，但 double 是二进制浮点数。所以双精度中的 0.1 并不完全是 0.1，因为 0.1 的二进制表示没有有限多个数字。您可以解析为十进制而不是双精度以避免此问题。

我建议构建一个存储数字和字符串表示形式的结构。

# android - 如何在安卓模拟器上显示我电脑上的图像？

> ID：12069668
> 
> 赞同：0
> 
> 时间：2012-08-22T09:04:03.800
> 
> 标签：android

我想使用eclipse在我的电脑上显示保存在D://foldername//foldername//filename上的图像，以及如何从服务器显示它？当我从服务器访问数据时，图像也保存在服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:11:30.450

除非您正在运行一个提供对图像的公共访问的网络服务器，否则我认为您不能使用这样的路径从您的计算机显示图像。您需要将图像包含在应用程序内的`assets`或`res/drawable`文件夹中，或者通过 Web 服务器访问该图像，您可以使用[此问题](https://stackoverflow.com/questions/3038532/android-how-to-display-and-image-from-url?rq=1)中描述的方法从应用程序内加载该图像。

# android - 如何将多个原始参数传递给 AsyncTask？

> ID：12069669
> 
> 赞同：84
> 
> 时间：2012-08-22T09:04:08.797
> 
> 标签：android, android-asynctask, primitive, variadic-functions

有相关的问题，例如[如何将 2 个参数传递给 AsyncTask 类？](https://stackoverflow.com/questions/5546049/how-can-i-pass-in-2-parameters-to-a-asynctask-class)，但我遇到了徒劳地尝试将多个原语作为参数传递给 AsyncTask 的困难，所以我想分享我的发现。现有的问题和答案中没有捕捉到这种微妙之处，因此我想帮助遇到与我相同的问题的任何人，并为他们减轻痛苦。

问题是这样的：我有多个*原始*参数（例如两个长整数），我想将它们传递给 AsyncTask 以在后台执行——如何完成？（我的答案......在挣扎了一段时间后......可以在下面找到。）

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-08-22T09:23:57.073

只需将您的原语包装在一个简单的容器中并将其作为参数传递给`AsyncTask`，如下所示：

```
private static class MyTaskParams {
    int foo;
    long bar;
    double arple;

    MyTaskParams(int foo, long bar, double arple) {
        this.foo = foo;
        this.bar = bar;
        this.arple = arple;
    }
}

private class MyTask extends AsyncTask<MyTaskParams, Void, Void> {
    @Override
    protected void doInBackground(MyTaskParams... params) {
        int foo = params[0].foo;
        long bar = params[0].bar;
        double arple = params[0].arple;
        ...
    }
} 
```

像这样称呼它：

```
MyTaskParams params = new MyTaskParams(foo, bar, arple);
MyTask myTask = new MyTask();
myTask.execute(params); 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2014-01-14T17:38:35.423

另一种方式：您只需要在 MyTask 类中添加 MyTask 构造函数：

```
private class MyTask extends AsyncTask<String, Void, Void> {
    int foo;
    long bar;
    double arple;

    MyTask(int foo, long bar, double arple) { 
         // list all the parameters like in normal class define
        this.foo = foo;
        this.bar = bar;
        this.arple = arple;
    }
    ......   // Here is doInBackground etc. as you did before
} 
```

然后打电话

```
new MyTask(int foo, long bar, double arple).execute(); 
```

第二种方式，例如 David Wasser 的回答。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2012-08-22T09:04:08.797

（严格来说）不可能将多个原语传递给 AsyncTask。例如，如果要执行`myTask.execute(long1, long2)`并尝试`private class myTask extends AsyncTask<long, Void, Void>`使用相应的方法进行设置：

```
@Override
protected LocationItemizedOverlay doInBackground(long... params) {...} 
```

您的 IDE 可能会抱怨需要覆盖超类型方法。请注意，您正在使用所谓的[Varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)方法签名`doInBackground`，这`(long... params)`就像说“我接受可变数量的 long，存储为名为 params 的数组。我不完全理解导致编译器/IDE 投诉的原因，但我认为这与泛型类`Params`的定义方式有关。

在任何情况下，只要您正确地将原语转换为它们各自的非原语包装器（例如 int => Integer、long => Long 等），就可以毫无问题地实现您想要的。实际上，您不需要将基元显式转换为非基元。Java 似乎可以为您处理。您只需要按如下方式设置 ASyncTask（以 long 为例）：

```
private class MyTask extends AsyncTask<Long, Void, Void> {

    @Override
    protected void doInBackground(Long... params) {
        // Do stuff with params, for example:
        long myFirstParam = params[0]
    }
    ...
} 
```

然后，您可以按照最初的意图使用此类，例如：

```
MyTask myTask = new MyTask();
myTask.execute(long1, long2); 
```

或者对于您想要的任意数量的原语，只要它们属于同一类型。如果您需要传递多种类型的原语，也可以这样做，但您需要将上面的内容修改为：

```
private class MyTask extends AsyncTask<Object, Void, Void> {

    @Override
    protected void doInBackground(Object... params) {
        // Do stuff with params, for example:
        long myLongParam = (Long) params[0];
        int myIntParam = (Integer) params[1];

    }
    ...
} 
```

这更灵活，但它需要将参数显式转换为它们各自的类型。如果不需要这种灵活性（即单一数据类型），我建议坚持第一个选项，因为它更具可读性。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-01-28T03:25:10.197

内置的 execute 方法接受一个**Params**数组，但它们都必须是定义的类型。所以如果你只是将**PARAM**类型设置为**OBJECT**，那么只要它们是对象的子对象，你就可以传入任何你喜欢的东西。 ...

```
private class MyTask extends AsyncTask<Object, Void, Void> { 
```

然后在您的 doInBackGround 中，您只需将每个参数转换为您需要的参数：

```
 @Override
 protected void doInBackground(Object... params) {
     Context t = (Context)params[0];
     String a = (String) params[1];
     List<LatLng> list = (List<LatLng>)params[2];
     .
     .
     . 
```

你的执行很简单：

```
 new MyTask().execute(context,somestring,list_of_points); 
```

不如将它包装在您自己的包装类、捆绑包、散列或其他东西中的形式好，因为您的订单依赖于双方，但它会起作用。当然，你可以让你的数组成为 HashMap(,) 的参数，并且你基本上是在那个时候自定义实现一个包，但它会起作用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-30T01:48:59.400

我喜欢 malajisi 的方法，但如果你不喜欢，你不能使用 Bundle 类吗？

```
 Bundle myBundle = new Bundle();
 myBundle.putInt("foo", foo);
 myBundle.putLong("bar", bar);
 myBundle.putDouble("arple", arple); 
```

然后只需传递捆绑包并将其解压缩到 MyTask 中。这是一个可怕的想法吗？您避免创建自定义类，如果您决定稍后需要传递其他参数，它会很灵活。

更新：我写这个答案已经好几年了，我现在真的不喜欢它。我建议不要使用捆绑包。如果您需要将多个参数传递给异步任务（或任何东西，真的），请使用一个自定义类来一次保存所有参数。使用捆绑包可以很好地解决您不应该遇到的问题。没有法律禁止创建自定义类来准确保存您需要的内容，仅此而已。

另外，你为什么不使用协程？Asynctasks 在 2014 年是*如此*。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-01T13:29:42.393

这是通过子类化解决的。谷歌在官方的 Android AsyncTask 文档中有一个解决这个问题（子类化）的例子：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

**例子：**

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
                 // Escape early if cancel() is called
            if (isCancelled()) break;
        }
        return totalSize;
    }

    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[0]);
    }

    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
} 
```

# html - 如果服务器上不存在 HTML 文档，如何进行重定向

> ID：12069674
> 
> 赞同：2
> 
> 时间：2012-08-22T09:04:22.787
> 
> 标签：html, .htaccess, redirect, ssi, server-side-includes

当用户键入查询到不存在的页面并且 SSI 包含错误时，如何重定向到 404 或根页面？

或者如何检查服务器上是否存在 HTML 文档，如果不存在则进行重定向？

`domain.tld?anyquerystring`如果用户在我的网站上键入，则它包括`anyquerystring.html`SSI 的 HTML 页面。

如果用户键入不存在页面的查询，`domain.tld?blahblahblah`那么它会`[an error occurred while processing this directive]`代替 SSI 包含。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:16:44.360

无法用 php 检查它，因为如果页面不存在，您的 php 代码如何运行，您需要更改 .htaccess 文件，因为它会告诉服务器将用户重定向到定义的页面以防万一404 个

```
RewriteEngine on
ErrorDocument 404 http://www.yoursite.com/404.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:40:41.433

您可以在 SSI 中配置错误消息。答案是

```
<!--#config errmsg="Put here your error message, HTML or other code" --> 
```

# css - 使用 ems 时的正文字体大小

> ID：12069676
> 
> 赞同：0
> 
> 时间：2012-08-22T09:04:31.883
> 
> 标签：css, responsive-design

这可能是一个非常基本的问题，但作为一个对响应式网页设计相当陌生的人，我正在寻求澄清。

我目前使用像素作为我的字体大小，并在正文标签中将其设置为 16px。我错误地将字体大小设置为 100%，然后对我的所有字体使用 ems，但这会导致不同浏览器之间的重大不一致，因此我不得不恢复为像素。

我已经读过，通过将正文字体大小设置为 62.5% 相当于 1em。它是否正确？或者有没有人有更好的方法来做到这一点，我想知道目前的最佳做法是什么。

任何建议表示赞赏

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:09:57.827

您可以将字体大小设置为 62.5%，即 10px，这显然是一个小得多的字体大小和整数，因此更容易以像素为单位进行思考，但仍以 ems 为单位设置大小：1em 是 10px，0.8em 是 8px， 1.6em 是 16px 等

# excel - qlikview 语法 - uniq 键

> ID：12069677
> 
> 赞同：0
> 
> 时间：2012-08-22T09:04:32.850
> 
> 标签：excel, uniq, qlikview

我有一个包含 4 个字段的 excel 文件：a、b、c、key。我需要检查 QV 脚本，对于每一行 a、b、c，只有键。结果应该是具有不同键的行。例如，这是我需要捕捉的不正确情况：

关键 | c | 乙 | 一个

111 | 测试3 | 测试2 | 测试1

222 | 测试3 | 测试2 | 测试1

任何人都知道如何在 qlikview 中完成？

谢谢，莉娜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:18:29.500

有趣的问题。我建议将列`c + b + a`视为复合键并计算`key`每个复合键的字段中唯一值的数量。这是一种方法（`QlikView`脚本）：

```
DATA:
LOAD key, c, b, a
FROM some_file.xls;

LEFT JOIN(DATA)
LOAD c, b, a, COUNT(DISTINCT key) AS key_count
RESIDENT DATA
GROUP BY c, b, a; 
```

您的数据模型现在有一个名为 的第 5 列`key_count`。您现在可以`key_count`在图表或列表框或另一个带有 WHERE 子句的 LOAD 语句中使用来过滤在 field 中具有 2 个或更多值的行`key`。要扩展您的示例数据：

```
key | c | b | a | key_count
111 | 3 | 2 | 1 | 2
222 | 3 | 2 | 1 | 2
333 | 4 | 3 | 2 | 1
444 | 5 | 4 | 3 | 1 
```

在列表框或 LOAD 语句中，您现在可以轻松找到`key_count > 1`. 我希望这有帮助！

# ruby - 覆盖会话控制器防止使用自定义视图

> ID：12069679
> 
> 赞同：2
> 
> 时间：2012-08-22T09:04:35.203
> 
> 标签：ruby, ruby-on-rails-3, session, devise, custom-view

设计（2.1）在我告诉它使用自定义控制器之前一直很好地使用我的自定义视图。现在它忽略了我的自定义视图。

**以前一切正常：**

告诉 Devise 在`/config/devise.rb`

```
# ==> Scopes configuration
# Turn scoped views on. Before rendering "sessions/new", it will first check for
# "users/sessions/new". It's turned off by default because it's slower if you
# are using only default views.
config.scoped_views = true 
```

添加自定义视图：`/app/views/subscribers/session/new.html.erb`

在中设置路线`/config/routes.rb`

```
devise_for :subscribers 
```

**然后我添加了一个自定义的 SubscriberSessionsController**作为`/app/controllers/subscriber_session_controller.rb`

```
class SubscriberSessionsController < Devise::SessionsController

    before_filter :isInIframe

    private

        def isInIframe
            @hide_navbar = session[:in_iframe]
        end

end 
```

并修改 /config/routes.rb 告诉 Devise 使用这个新的控制器而不是它的默认值：

```
devise_for :subscribers, :controllers => { 
    :sessions => "subscriber_sessions"
  } 
```

**重新启动服务器后，Devise 现在会使用此控制器，但会忽略我的自定义视图。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:27:48.330

通常情况下，在发布问题十分钟后，我就破解了它。

Devise 没有找到视图的原因是它在不同的文件夹中寻找它。我的替换控制器被调用`subscriber_sessions.rb`，所以 devise 不再查找`views/subscribers/sessions`但是`views/subscribers/subscriber_sessions`。

我用以下方法解决了这个问题：

将我的订阅者路由更改为：

```
 devise_for :subscribers, :controllers => { 
    :sessions => "subscribers/sessions"
  } 
```

将我的订阅者会话控制器重命名为会话并将其移动到订阅者文件夹中，因此其新名称和位置为：`app/controllers/subscribers/sessions_controller.rb`

我还必须为类添加一个命名空间，所以新的 sessions_controller.rb 文件看起来像这样“

```
class Subscribers::SessionsController < Devise::SessionsController

    before_filter :isInIframe

    private

        def isInIframe
            @hide_navbar = session[:in_iframe]
        end

end 
```

# sql - 如何将时间列值从 oracleDB 检索到 .net 应用程序

> ID：12069682
> 
> 赞同：-1
> 
> 时间：2012-08-22T09:04:48.373
> 
> 标签：sql, oracle

我有一张 Oracle 表，其中有一个日期时间字段。在选择查询中，我能够在我的 .net 应用程序中获取所有字段值，但不能获取时间字段值。

```
select abc.Id, abc.Name, abc.When from details abc where abc.Id='"+1234+"' 
```

任何人都可以建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:07:51.977

Oracle返回字段的格式`DATE`取决于您在数据库中的默认[NLS](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch3globenv.htm)设置。

Oracle 以内部表示形式存储日期（和时间），当您选择日期值时，您可以根据需要对其进行格式化。官方 Oracle 解释在[这里](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i1847)。

要强制使用格式，您可以使用以下方法将日期显式转换为字符串表示形式：

```
select abc.Id, 
       abc.Name, 
       TO_CHAR(abc.When, 'DD-MON-YYYY HH24:MI:SS') AS when 
  from details abc 
 where abc.Id='"+1234+"' 
```

如果您只想要`WHEN`列的时间部分，那么：

```
select abc.Id, 
       abc.Name, 
       TO_CHAR(abc.When, 'HH24:MI:SS') AS when 
  from details abc 
 where abc.Id='"+1234+"' 
```

然后，这会将其作为字符串返回，而不是日期和时间，这对您来说可能合适，也可能不合适，具体取决于您随后想用它做什么。您为日期和时间选择的格式可以是任何 Oracle 日期和时间格式，请参见[此处](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements004.htm)。

希望能帮助到你...

# c# - 使用 Dotnet 客户端与 Java 服务器进行 Https 通信

> ID：12069683
> 
> 赞同：1
> 
> 时间：2012-08-22T09:04:55.833
> 
> 标签：c#, https, communication, .net

我需要借助`HTTPS`通信向银行发送财务信息（交易）。当`Java`我的应用程序在`.Net`.

以下只是我从他们那里收到的详细信息：

> HTTPS请求：
> • 对 https 的整个 ISO 请求应作为附件发送到以下 servlet：
> https:///Servlet/IBSOtherVendorRequestServlet

他们还需要哪些其他组件或文件？我可以使用哪些`namespace`来`.Net`进行沟通？

请帮助我如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:32:20.733

您必须知道如何查询 servlet：SOAP？休息 ？参数是什么，应该使用哪种方法？结果是纯文本、XML 还是 JSON？

看起来你必须向这个 Servlet 发送一个请求。您必须知道什么是“整个 ISO 请求”，然后使用 HttpClient 或 HttpWebRequest 将其发布到此 url。它可能看起来像这样：[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

# python - 谷歌 API 的 403 错误

> ID：12069686
> 
> 赞同：0
> 
> 时间：2012-08-22T09:05:00.370
> 
> 标签：python, google-app-engine

我使用 OAuth2.0 的 Google API，但有些是可以的，有些是错误的。

```
Server responded with: 403, <HTML>
<HEAD>
<TITLE>You are not authorized to access this API</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>You are not authorized to access this API</H1>
<H2>Error 403</H2>
</BODY>
</HTML> 
```

这就是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:40:51.213

两个可能的原因：-

1.  当我尝试使用未注册或超出每日限制的身份验证密钥进行访问时，我收到错误消息：

    ```
    {
            “错误”： {
              “错误”：[
               {
                “域”：“使用限制”，
                “原因”：“dailyLimitExceededUnreg”，
                "message": "已超过每日限额。请注册",
                “扩展帮助”：“https://code.google.com/apis/console”
               }
              ],
              “代码”：403，
              "message": "已超出每日限额。请注册"
            }
            }
    ```

2.  [http://www.google.com/support/enterprise/static/gapps/docs/admin/en/gads/admin/troubleshooting_common.html](http://www.google.com/support/enterprise/static/gapps/docs/admin/en/gads/admin/troubleshooting_common.html)

# java - 有人可以向我解释为什么我会出现这个错误吗？

> ID：12069696
> 
> 赞同：0
> 
> 时间：2012-08-22T09:05:24.877
> 
> 标签：java

再会，

我有一个问题，在我的代码中，一个声明在函数之外有错误。

片段是：

```
public class Gold {

    Block[][] block = new Block[4][4];

        this.block[1][4] = new Block(); //1

        public void populate() {
            this.block[1][4] = new Block();//2
    }

} 
```

代码 `this.block[1][4] = new Block();`2 没有错误。但是，不在函数内部的第一个代码显示错误：

> 非法启动类型
> 
> 找不到标志
> 
> ']' 预期的
> 
> 无效的方法声明，需要返回类型。

我只是想了解为什么会发生这种情况以及我缺少什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:08:24.113

没有索引为 4 的元素。最后一个元素的索引为 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T09:08:37.767

您不能像上面在案例 1 中所做的那样直接初始化变量，您可以`block[][]`在构造函数中初始化，例如：

```
public Gold(){
    this.block[1][3] = new Block();
} 
```

或在块中：

```
Block[][] block = new Block[4][4];
{
      this.block[1][3] = new Block();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T09:12:48.340

您在这里有两个问题，您需要初始化范围内的任何对象。要么您必须拨打 1 号线`in a constructor or in a function or with in a block (enclosed with in`{ `and`} `)`。`static block`在这里您需要知道和之间的区别`non-static blocks`。

您遇到的其他问题是`this.block[1][4] = new Block();`会抛出`ArrayIndexOutofBounds`异常，因为数组的长度为 4 并且您尝试在第 5 位插入和对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T09:08:31.980

您有一个必须在代码块中的语句。

尝试

```
public class Gold {
    Block[][] block = new Block[4][4];
    { // initializer block
        this.block[1][3] = new Block(); //1
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T09:09:21.093

您需要将代码包装在方法中，而不是在类主体中。如果它的类初始化部分`Gold`将其放在其构造函数中，例如：

```
public class Gold {

    Block[][] block = new Block[4][4];

    public Gold() {
          this.block[1][4] = new Block();
    }

} 
```

类主体仅允许变量声明和实例化，但不允许标准操作，例如更改对象（您的数组）值。

编辑：正如其他人指出的那样，索引`4`不存在于 size 的数组中`4`，只能访问`0`to的索引`3`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-22T09:10:25.130

```
this.block[1][4] = new Block(); //1 
```

是表达式而不是字段初始化。它不能在方法体之外。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-22T09:07:38.203

我认为您应该将代码放在构造函数中：

```
public Gold(){
    this.block[1][4] = new Block();
} 
```

在 java 类中，您可以定义变量或方法（包括构造函数），但不能在其中使用纯代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-22T09:08:54.350

这个句子

```
this.block[1][4] = new Block(); //1 
```

不能超出方法或初始化块。如果要初始化数组，则必须在声明中或方法内部进行（构造函数可能是一个好地方），或者必须使用初始化块。

还要检查数组边界。在 Java 中，数组具有基于 0 的索引。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-22T09:09:31.570

代码`this.block[1][4] = new Block()`已编译，但在运行时会失败：您的数组有 4 个元素，而 java 和所有类 C 语言中的索引从 0 开始，因此 4 元素长数组的最大值为 3。

而且你不能在java中的方法之外编写代码，所以如果你尝试这个，你会得到编译错误。

# python - Error with modules calling modules

> ID：12069697
> 
> 赞同：0
> 
> 时间：2012-08-22T09:05:29.717
> 
> 标签：python

I have a function

```
def brent(n): 
```

in a module prime. brent requires modules fractions, random

In my main module I do:

```
import prime # brent is found in here
import fractions # required for brent
import random # required for brent 
```

When I call brent(n) it errors saying it can't find random. The fix is to place

```
import random
import fractions 
```

INSIDE the original brent function.

Is this intended behaviour?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:06:58.623

You should (generally) import modules at the top of your own module, not inside functions.

A module import binds the imported names to the local scope, which means that if you import things inside a function, the names will only be available to that function and nothing else in your module.

# ruby - 为什么 `block_given?` 在这种动态定义的方法中不起作用？

> ID：12069700
> 
> 赞同：6
> 
> 时间：2012-08-22T09:05:39.563
> 
> 标签：ruby, ruby-1.9, ruby-1.9.3

当我编写采用可选块的方法时，我通常使用类似

```
block.call if block_given? 
```

但是，在像下面这样动态定义的方法中，`block_given?`似乎不起作用。

```
class Foo
  %w[bar baz].each do |method_name|
    define_singleton_method(method_name) do |&block|
      puts "Was #{method_name} given a block? #{block_given?}"
      puts block.call
    end
  end
end

Foo.bar { puts 'I am a block' } 
```

该块按预期调用，但`block_given?`返回 false。

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T10:08:09.997

块是闭包，因此它们会记住局部变量（例如`method_name`）。他们还记得块：`yield`并且`block_given?`正在寻找在`define_method`被调用时处于活动状态的块，而不是传递给的块`bar`。没有，所以给定的块返回 false。

一个更好的例子是

```
def create_method
  define_singleton_method('foo') do |&block|
    puts "Was given a block? #{block_given?}"
    puts yield
    puts block.call
  end
end

create_method {'block passed to create_method'}
foo {'block passed to the created method'} 
```

哪个输出

```
Was given a block? true
block passed to create_method
block passed to the created method 
```

# php - 无需插件即可登录 wordpress 的 Facebook

> ID：12069703
> 
> 赞同：3
> 
> 时间：2012-08-22T09:05:42.757
> 
> 标签：php, facebook, wordpress

我正在为网站访问者提供一个自定义登录页面，并希望包含使用 Facebook 登录按钮，以便应用程序检查用户电子邮件是否已注册，如果是，它将登录用户。

使用 wp_signon 我可以通过提供电子邮件和密码来登录用户，但在这种情况下，我没有用户密码，那么有没有办法在不使用插件的情况下提供 Facebook 登录按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T07:40:00.323

如果您想在没有插件的情况下执行此操作，则需要自己实现 OAuth。您可以使用本文作为参考，从头开始为您的主题创建一个 Facebook 登录按钮，无需插件。

[WordPress 前端 Facebook 登录](http://qnimate.com/wordpress-frontend-facebook-login/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T10:34:23.663

使用此代码并将 APP ID 替换为和您的域...

```
<html>
    <head>
      <title>Login with Facebook</title>
    </head>
    <body>

      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
        appId      : 'YOUR_APP_ID', // App ID
        channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script>

  <div class="fb-login-button">Login with Facebook</div>

</body> 
```

# entity-framework - 为什么使用实体框架迁移

> ID：12069708
> 
> 赞同：1
> 
> 时间：2012-08-22T09:05:52.600
> 
> 标签：entity-framework, migration

我已经开始研究 4.3.1 上的实体框架迁移。有几个问题：

1.  开发过程中首选什么？为什么我不应该总是删除并重新创建我的数据库然后重新设置种子。如果我使用代码优先迁移，我可以选择最初为我的数据库播种，然后为每个迁移添加一个种子方法以仅添加新数据吗？如果我使用自动迁移，是否可以做类似的事情？即最初播种，然后根据需要播种？

2.  在开发过程中使用迁移有什么好处？我实际上只需要在迁移到生产环境时进行迁移。所以，我需要创建我的初始脚本，然后为每个迁移创建脚本，那么是否可以只在我想转移到生产环境时使用迁移，然后创建一个初始脚本并从那时起维护迁移历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:20:35.790

好吧，在我们的例子中，我们开始使用迁移，因为在我们公司，开发人员没有创建数据库的必要权限，这导致了一个有趣的场景，我放弃了几次数据库，不得不询问数据库管理员每次都重新创建它......
在我看来，增量增长你的数据库似乎更容易，而不是每次都重新创建它。如果每次添加、删除或更改属性时我都必须删除并重新创建我们的数据库，我永远不会看到它的结束。

我还没有看到增量种子的可能性，除非您创建手动迁移文件。
迁移可以转到特定版本（向前或向后），并且可以从迁移中生成 SQL 脚本。
所以基本上，您不必再手动创建迁移 SQL 脚本，您可以让 Migrations 为您完成它。

# jsp - JSP...多个对象的表

> ID：12069722
> 
> 赞同：0
> 
> 时间：2012-08-22T09:07:03.710
> 
> 标签：jsp

在 JSP 中，要求是创建一个历史页面，该页面将显示任何类型的对象的历史记录，例如订单、客户、付款、运输。

如何在不使用对象类型的 IF 的情况下为多个对象创建表？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:19:32.410

在我看来，您应该在模型方面引入一个概括：也许是一个接口，声明您需要用于历史显示的所有 getter。通过实现该接口的所有订单、客户、支付和运输类，您可以依赖可从 JSP 访问的 getter。

# .htaccess - .htaccess 简单的重定向和太多的重定向：如何解决？

> ID：12069724
> 
> 赞同：0
> 
> 时间：2012-08-22T09:07:06.237
> 
> 标签：.htaccess

我的站点 (domain.com) 现在位于 /var/www/ 中，您也可以通过其 IP 直接访问它：88.88.88.88

我想获得：当用户输入IP：88.88.88.88时，它会重定向到88.88.88.88/reboot/

如果用户输入完整的域名，它会像现在一样显示该站点。

我尝试使用 .htaccess

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} 88.88.88.88
RewriteRule .* http://88.88.88.88/reboot/ [R=301,L]
RewriteCond %{HTTP_HOST} ^mysite.com
RewriteRule .* http://www.mysite.com [R=301,L] 
```

**效果不好：**

www.mysite.com：好

mysite.com: 好

88.88.88.88 -> 重定向到 88.88.88.88/reboot：好

**但随后它会生成一个错误：错误 310 (net::ERR_TOO_MANY_REDIRECTS)**

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:19:21.013

当您使用**88.88.88.88/reboot**时，您的 HTTP_HOST 仍然等于*88.88.88.88*。

尝试根据 REQUEST_URI 添加 RewriteCond 规则，这会将所有不属于的内容重定向`/reboot`到`/reboot`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} 88.88.88.88
RewriteCond %{REQUEST_URI} !^/reboot/
RewriteRule ^(.*)$ http://88.88.88.88/reboot/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^mysite.com
RewriteRule .* http://www.mysite.com [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:21:33.657

这`ERR_TOO_MANY_REDIRECTS`是因为您的规则循环。每当请求到达主机 88.88.88.88 时，您会将其重定向到 88.88.88.88/reboot/ ，但 /reboot/ uri 也在该主机上，因此它会再次重定向并循环。

如果您只想将 / 重定向到主机 88.88.88.88 上的 /reboot/ ，则需要将您的更改`RewriteRule`为：

```
RewriteCond %{HTTP_HOST} 88.88.88.88
RewriteRule ^/$ http://88.88.88.88/reboot/ [R=301,L] 
```

但是，如果您希望重定向 /reboot/ 之外的所有内容，则需要添加一个条件 ( `RewriteCond`)：

```
RewriteCond %{HTTP_HOST} 88.88.88.88
RewriteCond %{REQUEST_URI} !^/reboot/
RewriteRule ^/$ http://88.88.88.88/reboot/ [R=301,L] 
```

（保持其余规则不变）。

# entity-framework - 没有使用实体框架迁移进行初始创建

> ID：12069737
> 
> 赞同：27
> 
> 时间：2012-08-22T09:07:41.277
> 
> 标签：entity-framework, migration

我正在尝试使实体框架迁移正常工作。我启用了代码优先迁移，它创建了一个迁移文件夹、配置文件和 mig 历史表，但没有初始创建。我错过了一步吗？这是由 EF (4.3.1) 创建的新数据库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T15:26:12.030

默认情况下，此行为不存在，但您可以很容易地以多种不同的形式使用它。

1.  您可以`context.Database.CreateIfNotExists();`在应用程序启动时调用。

2.  您可以使用内置`DatabaseInitializer`s 之一。初始化程序内置在`CreateDatabaseIfNotExists`EntityFramework 中，只需将其添加到您的项目中即可。

3.  您可以创建自己的自定义数据库初始化程序，其中包括选项#1 本身。示例：[代码优先迁移和初始化](https://stackoverflow.com/a/11906787/1002041)

您可以通过代码或配置文件在项目中包含 DatabaseInitializers。

**通过代码包含一个 EntityFramework Database Initializer：**

在您的应用程序启动中，您可以像这样设置 DatabaseInitializer：

```
System.Data.Entity.Database.SetInitializer<DairyMmmContext>(new System.Data.Entity.CreateDatabaseIfNotExists<DairyMmmContext>()); 
```

注意：此代码在实体框架的整个生命周期中已多次更改！此示例适用于 EF 4.3，这是可通过 nuget 获得的当前生产版本。

**通过配置元素包含一个 EntityFramework Database Initializer：**

```
<configuration>
  <entityFramework>
    <contexts>
      <context type="MyNamespace.MyEFDataContext, AssemblyName">
        <databaseInitializer
          type="System.Data.Entity.CreateDatabaseIfNotExists`2[[MyNamespace.MyEFDataContext, AssemblyName],
               [MyNamespace.Migrations.Configuration,  AssemblyName]], EntityFramework" />
      </context>
    </contexts>
  </entityFramework>
</configuration> 
```

您会注意到这种配置可能有点“不优雅”。您需要将`AssemblyName`上面替换为您保存实体框架内容的程序集的名称，替换`MyNamespace.MyEFDataContext`为您的实体框架数据上下文`MyNamespace.Migrations.Configuration`的完全限定名称，并替换为您的配置类的完全限定名称（默认情况下在您的 Migration 文件夹中项目）。

**编辑：编辑以回应其他评论**

迁移是从一个模式定义到另一个模式定义的更改。创建空数据库不是迁移（但之后的一切都是）。您的项目中将没有迁移源文件，仅用于创建一个空数据库，这是由初始化程序在代码中完成的。

如果您已经在使用`DropCreateDatabaseAlways`初始化程序，它应该这样做。但是，我注意到您正在代码中设置初始化程序，这意味着可能会出现计时问题（在您的上下文已经超过调用任何初始化程序的点之后设置初始化程序）。

您可以强制实体框架在代码中的任何位置运行您的初始化程序`context.Database.Initialize(true);`（参数为真/假以强制初始化，而不管当前状态如何）。每次都会删除并重新创建您的数据库。

但是您也可以确保在应用程序的生命周期中尽早设置您的初始化程序（在您创建上下文的单个实例之前）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-11T05:11:42.473

“初始创建”不是自动创建的！您需要自己创建它。EF的一些教程令人困惑，我和你有同样的误解。

你需要做什么：

```
-Add-Migration InitialModel 
```

如果您已经创建了数据库表和域模型，那么：

```
-Add-Migration InitialModel -IgnoreChanges 
```

从这一点开始，您的代码将与数据库同步。每次更改代码时，都可以使用 Add-Migration 将更改添加到数据库中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-20T02:41:09.593

[此处（在 microsoft.com 上）](http://msdn.microsoft.com/en-us/data/jj591621.aspx)的文章/教程 描述了 initialCreate 迁移不存在的原因。仅当数据库已存在时才会添加迁移。否则，第一个迁移将是“initialCreate”，因为创建迁移到尚不存在的数据库是没有意义的……没有数据库意味着在向下迁移时没有任何东西可以回滚。

这是相关的段落：

> 在 Package Manager Console 中运行 Enable-Migrations 命令此命令已将 Migrations 文件夹添加到我们的项目中，这个新文件夹包含两个文件：
> 
> **配置类。**此类允许您配置迁移在您的上下文中的行为方式。对于本演练，我们将仅使用默认配置。 *由于您的项目中只有一个 Code First 上下文，因此 Enable-Migrations 已自动填写此配置适用的上下文类型。*
> 
> **InitialCreate 迁移**。之所以生成此迁移，是因为在启用迁移之前，我们已经让 Code First 为我们创建了一个数据库。此脚手架迁移中的代码表示已在数据库中创建的对象。在我们的例子中，它是带有 BlogId 和 Name 列的 Blog 表。文件名包含一个时间戳以帮助排序。
> 
> ***如果尚未创建数据库，则不会将此 InitialCreate 迁移添加到项目中。相反，我们第一次调用 Add-Migration 时，创建这些表的代码将被搭建到新的迁移中。***

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-30T23:36:51.977

不确定它是否相同，但我遇到了类似的问题。我认为我的问题与我不使用配置文件中的连接字符串来获取我的连接字符串这一事实有关。

摆弄解决方案中的启动项目以及包管理器控制台中的项目组合，我能够生成第一个迁移。

还要确保你有一个带有 dbContext 类名称的连接字符串，以便包管理器可以找到它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-08T12:05:38.200

我正在使用 EF 6 RC1 并遇到了这个问题，即在运行 Enable-Migrations 时既没有创建 InitialCreate 也没有创​​建 __MigrationHistory。

实际上，就在从 EF 5 升级到 EF 6 之后，我运行了 Enable-Migrations，由于某种原因，它使用 EF 5 架构创建了一个 __MigrationHistory 表，所以我删除了它和我的 Migrations 目录并尝试重新开始。

但是每次我删除 Migrations 目录时，它都不会创建 InitialCreate 或 __MigrationHistory。我尝试删除并重新创建数据库并重新启动 Visual Studio 2012 无济于事。我放弃了这一天，第二天早上又试了一次——让我的电脑坐了大约 8 个小时后，它创建了 InitialCreate。我猜一定有一个缓存有一个很长的超时时间 - 有人吗？我也猜测重新启动可能会清除缓存，但我没有尝试过。

无论如何，都可以使用`PM> Add-Migration InitialCreate`手动执行该步骤。

无论如何，我仍然没有得到 __MigrationHistory 表。显然，EF 6 已从在 Enable-Migrations 命令期间创建它改为仅在 Update-Database 命令期间创建它。由于那时我的模式已经创建，我需要将其拆除并手动重新创建它：

```
PM> Update-Database -TargetMigration:0
PM> Update-Database 
```

我还在第一个命令后停止检查数据库的状态，以确保我正在更新正确的，因为[根据这个](http://odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)，数据库连接字符串会根据配置被拾取或自动生成，除非配置正确，否则会有不能保证您将访问您打算访问的数据库或 SQL Server 实例。

在运行这两个命令后，它创建了一个 __MigrationHistory 表 - 它并没有将它创建为系统表（无论如何我并不真正想要），所以一切都很好。与 OP 的问题不完全相同，但希望这对其他人有帮助。

参考：

*   [http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/](http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/)
*   [重置实体框架迁移](https://stackoverflow.com/questions/11679385/reset-entity-framework-migrations)
*   [如何从头开始重新创建迁移](https://stackoverflow.com/questions/17730383/how-to-recreate-migrations-from-scratch)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-27T12:12:08.270

我知道这很旧，但没有公认的答案，我也有同样的问题。

诀窍是 Enable-Migrations 命令。如此处所述[，](https://msdn.microsoft.com/en-us/library/jj554735(v=vs.113).aspx)有一个命令**Enable-Migrations –EnableAutomaticMigrations**。它的作用是在您所在的位置开始迁移。

如果您希望第一次迁移是创建数据库，只需运行**Enable-Migrations**（不带 --EnableAutomaticMigrations）。

并记住设置初始化程序：

```
 Database.SetInitializer(new MigrateDatabaseToLatestVersion<LicenseContext, Configuration>()); 
```

# android - android actionbar 夏洛克分隔线

> ID：12069741
> 
> 赞同：4
> 
> 时间：2012-08-22T09:07:44.877
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的 android 应用程序中使用 Actionbar Sherlock 如何在布局中的图标之间制作这种样式分隔符？我试图通过 actionBarDivider 来实现它，但它只在图标和文本之间分开。并且它不会由全高操作栏显示

[https://www.dropbox.com/s/r48oq85mx8z68ug/actionbar.png](https://www.dropbox.com/s/r48oq85mx8z68ug/actionbar.png)

我的样式文件

```
 <style name="Theme.amoCrm" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/Widget.amoCrm.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.amoCrm.ActionBar</item>
    <item name="absForceOverflow">true</item>  

    <item name="actionBarDivider">@drawable/actionbar_divider_px</item>
    <item name="android:actionBarDivider">@drawable/actionbar_divider_px</item>
    <item name="dividerVertical">@drawable/actionbar_divider_px</item>
</style>

<style name="Widget.amoCrm.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="background">@drawable/actionbar</item>
    <item name="android:background">@drawable/actionbar</item>

    <item name="android:logo">@drawable/actionbar_logo</item>
    <item name="logo">@drawable/actionbar_logo</item>

    <item name="displayOptions">useLogo|showHome</item>
    <item name="android:displayOptions">useLogo|showHome</item>

    <item name="divider">@drawable/bg_striped_split</item>
    <item name="android:divider">@drawable/bg_striped_split</item>

    <item name="itemPadding">15dp</item>
    <item name="android:itemPadding">15dp</item>
</style> 
```

我的活动

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("Add")
        .setIcon(R.drawable.actionbar_add_icon)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    menu.add("Search")
        .setIcon(R.drawable.actionbar_search_icon) 
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return true;
} 
```

结果我得到了这样

[https://www.dropbox.com/s/m5w9vnbqts03t9p/actionbar_2.png](https://www.dropbox.com/s/m5w9vnbqts03t9p/actionbar_2.png)

# c# - 公式在一定数量后停止工作

> ID：12069748
> 
> 赞同：0
> 
> 时间：2012-08-22T09:08:28.080
> 
> 标签：c#, floating-point

> **可能重复：**
> [为什么 C# 中的浮点运算不精确？](https://stackoverflow.com/questions/753948/why-is-floating-point-arithmetic-in-c-sharp-imprecise)
> [为什么十进制数不能用二进制精确表示？](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)

我不明白为什么，这个公式一直有效，直到 Scrap = 51，Rec 应该是 17，而是 16.99。

```
Scrap = int.Parse(textBoxS.Text);

for (counter = 0; counter < Scrap; textBoxRec.Text = Rec.ToString() )
{
    if (Rec == (int)Rec + 0.66)
    {
        Rec = (int)Rec + 1;
        counter++;
    }
    else
    {
        Rec = Rec + 0.33;
        counter++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:15:04.473

通过 == 比较浮点数绝不是一个好主意。

```
double d1 = 16.0 + 0.33 + 0.33
double d2 = 16.0 + 0.66 
```

然后 d1 != d2，因为 0.33 没有作为双精度的精确表示，因为双精度是二进制浮点数，并且可能 0.66 的双精度表示不同于 0.33 的双精度表示的两倍。

使用小数。

并尝试改进您的代码。在我看来，增加循环内的计数器并使用 for 循环头部的第三个位置用于不同的目的是可怕的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:19:36.217

简单的解决方案：将 Rec 从 double 更改为 decimal。如果是这样，您还必须将 0.66 更改为 0.66m，将 0.33 更改为 0.33m。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:16:01.213

我假设 Rec 是`double`并且它的初始值是`0`。比

安装在

```
if (Rec == (int)Rec + 0.66) 
```

利用

```
 if (Math.Abs(Rec-(int)Rec-0.66) < 0.001) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T09:16:11.100

`Rec == (int)Rec + 0.66``false`即使数字“相等”也可以。它与浮点数二进制表示有关。浮点数必须以稍微不同的方式进行比较：

`if (Math.Abs(Rec - ((int) Rec + 0.66)) < epsilon) ...`

其中 epsilon 是一个很小的值，在这种情况下`0.1`就足够了。

# svn - SVN 图标覆盖未正确显示

> ID：12069772
> 
> 赞同：49
> 
> 时间：2012-08-22T09:09:45.470
> 
> 标签：svn, tortoisesvn

我正在测试SVN。配置完成后，我可以成功添加/提交文件。

但是，我看不到文件和文件夹上的状态图标。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-07-23T07:02:11.780

就我而言，Dropbox 覆盖在注册表中以“（带引号的标识符）开头。我删除了所有的”前缀并重新启动 explorer.exe。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers 
```

编辑：我安装了 Windows 10，这个解决方案对我不起作用。所以我只是去了同一个注册表位置并删除了所有谷歌和 SkyDrive 记录并重新启动 explorer.exe。

第二次编辑：安装 TortoiseGit 后，它修复了所有内容，无需任何自定义。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-10-11T17:19:12.910

要解决此问题，请转到 TortoiseSVN > 设置 > 图标叠加 > 状态缓存从默认更改为外壳。

如果使用驱动器 A 或 B，请检查驱动器类型为 A 和 B。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-08-22T09:18:54.803

不幸的是，这在 Windows 上是一个很常见的问题，图标要么没有更新，要么消失了。我觉得这很烦人。它通常通过刷新 Windows 文件夹 (F5) 或通过执行 SVN 清理来修复，

```
Right click on the folder ->  TortoiseSVN -> Clean up... 
Select Clean up working copy status 
```

我从来没有能够永久解决这个问题，这只是一种解决方法。将 TortoiseSVN 保持在最新版本可能有帮助，也可能没有帮助。

请注意，清理只会清理您的本地工作副本，它不会对实际存储库做任何事情。它是一个安全的操作。

* * *

根据您的评论，显然这还不够。你有很多其他程序也使用覆盖图标吗？如果是这样，也许您可​​以在此线程中找到解决方案：[TortoiseSVN 图标不在 Windows 7 下显示](https://stackoverflow.com/questions/1057734/tortoisesvn-icons-not-showing-up-under-windows-7)？第二个投票最多的答案还涉及网络驱动器等。它是一本好书。

* * *

另外，你安装后重启电脑了吗？从[TortoiseSVN 常见问题解答](http://tortoisesvn.tigris.org/faq.html#ovllostonupgrade)：

> 安装后你当然重启了你的电脑？如果你还没有，请现在这样做。TortoiseSVN 是一个 Windows Explorer Shell 扩展，将与 Explorer 一起加载。
> 
> ...
> 
> 否则，请尝试进行修复安装（当然还要重新启动）。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-02-06T07:56:05.653

我遇到的问题是投递箱将其覆盖置于比 SVN 更高的优先级

他们都在条目的开头放置空格以将它们推到列表的顶部

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\ Explorer\ShellIconOverlayIdentifiers\

以下文章更全面地解释了这一点，并展示了如何解决它。

[https://www.garethjmsaunders.co.uk/2015/03/22/managing-overlay-icons-for-dropbox-and-tortoisesvn-and-tortoisegit/](https://www.garethjmsaunders.co.uk/2015/03/22/managing-overlay-icons-for-dropbox-and-tortoisesvn-and-tortoisegit/)

但是，由于 dropbox 在我的机器上经常更新相对论，而且我很少更新 Tortoise SVN，我建议只在 tortoise 条目上附加空格以将它们推到列表中，否则当 Dropbox 软件更新时你将不得不再次执行所有这些操作安装。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-08-28T14:17:57.500

以下是步骤：

1.  运行“regedit”并找到：“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\ Explorer\ShellIconOverlayIdentifiers\”

2.  按您想要的顺序重命名文件夹（技巧使用 01_、02_ 作为前缀）

3.  从任务管理器中终止 explorer.exe 并重新运行 explorer.exe 任务。

根据给定的偏好，您将看到覆盖显示在您最初没有看到的位置

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-10-17T04:49:07.477

就我而言，乌龟图标根本没有显示，我尝试了这个并解决了我的问题：

1.  打开注册表
2.  HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers
3.  删除所有文件夹 OneDrive
4.  删除所有文件夹 SkyDrive

（重点是把所有的乌龟文件夹放在最上面）

5.  打开任务管理器并杀死资源管理器
6.  通过 TaskManager 重新运行资源管理器

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-10T10:08:41.387

我用 TortoiseGit 和 TortoiseSVN 遇到了这个问题。DropBox 将其注册表项重命名为前缀“”，比我为 Tortoise 所做的要多。

*Tortoise 可以通过TortoiseGit > Settings > Icon Overlays > Overlay Handlers*直接打开注册表编辑器， 然后单击*Start registry editor*并重命名条目，以便按字母顺序排列的第一个成为您想要的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-07T11:22:46.637

我的叠加层突然消失了（或者我是这么想的）。我看到这篇文章[https://corengen.wordpress.com/2014/07/30/my-tortoisesvn-icon-overlays-have-disappeared/](https://corengen.wordpress.com/2014/07/30/my-tortoisesvn-icon-overlays-have-disappeared/)指出 Windows 有 15 个用于覆盖图标的插槽；4 个保留给 windows，剩下 11 个给其他应用程序。无论注册表中有多少覆盖键，Windows 都会按字母顺序选择前 11 个。

当我升级 Office 时，OneDrive 添加了覆盖图标 - 以很多空格为前缀 - 将 Tortoise 的覆盖推到阈值以下： [windows registry](https://i.stack.imgur.com/hcojJ.png) 因为我没有使用 OneDrive，所以解决方案是在 OneDrive 键名中添加“z” .

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-24T18:54:12.423

这不是问题，就像[Avada Kedavra 所说](https://stackoverflow.com/a/12069928/3738405)的那样，实际上，这在“图标叠加设置”部分中有记录[，](https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html)我也在下面显示。你可以阅读它，然后选择你最喜欢的一个。

> 由于获取工作副本的状态需要相当长的时间，TortoiseSVN 使用缓存来存储状态，因此浏览器在显示覆盖时不会被占用太多。您可以在此处根据您的系统和工作副本大小选择 TortoiseSVN 应该使用的缓存类型：
> 
> 默认
> 
> 在单独的进程 (TSVNCache.exe) 中缓存所有状态信息。如果工作副本中的文件被修改，该过程会监视所有驱动器的更改并再次获取状态。该进程以尽可能低的优先级运行，因此其他程序不会因此而被占用。这也意味着状态信息不是实时的，但覆盖更改可能需要几秒钟。
> 
> **优点：**覆盖以递归方式显示状态，即如果工作副本深处的文件被修改，则工作副本根目录之前的所有文件夹也将显示修改后的覆盖。由于进程可以向 shell 发送通知，因此左侧树视图上的覆盖通常也会发生变化。
> 
> **缺点：**即使您不从事项目，该过程也会不断运行。它还使用大约 10-50 MB 的 RAM，具体取决于工作副本的数量和大小。
> 
> **贝壳**
> 
> 缓存直接在外壳扩展 dll 内完成，但仅适用于当前可见的文件夹。每次您导航到另一个文件夹时，都会再次获取状态信息。
> 
> **优点：**只需要很少的内存（大约 1 MB 的 RAM）并且可以实时显示状态。
> 
> **缺点：**由于只缓存了一个文件夹，因此覆盖不会递归显示状态。对于大型工作副本，在资源管理器中显示文件夹可能比使用默认缓存需要更多时间。mime-type 列也不可用。
> 
> **没有任何**
> 
> 使用此设置，TortoiseSVN 根本不会在资源管理器中获取状态。正因为如此，文件不会得到覆盖，而文件夹只有在版本化后才会得到“正常”覆盖。没有显示其他覆盖，也没有额外的列可用。
> 
> **优点：**绝对不使用额外的内存，并且在浏览时根本不会减慢资源管理器的速度。
> 
> **缺点：**资源管理器中不显示文件和文件夹的状态信息。要查看您的工作副本是否被修改，您必须使用“检查修改”对话框。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-22T09:24:55.933

Windows 上的 Tortoise SVN 经常与真实文件状态失去同步。在这种情况下，尝试做一个`svn cleanup`.

另一件事，它还可能取决于您的源文件所在的位置、不同的驱动器、网络驱动器等。Tortoise 中有一个选项可以在远程驱动器上允许或不覆盖图标。

看看这个： *TortoiseSVN* / *Settings* / *Icon Overlays* / *Drive types*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-17T07:04:13.953

首先清除 Windows 系统中的临时文件，然后重新启动系统。

运行`%temp%`>>删除所有文件

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-11T19:12:17.717

当我从 Windows 7 升级到 10 时遇到了同样的问题。最终我必须重新安装 SVN 并重新启动系统，它才能工作。但是，我必须手动将每个 SVN 目录升级到新的 SVN 1.8 格式（右键单击它会自动显示在资源管理器中以将目录升级到最新版本）。希望这可以帮助。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-24T08:47:33.767

我找到了一个简单的解决方案，只需打开TortoiseSVN 的**Settings**，然后展开**Icon Overlays**，选择**Icon Set**并更改图标集。

我的默认图标集是**XP Style**，我将其更改为**Win10**，因为 Win10 是我当前使用的操作系统。

[![那个设定](../Images/778164c574fa7d201e9bf91be639b559.png)](https://i.stack.imgur.com/8knh7.jpg)

重新启动计算机，问题就解决了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-10T13:43:56.310

就我而言，所有图标都突然消失了。

解决方案 ：

1.  转到任务管理器并杀死资源管理器
2.  在任务管理器文件（新任务（运行））=>资源管理器

一切又出现了……

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-12T18:50:28.813

只需使用任务管理器关闭我的文件资源管理器，然后再次运行它即可为我解决此问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-18T20:30:34.793

或者您也可以只在 Windows 中使用命令行界面 CMD。我知道，它不是 GUI（即使我通常喜欢使用图形用户界面），但是，它只有两行！！！

像这样解决您的问题：

1- 以管理员身份运行命令行界面 (CMD)。

2-更改为正确的磁盘驱动器，通过键入带冒号的驱动器号（例如：“D:”、“E:”，或者像我的一样是“W:”）。然后“cd”到你的本地存储库目录（我的是 W:\svn\internet）然后执行这些行：

```
W:\>svn cleanup

W:\svn\internet>svn up 
```

这样，您就可以确定它是最新的。你甚至不需要一个图标来告诉你！

# html - xslt 从中检索信息

> ID：12069779
> 
> 赞同：1
> 
> 时间：2012-08-22T09:10:18.357
> 
> 标签：html, xslt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:27:13.277

像这样尝试：

```
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="div">
        <xsl:element name="div">
            <xsl:value-of select="normalize-space(a/text()[1])"/>
            <xsl:value-of select="(.//span/span[@class='nu'])[1]/text()"/>
            <xsl:value-of select="normalize-space(a/text()[2])"/>
            <xsl:value-of select="(.//span/span[@class='nu'])[2]/text()"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

我假设`<div>`已正确关闭:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:42:30.837

您可能想要创建一个参数来保存“nu”值。

```
<xsl:param name="lang" select="'nu'" /> 
```

然后，您将能够像这样提取特定于语言的文本

```
<xsl:template match="span[@class='languageSpecificText']">
   <xsl:value-of select="span[@class=$lang]" />
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html"/>

   <xsl:param name="lang" select="'nu'" />

   <xsl:template match="a">
      <xsl:apply-templates />
   </xsl:template>

   <xsl:template match="span[@class='languageSpecificText']">
      <xsl:value-of select="span[@class=$lang]" />
   </xsl:template>

   <xsl:template match="a/text()">
      <xsl:value-of select="normalize-space()" />
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<div>Swap(T)</div> 
```

将参数更改为'vb'，您会得到以下信息

```
<div>Swap(Of T)</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:44:56.097

# c++ - 另一个类成员函数中另一个类的对象

> ID：12069780
> 
> 赞同：0
> 
> 时间：2012-08-22T09:10:23.817
> 
> 标签：c++

我有以下代码：

```
class A
{
public:
    A();

private:
    void slot();
}; 
```

第二类 B 看起来像：

```
class B
{
public:
    B();

private:
    // Some stuff...
}; 
```

在 file1.cpp 中有两个类的静态对象：

```
static A a;
static B b; 
```

现在在file2.cpp（包含类实现）中，我需要在file1.cpp中创建`class A`的对象的槽函数中。`b`获得它的最佳方法是什么？这是如何使用 C++ 完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:17:19.727

`static`意思是“这个翻译单元的本地”。你试图做的事情是不可能的。

另一种设计将使用非静态命名空间范围对象，例如：

globals.hpp:

```
extern A a;
extern B b; 
```

globals.cpp:

```
#include "globals.hpp"
A a;
B b; 
```

A.cpp：

```
#include "globals.hpp"
void A::slot(){
    //use b
} 
```

你需要小心这个设计，以确保你在调用`A::slot`之前`b`没有被构造。

# wpf - 面板中托管的用户控件

> ID：12069782
> 
> 赞同：0
> 
> 时间：2012-08-22T09:10:27.517
> 
> 标签：wpf

我花了很多时间来解决这个问题。我在 wpf 中有自定义用户控件，它是带有 10 个按钮的工具栏。此工具栏添加在 Panel(winform panel) panel.Controls.Add(usercontrol) 中。我想要的是，从面板响应 MouseLeave 事件。我试过 panel.MouseLeave += MouseLeaveEvent，但没有引发事件。没有一个事件没有引发（MouseMove 等）。是否有任何解决方案，如何实现，将引发 MouseLeave 事件？非常感谢。

**编辑**

这是代码。

```
CustomToolbar = new AxisMediaControlToolbarViewModel(this);
                    var toolbarView = new AxisMediaControlToolbarView { ViewModel = CustomToolbar };
                    var elementHost = new ElementHost { Dock = DockStyle.Fill, Child = toolbarView };
                    toolbarPanel.Controls.Add(elementHost); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:15:14.593

原因之一可能是您的面板的背景未设置。

如果你不设置背景，那么控件虽然是“它的区域不被照顾”并且实际上它是透明的，因为它没有被绘制。然而，它有更多的后果：它的区域不仅没有被绘制，而且它也没有被跟踪，即鼠标事件。

对于初学者，请尝试设置 Background="Transparent"。这可能没什么意义，因为它已经是透明的，但这样面板控件将**有**背景，如果没有其他问题，它可能会立即开始看到鼠标事件。

编辑：快速示例：

用户控件.xaml

```
<UserControl x:Class="UserControlMouse.MyButtonPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             Background="LightBlue"
             Tag="You will never see this message">

    <StackPanel Margin="20" Background="LightGray"
                MouseEnter="handler_MouseEnter" MouseMove="handler_MouseMove" MouseLeave="handler_MouseLeave"
                Tag="StackPanel">
        <StackPanel.Resources>
            <Style TargetType="Border">
                <Setter Property="Margin" Value="2" />
                <Setter Property="Padding" Value="5" />
                <Setter Property="Background" Value="Gray" />
            </Style>
            <Style TargetType="TextBlock">
                <Setter Property="TextAlignment" Value="Center" />
                <Setter Property="Background" Value="WhiteSmoke" />
            </Style>
        </StackPanel.Resources>

        <Button Content="#1" MaxWidth="80" Tag="Button#1" />
        <Button Content="#2" MaxWidth="80" Tag="Button#2"
                MouseEnter="handler_MouseEnter" MouseMove="handler_MouseMove" MouseLeave="handler_MouseLeave"
                />
        <Button Content="#3" MaxWidth="80" Tag="Button#3" />
        <Button Content="#4" MaxWidth="80" Tag="Button#4" />
        <Button Content="#5" MaxWidth="80" Tag="Button#5"
                MouseEnter="handler_MouseEnter" MouseMove="handler_MouseMove" MouseLeave="handler_MouseLeave"
                />
        <Button Content="#6" MaxWidth="80" Tag="Button#6" />
        <Button Content="#7" MaxWidth="80" Tag="Button#7" />
        <Button Content="#8" MaxWidth="80" Tag="Button#8" />

        <TextBlock Margin="0,20,0,0" Tag="Comment TextBlock #1">
            <Run Text="Sender was: " />
            <Run Text="{Binding ReportingControl}" />
        </TextBlock>
        <TextBlock Tag="Comment TextBlock #2">
            <Run Text="Source was: " />
            <Run Text="{Binding ContainerControl}" />
        </TextBlock>
        <TextBlock Tag="Comment TextBlock #3">
            <Run Text="Now you are in: " />
            <Run Text="{Binding ControlUnderMouse}" />
        </TextBlock>

        <UniformGrid Columns="3" Tag="indicator UniformGrid">
            <Border Visibility="{Binding Visib_OnEnter}" Tag="indicator border #1">
                <TextBlock Text="Enter" />
            </Border>
            <Border Visibility="{Binding Visib_OnMove}" Tag="indicator border #2"
                    MouseEnter="handler_MouseEnter" MouseMove="handler_MouseMove" MouseLeave="handler_MouseLeave">
                <TextBlock Text="Move" />
            </Border>
            <Border Visibility="{Binding Visib_OnLeave}" Tag="indicator border #3">
                <TextBlock Text="Leave" />
            </Border>
        </UniformGrid>
    </StackPanel>

</UserControl> 
```

用户控件.xaml.cs

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media;

namespace UserControlMouse
{
    public partial class MyButtonPanel : UserControl
    {
        private SimpleDataObject theData = new SimpleDataObject();

        public MyButtonPanel()
        {
            InitializeComponent();
            this.DataContext = theData;
        }

        private const int COUNTER_LAG = 20;

        private int counter_enter = 0;
        private void handler_MouseEnter(object sender, MouseEventArgs e)
        {
            counter_enter = counter_mouse;

            theData.Visib_OnEnter = System.Windows.Visibility.Visible;
            theData.Visib_OnMove = System.Windows.Visibility.Hidden;
            theData.Visib_OnLeave = System.Windows.Visibility.Hidden;

            theData.ReportingControl = makeDescriptionOfControl(sender);
            theData.ContainerControl = makeDescriptionOfControl(e.Source);
            theData.ControlUnderMouse = makeDescriptionOfControl(null);
        }

        private int counter_mouse = 0;
        private void handler_MouseMove(object sender, MouseEventArgs e)
        {
            ++counter_mouse;

            if (counter_mouse > counter_enter + COUNTER_LAG) theData.Visib_OnEnter = System.Windows.Visibility.Hidden;
            theData.Visib_OnMove = System.Windows.Visibility.Visible;
            if (counter_mouse > counter_leave + COUNTER_LAG) theData.Visib_OnLeave = System.Windows.Visibility.Hidden;

            theData.ReportingControl = makeDescriptionOfControl(sender);
            theData.ContainerControl = makeDescriptionOfControl(e.Source);
            theData.ControlUnderMouse = makeDescriptionOfControl(null);
        }

        private int counter_leave = 0;
        private void handler_MouseLeave(object sender, MouseEventArgs e)
        {
            counter_leave = counter_mouse;

            theData.Visib_OnEnter = System.Windows.Visibility.Hidden;
            theData.Visib_OnMove = System.Windows.Visibility.Hidden;
            theData.Visib_OnLeave = System.Windows.Visibility.Visible;

            theData.ReportingControl = makeDescriptionOfControl(sender);
            theData.ContainerControl = makeDescriptionOfControl(e.Source);
            theData.ControlUnderMouse = makeDescriptionOfControl(null);
        }

        private string makeDescriptionOfControl(object uiobj)
        {
            if (uiobj == null)
                return "???";

            string text = uiobj.GetType().Name;

            var fe = uiobj as FrameworkElement;
            if (fe != null && fe.Tag != null)
                text += " (" + (string)((FrameworkElement)uiobj).Tag + ")";

            return text;
        }
    }

    public class SimpleDataObject : DependencyObject
    {
        public string ControlUnderMouse { get { return (string)GetValue(ControlUnderMouseProperty); } set { SetValue(ControlUnderMouseProperty, value); } }
        public static readonly DependencyProperty ControlUnderMouseProperty = DependencyProperty.Register("ControlUnderMouse", typeof(string), typeof(SimpleDataObject), new UIPropertyMetadata("???"));

        public string ReportingControl { get { return (string)GetValue(ReportingControlProperty); } set { SetValue(ReportingControlProperty, value); } }
        public static readonly DependencyProperty ReportingControlProperty = DependencyProperty.Register("ReportingControl", typeof(string), typeof(SimpleDataObject), new UIPropertyMetadata("???"));

        public string ContainerControl { get { return (string)GetValue(ContainerControlProperty); } set { SetValue(ContainerControlProperty, value); } }
        public static readonly DependencyProperty ContainerControlProperty = DependencyProperty.Register("ContainerControl", typeof(string), typeof(SimpleDataObject), new UIPropertyMetadata("???"));

        public Visibility Visib_OnEnter { get { return (Visibility)GetValue(Visib_OnEnterProperty); } set { SetValue(Visib_OnEnterProperty, value); } }
        public static readonly DependencyProperty Visib_OnEnterProperty = DependencyProperty.Register("Visib_OnEnter", typeof(Visibility), typeof(SimpleDataObject), new UIPropertyMetadata(Visibility.Hidden));

        public Visibility Visib_OnMove { get { return (Visibility)GetValue(Visib_OnMoveProperty); } set { SetValue(Visib_OnMoveProperty, value); } }
        public static readonly DependencyProperty Visib_OnMoveProperty = DependencyProperty.Register("Visib_OnMove", typeof(Visibility), typeof(SimpleDataObject), new UIPropertyMetadata(Visibility.Hidden));

        public Visibility Visib_OnLeave { get { return (Visibility)GetValue(Visib_OnLeaveProperty); } set { SetValue(Visib_OnLeaveProperty, value); } }
        public static readonly DependencyProperty Visib_OnLeaveProperty = DependencyProperty.Register("Visib_OnLeave", typeof(Visibility), typeof(SimpleDataObject), new UIPropertyMetadata(Visibility.Hidden));
    }
} 
```

样本窗口

```
<Window x:Class="UserControlMouse.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:UserControlMouse"
        Title="MainWindow" Height="350" Width="525">
    <Grid Background="Red">
        <my:MyButtonPanel Margin="10" />
    </Grid>
</Window> 
```

请运行它并使用它。

*   观察事件是如何触发的以及哪些控件可以看到它们。注意 SENDER 和 SOURCE 是如何变化的
*   请注意，SENDER 始终是相同的，即鼠标捕获的根。改变的是源头
*   **请注意，只有按钮 #2 和按钮 #5 报告进入/离开**（他们有直接的处理程序，其他人没有！）
*   请注意，即使其他控件没有鼠标处理程序，也可以通过鼠标移动“检测到”其他控件-您可以使用没有任何鼠标捕获集的 Source 获取事件
*   检查 OriginalSource（最后一个文本行） - 这是鼠标正下方的控件 - 通常它不是您想要注意的控件，因为它是某些模板或样式中的一些“叶子控件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:10:21.837

在[这个线程](http://social.msdn.microsoft.com/Forums/eu/wpf/thread/4af591da-11aa-410b-8d1f-d4c08f96c382)中提到了很多原因：

*   设置用户控件的背景
*   使画布可聚焦
*   注意 RenderTransforms

**编辑**

我做了一个测试，只要 WPF 元素没有覆盖面板，它就可以正常工作。鼠标必须直接在面板上才能生成事件。DockStyle.Fill 可能是您的问题的原因。

# backbone.js - 绑定按钮

> ID：12069784
> 
> 赞同：0
> 
> 时间：2012-08-22T09:10:29.627
> 
> 标签：backbone.js

```
var ListView = Backbone.View.extend({
    el: $('hello'),
    events: {                           
          'click .myName':  'namefunc',
    },   
    initialize: function() {
        var stuff = new FieldCollection();
        stuff.parse();
        var self = this;
        stuff.fetch({
            success: function (collection, response) {
                console.log(response);
                self.render(response);
                return response;
            }
        });
   },
    render:function(output){
        _.each(output, function(i){
            p=i.name;
            $(this.el).append("<button class='myName'>"+p+"</button><h1>"+i.img+"</h1><br/>");
        },this);     

    },
    namefunc:function(){
        alert('hiii');
    } 
```

});

如何使用函数namefunc将按钮与myName类绑定.........我尝试如上面的代码所示......请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:15:08.640

做`'click .myName': 'namefunc',`或`'click #myName': 'namefunc',`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:57:47.807

我稍微重构了你的代码。我还发表了一些评论，以帮助您实现目标并更多地了解骨干。

```
initialize: function() {
    var self = this;
    _.bindAll(this, 'render');
    this.collection = new FieldCollection();
    this.collection.parse();

    this.collection.fetch({
        success: function (collection, response) {
            console.log(response);
            self.render();
        }
    });
},

render:function(){
    var self = this;
    _.each(this.collection, function(model) {
        // here you should create subviews and delegate events within particular view
        // i.e:
        // self.buttonViews.push(new ButtonView({ model: model}));
        // but for now you can use data-id attribute to match the button you clicked
        $(self.el).append("<button class='myName' data-id=" + model.id + ">" + model.name + "</button><h1>" + model.img + "</h1><br/>");
    });     
},

namefunc:function(){
    //use data-id attribute we put in button tag earlier to catch the id
    //and use this.collection.get('id') function to get the model you want to get parameters of
} 
```

# android - 如何在Android中获取帧数据

> ID：12069789
> 
> 赞同：0
> 
> 时间：2012-08-22T09:10:48.453
> 
> 标签：android, frame, render, stagefright

最近想开发一个android应用，开发了一个MediaPlayer来播放视频，视频播放的时候，我想获取每一帧的图像数据，做一些处理，然后渲染到屏幕上。有没有人有什么建议吗？谢谢指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:04:57.420

我不确定你的安卓版本。从 Android`JellyBean 4.2.0`开始，引入了一个新组件`CPUConsumer`（参考：[4.2_r1 Sources](http://androidxref.com/4.2_r1/xref/frameworks/native/libs/gui/CpuConsumer.cpp)），它可以使主机程序能够访问底层`gralloc`框架。

在 android 中也提供了一些测试此功能的示例，请[点击此处](http://androidxref.com/4.2_r1/xref/frameworks/native/libs/gui/tests/CpuConsumer_test.cpp)。

# macos - mac os下bash的“if”语句

> ID：12069792
> 
> 赞同：2
> 
> 时间：2012-08-22T09:11:07.173
> 
> 标签：macos, bash

Mac OS 的 bash 和其他 linux 的 bash 是否有区别？我编写了一个名为“test.sh”的简单 bash 脚本，如下所示：

```
#!/bin/bash
MYVAR=abc
if [ $MYVAR = abc ]; then
echo "ok"
fi 
```

当我在终端中运行它时，会发生一些错误：

```
./test.sh: line 3: syntax error near unexpected token `then'
./test.sh: line 3: `if[ $MYVAR = abc ]; then' 
```

然后我删除字符“;” 在“then”之前并再次运行脚本，会出现一些信息：

```
./test.sh: line 3: if[ abc = abc ]: command not found
ok
./test.sh: line 5: syntax error near unexpected token `fi'
./test.sh: line 5: `fi' 
```

有人可以告诉我我的脚本有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:13:20.183

考虑按照您在示例中的方式在文件中添加空格 ( `if [`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:40:41.043

`[`是一个命令（与 相同`test`）。两边必须用空格隔开。

# ios - iOS 中 LIExposeController 的内存管理问题

> ID：12069795
> 
> 赞同：0
> 
> 时间：2012-08-22T09:11:18.780
> 
> 标签：ios, memory-management

我正在使用“LIExposeController”来创建新的 UIViewControllers。这会带来一些我无法修复的内存警告。

```
- (UIViewController *)newViewControllerForExposeController:(LIExposeController *)exposeController {
    UIViewController *viewcontroller = [[[MyViewController alloc] init] autorelease];

    return viewcontroller; // warning here saying object with a + 0 retain count returned to caller where a + 1 (owning) retain count is expected
}

- (void)shouldAddViewControllerForExposeController:(LIExposeController *)exposeController {
    [exposeController addNewViewController:[self newViewControllerForExposeController:exposeController]
                                  animated:YES];
} // warning here saying potential leak of an object

LIExposeController *exposeController = [[[LIExposeController alloc] init] autorelease];

    exposeController.viewControllers = [NSMutableArray arrayWithObjects:
                                        [self newViewControllerForExposeController:exposeController],
                                        nil]; // warning here saying potential leak of an object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:15:09.590

一个以 开头的方法`new`预计会产生一个保留计数 +1 的对象，而不是自动释放/保留计数 +0 的对象。ARC 和静态分析器都遵循这些约定作为规则，您应该修复您的代码以满足它们或重命名您的方法以不与约定冲突。

# asp.net-mvc-3 - 使用按钮而不是文本框来传递数据 asp.net mvc3

> ID：12069796
> 
> 赞同：0
> 
> 时间：2012-08-22T09:11:19.330
> 
> 标签：asp.net-mvc-3, button

嗨，我正在创建一个项目，其中所有用户都使用单例设计模式从同一个实例中运行。当用户在文本框中输入值时。然后它会等到其他人都输入了一个值，然后显示结果。我的问题是这可以使用向模型发送值而不是文本框的按钮来完成。例如多个按钮，每个按钮发送不同的值。

现在是我的代码。

看法

```
@{
ViewBag.Title = "Voting";
     }
@using (Html.BeginForm())
{
<fieldset>
    <div class="editor-label">
       What is you vote?
    </div>
    <div class="editor-field">
        @Html.TextBox("Vote")
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
     } 
```

控制器

```
 public ActionResult PlanVote()
    {
        return View();
    }

    [HttpPost]
    public ActionResult PlanVote(int vote)
    {
        PlanModel myModel = PlanModel.Instance;
        myModel.Vote(vote);

        if (PlanModel.Instance.currentstate == PlanState.displaying)
        {
            return RedirectToAction("Index", "Plan");
        }
        else
        {
            return RedirectToAction("Waiting", "Plan");
        }
     } 
```

模型

```
 public void Vote(int Votes)
    {

        countVotes++;
        ivote.Add(Votes);

        if (countVotes >= iCount)
        {
            currentstate = PlanState.displaying;
        }

    } 
```

我对 MVC 还是很陌生，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:28:53.810

只需删除独立的提交按钮，每次投票使用一个提交

```
@using (Html.BeginForm())
{
<fieldset>
    <div class="editor-label">
       What is you vote?
    </div>
    <div class="editor-field">
        <input type="submit" name="vote" value="1" />
        <input type="submit" name="vote" value="2" />
        <input type="submit" name="vote" value="3" />
    </div>
</fieldset>
} 
```

# sql-server - 测试需要 datetime2 的 sproc 时要粘贴的内容

> ID：12069801
> 
> 赞同：0
> 
> 时间：2012-08-22T09:11:28.110
> 
> 标签：sql-server, visual-studio-2010, stored-procedures

我编写了一个带有 datetime2 参数的存储过程。当我尝试从 Visual Studio 2010 调试它时，它要求我在文本框中输入参数，但我找不到正确的格式。我通过从 SQL Server 对象资源管理器中选择存储过程并选择“调试过程...”选项来测试存储过程。出现一个对话框，要求我输入值。我尝试了 20120822，但它因“操作数类型冲突：int 与 datetime2 不兼容”而失败。我也试过“20120822 09:00:00.0000000”，但这给了我错误，“'09'附近的语法不正确”。任何人都可以帮助我应该如何输入日期时间值？我正在使用 MS SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:33:22.917

```
declare @dt datetime2
SET @dt=GETDATE()
select @dt

result is:
'2012-08-22 15:02:30.8070000'

Try giving the result shown above in single quotes. 
```

# jquery - 我是否正确理解了 jQuery 委托函数？

> ID：12069806
> 
> 赞同：2
> 
> 时间：2012-08-22T09:11:39.077
> 
> 标签：jquery, dom, event-handling, jquery-delegate

我知道 div 将出现在我的页面未来 DOM 中的某个时间点，并且我知道它的 id（它由 SharePoint javascript 生成） - 我是否可以使用[jQuery 委托](http://api.jquery.com/delegate/)将事件处理程序附加到此 div 之前它存在于 DOM 中吗？

此外，在这种特定情况下，这与 .live() 相比如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:17:59.170

简短的回答：**是的**

长答案：[`.on()`](http://api.jquery.com/on/)在您提到的两个之前，首选 jQuery 1.7+，它们已被弃用。这是一个例子[`.on()`](http://api.jquery.com/on/)：

```
 $('#parent').on("click", "span.children", function() {
        if ( confirm("Are you sure?") ) {
            console.log(this);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:15:19.430

是的，你可以这样做，但你可以使用[.on](http://api.jquery.com/on/)方法，而不是使用`.live`，它已被弃用。

```
$(elements).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(elements).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:17:03.617

你应该使用`.on()`. 而且你永远不应该使用`.live()`.

对于三者之间的性能测试，请参见：http: [//jsperf.com/jquery-live-vs-delegate-vs-on](http://jsperf.com/jquery-live-vs-delegate-vs-on)

除了已被弃用的事实之外，`.live()`与其他两个相比，它也非常慢。

基本上，您正在使用`.on()`或`.delegate()`将事件处理程序添加到容器中的元素，无论元素已经存在还是动态添加到 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:17:16.500

**是**的，你可以，但是这两种方法都已被[`on()`](http://api.jquery.com/on/)最新版本的 jQuery 所取代。

此外，[`live()`](http://api.jquery.com/live/)始终将事件处理程序附加到文档（顶部），同时[`delegate()`](http://api.jquery.com/delegate/)允许您选择附加事件的位置，因此如果您事先知道元素将在哪里，它会更有效。

# linux - 使用 shell 或 diff 命令从两个 csv 文件中提取修改和添加的行

> ID：12069809
> 
> 赞同：1
> 
> 时间：2012-08-22T09:11:57.577
> 
> 标签：linux, bash, shell, diff

我有两个 csv 文件 F1 和 F2 具有相同顺序的行，我想通过比较 F2 中的文件 F1 和 F2 来提取更改/添加的行。

我尝试了 diff 命令，但我可以看到变化。我如何读取模式并从 F2 中提取线条？

F1（文件 1）：

```
1234,Joe,pieter,joe@gmail.com,male,22
1235,Shally,Jonse,shally@yahoo.com,female,24
1235,Harry,poter,harry@gmail.com,male,21
1235,Helen,Jairag,helen@gmail.com,female,21
2585,Dinesh,Jairag,helen@gmail.com,female,21 
```

F2（文件 2）：

```
1234,Joe,pieter,joe@gmail.com,male,22
1235,Shally,Jonse,shally@yahoo.com,female,24
1235,Harry,Potter,harry@gmail.com,male,21
1235,Helen,Jairag,helen@gmail.com,female,21 
```

执行的命令：

```
diff F2 F1 
```

输出：

```
3c3
< 1235,Harry,Potter,harry@gmail.com,male,21
---
> 1235,Harry,poter,harry@gmail.com,male,21
4a5
> 2585,Dinesh,Jairag,helen@gmail.com,female,21 
```

文件 F3 中的预期输出：

```
1235,Harry,poter,harry@gmail.com,male,21
2585,Dinesh,Jairag,helen@gmail.com,female,21 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:29:41.840

```
diff --changed-group-format='%<' --unchanged-group-format='' file1 file2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:56:21.083

我了解您想**从 File2**中提取更改/添加的行！
因此，在您的示例中，File2 中只有一个更改的行，而 File2 中没有添加的行。is
的基本调用模式和输出告诉您需要做什么来更新。因此，要了解 File2 的不同之处，您可以将其用作第二个参数。我建议使用选项来. 这为您提供了 File2 中需要在 File1 中更改/添加的每一行，并在第一个 pos 中使用 a：`diff``diff old new``old``-u``diff` `+`

```
diff -u File1 File2 
```

给

```
--- File1   2012-08-22 11:30:07.000000000 +0200
+++ File2   2012-08-22 11:30:25.000000000 +0200
@@ -1,5 +1,4 @@
 1234,Joe,pieter,joe@gmail.com,male,22
 1235,Shally,Jonse,shally@yahoo.com,female,24
-1235,Harry,poter,harry@gmail.com,male,21
+1235,Harry,Potter,harry@gmail.com,male,21
 1235,Helen,Jairag,helen@gmail.com,female,21
-2585,Dinesh,Jairag,helen@gmail.com,female,21 
```

现在只过滤`+`除前两行以外的行：

```
diff -u data1 data2 | \
  awk 'NR > 2 && $0 ~ /^+/ {print substr($0,2)}'

1235,Harry,Potter,harry@gmail.com,male,21 
```

或者反过来：

```
diff -u data2 data1 | \
  awk 'NR > 2 && $0 ~ /^+/ {print substr($0,2)}'

1235,Harry,poter,harry@gmail.com,male,21
2585,Dinesh,Jairag,helen@gmail.com,female,21 
```

# android - 自定义AlertDialog中TextView上的Android超链接不可点击

> ID：12069811
> 
> 赞同：6
> 
> 时间：2012-08-22T09:12:03.400
> 
> 标签：android, android-alertdialog

在我之前的问题之后，我仍然在管理自定义的超链接时遇到问题，`AlertDialog`但我相信我缩小了问题的范围，因为我认为它只是因为它是自定义对话框而不起作用。

我已按照[此处](https://stackoverflow.com/questions/1997328/android-clickable-hyperlinks-in-alertdialog)和[此处](https://stackoverflow.com/questions/2795300/how-to-implement-a-custom-alertdialog-view)的所有说明进行操作，但似乎无法绕过这种情况

在`strings.xml`我有一个这样定义的字符串：

```
<string name="link_text_manual"><b>text2:</b> This is some other
  text, with a <a href="http://www.google.com">link</a> specified
  via an &lt;a&gt; tag.  Use a \"tel:\" URL
  to <a href="tel:4155551212">dial a phone number</a>.
</string> 
```

如果我以这种方式创建我的对话框：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Data")
        .setIcon(R.drawable.info)
       .setMessage(R.string.link_text_manual)
       .setCancelable(true)
       .setNegativeButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.dismiss();
           }
       });

AlertDialog welcomeAlert = builder.create();
welcomeAlert.show();
// Make the textview clickable. Must be called after show()
((TextView)welcomeAlert.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance()); 
```

它显示如下：

![图 1](../Images/edd1873aee7cc41f11821bfa02a57a4d.png)

这按预期工作，所有点击都是可点击的。

现在我想要同样的东西，但在自定义布局上。

`TextView`像这样在我的身上创建了一个`info.xml`：

```
<TextView
    android:id="@+id/infoDetailText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/infoVersionTitle"
    android:autoLink="all"
    android:linksClickable="true"
    android:padding="4dp" /> 
```

这是代码：

```
 Context ctx = this;
    LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.info, (ViewGroup) findViewById(R.id.infoLayout));

    AlertDialog.Builder about = new AlertDialog.Builder(ctx);
    about.setView(layout);
    about.setTitle("Data");
    about.setIcon(R.drawable.info);

    AlertDialog displayInfo = about.create();
    displayInfo.show();
    // Make the textview clickable. Must be called after show()
    TextView textView = (TextView) displayInfo.findViewById(R.id.infoDetailText);
    textView.setText(R.string.link_text_manual);
    textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

使用上面的代码，它显示如下（链接不可点击，甚至未标记为链接）：

![图 2](../Images/18c455a6824094a0b82c8b8d4fb9bd2a.png)

如果我删除

```
 textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

它显示如下图（链接标记为链接但不可点击）：

![图 3](../Images/e0b542cd785c752d6058a77f00950c37.png)

我也尝试过使用`Linkify`，`android:autoLink="web"`但结果总是一样的。

`setMessage()`有效，但使用自定义布局`TextView`无法使其正常工作。

可能这很简单，但似乎无法使其工作。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T09:53:31.833

`android:autoLink="all"`您定义了没有, `android:clickable="true"`&的 TextView`android:linksClickable="false"`

对于 info.xml TextView 如下

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/infoDetailText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="4dp" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T10:04:13.600

无论如何，您的代码运行良好，...

**警报对话框的代码：**

```
LayoutInflater inflater = LayoutInflater.from(ctx);
View layout = inflater.inflate(R.layout.info, null);
AlertDialog.Builder about = new AlertDialog.Builder(ctx);
about.setTitle("Data");
about.setIcon(R.drawable.info);

// Make the textview clickable. Must be called after show()
TextView textView = (TextView) layout.findViewById(R.id.infoDetailText);
textView.setText(R.string.link_text_manual);
textView.setMovementMethod(LinkMovementMethod.getInstance());
about.setView(layout);
AlertDialog displayInfo = about.create();
displayInfo.show(); 
```

**TextView XML 的代码：**

```
<TextView
    android:id="@+id/infoDetailText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/infoVersionTitle"
    android:padding="4dp" /> 
```

删除了两个属性..

```
android:autoLink="all"
android:linksClickable="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:17:45.967

试试这个

```
setText(Html.fromHtml(String)); 
```

# android - Android 服务已经泄露，即使它（据说）没有运行

> ID：12069821
> 
> 赞同：4
> 
> 时间：2012-08-22T09:12:36.860
> 
> 标签：android, android-service

在`onDestroy()`我使用下面的代码检查服务是否仍在运行。如果是 - 我解除绑定并停止它。

```
public boolean isServiceRunning(Class<?> serviceClass) {
        String serviceClassName = serviceClass.getName();
        final ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        final List<RunningServiceInfo> services = activityManager.getRunningServices(Integer.MAX_VALUE);

        for(RunningServiceInfo runningServiceInfo : services){
            if(runningServiceInfo.service.getClassName().equals(serviceClassName)){
                return true;
            }
        }
        return false;
    } 
```

现在我有一种情况，当`isServiceRunning`返回 false 时，但是在`onDestroy()`我收到一个错误说 ServiceConnection 已泄漏之后。为什么会这样？

**编辑**：

这就是我开始`Service`（in `onCreate()`）的方式：

```
startService(posServiceIntent);
bindService(posServiceIntent, posConn, BIND_AUTO_CREATE); 
```

和

```
posServiceIntent = new Intent(getApplicationContext(), PositionService.class);

private ServiceConnection posConn = new PosServiceConnection();
public class PosServiceConnection implements ServiceConnection {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.d(TAG, "PosServiceBinder connected [name: " + name.toShortString() + "].");
        }
        @Override
        public void onServiceDisconnected(ComponentName name) {
            Log.d(TAG, "PosServiceBinder disconnected [name: " + name.toShortString() + "].");
        }
    }

protected void onDestroy() {
        if(isServiceRunning(PositionService.class)){
            Log.d(TAG, "Stopping PositionService in " + MainActivity.class.getSimpleName() + ".onDestroy()");
            unbindService(posConn);
            stopService(posServiceIntent);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:10:27.207

你需要打电话`unbindService()`进来`onDestroy()`。如果服务已绑定连接，停止服务不会使其停止。

在任何情况下，都会出现错误“ServiceConnection leaked”，因为您仍然有与服务的绑定连接。

**编辑：添加额外的观察**

你写了：

> “我使用下面的代码检查服务是否仍在运行。如果是 - 我取消绑定并停止它”

这不会阻止泄漏`ServiceConnection`. `unbindService()`即使您的服务不再运行，您也需要在您的活动关闭时调用。确保将调用`unbindService()`放在 try/catch 块中，因为可以获得`IllegalArgumentException`可以安全忽略的调用（这意味着您与服务没有连接）。

# facebook - facebook 页面：我们的应用程序在哪里列出

> ID：12069829
> 
> 赞同：0
> 
> 时间：2012-08-22T09:12:55.813
> 
> 标签：facebook, facebook-page

我为客户创建了一个 Facebook 应用程序。该应用程序运行良好。

但该应用程序未在客户的 Facebook 页面上列出。客户希望它被列出。

是否可以在fb页面上列出fb页面的注册应用程序？

[（在此处](http://www.keleia.com/dev/screenshot_fb_page__app_not_listed.jpg)查看他们的页面和应用程序的屏幕截图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:26:48.417

不确定您所说的列表是什么意思，但我假设您的意思是要将应用程序添加到页面。您可以使用 FB JavaScript SDK 和以下代码将应用程序添加到页面：

```
var obj = {
    method: 'pagetab',
    redirect_uri: '[url_to_your_app]'
};
FB.ui(obj); 
```

# excel - 图表轴的条件格式

> ID：12069830
> 
> 赞同：5
> 
> 时间：2012-08-22T09:12:56.283
> 
> 标签：excel, excel-2007

我有一个基于表格的图表。
表中的数据有条件地格式化为数字或货币。

当格式化为纯数字时，Y 轴如下所示：

![在此处输入图像描述](../Images/954af04c0e07c4926fcf1f887819d26a.png)

当格式化为货币时，Y 轴不采用相同的格式。这是故意的还是 Excel 中的错误？有解决方法吗？我不想在解决方案中使用 VBA，但任何类型的公式当然都可以。

![在此处输入图像描述](../Images/d828e49432048067d495fd05f3781b11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:34:22.623

条件格式不适用于任何图表，它仅显示在工作表中的表格中。它比实际数据源更多。使用标准货币格式，或者您可以使用公式，例如`=a1&" £"`，如果您需要进行一些额外的数据格式设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:19:50.317

编辑 - 实际解决方案：

这个棘手的事情的解决方案是使用命名范围！

命名范围可以切换他的内容，从而根据条件动态重定向图表！这是相当强大的。我在其他场合使用过，但我必须首先对这个问题非常着迷，这样我的记忆才会被触发。

在我的屏幕截图中，您可以看到解决此问题的所有内容。只需将这两个名称设置为您喜欢的条件即可。

不幸的是，我的解决方案需要复制您的数据列以反映不同的格式。但至少，它解决了你的问题。

![具有命名范围的解决方案](../Images/0b146b1b0b54521f8a452a457ec1648f.png)

* * *

编辑：

在更详细地研究了这个问题之后，我必须在这里标记，我的答案并没有解决这个特定问题。虽然这可以与给定问题的 VBA 解决方案结合使用，但它不能在没有 VBA 的情况下应用，当然静态格式化数据除外。

* * *

这可以通过您的轴的正确设置来实现：

![在此处输入图像描述](../Images/70631522b977fa23650d129fec91c2db.png)

当您链接到源时，您的数据格式将反映在您的图表中；）

否则，您的图表将使用您为此轴设置的任何格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:19:21.180

[这](http://www.excelbanter.com/showthread.php?t=259075)是一个可以帮助您的链接。您可以使用命名范围和偏移量来实现。这是我经过一番搜索后能找到的最好的。

# iphone - 自定义 UITableViewCell 标签颜色动画

> ID：12069832
> 
> 赞同：0
> 
> 时间：2012-08-22T09:13:06.703
> 
> 标签：iphone, objective-c, animation, uitableview

我已将 3 个 UILabel 添加到自定义 UITableViewCell 中，并且我正在尝试为这些 UILabel 的 textColors 设置动画。

我尝试的最后一件事是 setSelected 和/或 setHighlighted 方法中的这段代码：

```
UIColor *shadowColor;
UIColor *textColor;
if (highlightedOrSelected) {
    shadowColor = [UIColor colorWithRed:74.0/255.0 green:33.0/255.0 blue:6.0/255.0 alpha:1.0];
    textColor = [UIColor whiteColor];
} else {
    shadowColor = [UIColor whiteColor];
    textColor = [UIColor colorWithRed:74.0/255.0 green:33.0/255.0 blue:6.0/255.0 alpha:1.0];
}

[UIView animateWithDuration:animated ? 0.3 : 0.0
                 animations:^{
                     self.label1.shadowColor = shadowColor;
                     self.label1.textColor = textColor;

                     self.label2.shadowColor = shadowColor;
                     self.label2.textColor = textColor;

                     self.label3.shadowColor = shadowColor;
                     self.label3.textColor = textColor;
                 }]; 
```

动画失败了，我也尝试了硬编码的 10.0 持续时间，但仍然没有动画。

我做错了什么，我该如何让它发挥作用？

# iphone - iPad的存储过程

> ID：12069841
> 
> 赞同：-3
> 
> 时间：2012-08-22T09:13:54.600
> 
> 标签：iphone, objective-c, ios, sqlite

我想在我的应用程序中调用存储过程进行验证。我在我的应用程序中使用了不支持存储过程的 Ultralite 数据库。

我发现 iOS 只能接受 SQLite 和 Ultralite 数据库。真的吗？

请建议我访问可以保存存储过程的数据库的可能方法。

我是 iOS 开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:04:54.160

**唯一的方法是，您可以从远程 SQL 服务器**调用存储过程。

请在[此处](http://www.karlkraft.com/index.php/2011/06/07/mysql-for-iphone-and-osx-version-2-0/#more-162)查看详细信息，或者您可以编写**子查询**而不是存储过程

# javascript - jQuery mobile 向现有地图添加新标记

> ID：12069842
> 
> 赞同：1
> 
> 时间：2012-08-22T09:14:02.193
> 
> 标签：javascript, jquery-ui, jquery-mobile, google-maps-api-3

我在这里使用 jQuery 移动谷歌地图示例，重点关注第一个“基本地图示例”。

[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html)

我希望能够向 动态添加标记`basic_map`，但我遇到了一些麻烦。我是 jQuery 移动和 JavaScript 的新手。

这是我在 jQuery 移动 UI 网站上编辑的基本地图示例。如果你将它保存在 jQuery mobile`demos`文件夹中，那么一切都应该正确呈现。我在地图页面底部添加了一个按钮以及该`addMarkers`功能。加载页面时，地图以坐标为中心显示，该`mobileDemo`坐标`(-41, 87)`靠近芝加哥，但不完全在那里。当您单击按钮时，我想在该`chicago`点使用另一个标记更新地图，但屏幕变为空白。

这只是我真正想做的一个模拟示例。在我更长、更复杂的程序中，我正在查询数据库以查找与查询匹配的地址，然后我想将这些标记动态地放在地图上。我需要对此源代码进行哪些更改才能绘制芝加哥点（或其他即时标记）？

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
        <link type="text/css" rel="stylesheet" href="css/jquery-mobile-1.0/jquery.mobile.css" />
        <link type="text/css" rel="stylesheet" href="css/mobile.css" />
        <script type="text/javascript" src="js/modernizr-2.0.6/modernizr.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script> 
        <script type="text/javascript" src="js/jquery-1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery-mobile-1.0/jquery.mobile.min.js"></script>
        <script type="text/javascript" src="js/jquery.ui-1.8.15/jquery.ui.autocomplete.min.js"></script>
        <script type="text/javascript" src="js/demo.js"></script>
        <script type="text/javascript" src="../ui/jquery.ui.map.js"></script>
        <script type="text/javascript" src="../ui/jquery.ui.map.services.js"></script>
        <script type="text/javascript" src="../ui/jquery.ui.map.extensions.js"></script>
        <script type="text/javascript">

            var mobileDemo = { 'center': '41,-87', 'zoom': 7 };
            var chicago = new google.maps.LatLng(41.850033,-87.6500523);
            var map 
            function addMarkers(){
                map = new google.maps.Map(document.getElementById('map_canvas'));
                var marker = new google.maps.Marker({
                    map: map,
                    position: chicago
                });
            }

            $('#basic_map').live('pageinit', function() {
                demo.add('basic_map', function() {
                    $('#map_canvas').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
                        var self = this;
                        self.addMarker({'position': this.get('map').getCenter() }).click(function() {
                            self.openInfoWindow({ 'content': 'Hello World!' }, this);
                        });
                    }}); 
                }).load('basic_map');
            });

            $('#basic_map').live('pageshow', function() {
                demo.add('basic_map', function() { $('#map_canvas').gmap('refresh'); }).load('basic_map');
            });
        </script>
    </head>
    <body>

        <div id="basic_map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
            <div data-role="content">
                <a href="#" data-role="button" data-theme="b" onclick="addMarkers()">Add Some More Markers</a>
            </div>
        </div>      
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:30:03.000

请检查以下示例。

在第一个地图加载中没有任何标记。当您单击该按钮时，会动态添加一个标记，而无需刷新页面或地图。

```
<!doctype html>
    <html lang="en">
       <head>
            <title>jQuery mobile with Google maps - Google maps jQuery plugin</title>
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
            <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
            <script type="text/javascript" src="http://jquery-ui-map.googlecode.com/svn/trunk/ui/min/jquery.ui.map.min.js"></script>
            <script type="text/javascript">

                var chicago = new google.maps.LatLng(41.850033,-87.6500523),
                mobileDemo = { 'center': '41,-87', 'zoom': 7 };

                function initialize() {
                    $('#map_canvas').gmap({ 'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':false });
                }

                $(document).on("pageinit", "#basic-map", function() {
                    initialize();
                });

                $(document).on('click', '.add-markers', function(e) {
                        e.preventDefault();
                        $('#map_canvas').gmap('addMarker', { 'position': chicago } );
                });
            </script>
        </head>
        <body>
            <div id="basic-map" data-role="page">
                <div data-role="header">
                    <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a> examples</h1>
                    <a data-rel="back">Back</a>
                </div>
                <div data-role="content">   
                    <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                        <div id="map_canvas" style="height:350px;"></div>
                    </div>
                    <a href="#" class="add-markers" data-role="button" data-theme="b">Add Some More Markers</a>
                </div>
            </div>      
        </body>
    </html> 
```

初始地图：

![在此处输入图像描述](../Images/9a74b4682a474b0497db402cbe5d57c4.png)

点击按钮后的地图：

![在此处输入图像描述](../Images/16b57142e31be929b354ef969f3df2d4.png)

# http - 浏览器在更改 http 标头后发送 Options 而不是 Post

> ID：12069850
> 
> 赞同：2
> 
> 时间：2012-08-22T09:14:33.410
> 
> 标签：http, backbone.js, cross-domain, restlet, cors

```
/*set the response header*/
    Form responseHeaders = (Form) getResponse().getAttributes().get("org.restlet.http.headers"); 
    if (responseHeaders == null) { 
        responseHeaders = new Form(); 
        responseHeaders.add("Access-Control-Allow-Origin", "*");
        responseHeaders.add("Access-Control-Allow-Methods", "POST, GET, PUT, DELETE");
        getResponse().getAttributes().put("org.restlet.http.headers", responseHeaders); 
    } 
```

我在我的restlet 2.0代码中添加了这个以允许跨域访问，这确实使第一个GET在页面加载时工作，但是当我稍后尝试做POST（使用主干model.save（））时，浏览器发送带有a的选项而是空实体。

如果我没有添加上面的代码，它确实会发送正确的 POST

这发生在 Opera、Firefox 和 Chrome 上（如果我用 --disable-web-security 启动 chrome 可以正常工作），所以我认为这仍然是一个浏览器安全问题，谁能解释为什么会发生这种情况以及可能是什么修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:23:45.583

从[什么是 HTTP OPTIONS 方法？](http://zacstewart.com/2012/04/14/http-options-method.html)

> 此方法允许客户端确定与资源相关联的选项和/或要求，或服务器的能力，而无需暗示资源操作或启动资源检索。

*我已经与CORS*问题进行了多次斗争，并且我总是通过*尝试和错误*的方法来解决它们，我对您的案例的建议是添加`OPTIONS`到您的*Allow Methods*中：

```
"Access-Control-Allow-Methods": "POST, GET, PUT, DELETE, OPTIONS" 
```

并让您的服务器使用 响应`OPTIONS`请求`*`，在 Sinatra 中是这样的：

```
options "/*" do
  "*"
end 
```

### 更新

对于关于错误的评论中解释的新问题`header field Content-Type is not allowed by Access-Control-Allow-Headers.`

尝试添加另一个 CORS 标头：

```
"Access-Control-Allow-Headers": "origin, x-requested-with, content-type" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:44:36.267

感谢 fguillen 的建议，用谷歌搜索我找到了可行的方法

```
/*set the response header*/
    Form responseHeaders = (Form) getResponse().getAttributes().get("org.restlet.http.headers"); 
    if (responseHeaders == null) { 
        responseHeaders = new Form(); 
        responseHeaders.add("Access-Control-Allow-Origin", "*");
        responseHeaders.add("Access-Control-Allow-Methods", "POST, GET, PUT, DELETE, OPTIONS"); 
        responseHeaders.add("Access-Control-Allow-Headers", "Content-Type");
        getResponse().getAttributes().put("org.restlet.http.headers", responseHeaders); 
    } 
```

所以这是在 Restlet 2.0 中为 cors 注入的正确代码，不要错过 responseHeaders.add("Access-Control-Allow-Headers", "Content-Type"); 至少当你处理骨干时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T16:44:40.757

稍微偏离主题，但我认为它可能对某人有用并节省时间。
我遇到了**uwsgi**服务器和**骨干网的****CORS**问题。这是我的 uwsgi.ini 文件的一部分，它似乎适用于 POST。

 ****```
[uwsgi]
add-header = Access-Control-Allow-Origin: *
add-header = Access-Control-Allow-Headers: origin, x-requested-with, content-type                                                                 
add-header = Access-Control-Allow-Methods: POST,GET,PUT,OPTIONS,DELETE
add-header = Content-Type: application/json; charset=UTF-8
add-header = Accept: application/json 
```

如 fguillen 所述，服务器需要为 OPTIONS 请求回复“*”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T10:00:21.320

下面的代码可用于解决 Restlet 2.0 中的跨域问题

```
Form responseHeaders = (Form) getResponse().getAttributes().get("org.restlet.http.headers"); 
if (responseHeaders == null) { 
    responseHeaders = new Form(); 
    getResponse().getAttributes().put("org.restlet.http.headers", responseHeaders); 
} 
responseHeaders.add("Access-Control-Allow-Origin", "*"); 
responseHeaders.add("Access-Control-Allow-Methods", "GET,DELETE,PUT,POST,OPTIONS");
responseHeaders.add("Access-Control-Allow-Headers", "Content-Type"); 
responseHeaders.add("Access-Control-Allow-Credentials", "false"); 
responseHeaders.add("Access-Control-Max-Age", "60"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-28T13:48:04.957

也许这个链接可以给你一些关于 CORS 如何工作以及它在 Restlet 中的支持的提示`CorsFilter`：

*   **理解和使用 CORS** - [https://templth.wordpress.com/2014/11/12/understanding-and-using-cors/](https://templth.wordpress.com/2014/11/12/understanding-and-using-cors/)

希望它可以帮助你，蒂埃里

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-02T06:13:42.107

在不同的内容上，下面给出的代码适用于 Restlet 2.1 以上。

```
import org.restlet.engine.header.Header;

private static final String HEADERS_KEY = "org.restlet.http.headers";

@SuppressWarnings("unchecked")

static Series<Header> getMessageHeaders(Message message) {

ConcurrentMap<String, Object> attrs = message.getAttributes();

Series<Header> headers = (Series<Header>) attrs.get(HEADERS_KEY);

if (headers == null) {

         headers = new Series<Header>(Header.class);

     Series<Header> prev = (Series<Header>) 

          attrs.putIfAbsent(HEADERS_KEY, headers);

    if (prev != null) { headers = prev; }

     }

   return headers; 
```

}

```
//The JSON Query "GET"
@Get("json")

 public Representation toJson()

  {

   getMessageHeaders(getResponse()).add("Access-Control-Allow-Origin", "*"); 

   getMessageHeaders(getResponse()).add("Access-Control-Allow-Methods", "POST,GET,OPTIONS");

   getMessageHeaders(getResponse()).add("Access-Control-Allow-Headers", "x-requested-with,Content-Type"); 

   getMessageHeaders(getResponse()).add("Access-Control-Allow-Credentials", "true"); 

   getMessageHeaders(getResponse()).add("Access-Control-Max-Age", "60"); 

  return get();
} 
```****

# mysql - MySQL Order By 减慢连接速度

> ID：12069851
> 
> 赞同：2
> 
> 时间：2012-08-22T09:14:35.593
> 
> 标签：mysql, join, sql-order-by

我有问题是查询

```
SELECT *
FROM files f
LEFT JOIN xfiles x ON x.hash = f.bhash
LEFT JOIN cate c ON c.id = f.cate
LEFT JOIN users u ON u.id = f.user
LEFT JOIN userslev ul ON u.id_lev = ul.id
LEFT JOIN (

SELECT DISTINCT x.hash, s.iis
FROM anno x
JOIN seb s ON s.iis = x.icc
WHERE x.le =0
AND (
x.eve =0
OR x.eve =2
)
GROUP BY  `x`.`hash`
) AS tabel2 ON tabel2.hash = f.bhash
WHERE f.see + IFNULL( x.see, 0 ) + f.lee + IFNULL( x.lee, 0 ) >0
ORDER BY f.added DESC 
```

显示第 0 - 29 行（总共 22,083 行，查询耗时 9.6523 秒）

如您所见，需要 9 秒！

但没有“订购”

```
SELECT *
FROM files f
LEFT JOIN xfiles x ON x.hash = f.bhash
LEFT JOIN cate c ON c.id = f.cate
LEFT JOIN users u ON u.id = f.user
LEFT JOIN userslev ul ON u.id_lev = ul.id
LEFT JOIN (

SELECT DISTINCT x.hash, s.iis
FROM anno x
JOIN seb s ON s.iis = x.icc
WHERE x.le =0
AND (
x.eve =0
OR x.eve =2
)
GROUP BY  `x`.`hash`
) AS tabel2 ON tabel2.hash = f.bhash
WHERE f.see + IFNULL( x.see, 0 ) + f.lee + IFNULL( x.lee, 0 ) >0 
```

显示第 0 - 29 行（总共 22,083 行，查询耗时 0.0241 秒）

只有 0.0241 秒 :)

…………

有没有办法让“订购”与美好时光？

…………

索引：

```
Indexes: (files)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  ihash   27815   A       
 Edit    Drop   filename    BTREE   No  No  filename    27815   A       
 Edit    Drop   cate    BTREE   No  No  cate    45  A       
 Edit    Drop   user    BTREE   No  No  user    1264    A       
 Edit    Drop   bhash   BTREE   No  No  bhash (20)  27815   A       
 Edit    Drop   added   BTREE   No  No  added   27815   A       
 Edit    Drop   filename_2  FULLTEXT    No  No  filename    1           

Indexes: (xfiles)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  id  8196    A       
 Edit    Drop   hash    BTREE   Yes No  hash    8196    A       
 Edit    Drop   see BTREE   No  No  see 37  A       
 Edit    Drop   leec    BTREE   No  No  lee25   A   

Indexes: (cate)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  id  51  A   

Indexes: (users)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  id  39776   A       
 Edit    Drop   username    BTREE   Yes No  username    39776   A       
 Edit    Drop   id_lev  BTREE   No  No  id_lev  19  A       

Indexes: (userslev)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   base    BTREE   Yes No  id  22  A       

Indexes: (anno)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  id  23636   A       
 Edit    Drop   icc BTREE   No  No  icc 2626    A       
 Edit    Drop   eve BTREE   No  No  eve 8   A       
 Edit    Drop   hash    BTREE   No  No  hash    5909    A       
 Edit    Drop   le  BTREE   No  No  le  875 A   

Indexes: (seb)

Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  id  58  A       
 Edit    Drop   iis BTREE   Yes No  iis 58  A   YES 
```

解释：

```
id          select_type     table       type            possible_keys       key         key_len         ref         rows    Extra
1               PRIMARY     f           ALL             NULL                NULL        NULL            NULL        27819   Using temporary; Using filesort
1               PRIMARY     x           eq_ref          hash                hash        20              f.bhash     1       Using where
1               PRIMARY     c           eq_ref          PRIMARY             PRIMARY     4               f.cate      1   
1               PRIMARY     u           eq_ref          PRIMARY             PRIMARY     4               f.user      1   
1               PRIMARY     ul          eq_ref          base                base        4               u.id_lev    1   
1               PRIMARY     <derived2>  ALL             NULL                NULL        NULL            NULL        1176    
2               DERIVED     s           index           iis                 iis         5               NULL        58      Using index; Using temporary; Using filesort
2               DERIVED     x           ref             icc,eve,le          icc         4               s.iis       9       Using where 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T04:56:18.367

这里有很多关于优化订单的信息：http: [//dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

您能否发布这两个解释，以便我们可以看到查询计划的区别是什么？

# css - HTML5 画布大小和分辨率

> ID：12069852
> 
> 赞同：8
> 
> 时间：2012-08-22T09:14:37.747
> 
> 标签：css, html, dom, canvas

我写了一个简单的例子来说明这一点。

画布大小为 500px * 400px。我的图像的原始大小是 200px * 160px，dpi 为 480。我想在画布中以原始大小显示这个图像，这样它就不会被调整大小，这会使图像模糊。

这是代码：

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#canvas").width(500);
            $("#canvas").height(400);

            var canvas = $("#canvas").get(0);
            var ctx = canvas.getContext('2d');

            var image = new Image();
            image.src = "fish01.png"; // size is 200px * 160px

            ctx.drawImage(image, 0, 0); // same with ctx.drawImage(image, 0, 0, 200, 160); 
        });
    </script>
</head>

<body style="background-color: #ccc; margin: 0px;">
    <canvas id="canvas" style="background-color: #66c"></canvas>
</body>
</html> 
```

原图为：

![200 像素 * 160 像素](../Images/1712954ec3c7310e3cec89542edf777e.png)

结果是： ![在此处输入图像描述](../Images/5c7c550c812f3d92c933a9642f32dbfe.png)

我觉得这很奇怪，因为画布的大小是 500px * 400px，而图像的大小是 200px * 160px，图像怎么会超出画布的范围？并且似乎图像已调整大小。

我想知道如何以原始大小显示图像。请给一些建议。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T09:25:55.853

尝试添加您的画布`width`并`height`改为属性：

```
$("#canvas").attr("width", "500px");
$("#canvas").attr("height", "400px"); 
```

这定义了画布中的可绘制空间，否则我认为它默认为 2:1。我知道您正在使用`.width()`，`.height()`但他们设置了一个无单位的值，而我们将其明确定义为带有`.attr()`.

[示例 jsFiddle](http://jsfiddle.net/jtMmF/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T09:30:37.457

当您不向画布标签添加`width`和属性时，您将使用默认和. 和`height``width``height`

```
$("#canvas").width(500);
$("#canvas").height(400); 
```

只需通过 css 这个标签拉伸。

所以使用`<canvas id="canvas" width="500" height="400"></canvas>`

或者使用`$('#canvas').attr`函数

# java - Java 布尔参数更改其值而无需任何赋值

> ID：12069854
> 
> 赞同：0
> 
> 时间：2012-08-22T09:14:47.120
> 
> 标签：java

今天我有一个非常尴尬的经历。我只是像这样调用 Push.payload() 方法。

```
Push.payload(payload, keystore, password, production, token); 
```

（其实这段代码片段是javaPNS的一部分）而Push.payload()只是

```
public static PushedNotifications payload(Payload payload, Object keystore, String password, boolean production, Object devices) throws CommunicationException, KeystoreException {
    return sendPayload(payload, keystore, password, production, devices);
} 
```

当我调用 Push.payload() 时，生产价值是真实的，除了它的声明之外没有任何赋值。

```
private static final boolean production = true; 
```

当然，我在调试模式下进入 Push.payload() 之前检查了它的值是否为真。但是，在 Push.payload() 方法中，生产值变为 false ！

我不知道发生了什么。请解释为什么生产值更改为假。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:18:40.803

如果你打电话

```
Push.payload(payload, keystore, password, false, token); 
```

那么在`production`方法调用中将是错误的。

如果这个值是一个常数，你为什么将它作为参数传递？如果您不能删除它，我建议给它一个不同的名称，例如使用 Java 代码约定。

```
private static final boolean PRODUCTION = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:46:40.973

您在调试模块中看到的“生产”变量实际上是方法“Push.payload()”的参数。如果静态变量的名称与方法中的参数名称相同。jvm优先将其作为方法的参数。因此，我建议您使用大写字母，例如“PRODUCTION”。你最好使用 `Xxxxx.PRODUCTION` 这种风格更适合阅读。

# clojure - Clojure 中的惯用序列切片

> ID：12069855
> 
> 赞同：26
> 
> 时间：2012-08-22T09:14:53.477
> 
> 标签：clojure, sequence, slice

在 Python 中，有一种方便的方法来获取列表的一部分，称为“切片”：

```
a = [1,2,3,4,5,6,7,8,9,10] # ≡ a = range(1,10)
a[:3] # get first 3 elements
a[3:] # get all elements except the first 3
a[:-3] # get all elements except the last 3
a[-3:] # get last 3 elements
a[3:7] # get 4 elements starting from 3rd (≡ from 3rd to 7th exclusive)
a[3:-3] # get all elements except the first 3 and the last 3 
```

在Clojure中使用`clojure.repl/doc`时，我找到了所有这些的等价物，但我不确定它们是惯用的。

```
(def a (take 10 (iterate inc 1)))
(take 3 a)
(drop 3 a)
(take (- (count a) 3) a)
(drop (- (count a) 3) a)
(drop 3 (take 7 a))
(drop 3 (take (- (count a) 3) a)) 
```

我的问题是：如何在 Clojure 中对序列进行切片？换句话说，返回序列不同部分的正确方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-22T09:24:24.577

`count`您可以通过使用`take-last`或`drop-last`代替来简化所有使用：

```
(def a (take 10 (iterate inc 1)))
(take 3 a) ; get first 3 elements
(drop 3 a) ; get all elements except the first 3
(drop-last 3 a) ; get all elements except the last 3
(take-last 3 a) ; get last 3 elements
(drop 3 (take 7 a)) ; get 4 elements starting from 3
(drop 3 (drop-last 3 a)) ; get all elements except the first and the last 3 
```

正如下面评论中所建议的，您可以使用[`->>`](http://clojuredocs.org/clojure_core/clojure.core/-%3E%3E)宏将多个操作“线程化”在一起。例如，最后两行也可以这样写：

```
(->> a (take 7) (drop 3)) ; get 4 elements starting from 3
(->> a (drop-last 3) (drop 3)) ; get all elements except the first and the last 3 
```

如果您只对列表应用两个操作，我认为这两种方法都非常易读，但是当您有像`take`, `map`, `filter`,这样的长字符串时`drop`，`first`使用`->>`宏可以使代码更易于阅读，甚至可能更容易写。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-06-07T08:41:41.333

Python 的序列概念与 Clojure 的非常不同。

在 Python 中，

*   [*序列*](https://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)是*由非负数索引的有限有序*集；和
*   *列表*是一个可变序列，您可以在其中添加切片或从中删除切片。

在 Clojure 中，

*   [*序列*](http://clojure.org/sequences#Sequences-The%20Seq%20interface)是一个支持`first`, `rest`, 和 的接口`cons`；
*   [*列表*](http://clojure.org/data_structures#Data%20Structures-Lists%20%28IPersistentList%29)是一个不可变的顺序集合，带有`cons`（或 `rest`）添加（或删除）`first`元素（返回如此修改的列表，无论如何）。

Clojure 中最接近 Python 列表的是[*vector*](http://clojure.org/data_structures#Data%20Structures-Vectors%20%28IPersistentVector%29)。正如[Adam Sznajder 建议](https://stackoverflow.com/a/12070100/1562315)的那样，您可以使用 对其进行切片[`subvec`](http://clojuredocs.org/clojure_core/clojure.core/subvec)，但您不能像在 Python 中那样添加或删除切片。

`subvec`是一种快速的恒定时间操作，而`drop`让您为绕过的元素数量`take`付费（让您为遍历的元素付费，但这些是您感兴趣的元素）。

你的例子变成......

```
(def a (vec (range 1 (inc 10))))

(subvec a 0 3)
; [1 2 3]

(subvec a 3)
; [4 5 6 7 8 9 10]

(subvec a 0 (- (count a) 3))
; [1 2 3 4 5 6 7]

(subvec a (- (count a) 3))
; [8 9 10]

(subvec a 3 (+ 3 4))
; [4 5 6 7]

(subvec a 3 (- (count a) 3))
; [4 5 6 7] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-22T09:27:25.523

有一个功能`subvec`。不幸的是，它仅适用于向量，因此您必须转换您的序列：

[http://clojuredocs.org/clojure_core/clojure.core/subvec](http://clojuredocs.org/clojure_core/clojure.core/subvec)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-14T04:56:57.427

对序列进行切片有点“代码味道”——序列通常是为项目的顺序访问而设计的。

如果你要做很多切片/连接，有更好的数据结构可用，特别是检查 RRB-Tree 向量实现：

*   [https://github.com/clojure/core.rrb-vector](https://github.com/clojure/core.rrb-vector)

这支持非常高效`subvec`的`catvec`操作。

# math - 有什么作用？在这个等式中是什么意思？(x y) % 255

> ID：12069856
> 
> 赞同：2
> 
> 时间：2012-08-22T09:14:54.570
> 
> 标签：math

有数学背景的人是否知道以下等式中问号的含义，如在此处的 PDF 中找到：http: [//ivizlab.sfu.ca/media/GenProg2009.pdf](http://ivizlab.sfu.ca/media/GenProg2009.pdf)？

```
(x ? y) % 255 
```

显然`% 255`是模函数，但我想不出问号是什么意思。我所有的编程经验都告诉我这`?`是有条件的，`x > y ? 1 : 2`但我认为情况并非如此。

我正在实现一组生成随机图像的图形函数，并且为图像中的每个 x 和 y 坐标调用这些函数。

源文档中列出的其他函数使用相同的符号，例如：

```
(x ? y) / 2 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T10:16:48.480

执行摘要：[您链接到的论文](http://ivizlab.sfu.ca/media/GenProg2009.pdf)（“DiPaola & Gabora”）有一些格式问题，妨碍理解。您应该搜索与论文相关的实际代码，或联系作者。

* * *

请注意，在第 4 页，他们说

> 我们的工作基于 Ashmore 和 Miller 的 [2] CGP 应用程序

追逐参考文献 2 最终导致这篇论文：[http](http://www.emoware.org/work/ashmore-miller-evomusart2004.zip) ://www.emoware.org/work/ashmore-miller-evomusart2004.zip （包含 PDF 的 zip）（“Ashmore & Miller”），其中定义了一组类似的函数，然而在第二篇论文中，可以看出 DiPaola & Gabora 的 PDF 丢失了上标格式：

> 13: abs (sqrt (x - param2 ? y - param2) % 255);

它实际上应该有

> 13: abs (sqrt (x - 参数² ? y - 参数² ) % 255);

（注意，`param` *平方*而不是`param2`）

同样，Ashmore & Miller 在哪里

> 3：（输入1 *输入2）％255；
> 
> 4：（输入 1 + 输入 2）% 255；
> 
> 5：如果（输入1>输入2）输入1-输入2；否则输入2 - 输入1；

DiPaola & Gabora 以

> 3: (x = y) % 255;
> 
> 4：如果（x[y）x-y；否则 y - x;

我似乎很清楚，**一些非 ASCII 符号是用于`?`出现**. 这可能是 unicode PLUS 或 TIMES，但我不能确定。另请注意，`>`从原来的已经变成了一个`[`，这是胡说八道。

面对这些格式错误，要做的就是尝试一些东西，看看有什么用；搜索作者的参考**源代码**；或者（作为最后的手段）联系 DiPaola & Gabora 并询问他们的意图。

# xtext - 在 Xtext MWE2 工作流程中解析文件

> ID：12069864
> 
> 赞同：0
> 
> 时间：2012-08-22T09:15:08.310
> 
> 标签：xtext

我想在 MWE2 工作流程中解析一个文件，例如通过给`org.eclipse.emf.mwe.utils.Reader`组件一个用我的 DSL 编写的文件而不是它的 XMI 表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:37:50.287

或者看看 org.eclipse.xtext.mwe.UriBasedReader

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:19:13.993

我在[http://www.eclipse.org/forums/index.php/m/831365/找到了解决方案](http://www.eclipse.org/forums/index.php/m/831365/)

```
Workflow {  
    component = org.eclipse.xtext.mwe.Reader {
        register = org.xtext.example.mydsl.MyDslStandaloneSetup {}
        path = "modeldir"
        loadResource = {
            slot = "models"
        }
    }
} 
```

调整为使用单个文件时可以编写的Christian的答案

```
Workflow {  
    component = org.eclipse.xtext.mwe.UriBasedReader {
        register = org.xtext.example.mydsl.MyDslStandaloneSetup {}
        uri = "model.file"
        loadResource = {
            slot = "model"
        }
    }
} 
```

# knockout.js - 与 Qunit 的测试敲除绑定失败

> ID：12069866
> 
> 赞同：0
> 
> 时间：2012-08-22T09:15:11.380
> 
> 标签：knockout.js, qunit

我正在编写一套我经常在我的项目中使用的淘汰赛绑定，它变得很大，我需要测试。所以我试着用 Qunit 来做，这是一个基本的测试

```
module("Message binding");

test("When updating message observable with a splash message ", function () {
    var div = document.createElement("div");

    var message = ko.observable();

    ko.applyBindingsToNode(div, { message: message });

    message({ splash: "Test" });
}); 
```

**编辑：在任何人添加蹩脚评论之前：DI 知道还没有 Assert，当我让绑定表现得像在实时环境中一样时，它就会出现**

当我应用绑定时，它会使用空值触发绑定的更新方法（这是正确的，因为 observable 具有空值）

但是当我设置消息 observable **message({ splash: "Test" });** 更新方法不会再次触发。我当然可以自己调用 init 并更新方法，但是我没有使用 KO observable API，并且测试会有点反作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:56:09.623

如果 Knockout 检测到元素不是文档的一部分，则 Knockout 将处理用于跟踪元素绑定依赖关系的计算 observable。

因此，您可能希望在应用绑定之前将元素附加到文档中。然后，您可以在测试完成后将其删除。

# objective-c - 在两个 UILabel 之间拆分一串文本以环绕图像

> ID：12069868
> 
> 赞同：2
> 
> 时间：2012-08-22T09:15:16.433
> 
> 标签：objective-c, ios, nsarray, uilabel, word-wrap

我正在尝试在两个 UILabel 之间分隔很长的文本以环绕图像。我已经重新使用并改编了该项目的前任开发人员留下的一些代码，如下所示......

字符串（连续数字单词，1 到 20）：

```
NSString *sampleString = @"One two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty. One two three four five six seven eight nine ten. Eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty."; 
```

分割方法...

```
-(void)seperateTextIntoLabels:(NSString*) text
{
    // Create array of words from our string
    NSArray *words = [text componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@" "]];

    //Data storage for loop
    NSMutableString *text1 = [[NSMutableString alloc] init];
    NSMutableString *text2 = [[NSMutableString alloc] init];

    for(NSString *word in words)
    {
        CGSize ss1 = [[NSString stringWithFormat:@"%@ %@",text1,word] sizeWithFont:descriptionLabel.font constrainedToSize:CGSizeMake(descriptionLabel.frame.size.width, 9999) lineBreakMode:descriptionLabel.lineBreakMode];

        if(ss1.height > descriptionLabel.frame.size.height || ss1.width > descriptionLabel.frame.size.width)
        {
            if( [text2 length]>0)
            {
                [text2 appendString: @" "];
            }
            [text2 appendString: word];
        }
        else {
            if( [text1 length]>0)
            {
                [text1 appendString: @" "];
            }
            [text1 appendString:word];
        }

    }
    descriptionLabel.text = text1;
    descriptionLabelTwo.text = text2;

    [descriptionLabel sizeToFit];
    [descriptionLabelTwo sizeToFit];

} 
```

它或多或少地像我预期的那样工作，只是在切换发生的时候它变得混乱。

![在此处输入图像描述](../Images/2f9fadb5f99070ccce50d2eee3646d8c.png)

请注意标签 1 'One' 中的最后一个单词放错了位置。在第二个标签的中途也缺少这个词。除了这个问题之外，它似乎工作正常。

关于这里发生了什么的任何想法？

有没有其他解决方案？请注意，我宁愿不使用 UIWebView（主要是因为屏幕渲染的延迟）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:25:31.937

好吧，这是你的问题。

您正在检查字符串中的每个单词是否适合第一个标签，然后检查它是否不适合。它进入第二个。直到“十二”，它都适合第一个标签。但是你希望其余的字符串落入第二个标签，对吗？

好吧，在您的检查中，即使在您拆分到第二个标签之后，您也会继续检查每个单词是否也适合第一个标签。“一个”是第一个仍然适合第一个标签的单词，因此将其放置在那里，然后继续将其他单词放置在第二个标签中。

要解决这个“奇怪”的拆分问题，您可以让自己成为一个布尔值，当您将第二个标签拆分为“YES”（或您喜欢的真值）并确保检查该布尔值是否打开为以及检查尺寸。

我希望这一切现在对你有意义。

祝你好运。

# visual-studio-2010 - Visual Studio 2010 先决条件 x64 安装错误

> ID：12069869
> 
> 赞同：0
> 
> 时间：2012-08-22T09:15:18.197
> 
> 标签：visual-studio-2010, installation

安装 Visual Studio 2010，**安装在 Visual Studio 2010 Prerequisites x64 处停止**

我有：Windows 7 Ultimate x64

我尝试手动安装它也失败了

消息显示安装失败，错误日志显示：

```
[08/22/12,09:53:11] MSITOSIT: [2] CRootComponent::SetManager() - The Windows Installer package:
j:\vs_setup.msi
could not be opened.

Choose Retry to try again. Choose Cancel for exit setup.
[08/22/12,09:53:51] MSITOSIT: [2] CRootComponent::SetManager() - The Windows Installer package:
j:\vs_setup.msi
could not be opened.

Choose Retry to try again. Choose Cancel for exit setup.
[08/22/12,09:53:54] MSITOSIT: [2] CRootComponent::SetManager() - The Windows Installer package:
j:\vs_setup.msi
could not be opened.

Choose Retry to try again. Choose Cancel for exit setup.
[08/22/12,09:53:54] MSITOSIT: [2] CRootComponent::SetManager() - The Windows Installer package:
j:\vs_setup.msi
could not be opened.

Choose Retry to try again. Choose Cancel for exit setup.
[08/22/12,09:53:55] setup.exe: [2] ISetupModule::SetManager() failed in ISetupManager::LoadSetupObjectGuid() : vs_setup.dll
[08/22/12,09:53:55] setup.exe: [2] CSetupManager::LoadSetupObjectname() - Failed in call to LoadSetupObjectGuid() for strName:  in file: vs_setup.dll
[08/22/12,09:53:55] setup.exe: [0] LoadComponent(), LoadSetupObjectName failure: vs_setup.dll
[08/22/12,09:53:55] setup.exe: [0] LoadComponent failed in ISetupManager::LoadComponentsFromDBObject(): vs_setup.dll
[08/22/12,09:53:55] setup.exe: [2] CSetupManager::LoadDatabaseValues() - Failed in call to LoadComponentsFroMDBObjects()
[08/22/12,09:53:55] setup.exe: [2] CSetupManager::RunIntro() - Failed to Load Database Values
[08/22/12,09:53:56] setup.exe: [2] CSetupManager::RunLoadSetup() - Failed to Run the Intro
***EndOfSession***[08/22/12,10:00:25] MSITOSIT: [2] CRootComponent::SetManager() - The Windows Installer package:
j:\vs_setup.msi
could not be opened.

Choose Retry to try again. Choose Cancel for exit setup.
[08/22/12,10:00:28] setup.exe: [2] ISetupModule::SetManager() failed in ISetupManager::LoadSetupObjectGuid() : vs_setup.dll
[08/22/12,10:00:29] setup.exe: [2] CSetupManager::LoadSetupObjectname() - Failed in call to LoadSetupObjectGuid() for strName:  in file: vs_setup.dll
[08/22/12,10:00:29] setup.exe: [0] LoadComponent(), LoadSetupObjectName failure: vs_setup.dll
[08/22/12,10:00:29] setup.exe: [0] LoadComponent failed in ISetupManager::LoadComponentsFromDBObject(): vs_setup.dll
[08/22/12,10:00:29] setup.exe: [2] CSetupManager::LoadDatabaseValues() - Failed in call to LoadComponentsFroMDBObjects()
[08/22/12,10:00:29] setup.exe: [2] CSetupManager::RunIntro() - Failed to Load Database Values
[08/22/12,10:00:35] setup.exe: [2] CSetupManager::RunLoadSetup() - Failed to Run the Intro
***EndOfSession***[08/22/12,10:40:38] Microsoft Visual Studio 2010 64bit Prerequisites (x64): [2] Error: Installation failed for component Microsoft Visual Studio 2010 64bit Prerequisites (x64). MSI returned error code 1603
[08/22/12,10:40:40] VS70pgui: [2] DepCheck indicates Microsoft Visual Studio 2010 64bit Prerequisites (x64) is not installed.
[08/22/12,10:40:40] VS70pgui: [2] DepCheck indicates Microsoft Visual F# 2.0 Runtime was not attempted to be installed.
.....
....
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:19:40.910

确保安装程序具有对驱动器 J: 的读取权限。

我曾经遇到过类似的问题，因为我的安装程序位于我有权限的驱动器上，但系统帐户没有。

尝试将 vs_setup.msi 移动到 C: 驱动器。

# wpf - 如何为复杂模型创建合适的 ViewModel

> ID：12069872
> 
> 赞同：1
> 
> 时间：2012-08-22T09:15:25.770
> 
> 标签：wpf, mvvm

我有一个看起来像这样的模型：

```
// Subclass 1
class A
  {
      public B PropB { get; set; }  
  }

// Subclass 2
class B
  {
      public List<A> PropA { get; set; }
  }

// And finally Model
class Model
  {
      public List<A> PropA { get; set; }
      public List<B> PropB { get; set; }
  } 
```

Model 类中的列表 A 和 B 相互引用了**一些**元素。

在这种情况下，正确的 ViewModel 应该是什么样子？

如果没有交叉引用，那将只是 2 个 ObservableCollections 的子 ViewModel，但我无法使用引用来管理这种情况。每个子 ViewModel 是否应该包含对其他子 ViewModel 的引用？

希望这足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:18:26.197

您可能想看看[Catel](http://catel.codeplex.com)。它允许您基于模型延迟加载视图模型。这样，您可以创建无尽的视图模型链，而无需先指定它们。

因此，当视图检测到特定模型时，它会自动将其转换为视图模型，您就可以开始了。有关更多信息，请阅读有关[嵌套用户控件问题](http://catel.catenalogic.com/index.htm?gs_viewscontrols_nested_user_controls_problem.htm)的文档。

**免责声明：**我是 Catel 的开发者之一

# cookies - 尝试设置和获取 Cookie - 导致未定义索引错误

> ID：12069874
> 
> 赞同：0
> 
> 时间：2012-08-22T09:15:29.463
> 
> 标签：cookies, php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:17:21.387

您将 cookie 设置为立即过期：

```
setcookie("edgeUser", $_POST['userName'], time()+0); 
```

将其设置为

```
setcookie("edgeUser", $_POST['userName'], time()+($howLongItWillLast)); 
```

编辑：Sudhir 还正确指出它在下一页加载之前将不可用。从[文档](http://php.net/manual/en/function.setcookie.php)：

一旦设置了 cookie，就可以在下一页加载时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:19:03.710

设置 cookie 后，可以在下一页加载时使用 $_COOKIE 访问它们并尝试设置 cookie

```
setcookie("edgeUser",  $_POST['userName'], time()+3600);  /* expire in 1 hour */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:17:50.230

问题（来自错误）似乎是`$_POST['userName']`或者`$_COOKIE['edgeUser']`（取决于错误所在的行）是未定义的 - 这意味着它尚未设置，并且看到您实际设置了 cookie，我敢打赌它是未定义的用户名。确保你得到它，检查`isset()`

也可能是 cookie 在您回显之前过期 - 在这种情况下，请使用 Fluffeh 的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:18:46.077

您设置它并立即将其删除。如果您想“在用户关闭会话时删除”，您需要使用`$_SESSION['edgeUser'] = $_POST['userName'];`

# java - java.lang.NoSuchMethodError：fr.la.juserright.metier.Ressource。 (ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V

> ID：12069875
> 
> 赞同：1
> 
> 时间：2012-08-22T09:15:35.630
> 
> 标签：java, jakarta-ee

我的 DAO 总是抛出这个异常：`java.lang.NoSuchMethodError: fr.la.juserright.metier.Ressource.<init>(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V`

资源道：

```
public List<Ressource> readAll() throws SQLException {
    List<Ressource> __ressource = new ArrayList<Ressource>();
    PreparedStatement _stmt = null;
    ResultSet _rs = null;

    try {
        _stmt = this.cnxUserRight.getCnx().prepareStatement(
                "SELECT * FROM ressource");
        _rs = _stmt.executeQuery();
        while (_rs.next()) {
            Ressource _ressourcetmp = this.getRessource(_rs);
            __ressource.add(_ressourcetmp);
        }
    } catch (NamingException e) {
        e.printStackTrace();
    } finally {
        if (null != _rs) {
            _rs.close();
        }
        if (null != _stmt) {
            _stmt.close();
            this.cnxUserRight.closeCnx();
        }
    }
    return __ressource;
}

public Ressource getRessourceByPathForUpdate(String Path, int idressource)
        throws SQLException {
    Ressource _ressource = null;
    PreparedStatement _stmt = null;
    ResultSet _rs = null;

    try {
        _stmt = this.cnxUserRight
                .getCnx()
                .prepareStatement(
                        "SELECT * FROM ressource WHERE path like ? and idressource not like ?;");
        _stmt.setString(1, Path);
        _stmt.setInt(2, idressource);
        _rs = _stmt.executeQuery();
        if (_rs.next()) {
            _ressource = this.getRessource(_rs);
        } else {
            _ressource = null;
        }
    } catch (NamingException e) {
        e.printStackTrace();
    } finally {
        if (null != _rs) {
            _rs.close();
        }
        if (null != _stmt) {
            _stmt.close();
            this.cnxUserRight.closeCnx();
        }
    }
    return _ressource;
}

private Ressource getRessourceForChild(int _idChild) throws SQLException {
    Ressource _ressource = null;
    PreparedStatement _stmt = null;
    ResultSet _rs = null;
    try {
        _stmt = this.cnxUserRight.getCnx().prepareStatement(
                "SELECT * FROM ressource " + "WHERE idressource = ("
                        + "SELECT idressource "
                        + "FROM ressource_ressource "
                        + "WHERE idressource_ressource = ?);");
        _stmt.setInt(1, _idChild);
        _rs = _stmt.executeQuery();
        if (_rs.next()) {
            _ressource = this.getRessource(_rs);
        }
    } catch (NamingException e) {
        e.printStackTrace();
    } finally {
        if (null != _rs) {
            _rs.close();
        }
        if (null != _stmt) {
            _stmt.close();
            this.cnxUserRight.closeCnx();
        }
    }
    return _ressource;
}

private List<Ressource> getRessourceForMOM(int _idmere) throws SQLException {
    List<Ressource> _ressource = new ArrayList<Ressource>();
    PreparedStatement _stmt = null;
    ResultSet _rs = null;

    String _sql = "SELECT * FROM ressource "
            + "WHERE idressource_ressource = ("
            + "SELECT idressource_ressource " + "FROM ressource_ressource "
            + "WHERE idressource = " + _idmere + ");";
    try {

        _stmt = this.cnxUserRight.getCnx().prepareStatement(_sql);
        _rs = _stmt.executeQuery();
        while (_rs.next()) {
            _ressource.add(this.getRessource(_rs));
        }
    } catch (NamingException e) {
        e.printStackTrace();
    } finally {
        if (null != _rs) {
            _rs.close();
        }
        if (null != _stmt) {
            _stmt.close();
            this.cnxUserRight.closeCnx();
        }
    }
    return _ressource;
}

private Ressource getRessource(ResultSet _rs) throws SQLException {

    int _idRessource = _rs.getInt("idressource");
    String _path = _rs.getString("path");
    String _menu = _rs.getString("menu");
    String _description = _rs.getString("description");
    int _idressource_ressource = _rs.getInt("idressource_ressource");
    Ressource _ressource;
    if (_idressource_ressource != 0) {
        _ressource = new Ressource(_idRessource, _path, _menu,
                _description,
                this.getRessourceForChild(_idressource_ressource));
    } else {
        List<Ressource> _ressourceList = this
                .getRessourceForMOM(_idressource_ressource);
        _ressource = new Ressource(_idRessource, _path, _menu,
                _description, _ressourceList);
    }
    return _ressource;
} 
```

堆栈跟踪：

```
ATTENTION: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception java.lang.NoSuchMethodError: fr.la.juserright.metier.Ressource.<init>(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V
at fr.la.juserright.dao.RessourceDAO.getRessource(RessourceDAO.java:451)
at fr.la.juserright.dao.RessourceDAO.readAll(RessourceDAO.java:86)
at fr.la.juserright.service.RessourceModule.getAllRessource(RessourceModule.java:33)
at fr.la.juserright.service.ServiceUserRight.getAllRessource(ServiceUserRight.java:132)
at fr.la.juserright.managedbean.ressourceBean.refreshlist(ressourceBean.java:102)
at fr.la.juserright.managedbean.ressourceBean.<init>(ressourceBean.java:42)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
at com.sun.el.parser.AstValue.getTarget(AstValue.java:149)
at com.sun.el.parser.AstValue.getType(AstValue.java:84)
at com.sun.el.ValueExpressionImpl.getType(ValueExpressionImpl.java:200)
at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:98)
at org.primefaces.component.datatable.DataTable.isLazy(DataTable.java:968)
at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:191)
at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
at org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662) 
```

如果你有想法我很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:45:10.883

> java.lang.NoSuchMethodError: fr.la.juserright.metier.Ressource.(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V

这意味着该类的以下构造函数`fr.la.juserright.metier.Ressource`在当前运行时类路径中根本不存在。

```
public Ressource(int arg1, String arg2, String arg3, String arg4, int arg5) {} 
```

但是到目前为止给出的代码似乎并没有在任何地方使用该构造函数。类中的两个`new Resource()`调用`ResourceDAO`使用`Ressource`或`List<Ressource>`作为第 5 个参数。

显然，运行时类路径很脏，并且您一直在运行过时的版本`RessourceDAO`，而`Ressource`该类已在运行时类路径中正确更新。

清理、重建、重新部署和重新启动。

请注意，此问题与 JSF**无关。**底层异常不是来自`javax.faces`包，而只是来自`java.lang`包，这基本上表明了基本的 Java 语言/运行时问题。

# asp.net-mvc-3 - jquery Ajax 优化技巧-MVC

> ID：12069876
> 
> 赞同：0
> 
> 时间：2012-08-22T09:15:39.403
> 
> 标签：asp.net-mvc-3, jquery

我目前正在尝试将控制器操作转换为 Ajax 请求，以便让页面分段加载，而不是一次全部加载。在我开始进行更改之前，页面加载大约需要 8 秒（它必须处理大量信息）。

由于我已将其更改为通过 ajax 加载部分视图，因此该页面现在需要大约 35 秒来加载相同的信息。

过程如下：

*   初始请求处理，然后以 json 形式返回视图模型（通用列表）
*   然后我使用返回的数据创建两个局部视图

我只是想知道是否有更好的方法来布置 jquery 以使其更快地工作。我知道传递的数据量可能是一个因素 - 虽然我无法在调试器中找到对象的确切大小，但当我将 json 转储到文本文件时，它大约为 70kb。

jQuery

```
$.ajax({
    type: 'GET',
    dataType: "json",
    url: '@Url.Action("GetMapDetails")',
    success: function (data) {
        $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: '@Url.Action("GetMapItems")',
            data: JSON.stringify({
                list: data
            }),
            success: function (result) {
                $("#mapContainer").html(result);
            }
        });
        $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: '@Url.Action("GetAreaPoints")',
            data: JSON.stringify({
                list: data
            }),
            success: function (result) {
                $("#areaPointsContainer").html(result);
            }
        });
    }
}); 
```

控制器

```
public JsonResult GetMapDetails()
{
    List<ViewModel> vm = new List<ViewModel>();

    //create viewmodel here 

    return Json(vm.ToArray(), JsonRequestBehavior.AllowGet);
}
public ActionResult GetMapItems(List<ViewModel> list)
{
    return PartialView("_MapItemsPartial", list);
}

public PartialViewResult GetAreaPoints(List<ViewModel> list)
{
    return PartialView("_AreaPointsPartial", list);
} 
```

如果有人可以提供一些优化建议，那将非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:33:06.447

由于我认为您的目标是仅在需要时才能够加载部分视图，因此将它们全部放在一个标记字符串中是行不通的。

您遇到的性能问题可能是由于 ajax 调用确实比从服务器加载结果流更昂贵。

只有当您将相同的数据检索到同一页面时，缓存才会有所帮助 - 也不是您的情况。

在我看来，您应该将初始视图加载给用户，并立即开始后台预加载您可能很快需要的视图。只需将它们作为不可分割的元素放置到 DOM 上，所以一请求，它们就会立即被加载。当然，您只预加载您最有可能很快需要的那些。

其他可能**更有效**的方法是在客户端上使用 MVVM 框架，例如 KnockoutJS。在一个简单的 html 标记中定义你的视图，而不需要服务器用模型来渲染局部视图。这将允许 html 更快地传输。来自客户端的单独 REST 调用将仅从服务器以 JSON 格式检索模型数据，并且您将对视图应用数据绑定（您之前加载的轻量级 html）。这样，重度渲染的负担将落在客户端上，从长远来看，服务器将能够为更多的客户端提供服务+您最有可能获得性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:01:58.097

安装[Stackexchange Miniprofiler](http://miniprofiler.com)并将其连接到您的数据库请求中，这将帮助您找到占用最多时间的位。我怀疑这很可能是您在服务器上的数据和处理（取决于您编写控制器的方式，您可能会在 AJAX 版本中达到 4 次数据加载+处理，从而导致 4 次页面加载）。

如果这是真的，那么问题不会通过 AJAX 处理您的页面来解决，而是在服务器上缓存已处理的数据（为了使其保持最新，您的选择是较短的缓存持续时间或让更新数据的过程删除缓存，正确答案取决于您的数据是什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:21:45.450

您可以考虑将[部分视图呈现为字符串](https://stackoverflow.com/questions/2537741/how-to-render-partial-view-into-a-string)。这样，您可以从 中返回两个 HTML 字符串`GetMapDetails`，并且您可以在一次 AJAX 调用而不是三个调用中获得相同的结果。

如果还可以消除您来回序列化视图模型的需要，那么那里可能会有一些性能提升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:23:33.713

还尝试使用 $.ajax**缓存**选项为 true 以改进进一步调用[jQuery ajax 方法](http://api.jquery.com/jQuery.ajax/)

我假设信息不会快速变化，那么它会提高性能。

例如，我使用统计页面异步加载 7-8 个图，缓存为我节省了大量时间。

来自 jQuery API：

![来自 jQuery Api。](../Images/5e623ddc04045c7de3baf3edd56cdb4a.png)

另一方面，如果发布的数据内容变化很快，则不建议对其进行缓存，但也要考虑到**每个**浏览器都会将该请求缓存在自己的缓存中。为了避免浏览器缓存在每个请求上使用时间戳作为查询字符串，就像 $.ajax 自动执行的那样。

# java - HashSet 的迭代成本还取决于支持映射的容量？

> ID：12069877
> 
> 赞同：12
> 
> 时间：2012-08-22T09:15:40.060
> 
> 标签：java, algorithm, hashmap, hashtable, time-complexity

来自[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)的 JavaDocs ：

> 此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。迭代这个集合需要的时间与 HashSet 实例的大小（元素的数量）加上支持 HashMap 实例的“容量”（桶的数量）的总和成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要

为什么迭代花费的时间与总和（集合中的元素数量+支持映射的容量）成正比，而不仅仅是集合本身的元素数量？

.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T09:20:17.240

`HashSet`使用 a 来实现`HashMap`，其中元素是映射键。由于地图具有定义数量的可包含一个或多个元素的桶，因此迭代需要检查每个桶，无论它是否包含元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:22:30.007

使用 LinkedHashSet 遵循“链接”条目列表，因此空格的数量无关紧要。通常你不会有一个容量比实际使用的大小多一倍的 HashSet。即使您这样做，扫描一百万个条目`null`也不会花费太多时间（毫秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:25:45.710

> 为什么迭代花费的时间与总和（集合中的元素数量+支持映射的容量）成正比，而不仅仅是集合本身的元素数量？

元素分散在`HashMap`由数组支持的底层内部。
所以不知道哪些桶被占用（但知道有多少元素是完全可用的）。
因此，要遍历所有元素，必须检查***所有****桶*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:59:07.880

如果您关心的是迭代集合所花费的时间，并且您使用的是 Java 6 或更高版本，请查看以下优点：

[并发跳过列表集](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)

# iphone - 加载屏幕无法正常工作

> ID：12069880
> 
> 赞同：0
> 
> 时间：2012-08-22T09:16:00.620
> 
> 标签：iphone, uiview

在我的应用程序中，当请求发送到服务器并且收到响应时，我正在显示加载屏幕，我正在删除该加载屏幕。

为了显示加载屏幕，我使用`UIView`并将其**alpha**降低到**0.5**，以便它显示背景视图。

**我的问题是**当加载屏幕仍然可见时，用户可以单击背景视图上显示的按钮。

**我想要的是：**当加载屏幕可见时，用户不应该能够点击屏幕上的任何地方。即使我做了`userInteractionEnabled` **假**，`UIView`但用户仍然可以点击按钮，为什么？

如果有人知道我做错了什么以及如何实现这一点，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:27:26.757

UIView 可能禁用了交互，但如果按钮在视图层次结构中更高，则它位于视图的顶部，因此它仍然可以访问。

如果这是在 nib 中创建的视图，请确保它位于视图堆栈的顶部

或者，如果它以编程方式将其添加为函数末尾的子视图或将其添加到 mainWindow（非常小心地将内容添加到主窗口，这是层次结构的顶部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:40:37.547

当您向服务器发送请求并显示加载视图时，您可以使用 [[UIApplication sharedApplication] beginIgnoringInteractionEvents]。当您收到响应调用 [[UIApplication sharedApplication] endIgnoringInteractionEvents] 并删除加载视图时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:03:16.303

是的，我明白了，我为 UIView 做了 userInteractionEnabled false，所以点击事件被发送到主视图上的按钮。我删除了 userInteractionEnabled false，它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:22:27.447

同样明智的是，实用程序开源库可用。

iOS开源项目是MBProgressHUD，

它指的是平视显示器，一种覆盖在另一个视图上的视图，通常用于显示活动指示器和/或提供与 UI 交互的方法。HUD 的一个很好的例子是使用内置电影播放器​​播放电影时。当您点击屏幕时，电影播放器​​将在显示屏上显示一系列控件。另一个与 MBProgressHUD 相关的常见示例是在现有视图的顶部显示进度指示器。例如，在访问远程服务时，为了向用户提供反馈，您可以选择显示“请稍候”消息

你可以[从这里下载源代码](https://github.com/jdg/MBProgressHUD)。

# xpages - 通过单击一个按钮调用另外两个按钮

> ID：12069883
> 
> 赞同：0
> 
> 时间：2012-08-22T09:16:10.493
> 
> 标签：xpages

我想通过单击一个按钮来“激活”单击其他 2 个按钮。我已将此 ccjs 放入 onclick 事件中：

```
document.getElementById("#{id:button28}").click();document.getElementById("#{id:button29}").click(); 
```

但是只有按钮 28 被点击！然后我尝试将这部分代码放在 onclick 事件下，将 part2 放在 onmousedown 事件下。然后我必须在他真正完成这项工作之前单击此按钮 2 次。

到目前为止的代码：

```
<xp:button value="Save" id="button26">
<xp:eventHandler event="onclick" submit="false">
    <xp:this.script>
        <xp:executeClientScript>
    <xp:this.script><![CDATA[document.getElementById("#{id:button29}").click();
    ></xp:this.script>
        </xp:executeClientScript>
    </xp:this.script></xp:eventHandler></xp:button><xp:button id="button29" value="button29">
    <xp:eventHandler
    event="onclick" submit="true" refreshMode="partial"
    id="eventHandler21" refreshId="outsidePanel5">
        <xp:this.action>
            <xp:actionGroup>
                <xp:executeScript>
                <xp:this.script><![CDATA[#{javascript:sessionScope.put("test","");// and some more code}]]>
                </xp:this.script>
                </xp:executeScript>
            </xp:actionGroup>
        </xp:this.action>
    <xp:this.onComplete><![CDATA[document.getElementById("#{id:button28}").click();]]></xp:this.onComplete>
    </xp:eventHandler></xp:button><xp:button value="button28" id="button28">
    <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="outsideMogelijkheid">
        <xp:this.action>
            <xp:executeScript
                    script="#{javascript://some code}">
            </xp:executeScript>
        </xp:this.action>
    </xp:eventHandler></xp:button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:41:25.083

如果要在另一个按钮中运行 SSJS，实际上可以通过编程方式调用 eventHandler，而不是在 CSJS 中触发按钮。这也会表现得更好，因为您不会一直在 CSJS 和 SSJS 之间切换。以下代码应该可以工作：

```
var eventHandler:com.ibm.xsp.component.xp.XspEventHandler = getComponent("button29");
eventHandler.getAction().invoke(facesContext, null);
eventHandler = getComponent("button28");
eventHandler.getAction().invoke(facesContext, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:38:12.837

如果这些按钮执行 SSJS 代码，您需要在第一个按钮的 onComplete 事件中添加代码以单击第二个按钮。

[http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=0574D334CB03EACF852578CB00667F54](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=0574D334CB03EACF852578CB00667F54)

**onComplete 的附加** 工作示例并不是它**仅适用于部分刷新**

```
<xp:button value="Save" id="button26">
<xp:eventHandler event="onclick" submit="false">
    <xp:this.script><![CDATA[document.getElementById("#{id:button29}").click()]]>
</xp:this.script>
    </xp:eventHandler></xp:button>
<xp:button id="button29" value="button29">

<xp:eventHandler event="onclick" submit="true"
    refreshMode="partial" refreshId="computedField1">

    <xp:this.action><![CDATA[#{javascript:viewScope.test="Almost Done"}]]>
</xp:this.action>
    <xp:this.onComplete>
<![CDATA[document.getElementById("#{id:button28}").click();]]>
</xp:this.onComplete>
    <xp:this.onError><![CDATA[alert("error")]]></xp:this.onError>
</xp:eventHandler></xp:button>

<xp:button value="button28" id="button28">
    <xp:eventHandler event="onclick" submit="true" 
refreshMode="partial" refreshId="computedField1">

        <xp:this.script><![CDATA[alert("Button 28")]]></xp:this.script>
        <xp:this.action>
            <xp:executeScript>
                <xp:this.script><![CDATA[#{javascript:viewScope.test="Done"}]]>
</xp:this.script>
            </xp:executeScript>
        </xp:this.action></xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:text escape="true" id="computedField1" value="#{viewScope.test}"></xp:text> 
```

# asp.net-mvc - servicestack MVC powerpack 是否与 ASP.NET MVC 4 兼容？

> ID：12069888
> 
> 赞同：1
> 
> 时间：2012-08-22T09:16:25.063
> 
> 标签：asp.net-mvc, servicestack

我目前在 ASP.NET MVC 3 项目中使用 servicestack powerpack (ServiceStackController)，但我现在正在考虑升级到 VS2012、.NET 4.5 和 ASP.NET MVC 4。有没有人测试过 powerpack 是否适用于 ASP.NET MVC 4 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:30:11.597

好的，我现在已经自己测试过了，它似乎工作正常。

# excel - How do I compare text in Excel cells to see if same words are found?

> ID：12069890
> 
> 赞同：1
> 
> 时间：2012-08-22T09:16:32.210
> 
> 标签：excel, vba, comparison, cells

I have several rows of Excel cells which contain a string of words, all separated by commas. I want to compare each cell with another cell to check if any of the words match/are duplicates. For example:

cell A1: `dog, cat, rabbit, mouse, lion, bear, tiger`
cell A2: `sausage, pickle, dog, cat, elephant, bread`

result: `dog, cat`

The result could also be a number (e.g. 2) if that is easier. Many thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:20:13.733

[From here](http://office.microsoft.com/en-us/excel-help/compare-cell-contents-HP003056130.aspx)

To check if the string is equal to another you can use `Exact`
`=EXACT(text1,text2)`

Text1 is the first text string.

Text2 is the second text string.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T02:36:08.610

I think you would be best served using VBA which you could then deploy as a `User Defined Function` (UDF)

*   hold down [alt](/questions/tagged/alt "show questions tagged 'alt'")[f11](/questions/tagged/f11 "show questions tagged 'f11'") to go to the VBE
*   *Insert ... Module*
*   copy and paste in the code below
*   hold down [alt](/questions/tagged/alt "show questions tagged 'alt'")[f11](/questions/tagged/f11 "show questions tagged 'f11'") to go back to Excel

Then call the function in Excel such as
`=DupeWord(A1,A2)` to find any matches between A1 and A2

![enter image description here](../Images/4af6aa06b4d8b9ce36b660459397a67b.png)

**`Usr Defined Function`**

```
Function DupeWord(str1 As String, str2 As String) As String
Dim vArr1
Dim vArr2
Dim vTest
Dim lngCnt As Long
vArr1 = Split(Replace(str1, " ", vbNullString), ",")
vArr2 = Split(Replace(str2, " ", vbNullString), ",")
On Error GoTo strExit

For lngCnt = LBound(vArr1) To UBound(vArr1)
vTest = Application.Match(vArr1(lngCnt), vArr2, 0)
If Not IsError(vTest) Then DupeWord = DupeWord & vArr1(lngCnt) & ", "
Next lngCnt
If Len(DupeWord) > 0 Then
DupeWord = Left$(DupeWord, Len(DupeWord) - 2)
Else
strExit:
DupeWord = "No Matches!"
End If

End Function 
```

**`Use inside VBA`**

```
Sub test()
MsgBox DupeWord("dog, cat, rabbit, mouse, lion, bear, tiger", "sausage, pickle, dog, cat, elephant, bread")
End Sub 
```

# java - 本地机器中的 Hadoop 配置

> ID：12069892
> 
> 赞同：-1
> 
> 时间：2012-08-22T09:16:44.187
> 
> 标签：java, hadoop, hbase

我对 Hadoop 和 Hbase 非常陌生。我对配置细节感到非常困惑。我需要在 Hbase 中使用 Java API 创建表。我的本地计算机中没有该软件，我正在使用 Putty 连接到我的服务器。现在我的问题是，我可以使用本地计算机中的软件编写程序来与远程服务器通信。拜托，任何人都可以尽快消除我的疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:08:36.867

只需点击 zookeeper IP 并继续您的逻辑。有关示例和 CRUD 操作，请参阅 Hbase Definite Guide 一书。
这是通过从远程 pc 访问 zookeeper IP 创建表的示例代码。

```
 Configuration config = HBaseConfiguration.create();
    config.set("hbase.zookeeper.quorum", "192.***.*.**"); // Zookeeper IP
    HBaseAdmin admin = new HBaseAdmin(config);
    HTableDescriptor desc = new HTableDescriptor();
    desc.setName(Bytes.toBytes("SampleTable"));
    HColumnDescriptor family = new HColumnDescriptor("col1".getBytes()); //Column family name
    desc.addFamily(family);
    admin.createTable(desc); 
```

# java - 使用 jsoup 解析 HTML 并保留原始内容

> ID：12069893
> 
> 赞同：6
> 
> 时间：2012-08-22T09:16:44.767
> 
> 标签：java, parsing, html-parsing, jsoup

我想替换 H​​TML 文件中的一些元素，保持所有其他内容不变。

```
Document doc = Jsoup.parse("<div id=title>Old</div >\n" +
        "<p>1<p>2\n" +
        "<table><tr><td>1</td></tr></table>");
doc.getElementById("title").text("New");
System.out.println(doc.toString()); 
```

我希望有以下输出：

```
<div id=title>New</span></div >
<p>1<p>2
<table><tr><td>1</td></tr></table> 
```

相反，我有：

```
<html>
 <head></head>
 <body>
  <div id="title">New</div>
  <p>1</p>
  <p>2 </p>
  <table>
   <tbody>
    <tr>
     <td>1</td>
    </tr>
   </tbody>
  </table>
 </body>
</html> 
```

Jsoup 补充说：

1.  关闭 p 标签
2.  属性值的双引号
3.  身体
4.  html、head 和 body 元素

我可以将修改后的 HTML 序列化回原始吗？[Jericho](http://jericho.htmlparser.net/)可以做到这一点，但它没有像 Jsoup 那样提供流畅的 DOM 操作方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:40:06.170

Is there a reason why attribute values shouldn't get quoted? See [here](http://www.cs.tut.fi/~jkorpela/qattr.html) and [here](http://www.w3schools.com/html/html_attributes.asp).

For the other points try this:

```
final String html = "<div id=title>Old</div >\n"
            + "<p>1<p>2\n"
            + "<table><tr><td>1</td></tr></table>";

Document doc = Jsoup.parse(html);
doc.select("[id=title]").first().text("New");
doc.select("body, head, html, tbody").unwrap();
doc.outputSettings().prettyPrint(false);

System.out.println(doc); 
```

# eclipse - 在 MWE2 中调用 ATL 模型转换

> ID：12069894
> 
> 赞同：1
> 
> 时间：2012-08-22T09:16:45.563
> 
> 标签：eclipse, mde, eclipse-atl

是否可以在 MWE2 工作流中调用 ATL 模型转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:51:32.720

是的，这是可能的。但是，您必须实现一个 MWE2 工作流组件来完成此任务。查看 ATL 论坛，了解[一些以编程方式进行转换的 Java 代码](http://www.eclipse.org/forums/index.php/t/438623/)。

# android - Jquery mobile 在哪里以及如何精确地插入防止列表项的默认行为？

> ID：12069895
> 
> 赞同：0
> 
> 时间：2012-08-22T09:16:48.220
> 
> 标签：android, iphone, jquery-mobile

在动态生成的列表中，如果我在列表中，我需要停止`Click`（点击）事件`scroll`。

我尝试添加到 document.ready 功能

```
$('a').click(function(event){
    event.preventDefault();
  }) 
```

但这对我不起作用。
有人可以帮我吗？
在所有链接中我使用`onTouchEnd`事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:49:18.767

使用您的代码，您可以防止执行该语句时存在的任何链接的默认行为。如果列表（链接，我猜）是动态生成的，你应该像这样绑定处理程序：

```
$(document).on('click','a', function(ev){
    ev.preventDefault();
}); 
```

请注意，您会将此处理程序附加到文档中的任何链接。如果您只想将其应用于一组链接，您可以更改`$(document)`包含它们并且已经存在的父级的选择器，或者更改`'a'`更具体的内容，例如包含共同类的选择器。

# html - 侧边栏和内容的 div 高度相同

> ID：12069897
> 
> 赞同：2
> 
> 时间：2012-08-22T09:16:51.880
> 
> 标签：html, css

假设以下html页面：

```
<html>
 <head></head>
 <body>
  <div id="wrapper">
   <div id="header"/>
   <div id="navigation"/>
   <div id="leftcolumn"/>
   <div id="content/>
   <div id="footer"/>
  </div>
 </body>
</html> 
```

我想要实现的是左列 div 和内容 div 始终具有相同的高度。有时leftcolumn div高于content div，因为内容很少，反之亦然：当内容很多时，content div高于leftcolumn div。

现在的情况产生了一些布局恶作剧，因为正文背景、左列背景和内容背景都是不同的颜色。

这是我的 CSS 原样：

```
* {
    padding: 0;
    margin: 0;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background: #FFFEE9;
}

#wrapper {
    margin: 0 auto;
    width: 900px;
    height: auto;
}

#content {
    float: left;
    color: #006350;
    background: #DEE3DC;
    height: 100%;
    display: inline;
    width: 730px;
}

#contents {
    margin: 35px;
}

#contents h1, h2 {
    padding-bottom: 15px;
}

#contents p {
    padding-top: 5px;
    padding-bottom: 5px;
}

#header {
    color: black;
    width: 900px;
    float: left;
    height: 160px;
    background: #FFFEE9;
    margin-top: 10px;
}

#navigation p {
    padding: 3px;
}

#footer {
    width: 900px;
    height: 40px;
    clear: both;
    color: white;
    background: #83422D;
    font-size: 80%;
}

#footer a {
    color: white;
    text-decoration: none;
}

#footer p {
    padding: 4px;
}

#navigation {
    float: left;
    width: 900px;
    height: 25px;
    color: white;
    background: #83422D;
}

#navigation a {
    text-decoration: none;
    color: white;
}

#navigation a:hover {
    text-decoration: underline;
}

#leftcolumn {
    color: white;
    background: #006350;
    height: 100%;
    width: 170px;
    float: left;
}

#leftcolumn a {
    text-decoration: none;
    color: white;
}

#leftcolumn a:hover {
    text-decoration: underline;
}

#leftcolumn li {
    padding-bottom: 10px;
}

#leftcolumn ul {
    margin-left: 20px;
    margin-top: 20px;
    list-style: none;
}

.centered {
    text-align: center;
    margin: auto;
    display: block;
}

#gallery {
    height: 300px;
    width: 650px;
}

#gallery img {
    margin-right: 50px;
    margin-top: 50px;
}

#gallerytext {
    width: 400px;
    font-size: 75%;
    color: black;
    position: relative;
    margin-left: 155px;
    margin-top: -100px;
    text-align: justify;
} 
```

我尝试过`height: 100%, height:inherit, height:auto,...`在不同的 div（包装器、左列和内容）上使用 CSS 样式的组合，但我似乎无法得到我想要的结果。底线：如果我希望 leftcolumn 和 content div 具有相同的高度，我应该使用什么 CSS 样式，无论当时哪个更高。（请不要使用javascript）。

左列较大的 JsFiddle 示例：http: [//jsfiddle.net/CQPnF/4/](http://jsfiddle.net/CQPnF/4/)

内容较大的示例：http: [//jsfiddle.net/BQkme/](http://jsfiddle.net/BQkme/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:25:20.697

您可以在左右面板中使用`display:table-cell`相当来获得所需的结果：-`float`

我已经从你那里删除了浮动，并根据你的要求`#content & #leftcolummn`给了它们和它的工作正常。`display:table-cell;`

**更新的 CSS**

```
* {
    padding: 0;
    margin: 0;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background: #FFFEE9;
}

#wrapper {
    margin: 0 auto;
    width: 900px;
    overflow:hidden;
}

#content {
    color: #006350;
    background: #DEE3DC;
    display:table-cell;
    width: 730px;
}

#contents {
    margin: 35px;
}

#contents h1, h2 {
    padding-bottom: 15px;
}

#contents p {
    padding-top: 5px;
    padding-bottom: 5px;
}

#header {
    color: black;
    width: 900px;
    float: left;
    height: 160px;
    background: #FFFEE9;
    margin-top: 10px;
}

#navigation p {
    padding: 3px;
}

#footer {
    width: 900px;
    height: 40px;
    clear: both;
    color: white;
    background: #83422D;
    font-size: 80%;
}

#footer a {
    color: white;
    text-decoration: none;
}

#footer p {
    padding: 4px;
}

#navigation {
    float: left;
    width: 900px;
    height: 25px;
    color: white;
    background: #83422D;
}

#navigation a {
    text-decoration: none;
    color: white;
}

#navigation a:hover {
    text-decoration: underline;
}

#container {
    border:1px solid red;
    overflow:hidden;

}

#leftcolumn {
    color: white;
    background: #006350;
    width: 170px;
    display:table-cell;
}

#leftcolumn a {
    text-decoration: none;
    color: white;
}

#leftcolumn a:hover {
    text-decoration: underline;
}

#leftcolumn li {
    padding-bottom: 10px;
}

#leftcolumn ul {
    margin-left: 20px;
    margin-top: 20px;
    list-style: none;
}

.centered {
    text-align: center;
    margin: auto;
    display: block;
}

#gallery {
    height: 300px;
    width: 650px;
}

#gallery img {
    margin-right: 50px;
    margin-top: 50px;
}

#gallerytext {
    width: 400px;
    font-size: 75%;
    color: black;
    position: relative;
    margin-left: 155px;
    margin-top: -100px;
    text-align: justify;
} 
```

看演示：- [http://jsfiddle.net/BQkme/10/](http://jsfiddle.net/BQkme/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:27:30.300

这个解决方案有点笨拙，因为您需要一些支持标记，但它确实有效，我以前使用过它。

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

我遇到的主要问题是您必须将内容 div 嵌套到等于列数的深度。在您的情况下，这不是一个大问题，因为您只会将内容嵌套在 2 个容器 div 中。

您的标记最终可能类似于以下内容：

```
<html>
 <head></head>
 <body>
  <div id="wrapper">
   <div id="header"/>
   <div id="navigation"/>
   <div id="container_content">
     <div id="container_leftcolumn">
       <div id="leftcolumn"/>
       <div id="content/>
     </div>
   </div>
   <div id="footer"/>
  </div>
 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:31:32.873

您需要使用绝对定位。

***[这](http://jsfiddle.net/blasteralfred/CQPnF/)***是一个有效的现场演示。

希望这可以帮助。

# android - 如何使用 ADB 将命令作为后台进程运行？

> ID：12069900
> 
> 赞同：7
> 
> 时间：2012-08-22T09:16:55.920
> 
> 标签：android, adb

我正在尝试使用 adb 在后台运行 logcat。

`adb shell "logcat -r 2000 -f /data/local/test.log &"`

但它不起作用。如果我这样做，`adb shell ps | grep logcat`我看不到 logcat 进程正在运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T12:48:33.733

添加 nohup 似乎有效。
`adb shell "nohup logcat -r 2000 -f /data/local/test.log &"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T00:38:00.373

如果你不能直接运行 nohup，那么你可以试试这个：busybox nohup logcat

BusyBox 将许多常见 UNIX 实用程序的微小版本组合成一个小型可执行文件。所以它也有 nohup 功能，如果制造商在编译时打开 nohup 选项，你可以通过busybox使用它。

# codeigniter - 如何使用codeigniter将下拉列表放入数组

> ID：12069907
> 
> 赞同：0
> 
> 时间：2012-08-22T09:17:21.257
> 
> 标签：codeigniter

我将 ion auth 用于 codeigniter，它工作得很好，只是我不知道如何以与文本字段相同的方式对下拉列表进行编码。

如果你想在视图中显示一个文本字段，你必须发出这个：

```
<?php echo form_input($first_name);?> 
```

这是控制器下的代码：

```
$this->data['first_name'] = array(
    'name'      => 'first_name',
    'id'        => 'first_name',
    'type'      => 'text',
    'size'      => 32,
    'maxlength' => 32,
    'value' => $this->form_validation->set_value('first_name'),
); 
```

但是如何将下拉列表的值放入数组中？

我试着把这段代码放在下面：

```
<?php
$options = array(
                  ''    => 'Select',
                  'Dr'  => 'Dr.',
                  'Mr'  => 'Mr.',
                  'Mrs' => 'Mrs.',
                  'Ms' => 'Ms.',
                  'Prof' => 'Prof.',
                  'Mr. & Mrs.' => 'Mr. & Mrs.',
                );
echo form_dropdown('title', $options, '$title');
?> 
```

我在想，在视图下我应该像这样编码：`echo form_dropdown($title);`与文本字段相同，但控制器下的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:14:08.753

首先在您的控制器中，您可以执行以下操作：

```
$options = array(
              '0'    => 'Select',
              'Dr'  => 'Dr.',
              'Mr'  => 'Mr.',
              'Mrs' => 'Mrs.',
              'Ms' => 'Ms.',
              'Prof' => 'Prof.',
              'Mr. & Mrs.' => 'Mr. & Mrs.',
            );
$data['options'] = $options
$this->load->view('your_view',$data); 
```

在视图中：

```
echo form_dropdown('title', $options, set_value('title')); 
```

此外，如果发生表单验证错误，请认为您希望保留下拉列表的值：

您只需要进行一些验证以保留下拉列表的值，例如：

```
$this->form_validation->set_rules('title','Titles','alpha'); 
```

如果未验证，即使使用 set_value，下拉菜单也不会保留这些值

# java - 休眠搜索（Lucene +休眠核心）如何工作？

> ID：12069908
> 
> 赞同：1
> 
> 时间：2012-08-22T09:17:22.533
> 
> 标签：java, hibernate, lucene, hibernate-search

我正在使用休眠搜索（建立在 Lucene 之上）。我创建了索引。现在，如果我进行搜索，它是否仅从创建的索引中获取结果？我的意思是它是否也从数据库表中查询数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:28:29.610

不，您需要创建一个 Lucene 查询来针对 Hibernates 的`Search`类运行，如下所示：

```
MultiFieldQueryParser parser = new MultiFieldQueryParser(Version.LUCENE_29, searchFields, new KeywordAnalyzer());
org.apache.lucene.search.Query query = parser.parse("Text from entity to search for"); // Or any other valid query
FullTextSession fullTextSession = Search.getFullTextSession(hibernateSession);
org.hibernate.Query hibernateQuery = fullTextSession.createFullTextQuery(query, YOUR_TARGET_ENTITY_HERE.class);
List result = hibernateQuery.list(); 
```

我不知道他们为什么也将 Hibernate 结果类命名为`Query`..

`searchFields`是一个`String[]`包含要搜索的字段列表。

编辑：更多解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:28:06.803

Hibernate Search 就像是使用 Hibernate 的需要全文搜索功能的项目的强大帮手。因此，“Hibernate Search”本身不会在数据库中进行搜索。它只会在索引中搜索。这就是 Lucene 集成部分。Hibernate 集成部分主要围绕侦听器，每次您对实体执行某些操作（保存、更新、删除......）时，它都会将实体索引为文档。

# python - Python - hashlib 不会在例程中“拾取”文件

> ID：12069909
> 
> 赞同：0
> 
> 时间：2012-08-22T09:17:35.113
> 
> 标签：python, hashlib

我在我正在编写的脚本中使用 hashlib 函数，我无法让它获取我指向的文件 - 它只返回 0kb 文件的哈希值`d41d8cd98f00b204e9800998ecf8427e`。

我这样称呼它：文件的完整路径字符串`fHash=md5Checksum(f)`在哪里。`f`

md5Checksum 函数是从这里的一个提升：http: [//www.joelverhagen.com/blog/2011/02/md5-hash-of-file-in-python/](http://www.joelverhagen.com/blog/2011/02/md5-hash-of-file-in-python/)我已经用显式类型直接测试了第二个示例文件的路径，它返回正确的哈希值。

我也以`os.path.getsize`相同的方式（`fSize=os.path.getsize(f)`）使用该方法，并且正确地拾取文件。

当我`f`在代码中转储字符串的内容并将其与显式键入的路径进行比较时，我注意到它`'`在字符串周围缺少标记：

`/home/.../(500) Days of Summer[2009]/11 - Regina Spektor - Hero.mp3`来自“打印 f”

并从显式输入的路径：

`print 'The MD5 checksum of text.txt is', md5Checksum('/home/.../deduper/test.txt')`（有效）

如果我手动`'`向路径添加标记，则代码会失败：

`IOError: [Errno 2] No such file or directory: "'/home/.../(500) Days of Summer[2009]/11 - Regina Spektor - Hero.mp3'"`

这让我怀疑我没有正确通过路径。如果这很重要，我在一个 ubuntu 盒子上。

***编辑***

我是个小丑。我已经坚持了几天，它只是通过将它发布在这里并检查我注意到的缩进我已经在md5Checker方法上搞砸了其中一个......我已经修复了它，这完全有效。谢谢大家让我检查....（作为记录，我`m.update(data)`在休息时内联了线路。现在不行了，是吧....：s

```
def md5Checksum(filePath):
 fh = open(filePath, 'rb')
 m = hashlib.md5()
 # print "File being hashed: " + filePath
 while True:
  data = fh.read(8192)
  if not data:
   break
  m.update(data)
 return m.hexdigest() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:37:03.653

我不知何故让压痕错位，不足以导致它翻倒并给我一个错误，但足以让它不起作用。答案发布在原始问题中。

# javascript - 在 HTML 页面中隐藏静态（或硬编码）文本

> ID：12069917
> 
> 赞同：1
> 
> 时间：2012-08-22T09:18:21.223
> 
> 标签：javascript, html

我有一个包含一些硬编码/静态文本的 HTML 页面。文本字符串没有任何类/id/名称。它就在那里。如何在页面加载时隐藏它？

PS：我真的希望这不是一个重复的问题。我已经完成了我的“功课”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:21:31.880

在 CSS 中，`display: none`？那将是最简单的方法。或者，您可以在页面加载后使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:24:46.803

如果您正在谈论使用 javascript 执行此操作，则必须执行 a`window.onload`并设置 style.display = "none"; 但这需要一个 id/class/某种方式来引用它（有一些方法可以在没有它们的情况下引用它，但是只给它一个 id/class 会更好。函数看起来像这样。

```
window.onload = function() { 
```

`document.getElementById("text").style.display = none;` `};`

您的字符串的 id 为“text”

虽然如果你决定让文本在启动时显示为 none，为什么不将 style/css 设置为最初显示为 none？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:28:15.010

您可以使用检查结构的 CSS 选择器隐藏没有任何直接标识符的元素。你没有发布你的标记，所以不可能给出一个确切的解决方案。

## 示例 1

HTML

```
<body>
    <section>
       <div>Div I want to hide</div>
    </section>
</body> 
```

CSS

```
SECTION > DIV { display: none; } 
```

这种模式有许多排列，并且有许多可用的选择器。

请参阅：[CSS2 选择器](http://www.w3.org/TR/CSS2/selector.html)（非常广泛的支持）和[CSS3 选择器](http://www.w3.org/TR/css3-selectors/)（在大多数较新的浏览器中都支持）。

## 示例 2

这是一个更复杂的例子：

HTML

```
<div id="foo">
    <ul>
        <li>Hide this item</li>
        <li>Don't hide this</li>
        <li>Don't hide this</li>
    </ul> 
</div> 
```

CSS

```
/* hide the first child of any UL which is a direct descendant of #foo */
#foo > UL > LI:first-child { display: none; } 
```

# machine-learning - 计算用户在电信 cdr 数据中的影响力

> ID：12069919
> 
> 赞同：1
> 
> 时间：2012-08-22T09:18:25.030
> 
> 标签：machine-learning, data-mining

我遇到了一种计算推特网络上一个人的影响力得分的方法。这是一个示例参考：[http ://thenoisychannel.com/2009/01/13/a-twitter-analog-to-pagerank/](http://thenoisychannel.com/2009/01/13/a-twitter-analog-to-pagerank/)

类似地，是否有其他算法可以使用他/她的 CDR 数据计算用户在电信网络上的影响力得分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:01:16.723

请查看 Magnusson 的论文： [http ://uu.diva-portal.org/smash/record.jsf?pid=diva2:509757](http://uu.diva-portal.org/smash/record.jsf?pid=diva2:509757)

本论文旨在调查社交网络分析在电信网络中的有用性。由于这些网络可能非常大，因此用于研究它们的方法必须在网络规模增加时线性扩展。因此，研究的一个组成部分是确定哪些社交网络分析算法具有这种可扩展性。此外，还对软件解决方案进行了比较，以找到适合这些特定任务的产品。

# php - 仅标签 1 中的内容在 Jquery ui 中更新，而不是标签 2 和标签 3

> ID：12069921
> 
> 赞同：0
> 
> 时间：2012-08-22T09:18:37.090
> 
> 标签：php, jquery-ui, web-applications, jquery-ui-tabs, updates

我使用 Jquery UI 创建了选项卡，对于每个选项卡，当用户打开选项卡时，选项卡会显示用户想编辑的原始图像，然后将编辑后的文件保存在服务器中。然后从服务器检索编辑后的图像以使用相同的选项卡显示给用户。

当用户使用第一个选项卡时，它会正确显示原始图像和更新的图像，但是当他使用任何其他选项卡时，选项卡只会加载原始图像并且不会显示更新的图像，尽管它已成功保存在服务器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:31:25.507

您应该查看控制台信息（Firebug for Firefox 中的 Net 选项卡）以检查请求何时发布到服务器。如果帖子在服务器中保存的图像之前，您可能很容易找到出路。如果不是，请检查是否是 jQuery 选项卡缓存导致的错误。

这是启用缓存的方法。第一次单击选项卡时将加载选项卡。如果这是在您更改另一个选项卡中的图像之后，这应该可以工作。

```
$("#rightTabs").tabs({
    cache: true
});
$("#rightTabs").tabs("option", "cache", true ); 
```

# spring-mvc - 从 SpringMVC 控制器中的 liferay 搜索容器访问分页信息

> ID：12069927
> 
> 赞同：0
> 
> 时间：2012-08-22T09:18:52.160
> 
> 标签：spring-mvc, liferay

我正在使用 Liferay（在 JSP 中使用 liferay-ui）和 SpringMVC 开发一个 Portlet。

我的 JSP 中有以下代码：

```
<liferay-ui:search-container delta="5" emptyResultsMessage="no books!">
  <%
    List<Book> bookList = (List<Book>)request.getAttribute("bookList");
    List<Book> bookListView = ListUtil.subList(bookList, searchContainer.getStart(), searchContainer.getEnd());
  %>
<liferay-ui:search-container-results results="<%= bookListView %>" total="${numberOfBooks}">

</liferay-ui:search-container-results>
  ... 
```

我真的很想摆脱 JSP 中的 Java 代码块，并将 bookListView 作为模型属性，就像上面代码中的 numberOfBooks 一样。

但是，我找不到从 Spring Controller 访问 searchContainer 以获取分页的开始和结束的方法......

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:34:25.920

这可能对您有用：

```
SearchContainer<Book> searchContainer = new SearchContainer<Book>(renderRequest, renderResponse.createRenderURL(), null, "there are no books"); 
```

要不然，

您可以从请求中获取参数：`delta=20`& `cur=2`
where`cur`是当前请求的页面，并且`delta`是页面上的项目总数。
有了这个，你可以计算开始（0,20,40，...）和结束（19,39,59，...），就像liferay[`SearchContainer`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-service/src/com/liferay/portal/kernel/dao/search/SearchContainer.java#L452)使用这种方法一样：

```
private void _calculateStartAndEnd() {
    _start = (_cur - 1) * _delta;
    _end = _start + _delta;

    _resultEnd = _end;

    if (_resultEnd > _total) {
        _resultEnd = _total;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:10:32.233

在您的控制器中创建一个合适的 SearchContainer 并将其添加到您的模型中。正如 Prakash K 已经说过的，这个 SearchContainer 可能看起来像这样：

```
SearchContainer<Book> searchContainer = new SearchContainer<Book>(renderRequest, renderResponse.createRenderURL(), null, "there are no books"); 
```

由于有两个参数 renderRequest 和 renderResponse 您不能使用 @ModelAttribute 注解将 SearchContainer 添加为模型属性。

那么JSP可以这样写：

```
<liferay-ui:search-container searchContainer="${model.searchContainer}" delta="${model.searchContainer.delta}" deltaParam="books_delta">
    <liferay-ui:search-container-results results="${model.searchContainer.results}" total="${model.searchContainer.total}"/>    

    <liferay-ui:search-container-row
        className="Book"
        keyProperty="primaryKey"
        modelVar="book">
        ...
    </liferay-ui:search-container-row>

    <liferay-ui:search-iterator searchContainer="${model.searchContainer}"/>

</liferay-ui:search-container> 
```

属性 deltaParam 可用于配置使用的 URL 参数

# c# - C# FakeItEasy 已被覆盖的假方法

> ID：12069938
> 
> 赞同：2
> 
> 时间：2012-08-22T09:19:22.673
> 
> 标签：c#, mocking, fakeiteasy

我在伪造我的班级时遇到问题：

A类有一个方法：

```
protected virtual int method(int argument)
{
    implementation
    return int;
} 
```

B 类扩展 A 类并覆盖该方法：

```
protected override int method(int argument)
{
      int result = base.method(argument);
      implementation
      return result + 1;
} 
```

我需要模拟 B 类并测试该`method`功能。问题是我需要避免调用该`base.method(argument)`函数。我只需要测试我的方法实现，并模拟该函数以返回一个 int。

我怎样才能用 FakeItEasy 做到这一点？还是其他模拟框架？

**更新**

问题解决：
制作功能：

```
int MethodCaller(int argument)
{
    base.method(argument);
} 
```

并在我的 B 类“方法”函数中执行它。比模拟 MethodCaller 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:35:25.820

您可以使用辅助类+另一种辅助方法来做到这一点，但我真的不喜欢这个解决方案：

```
public class A
{
    protected virtual int method(int argument)
    {
        return argument;
    }

    public int result(int argument)
    {
      return method(argument);
    }
}

public class B : A
{
    protected override int method(int argument)
    {
        return baseMetod(0) + 1;
    }

    protected virtual int baseMetod(int argument)
    {
      return base.method(argument);
    }
}

public class C : B
{
    protected override int baseMetod(int argument)
    {
      return 5;
    }
} 
```

所以在测试中你可以打电话`new C().Result(10)`

# php - 如何在 zend dojo 表单中添加 javascript 函数？

> ID：12069940
> 
> 赞同：1
> 
> 时间：2012-08-22T09:19:25.687
> 
> 标签：php, zend-framework, dojo

我正在与 Zend_dojo_form 战斗。

这是（部分）代码：

```
class Application_Form_RegistrationForm extends Zend_Dojo_Form {

    private $_user;
    private $_admin;
    private $_teamadmin;
    private $_newuser;
    private $_redirect;

    public function __construct($admin = false, $user = null, $redirect = '') {
        //blablabla
        parent::__construct();
    }

    public function init() {

        Zend_Dojo::enableForm($this);

        $this->setMethod('post');
        $this->setAttribs(array(
            'id' => 'formRegistration',
            'name' => 'formRegistration',
        ));

        //some decorators

        if ($this->_admin) {
            $this->addElement(
                //blabla + inline javascript
                'onChange' => "if(this == ".E_UserRole::OPERATOR.") dojo.query(\".perms\").style({ display:\"block\" });  else dojo.query(\".perms\").style({ display:\"none\" }); "
                )
            );
        }

        if (Application_Manager_Login::hasRole(E_UserRole::ADMIN)) {
                //add some display:none elements
                $permission_decorators  = array(
                    "DijitElement",
                    "Errors",
                    array(array("data" => "HtmlTag"), array("tag" => "td", "class" => "perms", "style"=> "display:none", )),
                    array("Label", array("tag" => "td", "class" => "perms", "style"=> "display:none", 'escape' => false, 'requiredSuffix' => ' <span class="red">*</span>')),
                    array(array("row" => "HtmlTag"), array("tag" => "tr"))
                );

                //hidden element
                $this->addElement(
                    'CheckBox',
                    'permission_content',
                    array(
                        'decorators' => $permission_decorators,
                        'label'          => 'Gestione contenuti',
                        'checkedValue'   => true,
                        'uncheckedValue' => false,
                        'checked'        => $this->_user->permission_content,
                    )
                );      
        }
        //submit button and other stuff
    }
} 
```

如您所见，当 user_role 更改时，我已经放置了一些内联 javascript 来显示/隐藏一些选项。

现在情况有点复杂。我可以继续编写内联 javascript，但**我想在开始时声明一个 js 函数，**然后从 onchange 事件中调用它。

由于此表单由多个控制器调用，因此我不会每次手动添加此功能

```
new RegistrationForm(); 
```

叫做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:59:53.203

好的，我想出了这个解决方案..

```
function addJavascript(){

        echo "<script>
        function toggle( e ){
            alert(e);
            if(e == ".E_UserRole::USER." || e == ".E_UserRole::ADMIN."){ 
                dojo.query(\".perms\").style({ display:\"none\" });
            }  
            else { 
                dojo.query(\".perms\").style({ display:\"block\" }); 
            }
        }   
        </script>
        ";

} 
```

我在类中声明了这个函数，我只是在开头调用它：

```
$this->addJavascript(); 
```

然后在 onChange 中我调用了我需要的切换函数（函数会变得更复杂，我需要这个解决方法以使其可读）：

```
$this->addElement(
       //blabla
       'onChange' => "toggle(this)",
       )
); 
```

希望这对其他人有帮助:)

# extjs - 为什么 ExtJS 3.4.0 中缺少定义方法？

> ID：12069943
> 
> 赞同：3
> 
> 时间：2012-08-22T09:19:33.477
> 
> 标签：extjs

在[ExtJS 3.4.0 API](http://docs.sencha.com/ext-js/3-4/#!/api/Ext)中，在 Ext singelton 上，据说有一个“定义”方法可以用来定义一个类。还需要注意的是，这是自 ExtJS 3 以来的新功能。

由于某种原因，这种方法不存在，我想知道是否有人知道为什么？

您可以通过浏览基本网格示例[页面](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/array-grid.html)、加载开发人员工具或 Firebug 并在控制台上编写“Ext.define”来查看自己，这会产生未定义的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:44:56.563

较短且可能是最准确的答案是因为文档错误。Extjs 3.4 没有 Ext.define 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:55:18.707

Ext.define 已添加到 2012 年 7 月 30 日发布的 ext 商业版本中。截至目前，只有支持客户才能访问此版本。[见发布公告](http://www.sencha.com/forum/showthread.php?234266)

# javascript - 选择除具有 ID 的父级的第一个子级之外的所有子级，然后应用操作

> ID：12069951
> 
> 赞同：0
> 
> 时间：2012-08-22T09:20:12.213
> 
> 标签：javascript, jquery

我想选择父元素的所有子元素（第一个除外），`jQuery`并且我有以下..

```
$("li:not(:first-child)"); 
```

但我不确定如何将它应用于特定的 parent `ID`，这样的东西会起作用吗？

```
$('#myID').("li:not(:first-child)"); 
```

如果是这样，那么我想在相应的标签*之前添加一个元素。*`<li>`那么我能做到这一点吗？

```
$('#myID').("li:not(:first-child)").before('<li>Test</li>'); 
```

我猜上面的东西是错误的，因为它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:21:42.387

关闭，只需传入选择器上下文：

```
$("li:not(:first-child)", "#myID") 
```

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

```
jQuery( selector [, context] )

selector: A string containing a selector expression

context: A DOM Element, Document, or jQuery to use as context 
```

编辑：我最初的回答假设您在孩子的 li 中没有更多的 li。如果您只想选择孩子，请使用`>`：

```
$("#myID > li:not(:first-child)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:24:57.083

简单：使用`:gt()` ^([帮助](http://api.jquery.com/gt-selector/))选择器：

就像这样做：**[演示小提琴](http://jsbin.com/iqahit/2/edit)**

```
$("#myID li:gt(0)").before('<li>Test</li>'); 
```

如果您担心速度:)：

```
$("#myID").find("li:gt(0)").before('<li>Test</li>'); 
```

或喜欢：**[演示小提琴](http://jsbin.com/iqahit/1/edit)**

```
$("#myID li:not(:first-child)").before('<li>Test</li>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:25:12.203

有不同的解决方案：

```
$("li:not(:first-child)", "#myID"); // see @SiGanteng answer

$("#myID li:not(:first-child)");

$("#myID").find("li:not(:first-child)"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T10:39:46.450

假设`#myID`是一个`ul`或`ol`元素，另一种可能的方式来获得所有孩子，但第一种是

```
$('#myID').children().slice(1) 
```

# python - 如何为 strptime() 格式化 +xxxx

> ID：12069952
> 
> 赞同：1
> 
> 时间：2012-08-22T09:20:12.253
> 
> 标签：python, time, formatting

> **可能重复：**
> [Python strptime() 和时区？](https://stackoverflow.com/questions/3305413/python-strptime-and-timezones)

我有像 [22/Aug/2012:13:08:27 +0400] 这样的字符串，如何使用 strptime 函数在时间元组中转换它？

```
time.strptime(t, '[%d/%b/%Y:%H:%M:%S +0400]') 
```

有效，但显然我也需要格式时间偏移。

当我尝试使用 %Z 格式化 +0400 时，我有：

```
ValueError: time data '[22/Aug/2012:13:08:27 +0400]' does not match format '[%d/%b/%Y:%H:%M:%S %Z]' 
```

当我尝试 %z

```
ValueError: 'z' is a bad directive in format '[%d/%b/%Y:%H:%M:%S %z]' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T09:26:34.073

确实，[`time.strptime()`](http://docs.python.org/library/time.html#time.strptime)不支持`%z`格式化程序。

该[`dateutil`模块](http://labix.org/python-dateutil/)包括一个支持解析时区的解析器。

# jdbc - sql 插件在生产服务器中不起作用，并且找不到 jdbc 驱动程序

> ID：12069955
> 
> 赞同：0
> 
> 时间：2012-08-22T09:20:20.583
> 
> 标签：jdbc, xpages-extlib

我在我的开发服务器中创建了一个通过 jdbc 驱动程序连接到 sql 的插件。我试图通过更新站点安装插件，但由于某种原因我不适合我。然后将插件复制到我服务器中的“domino\workspace\applications\eclipse\plugins”文件夹中。并且连接成功。然后我在我的生产服务器中复制了相同的插件，但是连接失败，它抛出错误说“它找不到驱动程序”。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:50:36.670

开发和生产服务器中的扩展库版本不同。后来我用最新版本的扩展库升级了我的生产服务器，问题就解决了。

# scheme - 如何在 Scheme (STK) 中省略参数

> ID：12069957
> 
> 赞同：1
> 
> 时间：2012-08-22T09:20:46.933
> 
> 标签：scheme

可能是一个简单的问题：我想包装 Scheme 的 "(format ..)" 函数以处理我的调试输出（包括格式字符串的包装）。

由于“格式”采用可变数量的参数，我的包装器也需要这样做，从而产生关于我如何告诉方案具有省略号参数以及如何引用它的问题。

我想到了这样的事情：

```
(define debugPrint
    (lambda (formatString ELLIPSIS_PARAMETER)
        (if debug
            (format #t (string-append "<!--" formatString "-->") ELLIPSIS_PARAMETER)
            ()
        )
    )
) 
```

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:17:59.880

为此有点表示法：

```
(define (debugPrint formatString . params)
 (if debug
   (apply format #t (string-append "<!--" formatString "-->") params)
   '())) 
```

请注意，`apply`点符号将所有参数包装在列表中，当您使用时`(debugPrint "~a: ~a" key name)`，`formatString`将绑定到`"~a: ~a"`并且`params`将绑定到`(key name)`（确保键和名称的值，而不是符号；）。

# javascript - Android，如何将活动中的参数插入 JavaScript？

> ID：12069962
> 
> 赞同：1
> 
> 时间：2012-08-22T09:21:00.063
> 
> 标签：javascript, android

在我的应用程序中，我有一个作为登录表单的活动。获取用户名和密码后，我需要打开一个 URL。

这个网页包括登录表单（用户名和密码字段），当用户点击提交按钮时，java-script函数处理的表单和表单内容将被提交到服务器。

但是，我需要绕过显示此页面，而是加载 URL，将用户 ID 和密码放入参数中，并代表用户调用 JavaScript 的 doSubmit() 函数，最终获得服务器响应。

我有用户名和密码，但我不知道如何将其插入 JavaScript。这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_loginweb);

        Log.i(TAG, "Try to create activity...");

        WebView webView = (WebView) findViewById(R.id.webView);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.loadUrl(LOGINPAGE_URL);

        webView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
    } 
}

public class JavaScriptInterface {
        Context mContext;

        /** Instantiate the interface and set the context */
        JavaScriptInterface(Context c) {
            mContext = c;
        }

        /** Show a toast from the web page */
        public void showToast(String toast) {
            Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:59:15.617

在您的 Javascript 界面上添加一些这样的方法：

```
public String getUserId() {
        //return userId value here
    }

public String getPassword() {
        //return password value here
    } 
```

从javascript方面：

```
//Startup stuff
$(document).ready(function(e) { 
    var userId = Android.getUserId();
    var password = Android.getPassword();

  $("#idofuserIdField").val(userId);
$("#idofPasswordField").val(password);

//callSubmitFunctionHere
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:35:32.283

我认为一种可能的解决方案是使用 HttpClient(apache-commons) 并直接从您的活动中联系服务器：

```
public static void login(String pUsername, String pPassword){
HttpClient client = new HttpClient();

// Create a method instance.
GetMethod method = new GetMethod(YOUR_LOGIN_URL_WHICH_IS_CALLED_FROM_JS);

// Provide custom retry handler is necessary
method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, 
        new DefaultHttpMethodRetryHandler(3, false));
method.setQueryString(new NameValuePair[] {      new NameValuePair("username", pUsername),new NameValuePair("password", pPassword)  });  

try {
  // Execute the method.
  int statusCode = client.executeMethod(method);

  if (statusCode != HttpStatus.SC_OK) {
    System.err.println("Method failed: " + method.getStatusLine());
  }

  // Read the response body.
  byte[] responseBody = method.getResponseBody();

  // Deal with the response.
  // Use caution: ensure correct character encoding and is not binary data
  System.out.println(new String(responseBody));

} catch (HttpException e) {
  System.err.println("Fatal protocol violation: " + e.getMessage());
  e.printStackTrace();
} catch (IOException e) {
  System.err.println("Fatal transport error: " + e.getMessage());
  e.printStackTrace();
} finally {
  // Release the connection.
  method.releaseConnection();
}} 
```

好吧，我认为这比这要多得多（使用 SSL、Postparams 和处理结果），但你会发现很多非常有用的教程。

# vim - vim设置'地图 ：！Python ％ ' 在终端执行后自动返回vim

> ID：12069963
> 
> 赞同：4
> 
> 时间：2012-08-22T09:21:09.017
> 
> 标签：vim

我添加`map<F12> :!python %<cr>`到`~/.vimrc`. 但是，执行此命令后，当我按下 键时，它会自动退出`<F12>`。在正常情况下，它应该停在一行`Press ENTER or type command to continue`，但在我的情况下，它只是跳过这一行并返回 vim。好像有人偷偷按了ENTER。最令人惊讶的是它只发生在终端。当我手动输入 `:!python % ' 或使用 gvim 时，一切正常。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:05:01.050

在您能够阅读消息之前，终端版本可能正在重绘屏幕。您可以尝试设置`'lazyredraw'`延迟重绘。

一种解决方法是设置`'lazyredraw'`函数调用并将其添加`getchar()`到映射中：

```
 function! RunPython()
     let s:save_lz = &lazyredraw   " save 'lazyredraw' setting
     set lazyredraw
     !python %
     call getchar()                " stop waiting pressing a key
     let &lazyredraw = s:save_lz   " restore 'lazyredraw'
  endfunction
  map <F12> :call RunPython()<CR> 
```

* * *

编辑：

您也可以考虑为此任务使用插件，例如[“SingleCompile：使编译或运行单个源文件更方便”](http://www.vim.org/scripts/script.php?script_id=3115)。

# properties - 属性文件的拼写检查

> ID：12069964
> 
> 赞同：1
> 
> 时间：2012-08-22T09:21:09.110
> 
> 标签：properties, spell-checking

是否有任何命令行实用程序，可以在英文属性文件中进行拼写检查。

例如。

属性文件将包含类似，

com.hello.world=你好世界。

com.module.home=hoem。

我需要找出错误的单词“hoem”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T17:03:22.233

在类 unix 系统上，您可以在命令行上使用工具组合。一个例子是使用**egrep**过滤掉以注释字符开头的行，**cut**以在等号上拆分属性文件并输出第二个字段（右侧），以及一个到拼写检查器（如**spell** ）的管道。

给定这个名为 resources.properties 的输入文件：

```
# Application resources
com.hello.world = Hello world.
com.module.home = hoem.
com.module.fruits = apple, bananananana, cranberry, grape, orange, strawburry 
```

以下是拼写检查“resources.properties”的命令示例及其输出：

```
[user@host ~]$ egrep -v '^#' resources.properties | cut -d= -f2 | spell
bananananana
hoem
strawburry 
```

该`egrep -v '^#'`命令过滤掉注释（以井号开头的行）。该实用程序的`-d=`参数`cut`将字段分隔符设置为等号，并`-f2`指示命令输出第二个字段 - 等号的右侧，也就是要进行拼写检查的属性值/字符串。

在许多系统上，“spell”命令由[aspell](http://aspell.net/man-html/)实用程序提供。直接调用 aspell 并提供拼写更正建议的替代命令行：

```
egrep -v '^#' resources.properties | cut -d= -f2 | aspell pipe 
```

# php - 处理级联碰撞？

> ID：12069965
> 
> 赞同：0
> 
> 时间：2012-08-22T09:21:15.043
> 
> 标签：php, mysql, user-experience, cascade, collision

我有一个设置，我们有类别，

每个类别都有一个标题和一个 parent_id。

创建/编辑类别时，我们会检查以确保没有具有相同 parent_id 的类别具有相同的名称。

这很容易。但现在我正在努力删除这些类别。

类别可以有无限的级别。因此，如果我们删除一个类别，它的子类别将被移至父类别。这工作正常，但我不知道在发生碰撞时该怎么做。

我是否应该在删除页面上进行预检查并禁用删除按钮并具有以下内容：

> 此类别无法删除，因为它会在**parent_of_current->something**类别和**current->something**类别之间产生冲突，请删除或重命名这些类别之一。

或者我应该有一个警告：

> **此操作将在parent_of_current->something**类别之间创建冲突，然后**current->something**类别继续也会删除**current->something**类别！

或者还有什么我可以做的吗？

老实说，我喜欢第二种选择，但我认为如果它产生另一次碰撞，它很可能会在链条的下游遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:43:37.427

我会重命名违规类别以表明它需要注意。即将Sales 移动到Sales 已经存在的地方，它变成Sales-1 或Sales-2，因此用户需要重命名它，并防止数据丢失。（就像将文件复制并粘贴到同一目录中）这样您就可以分辨出哪个是原始文件。

# mysql - 如何优化以下查询？

> ID：12069980
> 
> 赞同：6
> 
> 时间：2012-08-22T09:21:59.150
> 
> 标签：mysql, sql

```
SELECT r.*, u.username 
FROM `reservation` AS r JOIN 
     `users` AS u 
WHERE u.id = r.user_id 
AND   DATE(r.bx_date) >= DATE('2012-08-22') 
AND   DATE(r.bx_date) <= DATE('2012-08-22') 
AND   r.status='1' 
ORDER BY r.id desc 
```

bx_date - 预订日期。

运行此查询需要 8 秒以上。我在预订表中有超过 500,000 条记录，在用户表中有 40,000 条记录。

我没有对我的数据库表进行任何优化。什么都没有。仅限PK。如何优化此查询？有哪些选项可以提高此数据库的性能。

谢谢

订桌：

```
CREATE TABLE `reservation` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `user_id` int(10) unsigned NOT NULL COMMENT 'User ID',
 `tx_id` varchar(15) NOT NULL COMMENT 'Transaction ID',
 `tx_date` datetime NOT NULL COMMENT 'Transaction Date',
 `bx_date` date NOT NULL COMMENT 'Booking Date',
 `theater_id` int(10) unsigned NOT NULL COMMENT 'Theater ID',
 `movie_id` int(10) unsigned NOT NULL COMMENT 'Movie ID',
 `showtime_id` int(10) unsigned NOT NULL COMMENT 'Show Time ID',
 `category_id` int(10) unsigned NOT NULL COMMENT 'Category ID',
 `full_tickets` tinyint(2) unsigned NOT NULL COMMENT 'Number of Full Tickets',
 `half_tickets` tinyint(2) unsigned NOT NULL COMMENT 'Number of Half Tickets',
 `no_seats` tinyint(3) unsigned NOT NULL COMMENT 'No of Seats',
 `full_ticket_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT 'Full Ticket Price',
 `half_ticket_price` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT 'Half Ticket Price',
 `amount` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT 'Total Amount',
 `method` tinyint(1) unsigned NOT NULL COMMENT 'Payment Method 1=web 2=mobile 3=theater',
 `paymentgateway_id` int(10) unsigned NOT NULL COMMENT 'Payment Gateway ID',
 `payment_type` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '0 = Cash 1=Credit Card',
 `status` tinyint(1) unsigned NOT NULL COMMENT 'Status 0=provisional 1=booked 2=canceled 3=auto canceld',
 `comment` text,
 `reservation_type` tinyint(1) unsigned NOT NULL COMMENT 'Reservation Type 0=complimentary 1=advamce booking 2=Mobile Booking, 3 - Theater Offline Booking',
 `complimentary_type` tinyint(1) unsigned NOT NULL COMMENT '0=none 1=loyalty rewards 2=marketing 3=promotional 4=show blocking 5=vip',
 `description` mediumtext NOT NULL COMMENT 'Complimentary Description',
 `title` varchar(10) DEFAULT NULL COMMENT 'Title',
 `fname` varchar(255) DEFAULT NULL COMMENT 'First Name',
 `lname` varchar(255) DEFAULT NULL COMMENT 'Last Name',
 `gender` tinyint(1) unsigned DEFAULT NULL COMMENT 'Gender 0=male 1=female',
 `dob` date DEFAULT '0000-00-00' COMMENT 'Date of Birth',
 `nic` varchar(10) DEFAULT NULL COMMENT 'NIC no',
 `address` text COMMENT 'Address Line 1',
 `city` varchar(255) DEFAULT NULL COMMENT 'City',
 `district` varchar(50) DEFAULT NULL COMMENT 'District ',
 `country` varchar(255) DEFAULT NULL COMMENT 'Country',
 `mobile` varchar(15) DEFAULT NULL COMMENT 'Mobile No',
 `contact_phone` varchar(15) DEFAULT NULL COMMENT 'Fixed Land Phone Number',
 `email` varchar(255) DEFAULT NULL COMMENT 'Email Address',
 `timer` int(4) unsigned NOT NULL,
 PRIMARY KEY (`id`),
 KEY `user_id_index` (`user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=555706 DEFAULT CHARSET=utf8 
```

表用户：

```
CREATE TABLE users ( id int(11) NOT NULL AUTO_INCREMENT,
 title varchar(100) NOT NULL,
 name varchar(255) NOT NULL DEFAULT '',
 last_name varchar(255) NOT NULL,
 username varchar(150) NOT NULL DEFAULT '',
 email varchar(100) NOT NULL DEFAULT '',
 password varchar(100) NOT NULL DEFAULT '',
 usertype varchar(25) NOT NULL DEFAULT '',
 block tinyint(4) NOT NULL DEFAULT '0',
 sendEmail tinyint(4) DEFAULT '0',
 registerDate datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 lastvisitDate datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 activation varchar(100) NOT NULL DEFAULT '',
 params text NOT NULL,
 gender varchar(6) NOT NULL,
 date_of_birth date NOT NULL,
 nic_no varchar(10) NOT NULL,
 address varchar(255) NOT NULL,
 city varchar(100) NOT NULL,
 district varchar(100) NOT NULL,
 mobile varchar(15) NOT NULL,
 subscribe_sms tinyint(1) NOT NULL,
 contact_phone varchar(15) NOT NULL,
 newsletter_subscribe tinyint(1) NOT NULL,
 PRIMARY KEY (id),
 UNIQUE KEY username (username),
 KEY usertype (usertype),
 KEY idx_name (name),
 KEY idx_block (block),
 KEY email (email)) 
 ENGINE=InnoDB AUTO_INCREMENT=34265 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:36:45.667

首先，我会像这样重写查询：

```
SELECT r.*, u.username 
FROM 
`reservation` AS r 
INNER JOIN `users` AS u ON u.id = r.user_id 
WHERE 
r.bx_date = '2012-08-22' /* or use BETWEEN when you really have a range */
AND   r.status='1' 
ORDER BY r.id desc 
```

INNER JOIN 只是与您的语法不同，但它的作用相同。在我看来，这个更不容易出错并且更友好，因为您不必在 WHERE 子句中区分什么是连接，什么不是。

由于 bx_date 列是类型`DATE`，因此您不需要该函数`DATE()`再次从中生成日期。通常，在列上使用函数会阻止使用索引（如果该列上存在）。

为了让事情一开始就简单，只需将索引添加到经常用于连接或在`WHERE`子句中使用的列。

在您的情况下，用于的列`JOIN`已经是主键，因此它们隐含地已经有一个索引。

您可以像这样添加索引：

```
ALTER TABLE reservation ADD INDEX idx_reservation_bx_date (bx_date); /*if I remember correctly :) */ 
```

欲了解更多信息，请阅读[此处](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)。

您还可以使用复合索引，这是多列的索引。

**更新**感谢 ypercube 在评论中的建议：

```
ALTER TABLE reservation ADD INDEX idx_reservation_bx_date_status (bx_date, status); /*if I remember correctly :) */ 
```

`EXPLAIN`然后，您可以通过在查询前面放置一个来检查是否使用或使用了什么索引。当然，你必须衡量、衡量和衡量一个指数是否好。过度索引也不是一个好主意，因为 INSERTS 和 UPDATES 变得慢得多。要查看索引是否固定您的查询，您必须确保它不在某处的缓存中，因此只需`SQL_NO_CACHE`像这样测试执行您的查询：

```
SELECT SQL_NO_CACHE r.*, u.username 
FROM 
`reservation` AS r 
INNER JOIN `users` AS u ON u.id = r.user_id 
WHERE 
r.bx_date = '2012-08-22' /* or use BETWEEN when you really have a range */
AND   r.status='1' 
ORDER BY r.id desc; 
```

--

```
</UPDATE> 
```

另一个规则是，当表中有很多行时，索引具有很少不同值的列不是一个好主意。您在预订中的状态列只有 4 个不同的值。在此列上添加索引会使索引无用。它甚至会变得更糟，因为 MySQL 可能会使用索引，然后必须进行额外的查找才能找到与索引位置对应的实际数据。

关于它的一个很好的读物是[Use-the-index-Luke](http://use-the-index-luke.com/welcome)

# scope - Autofac 和 Web API 范围

> ID：12069981
> 
> 赞同：4
> 
> 时间：2012-08-22T09:22:01.453
> 
> 标签：scope, asp.net-web-api, autofac

早些时候我看到了这个：

```
.InstancePerApiRequest(); 
```

现在我只得到了这个：

```
.InstancePerHttpRequest(); 
```

autofac 是否删除了 API 范围？我有参考 Autofac.Integration.WebApi 但此扩展不可用。InstancePerHttpRequest 和 InstancePerApiRequest 有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T15:06:48.473

InstancePerApiRequest 是 Web API 集成的一部分，InstancePerHttpRequest 是 MVC 集成的一部分。这些实际上都将相同的标签应用于生命周期范围。这样做是因为您可能拥有同时依赖于 Web API 和 MVC 控制器的服务。

# php - PhpExcel - 如何在 N 行之后插入同一行？

> ID：12069986
> 
> 赞同：12
> 
> 时间：2012-08-22T09:22:17.243
> 
> 标签：php, phpexcel

我有 php 模板。这是一个空表（T0 行），底部有一些页脚。从 php 我尝试填充表格，但如果我有 T1 行（T1 > T0）那么麻烦出现了。

我相信空表应该包含一个空行。我们知道这个行号。然后我们将这一行（插入相同的行）复制 T1 次并填充空表。页脚向下。一切都会好起来的

给我一个例子，我怎么能做到这一点。谢谢你。

PHPExcel 1.7.6

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T13:44:19.187

只需复制@markBaker 所说的话（以便我们可以将解决方案设置为答案）：

```
//Insert 10 new rows between rows 1 and 2 
$objPHPExcel->getActiveSheet()->insertNewRowBefore(2,10); 
```

现在将第 2 行的样式应用于插入的行：

```
$objPHPExcel->getActiveSheet()->duplicateStyle($objPHPExcel->getActiveSheet()->getStyle('A1'),'A2:A10'); 
```

# c# - 收藏 类和它的用途

> ID：12069987
> 
> 赞同：27
> 
> 时间：2012-08-22T09:22:18.490
> 
> 标签：c#, .net, collections

我遇到了以下代码：

```
var collection = new Collection<string>(); 
```

我没有看到 Collection 类使用太多，也找不到太多关于它的用途的信息。查看 .NET Framework 源代码，它几乎只是一个 List 的包装器，因为它存储了一个 List 成员字段。它的构造函数如下：

```
public Collection()
{
  this.items = (IList<T>) new List<T>();
} 
```

它还实现了IList。因此，您可以将 Collection 声明为：

```
IList<string> collection = new Collection<string>(); 
```

对我来说，这在功能上等同于创建一个列表：

```
IList<string> collection = new List<string>(); 
```

那么你什么时候想在你自己的代码中在 List 上使用它呢？我看到它是其他 .NET 集合的基类，但为什么它们会将其作为**公共具体**（而不是内部和/或抽象）包含在内？

* * *

*关于可能重复的评论*——相关问题的答案似乎说 Collection 类应该用作基类。我真正要问的是：

1.  如果在您自己的代码中使用，为什么不使用 List 作为基类呢？
2.  在你自己的代码中实例化一个新的 Collection 来代替 List 真的有意义吗？
3.  如果它真的**只是**提供作为一个基类，**为什么它不是抽象的**？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T09:28:41.110

我认为[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms132397.aspx)本身已经列出了最重要的方面（我强调）：

> Collection 类**提供了受保护的方法**，可用于**在** 添加和删除项目、清除集合或设置现有项目的值时**自定义其行为。**

和

> 给实施者的注意事项
> 
> 提供此基类是为了使实现者更容易创建自定义集合。**鼓励实现者扩展这个基类而不是创建自己的基类。**

**[编辑 ypur 更新问题]**

> *1\. 如果在你自己的代码中使用，为什么不使用 List 作为基类呢？*

`Collection<T>`提供了一些受保护的方法，因此您可以轻松地`override`进行行为并完全注册自己的业务逻辑，例如：

*   `ClearItems()`
*   `InsertItem()`
*   `RemoveItem()`
*   `SetItem()`

`List<T>`不提供它们并且几乎没有受保护的方法来覆盖行为，这使得定制变得更加困难。

> *2\. 在你自己的代码中初始化一个新的 Collection 来代替 List 真的有意义吗？*

不，不仅仅是为了初始化一些集合。如果您需要它*作为实现您自己的逻辑的基类，*请使用它。

这将取决于您自己的业务需求。对于日常开发工作中的几乎所有情况，现有的和众多的集合应该已经提供了您需要的东西。有类型安全的和无类型的集合，线程安全的集合，以及任何你能想到的。

尽管如此，有一天可能需要实现一种集合类型，该集合类型在允许添加/更新/删除其中的任何项目之前进行某些验证检查，或者以特殊方式处理移动到仅人口稀少的列表中的下一个项目. 你永远不知道客户可能有什么想法。

在这种情况下，创建自己的集合类型可能会有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T09:27:10.877

[Collection(T)](http://msdn.microsoft.com/en-us/library/ms132397.aspx)类是一大堆其他集合类的基类。[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类是为速度优化的类，而 Collection 类是为可扩展性而设计的。

当您查看 的成员时`Collection(T)`，您会发现它包含一些该类没有的其他受保护的虚拟方法（如[`InsertItem`](http://msdn.microsoft.com/en-us/library/ms132412.aspx)） 。`List(T)`

事实上，我已经创建了 Collection 类的一个实例。我想我只会将此类型用作方法签名中的参数，只是为了不将方法与集合的实现紧密结合（如果可能的话）。

要回答您的问题：

1.  我将`Collection(T)`用作基类，因为该类的意图是用作其他集合类型的基类。它为您提供了更大的灵活性（请参阅受保护的虚拟方法`InsertItem`，`RemoveItem`和`SetItem`）

2.  当需要一个集合时，我会使用 `List(T)`该类的一个实例，因为它针对速度进行了优化。

3.  实际上，我想知道为什么他们没有将`Collection(T)` 类抽象化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-24T07:13:56.303

正如 Krzysztof Cwalina[所说](http://blogs.msdn.com/b/kcwalina/archive/2005/09/26/474010.aspx)：

> •List 不是为扩展而设计的。即你不能覆盖任何成员。例如，这意味着从属性返回 List 的对象将无法在修改集合时收到通知。Collection 允许您覆盖 SetItem 受保护的成员，以便在添加新项目或更改现有项目时获得“通知”。
> 
> •List 有很多在许多场景中不相关的成员。我们说 List 对于公共对象模型来说太“忙”了。想象一下 ListView.Items 属性返回 List 的所有内容。现在，看看实际的 ListView.Items 返回类型；它更简单，类似于 Collection 或 ReadOnlyCollection。

出于这个原因，FxCop 的规则 CA1002 还告诉您不要公开通用列表，而是使用 Collection。另请参阅此[代码分析团队博客文章](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/585476.aspx)，了解 FxCop 规则以及为什么返回 Collection 而不是 List。

因此，对于问题 1 和 2，请参见上文。至于问题三，它不仅仅是用作基类。您应该能够实例化它并将其也用作返回类型，因此它不是抽象的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T19:00:27.613

我不太喜欢回答自己的问题，但就 Q3 而言，我相信我理解其中的原因。我在查看Bas Paap 的回答中引用的[这个链接时得到了它。](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/585476.aspx)

简而言之，Collection 类不是抽象的原因是因为您可能希望以后选择从该类派生。同时，您可以将其用作返回类型并直接实例化它。[该链接](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/585476.aspx)显示了这种情况的代码示例。

我赞成所有其他我认为解决问题中提出的问题的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:42:23.070

尽管枚举接口提供了对集合的只进迭代，但它们不提供确定集合大小、按索引访问成员、搜索或修改集合的机制。对于这样的功能，框架提供了`ICollection`、`IList`和`IDictionary`接口。

`ICollection<T>`提供中等功能（例如`Count`属性）。

`IList<T>`并且它们的非通用版本提供了最大的功能（包括按索引的“随机”访问）。

您很少需要*实现*这些接口中的任何一个。在几乎所有需要编写集合类的情况下，您都可以改为子类`Collection<T>`等。

我希望这有帮助。

# javascript - 用空格替换单引号和其他符号

> ID：12069988
> 
> 赞同：1
> 
> 时间：2012-08-22T09:22:19.130
> 
> 标签：javascript, regex

我正在尝试使用 javascript 正则表达式函数替换符号。我找不到替换单引号的方法。我使用的代码是`.replace(/([.?*&+^$[\]\\(){}|-])/g, "");`

如何在其中添加单引号转义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:27:17.733

只需`'`在字符类的末尾添加，它将被删除。由于破折号，它会引发错误`-`。它试图定义一个范围（你**可以**这样做`[A-Z]`，但当然`|-'`没有意义）。因此，您的最终正则表达式：`.replace(/([.?*&+^$[\]\\(){}|\-'])/g, "");` Is 转义破折号，使其成为文字破折号而不是范围字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:30:02.687

我建议您通过转义要替换的任何字符来创建正确的正则表达式。这样您就可以毫无困难地将任何字符添加到此列表中。

这将给出简单的命令，如：

```
.replace(/([\.\?\*\&\+\^\$\[\]\\\(\)\{\}\|\-\'])/g, "") 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T09:31:47.940

反转表达式可能更容易，并突出显示所有不是有效字符的内容。

```
string.replace(/([^a-zA-Z0-9])/, ''); 
```

在字符映射的开头添加 ^ 会反转字符类。所以这将删除任何非字母数字字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T09:26:02.297

添加`'`到括号表达式的开头：

```
.replace(/(['.?*&+^$[\]\\(){}|-])/g, ""); 
```

# php - sql将结果集加入单行

> ID：12069989
> 
> 赞同：1
> 
> 时间：2012-08-22T09:22:21.373
> 
> 标签：php, sql, join

我有一个“个人资料”表

1.  用户身份
2.  钥匙
3.  核心价值

显然，当用户登录时，userid 可以有很多行，我将 userdata 存储在 session_var 中，查询使用 3 个表：

1.  用户
2.  简介
3.  打开ID

我有这个，

```
$sql = "SELECT op.provider, g . * , gp . *, CONCAT(g.firstname, ' ', g.lastname) AS fullname
    FROM openid AS op
    INNER JOIN users AS g ON g.userid = op.userid
    INNER JOIN profiles AS gp ON gp.userid = op.userid
    WHERE op.openid =$openid"; 
```

但它返回多行重复数据取决于“配置文件”表中有多少行

这不是我想要的。如果可能的话，我需要一行中的所有数据

什么是最有效的解决方案？我还需要将它存储在 php 数组中。php如何处理重复键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:24:27.800

你可能想要类似的东西`distinct`：

```
$sql = "SELECT distinct op.provider, g . * , gp . *, CONCAT(g.firstname, ' ', g.lastname) AS fullname
    FROM openid AS op
    INNER JOIN users AS g ON g.userid = op.userid
    INNER JOIN profiles AS gp ON gp.userid = op.userid
    WHERE op.openid =$openid"; 
```

或者您将 a`group by`与您希望将数据分组的列一起使用。

最后，如果您想将多行数据返回到单个字段（但它们不同），您可以使用 mysql`group_concat()`函数来执行此操作：

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
+------+-------+
3 rows in set (0.00 sec)

mysql> select group_concat(id) as IDs, group_concat(title) as Titles from first;
+-------+----------------+
| IDs   | Titles         |
+-------+----------------+
| 1,2,3 | aaaa,bbbb,cccc |
+-------+----------------+
1 row in set (0.00 sec) 
```

好的，我在示例表中添加了一些额外的行，如下所示：

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    5 | eeee  |
+------+-------+
5 rows in set (0.00 sec) 
```

现在 a`group_concat`返回：

```
mysql> select group_concat(id) as IDs, group_concat(title) as Titles from first;
+-----------+---------------------+
| IDs       | Titles              |
+-----------+---------------------+
| 1,2,3,4,5 | aaaa,bbbb,cccc,eeee |
+-----------+---------------------+
1 row in set (0.00 sec) 
```

但是您可以`coalesce()`像这样使用该函数添加一个不错的占位符：

```
mysql> select group_concat(id) as IDs, group_concat(coalesce(title,'NoValueSpecial')) as Titles from first;
+-----------+------------------------------------+
| IDs       | Titles                             |
+-----------+------------------------------------+
| 1,2,3,4,5 | aaaa,bbbb,cccc,NoValueSpecial,eeee |
+-----------+------------------------------------+
1 row in set (0.01 sec) 
```

该`coalesce()`函数查看多个列或您像我一样手动输入的值，并返回一个很好的标识符来发现您丢失的字段。它将从左到右评估空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T09:50:17.417

您可以使用[GROUP CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数创建一个字符串，PHP 之后可以使用[parse_str](http://www.php.net/manual/en/function.parse-str.php)解析该字符串：

```
$sql = "SELECT distinct op.provider, g . * , GROUP_CONCAT(gp.`key` , '=' , gp.key_value SEPARATOR '&'), CONCAT(g.firstname, ' ', g.lastname) AS fullname
    FROM openid AS op
    INNER JOIN users AS g ON g.userid = op.userid
    INNER JOIN profiles AS gp ON gp.userid = op.userid
    WHERE op.openid =$openid"; 
```

配置文件列的输出类似于：“key1=value1&key2=value2”。

# c++ - C++ 重载运算符 == 和 < 之间的区别

> ID：12069991
> 
> 赞同：2
> 
> 时间：2012-08-22T09:22:26.070
> 
> 标签：c++, operator-overloading

`==`有人可以解释一下重载和之间有什么区别`<`吗？

例如，如果我使用地图：

```
map<Type, int> a();

friend bool operator<(const Type& lhs, const Type& rhs);

friend bool operator==(const Type& lhs, const Type& rhs); 
```

当我调用时，我实现了这两个运算符：

```
a.find(value); 
```

`==`正在调用的运算符函数？我想不是。我调试并看到它`<`被称为，但为什么呢？的运算符函数的行为应该是什么`<`？

我来自`equals`调用该方法的Java，并且很容易理解该行为。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T09:36:52.123

`operator==`重载`==`运算符（没有其他）；`operator<` 重载`<`运算符（而不是其他运算符）。

`std::map`被定义为默认使用`std::less`（并且仅`std::less`），并且`std::less`被定义为`<`默认使用。但是，一般来说，我建议**不要**重载`operator<`，除非有序比较对您的类有意义，在这种情况下，您应该以连贯的方式重载所有六个比较运算符。否则，您可以将比较函数类型指定为 ; 的附加模板参数`std::map`。比较功能对象应该定义严格的弱排序关系。如果该类型被设计为用作键，但排序仍然纯粹是任意的，您可能会专门化`std::less`.

至于Java，没有运算符重载，显然不能使用`<`; 默认情况下，`SortedMap`（Java 等价于`std::map`）要求键是 Comparable 的，然而，这又需要一个`compare` 函数，该函数返回一个 value或0 `<`，具体取决于 is或not other。我承认我觉得这更合乎逻辑，但差异非常非常小。（C++ 决定背后的基本原理是内置类型，如or 可以用作键。在 Java 中，您必须将它们装箱。）`==``>``this``<``==``>``int``double`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T09:41:14.533

C++ 标准对[std::map](http://en.cppreference.com/w/cpp/container/map)的要求意味着它被实现为自平衡二叉搜索树。这意味着元素之间必须进行某种排序比较。在 的情况下`std::map`，要求是[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，默认是小于比较。这就是在二叉树中排列元素所需的全部内容，当一个元素（称为A）不小于另一个元素（称为B）时满足相等条件，反之亦然，即B是不少于 A。可以使用相等比较，但这会为不一致打开一些空间。如果您查看哈希表，例如[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)，您会发现确实需要进行相等比较，尽管这只是为了解决冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:25:07.083

需要操作符`<`，因为查找操作基于 map 的内部实现（在树上）。为了能够比线性更好地找到复杂性，它不必与每个元素进行比较。

*类似*算法的一个很好的例子是二分[搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)。正如您在示例伪代码中看到的那样，它根本不使用身份运算符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T09:25:53.420

因为`std::map<T, U>`有这样的行为，它使用`std::less<T>`仿函数或你的仿函数进行许多操作。

行为可能不同，但通常会检查 lhs 是否小于 rhs。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T09:27:04.787

可能是因为 map 是作为平衡树实现的。如果您需要哈希表，请使用 unordered_map。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T09:39:23.233

`std::map`是一个有序的容器，因此它需要一个`operator <`来定义元素的顺序。

`operator ==`不需要单独的，因为它是根据 实现的`operator <`，`a==b`相当于`!a<b && !b<a`

# sql - 具有可变列的 SQL Pivot

> ID：12069992
> 
> 赞同：3
> 
> 时间：2012-08-22T09:22:28.130
> 
> 标签：sql, oracle, pivot

我有两个表说**人**（person_id，name）和另一个表**联系人**（person_id，phone_type，phone_no）。

```
人
-----------------
person_id 姓名
-----------------
P1 ABC
P2 XYZ

```

```
联系人
--------------------------------
person_id phone_type phone_no
--------------------------------
P1 电话1 12345
P1 电话2 23455
P2电话1 67897
P2电话3 89786

```

我需要创建一个看起来像的视图 v_pc

```
v_pc
person_id 姓名 phone1 phone2 phone3
-------------------------------------
P1 美国广播公司 12345 23455  
P2 Xyz 67897 89786

```

即，联系人表的行被旋转以形成视图的列（列数将根据“phone_types”列的不同值而变化）。

有什么办法可以让联系人表旋转，但使用动态旋转子句，比如

```
选择 *
 从 （
    选择
        person_idd,
        电话类型，
        电话号码
    来自联系人
 ) PIVOT (MAX(phone_no) FOR phone_type IN ('phone1','phone2','phone3'))

```

我还尝试在带有数据透视的情况下使用 XML 子句，因此使用动态数据透视子句，即提取 XML 中的结果，然后使用 XMLTABLE 重新创建列。但我无法达到预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:00:16.373

您可以使用动态 SQL（假设您有一个 SYS_REFCURSOR 类型的绑定变量 v_cur）：

```
declare
  v_sql varchar2(32000);
  v_phonetypes varchar2(32000);
begin
  -- base SQL statement
  v_sql := 'SELECT *
    FROM (
      SELECT
        person_id,
        phone_type,
        phone_no
      FROM contacts
    ) PIVOT (MAX(phone_no) FOR phone_type IN (';

  -- comma-separated list of phone types
  select 
    listagg('''' || phone_type || '''', ',') within group (order by phone_type) 
  into v_phonetypes 
  from (select distinct phone_type from contacts);

  v_sql := v_sql || v_phonetypes || '))';
  dbms_output.put_line(v_sql);
  -- execute query 
  open :v_cur for v_sql;
end; 
```

LISTAGG() 需要 11gR2，但由于您使用的是 PIVOT，所以我猜您还是在使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:39:18.933

为什么不尝试使用动态 SQL 创建视图？只需按照 Frank 在上面创建 PIVOT 查询的相同方式设计 CREATE 语句。然后执行两者，首先是 CREATE 语句，然后是 PIVOT 查询。

# c# - 如何遍历 .NET MVC 模型中的字段

> ID：12069994
> 
> 赞同：0
> 
> 时间：2012-08-22T09:22:30.333
> 
> 标签：c#, asp.net-mvc

我正在构建一个 MVC 远程共享点应用程序并编写了将 ListItemCollection 导出为 JSON 的代码，而无需知道字段名称。如何对作为表单数据从视图传递到控制器的自定义模型执行相同的操作？这是 JSON 导出代码的片段，它显示了我想要做的事情

```
foreach (ListItem oListItem in IndListItem)
{
    int fcount =oListItem.FieldValues.Keys.Count;
    for (int j = 0; j < fcount; j++)
    {                    
        fname= oListItem.FieldValues.Keys.ElementAt(j);
        fval = HttpUtility.HtmlEncode(oListItem.FieldValues[fname].ToString());
    }
    json += '"' + fname + '"' + ":" + '"' + fval + '"' + ",";
} 
```

我想实现类似的东西

```
sp.ListItem oListItem = list.GetItemById(id);
foreach (xField in formdata)
{
    oListItem[xField] = formdata.getField(xField).ToString();
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:17:06.627

您不必自己生成 JSON。你有几个选择：

在您的 MVC 操作中，返回一个 JsonResult。

```
public ActionResult MyListAsJson() { 
   /* get list */
   return Json(IndListItem);
} 
```

使用[JavascriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var serializer = new JavascriptSerialzer();
var json = serializer.Serialize(IndListItem); 
```

其他常见的替代品包括[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)和[Json.NET](http://nuget.org/packages/newtonsoft.json)