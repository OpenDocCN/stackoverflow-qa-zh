# StackOverflow 问答 000426000-000426999

# c# - 将 MSSQL GetUTCDate() 转换为 PHP/Unix/MySQL Ticks

> ID：426001
> 
> 赞同：1
> 
> 时间：2009-01-08T21:18:49.810
> 
> 标签：c#, .net, php, mysql, sql-server

我使用 MsSQL 提供的 GetUTCDate() 函数将 DateTime 插入 MsSQL。

我需要在 C# 中转换时间以将其显示为 Unix / MySQL 整数，以便最终可以使用 PHP 对其进行操作。

我相信 Unix / PHP / MySQL 滴答声从 1970 年 1 月 1 日开始，但我不确定如何将等效的 MsSql / C# 时间转换为这个 unix 标准。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T22:48:47.167

你可以在 MSSQL 中相对容易地做到这一点。对于当前日期：

```
SELECT DATEDIFF(s, CONVERT(DATETIME, '1970-01-01'), GETUTCDATE()) 
```

返回自 1970 年 1 月 1 日以来的 INT 秒数，即 Unix 时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T21:22:33.937

```
DateTime dt = something; //Get from db

TimeSpan ts = dt - new DateTime(1,1,1970); // off the top of my head, check order of params

long ticks = ts.TotalTicks; // again off the top of my head, check property name 
```

# database - 您可以在生产系统中使用对象数据库吗？

> ID：426003
> 
> 赞同：4
> 
> 时间：2009-01-08T21:19:22.027
> 
> 标签：database, oop, object-oriented-database

对象数据库很少使用，尽管它们提供了一种无需 SQL 的方式，我认为这是它自己的好处。

然而，我在生产系统中从未见过它们。对象数据库有什么根本错误吗？我可以在生产系统中使用对象数据库吗？

*编辑*：所以，也许我应该承认我喜欢对象数据库。我无法真正理解为什么它们没有更频繁地使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T21:23:09.180

当然可以，只要稳定。问题是相对缺乏高质量的面向对象数据库系统，以及大多数人甚至不知道它是什么的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T21:35:45.830

许多财富 500 强公司（尤其是嵌入式应用程序）[大量使用](http://www.db4o.com/about/customers/)[db4o](http://www.db4o.com)，所以我不会说 OODB 不用于现实世界的生产系统

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T03:15:45.957

有使用 GemStone OODB 编写的[生产系统。](http://gemstone.com/partners/customers.php)它是一个分布式的、持久的 Smalltalk 系统。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-08T21:37:17.170

听说过[缓存](http://www.intersystems.com/)吗？EpicSystems[将](http://www.epicsystems.com)其用于其企业健康记录 (EHR) 产品。很多生产车间都在使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-27T19:56:41.993

这里真正的问题是您是否需要工具来支持您的数据库。我所说的工具是指报告、数据迁移、数据挖掘等。您需要提供自助报告吗？哎呀，即使是不需要部署新代码的快速周转时间的报告？（在应用程序中提供报告功能确实很麻烦。）

有无数工具可用于针对传统 RDBM 执行这些操作。反对OODB？我对任何主要产品都不熟悉。不过，不可否认，我不是那种 OODB 的人。

如果你不需要这些工具，他们会去的。否则，请坚持使用传统的 RDBM。使用当前的 ORM 技术，将对象映射到记录的痛苦比以前要少得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-08T21:30:23.767

我相信的问题是，SQL 本质上并不是一件坏事。它非常擅长执行基于集合的操作。据我所见，对象数据库在处理单个对象时运行良好，但在尝试执行基于集合的操作时却失败了。此外，人们非常擅长使用 SQL 数据库。很容易找到与他们合作的人。对象数据库是另一回事。

# java - 我在哪里可以了解 Java 中的内存管理是如何工作的？

> ID：426005
> 
> 赞同：4
> 
> 时间：2009-01-08T21:19:58.560
> 
> 标签：java, memory-management

我正在寻找的是，一旦递归调用函数，就会将什么放入调用堆栈，参数如何相互叠加（局部变量是否按顺序推送？参数是否以相反的顺序推送？），什么除了您要求的字节之外，字节还存在于数组中...

在互联网上搜索，我只找到了简单的编码教程或有关 java 内存模型的信息，这似乎是关于防止并发的，并没有真正按照我需要的方式解释内存管理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T21:23:56.697

也许阅读[Java 虚拟机规范](http://java.sun.com/docs/books/jvms/)会对您有所帮助。

它解释了 Java 如何在 Suns VM 上工作和/或当其他实现它时它们应该如何工作（IBM、BEA 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T01:19:26.050

我认为绝对值得查看 Java 语言规范，看看它是否回答了您的一些问题。我还写了几页关于您可能感兴趣[的 Java 对象的内存使用情况](http://www.javamex.com/tutorials/memory/index.shtml)，主要基于 Hotspot。其他来源包括 Sun 发布的白皮书或您最喜欢的 JVM 供应商制作的其他技术文档（如果您深入研究一下，IBM 在发布技术细节方面也很合理）。

如果你感觉特别“硬核”，那么你也可以下载[调试 JDK](http://download.java.net/jdk6/)，它可以让你得到 JIT 编译器生成的所有代码的转储（打开 -XX:+PrintOptoAssembly）。

你还应该问自己：

*   你真的关心，比如说，什么顺序方法参数被写入堆栈？只要答案是“被调用方法期望它们的顺序”，它有什么区别？（注意如果 JIT 编译器内联该方法，在某些情况下的答案可能是“它不会将参数写入堆栈”......）
*   你能凭经验找到根本问题的答案吗？（例如，如果您真正想知道的是“我可以使用一个每次都采用这些参数并声明这些局部变量的方法来达到什么递归深度”，为什么不直接编写一个测试程序来从 Java 中找出它呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T08:40:59.403

这份白皮书提供了我见过的最好的介绍：

[http://www.oracle.com/technetwork/java/memorymanagement-whitepaper-150215.pdf](http://www.oracle.com/technetwork/java/memorymanagement-whitepaper-150215.pdf)

了解该文档后，您可以找到更详细的资源，例如 Sun 提供的 GC 调优指南：

[http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html](http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T21:31:48.787

如果他不是第一个，我会和奥斯卡雷耶斯一样回答。你肯定会在 VM 规范中找到类似的东西。

但是，您为什么要如此准确地知道它，因为无论如何您都无法在 Java 中访问此存储？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T01:24:54.043

请记住，在阅读 JVM 规范时，尽管它定义了 Java 的内存模型应该有多少工作，但它确实使某些区域（如垃圾收集）可以解释，因此它也可能有助于尝试查找内存模型的文档/规范适用于 Suns 以外的虚拟机。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-08T23:26:04.190

使用 javap 并阅读 ByteCode，您的直觉将帮助您更快更好。

# ruby - Ruby Gems 问题：未初始化的常量 Gem::GemRunner

> ID：426015
> 
> 赞同：3
> 
> 时间：2009-01-08T21:22:42.347
> 
> 标签：ruby, rubygems

当我尝试向其中添加最新的 rspec 插件时，我运行了一个 rails 2.2 应用程序。我使用 script/plugin install 命令从 github 进行了检查。这使得一些 rake 任务停止工作，我搜索了一段时间，发现我必须升级 RubyGems。我这样做并得到以下错误：

```
uninitialized constant Gem::GemRunner 
```

这是一个受版本控制的小而简单的应用程序，所以我删除了所有内容，然后 apt-get remove ruby​​ 和 ruby​​gems，然后再次重新安装所有内容（执行 apt-get install ruby​​, ruby​​gems）

问题仍然存在，我不知道如何解决它。我对 Ubuntu 很陌生，所以也许我真的没有删除软件包？（执行 apt-get 删除需要很少的时间，所以我不是很自信）

我究竟做错了什么？这是进行“干净启动”的好方法（通过apt删除然后重新安装？）

PS：我已经[读过](http://soyunperdedor.com/node/13)通过修改framework.rb解决了这个问题，但是我在作者所说的位置找不到那个文件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T00:18:35.860

我有一篇[博客文章](http://ryanbigg.com/2008/04/unintialized-constant-gemgemrunner/)解决了这个问题。

这是因为它仍在尝试使用旧的 gem 可执行文件，所以您只需象征性地链接新的 (gem1.8) 代替旧的。

# windows - Windows 上的 Git：如何设置合并工具？

> ID：426026
> 
> 赞同：364
> 
> 时间：2009-01-08T21:24:49.800
> 
> 标签：windows, git, cygwin, msysgit

我在 Cygwin 上尝试过 msysGit 和 Git。两者都可以正常工作，并且都可以完美地运行 gitk 和 git-gui。

现在我该如何配置合并工具？（Vimdiff 在 Cygwin 上工作，但我希望对我们一些喜欢 Windows 的同事更友好一些。）

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2009-01-12T16:41:52.187

为了跟进 Charles Bailey 的回答，这是我使用[p4merge](http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools)（免费跨平台 3way 合并工具）的 git 设置；在 msys Git (Windows) 上测试安装：

```
git config --global merge.tool p4merge
git config --global mergetool.p4merge.cmd 'p4merge.exe \"$BASE\" \"$LOCAL\" \"$REMOTE\" \"$MERGED\"' 
```

或者，从 Windows cmd.exe shell，第二行变为：

```
git config --global mergetool.p4merge.cmd "p4merge.exe \"$BASE\" \"$LOCAL\" \"$REMOTE\" \"$MERGED\"" 
```

变化（相对于查尔斯贝利）：

*   添加到全局 git 配置，即对所有 git 项目有效，而不仅仅是当前项目
*   自定义工具配置值驻留在“mergetool.[tool].cmd”中，而不是“merge.[tool].cmd”（愚蠢的我，花了一个小时来解决为什么 git 一直抱怨不存在的工具）
*   为所有文件名添加了双引号，以便合并工具仍然可以找到带有空格的文件（我在 Powershell 的 msys Git 中对此进行了测试）
*   请注意，默认情况下 Perforce 会将其安装目录添加到 PATH，因此无需在命令中指定 p4merge 的完整路径

下载：[http ://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools](http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools)

* * *

**编辑**（2014 年 2 月）

[正如@Gregory Pakosz](https://stackoverflow.com/users/216063/gregory-pakosz)所指出的，最新的[msys git](http://msysgit.github.io/)现在“本机”支持**p4merge**（在*1.8.5.2.msysgit.0*上测试）。

您可以通过运行显示支持的工具列表：

```
git mergetool --tool-help 
```

您应该在*可用*或*有效*列表中看到*p4merge 。*如果没有，请更新您的 git。

 **如果*p4merge*被列为*可用*，它在您的*PATH*中，您只需设置*merge.tool*：

```
git config --global merge.tool p4merge 
```

如果它被列为*有效*，除了*merge.tool*之外，您还必须定义*mergetool.p4merge.path*：

 *```
git config --global mergetool.p4merge.path c:/Users/my-login/AppData/Local/Perforce/p4merge.exe 
```

*   以上是为当前用户安装 p4merge 时的示例路径，而不是系统范围（不需要管理员权限或 UAC 提升）
*   虽然`~`应该扩展到当前用户的主目录（所以理论上路径应该是`~/AppData/Local/Perforce/p4merge.exe`），但这对我不起作用
*   更好的是利用环境变量（例如`$LOCALAPPDATA/Perforce/p4merge.exe`），git似乎没有为路径扩展环境变量（如果你知道如何让它工作，请让我知道或更新这个答案）

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-03-24T11:53:11.393

设置 mergetool.p4merge.cmd 将不再起作用，因为 Git 已经开始尝试支持 p4merge，请参阅 libexec/git-core/git-mergetool--lib.所以我们只需要指定 git 的 mergetool 路径，例如 p4merge：

```
git config --global mergetool.p4merge.path 'C:\Program Files\Perforce\p4merge.exe'
git config --global merge.tool p4merge 
```

然后它将起作用。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2011-04-03T12:28:32.057

我在 WinXP 上使用 Portable Git（很好用！），并且需要解决分支中出现的冲突。在我检查的所有 gui 中，[KDiff3](http://kdiff3.sourceforge.net/)被证明是最透明的使用。

[但我在这篇博](http://www.blog.project13.pl/index.php/coding/1192/setup-git-on-windows-to-use-kdiff3-as-its-mergetool/)文中找到了让它在 Windows 中工作所需的说明，这些说明与此处列出的其他方法略有不同。它基本上相当于将这些行添加到我的`.gitconfig`文件中：

```
[merge]
    tool = kdiff3

[mergetool "kdiff3"]
    path = C:/YourPathToBinaryHere/KDiff3/kdiff3.exe
    keepBackup = false
    trustExitCode = false 
```

现在工作很好！

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2010-11-10T23:38:32.700

在 Cygwin 下，**唯一**对我有用的是：

```
git config --global merge.tool myp4merge
git config --global mergetool.myp4merge.cmd 'p4merge.exe "$(cygpath -wla $BASE)" "$(cygpath -wla $LOCAL)" "$(cygpath -wla $REMOTE)" "$(cygpath -wla $MERGED)"'
git config --global diff.tool myp4diff
git config --global difftool.myp4diff.cmd 'p4merge.exe "$(cygpath -wla $LOCAL)" "$(cygpath -wla $REMOTE)"' 
```

另外，我喜欢关闭 difftool 的提示信息：

```
git config --global difftool.prompt false 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2009-01-08T21:37:02.053

`git mergetool`是完全可配置的，因此您几乎可以选择自己喜欢的工具。

完整的文档在这里：[http ://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

简而言之，您可以通过设置用户配置变量来设置默认合并工具`merge.tool`。

如果合并工具是它本机支持的工具之一，您只需设置`mergetool.<tool>.path`该工具的完整路径（替换`<tool>`为您配置`merge.tool`的内容。

否则，您可以设置`mergetool.<tool>.cmd`一些 shell 以在运行时进行评估，并将 shell 变量`$BASE, $LOCAL, $REMOTE, $MERGED`设置为适当的文件。无论是直接编辑配置文件还是使用命令设置变量，都必须小心转义`git config`。

像这样的东西应该给你可以做的事情的味道（“mymerge”是一个虚构的工具）。

```
git config merge.tool mymerge
git config merge.mymerge.cmd 'mymerge.exe --base "$BASE" "$LOCAL" "$REMOTE" -o "$MERGED"' 
```

一旦你设置了你最喜欢的合并工具，`git mergetool`只要你有冲突需要解决，就只需运行即可。

Perforce 的 p4merge 工具是一个非常好的独立合并工具。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-03-25T17:56:42.623

在 Windows 7 上无与伦比

```
git config --global merge.tool bc3
git config --global mergetool.bc3.path "C:\Program Files (x86)\Beyond Compare 3\BCompare.exe" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-06-11T06:02:07.387

似乎较新的 git 版本直接支持 p4merge，所以

```
git config --global merge.tool p4merge 
```

如果 p4merge.exe 在您的路径上，应该是您所需要的。无需设置 cmd 或路径。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-01-08T23:38:39.780

[正如这里（以及这里](https://stackoverflow.com/questions/137102/whats-the-best-visual-merge-tool-for-git)和[这里](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)）已经回答的那样，mergetool 是配置它的命令。对于一个漂亮的图形前端，我推荐[kdiff3](http://kdiff3.sourceforge.net/) (GPL)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-08-02T02:04:20.757

我不得不在 Windows 7 上使用 msysGit 删除额外的引用，不知道为什么。

```
git config --global merge.tool p4merge
git config --global mergetool.p4merge.cmd 'p4merge $BASE $LOCAL $REMOTE $MERGED' 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-17T10:52:38.057

我在 github Windows 中找到了两种将“ **SourceGear DiffMerge ”配置为 difftool 和 mergetool 的方法。**

命令提示符窗口中的以下命令将更新您的 .gitconfig 以配置 GIT 使用 DiffMerge：

```
git config --global diff.tool diffmerge
git config --global difftool.diffmerge.cmd 'C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe  \"$LOCAL\" \"$REMOTE\"'

git config --global merge.tool diffmerge
git config --global mergetool.diffmerge.cmd  'C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe  -merge  -result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\"' 
```

[**或**]

将以下行添加到您的 .gitconfig 中。此文件应位于 C:\Users\UserName 的主目录中：

```
[diff]
    tool = diffmerge
[difftool "diffmerge"]
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe \"$LOCAL\" \"$REMOTE\"

[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    trustExitCode = true
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe -merge -result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\" 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2010-03-30T17:39:15.830

如果您通过 cygwin 执行此操作，则可能需要使用 cygpath：

```
git config --global merge.tool p4merge
git config --global mergetool.p4merge.cmd 'p4merge `cygpath -w $BASE` `cygpath -w $LOCAL` `cygpath -w $REMOTE` `cygpath -w $MERGED`' 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2011-01-13T15:08:50.097

呸，这*终于*对我有用（Windows 7 + Cygwin + TortoiseMerge）：

在 .git/config 中：

```
cmd = TortoiseMerge.exe /base:$(cygpath -d \"$BASE\") /theirs:$(cygpath -d \"$REMOTE\") /mine:$(cygpath -d \"$LOCAL\") /merged:$(cygpath -d \"$MERGED\") 
```

感谢以前的海报使用 cygpath 的提示！

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-12-20T22:40:31.223

我使用他们手册中的一个名为 WinMerge ( [http://winmerge.org/ ) 的应用程序 (](http://winmerge.org/) [http://manual.winmerge.org/CommandLine.html](http://manual.winmerge.org/CommandLine.html) )

`mergetool`这是我通过指令使用的 bash 脚本`.gitconfig`

```
#!/bin/sh
# using winmerge with git
# replaces unix style null files with a newly created empty windows temp file

file1=$1
if [ "$file1" == '/dev/null' ] || [ "$file1" == '\\.\nul' ] || [ ! -e "$file1" ]
    then 
       file1="/tmp/gitnull"
       `echo "">$file1`
fi
file2=$2
if [ "$file2" == '/dev/null' ] || [ "$file2" == '\\.\nul' ] || [ ! -e "$file2" ]
    then 
       file2="/tmp/gitnull"
       `echo "">$file2`
fi
echo diff : $1 -- $2
"C:\Program files (x86)\WinMerge\WinMergeU.exe" -e -ub -dl "Base" -dr "Mine" "$file1" "$file2" 
```

基本上 bash 说明了 diff 的结果何时在一个空文件中并在正确的位置创建一个新的临时文件。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-05-04T21:26:56.020

您可能还想添加这些选项：

```
git config --global merge.tool p4mergetool
git config --global mergetool.p4merge.cmd 'p4merge $BASE $LOCAL $REMOTE $MERGED'
git config --global mergetool.p4mergetool.trustExitCode false
git config --global mergetool.keepBackup false 
```

另外，我不知道为什么，但米兰加迪安的回答中的引用和斜线让我搞砸了。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-06-24T12:57:13.677

如果有人想在 TortoiseGit 上使用 gvim 作为他们的 diff 工具，那么您需要在文本输入中输入外部 diff 工具的路径：

```
path\to\gvim.exe -f -d -c "wincmd R" -c "wincmd R" -c "wincmd h" -c "wincmd J" 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-10-20T01:32:23.423

Windows环境下IntelliJ IDEA（社区版）3路git mergetool配置（`~/.gitconfig`）

**赛格温**

```
[mergetool "ideamerge"]
     cmd = C:/Program\\ Files\\ \\(x86\\)/JetBrains/IntelliJ\\ IDEA\\ Community\\ Edition\\ 14.1.3/bin/idea.exe merge `cygpath -wa $LOCAL` `cygpath -wa $REMOTE` `cygpath -wa $BASE` `cygpath -wa $MERGED`
[merge]
     tool = ideamerge 
```

**系统**

```
[mergetool "ideamerge"]
cmd = "/c/Program\\ Files\\ \\(x86\\)/JetBrains/IntelliJ\\ IDEA\\ Community\\ Edition\\ 14.1.3/bin/idea.exe" merge `~/winpath.sh $LOCAL` `~/winpath.sh $REMOTE` `~/winpath.sh $BASE` `~/winpath.sh $MERGED`
[merge]
 tool = ideamerge 
```

~/winpath.sh 是在 msys 上将路径转换为 ​​Windows，取自[stackoverflow 上的 msys 路径转换问题](https://stackoverflow.com/a/15434571/535610)

```
#! /bin/sh                                                               

function wpath {                                                         
    if [ -z "$1" ]; then                                                 
        echo "$@"                                                        
    else                                                                 
        if [ -f "$1" ]; then                                             
            local dir=$(dirname "$1")                                    
            local fn=$(basename "$1")                                    
            echo "$(cd "$dir"; echo "$(pwd -W)/$fn")" | sed 's|/|\\|g';  
        else                                                             
            if [ -d "$1" ]; then                                         
                echo "$(cd "$1"; pwd -W)" | sed 's|/|\\|g';              
            else                                                         
                echo "$1" | sed 's|^/\(.\)/|\1:\\|g; s|/|\\|g';          
            fi                                                           
        fi                                                               
    fi                                                                   
}                                                                        

wpath "$@" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-01-20T06:15:30.577

要设置 p4merge，在 Windows 上使用 Chocolatey 安装以进行合并和差异，请看这里： [https ://gist.github.com/CamW/88e95ea8d9f0786d746a](https://gist.github.com/CamW/88e95ea8d9f0786d746a)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-08-17T16:21:58.440

如果您在从 SourceTree 打开 p4merge 时遇到问题，请在 MyRepo.git 下查找名为**config**的本地配置文件并删除任何合并配置。就我而言，它试图打开我刚刚卸载的 Meld

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-03T14:48:07.780

对于 kdiff3，您可以使用：

```
git config --global merge.tool kdiff3
git config --global mergetool.kdiff3.path "C:/Program Files/KDiff3/kdiff3.exe"
git config --global mergetool.kdiff3.trustExitCode false

git config --global diff.guitool kdiff3
git config --global difftool.kdiff3.path "C:/Program Files/KDiff3/kdiff3.exe"
git config --global difftool.kdiff3.trustExitCode false 
```

# wcf - 为什么我的 ChannelFactory 看不到我的端点配置？

> ID：426041
> 
> 赞同：49
> 
> 时间：2009-01-08T21:29:40.290
> 
> 标签：wcf

我一直在关注 Miguel Castro 关于 WCF 的优秀文章[，](http://www.devx.com/codemag/Article/39837)它运行良好，除了我有以下代码

```
public AdminClient()
{
    ChannelFactory<IProductAdmin> factory = new ChannelFactory<IProductAdmin>();
    productAdminChannel = factory.CreateChannel();
} 
```

在我的 app.config 文件中，我有以下配置：

```
<system.serviceModel>
    <client>
        <endpoint address="net.tcp://localhost:8002/ProductBrowser"
                  binding="netTcpBinding"
                  contract="Contracts.IProductAdmin" />
    </client>
</system.serviceModel> 
```

但是，当我运行 AdminClient 的构造函数时，我收到一个异常，指出未定义端点。但是，如果我更改我的配置为端点命名，然后按如下方式创建工厂，它就可以工作。

```
public AdminClient()
{
    var fac = new ChannelFactory<IProductAdmin>("admin");
    productAdminChannel = fac.CreateChannel();
} 
```

* * *

```
<system.serviceModel>
    <client>
        <endpoint name="admin" 
                  address="net.tcp://localhost:8002/ProductBrowser"
                  binding="netTcpBinding"
                  contract="Contracts.IProductAdmin" />
    </client>
</system.serviceModel> 
```

我很想对此作出解释。MSDN 中的文档没有多大帮助...

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2010-02-12T14:15:38.300

使用“*”来使用第一个符合条件的端点。

```
public AdminClient()
{
    ChannelFactory<IProductAdmin> factory  
         = new ChannelFactory<IProductAdmin>("*");

    productAdminChannel = factory.CreateChannel();
} 
```

[MSDN 示例](https://msdn.microsoft.com/en-us/library/aa344553(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:35:33.603

您需要指定端点名称，因为同一类型的合约可以有多个端点。（例如，一个服务部署在一个 tcp 和一个 http ws 端点上）。微软当然可以在 WCF 中构建一些东西来检查是否只为合同接口指定了一个客户端，但这不会非常一致。（如果只为合同指定了一个端点，它将起作用）。当您稍后为同一个合约添加另一个端点时，代码会在这种情况下中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T07:12:59.237

您无需在服务端指定端点名称即可逃脱。对于客户端，您需要指定名称，因为您可能要连接到具有相同合同的多个服务。WCF 怎么知道你想要哪一个？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-13T21:50:31.000

这几天一直困扰着我，所以我浏览了上面链接的文章中显示的示例。除了您遇到问题的第二个客户端代理示例之外，一切正常。正如您所指出的，其他以这种方式创建代理的应答器需要一个端点名称，并将其与客户端（定义端点的位置）耦合。我仍然不确定为什么它的行为方式如此，但我发现如果不将代理显式耦合到端点就无法使用该示例。

另一方面，显示如何创建代理的第一个示例不需要端点地址或绑定的显式耦合：

```
 using System;
   using System.ServiceModel;

   namespace CoDeMagazine.ServiceArticle
   {
       public class ProductClient 
          : ClientBase<IProductBrowser>, 
            IProductBrowser
       {

           #region IProductBrowser Members

           public ProductData GetProduct(
              Guid productID)
           {
               return Channel.GetProduct(productID);
           }

           public ProductData[] GetAllProducts()
           {
               return Channel.GetAllProducts();
           }

           public ProductData[] FindProducts(
              string productNameWildcard)
           {
               return Channel.FindProducts(
                  productNameWildcard);
           }

           #endregion
       }

   } 
```

这似乎工作得很好。所以，也许第二个代理示例只是一种糟糕的做事方式，或者我们遗漏了一些明显的东西......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-22T11:46:34.763

如果您不想明确指定端点名称，您可以编写：

```
 public AdminClient()
    {
        ChannelFactory<IProductAdmin> factory =  
           new ChannelFactory<IProductAdmin>(string.Empty);
        productAdminChannel = factory.CreateChannel();
    } 
```

不必要的无参数构造函数不起作用。

# powershell - 学习 Windows PowerShell 的最佳资源是什么？

> ID：426048
> 
> 赞同：6
> 
> 时间：2009-01-08T21:30:43.530
> 
> 标签：powershell

我正在寻找学习 Windows PowerShell。有人可以给我一些关于从哪里开始的非常好的参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T21:35:35.487

在网上搜索一些关于如何开始的基础教程。一旦您适应了分支到显示示例的站点。请记住，PowerShell 与 C# 非常相似，并且使用 .net 框架。从这些技术入手将有助于您进一步学习 PowerShell。

PowerShell Pro [http://www.powershellpro.com/powershell-tutorial-introduction/](http://www.powershellpro.com/powershell-tutorial-introduction/)

基本命令和示例 [http://weblogs.asp.net/steveschofield/archive/2007/01/25/basic-powershell-examples-couple-useful-commands.aspx](http://weblogs.asp.net/steveschofield/archive/2007/01/25/basic-powershell-examples-couple-useful-commands.aspx)

PowerShell 家伙 [http://thepowershellguy.com/blogs/posh/archive/2007/03/31/powershell-examples-used-on-ars-technica.aspx](http://thepowershellguy.com/blogs/posh/archive/2007/03/31/powershell-examples-used-on-ars-technica.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T21:42:55.130

我发现播客[http://powerscripting.wordpress.com/](http://powerscripting.wordpress.com/)非常好。它不会教你需要知道的所有语法，但它作为介绍很好，如果你使用它，从头开始听剧集。

# release - 候选版本是否可以安全地用于生产？

> ID：426063
> 
> 赞同：7
> 
> 时间：2009-01-08T21:33:11.653
> 
> 标签：release, production, candidate

在这种特殊情况下，它是 MVC。但是，发布候选版本与上线或生产版本之间有多大区别？我讨厌在 RC 上构建很多东西，因为我没有等待，所以它会损坏或错过。另一方面，我确实有要见的人。

谢谢你。

根据评论更新：

支持 Microsoft 的 MVC 之类的东西到底意味着什么？我不确定我什至会要求什么支持。我一直想知道这一点，因为它与事物的编程方面有关。我了解，获得对物理服务器的支持（硬盘驱动器死了）。在这种情况下，我会要求微软做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T21:34:37.097

通常 RC 构建将具有最终确定的 API 和 UI，它们只是可能有错误。我会说开发是安全的，但我会非常警惕部署未发布的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-08T21:49:54.880

一般情况下，请等待生产版本后再使用。如果开发它的公司还没有准备好在它上面贴上生产标签，你怎么能相信它在你的生产中呢？当您确定站点/产品的可靠性时，您只能与最薄弱的环节一样可靠。大多数 RC 的风险太高而无法赌博。

但是，也有例外。.Net MVC 就是其中之一。开发团队已提前并经常向大量发现错误的外部开发人员发布。这个 RC 非常安全，没有太大的赌注。

其他例外情况来自类似情况：

*   该产品已经过大量外部用户的广泛测试
*   该公司将产品置于 RC 或 Beta 模式的时间比正常情况要长得多，因此已经有足够的时间来发现错误（例如 Gmail）
*   提供即时支持或资源

您需要的支持类型是对您发现的任何错误的快速响应（带有修复）。例如，您的应用程序使用工具 DooHickey 来执行 HickeyItUp 操作。您会发现该工具运行良好，除非您使用它来 HickeyUp 类型为“AlmostHickey”的对象。相反，它返回一个错误。此错误会导致您的网站崩溃，您现在需要一个答案。良好的支持会告诉您是否以错误和正确的方式实施它，或为您提供解决方法，和/或在很短的时间内为您修复错误。

不要期望 Microsoft 会提供太多这种级别的支持（MVC 可能会因为反应灵敏的优秀团队而有所不同）。相反，您会从已经在使用它的开发人员那里获得大部分内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T21:35:43.693

我会说通常不要在生产环境中使用候选版本。也就是说，有一些例外情况，一些产品长期处于 Beta 或 Release Candidate 阶段，并且在达到普遍可用性之前可能相当稳定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T21:34:32.167

取决于您使用的功能、您是否拥有源代码以及供应商的许可证是否允许您使用它进行生产。

拥有源代码可以缓解问题，但在关键业务环境中使用不受支持的产品将是愚蠢的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T21:35:18.763

我想不是

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-08T21:35:35.737

我要补充一点，如果出现问题，这取决于供应商是否提供支持，这通常与许可条款有关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-08T21:39:03.610

根据定义，不，但您应该根据产品、供应商、其中包含的更新以及您的需求来使用自己的判断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-08T22:08:33.923

在我过去的生活中，我一直这样做。我部署的任何东西都是基于开源组件的。但是，我只选择带有良好测试套件的组件。

使用闭源软件，您根本不知道测试的东西有多好。供应商可能会将他们的用户群用作扩展的 QA 团队。

但是，正如 Carlton Jenke 所说，总会有例外。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-08T22:13:45.783

我认为这取决于“生产”应用程序的预期稳健性。

你的个人网站？当然！

国家失业保险申请制度？不。

# dynamic - 我可以在奥斯陆运行时创建动态类吗？

> ID：426065
> 
> 赞同：2
> 
> 时间：2009-01-08T21:33:31.047
> 
> 标签：dynamic, oslo

例如，我能否创建一个允许用户在运行时创建和修改现有类型的应用程序？我是否能够在 SQL 中保留这些类型的实例，而不必担心添加 100,000 条记录并期望对它们进行（真正）快速查询的用户？

想想 SharePoint 内容类型......但在类固醇上。奥斯陆类固醇 - 可能与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-12T19:51:15.843

那将是真棒！

在演示中，他们创建了新范围，然后创建了具有旧名称的（可更新）视图。

但是，我还没有听说过可以自动将现有数据合并到新结构中的功能。目前，他们建议在该部分使用 SQL Server 集成服务 - 但这是一项 DB-Admin 任务。

关于性能，MSchema编译成SQL语句后，都是普通的SQL Server性能。

# windows - 如何在启动时同步计算机的时钟？

> ID：426071
> 
> 赞同：41
> 
> 时间：2009-01-08T21:35:11.293
> 
> 标签：windows, datetime, batch-file

我有几台由 GoGrid 托管的服务器，每次我重新启动我的一个云服务器时，系统时钟都是不正确的。该服务器不是域的成员，所以我只是将操作系统设置为与 Internet 时间服务器同步。这每天只发生一次，我没有看到在重新启动时自动发生这种情况的选项。所以我只好写一些代码来为我做这件事。

我使用“w32tm /resync”命令创建了一个批处理文件，并安排它在系统启动时运行，但它不起作用，因为运行批处理文件时网络连接不可用。如何在操作系统完全加载且网络连接可用后启动时间同步？计算机启动后，我需要时间尽快纠正，以便我的数据库中的时间戳正确。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2019-03-12T18:17:34.683

在 Windows 10 中，我转到服务并启用“Windows 时间”服务`w32time`为自动，这为我解决了这个问题。

出现我的问题是因为我使用 Linux 进行了双启动，并且由于某种原因，在我启动 Linux 后，Windows 的时钟总是关闭。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-08-14T07:15:56.903

[正如这里](https://stackoverflow.com/a/55128248/2265240)所指出的，这可能与具有 Windows 10 和 linux 的双引导系统有关。

在我的情况下，该服务被设置为仅手动运行，因此从未像人们怀疑的那样被触发。在 Windows 的服务管理中调整服务以在启动时自动运行为我解决了这个问题。

[![在此处输入图像描述](https://i.stack.imgur.com/6q3Rp.png)](https://i.stack.imgur.com/6q3Rp.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-01-08T21:41:50.827

在 Windows 2008 上，任务计划程序中有一个选项可让您等到网络连接可用后再运行任务。在任务属性对话框中，创建一个新的“启动时”触发器，并确保选中“启用”框。添加一个操作来运行您的批处理文件。最后，添加 Condition 以仅在网络连接可用时启动任务。然后我要求它在失败时重新启动命令最多 3 次。这似乎工作得很好。

在旧版本的 Windows 上，使用以下批处理文件内容重试同步命令，直到成功或重试次数过多。

```
REM *** Retry for up to 15 minutes (90 retries @ 10 seconds each)
set retryCount=0

:SyncStart
if %retryCount == 90 goto SyncEnd
set /A retryCount=retryCount + 1

REM *** Resync the system clock
w32tm /resync
if errorlevel 1 goto SyncDelay
if errorlevel 0 goto SyncEnd

:SyncDelay
REM *** If unsuccessful, delay 10 seconds, then retry
choice /n /t:y,10>nul
goto SyncStart

:SyncEnd 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-08T21:41:28.160

通常，Windows 时间服务应该会为您处理这个问题。

[http://technet.microsoft.com/en-us/library/cc773013.aspx](http://technet.microsoft.com/en-us/library/cc773013.aspx)

你有服务运行吗？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-04T01:28:04.777

打开**终端（以管理员身份）**并运行以下命令：

在您的家庭计算机上使用它或未加入域
`w32tm /resync`

如果您已加入域，请使用此选项
`net time /domain`

如果你得到一个服务还没有启动。(0x80070426) 错误，则表示您需要启动 Windows 时间服务，稍等片刻，然后重试。

如果您收到计算机没有重新同步，因为没有可用的时间数据错误，那么您应该可以重试直到成功。

[Windows 10：在 Windows 10 中与 Internet 时间服务器同步时钟](https://www.tenforums.com/tutorials/6410-synchronize-clock-internet-time-server-windows-10-a.html#option2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-08T21:38:40.567

可能在登录时运行的计划任务？

编辑：您可能希望在脚本中保持 30 秒左右，以允许刷新网络连接。完全没有正确阅读您的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-22T06:48:02.230

我尝试使用选项自动（延迟启动）的 w32sync，这为我解决了....

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-01T20:50:18.473

我使用此批处理脚本重新同步 Windows 时间：*必须以管理员身份运行*

```
w32tm /unregister
w32tm /register
net start w32time
w32tm /resync 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-04-09T07:59:48.753

我应该意识到我需要以管理员身份运行这个批处理文件才能使其工作，但是一旦我弄清楚了，我只需对选择命令进行微小的调整，它就可以像魅力一样工作。

```
choice /n /t:10 /D:y 
```

像上面的用户一样，我在 Ubuntu 18.04 和 Windows 7 之间也有双重启动，其中启动到 Ubuntu 将系统时钟设置为 UTC，操作系统调整为 GMT，而看起来 Windozz 将系统时钟设置为时区。

设置任务计划程序很容易，我唯一的具体问题是我的笔记本电脑连接到我的 FritzBox 有时间，所以我想我的更新只会在我在家时发生。（它很容易将 NTP 交换回预设之一，所以我不担心）

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-01-18T07:51:59.763

在我的双 Windows/Linux 启动案例中，时间没有在 Windows 上同步，即使“Windows 时间”设置为“自动”。将其更改为“自动（延迟启动）”为我修复了它 - 时间在 Windows 启动后大约 1 分钟同步。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-03-09T19:36:16.667

半随机发现这个。Win 7+ 的新 choice.exe 语法插入 10 秒暂停

```
choice /N /T 10 /D y>nul 
```

# sql - 将小型 Oracle 长原始值转换为其他类型

> ID：426079
> 
> 赞同：1
> 
> 时间：2009-01-08T21:35:48.967
> 
> 标签：sql, oracle

我有一个 Oracle 表，其中包含一个包含 ASCII 字符数据的 LONG RAW 类型字段。如何编写一个查询或视图，将其转换为更容易使用的字符串？这些总是单字节字符，FWIW。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:42:43.823

也许

`select ...., to_lob(long_raw) from old_table`

( [http://www.psoug.org/reference/convert_func.html](http://www.psoug.org/reference/convert_func.html) )

或者

```
UTL_RAW.CAST_TO_VARCHAR2(b) 
```

（[http://www.dbasupport.com/forums/showthread.php?t=5342](http://www.dbasupport.com/forums/showthread.php?t=5342)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T21:43:17.610

我找到了这句话：

> 在 Oracle9i 中，您甚至可以：
> 
> 更改表 old_table 修改（c clob）；
> 
> 转换它。

见这里：[http ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1037232794454](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1037232794454)

**编辑**

varchar2 列的最大长度为 4000。是不是太短了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T21:49:22.107

我发现这适用于 CLOB 数据类型。我相信 LOB 类型也是如此。

```
create or replace function lob2char(clob_col clob) return varchar2 IS
buffer varchar2(4000);
amt BINARY_INTEGER := 4000;
pos INTEGER := 1;
l clob;
bfils bfile;
l_var varchar2(4000):='';
begin
LOOP
if dbms_lob.getlength(clob_col)<=4000 THEN
dbms_lob.read (clob_col, amt, pos, buffer);
l_var := l_var||buffer;
pos:=pos+amt;
ELSE
l_var:= 'Cannot convert.  Exceeded varchar2 limit';
exit;
END IF;
END LOOP;
return l_var;
EXCEPTION
WHEN NO_DATA_FOUND THEN
return l_var;
END;

INSERT INTO NEWTABLE (NEWCOLUMN) SELECT RTRIM(lob2char(OLDCOLUMN)) FROM OLDTABLE; 
```

# vim - 如何在vim中获取gunzipped文件的大小

> ID：426081
> 
> 赞同：1
> 
> 时间：2009-01-08T21:36:05.050
> 
> 标签：vim, gzip

查看（或编辑）一个 .gz 文件时，vim 知道找到 gunzip 并正确显示该文件。
在这种情况下， getfsize(expand("%")) 将是 gzip 压缩文件的大小。

有没有办法获得扩展文件的大小？

[编辑]
解决这个问题的另一种方法可能是获取当前缓冲区的大小，但 vim 中似乎没有这样的功能。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-08T22:33:37.103

没有简单的方法来获取 gzip 压缩文件的未压缩大小，除非将其解压缩并使用 getfsize() 函数。那可能不是你想要的。我查看了[RFC 1952 - GZIP File Format Specification](http://www.gzip.org/zlib/rfc-gzip.html "RFC 1952 - GZIP 文件格式规范")，唯一可能有用的是 ISIZE 字段，其中包含*“......原始（未压缩）输入数据的大小模 2^32”。*

**编辑：**

我不知道这是否有帮助，但这是我拼凑在一起的一些概念验证 C 代码，用于检索 gzip 文件中 ISIZE 字段的值。它适用于我使用 Linux 和 gcc，但你的里程可能会有所不同。如果您编译代码，然后将 gzip 文件名作为参数传入，它将告诉您原始文件的未压缩大小。

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

int main(int argc, char *argv[])
{
    FILE *fp = NULL;
    int  i=0;

    if ( argc != 2 ) {
        fprintf(stderr, "Must specify file to process.\n" );
        return -1;
    }

    // Open the file for reading
    if (( fp = fopen( argv[1], "r" )) == NULL ) {
        fprintf( stderr, "Unable to open %s for reading:  %s\n", argv[1], strerror(errno));
        return -1;
    }

    // Look at the first two bytes and make sure it's a gzip file
    int c1 = fgetc(fp);
    int c2 = fgetc(fp);
    if ( c1 != 0x1f || c2 != 0x8b ) {
        fprintf( stderr, "File is not a gzipped file.\n" );
        return -1;
    }

    // Seek to four bytes from the end of the file
    fseek(fp, -4L, SEEK_END);

    // Array containing the last four bytes
    unsigned char read[4];

    for (i=0; i<4; ++i ) {
        int charRead = 0;
        if ((charRead = fgetc(fp)) == EOF ) {
            // This shouldn't happen
            fprintf( stderr, "Read end-of-file" );
            exit(1);
        }
        else
            read[i] = (unsigned char)charRead;
    }

    // Copy the last four bytes into an int.  This could also be done
    // using a union.
    int intval = 0;
    memcpy( &intval, &read, 4 );

    printf( "The uncompressed filesize was %d bytes (0x%02x hex)\n", intval, intval );

    fclose(fp);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-12T09:23:06.690

这似乎适用于获取缓冲区的字节数

`(line2byte(line("$")+1)-1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T22:21:20.980

如果你在 Unix/linux 上，试试

```
:%!wc -c 
```

以字节为单位。（如果您安装了例如 cygwin，它可以在 Windows 上运行。）然后点击`u`获取您的内容。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-12T14:57:46.503

在 vim 编辑器中，试试这个：

```
<Esc>:!wc -c my_zip_file.gz 
```

这将显示文件的字节数。

# java - 如何在 Eclipse 中查看 JRE 的源代码？

> ID：426084
> 
> 赞同：85
> 
> 时间：2009-01-08T21:36:21.070
> 
> 标签：java, eclipse

使用 Eclipse 我想查看核心 Java 类（例如`java.util.concurrent.ConcurrentHashMap`）的源代码，但是当我使用“打开声明”导航到源代码时，它会显示“未找到源代码”并让我可以选择附加源代码。

我的问题是；我如何附加源？我从哪里获取`java.util.concurrent`库的源 .jar？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-09-30T17:56:59.793

当您在 Eclipse 中编码时，按下`CTRL`并单击源代码中的任何核心 Java 类名。Eclipse 现在将显示一个屏幕，提示您没有安装源代码。但是，在此屏幕中有一个链接显示“附加源...”。单击该链接并从 JDK 安装目录 (src.zip) 导入 src.zip 文件。这应该可以解决问题

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-01-08T21:46:52.517

您需要安装 JDK。然后你可以进去看看`JDK_INSTALL_DIR\src.zip`

对我来说是`C:\Program Files\java\jdk1.6.0_11\`（取决于您当前的版本）

您不需要获得特殊的开源版本。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-08T21:49:55.943

这里有一些关于从哪里获取源代码的好答案。但请注意：我会小心你如何使用它（如果你只是为了参考而使用它）。[API 文档](http://java.sun.com/javase/6/docs/api/)是您应该编码的唯一合同，并且是开发人员将在发布之间保持一致/完整的内容。我不会使用源代码找出实现细节，然后针对这些实现细节对我的应用程序进行编码，因为它们可能会在不同版本之间发生变化。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-12T06:10:05.767

当您查看项目的 Java 构建路径时，您应该能够看到“JRE 系统库 [jdk1.x.xxxx]”。

您可以通过以下方式访问项目构建路径配置屏幕：右键单击项目 -> 构建路径 -> 配置构建路径... 您应该能够在列表底部看到 JRE 系统库条目。

查看类源代码的最简单方法是使用“Open Type”快捷方式。此快捷方式的默认值为：++ `Ctrl`" 。您要查找的类应在您键入它的名称时出现。`Shift``T`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-08T21:42:03.680

您可以访问[http://openjdk.java.net/](http://openjdk.java.net/)并下载 openJDK 项目的最新版本。我认为这应该给你你所需要的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-29T09:40:14.587

对于 ubuntu，安装 openjdk-6-source 并使用 /usr/lib/jvm/java-6-openjdk/src.zip

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-09T00:15:48.270

如果您找不到实际源代码，您还可以使用反编译器从类文件中重新生成源代码。

我个人使用 JAD 结合 JADClipse 插件在 Eclipse 中查看源代码。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-23T12:47:29.563

右键单击项目 -> 构建路径 -> 配置构建路径。现在编辑您的 jre > 选择第二个选项备用 jre - > 选择任何 jdk（*不是*jre）。完成，现在通过 ctrl + 单击打开任何类，将显示其源代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-06T13:18:31.813

[在 Eclipse 之外，您可以在javasourcecode.org](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/)上查看 JDK 源代码。在此页面上，您可以从官方 API 文档切换到源代码，反之亦然。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-09-17T09:32:46.450

有一个很好的插件[GrepCode](http://grepcode.com/eclipse)允许查看许多开源库的 java 源代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-22T07:36:14.073

您可以使用 Eclipse Marketplace 中的“Eclipse 类反编译器集成 JD、Jad”。

从 Eclipse Marketplace 的查找框中输入：'jad'，您就会找到它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-27T07:34:00.563

**src.zip**文件存在于安装的 jdk 文件夹中：`..\Program Files\Java\jdk1.8.0_131`

在显示附加源的屏幕上提供此路径...为我工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-27T11:35:16.063

我们可以看到 C:\Program Files\Java\jdk1.8.0_73\src.zip 其中**C:\Program Files**是我安装 java 的主目录。

in eclipse, it will show like **Source not found**. form there link will come like browse source. browse the link C:\Program Files\Java\jdk1.8.0_73\src.zip and attach it. now you can see your source code.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-05T13:51:52.643

@jjnguy suggestion worked for me. But make sure you have also changed the default compiler as well. Right clickon th project-->Java Compiler->Click on the link under JDK Compliance(right section).

# c# - ASP.NET 控制器基类 User.Identity.Name

> ID：426110
> 
> 赞同：4
> 
> 时间：2009-01-08T21:41:06.647
> 
> 标签：c#, asp.net-mvc, controller, master-pages, abstract-class

如[本文](http://www.asp.net/Learn/mvc/tutorial-13-cs.aspx)所述，我创建了一个抽象的基本控制器类，以便能够将数据从控制器传递到 master.page。在这种情况下，我想在我的数据库中查找用户，查询 User.Identity.Name（仅当他登录时）。

但是，我注意到在这个抽象基类中，`User`属性总是`null`. 我该怎么做才能让它工作？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-30T15:55:53.300

正如 Paco 所建议的，在您尝试使用它之前，视图数据不会被初始化。

尝试覆盖 Controller.Initialize() 代替：

```
public abstract class ApplicationController : Controller
{
    private IUserRepository _repUser;

    public ApplicationController()
    {
    }

    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
        base.Initialize(requestContext);

        _repUser = RepositoryFactory.getUserRepository();
        var loggedInUser = _repUser.FindById(User.Identity.Name);
        ViewData["LoggedInUser"] = loggedInUser;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:31:08.590

要使用用户，您应该从

```
HttpContext.Current.User.Identity.Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T16:55:01.273

通过在 web.config 中将身份验证设置为 Windows，可以通过 User.Identity.Name 获取用户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-12T20:16:07.387

您是否尝试过：ControllerContext.HttpContext.Current.User.Identity.Name？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-12T15:42:45.393

我在静态 Utlilites 类上使用 Page 类。像那样;

**Page P = (Page)HttpContext.Current.Handler;**

我可以通过当前请求页面的 P 对象获取所有属性..

# dns - 我如何才能控制我注册给我但由 Web 开发人员控制的域？

> ID：426118
> 
> 赞同：4
> 
> 时间：2009-01-08T21:43:00.027
> 
> 标签：dns

我有一个问题，我注册了一个 .co.uk 域，但我的 Web 开发人员通过 easyspace.com 控制该域。我不再使用 Web 开发人员，而且结果很糟糕，所以我想在不让他们参与的情况下将我的域更改为另一个注册商。有谁知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T22:01:02.723

为了对您的域做任何事情，您需要成为它的注册用户。对于每个域，有 4 种类型的注册用户：

*   注册人/所有者
*   行政联系人
*   帐单联系人
*   和技术联系

如果您对您的域名进行[whois](http://www.networksolutions.com/whois/index.jsp)查询，您可以查看您是否是这些注册用户之一。

如果您是，您应该能够联系记录注册商（即 GoDaddy、Network Solutions、GKG 等）并获得帐户控制登录（如果您还没有登录）。

拥有帐户后，您可以更改名称服务器，从而将您的站点指向与当前不同的服务器，或启动转移到新的注册商（这需要花钱 - 通常是 1 年注册的价格）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T21:50:29.450

告诉他们让你控制它。你不是*要求*他们为你做某事，你只是要求他们交出你的东西（假设域是你的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T21:45:07.857

如果您拥有该域名，您应该能够通过注册商更改信息，以将其指向另一个托管服务或您自己的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-08T21:44:35.190

更改您的域主机以指向您控制的新名称服务器。

您可能会丢失您的网站代码，但始终可以重新开始。

# sql - 基于一个值排除项目的 SQL 查询

> ID：426128
> 
> 赞同：3
> 
> 时间：2009-01-08T21:46:26.013
> 
> 标签：sql, mysql

我正在从一个表中提取项目列表，基于它们包含在另一个表中，如下所示：

```
select fruit.id, fruit.name from fruit, fruit_rating where fruit_rating.fruit_id=fruit.id group by fruit.name; 
```

这很好用——它基本上会生成一个已被某人评级的所有水果的列表。但是现在，我想排除一个特定用户评价过的所有水果，所以我尝试了这个：

```
select fruit.id, fruit.name from fruit, fruit_rating where fruit_rating.fruit_id=fruit.id and fruit_rating.user_id != 10 group by fruit.name; 
```

没关系，但不完全正确。它显示了除 10 之外的所有其他人评价过的水果，但如果用户 1 和 10 都评价了同一个水果，它仍然显示那个。谁能告诉我如何构建一个只显示用户 10 未评级的水果的查询，而不管还有谁对它们进行了评级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T21:52:21.867

```
... WHERE fruit_rating.fruit_id=fruit.id 
      and fruit.id not in 
          (select fruit_rating.fruit_id 
             from fruit_rating 
            where fruit_rating.user_id = 10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T17:10:38.433

我和考恩的读法不同，同意诺亚的观点……

查找所有水果： - 用户 10 未对其进行评分 - 至少有一位其他用户对其进行了评分

但是，根据我的经验，使用 NOT IN 可能会很慢。因此，我通常更喜欢使用与 Cowan 相同的方式使用 LEFT JOIN 进行过滤。这里有几个不同的选项，虽然我没有时间测试大型数据集的性能......

```
SELECT
   [f].id,
   [f].name
FROM
   fruit           AS [f]
INNER JOIN
   fruit_rating    AS [fr]
      ON [fr].fruit_id = [f].id
GROUP BY
   [f].id,
   [f].name
HAVING
   SUM(CASE WHEN [fr_exclude].user_id = 10 THEN 1 ELSE 0 END) = 0 
```

```
SELECT
   [f].id,
   [f].name
FROM
   fruit           AS [f]
INNER JOIN
   fruit_rating    AS [fr]
      ON [fr].fruit_id = [f].id
LEFT JOIN
   fruit_rating    AS [fr_exclude]
      ON [fr_exclude].fruit_id = [fr].fruit_id
      AND [fr_exclude].user_id = 10
GROUP BY
   [f].id,
   [f].name
HAVING
   MAX([fr_exclude].user_id) IS NULL 
```

由于这只适用于一个用户，我还会考虑制作一个“要排除的用户”表并在其上使用 LEFT JOIN...

```
SELECT
   [f].id,
   [f].name
FROM
   fruit           AS [f]
INNER JOIN
   fruit_rating    AS [fr]
      ON [fr].fruit_id = [f].id
LEFT JOIN
   excluded_users  AS [ex]
      AND [ex].user_id = [fr].user_id
GROUP BY
   [f].id,
   [f].name
HAVING
   MAX([ex].user_id) IS NULL 
```

或者更冗长的东西，但我怀疑在具有适当索引的大型数据集上是最快的......

```
SELECT
   [f].id,
   [f].name
FROM
   fruit           [f]
INNER JOIN
(
   SELECT
      fruit_id
   FROM
      fruit_rating
   GROUP BY
      fruit_id
)
   AS [rated]
      ON [rated].fruit_id = [f].id
LEFT JOIN
(
   SELECT
      [fr].fruit_id
   FROM
      fruit_rating    AS [fr]
   INNER JOIN
      excluded_users  AS [ex]
         ON [ex].user_id = [fr].user_id
   GROUP BY
      [fr].fruit_id
)
   AS [excluded]
      ON [rated].fruit_id = [excluded].fruit_id
WHERE
   [excluded].fruit_id IS NULL
GROUP BY
   [f].id,
   [f].name 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-08T21:58:29.187

我稍微改进了您的查询以使其更易于阅读，并添加了一个子查询以过滤掉用户 10 已评分的所有水果

```
select f.id, f.name 
from fruit f
inner join fruit_rating fr on
 fr.fruit_id = f.id 
where f.id not in (
    select id
    from fruit_rating
    where [user_id] = 10) 
group by fruit.name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-08T22:36:45.303

对我来说不是 100% 清楚的一件事：你想要*所有*没有被用户 10 评价过的水果，还是只想要那些被其他人评价过但没有被用户 10 评价过的水果？例如，是否应包括没有评级的水果？

我*认为*您想要所有水果（包括未分级的），在这种情况下，诺亚和布朗斯通先生的答案并不完全符合您的要求。如果您删除fruit_rating 的内部连接，以及现在不需要的group by，他们的将包括未评级的水果。另一种避免子选择的方法是

```
select f.id, f.name 
from fruit f
left join fruit_rating fr on
  (f.id = fr.fruit_id)
  and (fr.user_id = 10)
where
  (fr.user_id is null) 
```

也就是说，只为用户 10 对水果评级进行左连接（如果您愿意，可以选择连接），然后只返回未找到匹配项的行。

# windows - 在 Windows 中使用线程是否有利？

> ID：426130
> 
> 赞同：0
> 
> 时间：2009-01-08T21:46:32.283
> 
> 标签：windows, multithreading

办公室里的一些人认为，当他们在代码中添加线程时，windows 会分配这些线程在多核或多处理器机器的不同处理器上运行。然后，当这种情况没有发生时，一切都会归咎于这些线程在所述多核或多处理器机器上相互冲突的存在。

有人可以揭穿或证实这个概念吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T21:51:54.520

当一个应用程序产生多个线程时，它们确实有可能被分配给不同的处理器。事实上，不正确的多线程代码在单处理器机器上运行正常但在多处理器机器上显示问题的情况并不少见。（如果代码在面对时间切片时是安全的，但在面对真正的并发时被破坏，就会发生这种情况。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T21:49:29.780

通常每个 CPU 最多只能有 1 个线程，但除非您的应用程序与一个处理器有某种明确的线程关联，否则 Windows 会将这些线程分配给空闲处理器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-08T21:52:31.523

是的，线程和多线程几乎与机器中的 cpu 或内核数无关......

编辑补充：谈论“有多少线程在一个 cpu 上运行”是矛盾的。只有一个线程可以在单个 CPU 上运行。多线程是关于进程中的多个线程，而不是 CPU。在另一个线程可以在任何 CPU 上运行之前，当前在该 CPU 上的线程必须停止运行，并且它的状态必须保存在某个地方，以便操作系统可以在下一次“转”​​时重新启动它。

代码在“进程”中运行，“进程”是逻辑抽象，可以运行一个或多个代码指令序列，并独立于其他进程管理计算机资源。在一个进程中，每个单独的代码指令序列都是一个“线程”。他们在哪个 cpu 上运行无关紧要。单个线程可以在不同的 cpu 上运行，每次被分配一个 cpu 来运行......并且多个线程，因为它们每个都分配了 cpu 周期，可能巧合地在同一个 cpu 上运行（尽管显然不是同时）

操作系统（操作系统的一个组件）负责“运行”线程。它保留所有线程的内存列表，并在它们之间不断“切换”（称为上下文切换）。它在单 CPU 机器中执行此操作的方式与在多 CPU 机器中执行 ion 的方式几乎完全相同。即使在多 CPU 机器中，每次它“打开”一个线程时，它也可能将它提供给不同的 CPU 或同一个 cpu，就像上次一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-08T21:53:19.837

如果机器有多个处理器，Windows 将自动在不同的处理器上执行多个线程。如果您在单处理器机器上运行，线程是时间分片的，但是当您将进程移动到多处理器机器时，该进程将自动利用多处理器。

因为代码是同时运行的，线程在多核机器上比在单核机器上更有可能相互踩踏，因为两个线程可以同时写入共享位置，而不是如果发生这种情况线程交换的时间恰到好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T22:02:55.010

不能保证您的进程的线程将被分配在不同的 CPU 上运行。

# c# - Clickonce 和独立存储

> ID：426139
> 
> 赞同：1
> 
> 时间：2009-01-08T21:49:43.820
> 
> 标签：c#, .net, clickonce

是否有人遇到过独立存储目录的内容丢失或单击自动部署后无法正确更新的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:40:48.647

我相信您可以在这篇文章中找到答案[——ClickOnce 和独立存储](https://stackoverflow.com/questions/202013/clickonce-and-isolatedstorage#227218)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T22:24:00.617

如果您的应用程序的版本发生变化（我不确定它到底是哪个版本号），那么新部署会创建一个新文件夹用于存储。隔离存储存储数据的方式有两种：

1.  用户和组件的隔离
2.  按用户、域和程序集进行隔离

在这两种情况下，当程序集更改时，目录也会更改。我不知道在部署之间保留数据的最佳方法是什么，但这就是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T22:00:38.917

去“失踪”——是的。我不确定 ClickOnce 是如何处理更新的，但我已经看到新版本没有与之关联的相同数据目录（或者它不会向前移动内容）。我能够手动找到旧文件并在必要时自行复制它，因此对于用户的应用程序数据，我要求他们指定一个目标，如果应用程序丢失了指向它的链接（存储在隔离存储中），他们可以轻松设置该目标。

# flash - 通过 Loader 将参数传递给 swf

> ID：426143
> 
> 赞同：4
> 
> 时间：2009-01-08T21:49:56.363
> 
> 标签：flash, actionscript-3, loader, flashvars

我有一个 swf (child.swf) 我希望加载到另一个 (parent.swf)。我希望通过我正在使用的加载器将参数传递给 child.swf。**请注意，我不是试图传递 parent.swf 已经拥有的 FlashVars**，而是试图通过另一个带有自定义参数的 swf 简单地加载一个 swf。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-08T22:39:31.317

在子 swf 中，编写一个函数（下面代码中的 init）来接收任何参数。当 Loader 发出 Event.COMPLETE 信号时，从 parent.swf 调用函数，如下所示：

```
var request:URLRequest = new URLRequest("child.swf");
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadHandler);
loader.load(request);

function loadHandler(event:Event):void
{
   var childSwf:Object = event.target.content;
   childSwf.init( PARAMS );
} 
```

# hibernate - nHibernate.Search 使用 nHibernate v2

> ID：426151
> 
> 赞同：3
> 
> 时间：2009-01-08T21:51:58.090
> 
> 标签：hibernate, nhibernate, lucene, hibernate-search, nhibernate.search

我无法让 nHibernate.Search 创建索引。

如果我使用 nHibernate.dll 和 nHibernate.Search.dll 的 1.2.1.4，那么索引会正确创建，我可以使用 Luke（Lucene 实用程序）对其进行检查。创建一个段文件以及一个片段文件等

但是，当我使用 nHibernate.dll 和 nHibernate.Search.dll 的 v 2 时，索引没有正确创建。在 Index 目录中只创建了一个 1k 段文件，Luke 无法检查它。

我在 v1 中使用的代码如下：

```
_configuration = new Configuration();
_configuration.Configure();
_configuration.AddAssembly(typeof (Contact).Assembly);
_sessionFactory = _configuration.BuildSessionFactory();
SearchFactory.Initialize(_configuration, _sessionFactory); 
```

我在配置文件中有以下内容

```
<property name="hibernate.search.default.directory_provider">NHibernate.Search.Storage.FSDirectoryProvider, NHibernate.Search</property>
<property name="hibernate.search.default.indexBase">~/Index</property> 
```

在版本 2 中没有 SearchFactory。我能找到的唯一类似的东西是

```
SearchFactoryImpl.GetSearchFactory(_configuration); 
```

所以我设置了如下配置

```
_configuration = new Configuration();
_configuration.Configure();
_configuration.AddAssembly(typeof (Contact).Assembly);
_sessionFactory = _configuration.BuildSessionFactory();
_configuration.SetProperty("hibernate.search.default.directory_provider",
                                       "NHibernate.Search.Store.FSDirectoryProvider, NHibernate.Search");

_configuration.SetProperty("hibernate.search.default.indexBase", "Index");
_configuration.SetProperty("hibernate.search.analyzer",
                                        "Lucene.Net.Analysis.Standard.StandardAnalyzer, Lucene.Net");

_configuration.SetListener(ListenerType.PostUpdate, new FullTextIndexEventListener());
_configuration.SetListener(ListenerType.PostInsert, new FullTextIndexEventListener());
_configuration.SetListener(ListenerType.PostDelete, new FullTextIndexEventListener());

SearchFactoryImpl.GetSearchFactory(_configuration); 
```

这创建了索引的基本框架，但 Luke 看不到它 - 这告诉我它已损坏

我还使用以下代码尝试手动创建索引，但同样它只创建段文件，没有别的

```
public void CreateIndex<T>(string rootIndexDirectory)
{
    Type type = typeof (T);

    var info = new DirectoryInfo(Path.Combine(rootIndexDirectory, type.Name));

    // Recursively delete the index and files in there
    if (info.Exists) info.Delete(true);

    // Now recreate the index
    FSDirectory dir = FSDirectory.GetDirectory(Path.Combine(rootIndexDirectory, type.Name), true);
    //Ioc.UrlProvider.MapPath(Path.Combine(rootIndexDirectory, type.Name)), true);

    try
    {
        var writer = new IndexWriter(dir, new StandardAnalyzer(), true);
        writer.Close();
    }
    finally
    {
        if (dir != null) 
            dir.Close();
    }

    using (ISession session = _sessionFactory.OpenSession())
    {
        using (IFullTextSession fullTextSession = Search.CreateFullTextSession(session)) 
        {
            foreach (var contact in _contacts)
            {
                //session.Save(contact);
                fullTextSession.Index(contact);
            }
        }
    }
} 
```

所以我的问题是 - 如果我想使用 nHibernate.Search，我是否必须使用 v1.1.4 的 nHibernate？或者我可以使用 v2 吗？在这种情况下我做错了什么？

网上关于这方面的内容很少。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T00:25:59.497

我在这里找到了一个工作示例：

[http://darioquintana.com.ar/blogging/?p=21](http://darioquintana.com.ar/blogging/?p=21)

这个项目中的 v2 nHibernate.Search.dll 确实包含一个 SearchFactory（尽管在不同的命名空间中）。

我从 SVN 存储库编译的那个没有这个

所以所有排序

# ruby - 在 Ruby 中查找字符串之间的差异

> ID：426159
> 
> 赞同：15
> 
> 时间：2009-01-08T21:53:40.037
> 
> 标签：ruby, string

我需要取两个字符串，比较它们，然后打印它们之间的差异。

所以说我有：

```
teamOne = "Billy, Frankie, Stevie, John"
teamTwo = "Billy, Frankie, Stevie"

$ teamOne.eql? teamTwo 
=> false 
```

我想说“如果两个字符串不相等，请打印它们之间的不同之处。在这种情况下，我只是想打印“John”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-09T05:25:35.303

到目前为止，所有解决方案都忽略了这样一个事实，即第二个数组也可以包含第一个数组没有的元素。Chuck 指出了一个修复方法（请参阅其他帖子的评论），但如果您使用集合，则有一个更优雅的解决方案：

```
require 'set'

teamOne = "Billy, Frankie, Stevie, John"
teamTwo = "Billy, Frankie, Stevie, Zach"

teamOneSet = teamOne.split(', ').to_set
teamTwoSet = teamTwo.split(', ').to_set

teamOneSet ^ teamTwoSet # => #<Set: {"John", "Zach"}> 
```

如果需要，可以将该集合转换回数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-08T22:04:43.307

如果您要比较的真实字符串与您提供的字符串相似，那么这应该可以：

```
teamOneArr = teamOne.split(", ")
=> [“比利”、“弗兰基”、“史蒂维”、“约翰”]
teamTwoArr = teamTwo.split(", ")
=> [“比利”，“弗兰基”，史蒂夫“]
teamOneArr - teamTwoArr
=> [“约翰”]

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-08T22:05:07.033

简单的解决方案：

```
 def compare(a, b)
   diff = a.split(', ') - b.split(', ')
   if diff === [] // a and b are the same
     true
   else
     diff
   end
 end 
```

当然，这仅在您的字符串包含逗号分隔值时才有效，但这可以根据您的情况进行调整。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-08T22:33:22.203

您需要先进行排序以确保不会从较小的字符串中减去较大的字符串：

```
def compare(*params)
   params.sort! {|x,y| y <=> x}
   diff = params[0].split(', ') - params[1].split(', ')
   if diff === []
      true
   else
      diff
   end 
end

puts compare(a, b) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-31T17:47:40.510

我从两个方面理解了这个问题。如果您想做一个涵盖这种情况的字符串差异（逐字）：

```
teamOne = "Billy, Frankie, Tom, Stevie, John"
teamTwo = "Billy, Frankie, Stevie, Tom, Zach"

s1 = teamOne.split(' ')
s2 = teamTwo.split(' ')

diff = []
s1.zip(s2).each do |s1, s2|
  if s1 != s2
    diff << s1
  end
end

puts diff.join(' ') 
```

结果是：

```
Tom, Stevie, John 
```

接受的答案给出：

```
#<Set: {"Zach", "John"}> 
```

# c++ - 多态性是否值得增加耦合？

> ID：426162
> 
> 赞同：6
> 
> 时间：2009-01-08T21:54:12.440
> 
> 标签：c++, polymorphism, coupling

我正在编写一个简单的游戏来学习获得更多的 C++ 经验，并且我知道我觉得多态性*几乎*可以工作，但没有。在这个游戏中，`Party`通过 a 的移动相当线性`Map`，但偶尔会`Fork`在路上遇到 a。叉子（基本上）是一个`std::vector<location*>`.Original 我打算在`Party`成员函数中编写如下代码：

```
if(!CurrLocation->fork_.empty())
   // Loop through forks and show options to the player, go where s/he wants
else
  (CurrLocation++) 
```

但我想知道以下的一些变体是否会更好：

```
CurrLocation = CurrLocation->getNext(); 
```

Fork 实际上是从 Location 派生的，并重载了一些新功能`getNext()`。但是在后一种情况下，`location`（一个低级结构）必须是向用户呈现消息而不是“传递这个备份”的那个，我不觉得它是优雅的，因为它`location`与`UserInterface::*`.

你的意见？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T00:12:30.180

所有问题都可以通过添加一个间接级别来解决。我会使用您建议的变体，并通过允许 getNext 接受解析方向选择的对象来将 Location 与 Party 分离。这是一个示例（未经测试）：

```
class Location; 

class IDirectionChooser
{
public:
  virtual bool ShouldIGoThisWay(Location & way) = 0;
};

class Location
{
public:
  virtual Location * GetNext(IDirectionChooser & chooser)
  {
    return nextLocation;
  }

  virtual Describe();
private:
  Location * nextLocation;
};

class Fork : public Location
{
public:
  virtual Location * GetNext(IDirectionChooser & chooser)
  {
    for (int i = 0; i < locations.size(); i++)
      if (chooser.ShouldIGoThisWay(*locations[i]))
        return locations[i];
  }
  virtual Describe();
private:
  vector<Location *> locations;
};

class Party : public IDirectionChooser
{
public:
  void Move()
  {
    currentLocation = currentLocation->GetNext(GetDirectionChooser());
  }

  virtual IDirectionChooser & GetDirectionChooser() { return *this; }

  virtual bool ShouldIGoThisWay(Location & way)
  {
    way.Describe();
    cout << "Do you want to go that way? y/n" << endl;

    char ans;
    cin >> ans;
    return ans == 'y';
  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T22:01:26.620

您应该使用多态性，只要它有意义并简化您的设计。你不应该仅仅因为它存在并且有一个花哨的名字就使用它。如果它确实使您的设计更简单，那么值得耦合。

正确性和简单性应该是每个设计决策的最终目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T22:10:41.110

我认为您自己发现了问题，并且可能可以通过您对系统其余部分的了解或此处提供的更多详细信息来解决问题，以供我们查看。

如前所述：

1.  应该使用多态性来简化设计——在这种情况下它会这样做，所以很明显。
2.  您的耦合有问题 - 再次发现，耦合可能会导致以后出现问题。然而，这对我来说是你应用多态性的方式可能不是最好的方式。
3.  对接口进行编程应该允许您隐藏系统如何组合在一起的内部细节，从而减少耦合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T22:01:48.897

多态性不会带来更大的耦合，我认为它们是独立的问题。

事实上，如果您正在对接口进行编程并遵循控制模式的一般反转，那么您将导致更少或零耦合。

在您的示例中，我看不到位置如何与 UserInterface 耦合？

如果是这种情况，是否可以通过 UserInterface 和 Location 之间的另一个抽象级别（例如 LocationViewAdapter）来消除耦合？

# java - Java的最佳“3D显示”开发环境？（它们甚至存在吗？）

> ID：426163
> 
> 赞同：6
> 
> 时间：2009-01-08T21:54:50.830
> 
> 标签：java, ide, 3d

CES 2009 发布了大量关于用于游戏和电影的新 3D 显示器的公告。我想知道当前是否存在将 3D 带入开发环境的设置。例如，这样的环境会将编译错误带到最前面。或者也许允许程序员快速堆叠代码面板，而不是使用 2D 选项卡。

它们甚至存在吗？或者编码 5 小时后眼睛会不会太累？

这个问题适用于 Java，因为我主要是 Java 开发人员。但我也很好奇是否有其他语言的良好 3d 开发环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-08T22:52:48.560

我的猜测是这对你来说很难。CES 2009 上所谓的 3D 显示器只是模拟深度，而不是真正的 3D。

使用真正的 3D，您应该能够用一只眼睛近距离和远距离聚焦在显示器中的图像上。如果没有这个，当你的大脑被告知有深度变化时，你的眼睛将聚焦在一个固定的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T23:10:48.633

我认为这些显示器不再是噱头还需要很长时间。可能很快就会有方法为这些电视创建 3D 视频媒体（毕竟，现在很多电影都是为 3D 影院拍摄的），游戏将实现过渡，但我认为它不会用于日常工作。您需要能够读取代码部分的精确分辨率将很难在“并不存在”的伪 3D 中模仿。3D也带来了遮挡、阴影等问题。

我们可能会很快得到一个在 3D 桌面隐喻中工作的操作系统，您可以在 Z 空间中拍摄窗口（并因此堆叠它们）而不是侧面。这对于笔记本电脑等小型显示器尤其重要。现代鼠标也可以支持这一点，因为它们有两个滚轮。

至于 API，我不会指望 Java 支持。事实上，考虑到 Sun 让 Java3D 死得非常痛苦，我实际上并不熟悉任何像样的 3D API。

# windows - IIS6 未找到 .asp 文件

> ID：426170
> 
> 赞同：0
> 
> 时间：2009-01-08T21:56:13.370
> 
> 标签：windows, asp-classic, iis-6

希望有人可以为此提供答案，尽管它不是 100% 与编程相关的。突然间，当我尝试加载任何以 .asp 结尾的文件时，我在 Server 2003 上安装的 IIS6 会给我一个“404 Not Found”错误。

如果我打开目录浏览，我可以在那里看到该文件，但是单击它会立即给我一个 404。常规的 HTML 页面加载得很好，它只是找不到 ASP 文件，尽管它们就在目录旁边HTML 文件。

我可能忘记了一些愚蠢的事情 - 有人可以提醒我我需要做什么才能让它正确加载吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T21:57:34.210

在 Web 服务扩展区域中，确保启用了 Active Server Pages

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T19:32:39.583

我们最近遇到了这个问题。除了启用 asp 的 Web 服务扩展之外，每个站点中还有一个地方需要检查。

**虚拟目录：** 在 IIS 6.0 中，打开虚拟目录的属性。导航到虚拟目录选项卡 - 在底部，单击配置 - 确保 .asp 扩展名在该列表中。如果不是，您可以在以下路径中找到 dll： *C:\WINDOWS\system32\inetsrv\asp.dll*。此外，需要在同一窗口中添加动词。主要选择是 GET、HEAD、POST（如果需要，可能还有 TRACE）。

**网站** 在 IIS 6.0 中，打开网站的属性。导航到主目录选项卡 - 在底部，单击配置 - 确保 .asp 扩展名在该列表中。如果不是，您可以在以下路径中找到 dll： *C:\WINDOWS\system32\inetsrv\asp.dll。*此外，需要在同一窗口中添加动词。主要选择是 GET、HEAD、POST（如果需要，可能还有 TRACE）。

我希望这会有所帮助 - 经过相当广泛的搜索后，我没有发现提到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T22:02:59.113

Duh - 我知道我只是忽略了一些愚蠢的事情（显示了我使用经典 ASP 的频率）。谢谢一堆。

# algorithm - 确定分发这些优惠券的最佳方式的算法是什么？

> ID：426173
> 
> 赞同：7
> 
> 时间：2009-01-08T21:57:31.777
> 
> 标签：algorithm

这是我的问题。想象一下，我要购买 3 种不同的商品，并且最多有 5 张优惠券。优惠券可以互换，但在不同物品上使用时价值不同。

这是一个矩阵，它给出了在不同项目上花费不同数量的优惠券的结果：

```
coupons:    1         2         3         4         5
item 1      $10 off   $15 off
item 2                $5 off    $15 off   $25 off   $35 off
item 3      $2 off 
```

我已经为这个例子手动制定了最佳操作：

*   如果我有 1 张优惠券，商品 1 可减 10 美元
*   如果我有 2 张优惠券，商品 1 可减 15 美元
*   如果我有 3 张优惠券，商品 1 获得 2，商品 3 获得 1，优惠 17 美元
*   如果我有 4 张优惠券，**那么**：
    *   第 1 件获得 1 件，第 2 件获得 3 件，总计减 25 美元，或
    *   第 2 项以 25 美元的价格购买全部 4 件。
*   如果我有 5 张优惠券，那么第 2 项可以以 35 美元的价格获得全部 5 张优惠券。

但是，我需要开发一个通用算法来处理不同的矩阵和任意数量的项目和优惠券。

我怀疑我需要遍历所有可能的组合以找到*n 个*优惠券的最佳价格。这里有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T22:06:56.780

这是[背包](http://en.wikipedia.org/wiki/Knapsack_problem)问题，或者说是它的变体。对与此问题相关的算法进行一些研究将为您指明最佳方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-08T22:39:02.053

这似乎是动态编程的一个很好的候选：

```
//int[,] discountTable = new int[NumItems][NumCoupons+1]

// bestDiscount[i][c] means the best discount if you can spend c coupons on items 0..i
int[,] bestDiscount = new int[NumItems][NumCoupons+1];

// the best discount for a set of one item is just use the all of the coupons on it
for (int c=1; c<=MaxNumCoupons; c++)
    bestDiscount[0, c] = discountTable[0, c];

// the best discount for [i, c] is spending x coupons on items 0..i-1, and c-x coupons on item i
for (int i=1; i<NumItems; i++)
    for (int c=1; c<=NumCoupons; c++)
        for (int x=0; x<c; x++)
            bestDiscount[i, c] = Math.Max(bestDiscount[i, c], bestDiscount[i-1, x] + discountTable[i, c-x]); 
```

最后，最佳折扣将是 bestDiscount[NumItems][x] 的最高值。要重建树，请向后跟随图表：

编辑添加算法：

```
//int couponsLeft;

for (int i=NumItems-1; i>=0; i++)
{
    int bestSpend = 0;
    for (int c=1; c<=couponsLeft; c++)
        if (bestDiscount[i, couponsLeft - c] > bestDiscount[i, couponsLeft - bestSpend])
            bestSpend = c;

    if (i == NumItems - 1)
        Console.WriteLine("Had {0} coupons left over", bestSpend);
    else
        Console.WriteLine("Spent {0} coupons on item {1}", bestSpend, i+1);

    couponsLeft -= bestSpend;
}
Console.WriteLine("Spent {0} coupons on item 0", couponsLeft); 
```

将图形存储在数据结构中也是一个好方法，但这是我之前想到的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-08T22:15:11.773

我认为[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)应该这样做。基本上，您跟踪一个数组 A[n, c]，其值表示购买前 n 个已花费 c 个优惠券的第一件商品时的最佳折扣。对于 n 的所有值，a[n, 0] 的值应该是 0，所以这是一个好的开始。此外，对于所有 c，A[0, c] 为 0。

当您评估 A[n,c] 时，您会遍历项目 n 的所有折扣优惠，并将该特定优惠的折扣添加到 A[n-1,cp] 其中 p 是该特定折扣的优惠券价格。A[n-1, cp] 当然必须在此之前计算（以相同的方式）。保持最佳组合并存储在数组中。

递归实现可能会给出最干净的实现。在这种情况下，您应该在 A[N,C] 中找到答案，其中 N 是商品总数，C 是可用优惠券的总数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-08T22:15:12.677

这可以写成[线性规划](http://en.wikipedia.org/wiki/Linear_programming)问题。对于大多数“典型”问题，单纯形法是解决此类问题的一种快速、相对简单的方法，或者有可用的开源 LP 求解器。

对于您的示例：

令*0 <= xi <= 1*

*   *x1* = 如果一张优惠券用于第 1 项，则为 1，否则为 0
*   *x2* = 如果在项目 1 上花费了两张优惠券，则为 1，否则为 0
*   *x3* = 如果一张优惠券用于第 2 项，则为 1，否则为 0
*   *x4* = 如果在项目 2 上花费了两张优惠券，则为 1，否则为 0
*   *x5* = 如果在项目 3 上花费了三张优惠券，则为 1，否则为 0
*   ...

假设如果我在商品 1 上花费了两张优惠券，那么 x1 和 x2 都是一张。这意味着约束

*   *x1 >= x2*

对其他项目有类似的约束，例如，

*   *x3 >= x4*
*   *x4 >= x5*

节省的金额是

*   *已保存 = 10 x1 + 5 x2 + 0 x3 + 5 x4 + 10 x5 + ...*

如果您想找到使用固定数量的优惠券节省的最多的钱，那么您希望根据上述约束和附加约束最小化*Saved ：*

*   *优惠券数量 = x1 + x2 + x3 + ...*

这适用于任何矩阵和项目数量。改变符号（并且为我不能做下标感到难过），如果*j*优惠券用于项目编号*i ，则让**0 <= y_ij <= 1*为一。我们有约束

 ***   *y_i(j-1) >= y_ij*

如果在项目*i*上花费*j*个优惠券节省的金额是*M_ij*，我们定义*M_i0 = 0*，然后最大化

 ****   *已保存 = Sum_ij (M_ij - M_i(j-1)) y_ij*

受上述限制和

*   *优惠券数量 = Sum_ij y_ij*

（斜体格式似乎在这里不起作用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T22:14:10.403

我怀疑某种用于记忆每个优惠券数量的排序列表在这里会有所帮助。

例如，如果您有 4 张优惠券，则最优可能是：

1.  在某事上使用全部 4 个。您必须检查所有这些新价格。
2.  使用 3 和 1。要么 3-item 是 3 个优惠券的最佳解决方案，要么该商品与 1-coupon 商品的三个最佳选择重叠，在这种情况下，您需要找到三个最佳 1 之一的最佳组合- 优惠券和 3 优惠券项目。
3.  使用 2 和 2。找到前 3 个 2 项。如果 #1 和 #2 重叠，则 #1 和 #3 ，除非它们也重叠，在这种情况下 #2 和 #3 不会。

这个答案很模糊..我需要多加考虑。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-01-08T22:05:43.820

这个问题在概念上类似于[旅行商问题](http://en.wikipedia.org/wiki/Traveling_salesman_problem)，其中 O(n!) 是找到*最优*解的最佳方法。有几条捷径可以走，但它们需要很多很多时间才能发现，我怀疑你有。

假设我们正在处理少量优惠券，检查每个可能的组合将是您时间的最佳利用。让客户稍等片刻，而不是花费数年时间。

# c# - 过滤数据集中的多个数据表

> ID：426179
> 
> 赞同：2
> 
> 时间：2009-01-08T21:58:54.380
> 
> 标签：c#, .net, dataset

我有一个包含多个数据表的数据集。我想显示来自产品数据表的信息，它是数据集的中心表。但我希望能够根据周围表中的值过滤 DataSet。

例如，我想获取所有具有名为 Width 的功能 (DataTable) 和名为“Microsoft”的供应商 (DataTable) 的产品。

我可以将 DataTables 合并到一个 DataView 中，但这会导致 DataTables 之间的一对多关系出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:08:38.273

这有点手动，但代码应该可以工作：

```
 // Helper Functions
    private static List<T> RemoveDuplicates<T>(List<T> listWithDuplicates)
    {
        List<T> list = new List<T>();
        foreach (T row in listWithDuplicates)
        {
            if(!list.Contains(row))
                list.Add(row);
        }
        return list;
    }

    private static List<DataRow> MatchingParents(DataTable table, string filter, string parentRelation)
    {
        List<DataRow> list = new List<DataRow>();
        DataView filteredView = new DataView(table);
        filteredView.RowFilter = filter;
        foreach (DataRow row in filteredView.Table.Rows)
        {
            list.Add(row.GetParentRow(parentRelation));
        }
        return list;
    }

    // Filtering Code
    List<DataRow> productRowsMatchingFeature = MatchingParents(productDS.Feature, 
                                                                   "Name = 'Width'",
                                                                   "FK_Product_Feature");

    List<DataRow> productRowsWithMatchingSupplier = MatchingParents(productDS.Supplier,
                                                                   "Name = 'Microsoft'",
                                                                   "FK_Product_Supplier");

    List<DataRow> matchesBoth = productRowsMatchingFeature.FindAll(productRowsWithMatchingSupplier.
                                                                           Contains);

    List<DataRow> matchingProducts = RemoveDuplicates(matchesBoth); 
```

# c# - 返回 ICollection 的真正优势是什么 而不是列表 ?

> ID：426182
> 
> 赞同：15
> 
> 时间：2009-01-08T21:59:55.890
> 
> 标签：c#, .net, ienumerable, icollection

我读过几篇博文，提到对于公共 API，我们应该始终返回 ICollection（或 IEnumerable）而不是 List。返回 ICollection 而不是 List 的真正优势是什么？

谢谢！

重复：[List (of T) 和 Collection(of T) 有什么区别？](https://stackoverflow.com/questions/398903/what-is-the-difference-between-list-of-t-and-collectionof-t)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:04:16.490

当您迭代它时，枚举器一次只返回一个实体。这是因为它使用了**yield return**。另一方面，集合返回整个列表，要求列表完全存储在内存中。

简短的回答是枚举器更轻、更高效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T22:05:17.487

在选择基础数据结构时，它为您提供了更多的自由。

List 假设实现支持索引，但 ICollection 不做这样的假设。

这意味着，如果您发现 Set 可能提供更好的性能，因为排序无关紧要，那么您可以自由地更改方法而不影响客户端。

这是基本的封装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T22:06:06.720

我认为 IList 会更合适，但是......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T22:05:17.317

ICollection 只是一个接口，而 List 是该接口的特定实现。如果您以后想使用列表以外的其他容器怎么办？如果您公开公开 ICollection 接口，则可以稍后将内部容器更改为其他内容 - 只要新容器也实现 ICollection 接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T22:06:54.177

请参阅[List (of T) 和 Collection(of T) 有什么区别？](https://stackoverflow.com/questions/398903/what-is-the-difference-between-list-of-t-and-collectionof-t)

# jdbc - 刷新 JDBC 连接池

> ID：426191
> 
> 赞同：0
> 
> 时间：2009-01-08T22:02:45.107
> 
> 标签：jdbc, connection-pooling, flush

有谁知道刷新 JDBC 连接池的最佳（或任何）方法？我在文档中找不到任何明显的东西。似乎连接池永远不会被删除。

我目前的想法是从我们存储它们的哈希中删除所有数据源，这将触发我们的代码创建新的。但是，我的第一次尝试抛出了 ConcurrentModificationException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T04:26:20.993

您不应该编写连接池。即使您想自己*管理*池（而不是让容器来管理），您也应该为此使用库（例如 Commons DBCP）。

如果要从哈希中删除所有内容，则应使用 hash.clear()。

如果要避免 ConcurrentModificationException，则需要添加同步。

如果您删除对 Connections 的引用（您确定您的意思是 DataSources 吗？），请务必先 close() 它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T23:15:15.317

为什么要删除，而不是首先创建它。

它应该基于您的应用服务器，可能是一些 JNDI 编程可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T23:16:01.073

您不应该编写连接池。这由 Java EE 应用服务器处理。

# visual-studio-2008 - 用nant和VS2008搭建平台代码

> ID：426199
> 
> 赞同：2
> 
> 时间：2009-01-08T22:04:10.860
> 
> 标签：visual-studio-2008, nant, cruisecontrol

我正在使用最新的夜间版本、VS2008 prof 试用版和 .NET 3.5，但出现此错误

“不支持文件'C:\test\Project\src\project.sln'的解决方案格式。”

克服它的任何解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-08T22:14:05.037

从您发布的内容中我不知道这是否可行，但是如果您尝试使用 Nant Msbuild 任务运行解决方案，您可能可以将其替换为`exec`调用最新的任务msbuild 作为可执行文件的版本。例如：

```
<exec program="msbuild.exe" 
      basedir="C:\windows\microsoft.net\Framework\v3.5\" 
      commandline="C:\test\Project\src\project.sln"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T22:13:26.613

[NAnt 和 VS2008 (.NET 3.5) - 不支持文件 Solution.sln 的解决方案格式](https://stackoverflow.com/questions/327722/nant-and-vs2008-net-35-solution-format-of-file-solutionsln-is-not-supported)

也许这个？

[http://codebetter.com/blogs/jeffrey.palermo/archive/2007/11/28/upgrade-nant-for-use-with-vs2008-solutions-and-net-3-5.aspx](http://codebetter.com/blogs/jeffrey.palermo/archive/2007/11/28/upgrade-nant-for-use-with-vs2008-solutions-and-net-3-5.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-12T22:07:45.747

如果您使用的是 Exec 方法，只需将它们链接在一起，以便按照您需要的顺序获得所有解决方案，如下所示：

```
<exec program="msbuild.exe"       basedir="C:\windows\microsoft.net\Framework\v3.5\"       commandline="C:\test\Project\src\project1.sln"/> 
```

在基于您的第一条消息的旁注中，听起来您正在尝试使用据我所知目前仅支持 vs2005 的解决方案任务（可能是错误的）。

另一种选择是做很多开源项目所做的事情（查看城堡项目[http://castleproject.org](http://castleproject.org)），其中每个项目有多个构建文件 1、一个公共文件和一个允许如果您愿意，您可以控制每个项目文件的所有构建顺序和细节。

这就是我们在我的工作地点的做法。

希望有帮助。

# vb.net - 用于从继承的类自动创建构造函数的 Visual Studio 快捷方式

> ID：426210
> 
> 赞同：6
> 
> 时间：2009-01-08T22:07:07.607
> 
> 标签：vb.net, visual-studio, visual-studio-2008

假设我从一个具有多个“重载”构造函数的类继承。

无论如何，Visual Studio 中有一个捷径，它在派生类中编写构造函数，其签名与我在默认类中的签名相同，使用样板代码调用 MyBase.New(...) 并插入参数我？

编辑：据我所知，没有内置这样的快捷方式，但是正如 Raymond 所建议的那样，在 resharper 中有一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T22:24:28.790

我不知道标准 Visual Studio 安装中的快捷方式，但如果您从 jetBrains 安装出色的 Resharper 插件，它就是 Alt-Insert, C。没有它我不会开发。

# .net - 我可以重复使用事务吗？如何？

> ID：426212
> 
> 赞同：2
> 
> 时间：2009-01-08T22:08:01.787
> 
> 标签：.net, transactions

`Commit()`我必须使用一个公司类，该类在每个or之后重用或重新创建事务`Rollback()`。此类通过`Boolean`ctor 参数被告知使用（或不使用）事务。

我正在考虑包装此 API 以分离事务支持（显式依赖 Transaction 对象或环境`TransactionScope`）。但这需要一个可重用的事务类。.NET 中有这样的类吗？或者我将如何开始开发自己的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T22:20:48.203

不，事务一旦提交或回滚就不可重用（我相信一旦它们被提交或回滚就尝试访问它们会引发异常）。

我的建议是忘记尝试为 TransactionScope 创建一个包装器，因为它并没有真正提供任何价值，因为 TransactionScope 模型一开始是隐式的（而且它是它自己的包装器）。只需将您的`using (TransactionScope ts = new TransactionScope())`陈述放在需要交易的事情上。使用 TransactionScope，每个数据库调用都有隐含的事务支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T17:38:39.593

像这样写一个包装器方法

```
TransactionScope GetTransaction(bool useTransaction)
{
   if (useTransaction)
   {
      return new TransactionScope( /* ... */ );
   }
   return null;
} 
```

Using-Blocks 将愉快地使用 null-References，因此您可以像这样编写代码（其中“useTransaction”是您为类提供的布尔参数）：

```
using (var scope = GetTransaction(useTransaction))
{
   // Code here (if useTransaction == true will use the ambient Transaction,
   // otherwhise will not run inside a transaction).

   if (scope != null)
   {
      scope.Complete();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-13T18:11:21.817

**更新：**该`Session`类型具有单独的非事务性“确认”行为。我可以单独确认我已完成处理的消息。这使我可以避免基于会话生命周期的事务。

# asp.net - 如何将二进制 blob 发送到客户端浏览器？

> ID：426219
> 
> 赞同：0
> 
> 时间：2009-01-08T22:10:45.230
> 
> 标签：asp.net, browser, download, blob

请原谅这里愚蠢的新手问题；网络编程不是我的强项……（脸红）

我有一个在 Web 服务器上运行的 aspx 页面。我有一个包含任何类型的二进制文件以及文件名的 blob（字节数组）。

我想将此文件推送到通过浏览器下载到客户端，并使用此文件类型的默认应用程序打开。我真的不想将 blob 作为文件保存在服务器上；这将留下我不想考虑的可怕的家务混乱。

我确实尝试过用谷歌搜索这个问题，但我想我使用了错误的关键字。

这真的应该很明显如何做到这一点，但我没有快乐。

诀窍是什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-08T22:15:20.697

```
Response.BinaryWrite(byteArray); 
```

您还应该设置内容类型

```
Response.ContentType = "application/pdf"; 
```

但这将取决于您的文件类型。

文件名（以及所有内容）是这样完成的

```
Response.AddHeader("content-disposition", 
   String.Format("attachment;filename={0}", fileName));    
Response.ContentType = "application/pdf";
Response.BinaryWrite(byteArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:16:57.930

首先，您必须知道 mime 类型。一旦知道这一点，就可以设置 Response.ContentType 属性。之后，只需使用 Response.BinaryWrite()。如果不先设置 ContentType 属性，客户端几乎没有机会正确打开文件。

# sql - PostgreSQL - 相关子查询失败？

> ID：426221
> 
> 赞同：1
> 
> 时间：2009-01-08T22:11:15.633
> 
> 标签：sql, database, postgresql, subquery

我有一个这样的查询：

```
SELECT t1.id,
    (SELECT COUNT(t2.id)
     FROM t2
     WHERE t2.id = t1.id
          ) as num_things
FROM t1
WHERE num_things = 5; 
```

目标是获取在另一个表中出现 5 次的所有元素的 id。但是，我收到此错误：

```
ERROR: column "num_things" does not exist
SQL state: 42703 
```

我可能在这里做一些愚蠢的事情，因为我对数据库有点陌生。有没有办法修复这个查询，以便我可以访问`num_things`？或者，如果没有，有没有其他方法可以达到这个结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-08T22:18:48.893

关于使用 SQL 的几个要点：

*   您不能在 WHERE 子句中使用列别名，但可以在 HAVING 子句中使用。这就是你得到错误的原因。
*   与使用相关子查询相比，使用 JOIN 和 GROUP BY 可以更好地进行计数。它会快得多。
*   使用 HAVING 子句过滤组。

这是我编写此查询的方式：

```
SELECT t1.id, COUNT(t2.id) AS num_things
FROM t1 JOIN t2 USING (id)
GROUP BY t1.id
HAVING num_things = 5; 
```

我意识到这个查询可以跳过`JOIN`with t1，就像在 Charles Bretana 的解决方案中一样。但我假设您可能希望查询包含 t1 中的其他一些列。

* * *

回复：评论中的问题：

不同之处在于该`WHERE`子句在行上进行评估，然后`GROUP BY`将组减少到每组一行。该`HAVING`子句在组形成后进行评估。因此，例如，您不能使用;更改`COUNT()`组的 `HAVING`您只能排除组本身。

```
SELECT t1.id, COUNT(t2.id) as num
FROM t1 JOIN t2 USING (id)
WHERE t2.attribute = <value>
GROUP BY t1.id
HAVING num > 5; 
```

在上面的查询中，`WHERE`过滤匹配条件的行，`HAVING`过滤至少有五个计数的组。

引起大多数人困惑的一点是当他们没有`GROUP BY`从句时，所以它*看起来*像`HAVING`并且`WHERE`可以互换。

`WHERE`在选择列表中的表达式之前进行评估。这可能并不明显，因为 SQL 语法将选择列表放在首位。`WHERE`因此，您可以通过使用限制行来节省大量昂贵的计算。

```
SELECT <expensive expressions>
FROM t1
HAVING primaryKey = 1234; 
```

如果您使用上述查询，则会为*每一行*计算选择列表中的表达式，只是因为条件而丢弃大部分结果`HAVING`。但是，下面的查询仅计算与条件匹配的*单行*`WHERE`的表达式。

```
SELECT <expensive expressions>
FROM t1
WHERE primaryKey = 1234; 
```

回顾一下，查询是由数据库引擎根据一系列步骤运行的：

1.  从表中生成一组行，包括由 生成的任何行`JOIN`。
2.  根据行集评估`WHERE`条件，过滤掉不匹配的行。
3.  在选择列表中为行集中的每个计算表达式。
4.  应用列别名（注意这是一个单独的步骤，这意味着您不能在选择列表的表达式中使用别名）。
5.  `GROUP BY`根据子句，将组压缩为每组一行。
6.  根据组评估`HAVING`条件，过滤掉不匹配的组。
7.  根据`ORDER BY`子句对结果进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:18:51.720

所有其他建议都可以，但是要回答您的基本问题，写下来就足够了

```
 SELECT id  From T2
  Group By Id
  Having Count(*) = 5 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-29T14:37:31.993

我想提一下，在 PostgreSQL 中，没有办法在 having 子句中使用别名列。

IE

从具有 my_id = 1 的用户中选择 usr_id 作为 my_id

不会工作。

另一个不起作用的例子：

SELECT su.usr_id AS my_id, COUNT(*) AS val FROM sys_user AS su GROUP BY su.usr_id HAVING val >= 1

会有同样的错误：val column is not known。

我强调这一点是因为 Bill Karwin 为 Postgres 写了一些不真实的东西：

“您不能在 WHERE 子句中使用列别名，但可以在 HAVING 子句中使用。这就是您遇到错误的原因。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-08T22:15:39.587

我认为您可以像这样重写您的查询：

```
SELECT t1.id
FROM t1
WHERE (SELECT COUNT(t2.id)
     FROM t2
     WHERE t2.id = t1.id
          ) = 5; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T22:20:57.470

试试这个

```
SELECT t1.id,
    (SELECT COUNT(t2.id) as myCount
     FROM t2
     WHERE t2.id = t1.id and myCount=5
          ) as num_things
FROM t1 
```

# iphone - 在Objective-C中初始化为类变量时，C结构被分配在哪种内存上

> ID：426224
> 
> 赞同：3
> 
> 时间：2009-01-08T22:12:55.957
> 
> 标签：iphone, c, objective-c, struct

考虑以下：

```
typedef struct
{
  float m00, m01, m02, m03;
  float m10, m11, m12, m13;
  float m20, m21, m22, m23;
  float m30, m31, m32, m33;
} Matrix;

@interface TestClass : NSObject
{
  Matrix matrix;
}

- (TestClass *) init;
@end 
```

* * *

```
@implementation TestClass
- (TestClass *) init
{
  self = [super init];
  matrix = (Matrix) {1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f};
  return self;
}
@end 
```

当“矩阵”变量不再相关时（或当整个对象被释放时），如何确保正确释放结构分配的 64 个字节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T22:42:23.217

在这种情况下，矩阵*应该*嵌入到由 ObjectiveC 编译器为 TestClass 的实例生成的结构中。它的生命周期绑定到它所属的 TestClass 的实例，就像 int 或 float 成员一样。

如果您检查指针，您可以轻松地对此进行测试。

```
TestClass* testAddress = [[TestClass alloc] init];
Matrix* matrixAddress = &(testAddress->matrix);

int rawTest = (int) testAddress;
int rawMatrix = (int) matrixAddress;
int memberOffset = rawMatrix - rawTest;

printf("%i", memberOffset); 
```

我这里没有编译器，但我想它只会咕哝一些关于邪恶类型转换的警告并生成代码。输出应该是恒定的，例如 4 或 8，具体取决于您的目标架构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:57:52.497

在这种情况下，当包含它的对象被释放时，您绝对不需要对结构做任何事情来释放其内存。结构的内存是内联在对象中的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T01:02:55.210

顺便说一句，核心动画结构 CATransform3D 具有与您的矩阵相同的内部结构：

```
struct CATransform3D
   {
   CGFloat m11, m12, m13, m14;
   CGFloat m21, m22, m23, m24;
   CGFloat m31, m32, m33, m34;
   CGFloat m41, m42, m43, m44;
}; 
```

您可能希望使用 Apple 提供的这种类型，而不是定义自定义类型。Apple 还提供了一些非常方便的函数来操作这些矩阵。

# c - 什么是 LD_PRELOAD 技巧？

> ID：426230
> 
> 赞同：395
> 
> 时间：2009-01-08T22:14:10.667
> 
> 标签：c, linux, environment-variables

我最近在[proggit](http://www.reddit.com/r/programming/comments/7o8d9/tcmalloca_faster_malloc_than_glibcs_open_sourced/c06wjka)上遇到了对它的引用，并且（截至目前）它没有被解释。

我怀疑[这](https://stackoverflow.com/questions/335108/hide-symbols-in-shared-object-from-ld#335253)可能是它，但我不确定。

* * *

## 回答 #1

> 赞同：473
> 
> 时间：2009-01-08T22:20:50.060

如果您设置`LD_PRELOAD`为共享对象的路径，则该文件将在任何其他库（包括 C 运行时）**之前**`libc.so`加载。因此，要`ls`使用您的特殊`malloc()`实现运行，请执行以下操作：

```
$ LD_PRELOAD=/path/to/my/malloc.so /bin/ls 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2009-01-08T22:18:26.027

您可以通过创建具有相同符号的库并在 中指定库来覆盖库存库中的符号`LD_PRELOAD`。

有些人使用它来指定非标准位置的库，但`LD_LIBRARY_PATH`更好地用于此目的。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-12-09T06:20:54.120

正如许多人提到的，`LD_PRELOAD`用于预加载库。顺便说一句，您可以通过命令**检查**设置是否可用。`ldd`

示例：假设您需要预加载自己的`libselinux.so.1`.

```
> ldd /bin/ls
    ...
    libselinux.so.1 => /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f3927b1d000)
    libacl.so.1 => /lib/x86_64-linux-gnu/libacl.so.1 (0x00007f3927914000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f392754f000)
    libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f3927311000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f392710c000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f3927d65000)
    libattr.so.1 => /lib/x86_64-linux-gnu/libattr.so.1 (0x00007f3926f07000) 
```

因此，设置您的预加载环境：

```
export LD_PRELOAD=/home/patric/libselinux.so.1 
```

再次检查您的图书馆：

```
>ldd /bin/ls
    ...
    libselinux.so.1 =>
    /home/patric/libselinux.so.1 (0x00007fb9245d8000)
    ... 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2009-01-08T22:19:38.410

有了`LD_PRELOAD`你，你可以给图书馆优先权。

例如，您可以编写一个实现`malloc`和`free`. `LD_PRELOAD`并且通过将这些与您一起加载`malloc`并且`free`将被执行而不是标准的。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-07-24T09:41:45.377

`LD_PRELOAD`列出具有覆盖标准集的函数的共享库，就像这样`/etc/ld.so.preload`做一样。这些是由 loader 实现的`/lib/ld-linux.so`。如果您只想覆盖几个选定的函数，您可以通过创建一个覆盖目标文件并设置来做到这一点`LD_PRELOAD`；此目标文件中的函数将仅覆盖那些函数，而其他函数则保持原样。

有关共享库的更多信息，请访问 [http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-04T10:03:22.323

要导出`mylib.so`到 env：

```
$ export LD_PRELOAD=/path/mylib.so
$ ./mybin 
```

要禁用它：

```
$ unset LD_PRELOAD 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-11T10:11:33.740

这是有关预加载的详细博客文章：

[https://blog.cryptomilk.org/2014/07/21/what-is-preloading/](https://blog.cryptomilk.org/2014/07/21/what-is-preloading/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-31T03:16:17.157

使用`LD_PRELOAD`路径，您可以强制应用程序加载器加载提供的共享对象，而不是提供的默认值。

开发人员通过提供不同版本的共享对象来使用它来调试他们的应用程序。

我们用它来破解某些应用程序，通过使用准备好的共享对象覆盖现有函数。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-30T16:29:39.960

当使用 LD_PRELOAD 时，该文件将在任何其他文件之前加载。用于 `$export LD_PRELOAD=/path/lib`预加载 lib。这甚至可以在程序中使用。

# parsing - 傻瓜解析器和编译器。从哪儿开始？

> ID：426239
> 
> 赞同：13
> 
> 时间：2009-01-08T22:16:34.687
> 
> 标签：parsing, compiler-construction

这是一个很好的[清单](https://stackoverflow.com/questions/41785/learning-resources-on-parsers-interpreters-and-compilers)，但是对于这个领域的一个完整的新手来说，最好的清单是什么。适合来自更高级别背景（VB6、C#、Java、Python）的人 - 不熟悉 C 或 C++。在这个阶段，我对手写解析和 Lex/Yacc 更感兴趣。

如果我只主修计算机科学而不是心理学，我可能会在大学里上过这门课。那好吧。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-08T22:34:31.687

请看：[学习编写编译器](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler)

也很有趣：

*   [如何编写编程语言](https://stackoverflow.com/questions/229854/how-to-write-a-programming-language)
*   [解析我在哪里可以了解它](https://stackoverflow.com/questions/34081/parsing-where-can-i-learn-about-it)
*   [关于解析器解释器和编译器的学习资源](https://stackoverflow.com/questions/41785/learning-resources-on-parsers-interpreters-and-compilers)（好的，你已经提到了这个。

还有更多关于这个主题的内容。但我可以做一个简短的介绍：

第一步是词法分析。字符流被转换为标记流。标记可以很简单，例如 == <= + - （等），也可以很复杂，例如标识符和数字。如果你喜欢我可以详细说明这一点。

下一步是将令牌流转换为语法树或其他表示形式。这称为解析步骤。

在创建解析器之前，您需要编写语法。例如我们创建一个表达式解析器：

**代币**

```
addOp = '+' | '-';
mulOp = '*' | '/';
parLeft = '(';
parRight = ')';
number = digit, {digit};
digit = '0'..'9';

Each token can have different representations: + and = are both addOp and 
23 6643 and 223322 are all numbers. 
```

**语言**

```
exp = term | exp, addOp, term;  
// an expression is a series of terms separated by addOps.
term = factor | term, mulOp, factor;
// a term is a series of factors separated by mulOps
factor = addOp, factor | parLeft, exp, parRight | number;
// a factor can be an addOp followed by another factor, 
// an expression enclosed in parentheses or a number. 
```

**词法分析器**

我们创建一个遍历字符流的状态引擎，创建一个令牌

```
s00 
  '+', '-' -> s01       // if a + or - is found, read it and go to state s01.
  '*', '/' -> s02
  '('      -> s03
  ')'      -> s04
  '0'..'9' -> s05
  whitespace -> ignore and retry  // if a whitespace is found ignore it
  else ERROR      // sorry but we don't recognize this character in this state.
s01
  found TOKEN addOp     // ok we have found an addOp, stop reading and return token
s02 
  found TOKEN mulOp
s03
  found TOKEN parLeft
s04
  found TOKEN parRight
s05
  '0'..'9'     -> s05    // as long as we find digits, keep collecting them
  else found number      // last digit read, we have a number 
```

**解析器**

现在是时候创建一个简单的解析器/评估器了。这在代码中是完整的。通常它们是使用表创建的。但我们保持简单。读取令牌并计算结果。

```
ParseExp
  temp = ParseTerm // start by reading a term
  while token = addOp do
    // as long as we read an addop keep reading terms
    if token('+') then temp = temp + ParseTerm  // + so we add the term
    if token('-') then temp = temp - ParseTerm  // - so we subtract the term
  od
  return temp // we are done with the expression

ParseTerm
  temp = ParseFactor
  while token = mulOp do
    if token('*') then temp = temp * ParseFactor
    if token('/') then temp = temp / ParseFactor
  od
  return temp

ParseFactor
  if token = addOp then
    if token('-') then return - ParseFactor  // yes we can have a lot of these
    if token('+') then return ParseFactor
  else if token = parLeft then
    return ParseExpression
    if not token = parRight then ERROR
  else if token = number then
    return EvaluateNumber   // use magic to translate a string into a number 
```

这是一个简单的例子。在实际示例中，您将看到错误处理是解析器的重要组成部分。

我希望这能澄清一点;-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T05:54:51.253

如果您是一个完整的 n00b，那么最容易访问的资源（从术语的两个意义上来说）可能是[Jack Crenshaw 的教程](http://compilers.iecc.com/crenshaw/)。它远非全面，但对于入门来说，除了早已绝版的书籍之外，我想不出任何接近的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-29T22:35:01.217

我想推荐一篇我写的文章，名为[使用 C# 4.0 实现编程语言](http://www.codeproject.com/KB/recipes/programminglanguagetoools.aspx)。我试图让新手可以使用它。它并不全面，但之后应该更容易理解其他更高级的文本。

# .net - 如何共享 App.config？

> ID：426245
> 
> 赞同：25
> 
> 时间：2009-01-08T22:18:26.587
> 
> 标签：.net, visual-studio

如何在 Visual Studio 解决方案中的多个项目之间共享/链接 App.config 或 Web.config？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-01-08T22:24:00.990

在您从 Visual Studio 的**解决方案资源管理器中获得的“****添加现有项**”对话框中，您可以将指向磁盘上另一个文件的链接添加到项目中。**为此，您必须单击Add**按钮右侧的向下箭头，然后选择**Add As Link**。

 ******* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T13:36:11.060

[微软的另一种方法](http://support.microsoft.com/kb/555396)：

> 使用`<appSettings>`元素的文件属性来指定将定义公共`<appSettings>`元素的外部文件。
> 
> 外部文件将具有与 app.config 文件相同的架构，但根节点必须是`<appSettings>` 而不是`<configuration>`.
> 
> **创建通用配置文件：**
> 
> 1.  在“文件”菜单上，指向“新建”，然后单击“文件”。
> 2.  在“新建文件”对话框中，执行以下操作：
>     
>     
>     
>     一种。在类别窗格中，选择常规。
>     湾。在模板窗格中，选择 XML 文件。
>     C。单击“打开”按钮创建一个新的通用配置设置文件。
>     
>     
> 3.  添加一个新`<appSettings>`元素。
>     
>     
> 4.  `<appSettings>`使用元素在节点中根据需要添加尽可能多的通用配置设置，就像使用`<add>`任何普通 app.config 文件一样。
>     
>     
> 5.  保存配置文件。
>     
>     
> 
> **在每个项目中指定通用配置文件**
> 
> 1.  打开每个客户端项目的 app.config 文件。
>     
>     
> 2.  导航到节点`<appSettings>`内的元素。`<configuration>`如果元素不存在，则添加一个新元素。
>     
>     
> 3.  向元素添加一个新的属性文件，`<appSettings>`并指定通用配置文件的相对路径作为其值。
>     客户端项目现在将能够访问通用配置设置。
>     
>     
> 
> **例子**
> 
> 以下示例显示了如何在外部文件中定义通用配置设置。
> 
> ```
>  <?xml version="1.0" encoding="utf-8" ?>
>         <appSettings>
>             <add key="commonSetting1" value="MyApplication1" />
>             <add key="commonSetting2" value="MySetting" />
>         </appSettings> 
> ```
> 
> 以下示例展示了如何在项目的 app.config 文件中指定通用配置文件的路径。
> 
> ```
>  <?xml version="1.0" encoding="utf-8" ?>
>         <appSettings file=”c:\commonSettings.config”&gt;
>             <add key="myAppSpecificSetting" value="Setting1" />
>         </appSettings> 
> ```
> 
> 如示例所示，客户端项目的 app.config 文件`<appSettings>`除了指向通用配置文件外，还可以在元素中指定其他设置。如果多次指定相同的设置，则使用最后指定的值。如果公用配置文件和客户端项目 app.config 文件中指定了相同的设置，则使用公用配置文件中指定的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-08T22:25:41.410

首先，请记住 App.config 或 web.config 对在解决方案中的启动项目建立的“过程”中使用的任何项目中运行的所有代码都是可见的......即，如果您的解决方案有一个控制台应用程序和 5 个类库，或者一个 WinForms 应用程序和 4 个类库，或者一个 WIndows 服务和 3 个类库，或者一个控制台应用程序用作启动项目，另一个控制台应用程序用作类库，然后你没问题，配置 app.config 和所有引用的文件，在所有项目中都是可见的。

其次，如果您将在您的解决方案中运行两个或多个单独的可执行进程（例如作为服务器的 Windows 服务和 Winforms 客户端），那么如果您希望它们共享特定的配置设置，您**可以**将这些设置放在machine.config 文件，尽管您应该小心执行此操作.. 一些企业服务器团队对此不满意..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-08T13:51:41.573

根据nawfal的帖子，如果要使用ConfigurationManager操作appSettings，请使用configSource属性：

```
<?xml version="1.0" encoding="utf-8" ?>
<appSettings configSource=”c:\commonSettings.config”&gt;
    <add key="myAppSpecificSetting" value="Setting1" />
</appSettings> 
```

# javascript - 当通过小书签插入时，jquery 在某些站点中的行为很奇怪

> ID：426247
> 
> 赞同：2
> 
> 时间：2009-01-08T22:18:47.820
> 
> 标签：javascript, jquery, bookmarklet

我正在整理一个小书签，将 jquery 插入到调用它的页面中。在许多页面上它工作得很好，但在像[http://www.cnn.com](http://www.cnn.com)（包括原型和 scriptaculous）这样的页面上，它的行为有点奇怪。

`$(blah..).appendTo("body")`不工作而`$(blah..).appendTo(document.getElementsByTagName("body")[0])`工作

`$("#id").hide()`，`.show()`并且`.css()`不工作。

我尝试将变量从`$`to更改为`jQuery`，`$k = jQuery.noConflict()`但结果是相同的。

注意：在许多网页上它都可以正常工作，只有在 cnn.com 和其他一些网页上它不能。

有没有人遇到过这个，你有什么指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:26:02.430

回答我自己的问题

in scriptaculous/effect 会导致 jquery出现`Array.prototype.call()`此问题。

解决方案位于[http://dev.jquery.com/ticket/3248](http://dev.jquery.com/ticket/3248)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T22:22:49.947

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# html - 为什么要使用表格来构建布局？

> ID：426253
> 
> 赞同：27
> 
> 时间：2009-01-08T22:19:39.080
> 
> 标签：html, css, html-table

查看 Stack Overflow 的源代码，我注意到他们使用了很多表格和内联 CSS，我发现奇怪的是使用内联表格属性格式。

`<table width="100%">`

我只是好奇他们为什么使用表格来构建他们的模板而不是流行的（或曾经流行的）DIV 是否有任何特定的原因。

同样......使用CSS的目的包括在同一页面上使用内联CSS（我知道可能有一个很好的答案/解决方案......我只是好奇它们是什么）

我知道将表格用于表格数据没有任何问题......但在这种情况下，Stack Overflows 表格用于结构。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-08T23:21:16.773

Tables vs. Divs 是一场毫无意义的圣战。

以特定方式使用表格进行布局存在特定问题，可能会导致问题。其中之一是在单个表格中构建整个站点布局，以处理边距和位置 - 由于表格的呈现方式，这经常意味着网站不会在内容下载时由浏览器引擎逐步呈现，并且只能在收到整个东西后渲染。对于大页面或慢速调制解调器用户，他们可能会长时间盯着空白页面，这是“坏事”。不要介意在 mozilla/ie5 一代浏览器中表格呈现的许多不一致，这使得一致的跨浏览器表格布局有些痛苦，尤其是单元格中的图像。

纯 div 路径的支持者喜欢谈论内容与表示，因为理论上 HTML 4.01 是纯内容，所有这些都是有意义的。div 提供了抽象意义上的有意义的组织结构，然后由 CSS 独家呈现。在这些参数中，表仅在用于包含实际表格数据时才有效。当然，这忽略了这样一个事实，即对于任何足够复杂的布局，几乎总是有相当多的空 div 漂浮在周围，只是为了支持呈现 CSS 的必要钩子，打破了这种抽象的第一层。一旦这种抽象被破坏，就没有法律规定，当您的布局只需要 HTML 中没有有意义的内容的表示挂钩时，div 在某种程度上比 table 更合适。

最后，它是关于了解所有方法的局限性并使用最合适的方法。在很多情况下，使用表格比设置无意义（即无内容意义）的 div 数组更容易，并且表格呈现限制不适用。如果表格很小并且代表内部内容的一小部分，则渲染延迟无关紧要。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-01-08T22:21:24.803

**没有参与过SO开发，我只泛泛的说一下：**

我发现跨浏览器通常比基于 - 的布局`tables`更容易且更一致。`CSS`

`CSS`此外，在尝试完成任务时经常会出现随机发射。我想它可以在以后重构。

至于他们为什么选择在 HTML 而不是 CSS 中设置表格的宽度，我不能说。

我知道 SO 在开始时使用了一位真正的、诚实的设计师。不过，我不知道那个设计师是否给了他们网站应该是什么样子或实际标记的图像。

请不要因为我这么说而激怒我。我们不都是 CSS 忍者。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-01-08T22:26:41.423

SO 可能是由程序员编写的，而不是 Web 开发人员。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-08T22:26:37.193

桌子并不邪恶，但它们的某些用途（曾经无处不在）是邪恶的。即，使用分隔符、嵌套单元格等来控制边距和填充。

尽管现在每个人都在谈论使用 css 和 div 进行布局，但事实是 css 在布局方面很糟糕。你只能做这么多。查看一些建议的解决方案，以使用 css 获得 2 或 3 列布局，它们都很糟糕。投掷a`<table><tr><td id="left-column"><td id="right-column"></tr></table>`要容易得多。

css 只是不适合非平凡的布局（我的意思是纯 div/css）

我刚才抛出的表格解决方案需要使用 css 来控制宽度和填充以及边框和背景图像等。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-01-08T23:48:18.700

[放弃并使用表格](http://giveupandusetables.com/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-13T15:25:58.250

因为 Internet Explorer 不支持[display:table](http://www.w3.org/TR/CSS21/visuren.html#propdef-display) CSS 属性，它提供了类似网格的布局模型（相当于 html 表格的呈现方式）。网格模型是对许多布局建模的最简单、最灵活的方法。

所以你有三个选择，没有一个有吸引力：

*   牺牲对 Internet Explorer 的支持（所有其他现代浏览器都支持`display:table`属性，这已成为 CSS2 标准十多年的一部分）
*   使用昂贵且难以维护的繁琐 CSS 变通方法。
*   牺牲语义纯度并使用 TABLE 元素。

SO 选择了最后一个选项，可能是因为他们认为对**Internet Explorer 用户的支持比对****残疾用户**的支持更重要，并且因为他们想要快速开发和易于维护的东西。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-10T18:48:19.550

我是一个相当聪明的人，至少不低于平均水平，但我发现 css 布局完全不直观。表格非常直观。我认为衡量一项好技术的一个指标是您在阅读手册时必须多久参考一次。与 css 相比，表格以这种方式将 CSS 从水中吹了出来。一次又一次，在使用 css 时，我不得不挖掘以弄清楚如何做这样的[事情](https://stackoverflow.com/questions/533607/can-i-get-a-little-help-from-some-of-you-css-wizard-guru-ninja-goddess-god-mavens)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-13T15:42:03.537

IE8 将是最后一个支持 CSS 显示的主要浏览器：table-* 值，因此区别将消失。希望这将结束关于 CSS 有多难的抱怨，人们可以停止用演示文稿污染标记。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-08T22:36:11.480

杰夫和他的团队正在快速而肮脏地完成它。这是一个非常快速的开发周期，没有时间重构大部分混乱。

面对现实吧——除非你是专家，否则 CSS 对表格结构来说非常耗时。

内联样式和包含的 css 只是他们试图完成它的标志，而不是担心（至少在第一次迭代中）这样做的“正确”方式。正确的方法是任何可行的方法并快速完成。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-08T23:36:43.247

**表格和布局**

SO的布局**不是**基于表格的。

快速浏览一下，我会说 SO 布局是 80% 基于 div 和 20% 基于 table。表格用于标题和“徽章”框。表格使用适用于徽章恕我直言（毕竟它是一个项目列表），对标题不太好。
在其他任何地方，都会使用 div。

**内联 CSS**

同样，使用了许多内联定义（可能是为了快速模拟站点的结构），但 SO 也正确使用了 css（设置 div 的样式并提供打印格式）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-13T15:02:14.493

“css 太难了”和“表格更快更容易”的借口，再加上对使用表格进行结构标记有什么问题的一些完全正确的疑虑。

问题是问为什么 SO 选择使用表、内联 css 等，我认为答案可能无非是他们不熟悉优雅降级和语义，或者他们认为它不够重要投入时间和资源。

不知道 css 并没有错，但是仅仅因为你不知道 css 就忽略语义标记和正确使用 css 是错误的。

提倡您的网站在每个使用表格的浏览器中看起来都一样，同时不考虑那些不使用可视化浏览器的人有点自私 - 这是一个强烈的词，我为语气道歉，因为我不'不打算侮辱。

顺便说一句 - 我对使用表格进行结构标记是一场“圣战”的想法感到不满。虽然有些人可能认为语义标记被过度支持，但它并不是基于盲目的信仰。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-13T15:35:42.520

我不知道，但我能想到的唯一解释是 Jeff 并不像他希望我们认为的那样支持 Web 标准，而且团队中没有一个人对 CSS 如此热心。程序员经常使用跨浏览器、易用性和许多其他所谓的时间优势来为他们缺乏 CSS 技能找借口。我并不是说，作为一种批评，他们可能真的很擅长编程 C#/Java/Ruby/SQL/whatever，他们似乎无法承认他们并不像我们一群人那样真正了解某些东西穿着马球领，挥舞着 Mac Book 的设计师......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-13T13:38:35.987

我的想法是他们会选择表格，因为（除了参数表 vs css）

*   他们需要快速推出功能以获得意见
*   毕竟这只是公开测试版。
*   他们更多地尝试了 ASP.NET MVC，减少了布局问题
*   SO 都是关于编程问题和答案的，最后才是最重要的。
*   SO 就是通过奖励积分和徽章来表彰贡献者，它做得相当不错（这也可能是一个有争议的话题）。
*   等等....

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-01-08T22:35:23.713

CSS 很棒，可以真正简化您的标记，但是，有时将内容与表格对齐更容易、更可靠。同样对于动态生成的代码，非基于 CSS 的样式的一些痛点也不那么糟糕。具体来说，由于您是动态创建标记的，因此您可以在功能代码中重构样式元素。

至于内联样式，我经常在构建页面时使用它们，然后尝试将它们重新分解为外部工作表。这使我的测试变得更容易（无需进行硬刷新），并且更改在一个文件中而不是两个文件中。

# javascript - 使用 jQuery 为复选框设置“选中”

> ID：426258
> 
> 赞同：4427
> 
> 时间：2009-01-08T22:20:24.913
> 
> 标签：javascript, jquery, checkbox, selected, checked

我想做这样的事情来勾选`checkbox`使用**jQuery**：

```
$(".myCheckBox").checked(true); 
```

或者

```
$(".myCheckBox").selected(true); 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：6288
> 
> 时间：2009-01-08T22:25:08.447

## 现代 jQuery

使用[`.prop()`](https://api.jquery.com/prop)：

```
$('.myCheckbox').prop('checked', true);
$('.myCheckbox').prop('checked', false); 
```

## DOM API

如果您只使用一个元素，则始终可以访问底层[`HTMLInputElement`](https://developer.mozilla.org/en/docs/Web/API/HTMLInputElement)并修改其[`.checked`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#Properties_checkbox_radio)属性：

```
$('.myCheckbox')[0].checked = true;
$('.myCheckbox')[0].checked = false; 
```

使用`.prop()`and`.attr()`方法代替它的好处是它们将对所有匹配的元素进行操作。

## jQuery 1.5.x 及以下

该`.prop()`方法不可用，因此您需要使用[`.attr()`](https://api.jquery.com/attr).

```
$('.myCheckbox').attr('checked', true);
$('.myCheckbox').attr('checked', false); 
```

请注意，这是[jQuery 1.6 版之前的单元测试使用的方法，](https://github.com/jquery/jquery/blob/1.5.2/test/unit/attributes.js#L157)并且比使用更可取，`$('.myCheckbox').removeAttr('checked');`因为如果最初选中该框，则后者将更改对[`.reset()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement.reset)包含它的任何表单的调用的行为 - 微妙但可能不受欢迎的行为改变。

有关更多上下文，有关从 1.5.x 到 1.6 的转换中属性/属性处理的更改的一些不完整讨论`checked`可以在[版本 1.6 发行说明](https://blog.jquery.com/2011/05/03/jquery-16-released/)和[文档的](https://api.jquery.com/prop)**属性与属性**部分中找到。[`.prop()`](https://api.jquery.com/prop)

* * *

## 回答 #2

> 赞同：758
> 
> 时间：2009-01-08T22:25:25.183

采用：

```
$(".myCheckbox").attr('checked', true); // Deprecated
$(".myCheckbox").prop('checked', true); 
```

如果你想检查一个复选框是否被选中：

```
$('.myCheckbox').is(':checked'); 
```

* * *

## 回答 #3

> 赞同：337
> 
> 时间：2011-05-06T19:31:21.063

这是使用 jQuery 选中和取消选中复选框的正确方法，因为它是跨平台标准，并且*允许*表单重新发布。

```
$('.myCheckBox').each(function(){ this.checked = true; });

$('.myCheckBox').each(function(){ this.checked = false; }); 
```

通过这样做，您将使用 JavaScript 标准来检查和取消选中复选框，因此任何正确实现复选框元素的“已选中”属性的浏览器都将完美地运行此代码。这*应该*是所有主流浏览器，但我无法在 Internet Explorer 9 之前进行测试。

**问题**（jQuery 1.6）：

一旦用户单击一个复选框，该复选框就会停止响应“选中”属性更改。

这是一个在有人*单击*复选框后复选框属性无法完成工作的示例（这发生在 Chrome 中）。

**[小提琴](http://jsfiddle.net/xixonia/zgcrB/)**

**解决方案：**

通过在[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)元素上使用 JavaScript 的“checked”属性，我们能够直接解决问题，而不是试图操纵 DOM 去做我们*想要*它做的事情。

[**小提琴**](http://jsfiddle.net/xixonia/WnbNC/)

此插件将更改 jQuery 选择的任何元素的选中属性，并在所有情况下成功选中和取消选中复选框。因此，虽然这可能看起来像是一个过分的解决方案，但它会让您的网站的用户体验更好，并有助于防止用户感到沮丧。

```
(function( $ ) {
    $.fn.checked = function(value) {
        if(value === true || value === false) {
            // Set the value of the checkbox
            $(this).each(function(){ this.checked = value; });
        } 
        else if(value === undefined || value === 'toggle') {
            // Toggle the checkbox
            $(this).each(function(){ this.checked = !this.checked; });
        }

        return this;
    };
})( jQuery ); 
```

或者，如果您不想使用插件，可以使用以下代码片段：

```
// Check
$(':checkbox').prop('checked', true);

// Un-check
$(':checkbox').prop('checked', false);

// Toggle
$(':checkbox').prop('checked', function (i, value) {
    return !value;
}); 
```

* * *

## 回答 #4

> 赞同：159
> 
> 时间：2009-01-08T22:24:24.483

你可以做

```
$('.myCheckbox').attr('checked',true) //Standards compliant 
```

或者

```
$("form #mycheckbox").attr('checked', true) 
```

如果您在要触发的复选框的 onclick 事件中有自定义代码，请改用此代码：

```
$("#mycheckbox").click(); 
```

您可以通过完全删除该属性来取消选中：

```
$('.myCheckbox').removeAttr('checked') 
```

您可以像这样检查所有复选框：

```
$(".myCheckbox").each(function(){
    $("#mycheckbox").click()
}); 
```

* * *

## 回答 #5

> 赞同：84
> 
> 时间：2010-08-20T18:19:03.963

您还可以使用新方法扩展 $.fn 对象：

```
(function($)  {
   $.fn.extend({
      check : function()  {
         return this.filter(":radio, :checkbox").attr("checked", true);
      },
      uncheck : function()  {
         return this.filter(":radio, :checkbox").removeAttr("checked");
      }
   });
}(jQuery)); 
```

然后你可以这样做：

```
$(":checkbox").check();
$(":checkbox").uncheck(); 
```

或者，如果您使用其他使用这些名称的库，您可能希望给它们提供更多独特的名称，例如 mycheck() 和 myuncheck()。

* * *

## 回答 #6

> 赞同：68
> 
> 时间：2009-01-08T22:36:14.897

```
$("#mycheckbox")[0].checked = true;
$("#mycheckbox").attr('checked', true);
$("#mycheckbox").click(); 
```

最后一个将触发复选框的单击事件，其他则不会。因此，如果您在要触发的复选框的 onclick 事件中有自定义代码，请使用最后一个。

* * *

## 回答 #7

> 赞同：64
> 
> 时间：2011-03-23T15:22:24.483

要检查一个复选框，您应该使用

```
 $('.myCheckbox').attr('checked',true); 
```

或者

```
 $('.myCheckbox').attr('checked','checked'); 
```

并且要取消选中复选框，您应该始终将其设置为 false：

```
 $('.myCheckbox').attr('checked',false); 
```

如果你这样做

```
 $('.myCheckbox').removeAttr('checked') 
```

它会一起删除属性，因此您将无法重置表单。

[糟糕的演示 jQuery 1.6](http://jsfiddle.net/mcgrailm/34vhs/)。我认为这是坏的。对于 1.6，我将就此发表一篇新文章。

[新的工作演示 jQuery 1.5.2](http://jsfiddle.net/mcgrailm/24FLg/)在 Chrome 中工作。

两个演示都使用

```
$('#tc').click(function() {
    if ( $('#myCheckbox').attr('checked')) {
        $('#myCheckbox').attr('checked', false);
    } else {
        $('#myCheckbox').attr('checked', 'checked');
    }
}); 
```

* * *

## 回答 #8

> 赞同：54
> 
> 时间：2010-09-20T11:43:08.620

这将选择具有指定属性且值包含给定子字符串“ckbItem”的元素：

```
$('input[name *= ckbItem]').prop('checked', true); 
```

它将选择其名称属性中包含 ckbItem 的所有元素。

* * *

## 回答 #9

> 赞同：49
> 
> 时间：2012-03-09T12:28:49.063

假设问题是...

# 如何按**值检查复选框集？**

请记住，在典型的复选框集中，所有输入标签都具有相同的名称，**它们的不同之处在于属性`value`**：集合的每个输入都没有 ID。

Xian 的答案可以通过*更具体的选择器*进行扩展，使用以下代码行：

```
$("input.myclass[name='myname'][value='the_value']").prop("checked", true); 
```

* * *

## 回答 #10

> 赞同：47
> 
> 时间：2012-06-24T11:33:42.010

我错过了解决方案。我会一直使用：

```
if ($('#myCheckBox:checked').val() !== undefined)
{
    //Checked
}
else
{
    //Not checked
} 
```

* * *

## 回答 #11

> 赞同：43
> 
> 时间：2013-03-14T09:40:12.660

**要使用jQuery 1.6**或更高版本检查复选框，只需执行以下操作：

```
checkbox.prop('checked', true); 
```

要取消选中，请使用：

```
checkbox.prop('checked', false); 
```

下面是我喜欢使用 jQuery 来切换复选框的方法：

```
checkbox.prop('checked', !checkbox.prop('checked')); 
```

* * *

如果您使用的是**jQuery 1.5**或更低版本：

```
checkbox.attr('checked', true); 
```

要取消选中，请使用：

```
checkbox.attr('checked', false); 
```

* * *

## 回答 #12

> 赞同：38
> 
> 时间：2012-10-23T00:41:23.697

这是一种不使用 jQuery 的方法

```
function addOrAttachListener(el, type, listener, useCapture) {
  if (el.addEventListener) {
    el.addEventListener(type, listener, useCapture);
  } else if (el.attachEvent) {
    el.attachEvent("on" + type, listener);
  }
};

addOrAttachListener(window, "load", function() {
  var cbElem = document.getElementById("cb");
  var rcbElem = document.getElementById("rcb");
  addOrAttachListener(cbElem, "click", function() {
    rcbElem.checked = cbElem.checked;
  }, false);
}, false);
```

```
<label>Click Me!
  <input id="cb" type="checkbox" />
</label>
<label>Reflection:
  <input id="rcb" type="checkbox" />
</label>
```

* * *

## 回答 #13

> 赞同：32
> 
> 时间：2011-10-25T08:51:47.433

这是使用按钮选中和取消选中的代码：

```
var set=1;
var unset=0;
jQuery( function() {
    $( '.checkAll' ).live('click', function() {
        $( '.cb-element' ).each(function () {
            if(set==1){ $( '.cb-element' ).attr('checked', true) unset=0; }
            if(set==0){ $( '.cb-element' ).attr('checked', false); unset=1; }
        });
        set=unset;
    });
}); 
```

更新：这是使用更新的 Jquery 1.6+ prop 方法的相同代码块，它替换了 attr：

```
var set=1;
var unset=0;
jQuery( function() {
    $( '.checkAll' ).live('click', function() {
        $( '.cb-element' ).each(function () {
            if(set==1){ $( '.cb-element' ).prop('checked', true) unset=0; }
            if(set==0){ $( '.cb-element' ).prop('checked', false); unset=1; }
        });
        set=unset;
    });
}); 
```

* * *

## 回答 #14

> 赞同：31
> 
> 时间：2012-09-10T10:26:10.500

试试这个：

```
$('#checkboxid').get(0).checked = true;  //For checking

$('#checkboxid').get(0).checked = false; //For unchecking 
```

* * *

## 回答 #15

> 赞同：30
> 
> 时间：2011-06-24T08:27:21.133

我们可以使用`elementObject`jQuery 来检查属性：

```
$(objectElement).attr('checked'); 
```

我们可以将它用于所有 jQuery 版本而不会出现任何错误。

更新：Jquery 1.6+ 具有替换 attr 的新 prop 方法，例如：

```
$(objectElement).prop('checked'); 
```

* * *

## 回答 #16

> 赞同：26
> 
> 时间：2012-04-17T06:34:33.313

如果您正在使用[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)进行应用程序开发，并且您在想要立即显示的按钮上有一个值，请记住这样做

```
$('span.ui-[controlname]',$('[id]')).text("the value"); 
```

我发现没有span，不管你做什么，界面都不会更新。

* * *

## 回答 #17

> 赞同：26
> 
> 时间：2013-08-16T06:17:37.977

这是如何检查多个复选框的代码和演示...

**[http://jsfiddle.net/tamilmani/z8TTt/](http://jsfiddle.net/tamilmani/z8TTt/)**

```
$("#check").on("click", function () {

    var chk = document.getElementById('check').checked;
    var arr = document.getElementsByTagName("input");

    if (chk) {
        for (var i in arr) {
            if (arr[i].name == 'check') arr[i].checked = true;
        }
    } else {
        for (var i in arr) {
            if (arr[i].name == 'check') arr[i].checked = false;
        }
    }
}); 
```

* * *

## 回答 #18

> 赞同：22
> 
> 时间：2013-10-12T08:23:42.580

另一种可能的解决方案：

```
 var c = $("#checkboxid");
    if (c.is(":checked")) {
         $('#checkboxid').prop('checked', false);
    } else {
         $('#checkboxid').prop('checked', true);
    } 
```

* * *

## 回答 #19

> 赞同：22
> 
> 时间：2016-09-23T18:43:14.200

正如@livefree75 所说：

**jQuery 1.5.x 及以下**

您还可以使用新方法扩展 $.fn 对象：

```
(function($)  {
   $.fn.extend({
      check : function()  {
         return this.filter(":radio, :checkbox").attr("checked", true);
      },
      uncheck : function()  {
         return this.filter(":radio, :checkbox").removeAttr("checked");
      }
   });
}(jQuery)); 
```

但是在新版本的 jQuery 中，我们必须使用这样的东西：

**jQuery 1.6+**

```
 (function($)  {
       $.fn.extend({
          check : function()  {
             return this.filter(":radio, :checkbox").prop("checked", true);
          },
          uncheck : function()  {
             return this.filter(":radio, :checkbox").prop("checked",false);
          }
       });
    }(jQuery)); 
```

然后你可以这样做：

```
 $(":checkbox").check();
    $(":checkbox").uncheck(); 
```

* * *

## 回答 #20

> 赞同：19
> 
> 时间：2013-01-11T13:05:35.360

如果使用移动设备并且您希望界面更新并将复选框显示为未选中，请使用以下命令：

```
$("#checkbox1").prop('checked', false).checkboxradio("refresh"); 
```

* * *

## 回答 #21

> 赞同：19
> 
> 时间：2015-04-21T10:29:07.817

对于 jQuery 1.6+

```
$('.myCheckbox').prop('checked', true);
$('.myCheckbox').prop('checked', false); 
```

对于 jQuery 1.5.x 及以下版本

```
$('.myCheckbox').attr('checked', true);
$('.myCheckbox').attr('checked', false); 
```

去检查，

```
$('.myCheckbox').removeAttr('checked'); 
```

* * *

## 回答 #22

> 赞同：18
> 
> 时间：2013-05-22T07:25:31.423

请注意[Internet Explorer 9](http://en.wikipedia.org/wiki/Internet_Explorer_9)之前的 Internet Explorer 中的内存泄漏，如[jQuery 文档所述](http://api.jquery.com/prop/)：

> 在版本 9 之前的 Internet Explorer 中，如果不删除该属性（使用 .removeProp( )) 在从文档中删除 DOM 元素之前。要安全地在 DOM 对象上设置值而不发生内存泄漏，请使用 .data()。

* * *

## 回答 #23

> 赞同：18
> 
> 时间：2013-11-14T06:34:53.620

选中和取消选中

```
$('.myCheckbox').prop('checked', true);
$('.myCheckbox').prop('checked', false); 
```

* * *

## 回答 #24

> 赞同：17
> 
> 时间：2013-07-16T02:10:52.093

```
$('controlCheckBox').click(function(){
    var temp = $(this).prop('checked');
    $('controlledCheckBoxes').prop('checked', temp);
}); 
```

* * *

## 回答 #25

> 赞同：16
> 
> 时间：2014-05-27T15:11:43.787

这可能是最短和最简单的解决方案：

```
$(".myCheckBox")[0].checked = true; 
```

或者

```
$(".myCheckBox")[0].checked = false; 
```

* * *

更短的是：

```
$(".myCheckBox")[0].checked = !0;
$(".myCheckBox")[0].checked = !1; 
```

* * *

这里也是[一个*jsFiddle*](http://jsfiddle.net/8PCx8/)。

* * *

## 回答 #26

> 赞同：15
> 
> 时间：2013-09-18T01:14:15.430

纯 JavaScript 非常简单，开销也少得多：

```
var elements = document.getElementsByClassName('myCheckBox');
for(var i = 0; i < elements.length; i++)
{
    elements[i].checked = true;
} 
```

[这里的例子](http://jsfiddle.net/Zup4m/)

* * *

## 回答 #27

> 赞同：14
> 
> 时间：2012-01-05T13:26:52.107

我无法使用：

```
$("#cb").prop('checked', 'true');
$("#cb").prop('checked', 'false'); 
```

true 和 false 都会选中复选框。对我有用的是：

```
$("#cb").prop('checked', 'true'); // For checking
$("#cb").prop('checked', '');     // For unchecking 
```

* * *

## 回答 #28

> 赞同：14
> 
> 时间：2015-03-05T13:10:51.583

当您选中一个复选框时；

```
$('.className').attr('checked', 'checked') 
```

这可能还不够。您还应该调用下面的函数；

```
$('.className').prop('checked', 'true') 
```

特别是当您删除复选框选中属性时。

* * *

## 回答 #29

> 赞同：12
> 
> 时间：2013-02-27T15:49:10.110

**这是使用 jQuery**的完整答案****

 **我对其进行了测试，它可以 100% 工作：D

```
 // when the button (select_unit_button) is clicked it returns all the checed checkboxes values 
    $("#select_unit_button").on("click", function(e){

             var arr = [];

             $(':checkbox:checked').each(function(i){
                 arr[i] = $(this).val(); // u can get id or anything else
             });

              //console.log(arr); // u can test it using this in google chrome
    }); 
```

* * *

## 回答 #30

> 赞同：11
> 
> 时间：2013-06-10T13:17:51.853

在 jQuery 中，

```
if($("#checkboxId").is(':checked')){
    alert("Checked");
} 
```

或者

```
if($("#checkboxId").attr('checked')==true){
    alert("Checked");
} 
```

在 JavaScript 中，

```
if (document.getElementById("checkboxID").checked){
    alert("Checked");
} 
```

* * *

## 回答 #31

> 赞同：11
> 
> 时间：2014-07-08T18:22:56.527

如果您使用[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)，生成许多复选框，然后必须使用 JavaScript***选择/取消选择所有***，您可以执行以下操作。

**HTML**

```
@foreach (var item in Model)
{
    @Html.CheckBox(string.Format("ProductId_{0}", @item.Id), @item.IsSelected)
} 
```

**JavaScript**

```
function SelectAll() {       
        $('input[id^="ProductId_"]').each(function () {          
            $(this).prop('checked', true);
        });
    }

    function UnselectAll() {
        $('input[id^="ProductId_"]').each(function () {
            $(this).prop('checked', false);
        });
    } 
```

* * *

## 回答 #32

> 赞同：11
> 
> 时间：2016-09-29T13:55:54.237

这可能会帮助某人。

HTML5

```
 <input id="check_box" type="checkbox" onclick="handleOnClick()"> 
```

JavaScript。

```
 function handleOnClick(){

      if($("#check_box").prop('checked'))
      {        
          console.log("current state: checked");
      }
      else
      {         
          console.log("current state: unchecked");
      }    
 } 
```

* * *

## 回答 #33

> 赞同：10
> 
> 时间：2017-11-01T13:19:52.150

```
if($('jquery_selector').is(":checked")){
  //somecode
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #34

> 赞同：9
> 
> 时间：2018-09-15T17:57:26.690

如果您正在使用`.prop('checked', true|false)`并且没有更改**复选框**，则需要添加`trigger('click')`如下：

```
// Check
$('#checkboxF1').prop( "checked", true).trigger('click');

// Uncheck
$('#checkboxF1').prop( "checked", false).trigger('click'); 
```

* * *

## 回答 #35

> 赞同：8
> 
> 时间：2013-05-13T09:50:11.360

```
$(".myCheckBox").prop("checked","checked"); 
```

* * *

## 回答 #36

> 赞同：6
> 
> 时间：2014-04-23T06:34:58.567

你可以试试这个：

```
$('input[name="activity[task_state]"]').val("specify the value you want to check ") 
```

* * *

## 回答 #37

> 赞同：6
> 
> 时间：2017-03-14T20:32:38.217

**如果你碰巧在使用[Bootstrap](https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29)（可能是不知情的）......**

```
$('#myCheckbox').bootstrapToggle('on')
$('#myCheckbox').bootstrapToggle('off') 
```

[http://www.bootstraptoggle.com/](http://www.bootstraptoggle.com/)

* * *

## 回答 #38

> 赞同：6
> 
> 时间：2017-12-01T07:08:53.107

您可以使用 JavaScript 以不同方式检查复选框选中条件。你可以在下面看到。

1.  第一种方法—— `$('.myCheckbox').prop('checked', true);`

2.  第二种方法—— `$('.myCheckbox').attr('checked', true);`

3.  第三种方法（检查复选框是否选中） -`$('.myCheckbox').is(':checked')`

* * *

## 回答 #39

> 赞同：6
> 
> 时间：2019-01-02T15:10:04.930

# 2019 年 1 月编辑

您可以使用：[**.prop(propertyName)**](https://api.jquery.com/prop/#prop-propertyName) -*添加的版本：1.6*

```
p {margin: 20px 0 0;}
b {color: red;}
label {color: red;}
```

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>

<input id="check1" type="checkbox" checked="checked">
<label for="check1">Check here</label>
<p></p>

<script>
$( "input" ).change(function() {
  var $input = $( this );
  $( "p" ).html(
    "The .attr( \"checked\" ): <b>" + $input.attr( "checked" ) + "</b><br>" +
    "The .prop( \"checked\" ): <b>" + $input.prop( "checked" ) + "</b><br>" +
    "The .is( \":checked\" ): <b>" + $input.is( ":checked" ) + "</b>" );
}).change();
</script>

</body>
</html>
```

# 关于 Angular 框架

# 示例 1

*在您的 .html 文件中*

```
<input type="checkbox" (change)="toggleEditable($event)"> 
```

*在您的 .ts 文件中*

```
toggleEditable(event) {
     if ( event.target.checked ) {
         this.contentEditable = true;
    }
} 
```

# 示例 2

*在您的 .html 文件中*

```
<input type="checkbox" [(ngModel)]="isChecked" (change)="checkAction(isChecked ? 'Action1':'Action2')" /> 
```

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2019-12-27T21:53:06.800

JavaScript 解决方案也可以很简单并且开销更少：

```
document.querySelectorAll('.myCheckBox').forEach(x=> x.checked=1) 
```

```
document.querySelectorAll('.myCheckBox').forEach(x=> x.checked=1)
```

```
checked A: <input type="checkbox" class="myCheckBox"><br/>
unchecked: <input type="checkbox"><br/>
checked B: <input type="checkbox" class="myCheckBox"><br/>
```

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2020-12-04T12:15:43.907

如果您有 id 来检查它，您可以这样做

`document.getElementById('ElementId').checked = false`

这要取消选中

`document.getElementById('ElementId').checked = true`

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2021-07-29T07:06:45.600

如果您考虑使用 vanilla js 而不是 jquery，则有一个解决方案：

```
//for one element: 
document.querySelector('.myCheckBox').checked = true /* or false */ //will select the first matched element
//for multiple elements:
for (const checkbox of document.querySelectorAll('.myCheckBox')) {
checkbox.checked = true //or false
} 
```

* * *

## 回答 #43

> 赞同：-6
> 
> 时间：2013-09-13T06:37:02.743

总体而言：

```
$("#checkAll").click(function(){
    $(".somecheckBoxes").prop('checked',$(this).prop('checked')?true:false);
}); 
```

# c# - 按最后一个字符分组列表

> ID：426265
> 
> 赞同：0
> 
> 时间：2009-01-08T22:21:25.490
> 
> 标签：c#, list, lambda, group-by

[替代文字 http://barbarosalp.com/questions/list.png](http://barbarosalp.com/questions/list.png)

你好，

正如您在上面的图片中看到的，我有一个“键”列表，其中填充了 Request.Form.AllKeys，其中键以“txt”开头。

例如，我想按他们的最后一个 ID 对它们进行分组

```
[0] "txtTitle:2" "txtDescription:2"
[1] "txtTitle:3" "txtDescription:3" 
```

我怎样才能用 lambda 表达式实现这一点。

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T22:27:08.223

```
var groups = keys.GroupBy(e=>e.Split(':').Last()); 
```

# sql-server - 是否有 64 位版本的 SQL Server Management Studio (SSMS) 2005？

> ID：426269
> 
> 赞同：4
> 
> 时间：2009-01-08T22:23:56.390
> 
> 标签：sql-server, sql-server-2005, ssms

是否有 x64 或 ia64 版本的 SQL Server Management Studio (SSMS) 2005？我看到的所有信息都让我相信只有 x86 版本。

此链接是我证明不存在 64 位版本的证据 - [http://support.microsoft.com/?id=906892](http://support.microsoft.com/?id=906892)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-08T22:28:36.690

不，管理工作室（以及就此而言的 Visual Studio）仍然是 32 位的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-05-20T00:20:01.183

答案是肯定的。

转到 Microsoft 网站并搜索它或尝试下面的链接。

[http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6053c6f8-82c8-479c-b25b-9aca13141c9e](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6053c6f8-82c8-479c-b25b-9aca13141c9e)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-20T10:59:27.657

请访问以下网站。它在我的电脑上工作。视窗 7（64 位）

[http://www.microsoft.com/downloads/en/details.aspx?familyid=c243a5ae-4bd1-4e3d-94b8-5a0f62bf7796&displaylang=en](http://www.microsoft.com/downloads/en/details.aspx?familyid=c243a5ae-4bd1-4e3d-94b8-5a0f62bf7796&displaylang=en)

# python - 如何（成功）从命令行 openSSL 解码编码密码？

> ID：426294
> 
> 赞同：3
> 
> 时间：2009-01-08T22:30:01.417
> 
> 标签：python, linux, bash, encryption, openssl

使用 PyCrypto（尽管我在 ObjC 中也尝试过使用 OpenSSL 绑定）：

```
from Crypto.Cipher import DES
import base64
obj=DES.new('abcdefgh', DES.MODE_ECB)
plain="Guido van Rossum is a space alien.XXXXXX"
ciph=obj.encrypt(plain)
enc=base64.b64encode(ciph)
#print ciph
print enc 
```

输出 base64 编码值：

```
ESzjTnGMRFnfVOJwQfqtyXOI8yzAatioyufiSdE1dx02McNkZ2IvBg== 
```

如果你在口译员中，ciph 会给你

```
'\x11,\xe3Nq\x8cDY\xdfT\xe2pA\xfa\xad\xc9s\x88\xf3,\xc0j\xd8\xa8\xca\xe7\xe2I\xd15w\x1d61\xc3dgb/\x06' 
```

很容易。我应该能够将此输出通过管道传输到 OpenSSL 并对其进行解码：

我测试以确保 b64 解码有效 -

```
python enctest.py | openssl enc -base64 -d
+ python enctest.py
+ openssl enc -base64 -d
,?Nq?DY?T?pA???s??,?jب???I?5w61?dgb/ 
```

不漂亮，但你可以看到它解码得很好，“dgb”和“Nq”仍然存在。

但要全力以赴：

```
python enctest.py | openssl enc -base64 -d | openssl enc -nosalt -des-ecb -d -pass pass:abcdefgh
+ python enctest.py
+ openssl enc -nosalt -des-ecb -d -pass pass:abcdefgh
+ openssl enc -base64 -d
bad decrypt
15621:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:461:
j?7????vc]???LE?m³??q? 
```

我究竟做错了什么？我试过使用 -k abcdefgh -iv 0000000000000000 或以交互方式输入密码 - 同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T07:41:44.500

`echo ESzjTnGMRFnfVOJwQfqtyXOI8yzAatioyufiSdE1dx02McNkZ2IvBg== | openssl enc -nopad -a -des-ecb -K 6162636465666768 -iv 0 -p -d`

6162636465666768 是以十六进制写出的 ASCII “abcdefgh”。

但请注意，ECB 模式下的 DES 可能不是编码密码的好方法，也不是您可能听说过在 Unix 系统上使用的“DES crypt”。（对于密码，通常最好使用难以反转的算法（通过重新生成结果而不是解密存储的密码来检查密码）。即使您确实需要能够解密这些加密密码，单 DES 和就保密性而言，尤其是欧洲央行是糟糕的选择。）

# c# - 使用 C# 的服务上的 SACL || 使用 C# 获取具有 ACCESS_SYSTEM_SECURITY 权限的服务的句柄

> ID：426295
> 
> 赞同：2
> 
> 时间：2009-01-08T22:30:28.653
> 
> 标签：c#, permissions, dacl

任何人都知道如何使用 C# 在远程服务上获取 SACL？我尝试了许多不同的方法，但基本上没有任何效果。我可以在本地机器上获取 DACL 和 SACL，但在远程机器上获取其中任何一个似乎都是不可能的。

我所做的是创建一个名为的类，该类`ServiceSecurity`继承自该类`NativeObjectSecurity`并且其行为与`RegistrySecurity`该类非常相似。以下是我拥有的两个构造函数：

```
public ServiceSecurity(string serviceName, AccessControlSections includeSections)
        : base(true, ResourceType.Service, serviceName, includeSections, null, null)
    {
    }

    public ServiceSecurity(System.Runtime.InteropServices.SafeHandle handle, AccessControlSections includeSections)
        : base(true, ResourceType.Service, handle, includeSections)
    {
    } 
```

第一个使用服务名称，而第二个需要服务的句柄。显然，第一个可以很好地获取 DACL 和 SACL，因为它都是本地的，但是要访问远程机器，我使用`ServiceController`该类在远程机器上查找服务。得到它后，我将`ServiceHandle`服务的属性传递给`ServiceSecurity`我构建的类，此时我得到一个未经授权的访问异常，这似乎不正确，因为我的用户帐户是域的域管理员，而本地管理员在目标框上。我也有`SeSecurityPrivilege`权利，这应该允许我访问。

有人有想法么？似乎`SafeHandle`我得到的不正确，但`SafeHandle`属性说它没有关闭并且它是一个有效的句柄，所以我不太清楚发生了什么。

这是我用来尝试检索数据的代码：

```
ServiceSecurity sSec = new ServiceSecurity(services[i].ServiceName, accessSections);
string outputData = sSec.GetSecurityDescriptorSddlForm(accessSections); 
```

以上内容适用于本地权限和审核设置（DACL 和 SACL）。但它被设计为在本地机器上工作。如果我这样做：

```
ServiceSecurity sSec = new ServiceSecurity(services[i].ServiceHandle, accessSections);
string outputData = sSec.GetSecurityDescriptorSddlForm(accessSections); 
```

ServiceSecurity 构造函数在 SACL 的本地和远程服务器上均失败，如下所示，但仍适用于 DACL：

```
System.UnauthorizedAccessException: Attempted to perform an unauthorized operation.
   at System.Security.AccessControl.Win32.GetSecurityInfo(ResourceType resourceType, String name, SafeHandle handle, AccessControlSections accessControlSections, RawSecurityDescriptor& resultSd)
   at System.Security.AccessControl.NativeObjectSecurity.CreateInternal(ResourceType resourceType, Boolean isContainer, String name, SafeHandle handle, AccessControlSections includeSections, Boolean createByName, ExceptionFromErrorCode exceptionFromErrorCode, Object exceptionContext)
   at System.Security.AccessControl.NativeObjectSecurity..ctor(Boolean isContainer, ResourceType resourceType, SafeHandle handle, AccessControlSections includeSections) 
```

对于 accessSections，我只指定了一个`AccessControlSections`，无论是 Audit 还是 Access，并且每次我通过`ServiceHandle`.

* * *

更新：所以也许问题真的应该是，我如何获得`ACCESS_SYSTEM_SECURITY`有权获得 SACL 的服务的句柄？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T22:56:15.077

您从 ServiceController 获得的句柄将没有 ACCESS_SYSTEM_SECURITY 权限，因此您无法使用它访问 SACL。

为了获得该权利，您需要掌握该权利。您可能需要使用 DuplicateHandle 来获得额外的权限，但为远程系统启用 SeSecurityPrivilege 可能会很棘手。

您是否尝试过使用具有远程名称的命名服务构造函数？

我需要检查一下，然后回复你。如果明天之前没有人给出更好的答案，我会为你挖掘答案。

编辑：通过命名服务构造函数，我的意思是尝试使用服务名称以 \\server_name\service_name 或 \\IP_address\service_name 的形式创建一个 ServiceSecurity 对象。理论上它应该可以工作，但它可能不是因为 SeSecurityPrivilege 将在本地机器上而不是在远程机器上启用。

为了获得授予 ACCESS_SYSTEM_SECURITY 权限的句柄，您必须按照以下步骤操作：

*   检索句柄（从 ServiceController 或通过互操作）
*   为当前令牌启用 SeSecurityPrivilege（这是棘手的部分），请参阅：[AdjustTokenPrivileges](http://msdn.microsoft.com/en-us/library/aa375202(VS.85).aspx)、[TOKEN_PRIVILEGES](http://msdn.microsoft.com/en-us/library/aa379630(VS.85).aspx)、[LUID_AND_ATTRIBUTES](http://msdn.microsoft.com/en-us/library/aa379263(VS.85).aspx)等。
*   在句柄上调用[DuplicateHandle](http://msdn.microsoft.com/en-us/library/aa446616(VS.85).aspx)请求您需要的任何权限，包括 ACCESS_SYSTEM_SECURITY 以检索具有适当权限的新句柄。
*   禁用 SeSecurityPrivilege（如上）。

不幸的是，我没有适当设置测试环境来测试它，所以我不能保证它适用于远程服务。为远程服务器启用 SeSecurityPrivilege 似乎是主要的绊脚石。无论如何，我希望这至少有所帮助。

# python - 如何在 Python 中使用 HTTPPasswordMgrWithDefaultRealm()

> ID：426298
> 
> 赞同：2
> 
> 时间：2009-01-08T22:32:07.200
> 
> 标签：python

我需要编写一些使用 ftp 代理的 python ftp 代码。代理不需要身份验证，但我连接的 ftp 服务器需要。我有以下代码，但我收到“I/O 错误（ftp 错误）：501 USER 格式：proxy-user:auth-method@destination。正在关闭连接。” 错误。我的代码是：

```
import urllib2

proxies = {'ftp':'ftp://proxy_server:21'}
ftp_server = ' ftp.somecompany.com '
ftp_port='21'
username = 'aaaa'
password = 'secretPW'

password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm( )
top_level_url = ftp_server
password_mgr.add_password(None , top_level_url, username, password)

proxy_support = urllib2.ProxyHandler(proxies )
handler = urllib2.HTTPBasicAuthHandler(password_mgr )
opener = urllib2.build_opener(proxy_support )
opener = urllib2.build_opener(handler )
a_url = 'ftp://' + ftp_server + ':' + ftp_port + '/'
print a_url

try:
  data = opener.open(a_url )
  print data
except IOError, (errno, strerror):
  print "I/O error(%s): %s" % (errno, strerror) 
```

如果我能得到任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T22:41:37.757

我使用以下看起来相似的代码块，除了我在`top_level_url`我使用的协议中包含了协议（当然它是 http）。

您也可以尝试`install_opener`在每次`build_opener`通话后拨打电话，然后使用`urllib2.urlopen`

```
auth_handler = urllib2.HTTPBasicAuthHandler()
auth_handler.add_password(realm='RESTRICTED ACCESS',
                          uri='http://website.com',
                          user='username',
                          passwd='password')
opener = urllib2.build_opener(auth_handler)
urllib2.install_opener(opener)
urllib2.urlopen('http://website.com/....') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:09:27.643

我认为你需要改变这一点：

```
 opener = urllib2.build_opener(proxy_support )
    opener = urllib2.build_opener(handler ) 
```

对此：

```
 opener = urllib2.build_opener([proxy_support, handler]) 
```

这为您提供了一个具有身份验证和代理支持的开启者。`install_opener`仅当您希望在调用时使用自定义开启器时才需要使用`urllib2.urlopen`。

# php - 您如何使用链接发布数据

> ID：426310
> 
> 赞同：21
> 
> 时间：2009-01-08T22:35:25.180
> 
> 标签：php, html

我有一个数据库，其中包含某条街道上每所房子的居民。我有一个'house view' php 网页，当使用'post'给出门牌号时，它可以显示单个房屋和居民。我还有一个“街景”网页，其中列出了房屋清单。我想知道的是，您是否可以在街景视图上设置链接，该链接将链接到房屋视图并同时发布门牌号，而无需为每个视图设置表格？

问候

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-01-08T23:07:19.703

如果您想使用 POST 而不是 GET 来传递数据，您可以使用 PHP 和 JavaScript 的组合来完成，如下所示：

```
function formSubmit(house_number)
{
  document.forms[0].house_number.value = house_number;
  document.forms[0].submit();
} 
```

然后在 PHP 中遍历门牌号，并创建指向 JavaScript 函数的链接，如下所示：

```
<form action="house.php" method="POST">
<input type="hidden" name="house_number" value="-1">

<?php
foreach ($houses as $id => name)
{
    echo "<a href=\"javascript:formSubmit($id);\">$name</a>\n";
}
?>
</form> 
```

这样，您只有一个表单，其隐藏变量会根据您单击的链接进行修改。然后 JavaScript 提交表单。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-01-08T22:40:54.577

我假设每个房子都存储在自己的表中，并且有一个“id”字段，例如房子 id。因此，当您遍历房屋并显示它们时，您可以执行以下操作：

```
<a href="house.php?id=<?php echo $house_id;?>">
  <?php echo $house_name;?>
</a> 
```

然后在 house.php 中，您将使用 获取房屋 ID `$_GET['id']`，使用验证它`is_numeric()`，然后显示其信息。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-08T22:52:14.053

您不能通过以下方式发出 POST HTTP 请求`<a href="some_script.php">some_script</a>`

只需打开您的`house.php`，在其中找到您拥有的位置`$house = $_POST['houseVar']`并将其更改为：

`isset($_POST['houseVar']) ? $house = $_POST['houseVar'] : $house = $_GET['houseVar']`

在这样的`streeview.php`制作链接中：

`<a href="house.php?houseVar=$houseNum"></a>`

或者是其他东西。我只是不知道您的文件以及其中的内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2011-02-24T19:36:31.400

这是一个旧线程，但以防万一有人遇到我认为最直接的解决方案是使用 CSS 使传统表单看起来像锚链接。

@ben 是正确的，您可以使用 php 和 javascript 发送带有链接的帖子，但让我们问问 js 做了什么——本质上它创建了一个带有 style='display:none' 的表单，设置了一个带有 value=' 的输入/文本行某事'，然后提交。

但是，您可以通过制作表格来跳过所有这些。在输入/文本行（不是上面的表单本身）上设置 style='display:none'，然后使用 CSS 使按钮看起来像一个普通链接。

这是我使用的一个例子：

在 PHP 类中，

```
public function styleButton($style,$text){
    $html_str = "<form id='view_form' action='".$_SERVER['REQUEST_URI']."' method='post' >";
    $html_str .= "<input style='display:none;' name='list_style' type='text' value='".$style."' >";
    $html_str .= "<input id='view_button' type='submit' value='".$text."' >";
    $html_str .= "</form>";
    return $html_str;
} 
```

然后在 CSS id="view_form" 中设置 "display:inline;" 并在 CSS id="view_button" 中设置为：“background:none;border:none;color:#fff;cursor:pointer”

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-08T22:39:52.767

我将只使用查询字符串中的值将所需信息传递到下一页。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-26T09:13:06.567

我们应该让每个人的一切都变得更容易，因为您可以简单地将 JS 与 PHP 结合起来 将 PHP 和 JS 结合起来非常容易。

```
$house_number = HOUSE_NUMBER;
echo "<script type='text/javascript'>document.forms[0].house_number.value = $house_number; document.forms[0].submit();</script>"; 
```

或者更安全的方式

```
$house_number = HOUSE_NUMBER;
echo "<script type='text/javascript'>document.forms[0].house_number.value = " . $house_number . "; document.forms[0].submit();</script>"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-11T18:02:01.423

这篇文章对我的项目很有帮助，因此我也想分享我的经验。需要注意的重要一点是 POST 请求只能使用表单。当我尝试使用 ejs 呈现页面时，我有类似的要求。我需要呈现一个导航，其中包含一个本质上是超链接的项目列表，当用户选择其中任何一个时，服务器会以适当的信息进行响应。

所以我基本上使用循环将每个导航项创建为一个表单，如下所示：

```
<ul>
    begin loop...
        <li>
            <form action="/" method="post">
                <input type="hidden" name="country" value="India"/>
                <button type="submit" name="button">India</button>
            </form>               
        </li>
    end loop.
</ul>
```

它所做的是创建一个带有隐藏输入的表单，其分配的值与按钮​​上的文本相同。因此最终用户将只看到按钮中的文本，并且在单击时会向服务器发送一个发布请求。

请注意，输入框的 value 参数和 Button 文本完全相同，并且是使用 ejs 传递的值，我没有在上面的示例中显示以保持代码简单。

这是导航的屏幕截图... [在此处输入图像描述](https://i.stack.imgur.com/7tKta.png)

# c++ - 使用 BOOST::GIL 将 CYMK 图像转换为 RGB

> ID：426345
> 
> 赞同：2
> 
> 时间：2009-01-08T22:43:55.613
> 
> 标签：c++, boost, graphics, boost-gil

我正在尝试使用 boost 通用图像库将 CYMK 图像转换为 RGB。

以下代码无法编译

```
// read cmyk image file
cmyk8_image_t img;
jpeg_read_image( "1502-T2-C-PER.jpg", img );

// convert to rgb
rgb8_image_t rgb( img.dimensions() );
copy_pixels(
    color_converted_view<rgb8_image_t>(view(img)),
    view(rgb)); 
```

有人知道怎么修这个东西吗？

我将此代码基于教程代码

```
void x_luminosity_gradient(const rgb32fc_view_t& src, const gray8s_view_t& dst) {
    gray8_image_t ccv_image(src.dimensions());
    copy_pixels(color_converted_view<gray8_pixel_t>(src), view(ccv_image)); 
```

这是编译器输出：

```
1>c:\program files\boost\boost_1_35_0\boost\gil\step_iterator.hpp(164) : error C2664: 'boost::gil::detail::step_iterator_adaptor<Derived,Iterator,SFn>::step_iterator_adaptor(const Iterator &,SFn)' : cannot convert parameter 1 from 'const boost::gil::dereference_iterator_adaptor<Iterator,DFn>' to 'const boost::gil::rgb8_ptr_t &'
1>        with
1>        [
1>            Derived=boost::gil::memory_based_step_iterator<boost::gil::rgb8_ptr_t>,
1>            Iterator=boost::gil::rgb8_ptr_t ,
1>            SFn=boost::gil::memunit_step_fn<boost::gil::rgb8_ptr_t >
1>        ]
1>        and
1>        [
1>            Iterator=boost::gil::cmyk8_ptr_t ,
1>            DFn=boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>
1>        ]
1>        Reason: cannot convert from 'const boost::gil::dereference_iterator_adaptor<Iterator,DFn>' to 'const boost::gil::rgb8_ptr_t '
1>        with
1>        [
1>            Iterator=boost::gil::cmyk8_ptr_t ,
1>            DFn=boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>
1>        ]
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>        c:\program files\boost\boost_1_35_0\boost\gil\locator.hpp(271) : see reference to function template instantiation 'boost::gil::memory_based_step_iterator<Iterator>::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::pixel<ChannelValue,Layout>,DFn>>(const boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::pixel<ChannelValue,Layout>,DFn>> &)' being compiled
1>        with
1>        [
1>            Iterator=boost::gil::rgb8_ptr_t,
1>            ChannelValue=boost::gil::bits8,
1>            Layout=boost::gil::cmyk_layout_t,
1>            DFn=boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>
1>        ]
1>        c:\program files\boost\boost_1_35_0\boost\gil\image_view.hpp(101) : see reference to function template instantiation 'boost::gil::memory_based_2d_locator<StepIterator>::memory_based_2d_locator<boost::gil::memory_based_step_iterator<Iterator>>(const boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<Iterator>> &)' being compiled
1>        with
1>        [
1>            StepIterator=boost::gil::memory_based_step_iterator<boost::gil::rgb8_ptr_t>,
1>            Iterator=boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>>
1>        ]
1>        c:\documents and settings\james\my documents\code\animag\test\test.cpp(17) : see reference to function template instantiation 'boost::gil::image_view<Loc>::image_view<SrcView>(const View &)' being compiled
1>        with
1>        [
1>            Loc=boost::gil::rgb8_loc_t,
1>            SrcView=boost::gil::image_view<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>>>>>,
1>            View=boost::gil::image_view<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>>>>>
1>        ]
1>        c:\documents and settings\james\my documents\code\animag\test\test.cpp(48) : see reference to function template instantiation 'void processRGB<boost::gil::image_view<Loc>>(SrcView &)' being compiled
1>        with
1>        [
1>            Loc=boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>>>>,
1>            SrcView=boost::gil::image_view<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_view_t,boost::gil::default_color_converter>>>>>
1>        ]
1>c:\program files\boost\boost_1_35_0\boost\gil\pixel.hpp(146) : error C2440: '=' : cannot convert from 'const boost::gil::image<Pixel,IsPlanar,Alloc>' to 'boost::gil::bits8'
1>        with
1>        [
1>            Pixel=boost::gil::rgb8_pixel_t,
1>            IsPlanar=false,
1>            Alloc=std::allocator<unsigned char>
1>        ]
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>        c:\program files\boost\boost_1_35_0\boost\gil\pixel.hpp(128) : see reference to function template instantiation 'void boost::gil::pixel<ChannelValue,Layout>::assign<P>(const Channel &,boost::mpl::false_)' being compiled
1>        with
1>        [
1>            ChannelValue=boost::gil::bits8,
1>            Layout=boost::gil::rgb_layout_t,
1>            P=boost::gil::image<boost::gil::rgb8_pixel_t,false,std::allocator<unsigned char>>,
1>            Channel=boost::gil::image<boost::gil::rgb8_pixel_t,false,std::allocator<unsigned char>>
1>        ]
1>        c:\program files\boost\boost_1_35_0\boost\gil\algorithm.hpp(236) : see reference to function template instantiation 'boost::gil::pixel<ChannelValue,Layout> &boost::gil::pixel<ChannelValue,Layout>::operator =<boost::gil::image<Pixel,IsPlanar,Alloc>>(const P &)' being compiled
1>        with
1>        [
1>            ChannelValue=boost::gil::bits8,
1>            Layout=boost::gil::rgb_layout_t,
1>            Pixel=boost::gil::rgb8_pixel_t,
1>            IsPlanar=false,
1>            Alloc=std::allocator<unsigned char>,
1>            P=boost::gil::image<boost::gil::rgb8_pixel_t,false,std::allocator<unsigned char>>
1>        ]
1>        c:\program files\boost\boost_1_35_0\boost\gil\algorithm.hpp(231) : while compiling class template member function 'void boost::gil::detail::copier_n<I,O>::operator ()(boost::gil::iterator_from_2d<Loc2>,__w64 int,boost::gil::iterator_from_2d<Loc>) const'
1>        with
1>        [
1>            I=boost::gil::iterator_from_2d<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>>,
1>            O=boost::gil::iterator_from_2d<boost::gil::rgb8_loc_t>,
1>            Loc2=boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>,
1>            Loc=boost::gil::rgb8_loc_t
1>        ]
1>        c:\program files\boost\boost_1_35_0\boost\gil\algorithm.hpp(266) : see reference to class template instantiation 'boost::gil::detail::copier_n<I,O>' being compiled
1>        with
1>        [
1>            I=boost::gil::iterator_from_2d<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>>,
1>            O=boost::gil::iterator_from_2d<boost::gil::rgb8_loc_t>
1>        ]
1>        c:\program files\boost\boost_1_35_0\boost\gil\algorithm.hpp(292) : see reference to function template instantiation 'DstIterator boost::gil::detail::copy_with_2d_iterators<boost::gil::iterator_from_2d<Loc2>,boost::gil::iterator_from_2d<Loc>>(SrcIterator,SrcIterator,DstIterator)' being compiled
1>        with
1>        [
1>            DstIterator=boost::gil::iterator_from_2d<boost::gil::rgb8_loc_t>,
1>            Loc2=boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>,
1>            Loc=boost::gil::rgb8_loc_t,
1>            SrcIterator=boost::gil::iterator_from_2d<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>>
1>        ]
1>        c:\documents and settings\james\my documents\code\animag\test\test.cpp(44) : see reference to function template instantiation 'void boost::gil::copy_pixels<boost::gil::image_view<Loc>,boost::gil::image_view<boost::gil::rgb8_loc_t>>(const View1 &,const View2 &)' being compiled
1>        with
1>        [
1>            Loc=boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>,
1>            View1=boost::gil::image_view<boost::gil::memory_based_2d_locator<boost::gil::memory_based_step_iterator<boost::gil::dereference_iterator_adaptor<boost::gil::cmyk8c_ptr_t ,boost::gil::color_convert_deref_fn<const boost::gil::pixel<boost::gil::bits8,boost::gil::cmyk_layout_t> ,boost::gil::rgb8_image_t,boost::gil::default_color_converter>>>>>,
1>            View2=boost::gil::image_view<boost::gil::rgb8_loc_t>
1>        ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T17:42:36.870

发现问题

```
// read cmyk image file
cmyk8_image_t img;
jpeg_read_image( "1502-T2-C-PER.jpg", img );

//// convert to rgb
rgb8_image_t rgb( img.dimensions() );
copy_pixels(
    color_converted_view<rgb8_pixel_t>(view(img)),
    view(rgb)); 
```

诀窍是`rgb8_pixel_t`在调用 color_converted_view 时使用

# c# - 捕获非特定异常（例如 System.Exception）是一种不好的做法吗？为什么？

> ID：426346
> 
> 赞同：13
> 
> 时间：2009-01-08T22:44:24.133
> 
> 标签：c#, .net, exception, exception-handling

我目前正在进行代码审查，下面的代码让我跳了起来。我看到此代码存在多个问题。你是否同意我的观点？如果是这样，我该如何向我的同事解释这是错误的（顽固的类型......）？

*   捕获一个通用异常（Exception ex）
*   使用“if (ex is something)”而不是另一个 catch 块
*   我们吃 SoapException、HttpException 和 WebException。但是如果 Web 服务失败了，就没有什么可做的了。

代码：

```
try
{
    // Call to a WebService
}
catch (Exception ex)
{
    if (ex is SoapException || ex is HttpException || ex is WebException)
    {
        // Log Error and eat it.
    }
    else
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-08T22:47:21.083

咒语是：

*   只有在可以正确处理异常的情况下才应该捕获异常

因此：

*   您不应该捕获一般异常。

* * *

在你的情况下，是的，你应该抓住这些异常并做一些有用的事情（可能不仅仅是吃掉它们——你可以`throw`在记录它们之后）。

您的编码器正在使用`throw`(not `throw ex`) 这*很好*。

这是捕获多个特定异常的方法：

```
try
{
    // Call to a WebService
}
catch (SoapException ex)
{
    // Log Error and eat it
}
catch (HttpException ex)
{
    // Log Error and eat it
}
catch (WebException ex)
{
    // Log Error and eat it
} 
```

这几乎等同于您的代码所做的。您的开发人员可能这样做是为了避免重复“记录错误并吃掉它”块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T13:13:55.367

> 我目前正在进行代码审查，下面的代码让我跳了起来。我看到此代码存在多个问题。你是否同意我的观点？

不完全是，见下文。

> *   捕获一个通用异常（Exception ex）

一般来说，捕获一个通用异常实际上是可以的，只要你在得出无法处理它的结论时重新抛出它（使用 throw;）。代码就是这样做的，所以这里没有直接的问题。

> *   使用“if (ex is something)”而不是另一个 catch 块

catch 块的最终效果是实际上只处理了 SoapException、HttpException 等，而所有其他异常都沿调用堆栈向上传播。我想功能方面这是代码应该做的，所以这里也没有问题。

但是，从美学和可读性 POV 来看，我更喜欢多个 catch 块而不是“if (ex is SoapException || ..)”。一旦您将通用处理代码重构为一个方法，多个 catch 块的类型只会稍微多一些，并且对于大多数开发人员来说更容易阅读。此外，最后的投掷很容易被忽视。

> *   我们吃 SoapException、HttpException 和 WebException。但是如果 Web 服务失败了，就没有什么可做的了。

这里可能潜伏着代码的最大问题，但如果不了解更多关于应用程序的性质，很难给出建议。如果 Web 服务调用正在执行您稍后依赖的操作，那么仅记录并吃掉异常可能是错误的。通常，您让异常传播给调用者（通常在将其包装到例如 XyzWebServiceDownException 之后），甚至在重试 Web 服务调用几次之后（以便在存在虚假网络问题时更加健壮）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-08T23:40:26.797

捕获和重新抛出相同异常的问题在于，尽管 .NET 尽最大努力保持堆栈跟踪完好无损，但它总是最终会被修改，这会使跟踪异常实际来自何处变得更加困难（例如，异常行号可能看起来是重新抛出语句的行，而不是最初引发异常的行）。[这里有很多关于捕获/重新抛出、过滤和不捕获之间的区别的更多信息。](http://blogs.msdn.com/toub/archive/2004/03/05/84698.aspx)

当存在这样的重复逻辑时，您真正需要的是一个异常过滤器，以便您只捕获您感兴趣的异常类型。VB.NET 具有此功能，但不幸的是 C# 没有。假设的语法可能如下所示：

```
try
{
    // Call to a WebService
}
catch (Exception ex) if (ex is SoapException || ex is HttpException || /* etc. */)
{
    // Log Error and eat it
} 
```

虽然你不能这样做，但我倾向于对公共代码使用 lambda 表达式（你可以`delegate`在 C# 2.0 中使用 a ），例如

```
Action<Exception> logAndEat = ex => 
    {  
        // Log Error and eat it
    };

try
{
    // Call to a WebService
}
catch (SoapException ex)
{
    logAndEat(ex);
}
catch (HttpException ex)
{
    logAndEat(ex);
}
catch (WebException ex)
{
    logAndEat(ex);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-10T17:34:06.543

有时这是处理“捕获每个异常”场景的唯一方法，而不是实际捕获每个异常。

我认为有时，例如，低级框架/运行时代码需要确保没有异常逃逸。不幸的是，框架代码也无法知道线程执行的代码引发了哪些异常。

在这种情况下，可能的 catch 块可能如下所示：

```
try
{
   // User code called here
}
catch (Exception ex)
{
   if (ExceptionIsFatal(ex))
     throw;

   Log(ex);
} 
```

然而，这里有三个重要的点：

1.  这并不适用于所有情况。在代码审查中，我们对实际上有必要并因此允许的地方非常挑剔。
2.  ExceptionIsFatal() 方法确保我们不吃不应该被吞下的异常（ExecutionEngineException、OutOfMemoryException、ThreadAbortException 等）
3.  被吞下的东西被仔细记录（event-log、log4net、YMMV）

通常，我完全赞成通过终止 CLR 让未捕获的异常简单地“崩溃”应用程序的做法。然而，尤其是在服务器应用程序中，这有时是不明智的。如果一个线程遇到一个被认为是非致命的问题，则没有理由将整个进程撕下来，杀死所有其他正在运行的请求（例如，WCF 以这种方式处理某些情况）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T01:53:28.143

我想在这里补充一下，因为我见过的几乎所有 java / C# 代码中的异常处理都是不正确的。即，对于忽略的异常，您最终会遇到非常难以调试的错误，或者同样糟糕的是，您会得到一个晦涩的异常，它什么也没告诉您，因为盲目地遵循“捕获（异常）是不好的”，事情只会更糟。

首先，了解异常是一种促进跨代码层返回错误信息的方式。现在，错误 1：一个层不仅仅是一个堆栈帧，一个层是具有明确职责的代码。如果您只是编写接口和实现代码只是因为，那么您有更好的东西需要修复。

如果层设计得很好并且有特定的职责，那么错误信息在冒泡时具有不同的含义。<-这是做什么的关键，没有普遍的规则。

因此，这意味着当发生异常时，您有 2 个选项，但您需要了解您在层中的位置：

A）如果你在一个层的中间，你只是一个内部的，通常是私有的，辅助函数并且出现了问题：不要担心，让调用者接收异常。它完全没问题，因为您没有业务上下文，并且 1）您没有忽略错误，并且 2）调用者是您的层的一部分，应该知道这可能会发生，但您现在可能没有上下文来处理它。

或者 ...

B）你是层的顶部边界，内部的立面。然后，如果你得到一个异常，默认应该是 CATCH ALL 并阻止任何特定的异常跨越到上层，这对调用者来说没有意义，或者更糟糕的是，你可能会改变并且调用者将依赖于一个实现细节，两者都会打破。

应用程序的强度是层之间的解耦级别。在这里，您将按照一般规则停止一切并使用一般异常重新抛出错误，将信息转换为对上层更有意义的错误。

规则：层的所有入口点都应使用 CATCH ALL 保护，并翻译或处理所有错误。现在这种“已处理”仅发生 1% 的时间，大多数情况下您只需要（或可以）以正确的抽象返回错误。

不，我确信这很难理解。真实示例->

我有一个运行一些模拟的包。这些模拟在文本脚本中。有一个包可以编译这些脚本，还有一个通用的 utils 包，它只读取文本文件，当然还有基本的 java RTL。UML 依赖是->

模拟器->编译器->utilsTextLoader->Java文件

1) 如果某个私有内部的 utils 加载器出现问题，并且我得到 FileNotFound、Permissions 或其他任何内容，那就让它通过吧。您无能为力。

2) 在边界处，在最初调用的 utilsTextLoader 函数中，您将遵循上述规则和 CATCH_ALL。编译器不关心发生了什么，它只需要现在是否加载了文件。因此，在捕获中，重新抛出一个新异常并将 FileNotFound 或其他任何内容转换为“无法读取文件 XXXX”。

3) 编译器现在将知道源没有加载。这就是它需要知道的一切。因此，如果我稍后将 utilsTestLoader 更改为从网络加载，编译器将不会更改。如果您放开 FileNotFound 并在以后进行更改，您将一无所获地影响编译器。

4) 循环重复：为文件调用底层的实际函数在得到异常时将不做任何事情。所以它让它上升。

5）当异常到达模拟器和编译器之间的层时，编译器再次 CATCHES_ALL，隐藏任何细节并抛出更具体的错误：“无法编译脚本 XXX”

6）最后再重复一次循环，调用编译器的模拟器函数就放手了。

7）最终的边界是用户。用户是一个 LAYER 并且都适用。主要有一个 catches_ALL 的尝试，最后只是创建一个漂亮的对话框或页面，并向用户“抛出”一个翻译错误。

所以用户看到了。

* * *

模拟器：致命错误无法启动模拟器

-编译器：无法编译脚本 FOO1

--TextLoader: 无法读取文件 foo1.scp

---trl：文件未找到

* * *

相比于：

a) 编译器：NullPointer Exception <-common case and a lost night debugging a file name typo

b）加载器：找不到文件<-我是否提到加载器加载了数百个脚本？

或者

c) 什么都没有发生，因为一切都被忽略了！！！

当然，这假设在每次重新抛出时您都没有忘记设置原因异常。

好吧，我的 2cts。这个简单的规则多次救了我的命……

- 啤酒

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-08T23:20:55.477

您通常仍应在全局处理程序中捕获通用异常（这是记录意外异常的理想场所），但除此之外，如前所述，您应该只在其他地方捕获特定的异常类型，如果您打算对它们做某事。catch 块应该显式地查找这些异常类型，而不是像您发布的代码那样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T13:31:13.273

在这种情况下，我认为这不是一件坏事，但我也在我的代码中做了类似的事情，异常可以安全地忽略被捕获，其余的被重新抛出。正如[迈克尔的回应](https://stackoverflow.com/questions/426346/is-this-a-bad-practice-to-catch-a-non-specific-exception-such-as-system-exception#426356)所指出的，将每个捕获作为单独的块可能会导致一些可读性问题，这些问题可以通过走这条路线来防止。

关于向你的同事指出这一点，我认为你很难说服他们这是错误的做事方式——如果他们很固执，更是如此——因为以其他方式做事可能会导致可读性问题. 由于此版本仍然抛出无法处理的通用异常，因此符合实践的精神。但是，如果代码符合以下内容：

```
try
{
  // Do some work
}
catch (Exception ex)
{
  if (ex is SoapException)
  {
    // SoapException specific recovery actions
  }
  else if (ex is HttpException)
  {
    // HttpException specific recovery actions
  }
  else if (ex is WebException)
  {
    // WebException specific recoery actions
  }
  else
  {
    throw;
  }
} 
```

那么我认为你会有更多的理由担心，因为通过在一般异常块中检查特定异常来为特定异常工作是没有意义的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-16T07:00:06.840

王子只是为了捕捉你可以处理的异常。比如，如果你知道如何处理findnotfound，你就捕捉到filenotfoundexception，否则，不要捕捉它，让它被扔到上层。

# java - 用连续数字播种 java.util.Random

> ID：426350
> 
> 赞同：3
> 
> 时间：2009-01-08T22:45:37.843
> 
> 标签：java, random

我已将遇到的错误简化为以下代码行：

```
 int[] vals = new int[8];
    for (int i = 0; i < 1500; i++)
        vals[new Random(i).nextInt(8)]++;
    System.out.println(Arrays.toString(vals)); 
```

输出为： [0, 0, 0, 0, 0, 1310, 190, 0]

这只是选择连续数字来播种 Random 然后使用 nextInt 的 2 次方的人工制品吗？如果是这样，是否还有其他类似的陷阱我应该注意，如果没有，我做错了什么？（我不是在寻找上述问题的解决方案，只是对可能出现的问题有所了解）

* * *

丹，写得很好的分析。由于 javadoc 非常明确地说明了数字是如何计算的，所以为什么会发生这种情况并不神秘，就好像还有其他类似的异常需要注意一样——我没有看到任何关于连续种子的文档，而且我我希望对 java.util.Random 有一些经验的人可以指出其他常见的陷阱。

至于代码，需要几个并行代理具有可重复的随机行为，这些代理恰好从枚举的 8 个元素中进行选择，就像他们的第一步一样。一旦我发现了这种行为，这些种子都来自一个由已知种子创建的主 Random 对象。在该程序的前一个（顺序种子）版本中，所有行为在第一次调用 nextInt 后迅速分歧，所以我花了很长时间将程序的行为缩小到 RNG 库，我想避免以后那种情况。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-01-08T22:59:49.857

尽可能地，RNG 的种子本身应该是随机的。您正在使用的种子只会在一到两个位上有所不同。

很少有充分的理由在一个程序中创建两个单独的 RNG。您的代码不是有意义的情况之一。

只需创建一个RNG并重复使用它，就不会出现这个问题。

**回应[mmyers](https://stackoverflow.com/users/13531/mmyers)的评论：**

> 您是否碰巧知道 java.util.Random 足以解释为什么在这种情况下它选择 5 和 6？

答案在 java.util.Random 的源代码中，它是一个[线性同余 RNG](http://en.wikipedia.org/wiki/Linear_congruential_generator)。当您在构造函数中指定种子时，它的操作如下。

```
seed = (seed ^ 0x5DEECE66DL) & mask; 
```

掩码仅保留低 48 位并丢弃其他位。

在生成实际的随机位时，该种子的操作如下：

```
randomBits = (seed * 0x5DEECE66DL + 0xBL) & mask; 
```

现在，如果您认为[Parker](https://stackoverflow.com/users/42562/parker)使用的种子是连续的 (0 -1499)，并且它们被使用过一次然后被丢弃，那么前四个种子会生成以下四组随机位：

```
101110110010000010110100011000000000101001110100
101110110001101011010101011100110010010000000111
101110110010110001110010001110011101011101001110
101110110010011010010011010011001111000011100001 
```

请注意，在每种情况下，前 10 位都是相同的。这是一个问题，因为他只想生成 0-7 范围内的值（只需要几个位），而 RNG 实现通过将高位向右移动并丢弃低位来实现这一点。这样做是因为在一般情况下，高位比低位更随机。在这种情况下，它们不是因为种子数据很差。

最后，要了解这些位如何转换为我们得到的十进制值，您需要知道 java.util.Random 会在 n 是 2 的幂时产生一个特殊情况。它请求 31 个随机位（前 31 位来自48 以上），将该值乘以 n，然后将其向右移动 31 位。

乘以 8（本例中的 n 值）与左移 3 位相同。所以这个过程的最终效果是将 31 位向右移动 28 位。在上面的 4 个示例中的每一个中，这都会留下位模式 101（或十进制的 5）。

如果我们没有在一个值之后丢弃 RNG，我们会看到序列发散。虽然上面的四个序列都以 5 开头，但每个序列的第二个值分别是 6、0、2 和 4。初始种子的微小差异开始产生影响。

**针对更新的问题：** [java.util.Random](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Random.html)是线程安全的，可以跨多个线程共享一个实例，所以仍然不需要多个实例。如果您*确实*必须拥有多个 RNG 实例，请确保它们彼此*完全独立地*播种，否则您不能相信输出是独立的。

至于为什么会得到这种效果，java.util.Random 并不是最好的 RNG。它很简单，相当快，而且，如果你不仔细看，相当随机。然而，如果你对它的输出进行一些[严肃的测试](http://stat.fsu.edu/~geo/)，你会发现它是有缺陷的。[您可以在此处](http://www.alife.co.uk/nonrandom/)直观地看到这一点。

如果您需要更随机的 RNG，可以使用[java.security.SecureRandom](http://java.sun.com/j2se/1.5.0/docs/api/java/security/SecureRandom.html)。它有点慢，但它工作正常。不过，对您来说可能是个问题的一件事是它是不可重复的。具有相同种子的两个 SecureRandom 实例不会给出相同的输出。这是设计使然。

那么还有哪些其他选择呢？这是我插入[我自己的库](https://uncommons-maths.dev.java.net/)的地方。它包括 3 个可重复的伪 RNG，它们比 SecureRandom 更快，比 java.util.Random 更随机。它们不是我发明的，我只是从最初的 C 版本移植过来的。它们都是线程安全的。

我实现了这些 RNG，因为我的[进化计算代码](https://watchmaker.dev.java.net/)需要更好的东西。根据我最初的简短回答，这段代码是多线程的，但它只使用一个 RNG 实例，在所有线程之间共享。

# asp.net - 如何告诉搜索引擎两个域名是同一个网站？

> ID：426352
> 
> 赞同：6
> 
> 时间：2009-01-08T22:46:11.117
> 
> 标签：asp.net, http, seo

如果我有 2 个指向同一个网站的域名（例如：microsoft.com 和 microsoft.net 都指向 microsoft.com），搜索引擎如何区分这两个网站是同一个网站而不是重复内容？

我的问题是因为我知道例如谷歌有一个重复的内容过滤器，我想知道该怎么做才能声明性地说这两个域是相同的并且不是重复的内容网站。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-08T22:50:14.777

选择哪个是主域，然后在另一个上实施 301 重定向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T22:51:11.730

用户始终停留在输入的域中是否重要，或者第二个仅仅是第一个的别名？如果是后者，您可以在用户访问其中一个别名时将 HTTP 重定向到所需的域名。

编辑：猜猜马特打败了我。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T03:51:06.417

就像家伙说使用 301 标头重定向。但也尝试放置一个robot.txt来拒绝机器人访问并避免重复内容

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-30T16:32:04.370

使一个站点 301 重定向到另一个站点，但不要尝试 robots.txt 的愚蠢想法{至于 1 如果辅助站点是“真实”站点的 301，则 robots.txt 不能作为所有请求存在对于任何内容都指向主要内容，这意味着包括 robots.txt 在内的所有内容

因此在任何地方都没有重复的内容一个站点上的所有内容只有另一个只是说{你在错误的地方去这里而不是}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-08T22:51:27.363

您可以与大多数域名托管服务商建立永久转发（301）。

对于子域，您通常可以使用 HttpHandlers 来处理它。

# enums - 在 Managed C++ 2005 中声明枚举的正确方法？

> ID：426353
> 
> 赞同：1
> 
> 时间：2009-01-08T22:46:15.203
> 
> 标签：enums, managed-c++

如果我使用 /clr:oldSyntax 以下应该可以工作：

```
public __value enum IceCreamFlavors
{
   Vanilla,
   Chocolate,
   Sardine,
}; 
```

非oldSyntax中的等价物是什么？如何在 .NET 2.0 的托管 C++ 中声明“托管”枚举？

**编辑：** 当我遵循 JaredPar 的[建议](https://stackoverflow.com/questions/426353/proper-way-to-declare-an-enum-in-managed-c-2005#426362)时，如果我尝试将 IceCreamFlavor 传递给带有签名的函数：

```
OrderFlavor(IceCreamFlavors flav) 
```

通过运行

```
OrderFlavor(IceCreamFlavors::Sardine) 
```

我得到错误：

```
'IceCreamFlavors Sardine' : member function redeclaration not allowed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:50:40.033

尝试

```
enum class IceCreamFlavors {
  Vanilla,
  Chocolate,
  Sardine,
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-11-30T20:18:17.830

您是否有机会尝试在另一个类中声明您的枚举？IE：

```
public ref class Icecream
{
     public enum class flavours
     {
          Mint,
          Vanilla,
          Guac
     };
}; 
```

如果是，我猜您需要将其移出，以便它成为自己的类而不是嵌套类。（托管 c++ 是否允许嵌套类？）我的印象是，您曾经能够在另一个类中以非托管方式进行操作，但由于它现在是它自己的类，您可能不应该嵌套它们。我可能错了。我对托管 c++ 和 c# 的了解有点薄弱。

# project-management - 敏捷 - 任务分解 - 估计与否？

> ID：426361
> 
> 赞同：4
> 
> 时间：2009-01-08T22:50:32.263
> 
> 标签：project-management, agile, estimation

在我们的迭代计划中，我们经常发现自己和这个人处于同一个位置——[如果你没有经验，如何估计一个编程任务](https://stackoverflow.com/questions/425044/how-to-estimate-a-programming-task-if-you-have-no-experience-in-it)

在您给出合理的估计之前，我绝对同意原型设计。但这同样适用于任何需要一点架构和设计的东西——但我不太愿意在 sprint 的范围内做这一切。

基本思想是，您尽可能多地确定您有信心的任务，并按照正常情况估计这些任务。对于那些你不确定的领域，应该确定两种“类型”的任务：调查和实施。

调查任务是对您不确定的工作的简要描述，例如“调查如何将 Control X 绑定到数据”。为这些提供了估计。

实施任务是传统的粗略猜测，可能基于分配的故事点，您认为实施该功能需要多长时间。

在 sprint 期间，当调查任务完成时，开发人员应该处于对正在发生的事情有更好了解的阶段。然后可以识别“适当的”任务，它取代了实施占位符。此外，在此阶段可能会确定进一步的调查任务，并继续循环。

在上面的示例中，我们从 7 小时开始的调查任务和估计在 14 小时的实施任务开始。一旦完成第一次调查，任务 1、2 和 3 将在一定程度上被识别和估计，其中任务 3是另一项调查任务，稍后将确定任务 4 和 5。如您所见，第一次实施估计在 14 小时内交付了该功能 - 但实际情况是至少需要 4 + 7 + 3 + 4 + 2 = 20。比最初的估计多三分之一。

[替代文字 http://www.duncangunn.me.uk/myweb/images/estimate.png](http://www.duncangunn.me.uk/myweb/images/estimate.png)

欢迎所有想法 - 我的直觉是这会飞 - 我是对的还是我是错误的兄弟？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T11:58:04.600

我们所做的。

某些功能涉及新技术。我们无法准确估计它们。时期。

我们编了一个数字。基于几件事。“感觉”有多难？我们可以通过某种“部分”或“刚刚好”的实现来解决问题吗？

*   如果很难，那就很难。会很贵。

*   如果有很多部分，有一个好的内核和一些额外的东西分层，我们有可能只把内核放到一个版本中，然后把其他的东西放在一边。极少数事情是“全有或全无”，其中部分发布是不可能的。在这种情况下，我们必须为“所有人”提供足够的时间，而这会变得很昂贵。

我们的标准方法是获得有效的东西，如果我们因为意想不到的复杂性而用完时间，可能会将事情推迟到以后的 sprint。

你所说的“调查”，我们称之为技术尖峰冲刺。对于新事物，我们会编造估计数字以安抚那些认为有必要过度计划事物的经理。然后我们将技术推向高潮。一旦达到峰值，我们就可以根据我们现在所知道的情况来修改估计值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T23:45:43.510

实际上，该功能的实现需要 27 小时——你忘记了第一次调查是 7 小时，所以实际上实际实现的时间几乎是估计的两倍。

您可以通过两种方式进行此操作：

1.  尽你所能做出估计，并可能会在你的 sprint 中遇到井喷和项目速度下降（只有在功能既紧急又关键时才应该这样做）；或者
2.  为这个 sprint 安排调查并将实施留给另一个 sprint - 在不知道任务需要多长时间的情况下，产品负责人没有足够的信息来决定在哪个 sprint 中安排它甚至是否执行它一点也不。只有经过估计的任务才应该包含在您的 sprint 中。

第一个选择意味着您的 sprint 和项目估算有些武断。第二个选择为您的 sprint 提供了更多的可预测性。

在您的示例中，可能会为 Sprint 1 安排初步调查，但不知道任务需要多长时间，产品负责人无法决定如何安排它。如果你回来时估计要花 200 小时，产品负责人可能会决定根本不做这个功能，或者推迟到产品的第 2 版。估算出来了，产品负责人为 Sprint 2 安排任务 1、任务 2 和任务 3 的调查。估算任务 3 后，可以在 Sprint 3 或以后安排任务 4 和 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T23:44:30.627

估计特征通常是复杂的任务。一段时间后，您的估计会变得更好。但是好的方法可能是您使用故事点来估计特征。故事点是表达问题复杂性的抽象值（意思是在团队中达成一致）。您应该将相同的复杂性（相同数量的故事点）分配给具有相似复杂性的特征。然后稍后仅估计较小的特征集（或查看历史数据）就足够了，您应该能够估计需要多少时间。

具有相似复杂性的功能需要相似的时间来实现。

# c# - 使用 LINQ to SQL 耗尽数据库连接

> ID：426363
> 
> 赞同：1
> 
> 时间：2009-01-08T22:50:55.117
> 
> 标签：c#, linq, linq-to-sql, connection, pool

在开发一个相对简单的 Web 服务时，它获取帖子提供的数据并将其记录在数据库表中，我们收到此错误：

异常捕获：远程服务器返回错误：(500) Internal Server Er or。堆栈跟踪：在 System.Net.HttpWebRequest.GetResponse()

在某些服务器上，但在其他服务器上没有。得到这个的是物理机，其他的是虚拟机，显然物理服务器要强大得多。

据我们所知，问题在于每次查询后数据库连接都没有释放回池中。我正在使用下面的使用模式：

```
 using (VoteDaoDataContext dao = new VoteDaoDataContext())
                {

                    dao.insert_response_and_update_count(answerVal, swid, agent, geo, DateTime.Now, ip);
                    dao.SubmitChanges();
                    msg += "Thank you for your vote.";
                    dao.Dispose();
                } 
```

我添加了 dao.Dispose() 调用以确保在方法完成时释放连接，但我不知道是否有必要。

我是否正确使用了这种模式？我还需要做些什么来确保连接正确返回到池中吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T23:09:21.290

您的诊断信息不够好。HTTP/500 的详细信息不足以真正判断您的理论是否正确。如果您想解决问题，您将需要在日志记录中捕获完整的堆栈跟踪。我想你已经在这里得出了一个结论。不，您不需要 Dispose() 在 using{} 块结束之前。这就是 using{} 的*作用*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T00:54:31.997

我认为 dispose() 调用是多余的，但我想确定一下。

我们看到 SQL 日志中的连接池已饱和（我无法直接查看，我只是一名开发人员，而且这些东西在 prod 环境中运行），我的操作人员说他看到连接超时。 ..一旦超时，服务器就会再次开始运行，直到下一次它使连接池饱和。

我们正在经历调整连接池设置的过程......我想确定我没有做错任何事情，因为这是我第一次使用 Linq。

谢谢！

# oracle - 使用 SQL Developer 的包创建问题

> ID：426368
> 
> 赞同：0
> 
> 时间：2009-01-08T22:52:08.967
> 
> 标签：oracle, stored-procedures, plsql, oracle-sqldeveloper, ora-06550

所以我从来没有使用过存储过程，也没有很多数据库经验，我被分配了一个需要我创建一个包的任务，我被困住了。

使用 SQL Developer，我正在尝试使用此代码创建一个名为 JUMPTO 的包...

```
 create or replace package JUMPTO is
  type t_locations is ref cursor;

  procedure procGetLocations(locations out t_locations);

end JUMPTO; 
```

当我运行它时，它会吐出这个 PL/SQL 代码块......

```
 DECLARE
  LOCATIONS APPLICATION.JUMPTO.t_locations;
BEGIN

  JUMPTO.PROCGET_LOCATIONS(
    LOCATIONS => LOCATIONS
  );
  -- Modify the code to output the variable
  -- DBMS_OUTPUT.PUT_LINE('LOCATIONS = ' || LOCATIONS);
END; 
```

我发现的一个教程说要删除那里第二行的评论。我试过有和没有评论。

当我点击“确定”时，我得到了错误......

```
 ORA-06550: line 2, column 32:
PLS-00302: component 'JUMPTO' must be declared
ORA-06550: line 2, column 13:
PL/SQL: item ignored
ORA-06550: line 6, column 18:
PLS-00320: the declaration of the type of this expression is incomplete or malformed
ORA-06550: line 5, column 3:
PL/SQL: Statement ignored
ORA-06512: at line 58 
```

我真的不知道发生了什么，这对我来说是全新的领域。我尝试创建一个刚从数据库中选择一些东西的主体，但没有任何东西以我脑海中看起来应该的方式工作。谁能给我任何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T23:03:18.120

首先你需要声明一个包体，例如：

```
create or replace package body JUMPTO is

  procedure procGetLocations(locations out t_locations)
  is
  begin
    locations := null; -- Need code here
  end;

end JUMPTO; 
```

编译需要这个：

```
 DECLARE
     LOCATIONS JUMPTO.t_locations;
   BEGIN
     JUMPTO.PROCGETLOCATIONS(
       LOCATIONS => LOCATIONS
     );
   END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-15T01:44:26.787

Oracle PL/SQL 包有 2 个部分：

*   包规范（公共部分，其中列出了可全局访问的常量、函数、过程、变量等）。
*   包体（代码所在的位置以实现包规范）。

您的第一段代码声明了包规范（*JUMPTO*）。您声明了一个类型 ( *t_locations* ) 和一个过程 ( *procGetLocations* )，它们没有输入，但输出一个 t_locations 类型的变量 ( *locations* )。

首先编译包规范（就像你做的那样），然后像这样编译包体：

```
create or replace package body JUMPTO is  
procedure procGetLocations(locations out t_locations) is  
begin    
locations := null; -- Your code goes here
end procGetLocations;
end JUMPTO; 
```

现在您可以在其他 PL/SQL 块（匿名或其他）中调用过程*procGetLocations 。*

# image - 将 GIF 转换为 CUR 文件

> ID：426372
> 
> 赞同：24
> 
> 时间：2009-01-08T22:52:43.367
> 
> 标签：image, mouse-cursor

如何从 GIF 图像文件创建 .cur（用于鼠标光标）？

我可以使用什么工具或流程？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-08T23:20:31.487

您需要使用光标创建器，它几乎只是带有一些标题数据的位图。如果您不使用 Visual Studio 或其他什么，我会使用 Irfanview。如果您使用 Visual Studio，只需创建一个新光标，然后将图像数据复制并粘贴到编辑器中……我相信我可以为您创建一个基于文件执行此操作的工具，但我肯定他们已经有很多工具了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T23:22:12.120

[IconStudio](http://www.download.com/IconStudio/3000-2195_4-10389224.html)能够从其他图像中获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-28T15:58:44.663

我刚刚找到了一个名为 IconWorkshop lite 的新工具的引用，它是 Visual Studio 的插件。我想到了这个问题，并认为我会将链接留给后代。我不确定它是否会完成问题中提出的工作......

[http://sharptoolbox.com/tools/iconworkshop-lite](http://sharptoolbox.com/tools/iconworkshop-lite)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:36:25.890

您还可以将其转换为更常见的 .ico 并使用 .cur 扩展名重命名。

# javascript - 如何从 Web 浏览器启动特定的基于 telnet 的应用程序？

> ID：426375
> 
> 赞同：0
> 
> 时间：2009-01-08T22:54:27.060
> 
> 标签：javascript, html, browser, telnet

我想做的是在 Intranet 网页上提供一个链接，该网页将启动 telnet 会话并将上下文信息传递给 shell 脚本，该脚本将用户带到特定的“绿屏”。

这个“伪链接”可能有助于显示我在寻找什么：

```
<a href="telnet://<user>:<password>@<host>?showdetail%20123">detail for 123</a> 
```

该解决方案的一部分可能是建议的 telnet 客户端，它可以与浏览器交互（可能通过 JavaScript）来完成此操作。混淆凭据的奖励积分（但此时设想为“只读”登录）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:58:39.547

在我看来，我很想被证明是错误的，你会遇到沙盒（安全）问题。在这里查看[我没有什么兴趣的问题](https://stackoverflow.com/questions/376600)，但我认为它基本上是同一件事：你不能从浏览器打开外部应用程序，除非它们**已经**与 mime 类型、协议或其他东西相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T22:58:40.827

有一些 java applet 可以用作 telnet 客户端，您可以在浏览器中使用其中之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-06T03:22:50.637

在大多数浏览器（IE、FF、afaik）中，您无法使用 telnet: URL 执行此操作。telnet URL 最初在 RFC 1738 中描述，它只提供主机名、端口、用户名和密码的信息。

当您单击它时，浏览器通常会向操作系统询问默认的“telnet”处理程序，这是一个运行的外部应用程序。大多数现代 telnet 客户端都接受这些参数并使用它们。

这种架构在浏览器之间略有不同，但应用程序通常是外部的。在 bugzilla.mozilla.org 中偶尔会请求支持 telnet 插件或本地 telnet 客户端，但从未引起太多关注。

可能有像 java 小程序这样的内联解决方案，但我怀疑它们是用 telnet: URL 调用的。

# cocoa-touch - 是否有与 Cocoa NSColorPicker API 等效的 iPhone UI 组件？

> ID：426377
> 
> 赞同：2
> 
> 时间：2009-01-08T22:55:10.757
> 
> 标签：cocoa-touch

我正在寻找一种方法来允许我的 iPhone 应用程序的用户选择一种颜色来标记项目。我知道我可以只使用带有颜色文本名称的标准选择器，但如果已经存在诸如 Cocoa 中的 NSColorPicker API 之类的东西，我宁愿使用它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-08T23:55:20.917

不，您需要使用滑块自己制作。

# python - 您最喜欢在 django 中管理数据库迁移的解决方案是什么？

> ID：426378
> 
> 赞同：28
> 
> 时间：2009-01-08T22:55:31.987
> 
> 标签：python, database, django, data-migration, schema-migration

我很喜欢 Rails 的数据库迁移管理系统。它不是 100% 完美的，但它可以解决问题。Django 没有提供这样的数据库迁移系统（还没有？），但是有许多开源项目可以做到这一点，例如 django-evolution 和 south。

所以我想知道，您更喜欢哪种 django 数据库迁移管理解决方案？（请每个答案选择一个）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-11T10:06:08.630

我一直在使用[South](http://south.aeracode.org/)，但[Migrator](http://bitbucket.org/DeadWisdom/migratory/)看起来也很有希望。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-08T23:05:58.237

[迁移](http://bitbucket.org/DeadWisdom/migratory/)看起来又好又简单。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-29T20:08:33.797

如果您使用[SQLAlchemy](https://pypi.python.org/pypi/SQLAlchemy)作为 ORM，那么事实上的标准是[Alembic](https://pypi.python.org/pypi/alembic)。

另一个没有提到的选择是[yoyo-migrations](https://pypi.python.org/pypi/yoyo-migrations)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-10T22:43:59.507

我们在工作中使用 Django，并且一直在使用[dmigrations](http://code.google.com/p/dmigrations/)。虽然它有其怪癖，但到目前为止它一直很有用。一些特点：

*   它使用数据库中的表来跟踪已应用的迁移。
*   因为它知道哪些已被应用，所以您可以向上和向下迁移。
*   它集成`manage.py`为命令。
*   单独的迁移脚本是 Python，但如果您的迁移逻辑是纯 SQL，*则 dmigrations*可以很容易地生成 SQL 并执行它。

一个问题是它目前只支持 MySQL。但是，我们的一个人对其进行了本地破解以支持我们使用的 PostgreSQL。我记得，hack 并没有那么广泛，所以破解它以支持其他 RDBMS 应该不难。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-08T22:59:09.720

我喜欢[django-evolution](http://code.google.com/p/django-evolution/)：

优点：

*   干净的设计
*   不需要 SQL
*   灵活的
*   安装简单
*   便于使用

缺点：

*   迁移在代码库中不固定
*   存在意外运行迁移两次的风险

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-19T22:18:30.707

除了 South、dmigrations、django-evolution 和 Migratory，我想我会添加[simplemigrations](http://github.com/ricardochimal/simplemigrations/tree/master)作为我见过的另一个自动化 Django 迁移的工具。

我过去使用过其中的三个，但现在手动迁移。由于添加了最新功能，我正在考虑再次尝试 South。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-02-02T16:41:51.103

请注意，自 2009 年以来，除了 South 之外，这里提到的几乎所有项目都已死亡。[南方](http://south.aeracode.org/)是事实上的标准，无论好坏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-02T14:22:48.853

我一直在使用[simple-db-migrate](https://github.com/guilhermechapiewski/simple-db-migrate "简单数据库迁移")

优点：

*   它允许我回滚迁移（如果其他人也这样做，IDK）。
*   与 manage.py 集成
*   懂 SQL 的人都可以创建迁移
*   它不会运行两次迁移：应用程序将迁移信息（时间戳、查询等）写入表中

缺点：

*   如果您添加的迁移时间戳低于安装的最新迁移，则此迁移不会运行
*   仅支持 MySQL

# crystal-reports - 水晶报告：这是自定义功能吗？

> ID：426379
> 
> 赞同：1
> 
> 时间：2009-01-08T22:55:32.487
> 
> 标签：crystal-reports

我正在定制一份在我之前开发的水晶报告。自定义公式之一包括以下行：

```
FreeFormText("kIMShipWhse") 
```

这是内置功能还是自定义功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-11T13:13:33.003

基于 UFL 的函数列在“附加函数”节点下方。自定义函数列在“自定义函数”节点下方。其余功能是“本机”功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T23:07:27.737

听起来像自定义 UFL 函数，唯一的检查方法是运行报告。如果它是自定义 UFL Crystal 的一部分，它将在尝试运行之前对其进行标记。

# php - 推送标头和 AJAX

> ID：426384
> 
> 赞同：1
> 
> 时间：2009-01-08T22:56:39.100
> 
> 标签：php, ajax, http-headers

我有一个强制下载的脚本，我通过 Javascript 调用它。但是没有弹出对话框，这里是download.php脚本：

```
header("Pragma: public"); // required
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Type: $ctype");
// change, added quotes to allow spaces in filenames, by Rajkumar Singh
header("Content-Disposition: attachment; filename=\"".basename($properFilename)."\";" );
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($filename));
readfile("$filename");
exit(); 
```

这是Javascript（使用JQuery）：

```
///force download
           $.ajax({
           type: "GET",
           url: "download.php",
           data: 'file=' + msg + '&properFilename=' + properFileName,
           success: function(msg){

              window.location.href = msg;

         });//ajax 
```

这会将我的浏览器重定向到另一个页面，而不是显示向下对话框。

我知道 JS 变量 msg 包含具有正确标题的文件，但我不知道如何处理它以使其显示下载对话框。

谢谢大家

ps不知道把这个线程JS或PHP放在哪里。

## 编辑：

我有正确的方法，我确信 :) - 用户访问我的网站，他们填写表格并按下提交。几秒钟后，他们的文件应该会出现在他们可以下载的对话框中。去做这个：

我进行 AJAX 调用以获取文件并下载它。我使用 PHP 脚本来发送标题。现在我需要的只是一种让下载对话框出现的方法！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T22:59:21.060

它没有显示对话框，因为它是一个 Ajax 调用。

```
window.location.href = msg; 
```

这就是重定向你的原因。我认为您不需要在这里进行 ajax 调用，只需使用 href 链接正常调用页面即可。

**编辑**

如果您希望表单提交并显示下载对话框，请执行以下操作：

```
<script>
function showDialogBox(form) {
    form.submit();
    window.location.href = "/download.php?file=XXX&properFilename=XXX";
}
</script>
<form onsubmit="showDialogBox(this);">

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T23:03:01.677

如果它是完整的 download.php 脚本，我在其中找不到变量 $file（只有 $filename）-但在 JS 中，您发送了一个 $file 变量。第二：JS 出了点问题——为什么你`msg`在 in`data:`和 in 中使用这样的变量名`success:`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T23:05:06.493

正如 sktrdie 所指出的，我的看法是这可能是意料之中的。我现在不能测试，但如果你想一想：用户本身并没有收到任何关于你正在做的 AJAX 事情的通知。突然收到这样的信息会很烦人。

我猜如果您在该页面上创建一个（甚至隐藏？）iframe 并重定向到该下载 URL，您将获得该对话框。YMMV，HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T23:08:00.560

我有一段时间没有编写 php 代码了，所以我不确定你的代码是否有问题。但我认为问题出在你的方法上。您需要在框架中加载 download.php，而不是作为对 ajax 调用的响应。因此，基本上您需要在文档中形成一个不可见的 iframe，并将其指向 download.php，并将 get 参数附加到 url。

# codeigniter - CodeIgniter 表类：从生成的单元格添加链接

> ID：426393
> 
> 赞同：4
> 
> 时间：2009-01-08T22:59:47.487
> 
> 标签：codeigniter, anchor, code-generation

我正在使用从数据库中提取的数据数组为我自动生成表的表类。

**型号**：

```
function get_reports_by_user_id($userid)
{
    return $this->db->get_where('ss2_report',array('userid' => $userid))->result_array();
} 
```

**控制器**：

```
function index()
{
    echo $this->table->generate($this->mymodel->get_reports_by_user_id('1234'));
} 
```

当我让它工作时，控制器最终将被移动到一个视图中。这可以很好地生成表格，但我想添加一个指向字段的链接。例如，`id`允许我仅针对该报告的 ID 链接到一页数据的列。我知道我可以用手以老式的方式输出表格。然后我可以添加我想要的任何链接，但我希望能够尽可能多地使用自动生成。必须有一种方法可以做一些像链接表格单元格一样常见的事情。有没有人有任何想法？

**编辑**：

用户**Java PHP**大部分都在下面。这是使它工作的代码：

```
function get_reports_by_user_id($userid)
{
    $rows = $this->db->get_where('ss2_report',array('userid' => $userid))->result_array();

    foreach ($rows as $count => $row)
    {
        $rows[$count]['id'] = anchor('report/'.$row['id'],$row['id']);
    }
    return $rows;
} 
```

我只需要用锚文本版本替换原始数组中的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-08T23:06:08.067

唯一的方法是，在函数`get_reports_by_user_id()`中，您将遍历所有结果并将`<a href>`标签添加到 ids。像这样的东西：

```
function get_reports_by_user_id($userid)
{
   $rows=$this->db->get_where('ss2_report',array('userid' => $userid))->result_array();
   foreach ($rows as $row)
   {
     $row->id=anchor('site.com/some_controller/some_function/'.$row->id,$row->id);
   }
   return $rows;
} 
```

我不使用 CodeIgniter 的数据库库，所以我不确定它返回`$rows`的格式，但上面的代码应该让您大致了解需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-08T23:05:13.543

一个想法可能是做类似..

```
foreach ($row in $this->mymodel->get_reports_by_user_id('1234'))
{
    $row->id = anchor(site_url(array('report', 'user', $row->id)), $row->id);
    $this->table->add_row($row);
}
$this->table->generate(); 
```

# c# - C#/.NET 对象使用多少内存？

> ID：426396
> 
> 赞同：55
> 
> 时间：2009-01-08T23:00:46.610
> 
> 标签：c#, .net, object, memory, profiling

我正在开发一个当前创建了数百个对象的应用程序。

是否可以确定（或近似）对象（类实例）分配的内存？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-01-08T23:05:58.613

您可以使用内存分析器，例如

.NET 内存分析器 ( [http://memprofiler.com/](http://memprofiler.com/) )

或者

CLR Profiler（免费）（[http://clrprofiler.codeplex.com/](http://clrprofiler.codeplex.com/)）

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-04-25T14:49:43.160

如果您想知道特定对象发生了什么，则可能是一种粗略的方法

```
// Measure starting point memory use
GC_MemoryStart = System.GC.GetTotalMemory(true);

// Allocate a new byte array of 20000 elements (about 20000 bytes)
MyByteArray = new byte[20000];

// Obtain measurements after creating the new byte[]
GC_MemoryEnd = System.GC.GetTotalMemory(true);

// Ensure that the Array stays in memory and doesn't get optimized away
GC.KeepAlive(MyByteArray); 
```

可以像这样获得过程范围的东西

```
long Process_MemoryStart = 0;
Process MyProcess = System.Diagnostics.Process.GetCurrentProcess();
Process_MemoryStart = MyProcess.PrivateMemorySize64; 
```

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-08T23:05:17.053

ANTS[内存分析器](http://www.red-gate.com/products/ants_memory_profiler/index.htm)将准确地告诉您为每个对象/方法/等分配了多少。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-01-08T23:49:00.430

[这是一篇相关文章](https://stackoverflow.com/questions/26570/sizeof-equivalent-for-reference-types)，我们在其中讨论了确定引用类型的大小。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-03-09T14:02:08.630

您还可以使用 WinDbg 和 SOS 或 SOSEX（例如具有更多命令和改进了一些现有命令的 SOS）WinDbg 扩展。用于分析特定内存地址的对象的命令是 !objsize

要记住的一个非常重要的项目是 !objsize 只给你类本身的大小，并不一定包括类中包含的聚合对象的大小 - 我不知道为什么它不这样做，因为它是有时令人沮丧和误导。

我在 Connect 网站上创建了 2 个功能建议，要求将此功能包含在 VisualStudio 中。请为您希望添加的项目投票！

[https://connect.microsoft.com/VisualStudio/feedback/details/637373/add-feature-to-debugger-to-view-an-objects-memory-footprint-usage](https://connect.microsoft.com/VisualStudio/feedback/details/637373/add-feature-to-debugger-to-view-an-objects-memory-footprint-usage)

[https://connect.microsoft.com/VisualStudio/feedback/details/637376/add-feature-to-debugger-to-view-an-objects-rooted-references](https://connect.microsoft.com/VisualStudio/feedback/details/637376/add-feature-to-debugger-to-view-an-objects-rooted-references)

**编辑：** 我添加以下内容以澄清 Charles Bretana 提供的答案中的一些信息：

1.  OP询问了“对象”而不是“类”的大小。对象是类的一个实例。也许这就是你的意思？
2.  为对象分配的内存不包括 JITted 代码。JIT 代码存在于它自己的“JIT 代码堆”中。
3.  JIT 仅在逐个方法的基础上编译代码 - 而不是在类级别。因此，如果一个方法永远不会被某个类调用，那么它永远不会被 JIT 编译，因此永远不会在 JIT 代码堆上为其分配内存。

顺便说一句，CLR 使用大约 8 种不同的堆：

1.  Loader Heap：包含 CLR 结构和类型系统
2.  高频堆：statics, MethodTables, FieldDescs, interface map
3.  低频堆：EEClass、ClassLoader 和查找表
4.  存根堆：用于 CAS、COM 包装器、P/Invoke 的存根
5.  大对象堆：需要超过 85k 字节的内存分配
6.  GC Heap：用户分配给应用程序私有的堆内存
7.  JIT 代码堆：由 mscoreee（执行引擎）和用于托管代码的 JIT 编译器分配的内存
8.  进程/基堆：互操作/非托管分配、本机内存等

高温高压

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-08T23:08:13.523

每个“类”都需要足够的内存来保存运行时调用的所有成员的所有 jit 编译代码，（尽管如果你不调用一个方法很长一段时间，CLR 可以释放该内存并如果您再次调用它，请再次重新编译它......加上足够的内存来保存类中声明的所有静态变量......但是这个内存每个类只分配一次，无论您创建了多少类实例。

对于您创建的类的每个实例（并且尚未被垃圾收集），您可以通过将每个基于实例的声明变量的内存使用量相加来近似内存占用量......（字段）

引用变量（对其他对象的引用）占用 4 或 8 个字节（32/64 位操作系统？） int16、Int32、Int64 分别占用 2、4 或 8 个字节...

字符串变量为一些元数据元素占用额外的存储空间，（加上地址指针的大小）

此外，对象中的每个引用变量也可以被认为“间接”包括它指向的对象在堆上占用的内存，尽管您可能希望将该内存计为属于该对象而不是属于该对象的变量引用它...

等等等等

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-01-09T01:35:21.993

要大致了解应用程序中的内存分配，请在 WinDbg 中使用以下 sos 命令

```
!dumpheap -stat 
```

请注意，!dumpheap 只为您提供对象类型本身的字节，不包括它可能引用的任何其他对象类型的字节。

如果您想查看特定对象类型的总持有字节数（对象引用的所有对象的所有字节总和），请使用内存分析器，如 dot Trace - [http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2011-07-05T09:37:18.530

如果可以的话 - 序列化它！

```
Dim myObjectSize As Long

Dim ms As New IO.MemoryStream
Dim bf As New Runtime.Serialization.Formatters.Binary.BinaryFormatter()
bf.Serialize(ms, myObject)
myObjectSize = ms.Position 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-09T10:08:32.093

有一个学术问题***是运行时对象的大小是多少？***这很有趣，但它只能由附加到正在运行的进程的分析器正确回答。我最近花了很长时间研究这个问题，并确定没有足够准确和快速的通用方法让您想在生产系统中使用它。像数值类型数组这样的简单案例有简单的答案，但除此之外，最好的答案是***不要费心去解决它。你为什么想知道这个？是否有其他信息可以达到同样的目的？***

就我而言，我最终想回答这个问题，因为我有各种有用的数据，但可以丢弃以释放 RAM 用于更关键的服务。这里的海报男孩是**Undo Stack**和**Cache**。

最终我得出结论，管理撤消堆栈和缓存大小的正确方法是查询可用内存量（这是一个 64 位进程，因此可以安全地假设它全部可用），然后允许更多项目如果有足够大的 RAM 缓冲区，则添加，并且如果 RAM 运行不足，则需要删除项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-26T15:25:46.717

对于任何潜伏在寻找答案的 Unity 开发人员，这里有一种比较受@varun 答案启发的两个不同类内存分配的方法：

```
void Start()
    {
        var totalMemory = System.GC.GetTotalMemory(false);

        var class1 = new Class1[100000];
        System.GC.KeepAlive(class1);
        for (int i = 0; i < 100000; i++)
        {
            class1[i] = new Class1();
        }

        var newTotalMemory = System.GC.GetTotalMemory(false);
        Debug.Log($"Class1: {newTotalMemory} - {totalMemory} = {newTotalMemory - totalMemory}");

        var class2 = new Class2[100000];
        System.GC.KeepAlive(class2);
        for (int i = 0; i < 100000; i++)
        {
            class2[i] = new Class2(10, 10);
        }

        var newTotalMemory2 = System.GC.GetTotalMemory(false);
        Debug.Log($"Class2: {newTotalMemory2} - {newTotalMemory} = {newTotalMemory2 - newTotalMemory}");
    } 
```

# java - Windows 和 Linux 之间的行尾不同吗？

> ID：426397
> 
> 赞同：27
> 
> 时间：2009-01-08T23:00:56.190
> 
> 标签：java, linux, newline

我正在尝试`/etc/passwd`用 Java 解析 Linux 文件。我目前正在通过[`java.util.Scanner`](https://docs.oracle.com/javase/9/docs/api/java/util/Scanner.html)班级阅读每一行，然后使用[`java.lang.String.split(String)`](https://docs.oracle.com/javase/9/docs/api/java/lang/String.html#split-java.lang.String-)它来分隔每一行。

问题是该行：

```
list:x:38:38:Mailing List Manager:/var/list:/bin/sh" 
```

扫描仪将其视为 3 条不同的线：

1.  `list:x:38:38:Mailing`
2.  `List`
3.  `Manager...`

当我将它输入到我没有从 Linux 获得的新文件中时，`Scanner`会正确解析它。

关于 Linux 中的新行，我有什么不明白的地方吗？

显然，一种解决方法是在不使用扫描仪的情况下解析它，但这并不优雅。有谁知道一种优雅的方式来做到这一点？

有没有办法将文件转换为可以使用的文件`Scanner`？

* * *

甚至两天前：[不同平台结束不同线路背后的历史原因](https://stackoverflow.com/questions/419291/historical-reason-behind-different-line-ending-at-different-platforms)

**编辑**

原作者注：

> *“我发现我有一个不同的错误导致了问题。忽略问题”*

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-01-08T23:04:20.847

来自[维基百科](http://en.wikipedia.org/wiki/Newline#Representations)：

> *   LF：Multics、Unix 和类 Unix 系统（GNU/ **Linux**、AIX、Xenix、**Mac OS X**、FreeBSD 等）、BeOS、Amiga、RISC OS 等
> *   CR+LF：DEC RT-11 和大多数其他早期的非 Unix、非 IBM 操作系统、CP/M、MP/M、**DOS**、OS/2、Microsoft **Windows**、Symbian OS
> *   CR：Commodore 机器、Apple II 系列、**Mac OS 最高版本 9**和 OS-9

[我一般](http://www.cs.toronto.edu/~krueger/csc209h/tut/line-endings.html)把它翻译成这些行尾：

*   视窗：`'\r\n'`
*   Mac（操作系统 9-）：`'\r'`
*   Mac（操作系统 10+）：`'\n'`
*   Unix/Linux：`'\n'`

您还需要让您的扫描仪/解析器处理 unix 版本。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-09T02:57:51.750

您可以从以下位置获取当前操作系统的标准行结尾：

```
System.getProperty("line.separator") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-08T23:16:22.383

扫描仪在空间处断裂。

**编辑**：[“扫描”Java 教程](http://java.sun.com/docs/books/tutorial/essential/io/scanning.html)指出：

*默认情况下，扫描仪使用空格来分隔标记。（空白字符包括空格、制表符和行终止符。有关完整列表，请参阅 Character.isWhitespace 的文档。）*

您可以使用 useDelimiter() 方法来更改这些默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-08T23:23:00.077

这在 Ubuntu 上对我有用

```
import java.util.Scanner;
import java.io.File;

public class test {
  public static void main(String[] args) {
    try {
      Scanner sc = new Scanner(new File("/etc/passwd"));
      String l;
      while( ( l = sc.nextLine() ) != null ) {
        String[] p = l.split(":");
        for(String pi: p) System.out.print( pi + "\t:\t" );
        System.out.println();
      }
    } catch(Exception e) { e.printStackTrace(); }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T23:06:48.207

为什么不使用`LineNumberReader`？

如果你不能这样做，代码是什么样的？

我能想到的唯一区别是您在错误的正则表达式上进行拆分，并且当您自己编辑文件时，您会得到以某种方式通过您的正则表达式的 dos 换行符。

尽管如此，对于一次阅读一行内容，使用`Scanner`.

当然，为什么要解析`/etc/passwd`是其他讨论的漏洞：)

# javascript - CSS / Javascript强制html表格行在一行

> ID：426398
> 
> 赞同：75
> 
> 时间：2009-01-08T23:01:50.430
> 
> 标签：javascript, html, css

我有一个看起来像这样的 HTML 表：

```
-------------------------------------------------
|Column 1                   |Column 2           |
-------------------------------------------------
|this is the text in column |this is the column |
|one which wraps            |two test           |
------------------------------------------------- 
```

但我希望它隐藏溢出。这里的原因是文本包含指向更多详细信息的链接，并且“包装”会在我的布局中浪费大量空间。它应该是这样的（不增加列或表格的宽度，因为它们会离开屏幕/否则会创建一个水平滚动条）：

```
-------------------------------------------------
|Column 1                   |Column 2           |
-------------------------------------------------
|this is the text in column |this is the column |
------------------------------------------------- 
```

我已经尝试了很多不同的 CSS 技术来尝试实现这一点，但我无法让它变得正确。Mootables 是我发现的唯一这样做的东西：http://joomlicious.com/mootable/ [，](http://joomlicious.com/mootable/)但我不知道他们是如何做到的。有谁知道我如何使用 CSS 和/或 Javascript 使用我自己的表格来做到这一点，或者 Mootables 是如何做到的？

示例 HTML：

```
<html><body>
<table width="300px">
<tr>
    <td>Column 1</td><td>Column 2</td>
</tr>
<tr>
   <td>this is the text in column one which wraps</td>
   <td>this is the column two test</td>
</tr>
</table></body></html> 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-01-08T23:04:29.910

使用 CSS 属性[white-space: nowrap](http://www.w3schools.com/cssref/pr_text_white-space.asp)和[overflow: hidden](http://www.w3schools.com/cssref/pr_pos_overflow.asp)在你的 td 上。

## 更新

刚看到你的评论，不知道我在想什么，我做了很多次，我忘了我是怎么做到的。这种方法对我来说在大多数浏览器中都能很好地工作......而不是试图限制 td，我在 td 内使用一个 div 来处理溢出实例。这有一个很好的副作用，可以将您的填充、边距、背景颜色等添加到您的 div 中，而不是尝试设置 td 的样式。

```
<html>
<head>
<style>
.hideextra { white-space: nowrap; overflow: hidden; text-overflow:ellipsis; }
</style>
</head>
<body>
<table style="width: 300px">
<tr>
    <td>Column 1</td><td>Column 2</td>
</tr>
<tr>
   <td>
    <div class="hideextra" style="width:200px">
        this is the text in column one which wraps</div></td>
   <td>
    <div class="hideextra" style="width:100px">
        this is the column two test</div></td>
</tr>
</table>
</body>
</html> 
```

作为奖励，IE 将使用特定于浏览器的 text-overflow:ellipsis 样式在溢出的情况下放置一个省略号。也有一种方法可以[在 FireFox 中](http://www.jide.fr/emulate-text-overflowellipsis-in-firefox-with-css)自动执行相同的操作，但我自己没有测试过。

## 更新 2

我开始使用Justin Maxwell 的[这个截断代码](http://mattsnider.com/css/css-string-truncation-with-ellipsis/)几个月了，它在 FireFox 中也能正常工作。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-01-09T03:09:41.460

这里的这个技巧是使用深奥的`table-layout:fixed`规则

此 CSS 应该适用于您的示例 HTML：

```
table {table-layout:fixed}
td {overflow:hidden; white-space:nowrap} 
```

您还应该为`<td>`s 指定明确的列宽。

规则说“这个表格的`table-layout:fixed`单元格宽度取决于我所说的，而不是单元格中的实际内容”。这通常很有用，因为浏览器可以在收到第一个`<tr>`. 否则，浏览器必须先接收整个表格，然后才能计算列宽。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-08T23:04:55.057

尝试：

```
td, th {
  white-space: nowrap;
  overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-09-10T12:54:14.070

Where ever you need to text in one line put this code

```
white-space:nowrap 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-19T22:28:44.597

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-08T23:13:36.880

正如 cletus 所说，你应该使用`white-space: nowrap`来避免换行，并`overflow:hidden`隐藏溢出。但是，为了使文本被视为溢出，您应该设置 td/th 宽度，因此如果文本需要超过指定宽度，它将被视为溢出，并将被隐藏。

此外，如果您提供示例网页，响应者可以提供带有您喜欢的修复的更新页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-08T23:17:20.663

如果隐藏溢出并且有一个长单词，则可能会丢失该单词，因此您可以更进一步并使用“word-wrap”css 属性。

[http://msdn.microsoft.com/en-us/library/ms531186(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms531186(VS.85).aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-08T23:27:33.063

我想知道是否值得使用 PHP（或其他服务器端脚本语言）或 Javascript 将字符串截断为正确的长度（尽管计算正确的长度很棘手，除非您使用固定宽度的字体）？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-28T20:24:33.337

Use position:absolute; and width:xxx%; on the td-Element.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-01-11T20:29:46.033

如果您不希望文本换行并且不希望列的大小变大，则在列上设置宽度和高度，并在样式表中设置“溢出：隐藏”。

要仅对一列执行此操作，您需要在每一行的该列中添加一个类。否则，您可以在所有列上设置它，这取决于您。

html:

```
<table width="300px">
<tr>
    <td>Column 1</td><td>Column 2</td>
</tr>
<tr>
   <td class="column-1">this is the text in column one which wraps</td>
   <td>this is the column two test</td>
</tr>
</table> 
```

样式表：

```
.column-1
{
  overflow: hidden;
  width: 150px;
  height: 1.2ex; 
} 
```

ex 单位是高度的相对字体大小，如果您使用像素来设置字体大小，您可能希望使用它。

# .net - 使用 jquery 调用 .net webservice 的最佳方法是什么？

> ID：426420
> 
> 赞同：4
> 
> 时间：2009-01-08T23:07:51.777
> 
> 标签：.net, jquery, web-services

我想只使用 jquery 从另一个域调用 .net 网络服务。

做这个的最好方式是什么？在托管网页的网站上是否有任何配置更改需要注意？

我问这个的原因是我对那个领域的控制只是勉强控制。所以我只能做有限的改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-08T23:27:47.353

浏览器在其默认配置中不允许跨域调用 XMLHTTPRequest。您可以更改浏览器设置以使某些调用成功，但这被认为是不好的做法。

为了执行跨域请求，您可以

*   [使用本地服务器作为远程服务器的代理](http://dotnetslackers.com/columns/ajax/MashitUpwithASPNETAJAX.aspx)

    此示例使用本地 ASP.NET Web 服务来调用 Yahoo! 地理编码服务

*   [使用桥梁](http://www.codeproject.com/KB/ajax/FlickrSpell.aspx)

    此示例演示如何通过 flickr API创建到[flickr的桥梁。](http://www.flickr.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T10:24:57.050

我认为您的问题是进行跨域调用。您必须将 jQuery 请求的数据类型更改为`jsonp`.

看看这个[链接](http://elegantcode.com/2008/12/02/calling-remote-aspnet-web-services-from-jquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T23:20:00.143

一般来说，答案是否定的，假设您正在谈论 ASPX Web 服务（基本上是托管在 ASP.NET 站点中的 WebService）。

这是搜索“webservice call jquery”时在 Google 上的第一次点击，它应该为您提供更多信息：

[http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/) 用于托管 Web 服务）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T23:27:45.340

首先，我不确定在 jquery 中实现的跨站点 ajax 是否可以像这样在所有浏览器（firefox 3）中工作。其次，我假设您在谈论 SOAP Web 服务。我宁愿不那样做。实施起来会非常复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T00:07:03.170

这是一个例子：

```
$.post("CodersWS.asmx/DeleteBook", { id_book: parseInt(currBookID, 10) }, function(res) {
///do something with returned data: res
}); 
```

在上面的示例中，我调用了一个名为 的 Web 服务`CodersWS.asmx`，其中的 WebMethod 名为`DeleteBook`...我还传递了一个名为 的参数`id_book`。

另外不要忘记将此代码段添加到您的`web.config`，否则您将无法以这种方式访问​​网络服务：

```
<system.web>
    <webServices>
        <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>
        </protocols>
    </webServices>
</system.web> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T10:09:36.153

更好的方法是使用：Jquery.getJSON？

请参阅： [JQuery.getJSON](http://docs.jquery.com/Ajax/jQuery.getJSON#urldatacallback)

这就提出了如何使用 web 服务或类似机制输出 JSON 兼容数据的问题。

# wpf - WPF 命令行

> ID：426421
> 
> 赞同：100
> 
> 时间：2009-01-08T23:07:54.443
> 
> 标签：wpf, command-line, exit

我正在尝试创建一个采用命令行参数的 WPF 应用程序。如果没有给出参数，主窗口应该弹出。在某些特定命令行参数的情况下，代码应该在没有 GUI 的情况下运行并在完成后退出。任何有关如何正确完成此操作的建议将不胜感激。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2009-01-08T23:13:48.520

首先，在 App.xaml 文件的顶部找到此属性并将其删除：

```
StartupUri="Window1.xaml" 
```

这意味着应用程序不会自动实例化您的主窗口并显示它。

接下来，重写 App 类中的 OnStartup 方法以执行逻辑：

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    if ( /* test command-line params */ )
    {
        /* do stuff without a GUI */
    }
    else
    {
        new Window1().ShowDialog();
    }
    this.Shutdown();
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-08-13T14:05:55.810

要检查您的论点是否存在 - 在马特的解决方案中，请使用以下方法进行测试：

e.Args.Contains("MyTriggerArg")

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-29T21:17:36.207

上述解决方案的组合，用于 .NET 4.0+ 并输出到控制台：

```
[DllImport("Kernel32.dll")]
public static extern bool AttachConsole(int processID);

protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    if (e.Args.Contains("--GUI"))
    {
        // Launch GUI and pass arguments in case you want to use them.
        new MainWindow(e).ShowDialog();
    }
    else
    {
        //Do command line stuff
        if (e.Args.Length > 0)
        {
            string parameter = e.Args[0].ToString();
            WriteToConsole(parameter);
        }
    }
    Shutdown();
}

public void WriteToConsole(string message)
{
    AttachConsole(-1);
    Console.WriteLine(message);
} 
```

更改 MainWindow 中的构造函数以接受参数：

```
public partial class MainWindow : Window
{
    public MainWindow(StartupEventArgs e)
    {
        InitializeComponent();
    }
} 
```

并且不要忘记删除：

```
StartupUri="MainWindow.xaml" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-06T13:17:31.533

您可以在`app.xaml.cs`文件中使用以下内容：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    MainWindow WindowToDisplay = new MainWindow();

    if (e.Args.Length == 0)
    {
        WindowToDisplay.Show();
    }
    else
    {
        string FirstArgument = e.Args[0].ToString();
        string SecondArgument = e.Args[1].ToString();
        //your logic here
    }
} 
```

# c - RSA_private_decrypt 返回 -1

> ID：426463
> 
> 赞同：4
> 
> 时间：2009-01-08T23:23:31.900
> 
> 标签：c, security, encryption, openssl

我尝试用 RSA 算法加密简单的文本。我的代码有问题。

```
RSA        *_RSA ;
unsigned char text[2560] = "A";
unsigned char sectext[2560];
unsigned char decrypttext[2560];
int i = 0;

_RSA = RSA_generate_key ( 1024, 65537, NULL, NULL );
i = RSA_public_encrypt ( 1, text,    sectext,     _RSA, RSA_PKCS1_OAEP_PADDING );
i = RSA_private_decrypt( 1, sectext, decrypttext, _RSA, RSA_PKCS1_OAEP_PADDING);
RSA_free ( _RSA ); 
```

的返回值为`RSA_public_encrypt`128，即密文的大小。`RSA_private_decrypt`返回 -1，这是一个错误。如果我尝试显示恢复的文本，那么我什么也得不到。

为什么`RSA_private_decrypt`返回-1？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T14:53:56.353

You should not pass 1 to `RSA_private_decrypt` but the length of the block you are trying to decrypt, ie. the return value of `RSA_public_encrypt` = 128\. You do not know the length of the cleartext when you are decrypting!

This complete sample program results in:

```
128 from encrypt. 
1 from decrypt: 'A' 
```

Source:

```
#include <openssl/rsa.h>
#include <openssl/engine.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    RSA *myRSA;
    unsigned char cleartext[2560] = "A";
    unsigned char encrypted[2560] = { 0 };
    unsigned char decrypted[2560] = { 0 };
    int resultEncrypt = 0;
    int resultDecrypt = 0;

    myRSA = RSA_generate_key ( 1024, 65537, NULL, NULL );
    resultEncrypt = RSA_public_encrypt ( 1 /* strlen(cleartext) */, cleartext, encrypted, myRSA, RSA_PKCS1_OAEP_PADDING );
    printf("%d from encrypt.\n", resultEncrypt);
    resultDecrypt = RSA_private_decrypt( 128 /* resultEncrypt */, encrypted, decrypted, myRSA, RSA_PKCS1_OAEP_PADDING);
    printf("%d from decrypt: '%s'\n", resultDecrypt, decrypted);
    RSA_free ( myRSA );

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T00:16:42.887

尝试调用[`ERR_error_string()`](http://www.openssl.org/docs/crypto/ERR_error_string.html)以获取错误的文本描述。

# c# - 如何加快 .NET 客户端应用程序（Windows 窗体或 WPF）的初始化？

> ID：426464
> 
> 赞同：6
> 
> 时间：2009-01-08T23:23:34.163
> 
> 标签：c#, .net, wpf, winforms, winapi

有时我使用[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)和[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)或[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)创建一些快速的个人项目。我注意到托管应用程序的启动时间比本地应用程序要长 2 倍或 3 倍。

我写了一个“快速笔记”应用程序，但是它不是很“快速”。:-(

有哪些技术可以加快 Windows 窗体/WPF 应用程序的初始化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-08T23:47:04.363

查看[NGen](http://msdn.microsoft.com/en-us/magazine/cc163808.aspx)

此外，如果您在加载时加载大量数据，请将其移动到另一个线程并显示指示器或其他内容（在加载时），这样至少表单会快速弹出，即使实际数据加载需要更长的时间.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T23:31:19.887

.NET 3.5 SP1 确实倾向于加快启动速度。另请参阅Logos 博客上有关在启动 WPF 应用程序时设置启动画面（使用本机 C++）的[一系列博客文章。](http://code.logos.com/blog/2008/09/displaying_a_splash_screen_with_c_introduction.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-12T12:12:25.193

.NET 3.5 SP1 现在还包括在不使用 C++ 的情况下创建快速 SplashScreen 的功能

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-12T12:24:25.560

您可能还想考虑将处理转移到工作线程。当您的应用程序开始加载根用户界面时，而不是数据 - 而是异步加载数据（并在每个数据项进入时创建填充窗口等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-17T19:01:28.280

为 .NET 3.0 或更高版本制作的 .NET 应用程序在较新版本的 Windows、Windows Vista、Windows 7 等上运行得更好。我认为几年后托管代码和非托管代码在性能方面的差异将不明显。

# java - 我正在学习人工智能，我可以实施什么游戏来将其付诸实践？

> ID：426479
> 
> 赞同：19
> 
> 时间：2009-01-08T23:30:00.997
> 
> 标签：java, algorithm, artificial-intelligence, game-engine

我上了一门人工智能课程，老师要求我们实现一个使用其中一种人工智能算法的游戏。这是我需要一些帮助的地方：

*   我不知道每种算法适用于哪种游戏
*   如果您可以举一个游戏或游戏类型及其使用的算法的示例，我将不胜感激

我不需要任何编码帮助，我可以管理（我选择的语言是 Java）。我只需要一点帮助来选择算法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-08T23:37:39.080

除了 Ben 的回答之外，一个好的组合是 alpha-beta 修剪以及像 connect 4 这样的游戏。像井字游戏这样的启发式方法太简单，而对于国际象棋来说，太复杂了。但是连接 4 或类似的“中间道路”游戏可能是一个很好的地方，可以了解启发式如何在效率和质量方面产生重大影响，而且它也足够复杂，甚至可以获得一些可以赢得一些“利基”启发式场景优于其他通常更好的启发式方法。特别是 connect 4 的规则非常简单，很容易想出自己成功的启发式方法来查看这些操作。

另一个常见的 AI 是用于寻路的 A*，例如 RTS 或沙盒环境中的单位旅行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-08T23:32:30.260

[Alpha-beta 修剪](http://en.wikipedia.org/wiki/Alpha_beta_pruning)通常适用于游戏树，尤其是象棋和井字游戏等回合制游戏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T23:37:28.970

任何游戏都可以使用任何 AI 算法，如果你有一个“敌人”跟随你的 2d 游戏，你可以使用模糊逻辑来制作轨迹。就像您可以使用（任何类型的）网络让他们“学习”跟随您的最佳方式一样。（如果他们有很多，你可以使用遗传算法让他们世代学习）

所以去吧，想一些有趣的事情，然后问在哪里可以通过 AI 改进决策并获得乐趣（这是其中最重要的部分）

你可以查看[这本书](http://oreilly.com/catalog/9780596005559/)以获得一些想法，我敢打赌你的大学在图书馆的某个地方有它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T03:24:36.500

您可以尝试使用[曼哈顿距离](http://en.wikipedia.org/wiki/Taxicab_geometry)作为[启发式函数的](http://en.wikipedia.org/wiki/Heuristic_function)[N 谜题](http://en.wikipedia.org/wiki/Fifteen_puzzle)和[A* 搜索算法](http://en.wikipedia.org/wiki/A*_search_algorithm)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T03:28:42.373

正如已经提到的，A* 是一个很好的游戏寻路算法。这是一个关于如何实现[的教程（带有源代码）。](http://www.cokeandcode.com/pathfinding)

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-10-21T02:39:43.860

马尔可夫链蒙特卡罗或 MCMC 算法怎么样。 [http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo](http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo)

在我的 AI 课上，我用贝叶斯网络做了一个来计算概率。这不是太难，但很清楚。有趣的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-27T14:20:21.467

您可以从简单的基于图块的地图和简单的路径查找算法开始，例如上面提到的 A*。之后您可以尝试在所有游戏地图旁边自由移动游戏。

# java - 如何从asp调用java？

> ID：426483
> 
> 赞同：3
> 
> 时间：2009-01-08T23:31:12.710
> 
> 标签：java, asp-classic, vbscript

我不熟悉 ASP，但正在帮助某人将他们的网站作为一个副项目。我正在尝试使用 VB 从 ASP 调用 Apache FOP（一个 java 应用程序）。我见过使用 GetObject('java:...') 构造的简单示例，但我不知道如何从 java 对象传递和检索二进制数据。

理想情况下，我会在内存中完成这一切——我宁愿不必将我的数据写入磁盘，在该文件上调用 FOP（它将读取，然后写入一个新文件），然后重新读取数据的磁盘。该站点不是很忙*，*所以我可以这样做，但它似乎效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-21T21:24:44.547

我想出了一个解决方法。这适用于在 Win 2k3 服务器上运行的 IIS——旧版本会容易得多。

首先，我在主站点之外创建了一个子目录（出于安全目的），并将一个新的应用程序池附加到该目录。新的应用程序池需要作为本地系统运行。我无法让 fop.bat 工作，即使作为本地系统运行，但我可以调用 java，所以我将整个 fop 命令行放入我的 asp 脚本中，类似于这个片段：

```
Dim shell, foppath, workpath
Set shell = Server.CreateObject("WScript.Shell")

foppath = Server.MapPath("/fop/")
workpath = Server.MapPath("/tmp/")
shell.CurrentDirectory = foppath

Dim commandline
commandline = "java -Denv.windir=C:\WINDOWS   -cp """
'set classpath
commandline = commandline & foppath & "\build\fop.jar;"
commandline = commandline & foppath & "\build\fop-sandbox.jar;"
commandline = commandline & foppath & "\build\fop-hyph.jar;"
commandline = commandline & foppath & "\lib\xml-apis-1.3.04.jar;"
commandline = commandline & foppath & "\lib\xml-apis-ext-1.3.04.jar;"
commandline = commandline & foppath & "\lib\xercesImpl-2.7.1.jar;"
commandline = commandline & foppath & "\lib\xalan-2.7.0.jar;"
commandline = commandline & foppath & "\lib\serializer-2.7.0.jar;"
commandline = commandline & foppath & "\lib\batik-all-1.7.jar;"
commandline = commandline & foppath & "\lib\xmlgraphics-commons-1.3.1.jar;"
commandline = commandline & foppath & "\lib\avalon-framework-4.2.0.jar;"
commandline = commandline & foppath & "\lib\commons-io-1.3.1.jar;"
commandline = commandline & foppath & "\lib\commons-logging-1.0.4.jar;"
commandline = commandline & foppath & "\lib\jai_imageio.jar;"
commandline = commandline & foppath & "\lib\fop-hyph.jar;"
commandline = commandline & """ org.apache.fop.cli.Main "
commandline = commandline & workpath & "/file.fo "
commandline = commandline & workpath & "/file.pdf "

Dim ResultCode
ResultCode = Shell.Run(commandline,,True) ' True = Wait for FOP to finish 
```

之后，我确保我清理了我的临时文件等。也许不是最优雅的解决方案，但考虑到需要，我相信它会工作很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T00:30:25.277

在我观察到问题并且测量结果告诉我 FOP 解决方案是罪魁祸首之前，我不会担心效率。

我建议对 Web 服务进行异步调用。发送包含 XML 输入流和 XSL-T 样式表的消息。让服务将 PDF 写入其本地磁盘。在您的 UI 中添加一个邮箱，以在 PDF 可供提取时提醒用户。单击链接，PDF 将流式传输到浏览器。用户可以根据需要查看或保存到本地磁盘。

在这种情况下异步很好，因为您不知道转换可能需要多长时间。为什么要让用户等待？让他们稍后再检查。检查新 PDF 的 AJAX 调用会很优雅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-13T11:35:01.787

您如何将配置文件 -c conf\fop.xconf 或 -c C:\fop\conf\fop.xconf 添加到上述出色的工作中

塔！

# c# - 为什么在 C# 中不继承构造函数？

> ID：426484
> 
> 赞同：36
> 
> 时间：2009-01-08T23:31:15.817
> 
> 标签：c#, oop, inheritance, constructor

我猜有一些关于 C# 继承的基本知识我不明白。有人请赐教吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-08T23:51:43.543

有时，在子类化时，您希望限制创建类实例所需的条件。

让我给你举个例子。如果类确实继承了它们的超类构造函数，那么所有类都将具有来自`Object`. 显然这是不正确的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-01-09T01:24:30.113

如果您考虑如果构造函数**被**继承会发生什么，您应该开始看到问题。

由于[.NET 中几乎所有类型都继承自 Object](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/not-everything-derives-from-object)（它有一个无参数构造函数），这意味着您创建的几乎每个类型都将被迫有一个无参数构造函数。但是有**很多**类型的无参数构造函数没有意义。

版本控制也会有问题。如果你的基类型的新版本出现了一个新的构造函数，你会在你的派生类型中自动获得一个新的构造函数。这将是一件坏事，也是[脆弱基类](https://en.wikipedia.org/wiki/Fragile_base_class)问题的一个具体实例。

还有一个更哲学的论点。继承与类型责任有关（这就是我所做的）。构造函数是关于类型协作的（这是我需要的）。因此，继承构造函数会将类型责任与类型协作混合在一起，而这两个概念应该真正保持分离。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-08T23:41:45.140

超类中的构造函数被调用，无论你是否显式调用它们。它们从父类向下链接。如果您的构造函数没有显式调用其超类中的构造函数，则该类中的默认构造函数会在构造函数代码之前隐式调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-08T23:52:56.350

我假设你的意思是：

```
class Foo
{
   public Foo(int someVar) {}
}

class Bar : Foo
{
    // Why does Bar not automatically have compiler generated version of 
    Bar(int someVar): Foo(someVar) {}
} 
```

我相信这是从 C++（和 Java）继承而来的。
但是假设你确实有这个并且 Bar 有一些其他的成员变量。这会不会引入编译器生成的构造函数被使用而不是初始化 BAr 的成员的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T23:44:37.177

默认构造函数将始终被调用。

```
class Bar : Foo { } 
```

当 Bar 被实例化时，它将默认调用 Foo() 构造函数。

```
class Foo {
    public Foo(int someVar) {}
}

class Bar : Foo {
    public Bar() : base(42) {}
} 
```

如果没有无参数构造函数，您将需要定义使用哪一个并传递参数。

# c# - .NET C# 绘制缓慢

> ID：426488
> 
> 赞同：6
> 
> 时间：2009-01-08T23:32:16.517
> 
> 标签：c#, .net, drawing, performance

我在 .NET 中快速绘制某些东西时遇到问题。我不认为任何特别的事情应该花费太多时间，但是在我尝试过的每台机器上，我都会遇到严重的问题。这是在 vs2008 .NET 中使用 C# 实现的（在 C++ 中有一些东西，但与绘图无关）。

我有三个屏幕，用户应该能够毫无延迟地在它们之间切换。在第一个屏幕上，有四个按钮、八个用户控件（包括两个按钮和每个 6 个标签）、一个文本字段和一个下拉框。我不认为它有那么多。

在第二个屏幕上，我有四个标签、六个按钮和两个控件，每个控件有六个按钮、一个 opengl 绘图上下文和大约十个标签。

在第三个屏幕上，我有一个 opengl 上下文和 10 个按钮。

从任何屏幕翻转到任何屏幕实际上需要大约一秒钟。例如，如果我从第二个屏幕翻转到第一个屏幕，整个应用程序就会空白，显示背景屏幕，然后绘制第一个屏幕。很多时候，一块块地绘制屏幕，​​就好像这台机器在瑞典的一家工厂里故意手工制作精致美味的字母，然后将每个字母单独运送到我的屏幕上。我夸大了，我想把这一点说清楚，因为我不认为瑞典人像这次重画那么慢。

第一个和第二个屏幕被绘制在内存中，并存储在那里，只有一个“.Hide()”和“.Show()”来使它们出现和消失。双缓冲似乎无关紧要。第三个屏幕每次都重新绘制，并且绘制时间似乎与第一个和第二个相同。

有什么想法吗？会发生什么？我怎样才能找到它？

谢谢！

编辑：我应该补充一点，任何 C++ 处理等都发生在它自己的线程中。偶尔会有 MethodInvoke 将操作的结果绘制到屏幕上，但是这个问题在没有调用任何函数的情况下发生，只需按下按钮从一个屏幕转到下一个屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:51:02.193

除了提到的分析器之外，您还可以关闭 OpenGL 上下文。如果您注意到加速，那么您就会知道这是您的图形内容，您可以相应地集中优化。

瑞典幽默得分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T01:17:02.203

> 我怎样才能找到它？

dotTrace - [http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T23:41:32.830

在“屏幕翻转”事件期间您是否进行了任何其他处理？除了让表单被重绘吗？如果您在翻转之间处理某些东西（也许是您的 c++ 添加？），并且您不是多线程，您会得到那种白色的效果。表单可能正在等待 CPU 时间重新绘制自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T06:51:14.447

我自己从未以这种方式使用过 OpenGL，但您可能想看看 OpenGL 上下文被翻转的方式。从一页切换到另一页时，您可能会重置设备（以 DirectX 术语），这可能会导致延迟。

如果可能的话，让设备绘制到后面的 System.Drawing.Bitmap，并在屏幕上使用该位图。让您的 OpenGL 代码了解用户所在的当前页面，您**可能会**获得所需的速度。

要在进行重大更改之前对此进行测试，请尝试删除表单上的 OpenGL 显示。

**这都是一时兴起。**

# c# - 项目发布到 windows web server 2008

> ID：426489
> 
> 赞同：1
> 
> 时间：2009-01-08T23:32:28.403
> 
> 标签：c#, asp.net, visual-studio, iis-7

我正在 Windows XP Pro 上使用 Visual Studio 2008 (C#) 项目。我正在尝试使用“发布 Web”向导将该应用程序发布到远程服务器，即 Windows Web Server 2008 OS。

但是每次发布都会失败，并出现以下错误：

```
正在连接到 http://XX.XXX.XXX.XX/...
 无法创建网站
 'http://XX.XXX.XXX.XX/'。网络
 服务器似乎没有
 已安装 FrontPage 服务器扩展。
 ========== 构建：1 个成功或最新，0 个失败，0 个跳过
 ==========
 ========== 发布：0 成功，1 失败，0 跳过 ==========

```

我使用了这些链接：

*   [http://learn.iis.net/page.aspx/134/install-frontpage-server-extensions/](http://learn.iis.net/page.aspx/134/install-frontpage-server-extensions/)
*   [http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1630](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1630)
*   [http://www.rtr.com/fpse/](http://www.rtr.com/fpse/)

我已经从上面的链接安装了 FrontPage 服务器扩展，在远程服务器上没有任何问题。

并扩展虚拟服务器（“默认网站”）。

但是，问题仍然存在。我找不到任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T00:10:35.260

好的问题解决了。

这是一个用户授权问题。我将用户设置为远程服务器的管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-08T23:40:20.697

我经常遇到 http 发布的问题。我通过设置映射到 Web 应用程序目录的 ftp 目录并使用向导中的 ftp 地址来解决它。

# sqlite - 如何在 SQLite 3.0 中重命名表？

> ID：426495
> 
> 赞同：139
> 
> 时间：2009-01-08T23:36:39.627
> 
> 标签：sqlite

如何在[SQLite](http://en.wikipedia.org/wiki/SQLite) 3.0 中重命名表？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2009-01-08T23:41:16.140

```
ALTER TABLE `foo` RENAME TO `bar` 
```

[SQLite 查询语言：ALTER TABLE](http://www.sqlite.org/lang_altertable.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-23T22:28:00.787

答案仍然是使用“ALTER TABLE”。但是关于这个主题的主要文档页面非常厚。需要的是一个简单的例子来说明它是如何工作的。你可以在这里找到：[https ://www.sqlitetutorial.net/sqlite-alter-table/](https://www.sqlitetutorial.net/sqlite-alter-table/)

准确地说，在最基本的情况下，它看起来像这样：

```
ALTER TABLE existing_table
RENAME TO new_table; 
```

我不确定点表示法是否有效，但我认为以下内容也是正确的：

```
ALTER TABLE existing_database.existing_table
RENAME TO new_database.new_table; 
```

# .net - Nullable Enum 可空类型问题

> ID：426497
> 
> 赞同：10
> 
> 时间：2009-01-08T23:36:55.743
> 
> 标签：.net, c#-2.0, nullable

我收到以下源代码的以下编译错误：

编译错误：

无法确定条件表达式的类型，因为 '' 和 'MyEnum' 之间没有隐式转换

源代码

```
public enum MyEnum
{
    Value1, Value2, Value3
}

public class MyClass
{
    public MyClass() {}
    public MyEnum? MyClassEnum { get; set; }
}

public class Main()
{
   object x = new object();

   MyClass mc = new MyClass()
   {
        MyClassEnum = Convert.IsDBNull(x) : null ? 
            (MyEnum) Enum.Parse(typeof(MyEnum), x.ToString(), true)
   };
} 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-08T23:43:13.483

我认为您只需要将结果转换为`Enum.Parse`to `MyEnum?`。至少可以为空的整数就是这种情况。例如：

```
int? i;
i = shouldBeNull ? null : (int?) 123; 
```

所以：

```
MyClassEnum = Convert.IsDBNull(x)
    ? null
    : (MyEnum?) Enum.Parse(typeof(MyEnum), x.ToString(), true) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-08T23:43:12.343

您的代码中存在语法错误：':' 和 '?' 的位置 必须交换：

```
MyClassEnum = Convert.IsDBNull(x) ? null : 
            (MyEnum) Enum.Parse(typeof(MyEnum), x.ToString(), true) 
```

顺便提一句：

据我所知，推荐的方法是使用名为“None”的枚举元素而不是 Nullable 枚举，例如：

```
public enum MyEnum
{
    None, Value1, Value2, Value3
} 
```

和

```
MyClassEnum = Convert.IsDBNull(x) ? MyEnum.None : 
            (MyEnum) Enum.Parse(typeof(MyEnum), x.ToString(), true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-08T23:42:59.363

我认为您只需要将结果转换为（MyEnum？）而不是（MyEnum）？

# winforms - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：426499
> 
> 赞同：3
> 
> 时间：2009-01-08T23:37:29.097
> 
> 标签：winforms, user-controls

我使用以下方法创建了一个继承自 ComboBox 的 Winforms AutoComplete 组合框控件：

```
Protected Overrides Sub OnKeyPress(ByVal e As System.Windows.Forms.KeyPressEventArgs)
        MyBase.OnKeyPress(e)
        Dim text As String = Me.Text
        If Char.IsLetter(e.KeyChar) Then
            text = text + e.KeyChar
        End If
        If (text.Length = AutoCompleteSearchChars And Char.IsLetter(e.KeyChar)) Then
            SetAutoCompleteMethod.Invoke(text)
            Me.AutoCompleteSource = AutoCompleteSource.ListItems
            Me.Text = text
            Me.SelectionStart = text.Length
            Me.SelectionLength = 0
            If Me.Items.Count > 0 Then
                Me.SelectedIndex = 0
            End If
            e.Handled = True
        End If
    End Sub 
```

“SetAutoCompleteMethod”是一个委托，它指向一个方法，该方法基于使用组合框中的当前文本作为通配符搜索的前缀来填充组合框项。这提供了与 ajax 自动完成组合框类似的功能。

这在第一次调用时一切正常，但在第二次调用时，我得到“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”错误。更新组合框的所有代码完成后出现错误。我得到以下堆栈跟踪：

> 在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms 的 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)。UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData) at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
> at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext 上下文）
> 在 System.Windows.Forms.Application.Run(ApplicationContext context) 在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun() 在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.DoApplicationModel() 在 Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String [] commandLine) 在 ApplicationShell.My.MyApplication.Main(String[] Args) 在 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81 在 System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args) 在 System .AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext 的 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()。在 System.Threading.ThreadHelper.ThreadStart() 处运行（ExecutionContext executionContext，ContextCallback 回调，对象状态）

有人能指出我解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T04:04:12.037

当我收到该错误时，事实证明它确实是取消引用空指针的问题，但无论如何它都会调用方法并且在尝试访问其中一个成员变量之前没有崩溃。自从.Net 出现之前，我就没有真正使用过 VB，但是您的堆栈跟踪表明它在某个地方的本机调用中死亡。如果是这种情况，您可能会遇到同样的问题，在这种情况下，我建议您仔细检查这些指针，不仅是崩溃的地方，还要检查几个级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-27T02:30:08.833

将对象添加到其 ToString() 方法不返回任何内容的 items 集合是获取此对象的简单方法。可能还有其他方法可以达到相同的行为。

继续诊断它，就好像它是 NullReferenceException。

请参阅[您在 C# 或 .NET 中看到的最奇怪的极端案例是什么？](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-or-net#194685)对于另一种情况。

# python - 如何模拟 Python 方法 OptionParser.error()，它执行 sys.exit()？

> ID：426500
> 
> 赞同：15
> 
> 时间：2009-01-08T23:37:31.857
> 
> 标签：python, unit-testing, mocking, optparse

我正在尝试对一些看起来像这样的代码进行单元测试：

```
def main():
    parser = optparse.OptionParser(description='This tool is cool', prog='cool-tool')
    parser.add_option('--foo', action='store', help='The foo option is self-explanatory')
    options, arguments = parser.parse_args()
    if not options.foo:
        parser.error('--foo option is required')
    print "Your foo is %s." % options.foo
    return 0

if __name__ == '__main__':
   sys.exit(main()) 
```

使用如下所示的代码：

```
@patch('optparse.OptionParser')
def test_main_with_missing_p4clientsdir_option(self, mock_optionparser):
    #
    # setup
    #
    optionparser_mock = Mock()
    mock_optionparser.return_value = optionparser_mock
    options_stub = Mock()
    options_stub.foo = None
    optionparser_mock.parse_args.return_value = (options_stub, sentinel.arguments)
    def parser_error_mock(message):
        self.assertEquals(message, '--foo option is required')
        sys.exit(2)
    optionparser_mock.error = parser_error_mock

    #
    # exercise & verify
    #
    self.assertEquals(sut.main(), 2) 
```

我正在使用[Michael Foord 的 Mock](http://www.voidspace.org.uk/python/mock.html)和 nose 来运行测试。

当我运行测试时，我得到：

```
 File "/Users/dspitzer/Programming/Python/test-optparse-error/tests/sut_tests.py", line 27, in parser_error_mock
    sys.exit(2)
SystemExit: 2

----------------------------------------------------------------------
Ran 1 test in 0.012s

FAILED (errors=1) 
```

问题是 OptionParser.error 执行 sys.exit(2)，因此 main() 自然依赖于此。但是鼻子或单元测试检测到（预期的） sys.exit(2) 并且测试失败。

我可以通过在 main() 中的 parser.error() 调用下添加“return 2”并从 parser_error_mock() 中删除 sys.exit() 调用来使测试通过，但我发现将被测代码修改为允许测试通过。有更好的解决方案吗？

**更新**：[df](https://stackoverflow.com/users/3002/df)的答案有效，尽管正确的调用是“self.assertRaises(SystemExit, sut.main)”。

这意味着测试通过了 parser_error_mock() 中 sys.exit() 中的任何数字。有什么方法可以测试退出代码吗？

顺便说一句，如果我添加，测试会更加健壮：

```
self.assertEquals(optionparser_mock.method_calls, [('add_option', ('--foo',), {'action': 'store', 'help': 'The foo option is self-explanatory'}), ('parse_args', (), {})]) 
```

在末尾。

**更新 2**：我可以通过将“self.assertRaises(SystemExit, sut.main)”替换为：

```
try:
    sut.main()
except SystemExit, e:
    self.assertEquals(type(e), type(SystemExit()))
    self.assertEquals(e.code, 2)
except Exception, e:
    self.fail('unexpected exception: %s' % e)
else:
    self.fail('SystemExit exception expected') 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T00:24:15.617

这会起作用`assertEquals`吗？

```
self.assertRaises(SystemExit, sut.main, 2) 
```

这应该捕获`SystemExit`异常并防止脚本终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-18T17:48:48.730

正如我对问题的更新所述，我不得不修改[dF](https://stackoverflow.com/users/3002/df)的答案：

```
self.assertRaises(SystemExit, sut.main) 
```

...我想出了一些更长的片段来测试退出代码。

[注意：我接受了我自己的答案，但如果他更新了他的答案，我会删除这个答案并接受[dF的。]](https://stackoverflow.com/users/3002/df)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T07:09:48.870

可能这个问题包含一些新信息：

[Java：如何测试调用 System.exit() 的方法？](https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T17:00:16.637

添加`@raises`到您的测试功能。IE：

```
from nose.tools import raises

@raises(SystemExit)
@patch('optparse.OptionParser')
def test_main_with_missing_p4clientsdir_option(self, mock_optionparser):
    # Setup
    ...
    sut.main() 
```

# java - 定义通用接口的麻烦

> ID：426505
> 
> 赞同：2
> 
> 时间：2009-01-08T23:39:01.370
> 
> 标签：java, generics

我一直在努力定义一个通用接口，但我没有实现我想要的。以下是该问题的简化示例。

假设我有一个通用的*Message*类

```
public class Message<T> {

    private T content;

    public void setContent(T content) {
        this.content = content;
    }

    public T getContent() {
        return content;
    }

} 
```

然后我想定义一个传输东西的接口：

```
public interface Transfer<Message<T>> {

    public void send(Message message);

} 
```

问题是编译器不接受这一点，并且总是抱怨第二个'<'字符，无论我尝试什么变体。如何指定此接口以使其绑定到泛型类型（基于 Message）并且还可以访问参数化类型？

我的计划是使用这个界面，如下所示：

```
public class Carrier<Message<T>> implements Transfer<Message<T>> {

    public void send(Message message) {
        T content = message.getContent();
        print(content);
    }

    public static void print(String s) {
        System.out.println("The string equals '" + s + "'");
    }

    public static void print(Integer i) {
        System.out.println("The integer equals " + i);
    }

    public static void main(String[] args) {
        Carrier<Message<String>> stringCarrier = new Carrier<Message<String>>();
        Message<String> stringMessage = new Message<String>("test");
        stringCarrier.send(stringMessage);

        Carrier<Message<Integer>> integerCarrier = new Carrier<Message<Integer>>();
        Message<Integer> integerMessage = new Message<Integer>(123);
        integerCarrier.send(integerMessage);
    }
} 
```

我已经进行了一些搜索和阅读（其中包括[Angelika 的泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/)），但我无法判断这是不可能的，还是我做错了。

**2009-01-16 更新**：删除了“Thing”而不是“Message< T >”的原始用法（使用它是因为我能够编译而不会在界面上出现语法错误）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-08T23:48:40.930

它看起来像你想要的：

```
public class Carrier<Thing extends Message<Foo>, Foo>
    implements Transfer<Thing> 
```

这样编译器就会知道这`thing`是一个`Message<Foo>`并且因此会有一个 getContent() 方法。

您需要将其用作：

```
Carrier<Message<String>, String> 
```

但你目前有点脱节。您正在实施`Transfer<Thing>`，但您尝试使用`thing`它，就好像它是在`Message<Thing>`查看您的`send`方法一样 - 您正在使用字符串和整数调用它。这些类没有`getContent()`方法。

我怀疑您实际上应该实施`Transfer<Message<Thing>>`而不是`Transfer<Thing>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-16T19:08:36.533

无论您如何解决泛型问题，您的代码都不会编译，因为您没有将 T 类型作为参数的 print 方法。

我相信如果你想要你正在寻找的功能，你将不得不做检查实例。因此，在这种情况下，我认为您不会从泛型类型中获得任何价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-16T19:27:58.303

您只需要为类指定 T，然后将 Message< T > 用于您的参数/返回类型。

```
public interface Transfer<T> {
    public void send(Message<T> message);
} 
```

您不使用 Message< T > 的原因是因为您在参数和返回类型中提供了“这是一条消息”上下文。

# browser - 如何最好地获取用户的浏览器信息和设置以进行调试？

> ID：426513
> 
> 赞同：5
> 
> 时间：2009-01-08T23:41:17.997
> 
> 标签：browser, cross-browser

我的问题是我有一个用户在显示我正在创建的网站的一部分时遇到问题，但我无法在我的任何浏览器上重现它，即使使用相同版本的浏览器也是如此。

我正在寻找的可能是一个网站，我可以将用户发送到该网站，该网站将告诉我他们正在运行的浏览器版本以及安装的插件以及可能影响页面显示的任何其他信息。

有人知道这样的事情吗？

**编辑：**问题与CSS有关。他们希望所有文本输入周围都有一些特殊的图像，但在用户计算机上，文本输入部分显示在设置为背景的图像之外。

我需要比 Google Analytics 更多的用户特定信息，因为您无法分离出特定用户。我还怀疑它比用户代理更复杂。

我也可以将网站公开发布，因为他们希望在发布之前将其想法保密……grr。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T01:04:32.260

我发现将用户发送到支持详细信息站点 ( [http://supportdetails.com/](http://supportdetails.com/) ) 是获取系统和浏览器详细信息的好方法。在该站点，他们所要做的就是输入您的电子邮件地址，该站点将发送详细信息，例如：

*   操作系统
*   屏幕分辨率
*   浏览器名称和版本
*   浏览器大小（视口）
*   IP地址
*   颜色深度
*   启用 Javascript（是/否）
*   已安装 Flash 版本
*   启用 Cookie（是/否）。

这些信息也可以导出为 csv 或 PDF。挺甜的。

该网站由一家名为 Imulus 的机构制作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-08T23:50:30.770

不幸的是，我不知道有哪个网站会按照您的要求记录有关用户浏览器的所有详细信息。

但也许[browsershots.org](http://www.browsershots.org/)可以帮助您进行调试？它允许您非常轻松地在**许多**不同的浏览器中测试您的设计。

编辑：......不幸的是，仅限于页面加载的初始设计，因为它只是为您截取屏幕截图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-08T23:45:09.890

经典的做法是使用[用户代理](http://en.wikipedia.org/wiki/User_agent)来确定浏览器和操作系统

看起来这个[网站](http://www.useragent.org/)会为你展示它。

至于插件，有多种方法可以在 javascript 中测试您正在寻找的插件。

您必须在客户端测试这些，因为（据我所知）无法在服务器端检测到这些。

下面的粗略示例展示了如何在 IE 和 Mozilla 浏览器中测试 acrobat reader 并返回它是否已安装以及对象中的哪个版本。

```
function TestAcro()
{
var acrobat=new Object();
acrobat.installed=false;
acrobat.version='0.0';
if (navigator.plugins && navigator.plugins.length)
{
for ( var x = 0, l = navigator.plugins.length; x < l; ++x ) 
{
//Note: Adobe changed the name of Acrobat to Adobe Reader
if ((navigator.plugins[x].name.indexOf('Acrobat') != -1) | (navigator.plugins[x].description.indexOf('Acrobat') != -1) | (navigator.plugins[x].name.indexOf('Adobe Reader') != -1) |(navigator.plugins[x].description.indexOf('Adobe Reader') != -1))
{
acrobat.version=parseFloat(navigator.plugins[x].description.split('Version ')[1]);
if (acrobat.version.toString().length == 1) acrobat.version+='.0';
acrobat.installed=true;
break;
}
}
}
else if (window.ActiveXObject)
{
for (x=2; x<10; x++)
{
try
{
oAcro=eval("new ActiveXObject('PDF.pdfCtrl."+x+"');");
if (oAcro)
{
acrobat.installed=true;
acrobat.version=x+'.0';
}
}
catch(e) {}
}
try
{
oAcro4=new ActiveXObject('PDF.pdfCtrl.1');
if (oAcro4)
{
acrobat.installed=true;
acrobat.version='4.0';
}
}
catch(e) {}
try
{
oAcro7=new ActiveXObject('AcroPDF.PDF.1');
if (oAcro7)
{
acrobat.installed=true;
acrobat.version='7.0';
}
}
catch(e){}
}
return acrobat;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T23:46:07.020

谷歌分析？如果您的网络服务器上安装了任何类型的网络分析程序，通常它们还会提供操作系统、网络浏览器等信息。您可以使用用户的 IP 地址在您的日志中查找他的信息。

还有，他们有什么问题？我们或许能帮上忙。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-08T23:57:46.230

我确实找到了这个程序，但不幸的是它不是免费服务，我也无法在该页面上获取信息（除非我付费）：[http ://www.cyscape.com/showbrow.aspx](http://www.cyscape.com/showbrow.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-08T23:58:11.113

如果是 CSS 问题并且问题与 IE（最常见）有关，您可能需要考虑使用[IE 7 library](http://dean.edwards.name/IE7/)。

说到 CSS……我让它在 Mozilla 浏览器中正常工作，然后我看到我需要有条件地破解以使其在 IE 中工作。这个库派上用场了。

此外，如果可能的话，我会尝试限制对主流现代浏览器的支持。如果可能，请尝试包含移动浏览器（iPhone 等）。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-08T23:59:00.470

在所有请求中发送的用户代理和相关 HTTP 标头可以为您提供一些信息（浏览器和版本），但对于客户端安装的详细信息，您可能不走运自动捕获机制获取任意列表安装在客户端浏览器上的插件。这将违反安全性，因此除非浏览器有意公开它们，否则如果不安装客户端二进制文件，您将无法访问它。

根据与用户的关系，您可以尝试使用 Go2Meeting 或 CoPilot 之类的方法，以便您自己查看正在运行的错误。这也将允许您仔细阅读浏览器设置和插件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T00:13:52.453

我一直在我的 ASP.NET 网站中使用[Ocean 的浏览器功能。](http://owenbrady.net/browsercaps/)获得许多属性真的很容易。具体来说，我使用的是 Ocean2.Web.HttpCapabilities 库。

要获取浏览器类型和功能：

```
string browserSettings = Ocean2.Web.HttpCapabilities.BrowserCaps.Build.ProcessDefault(HttpContext.Current.Request); 
```

以下是结果示例：

```
Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.0；WOW64；SLCC1；.NET CLR 2.0.50727；.NET CLR 3.0.04506；Media Center PC 5.0；InfoPath.2）
操作系统 - Windows Vista
平台-WinNT
win16 - 错误
win32 - 真
win64 - 真
类型 - IE7
浏览器 - IE
版本 - 7.0
BrowserBuild - aol - 假
饼干 - 真的
javascript - 真
ecmascript 版本 - 1.2
VBScript - 真
activexcontrols - 真
javaapplet - 是的
screenBitDepth - 1
mobileDeviceManufacturer - 未知
mobileDeviceModel - 未知

```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-10-29T13:08:45.873

你也可以试试这个：

BROWSER PROBE 可查找有关您的浏览器、插件、系统、屏幕等的详细信息。支持人员和临时用户的绝佳工具。

[浏览器探针](http://browserprobe.com/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-23T08:25:56.190

这些答案中的大多数都已过时，带有死链接。

我找到了适合我需要的[http://www.mybrowserinfo.com 。](http://www.mybrowserinfo.com)希望它可以帮助别人。

更人性化的服务：[https ://aboutmybrowser.com/?nr](https://aboutmybrowser.com/?nr)

# .net - 在使用来自 ActiveMQ 的消息时如何保持消息顺序？

> ID：426532
> 
> 赞同：4
> 
> 时间：2009-01-08T23:49:29.647
> 
> 标签：.net, activemq

我有一个使用 ActiveMQ 客户端的 .NET 服务。我已经实现了一个带有事务连接的 MessageListener 来使用消息。

有时，我会以不同的顺序将消息放入队列中。

使用 MessageListner 有错吗？有没有办法保留消息顺序？

仅供参考：有一个生产者将消息放入队列，一个消费者将消息从队列中拉出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:42:31.727

你不应该做任何事情来维持秩序；这是消息队列为您做的事情之一。我认为，如果您有一个消费者正在侦听队列，并且它正在无序地处理消息，那么您要么发现了错误，要么消息没有按照您认为的顺序排队。

此外，[ActiveMQ FAQ](http://activemq.apache.org/faq.html)中的[这个问题](http://activemq.apache.org/how-do-i-preserve-order-of-messages.html)可能会有所帮助。

**编辑：**通过阅读对[duffymo 的回答](https://stackoverflow.com/questions/426532/how-to-you-preserve-message-order-when-consuming-messages-from-activemq#426613)的评论，看起来你有点过度设计了。一般来说，像 ActiveMQ、MQ Series、joram 等这样的消息队列有两个特点：它们以与入队相同的顺序传递消息，并且它们保证消息传递。发送单独的 ACK 消息是多余的；这有点像提交数据库事务，然后查询相同的信息以再次检查数据库是否实际存储了它。

话虽如此，您的服务器是多线程的吗？如果是这样，它可能会在将 ACK 排入队列**之前将响应排入队列。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-19T17:22:55.177

更多信息：我调用的服务器是第三方服务器，我无法控制它发送的消息。我确实知道，基于它们以正确顺序放置的消息 ID。此外，在该系统中，ACK 和 Acknowledge 之间存在差异。当我的原始消息放入“出站”队列时收到 ACK。然后，我监视“入站”队列以获取响应。我通常会得到一个“确认”，然后是“通过”或“失败”。这些消息的相关 ID 是来自 ACK 的消息 ID。

我最初使用消息侦听器并响应 OnMessge 事件。在意识到使用这种方法后，我放弃了这种方法，消息是异步传递的，因此没有特定的顺序。因此，我将代码更改为使用计时器 (System.Threading.Timer) 进行轮询来调用 consumer.Receive() 并一次获取一条消息。这按我想要的方式工作。

我在服务启动时打开消费者一次，并不断轮询消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T00:19:43.427

为什么消息顺序很重要？MessageListener 不必关心。

如果您需要关联 ID 来将响应与特定请求相匹配，那就另当别论了。你是这个意思吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T09:39:45.603

杰森刚才所说的一切。还有一些需要注意的事情。您让消费者对大量消息保持开放，对吗？您不是为几条消息创建消费者然后关闭它吗？只有关闭消费者才会导致与消费者关联的消息被放回可能破坏顺序的队列中。

它与回滚有关吗？（您是否回滚任何交易？）。

最后，您始终可以通过使用[Resequencer](http://activemq.apache.org/camel/resequencer.html)为您重新排序来确保订单。

# apache-flex - 如何在 AS3 中创建自定义 MouseEvent.CLICK 事件（将参数传递给函数）？

> ID：426540
> 
> 赞同：7
> 
> 时间：2009-01-08T23:52:18.613
> 
> 标签：apache-flex, flash, actionscript-3, events, closures

这个问题不仅与 MouseEvent.CLICK 事件类型有关，而且与 AS3 中已经存在的所有事件类型有关。我阅读了很多关于自定义事件的内容，但直到现在我都无法弄清楚如何做我想做的事情。我试着解释一下，希望你明白：

这是我的情况的说明：

```
for(var i:Number; i < 10; i++){
    var someVar = i;
     myClips[i].addEventListener(MouseEvent.CLICK, doSomething);
}

function doSomething(e:MouseEvent){ /* */ } 
```

但我希望能够将*someVar*作为参数传递给*doSomething*。所以我尝试了这个：

```
for(var i:Number; i < 10; i++){

    var someVar = i;
    myClips[i].addEventListener(MouseEvent.CLICK, function(){
        doSomething(someVar);
    });
}

function doSomething(index){ trace(index); } 
```

这种工作，但不是我所期望的。由于函数闭包，当实际触发 MouseEvent.CLICK 事件时，*for*循环已经结束，并且*someVar*保存了最后一个值，即示例中的数字*9*。因此，每个影片剪辑中的每次点击都会调用*doSomething*，并将*9*作为参数传递。这不是我想要的。

我认为创建自定义事件应该可以工作，但是当触发 MouseEvent.CLICK 事件并将参数传递给它时，我找不到触发自定义事件的方法。现在我不知道这是否是正确的答案。

我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T16:14:36.627

您确实需要扩展事件类以使用额外参数创建自己的事件。将函数放在 addEventListener（匿名函数）中会导致内存泄漏，这是不好的。看看下面的内容。

```
import flash.events.Event;

//custom event class to enable the passing of strings along with the actual event
public class TestEvent extends Event
{
    public static const TYPE1 :String = "type1";
    public static const TYPE2 :String = "type2";
    public static const TYPE3 :String = "type3";

    public var parameterText:String;

    public function TestEvent (type:String, searchText:String)
    {
        this.parameterText = searchText;
        super(type);
    }

} 
```

当您创建一个新事件时，例如

```
dispatchEvent(new TestEvent(TestEvent.TYPE1, 'thisIsTheParameterText'))" ; 
```

然后你可以像这样监听那个事件

```
someComponent.addEventListener(TestEvent.TYPE1, listenerFunction, true , 0, true); 
```

并且在函数“listenerFunction”内 event.parameterText 将包含您的参数。

因此，在 myClips 组件中，您将触发自定义事件并侦听该事件而不是 Click 事件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T03:18:51.427

在不了解您的应用程序的情况下，您似乎应该使用目标来传递参数或扩展 MouseEvent。不过，前者会更符合惯例。例如，如果您在“剪辑”对象（无论它是什么）上公开了一个整数公共属性：

```
public class MyClip
{
   public var myPublicProperty:int;

   public function MyClip() { //... }
}

for (var i:int = 0; i < 10; i++)
{
   myClips[i].myPublicProperty = i;
   myClips[i].addEventListener(MouseEvent.CLICK, doSomething);
} 
```

...然后，在您的事件侦听器中，您可以使用事件的 target 或 currentTarget 属性（在您的情况下可能是 currentTarget）检索该属性：

```
function doSomething(event:MouseEvent):void
{
   trace(event.currentTarget.myPublicProperty.toString());
} 
```

应该这样做！祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-01-03T00:49:06.480

```
 private function myCallbackFunction(e:Event, parameter:String):void
    {
         //voila, here's your parameter
    }

    private function addArguments(method:Function, additionalArguments:Array):Function 
    {
         return function(event:Event):void {method.apply(null, [event].concat(additionalArguments));}
    }

    var parameter:String = "A sentence I want to pass along";
    movieClip.addEventListener(Event.COMPLETE, addArguments(myCallbackFunction, [parameter] ) ); 
```

利用 AS3 中的动态函数构造。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T01:29:27.917

您可以通过将处理程序从提供变量闭包的函数中取出来完成此操作，如下所示：

```
for (var i=0; i<5; i++) {
    myClips[i].addEventListener( MouseEvent.CLICK, getHandler(i) );
}

function getHandler(i) {
    return function( e:MouseEvent ) {
        test(i);
    }
}

function test( j ) {
    trace("foo "+j);
} 
```

此外，至于为什么这会创建一个新的闭包，您可能需要查看已接受的对[这个类似问题](https://stackoverflow.com/questions/422784/how-to-fix-closure-problem-in-actionscript-3-as3)的答案中的解释。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-04-05T21:15:29.860

非常感谢这个有用的提示，这种技术比类解释更容易理解。

对我来说，我刚刚开始使用这种技术来解决计时器数组和视口数组之间的链接关系的新代码算法，并通过频繁更改其中的文本来更新状态，通过将 ID 与计时器事件一起传递。

像这样：

```
 var view:Object=[];

    for(var i:uint=0;i<Camera.names.length;i++){

    view[i]=getChildByName("Cam"+i);

    //_________ Add Text _________
    var tf:TextField = new TextField();
    tf.autoSize = TextFieldAutoSize.LEFT;
    tf.textColor=0xffffff;
    view[i].tf=view[i].addChild(tf);

    //_________ Add Timer _________
    var t:Timer = new Timer(1000);
    view[i].timer=t;
    view[i].timer.start();
    view[i].timer.addEventListener(TimerEvent.TIMER, addArg(i)); 
}

function addArg(adi:uint):Function {
    return function(event:TimerEvent):void {
        updatecamstatus(adi);
    }
}
function updatecamstatus(vH:uint):void {
   with (view[vH]){
    tf.text="Cam" + vH + "\n";
    tf.appendText("activityLevel: " + videosource.activityLevel + "\n"); 
    tf.appendText("motionLevel: " + videosource.motionLevel + "\n"); 
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T23:17:34.133

我看到您的主要目标实际上不是创建自定义 MouseEvent.CLICK，而是将参数传递给函数。您不需要复杂地创建或扩展任何东西。有一种简单且无故障的方法来做到这一点。

只要让你的功能是这样的：

```
function doSomething(index:Number):Function {
  return function(e:MouseEvent):void {
    // Use "e" and "index" here. They'll be unique for each addEventListener()
    trace(index);
  }
} 
```

此技术可以与您可以使用 addEventListener 的任何 AS3 事件类型相关。

现在你可以像这样添加它：

```
var functionsDoSomething:Object;

for (var i:Number = 0; i < 10; i++) {
  var someVar:Number = i;
  functionsDoSomething[i] = doSomething(someVar);
  myClips[i].addEventListener(MouseEvent.CLICK, functionsDoSomething[i]);
} 
```

`doSomething(someVar)`可以直接在 上使用，`addEventListener()`但最好将其保存在变量中，因为您以后可以按照添加它的相同方式将其删除：

```
for (i = 0; i < 10; i++) {
  myClips[i].removeEventListener(MouseEvent.CLICK, functionsDoSomething[i]);
} 
```

通常用于`e.currentTarget.someCustomProperty`动态对象（即MovieClip），但会让您失望（即Sprite），迫使您为每种类型构建一个完整的自定义扩展对象/事件。

该解决方案处理每个“可收听”的对象和事件。[这个答案](https://stackoverflow.com/a/13488640)有更多的细节和例子。

# java - 具有多种配置的简单 UI 应用程序的最佳框架

> ID：426541
> 
> 赞同：0
> 
> 时间：2009-01-08T23:52:45.727
> 
> 标签：java, user-interface, frameworks

我希望为 UI 开发选择一个（基于 Java 的）框架，具有以下约束：

1.  该应用程序需要非常简单的 UI（带有 1 或 2 个按钮的表单会生成图像、文本等列表），但实际呈现的 UI 元素类型很多。
2.  我们已经按照我们想要的方式实现了后端逻辑（以 Web 服务的形式）。
3.  组件化很重要
4.  我们希望（将来）有可扩展点，以允许外部开发人员更改 UI 的外观和感觉，而无需构建、编译和暂存整个应用程序甚至整个前端。
5.  UI 层的性能和可扩展性很重要，但我们并不期望每台机器 100tps，无论如何后端很可能会成为瓶颈
6.  易于维护至关重要
7.  支持轻松国际化
8.  （这有点独特）我们可能希望某些 UI 组件根据浏览器功能、浏览器版本等以不同方式呈现。但是，我们希望对构建任何特定屏幕的开发人员隐藏这一事实（尽可能） .

到目前为止，我们的首选是 Tapestry 和 JSF（也许还有 Facelets）。我在这里阅读过过去的讨论，例如[Java 的最佳 Web 应用程序框架？](https://stackoverflow.com/questions/257712/best-java-framework)但他们似乎没有解决我的具体问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:56:45.987

要考虑的一件大事是您期望的变化。如果它是一个基于 Web 的应用程序，您通常会选择围绕 JSP 构建的选择，因为它很容易更改，并且可以由设计人员进行更改。

### 更新

“怎么容易改变？” 有人问我。基本上，JSP 有两点更容易改变：它是一个丰富的平台，与编写自己的 servlet 和编写 servlet 以生成样式一致的 HTML 相比，您可以编写相对较少的 JSP；其次，由于大多数 JSP 看起来更像是模板化的 HTML 而不是 Java 代码，因此您可以让设计人员直接对其进行放松。这意味着所有繁琐的设计决策都可以由设计师做出，而不需要让设计师去做，将其展示给编码人员，让编码人员重新编码，然后将结果显示给设计师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T02:28:16.787

IMO，[条纹](http://www.stripesframework.org/)也是一个可行的选择。Stripes 是一个表示框架，用于使用最新的 Java 技术构建 Web 应用程序。因为，正如你所提到的，你已经拥有了所有的后端，并且只需要一个 UI 框架。

Spring MVC、Seam、Struts 不适合这里。

JSF 是一个不错的选择，但它有相当长的学习曲线。不过我并不觉得这太难，但是人们通常会抱怨很多，而且我看到开发人员并没有很快真正理解这一理念。优点是那里有大量的开发人员。我仍然建议，至少，看看[Stripes](http://www.stripesframework.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-16T06:02:23.377

试试检票口。你永远不会回头！

*   基于组件的架构。

*   使用纯 Java 开发 - wicket 担心所有 AJAX/Javascript

*   标记继承与类继承密切相关——你习惯于在类级别重用——准备好在 HTML 级别重用。

*   完美的关注点分离。HTML 是有效的 HTML，因此可以在任何 HTML 编辑器中进行编辑。允许 Web 设计人员在开发人员负责 Java 编码的同时构建 HTML/CSS 的外观和感觉。与 JSP 不同，Java 永远无法进入表示层——这很棒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-08T23:56:44.830

我们也在考虑 Groovy 上的 Grails，尽管我对 Web 开发的 RoR 风格的方法不太熟悉。我还研究了 Spring mvc，但我不确定我是否喜欢它的用例。一个直接的基于 jsp 的解决方案显然是一种选择，但需要我们在其中构建任何智能，并且可能导致难以维护的丑陋的“jsp 页面内的代码”，这就是为什么我犹豫这样做的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T03:18:47.930

由于您拥有 Web 服务，因此 GWT 和 Flex 是可行的选择。尤其是 Flex，旨在将 Web 服务用作服务层。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T02:06:02.580

试试 (µ)Micro： http: [//micro-docs.simplegames.ca/](http://micro-docs.simplegames.ca/)。它是开源的，代码在[Github上可用](https://github.com/florinpatrascu/micro)

有什么问题可以留言，我是作者。

# sql - 对于 Group By 查询，HQL 比 SQL 有什么优势

> ID：426544
> 
> 赞同：4
> 
> 时间：2009-01-08T23:53:28.627
> 
> 标签：sql, nhibernate, hibernate, hql

我将这个问题集中在“报告类型”查询（计数、平均等，即不返回域模型本身的查询）上，我只是想知道使用 HQL 是否有任何固有的性能优势，因为它可能是能够利用二级缓存。或者甚至更好——缓存整个查询。

显而易见的隐含好处是 NHibernate 知道列名是什么，因为它已经知道模型映射。

我应该注意的任何其他好处？

*[我正在使用 NHibernate，但我假设在这种情况下适用于 Hibernate 的内容同样适用于 NHibernate]*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T01:37:39.260

优势为零。HQL 在执行数据聚合和计算方面不会优于直接数据库查询。类似的结果：

```
Select count(*), dept from employees group by dept 
```

在数据库中的执行总是比在 HQL 中更快。请注意，我之所以这么说，*是*因为采取“取决于你的情况”的思维方式是蹩脚的。如果它与数据和数据聚合有关；在 SQL 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T13:58:38.980

二级缓存中的对象仅通过 id 检索，因此 Hibernate 将始终运行查询以获取 id 列表，然后从二级缓存或通过另一个查询读取这些对象。

另一方面，Hibernate 可以缓存查询，在某些情况下完全避免 DB 调用。但是，您必须考虑到查询中涉及的任何表的更改都会使其无效，因此您可能不会经常访问缓存。请参阅[此处](https://wiki.dgfoundation.org/display/DRD/2.+Guidelines+about+using+query+caching)有关查询缓存如何工作的描述。

因此，如果查询被缓存，则查询的成本为 0，或者与在直接 SQL 中执行查询的成本大致相同。根据您的数据更改频率，您可能会通过启用查询缓存来节省很多，或者您可能不会保存任何东西。

如果您有大量查询并且您可以容忍过时的结果，我会说使用另一个缓存来存储仅每 x 分钟到期的查询结果会好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-31T11:15:41.007

我能想到的唯一优点是 ORM 查询通常缓存在（准备好的）语句级别，所以如果您多次执行相同的查询，您可能会重用准备好的语句。

但是由于您专门要求**报告查询和性能**，因此我想不出任何**实际**优势（我在掩饰您具有其他优势，例如数据访问一致性，ORM 查询与 SQL 的事实（大多数情况下它更容易编写）带有 HQL 的查询）、数据类型转换等）

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2009-01-08T23:55:02.803

HQL 是一种对象查询语言。SQL 是一种关系查询语言。

# html - 寻找具有这些功能的 3 列 CSS 模板

> ID：426551
> 
> 赞同：-1
> 
> 时间：2009-01-08T23:57:39.147
> 
> 标签：html, css

1.  3列顶部的标题div

2.  所有列的高度必须至少填充视口的高度。因此，如果列具有不同的 bgcolor，即使列没有内容，颜色也会一直到视口底部。

3.  第二列和第三列的宽度可变。如果第 3 列宽度为 0，则第 3 列折叠并且模板变为 2 列一。（不是那么重要的要求）

4.  即使第二列没有内容，第二列中的粘性页脚也始终停留在视口底部，但页脚不应低于第一列和第三列的底部边框。

5.  适用于 FF 和 IE 6+

示例：（两条虚线是视口边缘）

```
-----------------------------------------
       HEADER full width of viewport

column 1      column 2       column 3
  |                             |
  |                             |
  |                             |
 \ /           my footer       \ /
----------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:04:34.547

我会从[A List Apart 的圣杯](http://www.alistapart.com/articles/holygrail)开始，然后加入粘性页脚。您描述页脚的方式可能无法使用直接的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T00:42:47.090

[放弃并使用表格](http://giveupandusetables.com/)

真的，单独的 css 不适合这种东西。

使用一个简单的 3 列表，然后在其上使用 css。

```
<table id="layout"><tr>
    <td id="left-column"> {{ NAV MENU }} </td>
    <td>
        <table id="middle-table"><tr><td id="middle-column"> {{ CONTENT GOES HERE }} </td></tr>
               <tr><td id="middle-footer">{{FOOTER}}</td></tr>
        </table>       
    </td>
    <td id="right-column">{{RIGHT COLUMN}}</td>
</tr></table>

<style type="text/css">
table#layout tr td
{
    vertical-align:top
}
table#layout
{
    width: 100%;
    height: 100%;
}
td#left-column
{
    width: 100px; /* or what ever you want */
}

table#middle-table, td#middle-column
{
    height: 100%;
}
</style> 
```

为了实现中间列的页脚，我在中间列内插入了另一个表格。我认为没有桌子就无法达到这种效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T00:03:16.220

这是一个很好的参考

[http://www.glish.com/css/index.html](http://www.glish.com/css/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T00:08:17.053

[雅虎 UI](http://developer.yahoo.com/yui/)可以完成您所说的大部分内容。但我同意 John Sheehan 的观点，即我认为你不能用直接的 CSS 来做到这一点。将需要一些 dhtml 或 jquery 类型的东西。

# windows - 用于检测和删除文件中的文本的 Windows 命令

> ID：426561
> 
> 赞同：2
> 
> 时间：2009-01-09T00:02:05.550
> 
> 标签：windows, command-line, text, sed

我有一个 ascii 文件，其中某处是行：BEGIN，稍后在行：END

我希望能够从 Windows 中的命令行调用中删除这两行以及介于两者之间的所有内容。这需要完全自动化。

编辑：请参阅[Vista 中的 sed - 如何删除之间的所有符号？](https://stackoverflow.com/questions/425864/sed-in-vista-how-to-delete-all-symbols-between)有关如何使用 sed 执行此操作的详细信息（cygwin 已 sed）。

编辑：我发现 SED 可以工作，但是当我将输出传输到文件时，回车符已被删除。我怎样才能保留这些？使用这个 sed 正则表达式：

/^GlobalSection(TeamFoundationVersionControl) = preSolution$/,/^EndGlobalSection$/{ /^GlobalSection(TeamFoundationVersionControl) = preSolution$/!{ /^EndGlobalSection$/!d } }

.. 开始部分是“GlobalSection(TeamFoundationVersionControl) = preSolution”，结束部分是“EndGlobalSection”。我也想删除这些行。

编辑：我现在为 sed 使用更简单的东西：

/^GlobalSection(TeamFoundationVersionControl) = preSolution$/,/^EndGlobalSection$/d

换行仍然是一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:56:29.490

这是一个 1 行 Perl 命令，它可以执行您想要的操作（只需从命令提示符窗口中键入它）：

```
perl -i.bak -ne "print unless /^BEGIN\r?\n/ .. /^END\r?\n/" myfile.txt 
```

回车和换行将正确保留。的原始版本`myfile.txt`将保存为`myfile.txt.bak`.

如果您没有安装 Perl，请获取[ActivePerl](http://www.activestate.com/activeperl/?psbx=1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T01:04:54.223

或者，我这些天使用的是一种脚本语言，它可以很好地与 Ruby 或 Python 等 Windows 一起完成此类任务。Ruby 很容易在 Windows 中安装，并且使问题变得像孩子一样玩耍。

这是一个您可以使用的脚本： **cutBeginEnd.rb myFileName.txt**

```
sourcefile = File.open(ARGV[0])

# Get the string and do a multiline replace
fileString = sourceFile.read()
slicedString = fileString.gsub(/BEGIN.*END\n/m,"") 

#Overwrite the file
sourcefile.pos = 0                
sourcefile.print slicedString             
sourcefile.truncate(f.pos) 
```

这做得很好，提供了很大的灵活性，并且可能比 sed 更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-30T17:08:02.687

以下是使用 C# 正则表达式删除整个 GlobalSection(TeamFoundationVersionControl) = preSolution 部分的方法：

```
// Create a regex to match against an entire GlobalSection(TeamFoundationVersionControl) section so that it can be removed (including preceding and trailing whitespace).
// The symbols *, +, and ? are greedy by default and will match everything until the LAST occurrence of EndGlobalSection, so we must use their non-greedy counterparts, *?, +?, and ??.
// Example of string to match against: "    GlobalSection(TeamFoundationVersionControl) ...... EndGlobalSection     "
Regex _regex = new Regex(@"(?i:\s*?GlobalSection\(TeamFoundationVersionControl\)(?:.|\n)*?EndGlobalSection\s*?)", RegexOptions.Compiled); 
```

# svn - svn：无法创建目录'/subversion/main/db/transactions/0-1.txn'：权限被拒绝

> ID：426563
> 
> 赞同：13
> 
> 时间：2009-01-09T00:03:06.937
> 
> 标签：svn, permissions

我创建了一个本地颠覆目录，但我遇到了问题。我尝试使用以下命令签入我的第一个文件：

```
svn ci TestCommenterParseFilter.java 
```

我收到以下错误消息

```
svn: Commit failed (details follow):
svn: Can't create directory '/export/svn/db/transactions/1-1.txn': Permission denied
svn: Your commit message was left in a temporary file:
svn:    '/export/speedplane/nutch-0.9/src/plugin/commenter/src/test/org/commenter/nutch/svn-commit.tmp' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-12-07T14:19:41.413

我遇到了同样的问题，但是如果我创建了目录“transactions”和“txn-protorevs”，它之后就可以正常工作而不会抱怨。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T00:25:31.930

“权限被拒绝”错误以及您使用的路径名表明您的用户帐户没有文件权限来写入`/export/svn`目录树。至少有两种方法可以解决这个问题：

1.  更改文件权限（可能使用组 +w 位），`/export/svn`以便您可以写入文件。这是挑剔的，并不总是坚持。

2.  设置为您使用协议`svnserve`与之交谈的服务器进程。`svn://`在这种情况下，服务器进程是唯一需要对存储库目录具有写入（或读取）访问权限的进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-11T18:49:14.487

只需确保您启动 svnserve -d 并以 root 身份启动它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T00:09:17.423

我认为它不会解决问题（通常会给出不同的错误消息）——但仍然可以尝试......

确保包含提交消息（`-m`或`-F`选项）：

```
$ svn ci TestCommenterParseFilter.java -m "Commit message."

$ svn ci TestCommenterParseFilter.java -F commit_message.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-25T10:54:00.583

没有一个答案能真正帮助我。我只需要授予该文件夹的完全权限：

[![在此处输入图像描述](https://i.stack.imgur.com/oNNnj.png)](https://i.stack.imgur.com/oNNnj.png)

# debugging - 为什么在 IDE 中调试更好？

> ID：426569
> 
> 赞同：146
> 
> 时间：2009-01-09T00:04:39.820
> 
> 标签：debugging, ide

我从事软件开发已有 20 多年，使用 C、Perl、SQL、Java、PHP、JavaScript 和最近的 Python 进行编程。我从来没有遇到过我无法通过仔细考虑和放置良好的调试`print`语句进行调试的问题。

我尊重很多人说我的技术很原始，在 IDE 中使用真正的调试器要好得多。然而，根据我的观察，IDE 用户使用我的石刀和熊皮似乎并没有比我调试得更快或更成功。我真诚地愿意学习正确的工具，但我从未被证明使用可视化调试器具有令人信服的优势。

此外，除了如何设置断点和显示变量内容的基础知识之外，我从未阅读过介绍如何使用 IDE 进行有效调试的教程或书籍。

我错过了什么？是什么让 IDE 调试工具比仔细使用诊断`print`语句更有效？

您能否推荐一些展示 IDE 调试更精细技术的资源（教程、书籍、截屏视频）？

* * *

甜蜜的答案！非常感谢大家抽出宝贵的时间。很有启发性。我投了很多票，没有投反对票。

一些值得注意的点：

*   调试器可以帮助我对变量、代码或运行时环境的任何其他方面进行*临时*检查或更改，而手动调试需要我停止、编辑和重新执行应用程序（可能需要重新编译）。
*   调试器可以附加到正在运行的进程或使用故障转储，而对于手动调试，“重现”缺陷的步骤是必要的。
*   调试器可以以更易读的方式轻松地显示复杂的数据结构、多线程环境或完整的运行时堆栈。
*   调试器提供了许多方法来减少执行几乎所有调试任务的时间和重复性工作。
*   可视化调试器和控制台调试器都很有用，并且有许多共同的特性。
*   集成到 IDE 中的可视化调试器还使您可以在单个集成开发环境（因此得名）中方便地访问智能编辑和 IDE 的所有其他功能。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2009-01-09T00:11:24.330

IDE 调试器将通过代码中的跟踪消息为您提供一些功能的一些示例：

*   随时查看**调用堆栈，为您提供当前堆栈帧的上下文。**
*   **进入**您无法重新编译以添加跟踪的库（假设您可以访问调试符号）
*   **在程序运行时更**改变量值****
***   编辑并继续 - 在**代码运行时更改代码**并立即查看更改结果的能力*   能够**观察**变量，看看它们何时发生变化*   能够**跳过或重复代码部分**，以查看代码将如何执行。这使您可以在进行理论更改之前对其进行测试。*   实时检查**内存内容***   **在抛出某些异常**时提醒您，即使它们是由应用程序处理的。*   **条件断点**；仅在特殊情况下停止应用程序以允许您分析堆栈和变量。*   查看多线程应用程序中的**线程上下文**，这可能很难通过跟踪来实现（因为来自不同线程的跟踪将在输出中交错）。**

 **总之，打印语句（通常）是*静态*的，如果您的原始语句不够详细，您需要重新编译以获得更多信息。IDE 消除了这种静态障碍，为您提供触手可及的*动态工具包。*

当我第一次开始编码时，我不明白调试器有什么大不了的，我认为我可以通过跟踪来实现任何事情（当然，那是在 unix 上，调试器是 GDB）。但是一旦你学会了如何正确使用图形调试器，你就不想再回到打印语句了。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-01-09T00:09:28.033

*   IDE 调试器允许您在运行时更改变量的值。

*   IDE 调试器可让您查看在执行开始时不知道想要查看的变量的值。

*   IDE 调试器可让您查看调用堆栈并检查传递奇怪值的函数的状态。（想想这个函数是从数百个地方调用的，你不知道这些奇怪的值是从哪里来的）

*   IDE 调试器允许您根据条件而不是行号在代码中的任何位置有条件地中断执行。

*   IDE 调试器可以让您在出现未处理异常的情况下检查程序的状态，而不是仅仅解决问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-01-09T00:14:39.550

这是你绝对不能用“打印”语句调试的一件事，那就是当客户给你带来内存转储并说“你的程序崩溃了，你能告诉我为什么吗？”

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-01-09T00:24:21.763

*   整个代码中的打印语句会降低可读性。
*   仅出于调试目的添加和删除它们非常耗时
*   调试器跟踪调用堆栈，以便轻松查看您的位置
*   变量可以即时修改
*   可以在执行暂停期间执行临时命令以帮助诊断
*   可以与打印语句结合使用：Debug.Write("...")

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-01-09T00:20:18.697

我认为使用 print 语句进行调试是一门失传的艺术，对于每个开发人员来说都非常重要。一旦您知道如何做到这一点，某些类别的错误就变得比通过 IDE 更容易调试。了解这种技术的程序员也非常清楚将哪些有用信息放入日志消息（更不用说您实际上最终会阅读日志）以用于非调试目的。

也就是说，您真的应该知道如何使用逐步调试器，因为对于不同类别的错误，它更容易。我将把它留给已经发布的其他优秀答案来解释原因:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-09T00:13:59.910

在我的头顶上：

1.  **调试复杂对象**- 调试器允许您深入了解对象的内部。例如，如果您的对象有一组复杂对象的数组，那么 print 语句只会让您到目前为止。
2.  **跳过代码的能力**- 调试器还允许您跳过不想执行的代码。诚然，您也可以手动执行此操作，但您必须注入更多代码。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-11-30T12:36:02.857

作为在 IDE 中调试的替代方法，您可以尝试使用[php 库的出色 Google Chrome 扩展](https://github.com/barbushin/php-console/#php-console-server-library)[PHP 控制台](https://chrome.google.com/webstore/detail/php-console/nfhmhhlpfleoednkpnnnkolmclajemef/reviews)， 该库允许：

*   在 Chrome JavaScript 控制台和通知弹出窗口中查看错误和异常。
*   转储任何类型变量。
*   远程执行 PHP 代码。
*   通过密码保护访问。
*   按请求对控制台日志进行分组。
*   跳转到错误文件：文本编辑器中的行。
*   将错误/调试数据复制到剪贴板（供测试人员使用）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-09T00:10:37.657

我已经有近 20 年没有开发了，但我发现使用 IDE / 调试器我可以：

*   查看我可能没想到会包含在打印声明中的各种内容
*   单步执行代码以查看它是否与我认为的路径匹配
*   将变量设置为某些值以使代码采用某些分支

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-01-09T00:12:18.587

使用 IDE 的一个原因可能是现代 IDE 支持的不仅仅是简单的断点。例如，Visual Studio 提供以下高级调试功能：

*   定义条件断点（仅在满足条件时才中断，或者仅在第 n 次执行断点处的语句时中断）
*   在未处理的异常或要抛出（特定）异常时中断
*   调试时更改变量
*   通过设置要执行的下一行来重复一段代码
*   等等

此外，在使用调试器时，您不必在完成调试后删除所有打印语句。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-01-12T08:37:35.380

根据我的经验，简单的打印输出有一个似乎没有人提及的巨大优势。

IDE 调试器的问题在于一切都是实时发生的。你在某个时间停止程序，然后你一次一步地执行这些步骤，如果你突然想看看之前发生了什么，就不可能回去了。这与我们大脑的工作方式完全不同。大脑收集信息，并逐渐形成意见。这样做可能需要多次迭代事件，但是一旦您跨过某个点，就无法返回。

**与此相反，一系列选定的打印输出/记录为您提供“时间事件的空间投影”。它为您提供了所发生事件的完整故事，您只需上下滚动即可非常轻松地返回和第四次。它可以很容易地回答诸如“A 发生在 B 发生之前发生吗”之类的问题。它可以让你看到你甚至不想寻找的模式。**

所以根据我的经验。IDE 和调试器是出色的工具，可以在单个调用堆栈中出现问题时解决简单问题，并在某个崩溃时探索机器的当前状态。

但是，当我们处理涉及状态逐渐变化的更困难的问题时。例如，一种算法破坏了数据结构，进而导致另一种算法失败。或者，如果我们想回答诸如“这种情况多久发生一次”、“事情按照我想象的顺序和方式发生”之类的问题。等等然后“老式”的记录/打印技术具有明显的优势。

最好的办法是在最合适的时候使用任何一种技术，例如使用日志记录/打印输出来解决一些错误，并在需要更详细地探索当前状态的断点处暂停。

还有混合方法。例如，当您执行console.log(object) 时，您会在日志中获得一个数据结构小部件，您可以对其进行扩展和更详细地探索。与“死”文本日志相比，这在很多时候是一个明显的优势。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-01-09T00:56:56.017

令我惊讶的是，我在另一个答案中没有看到这两种调试方法*不是互斥的*。

`printf`即使您使用标准调试器（无论是否基于 IDE），调试也可以很好地工作。特别是使用日志框架，因此您可以将全部或大部分内容保留在已发布的产品中，以帮助诊断客户问题。

正如此处几乎所有其他答案所指出的那样，标准调试器的关键好处是它允许您更轻松地检查（并可能更改）程序状态的细节。您不必预先知道您可能想要查看的内容 - 触手可及（或多或少）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-09T00:11:27.623

这是我在 VS.NET 调试窗口中使用最多的：

*   调用堆栈，这也是找出别人代码的好方法
*   当地人和手表。
*   立即窗口，它基本上是一个 C# 控制台，还可以让我更改变量内容、初始化内容等。
*   跳过一行的能力，将下一条语句设置为在其他地方执行。
*   将鼠标悬停在变量上并有一个工具提示向我显示它们的值的能力。

总之，它为我提供了执行代码状态的 360 度视图，而不仅仅是一个小窗口。

从来没有找到一本教这种东西的书，但话说回来，它似乎很简单，几乎就是所见即所得。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-01-09T00:16:03.323

因为使用打印语句调试多线程应用程序会让你发疯。是的，您仍然可以使用 print 语句来做到这一点，但是您需要很多语句，并且解开语句的顺序打印以模拟多线程执行 g 需要很长时间。

不幸的是，人脑只是单线程的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-01-09T00:28:01.927

调试器相对于 printf 的优势（**注意不是 IDE 调试器，而是任何调试器**）

1.  可以设置观察点。这是我最喜欢的查找内存损坏的方法之一

2.  可以调试目前无法重新编译的二进制文件

3.  可以调试需要很长时间重新编译的二进制文件

4.  可以即时更改变量

5.  可以即时调用函数

6.  不存在调试语句未刷新的问题，因此无法准确调试时序问题

7.  调试器帮助核心转储，打印语句不'

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-01-09T01:21:19.073

既然您要求指点书籍...就 Windows 调试而言，John Robbins 有几个版本的关于 Windows 调试的好书：

[调试 Microsoft .NET 和 Microsoft Windows 的应用程序](https://rads.stackoverflow.com/amzn/click/com/0735615365)

请注意，最新版本（[调试 Microsoft .NET 2.0 应用程序](https://rads.stackoverflow.com/amzn/click/com/0735622027)）仅适用于 .NET，因此如果您需要本机代码调试（它涵盖 .NET 和本机），您可能需要较旧的版本（如第一个链接中所示）。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-01-09T01:22:21.550

我个人觉得答案很简单，就像“集成的调试器/IDE 可以快速为您提供大量不同的信息，而无需输入命令。这些信息往往就在您面前，而您还没有告诉它要做什么。给你看。

检索信息的*便利性*使它们比命令行调试或“printf”调试更好。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-09T00:12:22.957

*   调试器可以附加到正在运行的进程

*   通常更容易从调试器调试线程代码

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-01-09T01:30:15.107

使用 IDE 调试器，您可以在暂停执行时查看当前范围内所有变量的值（一直到调用堆栈）。

打印语句可能很棒，但是在任何给定位置将如此多的信息转储到屏幕上会产生*大量*打印语句。

此外，许多 IDE 调试器允许您输入和评估方法，并在您停止时评估成员，这进一步增加了您必须执行的打印语句的数量。

我确实觉得调试器对于某些语言比其他语言更好，但是......

我的普遍看法是，IDE 调试器对于 Java 或 C# 等托管语言来说绝对是非常棒的，对于 C++ 相当有用，而对于 Python 等脚本语言不是很有用（但可能是我没有尝试过一个好的任何脚本语言的调试器）。

当我进行 Java 开发时，我非常喜欢 IntelliJ IDEA 中的调试器。当我使用 Python 时，我只使用 print 语句。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-01-09T02:28:38.033

正如上面有人所说：调试器！= IDE。

gdb 和（过去的）TurboDebugger（独立）在他们支持的语言上工作得很好[编辑]，谢谢。（或者更老的技术：链接到 xBase 可执行文件本身的 Clipper 调试器）——这些都不需要 IDE

此外，尽管 C/++ 编码更为罕见，但 printf 语句有时会掩盖您试图查找的错误！（例如，堆栈上的自动变量中的初始化问题，或内存分配/对齐）

最后，正如其他人所说，您可以同时使用两者。一些实时问题几乎需要打印，或者至少需要明智的 "*video_dbg = (is_good ? '+' : '-');" 某处进入视频内存。我的年龄正在显示，这是在 DOS 下:-)

TMTOWTDI

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-01-09T07:01:35.017

除了其他海报所说的很多内容之外，我真的很喜欢和电脑一起一步一步地走，因为它迫使我一次想一条线。通常我会在不查看变量值的情况下捕获错误，因为我在单击“下一行”按钮时被迫查看它。但是，比尔，我认为我的回答不会对您有所帮助，因为您可能已经掌握了这项技能。

就学习资源而言，我没有使用任何 - 我只是探索所有的菜单和选项。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-01-10T01:22:43.867

这甚至是来自真正程序员的真正问题吗？

任何花费 5 分钟调试打印语句并使用 IDE 进行调试的人 - 他/她甚至无需询问就会发生！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-03-03T00:34:49.453

我已经使用打印和 IDE 进行调试，我更愿意使用 IDE 进行调试。对我来说，唯一不起作用的情况是在时间紧迫的情况下（例如调试在线游戏），您在代码中乱扔打印语句，然后在出现严重错误后查看日志文件。然后，如果您仍然无法弄清楚，请添加更多打印并重复。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2010-05-06T10:31:26.503

只是想提一下 IDE 中控制台调试器与 printf 和 vs 调试器的一个有用功能。

您可以附加到远程应用程序（显然，在 DEBUG 模式下编译）并检查其状态，使用 POSIX`tee`实用程序将调试器输出转储到文件中。与 printf 相比，您可以选择在运行时输出状态的位置。

*当我调试部署在激进环境*中的 Adob​​e Flash 应用程序时，它帮助了我很多。您只需要定义一些在每个断点中打印所需状态的操作，使用 启动控制台调试器`fdb | tee output.log`，然后遍历一些断点。之后，您可以通过对不同断点的状态进行全面比较来打印日志并分析信息。

不幸的是，这个功能[记录到文件]在 GUI 调试器中很少可用，这使得开发人员在他们的脑海中比较对象的状态。

顺便说一句，我的观点是，在开始调试器之前，应该计划好调试的位置和内容。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2011-02-06T16:58:00.270

另一件事是，如果您加入一个新的旧项目并且没有人真正知道代码是如何做的，那么您将无法通过回显变量/对象/来进行调试... b/c 您不知道代码是什么完全执行。

在我的工作中，我正面临着这种情况，而可视化 XDebuging 帮助我了解正在发生的事情以及发生在哪里。

最好的祝福

拉斐尔

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-08-27T19:07:21.680

在错误日志和 shell 访问不可用的环境（例如共享主机）中，在 IDE 中进行调试是非常宝贵的。在这种情况下，带有远程调试器的 IDE 是唯一允许您执行简单操作（例如查看`stderr`或`stdout`.

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2012-11-26T13:27:42.773

除了已经提到的许多事情之外，调试器相对于 printf 的最重要优势之一是使用 printf 语句假定您知道错误所在的函数。在很多情况下你不知道，所以你必须做一些猜测并将打印语句添加到许多其他函数中才能对其进行本地化。该错误可能在框架代码中或与您认为的位置相去甚远的地方。在调试器中，设置断点来检查代码不同区域和不同时间点的状态要容易得多。

此外，一个不错的调试器将允许您通过将条件和操作附加到断点来进行 printf 样式的调试，这样您仍然可以保留 printf 调试的好处，但无需修改代码。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-09-19T19:27:27.057

使用 print 语句的一个问题是它会弄乱你的代码。IE，你有一个有 10 个部分的函数，你知道它在某个地方崩溃，但你不确定在哪里。因此，您添加了 10 个额外的打印语句来查明错误所在。一旦你找到并解决了你的错误，你现在必须通过删除所有这些打印语句来清理。也许你会那样做。也许你会忘记，它最终会投入生产，你的用户控制台将充满调试打印。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-03-09T11:51:13.047

哇，我喜欢这个问题吗？我一直不敢摆姿势...

似乎人们只是有不同的工作方式。对我来说最有效的是：

*   对我的代码有一个坚实的思维模型，包括内存管理
*   使用仪器（如打印语句）来跟踪正在发生的事情。

40 多年以来，我以编程为生，每天都在 C++ 和 Python 中从事非平凡的技术和科学应用程序工作，而且我的个人经验是调试器对我没有一点帮助。

我不说这很好。我不是说这很糟糕。我只是想分享它。

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2009-01-09T00:12:23.800

这不仅仅是调试。IDE 可以通过多种方式帮助您更快地构建更好的软件：

*   重构工具
*   intellisense 使 api 更容易被发现，或提醒熟悉项目的确切拼写/大小写（如果您使用同一系统 15 年，用处不大，但这种情况很少见）
*   通过自动完成变量和类名节省输入
*   在你开始编译之前发现某些类型的错误
*   自动跳转到变量/方法/类声明/定义，即使它们不在同一个文件或文件夹中。
*   中断未处理*和已处理*的异常

我可以继续。

# c# - 如何在 .NET (C#) 中杀死特定用户的进程？

> ID：426573
> 
> 赞同：7
> 
> 时间：2009-01-09T00:07:01.813
> 
> 标签：c#, .net, process

我在多用户 Windows Server 上工作，而 rdpclip 错误每天都在困扰着我们。我们通常只是打开任务管理器并杀死然后重新启动rdpclip，但这很麻烦。我写了一个用于杀死然后重新启动rdpclip的powershell脚本，但没有人使用它，因为它是一个脚本（更不用说执行策略对盒子有限制）。我正在尝试编写一个快速而肮脏的 Windows 应用程序，您可以在其中单击一个按钮来杀死 rdpclip 并重新启动它。但我想将其限制为当前用户，并且找不到执行此操作的 Process 类的方法。到目前为止，这就是我所拥有的：

```
Process[] processlist = Process.GetProcesses();
foreach(Process theprocess in processlist)
{
    if (theprocess.ProcessName == "rdpclip")
    {
      theprocess.Kill();
      Process.Start("rdpclip");
    }
} 
```

我不确定，但我认为这会杀死所有 rdpclip 进程。我想按用户选择，就像我的 powershell 脚本一样：

```
taskkill /fi "username eq $env:username" /im rdpclip.exe
& rdpclip.ex 
```

我想我可以从我的可执行文件中调用 powershell 脚本，但这似乎相当笨拙。

提前为任何格式问题道歉，这是我第一次来这里。

更新：我还需要知道如何获取当前用户并只选择那些进程。下面提出的 WMI 解决方案对我没有帮助。

UPDATE2：好的，我已经弄清楚如何获取当前用户，但它与远程桌面上的进程用户不匹配。有人知道如何获取用户名而不是 SID 吗？

干杯，fr0man

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-08T17:04:44.023

我没有使用 GetProcessInfoByPID，而是从 StartInfo.EnvironmentVariables 中获取数据。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Diagnostics;
using System.Security.Principal;
using System.Runtime.InteropServices;

namespace KillRDPClip
{
    class Program
    {
        static void Main(string[] args)
        {
            Process[] processlist = Process.GetProcesses();
            foreach (Process theprocess in processlist)
            {
                String ProcessUserSID = theprocess.StartInfo.EnvironmentVariables["USERNAME"];
                String CurrentUser = Environment.UserName;
                if (theprocess.ProcessName.ToLower().ToString() == "rdpclip" && ProcessUserSID == CurrentUser)
                {
                    theprocess.Kill();
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T18:52:31.893

好的，这就是我最终做的事情：

```
 Process[] processlist = Process.GetProcesses();
            bool rdpclipFound = false;

            foreach (Process theprocess in processlist)
            {
                String ProcessUserSID = GetProcessInfoByPID(theprocess.Id);
                String CurrentUser = WindowsIdentity.GetCurrent().Name.Replace("SERVERNAME\\",""); 

                if (theprocess.ProcessName == "rdpclip" && ProcessUserSID == CurrentUser)
                {
                    theprocess.Kill();
                    rdpclipFound = true;
                }

            }
            Process.Start("rdpclip");
            if (rdpclipFound)
            {
               MessageBox.Show("rdpclip.exe successfully restarted"); }
            else
            {
               MessageBox.Show("rdpclip was not running under your username.  It has been started, please try copying and pasting again.");
            }

            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T00:22:35.353

阅读以下 CodeProject 文章，它包含您需要的所有信息：

> [如何获取进程所有者 ID 和当前用户 SID](http://www.codeproject.com/KB/cs/processownersid.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T12:55:54.950

您可以在隐藏模式下打开 cmd 并终止特定于用户的进程。在这里，我试图杀死特定于当前用户的 Excel 进程：

```
 String CurrentUser = Environment.UserName;
            Process[] allExcelProcesses = Process.GetProcessesByName("excel");
            if (null != allExcelProcesses)
            {
                Process process = new Process();
                ProcessStartInfo startInfo = new ProcessStartInfo();
                startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
                startInfo.FileName = "cmd.exe";
                startInfo.Arguments = "/C TASKKILL /F /FI \"USERNAME eq " + CurrentUser + "\" /IM EXCEL.EXE";
                process.StartInfo = startInfo;
                process.Start();
                process.WaitForExit();
            } 
```

# iphone - iPhone应用名称拒绝？

> ID：426578
> 
> 赞同：5
> 
> 时间：2009-01-09T00:08:29.453
> 
> 标签：iphone

有没有人让苹果发回要求更改名称的应用程序？我们在 11 月提交了我们的应用程序，并一直与他们来来回回，我们更正了他们要求我们修复的项目，这些项目既是界面驱动的，也是内存驱动的，他们对名称只字未提。他们一直在测试我们的 API，所以我们知道他们正在做一些事情，但是今天我们看到了一个与我们同名的应用程序。开发人员早在 12 月就从 Apple 发布了它，但直到现在才打开它。为什么苹果现在不告诉我们改变它，其他人的名字有问题吗，我们如何在流程中提交新的名字。我们的应用程序完全不同，所以这不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T01:05:44.253

当涉及侵犯版权时，Apple 立即让我们联系了使用我们名称的其他应用程序的创建者。他们不想卷入法律纠纷，但他们确实促进了各方之间的联系。您可以考虑更改您的名称以避免任何进一步的延迟，因为苹果可以简单地等待他们认为可能成为版权问题的应用程序。

# javascript - Javascript 斐波那契第 n 项优化

> ID：426579
> 
> 赞同：-1
> 
> 时间：2009-01-09T00:08:43.230
> 
> 标签：javascript, algorithm, optimization, fibonacci

最近我对算法产生了兴趣，斐波那契数列因其简单性而引起了我的注意。

我已经设法在 javascript 中将一些东西放在一起，在阅读网络上的大量信息后，在不到 15 毫秒的时间内计算斐波那契数列中的第 n 项。它上升到 1476...1477 是无穷大，1478 是 NaN（根据 javascript！）

我为代码本身感到非常自豪，除了它是一个彻头彻尾的怪物。

所以这是我的问题：A）有没有更快的方法来计算序列？B）是否有更快/更小的方法来乘以两个矩阵？

这是代码：

```
//Fibonacci sequence generator in JS
//Cobbled together by Salty
m = [[1,0],[0,1]];
odd = [[1,1],[1,0]];
function matrix(a,b) {
    /* 
        Matrix multiplication
        Strassen Algorithm
        Only works with 2x2 matrices.
    */
    c=[[0,0],[0,0]];
    c[0][0]=(a[0][0]*b[0][0])+(a[0][1]*b[1][0]);
    c[0][1]=(a[0][0]*b[0][1])+(a[0][1]*b[1][1]);
    c[1][0]=(a[1][0]*b[0][0])+(a[1][1]*b[1][0]);
    c[1][1]=(a[1][0]*b[0][1])+(a[1][1]*b[1][1]);
    m1=(a[0][0]+a[1][1])*(b[0][0]+b[1][1]);
    m2=(a[1][0]+a[1][1])*b[0][0];
    m3=a[0][0]*(b[0][1]-b[1][1]);
    m4=a[1][1]*(b[1][0]-b[0][0]);
    m5=(a[0][0]+a[0][1])*b[1][1];
    m6=(a[1][0]-a[0][0])*(b[0][0]+b[0][1]);
    m7=(a[0][1]-a[1][1])*(b[1][0]+b[1][1]);
    c[0][0]=m1+m4-m5+m7;
    c[0][1]=m3+m5;
    c[1][0]=m2+m4;
    c[1][1]=m1-m2+m3+m6;
    return c;
}
function fib(n) {
    mat(n-1);
    return m[0][0];
}
function mat(n) {
    if(n > 1) {
        mat(n/2);
        m = matrix(m,m);
    }
    m = (n%2<1) ? m : matrix(m,odd);
}
alert(fib(1476)); //Alerts 1.3069892237633993e+308 
```

矩阵函数有两个参数：a 和 b，并返回 a*b，其中 a 和 b 是 2x2 数组。哦，顺便说一句，发生了一件神奇的事情……我正在将 Strassen 算法转换为 JS 数组表示法，它在我第一次尝试时就奏效了！太棒了，对吧？:P

如果您设法找到一种更简单的方法来做到这一点，请提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T11:53:01.037

不要推测，基准：

**编辑：**我使用其他答案中提到的优化乘法函数添加了自己的矩阵实现。这导致了显着的加速，但即使是带有循环的矩阵乘法的普通 O(n^3) 实现也比 Strassen 算法快。

```
<pre><script>

var fib = {};

(function() {
    var sqrt_5  = Math.sqrt(5),
        phi     = (1 + sqrt_5) / 2;

    fib.round = function(n) {
        return Math.floor(Math.pow(phi, n) / sqrt_5 + 0.5);
    };
})();

(function() {
    fib.loop = function(n) {
        var i = 0,
            j = 1;

        while(n--) {
            var tmp = i;
            i = j;
            j += tmp;
        }

        return i;
    };
})();

(function () {
    var cache = [0, 1];

    fib.loop_cached = function(n) {
        if(n >= cache.length) {
            for(var i = cache.length; i <= n; ++i)
                cache[i] = cache[i - 1] + cache[i - 2];
        }

        return cache[n];
    };
})();

(function() {
    //Fibonacci sequence generator in JS
    //Cobbled together by Salty
    var m;
    var odd = [[1,1],[1,0]];

    function matrix(a,b) {
        /*
            Matrix multiplication
            Strassen Algorithm
            Only works with 2x2 matrices.
        */
        var c=[[0,0],[0,0]];
        var m1=(a[0][0]+a[1][1])*(b[0][0]+b[1][1]);
        var m2=(a[1][0]+a[1][1])*b[0][0];
        var m3=a[0][0]*(b[0][1]-b[1][1]);
        var m4=a[1][1]*(b[1][0]-b[0][0]);
        var m5=(a[0][0]+a[0][1])*b[1][1];
        var m6=(a[1][0]-a[0][0])*(b[0][0]+b[0][1]);
        var m7=(a[0][1]-a[1][1])*(b[1][0]+b[1][1]);
        c[0][0]=m1+m4-m5+m7;
        c[0][1]=m3+m5;
        c[1][0]=m2+m4;
        c[1][1]=m1-m2+m3+m6;
        return c;
    }

    function mat(n) {
        if(n > 1) {
            mat(n/2);
            m = matrix(m,m);
        }
        m = (n%2<1) ? m : matrix(m,odd);
    }

    fib.matrix = function(n) {
        m = [[1,0],[0,1]];
        mat(n-1);
        return m[0][0];
    };
})();

(function() {
    var a;

    function square() {
        var a00 = a[0][0],
            a01 = a[0][1],
            a10 = a[1][0],
            a11 = a[1][1];

        var a10_x_a01 = a10 * a01,
            a00_p_a11 = a00 + a11;

        a[0][0] = a10_x_a01 + a00 * a00;
        a[0][1] = a00_p_a11 * a01;
        a[1][0] = a00_p_a11 * a10;
        a[1][1] = a10_x_a01 + a11 * a11;
    }

    function powPlusPlus() {
        var a01 = a[0][1],
            a11 = a[1][1];

        a[0][1] = a[0][0];
        a[1][1] = a[1][0];
        a[0][0] += a01;
        a[1][0] += a11;
    }

    function compute(n) {
        if(n > 1) {
            compute(n >> 1);
            square();
            if(n & 1)
                powPlusPlus();
        }
    }

    fib.matrix_optimised = function(n) {
        if(n == 0)
            return 0;

        a = [[1, 1], [1, 0]];
        compute(n - 1);

        return a[0][0];
    };
})();

(function() {
    var cache = {};
    cache[0] = [[1, 0], [0, 1]];
    cache[1] = [[1, 1], [1, 0]];

    function mult(a, b) {
        return [
            [a[0][0] * b[0][0] + a[0][1] * b[1][0],
                a[0][0] * b[0][1] + a[0][1] * b[1][1]],
            [a[1][0] * b[0][0] + a[1][1] * b[1][0],
                a[1][0] * b[0][1] + a[1][1] * b[1][1]]
        ];
    }

    function compute(n) {
        if(!cache[n]) {
            var n_2 = n >> 1;
            compute(n_2);
            cache[n] = mult(cache[n_2], cache[n_2]);
            if(n & 1)
                cache[n] = mult(cache[1], cache[n]);
        }
    }

    fib.matrix_cached = function(n) {
        if(n == 0)
            return 0;

        compute(--n);

        return cache[n][0][0];
    };
})();

function test(name, func, n, count) {
    var value;

    var start = Number(new Date);
    while(count--)
        value = func(n);
    var end = Number(new Date);

    return 'fib.' + name + '(' + n + ') = ' + value + ' [' +
        (end - start) + 'ms]';
}

for(var func in fib)
    document.writeln(test(func, fib[func], 1450, 10000));

</script></pre> 
```

产量

```
fib.round(1450) = 4.8149675025003456e+302 [20ms]
fib.loop(1450) = 4.81496750250011e+302 [4035ms]
fib.loop_cached(1450) = 4.81496750250011e+302 [8ms]
fib.matrix(1450) = 4.814967502500118e+302 [2201ms]
fib.matrix_optimised(1450) = 4.814967502500113e+302 [585ms]
fib.matrix_cached(1450) = 4.814967502500113e+302 [12ms] 
```

您的算法几乎与未缓存的循环一样糟糕。缓存是你最好的选择，紧随其后的是舍入算法——它会产生不正确的结果`n`（就像你的矩阵算法一样）。

对于较小`n`的 ，您的算法的性能比其他所有方法都差：

```
fib.round(100) = 354224848179263100000 [20ms]
fib.loop(100) = 354224848179262000000 [248ms]
fib.loop_cached(100) = 354224848179262000000 [6ms]
fib.matrix(100) = 354224848179261900000 [1911ms]
fib.matrix_optimised(100) = 354224848179261900000 [380ms]
fib.matrix_cached(100) = 354224848179261900000 [12ms] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T00:13:00.210

第 n 个斐波那契数有一个封闭形式（无循环）的解决方案。

[参见维基百科。](http://en.wikipedia.org/wiki/Fibonacci_number#Closed_form_expression)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T00:32:27.033

可能有一种更快的方法来计算这些值，但我认为没有必要。

计算一次，然后在您的程序中将结果输出为下面的 fibdata 行：

```
fibdata = [1,1,2,3,5,8,13, ... , 1.3069892237633993e+308];  // 1476 entries.
function fib(n) {
    if ((n < 0) || (n > 1476)) {
        ** Do something exception-like or return INF;
    }
    return fibdata[n];
} 
```

然后，这就是您发送给客户的代码。这对你来说是一个 O(1) 的解决方案。

人们经常忽略“缓存”解决方案。我曾经不得不为嵌入式系统编写三角函数例程，而不是使用无限级数来动态计算它们，我只有几个查找表，每个输入度数都有 360 个条目。

不用说，它以大约 1K 的 RAM 为代价尖叫着。这些值存储为 1 字节条目，[实际值 (0-1) * 16]，因此我们只需进行查找、乘法和位移即可获得所需的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T17:55:56.763

我之前的回答有点拥挤，所以我会发布一个新的：

您可以使用 vanilla 2x2 矩阵乘法来加速您的算法 - 即将您的`matrix()`函数替换为：

```
function matrix(a, b) {
    return [
        [a[0][0] * b[0][0] + a[0][1] * b[1][0],
            a[0][0] * b[0][1] + a[0][1] * b[1][1]],
        [a[1][0] * b[0][0] + a[1][1] * b[1][0],
            a[1][0] * b[0][1] + a[1][1] * b[1][1]]
    ];
} 
```

如果您关心准确性和速度，请使用缓存解决方案。如果精度不是问题，但内存消耗是问题，请使用舍入解决方案。`n`矩阵解决方案仅在您想要快速获得结果、不关心准确性并且不想重复调用该函数时才有意义。

**编辑：**如果您使用专门的乘法函数，消除公共子表达式并替换现有数组中的值而不是创建新数组，您甚至可以进一步加快计算速度：

```
function square() {
    var a00 = a[0][0],
        a01 = a[0][1],
        a10 = a[1][0],
        a11 = a[1][1];

    var a10_x_a01 = a10 * a01,
        a00_p_a11 = a00 + a11;

    a[0][0] = a10_x_a01 + a00 * a00;
    a[0][1] = a00_p_a11 * a01;
    a[1][0] = a00_p_a11 * a10;
    a[1][1] = a10_x_a01 + a11 * a11;
}

function powPlusPlus() {
    var a01 = a[0][1],
        a11 = a[1][1];

    a[0][1] = a[0][0];
    a[1][1] = a[1][0];
    a[0][0] += a01;
    a[1][0] += a11;
} 
```

注意：`a`是全局矩阵变量的名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-25T16:55:19.010

JavaScript 中的封闭式解决方案：O(1)，精确到 n=75

```
function fib(n){
   var sqrt5 = Math.sqrt(5);
   var a = (1 + sqrt5)/2;
   var b = (1 - sqrt5)/2;
   var ans = Math.round((Math.pow(a, n) - Math.pow(b, n))/sqrt5);
   return ans;
} 
```

诚然，在处理大量数字时，即使是乘法也开始付出代价，但这会给你答案。据我所知，由于 JavaScript 对值进行四舍五入，它只能精确到 n = 75。过去，你会得到一个很好的估计，但它不会完全准确，除非你想做一些棘手的事情，比如 store将值作为字符串然后将其解析为 BigIntegers。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T00:13:32.267

如何记住已经计算的结果，如下所示：

```
var IterMemoFib = function() {
    var cache = [1, 1];
    var fib = function(n) {
        if (n >= cache.length) {
            for (var i = cache.length; i <= n; i++) {
                cache[i] = cache[i - 2] + cache[i - 1];
            }
        }
        return cache[n];
    }

    return fib;
}(); 
```

或者，如果您想要更通用的记忆功能，请扩展`Function`原型：

```
Function.prototype.memoize = function() {
    var pad  = {};
    var self = this;
    var obj  = arguments.length > 0 ? arguments[i] : null;

    var memoizedFn = function() {
        // Copy the arguments object into an array: allows it to be used as
        // a cache key.
        var args = [];
        for (var i = 0; i < arguments.length; i++) {
            args[i] = arguments[i];
        }

        // Evaluate the memoized function if it hasn't been evaluated with
        // these arguments before.
        if (!(args in pad)) {
            pad[args] = self.apply(obj, arguments);
        }

        return pad[args];
    }

    memoizedFn.unmemoize = function() {
        return self;
    }

    return memoizedFn;
}

//Now, you can apply the memoized function to a normal fibonacci function like such:
Fib = fib.memoize(); 
```

要补充的一点是，由于技术（浏览器安全）限制，**记忆函数的参数只能是数组或标量值**。没有对象。

*参考：[http ://talideon.com/weblog/2005/07/javascript-memoization.cfm](http://talideon.com/weblog/2005/07/javascript-memoization.cfm)*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T00:57:42.803

扩展一下[Dreas](https://stackoverflow.com/questions/426579/javascript-fibonacci-nth-term-optimization#426596)的答案：

1)`cache`应该从`[0, 1]`
2) 你做什么开始`IterMemoFib(5.5)`？( `cache[5.5] == undefined`)

```
fibonacci = (function () {
  var FIB = [0, 1];

  return function (x) {
    if ((typeof(x) !== 'number') || (x < 0)) return;
    x = Math.floor(x);

    if (x >= FIB.length)
      for (var i = FIB.length; i <= x; i += 1)
        FIB[i] = FIB[i-1] + FIB[i-2];

    return FIB[x];
  }
})();

alert(fibonacci(17));    // 1597 (FIB => [0, 1, ..., 1597]) (length = 17)
alert(fibonacci(400));   // 1.760236806450138e+83 (finds 18 to 400)
alert(fibonacci(1476));  // 1.3069892237633987e+308 (length = 1476) 
```

* * *

如果您不喜欢静默错误：

```
// replace...
if ((typeof(x) !== 'number') || (x < 0)) return;

// with...
if (typeof(x) !== 'number') throw new TypeError('Not a Number.');
if (x < 0) throw new RangeError('Not a possible fibonacci index. (' + x + ')'); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-15T23:22:08.953

这是计算斐波那契数列的一个非常快速的解决方案

```
function fib(n){
    var start = Number(new Date); 
    var field = new Array();
    field[0] = 0;
    field[1] = 1;
    for(var i=2; i<=n; i++)
        field[i] = field[i-2] + field[i-1]
    var end = Number(new Date); 
    return 'fib' + '(' + n + ') = ' + field[n] + ' [' +
        (end - start) + 'ms]';

}

var f = fib(1450)
console.log(f) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-02T18:17:52.123

我刚刚编写了自己的小实现，使用 Object 来存储已经计算的结果。我用 Node.JS 编写了它，它需要 2 毫秒（根据我的计时器）来计算 1476 的斐波那契。

以下是精简为纯 Javascript 的代码：

```
var nums = {}; // Object that stores already computed fibonacci results
function fib(n) { //Function
    var ret; //Variable that holds the return Value
    if (n < 3) return 1; //Fib of 1 and 2 equal 1 => filtered here
    else if (nums.hasOwnProperty(n)) ret = nums[n]; /*if the requested number is 
     already in the object nums, return it from the object, instead of computing */
    else ret = fib( n - 2 ) + fib( n - 1 ); /* if requested number has not
     yet been calculated, do so here */
    nums[n] = ret; // add calculated number to nums objecti
    return ret; //return the value
}

//and finally the function call:
fib(1476) 
```

编辑：我没有尝试在浏览器中运行它！

再次编辑：现在我做到了。试试 jsfiddle：[jsfiddle fibonacci](http://jsfiddle.net/G2aWr/ "jsFiddle 斐波那契")时间在 0 到 2ms 之间变化

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-21T09:27:08.897

更快的算法：

```
const fib = n => fib[n] || (fib[n-1] = fib(n-1)) + fib[n-2];
fib[0] = 0; // Any number you like
fib[1] = 1; // Any number you like 
```

# visual-studio - 在 Visual Studio 2008 中以编程方式强制大写？

> ID：426584
> 
> 赞同：3
> 
> 时间：2009-01-09T00:09:58.670
> 
> 标签：visual-studio, visual-studio-2008, customization

在 Visual Studio 2008 中以编程方式强制关键字大写的最简单方法是什么？

我们使用专有的命令分隔语言（如 HTML）。我们正在尝试从旧版编辑器迁移到 Visual Studio 2008。我们的编码标准是将命令大写。旧的编辑器被定制为识别命令开始分隔符并强制大写，直到输入结束分隔符或按下转义键。

在 Visual Studio 2008 中最好的方法是什么？可以用宏或加载项来完成吗？

（2009 年 1 月 12 日编辑）

感谢您迄今为止的建议。我认为他们没有回答我的问题。

说明：

*   以前的编辑器是 CodeWright，因此那里的自定义不能移植到 Visual Studio。
*   源代码不是 C#。StyleCop 似乎专门用于 C#。我们的语言类似于 HTML 等标记语言，但具有不同的分隔符和命令。
*   我试图实际大写作为开发人员类型，而不是提醒他们适当的大写。由于命令都是定界的，我们当前的编辑器实际上在输入开始定界符时打开了 Caps Lock。当按下结束分隔符或退出键时，大写锁定将关闭。这与键盘上 Caps Lock 的状态无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T00:16:21.777

试用Microsoft 网站上提供的[StyleCop 。](http://code.msdn.microsoft.com/sourceanalysis)您可能必须针对您的特定编码标准调整规则集。对于我们使用的编码标准，它开箱即用几乎是完美的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T00:15:46.210

虽然耗时，[但这篇](https://stackoverflow.com/questions/2279/add-custom-tag-to-visual-studio-validation)SO 帖子向您展示了如何将标签添加到 VS2005 中的验证设置中。我认为这种方法在 2008 年没有改变。

如果您要从旧版本的 Visual Studio 迁移，则可以只导入旧设置和自定义标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-15T22:06:26.193

这可能不是最好的解决方案，但这是我想出的。

使用宏来捕获按键事件。

就是这样：

1.  在 Visual Studio 中，转到**工具->宏->宏 IDE**菜单
2.  双击“MyMacros”查看不同的部分
3.  双击“环境事件”
4.  在环境事件模块中添加以下代码。
5.  保存文件并返回常规 VS IDE 进行测试。

    ```
    Private My_AutoCaps As Boolean = False
    Private Sub TextDocumentKeyPressEvents_BeforeKeyPress(ByVal Keypress _
      As String, ByVal Selection As EnvDTE.TextSelection, _
      ByVal InStatementCompletion As Boolean, ByRef CancelKeyPress As Boolean) _
      Handles TextDocumentKeyPressEvents.BeforeKeyPress
         Dim fileName As String = UCase(Selection.DTE.ActiveDocument.Name)
         If ( fileName.EndsWith(".CPI") ) Then
             If (My_AutoCaps) Then
                 'MsgBox(Keypress)
                 If (Keypress = "(" Or Keypress = ":") Then
                     'MsgBox("End of command character pressed.")
                     My_AutoCaps = False
                     Return
                 ElseIf (Keypress >= "a" And Keypress <= "z") Then
                     'MsgBox("Letter pressed.")
                     Selection.Text = UCase(Keypress)
                     CancelKeyPress = True
                 End If
             Else 'AutoCap is not on yet
                 If (Keypress = "^") Then
                     'MsgBox("You pressed the Start Command character.")
                     My_AutoCaps = True
                     Return
                 End If
             End If
         End If
    End Sub 
    ```

此宏仅限于 *.CPI 文件。

我还没有想出如何捕获 Esc 键，但这现在可以工作。

# asp.net - 保存 CheckBox 控件值

> ID：426599
> 
> 赞同：0
> 
> 时间：2009-01-09T00:13:54.140
> 
> 标签：asp.net, database, checkbox

我正在使用 asp.net，我正在尝试将复选框值保存到数据库中。可以在数据库的同一字段中输入多个复选框。因此，例如，我有两个名为“逗号”和“连字符”的复选框，如果用户同时选中这两个复选框，那么数据库将存储值“，”，“-”。你怎么做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:23:11.950

要将多个值保存到同一列中，我建议使用标志枚举。这是一个[使用复选框的代码示例](http://snipplr.com/view/2402/using-a-flag-enumeration-with-bitwise-operations/)。

如果您真的必须以逗号分隔的格式存储值，可以尝试这样的操作：

```
List<string> values = new List<string>();
if (cbComma.Checked) {
   values.Add("','");
}
...
string result = values.ToArray().Join(","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T01:22:45.420

如果您可以使用枚举将值保存到数据库中，我会同意[David Thomas Garcia 的](https://stackoverflow.com/questions/426599/saving-checkbox-control-values#426621)建议（作为 int 或适合您将拥有的选项数量的任何内容）。

如果这不是一个选项，并且您必须将它们作为字符串存储在数据库中，我会执行以下操作：

```
 private void LoadData()
{
   string dbVal = DataAccess.GetDbVal(); //Get your value from the database.
   chkComma.Checked = dbVal.Contains(",");
   chkDash.Checked = dbVal.Contains("-");
}

private void SaveData()
{
   string dbVal = "";
   if(chkComma.Checked)
      dbVal += ",";
   if(chkDash.Checked)
      dbVal += "-";
   DataAccess.SaveDbVal(dbVal); //Send the value of dbVal to your data layer to be saved.
} 

```

请注意，这不包括要保存在数据库中存储的值中的值的任何分离，但如果您需要，您可以使用 List 并执行[David Thomas Garcia](https://stackoverflow.com/questions/426599/saving-checkbox-control-values#426621)提到的 .ToArray().Join(", "); 在 SaveData() 和 LoadData() 中，只需将 dbVal 设置为 List 并且不需要更改语法。

# python - PyObjc vs RubyCocoa for Mac 开发：哪个更成熟？

> ID：426607
> 
> 赞同：8
> 
> 时间：2009-01-09T00:16:24.150
> 
> 标签：python, ruby, cocoa, pyobjc, ruby-cocoa

我一直想玩 Ruby 或 Python，同时我一直想做一些 Cocoa 编程。

所以我认为实现这两个目标的最佳方式是使用 Ruby 或 Python 到 Objective-C 的桥（PyObjc 或 RubyCocoa）开发一些东西。

我知道理想情况下，为了获得最好的学习体验，我会独立学习每种技术，但我没有时间。:)

所以我的问题是哪个是更成熟的平台，PyObc 或 RubyCocoa，我正在寻找的主要内容：

1.  API 文档
2.  教程
3.  工具
4.  支持社区
5.  Cocoa API 的完整性可通过桥接器获得

关于第 5 点，我不希望整个 Cocoa API 都可以通过任何一个桥接器使用，但我需要有足够的 Cocoa API 可用于开发功能正常的应用程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T01:08:54.463

虽然你说你“没有时间”独立学习技术，但学习 Cocoa 的最快途径仍然是用它的母语学习它：Objective-C。一旦您了解了 Objective-C 并克服了 Cocoa 框架的初始学习曲线，您将更容易学习 PyObjC 或 RubyCocoa。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T21:02:42.940

我会回应 Chris 的评估，并会详细说明为什么你应该学习 Objective-C 来学习 Cocoa。正如 Chris 所说，Objective-C 是 Cocoa 的基础和原生语言，它的许多范例都与该血统密不可分。特别是，选择器和动态消息解析以及在运行时修改类的能力是实现 Cocoa 技术（如分布式对象和绑定）所必需的。尽管这些功能在其他动态语言（如 Ruby 和 Python）中也可用，但语言模型中存在足够多的不匹配，您至少必须了解 Objective-C 才能了解 Cocoa。我建议您看一下之前的问题以进行进一步讨论：[我是否必须学习 Objective-C 才能进行专业的 Mac 开发？](https://stackoverflow.com/questions/272660/do-i-have-to-learn-objective-c-for-professional-mac-development)

幸运的是，Objective-C 非常容易学习。我经常告诉人们，从 C/C++/Java 或 LISP、Scheme 或任何“较新”的动态语言（如 Ruby 和 Python）学习 Objective-C 需要一天的时间。除了扩展您的思维之外，您还将学会至少阅读几乎所有 Cocoa 文档和示例中使用的代码。

至于 Ruby 与 Python，桥接功能非常相似。事实上，它们都使用 Apple 的[BridgeSupport](http://bridgesupport.macosforge.org/trac/)（Leopard 附带）来提供桥接描述。两者都受 Apple 支持并随 Leopard 一起提供。您喜欢哪种语言取决于个人喜好。如果你选择Ruby，我建议你给[MacRuby](http://www.macruby.org/trac/wiki/MacRuby)看看。这绝对是 Ruby on OS X 的未来，因为它在 Objective-C 运行时之上重新实现了 Ruby 运行时。这提供了一些不错的性能和概念优势（包括与 Objective-C 垃圾收集系统的集成，这是使用本机 python gc 的 PyObjC 目前缺乏的功能）。MacRuby 还包括一个自定义解析器，它使桥接的 Objective-c 方法的语法更好一些。MacRuby 的缺点是在撰写本文时（2009 年 6 月）它还没有完全准备好用于生产级使用。因为听起来这对你来说是一个学习项目，所以这可能不是问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T01:25:52.667

两者大致相等，我会说。在某些地方更好，在其他地方更糟。但我不建议用任何一种方法来学习 Cocoa。正如 Chris 所说，Cocoa 需要对 Objective-C 有所了解。比起 Objective-C，我更喜欢 Ruby，但我仍然不推荐用它来学习 Cocoa。一旦你在 Cocoa/Objective-C 中有一个坚实的基础（不是双关语），那么这些桥梁对你很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T02:41:13.967

Apple 似乎在为 Cocoa 编写 Ruby 脚本而不是 RubyCocoa。他们正在托管，我相信支持[MacRuby](http://www.macruby.org/trac/wiki/MacRuby)。我经常想知道 MacRuby 是否是 Apple 对用于 OSX 原型设计和完整应用程序开发的高级语言的回答。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-10-14T06:19:39.593

ObjectiveC 远没有 Python 或 Ruby 那样有趣或高效。这就是为什么人们想要选择具有良好 Objective C 访问权限的 python 或 ruby​​。建议他们首先学习 Objective C 没有抓住重点。关于 pyobjc，我有很多好话要说。它与 Objective C 框架轻松互操作的能力非常出色。我对 Ruby Cocoa 的经验较少，部分原因是当我上次查看时，它似乎没有那么干净和相对轻松的互操作性。我对 MacRuby 犹豫不决，因为它似乎走得太远了。在 pyobjc 中，您可以编写普通的 python，并且仅在您真正想要/有意时才子类化/使用 Foundation 和 Cocoa 对象。根据我对 MacRuby 的了解，它是 Cocoa 之上的 Ruby。所以一个字符串总是一个 NSString。我对此不太满意。YMMV。

# asp.net - 如何分配配置文件值？

> ID：426609
> 
> 赞同：110
> 
> 时间：2009-01-09T00:16:58.267
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, profile

我不知道我缺少什么，但我在 Web.config 文件中添加了配置文件属性但无法访问配置文件。*代码中的项目*或创建新的配置文件。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2009-07-10T20:10:29.357

我今天也遇到了同样的问题，学到了很多东西。

Visual Studio 中有两种项目——“网站项目”和“Web 应用程序项目”。由于对我来说完全神秘的原因，Web 应用程序项目不能使用**Profile。**直接...强类型类不是从 Web.config 文件为您神奇地生成的，因此您必须自己动手。

MSDN 中的示例代码假定您正在使用一个网站项目，并且他们告诉您只需将一个`<profile>`部分添加到您的`Web.config`和聚会上 with `Profile.`*property*，但这在 Web 应用程序项目中不起作用。

您有两种选择自己滚动：

(1) 使用[Web 配置文件生成器](http://code.msdn.microsoft.com/WebProfileBuilder)。这是您添加到 Visual Studio 的自定义工具，它会根据您在 Web.config 中的定义自动生成您需要的 Profile 对象。

我选择不这样做，因为我不希望我的代码依赖于这个额外的工具来编译，这可能会给其他人在他们试图构建我的代码而没有意识到他们需要这个工具的情况下造成问题。

(2) 创建您自己的派生类`ProfileBase`来表示您的自定义配置文件。这比看起来容易。这是一个非常简单的示例，它添加了“FullName”字符串配置文件字段：

*在您的 web.config 中：*

```
<profile defaultProvider="SqlProvider" inherits="YourNamespace.AccountProfile">

<providers>
     <clear />
     <add name="SqlProvider"
          type="System.Web.Profile.SqlProfileProvider"
          connectionStringName="sqlServerMembership" />
</providers>

</profile> 
```

*在名为 AccountProfile.cs 的文件中：*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Profile;
using System.Web.Security;

namespace YourNamespace
{
    public class AccountProfile : ProfileBase
    {
        static public AccountProfile CurrentUser
        {
            get { return (AccountProfile)
                         (ProfileBase.Create(Membership.GetUser().UserName)); }
        }

        public string FullName
        {
            get { return ((string)(base["FullName"])); }
            set { base["FullName"] = value; Save(); }
        }

        // add additional properties here
    }
} 
```

*要设置配置文件值：*

```
AccountProfile.CurrentUser.FullName = "Snoopy"; 
```

*获取配置文件值*

```
string x = AccountProfile.CurrentUser.FullName; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-06-04T13:34:09.587

Web 应用程序项目仍然可以使用 ProfileCommon 对象，但只能在运行时使用。它的代码不是在项目本身中生成的，而是由 ASP.Net 生成的并且在运行时存在。

获取对象的最简单方法是使用如下所示的动态类型。

在 Web.config 文件中声明配置文件属性：

```
<profile ...
 <properties>
   <add name="GivenName"/>
   <add name="Surname"/>
 </properties> 
```

然后访问属性：

```
dynamic profile = ProfileBase.Create(Membership.GetUser().UserName);
string s = profile.GivenName;
profile.Surname = "Smith"; 
```

要保存对配置文件属性的更改：

```
profile.Save(); 
```

如果您习惯使用动态类型并且不介意缺少编译时检查和智能感知，则上述方法可以正常工作。

如果将它与 ASP.Net MVC 一起使用，如果将动态配置文件对象传递给视图，则必须做一些额外的工作，因为 HTML 辅助方法不能很好地处理动态的“模型”对象。您必须先将配置文件属性分配给静态类型变量，然后再将它们传递给 HTML 辅助方法。

```
// model is of type dynamic and was passed in from the controller
@Html.TextBox("Surname", model.Surname) <-- this breaks

@{ string sn = model.Surname; }
@Html.TextBox("Surname", sn); <-- will work 
```

如果您创建自定义配置文件类，如上所述 Joel，ASP.Net 仍将生成 ProfileCommon 类，但它会从您的自定义配置文件类继承。如果您不指定自定义配置文件类，ProfileCommon 将从 System.Web.Profile.ProfileBase 继承。

如果您创建自己的配置文件类，请确保您没有在您已在自定义配置文件类中声明的 Web.config 文件中指定配置文件属性。如果你这样做，ASP.Net 在尝试生成 ProfileCommon 类时会给出编译器错误。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-29T11:28:32.177

Profile 也可以在 Web 应用程序项目中使用。可以在设计时或以编程方式在 Web.config 中定义属性。在 Web.config 中：

```
<profile enabled="true" automaticSaveEnabled="true" defaultProvider="AspNetSqlProfileProvider">
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="TestRolesNProfiles"/>
      </providers>
      <properties>
        <add name="FirstName"/>
        <add name="LastName"/>
        <add name ="Street"/>
        <add name="Address2"/>
        <add name="City"/>
        <add name="ZIP"/>
        <add name="HomePhone"/>
        <add name="MobilePhone"/>
        <add name="DOB"/>

      </properties>
    </profile> 
```

或以编程方式，通过实例化**ProfileSection并使用****ProfilePropertySettings**和**ProfilePropertySettingsColletion**创建单个属性来创建配置文件部分，所有这些都在 System.Web.Configuration 命名空间中。要使用配置文件的这些属性，请使用 System.Web.Profile.ProfileBase 对象。无法使用配置文件访问**配置文件属性。**语法如上所述，但可以通过实例化 ProfileBase 并使用**SetPropertyValue** (" *PropertyName* ") 和**GetPropertyValue** {" *PropertyName* ") 轻松完成，如下所示：

```
ProfileBase curProfile = ProfileBase.Create("MyName"); 
```

或访问当前用户的个人资料：

```
ProfileBase curProfile = ProfileBase.Create(System.Web.Security.Membership.GetUser().UserName);

        curProfile.SetPropertyValue("FirstName", this.txtName.Text);
        curProfile.SetPropertyValue("LastName", this.txtLname.Text);
        curProfile.SetPropertyValue("Street", this.txtStreet.Text);
        curProfile.SetPropertyValue("Address2", this.txtAdd2.Text);
        curProfile.SetPropertyValue("ZIP", this.txtZip.Text);
        curProfile.SetPropertyValue("MobilePhone", txtMphone.Text);
        curProfile.SetPropertyValue("HomePhone", txtHphone.Text);
        curProfile.SetPropertyValue("DOB", txtDob.Text);
        curProfile.Save(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-21T13:56:11.553

当您在 Visual Studio 中创建新的网站项目时，将从 Profile 返回的对象将（自动）为您生成。当您创建 Web 应用程序项目或 MVC 项目时，您将不得不自己动手。

这听起来可能比实际更困难。您需要执行以下操作：

*   **使用aspnet_regsql.exe**创建数据库此工具与 .NET 框架一起安装。
*   编写一个派生自 ProfileGroupBase 的类或安装 Web Profile Builder (WPB)，它可以根据 Web.Config 中的定义为您生成类。我已经使用 WPB 一段时间了，直到现在它已经完成了预期的工作。如果你有很多属性，使用 WPB 可以节省不少时间。
*   确保在 Web.Config 中正确配置了与数据库的连接。
*   现在您已设置为创建配置文件类的实例（在控制器中）
*   您可能需要视图中的配置文件属性值。我喜欢将配置文件对象本身传递给视图（而不是单个属性）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T04:23:17.800

如果您使用的是 Web 应用程序项目，则无法在设计时开箱即用地访问 Profile 对象。这是一个据称可以为您完成的实用程序：[http](http://weblogs.asp.net/joewrobel/archive/2008/02/03/web-profile-builder-for-web-application-projects.aspx) ://weblogs.asp.net/joewrobel/archive/2008/02/03/web-profile-builder-for-web-application-projects.aspx 。就个人而言，该实用程序在我的项目中导致了错误，因此我最终滚动了自己的配置文件类以从 ProfileBase 继承。这一点也不难。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-12-14T21:56:14.893

创建自定义类（又名 Joel 的方法）的 MSDN 演练：http:
[//msdn.microsoft.com/en-us/magazine/cc163624.aspx](http://msdn.microsoft.com/en-us/magazine/cc163624.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-08T08:50:26.583

我也遇到了同样的问题。但是我没有创建一个继承自 ProfileBase 的类，而是使用了 HttpContext。

在 web.config 文件中指定属性，如下所示：- ![ProfilePropertyWeb.config](https://i.stack.imgur.com/eDHti.png)

现在，编写以下代码：-

![配置文件属性背后的代码](https://i.stack.imgur.com/iyYWO.png)

编译并运行代码。您将获得以下输出：-

![输出](https://i.stack.imgur.com/d1ENe.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-24T22:41:12.497

[Web Profile Builder](http://code.msdn.microsoft.com/WebProfileBuilder)非常适合我。它生成的类比 Joel 的帖子中描述的要多得多。我不知道它是否真的需要或有用。

无论如何，对于那些寻找一种简单的方法来生成类，但又不想拥有外部构建工具依赖项的人，你总是可以

*   使用网络配置文件生成器
*   删除它的所有痕迹！
*   继续使用生成的 Profile 类

或（未经测试，但可能只是工作）

*   创建一个**网站**项目
*   创建你的元素
*   捕捉生成的类并将其复制到您的 Web**项目**项目中

如果第二种方法确实有效，有人可以让我知道以供将来参考

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-27T16:56:58.293

只想添加到 Joel Spolsky 的答案中

我实施了他的解决方案，顺便说一句，工作出色 - Cudos！

对于任何想要获得不是我使用的登录用户的用户配置文件的人：

网络配置：

```
 <connectionStrings>
    <clear />
    <add name="LocalSqlConnection" connectionString="Data Source=***;Database=***;User Id=***;Password=***;Initial Catalog=***;Integrated Security=false" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

和

```
<profile defaultProvider="SqlProvider" inherits="NameSpace.AccountProfile" enabled="true">
  <providers>
    <clear/>
    <add name="SqlProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="LocalSqlConnection"/>
  </providers> 
```

然后是我的自定义类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Profile;
using System.Web.Security;

namespace NameSpace
{
    public class AccountProfile : ProfileBase
    {
        static public AccountProfile CurrentUser
        {
            get
            {
                return (AccountProfile)
                 (ProfileBase.Create(Membership.GetUser().UserName));
            }
        }

        static public AccountProfile GetUser(MembershipUser User)
        {
            return (AccountProfile)
                (ProfileBase.Create(User.UserName));
        }

        /// <summary>
        /// Find user with matching barcode, if no user is found function throws exception
        /// </summary>
        /// <param name="Barcode">The barcode to compare against the user barcode</param>
        /// <returns>The AccountProfile class with matching barcode or null if the user is not found</returns>
        static public AccountProfile GetUser(string Barcode)
        {
            MembershipUserCollection muc = Membership.GetAllUsers();

            foreach (MembershipUser user in muc)
            {
                if (AccountProfile.GetUser(user).Barcode == Barcode)
                {
                    return (AccountProfile)
                        (ProfileBase.Create(user.UserName));
                }
            }
            throw new Exception("User does not exist");
        }

        public bool isOnJob
        {
            get { return (bool)(base["isOnJob"]); }
            set { base["isOnJob"] = value; Save(); }
        }

        public string Barcode
        {
            get { return (string)(base["Barcode"]); }
            set { base["Barcode"] = value; Save(); }
        }
    }
} 
```

奇迹般有效...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-02-15T01:31:57.813

伟大的职位，

如果您未在配置文件元素中指定继承属性，只需在 web.config 上进行注释，您将需要在 web.config 的配置文件元素中指定每个个人配置文件属性，如下所示

```
 <properties>
    <clear/>
    <add name="property-name-1" />
    <add name="property-name-2" />
    ..........

 </properties> 
```

# image - 如何在 Java ME 中减少图像颜色深度/压缩图像大小？

> ID：426616
> 
> 赞同：1
> 
> 时间：2009-01-09T00:22:12.810
> 
> 标签：image, java-me, compression, scale, color-depth

我需要将图像从手机传输到服务器。我能够减小图像屏幕大小，但不能减小内存大小。我知道我必须处理颜色深度。J2ME 似乎没有提供 J2SE 中可用的任何缩放方法：

```
image rescaled = image.getScaledInstance(thumbWidth, thumbHeight,  Image.SCALE_AREA_AVERAGING);
BufferedImage biRescaled = toBufferedImage(rescaled, thumbWidth, thumbHeight, BufferedImage.TYPE_INT_RGB); 
```

我将如何解决这个问题？我想在传输到服务器之前减少图像内存大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:53:52.287

看看这个（[GEAR Java Mobile Framework](http://sourceforge.net/projects/gearjmf/)）。有一个实用程序包，其中包含一个名为 ImageHelper 的类。它包含一些缩放图像的方法，从而减小它的大小。它在移动设备上运行良好，并且执行速度相当快。如果您的图像仍然很大，或者您不想丢失太多数据，请考虑使用压缩算法。[zlib](http://www.zlib.net/)提供了一个非常好的解决方案，并且有一个可供使用的 J2ME 实现。

# php - 治愈“后退按钮蓝调”

> ID：426620
> 
> 赞同：2
> 
> 时间：2009-01-09T00:22:52.780
> 
> 标签：php, forms, button, back

有没有偶然发现一个你觉得很有价值但解释不正确的教程？这就是我的困境。我知道[本教程](http://www.tonymarston.net/php-mysql/backbuttonblues.html)有一些价值，但我就是无法理解。

1.  你在哪里调用每个函数？
2.  应该首先调用哪个函数，然后调用哪个函数，然后调用哪个函数？
3.  是否会在应用程序的所有文件中调用所有函数？
4.  有谁知道治疗“后退按钮忧郁症”的更好方法？

我想知道这是否会引发一些包括文章作者在内的良好对话。我特别感兴趣的部分是控制后退按钮，以防止在按下后退按钮时将重复条目输入数据库。基本上，您希望通过在应用程序中执行脚本期间调用以下三个函数来控制后退按钮。教程中并不清楚调用函数的确切顺序（参见上面的问题）。

> 所有向前移动都是使用我的 scriptNext 函数执行的。这在当前脚本中被调用以激活新脚本。
> 
> ```
> function scriptNext($script_id)
> // proceed forwards to a new script
> {
>    if (empty($script_id)) {
>       trigger_error("script id is not defined", E_USER_ERROR);
>    } // if
> 
>    // get list of screens used in this session
>    $page_stack = $_SESSION['page_stack'];
>    if (in_array($script_id, $page_stack)) {
>       // remove this item and any following items from the stack array
>       do {
>          $last = array_pop($page_stack);
>       } while ($last != $script_id);
>    } // if
> 
>    // add next script to end of array and update session data
>    $page_stack[] = $script_id;
>    $_SESSION['page_stack'] = $page_stack;
> 
>    // now pass control to the designated script
>    $location = 'http://' .$_SERVER['HTTP_HOST'] .$script_id;
>    header('Location: ' .$location); 
>    exit;
> 
> } // scriptNext 
> ```
> 
> 当任何脚本完成其处理时，它通过调用我的 scriptPrevious 函数终止。这将从堆栈数组的末尾删除当前脚本并重新激活数组中的前一个脚本。
> 
> ```
> function scriptPrevious()
> // go back to the previous script (as defined in PAGE_STACK)
> {
>    // get id of current script
>    $script_id = $_SERVER['PHP_SELF'];
> 
>    // get list of screens used in this session
>    $page_stack = $_SESSION['page_stack'];
>    if (in_array($script_id, $page_stack)) {
>       // remove this item and any following items from the stack array
>       do {
>          $last = array_pop($page_stack);
>       } while ($last != $script_id);
>       // update session data
>       $_SESSION['page_stack'] = $page_stack;
>    } // if
> 
>    if (count($page_stack) > 0) {
>       $previous = array_pop($page_stack);
>       // reactivate previous script
>       $location = 'http://' .$_SERVER['HTTP_HOST'] .$previous;
>    } else {
>       // no previous scripts, so terminate session
>       session_unset();
>       session_destroy();
>       // revert to default start page
>       $location = 'http://' .$_SERVER['HTTP_HOST'] .'/index.php';
>    } // if
> 
>    header('Location: ' .$location); 
>    exit;
> 
> } // scriptPrevious 
> ```
> 
> 每当一个脚本被激活，可以是通过scriptNext或者scriptPrevious函数，也可以是因为浏览器中的BACK按钮，它会调用下面的函数根据程序栈的内容来验证它是当前脚本，并如果不是，请采取适当的措施。
> 
> ```
> function initSession()
> // initialise session data
> {
>    // get program stack
>    if (isset($_SESSION['page_stack'])) {
>       // use existing stack
>       $page_stack = $_SESSION['page_stack'];
>    } else {
>       // create new stack which starts with current script
>       $page_stack[] = $_SERVER['PHP_SELF'];
>       $_SESSION['page_stack'] = $page_stack;
>    } // if
> 
>    // check that this script is at the end of the current stack
>    $actual = $_SERVER['PHP_SELF'];
>    $expected = $page_stack[count($page_stack)-1];
>    if ($expected != $actual) {
>       if (in_array($actual, $page_stack)) {// script is within current stack, so remove anything which follows
>       while ($page_stack[count($page_stack)-1] != $actual ) {
>             $null = array_pop($page_stack);
>          } // while
>          $_SESSION['page_stack'] = $page_stack;
>       } // if
>       // set script id to last entry in program stack
>       $actual = $page_stack[count($page_stack)-1];
>       $location = 'http://' .$_SERVER['HTTP_HOST'] .$actual;
>       header('Location: ' .$location);
>       exit;
>    } // if
> 
>    ... // continue processing
> 
> } // initSession 
> ```
> 
> 采取的行动取决于当前脚本是否存在于程序堆栈中。有三种可能：
> 
> *   当前脚本不在 $page_stack 数组中，在这种情况下不允许继续。相反，它被数组末尾的脚本替换。
> *   当前脚本在 $page_stack 数组中，但它不是最后一个条目。在这种情况下，数组中的所有后续条目都将被删除。
> *   当前脚本是 $page_stack 数组中的最后一个条目。这是预期的情况。全场畅饮！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T00:41:08.903

这是一个很好的讨论，但更重要的是，您应该研究 Post Redirect Get (PRG)，也称为“Get after Post”。

[http://www.theserverside.com/patterns/thread.tss?thread_id=20936](http://www.theserverside.com/patterns/thread.tss?thread_id=20936)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-10T09:02:00.133

如果您不理解我的文章，那么您应该仔细查看[图 1](http://www.tonymarston.net/php-mysql/backbuttonblues.html#figure1)，该图描述了用户通过一系列屏幕的典型场景——登录、菜单、列表、搜索、添加和更新。当我描述 FORWARDS 的移动时，我的意思是当前屏幕被暂停，而新屏幕被激活。当用户按下当前屏幕中的链接时，就会发生这种情况。当我将移动描述为 BACKWARDS 时，我的意思是用户终止当前屏幕（通过按下 QUIT 或 SUBMIT 按钮）并返回到前一个屏幕，从中断处继续处理。这可能包括合并在刚刚终止的屏幕中所做的任何更改。

这是维护独立于浏览器历史的页面堆栈至关重要的地方 - 页面堆栈由应用程序维护并用于验证所有请求。就浏览器而言，这些可能是有效的，但可能会被应用程序识别为无效并进行相应处理。

页栈由两个函数维护：

*   scriptNext() 用于处理 FORWARDS 移动，它在堆栈末尾添加一个新条目并激活新条目。
*   scriptPrevious() 用于处理 BACKWARDS 移动，它从堆栈中删除最后一个条目并重新激活前一个条目。

现在以示例中的情况为例，用户导航到 LIST 屏幕的第 4 页，进入 ADD 屏幕，然后返回到 LIST 屏幕的第 5 页。ADD 屏幕中的最后一个操作是按下 SUBMIT 按钮，该按钮使用 POST 方法将详细信息发送到服务器，这些信息已添加到数据库中，之后它自动终止并返回到 LIST 屏幕。

因此，如果您在 LIST 屏幕的第 5 页中按下 BACK 按钮，浏览器历史记录将生成对 ADD 屏幕上最后一个操作的请求，即 POST。就浏览器而言，这是一个有效的请求，但就应用程序而言不是。应用程序如何确定请求无效？通过检查其页面堆栈。当 ADD 屏幕被终止时，它的条目从页面堆栈中删除，因此任何对不在页面堆栈中的屏幕的请求总是被视为无效。在这种情况下，可以将无效请求重定向到堆栈中的最后一个条目。

因此，您的问题的答案应该是显而易见的：

*   问：你在哪里调用每个函数？
*   答：当用户选择向前导航到新屏幕时调用 scriptNext() 函数，当用户终止当前屏幕时调用 scriptPrevious() 函数。
*   问：应该首先调用哪个函数，然后调用哪个函数，然后调用哪个函数？
*   答：每个函数都是根据用户选择的操作调用的，因此一次只使用一个函数。
*   问：是否会在应用程序的所有文件中调用所有函数？
*   答：所有函数都应该在应用程序的所有文件中都可用，但只有在用户选择时才调用。

如果您希望看到这些想法付诸实施，那么您可以下载我的[示例应用程序](http://www.tonymarston.net/php-mysql/sample-application.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T21:34:18.477

> 我特别感兴趣的部分是控制后退按钮，以防止在按下后退按钮时将重复条目输入数据库。

你的前提是错误的。如果您将应用程序设计为 Web 应用程序，则没有“Back Button Blues”之类的东西。如果您在没有任何服务器端状态的情况下设计应用程序，那么您将永远不会在第一种情况下遇到此问题。这种 Web 应用程序的简约方法非常有效，通常称为 REST。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T07:47:55.883

@特罗尔斯克

> 如果您设计的应用程序没有任何服务器端状态......

设计一个没有状态的有效应用程序是不可能的，否则你所拥有的只是一个不相互通信的单个页面的集合。由于在客户端上维护状态充满了问题，因此除了维护服务器上的状态外，没有其他有效的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T08:06:56.750

@马斯顿。

我用 post/redirect/get 解决了这个问题，但我相信本教程有一些优点，也许 Tony Marston 可以详细说明。以及如何使用它来解决不一定是我的特定问题，但也许是类似的问题。或者如果这些功能实际上可以用于解决我的特定问题，它比发布/重定向/获取更好。我认为这将是对这里社区的一个很好的补充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T09:04:59.877

```
if ($_POST) {
    process_input($_POST);
    header("Location: $_SERVER[HTTP_REFERER]");
    exit;
} 
```

# c# - 您如何解决“StyleCop C# 风格”和“框架设计指南 C# 风格”之间的差异？

> ID：426622
> 
> 赞同：14
> 
> 时间：2009-01-09T00:23:18.520
> 
> 标签：c#, coding-style, conventions, stylecop

在浏览了伟大的书“框架设计指南”（2008 年 11 月第 2 版）的附录 A“C# 编码风格约定”之后，我对微软内部使用/推荐的编码风格感到很困惑。

博客文章[A Brief History Of C# Style](http://blogs.msdn.com/sourceanalysis/archive/2008/05/25/a-difference-of-style.aspx)声称：

> 事实上，“StyleCop 风格”和“Framework Design Guidelines 风格”的区别相对较小

在我看来，差异非常明显。StyleCop 说开口大括号应该在单独的一行，框架设计指南说它应该在开始语句之后。StyleCop 说所有关键字后面都要跟一个空格，框架设计指南说“摆脱所有空格”（甚至围绕二元运算符）。

我发现框架设计指南书中的这条规则特别具有讽刺意味（第 366 页，从顶部开始的第 6 条规则）：

> **不要**在流控制语句前使用空格
> 
> ```
> Right: while(x==y)
> Wrong: while (x == y) 
> ```

这明确说明 StyleCop 样式是**错误**的（while 关键字后有空格，等式二元运算符前后有空格）。

最后，使用 StyleCop 样式格式化的代码与使用 Framework Design Guidelines 样式格式化的代码有完全不同的“感觉”。通过遵循框架设计指南样式，您将不得不禁用一堆规则（并且没有检查是否遵守框架设计指南样式的规则......）。

有人（或许是 MSFT 内部人士？）能否阐明这种分歧？

你的团队是如何处理这个问题的？关注 StyleCop？框架设计指南？完全忽略风格？烘焙自己的风格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T18:49:25.757

stylecop 团队的这篇文章准确地解释了我的想法。 [http://blogs.msdn.com/sourceanalysis/archive/2008/05/25/a-difference-of-style.aspx](http://blogs.msdn.com/sourceanalysis/archive/2008/05/25/a-difference-of-style.aspx)

为了回答您问题的第二部分，我们的团队刚刚开始使用 StyleCop，使用所有规则（有些人选择使用哪些规则）。我唯一不喜欢的是它需要额外的时间，但是使用像 StyleCopForResharper 这样的工具可以让它更快。当人们编写的代码看起来与我编写的代码不同时，我曾经非常生气，但现在我们使用 StyleCop，每个人的代码看起来都一样。不再对人们做的烦人的事情耿耿于怀

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T01:00:35.153

在我读到的一篇博客上（我似乎找不到网址），它说：框架指南是基于 C++ 指南并从 C++ 指南演变而来的（他们都是经验丰富的 C++ 开发人员），而 stylecop 提供的指南是更现代的新 C#只有指导方针......两者都很好，自己做决定......我个人使用StyleCop的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T00:59:00.710

我们对所有代码都使用 StyleCop，除了一些小问题，我认为它的大多数标准都导致了最易读的代码。它的许多标准已经在 Microsoft 内部进行了深入讨论，并得到了社区的反馈，虽然并不期望每个人都同意所有的事情，但它可能是最好的“标准”（特别是因为它允许自动使用 StyleCop for ReSharper 插件进行验证和自动更正）。

如果有任何你强烈不同意的事情，维护该工具的 Jason Allor 非常愿意就某些事情提出建议，例如 StyleCop 最初坚持的自动属性......

```
public int Prop
{
    get;
    set;
} 
```

...但是我们提出了一个更改请求以允许单行属性（即所有内容都在一行上），因为它的可读性不低并且占用的空间更少。他在几天内做出了这个改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T00:52:38.350

你做出决定。如果您喜欢其中的某些部分，而喜欢另一部分的某些部分，请编写自己的样式指南。如果你喜欢一个比另一个更好，那就选择它。

最重要的是选择一种风格；没有办法以任何严格的定量方式来评估彼此。

# delphi - 在 Delphi 中为不可见的 ActiveX 对象事件处理程序生成代码

> ID：426623
> 
> 赞同：3
> 
> 时间：2009-01-09T00:23:41.250
> 
> 标签：delphi, activex, delphi-2007

您知道在 Visual Studio 中您可以使用“+=”语法和几个选项卡让它自动生成事件处理程序的代码吗？

我如何在 Delphi 中完成同样的事情？我正在尝试为使用 Import Component 函数导入的不可见 activex 库中的事件创建事件处理程序。

我意识到，使用导入的 activex 控件，您只需单击对象，浏览事件选项卡以了解组件提供的内容，然后双击事件以使其为您生成一个。

这些特定的 activex 组件是不可见的，因此您可以在表单上选择它们。Delphi 可以自动生成代码吗？如果没有，有人可以指点我一些示例代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T02:13:12.010

在 Delphi 中，即使是非可视组件在表单上也表示为带有图标的小框。只需选择该组件，您就可以从对象检查器中获取事件。

如果您没有将它安装在组件托盘上，则不会自动生成事件处理程序的代码。最简单的方法是进入生成的*tlb.pas*文件并找到您想要的事件的签名，复制它并为其创建兼容的方法。然后只需将事件属性指向该新方法。

# mysql - 如何将事务性 MySQL 数据导入 SQL Server 数据库

> ID：426644
> 
> 赞同：0
> 
> 时间：2009-01-09T00:37:40.330
> 
> 标签：mysql, sql-server, replication

我正在开发一个项目，该项目有一个备份 Web 应用程序的 MySQL 事务数据库。该公司将 SQL Server 用于后台和报告应用程序。使用 MySQL 中的数据更新 SQL Server 的最佳方法是什么？现在，我们正在执行 MySQL 数据的转储并进行完全恢复。由于数据库的大小不断增加，这可能不再可行。

我更喜欢只复制新插入和更新的行的解决方案。在应用更新后，我还需要 SQL Server 数据库是静态的。基本上，它应该每天更换一次。我可以从 MySQL 的本地副本（即不是生产）更新 SQL Server 有没有办法以指定的时间间隔将 MySQL 复制应用到从服务器？一个完美的解决方案是在 MySQL 上运行一次每日更新，以在某个时间点同步数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:59:32.713

你能找到一种方法来对 mySQL DB 进行快照然后进行复制吗？它将制作数据库的即时逻辑副本，该副本将及时冻结。

[http://aspiringsysadmin.com/blog/2007/08/13/consistent-mysql-backups-using-zfs-snapshots/](http://aspiringsysadmin.com/blog/2007/08/13/consistent-mysql-backups-using-zfs-snapshots/)

ZFS 文件系统可以做到这一点 - 但你没有提到你的硬件/操作系统。

此外，也许您可​​以限制您正在提取的数据 - 无论是时间敏感的，因此如果您的拉取需要 45 分钟，您的拉取只会获得超过 1 小时的数据。或者让事情更安全一点——前一天拉一下怎么样？

我相信 SSIS 2008 有一个名为“维护”表的新模块，它执行获取更新/插入记录和可选删除的常见任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T00:52:19.227

查看 Microsoft 的 ETL 工具 DTS。它相当不错。进行映射，将其安排为 cron 作业，而 Bob 是你的叔叔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T01:11:00.653

无论您如何从 MySQL 克隆导入 SqlServer，我认为您无需担心将 MySQL 复制限制在特定时间。

MySQL 复制只需要主服务器中的一个线程，基本上只是将事务日志传输到从服务器。如果可以，请将主 MySQL 服务器和从 MySQL 服务器放在专用 LAN 段上，以便复制流量不会影响 Web 流量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T01:56:32.620

如果您拥有 SQL Server Standard 或更高版本，SQL Server 将满足您的所有需求。

*   使用 ssis 抓取数据
*   使用代理来安排您的定时任务

顺便说一句-我正在做与您正在做的完全相同的事情。SQL Server 很棒——它很容易设置（我是 SSIS 的菜鸟），而且它在第一次拍摄时就工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-16T15:08:19.890

听起来您需要做的是设置一个脚本来启动和停止从数据库上的复制。如果您可以通过脚本做到这一点，那么您可以在 SSIS 中建立一个工作流，如下所示：

1.  停止复制到从 MySQL 数据库
2.  如果复制已停止，则拍摄从 MySQL 数据库的快照
3.  如果已拍摄快照，则 a= 开始复制到从属 MySQL 数据库 b= 将从属 MySQL 数据库副本导入 SQL Server

注意：3a 和 3b 可以并行运行。

我认为在这种情况下你最好的选择是使用 SSIS 来启用和禁用 MySQL 数据库到从属数据库的复制以及拍摄从属数据库的快照。然后，您可以从 SQL Server 代理机制驱动整个事情。

希望这可以帮助

# wpf - 如何在后台 WPF 进程中呈现？

> ID：426645
> 
> 赞同：3
> 
> 时间：2009-01-09T00:37:50.503
> 
> 标签：wpf, silverlight, xaml

我正在使用 Silverlight XAML 并将其发送到 Web 服务，该服务在 STA 线程中呈现 XAML 并生成 PNG 图像。所有 XAML 都正确呈现，除了在 WPF 中设置`<image>`其属性但 PNG 不显示引用图像时“似乎”正确加载的条目`Source`- 我做错了什么？

我正在使用的代码的核心如下。该`value`对象是来自 Silverlight 的 DTO，其中包含最终作为`sXAML`本地属性的字符串中的 XAML，并且图像 URI 位于该`value.ImageURL`属性中。

```
 var canvas = (FrameworkElement)XamlReader.Load(new XmlTextReader(new StringReader(sXAML)));

  var obj = canvas.FindName("BGImage");
  Image img = null;
  if (obj != null)
  {
    img = obj as Image;
    img.ImageFailed += img_ImageFailed;
    img.Source = new BitmapImage(new Uri(value.ImageURL, UriKind.Absolute));
  }

  canvas.Arrange(new Rect(new Size(463d, 381d)));
  canvas.UpdateLayout();

  var mem = new MemoryStream();
  var bmp = new RenderTargetBitmap(463, 381, 96d, 96d, PixelFormats.Pbgra32);
  bmp.Render(canvas);

  var encoder = new PngBitmapEncoder();
  encoder.Frames.Add(BitmapFrame.Create(bmp));
  encoder.Save(mem);

  FileStream fs = new FileStream("D:\\out.png", FileMode.Create);
  mem.WriteTo(fs);
  fs.Close(); 
```

注意：`img_ImageFailed`永远不会调用事件处理程序，表明`img`Source 分配以某种方式成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-26T03:59:54.443

我会尝试的事情：

1）在您的 WPF 应用程序中，如果您“渲染”您的动态加载`Canvas`以显示在窗口中，是否一切正常（包括图像）？

2）您是否尝试将`Loaded`处理程序附加到`img`对象以查看实际加载图像的时间*？*

3) 假设 #1 有效 - 图像位于何处（它们在 Internet/本地 Web 服务器上）？如果你在代码中设置断点

```
bmp.Render(canvas); 
```

稍等片刻，然后再踩 - 图像*会*出现在渲染输出中吗？

我怀疑图像正在异步“下载”，并且您在对象解析其来源`Canvas`之前渲染得太早。`Image`

**[UPDATE 29-Jan-09]** **可能的解决方案**

我完全复制了你的代码并试了一下。当我使用“本地”图像位置（例如“c:\images\splash.jpg”）时，图像在输出 jpeg 中渲染得很好。当我使用 URL（例如“ [http://localhost/images/splash.jpg](http://localhost/images/splash.jpg) ”）时，它没有出现（如您所描述的）。

因此，我将您的代码修改如下（尝试强制下载要下载的图像-仅适用于 http：图像引用）-

```
if (obj != null)
{
    img = obj as Image;
    // new stuff
    BitmapImage bi = new BitmapImage();
    bi.BeginInit();
    bi.StreamSource = getCachedURLStream(new Uri(ImageURL));
    bi.EndInit();
    img.BeginInit();
    img.Source = bi;
    img.EndInit();
    //img.ImageFailed += img_ImageFailed;
    //img.Loaded += new RoutedEventHandler(img_Loaded);
    //img.Source = new BitmapImage(new Uri(ImageURL, UriKind.Absolute));
}
public static Stream getCachedURLStream(Uri url)
{
    HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(url);
    WebResponse response;
    webrequest.CachePolicy = new RequestCachePolicy(RequestCacheLevel.Default);
    response = webrequest.GetResponse();
    Stream s = response.GetResponseStream();
    BufferedStream bs = new BufferedStream(s, 8192);
    return bs;
} 
```

（该`getCachedURLStream`方法来自[同步图像加载](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e76d4534-8f92-44be-a3d7-8bfa2ca9600d/)- 这有点无关紧要，但我只想快速测试一段代码）并且它似乎可以工作（图像在 JPEG 中可见）。也许这会在你的场景中起作用？

# sorting - 如何使用 cygwin 排序对第 n 列上的制表符分隔文件进行排序？

> ID：426647
> 
> 赞同：10
> 
> 时间：2009-01-09T00:38:57.457
> 
> 标签：sorting, cygwin

我有一个巨大的制表符分隔文件，我想在其第二列进行排序。我需要使用制表符作为 cygwin 排序中的字段分隔符。所以我需要这样的东西：

```
sort -t \t -k 2,2 in.txt > out.txt 
```

但是命令提示符按字面意思计算 '\t' 而不是制表符。请注意，我需要在运行 Cygwin 的 Windows 机器上执行此操作。变体如

```
sort -t "\t"
sort -t \"\t\" 
```

不起作用，也不会将其放入带有实际选项卡的 cmd 文件来代替上面的 \t 。

编辑：使用 DOS shell 或 Cygwin bash shell 的解决方案很好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T01:06:39.773

在我的机器上（Mac bash 提示符，GNU 排序 ...）这有效：

```
sort -t '   ' -k 2,2 in.txt > out.txt 
```

（引号之间的“真实”标签。）

要在此处获取选项卡，我键入 CTRL-V、TAB（CTRL-V 后跟 TAB）。

编辑：我现在已经从 cygwin 提示符下在 Windows 机器上对其进行了测试，它在那里的工作方式相同（正如我所料，bash 是 bash）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-07-17T12:14:37.100

您需要在 \t 前面添加一个 $ 符号以打开字符串插值，因此选项卡实际上会被发送到排序。这应该适用于任何终端：

```
sort -t $'\t' -k 2,2 in.txt > out.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-02T08:00:18.040

在 Windows 命令提示符中，我发现的最简单的解决方案是首先禁用制表符补全：

```
cmd /f:off 
```

然后，您可以键入文字制表符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-11T22:50:56.507

我想要一个在 Windows 上进行 GnuWin32 排序的解决方案，但上述解决方案都没有在命令行上为我工作。但是以下批处理文件（.bat）可以正常工作，这正是我想要的。在双引号内键入制表符。

C:>cat foo.bat

排序 -k3 -t" " tabfile.txt

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-15T16:37:26.963

有人看到这里的讽刺吗？
您必须跳过箍才能使制表符成为制表符...

在Windows命令提示符下，我可以使用：
c:\bin\sort -t"(actual tab)" 但只有在启动 cmd /f:off（如上所述）

在 Windows bat 文件中，只要将文本编辑器（notepad2 :-) 设置为将制表符插入为制表符，而不是空格，我就可以执行相同的操作。

使用 -t$'\t" 有一些很受欢迎的提示，但我尝试了大约 2^16 种组合，但没有运气或剩余头发。

# c# - 寻找快速测试 C# 格式字符串的工具

> ID：426649
> 
> 赞同：19
> 
> 时间：2009-01-09T00:39:56.613
> 
> 标签：c#, formatting, string

我经常忘记用于格式化 .NET 字符串的特殊小代码是什么。通过 ToString() 或使用 String.Format()。对齐方式、填充、月份与分钟（月份是大写 M？）、缩写与完整单词等。我永远记不得了。

我对正则表达式也有同样的问题，但幸运的是[Expresso](http://www.ultrapico.com/Expresso.htm)可以帮助我。这很棒。

有没有像 Expresso 这样的工具来试验标准类型（如 DateTime 和 float 等）的格式化字符串？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T00:56:59.043

PowerShell 非常适合测试格式字符串。您可以从 PowerShell 加载程序集并使用要测试的对象和方法。您也可以在命令行上创建一个字符串并测试不同的格式选项。

您可以使用字符串类中的静态方法：

```
$teststring = 'Currency - {0:c}.  And a date - {1:ddd d MMM}.  And a plain string - {2}'
[string]::Format($teststring, 160.45, Get-Date, 'Test String') 
```

或者 PowerShell 有一个内置的格式运算符

```
$teststring = 'Currency - {0:c}.  And a date - {1:ddd d MMM}.  And a plain string - {2}'
$teststring -f 160.45, Get-Date, 'Test String' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-13T19:33:50.987

我刚发现这个：

[http://rextester.com/](http://rextester.com/)

只需粘贴格式字符串，然后运行代码。

创建一个完全可以做到这一点的窗口或控制台项目也很简单。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-09T01:15:20.503

[Snippet Compiler](http://www.sliver.com/dotnet/SnippetCompiler/)通常是用于快速小型应用程序测试的出色工具。不要用一百万个 ConsoleApplication79 项目弄乱你的 Visual Studio，只需使用它。我拥有它并不断使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-01-06T23:57:42.057

[LinqPad](http://www.linqpad.net)是一个出色的工具，可以出色地处理这类事情，即使它与其主要功能（排除 Linq 语法问题）无关。

只需输入将语言选择器设置为“C# 表达式”（或“VB.net 表达式”）并将数据库设置为“无”的表达式。例如：

```
String.Format("{0:d}-{1:d}", new DateTime(2012, 1, 6), null) 
```

当你按下运行时，你会得到结果：

```
1/6/2012- 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T00:58:27.327

[http://www.sellsbrothers.com/tools/#FormatDesigner](http://www.sellsbrothers.com/tools/#FormatDesigner)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T00:49:41.290

~~您可以使用反射器的[Snippy](http://jasonhaley.com/blog/archive/2008/11/23/142521.aspx "Snippy")插件来运行小代码片段。~~

看起来链接已经死了 - 只需使用[LinqPad](https://www.linqpad.net/)！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T05:57:15.387

只是另一个简单的实用程序，可在 MSDN 上找到：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=209564) ?LinkId=209564 ，描述是：

> 一个应用程序，使您能够将格式字符串应用于数字或日期和时间值并显示结果字符串。

但是需要自己编译。

# resharper - 您在哪里编辑 resharper 4.1 上的构造函数模板？

> ID：426650
> 
> 赞同：0
> 
> 时间：2009-01-09T00:40:48.437
> 
> 标签：resharper

当我使用 Resharper 的“生成代码”功能创建带有参数的构造函数时，我得到如下信息：

```
public class Example{
     private int _x;
     private int _y;

     public Example(int _x, int _y){
         this._x = _x;
         this._y = _y;
     }
} 
```

我想改用这个命名约定：

```
public class Example{
     private int _x;
     private int _y;

     public Example(int x, int y){
         _x = x;
         _y = y;
     }
} 
```

但我不知道是否可以编辑这个构造函数模板以及在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T19:15:19.490

选项/语言/通用/命名样式您应该将字段前缀设置为下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T01:17:49.953

转到 Resharper -> Live Templates -> C# -> 找到类和 ctor 模板并右键单击它们以进行所需的调整...

这也可以帮助您[实时模板帮助](http://www.jetbrains.com/resharper/features/code_templates.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T01:35:12.273

那是我刚刚创建的示例：

内部类 MyClass { 私有字符串 myField;

```
 public MyClass(string myField)
    {
        this.myField = myField;
    }
} 
```

# java - 如何在 Java 中引用 Method 对象？

> ID：426655
> 
> 赞同：0
> 
> 时间：2009-01-09T00:43:17.730
> 
> 标签：java, reflection, methods

或者，换句话说，像这样的东西有什么问题 -

```
new Method[] {Vector.add(), Vector.remove()} 
```

Eclipse 一直告诉我我需要参数。但我显然不想调用这些方法，我只想将它们用作对象！该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T00:48:10.777

这行得通，我不禁想知道，你在用这个做什么？

```
new Method[] { 
  Vector.class.getMethod("add", Object.class), 
  Vector.class.getMethod("remove", Object.class) 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T00:50:02.083

首先，您在这里编写语法。我的 javadocs 中没有“Vector.add()”。

你可以这样做：

```
 Method [] methods = Vector.class.getMethods(); 
```

但你不能执行这些方法。这里没有闭包或函数对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T00:53:38.553

这样可行 ：）

我正在使用它来实例化可变数量的“堆叠”循环（循环内循环内循环）。

有一个静态方法，您可以向其传递起始索引、限制、对象以调用这些方法，最后是一个方法数组和一个参数数组。

编辑：粗略的代码——我花了 3 分钟来写，所以那里可能潜伏着一些非常糟糕的东西，但我认为总体思路很明显。

```
public static void loop(int start, int lessThan, Object obj, Method[] methods, Object[] args) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {
        lastLoop++;
        for(int i = start; i < lessThan; i++) {
            for(int j = 0; j < methods.length; j++) {
                methods[j].invoke(obj, args[j]);
            }
        }
    } 
```

如果您想知道我将这整件事用于什么 - 我只是在修补一种方法来进行排列，其中元素的数量少于位置的数量。我在尝试定义可变数量的循环（取决于位置的数量）时遇到了问题，因此决定用这个来规避它。

# .net - Compact Framework 上的延迟签名

> ID：426658
> 
> 赞同：0
> 
> 时间：2009-01-09T00:45:43.793
> 
> 标签：.net, windows-mobile, compact-framework

我想为我的 windows mobile compact 框架程序集使用延迟签名。

当您使用延迟签名对程序集进行签名时，它会使用公钥对其进行签名，并在程序集中为私钥留出空间，可以在发送程序集之前添加私钥。

延迟签名的程序集无法运行或调试，除非签名完成或在该机器上使用该程序集打开该程序集的验证。

sn -Vr 程序集名称.dll

然而，这是一个 Windows 移动应用程序，我没有在我的机器上运行程序集，而是在我的 Windows 移动设备上运行它。

他们是在 Windows Mobile 上运行延迟签名程序集的一种方式，还是真的不支持延迟签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T00:48:53.460

Compact Framework 不支持延迟签名（至少从 3.5 开始不支持）。

编辑：更具体地说，虽然您可以[在没有私钥的情况下构建它](http://msdn.microsoft.com/en-us/library/ms180781.aspx)，但无法[在设备上注册程序集以](http://msdn.microsoft.com/en-us/library/k5b5tt23.aspx)跳过验证。因此，在桌面上使用 CF 程序集时，您仍然可以延迟签署它（因为它是可重定向的，这是一个选项）。不知道这会有多大用处。

# html - 如何对齐正文内容，使其与页眉和页脚对齐

> ID：426668
> 
> 赞同：0
> 
> 时间：2009-01-09T00:51:41.393
> 
> 标签：html, css, dreamweaver

我正在建立一个网站，但我从一个模板开始并对其进行了修改，进行了很多更改并摆脱了整个中心部分，现在我必须从正文重新开始，但是每当我尝试插入导航菜单时，这是一个 javascript从我用来构建它的另一个程序插入的代码。好吧，每次我尝试在页面左侧插入菜单时，它都超出了页眉和页脚的对齐方式，所以它不是与左侧的页眉和页脚直接对齐，而是在在它应该在的地方之外。当谈到这些东西时，我绝对是迟钝的，所以如果有人能告诉我这里的诀窍和构建身体的内容。只是简单的东西，比如用于制作可以插入东西的盒子的 html 代码和标签，

请帮忙。

这里是网站。Retailiracket.thexdt.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T15:55:38.487

我还建议先学习基础知识。设计网站并不像每个人都认为的那样。作为一个不使用所见即所得编辑器的极端初学者，编码 HTML 可能非常复杂。不仅仅是“用于制作可以插入东西的盒子的标签”。

是的，有`<p>`和`<div>`标签可以做你想做的事，但你需要了解每个标签的作用以及何时使用它。

我推荐以下网站：

*   [w3schools](http://w3schools.com)
*   [HTML 好东西](http://www.htmlgoodies.com/primers/html/article.php/3478131)
*   [网猴](http://webmonkey.com)
*   [在 Google 上搜索“HTML 基础知识”](http://www.google.com/search?hl=en&client=firefox-a&rls=org.mozilla%3Aen-US%3Aofficial&hs=OJN&q=html+basics&btnG=Search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T04:24:33.743

我还收到一个无效的 URL 错误。

不过，从您的问题的声音来看，您应该能够相对快速轻松地解决它。我从它的声音中假设您的页眉和页脚是固定宽度，并且当您添加（最有可能的）固定宽度导航时，正文中可能有一个固定宽度块，这会迫使正文更宽. 如果是这种情况，那么您只需要更改控制宽度的方式以适应新的导航栏。所以减少一个块的宽度以适应新块的宽度，有意义吗？

请记住，我实际上并没有看到问题是什么，所以我只是根据最可能的情况从您的问题中猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T21:14:00.657

我也看不到您的页面，但我可以看到[http://www.thexdt.com](http://www.thexdt.com)。设计是否与该页面相似？

该页面使用表格作为一般结构。是否有大图像或大于外部容器宽度的图像？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T00:59:24.373

显然，该 URL 无效。

# ruby-on-rails - 通过 JSON/XML 将二进制数据发送到（Rails）RESTful 端点？

> ID：426694
> 
> 赞同：7
> 
> 时间：2009-01-09T01:04:00.667
> 
> 标签：ruby-on-rails, json, xml, binary

我目前正在组合一个基于 Rails 的 Web 应用程序，它只能通过 json 和 xml 提供和接收数据。但是，某些要求包含上传二进制数据（图像）的能力。

现在，据我了解，JSON 并不完全是为了这个……但是您通常如何解决通过应用程序的这两个入口点接收二进制文件/数据的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T01:08:18.867

我建议将二进制数据编码为 base64 之类的东西。这样可以安全地以 XML 或 JSON 格式使用。

[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T01:10:03.543

也许你可以看看[Base64](http://en.wikipedia.org/wiki/Base64)算法。这用于将所有内容“转换”为 ascii char。您可以对其进行编码和解码。它用于 Web 服务，甚至用于 dotnet 序列化。

希望这有所帮助。

编辑：我看到“新帖子”，发帖时有人更快。[导轨底座64](http://corelib.rubyonrails.org/classes/Base64.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T10:53:09.697

如果您使用的是 Rails 和 json 和 xml，那么您使用的是 HTTP。“POST”是 HTTP 的一部分，是转换二进制数据的最佳方式。Base64 是一种非常低效的方法。

如果您的服务器正在发送数据，我建议您在服务器上以 XML 或 JSON 格式放置文件路径。这样，您的服务器不必对数据进行 base64 编码，而您的客户端已经支持 HTTP GET，可以在不解码的情况下提取数据。（获取/路径/到/文件）

对于发送文件，让您的服务器和/或客户端生成唯一的文件名并使用两步过程；客户端将使用 fileToBeUploaded: "name of file.ext" 发送 xml 或 json 消息，发送消息后将使用上述文件名 POST 数据。同样，客户端和服务器不必对数据进行编码和解码。这可以通过使用多部分请求的一个请求来完成。

Base64 很简单，但会根据数据大小和请求频率迅速消耗 CPU 和/或内存。在服务器端，它也不是缓存操作，而 Web 服务器从磁盘读取文件的操作是缓存的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-18T00:23:40.930

如果您的图像不是太大，将它们放入具有 RoR :binary 类型的数据库很有意义。如果您有数据库副本，则图像可以免费复制到其他站点，无需担心孤立或寡居的图像，并且原子事务问题变得更加简单。

另一方面，Nessence 是正确的，Base64 与任何编码层一样，确实为事务增加了网络、内存和 CPU 负载。如果网络带宽是您的首要问题，请确保您的 Web 服务接受并提供 deflate/gzip 压缩连接。这将降低网络层 Base64 数据的成本，尽管代价是*更多*的内存和 CPU 负载。

这些是应该与您的团队和/或客户讨论的架构问题。

最后，让我向您介绍一下 RoR 的 XML REST 支持。当您使用默认脚手架中的以下代码呈现到 XML 时，Rails`:binary`数据库类型将成为XML 对象：`<object type="binary" encoding="base64">...</object>`

```
def show
  @myobject = MyObject.find(:id)
  respond_to do |format|
    format.xml { render => @myobject }
  end
end 
```

这对于 GET 操作非常有用，而且 PUT 和 POST 操作也很容易编写。问题是 Rails PUT 和 POST 操作不接受相同的标签。这是因为`from_xml`代码不解释`type="binary"`标签，而是寻找`type="binaryBase64"`. Rails 灯塔站点上有一个补丁程序错误来纠正这个问题[。](https://rails.lighthouseapp.com/projects/8994/tickets/2966-to_xml-generated-foo-typebinary-tags-not-accepted-by-from_xml)

# .net - F# + MPI + MONO：集群计算

> ID：426698
> 
> 赞同：4
> 
> 时间：2009-01-09T01:06:25.390
> 
> 标签：.net, f#, mpi, cluster-computing

F# 和 MPI 是否可以在 Linux 计算集群上运行 Mono？任何人都能够证明它的性能/可靠性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T08:55:04.290

我用 F# 和 Mono 2.0 做了一些基本的测试，一切都很好。我知道其他人对我进行了更深入的测试，并且遇到了一些错误，但大多数都报告了积极的体验（此外，mono 和 F# 团队对错误报告的反应也非常好）。

我根本没有测试 MPI.NET，但他们说它确实在单声道下运行：[http ://www.osl.iu.edu/research/mpi.net/faq/?category=general](http://www.osl.iu.edu/research/mpi.net/faq/?category=general)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-15T21:54:25.250

嗯。根据这个错误：[https](https://bugzilla.novell.com/show_bug.cgi?id=419828) ://bugzilla.novell.com/show_bug.cgi?id=419828即使是映射函数的基本定义也会在 Mono 上使用 F# 失败。现在看起来不是一个非常稳定的组合。

# c# - 如何从代码隐藏的用户控件中的内容控件中的数据模板中启动情节提要？

> ID：426700
> 
> 赞同：3
> 
> 时间：2009-01-09T01:07:26.917
> 
> 标签：c#, wpf, user-controls

呸。

我是认真的。我将其拼写如下...

故事板有一个键“myStoryboard”。它保存在带有“myDataTemplate”键的 DataTemplate 中。

此数据模板通过此标记在名称为“myContentControl”的 ContentControl 中使用：

```
<ContentControl Name="myContentControl" 
    ContentTemplate="{DynamicResource myDataTemplate}"/> 
```

内容控件在我的 UserControl 中使用。在 UserControl 代码隐藏中，我做了一个键盘手势，应该启动“myStoryBoard”，但我没有这样的运气。

```
private void StartSB(object sender, ExecutedRoutedEventArgs e) 
{ 
  Storyboard sb = (Storyboard) this.TryFindResource("myStoryboard"); 
  sb.Begin(this);  
} 
```

sb 在这里始终为空。我怎样才能获得故事板？

更新：

所以玩 TryFindResource() 我已经设法到达 myDataTemplate

```
private void StartSB(object sender, ExecutedRoutedEventArgs e) 
{ 
  object sb = this.myContentControl.TryFindResource("myDataTemplate");  
} 
```

在本地查看器中，我可以看到 sb 是 myDataTemplate。我可以在树 sb.base.Resources.Keys 中看到它是一个资源数组，其中“myStoryboard”位于其中。哦，这么近！

更新2：

更多代码在这里完成。我现在意识到这可能过于意大利化，无法用言语来解释。

```
<UserControl > 
  <UserControl.Resources>
   <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Resources\myUCResources.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>
  <ContentControl Name="myContentControl"  
           ContentTemplate="{DynamicResource myDataTemplate}" 
               Content="{Binding}" /> 
  ... 
</UserControl> 
```

现在是此用户控件的代码隐藏

```
namespace myclass 
{ 
  public partial class myUserControl: UserControl,  System.ComponentModel.INotifyPropertyChanged 
   { 
     ... 
      public myUserControl() 
      { 
         InitializeComponent(); 

         <!--setup keybinding--> 
      } 

      public void KeyBindExecuted(object sender, ExecutedRoutedEventArgs e) 
      { 
         Object sb = this.myContentControl.TryFindResource("myDataTemplate");  
         //sb returns the DataTemplate 
      } 

   } 
} 
```

最后是包含 UI 内容和我最终想要触发的动画的资源字典。(myUCResources.xaml)

```
<ResourceDictionary> 
    <DataTemplate x:Key="myDataTemplate" > 
        <Grid> 
           <!-- elements like buttons --> 
        </Grid> 
        <DataTemplate.Resources> 
            <Storyboard x:Key="myStoryBoard"> 
                <DoubleAnimation>
                     <!-- animation stuff--> 
                </DoubleAnimation> 

            </Storyboard> 
        </DataTemplate.Resources> 
        <DataTemplate.Triggers> 
            <EventTrigger SourceName="aButton" RoutedEvent="Button.Click">
                  <BeginStoryboard Storyboard="{StaticResource myStoryBoard}" />
                </EventTrigger>
        </DataTemplate.Triggers> 
    </DataTemplate> 
</ResourceDictionary> 
```

更新 3：

好的不同的方法。我可以使用代码隐藏中的 DataTemplate 中的 EventTrigger 来启动动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T19:22:16.810

啊哈！

所以我找到了一个迂回的方法来解决这个问题。我在第三次更新中想到了触发一个事件的想法似乎更有成效。都可以在这里找到。

[http://www.codeproject.com/script/Forums/View.aspx?fid=1004114&msg=2827455](http://www.codeproject.com/script/Forums/View.aspx?fid=1004114&msg=2827455)

简而言之，我使用 FindResource 来获取 DataTemplate，然后是 DataTemplate 中用于正常触发动画的按钮的 FindName。然后我提出一个按钮点击那个按钮。

# asp.net-mvc - MVC 对象实例还是静态类？

> ID：426704
> 
> 赞同：0
> 
> 时间：2009-01-09T01:09:30.610
> 
> 标签：asp.net-mvc, model-view-controller, multiple-instances, object-lifetime

我对何时创建对象实例或静态助手类感到困惑。例如，如果我调用一个方法来更新数据模型并提交到数据库，我会创建 DataContext 的一个实例。该 Datacontext 的生命周期是多少，每次需要更新新数据时都可以创建新实例吗？

在我的控制器中，我创建了一个 DataCONtext 实例，并在回发到控制器时重用该实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T01:15:21.143

DataContext 是一个非常轻量级的类，旨在用于工作单元。通常，我传入一个工厂，它将根据需要创建适当的 DataContext。我通常会将其包装在 using 块中并将结果转换为 List（或其他对象），以便在控制器代码中执行查询并将结果对象传递给我的视图。这样，可以在控制器方法中（从 using 块）处理 DataContext。

将工厂注入控制器的原因有两个——它允许按需创建 DataContext，它允许我使用生成模拟 DataContext 的工厂进行测试。后者允许我避免在我的单元测试中使用实际的数据库。

# c - 在 vs 2005 中编译 c 代码

> ID：426717
> 
> 赞同：1
> 
> 时间：2009-01-09T01:19:49.280
> 
> 标签：c, visual-studio, compilation

有没有一种简单的方法可以在 Visual Studio 2005 中编译 c 代码？自从我用 c 或 c++ 完成任何编码以来已经有一段时间了（2-3 年），但我记得你曾经能够在 vs 2003 中在 Visual Studio 中编译 c 代码。我认为这只是使用一个空项目（而不是说一个 c++ 项目或 C# 项目）并为您的文件提供 sa *.c 扩展名的问题。但是，这样做，我似乎无法弄清楚如何编译。我确定我只是在做一些愚蠢的事情或遗漏了一些明显的事情。

啊，真的让我更加欣赏 eclipse 的自动编译，这是我的普通 IDE，因为我每天都使用 java 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T01:23:32.830

您可以从 C++ 项目开始，只需删除默认的 .cpp 文件并创建自己的 .c 文件。

该项目默认根据文件的扩展名进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T01:29:48.540

如果您的原始 C 代码不涉及任何 GUI 元素，您可能应该创建一个控制台项目。顺便说一句，发布您的错误消息应该使问题更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T01:37:24.783

> 我认为这只是使用一个空项目的问题......

当你使用 IDE 说要创建一个新项目时，你会被要求选择什么样的项目：假设你的软件包含`main`功能（不是`WinMain`）那么你应该说你要创建一个项目“控制台应用程序”。

创建这个新项目后，将现有的 *.c 文件（和 *.h 文件）添加到项目中，并删除随项目自动创建的默认 *.c 文件。

# mysql - sql group by 与 distinct

> ID：426723
> 
> 赞同：39
> 
> 时间：2009-01-09T01:22:30.583
> 
> 标签：mysql, sql-server, performance, group-by, distinct

当查询中没有进行聚合时，为什么有人会使用 group by 而不是 distinct？

此外，是否有人通过 MySQL 和 SQL Server 中的不同性能考虑来了解该组。我猜 SQL Server 有一个更好的优化器，它们可能在那儿接近同等水平，但在 MySQL 中，我预计会有明显的性能优势。

我对dba的答案很感兴趣。

编辑：

比尔的帖子很有趣，但不适用。让我更具体...

```
select a, b, c 
from table x
group by a, b,c 
```

相对

```
select distinct a,b,c
from table x 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-09T02:48:44.607

`GROUP BY`将行组映射到一行，每个*特定*列中的不同值，甚至不一定必须在选择列表中。

```
SELECT b, c, d FROM table1 GROUP BY a; 
```

该查询是合法的 SQL（**更正：**仅在 MySQL 中；实际上它不是标准 SQL，其他品牌不支持）。MySQL 接受它，并且它相信您知道自己在做什么，选择`b`、`c`和以明确的`d`方式，因为它们[是](http://en.wikipedia.org/wiki/Functional_dependency)`a`.

但是，Microsoft SQL Server 等品牌不允许这种查询，因为它不能轻易确定函数依赖关系。 **编辑：**相反，标准 SQL 要求您遵循**Single-Value Rule**，即选择列表中的每一列都必须在`GROUP BY`子句中命名，或者是集合函数的参数。

而`DISTINCT`总是查看选择列表中的所有列，并且只查看那些列。这是一个常见的误解，`DISTINCT`允许您指定列：

```
SELECT DISTINCT(a), b, c FROM table1; 
```

尽管括号`DISTINCT`看起来像函数调用，但事实并非如此。这是一个查询选项，选择列表的三个字段中的任何一个字段中的不同值都将导致查询结果中的不同行。此选择列表中的表达式之一有括号，但这不会影响结果。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-09T04:22:40.050

来自 MS SQL Server 的一点（非常少）经验数据，来自我们数据库的几个随机表。

对于模式：

```
SELECT col1, col2 FROM table GROUP BY col1, col2 
```

和

```
SELECT DISTINCT col1, col2 FROM table 
```

当查询没有覆盖索引时，两种方式都会产生以下查询计划：

```
|--Sort(DISTINCT ORDER BY:([table].[col1] ASC, [table].[col2] ASC))
   |--Clustered Index Scan(OBJECT:([db].[dbo].[table].[IX_some_index])) 
```

当有一个覆盖指数时，两者都产生：

```
|--Stream Aggregate(GROUP BY:([table].[col1], [table].[col2]))
   |--Index Scan(OBJECT:([db].[dbo].[table].[IX_some_index]), ORDERED FORWARD) 
```

因此，从那个非常小的示例中，SQL Server 肯定将两者视为相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-06-30T11:13:15.450

在 MySQL 中，我发现使用 GROUP BY 在性能上通常比 DISTINCT 更好。

执行“EXPLAIN SELECT DISTINCT”会显示“Using where; Using temporary” MySQL 将创建一个临时表。

vs a "EXPLAIN SELECT a,b, c from T1, T2 where T2.A=T1.A GROUP BY a" 只显示"Using where"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T01:42:08.813

两者都会在 MS SQL Server 中生成相同的查询计划......如果你有 MS SQL Server，你可以启用实际的执行计划来查看哪个更适合你的需求......

请看一下这些帖子：

[http://blog.sqlauthority.com/2007/03/29/sql-server-difference-between-distinct-and-group-by-distinct-vs-group-by/](http://blog.sqlauthority.com/2007/03/29/sql-server-difference-between-distinct-and-group-by-distinct-vs-group-by/)

[http://www.sqlmag.com/Article/ArticleID/24282/sql_server_24282.html](http://www.sqlmag.com/Article/ArticleID/24282/sql_server_24282.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T03:27:48.147

如果您真的在寻找不同的值，则不同的值会使源代码更具可读性（就像它是存储过程的一部分）如果我正在编写临时查询，我通常会从 group by 开始，即使我有没有聚合，因为我最终会经常把它们放在上面。

# sql - MIN/MAX 与 ORDER BY 和 LIMIT

> ID：426731
> 
> 赞同：118
> 
> 时间：2009-01-09T01:25:10.377
> 
> 标签：sql, mysql

在以下查询中，您认为哪种方法更好？你的原因是什么（代码效率，更好的可维护性，更少的WTFery）......

```
SELECT MIN(`field`)
FROM `tbl`;

SELECT `field`
FROM `tbl`
ORDER BY `field`
LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2009-01-09T01:51:59.370

在最坏的情况下，您正在查看未索引的字段，使用`MIN()`需要对表进行一次完整传递。使用`SORT`and`LIMIT`需要一个文件排序。如果针对大型表运行，则感知性能可能会有显着差异。作为一个轶事数据点，我的开发服务器上的 106,000 行表耗时 0.36 秒，耗时 0.84`MIN()`秒`SORT`。`LIMIT`

但是，如果您正在查看索引列，则很难注意到差异（在这两种情况下，无意义的数据点都是 0.00 秒）。然而，看看 explain 的输出，它看起来`MIN()`能够简单地从索引中提取最小值（“选择优化掉的表”和“NULL”行），而`SORT`and`LIMIT`仍然需要对索引进行有序遍历（106,000 行）。实际的性能影响可能可以忽略不计。

看起来`MIN()`是要走的路——在最坏的情况下更快，在最好的情况下难以区分，是标准 SQL，最清楚地表达了你想要获得的价值。正如[mson](https://stackoverflow.com/users/36902/mson)所提到的，唯一似乎需要使用`SORT`and的情况是，您正在编写一个从任意列中查找顶部或底部 N 值的通用操作，并且不值得写出特殊情况操作。`LIMIT`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-09T01:28:17.890

```
SELECT MIN(`field`)
FROM `tbl`; 
```

仅仅因为它与ANSI兼容。限制 1 是特定于 MySql 的，因为 TOP 是特定于 SQL Server。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-16T18:40:50.107

正如[mson](https://stackoverflow.com/users/36902/mson)和[Sean McSomething](https://stackoverflow.com/users/39413/sean-mcsomething)所指出的，MIN 更可取。

ORDER BY + LIMIT 有用的另一个原因是，如果您想要获取与 MIN 列不同的列的值。

例子：

```
SELECT some_other_field, field
FROM tbl
ORDER BY field
LIMIT 1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-09T01:43:54.300

我认为答案取决于你在做什么。

如果您有 1 次查询并且意图与您指定的一样简单，则最好选择 min(field)。

但是，通常将这些类型的需求更改为 - 获取前 n 个结果、获取第 n 个 - 第 m 个结果等。

我不认为提交到您选择的数据库是一个太糟糕的想法。更改数据库不应该掉以轻心，必须修改的是您在进行此操作时所付出的代价。

为什么现在限制自己，因为您以后可能会或可能不会感到疼痛？

我确实认为尽可能多地保留 ANSI 是件好事，但这只是一个指导方针......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T01:29:18.200

考虑到可接受的性能，我会使用第一个，因为它在语义上更接近意图。
如果性能是一个问题，（大多数现代优化器可能会将两者优化到相同的查询计划，尽管您必须测试以验证这一点）那么我当然会使用更快的那个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-29T13:53:13.907

user650654 表示，当需要“获取与 MIN 列不同的列的值”时，带有 LIMIT 1 的 ORDER BY 很有用。我认为，在这种情况下，使用 MIN 而不是排序，我们仍然可以通过两次单次传递获得更好的性能（希望这是优化的 :()

```
SELECT some_other_field, field
FROM tbl
WHERE field=(SELECT MIN(field) FROM tbl) 
```

# c++ - 错误：宏名称必须是使用 #ifdef 0 的标识符

> ID：426736
> 
> 赞同：45
> 
> 时间：2009-01-09T01:27:30.700
> 
> 标签：c++, macros, c-preprocessor

我有一个用 C++ 编写的应用程序的源代码，我只想使用以下方法评论一些东西：

```
#ifdef 0
...
#endif 
```

我得到这个错误

> 错误：宏名称必须是标识符

为什么会这样？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2009-01-09T01:38:49.833

#ifdef 指令用于检查*是否定义了预处理器符号。*标准 ( `C11 6.4.2 Identifiers`) 规定标识符不得以数字开头：

```
identifier:
    identifier-nondigit
    identifier identifier-nondigit
    identifier digit
identifier-nondigit:
    nondigit
    universal-character-name
    other implementation-defined characters>
nondigit: one of
    _ a b c d e f g h i j k l m
    n o p q r s t u v w x y z
    A B C D E F G H I J K L M
    N O P Q R S T U V W X Y Z
digit: one of
    0 1 2 3 4 5 6 7 8 9 
```

使用预处理器阻塞代码的正确形式是：

```
#if 0
: : :
#endif 
```

您还可以使用：

```
#ifdef NO_CHANCE_THAT_THIS_SYMBOL_WILL_EVER_EXIST
: : :
#endif 
```

但是您需要确信这些符号*不会*被您自己的代码无意中设置。换句话说，不要使用类似`NOTUSED`或`DONOTCOMPILE`其他人也可能使用的东西。为了安全起见，`#if`应该首选该选项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-09T01:33:51.340

使用以下方法计算表达式（常量 0 计算为假）。

```
#if 0
 ...
#endif 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-11-09T05:37:48.590

如果您不遵守 marco 规则，也会出现此错误

像

```
#define 1K 1024 // Macro rules must be identifiers error occurs 
```

原因：宏应该以字母开头，而不是数字

改成

```
#define ONE_KILOBYTE 1024 // This resolves 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-28T13:28:59.300

```
#ifdef 0
...
#endif 
```

#ifdef 在使用常量或表达式时需要一个宏而不是表达式

```
#if 0
...
#endif 
```

或者

```
#if !defined(PP_CHECK) || defined(PP_CHECK_OTHER)
..
#endif 
```

如果使用#ifdef，它会报告此错误

```
#ifdef !defined(PP_CHECK) || defined(PP_CHECK_OTHER)
..
#endif 
```

#ifdef 期望宏而不是宏表达式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T23:00:07.783

请注意，如果您不小心键入以下内容，也可能会遇到此错误：

```
#define <stdio.h> 
```

...代替...

```
#include <stdio.> 
```

# c++ - 这种类型的内存是在堆还是栈上分配的？

> ID：426737
> 
> 赞同：4
> 
> 时间：2009-01-09T01:27:52.103
> 
> 标签：c++, memory-management, stack, heap-memory

在 C++ 的上下文中（没关系）：

```
class Foo{
    private:
        int x[100];
    public:
        Foo();
} 
```

我所学到的告诉我，如果你像这样创建一个 Foo 实例：

```
Foo bar = new Foo(); 
```

然后数组 x 分配在堆上，但是如果您像这样创建 Foo 的实例：

```
Foo bar; 
```

然后它在堆栈上创建。

我在网上找不到资源来确认这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T01:39:51.533

对您的示例稍作修改：

```
class Foo{
    private:
        int x[100];
        int *y;
    public:
        Foo()
        {
           y = new int[100];
        }
        ~Foo()
        { 
           delete[] y; 
        }

} 
```

示例 1：

```
Foo *bar = new Foo(); 
```

*   x 和 y 在堆上：
*   sizeof(Foo*) 在堆栈上创建。
*   sizeof(int) * 100 * 2 + sizeof(int *) 在堆上

* * *

示例 2：

```
Foo bar; 
```

*   x 在栈上，y 在堆上
*   sizeof(int) * 100 在堆栈上 (x) + sizeof(int*)
*   sizeof(int) * 100 在堆上 (y)

由于类/结构对齐，实际大小可能略有不同，具体取决于您的编译器和平台。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-09T01:53:46.560

严格来说，根据标准，对象不必存在于堆栈或堆中。该标准定义了 3 种类型的“存储持续时间”，但没有明确说明必须如何实现存储：

1.  静态存储时间
2.  自动存储时间
3.  动态存储时间

自动存储持续时间通常（几乎总是）使用堆栈实现。

动态存储持续时间通常使用堆（最终通过`malloc()`）实现，尽管即使编译器的用户也可以覆盖它。

静态存储持续时间通常称为全局（或静态存储）。

该标准对这些事情有这样的说法（以下是 3.7 - 存储持续时间的各个部分的摘录）：

> 静态和自动存储持续时间与由声明 (3.1) 引入并由实现 (12.2) 隐式创建的对象相关联。动态存储持续时间与使用 operator new (5.3.4) 创建的对象相关联。
> 
> ...
> 
> 所有既不具有动态存储持续时间也不是本地对象的对象具有静态存储持续时间。这些对象的存储应持续到程序的持续时间（3.6.2、3.6.3）。
> 
> ...
> 
> 显式声明 auto 或 register 或未显式声明 static 或 extern 的本地对象具有自动存储持续时间。这些对象的存储一直持续到创建它们的块退出。
> 
> ...
> 
> 对象可以在程序执行期间动态创建 (1.9)，使用 new-expressions (5.3.4)，并使用 delete-expressions (5.3.5) 销毁。AC++ 实现通过全局分配函数 operator new 和 operator new[] 以及全局解除分配函数 operator delete 和 operator delete[] 提供对动态存储的访问和管理。
> 
> ...
> 
> 该库为全局分配和释放函数提供默认定义。一些全局分配和释放函数是可替换的 (18.4.1)

最后（关于示例类中的数组）：

> 3.7.4 子对象的持续时间 [basic.stc.inherit]
> 
> 成员子对象、基类子对象和数组元素的存储时间是它们完整对象的存储时间（1.8）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-09T01:30:16.043

Foo 类型的对象按顺序存储 100 个整数的大小。如果你在堆栈上创建它，你将把它全部放在堆栈上。如果您使用 new 执行此操作，它将作为对象的一部分在堆上。

这是语言规范的一部分，我不确定你的问题是什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T01:38:33.843

是的，如果在堆上创建对象，成员数组`x`将在堆上创建。`Foo`当您为您分配动态内存时，`Foo`您要求的内存长度`sizeof(Foo)`（可能还有一些内存开销，但我们暂时忽略它），这在您的示例代码中意味着 100`int`秒的大小。这*必须*是类型对象`Foo`（及其内部数据）的生命周期跨范围的情况。

如果您不在`Foo`堆上创建对象，并且内部数组`Foo`不是您使用`new`in`Foo`的构造函数分配内存的指针，则将在堆栈上创建该内部数组。`delete`同样，必须如此，才能在作用域结束时自动清理数组而无需任何s。具体来说，

```
struct Foo {
    int* y;
    Foo() : y(new int()) { }
    ~Foo() { delete y; }
}; 
```

`y`无论`Foo`对象是在堆栈上还是在堆上创建，都将在堆上创建。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T01:32:46.913

你的意思是

```
Foo* bar = new Foo(); 
```

我想。*那*是在堆中创建的。

# database - 在亚线性时间内进行二级查找的数据结构或算法？

> ID：426740
> 
> 赞同：5
> 
> 时间：2009-01-09T01:28:46.110
> 
> 标签：database, data-structures, indexing

有没有办法在短时间内根据属性或谓词从大集合中选择一个子集`O(n)`？

举个简单的例子，假设我有一大群作者。每个作者与一套书籍是一对多的关系，与出生城市是一对一的关系。

有没有一种方法可以有效地进行查询，例如“获取出生在芝加哥的作者的所有书籍”？我能想到的唯一方法是首先从城市中选择所有作者（快速且索引良好），然后遍历它们并累积他们所有的书籍（来自芝加哥的作者数量`O(n)`在哪里）。`n`

我知道数据库在某些连接中会做这样的事情，而 Endeca 声称能够使用他们所谓的“记录关系导航”来“快速”地做到这一点，但我无法找到任何关于使用的实际算法甚至他们的计算复杂度。

我并不特别关心确切的数据结构......我会很高兴了解如何在[RDBMS](https://en.wikipedia.org/wiki/Relational_database_management_system)或键/值存储库或任何东西中执行此操作。

另外，这种性质的三级或四级请求呢？（把所有居住在移民人口超过 10,000 的城市的作者写的书都给我……） 有没有一种广义的 n 度算法，它的性能特点是什么？

**编辑：**

我可能真的很密集，但我看不出倒排索引建议有什么帮助。例如，假设我有以下数据：

```
DATA
1\.  Milton        England
2\.  Shakespeare   England
3\.  Twain         USA

4\.  Milton        Paridise Lost
5\.  Shakespeare   Hamlet
6\.  Shakespeare   Othello
7\.  Twain         Tom Sawyer
8\.  Twain         Huck Finn

INDEX
"Milton"         (1, 4)
"Shakespeare"    (2, 5, 6)
"Twain"          (3, 7, 8)
"Paridise Lost"  (4)
"Hamlet"         (5)
"Othello"        (6)
"Tom Sawyer"     (7)
"Huck Finn"      (8)
"England"        (1, 2)
"USA"            (3) 
```

假设我对“英格兰作者的书籍”进行了查询。很快，`O(1)`通过哈希表，我可以得到来自英格兰的作者名单：`(1, 2)`. 但是，对于下一步，为了检索书籍，我必须对每一个集合`{1, 2}`进行另一个`O(1)`查找：`1 -> {4}, 2 -> {5, 6}`然后对结果进行联合`{4, 5, 6}`。

还是我错过了什么？也许您的意思是我应该明确存储一个将 Book 链接到 Country 的索引条目。这适用于非常小的数据集。但是对于大型数据集，匹配任何可能的查询组合所需的索引数量将使索引呈指数增长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T10:57:55.040

对于大型数据集上的这种连接，现代 RDBMS 通常会使用一种称为**列表合并**的算法。使用您的示例：

1.  准备一个列表，A，所有住在芝加哥的作者，并在 O(Nlog(N)) 时间内按作者排序。*
2.  准备所有（作者、书名）对的列表 B，并在 O(Mlog(M)) 时间内按作者对它们进行排序。*
3.  将这两个列表“并排”放置，并从每堆中的“顶部”（字典最小）元素比较作者。
    *   他们是一样的吗？如果是这样的话：
        *   输出（作者，书名）对`top(B)`
        *   移除B堆的顶部元素
        *   转到 3。
    *   否则，是`top(A).author`< `top(B).author`? 如果是这样的话：
        *   移除A堆的顶部元素
        *   转到 3。
    *   否则，它必须是`top(A).author`> `top(B).author`：
        *   移除B堆的顶部元素
        *   转到 3。

*（或 O(0) 时间，如果表已经按作者排序，或者有一个索引。）

循环继续一次删除一个项目，直到两个堆都是空的，因此需要 O(N + M) 步，其中 N 和 M 分别是堆 A 和 B 的大小。因为这两个“堆”是按作者排序的，所以这个算法会发现每一个匹配对。它不需要索引（尽管索引的存在可能会消除开始时对一个或两个排序操作的需要）。

请注意，如果 RDBMS 估计这样做会更快，它可能会选择不同的算法（例如您提到的简单算法）。RDBMS 的查询分析器通常根据磁盘访问和 CPU 时间估计数千种不同方法的成本，可能会考虑相关表中值的统计分布等信息，并选择最佳的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T02:01:08.977

[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)。

由于这有一个循环，我确信它无法通过**O** (n) 测试。但是，当您的结果集有*n*行时，就不可能避免对结果集进行迭代。然而，查询是两个哈希查找。

```
from collections import defaultdict

country = [ "England", "USA" ]

author=  [ ("Milton", "England"), ("Shakespeare","England"), ("Twain","USA") ]

title = [ ("Milton", "Paradise Lost"), 
    ("Shakespeare", "Hamlet"),
    ("Shakespeare", "Othello"),
    ("Twain","Tom Sawyer"),
    ("Twain","Huck Finn"),
]

inv_country = {}
for id,c in enumerate(country):
    inv_country.setdefault(c,defaultdict(list))
    inv_country[c]['country'].append( id )

inv_author= {}
for id,row in enumerate(author):
    a,c = row
    inv_author.setdefault(a,defaultdict(list))
    inv_author[a]['author'].append( id )
    inv_country[c]['author'].append( id )

inv_title= {}
for id,row in enumerate(title):
    a,t = row
    inv_title.setdefault(t,defaultdict(list))
    inv_title[t]['title'].append( id )
    inv_author[a]['author'].append( id )

#Books by authors from England
for t in inv_country['England']['author']:
    print title[t] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T02:42:00.347

```
SELECT a.*, b.*
   FROM Authors AS a, Books AS b
   WHERE a.author_id = b.author_id
     AND a.birth_city = "Chicago"
     AND a.birth_state = "IL"; 
```

一个好的优化器将在比阅读整个作者列表和整个书籍列表所需的时间更短的时间内处理它，因此这是亚线性时间。 *（如果您对次线性的含义有另一种定义，请说出来。）*

请注意，优化器应该能够选择最有利的处理表的顺序。这适用于 N 级查询集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T10:27:57.893

一般来说，RDBMS 可以很好地处理这些类型的查询。商业和开源数据库引擎都已经发展了几十年，使用所有适用的合理计算算法，以尽可能快地完成这项任务。

我敢猜测，如果您的数据是专门组织的并且需要特定的算法，那么您在速度上击败 RDBMS 的唯一方法是。一些 RDBS 允许您指定可以使用哪些底层算法来操作数据，并且使用开源算法，如果需要，您始终可以重写或实现新算法。

但是，除非您的情况非常特殊，否则我认为这可能是严重的矫枉过正。在大多数情况下，我会说将数据放入 RDBMS 并通过 SQL 操作它应该可以很好地工作，这样您就不必担心底层算法。

# php - 我的主机上有一个神秘的 PHP SOAP 错误，但无法在本地复制

> ID：426747
> 
> 赞同：1
> 
> 时间：2009-01-09T01:30:30.287
> 
> 标签：php, soap, codeigniter, mosso

我遇到了一个有趣的 PHP/SOAP 错误，这让我很困惑。搜索后，我没有找到合理的解释，我很感激你的帮助。这是背景：

我有一个用 PHP/ [CodeIgniter](http://codeigniter.com/)构建的站点，它使用 SOAP 通过 SSL 与不受我控制的第三方提供的后端系统（我们称它们为“X 公司”以保护无辜者）进行通信。本着良好 MVC 的精神，我将特定于与该数据源交互的代码放在单独的模型中 ( `system/application/models/company_x.php`)。我一直在 Mac 上使用 MAMP 进行本地开发，通过测试和开发几乎一切都比较顺利；包括通过 SSL 调用 X 公司的 Web 服务。我可能应该提到他们的 Web 服务有 PHP 5 的 SOAP 不喜欢的奇怪的 WSDL。诸如所需参数之类的东西不存在。非常明确地调用 SOAP 方法有点奇怪，但我成功了，并且通过了测试。[莫索](http://www.mosso.com/)，我可以发誓它在那里也有用过一段时间。

想象一下，当每次调用 SOAP Web 服务都开始产生如下错误时，我会感到惊讶：

```
    遇到 PHP 错误
    严重性：警告
    消息：SoapClient::__doRequest() [soapclient.--dorequest]：
    警告：URL fopen 访问
    文件名：models/company_x.php
    行号：86

```

除了服务器上模型文件的完整路径之外，错误日志没有提供更多信息。它在本地工作，我认为它以前在 Mosso 上工作过。也许 Mosso 更改了他们的设置，并禁用了 SOAP 或其他东西。再过`phpinfo()`一会儿，他们就绰绰有余了。我想也许我的 Mac 更能容忍 SSL 证书。毕竟，这是一个 GoDaddy *.domain.com 证书，可能`fopen`无法通过。我创建了一个测试文件以通过 SSL 进行连接，并将其放在 Mosso 上，它就可以工作了。

我想知道为什么`fopen`访问突然成为 SOAP 的问题？莫索是什么让这突然变得困难？我需要覆盖某些`php.ini`设置吗？会不会像经常出现这样的无益错误一样，完全不同？

**更新：**这是来自 phpinfo() 的配置命令：

`'./configure' '--build=x86_64-redhat-linux-gnu' '--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib64' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--without-pear' '--with-bz2' '--with-curl' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-png' '--with-pspell' '--with-expat-dir=/usr' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg' '--enable-track-vars' '--enable-trans-sid' '--enable-yp' '--enable-wddx' '--with-kerberos' '--enable-ucd-snmp-hack' '--with-unixODBC=shared,/usr' '--enable-memory-limit' '--enable-shmop' '--enable-calendar' '--enable-dbx' '--enable-dio' '--with-ming' '--with-mime-magic' '--with-sqlite=shared' '--with-libxml-dir=/usr' '--with-xml' '--with-system-tzdata' '--with-apxs2=/usr/sbin/apxs' '--without-mysql' '--without-gd' '--without-odbc' '--disable-dom' '--disable-dba' '--without-unixODBC' '--disable-pdo' '--disable-xmlreader' '--disable-xmlwriter' '--disable-json'`

**注意**：我在下面的评论`phpinfo()`报告说允许卷曲；奇怪的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T02:10:46.663

你可能有这个 [http://us.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://us.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

失踪。

请记住，您始终可以使用 phpinfo() 来直观地比较机器之间的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-13T23:10:41.277

另一种可能性（来自[PHP 文档](http://www.php.net/fopen)）：

> 注意：启用安全模式后，PHP 会检查脚本运行所在的目录是否与正在执行的脚本具有相同的 UID（所有者）。

编辑：嗯..我在您的 PHP 编译选项中看不到安全模式，所以可能不是那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-24T23:33:45.207

好的，关于这个问题的一点更新：错误*神秘地*消失了，我没有任何改变。我将不得不假设 Mosso 上存在一些奇怪的配置错误，该错误已被静默修复。X公司的设置也可能存在远程问题。这是IMO最糟糕的修复方式！无论如何，感谢所有关注此事的人。

# mysql - 带有更新的我的 SQL 存储过程

> ID：426749
> 
> 赞同：1
> 
> 时间：2009-01-09T01:32:44.137
> 
> 标签：mysql, stored-procedures, sql-update

我有一个在插入新事务时使用的存储过程。此过程正确插入到事务表中，但我还需要根据插入的值更新另一个相关表。

基于 Product_ID，我需要使用名为“Zen_Products_Description”的表中的值更新名为“Salon”的表中的 PT_Pct_to_Salon。可以使用 insert 中的“Salon_ID”找到相关的沙龙，它相当于“沙龙”表的 PK ID。

我需要插入的值在“Zen_Products_Description”表的“web_share”字段中。'Zen_Products_Description' 中的相关行可以通过将插入的值 'Product_ID' 与 'Zen_Products_Description' 的 PK 匹配，该 PK 称为 'products_id'。

我正在使用 MySQL 5。

* * *

```
BEGIN
INSERT INTO Transactions
(Cart_Trans_ID, Customer_ID, Pass_Through_Amt, Product_ID, Product_Name, Product_Qty, Salon_ID,  Stylist_ID, Trans_Type, customerAddress, customerCity, customerEmail, customerFirstName, customerLastName, customerPhone, customerPostal, customerState) 
VALUES (Cart_Trans_ID, Customer_ID, Pass_Through_Amt, Product_ID, Product_Name, Product_Qty, Salon_ID, Stylist_ID, Trans_Type, customerAddress, customerCity, customerEmail, customerFirstName, customerLastName, customerPhone, customerPostal, customerState);
Insert Into Zen_Products_Description
(products_id, products_name) 
Values (Product_ID, Product_Name) ON DUPLICATE KEY UPDATE
products_name = Product_Name;

//this is where I try unsuccessfully to update
update Salon
set PT_Pct_to_Salon = Zen_Products_Description.web_share
join Salon
on Salon.Salon_ID = Transactions.Salon_ID
join Zen_Products_Description
on Zen_Products_Description.products_id = Transactions.Product_ID;

END 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T01:35:00.683

大声笑 - 你忘了问一个问题......简洁，我会帮助你

```
BEGIN 
  INSERT INTO Transactions 
    (Cart_Trans_ID, Customer_ID, 
     Pass_Through_Amt, Product_ID, Product_Name, 
     Product_Qty, Salon_ID, Stylist_ID, 
     Trans_Type, customerAddress, customerCity, 
     customerEmail, customerFirstName, customerLastName, 
     customerPhone, customerPostal, customerState) 
  VALUES 
    (Cart_Trans_ID, Customer_ID, 
     Pass_Through_Amt, Product_ID, Product_Name, 
     Product_Qty, Salon_ID, Stylist_ID, 
     Trans_Type, customerAddress, customerCity, 
     customerEmail, customerFirstName, customerLastName, 
     customerPhone, customerPostal, customerState); 

Insert Into Zen_Products_Description 
  (products_id, products_name) 
Values 
  (Product_ID, Product_Name) 

ON DUPLICATE KEY 

UPDATE products_name = Product_Name 
```

########## 上面的一切都是无关紧要的

```
update Salon 
  set PT_Pct_to_Salon = Zen_Products_Description.web_share 
join Salon on Salon.Salon_ID = Transactions.Salon_ID 
join Zen_Products_Description 
  on Zen_Products_Description.products_id = Transactions.Product_ID;

############### here is update

UPDATE salon A 
INNER JOIN Transactions B ON A.salon_ID = B.salon_ID
INNER JOIN Zen_Products_Description C on C.Products_id = B.product_id
SET A.PT_Pct_to_Salon = C.web_share 
```

## ， ax = bx 等... ## 顺便说一下 - 学习如何格式化您的代码，以便人们可以阅读它...

```
END 
```

# java - 间隔运行 Java 线程

> ID：426758
> 
> 赞同：19
> 
> 时间：2009-01-09T01:36:42.973
> 
> 标签：java, multithreading, jdbc, timer

我有一个需要每 10 秒执行一次的线程。此线程包含对另一台服务器上的数据库的多次调用 (12 - 15)。此外，它还访问大约 3 个文件。因此，会有相当多的 IO 和网络开销。

执行上述操作的最佳策略是什么？

一种方法是使用 sleep 方法和 while 循环，但这是一个糟糕的设计。

在这种情况下，类似于 Timer 的类会有所帮助吗？另外，创建多个线程（一个用于 IO，一个用于 JDBC）而不是让它们在一个线程中运行会更好吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-09T01:57:16.613

我发现[ScheduledExecutorService](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)是一个很好的方法来做到这一点。它可以说比 a 稍微复杂一些`Timer`，但在交换方面提供了更大的灵活性（例如，您可以选择使用单个线程或线程池；它需要的单位不仅仅是毫秒）。

```
ScheduledExecutorService executor =
    Executors.newSingleThreadScheduledExecutor();

Runnable periodicTask = new Runnable() {
    public void run() {
        // Invoke method(s) to do the work
        doPeriodicWork();
    }
};

executor.scheduleAtFixedRate(periodicTask, 0, 10, TimeUnit.SECONDS); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T01:56:56.567

一种选择是创建一个 ScheduledExecutorService ，然后您可以安排您的作业：

```
ScheduledExecutorService ex = Executors.newSingleThreadScheduledExecutor();
ex.scheduleWithFixedDelay(...); 
```

如果您确实决定拥有多个线程，那么您可以创建一个具有更多线程的 ScheduledExecutorService（同样，通过 Executors 类）。

就线程数和每个线程中的内容而言，就性能而言，我想说这取决于：

*   对于您的特定应用程序，一个线程能否真正“工作”而另一个线程正在等待 I/O？
*   您的多个线程最终会“破坏相同的资源”（例如，从同一个 dsk 上不同位置的文件中读取）并因此减慢彼此的速度，还是它们会同时访问不同的资源？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T01:38:42.283

看看[Timer](http://java.sun.com/javase/6/docs/api/java/util/Timer.html)和[TimerTask](http://java.sun.com/javase/6/docs/api/java/util/TimerTask.html)类。它们正是您想要的。

您可以制作一个 TimerTask 实现，该实现将您的线程对象放入构造函数中。

然后 run 方法将调用线程的 run 方法。

```
// Perhaps something like this
Timer t = new Timer();
t.scheduleAtFixedRate(yourTimerTask, 0, 10 * 1000);
// Hopefully your task takes less than 12 seconds 
```

# c - 用于解析 Erlang 二进制文件的 C 库？

> ID：426765
> 
> 赞同：3
> 
> 时间：2009-01-09T01:38:38.803
> 
> 标签：c, erlang

我有一个 erlang 服务器，它将通过 tcp 套接字与用 C 编写的客户端进行通信。是否有任何 C 库用于将 erlang 二进制术语解析为 C 结构？

我意识到这不是绝对必要的，但它会非常方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T02:59:25.413

Erlang 和 C、erl_interface 和 C 节点之间的进程间通信有 C 库：

*   [http://erlang.org/doc/tutorial/overview.html](http://erlang.org/doc/tutorial/overview.html)
*   [http://erlang.org/doc/tutorial/erl_interface.html](http://erlang.org/doc/tutorial/erl_interface.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-21T01:18:22.427

我制作了自己的： C/C++ 中的[EPAPI](http://code.google.com/p/epapi/) (Erlang Port API)。非常易于使用，我提供了一个 Debian 存储库以便于更新。

## 例子

```
 PktHandler *ph = new PktHandler();
 MsgHandler *mh = new MsgHandler(ph);

 //Register a message type
 // {echo, {Counter}}
 mh->registerType(1, "echo", "l" );

 //Wait for a message
 Msg *m;
 result = mh->rx(&m);

 //Verify return code
 if (result) {
    //handle error
    printf("ERROR, message: %s", mh->strerror());
    // ...
 } 
```

# iphone - 新手指南：在 iPhone 应用程序中管理货币

> ID：426779
> 
> 赞同：2
> 
> 时间：2009-01-09T01:47:54.277
> 
> 标签：iphone, objective-c

我正在构建一个需要管理资金数据类型的应用程序。

我是 Obj-c 的新手，所以我看不到 NSDecimalNumber 的使用。

例如，在我的单元测试中，我这样做：

```
@interface SamplePerson : NSObject {
    NSString *name;
    NSDate *birthDate;
    NSInteger size;
    NSNumber *phone;
    NSDecimal balance;
    BOOL *isOk;
}

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSDate *birthDate;
@property (nonatomic) NSInteger size;
@property (nonatomic, retain) NSNumber *phone;
@property (nonatomic) NSDecimal balance;
@property (nonatomic) BOOL *isOk;
--    
o.balance = [NSDecimalNumber decimalNumberWithDecimal: [[NSNumber numberWithLong: 12.5] decimalValue]]; 
```

但是得到一个警告：

> 警告：从不同的 Objective-C 类型传递“保存：”的参数 1

总的来说，我认为这个问题比预期的要复杂。我可以使用整数破解，但在 Foxpro、Delphi、.NET、Python 的 10 多年编码中，我从来没有这样做过……做这种工作从来没有问题。

无论如何，我想知道如何做到这一点。我阅读了网络，但只找到了与上面相同的代码以及“使用 NSDecimalNumber 或被杀！”之类的信息。

我想知道如何：

*   赋值简单的值，如 12.5
*   简单的数学
*   如何从 sqlite 存储和加载。

谢谢你。

（顺便说一句：存在解决这个问题的库或实用程序？这听起来像一个常见的头痛，对吧？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T01:58:11.137

您收到该警告的原因是因为您将 balance 声明为原始 NSDecimal，而不是 NSDecimalNumber *。看看[这个问题](https://stackoverflow.com/questions/421463/should-i-use-nsdecimalnumber-to-deal-with-money)，为什么你应该使用 NSDecimalNumber。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T05:14:43.533

12.5也不长，所以不能用

```
[NSNumber numberWithLong: 12.5] 
```

# perl - 如何从 Perl 中的 CSV 文件中过滤掉特定列？

> ID：426781
> 
> 赞同：0
> 
> 时间：2009-01-09T01:48:34.557
> 
> 标签：perl, csv

我只是 Perl 的初学者，在使用 Perl 脚本过滤列时需要一些帮助。我在一个文件中有大约 10 列用逗号分隔，我需要在该文件中保留 5 列并删除该文件中的所有其他列。我们如何实现这一目标？

非常感谢任何人的帮助。

干杯，尼尔

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-09T02:10:39.100

查看[Text::CSV](http://search.cpan.org/dist/Text-CSV)（或[Text::CSV_XS](http://search.cpan.org/dist/Text-CSV_XS)）以在 Perl 中解析 CSV 文件。它在[CPAN](http://search.cpan.org/)上可用，或者如果您使用 Linux 或其他类 Unix 操作系统，您可以通过包管理器获取它。在 Ubuntu 中，该软件包称为 libtext-csv-perl。

它可以处理由于包含逗号而被引用的字段之类的情况，这是简单的拆分命令无法处理的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T01:57:55.363

CSV 是一种定义不明确的复杂格式（引号、逗号和空格的奇怪问题）。寻找一个可以为您处理细微差别并为您提供便利[的库，例如按列名进行索引。](http://search.cpan.org/dist/Snail-CSV/lib/Snail/CSV.pm)

当然，如果您只是想用逗号分割文本文件，那么@Pax 的解决方案就是您的最佳选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T01:56:36.817

使用 split 将行分开，然后输出您想要的行（例如每隔一列），创建以下 xx.pl 文件：

```
while(<STDIN>) {
    chomp;
    @fields = split (",",$_);
    print "$fields[1],$fields[3],$fields[5],$fields[7],$fields[9]\n"
} 
```

然后执行：

```
$ echo 1,2,3,4,5,6,7,8,9,10 | perl xx.pl
2,4,6,8,10 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T02:02:22.127

如果您在讨论 Windows 中的 CSV 文件（例如，从 Excel 生成），您需要小心处理本身包含逗号但用引号括起来的字段。

在这种情况下，简单的*拆分*将不起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-30T03:04:21.880

您可以使用一些 Perl 的内置运行时选项在命令行上执行此操作：

`$ echo "1,2,3,4,5" | perl -a -F, -n -e 'print join(q{,}, $F[0], $F[3]).qq{\n}'` `1,4`

以上将 -a(utosplit) 使用逗号的 -F(ield)。然后它将加入您感兴趣的字段并将它们打印出来（使用行分隔符）。这假定没有嵌套逗号的简单数据。我使用不可打印的字段分隔符 (\x1d) 执行此操作，所以这对我来说不是问题。

有关详细信息，请参阅[http://perldoc.perl.org/perlrun.html#Command-Switches 。](http://perldoc.perl.org/perlrun.html#Command-Switches)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-09T02:24:24.390

或者，您可以使用标准库中的[Text::ParseWords 。](http://search.cpan.org/search?module=Text::ParseWords)添加

```
use Text::ParseWords; 
```

到上面 Pax 示例的顶部，然后替换

```
 my @fields = parse_line(q{,}, 0, $_); 
```

为分裂。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-17T20:21:42.577

去寻找并没有找到一个很好的兼容 csv 的过滤器程序，它不仅可以灵活地用于其中一个，因此我写了一个。享受。

基本用法是：

bash$ csvfilter [-r <columnTitle>]* [-quote] <csv.file>

```
#!/usr/bin/perl

使用严格；
使用警告；
使用 Getopt::Long；

使用文本::CSV；

我的 $always_quote=0;

我的@remove；
if ( !GetOptions('remove:s'=> \@remove,
          'quote-always'=>sub {$always_quote=1;}) ) {
   die "$0:invalid option (use --remove [--quote-always])";
}

我的@cols2remove；

子过滤器（@）
{
   我的@fields=@_;
   我的@r;
   我的 $i=0;
   对于我的 $c (@cols2remove) {
       我的 $p;
       #if ( $i $i ) {
       推（@r，拼接（@fields，$i））；
   }
   返回@r;
}

# 如果这些则只创建一个
我的 $csvOut=new Text::CSV({always_quote=>$always_quote});

子打印线（@）
{
    我的@fields=@_;
    我的 $combined=$csvOut->combine(filter(@fields));
    我的 $str=$csvOut->string();
    如果（长度（$str））{
     打印“$str\n”；
    }
}

我的 $csv = Text::CSV->new();

我的$od;
打开（$od，“|猫”）|| 死“输出：$！”；
尽管 （） {
    $csv->解析($_);
    如果 ( $. == 1 ) {
    我的 $failures=0;
    我的@cols=$csv->字段；
    对于我的 $rm (@remove) {
        for (我的 $c=0; $c$b} @cols2remove);
    }
    printLine($csv->fields);
}

退出（0）；
\
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T17:01:49.167

我个人最喜欢的 CSV 方法是使用[AnyData 模块](http://search.cpan.org/~jzucker/AnyData-0.10/AnyData.pm)。它似乎使事情变得非常简单，并且可以很容易地删除命名列。 [看看 CPAN](http://search.cpan.org/~jzucker/AnyData-0.10/AnyData.pm)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T10:05:48.763

除了这里人们所说的处理逗号分隔文件之外，我想指出，可以使用数组切片和/或映射提取偶数（或奇数）数组元素：

```
@myarray[map { $_ * 2 } (0 .. 4)] 
```

希望能帮助到你。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-01-09T01:57:36.817

这回答了一个更大的问题，但似乎是一个很好的相关信息。

unix [cut](http://www.manpagez.com/man/1/cut/)命令可以做你想做的（还有更多）。它已[在 Perl 中重新实现](http://www.robvanderwoude.com/files/cut_perl.txt)。

# asp.net - 初学者指南，了解如何将 Subversion 与 Visual Studio 一起使用

> ID：426796
> 
> 赞同：14
> 
> 时间：2009-01-09T01:57:26.833
> 
> 标签：asp.net, visual-studio-2008, version-control

对于我来说，学习如何使用 Subversion 作为我的 Asp.Net Web 项目的源代码控制的最佳方式是什么？

我之前没有太多接触源代码控制；但是我对其功能有非常基本的了解，因此我正在寻找一种学习最佳实践的方法。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T02:38:01.803

[设置好 SVN](http://blogs.vertigosoftware.com/teamsystem/archive/2006/01/16/Setting_up_a_Subversion_Server_under_Windows.aspx)后，您需要设置存储库结构。一个常见的设置是有一个[Branch、Tag、Trunk 设置，](http://ariejan.net/2006/11/24/svn-how-to-structure-your-repository/)但还有其他可能适合您的需要。

设置服务器后，您将需要一个客户端。最常见的是[TortoiseSVN。](http://tortoisesvn.tigris.org/)它没有与 Visual Studio 集成，但它非常强大。

一旦你安装了 tortoise，你需要设置你的[排除列表](http://weblogs.asp.net/rchartier/archive/2005/10/17/427727.aspx)来确保你只提交与你的项目相关的文件。

然后，为了更好地了解如何使用源代码控制，请查看 Eric Sinks [Source Control HOWTO](http://www.ericsink.com/scm/source_control.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T02:02:05.573

我真的推荐 VisualSVN。它是一个很好的将 Subversion 与 Visual Studio 集成的产品。

[http://www.visualsvn.com/](http://www.visualsvn.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T02:05:15.413

[TortoiseSVN？](http://tortoisesvn.tigris.org/ "TortoiseSVN")

很容易使用...

它已集成到 Windows 外壳中，因此基本上可以在 Windows 资源管理器中运行。我不确定它是否已集成到 VisualStudio 2008 中，但无论如何它都很容易使用，我认为您不需要它.. :)

编辑：另外，它是免费的.. :) 它有一堆工具，比如 Diff/Merge.. :) 虽然我认为 WinMerge 更好.. 但这不是重点.. :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T02:48:46.977

我会推荐[ankhsvn](http://ankhsvn.open.collab.net/)与 Visual Studio 集成。我工作得很好，看起来类似于 TFS。我还使用 tortoise svn 进行 windows shell 集成。两者相得益彰。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T02:37:02.727

与 Subversion 不严格相关，但如果您需要复习基础知识，Eric Sink 有一个[出色的源代码控制入门。](http://www.ericsink.com/scm/source_control.html)不要忘记[Subversion 书](http://svnbook.red-bean.com/)是免费的，它可能是 Subversion 上最完整（但仍然非常实用）的资源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-09T17:51:49.950

和 Web 和 Jerry 一样，我一般喜欢 AnkhSvn 用于 Visual Studio 集成，也使用 TortoiseSvn 作为补充工具。（例如，Tortoise 的日志查看器仍然更高级，所以有时我会使用它。）

也就是说，我不完全确定我会建议将 AnkhSvn 用于 ASP.NET 网站项目。（我将它用于 ASP.NET Web*应用程序*项目、类库项目和控制台应用程序。）有些怪癖可能会让您感到沮丧。从 AnkhSvn 邮件列表中特别查看此消息和此线程：

[http://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=132185](http://ankhsvn.open.collab.net/ds/viewMessage.do?dsForumId=582&dsMessageId=132185)

你可能会忍受这些怪癖，也许 AnkhSvn 最终会消除它们，但就我而言，我选择转向 Web 应用程序项目（而不是网站项目），部分原因是它们与 AnkhSvn 一起工作得更好。

此外，如果您确实使用 AnkhSvn，我建议您运行其中一个夜间版本，而不是最新的稳定版本；夜间构建似乎有更少的错误并且更有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T02:03:29.003

当我为 php 开发进行第一个 svn 设置时，我没有得到任何答案......所以我想帮助你，但我不知道任何 Visual Studio 集成。

我用过乌龟（顺便说一句，它很棒，适用于 Windows，我可以肯定地帮助你）还有一些关于如何在你自己的电脑上设置一个小仓库的[教程](https://www.projects.dev2dev.bea.com/Subversion%20Clients/TortoiseSVN.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T02:37:06.690

首先熟悉源代码管理术语和概念。Eric Sink[写了一本很好](http://www.ericsink.com/scm/source_control.html)的快速入门指南。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-10T03:10:57.160

我知道有人已经说过“AnkhSVN”，但我想支持该提名。我在我的部门使用 AnkhSVN，我喜欢它。它与VS2008完全集成，几乎没有给我带来麻烦。

我也将 TortiseSVN 用于它的“回购浏览器”功能......但我很少需要再进入它了。

两者都是出色的解决方案，并且共同使用，应该是您所需要的。而且两者都是免费的。

# macos - 从 shell 获取 Mac 的 System Profiler 数据

> ID：426801
> 
> 赞同：1
> 
> 时间：2009-01-09T01:59:39.837
> 
> 标签：macos, system-profiler

如何以编程方式检索 Mac 的 System Profiler 应用程序中显示的信息？如果这很重要，我实际上对 USB 部分很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T02:27:10.780

OSX 命令行工具“ioreg”可能会满足您的需求。

> man ioreg
> 
> ioreg 显示 I/O Kit 注册表。它将层级注册表显示为倒树。

另外，如果您可以/想要使用 Cocoa，请查看[IOKit](http://developer.apple.com/documentation/devicedrivers/conceptual/IOKitFundamentals/Introduction/chapter_1_section_1.html)。IOKit 是与 USB 硬件对话的 OSX 框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T16:18:35.807

看一下[system_profiler(8)](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man8/system_profiler.8.html)命令。

# javascript - javascript竞争条件

> ID：426805
> 
> 赞同：1
> 
> 时间：2009-01-09T02:01:58.757
> 
> 标签：javascript

我正在调用一个 javascript 函数，该函数将 iframe 的不透明度设置为快速连续的未知次数。基本上这将 alpha 从 0 补间到 100。这是代码

```
 function setAlpha(value)
   {
       iframe.style.opacity = value * .01;
       iframe.style.filter = 'alpha(opacity =' + val + ')';
   } 
```

我的问题是它第一次在 ie (7) 中工作，而不是在 firefox (3.02) 中工作。在 Firefox 中我得到一个延迟，然后 contentdocument 以 100 的不透明度出现。如果我在它里面粘贴一个警报，所以我猜这是一个竞争条件（虽然我认为 javascript 是单线程的）并且 setAlpha 函数在最后一个函数完成执行之前被调用。任何帮助将不胜感激。我已经阅读了“避免 javascript 竞争条件帖子”，但我认为这符合不同的条件（另外我不知道如何将该示例应用于此示例）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T04:58:07.310

问题是大多数浏览器在 javascript 执行暂停之前不会重新绘制。

正如其他人所建议的，这可以通过使用 setTimeout 来解决。但是，我建议使用 jQuery 之类的东西或任何 javascript 库来制作动画。运行 setTimeout 100 次是个坏主意，因为动画的长度会根据浏览器和用户计算机的速度而有所不同。制作动画的正确方法是指定它们应该持续多长时间并检查系统时间以确定动画应该进行多远。

```
function fadeIn(elem,animation_length) {
   var start = (new Date()).getTime();

   var step = function() {
      window.setTimeout(function() {
        var pct = ((new Date()).getTime() - start)/animation_length;
        elem.style.opacity = Math.min(pct,1);
        if (pct < 1) 
           step();
      },20);
   };
   step();
} 
```

[编辑：] 上面的代码只是为了说明如何根据系统时钟而不是简单的间隔来制作动画。请使用库来制作动画。上面的代码在 IE 上不起作用，因为 IE 使用“filter:opacity(xx)”而不是“opacity”。库会为您解决这个问题，并提供一些不错的功能，例如完成事件，以及取消动画的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T02:20:36.443

Javascript 不会跨多个线程运行，因此您可以免受竞争条件的影响（忽略 Safari 和 Firefox 中即将推出的 Worker 线程支持：D）。

一个简单的问题，你如何多次调用 setAlpha，firefox、safari 和 opera 都合并样式表更新——例如。他们不会在 js 运行时重新绘制甚至重新计算样式信息，除非他们必须这样做。所以他们只会在 JS 完成后才绘制。

所以如果你在做

```
while(...) setAlpha(...) 
```

它们不会更新，您可能需要使用 setTimeout 来触发多个不同的调用来更新样式。

另一种方法是使用 jQuery、mootools 等库，我隐约记得它们提供了一种简化的机制来执行这些类型的动画和过渡。作为额外的奖励，我相信至少有一些库在可用时也会使用 webkit 转换和动画 css 规则（例如 Safari，我*认为*最新的 firefox 构建）

[编辑：警告：我实际上并没有使用任何这些库，我只阅读了它们应该做什么。我的网站在 lynx 中的渲染与任何其他浏览器相同，因为我无法设计出摆脱纸袋的方式：D]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T02:25:04.607

一些浏览器足够聪明，可以延迟对 DOM 的更改，直到调用堆栈为空。

这通常是一件明智的事情。例如，如果您调用一个将元素更改为黄色的函数，并立即调用将同一元素更改回其原始状态的函数，则浏览器不应该浪费时间进行更改，因为它应该发生得如此之快以至于用户察觉不到。

该`setTimeout(func, 0)`技巧通常用于强制 Javascript 延迟执行，`func`直到调用堆栈为空。

在代码中：

```
function setAlpha(opacity){
   some_element.style.opacity = opacity;
}

/** 
* This WON'T work, because the browsers won't bother reflecting the 
* changes to the element's opacity until the call stack is empty, 
* which can't happen until fadeOut() returns (at the earliest)
**/
function fadeOut(){
    for (var i=0; i<10; i++){
        setAlpha(0.1*i);    
    }
}

/** 
* This works, because the call stack will be empty between calls
* to setAlpha()
**/
function fadeOut2(){
    var opacity = 1;
    setTimeout(function setAlphaStep(){
        setAlpha(opacity);
        if (opacity > 0){
            setTimeout(setAlphaStep, 10);        
        }
        opacity -= 0.1;  
    }, 0);
} 
```

所有这一切都归结为使用为您处理这些棘手问题的众多 javascript 库之一的绝妙借口。

编辑：这是[一篇关于棘手的 Javascript 调用堆栈的好文章](http://blog.thinkature.com/index.php/2006/11/26/escaping-the-javascript-call-stack-with-settimeout/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T02:30:40.290

您使用的是 setTimeout 还是紧密循环？如果您仅使用循环来调用该函数，则切换到使用 setTimout。

例子：

```
 function setAlpha(value)
   {
       iframe.style.opacity = value * .01;
       iframe.style.filter = 'alpha(opacity =' + val + ')';
       if(value < 100 ) {
       setTimeout(function () {setAlpha(value+1)},20);
       }
   }
   setAlpha(0); 
```

因为你看到了，不仅仅是 javascript 是单线程的。这是整个该死的浏览器。如果你的 javascript 进入一个紧密循环，你就会挂起整个浏览器。所以浏览器暂停等待 javascript 完成，甚至没有机会更新屏幕，而您的代码正在快速更改一些 dom 值。

# windows - 如何获取文件放置在 Windows 目录中的日期/时间？

> ID：426809
> 
> 赞同：4
> 
> 时间：2009-01-09T02:02:44.730
> 
> 标签：windows, file, filesystems, cygwin, directory

有没有办法判断文件何时移动到某个目录？

有人问我为什么我的脚本没有在某个目录中找到文件。该文件是去年 1 月创建的，但我怀疑它是在脚本运行后放置在目录中的。有没有办法让我证实我的怀疑？

查看文件属性为我提供了创建、修改和访问的时间，前两个在将文件从一个目录移动到另一个目录时不会改变。

* * *

编辑：我已经安装了 cygwin，如果这有帮助的话。是否有确定何时创建目录条目的unix方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T02:18:49.753

如果可以显示有问题的文件是添加到该目录的最后一个文件，则可以查看目录本身的最后修改日期，因为在将文件插入目录时会修改目录。否则，我不抱太大希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T03:03:17.713

如果您使用的是 Windows XP 或 2000 或更高版本，您应该能够使用 dir /tc 来获取文件的创建时间（即复制到目录的时间）。在 Cygwin 下，可以使用 ls -lc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T11:26:11.263

在使用 cyging 时，使用 wmic 和/或为自己创建一个图层确实很有帮助。例如，像这样的函数将返回文件的实际 Windows 属性对话框中的所有内容......

```
finfo() { [[ -f "$(cygpath "$@")" ]] || { echo "bad-file";return 1;}; echo "$(wmic datafile where name=\""$(echo "$(cygpath -wa "$@")"|sed 's/\\/\\\\/g')"\" get /value)"|sed 's/\r//g;s/^M$//;/^$/d'|awk -F"=" '{print $1"=""\033[1m"$2"\033[0m"}';} 
```

这样，无论文件是如何被触摸的，您都有多种了解方式。

[CMD Line FU 信息链接](http://www.commandlinefu.com/commands/view/13031/returns-the-ntfs-windows-file-details-for-any-file-using-cygwin-bash-actual-r-click-properties-info-to-the-term)

# python - 从实时 Google App Engine 应用程序导出数据的最简单方法是什么？

> ID：426820
> 
> 赞同：6
> 
> 时间：2009-01-09T02:09:04.017
> 
> 标签：python, google-app-engine, frameworks

我对具有可用源代码的解决方案特别感兴趣（Django 独立性是一个优点，但我愿意破解我的方式）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T10:12:41.293

当然，您可以编写自己的处理程序。除此之外，您目前的选择仅限于：

*   [gae-rest](http://github.com/fczuardi/gae-rest/tree/master)，它为数据存储提供了一个 RESTful 接口。
*   [approcket](http://code.google.com/p/approcket/)，用于在 MySQL 和 App Engine 之间进行复制的工具。
*   有趣的名字[GAEBAR](http://aralbalkan.com/1784) - Google App Engine 备份和恢复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-12T16:09:03.517

**更新**：新版本的 Google AppEngine 支持本地数据导入和导出在线应用程序。在他们的术语中，这分别称为`upload_data`和`download_data`（的子命令的名称`appcfg.py`）。

请参阅 Google 文档[如何从/向 GAE 导出和导入数据](http://code.google.com/appengine/docs/python/tools/uploadingdata.html)。这可能是今天更好的方法。

我的旧答案如下：

* * *

我使用Model 类的[to_xml()](http://code.google.com/intl/ru/appengine/docs/datastore/modelclass.html#Model_to_xml)方法来导出数据存储。

```
class XmlExport(webapp.RequestHandler):
    def get(self):
        objects=MyModel.all().fetch(1000)
        xml='<?xml version="1.0" encoding="UTF-8"?>\n<site>\n'
        for o in objects:
            xml = xml + o.to_xml()
        xml = xml + '</site>'
        self.response.headers['Content-Type']='text/xml; charset=utf-8'
        self.response.out.write(xml) 
```

# algorithm - 赌场游戏行业使用什么类型的随机数生成器？

> ID：426821
> 
> 赞同：17
> 
> 时间：2009-01-09T02:09:51.487
> 
> 标签：algorithm, random

鉴于对防止赌场破产的不可预测性的极高要求，在老虎机、视频扑克机等设备中通常使用什么随机数生成算法和播种方案？

编辑：相关问题：

*   [是否存在无状态随机数生成器？](https://stackoverflow.com/questions/203382/do-stateless-random-number-generators-exist)
*   [真随机数发生器](https://stackoverflow.com/questions/37702/true-random-number-generator)
*   [替代熵源](https://stackoverflow.com/questions/300854/alternative-entropy-sources)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-10T13:51:30.847

游戏网站在选择/实施 RNG 时必须考虑很多事情。如果没有尽职调查，它可能会[出错](http://itmanagement.earthweb.com/entdev/article.php/616221)。

要获得在特定司法管辖区经营博彩网站的许可证，通常需要 RNG 已获得独立第三方的认证。第三方测试人员将分析源代码并运行统计测试（例如[Diehard](http://www.stat.fsu.edu/pub/diehard/)）以确保 RNG 随机运行。信誉良好的扑克网站通常会包含其 RNG 已通过认证的详细信息（例如：[PokerStars 的 RNG 页面](http://www.pokerstars.com/poker/rng/)）。

我参与了一些游戏项目，其中一个我必须设计和实现 RNG 部分，所以我必须调查所有这些问题。大多数扑克网站会使用一些硬件设备来获取熵，但它们不会仅仅依赖硬件。通常它将与伪 RNG (PRNG) 结合使用。这有两个主要原因。首先，硬件很慢，它只能在给定的时间段内从它正在监视的任何物理过程中提取一定数量的熵比特。其次，硬件会以不可预知的方式出现故障，而软件 PRNG 则不会。

[Fortuna](http://en.wikipedia.org/wiki/Fortuna_(PRNG))在加密强 PRNG 方面是最先进的。它可以从一个或多个外部源（例如硬件 RNG）中获取熵，并且在尝试利用或 RNG 硬件故障时具有弹性。对于游戏网站来说，这是一个不错的选择，尽管有些人可能会认为这是矫枉过正。

[Pokerroom.com](http://www.pokerroom.com)过去只使用 Java 的 SecureRandom（他们可能还在使用，但我在他们的网站上找不到详细信息）。这基本上已经足够好了，但它确实存在自由度问题。

大多数现有的 RNG 实现（例如 Mersenne Twister）没有足够的自由度，无法从给定的初始状态生成 52 张牌组的所有可能洗牌（这是我在[之前的博客文章](http://blog.uncommons.org/2008/04/10/a-java-programmers-guide-to-random-numbers-part-3-seeding/)中试图解释的内容）。

**编辑：**我的回答主要与在线扑克室和赌场有关，但同样的考虑也适用于现实世界赌场中的实体视频扑克和视频老虎机。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-09T02:57:23.920

对于赌场游戏应用程序，我认为算法的播种是最重要的部分，以确保所有“启动”的游戏不会通过相同的序列或一些可预测的序列。也就是说，导致起始位置种子的熵源是关键。除此之外，任何质量好的随机数生成器，其中每个比特位置都有约 50/50 的概率为 1/0 并且周期相对较长就足够了。例如，像[Mersenne twister PRNG](http://en.wikipedia.org/wiki/Mersenne_twister)这样的东西就具有这样的属性。

仅当可以直接查看随机生成器的实际输出时，使用加密安全的随机生成器才变得重要。例如，如果您正在监视数字生成器实际生成的每个数字 - 在查看序列中的许多数字之后 - 使用非加密生成器有关该序列的信息可能会导致建立有关生成器的所有内部状态的信息。在这一点上，如果你知道算法是什么样的，你就可以预测未来的数字，那会很糟糕。密码生成器防止逆向工程回到内部状态，因此预测未来的数字变得“不可能”。

但是，在赌场游戏的情况下，您将（或应该）看不到幕后生成的实际数字。每次生成一个随机数时——比如一个 32 位的数字——然后将使用该数字，例如，*mod 52*用于甲板洗牌算法......在那个过程中你不知道什么数字是由算法生成以洗牌该牌组。也就是说，大部分“随机性”只是被扔掉了，甚至那些正在使用的东西你也看不到。因此，没有办法对状态进行逆向工程。

回到真正的熵源来播种整个过程，这是困难的部分。有关技术的一些起点，请参阅 Wikipedia entry on [entropy 。](http://en.wikipedia.org/wiki/Entropy_(computing))

*顺便说一句，如果您确实想要从“常规”算法中对随机数进行加密序列化，一种简单的方法是按顺序获取一些随机数，将它们连接在一起，然后在它们上运行 MD5 或 SHA-1 之类的东西并得到结果是随机的，也是密码安全的。也就是说，您刚刚制作了自己的“安全”随机数生成器。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-10T14:24:19.623

我们一直在使用 Protego R210-USB TRNG（以及之前的非 USB 版本）作为赌场应用程序中的随机种子生成器，并在顶部使用 java.security.SecureRandom。我们让[瑞典国家法医科学实验室对](http://www.skl.polisen.se/en/English/)R210 进行了单独的审核，它毫无瑕疵地通过了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T02:12:54.647

您可能需要一个加密安全的伪随机生成器。有很多变种。例如，谷歌“Blum-Blum-Shub”。

这些伪随机生成器的安全特性通常是，即使攻击者可以观察到此类生成器的多项式输出，以比随机猜测更好的概率猜测下一个输出也是不可行的。此外，将这种生成器的输出与真正的随机位区分开来也是不可行的。即使攻击者知道所有算法和参数（秘密种子除外），安全性仍然有效。

生成器的安全性通常根据安全参数来衡量。在 BBS 的情况下，它是模数的大小。这与其他加密货币没有什么不同。例如，只有当密钥足够长时，RSA 才是安全的。

请注意，此类生成器的输出可能不均匀（实际上，在统计意义上可能与均匀相去甚远）。但是由于没有无限的计算能力，没有人可以区分这两种分布，因此这些生成器在大多数需要真正随机位的应用中就足够了。

但是请记住，这些加密安全的伪随机生成器通常很慢。因此，如果速度确实是一个问题，那么不太严格的方法可能更相关，例如使用 Jeff 建议的哈希函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-16T23:08:33.963

赌场老虎机以非常高的速度连续生成随机数，并在用户拉动控制杆（或点击按钮）旋转卷轴时使用最近的结果。

甚至可以使用简单的生成器。即使您知道所使用的算法，您也无法观察到它在序列中的位置，因为几乎所有结果都被丢弃了。如果您确实知道它在序列中的位置，那么您必须有毫秒或更短的时间才能利用它。

现代“机械卷轴”机器使用 PRNG 并用步进电机驱动卷轴以模拟旧式旋转和制动。

*   [http://en.wikipedia.org/wiki/Slot_machine#Random_number_generators](http://en.wikipedia.org/wiki/Slot_machine#Random_number_generators)
*   [http://entertainment.howstuffworks.com/slot-machine3.htm](http://entertainment.howstuffworks.com/slot-machine3.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T23:58:47.797

赌场不应使用伪随机数生成器，而应使用硬件生成器：[http ://en.wikipedia.org/wiki/Hardware_random_number_generator](http://en.wikipedia.org/wiki/Hardware_random_number_generator)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-17T03:51:41.020

我想现在任何事情都适用于应用程序和离岸赌博，但所有这些其他答案都是不完整的，至少对于内华达州游戏控制委员会许可的机器来说，我相信这个问题最初是关于的。

在内华达州获得许可用于游戏目的的 RNG 的技术规范在[第 14.040(2) 条](http://gaming.nv.gov/modules/showdocument.aspx?documentid=3450)中列出。

截至 2012 年 5 月 24 日，以下是 RNG 必须遵守的规则摘要：

1.  不能使用静态种子。您必须使用毫秒时间源或其他在机器上任何地方都没有外部读数的真实熵源来播种 RNG。（这有助于减少“幻数”攻击的发生率）
2.  在不进行游戏时，RNG 必须每秒至少 100 次按其顺序生成数字。（这有助于避免定时攻击）
3.  RNG 输出不能重复使用；如果有的话，它们必须只使用一次，然后扔掉。
4.  多系统机柜必须为每个游戏使用单独的 RNG 和单独的种子。
5.  使用 RNG 帮助代表玩家选择号码的游戏（例如 Lotto Quick Pick）必须在该过程中使用单独的 RNG。
6.  在游戏中真正需要它们之前，游戏不得滚动 RNG。（即您需要等到玩家选择发牌或旋转后才能生成 RNG）
7.  作为系统测试的一部分，RNG 必须通过基于 10,000 次试验的 95% 置信度卡方检验。如果此测试失败，它必须显示警告，如果连续两次失败，它必须禁用播放。
8.  它必须记住并能够报告第 7 节中描述的最后 10 次测试结果。
9.  每个可能的游戏结果都必须由 RNG 生成。举个简单的例子，[线性同余生成器](https://en.wikipedia.org/wiki/Linear_congruential_generator)实际上并不会在其范围内生成所有可能的输出，因此它们对游戏不是很有用。

此外，您的机器设计必须提交给博彩委员会并获得批准，这既昂贵又耗时。有一些[第三方公司](http://www.gaminglabs.com/)专门审核您的新 RNG，以确保它是随机的。Gaming Laboratories 发布了一套比内华达州[更严格的标准。](https://www.gaminglabs.com/pdfs/GLI-29_Card_Shufflers_and_Dealer_Shoes_v1.0_Final_(2012.07.16).pdf)他们更详细地介绍了[硬件 RNG 的局限性](https://www.gaminglabs.com/pdfs/GLI-19_Interactive_Gaming_Systems_v2.0_Final.pdf)，内华达州特别喜欢看到它之前批准的核心 RNG。这一切都会变得非常昂贵，这就是为什么许多开发人员更愿意为新游戏项目授权现有的先前批准的 RNG。

这是一个有趣的[随机数生成器攻击](https://en.wikipedia.org/wiki/Random_number_generator_attack)列表，可让您在深夜保持清醒。

仅适用于超级书呆子：大多数 USB 硬件 RNG 的来源通常是[雪崩二极管](https://en.wikipedia.org/wiki/Avalanche_diode)。但是，这种二极管产生的热噪声不是量子随机的，可以通过显着降低温度来影响雪崩二极管的随机性。

最后一点，上面有人建议只使用 Mersenne Twister 生成随机数。这是一个坏主意，除非您从其他来源获取额外的熵。[正如其创建者所描述的，](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/efaq.html)普通的 Mersenne Twister 非常不适合游戏和加密应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T03:08:46.157

如果你想正确地做到这一点，你必须得到身体 -英国国民储蓄号码选择器[ERNIE](http://en.wikipedia.org/wiki/ERNIE#ERNIE)在霓虹灯管中使用散粒噪声。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T19:05:59.710

我肯定见过在给定日期之后不允许商业运行的德国赌博机，所以我想它是一个 PNRG，有一个很长的一次性垫种子列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-06T13:24:31.503

大多数扑克网站使用硬件随机数生成器。他们还将修改输出以消除任何缩放偏差，并经常使用可以使用熵事件（用户活动、serer i/o 事件等）“搅拌”的数字“罐”。很多时候，结果数字只是索引预先生成的套牌（从卡片的排序列表开始）。

# c# - 复杂 Silverlight 游戏的最佳设计模式

> ID：426822
> 
> 赞同：3
> 
> 时间：2009-01-09T02:10:19.940
> 
> 标签：c#, silverlight, design-patterns, silverlight-2.0

你认为什么模式最适合 Silverlight 游戏？一些主要关注领域是游戏性能、实时合理更新的最大对象数量、易于开发和测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T17:58:02.033

为了便于开发和测试，应用 MVVM 模式（在 WPF 社区中广泛使用）将有很大帮助。但至于其他部分，我会阅读 Bill Reiss 的博客 ( [http://www.bluerosegames.com/silverlightbrasstacks/](http://www.bluerosegames.com/silverlightbrasstacks/) )，因为他在该领域做了很多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T23:44:45.423

其实Shawn提到的博客应该是[http://www.bluerosegames.com/silverlight-games-101/](http://www.bluerosegames.com/silverlight-games-101/)

我一直在与这个作斗争，在 XNA 游戏中我倾向于模型视图模式，但在 Silverlight 中，我喜欢使用继承和组合的组合，我在这里详细说明：

[http://www.bluerosegames.com/silverlight-games-101/post/An-improved-Silverlight-Sprite-class.aspx](http://www.bluerosegames.com/silverlight-games-101/post/An-improved-Silverlight-Sprite-class.aspx)

似乎当我在 Silverlight 中为游戏实现模型视图模式时，它所遇到的问题多于帮助。也可能是我对这种模式的理解不够好，我很想看看是否有更擅长的人看看我所做的是否适用于那种模式。

# php - 检查 PHP 中的引用者

> ID：426825
> 
> 赞同：18
> 
> 时间：2009-01-09T02:10:48.427
> 
> 标签：php, referrer

是否可以检查谁在 PHP 中进入您的网站。我有一个 Web 应用程序（用 PHP 编写），它只允许用户从某些特定网站进入。是否可以通过检查`_Request`对象获得推荐网站？如果是，如何？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-01-09T02:20:12.557

是的，但请记住，一些代理和其他东西会删除这些信息，并且很容易伪造。所以永远不要依赖它。例如，不要认为您的 Web 应用程序对[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)是安全的，因为您检查了引荐来源网址以匹配您自己的服务器。

```
$referringSite = $_SERVER['HTTP_REFERER']; // is that spelt wrong in PHP ? 
```

如果您只想允许来自特定域的请求，则需要解析一些 URL 以获取顶级域。正如我所了解的那样，这可以通过 PHP 的[parse_url()](http://au.php.net/function.parse-url)来完成。

正如[andyk](https://stackoverflow.com/users/26721/andyk)在评论中指出的那样，您还必须允许 www.example.com 和 example.com。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T05:06:03.550

虽然您可以查看`$_SERVER['HTTP_REFERER']`引用站点，但不要将农场押在上面。浏览器设置此标头，很容易被欺骗。

如果只有来自特定推荐人的人才能查看您的网站至关重要，请不要使用此方法。您必须找到另一种方法，例如基本身份验证，来保护您的内容。我并不是说你不应该使用这种技术，只是请记住它不是万无一失的。

顺便说一句，您还可以[使用 mod_rewrite](http://www.htaccess-guide.com/index.php?a=7)在 apache 级别阻止引荐来源网址。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T14:29:31.830

您不能信任推荐人。尽管来自`$_SERVER`数组，但它实际上是用户/浏览器提供的值，并且很容易伪造，使用诸如 Firefox [RefControl 插件](https://addons.mozilla.org/en-US/firefox/addon/953)之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T02:13:20.497

您需要检查 $_SERVER 数组中的“HTTP_REFERER”键。

# php - Drupal 为企业做好准备了吗？

> ID：426830
> 
> 赞同：28
> 
> 时间：2009-01-09T02:14:11.837
> 
> 标签：php, drupal, jakarta-ee, comparison, enterprise

是否有人将 Drupal 用于大规模、关键业务的企业应用程序？

Drupal 缺乏数据库事务支持是否会阻止潜在用户？

是否还有其他基于动态语言的轻量级 Web 框架可供人们用于这些类型的应用程序？JBossPortal 或 Jetspeed 等 Java 门户作为替代方案或 Drupal + J2EE 混合架构怎么样？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-01-09T03:03:51.720

**答案一：是**

*   internet_search://"企业中的 drupal" <- 使用这个确切的短语
*   [Drupal“成功故事”](http://drupal.org/success-stories)
*   [学生活动支持德克萨斯 A&M 的 170 个 Drupal 6 站点](http://drupal.org/node/314624)

**答案二：视情况而定**

肯定有人担心这个问题。Drupal 的数据库支持和模式在其演变过程中受到了一些审查和批评。如果计划中的部分或全部增强功能进入 Drupal 7，这可能会减少。这是您的三个问题中的一个，无法通过搜索互联网轻松且明确地回答。

*   [Drupal 7 数据库计划](http://www.garfieldtech.com/blog/drupal-7-database-plans)
*   [Drupal 7 数据库更新](http://www.garfieldtech.com/blog/database-7-update)

**答案三：**

*   [开源内容管理系统](http://en.wikipedia.org/wiki/Category:Open_source_content_management_systems)

**答案四：（更新：2010-02-03 11:25:04）**

*   另见：[https ://stackoverflow.com/questions/1715811](https://stackoverflow.com/questions/1715811)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-09T04:48:15.473

由于效率低下，我建议不要使用 Drupal。是的，它几乎可以做任何事情，但它做的很慢。对于除了最简单的站点之外的任何站点，drupal 都不会像自定义构建的站点那样构建高效的查询链和页面。可以用两个 SQL 连接和一个 PHP 循环手动完成的事情很可能由 Drupal 用五个连接和一个嵌套循环来处理。

也就是说，我喜欢 Drupal 并将继续在非企业环境中使用它，我不推荐任何其他在处理复杂任务时没有类似问题的 CMS。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-18T04:03:37.963

这取决于您所说的“企业”是什么意思。例如，如果您正在构建供应链管理工具，这是一个可怕的选择。

但是，如果您的意思是“流量极高的网站”或“在内容上线之前具有复杂审批工作流程的网站”或“我们可以水平扩展的网站”，那么我会说是的。从 SonyBMG 的艺术家网站套件到报纸和杂志，有很多非常大规模的 Drupal 部署。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-09T08:01:57.347

对，但是...

**注意事项**：许多基于社区的主题编码草率，这完全否定了 Drupal 为确保其 CMS 安全所做的努力。更糟糕的是，主题开发中的常见做法是找到一个您想要的主题并对其进行自定义。由于这些主题的代码可以如此自由地共享，因此一个草率的错误可能会影响由此衍生的许多其他主题。

如果您使用 Drupal（或任何其他库存 CMS），不要只聘请一些 joe-shmo 设计师为您设置主题。如果可能的话，雇佣一份视觉主题合同和一个 php 开发人员从 PSD 实际构建主题

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-09T14:21:10.957

我是最近重新启动的美国糖尿病协会 - [http://forecast.diabetes.org/](http://forecast.diabetes.org/) - 在 Drupal 中重建的首席开发人员。在发布时，我们每月获得大约 250k 的唯一身份，并且一直在显着增长。虽然对“低效查询链”的批评大多是准确的，但这是有原因的。延迟加载模式被尽可能频繁地使用。为了简化这个过程，你总是可以配置 Drupal 的缓存，有一些插件模块，然后你可以使用 APC 或 memcached 之类的东西。

无论如何，轻松扩展、定制以及（通常在不到一个小时内）向客户展示并允许他们加载内容的权衡是非常重要的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T05:07:40.893

帮助为[大众科学杂志](http://www.popsci.com/)创建了 drupal 站点，很快又为另一本杂志（我不确定我是否可以命名？），我认为它非常合适。我们还为 BMW 和[Pregnancy.org](http://www.pregnancy.org/)建立了一个内部网站。

它可能还不完美，但它非常适合。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T02:35:11.560

我的公司正在使用 Drupal 为我居住的州内最大的大学之一建立面向公众的网站。到目前为止，我们在这方面取得了相当大的成功。

我们也为许多其他客户使用[混凝土](http://www.concrete5.org/)，我认为我们通常对混凝土更满意，尽管它不像 Drupal 那样广泛使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-09T02:58:28.613

Drupal 被广泛使用，并且有一个非常大的社区支持它的发展。如果你想要一个自定义的 drupal 组件，还有一个大型[的招聘社区。](http://groups.drupal.org/jobs)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-08T11:31:00.727

我参与过一个拥有大约 100 万个节点的 Drupal 项目。我们添加了事务支持，这并不难。当然，您需要修补核心，但这对于具有良好支持和文档的企业应用程序来说不应该是一个主要问题。我在事务支持方面担任观察对程序员。我想我们花了大约一天的时间。

编辑：

我已经作为 Drupal 开发人员工作了几年了。最近，我在最佳实践和企业应用方面修改了我对 Drupal 的立场。

我不认为 Drupal 特别适合企业领域，因为：

*   Drupal 的测试框架太繁琐（领域特定的语言会很棒）
*   质量差的贡献模块太多
*   Drupal 的内容模型部分位于代码中，部分位于数据库模式中
*   Drupal 的开发者社区已经变得专注于性感软件而不是优质软件
*   Drupal 没有成熟的开发工具（drush 正在改变这一点）或内置的开发环境。
*   Drupal 开发以浏览器和 UI 为中心。
*   Drupal.org/projects、CVS 和 Drupal 的 Contrib Projects 政策的集中性质抑制了单个软件项目的发展

另外：我曾经从事的企业 Drupal 应用程序现在已被移植到 Rails 中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-09T15:05:56.280

我使用 Drupal 为一个组织构建了一个面向公众的组合站点，该站点还包括员工的内部功能，例如会议组织和内部文档管理。大多数情况下效果很好，他们对此很满意，并且很高兴不必管理两个单独的站点和/或类似共享点的东西。

我发现 Drupal 有点缺乏的一个地方是它的 LDAP 支持。您可以很好地使用它进行身份验证，但是模块中有一些错误会尝试将 LDAP 组作为角色降低，如果这能更无缝地工作，我将完全接受“Drupal 是企业就绪”的情绪，但是它还没有。

也就是说，您可以对内容类型和基于分类的访问控制做很多事情，以自定义哪些内容可用于哪些角色，这是大多数 Intranet 的要求。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-21T03:39:43.577

对于事务支持和其他重要的扩展改进，请考虑 Pressflow [http://fourkitchens.com/pressflow-makes-drupal-scale](http://fourkitchens.com/pressflow-makes-drupal-scale)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-10-14T12:34:25.070

Drupal 很棒，但效率很低。但是，正如我一直告诉我的前端开发人员，这是灵活和高度模块化的回报。

我们目前正在创建一个 Druapl 站点，我认为它是企业级的（http://stackoverflow.com/questions/161991/what-makes-an-application-an-enterprise-or-enterprise-level-application）。它有大约 40 种内容类型，15 个用户角色，与 Ubercart 集成，与外部 API 接口以进行成员身份验证等。我们的开发服务器有时会遇到困难，但在我们的暂存托管上，它是轻量级的 - 与任何类似大小的站点一样快。

确保任何定制代码开发良好，在发布前使用 Drupal 的性能特性，并确保使用质量托管。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-01-21T08:30:07.670

如果您将在此处[http://buytaert.net/tag/drupal-sites](http://buytaert.net/tag/drupal-sites)和此处[http://www.drupalsites.net/](http://www.drupalsites.net/)看到站点列表，您将看到 Drupal 被用于构建小型、中型和大型规模网站！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-09-17T12:10:17.983

我也对 Drupal 的缓慢有疑问，但似乎有一流的开发人员可以解决它。

这是一个制作公司网站的中等难度工具，它是制作企业应用程序的一个非常困难的工具。但是当谈到开源 LAMP CMS 时，并没有真正的竞争对手。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-10-11T06:37:25.097

Drupal 很棒。我已经将它用于几个中型社区和个人网站，并且到目前为止给我们带来了非常好的结果。我会支持指出我们已经看过的许多网站的模板的过度甚至低质量的评论，但是，然后，只需聘请一位优秀的编码器/设计师来为您做好这件事。

至于内存问题，有大量文章可以帮助您调整 Drupal 的数据库管理。甚至还有一个名为**[Drupal Tweaks](http://www.drupal.org/project/drupal_tweaks)**的模块可以自动为您执行此操作。以下是其项目页面的摘录：

> ...提供以下功能：
> 
> *   通过自动完成建议启用和禁用模块
> *   快速搜索节点、用户等进行一些操作
> *   从一个地方清除缓存并重建权限或同时执行这两项操作

总的来说，到目前为止，我们对 Drupal 能够快速开发最多样化的网站和企业内部网感到非常满意。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-07-08T01:23:38.683

[我们将 Drupal 用于我们网站http://www.tableausoftware.com](http://www.tableausoftware.com)的主要公司宣传册和社区区域

它使我们能够添加大量可插入的功能并自定义 UX 以满足我们的需求，这远远超出了我们使用更简单的平台（如 rails 或更适合应用程序的 django）所能做的事情。

我们仍有提升性能调整的空间，但我们每年有数百万次点击没有问题。我们利用 Solr 索引来改进搜索，并允许对站点内容和知识库以及支持论坛进行分面集成搜索。此外，我们的团队已被授权创建内容和管理网站，而不会遇到开发麻烦。

最后，随着最近社区对功能和上下文等工具的关注，除了改进的站点架构外，我们还能够管理更多无风险的部署和工作流/环境管理。

# svn - 使用 Subversion 作为项目交流工具的最佳方式是什么？

> ID：426833
> 
> 赞同：2
> 
> 时间：2009-01-09T02:15:27.887
> 
> 标签：svn, wiki, communication

如果项目允许的唯一服务器是 Subversion (svn) 服务器，那么将其用作项目通信工具的最佳方式是什么？例如，有没有一种可以将其用作 wiki、错误跟踪器和/或博客平台的好方法？

注意：服务器由 Apache 托管，并具有基本的 html 界面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T02:17:25.183

Subversion 是一个版本控制系统，为了拥有您要求的功能，您必须使用第三方插件，我建议您尝试[Trac](http://trac.edgewall.org/)，它是一个开源项目管理和软件开发项目的错误跟踪系统，并且很容易与 Subversion 集成。

它为您提供：

*   项目管理功能
*   在线存储库浏览
*   维基
*   票务系统

检查这个[演示站点](http://www.hosted-projects.com/trac/TracDemo/Demo)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T02:24:36.950

Subversion 擅长于它所做的工作，它所做的是版本源代码，尽管它对于其他基于文本的格式和二进制文件也足够好，但功能有所降低。

但是，作为一站式的项目管理工具，它还差强人​​意；在设计用于执行此操作的产品中跟踪和组织错误报告和功能请求要容易得多。同样，将实际的 wiki 引擎用作文档 wiki 也容易得多。

如果您正在寻找相当紧凑的东西，您可能会考虑[Trac](http://trac.edgewall.org/)，正如在其他地方提到的那样，它是一个不错的小问题跟踪器/wiki/项目规划工具，具有良好的源代码控制集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T02:25:00.600

不要使用它或想出一些糟糕的方案来使用 svn 作为通信工具。使用其他一些 wiki - 那里有很多，无论你在哪里托管你的 svn，你都可以放置一个 wiki。顺便说一句，我是第二个 Trac。它将与 svn 很好地集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T02:17:14.997

Subversion 是一个严格的文件版本控制系统。不是项目工具。我想你可以用它来将项目文件存储在某些目录中（例如项目计划），但无论如何它都不理想。

# javascript - 将 XmlHttpRequest 与 Twitter 一起使用时，我可以在 401 响应中抑制浏览器的登录提示吗

> ID：426834
> 
> 赞同：4
> 
> 时间：2009-01-09T02:16:37.683
> 
> 标签：javascript, jquery, ajax, authentication, twitter

我正在使用 jQuery 的 ajax 方法与[Twitter REST API](http://apiwiki.twitter.com/REST+API+Documentation)进行交互。

他们的 API 有点烦人，因为某些操作会返回 401 HTTP 状态码。在这种情况下，我只希望它失败，而不是显示登录框。

我尝试在 URL 中提供一个不正确的 user:pass 对，以防这可能会抑制对话框并让我得到一个错误响应，但这无济于事。

[这个问题](https://stackoverflow.com/questions/361467/is-there-any-way-to-suppress-the-browsers-login-prompt-on-401-response-when-usi)问了完全相同的问题，但答案却是首先解决了如何不触发 401 的问题。

（特别是这很烦人，因为这是他们请求身份验证的一个错误——该`users/show`方法不应该首先要求它。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T03:32:31.400

查看suppress_response_codes

它在页面下方的 1/4 处进行了解释： [https ://dev.twitter.com/docs/things-every-developer-should-know](https://dev.twitter.com/docs/things-every-developer-should-know)

从 Twitter 文档中（以防它再次被移动）：

> suppress_response_codes：如果存在此参数，则所有响应都将返回 200 OK 状态代码 - 甚至是错误。此参数的存在是为了适应在拦截所有非 200 响应的浏览器中运行的 Flash 和 JavaScript 应用程序。如果使用，那么客户端的工作就是通过解析响应正文来确定错误状态。请谨慎使用，因为这些错误消息可能会发生变化。

# makefile - 对基于 Windows 的 make 工具的建议

> ID：426846
> 
> 赞同：3
> 
> 时间：2009-01-09T02:21:45.270
> 
> 标签：makefile

有没有人推荐一个好的、快速的制作工具？缺点？果酱？还有什么？

跨平台工具也是可以接受的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T12:32:10.600

*   [GNU make](http://www.gnu.org/software/make/)很快，但是原生的 Windows 端口不是很完善；有很多关于使用哪个 shell 执行命令等问题。[（在GNU make 手册](http://www.gnu.org/software/make/manual/make.html)中搜索“MS-DOS” 。）
*   [SCons](http://scons.org)在 Windows 上运行良好。SCons（我上次查看时）在大型项目（数千个文件及以上）中存在一些严重的性能问题，但那是几年前的事了。
*   如果您想在 Visual Studio 中工作但仍要保持跨平台并允许在其他平台上使用其他开发工具，[CMake是一个出色的工具。](http://cmake.org)还可以为 Windows 生成 makefile，因此您不必绑定到 Visual Studio。
*   无论您如何看待 Ant，它都**不能替代**Make。这就像说 SUV 是一级方程式赛车的替代品。他们是完全不同的野兽。蚂蚁对一些事情有好处，对另一些事情也有好处。
*   有一个相对较新的工具叫做[premake](http://premake.sourceforge.net/)，你可能想研究一下。当我看的时候，它看起来很有希望，但我还没有仔细检查过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T02:28:21.107

在您的标题中提到了在 PC 上，所以我假设您的意思是 Windows？如果是这样，我建议安装[Cygwin](http://cygwin.com/)环境，如果你安装了所有的软件包，[GNU 的 make](http://www.gnu.org/software/make/)是交易的一部分。如果您使用的是 Linux 平台或 Unix 变体之一，那么您可以直接使用 GNU make。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T08:57:49.400

您可能对[Ant](http://en.wikipedia.org/wiki/Apache_Ant)、[Rake](http://rake.rubyforge.org/)、[Gant](http://docs.codehaus.org/display/GROOVY/Gant)等跨平台工具感兴趣。这些应该给你大部分，如果不是所有的 GNU make 的功能，虽然编译 C 代码可能比其他的更难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T12:21:53.430

我最近开始使用[BJam](http://www.boost.org/doc/tools/build/doc/html/jam/usage.html)。它是跨平台的，并且比 make 语法更清晰。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T12:55:05.640

如果您在 Windows 上并且拥有 .Net Framework，则可以使用 MSBuild。它与 nAnt 非常相似，并且也得到了社区的大量支持（那里有一些非常详细的社区工具包）。它的学习曲线有些陡峭，但是一旦掌握了它，它就会非常强大。

另一种选择可能是编写 PowerShell 脚本。我猜这取决于你想做什么。根据我对 makefile 的有限经验，它们通常用于编译某些内容或设置环境条件，您将在 Windows 平台上使用批处理文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T02:26:08.520

如果您需要构建基于 C 语言的项目，请查看 www.routinetools.com 上的 rtEasyMake。它是基于 Windows 的，并且非常容易设置。

# cocoa - 使用KVC生成SQL？

> ID：426848
> 
> 赞同：2
> 
> 时间：2009-01-09T02:22:38.420
> 
> 标签：cocoa, orm, key-value-coding

我想知道是否可以使用 KVC 生成 SQL。我正在做一个轻量级的 ORM；我想做这样的事情（伪代码）：

```
for key in object.getKeys
    sql = sql + formatField(key,objet.value[key]); 
```

并得到：

```
INSERT INTO Table (Field1) VALUES (1); 
```

这在Objective-C中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T03:45:36.973

键值编码实际上无法做到这一点，但如果您不想为您的对象构建特定的数据访问层，您可以使用 NSDictionary 来完成此任务。下面是数字字段的一个简单示例：

```
for ( NSString *key in [dictionary allKeys] )
{
    fields = [fields stringByAppendingFormat:@", %@", key];
    values = [values stringByAppendingFormat:@", %ld", (long)[[dictionary objectForKey:key] integerValue]];
}

NSString *sql = [NSString stringWithFormat:@"INSERT INTO Table (%@) VALUES (%@);", fields, values]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T03:51:14.730

你想要的听起来与 SQLite Persistent Objects 非常相似。这是一组objective-c 类，基本上可以完成您所说的工作。有关类和源代码的详细信息（如果您想编写自己的版本，您可能会特别感兴趣）可以在这里找到：http: [//iphonedevelopment.blogspot.com/2008/08/sqlite-persistent-objects.html](http://iphonedevelopment.blogspot.com/2008/08/sqlite-persistent-objects.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T19:32:38.583

我发现`class_copyPropertyList`这样填单。

我从 SQLite Persistent Objects 中得到它。我只需要知道如何实现关系；）

# c++ - 查看包含依赖项

> ID：426860
> 
> 赞同：3
> 
> 时间：2009-01-09T02:27:20.873
> 
> 标签：c++, code-analysis, analysis

有谁知道一种工具可以分析 C++ 代码库并显示哪些文件包含哪些头文件并突出显示冗余包含的图形表示？我使用了理解 C++，但它很昂贵，并且在大型（且封装不佳）代码库上很快变得非常笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T16:59:42.150

gcc/g++总是有*“-H”选项...*

例如：% **g++ -H foo.C**

```
'-H'
     Print the name of each header file used, in addition to other
     normal activities.  Each name is indented to show how deep in the
     '#include' stack it is.  Precompiled header files are also
     printed, even if they are found to be invalid; an invalid
     precompiled header file is printed with '...x' and a valid one
     with '...!' . 
```

然后：

*   'sed' 或 'awk' 删除前导 '...'。
*   '排序使相同的名称相邻。
*   'uniq -c' 来计算名字。
*   'grep -v' 删除单例。

如：

```
%  g++ -H  foo.C |& awk '{print $2}' | sort | uniq -c | grep -v '      1 ' 
```

或者这对你来说太 linux'y / unix'y 了吗？

（在windows下，总是有cygwin。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T02:40:41.423

尝试这个

[跟踪#include 依赖项的工具](https://stackoverflow.com/questions/42308/tool-to-track-include-dependencies)

自己编写一个听起来也像是一个非常简单的练习。添加“冗余”包括决心虽然可能更具挑战性。必须解析并遵循 ifdefs 等。但是对于仅仅创建一个依赖树来说它是非常简单的。

# java - 有没有办法在 Java 中进行 n 级嵌套循环？

> ID：426878
> 
> 赞同：30
> 
> 时间：2009-01-09T02:38:30.510
> 
> 标签：java, recursion, loops, for-loop

换句话说，我可以做类似的事情吗

```
for() {
    for {
       for {
       }
    }
} 
```

除了N次？换句话说，当调用创建循环的方法时，给它一些参数N，然后该方法会创建N个这些循环嵌套在另一个？

当然，这个想法是应该有一种“简单”或“通常”的方式来做这件事。我已经有了一个非常复杂的想法。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-09T04:43:53.953

jjnguy 是对的；递归允许您动态创建可变深度嵌套。但是，如果不做更多工作，您将无法从外层访问数据。“内嵌”案例：

```
for (int i = lo; i < hi; ++i) {
    for (int j = lo; j < hi; ++j) {
        for (int k = lo; k < hi; ++k) {
            // do something **using i, j, and k**
        }
    }
} 
```

将变量`i`、`j`和保留`k`在最里面的主体使用的范围内。

这是一个快速的技巧：

```
public class NestedFor {

    public static interface IAction {
        public void act(int[] indices);
    }

    private final int lo;
    private final int hi;
    private final IAction action;

    public NestedFor(int lo, int hi, IAction action) {
        this.lo = lo;
        this.hi = hi;
        this.action = action;
    }

    public void nFor (int depth) {
        n_for (0, new int[0], depth);
    }

    private void n_for (int level, int[] indices, int maxLevel) {
        if (level == maxLevel) {
            action.act(indices);
        } else {
            int newLevel = level + 1;
            int[] newIndices = new int[newLevel];
            System.arraycopy(indices, 0, newIndices, 0, level);
            newIndices[level] = lo;
            while (newIndices[level] < hi) {
                n_for(newLevel, newIndices, maxLevel);
                ++newIndices[level];
            }
        }
    }
} 
```

接口规定了受控操作的角色，该`IAction`操作将索引数组作为其`act`方法的参数。

在此示例中，构造函数的每个实例`NestedFor`都配置了迭代限制和最内层要执行的操作。该`nFor`方法的参数指定嵌套的深度。

这是一个示例用法：

```
public static void main(String[] args) {
    for (int i = 0; i < 4; ++i) {
        final int depth = i;
        System.out.println("Depth " + depth);
        IAction testAction = new IAction() {
            public void act(int[] indices) {
                System.out.print("Hello from level " + depth + ":");
                for (int i : indices) { System.out.print(" " + i); }
                System.out.println();
            }
        };
        NestedFor nf = new NestedFor(0, 3, testAction);
        nf.nFor(depth);
    }
} 
```

以及其执行的（部分）输出：

```
Depth 0
Hello from level 0:
Depth 1
Hello from level 1: 0
Hello from level 1: 1
Hello from level 1: 2
Depth 2
Hello from level 2: 0 0
Hello from level 2: 0 1
Hello from level 2: 0 2
Hello from level 2: 1 0
Hello from level 2: 1 1
Hello from level 2: 1 2
Hello from level 2: 2 0
Hello from level 2: 2 1
Hello from level 2: 2 2
Depth 3
Hello from level 3: 0 0 0
Hello from level 3: 0 0 1
Hello from level 3: 0 0 2
Hello from level 3: 0 1 0
...
Hello from level 3: 2 1 2
Hello from level 3: 2 2 0
Hello from level 3: 2 2 1
Hello from level 3: 2 2 2 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-01-09T02:41:20.237

听起来您可能想研究[递归。](http://en.wikipedia.org/wiki/Recursion)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-12T12:57:15.607

**2015 年编辑：**与之前的咒语一样徒劳无功，我制作了以下软件包来处理这个问题；[https://github.com/BeUndead/NFor](https://github.com/BeUndead/NFor)

用法如下

```
public static void main(String... args) {
    NFor<Integer> nfor = NFor.of(Integer.class)
            .from(0, 0, 0)
            .by(1, 1, 1)
            .to(2, 2, 3);

    for (Integer[] indices : nfor) {
        System.out.println(java.util.Arrays.toString(indices));
    }
} 
```

导致

```
[0, 0, 0]
[0, 0, 1]
[0, 0, 2]
[0, 1, 0]
[0, 1, 1]
[0, 1, 2]
[1, 0, 0]
[1, 0, 1]
[1, 0, 2]
[1, 1, 0]
[1, 1, 1]
[1, 1, 2] 
```

它还支持除 之外的条件`lessThan`。有（带`import static NFor.*;`）的用法：

```
NFor<Integer> nfor = NFor.of(Integer.class)
        .from(-1, 3, 2)
        .by(1, -2, -1)
        .to(lessThanOrEqualTo(1), greaterThanOrEqualTo(-1), notEqualTo(0)); 
```

导致：

```
[-1, 3, 2]
[-1, 3, 1]
[-1, 1, 2]
[-1, 1, 1]
[-1, -1, 2]
[-1, -1, 1]
[0, 3, 2]
[0, 3, 1]
[0, 1, 2]
[0, 1, 1]
[0, -1, 2]
[0, -1, 1]
[1, 3, 2]
[1, 3, 1]
[1, 1, 2]
[1, 1, 1]
[1, -1, 2]
[1, -1, 1] 
```

显然，支持不同长度和不同类别（所有装箱的数字基元）的循环。默认（如果未指定）是 from(0, ...).by(1, ...); 但必须指定 to(...)。

该`NForTest`文件应演示几种不同的使用方式。

这样做的基本前提是每轮简单地推进“索引”而不是使用递归。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-09T02:49:52.857

你可能想解释你真正想做的事情。

如果外部`for`循环除了控制计数什么都不做，那么嵌套`for`循环只是一种更复杂的迭代计数的方法，可以由单个`for`循环处理。

例如：

```
for (x = 0; x < 10; ++x) {
  for (y = 0; y < 5; ++y) {
    for (z = 0; z < 20; ++z) {
      DoSomething();
    }
  }
} 
```

相当于：

```
for (x = 0; x < 10*5*20; ++x) {
  DoSomething();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-09T03:24:21.087

前几天我真的在想这个。

一个可能不完美但与我认为被问到的非常接近的示例是打印目录树

```
public void printTree(directory) {
   for(files in directory) {
      print(file);
      if(file is directory) {
          printTree(file);
      }
   }
} 
```

这样，您最终会得到一堆嵌套在彼此内部的 for 循环，而无需弄清楚它们应该如何组合在一起。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T04:52:17.523

嵌套循环背后的基本思想是**乘法**。

扩展 Michael Burr 的回答，如果外部`for`循环除了控制计数之外什么都不做，那么计数的嵌套`for`循环`n`只是用单个`for`循环迭代计数乘积的更复杂的方法。

现在，让我们将这个想法扩展到列表。如果您在嵌套循环中迭代三个列表，这只是用单个循环迭代列表乘积的一种更复杂的方法。但是如何表达三个列表的乘积呢？

首先，我们需要一种表示类型乘积的方法。两种类型的乘积，`X`可以`Y`表示为泛型类型，如`P2<X, Y>`. 这只是一个由两个值组成的值，一个是 type `X`，另一个是 type `Y`。它看起来像这样：

```
public abstract class P2<A, B> {
  public abstract A _p1();
  public abstract B _p2();
} 
```

对于三种类型的产品，我们只有`P3<A, B, C>`, 显然是第三种方法。然后，通过将 List 函子分布在产品类型上来实现三个列表的乘积。所以`List<X>`,`List<Y>`和的乘积`List<Z>`就是`List<P3<X, Y, Z>>`. 然后，您可以使用单个循环遍历此列表。

[Functional Java](http://functionaljava.org)库有一种`List`类型，它支持使用一等函数和产品类型（P2、P3 等也包含在库中）将列表相乘。

例如：

```
for (String x : xs) {
   for (String y : ys) {
     for (String z : zs) {
       doSomething(x, y, z);
     }
   }
} 
```

相当于：

```
for (P3<String, String, String> p : xs.map(P.p3()).apply(ys).apply(zs)) {
   doSomething(p._1(), p._2(), p._3());
} 
```

进一步使用函数式 Java，您可以做到`doSomething`一流，如下所示。假设`doSomething`返回一个字符串：

```
public static final F<P3<String, String, String>, String> doSomething =
  new F<P3<String, String, String>, String>() {
    public String f(final P3<String, String, String> p) {
      return doSomething(p._1(), p._2(), p._3());
    }
  }; 
```

然后您可以完全消除 for 循环，并收集所有应用程序的结果`doSomething`：

```
List<String> s = xs.map(P.p3()).apply(ys).apply(zs).map(doSomething); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T02:44:08.517

问题需要更多规范。也许递归会帮助你，但请记住，递归几乎总是迭代的替代方案，反之亦然。2 级嵌套循环可能足以满足您的需求。只需让我们知道您要解决的问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-07-06T07:10:05.560

我在 Java 7 中能想到的最简洁的通用方法是

```
// i[0] = 0..1  i[1]=0..3, i[2]=0..4
MultiForLoop.loop( new int[]{2,4,5}, new MultiForLoop.Callback() { 
    void act(int[] i) { 
        System.err.printf("%d %d %d\n", i[0], i[1], i[2] );
    }
} 
```

或者在 Java 8 中：

```
// i[0] = 0..1  i[1]=0..3, i[2]=0..4
MultiForLoop.loop( new int[]{2,4,5}, 
   i -> { System.err.printf("%d %d %d\n", i[0], i[1], i[2]; } 
); 
```

支持这一点的实现是：

```
/**
 * Uses recursion to perform for-like loop.
 *  
 * Usage is 
 *  
 *    MultiForLoop.loop( new int[]{2,4,5}, new MultiForLoop.Callback() { 
 *        void act(int[] indices) { 
 *            System.err.printf("%d %d %d\n", indices[0], indices[1], indices[2] );
 *        }
 *    }
 *  
 * It only does 0 - (n-1) in each direction, no step or start 
 * options, though they could be added relatively trivially.
 */
public class MultiForLoop {

    public static interface Callback {
        void act(int[] indices);
    }

    static void loop(int[] ns, Callback cb) {
        int[] cur = new int[ns.length];
        loop(ns, cb, 0, cur);
    }

    private static void loop(int[] ns, Callback cb, int depth, int[] cur) {
        if(depth==ns.length) {
            cb.act(cur);
            return;
        }

        for(int j = 0; j<ns[depth] ; ++j ) {
            cur[depth]=j;
            loop(ns,cb, depth+1, cur);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-19T13:25:54.880

如果您有一个通用的嵌套循环结构，例如：

```
for(i0=0;i0<10;i0++)
    for(i1=0;i1<10;i1++)
        for(i2=0;i2<10;i2++)
            ....
                for(id=0;id<10;id++)
                    printf("%d%d%d...%d\n",i0,i1,i2,...id); 
```

其中`i0,i1,i2,...,id`是循环变量，`d`是嵌套循环的深度。

等效递归解决方案：

```
void nestedToRecursion(counters,level){
    if(level == d)
        computeOperation(counters,level);
    else
    {
        for (counters[level]=0;counters[level]<10;counters[level]++)
            nestedToRecursion(counters,level+1);
    }
}
void computeOperation(counters,level){
    for (i=0;i<level;i++)
        printf("%d",counters[i]);
    printf("\n");
} 
```

counters是一个大小数组，分别`d`代表对应的变量。`i0,i1,i2,...id``int counters[d]`

```
nestedToRecursion(counters,0); 
```

类似地，我们可以转换其他变量，如递归的初始化或使用数组结束，即我们可以有`initial[d], ending[d]`.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-05-30T13:04:23.783

基于流的 Java 8 解决方案：

```
public static Stream<int[]> nest(Supplier<IntStream> first, Supplier<IntStream>... streams) {
    Stream<int[]> result = first.get().mapToObj(i -> new int[]{i});

    for (Supplier<IntStream> s : streams) {
        result = nest(result, s);
    }

    return result;
}

private static Stream<int[]> nest(Stream<int[]> source, Supplier<IntStream> target) {
    return source.flatMap(b -> target.get().mapToObj(i -> {
        int[] result = new int[b.length + 1];
        System.arraycopy(b, 0, result, 0, b.length);
        result[b.length] = i;
        return result;
    }));
} 
```

另一个不是线程安全的，但避免额外的副本：

```
public static Stream<int[]> nest(Supplier<IntStream>... streams) {
    final int[] buffer = new int[streams.length];
    Stream<int[]> result = Stream.of(buffer);

    for (int n = 0; n < streams.length; n++) {
        result = nest(result, streams[n], n);
    }

    // Might need to perform a copy here, if indices are stored instead of being consumed right away.
    // return result.map(b -> Arrays.copyOf(b, b.length));
    return result;
}

private static Stream<int[]> nest(Stream<int[]> source, Supplier<IntStream> target, int index) {
    return source.flatMap(b -> target.get().mapToObj(i -> {
        b[index] = i;
        return b;
    }));
} 
```

用法：

```
nest(
    () -> IntStream.range(0, 2),
    () -> IntStream.range(0, 2), 
    () -> IntStream.range(0, 3))
    .forEach(indices -> System.out.println( Arrays.toString(indices))); 
```

输出：

```
[0, 0, 0]
[0, 0, 1]
[0, 0, 2]
[0, 1, 0]
[0, 1, 1]
[0, 1, 2]
[1, 0, 0]
[1, 0, 1]
[1, 0, 2]
[1, 1, 0]
[1, 1, 1]
[1, 1, 2] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-20T01:27:42.480

```
public void recursiveFor(Deque<Integer> indices, int[] ranges, int n) {

    if (n != 0) {

       for (int i = 0; i < ranges[n-1]; i++) {

          indices.push(i);
          recursiveFor(indices, ranges, n-1);
          indices.pop();
       }
    }

    else {

       // inner most loop body, access to the index values thru indices
       System.out.println(indices);
    }
} 
```

示例调用：

```
int[] ranges = {2, 2, 2};

recursiveFor(new ArrayDeque<Integer>(), ranges, ranges.length); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-08-22T10:22:19.333

```
String fors(int n){
StringBuilder bldr = new StringBuilder();
for(int i = 0; i < n; i++){
    for(int j = 0; j < i; j++){
        bldr.append('\t');
    }
    bldr.append("for() {\n");
}
for(int i = n-1; i >= 0; i--){
    for(int j = 0; j < i; j++){
        bldr.append('\t');
    }
    bldr.append("}\n");
}
return bldr.toString();
} 
```

创建一个漂亮的嵌套 for 循环骨架 ;-) 不是很严重，我知道递归解决方案会更优雅。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-11T18:50:07.500

我第一次回答问题，但我觉得我需要分享这个信息

```
for (x = 0; x < base; ++x) {
  for (y = 0; y < loop; ++y) {
      DoSomething();
  }
} 
```

相当于

```
for (x = 0; x < base*loop; ++x){
    DoSomething();
} 
```

因此，如果您想要 n 个嵌套，可以使用除法来编写`base`，`loop`因此它看起来像这样简单：

```
char[] numbs = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'};
     public void printer(int base, int loop){
       for (int i = 0; i < pow(base, loop); i++){
         int remain = i;
         for (int j = loop-1; j >= 0; j--){
           int digit = remain/int(pow(base, j));
           print(numbs[digit]);
           remain -= digit*pow(base, j);
         }
         println();
       }
     } 
```

所以如果你输入`printer(10, 2);`它会打印出来：

```
00
01
02
03
04
...
97
98
99 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-18T10:35:27.450

这对我来说真的很好 - 我必须从存储在 myAlternativePaths 中的一些替代方案中进行选择，基本思想是我试图构建下一个选择，并且当一个维度/组件中出现“溢出”时，你只需重新初始化该维度并将一个添加到下一个。

```
public boolean isValidAlternativeSelection (int[] alternativesSelected) {
    boolean allOK = true;
    int nPaths= myAlternativePaths.size();
    for (int i=0; i<nPaths; i++) {
        allOK=allOK & (alternativesSelected[i]<myAlternativePaths.get(i).myAlternativeRoutes.size());
    }
    return allOK;
}

public boolean getNextValidAlternativeSelection (int[] alternativesSelected) {
    boolean allOK = true;
    int nPaths= myAlternativePaths.size();
    alternativesSelected[0]=alternativesSelected[0]+1;
    for (int i=0; i<nPaths; i++) {
        if (alternativesSelected[i]>=myAlternativePaths.get(i).myAlternativeRoutes.size()) {
            alternativesSelected[i]=0;
            if(i<nPaths-1) {
                alternativesSelected[i+1]=alternativesSelected[i+1]+1;
            } else {
                allOK = false;
            }
        }
 //       allOK=allOK & (alternativesSelected[i]<myAlternativePaths.get(i).myAlternativeRoutes.size());
    }
    return allOK;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-03T00:10:35.213

我也试图解决这个问题，最终创造了这个简单的[解决方案](https://github.com/0x100/n-loops)。

例如，假设我们需要动态生成这样的循环：

```
for (int i = 0; i < 2; i++) {
    for (int j = 1; j < 3; j++) {
        for (int k = 2; k < 4; k++) {
            System.out.println(Arrays.asList(i, j, k));
        }
    }
} 
```

因此，我们可以使用这样的构建器来实现它：

```
new Loops()
    .from(0).to(2)
    .from(1).to(3)
    .from(2).to(4)
    .action(System.out::println); 
```

执行结果：

```
[0, 1, 2]
[0, 1, 3]
[0, 2, 2]
[0, 2, 3]
[1, 1, 2]
[1, 1, 3]
[1, 2, 2]
[1, 2, 3] 
```

我希望它对其他人也有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-22T03:40:41.203

如果您想处理数据而不仅仅是数字。可以尝试以下解决方案：

```
class WordGenerator {
    //My custom spell checker. 
    //It returns an empty string if the word is not there in dictionary
    public static MySpellChecker spellCheck;

    public static void main(String args[]) throws Exception {
        spellCheck = new MySpellChecker();

        List<String> consonants = List.of("c","t");
        List<String> vowels = List.of("a","o","");

        //adding to this list will increase nesting
        List<List<String>> input = new ArrayList<>();
        input.add(consonants);
        input.add(vowels);
        input.add(vowels);
        input.add(consonants);

        MyForLoop fLoop = new MyForLoop(input.listIterator(),       //for nesting loops
                                        new ArrayList<String>(),    //loop state
                                        //action to perform in innermost loop
                                        (state)->spellCheck.check(String.join("", state))); 
        //start execution
        fLoop.accept("");

        //print results
        System.out.println("No of iterations: " + fLoop.getResult().size());
        System.out.println("\nFound words: " + String.join(", ", fLoop.getResult()));
    }
}

class MyForLoop implements Consumer<String> {
    private static List<String> result = new ArrayList<>();

    private ListIterator<List<String>> itr;
    private Function<List<String>, String> action;
    private List<String> state = new ArrayList<>();

    public MyForLoop(ListIterator<List<String>> itr, List<String> collected, Function<List<String>, String> action) {
        this.itr = itr;
        this.action = action;
        state = new ArrayList<>(collected);
    }

    @Override
    public void accept(String s) {
        if(!s.isBlank())
            state.add(s);

        if(itr.hasNext()) {
            itr.next().stream().forEach(new MyForLoop(itr, state, action));
            if(!state.isEmpty())
                state.remove(state.size()-1);
            itr.previous();
        } else {
            result.add(action.apply(state));
            state.remove(state.size()-1);
        }
    }

    public static List<String> getResult() {
        return result;
    }
} 
```

输出：

```
No of iterations: 36

Found words: , , , , , cat, , coat, , coot, , cot, , , , , , , , , , , , tat, , toat, , toot, toc, tot, , , , , , 
```

这里的代码生成以'c'和't'开头和结尾的单词，它们之间最多有两个元音。您更改列表中的顺序`input`以更改单词创建。

* * *

该`MyForLoop`对象维护一个`state`列表，该列表保存当前的迭代状态。状态列表的每个元素给出嵌套 for 循环的相应级别的状态。
状态可用于`action`，在最内层循环中执行。

* * *

为了使演示代码简短明了，我偷工减料。它可以通过多种方式进行改进。
我使用 Jazzy 库来检查拼写。

```
 <dependency>
    <groupId>net.sf.jazzy</groupId>
    <artifactId>jazzy</artifactId>
    <version>0.5.2-rtext-1.4.1-2</version>
</dependency> 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-02-18T08:18:36.260

为了简洁起见，我将代码放在这里：

```
void variDepth(int depth, int n, int i) {
    cout<<"\n d = "<<depth<<" i = "<<i;
    if(!--depth) return;
    for(int i = 0;i<n;++i){
        variDepth(depth,n,i);
    }
}
void testVariDeapth()
{   variDeapth(3, 2,0);
} 
```

输出

```
 d = 3 i = 0
 d = 2 i = 0
 d = 1 i = 0
 d = 1 i = 1
 d = 2 i = 1
 d = 1 i = 0
 d = 1 i = 1 
```

# c# - 用户界面进程 (UIP) 应用程序块是否兑现了它的承诺？

> ID：426879
> 
> 赞同：0
> 
> 时间：2009-01-09T02:39:25.063
> 
> 标签：c#, .net

我正在开发一个项目，该项目需要生成一个既可以作为独立应用程序又可以作为 Web 应用程序运行的应用程序。我们正在考虑使用[Microsoft Patterns & Practices 网站上](http://msdn.microsoft.com/en-us/practices/default.aspx)提供的[用户界面进程 (UIP) 应用程序块](http://msdn.microsoft.com/library/ms979217.aspx)。

应用程序块声称它可以使这成为可能：

> 此块是一个可重用的代码组件，它建立在 Microsoft .NET Framework 的功能之上，可帮助您创建基于 Web 窗体和 Windows 窗体的应用程序。

在我们投入太多时间进行进一步调查之前，我想知道是否有人有使用 UIP 应用程序块创建 Web 窗体和基于 Windows 窗体的应用程序的经验。在使用 UIP 时，您在将业务逻辑与用户界面逻辑分离方面取得了多大的成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-13T04:59:17.467

我目前正在使用 UIP 开展一个项目。我不会说这很糟糕，因为我在这上面投入的时间不超过一天。但让我表达一种感觉：今天是星期六，我的朋友们在外面喝啤酒。我在办公室，努力使用它并阅读了大约 50 页的文档。由于使用的节点数量众多，该应用程序的 web.config 非常庞大。我真的非常非常难过，甚至我也喜欢微软和编程，因为多亏了他们，我才有了一份工作来支付房租……我现在真的很沮丧。我通常是一个非常快乐的人。

我宁愿使用 Aspnet MVC，它更干净、更新，并且由社区输入构建。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T05:09:46.803

几年前，我使用 UIP 创建了一个报告保险索赔的应用程序。我发现它增加了复杂性而没有任何真正的好处。

UIP 的目的不是让您的业务逻辑和 UI 分开。它的目标是允许您为 asp.net 和 winforms 重新使用您的 UI 逻辑。这在实践中效果并不好，因为桌面应用程序和网络应用程序是两种完全不同的动物。

我在 asp.net 端也遇到了很多与会话状态相关的错误（我不记得细节了，抱歉）。我最终厌倦了从 Web 应用程序中删除所有与 UIP 相关的代码。在我这样做之后，它使代码更容易理解和调试。

如果您正在寻找一种将 UI 与业务逻辑分开的方法，那么您应该查看 CSLA.net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-14T09:01:35.323

UIP 真的很烂，我在使用它时有过可怕的经历。如果您想要下载[Northwind Starter Kit](http://nsk.codeplex.com/)之后所需要的架构类型的一个很好的示例。

它展示了使用不同的后端/数据库访问技术（SQL Server/Access/NHibernate）和不同的前端（ASP.NET MVC/Monorail/Windows Forms/WPF）。

它还有一本相关的书[——“为企业设计应用程序”](http://www.microsoft.com/learning/en/us/books/12863.aspx)

# asp.net - 如何控制 MembershipUser.ResetPassword() 格式

> ID：426888
> 
> 赞同：10
> 
> 时间：2009-01-09T02:43:14.493
> 
> 标签：asp.net, passwords, asp.net-membership, reset

是否可以控制通过调用 MembershipUser.ResetPassword() 自动生成的密码格式？

我希望能够在生成的密码中允许或不允许某些特殊字符。

我正在使用密码格式为 Hashed 的 SqlMembershipProvider。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-09T14:09:22.167

您可能希望分两步执行此操作，正如 Mark Fitzpatrick 在此处确定的那样：http: [//bytes.com/groups/net-asp/689452-how-reset-users-password-without-having-use-passwordrecovery#post2740740](http://bytes.com/groups/net-asp/689452-how-reset-users-password-without-having-use-passwordrecovery#post2740740)

首先重置密码，然后立即将其更改为您喜欢的格式。显然，不建议使用 Mark 示例中的固定字符串 - 您需要实现[一些随机字符串生成器](http://www.google.com/search?hl=en&safe=off&rlz=1C1GGLS_enUS291US301&q=.net+random+string+generator&btnG=Search)。

```
user.ChangePassword(user.ResetPassword(), MyMethodToGenerateRandomPassword()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:00:08.120

今天，您还可以使用该`Membership.GeneratePassword`方法并传递一个`MinRequiredPasswordLength`或使用 Web.config 中已经定义的属性，如下所示：

```
 var newPassword =
                   // 0 = Number of non alphanumeric characters
                  Membership.GeneratePassword(Membership.MinRequiredPasswordLength, 0);

  user.ChangePassword(user.ResetPassword(), newPassword); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T02:55:50.990

看看这篇文章 -[在 SqlMembershipProvider 中更改自动生成的密码格式](http://www.sidesofmarch.com/index.php/archive/2006/10/16/changing-the-autogenerated-password-format-in-the-sqlmembershipprovider/)。

> 我想出了一种快速破解 SqlMembershipProvider 以生成不太复杂的密码的方法，它就像创建一个从 SqlMembershipProvider 继承的新提供程序类一样简单，然后覆盖 GeneratePassword 方法。

这不是一个完全解决的解决方案，但它可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T03:12:03.500

我希望可以使用一些配置设置，但覆盖 GeneratePassword() 方法适用于我的情况。

我们已经有一个加密实用程序类，可以生成随机密码字符串，所以它是一个非常快速的更改。

# c# - 在哪里划清界限 - 是否有可能过于喜欢 LINQ？

> ID：426889
> 
> 赞同：22
> 
> 时间：2009-01-09T02:43:35.227
> 
> 标签：c#, .net, vb.net, linq

我最近发现了 LINQ 并且喜欢它。我发现在很多情况下使用它比手写版本更具表现力，但一位同事发表了关于我滥用这项技术的评论，这让我怀疑自己。我的观点是，如果一项技术有效且代码优雅，那么为什么不使用它呢？那是错的吗？我可以花额外的时间“手写”写出进程，虽然生成的代码可能会快几毫秒，但它的代码是 2-3 倍，因此可能存在错误的可能性要高 2-3 倍。

我的观点有错吗？ *我应该*用手写而不是使用 LINQ 来编写我的代码吗？这不是 LINQ 的设计目的吗？

编辑：我说的是 LINQ to 对象，我不经常使用 LINQ to XML，我也使用过 LINQ to SQL，但我并不像 LINQ to 对象那样迷恋这些风格。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-09T02:51:17.817

我必须同意你的观点——如果写起来更高效、更优雅，那么几毫秒。编写额外的代码为错误提供了更多空间，这是需要测试的额外代码，最重要的是需要维护的额外代码。想想那些将在你身后维护你的代码的人——他们会感谢你编写优雅易读的代码，然后再感谢你编写速度快几毫秒的代码！

但请注意，当您考虑到更大的情况时，这几毫秒的成本可能会很大。如果那几毫秒是数千次重复循环的一部分，那么毫秒加起来很快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-09T05:04:08.297

是的，你可能太喜欢 LINQ - [Single Statement LINQ RayTracer](http://tirania.org/blog/archive/2007/Nov-16.html)

你在哪里画线？我想说尽可能多地使用 LINQ，因为它使代码更简单、更易于阅读。

当 LINQ 版本变得比非 LINQ 版本更难理解时，就该交换了，反之亦然。编辑：这主要适用于 LINQ-To-Objects，因为其他 LINQ 风格有自己的好处。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-09T03:01:30.913

不可能太喜欢 Linq to Objects，这是一项非常棒的技术！

但严肃地说，任何使您的代码易于阅读、易于维护并完成其预期工作的任何东西，如果您不尽可能多地使用它，那将是愚蠢的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-09T02:47:52.377

LINQ 应该用于使来自各种来源的数据的过滤、排序、聚合和操作尽可能直观和富有表现力。我想说，只要你觉得它是最整洁、最有表现力和最自然的语法来做你想做的事，就用它，不要为此感到内疚。

*如果您开始编写文档，那么可能是时候重新考虑您的立场了。*

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-09T02:48:32.173

在这种情况下，记住优化的黄金法则很重要：

1.  不要这样做
2.  对于专家：不要这样做

您绝对**不**应该担心“滥用”linq，除非您可以明确地将其识别为性能问题的原因

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-01-09T02:51:45.317

像任何东西一样，它可以被滥用。只要您远离明显的错误决定，例如

```
var v = List.Where(...);
for(int i = 0; i < v.Count(); i++)
{...} 
```

并了解不同的执行方式是如何工作的，那么它很可能不会比普通方式慢很多。根据 Anders Hejlsburg（C# 架构师）的说法，C# 编译器在优化循环方面并不是特别擅长，但它在优化和并行化表达式树方面做得更好。随着时间的推移，它可能比循环更有效。List<> 的 ForEach 版本实际上与 for 循环一样快，尽管我找不到证明这一点的链接。

PS 我个人最喜欢的是 ForEach<> 的鲜为人知的表亲 IndexedForEach（利用扩展方法）

```
List.IndexedForEach( (p,i) => 
 {
     if(i != 3)
        p.DoSomething(i);
 }; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-10T18:08:10.173

LINQ 可以像艺术一样。继续使用它来使代码美观。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T02:46:22.693

您正在通过谈论编写 2-3 倍的代码以获得几毫秒的性能来回答您自己的问题。我的意思是，如果您的问题域需要加速，那么可以，如果不是，则可能不需要。但是，它真的只有几毫秒的性能还是 > 5% 或 > 10%。这是基于个案的价值判断。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T13:12:56.413

在哪里画线？

[好吧，我们已经知道在 linq](https://stackoverflow.com/questions/185072/learning-linq-quicksort)中实现自己的快速排序是一个坏主意，至少与仅使用 linq 的 orderby 相比。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T15:37:57.543

我发现使用 LINQ 加快了我的开发速度，并且更容易避免循环可能引入的愚蠢错误。我曾经遇到过 LINQ 的性能很差的情况，但那是当我使用它从具有数百万个节点的树结构中获取 excel 文件的数据之类的事情时。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-09T15:43:08.093

虽然我看到有一种观点认为 LINQ 可能会使语句更难阅读，但我认为我的方法现在与他们正在解决的问题严格相关并且不花时间包括查找在内的事实远远超过了这一点具有专用查找功能的循环或杂乱类。

习惯使用 LINQ 做事需要一点时间，因为循环查找等一直是主要选项。我将 LINQ 视为另一种语法糖，它可以以更优雅的方式完成相同的任务。现在，我仍然在处理繁重的关键任务代码中避免使用它——但这只是在性能随着 LINQ 的发展而提高之前。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-09T20:13:29.733

我对 LINQ 唯一关心的是它的连接实现。

正如我在尝试回答[这个问题](https://stackoverflow.com/questions/387772/does-linq-use-datarelations-to-optimize-joins)时确定的那样（并且[在这里](http://msdn.microsoft.com/en-us/library/bb387080.aspx)得到了确认），LINQ 生成的执行连接的代码（我猜肯定是）很幼稚：对于列表中的每个项目，连接通过连接列表执行线性搜索以查找匹配项。

将连接添加到 LINQ 查询实质上会将线性时间算法转换为二次时间算法。即使你认为过早的优化是万恶之源，从 O(n) 到 O(n^2) 的跳跃也应该让你停下来。（如果你通过一个加入的项目加入另一个集合，也是 O(n^3)。）

解决这个问题相对容易。例如，这个查询：

```
var list = from pr in parentTable.AsEnumerable()
join cr in childTable.AsEnumerable() on cr.Field<int>("ParentID") equals pr.Field<int>("ID")
where pr.Field<string>("Value") == "foo"
select cr; 
```

类似于在 SQL Server 中连接两个表的方式。但是在 LINQ 中效率非常低：对于`where`子句返回的每个父行，查询都会扫描整个子表。（即使你加入一个未索引的字段，SQL Server 也会构建一个哈希表来加速加入，如果可以的话。这有点超出 LINQ 的薪酬等级。）

但是，此查询：

```
string fk = "FK_ChildTable_ParentTable";
var list = from cr in childTable.AsEnumerable()
where cr.GetParentRow(fk).Field<string>("Value") == "foo"
select cr; 
```

产生相同的结果，但它只扫描一次子表。

如果您使用 LINQ to 对象，同样的问题也适用：如果您想连接两个任意大小的集合，您可能需要考虑实现一种更有效的方法来查找连接的对象，例如：

```
Dictionary<Foo, Bar> map = buildMap(foos, bars);
var list = from Foo f in foos
where map[f].baz == "bat"
select f; 
```

# mfc - SDI框架中如何根据主机改变视图大小？

> ID：426893
> 
> 赞同：0
> 
> 时间：2009-01-09T02:45:14.207
> 
> 标签：mfc, view, sdi

我想根据 SDI 框架中主机的大小来设置视图的大小。也就是说当我改变大型机的大小时，视图的大小也会随之改变，客户区也随之改变。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T03:40:41.710

只需添加一个**OnSize**方法来处理视图的大小：

```
void CMyFrame::OnSize(UINT nType, int cx, int cy)
{
  m_MyView.SetWindowPos(NULL, 0, 0, cx, cy, SWP_NOMOVE|SWP_NOACTIVATE|SWP_NOZORDER);
} 
```

# windows - 原生 Windows Mobile 应用程序的编程签名

> ID：426895
> 
> 赞同：1
> 
> 时间：2009-01-09T02:46:27.093
> 
> 标签：windows, windows-mobile, signing, certificate-authority

是否有任何证书颁发机构允许对 Windows 移动应用程序进行编程签名？目前我的团队使用 Geotrust。我们的构建过程如下所示：

*   构建应用
*   带有多步骤工具的“预签名”应用程序（
*   填写表格并在 geotrust 网站上上传“预签名”应用程序
*   下载签名的应用程序
*   重复

必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-12T02:04:32.270

[Verisign](http://www.verisign.com/products-services/security-services/code-signing/microsoft-smartphone-code-signing/features-benefits.html)提供了一个 SOAP API，您可以在使用“新”签名过程时自动执行 M2M 签名。

我工作的公司使用旧方法使用 Verisign，我们构建了一个应用程序来自动填写和上传网络论坛，效果很好。在新的 M2M 签名规则下，我们正在重写以使用 SOAP API。

# windows - VIM Ctrl-V 与 Windows 粘贴冲突

> ID：426896
> 
> 赞同：122
> 
> 时间：2009-01-09T02:47:24.140
> 
> 标签：windows, vim

我在 Windows 中使用 VIM。问题是我想`Ctrl``V`用作视觉模式。但是，此键与 Windows 粘贴有冲突。如何将此键重置为 VIM 可视模式而不是粘贴。我更喜欢在我的 _vimrc 配置文件中设置它。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2009-01-09T02:55:31.317

从[VIM 文档](http://vimdoc.sourceforge.net/htmldoc/gui_w32.html#CTRL-V-alternative)：

> 由于`CTRL``V`用于粘贴，因此您不能使用它来启动逐块可视化选择。你可以`CTRL``Q`改用。您还可以`CTRL``Q`在插入模式和命令行模式下使用来获取`CTRL``V`. 但`CTRL``Q` 在用于控制流时不适用于终端。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-01-09T03:29:33.730

检查你的 _vimrc 文件，看看它是否来自 mswin.vim。该脚本将 ^v 映射到粘贴。您可以在 _vimrc 文件中删除该行或直接在 mswin.vim 上禁用映射命令。

在 vim 上执行 :help 以获取更多信息。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2011-10-28T16:37:48.113

像在 Unix 中一样工作的可视模式（和其他东西）需要 JOP 和 Windows 程序员的建议。

在 Windows 上的 GVim 中，转到编辑菜单，单击启动设置，然后注释掉特定于 Windows 的垃圾（使用 vimrc 注释字符，这是一个双引号）。mswin.vim 文件是指定`ctrl`-`v`覆盖的地方，behaviour mswin 选项使箭头键不会像您期望的那样应用运动（它也会改变鼠标选择行为）。

```
"source $VIMRUNTIME/mswin.vim
"behave mswin 
```

我也喜欢在其中添加黑色背景颜色方案，因此它看起来更像我在终端中看到的（并且因为浅色背景在纸上很棒，但在背光屏幕上很糟糕）： `colorscheme koehler`

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-01-09T03:27:06.933

如果 _vimrc 中的这一行给您带来困扰：

```
behave mswin 
```

然后删除该行。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-05-16T14:42:27.620

我喜欢到处都使用相同的击键，所以我在我的 .vimrc 中使用它来覆盖 mswin.vim：

```
if has('win32')
  " Avoid mswin.vim making Ctrl-v act as paste
  noremap <C-V> <C-V>
endif 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-12-02T14:15:44.690

这是解决此问题的现代解决方案。它适用于 Vim/Neovim 的终端版本，而不是 GUI 版本。如果您使用 Microsoft 的新式[Windows 终端](https://github.com/microsoft/terminal)（我强烈推荐它。），您可以重新定义它的键绑定以发挥您的优势。设置文件的以下部分最初**未被**注释掉。如果你把它注释掉，正如我所展示的，它`Ctrl+V`会成为我们都知道和喜爱的 Vim 中的矩形视觉选择键。

```
// Copy and paste are bound to Ctrl+Shift+C and Ctrl+Shift+V in your defaults.json.
// These two lines additionally bind them to Ctrl+C and Ctrl+V.
// To learn more about selection, visit https://aka.ms/terminal-selection
//{
//    "command": {
//        "action": "copy",
//        "singleLine": false
//    },
//    "keys": "ctrl+c"
//},
//{
//    "command": "paste",
//    "keys": "ctrl+v"
//} 
```

现在这是奇怪的部分。我希望这会改变`Ctrl+V`终端中 Vim 外部的行为，所以我检查了。它仍然会粘贴，但它与 Ctrl+Shift+V 粘贴不同。然而，在 Vim 内部，一切都很好：`Ctrl+V`对于矩形选择；和`"*P`, `Ctrl+Shift+V`, 或`Right Mouse Button`用于从剪贴板粘贴。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-01-09T02:53:43.160

我不确定你能做些什么。不过，您可以改用`Ctrl``Q`。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-05-04T14:58:22.267

jop 的建议（在默认的 _vimrc 文件中查找 mswin.vim）和“Windows 程序员”的建议（去掉“behave mswin”行）对我来说就像是一种魅力。

（我的代表太低，无法投票或合并它们 - 有人为我清理这个，否则我会在我的代表更高时回来）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-02-06T15:47:49.507

对于 Windows 终端 (PowerShell)，单击 Shell-Tab 旁边的下拉箭头并选择设置。在您的`"actions"`部分中，`settings.json`您可以注释掉以下几行，以便他们说：

`// { "command": {"action": "copy", "singleLine": false }, "keys": "ctrl+c" },`

和

`// { "command": "paste", "keys": "ctrl+v" },`

这不受粘贴`Ctrl+V`和`Ctrl+C`复制的限制。但是，由于`defaults.json`您仍然可以使用此解决方案进行复制和粘贴`Shift+Ctrl+C`。`Shift+Ctrl+V`

请参阅 Phil R 的评论。首先没有看到他的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-21T07:22:44.680

这个问题的正确答案是 stevesliva 提到的评论。

对于 CTRL+V 进行粘贴的 Windows 上的 VM：

只需执行 **CNTL+SHIFT+V** ... 即可立即工作，并且与原始 CTRL+V 视觉选择类似。

# scripting - 根据定义，脚本是“开源”的吗？

> ID：426932
> 
> 赞同：9
> 
> 时间：2009-01-09T03:04:06.650
> 
> 标签：scripting, lua

前几天，我为一个朋友的魔兽世界插件调整了一个脚本。他对您可以编辑插件感到惊讶——它们是“开源的”。（《魔兽世界》插件是用 Lua 脚本语言编写的）我发现自己想说“当然可以——所有脚本都是‘开源’的。”

真的吗？当然，有些脚本可以编译成字节码，但不是几乎所有的脚本都被解释了吗？也就是说，根据定义，解释脚本的设备不需要“源”吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-09T03:09:11.837

这取决于您如何解释“开源”。

当然，你有源代码，但通常这并不是开源的意思。通常开源是指许可。拥有“开源”意味着您可以出于任何目的自由修改源代码，包括在许多情况下重新分发它。

仅仅拥有源代码并不能使其在一般软件意义上成为开源。如果脚本是受版权保护的，那么它在技术上是“封闭的”，除非明确给出了开源许可证。您可以修改它，但如果您在未经作者许可的情况下重新分发它，您将违反他们默示（或明确注册）的版权。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-09T03:09:07.187

[开源](http://www.opensource.org/docs/definition.php)是关于许可的。脚本可以拥有作者（或版权所有者，例如雇主）想要的任何许可。所以答案是“不”。

在这种情况下，脚本通常以与它们编写时相同的形式分发 - 没有编译格式。所以你可以看到源。这并不意味着它们是开源的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-12T22:46:00.623

## **不。**

“开源”与能够查看源代码不是一回事；开源许可是关于从该源代码派生作品的**合法权利。**

如果您在未经他人明确同意的情况下盗用他人的作品，对其进行修改和重新分发，那么您就侵犯了他们的版权，并且**触犯了法律**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T03:09:09.933

“开源”不仅意味着您拥有源代码，它还用于描述您在修改或不修改代码的情况下重新分发代码的合法权利。

基于版权和许可，许多脚本*不是*开源的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T04:58:42.113

正如许多人所指出的，仅仅因为您可以访问源代码并不能赋予您随心所欲地使用它的权利。

你问

> 不是几乎所有的脚本都被解释了吗？也就是说，根据定义，解释脚本的设备不需要“源”吗？

不会。即使在解释器中，源代码在被解释之前也会经过多次转换。最终被解释的形式通常是基于堆栈或基于寄存器的虚拟机的指令序列；此类指令通常称为“字节码”。也可以相对有效地解释内部*树。*主要为教学目的而设计的口译员可能会使用效率更低的方案。

一些实现允许您采用内部形式并将其写入磁盘，从中可以重新读取和解释。感知到的优势通常是

*   程序加载和运行速度更快，因为初始处理阶段在编写内部表单之前执行一次，然后一遍又一遍地重用。

*   内部形式保护源代码不被窥探。

主要缺点是典型的内部形式通常不如源代码可移植，这可能是因为字节顺序或字长的不同。

在 Lua 的特殊情况下，`luac`编译器会将字节码写入磁盘。它很少使用，因为字节码不可移植，而且编译器已经非常快了。在魔兽世界的特殊情况下，他们实际上是在[鼓励人们使用 Lua 来修改界面](http://wowprogramming.com/)和定制体验；他们希望每个人都共享代码，因此保持开源。WoW 拥有超过 1000 万订阅者，并且至少有 5000 人贡献了代码。所以这是贡献了一些代码的用户群的 0.5%，这让我对编程作为一种职业的未来感到高兴。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T03:10:10.507

要为解释器分发程序，您**必须**发送源代码（尽管不一定是可理解的源代码）。这并不自动意味着这些术语通常使用的方式是[开放或免费的。](http://en.wikipedia.org/wiki/FOSS)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-16T10:19:43.030

我似乎记得在游戏条款和条件中阅读了一些要求插件作为开源许可的内容，但我现在似乎找不到它，所以我可能一直在想象它。在所有实际情况下，它们都是。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-01-09T03:07:59.717

您可以编译 Lua 和其他脚本语言并以各种方式隐藏它们。与其他语言相比，默认情况下打开源代码更常见，而不是更必要。

# c++ - C++ 模板可以为改进代码的条件执行此操作吗？

> ID：426941
> 
> 赞同：2
> 
> 时间：2009-01-09T03:06:54.820
> 
> 标签：c++, templates

我想这样做：
**func(conditionA ? pa1 : pa2, conditionB ? pb1 : pb2, conditionC ? pc1 : pc2);**

在 C 风格的函数中，没有问题。但是如果 func() 是模板函数，编译器会报错。这里 pa1 和 pa2, ... 是不同的类并且有一个**静态**方法 - “convert()”。出于性能考虑，convert() 也被声明为**内联。**

如果模板不能解决这个问题，就会像下面这样一个非常looooooooooong的if-else。

```
如果（条件A）
{
    A1型;
    如果（条件B）
    {
        B1 b 型；
        如果（条件C）
        {
            C1 c;
            函数（a，b，c）；
        }
        别的
        {
            C2c;
            函数（a，b，c）；
        }
    }
    别的
    {
        B2 b 型；
        如果（条件C）
        {
            C1 c;
            函数（a，b，c）；
        }
        别的
        {
            C2c;
            函数（a，b，c）；
        }
    }
}
别的
{
    A2型;
    如果（条件B）
    {
        B1 b 型；
        如果（条件C）
        {
            C1 c;
            函数（a，b，c）；
        }
        别的
        {
            C2c;
            函数（a，b，c）；
        }
    }
    别的
    {
        B2 b 型；
        如果（条件C）
        {
            C1 c;
            函数（a，b，c）；
        }
        别的
        {
            C2c;
            函数（a，b，c）；
        }
    }
}

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T03:14:33.323

条件运算符（即 the`a`和`b`in `p ? a : b`）的结果必须属于同一类型。也就是说，你不能这样做：

```
predicate() ? 3.14 : "sdfsd" 
```

确保您的`pa1`和`pa2`是兼容的类型（它们是相同的类型，从一种类型继承，或者被强制转换为兼容的类型）。如果您确实有一个`convert`将这些类型转换为兼容类型的成员函数，那么为什么不直接使用：

```
conditionA ? pa1.convert() : pa2.convert() 
```

最后，时间不长。你已经写出了定义。保持通用并继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T09:22:54.983

您的基本问题是**表达式的类型在编译时必须是可知的**。

条件是否在编译时固定且已知？如果是这样，则可以使用元函数来选择每个参数：

```
template <bool B>
struct choose {
    typedef X type;
};

template <>
struct choose<false> {
    typedef Y type;
};

...

func(choose<a_constant_bool_expr>::type()); 
```

（对于 1 参数情况进行了简化；对于 3 个参数，您可以定义例如`struct choose1`、`struct choose2`、`struct choose3`。）

否则，您最好的选择是按照 John Zwinck 的建议从一个公共基础派生所有类型。唯一的替代方案是巨大的`switch`陈述或`if`s 列表。

实际上，也许这是[Boost.Variant](http://www.boost.org/doc/html/variant.html)的优点？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T03:18:14.780

使 pa1 和 pa2 从一个公共基类继承，并使用对该祖先的引用作为您的（然后是非模板化的）函数的参数类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T05:04:12.367

您遇到的问题是编译时的强类型，并且您希望在运行时更改类型。编译 Function 的模板时，它需要知道要提供什么类型。您可以使用不同的类型，但不能在 1 行中全部完成。

做一个你只想在函数中需要时才做的 convert() 真的那么贵吗？

远离模板...

您的描述使方法的长度比看起来更糟，您需要已经定义了 a 的 b 和 c。您还可以将条件简化为 switch 语句。

如果您将 a、b 和 c 作为一个完整的对象保留，并且可以要求它将值传递给函数。

```
class a {
  p1, p2;
  condition;
  val value() { return condition? p1.convert, p2.convert };
} 
```

您可以使它们具有函数所需的那些方法通用的接口。有几种方法可以做到这一点，但最简单的方法是您可以更改 TypeA1 等的类。在此处添加 IConvertable 之类的父类。

```
class IConvertable{
public: 
  ~IConvertable(){}
  virtual val convert() = 0;
} 
```

然后在每个类中实现convert来调用convert的静态版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T05:43:37.343

这有点难看，但您可以使用位将 3 级嵌套转换为单个 switch 语句：

```
const unsigned int caseA = 1 << 0;
const unsigned int caseB = 1 << 1;
const unsigned int caseC = 1 << 2;
switch ((conditionA ? caseA : 0) | (conditionB ? caseB : 0) | (conditionC ? caseC : 0)) {
    case 0:                            func(pa2, pb2, pc2); break;
    case caseA:                     func(pa1, pb2, pc2); break;
    case caseB:                     func(pa2, pb1, pc2); break;
    case caseA|caseB:           func(pa1, pb1, pc2); break;
    case caseC:                     func(pa2, pb2, pa1); break;
    case caseA|caseC:           func(pa1, pb2, pc1); break;
    case caseB|caseC:           func(pa2, pb1, pc1); break;
    case caseA|caseB|caseC: func(pa1, pb1, pc1); break;
    default: assert(false); // unreachable
} 
```

这将您的 3 个二元决策系列拆分为一个 8 路决策，因此更容易推理。有些人可能讨厌它，但我觉得它很可读。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T18:32:32.587

扩展（重复）其他人所说的话......

这**不起作用**：

```
template<class TYPE>
inline void Function( TYPE & object )
{
  cout << "Function():  " << object.convert() << endl;
}

class A
{
public:
  static const char * convert() { return "classA"; }
};

class B
{
public:
  static const char * convert() { return "classB"; }
};

int
main(int argc)
{
  A a;
  B b;

  Function( argc>1 ? a : b );
} 
```

由于*a*和*b*是不同的类型，并且正在根据参数类型为您创建模板化*函数。*

**但这将起作用：**

```
template<class TYPE>
inline void Function( TYPE & object )
{
  cout << "Function():  " << object.convert() << endl;
}

class C
{
public:
  virtual const char * convert() = 0;
};

class A : public C
{
public:
  static const char * staticConvert() { return "classA"; }
  const char * convert() { return A::staticConvert(); }
};

class B : public C
{
public:
  static const char * staticConvert() { return "classB"; }
  const char * convert() { return B::staticConvert(); }
};

int
main(int argc)
{
  A a;
  B b;

  Function( argc>1 ? (C&)a : (C&)b );
} 
```

虽然我真的应该使用 dynamic_cast ...

```
 Function( argc>1 ? dynamic_cast<C&>(a) : dynamic_cast<C&>(b) ) 
```

# haskell - 在 Haskell 中哪个更有效；模式匹配或嵌套 if/case 语句？

> ID：426953
> 
> 赞同：11
> 
> 时间：2009-01-09T03:11:01.443
> 
> 标签：haskell, pattern-matching

我只是对 Haskell 中模式匹配的效率感到好奇。什么是模式匹配比嵌套`if`/`case`语句更好的简单情况，然后反过来呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-09T05:31:26.853

在 Haskell 中，`case`和模式匹配有着千丝万缕的联系；你不能没有另一个。 `if p then e1 else e2`是 . 的语法糖`case p of { True -> e1; False -> e2 }`。由于这些原因，我认为不可能产生您要求的示例；在 Core Haskell 中，一切都等同于`case`.

在 ML 系列的语言中，优化器通常可以通过复杂的模式匹配来完成令人印象深刻的事情。这对 Haskell 编译器来说更难；由于惰性评估，模式匹配编译器不允许重新排序某些测试。换句话说，如果你`case`以不同的方式嵌套语句，你可能会得到不同的性能，但在 Haskell 中你也会得到不同的语义。所以通常编译器不会弄乱它。

至于编写自己的代码的方式，可以肯定地假设具有最少 case 表达式的代码是最好的（请记住，一个`if`等于一个 case 表达式）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T03:48:52.410

我没有确认这一点，但我认为当编译器将这两种形式翻译成核心 Haskell 时，这两种形式都会成为一个嵌套的 case-of 表达式。找出答案的最好方法是询问编译器本身。在 GHC 中，您可以使用以下参数打开核心中间程序的转储：

*   简化前：-ddump-ds
*   简化后：-ddump-simpl

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-11T22:55:02.493

根据规范，它们在[*语义上*是等价](http://haskell.org/onlinereport/decls.html#sect4.4.3 "4.4.3 函数和模式绑定")的。当然，这并不一定意味着它们的实现方式相同，但如果一个体面的编译器存在差异，我个人会感到惊讶。

# vim - 在vim中用空格替换制表符

> ID：426963
> 
> 赞同：412
> 
> 时间：2009-01-09T03:15:55.207
> 
> 标签：vim, vi

我想在 gVim 中将制表符转换为空格。我将以下行添加到我的`_vimrc`：

```
set tabstop=2 
```

它可以在两个空格处停止，但看起来仍然像插入了一个制表键（我后来尝试使用 h 键来计算空格）。

我不确定我应该怎么做才能让 gVim 将制表符转换为空格？

* * *

## 回答 #1

> 赞同：889
> 
> 时间：2009-01-09T03:45:30.280

根据其他答案打开扩展选项卡后，根据新设置转换现有文件的极其方便的方法是：

```
:retab 
```

它将在当前缓冲区上工作。

* * *

## 回答 #2

> 赞同：465
> 
> 时间：2009-01-09T03:19:02.517

IIRC，类似于：

```
set tabstop=2 shiftwidth=2 expandtab 
```

应该做的伎俩。如果您已经有制表符，那么请使用一个不错的全局 RE 将其替换为双空格。

如果您已经有要替换的标签，

```
:retab 
```

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2009-01-09T03:17:40.447

尝试

```
set expandtab 
```

对于软标签。

要修复预先存在的选项卡：

```
:%s/\t/  /g 
```

我使用了两个空格，因为您已经将制表位设置为 2 个空格。

* * *

## 回答 #4

> 赞同：76
> 
> 时间：2016-10-14T10:11:43.003

*这对我有用：*

你可以看到标签首先这样做：

```
:set list 
```

然后为了可以替换标签然后执行以下操作：

```
:set expandtab 
```

然后

```
:retab 
```

现在所有选项卡都已替换为空格，然后您可以像这样返回正常查看：

```
:set nolist 
```

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2013-09-05T21:42:50.983

`gg=G`将重新缩进整个文件并删除我从同事那里获得的文件中的大部分（如果不是全部）选项卡。

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2010-01-19T09:18:52.883

将以下行添加到您的 .vimrc

```
set expandtab
set tabstop=4
set shiftwidth=4
map <F2> :retab <CR> :wq! <CR> 
```

在 vim 中打开文件并按 F2 选项卡将转换为 4 个空格并自动保存文件。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2009-02-12T14:09:36.707

如果要保持`\t`等于 8 个空格，请考虑设置：

```
 set softtabstop=2 tabstop=8 shiftwidth=2 
```

这将为您每次`<TAB>`按下两个空格，但`\t`您的代码中的实际仍将被视为 8 个字符。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-12-13T05:38:06.553

This got it working for me:

```
:set tabstop=2 shiftwidth=2 expandtab | retab 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-30T16:14:45.503

本文有一个出色的 vimrc 脚本，用于处理制表符+空格，并在它们之间进行转换。

> 提供了这些命令：
> 
> **Space2Tab** 将空格转换为制表符，仅在缩进中。
> 
> **Tab2Space** 将制表符转换为空格，仅在缩进中。
> 
> **RetabIndent** 执行 Space2Tab（如果设置了 'expandtab'）或 Tab2Space（否则）。
> 
> 每个命令都接受一个参数，该参数指定制表符列中的空格数。默认情况下，使用“tabstop”设置。

来源：http: [//vim.wikia.com/wiki/Super_retab#Script](http://vim.wikia.com/wiki/Super_retab#Script)

```
" Return indent (all whitespace at start of a line), converted from
" tabs to spaces if what = 1, or from spaces to tabs otherwise.
" When converting to tabs, result has no redundant spaces.
function! Indenting(indent, what, cols)
  let spccol = repeat(' ', a:cols)
  let result = substitute(a:indent, spccol, '\t', 'g')
  let result = substitute(result, ' \+\ze\t', '', 'g')
  if a:what == 1
    let result = substitute(result, '\t', spccol, 'g')
  endif
  return result
endfunction

" Convert whitespace used for indenting (before first non-whitespace).
" what = 0 (convert spaces to tabs), or 1 (convert tabs to spaces).
" cols = string with number of columns per tab, or empty to use 'tabstop'.
" The cursor position is restored, but the cursor will be in a different
" column when the number of characters in the indent of the line is changed.
function! IndentConvert(line1, line2, what, cols)
  let savepos = getpos('.')
  let cols = empty(a:cols) ? &tabstop : a:cols
  execute a:line1 . ',' . a:line2 . 's/^\s\+/\=Indenting(submatch(0), a:what, cols)/e'
  call histdel('search', -1)
  call setpos('.', savepos)
endfunction

command! -nargs=? -range=% Space2Tab call IndentConvert(<line1>,<line2>,0,<q-args>)
command! -nargs=? -range=% Tab2Space call IndentConvert(<line1>,<line2>,1,<q-args>)
command! -nargs=? -range=% RetabIndent call IndentConvert(<line1>,<line2>,&et,<q-args>) 
```

这对我的帮助比我第一次寻找解决方案时这里的答案要多。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-03-28T06:18:48.990

首先在文件中搜索标签：/^I :set expandtab :retab

将工作。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-03-25T02:12:24.633

`expand`是一个将制表符转换为空格的 unix 实用程序。如果你不想`set`在 vim 中做任何事情，你可以使用 vim 的 shell 命令：

```
:!% expand -t8 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-08T03:09:51.893

if u are using makefile or other text file, which need real tab other than some spaces, add `set noexpandtab` in your ~/vimrc first, or just input `set noexpandtab` command, when edit some file with vi(vim)

# ruby - 如何更改我的鞋子应用程序的图标？

> ID：426965
> 
> 赞同：4
> 
> 时间：2009-01-09T03:16:59.840
> 
> 标签：ruby, styles, shoes

我想知道是否可以更改我的鞋子应用程序的图标？我想象它以风格为导向，但我无法在上面找到任何东西。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-09-19T02:25:28.253

你可以在[Green Shoes](http://github.com/ashbb/green_shoes)中做到这一点，但你必须深入了解一下。这是我为 SciRuby 编写的一些非常简单的代码：

```
class Shoes
  class App
    def icon filename=nil
      filename.nil? ? win.icon : win.icon = filename
    end

    class << self
      def default_icon= filename
        Gtk::Window.set_default_icon(filename)
      end
    end
  end
end 
```

第二种方法是可选的；我认为，您可以使用它来设置整个应用程序的图标。第一种方法设置当前窗口的图标，你可以像这样使用它：

```
DIR = Pathname.new(__FILE__).realpath.dirname.to_s
ICON_PATH = File.join(DIR, '..', 'static', 'my-icon.png')

# ...

Shoes.app :title => "My App" do
  icon ICON_PATH
end 
```

对于默认值：

```
Shoes::App.default_icon = ICON_PATH 
```

我使用 128x128 png 文件。我尝试了一个 500x500 的，但它不能正常工作。在上面的代码中`ICON_PATH`，从项目目录的根目录中，应该是`./static/my-icon.png`.

您可能还需要在`require "gtk2"`某个地方使用该`default_icon=`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T06:59:40.310

我不相信这在鞋子内部是可能的。这是基于在线和源代码中的广泛搜索。

但是，Shoes 外部有一些东西是有效的。一种是简单地更改文件`#{DIR}/static/shoes-icon.png`，这是运行时从中提取其图标的地方。另一种是更改文件中的硬编码值`libshoes.so`（或您的操作系统的等效值）；您可以使用十六进制编辑器，或任何其他不会弄乱文件的编辑器。请注意，要使硬编码编辑工作而不会崩溃，您必须将硬编码字符串替换为相同长度的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-08T13:41:20.230

使用[IcoFx](http://icofx.ro)。_为什么他自己在邮件列表中推荐了这个实用程序。您可以在 icoFX 网站的教程部分找到说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T06:15:50.210

到目前为止，我不确定这实际上是否可行。在 OS X 中，我能够修改包内容以更改 plist 在图标方面所指向的内容。但是，当应用程序运行时，它会使用 Shoes 的运行时图标。

我不知道您将如何在 Windows 上执行此操作。

# cocoa - 如何创建与 Photoshop UI 模型中的实例完全匹配的 NSColor 实例？

> ID：426979
> 
> 赞同：11
> 
> 时间：2009-01-09T03:27:10.613
> 
> 标签：cocoa, user-interface, colors

我的 UI 设计师为我提供了在 Photoshop 中创建的出色 UI 模型。我想完全匹配模型中的颜色，但是每次我使用`-colorWithCalibratedRed:green:blue:alpha:`NSColor 的方法创建颜色时，颜色都不匹配。

我尝试使用 /Developer/Applications/Graphics Tools/ 中的 Pixie 应用程序从 Photoshop 模型中采样颜色，并将 NSColor 定义复制到剪贴板，但是当我构建和运行应用程序时这些颜色不正确。

如果我使用 Photoshop 颜色选择器提供的值，它们也不正确。

我怀疑这一定与我从屏幕上采样校准颜色的事实有关，因此值不正确，但我不知道如何解决这个问题。

如果我使用`-colorWithDeviceRed:green:blue:alpha:`并传递它看起来正确的值，但是颜色在其他系统上并不一致。

有没有办法可靠地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T08:06:27.977

不存在从一个显示器到另一个显示器一致的“纯”RGB 颜色。除非您在标准化的色彩空间中工作，否则在一个显示器上显示的颜色数字可能会在另一个显示器上呈现略有不同。

让您的设计师将您的模型转换为标准色彩空间，例如 sRGB。然后，您可以使用 NSColor 上的方法，这些方法不仅采用组件值，还采用组件所在的颜色空间；这将为您提供在任何显示器上看起来都应该相似的颜色。

换句话说，在 Photoshop 中使用 sRGB 由 (R, G, B) = (1.0, 1.0, 1.0) 制成的色板看起来应该与使用通过以下方式绘制的颜色绘制的色板几乎相同：

```
NSColorSpace *sRGB = [NSColorSpace sRGBColorSpace];

CGFloat components[3] = { 1.0, 1.0, 1.0 };
NSColor *sRGBRed = [NSColor colorWithColorSpace:sRGB components:&components count:3]; 
```

请注意，这`+[NSColorSpace sRGBColorSpace]`仅适用于 Mac OS X 10.5 Leopard 及更高版本。如果您仍需要在 Tiger 上运行，您可以编写一个在 10.5 上运行的小实用程序应用程序，并将规范的 sRGB 颜色转换为校准的 RGB 空间：

```
NSColor *calibratedColor = [sRGBRed colorUsingColorSpaceName:NSCalibratedRGBColorSpace]; 
```

无论您是使用 sRGB 还是校准空间，一旦您拥有一组颜色，您就可以将它们放在您写入文件的 NSColorList 中，然后在运行时从应用程序的资源中加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T03:34:45.497

您是否尝试过在 Photoshop 中关闭色彩管理？启用色彩管理后，实际显示的 RGB 像素值与 Photoshop 报告的像素值可能不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T05:52:39.087

谢谢，我刚刚尝试使用纯 RGB 值创建测试 PSD，并且还创建了一个简单的应用程序，其视图显示 [NSColor redColor]、[NSColor greenColor] 和 [NSColor blueColor]。

当我对 PSD 进行采样（在 Photoshop 或 Preview 中打开）时，Pixie 向我显示纯值（例如红色的 R:255 G:0 B:0），但是当我对我的应用程序采样时它显示非纯色，例如（R:253 G :2 B:30) 用于 [NSColor redColor]。如果我使用`[NSColor colorWithCalibratedRed:1.0 green:1.0 blue:1.0 alpha:1.0]`而不是 [NSColor redColor]，我会得到相同的结果。

# list - LISP 很简单的列表题

> ID：426991
> 
> 赞同：3
> 
> 时间：2009-01-09T03:34:41.253
> 
> 标签：list, lisp

我正在学习 lisp，而且我对此很陌生，所以我想知道...

如果我这样做：

```
(defparameter *list-1* (list 1 2))
(defparameter *list-2* (list 2 3))
(defparameter *list-3* (append *list-1* *list-2*)) 
```

进而

```
(setf (first *list-2*) 1)
*list-3* 
```

我会得到 (1 2 1 4)

我知道这是因为附加将“节省资源”并为第一个块创建一个新列表，但实际上只会指向第二个块，因为如果我这样做：

```
(setf (first *list-1*) 0)
*list-3* 
```

我将得到 (1 2 1 4) 代替更合乎逻辑的 (0 2 1 4)

所以我的问题是，在 lisp 中还有哪些类似的情况，你们黑带 lisper 如何知道如何处理这些不直观或不一致的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T03:45:04.417

该`append`函数必须复制其第一个参数，以避免修改现有数据结构。结果，您现在有两个看起来像 的列表段`(1 2 ...)`，但它们是不同列表的一部分。

通常，任何列表都可以是任何其他列表的尾部，但您不能将单个列表对象用作多个列表的头部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T03:55:24.287

一种防御策略是避免共享结构。

```
(defparameter *list-3* (append *list-1* *list-2* '())) 
```

或者

```
(defparameter *list-3* (append *list-1* (copy-list *list-2*))) 
```

现在新的结构`*list-3*`是全新的，修改`*list-3*`不会影响`*list-2*`，反之亦然。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T03:51:09.020

您必须根据 cons 单元格来考虑列表。当你定义列表 1 和列表 2 时，它就像：

```
(defparameter *list-1* (cons 1 (cons 2 nil)))
(defparameter *list-2* (cons 2 (cons 3 nil))) 
```

然后，当您附加：

```
(defparameter *list-3* (cons 1 (cons 2 *list-2*))) 
```

基本上，一个 cons 单元由两部分组成；一个值（汽车）和一个指针（cdr）。Append 被定义为不更改第一个列表，因此它被复制，但最后一个 cdr（通常为 nil）被更改为指向第二个列表，而不是第二个列表的副本。如果您愿意销毁第一个列表，您将使用 nconc。

试试这个：

```
(defparameter *list-3* (nconc *list-1* *list-2*)) 
```

然后观察 的值`*list-1*`，它是 (1 2 2 3)，就像`*list-3*`。

一般规则是非破坏性函数 ( `append`) 不会破坏现有数据，而破坏性函数 ( `nconc`) 会。但是，未来的破坏性功能（`(setf cdr)`）的作用不是第一个非破坏性功能的责任。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-13T01:41:14.420

*引用：*

> 所以我的问题是，在 lisp 中还有哪些类似的情况，你们黑带 lisper 如何知道如何处理这些不直观或不一致的东西？

我认为您在这里对一个比您想象的要大得多的主题有点苛刻。列表是 Lisp 中一个相当复杂的概念，您需要了解这不是一些简单的数组。该标准提供了*许多*功能来以各种方式操作列表。在这种情况下，您想要的是：

```
(concatenate 'list *list-1* *list-2*) 
```

那么，为什么还有`append`呢？好吧，如果您可以省略复制最后一个列表，并且所有涉及的符号仍然返回正确的数据，那么这可以显着提高计算时间和内存占用的性能。 `append`在不使用副作用的函数式编程风格中特别有用。

代替对 cons 单元、破坏性与非破坏性函数等的进一步解释，我将为您指出一个很好的介绍：[Practical Common Lisp，Ch。12](http://gigamonkeys.com/book/they-called-it-lisp-for-a-reason-list-processing.html)和完整的参考，[Common Lisp Hyperspec](http://www.lispworks.com/documentation/HyperSpec/Front/Contents.htm)，看第 14 和 17 章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T10:51:01.850

> *所以我的问题是，在 lisp 中还有哪些类似的情况，你们黑带 lisper 如何知道如何处理这些不直观或不一致的东西？*

通过阅读精美的手册？ [Hyperpsec](http://www.lispworks.com/documentation/HyperSpec/Body/f_append.htm)明确指出：

> [...] 复制除最后一个之外的每个列表的列表结构。最后一个参数没有被复制；它成为前面列表连接的最后一个点对的 cdr，如果前面没有非空列表，则直接返回。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-01-09T03:48:35.767

嗯，主要是我们学习它是如何工作的，所以我们想象的不一致是有道理的。

您需要做的是找到一些老式的块和指针图，我不能轻易绘制，但让我们弄清楚。

在第一个 defparameter 之后，你有*list-1*，它是

```
(1 . 2 . nil) 
```

点符号；*list-2*是

```
(2 . 3 . nil) 
```

# wcf - Windows 上的 X.509 证书入门

> ID：426994
> 
> 赞同：13
> 
> 时间：2009-01-09T03:38:16.690
> 
> 标签：wcf, certificate, pki, x509, wse

我目前正在研究通过 WSE 3.0 或 WCF 对 SOAP 消息进行加密和签名的主题。由于我没有参与涉及公共 Internet 的分布式应用程序开发，我发现我缺乏对 X.509 证书及其在 Windows 证书存储机制中的工作原理的了解。这与非对称密码学无关；它是关于 PKI 生态系统的。

因此，我想收集哪些文章或书籍对 Windows 的安全机制、如何正确使用和管理证书存储、CA 信任链以及 WSE 或 WCF 等 API 如何交互和使用证书进行了全面的解释. 建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-13T20:11:24.993

每个使用（或考虑使用）X.509 证书的人都应该被迫阅读以下内容：[关于 PKI 但被迫了解的所有内容](http://www.cs.auckland.ac.nz/~pgut001/pubs/pkitutorial.pdf "关于 PKI 的所有你不想知道但被迫去发现的事情")，以及[X.509 样式指南](http://www.cs.auckland.ac.nz/~pgut001/pubs/x509guide.txt "X.509 风格指南")，均由 Peter Gutmann 撰写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-19T07:09:00.753

我认为理解 PKI 的 Windows 实现的基本起点必须来自 TechNet

PKI 段 [http://technet.microsoft.com/en-us/library/cc757327(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc757327(WS.10).aspx)

证书概述 [http://technet.microsoft.com/en-us/library/cc784662(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc784662(WS.10).aspx)

证书服务 [http://technet.microsoft.com/en-us/library/cc783511(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc783511(WS.10).aspx)

证书模板 [http://technet.microsoft.com/en-us/library/cc758496(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc758496(WS.10).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-12T12:12:49.623

Michele Bustamente 的“Learning WCF”有一个很好的关于 WCF 安全性的概述章节，包括一些关于 X.509 证书的基本讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-12T12:24:28.460

来自 MSDN：

[如何：使用 x509 解密 XML](http://msdn.microsoft.com/en-us/library/ms229943(VS.80).aspx)

[如何：使用 x509 加密 XML](http://msdn.microsoft.com/en-us/library/ms229744(VS.80).aspx)******************