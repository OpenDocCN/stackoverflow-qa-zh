# StackOverflow 问答 12340000-12340999

# java - 为什么当我关闭我的应用程序时我的 android 应用程序活动会重新打开

> ID：12340001
> 
> 赞同：1
> 
> 时间：2012-09-09T14:39:27.800
> 
> 标签：java, android, android-intent, android-activity

我一直在尝试解决这个问题一段时间，我确信有办法解决这个错误/问题，但我还没有找到。

我遇到的问题是，一旦我通过后退按钮或主页按钮退出应用程序，它就会关闭，然后重新打开我之前打开的一项活动。

一旦我按下其中一个按钮，我是否需要关闭我的活动，我将如何去做。

这是我的主要活动的代码，它打开了我的其他活动......

```
package com.togdem.tunnels;
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;
import android.widget.SeekBar;
import android.widget.Toast;
import android.widget.SeekBar.OnSeekBarChangeListener;

public class TunnelsActivity extends Activity
{

int vo = 2;
String mla = "";

public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ImageView p_btn = (ImageView) findViewById(R.id.imageView1);

    p_btn.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View view, MotionEvent event)
        {

        Intent myIntent2 = new Intent(view.getContext(), Cgt.class);

            startActivity(myIntent2);

            return false;

        }

    });

    SeekBar skb = (SeekBar) findViewById(R.id.seekBar1);

    try {

        InputStream in = openFileInput("sa.txt");
        if (in != null) {
            InputStreamReader input = new InputStreamReader(in);
            BufferedReader buffreader = new BufferedReader(input);

            mla = "";

            String line = new String();

            line = buffreader.readLine();

            mla += line;

            Toast msg = Toast.makeText(getBaseContext(), "Loaded Saved Data", Toast.LENGTH_LONG);
            msg.show();

            in.close();

            skb.setProgress(Integer.parseInt(mla.toString()));

        }
        else{}

    } catch(Exception e){}

    skb.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
    {

        public void onProgressChanged(SeekBar event, int value, boolean sb)
        {

            vo = value;

        }

        public void onStartTrackingTouch(SeekBar event)
        {

        }

        public void onStopTrackingTouch(SeekBar event)
        {

            try
            {

                OutputStreamWriter out = new OutputStreamWriter(openFileOutput("sa.txt", 0));
                out.write(Integer.toString(vo));
                out.close();

            } catch (IOException e)
            {

            }

            Toast msg = Toast.makeText(getBaseContext(), "Set Sensitivity to: " + Integer.toString(vo), Toast.LENGTH_LONG);
            msg.show();

        }

    });

}

} 
```

这是我要打开的活动的代码...

```
package com.togdem.tunnels;
import java.io.OutputStreamWriter;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class Cgt extends Activity
{

public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setContentView( R.layout.cgame );

    ImageView btn1 = (ImageView) findViewById(R.id.btn_c);

    ImageView btn2 = (ImageView) findViewById(R.id.btn_h);

    btn1.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View view, MotionEvent event)
        {

            try
            {
                OutputStreamWriter out = new OutputStreamWriter(openFileOutput("spd.txt", 0));

                out.write("4");
                out.close();

            } catch (java.io.IOException e) {}

            Intent myIntent = new Intent(view.getContext(), TunnelsSpA.class);

            myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

            startActivity(myIntent);

            finish();

            return false;

        }

    });

    btn2.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View view, MotionEvent event)
        {

            try
            {
                OutputStreamWriter out = new OutputStreamWriter(openFileOutput("spd.txt", 0));

                out.write("6");
                out.close();

            } catch (java.io.IOException e) {}

            Intent myIntent = new Intent(view.getContext(), TunnelsSpA.class);

            myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

            startActivity(myIntent);

            finish();

            return false;

        }

    });

}

public boolean onKeyDown(int KeyCode, KeyEvent event)
{

    if (KeyCode == KeyEvent.KEYCODE_BACK);
    {

        onStop();

    }

    if (KeyCode == KeyEvent.KEYCODE_HOME);
    {

        onStop();

    }

    return super.onKeyDown(KeyCode, event);

}

protected void onStop()
{

    finish();
    Log.d("Stopping...", "Stopping the activity");

}

} 
```

感谢你给与我的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:20:02.440

您似乎对一些基本的 Android 行为有问题。

首先，当用户按下 HOME 按钮时，他并没有**退出您的应用程序**，他只是将您的应用程序置于后台，以便他可以去做其他事情。如果他这样做，他不希望您的应用程序退出。事实上，当他返回您的应用程序时，他希望找到与离开时完全相同的状态。这是标准的 Android 行为，除非您有充分的理由，否则您不应更改它。

其次，当用户按下 BACK 按钮时，Android 会自动完成当前的活动，并返回到活动堆栈中的上一个活动。这是标准的 Android 行为，您无需编写任何特殊内容即可实现这一点。

通过查看您的代码，您有活动`TunnelsActivity`开始活动`Cgt`。启动时`TunnelsActivity`不会调用，因此当该活动运行时，活动堆栈将位于底部，然后位于顶部。在你抓住 BACK 按钮和 HOME 按钮并调用. 这绝对是错误的。你永远不应该打电话。在某些情况下，作为 Activity 生命周期的一部分被 Android 调用。调用不会使您的活动消失，也不会使您的应用程序退出。它所要做的就是迷惑Android。此外，当 Android 调用时，它期望代码调用到`finish()``Cgt``TunnelsActivity``Cgt``Cgt``onStop()``onStop()``onStop()``onStop()``onStop()``super.onStop()`您的代码没有这样做。这将导致代码抛出异常，这可能就是您看到活动重新启动的原因。

我建议删除您的`onStop()`方法并删除您的`onKeyDown()`方法。这可能会解决你所有的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T14:43:59.067

您的应用程序位于`Stopped State`...其中**Activity（您的应用程序 Activity）被另一个 ForeGround Activity 隐藏...**

要么**在需要内存**时`System`杀死它..要么你**可以**通过调用或杀死它`Activity`****`finish()``finishActivity()`****

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-04T20:53:48.637

仅用于退出应用程序 System.exit(0);

不使用完成（）；****

# php - 特殊类别帖子的不同循环

> ID：12340002
> 
> 赞同：1
> 
> 时间：2012-09-09T14:40:01.390
> 
> 标签：php, html, css, wordpress, loops

我正在使用 Wordpress，我想对“Streetstyle”类别中的帖子使用不同的循环。因此，例如，如果有一个帖子归类为“摄影”，则循环的样式将是正常的。但是如果帖子被归类为“街头风格”，帖子周围会有黑色边框。

这是我的循环：

```
<?php query_posts('posts_per_page=9' . '&orderby=date'); 
        while ( have_posts() ) : the_post(); ?>         
            <div <?php post_class('pin'); ?>>
                <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
                <?php if ( has_post_thumbnail() ) {
                    the_post_thumbnail();
                } 
                the_content('Les mer'); ?> 
            </div>

        <?php endwhile;
        // Reset Query
        wp_reset_query(); ?> 
```

[现场预览在这里。](http://inmyownview.com/wordpress)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:53:22.503

在您的问题中，您谈到使用不同的循环，但我根据您所说的以及实际上与您使用的循环相同的链接进行思考，您只需添加一些条件代码来检查帖子是否是在街头风格类别中。

下面的代码会执行此操作，它会检查帖子是否存在`in_category()`，并且我还添加`is_category()`了您在显示类别存档时将使用的代码；

[is_category](http://codex.wordpress.org/Function_Reference/is_category)

[in_category](http://codex.wordpress.org/Function_Reference/in_category)

类名已适当更改。

```
<?php query_posts('posts_per_page=9' . '&orderby=date'); 
    while ( have_posts() ) : the_post();  
        if (is_category( 'Streetstyle' ) || in_category( 'Streetstyle' ) ) ?>
            <div <?php post_class('pin'); ?>>
        <?php } else { ?>   
            <div <?php post_class('pin-blackborder'); ?>>
        <?php } ?>  
                <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
                <?php if ( has_post_thumbnail() ) {
                    the_post_thumbnail();
                } 
                the_content('Les mer'); ?> 
            </div>

    <?php endwhile;
    // Reset Query
    wp_reset_query(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:53:29.997

我猜您的意思是在存档页面中-在这种情况下，请使用[is_category()](http://codex.wordpress.org/Conditional_Tags#A_Category_Page)；

所以，

```
if(is_category('Streetstyle')) :
  // Add black border style and content
else :
  // Do other cool stuff
endif; 
```

# wpf - 如何访问作为资源一部分的 ContextMenu 中的 menuitem

> ID：12340003
> 
> 赞同：4
> 
> 时间：2012-09-09T14:40:00.657
> 
> 标签：wpf, resources, contextmenu, menuitem

我正在尝试访问 ContextMenu 中的 MenuItem，它本身就是国家资源的一部分

```
 <TreeView.Resources>
                        <ContextMenu x:Key ="GroupContext"  StaysOpen="true">
                        <MenuItem Header="Blast to Whole Group" Click="BlastGroup_Click"/>
                        </ContextMenu>
                        <ContextMenu x:Key ="ContactContext"  Style="{x:Null}" Loaded="ContextMenu_Loaded">
                            <MenuItem Header="Delete Contact" Click ="ContactDelete_Click"/>
                            <MenuItem x:Name="ModifyGroupMenuItem" Header="Modify Grouping"  Style="{x:Null}">
                            </MenuItem>
                        </ContextMenu>
                </TreeView.Resources> 
```

如何获得 ModifyGroupMenuItem？我找到了一个从 xaml 获取 ContextMenu [WPF 控件引用的解决方案在代码端不可见](https://stackoverflow.com/questions/5997487/wpf-control-reference-from-xaml-is-not-visible-on-the-code-side)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T15:10:26.753

通过对 Items 集合的索引，或通过查看逻辑树。

```
 ContextMenu menu = this.Resources["ContactContext"] as ContextMenu;

    MenuItem menuitemindex0 = menu.Items[0] as MenuItem;
    MenuItem menuitemindex1 = menu.Items[1] as MenuItem;

    MenuItem menuitembyname = LogicalTreeHelper.FindLogicalNode(menu, "ModifyGroupMenuItem") as MenuItem; 
```

# php - 未显示“硬币”

> ID：12340006
> 
> 赞同：0
> 
> 时间：2012-09-09T14:40:21.007
> 
> 标签：php, mysql

我正在创建一个帐户页面，人们可以在其中看到他们的“硬币”，这是我当前正在创建的网站上的货币。我已经设置了数据库和表，它只是没有显示。

以下是存储在 admin 中的表格：id、用户名、密码、电子邮件、横幅、硬币、管理员、图片、状态、描述和推特。

```
<?php
session_start();
include('global.php');
$getNotification = mysql_query("SELECT * FROM stage") or die(mysql_error());
$getStats = mysql_query("SELECT * FROM admin") or die(mysql_error());
$note= mysql_query("SELECT * FROM notifications ORDER BY id DESC LIMIT 5") or die(mysql_error());
$result = mysql_query("SELECT * FROM admin WHERE username='$login_session'");

$admin = $row['admin'];

while($row = mysql_fetch_array( $result )) {
   $coins= $row['coins'];
//if (($row['ipbanned']=="1"))
//{
//header("location: ipbanned.php");
//}
//}
}

if (($session_username))
{

}
else
{
header("location: index.php");
}

$off = mysql_query("SELECT * FROM siteoffline WHERE site='http://intervention.hostei.com/'");
if (($row['offline']=="1"))
{
header("location: underdev.php");
}

?>
<html>

<head>

    <title>Intervention</title>
    <link rel="stylesheet" type="text/css" href="/style.css">

<head>

</head>

<body>

    <?php include('./include/logonav.php') ?>

    <div id="content">

      <div id="account">

         <center><font size="5" width="100%"><?php echo $session_username; ?>'s Home</font></center>

         <font id="avatar">
            IMAGE HERE C:
         </font>
         <font id="notitications">
            <center>
               <u><b>Notifications</b></u>
                           <?
while($ra = mysql_fetch_array( $note )) {
echo '<div id="bn" style="width:220px; display:block;">';
echo nl2br($ra['body']);
echo '<br><br>Posted by: ';
echo $ra['name'];
echo '<br>';
$time = time();
$get_time = $ra['date'];
$diff = $time - $get_time;

   switch(1)
      {
         case ($diff < 60):
         $count = $diff;
         if ($count==0)
            $count = "A moment";
         else if ($count==1)
            $suffix = "second";
         else
            $suffix = "seconds";
         break;

         case ($diff > 60 && $diff < 3600):
         $count = floor($diff/60);
         if ($count==1)
            $suffix = "minute";
         else
            $suffix = "minutes";
         break;

         case ($diff > 3600 && $diff < 86400):
         $count = floor($diff/3600);
         if ($count==1)
            $suffix = "hour";
         else
            $suffix = "hours";
         break;

         case ($diff > 86400 && $diff < 604800):
         $count = floor($diff/86400);
         if ($count==1)
            $suffix = "day";
         else
            $suffix = "days";
         break;

         case ($diff > 604800 && $diff < 2629743):
         $count = floor($diff/604800);
         if ($count==1)
            $suffix = "week";
         else
            $suffix = "weeks";
         break;

         case ($diff > 2629743 && $diff < 31556926):
         $count = floor($diff/2629743);
         if ($count==1)
            $suffix = "month";
         else
            $suffix = "months";
         break;

         case ($diff > 31556926):
         $count = floor($diff/31556926);
         if ($count==1)
            $suffix = "year";
         else
            $suffix = "years";
         break;

      }
         echo "".$count." ".$suffix." ago";
}
?>
            </center>
         </font>
         <font id="statistics">
            <center>
               <u><b>Statistics</b></u>
               <br />
               Coins: 
               <?
               while($rap = mysql_fetch_array( $getStats )) {
               echo " ";
            }
                ?>

            </center>
         </font>
         <font id="badges">
            <center><u><b>Badges</b></u></center>
         </font>

      </div>

    </div>

    <?php include('./include/footer.php') ?>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:46:47.193

你是说硬币没有显示..

这里`

```
 <font id="statistics">
            <center>
               <u><b>Statistics</b></u>
               <br />
               Coins: 
               <?
               while($rap = mysql_fetch_array( $getStats )) {
               echo " ";
            }
                ?>

            </center>
         </font>` 
```

您只回显空字符串： echo " "; 同时从 $rap 变量中放一些东西

```
print_r($rap); 
```

# hadoop - Hadoop分布式缓存错误信息解读

> ID：12340008
> 
> 赞同：1
> 
> 时间：2012-09-09T14:40:51.677
> 
> 标签：hadoop, distributed-cache

我正在尝试在分布式缓存中放置 3 个文件。

我以编程方式放置其中一个，使用：

```
 DistributedCache.addLocalFiles(conf, "local/path/to/file"); 
```

我还使用该`-files`选项放置了 2 个其他文件。

在本地运行时，在独立模式下，一切正常。

当试图以伪分布式模式运行它时，我收到了这个错误，我不明白它的含义。我用谷歌搜索但没有成功。

```
 Distributed cache entry arrays have different lengths 
```

有谁知道这意味着什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:44:32.237

问题源于我添加到缓存本地文件的事实。

相反，我将这些文件移动到 HDFS 并将 HDFS 版本添加到 DistributedCache。有效！

# c# - WPF MVVM 实体框架分层

> ID：12340014
> 
> 赞同：0
> 
> 时间：2012-09-09T14:41:46.427
> 
> 标签：c#, wpf, entity-framework, mvvm, business-logic

我有这个架构：

------（WPF APPLICATION）（XAML，ViewModels）（了解业务逻辑但不了解 DAL）

------（类库）（业务逻辑）（了解 DAL）

------（类库）（DAL - 实体框架（模型优先））（不参考任何人）

我的问题是我的 DAL 不知道任何业务逻辑类，所以在我的 DAL 中，如果我得到一个比如说一个人的列表，我会返回 IEnumerable。例如：

```
public static IEnumerable GetPersons()
  {
       using(StaffEntities context = new StaffEntities())
       {
            return context.Persons.ToList();
       }

  } 
```

因此，当我从业务逻辑层获得结果时，我对每个实体都有一个对应的类，例如 DAL 中的人实体，我在业务逻辑层中有 clsPerson。但是我的视图模型不知道 DAL 它只知道业务逻辑类因此 clsPerson 所以我的业务逻辑中的代码变成了

例如：

```
 public static IEnumerable GetclsPersons()
{ return DAL.GetPersons(); } 
```

我的大问题是每次我得到一些东西的列表，保存或删除一些东西时，我必须在我的 ViewModel 中使用反射

所以如果我有一个绑定到我的 xaml 的 clsPerson 属性：

```
public IEnumerable clsPersons { get; set; }
public ListCollectionView clsPersonList { get; set; }

clsPersons = BLL.GetclsPersons();
clsPersonList = new ListCollectionView((IList)clsPersons);

public clsPerson CurrentclsPerson { get; set; } 
```

每次我为“CurrentclsPerson”赋值时，我都必须使用反射

```
CurrentclsPerson.Firstname = clsPersonList.CurrentItem.GetType().GetProperty("Firstname")
.GetValue(clsPersonList.CurrentItem,null).ToString(); 
```

我希望不在我的视图模型中使用反射我正在考虑将我的业务逻辑和 DAL 放在一个类库中，这样我就不必使用 IEnumerable

你们用什么？

有没有办法避免这种情况？

有没有办法解决？

请帮助..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:58:46.557

一种解决方案是将您的模型对象放在一个 dll 中并在任何地方引用它。如果您将所有逻辑排除在模型对象之外，这将非常简单且足够好。

另一方面，您可能希望在 GUI 中使用绑定，因此您需要对象来实现某些接口（如 INotifyPropertyChanged）。您仍然可以拥有两个单独的实体分支并使用映射在它们之间进行转换。[Automapper](https://github.com/AutoMapper/AutoMapper)是一种可以帮助您解决此问题的工具。

我正在使用 T4 模板将 ToDto 和 ToEntity 方法添加到我的类中，以便在它们之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:14:22.987

我会在您的商务课程中执行以下操作：

```
public static IEnumerable GetPersons()
{
   using(StaffEntities context = new StaffEntities())
   {
        return from person in context.Persons.ToList()
               select new Person()
               {
                   Firstname = person.Firstname
               }
   }
} 
```

# asp.net-mvc-3 - CORS 无法通过 HTML 标记

> ID：12340019
> 
> 赞同：-1
> 
> 时间：2012-09-09T14:42:05.543
> 
> 标签：asp.net-mvc-3, jsonp, cors

我目前正在将我们的项目从 JSONP 转换为 CORS。

我们将 html 表单作为 JSON 结果传递，在 JSONP 中它工作正常，但是当我将它迁移到 CORS 时，删除了 div、form、p 等标记。

到目前为止，我将 html 作为内容返回，它可以工作。

只是想知道为什么当我将它作为 JSON 结果传递时标记已损坏或其他原因。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T05:04:28.287

我能够将它作为 JSON 数据传递，我只需要反序列化它

# liferay - Liferay 中的 Portlet 到 Portlet 通信

> ID：12340023
> 
> 赞同：0
> 
> 时间：2012-09-09T14:42:33.940
> 
> 标签：liferay, portlet

我有两个 portlet：Display-portlet 和 Comment-portlet。

**Display-portlet**
这显示了一个网格 (html `<table>`)，其详细信息来自数据库。每个表格行显示供应商详细信息并有一个`href`链接，该链接应该连接到我的**Comment portlet**并将参数（如, ）***传递***给 Comment-portlet。`vendor-name``transcation-id`

在每一行都有一个链接，在选择特定供应商时，他的详细信息应该传递给第二个 portlet。

我已经尝试过通过流程操作传递信息的 portlet 到 portlet 事件机制，所以我试图在这里实现相同的逻辑，但我的参数没有传递给操作类。

* * *

我的显示 portlet`view.jsp`有下表：

```
<table>
    <tr>
        <th>Trans.ID</th>
        <th>Vendor Name</th>
        <th>Action</th>
        <th>Discuss</th>
    </tr>
    <tr>
        <td align="center" id="trans_id">
            <%=chatEntry.getTransactionId()%>
        </td>
        <td align="left" id="vname_id">
            <%=chatEntry.getVendorName()%>
        </td>
        <td align="center" id="status_id">
            <%=chatEntry.getStatus()%>
        </td>
        <td align="center">
            <a href="javascript:submitForm()">click</a>
        </td>
    </tr>
</table> 
```

请帮助我应该如何将我的每一行值传递给其他 portlet。

当我尝试使用隐藏值时，默认情况下只选择第一个值。如果有其他方法可以解决此问题，请提出解决方案。

*这个问题可能不完全是 Liferay-IPC，但如果提供更好的解决方案将不胜感激。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T12:10:07.677

关于 Portlet 到 Portlet 通信的详细描述可以在这里找到：

[https://www.liferay.com/community/wiki/-/wiki/Main/Portlet+to+Portlet+Communication?_36_pageResourcePrimKey=6629472](https://www.liferay.com/community/wiki/-/wiki/Main/Portlet+to+Portlet+Communication?_36_pageResourcePrimKey=6629472)

最好的方法是：

1 - 共享会话参数和 2 - 客户端 IPC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T08:13:42.600

从您的 JSP 脚本中，我猜测您的 portlet 是 Liferay MVCPortlet。

您可以像使用 JSP 的任何 Java Web 项目一样使用 request.getParamater() 方法执行此操作

这可能需要您将 url 中的参数传递给包含 Comment Portlet 的页面，例如 /web/...../pagename?param=... 作为 GET 方法或作为表单 POST 方法隐藏。

现在可以在 Comment portlet 的 view.jsp 中获取参数 现在可以使用 PortletRequest 或 ActionRequest 获取操作类的参数。

# facebook-graph-api - 从用户的提要中过滤“空白”帖子？

> ID：12340024
> 
> 赞同：1
> 
> 时间：2012-09-09T14:42:33.857
> 
> 标签：facebook-graph-api, feed

是否可以从用户的提要中过滤空白帖子。当我说空白时，我的意思是这样的帖子

```
 {
     "id": "<fb post id removed>",
     "from": {
        "name": "<name removed>",
        "id": "<user id removed>"
     },
     "story": "<name removed> likes a link.",
     "story_tags": {
        "0": [
           {
              "id": "<user id removed>",
              "name": "<name removed>",
              "offset": 0,
              "length": 19,
              "type": "user"
           }
        ]
     },
     "type": "status",
     "application": {
        "name": "Likes",
        "id": "2409997254"
     },
     "created_time": "2012-09-07T18:46:36+0000",
     "updated_time": "2012-09-07T18:46:36+0000",
     "comments": {
        "count": 0
     }
  }, 
```

这个价值要素有什么东西吗？当用户喜欢 facebook 上的某些东西时，似乎会发生这种情况，但如果它没有告诉我他们喜欢什么，那它有什么价值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:08:30.840

这些被称为“故事”帖子。它们曾经在您的应用设置中被选择性地启用/禁用，但这似乎已经消失了。

这里的秘密在 id 字段中。您将看到它包含 XXXXX_YYYYYY，其中 XXXXXX 是发布者的 id，YYYYYY 是唯一标识符。

现在，如果您从 id 中删除 XXXXX_，您将获得相关帖子的 id。现在使用图形 API 来检索这个 id，一切都会被显示出来。

# visual-studio - 如何在 Visual Studio 类资源管理器中查看 Arduino 库？

> ID：12340027
> 
> 赞同：2
> 
> 时间：2012-09-09T14:43:06.307
> 
> 标签：visual-studio, arduino

我正在使用 Visual Studio 的[Arduino 插件](http://www.visualmicro.com)来编辑使用库的复杂 Arduino 草图。

当我在任何库语法上单击 F12 GoTo 定义时，正确的库文件会在 Visual Studio 中打开，这很棒。（我也看到了图书馆的智能感知）。

但是，当我打开类资源管理器时，没有列出这些库。

如何在类资源管理器中查看库？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:12:24.513

您需要将库源直接包含在您的 Visual Studio 项目中。最简单的方法是单击“vMicro>Toggle Hidden Files”。

菜单项是一个切换，这意味着单击它一次会将所有库源添加到项目中，再次单击它将从项目中删除库源。

这是一个安全的功能，它不会破坏 arduino 编译，但如果您使用 Visual Studio 的“在文件中查找和替换”功能，您应该小心，因为它将包含库源。

注意：如果您使用“切换隐藏文件”功能，您还将在类资源管理器和您的项目中的“src_Micro-Api-Readonly”文件夹下看到 Arduino 核心。

尖端：

您可以将任何文件链接到您的 Arduino 项目中。Arduino 编译器按照正常的 Arduino 规则独立于 Visual Studio 项目配置工作。

当不再需要时，可以从项目中手动删除显示“隐藏”文件的文件夹。手动删除与再次单击菜单项相同。

# aptana3 - aptana 3 代码完成不会删除键入的字母

> ID：12340029
> 
> 赞同：1
> 
> 时间：2012-09-09T14:43:09.213
> 
> 标签：aptana3

伙计们，你们有没有在 Aptana 3 中遇到过这个问题。说当我在编辑器中输入“t”时，代码完成会在列表顶部弹出一个包含“text/javascript”的建议列表，然后我点击“输入”键来选择建议。但它不会删除我之前输入的内容，即“t”，并显示“ttext/javascript”。这是一个错误还是只是我配置错误？

# qt - Qt 无法发送电子邮件

> ID：12340030
> 
> 赞同：3
> 
> 时间：2012-09-09T14:43:12.393
> 
> 标签：qt, email, qt4

我从[这里](http://www.qtforum.org/article/26688/2/sending-e-mail-with-qt4.html)得到了一些关于如何使用 qt 的套接字发送电子邮件的资料。但是代码没有发送电子邮件，而是在连接到 smtp 服务器后卡住了。

我的输出就像

```
1 
stateChanged  QAbstractSocket::HostLookupState 
stateChanged  QAbstractSocket::ConnectingState 
stateChanged  QAbstractSocket::ConnectedState 
Connected  
constructor
2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T20:43:06.357

我过去写过 SMTP 代码，建议不要这样做。有一个名为[Qxt](http://libqxt.bitbucket.org/doc/0.6/)的库，其中包含设计用于发送电子邮件的类（QxtSmtp、QxtMailMessage 和 QxtMailAttachment）。这个库也完全建立在 Qt 之上，所以无论如何你都可以使用 Qt 的套接字代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T13:45:18.210

最近我在 Qt 中遇到了这个 SMTP 实现，效果很好： [https ://github.com/bluetiger9/SmtpClient-for-Qt](https://github.com/bluetiger9/SmtpClient-for-Qt)

我被这个 SO 问题指出： [如何通过 SMTP 发送邮件并使用 Qt 获取它？](https://stackoverflow.com/questions/3717018/how-to-send-mail-via-smtp-and-get-it-by-using-qt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:00:47.000

我会考虑使用一些系统 API，在 Unix 上调用脚本或在 Win 上使用 Outlook 自动化等。直接使用 SMTP 并不像 10 年前那么容易（HELO/EHLO :-)）。考虑身份验证、防火墙等。
即使使用 webkit 和 webmail 提供程序也可能更容易。

# adsense - 将 Google Adsense 添加到电子邮件中

> ID：12340032
> 
> 赞同：-2
> 
> 时间：2012-09-09T14:43:15.003
> 
> 标签：adsense

[谷歌支持中的这个答案](http://support.google.com/affiliatenetwork/publisher/bin/answer.py?hl=en&answer=163188)是否可以说可以将广告放入我发送给客户的电子邮件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T03:21:58.580

该答案专门针对 Google Affiliate Network 广告。它与 AdSense 无关。将 AdSense 放入不违反 AdSense TOS 的电子邮件中的*唯一*受支持方法是通过 AdSense for Feeds 和 Feedburner，但该方法已于 2012 年 11 月关闭。目前，截至 2012 年 12 月，普通 AdSense 发布商**无法**将 AdSense 单元放入电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T14:48:40.953

我想说这意味着如果您遵守电子邮件营销[计划政策](http://www.google.com/ads/affiliatenetwork/publisher/program-policies.html)，您可以在电子邮件中放置 Google Affiliate Network 广告。

您可以使用 Feedburner 和 AdSense for feeds 做到这一点。然后使用[MailChimp](http://mailchimp.com/)之类的邮件程序来接收和发送提要。

# php - 找不到 PHP 语法错误

> ID：12340033
> 
> 赞同：0
> 
> 时间：2012-09-09T14:43:21.757
> 
> 标签：php, sql-server, syntax

我有一个以前工作的 PHP MSSQL 查询，但是自从我更改了一个似乎与查询无关的元素后，它开始抛出错误。

这是查询：

```
<?php 
if (isset($_POST['paper'])) {

$PageHTML = $_POST['ckeditor'];
$PageID = $_GET['id'];

$myServer = "**.***.***.**";
$myUser = "username";
$myPass = "password";
$myDB = "database";

$dbhandle = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn't connect to SQL Server on $myServer"); 
mssql_select_db($myDB) or die;

$dbTABLE = "Table_Name";
$query_sql = sprintf("UPDATE %s SET PageHTML = ('%s') WHERE PageID = '%d'",
$dbTABLE,
$PageHTML,
$PageID); 

if ($result = mssql_query($query_sql, $dbhandle)) {
header('Location: Manage.php');
}
}
?> 
```

错误已开始抛出如下：

```
Warning: mssql_query() [function.mssql-query]: message: Incorrect syntax near 're'.   (severity 15) in (file path) on line 59

Warning: mssql_query() [function.mssql-query]: message: Unclosed quotation mark after  the character string '</p> </div> </td> </tr> </tbody> </table>') WHERE PageID = '2''.   (severity 15) in (file path) on line 59 
```

第 59 行是这一行：

```
if ($result = mssql_query($query_sql, $dbhandle)) { 
```

我已经检查过了，并在其他领域使用了类似的语法。谁能看出哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:04:50.327

您正在尝试将 HTML 代码添加到数据库中，但引号和特殊符号存在问题。是的，你可以说你正在做`sprintf()`，但该功能不能解决`sql`语法问题。例如尝试`addslashes(`）或清理 php 函数。

# ios - Cocos2D重新加载白屏错误

> ID：12340034
> 
> 赞同：4
> 
> 时间：2012-09-09T14:43:24.823
> 
> 标签：ios, cocos2d-iphone

我正在开发一个游戏。当我们创建 EaglView 并 runwithscene 时，它​​第一次可以正常工作。

```
// TAKE THE SHARED DIRECTOR
director = [CCDirector sharedDirector];
// IF THIS IS FIRST OPENING TIME FOR GAME
if (director.openGLView == nil)
{
    // CREATE THE GAME
    if ([CCDirector setDirectorType:kCCDirectorTypeDisplayLink] == NO)
    {
         [CCDirector setDirectorType:kCCDirectorTypeDefault];
    }
    [director setAnimationInterval:1.0/60];
    NSArray* subviews = self.view.subviews;
    for (int i = 0; i < [subviews count]; i++)
    {
        UIView* subview = [subviews objectAtIndex:i];
        if ([subview isKindOfClass:[EAGLView class]])
        {
           [director setOpenGLView:(EAGLView*)subview];
           [director runWithScene:[HelloWorldLayer scene]];
           break;
        }
    }
}

// IF USER WANTS TO OPEN THIS LEVEL SECOND TIME (OR MORE THAN ONE) 
else
{
      [director startAnimation];
      [director replaceScene:[HelloWorldLayer scene]];
} 
```

我不知道为什么，但是当我返回菜单并尝试重新加载游戏时，出现一个白屏，（我设置断点并观察到游戏代码正在运行和初始化），但只出现白屏。

我感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T07:10:50.143

可能是它的根视图控制器背景视图。例如，Window 是根视图控制器，它的背景是白色的。你把你的场景和视图放在那个上面。当你返回你的根视图控制器是 display.so，设置你的根视图控制器（Like-Window）的背景。

# php - php通过get方法从url获取url

> ID：12340035
> 
> 赞同：1
> 
> 时间：2012-09-09T14:43:25.467
> 
> 标签：php, post, parameters, get

我有带有获取 2 个参数 $link 和 $text 的 php 页面我想要获取 $link 参数以及其中的所有参数示例

test.php?link=www.google.com?test=test&test2=test2&text=testtext

我想获取链接 = 'www.google.com?test=test&test2=test2' 并获取文本 = testtext

我使用这个 php 脚本

```
<?php

      $text = $_GET['text']; 
      $link = $_GET['link'];

      echo  $text;
      echo  $link;

?>

output

testtext
www.google.com?test=test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T14:55:17.687

在 GET 上使用参数之前，您应该对参数进行编码。

```
echo '<a href="test.php?link=' . urlencode('www.google.com?test=test&test2=test2') . '&text=' . urlencode('testtext') . '">test</a>'; 
```

这样，google vars 和您的 vars 之间就没有冲突。

有关详细信息，请参阅[urlencode()](http://php.net/manual/en/function.urlencode.php)手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:52:29.733

如果要将 URL 作为参数传递，则必须对其进行转义。否则，参数将`$_GET`在脚本中显示为参数。

您必须使用以下方式生成链接`urlencode()`：

```
$link = "test.php?link=".urlencode("www.google.com?test=test&test2=test2")."&text=" . urlencode("testtext"); 
```

使用字符串时也要使用引号：

```
$text = $_GET['text']; 
$link = $_GET['link']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T14:52:43.883

```
$link_mod = str_replace("?", "&", $_GET['link']);
$array = explode("&", $link_mod);
unset($array[0]); #get rid of www.google.com segment
$segments = array();
foreach ($array as $line) {
   $line_array = explode('=', $line);
   $key = $line_array[0];
   $value = $line_array[1];
   $segments[$key] = $value;
}
print_r($segments); 
```

# php - 无法使用 php 访问 facebook api

> ID：12340042
> 
> 赞同：0
> 
> 时间：2012-09-09T14:44:03.903
> 
> 标签：php, facebook, api, facebook-graph-api

我无法使用 php 访问 facebook api，它在我使用时会引发错误，`require src/facbook.php`
或者`include src/facecbook.php`：

```
facebook needs curl extension for php 
```

我添加了`php_curl`文件并在`php.ini`. 但是没有用。任何人都可以帮助解决问题。请给出详细解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:30:45.073

听起来你的服务器上没有安装 cURL。用这个创建一个 php 文件并运行它：

```
<?php
echo 'cURL is '.(function_exists('curl_init') ?: ' not').' enabled'; 
```

如果它说“cURL 未启用”，那么您需要安装它。请联系您的托管服务提供商，或者如果您正在使用自己的服务器，[请阅读此内容](http://us3.php.net/manual/en/curl.installation.php)。

如果您使用的是免费主机，其中大多数会禁用 cURL 和`file`php 中的所有功能以确保安全。

# c# - 如何运行一个 ac# WinForm 应用程序实例？

> ID：12340043
> 
> 赞同：4
> 
> 时间：2012-09-09T14:44:04.840
> 
> 标签：c#, mutex, single-instance

我有一个 C# 应用程序，它在启动时显示登录表单，并在用户通过身份验证后显示主表单。我使用 Mutex 来限制我的应用程序只能运行一个实例。而且，这仅适用于登录表单。显示主表单后，它不会限制用户重新打开登录表单。我正在寻找一种解决方案，一旦主窗体已经打开，登录屏幕就无法显示。

这是我的 Program.cs

```
 [STAThread]
    static void Main()
    {
        bool mutexCreated=true;

        using (Mutex mutex = new Mutex(true, "eCS", out mutexCreated))
        {
            if (mutexCreated)
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new Login());
            }
            else
            {
                Process current = Process.GetCurrentProcess();
                foreach (Process process in Process.GetProcessesByName(current.ProcessName))
                {
                    if (process.Id != current.Id)
                    {
                        XtraMessageBox.Show("Another instance of eCS is already running.", "eCS already running", MessageBoxButtons.OK, MessageBoxIcon.Information);
                        SetForegroundWindow(process.MainWindowHandle);
                        break;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T05:18:13.280

我做了一些小改动：

```
 namespace CSMutex
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            bool mutexCreated=true;
            using(Mutex mutex = new Mutex(true, "eCS", out mutexCreated))
            {
                if (mutexCreated)
                {
                    Application.EnableVisualStyles();
                    Application.SetCompatibleTextRenderingDefault(false);
                    Login loging = new Login();
                    Application.Run(loging);
                    Application.Run(new Main() { UserName = loging.UserName });
                }
                else
                {
                    Process current = Process.GetCurrentProcess();
                    foreach (Process process in Process.GetProcessesByName(current.ProcessName))
                    {
                        if (process.Id != current.Id)
                        {
                            MessageBox.Show("Another instance of eCS is already running.", "eCS already running", MessageBoxButtons.OK, MessageBoxIcon.Information);
                            //SetForegroundWindow(process.MainWindowHandle);
                            break;
                        }
                    }
                }
            }
        }
    }
} 
```

这按预期工作 - 即即使`Login`关闭表单（并启动主应用程序表单），它也不会让用户再次运行应用程序。我决定不`Main`从内部创建`Login`（我相信您的应用程序是这样工作的），而是将参数传递给`Main`. 我还做了一些小改动，`Login`使其具有`UserName`属性（与 相同`Main`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:07:48.173

如果你对 Microsoft.VisualBasic 的引用没问题，你可以使用它的 SingleInstance 处理。

```
 [STAThread]
    static void Main(string[] args)
    {
        using (System.Threading.Mutex mutex = new System.Threading.Mutex(true, "MyApp.SingleInstance.Mutex", out createdNew))
        {
            MainForm = new MainDlg();
            SingleInstanceApplication.Run(MainForm, StartupNextInstanceEventHandler);
        }
    }

    public static void StartupNextInstanceEventHandler(object sender, StartupNextInstanceEventArgs e)
    {
        MainForm.Activate();
    }

public class SingleInstanceApplication : WindowsFormsApplicationBase
{
    private SingleInstanceApplication()
    {
        base.IsSingleInstance = true;
    }

    public static void Run(Form f, StartupNextInstanceEventHandler startupHandler)
    {
        SingleInstanceApplication app = new SingleInstanceApplication();
        app.MainForm = f;
        app.StartupNextInstance += startupHandler;
        app.Run(Environment.GetCommandLineArgs());
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-09T14:47:33.427

如果您只想限制 a 的一个实例`Form`，您可以执行以下操作：

```
public static class LoginForm 
{
    private static Form _loginForm = new Form();

    public static bool ShowLoginForm(){

        if(_loginForm.Visible)
             return false;

        _loginForm.Show();
        return true;
    }
} 
```

因此，如果有多个客户端会调用此方法，这是显示登录表单的唯一可能方法，如果它已经可见，则不会执行。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-09T14:07:53.297

```
private bool IsSingleInstance()
    {
        string szCurrentProcessName = this.ProductName;
        Process[] processlist = Process.GetProcesses();
        foreach(Process theprocess in processlist)
        {
            string szProcessName = theprocess.MainModule.ModuleName.ToString();
            if (szProcessName.Contains(szCurrentProcessName))
                return false;
        }
        return true;
    } 
```

# python - 您的服务器套接字侦听积压限制为 100 个连接

> ID：12340047
> 
> 赞同：46
> 
> 时间：2012-09-09T14:44:49.743
> 
> 标签：python, flask, wsgi, uwsgi, supervisord

我在 uwsgi 上运行一个烧瓶应用程序。我使用主管来管理 uwsgi 进程。我发现日志说

> 您的服务器套接字侦听积压限制为 100 个连接。

如何克服 100 个连接的限制？我的运行脚本如下：

```
[program:myapp]
command=uwsgi --master -s /tmp/app.sock --module myapp:app --processes 2 -H /srv/sites/mysite chmod-socket 666 --enable-threads 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-09T14:49:52.480

请注意，100 个连接的“侦听积压”并不意味着您的服务器只能处理 100 个同时（或全部）连接 - 这取决于配置的进程或线程的数量。侦听积压是一个套接字设置，告诉内核如何限制侦听套接字的侦听队列中未完成（尚未接受）的连接数。如果挂起的连接数超过指定的大小，则会自动拒绝新的连接。定期为其连接提供服务的正常运行的服务器不应该需要大量的积压工作。

根据手册，您可以使用以下`-l`选项更改监听积压：

```
-l|--listen <num>
       set  socket  listen queue to <n> (default 100, maximum is system
       dependent) 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-04-06T13:22:22.210

`-l`只需在启动服务器时使用or`--listen`选项（如[user4815162342 所指](https://stackoverflow.com/questions/12340047/uwsgi-your-server-socket-listen-backlog-is-limited-to-100-connections/12340078#12340078)）将 uwsgi的监听积压增加到大于 128 的值可能会阻止 uwsgi 启动。Unix 套接字和 TCP 连接侦听队列也有系统级限制，默认为 128，需要增加。

您可以像这样验证该设置：

```
cat /proc/sys/net/core/somaxconn 
```

uwsgi 已被[修补](https://github.com/unbit/uwsgi/pull/18)，如果`--listen`在启动 uwsgi 时传递给参数的值大于系统级别限制，则会导致 uwsgi 严重失败。如果你想设置 uwsgi 的监听队列限制大于系统级限制，你必须首先增加内核的限制。这可以通过执行以下命令来完成：

```
$ echo 4096 > /proc/sys/net/core/somaxconn 
```

或者

```
$ sysctl -w net.core.somaxconn=4096 
```

或者，添加它`net.core.somaxconn=4096`以`/etc/sysctl.conf`使其在重新启动后持续存在。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-23T12:35:16.600

正如之前的答案中所描述的：

1.  增加内核中的连接
2.  **也**增加 uWSGI 中的连接

 ****例子**。如果您使用**docker**和**docker-compose**。

1.  如何增加内核中的连接

在`docker-compose.yml`您描述如何运行 uWSGI 的块中：

```
uwsgi_runner:
    <<: *app-base
    command: /usr/local/bin/uwsgi --ini /app/uwsgi.ini
    # ... other settings ...
    sysctls:
        net.core.somaxconn: 1024 # set max connections to 1024 in kernel 
```

2.  如何在 uWSGI 中增加连接

在`uwsgi.ini`：

```
[uwsgi]
# ... other settings ...
listen = 1024 # set max connections to 1024 in uWSGI 
```

此外，如果您不使用设置文件，您可以直接在**docker-compose 命令**（`-l`或标志）中更改此参数：`--listen``uwsgi.ini`

```
uwsgi_runner:
    <<: *app-base
    command: /usr/local/bin/uwsgi -l 1024 #other-parameters-here 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T21:27:36.453

您可以修改您的 SOMAXCONN`/proc/sys/net/core/somaxconn`以增加此限制。

它只是 linux 调优系统。**

# ruby-on-rails - 路由路径辅助方法

> ID：12340054
> 
> 赞同：3
> 
> 时间：2012-09-09T14:46:25.587
> 
> 标签：ruby-on-rails, routes

我创建了一条新路线，如下所示：

```
 resources :animals do
    member do
      get ':id/resumed_rep_life', :action => 'resumed_rep_life'
    end
  end
  match '/animals/:id/resumed_rep_life' => "animals#resumed_rep_life" 
```

我怎样才能为它建立一个链接？

我试过`resumed_rep_life_animal_path(animal)`但它不起作用（找不到方法）。我的路由正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T14:48:55.517

更改此行：

```
match '/animals/:id/resumed_rep_life' => "animals#resumed_rep_life" 
```

对此：

```
match '/animals/:id/resumed_rep_life' => "animals#resumed_rep_life", :as => 'resumed_rep_life_animal' 
```

# mysql - 关于 hasMany 表的数据库性能讨论

> ID：12340058
> 
> 赞同：0
> 
> 时间：2012-09-09T14:47:33.607
> 
> 标签：mysql, cakephp

我有记录用户购买交易的 hasMany 表。

我还将编写一些代码逻辑，以便它根据具有相同 user_id 的最新创建日期的行获取最新的帐户余额。

我想知道是否还应该在每次交易后在用户表上记录最新的帐户余额？

这对 mysql 性能有帮助吗，还是我真的不应该担心它，因为它不是那么重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:09:59.473

每次您创建一个像您正在考虑的计算字段时，您都会在系统中引入冗余数据。有时软件开发人员选择这样做是为了提高性能，因此您需要在这里衡量的是维护冗余数据的成本与使用计算字段方法实现的平均时间节省。

我会考虑以下几点：

*   交易关系会增长到多大？
*   多久会创建一次新交易？
*   会有多少新的交易来源？
*   你能加快查询速度吗？（例如日期搜索比整数搜索慢，你可以使用 id，假设越大越新？）

使用计算字段本质上没有什么不好的，只是要注意它所涉及的风险。

干杯

# wix - 如何在 Wix UI 编辑控件上执行验证

> ID：12340061
> 
> 赞同：2
> 
> 时间：2012-09-09T14:47:39.933
> 
> 标签：wix

我如何在 wix Edit 控件上进行验证并仅在用户输入一些字符串时才使 Next 按钮可用（不能为空）

```
<Property Id="BASEKITPATH" Value=" " /> 
```

```
<Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)">
  <Condition Action="disable"><![CDATA[BASEKITPATH = " "]]></Condition> 
  <Condition Action="enable"><![CDATA[BASEKITPATH <> " "]]></Condition>
</Control> 
```

使用上面的代码，安装程序启动时 Next 按钮变为 ReadOnly，但是当我更改文本时 Next 按钮没有任何变化，Next 保持 ReadOnly

似乎是什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:10:59.930

这是底层 Windows Installer 的已知限制。它有这样的场景，其中 ControlConditions 不起作用，因为它们不验证在显示 UI 时已更改的属性。

典型的解决方法是使用互斥的 ControlEvents。一个调用 SpawnDialog 以显示验证错误消息，另一个调用下一​​个适用的对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T20:30:29.940

例如，如果有人看，他可以在 Wix 的源代码中找到它。打开“WixUI_InstallDir.wxs”并检查“InstallDirDlg”对话框。

代码示例：

```
 <Publish Dialog="InstallDirDlg" Control="Back" Event="NewDialog" Value="LicenseAgreementDlg">1</Publish>
        <Publish Dialog="InstallDirDlg" Control="Next" Event="SetTargetPath" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
        <Publish Dialog="InstallDirDlg" Control="Next" Event="DoAction" Value="WixUIValidatePath" Order="2">NOT WIXUI_DONTVALIDATEPATH</Publish>
        <Publish Dialog="InstallDirDlg" Control="Next" Event="SpawnDialog" Value="InvalidDirDlg" Order="3"><![CDATA[NOT WIXUI_DONTVALIDATEPATH AND WIXUI_INSTALLDIR_VALID<>"1"]]></Publish>
        <Publish Dialog="InstallDirDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg" Order="4">WIXUI_DONTVALIDATEPATH OR WIXUI_INSTALLDIR_VALID="1"</Publish>
        <Publish Dialog="InstallDirDlg" Control="ChangeFolder" Property="_BrowseProperty" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
        <Publish Dialog="InstallDirDlg" Control="ChangeFolder" Event="SpawnDialog" Value="BrowseDlg" Order="2">1</Publish> 
```

检查“SpawnDialog”事件。

# c++ - 非连续内部数字表示的位移

> ID：12340062
> 
> 赞同：1
> 
> 时间：2012-09-09T14:47:50.723
> 
> 标签：c++, bit-manipulation, arbitrary-precision

我正在编写一个 c++ 任意整数库作为作业。我在内部将数字表示为无符号整数的向量，以 10^n 为基数，其中 n 尽可能大，同时适合单个无符号整数数字。

我做出这个选择是为了在空间、性能和数字访问之间进行权衡（它允许我获得比使用 base 10 更好的性能，而在转换为人类可读字符串时不会增加任何复杂性）。

例如：

base10(441243123294967295) 18 位

base1000000000(441243123,294967295) 2 位（逗号分隔）

使用 uint32 的内部表示

[00011010 01001100 11010101 11110011] [00010001 10010100 11010111 11111111]

为了完成作业，我必须实现位移和其他位运算符。对具有这种内部表示的数字实施移位是否有意义？

我应该更改为基数 2^n 以便内部表示的所有位都有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:50:01.093

> 我应该更改为基数 2^n 以便内部表示的所有位都有意义吗？

绝对是的！

不仅如此，现代计算机一般都是关于base2的。如果这是一个练习，你很可能想学习如何做好它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T14:55:46.253

您*可以*，但您不必：无论您稍后使用什么基数来*解释它**，*位移都会使数字加倍，因为在内部这些s 仍然被底层移位操作解释为二进制。你的实施将不得不决定那里的权衡，因为你的转变将变得更难实施。另一方面，base-10 中的打印将保持更简单。*`int`*

 *您可能会考虑使用十进制系统的另一种解决方案是使用[*二进制编码的小数 (BCD)*](http://en.wikipedia.org/wiki/Binary-coded_decimal)。过去，用于加速这些操作的硬件（例如 6502，Apple-2 的 CPU）包括在 BCD 解释中添加字节的特殊指令。如果使用此表示，则必须进行特殊校正，但这可能是一个值得学习的练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T14:53:02.617

这种类型的所有库都使用基数 2。他们这样做是有原因的：更快的处理速度、按位运算的可能性、更紧凑的存储等等。这些优势超过了转换为小数的难度。因此强烈建议您转换为二进制。*

# gwt - 从 GWT 中的内部面板传播事件

> ID：12340063
> 
> 赞同：0
> 
> 时间：2012-09-09T14:47:58.317
> 
> 标签：gwt, mouseover, gwt2

我创建了组件，它是复合面板（我们称之为**A**），它在其他几个复合面板（**B1**，**B2**，**B3** ...）内部，并且每个内部复合面板（**B1**，**B2**，**B3** ...）都会自行触发 OnMouseOver 和没关系（我知道如何将事件添加到复合面板）
问题：
但是如何将此事件传播到主要的复合面板 (A)。我想在某些视图中使用面板**A**，如下所示：

```
@UiField
MyCompositePanelA panelA; //which has inside B1 B2 B3 ...

...

@UiHandler(value={"panelA"})
void onOver(MouseOverEvent e) { //or some other custom event

    if (e... =  B1) // recognize - was MouseOverEvent on B1 
} 
```

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:59:24.063

您有两个选择：EventBus，这在您的用例中很可能是一种过度杀伤，或者将处理程序附加到您的内部面板。例如，

(a) 将此方法添加到您的内部面板小部件：

```
public void addMyMouseOverHandler(MouseOverHandler mouseOverHandler) {
    myInternalPanel.addDomHandler(mouseOverHandler, MouseOverEvent.getType());
} 
```

(b) 然后，您创建此处理程序：

```
MouseOverHandler mouseOverHandler = new MouseOverHandler() {

    @Override
    public void onMouseOver(MouseOverEvent event) {
        // do something when this event fires
    }
} 
```

并将其附加到您创建的每个内部面板。

如果您需要的操作超出了小部件的范围，则无法使用 Ui:Binder 附加此处理程序。您需要创建此处理程序，其中您拥有完成操作所需的所有内容（如在您的视图中），然后将其附加到小部件。

换句话说，在 GWT 中，您无需等待事件传播到所需的级别（例如，您的视图）：您在处理程序中指定所需的操作，然后将此处理程序附加到小部件。

# iphone - 没有平滑的图像查看器

> ID：12340065
> 
> 赞同：1
> 
> 时间：2012-09-09T14:47:59.080
> 
> 标签：iphone, ios, cocoa-touch, ipad, core-graphics

如何为 iOS 创建一个在缩放时不进行图像平滑的图像查看器？[就像Screenshots Journal](http://itunes.apple.com/us/app/screenshot-journal/id515287854?mt=8)的图像查看器一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:58:12.847

如果您有一个`NSGraphicsContext`进行绘图的地方，您可以调用`[-NSGraphicsContext setShouldAntialias:NO]`.

# performance - 条件连接的性能

> ID：12340068
> 
> 赞同：4
> 
> 时间：2012-09-09T14:48:29.480
> 
> 标签：performance, sql-server-2008, join, conditional

我对以下查询的性能有疑问：

```
DECLARE @detail_level INT = 1,
        @DETAIL_1     INT = 1,
        @DETAIL_2     INT = 2,
        @DETAIL_3     INT = 4

SELECT mtbl.*,
       CASE
         WHEN @detail_level & @DETAIL_1 <> 0 THEN tbl_1.value
         ELSE NULL
       END,
       CASE
         WHEN @detail_level & @DETAIL_2 <> 0 THEN tbl_2.value
         ELSE NULL
       END,
       CASE
         WHEN @detail_level & @DETAIL_3 <> 0 THEN tbl_3.value
         ELSE NULL
       END
FROM   mtbl
       LEFT OUTER JOIN tbl_1
         ON @detail_level & @DETAIL_1 <> 0
            AND mtbl.KEY = tbl_1.KEY
       LEFT OUTER JOIN tbl_2
         ON @detail_level & @DETAIL_2 <> 0
            AND mtbl.KEY = tbl_2.KEY
       LEFT OUTER JOIN tbl_3
         ON @detail_level & @DETAIL_3 <> 0
            AND mtbl.KEY = tbl_3.KEY
WHERE  mtbl.KEY = @something 
```

查询引擎是否会通过使用详细级别过滤器来优化查询，以避免对这些详细表列进行不必要的表连接和不必要的表行访问？

如果是，查询引擎甚至不会为那些不必要的表获取索引锁吗？

我在 SQL Server 2008 中捕获了查询计划，即使细节级别不匹配，索引搜索操作仍然存在。但是细节较少的查询比具有完整细节（数据量约 500,000）的查询快（约​​ 30%）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:17:20.370

您需要检查执行计划以确定。当我创建以下示例表时

```
CREATE TABLE tbl_1([KEY] INT PRIMARY KEY, value INT)
CREATE TABLE tbl_2([KEY] INT PRIMARY KEY, value INT)
CREATE TABLE tbl_3([KEY] INT PRIMARY KEY, value INT)
CREATE TABLE mtbl([KEY] INT PRIMARY KEY, value INT)

INSERT INTO mtbl VALUES(1,1),(2,2) 
INSERT INTO tbl_1 VALUES(1,1),(2,2)
INSERT INTO tbl_2 VALUES(1,1),(2,2)
INSERT INTO tbl_3 VALUES(1,1),(2,2) 
```

您的查询给出了执行计划

[![计划](../Images/458c469cf411fea55b5c80f3f2881edc.png)](https://i.stack.imgur.com/cayPc.png)

虽然这**似乎**显示了针对所有四个成本相同的表的操作，但这有点误导。实际上只有其中两个被访问。（即使在实际执行计划中显示的成本也只是估计成本。）

运行后`SET STATISTICS IO ON;`，您的示例查询返回

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'tbl_1'. Scan count 0, logical reads 2, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0.
Table 'mtbl'. Scan count 0, logical reads 2, physical reads 0, read-ahead reads 0, lob logical reads 0, lob physical reads 0, lob read-ahead reads 0. 
```

如您所见，结果中既没有`tbl_2`也没有`tbl_3`特征。查看索引 seek 的属性`tbl_3`表明该运算符从未被执行（执行次数 = 0）

[![寻找](../Images/6782a6fa6ffc7dfffc82ca90eae994f3.png)](https://i.stack.imgur.com/ae3yj.png)

这是因为外连接位于带有启动谓词的过滤器下方，并且仅在其评估结果为 true 时调用。

[![筛选](../Images/d517017e793744c1f4709ea2b788bf98.png)](https://i.stack.imgur.com/03iD6.png)

关于您关于锁定的问题，没有对对象进行行或页面锁定， `tbl_2`或者`tbl_3`仍然`IS`对对象进行锁定。这可以通过运行看到

```
DBCC TRACEON(1200,3604,-1)
/*Your query*/ 
DBCC TRACEOFF(1200,3604,-1) 
```

`IS`锁与模式修改、批量更新或对象上的独占锁[不兼容。](http://msdn.microsoft.com/en-us/library/ms186396%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T14:54:29.857

SQL Server 将创建一个适用于任何参数值的查询计划。但它会针对它遇到的参数的第一个版本进行优化。这称为“参数嗅探”。

`option (recompile)`您可以使用查询提示强制重新编译。重新编译会增加 20-30ms 的查询时间，但查询计划将针对特定的参数值进行优化。

另一种选择是使用动态 SQL 生成只连接所需表的查询。这会导致多个缓存的执行计划。这表现最好，但代价是难以维护。

作为旁注，左连接表的列设置为`null`当没有行匹配`on`条件时。所以你可以缩短：

```
case when @detail_level & @DETAIL_1 <> 0 then tbl_1.value else null end 
```

至：

```
tbl_1.value 
```

# android - 如何确保录制视频的播放方向正确？

> ID：12340069
> 
> 赞同：4
> 
> 时间：2012-09-09T14:48:39.557
> 
> 标签：android, video, orientation, video-capture, android-video-player

我正在使用[`MediaStore.ACTION_VIDEO_CAPTURE`](http://developer.android.com/guide/topics/media/camera.html#intent-video)意图捕获视频，然后使用`VideoView`. 我想知道拍摄的视频的方向。

我不想在调用意图时使用方向，因为用户可能会在按下快门按钮之前旋转设备。我也不想实现我自己的自定义视频捕获。

视频的方向是否存储在保存的文件中和/或在意图结果中返回？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T04:05:15.137

> 视频的方向是否存储在保存的文件中和/或在意图结果中返回？

AOSP`VideoCamera`活动确实将相机设备的旋转值提供给该`MediaRecorder.setOrientationHint()`方法。以下是与此相关的代码中的代码摘录[`VideoCamera.initializeRecorder()`](http://androidxref.com/7.1.1_r6/xref/packages/apps/LegacyCamera/src/com/android/camera/VideoCamera.java)：

```
 // See android.hardware.Camera.Parameters.setRotation for
    // documentation.
    // Note that mOrientation here is the device orientation, which is 
    // the opposite of what getWindowManager().getDefaultDisplay().getRotation() 
    // would return, which is the orientation the graphics need to rotate 
    // in order to render correctly.
    int rotation = 0;
    if (mOrientation != OrientationEventListener.ORIENTATION_UNKNOWN) {
        CameraInfo info = CameraHolder.instance().getCameraInfo()[mCameraId];
        if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
            rotation = (info.orientation - mOrientation + 360) % 360;
        } else {  // back-facing camera
            rotation = (info.orientation + mOrientation) % 360;
        }
    }
    mMediaRecorder.setOrientationHint(rotation); 
```

这是[`setOrientationHint()`](http://developer.android.com/reference/android/media/MediaRecorder.html#setOrientationHint%28int%29)解释信息存储的文档：

> 设置输出视频播放的方向提示。此方法应在 prepare() 之前调用。此方法在视频录制过程中不会触发源视频帧旋转，而是在输出格式为 OutputFormat.THREE_GPP 或 OutputFormat.MPEG_4 时在输出视频中添加包含旋转角度的合成矩阵，以便视频播放器选择合适的播放方向。请注意，某些视频播放器可能会选择在播放期间忽略视频中的合成矩阵。

由于您使用框架的`VideoView`小部件来播放视频，它应该已经正确处理了合成矩阵中的信息，您只需要比较视频的宽度和高度来决定是否为播放设置横向或纵向活动。一种简单的方法是调用[`ThumbnailUtils.createVideoThumbnail()`](http://developer.android.com/reference/android/media/ThumbnailUtils.html#createVideoThumbnail%28java.lang.String,%20int%29)（内部使用`MediaMetaDataRetriever`）并检查返回位图的分辨率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-22T22:58:55.170

类似于 al。在他的回答中建议，我使用`MediaMetadataRetriever`但`METADATA_KEY_VIDEO_ROTATION`键：

```
MediaMetadataRetriever mediaMetadataRetriever = new MediaMetadataRetriever();
mediaMetadataRetriever.setDataSource( absoluteVideoFilePath );
String orientation = mediaMetadataRetriever.extractMetadata(
         MediaMetadataRetriever.METADATA_KEY_VIDEO_ROTATION ); 
```

我检查了使用前置摄像头的所有 4 个不同方向捕获的视频，元数据总是不同的。注意：`METADATA_KEY_VIDEO_ROTATION`需要 API Level 17 或以上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:29:52.740

您可以使用 MediaMetadataRetriever 获取视频的宽度和高度，并在加载之前确定方向。

# iphone - Xcode 4/警告 - 未使用的表达式结果

> ID：12340072
> 
> 赞同：0
> 
> 时间：2012-09-09T14:48:59.260
> 
> 标签：iphone, xcode4, warnings, expression

这是我的代码

```
#if defined(GIAC_NO_OPTIMIZATIONS) || ((defined(VISUALC) ||    defined(__APPLE__)) && !defined(GIAC_VECTOR))
    if (0){ 1; }
#else 
```

如何摆脱警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T14:56:14.970

您可以通过使代码执行某些操作来消除警告。从不使用 1 的“结果”。您的意思是将 1 分配给变量吗？如果不是，则警告是正确的。代码没有做任何事情，通常这表明它有问题。你想用这段代码完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:41:57.893

注释掉“if”行（或“1”），它根本不做任何事情。

# c - 计算从 1 到 n 的所有偶数平方的最快方法？

> ID：12340073
> 
> 赞同：1
> 
> 时间：2012-09-09T14:49:11.187
> 
> 标签：c, factors

我在 c 中这样做了：

```
#include<stdio.h>

int main (void)
{
 int n,i;

 scanf("%d", &n);

 for(i=2;i<=n;i=i+2)
 {
   if((i*i)%2==0 && (i*i)<= n)
      printf("%d \n",(i*i));
 }
 return 0;
} 
```

解决这个问题的更好/更快的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T14:55:41.553

让我不仅说明一个快速解决方案，还说明如何推导出它。从列出所有方块的快速方法开始，然后从那里开始工作（伪代码）：

```
max = n*n
i = 1
d = 3

while i < max:
    print i
    i += d
    d += 2 
```

因此，从 4 开始，仅列出偶数平方：

```
max = n*n
i = 4
d = 5

while i < max:
    print i
    i += d
    d += 2
    i += d
    d += 2 
```

现在我们可以缩短 while 循环结束时的混乱：

```
max = n*n
i = 4
d = 5

while i < max:
    print i
    i += 2 + 2*d
    d += 4 
```

请注意，我们一直在使用`2*d`，因此最好继续计算：

```
max = n*n
i = 4
d = 10

while i < max:
    print i
    i += 2 + d
    d += 8 
```

现在请注意，我们一直在添加`2 + d`，因此我们可以通过将其合并到以下内容中做得更好`d`：

```
max = n*n
i = 4
d = 12

while i < max:
    print i
    i += d
    d += 8 
```

快速燃烧。计算每个平方只需要两次加法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T14:54:37.657

我喜欢你的解决方案。我会提出的唯一建议是：

*   将`(i*i)<=n`for 放在 for 循环的中间子句，然后它会被更早地检查，并且你会更快地跳出循环。
*   您无需检查是否`(i*i)%2==0`，因为 'i' 始终为正数，而正平方始终为正数。
*   考虑到这两个变化，您可以摆脱 for 循环中的 if 语句并直接打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T14:54:41.403

偶数的平方是偶数。所以，你真的不需要再次检查它。以下是代码，我建议：

```
for (i = 2; i*i <= n; i+=2)
     printf ("%d\t", i*i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:09:38.933

循环中的最大值`i`应该是 的平方根的底`n`。

原因是任何`i`大于此的（整数）的平方都将大于`n`。因此，如果您进行此更改，则无需检查`i*i <= n`.

此外，正如其他人所指出的那样，检查**偶数**`i*i`是没有意义的，因为所有偶数的平方都是偶数。

 **你忽略**奇数** 是对的，`i`因为任何奇数**都是奇数**。`i``i*i`

 ****具有上述更改的代码如下：**

```
#include "stdio.h"
#include "math.h"

int main () 
{
    int n,i;

    scanf("%d", &n);

    for( i = 2; i <= (int)floor(sqrt(n)); i = i+2 ) {       
        printf("%d \n",(i*i));
    }

    return 0;
} 
```****

# java - 有人可以解释我在这个二维数组游戏中做错了什么吗

> ID：12340075
> 
> 赞同：0
> 
> 时间：2012-09-09T14:49:20.657
> 
> 标签：java, arrays, 2d

我在这个问题上花了 4 天时间，搜索了无数可能的解决方案，现在我要拔头发了。我试图让扫雷二维字符数组游戏首先计算地雷周围的地雷（基本上是地雷周围的 8 个街区）然后将地雷周围的字符转换为整数。如果有人可以提供帮助，我将不胜感激。这是明天要交的作业。我觉得自己像个傻瓜，但我确实在这个问题上度过了不眠之夜。:'( 有人请帮助示例 m is mine here 是 void 方法的一部分，该方法假设检查矿井周围的区域并将其转换为调用相邻矿井方法的数字

```
 for(this.rows = 0; rows < board.length; rows++) {
           for(this.cols = 0; cols < board[rows].length; cols++) {  

            for(int i = -1; i <= 1; i++) {
                        for(int j = -1; j <= 1; j++) {
                            if(i == 0 && j == 0) {
                                continue;
                            }
                            else 
                                if(inBounds(rows + i, cols + j))
                                board[i][j]=(char)(48+adjacentMines(i,j));

                            }
                        }

            }
    }      
    } 
```

当我想要这样的东西时，我希望它在选择坐标时看起来像这样，其中 x 是选定的坐标而不是我的坐标，所以我想要这样的输出。上面的数组只是当前状态，我想用数字替换输出中的 e | 0 | 1 | 0 | | 0 | x | 1 |
| 0 | 0 | 0 |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:00:54.437

有一个空语句：

```
if(inBounds(row + i, col + j)&&mineBoard[row][col]==true); 
```

注意末尾的分号。

此外，在后面的代码片段中， for`i`和的循环`j`是多余的。你应该摆脱它们，而且你不应该计算被占用的牢房的地雷。

# magento - 显示最近查看的未登录？

> ID：12340079
> 
> 赞同：0
> 
> 时间：2012-09-09T14:49:56.897
> 
> 标签：magento

对于 Magento 电子商务，我想问一些问题。

如何在没有登录的情况下显示最近在 magento 中查看的内容？

谢谢

阿尔菲斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:38:27.970

在您的 local.xml 文件中 (app/design/frontend/default/YOURTEMPLATE/layout/local.xml)

```
<reference name="left"> <!-- changed from “right” -->
<block type="reports/product_viewed" after="-" name="right.reports.product.viewed" template="reports/product_viewed.phtml" /></reference> 
```

这意味着最近查看的项目存储在 Magento 的报告模型中，因此您可以从该模型中获取产品，并且可以在需要显示的任何地方显示。

使用下面的代码

```
$collection = Mage::getSingleton('Mage_Reports_Block_Product_Viewed')->getItemsCollection(); 
```

这给出了最近查看的项目的数组。

希望这可以帮助！！！

# android - 当我尝试发送附件时，我的附件未发送

> ID：12340080
> 
> 赞同：0
> 
> 时间：2012-09-09T14:49:57.083
> 
> 标签：android

我有一个名为 card1.jpg 的文件存储在 assets 文件夹中。当我的程序运行时，它会在电子邮件中显示一个纸夹，当我按下发送时，似乎一切正常。但是....没有任何附件被发送。

代码：case R.id.butEmail: Intent msg = new Intent(Intent.ACTION_SEND); msg.setType("文本/纯文本"); msg.putExtra(Intent.EXTRA_EMAIL, new String[] {"tedpottel@gmail.com"}); msg.putExtra(Intent.EXTRA_TEXT, "附加图片"); msg.putExtra(Intent.EXTRA_SUBJECT, "Just Feet");

```
 String rawFolderPath = "file://android_assets//card1.jpg";

            Uri emailUri = Uri.parse(rawFolderPath );
            msg.putExtra(Intent.EXTRA_STREAM, emailUri);
            msg.setType("application/jpg");
            startActivity(Intent.createChooser(msg, "Emailinng..."));

            break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:49:28.000

Two points:

*   You are using wrong path to the asset folder. There should be three slashes. And you need not to use double slashes for the folder hierarchy. The correct path to the asset folder is:

    > file:///android_assets/folder1/folder2/image.png"

*   Your asset folder is local to your application(your process) so, applications outside your process(application) cannot access your asset folder.

# backbone.js - 从离线 localStorage 与服务器同步时合并更改

> ID：12340083
> 
> 赞同：1
> 
> 时间：2012-09-09T14:50:13.683
> 
> 标签：backbone.js, local-storage, jqxhr

我计划为backbone.us 使用localStorage 适配器，以允许它同步/获取到本地存储，而不是通过jqXHR。这是为了让我的应用程序可以离线工作。

但是，一旦我的应用程序重新上线，我会进行 ajax 调用以将本地数据集与服务器同步，或者构建某种“重播”系统以仅发送更改。

但是，当数据集发生分歧（服务器和客户端都发生变化）时，我将如何处理？哪个来源有正确的数据集？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T06:49:33.917

您应该能够通过执行以下操作来创建简单的双向同步协议：

1.  在所有应该同步的表上，有一个“上次更新”时间戳字段，每当您修改一行时都会更新该字段（包括插入和删除，请参阅下文）。

2.  对于“id”，避免使用自动递增的整数（这需要与服务器对话才能确定下一个值），而是使用 GUID。localStorage 适配器默认执行此操作。使用 GUID，服务器和客户端都可以生成新行，而无需相互交谈。

3.  您需要使用“软删除”。与其实际删除一行，不如使用一个标记为已删除的标志，并在需要列出对象集合时过滤此标志。这样，即使删除也能正确传播。您可以对在一定时间内仍被删除的所有行执行“内务处理”（实际上是删除行），其中该时间需要大于最大可能的“离线”时间，以确保删除已经传播。

4.  存储您上次与客户端上的服务器同步的本地时间戳。确保使用正确的时区在服务器和客户端上存储时间戳很重要。

5.  当您从客户端与服务器同步时，将您的“上次同步”时间戳发送给它，服务器应该向您发送自那时以来更改的所有内容。使用服务器提供的新时间戳，将其作为新的“上次同步时间”存储在客户端本地。更新/插入根据 GUID 接收到的任何行（如果您在本地有，则更新，如果没有，则插入）。

6.  如果您有本地存储的更改，请将自原始时间戳以来的所有本地修改的行从您的客户端发送到服务器，最好在从服务器读取更新之前（您也可以在之后执行此操作，但无论如何，您可能应该检查更新的时间戳以计算找出哪个更新更新，并根据您选择的任何冲突解决策略进行处理，如果不重要，则不处理）。

7.  当您意识到对于实际的跨平台本地存储使用而言，您目前被限制为大约 2.5 兆字节的数据时会感到痛苦。这有望很快改变。在您决定改用 IndexedDB 来解决这些限制之前，API 还没有稳定下来，而且大多数实现都是半途而废且不兼容的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:41:50.427

如何简单地确保您的数据在上次编辑时有一些标记？然后就可以比较了，如果服务器较新，就覆盖客户端，反之亦然。

# php - PHP中的JS ..警报没有出现

> ID：12340086
> 
> 赞同：0
> 
> 时间：2012-09-09T14:50:49.000
> 
> 标签：php, javascript

已编辑：我已将代码更改如下并收到“NaN”错误！有人可以给我一个关于那是什么的线索以及要解决的提示吗？谢谢。

* * *

有人可以告诉我这段代码有什么问题吗？

1.  首先，我在 PHP 中调用了 Javascript，这真的可能吗？
2.  我调用第二个警报的方式有问题吗？（尽管它是否可能在 php 中使用 js）这意味着显示文本输入和在警报消息中选择的选项。
3.  我需要在循环的最后一个花括号之后放置“行尾”（;）吗？

这是代码：

```
<?php
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQL="SELECT sbstart, sbend FROM newchk";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$nor=mysql_num_rows($run);
?>
<!DOCTYPE html>
<html>
<head><title></title>
<script type="text/javascript">
function ValidateData() {
var TextIn = document.getElementById('txtN');
    if(TextIn.value == ""){
        alert ("Text field is empty"); 
        return false;
    }else{
        var TextIn = document.getElementById('options');
        alert (<?php $i ?> + TextIn.value);
    }
}
</script>
</head>
<body>
<form onsubmit="return ValidateData()" method="POST">
<select STYLE='width:90px'><?php
while ($rec = mysql_fetch_array($run))
{
    for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
    {
        echo "<option id='options' value=''.$i.''>$i<br></option>";
    }
}
?>
</select>
<input type="text" name="txtN">
<input type="submit" name="subN" value="Save">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:22:41.300

您应该在中传递表单详细信息`onsubmit`，您的选择没有名称，您无法命名选项，您需要命名选择框：

```
<form onsubmit="return ValidateData(this)" method="POST">
<select STYLE='width:90px' name='options'><?php
while ($rec = mysql_fetch_array($run))
{
    for($i=$rec['sbstart']; $i<=$rec['sbend']; $i++)
    {
        echo "<option value='$i'>$i<br></option>";
    }
}
?>
</select>
<input type="text" name="txtN">
<input type="submit" name="subN" value="Save">
</form> 
```

和你的功能：

```
<script type="text/javascript">
function ValidateData(form) {
    if(form.txtN.value == ""){
        alert ("Text field is empty"); 
        return false;
    } else {
        alert (form.options[form.options.selectedIndex].value + form.txtN.value);
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:22:43.513

试试这个：

```
alert (<?php echo $i; ?> + TextIn.value); 
```

您当前编写代码的方式将输出：

```
alert ( + TextIn.value); 
```

...这是无效的JS。

# jquery - 添加项目（表格行）jQuery

> ID：12340087
> 
> 赞同：0
> 
> 时间：2012-09-09T14:51:05.710
> 
> 标签：jquery, html

我正在尝试将更多行添加到 TD 项目中。所以，当我点击一个链接时，所有的 TD 都会得到一个额外的 TR。

```
<td>
    <tr>Test</tr>
    <tr>Test</tr>
    <tr>Test</tr>
</td>

<td>
    <tr>Test</tr>
    <tr>Test</tr>
    <tr>Test</tr>
</td>

<td>
    <tr>Test</tr>
    <tr>Test</tr>
    <tr>Test</tr>
</td> 
```

我一直在尝试这个，

```
$('#add_rows').click(function()
{
    $("td").append("<tr>Test</tr>");
}); 
```

但它不会工作......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:56:25.217

您的表结构不正确。`<tr>`有`T`能力`R`，所以，他们有`<td>`（有`T`能力的`D`）项目。您的选择器表达式是正确的，但正如我所说，您的结构不正确，因此您的代码不起作用。看看：http: [//jsfiddle.net/h6K66/](http://jsfiddle.net/h6K66/)

所以，你只需要反转你的结构。

# c - 带有开始和结束标签的 C 宏？

> ID：12340088
> 
> 赞同：1
> 
> 时间：2012-09-09T14:51:06.880
> 
> 标签：c, exception-handling, macros, setjmp

我刚开始阅读[这篇](http://www.on-time.com/ddj0011.htm)关于在 c 中使用 setjmp( jmp_buf ) 和 longjmp( jmp_buf, int ) 处理异常的文章。因此，我基本上构建了使用 xRecord 类型的局部变量的链接列表并将其链接到列表。（示例2）它工作得很好。但在示例 3 中，这些步骤被总结为宏（XTRY 和 XEND）。最让我恼火的是，示例 2 的实际 switch 语句只是在 3 中“消失”了。

示例 2：

```
 #define DIVIDE_BY_ZERO -3
   int SomeFunction(int a, int b)
   {
      if (b == 0) // can't divide by 0
         XRaise(DIVIDE_BY_ZERO);
      return a / b;
   }

   void main(void)
   {
      XRecord XData;
      XLinkExceptionRecord(&XData);
      switch (setjmp(XData.Context))
      {
         case 0: // this is the code block
            {
               int Result = SomeFunction(7, 0);
               // continue working with Result
            }
            break;
         case DIVIDE_BY_ZERO:
            printf("a division by zero occurred\n");
            break;
         default:
            printf("some other error occurred\n");
            break;
         case XFINALLY:
            printf("cleaning up\n");
      }
      XUnLinkExceptionRecord(&XData);
   } 
```

* * *

示例 3：

```
void main(void)
   {
      XTRY
         case XCODE: // this is the code block
            {
               int Result = SomeFunction(7, 0);
               // continue working with Result
            }
            break;
         case DIVIDE_BY_ZERO: // handler for a
                                 specific exception
            printf("a division by zero occurred\n");
            break;
         default: // default handler
            printf("some other error occurred\n");
            break;
         case XFINALLY: // finally handler
            printf("cleaning up\n");
      XEND
   } 
```

我的问题是，如何构建这些“打开和关闭”宏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:38:57.023

如果您比较这两个示例，并记住 C 宏是简单的文本替换，那么宏应该是什么是显而易见的：

```
#define XTRY  XRecord XData; \
              XLinkExceptionRecord(&XData); \
              switch (setjmp(XData.Context)) \
              {

#define XEND  } \
              XUnLinkExceptionRecord(&XData); 
```

请注意使用`\`允许宏跨越多行。

您可能还希望宏打开和关闭一个新范围（通过添加`{`and `}`），以便连续使用多个宏不会由于变量的多个定义而产生错误`XData`。您还可以使用该[`do / while(0)`技巧](https://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros)允许将这些宏直接放置在`if`,`for`等内部而不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:01:01.630

不要隐藏`{}`这只会造成麻烦。使用符合 C99 的编译器，您可以隐藏局部变量和在块之前和之后执行的一些代码：

```
#define MY_BLOCK                                          \
for (int once = 0; once < 1; ++once)                      \
  for (XRecord XData = { 0 }; once < 1; ++once)           \
    for (XLinkExceptionRecord(&XData); (XUnLinkExceptionRecord(&XData), (once < 1)); ++once) \
       switch (setjmp(XData.Context)) 
```

好处是您只需要一个宏而不是两个，并且`{}`可以清楚地指示构造的范围，即使对于您最喜欢的编辑器也是如此。

# javascript - AngularJS ng-repeat 处理空列表情况

> ID：12340095
> 
> 赞同：378
> 
> 时间：2012-09-09T14:52:35.040
> 
> 标签：javascript, angularjs, angularjs-ng-repeat, angularjs-ng-show

我认为这将是一件很常见的事情，但我找不到如何在 AngularJS 中处理它。假设我有一个事件列表并想用 AngularJS 输出它们，那么这很容易：

```
<ul>
    <li ng-repeat="event in events">{{event.title}}</li>
</ul> 
```

但是当列表为空时，我该如何处理呢？我想在列表所在的位置放置一个消息框，其中包含“无事件”或类似内容。唯一会接近的是`ng-switch`with `events.length`（当一个对象而不是数组时，我如何检查是否为空？），但这真的是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：570
> 
> 时间：2012-09-09T17:19:56.230

您可以使用[ngShow](http://docs.angularjs.org/api/ng.directive:ngShow)。

```
<li ng-show="!events.length">No events</li> 
```

见[例子](http://jsfiddle.net/C29As/)。

或者你可以使用[ngHide](http://docs.angularjs.org/api/ng.directive:ngHide)

```
<li ng-hide="events.length">No events</li> 
```

见[例子](http://jsfiddle.net/C29As/37/)。

对于对象，您可以测试[Object.keys](https://stackoverflow.com/a/6921193/457375)。

* * *

## 回答 #2

> 赞同：371
> 
> 时间：2013-09-03T13:00:36.043

如果您想将其与过滤列表一起使用，这是一个巧妙的技巧：

```
<ul>
    <li ng-repeat="item in filteredItems  = (items | filter:keyword)">
        ...
    </li>
</ul>
<div ng-hide="filteredItems.length">No items found</div> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-12-01T21:40:23.290

如果您只想在列表为空时从 DOM中删除 ，则可能需要查看[angular-ui 指令：](http://angular-ui.github.com/#directives-if) `ui-if``ul`

```
<ul ui-if="!!events.length">
    <li ng-repeat="event in events">{{event.title}}</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-01-02T07:49:42.887

对于较新版本的 angularjs，这个问题的正确答案是使用[`ng-if`](https://docs.angularjs.org/api/ng/directive/ngIf)：

```
<ul>
  <li ng-if="list.length === 0">( No items in this list yet! )</li>
  <li ng-repeat="item in list">{{ item }}</li>
</ul> 
```

当列表即将下载时，此解决方案也不会闪烁，因为必须定义列表并且长度为 0 才能显示消息。

这是一个在使用中显示它的 plunker：[http ://plnkr.co/edit/in7ha1wTlpuVgamiOblS?p=preview](http://plnkr.co/edit/in7ha1wTlpuVgamiOblS?p=preview)

提示：您还可以显示加载文本或微调器：

```
 <li ng-if="!list">( Loading... )</li> 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2015-10-06T01:14:56.497

```
<ul>
    <li ng-repeat="item in items | filter:keyword as filteredItems">
        ...
    </li>
    <li ng-if="filteredItems.length===0">
        No items found
    </li>
</ul> 
```

这类似于@Konrad 'ktoso' Malawski，但更容易记住。

使用 Angular 1.4 测试

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-01-09T04:57:33.223

这是使用 CSS 而不是 JavaScript/AngularJS 的另一种方法。

CSS：

```
.emptymsg {
  display: list-item;
}

li + .emptymsg {
  display: none;
} 
```

标记：

```
<ul>
    <li ng-repeat="item in filteredItems"> ... </li>
    <li class="emptymsg">No items found</li>
</ul> 
```

如果列表为空，<li ng-repeat="item in filteredItems"> 等将被注释掉，将成为注释而不是 li 元素。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-09T13:35:20.513

你可以使用这个 ng-switch：

```
<div ng-app ng-controller="friendsCtrl">
  <label>Search: </label><input ng-model="searchText" type="text">
  <div ng-init="filtered = (friends | filter:searchText)">
  <h3>'Found '{{(friends | filter:searchText).length}} friends</h3>
  <div ng-switch="(friends | filter:searchText).length">
    <span class="ng-empty" ng-switch-when="0">No friends</span>
    <table ng-switch-default>
      <thead>  
        <tr>
          <th>Name</th>
          <th>Phone</th>
        </tr>
      </thead>
      <tbody>
      <tr ng-repeat="friend in friends | filter:searchText">
        <td>{{friend.name}}</td>
        <td>{{friend.phone}}</td>
      </tr>
    </tbody>
  </table>
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-22T21:33:11.343

您可以使用关键字来引用元素`as`下的集合：`ng-repeat`

```
<table>
    <tr ng-repeat="task in tasks | filter:category | filter:query as res">
        <td>{{task.id}}</td>
        <td>{{task.description}}</td>
    </tr>
    <tr ng-if="res.length === 0">
        <td colspan="2">no results</td>
    </tr>
</table> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-20T03:33:22.927

我通常使用 ng-show

```
<li ng-show="variable.length"></li> 
```

例如，您定义的变量在哪里

```
<div class="list-group-item" ng-repeat="product in store.products">
   <li ng-show="product.length">show something</li>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-25T16:34:47.347

您可以使用 ng-if，因为这不会在 html 页面中呈现，并且您在检查中看不到您的 html 标记...

```
<ul ng-repeat="item in items" ng-if="items.length > 0">
    <li>{{item}}<li>
</ul>
<div class="alert alert-info">there is no items!</div> 
```

# android - 安卓词典不工作

> ID：12340096
> 
> 赞同：1
> 
> 时间：2012-09-09T14:52:42.163
> 
> 标签：android, sql, dictionary

我在我的词典应用程序中编写了我自己的词典定义词。但是，每当我在我的模拟器中启动我的字典应用程序时，默认的 android 字典工作都不会工作我的应用程序字典。我更改了所有提供者的权限，清单文件中的所有内容。但是字典不起作用。

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.searchbook"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_dictionary"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <!-- The default activity of the app; displays search results. -->
        <activity android:name=".SearchBook"
                  android:launchMode="singleTop">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <!-- Receives the search request. -->
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
                <!-- No category needed, because the Intent will specify this class component-->
            </intent-filter>

            <!-- Points to searchable meta data. -->
            <meta-data android:name="android.app.searchable"
                       android:resource="@xml/searchable" />

        </activity>

        <!-- Displays the definition of a word. -->
        <activity android:name=".WordActivity" />

        <!-- Provides search suggestions for words and their definitions. -->
        <provider android:name=".DictionaryProvider"
                  android:authorities="com.example.searchbook.DictionaryProvider" />

        <!-- Points to searchable activity so the whole app can invoke search. -->
        <meta-data android:name="android.app.default_searchable"
                   android:value=".SearchBook" />

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:05:46.440

“com.example.searchbook”似乎是示例应用程序的 android 约定。可能有一个与此名称完全相同的现有应用程序。正如您指出的那样，它会启动默认值。尝试将其重构为“com.stackoverflow.karthi”之类的其他内容。

# c++ - 成员模板专业化

> ID：12340105
> 
> 赞同：1
> 
> 时间：2012-09-09T14:54:09.293
> 
> 标签：c++, templates, template-specialization, partial-specialization

```
template<typename T>
class C
{
   void f() { }
};

/*template<typename T>
void C<T*>::f() { }*/

template<>
void C<int*>::f() { } 
```

如果我们删除注释，代码将无法编译。我知道这一点（我也知道，我们应该有`partial specialization`for `C<T*>`），但我找不到标准的词，这解释了这种行为。我重读`14 par`了几次标准。你能给我一个报价或标准的标准，这解释了这一点吗？

**编辑。**

```
template<typename T>
class C
{
   template<typename U>
   struct S { };
};
// #1
/*template<typename T>
class C<T*>
{
   template<typename U>
   struct S { };
};*/
// #2
/*template<typename T>
template<typename U>
struct C<T*>::S<U*> { };*/

template<>
template<typename U>
struct C<int*>::S<U*> { }; 
```

如果我们接下来只删除注释，那么 #2 - 代码将无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:14:34.957

*以下是14.7.3* /1中关于可能明确专门化的内容的标准引用：

> 以下任何一项的明确专业化：
> 
> — 功能模板
> 
> — 类模板
> 
> —**类模板的成员函数**
> 
> — 类模板的静态数据成员
> 
> — 类模板的成员类
> 
> — 类模板的成员枚举
> 
> — 类或类模板的成员类模板
> 
> — 类或类模板的成员函数模板
> 
> 可以通过引入的声明来声明`template<>;`

除非明确允许，否则您不能部分特化任何东西，并且类模板的成员函数也不是明确允许的。只有类模板可以部分特化（如 14.5.5 中所述）。

（请注意，显式特化类模板的成员类模板本身就是类模板。）

# javascript - jQuery 替换，使用数组

> ID：12340106
> 
> 赞同：1
> 
> 时间：2012-09-09T14:54:26.593
> 
> 标签：javascript, jquery, arrays, replace

```
var searchp   = $('body'),
    searchval = searchp.html(),
    name      = ['Abraham Lincoln', 'George Washington'];
    cname     = name.toLowerCase().replace(/ /g, ''),
    restr     = searchval.split(name).join('<a href="#" data-name="'+cname+'">'+name+'</a>');

searchp.html( replacestr ); 
```

我需要一些关于小替换功能的帮助。如果我使用 name='string name'，它可以正常工作，但我无法让它与数组一起使用。希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:00:00.317

您尝试调用`toLowerCase()`不提供任何`toLowerCase()`方法的 Array。相反，您应该在该数组中指定一个项目，例如：

```
cname     = name[0].toLowerCase().replace(/ /g, ''), 
```

这很容易发现您打开浏览器的控制台，因为在 Chrome 中运行它给了我以下消息：

> 未捕获的类型错误：对象亚伯拉罕林肯，乔治华盛顿没有方法“toLowerCase”

正如对您问题的评论表明您可能不想对元素的索引进行硬编码，而是使用循环。我试图摆弄你的代码，但似乎`#body`缺少一些输入以在你的行中获得一些语义，所以我只能提供一个建议，如何循环遍历一组 srings：

```
var name = ['Abraham Lincoln', 'George Washington'];
$(name).each(function(key, value){
    console.log(value.toLowerCase());
});

​ 
```

# ruby-on-rails - 如何在 some_module.rb 文件中打包 before_filter？

> ID：12340112
> 
> 赞同：2
> 
> 时间：2012-09-09T14:54:48.373
> 
> 标签：ruby-on-rails, ruby

我有带有代码的 Module.rb 文件

```
 module Finder
      module InstanceMethods
        def my_func
          @post = Post.find(params[:id])
        end
      end

      def self.included(base)
        base.send :include, InstanceMethods
        base.before_filter :my_func
      end
    end 
```

和带有代码的控制器

```
include Finder 
```

但是我的应用程序因代码而崩溃

```
 undefined method `name' for nil:NilClass
    Extracted source (around line #5):

    2: 
    3: <p>
    4:   <b>Name:</b>
    5:   <%= @post.name %>
    6: </p>
    7: 
    8: <p> 
```

@post 似乎不起作用。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:18:30.453

我做到了。我的模块不起作用，因为我没有添加行

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

进入 application.rb 文件。之后，我使用以下代码完成了我的任务：

```
module Finder
  def self.included(base)
     base.class_eval do
       before_filter :my_func, :only => [:show, :edit, :update, :destroy]
     end
  end
  def my_func
       @post = Post.find(params[:id])
  end 
```

# ios - [MonoTouch][Bass.dll] 应用程序崩溃“尝试 JIT 编译方法 .. 同时使用 --aot-only 运行”

> ID：12340113
> 
> 赞同：5
> 
> 时间：2012-09-09T14:55:05.737
> 
> 标签：ios, xamarin.ios, jit, aot, bass

我遇到了一个问题，我无法解决 3 天，而你是我最后的希望。

我的目标是用 Bass.dll 录制声音（有 iPhone 的特殊版本库和 .net 包装器版本；可以在这里找到：un4seen.com）

在**模拟器程序上工作**（或似乎工作正常）。但是当我尝试在 iPhone 上运行它时 - 我收到了这个错误：

“在使用--aot-only 运行时尝试 JIT 编译方法 '(wrapper native-to-managed) RecordingAudioHelloWorld.Player:recordingHandler (int,intptr,int,intptr)'。”

错误发生在这里：

```
RECORDPROC _recordingHandler = new RECORDPROC(recordingHandler);

_record = Bass.BASS_RecordStart(16000, 1, BASSFlag.BASS_SPEAKER_RIGHT, _recordingHandler, IntPtr.Zero); // <-- ERROR!!!

private int recordingHandler (int handle, IntPtr buffer, int length, IntPtr user)
{
//....
} 
```

正如我在这里读到的那样，我将链接器行为更改为“仅链接 SDK 程序集”，但它没有任何效果。

有什么我可以用它做的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T06:07:07.013

尝试将[MonoPInvokeCallback](http://docs.go-mono.com/?link=T%3aMonoTouch.MonoPInvokeCallbackAttribute)属性添加到您的 recordingHandler 函数中。请注意，您还需要将函数设为静态。 `YourDelegateType`应该是您在 C# 中定义的与此方法的签名相对应的委托类型。

```
[MonoPInvokeCallback (typeof(YourDelegateType)]
private static int recordingHandler (int handle, IntPtr buffer, int length, IntPtr user)
{
// ...
} 
```

# c# - ANTLR 语法和生成的代码问题

> ID：12340120
> 
> 赞同：0
> 
> 时间：2012-09-09T14:55:40.950
> 
> 标签：c#, parsing, expression, antlr, antlr3

我正在尝试使用 ANTLR 创建表达式解析器 该表达式将进入 if 语句，因此它的根是一个条件。

我有以下语法，它“编译”到解析器/词法分析器文件没有问题，但是生成的代码本身有一些错误，本质上是两个“空”的 if 语句，即 if (())

不知道我做错了什么，任何帮助将不胜感激。

谢谢。

语法.g文件如下：语法表达式；

```
options {
  language=CSharp3;
  output=AST;
}

tokens {
  ROOT;
  UNARY_MIN;
}

@parser::namespace { Antlr3 }
@lexer::namespace { Antlr3 }
public parse
  :  orcond EOF -> ^(ROOT orcond)
  ;

orcond
  :  andcond ('||' andcond)*
  ;

andcond
  :  condition ('&&' condition)*
  ;

condition
  :  exp (('<' | '>' | '==' | '!=' | '<=' | '>=')^ exp)?
  ;

exp
  :  addExp
  ;

addExp
  :  mulExp (('+' | '-')^ mulExp)*
  ;

mulExp
  :  unaryExp (('*' | '/')^ unaryExp)*
  ;

unaryExp
  :  '-' atom -> ^(UNARY_MIN atom)
  |  atom
  ;

atom
  :  Number
  |  '(' parenthesisvalid ')' -> parenthesisvalid
  ;

parenthesisvalid
  :  fullobjectref
  |  orcond
  ;

fullobjectref
  :  objectref ('.' objectref)?
  ;

objectref
  :  objectname ('()' | '(' params ')' | '[' params ']')?
  ;

objectname
  :  (('a'..'z') | ('A'..'Z'))^ (('a'..'z') | ('A'..'Z') | ('0'..'9') | '_')*
  ;

params
  :  paramitem (',' paramitem)?
  ;

paramitem
  :  unaryExp
  ;

Number
  :  ('0'..'9')+ ('.' ('0'..'9')+)?
  ;

Space 
  :  (' ' | '\t' | '\r' | '\n'){Skip();}
  ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:29:46.487

不要`..`在解析器规则中使用范围运算符 , 。

删除解析器规则`objectname`并创建词法分析器规则：

```
Objectname
  :  ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*
  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:46:45.617

**此外，使用片段**块将更加整洁。在这种情况下，您的代码将是这样的：

```
Objectname  :  LETTER (LETTER  | DIGIT | '_')*;    
Number: DIGIT+ ('.' DIGIT+)?;
fragment DIGIT : '0'..'9' ;
fragment LETTER : ('a'..'z' | 'A'..'Z'); 
```

# algorithm - 顶点权重可能为负时的最大权重独立集逼近算法

> ID：12340127
> 
> 赞同：2
> 
> 时间：2012-09-09T14:56:34.663
> 
> 标签：algorithm, graph-theory

最大权重独立集的逼近算法有很多。但他们中的大多数假设非负权重。是否有任何算法适用于可能的负权重？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:02:09.443

忽略负权顶点。考虑*任何*包含负权顶点的独立集合。如果您删除该顶点，则结果集仍然是一个独立集，但您增加了它的总权重。

# java - 无法启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/JDBC_DBO]]

> ID：12340128
> 
> 赞同：62
> 
> 时间：2012-09-09T14:56:56.997
> 
> 标签：java, tomcat, catalina, executionexception, lifecycleexception

我得到这个 Tomcat 错误：

```
Sep 09, 2012 4:16:54 PM org.apache.catalina.core.AprLifecycleListener init
Information: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Products\jdk1.7.0_03\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Products/jdk1.7.0_03/jre/bin/client;C:/Products/jdk1.7.0_03/jre/bin;C:/Products/jdk1.7.0_03/jre/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Products\jdk1.7.0_03\jre\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Products\eclipse32;;.
Sep 09, 2012 4:16:54 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
Warnung: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:NAR_JDBC_DBO' did not find a matching property.
Sep 09, 2012 4:16:55 PM org.apache.coyote.AbstractProtocol init
Information: Initializing ProtocolHandler ["http-bio-80"]
Sep 09, 2012 4:16:55 PM org.apache.coyote.AbstractProtocol init
Information: Initializing ProtocolHandler ["ajp-bio-8009"]
Sep 09, 2012 4:16:55 PM org.apache.catalina.startup.Catalina load
Information: Initialization processed in 1008 ms
Sep 09, 2012 4:16:55 PM org.apache.catalina.core.StandardService startInternal
Information: Starting service Catalina
Sep 09, 2012 4:16:55 PM org.apache.catalina.core.StandardEngine startInternal
Information: Starting Servlet Engine: Apache Tomcat/7.0.27
Sep 09, 2012 4:16:55 PM org.apache.catalina.core.ContainerBase startInternal
Schwerwiegend: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/NAR_JDBC_DBO]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/NAR_JDBC_DBO]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/digester/RuleSet
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredFields(WebAnnotationSet.java:452)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:257)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:136)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.digester.RuleSet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more

Sep 09, 2012 4:16:55 PM org.apache.catalina.core.ContainerBase startInternal
Schwerwiegend: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Sep 09, 2012 4:16:55 PM org.apache.catalina.startup.Catalina start
Schwerwiegend: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Sep 09, 2012 4:16:55 PM org.apache.catalina.startup.Catalina start
Information: Server startup in 540 ms 
```

有什么问题？我正在使用 Apache Tomcat 7，并使用了以下 4 个 catalina jar：

*   catalina.jar
*   catalina-ant.jar
*   catalina-ha.jar
*   catalina-tribes.jar

是否缺少任何其他 JAR 文件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-09T15:19:50.043

[Apache Commons Digester](http://commons.apache.org/digester/download_digester.cgi)`commons-digester3-3.2.jar`中缺少您。如果您使用的是 Maven，则可以添加：

```
<dependency>
    <groupId>commons-digester</groupId>
    <artifactId>commons-digester</artifactId>
    <version>2.1</version>
</dependency> 
```

到您的项目依赖项。

**更新：** 最新下载页面中的 jar 包结构与您的应用程序所期望的略有不同。您可以改用[这个较旧的 jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/commons-digester/commons-digester/1.5/commons-digester-1.5.jar)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-25T10:52:06.883

我在我的tomcat服务器中遇到了同样的问题但是当我深入检查时我发现我在我的web.xml文件中添加了一个新标签并且服务器不接受它所以检查你的文件是否发生任何更新然后重新启动你的tomcat并会变好 。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-20T06:10:08.333

如果你使用 eclipse 然后删除 tomcat 服务器和服务器文件夹然后重新配置这两个..

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-17T15:55:57.350

web 模块 -> 属性 -> 部署程序集 -> （添加文件夹“src/main/webapp”，Maven Dependencies 和其他需要的模块）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-26T22:35:32.387

我在 Java EE Eclipse 中运行时得到了这个。这里的答案都没有帮助。最后为我做的是：

1.  行家清洁
2.  在调试中启动tomcat

我一直在进行 Maven 全新安装，并且错误不会消失。诡异的。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-12-25T13:44:26.627

如果您使用的是动态 Web 项目，请确保您已将 jar 文件作为**commons-logging-1.2.jar 添加**到“WebContent > WEB-INF > lib”文件夹中。

与您一起，您还可以执行以下几步：

1.  右键单击项目 > 属性 > 目标运行时 > 从列表中选择 Apache Tomcat 服务器 > 应用 > 确定。

2.  转到服务器选项卡 > 右键单击​​配置的服务器 > 属性 > 常规 > 切换位置（例如 - /Servers/Tomcat/.....）> 应用 > 确定。

就这样！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-04-07T22:59:31.420

我猜您正在使用动态 Web 项目，因为您在评论中提到了 de 文件夹 WEB-INF/lib；如果是，请确保您没有将任何 *-servlet jar 文件放入此文件夹或容器已提供的其他 jar 中，在本例中为 Tomcat。另外：一旦我使用了 jersey-servlet.jar，我需要将它从 lib 文件夹中删除，以便 Tomcat 正常启动；然后我只使用 jersey-bundle.jar 并且效果很好。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-26T08:02:05.847

好吧，我不确定实际原因是什么，但我已经为同样的错误这样做了。我已经为servelet 及其工作注释了这个注释。

```
//@WebServlet("/HelloWorld")
public class HelloWorld extends HttpServlet { 
```

不知道这可能是不正确的解决方案。但这有效，另一件可以测试的事情是将 servlet jar 添加到类路径中。那可能行得通。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-05-09T09:04:35.023

对我来说，我做了`mvn clean`然后重新启动tomcat。它对我有用

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-05-15T13:50:28.260

即使在尝试了“mvn eclipse:eclipse -Dwtpversion=2.0”和“mvn clean install”之后，我也遇到了同样的问题。但是在我清理我的服务器之后它就可以工作了。因此，也许在您确定拥有所需的所有依赖项之后，请尝试清理服务器。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-11-07T14:54:37.137

通过运行`mvn clean install`您的项目并更正所有错误来检查您的应用程序是否成功构建

通常，当您的类路径中不存在依赖项时，就会出现此错误。

如果您使用的是 tomcat maven 插件，请尝试使用以下命令部署您的战争

```
tomcat7:run-war-only 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-05-25T06:41:56.123

即使我有同样的问题

`Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/]`

我在一开始就添加了各自的依赖项，它对我有用。

```
<dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-tomcat</artifactId>
        <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-24T22:30:54.943

我遇到过同样的问题。经过大量搜索后，我决定在 Eclipse 中重新配置我的服务器。（即按照 Benson 的建议清理它 转到 Project Explorer、Servers 和 Delete（确保您还删除了磁盘上的内容）然后转到 Windows->Preferences->Server->Runtime Environments 删除 Tomcat 服务器，然后将其重新添加。

这会清理 server.xml、webxml、context.xml 文件。它基本上重写了它们。我的一件（或多件事情）出了问题，这解决了它。比试图找到有问题的标签/行简单一点

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-03-24T11:43:51.463

Windows -> 首选项 -> 服务器 -> 运行时环境 -> 删除所有可用的 Apache 服务器。添加相同。现在在服务器上运行您的应用程序。完成 ：）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-05-26T10:05:46.490

我遇到了这个错误并尝试了你们提到的几种方法仍然没有工作。我什至尝试重新安装Tomcat，仍然有这个错误。

我做的最后一件事是删除整个 Netbeans 和 Tomcat。终于成功了。我知道这不是解决问题的好方法，但如果你真的很着急，不知道该怎么做。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-22T13:53:27.907

所有我都找到了解决方案，无论你们遇到什么异常，比如.. org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]..

罐子的bulid path的问题..

为了解决这个问题.. 将所有 jars 放在“WebContent/lib”中，无论您在项目中需要什么。我希望它对你有用...

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-05-11T10:25:38.603

这是因为一个或所有 maven 依赖项已损坏。只需删除损坏的依赖项或所有 Maven 本地依赖项，然后重新启动 Eclipse 和更新项目。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-03-15T15:54:13.113

我有同样的问题。

org.apache.catalina.LifecycleException：无法启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]

已经全部机器人了。我的 pom.xml：

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0 com.springapp 战1.0-SNAPSHOT战租</name>-->

```
<properties>
    <spring.version>4.1.1.RELEASE</spring.version>
    <spring.security.version>3.2.6.RELEASE</spring.security.version>
</properties>

<dependencies>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!--Spring Security-->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.version}</version>
    </dependency>
    <!--JUnit-->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
</dependencies>

<build>
    <finalName>war</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <includes>
                    <include>**/*Test.java</include>
                </includes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-09-26T01:44:22.967

尝试在你的 pom.xml 中添加这个 maven 依赖项：

```
<dependency>
<groupId>commons-fileupload</groupId>
<artifactId>commons-fileupload</artifactId>
<version>1.2</version>
</dependency> 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-06T14:17:38.140

我遇到了同样的问题，这是由这个嵌套异常引起的

```
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1400(ZipFile.java:60) 
```

仔细观察发现这是由于spring版本的签名不好。将 spring 版本更改为 4.3.4，构建和部署。一切正常。

高温高压

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-04-27T22:20:22.793

在 intelliJ 中，我在应用服务器配置中为 Tomcat Home 和 Tomcat 基本目录指定了两个不同的 tomcat 版本/文件夹

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-10-17T13:47:14.987

我在 web.ml 中配置了一个 servlet，我再次使用 servlet 类中的注释配置了相同的 servlet。我删除了基于注释的配置，然后服务器正常启动。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-02-12T13:32:10.760

只需清理您的服务器（在我的情况下，我使用的是 Tomcat）：

```
mvn clean
mvn install 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-12-17T09:13:10.807

server.xml 是在您发布项目时创建的。现在如果您稍后添加更多依赖项，则 server.xml 将无法捕获它，除非它再次刷新。有时您还需要重建上下文/配置文件。首先你尝试清理工作目录。如果它不起作用然后删除服务器和服务器文件夹，然后重新配置这两个。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-11-16T12:57:10.700

在网上花了很多时间之后。我发现没有一个选项适用于我尝试右键单击服务器-> 清理。没用。

有效的是：

您只需将标签添加`<absolute-ordering/>` 到标签下方的**web.xml**`<display-name>`中，它应该可以工作。[更多详情请点击这里](http://After%20spending%20lot%20of%20time%20on%20internet.%20I%20found%20that%20NONE%20of%20the%20below%20option%20%20worked%20for%20I%20tried%20%20Right%20click%20on%20the%20server%20-%3E%20Clean.%20didn%27t%20work.%20%20What%20worked%20is:%20You%20just%20to%20add%20%3Cabsolute-ordering%20/%3E%20tag%20to%20your%20web.xml%20just%20under%20the%20%3Cdisplay-name%3E%20tag%20and%20it%20should%20work.)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-05-15T21:00:13.477

我认为您正在使用的部署描述符和依赖项存在问题。

通过做这些事情，我遇到了同样的问题。更新您的 POM.XML

```
<dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.17</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-servlet</artifactId>
            <version>1.17</version>
        </dependency>
        <dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>jsr311-api</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-client</artifactId>
            <version>1.17</version>
        </dependency>
        <!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>

        <!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple -->
        <dependency>
            <groupId>com.googlecode.json-simple</groupId>
            <artifactId>json-simple</artifactId>
            <version>1.1.1</version>
        </dependency>

    </dependencies> 
```

此外，仅在 POM.XML 下的构建标记中添加此代码，因为 Container 需要知道您的资源文件在哪里配置。

```
<build>
        <finalName>HatchWaysAppAPI</finalName>
        <sourceDirectory>src/main/resources</sourceDirectory>
        <plugins>

            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <warSourceDirectory>WebContent</warSourceDirectory>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                </configuration>
            </plugin>

        </plugins>
    </build> 
```

根据您的要求更改资源文件夹。

您的 Web.xml 应该是这样的。

```
<servlet>
        <servlet-name>HatchWaysAppAPI Maven Webapp</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.hatchwaysapi.mainController</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>HatchWaysAppAPI Maven Webapp</servlet-name>
        <url-pattern>/v1/*</url-pattern>
    </servlet-mapping> 
```

注意此配置仅适用于 maven，如果您不使用 maven 而忽略 Pom.XML，只需配置 Web.xml。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-12-15T12:52:48.827

发布此解决方案可能对某人有所帮助：

我在 Tomcat 8.0 中遇到了类似的问题。似乎tomcat jar文件可能已损坏。所以我刚刚下载了新的 Tomcat 8.0，解压缩并使用我的 Eclipse IDE 进行配置。还要检查首选项菜单下的 Project Facet。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-10-02T05:22:41.513

我已经更改了 WEB INF 的 lib 文件夹中的所有 spring 版本的 jar，如果你使用 maven 项目，它对我有用，只是用不同的版本更新依赖关系，它可能会工作

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2018-07-23T16:36:35.817

我在 web.xml 中提到的过滤器名称不存在。纠正错字后，它工作得很好。

* * *

## 回答 #30

> 赞同：-3
> 
> 时间：2017-11-28T00:06:25.857

要解决此问题，您必须删除位于目录中的 .snap 文件：

`<workspace-directory>\.metadata\.plugins\org.eclipse.core.resources`.

删除此文件后，您可以毫无问题地启动 Eclipse。

# jquery - Y 轴上的 JQuery 动画背景图像

> ID：12340130
> 
> 赞同：3
> 
> 时间：2012-09-09T14:57:05.173
> 
> 标签：jquery, jquery-animate

我似乎遇到了 JQuery 动画的问题。我可以在正方向上为背景图像设置动画，但在负方向上不行。关于如何解决这个问题的任何建议？

```
$(this).parent().css('background-position-y', '19px');
$(this).parent().animate({ 'background-position-y': '-=19px' }, 1000, 'linear'); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T15:04:08.470

通过单独定位背景`background-position-x/y`是 Internet Explorer 引入的一项功能，但从未将其纳入 W3C 规范。此后，任何将其添加到规范中的建议都被拒绝了。

见： [http ://snook.ca/archives/html_and_css/background-position-xy](http://snook.ca/archives/html_and_css/background-position-x-y)

您可以随时创建自己的小插件，这并不难。

使用 jQuery 1.8，我们现在可以访问 $.Animation 方法，该方法直接为我们提供动画值而无需太多工作，因此我们可以执行以下操作：

```
$.fn.animateBG = function(x, y, speed) {
    var pos = this.css('background-position').split(' ');
    this.x = pos[0] || 0,
    this.y = pos[1] || 0;
    $.Animation( this, {
        x: x,
        y: y
      }, { 
        duration: speed
      }).progress(function(e) {
          this.css('background-position', e.tweens[0].now+'px '+e.tweens[1].now+'px');
    });
    return this;
} 
```

然后要使用它，我们可以这样做：

```
$("#background").animateBG(x-value, y-value, speed);​ 
```

[**小提琴**](http://jsfiddle.net/HN3Ba/2/)

这是我几天前为[另一个答案准备的东西，它只适用于像素并且确实有一些限制，但它很简单，应该适用于大多数情况。](https://stackoverflow.com/questions/12160846/jquery-background-position-doesnt-work-in-firefox/12161533#12161533)

我想这样的事情会做你想要的：

```
$(this).parent()
       .css('background-position', '0 19px');
       .animateBG(0, 0, 1000);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T08:03:37.813

@adeneo：此解决方案仅在您设置时才有效

```
this.x = pos[0].split('px')[0] || 0;
this.y = pos[1].split('px')[0] || 0; 
```

否则起始位置将设置为零。

# octave - 在 Octave 中遍历矩阵行而不使用索引或 for 循环

> ID：12340132
> 
> 赞同：3
> 
> 时间：2012-09-09T14:57:21.487
> 
> 标签：octave, vectorization

我试图通过删除我用来计算矩阵 X 每一行的公式的 for 循环来了解是否可以更有效地使用 Octave：

```
myscalar = 0
for i = 1:size(X, 1),
  myscalar += X(i, :) * y(i) % y is a vector of dimension size(X, 1)
  ... 
```

该公式比添加到标量更复杂。这里的问题实际上是如何在没有索引的情况下遍历 X 行，这样我就可以消除 for 循环。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T17:00:09.573

是的，您可以为此使用[广播](http://www.gnu.org/software/octave/doc/interpreter/Broadcasting.html#Broadcasting)（您需要 3.6.0 或更高版本）。如果你知道 python，这也是一样的（[来自 python 的解释](http://memory.osu.edu/classes/python/lessons/lsn08.html)）。只需将矩阵乘以列。Finnaly，`cumsum`做加法，但我们只想要最后一行。

```
newx      = X .* y;
myscalars = cumsum (newx, 1) (end,:); 
```

或在没有临时变量的一行中

```
myscalars = cumsum (X .* y, 1) (end,:); 
```

如果大小正确，则自动执行广播。例如：

```
octave> a = [ 1 2 3
              1 2 3
              1 2 3];
octave> b = [ 1 0 2];
octave> a .* b'
warning: product: automatic broadcasting operation applied
ans =

   1   0   6
   1   0   6
   1   0   6

octave> a .* b
warning: product: automatic broadcasting operation applied
ans =

   1   2   3
   0   0   0
   2   4   6 
```

警告的原因是它是一个新功能，可能会使用户感到困惑，并且在 Matlab 中不存在。`warning ("off", "Octave:broadcast")`您可以通过添加到您的`.octaverc`文件来永久关闭它

对于使用旧版本 Octave 的任何人，同样可以通过`bsxfun`直接调用来完成。

```
myscalars = cumsum (bsxfun (@times, X, y), 1) (end,:); 
```

# android - 从 AsyncTask 调用 AlertBuilder 时出现异常

> ID：12340133
> 
> 赞同：1
> 
> 时间：2012-09-09T14:57:28.500
> 
> 标签：android, android-asynctask, alert, builder

我有一个主要活动。

在此，我定义了一个函数用于使用 AlertBuilder 从资源文件中传递 stringId。

当我的 AsyncTask 磁盘上没有足够的空间时，我正在尝试使用它来显示错误。

但是当调用 context.showAlert 我得到一个运行时异常

> 09-09 14:41:44.812: E/Background(8963): 无法在未调用 Looper.prepare() 的线程内创建处理程序

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:58:51.597

您应该从在主线程上调用的函数之一修改 UI（如在此调用中），而不是在后台。

例如来自以下之一：

*   onProgressUpdate

*   后执行

# c# - 鼠标悬停事件时突出显示列表框项

> ID：12340135
> 
> 赞同：3
> 
> 时间：2012-09-09T14:57:57.717
> 
> 标签：c#, .net, windows, winforms

`listview`当鼠标悬停在项目上时，我正在尝试更改项目的背景颜色

我有一个鼠标悬停事件，但是如何在鼠标悬停在项目上时添加“突出显示”效果？

```
private void pinnedAppsListBox_MouseHover(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T12:51:40.207

用这个：

```
private void pinnedAppsListBox_MouseHover(object sender, EventArgs e){

   Point point = pinnedAppsListBox.PointToClient(Cursor.Position);
   int index = pinnedAppsListBox.IndexFromPoint(point);
   if (index < 0) return;
   //Do any action with the item
   pinnedAppsListBox.GetItemRectangle(index).Inflate(1,2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:23:03.943

转到 ListView 的**ItemMouseHover**事件并添加然后设置 Item 的属性“BackColor”。

```
private void listView1_ItemMouseHover(object sender, ListViewItemMouseHoverEventArgs e)
{
            e.Item.BackColor = Color.Black;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T21:49:49.490

声明这个全局变量

使用此 Listview Item 变量来跟踪悬停的项目

```
ListViewItem lvHoveredItem; 
```

设置以下函数为您的控件打开 DoubleBuffering 以防止闪烁：

```
public static void SetDoubleBuffering(System.Windows.Forms.Control control, bool value)
    {
        System.Reflection.PropertyInfo controlProperty = typeof(System.Windows.Forms.Control)
            .GetProperty("DoubleBuffered", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        controlProperty.SetValue(control, value, null);
    } 
```

加载控件的位置调用此函数

```
SetDoubleBuffering(lvTaskList, true); 
```

然后在列表视图的 mousemove 事件中使用此代码

```
private void lvTaskList_MouseMove(object sender, MouseEventArgs e)
    {
        //Set the Color you want the list Item to be when mouse is over
        Color oItemColor = Color.Lavender;
        Color oOriginalColor = Color.blue; //Your original color

        //get the Item the Mouse is currently hover
        ListViewItem lvCurrentItem = lvTaskList.GetItemAt(e.X, e.Y);

        if ((lvCurrentItem != null) && (lvCurrentItem != lvHoveredItem))
        {
            lvCurrentItem.BackColor = oItemColor;

            if(lvHoveredItem != null)
            {
                lvHoveredItem.BackColor = oOriginalColor ;                    
            }

            lvHoveredItem = lvCurrentItem;
            return;

        }

        if (lvCurrentItem == null)
        {
            if (lvHoveredItem != null)
            {
                lvHoveredItem.BackColor = oOriginalColor; 
            }
        }

    } 
```

您还可以添加 MouseLeave 事件

```
private void lvTaskList_MouseLeave(object sender, EventArgs e)
    {

        Color oOriginalColor = Color.Blue; //Your original color

        //When the mouse leave the control. If a ListViewItem was highlighted then set it's original color back
        if (lvHoveredItem != null)
        {
            lvHoveredItem.BackColor = oOriginalColor ;
        }

        lvHoveredItem = null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:07:01.560

如果您使用的是 ListBox，则处理起来相当困难，您需要为 ListBox 设置 MouseHover 事件并确定悬停在哪个项目上，然后手动绘制它。

看到[这个答案](https://stackoverflow.com/a/192654/612717)。

但是，如果您使用的是 ListView，则可以轻松添加如下`ItemMouseHover`事件：

```
private void pinnedAppsListView_MouseHover(object sender, EventArgs e)
{
      e.Item.BackColor = Color.Lime;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-31T06:29:12.903

我已经多次看到这个问题没有一个好的答案。我知道没有好的答案，但是，我做到了，在别处使用了一些提示。我是用 Lazarus 做的，但你应该能够适应你的语言。

获取项目。您可能需要设置变量以单独捕获这些变量。您可能还想先在 mousedown 时获取鼠标按钮的状态。

```
If (ListView.GetItemAt(X,Y) <> nil) then  // do this with an if else

// Next, you can get the bounding rect:
ListView.GetItemAt(X,Y).DisplayRect(drSelectBounds);  

//Option: If Button up or down then 
// you may have to catch this elsewhere, such as for a drag operation.

// Create and set a boolean variable:
HighLightOn := True;
ListView.Repaint;  // clears previous hightlights
ListView.Canvas.Brush.Color := clBtnFace; // or your color of choice     
ListView.Canvas.FillRect(Rect); 

// If you are moving around in an area where GetItem is nil, 
// then do this to stop flicker and remove the highlight:

If (ListView.GetItemAt(X,Y) = nil)  // do this with an if else
If HighLightOn then
begin
    SelectedList.Repaint;
    HighLightOn := False;
end;

// If a highlight gets left behind, 
// you may need to repeat this elsewhere, such as in a component exit.

// This is the basic gist of the issue. 
// There can be a lot of options or things to look for, 
// so you code could get more complicated. 
// I am not suggesting this is the best way to implement it, 
// but it is easy. Part of this code only works inside your app! 
```

# javascript - 从 REST 服务器和 Coffeescript 前端开始

> ID：12340140
> 
> 赞同：1
> 
> 时间：2012-09-09T14:58:12.410
> 
> 标签：javascript, python, json, rest, flask

寻找一些关于从哪里开始的帮助，有这么多相互竞争的库和首字母缩略词，我试图把它们整理出来都头晕目眩。

我想

*   创建一个 REST 后端（在这种情况下，可能是带有 Flask 的 Python）

*   完全使用静态 HTML 和静态 Javascript（或 Coffeescript）提供的前端

我更喜欢后端的东西，需要更多关于前端的建议。[我意识到这个问题不太适合 SO 问题格式，请帮助我改进它，因为我真的可以在这里使用一些指导。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:08:18.103

我认为这个演示，[TodoMVC](http://todomvc.com/)应该可以帮助您在不同的方法之间做出决定。（[Github 上的 TodoMVC](https://github.com/addyosmani/todomvc)。）

我更喜欢使用 jQuery 来处理 REST 后端，但您可以选择任何其他框架。

# libtool - Makefile libtool 卸载 - 删除了重复的 `.so` 文件

> ID：12340143
> 
> 赞同：0
> 
> 时间：2012-09-09T14:58:25.480
> 
> 标签：libtool

我正在尝试使用卸载选项编写 Makefile，我正在使用

```
install: $(MODULE_NAME).la
    if [ -f $(MODULE_NAME).la ] ; then \
        $(LIBTOOL) --mode=install $(INSTALL_BIN) $(MODULE_NAME).la $(OUTPUTDIR) ; \
    fi

uninstall:
    $(LIBTOOL) --mode=uninstall $(RM) $(OUTPUTDIR)/$(MODULE_NAME).la 
```

但是，当我尝试卸载（`make uninstall`）它时，它给了我：-

`libtool: uninstall: /bin/rm /usr/lib/proftpd/mod_mymod.la /usr/lib/proftpd/mod_mymod.so /usr/lib/proftpd/mod_dhynotify.so /usr/lib/proftpd/mod_mymod.so /usr/lib/proftpd/mod_mymod.a`

知道为什么它会生成如此多的 .so 文件删除吗？

# wordpress - Hashchange on click，当来自另一个站点时触发点击

> ID：12340144
> 
> 赞同：0
> 
> 时间：2012-09-09T14:58:35.757
> 
> 标签：wordpress, jquery, hashchange

我已经在我的 wordpress 主题中实现了[这](https://stackoverflow.com/questions/7526113/load-wordpress-post-content-into-div-using-ajax)一点，当我单击文件夹内的链接时，我试图弄清楚如何实现 hashchange。我尝试使用[本教程](http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html)来触发 hashchange。当我注释掉“加载永久链接到 .itemContent”时，hashchange 有效，但随后项目立即向下和向上滑动。当它没有被注释掉时，hashchange 不会触发。

另外，如果有人将[http://www.pathtomydomain.com/#/item-name-1](http://www.pathtomydomain.com/#/item-name-1)复制到地址栏（或添加书签），如何根据 url 打开文件夹？与 .trigger(click) 有什么关系？

**HTML**

```
<div id="container">    
<div class="item">
<a href="http://pathtomydomain.com/item-name-1">
<img src="an-image-1.jpg" />
</a>
</div>

<div class="item">
<a href="http://pathtomydomain.com/item-name-2">
<img src="an-image-2.jpg" />
</a>
</div>

<div class="item">
<a href="http://pathtomydomain.com/item-name-3">
<img src="an-image-3.jpg" />
</a>
</div>
</div>
<div class="itemContent"></div> 
```

**查询**

```
$.ajaxSetup({cache:false});

$('.item').click(function(){
        if($('.itemContent').is(":visible")){
            $('.itemContent').slideUp("fast", function(){  
        });

    } else if ($('.itemContent').is(":hidden")) {
        $('.itemContent').empty();
        $('.itemContent').html('<img class="loading" src="ajax-loader.gif"/>');
        $('.itemContent').slideDown("fast", function(){
            var $dock = $('#navigation'),
                dockHeight = $dock.height();
            $("html, body").animate({
                            scrollTop: $('.itemContent').offset().top - ( $(window).height() - dockHeight - $(this).outerHeight(true) ) / 2 

                            });

        });

    /*
    Load permalink to .itemContent . 
    */
    var post_link = $(this).children("a").attr("href");
        $(".itemContent").load(post_link);
        return false;

      }

});

var $mainContent = $(".itemContent"),
    siteUrl = "http://" + top.location.host.toString(),
    url = ''; 
$(document).delegate("a[href^='"+siteUrl+"']:not([href*=/wp-admin/]):not([href*=/wp-login.php]):not([href$=/feed/])", "click", function() {
    location.hash = this.pathname;
    return false;
}); 

$(window).bind('hashchange', function(){
    url = window.location.hash.substring(1); 
});
$(window).trigger('hashchange'); 
```

# php - PHP ldap_sort 不区分大小写

> ID：12340148
> 
> 赞同：1
> 
> 时间：2012-09-09T14:59:17.797
> 
> 标签：php

如何在不区分大小写的排序中使用`ldap_search()`函数？`PHP`

```
bool ldap_sort ( resource $link , resource $result , string $sortfilter ) 
```

我想用这种风格对 ldap 不区分大小写进行排序：

```
$search_return = ldap_search($ldap_connection,$ldap_base,$search_filter);
ldap_sort($ldap_connection,$search_return,$value);
$entries = ldap_get_entries($ldap_connection,$search_return); 
```

我在做什么？

# java - 简单游戏服务器的服务器字符串命令编程架构..！

> ID：12340155
> 
> 赞同：1
> 
> 时间：2012-09-09T14:59:31.900
> 
> 标签：java

我正在创建一个带有`Project RedDwarf`框架的棋盘游戏（旧项目 DarkStar）。

我的问题是这样的：

我需要从服务器到客户端来回发送命令并反向发送，并且我需要一个可靠的编程架构来合并到命令消息传递服务中。

我想有一个命令接口，每个子命令都是它的一个实现（它包含命令字符串）。

例如，假设我们需要检查用户是否在线。我们有一个名为 的接口`Command`，然后是一个扩展 Command 的名为 Check 的接口，最后我们有一个名为 OnlineCheck 的实现。OnlineCheck 可以有一个名为 getCommand 的方法并返回命令字符串。

好的，直到现在.. 但我真正想做的是，在同一个实现类上包含可能的回复，以便我可以根据预定义的回复之一检查客户回复我的内容。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:30:48.140

首先，欣赏命令模式的使用。

> OnlineCheck 可以有一个名为 getCommand 的方法并返回命令字符串。

命令接口应该有一个类似的入口点，`execute()`或者`run()`可以实现 OnlineCheck 应该做的事情。所以不需要任何`getCommand()`反过来返回需要解释的命令字符串。

一旦你沿着这条路走下去，命令实例（在这种情况下是 OnlineCheck 的一个实例）可以保存响应并可以发送回客户端。反过来，客户端会将此响应返回给生成它的代码块，因为最好知道该命令期望什么类型的响应并可以适当地解释它们。

我的两分钱！

# mysql - 具有“森林”结构的表上的 SQL 查询

> ID：12340159
> 
> 赞同：0
> 
> 时间：2012-09-09T14:59:45.257
> 
> 标签：mysql, sql

我正在使用 `MySQL 5.5`. 假设我有一个具有“N 森林”结构的 SQL 表，如下所示：

```
create table foo
(
    id int not null primary key,
    parent_id int,
    bar varchar(255),

    foreign key (parent_id) references foo (id)
) 
```

如果`parent_id`是`null`，则表示根元素。我们还保证它是非循环的。

我现在想选择`id` `@x`按预定顺序排序的行及其所有后代（即包含具有 id @x 的行的集合，并递归地在此集合中具有 parent_id 的任何行）：

```
select * from foo where parent_id=DescendantOf(@x) sort by Preorder 
```

我可以使用什么 SQL 语句？（如果需要，允许修改表结构）

我还想找到给定元素的根 id：

```
select RootOf(@x) from foo 
```

我怎样才能做到这一点？

MySQL 可以有效地处理这个问题，还是我需要维护自己的索引或辅助表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:06:33.137

AFAIK 在内置的 MySQL 中没有这样的功能...... Oracle 有一个名为“分层查询”的功能，它可以满足您的需求......

在 MySQL 中，您可以实现/模拟它，尽管“如何”相当复杂 - 要获得非常好的演练，请参阅[这篇文章](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)。

# c - 内存分配和空指针

> ID：12340161
> 
> 赞同：1
> 
> 时间：2012-09-09T15:00:03.420
> 
> 标签：c

我对某事感到困惑。

第一的：

```
int *ptr;
ptr = malloc(10 * sizeof(int)); 
```

这种在**运行时**获取动态（堆）内存，而不是像数组那样在**编译时获取。**

`malloc()``NULL`如果没有内存可能会返回。

并且`NULL`是`#define`标准 C 库中的一个`#define NULL ((void *)0)`

因此，如果`malloc`返回`NULL`并在**运行时**执行，编译器将如何替换`NULL`，`void *0`我知道任何文本替换都发生在**预编译阶段**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T15:03:26.520

不，你错了。想象一下这样的`malloc`功能：

```
void *malloc(size_t n)
{
    /* magic */
    return NULL;
} 
```

`NULL` **编译器在编译该翻译单元时**替换，即编译标准库时，没有任何痕迹`NULL`在预处理器阶段之后存活。在那之后，不管它的价值，malloc 只返回数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:02:38.830

编译后所有的 NULL 都被 ((void *)0) 替换。如果没有内存，malloc 只会返回 ((void *)0)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T15:03:26.133

它返回 (void*)0 可以在源代码中的某处与 NULL 进行比较，例如：

```
 int *ptr;
   ptr = malloc(10 * sizeof(int));
   if(ptr == NULL) 
       //do something 
```

编译器替换`NULL`if 表达式中的`ptr`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:04:30.747

表达式`((void *)0)`与 plain 相同`0`，只是类型转换为 type `void *`。这就是为什么您可以使用 eg`if (!myPointer)`来检查指针不是`NULL`. 和palin`NULL`一样，在 中定义`0`什么并不重要，*总是*必须如此。`NULL``malloc``NULL` *`0`*

 *在较旧的库中，并且仍然很常见，`NULL`曾经被定义为 plain `0`，而在 C++ 中， plain`0`通常用于代替`NULL`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T15:04:40.920

回想一下`void*`可以“携带”***任何类型***指针的事实。

例子：

```
void *h;
int *p, **pp;

h = p;
h = pp; 
```

因此，如果 malloc 失败，它将返回 NULL，在 C 中定义为 (void*)0，正如其他答案所指出的那样。*

# macos - Mac 控制台日志条目未在 10.8 中显示

> ID：12340163
> 
> 赞同：2
> 
> 时间：2012-09-09T15:00:39.037
> 
> 标签：macos, console, osx-mountain-lion

我有一个应用程序写入控制台日志。此功能适用于 10.5、10.6、10.7，并已在 10.8 中停止工作

其他人注意到这一点了吗？如果是这样，发生了什么变化以及如何克服它。

# php - 如何用php签署android应用程序？

> ID：12340164
> 
> 赞同：1
> 
> 时间：2012-09-09T15:00:44.007
> 
> 标签：php, android, apk, sign

一切都是问题：我想用 php 签署一个 android .apk 以便动态创建签署的 android 应用程序！

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:11:39.590

Android SDK 中有可用的命令行工具。请参阅此文档[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html) 我想您可以尝试在您的服务器上使用该工具。

# php - 在远程 Linux 服务器上启动和停止服务

> ID：12340166
> 
> 赞同：0
> 
> 时间：2012-09-09T15:00:56.597
> 
> 标签：php, linux, ssh

我正在创建游戏服务器控制面板，但遇到了一些问题。

控制面板基本上需要向远程 Linux 服务器发出命令，启动和停止进程，我为此编写了命令，但问题是。

1.  我不确定是否只使用 SSH 使用 PHP 库然后发出命令或在服务器上有远程文件来处理这个问题。哪个效率最高？

2.  使用 root 帐户从 PHP 运行 SSH 命令是否安全？即使将要发送的命令是硬编码的。

3.  如果远程 Linux 服务器需要远程文件，这将用什么语言编写，什么功能最好？

如果您对解决此问题的最佳方法有任何其他想法，请分享，我将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:32:59.333

1.  这是可能的，但只有在特殊场合才会这样做。通常更简单的方法是使用某种形式的请求协议，例如 http，从而在服务器端调用预定义的例程（脚本）。服务器使用什么协议？
2.  永远不要那样做！通常这意味着在 ssh 中授予 root 访问权限，这是不安全的。你也可以使用 sudo 或 suid bits 之类的东西，再次不安全。你甚至可以通过发送命令来完成它，因为这意味着你的设置将接受它给出的任何命令并在 root 权限下执行它。不是个好主意...
3.  使用服务器上可用且您感觉舒适的任何语言。你用什么语言来表达你想说的话真的很重要吗？不，内容很重要。也许 coice 还取决于您选择的访问类型。某些语言在某些情况下更容易提供自己。

简而言之：没有更详细的信息，只能给出模糊的答案。

# f# - 如何将这种命令式合并排序实现转换为函数式？

> ID：12340167
> 
> 赞同：3
> 
> 时间：2012-09-09T15:01:07.283
> 
> 标签：f#, mergesort

这就是我使用命令式风格在 F# 中实现合并排序的方式：

```
let merge (l1: List<string>,  l2: List<string>) = 
 let r: List<string> = new List<string>()
 let mutable (i,j, cnt1, cnt2) =  (0,0, l1.Count, l2.Count)
 while i < cnt1 && j < cnt2 do
    if l1.[i] <= l2.[j] then
        r.Add (l1.[i])
        i <- i + 1
    else
        r.Add (l2.[j])
        j <- j + 1

 if i = cnt1 then
    while j < cnt2 do
        r.Add (l2.[j])
        j <- j + 1
 else    
    while i < cnt1 do
        r.Add (l1.[i])
        i <- i + 1
 r 
```

如果可能的话，您能否将其转换为替代的“功能”样式的实现并解释它是如何工作的？尽管我目前正在研究列表推导和所有这些，但我无法想出在这里使用它的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:28:46.730

You're using .NET `List<'T>` which is renamed to [ResizeArray<'T>](http://msdn.microsoft.com/en-us/library/ee353447.aspx) in F# to avoid confusion. If you use functional list, `merge` function would look like this:

```
let merge(xs, ys) =
    let rec loop xs ys acc =
        match xs, ys with
        | [], [] -> List.rev acc (* 1 *)
        | [], y::ys' -> loop xs ys' (y::acc) (* 2 *)
        | x::xs', [] -> loop xs' ys (x::acc) (* 3 *)
        | x::xs', y::_ when x <= y -> loop xs' ys (x::acc) (* 4 *)
        | _::_, y::ys' -> loop xs ys' (y::acc) (* 5 *)
    loop xs ys [] 
```

To explain this function in terms of your imperative version:

*   The 4th and 5th patterns are corresponding to the first `while` loop where you compare two current elements and add the smaller one into a resulting list.
*   The 2nd and 3rd patterns are similar to your 2nd and 3rd `while` loops.
*   The first pattern is the case where `i = cnt1` and `j = cnt2` and we should return results. Since a new element is always prepended to the accumulator, we need to reverse it to get a list in the increasing order.

To be precise, your `merge` function is just one part of merge-sort algorithm. You need a function to split a list in two halves, call merge-sort on two halves and merge two sorted halves into one. The `split` function below is left for you as an exercise.

```
let rec mergeSort ls =
    match ls with
    | [] | [_] -> ls
    | _  -> let xs, ys = split ls
            let xs', ys' = mergeSort xs, mergeSort ys
            merge(xs', ys') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:07:21.680

要为 pad 添加一个更简单但幼稚的替代方案：

```
let rec merge x y = 
    match (x, y) with
    | ([], []) -> []
    | ([], rest) -> rest
    | (rest, []) -> rest
    | (fx :: xs, fy :: _) when fx <= fy -> fx :: merge xs y
    | (fx :: _, fy :: ys) -> fy :: merge x ys 
```

与 pad 类似，我们在函数参数上进行模式匹配。

*   我首先将它们放入一个元组中，以便我可以同时对它们进行模式匹配。
*   然后，我处理两个或两个参数都为空的[基本情况。](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)
*   然后我使用`when`警卫检查哪个第一个项目更小
*   最后，我将第一项作为另一个调用的结果，并将其`merge`与其余项中的较小项以及整个其他列表一起调用。因此，如果 的第一项`x`较小，我将`x`(`fx`在这种情况下) 的第一项附加到调用的结果中，以传入( )`merge`的其余部分和整个（因为 的第一项更大）。`x``xs``y``y`

# java - 迭代参数化列表（在原始列表类型分配之后）

> ID：12340168
> 
> 赞同：8
> 
> 时间：2012-09-09T15:01:15.090
> 
> 标签：java, generics, classcastexception, foreach

语言：Java
编译器版本：1.6

在下面的代码中，我尝试执行以下操作：

1.  创建一个`List<String>`
2.  添加一个`String`
3.  分配`List<String>`给原始`List`
4.  创建一个`List<Integer>`
5.  将原始分配`List`给`List<Integer>`
6.  添加一个`Integer`
7.  `get()`使用@indexes 1 & 2检索值并打印它们。

所有语句都在编译（带有警告）并且运行良好。

但是，如果我尝试循环`List<Integer>`使用`for`循环，我会得到一个`ClassCastException`. 我只是想知道为什么它允许我使用`list.get()`方法但不允许我迭代它？

**输出：（** *如果我使用未注释的 for 循环运行）abcd 200*

```
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot  be cast to java.lang.Integer
        at genericsamples.CheckRawTypeAdd.main(CheckRawTypeAdd.java:26) 
```

这是我的代码

```
import java.util.*;
import java.io.*;
class CheckRawTypeAdd
{
    public static void main(String[] sr)
    {   
        List<String> list_str = new ArrayList<String>();
        list_str.add("abcd");
        List<Integer> list_int = new ArrayList<Integer>();  
        List list_raw; 
        list_raw=list_str;
        list_int=list_raw;
        list_int.add(200);
        Object o1 = list_int.get(0);
        Object o2 = list_int.get(1);        
        System.out.println(o1);
        System.out.println(o2);
        //for(Object o : list_int)
        //{
        //  System.out.println("o value is"+o);
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T15:38:07.743

我会认为这是一个编译器错误`javac`。正在插入已检查的演员表。我们可以看到这个`javap -c CheckRawTypeAdd`用于反汇编类（cast 是 101；注意我在编译之前去掉了一些不需要的代码行，所以代码点会有所不同）：

```
 77: invokeinterface #10,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
  82: astore        6
  84: aload         6
  86: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
  91: ifeq          109
  94: aload         6
  96: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
 101: checkcast     #13                 // class java/lang/Integer 
```

但是，[Java 语言规范 (14.14.2)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)表明这种转换应该是 to `Object`，而不是`Integer`。它首先通过语法定义术语：

```
EnhancedForStatement:
    for ( FormalParameter : Expression ) Statement

FormalParameter:
    VariableModifiersopt Type VariableDeclaratorId

VariableDeclaratorId:
    Identifier
    VariableDeclaratorId [] 
```

所以在我们的例子中，`Type`是`Object`。然后它继续说这被翻译成什么：

```
for (I #i = Expression.iterator(); #i.hasNext(); ) {
    VariableModifiersopt TargetType Identifier =
        (TargetType) #i.next();
    Statement
} 
```

所以这里相关的是`TargetType`. 这也在 JLS 中定义：

> 如果 Type（在 FormalParameter 产生式中）是引用类型，则 TargetType 是 Type

`Object`肯定是引用类型，然后`TargetType`是，所以`Object`检查的强制转换应该是 to `Object`， not `Integer`。

`ecj`该线程中的其他人进一步证明了这是一个错误，指出如果使用（Eclipse 的编译器），则不会发生此问题。但是，我知道这对于 Oracle 编译器团队来说是一个低优先级的错误，因为您必须滥用泛型来执行它。人们几乎会说这是一项功能，而不是错误。

## 跟进

为了最终确认这是一个错误，这里有一个针对这个确切问题的现有错误报告：

*   [错误 ID：6500701 - 使用泛型增强的 for 循环会生成错误的字节码](http://bugs.sun.com/view_bug.do?bug_id=6500701)

另外，我应该注意两点。 **首先**，我在上面给出的 JLS 参考是在最新的 JLS 中，并且该部分实际上已针对 Java 7 进行了更改（针对此错误！）

[以下是Java 6 及更早版本](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.14.2)的增强 for 语句*应该*翻译的内容：

```
for (I #i = Expression.iterator(); #i.hasNext(); ) {
        VariableModifiersopt Type Identifier = #i.next();
   Statement
} 
```

如您所见，这里*没有*指定检查演员表。所以错误`javac`不是它*做错了*演员，而是它根本没有做**任何演员**。

**其次**，在 Java 7 中，`javac`根据 JLS SE 7 规范（这是我上面引用的）正确编译代码。因此，以下代码有效：

```
List<String> list_str = new ArrayList<String>();
((List) list_str).add(new StringBuilder(" stringbuilder"));
for (CharSequence o : list_str) {
   System.out.println("o value is" + o);
} 
```

使用**正确**的强制转换为`CharSequence`，不是`String`。我最初使用 JDK 6 进行编译，而不是 JDK 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:17:12.253

代码

```
 for(Object o : list_int)
    {
      System.out.println("o value is"+o);
    } 
```

相当于这样的东西：

```
for (Iterator<Integer> it = list.iterator(); it.hasNext();) {
    Integer o = it.next();
    System.out.println("o value is"+o);
} 
```

如您所见`Iterator`，它是通用的，因此将值转换为它的参数类型（`Integer`我们的例子）。

因此，`Integer o = it.next();`幕后的线执行以下操作：

`Integer o = (Integer)it.next();`

我认为现在很明显它是如何`ClassCastException`产生的。确实，您设法将字符串值插入到列表中，因此当`it.next()`返回您的字符串时，转换失败。

所以，“你是如何设法将字符串插入 int 列表”的问题仍然存在。答案是泛型是编译器的魔法。他们的另一个名字是擦除。Java 字节码不包含有关列表类型的信息。它只包含在需要时转换为具体类型的内容。这就是您设法将参数化列表分配给原始列表然后将 sting 添加到其中的原因。

正如您正确提到的那样，您看到了警告。结论是“不要忽略编译警告”。

# php - 了解 PHP 类

> ID：12340169
> 
> 赞同：0
> 
> 时间：2012-09-09T15:01:17.947
> 
> 标签：php, object, built-in

我试图了解 PHP 中的内置类以及如何使用它们。我也在尝试使用正确的语言来描述这些“事物”。以 DateTime 类为例。

所以现在我在这个类上看到了一个方法，它用 DateTime::setDate 表示。那么我是否正确地说，“这是具有称为 setDate 方法的 DateTime 类？此外，如果您阅读有关 setDate 的 DateTime 类的 PHP 手册，您会发现：

DateTime::setDate <--这是否意味着我可以在代码中使用它？如：DateTime::setDate(); ?

我确实看到了如何创建一个对象，如下所示：

```
<?php
$date = new DateTime();
$date->setDate(2001, 2, 3);
echo $date->format('Y-m-d');// how would you know to do this? I thought $date->year;
?> 
```

这来自： public DateTime DateTime::setDate ( int $year , int $month , int $day )

同样从正上方的行中，我应该能够在不看示例的情况下弄清楚如何使用它？

任何好的输入将不胜感激。

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:11:05.707

除非一个方法被表示为 being `static`，否则你*不能*在代码中调用它`classname::methodname();`。在代码描述中，`::`基本上只是说“这个方法属于这个类”。是的，这有点令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:21:12.490

我只是讨厌`::`参考中的符号，我一直认为我正在处理一个很长的静态方法列表。

无论如何，它来自[C++ 命名空间符号](http://www.cplusplus.com/doc/tutorial/namespaces/)，因此`DateTime::diff`应该被阅读为“函数`diff`属于类`DateTime`”，但似乎很清楚，因为我在 DateTime 参考页面上！

为了让事情更清楚，“双冒号”运算符被称为`T_PAAMAYIM_NEKUDOTAYIM`[实际上是双冒号的希伯来语]。

长话短说，`->`除非您阅读方法签名中的**静态关键字，否则请使用符号。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:10:43.017

实际上我从来不明白他们为什么`::`在文档中使用运算符，我觉得它很混乱。

但是当文档说`DateTime::setDate`这意味着这是方法定义时。您必须首先使用以下方法实例化该类：

```
$instance = new DateTime(); 
```

然后调用实例上的方法：

```
$instance->setDate($dateString); 
```

这就是方法在类对象上的工作方式，它被写成`Classe::method`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:26:46.977

从 PHP 帮助中，您可以找到以下表达式：“有时在基类中引用函数和变量或在还没有任何实例的类中引用函数很有用。 :: 运算符用于此目的。”
:: 运算符用于调用基类的函数，并忽略由覆盖该方法的基类生成的类。

```
<?php
class A {
    function example() {
        echo "I am the original function A::example().<br />\n";
    }
}

class B extends A {
    function example() {
        echo "I am the redefined function B::example().<br />\n";
        A::example();
    }
}

// there is no object of class A.
// this will print
//   I am the original function A::example().<br />
A::example();

// create an object of class B.
$b = new B;

// this will print 
//   I am the redefined function B::example().<br />
//   I am the original function A::example().<br />
$b->example();
?> 
```

# php - 将 php 命令放入 php 字符串中

> ID：12340171
> 
> 赞同：1
> 
> 时间：2012-09-09T15:01:24.217
> 
> 标签：php, file

我有管理面板，我可以在其中创建类别。当我创建类别时，我会在 htdocs 中自动创建文件夹...例如... categorie/first ， categorie/second 等等

而我想要做的是，当我创建这些文件夹时，我会使用我需要的代码自动创建 index.php ......第一个变体是使用文件函数......但是我该如何输入字符串 php 命令？第二个..我猜是正确的，是创建这个模板..当我创建这些文件夹时，它会复制到我创建的目录......

那你怎么看？

编辑...但是我需要在当前类别打开的情况下存储在此代码变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:08:35.087

一种解决方案是这样编写代码：

```
// Creates a template of category
$page = <<< EOT

<html>
    <head>
        <title>Category {$category_name}</title>
        (...)

    </body>
</html>
EOT;

$f = fopen($new_directory . "/index.php", 'w');
fwrite($f, $page);
fclose($f); 
```

记得放EOT；在文档的最左侧。有关详细信息，请参阅[heredoc 语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

此代码是一个示例，您当然需要检查 fopen/fwrite 是否成功。

另一种解决方案可能是在另一个带有模板标记的文件中使用模板。

这样，您将拥有一个名为 template_category.txt 的文件，其中包含：

```
<html>
    <head>
        <title>Category %category_name%</title>
        (...)

    </body>
</html> 
```

然后，在您的 PHP 脚本中，您将用您的值替换模板标记：

```
$template = file_get_contents("template_category.txt");

$to_replace = array(
    '%category_name%',
    (...)
);

$replace_by = array(
    $category_name,
    (...)
);

$page = str_replace($to_replace, $replace_by, $template); 
```

然后像上面那样在 index.php 上写 $page 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:19:46.143

尝试使用 php- 和 html- 代码的模板文件，并使用一些标记指定所需的变量，例如：

```
in template.php
<?php
$category_id = #TOKEN_CATEGORY_ID#;
...
?> 
```

然后将此文件复制到新类别的文件夹并在#TOKEN_CATEGORY_ID# 上执行 preg_replace()。

# java - 制作游戏时的ArrayList

> ID：12340175
> 
> 赞同：-4
> 
> 时间：2012-09-09T15:02:29.063
> 
> 标签：java, arrays, arraylist

我想知道在这种情况下如何使用 ArrayList/Array：

假设我想做一个吃豆人游戏，我希望有 250 个幽灵。我如何存储它们的位置而不是自己写它们（int ghost1x、int ghost1Y、int ghost2x、int ghost2y 等）？

也请给我一些例子！:)

我使用java

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:13:06.503

让 ghost 类持有 x 和 y 位置，然后让 ArrayList 持有 gost 类的对象并将所有 ghost 存储在其中。

然后你循环遍历幽灵的 ArrayList，每次游戏都用 foreach 或类似的东西更新，并执行位置更新。

我相信这是一个相当正常的解决方案

```
private class Ghost{
public Ghost(int x, int y);//ctor
int x, y;
//other ghost code
}
private ArrayList<Ghost> ghosts = new ArrayList<Ghost>();
for(int i = 0; i < 250; i++)
{
ghosts.add(new Ghost(startX, startY));
}

//in the gameloop:
foreach(Ghost ghost in ghosts)
{
ghost.updatePositionOrSomething();
ghost.drawOrSomething();
} 
```

那将是代码的一些想法，我有一段时间没有编写 java，所以语法上不是 100% 稳定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T15:08:55.787

我不是游戏开发者，但我想到的是创建一个 Ghost 对象，其中包含两个 int 变量来表示它的 x/y 坐标。

然后创建一个幽灵数组，并在游戏中根据需要进行更新。

这有帮助吗？

```
//Create Ghost array
private Ghost[] ghosts = new Ghost[250]

//Fill ghost array
for (int i = 0; i < 250; i ++)
{
   Ghost g = new Ghost();
   g.xCoor = 0;
   g.yCoor = 0;

   ghosts[i] = g;
}

//Update coordinates while program running
while(programRunning == true)
{
   for (int i = 0; i < 250; i ++)
   {
      ghosts[i].xCoor = newXCoor;
      ghosts[i].yCoor = newYCoor;
   }
}

//Make Ghost class
public class Ghost 
{  
   public int xCoor {get; set;}
   public int yCoor {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:18:29.553

我建议您更深入地了解面向对象的设计。

您应该创建一个 Ghost 类：

```
public class Ghost {

int x;
int y;

public void update() {

}

public void render() {

}

} 
```

现在您可以创建一个 Ghost 对象数组（如果 Ghost 对象的数量不同，您应该只创建一个 List<>）。

```
Ghost[] ghosts = new Ghost[250]; 
```

现在初始化 Ghosts 数组：

```
for(int i = 0; i < ghosts.length(); i++) {
ghosts[i] = new Ghost();
} 
```

我将由您决定如何初始化`x`和`y`坐标。

我希望这有帮助。

# java - 使用 rmi 检索文件

> ID：12340177
> 
> 赞同：0
> 
> 时间：2012-09-09T15:02:42.780
> 
> 标签：java, file-io, rmi

请告诉我如何使用远程方法调用将文件从远程计算机检索到您的计算机。我应该能够提供我计算机上的文件路径并从远程计算机的指定路径检索文件。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:25:55.460

RMI（远程方法调用）不适用于连接到其他计算机。它用于连接到其他 java 应用程序（显然可以在本地或远程机器上运行）。

因此，您可以创建 2 个应用程序：通过 RMI 调用服务器的客户端。服务器将接收客户端的调用，从其本地文件系统中读取文件并将其传输给客户端。

但恕我直言，RMI 不是这项任务的最佳选择。可能更好的解决方案是使用它本机支持的协议之一连接到远程机器并检索文件。

例如，两台机器都在运行 Windows，您可以使用路径 liek this 打开文件`\\remote-host\c$\dir1\dir2\file.txt`。

如果远程机器正在运行 Unix，您可以使用 SSH 连接到它。使用 SSH 协议的纯 java 实现，例如[Jsch](http://www.jcraft.com/jsch/)，所以客户端操作系统无关紧要。如果服务器端是 Windows 而客户端不是，您可以在 Windows 上安装 SSH 服务器，然后使用 Jsch 或在客户端机器上使用 Samba。

在所有情况下，您都可以使用 FTP，但可能需要执行一些额外的配置。有几个实现 FTP 的纯 java 库，例如[VFS](http://commons.apache.org/vfs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:24:21.107

RMI 只是一种技术。一种方法是在发布到 RMI 的服务器机器上运行 prossess，但它似乎不太安全......

您可以使用 FTP 或 SFTP 发布这些文件吗？至少这将是交换文件的标准方式。您还可以运行一个简单的 HTTP 服务器，在目录中发布文件。

自己实现此服务的问题之一是在接受请求时必须小心，您需要清理文件路径。这很容易出错，并且很有可能有人破解它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:24:56.137

你到底在做什么？您可以将文件读入字节数组，然后将其作为远程方法的返回值。但根据具体情况，还有其他（更简单的）方法可以做到这一点。

# javascript - 使用 jquery 加载视图的更好方法

> ID：12340179
> 
> 赞同：1
> 
> 时间：2012-09-09T15:03:08.083
> 
> 标签：javascript, jquery, ajax

好的。让我试着解释我的问题。我`index, profile, contact`在标题中有三个页面和三个链接或导航按钮。当用户单击`profile`按钮`profile.html`时，使用方法从服务器动态加载`jquery load()`并将其放置在被`div`调用的`container`. 所有页面都一样。现在我也只在索引页面上加载我所有的 jquery 插件，包括 jquery shadow 插件、script.js 和 jquery 库。现在我所拥有的是，在`profile`页面上我有一个 div 标签，我想在我的 script.js 中应用一个 jquery shadow 插件，该插件加载到索引页面中。但它不能以这种方式工作（不知道为什么）。我必须做的是`script`在个人资料页面中添加一个标签，并在其中将这个影子插件应用到个人资料页面内的 div 标签。

所以这就是我想问的是，有没有更好的方法来使用 jquery 通过 ajax 加载页面，以便我应用于所有页面的任何 javascript 代码都应该应用于所有页面？

提前致谢

# iphone - 无法为 ad hoc 安装 iphone 应用程序

> ID：12340185
> 
> 赞同：1
> 
> 时间：2012-09-09T15:03:31.480
> 
> 标签：iphone, objective-c, xcode, app-store, distribution

我按照步骤仔细创建了一个 ad hoc：

1.  将测试人员团队设备添加到 iOs 配置文件页面的设备列表中
2.  为 ad-hoc 创建了一个新的分发配置文件
3.  在 xcode 中，我选择了项目并点击了 product->archive。
4.  我将存档（ipa 文件）和移动配置都发送给了测试团队。

应用程序安装失败。

我看到了开发人员在构建设置中将配置文件设置为代码签名身份到分发配置文件的[答案](https://stackoverflow.com/questions/9552202/ad-hoc-distribution-app-failed-to-install)

在列表中，我只能看到由 xcode 创建的 iOS Team Provisioning Profile。

这可能不是分发配置文件。

什么不见​​了？如何将构建设置设置为分发设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:29:47.893

在 IOS Provisioning Portal 的 Provisioning 页面中，单击新分发配置文件旁的“下载”按钮，它应该会添加到 XCode。

要检查它，请转到 XCode Organizer、Devices，然后转到左侧的 Library / Provisioning Profiles。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:05:01.500

您也可以使用[https://testflightapp.com](https://testflightapp.com)。

这是一项免费服务，并且工作非常可靠 - 您可以轻松管理测试人员并测试 ipa。

首先，我还尝试在没有此类服务的情况下测试我的应用程序 - 但我最终使用了它，因为它对测试人员来说也很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T17:23:03.080

创建分发证书和配置文件。您应该在钥匙串中有分发证书。下载分发供应配置文件并双击该配置文件。确认您在 XCode -> Organizer 中拥有配置文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T20:05:43.797

如果 Add-Hoc 部署不会安装在测试设备上，并且您已将该设备添加到配置文件中，并且应用程序已正确签名...

好的，我所做的是添加一个`Entitlements.plist`文件并将`Can be debugged`选项设置为`NO`并将其设置为目标`Code Signing Entitlements`，但实际上我不知道这是否是修复，因为我不会一次又一次地尝试，现在它工作了.

然后，实际上我没有存档应用程序并保存 .ipa 文件`Organizer - Archives`，而是按`build/Release-iphoneos`原样发送 .app 文件以及从开发帐户下载的配置文件。它将安装在 iTunes 中，并且在经历了几个小时的挫折之后才正常工作。

# .htaccess - 使用 .htaccess 将子文件夹设置为 root 并保持与其他子目录的链接正常工作

> ID：12340187
> 
> 赞同：0
> 
> 时间：2012-09-09T15:03:45.603
> 
> 标签：.htaccess

我正在尝试将我的网站的子文件夹设置为 root：

```
RewriteCond %{REQUEST_URI} !^/home/.*$
RewriteRule ^(.*)$ /home/$1 [QSA,L] 
```

这在我访问[http://www.mydomain.com/](http://www.mydomain.com/)时工作正常，它显示了[http://www.mydomain.com/home](http://www.mydomain.com/home)的内容，但是当我尝试访问时出现文件未找到错误，例如, [http://www.mydomain.com/anothersub](http://www.mydomain.com/anothersub)。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:17:24.137

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond $1 !^test/
    RewriteRule ^(.*)/?$ /test/$1 [L]
</IfModule> 
```

# ios - iOS：Push segues 和视图控制器的生命周期

> ID：12340192
> 
> 赞同：1
> 
> 时间：2012-09-09T15:04:14.553
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, automatic-ref-counting

我刚刚阅读了[一篇](https://stackoverflow.com/questions/11969452/viewdidload-is-in-fact-called-every-time-there-is-a-segue-transition)关于 stackoverflow 的文章，内容是关于当您使用 push segue（和导航控制器）时视图控制器的生命周期问题。由于您使用 push segue，视图控制器总是调用 viewDidLoad 函数，因此会创建一个新实例。

我的问题是关于释放从导航控制器堆栈中弹出的控制器。在[本文](https://stackoverflow.com/questions/11969452/viewdidload-is-in-fact-called-every-time-there-is-a-segue-transition)中，据说从导航堆栈中弹出并显示的视图控制器在您推送下一个时被释放。

对于使用项目的 ARC 也是如此吗？- 这是在哪里完成的？

# linux - linux上的错误Ogre3D

> ID：12340198
> 
> 赞同：2
> 
> 时间：2012-09-09T15:05:21.047
> 
> 标签：linux, ogre3d

我是 ogre3D 的初学者，我正在 Ogre3D 中构建 mi 第一个程序，但是当我尝试编译程序时出现此错误：

```
In function `main':
test.cpp:(.text+0x14): undefined reference to `std::allocator<char>::allocator()'
test.cpp:(.text+0x30): undefined reference to `std::basic_string<char,                                                                 
std::char_traits<char>, std::allocator<char> >::basic_string(char const*, 
std::allocator<char> const&)'

test.cpp:(.text+0x40): undefined reference to `std::allocator<char>::allocator()'
test.cpp:(.text+0x5c): undefined reference to `std::basic_string<char,    
std::char_traits<char>, std::allocator<char> >::basic_string(char const*,   
std::allocator<char> const&)'

test.cpp:(.text+0x6c): undefined reference to `std::allocator<char>::allocator()'
test.cpp:(.text+0x88): undefined reference to `std::basic_string<char,  
std::char_traits<char>, std::allocator<char> >::basic_string(char const*,  
std::allocator<char> const&)' 
```

并继续修复

1.  我手动编译程序：

```
gcc test.cpp  -o test.o test 
```

我的文件测试是这样的：

```
#include <Ogre.h>

using namespace Ogre;

int main()
{
Root* root= new Root();

if( !root->restoreConfig() )
{
    root->showConfigDialog();
    root->saveConfig();
}
return 0;
} 
```

如何解决我的问题？

我正在使用 Debian Wheezy。

Ogre3D 版本：1.8

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:12:13.777

这是一个链接器错误。用于`pkg-config --libs`检索正确的链接器选项

```
g++ -o test test.cpp -Wall $(pkg-config --cflags OGRE) $(pkg-config --libs OGRE) -lboost_system 
```

如果您在非标准位置（例如`/opt/ogre`）安装了 OGRE，您可能需要调用 pkg-config 并设置`PKG_CONFIG_PATH`环境变量：

```
PKG_CONFIG_PATH=/opt/ogre/lib/pkgconfig pkg-config --libs OGRE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:22:18.633

这是一个链接器错误，但不是 Ogre3d，而是 STL（标准模板库）。这样做的原因是您使用**gcc**，而您应该使用**g++**。但是，令我惊讶的是，您也没有收到 Ogre 的链接器错误，解决方案就像 Thomas 建议的那样（尽管他在示例中也使用了“g++”）。

# javascript - 奇怪的jQuery函数行为

> ID：12340200
> 
> 赞同：0
> 
> 时间：2012-09-09T15:06:01.530
> 
> 标签：javascript, jquery

我在结束正文标记之前插入了这段代码：

```
<script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery('.header-search-form, .hoverbgpfthnailiface ').click(function(e){

            var target = e.target;
            while (target.nodeType != 1) target = target.parentNode;

            if(target.tagName != 'TEXTAREA'){
                jQuery('.header-search-form').css({ 'display' : 'none' });
                jQuery('.imgcontainer').show();
            }

        });
    });
</script> 
```

问题是脚本不起作用，我检查了控制台，没有错误。奇怪的是，如果我把这段代码放在 Chrome 控制台中，它就可以完美运行。

怎么了 ？

[如果有帮助，这里](http://whiteandgold.ro/ipp/)是网站。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:19:24.873

尝试`$(document).load`或`$(window).load`代替`$(document).ready`

如果您必须在关闭 body 标记之前离开它，那么除了上面的 [假设使用`$(window).load`而不是 $(document).ready ]，请在关闭脚本标记之前在代码末尾添加此行：`$(window).trigger('load');`

# java - 使用 DefaultHTTPClient 获取页面时为什么会出现乱码？

> ID：12340201
> 
> 赞同：0
> 
> 时间：2012-09-09T15:06:02.747
> 
> 标签：java, android

我正在尝试使用 Android 获取页面`DefaultHTTPClient`并使用 Jsoup 解析它。我得到了一个非常奇怪的响应，其中`<body>`and`</body>`标记中的所有 HTML 都被编码成某种东西。

```
<html>
  <head></head>
  <body>
       ��������������Y�#I�&amp;amp;�\�+��*;����/U���53�*��U�=�D�I:I� ����X�����΃��=H��2�`Ѓ  ��o��nͽ�C瘹;�l2Y�I_l�����;f��W�k��o2.����?�r&gt;��œ�qYξ&lt;&lt;&lt;;;�g*��ѡl���9&gt;s@I��`R��V �c�������Ɂ��e�����,&gt; }���A�����W�?��&quot;.��ˡhޖ�Qy1�oL�_�W�h?9�E?Ofe��KO�Q��(�Av�N�h@��G�qvV�_G��W�g�'q�2�N��L�?�&amp;quot;鳷�x�o�����$9�}/;'#ȸ Q��&amp;�2�\�a��aǔ�L�I�ԯ�=���TPFE� ���:�,�H�N�'QQԯ&lt;&gt;�i}�x��'$�'O ��qy@J�h 2��ᓃ�CH��ʤO���0�LD)��p8�챺)
  </body>
</html> 
```

这是我获取页面的方法。

```
 public String doGet(String strUrl, List<NameValuePair> lstParams) throws Exception {

          String strResponse = null;
          HttpGet htpGet = new HttpGet(strUrl);
          //htpGet.addHeader("Accept-Encoding", "gzip, deflate");
          htpGet.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1");
          DefaultHttpClient dhcClient = new DefaultHttpClient();
          PersistentCookieStore pscStore = new PersistentCookieStore(this.objContext);
          dhcClient.setCookieStore(pscStore);
          HttpResponse resResponse = dhcClient.execute(htpGet);
          strResponse = EntityUtils.toString(resResponse.getEntity());
          return strResponse;

  } 
```

为什么会发生这种情况？

如果我使用 Jsoup 本身获取页面，则响应很好。我必须使用`Jsoup.connect("http://www.kat.ph/").get()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:11:12.150

试试这个方法……结果一样吗……

```
URL url = new URL("Your_URL");

InputStream is = url.openStream();   // or url.openConnection();

Scanner scan = new Scanner(is);

while(scan.hasNextLine()){

 System.out.println(scan.nextLine());

 }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:35:19.177

这是因为响应是 GZIPped。我连接了一个自定义响应拦截器来解压缩响应。就是这个：

```
class Decompressor implements HttpResponseInterceptor {

    /*
     * @see org.apache.http.HttpResponseInterceptor#process(org.apache.http.
     * HttpResponse, org.apache.http.protocol.HttpContext)
     */
    public void process(HttpResponse hreResponse, HttpContext hctContext)   throws HttpException, IOException {

        HttpEntity entity = hreResponse.getEntity();

        if (entity != null) {

            Header ceheader = entity.getContentEncoding();

            if (ceheader != null) {

                HeaderElement[] codecs = ceheader.getElements();

                for (int i = 0; i < codecs.length; i++) {

                    if (codecs[i].getName().equalsIgnoreCase("gzip")) {

                        hreResponse.setEntity(new HttpEntityWrapper(entity) {

                            @Override
                            public InputStream getContent() throws IOException, IllegalStateException {

                                return new GZIPInputStream(wrappedEntity.getContent());

                            }

                            @Override
                            public long getContentLength() {

                                return -1;

                            }

                        });

                        return;

                    }

                }

            }

        }

    }

} 
```

# javascript - 使用 javascript 获取跨度的文本

> ID：12340207
> 
> 赞同：0
> 
> 时间：2012-09-09T15:06:48.067
> 
> 标签：javascript

`ul li`我有一个 JavaScript 代码，用于通过从菜单中获取值来生成选择框。

html菜单：

```
<ul class="menu">
 <li>
   <a class="menu-item active parent" href="#">
    <span class="menu">
    <span class="menu-title">Inspiration</span>
    <span class="menu-desc">wow! Amazing </span>
    </span>
   </a>
 </li>
</ul> 
```

我只想得到`<span class="menu-title">`文本。我当前的 javascript 代码从两个跨度中获取文本。这是javascript：

```
document.getElements('ul.menu a.menu-item').each(function (el) {
            optText = '&nbsp;' + el.get('text'); 
```

**注意：** 我可以从第一个跨度中获取文本，将其更改为此`getElements('ul.menu a.menu-item')`，`getElements('ul.menu a.menu-item span.menu-title')`但随后我的某些代码将不起作用。所以请更改第二行

`optText = '&nbsp;' + el.get('text');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:12:12.120

你在使用外部库吗？我不明白你的javascript。

要获取“菜单标题”的内容，您可以使用：

```
document.getElementsByClassName("menu-title")[0].innerHTML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:40:35.307

得到了答案，我只是改变了这个；

```
optText = '&nbsp;' + el.get('text'); 
```

至：

```
optText = '&nbsp;' + el.getElements('span.menu-title').get('text'); 
```

反正！朋友感谢帮助

# c++ - 这个简单的（原子）锁线程安全吗？

> ID：12340208
> 
> 赞同：7
> 
> 时间：2012-09-09T15:06:50.093
> 
> 标签：c++, multithreading, c++11, thread-safety

这段代码是线程安全的吗？我应该在函数 sig 中有 volatile 吗？（例如：）`void Unlock() volatile {v=0;}`如果不是我如何使这个线程安全？

```
class SimpleLock {
    std::atomic<int> v;
public:
    bool try_lock() { int z=0; return v.compare_exchange_strong(z, 1); }
    void lock() { while(try_lock()==false) std::this_thread::yield(); }
    void unlock() {v=0;}
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T15:28:29.237

Yes, it is thread-safe, although you could rename `Lock` to `TryLock` since you are not calling CAS in a loop until it succeeds. Traditionally `Lock` operations are supposed to block until the acquire succeeds.

Regarding `volatile`, [the docs](http://en.cppreference.com/w/cpp/atomic/atomic) of `std::atomic` specify (about the `=` operator):

> Atomically assigns a value t to the atomic variable. Equivalent to store(desired).

Then about `store`:

> void store( T desired, memory_order = std::memory_order_seq_cst );

Then about `memory_order = std::memory_order_seq_cst`:

*   No writes in the writer thread can be reordered after the atomic store
*   No reads in the reader thread can be reordered before the atomic load.
*   The synchronization is established between all atomic operations tagged std::memory_order_seq_cst. All threads using such atomic operation see the same order of memory accesses.

So no, you don't need `volatile` here. Additionally, `volatile` has weaker guarantees than the ones above (in fact, `volatile` is mostly useless in C++):

> Within a thread of execution, accesses (reads and writes) to all volatile objects are guaranteed to not be reordered relative to each other, but this order is not guaranteed to be observed by another thread, since volatile access does not establish inter-thread synchronization.

# c - PCSC阅读器模拟器

> ID：12340213
> 
> 赞同：1
> 
> 时间：2012-09-09T15:08:27.780
> 
> 标签：c, linux, pcsc

我需要一个适用于 Linux 的软件仿真器 PC/SC 阅读器，但找不到。

我唯一找到的是[http://vsmartcard.sourceforge.net/](http://vsmartcard.sourceforge.net/)。但是这个库需要手机来模拟 PC/SC 设备。

我可以在某个地方找到 PC/SC 阅读器的完全软件仿真器吗？感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T17:31:04.000

您提供的链接是您问题的答案。该链接上提出的项目是虚拟智能卡架构，可用于模拟不同目的的智能卡。您不需要手机，这只是他们提供的一个用例场景。

[http://vsmartcard.sourceforge.net/virtualsmartcard/README.html](http://vsmartcard.sourceforge.net/virtualsmartcard/README.html) 按照此说明，您可以访问他们提供的三个智能卡模拟器。除此之外，您还可以破解他们的 python 虚拟卡并实现/模拟您想要的行为。

# spring-integration - Spring Integration - 标头大小写敏感性

> ID：12340215
> 
> 赞同：0
> 
> 时间：2012-09-09T15:08:40.500
> 
> 标签：spring-integration

这个周末我遇到了一个问题，在`MailSendingMessageHandler`. SI 中的邮件标头是否应区分大小写？简短的研究使我发现通常电子邮件标题应该是不敏感的（1）。

这是 SI 的疏忽还是我错过了一些明显的东西？

1.  [电子邮件标头是否区分大小写？](https://stackoverflow.com/questions/6143549/are-email-headers-case-sensitive)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:25:23.223

RFC 正在讨论通过网络传输的标头（例如 SMTP）。MailSendingMessageHandler 接收 Spring Integration (SI) 消息并将**SI**标头映射到 SMTP 标头。

**SI**标头**区分**大小写。

出于这个原因（以及其他原因），我们建议对标题使用框架常量，而不是编写您自己的值。

例如

```
MailHeaders.FROM 
```

在 java 或

```
#{T(org.springframework.integration.mail.MailHeaders).FROM} 
```

在指定标头名称的 SpEL 表达式中。

# cqrs - CQRS 事件不包含更新读取模型所需的详细信息

> ID：12340216
> 
> 赞同：18
> 
> 时间：2012-09-09T15:08:46.380
> 
> 标签：cqrs

关于 CQRS 我没有得到一件事：当引发的事件不包含更新读取模型所需的详细信息时，如何更新读取模型。

不幸的是，这是一个很常见的场景。

示例：我将用户添加到组中，因此我发送了 addUserToGroup(userId, groupId) 命令。这由命令处理程序接收、处理、创建、存储和发布 userAddedToGroup 事件。

现在，事件处理程序接收此事件和这两个 ID。现在应该有一个视图列出了所有用户及其所在组的名称。要更新该视图的读取模型，我们确实需要用户 ID（我们有）和组名（我们没有没有，我们只有它的 id）。

所以问题是：我该如何处理这种情况？

目前，我想到了四个选项，它们都有其特定的缺点：

1.  读取模型询问域。=> 禁止，甚至不可能，因为域只有行为，没有（公共）状态。

2.  读取模型从读取模型中的另一个表中读取组名。=> 有效，但是如果没有匹配表怎么办？

3.  将必要的数据添加到事件中。=> 不起作用，因为这意味着我还必须更新所有以前的事件，而且我无法预见有一天我可能需要哪些数据。

4.  不要通过“通常的”事件处理程序来处理事件，而是在后台启动一个 ETL 进程来处理事件存储，创建必要的数据并写入读取模型。=> 工作，但对我来说，对于这样一个简单的场景来说，这似乎有点太多的开销。

所以，问题是：我该如何正确处理这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T16:24:10.247

有两种常见的解决方案。

1）“事件丰富”是您确实在事件上放置反映您所提及信息的信息的位置，例如组名称。这样做介于正确建模您的域和作弊之间。例如，如果您知道组名称发生了变化，那么在更改时发出名称并不是一个坏主意。想象一下，当您在报价单或发票上创建行项目时，您希望在发票创建事件上发出所售商品的价格。这是因为您必须遵守该价格，即使它稍后发生变化。

2) 一次投射多个流。编写一个投影仪，它可以观察来自各种流的信息并将它们连接在一起。您可能会观看用户和组事件以及您的用户添加到组事件。根据系统中事件的顺序，您可能在知道组名称之前就知道用户在组中，但在开始之前您应该知道事件存储的一般属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T21:33:13.037

事件不一定代表首先启动进程的命令的一对一映射。例如，如果您有一个命令：

```
SubmitPurchaseOrder
    Shopping Cart Id
    Shipping Address
    Billing Address 
```

生成的事件可能如下所示：

```
PurchaseOrderSubmitted
    Items (Id, Name, Amount, Price)
    Shipping Address
    Shipping Provider
    Our Shipping Cost
    Shipping Cost billed to Customer
    Billing Address
    VAT %
    VAT Amount
    First Time Customer
    ... 
```

通常，信息对域模型可用（通过命令提供或作为相关聚合的已知内部状态或通过作为处理的一部分计算。）

此外，可以通过在处理期间查询读取模型甚至不同的 BC（例如，根据状态检索实际的增值税百分比）来丰富事件。

您正确地假设事件可以（并且可能会）随着时间而改变。如果您使用版本控制，这基本上无关紧要：添加新事件（例如`SubmitPurchaseOrderV2`）并向所有应该使用它的类添加适当的事件处理程序。不需要更改旧的事件，它仍然可以被消费，因为你不修改接口，你扩展它。这基本上归结为实践中**开放/封闭原则**的一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:27:11.543

选项 2 很好，您关于“组名称读取模型表中的不匹配怎么办”的问题将不适用。不应删除任何数据，应在先前的事件（例如删除组）被触发时失效。最后，组表中的行有效，您可以毫无问题地读取组名。唯一明显的问题可能是速度不一致，但这是另一个问题，无论处理速度如何，事件都应该有序处理。

# crm - 需要将自定义字段从 crm.lead 复制到客户或合作伙伴

> ID：12340221
> 
> 赞同：0
> 
> 时间：2012-09-09T15:09:36.147
> 
> 标签：crm, openerp, lead

我从 crm.lead 继承了一个对象，并在其中添加了一些字段。它工作正常，但我想要的是，当我单击 Create 按钮将潜在客户更改为合作伙伴时，这些字段必须自动从潜在客户复制到客户。请记住，我还将在客户中添加这些字段。但不幸的是，我还无法找到将数据从潜在客户复制到合作伙伴的确切位置。我试图探索 crm 向导 (crm_lead_to_partner) 但我没有找到任何地方。请在这方面帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:33:38.417

看看[crm_base_contact 模块是](http://bazaar.launchpad.net/~domsense/domsense-agilebg-addons/6.1/view/241/crm_base_contact/wizard/crm_lead_to_partner.py#L21)如何工作的：

```
class crm_lead2partner(osv.osv_memory):
    _inherit = 'crm.lead2partner'
    def _create_partner(self, cr, uid, ids, context=None):
        partner_ids = super(crm_lead2partner, self)._create_partner(cr, uid, ids, context)
        [...do your stuff...]
        return partner_ids 
```

# c++ - C++ 虚拟析构函数和内存泄漏

> ID：12340229
> 
> 赞同：0
> 
> 时间：2012-09-09T15:10:21.927
> 
> 标签：c++, memory-leaks, polymorphism, destructor, valgrind

我有最奇怪的内存泄漏，我不知道为什么。我有一个抽象类如下：

```
class ClassA
{
public:
    virtual ~ ClassA (){}
    virtual void notify(ClassB*) = 0;
    virtual void add(ClassB*) = 0;
}; 

class ClassC : public ClassA
{
public:
    void notify(ClassB*)
    { 
        //some cout statements
    }
    void add(ClassB*)
    { 
        //some cout statements
    }
};

int main()
{
    ClassA *f = new ClassC();
    delete f;
} 
```

现在，当我编译代码并运行 Valgrind 时，它没有泄漏。但是，当我删除 ClassA 析构函数（或使其成为非虚拟析构函数）时，Valgrind 报告 32 字节作为肯定丢失的内存。我不知道为什么会发生这种情况，因为我的析构函数什么都不做，也没有成员变量。有任何想法吗？

编辑：我已经用 g++ 在 Ubuntu 64bit 中编译

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T15:11:33.173

是的，未定义的行为可能会导致内存泄漏，这就是您删除`virtual`析构函数时发生的情况。

### C++03 5.3.5)

> 3) [...] 在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义。[...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:55:14.180

正如其他答案所述，它确实是UB。

我相信丢失的 32 个字节是从 ClassC 隐藏指针到 vtable 的。

在您的示例中比较 ClassA 和 ClassC 的 sizeof ...

具有虚拟内容的类通常大于其成员的总和......

# javascript - 如何组合这 2 个 Greasemonkey 脚本？

> ID：12340231
> 
> 赞同：0
> 
> 时间：2012-09-09T15:10:23.400
> 
> 标签：javascript, greasemonkey

我需要为 GM 组合这两个脚本。一个从列表中打开新页面，另一个单击“关注”按钮。

脚本 1：[如何自动按顺序打开页面列表？](https://stackoverflow.com/questions/12260455/how-to-open-a-list-of-pages-automatically-and-sequentially)

脚本 2：[如何使用 Greasemonkey 单击此按钮？](https://stackoverflow.com/questions/12252701/how-do-i-click-on-this-button-with-greasemonkey)

我试图自己组合它们，但未能创建一个完全重新加载页面的工作脚本，即使它们按顺序放在列表中（如果你阅读了另一个问题，你会明白我的意思）。

这是我尝试过的，但它没有按预期工作，因为它没有正确重新加载页面并继续执行其任务：

```
// ==UserScript==
// @name    Follow People on INK361
// @description Follow People from our FB Page's list INK361
// @include     http://ink361.com*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design
    change introduced in GM 1.0.
    It restores the sandbox.
*/

var urlsToLoad  = [
'http://ink361.com/#/users/30742610/photos',
'http://ink361.com/#/users/193869245/photos',
'http://ink361.com/#/users/215062853/photos',
'http://ink361.com/#/users/218295575/photos'
];

/*--- Since many of these sites load large pictures, Chrome's and 
    Firefox's injection may fire a good deal before the image(s) 
    finish loading.
    So, insure script fires after load:
*/

//--- Catch new pages loaded by WELL BEHAVED ajax.
window.addEventListener ("hashchange", FireTimerA,  false);

function FiretimerA () {
    waitForKeyElements ("a.simplebutton:contains('follow')", FireTimer());
}

function FireTimer (jNode) {

    if ( ! /^\s*follow\s*$/i.test () ) {   
        return false;
    }

    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
    GotoNextURL();
}

function GotoNextURL () {
    var numUrls     = urlsToLoad.length;
    var urlIdx      = urlsToLoad.indexOf (location.href);
    urlIdx++;
    if (urlIdx >= numUrls)
        urlIdx = 0;

    location.href   = urlsToLoad[urlIdx];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:16:59.583

~~合并这些脚本*应该*很简单：只需标准化元数据块并将一个脚本的 javascript 粘贴到另一个脚本之后。~~

在确定了合并脚本的真正用途后，我们得到：

```
// ==UserScript==
// @name        _Follow People on INK361
// @description Follow People from our FB Page's list INK361
// @include     http://ink361.com/#/users/*
// @exclude     http://ink361.com/#/users/223888036*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design
    change introduced in GM 1.0.
    It restores the sandbox.
*/

var urlsToLoad  = [
    'http://ink361.com/#/users/14565576/photos'
    , 'http://ink361.com/#/users/218217815/photos'
    , 'http://ink361.com/#/users/202670894/photos'
    , 'http://ink361.com/#/users/201771644/photos'
    , 'http://ink361.com/#/users/217243779/photos'
    , 'http://ink361.com/#/users/218295748/photos'
    , 'http://ink361.com/#/users/218273533/photos'
    , 'http://ink361.com/#/users/30742610/photos'
    , 'http://ink361.com/#/users/193869245/photos'
    , 'http://ink361.com/#/users/215062853/photos'
];

/*--- Operation:
    1) If the button is "follow" then it clicks it.
    2) If the button is, or becomes "unfollow", then go to the next page.
    3) If there is no button or the button stops working, it stays on the current page.
*/

//--- Note that contains() is CASE-SENSITIVE.
waitForKeyElements (
    "#relationship a.simplebutton:contains('follow')",
    clickOnFollowButton
);

function clickOnFollowButton (jNode) {

    if ( /^\s*follow\s*$/i.test (jNode.text() ) ) {
        //--- Button is "follow"; click it.

        var clickEvent  = document.createEvent ('MouseEvents');
        clickEvent.initEvent ('click', true, true);
        jNode[0].dispatchEvent (clickEvent);
    }
    else if ( /^\s*unfollow\s*$/i.test (jNode.text() ) ) {
        //--- Unfollow button is already (or now) set.  Go to next page.
        jNode.text ("palate cleanser");
        GotoNextURL ();
    }

    return true;    //--- This node is reused, never mark it as found.
}

function GotoNextURL () {
    var numUrls     = urlsToLoad.length;
    var urlIdx      = urlsToLoad.indexOf (location.href);
    urlIdx++;

    //-- Don't loop the list of sites.
    if (urlIdx < numUrls) {
        location.assign (urlsToLoad[urlIdx]);
    }
} 
```

* * *

但这假设单击“关注”按钮会使屏幕保持在同一页面上。 **可以？**（是的）

我无法登录该站点，因此无法完全测试脚本。如果它不起作用，请列出控制台（Firebug 或 Firefox）显示的所有错误消息，并准确描述其行为方式。

# ios - 如何按修改日期对 UIDocument 的 icloud NSMetadataQuery 结果进行排序？

> ID：12340239
> 
> 赞同：7
> 
> 时间：2012-09-09T15:11:27.017
> 
> 标签：ios, icloud, uidocument, nsmetadataquery

我有一个 iOS 应用程序，它使用一个简单的 UIDocument 模型和一个用于 iCloud 存储的内容字段。我检索文档列表以使用 NSMetadataQuery 填充 UITableView。我想让新文档出现在此表的顶部，但默认排序似乎是旧的 -> 新的。

我知道如果我在文档中有一个自定义日期字段，我可以使用该字段上的 NSSortDescriptor 对查询进行排序，但我的问题是是否可以按通过 UIDocument iCloud 存储创建的文件的内在修改日期进行排序？还是有另一种首选方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T13:58:33.190

看起来正确的方法是在创建查询时设置查询的排序描述符。这些方面的东西：

```
NSMetadataQuery *query = [[NSMetadataQuery alloc] init];
[query setSearchScopes:[NSArray arrayWithObject:
                            NSMetadataQueryUbiquitousDocumentsScope]];

NSPredicate *pred = [NSPredicate predicateWithFormat: @"%K ENDSWITH '.bin'", 
                                   NSMetadataItemFSNameKey];
[query setPredicate:pred];

NSSortDescriptor *sortDescriptor = 
    [[[NSSortDescriptor alloc] initWithKey:NSMetadataItemFSContentChangeDateKey 
                                 ascending:FALSE] autorelease]; //means recent first
NSArray *sortDescriptors = [NSArray arrayWithObjects:
                                sortDescriptor,
                                nil];        
[query setSortDescriptors:sortDescriptors];

[[NSNotificationCenter defaultCenter] 
     addObserver:self 
     selector:@selector(queryDidFinishGathering:) 
     name:NSMetadataQueryDidFinishGatheringNotification 
     object:query];

[query startQuery]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:43:09.387

要点：如何调用`-[NSURL getResourceValue:forKey:error:]`并传入`NSURLContentModificationDateKey`，然后对返回的 NSDate 值进行降序排序。

详细信息：您可以传入一个比较器，`-[NSMutableArray sortUsingComparator:]`以便即时为每个对象获取所需的 NSDate，或者将它们全部获取到具有复合`NSDate, id`对象的新数组中，然后对该对象的数组进行排序，然后`id`在完成排序后提取引用（python decorate-sort-undecorate 成语）。

# ant - Codenameone 与 WSDL NB - ClassDefNotFound

> ID：12340241
> 
> 赞同：1
> 
> 时间：2012-09-09T15:11:36.020
> 
> 标签：ant, jar, wsdl, lwuit, codenameone

我已经使用 NB 通过 NB 界面将“客户端 Web 服务”添加到 Codename one 应用程序。这在模拟器中运行良好。

WSDL 类是在构建过程中自动生成的，我将它们放在 com.myco.myapp.generated 包中。

检查生成的 JAR 后，WSDL 类都正常。

但是当我将它推送到代号1的“Android构建”时，在我得到的设备上运行

```
An Internal application error occurred : java.lang.NoClassDefFoundError: com.myco.myapp.generated.SimpleStockList_Service 
```

但是这个类肯定存在于 JAR 中。

我确信它与 JAR 及其清单有关，但从来没有真正需要在 Ant 和 JAR 和构建的幕后知道该做什么。

由于类是在 ant 构建期间生成的，因此我无法将它们打包到库中。（尝试过，但由于同一类的 2 个实例而失败。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:26:03.563

Codename One 目前不支持二进制库，您需要将源代码集成到构建过程中。在这种设置中支持二进制库涉及许多复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:20:45.323

感谢Shai的帮助。

最终的答案是不要使用 WSDL，因为移动对象依赖于不包含在小型 Java 包中的序列化。

因此，我创建了一个自定义 servlet，codename1 ConnectionRequest 可以通过标准 HTTP 请求处理它。

这就是我实现它的方式 [http://www.jamesarbrown.com/?p=164](http://www.jamesarbrown.com/?p=164)

# android - 带有 ImageView 的 Android 动画

> ID：12340247
> 
> 赞同：0
> 
> 时间：2012-09-09T15:12:15.953
> 
> 标签：android, android-layout, animation, android-animation, android-2.2-froyo

我有一个相框，应该用其中的图片进行动画处理。我将使用一个 imageView，其中我的背景将是框架，而我的图片将是前景图像。我必须以一种相框从顶部落入屏幕中间的方式来展示它，并在其顶部附有一条丝带。将其放入中心后，只有带有图像的框架进行 toFro 运动，而色带保持刚性并且不移动。我应该如何制作这样的动画？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:15:28.083

在您的 Activity 类中声明这些变量

```
private ImageView myFrameAnimation;
private int iFrameCount;
private ImageView myPhotoLayer; 
```

使用 onStart 或按钮单击事件来启动动画

```
@Override
protected void onStart() {
    super.onStart();
    Thread thr1 = new Thread(r1);
    thr1.start();
} 
```

然后创建一个新线程来做动画

```
Runnable r1 = new Runnable() {
    public void run() {
    while (iFrameCount< 747) {

        runOnUiThread(new Runnable() {
            public void run() {
                iFrameCount++;
                switch (iFrameCount) {
                    //you can use a separate procedure here to move the ImageView with your picture in time with your animation
                    //the x,y cordinates ‎l depend on your screen/View size measured from top left corner. 
                case 310: animate_object(330,215,310,215,1);
                case 315: animate_object(150,380,150,420,80);
                case 320: animate_object(80,150,80,120,100);
                }

                   //store your animation images in the drawables folder with the name like img1.png, img2.png etc.     
                String image="img" + iFrameCount;
                resID = getResources().getIdentifier(image, "drawable",  getPackageName()); 
                if (resID != 0){

                    //Use these to time how long it takes to update the imageview/ Set your thread.sleep to around this time.
                    //startTime = System.currentTimeMillis();                           
                 myFrameAnimation.setImageResource(resID);
                    //endTime = System.currentTimeMillis();
                    //Log.d("Frame: " +iFrameCount + " setBackground took: " + (endTime - startTime) + " milliseconds");

                } else {
                           //we can skip frames if they are duplicates of the frame before to save space and memory and increase speed
                     //Log.d(TAG, "File skipped: " + iFrameCount);
                }
             }
           });
        try {
           Thread.sleep(43); //43 is milliseconds to give around 23 frames per second speed will depend on your image size that you are animating.
        } catch (InterruptedException iex) {}
      }           
      //Log.d(TAG, "Finished all frames");
      finish();
   }
}; 
```

最后有一个程序来动画照片和你的相框

```
public void animate_object(int startx, int starty, int endx, int endy, int duration)
{
//photoLayer is the Id of your imageView holding the photo. You would need to have previously loaded your photo into the imageview using
//something like this myPhotoLayer.setImageResource(resID); before the animation is started.

    myPhotoLayer = (ImageView) findViewById(R.id.photoLayer); 
    TranslateAnimation move = new TranslateAnimation(startx, endx, starty, endy);
    move.setDuration(duration);
    move.setFillAfter(true);
    myPhotoLayer.startAnimation(move);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:36:46.157

你需要像卡通一样画它。首先尝试拍摄视频以获得您需要的运动，然后创建一个 PNG 序列（使用 Adob​​e After Effects），将您想要的帧作为指导，然后在 Illustrator 或 Photoshop 中重新绘制它们。

然后使用 animation.drawable 创建一个动画来显示帧，只要它没有太多帧。

# macos - NSTextView 没有收到字符串

> ID：12340248
> 
> 赞同：2
> 
> 时间：2012-09-09T15:12:23.563
> 
> 标签：macos, cocoa

我正在编写一个基本的文本编辑器，需要实现一种阅读方法。由于我使用的是 NSDocument，我决定重写该方法`- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError`

下面是我的方法代码：

```
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError
{
    BOOL readSuccess = NO;
    NSString *fileContents = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    if (!fileContents && outError) {
    *outError = [NSError errorWithDomain:NSCocoaErrorDomain code:NSFileReadUnknownError userInfo:nil];
    }

    if (fileContents) {
    readSuccess = YES;

    [textView setString: fileContents];
    NSLog(@"%@",[textView string]);
    }
    return YES;
} 
```

`NSLog`返回 NULL 。我已将 xib 中的 textView 对象连接到 textView 属性文件的所有者（即 NSDocument 子类）。我的代码有什么问题？

我的源文件只是 NSDocument 子类接口和实现文件（GNDocument.h 和 .m）。我有两个 xib 文件：MainMenu.xib 和 GNDocument.xib（文件所有者设置为 GNDocument）。我能够将字符串 NSLog 到控制台。唯一的问题似乎是 NSTextView 没有连接到文件的所有者，即使我已经完成了连接（从文件所有者的 textView 属性拖动到 NSTextView）。

我希望有人能启发我，因为我真的不明白为什么它不起作用。请指出正确的方向，或至少一些提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:48:48.007

我找到了答案。连接没有问题。发生的事情是，在我使用读取文件后

```
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError 
```

然后我应该 setString: 到 textView 对象中

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController 
```

我需要将从文件中读取的字符串保存在另一个 NSString ivar 中，以便可以将其传递给 windowControllerDidLoadNib 方法。

我之前做错的是我 setString: 在打开和读取文件方法的同一方法中，这是在 windowController 加载 nib 文件之前。因此在此之前 textView 不存在。

# comments - 在 ipython 单元格中注释多行

> ID：12340250
> 
> 赞同：3
> 
> 时间：2012-09-09T15:12:34.543
> 
> 标签：comments, ipython

有没有办法一次性在 ipython 单元格中注释多行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T18:08:21.270

您可以使用三引号字符串。尽管这会打印出重复声明，但我想避免这种情况。

```
'''
This is a multiline
comment.
''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T10:07:19.597

要评论多行，您可以使用：

`ctrl`+`/`

这不会像三引号那样打印重复输出语句。

```
""" This is a multi line 
    comment.
"""

Out[1]:' This is a multi line \n    comment.\n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T09:39:04.677

更好的方法是使用`Alt`-`#`快捷方式。

这是一个`readline`绑定，所以它可以在任何有 GNU 的 shell 上工作`readline`，比如 Bash。

要使用它，只需在 ipython 块中键入代码，例如：

```
In [1]: if True:
   ...:     pass 
```

然后要评论完整的块，请按`Alt`-`#`单元格内的任意位置。
然后代码将更改为：

```
In [1]: #if True:
   ...: #    pass
   ...: # 
```

要取消注释，我们需要将一个数值参数传递给这个 readline 函数。它可以通过`Alt`-`some_number`细胞内的任何地方来完成。

请注意，大多数终端都有用于更改映射到`Alt`1 到 9 的选项卡的键绑定。因此，如果您打开了一个选项卡，请尝试使用不会分配给选项卡的数字。就像，如果您打开了 5 个选项卡，请使用`Alt`- `6`（任何数字都可以。它只需要传递给 readline 而不是被终端拦截）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T15:53:13.597

对我来说`Ctrl`+ `^/~`。其他解决方案对我不起作用。我正在使用 Windows 10 和 Jupyter Notebook。

# java - 在有限的空间中显示图像的特定部分？

> ID：12340251
> 
> 赞同：2
> 
> 时间：2012-09-09T15:12:48.983
> 
> 标签：java, image, swing, jframe, jscrollpane

我有一个 100x100 的框架和一个 400x400 的图像，我在整个框架上有一个分层窗格，并且在分层窗格内有一个图像。正如您所注意到的，图像比框架大，因此只会显示图像的一部分，即图像的左上部分。假设图像中有一个人在 X=32 和 y=40 并且宽度 = 10 和高度 = 10（基本上是一个矩形）wrt 框架。

## 问题

1.  图片是400x400吧？这意味着在运行时我只能看到图像的 100x100 部分，而已显示的图像部分是左上角，对吧？但是假设我想在图像中显示位于 350x350 的建筑物，那么我该怎么做（因为它位于图像的底部，所以不会显示）？
2.  假设第一个问题已解决，然后假设在 350x350 处有一栋宽度 = 20 且高度 = 20 的“框架”建筑物。现在，当我在运行时显示图像时（现在图像的底部可见，假设问题 1 已解决），建筑物框架的坐标不应改变，即它们应保持 350x350 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:24:25.987

第 1 点）我猜你是在 a 中添加图像，`JPanel`然后将图像添加到 a 中，然后`JFrame`将图像添加`JPanel`到 a 中`JScrollPane`，最后落在`JFrame`. `JPanel`s 和s 都支持通过使用[#scrollRectToVisible](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#scrollRectToVisible%28java.awt.Rectangle%29)`JScrollPane`进行编程滚动。

这是 scrollRectToVisible 的（某种）工作示例

```
JPanel panel = new JPanel();
JPanel panel2 = new JPanel();
panel2.setPreferredSize(new Dimension(200, 11000));
SpringLayout layout = new SpringLayout();
panel2.setLayout(layout);
for (int i = 0; i < 100; i++) {
    JLabel textField = new JLabel();
    textField.setText("textfield number " + i);
    textField.setPreferredSize(new Dimension(150, 100));
    layout.putConstraint(SpringLayout.NORTH, textField, i * 110, SpringLayout.NORTH, panel2);

    panel2.add(textField);
}
JScrollPane scrollPane = new JScrollPane(panel2, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
scrollPane.setPreferredSize(new Dimension(200, 500));

panel2.scrollRectToVisible(new Rectangle(0, 800, 150, 100));

panel.add(scrollPane); 
```

将 panel 变量添加到 JFrame 中，您就可以运行此代码了。另外，请注意，这只是示例代码，而不是应编写代码以将组件添加到面板的实际方式：P

第2点）我仍然不完全理解这个查询，所以我会分两部分给你答案。a）我不明白为什么相对计算很重要？你能试试我提供的样本，看看它是否能满足需要吗？如果没有，请阅读选项 b b) 该`Rectangle`对象有一个`setLocation(int, int)`（参考：[Java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Rectangle.html#setLocation%28int,%20int%29)），您应该使用它。我无法为您提供更准确的答案或代码示例，因为我不完全了解您要做什么，而且我没有可以使用的代码示例。

# java - uispec4j 测试应用程序 java

> ID：12340253
> 
> 赞同：0
> 
> 时间：2012-09-09T15:12:59.827
> 
> 标签：java, testing, uispec4j

我有一个小应用程序，电话簿，我想测试它。我对 uispec4j 有一些问题，我写这个：

```
public class TestRubricaBlack extends UISpecTestCase{

@BeforeClass
public void setUp(){
    setAdapter(new MainClassAdapter(Rubrica.class, new String[0]));

}

public void testMamma(){

    Window window=getMainWindow();
    assertEquals(true,window.getButton("index").isVisible());
}
} 
```

当我尝试执行测试时，出现此错误，问题出在函数 getMainWindow() 上：

```
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.uispec4j.utils.TriggerRunner.runInCurrentThread(TriggerRunner.java:18)
    at org.uispec4j.interception.WindowInterceptor.run(WindowInterceptor.java:320)
    at org.uispec4j.interception.WindowInterceptor.run(WindowInterceptor.java:290)
    at org.uispec4j.interception.MainClassAdapter.getMainWindow(MainClassAdapter.java:24)
    at org.uispec4j.UISpecTestCase.getMainWindow(UISpecTestCase.java:84)
    at it.is2.TestRubricaBlack.testMamma(TestRubricaBlack.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.uispec4j.utils.MainClassTrigger.run(MainClassTrigger.java:22)
    at org.uispec4j.utils.TriggerRunner.runInCurrentThread(TriggerRunner.java:12)
    ... 24 more
Caused by: java.lang.NullPointerException: peer
    at sun.awt.windows.WTextFieldPeer.create(Native Method)
    at sun.awt.windows.WComponentPeer.<init>(WComponentPeer.java:595)
    at sun.awt.windows.WTextComponentPeer.<init>(WTextComponentPeer.java:36)
    at sun.awt.windows.WTextFieldPeer.<init>(WTextFieldPeer.java:65)
    at sun.awt.windows.WToolkit.createTextField(WToolkit.java:332)
    at org.uispec4j.interception.toolkit.ToolkitDelegate.createTextField(ToolkitDelegate.java:262)
    at java.awt.TextField.addNotify(TextField.java:205)
    at java.awt.Container.addNotify(Container.java:2592)
    at javax.swing.JComponent.addNotify(JComponent.java:4683)
    at java.awt.Container.addNotify(Container.java:2592)
    at javax.swing.JComponent.addNotify(JComponent.java:4683)
    at java.awt.Container.addNotify(Container.java:2592)
    at javax.swing.JComponent.addNotify(JComponent.java:4683)
    at java.awt.Container.addNotify(Container.java:2592)
    at javax.swing.JComponent.addNotify(JComponent.java:4683)
    at javax.swing.JRootPane.addNotify(JRootPane.java:735)
    at java.awt.Container.addNotify(Container.java:2592)
    at java.awt.Window.addNotify(Window.java:638)
    at java.awt.Frame.addNotify(Frame.java:469)
    at java.awt.Window.show(Window.java:823)
    at it.is2.Rubrica.main(Rubrica.java:26)
    ... 30 more 
```

有人能帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:56:27.233

堆栈跟踪告诉我找不到名为“index”的按钮。不是通灵者或有你的代码可用，我不知道为什么。以下是我的最佳猜测：

1.  您没有定义名为“index”的按钮
2.  你拼错了名字
3.  按钮是在面板上定义的，而不是直接在主窗口上

我对第三项有问题，这就是我看到你的帖子的方式。我可能错了，但似乎 uispec4j 不会自动查看面板之类的容器，在我的情况下是 JScrollPanes。

如果我发现我对这种行为有误，我会更新我的回复。如果我想出一个解决方案，也许是一个自定义匹配器，我也会发布它。

祝你好运。

# c++ - C++ 中的默认构造函数与隐式构造函数

> ID：12340257
> 
> 赞同：29
> 
> 时间：2012-09-09T15:13:18.410
> 
> 标签：c++, constructor

这很简单，但是捷克语（我的母语）不区分隐式和默认，所以我对一些捷克语翻译感到困惑，隐式和默认构造函数或构造函数调用之间有什么区别。

```
struct Test {
  Test(int n=0) { }
}; 
```

你能用这些术语描述什么是：

1.  测试t1；
2.  测试 t2();
3.  测试 t3 = 3；
4.  测试 t4(4);
5.  测试 t5 = 测试（5）；

?

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-09T16:25:03.083

在谈论构造函数时，术语*default*和*implicit具有以下含义：*

*   **默认构造函数**是可以不带参数调用的构造函数。它要么不接受任何参数，要么对所接受的每个参数都有默认值。

*   **隐式构造函数**是语言中常用来谈论两个不同概念的术语，

    *   *隐式声明的构造*函数，如果没有提供用户定义的构造函数（默认）或没有提供复制构造函数（复制），将为所有用户类声明*默认或复制构造函数。*也就是说，一个没有用户声明的构造函数的类有一个隐式声明的*默认构造函数。*

    *   *隐式定义的构造函数*是*隐式声明的构造函数*，在语言中使用（*odr-used* ¹并且编译器将为其提供定义。

    ```
    struct test
    {
        test(int i = 0) { }
        // test(test const&) implicitly declared here
    };

    struct test2 { };      // implicitly declared: test2(), test2(test2 const&)

    int main()
    {
        test t;

        test copy(t);      // causes *definition* of the implicitly
                           // declared copy constructor

        test2 t2;          // causes *definition* of test2::test2()

        test2 copy2(t2);   // causes *definition* of test2::test2(test2 const&)
    } 
    ```

简单来说，如果可以不带参数调用构造函数，则它是*默认的。*如果构造函数不是由用户提供而是声明/定义的，则它是*隐式的（已声明/定义） 。*

至于具体情况：

```
Test t1; 
```

使用默认构造函数 ，`Test(int = 0)`它不是隐式的。

```
Test t2(); 
```

这是该语言的一个奇怪的怪癖，它声明了一个不带参数并返回一个`Test`对象的函数。

```
Test t3 = 3; 
```

这称为*复制初始化*，相当于隐式^*转换 from `3`to和from 转换结果的`Test`复制构造的组合。`t3`这将使用`Test(int)`构造函数进行转换，然后使用*隐式定义*（和*声明*）的复制构造函数。注意：编译器可以优化掉副本，但它必须验证复制构造函数是否可用（访问说明符）并且可以定义。

```
Test t4(4); 
```

使用`Test(int)`构造函数，在这种情况下它不充当*默认*构造函数。

```
Test t5 = Test(5); 
```

等效于这种`Test t3 = 3`情况，唯一的区别是在这种情况下从`5`to的转换`Test`是显式的。在这个例子中，这无关紧要，但如果构造函数被标记为`explicit`这一行将编译，而`t3`案例将失败。

* * *

**)隐式*的另一种用法，在这种情况下是指代码中未明确请求从`3`to的转换这一事实。`Test`将此与`t5`程序员明确要求转换的地方进行比较：`Test(5)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T15:16:17.457

您似乎混淆了某些术语。**默认**构造函数是不带参数的构造函数，隐**式调用**是直接调用构造函数。

反正：

> 1）测试t1；

默认构造函数。

> 2）测试t2（）；

函数声明。

> 3) 测试 t3 = 3；

复制初始化。将调用转换构造函数，创建一个临时`Test`from `3`，并使用复制构造函数创建`t3`。

> 4) 测试t4(4)；

直接初始化。直接使用转换构造函数。

> 5）测试t5 =测试（5）；

复制初始化。类似于 3)。

# php - 主 url 的 codeigniter 路由问题

> ID：12340259
> 
> 赞同：0
> 
> 时间：2012-09-09T15:13:35.597
> 
> 标签：php, oop, .htaccess, codeigniter, routes

我在 routes.php 上定义了一条新路线，但它有问题。

```
$route['default_controller'] = "index";
$route['404_override'] = '';
$route['(:any)'] = "oyna/oyun/$1"; 
```

我想将 /2012.htm 重定向到 oyna/oyun/2012.htm 我可以，但它会产生一个新问题。如果我不定义如下，我无法联系到我的其他控制器：

```
$route['default_controller'] = "index";
$route['404_override'] = '';
$route['admin/(:any)/(:any)'] = 'admin/$1/$2';
$route['admin/(:any)'] = 'admin/$1';
$route['kategori/(:any)'] = "oyna/kategori/$1";
$route['(:any)'] = "oyna/oyun/$1"; 
```

如果我没有像上面那样在 routes.php 上定义任何控制器，我就无法做到这一点。我需要做什么来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:29:43.583

I'm not sure, but try to replace `$route['(:any)'] = "oyna/oyun/$1";` with `$route['(:num).htm'] = "oyna/oyun/$1.htm";`

Or better: `$route['(\d+).htm'] = "oyna/oyun/$1.htm";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:30:31.497

CodeIgniter 的路由有点搞笑，但是一旦你了解了它们是如何处理的，它就很有意义了。

由于路由使用正则表达式匹配，您不能只拥有超级通用的东西并期望其他一切都可以工作，因为它会在简单地路由到 URL 所隐含的控制器/方法之前查看路由。

如果要匹配诸如`http://domain.tld/2njkf4r`AND之类的 URL，`http://domain.tld/pages/about`则必须创建更具体的规则来处理匹配第一种情况的非常一般规则的“例外”。

您是正确的，除非您定义其他路线，否则它不会起作用，因为仅`$route['(:any)']`作为路线，每个请求都会匹配。那条路线必须是您绝对的最后一条路线。由于他们处理路由的方式，这很麻烦，但很有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:43:19.117

我的所有链接末尾都有 .htm。这就是解决方案：

```
$route['(:any).htm'] = "oyna/oyun/$1"; 
```

因为我的控制器最后没有.htm。

# wcf - 如何公开具有多种服务行为的单个 WCF 服务？

> ID：12340260
> 
> 赞同：4
> 
> 时间：2012-09-09T15:13:37.210
> 
> 标签：wcf

我有一个 WCF 服务需要满足以下要求：

1.  Endpoint1：它应该使用带有 Windows 身份验证的 netTCP 绑定。
2.  Endpoint2：它应该使用带有自定义用户名和密码验证的 netTCP 绑定。

我可以通过创建两种服务行为来单独完成这两项工作，一种用于 Windows 身份验证，另一种用于用户名和密码，但这样我必须为上述功能公开 2 个服务而不是 1 个。我正在寻找一种方法，通过这种方法我可以只公开一个服务，并且通过不同的端点配置，我能够满足要求。

代码片段和配置会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:02:00.007

这是 WCF 支持的场景之一，单个接口公开为 2 个不同的端点。

它们将有两个不同的地址，但指向相同的代码。

```
<service 
    name="Microsoft.ServiceModel.Samples.CalculatorService"
    behaviorConfiguration="CalculatorServiceBehavior">
    <!-- This endpoint is exposed at the base address provided by host:       http://localhost/servicemodelsamples/service.svc  -->
   <endpoint address=""
        binding="basicHttpBinding"
        contract="Microsoft.ServiceModel.Samples.ICalculator" />
   <!-- secure endpoint exposed at {base address}/secure:       http://localhost/servicemodelsamples/service.svc/secure -->
  <endpoint address="secure"
        binding="wsHttpBinding"
        contract="Microsoft.ServiceModel.Samples.ICalculator" />
  ...
</service> 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/ms751515.aspx](http://msdn.microsoft.com/en-us/library/ms751515.aspx)

# c - （另一个）返回 Libc 攻击：不会出现 Segfault 或使用恶意输入返回 Libc。虽然在 GDB 中工作

> ID：12340262
> 
> 赞同：0
> 
> 时间：2012-09-09T15:13:45.103
> 
> 标签：c, security, buffer-overflow, libc

我想了解返回 libc 攻击的工作原理，所以我编写了一个易受攻击的程序，以便可以将函数的返回地址更改为`system()`. 但是，该程序似乎没有调用`system()`并干净地退出。

## 先决条件

**-**我正在使用 Debain Squeeze

**-**我禁用了地址随机化：

```
echo 0 > /proc/sys/kernel/randomize_va_space 
```

## 易受攻击的代码

```
#include <stdio.h>

void someFunc(void);

void someFunc(void){
    char buffer[64];

    gets(buffer);
    //puts(buffer);
}

int main(int argc, char **argv)
{
    someFunc();
    return 0;
} 
```

代码编译为：

```
gcc -fno-stack-protector -ggdb -o vuln vuln.c 
```

使用 GDB，我断言：

1.  `/bin/zsh`是 @`0xbffff9b9`
2.  `system()`是 @`0xb7ed0000`
3.  `exit()`是 @`0xb7ec60f0`

## 开发

`72`我通过在0、exit、system 和指向的指针`/bin/zsh`中按顺序使用它来利用它：

```
printf "%072x\xf0\x60\xec\xb7\x00\x00\xed\xb7\xb9\xf9\xff\xbf" | ./vuln 
```

该程序没有段错误或执行`/bin/zsh`。

## 在 GDB 中

有趣的是，如果我更改`SHELL="/xin/zsh"`并在 gdb 中执行它，系统调用将起作用：

```
Cannot exec /xin/zsh 
```

所以我的问题是：

1.  我是否正确理解了回归 libc 攻击的概念？

2.  我是否以正确的方式和顺序传递恶意代码？

3.  为什么它似乎在 GDB 中有效，但在 shell 中无效？
    （我已经读过[return to libc 在 gdb 中工作，但在单独运行时没有](https://stackoverflow.com/questions/4177996/return-to-libc-works-in-gdb-but-not-when-running-alone)）

# memory - 我的 CUDA 纹理内存有多大？

> ID：12340265
> 
> 赞同：7
> 
> 时间：2012-09-09T15:13:51.443
> 
> 标签：memory, cuda

如何解释`deviceQuery`样本输出的纹理内存信息以了解纹理内存大小？这是我的纹理内存的输出。

> Max Texture Dimension Size (x,y,z) 1D=(65536), 2D=(65536,65535),3D=(2048,2048,2048)
> Max Layered Texture Size (dim) x layers 1D=(16384) x 2048 , 2D=(16384,16384) x 2048

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T17:25:32.533

这是一个常见的误解，但在 CUDA GPU 中没有“纹理内存”之类的东西。只有纹理，它们是通过具有内置缓存、过滤和寻址限制的专用硬件访问的全局内存分配，这导致您在文档和设备查询中看到报告的大小限制。因此，限制*大致*是全局内存的可用量（允许在 CUDA 数组中进行填充和对齐）或您已经引用的尺寸限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T16:11:19.867

输出显示最大纹理尺寸为：

对于 1D 纹理 65536 对于 2D 纹理 65536*65535 对于 3D 纹理 2048*2048*2048

如果您想要以字节为单位的大小，请将其乘以最大通道数 (4) 和最大子像素大小 (4B)。

（对于分层纹理，将获得的尺寸相关数字乘以获得的最大层数。）

但是，这是单个纹理的最大大小，而不是所有纹理的可用内存。

# jquery - PhoneGap + jQuery Mobile 使用哪个 UI Designer Tool？

> ID：12340267
> 
> 赞同：1
> 
> 时间：2012-09-09T15:14:15.520
> 
> 标签：jquery, html, cordova, jquery-mobile

我目前发现了以下内容。你有什么建议？我真的在寻找拖放 UI/UX 设计器工具，它还使用 JQueryMobile 小部件和我将在 Eclipse 中编写的其余应用程序逻辑。

*   Dreamweaver CS6
*   蒂格齐
*   只记在心
*   科迪卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T09:05:56.203

你可以使用 Intel 的 XDK AppFramework，而且 Codiqa 相当不错

# extjs - 当代理为 REST 时，如何获取当前商店的 url？

> ID：12340270
> 
> 赞同：0
> 
> 时间：2012-09-09T15:14:26.327
> 
> 标签：extjs, extjs4.1

我不想重新发明轮子，所以我很确定他们有一种方法，在存储（或代理）上将休息代理参数转换为 url（用于读取操作）。

我也想做同样的事情，但我找不到任何 getUrl 或类似的东西，而在休息时，url 是用一些配置构建的。

关于 extjs 使用什么方法的任何建议？我很确定他们必须这样做才能运行 ajax 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:40:19.613

`Ext.data.proxy.Rest`有一个[`buildUrl()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Rest-method-buildUrl)方法：

> buildUrl 的特殊版本，将 appendId 和 format 选项合并到生成的 url 中。覆盖它以提供进一步的自定义，但请记住调用超类 buildUrl 以便附加其他参数，例如缓存破坏器字符串。

# android - coverflow android：如何从图库中下载图像

> ID：12340272
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:14:35.927
> 
> 标签：android, coverflow

coverflow android：如何从图库中下载图像。我使用了该站点 [http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)的代码， 但它使用资源中的图像，我需要从图库中加载所有图像然后显示它使用覆盖流效果。请有人帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:30:30.967

you need to apply lazy loading for images in coverflow

take took at this

[Lazy load of images in ListView](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# math - 与给定线段相交的线

> ID：12340273
> 
> 赞同：0
> 
> 时间：2012-09-09T15:14:45.377
> 
> 标签：math, geometry, combinatorics

给定一些水平线段，我想找到一条与所有水平线段相交的垂直线。如果不存在这样的行，算法应该报告。此外，在多条垂直线的情况下，希望找到与所有水平线段的边界框中心距离最小的线。

我确信在组合几何中会有这种东西，但我找不到。谁能给我一些关于我们如何做到这一点的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:38:25.080

我将遍历您的所有线段并找到以下值：

```
minxstart - smallest x value of all of the left end of your horizontal segments
maxxstart - largest x value of all of the left ends of your horizontal segments
minxend - smallest x value of the right end of your horizontal segments
maxxend - largest x value of the right end of your horizontal segments
miny - smallest y value of horizontal segments
maxy - largest y value of horizontal segments 
```

如果 minxend < maxxstart 则不存在任何行，因为无法同时命中包含这些值的两行。

求边界框的 centerx：

```
centerx = (minxstart + maxxend) / 2 
```

垂直线段的 x 值必须介于 maxxstart 和 minxend 之间。选择一个最接近 centerx 的值，称之为 newx。

您的垂直线段将从 (newx, ymin) 变为 (newx, ymax)。

# facebook - 使用 FB 调试器

> ID：12340274
> 
> 赞同：1
> 
> 时间：2012-09-09T15:14:45.490
> 
> 标签：facebook, debugging

[https://glacial-spire-4346.herokuapp.com/repeater.php ?fb:](https://glacial-spire-4346.herokuapp.com/) **app_id** =431519396898110 &og:type=fb_sample_mani_test:meal &og:title=Pizza &og:description="Pizza" &og:image=http:// www.sugarmedia.com/nyccookbook/images/pizza.jpg &body=Pizza

当我在 facebook 调试器中使用此 URL 时，显示需要“og:url”属性的错误。在 Graph API explore 中使用 url 时也显示错误。

但是，一旦我从 url 中删除了“repeater.php”字样，一切正常。FB 调试器没有给出错误 n 我能够使用图形 API 进行发布。

为什么会发生这种情况？

PS：这是来自 developer.Facebook.com 的示例代码 n 使用“repeater.php”

# f# - 是否可以覆盖 Collections.Seq 模块中的值？

> ID：12340277
> 
> 赞同：2
> 
> 时间：2012-09-09T15:15:08.353
> 
> 标签：f#

我已经为我构建的集合实现了 IEnumerable，并且（尽管我没有对它们全部进行测试）Seq 值似乎可以正常工作。当我的集合的值的本机性能优于使用 Seq 的基于 IEnumerable 的函数时，是否可以覆盖某些 Seq 值，例如“last”？我还没有找到任何关于覆盖 Seq 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:43:48.443

正如在另一个答案中已经说过的，您无法覆盖`Seq`模块中的功能。如果您正在实现自定义集合，那么最好的做法是遵循核心 F# 库使用的标准模式。

*   该`Seq`模块包含最常用的功能和可以为任何序列合理提供的功能。

*   模块喜欢`Array`或`List`为特定集合类型提供更有效的实现，并且它们添加了更多特定于集合的函数（在 中不可用`Seq`）（例如，函数`List.tail`和`Array.get`）。

添加您自己的集合时，最好的方法是遵循以下模式：

*   实现`IEnumerable<'T>`以便`Seq`模块中的功能适用于您的类型

*   创建`MyCollection`包含标准功能（至少是对您重要的功能）的有效实现的模块，并添加更多特定于您的集合的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:29:43.383

不——`Seq`模块中的函数不能被覆盖。然而，他们中的一些人确实试图通过检查他们的输入值（`seq<'T>`你传递给他们的实例）来优化性能，看看它是否是`IList<'T>`or的一个实例`'T[]`；如果是，这些函数将采用一些优化的代码路径。例如，如果您将数组 ( `'T[]`) 传递给`Seq.length`，它将能够通过使用`.Length`数组的属性快速确定长度。

如果您坚持使用该`Seq`模块，我能想到的唯一性能优化就是让您的集合也实现[`ICollection<'T>`](http://msdn.microsoft.com/en-us/library/92t2ye13)和/或[`IList<'T>`](http://msdn.microsoft.com/en-us/library/5y536ey6). 这可能会优化某些情况，但不会是*所有*情况。

# ios - 尝试使用 FBSessionLoginBehaviorForcingWebView 时 Facebook ios sdk 3 崩溃

> ID：12340278
> 
> 赞同：3
> 
> 时间：2012-09-09T15:15:09.807
> 
> 标签：ios, facebook, ios5

我正在使用带有 ios 5 的 facebook sdk 3。我想每次向用户询问登录窗口。期望不同的用户使用应用程序。我试过下面的代码。它在应用程序内的弹出视图中显示登录，而不是使用 safari。但是在我登录或关闭窗口后应用程序崩溃。

```
NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", @"user_photos", nil];
FBSessionLoginBehavior behavior = FBSessionLoginBehaviorForcingWebView;
FBSessionTokenCachingStrategy *tokenCachingStrategy = [[FBSessionTokenCachingStrategy alloc]
                                                       initWithUserDefaultTokenInformationKeyName:@"FBTest"];

FBSession *session = [[FBSession alloc] initWithAppID:@"Appid"
                                          permissions:permissions
                                      urlSchemeSuffix:nil 
                                   tokenCacheStrategy:tokenCachingStrategy];

[session openWithBehavior:behavior
        completionHandler:^(FBSession *session,
                            FBSessionState status,
                            NSError *error) {
            // this handler is called back whether the login succeeds or fails; in the 
            // success case it will also be called back upon each state transition between
            // session-open and session-close
            if (error) {
                UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                    message:error.localizedDescription
                                                                   delegate:nil
                                                          cancelButtonTitle:@"OK"
                                                          otherButtonTitles:nil];
                [alertView show];
            }
            NSLog(@"SUCEEES");
            [self sessionStateChanged:session state:session.state error:error]; 
        }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:47:39.277

```
FBLoginView *loginview = [[FBLoginView alloc] init];

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = self;

[self.view addSubview:loginview];

[loginview sizeToFit]; 
```

这将要求每次登录窗口

# javascript - 可以将新关键字添加到 Javascript 中吗？

> ID：12340282
> 
> 赞同：1
> 
> 时间：2012-09-09T15:15:43.273
> 
> 标签：javascript, syntax, keyword, specifications, ecma262

据我了解，答案是“是的”。但假设这是真的，那怎么可能呢？

它不会违反 WHATWG 的[设计原则 #2.1](http://www.w3.org/TR/html-design-principles/#support-existing-content)吗？我的意思是，让我们假设关键字`foo`是作为关键字添加到 ECMA-262 中的。几年前编写和部署的代码不会`foo`完全破坏吗？

也许我错了，答案是否定的。也就是说，我真的别无选择，只能在这里问，因为谷歌搜索“新的 javascript 关键字”或查询的任何变体不出所料会产生大量关于`new`javascript 关键字的废话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:20:16.343

不，作为开发人员，您不能定义不属于规范的新关键字。

是的，标准委员会可以添加新的关键字或保留字，但通常他们会因为您声明的损坏原因而避免这样做。

# asp.net-mvc-3 - 在 Span/Div/P 之外加载 MVC3 Razor Table

> ID：12340285
> 
> 赞同：0
> 
> 时间：2012-09-09T15:16:21.090
> 
> 标签：asp.net-mvc-3, razor

我在尝试渲染`<table>`父容器内部时遇到问题，但 MVC3 Razor 总是渲染容器标签的外部。这在尝试通过 Javascript 控制外部父容器时会导致问题。

剃刀示例：

```
<span id="mySpan">
 @Html.Action("Table1", "GetMyTable")
</span> 
```

输出的 HTML：

```
 <span id="mySpan"></span>  
 <table>
  <thead><tr><th>Header</th></tr></thead>
  <tbody>
   <tr><td>Foo</td></tr>
   <tr><td>Bar</td></tr>
  </tbody>
 </table> 
```

无论我尝试将表格粘贴到哪个父容器中，div、span、p，表格总是呈现在容器标签之外！谁能解释我做错了什么？我应该如何编码 Razor 语法以在这些标签内正确添加表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:56:03.547

当您在 Firebug 中查看输出时，正在发生的事情是在浏览器引擎解析它之后，您会看到 html 的“有效”视图。在 HTML5 中，许多标签不需要显式关闭。如果您在另一个无效的标签“内部”包含一个标签（例如跨度内的表格），浏览器会假定您正在使用未关闭的跨度标签，因此它会在启动表格标签之前自动为您关闭它。

这里最简单的解决方法是不“包装”表格，或者用 HTML5 认为有效的东西来包装它，例如节标记。

另一种选择是回到 XHTML1.1，其中表格在 div 内有效（但在跨度内无效）。此外，XHTML 需要明确的结束标记，因此这种行为不会出现在那里。（对于 XHTML5 也是一样，尽管在 XHTML5 中用 div 包装表格仍然无效）

查看原始源代码会发现 Razor 并没有真正改变这里的任何东西。它是浏览器。不过，很高兴看到这一点；所以你知道浏览器期待什么以及它如何处理你发送的内容。

# perl - 如何使用 WWW::Mechanize 从 TypeAhead 控件中选择与我的输入匹配的值？

> ID：12340287
> 
> 赞同：1
> 
> 时间：2012-09-09T15:16:30.247
> 
> 标签：perl, www-mechanize

所以通常我想从列表中选择的元素会填充在页面上，我只需找到它并选择它。但是我正在处理一个在某些输入被插入文本框之前不会填充列表元素的控件，之后它会给我一个建议列表。

举一个我所说的列表类型的例子，想想 Facebook 的“人物、地点和事物”搜索字段。

我想在这个文本框中插入一个字符串，从推荐列表中选择相同的字符串，然后提交表单。我现在遇到的问题是我似乎无法让 Mechanize 甚至认识到该领域的存在。我检查了一个转储，`$mech->find_all_inputs`但没有列出。这种领域只是机械化的管辖范围之外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:30:23.867

该控件的魔力来自 Javascript，并且（如您所知）**WWW::Mechanize 不适用于 Javascript**。

但是您可以找到（例如使用 Firefox 的 HTTPFox 扩展）您的浏览器向目标站点发送的请求，而不是*从您的 WWW::Mechanize 对象中获得“建议”并发出相同的请求（我确定这是 POST）*。

# android - MonoTouch 核心图形... vs Android 画布

> ID：12340288
> 
> 赞同：0
> 
> 时间：2012-09-09T15:16:42.887
> 
> 标签：android, ios, xamarin.ios, core-graphics

我正在尝试使用 MonoTouch 图形创建“实时”绘图，即应用程序调用 Web 服务来获取数据，然后根据时间和 y 值将其绘制在图表上。我可以让图表的框架和轴正常工作，但我不知道如何使用新数据点更新图表 - 无需从头开始重绘整个图表。数据只需要绘制在底层图表框架的顶部 - 就像在“画布”上绘制一样。

我已经使用画布在 Android 上创建了这种类型的图表，而且操作起来非常简单。但在 iOS 上似乎没有画布之类的东西。

关于我应该使用 MonoTouch 创建此类图表的方法有什么建议吗？

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:43:41.903

使用带有单点触控的核心图形。

[http://developer.apple.com/library/ios/#DOCUMENTATION/CoreGraphics/Reference/CoreGraphics_Framework/_index.html](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreGraphics/Reference/CoreGraphics_Framework/_index.html)

# android - startActivityForResult()，它是如何工作的？

> ID：12340290
> 
> 赞同：0
> 
> 时间：2012-09-09T15:16:52.783
> 
> 标签：android, view, android-activity, get, return-value

我现在正在处理我的关卡选择器活动，我想从我在 MainGameView 中选择的那个关卡中获得结果，该关卡由另一个活动运行。我该怎么做呢？

这就是我选择 1 级时的目的：

```
 Button test1 = (Button)findViewById(R.id.test1);
     test1.setOnClickListener(new OnClickListener() {

       public void onClick(View v) {
            setLevel(1);
            Intent start = new Intent("nielsen.happy.activities.HAPPYACTIVITY");
            startActivityForResult(start, getLevel());
            finish();
        }
    }); 
```

但我该去哪里？如何将此值添加到我的视图中，以便我可以根据他们选择的级别更改位图和其他值？我需要在`"HappyActivity"`(MainGameAcitvity) 中做些什么来获得结果吗？因为现在它回来了`0`

游戏设置的解释：菜单->关卡选择器->游戏。所以我需要从 levelselector 获取结果到游戏中，所以它知道从哪个级别开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:54:37.513

**（更新更正响应）** 不要使用 startActivityForResult()。

试试这个活动 A：
`Intent start = new Intent("nielsen.happy.activities.HAPPYACTIVITY"); start.putExtra("level", getLevel());
startActivity(start);
finish();`

然后在活动 B 中，执行以下操作：
`Extras mBundle = getIntent().getExtras();
int level = mBundle.getInt("level");`

（原始的，不正确的响应）让我们将活动 A 称为上面包含您的示例代码的活动。让我们将活动 B 称为您称为 HAPPACTIVITY 的活动。

活动 A 使用请求代码调用 startActivityForResult()。Activity B 启动并在退出之前调用 setResult(int code)。

当活动 B 结束时，A 通过 onActivityResult() 方法返回顶部。

实现一个 onActivityResult() 并查看您获得的属性。

仅供参考，有一种情况是 setResult(RESULT_OK) 或 setResult(RESULT_CANCELED) 不会在 A 中触发 onActivityResult() （我不记得是什么情况了）。

# php - 用新图像更新现有图像

> ID：12340292
> 
> 赞同：1
> 
> 时间：2012-09-09T15:17:15.407
> 
> 标签：php, mysql, css, html

我是 php 新手，我想更新一个标志，我的意思是我想上传一个图像文件，我想用 logo.png 替换它并在我的网页上显示为一个标志，到目前为止的代码正在上传一个图像和将图像保存在文件夹中但没有用新图像替换exixting图像，olease帮我解决这个问题，谢谢

这是 setup.php

```
<?php include("../includes/config.php"); ?>
<?php
 if ($_SESSION["isadmin"])
{

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);

 $result = mysql_query("SELECT * FROM setup WHERE (id=".$_SESSION["id"].")");
  while($row = mysql_fetch_array($result))
  {
   $title = $row['title'];
   $theme = $row['theme'];
 }
mysql_close($con);
?>
<!DOCTYPE HTML>
<html>
<head>
<title>Admdin Home</title>
<link rel="StyleSheet" href="css/style.css" type="text/css" media="screen">
</head>
<body>
<?php include("includes/header.php"); ?>
<?php include("includes/nav.php"); ?>
<?php include("includes/aside.php"); ?>
<div id="maincontent">

  <div id="breadcrumbs">
    <a href="">Home</a> >
    <a href="">Setup</a> >
    Customization
 </div>
 <h2>Customize</h2>
 <?php
if (isset($_GET["status"]))
{
 if($_GET["status"]==1)
{
echo("<strong>Customization Done!</strong>");
}
if($_GET["status"]==2)
{
 echo("<strong>Customization Error!!</strong>");
}
}

?>
<form method="post"  action="setup-action.php" enctype="multipart/form-data" >
<label>Title Of Your Organization:</label>  <input type="text" name="title" value="<?php    echo $title; ?>" /> <br /> <br />
<label>Select Theme</label>
<select name="theme" value="<?php echo $theme; ?>">
 <option value="Default">Default</option>
<option value="Dark">Dark</option>
<option value="White">White</option>
</select>
 <br /> <br />
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" name="Upload" value="Upload" />
</form>
</div>

</body>
 <?php include("includes/footer.php"); ?>
</html>
<?php
 }
 else
 {
    header("Location: ".$fullpath."login/unauthorized.php");

 }
?> 
```

这是 setup-action.php

```
 <?php include("../includes/config.php");?>
<?php
$target_path = "../graphics/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path))
{
   echo "The file ".  basename( $_FILES['uploadedfile']['name']).
 " has been uploaded";
}
else
{
echo "There was an error uploading the file, please try again!";
}
?>
<?php
$title=$_POST["title"];
$theme=$_POST["theme"];
$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$result=mysql_query("SELECT * FROM setup WHERE id=".$_SESSION['id']);
$num_rows = mysql_num_rows($result);
if ($num_rows > 0)
{
{
mysql_query("UPDATE setup  SET title='".$title."' , theme='".$theme."'WHERE    id=".$_SESSION['id']);
 header("Location:setup.php?status=1");
}
}
else {
 header("Location:setup.php?status=2");
}
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:23:34.817

看看**[PHP 文件上传教程](http://www.tizag.com/phpT/fileupload.php)**。您可以`logo.png`用作文件名。

# android - 在平板电脑 ICS 模拟器上测试我的应用程序？

> ID：12340293
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:17:15.987
> 
> 标签：android, android-emulator, emulation

我正在尝试在平板电脑 ICS 模拟器上测试我的应用程序，但我不知道具体该怎么做……操作系统必须是 ICS（或更高版本），这一点很重要。

预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:32:52.413

在 Eclipse 中：

窗口 -> AVD 管理器 -> 目标（>= API 级别 14）。

在分辨率上使用类似：1280x800（Galaxy Tab 10.1）。

然后使用那个模拟器。

# objective-c - 使用蒙版比较图像一个在另一个之上

> ID：12340296
> 
> 赞同：0
> 
> 时间：2012-09-09T15:17:53.717
> 
> 标签：objective-c, ios, xcode, ipad

我正在尝试以一种非常具体的方式进行图像比较。我把 2`UIImageView`个放在另一个上面，我有垂直线，你可以从左到右和向后拖动。当用户拖动这条线时，我需要顶视图将是“透明的”或裁剪到该线。我尝试使用裁剪，但它非常缓慢且不准确，向后拖动线时无法取消裁剪。有人可以指出如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:04:10.793

这不是太难，但绝对不是直截了当的。我想我可以为您指明正确的方向。

首先，您需要创建一个`CAShapeLayer`足够大的以覆盖顶部`UIImageView`。将此新蒙版图层设置为`mask`最顶层图像视图的图层。

```
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.path = [UIBezierPath bezierPathWithRect:topImageView.bounds].CGPath;
topImageView.layer.mask = maskLayer; 
```

现在您将需要更改`position`of`maskLayer`以达到预期的结果。我假设您正在使用 a`UIPanGestureRecognizer`来处理从左到右拖动垂直线，反之亦然。在手势识别器触发的方法中，您将检查`translationInView`属性并使用它的`x`值来更改`position`遮罩层。这将有效地让您用手指移动遮罩层，并开始隐藏顶部图像视图的部分，并让底部的图像从下方显示。

# ios - Cocos2d 在 [CCDirector setNextScene] 崩溃

> ID：12340297
> 
> 赞同：0
> 
> 时间：2012-09-09T15:18:11.200
> 
> 标签：ios, xcode, cocos2d-iphone

更改场景时，我很难解决崩溃问题。这是被替换场景的dealloc方法。它正在被调用，我知道没有内存泄漏或堆膨胀。谁能建议我可能会犯什么愚蠢/明显的错误。我为白痴道歉。

```
-(void) dealloc
{
NSLog(@"Dungeon.m dealloc called");

[self removeAllChildrenWithCleanup:true];
[self unscheduleAllSelectors];
[[CCScheduler sharedScheduler]unscheduleAllSelectors];

if (entityList) [entityList release];
if (lopsidedList) [lopsidedList release];
if (monsterNames) [monsterNames release];
if (menuSprites) [menuSprites release];
if (menuLabels) [menuLabels release];
if (monsterLevels) [monsterLevels release];
if (theMagicFactory) [theMagicFactory release];
if (theDM) [theDM release];
if (theDisplay) [theDisplay release];
if (aDungeonLevel) [aDungeonLevel release];
NSLog([NSString stringWithFormat:@"Player Retain Count: %i",[thePlayer retainCount]]);

[super dealloc]
} 
```

我已经确认重要列出的对象的 deallocs 被称为：

```
2012-09-09 10:51:31.840 Pocket Dungeons[947:707] Dungeon.m dealloc called
2012-09-09 10:51:31.878 Pocket Dungeons[947:707] DungeonMaster.m dealloc called.
2012-09-09 10:51:31.910 Pocket Dungeons[947:707] DungeonDisplay.m dealloc called
2012-09-09 10:51:31.915 Pocket Dungeons[947:707] dungeonlevel.m dealloccalled 
```

这是不断变化的场景代码：

```
 else if (whatIsHere==STAIRS_UP) {
                if (thePlayer.currentDungeonLevel==1) {
                    NSLog([NSString stringWithFormat:@"Self Retain Count: %i",[self retainCount]]);
                    thePlayer.theDungeon = nil;
                    theDM.theDungeon = nil;
                    theDisplay.theDungeon = nil;

                    for (int i=0; i<[aDungeonLevel.mArray count]; i++) {
                        Monster *aMonster = [aDungeonLevel.mArray objectAtIndex:i];
                        aMonster.theDungeon = nil;
                    }

                    NSLog([NSString stringWithFormat:@"Self Retain Count: %i",[self retainCount]]);
//                    CCScene *aScene = [Town nodeWithPlayer:thePlayer];
                    CCScene *aScene = [CharacterMaker2 nodeWithPlayer:thePlayer];
                    [[CCDirector sharedDirector] replaceScene:aScene]; 
```

这是发生崩溃的地方：

```
0   0x34311f78 in objc_msgSend ()

1   0x000fef28 in -[CCDirector setNextScene] at /Users/nehrujuman212/Documents/Pocket Dungeons/Pocket Dungeons/libs/cocos2d/CCDirector.m:429

2   0x0014ab44 in -[CCDirectorIOS drawScene] at /Users/nehrujuman212/Documents/Pocket Dungeons/Pocket Dungeons/libs/cocos2d/Platforms/iOS/CCDirectorIOS.m:160

3   0x0014c858 in -[CCDirectorDisplayLink mainLoop:] at /Users/nehrujuman212/Documents/Pocket Dungeons/Pocket Dungeons/libs/cocos2d/Platforms/iOS/CCDirectorIOS.m:721

4   0x33fd386e in CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) ()

5   0x33fd37c4 in CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) ()

6   0x37387000 in IOMobileFramebufferVsyncNotifyFunc ()

7   0x31bf060c in IODispatchCalloutFromCFMessage ()

8   0x3228af12 in __CFMachPortPerform ()

9   0x32295522 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()

10  0x322954c4 in __CFRunLoopDoSource1 ()

11  0x32294312 in __CFRunLoopRun ()

12  0x322174a4 in CFRunLoopRunSpecific ()

13  0x3221736c in CFRunLoopRunInMode ()

14  0x3136e438 in GSEventRunModal ()

15  0x31d16cd4 in UIApplicationMain ()

16  0x0016ea1e in main at /Users/nehrujuman212/Documents/Pocket Dungeons/Pocket Dungeons/main.m:14 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:03:56.573

希望我可以充分回答我自己的问题，尽管答案可能需要一些进一步的输入。

我认为问题在于 cocos2d 正在释放 CCDirector:setNextScene 的“运行场景”，在我允许它被释放之后。通过仔细检查我的发布和保留，我能够让它保留更长时间，以便让 cocos2d 有时间做它的内务。

我过于热心地试图不在任何地方保留我的对象，因此我使用了 CCScheduler UnscheduleAllSelectors，这对于像我这样的普通人来说是一个禁忌。对我来说，带回家的是：当你试图纠正它时，小心不要搞砸你的代码；并且要有耐心：逻辑是合乎逻辑的。此外，我学会了访问 cocos2d 源代码来帮助我，并且获得了更好的工具使用技能，尤其是堆检查。

# syntax - VHDL将十进制值分配给std_logic_vector

> ID：12340298
> 
> 赞同：3
> 
> 时间：2012-09-09T15:18:25.447
> 
> 标签：syntax, vhdl, unsigned

我正在尝试将十进制值添加到 10 位 std_logic_vector 而不必描述每一位。尽管在这种特定情况下可能不值得麻烦，但我相信将来知道它会非常好。到目前为止，我有：

```
 signal h_cnt : std_logic_vector(9 downto 0);
    ... --code
    h_cnt <= std_logic_vector(to_unsigned(9, 10)); 
```

我收到一条错误消息：

> *错误（10482）：vhdl_vga.vhd（70）处的VHDL错误：使用了对象“to_unsigned”但未声明*

有人可以帮我做这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:12:30.317

我不得不更换我正在使用的库。

```
 use ieee.numeric_std.all; 
```

是我需要的。

# android - 如何更改位图图像中像素的颜色值然后提取它？

> ID：12340308
> 
> 赞同：4
> 
> 时间：2012-09-09T15:19:14.950
> 
> 标签：android, steganography

如何更改和访问存储在图像特定位置的颜色值？

我试图用坐标 (10, 10) 处的像素更改保存图像。我将红色值更改为值 65 以表示 ASCII 字符`A`。但是当我尝试从位置 (10, 10) 中提取值时，像素的红色值不等于预期值。

这是我更改图像的代码：

```
int pixelColor = bitmapImage.getPixel(10, 10);

int pixelAlpha = Color.alpha(pixelColor);
int red = 65; // represents character A
int green = Color.green(pixelColor);
int blue = Color.blue(pixelColor);

int new_pixel = Color.argb(pixelAlpha, red, green, blue);

bitmapImage.setPixel(10, 10, new_pixel); 
```

这是我提取值的代码：

```
String data = "";
int pixelColor = bitmapImage.getPixel(10, 10);
int red = Color.red(pixelColor); 
data += (char)red;

Toast.makeText(this, "Data: " + data, 20).show(); 
```

那么如何提取指定值呢？我想用 ASCII 字符替换红色值。我是否正确实施（LSB）算法？

这是我的完整程序：

```
public void saveImage(Bitmap bitmapImage, String name) throws IOException
{
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    bitmapImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

    String fName = "/mnt/sdcard/pictures/" + name + ".jpg";
    File f = new File(fName);
    f.createNewFile();

    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
    fo.flush();
    fo.close();
}

private Bitmap HideMessage(Bitmap src)
{
    Bitmap dest = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());

    for(int x = 0; x < src.getWidth(); x++)
    {
        for(int y = 0; y < src.getHeight(); y++)
        {
            dest.setPixel(x, y, src.getPixel(x, y));
        }
    }

    int pixelColor = src.getPixel(10, 10);

    int pixelAlpha = Color.alpha(pixelColor);
    int red = 65; // represent character A
    int green = Color.green(pixelColor);
    int blue = Color.blue(pixelColor);

    int new_pixel = Color.argb(pixelAlpha, red, green, blue);

    dest.setPixel(10, 10, new_pixel);            

    return dest;
}

public void Hide()
{    
    Bitmap dest = HideMessage(image);

    try 
    {
        saveImage(dest, "hidden");
        Toast.makeText(this, "Message Hidden in Image and saved", Toast.LENGTH_LONG).show();
    } 
    catch (IOException e) 
    {
        Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    }
}

public void Show_character()
{
    Bitmap dest = BitmapFactory.decodeFile("/mnt/sdcard/pictures/hidden.jpg");

    String data = "";
    int pixelColor = dest.getPixel(10,10);
    int red = Color.red(pixelColor); 
    data += (char)red;

    Toast.makeText(this, "Data: " + data, 20).show();  
} 
```

# php - 如何将所有文件名放在php数组中

> ID：12340312
> 
> 赞同：2
> 
> 时间：2012-09-09T15:19:48.203
> 
> 标签：php

如何将根目录中的每个文件名以及每个子文件夹中的所有文件名放入php中的数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:29:38.873

Use [scandir()](http://php.net/manual/en/function.scandir.php) and you'll find a recursive function for sub-directories as well as tons of other examples to achieve what you want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T15:39:48.293

我一直偏爱`DirectoryIterator`和`RecursiveDirectoryIterator`。

这是一个例子：

```
function drawArray(DirectoryIterator $directory)
{
    $result=array();
    foreach($directory as $object)
    {
        if($object->isDir()&&!$object->isDot())
        {
            $result[$object->getFilename()]=drawArray(new DirectoryIterator($object->getPathname()));
        }
        else if($object->isFile())
        {
            $result[]=$object->getFilename();
        }
    }
    return $result;
}
$array=drawArray(new DirectoryIterator('/path'));
print_r($array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T15:23:42.957

看看[`glob()`](http://php.net/manual/en/function.glob.php)[如果您真的想浏览**所有**文件，请顺便向您的 RAM 表示哀悼]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T15:30:23.037

This is how I do it.

```
/**
    Recursively returns all the items in the given directory alphabetically as keys in an array, optionally in descending order.
    If a key has an array value it's a directory and its items are in the array in the same manner.
*/
function scandir_tree($directory_name, $sort_order = SCANDIR_SORT_ASCENDING, $_recursed = false)
    {
    if (!$_recursed || is_dir($directory_name))
        {
        $items = array_diff(scandir($directory_name, (int) $sort_order), ['.', '..']);
        $tree = [];
        foreach ($items as $item)
            {
            $tree[$item] = scandir_tree($directory_name . $item, $sort_order, true);
            }
        return $tree;
        }
    return $directory_name;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T15:35:05.530

尝试这个：

```
$ar=array();
$g=scandir('..');
foreach($g as $x)
{
    if(is_dir($x))$ar[$x]=scandir($x);
    else $ar[]=$x;
}
print_r($ar); 
```

# mysql - 无法使用此代码创建存储过程 - 为什么？

> ID：12340314
> 
> 赞同：-2
> 
> 时间：2012-09-09T15:19:49.893
> 
> 标签：mysql, sql, sql-server-2008

```
CREATE PROCEDURE NAMES  AS

NAME VARCHAR (20),
REGNO VARCHAR(100),

BEGIN
SELECT NAME=@NAME FROM  STUDENTDETAIL
SELECT REGNO=@REGNO FROM STUDENTDETAIL
END 
```

为什么不创建这个存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:21:45.583

你

1.  忘记正确命名变量
2.  使用了不正确的语法
3.  做了一些疯狂的选择......所以我从这里开始猜测：

在 SQL Server 2008 中

```
CREATE PROCEDURE NAMES
(
NAME VARCHAR (20),
REGNO VARCHAR(100)
)
AS
  SELECT * FROM STUDENTDETAIL WHERE NAME=@NAME AND REGN=@REGNO;
GO 
```

在 MySQL 中

```
mysql> delimiter //

mysql> CREATE PROCEDURE NAMES (NAME VARCHAR (20), REGNO VARCHAR(100))
    -> BEGIN
    ->   SELECT * FROM STUDENTDETAIL WHERE NAME=@NAME AND REGN=@REGNO;
    -> END// 
```

# networking - SR & GBN：窗外 ACK

> ID：12340315
> 
> 赞同：5
> 
> 时间：2012-09-09T15:19:55.027
> 
> 标签：networking, network-protocols

我目前正在研究相当基础的网络，我目前正在研究可靠传输的主题。我正在使用 Kurrose & Ross 的 Computer Networking 一书，其中两个复习问题如下：

> 使用selective-repeat/go-back-n 协议，发送方是否有可能收到超出其当前窗口的数据包的ACK？

对于 SR 版本，我对这个问题的回答如下：

> 是的，如果窗口大小对于序列号空间来说太大了。例如，接收方获得的数据包数量等于序列号的空间。因此，它的接收窗口已经移动，因此它期待一组新的数据包，其序列号与上一个数据包的序列号相同。接收器现在为每个数据包发送一个 ACK​​，但所有这些数据包都丢失了。这最终会导致发送方对前一组数据包中的每一个都超时，并重新传输每个数据包。接收方认为这组重复的数据包确实是它所期望的新数据包，并且它为每个成功到达发送方的数据包发送 ACK。发送者现在会遇到类似的困惑，它认为 ACK 是确认每个旧数据包都已收到，

我很确定这是正确的（否则，请告诉我！），因为这种情况似乎是为什么窗口大小应该小于或等于序列号空间大小的一半的经典理由。 SR协议，但是GBN呢？

是否会出现相同的环绕问题，使答案几乎相同？如果没有，是否还有其他情况会导致典型的 GBN 发送方在其窗口之外接收到 ACK？

关于后者，我能想到的唯一例子如下：

> GBN 发送方按顺序发送数据包 A 和 B。接收方按顺序接收两者，并发送一个累积 ACK，覆盖 A 之前和之前的每个数据包，然后发送另一个累积 ACK，覆盖之前和 B（包括 A）之前的每个数据包。第一个延迟非常大，以至于第二个首先到达发送者，导致其窗口滑过 A 和 B。当第一个最终到达时，它不必要地确认到 A 的所有内容都已正确接收，而 A 是已经在发件人的窗口之外。

与前一个示例相比，这个示例似乎相当无害且不太可能，所以我怀疑它是否正确（但如果我错了，请再次纠正我！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:31:44.513

在实际世界中，一个**重复**的ACK 延迟到足以掉出窗口又如何呢？

该协议位于发送方和接收方之间，但它无法控制媒体（网络路径）的行为方式。

根据设计，协议仍然是可靠的，但实现应该能够处理这种窗口外的重复 ACK。

# php - Expression Engine Freemember 忘记密码表格

> ID：12340316
> 
> 赞同：3
> 
> 时间：2012-09-09T15:20:05.287
> 
> 标签：php, javascript, expressionengine

我在一个使用 Expression Engine 的网站上做了一些工作。为了为用户生成登录信息，该站点使用 freemember 插件。

这会产生一个弹出登录表单，我坚持的是：

用户点击登录 表单弹出 p 用户点击忘记密码 用户输入他们的电子邮件地址并点击提交 弹出窗口消失，页面显示在后面。

这是我试图根据客户的意愿改变的最后一点：

他们希望我可以让弹出窗口： 1\. 留在屏幕上 2\. 在提交时显示“密码已发送到电子邮件地址”消息 3\. 等待 5 秒并刷新弹出窗口，以便显示登录页面

页面上使用的当前代码是

```
<div class="signuppopup popupsgroup" style="display:none">
<div class="signuppopup-close"><img onclick="$('.popupsgroup').hide();" src="{site_url}themes/site_themes/agile_records/images/close_button.png" alt="X" /></div>
<div id="signin_navigation">
<ul>
<li><a href="#" onclick="$('.signuppopup').hide(); $('.registerpopup').show(); return false;">Create Account</a></li>
<li style="margin-left:20px;"><a href="#" onclick="$('.registerpopup').hide(); $('.signuppopup').show(); return false;" class="active">Sign In</a></li>
</ul>
</div>

{exp:freemember:login return="{segment_1}/{segment_2}" error_handling="inline" error_delimiters='<span class="error">|</span>' form_id="sign_in_form" form_class="formholder"}
<div class="form-tab">
    <div class="tab">
        <label for="email">Email Address</label>{field:email}<br />
        {error:email}
    </div>
    <div class="tab">
        <label for="password">Password</label>{field:password}<br />
        {error:password}
    </div>
    <div class="tab">
        <input type="submit" class="sendbtn" value="Sign In" />
    </div>
    <div class="tab">
    <a class="orange" onclick="forgot_password();" href="#">Forgot your password?</a>
    </div>
</div>
{/exp:freemember:login}

{exp:freemember:forgot_password form_id="reset_password_form" form_class="formholder"}
<div class="form-tab">
<div class="tab">
        <label for="email">Email address</label>{field:email}<br />
        {error:email}
</div>
<p id="password_message">Please enter your email address and <input type="submit" value="click here" class="orange"> to receive an email with your new password.</p>
</div>
{/exp:freemember:forgot_password}

<div id="password_confirmation" style="display:none;">A new password has been sent to you</div>

</div> <!-- End signuppopup --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:51:39.033

您正在寻找一种让浏览器和服务器以异步方式相互通信的方法。由于我不记得 Freemember 支持 Ajax，你可以做两件事：

*   寻找替代[http://devot-ee.com/search/tags/tag/ajax-login](http://devot-ee.com/search/tags/tag/ajax-login)
*   自己编写javascript和php。

我会建议第一个，因为当有人输入无效的电子邮件地址时，您可能还会在弹出“留在屏幕上”的问题...

# emacs - 通常使用 magit 风格差异

> ID：12340319
> 
> 赞同：5
> 
> 时间：2012-09-09T15:20:28.403
> 
> 标签：emacs, magit

我喜欢使用 magit，每当我必须查看 magit 之外的差异时，我都会想到默认的差异体验是多么的差。

特别是两个方面：

1）当我进入新的帅哥时自动优化差异。-`diff-auto-refine-mode`不是替代品，因为我并不总是与 Mp 和 Mn 一起移动。

2）由于应用了人脸，因此空白空间差异非常明显 `magit-whitespace-warning-face`。

有没有办法让这两个功能`diff-mode`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:27:47.333

我认为向 Magit 维护人员发送消息，要求他们提交这些更改以包含在 diff-mode 中可能会做到这一点。

# twitter-bootstrap - 通过模态加载动态 URL

> ID：12340320
> 
> 赞同：5
> 
> 时间：2012-09-09T15:20:37.227
> 
> 标签：twitter-bootstrap

假设我有以下链接，该链接由循环生成 X 次。

```
<a class="btn" data-toggle="modal" data-target="#view_more" href="/item/view/<?php echo $item_id; ?>">Launch Modal</a> 
```

这是启动模式的 JS 脚本。

```
$(document).ready(function () {
    $('#view_more').modal({
        remote: '/item/view/1',
        show:false
}); // Start the modal 
```

它在`remote`url 被硬编码时工作，但我希望它是动态的，具体取决于传递给它的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T18:22:02.397

Modal 插件`load()`在其构造函数中执行该方法，因此真正更改 Modal 远程内容的唯一方法（除了自己手动执行 AJAX）是在进行另一个调用之前将其销毁：

```
$('#view_more')
  .removeData('modal')
  .modal({
    remote: someURL,
    show: false
  }); 
```

对类似帖子的回答有更多详细信息：[Twitter bootstrap remote modal shows same content everytime](https://stackoverflow.com/a/12287169/570918)

# javascript - Backbone.js render().el 用法

> ID：12340322
> 
> 赞同：10
> 
> 时间：2012-09-09T15:20:59.787
> 
> 标签：javascript, jquery, backbone.js

我从[此处](http://arturadib.com/hello-backbonejs/docs/4.html)的 Backbone.js 教程中获得了这段代码。代码如下：

```
(function($){

    var Item = Backbone.Model.extend({
        defaults: {
            part1: 'Hello',
            part2: 'World'
        }
    });

    var ItemList = Backbone.Collection.extend({
        model: Item
    });

    var ItemView = Backbone.View.extend({
        tagName: 'li',

        initialize: function(){
            _.bindAll(this, 'render');
        },

        render: function(){
            $(this.el).html("<span>" + this.model.get('part1') + " " + this.model.get('part2') + "</span>");
            return this;
        }

    });

    var AppView = Backbone.View.extend({
        el: $('body'),

        initialize: function(){
            _.bindAll(this, 'render', 'addItem', 'appendItem');

            this.collection = new ItemList();
            this.collection.bind('add', this.appendItem)
            this.counter = 0;
            this.render();
        },

        events: {
            'click button#add': 'addItem'
        },

        addItem: function(){
            var item = new Item();
            item.set({
                'part2': item.get('part2') + this.counter++
            });
            this.collection.add(item);
        },

        appendItem: function(item){
            var itemView = new ItemView({
                model: item
            });
            $('#list', this.el).append(itemView.render().el);
        },

        render: function(){
            $(this.el).append("<button id='add'>Add Item</button>");
            $(this.el).append("<ul id='list'></ul>")
        },
    });

    var Tasker = new AppView();

})(jQuery); 
```

从上面的代码中我无法理解一件事。在函数`appendItem`中有这段代码：

```
itemView.render().el 
```

任何人都可以解释我为什么`render()`使用该部分调用该函数`.el`，为什么不只是`itemView.render()`？

感谢您的时间和帮助:-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T15:27:51.510

该`render()`调用返回 itemView 本身。然后它请求`el`实例变量（元素本身），然后将其附加到列表视图中。实质上，列表视图包括单独呈现的项目的所有元素。

# c# - XNA 3.1 的慢线程

> ID：12340323
> 
> 赞同：0
> 
> 时间：2012-09-09T15:21:04.217
> 
> 标签：c#, multithreading, performance, xna

我在 XNA 中的线程有一个非常奇怪的问题。我正在使用 Q9400 使用 PC。

下面的代码是在`Update()`XNA 的函数中启动的。

```
 Stopwatch sw = new Stopwatch();

        Thread[] threads = new Thread[2];
        threads[0] = new Thread(() => Thread_UpdateDoodadsMovable(gameTime));
        threads[1] = new Thread(() => Thread_UpdateDoodadsRotated(gameTime));
        sw.Start();
        foreach (Thread t in threads)
        {
            t.Start();
        }
        foreach (Thread t in threads)
        {
            t.Join();
        }

        sw.Stop();
        Console.WriteLine("A " + sw.ElapsedTicks);
        sw.Reset(); 
```

由于注释了代码，两个线程现在都是“空的”：

```
 public void Thread_UpdateDoodadsRotated(GameTime gametime)
    {
        // level.UpdateDoodadsRotated(gameTime);
    }
    public void Thread_UpdateDoodadsMovable(GameTime gametime)
    {
       // level.UpdateDoodadsMovable(gametime);
    } 
```

回报在 7000 到 10000 之间。`sw.ElapsedTicks`有人可以向我解释为什么会这样吗？

我知道创建线程而不是从中获取线程并不是`ThreadPool`性能方面的最佳方式，但线程创建所需的时间比`ElapsedTicks`返回要少得多。

# ios - 在 iOS 应用中为形状着色

> ID：12340326
> 
> 赞同：2
> 
> 时间：2012-09-09T15:21:20.243
> 
> 标签：ios, image, ipad, background-color, layer

我们正在构建一个 iPad 儿童应用程序，其中要求孩子用特定颜色为不同的形状着色。例如，考虑一张天空和树木等全部重叠的图像，一个孩子选择了一种颜色，例如“蓝色”，然后他点击天空，天空应该变成蓝色，否则应该说“颜色错误”

我的问题是：

1- 如何仅使用所选颜色实现天空着色。我们已经实现了 Coco2d Floodfilling，但它太慢了。

2-如何将图像的每个部分与特定的正确颜色联系起来。我们建议在背景层中加载全彩色图像并在点击时对其进行测试....但是如何实现它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:23:45.280

形状最初是矢量的吗？如果是这样，一个解决方案是直接将它们作为向量使用，将它们解析为 CoreAnimation 形状。

您可以尝试[SVGKit](https://github.com/SVGKit/SVGKit)或从中获得一些灵感。您将获得[CAShapeLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)，您可以在其中更改 fillColor 属性。

我相信这种方式会比使用图像进行技巧更具响应性（并且应用程序大小更轻）;-)

# iphone - 检查相交以获取以编程方式生成的图像视图

> ID：12340327
> 
> 赞同：0
> 
> 时间：2012-09-09T15:21:24.590
> 
> 标签：iphone, ios, xcode, ios5.1

我有两个像这样生成的图像

```
- (void)moveImage:(UIImageView *)image duration:(NSTimeInterval)duration
            curve:(int)curve x:(CGFloat)x y:(CGFloat)y
{
    // Setup the animation
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];

}
    - (void)alien {
    enemy =
    [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"alien.png"]];
    enemy.frame = CGRectMake(-100, 20, 50, 50);
    [self.view addSubview:enemy];

    // Move the image
    [self moveImage:enemy duration:5
              curve:UIViewAnimationCurveLinear x:460 y:0.0];  }
- (void)bullet4 {
    bullet =
    [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Bullet.png"]];
    bullet.frame = CGRectMake(carDude.center.x, 380, 5, 10);
    [self.view addSubview:bullet];

    // Move the image
    [self moveImage:bullet duration:3
              curve:UIViewAnimationCurveLinear x:0 y:-500.0];   } 
```

我试图在它们相交时隐藏它们。屏幕上可以同时有很多，但我试过了，

```
-(void)checkCollision {
    if(CGRectIntersectsRect(bullet.frame, enemy.frame)) {

    }
} 
```

并且没有运气让图像在碰撞时做任何事情。

如何让图像隐藏并检查碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:46:30.383

如果你改变一个视图的变换，它的框架不会改变（它甚至会变得无效）并且应该被忽略。

从[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/transform)中：

> 警告 如果此属性不是恒等变换，则 frame 属性的值未定义，因此应被忽略。

既然你所做的只是应用一个平移变换，那你为什么不对框架设置动画呢？

# c# - 如何在 Winforms 应用程序中嵌入控制台应用程序

> ID：12340329
> 
> 赞同：10
> 
> 时间：2012-09-09T15:21:26.030
> 
> 标签：c#

我正在开发一个充当 Minecraft Server 的 GUI 的应用程序（作为控制台 Java 应用程序运行）。

我已经完成了，我还想在 Winforms 应用程序中添加一个控制台，因为我想让用户对程序有更多的控制权。但是使用流（Process.StandardOutput）我无法模拟控制台，因为它有时会改变光标位置，清除控制台等......

所以，我想以某种方式将该过程嵌入到应用程序中。我尝试的第一个解决方案是删除边框并将其定位到表单的位置，但不幸的是我做不到。

任何工作代码片段将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-29T13:03:38.650

您不能同时针对子系统`gui`和`console`同一模块 ( [msdn](https://blogs.msdn.microsoft.com/junfeng/2004/02/06/how-to-make-an-application-as-both-gui-and-console-application/) )。

相反，您可以添加一个单独的控制台应用程序，该应用程序使用 SOAP 与您的应用程序进行通信。看看[WCF](https://docs.microsoft.com/en-us/dotnet/framework/wcf/getting-started-tutorial)来完成这个任务。

# javascript - 使用零剪贴板复制文本区域

> ID：12340331
> 
> 赞同：2
> 
> 时间：2012-09-09T15:21:47.970
> 
> 标签：javascript, flash, zeroclipboard

有没有办法在没有按钮的情况下将 textarea 复制到剪贴板？

我想要做的是在我的网站上显示一个短 URL，因此当您单击链接（或文本）时，它会复制到剪贴板并淡出，新文本淡入淡出，显示“已复制！”。链接/文本将使用我的自定义域使用 bit.ly 自动生成。

**例子：**

短网址：shrt.lnk/abc123（常规） 短网址：已复制！（点击时）

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-09T14:00:30.397

你可以试试 clip-j 。[在这里](https://github.com/Triforcey/clip-j)。这是一个纯 JavaScript 解决方案，它利用`document.execCommand('copy');`了所有主要浏览器都支持的 witch，以及其他命令来解决必须能够看到文本输入的限制，你看到什么了吗！另外，这不必通过按钮来工作，单击链接就可以了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:11:59.913

没有按钮就不可能做到这一点，因为 Flash 10+ 需要点击实际按钮。但是，如果您使用带有文本的实际按钮，或者将按钮叠加在文本上，如下所示：http: [//jsfiddle.net/C9KjH](http://jsfiddle.net/C9KjH)那么在您的情况下这是一种可能的解决方法。

# c# - C#、BindingSource 和 DataSource

> ID：12340332
> 
> 赞同：0
> 
> 时间：2012-09-09T15:21:48.123
> 
> 标签：c#, reflection, bindingsource

例子：

```
public class MyProperty
{
     //something..
}

public class MyClass
{
    private MyProperty[] myProperty = null; 
    public MyProperty[] myProperty
      {
        get
            { 
             //execute some code
             return myProperty;
            }
        set
            { 
             myProperty = value;
            }
      }
}

MyClass testMyClass = new MyClass();
myBindingSource.DataSource = testMyClass.MyProperty; 
```

有没有办法，可能使用反射（或从 BindingSource 继承）来获取对 MyClass.MyProperty 实例的引用，而不是只包含 MyProperty [] 的对象。

BindingSource.DataSource 仅返回*某个*对象，该对象可以转换为*某个*MyProperty 数组。

生成的结果应该实现这个场景：

```
BindingSource.DataSource = GeneratedResult;  //execute some code (from the get). 
```

# jquery - jQuery加载到多个div

> ID：12340334
> 
> 赞同：1
> 
> 时间：2012-09-09T15:22:13.237
> 
> 标签：jquery, load

我有这个代码

```
$("body").on({
    click: function(event){
        event.preventDefault();
        var aLink = $(this).attr("href");
        $("#content").load(aLink+" #loader", function(){
          //Callback here
        });
        $("#crumbbar").load(aLink+' .breadcrumbs', function(){
          //Callback here
        });
    }
}, "a"); 
```

可以以我只有 1 个加载命令的方式进行优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:28:04.360

To only do the ajax call once, you would have to use another of jQuery's ajax functions, like `$.get`, which `load()` is a shortcut for:

```
$(document).on('click', 'a', function(e) {
    e.preventDefault();
    var aLink = $(this).attr("href");
    $.get(aLink, function(data) {
        $("#content").html($(data).find('#loader'));
        $("#crumbbar").html($(data).find('.breadcrumbs').first())
    });
}); 
```

# sinatra - 在 Sinatra 中加载样式表

> ID：12340335
> 
> 赞同：10
> 
> 时间：2012-09-09T15:22:33.237
> 
> 标签：sinatra

我正在使用 Sinatra，并且一直在尝试加载一些样式表。我已经`link`在我的 erb 中尝试了普通的 html 标记，但这并没有奏效。

我试过了

```
<head>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head> 
```

这不是我使用的网址的问题，是否有一些特殊的方法可以实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T17:33:56.160

当您使用 时`href="style.css"`，您指定的是样式表的相对链接。您的浏览器将请求的实际路径将取决于当前页面的 url，例如，如果您有如下路由：

```
get '/things/:id' do
  #look up thing with id = :id
  erb :my_view
end 
```

然后浏览器将在`/things/style.css`. 如果您的样式表位于目录的顶层，这显然不起作用`public`。

快速修复是使用样式表的绝对路径：（`href="/style.css"`注意`/`字符）。这将使浏览器始终在服务器的根目录中查找样式表。

这假定您的应用程序始终安装在服务器的根目录下，如果您在子目录中运行它会失败。您希望能够说“在此应用程序的根目录中查找样式表，无论它碰巧在哪里”。在 Sinatra 中，您可以使用[`url`helper 方法](http://www.sinatrarb.com/intro.html#Generating%20URLs)来做到这一点。使用 ERB 作为模板语言，如下所示：

```
<link href="<%= url('/style.css') %>" rel="stylesheet" type="text/css" /> 
```

这将确保`style.css`无论您的应用位于何处，指向的链接都是正确的。

# sql - 如何确保更新后只使用新值

> ID：12340340
> 
> 赞同：0
> 
> 时间：2012-09-09T15:23:10.460
> 
> 标签：sql, sql-server

考虑这些表：

```
CREATE TABLE Status (current_partition INT) -- has a single row
CREATE TABLE RecordedValues (partition INT, value INT) 
```

假设有多个客户端经常使用 插入到`RecordedValues`表中`current_partition`，例如：

```
DECLARE @current_partition INT
SET @current_partition = (SELECT TOP 1 current_partition FROM Status)
INSERT RecordedValues VALUES (@current_partition, 132) 
```

同时，有一个客户端（定期）修改`current_partition`，然后使用旧分区值读取所有值，例如：

```
DECLARE @old_partition INT
SET @old_partition = (UPDATE Status 
    SET current_partition += 1 
    OUTPUT deleted.*)
--
SELECT * FROM RecordedValues WHERE partition = @old_partition 
```

如何确保后一个客户端真正选择具有旧分区值的所有行？换句话说，我需要确保在 SELECT 返回*后不会提交任何 INSERT。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:28:34.857

在事务中运行您的命令，并将隔离级别设置为 REPEATABLE READ：

```
BEGIN TRANSACTION

SET TRANSACTION ISOLATION LEVEL REPEATABLE READ

DECLARE @old_partition INT
SET @old_partition = (UPDATE Status 
    SET current_partition += 1 
    OUTPUT deleted.*)
--
SELECT * FROM RecordedValues WHERE partition = @old_partition

COMMIT TRANSACTION 
```

这将确保事务中语句之间的一致性。

引用文档：

“指定语句不能读取已被其他事务修改但尚未提交的数据，并且在当前事务完成之前没有其他事务可以修改当前事务已读取的数据。”

# asp.net - 从更新面板重定向时的两种不同行为

> ID：12340341
> 
> 赞同：0
> 
> 时间：2012-09-09T15:23:19.977
> 
> 标签：asp.net, .net, ajax

我在 ASP.NET 页面的 UpdatePanel 中有一个简单的中继器。此转发器在每个RepeaterItem 中都有一个按钮，当单击该按钮时，将根据该特定RepeaterItem 中包含的信息将您重定向到另一个页面。在那之前没有任何异常。

在我的开发计算机中，当我单击其中一个按钮时，我从 ajax 调用中得到响应，看起来像

```
"1|#||N|M|pageRedirect||/somepage.aspx?q=bla|" 
```

一切正常。我猜脚本管理器会处理该指令并通过 JS 将浏览器发送到 somepage.aspx?q=bla。

当我将它部署到我的实际网站（专用服务器，我真的尝试在两个环境中保持相同的配置，包括在我的开发计算机中使用 IIS）时，这种行为会发生变化。当我单击这些按钮中的一个时，我从服务器收到 302 Found 响应，并且 HTTP 标头包括

```
Location: /somepage.aspx?q=bla 
```

指示。最终发生的是浏览器（FF，chome，IE）处理两个页面（意味着ajax调用，他们从我试图重定向到的页面执行GET）但只呈现原始页面，因此不需要重定向地方。第二页已加载但在“背景”中并且从未显示。

我试图找出这两种不同行为背后的原因。通过谷歌搜索我可以发现这可能是一个配置错误（例如，请参阅[这个问题](https://stackoverflow.com/questions/8078641/response-redirect-in-asp-net-ajax-calls)），但我的配置在两台服务器中都是相同的。请记住，我不能过多地使用实际的网站，所以现在我正试图让我的开发服务器像生产服务器一样运行，这样我就知道这种差异来自哪里，然后采取适当的措施。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:02:06.073

从 ajax 请求返回 302 重定向响应不起作用，因为重定向不会发生。因此，ASP.NET Ajax 拦截服务器端的任何重定向，将其转换为状态代码 200，然后在客户端手动执行“重定向”（使用 window.location）。

For some reason the ASP.NET Ajax (ScriptModule) isn't converting your 302 response correctly when it's deployed. My best guess is that it doesn't think it's an ajax request - to decide whether it's an ajax request it looks to see if it contains a "X-MicrosoftAjax: Delta=true" header. Check to see if this header is being received on the server side of your deployed site.

# entity-framework - 在实体框架中按顺序和不同

> ID：12340342
> 
> 赞同：0
> 
> 时间：2012-09-09T15:23:21.963
> 
> 标签：entity-framework

以下事件处理程序正在返回它的列表，但它并不明显。列表中仍有许多重复项。有什么想法吗？

```
Protected Sub ddlState_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlState.SelectedIndexChanged
    If IsPostBack Then
        ddlCity.Items.Clear()
        Dim context As New teckEntities()
        Using context
            'Dim query = From c In context.counties Where c.stateid = ddlState.SelectedValue Select c.countyname, c.id
            Dim query = From c In context.ziptaxes Where c.StateID = ddlState.SelectedValue Order By c.City Select c.City, c.ZipTaxId
            query.Distinct()
            ddlCity.DataSource = query.ToList()
            ddlCity.DataValueField = "ziptaxid"
            ddlCity.DataTextField = "City"
            ddlCity.DataBind()
        End Using
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:42:11.217

您应该在应用`distinct`过滤器后分配查询的返回值。

```
 ddlCity.DataSource = query.Distinct().ToList()
 ddlCity.DataValueField = "ziptaxid"
 ddlCity.DataTextField = "City"
 ddlCity.DataBind() 
```

# php - Facebook Graph API：渲染 Facebook 等帖子

> ID：12340344
> 
> 赞同：1
> 
> 时间：2012-09-09T15:23:39.803
> 
> 标签：php, css, facebook, facebook-graph-api

是否有任何 PHP/CSS 的公共代码可以以 Facebook 的风格将我的 Facebook-Posts 集成到我自己的网页上？

我的意思是从 Facebook Graph API ( [fetch-facebook-posts-using-graph-api](https://stackoverflow.com/questions/4582535/fetch-facebook-posts-using-graph-api) )获取数据后的步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:36:27.670

重现相同的外观应该非常简单。您可能会发现像[FireBug](https://getfirebug.com/)这样的检查/调试工具非常有用。

基本上，打开一个 Facebook 页面，检查一个邮箱，试验（通过选中/取消选中样式）以查看每个样式规则的作用，丢弃不必要的规则并获取您需要的规则。

# c++ - 在磁盘上创建/打开文件返回 EAGAIN

> ID：12340351
> 
> 赞同：0
> 
> 时间：2012-09-09T15:24:39.747
> 
> 标签：c++, file-io

正如标题所说，我在尝试打开文件进行二进制写入时遇到此错误（模式似乎无关紧要）。

我的应用程序使用 libev 来处理套接字（非阻塞/epoll 后端），并且在解析客户端数据包时，我希望在某个点接收文件上传消息以开始将我从服务器获取的磁盘数据写入磁盘。

我无法在谷歌上搜索有关`EAGAIN(Resource temporarily unavailable)`消息和文件打开的任何内容..

这些是我尝试过的方法：

1.  *fopen( ... )*返回`EAGAIN`
2.  通过在堆（新）返回上创建它们来使用 ofstream/fstream 的*open(...)*`EAGAIN`
3.  静态使用 ofstream/fstream 的*open(...)*作为类成员 ( `ofstream m_ofFile;`) 可以工作，但是编译器会生成调用 ofstream 析构函数并在退出类方法之前关闭文件的代码 im 调用*.open*。现在这与我的 C++ 知识相矛盾，对于作为类类型的类成员，析构函数在类所有者之前被调用。

编辑：

@约阿希姆

你是对的，我并没有真正得到这个错误..（方法#1。很快就会再次测试方法#2）。文件定期打开，我得到常规文件*。这发生在我班级的 Init(...) 函数中，但是当我稍后在 m_hFile 为 0 时调用 OnFileChunk 时，因此我无法写入它。这是完整的类代码：

```
 class CFileTransferCS
                {
                    wstring m_wszfile;
                    wstring m_wszLocalUserFolderPath;
                    int     m_nChunkIndex;
                    int     m_nWrittenBytes;
                    int     m_nFileSize;
                    FILE*   m_hFile;

                    CFileTransferCS( const CFileTransferCS& c ){}
                    CFileTransferCS& operator=( const CFileTransferCS& c ){}

                public:

                    CFileTransferCS( );
                    CFileTransferCS( wstring file, uint32_t size );

                    void OnFileChunk( char* FileChunk, int size );
                    void Init( wstring file, uint32_t size );
                    void SetLocalUserLocalPath( wstring path );

                };

                CFileTransferCS::CFileTransferCS( )
                {
                    m_hFile = NULL;
                    m_wszLocalUserFolderPath = L"";
                    m_nChunkIndex = 0;
                    m_nWrittenBytes = 0;
                }

                CFileTransferCS::CFileTransferCS( wstring file, uint32_t size )
                {
                    m_nChunkIndex = 0;
                    m_nWrittenBytes = 0;

                    m_wszfile = file;
                    m_nFileSize = size;

                    wstring wszFullFilePath = m_wszLocalUserFolderPath + m_wszfile.substr( m_wszfile.find_last_of(L"\\") + 1 );

                    //  string fp = string( file.begin(),file.end() );
                    string fp ="test.bin";  //for testing purposes

                    this->m_hFile = fopen(fp.c_str(),"wb");

                    printf("fp: %s hFile %d\n",fp.c_str(),this->m_hFile); //everything's fine here...

                    if(!this->m_hFile)
                    {
                        perror ("cant open file ");
                    }

                }

                void CFileTransferCS::SetLocalUserLocalPath( wstring path )
                {
                    m_wszLocalUserFolderPath = path;

                }

                void CFileTransferCS::Init( wstring file, uint32_t size )
                {

                    // If previous transfer session got interrupted for whatever reason
                    // close and delete old file and open new one

                    if( this->m_hFile )
                    {
                        printf("init CS transfer: deleting old file///\n");
                        fclose( this->m_hFile );

                        string fp = string( file.begin(),file.end() );

                        if( remove( fp.c_str() ))
                        {
                            //cant delete file...
                        }

                    }

                    CFileTransferCS( file, size );

                }

                void CFileTransferCS::OnFileChunk( char* FileChunk, int size )
                {

                    for (;;)
                    {

                        printf("ofc: hFile %d\n",this->m_hFile); //m_hFile is 0 here...
                        if( !this->m_hFile )
                        {
                            //          m_pofFile->open("kurac.txt",fstream::out);
                            printf("file not opened!\n");
                            break;  
                        }

                        int nBytesWritten = fwrite( FileChunk, 1, size, this->m_hFile );

                        if( !nBytesWritten )
                        {
                            perror("file write!!\n");
                            break;  
                        }

                        m_nWrittenBytes+=size;

                        if( m_nWrittenBytes == m_nFileSize )
                        {
                            fclose( m_hFile );
                            printf("file uplaod transfer finished!!!\n");
                        }

                        break;
                    }

                    printf("CFileTransferCS::OnFileChunk size: %d m_nWrittenBytes: %d m_nFileSize: %d\n",size,m_nWrittenBytes,m_nFileSize);
                } 
```

最后编辑：

我明白了.. 显式调用 CFileTransferCS( wstring file, uint32_t size ) 构造函数出现问题.. 像这样显式调用构造函数导致其中的这个指针不是原始指针（那个 Init 函数正在使用）所以当我从它打开文件时将句柄保存到 m_hFile，我在其他对象中执行此操作（现在我不确定 CFileTransferCS(..) 是否为 CFileTransferCS 对象调用分配的内存，或者它随机损坏了内存的其他部分。稍后将使用 IDA 进行检查）

谢谢大家和我的歉意。

问候，迈克——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T10:26:27.833

@MikeJacksons 回答：

显式调用 CFileTransferCS(wstring file, uint32_t size) 构造函数会产生问题。像这样显式调用构造函数会导致其中的这个指针不是原始指针（Init 函数正在使用）所以当我从它打开文件并将句柄保存到 m_hFile 时，我在其他一些对象中执行它（现在我不确定是否 CFileTransferCS (..) 为 CFileTransferCS 对象调用分配的内存，或者它随机损坏了内存的其他部分.. 稍后将使用 IDA 检查它）谢谢大家和我的歉意。

删除：`CFileTransferCS( file, size );`

（无需向 Mike 道歉，看起来你在寻找错误方面做得很好）。

# macos - 在 Mac 的终端中，我们可以在命令末尾添加作为“选项”的命令行参数吗？

> ID：12340353
> 
> 赞同：0
> 
> 时间：2012-09-09T15:24:57.880
> 
> 标签：macos, bash, command-line, command-line-arguments

对不起，如果标题令人困惑。让我通过一个例子来说明。

在 Linux 中，以下两个命令同样有效：

```
ls -lh /tmp

ls /tmp -lh 
```

但在我的 Mac 中，第二个不起作用。

我想知道是因为他们使用不同的 ls（GNU VS BSD），还是外壳有一些不同。

更重要的是，我如何调整 Mac 的终端，以便第二个可以工作，不仅适用于 ls，还适用于其他命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:27:07.423

您无法调整外壳，正如您所怀疑的那样，区别在于 GNU 与 BSD 工具。您可能会尝试在 Mac 上编译 GNU 工具链，但我不确定这是否是一个好主意，因为操作系统可能依赖这些工具，不兼容的更改可能会产生不可预知的后果。您可以尝试将它们编译为`/usr/local/`前缀并仅在您自己的 shell 中使用它们，但仍然要格外小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:26:59.140

这是版本的差异`ls`。shell 不知道破折号选项和其他参数之间的区别；所有都传递给命令，该命令决定了它们的含义。

# actionscript-3 - 将具有多个纹理的 *.dae 文件导入到 papervision 3D

> ID：12340356
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:25:18.410
> 
> 标签：actionscript-3, flash, augmented-reality

通常当您以 *.dae 格式导出 3D 对象时，文件附带一个文件夹，该文件夹包含对象的纹理，有人知道如何将 *.dae 文件及其纹理添加到我们的项目中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:47:01.237

您应该将纹理放入带有 *.dae 的文件夹中，并像这样加载您的对象和纹理：

```
 var bm:BitmapFileMaterial = new BitmapFileMaterial('PATH_TO_TEXTURE', true);
    var mat:MaterialsList = new MaterialsList();
    mat.addMaterial(bm2, 'MATERIAL_NAME');
    mat.addMaterial(bm3, 'ANOTHER_MATERIAL_NAME');

    var obj:DAE = new DAE();
    obj.useOwnContainer = true;
    obj.load('PATH_TO_DAE', mat); 
```

此外，材料应在 *.dae 中正确链接。像这样的东西：

```
 ...
      <library_images>
        <image id="TEXTURE_NAME-image" name="TEXTURE_NAME">
          <init_from>2/TEXTURE_NAME.png</init_from>
        </image>
      </library_images>
      <library_materials>
        <material id="TEXTURE_NAME" name="TEXTURE_NAME">
          <instance_effect url="#TEXTURE_NAME-fx"/>
        </material>
      </library_materials>
    ...
      <library_visual_scenes>
        <visual_scene id="RootNode" name="RootNode">
          <node id="TEXTURE_NAME_tp3_Mesh01" name="TEXTURE_NAME_tp3_Mesh01">
            <matrix sid="matrix">1.000000 0.000000 0.000000 0.000000 0.000000 0.000000 1.000000 0.000000 0.000000 -1.000000 0.000000 0.000000 0.000000 0.000000 0.000000 1.000000</matrix>
            <instance_geometry url="#TEXTURE_NAME_tp3_Mesh01-lib">
              <bind_material>
                <technique_common>
                  <instance_material symbol="MATERIAL_NAME" target="#MATERIAL_NAME"/>
                </technique_common>
              </bind_material>
            </instance_geometry>
          </node>
        </visual_scene>
     </library_visual_scenes> 
```

...

# jquery - JQuery 幻灯片脚本 - 单击并拖动

> ID：12340359
> 
> 赞同：0
> 
> 时间：2012-09-09T15:26:19.123
> 
> 标签：jquery, html, jquery-plugins

我正在寻找一个幻灯片脚本，它允许用户通过单击当前幻灯片并将其拖动到左侧来转到下一张幻灯片 - 就像在书中翻页一样。

我想知道一个插件是否已经存在，是否有人可以向我推荐一个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:04:40.917

你可以试试**[Flexslider](http://www.woothemes.com/flexslider/)**。它具有硬件加速触摸滑动支持，或者您可以尝试**[PhotoSwipe](http://www.photoswipe.com/)**

除此之外，看看**[5 Awesome Responsive jQuery Sliders and Image Gallery](http://webexpedition18.com/articles/responsive-jquery-sliders-image-galleries/)**

# iis - Microsoft Web Platform Installer 4.0 fail

> ID：12340372
> 
> 赞同：3
> 
> 时间：2012-09-09T15:28:11.697
> 
> 标签：iis, download, installation, webmatrix

Because my hard drive is nearly full, I find I don't use the (full)IIS7 and uninstall it to release hard drive space in my vista computer.

However, after that, I can't do many download installations through 'Microsoft Web Platform Installer 4.0", for example, download and install webMatrix 2.

I install the IIS8 express, I still can't do many download installation through MWPI 4.0, even I can't uninstall the MWPI from my computer. thanks advanced

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:01:12.090

我与 WebPI 团队的人交谈，他们确认存在错误。WebPI 在inetmgr 中安装了一个插件，在卸载IIS 后偶尔无法清理该插件。这给 WebPI 带来了很多麻烦。试试这个：

*   安装完整的 IIS
*   卸载现有的 WebPI
*   卸载完整的 IIS
*   重新安装 WebPI

完成这些步骤后，一切都应该工作。对困惑感到抱歉。

# c# - 特定窗口的 SetWindowPos

> ID：12340373
> 
> 赞同：0
> 
> 时间：2012-09-09T15:28:15.457
> 
> 标签：c#, windows, move

我有

```
 [DllImport("user32.dll", EntryPoint = "SetWindowPos")]
    public static extern IntPtr SetWindowPos(string hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, int wFlags); 
```

我的问题是我希望能够根据标签内的文本移动特定窗口。

```
 private void button1_Click(object sender, EventArgs e)
    {
        const short SWP_NOSIZE = 1;
        const short SWP_NOZORDER = 0X4;
        const int SWP_SHOWWINDOW = 0x0040;

        Process[] processes = Process.GetProcesses();

        foreach (var process in processes)
        {
            IntPtr handle = process.MainWindowHandle;
            string Text = handle.ToString();

            if (handle.ToString() == WindowTextBox.Text)
            {
                SetWindowPos(Text, 0, 0, 0, 0, 0, SWP_NOZORDER | SWP_NOSIZE | SWP_SHOWWINDOW);
            }
        }
    } 
```

我知道这行不通，但还是想尝试一下，我还能如何根据 WindowTextBox 中的内容移动窗口？（在 SetWindowPos(IntPtr hWnd, [...]) 中有 IntPtr 句柄并且只是改变

```
SetWindowPos(Text, 0, 0, 0, 0, 0, SWP_NOZORDER | SWP_NOSIZE | SWP_SHOWWINDOW); 
```

到

```
SetWindowPos(handle, 0, 0, 0, 0, 0, SWP_NOZORDER | SWP_NOSIZE | SWP_SHOWWINDOW); 
```

也不起作用。）有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:51:40.683

弄清楚了。我用了

```
[DllImport("user32.dll")]
        static extern IntPtr FindWindow(string lpClassName, string lpWindowName); 
```

将行更改为

```
IntPtr handle = FindWindow(null, WindowTextBox.Text); 
```

和如果

```
if (handle != IntPtr.Zero) 
```

它就像我想要的那样工作，谢谢！

# ruby-on-rails - 从另一个页面获取存档并将其解压缩到 rails

> ID：12340374
> 
> 赞同：1
> 
> 时间：2012-09-09T15:28:24.343
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，我需要从另一项服务更新我的价目表，但麻烦在于：我怎样才能从另一个站点获取存档到我的存储，解压缩它，然后执行我需要的操作（从解压缩的 rar 存档 csv 文件导入）。有人能给出主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:14:15.227

这是一个非常广泛的问题，但只是为了指出您正确的方向：

*   使用[`Net::HTTP`库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)将文件检索到您的系统。

*   使用能够处理 RAR 文件的 Ruby 库（我不知道它们是什么），或者像`unrar`（使用`system`）这样的命令行工具来提取存档。

*   使用内置[`CSV`库](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)处理 CSV。

有了这样一个过程附带的所有错误处理、调度和其他任务，这实际上并不是一个可以在一个答案中完全解释的事情。

# iphone - setValue 指向对象而不是复制 NSString

> ID：12340378
> 
> 赞同：0
> 
> 时间：2012-09-09T15:28:44.647
> 
> 标签：iphone, xcode, nsstring, nsmutablestring, setvalue

我正在解析一个 XML 文档。我有一个`NSMutableString`保存我通过的每个节点和特定节点的值 - 我想更新`NewsElement`类。

这是我的代码：

```
[newsElement setValue:currentElementValue forKey:elementName]; 
```

currentElementValue 是`NSMutableString`elementName 是我要更新的关键。每个字段都是`NSString`. 问题是，现在我没有复制字符串，而是`NSString`指向 currentElementValue 地址，所以所有字段总是相同的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:40:20.387

大概复制`currentElementValue`会解决您的问题。你有没有尝试过：

```
[newsElement setValue:[currentElementValue copy] forKey:elementName]; 
```

这将制作一个不可变的副本（即一个`NSString`），`currentElementValue`它是一个`NSMutableString`。如果您需要副本是可变的，您可以使用该`mutableCopy`方法，例如：

```
[newsElement setValue:[currentElementValue mutableCopy] forKey:elementName]; 
```

# google-apps-script - Google apps script : drop a document in My drive from a form in google site

> ID：12340380
> 
> 赞同：1
> 
> 时间：2012-09-09T15:28:51.057
> 
> 标签：google-apps-script

I use the following code to create a kind of dropbox for my students. The form is embedded on a google site page . When the file is sent in the "dropbox" folder, it is automatically converted in a text file. I did try with a .doc, .xls and .pdf... Should it be possible to avoid this problem ? Thanks a lot Jean-Paul

```
var folderName = "Assignments-Spring-2011";

function doGet() {

  var app = UiApp.createApplication().setTitle("Upload Assignment");
  app.setHeight(180);
  var form = app.createFormPanel().setId('frm').setEncoding('multipart/form-data');
  var formContent = app.createGrid().resize(6,2);
  form.add(formContent);

  formContent.setWidget(1, 0, app.createLabel('Assignment Number:'));
  var assignmentNumberList = app.createListBox();
  assignmentNumberList.addItem("Assignment 1");
  assignmentNumberList.addItem("Assignment 2");
  assignmentNumberList.addItem("Assignment 3");
  assignmentNumberList.addItem("Assignment 4");
  assignmentNumberList.addItem("Assignment 5");
  assignmentNumberList.addItem("Assignment 6");
  assignmentNumberList.addItem("Assignment 7");
  assignmentNumberList.addItem("Assignment 8");

  formContent.setWidget(1, 1, assignmentNumberList.setName('assignmentNumber'));

  formContent.setWidget(3, 0, app.createLabel('Assignment File:'));
  formContent.setWidget(3, 1, app.createFileUpload().setName('thefile'));
  formContent.setWidget(5, 0, app.createSubmitButton('Submit Assignment!'));

  // thank you panel
  var panel = app.createSimplePanel().setVisible(false).setId("thankyouPanel");
  var label = app.createLabel("Thank you for submitting the         Assignment").setStyleAttribute("fontSize", "16px");
  panel.add(label);

  app.add(panel);
  app.add(form);

  return app;
}

function doPost(e) {
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var name = Session.getActiveUser().getUserLoginId();
  var assignmentFile = e.parameter.file;
  var uploadBlob = Utilities.newBlob        (assignmentFile, "text/plain",e.parameter.assignmentNumber+"-"+name+"-"+e.parameter.thefile.name );
  var doc = DocsList.createFile(uploadBlob);
  // get assignment folder
  var folder = DocsList.getFolder(folderName);
  doc.addToFolder(folder);

  var app = UiApp.getActiveApplication();
  var form = app.getElementById("frm").setVisible(false);
  var panel = app.getElementById("thankyouPanel").setVisible(true);
  app.close();
  return app;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:59:26.897

看起来您使用的他的代码故意将其限制为文本：

```
var uploadBlob = Utilities.newBlob        (assignmentFile, "text/plain",e.parameter.assignmentNumber+"-"+name+"-"+e.parameter.thefile.name ); 
```

只需消除该行并像这样重定向您的变量

```
var uploadBlob = e.parameter.file; 
```

应该让你直截了当。

# c# - 依赖注入的学习原理，适用于这种情况吗？

> ID：12340381
> 
> 赞同：1
> 
> 时间：2012-09-09T15:28:55.363
> 
> 标签：c#, .net, dependency-injection, ninject, agile

我一直在阅读大量关于通过 Ninject 进行依赖注入的阅读和教程，希望将来能够重构我的一个应用程序，使其更加灵活和可扩展。我的 Web 应用程序建立在一个 API 之上，可以让我访问后端基础架构。

我试图清理的部分技术债务是我必须进行的每一个 API 调用所带来的重复代码。API 有大约 45-50 种用于获取和管理不同实体的方法。

以下（非常简化的）代码示例说明了在我的代码中*随处可见的重复模式。*Ninject/DI 可以帮助我简化事情吗？

```
namespace MyApp
{
public class example
{
    public  static WebAccount Fetch_Account(Guid accountID)
    {
        //Create instance of API, request and response objects
        WebAPI api = new WebAPI();
        Fetch_Account_Request accountRequest = new Fetch_Account_Request();
        Fetch_Account_Response accountResponse = new Fetch_Account_Response();

        //Api call security signature
        ApiSecuritySignature signature = new ApiSecuritySignature(/*My API ID */, /*My API Key */);

        accountRequest.API_ID = /* My API ID */;
        accountRequest.Token = signature.Token;
        accountRequest.TimeStamp = signature.Date;

        //Id of the account to be fetched
        accountRequest.Account_ID = accountID;

        //Fetch the account
        accountResponse = api.Fetch_Account(accountRequest);

        return accountResponse.Account;
    }

    public static void Manage_Account(WebAccount account)
    {
        //Create instance of API, request and response objects
        WebAPI api = new WebAPI();
        Manage_Account_Request manageAccountRequest = new Manage_Account_Request();
        Manage_Account_Response manageAccountResponse = new Manage_Account_Response();

        //Api call security signature
        ApiSecuritySignature signature = new ApiSecuritySignature(/*My API ID */, /*My API Key */);

        manageAccountRequest.API_ID = /* My API ID */;
        manageAccountRequest.Token = signature.Token;
        manageAccountRequest.TimeStamp = signature.Date;

        //account to modify
        manageAccountRequest.Account_ID = account.Account_ID;

        //set Account properties
        manageAccountRequest.Email =  account.Email;
        manageAccountRequest.Address_1 =  account.Address_1;
        manageAccountRequest.City = account.Postal_Zip;
        manageAccountRequest.Postal_Zip = account.Postal_Zip;
        manageAccountRequest.Country = account.Country;
        manageAccountRequest.State = account.State;

        //Make the call
        manageAccountResponse = api.Manage_Account(manageAccountRequest);
    }
}
} 
```

应该注意的是，我无法访问所有请求和响应对象的代码，它们是我引用的共享库的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:37:42.610

依赖注入本身不会帮助你。它的工作只是确保提供依赖项（而不是让类本身创建它们）。

IoC 容器只负责何时创建和处置对象，即对象的生命周期。（依赖注入是您获得的奖励）

适合您的解决方案是使用***工厂方法模式***。

您可以创建如下界面：

```
public interface IWebApiFactory
{
    Fetch_Account_Request CreateAccountRequest();
} 
```

这样您的代码就可以简化为：

```
public  static WebAccount Fetch_Account(Guid accountID)
{
    var request = _factory.CreateAccountRequest();
    request.Account_ID = accountID;
    var response = api.Fetch_Account(accountRequest);
    return accountResponse.Account;
} 
```

然后你当然可以将`IWebApiFactory`类注入到`example`类中。

附注：如果您使用 DI/IoC，则应尽可能避免使用静态类。

您可能有兴趣阅读我的 IoC 文章（以更好地了解 IoC/DI）：

*   [http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)
*   [http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T15:39:12.013

是的，您可以创建工厂以创建类型示例类。尝试通过在一个地方声明依赖项来尊重组合根模式。你显然需要很多 Managerxxx 类。您可以将它们声明为“示例”类的构造函数参数，并且 ninject 将使用可能的递归依赖项创建它们。

# cuda - Are there advantages to using the CUDA vector types?

> ID：12340384
> 
> 赞同：16
> 
> 时间：2012-09-09T15:29:12.663
> 
> 标签：cuda, abstract-data-type

CUDA provides built-in vector data types like `uint2`, `uint4` and so on. Are there any advantages to using these data types?

Let's assume that I have a tuple which consists of two values, A and B. One way to store them in memory is to allocate two arrays. The first array stores all the A values and the second array stores all the B values at indexes that correspond to the A values. Another way is to allocate one array of type `uint2`. Which one should I use? Which way is recommended? Does members of `uint3` i.e `x`, `y`, `z` reside side by side in memory?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T22:27:19.110

这有点投机，但可能会增加@ArchaeaSoftware 的答案。

我主要熟悉 Compute Capability 2.0 (Fermi)。对于这种架构，我认为使用矢量化类型没有任何性能优势，除了 8 位和 16 位类型。

查看 char4 的声明：

```
struct __device_builtin__ __align__(4) char4
{
    signed char x, y, z, w;
}; 
```

类型对齐到 4 个字节。我不知道有什么`__device_builtin__`作用。也许它在编译器中触发了一些魔法......

`float1`,`float2`和`float3`的声明看起来有点奇怪`float4`：

```
struct __device_builtin__ float1
{
    float x;
};

__cuda_builtin_vector_align8(float2, float x; float y;);

struct __device_builtin__ float3
{
    float x, y, z;
};

struct __device_builtin__ __builtin_align__(16) float4
{
    float x, y, z, w;
}; 
```

`float2`得到某种形式的特殊待遇。`float3`是一个没有任何对齐的结构，并`float4`对齐到 16 个字节。我不知道该怎么做。

全局内存事务为 128 字节，与 128 字节对齐。事务总是一次执行一个完整的warp。当一个 warp 到达一个执行内存事务的函数时，比如从全局内存中加载 32 位，芯片将在那时执行为服务于 warp 中的所有 32 个线程所需的事务。因此，如果所有访问的 32 位值都在单个 128 字节行内，则只需要一个事务。如果值来自不同的 128 字节行，则执行多个 128 字节事务。对于每个事务，warp 会暂停大约 600 个周期，同时从内存中获取数据（除非它在 ​​L1 或 L2 缓存中）。

因此，我认为找出哪种方法提供最佳性能的关键是考虑哪种方法导致最少的 128 字节内存事务。

假设内置向量类型只是结构，其中一些具有特殊对齐方式，使用向量类型会导致值以交错方式存储在内存（结构数组）中。因此，如果 warp 正在加载`x`该点的所有值，其他值 ( `y`, `z`, `w`) 将因为 128 字节事务而被拉入 L1。当 warp 稍后尝试访问这些时，它们可能不再位于 L1 中，因此必须发出新的全局内存事务。此外，如果编译器能够发出更广泛的指令以同时读取更多值，以供将来使用，它将使用寄存器来存储加载点和使用点之间的值，这可能会增加寄存器的使用的内核。

另一方面，如果将值打包到数组结构中，则可以使用尽可能少的事务处理负载。因此，从`x`数组中读取时，只有`x`值被加载到 128 字节事务中。这可能会导致更少的事务、更少的对缓存的依赖以及计算和内存操作之间的更均匀分布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T21:44:50.757

我不相信 CUDA 中的内置元组 ([u]int[2|4], float[2|4], double[2]) 有任何内在优势；它们的存在主要是为了方便。您可以使用相同的布局定义自己的 C++ 类，编译器会有效地对它们进行操作。硬件确实具有本机 64 位和 128 位负载，因此您需要检查生成的微码以确定。

至于您应该使用 uint2 数组（结构数组或 AoS）还是两个 uint 数组（数组结构或 SoA），没有简单的答案 - 这取决于应用程序。对于方便大小的内置类型（2x32 位或 4x32 位），AoS 的优点是您只需要一个指针来加载/存储每个数据元素。SoA 需要多个基指针，或者每个元素至少需要多个偏移量和单独的加载/疼痛操作；但对于有时仅在元素子集上运行的工作负载，它可能会更快。

作为使用 AoS 获得良好效果的工作负载示例，请查看 nbody 样本（它使用 float4 来保存每个粒子的 XYZ+质量）。Black-Scholes 示例使用 SoA，大概是因为 float3 是一个不方便的元素大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-15T17:15:26.320

[另一个线程](https://stackoverflow.com/questions/26676806/efficiency-of-cuda-vector-types-float2-float3-float4)中有一些很好的信息与这里所说的许多主要结论相矛盾。

# java - Display a loading image as long as a jquery function is executing

> ID：12340385
> 
> 赞同：0
> 
> 时间：2012-09-09T15:29:33.583
> 
> 标签：java, jquery, jsp, loading

I m working on a Spring MVC java web application . The app contains a JSP page , on it I have a table in which I display data from the DB. The data is diplayed in text inputs which belong to the class .editable I implemented a script that does the following : -select the text inputs from the table , -create a span with the data from the text inputs -hides the text input

```
function editableInput() {
$('.editable').each(function() {
var input = $(this);
input.before("<span class='spanEditable'>" + input.val() + "</span>");
input.hide();
});
} 
```

I later use a script to display the text input for a row , when the row is selected from a radio input. All of this for making a good looking table that permits CRUD operations , on a row , when the row is selected , when no row is selected , it displays all the table content like plain text , not using a text input.

The problem i am facing : When the page is loading it displays all the table rows like it is initially made , with all the data in text inputs , after the script is being completed all the data is displayed in the spans. This looks really bad , until all the stuff is loaded.

How can i use a loading gif , until the function editableInput() is completed ? If i would use a AJAX call i would know how to add the loading gif , but this is how i`m calling the function :

```
$(document).ready(function() {
editableInput(); )}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:49:24.567

您可以尝试使用**[jQuery BlockUI 插件 (v2)](http://www.malsup.com/jquery/block/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:54:49.203

好吧，你可以试试这个，虽然很粗糙，但会奏效。在加载页面时，使用以下命令将表格包装到另一个 div 中：

```
$("table#table1").wrap("<div id='dvWrapp' style='background-color:#000;'/>"); 
```

然后在完成`editableInput` 通话后打开它：

```
$("table#table1").unwrap(); 
```

您可以为包装 div 设置样式以显示加载图像或一些消息。

请试试这个例子：http: [//jsfiddle.net/amantur/FkjkR/](http://jsfiddle.net/amantur/FkjkR/)

# c - Terminating the program gracefully in C

> ID：12340388
> 
> 赞同：3
> 
> 时间：2012-09-09T15:29:47.517
> 
> 标签：c, exit, termination

I have sort of a homework and it asks me to end the program gracefully without explicit termination such as calling exit() or killing the threads. However I cannot think of any other methods than `return 0`, so what are the methods to end a program gracefully?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T16:00:50.293

杀死线程绝对不是终止程序的优雅方式。我认为您的讲师的意思是您的所有线程都应该在终止自己之前`parent`等待它们的线程。`child`

理想情况下，`pthread_exit`来自主线程的显式调用将确保它的所有子线程即使在退出后也能继续运行。请参阅[此链接](https://stackoverflow.com/questions/3559463/is-it-ok-to-call-pthread-exit-from-main)。但是，在退出之前等待子线程的最安全方法是使用`pthread_join`.

然而，`exit(0)`这样的过程是优雅的回报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:48:24.233

我认为您没有告诉我们您有一个多线程程序。我想优雅地终止程序的想法是为了通过设置一个标志或类似的东西来终止你的所有线程。然后只`main`在所有线程都可证明结束后终止你的。你实际终止你的方式并不`main`重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:32:04.673

`exit(0)`通常表示进程（您的程序）正常终止。如果出现错误，它会`exit(-1)`或其他一些错误代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T15:33:35.410

不知道它们优雅地意味着什么，但我的第一个想法只是返回 0。

或退出(0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T15:34:53.257

见[我的评论](https://stackoverflow.com/questions/12340388/terminating-the-program-gracefully-in-c#comment16566776_12340388)。

> `main`在缺少语句的情况下默认返回*0 。*`return 0;`

请参阅 C99 标准的 §5.1.2.2.3¶1。

> 如果`main`函数的返回类型是与 兼容的类型`int`，则从函数的初始调用返回`main`相当于以`exit`函数返回的值`main`作为参数调用函数；到达`}`终止 `main`函数的返回值`0`。如果返回类型与 不兼容`int`，则返回给宿主环境的终止状态是未指定的。

因此，以下内容虽然隐式但优雅地终止，与显式`exit`或`return`in区别开来`main`。

```
main() { } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T15:58:39.807

他们可能指的是您如何处理低级例程中的错误。而不是做类似的事情

```
printf("ERROR: couldn't initialize the claveman\n");
exit(1); 
```

您将从该例程返回（可能在该级别打印错误消息或等待在 main() 等更高级别执行此操作）。

```
return CLAVEMAN_INITIALIZE_ERROR; 
```

您的所有例程都将返回零表示成功或非零错误代码，直到 main 中的代码能够返回 EXIT_SUCCESS 或指示失败的错误代码。

# asp.net - Remove file extension on download using an ASP.NET HttpHandler?

> ID：12340390
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:29:53.783
> 
> 标签：asp.net, anchor, httphandler

I have stored file in my server, clients can download files via my page Home.aspx by clicking on an anchor, but i want to edit the original filename before launching download. How can i do it using an ASP.NET HttpHandler. Thanks in advance.

This is my anchor code:

```
 <% if (document.Path != null) { %>
                        <a id="downloadLink" runat="server" style="margin: 5px" href="<%# CONTENT_DIRECTORY_ROOT + document.Path %>">
                            <%= LanguageManager.GetValue("LABEL_DOWNLOAD") %></a>
                        <% } %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:38:00.677

试试`RewritePath(newUrl)`方法

```
HttpContext.Current.RewritePath(sUrl) 
```

或者你可以使用

```
HttpContext.Current.Server.Transfer(sUrl) 
```

# cocoa - How to get LIon's window resize NSCursor?

> ID：12340391
> 
> 赞同：1
> 
> 时间：2012-09-09T15:30:02.667
> 
> 标签：cocoa, resize, osx-lion, nscursor

The `NSCursor` documentation lists a number of resize cursors, but they are all of the variety used to resize panes inside of a window: [NSCursor Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nscursor_Class/Reference/Reference.html)

How do I get the resize cursors which OS X uses for resizing window borders?
(I.e., the arrows *without* the bar in the middle.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:03:40.920

[用于自定义 NSWindow 或 NSView](https://stackoverflow.com/questions/10733228/native-osx-lion-resize-cursor-for-custom-nswindow-or-nsview)的 Native OSX Lion 调整光标大小的副本

尤其是第二个答案，带有 Retina 图像。

# cakephp - change position of the flash message

> ID：12340392
> 
> 赞同：0
> 
> 时间：2012-09-09T15:30:09.373
> 
> 标签：cakephp, cakephp-2.0

I have something like this:

controller.

```
public function add() {
        $this->layout = 'home';
        $this->Session->destroy();

        if ($this->request->is('post')) {
                $this->Session->setFlash(__('xxx', true));

        }
    } 
```

view. home.ctp

```
<div id="container">
        <div id="header">
        </div>
        <div id="content">

            <?php echo $this->fetch('content'); ?>
        </div>

        <div id="footer">
            <?php echo $this->Session->flash(); ?>
        </div>
</div> 
```

My question is: Why the flash message is not showed in the footer? well, what I want is show the message below the form, but to simplify the problem, with this code the message is also showed in the top. But should be in the footer. Also if i delete

```
 <?php echo $this->Session->flash(); ?> 
```

the message is also showed on the top of the page.

So, how can i change the position of this flash message?

**Edit:**

```
<?php var_dump($this->fetch('content')); ?> 
```

output:

```
string '<div id="flashMessage" class="message"> The user xxxxx</div>

<div class="users form">  
<form action="/cake/users/add" id="UserAddForm" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"/></div>    <fieldset>
<legend>
Add User
</legend>

<div class="input text required error"><label for="UserUsername">Username</label><input name="data[User][username]" maxlength="50" type="text" value="" id="UserUsername" class="form-er'... (length=1187) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:44:42.057

您正在将布局设置为“家”，对吗？你创建了一个`home.ctp`under`views/layouts`吗？我问你是因为你显示的视图看起来像 Cake ( ) 附带的默认布局`default.ctp`。

对我来说，代码看起来不错，只要确保你显示的是正确的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:01:47.457

当我删除我的时 `<?php echo $this->Session->flash(); ?>`，我没有收到闪信。我认为您应该考虑@clapas 的回答。

# css - How to make code neater in Dreamweaver?

> ID：12340396
> 
> 赞同：0
> 
> 时间：2012-09-09T15:30:24.253
> 
> 标签：css, dreamweaver

is there any quick and easy way to convert code from looking like this:

```
<style>
element { property:value; property:value; 
property:value; 
property:value; }

element { property:value; property:value; property:value; property:value; property:value; }
element {property:value; property:value; property:value; 
property:value; 
property:value; property:value; 
}
</style>
<div>
content content content <div> content </div>
  </div> 
```

to being nice and neat like this:

```
<style>

element { property:value; property:value; property:value; property:value; }

element { property:value; property:value; property:value; property:value; }

element { property:value; property:value; property:value; property:value; }

</style>

<div>
content content content 
      <div> 
          content 
      </div>
</div> 
```

it would also make life easier if there was a button to put css in alphabetical order

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:39:09.457

请参阅这些类似的问题/答案：

*   [是否可以在 Dreamweaver 中自动格式化您的代码？](https://stackoverflow.com/questions/2146862/is-it-possible-to-auto-format-your-code-in-dreamweaver)

*   [Dreamweaver CS5 代码格式化程序](https://stackoverflow.com/questions/2847689/dreamweaver-cs5-code-formatter)

我自己没有安装 Dreamweaver，但根据[这个答案](https://stackoverflow.com/a/2146902/700926)，应该可以使用以下命令：

*   命令 > 应用格式
*   命令 > 清理 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:39:09.033

尝试：

```
Command -> Apply Source Formatting 
```

# java - java solution for hashing lines that contain variables in .csv

> ID：12340399
> 
> 赞同：0
> 
> 时间：2012-09-09T15:30:40.853
> 
> 标签：java, sorting, hash, lines

I have a file that represent a table recorded in .csv or similar format. Table may include missing values. I look for a solution (preferably in java), that would process my file in the incremental manner without loading everything into memory, as my file can be huge. I need to identify duplicate records in my file, being able to specify which columns I want to exclude from consideration; then produce an output grouping those duplicate records. I would add an additional value at the end with a group number and output in the same format (.csv) sorted by group number.

I hope an effective solution can be found with some hashing function. For example, reading all lines and storing a hash value with each line number, hash calculated based on the set of variables I provide as an input.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:44:18.920

好的，这是掌握答案关键[的论文：P. Gopalan & J. Radhakrishnan “Finding duplicates in a data stream”。](http://research.microsoft.com/pubs/77590/gopalanp.pdf)

# mysql - 即使没有记录，也要每小时排一次

> ID：12340400
> 
> 赞同：1
> 
> 时间：2012-09-09T15:30:55.233
> 
> 标签：mysql

> **可能重复：**
> [如何在 mysql 中生成行生成器](https://stackoverflow.com/questions/701444/how-do-i-make-a-row-generator-in-mysql)
> [generate_series 等效于 mysql](https://stackoverflow.com/questions/6870499/generate-series-equivalent-in-mysql)

我在创建 mysql 查询时遇到了麻烦。

我的 PHP 脚本在每次运行时执行此查询： INSERT INTO Executes SET UserIp='%s' (%s is user IP)

执行表是：

```
ExecuteId UNSIGNED BIGINT AI PRIMARY 
Date TIMESTAMP DEFAULT CURRENT_TIMESTAMP INDEX 
UserIp CHAR(24) ... | Some Columns 
```

我想每小时检索一次执行次数。最明显的解决方案是：

```
SELECT COUNT(*) as ExecutesNum, DATE(Date) as D, HOUR(Date) as H GROUP BY D, H 
```

它可以工作，但它不会在没有执行的几个小时内创建行。

我应该修改什么以获得如下结果：

```
 1 | 2012-09-01 | 14

**0 | 2012-09-01 | 15**

 11 | 2012-09-01 | 16

  1 | 2012-09-01 | 17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:50:15.317

这是一个相当普遍的问题，我通常通过创建一个包含所有时间的临时表来解决，如下所示：

```
DROP TABLE IF EXISTS hours;
CREATE TABLE hours (hour VARCHAR(13) PRIMARY KEY);
DROP PROCEDURE IF EXISTS fill_hours;

DELIMITER |
CREATE PROCEDURE fill_hours(start_time DATETIME, end_time DATETIME)
BEGIN
  DECLARE crt_time DATETIME;
  SET crt_time=DATE_SUB(start_time, INTERVAL DATE_FORMAT(start_time, '%i:%s') MINUTE_SECOND);
  WHILE crt_time < end_time DO
    INSERT INTO hours VALUES(DATE_FORMAT(crt_time, '%Y-%m-%d-%H'));
    SET crt_time = DATE_ADD(crt_time, INTERVAL 1 HOUR);
  END WHILE;
END |

CALL fill_hours( (SELECT MIN(Date) FROM Executes), (SELECT MAX(Date) FROM Executes) ); 
```

然后，您可以将此表连接到原始表以获得您想要的：

```
SELECT
h.hour,
COUNT(e.ExecuteId)
FROM hours h
LEFT JOIN Executes e ON DATE_FORMAT(e.Date, "%Y-%m-%d-%H") = h.hour
GROUP BY h.hour 
```

# visual-studio-2012 - 使用两个构建服务器

> ID：12340401
> 
> 赞同：1
> 
> 时间：2012-09-09T15:31:34.263
> 
> 标签：visual-studio-2012

我们想在不升级 TFS 服务器（即 TFS 2008）的情况下将我们的客户端升级到 VS 2012。此外，由于我们有多个产品，我们希望一次将代码修改为与 C++11 兼容的一个产品。因此，TFS 服务器必须支持和发布 VS 2008 和 VS 2012 客户端的构建。有没有人配置过 TFS 2008 以使用两个构建服务器？甚至可能吗？

# c++ - 从 C++ 文件中读取字符串

> ID：12340402
> 
> 赞同：3
> 
> 时间：2012-09-09T15:31:37.860
> 
> 标签：c++, string, file-io, fstream

我正在尝试将字符串直接存储到文件中以便稍后在 C++ 中读取（基本上对于完整范围，我试图将带有字符串变量的对象数组存储在文件中，并且这些字符串变量将通过对象之类的东西读取[0].字符串）。但是，每次我尝试读取字符串变量时，系统都会给我一个混乱的错误。以下代码是我正在尝试的基本部分。

```
#include <iostream>
#include <fstream>
using namespace std;

/*
//this is run first to create the file and store the string
int main(){
    string reed;
    reed = "sees";
    ofstream ofs("filrsee.txt", ios::out|ios::binary);
    ofs.write(reinterpret_cast<char*>(&reed), sizeof(reed));
    ofs.close();

}*/

//this is run after that to open the file and read the string
int main(){
    string ghhh;
    ifstream ifs("filrsee.txt", ios::in|ios::binary);
    ifs.read(reinterpret_cast<char*>(&ghhh), sizeof(ghhh));
    cout<<ghhh;
    ifs.close();
    return 0;
} 
```

第二部分是当我尝试阅读时事情变得混乱的地方。抱歉，如果之前有人问过，我已经环顾四周寻找类似的问题，但其中大多数与我想要做的有点不同，或者我不太明白他们想要做什么（仍然很新的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T15:38:38.910

## 我究竟做错了什么？

您正在从文件中读取数据并尝试将数据放入字符串结构本身，然后覆盖它，这是完全错误的。

正如可以在[http://www.cplusplus.com/reference/iostream/istream/read/](http://www.cplusplus.com/reference/iostream/istream/read/)上进行验证的那样，您使用的类型是错误的，并且您知道这一点，因为您必须`std::string`使用.`char *``reinterpret_cast`

C++ 提示：在 C++ 中**使用 a `reinterpret_cast`（几乎）总是表明你做错了什么。**

## 为什么读取文件如此复杂？

很久以前，读取文件很容易。在一些类似 Basic 的语言中，您使用了 function `LOAD`，*瞧！*，你有你的文件。那么为什么我们现在不能这样做呢？

**因为你不知道文件中有什么。**

*   它可能是一个字符串。
*   它可能是一个序列化的结构数组，其中包含从内存中转储的原始数据。
*   它甚至可以是实时流，即连续附加的文件（日志文件、标准输入等）。
*   您可能希望逐字读取数据
*   ...或逐行...
*   或者文件太大以至于无法放入字符串中，因此您想分部分读取它。
*   ETC..

更通用的解决方案是读取文件（因此，在 C++ 中，一个 fstream），使用函数 get 逐字节读取（参见[http://www.cplusplus.com/reference/iostream/istream/get/](http://www.cplusplus.com/reference/iostream/istream/get/)），然后执行自己操作将其转换为您期望的类型，并在 EOF 处停止。

该`std::isteam`接口具有以不同方式读取文件所需的所有功能（请参阅[http://www.cplusplus.com/reference/iostream/istream/](http://www.cplusplus.com/reference/iostream/istream/)`std::string` ），即便如此，还有一个额外的非成员函数读取文件直到找到分隔符（通常是“\n”，但它可以是任何东西，请参阅[http://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)）

## 但我想要一个“加载”功能`std::string`！

好的我明白了。

我们假设您放入文件中的是 a 的内容`std::string`，但要使其与 C 风格的字符串兼容，即`\0`字符标记字符串的结尾（如果不是，我们需要加载文件直到到达EOF）。

`loadFile`我们假设您希望函数返回后完全加载整个文件内容。

所以，这里的`loadFile`功能：

```
#include <iostream>
#include <fstream>
#include <string>

bool loadFile(const std::string & p_name, std::string & p_content)
{
    // We create the file object, saying I want to read it
    std::fstream file(p_name.c_str(), std::fstream::in) ;

    // We verify if the file was successfully opened
    if(file.is_open())
    {
        // We use the standard getline function to read the file into
        // a std::string, stoping only at "\0"
        std::getline(file, p_content, '\0') ;

        // We return the success of the operation
        return ! file.bad() ;
    }

    // The file was not successfully opened, so returning false
    return false ;
} 
```

如果您使用的是启用 C++11 的编译器，则可以添加这个重载函数，这不会花费您*任何*费用（而在 C++03 中，进行优化，它*可能*会花费您一个临时对象）：

```
std::string loadFile(const std::string & p_name)
{
    std::string content ;
    loadFile(p_name, content) ;
    return content ;
} 
```

现在，为了完整起见，我编写了相应的`saveFile`函数：

```
bool saveFile(const std::string & p_name, const std::string & p_content)
{
    std::fstream file(p_name.c_str(), std::fstream::out) ;

    if(file.is_open())
    {
        file.write(p_content.c_str(), p_content.length()) ;

        return ! file.bad() ;
    }

    return false ;
} 
```

在这里，我用来测试这些功能的“主要”：

```
int main()
{
    const std::string name(".//myFile.txt") ;
    const std::string content("AAA BBB CCC\nDDD EEE FFF\n\n") ;

    {
        const bool success = saveFile(name, content) ;
        std::cout << "saveFile(\"" << name << "\", \"" << content << "\")\n\n"
                  << "result is: " << success << "\n" ;
    }

    {
        std::string myContent ;
        const bool success = loadFile(name, myContent) ;

        std::cout << "loadFile(\"" << name << "\", \"" << content << "\")\n\n"
                  << "result is: " << success << "\n"
                  << "content is: [" << myContent << "]\n"
                  << "content ok is: " << (myContent == content)<< "\n" ;
    }
} 
```

## 更多的？

如果您想做更多的事情，那么您需要探索 C++ IOStreams 库 API，网址为[http://www.cplusplus.com/reference/iostream/](http://www.cplusplus.com/reference/iostream/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T15:45:16.877

你不能`std::istream::read()`用来读入一个`std::string`对象。您可以做的是确定文件的大小，创建一个合适大小的字符串，并将数据读入字符串的字符数组：

```
std::string str;
std::ifstream file("whatever");
std::string::size_type size = determine_size_of(file);
str.resize(size);
file.read(&str[0], size); 
```

棘手的一点是确定字符串应该具有的大小。鉴于字符序列可能在读取时被翻译，例如，因为行尾序列被转换，这几乎相当于在一般情况下读取字符串。因此，我建议不要这样做。相反，我会使用以下内容读取字符串：

```
std::string   str;
std::ifstream file("whatever");
if (std::getline(file, str, '\0')) {
     ...
} 
```

这适用于文本字符串，并且与大多数系统上的速度一样快。如果文件可以包含空字符，例如，因为它包含二进制数据，那么这并不完全有效。如果是这种情况，我会使用中间`std::ostringstream`：

```
std::ostringstream out;
std::ifstream      file("whatever");
out << file.rdbuf();
std::string str = out.str(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:39:19.463

字符串对象不仅仅是一个字符数组，行

```
ifs.read(reinterpret_cast<char*>(&ghhh), sizeof(ghhh)); 
```

可能是你问题的根源。

尝试应用以下更改：

```
char[BUFF_LEN] ghhh;
....
ifs.read(ghhh, BUFF_LEN); 
```

# java - 从另一个类访问组件

> ID：12340406
> 
> 赞同：3
> 
> 时间：2012-09-09T15:32:39.790
> 
> 标签：java, swing, oop, class, jcombobox

我对java很陌生。

我有一个类，我正在创建 gui 和另一个类（主类），我正在访问 gui 类。在 gui 类中，我正在创建一些组件并返回它们。

gui类，

```
 public class Gui {

            public Component getTopPanelContent(){
                Jpanel jp = new Jpanel();
                JComboBox cbo1 = new JComboBox();
                JComboBox cbo2 = new JComboBox();
                JComboBox cbo3 = new JComboBox();
                JComboBox cbo4 = new JComboBox();
                JComboBox cbo5 = new JComboBox();
                JButton button = new JButton();

                jp.add(cbo1);
                jp.add(cbo2);
                jp.add(cbo3);
                jp.add(cbo4);
                jp.add(cbo5);
                jp.add(button);
                return jp; 
            }
        } 
```

主班，

```
 public void addComponents(int id){
           Gui g = new Gui();
           Jpanel container = new Jpanel();

           if(id == 1){
               container.add(g.getTopPanelContent);     
           }
        } 
```

到目前为止，它的工作正常。

在主类中有一个 JTextArea，每当我打开一个文件时，我必须在 cbo1 中显示国家列表，该文件包含必须显示的国家列表，

```
 String[] countries = editArea.getContents().split("\n"); 
```

如何将国家/地区值传递给 cbo1

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:53:05.780

好吧，我通常看到一个 GUI 类具有摆动组件作为类属性。你为你的 GUI 做了一个类似于“util”类的东西，所以你必须寻找你的`JComboBox`

我建议您参加一个功能齐全的课程来代表您的 GUI，例如：

```
import javax.swing.*;

public class Gui extends JPanel {

    private JComboBox cbo1 = new JComboBox();
    private JComboBox cbo2 = new JComboBox();
    private JComboBox cbo3 = new JComboBox();
    private JComboBox cbo4 = new JComboBox();
    private JComboBox cbo5 = new JComboBox();
    private JButton button = new JButton();

    public Gui() {
        add(cbo1);
        add(cbo2);
        add(cbo3);
        add(cbo4);
        add(cbo5);
        add(button); 
    }
} 
```

此外，添加 getter 和 setter ;-)。

如果您想按自己的方式保留代码，可以按索引搜索组合框：

```
System.out.println( jp.getComponent(0) ); 
```

或者，更好的是，您可以命名您的 JComboBox，然后按名称搜索它：

```
cbo1.setName("countryCombo");
jp.add(cbo1); 
```

进而：

```
public Component findCbo1() {
    for (Component comp : this.getComponents()) {
        if(comp.getName() != null && comp.getName().equals("countryCombo")) {
            return comp;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T15:43:44.447

有两种方法可以做到......

*   将 cbo1 设置为`static`...因此您必须**在 Class 范围内的方法之外声明它...**

    所以会是这样。。

    ```
    for(String s: countries){ 

     Gui.cbo1.addItem(s);

     } 
    ```

*   或使用`Singleton principle`将`Gui`类设置为`Singleton`，然后使用`Composition`获取对 JComboBox cbo1 的访问权限

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T15:57:08.553

您可以将组件向上移动以成为类变量并添加公共 getter。这些 getter 可以从您的主类中访问。

桂类->

```
public class Gui {
    private JPanel jp;
    private JComboBox cbo1;
    private JComboBox cbo2;
    private JComboBox cbo3;
    private JComboBox cbo4;
    private JComboBox cbo5;
    private JButton button;

    public Component getTopPanelContent(){
        jp = new JPanel();
        cbo1 = new JComboBox();
        cbo2 = new JComboBox();
        cbo3 = new JComboBox();
        cbo4 = new JComboBox();
        cbo5 = new JComboBox();
        button = new JButton();

        jp.add(cbo1);
        jp.add(cbo2);
        jp.add(cbo3);
        jp.add(cbo4);
        jp.add(cbo5);
        jp.add(button);
        return jp; 
    }

    /**
     * @return the jp
     */
    public JPanel getJp() {
        return jp;
    }

    /**
     * @return the cbo1
     */
    public JComboBox getCbo1() {
        return cbo1;
    }

    /**
     * @return the cbo2
     */
    public JComboBox getCbo2() {
        return cbo2;
    }

    /**
     * @return the cbo3
     */
    public JComboBox getCbo3() {
        return cbo3;
    }

    /**
     * @return the cbo4
     */
    public JComboBox getCbo4() {
        return cbo4;
    }

    /**
     * @return the cbo5
     */
    public JComboBox getCbo5() {
        return cbo5;
    }

    /**
     * @return the button
     */
    public JButton getButton() {
        return button;
    }
} 
```

主类->

```
public void addComponents(int id){
    Gui g = new Gui();
    g.getCbo1().addItem("text");
} 
```

虽然这解决了您的问题，但它引出了一个问题，您创建一个类只是为了保存 GUI 组件是否有特定的原因？有比这更好的方法来处理组件（特别是如果您的应用程序将变得更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T16:08:03.053

在这里你可以做的是：

```
public class Gui {
    public Component getTopPanelContent(){
        Jpanel jp = new Jpanel();
        JComboBox cbo1 = new JComboBox();
        ...
        return jp; 
    }

    public void addItemsToCBo1(String[] items){
        for(String item : items){
            cbo1.addItem(item);
        }
   }
} 
```

主类：

```
public void addComponents(int id){
    Gui g = new Gui();
    Jpanel container = new Jpanel();

    if(id == 1){
        container.add(g.getTopPanelContent);
        g.addItemsToCBo1(editArea.getContents().split("\n"));
    }
} 
```

# r - 不起作用的ggplot alphas

> ID：12340407
> 
> 赞同：5
> 
> 时间：2012-09-09T15:32:46.903
> 
> 标签：r, ggplot2

我正在尝试在密度曲线上方绘制一个与背景颜色相同的半透明矩形，以便创建后者的浅色垂直区域（用于可视化诸如高峰时间等感兴趣的范围的技巧）。如您所见，alpha 失败。我想知道是否有人可以使以下代码正常工作？

我知道还有其他关于 ggplot 的 alpha 通道问题的帖子（[例如](https://stackoverflow.com/questions/10053399/alpha-channel-in-ggplot2-does-not-work-after-installing-2-15)），但似乎没有一个可以解决这个问题，并且不清楚当前的情况是什么版本。

提前致谢 ：）

![在此处输入图像描述](../Images/0f817be5a97ad72c4fce3eae8308de03.png)

```
d <- data.frame(rnorm(100, mean = 0, sd = 100)); names(d) <- 'data'

ggplot(d) + geom_density(aes(x=data),col=NA, fill='grey30') + opts(panel.background=NULL) +
  geom_rect(aes(xmin=-30, xmax=30, ymin=0, ymax=0.005), fill='white',alpha=0.2)

ggplot(d) + geom_density(aes(x=data),col=NA, fill='grey30') + opts(panel.background=NULL) +
  geom_rect(aes(xmin=-30, xmax=30, ymin=0, ymax=0.005), fill='#FFFFFF40') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T16:10:28.913

看来您只是选择了太低`alpha`，例如尝试`1/256`，这是可能的最低透明度：

```
ggplot(d) + geom_density(aes(x = data), col = NA, fill = 'grey30') + 
  theme(panel.background = NULL) +
  geom_rect(aes(xmin = -30, xmax = 30, ymin = 0, ymax = 0.005), 
            fill = 'white', alpha = 1/256) 
```

![在此处输入图像描述](../Images/fe9e330e037540afb6541c45f1f87ff3.png)

这对我来说也是一个出乎意料的解决方案，因为取`alpha = I(1/d)`意味着`d`必须对多个点进行过度绘制才能给出纯色，所以我们会期待不同的结果`1/256`。正如您所说，这是与`geom_rect`.

# android - 如何将字符串转换为字符序列

> ID：12340415
> 
> 赞同：0
> 
> 时间：2012-09-09T15:33:50.850
> 
> 标签：android, eclipse, charsequence

我想从 myDB 上的表中获取数据，并且想将数据显示到 alertdialog，这是我的代码：

```
public void gotResult(String result, String message) {
        // TODO Auto-generated method stub
        if (result != null) {
            switch (Action) {
            case VIEW_BIKE_TYPE:
                try {
                    JSONObject jsonObject = null;
                    jsonObject = new JSONObject(result);
                    int response = jsonObject.getInt("result");
                    if (response != 0) {
                        JSONArray jsonArray = new JSONArray(
                                jsonObject.getString("data"));

                        CharSequence[] items = new CharSequence[jsonArray.length()];

                        for (int i = 0; i < jsonArray.length(); i++) {
                            JSONObject biketype = new JSONObject(jsonArray
                                    .get(i).toString());

                            items[i] = biketype.getString("type_name");
                        }
                        bike_type_Result.gotResult(items, null, Action);
                    } else {
                        String error_message = jsonObject
                                .getString("message");
                        bike_type_Result.gotResult(null, error_message,
                                Action);
                    }
                } catch (JSONException e) {
                    // TODO: handle exception
                    bike_type_Result.gotResult(null,
                            "Failed parsing data from database. Please try again.. "
                                    + e.getMessage(), Action);
                    Log.e("CON ERROR", e.getMessage());
                }
            }
        } else {
            bike_type_Result.gotResult(null, message, Action);
            Log.e("CON ERROR", message);
        }
    }
}; 
```

我有这样的代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    final Entity_Brand brand = adapterBrand.getItem(position);

    CharSequence[] items = { ...... };

    AlertDialog.Builder builder = new AlertDialog.Builder(
            Tab_Brand_ListView_Activity.this);
    builder.setIcon(R.drawable.alert_brand_logo);
    builder.setTitle(brand.getBrand_name()); 
```

那是我的代码，有人可以给我看一些代码，`CharSequence[] items = { ...... };`以便我可以从 myDB 获取数据吗？请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T13:42:14.330

像这样从字符串数组转换为字符序列并获取您想要的字符串 List listItems = new ArrayList();

```
 listItems.add("Take Photo");
    listItems.add("Choose From Gallery");
    if (flagImage == 1) {
        listItems.add("Remove Photo");

    }
    listItems.add("Cancel");

    final CharSequence[] items = listItems.toArray(new CharSequence[listItems.size()]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:01:25.477

只需将`CharSequence`代码中出现的所有 . 替换为`String`.

# eclipse - 无法在 eclipse cdt 中运行 c/cpp execs

> ID：12340419
> 
> 赞同：4
> 
> 时间：2012-09-09T15:35:02.493
> 
> 标签：eclipse, g++, eclipse-cdt

我最近在 ubuntu 系统上安装了 eclipse，然后 cdt，并试图制作第一个可运行的 c/c++ proj。我还安装了 g++，然后创建了第一个可执行的 cpp 'Hello World' 项目，创建了一些文件......然后一些问题...

1.  即使选择了自动构建，我也必须转到项目 n 做一个构建项目来手动构建它，每次我进行更改时我都必须这样做
2.  手动构建后，有一些使用二进制文件和调试文件创建的新文件夹，我可以`g++`在控制台中看到正在执行的命令。项目二进制文件同时输出到 debug n binaries 文件夹。但我无法通过绿色播放按钮或 Eclipse 中的任何其他方式运行这些。甚至运行配置也没有显示 C/C++ 项目的任何选项。
    虽然我可以转到终端并自己通过 ./ 运行二进制文件，但我希望能够通过 eclipse 运行 n 调试它。
    请帮我解决这个问题，因为我真的很喜欢 eclipse n 很快就会有一些 c/cpp 任务..

有关进行手动项目构建的控制台信息 -

****构建项目 qwe 的配置调试 ******

 **生成所有构建文件：../src/qwe.cpp 调用：GCC C++ 编译器 g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/qwe.d" -MT"src /qwe.d" -o "src/qwe.o" "../src/qwe.cpp" 完成的建筑：../src/qwe.cpp

构建目标：qwe 调用：GCC C++ Linker g++ -o "qwe" ./src/qwe.o
完成构建目标：qwe

****构建完成******

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T01:11:20.390

我有一个相同的问题，并通过安装两个额外的“C/C++ 开发工具”来解决它，当我最初在 Eclipse 软件更新中过滤“cdt”时没有显示这些工具。改为过滤 C++，你会发现它们，安装并重新启动后一切正常。****

# controller - 如何使用 rowexpander 插件 Extjs 4.1.1 扩展网格中的行

> ID：12340421
> 
> 赞同：1
> 
> 时间：2012-09-09T15:35:09.930
> 
> 标签：controller, grid, row, extjs4.1

如何使用 rowexpander 插件扩展网格中的行？我在我的控制器中使用以下代码

```
'editbasicinfotitlegrid gridview' : {
            afterrender:this.expandAll
 }

expandAll: function(){

    var titlesGrid = Ext.getCmp('editBasicInfoTitleGrid');     
    var expander = titlesGrid.getPlugin('myRowExpander');
    console.log(titlesGrid.plugins[0]);
    expander.toggleRow(0);

} 
```

但是这段代码给了我以下错误

```
Uncaught TypeError: Cannot call method 'down' of null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:39:31.953

所以我找到了它的解决方案。RowExpander 的 toggleRow() 函数只适用于网格的`viewready`事件。所以调用这个函数`viewready`而不是`afterrender`为我工作。

# java - 如何使用 Java 在 Jasper 报告表中添加数据

> ID：12340423
> 
> 赞同：0
> 
> 时间：2012-09-09T15:35:16.873
> 
> 标签：java, mysql, jasper-reports

我正在尝试使用 Java 将数据传递给 JasperReport。但是，表数据非常动态，我无法将 SQL 查询传递给报表。有什么想法吗？我有一个**对象**类型的二维数组，其中包含所有数据。我怎么能通过呢？

```
ConnectionManager con = new ConnectionManager();
    con.establishConnection();

    String fileName = "Pmc_Bill.jrxml";
    String outFileName = "OutputReport.pdf";
    HashMap params  = new HashMap();
    params.put("PName", pname);
    params.put("PSerial", psrl);
    params.put("PGender",pgen);
    params.put("PPhone",pph);
    params.put("PAge",page);
    params.put("PRefer",pref);
    params.put("PDateR",dateNow);
    try {

        JasperReport jasperReport = JasperCompileManager.compileReport(fileName);

        if(jasperReport != null )
           System.out.println("so far so good ");

        // Fill the report using an empty data source

        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, new JRTableModelDataSource(tbl.getModel()));//con.connection);
        try{
        JasperExportManager.exportReportToPdfFile(jasperPrint, outFileName);
        System.out.printf("File exported sucessfully");
        }catch(Exception e){
            e.printStackTrace();
        }
        JasperViewer.viewReport(jasperPrint);
    } catch (JRException e) {
        JOptionPane.showMessageDialog(null, e);
        e.printStackTrace();
        System.exit(1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T13:33:40.620

```
JRBeanCollectionDataSource beanColDataSource = new JRBeanCollectionDataSource(dataList);
Map parameters = new HashMap();
parameters.put("ParameterName", "Value Wanna Pass");
parameters.put("Other Parameter", Data source Name For Filling the table);

        JasperReport report = (JasperReport)JRLoader.loadObject("Path for the Jasper");
        JasperPrint jasperPrint = JasperFillManager.fillReport(report, parameters, new JREmptyDataSource()); 
```

# python - 如何在 BaseHTTPServer 中手动关闭连接？

> ID：12340424
> 
> 赞同：1
> 
> 时间：2012-09-09T15:35:41.790
> 
> 标签：python, sockets, basehttpserver

我有一个向 HTTP 服务器发送请求的脚本。

HTTP 服务器脚本（片段）：

```
...

class MyHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  def do_GET(sa):
    pdict = cgi.parse_header(sa.headers.getheader('referer'))
    q = pdict[0]
    q = urllib.unquote(q)

    if q == "enternetixplorer" # basically just ignore this, doesn't have to do with the question
      sa.wfile.write("blah blah blah")
      # now restart server
      httpd.server_close()
      python = sys.executable
      os.execl(python, python, * sys.argv)

... 
```

“blah blah blah”被发回，但连接似乎没有关闭，我的脚本一直在等待，直到我中止服务器。（我的想法是 BaseHTTPServer 在计算“do_GET（）”的最后一部分时自动关闭连接，但我通过重新启动脚本来防止这种情况。）

如果我是对的，我该如何关闭连接？如果不是，还有什么问题？

编辑：服务器脚本必须重新启动整个程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:40:50.900

当你执行：

```
os.execl(python, python, * sys.argv) 
```

[os.exec*](http://docs.python.org/library/os.html#os.execl)的 Python文档是这样说的：

> 这些函数都执行一个新程序，替换当前进程；他们不回来。在 Unix 上，新的可执行文件被加载到当前进程中，并且将具有与调用者相同的进程 ID。错误将报告为 OSError 异常。

因此，当您调用该函数时，该`do_GET`函数会挂起并且永远不会返回，因此 HTTP 服务器永远不会刷新 HTTP 消息的结尾。

我认为在您的情况下，最简单的更改是在调用 exec 之前调用[os.fork](http://docs.python.org/library/os.html#os.fork)，然后仅在子进程中调用 exec。让父进程从 do_GET 函数返回。

# android - android layout-land 和 layout-port 问题

> ID：12340426
> 
> 赞同：2
> 
> 时间：2012-09-09T15:35:53.240
> 
> 标签：android, android-layout, orientation

我有用于纵向布局的布局文件夹和用于横向布局的 layout-land 文件夹。
现在这种情况：我以纵向方向启动应用程序 - 好的，正确的布局，改变方向 - 好的，横向布局，再次改变方向 - 并且..方向改变但布局是横向..
这是什么？

编辑：
代码：

```
private TextView mTxtGoDate;
private TextView mTxtGoBackDate;
private TextView mTxtCityFrom;
private TextView mTxtCityWhere;

private TextView mTxtManCount;
private TextView mTxtChildCount;
private TextView mTxtBabyCount;
private TextView mTxtClass;

private CheckBox mCheckOneWay;
private CheckBox mCheckRange;

private RelativeLayout mLayoutGoBack;

private Button mBtnSearch;

private SearchParams mSearchParams;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_new_search);

    mSearchParams = new SearchParams();

    mTxtGoDate = (TextView) findViewById(R.id.txt_go_date);
    mTxtGoDate.setOnClickListener(this);
    getDateGo();
    mTxtGoDate.setText(mSearchParams.getGoDate().getDateAsString());

    mTxtGoBackDate = (TextView) findViewById(R.id.txt_go_back_date);
    mTxtGoBackDate.setOnClickListener(this);
    getDateGoBack();
    mTxtGoBackDate.setText(mSearchParams.getGoBackDate().getDateAsString());

    mTxtCityWhere = (TextView) findViewById(R.id.txt_where_city);
    mTxtCityWhere.setOnClickListener(this);
    mTxtCityFrom = (TextView) findViewById(R.id.txt_from_city);
    mTxtCityFrom.setOnClickListener(this);

    mCheckOneWay = (CheckBox) findViewById(R.id.check_one_way);
    mCheckOneWay.setOnCheckedChangeListener(this);
    mCheckRange = (CheckBox) findViewById(R.id.check_correct);

    mLayoutGoBack = (RelativeLayout) findViewById(R.id.layout_go_back);
    ((LinearLayout) findViewById(R.id.params_layout)).setOnClickListener(this);
    mTxtManCount = (TextView) findViewById(R.id.param_man);
    mTxtChildCount = (TextView) findViewById(R.id.param_child);
    mTxtBabyCount = (TextView) findViewById(R.id.param_baby);
    mTxtClass = (TextView) findViewById(R.id.param_class);

    mBtnSearch = (Button) findViewById(R.id.btn_search_flightes);
    mBtnSearch.setOnClickListener(this);

    CitiesDataSource dbCities = new CitiesDataSource(this);
    dbCities.open();
        City from = dbCities.getLatestCity(true);
        City where = dbCities.getLatestCity(false);
        if (from != null) {
            mTxtCityFrom.setText(from.getName());
            mSearchParams.setFrom(from);
        }
        if (where != null) {
            mTxtCityWhere.setText(where.getName());
            mSearchParams.setWhere(where);
        }
    dbCities.close();
}

@Override
public void onResume() {
    super.onResume(false);
} 
```

超类中的 onResume：

```
protected void onResume(boolean flag) {
        super.onResume();
    } 
```

其他代码与我的问题无关。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T03:24:24.047

您在此 Activity 的清单元素中是否有任何特殊标签，例如`configChanges`这可能会使它选择资源的方式复杂化？

您也可以尝试将纵向布局放在默认目录中，并且只有一个合格的横向布局目录，即

```
layout/
    //Your portrait (default) layout
layout-land/
    //Your landscape layout overrides 
```

# git - git 存储库是否有自己的 core.autocrlf 本地值来覆盖全局值？

> ID：12340429
> 
> 赞同：14
> 
> 时间：2012-09-09T15:36:27.870
> 
> 标签：git, core.autocrlf

根据[这个问题](https://stackoverflow.com/questions/1967370/git-replacing-lf-with-crlf)，我知道 git 中的 core.autocrlf=true 会导致 CRLF 到 LF 翻译。

但是，当我输入： git config core.autocrlf

我看：假的

但是，当我暂存已在 repo 中的已修改文件时，我仍然会收到以下警告：

```
Warning: CRLF will be replaced by LF in File1.X.
The file will have its original line endings in your working directory. 
```

我的猜测是该文件的 repo 副本已经设置为“autocrlf=true”。

问题： A. 如何查询文件或 git repo 是否已经强制 AutoCrlf？B. 如何将它 autocrlf 关闭？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T01:08:34.020

Git 允许您使用 .gitattributes 文件在每个存储库的基础上覆盖您的全局设置。您将它放在存储库的根目录中，并成为作为存储库的一部分提交的文件。我怀疑你的情况正在发生这种情况。

Github 有一个很好的页面：[https ://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

简而言之，您可以使用 text 属性来设置特定文件扩展名的行尾。例如，将 sln 文件强制为 CRLF 将需要 .gitattributes 文件中的以下行：

```
# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf 
```

# java - Java实例化的问题

> ID：12340430
> 
> 赞同：-3
> 
> 时间：2012-09-09T15:36:38.230
> 
> 标签：java, debugging, instantiation

在下面的程序运行时，我无法到达 main 函数的末尾……我是 Java 新手，找不到它的缺陷。我需要你的帮助。谢谢。

```
import java.util.*;

class Schedule {

    public String day;
    private int startTime, endTime;

    public Schedule(String input_day, int input_start, int input_end) {
        day = input_day;
        startTime = input_start;
        endTime = input_end;
    }

    /* clashWith: to check whether this schedule clash with a Schedule called otherSchedule
     *      PRE-Condition  : input must be of Schedule type
     *      POST-Condition : return true if two Schedule clash, return false if not.
     */
    public boolean clashWith(Schedule otherSchedule) { 
        if(this.day != otherSchedule.day || this.endTime <= otherSchedule.startTime || this.startTime >= otherSchedule.endTime)
            return false;
        return true;
    }
} 
```

* * *

```
class Module {

    String code;
    Schedule lecture, tutorial, lab;

    public Module(String input_code, Schedule input_lecture, Schedule input_tutorial, Schedule input_lab) {
        code = input_code;
        lecture = input_lecture;
        tutorial = input_tutorial;
        lab = input_lab;
    }

    /* count: to count number of classes(lecture, tutorial, and lab of only this Module) on day.
     *        For example: when day = "Monday", lecture is on Monday, tutorial is on Monday
     *        but lab is on Tuesday, then return 2\. (lecture and tutorial are on Monday).
     *      PRE-Condition  :
     *      POST-Condition :
     */
    public int count(String day) {
        int num = 0;
        if(lecture.day == day)
            num++;
        if(tutorial.day == day)
            num++;
        if(lab.day == day)
            num++;
        return num;
    }

    /* clashWith: to check whether this module clash with a Module called otherModule
     *      PRE-Condition  :
     *      POST-Condition :
     */
    public boolean clashWith(Module otherModule) {
        if(lecture.clashWith(otherModule.lecture) || lecture.clashWith(otherModule.tutorial) || lecture.clashWith(otherModule.lab) )
            return true;
        if(tutorial.clashWith(otherModule.lecture) || tutorial.clashWith(otherModule.tutorial) || tutorial.clashWith(otherModule.lab))
            return true;
        if(lab.clashWith(otherModule.lecture) || lab.clashWith(otherModule.tutorial) || lab.clashWith(otherModule.lab))
            return true;
        return false;
    }
} 
```

* * *

```
class Timetable {

    Vector<Module> listOfModule;

    /* checkClash: to check whether otherModule clash with one of 
     *             the modules in our timetable list.
     *      PRE-Condition  :
     *      POST-Condition :
     */
    public boolean checkClash(Module otherModule) {
        for(Module c: listOfModule)
            if(c.clashWith(otherModule))
                return true;
        return false;
    }

    /* add: to add a new module to the timetable list.
     *      PRE-Condition  :
     *      POST-Condition :
     */
    public void add(Module module) {
        listOfModule.add(module);
    }

    /* count: to count number of classes on day.
     *      PRE-Condition  :
     *      POST-Condition :
     */
    public int count(String day) {
        int count_day=0;
        for(Module c: listOfModule)
            count_day += c.count(day);
        return count_day;
    }
} 
```

* * *

```
public class Main {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        int num_operation;
        String code ;
        Timetable userTimetable = new Timetable();

        num_operation = input.nextInt();
        for(int i=0;i<num_operation;i++) {
            if(input.next() == "MODULE") {
                code = input.next();

                String day;
                int start, end;

                Schedule getLecSche = new Schedule(input.next(),input.nextInt(),input.nextInt());
                Schedule getTutSche = new Schedule(input.next(),input.nextInt(),input.nextInt());
                Schedule getLabSche = new Schedule(input.next(),input.nextInt(),input.nextInt());

                Module userModule = new Module(code, getLecSche, getTutSche, getLabSche);
                System.out.println("Reached line 162");
                if(!userTimetable.checkClash(userModule)) {
                    userTimetable.add(userModule);
                    System.out.println("Added");
                }
                else
                    System.out.println("Clashed");
            }
            else if(input.next() == "COUNT") {
                code = input.next();
                System.out.println(userTimetable.count(code));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:45:17.920

找到了。你`==`用来比较`Strings`。 [那只比较对象引用。](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

改用这个：

```
if (input.next().equals("MODULE"))

//...

if(input.next().equals("COUNT")) 
```

还值得一提的是，这不会捕获“Count”、“cOunT”、“Module”、“module”或“mOdulE”——您可能想要使用它`equalsIgnoreCase()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:54:02.330

在`Timetable`中，您永远不会为 赋值`listOfModule`：

```
Vector<Module> listOfModule; 
```

这会导致`NullPointerException`. 您需要为该引用分配一个新对象：

```
Vector<Module> listOfModule = new Vector<Module>(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-09T15:54:10.977

我认为问题出`input.next()` [在此处](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)。

> 公共字符串下一个（）
> 
> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。即使先前调用 hasNext() 返回 true，**此方法也可能在等待输入扫描时阻塞。**

**更新：**
消除上述**downvoters** `input.next()`的混乱来自声明`if(input.next() == "MODULE") {`

# javascript - Click 和 dblclick 在同一个 html 上提供不同的 parentNodes。为什么？

> ID：12340431
> 
> 赞同：1
> 
> 时间：2012-09-09T15:36:38.710
> 
> 标签：javascript, click, selection, designmode

目前我正在开发一个基于 jquery 的非常小的所见即所得编辑器。我不关心 IE oder Chrome，只关心 Firefox。我的问题是查找选择是否在链接中以获取 href 属性的值（如果已设置）。单击找到链接的节点，双击始终是正文。它处于设计模式。

我的 click 和 dblclick 事件处理程序。变量 current_selection、current_node、iframe 和 container 是全局的。

```
selection_handler:function()
{
  current_selection = iframe.getSelection();
  current_node = current_selection.anchorNode;
  if(current_node.nodeName == "#text")
  {
    current_node = current_node.parentNode;
  }
  $('#log').text(current_node.nodeName);
}, 
```

当我单击未格式化的文本时，日志显示 mit 例如“body”。当我使用 execCommand('createLink',...) 添加链接时，日志显示“A”。这样可行。当我从头到尾用 2 次单击标记链接的单词时，日志显示“A”。但是双击我总是得到“身体”。所以我无法获得 href 属性。

处理程序在 init 中定义：

```
init:function(options)
{
  ...

  iframe = $('#wysiwyg-'+container.attr('id'))[0].contentWindow;
  iframe.addEventListener('dblclick',methods.selection_handler,false);
  iframe.addEventListener('click',methods.selection_handler,false);

  ...
} 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:00:28.790

当您在链接上单击时，通常会选择完整的链接，选择会发生变化。

改为使用事件对象来确定单击了哪个元素：

```
selection_handler:function(e)
{
  current_selection = window.getSelection();
  current_node = e.target;
  //...more code
} 
```

# javascript - Jquery UI 对话框不会消失

> ID：12340432
> 
> 赞同：1
> 
> 时间：2012-09-09T15:36:47.650
> 
> 标签：javascript, jquery, html, jquery-ui, jsp

我正在使用 jquery-ui 选项卡和对话框功能。

每个选项卡在页面上都有一个按钮，可打开一个对话框。这适用于其中一个选项卡。但是，如果我转到第二个选项卡，则该按钮在那里不起作用。当我回到第一个选项卡时，对话框确实出现了，但问题是我注意到当我来回切换到第一个选项卡时，它会继续插入新的 div，而旧的 div 有 display:none 设置在他们身上。

我正在使用 JSP 执行此操作。这是可重用 jsp 的样子：

```
<script>
$(function() {
    var formData = null;
    $.ajax({
        url : "addFormGenerator.html",
        success : function(data) {
            formData = data;
            $("#addFormDialog").html(data);
            $("#addFormDialog").dialog({
                autoOpen : false,
                height : 300,
                width : 350,
                modal : true,
                buttons : {
                    "Add" : function() {
                        $(this).dialog("close");
                    },
                    Cancel : function() {
                        $(this).dialog("close");
                    }
                },
                close : function() {
                }
            });
        }
    });
    $("#addButton").button().click(function() {
        $("#addFormDialog").html(formData);
        $("#addFormDialog").dialog("open");
    });
});
</script>

<button id="addButton">Click here to Add New</button>
<div id="addFormDialog" title="Add New"></div> 
```

此 jsp 片段也包含在其他 jsp 页面中。我假设当我在选项卡之间切换时，旧按钮将被垃圾收集。

你能帮我理解问题并解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:08:11.973

您不需要从 jsp 的响应中呈现以下部分

```
<div class="addFormDialog" title="Add New"></div>

$("#addButton").button().click(function() {
        $("#addFormDialog").html(formData);
        $("#addFormDialog").dialog("open");
}); 
```

* * *

只需具有以下内容，理想情况下使用类名而不是重复的 id

```
<button class="addButton">Click here to Add New</button> 
```

* * *

**更新**：

我仍然认为您不需要唯一的ID-

```
<div id="tabs-container">

    <!-- tabs here -- >

    <-- let's say this is tab#1 -->
       <button class="addButton">Click here to Add New</button>
       <div class="addFormDialog" title="Add New"></div>
    <!-- tab1 -->
</div>

$('#tabs-container').on('click' , '.addButton', function(){
    var dialogContent = $(this).siblings('.addFormDialog');
    //now call .dialog({..});  or whatever you need
}); 
```

这样，您只需绑定一个单击处理程序，该处理程序侦听`click`从 a 冒泡的任何内容`.addButton`，然后搜索其兄弟`.addFormDialog`。（我希望我听起来不会太混乱）

# android - 这段代码有问题吗？

> ID：12340433
> 
> 赞同：0
> 
> 时间：2012-09-09T15:36:55.517
> 
> 标签：android, calendar, syntax-error

我正在尝试使用此代码，这是从此处获取的示例[https://gist.github.com/2383248](https://gist.github.com/2383248)，但它在 public void onClick 上出现错误，即

此行的多个标记 - 实现 android.view.View.OnClickListener.onClick - 语法错误，插入“}”以完成 MethodBody，但是当我添加大括号时，它只是在多次尝试和不同建议和想法失败后引发另一个错误。

这可能是我的语法错误和糟糕的编码（刚开始学习编程），但有没有人知道如何解决这个问题或指出我正确的方向，我将不胜感激。

```
 public class ICSCalendarActivity extends Activity implements View.OnClickListener{

Button button1;

int year1;  
int month1;  
int day1;
int ShiftPattern;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button1 = (Button)findViewById(R.id.openButton);     
    button1.setText("open");   
    button1.setOnClickListener(this);

    Bundle extras = getIntent().getExtras(); 

    year1 = extras.getInt("year1"); 
    day1 = extras.getInt("day1"); 
    month1 = extras.getInt("month1");

    ShiftPattern = extras.getInt("ShiftPattern");
}

public void onClick(View v){

private static void addToCalendar(Context ICSCalendarActivity, final String title, final long dtstart, final long dtend) {
    final ContentResolver cr = ICSCalendarActivity.getContentResolver();
    Cursor cursor ;
    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
        cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    else
        cursor = cr.query(Uri.parse("content://calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    if ( cursor.moveToFirst() ) {
        final String[] calNames = new String[cursor.getCount()];
        final int[] calIds = new int[cursor.getCount()];
        for (int i = 0; i < calNames.length; i++) {
            calIds[i] = cursor.getInt(0);
            calNames[i] = cursor.getString(1);
            cursor.moveToNext();
        }

        AlertDialog.Builder builder = new AlertDialog.Builder(ICSCalendarActivity);
        builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                ContentValues cv = new ContentValues();
                cv.put("calendar_id", calIds[which]);
                cv.put("title", title);
                cv.put("dtstart", dtstart );
                cv.put("hasAlarm", 1);
                cv.put("dtend", dtend);

                Uri newEvent ;
                if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                    newEvent = cr.insert(Uri.parse("content://com.android.calendar/events"), cv);
                else
                    newEvent = cr.insert(Uri.parse("content://calendar/events"), cv);

                if (newEvent != null) {
                    long id = Long.parseLong( newEvent.getLastPathSegment() );
                    ContentValues values = new ContentValues();
                    values.put( "event_id", id );
                    values.put( "method", 1 );
                    values.put( "minutes", 15 ); // 15 minutes
                    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                        cr.insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                    else
                        cr.insert( Uri.parse( "content://calendar/reminders" ), values );

                }
                dialog.cancel();
            }

        });

        builder.create().show();
    }
    cursor.close();
}    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:29:22.903

函数内部不能有**`static`**方法定义。`addToCalendar``onClick`

```
public class ICSCalendarActivity extends Activity implements View.OnClickListener{

Button button1;

int year1;  
int month1;  
int day1;
int ShiftPattern;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button1 = (Button)findViewById(R.id.openButton);     
    button1.setText("open");   
    button1.setOnClickListener(this);

    Bundle extras = getIntent().getExtras(); 

    year1 = extras.getInt("year1"); 
    day1 = extras.getInt("day1"); 
    month1 = extras.getInt("month1");

    ShiftPattern = extras.getInt("ShiftPattern");
}

public void onClick(View v){
      addToCalendar(mContext, mString, mlong,  mlong); // pass the parameters of the addToCalendar method here 
      }

private static void addToCalendar(Context ICSCalendarActivity, final String title, final long dtstart, final long dtend) {
    final ContentResolver cr = ICSCalendarActivity.getContentResolver();
    Cursor cursor ;
    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
        cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    else
        cursor = cr.query(Uri.parse("content://calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
    if ( cursor.moveToFirst() ) {
        final String[] calNames = new String[cursor.getCount()];
        final int[] calIds = new int[cursor.getCount()];
        for (int i = 0; i < calNames.length; i++) {
            calIds[i] = cursor.getInt(0);
            calNames[i] = cursor.getString(1);
            cursor.moveToNext();
        }

        AlertDialog.Builder builder = new AlertDialog.Builder(ICSCalendarActivity);
        builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                ContentValues cv = new ContentValues();
                cv.put("calendar_id", calIds[which]);
                cv.put("title", title);
                cv.put("dtstart", dtstart );
                cv.put("hasAlarm", 1);
                cv.put("dtend", dtend);

                Uri newEvent ;
                if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                    newEvent = cr.insert(Uri.parse("content://com.android.calendar/events"), cv);
                else
                    newEvent = cr.insert(Uri.parse("content://calendar/events"), cv);

                if (newEvent != null) {
                    long id = Long.parseLong( newEvent.getLastPathSegment() );
                    ContentValues values = new ContentValues();
                    values.put( "event_id", id );
                    values.put( "method", 1 );
                    values.put( "minutes", 15 ); // 15 minutes
                    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                        cr.insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                    else
                        cr.insert( Uri.parse( "content://calendar/reminders" ), values );

                }
                dialog.cancel();
            }

        });

        builder.create().show();
    }
    cursor.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:01:24.487

您不能在另一个方法中定义一个方法。在您的代码中，您在 onClick() 方法中定义**了 addToCalendar(** ) 方法。而是在外部定义方法并从 onClick() 方法调用它。

```
public void onClick(View v)
{
     addTocalender(context, string, longVal1,  longVal2);
}

private static void addToCalendar(Context ICSCalendarActivity,
        final String title, final long dtstart, final long dtend)
{
 ....
 ....
} 
```

# c# - 即使正确的 JSON 提要，fullCalendar 事件也没有显示

> ID：12340437
> 
> 赞同：2
> 
> 时间：2012-09-09T15:37:40.837
> 
> 标签：c#, asp.net, json, jquery, fullcalendar

作为一群其他人，我在让我的 JSON 提要事件在日历中呈现时遇到了问题。问题通常是错误的 JSON 格式，但事实并非如此，因为我已经使用 JSONlint 对其进行了验证，并对 Site.Master 中的 JSON 提要进行了硬编码，结果是肯定的。

FireBug 正在正确获取 JSON 响应，但它仍未显示在 fullCalendar 中。我没主意了。

FireBug 响应：[{"id":1,"title":"TESTTITLE","info":"INFOINFOINFO","start":"2012-08-20T12:00:00","end":"2012 -08-20T12:00:00","用户":1}]

JSON.aspx

```
public partial class JSON : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    // Get events from db and add to list.
    DataClassesDataContext db = new DataClassesDataContext();
    List<calevent> eventList = db.calevents.ToList();

    // Select events and return datetime as sortable XML Schema style.
    var events = from ev in eventList
                 select new
                 {
                     id = ev.event_id,
                     title = ev.title,
                     info = ev.description,
                     start = ev.event_start.ToString("s"),
                     end = ev.event_end.ToString("s"),
                     user = ev.user_id
                 };

    // Serialize to JSON string.
    JavaScriptSerializer jss = new JavaScriptSerializer();
    String json = jss.Serialize(events);

    Response.Write(json);
    Response.End();
   }
} 
```

站点主

```
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />    
<link href='fullcalendar/fullcalendar.css' rel='stylesheet' type='text/css' />
<script src='jquery/jquery-1.7.1.min.js' type='text/javascript'></script>
<script src='fullcalendar/fullcalendar.js' type='text/javascript' ></script>
<script type="text/javascript">
     $(document).ready(function () {
         $('#fullcal').fullCalendar({

            eventClick: function() {
                alert('a day has been clicked!');
            },
          events: 'JSON.aspx' 
         })
     });
</script> 
```

几天来我一直在扫描相关问题，但似乎没有一个能解决我的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:55:36.020

试试这个，你必须在aspx文件中有一个fullcalendar可以异步调用的webmethod

```
 $(document).ready(function () {
        $('#fullcal').fullCalendar({
        eventClick: function() {
            alert('a day has been clicked!');
        }, 
            events: function (start, end, callback) {
            $.ajax({
                type: "POST",    //WebMethods will not allow GET
                url: "json.aspx/GetEvents",   //url of a webmethod - example below
                data: "{'userID':'" + $('#<%= hidUserID.ClientID %>').val() + "'}",  //this is what I use to pass who's calendar it is 
                //completely take out 'data:' line if you don't want to pass to webmethod - Important to also change webmethod to not accept any parameters 
                contentType: "application/json; charset=utf-8",  
                dataType: "json",
                success: function (doc) {
                    var events = [];   //javascript event object created here
                    var obj = $.parseJSON(doc.d);  //.net returns json wrapped in "d"
                    $(obj.event).each(function () { //yours is obj.calevent                          
                            events.push({
                            title: $(this).attr('title'),  //your calevent object has identical parameters 'title', 'start', ect, so this will work
                            start: $(this).attr('start'), // will be parsed into DateTime object    
                            end: $(this).attr('end'),
                            id: $(this).attr('id')
                        });
                    });                     
                    callback(events);
                }
            });
        }
       }) 
```

那么这将在 json.aspx

```
[WebMethod(EnableSession = true)]
public static string GetEvents(string userID)
{
    DataClassesDataContext db = new DataClassesDataContext();
List<calevent> eventList = db.calevents.ToList();

// Select events and return datetime as sortable XML Schema style.
var events = from ev in eventList
             select new
             {
                 id = ev.event_id,
                 title = ev.title,
                 info = ev.description,
                 start = ev.event_start.ToString("s"),
                 end = ev.event_end.ToString("s"),
                 user = ev.user_id
             };

// Serialize to JSON string.
JavaScriptSerializer jss = new JavaScriptSerializer();
String json = jss.Serialize(events);
return json;
} 
```

# php - 正则表达式测试人员返回结果但不是我的网站

> ID：12340442
> 
> 赞同：0
> 
> 时间：2012-09-09T15:38:03.750
> 
> 标签：php, regex, preg-match-all

我使用了两个正则表达式测试器，[http://www.pagecolumn.com/tool/pregtest.htm](http://www.pagecolumn.com/tool/pregtest.htm)和[http://www.spaweditor.com/scripts/regex/](http://www.spaweditor.com/scripts/regex/)都返回了我想要的结果，但是当我去的时候'生活'我没有得到任何结果。

这是我要开始工作的脚本：

```
$ptn = "/\\x(..)/";
$str = "\x47\x4c\x4f\x42\x41\x4c\x53";
preg_match_all($ptn, $str, $matches, PREG_PATTERN_ORDER);
print_r($matches); 
```

有人知道我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:51:06.547

PHP 将您的`$str`字符串转换为其实际字符，您实际上是在测试字符串`"GLOBALS"`。

如果您不想解析转义序列，请使用单引号：

```
$ptn = '/\\\x([0-9a-f]{2})/i';
$str = '\x47\x4c\x4f\x42\x41\x4c\x53'; 
```

# mvvm - 如何使用 MVVM 模式从 ViewModel 调用 View 中的函数（与 UIElements 一起使用）

> ID：12340445
> 
> 赞同：2
> 
> 时间：2012-09-09T15:38:09.583
> 
> 标签：mvvm, view, viewmodel, screenshot, mvvm-light

我正在使用 MVVM Light Toolkit，在我的视图中，我有一个函数可以截取屏幕截图并返回该屏幕截图的字节数组。由于截图（使用`UIElement`s）与视图而不是 ViewModel 相关。

```
byte[] TakeScreenShot(Canvas sourceUiElement) 
```

我需要在 ViewModel 中获取函数的返回值，但我想不出正确的方法。

另一方面，如果我想将此功能移动到我的 ViewModel，我需要访问视图中的该元素，但不引用我的 ViewModel 中的视图（可能作为参数或其他东西`Command`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:19:42.180

由于这个问题被标记为 MvvmLight，所以这里有一个 MvvmLight Toolkit 答案。使用所述工具包的`Messenger`类。只需在应用程序的某处定义以下消息类：

```
public class TakeScreenshotMessage : MessageBase { }
public class ScreenshotTakenMessage : GenericMessage<byte[]>
{
    public ScreenshotTakenMessage (byte[]content) : base(content) { }
    public ScreenshotTakenMessage (object sender, byte[]content) : base(sender, content) { }
    public ScreenshotTakenMessage (object sender, object target, byte[]content) : base(sender, target, content) { }
} 
```

在代码隐藏的构造函数中，像这样注册 TakeScreenshotMessage：

```
Messenger.Default.Register<TakeScreenshotMessage>(this, (msg) =>
{
    byte[] bytes = this.TakeScreenShot(someCanvas);
    Messenger.Default.Send(new ScreenshotTakenMessage(bytes));
}); 
```

在您的视图模型中，像这样注册 ScreenshotTakenMessage：

```
Messenger.Default.Register<ScreenshotTakenMessage>(this, (msg) =>
{
    byte[] bytes = msg.Content.
    //do something with your bytes
}); 
```

现在，您可以随时通过在应用程序中的任何位置调用以下命令（即视图模型、视图、助手类等）来截取屏幕截图：

```
Messenger.Default.Send(new TakeScreenshotMessage()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:56:01.683

我会将 TakeScreenShot 与按钮的单击事件或后面代码中的某些内容绑定，例如在 ViewModel 上有一个名为**Snapshot**的属性，在单击事件中，您将获得 byte[] 数组，将其分配给 ViewModel 的属性**Snapshot**，就像后面的代码一样。

```
public void ButtonOnClick(object sender, EventArgs e)
{
    var myViewModel = this.DataContext;
    myViewModel.Snapshot = this.TakeScreenShot(someCanvas);
} 
```

取决于您对 MVVM 的严格程度，有些人可能不同意，我认为您的视图引用您的视图模型是完全有效的，也就是说，无论如何您必须知道要绑定到的上下文，但反之则不然。这就像手动绑定到我一样。

# python - Google Appengine 未使用 DKIM 代码签署电子邮件

> ID：12340456
> 
> 赞同：0
> 
> 时间：2012-09-09T15:39:23.217
> 
> 标签：python, google-app-engine, dkim

我很困惑为什么我的 appengine 应用程序发送的电子邮件没有使用 DKIM 签名。

1.  在 Google Apps 仪表板上启用 DKIM 签名。确认我的域是“正在验证电子邮件”
2.  使用应用程序域中指示的值设置 DNS TXT 记录。已使用 3rd 方验证工具确认 DNS 是正确的。此外，我假设在我的 Google Apps 域中具有用于验证电子邮件的绿灯指示器意味着此记录已通过 Google Apps 验证。
3.  电子邮件发送是由用户通过我的自定义 URL 浏览我的应用程序的点击触发的。自定义 url 与发件人返回地址的域匹配。发件人返回地址是帐户的所有者。

据我所知，这些是电子邮件自动签名的要求。然而，唉，他们没有被签署。任何帮助或想法将不胜感激。谢谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:48:38.390

您多久前创建了 DNS TXT 记录？由于 DKIM 是一项受 DNS 控制的服务，并且 DNS 通常需要几天时间才能在 Internet 上传播，因此您可能需要等待这种情况发生，然后 Google 才会将其识别为有效。

# security - 设计（OAuth2）访问令牌

> ID：12340458
> 
> 赞同：4
> 
> 时间：2012-09-09T15:39:36.027
> 
> 标签：security, oauth, access-token

我们正计划实施 OAuth2 规范并正在审查“访问令牌”实施。看起来规范为实现者提供了很大的自由度，我们正在寻找一些最佳实践：

1.  在访问令牌中放入什么？我们希望在尺寸和实用性之间取得良好的平衡。我意识到这是非常特定于应用程序的，但也许有些东西确实值得拥有。

到目前为止，我们确定了以下领域：

*   用户标识符
*   截止日期
*   版本（以便我们将来可以更改格式）
*   客户端标识符（即请求令牌的应用程序）

一些附加属性（例如密码哈希）将存储在数据库中并在身份验证期间进行查找（使用令牌中的字段作为“密钥”）。

1.  如何保护它？

我们倾向于安全地签署访问令牌 (HMAC)，以便我们知道它是否被篡改。然后每个人都可以读取令牌中的字段。

另一种方法是加密（AES）整个事物并使其对用户完全不透明。这使它变得更大（以字节计）。看起来 FB 现在正在使用加密令牌 (http://developers.facebook.com/blog/post/572/)

关于行业最佳实践的任何建议？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:12:19.403

只要您可以将您发出的访问令牌连同到期日期等映射回后端的用户，那么它的生成方式实际上并不重要（除了它不应该是可预测的）。规范没有说明实现细节。

令牌可以是唯一生成的字符串，映射到后端的用户状态，或者您可以将用户信息和到期日期等加密到令牌本身，在这种情况下考虑 SWT。SWT 格式准确定义了您所描述的内容。它包含有关用户、clientId、范围等的明文信息，但还提供了一个加密密钥以使其防篡改。使用共享密钥，即使密钥是在另一台服务器上或由另一方生成的，也可以验证密钥。它们往往会变得相当大，因此不适合传入查询字符串。

有基于云的 STS 解决方案可以为您生成令牌。例如，Azure ACS 可以通过 OAuth2 端点生成 SWT 令牌，并为您管理与刷新令牌、到期日期和授权授予相关的所有状态。您在使用它时节省的精力，您可能会在弄清楚如何与它集成时松懈，但它非常整洁。

# c - C 将内存部件移动到位

> ID：12340460
> 
> 赞同：16
> 
> 时间：2012-09-09T15:39:45.687
> 
> 标签：c, algorithm, memory, language-agnostic, permutation

我正在实现几个数据结构，我想使用的一个原语如下：我有一个内存块 A[N]（它有一个可变长度，但我的例子是 100），在这个块内，有一个较小的部分我想在不使用任何额外内存的情况下移动长度为 K（比如说 30）的 C。

额外的困难是，A“换行”，即 C 可以从 A[80] 开始，然后 C 的前 20 个元素是元素 A[80..100]，最后 10 个元素是元素 A[ 0..10]。此外，目标范围也可以以任何可能的方式与C“环绕”和重叠。此外，我不想使用超过恒定数量的额外内存，一切都应该发生。此外，A 中既不在目标范围内也不在源范围内的部分可能包含一些重要的东西，因此也不能使用它。因此，一种情况如下：

A 看起来像这样：

|456789ABCDEF0123456789AB|-----|0123|

并且应该转化为：

|89AB|-----|0123456789ABCDEF01234567|

只是将它委托给一个库或使用库中的另一个数据结构不是一个选择，我想自己理解这个问题。乍一看，我认为这可能不是一件小事，但只要你区分几个案例，就清楚了，但现在我遇到了严重的麻烦。当然，如果它们不重叠或不换行，也有一些微不足道的情况，但至少如果两者同时发生，它就会变得混乱。您可以从一个空闲位置开始并移动属于该位置的部分，但随后您在其他位置创建另一个空闲部分，并且很难跟踪您仍然可以使用哪些部分。

也许我完全遗漏了一些东西，但即使是我的特殊情况，如果目标范围没有换行，也有近 100 行（其中一半是断言和注释），我可以更新它，以便它也可以处理一般情况，并添加一些额外的索引计算，但如果有人有一个优雅而简短的解决方案，我将不胜感激。直觉上我认为这应该是微不足道的，但我还没有看到最好的解决方案。

注意：有趣的情况当然是，如果 C 几乎和 A 一样大。如果 |C| < N/2，这是微不足道的。

编辑：使用超过恒定数量的附加标志/索引算作附加内存，如果可能的话，我想避免这种情况。

编辑：有些人想看我的代码。我的问题相当抽象，所以我不想发布它，但也许有人看到如何改进它。这很糟糕，它只适用于目标从头开始（但是，可以很容易地改变）并且非常长的情况，但是它在 O(n) 中没有额外内存的情况下完成了这项工作。

```
#include <stddef.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>

void move_part(int* A, size_t N, size_t target, size_t source, size_t size, int show_steps)
{
  assert(source + size <= N);
  assert(target + size <= N);
  if (show_steps) {
    printf("Moving size %d from %d to %d.\n", size, source, target);
  }
  memmove(A + target, A + source, size * sizeof(int));
}

void swap_parts(int* A, size_t N, size_t first_begin, size_t second_begin, size_t size, int show_steps)
{
  if (show_steps) {
    printf("Swapping size %d at %d and %d.\n", size, first_begin, second_begin);
  }
  assert(first_begin + size <= N);
  assert(second_begin + size <= N);
  size_t i;
  for (i = 0; i < size; ++i) {
    int x = A[first_begin + i];
    A[first_begin + i] = A[second_begin + i];
    A[second_begin + i] = x;
  }
}

void move_to_beginning(int* A, size_t N, size_t begin, size_t size, int show_steps)
{
  assert(begin <= N);
  assert(size <= N);
  // Denotes the start of our "working range". Increases during
  // the algorithm and becomes N
  size_t part_start = 0;
  // Note: Keeping the size is crucial since begin == end could
  // mean that the range is empty or full.
  size_t end = (begin + size) % N;
  while (part_start != N) {
    size_t i;
    if (show_steps) {
      for (i = 0; i < N; ++i) {
    printf("%d ", A[i]);
      }
      printf("\n");
      printf("part_start %d  begin %d  end %d  size %d\n", part_start, begin, end, size);
    }
    // loop invariants
    assert(part_start < N);
    // The two pointers are in our range
    assert(part_start <= begin && begin <= N);
    assert(part_start <= end && end <= N);
    // size is valid (wrapped case, non-empty, non-full case)
    assert(begin <= end || (N - begin) + (end - part_start) == size);
    // size is valid (non wrapped case, non-empty, non-full case)
    assert(begin >= end || end - begin == size);
    // size is valid (working range is full or empty case)
    assert(begin != end || size == 0 || part_start + size == N);
    if (size == 0 || begin == N || begin == part_start) {
      // ##|1234|# -> 1234### ||
      if (show_steps) {
    printf("Case 1:\nTerminating\n");
      }
      // #||# -> ## ||
      // 12|##| -> 12## ||
      // |12|## -> 12## ||
      break;
      /* Not necessary any more, but would be the correct transformation:
     part_start = N;
     begin = N;
     end = N;
     size = 0;*/
    } else if (end == part_start) {
      // |##|123 -> ##|123|
      if (show_steps) {
    printf("Case 2:\n");
    printf("Setting end to %d.\n", N);
      }
      end = N;
    } else if (begin < end) {
      // ##|1234|# -> 1234### ||
      if (show_steps) {
    printf("Case 3:\n");
      }
      move_part(A, N, part_start, begin, size, show_steps);
      break;
      /* Not necessary any more, but would be the correct transformation:
     part_start = N;
     begin = N;
     end = N;
     size = 0;*/
    } else {
      size_t end_size = end - part_start;
      size_t begin_size = N - begin;
      assert(begin_size + end_size == size);
      if (end_size >= begin_size) {
    // 345|#|12 -> 12 5|#|34
    if (show_steps) {
      printf("Case 4:\n");
    }
    swap_parts(A, N, part_start, begin, begin_size, show_steps);
    assert(begin_size > 0); // Necessary for progress
    part_start += begin_size;
    size = end_size;
    // begin, end remain unchanged
      } else if (begin - part_start <= begin_size) {
    // 56|#|1234 -> 123 56|#|4
    size_t size_moved = begin - part_start;
    assert(size_moved >= end_size); // else the next step would be more efficient
    if (show_steps) {
      printf("Case 5\n");
    }
    swap_parts(A, N, part_start, begin, end_size, show_steps);
    move_part(A, N, end, begin + end_size, begin - end, show_steps);
    assert(end_size + (begin - end) == size_moved);
    size -= size_moved;
    part_start = begin;
    begin += size_moved;
    end += size_moved;
      } else if (end_size <= begin_size) {
    // 45|##|123 -> 123 #|45|# 
    if (show_steps) {
      printf("Case 6\n");
    }
    swap_parts(A, N, part_start, begin, end_size, show_steps);
    move_part(A, N, end, begin + end_size, begin_size - end_size, show_steps);
    part_start += begin_size;
    size = end_size;
    end = begin + end_size;
    // begin remains unchanged
      } else {
    // No case applies, this should never happen
    assert(0);
      }
    }
  }
}

int main()
{
  int N = 20;
  int A[20];
  size_t size = 17;
  size_t begin = 15;
  size_t i;
  for (i = 0; i < size; ++i) {
    A[(begin + i) % N] = i;
  }
  move_to_beginning(A, N, begin, size, 0);
  for (i = 0; i < size; ++i) {
    printf("%d ", A[i]);
  }
  printf("\n");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:23:57.493

## 情况1：源最多与目标在单个连续区域内重叠，该区域小于整个数组

R.的第一个答案中给出了这种情况的详细解释。我在这里没有什么要补充的。

## 情况 2：源与目标在两个连续区域中重叠，或者我们旋转整个数组

最简单的方法是始终旋转整个阵列。这也会从目标范围中移动一些不需要的元素，但由于在这种情况下`K > N/2`，这不会使操作数量超过必要的两倍。

要旋转数组，请使用循环领导算法：获取数组的第一个元素（A[0]）并将其复制到目标位置；该位置的先前内容再次移动到其正确位置；继续，直到某个元素移动到起始位置。

继续对下一个起始位置应用循环领导算法：A[1], A[2], ..., A[GCD(N,d) - 1]，其中`d`是源和目标之间的距离。

步骤后`GCD(N,d)`，所有元素都在适当的位置。这有效，因为：

1.  位置 0, 1, ..., GCD(N,d) - 1 属于不同的循环 - 因为所有这些数字都是不同的（模数`GCD(N,d)`）。
2.  每个周期都有长度`N / GCD(N,d)`- 因为`d / GCD(N,d)`和`N / GCD(N,d)`是相对素数。

* * *

这个算法很简单，每个元素只移动一次。它可能是线程安全的（如果我们跳过写入步骤，除非在目标范围内）。其他与多线程相关的优势是每个元素可能只有两个值 - “移动”之前的值和“移动”之后的值（不可能有临时中间值）。

但它并不总是具有最佳性能。如果`element_size * GCD(N,d)`与缓存行大小相当，我们可能会获取所有`GCD(N,d)`起始位置并将它们一起处理。如果这个值太大，我们可以将起始位置分成几个连续的段，以将空间需求降低到 O(1)。

问题是何时`element_size * GCD(N,d)`远小于缓存线大小。在这种情况下，我们会遇到很多缓存未命中并且性能下降。gusbro 用一些“交换”区域（大小`d`）临时交换数组片段的想法为这种情况提出了更有效的算法。如果我们使用适合缓存的“交换”区域并使用 memcpy 复制非重叠区域，它可能会得到更多优化。

* * *

还有一种算法。它不会覆盖不在目标范围内的元素。它是缓存友好的。唯一的缺点是：它将每个元素移动两次。

这个想法是在相反的方向移动两个指针并交换指向的元素。重叠区域没有问题，因为重叠区域只是颠倒了。在该算法的第一次通过后，我们将所有源元素移动到目标范围，但顺序相反。所以第二遍应该反转目标范围：

```
for (d = dst_start, s = src_end - 1;
     d != dst_end;
     d = (d + 1) % N, s = (s + N - 1) % N)
  swap(s, d);

for (d = dst_start, s = dst_end - 1;
     d != dst_end;
     d = (d + 1) % N, s = (s + N - 1) % N)
  swap(s, d); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T02:45:16.663

这还不是一个完整的答案，但我认为这可能是正确的想法。

从源范围的元素开始，并考虑将映射到的目标位置。该位置要么在源范围之内，要么在它之外。如果它在源范围之外，您只需复制，就可以完成该元素。另一方面，如果它映射到源范围内的目标位置，您可以复制它，但您必须保存要覆盖的旧值并使用源的这个新元素迭代地执行上述过程。

本质上，您是在排列的循环上进行操作。

问题是跟踪你已经完成了什么以及还有什么要做。如果没有 O(n) 工作空间，是否有办法做到这一点并不是很明显。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T21:20:20.250

此解决方案是 O(N)，并使用已处理的源位置作为暂存空间，以便在范围重叠时使用。它将交换源和目标的内容直到到达目标的开始点，然后它将从之前生成的暂存空间继续复制。第二个循环在使用暂存空间的每个字符后恢复被破坏的区域。

```
move(A,N, src_idx, dst_idx, len)
{
  first_dst_idx=dst_idx;
  first_src_idx=src_idx;
  mlen=0;
  while(src_idx != first_dst_idx && len > 0)
  {
    temp = A[dst_idx];
    A[dst_idx] = A[src_idx];
    A[src_idx] = temp;
    src_idx=(src_idx+1) mod N;
    dst_idx=(dst_idx+1) mod N;
    len--; mlen++;
  }
  src_idx = first_src_idx;
  while(len > 0)
  {
    A[dst_idx] = A[src_idx];
    A[src_idx] = A[first_dst_idx];
    src_idx=(src_idx+1) mod N;
    dst_idx=(dst_idx+1) mod N; 
    first_dst_idx=(first_dst_idx+1) mod N;
    len--;
  }
  while(mlen > 0)
  { // restore reamining scratch space
    A[src_idx] = A[first_dst_idx];
    src_idx=(src_idx+1) mod N;
    first_dst_idx=(first_dst_idx+1) mod N;
    mlen--;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T16:32:27.877

** 这仅在 C 的长度 <= A 长度的一半时才有效。但我将它留在这里希望修复它。**

** 此解决方案不会保留目标范围的任何内容，我认为这种行为与原始问题的措辞相匹配 **

```
;; A function that wraps an out-of-bounds index to its proper location.
mod'(i):
  return (i + length(A)) mod length(A)

;; shifts the range A[i]..A[i + n] to A[i - delta]..A[i - delta + n]
move_backward (i,delta,n):
   A[mod'(i - delta)] = A[mod'(i)]
   if (n > 0):
     move_backward (i + 1, delta, n - 1)

;; shifts the range A[i - n]..A[i] to A[i - n + delta]..A[i + delta]
move_forward (i, delta, n):
   A[mod'(i + delta)] = A[mod'(i)]
   if (n > 0):
      move_forward (i - 1, delta, n - 1)

shift_range (source_first, source_last, target_first):
   n = mod'(source_last - source_first)
   delta = mod'(target_first - source_first)

   if (delta > length(A) / 2):
       move_backward (source_first, length(A) - delta, n)
   else
       move_forward (source_last, delta, n) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T18:35:07.333

好的，如果它像`memmove`但有一个循环缓冲区，这是这样做的方法：

*   情况 1：源/目标不重叠。只需使用`memcpy`，可能会根据需要在缓冲区包装的地方将其分解。

*   情况 2：源/目标相等。没做什么。

*   情况 3：源的起点严格位于 dest 区域内。做一个简单的正向复制循环，`for (i=0; i<k; i++) A[(dest+i)%N] = A[(src+i)%N];`

*   情况 4：dest 的起点严格位于源区域内。做一个简单的向后复制循环，`for (i=K; i; i--) A[(dest+i-1)%N] = A[(src+i-1)%N];`

**编辑：**此答案仅在 K 最多为 N/2 时有效；否则可能 source 和 dest 都在彼此内部开始。我没有立即修复，但可以选择解决问题的起始偏移和方向......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T17:27:29.853

这是一个 O(n ² ) 算法非常简单 - 只需将整个缓冲区旋转一个字节，然后按照您想要的步骤重复多次：

```
void rotateBuffer(char *buffer, int size, int steps)
{
    char tmp;
    int i;

    for (i = 0; i < steps; i++)
    {
        tmp = buffer[size - 1];
        memmove(buffer + 1, buffer, size - 1);
        buffer[0] = tmp;
    }
} 
```

它不会很快，但它可以完成工作，并且只有持续的临时存储。

编辑：

如果您只需要相对于静态底层“背景”旋转缓冲区的子部分，如下面的评论中所述，您可以执行以下操作：

```
void rotateBuffer(int count, int start, int length)
{
    int i;
    int j;
    int index;

    // rotate 'count' bytes
    for (i = 0; i < count; i++)
    {
        // rotate by a single byte
        for (j = length - 1; j >= 0; j--)
        {
            index = start + i + j;
            buf[(index + 1) % SIZE] = buf[index % SIZE];
        }
    }
} 
```

我认为如果您需要旋转整个缓冲区可能会出现问题，但在这种情况下，您可以回退到上面的代码。

# algorithm - 连续数的 sum 属性

> ID：12340462
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:39:50.720
> 
> 标签：algorithm, math, sum

假设我们有一个像 [6,5,4,7,3] 这样的数字列表。我们如何判断数组是否包含连续的数字？一种方法当然是对它们进行排序，或者我们可以找到最小值和最大值。但是我们可以根据元素的总和来确定吗？例如，在上面的示例中，它是 25。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:20:46.690

元素的总和本身是不够的。

相反，您可以检查：

*   所有元素都是独一无二的。

或者：

*   最小值和最大值之间的差异是正确的

或者

*   所有元素的总和是正确的。

### 方法一

对列表进行排序并检查第一个元素和最后一个元素。

通常这是 O(n log(n))，但如果您的数据集有限，您可以使用[计数排序](http://en.wikipedia.org/wiki/Counting_sort)或[基数排序在 O(n) 时间内排序](http://en.wikipedia.org/wiki/Radix_sort)。

### 方法二

传递数据以获得最高和最低元素。

当您通过时，将每个元素添加到哈希表中，并查看该元素现在是否已添加两次。这或多或少是 O(n)。

### 方法 3

为了节省存储空间（哈希表），请使用近似方法。

传递数据以获得最高和最低元素。

正如您所做的那样，实施一种算法，该算法将以高（读取用户定义）概率确定每个元素是不同的。存在许多这样的算法，并且正在数据挖掘中使用。这是描述不同方法的[论文的链接。](http://www.pittsburgh.intel-research.net/people/gibbons/talks-surveys/Distinct-Values-Estimation-over-Data-Streams-PBGibbons.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:01:45.547

如果数组的最大值和最小值之间的差等于 n-1，则数组中的数字将是连续的，前提是数字是唯一的（其中 n 是数组的大小）。当然，最小和最大数量可以在 O(n) 中计算。

# javascript - 如何创建一个在鼠标悬停时扩展更多信息的 div（带有背景图像？

> ID：12340465
> 
> 赞同：1
> 
> 时间：2012-09-09T15:40:34.177
> 
> 标签：javascript, css, html, jquery-animate, expand

当有人将鼠标悬停在第一段上时，我想创建一个扩展为两段的 div。第一段是介绍。第二段将解释更多，可能包含指向另一个页面的链接。我希望隐藏第二段，直到人们将鼠标悬停在介绍性段落上。我有一个看起来像便利贴的背景图片。

我的尝试在这里：http: [//jsfiddle.net/sAW2c/52/](http://jsfiddle.net/sAW2c/52/)。第二段没有隐藏，即使我限制了 div 的大小并且 P 上的填充也不起作用。有人可以指引我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:44:27.513

添加`overflow: hidden;`到您的`#div1`似乎可以解决问题：[little link](http://jsfiddle.net/glee/pdcvz/)。

**注意：**下次请使用 jsFiddle 的 CSS 选项卡设置样式。内联样式通常不是很可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:44:30.013

添加隐藏到 div 的溢出应该会有所帮助。查看这个**[jsFiddle 示例](http://jsfiddle.net/j08691/sAW2c/53/)**。您应该在这里了解基本概念，但您需要调整背景和文本填充。

**jQuery**

```
$("#div1").hover(function() {
    $(this).animate({
        height: '300px'
    });
}, function() {
    $(this).animate({
        height: '100px'
    });
});​ 
```

**HTML**

```
<div id="div1" style="height:120px; width:206px;overflow:hidden;background: url('http://quiltersbee.com/images/white-postit.png') no-repeat 0 0; ">
    <p style="padding-left: 8;padding-right: 8;">This is the paragraph that I would like to be only 190px wide and placed on the background image.  It should be left-aligned. </p><br />
    <p style="padding-left: 8;padding-right: 8;">This is the paragraph I would like to hide until someone mousesovers the above paragraph.  Both paragraphs should be indented so they don't overlap the shading on the background image when this paragraph shows.  This paragraph may include a link.</p>
</div>​ 
```

# python - 如何将 AppEngine 云存储备份加载到本地开发服务器？

> ID：12340468
> 
> 赞同：3
> 
> 时间：2012-09-09T15:41:48.987
> 
> 标签：python, google-app-engine

我正在试验应用程序的 Google 云存储备份功能。

使用 gsutil 下载备份文件后，如何将它们加载到本地开发服务器中？

是否有可用于这些格式的解析器（例如，协议缓冲区）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T15:21:46.523

备份以[leveldb 记录格式](http://leveldb.googlecode.com/svn/trunk/doc/log_format.txt)存储，您应该能够读取然后使用：

*   [google.api.files.records.RecordsReader](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/api/files/records.py&l=273)
*   [ext.mapreduce.input_readers.RecordReader](https://developers.google.com/appengine/docs/python/dataprocessing/readers_writers#RecordsReader)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T18:48:08.653

[Greg Bayer 在一篇博](http://gbayer.com/big-data/app-engine-datastore-how-to-efficiently-export-your-data/)文中写了一些 Python 代码来展示如何做到这一点：

```
# Make sure App Engine SDK is available
import sys
sys.path.append('/usr/local/google_appengine')
from google.appengine.api.files import records
from google.appengine.datastore import entity_pb
from google.appengine.api import datastore

raw = open('path_to_datastore_export_file', 'r')
reader = records.RecordsReader(raw)
for record in reader:
  entity_proto = entity_pb.EntityProto(contents=record)
  entity = datastore.Entity.FromPb(entity_proto)
  #Entity is available as a dictionary! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-12T23:42:25.867

对于那些使用 Windows 的人，将 open 行更改为： raw = open('path_to_datastore_export_file', 'rb')

该文件必须以二进制模式打开！

# c++ - 将容器与 GoogleTest 进行比较

> ID：12340470
> 
> 赞同：11
> 
> 时间：2012-09-09T15:42:03.630
> 
> 标签：c++, googletest, googlemock

我正在尝试进行比较两个向量的有效 googletest 测试。为此，我使用 google mock 及其[匹配器](https://github.com/google/googletest/blob/master/docs/gmock_cheat_sheet.md#matchers-matcherlist)，但我收到 C3861 错误，提示“未找到 ContainerEq 标识符”，并且 C2512 提示“testing::AssertionResult 没有可用的正确默认构造函数”。为什么？

```
TEST(MyTestSuite, MyTest)
{
    std::vector<int> test1;
    std::vector<int> test2;

    ...

    EXPECT_THAT(test1, ContainerEq(test2));
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-09T15:56:44.893

您只是缺少 gtest 的`testing`命名空间限定符：

```
EXPECT_THAT(test1, ::testing::ContainerEq(test2)); 
```

# select - a中的换行符页面宽度减小时的菜单 我在响应式页面上有一个选择菜单，该菜单设置为可变宽度（% 值）。Everything looks fine until i decrease the page size, when the default value of the select menu (ie when it's not focussed or clicked on) becomes squashed in the container and overflows, causing par

ID：12340473

赞同：0

时间：2012-09-09T15:42:08.660

标签：select, drop-down-menu, menu, line-breaks

# facebook - ID/albums/ 不返回用户 ID

> ID：12340477
> 
> 赞同：0
> 
> 时间：2012-09-09T15:42:31.543
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook Graph API 来获取公共相册的列表。我得到了我的访问令牌，一切正常，`me/albums`但是当我使用另一个用户的 ID 时，它不起作用。但是，我可以使用浏览器上的链接轻松访问用户的相册`photos`。我在我的应用程序中同时拥有`user_photos`和`friends_photos`权限。

我究竟做错了什么？

更新：我发现了几个与我的问题相同的问题。但是他们的解决方案对我不起作用：

[Facebook Graph API 返回 false](https://stackoverflow.com/questions/5011027/facebook-graph-api-returns-false) [Facebook Graph API 为现有和公共事件返回 false](https://stackoverflow.com/questions/8181019/facebook-graph-api-returns-false-for-existing-and-public-event)

# java - Android 从编辑文本中获取整数？

> ID：12340482
> 
> 赞同：2
> 
> 时间：2012-09-09T15:42:46.990
> 
> 标签：java, android, string, android-edittext, int

我正在尝试从设置为 inputType="number" 的编辑文本中获取一个 int，然后将其输出（稍后我将对其进行处理）我做不到，这是我被告知要尝试的代码但它不起作用

```
Button go;
EditText num;
TextView OP, ST;
String OPS;
int oer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initalize();
    go.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            int myNum = 0;

            OPS = num.getText().toString();

            try {
                myNum = Integer.parseInt(OPS);
            } catch(NumberFormatException nfe) {
                System.out.println("Could not parse " + nfe);
            }
            OP.setText(myNum);
        } 
```

在我运行它之后，它强制关闭。这是日志猫：

```
09-09 16:53:00.400: W/ResourceType(20145): No package identifier when getting value for resource number 0x00000008
09-09 16:53:00.400: D/AndroidRuntime(20145): Shutting down VM
09-09 16:53:00.400: W/dalvikvm(20145): threadid=1: thread exiting with uncaught exception (group=0x40a411f8)
09-09 16:53:00.561: E/AndroidRuntime(20145): FATAL EXCEPTION: main
09-09 16:53:00.561: E/AndroidRuntime(20145): android.content.res.Resources$NotFoundException: String resource ID #0x8
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.content.res.Resources.getText(Resources.java:248)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.widget.TextView.setText(TextView.java:3473)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at com.Nutty.studios.randnumgen.free.RandomNumberGenActivity$1.onClick(RandomNumberGenActivity.java:42)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.view.View.performClick(View.java:3511)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.view.View$PerformClick.run(View.java:14105)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.os.Handler.handleCallback(Handler.java:605)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.os.Looper.loop(Looper.java:137)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at android.app.ActivityThread.main(ActivityThread.java:4575)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at java.lang.reflect.Method.invokeNative(Native Method)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at java.lang.reflect.Method.invoke(Method.java:511)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
09-09 16:53:00.561: E/AndroidRuntime(20145):    at dalvik.system.NativeStart.main(Native Method) 
```

如果我尝试输出字符串而不是整数，它工作正常吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T15:49:15.937

**1.**你永远不会从 EditText**得到一个** ，它提供**给你正确的软键盘...**`int``InputType`

 ****2.**您可以使用此**将**文本从 EditText 转换为整数..

`int i = Integer.parseInt(editText.getText().toString());`

此外，您还`setText`希望您为它提供一个`String`....所以您需要这样做...

`OP.setText(myNum+"");`

`toString()`仅适用于`Object`类型，并且正如您声明`myNum`的那样`int`，这是一种**原始类型**....您需要使用`+ ""`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T15:51:47.710

**`"inputType = number"`**并不意味着 EditText 中的输入将采用整数形式。它只是暗示在输入值时将向用户显示的软键盘类型以及 EditText 中的有效条目，即 EditText只`inputType=number`需要**数字**而不是其他任何内容，但这些数字将采用**字符串格式**[ `String number = "12345"`]并且您需要手动从字符串中获取整数值。

**将字符串输入转换为整数：**

**`int myNum = Integer.valueOf(editText.getText().toString()).intValue();`**

* * *

此外，您的输出 TextView 中只能有一个字符串参数，`setText()`并且您正在尝试传递一个整数。**`TextView.setText("STRING")`**是在任何 TextView 中显示输出的格式，如果您尝试在 TextView 中显示整数，则需要先将其转换为字符串。

**将整数转换为字符串输出：** **`OP.setText(Integer.toString(myNum);`**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T16:03:54.403

OP.setText(myNum) 导致崩溃。

这是由于 setText(int value) 的性质，它将查找字符串资源而不是设置整数的文字值。

相反，您需要做的是：

`OP.setText(String.valueOf(myNum))`

其他一切都很好。**

# php - 使用 jQuery ajax 和 PHP 复制到 mySQL 的条目

> ID：12340484
> 
> 赞同：0
> 
> 时间：2012-09-09T15:42:51.477
> 
> 标签：php, mysql, jquery, post, twitter-bootstrap

我正在使用 jQuery（版本 1.8.1）和 PHP（版本 5.3）提交表单，将条目添加到 mySQL 数据库中，发生的情况是第一次提交时一切都很好，但是对于每次后续提交而没有页面刷新它添加一个额外的条目。

此外，我还在 UI 中使用 Bootstrap（版本 2.1.1）和来自 Jasny 的用于 Bootstrap（版本 j1a）的上传小部件。我尚未将上传小部件连接到处理或提交，因为我在实施时检测到重复问题。

请注意，这是一个概念验证系统，因此代码很粗糙，因为在项目得到确认之前我不会投资清理它。因此，您会注意到一些内联的 mySQL 查询，我知道这不是最好的方法，但是它可以用于演示，稍后会进行清理。同样作为 POC 系统，它目前位于内部服务器上，我可以共享代码，但不幸的是目前无法显示示例站点。

现在回到问题，例如，“公司 1”的第一个帖子为“公司 1”添加了 1 条记录，“公司 2”的第二条记录为“公司 2”添加了 2 条记录，第三条记录为“公司 3”为“公司 3”添加 3 条记录，依此类推。如果我以任何方式（刷新或新请求）重新加载表单页面，问题将从第一次提交重新开始。

我正在使用 jQuery`serialize`将`ajax`数据发布到 PHP 处理器。我已经记录了处理器接收到的所有帖子，并且我看到处理器正在从表单中接收多条记录，我认为这可能是由`foreach`PHP 中的循环引起的，但事实并非如此。

我已经删除了 jQuery 函数，它每次都能完美运行，在正常的 PHP 提交上没有任何重复。我已经通过 jQuery 而不是手动处理了条目，`serialize`但是由于我仍然`serialize`在该数组上使用了一个通过 PHP 的动态数组，因此产生了如上所述的重复项。我已经搜索了这个问题好几天，但找不到任何明确的解决问题的方法，所有看起来相关的博客和论坛上的建议都不起作用，我尝试了大约 10-15 种不同的选项。

所有这一切的结合让我相信问题出在 jQuery`serialize`和/或`ajax`函数上，但现在每次看这段代码时，我的眼睛都变得呆滞。

我也在考虑将表单放在一个外部文件中并通过 ajax 重新加载它或者清理表单，通过 jQuery 为每个所需的新条目将其设置回默认值，但是我不相信这两种方法都可以解决问题。

非常感谢任何帮助，在此先感谢您的帮助！

**查询代码**

```
<script>
    $(document).ready(function() {
        $('.fileupload').fileupload('name:logo');
        $('.help-inline').hide();
        $("#btn_process").click(function() {
            $('form').submit(function() {
            $('.help-inline').hide();  
            var company_name = $("#company_name").val();  
            if (company_name === "") { 
                $("div#name_group").addClass("error");
                $("span#name_error").show();   
                return false;  
            } 
            var dataString = $('form').serialize();
            $.ajax({
                type: "POST",
                url: "inc/addcompany.php",
                data: dataString,
                success: function(html) {
                    if(html === 'success') 
                    {
                        $('#message')
                        .addClass("label label-success")
                        .css("margin-bottom","20px")
                        .html("<h3>Login successful</h3><p>Company added</p>")
                        .slideDown(1500, function() {});
                    }
                    else 
                    {
                        $('#message')
                        .addClass("label label-important")
                        .css("margin-bottom","20px")
                        .html("<h3>Error</h3><p>There was an error, please check the information and try again</p>")
                        .slideDown(1500, function() {});
                        $("div#name_error").addClass("error"); 
                        $("span#name_error").show(); 
                        $("div#type_error").addClass("error");
                        $("span#type_error").show();   
                        return false;  
                    }
                }
            });
            return false;
        }); 
    });
});
</script> 
```

**HTML 标记**

```
<form class="form-horizontal" id="add_company" method="POST" action="">  
                <fieldset>
                        <div id="message"></div>
                        <div id="name_group" class="control-group">
                            <label class="control-label" for="company_name">Company name </label>
                            <div class="controls">
                                <input type="text" id="company_name" name="company_name" />
                                <span id="name_error" class="help-inline">This needs to be more than 3 characters</span>
                            </div>
                        </div>
                        <div id="type_group" class="control-group">
                            <label class="control-label">Company type </label>
                            <div class="controls">
                            <?
                            $sql = "SELECT description,id FROM types ORDER BY description";
                            $qry = mysql_query($sql) or die("ERROR: could not get company types => ".mysql_error());
                            while($company_type = mysql_fetch_array($qry)) { 
                                echo '
                                <label class="checkbox inline"><input type="checkbox" name="type[]" value="'.$company_type['id'].'" /> '.$company_type['description'].' </label>';
                            }
                            ?>
                            <span id="type_error" class="help-inline">Please select a minimum of 1 type</span>
                            </div>
                        </div>
                        <div id="website_group" class="control-group">
                            <label class="control-label" for="website">Website </label>
                            <div class="controls">
                                <input type="text" id="website" name="website" placeholder="www.something.com" />
                            </div>
                        </div>
                        <div id="logo_group" class="control-group">
                            <label class="control-label">Logo </label>
                            <div class="controls">
                                <div class="fileupload fileupload-new" data-provides="fileupload">
                                <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;"><img src="/img/50x50.png" /></div>
                                <div class="fileupload-preview fileupload-exists thumbnail" style="width: 50px; height: 50px;"></div>
                                <span class="btn btn-file"><span class="fileupload-new">Select image</span>
                                <span class="fileupload-exists">Change</span>
                                <input type="file" /></span>
                                <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                            </div>
                        </div>
                </fieldset>
                <input type="hidden" name="action" value="add_company" />
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" name="btn_process" id="btn_process">Save changes</button>
  </form> 
```

**PHP 处理器**

```
$error = false;
$error_company_name = false;
$error_type = false;
$error_website = false;
$company_name = $_REQUEST['company_name'];
$type = $_REQUEST['type'];
$website = $_REQUEST['website'];
$logo = $_REQUEST['logo'];

if(empty($company_name)) {
    $error = true;
    $error_company_name = true;
}
include_once('db.php');
$sql = "SELECT description,id FROM company_types";
$qry = mysql_query($sql) or die("ERROR: could not get company types => ".mysql_error());
$type_count = 0;
while($array = mysql_fetch_array($qry)) {
    $type_count = $type_count+1;
}
if($type_count == 0) {
    $error = true;
    $error_type = true;
}
$ic = 0;
foreach($_REQUEST['type'] as $item) {
    $ic = $ic+1;
}
if($ic == 0) {
    $error = true;
    $error_type = true;
}
if(isset($website) && $website != ' ') {
    $url = 'http://'.$website;
    if(!filter_var($url, FILTER_VALIDATE_URL)) {
        $error = true;
        $error_website = true;
    }
}
if($error == false) {
    $sql = "INSERT INTO company_list (name,website,logo) VALUES('$company_name','$website','$logo')";
    $qry = mysql_query($sql) or die ("ERROR: could not add company => ".mysql_error());
    $company_id = mysql_insert_id($link);
    if($company_id == '' || $company_id == null || empty($company_id)) {
        echo 'fail';
        exit;
    } 
    foreach($_REQUEST['type'] as $company_type) {
        $sql = "INSERT INTO companies_types (companies_id,type_id) VALUES('$company_id','$company_type')";
        $qry = mysql_query($sql) or die("ERROR: could not link company type: => ".mysql_error());
    }
    echo 'success';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:06:45.217

`$('form').unbind('submit');`在这一行的正上方添加： `$('form').submit(function()`.

我在这里找到了这个解决方案：[https ://stackoverflow.com/a/668354/300575](https://stackoverflow.com/a/668354/300575)

注意：我通过复制您的代码并在我的服务器上对其进行测试来验证这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:20:05.880

它可能是一个补丁，不知道它是否会起作用，但是有一个 jQuery`ajaxStop`可以在成功回调时调用。

# c# - asp.net c# 验证

> ID：12340485
> 
> 赞同：0
> 
> 时间：2012-09-09T15:43:03.230
> 
> 标签：c#, asp.net, validation

我正在尝试创建一个使用单选按钮的简单表单。我将单选按钮设置为 AutoPostBack = True，这样如果单选按钮为真/假，则显示或隐藏子面板。单选按钮是必填字段。我还有一个隐藏的文本框，插入了所选单选按钮的值，这个文本框是我验证的内容（是否为空）。

**问题1：**

这一直有效，直到您提交并且验证失败。验证消息显示，然后当您单击 AutoPostBack = True 的单选按钮之一时，所有验证都会消失。我可以通过将 Page.Validate() 添加到单击单选按钮时运行的方法来解决此问题。但是，我不希望 Page.Validate() 运行，除非页面已经显示验证错误（所以它不会重新验证，除非表单已经提交并且验证失败）。

就目前而言，在提交表单并且验证失败之前：当您单击任何单选按钮问题时，所有其他需要验证的问题都会显示验证错误。我只是想克服 AutoPostBack，它正在清除单击提交时显示的所有验证消息。

**问题2：**

如果问题未通过验证，我希望能够更改问题的颜色。我添加了 javascript 来覆盖默认的 .net 设置。我得到了这个工作，但只有当你点击提交按钮而不是在 RadioButton AutoPostBack 之后。

目前，当您单击提交时，所有必填问题都会变为红色，并且还会显示所需的验证消息。但是，如果您单击单选按钮开始修复验证错误，则在 AutoPostBack 上，所有现在为红色的问题都会变回原来的黑色，并且仍会显示所需的验证消息。我怎样才能调用 Javascript 与 Page.Validation() 一起在代码背后的方法中再次运行？

任何帮助将不胜感激！谢谢

下面是到目前为止的代码示例。

ASPX 代码：

```
 <asp:Table ID="Table1" runat="server" CellSpacing="0" CellPadding="0">
<asp:TableRow>
<asp:TableCell CssClass="question">
<label>4\. Have you had an abnormal result from a prenatal test (e.g. amniocentesis, blood test, ultrasound)?</label>

</asp:TableCell>
<asp:TableCell CssClass="answer">
<ul class="selectGroup">
<li>
<asp:RadioButton ID="Q4_true" runat="server" Checked='<%# Bind("Q4_yes") %>' Text="Yes"
GroupName="4" OnCheckedChanged='RB_QuestionSubPane_YN' AutoPostBack="true" /></li>
<li>
<asp:RadioButton ID="Q4_false" runat="server" Checked='<%# Bind("Q4_no") %>' Text="No"
GroupName="4" OnCheckedChanged='RB_QuestionSubPane_YN' AutoPostBack="true" />
</li>
<asp:TextBox ID="Q4_validationBox" runat="server" CssClass="hiddenField" Enabled="false"
Text=''></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" EnableViewState="true" ControlToValidate="Q4_validationBox"
Display="Dynamic" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
</ul>
</asp:TableCell>
</asp:TableRow>
</asp:Table> 
```

代码背后

```
 protected void RB_QuestionSubPane_YN(object sender, EventArgs e)
{

RadioButton radio_Selected = (RadioButton)sender;
string radio_QuestionID = Convert.ToString(radio_Selected.ID);

(((TextBox)FormView1.FindControl(strQuestionID + "_validationBox")).Text) = radio_Selected.ID.ToString();

Page.Validate();

} 
```

JavaScript

```
 ValidatorUpdateDisplay = function (val) {
var ctl = $('#' + val.controltovalidate);
var eCount = 0;
for (var i = 0; i < Page_Validators.length; i++) {
var v = Page_Validators[i];
if (v.controltovalidate == val.controltovalidate) {

if (!v.isvalid) {
eCount++;
ctl.addClass('validationError');
$('td.question:eq(' + i + ')').addClass('red');
}

};
}
if (eCount > 0) {
ctl.addClass('validationError');

} else {
ctl.removeClass('validationError');
$('td.question:eq(' + i + ')').removeClass('red');
}
if (typeof (val.display) == "string") {
if (val.display == "None") {
return;
}
if (val.display == "Dynamic") {
val.style.display = val.isvalid ? "none" : "inline";
return;
}
}
if ((navigator.userAgent.indexOf("Mac") > -1) &&
(navigator.userAgent.indexOf("MSIE") > -1)) {
val.style.display = "inline";
}
val.style.visibility = val.isvalid ? "hidden" : "visible";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:55:32.813

听起来您真正需要的是自定义验证。这样您就可以完全自定义验证以满足您的需求。

这是一个简单的例子：

```
<script language="javascript" type="text/javascript" >
function CustomValidator1_ClientValidate(source,args)
{   
    //put your javascript logic here
}
//-->
</script>
<body>
    <form id="form1" runat="server">
    <div>   
    <asp:RadioButton ID="RadioButton1" runat="server" GroupName="direction" Text="left" />
    <asp:RadioButton ID="RadioButton2" runat="server" GroupName="direction" Text="right" />
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
    <asp:CustomValidator id="CustomValidator1" runat="server" Display="Dynamic" ErrorMessage="please choose" ClientValidationFunction="CustomValidator1_ClientValidate" OnServerValidate="CustomValidator1_ServerValidate"></asp:CustomValidator>
    </div>
    </form>
</body> 
```

服务器端

```
 protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
    {
        args.IsValid = RadioButton1.Checked || RadioButton2.Checked;
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (Page.IsValid)
        {
            //validate is successful.
        }
    } 
```

# jquery - jQuery 提交事件阻止表单在 IE9 中提交

> ID：12340487
> 
> 赞同：1
> 
> 时间：2012-09-09T15:43:45.863
> 
> 标签：jquery, html, css, internet-explorer

我正在尝试在表单提交之前向表单添加一些验证。这是我正在使用的：

```
$('#add_upload').submit(function(e){

    var file = $('#realupload_1').val();
    var p_name = $('#p_name').val();
    var p_price = $('#p_price').val();
    var thumb = $('#realupload_2').val();
    var p_desc = $('#p_desc').val();

    if(file == ''){
        e.preventDefault();
        alert('Please select a valid product file');
    }else if(p_name == '' || p_name == 'ebook name'){
        e.preventDefault();
        alert('Please set a valid product name');
    }else if(p_price == '0.00' || Math.ceil(p_price) == 0){
        e.preventDefault();
        alert('Please set a valid price for your product');
    }else if(thumb == ''){
        alert('Please select a valid product image for your product');
        e.preventDefault();
    }else if(p_desc == '' || p_desc == 'Description...'){
        e.preventDefault();
        alert('Please add a description for your product');
    }else{
        //$('#submita').attr("disabled","disabled").val("Please wait....");
    }

}); 
```

以上在 Firefox 和 Chrome 上完美运行。但是，我在使用 IE9 时遇到问题 - 它进入 else 语句，但没有提交表单！一旦我再次按下提交按钮，它会要求我确保我的上传文件字段不为空！我不确定它是如何清除值的。

当我删除上述验证时，表单提交正常。但是，我需要先验证。

我试过的：

1.  我已确保表单 ID 都是唯一的
2.  我已确保将我的提交按钮 ID 命名为其他“提交”
3.  我添加了 $('#add_upload').submit(); 在其他领域。

以上没有任何区别。

我真的很感谢这里的帮助，因为我在这上面浪费了 2 个小时！

我的问题与[这个问题](https://stackoverflow.com/questions/7513211/clicking-submit-clears-file-field-instead-of-submitting-the-form-ie9)类似，但还没有明确的答案。

如果有帮助，[这里是 HTML 。](http://pastebin.com/c1QJjBnp)

## 更新

好吧，我已经将问题缩小到这个问题 JS 代码：

```
$('#file_upload_1').click(function(){

    $('#realupload_1').trigger('click');

}); 
```

如您所见，我正在触发单击以打开文件对话框。IE9好像不喜欢这样，如果文件输入被自动触发，表单将不会提交，这一定是一个安全问题。

谁能证实这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T01:08:54.877

我本来打算赞成 Bhuvan Rikka 的评论，但在查看了 Wiley 对您的代码的摆弄之后，我认为这类似于同意兴登堡需要一层油漆。

标记、脚本和可用性有几个问题需要引起注意。

*   修复 ID 并“返回 false”以防止表单提交。见 Bhuvan Rikka 的评论`e.returnValue = false`
*   关于 ID：使它们有意义。将输入字段名称重命名为 eBookFile、eBookName、eBookPrice、Thumbnail、Description 而不是 realupload_1、p_name、p_price、realupload_2、p_desc。
*   在表单标记中：不需要提交的字段不应该有 ID。同样，文本标签绝不应该是输入文本字段。
*   在这一系列 elseif 中链接验证是一个巨大的可用性问题，使用警报来显示验证错误使问题更加复杂。一次显示所有错误，为了所有神圣的事物，不要使用警报。
*   定制验证很棒，我为你鼓掌。如果您使用 jQuery 并且不想花两个小时拉头发和重新发明轮子，请使用[Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

我通过以下更改扩展[了wirey 的小提琴。](http://jsfiddle.net/EBRBq/2/)

*   清理了 HTML。很多！
*   链接了[ASPNETCDN 上的 Validate 插件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js)。
*   使用“defaultInvalid”方法扩展验证插件以处理默认值。
*   该表单现在使用 jQuery 验证插件。为各种表单元素添加了 'required' 和 'defaultInvalid' css 类。
*   添加了验证错误的样式。

尝试一下。请注意，您可以看到所有无效字段，而不是显示第一个无效字段的消息的弹出窗口？

这是清理后的 HTML。

```
<form id="add_upload" action="/echo/json/" method="post" enctype="multipart/form-data">
    <div class="standard-white-row upload-ebook-row">
        <!-- The label is no longer an input.  Removed ID from label -->
        <div class="fakeupload">Select your ebook file&#8230;</div>
        <input id="eBookFile" type="file" class="realupload required defaultInvalid" />
    </div>
    <div class="standard-white-row">
        <div class="field-ebook-name">
            <input id="eBookName" name="eBookName" type="text" value="eBook Name" class="required defaultInvalid" />
        </div>
        <div class="field-ebook-price">
            <input id="eBookPrice" name="eBookPrice" type="text" value="0.00" class="required defaultInvalid" />
        </div>
    </div>
    <div class="standard-white-row upload-preview-img-row">
        <!-- The label is no longer an input.  Removed ID from label -->
        <div class="fakeupload">Select your thumbnail image&#8230;</div>
        <input id="thumbNail" name="thumbNail" type="file" class="realupload required defaultInvalid" />
    </div>
    <div class="standard-white-row">
        <textarea id="Description" name="Description" cols="" rows="" class="required defaultInvalid">Description&#8230;</textarea>
    </div>
    <div class="standard-white-row standard-white-submit">
        <input id="submitButton" type="submit" value="Add ebook" />
    </div>
    <div class="errorSummary incomplete"></div>
</form> 
```

[对于表单验证功能，我们首先在http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js)链接到 Validate 插件，然后使用 defaultInvalid 方法扩展 validate。

```
// Validation extension to invalidate a field if the value is the default.
// Add the 'defaultInvalid' css class to inputs with a default value.
jQuery.validator.addMethod("defaultInvalid", function (value, element) {
    return !(element.value == element.defaultValue);
}); 
```

第一种验证方法将在无效字段旁边显示验证错误。

第二种（已被注释掉）验证方法将验证错误放在表单下方的摘要中。

```
$(document).ready(function () {
    // Invalid fields will receive the 'errorHilite' css class
    // error message will be inline adjacent to the invalid field
    $('#add_upload').validate({
        keyup: false,
        onfocusout: false,
        onclick: false,
        errorElement: "span",
        errorClass: "errorHilite"
    });

    // Invalid fields will receive the 'errorHilite' css class.
    // Error messages are summarized in the element specified by errorLabelContainer.
    /*
    $('#add_upload').validate({
        errorLabelContainer: $(".errorSummary"), 
        keyup: false,
        onfocusout: false,
        onclick: false,
        errorElement: "div",
        errorClass: "errorHilite"
    });
    */

}); 
```

查看[验证 API 参考](http://docs.jquery.com/Plugins/Validation)以获取更多选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:26:04.750

IE9 中的安全性不允许您手动触发对该输入字段的单击。

您可以尝试将输入包装在标签中，然后触发对标签的点击，这可能会起作用:)

```
<label id="labelID" for="inputID">
     <input id="inputID" type="file" />
</label>

$('#labelID').trigger('click'); 
```

尽管我确实同意其他答案，但有更好的方法来做你想要实现的目标。

# c# - 系统范围的热键——如何以编程方式检测全局键盘快捷键？

> ID：12340490
> 
> 赞同：5
> 
> 时间：2012-09-09T15:44:08.550
> 
> 标签：c#, .net, windows-7, keyboard-shortcuts

**问题**

如何以编程方式询问 Win7 以获取**所有**当前活动的全局键盘快捷键的列表？

**设想**

在许多版本的 Windows 中都有所谓的[“Windows Key”](http://en.wikipedia.org/wiki/Windows_key)，也就是“flag”、“start key”*等等*。

Microsoft 有一篇支持文章[“Windows 的键盘快捷键”](http://support.microsoft.com/kb/126449)，其中在“Microsoft 自然键盘键”部分下列出了其中的许多，以及许多其他不涉及使用[“Windows 键”](http://en.wikipedia.org/wiki/Windows_key)的内容，例如*全局*`Ctrl`+`C`等。

 *其他键盘快捷键可能会被意外发现。例如，[Windows 键](http://en.wikipedia.org/wiki/Windows_key)+`Left arrow`或`Right arrow`在 Win7 中将焦点窗口移动到显示器周围，并且对于多个显示器，从一个显示器移动到下一个显示器。

在“选项”设置中还可以找到其他键盘快捷键，例如，Left- ++`Ctrl`是“显示*KeePass 窗口”的**默认设置*。`Alt``K`

 **此外，可能有特定于硬件的键盘快捷键，例如，在我的笔记本电脑上，`Fn`+`F8`切换扬声器静音。

**被盗的键盘快捷键**

当**[Snagit](http://www.techsmith.com/snagit.html)**运行时，我已将其配置`PrtSc`为我的快捷方式，*但是*当 Visual Studio(VS) 运行时，它会`PrtSc`从**[Snagit](http://www.techsmith.com/snagit.html)**中窃取。

**手动发现键盘快捷键的两种耗时方法**

(a) 全局键盘快捷键可以通过只打开桌面和几个窗口并尝试各种组合键来发现。

(b) 在 VS 中，可以通过在键盘快捷键窗口中尝试各种组合来发现许多 VS 键盘快捷键，如果某个组合已被使用，VS 将通知该组合的当前使用情况。

**想要发现所有当前活动的全局键盘快捷键的两个原因**

(a) 避免诸如[Windows 徽标键](http://en.wikipedia.org/wiki/Windows_key)+`L`锁定计算机之类的恼人事故。

(b) 确定哪些键当前仍可用于分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:56:15.807

这是一个很有趣但也很困难的问题。Windows 操作系统显然没有提供直接的方法来执行此操作，***`EnumerateHotKeys?`***但是，当[`RegisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)调用该函数时，会使用`__FindHotKey`. 因此，有可能*破解*此功能并找出可用的热键。请参阅此[C 示例](http://read.pudn.com/downloads50/sourcecode/embed/170826/HOTKEY.C__.htm)。还有一个完整的汇编语言示例[可从此处下载，](http://www.wasm.ru/pub/21/files/gui_subsystem.rar)但这可能不适用于 Windows Vista +。

另一种方法是扫描系统中的所有快捷方式。如果要扫描系统上的所有快捷方式，这确实需要很长时间。但是，您仍然可以使用常见的快捷目录来获取其中的大部分内容，例如：

> %AllUsersProfile%\desktop %UserProfile%\Start Menu %AllUsersProfile%\Start Menu %appdata%\Microsoft\Internet Explorer\Quick Launch %appdata%\Microsoft\Internet Explorer\Quick Launch\User Pinned\StartMenu %appdata%\Microsoft\ Internet Explorer\快速启动\用户固定\任务栏

这是我刚刚编写的一个简单程序，它扫描 UserProfile 目录中的所有快捷方式。

```
using IWshRuntimeLibrary;//You can download this library from http://www.codeproject.com/KB/dotnet/ShellLink/ShellLink.zip

WshShell wsh = new WshShellClass();
var files = GetFiles(Environment.ExpandEnvironmentVariables("%userprofile%"), "*.lnk*");
foreach (string f in files)
{
    try
    {
        WshShortcut wa = wsh.CreateShortcut(f) as WshShortcut;
        if (wa.Hotkey != "")
        {
            MessageBox.Show("Shortcut Found! - " + wa.Hotkey, wa.TargetPath);
        }
    }
    catch
    {
        continue;
    }
} 
```

如果你想使用它，请`GetFiles`从[这里](https://stackoverflow.com/a/4986333/612717)获取方法。该方法的主要优点是避免目录权限问题。

祝你好运。***

# javascript - 计算php或js内的距离？

> ID：12340496
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:45:14.347
> 
> 标签：javascript, database, google-maps, client-server, distance

首先，我不确定这个问题应该出现在 stackoverflow 或其他 stackexchange 网络中。所以如果错误的地方只是为我移动。

在DB或js中计算lat/lng的2个点之间的距离更好吗？由于谷歌地图提供了computeDistanceBetween()。这真的很容易使用，但我想如果我有 10000 行并且只有 5 行在距离内并显示到地图中。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:52:41.520

如果您的问题只是关于应该在哪里计算，那么我更喜欢客户端。它简单、快速、更灵活和动态，并且您可以卸载您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:53:56.263

在不了解您的问题的情况下，我可能会在客户端（或“在 JS”中）执行计算密集型任务。通过在客户端之间分配它，这永远不会给您的服务器端应用程序带来太多负载。

当然，要选择最佳方法，您必须考虑许多变量。

您可以考虑的其他事项：

*   在服务器端执行并缓存结果，
*   使用 google-api 并将其缓存在您的服务器上，
*   还有很多很多...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:10:33.847

这取决于计算的频率。如果您的点是永久的，那么您可以在将行插入表格之前只计算一次所有需要的距离，并保存计算结果以供以后提供给客户。但是如果计算是可重复的并且点的坐标最终会改变，那么最好使用客户端计算。实际上，对于浏览器来说，执行一些 JavaScript 来计算距离，即使是很多点也不是那么难的任务。此外，如果您有大量输入数据，您可以考虑在客户端进行一些后台预计算并将结果缓存在 localStorage* 中，这样您的用户将永远不会等待。

*** [store.js](https://github.com/marcuswestin/store.js)可以帮助您确保跨浏览器的兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:11:46.617

在哪里更好地计算距离完全取决于您的应用程序。如果您的客户有信息，那么在 JS 中会更好。

在这种情况下，您似乎正在尝试计算存储在数据库中的最接近给定点的点。使用地理空间索引的数据库肯定会更好地处理这个问题。

典型的算法使用简单的方法缩小结果集。在 x & y +/- 10KM 内，然后使用该结果集进行完整计算。

我会说如果您的信息在数据库中，那么请考虑为您的 DBMS 使用内置的地理空间工具。

# vb.net - 为什么 getArea((l / 3), (n - 1) 只返回空值？

> ID：12340500
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:45:38.797
> 
> 标签：vb.net

为什么函数 getArea 返回 NULL/Nothing

```
 Module Module3
  Dim noOfTriangles As Integer = (3 / 2)
  Sub main()
    Dim l As Single
    Dim n As Integer
    l = Console.ReadLine()
    n = Console.ReadLine()
    Console.WriteLine(getArea(l, n))
    Console.ReadKey()
  End Sub

  Function getArea(ByVal l As Single, ByVal n As Integer)
    Dim area As Single = 1
    If n = 0 Then
      Return Nothing
    Else
      noOfTriangles = noOfTriangles * 2
      Return (((3 ^ (1 / 2)) / 4) * (l ^ 2) + (noOfTriangles * getArea((l / 3), (n - 1))))
    End If
  End Function
End Module 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T08:06:00.740

试试这个，看看它是否能让你更接近你正在寻找的东西：

```
 Module Module3
  Dim noOfTriangles As double = (3 / 2)
  Sub main()
    Dim l As Single
    Dim n As Integer
    l = Single.Parse(Console.ReadLine())
    n = Integer.Parse(Console.ReadLine())
    Console.WriteLine(getArea(l, n))
    Console.ReadKey()
  End Sub

  Function getArea(ByVal l As Single, ByVal n As Integer) as Double
    Dim area As Single = 1
    If n = 0 Then
      Return Nothing
    Else
      noOfTriangles = noOfTriangles * 2
      Return (((3 ^ (1 / 2)) / 4) * (l ^ 2) + (noOfTriangles * getArea((l / 3), (n - 1))))
    End If
  End Function
End Module 
```

# matlab - 如何在 Matlab / Octave 中访问单个矩阵元素？

> ID：12340501
> 
> 赞同：5
> 
> 时间：2012-09-09T15:45:40.467
> 
> 标签：matlab, matrix, octave

假设我有：

```
>> X = magic(5)
X =

   17   24    1    8   15
   23    5    7   14   16
    4    6   13   20   22
   10   12   19   21    3
   11   18   25    2    9 
```

如何从第二列中获取第 i 个元素？

我已经发现 Octave 中（一些？）集合中的索引是基于 1 的，但我不确定这是否也适用于矩阵。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T16:05:44.270

请参阅手册的[索引表达式](http://www.gnu.org/software/octave/doc/interpreter/Index-Expressions.html#Index-Expressions)部分。要从第二列获取第 i 个元素：

```
X(i,2)      # element 'i' from column 2
X(1:end,2)  # the whole 2nd column
X(:,2)      # same thing but shorter
x(:, [2 3]) # whole 2nd and 3rd column 
```

请注意，Octave 是一种数组元素按[列优先顺序排列](http://en.wikipedia.org/wiki/Row-major_order#Column-major_order)的语言。

# list - 我正在尝试在球拍 (delete-all xx elt) 中编写一个函数，它返回一个新列表，其中删除了所有出现的 elt

> ID：12340503
> 
> 赞同：4
> 
> 时间：2012-09-09T15:45:46.780
> 
> 标签：list, lisp, scheme, racket

这就是我所拥有的，但只有当 elt 出现在列表的开头时它才有效

```
(define (delete-all xx elt)
  (cond ((null? xx) null)
        ((equal? elt (car xx)) (delete (cdr xx) elt)))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:16:33.637

您错过了一个额外的案例：如果当前元素*不是*您要删除的元素，会发生什么？这是需要做什么的总体思路，我不会给你一个直接的答案，因为这看起来像家庭作业（你应该`homework`在你的问题中使用标签）。最好自己填空：

```
(define (delete-all xx elt)
  (cond ((null? xx)            ; base case: empty list
         null)                 ; return the empty list
        ((equal? elt (car xx)) ; current element needs to be removed
         <???>)                ; ignore current element and make recursive call
        (else                  ; current element needs to be added to the list
         (<???> (car xx) <???>)))) ; add current element and make recursive call 
```

此外，不要调用`delete`您的答案，因为这是一个递归解决方案，您需要改为调用`delete-all`，但使用适当的参数来保持递归直到达到基本情况。*提示*：`cons`and`cdr`呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-28T02:31:29.450

您也可以使用`filter`，也就是说，如果您被允许使用[高阶函数](https://en.wikipedia.org/wiki/Filter_(higher-order_function))：

```
(define (delete-all xx elt)
  (filter (lambda (y) (not(eq? xx y))) elt)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-12T03:32:35.903

```
(define (delete-all xx elt)
  remove* xx elt) 
```

# c - 安全标识符“目录”使我的程序崩溃

> ID：12340504
> 
> 赞同：0
> 
> 时间：2012-09-09T15:45:57.517
> 
> 标签：c, winapi, windows-7

它仅在系统音量上失败。

```
#ifndef UNICODE 
#define UNICODE
#endif

#include <stdio.h>
#include <Windows.h>

void EndWithBackslash(TCHAR* string)
{
    if(string[wcslen(string)-1] != TEXT('\\')) wcscat(string,TEXT("\\"));
}

void Browse(const TCHAR* curdir)
{
    HANDLE hFoundFile;
    WIN32_FIND_DATA foundFileData;
    TCHAR buffer[MAX_PATH];

    wcscpy(buffer,curdir);

    EndWithBackslash(buffer);

    SetCurrentDirectory(buffer);

    hFoundFile = FindFirstFileEx(TEXT("*"),FINDEX_INFO_LEVELS::FindExInfoBasic,&foundFileData ,FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories ,NULL , NULL);

    if(hFoundFile != INVALID_HANDLE_VALUE)
    {
        do
        {
            if ((foundFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) && wcscmp(foundFileData.cFileName,TEXT(".")) && wcscmp(foundFileData.cFileName,TEXT("..")) )
            {   
                 TCHAR pszItemPath[MAX_PATH];
                 wcscpy(pszItemPath, buffer);

                EndWithBackslash(pszItemPath);
                wcscat(pszItemPath,foundFileData.cFileName);
                wprintf(TEXT("%s\n"),pszItemPath);

                Browse(pszItemPath);
            }
        }
        while(FindNextFile(hFoundFile,&foundFileData));     
    }
    FindClose(hFoundFile);
}

int main(void) 
{   
    _wsystem(TEXT("chcp 65001"));
    Browse(TEXT("C:\\"));

    _wsystem(TEXT("Pause"));
    return 0;
} 
```

最后几行输出，就在运行时错误之前：

> C:\$Recycle.Bin\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S- 1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1- 5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5- 20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\ S-1-5-20\S-1-5-20\S-1-5-20\S-1-5\S-1-5-20 C:\$Recycle.Bin\S-1-5 -20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20 \S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S -1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1 -5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5 -20\S-1-5-20\S-1-5\S-1-5-20 C:\$Recycle.Bin\S-1-5-20\S-1-5-20\S- 1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1- 5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5- 20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\ S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S-1-5-20\S- 1-5 \S-1-5-20

有什么优雅的方法可以解决吗？我想避免删除这个伪目录（[超级用户已经很好地解释了它](https://superuser.com/questions/471821/mysterious-folder-next-to-the-recycle-bin)）或在我的算法中设置名称过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:28:58.613

崩溃是由堆栈溢出错误引起的，因为`SetCurrentDirectory`无法更改当前目录。正如*[Roman R.](https://stackoverflow.com/users/868014/roman-r)*所说，您需要检查`SetCurrentDirectory`. 此外，不应处理`.`和子目录，因为它们引用当前目录和父目录。`..`在进程中包含它们也会导致堆栈溢出错误。

这是固定`Browse`功能。

```
void Browse(const TCHAR* curdir)
{
    HANDLE hFoundFile;
    WIN32_FIND_DATA foundFileData;
    TCHAR buffer[MAX_PATH];

    wcscpy(buffer,curdir);

    EndWithBackslash(buffer);

    if (!SetCurrentDirectory(buffer)) return;

    hFoundFile = FindFirstFileEx(TEXT("*"),FINDEX_INFO_LEVELS::FindExInfoBasic,&foundFileData ,FINDEX_SEARCH_OPS::FindExSearchLimitToDirectories ,NULL , NULL);

    if(hFoundFile != INVALID_HANDLE_VALUE)
    {
        do
        {
            if ((foundFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) && (!wcscmp(foundFileData.cFileName,TEXT("."))) && (!wcscmp(foundFileData.cFileName,TEXT(".."))) )
            {   
                 TCHAR pszItemPath[MAX_PATH];
                 wcscpy(pszItemPath, buffer);

                EndWithBackslash(pszItemPath);
                wcscat(pszItemPath,foundFileData.cFileName);
                wprintf(TEXT("%s\n"),pszItemPath);

                Browse(pszItemPath);
            }
        }
        while(FindNextFile(hFoundFile,&foundFileData));     
    }
    FindClose(hFoundFile);
} 
```

# asp.net - 在没有 dataBind 的情况下更新 gridview 字段

> ID：12340506
> 
> 赞同：0
> 
> 时间：2012-09-09T15:46:28.703
> 
> 标签：asp.net, ajax, gridview

我有一个显示评论的gridview。我希望如果有人喜欢评论，请按点赞按钮并增加喜欢的总和，但我不想连接到数据库并绑定。我想使用 ajax 来做到这一点。我怎样才能做到这一点？这是我的代码：

```
<asp:UpdatePanel runat="server" id="UpdatePanel" >
  <ContentTemplate>
    <asp:GridView ID="grdCommentsForLoginnedUser" 
                  runat="server" 
                  AutoGenerateColumns="False" 
                  Width="100%" 
                  OnRowCommand="grdCommentsForLoginnedUser_RowCommand"
                  ViewStateMode="Inherit">
      <Columns>
        <asp:TemplateField >
          <ItemTemplate>
            <asp:HiddenField ID="hdnCommentID" runat="server"
                   Value='<%# Bind("CommentID") %>'/>              
              <table border="2" dir="rtl">
              <tr>
                <td rowspan="2" style="background-color: #6699FF" width="200px">
                  <asp:HyperLink ID="lnkCommenterName"
                        runat="server"
                        NavigateUrl='<%# Bind("CommenterProfile") %>'
                        Text='<%# Bind("CommenterName") %>' />                     
                </td>
                <td width="700px">
                  <br />
                  <asp:Label ID="lblCommentText" runat="server"
                        Text='<%# Bind("CommentText") %>' />
                  <br /> 
                </td>
              </tr>
              <tr>
                <td width="700px">
                  <asp:Label ID="lblPreviousAcceptOrNonAccept" runat="server"
                        Text='<%# Bind("PersonPreviousAcceptOrNonAccept") %>' />
                  <asp:LinkButton ID="lnkBtnRemovePreviousAcceptOrNonAccept" 
                        runat="server"   
                        Text='<%# Bind("RemovePersonPreviousAcceptOrNonAccept") %>'
                        CommandName="RemovePreviousAcceptOrNonAccept" 
                        CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" />
                  <br />
                  <asp:LinkButton ID="lnkBtnUpRate" runat="server" Text="Like"
                        Visible='<%# Bind("isLikeAndUnlikeButtonVisible") %>'  
                        CommandName="LikeComment" 
                        CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" />
                  <br />sum of likes
                  <asp:Label ID="lblCommentLikes" runat="server"
                             Text='<%# Bind("CommentLikes") %>' />
                </td>
              </tr>
            </table>
          </ItemTemplate>
        </asp:TemplateField>
      </Columns>
    </asp:GridView>
  </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:47:36.220

`onClick`向每个按钮添加客户端JavaScript。单击时获取父标记，`td`然后`getElementById("lblCommentLikes")`设置`.innerText`.`"lblCommentLikes"` `span`

```
+(theTD.getElementById("lblCommentLikes").innerText)+=1; 
```

或者

```
+(theTD.getElementById("lblCommentLikes").innerText)-=1; 
```

提示：如果您使用的是 IE，请按 F12 检查`DOM`正在运行的页面

# php - 来自以下同一类别的 Wordpress 帖子

> ID：12340509
> 
> 赞同：2
> 
> 时间：2012-09-09T15:47:16.920
> 
> 标签：php, html, css, wordpress, loops

我正在制作一个 wordpress 主题。现在我被一些东西困住了。我想在单个帖子的循环中显示来自同一类别的帖子。“Aktuelt for deg”是应显示同一类别的帖子的位置。[实时预览。](http://inmyownview.com/wordpress/?p=1)这是我的代码：

```
<?php get_header(); ?>
<div id="hold" class="clearfix">
    <div id="left">
        <?php if(have_posts()) : ?><?php while(have_posts()) : the_post(); ?>
        <div class="entry">
            <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
            <div class="author">Skrevet av <?php the_author(); ?></div>
            <?php the_content(); ?>
        </div>
        <div class="comment-template">
            <?php comments_template(); ?>
        </div>
    </div>
<div id="right">
            <div class="search">
                <form  action="<?php echo home_url( '/' ); ?>" method="get">
                                    <input type="text" value="Skriv her for å søke.." name="s" id="s" onblur="if (this.value == '') {this.value = 'Skriv her for å søke..';}"
                                    onfocus="if (this.value == 'Skriv her for å søke..') {this.value = '';}">
                                </form>
                                <script type="text/javascript">
                                    $(".search").keypress(function(ev){
                                        if (ev.keyCode == 13) {
                                            $("form")[0].submit();
                                        }
                                    });
                                </script>
            </div>
            <div class="box">
                <div class="heading">
                    <h1>Aktuelt for deg</h1>
                </div>​
                <ul>
                    <?php query_posts('posts_per_page=5' . '&orderby=rand'); 

                    while ( have_posts() ) : the_post();
                        echo '<li><div class="borderline"><a href="';
                        the_permalink();
                        echo '">';
                        the_title();
                        echo '</a></div><author>Skrevet av ';
                        the_author();
                        echo '</author></li>';
                    endwhile;

                    // Reset Query
                    wp_reset_query();

                    ?>
                </ul>
            </div>
        </div>
    </div>

    <?php endwhile; ?>
    <?php endif; ?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:59:54.127

不要使用`query_posts`. 它不是您想要做的事情的正确工具。

使用 a`WP_Query`代替：

```
global $post;
$current_category = get_the_category();

$same_category = new WP_Query(array(
    'cat'            => $category[0]->cat_ID,
    'post__not_in'   => array($post->ID),
    'orderby'        => 'rand',
    'posts_per_page' => 5
)); 
```

然后，要渲染它，使用这个：

```
<?php while ( $same_category->have_posts() ) : $same_category->the_post(); ?>
    <li>
        <div class="borderline">
            <a href="<?php the_permalink(); ?>">
                <?php the_title(); ?>
            </a>
        </div>
        <author>Skrevet av <?php the_author(); ?></author>
    </li>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-19T13:12:58.240

对于后来偶然发现这个问题的其他人：

[Joseph Silber 的](https://stackoverflow.com/a/12340602/7311767)代码几乎是正确的。

```
'cat'            => $category[0]->cat_ID, 
```

应该

```
'cat'            => $current_category[0]->cat_ID, 
```

因为 $category 没有在任何地方定义。

# c# - 将 Listview 项的子项绑定到另一个数据

> ID：12340510
> 
> 赞同：0
> 
> 时间：2012-09-09T15:47:21.900
> 
> 标签：c#, windows, xaml, windows-8

我的应用程序中有一个 Listview，它的 ItemTemplate 具有三个 TextBlocks。Listview 的 ItemsSource 属性在我的名为“ConversionEngine”的类中设置为名为“units”的列表...

所以我的问题是：我想将 ItemTemplate 中的第二个和第三个 TextBlocks 绑定到同一个“ConversionEngine”类中的另一个列表。但我不能，因为 Listview 的 ItemsSource 属性设置为字符串的“单位”列表，并且 ItemTemplate 的所有子项都继承了“单位”列表。如何将子项绑定到另一个列表、同一类 ConversionEngine 或我定义的其他类？谢谢...这是我的代码：

列表视图：

```
<ListView x:Name="allunits" **ItemsSource="{Binding units}**" SelectionMode="Single" IsItemClickEnabled="True" ItemClick="allunit_itemclick" SelectedIndex="-1" ItemTemplate="{StaticResource Standard500x130ItemTemplate}"/> 
```

项目模板代码：

```
<DataTemplate x:Key="Standard500x130ItemTemplate">

        <Grid Height="110" Width="480" Margin="10" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Width="110" Height="110">
                <Image Source="{Binding Image}" Stretch="UniformToFill"/>
            </Border>
            <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="10,0,0,0">
              **<TextBlock Text="{Binding}" Style="{StaticResource TitleTextStyle}"/>**
              **<TextBlock  Text="{Binding ??}" Style="{StaticResource TitleTextStyle}/>**
              **<TextBlock  Text="{Binding ??}" Style="{StaticResource TitleTextStyle}"/>**
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:18:26.830

Itemscontrol 项只能绑定到 UI 元素、可以使用相关源访问的事物以及给定它们的部分数据上下文。我的建议是将您的不同列表合并到一个列表中，或者至少从您的绑定属性中返回分组项目。所以要么：

```
public class CompositeItem
{
  Item item;               //item from your first list
  Item2 item2;             //item from your second list
  . . .
}

//main class
List<CompositeItem> items;  //list of combined items 
```

或者：

```
public Tuple<Item, Item2 . . . > items //bind your items control to this
{
    List<Tuple<Item, Item2 . . >> newListOfItems = new Tuple<Item, Item2 . . >(); 
    for(int i = 0; i < items.count; i++)
    {
        newListOfItems.add(new Tuple<Item, Item2 . . >(list1[i], list2[i] . . .));
    }
    return newListOfItems;
} 
```

# java - 加工中的重力（地板）

> ID：12340511
> 
> 赞同：1
> 
> 时间：2012-09-09T15:47:41.570
> 
> 标签：java, processing, game-physics

我正在使用[处理](http://www.processing.org)java库来模拟使用牛顿物理学在两堵墙之间弹跳的球；水平速度是一个常数，因为没有加速度。我让模拟工作，但是我想指定地板的高度。然而，在我的方程式中，当球距离屏幕底部 10 像素时尝试改变方向时，每次反弹后，球在“地板”下方越来越低。如果我将地板提高到 >20 像素，球不会停止，而是无限期地反弹。这是相关代码： 请注意，处理的坐标系从顶部开始，向下和向右运行。我在这里先向您的帮助表示感谢。

```
public class Testing extends PApplet {

boolean inFloor=false; 
float xPosition=500;
float yPosition=200;
float xVelocity=25;
float yVelocity=-80.0f;
float yAccelleration=+10.0f;
float elasticity=0.80f;

public void setup (){
  size(displayWidth,displayHeight);
  noStroke();
  ellipseMode(RADIUS);
  frameRate(35);
}
 public boolean sketchFullScreen() {
  return true;
 }

public void draw(){
    background(0);
    //Changes direction of motion when hitting a wall
    if(xPosition>=displayWidth||xPosition<0){
        xVelocity=-xVelocity;
    }
    //supposed to change direction of motion when the ball hits the floor
    if(yPosition>=displayHeight-20){
        yPosition=(displayHeight-20);    
        yVelocity=-(yVelocity)*elasticity;
        if(yVelocity>=-1 && yVelocity<=0){
            xVelocity=xVelocity*elasticity;
            yVelocity=0; 
            yAccelleration=0;
        }    
    }
    else{
        yVelocity=yVelocity+yAccelleration;
    }

    yPosition=yVelocity+yPosition;
    xPosition=xPosition+xVelocity;
    ellipse(xPosition,yPosition,10,10);
} 
```

**编辑：**这可能是时间问题吗？

**编辑：**感谢您的所有回复。不幸的是，我不能对其中任何一个进行投票（只有 6 个代表）。我结合了@tobius_k 的答案、@Roberto_Mereghetti 的答案以及来自[OpenProcessing.org](http://openprocessing.org/sketch/17115)的一些示例代码，从而解决了它。在下面提供的解决方案中，由于画布以像素（整数值）为单位进行测量，因此使用浮点数来指定坐标会导致处理过程中出现图形故障。所以我实现了一个系统，其中浮点值被四舍五入，十进制值被添加到累加器（“xRounder”和“yRounder”），当大于 -1 或 1 时被四舍五入并添加到 Ball 的当前位置。这给了我一个地板！

*最终代码：*

```
 import processing.core.*; 
    //import processing.xml.*; 

    import java.applet.*; 
    import java.awt.Dimension; 
    import java.awt.Frame; 
    import java.awt.event.MouseEvent; 
    import java.awt.event.KeyEvent; 
    import java.awt.event.FocusEvent; 
    import java.awt.Image; 
    import java.io.*; 
    import java.net.*; 
    import java.text.*; 
    import java.util.*; 
    import java.util.zip.*; 
    import java.util.regex.*; 

    public class Testing extends PApplet {
    int xPosition=500;
    int yPosition=200;
    float xRounder=0;
    float yRounder=0;
    float xVelocity=25;
    float yVelocity=-80.0f;
    float yAccelleration=+10.0f;
    float elasticity=0.80f;
    public void setup (){
    size(displayWidth,displayHeight);
    noStroke();
    ellipseMode(RADIUS);
    frameRate(15);
    }
    public boolean sketchFullScreen() {
      return true;
    }

     /* (non-Javadoc)
     * @see processing.core.PApplet#draw()
     */
    public void draw(){
    background(0);

    yPosition=round(yVelocity)+yPosition;
    yRounder+=(yVelocity-round(yVelocity));
    xPosition=round(xVelocity)+xPosition;
    xRounder+=(xVelocity-round(xVelocity));

    if(xRounder>=1||xRounder<=-1){
        xPosition=xPosition+round(xRounder);
        xRounder=xRounder-round(xRounder);
    }
    if(yRounder>=1||yRounder<=-1){
        yPosition+=round(yRounder); 
        yRounder=yRounder-round(yRounder);
    }

    if(yPosition>displayHeight-50 && yVelocity>0){
        yPosition=displayHeight-50;
        yVelocity=-(yVelocity)*elasticity;  
        xVelocity=xVelocity*elasticity;

    }

    if(xPosition>=displayWidth||xPosition<0){
    xVelocity=-xVelocity;
    }
    yVelocity=yVelocity+yAccelleration;  

    ellipse(xPosition,yPosition,10,10);

    }

        static public void main(String args[]) {
           PApplet.main(new String[] { "--bgcolor=#ECE9D8", "Testing" });
    //      new Testing().setVisible(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:53:30.523

这是我的解决方案。问题出在这一行：

```
 if(yVelocity>=-yAccelleration && yVelocity<=yAccelleration){ 
```

这是使用每个 yAcceleration 值停止球的唯一方法。

```
public void draw(){
    background(0);
    if(xPosition>=displayWidth||xPosition<0){
        xVelocity=-xVelocity;
    }

    if((yPosition>=displayHeight-40.0) && yVelocity>0){
        yPosition=(displayHeight-20);    
        yVelocity=-yVelocity*elasticity;
        if(yVelocity>=-yAccelleration && yVelocity<=yAccelleration){
            xVelocity=xVelocity*elasticity;
            yVelocity=0; 
            yAccelleration=0;
        }    
    }
    else{
        yVelocity=yVelocity+yAccelleration;
    }
    yPosition=yVelocity+yPosition;
    xPosition=xPosition+xVelocity;
    ellipse(xPosition,yPosition,10,10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:26:14.080

我不是 100% 肯定，但我认为通过在球实际到达底线*以下*几个像素时将球重置到底线，您可以完全补偿弹性系数，从而使球无限期地反弹。

尝试删除线`yPosition=(displayHeight-20);`，然后它应该工作得更好。

这样，球最终会停下来，但这仍然不正确，因为根本不计算球落地的时间。

**更新**好吧，我想现在我已经明白了。以下是相关位：

```
// first update position, then update velocity
yPosition=yVelocity+yPosition;
if (yPosition >= floor) {
    // invert velocity and position w/ elasticity applied
    yVelocity = -yVelocity * elasticity;
    yPosition = floor - (yPosition - floor) * elasticity;
}
if(Math.abs(yVelocity) <= 2 && Math.abs(yPosition - floor) <= 2){
    // stop everything when close to rest
    yPosition=floor;
    yVelocity=0; 
} else {
    // otherwise accelerate, even after bounce
    yVelocity=yVelocity+yAccelleration;
} 
```

因此，您的代码的主要更改是：

1.  首先更新位置，然后更新速度
2.  而不是将球重置到地板上，恢复它从地板上掉下来的量，并将弹性系数应用于那个
3.  总是加速球，即使它从地板上反弹

这里是它的样子（地板是 500）。不完美，但很接近。

![在此处输入图像描述](../Images/66984226d50545f986e356e04255ed17.png)

**更新 2**：刚刚发现[这个处理示例](http://processing.org/learning/topics/bouncybubbles.html)，它实际上非常接近您的原始代码，不同之处在于它们*总是*应用加速，并且它们在碰撞检查*之前*这样做。似乎仅此一项就可以解决问题。

# scala - 如何在 scala 中启动远程演员

> ID：12340514
> 
> 赞同：1
> 
> 时间：2012-09-09T15:48:14.577
> 
> 标签：scala, akka, scala-2.8

我想使用 scala 从本地计算机启动远程演员。我可以在远程计算机上开始运行演员，而无需在远程计算机上手动启动某种服务器程序吗？我有一个主演员，它必须启动一些远程演员。那么关于我应该如何做的任何想法？或者我可以在不执行远程计算机上的某种程序的情况下做到这一点，我必须首先连接到这些程序才能启动新的远程参与者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T16:54:58.487

当然不能；那将是一个巨大的安全漏洞！

有关在远程计算机上运行以启动 akka 服务所需的内容，请参阅[akka 文档。](http://doc.akka.io/docs/akka/1.3.1/scala/remote-actors.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:39:33.307

您需要在必须连接的远程端运行一个程序。在该程序中，有一个actor，它监听来自本地计算机的消息并创建其他actor。

例如 - 本地方面：

```
remoteActor ! Props(new SomeActor) 
```

远端：

```
def receive = {
  case p @ Props(_,_,_,_) => 
    val actor = context.actorOf(p)
    sender ! actor
  //...
} 
```

# html - 使用 PhoneGap + jQuery Mobile 为智能手机和平板电脑重用 UI

> ID：12340516
> 
> 赞同：-1
> 
> 时间：2012-09-09T15:48:30.090
> 
> 标签：html, cordova, jquery-mobile, mobile-application

使用 PhoneGap 为智能手机和平板电脑开发移动应用程序时，如何重用大部分 UI 代码？我问的原因是智能手机应用程序和平板电脑的 UI 布局需要不同，因为它们的屏幕尺寸不同。

我真的很想知道您的建议是什么，以便我可以尽可能多地利用 PhoneGap。提前感谢您的指导。

我正在考虑使用的框架是：

PhoneGap jQuery Mobile Backbone.js

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:17:37.793

虽然我们在 Phonegap 中处理混合应用程序中的 UI 设计，但使用 css 技术是一个简单而好的选择。我有一些链接要分享给你，值得一读，对解决你的问题会有帮助，

[链接 1](http://www.cameronmoll.com/archives/000577.html)：移动网页设计：提示和技巧
[链接 2](http://www.maxdesign.com.au/articles/liquid/)：简单的液体布局
[链接 3](http://perishablepress.com/the-5-minute-css-mobile-makeover/)：5 分钟 CSS 移动改造

希望这些链接对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:49:37.227

我会检测用户代理，然后根据设备显示正确的 UI。我在我的 jQuery Mobile 应用程序（虽然我不使用 PhoneGap）中使用 PHP 执行此操作。

# php - 在mysql中获取日期范围之间的行

> ID：12340523
> 
> 赞同：0
> 
> 时间：2012-09-09T15:49:37.513
> 
> 标签：php, mysql, sql, date, datetime

我有一个严重的问题，我无法弄清楚。我正在尝试从 MySQL 数据库返回两个给定日期之间的开始日期和结束日期的行。这是我查询数据库的php代码：

```
$getRooms = mysql_query("
    SELECT * 
    FROM Tarifas 
    WHERE Start BETWEEN '2013-01-10' AND '2013-01-13' 
    AND   End   BETWEEN '2013-01-10' AND '2013-01-13'
"); 
```

Start 和 End 设置为 DATE 字段

我的数据库设置如下：

```
ID | RoomId | Start      | End
--------------------------------------
4  | 34562  | 2013-01-09 | 2013-10-23 
```

如果有人能帮我弄清楚为什么这不起作用，将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T15:56:28.200

查看您的查询和示例数据，也许您正在寻找一个[SQL 查询来查找重叠或冲突的日期范围](http://salman-w.blogspot.com/2012/06/sql-query-overlapping-date-ranges.html)。查询将是：

```
SELECT *
FROM Tarifas 
WHERE '2013-01-13' >= `Start` AND `End` >= '2013-01-10' 
```

`2013-01-13`大于`2013-01-09`-- 并且 --`2013-10-23`大于`2013-01-10`所以 Tarifas #4 将被返回，因为它与指定的日期冲突/重叠。

# winapi - 创建位图的句柄

> ID：12340525
> 
> 赞同：0
> 
> 时间：2012-09-09T15:49:58.637
> 
> 标签：winapi

有什么方法可以在不使用 Device Contex(DC) 的情况下创建 HANDLE（特别是 HBITMAP）到内存中存在的 BITMAP 结构？

# exception - 在 Azure WorkerRole 中引发异常的性能影响

> ID：12340527
> 
> 赞同：2
> 
> 时间：2012-09-09T15:50:08.200
> 
> 标签：exception, azure, azure-worker-roles

在运行多个线程的 Azure 辅助角色上引发和捕获异常是否会对性能产生负面影响？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:12:43.207

老问题，但以防万一有人在看：是的。

就像任何其他 .NET 主机一样，如果您抛出大量异常，您将体验到（有时是戏剧性的）性能影响。例外应该是“异常”的事情，而不是每天的代码路径和已知的故障条件。

Windows Azure 更糟糕的情况：您将削弱您的服务。如果您不处理 Windows Azure 中的异常，它将导致 RoleEntryPoint 循环。如果你经常这样做，你会看到 RoleCycling 状态并且你已经有效地终止了你的服务。

# nosql - noSql 连接，关系数据移动到 noSQL 存储，以及 playOrm

> ID：12340528
> 
> 赞同：1
> 
> 时间：2012-09-09T15:50:12.337
> 
> 标签：nosql

我们看到大量关于将关系数据放入 noSQL 并需要对其进行非规范化的帖子。这真的是因为工具不存在吗？playOrm 的 S-SQL 似乎可以很好地扩展。如果您不使用分区，它将无法扩展，您只需将 DBMS 数据移动到仍然无法扩展的 noSQL 存储中，但是一旦移动到分区，它就可以很好地扩展。

所以我的问题是我们真的有工具问题吗？我们会看到越来越多的工具，比如 playOrm，它们可以加入并可以处理 noSQL 存储中的关系数据，就像我们在 DBMS 中处理关系数据一样？

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:04:16.150

在传统的 OldSQL 数据库中，您可以通过消除连接需求来进行非规范化以提高读取性能，但代价是更复杂的更新。在 NoSQL 数据库中，由于缺乏对连接的支持，您可能需要进行非规范化。它仍然有利于读取性能，但会使更新复杂化，尤其是在 NoSQL 数据库不支持事务的情况下。在数据库顶部的工具中添加对连接的支持会增加另一层，这肯定会降低性能，甚至比底层数据库支持连接的情况还要严重。

如果某些东西可以很好地水平扩展（几乎是线性的），则可以通过添加更多节点轻松实现性能。仅当数据被分区时，连接才能很好地水平扩展，以便两行/帖子之间的每个连接都可以在一个数据库节点中本地执行。对于某些预定义的连接，这可能会实现，但我认为，一般来说，大多数 NoSQL 数据库在支持涉及连接的复杂即席查询时都会遇到性能问题。

看看另一种选择，我们的 NewSQL 数据库 Starcounter 确实支持连接查询并提供出色的性能。

# java - 使用 LWJGL 设置光标

> ID：12340532
> 
> 赞同：0
> 
> 时间：2012-09-09T15:51:23.257
> 
> 标签：java, cursor, lwjgl

我不明白如何使用轻量级 Java 游戏库创建带有自定义图像的光标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:04:20.327

如果您在摆动框架中有opengl 窗口。（将画布添加到框架并设置显示父级）您也许可以使用框架更改光标。否则，只需禁用光标并绘制一个新光标并通过鼠标位置进行翻译。

# sql - 说明模式定义的 XQuery 语法

> ID：12340537
> 
> 赞同：0
> 
> 时间：2012-09-09T15:52:04.047
> 
> 标签：sql, xml, xquery-sql

环境：SQL Server 2012。

假设我有一个带有 xml 列 WordIndex 的表 Message。我还有一个包含 WordId 和 WordText 的表格 Word。Message.WordIndex 的 XML 具有以下架构：

```
<xs:schema attributeFormDefault="unqualified"
           elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           targetNamespace="http://www.example.com">
    <xs:element name="wi">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="w">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element maxOccurs="unbounded" name="p" type="xs:unsignedByte" />
                        </xs:sequence>
                        <xs:attribute name="wid" type="xs:unsignedByte" use="required" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

以及一些与之相关的数据：

```
<wi xmlns="http://www.example.com">
  <w wid="1">
    <p>28</p>
    <p>72</p>
    <p>125</p>
  </w>
  <w wid="4">
    <p>89</p>
  </w>
  <w wid="5">
    <p>11</p>
  </w>
</wi> 
```

我也有这样的 XQuery 代码的 SQL 查询：

```
with WordIds as
(
    select distinct
        t.c.value('@wid', 'int') as XmlWordId
    from
        Message as m
        cross apply
            m.WordIndex.nodes('/wi/w') as t(c)
    inner join Word as w
        on w.WordId = t.c.value('@wid', 'int')

-- some more joins go here ...
)
select
    count(*)
from
    WordIds 
```

还有这个（这个不起作用，因为我开始在其中引入模式）：

```
with xmlnamespaces('http://www.example.com' as ns)
select
    wi.Position,
    w.WordId,
    w.WordText
from
(
    select
        t.c.value('.', 'int') as Position,
        t.c.value('../@wid', 'int') as WordId
    from
        Message as m
        cross apply m.WordIndex.nodes('//p') as t(c)
    where
        m.MessageId = @MessageId
) as wi
inner join Word as w
    on w.WordId = wi.WordId
order by
    wi.Position 
```

**问题：**

什么是限定参数以调用 .value() 和 .nodes() 的正确语法？我得到了我不完全理解的错误：

```
XQuery [Message.WordIndex.value()]: 'value()' requires a singleton (or empty sequence), found operand of type 'xdt:anyAtomicType *' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:56:43.910

试试这些查询：

```
;with xmlnamespaces( default 'http://www.example.com'), WordIds as 
( 
    select distinct 
        t.c.value('@wid', 'int') as XmlWordId 
    from 
        Message as m 
        cross apply 
            m.WordIndex.nodes('/wi/w') as t(c) 
    inner join Word as w 
        on w.WordId = t.c.value('@wid', 'int') 

-- some more joins go here ... 
) 
select 
    count(*) 
from 
    WordIds 

;with xmlnamespaces( default 'http://www.example.com')
select 
    w.c.value('@wid', 'INT') wid,
    p.c.value('.', 'INT') p
from message m
    cross apply m.wordIndex.nodes('wi/w') w(c)
        cross apply w.c.nodes('p') p(c) 
```

一般来说，尽量避免使用父轴（..），因为它存在性能问题。而是使用多个 CROSS APPLY 从左到右向下钻取 xml。

阅读本文以获取有关命名空间的更多信息：

使用 WITH XMLNAMESPACES 添加命名空间

[http://msdn.microsoft.com/en-us/library/ms177400.aspx](http://msdn.microsoft.com/en-us/library/ms177400.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:41:23.430

这只是语法规则之一，引用自：

[http://msdn.microsoft.com/en-us/library/ms175972.aspx](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

“当 CTE 用于作为批处理的一部分的语句中时，它之前的语句必须跟一个分号。”

# c# - 无法停止 DispacherTimer

> ID：12340539
> 
> 赞同：0
> 
> 时间：2012-09-09T15:52:18.010
> 
> 标签：c#, wpf, dispatchertimer

我在 wpf 中编写了一些代码，如果光标静止几秒钟，我有一个执行点击的鼠标。如果我打开一个我创建的新 wpf 窗口，我想停止点击……但似乎调度员不会停止，即使我几乎尝试了一切......有什么办法吗？

```
 public DispatcherTimer NewDispacher = new DispatcherTimer();
   public DispatcherTimer NewDispacher2 = new DispatcherTimer();

   public void CreateDispachers() 
   {
       NewDispacher.Tick += new EventHandler(NewDispacher_Tick);
       NewDispacher.Interval = new TimeSpan(0, 0, 0, 0, 10);
       NewDispacher.Start();
       NewDispacher2.Tick += new EventHandler(NewDispacher2_Tick);
       NewDispacher2.Interval = new TimeSpan(0, 0, 0, 4);
       NewDispacher2.Start();
   }

   public void NewDispacher_Tick(object sender, EventArgs e)
    {
        pointcur = GetCursorPosition(); 
    }

   public void NewDispacher2_Tick(object sender, EventArgs e)
    {
        pointdiff = GetCursorPosition();
        if(form1opened==true)
        {   
             NewDispacher.Stop();
             NewDispacher = null;
             NewDispacher2.Stop();
             NewDispacher2 = null;
        }
        else if ((pointdiff.X >= pointcur.X - 5) 
                 && (pointdiff.X <= pointcur.X + 5) 
                 && (pointdiff.Y >= pointcur.Y - 5) 
                 && (pointdiff.Y <= pointdiff.Y + 5))
        {
            DoMouseClick();
            pointcur.X = 0;
        }

    } 
```

当打开新表单时，我将 bool Form1opened=true 设置为 true，但即使它进入 if，调度程序也不会停止......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:59:50.860

事实是， Stop() *emphasized text*does*emphasized text* 将 DispatcherTimer 停止在其轨道上。因此，您的代码中的其他地方必须有解释。也许您正在以某种方式重新启动计时器？检查代码何时可以执行实例化/启动计时器，以防它被无意中再次调用。

# java - Java中的每个类都需要一个构造函数吗

> ID：12340543
> 
> 赞同：4
> 
> 时间：2012-09-09T15:52:45.577
> 
> 标签：java, oop, constructor

```
class Temp
{ 
   {
      System.out.println("this is in it block");
   }

   public static void main(String... s)
   {
      System.out.println("abhi");
   }
} 
```

上面的代码没有打印 init 块的内容，但我们知道 init 块是构造函数的第一行。

但另一方面，如果我使用`new Temp();`它会被打印出来。为什么这样？

如果构造函数在每个类中，上面的代码也应该在没有对象初始化的情况下打印它。不应该吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T15:57:34.637

您不需要在类中编写构造函数。如果您没有任何构造函数，系统会自动为您生成一个默认构造函数。您的内部块称为[*实例初始化程序*](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)；它在构造函数执行~~之后~~、构造函数中的任何调用之后`super(...)`以及构造函数主体（其余部分）之前运行。（如果构造函数以对 的调用开始`this(...)`，则不会为该构造函数运行实例初始化程序。）但是，您确实需要为构造函数和要执行的任何实例初始化程序创建类的实例。（如果你制作了内部块`static`，它将是一个*静态初始化器*并且在初始化类对象时只运行一次，无论是否创建了实例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:59:49.530

```
{ System.out.println("this is in it block");

} 
```

为您创建的每个对象调用。即使您不创建对象，也会调用 static {}。有关更多详细信息，请参阅 [static-and-instance-initializers-in-java](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)或[static-and-instance-initializers-in-java](http://blog.ryanrampersad.com/2009/11/static-and-instance-initializers-in-java/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:14:15.433

嗨，如果您运行此代码，您将了解实例块和静态块之间的区别。

静态块是第一次运行并且只运行一次，第一次调用静态方法或者第一次启动实例。就像在您的代码中调用静态方法（main）一样，您应该创建一个静态块，但它只调用一次。

实例块，它总是在启动一个实例时运行。

```
class Temp
{
    {System.out.println("this is an instance block");}

    static {System.out.println("this is a static block");}

    public static void main(String... s){
        System.out.println("This a static method");
        Temp myTemp = new myTemp();
        myTemp.myMethod();
    }

    void myMethod (){
        System.out.println("This an instance method");
    }
} 
```

另一方面，如果您不键入任何构造，Java 将为您创建一个

```
Temp(){//Or whatever name of your class
    super();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T23:57:50.607

您的代码中没有任何内容调用构造函数，因此实例 init 块也永远不会被调用。

> 如果构造函数在每个类中，上面的代码也应该在没有对象初始化的情况下打印它。不应该吗？

不，为什么要这样做？你必须*调用*它才能发生这种情况。它不会仅仅因为它存在就运行。

# ruby-on-rails - 访问器和 update_attributes

> ID：12340544
> 
> 赞同：0
> 
> 时间：2012-09-09T15:52:48.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我有一个带有位置属性的模型，它是一个由两个元素组成的数组；纬度和经度。我像这样定义位置的访问器

```
class Address
    include Mongoid::Document
    include Mongoid::Timestamps
    include Mongoid::Spacial::Document

    field :location,        :type => Array,    spacial: {lat: :latitude, lng: :longitude, return_array: true }

    #accessors for location

    def latitude
        location[0]
    end

    def latitude=( lat )
        location[0] = latitude
    end

    def longitude
        location[1]
    end

    def longitude=( lng )
        location[1] = lng
    end
    attr_accessible :location, :latitude, :longitude

end 
```

这是控制器代码

```
def create
        @address = Address.new(params[:address])
        if @address.save
            redirect_to :action => 'index'
        else
            render :action => 'new'
        end
    end

    def update
        @address = Address.find(params[:id])

        if @address.update_attributes(params[:address])
            redirect_to :action => 'index'
        else
            render :action => 'edit'
        end

    end 
```

在视图级别

```
<%= f.hidden_field :latitude%>
<%= f.hidden_field :longitude%> 
```

这些隐藏字段是通过js操作的，没关系。我看到它查看开发人员工具

这是控制器接收的参数

```
"address"=>{"latitude"=>"-38.0112418", "longitude"=>"-57.53713060000001", "city_id"=>"504caba825ef893715000001", "street"=>"alte. brown", "number"=>"1234", "phone"=>"223 4568965"}, "commit"=>"Guardar", "id"=>"504cacc825ef893715000006"} 
```

请注意，纬度和经度参数已更改，没关系，但此更改未保存到 mongodb

因此，纬度和经度的值不会被保存。我的代码是否缺少任何说明？

提前致谢。

- - 编辑 - -

这是工作访问器

```
 def latitude
        location[0]
    end

    def latitude=( lat )
        self.location = [lat,self.location[1]]
    end

    def longitude
        location[1]
    end

    def longitude=( lng )
        self.location = [self.location[0], lng]
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:54:47.977

当你想设置数据库的一个字段时，使用`self`总是更安全，这是一个好习惯。

第二件事，您必须使用传递给 setter 的参数。

结果代码：

```
def latitude
  location[0]
end

def latitude=( lat )
  self.location[0] = lat
end

def longitude
  location[1]
end

def longitude=( lng )
  self.location[1] = lng
end 
```

# java - 将 IModel 的两个布尔字段映射到 Wicket 中的 RadioChoice

> ID：12340546
> 
> 赞同：0
> 
> 时间：2012-09-09T15:52:57.723
> 
> 标签：java, wicket

我有一个带有两个布尔字段的用户对象：

```
//User Bean
public class Users {
  private Boolean showContactData;
  private Boolean showContactDataToContacts;
  // Getters + Setters
} 
```

我想使用 Apache Wicket 在 UI 中将其显示为 RadioChoice。

HTML部分的片段：

```
<input type="radio" wicket:id="community_settings"/> 
```

在 Wicket 中带有收音机的 Java 表单

```
public class UserForm extends Form<Users> {
  public UserForm(String id, Users user) { 
    super(id, new CompoundPropertyModel<Users>(user));
    RadioChoice rChoice = new RadioChoice<Long>("community_settings", choices, renderer);
    add(rChoice );
  }
} 
```

我现在的问题是我当然在用户对象中没有属性 community_settings 。我只是想将这两个布尔值映射到 UI 中的单选选项。

我怎么能在 Wicket 中做到这一点？

谢谢！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:37:02.927

您需要一个模型来映射数据：

```
RadioChoice<Long> rChoice = new RadioChoice<Long>("community_settings", new IModel<Long>() {
    public Long getObject() {
        if (user.getShowContactData() && user.getShowContactDataToContacts()) {
            return 1L;
        }
        // ...
    }

    public void setObject(Long choice) {
        if (choice == 1) {
            user.setShowContactData(true);
            user.setShowContactDataToContacts(true);
        } else if (choice == 2) {
            // ...
        }
    }

    public void detach() {
    }
}, choices); 
```

顺便说一句，我个人会使用`Enum`，所以根本没有特殊的映射。看起来你做的事情有点“低级”，所以检票口模型的东西会感觉很麻烦。如果合适，请尝试使用对象而不是原始类型。

# wordpress - 一篇帖子到 wordpress 中的 iframe

> ID：12340547
> 
> 赞同：0
> 
> 时间：2012-09-09T15:52:59.913
> 
> 标签：wordpress, iframe

在 wordpress 中，当单击详细信息并打开带有帖子和相关帖子的灯箱时，如何将一篇帖子加载到灯箱 iframe 中，例如 [www.wookmark.com 。](http://wookmark.com)我这样做了，在 lndex.php 中我设置了循环`<?php the_content();?>`，然后在那个循环中我写了第二个`<?php the_content();?>`，它使 dabsolute 并且不显示任何内容，然后使用 javascript 我用第二个调用 div`<?php the_content();?>`并出现帖子......但我希望帖子为在 single.php 中，我的意思是其中的导航链接在 iframe 中打开下一篇文章，而不是在主页中，我也尝试调用 iframe 将整个 single.php 加载到 iframe 中，带有页眉、页脚和导航菜单，但我只想要内容，我怎么能放松呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:14:10.310

我不明白你的问题，但如果你想让你的帖子显示在主页上，比如 www.wookmark.com，你可以使用 [查询帖子](http://codex.wordpress.org/Function_Reference/query_posts)

# java - 关于 typecast、static 和 instanceof 的泛型查询

> ID：12340548
> 
> 赞同：0
> 
> 时间：2012-09-09T15:53:00.860
> 
> 标签：java, generics

1）我想知道为什么泛型方法和类不带 super 关键字，尽管扩展被接受？

2）由于类型擦除，我们不能将运算符的实例与泛型一起使用，但是为什么允许类型转换？

例如：

```
 if (objecta instanceof Object){} //doesn't work  
 Collection collection = new ArrayList();   
 Collection<Integer> d1 = (Collection<Integer>)collection; //works fine. 
```

根据我的理解，它不应该是因为我们试图将它转换为 Collection 并且在运行时没有 Collection 。

3）我读过静态变量不能是泛型类的成员，但我不太清楚为什么。为什么会显示以下行为？

```
 public class NoGenericss  
 { static List<Integer> list; //WORKS FINE  
 static List<T> list1; //COMPILATION ERROR 
```

```
 public class Genericss<T>  

 { static List<Integer> list; //WORKS FINE   
 static List<T> list1; //COMPILATION ERROR  
 static void meth(T t){} //COMPILATION ERROR  
 static <S> void meth(S t){} //WORKS FINE 
```

为什么会出现这种可变行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:41:40.607

有关 Java 泛型的一些参考，请参阅[Sun 教程](http://docs.oracle.com/javase/tutorial/java/generics/)。

## 2)

运算符是动态的`instanceof`，这意味着它在运行时检查对象的类型。由于*类型擦除*，对象（例如集合）的泛型类型在运行时不可用（a `List<Integer>`，`List<String`>，`List<URI>`成为某些对象的全部只是`List`s）。

但是，演员表是静态的。Java 编译器会检查变量的类型参数。如果你这样做：

```
List<Integer> ints = Arrays.asList(1, 2, 3);
List<String> strings = (List<String>) ints; 
```

...编译器显示未经检查的警告，因为此操作是可能的，但不安全。因为现在当你这样做时：

```
String s = ints.get(0); 
```

您`ClassCastException`在运行时得到 a ，因为 VM 会尝试将a 强制`Integer`转换为`String`.

发生这种情况是因为编译器将上述带有泛型的源代码编译为以下代码的等价物。类型擦除是以这种方式实现的，因此所有泛型参数都消失了，使所有集合都只是`Object`s 的集合，因此，只要需要，就会在代码中插入强制转换。

```
List ints = Arrays.asList(1, 2, 3);
List strings = ints;
String s = (String) ints.get(0); 
```

* * *

## 3)

`<T>`type 参数仅对成员字段和成员方法可见。泛型类的每个实例都可以有不同`T`的 ，例如，如果您有一个类：

```
class List<T> { // this is not java.util.List, just some custom class
    public List<T> subList(int start, int end) { ... }
    ...
} 
```

...然后你可以这样做：

```
List<String> strings = ...
List<String> stringsSub = strings.subList(1, 2); 
```

... 但是也：

```
List<Integer> ints = ...
List<Integer> intsSub = ints.subList(1, 2); 
```

如您所见，第一个实例`T`设置为`String`，第二个实例设置为`Integer`。所以成员方法`subList`总是返回一个`List`相同的`T`。

现在，假设您添加了一个静态字段：

```
class List<T> {
    public static List<T> CONSTANT_LIST = ...
    ...
} 
```

......`T`在这种情况下会是`CONSTANT_LIST`什么？`String`, `Integer`, 还有什么？好吧，这是不可能定义的，因为静态变量独立于任何类实例而存在。这就是`T`他们看不见的原因。

另一方面，使用具体的泛型类型添加静态是没有问题的：

```
class List<T> {
    public static List<Integer> CONSTANT_LIST = new List(1, 2, 3);
    ...
} 
```

# django - modelform 不通过文件上传验证

> ID：12340553
> 
> 赞同：2
> 
> 时间：2012-09-09T15:53:48.017
> 
> 标签：django, oracle10g

这是我第一次尝试实现“文件上传功能”，我需要您的帮助。我正在处理旧数据库，我应该在以这种方式创建的表中进行文件上传：

```
CREATE TABLE  "LICENCE" 
(   "ID" NUMBER NOT NULL ENABLE, 
"VEH_ID" NUMBER NOT NULL ENABLE, 
"DTP_ID" NUMBER NOT NULL ENABLE, 
"LICENCENO" VARCHAR2(50 CHAR) NOT NULL ENABLE, 
"ISSUEDATE" DATE, 
"STARTDATE" DATE, 
"EXPIREDATE" DATE, 
"DOCPATH" VARCHAR2(500 CHAR), 
"CHECKFLAG" NUMBER(1,0) NOT NULL ENABLE, 
 CONSTRAINT "LIC_PK" PRIMARY KEY ("ID") ENABLE, 
 CONSTRAINT "LIC_DTP_FK" FOREIGN KEY ("DTP_ID")
  REFERENCES  "DOCTYPES" ("ID") ENABLE, 
 CONSTRAINT "LIC_VEH_FK" FOREIGN KEY ("VEH_ID")
  REFERENCES  "VEHICLES" ("ID") ENABLE)/ 
```

使用inspectdb，我得到了这个模型：

```
class Licence(models.Model):
    id = models.DecimalField(unique=True, primary_key=True, max_digits=127, decimal_places=0)
    veh_id = models.ForeignKey(Vehicles, db_column='veh_id')
    dtp_id = models.ForeignKey(Doctypes, db_column='dtp_id')
    licenceno = models.CharField(max_length=200)
    issuedate = models.DateField(null=True, blank=True)
    startdate = models.DateField(null=True, blank=True)
    expiredate = models.DateField(max_length=2000, blank=True)
    docpath = models.CharField(max_length=200)
    checkflag = models.IntegerField()

    def __unicode__(self):
        return self.licenceno 
```

我应该如何处理上传？阅读django文件上传文档后，我的想法是修改docpath到filefield。这是正确的做法吗？因为我尝试了它并且表单没有通过验证，而我得到“未选择文件”。有人可以指导我吗？

我的views.py是：

```
def upload(request):

    if "doc-form" in request.POST:
        form = LicenceForm(data=request.POST, files=request.FILES)

        if form.is_valid():
            form.save()
            return render_to_response('bingo.html', locals(), context_instance=RequestContext(request)
    else:
        form = LicenceForm()

    return render_to_response('upload.html', locals(), context_instance=RequestContext(request)) 
```

和我模板中的表格：

```
<form enctype="multipart/form-data" id="insertDocsForm" method="post" action='/upload/'>{% csrf_token %}
   <div class="id">
   {{ form.id.errors }}
    <label for="id"></label>
   {{ form.id }}
  </div>
  <div class="veh_id">
   {{ form.veh_id.errors }}
    <label for="veh_id">veh:</label>
  {{ form.veh_id }}
  </div>
  <div class="dtp_id">
   {{ form.dtp_id.errors }}
    <label for="dtp_id">dpt:</label>
   {{ form.dtp_id }}
  </div>
  <div class="licenceno">
   {{ form.licenceno.errors }}
    <label for="licenceno">lic:</label>
   {{ form.licenceno }}
  </div>
  <div class="issuedate">
   {{ form.issuedate.errors }}
    <label for="issuedate">isdate:</label>
   {{ form.issuedate }}
  </div>
  <div class="startdate">
   {{ form.startdate.errors }}
    <label for="startdate">stdate</label>
   {{ form.startdate }}
  </div>
    <div class="expiredate" >
   {{ docform.expiredate.errors }}
    <label for="expiredate">exdate:</label>
   {{ form.expiredate }}
  </div>
  <div class="docpath">
   {{ form.docpath.errors }}
    <label for="docpath"></label>
   {{ form.docpath }}
  </div>
  <div class="checkflag">
   {{ form.checkflag.errors }}
    <label for="checkflag"></label>
   {{ form.checkflag }}
  </div>
  <p>{{ form.errors }}

     {{ form.docpath.errors }}
  </p>
  <input type="hidden" name="doc-type" value="doc-form"
  <input type="submit" id="id_docSubmit"  value="Upload">
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:26:29.353

您需要`FileField`在模型中具有将存储和充当文件的字段。你的模型似乎没有。

HTML 表单的另一个注意事项是`enctype="multipart/form-data"`：

```
<form enctype="multipart/form-data" method="post" action="/foo/"> 
```

# c# - 有没有办法在递归调用之前检查可用的堆栈大小？（C＃）

> ID：12340558
> 
> 赞同：10
> 
> 时间：2012-09-09T15:54:22.553
> 
> 标签：c#, recursion, stack, artificial-intelligence, stack-overflow

对于 C# AI 程序，我使用递归调用来找到最佳下一步（使用 30x30 数组来存储当前棋盘状态）。对于我所做的每一步，我想看看我可以从新的棋盘状态中做出的哪些可能的移动是最好的......等等，直到我达到“游戏结束”的位置（在那个位置上没有进一步的移动可能）状态）或计时器停止该过程并且不再进行递归调用（并且返回“最佳”已知位置）。这只是为了解释为什么我必须使用递归（它不是尾递归）并且我不能使用单个（全局）板状态，而是必须从当前状态中搜索所有可能的板状态。

（有时）我得到一个 System.StackOverflowException。有没有办法在下一次递归调用之前检查可用的堆栈空间？然后我可以将当​​前状态作为“迄今为止找到的最佳位置”返回，而不是进行下一次递归调用。即，当可用堆栈变得太小时，它也应该算作基本情况。

当然，另一种选择可能是将每个递归调用放在 try..catch 块中，并通过将 System.StackOverflowException 用作基本案例来处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:56:20.643

实际上，如果现有堆栈空间不足，系统会动态扩展堆栈大小。因此，即使您*可以*测试堆栈的大小，也无所谓。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774%28v=vs.85%29.aspx)详细信息

> 系统根据需要从保留的堆栈内存中提交额外的页面，直到堆栈达到保留大小减去一页（用作防止堆栈溢出的保护页面）或系统内存太低以至于操作失败”。

也就是说，在递归发生之前，堆栈是一种大小；如果递归导致堆栈溢出，则堆栈在发生这种情况时是一个新的大小。

由于您无法捕获`StackOverflowException`, 而不是终端递归，因此您可以使用尾递归。以下链接提供了一些关于将终端recusion 转换为tail recusion 的详细信息：[http ://www.thomaslevesque.com/2011/09/02/tail-recursion-in-c/](http://www.thomaslevesque.com/2011/09/02/tail-recursion-in-c/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:00:57.050

您可以使用队列 + 循环 ( `Queue<TNode>`+ `while (queue.MoveNext())`) 而不是递归并限制队列的大小。

或者您可以计算对该方法的**打开调用**并以这种方式限制递归。（计数条目和退出，如果条目 - 存在 > maxOpenCalls，则不进入递归）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T16:03:39.220

如果你真的想走这条路，你可以使用[`EnsureSufficientExecutionstack`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.runtimehelpers.ensuresufficientexecutionstack)方法。

正如其他人指出的那样，从 .NET 2.0 开始，您**无法**捕获 a `StackOverflowException`，但是，从 MSDN 文档中您知道先前的方法具有以下行为：

> 确保剩余的堆栈空间足够大以执行一般的 .NET Framework 函数。

当堆栈根据此方法不够大时，它将引发您**可以捕获**[`InsufficientExecutionStackException`](https://docs.microsoft.com/en-us/dotnet/api/system.insufficientexecutionstackexception)的异常。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T16:01:09.633

从 .NET 2 开始，您无法捕获[StackOverflowException](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx) ...

确定已经使用了多少堆栈的唯一方法是使用我强烈建议不要使用的不安全代码……最好使用显式基于堆的`Stack<T>`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-02-20T11:16:11.990

实际上你可以捕捉到 Stackoverflow 执行，当然递归方法必须配合你做一个这样的方法：

```
void Zoo()
    {
        RuntimeHelpers.EnsureSufficientExecutionStack();
        int[] baba = new int[1024 * 5];
        Zoo();
    } 
```

然后像这样调用它

```
 try
        {
            Zoo();
        }
        //catch (Exception ex)
        catch(InsufficientExecutionStackException ex)
        {
            ex.ProcessException().Show("Good God what are you doing");
        } 
```

这就是进程异常方法的工作原理

```
public static class Helper{

[System.Runtime.InteropServices.DllImport("kernel32.dll")]
    public static extern uint GetCurrentThreadId();

public static string ProcessException(this Exception ex)
    {
        StringBuilder strBuild = new StringBuilder(5000);
        if (ex is InsufficientExecutionStackException)
        {
            strBuild.AppendLine("#%#%#%#%#% We Ran out of Stack Space on thread id : " + GetCurrentThreadId().ToString() + " @ :" + DateTime.Now.ToString() + " #%#%#%#%#%");
            strBuild.AppendLine(ex.Message);
            string[] ribals = ex.StackTrace.Split('\n');
            strBuild.AppendLine(String.Join("\n", ribals.Take(3).ToArray()));
            strBuild.AppendLine("\nLike this you can have many more lines ...\n");
            strBuild.AppendLine("Main issue  found here :\n" + ribals.Last());
            strBuild.AppendLine("#%#%#%#%#% We Ran out of Stack Space on thread id : " + GetCurrentThreadId().ToString() + " @ :" + DateTime.Now.ToString() + " #%#%#%#%#%");
            return strBuild.ToString();
        }
        Exception inner = ex;
        Enumerable.Range(0, 30).All(x =>
        {
            if (x == 0) strBuild.Append("########## Exception begin on thread id : " + GetCurrentThreadId().ToString() + " @ :" + DateTime.Now.ToString() + " ##########\n");
            strBuild.Append("---------------------[" + x.ToString() + "]---------------------\n");
            strBuild.Append("Message : " + inner.Message + "\nStack Trace : " + inner.StackTrace + "\n");
            strBuild.Append("---------------------[" + x.ToString() + "]---------------------\n");
            inner = inner.InnerException;
            if (inner == null)
            {
                strBuild.Append("########## Exception End on thread id : " + GetCurrentThreadId().ToString() + " @ :" + DateTime.Now.ToString() + " ##########\n\n");
                return false;
            }
            return true;
        });
        return strBuild.ToString();
    }
} 
```**

# c++ - 在 recvfrom 系统调用期间取消 C++11 std::thread？

> ID：12340563
> 
> 赞同：8
> 
> 时间：2012-09-09T15:55:28.150
> 
> 标签：c++, linux, c++11, pthreads

我正在使用 C++11 std::thread。它的主循环包括一个阻塞的 recvfrom() 调用，它侦听到达 DATAGRAM 套接字的 UDP 数据包，以及一些解析消息并在进程中操作 STL 容器负载的复杂代码。

线程属于一个类（`helloexchange`），由构造函数启动，应该在析构函数中取消。出于显而易见的原因，我不想强​​行终止线程，因为这可能会破坏部分位于类之外的数据结构。

当使用`pthread`代替时`std::thread`，有一种`pthread_cancel`方法，它与 结合使用`pthread_setcancelstate`，提供了我需要的所有功能：它只会在线程在某些系统调用中阻塞时取消线程，并且可以在某些部分完全禁用取消。一旦再次启用，就会执行取消。这是工作`pthread`代码的完整示例：

```
#include <arpa/inet.h>
#include <unistd.h>
#include <iostream>
#include <sys/socket.h>
#include <sys/types.h>
#include <cstdio>
#include <pthread.h>
#include <net/if.h>
#include <ifaddrs.h>

int sock;

void *tfun(void *arg) {
    std::cout << "Thread running" << std::endl;
    while(true) {
        char buf[256];
        struct sockaddr_in addr;
        addr.sin_family = AF_INET;
        socklen_t addrlen = sizeof(addr);
        //allow cancelling the thread
        pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);

        //perform the blocking recvfrom syscall
        int size = recvfrom(sock, (void *) buf, sizeof(buf), 0,
            (struct sockaddr *) &addr, &addrlen);

        //disallow cancelling the thread
        pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, NULL);

        if(size < 0) {
            perror("Could not receive packet");
            return NULL;
        } else {
            //process the packet in the most complex ways
            //you could imagine.
            std::cout << "Packet received: " << size << " bytes";
            std::cout << std::endl;
        }
    }
    return NULL;
}

int main() {
    //open datagram socket
    sock = socket(AF_INET, SOCK_DGRAM, 0);
    if(sock < 0) {
        perror("Could not open socket");
        return 1;
    }
    //bind socket to port
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(1337);
    addr.sin_addr.s_addr = 0;
    if(bind(sock, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
        perror("Could not bind datagram socket");
        return 2;
    }
    //create the listener thread
    pthread_t t;
    if(pthread_create(&t, NULL, tfun, NULL) != 0) {
        perror("Could not thread");
        return 3;
    };
    //wait
    std::cin.get();
    //cancel the listener thread. pthread_cancel does not block.
    std::cout << "Cancelling thread" << std::endl;
    if(pthread_cancel(t) != 0) {
        perror("Could not cancel thread");
    }
    //join (blocks until the thread has actually cancelled).
    std::cout << "Joining thread" << std::endl;
    if(pthread_join(t, NULL) != 0) {
        perror("Could not join thread");
    } else {
        std::cout << "Join successful" << std::endl;
    }
    //close socket
    if(close(sock) != 0) {
        perror("Could not close socket");
    };
} 
```

但是，`std::thread`不支持`cancel`，也不`std::this_thread`支持`setcancelstate`（您会在[此处](http://en.cppreference.com/w/cpp/thread)找到参考）。但是，它确实支持`native_handle`，它返回内部使用的`pthread_t`id。但是，将 pthread_cancel() 发送到线程的本机句柄的明显方法会导致分段错误：

```
#include <iostream>
#include <thread>
#include <cstdio>

#include <arpa/inet.h>
#include <unistd.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <pthread.h>
#include <net/if.h>
#include <ifaddrs.h>

int sock;

void tfun() {
    std::cout << "Thread running" << std::endl;
    while(true) {
        char buf[256];
        struct sockaddr_in addr;
        addr.sin_family = AF_INET;
        socklen_t addrlen = sizeof(addr);

        //perform the blocking recvfrom syscall
        int size = recvfrom(sock, (void *) buf, sizeof(buf), 0,
            (struct sockaddr *) &addr, &addrlen);

        if(size < 0) {
            perror("Could not receive packet");
            return;
        } else {
            //process the packet in the most complex ways
            //you could imagine.
            std::cout << "Packet received: " << size << " bytes";
            std::cout << std::endl;
        }
    }
    return;
}

int main() {
    //open datagram socket
    sock = socket(AF_INET, SOCK_DGRAM, 0);
    if(sock < 0) {
        perror("Could not open socket");
        return 1;
    }
    //bind socket to port
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(1337);
    addr.sin_addr.s_addr = 0;
    if(bind(sock, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
        perror("Could not bind datagram socket");
        return 2;
    }
    //the listener thread
    std::thread *t = new std::thread(&tfun);
    //wait
    std::cin.get();
    //cancel the listener thread. pthread_cancel does not block.
    std::cout << "Cancelling thread" << std::endl;
    if(pthread_cancel(t->native_handle()) != 0) {
        perror("Could not cancel thread");
    }
    //join (blocks until the thread has actually cancelled).
    std::cout << "Joining thread" << std::endl;
    t->join();
    delete t;
    //close socket
    if(close(sock) != 0) {
        perror("Could not close socket");
    };
} 
```

结果是：

```
(gdb) run
Starting program: /tmp/test/test-dbg 
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/usr/lib/libthread_db.so.1".
[New Thread 0x7ffff6550700 (LWP 11329)]
Thread running

Cancelling thread
Joining thread

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7ffff6550700 (LWP 11329)]
0x00007ffff6e67b45 in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/libstdc++.so.6 
```

有没有办法取消`std::thread`它在系统调用中阻塞的时间？

**编辑**

我不是要跨平台解决方案；符合 POSIX 的解决方案就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:25:15.267

我将建议一种解决方法，类似于众所周知的[自管道技巧](http://cr.yp.to/docs/selfpipe.html)，以解除阻塞[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)并回避整个混乱的线程取消业务。

由于您知道[`socket(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)线程阻塞的 IP 地址和端口，因此只有[`sendto(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)一些从主线程发送到它的知名哨兵数据包，这表明是时候跳出循环了。

这样您就不必颠覆`std::thread`抽象并且可以保持合理的可移植性。

### 编辑0：

如果您不喜欢*解决方法*，请将其称为*技术*:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:02:59.720

您可以通过向线程发送信号（例如，SIGUSR1）来中断recvfrom。在 linux 上，您必须禁用 libc 自动重启行为（有关详细信息，请参阅[recv() 不会被多线程环境](https://stackoverflow.com/questions/3582226/recv-is-not-interrupted-by-a-signal-in-multithreaded-environment)中的信号中断）才能正常工作。

# python - Pyro4 不允许两个以上的客户端访问一个 URI

> ID：12340565
> 
> 赞同：3
> 
> 时间：2012-09-09T15:55:34.097
> 
> 标签：python, concurrency, network-programming, pyro

我正在使用 pygame 在 Python 中创建一个基于回合的策略游戏。我发现编写套接字非常困难，所以我求助于 Pyro 来分享游戏板的状态。但是，Pyro 似乎一次无法支持超过 2 个连接。

我正在通过 localhost 在 localhost 上运行名称服务器

```
python -m Pyro4.naming 
```

测试用例“服务器”：

```
import Pyro4
class Testcase:
    def __init__(self):
        self.values = [1, 2, 3, 10, 20, 30]

    def askvalue(self, i):
        return self.values[i]

daemon = Pyro4.Daemon()
ns = Pyro4.locateNS()

uri = daemon.register(Testcase())
ns.register("thetest", uri)
daemon.requestLoop() 
```

和客户：

```
import Pyro4, time

ns = Pyro4.locateNS()

casetester = Pyro4.Proxy("PYRONAME:thetest")

while True:
    print "Accessing remote object:"
    print casetester.askvalue(1)
    print "staying busy"
    time.sleep(10) 
```

前两个客户端的输出：

```
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155: UserWarning: HMAC_KEY not set, protocol data may not be secure
  warnings.warn("HMAC_KEY not set, protocol data may not be secure")
Accessing remote object:
2
staying busy
Accessing remote object:
2
staying busy 
```

并重复

第三个客户端的输出：

```
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155: UserWarning: HMAC_KEY not set, protocol data may not be secure
  warnings.warn("HMAC_KEY not set, protocol data may not be secure")
Accessing remote object: 
```

并挂起。

来自第四个、第五个（可能还有更多）客户端的输出：

```
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155: UserWarning: HMAC_KEY not set, protocol data may not be secure
  warnings.warn("HMAC_KEY not set, protocol data may not be secure") 
```

在这个阶段，我给名称服务器一个 ^C，客户端 3、4、... 给出这个输出并崩溃：

```
Traceback (most recent call last):
  File "client.py", line 3, in <module>
    ns = Pyro4.locateNS()
  File "/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/naming.py", line 323, in locateNS
    raise Pyro4.errors.NamingError("Failed to locate the nameserver")
Pyro4.errors.NamingError: Failed to locate the nameserver 
```

与此同时，客户 1 和 2 保持忙碌。

但是，中断其中一个活动客户端将使其中一个挂起的客户端开始运行。

我已经尝试通过“export PYRO_SERVERTYPE = multiplex”来切换线程，但这并没有改变行为。最大连接数的设置似乎是 200。将其设置为 1000 也没有解决我的问题。

我读过 Pyro 缺乏可扩展性，但我肯定能够获得至少 10 个连接吗？

如何一次将两个以上的客户端连接到 Pyro4 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:38:13.670

回答我自己的问题，希望这会迅速出现在谷歌上！

这不是一个“完美”的答案，但它是一个有效的组合。服务器代码保持不变，但客户端代码变为：

```
import Pyro4, time

global ns
global casetester

def connect():
    global ns
    global casetester
    ns = Pyro4.locateNS()
    casetester = Pyro4.Proxy("PYRONAME:thetest")

def disconnect():
    global ns
    global casetester
    del ns
    del casetester

while True:
    print "Accessing remote object:"
    connect()
    print casetester.askvalue(1)
    disconnect()
    print "staying busy"
    time.sleep(3) 
```

到处都是额外的“全球”，因为从不假设。

为什么这行得通？因为我建立一个连接，访问远程对象，然后删除连接。

我觉得这个解决方案非常难看，但我会一直使用它，直到找到“正确”的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T12:09:38.073

我有一个类似的问题。我独立找到了您的`global`解决方案，但它并没有帮助很长时间，随着应用程序规模的增加，该错误又回来了。经过多次试验和错误，我想我现在可能已经发现了问题......用户错误。

根据[http://pythonhosted.org/Pyro4/nameserver.html](http://pythonhosted.org/Pyro4/nameserver.html)，名称服务器本身就是一个代理。所以我确保将它们与“With”语句一起使用，就像我的其他 pyro 代理一样”

```
with Pyro4.locateNS() as ns:
  uri = ns.lookup('Object name')
with Pyro4.proxy(uri) as obj:
  obj.SomeMethod() 
```

对名称服务器的每次引用也做同样的事情，比如你的`ns.register('thetest', uri)`电话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T01:40:41.620

我有完全相同的考虑。但是当我和你运行类似的代码时，我发现 Pyro4 (2014-12) 没有这样的问题。

我测试了 10 个客户端同时调用它。它工作得很好。

我正在写这篇文章，以防它对像我这样的人有用。

# 服务器代码

```
import Pyro4
import time
class Testcase:
    def __init__(self):
        self.value = 1

    def askvalue(self, i):
        # Simulate doing some work.
        time.sleep(1)

        self.value += 1
        return self.value

daemon = Pyro4.Daemon()
ns = Pyro4.locateNS()

uri = daemon.register(Testcase())
ns.register("thetest", uri)
daemon.requestLoop() 
```

# 客户

```
import Pyro4, time

ns = Pyro4.locateNS()

casetester = Pyro4.Proxy("PYRONAME:thetest")

while True:
    print("Accessing remote object:")
    print (casetester.askvalue(1))
    print ("staying busy") 
```

# mysql - 当我使用 where 时查询失败

> ID：12340573
> 
> 赞同：1
> 
> 时间：2012-09-09T15:56:20.567
> 
> 标签：mysql, sql, pdo

我有这个代码

```
$marker = 'werkz';
$sql = "SELECT name, marker FROM sidebar";
$q = $db->query($sql);
$q->setFetchMode(PDO::FETCH_ASSOC);
while ($r = $q->fetch()) {
    echo'<option>' . $r[name] . '</option>';
    } 
```

它有效，但是当我添加`WHERE marker = $maker`; 查询失败。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T15:58:53.717

由于您正在使用**[`PDO`](http://www.php.net/manual/en/pdo.prepared-statements.php)**，因此在传递参数时这样做。

```
$marker = 'werkz';
$sql = "SELECT name, marker FROM sidebar WHERE marker = ?";
$q = $db->query($sql);
$q->bindParam(1, $maker);
$q->setFetchMode(PDO::FETCH_ASSOC);
while ($r = $q->fetch()) {
    echo'<option>' . $r[name] . '</option>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:57:38.833

$market 是一个字符串。所以你应该把它放在'

类似于 ... where marker='".$marker."'";

# perl - 跳过有问题的 DAT 并继续执行下一个 DAT 并将错误或错过的 DAT 列表放在 Perl 中的单独文本文件中

> ID：12340575
> 
> 赞同：0
> 
> 时间：2012-09-09T15:56:34.350
> 
> 标签：perl

我这里还有一个问题，我有几个数据并想合并它们。但是脚本首先检查所有 DAT 的标头，如果不匹配，它将引发错误并停止脚本。现在我想运行跳过有问题的 dat 的脚本，并在单独的文本文件中输出错误，并列出错误的 DAts 和原因。有人可以帮忙吗？这是我到目前为止所拥有的：

```
use strict;
my $rootdir = $ARGV[0];
die "usage: perl mergetxtfiles.pl <folder>" if ($#ARGV != 0);
#$rootdir =~ s/\\/\\\\/g;

print "\nFolder = $rootdir\n\n";
opendir(DIR, $rootdir)
    or die "failed opening the directory $rootdir";
open(OF,">:utf8",'combined_'.time.'.dat')
    or die "failed opening the file";

my $icr         = 0;
my $cnt         = 0;
my $header      = '';
my $header_flag = 0;

while(my $fname = readdir(DIR)) {

    # add extensions if needed
    if ($fname =~ m/(\.txt)|(\.dat)|(\.csv)$/i) {

        $icr++;
        my $fnamepath = $rootdir.'\\'.$fname;
        print "\($icr\) $fname\n";
        open(IF, "<:utf8", $fnamepath)
            or die "ERROR: cannot open the file\n$fnamepath "; 

        my $sep_icr = 0;
        while(<IF>) {

            my $line = $_;
            chomp $line;
            next if (/^$/);

            $sep_icr++;
            $cnt++;

            my @ar = split(/\t/,$line);

            if ($cnt == 1) {

                $header_flag = 1;
                $header      = $line;
            }

            if ($sep_icr == 1 and $header_flag == 1) {

                #print "$line \n $header\n";
                if ($line ne $header) {

                    die "Headers are not same\n";
                }
                elsif (($line eq $header) and ($cnt >1)) {

                    print "INFO\: ignoring the same header for $fname \n";
                    $cnt--; 
                    next; 
                }
            }
            print OF $line."\n";
        }
        print "\--Line count= $sep_icr\n\n";
        close IF;
        #print OF "\n";
    }
}

print "\-\-\> Total line count= $cnt\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:03:50.920

### 命名循环

在您的循环中，我们必须稍微更改您的 if 子句和外循环：

```
FILE:
while(my $fname = readdir(DIR)) {
  ...;
  if ($line ne $header) {
    logger($fname, "Headers not matching");
    next FILE;
  }
  ...;
} 
```

在 Perl 中，循环可以被标记，因此我们可以指定我们执行哪个循环`next`，而不是设置和检查标志。我使用了下面给出的示例日志记录函数`logger`，但您可以用适当的打印语句替换它。

### 日志记录

这可能比要求的要多，但这里有一个小日志功能以提高灵活性。参数是文件名、原因和可选的严重性。如果不需要，您可以删除严重性代码。严重性无论如何都是可选的，默认为`debug`.

```
open my $logfile, ">>", "FILENAME" or die "..."; # open for append
sub logger {
  my ($file, $reason, $severity) = (@_, 'debug');
  $severity = {
    debug => '',
    info  => 'INFO',
    warn  => '!WARN!',
    fatal => '!!!ERROR!!!',
  }->{$severity} // $severity; # transform the severity if it is a name we know
  $severity .= ' ' if length $severity; # append space if we have a severity
  print {$logfile} $severity . qq{$reason while processing "$file"\n};
} 
```

如果调用`logger("./foo/bar", "Headers not matching", 'warn')`它会输出：

```
!WARN! Headers not matching while processing "./foo/bar" 
```

如果需要，将打印的错误消息更改为机器可读的内容。

### 风格提示和技巧：

如果发现这些行更优雅：

```
die "usage: ...\n" unless @ARGV;
my ($rootdir) = @ARGV; 
```

注意末尾的换行符（抑制“第 3 行”等）。在标量上下文中，数组返回数组长度。在第二行中，我们可以通过在列表上下文中分配来避免数组下标。多余的元素被忽略。

* * *

反而

```
if ($fname =~ m/(\.txt)|(\.dat)|(\.csv)$/i) { ...; } 
```

我们可以说

```
next unless $fname =~ m/(?: \.txt | \.dat | \.csv )$/xi; 
```

并避免不必要的意图，从而提高可读性。

我修改了正则表达式，以便*所有*后缀都必须放在末尾，而不仅仅是`.csv`后缀，并添加了`/x`修饰符，以便我可以在正则表达式中使用非语义空格。

* * *

Windows 和几乎所有操作系统都理解路径名中的正斜杠。所以与其

```
my $fnamepath = $rootdir.'\\'.$fname; 
```

我们可以写

```
my $fnamepath = "$rootdir/$fname"; 
```

我发现这更容易编写和理解。

* * *

这

```
while(<IF>) {
  my $line = $_; 
```

构造可以简化为

```
while(my $line = <IF>) {...} 
```

* * *

最后但同样重要的是，考虑养成使用`my`. 通常，不需要全局文件句柄，这可能会导致一些错误。

# python - 是否有提供“信号”（事件）功能的通用 Python 库，如 Django 信号？

> ID：12340576
> 
> 赞同：9
> 
> 时间：2012-09-09T15:56:37.647
> 
> 标签：python, events, python-2.7, signals

我想在非 Django 项目中使用[Django 信号之类的东西。](https://docs.djangoproject.com/en/dev/topics/signals/)我以为我过去见过这样的图书馆，但我无法通过通常的搜索找到一个。

[Python 的信号库](http://docs.python.org/library/signal.html)不提供相同的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T16:09:13.387

为此有许多模块。以下是一些选项，按我认为它们的受欢迎程度排序：

*   [blinker](https://github.com/jek/blinker/)模块提供信号/事件机制
*   [PyDispatcher](http://pydispatcher.sourceforge.net/)为您提供事件调度
*   PySignals模块是 Django 信号模块，[对](https://github.com/theojulienne/PySignals)Django 没有任何依赖
*   [SpiffSignal](http://pypi.python.org/pypi/SpiffSignal/0.1.0)实现了一个信号/事件框架，但它的 GitHub 页面似乎不见了

# delphi - VertScrollBar.Visible 总是返回 TRUE

> ID：12340579
> 
> 赞同：3
> 
> 时间：2012-09-09T15:56:47.010
> 
> 标签：delphi

我有一个从 TScrollBox 派生的自定义控件。在运行时，我需要知道垂直滚动条是否可见。如果我询问 Visible 属性，它总是返回 true，无论滚动条是否可见！

```
function TMyScrollPanel.ScrollVisible: boolean;
begin
 Result:=  Self.VertScrollBar.Visible;            <----------- always true
end; 
```

但是，这可以正常工作：

```
function VertScrollBarVisible(WindowHandle: THandle): Boolean;                  
begin
 Result:= (GetWindowlong(WindowHandle, GWL_STYLE) AND WS_VSCROLL) <> 0
end; 
```

第一个功能有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T16:14:30.800

~~读取滚动条`Visible`属性只会检索 VCL 控件状态。该属性不会从实际的滚动条窗口中检索当前状态。改为使用该`IsScrollBarVisible`属性。~~

请改用该`IsScrollBarVisible`方法来检查滚动条是否可见，因为可滚动窗口可以滚动。

读取`Visible`属性仅检索其可见性设置的缓存值（可见或不可见）。对于可滚动窗口，该属性不会从实际窗口中检索当前状态。

# iphone - GameCenter 功能崩溃应用程序 - 谁能帮忙解决？

> ID：12340582
> 
> 赞同：0
> 
> 时间：2012-09-09T15:56:53.460
> 
> 标签：iphone, objective-c, delegates, crash, game-center

我有一个象征性的当前 iPhone 应用程序的崩溃日志，但我无法破译问题仍然存在。

基本问题是在某些设备（尤其是旧设备）上，我的应用程序崩溃回到主屏幕。似乎是当用户在一段时间后回到我的游戏时 - 这会启动游戏中心的登录过程。我在下面粘贴了崩溃日志的相关部分：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x2e000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37c11f7e objc_msgSend + 22
1   Transfer Quiz                   0x000023c4 -[GameCenterManager callDelegate:withArg:error:] (GameCenterManager.m:113)
2   Transfer Quiz                   0x0000230c __60-[GameCenterManager callDelegateOnMainThread:withArg:error:]_block_invoke_0 (GameCenterManager.m:103)
3   libdispatch.dylib               0x346fdc52 _dispatch_call_block_and_release + 6
4   libdispatch.dylib               0x346ffee0 _dispatch_main_queue_callback_4CF$VARIANT$mp + 188
5   CoreFoundation                  0x358432a6 __CFRunLoopRun + 1262
6   CoreFoundation                  0x357c649e CFRunLoopRunSpecific + 294
7   CoreFoundation                  0x357c6366 CFRunLoopRunInMode + 98
8   GraphicsServices                0x37462432 GSEventRunModal + 130
9   UIKit                           0x332d2cce UIApplicationMain + 1074
10  Transfer Quiz                   0x000030d4 main (main.m:16)
11  Transfer Quiz                   0x000021a8 start + 32 
```

以下是 GameCenterManager callDelegate 的代码：

```
- (void) callDelegate: (SEL) selector withArg: (id) arg error: (NSError*) err
{
assert([NSThread isMainThread]);
if([delegate respondsToSelector: selector])
{
    if(arg != NULL)
    {
        [delegate performSelector: selector withObject: arg withObject: err];
    }
    else
    {
        [delegate performSelector: selector withObject: err];
    }
}
else
{
    NSLog(@"Missed Method");
}
} 
```

该代码是外部教程网站上教程的一部分 - 我无法确定导致我的应用程序在此处崩溃的问题。

有谁知道代码导致崩溃的原因？任何帮助将非常感激。我发现很难在任何设备上复制崩溃，并且使用 NSZombies 也无法正常工作，可能是因为我无法重新创建崩溃。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:02:04.483

您调用的选择器似乎需要 2 个参数：一个“arg”和一个“error”。现在的问题是，如果 'arg' 为 nil，则您仅将选择器调用到**一个参数**- 所以第二个参数基本上是垃圾，并且当调用选择器的对象尝试访问第二个参数时，它会崩溃. 总而言之，您不需要这样做`if()`- 始终将两个参数都传递给选择器并让委托检测其第一个参数是否为 nil。

# php - 在 centos 5 中调试 APC

> ID：12340585
> 
> 赞同：1
> 
> 时间：2012-09-09T15:57:19.360
> 
> 标签：php, apc

pecl安装apc

## pecl/apc 已安装，与发布的版本 3.1.13 相同

安装失败

## 这表明我已经安装了 apc，但是 apc 不能工作

```
/usr/local/lib/php.ini
/usr/local/etc/php5/cgi/php.ini
/etc/php.ini
extension=apc.so 
```

## 我在所有 php.ini 中添加最后一行代码

但我检查了我的**phpinfo** 我的 apc 不在列表中

当我运行该函数时，这就是我得到的调用未定义函数 apc_fetch()

我怎么能调试这个问题顺便说一句我什至重新启动我的服务器。

# java - java程序是如何编译和运行的？

> ID：12340603
> 
> 赞同：-3
> 
> 时间：2012-09-09T15:59:55.977
> 
> 标签：java, jvm

这个问题非常广泛，但我想深入了解..我可以编写和运行java程序，但仍然让我感到困惑的是整个程序是如何实现的。我们有将程序转换为字节码的编译器JVM。JVM如何分配内存？JVM 是否具有内置的堆和堆栈，或者 JVM 的解释器是否将内存分配给主内存中的对象。原谅我的无知……但这真的让我很困惑。

在此先感谢.. Sriram

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:03:32.103

*   `.java`文件从人类可读的形式转换为`byte code`使用`Java Compiler`.

*   `JVM` **加载**类（加载在初始化之前完成）。

*   `JVM`在此期间还要注意`creation`和`management`。`String Literals`

*   当`class`被实例化时， 由和`instance`分配**内存空间**，这取决于`JVM`分配的**内存位置**。`heap``hashCode`**`JVM`**

# mysql - MySQL Cluster 能否在大量写入和大量写入的情况下匹配 NoSQL 性能

> ID：12340621
> 
> 赞同：0
> 
> 时间：2012-09-09T16:02:51.887
> 
> 标签：mysql, database, nosql, scalability, throughput

我正在设计一款回合制策略游戏，允许玩家保存游戏状态，以便他们可以在闲暇时玩/恢复游戏。这会创建一个数据环境，其中可能会发生大量并发读/写。此外，在游戏的上下文中，玩家可以使用许多不同的变量来转换数据。

我们有意实施了基于回合的设计来帮助减少并发读/写的数量，但是它仍然会导致一个非常动态的游戏环境，其中数据会不断转换（显然，鉴于它是一个游戏，可能会有一个1:1 的读写比），并且考虑到它的动态性，可能更适合无​​模式设计。

我现在想知道的是，是否有人看到 MySQL 集群在这样的环境中表现如何？它的性能是否与 Couchbase 或 Riak 等 NoSQL 解决方案一样好？对于写入密集型环境，哪个（整体上）表现更好？在峰值吞吐量下，哪个数据的访问时间更一致？此外，这将与 ACID 合规性保持最接近（和最快）——数据版本控制非常重要，即使它是基于回合的游戏，玩家也应该能够立即看到他们的选择——而不会遇到麻烦的锁定等问题。

# java - 使用 Restful 接口上传文件

> ID：12340623
> 
> 赞同：0
> 
> 时间：2012-09-09T16:03:18.040
> 
> 标签：java, spring, rest

我正在尝试将文件（如图像文件）上传到这样的 Restful 服务器：

```
curl -X POST -H "Content-Type: multipart/form-data; boundary=----------------------------4ebf00fbcf09" --data-binary @sample.jpg http://localhost:3000/test 
```

但是，我的 Restful 服务器资源似乎没有处理该请求。

*   如何将文件（小文件和大文件）上传到 Spring Web 资源
*   “附件”类型的上传与通过简单的表单上传完全不同吗？
*   如果 Content-Type:`multipart/form-data; boundary=...`我怎样才能获得实际的内容类型，例如：“image/jpeg”等。

这是我的网络资源的代码片段：

```
 try 
          {
            ServletFileUpload upload = new ServletFileUpload();
            FileItemIterator fileIterator = upload.getItemIterator(req);
            while (fileIterator.hasNext()) {
                FileItemStream item = fileIterator.next();
                byte[] content = ByteStreams.toByteArray(item.openStream());
            }
             ...
          } 
```

我担心的是代码可以支持的客户端上传类型，我使用了与此代码一起使用的 Rest Console Chrome 插件和上传附件，但上面的 cURL 代码不起作用。

另外，`FileItemIterator`可以从 a 中检索到的可能 s 是`HttpServletRequest`什么？

下面是我的 restful web 服务资源的完整代码：http: [//bit.ly/QwTOLw](http://bit.ly/QwTOLw)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:17:22.810

您可能想查看 Spring 手册中有关[Spring's multipart (file upload) support 的部分](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-multipart)。确保您`MultipartResolver`在上下文中声明了一个 bean，并考虑将文件映射为`MultipartFile`表单支持对象，这样您就可以让 Spring 自己处理解析/读取多部分数据（而不是尝试自己解析 FileItemIterator、ServletFileUpload 等）。

# java - 如何将逗号分隔的字符串绑定到 Spring 形式的 Java 集合（列表）？

> ID：12340630
> 
> 赞同：2
> 
> 时间：2012-09-09T16:03:53.670
> 
> 标签：java, spring, jsp, spring-mvc, csv

我陷入了一种情况，即我在用户输入标签的 JSP 中有一个输入元素。例如 java、foo、bar、anotherTag..etc

```
<c:url var="saveUrl" value="/create" />
    <form:form modelAttribute="myAttribute" method="POST"
        action="${saveUrl}">

        <form:input path="myTitle" />
        <form:textarea path="myPost" />

        <form:input type="text" id="tagInput"path="???" />

        <input type="submit" value="create" />
</form:form> 
```

现在在我的域模型中对应于这个输入是

```
private List<Tag> listOfTags 
```

如何将 csv 绑定到列表。如果我在路径中输入 listOfTags （由于显而易见的原因这是错误的），我会得到不正确的绑定异常。如何将 csv 转换（或绑定）到 List 以便正确提交 Spring 表单并且 listOfTags 获取在 JSP 中输入的标签。实现它的最佳方法是什么？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:30:59.103

我不确定，但试试这个。做一个简单的 html 输入：

```
<input type="text" id="tagInput" name="myTags" /> 
```

然后在您的控制器中执行以下操作：

```
@RequestMapping(value="/create", method=RequestMethod.POST)
public void create(..., @ModelAttribute("myAttribute") MyClass myAttribute,
                    @RequestParam("myTags") String myTags, ...) {
    ...
    myAttribute.setListOfTags(Arrays.asList(myTags.split(",")));
    ...
} 
```

注意：有关绑定和转换对象的更通用方法，您可能需要查看[PropertyEditors](https://stackoverflow.com/questions/12439268/how-to-submit-a-form-with-spring-mvc-when-one-of-the-field-is-not-a-string-but-a/12439573#12439573)和[Converters](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:41:48.593

我建议尝试将其直接绑定到`listOfTags`属性。为了使其工作，只需将具有一个`String`类型参数（或定义静态方法`valueOf(String)`）的构造函数添加到`Tag`类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T01:15:45.393

很确定你可以做这样的事情：

```
<c:forEach var="i" begin="1" end="10">
    <form:input type="text" path="listOfTags" />
</c:forEach> 
```

您让用户将每个标签输入到单独的文本输入中。这是因为 Spring 在绑定时会自动将具有相同表单`name`的多个输入绑定到 List。

您可以使用一些 jQuery 糖只显示一两个，然后提供一个小部件来显示更多标签输入。或者甚至编写一些很酷的 JS 来填充单个文本输入的输入，就像 StackOverflow 在添加标签时所做的那样。

# c# - 名称空间未被识别？

> ID：12340633
> 
> 赞同：1
> 
> 时间：2012-09-09T16:04:30.287
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio (2010) 中创建了一个非常简单的域层。然后我使用新的测试向导创建了一个基本的单元测试。但是，当我尝试输入 using 语句以便测试我的代码时。它说找不到我的命名空间...这是我第一次使用 Visual Studio，所以我不知道自己在做什么错误的。

我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Home
{
    class InventoryType
    {

        /// <summary>
        /// Selects the inventory type and returns the selected value
        /// </summary>
        public class InventorySelect
        {
            private string inventoryTypes;
            public String InventoryTypes
            {
                set
                {
                    inventoryTypes = value;
                }

                get
                {
                    return inventoryTypes;
                }
            }

            /// <summary>
            /// Validate that the inventory is returning some sort of value
            /// </summary>
            /// <returns></returns>
            public bool Validate()
            {
                if (InventoryTypes == null) return false;
                return true;
            }
        }
    }
} 
```

我的测试代码

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Home.InventoryType.InventorySelect;

namespace HomeTest
{
    [TestClass]
    public class TestInventoryTypeCase
    {
        [TestMethod]
        public void TestInventoryTypeClass()
        {
            InventorySelect select = new InventorySelect();
            select.inventoryTypes = "Collection";

            if (Validate() = true)
                Console.WriteLine("Test Passed");
            else
                if (Validate() = false)
                    Console.WriteLine("Test Returned False");
                else
                    Console.WriteLine("Test Failed To Run");

            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:16:46.197

using 指的是命名空间，而不是特定的类（除非您为类名添加别名）。您的 using 语句应仅包含 Home 一词。

```
using Home.InventoryType.InventorySelect; 
//becomes
using Home; 
```

这是关于使用指令的 MSDN 链接：[using Directive (C#)](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:08:45.527

将类声明`InventoryType`为`public`

`InventorySelect`类可以`private`而不是`public`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T16:20:08.227

我假设您的测试类在它自己的项目中，因此您需要添加对该项目的引用。（using 语句不添加引用，它仅允许您在代码中使用类型，而无需完全限定其名称。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T21:55:48.293

当您在解决方案中创建“多项目”时（通过将项目添加到任何现有解决方案），这些项目彼此不了解。

转到解决方案资源管理器上的测试项目，在“参考”下，右键单击并选择“添加参考”。然后选择“项目”选项卡，您将能够将项目的引用添加到测试项目。

此外，请确保将项目中的类定义为“公共”，以便能够在测试项目中访问它们。

```
namespace Home
{
    public class InventoryType
    {
            ...
    }
} 
```

请注意，您仍然需要 C# 测试类顶部的“使用”关键字：

```
using Home;

namespace HomeTest
{
    public class TestInventoryTypeCase
    {
           ...
    }
} 
```

# linux - 流水线是如何工作的？

> ID：12340634
> 
> 赞同：2
> 
> 时间：2012-09-09T16:04:36.133
> 
> 标签：linux, unix, command, kernel, pipe

有人可以解释命令内部实际发生的事情（调用的系统调用）**`ls | grep 'xxx'`**吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:12:56.007

首先，`pipe(2,3p)`调用它是为了创建具有读写端的管道。`fork(2,3p)`然后被调用两次，每个命令一次。然后`dup2(2,3p)`用于用管道的每一端替换每个分叉子项中的适当文件描述符。最后`exec(3)`在每个孩子中调用以实际运行命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:14:02.780

第一个命令的标准输出作为标准输入馈送到管道中的第二个命令。有几个系统调用您可能有兴趣更详细地了解正在发生的事情，特别是 fork(2)、execve(2)、pipe(2)、dup2(2)、read(2) 和 write (2)。

实际上，shell 将 STDIN_FILENO 和 STDOUT_FILENO 分别安排为管道的读取端和写入端。当管道中的第一个进程执行 write(2) 时，该进程的标准输出被复制为管道的写入端，类似地，当第二个进程对标准输入执行 read(2) 时，它最终从管道的读取端。

当然还有更多细节需要考虑，请查看 Richard Stevens 的书籍，如 UNIX 环境中的高级编程。

# perl - 如何将附加参数发布到editurl？

> ID：12340636
> 
> 赞同：2
> 
> 时间：2012-09-09T16:05:09.310
> 
> 标签：perl, jqgrid, catalyst

我花了几个小时查看示例和文档，试图弄清楚如何将附加参数 POST 到`editurl`，但还没有弄清楚。我正在使用 Perl 催化剂。

虽然我没有在控制器中全部编码，但我得到了我需要发布的内容来添加和编辑，而不是删除记录。我需要`inv_id`将我的控制器发布到服务器才能删除记录。

控制器/Root.pm：

```
package MyFirstGrid::Controller::Root;
use Moose;
use namespace::autoclean;

BEGIN {extends 'Catalyst::Controller'}
with 'Catalyst::TraitFor::Controller::jQuery::jqGrid';

__PACKAGE__->config(namespace => '');

sub index :Path :Args(0) {
  my ($self, $c) = @_;

  $c->detach($c->view("TT"));
}

sub getdata :Local {
  my ($self, $c) = @_;

  my $inv_rs = $c->model('DB::Inventory')->search({});
  $inv_rs = $self->jqgrid_page($c, $inv_rs);
  my @row_data;
  while (my $inv = $inv_rs->next) {
    my $single_row = {
      cell => [
        $inv->inv_id,
        $inv->client_id,
        $inv->amount,
        $inv->tax,
        $inv->total,
        $inv->note,
      ],
    };
    push @row_data, $single_row;
  }
  $c->stash->{json_data}{rows} = \@row_data;
  $c->detach($c->view("JSON")); 
}

sub postrow :Local {
  my ($self, $c) = @_;

  my $data = $c->req->params;
  my $inv_rs = $c->model('DB::Inventory')->search({inv_id => $data->{inv_id}});
  $inv_rs->update({
    client_id => $data->{client_id},
    amount => $data->{amount},
    tax => $data->{tax}, 
    total => $data->{total}, 
    note => $data->{note}, 
  });
  $c->res->status(204); 
}

sub default :Path {
  my ($self, $c) = @_;

  $c->response->body('Page not found');
  $c->response->status(404);
}

sub end : ActionClass('RenderView') {}

__PACKAGE__->meta->make_immutable;

1; 
```

索引.tt：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="[% c.uri_for('/static/css/cupertino/jquery-ui-1.8.22.custom.css') %]" />
<link rel="stylesheet" type="text/css" media="screen" href="[% c.uri_for('/static/css/ui.jqgrid.css') %]" />

<style type="text/css">
html, body {
  margin: 0;
  padding: 0;
  font-size: 75%;
}
</style>

<script src="[% c.uri_for('/static/js/jquery-1.7.2.min.js') %]" type="text/javascript"></script>
<script src="[% c.uri_for('/static/js/i18n/grid.locale-en.js') %]" type="text/javascript"></script>
<script src="[% c.uri_for('/static/js/jquery.jqGrid.min.js') %]" type="text/javascript"></script>

<script type="text/javascript">
$(function(){ 
  $("#list").jqGrid({
    url: "[% c.uri_for("getdata") %]",
    datatype: 'json',
    mtype: 'GET',
    colNames:['Inv No', 'Client ID', 'Amount','Tax','Total','Notes'],
    colModel :[ 
      //{name:'inv_id', index:'inv_id', editable:true, hidden:true, editrules:{edithidden:false}, hidedlg:true}, 
      {name:'inv_id', index:'inv_id', editable:true, hidden:true}, 
      {name:'client_id', index:'client_id', width:55, editable:true, editoptions:{size:10}},
      {name:'amount', index:'amount', width:80, align:'right', editable:true, editoptions:{size:10}}, 
      {name:'tax', index:'tax', width:80, align:'right', editable:true, editoptions:{size:10}}, 
      {name:'total', index:'total', width:80, align:'right', editable:true, editoptions:{size:10}}, 
      {name:'note', index:'note', width:150, sortable:false, editable: true, edittype:"textarea", editoptions:{rows:"2",cols:"20"}} 
    ],
    pager: '#pager',
    rowNum:10,
    rowList:[10,20,30],
    sortname: 'inv_id',
    sortorder: 'desc',
    viewrecords: true,
    caption: 'My First Grid: Navigator',
    editurl: "[% c.uri_for("postrow") %]",
    height: 240
  }); 

  jQuery("#list").jqGrid('navGrid','#pager',
    {}, //options
    {height:280,reloadAfterSubmit:false}, // edit options
    {height:280,reloadAfterSubmit:false}, // add options
    {reloadAfterSubmit:false}, // del options 
    {} // search options
  ); 

}); 
</script>
</head>

<body>
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:09:49.637

我想您遇到的问题的根源在于*填充*网格。在填充网格期间，所有网格的行（`<tr>`元素）都获得`id`属性。在编辑和删除行期间，`id`相应行的属性值将始终发送到服务器。重要的是要知道`id`属性的值在页面上必须是唯一的。如果 的值`inv_id`是唯一的，那么您可以直接将此值用作`id`. 要通知 jqGrid 您可以添加`jsonReader: {id: "inv_id"}`作为附加网格参数的选择，或者只是将`key: true`属性添加到`inv_id`列的定义中。

我自己不使用 Perl Catalyst，但在我看来，您填充网格数据的部分（请参阅 参考资料）除了属性之外还`my $single_row = { cell => [...]}`应该包含属性（类似于）。如果它是唯一的，那么添加到列的定义中会更好，您的问题将已经解决。`id``cell``$single_row = {cell => [...], id => $inv->inv_id}``inv_id``key: true``inv_id`

如果您已经使用了另一个值，`id`并且您确实需要同时拥有这两个值：`id`然后`inv_id`您可以使用例如删除选项的[onclickSubmit](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events2)回调。这

```
onclickSubmit: function (options, rowid) {
    return {inv_id: $(this).jqGrid("getCell", rowid, "inv_id")};
} 
```

我的意思是使用以下内容

```
$("#list").jqGrid('navGrid', '#pager', {}, //options
    {height: 280, reloadAfterSubmit: false}, // edit options
    {height: 280, reloadAfterSubmit: false}, // add options
    { // del options
        reloadAfterSubmit: false,
        onclickSubmit: function (options, rowid) {
            return {inv_id: $(this).jqGrid("getCell", rowid, "inv_id")};
        }
    }
); 
```

因此，在删除操作期间发布到服务器的数据将使用附加参数进行扩展`inv_id`。

# c# - MDI子作为单例

> ID：12340639
> 
> 赞同：0
> 
> 时间：2012-09-09T16:05:46.823
> 
> 标签：c#, singleton

我的应用程序中有很多 MDI 子项，我想知道如何为他们应用单例模式。`Singleton`我为（我知道，我省略了锁）编写了一个通用类：

```
public class Singleton<T> where T: class, new() 
{
    private static T instance;
    public static T Instance
    {
        get{
            if( instance == null ){
                instance = Activator.CreateInstance<T>();
            }
            return instance;
        }
    }
} 
```

接下来，我提供了一个类，它是我的应用程序中每个表单的模式。

```
public class FormSingleton: Singleton<Form>{ }

public class ConcreteForm : FormSingleton{}
public class ConcreteForm1 : FormSingleton{} 
```

但是我不能覆盖`Form`类中的任何方法。

有没有办法解决这个问题？也许有更好的解决方案以简单的方式保留该行为？

# css - 除非其他 div 设置为显示，否则第四个 div 不显示：无

> ID：12340640
> 
> 赞同：0
> 
> 时间：2012-09-09T16:05:50.800
> 
> 标签：css, html

所以我制作一个小网站只是为了好玩——并且更好地学习 HTML。

我有四个 div。我希望它被安排得有点像拼贴画。我将其中三个放在完美的位置，但第四个根本不显示，除非我在 CSS 中使用 display:none 使其他三个不可见...

有谁知道为什么会发生这种情况？我在 Ubuntu 上使用 Chromium。

```
<body>
  <center>
    <div id="content1">

    </div>
    <div id="content2">

    </div>
    <div id="content3">

    </div>
    <div id="cont4">
    THIS ONE DOESN'T SHOW UP.
    </div>
  </center>
</body> 
```

这是CSS：

```
#content1{
    width:230px;
    height: 160px;
    background-color:blue;
    border-radius:10px;
    position: relative;
    left: -240px;
}
#content2{
    width:230px;
    height: 350px;
    background-color:red;   
    margin-top: 10px;
    border-radius:10px;
    position: relative;
    left: -240px;
}
#content3{
    width:230px;
    height: 520px;
    background-color:red;   
    border-radius:10px;
    position: relative;
    top: -520px;
}
#cont4{
    width:230px;
    height: 350px;
    background-color:purple;    
    position: relative;
    left: 240px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:21:56.830

从我在 Chrome 和 Firefox 中看到的内容来看，cont4 出现了，但它在页面上向下（你必须滚动才能看到它）。我不知道你想要它的确切位置，但添加 top: -1040px 会将它与页面顶部的其余 div 对齐。

```
#cont4{
    width:230px;
    height: 350px;
    background-color:purple;    
    position: relative;
    left: 240px;
    top: -1040px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:19:23.930

给`#cont4`一个`top: -1040px;`。这意味着，对于前一个 div，您应用了一个`-520px`顶部以使其与顶部对齐。所以你的紫色 div 需要`this lengh`+ `height of that div`(520+520=1040) 才能出现。***[这](http://jsfiddle.net/blasteralfred/MpjRM/2/)***是演示。

但这不是我的解决方案。使用`margin-top: -520px;`而不是`top: -520px;`到您的第三个 div。这会将第四个 div 与第三个 div 一起移动。但`top`不会这样做。`top`用于使用`position`属性调整元素。`margin-top`用于测量与前一个元素的外部距离。

此外，顶部行为可能会因位置的类型（绝对、相对或固定）而有所不同。

这是更正后的**[演示](http://jsfiddle.net/blasteralfred/MpjRM/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:09:42.460

`center`正如 Jared Farrish 所说，该标签已被弃用。实际上，您应该更仔细地使用 CSS 来获得这种类型的布局。有很多示例可用。尝试使用“*使用 CSS 的多列布局*”进行搜索。您可以查看[本](http://www.ozzu.com/html-tutorials/tutorial-multi-column-layout-using-css-float-part-t85704.html)教程。

此外，[这](http://w3schools.com/css/default.asp)是非常有用的资源。[这个](http://www.pagecolumn.com/)工具很有趣。你也可以检查一下。

# iis - 无法在模拟器中调试 azure 项目

> ID：12340641
> 
> 赞同：2
> 
> 时间：2012-09-09T16:05:52.013
> 
> 标签：iis, azure, windows-8, visual-studio-2012

错误：

> `http://127.255.0.0:82/`将调试器附加到角色实例URL 的 IIS 工作进程时出错...

所以基本上我有：

*   Windows 8 企业版
*   视觉工作室 2012
*   Azure SDK 1.7

具有两个角色的项目：

*   工人角色
*   Web 角色 (ASP.NET MVC 4)

我试过什么

*   启用在 AppPool 中运行 32 位应用程序
*   `<compilation debug="true">`在 Web.config 中检查
*   aspnet_regiis.exe -i

Azure 项目配置为在完整的 IIS 下运行（使用 Express，它的工作方式非常棒，但需要完整的 IIS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:51:10.237

aspnet_regiis.exe -ir from`C:\Windows\Microsoft.NET\Framework\v4.0.30319`解决了这个问题。我是从具有 64 位路径环境的开发人员命令提示符中完成的。这是针对 32 位的。

# java - lejos 文件写入 NXT

> ID：12340642
> 
> 赞同：3
> 
> 时间：2012-09-09T16:05:53.927
> 
> 标签：java, file-io, lejos-nxj

我是 java 和 lejos 的新手，所以如果我问的是相当愚蠢的问题，请不要怪我。

我试图让乐高超声波传感器通过在电机上旋转它来扫描我的 nxt 周围的 360 度区域。每 5 度它会将距离保存到一个 .txt 文件。

我的问题是，稍后当我使用 nxjbrowse.bat 上传文件后从我的 PC 读取文件时，它只包含链接到应该保存在那里的数字 (0 - 255) 的 ASCII 字符。

我的 NXT 代码：

```
package Dataloggers;

import java.io.*;
import lejos.nxt.*;

public class USdistance {

int totalRotation = 360;
int scanDensity = 5;
UltrasonicSensor ultrasonicSensor = new UltrasonicSensor(SensorPort.S3);
File distanceFile = new File("Distances.txt");
FileOutputStream fileStream = null;

public static void main(String[] args) {
    @SuppressWarnings("unused")
    USdistance usD = new USdistance();
}

public USdistance() {
    Motor.A.setAcceleration(2000);
    Motor.A.setSpeed(50);   

    try {
        fileStream = new FileOutputStream(distanceFile);
    } catch (Exception e) {
        LCD.drawString("Can't make a file", 0, 0);
        Button.ESCAPE.waitForPress();
        System.exit(1);
    }

    DataOutputStream dataStream = new DataOutputStream(fileStream);

    Motor.A.rotate(90);
    Motor.A.resetTachoCount();
    Motor.A.backward();

    do {
        if (-(Motor.A.getTachoCount()) % scanDensity == 0 ) {
            int distance = ultrasonicSensor.getDistance();
            try {
                dataStream.writeInt(distance);
                fileStream.flush();
            } catch (IOException e) {
                LCD.drawString("Can't write to the file", 0, 1);
                Button.ESCAPE.waitForPress();
                System.exit(1);
            }
        }
    } while (-(Motor.A.getTachoCount()) < totalRotation);

    Motor.A.stop();

    try {
        fileStream.close();
    } catch (IOException e) {
        LCD.drawString("Can't save the file", 0, 1);
        Button.ESCAPE.waitForPress();
        System.exit(1);
    }

    Motor.A.rotate(270);
}
} 
```

提前谢谢罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:27:07.533

我通过使用解决了我的问题：

`int distance = ultrasonicSensor.getDistance();`
`BufferedOutputStream buffStream = new BufferedOutputStream(new FileOutputStream(new File(distances.txt)));`
`buffStream.write(distance.getBytes());`

通过使用这个我的文本文件看起来像这样：41 41 0 0 0 0 0 0 40 40 40 40 40 39 39 39 39 39 39 40 40 40 40 而不是㔵㈀㔵㈀㔵㈀㔵㈀㔵㐀5㐴㐀3㌴㐀4㐴㌀6㌳㌀3㈵㔀2㈵㔀2㈵㔀2㈵㔀2㌵㔀3㌵㈀㔵㈀㔵㈀㔵㈀

无论如何感谢您的回复@SimpleCoder

# javascript - 获取ajax请求的请求头

> ID：12340648
> 
> 赞同：1
> 
> 时间：2012-09-09T16:07:17.833
> 
> 标签：javascript, jquery, html, ajax, http-headers

我希望获得在我进行的 ajax 调用（jQuery）中使用的完整请求标头。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:17:22.140

您可以在 Google Chrome 或 Firebug 的检查器中使用网络选项卡。在那里您可以看到所有请求的所有标头。

# jquery - 颜色框未显示在 IE 中

> ID：12340649
> 
> 赞同：0
> 
> 时间：2012-09-09T16:07:35.613
> 
> 标签：jquery, colorbox

嗨，

我正在尝试使用 colorbox，到目前为止效果很好（在 Chrome 和 Firefox 中），但在 Internet Explorer 中不起作用（我有版本 9 [在 Win7 64 位上）并尝试在开发者工具窗口中设置任何版本，但没有一个有效）。

我已经尝试了很多我发现的建议（文档类型更改/修复，console.__ 未定义，...）没有任何效果。

我没有得到异常的日志输出，我已经尝试了我的选择器，我用它通过开发人员工具控制台应用 colorbox()，它得到了正确的元素。该代码也被调用（通过日志输出验证）。

我注意到的一件有点奇怪的事情是，在 Chrome 中，颜色框在页面末尾生成了这个 DOM 条目：

```
<div id="colorbox" class="" style="display: none; padding-bottom: 42px; padding-right: 42px; "> 
```

而 IE 得到这个：

```
<div id="colorbox" class="" style="display: none;" > 
```

但我不知道为什么。

我尝试禁用我拥有的任何其他 css，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:07:35.613

我终于知道它是什么了......我的页面应该是 HTML5 并且我使用 Modernizr（检查/修复一些与 HTML5 相关的东西的 JavaScript 库）我基本上只使用它来通过媒体查询检查用户是否有一个小型设备（平板电脑/手机）或台式机。

这个问题在某种程度上与媒体查询有关。仅仅嵌入modernizr 库并没有什么坏处（没有任何调用）。但是，一旦我通过modernizr 执行媒体查询，colorbox 就不再起作用了！

为了测试它，我删除了对modernizr库和库的所有调用-> Colorbox就像一个魅力！

我现在下载了一个稍微新版本的modernizr（我有2.5.__并更新到2.6.1），现在即使使用Modernizr，Colorbox也可以工作！

这个问题只影响了 Internet Explorer，所以我猜它是/曾经是旧 Modernizr 版本中的一个错误，它只出现在 IE 中。

这花了我几个小时......所以我想我的教训是：永远不要使用任何你并不真正需要的 JS 库。

# eclipse - 控制台在 Eclipse Juno 中消失

> ID：12340653
> 
> 赞同：30
> 
> 时间：2012-09-09T16:08:04.667
> 
> 标签：eclipse, console, eclipse-juno

我正在使用 Eclipse Juno。我在**Java 角度**工作，突然间我最小化了控制台。我不知道它去了哪里，但我无法找回它。我什至试图从 Windows>Show View>Console 中获取它，但我没有找回我的控制台。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-01T21:13:17.113

我也发生了同样的事情。只需单击 Window->Reset Perspective，一切都会恢复到安装 Eclipse 时的状态。当然，您必须将其自定义回您喜欢的方式，但至少您将拥有控制台。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-22T13:43:30.987

如果控制台不可见，只需在菜单栏右上角的快速访问框中搜索“控制台”。你可以拿回来！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T19:46:19.057

愚蠢的日食。没有界面设计师自愿参与这个项目吗？为什么要最小化某些东西并使其难以看到将其带回来的位置？可能您所要做的就是用一只手按下 Shift-Control-Tab-F9，同时右键双击左下角。嗯，当您单击最小化的控制台时会弹出一个弹出窗口，上面写着“我们看到您已最小化您的控制台并且您显然正在尝试切换到它。您希望我们恢复它以便您可以实际看到它吗？” 然后是“你真的确定吗？因为你知道，你可能不小心使用了这个点击路径。”

重置视角有效。此外，您可以“保存透视图”，因此返回您喜欢的透视图并不难。

谢谢你的提示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-27T11:09:37.447

1.  从 Window -> Show View -> Console 将控制台置于最前面。显然控制台仍然不可见（这确实是问题所在），但它实际上在前台处于活动状态。
2.  通过转到工具栏上的“快速访问”框，键入“关闭部分”，然后在下拉菜单中选择相应的选项来关闭当前视图（即不可见的控制台）。
3.  重新打开控制台窗体 Window -> Show View -> Console 和瞧，它会出现。将其拖到工作台上的首选位置。

在以下情况下，这对我有用：

*   我之前一直在尝试将多个视图（包括控制台）和编辑器分离到不同显示器上的单独窗口；我已将我的工作空间从 Neon 更新为 Oxygen，并且我的计算机进行了硬重置。（所以，不确定其中哪一个是导致它出错的原因）。
*   我想避免重置我的视角，因为它是高度定制的，所以我放弃了那个解决方案。
*   本文提出的其他解决方案没有奏效。
*   如果我选择不同的透视图（例如调试）或重复的 Eclipse 窗口（它有效地提供了出厂重置透视图的副本），控制台正在工作并且视图变得可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T16:25:14.117

您可以单击左下角的小图标并选择控制台。它会出现。

# artificial-intelligence - 如何应用梳子方法？

> ID：12340654
> 
> 赞同：3
> 
> 时间：2012-09-09T16:08:05.043
> 
> 标签：artificial-intelligence, rules, fuzzy-logic

我正在研究梳子方法，以减少模糊逻辑规则的“组合爆炸”。有一个例子，取自“Programming Game AI from example”（由 Mat Buckland 编写）：

> ***Combs 方法背后的理论基于以下规则：***
> 
> 如果 Target_Far 和 Ammo_Loads THEN 是可取的
> 
> 逻辑上等价于： IF Target_Far THEN Desirable OR IF Ammo_Loads THEN Desirable
> 
> 使用此原则，可以定义一个规则库，其中每个后续成员集仅包含一个规则。例如，之前给出的火箭发射器可取性的九个规则：
> 
> 规则 1\. IF Target_Far AND Ammo_Loads THEN Desirable
> 
> 规则 2\. IF Target_Far AND Ammo_Okay THEN Undesirable
> 
> 规则 3\. IF Target_Far AND Ammo_Low THEN Undesirable
> 
> 规则 4\. 如果 Target_Medium AND Ammo_Loads THEN VeryDesirable
> 
> 规则 5\. 如果 Target_Medium AND Ammo_Okay THEN VeryDesirable
> 
> 规则 6\. IF Target_Medium AND Ammo_Low THEN Desirable
> 
> 规则 7\. 如果 Target_Close AND Ammo_Loads THEN Undesirable
> 
> 规则 8\. IF Target_Close AND Ammo_Okay THEN Undesirable
> 
> 规则 9\. IF Target_Close AND Ammo_Low THEN Undesirable
> 
> ***可以简化为六个规则：***
> 
> 规则 1\. IF Target_Close THEN Undesirable
> 
> 规则 2\. IF Target_Medium THEN VeryDesirable
> 
> 规则 3\. IF Target_Far THEN Undesirable
> 
> 规则 4\. IF Ammo_Low THEN Undesirable
> 
> 规则 5\. IF Ammo_Okay THEN Desirable
> 
> 规则 6\. IF Ammo_Loads THEN VeryDesirable

我不明白他是如何减少这些规则的！我将每个起始规则分成两部分（应用开头 A 和 B => C 中所写的原则相当于 A => C OR B => C）。现在是否有一个模式可以遵循，或者最后的 6 条规则独立于开始的 9 条规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T20:28:46.277

第一个问题是运营商。不仅仅是 AND 它是 IF THEN ...在这里您可以找到更多关于 IF/THEN 运算符的信息：http: [//www.math.hawaii.edu/~ramsey/Logic/IfThen.html](http://www.math.hawaii.edu/~ramsey/Logic/IfThen.html)

但“如何减少”的问题仍然悬而未决

# php - 根据用户名或 id 从数据库中检索特定行

> ID：12340660
> 
> 赞同：0
> 
> 时间：2012-09-09T16:09:48.477
> 
> 标签：php, mysql, phpmyadmin

希望有人可以在这里帮助我，我创建了一个有多个用户的系统，每个用户都有一个唯一的用户名和 ID。我现在的问题是如何设置我的系统，当用户登录时，系统将指导用户根据他们的用户名或 id 查看数据库中的特定行。

我访问数据库的代码是：

```
<?php

$con = mysql_connect("localhost","root","");
mysql_select_db("uloaku", $con);
$count = 1;
$y = mysql_query("SELECT * FROM transaction WHERE username = '".$_SESSION['username']."' LIMIT 1");
if(mysql_num_rows($y) != 0){

echo "<table border=\"1\" width=\"800\" >";
echo "<tr id=\"bold\">
<td>No</td>
<td align=\"center\" width=\"120\">Account Owner</td>
<td align=\"center\" width=\"120\">Deposit Date</td>
<td align=\"center\" id=\"bold\" width=\"150\">Current Balance</td>
<td align=\"center\" width=\"150\">Available Balance</td>
<td align=\"center\">Account Status</td>
</tr>";

while ($z = mysql_fetch_array($y, MYSQL_BOTH)){
        echo "<tr>
        <td>".$count++."</td>
        <td id=\"color\" align=\"center\">".$z[1]."</td>
        <td id=\"color\" align=\"center\">".$z[2]."</td>
        <td id=\"color\" align=\"center\">".$z[3]."</td>
        <td id=\"color\" align=\"center\">".$z[4]."</td>
        <td id=\"color3\" align=\"left\">".$z[5]."</td>
        </tr>";
    }
    echo "</table>";
    }
?> 
```

我的登录页面如下所示：

```
<?php

session_start();

$_SESSION['username'] = $username;

$username = $_POST['username'];

$password = $_POST['password'];

if ($username&&$password)

{
$connect = mysql_connect("localhost","root","") or die("cannot connect!");
mysql_select_db("uloaku") or die("cannot find data base!");
$query = mysql_query ("SELECT * FROM keyaku WHERE    username='".mysql_real_escape_string($username)."' AND     password='".mysql_real_escape_string($password)."'");
$numrows = mysql_num_rows($query);

if ($numrows!=0)
{
while ($row = mysql_fetch_assoc($query))
{
    $dbusername = $row['username'];
    $dbpassword = $row['password'];
}
if ($username==$dbusername&&$password=$dbpassword)
{
    echo "Welcome $username";
}
else
    echo "Invalid Password";
}
else
die("Invalid User");

}

else
 die("Please Enter a UserName and Password.");

?> 
```

到目前为止，我的登录正在按我的意愿工作，我的数据库检索信息唯一的问题是它检索数据库中的所有信息，但我希望它根据登录人的用户名或 ID 检索信息在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:17:43.573

首先，我敢打赌这段代码根本不起作用：

```
$query = mysql_query ("SELECT * FROM keyaku WHERE        username='$username'&&password='$password'"); 
```

... MySQL 中没有 && 这样的东西，因此查询将返回空结果。如果您希望它工作，请至少以这种方式进行（也防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)！）：

```
$query = mysql_query ("SELECT * FROM keyaku WHERE username='".mysql_real_escape_string($username)."' AND password='".mysql_real_escape_string($password)."'"); 
```

其次，您需要某种方式来存储您的登录信息，以便以后可以重复使用。如果您可以使用会话，最简单的方法是存储用户名（或链接到您需要的行的任何信息）：

```
$_SESSION['username'] = $username; 
```

然后，在您的第一页中，将 SQL 更新为如下所示（根据您的需要更改列 ID）：

```
$y = mysql_query("SELECT * FROM transaction WHERE username = '".$_SESSION['username']."' LIMIT 1"); 
```

`LIMIT 1`...如果您在事务表中的用户名字段被索引为主/唯一键，您甚至不需要该部分。

# python - 使用 Tix.Balloon 设置默认状态栏消息

> ID：12340663
> 
> 赞同：2
> 
> 时间：2012-09-09T16:10:19.013
> 
> 标签：python, tkinter, tooltip, popup-balloons, tix

我目前正在尝试使用 Tix.Balloon 为图形用户界面中的选项创建工具提示和帮助状态栏。它几乎可以按预期工作。但是，我希望状态栏在鼠标不在绑定的小部件上时显示一条消息。

具体来说，当其中一个框未突出显示时，我希望状态栏显示“所有角度都以度为单位”之类的内容。

目前代码看起来有点像：

```
from Tkinter import *
from Tix import *
root = Tk()
status = Label(root, height = 3, width=30, bd=1,bg='yellow',wraplength = 210, text = "All angles are in degrees")
status.grid(row = 0,column = 0,pady = 10)
bal = Balloon(root,statusbar = status)
frame_1 = Frame(root,relief=RIDGE,bd = 2)
frame_1.grid(row=1,column = 0)
Angles = [StringVar(),StringVar()]

#Incomming
label_in = Label(frame_1,text = "TH_in")
label_in.grid(row = 0,column = 0)

entry_in = Entry(frame_1, width = 20, textvariable = Angles[0])
entry_in.grid(row = 0,column = 1)

#Outgoing
label_out = Label(frame_1,text = "TH_out")
label_out.grid(row = 1,column = 0)

entry_out = Entry(frame_1, width = 20, textvariable = Angles[1])
entry_out.grid(row=1,column=1)

#tool tip / status bar
bal.bind_widget(label_in,balloonmsg='Incidence Angle',statusmsg = 'Incidence angle of the incoming light with respect to the surface normal.')
bal.bind_widget(label_out,balloonmsg='Detector Angle',statusmsg = 'Angle between the surface normal and the detector')
root.mainloop() 
```

这在开始时状态栏中有“所有角度都以度数”消息，但在标签中的状态消息之一替换它之后，它不会回来。

有什么建议么？

# linux - 在运行时换出链接的共享库

> ID：12340669
> 
> 赞同：3
> 
> 时间：2012-09-09T16:10:42.123
> 
> 标签：linux, shared

假设我有一个进程 X，然后它已经将一些共享库 Y 加载到它的地址空间中。然后我设法用不同版本的 Yprime 交换这个库 Y，对这个过程有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:15:01.403

没有效果。加载器保持库打开直到进程结束（或直到库通过 卸载`dlclose(3)`），这意味着它继续使用相同的（现已删除）库，因为它的块仍然存在于磁盘上。

# objective-c - CCSprite 带有图像文件和声音文件

> ID：12340671
> 
> 赞同：0
> 
> 时间：2012-09-09T16:10:59.960
> 
> 标签：objective-c, image, audio, cocos2d-iphone, ccsprite

我看到了如何将图像文件添加到 CCSprite，但我怎样才能添加音频文件？

我可以存储地图或字典的属性吗？

仅供参考，我在移动设备上发布此内容，因此代码现在不是一个选项，将尝试更新我的问题

更新：

我想要做的是将一个音频文件与每个 CCSprite 相关联，然后通过触摸拖动播放音频文件。每个 CCSprite 将播放不同的音频文件。我正在尝试找出将音频文件与 CCSprite 附加或关联的最简单方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:30:29.613

在**Cocos2D**中，您可以添加`audio file`如下内容：-

```
[[SimpleAudioEngine sharedEngine] playEffect:@"soundeffect.mp3"]; 
```

添加后`sprite`，您可以使用此音频文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:14:56.207

添加

```
#import "SimpleAudioEngine.h" 
```

然后简单

```
[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"XYZ.mp3"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:54:08.787

好的，这是我更喜欢的方法，具体取决于您播放的是“背景音乐”声音还是“效果”声音：

**如果您正在播放`MP3`声音，即背景音乐：**

1）在sprite构造函数中添加一个参数来分配一个声音文件：

```
[MySpriteClass spriteWithSound:@"mySound.mp3"]; 
```

2）简单地使用：

```
// on touchDragged:
[[SimpleAudioEngine sharedEngine] playBackgroundMusic:self.sound];

// on touchEnded: touchCancelled:
[[SimpleAudioEngine sharedEngine] stopBackgroundMusic]; 
```

**注意：**这种方法很简单，因为您在任何给定时间只能播放一个 BGM。

* * *

**如果你播放的是未压缩的声音，即效果：**

1）在sprite构造函数中添加一个参数来分配一个声音文件：

```
[MySpriteClass spriteWithSound:@"mySound.caf"]; 
```

`touchDragged:`2）存储返回值时播放效果：

```
// on touchDragged:
soundID = [[SimpleAudioEngine sharedEngine] playEffect:self.sound]; 
```

3）停止使用`touchEnded:`效果`soundID`：

```
// on touchEnded: cancelled:
[[SimpleAudioEngine sharedEngine] stopEffect:soundID]; 
```

**注意：**这种方法更好，因为它允许您一次播放更多声音。

* * *

**最后评论：**

如果您有每个不同精灵的子类（即 , `FishSprite`, `DogSprite`... 等），这样任何给定类的**所有**实例都具有相同的声音，最好添加静态方法来返回该类的声音名称：

```
// somewhere in DogSprite.m
+ (NSString *)soundName {
    return @"bark.caf";
} 
```

为了完整起见，添加一个实现 , 的超类`touchDragged:`，`touchEnded:`这样您就没有多余的代码：

```
// on touchDragged:
soundID = [[SimpleAudioEngine sharedEngine] playBackgroundMusic:[[self class] soundName]];

// on touchEnded: cancelled:
[[SimpleAudioEngine sharedEngine] stopEffect:soundID]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:58:31.560

如果您可以对其进行子类化，则执行此操作并为音频文件添加一个属性。据我所知，不，没有子类化就不能添加任何无关信息。但我不使用 cocos2d，所以请谨慎对待。

# javascript - 在加载 collada 纹理数据时对其进行操作（.jpg 本身）

> ID：12340676
> 
> 赞同：0
> 
> 时间：2012-09-09T16:12:13.253
> 
> 标签：javascript, canvas, three.js

我想在使用three.js 加载.jpg 纹理时操作纹理图像数据（例如修改.jpg 标题文本）。

我怎么能这样做？纹理数据是否可以在代码中的某个位置（例如作为字符串）到达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:11:45.960

您可以使用 2D`<canvas>`作为纹理源，从而在将`<canvas>`纹理数据上传到 GPU 之前使用 HTML5 canvas API 进行图像数据处理。

此处存在示例（用于调整过大 JPEG 的大小）

只需创建画布

[https://github.com/miohtama/Krusovice/blob/master/src/showobjects/framedimage.js#L134](https://github.com/miohtama/Krusovice/blob/master/src/showobjects/framedimage.js#L134)

从原始纹理数据中对其进行 drawImage()

[https://github.com/miohtama/Krusovice/blob/master/src/showobjects/framedimage.js#L165](https://github.com/miohtama/Krusovice/blob/master/src/showobjects/framedimage.js#L165)

然后你可以将它用作纹理源，如`<img>`

[https://github.com/miohtama/Krusovice/blob/master/src/renderers/three.js#L396](https://github.com/miohtama/Krusovice/blob/master/src/renderers/three.js#L396)

# javascript - JQuery - 停止手风琴链接关闭所有选项卡

> ID：12340685
> 
> 赞同：2
> 
> 时间：2012-09-09T16:14:19.897
> 
> 标签：javascript, jquery

我希望有人可以帮助我解决我在使用 JQuery Accordion 插件时遇到的问题。我对 JQuery 的经验很少，因此将不胜感激任何帮助！

基本上，我的一个手风琴标签内有一个链接，它加载一个新窗口。但是，当这种情况发生时，它会关闭父窗口中的所有手风琴链接。我认为它这样做是因为它将链接视为我不想要的手风琴的一部分。

这是javascript代码：

```
<script type="text/javascript" src="js/accordion/chili-1.7.pack.js"></script>
<script type="text/javascript" src="js/accordion/jquery.easing.js"></script>
<script type="text/javascript" src="js/accordion/jquery.dimensions.js"></script>
<script type="text/javascript" src="js/accordion/jquery.accordion.js"></script>
<script type="text/javascript">
    jQuery().ready(function(){
        // simple accordion
        /*jQuery('#accordion').accordion();*/
        jQuery('#accordion_click').accordion({
            /*animated: 'bounceslide'*/
            animated: 'easeslide',
            autoheight: true

        });

        jQuery('#accordion_hover').accordion({
            /*animated: 'bounceslide'*/
            event: 'mouseover',
            animated: 'bounceslide',
            autoheight: true

        });
    });
</script> 
```

这是我的 HTML 代码：

```
<a>Accordion Tab 1</a>
<div>
<a href="#" class="basic nonaccordion" onClick="MyWindow=window.open('www.newwindow.com','New_Window','toolbar=no,location=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,width=400,height=200'); return false;">Load Window </a>
</div>

<a>Accordion Tab 2</a>
<div>
</div>

<a>Accordion Tab 3</a>
<div>
</div>

<a>Accordion Tab 4</a>
<div>   
</div> 
```

我有没有一种简单的方法可以从手风琴中删除选项卡 1 中的链接，以便在新窗口加载时它不会关闭选项卡？

谢谢！

编辑：这个的CSS如下：

```
/*tab, accordion*/
/*tab 1*/
ul.tabs { margin: 0; padding: 0; float: left; list-style: none; height: 32px; border-bottom: 1px solid #c8c8c8; border-left: 1px solid #c8c8c8; width: 100%; }
ul.tabs li { float: left; margin: 0; padding: 0; height: 31px; line-height: 31px; border: 1px solid #c8c8c8;    border-left: none; margin-bottom: -1px; overflow: hidden; position: relative; background: #f5f5f5; }
ul.tabs li a { text-decoration: none; color: #9b9b9b; display: block; font-size:12px; font-family:Georgia, "Times New Roman", Times, serif; letter-spacing:3px; text-transform:uppercase; padding: 0 20px; border: 1px solid #fff; outline: none;}
ul.tabs li a:hover, ul.tabs li.active a { background: #fff; color:#000; }
html ul.tabs li.active, html ul.tabs li.active a:hover  { background: #fff; border-bottom: 1px solid #fff; }
.tab_container { border: 1px solid #f5f5f5; border-top: none; overflow: hidden; clear: both; float: left; width: 100%; background: #fff; margin:0 0 20px 0; }
.tab_content { padding: 20px; }

/*tab 2*/
ul.tabs2 { margin: 0; padding: 0; float: left; list-style: none; height: 32px; border-bottom: 1px solid #c8c8c8; width: 100%; }
ul.tabs2 li { float: left; margin: 0; padding: 0; height: 31px; line-height: 31px;  border-left: none; margin-bottom: -1px; overflow: hidden; position: relative; }
ul.tabs2 li a { text-decoration: none; color: #9b9b9b; display: block; font-size:12px; font-family:Georgia, "Times New Roman", Times, serif; letter-spacing:3px; text-transform:uppercase; padding: 0 20px; border: 1px solid #fff; outline: none;}
ul.tabs2 li a:hover, ul.tabs2 li.active a { background: #fff; color:#000; }
html ul.tabs2 li.active { background: #fff; border-top: 1px solid #c8c8c8; border-left: 1px solid #c8c8c8; border-right: 1px solid #c8c8c8;border-bottom: 1px solid #fff; }
html ul.tabs2 li.active a:hover{ color:#000; } 
.tab2_container { border: 1px solid #f5f5f5; border-top: none; overflow: hidden; clear: both; float: left; width: 100%; background: #fff; margin:0 0 20px 0; }
.tab2_content { padding: 20px; }

/*accordion*/
.basic  { width:100%; margin-bottom:40px;  }
.basic div {  background:none; }
.basic p { margin-bottom : 0px; border: none; text-decoration: none; padding: 10px;}
.basic a { cursor:pointer; display:block; padding:10px 10px; margin-top: 0; text-decoration: none; color: black; border: 1px solid #e3e3e3; font-size:12px; font-family:Georgia, "Times New Roman", Times, serif; letter-spacing:3px; text-transform:uppercase; color: #9b9b9b;  background: #f5f5f5 url(../images/collapsed.png) no-repeat 99% 50%; margin-bottom:1px;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;}
.basic a:hover { background-color:#fafafa; }
.basic a.selected { color: black; background: #fafafa url(../images/expanded.png) no-repeat 99% 50%;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:19:39.410

您发布的 CSS 似乎与 HTML+JS 无关。

尝试使用该`header`选项并指定要紧跟在手风琴元素之后的标题：http `> a`: [//jsfiddle.net/AkX3z/](http://jsfiddle.net/AkX3z/)

我包含了`$.accordion`jQuery UI 演示提供的基本演示。它没有这个问题，这意味着它可能是由于您排除了正确的标题。

# excel - 复制范围并粘贴到新工作簿

> ID：12340688
> 
> 赞同：6
> 
> 时间：2012-09-09T16:14:46.277
> 
> 标签：excel, vba

这应该很简单，但是我一直在拖网论坛和 SO 答案几个小时才能找到答案，但没有运气，所以我（不情愿地）创建了一个我自己的问题。

我要做的只是创建一个新工作簿，然后将另一个工作簿中的范围粘贴到该工作簿中。听起来很简单..？

我原来的工作簿，我们称之为 Book1。我正在尝试创建一个新工作簿 Book2，我会将单元格 A1:B10的*值复制到其中。*

这是我的代码的一个版本（从 Book1 打开开始）：

```
Range("A1:B10").Copy
Set NewBook = Workbooks.Add
    With NewBook
        .SaveAs Filename:="Book2.xls"
    End With
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

这会产生“PasteSpecial of Range 类失败”错误。我尝试了以下修复但没有运气：

*   将'Workbooks("Book2.xls").Activate' 添加到代码中
*   删除了 PasteSpecial 行中的额外参数
*   尝试使用 '.Paste' 而不是 '.PasteSpecial'
*   将“Selection.PasteSpecial”更改为“ActiveSheet.PasteSpecial”
*   显式引用复制范围，包括工作簿和工作表引用
*   首先创建新工作簿，然后执行复制，然后重新激活新工作簿并粘贴

以上解决方案均无效......现阶段的任何智慧都将不胜感激！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-09T16:46:20.803

这是你正在尝试的吗？我已经对代码进行了注释，以便您理解代码的作用不会有任何问题。

```
Option Explicit

Sub Sample()
    Dim wbI As Workbook, wbO As Workbook
    Dim wsI As Worksheet, wsO As Worksheet

    '~~> Source/Input Workbook
    Set wbI = ThisWorkbook
    '~~> Set the relevant sheet from where you want to copy
    Set wsI = wbI.Sheets("Sheet1")

    '~~> Destination/Output Workbook
    Set wbO = Workbooks.Add

    With wbO
        '~~> Set the relevant sheet to where you want to paste
        Set wsO = wbO.Sheets("Sheet1")

        '~~>. Save the file
        .SaveAs Filename:="C:\Book2.xls", FileFormat:=56

        '~~> Copy the range
        wsI.Range("A1:B10").Copy

        '~~> Paste it in say Cell A1\. Change as applicable
        wsO.Range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
        SkipBlanks:=False, Transpose:=False
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-26T09:55:27.803

这对我有用。

```
Private Sub CommandButton1_Click()
Dim newWB As Workbook, currentWB As Workbook
Dim newS As Worksheet, currentS As Worksheet

'Copy the data you need
Set currentWB = ThisWorkbook
Set currentS = currentWB .Sheets("Sheet1")
currentS .Range("A:M").Select
Selection.Copy

'Create a new file that will receive the data
Set newWB = Workbooks.Add
    With newWB
        Set newS = newWB.Sheets("Sheet1")
        newS.Range("A1").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
        SkipBlanks:=False, Transpose:=False
        'Save in CSV
        Application.DisplayAlerts = False
        .SaveAs Filename:="C:\Temporary.csv", FileFormat:=xlCSV
        Application.DisplayAlerts = True
    End With
End Sub 
```

# php - 我的 Ajax 调用未提交到 php

> ID：12340694
> 
> 赞同：3
> 
> 时间：2012-09-09T16:15:20.927
> 
> 标签：php, ajax

以下代码段应该收集数据并将其发送到 php 文件。它确实在单击按钮时输出正确的值。

```
var dataString = 'username='+SessionVars.my_username+'&lessonid='+SessionVars.my_lesson_number;
$('#tracking_submit').click(function(){
$.ajax({
    url: "php/tracking.php",
    type:'POST',
    data: dataString,
    success: function(){
    $('#tracking_message').replaceWith(SessionVars.my_username+"Thank you for updating."+SessionVars.my_lesson_number);
    }                   
    });
return false;   
}); 
```

然后我正在使用的 php 文件部分是这样的：

```
session_start(); 
mysql_connect("stuff i tested and it works");
mysql_select_db("same");

$username=$_POST['username'];
$lessonid=$_POST['lessonid'];

mysql_query("INSERT INTO tracking ( username, lessonid ) VALUES ( ".$username.", ".$lessonid." );"); 
```

当我检查数据库时，里面什么都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:22:30.557

```
mysql_query("INSERT INTO tracking ( username, lessonid ) VALUES ('".$username."', ".$lessonid." );"); 
```

您错过了该行中的引号。另外，请阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:22:44.783

这是行不通的，因为您没有将查询中的值放入引号中。这也应该有助于并防止您被黑客入侵：

```
mysql_query("INSERT INTO tracking ( username, lessonid ) VALUES ( '".mysql_real_escape_string($username)."', '".mysql_real_escape_string($lessonid)."' )"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T16:26:37.060

改成..

```
$.ajax({
    url: "php/tracking.php",
    type:'POST',
    cache: false,
    dataType: "json",
    data: {username: SessionVars.my_username, lessonid: SessionVars.my_lesson_number}, 
    success: function(){
    $('#tracking_message').replaceWith(SessionVars.my_username+"Thank you for updating."+SessionVars.my_lesson_number);
    }                   
    });
return false;   
}); 
```

在下一页上执行 print_r ($_POST)。同样是的，您应该阅读一些 sql 注入预防。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:37:15.517

问题出在 php 文件中，在上面那个人的帮助下，该文件通过以下方式解决：

```
$username=mysql_real_escape_string($_POST['username']);
$lessonid=mysql_real_escape_string($_POST['lessonid']);

mysql_query("INSERT INTO wtf ( username, lessonid ) VALUES ( '".$username."', '".$lessonid."' );"); 
```

# c - 如何检查存储在变量中的给定文件描述符是否仍然有效？

> ID：12340695
> 
> 赞同：58
> 
> 时间：2012-09-09T16:15:23.780
> 
> 标签：c, linux, gcc, file-descriptor

我有一个文件描述符存储在变量 var 中。如何在以后检查该描述符是否有效？

```
 fdvar1= open(.....);
  fdvar2 = fdvar1;       // Please ignore the bad design

  ....
  // lots of loops , conditionals and threads. It can call close(fdvar2) also.  
  ....

  if(CheckValid(fdvar1)) // How can I do this check  ?
    write(fdvar1, ....); 
```

现在我想检查 var1 （仍然保存打开的描述符）是否仍然有效。有任何 API 吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-09T16:20:09.373

[`fcntl(fd, F_GETFD)`](http://man7.org/linux/man-pages/man2/fcntl.2.html)是检查是否`fd`是有效的打开文件描述符的规范最便宜的方法。如果您需要批量检查很多，使用`poll`零超时并将`events`成员设置为 0 并`POLLNVAL`在`revents`返回后检查更有效。

话虽如此，“检查给定资源句柄是否仍然有效”的操作几乎总是从根本上不正确。释放资源句柄后（例如，fd 是`close`d），它的值可能会重新分配给您分配的下一个此类资源。如果有任何剩余的引用可能被使用，它们将错误地对新资源而不是旧资源进行操作。因此，真正的答案可能是：如果您还不知道程序的逻辑，那么您有需要修复的主要基本逻辑错误。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-09T16:20:02.963

您可以使用以下`fcntl()`功能：

```
int fd_is_valid(int fd)
{
    return fcntl(fd, F_GETFD) != -1 || errno != EBADF;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-09T16:21:24.117

我认为没有任何函数可以告诉您描述符是否仍然有效。描述符通常只是一个像 6 这样的小整数，如果您关闭文件并稍后打开一个新文件，您的 libc 可以选择重用该数字。

相反，您应该考虑使用`dup()`来复制文件描述符。通过复制文件描述符而不是在多个位置使用相同的描述符，您可能会更容易知道文件描述符是否仍然有效。您只需要记住在完成后关闭原始描述符和复制的描述符。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-09T16:25:30.023

从[这篇](http://cboard.cprogramming.com/networking-device-communication/93683-checking-if-file-descriptor-valid.html#post678998)论坛文章：

```
int is_valid_fd(int fd)
{
    return fcntl(fd, F_GETFL) != -1 || errno != EBADF;
} 
```

> fcntl(GETFL) 可能是您可以对文件描述符执行的最便宜且最不可能失败的操作。特别是，规范建议它不能被信号中断，也不受任何地方持有的任何类型的锁的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T15:24:27.417

在我看来，如果您想知道它是否仍然指向相同的资源，一种（非完美）方法是`fstat()`在打开之后对描述符进行处理，然后您可以再次执行此操作并比较结果。`.st_mode`从&开始`S_IFMT`，然后从那里开始——它是一个文件系统对象吗？看看`.st_dev / .st_ino.` 是插座吗？试试`getsockname()`，`getpeername()`。它不会 100% 确定，但它可以告诉你它是否绝对不一样。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-10T13:51:55.053

我为我解决了这个问题。我不知道它是否可以用于一般用途，但对于串行连接它工作正常（例如/dev/ttyUSB0）！

```
struct stat s;
fstat(m_fileDescriptor, &s);

// struct stat::nlink_t   st_nlink;   ... number of hard links 
if( s.st_nlink < 1 ){
 // treat device disconnected case
} 
```

有关详细信息，请参见例如手册页[http://linux.die.net/man/2/fstat](http://linux.die.net/man/2/fstat)

干杯，弗洛

# wordpress - 通过 Git 更新商业主题

> ID：12340696
> 
> 赞同：0
> 
> 时间：2012-09-09T16:15:53.490
> 
> 标签：wordpress, git, wordpress-theming

我设计了许多私人客户购买并安装在自己的服务器上的 wordpress 主题。如果我更新主题，是否可以通知已安装主题的用户有新版本可用，然后通过 wordpress 管理员安装新版本。与 wordpress.org 上托管的主题更新的处理方式完全相同。

是否有可能用 git 以某种方式做到这一点？谁有教程的链接？

# php - Elasticache 语法如何与 Memcache 语法相关（使用 PHP）？

> ID：12340702
> 
> 赞同：0
> 
> 时间：2012-09-09T16:16:55.463
> 
> 标签：php, caching, amazon-web-services, memcached, amazon-elasticache

使用以下命令在我的 EC2 Linux 实例上安装 memcache 后：

```
:~$ sudo apt-get install memcached php5-memcache 
```

我可以立即这样做：

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211);

$array_result=$this->db->query("SELECT * where ...."); // some DB query
$memcache->set('my_items', $array_result, false, 60*60*24); 
```

稍后可以像这样访问这个缓存的数组：

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211);
$my_items=$memcache->get('my_items');
var_dump($my_items); 
```

`connect()`我的问题是与 memcache 的、`set()`和`get()`命令相关的 Elasticache 语法是什么？我完全被[AWS PHP SDK 的 Elasticache 部分](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#i=AmazonElastiCache)弄糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:20:28.260

您需要创建 elasticache 节点（AWS 管理控制台），您可以通过 memcache 客户端连接到该节点，查看[入门指南](http://docs.amazonwebservices.com/AmazonElastiCache/latest/GettingStartedGuide/SignUp.html)。

如果你想用你的代码控制你的缓存节点，那么你应该使用 Elasticache SDK。

```
$memcache->connect('myfirstcacheinstance.evdfes.0001.use1.cache.amazonaws.com', 11211); 
```

您的 EC2 Linux 实例上不需要 memcache 服务器，拥有 php5-memcache PECL 扩展就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T12:40:37.197

试试这个：

```
<?php

$server_endpoint = "xxx.xx.xfg.sae1.cache.amazonaws.com";
$server_port = 11211;

if (version_compare(PHP_VERSION, '5.4.0') < 0) {
    //PHP 5.3 with php-pecl-memcache
    $client = new Memcache;
    $client->connect($server_endpoint, $server_port);
    //If you need debug see $client->getExtendedStats();
    $client->set('myKey', 'My Value PHP 5.3');
} else {
    //PHP 5.4 with php54-pecl-memcached:
    $client = new Memcached;
    $client->addServer($server_endpoint, $server_port);
    $client->set('myKey', 'My Value PHP 5.4');
}

echo 'Data in the cluster: [' . $client->get('myKey') . ']'; 
```

确保您已允许端口 11211 上的 OUTPUT

# visual-studio-2010 - Visual Studio 2010 文档格式不起作用

> ID：12340706
> 
> 赞同：0
> 
> 时间：2012-09-09T16:17:15.820
> 
> 标签：visual-studio-2010

对于新安装的 VS 2010（更换硬盘后），文档格式功能不起作用。当我尝试格式化时，我得到

“组合键（Ctrl+K、Ctrl+D）绑定到当前不可用的命令（格式化文档）”

我如何使它可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:05:09.850

使用`Tools`VS2010 屏幕顶部的菜单，您可以转到`Options -> Environment -> Keyboard`或`Customize -> Commands -> Keyboard`修改键盘快捷键，并确保文档格式的键绑定仍然存在。

# java - Java HTTP 请求转换器

> ID：12340711
> 
> 赞同：0
> 
> 时间：2012-09-09T16:17:50.593
> 
> 标签：java, api

我正在考虑通过转换传入的 HTTP 请求来使旧 API 适应更新的 API。我正在使用 Spring 和 Jersey。现在，我转换传入的 HTTP 请求的方式是引入一个 Servlet 过滤器，它将传入的内容包装`HttpServletRequest`在一个适配器对象中，该对象将请求组件（标头、帖子正文、查询等）转换为较新的请求模型。

我的问题是是否有其他工具可以做这种事情。我知道 Mule ESB 和 Spring Integration，它们有变压器/转换器来做这种事情。然而，我觉得这些对于我的目的来说有点重量级。

这是一个旧请求的示例，以及我希望它映射到的新请求。

老的：

```
GET /resource?id=abc&auth=xyz&params=<encoded-params> 
```

新的：

```
GET /resource/id?<unencoded-params>
Authorization: xyz 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:18:43.207

这里要澄清的一件事是 Mule 是 ESB（企业服务总线）。但是您实际上正在寻找的是 RESTful Web 服务。所有 RESTful 实现都有 JSR311。

以下是其中一些（除了[Jersey](http://jersey.java.net/)）：

*   [CXF](http://cxf.apache.org/)
*   [XFire](http://xfire.codehaus.org/)
*   [雷斯特莱特](http://www.restlet.org/)
*   [高枕无忧](http://www.jboss.org/resteasy)
*   [眨眼](http://en.wikipedia.org/wiki/Apache_Wink)

# asp.net - asp.net 配置拒绝用户=“？” 不适用于所有文件

> ID：12340712
> 
> 赞同：1
> 
> 时间：2012-09-09T16:17:51.390
> 
> 标签：asp.net, iis, iis-7

我有一个网站，并在它下面有一个应用程序。

按照这里的 tut [http://msdn.microsoft.com/en-us/library/ff648341.aspx](http://msdn.microsoft.com/en-us/library/ff648341.aspx)我在应用程序中创建了一个安全文件夹。

然后 web.config 被添加到应用程序的文件夹中，但我仍然可以访问安全文件夹我做错了什么？

```
<?xml version="1.0"?>
<configuration>
    <system.web>
    </system.web>
  <!-- The secure folder is for authenticated and SSL access only. -->
  <location path="Secure" >
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location>  
</configuration> 
```

更新：最后我有一个 index.html，当我用 Default.aspx 替换它时它确实有效。

那么如何在不添加扩展名的情况下保护任何文件:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:26:51.680

身份验证标记可能丢失。这段代码对我有用：

```
<system.web>
    <identity impersonate="true"/>
    <authentication mode="Forms">
        <forms cookieless="AutoDetect" protection="All" slidingExpiration="true" loginUrl="~/login.aspx"/>
    </authentication>
    <authorization>
        <deny users="?"/>
    </authorization>
</system.web>
<location path="styles">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location>
<location path="images">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location>
<location path="scripts">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:23:35.300

我认为您不需要空的第一个 system.web 并且您不需要将第二个包装在位置标签中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-22T04:46:01.330

我认为您唯一缺少的是：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"></modules>
</system.webServer>

<system.web>
    <authentication mode="Forms">
        <forms loginUrl="Default.aspx">
        </forms>
    </authentication>
</system.web> 
```

这就是我所拥有的并且它有效：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"></modules>
</system.webServer>
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="Default.aspx">
        </forms>
    </authentication>
</system.web>
<location path="secure">
  <system.web>
    <authorization>
      <deny users="?" />
    </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:34:56.983

试试这个

```
 <configuration>
    <system.web>
   ...
   <authentication mode="Forms">
   <forms name="MyAppCookie" loginUrl="~/Login.aspx" protection="All" timeout="30" path="/" />
 </authentication>
  </system.web>
  ...
     //deny the access to annonymous users in the Secure directory
    <location path="Secure" >
      <system.web>
    <authorization>
    <deny users="?" />
   </authorization>
    </system.web>
   </location>  
</configuration> 
```

# python - django 表单是如何工作的

> ID：12340713
> 
> 赞同：1
> 
> 时间：2012-09-09T16:17:51.187
> 
> 标签：python, django

我正在学习 Django。特别是我正在阅读有关[表格的](https://docs.djangoproject.com/en/1.3/topics/forms/)内容，但我无法理解它们是如何工作的。让我们看一下示例代码：

```
from django import forms

class ContactForm(forms.Form):
    subject = forms.CharField(max_length=100)
    message = forms.CharField()
    sender = forms.EmailField()
    cc_myself = forms.BooleanField(required=False) 
```

为什么要创建具有无限成员的类？没有`self`声明。

我查看了 Django 源代码本身：

```
class Form(BaseForm):
"A collection of Fields, plus their associated data."
# This is a separate class from BaseForm in order to abstract the way
# self.fields is specified. This class (Form) is the one that does the
# fancy metaclass stuff purely for the semantic sugar -- it allows one
# to define a form using declarative syntax.
# BaseForm itself has no way of designating self.fields.
__metaclass__ = DeclarativeFieldsMetaclass 
```

你能解释一下它的作用是`__metaclass__`什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:20:19.560

表单字段是[描述符](http://docs.python.org/howto/descriptor.html)，它们只是一个写入[特定协议](http://docs.python.org/reference/datamodel.html#implementing-descriptors)的类。元类是类的类型（因为类本身是对象，是从*某物*实例化的）。

# php - 如何使用 PUT 而不是使用 PHP 的 POST 上传文件

> ID：12340720
> 
> 赞同：8
> 
> 时间：2012-09-09T16:19:22.700
> 
> 标签：php, rest, put, http-put

我正在构建我的第一个 REST Api，到目前为止一切顺利，我只是遇到了通过`PUT`请求方法上传文件的问题。我需要这样做是`PUT`因为我正在从 iOS 应用程序更新用户及其头像图像，而 PUT 专门用于更新请求。

所以当我`PUT`和文件上传时，`$_FILES`数组实际上是空的，但是当我打印`PUT`数据时

```
parse_str(file_get_contents('php://input'), $put_vars);  
$data = $put_vars; 
print_r($data); 
```

我得到以下回复；

```
Array
(
    [------WebKitFormBoundarykwXBOhO69MmTfs61
Content-Disposition:_form-data;_name] => \"avatar\"; filename=\"avatar-filename.png\"
Content-Type: image/png

�PNG

) 
```

现在我并不真正理解这些`PUT`数据，因为我不能像数组或任何东西一样访问它。所以我的问题是如何从`PUT`数据中访问上传的文件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T16:26:50.403

PHP 为某些客户端用来在服务器上存储文件的 HTTP PUT 方法提供支持。PUT 请求比使用 POST 请求上传文件要简单得多，它们看起来像这样：

```
PUT /path/filename.html HTTP/1.1 
```

以下代码在[官方 PHP 文档](http://php.net/manual/en/features.file-upload.put-method.php)中，用于通过 PUT 上传文件：

```
<?php
/* PUT data comes in on the stdin stream */
$putdata = fopen("php://input", "r");

/* Open a file for writing */
$fp = fopen("myputfile.ext", "w");

/* Read the data 1 KB at a time
   and write to the file */
while ($data = fread($putdata, 1024))
  fwrite($fp, $data);

/* Close the streams */
fclose($fp);
fclose($putdata);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:27:30.637

PHP 手册中有一个示例：[文件上传：PUT 方法](http://php.net/manual/en/features.file-upload.put-method.php)。

```
<?php
/* PUT data comes in on the stdin stream */
$putdata = fopen("php://input", "r");

/* Open a file for writing */
$fp = fopen("myputfile.ext", "w");

/* Read the data 1 KB at a time
   and write to the file */
while ($data = fread($putdata, 1024))
  fwrite($fp, $data);

/* Close the streams */
fclose($fp);
fclose($putdata);
?> 
```

# html - 如何让 VIM 停止缩进关闭标签？

> ID：12340723
> 
> 赞同：1
> 
> 时间：2012-09-09T16:19:51.513
> 
> 标签：html, vim

我使用 MacVim 来编辑 HTML 文件。它已经提供了合理的内置缩进。但是，每当我有一个新的标签对时：

```
<div id='test'> 
```

并想关闭它，它总是变成

```
<div id='test'>
    </div> 
```

而不是

```
<div id='test'>
</div> 
```

这有点烦人。有关如何解决此问题的任何提示？

编辑：我`.vimrc`可能相关的部分内容：

```
syntax on
filetype plugin on
filetype indent on
set tabstop=4
set expandtab
set shiftwidth=4 
```

# nsstring - 如何从数据库将值分配给 NSString

> ID：12340727
> 
> 赞同：0
> 
> 时间：2012-09-09T16:20:04.740
> 
> 标签：nsstring, nsmutablearray, ios5.1

我正在从 sqlite 数据库中获取 TEXT 类型的数据，`NSMUtableArray`然后我以这种方式将它们分配给 NSString 变量

`NSString *billname=[NSString stringWithFormat:@"%@",[tempAyyar valueForkey:@"Bill_Name"]];`

但它将值分配为（“测试账单”）。但我想把它作为测试账单。我怎样才能以这种方式获得价值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:30:55.397

在数组上调用 -valueForKey: 是通过在其对象上调用 -valueForKey: 返回一个带有结果的数组。以下内容来自文档：

```
Returns an array containing the results of invoking valueForKey: using key on each of the array's objects. 
```

简而言之，您应该检查数组中有哪些对象（可能是 NSDictionary 或类似的东西。）

```
//just a safety check: if there is at least 1 object
if([tempAyyar count] > 0) {
    //value is probably an NSDictionary (you should check yourself)
    id value = [tempAyyar objectAtIndex:0];

    NSString* billname = [value valueForKey:@"Bill_Name"];

    //now the name Bill's name should show properly
    NSLog(@"Bill's name is %@", billname);
} 
```

也许您需要访问数组中的多个对象，那么您应该调整我提供的示例代码。

# objective-c - GCDAsyncSocket 未连接或给我错误以知道它失败

> ID：12340729
> 
> 赞同：3
> 
> 时间：2012-09-09T16:20:08.110
> 
> 标签：objective-c, ios, gcdasyncsocket

我正在尝试使用`GCDAsyncSocket`该类连接到设备，但遇到了问题。它似乎没有通知我它是否连接，但也没有通知我它未能连接。

这是我的 .h 文件

```
#import <Foundation/Foundation.h>
#import "GCDAsyncSocket.h"

@interface SocketTestClass : NSObject <GCDAsyncSocketDelegate>
{
    GCDAsyncSocket* socket;
}

@end 
```

这是我的 .m 文件

```
@implementation SocketTestClass

- (void)dealloc
{
    [self disconnect];
}

- (void)connect
{
    NSLog(@"Ready to create socket");

    socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError* error = Nil;
    if (![socket connectToHost:@"192.168.1.200" onPort:80 withTimeout:10 error:&error])
    {
        NSLog(@"Failed to create socket");
    }
}

- (void)disconnect
{
    if ([socket isConnected])
    {
        [socket disconnect];
    }
}

- (void)socket:(GCDAsyncSocket *)sock
didAcceptNewSocket:(GCDAsyncSocket *)newSocket
{
    NSLog(@"Socket did accept new socket");
}

- (void)socket:(GCDAsyncSocket *)sock
didConnectToHost:(NSString *)host
          port:(uint16_t)port
{
    NSLog(@"Socket did connect to host on port");
}

- (void)socket:(GCDAsyncSocket *)sock
   didReadData:(NSData *)data
       withTag:(long)tag
{
    NSLog(@"Socket did read data with tag");
}

- (void)socket:(GCDAsyncSocket *)sock
didReadPartialDataOfLength:(NSUInteger)partialLength
           tag:(long)tag
{
    NSLog(@"Socket did read partial data of length");
}

- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag
{
    NSLog(@"Socket did write data with tag");
}

- (void)socket:(GCDAsyncSocket *)sock
didWritePartialDataOfLength:(NSUInteger)partialLength
           tag:(long)tag
{
    NSLog(@"Socket did write partial data of length");
}

- (void)socketDidCloseReadStream:(GCDAsyncSocket *)sock
{
    NSLog(@"Socket did close read stream");
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock
                  withError:(NSError *)err
{
    NSLog(@"Socket did disconnect with error");
}

- (void)socketDidSecure:(GCDAsyncSocket *)sock
{
    NSLog(@"Socket did secure");
}

@end 
```

从我的视图控制器中，我调用了这个类的 connect 方法，但唯一打印到控制台的是：

```
Ready to create socket 
```

注意：我已经为控制台实现了所有委托，`GCDAsyncSocket`并通过`NSLog`.

关于为什么我没有收到消息“Socket did connect to host on port”或消息“Socket did disconnect with error”的任何想法？

# c++ - SDL 插件库未正确链接

> ID：12340732
> 
> 赞同：1
> 
> 时间：2012-09-09T16:20:11.653
> 
> 标签：c++, mingw, sdl, linker-errors, codeblocks

我尝试将 SDL_mixer、SDL_ttf 和 SDL_image 链接到我的项目，但由于某种原因，在编译我的代码时会弹出这些错误。我包含的头文件取决于它上面的库。我按以下顺序链接到我的图书馆：

MinGW32 OpenGL32 SDLmain SDL SDL_image SDL_ttf SDL_mixer

```
#include <map>
#include <string>
#include <sstream>
#include <fstream>
#include <iostream>
#include <GL/gl.h>
#include <SDL/SDL.h>
#include <SDL/SDL_opengl.h>
#include <SDL/SDL_image.h>
#include <SDL/SDL_mixer.h>
#include <SDL/SDL_ttf.h>

using namespace std;

#include "include_file.h"
#include "structure.h"
#include "player.h"
#include "healthclass.h"
#include "items.h"
#include "loadfiles.h"
#include "init_game.h"
#include "missions.h" 
```

然后是错误：

```
obj\Release\main.o:main.cpp:(.text+0x16e): undefined reference to `Mix_LoadMUS'
obj\Release\main.o:main.cpp:(.text+0x197): undefined reference to `Mix_LoadWAV_RW'
obj\Release\main.o:main.cpp:(.text+0x1c0): undefined reference to `Mix_LoadWAV_RW'
obj\Release\main.o:main.cpp:(.text+0x1e9): undefined reference to `Mix_LoadWAV_RW'
obj\Release\main.o:main.cpp:(.text+0x7cd): undefined reference to `IMG_Load'
obj\Release\main.o:main.cpp:(.text+0x996): undefined reference to `TTF_RenderUTF8_Shaded'
obj\Release\main.o:main.cpp:(.text+0x20ca): undefined reference to `Mix_CloseAudio'
obj\Release\main.o:main.cpp:(.text+0x20cf): undefined reference to `TTF_Quit'
obj\Release\main.o:main.cpp:(.text+0x2f7b): undefined reference to `IMG_Load'
obj\Release\main.o:main.cpp:(.text+0x3788): undefined reference to `TTF_Init'
obj\Release\main.o:main.cpp:(.text+0x37ac): undefined reference to `Mix_OpenAudio'
obj\Release\main.o:main.cpp:(.text+0x3914): undefined reference to `TTF_OpenFont'
obj\Release\main.o:main.cpp:(.text+0x3983): undefined reference to `Mix_PlayMusic'
obj\Release\main.o:main.cpp:(.text+0x61f0): undefined reference to `Mix_PlayChannelTimed'
obj\Release\main.o:main.cpp:(.text+0x6330): undefined reference to `Mix_Playing' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T16:49:00.700

我发现我试图用 64 位版本的 SDL_image、SDL_mixer 和 SDL_ttf 编译 32 位版本的 SDL。因此，在安装附加库时，请在安装库文件时使用 x86 文件夹而不是 x64 文件夹。如果您有一台 64 位计算机，如果 SDL 是 32 位则使用 x86 lib 文件夹并不重要，除非您知道自己在做什么，而我不知道。

# android - 如何为 Android 做 JOpenID？

> ID：12340733
> 
> 赞同：1
> 
> 时间：2012-09-09T16:20:10.733
> 
> 标签：android, openid, google-api, jopenid

我正在尝试为我的 Android 应用程序创建一个 openid 登录活动。

为此，我使用[JOpenID](http://code.google.com/p/jopenid/wiki/QuickStart) ..

我可以获得“端点”和“关联”。

**但是..**我很困惑中止 setReturnTo() 和 setRealm() 方法

我尝试使用“http://locahost”和“myip”（硬代码）

```
manager.setReturnTo("http://locahost");
manager.setRealm("http://*.locahost"); 
```

代码如下所示。

```
public void ib_signon(View v)
{
         OpenIdManager manager = new OpenIdManager();

         manager.setReturnTo("http://locahost");
         manager.setRealm("http://*.locahost");

         //gets endpoint
         Endpoint endpoint = manager.lookupEndpoint("Google");
         System.out.println("endpoint=="+endpoint);

         //gets association
         Association association = manager.lookupAssociation(endpoint);
         System.out.println("association=="+association);

         String autUrl = manager.getAuthenticationUrl(endpoint, association);
         System.out.println("Copy the authentication URL in browser:\n" + autUrl);

         //show login-dialog in an webview
         webView = new WebView(this);
         webView.loadUrl(autUrl);
         setContentView(webView);

         /*System.out.println("After successfully sign on in browser, enter the URL of address bar in browser:");
         String ret = readLine();
         HttpServletRequest request = createRequest(ret);
         Authentication authentication = manager.getAuthentication(request, association.getRawMacKey());
         System.out.println(authentication);
         System.out.println("Identity: " + authentication.getIdentity());
         */
         //Intent i = new Intent(this, contactsActivity.class);
         //startActivity(i);
} 
```

在我在 google-login-dialog(webview) 中写入我的帐户数据后，

谷歌回应：

```
The page you requested is invalid. 
```

# log4net-appender - 用于 Web 服务的 Log4Net

> ID：12340736
> 
> 赞同：0
> 
> 时间：2012-09-09T16:20:27.603
> 
> 标签：log4net-appender

Log4Net 对于 Web 应用程序是安全的，因为我知道 log4net 是线程安全的，但它不是进程安全的。在这种情况下，我们不能使用单个文件来写入日志。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:45:34.277

假设您正在使用文件附加程序，那么 DEFAULT 行为确实不会像您所说的那样是进程安全的。但是还有另外两个选择。

来自 Log4Net 文档：

FileAppender 通过 LockingModel 属性支持可插入的文件锁定模型。FileAppender.ExclusiveLock 实现的默认行为是获取文件的独占写入锁，直到此附加程序关闭。替代模型仅在 appender 写入日志事件 (FileAppender.MinimalLock) 或使用命名的系统范围互斥锁 (FileAppender.InterProcessLock) 进行同步时持有写锁。

配置行如下：

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

我认为独占是性能最高的。

尽管您没有问过这个问题，但您可以在配置中使用以下语法以编程方式设置文件/路径：

```
<file type="log4net.Util.PatternString" value="%property{LogName}" /> 
```

然后在您的设置中设置 LogName vi C#：

```
log4net.GlobalContext.Properties["LogName"] = fullPathToLogfile + afileName ; 
var configInfo = new FileInfo("configfilename.config");    
log4net.Config.XmlConfigurator.Configure(configInfo); 
```

# css - 在 CSS 中指定多个属性选择器

> ID：12340737
> 
> 赞同：387
> 
> 时间：2012-09-09T16:20:30.707
> 
> 标签：css, attributes, css-selectors

执行以下操作的语法是什么：

```
input[name="Sex" AND value="M"] 
```

基本上，我想选择具有属性以及属性的`input`元素：`name="Sex"``value="M"`

```
<input type="radio" name="Sex" value="M" /> 
```

*不应*选择以下元素：

```
<input type="radio" name="Sex" value="F" /> 
```

* * *

## 回答 #1

> 赞同：567
> 
> 时间：2012-09-09T16:22:01.887

简单`input[name=Sex][value=M]`会很好。它实际上在[标准文档](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)中得到了很好的描述：

> 多个属性选择器可以用来引用一个元素的多个属性，甚至可以多次引用同一个属性。
> 
> 在这里，选择器匹配所有“hello”属性的值恰好为“Cleveland”且“goodbye”属性的值恰好为“Columbus”的所有 SPAN 元素：
> 
> `span[hello="Cleveland"][goodbye="Columbus"] { color: blue; }`

作为旁注，仅当属性值不是有效标识符时，才需要在属性值周围使用引号。

[JSFiddle 演示](http://jsfiddle.net/W3aZs/1/)

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-02-20T10:15:23.090

对于连接它是：

```
input[name="Sex"][value="M"] {} 
```

对于工会来说，它是：

```
input[name="Sex"], input[value="M"] {} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-09-09T16:22:20.163

连接属性选择器：

```
input[name="Sex"][value="M"] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-10T20:22:34.233

只是要补充一点，选择器和左括号之间不应该有空格。

```
td[someclass] 
```

将工作。但

```
td [someclass] 
```

将不会。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2017-06-21T05:27:19.480

```
[class*="test"],[class="second"] {
background: #ffff00;
} 
```

# java - 散列字符串和相关异常

> ID：12340740
> 
> 赞同：0
> 
> 时间：2012-09-09T16:21:06.237
> 
> 标签：java, exception, exception-handling, md5

我需要计算一个字符串的 MD5 哈希并在谷歌上搜索我发现[了这个](http://www.anyexample.com/programming/java/java_simple_class_to_compute_md5_hash.xml)。

我想要一个负责散列字符串的可重用实用程序类，我会像这样使用它`AeSimpleMD5.MD5(myString);`：

这个调用意味着我必须检查`NoSuchAlgorithmException`并且`UnsupportedEncodingException`每次我想散列一个字符串；我对此有几个问题，我将复制可能引发异常的行：

```
 MessageDigest md = MessageDigest.getInstance("MD5");
    md.update(str.getBytes("iso-8859-1"), 0, str.length()); 
```

1）是否会抛出异常？怎么可能缺少 MD5 算法或“iso-8859-1”编码？

2）我想知道如果我碰巧遇到这些异常之一该怎么办；答案是：可能什么都没有！那么将异常包装到新的运行时异常（可能类似于`MD5HashingException`）中是否更有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:37:45.467

这里的典型模式是：

```
try {
   /* do whatever */
} catch (ExceptionIDontBelieveIn eidbi) [
   throw new RuntimeException(eidbi); // or subclass thereof
} 
```

这就是你表达的方式：“在我的情况下，我相信这个例外不会发生”。如果您确定代码永远不会在缺少 MD5 或 ISO-8859-1 的特殊引导类路径中运行，那么这就是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:23:25.923

1.  很可能不会，似乎极不可能`MD5`从未来的实现中删除。
2.  我认为你的想法是正确的。对此没有什么可做的，因此将其捕获并抛出自定义 RuntimeException 似乎是最明智的做法。不过，您不必多次这样做。只需`MessageDigest`在初始化期间获取对 的引用，然后保存并在以后重用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:33:02.567

因为原来的设计

```
MessageDigest.getInstance(); 
```

以 a`String`作为参数，没有进行编译时检查来检查散列算法是否存在，因此*可能*会 `NoSuchAlgorithmException`被抛出。

但是，作为`MD5`Java 支持的标准算法，永远不应抛出此异常。

`iso-8859-1`字符编码也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:47:33.493

您可以考虑使用 Google Guava，在这种情况下您不必处理异常（因为它们不会发生）：

```
byte[] hashedBytes = Hashing.md5().hashString(str, Charsets.ISO_8859_1).asBytes(); 
```

# css - CSS body `background-image` 在 Chrome、Safari (webkit) 上对齐

> ID：12340743
> 
> 赞同：0
> 
> 时间：2012-09-09T16:21:28.133
> 
> 标签：css, background-image, right-to-left, document-body

在为从右到左的读者（阿拉伯语和希伯来语）调整网站时，我一直在努力解决 webkit 浏览器（chrome 和 safari）上的问题。最后我将此报告为[WebKit 错误](https://bugs.webkit.org/show_bug.cgi?id=95951)，但我仍然需要解决此问题。

问题

将背景图像分配给 body 标签，并将此背景图像放置在右侧并重复-y。现在，使窗口变小，直到出现水平滚动条。背景图像将不再与文档的右侧对齐，它将定位在距视口宽度`x`左侧的像素处。`x`

这是一个简化的示例，用于隔离问题。“内容”一词应始终位于背景图像的蓝色部分之上。

```
<html dir="rtl">
<head>
  <style type="text/css">
  body {
    margin: 0;
    background-image: url(data:image/png;base64, ...);
    background-position: top right;
    background-repeat: repeat-y;
  }
  #contents {
    width: 900px;
    height: 900px;
  }
  </style>
</head>
<body>
  <div id="contents">Contents</div>
</body>
</html> 
```

您还可以查看WebKit 错误报告中包含的[屏幕转储。](https://bug-95951-attachments.webkit.org/attachment.cgi?id=162450)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:13:20.373

使用绝对定位的元素怎么样？

```
<html dir="rtl">
<head>
<style type="text/css">
body {
    margin: 0;
}
#bg {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvgAAAACAgMAAABQ2kAmAAAAAXNSR0IArs4c6QAAAAlQTFRF5ev/9Pb/////KIKAcgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfcCQIMFSrrJQqoAAAAFUlEQVQY02PgWjU4wQoGokDUkHY+ACqhykF2Ey1yAAAAAElFTkSuQmCC);
    background-position: top right;
    background-repeat: repeat-y;
    position: absolute;
    right: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}
#contents {
    width: 900px;
    height: 900px;
}
</style>
</head>
<body>
<div id="bg"></div>
<div id="contents">Contents</div>
</body>
</html> 
```

似乎对我来说是一种解决方法。

# vb.net - vb.net：如何在我的程序中使用递归？

> ID：12340744
> 
> 赞同：0
> 
> 时间：2012-09-09T16:21:41.463
> 
> 标签：vb.net, recursion

我试图找到给定没有等边三角形的区域。第一个有一个长度为“l”的大等边三角形，从它的所有侧面再次形成长度为“l / 3”的新等边三角形，从所有3个三角形的自由边（即只有2边）形成长度为“l”的新三角形/9"。

所以如果没有使用递归给出重复和长度，我需要找到所有三角形的总面积

所以这里是我尝试过的代码。它给出了最多 2 次重复的正确结果和更多的错误结果：

```
Module Module1
    Dim noOfTriangles As Single = 3 / 2

    Function AreaOfTriangle(ByVal noOfRepetition As Integer, ByVal length As Double)
        If noOfRepetition = 0 Then
            Return Nothing
        Else
            noOfTriangles = noOfTriangles * 2
            Return (((3 ^ (1 / 2)) / 4) * (length ^ 2) + noOfTriangles * AreaOfTriangle(noOfRepetition - 1, length / 3))
        End If

    End Function

    Sub Main()
        Dim area As Double
        area = AreaOfTriangle(3, 9)
        Console.WriteLine(area)
        Console.ReadKey()
    End Sub 
End Module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:29:29.680

我不明白确切的问题描述，但您的代码中有一些需要修复的地方。

*   **首先**`Option Strict`，在项目选项中启用。**总是。**然后您的代码将不再编译，因为它包含错误。

*   缺少函数的返回类型。它可能是 (!)`Single`或`Double`.

*   `Return Nothing`没有意义。一个区域永远不是“无”。但是，它可以是`0`。

*   不要使用模块范围的变量，而是使用另一个参数。

*   声明变量时立即初始化变量：`Dim area As Double = AreaOfTriangle(…)`.

*   让逻辑更清晰。我真的不知道代码的作用。这包括使用专有名称。`noOfTriangles`是 类型`Single`并且具有初始值`3 / 2`。这当然没有意义：许多三角形将始终是整数，而不是分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:54:04.713

您不需要乘以 noOfTriangles ，否则您将重复计算。您将递归一级的三角形数量乘以面积。但是你的区域本身是一个递归，所以你正在计算所有三角形到递归底部的面积。这意味着，在第 3 次迭代中，没有“6 个三角形”，只有“2 个三角形”，实际上在每次迭代中，除了第一个迭代，只有“2 个三角形”。通过对 AreaOfTriangle 的调用之外的乘法处理，视觉上有 6、12、24 等。

替换此行

```
noOfTriangles = noOfTriangles * 2 
```

有了这个：

```
If (noOfTriangles = 3 / 2) Then
    noOfTriangles = 3
Else
    noOfTriangles = 2
End If 
```

它应该工作。

# c - 在线程启动时执行 pthread“pre init”函数

> ID：12340750
> 
> 赞同：3
> 
> 时间：2012-09-09T16:22:41.887
> 
> 标签：c, linux, pthreads

我正在使用启动 pthreads 的外部 linux 库。

有什么方法可以设置一个触发器，当一个新的 pthread 在线程“main”函数启动之前从线程的上下文启动时调用提供的函数？（比如安装信号处理程序或其他）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:33:26.327

没有标准的 API 可以满足您的要求。总是有复杂而脆弱的选择；例如，您可以构建一个过滤器 Shared Lib（请参阅 ld 手册页中的选项 --filter=name ）来拦截 pthread_create，并围绕调用者为线程创建自己的包装函数。

# debugging - 我们需要两个 GPU 来调试 CUDA 代码吗？

> ID：12340752
> 
> 赞同：1
> 
> 时间：2012-09-09T16:23:09.343
> 
> 标签：debugging, cuda, gpu

引用[**这里**](https://stackoverflow.com/a/4060028/113124)的评论：

> 如果您想在单台机器上进行调试，那么您将需要两个 GPU（因为运行代码的 GPU 在遇到断点时将停止，因此您的显示器也会阻塞）。

虽然有点道理，但GPU不是有并行性吗？我认为他们这样做，如果是这样，我看不出在调试时停止显示过程的原因。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:08:31.790

Nsight Visual Studio Edition 2.2 支持单GPU单系统调试。

如果您想进行单 GPU 调试，cuda-gdb 和 Nsight Eclipse 版要求您禁用显示。

# apache - 重定向到 404 通配符子域

> ID：12340754
> 
> 赞同：1
> 
> 时间：2012-09-09T16:23:28.203
> 
> 标签：apache, mod-rewrite, debian, wildcard, wildcard-subdomain

我在我的域名注册商上设置了通配符 A 记录。现在，如果用户访问我域上缺少的子域，他们将被重定向到主页。目前我的初始设置是这样的：

```
<VirtualHost *:80>
  ServerAdmin webmaster@localhost
  RewriteEngine On
  RewriteRule ^(.*)$ http://domain.com$1 [R]
  DocumentRoot /var/www
  <Directory />
    Options FollowSymLinks
    AllowOverride None
  </Directory>
  # more below...
</VirtualHost> 
```

任何通配符子域或者如果我的 IP 通过 URL 输入将重定向到主页。我可以对此做些什么，将通配符子域重定向（也许是 HTTP 重定向）到 404 页面而不是主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:40:33.930

尝试将您的重写规则更改为此；它应该触发 Apache 404 错误页面：

```
RewriteRule .* - [R=404,L] 
```

[可以使用ErrorDocument](http://httpd.apache.org/docs/current/mod/core.html#errordocument)指令将错误页面设置为自定义 HTML 或 PHP 页面。虽然 HTML 页面运行良好，但 PHP 脚本允许您做更多的事情。

~~您可能可以在通配符域上创建一个漂亮的页面，然后这样做：`RewriteRule .* /domain-doesnt-exist.php [L]`我上面提到的页面可以发送一个 404 标头，以防您希望搜索引擎忽略该页面。~~

# android - 合并原始联系人

> ID：12340756
> 
> 赞同：2
> 
> 时间：2012-09-09T16:23:47.343
> 
> 标签：android, contactscontract, android-syncadapter, rawcontacts

我有一个帐户和一个同步适配器，可以添加新的原始联系人以及相应的私人数据条目。我正在创建的联系人是基于电话号码的，这意味着我正在为每个现有电话号码创建一个新条目。

如何将我的原始联系人与链接到现有电话号码的现有原始联系人合并？

我尝试在数据表中创建一个新的电话号码条目，并将其链接到我正在添加的原始联系人。它有效，但它正在创建一个重复的电话号码。

我还尝试设置联系人 ID、显示名称、辅助显示名称，但没有成功......我可以在原始联系人中更改的唯一数据是帐户名称和类型，以及 SYNC1...SYNC4 列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:56:46.873

原始联系人表为每个联系人保存 1 行，数据表可以为原始表中的每一行保存任意数量的行。

要将新电话号码添加到联系人，请在数据表中插入行并`ContactsContract.Data.RAW_CONTACT_ID`设置为该联系人的原始表行`_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T13:02:33.173

您需要更新 AggregationExceptions 表中的条目。请参阅：http: [//developer.android.com/reference/android/provider/ContactsContract.AggregationExceptions.html](http://developer.android.com/reference/android/provider/ContactsContract.AggregationExceptions.html)

如果需要，支持批量加入的示例代码：

```
ArrayList<ContentProviderOperation> operations = new ArrayList<ContentProviderOperation>();
Builder builder = ContentProviderOperation.newUpdate(AggregationExceptions.CONTENT_URI);
builder.withValue(AggregationExceptions.TYPE, AggregationExceptions.TYPE_KEEP_TOGETHER);
builder.withValue(AggregationExceptions.RAW_CONTACT_ID1, raw1);
builder.withValue(AggregationExceptions.RAW_CONTACT_ID2, raw2);
operations.add(builder.build());
contentResolver.applyBatch(ContactsContract.AUTHORITY, tempArrayList); 
```

# wpf - ListView控件和蓝色边框高亮

> ID：12340761
> 
> 赞同：0
> 
> 时间：2012-09-09T16:25:02.550
> 
> 标签：wpf, listview, expression-blend

我正在创建一个使用几个 ListView 控件的应用程序。我有一个特殊的配色方案，我注意到，当鼠标进入 ListView 控件时，它周围有一个细的蓝色边框突出显示。

我无法弄清楚这是在哪里生成的。我正在使用 Expression Blend 来修改控件，但是我可以找到的 ListView 控件的所有组件都没有此蓝色的定义。事实上，ListView 控件中的任何内容都没有用于焦点视觉样式的触发器或状态，这是控件的行为方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:31:51.050

试试这个，应该做的伎俩：

```
<ListView Background="Transparent" BorderThickness="0" /> 
```

如果您想要这里的样式解决方案，它是：

```
<Style x:Key="{x:Type ListView}" TargetType="{x:Type ListView}">
  <Setter Property="SnapsToDevicePixels" Value="true"/>
  <Setter Property="OverridesDefaultStyle" Value="true"/>
  <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
  <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
  <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
  <Setter Property="VerticalContentAlignment" Value="Center"/>
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ListView}">
        <Border Name="Border"
          BorderThickness="1"
          BorderBrush="#888888"
          Background="#FFFFFF">
          <ScrollViewer Style="{DynamicResource {x:Static GridView.GridViewScrollViewerStyleKey}}">
            <ItemsPresenter />
          </ScrollViewer>
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="IsGrouping"
                   Value="true">
            <Setter Property="ScrollViewer.CanContentScroll"
                    Value="false"/>
          </Trigger>
          <Trigger Property="IsEnabled"
                   Value="false">
            <Setter TargetName="Border"
                    Property="Background"
                    Value="#AAAAAA"/>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style>

<Style x:Key="{x:Type ListViewItem}" TargetType="{x:Type ListViewItem}">
  <Setter Property="SnapsToDevicePixels" Value="true"/>
  <Setter Property="OverridesDefaultStyle" Value="true"/>
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ListBoxItem}">
        <Border 
          Name="Border"
          Padding="2"
          SnapsToDevicePixels="true"
          Background="Transparent">
          <GridViewRowPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="IsSelected" Value="true">
            <Setter TargetName="Border" Property="Background" Value="#DDDDDD"/>
          </Trigger>
          <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="#888888"/>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

使用样式内的边框和样式内`ListView`的触发器（您可以更改边框大小或仅更改颜色。`IsSelected``ListViewItem`

# ios - 缺少 [ 在开始消息发送表达式

> ID：12340765
> 
> 赞同：1
> 
> 时间：2012-09-09T16:25:20.787
> 
> 标签：ios, xcode

这段代码有什么问题：

```
NSError *error = nil;

[SFHFKeychainUtils deleteItemForUsername:@"<span class="Apple-style-span" style="font-family: Times; font-size: small;">IAPNoob01</span>" andServiceName:kStoredData error:&error]; 
```

错误是：

问题：缺少 [ 在开始消息发送表达式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T16:26:39.460

您必须转义字符串中的引号。

```
NSError *error = nil;

[SFHFKeychainUtils deleteItemForUsername:@"<span class=\"Apple-style-span\" style=\"font-family:Times;
    font-size: small;\">IAPNoob01</span>"
    andServiceName:kStoredData
    error:&error]; 
```

# c++ - memory_order_seq_cst 和 memory_order_acq_rel 有何不同？

> ID：12340773
> 
> 赞同：53
> 
> 时间：2012-09-09T16:26:27.467
> 
> 标签：c++, c++11, memory-model, stdatomic

存储是释放操作，加载是两者的获取操作。我知道这`memory_order_seq_cst`意味着对所有操作施加额外的总排序，但我无法构建一个示例，如果所有`memory_order_seq_cst`操作都替换为`memory_order_acq_rel`.

我是否遗漏了什么，或者差异只是文档效果，即`memory_order_seq_cst`如果一个人不打算使用更宽松的模型并`memory_order_acq_rel`在约束宽松模型时使用，则应该使用？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-09T16:45:57.567

[http://en.cppreference.com/w/cpp/atomic/memory_order](http://en.cppreference.com/w/cpp/atomic/memory_order)[在底部](http://en.cppreference.com/w/cpp/atomic/memory_order#Sequentially-consistent_ordering)有一个很好的例子，它只适用于`memory_order_seq_cst`. 本质上`memory_order_acq_rel`提供相对于原子变量的读写顺序，同时`memory_order_seq_cst`提供全局读写顺序。也就是说，顺序一致的操作在所有线程中以相同的顺序可见。

该示例归结为：

```
bool x= false;
bool y= false;
int z= 0;

a() { x= true; }
b() { y= true; }
c() { while (!x); if (y) z++; }
d() { while (!y); if (x) z++; }

// kick off a, b, c, d, join all threads
assert(z!=0); 
```

操作`z`由两个原子变量保护，而不是一个，因此您不能使用获取-释放语义来强制执行`z`始终递增的操作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-09-21T20:39:26.920

在像 x86 这样的 ISA 上，原子映射到屏障，实际的机器模型包括一个存储缓冲区：

*   **`seq_cst`存储需要刷新存储缓冲区，因此该线程稍后的读取会延迟到存储全局可见之后。**

*   `acquire`或者`release`不必*刷新*存储缓冲区。正常的 x86 加载和存储本质上具有 acq 和 rel 语义。（seq_cst 加上一个带有存储转发的存储缓冲区。）

    但是 x86 原子 RMW 操作总是被提升为，`seq_cst`因为 x86 asm`lock`前缀是一个完整的内存屏障。其他 ISA 可以在 asm 中进行轻松或`acq_rel`RMW，商店方能够与以后的商店进行有限的重新排序。（但不是以使 RMW 看起来非原子的方式：[为了排序，原子读取-修改-写入是一个还是两个操作？](https://stackoverflow.com/questions/65568185/for-purposes-of-ordering-is-atomic-read-modify-write-one-operation-or-two)）

* * *

**[https://preshing.com/20120515/memory-reordering-caught-in-the-act](https://preshing.com/20120515/memory-reordering-caught-in-the-act)是 seq_cst 存储和普通发布存储之间区别的一个有启发性的示例。** （在 x86 asm 中它实际上是`mov`+`mfence`与普通`mov`。实际上`xchg`是在大多数 x86 CPU 上执行 seq_cst 存储的更有效方法，但 GCC 确实使用`mov`+`mfence`）

* * *

有趣的事实：AArch64 的 LDAR 获取加载指令实际上是一个*顺序*获取，与 STLR 有特殊的交互。直到 ARMv8.3 LDAPR 才能 arm64 执行普通的获取操作，这些操作可以使用早期版本和 seq_cst 存储 (STLR) 重新排序。（`seq_cst`加载仍然使用 LDAR，因为它们[需要与 STLR 的交互](https://stackoverflow.com/questions/67397460/does-stlrb-provide-sequential-consistency-on-arm64)来恢复顺序一致性；`seq_cst`并且`release`存储都使用 STLR）。

使用 STLR / LDAR 您可以获得顺序一致性，但只需*在下一个 LDAR 之前*耗尽存储缓冲区，而不是在每个 seq_cst 存储之后立即在其他操作之前。我认为真正的 AArch64 硬件确实以这种方式实现它，而不是在提交 STLR 之前简单地耗尽存储缓冲区。

使用 LDAR / STLR 将 rel 或 acq_rel 加强到 seq_cst 不需要很昂贵，除非你 seq_cst 存储一些东西，然后 seq_cst 加载其他东西。然后它和x86一样糟糕。

其他一些 ISA（如 PowerPC）有更多的屏障选择，并且可以比 更便宜地增强`mo_rel`，但它们不能像 AArch64 那样便宜；seq-cst 商店需要一个完整的屏障。`mo_acq_rel``mo_seq_cst``seq_cst`

因此，AArch64 是一个例外，即`seq_cst`存储在现场耗尽存储缓冲区的规则，无论是使用特殊指令还是之后的屏障指令。ARMv8 是*在*C++11 / Java / 等之后设计的，这并非巧合。基本上确定 seq_cst 作为无锁原子操作的默认值，因此使它们高效很重要。在 CPU 架构师有几年时间考虑提供屏障指令或只是获取/释放与宽松的加载/存储指令的替代方案之后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-19T14:28:58.230

尝试仅使用获取/释放语义构建 Dekkers 或 Petersons 算法。

这是行不通的，因为获取/释放语义不提供 [StoreLoad] 栅栏。

在 Dekkers 算法的情况下：

```
flag[self]=1 <-- STORE
while(true){
    if(flag[other]==0) { <--- LOAD
        break;
    }
    flag[self]=0;
    while(turn==other);
    flag[self]=1        
} 
```

如果没有 [StoreLoad] 栅栏，商店可能会跳到负载前面，然后算法就会中断。2个线程同时看到另一个锁是空闲的，设置自己的锁并继续。现在您在关键部分中有 2 个线程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-08T10:04:50.120

仍然使用[memory_order](http://en.cppreference.com/w/cpp/atomic/memory_order)的定义和示例。但是将 memory_order_seq_cst 替换为 store 中的 memory_order_release 和 load 中的 memory_order_acquire。

**Release-Acquire 顺序保证了在一个线程中的存储**成为执行加载的线程中可见的副作用之前发生的一切。但是在我们的示例中，在**存储**在 thread0 和 thread1 之前什么都没有发生。

```
x.store(true, std::memory_order_release); // thread0

y.store(true, std::memory_order_release); // thread1 
```

此外，如果没有 memory_order_seq_cst，则无法保证 thread2 和 thread3 的顺序。你可以想象它们变成：

```
if (y.load(std::memory_order_acquire)) { ++z; } // thread2, load y first
while (!x.load(std::memory_order_acquire)); // and then, load x

if (x.load(std::memory_order_acquire)) { ++z; } // thread3, load x first
while (!y.load(std::memory_order_acquire)); // and then, load y 
```

因此，如果 thread2 和 thread3 在 thread0 和 thread1 之前执行，这意味着 x 和 y 都保持为假，因此，++z 永远不会被触及，z 保持 0 并且断言触发。

但是，如果 memory_order_seq_cst 进入图片，它会为所有被标记的原子操作建立一个单一的总修改顺序。因此，在 thread2 中，x.load 然后 y.load；在 thread3 中，y.load 然后 x.load 是确定的事情。

# jquery - GetSelectLink 越来越长

> ID：12340779
> 
> 赞同：1
> 
> 时间：2012-09-09T16:27:08.087
> 
> 标签：jquery, asp.net-mvc, webgrid

我正在尝试在 ASP.NET MVC 4 网站上使用 WebGrid。每行的末尾都包含一个链接，该链接由

```
@item.GetSelectLink("Select") 
```

选择就像一种魅力。但是，我想解决一个问题，因为我无法弄清楚它是由什么引起的。GetSelectLink 生成的链接正在获取一个名为 _swhg 的参数，该参数被设置为一个假定的随机数（看起来像是某种时间戳，无论如何都无关紧要）。每次我单击“选择”时，此参数都会附加另一个数字。因此，在多次单击“选择”后，链接如下所示：

```
http://localhost:59215/Buecher?Auswahl=1&__swhg=1347207774869,1347207775030,1347207775221,1347207775380,1347207775548 
```

由于单击“选择”，一旦网址过长，最终会出现 404 错误。

有没有人知道可能导致这种行为的原因？

# xml - 如何使用 XSLT 将单个 xml 消息转换为通用 XML 文档

> ID：12340783
> 
> 赞同：-3
> 
> 时间：2012-09-09T16:28:18.370
> 
> 标签：xml, xslt

我有以下由 Tibco 创建的 xml 消息

```
<?xml version="1.0" encoding="UTF-8"?>
<SalesInData>
    <COMPANYID>AIN2003</COMPANYID>
    <ENDDATE>20120825</ENDDATE>
    <FILENAME>2-SG4_2244_20120815.xml</FILENAME>
    <SalesInRecord>
        <ROW_NUM>7</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45685</HP_PRODUCT_ID>
        <LOCATION_ID/>
        <LOCATION_NAME>XYZ XY</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    </SalesInRecord>
    <STARTDATE>20120819</STARTDATE>
    <SUBMITDATE>20120827</SUBMITDATE>
</SalesInData>
<?xml version="1.0" encoding="UTF-8"?>
<SalesInData>
    <COMPANYID>AIN2003</COMPANYID>
    <ENDDATE>20120825</ENDDATE>
    <FILENAME>2-SG4_2244_20120815.xml</FILENAME>
    <SalesInRecord>
        <ROW_NUM>1</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45678</HP_PRODUCT_ID>
        <LOCATION_ID>2-PQL-3401</LOCATION_ID>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    </SalesInRecord>
    <STARTDATE>20120819</STARTDATE>
    <SUBMITDATE>20120827</SUBMITDATE>
</SalesInData>
<?xml version="1.0" encoding="UTF-8"?>
<SalesInData>
    <COMPANYID>AIN2003</COMPANYID>
    <ENDDATE>20120825</ENDDATE>
    <FILENAME>2-SG4_2244_20120815.xml</FILENAME>
    <SalesInRecord>
        <ROW_NUM>1</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45678</HP_PRODUCT_ID>
        <LOCATION_ID>2-PQL-3401</LOCATION_ID>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
    </SalesInRecord>
    <STARTDATE>20120819</STARTDATE>
    <SUBMITDATE>20120827</SUBMITDATE>
</SalesInData> 
```

但预期的输出将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SalesInData>
    <COMPANYID>AIN2003</COMPANYID>
    <ENDDATE>20120825</ENDDATE>
    <FILENAME>2-SG4_2244_20120815.xml</FILENAME>
    <SalesInRecord>
        <ROW_NUM>7</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45685</HP_PRODUCT_ID>
        <LOCATION_ID/>
        <LOCATION_NAME>XYZ XY</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
        <GOODS_RECIVED_DATE/>
    </SalesInRecord>
    <SalesInRecord>
        <ROW_NUM>1</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45678</HP_PRODUCT_ID>
        <LOCATION_ID>2-PQL-3401</LOCATION_ID>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
        <GOODS_RECIVED_DATE/>
    </SalesInRecord>
    <SalesInRecord>
        <ROW_NUM>1</ROW_NUM>
        <BUY_QTY>5</BUY_QTY>
        <HP_PRODUCT_ID>Apj45678</HP_PRODUCT_ID>
        <LOCATION_ID>2-PQL-3401</LOCATION_ID>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
        <UNIT_BUY_PRICE>999999999</UNIT_BUY_PRICE>
        <GOODS_RECIVED_DATE/>
    </SalesInRecord>
    <STARTDATE>20120819</STARTDATE>
    <SUBMITDATE>20120827</SUBMITDATE>
</SalesInData> 
```

但我想将在 tibco 中创建的这些单独的 xml 记录转换为带有 XSLT 的单个 xml 文档，如上所示。请提供可以执行任务的代码。还有一些其他元素可以为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:41:10.653

您的输入文件不是格式良好的 XML，因此没有 xslt 处理器可以使用它。我看到的唯一方法是首先生成一个 xml 文件，然后在接下来的步骤中进行一个简单的 xsl 处理。

1.  删除 xml intros '<?xml version="1.0" encoding="UTF-8"?>' 例如使用 sed 或其他工具
2.  将结果放在您自己的根元素中
3.  进行所需的 xslt 转换

`#simple bash example
sed -e 's/<?xml version="1.0" encoding="UTF-8"?>//g' YOUR_INPUT > temp.file
echo '<?xml version="1.0" encoding="UTF-8"?>' > temp2.file
echo "<MyStart>" >> temp2.file
cat temp.file >> temp2.file
echo "</MyStart>" >> temp2.file
xsltproc YOUR_STYLESHEET temp2.file > YOUR_RESULT`

# javascript - 使用 JavaScript 拆分名字和姓氏

> ID：12340789
> 
> 赞同：62
> 
> 时间：2012-09-09T16:29:44.907
> 
> 标签：javascript, string, parsing

我有一个名为**Paul Steve Panakkal**的用户。这是一个长名称，它不适合 div 容器。那么无论如何使用 JavaScript 或 jQuery 将名字和姓氏从中分离出来吗？

该名称是从 PHP 获取到 JavaScript 中的变量中的。然后使用 JS 对其进行拆分。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-09-09T16:31:28.727

您应该使用以下[`String.prototype.split()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)方法：

```
'Paul Steve Panakkal'.split(' '); // returns ["Paul", "Steve", "Panakkal"] 
```

你可以这样使用它：

```
'Paul Steve Panakkal'.split(' ').slice(0, -1).join(' '); // returns "Paul Steve"
'Paul Steve Panakkal'.split(' ').slice(-1).join(' '); // returns "Panakkal" 
```

所以共同点：

```
var firstName = fullName.split(' ').slice(0, -1).join(' ');
var lastName = fullName.split(' ').slice(-1).join(' '); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-09T16:31:58.503

是的：

```
var fullName = "Paul Steve Panakkal".split(' '),
    firstName = fullName[0],
    lastName = fullName[fullName.length - 1]; 
```

参考：

*   [`string.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-10-19T21:34:30.643

在西班牙语中，这可能很棘手，因为您可能有第二个可选名称，甚至是复杂的姓氏，如“del Bosque”或“de la Hoya”、带有重音符号的元音和*ñ*。以下 javascript 能够解析完整的西班牙名称，因为您在编写它时会考虑大写和小写。它会返回一个json给你

1.  **name** : 1 或 2 个主要名称
2.  **lastName** : 主要姓氏
3.  **secondLastName**：第二个姓氏

代码是：

```
function parseName(input) {
        var fullName = input || "";
        var result = {};

        if (fullName.length > 0) {
            var nameTokens = fullName.match(/[A-ZÁ-ÚÑÜ][a-zá-úñü]+|([aeodlsz]+\s+)+[A-ZÁ-ÚÑÜ][a-zá-úñü]+/g) || [];

            if (nameTokens.length > 3) {
                result.name = nameTokens.slice(0, 2).join(' ');
            } else {
                result.name = nameTokens.slice(0, 1).join(' ');
            }

            if (nameTokens.length > 2) {
                result.lastName = nameTokens.slice(-2, -1).join(' ');
                result.secondLastName = nameTokens.slice(-1).join(' ');
            } else {
                result.lastName = nameTokens.slice(-1).join(' ');
                result.secondLastName = "";
            }
        }

        return result;
} 
```

如果您要指定第二个名字，则姓氏是必需的。试试看：

*   维森特·埃尔南德斯飞机
*   奥斯卡·德拉霍亚
*   何塞·朱利安·马蒂·佩雷斯
*   曼努埃尔·德·塞斯佩德斯·德尔·卡斯蒂略
*   卡利斯托·加西亚·伊尼格斯

甚至尝试一个复杂的，比如

*   María de la Caridad del Bosque y Loynáz

评论你的经历。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-09-09T22:09:14.803

我认为，是时候开始使用正则表达式了 :)

```
"Paul Steve Panakkal".split(/(\s).+\s/).join("") // "Paul Panakkal" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-30T04:34:19.890

Speransky Danil 的答案的扩展版本，它处理提供的字符串中只有一个单词的情况。

```
/**
 * Gets the first name, technically gets all words leading up to the last
 * Example: "Blake Robertson" --> "Blake"
 * Example: "Blake Andrew Robertson" --> "Blake Andrew"
 * Example: "Blake" --> "Blake"
 * @param str
 * @returns {*}
 */
exports.getFirstName = function(str) {
    var arr = str.split(' ');
    if( arr.length === 1 ) {
        return arr[0];
    }
    return arr.slice(0, -1).join(' '); // returns "Paul Steve"
}

/**
 * Gets the last name (e.g. the last word in the supplied string)
 * Example: "Blake Robertson" --> "Robertson"
 * Example: "Blake Andrew Robertson" --> "Robertson"
 * Example: "Blake" --> "<None>"
 * @param str
 * @param {string} [ifNone] optional default value if there is not last name, defaults to "<None>"
 * @returns {string}
 */
exports.getLastName = function(str, ifNone) {
    var arr = str.split(' ');
    if(arr.length === 1) {
        return ifNone || "<None>";
    }
    return arr.slice(-1).join(' ');
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-06-15T07:05:49.700

我尝试了下面的代码，它对我来说很酷

```
var full_name = 'xyz abc pqr';
var name = full_name.split(' ');
var first_name = name[0];
var last_name = full_name.substring(name[0].length.trim()); 
```

在上面的例子中：

(1)

```
If full_name = 'xyz abc pqr';
first_name = "xyz";
last_name = "abc pqr"; 
```

(2)

```
If `full_name = "abc"`:
Then first_name = "abc";
and last_name = ""; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-12-21T10:47:19.350

一位评论者说如果想要名字是“保罗”而姓氏是“史蒂夫·帕纳卡尔”怎么办？

```
var name = "Paul Steve Panakkal" // try "Paul", "Paul Steve"
var first_name = name.split(' ')[0]
var last_name = name.substring(first_name.length).trim()
console.log(first_name)
console.log(last_name)
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-06-14T13:43:21.667

最常见的解决方案，我们总是将第一个单词作为名字，其余的作为姓氏：

```
const splitName = (name = '') => {
  const [firstName, ...lastName] = name.split(' ').filter(Boolean);
  return {
    firstName: firstName,
    lastName: lastName.join(' ')
  }
}

console.log(splitName('Jon  Snow'));

console.log(splitName(' Jon '));

console.log(splitName(' Jon The    White Wolf '));
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-09-09T16:31:57.613

如果您假设最后一个单词是姓氏并且单个单词名称也是姓氏，那么...

```
var items = theName.split(' '),
    lastName = items[items.length-1],
    firstName = "";

for (var i = 0; i < items.length - 1; i++) {
   if (i > 0) {
      firstName += ' ';
   }
   firstName += items[i];
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-07-05T20:48:40.583

注意边缘情况，例如仅提供名字或输入两个或多个空格。如果您只想解析名字和姓氏，这将解决问题（全名应始终包含至少 1 个字符以避免将 first_name 设置为空字符串）：

```
var full_name_split = "Paul Steve Panakkal".split(" ");
var first_name = full_name_split[0];
var last_name = full_name_split.length > 1 ? full_name_split[full_name_split.length - 1] : null; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-12-22T16:22:24.513

使用此代码：

您需要更改该行：`splitFullName("firstName","lastName","fullName");`并确保它包含表单中正确的字段 ID。

* * *

```
function splitFullName(a,b,c){
    String.prototype.capitalize = function(){
        return this.replace( /(^|\s)([a-z])/g , function(m,p1,p2){ return p1+p2.toUpperCase(); } );
    };
    document.getElementById(c).oninput=function(){
        fullName = document.getElementById(c).value;
        if((fullName.match(/ /g) || []).length ===0 || fullName.substring(fullName.indexOf(" ")+1,fullName.length) === ""){
            first = fullName.capitalize();;
            last = "null";
        }else if(fullName.substring(0,fullName.indexOf(" ")).indexOf(".")>-1){
            first = fullName.substring(0,fullName.indexOf(" ")).capitalize() + " " + fullName.substring(fullName.indexOf(" ")+1,fullName.length).substring(0,fullName.substring(fullName.indexOf(" ")+1,fullName.length).indexOf(" ")).capitalize();
            last = fullName.substring(first.length +1,fullName.length).capitalize();
        }else{
            first = fullName.substring(0,fullName.indexOf(" ")).capitalize();
            last = fullName.substring(fullName.indexOf(" ")+1,fullName.length).capitalize();
        }
        document.getElementById(a).value = first;
        document.getElementById(b).value = last;
    };
    //Initial Values
    if(document.getElementById(c).value.length === 0){
        first = document.getElementById(a).value.capitalize();
        last = document.getElementById(b).value.capitalize();
        fullName =  first + " " + last ;
        console.log(fullName);
        document.getElementById(c).value = fullName;
    }
}

//Replace the ID's below with your form's field ID's
splitFullName("firstName","lastName","fullName"); 
```

* * *

来源：http: [//developers.marketo.com/blog/add-a-full-name-field-to-a-marketo-form/](http://developers.marketo.com/blog/add-a-full-name-field-to-a-marketo-form/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-05-25T16:25:26.317

您无需使用任何**拆分**方法并为该操作创建不必要的数组。只需使用javascript 的**lastIndexOf**和**substring**方法。

```
var s = "Paul Steve Panakkal";
var a = s.lastIndexOf(' '); // last occurence of space
var b = s.substring(0, a); // Paul Steve
var c = s.substring(a+1); // Panakkal 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-11-13T09:38:52.033

```
const fullName = 'Paul Steve Panakkal'.split(' ');
const lastName = fullName.pop(); // 'Panakkal'
const firstName = fullName.join(' '); // 'Paul Steve'
console.log(firstName);
console.log(lastName);
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-09-25T03:13:33.263

使用以下代码，它适用于我

```
let name = "Paul Steve Panakkal"
let parts = name.split(' ')
let firstName = parts.shift();  // Paul
let lastName = parts.join(' '); // Steve Panakkal

console.log({
firstName,
lastName
})
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-09-08T10:31:49.770

```
var firstName = fullName.split(" ")[0]; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-12-26T02:50:39.240

另一种选择可能是使用正则表达式。

```
\w+\s\w+(?=\s)|\w+ 
```

上面的正则表达式将找到匹配两个或三个命名类型组合的字符串模式`firstName`。`lastName`

```
const regex = /\w+\s\w+(?=\s)|\w+/g;

const name1 = 'Paul Steve Panakkal';
const [firstName1, lastName1] = name1.trim().match(regex);
console.log(`${firstName1} | ${lastName1}`);

const name2 = 'John Doe';
const [firstName2, lastName2] = name2.trim().match(regex);
console.log(`${firstName2} | ${lastName2}`);
```

**细节**

*   `\w+`匹配任何单词字符。
*   `?=\s`匹配任何空白字符但不捕捉它。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-11-16T19:37:43.383

有很多方法可以存档这个。

我认为最简单的方法是拆分并弹出姓氏。

```
let fullname = 'Paul Steve Panakkal'; // from php

let tmpArray = fullname.split(' '); //split the name to an array

const lastname = tmpArray.pop(); // pop the last element of the aray and store it in "lastname" variable
const firstname = tmpArray.join(' '); // join the array to make first and middlename and store it in "firstname" variale

console.log("firstname:", firstname)
console.log("lastname:", lastname)
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-09-09T16:30:41.873

`split`使用带有空格的JS作为分隔符。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-06-12T15:41:24.393

如果您的意思是姓氏是名字之后的所有名字，只需使用：

```
var name = "Paul Steve Panakkal";
var arrName = name.split(" ");
var firstName = arrName.slice(0, 1).join(' ');
var lastName = arrName.slice(1, arrName.length).join(' '); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-04-04T12:40:35.963

这样，firstName 和 lastName 总是正确的

```
var names = fullName.split(' ');
if (!names || names.length <= 1) {
   firstName = this.name;
   lastName = '';
} else {
   firstName = names.slice(0, -1).join(' ');
   lastName = names.slice(-1).join(' ');
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-10-28T16:40:50.573

```
var fullName = "Paul Steve Panakkal"; 
```

您可以使用 split 函数拆分全名，然后拆分结果，例如在数组或列表中显示元素。

这就是您使用 split 功能时发生的情况。

```
fullName.split(" ")

["Paul", "Steve", "Panakkal"] 
```

这不会保存到任何变量中。您可以执行拆分功能并将元素分配给这样定义明确的变量。

```
var firstName = fullName.split(" ")[0];

var lastName = fullName.split(" ")[1];

var otherName = fullName.split(" ")[2]; 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-07-27T20:08:23.263

我想出了这个逻辑：

```
const fullName = "Paul Steve Panakkal";
const idx = fullName.lastIndexOf(' ');
const firstName = idx !== -1 ? fullName.substring(0, idx) : fullName;
const lastName = idx !== -1 ? fullName.substring(idx + 1) : '';
console.log('firstName:', firstName, 'lastName:', lastName); 
```

输出：

```
firstName: Paul Steve lastName: Panakkal 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-10-14T01:08:31.787

```
"  Paul Steve   ".trim().split(/(\s).+\s/).join("")  // 'Paul Steve' 
```

您应该添加**trim()**以防用户不小心输入了额外的空格！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-06-13T08:00:28.663

如果您希望姓氏是名字之后的所有名字：

```
function splitFirstLast(name) {
  return {
    firstName: name.indexOf(' ') !== -1 && name.substring(0, name.indexOf(' ')) || name,
    lastName: name.indexOf(' ') !== -1 && name.substring(name.indexOf(' ') + 1) || ''
  }
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-11-16T19:07:17.307

对象可以通过一个简单的函数来解决问题：

```
 const fullName = "Edgar Allan Poe"

    const formatter = (name) => {

        const splitedName = name.trim().split(' ')

        if(splitedName.length === 0) return ""

        //here happens the hack!, it prevents duplicate names
        //JS objects overrides duplicate keys, very useful here 
        const output = {
            [splitedName[0]]: splitedName[0],
            //storing first key

            [splitedName[splitedName.length - 1]]: splitedName[splitedName.length - 1] 
            //storing last key (whose may be first key)
        }

        return Object.keys(output).join(' ').trim()
        //now convert object keys into a string. "E pronto rs"

    }

    console.log(formatter(fullName)) // "Edgar Poe"
    console.log(formatter("Elias")) // "Elias"
    console.log(formatter("")) // ""
```

# c++ - 随机访问文件无法正常工作

> ID：12340793
> 
> 赞同：4
> 
> 时间：2012-09-09T16:30:13.143
> 
> 标签：c++, file-io

我正在尝试编写将员工数据库保存在随机访问文件中的程序，它必须具有添加员工和删除员工的功能（通过在记录中写入所有空格）。这是我到目前为止所拥有的，但它并不完全正确。读取员工时，读取的是正确记录的工资，但读取的是下一条记录的名称。此外，当我删除最后一条记录并在该记录中添加员工时，我无法查看员工信息，出现异常错误。

我不是在这里寻找解决方案，只是朝着正确的方向轻推。谢谢。

```
#include "stdafx.h"
#include <iostream>
#include <iomanip>
#include <fstream>
#include <sstream>
#include "ccc_empl.h"

using namespace std;

const int NEWLINE_LENGTH = 2; 
const int RECORD_SIZE = 30 + 10 + NEWLINE_LENGTH;

/** 
   converts a string to a floating-point value   
   @param s a string representing a floating-point value
   @return the equivalent floating-point value
*/   
double string_to_double(string s)
{  
   istringstream instr(s);
   double x;
   instr >> x;
   return x;
}

/*
   reads an employee record from the input file
   @param e  the employee
   @param in the file to read from
*/
Employee read_employee(istream& in)
{   
string line;
getline(in, line);  
string input_name = line.substr(0, 30);
double input_salary = string_to_double(line.substr(30, 10));
Employee e(input_name, input_salary);
return e;
}

/*
gets input for an Employee object
@param input_name the name of the employee
@param input_salary the salary of the employee
@param e the Employee object
@return returns the Employee object
*/
Employee input_employee()
{
string input_name;
cout << "Name: ";
cin.ignore();
getline(cin, input_name);
cout << "Salary: ";
double input_salary;
cin >> input_salary;
Employee e(input_name, input_salary);
return e;
}

/**
   adds an employee record to a file
   @param e the employee record to write
   @param out the file to write to
*/
void add_employee(Employee e, ostream& out)
{
out << e.get_name()
  << setw(30)
  << fixed << setprecision(2)
  << e.get_salary();
}

/**
   removes an employee record from a file
   @param e the employee record to remove
   @param out the file to remove from
*/
void remove_employee(ostream& out)
{
out << " " << setw(42) << fixed << setprecision(2) << " \n";
}

int main()
{  
   cout << "Please enter the data file name: ";
   string filename;
   cin >> filename;
   fstream fs;
   fs.open(filename);

   fs.seekg(0, ios::end); // Go to end of file
   int nrecord = fs.tellg() / RECORD_SIZE; // determine number of records in the file
   int menu_input = 0;
   string input_name;
   double input_salary = 0;

   while (menu_input != 4)
   {
   cout << "Please enter the record to update: (0 - " << nrecord - 1 << ") exit to quit ";
   int pos = 0;
   cin >> pos;
   if(cin.fail())
   {
       cout << "Exiting..." << endl;
       system("pause");
       return 0;
   }

   // menu for user input
   cout << "\nWhat action would you like to perform?" << endl;
   cout << "Add employee.....1" << endl;
   cout << "Remove employee..2" << endl;
   cout << "View employee....3" << endl;       
   cin >> menu_input;

   switch(menu_input)
   {
   case 1:  fs.seekg(pos * RECORD_SIZE, ios::beg);
       add_employee(input_employee(), fs);
       break;           
   case 2:  fs.seekg(pos * RECORD_SIZE, ios::beg);
       remove_employee(fs);
       break;
   case 3:  fs.seekg(pos * RECORD_SIZE, ios::beg);
       cout << "\nName: " << read_employee(fs).get_name() << "Salary: " << read_employee(fs).get_salary() << endl << endl;
       break;
   default: cout << "Invalid entry" << endl;
       break;
   }
   }

   fs.close();
   system("pause");
   return 0;
} 
```

好的，这是新的和改进的（嗯，我想是的）代码。我唯一的问题是添加员工时，我可以让程序将其添加到第一个打开的记录中就好了，但是如果没有打开的记录，我似乎无法将它添加到末尾文件而不会弄乱添加到第一个空记录。我的意思是，如果有空记录，它会将员工添加到记录中，但如果没有空记录，它不会将员工添加到文件末尾。如果我添加要添加到文件末尾的代码，则会发生以下两种情况之一，或者它添加到空记录，然后要求另一个员工并将其添加到末尾，或者它只是跳过空记录并添加到文件的结尾。

不知道我在这里做错了什么，但任何提示将不胜感激。

```
#include "stdafx.h"
#include <iostream>
#include <iomanip>
#include <fstream>
#include <sstream>
#include "ccc_empl.h"

using namespace std;

const int NEWLINE_LENGTH = 2; 
const int RECORD_SIZE = 30 + 10 + NEWLINE_LENGTH;

/** 
converts a string to a floating-point value   
@param s a string representing a floating-point value
@return the equivalent floating-point value
*/   
double string_to_double(string s)
{  
   istringstream instr(s);
   double x;
   instr >> x;
   return x;
}

/*
reads an employee record from the input file
@param e  the employee
@param in the file to read from
*/
Employee read_employee(istream& in)
{   
string line;
getline(in, line);  
string input_name = line.substr(0, 30);
double input_salary = string_to_double(line.substr(30, 10));
Employee e(input_name, input_salary);
return e;
}

/*
gets input for an Employee object
@param input_name the name of the employee
@param input_salary the salary of the employee
@param e the Employee object
@return returns the Employee object
*/
Employee input_employee()
{
string input_name;
cout << "Name: ";
cin.ignore();
getline(cin, input_name);
cout << "Salary: ";
double input_salary;
cin >> input_salary;
Employee e(input_name, input_salary);
return e;
}

/**
adds an employee record to a file
@param e the employee record to write
@param out the file to write to
*/

void add_employee(Employee e, ostream& out)
{
out << e.get_name()
  << setw(10 + 30 - e.get_name().length())
  << fixed << setprecision(2)
  << e.get_salary() << "\n";
}

/**
removes an employee record from a file
@param e the employee record to remove
@param out the file to remove from
*/

void remove_employee(ostream& out)
{
out << " " << setw(40) << fixed << setprecision(2) << " \n";
}

int main()
{  
   cout << "Please enter the data file name: ";
   string filename;
   cin >> filename;
   fstream fs;
   fs.open(filename);

   fs.seekg(0, ios::end); // Go to end of file
   int nrecord = fs.tellg() / RECORD_SIZE; // determine number of records in the file
   int menu_input = 1;
   string input_name;
   double input_salary = 0;

   while (menu_input)
   {       
   // menu for user input
   cout << "\nWhat action would you like to perform?" << endl;
   cout << "Add employee.....1" << endl;
   cout << "Remove employee..2" << endl;
   cout << "View employee....3" << endl;
   cout << "Exit.............4" << endl;
   cin >> menu_input;
   if (menu_input == 4)
   {
       cout << "\nExiting..." << endl << endl;
       system("pause");
       return 0;
   }
   // switch statment to perform selected menu_input task
   switch(menu_input)
   {
   case 1:  // adds an employee in the first empty record
            // or at the end of the file if no records are empty          
            {
                int count = 0;
                string s;
                for (int i = 0; i < nrecord; i++)
                {
                    fs.seekp(count, ios::beg);
                    getline(fs, s);
                    if (isspace(s[0]))
                    {
                        fs.seekp(count, ios::beg);
                        add_employee(input_employee(), fs);
                        nrecord++;
                        break;
                    }else
                        count += 42;
                }
            }           
       break;           
   case 2:  {
            cout << "Please enter the record to remove: (0 - " << nrecord -1 << ") ";
            int pos = 0;
            cin >> pos;
            fs.seekp(pos * RECORD_SIZE, ios::beg);
            remove_employee(fs);
            }
       break;
   case 3: {
            cout << "Please enter the record to view: (0 - " << nrecord -1 << ") ";
            int pos = 0;
            cin >> pos;
            fs.seekg(pos * RECORD_SIZE, ios::beg);
            Employee e(read_employee(fs));        
            cout << "\nName: " << e.get_name() << "Salary: " << e.get_salary() << endl << endl;
           }
       break;     
   default: cout << "Invalid entry" << endl;
       break;
   }
}

fs.close();
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:38:26.953

你打`read_employee(fs)`了两次电话。第一个读取你想要的记录，第二个读取下一个（标准没有指定它们中的哪一个是'第一个'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:40:48.073

似乎您从未在 add_employee 中添加行终止符，并且 read_employee 被调用了两次。只需缓存函数的结果。

我知道这只是家庭作业，但我认为你可以改进这个程序。

1.  需要数据库在运行时保留为文件吗？您可以将整个文件读入一个 Employee 数组并在最后重写它。它不会限制员工姓名的长度。

2.  这个程序不是跨平台的。您不应依赖文件大小来确定数据库中的条目数，因为行终止符因操作系统而异。相反，请阅读所有内容并计算条目。

3.  只有 Windows 有“暂停”程序。要达到相同的效果，只需在程序末尾读取 stdin 和并忽略输入。

# c++ - Qt C++ 项目的简单安装程序，仅针对 Windows

> ID：12340795
> 
> 赞同：5
> 
> 时间：2012-09-09T16:30:22.777
> 
> 标签：c++, qt, installation, qt-creator

对于一个小型 C++/Qt 项目，我想创建一个安装程序。

1.  用 Qt Creator 编写的代码
2.  基本上（当添加了一些 Qt dll 时），一个简单的 xcopy 安装是可能的
3.  我可以打包（zip/rar）文件，但我想“有一点安装程序的感觉”
4.  没有注册表项等。
5.  代码仅适用于 Win Desktop，因此没有跨平台要求

基本上安装人员应

1.  询问目标目录
2.  要求接受许可
3.  ..并安装

从我（作为程序员）的角度来看，安装程序应该**易于设置和学习**。如果我可以从 Qt Creator 中创建它，我会很理想。由于它是用于非商业开源项目，安装软件**必须是免费**的（或至少价格非常合理）。

你会推荐什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:47:25.890

对于您所需要的[Advanced Installer 免费版](http://www.advancedinstaller.com)就足够了。它不需要任何脚本，只需拖放您的文件，然后指定您需要的默认安装文件夹和对话框。免费版仅适用于[“简单”项目](http://www.advancedinstaller.com/user-guide/tutorial-simple.html)，对您来说绰绰有余。它还包括一个[命令行界面](http://www.advancedinstaller.com/user-guide/command-line.html)，如果您需要一个来自动化您的构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:35:27.517

我很久以前就用过这个 [http://www.clickteam.com/website/world/install-creator](http://www.clickteam.com/website/world/install-creator)

但是现在我使用 install shield 但它有很多你似乎不需要它们的功能，它的许可证大约是 2000 美元

# asp.net-mvc - 长字符串与短 url 友好字符串的转换

> ID：12340800
> 
> 赞同：1
> 
> 时间：2012-09-09T16:31:02.223
> 
> 标签：asp.net-mvc, url, web, compression

这是我的情况：

我有一个 MVC 网站，其中包含指向我的数据存储中存在的各种“事物”的链接。像许多网站一样，我希望为这些内容提供简短的描述性 url，例如`www.mysite.com/12/description-of-thing`url 中的“12”代表数据存储中数据的密钥。

我目前正在使用与 RDBMS 相对的 noSQL 解决方案，因此我使用这些长的、人为的、固定长度的键来充当数据的聚集索引，而不是数据的短整数键。在我的项目中这样的事情的 url 可能看起来像这样：`www.mysite.com/000_sub_2520552274112731878_497d19e/description-of-thing`. 显然，这不是一个漂亮的短网址。

我正在寻找的是从“000_sub_2520552274112731878_497d19e”之类的东西到一些更短、对 url 友好的字符串进行某种双向转换。

这样的事情可能吗？是否已经存在任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:56:55.773

您可以将信息压缩成较短的字符串而无需查表，尤其是如果您知道“000_sub_2520552274112731878_497d19e”的结构是一致的。我不知道您对“更短”的标准是什么。

例如，如果您知道它将是 ddd `_sub_`dddddddddddddddddd `_`hhhhhhh 其中 d 是十进制数字，h 是十六进制数字，那么您可以将第一个 ddd 编码为 10 位，第二组 d 编码为 64 位，最后一组h 为 28 位。你不编码`_sub_`or `_`，因为你知道它们总是在那里。您总共有 102 位，您现在可以在 base 64 中编码 17 个字符（小于原始长度的一半），或者在 base 85 中编码 16 个字符。我没有检查，但应该有一组 85 URL 安全人物。

如果您不知道该密钥的结构，那么压缩量会更少，但您仍然可以获得一些。

# unix - Unix 命令 tr -c 用法

> ID：12340801
> 
> 赞同：3
> 
> 时间：2012-09-09T16:31:09.027
> 
> 标签：unix, tr

我无法理解 tr （Unix 命令）中的 -c 选项。

查看这种格式`tr`：`tr [Options] set1 [set2]`

我知道这`-c`是一个可用的[选项]，`tr`这意味着“它需要 set1 的补码（也就是 set1 中没有的所有字符）。但是，有人可以举例说明如何使用此命令并解释其好处。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:33:12.297

这意味着补充字符范围。当您对字符串进行补充时，`A-Z`您会得到*任何不在 A ... Z 中的字符*。

有时用补语指定任务要容易得多。假设您要计算 C 源文件中分号的数量。您删除所有非分号并计算剩下的内容：

```
tr -d -c \; < file.c | wc -c 
```

# java - 列表和列表有什么区别 and List Before are all you burn me alive, I must say that I have googling this question many times and I still can't understand the difference between List and List All books I' 问问题 问问题 2012-09-09T16:32:28.460 19131 次 This question shows research effort; it is useful and clear 36 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Before are all you burn me alive, I must say that I have googling this question many times and I still can't understand the difference between List and List All books I've read say that in Java every class is implicitly a subclass of Object. However I saw here the follwing code: public static void printList(List list) { for (Object elem : list) System.out.println(elem + " "); System.out.println(); } This code is wrong (intentionally for educational purposes) and according to the author the reason is: [...] prints only a list of Object instances; it cannot print List<integer>, List<string>, List<double>, and so on, because they are not subtypes of List The solution is: public static void printList(List list) { for (Object elem: list) System.out.print(elem + " "); System.out.println(); } As you can see, the only difference is the first line: public static void printList(List list) { public static void printList(List list) { This is the reason of my question: What's the difference between List and List ? After all is Object superclass of everything or not? If someone can help me with a simple explanation (I'm new with Java) I'll appreciate. Thank you in advance. One of the major differences is how you can modify the lists. The following works well List l1; l1.add(new Object()); // OK while the second case produces a compilation error. List l2; l2.add(new Object()); // Compile error The reasons for that I think has been debated a few times on the site already. In short, means a (as in one) specific yet unknown type. Since that type is not known compile-time, you're not allowed to modify the list. java 4 7 回答 7 This answer is useful 25 Explanation: ? is a "wildcard". You can use it in different ways: unbounded wildcard: ? wildcard with upper bound: ? extends Object (or another class) wildcard with lower bound ? super Object (or another class) Examples: List list; you can assign to list any List with any type parameter. List list; you can assign to list any List with a type parameter Number (or Integer, Float, ecc) List list; you can assign to list any List with a type parameter Integer, or a type in the type gerarchy of Integer(Number,Comparable, Serializable, Object ...) Summary: So the declaration List list; is similar to List list; because you can assign to "list" only a List of Objects; then you can use the list in this way: list = new ArrayList(); list.add(new String("")); list.add(new Integer(3)); 于 2012-09-09T17:28:55.150 回答 This answer is useful 9 主要区别之一是如何修改列表。以下效果很好 List l1; l1.add(new Object()); // OK 而第二种情况会产生编译错误。 List l2; l2.add(new Object()); // Compile error 我认为其原因已经在网站上讨论过几次了。简而言之，意味着（如one）特定但未知的类型。由于该类型在编译时是未知的，因此您不能修改列表。 于 2012-09-09T16:40:37.173 回答 This answer is useful 8 That String is a subtype of Object does not mean that List <string>is a subtype of List. If it were, the following code would compile: List <string>strings = new ArrayList<string>(); List objects = strings; objects.add((Integer) 1); strings.get(0).charAt(0); // but the Integer 1 does not have a charAt method ... Therefore, List <string>is not a subtype of List. Both List <string>and List are subtypes of List. But because List is the more general type, you can't know what type the add method takes: List <string>strings = new ArrayList<string>(); List objects = strings; objects.add((Integer) 1); // does not compile 于 2012-09-09T16:46:20.497 回答 This answer is useful 2 You can basically use both version in similar ways. However, there is one big difference. Let's declare the following: List list1 = new ArrayList(); List list2 = new ArrayList<string>(); Now, let's try the code below: list1.add("");// this works fine list2.add("");// this one issues a compile error Someone could ask why this. This is because in List, the code tells you that you have Object or subtypes there, but in List you could have the same thing but you don't know exactly what. Someone could add String or Double and then try to read and cast to Integer. But again, it is not possible. There may be other differences that I don't remember about now. 于 2012-09-09T16:43:26.767 回答 This answer is useful 2 Object is the superclass of String but List is not the superclass of List<string>. If it were, this would be a problem: List <string>strings = ... addObject(strings); ... void addObjects(List objects) { objects.add(new Object()); } Now strings contains an element that isn't a String. 于 2012-09-09T16:51:03.977 回答 This answer is useful 2 This code is wrong (intentionally for educational purposes) and according to the author the reason is: [...] prints only a list of Object instances; it cannot print List, List, List, and so on, because they are not subtypes of List This is because parameterized types are invariant, for instance for the classes X and Y, List <x>is neither a subtype nor a supertype of List<y>. The difference resides in that the unbounded wildcard type ? means that the type is unknown and you can´t assume anything about it. A List is type safe, you can´t put any element other than null in it and you can´t assume anything about the type of the object it contains. List obviously means that the List can contain objects of any type. 于 2012-09-09T17:50:31.450 回答 This answer is useful 0 public static void main(String args[]){ List list=new ArrayList<>(); list.add("A");//works List list1=new ArrayList<>(); list1.add("B");//works List list2=new ArrayList<>(); list2.add("11");//compile time error; List list4=new ArrayList<>(); list4.add("123");//compile Time error } List< ? extend Object> & List< ? > doesn't allow to add anything follow this to know the reason. But on the other hand List< ? super Object> allows to add values to List because the problem in the link provided doesn't exists . 于 2017-08-01T17:10:39.933 回答 Related 1 joomla - Joomla 网站无法正常工作 1 jquery - HTML/CSS 元素不能被强制为背景 3 python - 多进程和子进程有什么区别？ 1 php - 创建名称服务器十六进制标头 3 java - JAXB 和 XSLT 性能 3 codeigniter - 路由代码点火器 1 mysql - 如何将表单上的 YES 或 NO 值保存到 MySQL 数据库 1 assembly - 段寄存器在运行时会改变吗？ 2 objective-c - 如何加快 UITextView 的更新速度？ 1 android - 打开画廊形式android应用程序的特定相册 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12340808
> 
> 赞同：36
> 
> 时间：
> 
> 标签：java

Before are all you burn me alive, I must say that I have googling this question many times and I still can't understand the difference between List<Object> and List<?>

All books I've read say that *in Java every class is implicitly a subclass of Object*.

However I saw [here](http://docs.oracle.com/javase/tutorial/java/generics/unboundedWildcards.html) the follwing code:

```
public static void printList(List<Object> list) {
    for (Object elem : list)
        System.out.println(elem + " ");
    System.out.println();
} 
```

This code is wrong (intentionally for educational purposes) and according to the author the reason is:

*[...] prints only a list of Object instances; it cannot print **List<Integer>, List<String>, List<Double>**, and so on, because **they are not subtypes of List<Object>***

The solution is:

```
public static void printList(List<?> list) {
    for (Object elem: list)
        System.out.print(elem + " ");
    System.out.println();
} 
```

As you can see, the only difference is the first line:

```
public static void printList(List<Object> list) {
public static void printList(List<?> list) { 
```

This is the reason of my question: What's the difference between List<Object> and List<?> ?

After all is *Object* superclass of everything or not?

If someone can help me with a simple explanation (I'm new with Java) I'll appreciate.

Thank you in advance.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-09T17:28:55.150

## Explanation:

? is a "wildcard". You can use it in different ways:

unbounded wildcard:

```
? 
```

wildcard with upper bound:

```
? extends Object (or another class) 
```

wildcard with lower bound

```
? super Object (or another class) 
```

## Examples:

```
List <?> list; 
```

you can assign to `list` any List with any type parameter.

```
List<? extends Number> list; 
```

you can assign to list any List with a type parameter Number (or Integer, Float, ecc)

```
List<? super Integer> list; 
```

you can assign to list any List with a type parameter Integer, or a type in the type gerarchy of Integer(Number,Comparable, Serializable, Object ...)

## Summary:

So the declaration

```
List<Object> list; 
```

is similar to

```
List<? super Object> list; 
```

because you can assign to "list" only a List of Objects; then you can use the list in this way:

```
 list = new ArrayList<Object>();
    list.add(new String(""));
    list.add(new Integer(3)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-09T16:40:37.173

主要区别之一是如何修改列表。以下效果很好

```
List<Object> l1;
l1.add(new Object()); // OK 
```

而第二种情况会产生编译错误。

```
List<?> l2;
l2.add(new Object()); // Compile error 
```

我认为其原因已经在网站上讨论过几次了。简而言之，`<?>`意味着（如*one*）**特定**但*未知***的**类型。由于该类型在编译时是未知的，因此您不能修改列表。

 ***** * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-09T16:46:20.497

That `String` is a subtype of `Object` does not mean that `List<String>` is a subtype of `List<Object>`. If it were, the following code would compile:

```
List<String> strings = new ArrayList<String>();
List<Object> objects = strings;
objects.add((Integer) 1);
strings.get(0).charAt(0); // but the Integer 1 does not have a charAt method ... 
```

Therefore, `List<String>` is not a subtype of `List<Object>`.

Both `List<String>` and `List<Object>` are subtypes of `List<?>`. But because `List<?>` is the more general type, you can't know what type the add method takes:

```
List<String> strings = new ArrayList<String>();
List<?> objects = strings;
objects.add((Integer) 1); // does not compile 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T16:43:26.767

You can basically use both version in similar ways. However, there is one big difference. Let's declare the following:

```
List<Object> list1 = new ArrayList<Object>();
List<?> list2 = new ArrayList<String>(); 
```

Now, let's try the code below:

```
list1.add("");// this works fine
list2.add("");// this one issues a compile error 
```

Someone could ask why this. This is because in `List<Object>`, the code tells you that you have `Object` or subtypes there, but in `List<?>` you could have the same thing but you don't know exactly what. Someone could add `String` or `Double` and then try to read and cast to `Integer`. But again, it is not possible.

There may be other differences that I don't remember about now.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T16:51:03.977

Object is the superclass of String but List<Object> is not the superclass of List<String>. If it were, this would be a problem:

```
List<String> strings = ...
addObject(strings);
...
void addObjects(List<Object> objects) {
    objects.add(new Object());
} 
```

Now strings contains an element that isn't a String.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-09T17:50:31.450

> This code is wrong (intentionally for educational purposes) and according to the author the reason is:
> 
> [...] prints only a list of Object instances; it cannot print List, List, List, and so on, because they are not subtypes of List

This is because parameterized types are **invariant**, for instance for the classes X and Y, `List<X>` is neither a subtype nor a supertype of `List<Y>`.

The difference resides in that the **unbounded wildcard type** `?` means that the type is unknown and you can´t assume anything about it. A `List<?>` is type safe, you can´t put any element other than `null` in it and you can´t assume anything about the type of the object it contains.

`List<Object>` obviously means that the List can contain objects of any type.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-01T17:10:39.933

```
 public static void main(String args[]){

   List<? super Object> list=new ArrayList<>();
   list.add("A");//works

   List<Object> list1=new ArrayList<>();
   list1.add("B");//works

   List<?> list2=new ArrayList<>();
   list2.add("11");//compile time error;

   List<? extends Object> list4=new ArrayList<>();
   list4.add("123");//compile Time error
} 
```

List< ? extend Object> & List< ? > doesn't allow to add anything follow [this](https://stackoverflow.com/questions/13993745/add-strings-through-use-of-generic-extends-causes-compiler-error/13993770#13993770) to know the reason. But on the other hand List< ? super Object> allows to add values to List because the problem in the link provided doesn't exists .****</y></x></string></string></string></string></string></string></string></string></string></string></double></string></integer>

# c++ - 使用成员函数作为自定义删除器与 std::shared_ptr 的问题

> ID：12340810
> 
> 赞同：46
> 
> 时间：2012-09-09T16:32:39.733
> 
> 标签：c++, sdl, shared-ptr

我正在尝试研究如何将 std::shared_ptr 与自定义删除器一起使用。具体来说，我将它与 SDL_Surface 一起使用：

```
std::shared_ptr<SDL_Surface>(SDL_LoadBMP(....),SDL_FreeSurface); 
```

编译并运行良好。但是，我想尝试自己的删除器，但不知道该怎么做。SDL_FreeSurface 的文档可在此处找到：

[http://sdl.beuc.net/sdl.wiki/SDL_FreeSurface](http://sdl.beuc.net/sdl.wiki/SDL_FreeSurface)

我在其中发现 SDL_FreeSurface 声明为：

```
void SDL_FreeSurface(SDL_Surface* surface); 
```

作为测试，并根据该信息，我尝试了以下功能：

```
void DeleteSurface(SDL_Surface* surface)
{
    std::cout << "Deleting surface\n";
    SDL_FreeSurface(surface);
} 
```

但是，使用 g++ 编译会出现以下错误：

```
error: no matching function for call to 'std::shared_ptr<SDL_Surface>::shared_ptr(SDL_Surface*, <unresolved overloaded function type>)' 
```

我已经查看了 gcc std::shared_ptr 实现的 gnu 文档，但无法理解它。我究竟做错了什么？

编辑：我已经缩小了问题的范围，但会留下上面的原始问题。我所拥有的是一个 Game 类，如果我将其剥离为基本实现，则类似于：

```
class Game {
    public:
        /* various functions */
    private:
        void DeleteSurface(SDL_Surface* surface);
        bool CacheImages();
        std::vector<std::shared_ptr<SDL_Surface> > mCachedImages;

        /* various member variables and other functions */
} 
```

执行`DeleteSurface`如上，执行`CacheImages()`如下：

```
bool CacheImages()
{
    mCachedImages.push_back(std::shared_ptr<SDL_Surface>(SDL_LoadBMP(...),DeleteSurface);
    return true;
} 
```

哪个游戏我上面列出的错误。但是，如果我将`DeleteSurface()`函数移到`Game`类之外而不进行其他更改，则代码会编译。在导致问题的类中包含`DeleteSurface`函数是什么意思？`Game`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-09T16:35:14.447

```
std::shared_ptr<SDL_Surface>(SDL_LoadBMP(....), [=](SDL_Surface* surface)
{
    std::cout << "Deleting surface\n";
    SDL_FreeSurface(surface);
}); 
```

或者

```
void DeleteSurface(SDL_Surface* surface)
{
    std::cout << "Deleting surface\n";
    SDL_FreeSurface(surface);
}

std::shared_ptr<SDL_Surface>(SDL_LoadBMP(....), DeleteSurface); 
```

编辑：

看到你更新的问题，`DeleteSurface`应该是非成员函数，否则需要使用`std::bind`or`std::mem_fn`或者其他一些成员函数指针适配器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-17T14:17:48.110

此代码提供了一个使用删除器作为对象方法的共享指针构造示例。它显示使用`std::bind`说明。

该示例是一个简单的对象回收器。当对该对象的最后一个引用被销毁时，该对象将返回到回收器内部的空闲对象池中。

`get()`通过向和方法添加键`add()`并将对象存储在`std::map`.

```
class ObjRecycler
{
private:
    std::vector<Obj*> freeObjPool;
public:
    ~ObjRecycler()
    {
        for (auto o: freeObjPool)
            delete o;
    }

    void add(Obj *o)
    {
        if (o)
            freeObjPool.push_back(o);
    }

    std::shared_ptr<Obj> get()
    {
        Obj* o;
        if (freeObjPool.empty())
            o = new Obj();
        else
        {
            o = freeObjPool.back();
            freeObjPool.pop_back();
        }
        return std::shared_ptr<Obj>(o, 
             std::bind(&ObjRecycler::add, this, std::placeholders::_1));
    }
} 
```

# bash - bash 脚本中的 'exec cmd &' 和 'cmd &' 有什么区别？

> ID：12340812
> 
> 赞同：0
> 
> 时间：2012-09-09T16:32:48.860
> 
> 标签：bash

以下 fork 语句有什么区别？

1.  `command &`
2.  `exec command &`

您可以使用`wait $!`这两个语句。在我的测试中，我发现行为没有区别 - 但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:36:17.103

`&`覆盖，因为`exec`您不能*同时*用新进程替换现有进程*并*在后台运行新进程。

# javascript - Javascript将参数传递给鼠标悬停功能？

> ID：12340822
> 
> 赞同：0
> 
> 时间：2012-09-09T16:33:39.520
> 
> 标签：javascript, html, function

我正在尝试为对象列表设置不同的侦听器：

```
for(i=0;i<numInputs;i++) {
    var inPort = inputPorts.get(i);
    var portName = inPort.getProperty("name");
    inPort.shape.attr({ cursor: 'pointer' }).mouseover(function(e) { mouseOverInfo.text("PORT:: "+portName); }); 
} 
```

现在发生的情况是，每个端口对象都只是将最后一个元素的名称作为自己的名称。因此，当我将鼠标悬停时，我只返回最后一个对象的名称。

如何正确执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:42:03.210

使用这样的自调用函数来避免循环中的闭包问题：

```
for(i=0;i<numInputs;i++) {
  (function(i){
    var inPort = inputPorts.get(i);
    var portName = inPort.getProperty("name");
    inPort.shape.attr({ cursor: 'pointer' }).mouseover(function(e) { mouseOverInfo.text("PORT:: "+portName); }); 
  })(i)
} 
```

# c++ - 如何比较两段代码的性能

> ID：12340824
> 
> 赞同：12
> 
> 时间：2012-09-09T16:33:57.413
> 
> 标签：c++, optimization, flops

我与编程领域的几个人进行了一场友好的竞争，最近我们对编写高效的代码非常感兴趣。我们的挑战是不惜一切代价（可读性、可重用性等）尝试优化代码（在 CPU 时间和复杂性方面）。

问题是，现在我们需要比较我们的代码，看看哪种方法比其他方法更好，但我们不知道任何用于此目的的工具。

> 我的问题是，是否有一些（任何！）工具将一段代码作为输入并计算运行它所需的触发器或 cpu 指令的数量？有什么工具可以衡量代码的优化吗？

PS 目标语言是 c++，但很高兴知道这些工具是否也适用于 java。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T16:40:14.897

这是一个小的 C++11 秒表，我喜欢在需要计时时推出：

```
#include <chrono>
#include <ctime>

template <typename T> class basic_stopwatch
{
    typedef T clock;
    typename clock::time_point p;
    typename clock::duration   d;

public:
    void tick()  { p  = clock::now();            }
    void tock()  { d += clock::now() - p;        }
    void reset() { d  = clock::duration::zero(); }

    template <typename S> unsigned long long int report() const
    {
        return std::chrono::duration_cast<S>(d).count();
    }

    unsigned long long int report_ms() const
    {
        return report<std::chrono::milliseconds>();
    }

    basic_stopwatch() : p(), d() { }
};

struct c_clock
{
    typedef std::clock_t time_point;
    typedef std::clock_t duration;
    static time_point now() { return std::clock(); }
};

template <> unsigned long long int basic_stopwatch<c_clock>::report_ms() const
{
  return 1000\. * double(d) / double(CLOCKS_PER_SEC);
}

typedef basic_stopwatch<std::chrono::high_resolution_clock> stopwatch;
typedef basic_stopwatch<c_clock> cstopwatch; 
```

用法：

```
stopwatch sw;
sw.tick();

run_long_code();

sw.tock();
std::cout << "This took " << sw.report_ms() << "ms.\n"; 
```

在任何体面的实现中，默认值`high_resolution_clock`都应该提供非常准确的时间信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T16:40:23.687

有一个`std::clock()`函数`<ctime>`返回当前进程花费了多少 CPU 时间（这意味着它不计算程序空闲的时间，因为 CPU 正在执行其他任务）。该功能可用于准确测量算法的执行时间。使用常量`std::CLOCKS_PER_SEC`（也来自`<ctime>`）将返回值转换为秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T18:45:13.083

从内联汇编中，您可以使用 rdtsc 指令将 32 位（最低有效部分）计数器放入 eax 并将 32 位（最高有效部分）放入 edx。如果您的代码太小，您可以仅使用 eax 寄存器检查总的适当 cpu 周期。如果计数大于最大值。对于 32 位值，edx 每个最大 32 位值循环递增。

```
int cpu_clk1a=0;
int cpu_clk1b=0;
int cpu_clk2a=0;
int cpu_clk2b=0;
int max=0;
std::cin>>max; //loop limit

__asm
{
    push eax
    push edx
    rdtsc    //gets current cpu-clock-counter into eax&edx
    mov [cpu_clk1a],eax
    mov [cpu_clk1b],edx
    pop edx
    pop eax

}

long temp=0;
for(int i=0;i<max;i++)
{

    temp+=clock();//needed to defy optimization to  actually measure something
                          //even the smartest compiler cannot know what 
                          //the clock would be
}

__asm
{
    push eax
    push edx
    rdtsc     //gets current cpu-clock-counter into aex&edx
    mov [cpu_clk2a],eax
    mov [cpu_clk2b],edx
    pop edx
    pop eax

}
std::cout<<(cpu_clk2a-cpu_clk1a)<<std::endl;
   //if your loop takes more than ~2billions of cpu-clocks, use cpu_clk1b and 2b
getchar();
getchar(); 
```

输出：在我的机器上，1000 次迭代的 74000 个 cpu 周期和 10000 次迭代的 800000 个 cpu 周期。因为clock() 很耗时。

我机器上的 CPU 周期分辨率：~1000 个周期。是的，您需要数千个加法/减法（快速指令）才能相对正确地测量它。

假设 cpu 工作频率恒定，对于 1GHz cpu，1000 个 cpu 周期几乎等于 1 微秒。在执行此操作之前，您应该预热您的 CPU。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:39:39.570

从一段代码中计算出详细的 cpu 时间是相当困难的。执行此操作的正常方法是将较差/平均/最佳输入数据设计为测试用例。并使用这些测试用例根据您的真实代码进行时序分析。如果没有详细的输入测试数据和条件，没有任何工具可以告诉您失败的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T16:41:15.323

有一些称为[分析器](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)的软件可以完全满足您的需求。

Windows 的一个例子是[AMD 代码分析器](http://developer.amd.com/tools/hc/CodeAnalyst/archive/Pages/default.aspx)和POSIX 的[gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T17:23:02.083

最适合您的目的是[valgrind/callgrind](http://valgrind.org/docs/manual/cl-manual.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-09T18:31:19.683

测量 CPU 指令的数量是毫无用处的。

性能与瓶颈有关，取决于手头的问题，瓶颈可能是网络、磁盘 IO、内存或 CPU。

如果只是一场友谊赛，我会建议时机。当然，这意味着提供足够大的测试用例以进行有意义的测量。

在 Unix 上，您可以使用`gettimeofday`相对精确的度量。

# php - 获取字符串的中间 - 删除左右

> ID：12340834
> 
> 赞同：2
> 
> 时间：2012-09-09T16:36:07.833
> 
> 标签：php, string

我有这个字符串：

```
"cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat" 
```

我想删除纬度和经度。所以我想剪断字符串的左边，直到`"center="`右边开始`"&maptype="`。

所以我已经剪掉了左边的部分，但现在我不知道如何剪掉右边的部分。

编辑：

```
$h1['style']=$html->find('td.sendGps',0)->style;

$string=$h1['style'];  // i have this, which does not work like the $string=""cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat""
$inicio = "?center=";
$fim = "&maptype=";

$b = substr($string, strpos($string, $inicio) + 8); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:02:50.073

这可能比您想经历的要多，但可以从 URL 中提取和分解 URL 和查询字符串：

```
<?php

$data = "cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat";

$url = substr($data, strpos($data, 'url(') + 4);
$url = parse_url(substr($url, 0, strpos($url, ') ')));

print_r($url);

$query = explode('&', $url['query']);
$querypairs = array();

for ($i = 0, $l = count($query); $i < $l; $i++) {
    $pair = explode('=', $query[$i]);
    $querypairs[$pair[0]] = $pair[1];
}

print_r($querypairs);

?> 
```

[http://codepad.org/xRZ3zEcU](http://codepad.org/xRZ3zEcU)

现在，如果您真的想这样做，以便您可以重新组合成 CSS 定义以供以后使用，您可以反转它，但我可能会尝试以类似的方式分解 CSS。或者，作为一种较小的手段，只需`str_replace()`对先前的定义执行 a 并将`$url`重建结果 URL 后替换为[`http_build_query()`](http://us2.php.net/manual/en/function.http-build-query.php).

如果你真的，真的只是不关心它的其余部分......

```
<?php

$data = "cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat";

$center = substr($data, strpos($data, '?center=') + 8);
$center = substr($center, 0, strpos($center, '&'));

print_r($center);

?> 
```

[http://codepad.org/RiJHTX6p](http://codepad.org/RiJHTX6p)

**编辑**：那些最后一分钟的更新总是让你......修复。

在`substr()`单独的行的开头/结尾进行匹配，因此第二个`strpos()`是相对于第一个匹配的结果。我认为这样做的方式更容易理解，并且性能（我相信）应该不会有显着差异。此外，它将处理查询字符串对的不同顺序，因为第二个“相关”`&`检查首先在键之后。否则，我相信您最好分解查询字符串。

如果你想要`mid()`VB 和 VBA 中的函数，你可以使用：

```
<?php

function mid($start, $end, $str) {
    $str = substr($str, strpos($str, $start) + strlen($start));
    return substr($str, 0, strpos($str, $end));
}

$data = "cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat";

print_r(mid('?center=', '&', $data));

?> 
```

[http://codepad.org/2rjmC4PL](http://codepad.org/2rjmC4PL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:39:59.967

`substr`接受三个参数，最后一个是返回字符串的长度（从起始位置开始）。

所以在你的情况下，你会使用`$b = substr($string, strpos($string, $inico) + 8, 27);`.

但是，如果您正在像这样操作字符串，它可能会支付（当 URL 样式更改时不那么令人头疼）`parse_url`并`explode`提取参数。

这是一个例子：

```
$originalString = "cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat";

$url = substr($originalString, strpos($originalString, "url(") + 4);
$url = substr($url, 0, strrpos($url, ")"));

$params = parse_url($url, PHP_URL_QUERY);
$paramArray = explode("&", $params); 
```

`$paramArray`现在包含 URL 的 GET 参数的名称-值-对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:04:19.010

substr()

```
echo substr($s, 0, strpos($s, '?') + 1) . substr($s, strpos($s, '&') + 1); 
```

preg_replace()

```
echo preg_replace('~(\?center=.+?&)~', '?', $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:41:46.330

```
$str = "cursor:pointer; background:url(http://maps.google.com/staticmap?center=38.7376583333,-9.1658583333&maptype=satellite&zoom=14&size=300x300&key=ABQIAAAAvQ9c8pqKsi8K2dzb7UM9MhS13VDmd70a9rmDETSCgg2iXt3XnhQSnX4vFKfWO-3vdWNV5HHBnSLWLQ&sensor=true&hl=pt) no-repeat";
$str = explode('center=', $str);
$str = explode('&maptype=', $str[1]);
$str = $str[0];
echo $str; 
```

小提琴： [http ://www.phpfiddle.org/main/code/6rs-5hh](http://www.phpfiddle.org/main/code/6rs-5hh)

此外，如果您想在之后分别获取 LAT 和 LONG，请在将它们分配给后使用此代码`$str`：

```
$str = explode(',', $str);
$lat = $str[0];
$long = $str[1];
echo 'Lattitude ' . $lat . ' and Longtitude ' . $long; 
```

# c# - 在当前打开的应用程序顶部显示隐藏的窗口窗体

> ID：12340837
> 
> 赞同：2
> 
> 时间：2012-09-09T16:36:24.413
> 
> 标签：c#, winforms, forms, show-hide

我想将窗口窗体显示为一个弹出窗口，该窗口出现在我使用过的所有打开的其他应用程序窗口的顶部，`Focus`但它不起作用。所以我试过：

```
using System.Diagnostics;
using System.Runtime.InteropServices;

// Sets the window to be foreground
[DllImport("User32")]
private static extern int SetForegroundWindow(IntPtr hwnd);

// Activate or minimize a window
[DllImportAttribute("User32.DLL")]
private static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);
private const int SW_SHOW = 5;
private const int SW_MINIMIZE = 6;
private const int SW_RESTORE = 9;

private void ActivateApplication(string briefAppName)
{
    Process[] procList = Process.GetProcessesByName(briefAppName);

    if (procList.Length > 0)
    {
        ShowWindow(procList[0].MainWindowHandle, SW_RESTORE);
        SetForegroundWindow(procList[0].MainWindowHandle);
    }
} 
```

如上一个关于 SO [Here](https://stackoverflow.com/questions/46030/c-sharp-force-form-focus)的问题所述， 但我无法使用它。正确答案海报说“ `Basically, call ShowWindow() then SetForegroundWindow().`”但我不知道这些方法的参数是什么

我究竟应该传递给 `ShowWindow();`SetForegroundWindow(); 方法？？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:30:03.237

这是我的解决方案：

```
private void ActivateApplication (string briefAppName) 
    {
        Process[] p=Process.GetProcessesByName (briefAppName);
        if (p.Length>0)
        {
            this.TopMost=true;
            ShowWindow (p[0].MainWindowHandle, 9);
            this.TopMost=false;
            this.Activate ();
        }
    } 
```

使用 .Activate () 聚焦表单，使用 TopMost 更改表单的 Always-on-top 状态。

9 表示复位窗口。如果您的窗口已经恢复，ShowWindow 函数将不执行任何操作。在此处查找 ShowWindow 函数的文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

# curl - PHP Curl -> STDIN / STDOUT 在哪里？

> ID：12340838
> 
> 赞同：0
> 
> 时间：2012-09-09T16:36:26.817
> 
> 标签：curl, stdout, stdin, php

我遇到了硬盘过度使用问题，并且我的 curl 脚本输出到浏览器。

我的一个分区没有使用，我可以设置 STDOUT/STDIN 来代替那里写入临时数据吗？

他们目前写到哪里？我将如何改变它？

更新：看起来这是一个 SAPI 问题。我正在使用 php-fpm & nginx，这是我的配置。我能看到的一些事情可能会有所帮助，但你知道具体需要改变什么吗？

```
; Start a new pool named 'www'.
[www]

; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses on a
;                            specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = 127.0.0.1:9000

; Set listen(2) backlog. A value of '-1' means unlimited.
; Default Value: -1
;listen.backlog = -1

; List of ipv4 addresses of FastCGI clients which are allowed to connect.
; Equivalent to the FCGI_WEB_SERVER_ADDRS environment variable in the original
; PHP FCGI (5.2.2+). Makes sense only with a tcp listening socket. Each address
; must be separated by a comma. If this value is left blank, connections will be
; accepted from any ip address.
; Default Value: any
listen.allowed_clients = 127.0.0.1

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions. 
; Default Values: user and group are set as the running user
;                 mode is set to 0666
;listen.owner = nobody
;listen.group = nobody
;listen.mode = 0666

; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user's group
;       will be used.
; RPM: apache Choosed to be able to access some dir as httpd
user = apache
; RPM: Keep a group allowed to write in log dir.
group = apache

; Choose how the process manager will control the number of child processes.
; Possible Values:
;   static  - a fixed number (pm.max_children) of child processes;
;   dynamic - the number of child processes are set dynamically based on the
;             following directives:
;             pm.max_children      - the maximum number of children that can
;                                    be alive at the same time.
;             pm.start_servers     - the number of children created on startup.
;             pm.min_spare_servers - the minimum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is less than this
;                                    number then some children will be created.
;             pm.max_spare_servers - the maximum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is greater than this
;                                    number then some children will be killed.
; Note: This value is mandatory.
pm = dynamic

; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes to be created when pm is set to 'dynamic'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.
; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP
; CGI.
; Note: Used when pm is set to either 'static' or 'dynamic'
; Note: This value is mandatory.
pm.max_children = 50

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2
pm.start_servers = 5

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.min_spare_servers = 5

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.max_spare_servers = 35

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0
;pm.max_requests = 500

; The URI to view the FPM status page. If this value is not set, no URI will be
; recognized as a status page. By default, the status page shows the following
; information:
;   accepted conn    - the number of request accepted by the pool;
;   pool             - the name of the pool;
;   process manager  - static or dynamic;
;   idle processes   - the number of idle processes;
;   active processes - the number of active processes;
;   total processes  - the number of idle + active processes.
; The values of 'idle processes', 'active processes' and 'total processes' are
; updated each second. The value of 'accepted conn' is updated in real time.
; Example output:
;   accepted conn:   12073
;   pool:             www
;   process manager:  static
;   idle processes:   35
;   active processes: 65
;   total processes:  100
; By default the status page output is formatted as text/plain. Passing either
; 'html' or 'json' as a query string will return the corresponding output
; syntax. Example:
;   http://www.foo.bar/status
;   http://www.foo.bar/status?json
;   http://www.foo.bar/status?html
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set 
;pm.status_path = /status

; The ping URI to call the monitoring page of FPM. If this value is not set, no
; URI will be recognized as a ping page. This could be used to test from outside
; that FPM is alive and responding, or to
; - create a graph of FPM availability (rrd or such);
; - remove a server from a group if it is not responding (load balancing);
; - trigger alerts for the operating team (24/7).
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;ping.path = /ping

; This directive may be used to customize the response of a ping request. The
; response is formatted as text/plain with a 200 response code.
; Default Value: pong
;ping.response = pong

; The timeout for serving a single request after which the worker process will
; be killed. This option should be used when the 'max_execution_time' ini option
; does not stop script execution for some reason. A value of '0' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_terminate_timeout = 0

; The timeout for serving a single request after which a PHP backtrace will be
; dumped to the 'slowlog' file. A value of '0s' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_slowlog_timeout = 0

; The log file for slow requests
; Default Value: not set
; Note: slowlog is mandatory if request_slowlog_timeout is set
slowlog = /var/log/php-fpm/www-slow.log

; Set open file descriptor rlimit.
; Default Value: system defined value
;rlimit_files = 1024

; Set max core size rlimit.
; Possible Values: 'unlimited' or an integer greater or equal to 0
; Default Value: system defined value
;rlimit_core = 0

; Chroot to this directory at the start. This value must be defined as an
; absolute path. When this value is not set, chroot is not used.
; Note: chrooting is a great security feature and should be used whenever 
;       possible. However, all PHP paths will be relative to the chroot
;       (error_log, sessions.save_path, ...).
; Default Value: not set
;chroot = 

; Chdir to this directory at the start. This value must be an absolute path.
; Default Value: current directory or / when chroot
;chdir = /var/www

; Redirect worker stdout and stderr into main error log. If not set, stdout and
; stderr will be redirected to /dev/null according to FastCGI specs.
; Default Value: no
;catch_workers_output = yes

; Limits the extensions of the main script FPM will allow to parse. This can
; prevent configuration mistakes on the web server side. You should only limit
; FPM to .php extensions to prevent malicious users to use other extensions to
; exectute php code.
; Note: set an empty value to allow all extensions.
; Default Value: .php
;security.limit_extensions = .php .php3 .php4 .php5

; Pass environment variables like LD_LIBRARY_PATH. All $VARIABLEs are taken from
; the current environment.
; Default Value: clean env
;env[HOSTNAME] = $HOSTNAME
;env[PATH] = /usr/local/bin:/usr/bin:/bin
;env[TMP] = /tmp
;env[TMPDIR] = /tmp
;env[TEMP] = /tmp

; Additional php.ini defines, specific to this pool of workers. These settings
; overwrite the values previously defined in the php.ini. The directives are the
; same as the PHP SAPI:
;   php_value/php_flag             - you can set classic ini defines which can
;                                    be overwritten from PHP call 'ini_set'. 
;   php_admin_value/php_admin_flag - these directives won't be overwritten by
;                                     PHP call 'ini_set'
; For php_*flag, valid values are on, off, 1, 0, true, false, yes or no.

; Defining 'extension' will load the corresponding shared extension from
; extension_dir. Defining 'disable_functions' or 'disable_classes' will not
; overwrite previously defined php.ini values, but will append the new value
; instead.

; Default Value: nothing is defined by default except the values in php.ini and
;                specified at startup with the -d argument
;php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com
;php_flag[display_errors] = off
php_admin_value[error_log] = /var/log/php-fpm/www-error.log
php_admin_value[session.save_path] = /var/lib/php/session
php_admin_flag[log_errors] = on
;php_admin_value[memory_limit] = 128M 
```

# php - JavaScript 过期标头不能设置为 12 个月

> ID：12340839
> 
> 赞同：5
> 
> 时间：2012-09-09T16:36:33.247
> 
> 标签：php, javascript, html, performance, apache

我正在努力使我的网站加载速度更快。我使用该工具`YSlow`分析网站并检查是否有一些改进。我的第一步是缓存静态文件。因此，我想为 javascript 文件设置过期标头，但它不起作用。我在 HTML 中包含了 javascript，如下所示：

```
<script type="text/javascript" src="//a.ph3nx.com/b.js"></script> 
```

然后我像这样更改了我的 Apache2 httpd.conf 文件：

```
ExpiresActive On
ExpiresDefault "access plus 1 minutes"
ExpiresByType text/javascript "access plus 12 months" 
```

问题是 javascript 文件仍然有 1 分钟的到期日期。我希望你能帮助我，谢谢！

**解决方案：**

`ExpiresByType application/javascript "access plus 12 months"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:48:07.237

试试这样的代码：

```
 ExpiresByType text/javascript "access plus 12 month"
  ExpiresByType application/x-javascript "access plus 12 month"
  ExpiresByType application/javascript "access plus 12 month" 
```

您还可以使用 .htaccess 缓存您的文件：

```
 <FilesMatch "\.js$">
  Header set Cache-Control "max-age=172800, public, must-revalidate"
  </FilesMatch> 
```

# javascript - Shadowbox 未定义

> ID：12340840
> 
> 赞同：0
> 
> 时间：2012-09-09T16:36:37.213
> 
> 标签：javascript, jquery, lightbox, shadowbox

好吧，所以，我正在使用 Shadowbox，它是一个 jQuery Lightbox（本身），根据 Firebug，它可能会破坏我的代码。

这是确切的错误：

> 错误：Shadowbox 未定义行：19

这是我的 JavaScript/jQuery 文件中的代码。

```
jQuery(document).ready(function(){
    jQuery("a img").hover(function() {
        jQuery(this).stop().animate({opacity: "0.75"}, 'slow');
    },
    function() {
        jQuery(this).stop().animate({opacity: "1"}, 'slow');
    });
    if ( jQuery('.slider')[0] ) (
        jQuery(".slider").slideshow({
            width      : 900,
            height     : 150,
            transition : 'SquareRandom',
            navigation : false,
            selector : false,
            timer : false,
            control : false,
        })
    );
    Shadowbox.init();
}); 
```

这里发生了什么！任何帮助，将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:55:10.783

这意味着 Shadowbox 没有被加载。在你的`<head>`标签中，确保你有类似的东西：

```
<script type="text/javascript" src="Shadowbox.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T13:23:54.477

尝试：

```
shadowbox({
    continuous: true,
    counterType:"skip",
}); 
```

来源：[https ://github.com/mjackson/shadowbox/issues/45](https://github.com/mjackson/shadowbox/issues/45)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-19T13:25:18.247

```
<link rel="stylesheet" type="text/css" href="shadowbox/shadowbox.css" />
<script type="text/javascript" src="shadowbox/shadowbox.js"> Shadowbox.init({    language:   "pl",    enableKeys:   "true", continuous: true,   counterType:"skip",}); </script> 
```

我的解决方案很简单。只需在一行中添加所有内容。

# c++ - 临时类中的 std::map 用钥匙

> ID：12340841
> 
> 赞同：0
> 
> 时间：2012-09-09T16:36:53.760
> 
> 标签：c++, templates, stdmap

我有自定义二叉树类，它保存模板类型的值`T`（它可以是值或指针）。每个值都用数字封装（这个数字用于在树中搜索）。我想`std::map`在我的树类中有一个快速 O(1) 访问没有数字的对象。

```
template <typename T>
stuct BSTNode 
{
  T value;
  int searchValue;
}

template <typename T>
class BST 
{
  BSTNode<T> * root;
  std::map<T, BSTNode<T>> cache;
  //... etc.
} 
```

**示例：**我`a`在 value 下的树中插入了类实例`n`。现在我想获取与 this 关联的节点`a`。我无法搜索树，因为我没有`n`. 所以我想用`a`, 并从`std::map`get `node = map[a]`。现在我可以做到了`node->n`。

我怎样才能做到这一点？我可以覆盖比较方法`std::map`：

```
bool operator()(const void * s1, const void * s2) const 
```

但它不能同时用于值和指针：不能将参数 1 从 转换`const double`为`const void *`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:57:08.063

做一个有特征的比较器：

```
template <typename T>
struct NodeComp
{
    bool operator<(T const & lhs, T const & rhs) const
    {
        return lhs < rhs;
    }
};

template <typename U>
struct NodeComp<U *>
{
    bool operator<(U * lhs, U * rhs) const
    {
        return *lhs < *rhs;
    }
}; 
```

现在您的地图可以这样定义：

```
template <typename T>
class BST 
{
    BSTNode<T> * root;
    std::map<T, BSTNode<T>, NodeComp<T>> cache;
} 
```

# css - CSS 相对和绝对定位元素拉伸容器

> ID：12340842
> 
> 赞同：0
> 
> 时间：2012-09-09T16:36:59.703
> 
> 标签：css, height, css-position

你能帮我解决我的困境吗？我有一个已设置的容器（在本例中为 BODY）`position:relative`。在里面我有两个div。一个`relative`和一个`absolute`定位（按此顺序）。

问题是，每当我`margin-top`为`relative`定位元素设置一些时，容器的高度（`body`在这种情况下）都会垂直延伸。

例如，即使我设置`height: 100%`了容器，查看时它的大小是 100% +定位子元素`margin-top`的大小。`relative`

这是一个小提琴：http: [//jsfiddle.net/xJ75R/7/](http://jsfiddle.net/xJ75R/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:51:44.633

首先，你不应该给 body 一个相对位置，因为 body 占据了整个页面。

无论如何，在将相对位置应用于另一个元素时要具体，所以如果你有一个“列表”类，那么使用

```
.lists { position: relative; top: something; left: something } 
```

或保证金，或任何规则。

如果你只是在给另一个元素一些边距后遇到了 body 标签的问题（虽然我不知道这是怎么发生的），然后给 body 一个边距 0，比如：

```
body { margin: 0; } 
```

如果这不起作用，那么使用 !important like

```
body { margin: 0 !important; } 
```

附带说明一下，使用 firebug 插件的 firefox 让您的 CSS 生活更轻松，并即时查看正在发生的事情。

# bash - bash shell 脚本查找最近的几个文件的父目录

> ID：12340846
> 
> 赞同：13
> 
> 时间：2012-09-09T16:37:29.783
> 
> 标签：bash

假设输入参数是几个文件的完整路径。说，

```
/abc/def/file1
/abc/def/ghi/file2
/abc/def/ghi/file3 
```

1.  如何`/abc/def`在 bash shell 脚本中获取目录名称？
2.  我怎样才能只获得`file1`,`/ghi/file2`和`/ghi/file3`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:37:35.580

给定第 1 部分的答案（通用前缀），第 2 部分的答案很简单；您将前缀从每个名称中切掉，这可以通过`sed`其他选项来完成。

那么，有趣的部分是找到公共前缀。最小公共前缀是`/`（例如，对于`/etc/passwd`and `/bin/sh`）。最大公共前缀（根据定义）存在于所有字符串中，因此我们只需将其中一个字符串拆分为段，并将可能的前缀与其他字符串进行比较。概述：

```
split name A into components
known_prefix="/"
for each extra component from A
do
    possible_prefix="$known_prefix/$extra/"
    for each name
    do
        if $possible_prefix is not a prefix of $name
        then ...all done...break outer loop...
        fi
    done
    ...got here...possible prefix is a prefix!
    known_prefix=$possible_prefix
done 
```

有一些管理细节需要处理，例如名称中的空格。另外，什么是允许的武器。问题已标记`bash`，但允许使用哪些外部命令（例如 Perl）？

一个未定义的问题——假设名称列表是：

```
/abc/def/ghi
/abc/def/ghi/jkl
/abc/def/ghi/mno 
```

是最长的公共前缀`/abc/def`还是`/abc/def/ghi`？我将假设这里最长的公共前缀是`/abc/def`. （如果你真的希望它是`/abc/def/ghi`，那么使用`/abc/def/ghi/.`第一个名称。）

此外，还有调用细节：

*   这个函数或命令是如何调用的？
*   值是如何返回的？
*   这是一两个函数或命令（`longest_common_prefix`和'path_without_prefix`）吗？

两个命令更简单：

*   `prefix=$(longest_common_prefix name1 [name2 ...])`
*   `suffix=$(path_without_prefix /pre/fix /pre/fix/to/file [...])`

如果前缀存在，该`path_without_prefix`命令将删除该前缀，如果前缀不以名称开头，则保持参数不变。

### 最长的公共前缀

```
longest_common_prefix()
{
    declare -a names
    declare -a parts
    declare i=0

    names=("$@")
    name="$1"
    while x=$(dirname "$name"); [ "$x" != "/" ]
    do
        parts[$i]="$x"
        i=$(($i + 1))
        name="$x"
    done

    for prefix in "${parts[@]}" /
    do
        for name in "${names[@]}"
        do
            if [ "${name#$prefix/}" = "${name}" ]
            then continue 2
            fi
        done
        echo "$prefix"
        break
    done
} 
```

测试：

```
set -- "/abc/def/file 0" /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3 "/abc/def/ghi/file 4"
echo "Test: $@"
longest_common_prefix "$@"
echo "Test: $@" abc/def
longest_common_prefix "$@" abc/def
set --  /abc/def/ghi/jkl /abc/def/ghi /abc/def/ghi/mno
echo "Test: $@"
longest_common_prefix "$@"
set -- /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3
echo "Test: $@"
longest_common_prefix "$@"
set -- "/a c/d f/file1" "/a c/d f/ghi/file2" "/a c/d f/ghi/file3"
echo "Test: $@"
longest_common_prefix "$@" 
```

输出：

```
Test: /abc/def/file 0 /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3 /abc/def/ghi/file 4
/abc/def
Test: /abc/def/file 0 /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3 /abc/def/ghi/file 4 abc/def
Test: /abc/def/ghi/jkl /abc/def/ghi /abc/def/ghi/mno
/abc/def
Test: /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3
/abc/def
Test: /a c/d f/file1 /a c/d f/ghi/file2 /a c/d f/ghi/file3
/a c/d f 
```

### path_without_prefix

```
path_without_prefix()
{
    local prefix="$1/"
    shift
    local arg
    for arg in "$@"
    do
        echo "${arg#$prefix}"
    done
} 
```

测试：

```
for name in /pre/fix/abc /pre/fix/def/ghi /usr/bin/sh
do
    path_without_prefix /pre/fix $name
done 
```

输出：

```
abc
def/ghi
/usr/bin/sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:27:14.500

[这是一个](https://github.com/l0b0/tilde/blob/345dd406c22620648795032aceb92be2cefa91d5/.bash_aliases#L69)已被证明可以处理[任意复杂文件名](https://github.com/l0b0/tilde/blob/345dd406c22620648795032aceb92be2cefa91d5/tests/path_common.sh)（包含换行符、退格等）的文件：

```
path_common() {
    if [ $# -ne 2 ]
    then
        return 2
    fi

    # Remove repeated slashes
    for param
    do
        param="$(printf %s. "$1" | tr -s "/")"
        set -- "$@" "${param%.}"
        shift
    done

    common_path="$1"
    shift

    for param
    do
        while case "${param%/}/" in "${common_path%/}/"*) false;; esac; do
            new_common_path="${common_path%/*}"
            if [ "$new_common_path" = "$common_path" ]
            then
                return 1 # Dead end
            fi
            common_path="$new_common_path"
        done
    done
    printf %s "$common_path"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T21:17:55.253

一个更“便携”的解决方案，因为它不使用特定于 bash 的功能：首先定义一个函数来计算两个路径的最长公共前缀：

```
function common_path()
{
  lhs=$1
  rhs=$2
  path=
  OLD_IFS=$IFS; IFS=/
  for w in $rhs; do
    test "$path" = / && try="/$w" || try="$path/$w"
    case $lhs in
      $try*) ;;
      *) break ;;
    esac
    path=$try
  done
  IFS=$OLD_IFS
  echo $path
} 
```

然后将它用于一长串单词：

```
function common_path_all()
{
  local sofar=$1
  shift
  for arg
  do
    sofar=$(common_path "$sofar" "$arg")
  done
  echo ${sofar:-/}
} 
```

根据您的输入，它给出

```
$ common_path_all /abc/def/file1 /abc/def/ghi/file2 /abc/def/ghi/file3
/abc/def 
```

正如 Jonathan Leffler 指出的那样，一旦你有了这个，第二个问题就变得微不足道了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-07T18:09:45.353

在我看来，下面的解决方案要简单得多。

如前所述，只有第 1 部分比较棘手。第 2 部分使用 sed 很简单。

第 1 部分可以分为 2 个子部分：

1.  查找所有字符串的[最长公共前缀](https://stackoverflow.com/a/6973268/2873507)
2.  确保这个前缀是一个目录，如果不修剪它得到对应的目录

可以使用以下代码完成。为了清楚起见，此示例仅使用 2 个字符串，但 while 循环为您提供了 n 个字符串所需的内容。

```
LONGEST_PREFIX=$(printf "%s\n%s\n" "$file_1" "$file_2" | sed -e 'N;s/^\(.*\).*\n\1.*$/\1/')
CLOSEST_PARENT=$(echo "$LONGEST_PREFIX" | sed 's/\(.*\)\/.*/\1/') 
```

当然可以只用一行重写：

```
CLOSEST_PARENT=$(printf "%s\n%s\n" "$file_1" "$file_2" | sed -e 'N;s/^\(.*\).*\n\1.*$/\1/'  | sed 's/\(.*\)\/.*/\1/') 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-09T16:44:04.237

获取家长目录：

```
 dirname /abc/def/file1 
```

会给**/abc/def**

并获取文件名

```
 basename /abc/def/file1 
```

会给**file1**

并且根据您的问题，仅使用**最近的父目录**名称

```
basename $(dirname $(/abc/def/file1)) 
```

将在此处给出**def** 输入代码

# jquery - mvc3中的jquery datepicker

> ID：12340848
> 
> 赞同：1
> 
> 时间：2012-09-09T16:37:35.493
> 
> 标签：jquery, asp.net-mvc-3

我想在所有日期时间字段上使用 jquery 日期选择器，所以我在我的 mvc3 项目中关注

模型

```
public DateTime? DateTime{ get; set; } 
```

视图/共享/编辑器模板

```
@model DateTime?
@Html.TextBox("", Model.ToString(), new { @class = "date" }) 
```

在 _Layout.cshtml 页面上我有

```
$(document).ready(function () {
   $(".date").datepicker();
}); 
```

我引用了 datepicker css 和其他 jquery 文件（jqueryui 和 jquery-1.5.1.js）

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>

<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" /> 
```

错误信息如下

```
TypeError: $(".date").datepicker is not a function
[Break On This Error]       
$(".date").datepicker(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:25:49.687

您似乎包含`jquery`了两次：标准版和缩小版。摆脱两者之一。还要确保您的自定义脚本紧随**其后**：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
       $(".date").datepicker();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:42:01.657

您没有包含此日期选择器所属的 jQuery 和 jQuery UI（.js 文件而不是 .css）库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:20:31.097

我有几个建议。

1.  尝试将 jquery 更新到我认为是 1.8.1 的最新版本
2.  我不认为你需要model.tostring只是模型应该在这个cale中工作//不认为这是导致问题的原因，而只是一个建议

# frameworks - 为实体对象设置值时已添加具有相同键的项

> ID：12340849
> 
> 赞同：2
> 
> 时间：2012-09-09T16:37:39.017
> 
> 标签：frameworks, entity

我有一个`SilverLight`使用实体`framework 4`作为数据访问层的应用程序。我需要手动创建一些实体对象，然后保存到数据库。
我有这个特殊的问题。当实例化对象然后为其属性分配一些值时，出现错误“已添加具有相同键的项目”。这是在对象甚至被添加到 的实例之前`ObjectContext`。另外，在切换之前`to SP1 of Visual Studio`，没有问题。只有在我们升级后才会发生`VS2010 to SP1.`

在代码中，它是这样的。

```
class cls = new class(); 
cls.class_name = "test"; 
```

在运行时为 class_name 赋值时会引发异常。“类”是手动创建的实体对象，它映射到 th 中的表`SQL database`。

我应该在哪里解决这个问题？

非常感谢任何帮助。

# c++ - Visual Studio (C++) 中的冲突错误

> ID：12340852
> 
> 赞同：0
> 
> 时间：2012-09-09T16:38:36.583
> 
> 标签：c++, visual-studio

我的项目有一个函数“PrintHeader”，在 io.cpp 中定义。即使 io.h 包含在我的主文件中，我也会收到错误消息

```
error C3861: 'PrintHeader': identifier not found. 
```

当我将 PrintHeader 的函数复制到我的主文件中时，出现错误

```
error LNK2005: 'void _cdeci PrintHeader(void)" (?PrintHeader@@YAXXZ) already defined in io.obj. 
```

和

```
error LNK1169: one or more multiply defined symbols found. 
```

我可以理解第二个错误集，因为我确实定义了两次，但我不明白为什么当我删除重复定义时它不起作用。任何帮助是极大的赞赏。

主文件

```
#include "stdio.h"
#include <iostream>
#include "io.h"

void PrintHeader()
{
    cout << endl;
    cout << "Month\tPrincipal\t Interest\t  Balance" << endl;
    cout << "-----\t---------\t---------\t---------" << endl;
}
int main()
{
    cout << "Hello World\n";
    PrintHeader();
    getchar();
    return 0;
} 
```

io.cpp

```
#include <iostream>
#include <iomanip>
#include "io.h"

void PrintHeader (void)
{
    cout << endl;
    cout << "Month\tPrincipal\t Interest\t  Balance" << endl;
    cout << "-----\t---------\t---------\t---------" << endl;
} 
```

io.h

```
#ifndef __IO_H__
#define __IO_H__

#include <string>
using namespace std;

void PrintHeader (void);

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:05:13.547

您很可能在 main.cpp 中包含了错误的文件。`include "io.h"`您可以通过右键单击并选择打开文件来确保它是正确的文件。

# php - 用户单击时如何使用弹出窗格创建图像？

> ID：12340856
> 
> 赞同：-1
> 
> 时间：2012-09-09T16:39:03.717
> 
> 标签：php, javascript, jquery, html, css

当我点击图片（html标签）时，我想显示一个弹出面板（例如：当我们点击图片时，就像facebook中的弹出面板一样）。注意：弹出窗格应包含图像和文本（从数据库中检索）。

我怎么能那样做？提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:57:59.187

类似这样的东西：

在您的 HTML 页面中，添加这种代码：

（当然首先在您的页面上包含[Jquery ）](http://jquery.com/)

> 当我点击图片（html标签）时，

```
$('#idOfWhateveriWant').on('click',function(){

}); 
```

> 我想显示一个弹出面板（例如：当我们单击图片时，就像 facebook 中的弹出面板一样）。

```
$('#idOfWhateveriWant').on('click',function(){
   //window.open("whatever") 
   //ABOVE NOT RECOMMENDED

   //use below instead

   $.ajax({
   url: 'ajax/test.php',
   success: function(data) {
      $('.result').html(data);
      //or use some jquery plugin you made 
      //or external plugin
      // to make your pane appear
      //$.WHateverPopupPanePlugin(whatever,data)
      alert('Load was performed.');
   }); //SEE http://api.jquery.com/jQuery.ajax/
}); 
```

> 注意：弹出窗格应包含图像和文本（从数据库中检索）。

在 ajax/test.php 中：

1.  首先配置mysql数据库，
2.  在里面放一些数据
3.  添加一些这样的代码来访问数据库中的内容并将其作为 JSON 对象回显

php示例如下：

```
 <?php 

  //--------------------------------------------------------------------------
  // Example php script for fetching data from mysql database
  //--------------------------------------------------------------------------
  $host = "localhost";
  $user = "root";
  $pass = "root";

  $databaseName = "ajax01";
  $tableName = "variables";

  //--------------------------------------------------------------------------
  // 1) Connect to mysql database
  //--------------------------------------------------------------------------
  include 'DB.php';
  $con = mysql_connect($host,$user,$pass);
  $dbs = mysql_select_db($databaseName, $con);

  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------
  $result = mysql_query("SELECT * FROM $tableName");          //query
  $array = mysql_fetch_row($result);                          //fetch result    

  //--------------------------------------------------------------------------
  // 3) echo result as json 
  //--------------------------------------------------------------------------
  echo json_encode($array);

?> 
```

附加帮助：

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   [http://api.jquery.com](http://api.jquery.com)
*   [http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)

# c - C中的struct mem如何？

> ID：12340858
> 
> 赞同：2
> 
> 时间：2012-09-09T16:39:11.167
> 
> 标签：c

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

我无法理解 struct mem alloc。

```
typedef struct a{
} a;

sizeof(a) is 0

typedef struct b{
    int bb
} b;

sizeof(b) is 4

typedef struct b2{
    int *bbbb
} b2;

sizeof(b2) is 8

typedef struct d{
    int x;
    int *y;
} d;

sizeof(d) is 16! 
```

为什么 sizeof 是 16？是 12 吗？(int+int point=4+8);

我猜 sizeof(int) 是 4，如果 int var in struct,mem 是 8？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:43:59.420

> 为什么 sizeof 是 16？是 12 吗？(int+int point=4+8);

由于指针在您的机器上是 8 字节宽，出于性能原因，编译器觉得有义务将其对齐到 8 字节边界。在某些架构上，它甚至可能不是严格的性能问题：对某些类型的未对齐访问可能是完全非法的。

换句话说，编译器可以在任何地方添加填充，**除了结构的第一个元素之前**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:42:59.700

根据您使用的平台，`sizeof(int *)`可能是 4 或 8（或其他）。此外，如果需要，您的编译器可以自由地将未使用的填充字节添加到结构中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:43:44.413

这是由于填充和内存对齐。请参阅[此链接](http://www.geeksforgeeks.org/archives/9705)以获取更多说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:45:57.673

内存对齐在起作用。事情需要对齐。

# c# - C#中类的静态初始化

> ID：12340859
> 
> 赞同：0
> 
> 时间：2012-09-09T16:39:29.700
> 
> 标签：c#, class, struct, initialization

我需要将我的数据结构结构转换/升级为一个类并且有一个问题：我可以像结构一样静态启动我的类吗？如果是这样，任何有关如何做到这一点的指导将不胜感激。下面是我的结构的定义：

```
typedef struct t
{
   struct t *next;
   int otherfield;
} T

T r1[]={{0,1},{0,2}};
T s1[]={{r1,3},{0,4}}; 
```

我转换后的课程看起来像

```
class T
{
  class T next;
  int otherfield;
}
List<T> r1;
List<T> s1; 
```

如何静态启动 r1、s1。通过构造函数的标准初始化可能不起作用，因为我有数百个这样的结构并且它们都是静态初始化的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:44:33.317

你不能只做以下吗？

```
class T
{
    public T next;
    public int otherfield;
    public T( T next, int otherfield )
    {
        this.next = next;
        this.otherfield = otherfield
    }
}

T[] r1 = new T[]{ new T( null, 1 ), new T( null, 2 ) };
T[] s1 = new T[]{ new T( r1[0], 3 ), new T( null, 4 ) }; 
```

***编辑***：如果你想用 List 来做，那么你可以做以下事情：

```
List< T > r1 = new List< T >( new T[]{ new T( null, 1 ), new T( null, 2 ) } );
List< T > s1 = new List< T >( new T[]{ new T( r1[0], 3 ), new T( null, 4 ) } ); 
```

# html - 根据选项框更改链接

> ID：12340863
> 
> 赞同：0
> 
> 时间：2012-09-09T16:39:47.610
> 
> 标签：html, twitter-bootstrap

我正在构建一个网页，用于使用引导程序下载我的一个应用程序。我正在尝试制作一个下载页面，并且上面有一些选项，我需要根据选择的选项更改下载链接。我有 gui，但我真的不知道如何更改链接。

到目前为止，我的代码是这样的：

[http://jsfiddle.net/xdragonforce/2fta6/](http://jsfiddle.net/xdragonforce/2fta6/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:44:51.133

您通常使用表单传递这些参数，并让服务器解析 URL 参数并发送/重定向到适当的文件。这不是 HTML 的工作。

你需要：

*   使用一个`<form>`元素，该元素提交到可以处理它的服务器端（PHP、ASP 等）页面。
*   给你的`<select>`元素`name=`属性，这些属性代表它们在表单中的滚动。
*   在处理页面上，您获取用户选择的表单参数，处理它们，确定您要提供的文件的正确版本，并提供它（或重定向到提供它的页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:09:34.553

像这样的东西会达到你的要求。

```
<!DOCTYPE html>
<html>
<head>
<script>
function changeLink(newHref)
{
    downloadBtn.href = newHref;
    if (newHref == "")
        downloadBtn.setAttribute('disabled', 'true');
    else
        downloadBtn.setAttribute('disabled', 'false');
}
</script>
<style>
#downloadBtn
{
    text-decoration: none;
    background-color: #49AFCD;
    padding: 4px;
    cursor: pointer;
    border-radius: 4px;
    color: white;
}
#downloadBtn:hover
{
    background-color: #2F96B4;
}
</style>
</head>
<body>
    <h2>Select your device</h2>
    <select id='m_List1' onchange='changeLink(this.value);'>
        <option value="" selected>Select an device type</option>
        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521N_iPhone2G.zip/download">iPhone 2G (521N)</option>
        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521U_iPhone2G.zip/download">iPhone 2G (521U)</option>

        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521N_iPhone3G.zip/download">iPhone 3G (521N)</option>
        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521U_iPhone3G.zip/download">iPhone 3G (521U)</option>

        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521_iPodTouch1G.zip/download">iPadTouch 1G</option>
        <option value="http://sourceforge.net/projects/whited00r/files/5.2.1/Whited00r_521_iPodTouch2G.zip/download">iPadTouch 2G</option>
    </select>
    <a id='downloadBtn' disabled='true'>Download »</a>
</body>
</html> 
```

# bash - if 语句没有正确评估 bash

> ID：12340866
> 
> 赞同：0
> 
> 时间：2012-09-09T16:40:02.127
> 
> 标签：bash, if-statement

我正在测试一个变量是否大于另一个变量。无论值是什么，if 评估都会获得相同的值。

```
COMP(){
avg=$(for avg in $(for file in $(ls /var/log/sa/sa[0123]*); do echo $file; done); do sar -r -f $avg| tail -1; done | awk '{totavg+=$4} END {print (totavg/NR)*5}');
for comp in $(sar -r -f /var/log/sa/sa08 | egrep -v "^$|Average|CPU|used" | awk '{print $5}'); do
        if [ `echo $avg` <  `echo $comp` ];
                then echo 'You have had a spike!';
                echo "COMP = $comp";
                echo "AVG = $avg";
        fi;
done } 
```

即使这些值并没有真正评估为真，我也得到了这个输出。

```
You have had a spike!
COMP = 41.20
AVG = 145.438
You have had a spike!
COMP = 41.20
AVG = 145.438
You have had a spike!
COMP = 41.19
AVG = 145.438
You have had a spike!  
COMP = 41.24 
AVG = 145.438 
```

我已经尝试了多种方法，但无法使其正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:48:31.817

是的，正如 ingnacio 指出的那样

```
average=`echo $avg`;
comp1=`echo $comp`

  if ((average)) 2>/dev/null; then
     average=$((average))
   else
     average=0;
  fi
 if ((comp1)) 2>/dev/null; then
     comp1=$((comp1))
  else
     comp1=0;
  fi

if [ $average -lt $comp1 ];then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:42:14.840

`<`按字典顺序比较。如果要比较整数，请使用`-lt`. 如果要比较浮点数，请使用`bc`而不是`test`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:42:50.237

您是在寻找数值比较还是文字（字符串）比较？可能需要不同的运算符，具体取决于哪个运算符。

# backbone.js - 主干视图组织和部分

> ID：12340869
> 
> 赞同：2
> 
> 时间：2012-09-09T16:40:22.697
> 
> 标签：backbone.js, backbone-views, backbone-routing

我有一个相当复杂的 Backbone 应用程序，我不确定如何组织视图/模板。该应用程序是一个基于 Web 的电子邮件客户端。我真的很难理解如何制作这个侧边栏。

应用程序侧边栏与您在 Apple Mail/Outlook 中看到的非常相似。它基本上是一个文件夹浏览器。此视图存在于每个页面上。

我有两个主要问题：

### 如何将集合数据放入侧边栏视图？

从技术上讲，侧边栏上呈现了三个“集合” - 帐户 => 邮箱和标签。所以一些示例代码看起来像这样：

```
<div class="sidebar">
  <div class="sidebar-title">Mailboxes</div>

  <div class="sidebar-subtitle">Gmail</div>
  <div class="mailboxes" data-account-id="1">
    <ul>
      <li><a href="...">Inbox</a></li>
      <li><a href="...">Sent</a></li>
      ...
    </ul>
  </div>

  <div class="sidebar-subtitle">Yahoo</div>
  <div class="mailboxes" data-account-id="2">
    <ul>
      <li><a href="...">Inbox</a></li>
      <li><a href="...">Sent</a></li>
      ...
    </ul>
  </div>

  <div class="sidebar-title">Labels</div>
  <div class="sidebar-labels">
    <ul>
      <li>Home</li>
      <li>Todo</li>
    </ul>
  </div>
</div> 
```

所以理论上我需要做这样的事情，不是吗？

```
<div class="sidebar">
  <div class="sidebar-title">Mailboxes</div>

  <% for account in @accounts.models: %>
    <div class="sidebar-subtitle"><%= account.get('name') %></div>
    <div class="mailboxes" data-account-id="<%= account.get('id') %>">
      <ul>
        <% for mailbox in account.mailboxes.models: %>
          <li><a href="..."><%= mailbox.get('name') %></a></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="sidebar-title">Labels</div>
  <div class="sidebar-labels">
    <ul>
      <% for label in @labels: %>
        <li><%= label.get('name') %></li>
      <% end %>
    </ul>
  </div>
</div> 
```

问题是我不能同时通过`@accounts`路由器`@labels`。我意识到我可以使用`@options`，但这似乎很混乱且不可靠。此侧边栏需要存在于每个页面上。在 Backbone 堆栈上应该是什么样子？我认为它不应该有自己的路由器，因为它不是真正的“页面”。

### 我会把事情分解成更小的视图吗？

每个邮箱都应该有自己的视图吗？每个邮箱都应该有自己的视图吗？每个标签都有自己的看法？我想监听事件，例如新消息，并更新邮箱未读计数（例如）。但是我该怎么做呢？如何嵌套视图并有效地处理所有对象的创建/获取？如果我要将事物分解为更小的视图，我的侧边栏视图应该是什么样的？

对不起，如果我在胡说八道。我已经看了好几天了，似乎找不到一个好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T00:56:44.167

使用`options`是完全合法的并且是 Backbone-y。所以我不会害怕使用它，尽管还有很多其他方法可以解决这个问题。是的。我认为侧边栏应该在路由器调用的更大页面视图中初始化。

我也觉得你的邮箱应该是自己的子视图。听起来无论邮件是 yahoo 还是 google，每个邮箱都将具有相同的功能（例如最小化），因此创建该视图类并多次重用它是很有意义的。

那么这个邮箱视图应该采取什么措施呢？（关于收集）

同样，你有选择。放入 1 个包含所有内容的大型集合，或放入代表来自某种帐户的邮件的每个集合...

如果您的集合已经是独立的（例如 1 个用于 Google 邮件，1 个用于 Yahoo 邮件），那么创建子视图并将适当的集合传递给每个子视图将很容易。即使它不是单独的，我也可能会将集合过滤为仅需要的模型，然后再将其作为集合传递。这就是我倾向于的。我假设在每个邮箱视图中，永远不会出现邮箱需要访问与特定帐户无关的任何邮件模型的情况。所以传递任何你不需要的东西是没有意义的。

至于标签，我不确定。我想这取决于你的标签是什么以及如何形成的。例如，您是否有自己的标签模型，它基本上是与邮件 model.id 关联的标签标签？还是标签是您正在采摘的邮件模型的属性？

**更新示例代码 - 专注于通过视图层次结构传递数据**

所以我在这里基本上概述了一种非常常见的在父视图中制作子视图的方法，以及如何通过视图层次结构传递不同的数据（阅读：在你的案例中为集合）。

`[options]`您可以通过简单地重复该模式，利用View 构造函数的参数并通过和传递内容来为更多的子视图执行此操作（例如，每个邮件模型都有自己的代表性子视图作为邮箱视图中的列表项等）在里面接受它。

在这段代码的许多部分，我采取了一种冗长的方法，以便更清楚地了解哪些数据在哪里传递。我稍微更改了您的邮箱模板，只是为了说明如何添加更多子视图，但您当然可以将其更改回来。您对 MailboxView 做什么取决于您，您的代码（取决于您的目标）应该反映这一点。

因此，事不宜迟，这里有一些示例代码供您仔细研究和思考。我把它搅在一起，所以可能会有错误。我实际上并没有看到它是否会执行。

通常在视图中，我们可能会将 view.el 定义为模板中最外层的元素，并且只包含内部部分，但为了与您提供的模板保持一致并减少代码中可能令人困惑的额外内容的数量，我大部分情况下模板都保持原样。

```
// Your templates
<script id="sidebar" type="text/template">

    <div class="sidebar">
    <div class="sidebar-title">Mailboxes</div>
        // Mailbox here
        // Mailbox here
        // Labels  here
    </div>

</script>

// I altered this template slightly just to illustrate a point on appending the model
// view data into your mailbox view. You might not want this but it's just for
// demonstration purposes
<script id="mailbox" type="text/template">
    <div class="sidebar-subtitle">Gmail</div>
    <div class="mailboxes" data-account-id="1">
        <ul class="inbox"></ul>  // Changed this
        <ul class="sent"></ul>
    </div>
</script>

<script id="labelBox" type="text/template">
    <div class="sidebar-title">Labels</div>
        <div class="sidebar-labels">
            <ul>
                <li>Home</li>
                <li>Todo</li>
            </ul>
        </div>
    </div>
</script> 
```

您的应用程序大视图，包含所有内容的主视图。

```
AppView = Backbone.View.extend({
    initialize: function() {
        // You might not instantiate your collections here but it is a good starting
        // point for this demo. We'll be passing these through children view and 
        // utilizing them in the appropriate views.

        // Let's assume these collections we instantiate already have models inside them.

        // Your 3 Collections
        this.gmail = new MailCollection();
        this.yahoo = new MailCollection();
        this.labels = new LabelCollection();

    },
    render: function() {
        this.$el.html();

        // We pass each collection into the SidebarView [options] hash. We can "pick-up"
        // these collections in the sidebar view via this.options.xxx

        // Render the sidebar
        var sidebar = new SidebarView({
            'gmail':this.gmail,
            'yahoo':this.yahoo,
            'labels':this.labels
        });

        // Render the sidebar and place it in the AppView... anywhere really
        // but for simplicity I just append it to the AppView $el
        this.$el.append(sidebar.render().el);

        return this;
    }
}); 
```

您的侧边栏视图：

```
SidebarView = Backbone.View.extend({
    template: _.template($('#sidebar').html()),
    initialize: function() {

        // We passed the 3 collections into Sidebar view and can access
        // them through the options. We could have instantiated them here
        // but I passed them into the side to illustrate that using
        // options for this kind of thing is a-okay.

        this.gmail = this.options.gmail,
        this.yahoo = this.options.yahoo,
        this.labels = this.options.labels

        // This is an array of sub-view mailboxes so when we close this view,
        // it's easy to loop through the subviews and close both mailboxes
        this.mailboxes = [];
    },
    render: function() {
        // We render the sidebarView using the template
        this.$el.html(this.template());

        // We generate the sub-view mailbox views (gmail and yahoo)
        var gmailView = new MailboxView({
            'collection': this.gmail // We pass in only the gmail collection
        });
        var yahooView = new MailboxView({
            'collection': this.yahoo // Pass in the yahoo mail collection
        });
        var labelView = new LabelboxView({
            'collection': this.labels // Pass in the labels collection
        });

        // We push the views into our array
        this.mailboxes.push(gmailView);
        this.mailboxes.push(yahooView);
        this.mailboxes.push(labelView);

        // Render each view and attach it to this sidebar view
        this.$el.append(gmailView.render().el);
        this.$el.append(yahooView.render().el);
        this.$el.append(labelView.render().el);

        return this;
    },
    onClose: function() {
        // Sample code of how we close out child views. When this parent view closes,
        // it automatically cleans up the child views.

        _.each(this.mailboxes, function(view) {
            view.close(); // A special function that I use to close views
        });
    }
}); 
```

有关我使用的方法和方法的更多详细信息，请参阅[Zombie View Cleanup 。](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)一旦您开始在应用程序中创建大量视图/子视图关系，这将特别有用。`onClose()``close()`

您的邮箱视图：

```
MailboxView = Backbone.View.extend({
    template: _.template($('#mailbox').html()),
    initialize: function() {
        // When we pass something in as 'collection' backbone automatically
        // attaches it as a property of the view so you can use the collection
        // as this.collection rather than this.options.collection for
        // convenience
    },
    render: function() {
        this.$el.html(this.template());

        this.loadMail();

        return this;
    },
    loadMail: function() {
        // Some code that loops through your collection and adds the mail to an
        // appropriate DOM element. Would make sense to make Inbox a ul and each
        // mail an li so I altered your template to demonstrate this

        // Let's assume a mail model has the attr 'author' and 'body' in this
        // simple example

        // This will loop through your collection and use a mail template to
        // populate your list with the appropriate data.
        this.collection.each(function(mail) {
            this.$('ul').append(_.template('<li><%=author%><%=body%></li>', mail.toJSON()))
        });

        // Alternatively, you could (and probably should) make each mail model
        // represented by ANOTHER sub-view, a mail subview that has all the
        // functionality that mail views usually have.
        // To accomplish this you just repeat the prior demonstrated cycle
        // of creating child view inside child view, passing in the appropriate
        // data that you need, creating the view, and attaching it to the parent
        // where you would like.
    }
}); 
```

您的标签视图：

```
LabelboxView = Backbone.View.extend({
    template: _.template($('#labelBox').html()),
    initialize: function() {
        // I think you get the gist from above, you'd do the same thing as each
        // mailbox view except deal with the unique aspects of labels, whatever
        // these may be (and do)
    },
    render: function() {
        this.$el.html(this.template());
        return this;
    }
}); 
```

# javascript - Javascript：无法使用 getElementById 获取元素

> ID：12340871
> 
> 赞同：2
> 
> 时间：2012-09-09T16:40:32.930
> 
> 标签：javascript, getelementbyid

好的。我需要新鲜的眼睛，因为我仍然在这个 s***d 问题上一个小时！

这是我的简单 HTML 代码 (testssio.html)，其中包含 javascript 脚本：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        var ssio = document.getElementById('ssio');
        ssio.html = "it finally works!";
    </script>
</head>
<body>
    <div id="ssio"></div>
</body>
</html> 
```

但它不起作用！使用调试器，我得到：

```
Uncaught TypeError: Cannot set property 'html' of null          /testssio/:6 
```

有人明白吗？我知道这不是寻找调试帮助的正确地方，但如果我得不到它，我会发疯的！所以请，有什么帮助吗？

提前说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T16:41:31.027

这样做的原因是头部中的脚本在页面呈现之前加载。这意味着您的内容尚未呈现，因此不是`document`.

如果您想看到这项工作，请尝试将您的脚本移动到元素渲染下方，如下所示：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div id="ssio"></div>
<script type="text/javascript">
    var ssio = document.getElementById('ssio');
    ssio.innerHTML = "it finally works!";
</script>
</body>
</html> 
```

一种更标准化的方法是使用事件。许多人使用[jQuery](http://jquery.com/)，但可以使用纯 js 来完成。这意味着像这样更改您的脚本：

```
<script type="text/javascript">
  function WinLoad() {
    var ssio = document.getElementById('ssio');
    ssio.innerHTML = "It finally works!";
  }
  window.onload = WinLoad;
</script> 
```

这样您仍然可以将其保留在`<head>`.

此外，使用`.html`来自[jQuery](http://jquery.com/)。它通常用作`.html(content)`. 如果您想使用纯 javascript 版本，请使用`.innerHTML = content`.

我之所以提到 jQuery，是因为它是一个高度使用的 API。这句话来自他们的网站：

> jQuery 是一个快速而简洁的 JavaScript 库，它简化了 HTML 文档遍历、事件处理、动画和 Ajax 交互，以实现快速的 Web 开发。jQuery 旨在改变您编写 JavaScript 的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:41:30.497

您的代码在加载 DOM 之前运行得太早，因此`document.getElementById()`尚未在文档中找到该元素。

您可以将脚本标记向下移动到`</body>`标记之前的右侧，也可以等待 DOM 加载，然后使用窗口 onload 事件或 DOMReady 事件运行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T16:44:44.210

这里有两个错误。首先，您需要将 SCRIPT 标签放在元素之后。其次，它不是 .html，而是 .innerHTML。所以这里是更正的代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div id="ssio"></div>
        <script type="text/javascript">
        var ssio = document.getElementById('ssio');
        ssio.innerHTML = "it finally works!";
    </script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:45:45.163

你可以使用这样的东西

```
 <!DOCTYPE html>
    <html>
   <head>
    <script type="text/javascript">
   document.onload= function(){
    var ssio = document.getElementById('ssio');
    ssio.html = "it finally works!";
    }
</script>
</head>
<body>
<div id="ssio"></div> 
```

# python - 如何使pyes搜索方法返回找到的文档的键？

> ID：12340875
> 
> 赞同：4
> 
> 时间：2012-09-09T16:40:36.663
> 
> 标签：python, elasticsearch, pyes

我有一个关于 pyes（ElasticSearch 的 Python API）的问题。

是否可以使搜索方法返回找到的文档的键？

我使用的代码：

```
import pyes
conn = pyes.ES('localhost:9200')
q = pyes.StringQuery("november rain", default_operator="AND")
result = conn.search(query=q, indices=[index])
for r in result:
    print r 
```

**结果：**找到**文档**，没有我保存文档的键（_id 字段）。

问题是**如何返回 _id 键？**

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T17:23:26.157

a 中的所有结果`ResultSet`都只是`ElasticSearchModel`对象。所以你可以像这样通过 DotDict访问`_id`属性`_meta`

```
r._meta.id 
```

`_meta`还包含一些其他有用的信息：

```
(Pdb) pp res._meta
{'connection': <pyes.es.ES object at 0x8268ecc>,
 u'id': u'2',
 u'index': u'twitter',
 'parent': None,
 u'score': 0.095891505000000002,
 u'type': u'tweet'} 
```

有关更多详细信息，请参阅有关[模型](http://pyes.readthedocs.org/en/latest/manual/models.html#pyes-models)和[结果集](http://pyes.readthedocs.org/en/latest/manual/resultset.html#pyes-resultset)的文档。

# git - Bash 脚本、git 和带空格的文件名

> ID：12340877
> 
> 赞同：3
> 
> 时间：2012-09-09T16:41:02.307
> 
> 标签：git, bash

我正在尝试使用 bash 脚本自动化我与 git 的一些交互。为此，我有一个脚本，它将 ssh 并列出所有存储库，然后克隆它们。部分脚本显示在这里

```
DIRS=`ssh $u "ls $p"`;
for DIR in $DIRS; do
    echo "ssh://$u$p$DIR"
    echo "git clone ssh://$u$p$DIR";  
    git clone ssh://$u$p$DIR
done 
```

示例参数是

```
-u user@host 
```

和

```
-p /cygdrive/c/Documents\ and\ Settings/somePath 
```

这适用于名称中包含空格的文件路径，直到 git clone 部分引发关于太多空格的错误。如果我复制并粘贴由

```
echo "git clone ssh://$u$p$DIR"; 
```

然后它克隆就好了。我试图用引号括起来，但它会引发错误

```
does not appear to be a git repository 
```

我究竟做错了什么？

**编辑 1**

使用时的错误`git clone "ssh://$u$p$DIR"`是

```
fatal: '/cygdrive/c/Documents\ and\ Settings/somePath/repo1' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:10:12.557

如果您的目录名称包含空格，您肯定不想这样做：

```
DIRS=`ssh $u "ls $p"`;
for DIR in $DIRS; do 
```

由于您想保留空格而不是将它们用作分隔符，因此普遍接受的这样做方法是告诉 bash 分隔符是换行符：

```
IFS=$'\n'
for DIR in `ssh $u "ls -1 $p"`; do 
```

如果你真的必须有你的变量`DIRS`，你可以使用 bash 的数组变量（这将保留你的空间）：

```
IFS=$'\n'
DIRS=(`ssh $u "ls -1 $p"`)
unset IFS
for DIR in "${DIRS[@]}"; do 
```

另一种通用形式是使用`read`：

```
ssh $u "ls -1 $p" | while read DIR; do 
```

或者：

```
while read DIR; do
    ...
done < <(ssh $u "ls -1 $p") 
```

但是，不建议将这些作为错误处理（尤其是`ssh`当您开始使用管道时会涉及更多。）

到目前为止，一切都只是基本的 bash 脚本。

至于这一行，您需要用双引号将第二个参数括起来，因为其中的空格`$DIR`会产生第三个参数：

```
git clone "ssh://$u$p$DIR" 
```

我在 git 中试过这个，它似乎工作。然而，正如@holygeek 所说，替换空格`%20`似乎也有效，并且在某些情况下可能有益。你可以这样做：

```
git clone "ssh://$u$p${DIR// /%20}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:44:58.963

您的问题几乎可以肯定*是文件名中的空格*。

`find`并且`xargs`可以支持一种特殊模式，在这种模式下，它们使用`\0`（空）字符而不是空格来分隔文件名。

尝试这个：

```
ssh $u find $p -depth 0 -print0 | xargs -0 -J % git clone ssh://$u% 
```

* * *

您可以通过运行轻松调试示例中的脚本

```
bash -x myscript.sh 
```

然后它将在执行之前打印出每个命令行。那应该让您在问题出现之前找到它实际运行的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T23:41:38.373

你有两个问题。一个是你使用`ls`的，它对文件名做了各种奇怪的事情。[不要解析`ls`.](http://mywiki.wooledge.org/ParsingLs) 另一个是你没有在`$u$p$DIR`. **始终在命令替换周围加上双引号**（除非变量的值是由空格分隔的 glob 模式列表，这种情况很少见）。

请注意，通常，`$p`也需要引用。由于它正在通过 ssh，因此您无法避免它在另一端被解释。如果`$p`不包含任何 shell 特殊字符，例如空格，这并不太难。如果是这样，保护它们的最简单方法是`$p`在本地扩展，并在其周围加上单引号。单引号形成远程 shell 的字符串文字，除了 where`$p`包含单引号。这些需要替换为序列`'\''`。Bash 的`${p//PATTERN/REPLACEMENT}`构造解析规则有点奇怪；使用中间变量的两步过程`$q`完成了这项工作。

如果您可以依赖不包含任何换行符的文件名，则可以在远程端每行打印一个文件名。

```
q=\'\\\'\'
ssh "$u" "cd '${p//\'/$q}' && for x in *; do echo \"\$x\"; done" | {
  p=${p%/}
  p=${p//%/%3f}
  case $p in
    /*) :;;
    *) p="/~/$p";;
  esac
  while IFS= read -r DIR; do
    DIR=${DIR//%/%3f}
    git clone "ssh://$u$p/$DIR"
  done
} 
```

请注意，`$p`或`$DIR`将需要在 git `ssh:`URL 中进一步引用某些特殊字符。空格没问题，但`%`至少需要转义到`%3f`. 在上面的代码中，我添加了对它的支持，以及对何时`$p`是相对路径的情况的支持（将相对于主目录进行解释）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:41:32.853

我使用了[Gilles](https://stackoverflow.com/users/387076/gilles)和[Antak 的](https://stackoverflow.com/users/1036728/antak)回答中的信息来找到解决方案以及其他一些[关于在远程机器上运行 ssh](https://stackoverflow.com/questions/305035/how-to-use-ssh-to-run-shell-script-on-a-remote-machine/2732991#2732991%22A%22)和[在 bash heredoc 中使用变量的](https://stackoverflow.com/questions/4937792/using-variables-inside-a-bash-heredoc)帖子。

正如 Gilles 所建议的那样，我避免使用`ls`并且我已经使用 Antak 的建议`IFS=$'\n'` 来避免空格中的多个参数和换行符上的拆分参数。

我确定的最终代码是

```
DIRS=`ssh "$u" << ENDSSH
    cd "$p"
    eval 'for file in *; do echo \\$file; done'
ENDSSH`

IFS=$'\n'
for DIR in $DIRS;
    do
    echo "ssh://$u$p/$DIR"
done
unset IFS 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-09T22:34:09.097

看看用 %20 替换空格是否适合你。

# mysql - 带有 MySql 的实体框架 5 - web.config 所需的连接字符串示例

> ID：12340878
> 
> 赞同：0
> 
> 时间：2012-09-09T16:41:03.023
> 
> 标签：mysql, entity-framework

我只需要一个带有默认 MySQL 开发人员安装的示例。我在 SQLExpress 上工作得很好。这是我的 SQL Express 连接字符串：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

我应该为 MySQL 做些什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:49:05.007

看看这些帖子

*   [将 MySQL 与实体框架一起使用](https://stackoverflow.com/questions/76488/using-mysql-with-entity-framework)
*   [使用 MySQL 设置 .NET MVC3](https://stackoverflow.com/questions/4887372/setting-up-net-mvc3-with-mysql)

希望这可以帮助

# java - 生成与所需密度和峰值负载匹配的日期/时间对象列表

> ID：12340879
> 
> 赞同：1
> 
> 时间：2012-09-09T16:41:04.887
> 
> 标签：java, events, load-testing, scheduler

为了测试带有事件加载的应用程序，我需要一个库，它可以让我

*   指定常规负载，例如 N 个事件/秒，以及每个负载周期的持续时间（以秒为单位）
*   指定峰值负载，例如 M 事件/秒，以及峰值负载的持续时间或峰值负载中要生成的事件数
*   指定峰值数量及其在测试时间间隔上的位置（例如，测试开始后 1、5、7、10 秒的峰值）

或者，最好指定不同的事件类型，并将系统配置为常规负载由 20% 的 A 类事件、40% 的 B 类事件和其余的 C 类事件以及峰值负载组成。

因此，我想获取 java.util.Date 对象列表（理想情况下）或可解析的日期/时间字符串。

是否有现成可用的东西，或者这需要编码？

# perl - Perl：获取不在给定列表中的 IP 地址范围

> ID：12340882
> 
> 赞同：4
> 
> 时间：2012-09-09T16:41:12.400
> 
> 标签：perl, ip-address, perl-module

我正在尝试根据包含一系列 IP 地址的文件创建 IP 地址范围。我要创建的范围是不在文件中的范围。例如，如果我有以下 IP 地址：

```
129.32.0.1
27.45.2.2
129.32.0.2
65.18.2.4 
```

输出应该是`0.0.0.0-27.45.2.1,27.45.2.3-65.18.2.3,65.18.2.5-129.32.0.0,129.32.0.3-255.255.255.255`

我目前所做的是从输入文件中提取 IP 并将它们存储到排序数组（升序）中。

```
#!/usr/bin/perl -w
use strict;                                           
use Sort::Key::IPv4 qw(ipv4sort);                                                          
my $list = 'C:\Desktop\IPs.txt';
my $ipRange;
my @ips;
my $i = 0;

# Get IP Addresses into array
open(FILE, $list);

while (<FILE>) {
    chomp($_);
    $ips[$i] = ($_);
    ++$i;
}

# Sort IP Addresses
my @sorted = ipv4sort @ips;

# Create IP Ranges 
```

我希望 CPAN 上有一些东西可以帮助我。我见过可以确定 IP 地址是否在范围内的模块，但还没有看到任何可以分割范围的模块。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T17:20:17.247

我建议综合[`Net::CIDR::Set`](https://metacpan.org/module/Net::CIDR::Set)模块

此代码似乎提供了您所需要的

```
use strict;
use warnings;

use Net::CIDR::Set;

open my $fh, '<', 'C:\Desktop\IPs.txt' or die $!;

my $range = Net::CIDR::Set->new;
while (<$fh>) {
  chomp;
  $range->add($_);
}
$range->invert;
print $range->as_string(2); 
```

**输出**

```
0.0.0.0-27.45.2.1, 27.45.2.3-65.18.2.3, 65.18.2.5-129.32.0.0, 129.32.0.3-255.255.255.255 
```

# c# - C#中声音文件的频率和幅度

> ID：12340895
> 
> 赞同：3
> 
> 时间：2012-09-09T16:42:14.863
> 
> 标签：c#, audio, frequency, amplitude

我正在尝试创建一个程序，该程序可以获取声音文件（WAV 或 MP3）中的各种“音符”，并可以获得每个音符的频率和幅度。我一直在寻找这个，当然存在区分不是 MIDI 的音乐文件中的单个“音符”的问题，但似乎可以使用 NAudio 或 DirectSound 完成这些方面的事情。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T17:13:54.920

您要求做的事情非常困难。

第一步是将您的音频从时域转换为频域。也就是说，您获取大量样本，并进行傅里叶变换（在您的软件中作为 FFT 实现）。

接下来，您开始决定您将什么称为笔记。这并不像挑选出最响亮的频率那么简单！不同的乐器有不同的音色，这是由各种谐波产生的。如果你有一首只有正弦波的歌曲，这会简单得多。但是，您会发现您会开始看到您的耳朵告诉您它们不存在的音符。

现在，心理声学开始发挥作用。人类完全有可能“听到”甚至没有基本音的音符。在音乐背景下尤其如此。如果我拿起长号开始向下演奏音阶，在某个时候，基本音消失或大部分消失了。但是，您仍然会感觉到音阶在下降，而实际上基本声音几乎消失了。在这一点上事情变得非常棘手。

要回答您的问题，请从 FFT 开始。也许这足以满足您的需求。如果没有，请开始阅读有关该主题的大量技术文献。

# javascript - Internet Explorer 中的 element.dataset

> ID：12340897
> 
> 赞同：3
> 
> 时间：2012-09-09T16:42:40.673
> 
> 标签：javascript, html, internet-explorer, dom

我需要一种列出`data-*`元素属性的方法。我会使用`Object.keys(element.dataset)`，但 IE 9.0 不`dataset`支持。我应该如何以适用于 IE 9.0（和 Chrome、Firefox、Safari）的方式执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T17:06:27.427

`element.attributes`会给你一个`NamedNodeList`元素的所有属性。
只需检查属性名称是否以`data-`

```
var attributes = element.attributes,
    i = attributes.length;

for (; i--; ){
    if (/^data-.*/.test(attributes[i].name)) {
        console.log(attributes[i].name);
    }
} 
```

​<a href="http://jsfiddle.net/Fv6MM/">示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T09:02:58.947

如果使用 jQuery，可以通过 $.data() 方法访问 data-* 属性：http: [//api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-17T15:44:24.083

我需要这个，但也需要访问密钥，所以我根据 Andreas 给出的解决方案编写了一个函数：

```
Element.prototype.dataset_simulated = function(){
  var attributes = this.attributes;
  var simulatedDataset = {};

  for (var i = attributes.length; i--; ){
    if (/^data-.*/.test(attributes[i].name)) {
      var key = attributes[i].name.replace('data-', '');
      var value = this.getAttribute(attributes[i].name);
      simulatedDataset[key] = value;
    }
  }
  return simulatedDataset;
}; 
```

并使用它，而不是做`element.dataset`，你做`element.dataset_simulated()`。

这[是小提琴](http://jsfiddle.net/Fv6MM/31/)

## 编辑：

看来 IE<8 也不支持`Element.prototype`，所以这可以简单地是一个函数，其用法如下`dataset_simulated(elem)`：

```
function dataset_simulated(elem){
  var attributes = elem.attributes;
  var simulatedDataset = {};

  for (var i = attributes.length; i--; ){
    if (/^data-.*/.test(attributes[i].name)) {
      var key = attributes[i].name.replace('data-', '');
      var value = elem.getAttribute(attributes[i].name);
      simulatedDataset[key] = value;
    }
  }
  return simulatedDataset;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T10:41:02.977

您也可以尝试以下方法：

```
[dom_element].getAttribute('[your data-* attribute name]'); 
```

# python - python中的字符串变量比较

> ID：12340898
> 
> 赞同：-5
> 
> 时间：2012-09-09T16:42:43.233
> 
> 标签：python, string

我有 2 个来自 xml 文件的变量；

编辑：***对不起。我粘贴了错误的值 *** x="00 25 9E B8 B9 19 " y="F0 00 00 25 9E B8 B9 19 "

当我使用`if x in y:`声明时，什么都没有发生

但如果我使用`if "00 25 9E B8 B9 19 " in y:`我会得到结果

任何想法？

* * *

我正在添加我的完整代码；

```
import xml.etree.ElementTree as ET

tree =ET.parse('c:/sw_xml_test_4a.xml')
root=tree.getroot()

for sw in root.findall('switch'):

    for switch in root.findall('switch'):

        if sw[6].text.rstrip() in switch.find('GE01').text:
            print switch[0].text

        if sw[6].text.strip() in switch.find('GE02').text.strip():
            print switch[0].text

        if sw[6].text.strip() in switch.find('GE03').text.strip():
            print switch[0].text

        if sw[6].text.strip() in switch.find('GE04').text.strip():
            print switch[0].text 
```

* * *

xml 文件详细信息；

```
- <switch>
  <ci_adi>"aaa_bbb_ccc"</ci_adi> 
  <ip_adress>10.10.10.10</ip_adress> 
  <GE01>"F0 00 00 25 9E 2C BC 98 "</GE01> 
  <GE02>"80 00 80 FB 06 C6 A1 2B "</GE02> 
  <GE03>"F0 00 00 25 9E B8 BB AA "</GE03> 
  <GE04>"F0 00 00 25 9E B8 BB AA "</GE04> 
  <bridge_id>"00 25 9E B8 BB AA "</bridge_id> 
  </switch> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:00:47.470

```
>>> x = "00 25 9E 2C BC 8B"
>>> y = "F0 00 00 25 9E B8 B9 19"
>>> x in y
False
>>> "00 25 9E 2C BC 8B " in y
False 
```

你到底是如何得到结果的？

让我解释一下什么`in`是检查。

`in`正在检查 的整个值`x`是否包含在 的值中的任何位置`y`。如您所见， 的整个值`x`并未全部包含在`y`.

但是，一些元素`x`是，也许你想要做的是：

```
>>> x = ["00", "25", "9E", "2C", "BC", "8B"]
>>> y = "F0 00 00 25 9E B8 B9 19"
>>> for item in x:
    if item in y:
        print item + " is in " + y

00 is in F0 00 00 25 9E B8 B9 19
25 is in F0 00 00 25 9E B8 B9 19
9E is in F0 00 00 25 9E B8 B9 19 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:02:22.427

运算符 in 和 not in 测试集合成员资格。如果 x 是集合 s 的成员，则 x in s 评估为 true，否则为 false。对于字符串，如果整个字符串 x 是 y 的子字符串，则返回 True，否则返回 False。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T18:54:10.927

除了您问题中的值混淆之外，这似乎可以按照您想要的方式工作：

```
sxml="""\
<switch>
  <ci_adi>"aaa_bbb_ccc"</ci_adi> 
  <ip_adress>10.10.10.10</ip_adress> 
  <GE01>"F0 00 00 25 9E 2C BC 98 "</GE01> 
  <GE02>"80 00 80 FB 06 C6 A1 2B "</GE02> 
  <GE03>"F0 00 00 25 9E B8 BB AA "</GE03> 
  <GE04>"F0 00 00 25 9E B8 BB AA "</GE04> 
  <bridge_id>"00 25 9E B8 BB AA "</bridge_id> 
</switch>"""

tree=et.fromstring(sxml)
x="80 00 80 FB 06 C6 A1 2B"    # Note: I used a value of x I could see in the data; 
                               # your value of  x="00 25 9E B8 B9 19 " is not present...

for el in tree:
    print '{}: {}'.format(el.tag, el.text)
    if x in el.text:
        print 'I found "{}" by gosh at {}!!!\n'.format(x,el.tag) 
```

# visual-studio-2010 - MSBuild 是否有类似 lint 的工具？

> ID：12340899
> 
> 赞同：6
> 
> 时间：2012-09-09T16:42:46.657
> 
> 标签：visual-studio-2010, msbuild, msbuild-4.0

我刚刚了解到，Visual Studio 2010 和 MSBuild 在成功执行哪些 vcxproj MSBuild 文件时非常宽容——它们会忽略子任务和单个文件的缺失配置，但仍能成功执行构建任务。然而，这给我带来了问题，因为它导致跨多个配置的构建不一致，而且由于项目文件中的内部不一致，我不一定能在 Visual Studio 的属性视图中编辑它们。

到目前为止，我已经设法通过手动编辑 vcxproj 文件来消除最成问题的不一致，但鉴于此特定解决方案包含 80 多个项目文件，这并不是一个真正可接受的策略。

是否有一种工具可以检查 MSBuild 文件的内部一致性并突出显示缺失的配置，如“您的项目文件说它提供配置 X、Y 和 Z，但文件 X 的自定义构建任务仅支持配置 X 和 Z”？

**更新：**我现在试图解决的具体问题*与*对 vcxproj 文件进行更一般的问题不同的是，某些配置缺少条件。不幸的是，添加和更新条件似乎比我使用查找和替换工具可以安全地完成的要多一点。以编程方式正确执行它很可能需要 DOM 操作，并且鉴于我到目前为止对构建文件的内部结构相当熟悉，因此使用能够进行基本结构 XML 验证的文本编辑器似乎是完成的最快方法手头的任务。

然而，我真正希望看到的是一个工具，它至少可以自动突出这些问题，以减少跟踪它们所花费的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:50:32.637

一般来说，配置是一个 VS 概念。它们不是 MSBuild 内置的，而是使用属性组上的条件特性来实现的。您的项目文件很可能是有效的 MSBuild 项目，但其中一些不使用默认参数构建 - 我建议不要手动编辑它们，但要么

*   使用查找和替换工具来修复它们
*   编写一个使用[Microsoft.Build.Construction](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.aspx) API 来检查和修复项目文件的小应用程序

恐怕没有什么可以为您执行此操作。

# objective-c - 为什么 Xcode 不能从正确导入的标头中识别 typedef？

> ID：12340904
> 
> 赞同：7
> 
> 时间：2012-09-09T16:43:25.503
> 
> 标签：objective-c, ios, typedef

我曾经有一堂课叫`Constants`. 里面是这样的`typedef`：

```
typedef enum visible_thing {

    BACKGROUND,
    BACKGROUND_COLOR,
    MAIN_WINDOW

} VISIBLE_THING; 
```

而我的，生活是美好的！我在需要访问此类型的任何地方都导入了“Constants.h”，并且一切正常。

然后我决定对`Constants`班级进行核弹。我拿了 typedef 并将它放在另一个类中，为了清楚起见，我们称之为`OtherClass`. 我经历并将所有的导入更改`Constants.h`为导入，`OtherClass.h`这就是我所做的一切，我没有触及任何其他代码。现在整个事情都坏了！

完美配合的方法`Constants`现在给了我这个错误：`Parse Issue - Expected a type`. 有没有搞错？我当然希望有人对此有一些线索！

更新：令人沮丧的是，这是似乎在没有解释的情况下自行消失的问题之一。我在下面回答了我自己的问题，我发现一种解决方法需要在一个文件中多次#import-ing 相同的标头。但是今天我删除了额外的#import，一切仍然有效。精氨酸。电脑！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-09T06:52:48.923

我得到了相同的“预期类型”，事实证明它是由导入循环引起的。我用以下简单的例子复制了它：

**啊：**

```
#import "B.h"

typedef enum {
    SomeEnumA
} SomeEnum;

@interface A : NSObject

@end 
```

**乙：**

```
#import "A.h"

@interface B : NSObject

- (void) func:(SomeEnum)arg;

@end 
```

编译器在编译 Am（它只导入 Ah）时抱怨 SomeEnum 在 Bh 中未知。发生这种情况是因为 Ah 导入 Bh 而导入 Ah 不会发生导入循环，因此在这种情况下 Bh 不包括定义类型的 Ah 代码。

通过将枚举的定义移动到单独的 SomeEnum.h 可以轻松解决该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:38:22.720

我可能会尝试弄清楚发生了什么，因为导致这种情况发生的原因可能会在未来导致其他神秘的错误，到那时你可能已经忘记了这一点，这可能会使追查原因变得更加困难未来的错误。

我会尝试隔离问题。您可以尝试的几件事：

*   逐步注释掉 InnerClass 接口中的代码，看看是否可以解决问题。
*   在文件顶部手动添加 typedef 并使用不同的类型名称（并适当地编辑其余代码）以查看问题是否仍然存在。
*   发布您的 .h 文件和 OtherClass.h 文件，看看是否有其他人可以发现问题
*   David H 建议创建一个演示项目，看看是否可以重现问题

我认为这取决于你的项目是什么，如果它只是你想要开始工作的小而快的东西，那可能没关系，但如果它是一个更大的项目并且你预见到你的代码库会扩展，或者如果这也是其他编码人员将要做的事情，我会尝试了解这里发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:06:42.040

产生错误的类里面有另外两个类定义，帮助类只在内部使用。显然这就是问题的根源。

我不知道的是，如果你这样做，如果一个文件中有多个类，你可能需要多次导入同一个标题。

这是我为修复它所做的。我改变了这个：

```
#import "OtherClass.h"

@interface InnerClass

// uses typedef from OtherClass

@end

@interface MainClass

// uses typedef from OtherClass

@end 
```

对此：

```
#import "OtherClass.h"

@interface InnerClass

// uses typedef from OtherClass

@end

#import "OtherClass.h" //<--without this, MainClass won't recognize the typedef 

@interface MainClass

// uses typedef from OtherClass

@end 
```

这看起来很笨重，就像我可能做错了什么，但至少它解决了手头的问题。任何后续评论将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-20T15:14:24.177

我只是在尝试创建一个框架时偶然发现了这个。Xcode 不喜欢将 typedef 定义在接口之上。不知道为什么会这样，但它修复了它。

所以我改变了我的：

```
typedef enum {
   MyOption1,   // option 1.
   MyOption2,   // option 2.
}MyOption;

@interface MyClass : NSObject

@property (strong, nonatomic) NSString *myString;

@end 
```

到：

```
@interface MyClass : NSObject

typedef enum {
   MyOption1,   // option 1.
   MyOption2,   // option 2.
}MyOption;

@property (strong, nonatomic) NSString *myString;

@end 
```

# java - 如何在java中将字符串转换为字节数组

> ID：12340909
> 
> 赞同：-1
> 
> 时间：2012-09-09T16:43:47.473
> 
> 标签：java, string, bytearray, converter

嗨，我有以下字符串

```
 String msg = "9192939495" 
```

我想创建波纹管字节

```
 byte[] texttoprint = {(byte) 0x91, (byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95} 
```

我试试这个

```
public static byte[] hexStringToByteArray(String s) {
    /*String input = "0102FFAB";*/
    byte[] data = new byte[s.length() / 2];

    for( int i = 0; i < s.length(); i+=2)
    {
      data[i/2] = (byte) Integer.decode( "0x" + s.substring( i, i + 2 )  ).byteValue();
    }
    return data;
} 
```

但它不起作用

另外，如何在 Eclipse 日志中打印 texttoprint 以检查一切是否正常？

PS如果我发送到打印机 {(byte) 0x91, (byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95} 一切正常，但如果我发送 hexStringToByteArray 的结果没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:49:49.590

```
static byte[] decode(final String enc) {
  final long val = Long.parseLong(enc, 16);
  final byte[] raw = new byte[] {
    (byte) ((val & 0xff00000000000000L) >> 56),
    (byte) ((val & 0xff000000000000L) >> 48),
    (byte) ((val & 0xff0000000000L) >> 40),
    (byte) ((val & 0xff00000000L) >> 32),
    (byte) ((val & 0xff000000) >> 24),
    (byte) ((val & 0xff0000) >> 16),
    (byte) ((val & 0xff00) >> 8),
    (byte) (val & 0xff)
  };
  final int n = enc.length() >> 1;
  final byte[] trimmed = new byte[n];
  System.arraycopy(raw, 8 - n, trimmed, 0, n);
  return trimmed;
} 
```

您可以打印`Arrays.toString`用于转换为文本形式的值。要验证它们是否相等，请尝试使用`Arrays.equals`.

```
System.out.println(Arrays.equals(texttoprint, hexStringToByteArray("9192939495"))
    ? "success" : "failure"); 
```

# php - XAMPP 与 Apache；.htpassword 密码不会被读取为加密

> ID：12340918
> 
> 赞同：2
> 
> 时间：2012-09-09T16:44:52.473
> 
> 标签：php, apache, .htaccess, xampp

当尝试使用 .htaccess 和 .htpasswd 对页面进行密码保护时，我会转到我保护的页面并输入用户名和密码。问题是我加密的密码不是我必须输入的密码。而是加密的密码。

例如：

```
lol:noitcS2m.5F6. 
```

我`lol`作为用户名和`noitcS2m.5F6.`密码输入，它让我进入。

但是，如果我使用我加密的密码，它就不起作用。谁能向我解释我做错了什么？我安装了 XAMPP 1.8.0、Apache 2.4.2 和 PHP 5.4.4。

我的 .htaccess 文件包括以下内容：

```
AuthType Basic
AuthName "restricted area"
AuthUserFile C:/xampp/htdocs/pass/.htpasswd
require valid-user 
```

它位于`C:/xampp/htdocs/dl/`

此外，如果我`AuthUserFile`是，`/dl/.htpasswd`那么它会给我错误 500。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T13:39:56.230

**万一有人可能需要指导** *（对于 APACHE 2.2 和 GREATER/Current XAMPP）*

转到您的**默认 XAMPP 文件夹**，然后转到**apache/bin/error.log**。该文件包含 localhost 中的 Apache 文件上发生的所有错误 - 它使事情更容易诊断。

示例（我的一个）：

```
[auth_basic:error] [pid 408:tid 1772] [client 127.0.0.1:4077] AH01617: user go_admin: authentication failure for "/HTAccessible/test/London/": Password Mismatch, referer: http://localhost/HTAccessible/test/London/ 
```

再次运行该目录，然后滚动到文件底部以查看显示的错误消息，以便 StackOverflow 可以更好地帮助您。

* * *

**可能的解决方案**

还有[阿兰·蒂姆布洛](https://stackoverflow.com/users/731138/alain-tiemblo)。我最近在 Windows XAMPP 上的 crypt(base64()) 加密方法也遇到了问题——看过 Apache 网站后，也有人建议使用这种方法。

```
'{SHA}' . base64_encode(sha1($password, TRUE)); //which works 
```

或者，您可以打开命令提示符（开始菜单->附件->命令提示符）并执行以下方法（因为您直接使用 Apache，它应该始终正确加密）：

[此处描述的方法适用于 htpasswd](http://www.stabeler.com/blog/487/)

# umbraco - 搜索其内容在与 cmsContentXml umbraco 表不同的表中的节点

> ID：12340919
> 
> 赞同：0
> 
> 时间：2012-09-09T16:45:26.177
> 
> 标签：umbraco, umbraco-ucommerce

我已向 umbraco 添加了一个新部分并将其称为“电子商务”，其中内容管理员可以添加所有公司产品，然后在“内容”部分中，他们创建页面并将其与电子商务部分的产品节点链接。

所有产品详细信息都在电子商务部分创建并保存在 cmsContentXml 表以外的表中。现在，ExamineIndixing 如何索引这些信息并为应该显示这些信息的页面显示正确的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:12:24.940

以下是有关如何索引自定义数据的一些文档和示例项目：[http ://examine.codeplex.com/wikipage?title=Custom%20Indexing&referringTitle=Documentation](http://examine.codeplex.com/wikipage?title=Custom%20Indexing&referringTitle=Documentation)

不过，我不太确定您为什么要在 Umbraco 上编写自己的自定义商务解决方案，因为已经有 3 个功能齐全的商务包，价格不菲（uWebshop、Tea Commerce 和 uCommerce：[http:// /our.umbraco.org/search?q=commerce&content=project](http://our.umbraco.org/search?q=commerce&content=project)）。

# css - 脱节的可点击文本翻转

> ID：12340920
> 
> 赞同：0
> 
> 时间：2012-09-09T16:45:26.717
> 
> 标签：css, rollover, clickable, text-based

我有基于文本的导航。滚动“联系人”会在所有其他菜单按钮上显示地址（层）。我希望电子邮件地址和电话号码是翻转（将颜色从灰色变为红色）以及可点击的链接。问题：推出使地址消失，这是有意的，但无法单击地址/电话链接。如果推出效果（消失）会延迟，它会起作用吗？有唯一的 CSS 解决方案吗？

这是页面： [raphaelzwyer.com/testRapha/rollover_test.html](http://raphaelzwyer.com/testRapha/rollover_test.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>raphaelzwyer</title>
<style type="text/css">
  * {
    margin: 0;
    padding: 0;
    border: none;}
@font-face {
    font-family: 'BotonReg';
    src: url('fonts/BotonReg.eot');
    src: url('fonts/BotonReg.eot?#iefix') format('embedded-opentype'),
    url('fonts/BotonReg.woff') format('woff'),
    url('fonts/BotonReg.ttf') format('truetype'),
    url('fonts/BotonReg.svg#BotonReg') format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant: normal;} 
@font-face {
    font-family: 'BotonMed';
    src: url('fonts/BotonMed.eot');
    src: url('fonts/BotonMed.eot?#iefix') format('embedded-opentype'),
    url('fonts/BotonMed.woff') format('woff'),
    url('fonts/BotonMed.ttf') format('truetype'),
    url('fonts/BotonMed.svg#BotonMed') format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant: normal;}
html, body {
    background-color: #FFFFFF;
    margin-top: auto;
    margin-right: auto;
    margin-bottom: auto;
    margin-left: auto;
    color: #a9a9a9;
    height: 100%;
    width: 100%;
    font-family: "BotonReg", "Courier", "Courier New", "Bookman Old Style", serif;
    font-size: 16px;
    overflow-y: scroll;
    letter-spacing: 0.065em;
    -webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
    font-smooth: 1em;
    text-shadow: 0 1px 1px rgba(255,255,255,.3);}
a {
    text-decoration: none;
    color: #a9a9a9;}
a:hover {
    text-decoration: none;
    color: #be1f2d;}
a:focus {
    text-decoration: none;
    color: #be1f2d;}
li {
    list-style-type: none;
    display: inline;}
.clear {    
    clear: both;}   
#container {
    position: relative;
    top: 0px;
    margin: 0px auto;
    width: 860px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    border: none;}
#topmenu {
    position: relative;
    top: 0px;
    left: 212px;
    width: 660px;
    height: 48px;}
.menubuttons {
    position: relative;
    top: 0px;
    width: 100px;
    height: 36px;
    background-image: url("images/menubg.png");
    background-repeat: repeat-x;
    padding: 10px 0px 0px 0px;
    float: left;}
.menubuttons:hover {
    position: relative;
    top: 0px;
    width: 100px;
    height: 36px;
    background-image: url("images/menubg_h.png");
    background-repeat: repeat-x;
    padding: 10px 0px 0px 0px;
    float: left;}
.menubuttonactive {
    position :relative;
    top: 0px;
    width: 100px;
    height: 36px;
    background-image: url("images/menubg_a.png");
    background-repeat: repeat-x;
    padding: 10px 0px 0px 0px;
    float: left;}
.menubuttonactive a {
    color: #be1f2d;}
#addressbox {
    position: absolute;
    top: 0px;
    width: 548px;
    left: 212px;
    height: 22px;
    background-image: url("images/menubg.png");
    background-repeat: repeat-x;
    padding: 10px 0px 0px 0px;
    letter-spacing: 0.062em;
    text-align: right;
    float: left;
    z-index: 900;}
#addressbox:hover {
    position: relative;
    top: 0px;
    width: 548px;;
    height: 22px;
    background-image: url("images/menubg_h.png");
    background-repeat: repeat-x;
    float: left;
    z-index: 900;
    color: #be1f2d;}
#addressboxbelow {
    position: absolute;
    top: 36px;
    width: 548px;
    left: 212px;
    height: 22px;
    background-image: url("images/menubg_h.png");
    background-repeat: repeat-x;
    text-align: right;
    float: left;
    z-index: 900;}
#contactrollover {
    position: relative;
    top: 0px;
    margin: 0px 0px -36px 0px;
    width: 100px;
    left: 0px;
    float: left;
    z-index: 900;}
#contactrollover div {
    width: 100px;
    height: 50px;
    float: left;}
#contactrollover a span {
    display: none;
    color: #a9a9a9;}
#contactrollover a {
    display: block;}
#contactrollover a:hover span {
  display: block;
  position: absolute;
  top: 0px;
  left: -560px;}
.buttonspaces {
    height: 36px;
    list-style: none;
    float: left;}
  </style>
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>

</head>

<body onload="MM_preloadImages('images/menubg_b.png','images/th_att_b.png','images/th_bmw_b.png','images/th_directv_b.png','images/th_giostra_b.png')">

<div id="container">

<div id="topmenu">
    <ul id="menulist">
        <li class="menubuttonactive"><a href="portfolio.html">portfolio</a></li>
        <li class="buttonspaces"><img src="images/spacer.png" width="68" height="36" alt="spacer" /></li>
        <li class="menubuttons"><a href="about.html">about</a></li>
        <li class="buttonspaces"><img src="images/spacer.png" width="12" height="36" alt="spacer" /></li>
        <li class="menubuttons"><a href="downloads/raphael_zwyer_CV.pdf" target="_new">resume</a></li>
        <li class="buttonspaces"><img src="images/spacer.png" width="180" height="36" alt="spacer" /></li>
        <li id="contactrollover"><div class="menubuttons"><a href="mailto:info@raphaelzwyer.com">contact<span id="addressbox"><p>917-650-9534, info@raphaelzwyer.com<br/ ></p>143 leonard street, apartment 5, brooklyn ny 11206</span></a></div></li>
    </ul> <!-- end of menulist --> 
  </div> <!-- end of topmenu --> 

</div> <!-- end of container -->

<script type="text/javascript" src="js/raphaelzwyer.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:08:24.437

不，没有唯一的 CSS 解决方案可以延迟这一点。但是，如果您不是在 上添加悬停效果，`a`而是在`#contactrollover`. 它现在不起作用，因为 和 之间有`#contactrollover a`空格`#adressbox`。

所以它应该看起来像这样。

```
 #contactrollover:hover span {
  display: block;
  position: absolute;
  top: 0px;
  left: -560px;} 
```

为了在 Internet Explorer 中工作，`:hover`伪类需要在链接上。因此，您可以将 div 更改`#contactrollover`为链接或以其他方式摆脱空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:11:51.050

您所要做的就是在弹出窗口中添加一些填充，这样那里就没有空间了。

```
#contactrollover a:hover span {padding-right: 12px;} 
```

# java - 从 Java 程序编译 C 代码

> ID：12340922
> 
> 赞同：0
> 
> 时间：2012-09-09T16:45:50.980
> 
> 标签：java, c, runtime.exec

我正在尝试使用以下代码使用 Java 程序编译外部 C 程序

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public static void main(String[] args){
    try{
        Runtime rt=Runtime.getRuntime();
        Process pr=rt.exec("cmd /c PATH=%PATH%;c:\\TC\\BIN");
        pr=rt.exec("cmd /c c:\\TC\\BIN\\TCC.exe c:\\TC\\EXAMPLE.c");
        pr=rt.exec("c:\\TC\\EXAMPLE.exe");
        BufferedReader input=new BufferedReader(new InputStreamReader(pr.getInputStream()));
        String line=null;

        while((line=input.readLine())!=null){
            System.out.println(line);
        }
        int exitVal=pr.waitFor();
        System.out.println("exited with error code "+exitVal);
    }
    catch(Exception e){
        System.out.println(e.toString());
        //e.printStackTrace();
    }
}
} 
```

但我得到：

> java.io.IOException: Cannot run program "c:\TC\EXAMPLE.exe": CreateProcess error=2, 系统找不到指定的文件

编译过程不起作用，那么我还能做些什么来编译我的 C 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:51:54.887

请为此使用[Processbuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html) API，文档中有一个如何使用各种标志的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:50:09.243

我认为您在有机会生成之前调用已编译的程序。您应该等待电话：

```
pr=rt.exec("cmd /c c:\\TC\\BIN\\TCC.exe c:\\TC\\EXAMPLE.c"); 
```

在尝试调用编译输出之前完成。

# clojure - 如何在 Leiningen REPL 中热重载文件保存的命名空间

> ID：12340931
> 
> 赞同：13
> 
> 时间：2012-09-09T16:46:31.653
> 
> 标签：clojure, leiningen

使用 leiningen REPL 时，有没有办法让文件或 ns 在文件保存时自动重新加载 repl。目前我通过在 repl - 中键入以下内容来重新加载 ns `(use 'sample.ns :reload-all)`。

但是我可以让它在文件保存时自动重新加载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-07T17:57:31.347

您可以轻松地重用[管道](https://github.com/duct-framework/core/blob/3dc4908902cff81323bee89eaef94012194cbd24/src/duct/core/repl.clj#L31)框架中的代码。

您将只需要[hawk](https://github.com/wkf/hawk)文件观察器。

这是它的样子：

```
(defn- clojure-file? [_ {:keys [file]}]
  (re-matches #"[^.].*(\.clj|\.edn)$" (.getName file)))

(defn- auto-reset-handler [ctx event]
  (binding [*ns* *ns*]
    (clojure.tools.namespace.repl/refresh)
    ctx))

(defn auto-reset
  "Automatically reset the system when a Clojure or edn file is changed in
  `src` or `resources`."
  []
  (hawk.core/watch! [{:paths ["src/" "resources/" "dev/src/" "dev/resources/"]
                 :filter clojure-file?
                 :handler auto-reset-handler}])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-18T12:19:24.987

[Clojure-Watch](https://github.com/derekchiang/Clojure-Watch)库可以满足您的需求。它观察一个文件并执行一些操作。在您的情况下，一个操作是从该文件重新加载命名空间。此外，它需要编写一些初始代码来启动观察者。

这种方式对我来说似乎有点复杂。直接从 Lein 推出的普通 REPL 并不是有效的开发方式。你最好使用一些对 Clojure 友好的编辑器，比如 Emacs 或 Lightable。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-04T13:19:05.373

大多数主要编辑器都支持自定义热键绑定，并且有一个 Clojure 插件，允许您通过网络（通过“nREPL”）连接到活动的 REPL。就个人而言，我使用 vim，因此为此目的使用[vim-fireplace 。](https://github.com/tpope/vim-fireplace)

这意味着您可以使用自定义热键在编辑时重新加载您正在编辑的任何文件。从那里开始，添加一个自定义的 on-save 钩子来重新加载通常是微不足道的。

# php - 替换 mysql 表中 x 和 y 之间的值以及特殊字符

> ID：12340932
> 
> 赞同：0
> 
> 时间：2012-09-09T16:46:33.720
> 
> 标签：php, mysql, regex, replace

我需要从特定的 mysql 列中删除价格信息。价格可以是这种格式 $ 54.99 或 US Dollar 54.99

我已经有一个脚本，可以让我一次替换一个值，例如，我可以用空格替换 $ 54.99，但有数百个不同的值需要替换。我将如何让我的脚本删除所有数字以及美元符号和文本“美元”？

举个例子：我有一个名为 book 的列，典型的行中有这样的文字：“这本书很棒，售价 54.99 美元”

我需要删除“美元”和“54.99”，所以剩下的文字会是：“这本书很棒而且很贵”

我使用的脚本如下所示：

```
// code here
if($showErrors) {
    error_reporting(E_ALL);
    ini_set('error_reporting', E_ALL);
    ini_set('display_errors',1);
}

$MJCONN = mysql_pconnect($hostname, $username, $password) or trigger_error(mysql_error(),E_USER_ERROR);
mysql_select_db($database,$MJCONN);

$table_sql = 'SHOW TABLES';
$table_q = mysql_query($table_sql,$MJCONN) or die("Cannot Query DB: ".mysql_error());
$tables_r = mysql_fetch_assoc($table_q);
$tables = array();

do{
    $tables[] = $tables_r['Tables_in_'.strtolower($database)];
}while($tables_r = mysql_fetch_assoc($table_q));

$use_sql = array();

$rowHeading = ($queryType=='replace') ? 
        'Replacing \''.$search.'\' with \''.$replace.'\' in \''.$database."'\n\nSTATUS    |    ROWS AFFECTED    |    TABLE/FIELD    (+ERROR)\n"
      : 'Searching for \''.$search.'\' in \''.$database."'\n\nSTATUS    |    ROWS CONTAINING    |    TABLE/FIELD    (+ERROR)\n";

$output = $rowHeading;

$summary = '';

foreach($tables as $table) {

    $field_sql = 'SHOW FIELDS FROM '.$table;
    $field_q = mysql_query($field_sql,$MJCONN);
    $field_r = mysql_fetch_assoc($field_q);

    do {

        $field = $column;
        $type = $field_r['Type'];

        switch(true) {

            case stristr(strtolower($type),'char'): $typeOK = true; break;
            case stristr(strtolower($type),'text'): $typeOK = true; break;
            case stristr(strtolower($type),'blob'): $typeOK = true; break;
            case stristr(strtolower($field_r['Key']),'pri'): $typeOK = false; break; // DO NOT REPLACE PRIMARY-KEYS
            default: $typeOK = false; break;
        }

        if($typeOK) { 

            $handle = $table.'_'.$field;
            if($queryType=='replace') {
                $sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = REPLACE('.$field.',\''.$search.'\',\''.$replace.'\')';
            } else {
                $sql[$handle]['sql'] = 'SELECT * FROM '.$table.' WHERE '.$field.' REGEXP(\''.$search.'\')';
            }

            $error = false;
            $query = @mysql_query($sql[$handle]['sql'],$MJCONN) or $error = mysql_error();
            $row_count = @mysql_affected_rows() or $row_count = 0;

            $sql[$handle]['result'] = $query;
            $sql[$handle]['affected'] = $row_count;
            $sql[$handle]['error'] = $error;

            $output .= ($query) ? 'OK        ' : '--        ';
            $output .= ($row_count>0) ? '<strong>'.$row_count.'</strong>            ' : '<span style="color:#CCC">'.$row_count.'</span>            ';
            $fieldName = '`'.$table.'`.`'.$field.'`';
            $output .= $fieldName;
            $erTab = str_repeat(' ', (60-strlen($fieldName)) );
            $output .= ($error) ? $erTab.'(ERROR: '.$error.')' : '';

            $output .= "\n";
        }
    }while($field_r = mysql_fetch_assoc($field_q));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:31:48.860

由于 mysql 没有基于 regex 的内置替换函数，所以你可以在 php.ini 中更好地进行替换。表中只需要一个 id（用于更新查询）。如果还没有，请包括它。

您可能已经在您的脚本中解释了一些内容（我不能很好地理解），但是这个答案只是关于您的问题的文本。希望从您的整个专栏中删除所有价格一次（在哪里找到）会有所帮助。

连接到数据库后，您需要将代码修改为

```
$sql = "SELECT id,book FROM yourtable";    
$result = mysql_query($sql);    
if (!$result) 
{
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) 
{
    echo "No rows found, nothing to print so am exiting";
    exit;
}

while ($row = mysql_fetch_assoc($result))
{
    $id = $row['id'];
    $book= $row['book'];
    //$pat='/(\$|(US Dollar)) \d+(\.\d+)?/';
    $pat = '/\$|(page)|(US)|(dollar)|(\d+)|~|\.|(sterling)/i';
    if(preg_match($pat, $book))
    {
       $book= preg_replace($pat, '', $book);
       $sql = "UPDATE yourtable set book='".$book."' where id='".$id."'";
       mysql_query($sql);
    }
} 
```

**编辑**更改了响应您的评论的模式（$pat 的值）。编辑2：现在也添加了“页面”，我上次错过了

# android - 将数据从 BroadcastReceiver 类传递到 Android Activity

> ID：12340934
> 
> 赞同：8
> 
> 时间：2012-09-09T16:47:18.400
> 
> 标签：android, android-activity, sms, broadcastreceiver

我正在开发一个 Android 应用程序，它有一个功能，当应用程序运行时，如果我收到一条新的 SMS 消息，则需要使用 TextToSpeech 读取该消息的内容。我知道如何使用 TextToSpeech 阅读文本。我在我的应用程序上写了两个类。一种是 MainActivity 扩展自 Activity，另一种是 SmsReceiver 扩展自 BroadcastReceiver。当 MainActivity 运行时收到短信时，我想使用 SmsReceiver 获取短信的内容并将其传递给 MainActivity，然后使用 TextToSpeech 在 MainActivity 中读取它。如何将短信内容从 SmsReceiver 传递到我的 MainActivity。我的 SmsReceiver 类的副本粘贴在下面。

```
public class SmsReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    //this stops notifications to others
    this.abortBroadcast();

    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();   
    SmsMessage[] msgs = null;
    String from = null;
    String msg= null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();
            from = msgs[i].getOriginatingAddress();
            str += " :";
            str += msgs[i].getMessageBody().toString();
            msg = msgs[i].getMessageBody().toString();
            str += "\n"; 
        }
        System.out.println("from "+from);
        System.out.println("msg "+msg);
        Toast.makeText(context, "SMS Received : ",Toast.LENGTH_LONG).show();

        //continue the normal process of sms and will get alert and reaches inbox
            this.clearAbortBroadcast();
        }
} 
```

}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-09T00:35:32.420

使用界面是一种对我有用的解决方案。

在您的**BroadcastReceiver**中放入以下内容

```
public interface OnSmsReceivedListener {
    public void onSmsReceived(String sender, String message);
} 
```

然后添加监听器

```
private OnSmsReceivedListener listener = null; 
```

然后向 BroadcastReceiver 添加一个方法..

```
public void setOnSmsReceivedListener(Context context) {
    this.listener = (OnSmsReceivedListener) context;
} 
```

然后在你的 onReceive 方法中你可以做这样的事情......

```
if (listener != null) {
    listener.onSmsReceived(sender, msg);
} 
```

在创建和注册 BroadcastReceiver 的活动中，通过实现 OnSmsReceivedListener 接口开始，然后执行以下操作

```
public class SomeActivity extends Activity implements OnSmsReceivedListener.....

private MissedCallActivity receiver; 
```

在 onCreate 方法中添加

```
receiver = new MissedCallActivity();
receiver.setOnSmsListener(this); 
```

然后覆盖接口使用的方法。

```
@Override
public void onSmsReceived(String sender, String message) {
    //Insert your text to speech code here
} 
```

这应该够了吧。

另外，不要忘记在 onResume() 方法中注册您的接收器并在 onPause() 方法中取消注册它。另外，看看“来自”如何以蓝色突出显示？这意味着它是 Java 语法的一部分，不能用作变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:53:51.033

您可以使用意图传递数据。

在您的 BroadcastReceiver 中，创建一个 Intent：

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.putExtra("msgContent", msg);
i.putExtra("sender",from);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // adding this flag starts the new Activity in a new Task 
startActivity(i); 
```

然后在另一个活动中，您可以获得这些值，例如：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String messageContent = extras.getString("msgContent");
    String messageSender = extras.getString("sender");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-03T11:34:04.307

我们可以使用 LocalBroadcastManager 将数据从 onReceive 发送到另一个活动。这意味着您再次使用上下文广播数据

@Override public void onReceive(Context context, Intent intent) {

```
Log.d("Broadcast", "wifi  ConnectivityReceiver");

        Bundle extras = intent.getExtras();
        Intent intent = new Intent("broadCastName");
        // Data you need to pass to another activity
        intent .putExtra("message", extras.getString(Config.MESSAGE_KEY)); 
        context.sendBroadcast(intent ); 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-23T08:30:04.213

使用 CONTEXT 和 INTENT 参数`onReceive()`

```
public class MissedCallActivity extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
            intent.putExtra("Number", Var_Number);
            intent.setClass(context, ReadContactsActivity.class);
            context.startActivity(intent);
    }
} 
```

# c++ - 消除这个 goto 语句

> ID：12340935
> 
> 赞同：1
> 
> 时间：2012-09-09T16:47:23.313
> 
> 标签：c++, c

正在从 ACM 编程竞赛档案中搜索并找到椰子程序的解决方案：它有一个 goto，我该如何消除它？是否有模板或程序可以遵循。谢谢

```
/*
1997 East-Central ACM regional programming contest
Held on November 8, 1997
Coconuts, Revisited -- Problem 3
Sample solution by Ed Karrels, Ed@tool.com
November 1997
*/
#include <stdio.h>
/* return 1 if this number of coconuts can be divided up
properly between this number of people */
int SplitCoco(long n_coco, long n_people) {
long i;
for (i=0; i<n_people; i++) {
/* check that the coconuts divide by the number of people
plus one remainder */
    if (n_coco % n_people != 1) return 0;
    /* remove 1 for the monkey, and one person's share */
        n_coco = n_coco - 1 - (n_coco / n_people);
    }
    /* check that the remaining coconuts divide evenly among
    the people */
    return (n_coco % n_people) == 0;
}

int main() {
    long n_coco;
    long n_people;
    long i, j, k;

    FILE *inf = stdin;
    while (fscanf(inf, "%ld", &n_coco), n_coco!=-1) {
    /* starting at the # of coconuts-1, count down until
    a number of people is found that works */
        for (n_people=n_coco-1; n_people > 1; n_people--) {
            if (SplitCoco(n_coco, n_people)) {
                 printf("%ld coconuts, %ld people and 1 monkey\n",
                 n_coco, n_people);
                 goto found;
                 /* OK, so yea, I put a 'goto' in my code :-)
                it was quick and it works. I don't do
                it often, I swear. */
            }
        }
     /* if no number of people greater than 1 works, there is
     no solution */
        printf("%ld coconuts, no solution\n", n_coco);
        found:
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T16:49:42.837

在您的情况下，您可以制定一个单独的例程来计算`while`并`goto found`用`return`.

通常，您可以将每个 goto 替换为一个标志和一些 while 循环。这不会使代码更易于阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T16:57:06.360

代替

```
goto found; 
```

和

```
 break; 
```

代替

```
 printf("%ld coconuts, no solution\n", n_coco); 
```

和：

```
if(n_people <= 1)
    printf("%ld coconuts, no solution\n", n_coco); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T17:25:16.357

另一个答案已经暗示了这一点，但也暗示它的可读性较低——我不同意——我发现它读起来就像它的意思。无论喜欢与否，它都值得作为一种可能的解决方案进行说明。

我的解决方案需要一个布尔类型的定义。我假设了 C99`<stdbool.h>`定义（或 C++ 编译）

这只是外部 while 循环的主体：

```
 bool found = false ;
    for (n_people=n_coco-1; n_people > 1 && !found; n_people--) 
    {
        found = SplitCoco(n_coco, n_people)
        if( found ) 
        {
            printf("%ld coconuts, %ld people and 1 monkey\n", n_coco, n_people);
        }
    }

    if( !found ) 
    {
        /* if no number of people greater than 1 works, there is no solution */
        printf("%ld coconuts, no solution\n", n_coco);
    } 
```

在某些情况下，额外的每循环测试可能会令人望而却步，但我建议在大多数情况下它是微不足道的。

# google-apps-script - 使用 google-apps 脚本的 Soap 服务调用操作失败并显示 500 错误代码

> ID：12340938
> 
> 赞同：2
> 
> 时间：2012-09-09T16:47:39.820
> 
> 标签：google-apps-script

我正在尝试使用 Google App 脚本调用 WebserviceX 提供的 GetWeather 肥皂服务，并在运行脚本时收到以下错误：

```
Request failed for http://www.webservicex.net/globalweather.asmx returned code 500\. Server response: <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>System.Web.Services.Protocols.SoapException: Server was unable to process request. ---&gt; System.Data.SqlClient.SqlException: Procedure or function 'getWeather' expects parameter '@CountryName', which was not supplied. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at WebServicex.GlobalWeather.GetWeather(String CityName, String CountryName) --- End of inner exception stack trace ---</faultstring><detail /></soap:Fault></soap:Body></soap:Envelope> (line 12) 
```

我已经检查了 GetWeather SOAP 服务的 SOAP 请求中预期的参数，但我无法了解导致问题的肥皂请求中的哪个元素。以下是相同的脚本代码：

```
function testSoapSerivce() {
var wsdl2 = SoapService.wsdl("http://www.webservicex.net/globalweather.asmx?WSDL");
  Logger.log(wsdl2.getServiceNames());
  var weatherService=wsdl2.getService("GlobalWeather");
    var param2 = [ "GetWeather",
                { "xmlns" : "http://www.webservicex.net/" },
                [ "CityName", "New Delhi" ],
                [ "CountryName", "India"],  
              ];
  var envelope2 = weatherService.getSoapEnvelope("GetWeather", param2)
  Logger.log(envelope2);
  var result2 = weatherService.GetWeather(param2);
 Logger.log(result2.toXmlString());
} 
```

GetWeather 服务详情可在以下链接中找到：

[http://www.webservicex.net/ws/WSDetails.aspx?CATID=12&WSID=56](http://www.webservicex.net/ws/WSDetails.aspx?CATID=12&WSID=56)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:34:11.497

在您的代码段中，您似乎添加了一个逗号到多个逗号。不用最后一个试试 最后一个`"India"],];`在数组中定义了一个空索引。

我已经查看了 webservicex 站点。实际上有一种更简单的方法来获取数据。该站点还提供 HTTP GET 服务

```
HTTP GET

The following is a sample HTTP GET request and response. The placeholders shown need to be replaced with actual values.

GET /globalweather.asmx/GetWeather?CityName=string&CountryName=string HTTP/1.1
Host: www.webservicex.net
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.webserviceX.NET">string</string> 
```

为什么不使用 UrlFetch 服务？

# ios - iOS：是否使用单例访问 sqlite 数据库

> ID：12340942
> 
> 赞同：0
> 
> 时间：2012-09-09T16:47:58.313
> 
> 标签：ios, database, sqlite, singleton

我有一个应用程序，其中一个简单的表存储在一个*常见*的sqlite 数据库中。该应用程序有一个`mainview`和其他几个视图说，`view1, view2, ....,viewN`。从 a ，用户通过以下代码部分`mainview`转到：`view1`

```
screen.modalTransitionStyle=UIModalTransitionStyleCoverVertical;
        [self presentModalViewController:screen animated:YES]; 
```

在`view1`，用户会访问数据库，做一些事情，然后更新数据库，相当`view1`回到`mainview`：

```
[self dismissModalViewControllerAnimated:YES]; 
```

用户将对其他视图执行相同的操作，即访问数据库、执行操作、更新数据库，然后返回`mainview`.

我的问题是在我的情况下我应该如何组织数据库，使用单例创建一个公共对象来打开数据库`mainview`，然后所有视图都将访问数据库，更新它或者每个视图将打开数据库，访问它，然后单独更新还是有其他有效的方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:26:38.107

当您描述您的应用程序的结构仅为一个线程时 - 使用单例是完全可以的。您只需要在应用程序启动时打开一次数据库，并确保在应用程序结束时关闭它，甚至在应用程序进入后台时关闭它（当然，当您从后台返回时也需要打开数据库）

顺便说一句，我还尝试为每个视图打开和关闭数据库 - 这也很好。在这种方法中，我有时也会使用“脏”标志，该标志设置为指示数据库在关闭之前需要更新 - 但结果证明这对性能没有影响。

除了使用单例，您还可以使用类变量或在您的应用程序委托中声明它，这通常用于核心数据的上下文（在您的情况下，核心数据中的“上下文”类似于数据库）

无论您使用哪种方法，重要的是您的数据库将始终处于一致状态，因为您的应用程序可能会被例如电话“中断”。

顺便说一句，如果情况允许，我倾向于在 iPhone 上更频繁地使用核心数据，因为核心数据会处理许多数据库问题——只有在一致状态下保存才需要明确完成。但这真的取决于您的数据是更大的数据库还是只是“一些”持久对象/属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:11:45.683

我建议避免调用 SQLite DB 的 c 级代码 - 尝试对 SQLite 进行简单的包装 - 请参阅[https://github.com/JohnGoodstadt/EasySQLite](https://github.com/JohnGoodstadt/EasySQLite)

当您“连接”到它时，它使用一个单例：

```
self.db = [DBController sharedDatabaseController:@"MyDB.sqlite"]; 
```

然后任何文件都可以访问共享单例 - 例如

```
int personCount = [_db  ExecuteScalar:@"SELECT count(*) FROM person" asInt:YES];

DataTable* table = [_db  ExecuteQuery:@"SELECT firstname,lastname FROM person"];

for (NSArray* row in table.rows)
{
   NSString* firstname = row[0];
   NSString* firstname = row[1];
   ...
} 
```

# macos - 实际/常驻内存大于 XCode Instruments 报告的分配

> ID：12340943
> 
> 赞同：2
> 
> 时间：2012-09-09T16:47:59.327
> 
> 标签：macos, cocoa, memory-management, xcode-instruments

我有点迷路了。我正在编写一个小应用程序，它在第一步中加载了一堆数据并将它们放入数据库中。

对于数据库中的每个条目，我都会创建一个新对象，希望从弧线中释放它:-)。

仪器工具显示我的应用程序实际上有 5-6 mb 的生活分配。但是活动监视器说我实际上正在使用 100 mb 的“物理”（真实）内存？

我怎样才能减少100 MB？您看到的内存泄漏只有 100 kb，这不是原因！？

## 仪器显示 5.67Mb 'Live'

![仪器](../Images/2a62d302b21a50e422b48c93204bbcee.png)

## 活动监视器显示 98Mb 实际内存

![活动监视器](../Images/8b8fb39b2b13e8a0178310eaa1ae36f9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T17:21:10.197

简短的回答是——*别担心——100Mb 并不多*。

您需要在这里了解的主要内容是“真实”或*常驻*RAM 与分配的 RAM 完全不同。如果您分配大量 RAM，它们可能会链接，但您没有。

**为什么他们不一样？**

*   取消分配（或垃圾收集）的 RAM 通常不会返回给操作系统，因此仍然可以“驻留”一段时间。

    **在您的情况下，这很可能是罪魁祸首**- 将数据库加载到分配的大量内存（1Gb 临时）中一段时间​​，然后释放它，在您的进程中留下大量 RAM。

    请注意，在*垃圾收集*（包括*ARC*）中，为对象分配的内存空间可以比它曾经持有的对象存活更长的时间 - 例如，如果您分配并立即释放 10000 个 1K 对象，您可能会发现您的真实 RAM 必须增加 10Mb，甚至尽管在任何时候都只使用了 1K 的数据。这是因为垃圾收集被推迟到程序运行循环的特殊清理阶段。

*   驻留 RAM 只能在 4Kb 页面中请求，这意味着即使分配 1 字节，也可能分配多达 4Kb 的驻留 RAM。通常 malloc 会尝试在同一个 4k 页面上放置多个分配，但您会看到由于碎片而导致的一些损失。

*   分配的当前未使用的 RAM 可以分页到磁盘，因此不再驻留

*   该应用程序包括一些（可能*很多*）不是由 malloc“分配”的内存，这包括：

    *   应用程序二进制 - 代码和数据
    *   应用程序库 - 在私有或共享 RAM 中
    *   堆栈
    *   其他共享内存
    *   可能是图形区域（例如 X11）、打开的文件缓冲区和 mmap（取决于我们认为“分配”的内容。

    *   适用于台式机或笔记本电脑；对于嵌入式设备来说很多，而对于手机或平板电脑则取决于。

# ruby - Ruby 每个循环变量替换

> ID：12340945
> 
> 赞同：0
> 
> 时间：2012-09-09T16:48:28.877
> 
> 标签：ruby, substitution

我正在尝试将所有值设置为 0，但第 3 行 ( `send(x)`) 给我带来了问题。对我来说似乎正确，但不起作用。`x`是 Power 中列的汽车和名称。有小费吗？

```
<% @cars.each do |x| %>
  <% @power = Power.find_by_user_id(@user) %>
  <% @power.send(x) = 0 %>
  <% @power.save %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:53:59.360

假设`@cars`包含 的列名`Power`，则需要`send`setter 方法（即以 a`=`结尾）。您还需要确保将符号传递给`send`.

```
@cars.each do |x|
  @power = Power.find_by_user_id(@user)
  @power.send(:"#{x}=", 0)
  @power.save
end 
```

您需要在循环中设置或保存也没有明显的原因`@power`，因此它可能会更好：

```
@power = Power.find_by_user_id(@user)
@cars.each do |x|
  @power.send(:"#{x}=", 0)
end
@power.save 
```

# java - 在 Java 中写入二进制文件

> ID：12340954
> 
> 赞同：0
> 
> 时间：2012-09-09T16:49:50.880
> 
> 标签：java, binary

我正在尝试将大量数据写入二进制文件。因为它是大量数据，所以快速完成这一点很重要，我希望能够将数据一个一个地写入整数。我尝试过`RandomAccessFile`,等`BufferedWriter`，`DataOutputStream`但所有这些都太慢或无法写入整数。有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T16:54:38.947

如果您编写正确的代码将整数转换为字节，则每个流都可以“写入整数”。

Java 中的两个“快速”IO 选项位于使用NIO 缓冲区`BufferedOutputStream`之上。`FileOutputStream``FileChannel`

如果您所写的只是很多很多`int`值，您可以使用`IntBuffer`实例将数据传递给`fileChannel`.

此外，“一次一个”通常与“快速”不兼容。迟早，数据必须以块的形式传输到磁盘。如果您将少量数据强制到磁盘，您会发现该过程非常缓慢。例如，您可以将整数值添加到缓冲区并在缓冲区填满时写入缓冲区，然后重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:54:29.127

看看`java.nio`包装。您将找到可用于所需目的的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T17:03:35.790

好吧，一次写入一个 int 文件并不是一种天生的快速操作。即使使用 bufferedwriter，您也可能会进行大量函数调用（如果您没有将缓冲区设置得足够大，可能仍会进行大量文件写入）。

您是否尝试过将整数放入数组中，使用 ByteBuffer 将其转换为字节数组，然后将字节数组写入文件？

# google-apps-script - 关于活动用户范围和脚本授权的说明

> ID：12340955
> 
> 赞同：0
> 
> 时间：2012-09-09T16:49:59.080
> 
> 标签：google-apps-script

我有一个带有 UI 应用脚本的电子表格。该应用程序从电子表格中读取/更新。

我当前的设置是：以“我”的身份执行应用程序。

谁有权访问该应用程序：“任何人”。

我本质上是通过电子邮件发送具有任务的工作流。这些电子邮件可以在域之外，但都是 gmail 地址。

我曾希望我能够访问 Session.getActiveUser() 因为我需要根据访问 UiApp 的用户在应用程序上允许某些功能。除非我以脚本所有者身份登录，否则该函数似乎不提供任何信息。从不同地址访问时，Session.getActiveUser() 为空白。

有没有办法让活动用户不必以“用户访问应用程序”的身份执行应用程序。我宁愿不必与所有最终用户共享电子表格。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:45:35.320

活动用户和财产之类的电子邮件等。无法通过公共 google 帐户访问。它可以通过您自己域中的谷歌应用程序帐户访问和使用。请参阅[http://www.google.com/intl/en/enterprise/apps/business/pricing.html](http://www.google.com/intl/en/enterprise/apps/business/pricing.html)

否则，这只是网络上的一个隐私点。我可以想象有点令人失望，但如果你仔细想想，这是合乎逻辑的。

我确实有另一个提示给你。看看这个链接[http://shop.oreilly.com/product/0636920023210.do](http://shop.oreilly.com/product/0636920023210.do) O'reilly 还实现了一个工作流系统。它使用 url 参数来传递电子邮件（身份）信息。不是很安全，但结合 Utilities.DigestAlgorithm SHA 编码，您可以采取措施对您的 url 电子邮件参数进行编码。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:00:48.133

*从注释中重写以提高可读性：*

在这种情况下共享电子表格并不意味着只要电子表格的网址仍然未知，任何人都可以直接将电子表格作为文档打开。如果您将应用程序部署为“访问 webapp 的用户”，则该应用程序确实需要访问它，但除非您发布它，否则没有人可以找到工作表的 url。我经常使用此配置，但当然我不知道您的确切用例... ;-) 在我的情况下，应用程序本身决定了特定用户可以做什么（通过启用/禁用某些功能/面板取决于登录的用户。

[这是一个像这样的应用程序的例子](https://script.google.com/macros/s/AKfycbxquizfGo85vdeaN7_qss2-LY--UxSLFFeF5ML5rXPWZfrX9oNt/exec)，你能找到源电子表格吗？

我的电子表格有“任何知道链接的人”，因此应用程序可以对其进行读写，但电子表格的名称及其网址是未知的（我除外），因此即使用户“它也永远不会出现在用户的文档列表中”通过 webapp 在文档中写入”某些内容（因为他从未真正“打开”它）。我检查了不同的帐户，从未发现任何异常。

# c# - 根据鼠标位置设置 WinForms 文本框的 SelectionStart

> ID：12340957
> 
> 赞同：2
> 
> 时间：2012-09-09T16:50:09.087
> 
> 标签：c#, winforms, winapi

如何根据鼠标位置设置 WinForms TextBox 的 SelectionStart？我正在扩展 TextBox 并希望在用户右键单击 TextBox 时将 carot 设置在鼠标点下方的位置（即与左键单击相同的行为）。

到目前为止，这是我的 OnMouseDown 覆盖：

```
protected override void OnMouseDown(MouseEventArgs e) {
    if (e.Button == System.Windows.Forms.MouseButtons.Right) {
        this.Focus();
        //if we have a range of text selected, leave it
        if (this.SelectionLength == 0) { 
            //set the SelectionStart here based on the mouse location in the MouseEventArgs e         
        }
        //...
    } else
        base.OnMouseDown(e);
} 
```

我已经使用[SetCaretPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648405%28v=vs.85%29.aspx)（例如`SetCaretPos(e.Location.X, e.Location.Y);`）进行了调查，但无法使其工作（我看到插入符号有片刻，但它只是一个闪光并且不会影响 SelectionStart）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:59:00.277

尝试这样的事情：

```
this.SelectionStart = this.GetCharIndexFromPosition(e.Location); 
```

# ruby-on-rails - rails 3，有什么方法可以将行标识符（或查询参数）添加到 submit_tag？（如何识别正在提交的行？）

> ID：12340960
> 
> 赞同：0
> 
> 时间：2012-09-09T16:50:46.927
> 
> 标签：ruby-on-rails, forms, form-submit

什么是'rails way'让每行都有一个带有submit_tags的表单，其中submit_tag'告诉'控制器点击了哪一行的提交？

在 form_tag 中，我的表单显示了一个用户列表，每个用户旁边都有几个操作，例如“foo”和“bar”。

目前，我对这些操作使用 link_to，它添加了一个查询参数`:row => this_row.guid`，因此我的控制器知道要对哪一行执行操作。它可以工作，但我不喜欢在 url 上暴露查询参数，我不喜欢它们在 URL 上的持久性，因此如果用户单击刷新，它会再次执行操作。

由于显示的行已经在表单中，我希望每个操作都是 submit_tag。但是我从 API 文档中看不到有任何方法可以向 submit_tag 的每个实例添加不同的查询参数。

当我尝试这个时：

```
= submit_tag "foo", {:row => this_row.guid}
= submit_tag "bar", {:row => this_row.guid} 
```

html看起来像`<input .... row='SOMEGUID' ...>`

但是 POSTed 参数不包括 :row 查询参数

我也试过

```
= submit_tag "foo", params.merge(:row => this_row.guid)
= submit_tag "bar", params.merge(:row => this_row.guid) 
```

具有相同的结果（包括 row=GUID，但是当用户单击提交按钮时，该参数不会发布到控制器）。

对于如何让多行提交按钮（用户可以看到相同的名称）也可以将行标识符传递给控制器​​，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:54:22.760

提交按钮的值也作为参数发送。检查您的日志。

更新

添加行 id 作为提交按钮的数据属性：

```
= submit_tag "bar", {:data => {:row => this_row.guid}} 
```

然后，当单击提交按钮时，它应该在提交之前将行 ID 添加为表单中的隐藏字段。

```
$('input[type="submit"]').click(function(){
  $('form').append('<input type="hidden" name="row" value="' + $(this).data('row') + '" />');
}); 
```

# c++ - exp() 函数的浮点实现是否等效于截断的泰勒级数展开？

> ID：12340964
> 
> 赞同：2
> 
> 时间：2012-09-09T16:51:13.687
> 
> 标签：c++, cmath, exp, taylor-series

cmath 中 exp() 函数的浮点实现是否等同于截断的高阶泰勒级数展开？我们应该记住的一个可能的错误来源是表示答案的位数的有限性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:26:34.320

> cmath 中 exp() 函数的浮点实现是否等同于截断的高阶泰勒级数展开？

相当于？是的。那是因为任何体面的实现`exp()`都有一半 ULP（最低精度单位）左右的误差。忽略有限精度算术的问题，人们总是可以构造一个截断的泰勒级数来做同样的事情。

然而，没有一个像样的实现`exp()`会使用泰勒展开。那将非常非常慢，并且不会达到所需的准确性。这将是一个彻头彻尾的愚蠢实施。更好的是利用 2 ^x和 e ^x之间存在强关系的事实，以及考虑到浮点数的 2 表示的几乎普遍的幂，2 ^(x相当容易计算的事实。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T20:46:06.663

只是一个如何计算 exp (x) 的示例：

如果 x 很大，则结果为 +inf。如果 x 非常小，则结果为 0。

令 k = 圆形 (x / ln 2)。然后 exp (x) = 2^k * exp (x - k ln 2)。2^k 很容易计算。一个小问题是计算 x - k ln 2 没有任何舍入误差。这很简单：让 L1 = ln 2 四舍五入为 35 位，并且 L2 = ln 2 - L1。k 是一个较小的整数，所以 k * L1 没有舍入误差，x - k * L1 也没有；然后我们减去 k * L2，它很小，因此舍入误差很小。

为了更快地做到这一点（没有除法），我们计算 k = round (x * (1 / ln 2))。我们检查 x 是否接近于零，因此不需要整个计算。无论如何，我们现在计算 exp (x)，结果在 sqrt (1/2) 和 sqrt (2) 之间。

您可以使用泰勒多项式计算 exp (x)。相反，您可能会使用切比雪夫多项式以低得多的程度最小化截止误差。稍加小心，您可以找到一个截断误差远小于结果最低位的多项式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T17:35:23.977

它取决于编译器、C 运行时和处理器的实现。然而，计算指数的人不太可能使用泰勒展开，因为存在更好的方法。

根据 glibc，它可以使用自己的实现，在评论中说明了这一点（来自 sysdeps/ieee754/dbl-64/e_exp.c）：

```
/* An ultimate exp routine. Given an IEEE double machine number x          */
/* it computes the correctly rounded (to nearest) value of e^x             */ 
```

或者它可以使用硬件支持的处理器指令进行浮点计算，就像 x86 FPU 一样。在这两种情况下，您都可能得到一个完全精确的正确舍入值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:54:59.910

这取决于您使用的 C 库实现。在过于流行的 glibc 中，它不是。

# javascript - 伪造画布——这行得通吗？

> ID：12340965
> 
> 赞同：2
> 
> 时间：2012-09-09T16:51:17.393
> 
> 标签：javascript, canvas, prototype

我试图“伪造”一个画布，意图将这个假画布交给一个可能是任意的框架，以对所有线条、曲线和 moveTo 进行后处理。

为了解决这个问题，我尝试了这个代码，它确实有效，但我想知道这个幸运镜头有多少运气。

```
(function(){
    function DebugCanvas(){
        this._dom = document.createElement( 'canvas' );
        addPropertiesToObject.call( this, this._dom );
        this._fakeContext = null;
    }

    Object.defineProperties( DebugCanvas.prototype, 
    {   
        'constructor' : {
            'value' : DebugCanvas,
            'enumerable' : true
        },

        'getContext' : {
            'value' : function( which ){
                var ctx;
                if( which == '2d' ){
                    if( this._fakeContext == null ){
                        this._fakeContext = new FakeContext( this._dom );
                    }
                    ctx = this._fakeContext;
                } else {
                    ctx = this._dom.getContext( which );
                }
                return ctx;
            },
            'enumerable' : true
        }
    }
);

function FakeContext( debugCanvas ){
    this._debugCanvas = debugCanvas;
    this._realContext = debugCanvas._dom.getContext( '2d' );
    addPropertiesToObject.call( this, this._realContext );
}

Object.defineProperties( FakeContext.prototype, {
    'toString' : {
        'value' : function(){
            return '[Object FakeContext]';
        },
        'enumerable' : true
    },

    'canvas' : {
        'get' : function(){
            return this._debugCanvas;
        },
        'set' : function( c ){ return },
        'enumerable' : true
    }
});

function addPropertiesToObject( from ){
    var description, obj;

    for( var prop in from ){
        obj = from;
        do {
            if( obj.hasOwnProperty( prop ) && 
                !this.constructor.prototype.hasOwnProperty( prop ) ){

                try{
                    description = Object.getOwnPropertyDescriptor( obj, prop );
                    Object.defineProperty( this.constructor.prototype, prop, description );
                } catch( err ){
                    this[ prop ] = from[ prop ]; 
                }
                break;
            }
        } while( obj = Object.getPrototypeOf( obj ) );
    }
};
})() 
```

基本思想是将所有 canvas'、canvas.prototypes'（所有链向上）、contexts' 和 context.prototypes' 属性复制到假对象的原型中，只要它们不存在于那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:04:21.117

在 javascript 中，您可以自由地构造一个与原始对象具有所有相同属性/方法的替换对象，并使用它来代替原始对象。方法调用或属性访问将是相同的任何一种方式，调用代码通常不会知道其中的区别。这有时在 javascript 中是一件非常有用的事情。

像这样的替换更复杂的部分是模拟所有方法和属性的实际行为，以便您传递给它的代码按您的意愿工作。但是，如果你能成功地做到这一点，它应该可以正常工作。没有运气 - 只要您对方法/属性的模拟是正确的，这应该可以工作。

# javascript - 如何使用 jQuery .each 循环删除特定元素？

> ID：12340969
> 
> 赞同：0
> 
> 时间：2012-09-09T16:51:38.063
> 
> 标签：javascript, jquery, dom, each

假设我有一个 HTML 文档，其中包含：

```
<form id = "my_form">
    <input type = "text" />
    <input type = "text" />
    <input type = "text" />
    <button type = "button" onclick = "removeGoodInputs()">Do the job</button>
</form> 
```

我想摆脱满足某些条件的输入值（在我的 JS 中给出）。我尝试创建我的`removeGoodInputs()`函数（如下所示），但这会删除表单中的所有输入。我该如何解决这个问题？

```
function removeGoodInputs() {
    $("#my_form input").each(function() {
        if(this.attr("value") == 10)
            $(this).remove();
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:54:17.470

`attr`是 jQuery 对象的方法之一，你应该先将 DOM 对象转换`this`为 jQuery 对象，然后使用 jQuery 方法，`$(this).attr("")`你也可以使用`val`获取/设置表单控件值的方法而不是`attr`你不需要`each`，你可以使用`Attribute Equals Selector`：

```
function removeGoodInputs() {
    $("#my_form input[value='10']").remove();
} 
```

`$("#my_form input[value='10']")`选择其值为 的输入`10`。

*   [值（）](http://api.jquery.com/val/)
*   [属性等于选择器](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:58:33.497

解决此问题的另一种方法是使用[`.filter` *^([docs])*](http://api.jquery.com/filter/)：

```
$("#my_form input").filter(function() {
    return this.value === '10';
}).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T16:53:59.830

```
function removeGoodInputs() {
 $("#my_form input").each(function() {
  if($(this).val() == 10) $(this).remove();
 });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:54:51.593

`.attr()`是一个 jQuery 方法，所以它只能在 jQuery 对象上调用。此外，在 jQuery`.val()`中是获取值的更简单方法（快捷方式）。

因此，这行代码不正确：

```
if(this.attr("value") == 10) 
```

我会推荐：

```
if (this.value == "10")      // plain javascript 
```

或者：

```
if ($(this).val() == "10")   // jQuery 
```

请注意，我还将比较更改为字符串，因为这是`.value`返回的内容，最好不要依赖自动类型转换。

你可以在这里看到它的工作：http: [//jsfiddle.net/jfriend00/HMemp/](http://jsfiddle.net/jfriend00/HMemp/)

# c# - 如何使用 C# Linq 获取特定类型的对象？

> ID：12340971
> 
> 赞同：0
> 
> 时间：2012-09-09T16:51:45.760
> 
> 标签：c#, linq, generics, inheritance, polymorphism

我有持有根对象的通用列表意味着我有：

```
public class Component  
{  
}  

public class DBComponent : Component  
{  
}  

private List<Component> components; 
```

我想使用 Linq 获取仅包含 DBComponent 引用的列表。意思是这样的：

```
List<DBComponent> dbComponents = components.FindAll(c => c is DBComponent); 
```

但是，它似乎不起作用
请有人提供有效的 Linq 代码吗？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T16:52:51.637

您正在寻找

```
IEnumerable<DBComponent> dbComponents = components.OfType<DBComponent>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T16:57:29.590

```
List<DBComponent> dbComponents = components.OfType<DBComponent>().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T16:53:02.153

可能是这样的，即使您的代码*似乎*也是有效的。

```
var result = components.Where(c => (c as DBComponent)!=null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T16:53:20.050

```
components.OfType<DBComponent>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T00:02:42.727

您应该使用[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)或[Cast](http://msdn.microsoft.com/en-us/library/bb341406.aspx)方法。关键区别在于`Cast`，如果 Enumerable 包含任何无法转换为目标类型的元素，则会引发异常。`OfType`不会抛出此异常，而只是跳过这些类型的元素。

在不同的场景下，这两种方法都可以派上用场，因此您可以自行选择。我想，如果您只想按某种类型过滤您的 Enumerable，`OfType`那就是您所需要的。

# objective-c - 故事板 UIViewController 没有出现

> ID：12340974
> 
> 赞同：0
> 
> 时间：2012-09-09T16:51:55.113
> 
> 标签：objective-c, uistoryboard

我最近开始使用故事板。我有主视图控制器，它必须通过代码调用另一个视图控制器。

在情节提要中，我创建了一个从第一个控制器到第二个控制器的“segue”，标识符为“segueToSignSelection”。

在主视图控制器中，当我需要调用第二个视图控制器时，插入以下代码：

```
[self performSegueWithIdentifier:@"segueToSignSelection" sender:self]; 
```

调用此方法：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"segueToSignSelection"])
    {

    signSelectionViewController = (SignSelectionViewController*)[segue destinationViewController];

    [self presentModalViewController:segue.destinationViewController animated:YES];

    [segue.destinationViewController test];

    }
} 
```

在第二个控制器中，调用测试方法。但是视图没有出现。可能是什么问题呢？

谢谢

# google-app-engine - 每个 GAE 实例都有自己的内存缓存吗？

> ID：12340976
> 
> 赞同：1
> 
> 时间：2012-09-09T16:52:01.457
> 
> 标签：google-app-engine, memcached

我想知道每个 GAE 实例是否都有自己的内存缓存，以及从一个实例缓存的数据是否可以从另一个实例访问？或者如果它再次需要一个新的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T17:05:34.677

不，memcache 不是每个实例，它对您的应用程序是全局的。所以是的，每个实例都可以独立于实例访问内存缓存。

# php - 有带有文本和复选框的 HTML 表单 - 如何将复选框响应发布到 Mysql 表

> ID：12340977
> 
> 赞同：0
> 
> 时间：2012-09-09T16:52:02.120
> 
> 标签：php, mysql, html, checkbox

我有一个带有几个不同文本和复选框字段的 HTML 表单。我将文本字段发布到正确的表格，但复选框响应根本没有发布（打算发布到单独的表格）。

**这是我的 HTML 表单：**

```
 <!Doctype html>
    <html>
    <?php include 'C:\xampp\htdocs\paxdb\head.php'; 
    include 'config/menu.php';?> 
    <div id="dataentry">
    <!--This section is the demographic text field area-->
    <form method="post" action="dataentered.php">
    First Name:&nbsp;<input type="text" id="First_Name" name="First_Name"/></br>
    </br>
    Last Name:&nbsp;<input type="text" id="Last_Name" name="Last_Name"/></br>
    </br>
    E-mail:&nbsp;<input type="text" id="email" name="email"/></br>
    </br>

    <!--This section is the age range checkbox selection area-->
    <p><u><b>Age Range</b></u></p>
    <input type="checkbox" name="age[]" id="20-25" value="1"/>&nbsp;20-25</br>
    <input type="checkbox" name="age[]" id="26-30" value="1"/>&nbsp;26-30</br>
    <input type="checkbox" name="age[]" id="31-35" value="1"/>&nbsp;31-35</br>
    <input type="checkbox" name="age[]" id="36-40" value="1"/>&nbsp;36-40</br>
    <input type="checkbox" name="age[]" id="41-45" value="1"/>&nbsp;41-45</br>
    </div>

<p><u><b>What City or region would you like to visit in the US or Canada?:</b></u></p>
<textarea name="comment2" rows="4" cols="50"></textarea>

<?php include 'footer.php';?>       
        </div>
    </body>
</html> 
```

**这是我正在尝试的 PHP 代码，但只有文本字段有效：**

```
<html>
<?php
$host="localhost";
$username="someusername";
$password="somepassword";
$dbname="somedbname";

$dbc = mysql_connect($host, $username, $password, $dbname);
if (!$dbc)
{
    die('Error connecting to MySQL server' . mysql_error());
    }
mysql_select_db($dbname, $dbc);

//send pax data to pax database table
$first_name=$_POST['First_Name'];   
$last_name=$_POST['Last_Name'];
$email=$_POST['email'];

mysql_query("INSERT INTO pax (First_Name, Last_Name, email)
VALUES('$first_name','$last_name','$email')"); 

//send age checkbox data to age database table
$age = $_POST['age'];
foreach($age as $range) mysql_query("INSERT INTO age ($age) VALUES ('$range')") or die (mysql_error());

mysql_close($dbc); 
```

**任何帮助表示赞赏。**

**编辑澄清一下：** mysql表'age'有以下字段：age_id（键），pax_id（表格开头的文本字段数据的索引），20-25 26-30等通过年龄范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:57:05.770

在您尝试实际运行 mysql 查询之前，您应该进行测试以确保您正在构建的查询中包含正确的信息。

你可以做这样的事情来快速检查：

```
foreach($age as $range) {
    print "INSERT INTO age ($age) VALUES ('$range')";
} 
```

此外，您不应该将`$_POST`数据直接粘贴到查询中，有人可以轻松地将 SQL 代码写入字段并删除您的数据库。查找“mysql输入卫生”的话题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T18:31:52.297

我已经为你编辑了代码

```
<!Doctype html>
<html>
<?php include 'C:\xampp\htdocs\paxdb\head.php'; 
include 'config/menu.php';?> 
<div id="dataentry">
<!--This section is the demographic text field area-->
<form method="post" action="dataentered.php">
First Name:&nbsp;<input type="text" id="First_Name" name="First_Name"/></br>
</br>
Last Name:&nbsp;<input type="text" id="Last_Name" name="Last_Name"/></br>
</br>
E-mail:&nbsp;<input type="text" id="email" name="email"/></br>
</br>

<!--This section is the age range checkbox selection area-->
<p><u><b>Age Range</b></u></p>
<!-- Change your checkbox value -->
<input type="checkbox" name="age[]" id="20-25" value="20-25"/>&nbsp;20-25</br>
<input type="checkbox" name="age[]" id="26-30" value="26-30"/>&nbsp;26-30</br>
<input type="checkbox" name="age[]" id="31-35" value="31-35"/>&nbsp;31-35</br>
<input type="checkbox" name="age[]" id="36-40" value="36-40"/>&nbsp;36-40</br>
<input type="checkbox" name="age[]" id="41-45" value="41-45"/>&nbsp;41-45</br>
</div>

<p><u><b>What City or region would you like to visit in the US or Canada?:</b></u></p>
<textarea name="comment2" rows="4" cols="50"></textarea><br/>
<input type="submit" name="submit" value="Submit"/>
<?php include 'footer.php';?>       
</div>
</body>
</html> 
```

您不能像在 INSERT 语句中所做的那样将数组（$age）直接插入数据库......我所做的解决方案之一是将数组转换为字符串，然后将其插入数据库，如图所示......

```
<?php
$host="localhost";
$username="someusername";
$password="somepassword";
$dbname="somedbname";

$dbc = mysql_connect($host, $username, $password, $dbname);
if (!$dbc)
{
    die('Error connecting to MySQL server' . mysql_error());
}
mysql_select_db($dbname, $dbc);

//send pax data to pax database table
$first_name=$_POST['First_Name'];   
$last_name=$_POST['Last_Name'];
$email=$_POST['email'];

mysql_query("INSERT INTO pax (First_Name, Last_Name, email)
VALUES('$first_name','$last_name','$email')"); 

//send age checkbox data to age database table
$age = $_POST['age'];
$my_range = "";
foreach($age as $range)
$my_range = $my_range . $range . " ";
//You have written this query wrong
mysql_query("INSERT INTO age(age) VALUES ('$my_range')") or die (mysql_error());

mysql_close($dbc); 
```

从数据库中检索它时，您可以使用 expode() 来获取每个年龄范围......这是示例代码

```
$range_string = "20-25 26-30 31-35";
$range_array = explode(" ", $range_string);
echo $range_array [0]; // 20-25
echo $range_array [1]; // 26-30
echo $range_array [2]; // 31-35 
```

您可能还想查看[http://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)以获取有关复选框的一些信息...

希望这可以帮助

# ruby-on-rails - Unexpected memcache GETs in rails 3.2 app

> ID：12340985
> 
> 赞同：1
> 
> 时间：2012-09-09T16:53:49.280
> 
> 标签：ruby-on-rails, caching, memcached, ruby-on-rails-3.2

My rails 3.2 app is trying to fetch values from the cache (memcached via dalli) that I'm not expecting it to be caching. It's not getting any cache hits, but I'm puzzled about what is going on. This happens with `config.action_controller.perform_caching = true` on production as well as development, using WEBrick.

Here's a snippet of what I'm seeing in memcache verbose output:

```
<30 GET https://www.myrailsapp.com/?
>30 Writing an error: Not found
>30 Writing bin response:
>30   0x81 0x00 0x00 0x00
>30   0x00 0x00 0x00 0x01
>30   0x00 0x00 0x00 0x09
>30   0x00 0x00 0x00 0x00
>30   0x00 0x00 0x00 0x00
>30   0x00 0x00 0x00 0x00
<30 Read binary protocol data:
<30    0x80 0x00 0x00 0xd0
<30    0x00 0x00 0x00 0x00
<30    0x00 0x00 0x00 0xd0
<30    0x00 0x00 0x00 0x00
<30    0x00 0x00 0x00 0x00
<30    0x00 0x00 0x00 0x00 
```

Note that there is only a cache GET and I'm not seeing any cache writes.

I see similar cache GET attempts for all my actions, most of which are JSON API calls. All of them result in a cache miss. Like this,

```
<31 GET https://www.myrailsapp.com/api/somecall?param1=foo&param2=bar
>31 Writing an error: Not found 
```

I have not specified any `caches_action` directives anywhere in my app.

Is this a rails bug?

If no, where should I look to stop these unnecessary cache GETs?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T13:36:07.733

As per cswilliams on the Github thread you've posted:

It appears to be an issue with the `rack_cache` being enabled by default (since updated in the master branch).

Disabling it in your application or environments properties file (e.g., config/environments/development.rb) seems to resolve the issue:

```
config.action_dispatch.rack_cache = false 
```

# node.js - 如何使用 MustacheJS 忽略标签

> ID：12340986
> 
> 赞同：4
> 
> 时间：2012-09-09T16:53:48.690
> 
> 标签：node.js, mustache

通过尝试构建小部件模块，我目前面临 MustacheJS 模板的问题。

事实上，我两次使用我的 html 模板：

*   服务器解析 html 模板并使用服务器数据呈现它
*   由服务器构建的客户端下载页面（因此已经由服务器端的 mustache 渲染），我想在 ajax 请求之后在浏览器中应用第二个 Mustache 渲染。

但问题是，由于服务器端的变量为空，因此模板 html 不会在客户端呈现......

```
<!-- Rendered on server side -->
<div class="content noise">
    <h4>{{widget.title}}</h4>
    <p>Issues from {{widget.github.author}}/{{widget.github.repo}}</p>
    <div class="issues"></div>
</div>

<!-- I want to render this only on client side -->
<script type="text/template" id="issueTemplate">
{{#links}}
    <a href="{{url}}" {{#selected}}class="Selected"{{/selected}}>{{{name}}}</a>
{{/links}}
</script> 
```

这里 issueTemplate 是空的，因为 {{links}} 在服务器端是空的。

在客户端，我尝试这样的事情，并用“[[”替换“{{”标签，但它没有效果：

```
self.mu = _.clone(Mustache) ;
self.mu.tags = ['[[', ']]'] ; 
```

那么您是否知道如何从渲染中忽略标签，例如“脚本”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T03:12:27.150

在 Mustache 中，您可以使用`{{= ... =}}`标签动态更改标签分隔符；您可以通过选择文字中不存在的分隔符来使用它来创建文字部分。因此你可以做类似的事情

```
<!-- Rendered on server side -->
<div class="content noise">
  <h4>{{widget.title}}</h4>
  ...
<!-- I want to render this only on client side -->

{{={{{ }}}=}}
<!-- Now only triple braces will be interpreted as tags on the server side -->
<!-- Double braces will be passed through literally -->

<script type="text/template" id="issueTemplate">
{{#links}}
...
{{/links}}
</script>

{{{={{ }}=}}}
<!-- Now double braces delimit tags again if you need to do more server-side rendering--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T09:58:47.890

可能这不是最好的解决方案，但是如果您在服务器端替换为正确的值，它就可以工作。IE

```
{{#links}}
{{/links}} 
```

你想在服务器端忽略，创建元素

```
{{Sublink}}
{{ClSublink}} 
```

在服务器端用“链接”替换这个值

```
Sublink = {{#link}}
ClSublink = {{/links}} 
```

它有效，对我来说，使用三重大括号不起作用:(，但这种方式效果很好。

# jsf - Richfaces 3.3.3 文件上传失败 - 出现错误：（OS 10054）现有连接被远程主机强行关闭

> ID：12340988
> 
> 赞同：1
> 
> 时间：2012-09-09T16:53:53.273
> 
> 标签：jsf, richfaces, jsf-1.2

我们为 JBoss 应用程序服务器设置了前端 Apache Web 服务器。我们的环境是 Myfaces 1.2.6 with Tomahawk, Ricfaces 3.3.3

请注意，**仅从我们的其中一个客户端网络**上传失败仅适用于**大**文件。（**有时**超过 50-100MB会失败，超过 200MB**总是会**失败）

前端 apache Web 服务器中的日志显示：

```
 x.x.x.x - - [09/Sep/2012:11:45:49 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4986
 x.x.x.x - - [09/Sep/2012:11:45:50 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4986
 x.x.x.x - - [09/Sep/2012:11:45:51 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4986
 x.x.x.x - - [09/Sep/2012:11:45:17 -0400] "POST /myapp
/ui/home.faces?_richfaces_upload_uid=0.9487435704432351&
actionForm:upload=actionForm:upload&_richfaces_upload_file_indicator=true&
AJAXREQUEST=actionForm:j_id45760 HTTP/1.1" 200 - 
```

JBoss AS 控制台中的错误是：

```
2012-09-10 12:21:34,796 ERROR [org.apache.myfaces.shared_tomahawk.renderkit.html.HtmlGridRendererBase] (ajp-0.0.0.0-8009-1) Wrong columns attribute for PanelGrid headerTableId: -2147483648
2012-09-10 12:22:21,981 ERROR [org.apache.myfaces.lifecycle.PhaseListenerManager] (ajp-0.0.0.0-8009-2) Exception in PhaseListener RESTORE_VIEW 1 beforePhase.
org.ajax4jsf.exception.FileUploadException: IO Error parsing multipart request
    at org.ajax4jsf.request.MultipartRequest.parseRequest(MultipartRequest.java:388)
    at org.richfaces.component.FileUploadPhaselistener.beforePhase(FileUploadPhaselistener.java:63)
    at org.apache.myfaces.lifecycle.PhaseListenerManager.informPhaseListenersBefore(PhaseListenerManager.java:73)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:93)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:76)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
    at org.apache.myfaces.webapp.MyFacesServlet.service(MyFacesServlet.java:103)

    at com.mycom.myapp.FacesErrorHandlingServlet.service(FacesErrorHandlingServlet.java:44)

    at sun.reflect.GeneratedMethodAccessor580.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:275)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:307)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:301)
    at sun.reflect.GeneratedMethodAccessor461.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:275)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:307)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:248)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)

    at com.mycom.myapp.FacesSessionFilter.process(FacesSessionFilter.java:57)
    at com.mycom.myapp.SessionFilter.doFilter(SessionFilter.java:133)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:275)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:307)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:248)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:367)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at sun.reflect.GeneratedMethodAccessor279.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:275)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:307)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:248)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at sun.reflect.GeneratedMethodAccessor254.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:275)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:307)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:248)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:436)
    at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.io.IOException: Request data cannot be read
    at org.ajax4jsf.request.MultipartRequest.readData(MultipartRequest.java:341)
    at org.ajax4jsf.request.MultipartRequest.readNext(MultipartRequest.java:210)
    at org.ajax4jsf.request.MultipartRequest.parseRequest(MultipartRequest.java:382)
    ... 101 more 
```

我不确定 1\. 该客户端网络中的防火墙是否会出现此问题或 2\. apache / jboss 配置（请求超时等） - 但随后从其他国家网络上传作品。

只是添加一个关于 Richfaces fileupload 组件客户端行为的注释：它正在尝试多次上传同一个文件。这从进度条中可以明显看出，它尝试上传一些字节，失败，再次从头开始，再次失败......这种模式也与 apache 服务器日志匹配，如下所示。最后，经过 5-10 次尝试，上传失败并显示“发生传输错误”。

```
x.x.x.x - - - [09/Sep/2012:13:51:52 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4986

x.x.x.x - - - [09/Sep/2012:13:50:59 -0400] "POST /myapp
/ui/home.faces?_richfaces_upload_uid=0.21159051128917716&
actionForm:upload=actionForm:upload&_richfaces_upload_file_indicator=true&
AJAXREQUEST=actionForm:j_id437 HTTP/1.1" 200 -

x.x.x.x - - - [09/Sep/2012:13:51:53 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:51:55 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x -- - [09/Sep/2012:13:51:56 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:51:57 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:51:58 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:51:59 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:00 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:01 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:02 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:04 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:05 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:06 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:07 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:08 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:09 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:10 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:12 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:13 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:14 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:15 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:16 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984

x.x.x.x - - - [09/Sep/2012:13:51:53 -0400] "POST /myapp
/ui/home.faces?_richfaces_upload_uid=0.21159051128917716&
actionForm:upload=actionForm:upload&_richfaces_upload_file_indicator=true&
AJAXREQUEST=actionForm:j_id437 HTTP/1.1" 200 -

x.x.x.x - - - [09/Sep/2012:13:52:17 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:18 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:19 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x -- - [09/Sep/2012:13:52:21 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:22 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x -- - [09/Sep/2012:13:52:23 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:24 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:25 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:26 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:27 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:29 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:30 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:31 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:32 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:33 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:34 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:35 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:37 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - - [09/Sep/2012:13:52:38 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984

x.x.x.x -- - [09/Sep/2012:13:52:16 -0400] "POST /myapp
/ui/home.faces?_richfaces_upload_uid=0.21159051128917716&
actionForm:upload=actionForm:upload&_richfaces_upload_file_indicator=true&
AJAXREQUEST=actionForm:j_id437 HTTP/1.1" 200 -

x.x.x.x - - - [09/Sep/2012:13:52:39 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984
x.x.x.x - - [09/Sep/2012:13:52:40 -0400] "POST /myapp/ui/home.faces HTTP/1.1" 200 4984 
```

请分享我可以尝试的任何指示或解决方法，这将非常有帮助。

**@update**：使用调试日志运行 apache 后，错误日志显示单个大小为 200MB 的文件的上传。在这种情况下，碰巧上传了**5 次尝试，在每次尝试中，错误消息都是**

> [client xxxx] (OS 10054)一个现有的连接被远程主机强行关闭。: core_output_filter: 将数据写入网络

，但最后上传失败。请分享在哪里解决此问题的任何想法。

```
[Thu Sep 13 01:52:54 2012] [info] removed PID file C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/httpd.pid (pid=8060)
[Thu Sep 13 01:55:57 2012] [notice] Apache/2.2.22 (Win32) mod_jk/1.2.31 configured -- resuming normal operations
.
.
.
[Thu Sep 13 01:55:57 2012] [notice] Child 7864: Acquired the start mutex.
[Thu Sep 13 01:55:57 2012] [notice] Child 7864: Starting 64 worker threads.
[Thu Sep 13 01:55:57 2012] [notice] Child 7864: Starting thread to listen on port 80.
[Thu Sep 13 01:58:19 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network
[Thu Sep 13 02:00:45 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network
[Thu Sep 13 02:01:20 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network
[Thu Sep 13 02:02:10 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network
[Thu Sep 13 02:02:47 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network
[Thu Sep 13 02:03:19 2012] [info] [client x.x.x.x] (OS 10054)An existing connection was forcibly closed by the remote host.  : core_output_filter: writing data to the network 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:28:59.043

我们不使用`richfaces`但`trinidad`它是另一个 JSF 组件库。

有一个配置定义了可以上传的文件大小，如下所示：

```
<context-param>
    <!-- Maximum disk space per request (in bytes) -->
    <param-name>org.apache.myfaces.trinidad.UPLOAD_MAX_DISK_SPACE</param-name>
    <!-- Use 5,000K -->
    <param-value>15360000</param-value>
</context-param> 
```

您可以在此处指定可以支持的文件大小。**寻找类似的配置`richfaces`。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:41:51.630

找到以下解决方案，希望对某人有所帮助。非常感谢大家的回复。

使用端口 80 和 HTTP，Web/URL 过滤设备正在停止文件传输。解决方案是将基于 HTTP 的门户从端口 80 更改为 8080。

或者如果站点要在端口 80 上运行，请将站点更改为安全 (https)

# mod-rewrite - 本地主机中的 mod_rewrite 帮助

> ID：12340989
> 
> 赞同：1
> 
> 时间：2012-09-09T16:53:57.427
> 
> 标签：mod-rewrite, xampp, localhost

我有一个带有 xampp 的本地网站，我想将此 url 转换`localhost/mysite/frontend/article.php?article_id=something`为`localhost/mysite/frontend/article_id/something`。我使用此重写规则

```
RewriteRule ^([A-Za-z0-9-]+)/?$ article.php?article_id=$1 [L] 
```

但这是不对的。有人可以帮忙吗。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:03:21.660

尝试这个：

```
RewriteBase /mysite/frontend/
RewriteRule ^([A-Za-z0-9-]+)(/(.*?))?/?$ article.php?$1=$3 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T17:03:30.417

对于 http://localhost/mysite/frontend/article_id/something 如果 .htaccess 在 mysite 目录中并且某些内容被忽略

```
RewriteRule ^frontend/([^/]+)/ /mysite/frontend/article.php?article_id=$1 [L] 
```