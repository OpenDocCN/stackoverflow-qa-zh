# StackOverflow 问答 10109000-10109999

# c# - SqlParameterCollection 只接受非空的 SqlParameter 类型对象。参数名称：值

> ID：10109003
> 
> 赞同：0
> 
> 时间：2012-04-11T15:23:52.323
> 
> 标签：c#, sql, sql-server

我有一个将数据保存到数据库的注册页面，唯一的问题是当我单击注册按钮时出现错误，我不太确定如何解决，请参见下文。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T15:26:24.050

您声明`param[]`有 6 个元素，但您只使用了 5 个。最后一个是`null`这样，您在 for 循环的最后一次迭代中收到错误，您将元素添加到`SqlParameterCollection`.

执行以下操作会比声明数组、填充数组、然后尝试复制数组更干净/更容易：

```
cmd.Parameters.AddWithValue("@Name", name);
cmd.Parameters.AddWithValue("@Gender", gender);
cmd.Parameters.AddWithValue("@Age", age);
cmd.Parameters.AddWithValue("@Address", address);
cmd.Parameters.AddWithValue("@Email", email); 
```

# php - 一次进行多项 PayPal 交易

> ID：10109007
> 
> 赞同：7
> 
> 时间：2012-04-11T15:24:01.170
> 
> 标签：php, html, paypal

是否有任何 PayPal API 可以一次处理多笔交易？我正在创建一个网站，客户可能希望从不同的供应商那里购买多个商品。目前我已经设置了我的网站购物车将客户重定向到每个供应商的 PayPal，但我可以看到这可能会将客户赶走。我环顾四周，但还没有找到任何关于此的信息。

任何有关教程或 API 的信息将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T02:04:38.693

贝宝绝对支持这一点。事实上，它提供了多种产品来做到这一点。
这些是您可以查看的产品：

1.  贝宝自适应并行支付
2.  PayPal 自适应链式支付
3.  PayPal Express Checkout 并行付款

所有这些都支持具有多个接收器的单个结帐流程。
Adaptive 和 Express Checkout 之间的基本区别在于，如果您选择 Adaptive API，您以后可以轻松更改为 Chained Payments。

另一方面，如果您将 Express Checkout 与 Parallel Payments 集成，您可以使用内置的 Mobile Express Checkout，它会自动为移动设备提供移动大小的结帐页面，并且 Express Checkout 支持“行项目”（项目结帐页面上显示的详细信息），而 Adaptive Payments 目前没有。

[https://www.x.com/developers/paypal/products/adaptive-payments](https://www.x.com/developers/paypal/products/adaptive-payments)
[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

[https://www.x.com/developers/paypal/products/express-checkout](https://www.x.com/developers/paypal/products/express-checkout)
[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPParallelPaymens](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPParallelPaymens)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:27:36.673

据我所知，PayPal 不支持这一点。如果您希望事务是伪同时的，您可以使用 cURL-Multi： http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)并异步处理事务。它仍然是单独的交易，但它会更快。

# php - php中关于密码字段的正则表达式

> ID：10109009
> 
> 赞同：1
> 
> 时间：2012-04-11T15:24:05.393
> 
> 标签：php, regex

我需要一个允许用户在字段中插入密码的正则表达式。但唯一允许的正则表达式是 [A-Za-z0-9] ok，还有 "space"、"."、"_"、"-"。怎么可能允许我列出的特殊字符，但不强制用户使用它？另一方面，禁止所有其他特殊字符。

是否可以？

使用此代码检查密码的质量，但不足以达到我的目标，因为我无法管理特殊字符：

```
 else if ($check_strength && (!preg_match("/[0-9]/", $newpwd) || !preg_match("/[^A-Za-z0-9]/", $newpwd))) {
            $rcmail->output->command('display_message', $this->gettext('passwordweak'), 'error');
        } 
```

我已经用这个解决了我的问题：

```
"/^[A-Za-z0-9\.\-\_]+$/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:28:42.783

如果我理解正确，这个正则表达式会这样做：

```
/^[a-zA-Z \._\-]+$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:29:17.683

```
echo preg_match("/^[A-Za-z0-9 ._-]+$/", '-a. s_d'); // 1 
```

或更缩写：

```
echo preg_match("/^[\w .-]+$/", '-a. s_d'); // 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:31:07.927

您不应该使用正则表达式“检查”用户的密码。我建议你用指标检查强度，并确保它被认为是“足够强大”（例如指标[看这个网站](http://www.passwordmeter.com)）。

这样，用户的密码中可以包含任何字符。您不应该真正关心用户在密码中选择的字符，无论如何您都会对其进行哈希处理，因此它不会影响您。

* * *

这就是你的正则表达式：

```
[\w .-]+ 
```

# android - 如何从资产文件夹中的 HTML 文件中访问可绘制文件夹中的图像？

> ID：10109011
> 
> 赞同：1
> 
> 时间：2012-04-11T15:24:14.800
> 
> 标签：android, css, xml, drawable, android-assets

我正在使用 XML 文件在我的应用程序中显示“关于”页面。此 xml 文件位于 assets 文件夹中，并使用 WebView 布局显示。

我想使用 css 为这个 xml 文件设置背景图像。该图像位于 drawable-mdpi 文件夹中。有没有办法可以访问该图像？

我的意思是这样的？（或替代方案，当然）

```
<style type="text/css">
body{
background-image:url('path-to-image-in-drawable-mdpi');
}
//...
</style> 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:59:35.313

如果你写它会起作用

```
<script type="text/css">
body{background-image:url('file:///android_res/drawable/file_name.jpg');}
</script> 
```

# python - 在条件下对列表中的元素求和（python）

> ID：10109013
> 
> 赞同：0
> 
> 时间：2012-04-11T15:24:20.887
> 
> 标签：python, list, sum

```
sum( int(i.replace(',',''))if re.search('\d',i)!=None for i in list) 
```

我想总结一个列表中的所有元素。问题是元素是字符串，其中一些有数字，我想将它们转换为整数，然后将它们相加。这就是为什么我需要检查字符串中是否有数字。如何在 sum 函数的列表中添加条件。另外我想使用 sum 函数，我不想只遍历列表然后添加到变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:29:29.010

> 如何在 sum 函数的列表中添加条件。

你快到了，除了`if`最后出现：

```
sum(int(i.replace(',','')) for i in list if re.search(r'\d', i)) 
```

话虽如此，整体方法并不是万无一失的。它会阻塞将数字与其他字符（例如`'a1'`）混合的输入。

此外，使用逗号作为千位分隔符并不普遍。[一些语言环境](http://en.wikipedia.org/wiki/Decimal_mark#Countries_using_Arabic_numerals_with_decimal_comma)使用它来标记小数点。在这些语言环境中，您的代码会为带有逗号的数字生成不正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:29:00.553

也许是这样的

```
def safeIntToSum(x):
    try: return int(x.replace(",",""))
    except: return 0

print sum([safeIntToSum(x) for x in list]) 
```

# embedded - 为什么加速处理器会导致实时系统错过最后期限？

> ID：10109017
> 
> 赞同：5
> 
> 时间：2012-04-11T15:24:35.270
> 
> 标签：embedded, real-time, timing

对此有点困惑。如果我加快处理器速度，是否会减少执行任务所需的时间，从而加快截止日期？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T13:34:01.113

答案是，由于速度较快，可能会出现新的资源冲突。这被称为格雷厄姆异常：如果在多处理器上调度任务集以使调度长度最小化，那么增加处理器、减少执行时间或削弱优先约束可以增加调度长度。注意目标（最小化计划长度）。但是，如果任务有截止日期并且目标是满足所有任务截止日期，则可以很容易地证明异常是真实的。这在许多有关操作系统的书籍中都有详细的示例说明。

也可以看看：

*   安德森，B。琼森，J。, “抢占式多处理器调度异常”, 并行和分布式处理研讨会。, Proceedings International, IPDPS 2002, Abstracts and CD-ROM, vol., no., pp.12-19, 2002\. doi: [10.1109/IPDPS.2002.1015483](http://doi.ieeecomputersociety.org/10.1109/IPDPS.2002.1015483)
*   Grahamm RL，“[多处理时序异常的界限](http://www.jstor.org/stable/2099572)”，SIAM 应用数学杂志，卷。17，第 2 期（1969 年 3 月），第 416-429 页。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T03:23:01.817

这种事情发生了，道格拉斯已经解释了格雷厄姆的异常。我将尝试用一个小例子来解释它。我希望这可以更容易理解发生了什么：

如果您正在处理多个并发任务和固定速度的共享资源（例如通信通道），则会出现异常。

在实时系统的上下文中，一个很好的例子是数据采集。如果您必须从模数转换器读取 x 毫秒的数据，则无论 CPU 速度如何，它总是需要 x 毫秒。在我的示例中，我将此称为“IO-time”或“io-task”。

现在考虑以下场景：

您有一项任务 (A)，其中包括：

*   4 毫秒 CPU 计算
*   4毫秒IO时间（保存数据）

第二个任务 (B) 将由硬件事件启动，包括：

*   4毫秒IO时间（加载数据）
*   2 毫秒 CPU 时间

第二个任务在毫秒 3 开始。

IO和CPU是共享资源。它们可以并行运行，但 IO 或 CPU 一次只能处理一个作业。

一种可能的时间表如下所示：

```
timestamp:   cpu/io   job:
---------------------------------------------
t=0          event    <--- hardware event triggers task-a
t=0          cpu      start of task-a (4 ms)
t=3          event    <--- hardware event triggers task-b
t=3          io       start of task-b (4 ms)
t=4          cpu      task-a done
t=7          io       task-b done
t=7          io       start of task-a (4 ms)
t=7          cpu      start of task-b (2 ms)
t=9          cpu      task-b done
t=10         io       task-a done 
```

现在我们将 cpu 功率加倍，使 cpu 运行速度提高一倍：

```
timestamp:   cpu/io   job:
---------------------------------------------
t=0          event    <--- hardware event triggers task-a
t=0          cpu      start of task-a (2 ms)
t=2          cpu      task a done
t=2          io       start of task a (4 ms)
t=3          event    <--- hardware event triggers task-b, but can't start
                           because io-bus is busy. Must wait.
t=6          io       task a done
t=6          io       start of task b (4 ms)
t=10         io       task b done
t=10         cpu      start of task b (1 ms)
t=11         cpu      task b done 
```

如您所见，与较慢的 cpu 方案相比，CPU 速度的提高导致两个任务延迟一毫秒完成。这是因为发生硬件事件时，固定速度共享资源很忙。

这只是一毫秒，但这些事情可能会加起来并可能导致错过最后期限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T15:37:36.703

取决于...加速处理器不会影响系统的其他部分（内存访问时间、传播延迟等）。提高处理器速度会使这些事情占用任务的大部分处理时间。

如果提高处理器速度，传播可能会跨越一个时钟周期，可能会由于重试而导致延迟，具体取决于您的系统设置方式。

如果最后期限与基于处理器的计数器或计时器相关联，它也会按比例增加，因为计数器没有主内存访问。

根据您的特定设置，其中任何一个都可能是因素之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T15:32:21.443

也许——但许多用于加速处理器的技术（例如，缓存）也使它们更难预测。这些技术中的大多数以牺牲最坏情况为代价来改善*平均*情况（通常很多）——例如，使用缓存，在最坏的情况下，从内存中获取可能比没有缓存要慢，因为除了时间之外要从内存中获取，需要*一些*时间来搜索缓存以查看数据是否存在。

不幸的是，对于实时调度，您关心的主要是*最坏*情况，而不是平均情况，因此即使这样的优化在大多数情况下使大多数代码更快，它仍然可能导致实时错过最后期限系统。

# html - 为什么萤火虫使我的区域元素变灰

> ID：10109019
> 
> 赞同：0
> 
> 时间：2012-04-11T15:24:36.857
> 
> 标签：html, firefox, firebug, area

```
<map name="theMap">
  <area alt="Find out more" style="cursor:pointer;" coords="0,0,10,10" shape="rect" href="#">
</map> 
```

在萤火虫中，区域元素是灰色的。没有影响它的 CSS 样式。地图元素显示清晰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:37:01.250

这是因为我没有在图像的 usemap 属性中添加哈希值。

`usemap="theMap"`本来应该`usemap="#theMap"`

# php - PHP mysql 子查询过滤

> ID：10109025
> 
> 赞同：3
> 
> 时间：2012-04-11T15:25:01.363
> 
> 标签：php, mysql

我有一张这样的桌子：

```
id     price    condition     username
----------------------------------------
 1       20     New           Kim 
 2       30     Used          Kim
 3       40     Used          George
 4       60     New           Tom 
```

我的问题是关于子选择的。当我使用这个查询时，

```
SELECT *
FROM `table`
WHERE `username` = 'kim'
  AND `price` = '20'
   OR `condition` = 'New' 
```

对于最后一个条件，它变为真，并带来 2 条记录 where condition = 'New'

但是，当我使用 AND 时，它会返回正确的记录。

```
SELECT *
FROM `table`
WHERE `username` = 'kim'
  AND `price` = '20'
  AND `condition` = 'New' 
```

我想嵌套查询，以便我只能从第一个查询的结果中选择价格和条件，即用户名。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:28:09.640

```
SELECT * FROM table WHERE username = 'kim' AND (price = '20' OR condition = 'New'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:32:47.200

正如 Rafal Wojcik 所说，您需要使用一些括号来告诉数据库您正在分组什么 OR。

在没有任何指导的情况下，引擎将所有条件分组：

```
username = 'kim' AND price = 20 OR condition = 'New' 
```

读作

```
((username = 'kim' AND price = 20) OR condition = 'New') 
```

如您所见，这不是您想要的。这里 OR 适用于“kim-20”或“新”

您的所有情况都观察到同样的问题`AND`。

祝你好运！

# python - 是否可以在 Windows 中获取打印机名称列表？

> ID：10109030
> 
> 赞同：2
> 
> 时间：2012-04-11T15:25:14.110
> 
> 标签：python, windows

我正在尝试为 Windows 创建一个自动打印机安装程序。

如果我想提取打印机列表，我将如何在 Python 中进行呢？我知道有一种方法可以在命令行上使用 VB 脚本获取列表，但这给了我不需要的额外信息，而且没有真正的好方法可以将数据导入 Python（我知道）

这样做的原因是获取值并将它们放在一个列表中，然后让它们检查另一个列表。一个列表中的任何内容都将被删除。这可确保程序不会安装重复的打印机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:53:40.367

您可以使用[pywin32](http://sourceforge.net/projects/pywin32/files/)的`win32print.EnumPrinters()`（更方便），或`EnumPrinters()`通过模块调用 API `ctypes`（低依赖性）。

这是一个完全工作的`ctypes`版本，没有错误检查。

```
# Use EnumPrintersW to list local printers with their names and descriptions.
# Tested with CPython 2.7.10 and IronPython 2.7.5.

import ctypes
from ctypes.wintypes import BYTE, DWORD, LPCWSTR

winspool = ctypes.WinDLL('winspool.drv')  # for EnumPrintersW
msvcrt = ctypes.cdll.msvcrt  # for malloc, free

# Parameters: modify as you need. See MSDN for detail.
PRINTER_ENUM_LOCAL = 2
Name = None  # ignored for PRINTER_ENUM_LOCAL
Level = 1  # or 2, 4, 5

class PRINTER_INFO_1(ctypes.Structure):
    _fields_ = [
        ("Flags", DWORD),
        ("pDescription", LPCWSTR),
        ("pName", LPCWSTR),
        ("pComment", LPCWSTR),
    ]

# Invoke once with a NULL pointer to get buffer size.
info = ctypes.POINTER(BYTE)()
pcbNeeded = DWORD(0)
pcReturned = DWORD(0)  # the number of PRINTER_INFO_1 structures retrieved
winspool.EnumPrintersW(PRINTER_ENUM_LOCAL, Name, Level, ctypes.byref(info), 0,
        ctypes.byref(pcbNeeded), ctypes.byref(pcReturned))

bufsize = pcbNeeded.value
buffer = msvcrt.malloc(bufsize)
winspool.EnumPrintersW(PRINTER_ENUM_LOCAL, Name, Level, buffer, bufsize,
        ctypes.byref(pcbNeeded), ctypes.byref(pcReturned))
info = ctypes.cast(buffer, ctypes.POINTER(PRINTER_INFO_1))
for i in range(pcReturned.value):
    print info[i].pName, '=>', info[i].pDescription
msvcrt.free(buffer) 
```

# clojure - 尝试确定为什么 nth 因特定输入而失败

> ID：10109033
> 
> 赞同：0
> 
> 时间：2012-04-11T15:25:33.833
> 
> 标签：clojure

给定由 clojure-csv 解析的以下向量

[“123/45678”“RET”“xxx-yy-zzzz”“TOAST”“法国”“某种保险 - 保险”“0”“12345678”“102020”]

nth 在以下函数中导致异常。

```
(defn reduce-csv-row
    "Accepts a csv-row and a list of columns to extract, and
     reduces the csv-row to the selected list."

    [csv-row col-nums]

    (reduce
        (fn [out-csv-row col-num]

            ;Without testing for empty, a 
            ;java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Number
            ;would occur if the file contained a blank line.

            (let [temp-val
                (try
                    (nth csv-row col-num nil)
                    (catch Exception e (do 
                                        (println csv-row, " ", col-num)
                                        (.getMessage e))))])

                    (conj out-csv-row (nth csv-row col-num nil)))
        []
        col-nums)) 
```

try .. catch 最终会消失，我只想要最少的调试打印输出。

对于我的生活，我无法弄清楚为什么 nth 会引发异常。它不在repl。另一个带有引号字段的 .csv 文件中的数据，与我包含的示例行非常相似，不会失败。我认为这是由于一些我看不到的微妙之处。

我将不胜感激任何帮助或解决此问题的方法。

谢谢你。

## 编辑：

使用上面的第一种方法，我收到一个错误，指出 Java 字符串无法转换为整数。

使用此函数将掩码向量转换为整数：

```
(defn cvt-mask-numeric
    "Converts a vector mask to numbers. It was read from a file, so it's a series of strings.
    Build in some protection in case we get a non-string. Don't want stuff to blow up."

    [csv-mask]
    (map #(utl/parse-int %) csv-mask)) 
```

使用以下方法

```
(defn reduce-csv-row
    "Accepts a csv-row and a list of columns to extract, and
     reduces the csv-row to the selected list."

    [csv-row col-nums]

    (try
        (map #(nth csv-row %) col-nums)
        (catch Exception e (.getMessage e) (println csv-row, " ", col-nums)))) 
```

我得到一个 java.lang.IndexOutOfBoundsException

问题是我忘记通过转换器传递第二个掩码：

```
(let [bene-csv-data (bcsv/strip-csv-header (fetch-csv-data (:ifn1 opts)))
      bene-csv-mask (bcsv/cvt-mask-numeric (first (fetch-csv-data (:ifm1 opts))))
      gic-csv-data  (bcsv/strip-csv-header (fetch-csv-data (:ifn2 opts)))
      gic-csv-mask  (first (fetch-csv-data (:ifm2 opts))) 
```

感谢您的评论，因为他们帮助我回去看看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:21:58.013

如果没有看到您传递的输入，很难知道是什么导致您的代码失败，但`reduce-csv-row`可以用一个简单的调用来代替`map`：

```
(def v ["123/45678" "RET" "xxx-yy-zzzz" "TOAST" "FRENCH" "SOME KIND OF COVERAGE - INSURED" "0" "12345678" "102020"])

;; extract values from a vector at indexes 0, 2, and 4
(map v [0 2 4])
=> ("123/45678" "xxx-yy-zzzz" "FRENCH") 
```

# java - Java中的像素数

> ID：10109035
> 
> 赞同：3
> 
> 时间：2012-04-11T15:25:37.613
> 
> 标签：java, graphics, colors, pixel, bufferedimage

好吧，经过整个下午的战斗，我似乎无法得到正确的答案。基本上，我有一个非常简单的设置，用白色背景填充我的画布 BufferedImage。然后我从我的 args 数组中的点绘制一个多边形。显示方面，这非常有效。当我想计算多边形（已填充）用完的像素数时，问题就出现了。

为此，我遍历画布并使用 getRGB 方法比较每个像素，如果它不是白色（背景颜色），我增加了一个计数器。但是，我总是得到的结果是画布的尺寸（640*480），这意味着整个画布都是白色的。

所以我假设被绘制到屏幕上的多边形没有添加到画布上，而是漂浮在顶部？这是我能想出的唯一答案，但可能是完全错误的。

我想要的是能够计算不是白色的像素数。有什么建议么？

代码：

```
public class Application extends JPanel {

public static int[] xCoord = null;
public static int[] yCoord = null;
private static int xRef = 250;
private static int yRef = 250;
private static int xOld = 0;
private static int yOld = 0;
private static BufferedImage canvas;
private static Polygon poly;

public Application(int width, int height) {
    canvas = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
    fillCanvas(Color.WHITE);
    poly = new Polygon(xCoord, yCoord, xCoord.length);     

    //Loop through each pixel
    int count = 0;
    for (int i = 0; i < canvas.getWidth(); i++)
        for (int j = 0; j < canvas.getHeight(); j++) {
            Color c = new Color(canvas.getRGB(i, j));
            if (c.equals(Color.WHITE))
                count++;
        }
    System.out.println(count);
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.drawImage(canvas, null, null);
    g2.fillPolygon(poly);

}

public void fillCanvas(Color c) {
    int color = c.getRGB();
    for (int x = 0; x < canvas.getWidth(); x++) {
        for (int y = 0; y < canvas.getHeight(); y++) {
            canvas.setRGB(x, y, color);
        }
    }
    repaint();
}

public static void main(String[] args) {       
    if (args != null)
        findPoints(args);

    JFrame window = new JFrame("Draw");
    Application panel = new Application(640, 480);

    window.add(panel);
    Dimension SIZE = new Dimension(640, 480);
    window.setPreferredSize(SIZE);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setVisible(true);
    window.pack();    
}//end main 
```

方法 'findPoints(args)' 太长而无法发布，但基本上它所做的所有事情都需要参数值并编译一个点列表。

在此先感谢，靴子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:28:06.263

只需添加一个感叹号即可反转条件内的布尔值：

```
if (!c.equals(Color.WHITE)) 
```

一种更快的方法是检查 rgb 值，而不是首先创建它的 Color 对象：

```
if ((rgb & 0xFFFFFF) != 0xFFFFFF) 
```

* * *

创建一个 BufferedImage，绘制多边形，然后计数。基本上，这是：

```
BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB_PRE);
Graphics2D g = img.createGraphics();
g.fill(polygon);
g.dispose();
countThePixels(img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:32:54.430

当您创建/填充画布时，您正在使用一个`BufferedImage`对象。poligon 被捕获在一个`Polygon`对象中。对屏幕的实际渲染是通过操纵一个`Graphics`对象完成的——所以从某种意义上说，多边形是“浮动的”；即：它不会出现在画布上，而是在渲染 Graphics 对象时绘制在画布上。

您将需要在画布本身上实际渲染多边形，或从 Graphics 对象获取像素并对其执行计算

# graph - Neo4j 大数据库中分离查询效率的度数

> ID：10109038
> 
> 赞同：0
> 
> 时间：2012-04-11T15:25:48.473
> 
> 标签：graph, neo4j

我试图找出最有效的方法来找到一个节点与其他节点列表之间的分离程度。例如，我有一个节点 1 和一个节点列表 (2, 3, 4, 5, ... 15, 16)。我想找到 1 和 2、1 和 3、1 和 4 等之间最短路径的长度。我尝试了以下密码查询：

密码 1.7 开始 s=node(1), d=node(2,3,4,5,6,7,8,9,10,11,12,13,14,15,16) 匹配 p=s-[ *1..3]-d 返回 d, min(length(p))

在电影评级数据库（[这里](http://markorodriguez.com/2011/09/22/a-graph-based-movie-recommender-engine/)描述，它有 9,962 个节点和 1,012,657 个关系）。

我有一个内存不足的异常。我试图将节点列表限制为 (2, 3) 并得到相同的错误。

我想知道是否有一种方法可以在大型数据库中更有效地完成此类查询。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:41:00.877

我认为您可以尝试 ShortestPath，请参阅[http://docs.neo4j.org/chunked/snapshot/query-match.html#match-shortest-path](http://docs.neo4j.org/chunked/snapshot/query-match.html#match-shortest-path)，这可能更有效？

# vm-implementation - 虚拟机编程资源

> ID：10109041
> 
> 赞同：2
> 
> 时间：2012-04-11T15:26:03.490
> 
> 标签：vm-implementation

我是 C 的初学者（多一点）程序员。我对虚拟机领域非常感兴趣——JVM、Google V8、Erlang VM、PyPy 等。

我的问题是：

*   **为了能够构建虚拟机，我需要了解/学习哪些东西（语言、概念、算法、数学等）？**
*   任何有帮助的书籍或其他资源

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:05:41.050

这个话题本身并不容易。

首先，您需要了解一些有关解析的知识。因为您将必须学习如何解析和运行语言。在大多数情况下，它会像 C# 的 MIL 一样简单。

首先要阅读的是 SCIP“计算机程序的结构和解释，第二版”这本书提供了有关构建语言解释器时所需主题的知识。这是你必须开始的基础。

接下来是硬核：

1) Dragon Book：“编译器：原理、技术和工具（第 2 版）”Aho、Seti、Ullman

2) “编译器设计：虚拟机” Reinhard Wilhelm、Helmut Seidl

3）《反编译Java》Godfrey Nolan

就个人而言，我从来没有时间阅读第三个。根据我自己的经验，我知道你必须牺牲很多时间才能制作出一些半体面的东西。

祝你好运

# codeigniter - Codeigniter Where 子句

> ID：10109047
> 
> 赞同：3
> 
> 时间：2012-04-11T15:26:24.397
> 
> 标签：codeigniter

不知何故，对我来说构建这样的查询有点困难：给我所有链接名不为空的导航条目

```
$query = $this->db->get_where('navigation',array('linkname'!==NULL)); 
```

给我错误

> “where子句”中的未知列“0”
> 
> 选择`linkname`,`idnavigation`从 ( `navigation`) WHERE `0`= 1

有什么提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T15:30:19.693

您可以像这样简单地手动编写`WHERE`子句：

```
$this->db->get_where('navigation', 'linkname IS NOT NULL'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:33:53.273

它的 ：

```
$query = $this->db->get_where('navigation',array('linkname !=' => NULL)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T09:22:10.117

试试这个...

```
$this->db->select("*)
->from("table_name")
->where("your_id <>",''); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-11T15:30:01.050

```
$this->db->where('linkname !==', NULL);
$query = $this->db->get('navigation'); 
```

# android - 防止对话框在横向模式下占据整个屏幕宽度 - Android

> ID：10109057
> 
> 赞同：2
> 
> 时间：2012-04-11T15:26:44.450
> 
> 标签：android, android-layout, android-alertdialog, android-dialog

我有一个包含长文本的自定义对话框。在纵向模式对话框看起来不错。但在横向模式下，我不希望它占据整个屏幕宽度。有没有办法以屏幕宽度的百分比定义对话框的最大宽度？因为`wrap_content`在这种情况下不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-10-19T07:42:01.410

您应该同时给出`wrap_content`父布局的高度和宽度..将尝试。应该解决您的问题

# facebook - 我需要帮助添加一个赞按钮

> ID：10109059
> 
> 赞同：1
> 
> 时间：2012-04-11T15:26:47.340
> 
> 标签：facebook, button, facebook-like

您好，希望在我的网站上向 Facebook 投放广告。我收到一个错误。它说...“输入的 href 未被识别为有效的 url”。帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:56:52.093

嘿，我也在寻找这个问题的答案，所以我把它贴在这里，以便其他人可以找到它。

您现在必须输入整个站点名称，包括末尾的数字：

[http://www.facebook.com/pages/YOURSITE/1212121212](http://www.facebook.com/pages/YOURSITE/1212121212) <那些数字。要查看它们，请登录您的 Facebook 帐户并单击您的页面，复制上面的链接和数字并将其粘贴到插件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T15:46:43.780

确保链接按钮的 URL 包含 http / https 部分。此外，like 按钮代码中应该包含该`data-href`属性。[最后，通过Facebook 调试工具](http://developers.facebook.com/tools/debug)运行您的 URL并检查您的页面没有任何问题。

# jquery - Tinymce 拼写检查实现

> ID：10109063
> 
> 赞同：4
> 
> 时间：2012-04-11T15:26:55.477
> 
> 标签：jquery, asp-classic, tinymce

我有一个经典的 ASP 页面，它具有 jquery 功能并且上面有 TinyMCE 编辑器。我希望能够对编辑器进行拼写检查，但我看到的每个示例都是使用 PHP 或 ASP.net。

我遇到了这个页面：[http](http://achorniy.wordpress.com/2009/08/11/tinymce-spellchecker-in-java/) ://achorniy.wordpress.com/2009/08/11/tinymce-spellchecker-in-java/但我不熟悉 SVN，所以我不确定如何遵循步骤，我读过它可能不适用于 IE。

还有其他选项可以检查我的 tinymce 编辑器的拼写吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:02:07.233

首先，我不确定这是否可以捎带 SG 86 的答案，所以如果不是，请不要责备我......

我用SG 86的例子，发现你无法直接使用TinyMCE提供的拼写检查功能，但是如果你使用论坛用户提供的hack，它确实可以成功。

1.  安装和设置 TinyMCE
2.  按照论坛用户的说明进行操作

TinyMCE 这个解决方案的所有功劳都应该归于原始论坛用户@ [http://tinymce.com/forum/viewtopic.php?id=15662](http://tinymce.com/forum/viewtopic.php?id=15662)

* * *

我建议首先设置 googiespell 以使用带有 asp 的简单文本区域：googiespell 在这里：[http ://orangoo.com/labs/GoogieSpell/](http://orangoo.com/labs/GoogieSpell/)

asp 脚本是 James Newtons 在此页面上的 ASP 代理：http: [//orangoo.com/labs/GoogieSpell/Documentation/](http://orangoo.com/labs/GoogieSpell/Documentation/) 所以一旦你得到这个工作，这里就是你如何在你的 javascript 设置中将它与 TinyMCE 集成拼写检查器配置：

```
<script language="javascript">

tinyMCE.init({
    theme : "advanced",
    mode : "textareas",
    plugins : "spellchecker",
    theme_advanced_buttons3_add : "spellchecker",
    spellchecker_rpc_url : "/googiespell/spell.asp",
    spellchecker_languages : "+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv"
});

</script> 
```

编辑该行：

```
 spellchecker_rpc_url : "/googiespell/spell.asp", 
```

指向您的 spell.asp 文件在您的应用程序中的位置

将 spell.asp 的内容替换为以下代码：

```
<%

Dim ByteCount, BinRead
ByteCount = Request.TotalBytes
BinRead = Request.BinaryRead(ByteCount)
rawData = RSBinaryToString(BinRead)

'get language
if instr(rawData, """params"":[""") > 1 then
    lang = mid(rawData, InStr(rawData,"[")+2, 2)
else
    lang = "en"
end if

if instr(rawData, """method"":""checkWords"",") > 1 then
'return mispelled words
 json = mid(rawData, InStrRev(rawData,"["))
 json = mid(json, 1, instr(json, "]"))
 json = replace(json, """,""", " ")
 json = replace(json, """", "")
 t = json

    r = "<?xml version=""1.0"" encoding=""utf-8"" ?><spellrequest textalreadyclipped=""0"" ignoredups=""0"" ignoredigits=""1"" ignoreallcaps=""1""><text>"_
        &t&"</text></spellrequest>"

    r = getURL("https://www.google.com/tbproxy/spell?lang="&lang, r, "","")
    out = "{""id"":null,""result"":["
    wrds = ""
    for each c in filter(split(r,"<c "),"</c>")
        'response.write "<br>"&server.htmlencode(c)
        o = cint(split(split(c,"o=",2)(1),"""")(1))+1
        l = cint(split(split(c,"l=",2)(1),"""")(1))
        s = cint(split(split(c,"s=",2)(1),"""")(1))
        out = out & """" & mid(t,o,l)& """, " 
        wrds = "1"
    next
    if wrds = "" then
        out = "{""id"":null,""result"":[],""error"":null}"
    else
        out = mid(out, 1, len(out)-2) & "],""error"":null}"
    end if

    response.write out
    response.end

else
 'return single word corrections
 json = mid(rawData, InStrRev(rawData,"["))
 json = mid(json, 1, instr(json, "]"))
 json = replace(json, """,""", " ")
 json = replace(json, "en ", "")
 json = replace(json, """", "")
 t = json

    r = "<?xml version=""1.0"" encoding=""utf-8"" ?><spellrequest textalreadyclipped=""0"" ignoredups=""0"" ignoredigits=""1"" ignoreallcaps=""1""><text>"_
        &t&"</text></spellrequest>"

    r = getURL("https://www.google.com/tbproxy/spell?lang="&lang, r, "","")

    for each c in filter(split(r,"<c "),"</c>")
        'response.write "<br>"&server.htmlencode(c)
        o = cint(split(split(c,"o=",2)(1),"""")(1))+1
        l = cint(split(split(c,"l=",2)(1),"""")(1))
        s = cint(split(split(c,"s=",2)(1),"""")(1))
        c = textbetween(">", c, "<")
        '{"id":null,"result":["Titmice","Times","Tines","Tinnies","Timmy\'s"],"error":null}
        out =  "{""id"":null,""result"":["
        wrds = ""
        for each w in split(c,vbTab)
            out = out & """" & w & """, "
            wrds = "1"
        next
        if wrds = "" then
            out = "{""id"":null,""result"":[],""error"":null}"
        else
            out = mid(out, 1, len(out)-2) & "],""error"":null}"
        end if
    next
    response.write out
    response.end
end if

 if t=empty then t = request.form()    'GoogieSpell is going to put the text in the POST data.

'show the reply from google for the POST data.     
 response.write getURL("https://www.google.com/tbproxy/spell?lang="&lang, t, "","")

Function TextBetween(sThis, sAnd, sThat)
    on error resume next
    TextBetween = split(split(sAnd,sThis,2,1)(1),sThat,2,1)(0)
end function

Function RSBinaryToString(xBinary)
  Dim Binary
  If vartype(xBinary)=8 Then Binary = MultiByteToBinary(xBinary) Else Binary = xBinary
  Dim RS, LBinary
  Const adLongVarChar = 201
  Set RS = CreateObject("ADODB.Recordset")
  LBinary = LenB(Binary)

  If LBinary>0 Then
    RS.Fields.Append "mBinary", adLongVarChar, LBinary
    RS.Open
    RS.AddNew
    RS("mBinary").AppendChunk Binary
    RS.Update
    RSBinaryToString = RS("mBinary")
  Else
    RSBinaryToString = ""
  End If
End Function

function getURL(aURL, anyPostData, anyUserName, anyPassword) 
DIM objSrvHTTP,web,method,s
    on error resume next
    s=""
    set objSrvHTTP = Server.CreateObject ("Msxml2.ServerXMLHTTP.3.0")
    if anyPostData=empty then
        objSrvHTTP.open "GET",aURL, true, anyUsername, anyPassword
    else
        objSrvHTTP.open "POST",aURL, true, anyUsername, anyPassword
        objSrvHTTP.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    end if
    objSrvHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0)"
    objSrvHTTP.send anyPostData
    objSrvHTTP.waitForResponse 7
    select case objSrvHTTP.readyState
        case 0 'object created, but no URL opened
            debug "getURL("&aURL&", "&anyPostData&", "&anyUserName&", "&anyPassword&"): Object Created, no URL opened"
            err.raise 1, "Object Created, no URL opened"
            exit function
        case 1    'loading: URL opened, but no data sent
            debug "getURL("&aURL&", "&anyPostData&", "&anyUserName&", "&anyPassword&"):URL opened, no data sent"
            err.raise 2, "URL opened, no data sent"
            exit function
        case 2    'loaded: data sent, status and headers available, no response recieved.
            debug "getURL("&aURL&", "&anyPostData&", "&anyUserName&", "&anyPassword&"):No response from remote host"
            err.raise 3, "No response from remote host"
            exit function
        case 3    'interactive: some data recieved. responseBody and responseText will return partial results.
            debug "getURL("&aURL&", "&anyPostData&", "&anyUserName&", "&anyPassword&"):Partial response recieved:"
            debug server.htmlencode(objSrvHTTP.responseText)
            s = objSrvHTTP.responseText
            err.raise 4, "Partial response recieved"
        case 4    'complete: 
            s = objSrvHTTP.responseText
        end select
    getURL = s
end function

%> 
```

编辑 - 为了清楚起见，添加了我的标题：

```
<script type="text/javascript" src="tinymce/jscripts/tiny_mce/tiny_mce.js" ></script>
<script type="text/javascript">
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    plugins : "spellchecker",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,undo,redo,|,copy,paste,|,spellchecker",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    spellchecker_rpc_url : "googiespell/spell.asp",  <--! Needs to point to where the spell.asp script is located on your server. -->
    spellchecker_languages : "+English=en,Spanish=es"
});

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:38:39.427

只需使用插件拼写检查器

[http://www.tinymce.com/wiki.php/Plugin:spellchecker](http://www.tinymce.com/wiki.php/Plugin:spellchecker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T14:16:36.323

问题中提到的JSpellChecker（[http://achorniy.wordpress.com/2009/08/11/tinymce-spellchecker-in-java/](http://achorniy.wordpress.com/2009/08/11/tinymce-spellchecker-in-java/)）为TinyMCE和使用示例提供了一些拼写检查器的实现，但它们都是基于java的实现（所以你需要做一些额外的步骤才能让它在你的环境中工作）

它应该可以在 IE 上正常工作，但理想情况下，它应该托管在与您要使用它的页面相同的主机上，因为浏览器（不仅是 IE）可能会阻止跨域 ajax 请求。

如果您不想处理 SVN，可以在此处下载代码快照 ( [http://sourceforge.net/p/jspellchecker/code/11/tarball )。](http://sourceforge.net/p/jspellchecker/code/11/tarball)它还包含使用示例

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-09T08:10:54.803

TinyMCE 提供

```
spellchecker_rpc_url : "/myspellchcker",  
<--! Needs to point to where the myspellchecker script is located on your server. --> 
```

这是 Python 代码（在 ASP 中编写等效代码）：

```
 #checker is a pyenchant object - uses enchant which wraps aspell in our case . The code was taken from django's implementation for tinymce spellchecker.

  def spell_check(self):
        """Returns a Response that implements the TinyMCE spellchecker protocol.
        """
        try:
            raw = self.REQUEST['BODY']
            input = json.loads(raw)
            id = input['id']
            method = input['method']
            params = input['params']
            lang = params[0]
            arg = params[1]

            if not enchant.dict_exists(str(lang)):
                raise Exception("dictionary not found for language '%s'" % lang)

            checker = self.checker 
            if method == 'checkWords':
                result = [word for word in arg if not checker.check(word)]
            elif method == 'getSuggestions':
                result = checker.suggest(arg)
            elif method == 'learnWord' :
                result = checker.add(arg)
            else:
                raise Exception("Unkown spellcheck method: '%s'" % method)
            output = {
                'id': id,
                'result': result,
                'error': None,
            }
        except Exception:
            return Exception("Error running spellchecker")
        self.REQUEST.RESPONSE.setHeader('Content-Type','application/json')
        return json.dumps(output) 
```

# javascript - 调整窗口大小时为 Jit Graph 库调整 Canvas 大小

> ID：10109065
> 
> 赞同：2
> 
> 时间：2012-04-11T15:26:57.383
> 
> 标签：javascript, graph, resize, window-resize, thejit

## 情况：

我正在尝试刷新图表（[Force Directed](http://thejit.org/demos/)）`window.resize`。

```
jQuery( window ).on( 
        'resize', 
        function( e ) { 
                // The definition happens in the function in the next line
                // The init during $( document ).ready();
                var canvas = DefineGraphForceDirected().canvas;

                // gives me the object (sizes): 
                console.log( canvas.getSize() );

                // gives me the error: 
                canvas.resize( 500, 500 ); 
                // gives me the (also) error: 
                canvas.resize( window.innerWidth, window.innerHeight ); 
                // gives me the (also) error: 
                canvas.resize( window.innerWidth+'', window.innerHeight+'' ); 

                // Using the native html canvas, gives me wired aspect ration
                // and a repeating graph on the not resized areas 
                // when dragging the graph outside:
                var c   = document.getElementsByTagName( 'canvas' )[0],
                    ctx = c.getContext( '2d' );

                c.width  = window.innerWidth;
                c.height = window.innerHeight;
                ctx.clearRect( 0, 0, ctx.canvas.width, ctx.canvas.height );
        } 
); 
```

画布本身实际上是一个`canvas`标记对象，我已经[尝试过调整大小](https://stackoverflow.com/questions/4938346/canvas-width-and-height-in-html5)。无论如何：我在纵横比方面做错了。

## 错误：

> » 未捕获的类型错误：无法设置未定义的属性“_depth” «

```
>> Backtrace: (line nr. in brackets) 

-------------------------------------------- 
e.Util.computeLevels - (jit.js:1695) 
c.each.e.(anonymous function) - (jit.js:1813) 
g.ForceDirected.q.compute - (jit.js:5934) 
$jit.ForceDirected.q.refresh - (jit.js:6047) 
$jit.Canvas.q.initialize.canvases.push.l.Base.(anonymous 
function).resize - (jit.js:1089) 
l.Base.2D.q.resize - (jit.js:1226) 
$jit.Canvas.q.resize 
```

## 问题：

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:52:59.330

我发现了问题。

使用 infoViz/TheJit 图表，您必须使用`width`和`height`属性。否则你将无法调整画布的大小......*示例中没有使用它*......

```
function loadGraph() {
    var GraphForceDirected = new $jit.ForceDirected( {
        // Size
        height : 500,
        width  : 200,
    }

    return GraphForceDirected;
} 
```

然后在 (jquery mobile) 期间触发它`pageshow`：

```
jQuery( '#graph-container' ).on(
    'pageshow', 
    function( $ ) {
        var GraphForceDirected = DefineGraphForceDirected();

        // Load JSON data for the ForceDirected Graph
        GraphForceDirected.loadJSON( json );
        // compute positions incrementally and animate.
        GraphForceDirected.computeIncremental( {
            iter       : 40,
            property   : 'end',
            onStep     : function( percent ) {
                // Example status update fn
                Status.write( percent );
            },
            onComplete : function() {
                // Example status update fn
                Status.write( 100 );

                GraphForceDirected.animate( {
                    modes      : ['linear'],
                    transition : $jit.Trans.Elastic.easeOut,
                    duration   : 2500
                } );

                // Here it works:
                GraphForceDirected.canvas.resize(
                    window.innerWidth,
                    window.innerHeight,
                    true
                );
            }
        } );
    } 
); 
```

# java - Android - ListView EditText 焦点问题

> ID：10109072
> 
> 赞同：0
> 
> 时间：2012-04-11T15:27:29.397
> 
> 标签：java, android, listview, focus, android-edittext

我有一个`EditText`用作. 我正在尝试访问焦点/失去焦点事件，但由于某种原因，每个焦点都会触发多次。这里发生了什么？`View``ListView`

```
// in onCreate

// ...

// the footer
View v = getLayoutInflater().inflate( R.layout.comment_edittext, null );

EditText commentEditText = (EditText)v.findViewById( R.id.comment_edittext );
commentEditText.setOnFocusChangeListener( new OnFocusChangeListener() {

    @Override
    public void onFocusChange( View v, boolean hasFocus )
    {
        U.log("View: " + v.getClass().getName().toString() );

        if( hasFocus )
        {
            U.log( "Clicked" );
        }
        else
        {
            U.log( "Un Clicked" );
        }
    }
} );

// add the footer
commentListView.addFooterView( v );

// ... 
```

单次触摸会调出键盘的输出是：

```
04-11 10:22:17.449: E/004 - X(4576): View: android.widget.EditText
04-11 10:22:17.459: E/004 - X(4576): Clicked
04-11 10:22:17.569: E/004 - X(4576): View: android.widget.EditText
04-11 10:22:17.569: E/004 - X(4576): Un Clicked
04-11 10:22:17.569: E/004 - X(4576): View: android.widget.EditText
04-11 10:22:17.569: E/004 - X(4576): Clicked
04-11 10:22:17.689: E/004 - X(4576): View: android.widget.EditText
04-11 10:22:17.689: E/004 - X(4576): Un Clicked
04-11 10:22:17.709: E/004 - X(4576): View: android.widget.EditText
04-11 10:22:17.709: E/004 - X(4576): Clicked 
```

我可以理解它使用`hasFocus`set to调用多个事件`true`，但为什么还有`false`s，触发`Un Clicked`日志？

**编辑：**此外，每当我`ListView`向上和向下滚动，移入`EditText`和移出视图时，它也会调用这些事件。我是否使用了错误的侦听器类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:40:20.183

从个人经验来看，ListViews 中的 EditTexts 是个祸根。由于视图被回收和渲染的方式，焦点表现得很奇怪。我建议以其他方式解决问题。实际上，如果是评论文本框，如果它总是可见不是更好吗？

样本布局：

```
 <LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 
    <ListView 
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_weight="1"/> 
    <EditText 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"/>  
  </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T19:17:19.123

改用 GridView 并给出 1 的 numColumns。如果您不喜欢它在 java 类中的读取方式，请将它们存储为 AbsListView（并将它们作为 GridView 保存在您的 xml 中）。

ListView 与 EditTexts 有问题，GridViews 没有这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T09:07:31.473

使用 numColumns 为 1 的 Grideview 是解决问题的完美方法。我已经尝试过并解决了我的问题。

# css - 带有文本换行的流体浮动 div

> ID：10109074
> 
> 赞同：0
> 
> 时间：2012-04-11T15:27:34.383
> 
> 标签：css, css-float

我有一个并排浮动的 2 个 div 容器。

第一个 div 没有应用固定宽度，而第二个有。我想要的是第一个 div 在第二个 div 未呈现时扩展全宽。

但是我面临的问题是，当 div 1 中的段落变长时，它不会按应有的方式换行，而是最终将 div1 换行在 div2 下。我想要实现的是让长段落包含在 div 1 中并尊重浮动的 div 2。

下面的代码可能会更好地解释......

```
<div style="width:600px; height: 600px; margin-left: auto; margin-right: auto; border:1px solid blue;">
        <div style="float:left; border:1px solid green;">
            <p>Main long text jhjkhjkhjkhjk hj hjkh jkh jkh jkh jkh jkh jk hjk h jkh jh jkh jkh jkh jk hjk hjk hjkhkjhjkhjkhjkhjkhjkhjkhjkhjkhjkhjkh</p>
        </div>
        <div style="float:right; border:1px solid red; width: 200px;">
            <p>Secondary</p>
        </div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:34:27.833

将宽度添加到第一个内部 div

```
<div style="width:600px; height: 600px; margin-left: auto; margin-right: auto; border:1px solid blue;">
        <div style="float:left; border:1px solid green; width: 396px;">
            <p>Main long text jhjkhjkhjkhjk hj hjkh jkh jkh jkh jkh jkh jk hjk h jkh jh jkh jkh jkh jk hjk hjk hjkhkjhjkhjkhjkhjkhjkhjkhjkhjkhjkhjkh</p>
        </div>
        <div style="float:right; border:1px solid red; width: 200px;">
            <p>Secondary</p>
        </div> 
```

# django - 姜戈 | 为博客文章类型制作与模型继承相关的模型的建议

> ID：10109078
> 
> 赞同：0
> 
> 时间：2012-04-11T15:27:47.353
> 
> 标签：django, models

我一直在阅读 django 中的模型继承，发现很多人不适合它，尽管我不是 100% 确定为什么。

因此，对于所有认为模型继承不好的人，我有一个问题。

我有一个案例，我有一个包含许多帖子模型子类型的博客。

例如，假设 post1 是常见的帖子类型，而 post2 是音频帖子类型。两种帖子类型都有标题和日期以及其他常见字段，但也有仅用于各自用途的唯一字段。

第一个问题：为 Post1 和 Post2 制作模型的最佳方法是什么？第二个问题：按日期顺序列出所有帖子类型的列表以显示在博客卷中的最佳方法是什么？

--:Edit:-- 我不希望这成为模型/数据库继承是好是坏的争论，我只想找到与我认为可以做的对比。我在 oop 世界中多次看到关于继承与组合设计的争论，我知道我可以在 django 中使用继承，但我想学习如何将其作为组合设计模式来实现。

这是此问题的好读物，概述了我在数据库继承中发现的一些问题[http://ankhos.com/2010/01/15/django-polymorphism-mixins-vs-inheritance-models/](http://ankhos.com/2010/01/15/django-polymorphism-mixins-vs-inheritance-models/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:23:03.017

1Q：你需要像多态这样的东西来将你的两种类型的帖子保存在一个博客中。我真的很喜欢这种方法：

[基于管理器的多态模型继承](https://gist.github.com/608687)

2Q：在文档字符串中有很好的解释。

编辑：阅读您的编辑。看来您想尝试其他方法。

# tsql - SQL查询两个可能的值？

> ID：10109083
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:08.253
> 
> 标签：tsql, flags, sql-server-2008

我正在使用 SSMS 2008 R2 并试图找出 SQL 选择语句来选择找到两个或多个值的所有记录。

这些是我正在寻找的四个可能的值。如果满足两个或多个这些值（SubstanceAbuse、BehaviorEmotion、SexualAbuse、DomesticViolence），我想将一个新字段设置为 1。我该怎么做？

```
 case when qav.[test_setup_details_caption] in ('Substance Abuse / Drug Use','Caregiver monitor youth for drug  alcohol use') then 1 else 0 end SubstanceAbuse,
    case when qav.[test_setup_details_caption] in ('Physical Aggression','Firesetting','Gang Involvement','Runaway Behavior') then 1 else 0 end BehaviorEmotion,
    case when qav.[test_setup_details_caption] = 'Problem Sexual Behavior' then 1 else 0 end SexualAbuse,
    case when qav.[test_setup_details_caption] LIKE '%Domestic%' then 1 else 0 end DomesticViolence, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:37:21.157

我的建议是采用上述语句并在新的 SELECT 语句中将其设为虚拟表。然后，您可以对 WHERE 语句中的那些（因为它们已经计算过）进行 SUM 并仅显示

```
where (Sub + Beh + Sex + Dom) > 1 
```

它看起来像这样（伪代码）：

```
SELECT t.*
FROM (SELECT sub case, Beh case, etc.
      FROM yourtable) t
WHERE (t.sub + t.Beh + t.Sex + t.Dom) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:33:03.777

似乎您只需要这个 WHERE 子句：

```
WHERE SubstanceAbuse + BehaviorEmotion + SexualAbuse + DomesticViolence > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:37:03.980

```
update myTable set myField = 1 where 2 <= (select SubstanceAbuse + BehaviorEmotion + SexualAbuse + DomesticViolence from ...) 
```

当然，这只是您查询的模板，但您明白了。如果答案仍然不清楚，请您提供更多详细信息。

最好的问候，拉霍斯阿帕德。

# vbscript - VBScript：WshShell.SendKeys“^{ADD}”给出“无效的过程调用代码：800A0005”错误

> ID：10109086
> 
> 赞同：1
> 
> 时间：2012-04-11T15:28:11.190
> 
> 标签：vbscript

下面的代码应该是不言自明的（发送 ctrl-numADD 组合键）；但是，我显然做错了什么。以下代码产生的完整错误是：

```
Line: 4
Char: 1
Error:  Invalid procedule call or argument
Code: 800A005 
```

如何发送此组合键而不产生错误？

PS：代码至少能够在尝试执行发送键之前将焦点更改为正确的窗口。

```
 Dim WshellObj   
 set WshShell = WScript.CreateObject("WScript.Shell")   
 WshShell.AppActivate "Logs"   
 WshShell.SendKeys "^{ADD}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:35:17.270

我不确定您为什么会收到该特定错误，但您正在尝试通过 SendKeys 方法使用无效的键序列。“{ADD}”不是有效代码。

您应该改用它。

```
Dim WshellObj
set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.AppActivate "Logs"
WshShell.SendKeys "^+" 
```

这将发送一个 + 号。SendKeys 不支持数字键盘特定的键。

# image - 如何使用 Matlab 在晶圆图上调整、组织和对齐图像？

> ID：10109087
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:18.237
> 
> 标签：image, matlab, map, resize, alignment

我正在尝试使用 Matlab 将图像缩放、旋转和对齐到晶圆图。我能够调整图像大小和旋转图像，但我无法找到将它们对齐在网格上的方法。

我有一个图像，它对下面链接的图像上的每个空间都是唯一的。我想将一系列图像与地图上的相应空间对齐。（0101 = 晶圆上的位置 1,1，依此类推）。这些图像目前是 .jpg 文件，我计划根据需要阅读这些文件。

我有一个表格显示哪个文件对应于哪个位置，如果需要，我可以更改文件名。我想将图像与以下地图上的每个空间对齐：

[示例晶圆图](http://i.stack.imgur.com/BK875.png)

# ms-access - 将表从 Access DB 复制到 SQL Server

> ID：10109088
> 
> 赞同：1
> 
> 时间：2012-04-11T15:28:18.643
> 
> 标签：ms-access, ssis

早上好。

我们需要将表从 Access 复制到 SQL。事情是源中的表名每天都在变化。我已经按照这篇文章的解决方案中显示的步骤[如何以编程方式获取 SSIS 包中的 MS Access 表列表？](https://stackoverflow.com/questions/6298806/how-do-i-programmatically-get-the-list-of-ms-access-tables-within-an-ssis-packag)

问题是这样的：

我更改了变量名称，这就是因为该帖子中所述的问题与我的非常相似。我按照这些步骤将 Country 更改为我的 Access DB 的表名，比如说 CITY。问题是当进程在Access中循环表时，复制到SQL表中的数据总是相同的。存储在 CITY 中的数据，似乎没有换表，它总是使用提供给 OLE DB 源的表（如屏幕截图 14# 所示）（在变量 'SelectQuery' 中提供的表名）

所以我创建了 SQL 中的所有表，但它们都填充了相同的信息。来自同一张表的信息（在变量中说明其名称的表）

谢谢，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:10:16.643

通过阅读链接的解决方案，它看起来要么不正确，要么缺少一个步骤。现在，屏幕截图 #14 指定了“来自变量的 SQL 命令”和“SelectQuery”作为变量源；我看不到 SelectQuery 的更新位置。

**解决方案 1：** 将 OLE DB Source 设置为“表名或视图名变量”，并将有问题的变量设置为 TableName（由 ForEach 容器每次迭代更新）

**解决方案2：**将SelectQuery改为表达式驱动变量，即`"select * from " + @[User:TableName]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:42:30.580

您确实意识到该示例中的表名必须与 excel 上的工作表名匹配，对吗？因此，您可能必须在访问时执行类似的操作。

另外，发布更多信息。您的表变量上的值似乎没有被更新。告诉我们应该如何。

# google-app-engine - 使用 Objectify 的祖先查询不返回结果

> ID：10109089
> 
> 赞同：2
> 
> 时间：2012-04-11T15:28:22.323
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我在 appengine 上使用 objectify 3.1 并尝试进行祖先查询。我想获取某个对象的所有子对象。下面是我的代码：

```
@Cached
@Entity
public class Car {

 @Id
 @GeneratedValue(strategy = GenerationType.IDENTITY)
 private Long id;

 private String make;
 private String model; 
```

}

```
@Cached
@Entity
public class Tire {

@Id
public String keyName; 

@Parent Key<Car> car;

private String brand;
private String size; 
```

}

我的查询是这段代码：

```
 List<Tire> list= ofy.query(Tire.class).ancestor(new    Key<Car(Car.class,carID))).list(); 
```

当我创建轮胎对象时，我使用此代码来设置关系：

```
 newTire.setCar(new Key<Car>(Car.class,Car.getID())); 
```

我知道 Parent 关系在那里，因为我可以在数据存储区管理员中查询它，它会在解码的实体键中显示父级：

```
Decoded entity key: Car: id=135172 > Tire: name=myCarUniqueID 
```

这个查询总是返回 0 个结果，看起来我已经遵循了 objectify 网站上的所有最佳实践。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:01:38.823

您的代码看起来不错，所以唯一可能出错的是不存在的`carID`.

网站上列出的[Objectify javadoc](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/index.html)实际上是用于即将推出的 Objectify 4 的主干版本。您需要查看的是[Objectify 3.1 javadoc](http://objectify-appengine.googlecode.com/svn/tags/3.1/javadoc/index.html)：该版本已`fetch()`在查询中。

此外，`@GeneratedValue`不是[Objectify 注释](http://objectify-appengine.googlecode.com/svn/tags/3.1/javadoc/com/googlecode/objectify/annotation/package-frame.htmlhttp://)。

# c++ - 引用`boost::date_time`的枚举项的正确方法

> ID：10109091
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:26.853
> 
> 标签：c++, boost, boost-date-time

```
#include "boost/date_time/gregorian/gregorian.hpp"

int main()
{
    boost::gregorian::greg_weekday dWeek(boost::date_time::Wednesday);

    //Code One
    // warning C4482: nonstandard extension used: enum 'boost::date_time::weekdays' used in qualified name
    if (dWeek.as_enum()==boost::gregorian::greg_weekday::weekday_enum::Wednesday)
    {
        std::cout << "Today is Wednesday" << std::endl;
    }

    //class BOOST_DATE_TIME_DECL greg_weekday : public greg_weekday_rep {
    //public:
    //    typedef boost::date_time::weekdays weekday_enum;

    //Code Two
    if (dWeek.as_enum()==boost::date_time::Wednesday)
    {
        std::cout << "Today is Wednesday" << std::endl;
    }
} 
```

**问题**> 我见过大量使用**Code One**来比较`boost::date_time`. 基于 C++ 标准，枚举的使用是不正确的。我提供了一个解决方案，**代码二**。

有人可以让我快速看一下，看看它是否是正确的比较方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:32:22.853

编辑：更正

利用

```
boost::date_time::Wednesday 
```

我没有查看 as_enum() 返回的类型。修复它，编译和工作（在 MSVC2k10，Boost 1.48.0 自建）

EDIT2：你会发现它隐藏在 boost/date_time/gregorian/greg_facet.hpp 中。

```
namespace boost{
namespace gregorian{
  typedef boost::date_time::weekdays weekday_enum;
}
} 
```

无论如何，其余信息的相关部分是有一个 boost::date_time::weekdays::Wednesday，但我们去掉了工作日。

枚举基本上是这样的：

```
enum foo { bar = 1, barre = 2, barred = 3 };
// Is sort-of the same as
typedef static const int foo;
foo bar = 1;
foo barre = 2;
foo barred = 3; 
```

foo 不是命名空间，也不是结构或类似的东西，它更像是一个类型名。

我知道这并不*完全相同*，但也可能是为了使用它们。在这样的类型中使用 weekday_enum 限定符基本上会给编译器带来一点点垃圾来解析，就像说：

```
typedef int foo;
struct S {
  static foo var;
} p;

p.foo::var = 4; // Does this make sense? Nope... 
```

# sql - SQL（T-SQL、SQL Server Mgmnt Studio）：在字段中创建逗号分隔的 .txt 文件

> ID：10109093
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:35.850
> 
> 标签：sql, sql-server-2008, tsql, ssms

背景：我必须创建一个定期运行的报告以发送给外部实体。它需要一个逗号分隔的文本文件。报告所需的某些字段包含逗号（我可以轻松地将逗号从名称字段中解析出来，但地址和某些数字字段中的错误逗号更棘手）。我无法控制数据库设计或输入控件。

我知道如何从 SQL Server Management Studio 获取以逗号分隔的查询结果文本文件。但是字段中的逗号把一切都搞砸了。我可以更改分隔符，然后在 Excel 中正确获取字段，但这只是一种解决方法 - 它需要能够自动满足规范。

该报告以前在过时的 DBMS 上运行 - 我有一份旧报告的副本，所有字段都用双引号 ("....") 括起来。这会起作用 - 虽然我不知道外部用户如何解析字段（不是我的问题） - 但我太笨了，无法弄清楚如何在 t-sql 中做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:55:58.697

您可以使用导出数据任务，但如果您必须在运行查询后尝试从 Management Studio 获取这些结果，请转到工具>选项，找到网格输出的设置并选中框以分隔包含字段分隔符的字段。此选项仅在您打开新的查询窗口时生效。

# php - 从 mysql 中检索十进制数据并放入数组

> ID：10109095
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:39.500
> 
> 标签：php, mysql, number-formatting

我有一个mysql表，只有一个寄存器，其中`price`字段是`decimal(6,2)`类型，值为`60.35`

考虑上面的代码：

```
$prices = mysql_query("SELECT id, price FROM products");
while ($pr = mysql_fetch_assoc($prices)) {
    $prics[$pr['id']]=$pr['price'];
    echo $pr['price'].' - '.$prics[$pr['id']]."\n";
} 
```

输出不正确：

> 60.35 - 6

正确的是：

> 60.35 - 60.35

我在没有mysql查询的情况下尝试了同样的情况：

```
$var = array(60.35,'60.35',60);
$var2[0] = $var[0];
$var2[1] = $var[1];
print_r($var2); 
```

它按预期工作：

```
Array
(
    [0] => 60.35
    [1] => 60.35
) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:25:18.823

问题线很可能

```
$prics[$pr['id']]=$pr['price']; 
```

尝试强制类型如下：

```
settype($prics[$pr['id']], "float");
$prics[$pr['id']]=$pr['price'];
echo $pr['price'].' - '.$prics[$pr['id']]."\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:08:57.493

我通过在使用之前初始化数组 var 解决了这个问题：

```
$prics = array(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:31:02.107

我认为问题在于 PHP 将第二个浮点数转换为字符串，因为它被连接到一个字符串，而它认为第一个浮点数是浮点数

编辑 - 不，这很完美，它必须是别的东西

[http://codepad.org/UbeJ20Wh](http://codepad.org/UbeJ20Wh)

# iphone - UIButton在触摸时崩溃的应用程序

> ID：10109096
> 
> 赞同：2
> 
> 时间：2012-04-11T15:28:40.523
> 
> 标签：iphone, objective-c

我有一个导航控制器，它包含一个带有一些按钮的视图，但是当我按下一个按钮时，我得到一个 EXC_BAD_ACCESS 错误。我想不出我做错了什么，因为目标是正确的。无论按钮是通过编程方式添加还是通过 IB 添加，它都会崩溃。

按钮代码：

```
UIButton *reportsButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
reportsButton.frame = CGRectMake(20, 100, 100, 50);
[reportsButton setTitle:@"Reports" forState:UIControlStateNormal];
[reportsButton addTarget:self action:@selector(reportsButtonTouched:) forControlEvents:UIControlEventTouchUpInside]; 
```

功能按钮正在尝试访问：

```
- (void)reportsButtonTouched:(id)sender
{
    NSLog(@"working");
} 
```

错误：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); //EXC_BAD_ACCESS code=1
} 
```

按钮尝试访问的功能存在。

也许这与我不知道的 NavigationController 的运行方式有关，但我之前已经这样做了，没有任何问题。

感谢您的任何回答，我非常感谢我之前从该站点获得的帮助。

编辑：这是我的 AppDelegates didFinishLaunching 以防万一。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *homevc = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:homevc];

    [self.window addSubview:nav.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:38:01.447

您的代码中似乎没有任何问题指向任何问题。[使用本教程](http://ijoshsmith.com/2011/11/28/debugging-exceptions-in-xcode-4-2/)使 Xcode 中断所有异常。这将使您更接近“犯罪现场”，而不是坠入主线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T13:56:14.540

我也遇到了这个错误；我一直在使用 SpriteKit 编程并以某种方式实现我的按钮，然后当我回到不使用框架时，突然之间，我实现的每个按钮都导致了错误的访问错误。

我发现我在 viewDidLoad 中初始化了我的按钮，因为我一直在使用 didMoveToView，并且我不小心将它们视为相同的函数（老实说，我并没有真正掌握 viewDidLoad 的实际作用）。

但是当我这样做时：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self)
{
    // Custom initialization
    [self addButton];

}
return self;
}

- (void)addButton
{
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 45, 45)];

[button setTitle:@"CLICK" forState:UIControlStateNormal];

[button addTarget:self action:@selector(buttonPressed:) 
forControlEvents:UIControlEventTouchDown];

[self.view addSubview:button];
}

- (void)buttonPressed:(UIButton *)button
{
    NSLog(@"WORKED"); 
} 
```

一切都很好......所以尝试一下，如果你仍然有麻烦。祝你好运！

# ruby-on-rails - Rails 3.2.1 - 从布局中找出正在渲染的模板文件名

> ID：10109099
> 
> 赞同：1
> 
> 时间：2012-04-11T15:28:47.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, view

从视图文件中我知道我可以调用访问@virtual_path 实例变量来获取正在呈现的模板文件的名称。当我从布局访问这个变量时，正如预期的那样，我得到了布局文件名。有没有办法访问从布局中呈现的主视图模板文件的名称？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T15:47:07.533

布局和模板之间有区别吗？

也许其中一种想法对您有用：

```
@app_name  
@app_path
<%= self._template.identifier %> 
```

# iphone - 无法从 MasterViewController 识别 UISplitViewController 选择器

> ID：10109100
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:47.533
> 
> 标签：iphone, uisplitviewcontroller

我创建了一个自定义 UISplitViewController，以便我可以向用户显示登录屏幕。在这个控制器中，我还有一个注销方法。

注销按钮位于 MasterViewController 的导航栏中。当用户单击注销时，我正在尝试调用 UISplitViewControllers logoutUser 方法。首先我试过：

```
[self.splitViewController logoutUser:self]; 
```

这在尝试编译时出错：

'UISplitViewController' 没有可见的@interface 声明选择器'logoutUser:' 然后我注释掉了有问题的行并添加了以下 if，检查我的 UISplitViewController 是否确实响应了选择器。

```
if([self.splitViewController respondsToSelector:@selector(logoutUser:)]){
   // [self.splitViewController logoutUser:self];
    NSLog(@"Selector");
}else{
    NSLog(@"No Selector");
} 
```

在运行时的日志中，我得到了 Selector。取消注释 [self.splitViewController logoutUser:self] 我得到了同样的错误。

我试图清理构建并重建，但它仍然给出了这个错误。我该如何解决这个问题？

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:10:45.010

任何消息都可以发送到Objective-C 中的任何对象，只要该方法在当前范围内的某处声明（即，它在某个类中的某个导入的头文件中声明）。

你说的可能有两个问题：

1.  您没有导入包含该方法的标头。（它在其中声明的类甚至不必与您现在调用它的类相同；它只需要在*某处*声明即可。）在这种情况下，您将收到一条警告，指出找不到该方法，并且它将假定该方法返回类型`id`。您可以通过导入自定义视图控制器的标头来解决此问题。

2.  由于`self.splitViewController`是 type `UISplitViewController *`，并且`logoutUser:`不是 的方法`UISplitViewController`，因此您可能会收到*警告*（不是错误），它可能不会响应该方法。这是静态类型检查的结果，因为`UISplitViewController *`它是一个具体类型。您可以通过以下任一方式解决此问题

    1.  正如恩里克的回答所暗示的那样，将其转换为支持该方法的类型；或者
    2.  将其转换为类型`id`，使其不进行静态类型检查，例如

    `[(id)self.splitViewController logoutUser:self];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:49:24.357

似乎 self.splitViewController 是基本的 splitViewController 并且编译器无法找到 logoutUser 方法。但是，在运行时 splitViewController 可以响应该方法。正如您所说，您的 splitViewController 是自定义的，请尝试转换为自定义控制器：

[(yourCustomViewController *)self.splitViewController logoutUser:self];

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T16:43:49.023

如上所述，我找到了答案：

```
 [self.splitViewController performSelector:@selector(logoutUser:) withObject:self]; 
```

# model - Extjs 树存储与服务器自动同步

> ID：10109101
> 
> 赞同：1
> 
> 时间：2012-04-11T15:28:53.420
> 
> 标签：model, extjs4, extjs

使用 Tree 时如何使用 store 与服务器同步？

我尝试使用[TreeStore](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.TreeStore)，但它没有任何 appendChild 或 addChild。 [NodeInterface](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.NodeInterface)有一个 appendChild 方法，但它不通过存储或代理与服务器同步......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:30:48.317

TreeStore 没有类似 Store.add 或 Store.delete 的方法。因为它需要父节点的信息。因此，将子元素添加到根元素的示例：

```
var root = me.getCategoryTree().getRootNode();
root.appendChild( rec );

me.getCategoryTree().getStore().sync(); 
```

# vbscript - 如何使用变量制作单元格？在 Excel 2007 中使用 VB 脚本

> ID：10109102
> 
> 赞同：0
> 
> 时间：2012-04-11T15:28:54.243
> 
> 标签：vbscript, excel-2007

我正在做一个项目，该项目需要我检查电子表格中最后使用的行，然后在单元格中最后使用的行之后从另一个电子表格的一系列单元格中提取数据（即 A10 等）

问题是我知道当前电子表格中的哪个列名用于导入数据（即A列），但是有没有办法分配行号并制作一个看起来像“A”的单元格。最后使用的行会随着我们添加数据而不断变化，因为最后使用的行会不断变化。

这是当前的代码，也许可以更好地解释我自己：

```
LastRow = Cells.SpecialCells(xlCellTypeLastCell).Row 
```

`CurrRow = LastRow + 1`

`ExtractExcelToArray wsDCCTabA.Range("C15:C25") ' Extracting from here`

`ExportAccesstoExcel wsTempGtoS.Range("E&CurrRow:E12") 'importing into current spreadsheet code here`

如您所见，我尝试使用“E&CurrRow”之类的东西，但它似乎不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:32:28.410

```
ExportAccesstoExcel wsTempGtoS.Range("E" & CurrRow & ":E12") 
```

# mysql - 如何在 MySQL 中创建 DESC 索引？

> ID：10109108
> 
> 赞同：34
> 
> 时间：2012-04-11T15:29:29.133
> 
> 标签：mysql, performance

我有一个表，我需要从中获取按字段降序排列的行。运行如下`EXPLAIN`查询时：

```
EXPLAIN SELECT ... FROM table WHERE ... ORDER BY field DESC 
```

我进入`Using where; Using filesort`专栏`Extra`。所以我尝试创建一个`DESC`索引：

```
CREATE INDEX name ON table (field DESC); 
```

但是当我再次运行时，我在列中`EXPLAIN`得到相同的结果，并且性能几乎相同。`Using where; Using filesort``Extra`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-11T15:33:42.077

这是 MySQL 的“功能”之一，它会默默地忽略您做某事的请求，因为它根本没有实现：

来自[http://dev.mysql.com/doc/refman/5.5/en/create-index.html](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)

“ *index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字允许将来扩展以指定升序或降序索引值存储。目前，它们被解析但被忽略；索引值始终按升序存储*“

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-05-11T17:24:21.503

MySQL 从版本 8 开始支持降序索引。在早期版本中，“DESC”子句在创建索引时被忽略。对于 (a) 单列索引或 (b) 所有列都有一个方向的多列索引来说，这不是问题：要么全是 ASC，要么全是 DESC——因为索引是双向的。

但是，如果您需要一个列方向不同的多列索引，例如，您可以像这样运行多个查询：

```
SELECT * from MyTable WHERE ColumnA = 1 ORDER BY ColumnB ASC, ColumnC DESC 
```

您需要以下索引：（ColumnA，ColumnB ASC，ColumnC DESC）。

您可以在 MySQL 8 之前的版本中使用这些参数创建索引，但实际上它是静默创建的，所有列都升序（ColumnA ASC、ColumnB ASC、ColumnC ASC）。

因此，您的查询无法完全使用该索引 - 它只从索引中获取列 A 和 B，而对列 C 使用未索引（文件排序）数据。

在 MySQL 8.0 及更高版本中，这将不再是问题。见[https://dev.mysql.com/doc/refman/8.0/en/descending-indexes.html](https://dev.mysql.com/doc/refman/8.0/en/descending-indexes.html)

MySQL 版本 8 已于 2018 年 4 月 19 日 (v8.0.11) 发布以供普遍使用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-03T22:11:47.253

As mentioned the feature is not implemented but some workarounds may be of interest:

One possibility is to store the field in a negated or reverse value.

If it is a number you can store (-n) or (MAXVAL -n) if unsigned

If it's a date or timestamp, some would advocate to store a number instead and use functions such as FROM_UNIXTIME()

Of course such change is not always easily done... depends on existing code etc.

# asp.net-mvc - 验证包含嵌套域对象的 Viewmodel

> ID：10109111
> 
> 赞同：3
> 
> 时间：2012-04-11T15:29:30.257
> 
> 标签：asp.net-mvc

我有以下 2 个实体：

```
 public class Product
{
    [Key]
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    public virtual Category Category { get; set; }
}
public class Category
{
    [Key]
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
    public ICollection<Product> Products { get; set; }
} 
```

和一个视图模型

```
public class ProductCreateOrEditViewModel
{
    public Product Product { get; set; }
    public IEnumerable<Category> Categories { get; set; }
} 
```

Product 的创建视图使用此 ViewModel。视图中的类别 ID 设置如下：

```
<div class="editor-field">
@Html.DropDownListFor(model => model.Product.Category.ID,new SelectList   
(Model.Categories,"ID","Name"))
    @Html.ValidationMessageFor(model => model.Product.Category.ID)
</div> 
```

当表单发布时，我得到了一个带有产品和选定类别对象集的视图模型实例，但是由于 Category 的“Name”属性具有 [Required] 属性，ModelState 无效。

就创建产品而言，我不需要或关心“名称”属性。我怎样才能让模型绑定工作，这样它就不会被报告为 ModelState 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:17:00.537

您应该为您的视图创建一个正确的 ViewModel。

imo 最好的方法是不要将您的域实体暴露给视图。

您应该从实体到视图模型进行简单的 DTO 展平。

那样的一堂课

```
public class ProductViewModel
{
   public int ID { get; set; }
   [Required]
   public string Name { get; set; }
   public int CategoryId? { get; set; }
   public SelectList Categories { get; set; }
} 
```

从您的控制器中，您将产品映射到您的视图模型

```
public ViewResult MyAction(int id)
{
   Product model = repository.Get(id);

   //check if not null etc. etc.

   var viewModel = new ProductViewModel();
   viewModel.Name = model.Name;
   viewModel.CategoryId = model.Category.Id;
   viewModel.Categories = new SelectList(categoriesRepo.GetAll(), "Id", "Name", viewModel.CategoryId)

   return View(viewModel);
} 
```

然后在响应帖子的操作中，将 viewModel 映射回产品

```
[HttpPost]
public ViewResult MyAction(ProductViewModel viewModel)
{
   //do the inverse mapping and save the product
} 
```

我希望你能明白

# php - 如何在基于 FK 关系的 DataMapper PHP 构造函数中水合自定义属性

> ID：10109113
> 
> 赞同：0
> 
> 时间：2012-04-11T15:29:39.820
> 
> 标签：php, codeigniter, codeigniter-datamapper

所以我有两个对象。

```
class Product extends DataMapper
{
    var $has_many = array('productrating');

    public $averageRating = null;

    function __construct($id = NULL)
    {
        parent::__construct($id);

        echo "my id: " . $this->id;
    }
} 
```

和

```
class ProductRating extends DataMapper
{
    var $table = "product_ratings";
    var $has_one = array('product');

    function __construct($id = NULL)
    {
        parent::__construct($id);
    }
} 
```

我最终想要完成的是`Product->$averageRating`使用基于与 ProductRatings 的 FK 关系的平均评级来填充属性。

我的第一个想法是访问关系，根据 ProductRating 行数进行数学运算，然后在构造函数中填充属性。但是我什至在访问构造函数中的对象时遇到了问题。这让我相信我可能会以错误的方式解决这个问题。如何使用 DataMapper 实现这一点？

我知道数学可以在视图页面中完成，但如果可能的话，我真的很想将它保留在模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:21:28.533

理想情况下，我希望在构造函数中设置此属性，但向 Product 类添加“getAverageRating”函数很容易。访问此函数中的对象按预期工作。

```
public function getAverageRating()
{
    $ratings = array();
    foreach($this->productrating as $rating)
    {
        array_push($ratings, $rating->rating);
    }

    if(count($ratings) > 0)
    {
        return array_sum($ratings) / $this->productrating->count();
    }

    return null;
} 
```

# iphone - NSSortDescriptor 未被调用

> ID：10109115
> 
> 赞同：1
> 
> 时间：2012-04-11T15:29:42.597
> 
> 标签：iphone, objective-c, ios, core-data

我正在尝试对实体文件夹执行提取请求，并且我希望一个文件夹命名`xyz`为排序时的最后一个对象。

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription 
                                   entityForName:@"Folder" inManagedObjectContext:appDelegate.managedObjectContext];

    [fetchRequest setEntity:entity];

    NSSortDescriptor *lastDescriptor =
    [[[NSSortDescriptor alloc] initWithKey:@"folderName" ascending:YES comparator:^NSComparisonResult(NSString* name1, NSString* name2) {
        NSLog(@"descriptor");
        if ([name1 isEqualToString:@"xyz"]) {
            return NSOrderedAscending;
        }
        if ([name2 isEqualToString:@"xyz"]) {
            return NSOrderedDescending;
        }

        return [name1 compare:name2];
    }] autorelease];  

    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:lastDescriptor]];
    [fetchRequest setFetchBatchSize:5];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:appDelegate.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    self.fetchedResultsController = theFetchedResultsController;
    self.fetchedResultsController.delegate=self;   

    [fetchRequest release];
    [theFetchedResultsController release];

    NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    } 
```

但是没有调用任何 NSLog 语句。他们应该这样做吗？并且文件夹 xyz 没有出现在最后，但所有内容最终都按字母顺序排序。难道我做错了什么？

**Edit:** Posted full code

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:11:28.267

此代码（您的代码）有效：

```
- (void)sortMe {

    NSDictionary *d0 = [NSDictionary dictionaryWithObject:@"efg" forKey:@"folderName"];
    NSDictionary *d1 = [NSDictionary dictionaryWithObject:@"xyz" forKey:@"folderName"];
    NSDictionary *d2 = [NSDictionary dictionaryWithObject:@"abc" forKey:@"folderName"];
    NSDictionary *d3 = [NSDictionary dictionaryWithObject:@"def" forKey:@"folderName"];
    NSArray *testMe = [NSArray arrayWithObjects:d0, d1, d2, d3, nil];

    NSSortDescriptor *lastDescriptor =
    [[NSSortDescriptor alloc] initWithKey:@"folderName" ascending:YES comparator:^NSComparisonResult(NSString* name1, NSString* name2) {
        NSLog(@"descriptor");
        if ([name1 isEqualToString:@"xyz"]) {
            return NSOrderedAscending;
        }
        if ([name2 isEqualToString:@"xyz"]) {
            return NSOrderedDescending;
        }

        return [name1 compare:name2];
    }];

    NSArray *sorted = [testMe sortedArrayUsingDescriptors:[NSArray arrayWithObject:lastDescriptor]];
    for (NSDictionary *d in sorted) {
        NSLog(@"value=%@", [d valueForKey:@"folderName"]);
    }
} 
```

我预测这段代码也会起作用：

```
NSError *error;
NSArray *result =  [appDelegate.managedObjectContext executeFetchRequest:fetchRequest error:&error];
// log the array 
```

我认为问题出在代码中其他地方的 NSFetchedResultsController 委托设置中。

# core-data - iOS中的键值类型强制

> ID：10109118
> 
> 赞同：2
> 
> 时间：2012-04-11T15:29:52.863
> 
> 标签：core-data, ios5, key-value-coding

我正在使用 Core Data 编写一个应用程序，该应用程序严重依赖于从字符串值设置属性。但是，我遇到了一个问题，因为 Core Data 在创建包装器方法时使用 NSNumber 来表示所有数字字段。因此，如果我使用键/值编码 setValue:forKey: 传入一个字符串，它会给我一个类型错误：

例如，我有一个对象类型“建筑”。在数据模型中，我有一个名为“fbFloors”的属性设置为整数 32。

然后，在我的代码中，我执行以下操作：

Building * b = [NSEntityDescription insertNewObjectForEntityForName:@"Building" inManagedObjectContext:ctx]; [b setValue:@"2" forKey:@"fbFloors"];

这会引发以下异常：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“属性的值类型不可接受：property = “fbFloors”；所需类型 = NSNumber; 给定类型 = __NSCFConstantString; 值 = 2。**

我希望它将字符串值强制为数字，但它不想。我尝试实现 coerceValueForFbFloors: 但它看起来只在 Mac OS X 中可用，而不是在 iOS 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:39:02.523

What if you did something like this...

```
- (NSNumber*)fbFloorsValue:(NSString*)valueString
{
    return [NSNumber numberWithInteger: [valueString integerValue]];
} 
```

where you have a method for each non-string attribute. Then when you set those values in a generic way...

Assume your key ("fbFloors") is in a variable called and your value ("2") is in a variable called ...

```
id valueObject;
SEL selector = NSSelectorFromString([NSString stringWithFormat:@"%@Value:", key]);
if (selector && [self respondsToSelector:selector]) {
    valueObject = [self performSelector:selector withObject:value];
} else {
    valueObject = value;
}
Building * b = [NSEntityDescription insertNewObjectForEntityForName:@"Building" inManagedObjectContext:ctx]; [b setValue:valueObject forKey:@key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:40:04.723

您必须将 NSNumber 的实际实例传递给 setValue。就像是：

[b setValue[NSNumber numberWithInt:2] forKey:@"fbFloors"];

如果您的数据显示为字符串，那么您可以使用 NSNumberFormatter 首先将其转换为 NSNumber。

# php - 在 PHP 中使用 $_POST 方法

> ID：10109122
> 
> 赞同：2
> 
> 时间：2012-04-11T15:30:01.517
> 
> 标签：php, mysql

所以，我有一个用户驱动的网站。用户可以发布他们想要的任何内容，甚至是图片。现在，我使用 PHP 将帖子存储在我的数据库表中，并使用 PHP 和 MySQL 检索显示每个用户配置文件上的帖子。现在，我想让用户能够删除他们上传的帖子，并且我想使用 $_POST 来执行此操作，而不是 $_GET。我已经知道如何使用 $_GET 了。我怎么能使用 $_POST？我可以在每个用户帖子旁边有一个隐藏的表单字段，并有一个隐藏字段保存 post_id，当用户点击“删除帖子”提交按钮时，它会调用删除 post.php 脚本？通过隐藏的表单字段，这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:32:19.393

您只需将您`form`的 '设置`method`为`post`，然后，具有某种`input`类型的`hidden`，并带有`value`要删除的 id 。

然后，在 PHP 中，使用`$_POST`而不是`$_GET`.

请确保验证删除 ID，因此用户不只是使用 FireBug 编辑 HTML 等等。

# css - CSS：将 div 放在 float:right 的右侧

> ID：10109127
> 
> 赞同：0
> 
> 时间：2012-04-11T15:30:28.380
> 
> 标签：css, positioning, css-float

嗨堆栈溢出社区。我有 2 个**动态**div，我想在容器内浮动。但我希望 HTML 上的最后一个 div 比第一个更靠右。我的问题是我无法更改 HTML，只能更改 CSS。

这将用于页面之间的导航，所以我可以让两个 div 都可见或只有一个。即使我只有一个 div，它也必须与容器的右侧对齐（这就是我想使用浮动的原因）。

这是一个 jsfiddle 供您更好地理解：http: [//jsfiddle.net/Cthulhu/yVCDZ/1/](http://jsfiddle.net/Cthulhu/yVCDZ/1/)

我希望“下一个”出现在“上一个”之后。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:36:33.413

代替浮动，使用`display:inline-block;`并设置容器的`text-align:right;`

我更新了你的小提琴：http: [//jsfiddle.net/mestekweb/yVCDZ/2/](http://jsfiddle.net/mestekweb/yVCDZ/2/)

至少，这应该让你开始。

ps - 你可能会遇到 IE <8 的问题。如果您需要，我也可以在那里提供一些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:35:57.790

据我了解，这可能是你想要的。您可以将**方向**与**display:inline-block;一起使用。**

检查这个[http://jsfiddle.net/yVCDZ/3/](http://jsfiddle.net/yVCDZ/3/)

& 还有另一种适用于所有浏览器的替代方案

检查这个[http://jsfiddle.net/yVCDZ/8/](http://jsfiddle.net/yVCDZ/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:38:22.967

使用定位快速更新：

```
#container {
    width:300px;
    height:70px;
    border:1px solid black;
    position: relative;

}

#previous {
    width:70px;
    height:70px;
    background:gold;
    position: absolute;
    right: 70px;
}

#next {
    width:70px;
    height:70px;
    background:lightblue;
    position: absolute;
    right: 0;
} 
```

# android - 在 AndEngine mEngine.setScene() 函数中不起作用

> ID：10109128
> 
> 赞同：0
> 
> 时间：2012-04-11T15:30:28.690
> 
> 标签：android, andengine

我一直试图让我的应用程序从一个场景变为另一个场景。我所做的是 onLoadScene() 我将它定向到一个具有场景的方法，而我试图做的是设置另一个场景在另一个方法中......但我得到的是第一个场景中的精灵卡在屏幕 ！

有人可以帮我教我如何在同一个班级从一个场景切换到另一个场景。

这是我的代码：

```
@Override
public Scene onLoadScene() {
    return splashGame();
}

private Scene splashGame(){
    final Scene sceneGameSplash = new Scene();

    sceneGameSplash.setBackgroundEnabled(false);

    System.out.println("pls work 1");
    final Sprite splashSprite = new Sprite(0,0, this.gameSplashScreenRegion);

    sceneGameSplash.registerUpdateHandler(new TimerHandler(3f, true, new ITimerCallback() {
          @Override
          public void onTimePassed(final TimerHandler pTimerHandler) {
            sceneGameSplash.unregisterUpdateHandler(pTimerHandler);

            System.out.println("pls work");

            splashUnjum();
          }
    }));

    splashSprite.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    splashSprite.setHeight(display.getHeight());
    splashSprite.setWidth(display.getWidth());

    sceneGameSplash.attachChild(splashSprite);

    return sceneGameSplash;

}

private Scene splashUnjum(){

    final Scene sceneUnjumSplash = new Scene();
    this.mEngine.setScene(sceneUnjumSplash);

     System.out.println("pls work 2");
    final Sprite splashUnjumSprite = new Sprite(0,0,this.gamevedaSplashScreenRegion);
    splashUnjumbleSprite.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    splashUnjumSprite.setHeight(display.getHeight());
    splashUnjumSprite.setWidth(display.getWidth());

    sceneUnjumSplash.attachChild(splashUnjumSprite);

    sceneUnjumSplash.registerUpdateHandler(new TimerHandler(3f, true, new ITimerCallback() {
        @Override
        public void onTimePassed(final TimerHandler pTimerHandler) {
            sceneUnjumSplash.unregisterUpdateHandler(pTimerHandler);

            System.out.println("pls work yo");

            mainMenu();
        }
    }));

    return sceneUnjumSplash;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:26:42.030

我不确定这是问题所在，但我认为您应该从 splashUnjum() 中删除此行

```
this.mEngine.setScene(sceneUnjumSplash); 
```

将对 splashUnjum() 的调用替换为

```
this.mEngine.setScene(splashUnjum()); 
```

您应该做的另一件事是确保更改发生在 updateThread

# ios - 显示键盘时 UIKeyboardWillShowNotification 和上滑

> ID：10109129
> 
> 赞同：0
> 
> 时间：2012-04-11T15:30:32.640
> 
> 标签：ios, keyboard, notifications

这是我的代码：

```
-(void)setViewMovedUp:(BOOL)movedUp
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.2]; // if you want to slide up the view
    [UIView setAnimationBeginsFromCurrentState:YES];

    CGRect rect = scroll.frame;
    if (movedUp)
    {
        rect.size.height += kOFFSET_FOR_KEYBOARD;
        rect.origin.y -= kOFFSET_FOR_KEYBOARD;
    }
    else
    {
        rect.size.height -= kOFFSET_FOR_KEYBOARD;
        rect.origin.y += kOFFSET_FOR_KEYBOARD;

    }
    scroll.frame = rect; 
    [UIView commitAnimations];
}

- (void)keyboardWillHide:(NSNotification *)notif {
    [self setViewMovedUp:NO];
}

- (void)keyboardWillShow:(NSNotification *)notif{
    [self setViewMovedUp:YES];
}

- (void)viewWillAppear:(BOOL)animated
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) 
                                                 name:UIKeyboardWillShowNotification object:self.view.window];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) 
                                                 name:UIKeyboardWillHideNotification object:self.view.window];
}

- (void)viewWillDisappear:(BOOL)animated
{
    // unregister for keyboard notifications while not visible.
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

问题是，我怎样才能将它指定为仅适用于 TextView3，而不适用于 TextView2 或 TextView1。背景是，TextView1 和 TextView2 不需要，因为在我的视图之上。只有 TextView3 是不可读的 TextView，因为键盘被覆盖并且必须更正视图才能阅读我写的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:38:23.993

为 textView3 分配一个特殊的标签，实现 TextView 委托方法——`(void)textViewDidBeginEditing:(UITextView *)textView;`在这里，您将检查 textView 标记是否等于 textView 3 标记调用您的函数`-(void)setViewMovedUp:(BOOL)movedUp`。

更多代码：

好的，您需要像这样将 TextViewDelegate 导入到您的 viewController 中：在 .h viewController 文件中->`viewController : UIViewController<UITextVIewDelegate>`

然后在 viewDidload for ex 中分配这样的标签：`textView3.tag = 222;`

然后采用我在“textViewDidBeginEdit”上方编写的委托方法，并在内部创建一个 if 语句来检查 textView 标记是否等于 222 调用您的函数。

这是我现在能描述的最好的，因为我是用 iPhone 写的……祝你好运。

# html - 如何为 HTML 页面创建渐变背景

> ID：10109132
> 
> 赞同：4
> 
> 时间：2012-04-11T15:30:39.890
> 
> 标签：html, css, xhtml

我正在学习HTML。

为 HTML 页面创建渐变背景的最佳方法是什么？

到目前为止，这就是我的背景：

```
body style="background-color:Powderblue" 
```

我知道这不是渐变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T15:34:28.803

这不能在 html 中完成，但可以在 css（特别是 css3）中完成。

您必须在页面正文中添加一个类，或者在其中添加一个包含所有内容的 div。您可以使用[css 渐变生成器](http://gradients.glrzad.com/)来获取要放入 css 类的代码。

这是一个关于 div 的简单示例：http: [//jsfiddle.net/8fDte/](http://jsfiddle.net/8fDte/)

如果你想要它在身体上，你也可以执行以下操作。请注意，您必须链接到将存储您的样式的 css 文件。

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
  <HEAD>
    <LINK href="PathToCss.css" rel="stylesheet" type="text/css">
  </HEAD>
  <BODY class="MyGradientClass">

  </BODY>
</HTML> 
```

**CSS**

此代码可以由上面链接的 CSS 梯度生成器生成。

```
.MyGradientClass
{
    height:200px;
     background-image: linear-gradient(bottom, rgb(113,61,62) 25%, rgb(147,92,93) 63%, rgb(177,120,121) 82%);
    background-image: -o-linear-gradient(bottom, rgb(113,61,62) 25%, rgb(147,92,93) 63%, rgb(177,120,121) 82%);
    background-image: -moz-linear-gradient(bottom, rgb(113,61,62) 25%, rgb(147,92,93) 63%, rgb(177,120,121) 82%);
    background-image: -webkit-linear-gradient(bottom, rgb(113,61,62) 25%, rgb(147,92,93) 63%, rgb(177,120,121) 82%);
    background-image: -ms-linear-gradient(bottom, rgb(113,61,62) 25%, rgb(147,92,93) 63%, rgb(177,120,121) 82%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.25, rgb(113,61,62)),
        color-stop(0.63, rgb(147,92,93)),
        color-stop(0.82, rgb(177,120,121))
    );   
}​ 
```

**编辑：**

正如 Rory 所提到的，并非所有现代浏览器都完全支持 CSS3。但是，有一些工具如[PIE CSS](http://css3pie.com/)可以帮助 IE 接受一些 CSS3 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:33:38.547

仅使用 HTML 是不可能制作渐变的。CSS3 中有一些新功能允许您创建渐变，但并非所有浏览器都完全支持这些功能。

如果您想了解更多关于 CSS3 渐变的信息，请阅读[这篇文章](http://css-tricks.com/css3-gradients/)

这里还有一个方便的在线工具，可以创建 CSS 代码来创建您的规范的[渐变](http://gradients.glrzad.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T04:52:59.467

在外部表单中设置样式是一种更简单、更快捷、更有效的方式来设置网页样式，尤其是当您有多个链接到您的样式表的页面时。这允许您使用一行代码同时更改所有页面的整体样式。没关系，但是如果您有一个单独的页面，或者如果您需要一个简单的页面以使其本身看起来不同，则内联样式就足够了，但并不常见。请参阅下面的快速示例。

（每个页面的内联样式）

```
<!doctype html>
<html>
<head>
   <title>THIS WOULD GET AGGRAVATING IF DONE ON 10 PAGES!</title>
   <style="text/css">
      body {background: blue; font-family: Arial, Georgian, Sans-serif; font-size: 19px;}
      h1 {text-align: center, font-weight: bolder;}
      p {text-indent: 20px; line-height: 25px;}
   </style>
</head>
<body>
</body>
</html> 
```

....或者它会像这样

```
 <!doctype html>
      <!doctype html>
<html>
<head>
   <title>THIS CHANGES SAME PARAMETERS ON 100 PAGES WITH SAME LINK INSTANTLY!</title>
   <link rel="stylesheet" href="/cssfolder/yourcssheet.css" />

</head>
<body>
</body> 
```

你的“yourcssheet.css”样式表看起来像这样

```
/*BEGINNING OF STYLESHEET, NO OTHER CODING NECESSARY BUT SOME MIGHT PUT @meta charset utf-8 AT THE TOP BUT IS NOT NEEDED TO FUNCTION*/

    body {background: blue; font-family: Arial, Georgian, Sans-serif; font-size: 19px;}
      h1 {text-align: center, font-weight: bolder;}
      p {text-indent: 20px; line-height: 25px;}

/*END OF STYLESHEET*/ 
```

现在，您无需遍历每个单独页面标题上的每种样式，只需使用一个简单的外部工作表将其全部更改，所有这些工作表都通过以下链接在一起。

希望这可以帮助。jhawk2k14@gmail.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:35:22.607

使用这个[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

CSS 应该在单独的样式表中应用......永远不要应用内联样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T09:22:45.257

有许多创建渐变的在线工具。您可以使用它们，也可以创建自己的

> > 只需在此处查看：[http ://www.cssmatic.com/gradient-generator](http://www.cssmatic.com/gradient-generator)

您也可以通过这种方式创建自己的

**CSS**

```
background-image: -webkit-linear-gradient(bottom, rgb(color_code) 25%, rgb(color_code) precent%, rgb(color_code) percent%);
background-image: -moz-linear-gradient(bottom, rgb(color_code) 25%, rgb(color_code) precent%, rgb(color_code) percent%);
background-image: -ms-linear-gradient(bottom, rgb(color_code) 25%, rgb(color_code) precent%, rgb(color_code) percent%);
background-image: -o-linear-gradient(bottom, rgb(color_code) 25%, rgb(color_code) precent%, rgb(color_code) percent%);
background-image: linear-gradient(bottom, rgb(color_code) 25%, rgb(color_code) precent%, rgb(color_code) percent%); 
```

# wix - WiX：使组件可升级，但不可卸载

> ID：10109142
> 
> 赞同：0
> 
> 时间：2012-04-11T15:31:23.650
> 
> 标签：wix, windows-installer

我正在使用 WiX 创建一个安装程序（我必须说我真的不喜欢它，但这不是 WiX 的错，而是更多的 MSI。我非常赞赏 Rob Mensching 在这里和其他地方的帮助）。

是否可以创建一个组件，使其：

*   可以更新（通过补丁和主要升级）
*   自安装以来已更改的文件将不会被卸载（如果未更改，它们是否也未卸载无关紧要）
*   更新时适用普通文件版本控制规则（即，自安装后更改的未版本化文件未更新，其他文件则更新）

我开始认为这是不可能的。将组件标记为永久意味着该组件将永远不会被卸载，这意味着它不可更新（至少不能通过主要升级；补丁怎么样？）。

标记组件 NeverOverwrite 不会阻止它被卸载，即使用户更改了未版本化的 keyFile（因此用户的工作被删除）。

我赞赏所有明确的答案，即使它们是否定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:51:22.857

我没有尝试过，但您可能可以使用自定义操作来执行此操作。有关示例，请参阅[从 MSI 到 WiX，第 5 部分。](http://blogs.technet.com/b/alexshev/archive/2008/02/21/from-msi-to-wix-part-5-custom-actions.aspx)该`Custom Action Type 38`示例包括：

```
<Directory Id="INSTALLDIR" Name="Minimal" LongName="MinimalInstallation">
  <Component Id="Component1"
             Guid="{A77C5B06-132D-4884-8E17-EA10A83C812D}">
    <File Id="ReadMe" DiskId="1" Name="Readme.txt" Source="Readme.txt" Vital="yes" KeyPath="yes" />
    <!--RemoveFile Id="RemoveCopy" Name="ReadMe2.txt" On="uninstall" /-->
  </Component>
</Directory>

....

<CustomAction Id="CopyReadMe"
              Script="vbscript">
  <![CDATA[
  Set fso = CreateObject("Scripting.FileSystemObject")
  path = Session.Property("INSTALLDIR")
  fso.CopyFile path & "ReadMe.txt", path & "ReadMe2.txt"
  ]]>
</CustomAction>

<InstallExecuteSequence>
  <Custom Action="CopyReadMe" After="InstallFinalize">Not Installed</Custom>
</InstallExecuteSequence> 
```

此处安装了 Readme.txt，并使用 vbscript 自定义操作复制到 ReadMe2.txt。如果您在 vbscript 中进行一些版本和/或修改日期检查，您可以自行控制 ReadMe2.txt 是否被覆盖。并且没有 RemoveFile，wix 不会卸载 ReadMe2.txt，因为它不知道该文件存在。

对于升级，可能会在安装之前使用不同的自定义操作将 ReadMe2.txt 复制回 Readme.txt。这样，您可以让 wix 处理普通文件版本控制规则，以确定是否可以更新 Readme.txt。然后您不必将版本处理添加到 vbscript。

# jsf - JSF 2 - 使用自定义动作侦听器重置 ajax 提交的值，以便从模型属性中提取新值

> ID：10109143
> 
> 赞同：1
> 
> 时间：2012-04-11T15:31:24.993
> 
> 标签：jsf, richfaces, el

我正在使用部署到 Tomcat 7 服务器的 JSF 2 Mojarra、RichFaces 4.1 和 EL 2.2。

在我的页面上，我有两个 a4j:regions 包含在同一个表单中。顶部区域是实体的 dataTable 列表。底部区域是详细信息编辑器面板。您从列表中选择一个实体，其详细信息会加载到编辑面板中。详细信息面板有自己的验证规则和提交按钮。我现在遇到了一个众所周知的问题，即当我将第二个实体加载到详细信息表单中时，JSF 没有重置提交的值并出现验证错误。

在研究解决这个问题的过程中，我发现了[BalusC 的这个博客](http://balusc.blogspot.com/2012/03/reset-non-processed-input-components-on.html)。他很好地分解了重置问题，并推荐[了这个 JSF 2 action-listener](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/eventlistener/ResetInputAjaxActionListener.java)来解决这个问题。

我将 ResetInputAjaxActionListener 合并到我的项目中，作为我 faces-config.xml 中定义的动作侦听器。但是，现在，代码在没有侦听器的情况下失败，它正在工作（只是没有重置提交的/本地/模型值）。

我的 JSF 页面包含一个 dataTable 并且每一行都有一个编辑 commandLink 来将该行的实体加载到编辑器中：

```
<a4j:commandLink action="#{editController.load(entity.id)}" render="@form" execute="@this" value="Edit"/> 
```

由于我使用的是 EL 2.2，因此我将实体的主键直接传递给 load 方法。如果没有动作监听器，这将按预期工作。但是，当我启用动作侦听器时，代码会引发以下异常：

```
Caused by: javax.faces.FacesException: #{editController.load(entity.id)}: java.lang.NullPointerException
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:110)
at com.buksoft.automaint.web.util.ResetInputAjaxActionListener.processAction(ResetInputAjaxActionListener.java:163)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at org.richfaces.component.RowKeyContextEventWrapper.broadcast(RowKeyContextEventWrapper.java:104)
at org.richfaces.component.UIDataAdaptor.broadcast(UIDataAdaptor.java:452)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
... 51 more
Caused by: javax.faces.el.MethodNotFoundException: java.lang.NullPointerException
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:104)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
... 58 more
Caused by: java.lang.NullPointerException
at java.lang.Class.isAssignableFrom(Native Method)
at org.apache.el.util.ReflectionUtil.isAssignableFrom(ReflectionUtil.java:299)
at org.apache.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:172)
at org.apache.el.parser.AstValue.invoke(AstValue.java:251)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
... 59 more 
```

在我看来，EL 参数值被设置为 null，当 EL 尝试将 null 绑定到操作方法的参数（预期为 Long 值）时，这会导致 NullPointerException。

现在是真正让我难过的部分。为了缩小错误范围，我注释掉了 ResetInputAjaxActionListener 的功能，使其基本上是只读的。我发现如果 findAndAddEditableValueHolders() 方法的这些行执行，那么在 ResetInputAjaxActionListener 完成后调用的 ActionListenerImpl.processAction() 会抛出异常：

```
if (target instanceof EditableValueHolder) {
    inputs.add((EditableValueHolder) target);
}
else if (context.getIdsToVisit() != VisitContext.ALL_IDS) {
    // Render ID didn't point an EditableValueHolder. Visit all children as well.
    findAndAddEditableValueHolders(VisitContext.createVisitContext(
    context.getFacesContext(), null, context.getHints()), target, inputs);
} 
```

请参阅上面链接的 ResetInputAjaxActionListener 类中的 findAndAddEditableValueHolders() 方法。

而且问题代码实际上只在 else if 中，这让我很困惑，因为它是对方法本身的递归调用。几乎就像 createVisitContext() 方法正在修改后备视图树一样。正如我所说，如果我去掉所有进行任何真正更改的变异代码，并只执行这个树访问代码（只读），就会抛出异常。

谁能解释访问组件树（而不是修改其中的任何内容）如何破坏 EL 方法参数功能？

# c# - 如果 LINQ 中的列为空，如何忽略“where”和“order by”条件

> ID：10109144
> 
> 赞同：5
> 
> 时间：2012-04-11T15:31:27.337
> 
> 标签：c#, sql, linq

我有交易对象的列表，并希望根据当前查看用户的特定条件对它们进行排序。

我遇到的问题是，为了在 where 子句中添加条件，首先我需要检查它是否为空，以防止空指针异常。这会导致列 null 的记录被过滤掉（我想将它们包含在列表的底部）。

如果该列为空并且仍将它们附加到结果集中，如何修改查询以使其忽略条件（位置和排序依据）？

这是一个示例查询：

```
transactions = transactions
                    .Where(t => t.PurchaseRequisition != null && 
                    t.Award != null && t.PurchaseRequisition.RequisitionedBy != null)
                    .OrderBy(t => t.Award.ContractNumber).
                    ThenBy(t => ToSafeString(t.Award.ContractNumber)).
                    ThenBy(t => ToSafeString(t.PurchaseRequisition.RequisitionedBy.FullName));

public string ToSafeString(string s)
{
    return s ?? String.Empty;
} 
```

// 我希望将 PurchaseRequisition 或 Award 为 null 的记录附加到结果集中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:36:00.363

您只需要修改您的`OrderBy`and`ThenBy`子句：

```
.OrderBy(t => t.Award == null || t.Award.ContractNumber == null)
.ThenBy(t => t.Award == null ? "" : ToSafeString(t.Award.ContractNumber))
.ThenBy(t => t.PurchaseRequisition == null ? "" 
             : ToSafeString(t.PurchaseRequisition.RequisitionedBy.FullName)); 
```

现在您可以完全删除该`Where`子句。

# java - 在java中不使用数据库的情况下保留项目的历史记录

> ID：10109146
> 
> 赞同：0
> 
> 时间：2012-04-11T15:31:31.777
> 
> 标签：java, file-io, object-persistence

我有一个小型 java 实用程序应用程序，它在远程计算机上执行任务。这个应用程序将为用户提供一个下拉/组合框，他们可以在其中输入他们希望连接的计算机的 IP 地址或主机名。如果用户可以在下拉列表中拥有他们连接的项目/主机的历史记录，那就太好了。

我认为我可以在可分发的 jar 中创建一个文件并使用它来维护历史记录。但是写入 jar 内的文件似乎是不可能的？替代方法是使用位于 jar 之外的文本文件、数据库等。但这不是我想做的，因为我的实用程序只有一个文件，我希望它完全独立于任何外部文件。此外，在您的 jar 文件周围放置一个文本文件或在每次运行应用程序时创建一个文本文件也不是很好。

考虑到这种情况，我可以使用哪些选项？是否有任何 API 可以帮助存储或保留历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:34:07.970

为什么不将此信息与用户主目录中的隐藏文件一起存储？许多应用程序做同样的事情。

可以通过这种方式获取用户主目录

```
String userhome = System.getProperty("user.home"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:39:37.583

我建议将一些`.dat`文件保存在与 JAR 关联的某个位置。可以在同一个目录中，或者在用户的家中（如@dash1e 建议的那样）以避免任何权限问题。我想你会发现这是最简单的解决方案。

另一种选择是使用可以捆绑到 JAR 中的基于 Java 的数据库解决方案（请参阅[Apache Derby](http://db.apache.org)等）。请注意，这会在*某处*创建文件，但您不必担心文件级管理，因为您只需将其作为数据库进行交互。

如果您真的坚持避免维护自己的文件，那么最后一个选择是使用[Java Preferences API](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)，它提供了一种与操作系统无关的方式，可以将系统上的数据存储在某个模糊位置。这可以说是对该 API 目标的误用，但会完成您的要求。

# android - 以编程方式从 Android Play 购买 Android 应用程序？

> ID：10109147
> 
> 赞同：0
> 
> 时间：2012-04-11T15:31:31.740
> 
> 标签：android

我正在制作一个为客户购买其他应用程序的应用程序。我需要我的应用程序来购买 Android 市场上的其他应用程序。我怎样才能做到这一点？

编辑：我将为买家应用付费。并且需要一些能够从 google play 购买应用程序的 api。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:34:53.153

你不能。您可以链接到商店中的应用程序，但用户必须自己购买。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:34:59.720

你不能。他们的整个购买体验是故意设计为通过 Google Play 商店应用程序进行的，因此您可以合理地确定您是通过 Google 付款，而不是某些诈骗应用程序等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T15:36:17.613

最好的方法是使用应用程序的 url 启动 google play，如下所述：http: [//developer.android.com/guide/publishing/publishing.html#marketintent](http://developer.android.com/guide/publishing/publishing.html#marketintent)

# iphone - 4位密码类型视图：数字和光标控制

> ID：10109150
> 
> 赞同：1
> 
> 时间：2012-04-11T15:31:39.503
> 
> 标签：iphone, objective-c, xcode4, interface-builder

第一次发布到 Stackoverflow，但现在一直在寻找答案。学习 Objective-C & XCode 并一直在创建简单的项目。目前，我想尝试一个屏幕，用户将输入一个 4 位密码代码，其中每个单独的数字在单独的文本字段中。1）如何使光标在第一个文本字段中，导致应用程序启动时键盘自动出现

2）如何使文本字段只接受一位数字。您可以在界面生成器中的文本字段属性中执行此操作吗？还是您必须以编程方式执行此操作？

3) 如何使光标在前一个文本字段被填充后跳转到下一个文本字段。当问题 #2 完成后，这会自动发生吗？

将不胜感激任何帮助...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:44:51.503

好的，你去 1\. 你必须在 IB 中创建 4 个 UITextField，比如 textField1、textField2、textField3、textField4。并调用 [textField1 becomeFirstResponder]; 这将使光标在您的 textfield1 中。

2.要使文本字段只接受一位数字，您必须这样做

```
 -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    textField.text  =   string;
    if ([string length] > 0) {
    if ([textField isEqual:textField1]) {
        [textField2 becomeFirstResponder];

    }else if([textField isEqual:textField2]) {

        [textField3 becomeFirstResponder];

    }else if([textField isEqual:textField3]) {

        [textField4 becomeFirstResponder];

    }else if([textField isEqual:textField4]) {

        [textField resignFirstResponder];
    }
}
return FALSE; 
```

}

您必须以编程方式执行此操作。

3.与ans2相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:34:11.707

创建一个您实际输入的隐藏 uitextfield。然后创建四个 'seen' uitextfields 并在用户键入隐藏字段时在每个字段中添加一个项目符号字符。

这是做你想做的最简单的方法。

# windows - 在 Tomcat 中作为 win 服务远程调试 Alfresco 4.0

> ID：10109151
> 
> 赞同：0
> 
> 时间：2012-04-11T15:31:41.083
> 
> 标签：windows, debugging, tomcat, service, alfresco

我必须在 Tomcat_6.0.35中对[Alfresco 4.0进行一些远程调试。](http://www.alfresco.com/)[官方文档](http://docs.alfresco.com/4.0/index.jsp?topic=/com.alfresco.enterprise.doc/tasks/debug-installation.html)说我应该设置 env 变量

> JAVA_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,地址=8082

我做到了，但它只适用于 startup.bat 。Alfresco 4.0 将 Tomcat 作为 Windows 服务启动并调用：

> C:\Alfresco\tomcat\bin\tomcat6.exe //RS//alfrescoTomcat

所以我需要对此服务进行远程调试，并尝试将 Tomcat 的默认服务调用更改为：

> 1) c:\Alfresco\tomcat\bin\tomcat6.exe //RS//alfrescoTomcat --JvmOptions=-Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8082;

或者

> 2) c:\Alfresco\tomcat\bin\tomcat6.exe //TS//alfrescoTomcat --JvmOptions=-Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8082;

它成功启动了 Tomcat，我可以调试这个服务器，但是 Alfresco 4.0 抛出异常或挂起......我应该怎么做才能调试这个服务？

我的日志：

> 在地址监听传输 dt_socket：8082 11.04.2012 19:13:28 org.apache.catalina.core.AprLifecycleListener init INFO：已加载基于 APR 的 Apache Tomcat 本机库 1.1.20。11.04.2012 19:13:28 org.apache.catalina.core.AprLifecycleListener 初始化信息：APR 功能：IPv6 [true]，sendfile [true]，接受过滤器 [false]，随机 [true]。11.04.2012 19:13:28 org.apache.coyote.http11.Http11AprProtocol 初始化信息：在 http-8080 上初始化 Coyote HTTP/1.1 11.04.2012 19:13:28 org.apache.coyote.ajp.AjpAprProtocol 初始化信息：正在初始化Coyote AJP/1.3 on ajp-8009 11.04.2012 19:13:29 org.apache.coyote.http11.Http11Protocol init INFO: Initializing Coyote HTTP/1.1 on http-8443 11.04.2012 19:13:29 org.apache.catalina .startup.Catalina 加载信息：初始化在 1145 毫秒内处理 11.04.2012 19:13:29 org.apache.catalina.core。StandardService 启动信息：启动服务 Catalina 11.04.2012 19:13:29 org.apache.catalina.core.StandardEngine 启动信息：启动 Servlet 引擎：Apache Tomcat/6.0.29 11.04.2012 19:13:29 org.apache.catalina .startup.HostConfig deployDescriptor INFO：部署配置描述符 alfresco.xml 11.04.2012 19:13:30 org.apache.catalina.core.StandardContext addApplicationListener INFO：监听器“org.apache.myfaces.webapp.StartupServletContextListener”已配置为这个上下文。重复定义已被忽略。11.04.2012 19:13:32 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext 04.2012 19:13:29 org.apache.catalina.startup.HostConfig deployDescriptor INFO：部署配置描述符 alfresco.xml 11.04.2012 19:13:30 org.apache.catalina.core.StandardContext addApplicationListener INFO：监听器“org.apache .myfaces.webapp.StartupServletContextListener" 已为此上下文配置。重复定义已被忽略。11.04.2012 19:13:32 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext 04.2012 19:13:29 org.apache.catalina.startup.HostConfig deployDescriptor INFO：部署配置描述符 alfresco.xml 11.04.2012 19:13:30 org.apache.catalina.core.StandardContext addApplicationListener INFO：监听器“org.apache .myfaces.webapp.StartupServletContextListener" 已为此上下文配置。重复定义已被忽略。11.04.2012 19:13:32 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext 重复定义已被忽略。11.04.2012 19:13:32 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext 重复定义已被忽略。11.04.2012 19:13:32 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext
> 
> ...
> 
> 创建名为“sessionFact s 路径资源 [alfresco/hibernate-context.xml] 的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.Hi bernate 方言必须显式设置 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFacto
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> gframework.beans.factory.BeanCreationException：在类路径 hibernate-context.xml 中定义名称为“transactionManager”的 bean 创建时出错]：在设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；org.springframework.beans.factory.BeanCreationException：在类 esco/hibernate-context.xml 中创建名称为“sessionFactory”的 bean 时出错]：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException: Hib 被显式设置 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFacto
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> gframework.beans.factory.BeanCreationException：在类路径 res rnate-context.xml 中创建名称为“sessionFactory”的 bean 时出错]：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException: Hibernate Di itly set gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.ja
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> nate.HibernateException：必须显式设置休眠方言 nate.dialect.DialectFactory.determineDialect(DialectFactory.java:59) nate.dialect.DialectFactory.buildDialect(DialectFactory.java:39) nate.cfg.SettingsFactory.determineDialect(SettingsFactory.java: 426) nate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:128) nate.cfg.Configuration.buildSettings(Configuration.java:2073) nate.cfg.Configuration.buildSessionFactory(Configuration.java:1298) gframework.orm.hibernate3。 LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860) gframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779) gframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211) gframework.beans.factory.support。AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean（AbstractAutowireCapableBeanFactory.ja
> 
> org.apache.catalina.core.StandardContext listenerStart nding context initialized event to listener instance of class org.alfresco.web.app.ContextListener beans.factory.BeanCreationException: Error created bean with name 'encryptionKeysRegistry' defined in class path resour ion-context .xml]：在设置 bean 属性“transactionService”时无法解析对 bean“transactionService”的引用 org.springframework.beans.factory.BeanCreationException：在 [alfresco/core-services-context.xml ]：在设置 bean 属性时无法解析对 bean 'transactionManager' 的引用'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException: Error created bean with name ' 事务类路径资源 [alfresco/hibernate-context.xml]：设置 onFactory 时无法解析对 bean 'sessionFactory' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [alfresco/hibernate-context.xml] 中创建名称为 ned 的 bean 时出错：调用 init 方法失败；嵌套异常是 org.h ception：必须显式设置休眠方言 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10 factory.BeanCreationException：在类路径资源 [alfresco/hibernate-context.xml] 中创建名称为 'ned 的 bean 时出错：init 方法的调用失败；嵌套异常是 org.h ception：必须显式设置休眠方言 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10 factory.BeanCreationException：在类路径资源 [alfresco/hibernate-context.xml] 中创建名称为 'ned 的 bean 时出错：init 方法的调用失败；嵌套异常是 org.h ception：必须显式设置休眠方言 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFacto
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580
> 
> gframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization（AbstractApplicationContext.java:89
> 
> 虽然设置 bean 正确的嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名称为“sessionFact s 路径资源 [alfresco/hibernate-context.xml] 的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.Hi bernate 方言必须显式设置 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFacto
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> gframework.beans.factory.BeanCreationException：在类路径 hibernate-context.xml 中定义名称为“transactionManager”的 bean 创建时出错]：在设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；org.springframework.beans.factory.BeanCreationException：在类 esco/hibernate-context.xml 中创建名称为“sessionFactory”的 bean 时出错]：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException: Hib 被显式设置 gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:10
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFacto
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> gframework.beans.factory.BeanCreationException：在类路径 res rnate-context.xml 中创建名称为“sessionFactory”的 bean 时出错]：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException: Hibernate Di itly set gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.ja
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean（AbstractAutowireCapableBeanFactory.java
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:4
> 
> gframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) gframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) gframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory .java:288) gframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) gframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
> 
> nate.HibernateException：必须显式设置休眠方言 nate.dialect.DialectFactory.determineDialect(DialectFactory.java:59) nate.dialect.DialectFactory.buildDialect(DialectFactory.java:39) nate.cfg.SettingsFactory.determineDialect(SettingsFactory.java: 426) nate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:128) nate.cfg.Configuration.buildSettings(Configuration.java:2073) nate.cfg.Configuration.buildSessionFactory(Configuration.java:1298) gframework.orm.hibernate3。 LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860) gframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779) gframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211) gframework.beans.factory.support。AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory
> 
> gframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean（AbstractAutowireCapableBeanFactory.ja
> 
> bind.v2.ClassFactory$1@2552fafd]) [java.util.WeakHashMap] (value [{class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@5bee9e20}]) b 它当web应用被阻止了。这很可能造成内存泄漏。org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap ication [/alfresco] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@ecf7607 pe [org.apache.cxf.bus.CXFBusImpl ] (value [org.apache.cxf.bus.CXFBusImpl@564dcd29]) 但在 web ped 时未能将其删除。这很可能会造成内存泄漏。ger.repositorySelector 可能由于类重新加载错误而为空，使用 NOPLoggerRepository.vocationTargetException W3CDomHandler=java.lang.ref.WeakReference@5bee9e20}]) b 当 Web 应用程序停止时。这很可能造成内存泄漏。org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap ication [/alfresco] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@ecf7607 pe [org.apache.cxf.bus.CXFBusImpl ] (value [org.apache.cxf.bus.CXFBusImpl@564dcd29]) 但在 web ped 时未能将其删除。这很可能会造成内存泄漏。ger.repositorySelector 可能由于类重新加载错误而为空，使用 NOPLoggerRepository.vocationTargetException W3CDomHandler=java.lang.ref.WeakReference@5bee9e20}]) b 当 Web 应用程序停止时。这很可能造成内存泄漏。org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap ication [/alfresco] 创建了一个 ThreadLocal，其键类型为 [java.lang.ThreadLocal]（值 [java.lang.ThreadLocal@ecf7607 pe [org.apache.cxf.bus.CXFBusImpl ] (value [org.apache.cxf.bus.CXFBusImpl@564dcd29]) 但在 web ped 时未能将其删除。这很可能会造成内存泄漏。ger.repositorySelector 可能由于类重新加载错误而为空，使用 NOPLoggerRepository.vocationTargetException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:18:49.557

是的，我的命令行参数错误。当参数以“ **--** ”为前缀时，之前的设置被删除。如果我使用前缀“ **++** ”，则会保存以前的设置并且一切正常。所以打电话：

> C:\Alfresco\tomcat\bin\tomcat6.exe //RS//alfrescoTomcat ++JvmOptions "-Xdebug;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000"

一切正常:) 谢谢！

# entity-framework - 0...1 关联上的实体框架基数问题

> ID：10109152
> 
> 赞同：6
> 
> 时间：2012-04-11T15:31:53.823
> 
> 标签：entity-framework, model-associations, entity-framework-4.3, cardinality

我有如下所示的数据库表：

![架构图](../Images/8103e1b2ccb6ce3c43fef9f5f6266edf.png)

A`Task`可以映射到 a `Module`，或者根本不映射 (0...1)。我首先使用实体​​框架数据库，当我从数据库生成模型时，任务实体与模块一起作为一个集合（0个或更多）出现。所以我打开了我的 EDMX 并将 Task 上的“模块”导航属性更改为 0...1。

![EDMX](../Images/0643c19140acb798d817514b97afdc4a.png)

现在，当我尝试编译时，出现此错误：

> 错误 3003：从第 1241 行开始映射片段时出现问题：鉴于 Association End Member Task 的基数，它应该映射到表 TaskModule 的关键列。要么修复映射，要么改变这一端的多样性。

我不明白我需要做什么来解决这个问题。我查看了关联详细信息，但看不到问题所在。我知道我可能错过了一些愚蠢的东西，但我完全被困住了。关联属性：

![任务模块关联](../Images/212a4f56ef3250884a086ffa6afbb5af.png)

Visual Studio 2010 SP1、实体框架 4.3.1.0、SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:43:14.493

一种方法是重新定义 TaskModule 表的主键。而不是主键是（TaskId，ModuleName），它需要只是（TaskId）。然后从数据库中更新模型并手动更改任何未从该更新中获取的关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:42:09.457

那么您的数据库架构与您提供的描述不正确：

TaskModule 表涉及多对多关系，而不是多对一或零。

在 edmx 中，多对多关系表不显示，但它们仍然存在于数据库中。

所以你应该修复你的数据库，或者对 EF 提出的关系感到满意！

# objective-c - UIAlertView 外部应用程序

> ID：10109153
> 
> 赞同：0
> 
> 时间：2012-04-11T15:31:57.760
> 
> 标签：objective-c, uialertview

在 iOS 上，哪个是用于在应用程序外部显示 UIAlertView 的类名，就像通知系统一样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:33:35.503

您需要使用本地通知，或设置苹果的远程推送通知服务。

[本地通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

[推送通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1)

# php - MySQL 并发连接 - 从数据库加载文本

> ID：10109156
> 
> 赞同：0
> 
> 时间：2012-04-11T15:32:02.250
> 
> 标签：php, mysql, concurrency

如果我有一个页面，其内容是从 MySQL 数据库生成的（显示单元格内容的简单查询，HTML 内容），有多少用户可以一次访问该页面而不会导致数据库崩溃？

我必须在多个域中显示相同的数据，因此我不会在三个域上复制页面，而是将其加载到 mysql 中并使用此路由显示它。但是，我想知道在不使数据库崩溃的情况下我可以处理多少并发连接。

谁能指出我正确的方向来找出这个问题？我假设这个小查询不应该是一个巨大的负载，但如果 10,000 名访问者同时点击它，那会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:59:23.630

您需要检查您的 max_connections 设置，您可以通过查看以下链接获取更多信息：[http ://www.electrictoolbox.com/update-max-connections-mysql/](http://www.electrictoolbox.com/update-max-connections-mysql/)

你在使用任何框架吗？如果是这样，大多数都内置了缓存，这应该可以解决问题，假设信息没有随时更新。即使是这样，也请尝试缓存您认为不会经常更改的页面的任何部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:01:16.663

> 有多少用户可以一次访问该页面而不会导致数据库崩溃？

他们全部。

这是一个糟糕的问题。

数据库不应该因为用户正在尝试连接而崩溃。有多少 php 客户端可以打开与数据库的并发连接有很多限制。实际上，您应该正确配置 DBMS，以便它可以优雅地处理这种情况 - 即 max_connections 应该限制客户端的数量 - 而不是 DBMS 可用的内存量。

如果您的意思是可以支持多少个并发连接而不会拒绝/排队连接，那是非常不同的。这几乎是一个明智的问题。

在这种情况下，这将取决于您拥有的内存量、您如何配置 DBMS、CPU 的速度、内容的大小、内容项的数量、PHP 如何连接到DBMS，PHP离DBMS有多远……

在您在 DBMS 上点击它们之前，您更有可能在网络服务器上遇到连接限制 - 但确定这些限制的方法对于两者来说是相同的 - 生成受控数量的连接并测量它使用的内存 - 重复对于不同的数字，获取大量数据。绘制图表，查看线与资源限制相交的位置。

> 所以我不会在三个域上复制页面，而是将其加载到 mysql 中

域的数量几乎无关紧要 - 除非您正在寻找一种避免 ESI 的方法。

> 但如果有 10,000 名访客

真的吗？在一个典型的站点上，这可能意味着一百万个并发 HTTP 会话。

# java - Java3d。如何增加视野？

> ID：10109160
> 
> 赞同：3
> 
> 时间：2012-04-11T15:32:19.533
> 
> 标签：java, java-3d

如果我创建一个可以飞越平原的简单应用程序，我只能看到平原的一小部分。引擎仅在相机周围的特定半径内渲染。超出的一切都以背景颜色显示。所以感觉就像在雾中，我的视线范围只有几米。

怎么增加这个视野？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:37:00.267

```
javax.media.j3d.View.setFrontClipDistance(double distance) 
```

在这里找到更多数据：http: [//download.java.net/media/java3d/javadoc/1.3.2/javax/media/j3d/View.html](http://download.java.net/media/java3d/javadoc/1.3.2/javax/media/j3d/View.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T07:06:22.200

抱歉，如果这似乎有点晚了，但我想澄清一下以供将来参考，最佳答案并不完全正确。

setFrontClipDistance 是当你靠近它时某些东西不渲染的点，默认情况下，这个值是 0.01（米），因为你不希望在距离它 ​​10 米时不渲染，至少在大多数情况下.

真正被问到的是如何增加最大渲染距离，这是通过 setBackClipDistance 完成的，默认设置为 10（米）。如果将其设置为 1000，则最大渲染距离将增加到 1000 米。

假设您使用的是 simpleUnivers 对象，设置它的正确方法是访问实例化对象的视图中的函数。

```
//Create a Simple Universe object using a 3d canvas object you have
SimpleUniverse simpleU = new SimpleUniverse(Your3dCanvasHere);

//add in your compiled branch group
simpleU.addBranchGraph(YourBranchGroupHere);

//Increase the render distance with setBackClipDistance
simpleU.getViewer().getView().setBackClipDistance(1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:34:15.467

如果你打算开发一些严肃的东西，你不应该坚持 Java-3D。尝试使用 OpenGL。OpenGL自带一个功能：

```
gluPerspective(fieldOfViewY, aspect, near, far); 
```

far 参数就是您要查找的参数。OpenGL 比基于 CPU 的绘图引擎更高效，因为它使用 GPU。

# sas - 使用双循环的 SAS 计算

> ID：10109164
> 
> 赞同：0
> 
> 时间：2012-04-11T15:32:24.453
> 
> 标签：sas

我正在尝试使用两个循环进行计算。但我对循环元素不是很熟悉。

这是我的数据：

```
data try;
 input rs t a b c;
 datalines;
 0    600    
 1    600       0.02514  667.53437  0.1638
 2    600       0.2766   724.60233  0.30162
 3    610       0.01592  792.34628  0.21354
 4    615.2869  0.03027  718.30377  0.22097
 5    636.0273  0.01967  705.45965  0.16847
 ;
run; 
```

我要计算的是，对于每个“T”值，a、b 和 c 的所有元素都需要用于方程。然后我创建变量 v1-v6 来为每个 T1-T6 放置方程的结果。之后，我创建 CS 来汇总 v 的所有元素。

所以我的结果数据集将如下所示：

```
rs    T           a          b          c        v1       v2        v3      v4  v5      v6    CS 
0    600                                                                                     sum of v1
1    600       0.02514   667.53437    0.1638                                                 sum of v2
2    600       0.2766    724.60233    0.30162                                                sum of v3
3    610       0.01592   792.34628    0.21354                                                sum of v4
4    615.2869  0.03027   718.30377    0.22097                                                sum of v5
5    636.0273  0.01967   705.45965    0.16847                                                sum of v6 
```

我在下面编写了一个代码来执行此操作，但出现错误。主要是我不确定如何正确使用 i 和 j 来链接变量的所有元素。有人能指出我认为不正确的吗？我知道 myabe 我不应该使用 sum 函数来累积变量的元素，但不确定要使用哪个函数。

```
data try3;
 set try;
 retain v1-v6;
 retain t a b c;
 array v(*) v1-v6;
 array var(*) t a b c;
 cs=0;
 do i=1 to 6;
  do j=1 to 6;
   v[i,j]=(2.89*(a[j]**2*(1-c[j]))/
    ((c[j]+exp(1.7*a[j]*(t[i]-b[j])))*
    ((1+exp(-1.7*a[j]*(t[i]-b[j])))**2));
   cs[i]=sum(of v[i,j]-v[i,j]);
  end;
 end;
run; 
```

* * *

例如，v1 将像 v[1,1] =0 一样计算，因为 ab c 没有值。

对于 v[1,2]=(2.89*0.02514**2(1-0.1638))/((0.1638+exp(1.7*0.02514*600-667.53437)))*((1+exp(-1.7*0.02514* (600-667.5347)))**2))。

v[1,3]]=(2.89*0.2766**2(1-0.30162))/((0.30162+exp(1.7*0.2766*600-724.60233)))*((1+exp(-1.7*0.2766* (600-724.60233)))**2))。

v[1,4] 将使用 abc 的下一行值，但 t 将与 t[1] 相同。并这样做直到最后一行。这将是 v1。然后我需要将 v1 的所有元素相加，例如 v1{1,1] +v1[1,2]+ v1{1,3] ....v1[1,6] 以生成 cs[1,1] .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T13:45:10.557

SAS 语言不擅长做这些事情，这些事情本质上是矩阵计算。DATA 步骤通常一次处理一个观察结果，但您可以使用 RETAIN 语句进行计算。如果您可以访问 PROC IML（本机进行矩阵计算），您可能会得到比这更清晰的结果，但假设您无权访问 IML，则需要执行以下操作。我不是 100% 确定它是你需要的，但我认为它是正确的：

```
 data try;
     infile cards missover;
     input rs t a b c;
     datalines;
     0    600    
     1    600       0.02514  667.53437  0.1638
     2    600       0.2766   724.60233  0.30162
     3    610       0.01592  792.34628  0.21354
     4    615.2869  0.03027  718.30377  0.22097
     5    636.0273  0.01967  705.45965  0.16847
     ;
    run;

    data try4(rename=(aa=a bb=b cc=c css=cs tt=t vv1=v1 vv2=v2 vv3=v3 vv4=v4 vv5=v5 vv6=v6));
    * Construct arrays into which we will read all of the records;
    array t(6);
    array a(6);
    array b(6);
    array c(6);
    array v(6,6);
    array cs(6);

    * Read all six records;
    do i=1 to 6;
      set try(rename=(t=tt a=aa b=bb c=cc));
      t[i] = tt;
      a[i] = aa;
      b[i] = bb;
      c[i] = cc;
    end;

    * Now do the calculation, which involves values from each
      row at each iteration;
    do i=1 to 6;
      cs[i]=0;
      do j=1 to 6;
        v[i,j]=(2.89*(a[j]**2*(1-c[j]))/
           ((c[j]+exp(1.7*a[j]*(t[i]-b[j])))*
           ((1+exp(-1.7*a[j]*(t[i]-b[j])))**2)));
        cs[i]+v[i,j];
      end;

      * Then output the values for this iteration;
      tt=t[i];
      aa=a[i];
      bb=b[i];
      cc=c[i];
      css=cs[i];
      vv1=v[i,1];
      vv2=v[i,2];
      vv3=v[i,3];
      vv4=v[i,4];
      vv5=v[i,5];
      vv6=v[i,6];
      keep tt aa bb cc vv1-vv6 css;
      output try4;
     end; 
```

请注意，我必须构造已知大小的数组，即您必须知道有多少输入记录。

DATA 步的前半部分构造数组，从输入数据集中读取值。我们读取所有记录，然后进行所有计算，因为我们在矩阵中拥有内存中的所有值。对 RENAMES 进行了一些修改，以便您可以保留数组名称 t、a、b、c 等，但在输出数据集中仍有名为 a、b、c 等的变量。

所以希望这可能会对你有所帮助。要么这样，要么让你感到困惑，因为我误解了你想要做什么！

# php - 解码哈希

> ID：10109166
> 
> 赞同：1
> 
> 时间：2012-04-11T15:32:31.953
> 
> 标签：php, mysql, database, hash, decode

我正在构建的在线 PHP 应用程序中有一些敏感数据。我想将数据作为哈希存储在数据库中，但这意味着我每次从数据库调用数据时都必须解码数据。我知道哈希的构建不容易被逆向工程，所以我想知道最好的解决方案是什么？

与密码不同，我无法进行哈希比较 - 那么我应该如何保护数据库中的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:46:35.647

您正在寻找的是加密，而不是散列。加密是两种方式，这意味着您可以取消加密以查看内容，前提是您拥有这样做的正确信息（您这样做，窥探者没有）。

有关如何使用 PHP 执行此操作的代码，请参阅[这篇文章。](https://stackoverflow.com/questions/2448256/php-mcrypt-encrypting-decrypting-file/2448441#2448441)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:52:12.040

加密哈希函数是单向函数，这意味着您无法反转它们。我认为您正在寻找的是[加密](http://en.wikipedia.org/wiki/Encryption)。您可以使用[Mcrypt](http://php.net/manual/en/book.mcrypt.php)或[OpenSSL](http://www.php.net/manual/en/book.openssl.php)扩展来执行此操作。我的建议是使用带有 256 位密钥的[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)（但请记住，您需要确保密钥安全）在将数据插入数据库之前加密数据并在检索时对其进行解密。现在，您可以使用[MySQL 提供的方法，](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)但我自己会使用 Mcrypt。如果您可以提供您试图确保安全的数据的性质和大致大小，我可以推荐一种合适的操作模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:50:47.800

尝试阅读这篇关于网络密码学的文章：[http ://www.alistapart.com/articles/web-cryptography-salted-hash-and-other-tasty-dishes/](http://www.alistapart.com/articles/web-cryptography-salted-hash-and-other-tasty-dishes/)

您可以使用 SHA-1 哈希对变量进行编码，如下所示：

```
sha1('password')
=> 5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8 
```

MySQL 支持数据加密和解密。前任：

```
INSERT INTO people (pet_name) 
  VALUES (AES_ENCRYPT('Schmoopie','my-secret-key'));

SELECT AES_DECRYPT(pet_name, 'my-secret-key') AS pet_name
  FROM people; 
```

这两个例子都来自 List Apart 文章。

# c++ - SDL SDL_DisplayFormat c++ 指针在有效图像上重新调整 NULL

> ID：10109169
> 
> 赞同：0
> 
> 时间：2012-04-11T15:32:41.173
> 
> 标签：c++, pointers, scope, sdl

简单代码图像指针为NULL为什么？：

```
 // defined in the header files 
    SDL_Surface* m_imageIcon;
    SDL_Surface* m_CharMainTile;

    bool SDLmanager::loadFiles()
    {

        m_imageIcon = loadImage("D:\\java\\workspace\\SDL_test1\\Debug\\robot1.bmp",type_bmp);
/*
mem print as you see empty 
Name : m_imageIcon
    Details:0x0
    Default:0x0
    Decimal:0
    Hex:0x0
    Binary:0
    Octal:0

*/
        m_CharMainTile = loadImage("D:\\java\\workspace\\SDL_test1\\Debug\\vx_chara09_d.png",type_png);
        bool b = false;

        if(m_imageIcon == NULL) // this is null 
            b = true;
        if(m_CharMainTile == NULL) // this is null 
            b = true;

        if(!b)
            return false;
        return true;

    } 
```

这是我在给定路径中设置所有文件的地方

```
 SDL_Surface *SDLmanager::loadImage( string filename , imgType t)
    {
        //Temporary storage for the image that's loaded
        SDL_Surface* loadedImage = NULL;

        //The optimized image that will be used
        SDL_Surface* optimizedImage = NULL;

        //Load the image
        if(t== type_bmp)
        {
            loadedImage = SDL_LoadBMP( filename.c_str() );
        }
        else
        {
            loadedImage = IMG_Load( filename.c_str() );
        }

        //If nothing went wrong in loading the image
        if( loadedImage != NULL )
        {
            //Create an optimized image
            optimizedImage = SDL_DisplayFormat( loadedImage );

            //Free the old image
            SDL_FreeSurface( loadedImage );
        }

        //Return the optimized image
        return optimizedImage;
    } 
```

optimizeImage 具有有效的地址和值

```
Name : optimizedImage
    Details:0x4d6ea8
    Default:0x4d6ea8
    Decimal:5074600
    Hex:0x4d6ea8
    Binary:10011010110111010101000
    Octal:023267250 
```

编译很好很干净：

```
make all 
Building file: ../Main.cpp
Invoking: GCC C++ Compiler
g++ -O0 -g -Wall -c -fmessage-length=0 -MMD -MP -MF"Main.d" -MT"Main.d" -o "Main.o" "../Main.cpp"
Finished building: ../Main.cpp

Building file: ../SDLmanager.cpp
Invoking: GCC C++ Compiler
g++ -O0 -g -Wall -c -fmessage-length=0 -MMD -MP -MF"SDLmanager.d" -MT"SDLmanager.d" -o "SDLmanager.o" "../SDLmanager.cpp"
Finished building: ../SDLmanager.cpp

Building target: SDL_test1.exe
Invoking: MinGW C++ Linker
g++  -o "SDL_test1.exe"  ./Main.o ./SDLmanager.o   -lmingw32 -lSDL_image -lSDLmain -lSDL
Finished building target: SDL_test1.ex 
```

# c# - 在会话中添加两个数字

> ID：10109170
> 
> 赞同：1
> 
> 时间：2012-04-11T15:32:44.130
> 
> 标签：c#, asp.net

我在 ASP.net / C# 中做一个 Web 应用程序，其中在 Page_Load 事件上生成一个随机数 (num1)。在网页中有一个按钮，每当用户单击该按钮时，都会生成一个新的随机数 (num2)，并在 Button_Click 事件中将它添加到前一个随机数 (+)。这继续无限进行（继续在最后一次添加中添加一个新的随机数）。我尝试过使用会话，但没有找到明确的示例。我非常感谢您的建议和帮助。

代码：

```
private static Random random = new Random();
        private int randomNumber(int min, int max)
        {
            return random.Next(min, max);
        }

        protected void Page_Load(object sender, EventArgs e)
        {
             number1 = randomNumber(1, 10);
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            int number2 = randomNumber(1, 10);
            Session["number_x"] = number2;
            number2 += number1;
        } 
```

假设在 page_load 上生成的随机数是 4。然后用户单击生成新随机数的按钮让我们说 5。现在 5 应该添加到 4 = 9。如果用户再次单击按钮再次生成一个新数字说 5，所以现在会话应该有 14 等等。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:39:33.403

我想你想做这样的事情：

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    lock (Session.SyncRoot)
    {
       int numberInSession = (int) Session["number_x"];
       int number2 = randomNumber(1, 10);
       int newNumber = numberInSession + number2;
       Session["number_x"] = newNumber 
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:39:05.673

嗯，如果我正确阅读了您的问题，这应该可以：

```
protected void Button1_Click(object sender, EventArgs e)
{
    int number2 = randomNumber(1, 10);
    if(Session["number_x"] != null)
    {
        int number1 = Int.Parse(Session["number_x"]);
        Session["number_x"] = number1 + number2;
    }
    else
    {
        Session["number_x"] = number2;
    }
} 
```

基本上，您必须检查会话变量中是否已经存在值。

如果会话变量中已经存在某些内容，则需要将其解析为`int`，然后将其添加到新的随机数中并将其存储回会话变量中。

如果里面没有任何东西，你只需要存储新的随机数。

# jquery - 动态 Jquery 移动页面

> ID：10109174
> 
> 赞同：0
> 
> 时间：2012-04-11T15:32:51.363
> 
> 标签：jquery, jquery-mobile

我设置了一个 JqueryMobile 应用程序，该应用程序根据我的脚本提取的一些 JSON 数据动态创建页面。所有这些页面或内联并拉起罚款。但是，我需要在这些页面中包含一些 JS，但是我写的任何内容在主页之后都会被忽略。例如，我有一个简单的功能，当点击一个带有“视频”ID 的链接时，它会显示一条警报消息。在我的主页上，这很好用，但在任何子页面上都没有。如何让我的脚本出现在所有页面上？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:02:46.147

生成动态页面后加载外部 javascript

```
<script id="external_script" type="text/JavaScript"></script>
<script>
    function loadscript(scripturi) {
        document.getElementById('external_script').src = scripturi;
    }
</script> 
```

以这样的方式运行 loadscript(..)，它会在您生成/加载动态页面后运行。

例如

```
<div id="dynamic-container"><!-- --></div>

$(#dynamic-container).load("url", function() {
    loadscript(dynamicscriptURL);
}); 
```

或者

使用一个小型[javascript 库](http://ensure.codeplex.com/)，它提供了一个方便的功能“确保”，它允许您按需加载 Javascript、HTML、CSS，然后执行您的代码。它不仅可以加载 javascript，还可以动态加载 html 片段和 css。最好你可以等待它们加载，然后调用动态加载的函数。例如，下面加载javascript，一些html片段，相关的css，然后执行一个只有在动态加载脚本时才可用的javascript。

```
ensure( { js: "popup.js", html: "popup.html", css: "popup.css" }, function()
   {
       PopupManager.show();
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:25:18.673

**脚本应包含在子页面的页面区域中，否则将不会加载脚本。**

```
<div data-role="page" id="subpage">

    <div data-role="content"></div>

    <script type="text/javascript" src="video.js"></script>

<div> 
```

# meteor - Meteor 加载的 css 和 js 文件的排序

> ID：10109176
> 
> 赞同：41
> 
> 时间：2012-04-11T15:32:58.020
> 
> 标签：meteor

有没有办法为 Meteor 加载的自动加载的 css 或 js 文件指定顺序。

搜索文档，找不到任何东西。

我问是因为我在舞台上，并且正在尝试将 Twitter Bootstrap 与 Meteor 一起使用。在 Bootstrap 附带的示例中，基本 bootstrap.css 始终在 bootstrap-responsive.css 之前加载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-20T18:39:29.140

这个问题已经在[http://docs.meteor.com/中得到了回答](http://docs.meteor.com/)

> 应用程序中的 JavaScript 和 CSS 文件根据以下规则加载：
> 
> 首先加载应用程序根目录下的 lib 目录中的文件。
> 
> 匹配 main.* 的文件在其他所有内容之后加载。
> 
> 子目录中的文件在父目录中的文件之前加载，因此最深的子目录中的文件首先加载（在 lib 之后），最后加载根目录中的文件（除了 main.*）。
> 
> 在目录中，文件按文件名的字母顺序加载。
> 
> 这些规则堆叠起来，例如在 lib 中，文件仍然按字母顺序加载；如果有多个名为 main.js 的文件，则子目录中的文件会更早加载。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-11T18:16:15.727

你是对的，用户文件首先加载深度，否则按字母顺序。

[https://guide.meteor.com/structure.html#load-order](https://guide.meteor.com/structure.html#load-order)

lib/ 目录和 main.* 文件是特殊情况。

包也可以改变加载顺序，但我认为任何默认包都不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T21:44:05.850

Running on windows, the other solutions didn't work for me so I just put all the js files into 1 folder and just number them. Meteor loads them in alphabetical order.

# c# - 单元测试方法是一种不好的方法吗？

> ID：10109180
> 
> 赞同：2
> 
> 时间：2012-04-11T15:33:07.633
> 
> 标签：c#, .net, unit-testing

我正在测试一个类，它与其他类有很多依赖关系。为了解决这个问题，我使用了模拟。到目前为止效果很好。

```
[Test]
public void DataField_Gets_Properly_Created()
{
    // Arrange all those mocks

    _dataField =  new DataField(dependency1, dependency2, dependency3);

    Assert.NotNull(dataField.Id);
    // other assertions ...
}

[Test]
public void DataField_Gets_Properly_Saved()
{
    var entityList = new List<IEntity>();
    var dfId = Guid.NewGuid();

    _dataField.SetValue(true, entityList, dfId);

    Assert.True(_datenFeld.ValueBoolean);
    // other assertions
} 
```

如您所见，我使用了这个私有`_dataField`变量。你知道的，我实际上是在第一次测试中测试是否可以创建数据字段。在第二个测试中使用相同的数据字段是不是一种不好的方法，它刚刚在第一个方法中创建？我认为这不是很干净的代码。

我的第二个想法是在`[Setup]`. 这也不是很干净，因为我应该如何在设置中创建它并在之后测试它是否可以创建？我很困惑。

之后可能是更多的测试，它们都需要一个数据字段的实例来测试实际的类`DataField`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:38:18.200

单元测试不应依赖于任何其他单元测试。您应该能够单独运行每个并让它们通过，并且您应该能够以任意顺序运行它们。

In this case, I'd recommend using a local variable that you re-initialize in each test, but arrange all the mocks in the `[Setup]`. You can encapsulate the initialization in a helper method, `CreateDataFieldForTest()` or similar.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:36:57.820

您的单元测试不应依赖于其他单元测试。

标记为的函数将在类中的**每个**`[Setup]`函数之前调用。因此，如果您将创建移动到，它将不断重新创建它。这是你不确定的吗？ **`[Test]``_dataField``[Setup]`**

 **标记为的函数`[TestFixtureSetUp]`将在 a 的开头调用一次`[TestFixure]`。所以它不会在每个之前被调用`[Test]`

```
[SetUp]
public void TestSetup()
{
   _dataField =  new DataField(dependency1, dependency2, dependency3);
}

[Test]
public void DataField_Gets_Properly_Created()
{
    Assert.NotNull(dataField.Id);
    // other assertions ...
}

[Test]
public void Most_Test_Using_dataField()
{
    ...
} 
```

如果没有正确“初始化”，第一个测试将失败。在这种情况下，您会知道存在问题并且不能保证其他测试会正常工作。**

# java - Copy Constructor 在这里没用？

> ID：10109181
> 
> 赞同：0
> 
> 时间：2012-04-11T15:33:08.503
> 
> 标签：java

考虑以下情况：

我为嵌入式（调制解调器）设备编写了一个 java 程序。SDK 不提供 Cloneable。因此我有`class GsmSignalStrength`方法`clone()`，但它不是来自`Object.clone()`，它是“我的”实现。我想知道这是否有用且正确，或者我应该`GsmSignalStrength`在评论中使用复制构造函数吗？我看不到复制构造函数的优势，因为我必须在我的 StateMachine 中创建另一个 GsmSignalStrength 对象。

这是我的代码...

文件 1“Status.java”：

```
class Status
{
    Status(GsmSignalStrength gsmSignalStrength)
    {
        initClass(gsmSignalStrength);
    }

    GsmSignalStrength gsmSignalStrength;

    private void initClass(GsmSignalStrength gsmSignalStrength)
    {
        this.gsmSignalStrength = gsmSignalStrength;
    }
} 
```

文件 2“GsmSignalStrength”：

```
class GsmSignalStrength
{
    GsmSignalStrength(byte signalStrength)
    {
        initClass(signalStrength);
    }

    GsmSignalStrength()
    {
        initClass(100);
    }

    byte value;

    public void copyTo(GsmSignalStrength destination)
    {
        destination.value = this.value;
    }

    public GsmSignalStrength clone()
    {
        GsmSignalStrength clonedValue = new GsmSignalStrength();

        this.copyTo(clonedValue);

        return clonedValue;
    }

    /* With copy constructor
        GsmSignalStrength(GsmSignalStrength gsmSignalStrength)
        {
            gsmSignalStrength.value = value;
        }
    */

    private void initClass(byte signalStrength)
    {
        this.value = signalStrength;
    }
} 
```

文件 5“GsmModemHandler”：

```
class GsmModemHandler
{
    GsmModemHandler()
    {
        initClass();
    }

    private GsmSignalStrength m_gsmSignalStrength;

    GsmSignalStrength getGsmSignalStrength()
    {

        ...bla...

        return m_gsmSignalStrength;
    }

    private void initClass()
    {
        m_gsmSignalStrength = new GsmSignalStrength();
    }
} 
```

文件 4“状态机”：

```
class StateMachine
{
    StateMachine(GsmModemHandler gsmModemHandler)
    {
        initClass(gsmModemHandler);
    }

    private GsmModemHandler m_gsmModemHandler;

    void doSomething()
    {
        GsmSignalStrength gsmSignalStrength = m_gsmModemHandler.getGsmSignalStrength();
        Status xy = new Status(gsmSignalStrength.clone());

        /* With copy constructor

            GsmSignalStrength gsmSignalStrengthCopy = new GsmSignalStrength(gsmSignalStrength);
            Status xy = new Status(gsmSignalStrengthCopy);
        */
    }

    private void initClass(GsmModemHandler gsmModemHandler)
    {
        m_gsmModemHandler = gsmModemHandler;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:47:10.210

你什么~~有~~在那条评论中，

```
GsmSignalStrength(GsmSignalStrength gsmSignalStrength)
    {
        gsmSignalStrength = this;
    } 
```

不是复制构造函数。线

```
gsmSignalStrength = this; 
```

完全没有效果，因为它所做的只是将方法本地引用移动到指向`this`.

一个正常运行的“复制构造函数”将类似于

```
GsmSignalStrength(GsmSignalStrength gsmSignalStrength)
    {
        this.value = gsmSignalStrength.value;
    } 
```

重点是创建一个与原始对象具有相同成员变量的独立对象。

此外，与 C++ 不同，编写

```
object1 = object2; 
```

不**调用**复制构造函数。它所做的只是复制引用——你最终会得到两个指向同一个对象的引用。如果要创建一个新对象，则必须显式调用构造函数：

```
object1 = new GsmSignalStrength( object2 ); 
```

* * *

至于它是否“无用”，这取决于您的应用程序。复制构造函数、`clone()`方法和您的`copyTo`方法都完成相同的基本任务。您可以使用构造函数创建一个新对象，或者使用`clone()`，或者创建一个新对象并使用`copyTo`它——选择一种方法来做你想做的事并坚持下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:07:32.513

我认为你应该只使用克隆，但要小心。Joshua Bloch 的 Effective Java 指出您应该明智地使用 clone，因为它是一个弱接口并且没有提供方法契约来支持该活动。您还依赖于行为良好的超类克隆行为（即，超类使用`super#clone`而不是使用类构造函数来创建对象（这将创建错误类的实例）。**请注意，这是您在您的文件 2 示例**- 在非最终类中，您将破坏任何克隆子类。

请注意，您的克隆（和每个超类克隆）应提供所有 ivars 的完整副本。现在请注意，您可能需要对诸如数组和列表之类的东西进行深度复制——也就是说，创建数组的新实例并在您自己的列表中添加元素的新副本。这是一个“深拷贝”，而不是“浅拷贝”。克隆不应与原始对象共享相同的数据（尽管您可能会根据具体情况对此进行辩论）。

另外，我认为复制构造函数的概念没有任何问题，只要它有充分的文档记录您的副本所做的事情（例如，深副本与浅副本）。

您的示例的示例代码是：

```
public class GSMSignalStrength implements Cloneable {
    ...
    public Object clone() throws CloneNotSupportedException {
        GSMSignalStrength result = (GSMSignalStrength)super.clone();
        result.setValue(this.value);
        result.setAnyOldArray(this.deepCopyMyAnyOldArray());
        ...
    }
    ...
} 
```

希望这可以帮助！

ps 在泛型方面未审查 Cloneable，因此您可以围绕它添加类型安全性。事实上，我从来没有真正实现过可克隆。在过去（Obj-C 世界，我们确实在图形包中做了很多 cop-constructing 并直接与我们的对象图捆绑在一起 - 何时进行深度复制和何时进行浅复制）。五、复杂。

# c# - XmlSerialization 和接口

> ID：10109183
> 
> 赞同：0
> 
> 时间：2012-04-11T15:33:14.087
> 
> 标签：c#, xml, c#-4.0, serialization, interface

我知道你不能使用接口进行序列化/反序列化，但我对我看到的行为感到困惑。

当我反序列化并转换回接口时，一些属性为空。但是，如果我转换回具体类型，相同的属性是否有值？

因此，鉴于此 XML（为简洁而缩短）：

```
<Page>
  <ComponentPresentations>
    <ComponentPresentation>
      <Component>
        <Categories>
          <Category>
            <Id>tcm:35-540-512</Id> 
```

反序列化

```
var serializer = new XmlSerializer(typeof(Page));
page = (IPage)serializer.Deserialize(reader);

page.ComponentPresentations[0].Component.Categories <-- is null 
```

但如果我回溯到类型，

```
var serializer = new XmlSerializer(typeof(Page));
page = (Page)serializer.Deserialize(reader);

page.ComponentPresentations[0].Component.Categories <-- is not null! 
```

Page 类型公开了接口 Categories 属性和一个非接口属性——我假设可以解决序列化接口问题。

```
public List<Category> Categories { get; set; }
[XmlIgnore]
IList<ICategory> IComponent.Categories
{
    get { return Categories as IList<ICategory>; }
} 
```

这是因为接口属性没有公开设置器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:38:09.590

不，问题是和不支持**逆变**。[这](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)是一个很好的参考。`List<T>``IList<T>`

* * *

看看这个简单的代码：

```
public interface IMyInterface
{

}

public class MyImplementation : IMyInterface
{

}

List<MyImplementation> myImplementations = new List<MyImplementation>();
Console.WriteLine(myImplementations as IList<IMyInterface> == null); // OUTPUT: true!! 
```

如您所见，`Categories as IList<ICategory>`将始终为空。虽然`Categories as IList<Category>`会好的。

**与序列化无关**。

# asp.net-mvc-3 - MVC3 EditorFor 只读

> ID：10109185
> 
> 赞同：70
> 
> 时间：2012-04-11T15:33:24.017
> 
> 标签：asp.net-mvc-3, readonly, editorfor

我想在编辑页面中使用 EditorFor 进行只读。

我试图将 readonly 和 disabled 设置为：

```
<div class="editor-field">
        @Html.EditorFor(model => model.userName, new { disabled = "disabled", @readonly = "readonly" })
    </div> 
```

但是，它不起作用。如何禁用编辑此字段？

谢谢你。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-04-11T18:13:35.807

EditorFor html 帮助器没有采用 HTML 属性的重载。在这种情况下，您需要使用更具体的内容，例如 TextBoxFor：

```
<div class="editor-field">
    @Html.TextBoxFor(model => model.userName, new 
        { disabled = "disabled", @readonly = "readonly" })
</div> 
```

您仍然可以使用 EditorFor，但您需要在自定义 EditorTemplate 中有一个 TextBoxFor：

```
public class MyModel
{
    [UIHint("userName")]
    public string userName { ;get; set; }
} 
```

然后，在您的 Views/Shared/EditorTemplates 文件夹中，创建文件 userName.cshtml。在该文件中，输入以下内容：

```
@model string
@Html.TextBoxFor(m => m, new { disabled = "disabled", @readonly = "readonly" }) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-11-13T17:12:49.550

此代码在 MVC4 及更高版本中受支持

```
@Html.EditorFor(model => model.userName, new { htmlAttributes = new { @class = "form-control", disabled = "disabled", @readonly = "readonly" } }) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-17T16:14:19.423

对于那些想知道如果您不希望 EditoFor 可编辑为什么要使用它的人，我有一个示例。

我的模型中有这个。

```
 [DataType(DataType.Date)]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0: dd/MM/yyyy}")]
    public DateTime issueDate { get; set; } 
```

当您想显示该格式时，它的唯一工作方式是使用 EditorFor，但我有一个用于该“输入”的 jquery datepicker，因此它必须是只读的，以避免用户写下错误的日期。

为了让它按照我想要的方式工作，我把它放在视图中......

```
 @Html.EditorFor(m => m.issueDate, new{ @class="inp", @style="width:200px", @MaxLength = "200"}) 
```

这在我准备好的功能中......

```
 $('#issueDate').prop('readOnly', true); 
```

我希望这对外面的人有帮助。对不起我的英语不好

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-31T07:02:21.430

你可以这样做：

```
@Html.EditorFor(m => m.userName, new { htmlAttributes = new { disabled = true } }) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-13T23:35:39.993

我知道问题说明了 MVC 3，但那是 2012 年，所以以防万一：

从 MVC 5.1 开始，您现在可以`EditorFor`像这样传递 HTML 属性：

```
@Html.EditorFor(x => x.Name, new { htmlAttributes = new { @readonly = "", disabled = "" } }) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-04T10:22:22.927

尝试使用：

```
@Html.DisplayFor(model => model.userName) <br/>
@Html.HiddenFor(model => model.userName) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-11-04T23:45:08.610

这是我的做法：

**模型：**

```
[ReadOnly(true)]
public string Email { get { return DbUser.Email; } } 
```

**看法：**

```
@Html.TheEditorFor(x => x.Email) 
```

**扩大：**

```
namespace System.Web.Mvc
{
    public static class CustomExtensions
    {
        public static MvcHtmlString TheEditorFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes = null)
        {
            return iEREditorForInternal(htmlHelper, expression, HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
        }

        private static MvcHtmlString iEREditorForInternal<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IDictionary<string, object> htmlAttributes)
        {
            if (htmlAttributes == null) htmlAttributes = new Dictionary<string, object>();

            TagBuilder builder = new TagBuilder("div");
            builder.MergeAttributes(htmlAttributes);

            var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

            string labelHtml = labelHtml = Html.LabelExtensions.LabelFor(htmlHelper, expression).ToHtmlString();

            if (metadata.IsRequired)
                labelHtml = Html.LabelExtensions.LabelFor(htmlHelper, expression, new { @class = "required" }).ToHtmlString();

            string editorHtml = Html.EditorExtensions.EditorFor(htmlHelper, expression).ToHtmlString();

            if (metadata.IsReadOnly)
                editorHtml = Html.DisplayExtensions.DisplayFor(htmlHelper, expression).ToHtmlString();

            string validationHtml = Html.ValidationExtensions.ValidationMessageFor(htmlHelper, expression).ToHtmlString();

            builder.InnerHtml = labelHtml + editorHtml + validationHtml;

            return new MvcHtmlString(builder.ToString(TagRenderMode.Normal));
        }
    }
} 
```

当然，我的编辑器正在做更多的事情，例如添加标签，根据需要向该标签添加所需的类，`DisplayFor`如果属性是则添加 a 如果`ReadOnly` `EditorFor`不是，添加 a`ValidateMessageFor`最后将所有内容包装在`Div`可以`Html Attributes`分配的 a 中对它...我`Views`的超级干净。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-05T17:12:27.967

为一组特定的视图创建一个 EditorTemplate（由一个控制器绑定）： ![在此处输入图像描述](../Images/ea192414fa75c0a65aff431455059ebd.png)

在此示例中，我有一个日期模板，但您可以将其更改为您想要的任何内容。

这是 Data.cshtml 中的代码：

```
@model Nullable<DateTime>

@Html.TextBox("", @Model != null ? String.Format("{0:d}",     ((System.DateTime)Model).ToShortDateString()) : "", new { @class = "datefield", type =    "date", disabled = "disabled"  @readonly = "readonly" }) 
```

在模型中：

```
[DataType(DataType.Date)]
public DateTime? BlahDate { get; set; } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-06T11:32:05.810

我使用`readonly`属性而不是`disabled`属性 - 因为当字段为只读时，这仍会提交值。

**注意**：任何 readonly 属性的存在都会使该字段`readonly`即使设置为 false，因此为什么我将编辑器分支为如下代码。

```
 @if (disabled)
 {
     @Html.EditorFor(model => contact.EmailAddress, new { htmlAttributes = new { @class = "form-control", @readonly = "" } })
 }
 else
 {
     @Html.EditorFor(model => contact.EmailAddress, new { htmlAttributes = new { @class = "form-control" } })
 } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-05T16:11:20.483

我知道旧帖子..但现在你可以这样做以保持对齐并且看起来一致..

```
 @Html.EditorFor(model => model.myField, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } }) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-20T19:32:42.883

```
<div class="editor-field">
        @Html.EditorFor(model => model.userName)
</div> 
```

使用 jquery 禁用

```
<script type="text/javascript">
   $(document).ready(function () {
      $('#userName').attr('disabled', true);
     });
</script> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-01-17T09:01:02.567

我认为这比使用 [Editable(false)] 属性更简单

例如：

```
 public class MyModel
    {
        [Editable(false)]
        public string userName { get; set; }
    } 
```

# javascript - package.json 生成 / npm 未使用的包

> ID：10109186
> 
> 赞同：22
> 
> 时间：2012-04-11T15:33:24.373
> 
> 标签：javascript, unit-testing, node.js, continuous-integration, npm

我在我的项目中引入单元测试，为此，我需要为自己创建一个`package.json`文件。

**第一个问题**是，`unit testing suite`你用的是哪个？我很期待`mocha`这似乎是`Node.js`项目的标准。

**第二个问题**是：有什么神奇的方法可以生成`package.json`文件吗？（用于依赖项和版本）

**第三个问题**是：我`npm packages`在开发项目时进行了很多测试，现在我遇到了很多可能未使用的包。有没有办法判断哪个没用？（我看到`npm list installed`这是有用的）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-11T15:41:12.937

1.  我正在使用摩卡咖啡。

2.  `npm init`

3.  `npm ls`将在你的 package.json 中没有的旁边列出“无关的”。但是，听起来您还没有 package.json。

* * *

基本上，您的工作流程非常落后。以下是它的工作原理：

1.  用 开始一个新项目`npm init`。它没有依赖关系。
2.  哦，我想开始使用一个包，比如说`express`？将其添加到`package.json`依赖项下，然后运行`npm install`​​.
3.  哦，我想开始使用包进行开发，比如说`mocha`？将其添加到`package.json`下`devDependencies`，然后运行`npm install`。

您似乎有一些带有手动安装包（通过`npm install <packageName>`）的现有代码，这很乱。我建议重新开始并遵循上述工作流程。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-03T21:41:15.623

回答**第三个问题**：

`npm prune`

*将删除package.json*中不再提及的所有已安装模块。

* * *

你真的应该问 3 个不同的问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T15:43:49.613

1.  我也在用摩卡。它具有代码覆盖率、BDD、TDD，在浏览器中运行。它非常完整，并且由我认为最出色的 javascript/node.js 程序员之一 TJ 进行了大量维护。

2.  几乎不可能猜测要使用哪个版本。因为 npm 不知道哪个版本破坏了哪个依赖。您可能可以使用类似[node-detective 的](https://github.com/substack/node-detective)东西安装所有依赖项。然后你可以在 javascript 中使用 npm.js 安装它们。也许我想在未来解决这个问题。

3.  我也可能会删除所有依赖项，接下来使用步骤（2）安装所需的依赖项。但是，对于当前的 HD，磁盘空间也不再是一个大问题。

PS：我想我也同意 Domenic

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T15:40:18.770

1.  我正在使用誓言。它非常好，但并不完美。我发现节点中的单元测试通常具有挑战性，因为异步回调到 dbs 等，并且主要是在测试顶级功能。

2.  这是你的魔法：[使用 Shrinkwrap 管理 Node.js 依赖项](http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/)。

3.  了解您正在使用的软件包的唯一方法是了解。您不能以编程方式生成它。我的建议是积极地删除软件包，然后重新测试所有功能——如果它坏了，你就会知道你需要重新安装你的一个软件包。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-19T20:45:25.667

回答您的**第三个问题**，您可以使用[Sweeper](https://npmjs.org/package/sweeper)列出未使用的依赖项，并将它们从您的 package.json 中删除。然后在命令行上`npm install -g sweeper`调用您的项目目录。`sweeper`

# jquery - 如何将输入文本值重置为默认值？

> ID：10109189
> 
> 赞同：-1
> 
> 时间：2012-04-11T15:33:34.770
> 
> 标签：jquery, jsf-2, richfaces

我有一个页面，其中 a4j:commandbutton 捕获 2 个文本框的值。文本框值默认为：

```
 <a4j:region id="pnreg" >
  <h:inputText id="pn" binding="#{bean.pn}"
  value="Enter Number..."       
  onclick="clickclear(this, 'Enter Number...')"/>      
  </a4j:region> 
  </td>   
  <td width="20">
  <a4j:region id="qtyreg" > 
  <h:inputText value="Enter Part Qty..." id="qty" binding="#{bean.qty}"       
  onclick="clickclear(this, 'Enter Qty...')"/>      
  </a4j:region>
  </td>      
  <td width="20%">
  <a4j:commandButton id="addPart" render="pn,qty" value="Add Part"
   action="#{bean.submit}" /> 
```

当页面第一次加载时，文本框显示默认值，当用户点击它们时，这些值被清除为编码。单击按钮时，我希望文本框返回默认值。使用 jquery 我想我需要添加一个单击事件处理程序，但是richfaces api 已经有一个事件处理程序附加到 a4j:commandbutton。如何使我的 jquery 事件处理程序与richfaces 事件处理程序一起工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:18:17.540

如果你想设置 inputText 的值，那么你应该在`onclick`方法中添加你的 js 函数`a4j:commandButton`：

```
<a4j:commandButton id="addPart" value="Add Part"
    onclick="alert('Before the ajax submit...');verifyInputTexts();"
    action="#{bean.submit}"
    render="pn,qty" limitToList="true"
    oncomplete="alert('Ajax completed!')" /> 
```

在该代码示例中，`verifyInputTexts`可能是您的 JS 函数，用于使用 javascript 验证您的 HTML。还有一件事，我`a4j:commandButton`按照它们执行的顺序编写属性的方式`limitToList="true"`是告诉 ajax 应该只重新渲染`render`value 中的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:41:21.547

创建一个新的 JavaScript 函数，在您的文本字段上调用 ​​clickclear()。然后修改a4j:commandButton，添加一个oncomplete="yourNewFuction();" 属性，以便在您的 AJAX 调用完成时执行您的新函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T10:00:28.517

将 inputText 放在与“取消”按钮相同的表单中，并使用 type="reset" 例如：

```
 <h:form id="globalNotificationSettingsForm"> 
       your input <h:inputText>
       <a4j:commandButton id="cancelButton"
         ....other tags..
        render="globalNotificationSettingsForm"
        immediate="true"
        type="reset"/>
 </h:form> 
```

# asp.net-mvc - 如何在 ASP.net MVC 3 视图中包含纯 HTML 或经典 ASP 文件的内容？

> ID：10109198
> 
> 赞同：3
> 
> 时间：2012-04-11T15:33:47.657
> 
> 标签：asp.net-mvc, asp-classic, server-side-includes

我正在开发一个 ASP.net MVC 3 应用程序。我有一个呈现页面片段的外部经典 ASP 文件。

我知道在 ASP.net MVC 3 中，我可以定义一个局部视图来包含我想在多个页面上重用的 HTML 片段。

我的基本想法是我想使用外部经典 ASP 文件在我的 ASP.net MVC 3 应用程序中呈现 HTML 片段。

我想将它与类似的东西一起使用`Html.Partial`，但这不起作用，因为经典的 ASP 文件显然不是 MVC 部分视图。

另一种方法是使用 AJAX 将文件的内容添加到页面，但我不想将另一个 AJAX 调用的开销添加到我的页面。我正在寻找的解决方案可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:39:23.630

**纯 HTML**：只需从磁盘读取并使用`@Html.Raw()`.

**Asp 或其他动态创建的内容**：您可以使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)获取 html 标记，然后插入到您自己的视图中。您可能想要缓存响应。

为方便起见，您可以为这两种方法创建扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:38:51.043

创建一个进行外部调用并返回内容的控制器操作：

```
Html.RenderAction("GetContent","ExternalASP"); //GetContent- Action, ExternalASP- Controller 
```

# mysql - Mysql查询返回带有Union Join的BLOB

> ID：10109203
> 
> 赞同：1
> 
> 时间：2012-04-11T15:34:03.397
> 
> 标签：mysql, blob, union

当我在 mysql 中运行联合查询时，一些值返回为 BLOB，有没有办法解决这个问题？我合并查询，因为我希望特定列的总和位于底部

```
select a.app_file_id,a.app_trn,a.app_fname,a.app_lname,l.computer_interest,l.loan_life,l.app_ln_amnt, l.commit_date,l.app_amnt_owed,r.amount_paid
from applicant a
left join loan l on   l.l_app_file_id=a.app_file_id
left join receipt r on r.r_app_file_id=l.l_app_file_id
WHERE l.app_loan_type=r.receipt_loan_type
AND l.app_loan_type='Computer Loan'
AND  MONTHNAME(commit_date) = 'April'
and YEAR(commit_date)=2012

Union
Select '', '','','','','',SUM(l.app_ln_amnt),'',SUM(l.app_amnt_owed),SUM(r.amount_paid)
from applicant a
left join loan l on   l.l_app_file_id=a.app_file_id
left join receipt r on r.r_app_file_id=l.l_app_file_id
WHERE l.app_loan_type=r.receipt_loan_type
AND l.app_loan_type='Computer Loan'
AND  MONTHNAME(commit_date) = 'April'
and YEAR(commit_date)=2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:27:23.520

在 UNION 的第一个查询中，第二列是一个 INT，而在第二个查询中，它是一个空字符串，它不是一个有效的 INT。第 5 列、第 6 列和第 8 列也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T11:53:39.227

避免联合中出现 blob 的一种简单方法是使用格式。考虑以下示例

例如：

```
select "string 1","string 2","string 3" from dual
union
select "string 1",format(sum(1+2),0),"string 3" from dual 
```

但我不建议这样做。使所有联合中的结果列类型完全相同，并避免使用格式以避免结果中出现“BLOB”

```
select "string 1",0 "string 2","string 3" from dual
union
select "string 1",sum(1+2),"string 3" from dual 
```

# oracle - 如何确定正在使用 Oracle Spatial 的内容？

> ID：10109209
> 
> 赞同：3
> 
> 时间：2012-04-11T15:34:28.460
> 
> 标签：oracle, oracle10g, oracle-spatial

我们有一个 Oracle Enterprise Edition 10 安装，正如我们的 DBA 向我解释的那样，Oracle Enterprise 安装包括所有扩展，并且您只需根据您使用的内容获得许可。

我们发现我们正在使用 Oracle Spatial，但我们不想这样做。我可以自己确认它与此 SQL 一起使用：

`select * from dba_feature_usage_statistics;`

不幸的是，这就是我能找到的全部。我们有大量使用 Spatial 元素的应用程序，但在询问了我们所有的供应商后，他们向我们保证他们的应用程序使用的是 Oracle Locator（它是 Spatial 的免费子集）。

所以我的问题很简单——我如何准确地发现哪个应用程序正在使用 Oracle Spatial 扩展？或者（由 ik_zelf 的回答揭示），我如何证明我只使用 Spatial 的定位器子集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:05:46.467

检查 sdo 元数据：

```
select * from mdsys.sdo_geom_metadata_table where sdo_owner not in ('MDSYS', 'OE') 
```

当您深入研究 dba_feature_usage_statistics 时，您会发现此查询是确定正在使用什么和不使用什么的一部分。架构的 MDSYS 和 OE 不计算在内，即使它们具有 sdo 对象也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:47:31.970

Oracle 网站上有一个 Oracle Spatial 与 Oracle Locator 的功能列表：http: [//docs.oracle.com/cd/B19306_01/appdev.102/b14255/sdo_locator.htm#SPATL340](http://docs.oracle.com/cd/B19306_01/appdev.102/b14255/sdo_locator.htm#SPATL340) - 特别注意到列出仅在 Oracle Spatial 中可用的内容的部分。

简短的故事是（基本上）以下事情不适合定位器：

*   拓扑
*   网络数据模型
*   地理栅格
*   地理编码
*   内置数据挖掘功能
*   线性参考
*   一些空间聚合功能
*   sdo_geom 包的某些部分

存储、索引、分区、sdo_util 包、坐标转换等都完全在 Locator 中。我会简单地检查`dba_source`使用任何禁止功能的任何存储过程的视图。

对于数据库之外的代码，我想你必须相信别人的话，但根据我的经验，外部应用程序倾向于使用它们自己的方法，而不是 Oracle 的内置特性。

# actionscript-3 - Flex/AIR 应用程序桌面工具栏

> ID：10109212
> 
> 赞同：0
> 
> 时间：2012-04-11T15:34:32.313
> 
> 标签：actionscript-3, apache-flex, air, flex4, air-native-extension

我目前正在构建一个使用 Flex 框架部署在 Windows 平台上的 AIR 应用程序，最好（为了 UX）主应用程序窗口充当屏幕右边缘的[应用程序桌面工具栏](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144177%28v=vs.85%29.aspx)（类似于“停靠”时新的 Facebook Desktop Messenger 应用程序）。

使用 AIR 执行此操作的最佳方式（如果有）是什么？在没有解决方案的情况下，能否使用原生进程或原生扩展？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:45:38.217

您可以使用`alwaysInFront`将应用程序保持在其他窗口之上

在弹性： `<s:WindowedApplication alwaysInFront="true" ...`

在 as3 中： `nativeWindow.alwaysInFront=true;`

至于对接部分，此[链接](https://groups.google.com/group/air-tight/browse_thread/thread/4f2184ddae0309d)可能会对您有所帮助。

# firefox - 关闭或退出 WebDriver 时的 SpecFlow WebDriver 错误

> ID：10109213
> 
> 赞同：0
> 
> 时间：2012-04-11T15:34:35.820
> 
> 标签：firefox, selenium, webdriver, nunit, specflow

我正在使用`Specflow`and测试一个网站`WebDriver`。我正在使用 specflow 事件来启动和退出驱动程序。我启动驱动程序`[BeforeFeature]`并退出它`[AfterFeature]`。

我使用静态公共类来保存驱动程序并拥有操作它的方法。

在对一个功能运行所有测试并且下一个功能开始运行之后，就会出现问题。我收到以下错误：

如果在`[AfterFeature]`我做一个**Driver.Close()**我得到错误：

```
 -> error: Unexpected error. System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:7055
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at OpenQA.Selenium.Remote.HttpCommandExecutor.Execute(Command commandToExecute) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\HttpCommandExecutor.cs:line 91
   at OpenQA.Selenium.Firefox.Internal.ExtensionConnection.Execute(Command commandToExecute) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Firefox\Internal\ExtensionConnection.cs:line 128
   at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(DriverCommand driverCommandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 795 
```

如果我执行**Driver.Quit()**我会收到错误消息：

```
-> error: Cannot deserialize JSON object into type 'System.String'. Line 1, position 35. 
```

如果我不关闭或退出驱动程序，每个功能都可以正常运行，但我会打开很多 Firefox Windows。

我的代码是：

```
[Binding]
public class Events
{
    [BeforeFeature]
    public static void BeforeFeature()
    {
        Common.CreateDriver();
    }

    [AfterFeature]
    public static void AfterFeature()
    {
        Common.QuitDriver();
    }
} 
```

和...

```
public static class Common
{
    public static IWebDriver Driver { get; set; }        

    public static void CreateDriver(){            
        Driver = new FirefoxDriver();
        Driver.Manage().Timeouts().ImplicitlyWait(new TimeSpan(0, 0, 5));        
    }

    public static void CloseDriver()
    {
        Driver.Close();
    }

    public static void QuitDriver()
    {
        Driver.Quit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:33:31.907

才发现问题出在哪里。我会把它放在这里以供将来参考。

问题在于我在 BaseWebObject（所有 PageObjects 之父）上读取驱动程序的方式。

我有这个：

```
 public class BaseWebObject
{        
    protected static IWebDriver Driver = Common.Driver;

} 
```

这失败了，因为驱动程序只会在静态构造函数中被读取一次。

为了使它工作，我必须在实例化时读取驱动程序，所以在实例构造函数中像这样：

```
 public class BaseWebObject
{        
    protected static IWebDriver Driver;

    public BaseWebObject()
    {
        Driver = Common.Driver;
    }    
} 
```

# svn - SVN中分支分支并与主干结合的最佳实践？

> ID：10109214
> 
> 赞同：4
> 
> 时间：2012-04-11T15:34:52.403
> 
> 标签：svn, merge, tortoisesvn, branching-and-merging

我只是想知道在这种情况下最佳实践是什么：

我有“分支 A”，它是一个月前从包含未完成代码的主干分支出来的。我也有当前位于行李箱顶部的代码。

我需要的是能够拥有另一个分支，其中包含主干上的当前代码和“分支 A”中的代码，但我想将其重命名为“分支 B”。新分支应该用于处理未来特定版本的功能，而“分支 A”仅用于处理特定功能。

我是否：

A）从主干合并到分支，然后重命名分支？

B) 从主干中创建一个分支，然后将“分支 A”合并到新创建的“分支 B”中？

C) 在 TortoiseSVN 中进行“双向合并”吗？

D) 其他选择？

只是想知道在这种情况下会推荐什么，以及什么会让人头疼。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:38:22.667

让您的分支与主干的更改保持同步始终是一个好主意。因此，对于您的场景，我首先将主干更改合并到分支 A。然后，我将从分支 A 创建一个分支 B。

创建两个分支后，我会尽我所能将主干更改合并到分支 A 和 B，因为主干发生更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:10:26.337

显然有一些工作流程会导致很多麻烦。

我遇到了同样的问题，发现这篇文章很有趣 [Bunny Hop](http://designbygravity.wordpress.com/2009/10/19/what-mother-never-told-you-about-svn-branching-and-merging/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:58:50.483

我会推荐B选项。保持分支的时间顺序很重要。旧分支的更改应合并到新分支。这样，您可以避免交叉合并冲突。所以我会从头（分支B）创建一个新分支。然后我会按这个顺序合并：分支 A -> 分支 B -> 头

# mysql - 使用 ORDER BY 对结果进行排序时，LEFT JOIN 花费的时间太长

> ID：10109218
> 
> 赞同：2
> 
> 时间：2012-04-11T15:35:02.140
> 
> 标签：mysql, sql-order-by, left-join

这是我在stackoverflow中的第一个问题，通常我习惯于在互联网上搜索答案，但这次我找不到这个问题的任何答案。

只是我的问题是查询需要太长时间才能执行，而它是 2 个表之间的简单连接

我将首先发布我的查询，然后我将发布有关我的系统的更多详细信息：

```
SELECT * FROM tbl_item 
LEFT JOIN (SELECT * FROM tbl_item_details) AS tbl_item_details 
ON tbl_item.item_id = tbl_item_details.item_details_item_id 
WHERE item_active = 1 ORDER BY item_views DESC LIMIT 0,5 
```

这是我的表结构：

```
CREATE TABLE `tbl_item` (
`item_id` int(11) NOT NULL AUTO_INCREMENT,
`item_views` int(11) NOT NULL,
`item_active` tinyint(1) NOT NULL DEFAULT '1',
PRIMARY KEY (`item_id`)
) ENGINE=InnoDB AUTO_INCREMENT=821 DEFAULT CHARSET=utf8 
```

tbl_item_details：

```
CREATE TABLE `tbl_item_details` (
`item_details_id` int(11) NOT NULL AUTO_INCREMENT,
`item_details_title` varchar(255) NOT NULL,
`item_details_content` longtext NOT NULL,
`item_details_item_id` int(11) NOT NULL,
PRIMARY KEY (`item_details_id`),
KEY `itm_dt_itm_id` (`item_details_item_id`),
CONSTRAINT `tbl_item_details_ibfk_1` FOREIGN KEY (`itm_dt_itm_id`) REFERENCES `tbl_item` (`itm_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=364 DEFAULT CHARSET=utf8 
```

这是 EXPLAIN 查询输出：

```
id select_type table type possible_keys key key_len ref rows Extra
1 PRIMARY tbl_item ALL NULL NULL NULL NULL 358 使用 where；使用临时的；使用文件排序
1 主要 全部 NULL NULL NULL NULL 358      
2 衍生 tbl_item_details 全部 NULL NULL NULL NULL 422      

```

每个表只有 350 行，而大表 (tbl_item_details) 为 1.5 MB，因此您会看到这些表非常小。

基本上，上述查询在以下系统上执行大约需要 4 秒：

CPU：Intel(R) Pentium(R) 4 CPU 3.20GHz（2 个 CPU），~3.2GHz RAM：3 GB Mysql：5.1.33（包含在 wamp 中）

之前，任何人都建议这里的解决方案是我尝试过的，有效的和无效的：

有效的事情并且查询花费了更少的时间（0.06秒）：

*   我尝试删除 ORDER BY 我尝试从中删除 item_details_content
*   我尝试使用 INNER JOIN 的选择，它有效，我试过了
*   切换连接中的表，使 INNER 表变为 OUTER，反之亦然

我不能使用 INNER JOIN 因为 tbl_item 中可能有行在 tbl_item_details 中没有匹配项，我想要这些记录

我尝试过但不起作用的事情：

*   我尝试向 item_views 添加索引（不起作用）
*   我尝试删除外键约束
*   我尝试将表格引擎切换到 MyIsam

显然，当 mysql 对 item_details_content 中的日期和面对（相对）大数据进行排序时，就会出现问题，因此，如果我们摆脱其中一件事（排序或 item_details_content 列），它就可以正常工作。

但问题是，这不应该发生！因为该表的数据非常小，考虑到它只有 350 行，总共 1.5 MB！mysql 应该能够处理比这更多的数据。

请在建议对查询结构进行重大更改之前，恐怕这是不可能的，因为我已经在这个框架上工作了一段时间并且查询是动态生成的，对查询的更改可能意味着几天的工作但是您的建议总是受欢迎的。

PS：我在一个强大的服务器（核心 i7 和 8 GB RAM）上尝试了这个查询，它花了 0.3 秒，这对于这样的数据库来说仍然太长了

太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:40:04.013

你有没有尝试过：

```
SELECT * FROM tbl_item 
LEFT JOIN tbl_item_details 
ON tbl_item.item_id = tbl_item_details.item_details_item_id 
WHERE item_active = 1 ORDER BY item_views DESC LIMIT 0,5 
```

我真的不认为您需要仅从 tbl_item_details 中选择 * 的嵌套子查询——只需使用该表即可。

# git - Gitolite 钩子不执行

> ID：10109219
> 
> 赞同：1
> 
> 时间：2012-04-11T15:35:06.993
> 
> 标签：git, hook, gitolite

我正在尝试创建一个脚本，以便在推送发生后将 repo 文件 chmod 到一个新组。为了测试钩子，我创建了一个钩子，它在 /tmp/ 中创建一个文件，只是为了检查钩子是否工作。然而事实并非如此。

到目前为止我所做的：
首先我创建了一个脚本 (~/.gitolite/hooks/common/update.secondary)，然后运行 ​​gl-setup [pubkey]。经过多次尝试后，我检查了主钩子目录（/var/gitolite/hook/common/），脚本不存在。

之后我直接把脚本放到/var/gitolite/hook/common/下，再次运行gl-setup，还是没有运行hook。

该脚本作为 gitolite 用户使用

```
sh ~/repositories/[some project]/hooks/myscript 
```

我正在使用的脚本：

```
#!/bin/bash
touch /tmp/TESTFILE 
```

权限更新脚本：

```
#!/bin/bash
chmod 750 -R /home/git/repositories/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:15:52.120

[OP Jason Kaczmarsky](https://stackoverflow.com/users/410343/jason-kaczmarsky)提到：

*   将脚本直接放入`/var/gitolite/hook/common/`
*   chmod+x 之前说的脚本
*   运行 gl-setup

有效并且确实传播了该脚本。

OP提到的第一个替代方案在Gitolite手册页“ [Using Hooks](http://sitaramc.github.com/gitolite/hooks.html) ”中有描述，但这取决于安装方法，这似乎是[根目录](http://sitaramc.github.com/gitolite/root.html)。

话虽如此，关于`chmod`操作，您需要考虑 中的[变量`REPO_UMASK`，`gitolite.rc`](http://sitaramc.github.com/gitolite/rc.html#gitolite_rc_most_often_used_changed_variables_)如下所述：

*   " [gitolite 和文件权限](https://stackoverflow.com/questions/9915482/gitolite-and-file-permissions/9915919#9915919)"
*   “ [Git sharedRepository 的权限问题](https://stackoverflow.com/questions/5455070/permission-problems-with-git-sharedrepository/5455127#5455127)”
*   "[在 Git / Gitolite 中设置 umask](https://stackoverflow.com/questions/7086325/setting-umask-in-git-gitolite/7103499#7103499) "

# php - 从表中的字段计数，然后更新到不同表中的不同字段

> ID：10109229
> 
> 赞同：0
> 
> 时间：2012-04-11T15:35:59.887
> 
> 标签：php, mysql, sql

很复杂的问题：

目前我有一张名为“时间表”的表格。当有人预订时段时更新（这是用于无线电预订系统）。我想要的是一个 PHP 文件，我可以作为 cron 作业每 15 分钟运行一次。在 PHP 脚本中，我想做的是计算电台主持人通过“时间表”表中的“用户名”字段预订了多少个时段。然后我希望它在名为“slot_count”的字段中更新另一个名为“users”的字段，其中包含在“用户名”下的“时间表”表中找到的插槽数量。

目前我有一个脚本，它将所有预订的插槽及其演示者“用户名”拉到一个表中：

```
<?php 
include("../config.php");
include("functions.php");
if($logged["level"] == "HDJ" OR $logged["level"] == "SA") {

echo "<table width=\"580px\" class=\"board\" border=\>";

$order = "SELECT * FROM timetable WHERE username <> 'No DJ'";
$result = mysql_query($order);

// Error checking
if (!$result) {
  // output error, take other action
}
else {
  while ($row=mysql_fetch_array($result)){
     // Append all results onto an array
     $rowset[] = $row;
  }
}
    foreach ($rowset as $row) {
  echo "<tr><td>" . htmlspecialchars($row['username']) . "</td></tr>";
}

    } else {
echo ("<div class=\"caution\">Access is denied.</div>");
}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:45:40.517

不能使用一个 sql 语句同时执行`COUNT()`and来完成`UPDATE`：

```
UPDATE users
SET slot_count = (SELECT COUNT(*) FROM timetable WHERE timetable.username = users.username) 
```

*假设*：对于两个表中的同一个广播主持人，该`username`字段包含*相同的值。*否则他们不会匹配。您应该能够从 cron 作业[直接针对 MySQL 运行此查询（而不是执行 PHP 脚本）。](http://dev.mysql.com/doc/refman/5.5/en/batch-commands.html)`users``timetable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:58:06.923

无需将这些冗余数据存储在您的用户表中。只要对表进行了适当的索引，连接和计数就很简单-

```
SELECT users.*, COUNT(timetable.username) AS num_slots
FROM users
LEFT JOIN timetable
    ON users.username = timetable.username
GROUP BY users.id 
```

# list - Mathematica：对缺少值的列表进行操作

> ID：10109231
> 
> 赞同：1
> 
> 时间：2012-04-11T15:36:06.417
> 
> 标签：list, wolfram-mathematica, operations

我尝试对一组列表执行操作。例如：
列表：(1, 1, 2, 3, 3, 4, 4, 4, 4, 4, 4, 5), (1, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), (1, 1, 1, 1, NA, NA, NA, NA, NA, NA, NA, NA), (1, 1, 2, 3, 3, 4, 4, 4, 4, 4, 4, 5)

然后我想例如有一个包含手段的列表。Mean[lists] 无法正常运行，因为它不知道如何处理缺失值“NA”。我期望的是：（1、1、5/3、7/3、3、4、4等）

有人如何忽略缺失或“文本”值？例如，就像您在 excel 中操作这样的功能一样。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:22:01.367

```
l = {{1, 1, 1, "NA", "NA"}, {2, 3, 4, 5, "NA"}}
Mean@# & /@ (Cases[#, Except@"NA"] & /@ l)

(*
-> {1, 7/2}
*) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:18:27.210

看起来您对矩阵列的平均值感兴趣。如果你的数据数组是矩形的，你可以做这样的事情

```
lst = {{1, 1, 1, "NA", "NA"}, {2, 3, 4, 5, "NA"}, {6, 7, 8, 9, 10}};
Mean /@ DeleteCases[Transpose[lst], a_ /; Not[NumericQ[a]], {-1}] 
```

一种更简单的方法是将用于不可用元素（例如`"NA"`in `lst`）的任何符号替换为`Sequence[]`：

```
Mean /@ (Transpose[lst] /. "NA" -> Sequence[]) 
```

# windows - linux下的delphi交叉编译器

> ID：10109234
> 
> 赞同：10
> 
> 时间：2012-04-11T15:36:19.410
> 
> 标签：windows, linux, delphi, delphi-7

我想知道是否有任何 Borland 交叉编译器可以让我的 windows 代码在没有 wine 的情况下在 linux 上工作。我正在使用带有 delphi 7 的 winxp。我一直想知道是否可以编写我在 windows 中编码的相同工具，再次在Linux 以及如何在 linux 中使用 pascal 代码编写相同的工具。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T17:00:27.000

最好的解决方案是 Lazarus，它是 Free Pascal 的类似 delphi 的 GUI。如果您使用的是“纯”vcl，没有 Windows 内部或任何特殊附加组件，迁移将是小菜一碟 :) 看看这里：http: [//lazarus.freepascal.org](http://lazarus.freepascal.org)

顺便说一句 - Lazarus 和 FPC 是真正的多平台 - 您可以使用相同的代码库为 Linux、Windows、MacOS 等编译代码 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T15:39:41.517

如果你想要一个 Borland Delphi 交叉编译器，你唯一的选择是[`CrossKylix`](http://crosskylix.untergrund.net/). 这不是一个真正的交叉编译器。相反，您可以在模拟的 Linux 环境下运行适用于 Linux 的 Kylix 编译器。

请注意，您将被迫使用 CLX 而不是 VCL，而且 Kylix 现在已经完全死了。我个人认为 Wine 可能是一个更容易和更好的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T15:40:12.183

首先，这完全取决于您在程序中使用的系统功能。在大多数情况下，在 linux 下是不可能进行交叉编译的。

但是，在某些情况下，Borland Kylix 可以提供帮助，但是，afaik，它现在几乎已经死了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-19T17:08:56.003

Delphi 10.2 Tokyo 支持 Linux 64 位本机代码编译。

要获取一些预览屏幕截图，请单击此帖子：

[https://helloacm.com/delphi-compiles-code-to-linux-64-bit-server/](https://helloacm.com/delphi-compiles-code-to-linux-64-bit-server/)

[![在此处输入图像描述](../Images/96ece6221def7b987cea31d07b40dea1.png)](https://i.stack.imgur.com/HC1sh.jpg)

# wpf - 绑定到数组

> ID：10109235
> 
> 赞同：2
> 
> 时间：2012-04-11T15:36:21.773
> 
> 标签：wpf, arrays, binding, datatemplate

我在我的项目中添加了一个自定义控件库，并且在该控件中有一个数组`DependencyProperty`。现在，当我尝试在客户端中绑定该属性时，我得到：

> 模板部分不支持“PropertyArrayStart”类型的标签。

该消息是不言自明的，但是如何在 a 中设置数组属性`DataTemplate`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:52:01.277

您可以使用 a`IMultiValueConverter`从多个绑定构建数组。A`converter`只是必需的，因为没有一个就不能使用 a `MultiBinding`。

```
public class MultipleValuesToArrayConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values.ToArray();
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# objective-c - 使用 KissXML 处理 wcf Rest Web 服务 - 我应该如何处理命名空间问题

> ID：10109240
> 
> 赞同：1
> 
> 时间：2012-04-11T15:36:35.550
> 
> 标签：objective-c, wcf, rest, kissxml

我在 iOS 上使用 KissXML 来解析从 wcf REST Web 服务返回的 XML 数据（用 c# 编写）

我遇到的问题是 KissXML 不喜欢我从 Web 服务获得的 XML 数据中的名称空间。

在一个简单的示例中，我得到的 XML 数据如下所示：

```
<ArrayOfItem  xmlns="http://schemas.datacontract.org/2004/07/DataUpdateService" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Item>Test</Item></ArrayOfItem> 
```

KissXML 似乎无法使用 xpath 来解析此 XML

```
resultNodes = [xmlDoc nodesForXPath:@"//Item" error:&error]; 
```

如果我从 XML 字符串中删除默认命名空间 - 那么它工作正常。

```
<ArrayOfItem xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Item>Test</Item></ArrayOfItem> 
```

所以这个XML很好，使用上面的objective-c我在我的数组中得到了1个对象（如预期的那样）。

所以问题是：我应该怎么做呢？我可以控制服务和 iOS 应用程序，因此我可以更改服务以尝试删除或更改命名空间（指向如何执行此操作的指针表示赞赏），或者我可以在获取数据后将其从字符串中删除到电话。

这两个选项都感觉有点像黑客 - 有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:00:23.627

我建议将 defaultOutgoingResponseFormat 更改为 Json，并处理它而不是 xml。

为什么？在这里阅读：http: [//www.json.org/xml.html](http://www.json.org/xml.html)

而且它会解决你的问题:)

# c - 'memcpy'（合并两个结构）

> ID：10109243
> 
> 赞同：1
> 
> 时间：2012-04-11T15:36:58.957
> 
> 标签：c, networking

考虑以下代码段：

```
#define IPV4_MAX_BYTELEN  4
struct gen_entry
{
  struct in_addr addr;
  struct in_addr mask;
  ..
};
unsigned char key[40];

memcpy (key, &fec->addr, IPV4_MAX_BYTELEN);
memcpy (key + IPV4_MAX_BYTELEN, &fec->mask, IPV4_MAX_BYTELEN);
.. 
```

我想要的是在二进制密钥中合并 IP 地址和掩码。如果数组大小足够用于此目的，是否可以以这种方式合并它？（或者我错过了什么？）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:43:34.863

这通常称为“连接”而不是“合并”。

为了可移植性，您可以显式使用 的`s_addr`字段`struct in_addr`，而不是假设它是第一件事。虽然这可能是由 Posix 保证的，但我不确定。我认为 Posix 还保证`sizeof`IPv4 地址是 4 个字节，所以你没问题。

您的代码不会清除数组的其他 32 个字节，因此它（还）不能以任何有用的方式用作键。除非`key`在文件范围内定义，在这种情况下它被初始化为零。

除了那些小问题，我看不出你所做的有什么问题。

作为一个假设的可移植性问题 - 即使在字段之前没有填充*字节*，如果值中有填充*位*，那么理论上你可能会得到假阴性。假设您从不同来源构造了两个具有相同值但填充位不同的密钥 - 那么它们应该产生相同的密钥，但实际上没有。不过，我不会担心：任何奇怪到足以在整数类型中包含填充位的实现都可能太奇怪而无法提供 Posix 网络 API。`s_addr``struct in_addr`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:44:44.657

这取决于结构的大小。

考虑：

```
memcpy (key, &fec->addr, sizeof(fec->addr));
memcpy (key + sizeof(fec->addr), &fec->mask, sizeof(fec->mask)); 
```

确保您获得结构中的所有值。

密钥的大小是`sizeof(fec->addr) + sizeof(fec->mask)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:43:18.130

是的，如果你想连接`IPV4_MAX_BYTELEN`in_addr 结构的第一个字节的二进制值是可以的（大多数系统上的 s_addr 但你仍然想明确指定它）。

`unsigned char [IPV4_MAX_BYTELEN*2]`如果您只想要其中的两个，您甚至可以将 key 声明为。*

# java - 将参数与类上的自定义注释匹配 - 在运行时检测

> ID：10109246
> 
> 赞同：0
> 
> 时间：2012-04-11T15:37:01.573
> 
> 标签：java, annotations, aspectj

我有像@SecureObject 这样的注释，它可能适用于某些类。此外还有 ORM，它提供了类似的方法

public ObjectID get(Class paramClass, Object object);

现在我需要创建方面，只有在 paramClass 使用@SecureObject 注释的情况下才会触发。

直截了当的解决方案，例如：

```
@Before("call(public * some.orm.Datastore.get(..,@SecureObject *,..))"
   void runBefore() {
     // method code
} 
```

不起作用 - 永远不会调用方法。但已连接（使用 aspectj -debug 检查）。

是否可以使用 AspectJ 实现这种行为，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:12:28.743

问题是您的`get()`方法的第一个参数是 type `Class`。

鉴于此，您不能使用基于注释的方法签名模式。一种可能的解决方案是使用[if() 切入点表达式](http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697)：

```
package aspects;

@Aspect
public class MyAspect {

    @Pointcut("if() && call(public * some.orm.Datastore.get(..)) && args(paramClass,..)")
    public static boolean runBefore(JoinPoint jp, Class paramClass) {
         return paramClass.isAnnotationPresent(annotation.SecureObject.class);
    }

    @Before("runBefore(jp, paramClass)")
    public void runBeforeAdvice(JoinPoint jp, Class paramClass) {
        System.out.println("annotated!");
    }
} 
```

注意：如果不存在 @SecureObject 注释但 if() 条件在运行时被评估，则此切入点也会触发。

# forms - Symfony 1.4 - 表单总是在吗？ 我正在使用 sfDoctrineAllowPlugin。我需要具有 Twitter 的 Bootstrap 语义的表单。我查看了模板，发现只有$form，这是一个. 如何以我的方式格式化它？我不想使用表格、行和列。

> ID：10109248
> 
> 赞同：0
> 
> 时间：2012-04-11T15:37:03.620
> 
> 标签：forms, html-table, symfony1, customization, semantics

我正在使用 sfDoctrineAllowPlugin。我需要具有 Twitter 的 Bootstrap 语义的表单。我查看了模板，发现只有`$form`，这是一个`<table>`. 如何以我的方式格式化它？我不想使用表格、行和列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:52:52.863

有[很多`render*`功能可](http://www.symfony-project.org/gentle-introduction/1_4/en/10-Forms#chapter_10_customizing_the_form_display)用于显示表单中的每个项目。

*   渲染行
*   渲染标签
*   使成为
*   渲染错误
*   ETC ...

但是您也可以`sfWidgetFormSchemaFormatter`为您的表单定义一个装饰器（自定义）来定义每个项目的显示方式。检查为每个必填字段添加 * 的[示例](http://bluehorn.co.nz/2009/08/31/symfony-12-sfform-formatter-to-add-stars-on-required-fields/)。

# listview - Listview控件图片展示

> ID：10109258
> 
> 赞同：0
> 
> 时间：2012-04-11T15:37:39.660
> 
> 标签：listview, controls

我目前使用了一个网格视图，并且我能够填充与此类似的内容，其中项目标题是指向另一个名为“项目”的页面的链接

[http://i.imgur.com/IYry5.jpg?1](http://i.imgur.com/IYry5.jpg?1)

我想要的是能够点击右上角的选项并得到这个 [http://i.imgur.com/DyFUg.jpg?1](http://i.imgur.com/DyFUg.jpg?1)

其中列出了基于我的 projectid 的图像..这些图片也将是项目页面的链接

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:46:16.760

作为粗略的伪代码，您可以通过几种方式来实现。

1) 有 2 个列表视图 - 一个以网格格式显示，一个以平铺形式显示，并根据点击的按钮显示并将数据绑定到相关的列表视图。

2) 拥有一个列表视图，并在其 itemdatabound 方法中根据点击的按钮更改/显示 ItemTemplate/Alternating ItemTemplate 中的不同元素。您还需要更改即 CSS 包装元素，以便您的 css 影响布局的更改

# c# - 如何根据坐标与当前位置之间的距离搜索并显示坐标列表？（Windows 电话 7）

> ID：10109260
> 
> 赞同：2
> 
> 时间：2012-04-11T15:37:50.233
> 
> 标签：c#, windows-phone-7, geolocation, coordinates

我已经收集了大约 60 个爱尔兰周围电影院位置的地理坐标，我想在我的 WP7 应用程序中使用它们来显示离您当前位置最近的电影院。

我以为我会将它们保存在 XML 文件中，但我认为这不适用于我想要实现的目标，即能够搜索整个坐标列表并显示其中出现的任何电影院（例如） 25公里的他们的位置。

我找到了一些链接来帮助找到两点之间的距离，这样那部分就不应该太糟糕了。

关于我如何实现这一目标的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:59:11.047

我创建了一个类似的服务。

首先，正如 Shedal 还指出的那样，考虑将位置托管在外部服务中。当您需要添加更多位置时，这将使您的生活更轻松。（App Hub中的更新应用服务可能需要长达10天的时间，如果您需要快速修复错误的位置，这将是很长的时间）

其次，一旦您加载了位置列表，就可以轻松地遍历它们并找到最近的电影院。您可以使用[Haversine](http://www.movable-type.co.uk/scripts/latlong.html)公式来计算两个地理位置之间的距离（该公式考虑到地球是圆形的，而不是平坦的 - 与勾股定理不同）。幸运的是，你的 WP`GeoLocation`类带有一个`GetDistanceTo`你可以使用的内置函数。

现在的问题只是一个简单的 Linq 查询：

```
List<GeoCoordinate> cinemaLocations = new List<GeoCoordinate>();
GeoCoordinate myLocation = new GeoCoordinate();
var closestCinemas = cinemaLocations.OrderBy(s => s.GetDistanceTo(myLocation));
var closestCinema = closestCinemas.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:42:03.043

电影院名单不应该不时更新吗？如果是这样，我会在某处托管一个 Web 服务并从您的应用程序中调用它以获取最新的电影院列表。

关于距离的计算，它只是勾股定理。

```
D = sqrt(abs(x2 - x1) + abs(y2 - y1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:45:45.310

我会将它们存储在 SQL 服务器中（SQL lite 可以在 WP7 应用程序中运行）。然后我会根据您当前的位置使用某个值的 +/- 来查询 lat 和 lon。现在你需要确保补偿接近 0 度轴，但这会给你一个正方形区域来减少你的结果。一旦你有了这个，你就可以遍历结果集，寻找到每个点的距离，然后丢弃位于这个正方形角落的结果，创建一个在所有方向上都具有定义的最大容差的结果集。当然，我不必解决这个确切的问题（我倾向于依赖像 Neo4J Spacial 这样的项目，它可以自动处理这样的事情（而且非常好）

# windows - 压缩驱动器上的 Oracle db vm？

> ID：10109264
> 
> 赞同：0
> 
> 时间：2012-04-11T15:38:09.483
> 
> 标签：windows, oracle, compression, virtualization

使用 Oracle 11g 是否需要将数据库存储在压缩的 Windows 驱动器上？机器是在esxi上运行windows 2008的虚拟机。有足够的处理能力，但是磁盘访问比 iSCSI 慢。

# ruby-on-rails-3 - Rails 如何在开发模式下自动从 ActiveRecord::RecordNotFound 中救援？

> ID：10109279
> 
> 赞同：1
> 
> 时间：2012-04-11T15:39:25.963
> 
> 标签：ruby-on-rails-3, rescue

我在我的上使用以下代码`ApplicationController`：

```
rescue_from ActiveRecord::RecordNotFound, :with => :not_found

def not_found
  render :nothing => true, :status => :not_found
end 
```

*为了使 Rails 以正确的状态代码响应，并且在开发*模式下不引发异常。

我知道[how-to-handle-errors-like-404-500-in-rails3](https://stackoverflow.com/a/4640472/658469)解释了 Rails 如何在生产模式下工作。换句话说，我在开发模式下尝试做的事情是在生产模式下没有任何代码。

如何使开发模式表现得像生产模式并摆脱上面的代码？

请注意，我正在使用`Rails 3.2.3`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:21:05.927

也许您想关闭它？：

```
config.consider_all_requests_local       = false 
```

默认情况下设置为`true`in `config/environments/development.rb`。

# java - 在 Eclipse 构建路径中添加 POM 依赖项

> ID：10109285
> 
> 赞同：1
> 
> 时间：2012-04-11T15:39:39.347
> 
> 标签：java, eclipse, maven, maven-2

我有一个包含许多 POM 文件的项目。我已经完成了全新安装和 eclipse:eclipse。我想将该项目作为普通项目而不是 Maven 项目导入。当我将项目作为普通项目导入时，我无法在 Eclipse 的构建路径中看到 POM 中存在的 Maven 依赖项。将项目作为 Maven 项目导入是唯一的方法吗？当我将项目作为 Maven 项目导入时，我在 Eclipse 工作区中看到了一些项目（每个 POM 一个）。但是，我想将此视为 Eclipse 工作区中的单个项目。

更新：子项目的类路径文件包含依赖的 jar 文件，但是在添加主项目时它不会添加到构建路径中。仅添加主项目的类路径文件中的条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:04:03.240

鉴于您指的是“Maven 项目”，您是否使用 Maven 的 Eclipse 插件，例如 M2Eclipse？

假设您使用的*是*M2Eclipse，Maven 依赖库会自动为 Maven 项目启用。对于普通的 Java 项目，导入库会强制您将项目配置为 Maven 项目（在项目的上下文菜单中，选择`Configure`-> `Convert to Maven Project`）。

话虽如此，当您导入 Maven 项目时，您会注意到“**高级”选项（朝向“****导入 Maven 项目**”对话框的下部）。当您展开此选项时，将有一个“**解决工作区项目**”复选框 - 默认情况下已选中，因此负责将子模块作为单独的项目导入。如果**取消选中**此项，它将仅将父模块作为项目导入，所有子模块将位于父模块下的 sb 文件夹中。

IMO，解决项目提供了更大的清晰度，但这又是一个非常个人的选择。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:55:12.223

Eclipse 不支持嵌套项目，而 Maven 有点强迫你这样做。因此，您不能真正将所有内容都集中到一个项目中。

粗略的谷歌搜索让我知道了这一点，这可能会有所帮助：[http ://warpedjavaguy.wordpress.com/2011/08/08/how-i-defeated-the-maven-release-plugin-in-a-flat -结构化多模块项目/](http://warpedjavaguy.wordpress.com/2011/08/08/how-i-defeated-the-maven-release-plugin-in-a-flat-structured-multi-module-project/)

您还可以查看 Sonatype 的以下两本在线书籍： [Maven：完整参考](http://www.sonatype.com/books/mvnref-book/reference/)和[使用 Eclipse 和 Maven 开发](http://www.sonatype.com/books/m2eclipse-book/reference/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:01:00.087

就个人而言，我为每个多模块项目创建工作集并将所有单独的项目添加到其中。这使我能够看到它们全部组合在一起，这可能符合您的喜好。

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcworkset.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcworkset.htm)

创建工作集后，您可以在项目资源管理器的菜单中启用/禁用它们，并将项目资源管理器配置为将工作集显示为树中的根元素而不是项目。

# php - 也许 mysql_insert_id() 会返回意外的 id

> ID：10109289
> 
> 赞同：3
> 
> 时间：2012-04-11T15:39:50.573
> 
> 标签：php, mysql

也许我的问题很愚蠢，但我想知道一件事`mysql_insert_id()`。在 php.net 上是这样写的：

> 检索上一个查询（通常是 INSERT）为 AUTO_INCREMENT 列生成的 ID。

`mysql_insert_id()`如果在脚本到达使用另一个脚本在数据库中插入内容的行之前，此函数将输出什么？

据我所知，它将返回最后一个插入项目的 id （从哪里开始无关紧要）。如果我是对的，我想知道如何避免这个问题，但`mysql_insert_id()`在执行插入查询时立即使用（因为仍然有一点机会陷入“麻烦”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:41:54.653

它将返回当前会话中插入的最后一行的 id，因此您无需担心。实际上，您将链接标识符作为参数传递，否则它默认为最后打开的链接。从文档

> MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

所以如果你有

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb');

mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id()); 
```

这总是正确的（当然，如果 mytable 有一个 AUTO_INCREMENT 列），因为它检索会话中最后生成的 id。如果同时另一个用户运行完全相同的查询，他将有一个不同的会话，他会正确地得到他的 id

# linux - 替换大文件中固定数量的文本

> ID：10109290
> 
> 赞同：1
> 
> 时间：2012-04-11T15:39:56.537
> 
> 标签：linux, unix, sed, large-files, file-manipulation

我正在尝试替换大型日志文件的特定行上的少量文本（总共约 40 百万行）：

```
sed -i '20000000s/.\{5\}$/zzzzz/' log_file 
```

这样做的目的是用预期的唯一字符串“标记”一行，以供以后测试。

`sed`上面的命令工作正常，但是(and )的就地编辑`perl`会创建一个临时文件，这很昂贵。

有没有一种方法可以替换文件中固定数量的字符（即 5 个字符和 5 个其他字符），而无需创建临时文件或非常大的缓冲区，这最终会成为临时文件本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:48:41.783

您可以使用`dd`来替换一些字节：

```
dd if=/dev/zero of=path/to/file bs=1 count=10 conv=notrunc skip=1000 
```

将在 1000s 字节后写入 10 个零 (0x00)。您可以将要替换的任何内容放入文件中，并将路径写入`if`参数中。然后您必须将替换文件的大小插入`count`参数中，以便读取整个文件。

该`conv=notrunc`参数告诉`dd`不截断文件的末尾。

这应该适用于任何 1 字节文件编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:50:33.607

[`ex`](http://man.cx/ex)是一个可编写脚本的文件编辑器，因此它可以就地工作：

```
ex log_file << 'END_OF_COMMANDS'
20000000s/.\{5\}$/zzzzz/
w
q
END_OF_COMMANDS 
```

# java - GWT 活动：我错过了什么？

> ID：10109302
> 
> 赞同：1
> 
> 时间：2012-04-11T15:40:29.643
> 
> 标签：java, events, gwt

我正在尝试通过 gwt 事件总线发送一个对象，但我不知道为什么它不起作用。

通常，我有一个组件 A 会创建一个弹出窗口。A 注册到弹出窗口，弹出窗口触发事件。现在，侦听器（OtherComponent）与弹出窗口无关。当弹出窗口触发事件时，其他组件不会捕获它。

这是我的代码：

处理程序：

```
public interface MyEventHandler extends EventHandler {
   public void onChanged(MyEvent event);
} 
```

事件 ：

```
public class MyEvent extends GwtEvent<MyEventHandler> {
  private static final GwtEvent.Type<MyEventHandler> TYPE = new GwtEvent.Type<MyHandler>();

  private MyBean my;

  public MaterielEvent(My bean) {
    my = bean;
  }

  @Override
  public com.google.gwt.event.shared.GwtEvent.Type<MyEventHandler> getAssociatedType() {
    return TYPE;
  }

  public static Type<MyEventHandler> getType() {
    return TYPE;
  }

  @Override
  protected void dispatch(MyEventHandler handler) {
    handler.onChanged(this);
  }

  public MyBean getBean() {
    return my;
  }
} 
```

零件 ：

```
public class OtherPanel extends Composite implements HasMyEventHandlers {
  interface OtherPanelUiBinder extends UiBinder<Widget, OtherPanel> {}
  private static OtherPanelUiBinder uiBinder = GWT.create(OtherPanelUiBinder.class);

  public OtherPanel() {
    this.addMyEventHandler(new MyEventHandler() {
       @Override
       public void onChanged(MyEvent event) {
         NotificationManager.success("event recieved");
       }
    });

    initWidget(uiBinder.createAndBindUi(this));
  }

  @Override
  public HandlerRegistration addMyEventHandler(MyEventHandler handler) {
    return addHandler(handler, MyEvent.getType());
  }
} 
```

调用（在另一个组件内）：

```
 fireEvent(new MyEvent(myBean)); 
```

通知“收到事件”永远不会被调用。

我肯定错过了什么。谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:46:45.913

您正在创建一个 EventBus 的新实例并在该新实例上定义 eventHandler。

我看不到您是如何调用该`fireEvent`方法的（或者您从哪个 eventBus 实例调用它），但您需要在您传递的代码中定义一个 eventBus 实例*。*

因此，您实例化一个 eventBus，然后定义您希望它拥有的任何处理程序，然后让任何将与 eventBus 交互的组件接受“MyEventHandler”作为构造函数的参数。然后，您可以将事件总线的预定义实例传递给该组件，允许该组件稍后与您的应用程序拥有的单个 eventBus 进行交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:26:59.163

正如@Jeff Allen 所写。每个小部件都有其私有 EventBus 实例（它不是静态的）。如果您的事件不是特定于实例的，您可以直接使用 EventBus，而不是通过 Widgets 包装器方法。您的 Event 和 Handler 类已经为此做好了充分的准备。

[请参阅http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/shared/EventBus.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/event/shared/EventBus.html)上的javadoc （正如您所注意到的，Widgets 事件方法只是对 evtnbus 方法的包装。

# javascript - 加载时写在 html 上

> ID：10109303
> 
> 赞同：1
> 
> 时间：2012-04-11T15:40:31.720
> 
> 标签：javascript, jquery

我创建了一个函数，它跟踪我当前在哪张幻灯片上并显示结果，例如，如果我在 3 张幻灯片中的第 2 张上，它将显示 2/3

我的问题是，现在每次单击前进箭头时都设置为执行此操作，但在页面加载时不显示任何内容。

```
$('.forward').click(function() {
var current = $('#slider').data('AnythingSlider').currentPage; // returns page #
var count = $("#slider").children().length - 2;
$("#bottom-image").html(current + "/" + count) ;
}); 
```

我试图找出如何在页面加载时执行此功能以及将其放在我的代码中的位置。我目前正在通过 Codecadamedy 学习 Javascript，所以我对 Javascript 有基本的了解，但我现在还不够流利，无法弄清楚这一点。

这是当前非工作代码的链接：http: [//www.soleilcom.com/metacor_dev/our-plants.php](http://www.soleilcom.com/metacor_dev/our-plants.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:44:22.410

看起来您正在使用 jQuery。要在查询中执行 DOM 加载函数，请执行以下操作：

```
$(document).ready(function() {
    /* your code */
}); 
```

在你的情况下，那将是：

```
$(document).ready(function() {
    $('.forward').click(function() {
        var current = $('#slider').data('AnythingSlider').currentPage; // returns page #
        var count = $("#slider").children().length - 2;
        $("#bottom-image").html(current + "/" + count) ;
    });
}); 
```

对于大多数事件处理程序和大多数其他事情，在 DOM 加载时进行初始化就足够了。如果您的代码需要考虑渲染元素或渲染高度，请`$(window).load()`改用。（在您的情况下，DOM 加载很好）。

请注意，这只会在加载时建立点击处理程序。要同时运行一次，您可以通过自己调用函数或触发点击来自动执行它。要自己调用它，首先定义另一个函数。在单击处理程序和一次立即调用中使用该函数：

```
$(document).ready(function() {
    var forward = function() {
        var current = $('#slider').data('AnythingSlider').currentPage; // returns page #
        var count = $("#slider").children().length - 2;
        $("#bottom-image").html(current + "/" + count) ;
    }

    $('.forward').click(forward);
    forward();
}); 
```

或者要自己触发它，只需定义点击处理程序并以编程方式触发点击：

```
$(document).ready(function() {
    $('.forward').click(function() {
        var current = $('#slider').data('AnythingSlider').currentPage; // returns page #
        var count = $("#slider").children().length - 2;
        $("#bottom-image").html(current + "/" + count) ;
    }).click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:44:27.687

看起来你正在使用 jQuery，所以你会使用这个：

```
$(document).ready(function(){
    // Code here
}); 
```

或者，您可以使用快捷方式：

```
$(function(){
    // Code here
}); 
```

[在jQuery 网站](http://www.jquery.com)上阅读有关此内容的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:51:01.363

如果你给函数一个名字，那么你可以多次使用它：

```
$(document).ready(function() {
    // Bind to click event
    $('.forward').click(forwardSlide)

    // Execute function on page load
    forwardSlide();
});

function forwardSlide() {
    var current = $('#slider').data('AnythingSlider').currentPage; // returns page #
    var count = $("#slider").children().length - 2;
}; 
```

这是你要找的吗？

# iphone - 如何检查我的应用程序的帧速率？

> ID：10109304
> 
> 赞同：6
> 
> 时间：2012-04-11T15:40:39.497
> 
> 标签：iphone, objective-c, ios, xcode

我想找出我的 iOS 应用程序的帧速率，我想知道如何检查？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T15:44:32.987

尝试使用 Instruments 分析您的应用程序并使用 Core Animation 工具。IIRC它应该给出帧速率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-02T09:59:37.607

尝试使用 SpriteKit 的 SKView！

```
SKView *skView = [[SKView alloc] init];
skView.frame = CGRectMake(240, 525, 60, 15);
skView.showsFPS = YES;
[self.view addSubview:skView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:52:36.263

您可以在每个渲染步骤之后计算您创建的帧，并在它们之间计算运行时间。因此，如果您想在运行时显示帧速率，可以将它们写入您的应用程序。

# python - 有没有办法捕获 MSDOS 命令提示符字符串？

> ID：10109305
> 
> 赞同：0
> 
> 时间：2012-04-11T15:40:39.783
> 
> 标签：python, windows

在 Windows XP 中，当您打开 cmd.exe 时，您会看到一个带有命令提示符的控制台窗口，如下所示：

"C:\User and Settings\Staffer\My Documents> *" 其中 s>* '>' 后面的下划线是光标。

这是 Windows XP 的默认设置。用户可以使用 PROMPT=something 或使用 set PROMPT=something 更改它

在控制台窗口的命令提示符下，输入不带参数的内部命令“prompt”不会返回当前提示字符串。

是否有一个命令或者最好是一个 Python 库可以检索命令提示符是什么。如果有检索该字符串的内置方法，我不想编写 Python 模块。

获取命令提示符字符串的用例是，当我使用 Python 子进程模块运行 python 程序，然后在子进程运行时返回到同一控制台的命令提示符时，我将光标置于空行上。我可以按 Enter 键，命令提示符将重新显示；但看起来好像还没有从子进程返回，这误导了我的用户。

我的应用程序的 gui 部分的一种解决方案是运行 pythonw runapp.py。但是我想知道是否有办法在调用子进程时通过使用已经制作的 DOS 命令、Python 库、正确使用 subprocess.Popen() 和communicate() 来获得干净的命令提示符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:45:21.297

不确定它是否有帮助，但是如果您从命令提示符输入“SET”，您将看到一个环境变量列表，包括当前的 PROMPT（但是如果它是默认提示符，它将不会出现在列表中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:51:15.947

从命令行：

```
c:\>echo %prompt%
$P$G 
```

来自 Python：

```
>>> import os
>>> os.environ["PROMPT"]
'$P$G' 
```

（[http://docs.python.org/library/os.html#process-parameters](http://docs.python.org/library/os.html#process-parameters)）

**[编辑]**

啊，我错过了你的编辑。听起来您要做的就是在后台运行脚本。我相信您正在寻找带有 /b 选项的 Windows“启动”命令 - [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/start.mspx?mfr=真的](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/start.mspx?mfr=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:47:08.503

我想你正在寻找这个：

```
import os
print os.getcwd() 
```

# c++ - 如何在 Qt 中绘制由画笔填充的开放曲线？

> ID：10109310
> 
> 赞同：1
> 
> 时间：2012-04-11T15:40:51.580
> 
> 标签：c++, qt, curve

我在 Qt 中编程，我需要绘制一条打开的曲线并用画笔颜色填充它。我不希望它像多边形一样关闭。考虑到我的曲线是正弦曲线，我也只想填充曲线的上半部分（X 轴上方的部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T13:10:52.150

您可以使用`QPainterPath`，[这里](http://qt-project.org/doc/qt-4.8/qpainterpath.html#arcTo-2)是文档链接。QPainterPath 有可以绘制曲线的方法`quadTo`。`cubicTo`

文档也有一些很好的示例代码，其行为与您正在寻找的一样

# uml - 有很多类的 UML

> ID：10109314
> 
> 赞同：0
> 
> 时间：2012-04-11T15:41:12.150
> 
> 标签：uml

在 UML 类图中，我有很多实现一个类 IComponent 的类。

如果我在每个类实现 IComponent 时将所有类一起显示，我必须显示 IComponent 和实现类之间的链接。

有什么方法可以通过单个链接显示 IComponent 某个边界中的所有类都实现了我创建的 IComponent 接口？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:22:55.967

您可以使用“fork”链接，这样 IComponent 类中只存在一个链接，如此处[所示](http://www.uml-diagrams.org/generalization.html?cid=28)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:09:38.217

您可以将一些类与 IComponent 类连接起来，并将以下约束添加到这些连接中 - {incomplete}。

# ruby - 我如何在 ruby 上找到特征值/向量

> ID：10109317
> 
> 赞同：-3
> 
> 时间：2012-04-11T15:41:13.433
> 
> 标签：ruby

我正在开发一个需要矩阵特征值/向量的应用程序。我的矩阵不是对称的，所以我不能使用雅可比算法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:18:48.777

最新版本的 ruby​​ 包含您寻求的[功能。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/matrix/rdoc/Matrix.html)

考虑升级到 ruby​​ 1.9.3，或者从最新的 ruby​​ 获取 matrix.rb 的副本并将其导入到您的应用程序中。

# safari - textField 的 Safari 错误

> ID：10109318
> 
> 赞同：1
> 
> 时间：2012-04-11T15:41:15.593
> 
> 标签：safari, textfield

在我的聊天网站上有一个简单的`<input type='text' ...`，但有时只有 Safari (Mac) 会显示奇怪的“阴影”或其他任何东西（总是不同 - 有时是垂直的，有时是水平的）。有可能解决这个问题吗？

截屏：![在此处输入图像描述](../Images/c70cf063287e4a13e45e09fb8d6d716c.png)

# php - 这是 PHP 的 DateTime:diff 中的错误吗？

> ID：10109323
> 
> 赞同：4
> 
> 时间：2012-04-11T15:41:35.260
> 
> 标签：php, datetime, date, time, date-math

```
>> $start_dt = new DateTime()
DateTime::__set_state(array(
   'date' => '2012-04-11 08:34:01',
   'timezone_type' => 3,
   'timezone' => 'America/Los_Angeles',
))
>> $end_dt = new DateTime()
DateTime::__set_state(array(
   'date' => '2012-04-11 08:34:06',
   'timezone_type' => 3,
   'timezone' => 'America/Los_Angeles',
))
>> $start_dt->setTimestamp(strtotime('31-Jan-2012'))
DateTime::__set_state(array(
   'date' => '2012-01-31 00:00:00',
   'timezone_type' => 3,
   'timezone' => 'America/Los_Angeles',
))
>> $end_dt->setTimestamp(strtotime('1-Mar-2012'))
DateTime::__set_state(array(
   'date' => '2012-03-01 00:00:00',
   'timezone_type' => 3,
   'timezone' => 'America/Los_Angeles',
))
>> $interval = $start_dt->diff($end_dt)
DateInterval::__set_state(array(
   'y' => 0,
   'm' => 0,
   'd' => 30,
   'h' => 0,
   'i' => 0,
   's' => 0,
   'invert' => 0,
   'days' => 30,
))
>> $interval->format('%mm %dd')
'0m 30d' 
```

即，不到一个月`31-Jan-2012`的产量！`1-Mar-2012`我希望输出为 1 个月 1 天。二月的天数无关紧要；这就是使用时间库的重点——它应该处理这些事情。[WolframAlpha 同意](http://www.wolframalpha.com/input/?i=31-jan-12+to+1-mar-12)。

我应该向 PHP 提交错误吗？是否有破解/修复/解决方法可以让几个月按预期工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:46:30.723

**更新的答案**

的这种行为`DateTime::diff`当然是出乎意料的，但这不是错误。简而言之，`diff`返回年、月、日等，如果你这样做了

```
$end_ts = strtotime('+$y years +$m months +$d days' /* etc */, $start_ts); 
```

您将取回与结束原始结束日期相对应的时间戳。

这些添加是“盲目”执行的，然后应用日期更正（例如，1 月 31 日 + 1 个月将是 2 月 31 日，根据年份更正为 3 月 2 日或 3 月 3 日）。在这个具体的例子中，你甚至不能添加一个月，正如salathe 还解释的那样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T15:52:26.083

> 我应该向 PHP 提交错误吗？

不。

间隔的“月份”部分意味着开始日期的月份部分可以增加那么多个月。PHP 中的行为，获取您的开始日期`31-Jan-2012`并增加月份（字面意思是，`31-Feb-2012`）然后更正一个有效日期（PHP 为您执行此操作）将给出`02-Mar-2012`晚于您正在使用的目标日期。

为了证明这一点，请取您的开始日期并在几个月内添加n 个月以查看行为*。*

```
31-Jan-2012 (Interval)
02-Mar-2012 (P1M)
31-Mar-2012 (P2M)
01-May-2012 (P3M)
31-May-2012 (P4M)
01-Jul-2012 (P5M) 
```

您可以看到月份正在递增，然后调整为有效日期。

# xml - 在这种情况下已知

> ID：10109332
> 
> 赞同：1
> 
> 时间：2012-04-11T15:42:22.927
> 
> 标签：xml, spring, jaxb, cxf, maven-jaxb2-plugin

我的 Java RESTful Web 服务（Spring 3.1.1 和 CXF 2.5.2）在每次请求时打印到标准输出

```
SystemId Unknown; Line #-1; Column #-1; class X nor any of its super class is known to this context. 
```

有时多次。请注意，不会引发异常，也不会记录有关错误的消息。有问题的类是由 maven-jaxb2-plugin 从包含其他定义的 XSD 生成的。用于定义数据类型的元素是

```
<xsd:element name="x">
  <xsd:complexType>
    <xsd:choice>
      <xsd:element name="y" type="y" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:choice>
    <xsd:attribute name="count" type="xsd:long" use="optional"/>
  </xsd:complexType>
</xsd:element> 
```

我有几个以这种方式编译的 XSD，但类 X 是唯一与错误消息相关联的。生成的类有注释

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
   "y"
})
@XmlRootElement(name = "x") 
```

如何解决此问题并消除错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:29:54.017

我找到了解决我的问题的方法。

在我解组我的 XML 之前，我通过 XSL 转换运行它。我给了处理器错误的目标上下文。难怪这门课不知道上下文！

# sql - 如何使用空格分隔符获取任何通用单词或句子中的第 n 个字符串

> ID：10109335
> 
> 赞同：1
> 
> 时间：2012-04-11T15:42:34.127
> 
> 标签：sql, oracle, oracle11g

如何获取句子中的第 n 个单词或带有空格分隔符的一组字符串？

抱歉要求更改。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T15:46:14.057

通过使用[`instr`](http://www.techonthenet.com/oracle/functions/instr.php).

```
select substr(help, 1, instr(help,' ') - 1)
  from ( select 'hello my name is...' as help
           from dual ) 
```

`instr(help,' ')`返回第一个中第二个参数第一次出现的位置索引，包括您正在搜索的字符串。即`' '`字符串中第一次出现的`'hello my name is...'` *加上*空格。

`substr(help, 1, instr(help,' ') - 1)`然后将输入字符串从第一个字符带到 中指示的索引`instr(...`。然后我删除一个，以便不包括空间..

* * *

对于第 n 次，只需稍微改变一下：

`instr(help,' ',1,n)`是从第一个字符开始的*第 n*次出现。`' '`然后你需要找到下一个索引的位置索引`instr(help,' ',1,n + 1)`，最后算出它们之间的差异，这样你就知道你的`substr(...`. 当您正在寻找*nth*时，当*n*为 1 时，这会发生故障，您必须处理它，如下所示：

```
select substr( help
             , decode( n
                     , 1, 1
                     , instr(help, ' ', 1, n - 1) + 1
                       )
             , decode( &1
                     , 1, instr(help, ' ', 1, n ) - 1
                     , instr(help, ' ', 1, n) - instr(help, ' ', 1, n - 1) - 1
                       )
               )
  from ( select 'hello my name is...' as help
           from dual ) 
```

*这也将在n*处分解。如您所见，这越来越荒谬，因此您可能要考虑使用[`regular expressions`](http://psoug.org/reference/regexp.html)

```
select regexp_substr(help, '[^[:space:]]+', 1, n )
  from ( select 'hello my name is...' as help
           from dual ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T16:34:26.803

试试这个。获取第 4 个单词的示例：

```
select names from (
    select 
        regexp_substr('I want my two dollars','[^ ]+', 1, level) as names,
        rownum as nth
    from dual
    connect by regexp_substr('I want my two dollars', '[^ ]+', 1, level) is not null
)
where nth = 4; 
```

内部查询将空格分隔的字符串转换为一组行。外部查询正在获取集合中的第 n 个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:53:02.967

尝试类似的东西

```
WITH q AS (SELECT 'ABCD EFGH IJKL' AS A_STRING FROM DUAL)
  SELECT SUBSTR(A_STRING, 1, INSTR(A_STRING, ' ')-1)
    FROM q 
```

分享和享受。

* * *

这是修改后问题的解决方案：

```
WITH q AS (SELECT 'ABCD EFGH IJKL' AS A_STRING, 3 AS OCCURRENCE FROM DUAL)
  SELECT SUBSTR(A_STRING,
                CASE
                  WHEN OCCURRENCE=1 THEN 1
                  ELSE INSTR(A_STRING, ' ', 1, OCCURRENCE-1)+1
                END,
                CASE
                  WHEN INSTR(A_STRING, ' ', 1, OCCURRENCE) = 0 THEN LENGTH(A_STRING)
                  ELSE INSTR(A_STRING, ' ', 1, OCCURRENCE) - CASE
                                                               WHEN OCCURRENCE=1 THEN 0
                                                               ELSE INSTR(A_STRING, ' ', 1, OCCURRENCE-1)
                                                             END - 1
                END)
    FROM q; 
```

分享和享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-27T10:11:45.337

CREATE PROC spGetCharactersInAStrings (@S VARCHAR(100) = '^1402 WSN NI^AMLAB^tev^e^^rtS htimS 0055518', @Char VARCHAR(100) = '8') AS -- exec spGetCharactersInAStrings '^1402 WSN NI ^AMLAB^tev^e^^rtS htimS 0055518', '5' BEGIN DECLARE @i INT = 1, @c INT, @pos INT = 0, @NewStr VARCHAR(100), @sql NVARCHAR(100), @ParmDefinition nvarchar(500) = N'@retvalOUT int OUTPUT'

```
DECLARE @D TABLE
(
    ID INT IDENTITY(1, 1),
    String VARCHAR(100),
    Position INT
)

SELECT @c = LEN(@S), @NewStr = @S

WHILE @i <= @c
BEGIN
    SET @sql = ''
    SET @sql = ' SELECT @retvalOUT = CHARINDEX(''' +  + @Char + ''',''' + @NewStr + ''')'
    EXEC sp_executesql @sql, @ParmDefinition, @retvalOUT=@i OUTPUT;

    IF @i > 0
    BEGIN
        set @pos = @pos + @i
        SELECT @NewStr = SUBSTRING(@NewStr, @i + 1, LEN(@S))
        --SELECT @NewStr '@NewStr', @Char '@Char', @pos '@pos', @sql '@sql'
        --SELECT @NewStr '@NewStr', @pos '@pos'

        INSERT INTO @D
            SELECT @NewStr, @pos

        SET @i = @i + 1
    END
    ELSE
        BREAK
END
SELECT * FROM @D 
```

结尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-16T09:12:16.770

如果你使用 MySQL 并且不能使用接受四个参数的 instr 函数或 regexp_substr，你可以这样做：

```
select substring_index(substring_index(help, ' ', 2), ' ', -1)
from (select 'hello my name is...' as help) h 
```

结果：“我的”。

将上面代码中的“2”替换为您想要的单词的编号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-25T07:01:05.150

如果您使用的是 SQL Server 2016+，那么您可以利用 STRING_SPLIT 函数。它返回字符串值的行，如果您的目标是获取第 n 个值，那么您可以使用 Row_Number() 窗口函数。

这里有一个小技巧，因为您不想真正按某些东西排序，因此您必须“欺骗” row_number 函数并允许其值按自然顺序排列，即 STRING_SPLIT() 函数将吐出。

如果您想找到字符串的第三个单词，下面是一个代码片段

```
Declare @_intPart INT = 3; -- change nth work here, start # from 1 not 0 
SELECT value FROM(
    SELECT  value, 
    ROW_NUMBER()OVER(ORDER BY (SELECT 1)) AS rowno
    FROM STRING_SPLIT('hello world this is amazing', ' ')
) AS o1 WHERE o1.rowno = @_intPart; 
```

您还可以创建一个标量函数来检索值。

# java - 如何更改 JSplitPane 的颜色

> ID：10109336
> 
> 赞同：4
> 
> 时间：2012-04-11T15:42:34.230
> 
> 标签：java, swing

我在阅读一本关于摇摆的书时编写了一个小程序，它在两个标签之间创建了一个 JSplitPane。问题是几乎看不到 JSplitPane（至少在我的操作系统 - MAC OS Lion 中）并且在其上设置一些属性（如前景色）似乎不起作用。

这是代码：

```
//Demonstrate a simple JSplitPane

package swingexample4_6;

import javax.swing.*;
import java.awt.*;

public class SplitPaneDemo {

    //constructor
    public SplitPaneDemo()
    {
        //Create a new JFrame container.
        //Use the default border layout
        JFrame jfrm = new JFrame("Split Pane Demo");

        //Give the frame an initial size
        jfrm.setSize(380, 150);

        //Terminate the program when the user closes the application
        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //--Make two labels to show the split pane
        JLabel jlab = new JLabel(" Left side: ABCDEFGHIJKLMNOPQRSTUVWXYZ");
        JLabel jlab2 = new JLabel(" Right side: ABCDEFGHIJKLMNOPQRSTUVWXYZ");

        //Set the minimum size for each label
        //This step is not technically needed to use a split pane,
        //but it enables the split pane resizing features to be
        //used to their maximum extent
        jlab.setMinimumSize(new Dimension(90, 30));
        jlab2.setMinimumSize(new Dimension(90, 30));

        //--Create a split pane
        JSplitPane jsp = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, true, jlab, jlab2);

        //Code to get a list of component names in the console
        Component[] listComponents = jsp.getComponents();

        String theList;
        for (Component myComponent: listComponents)
        {
            theList = myComponent.toString();
            System.out.println(theList);
        }

        //Add the split pane to the content pane
        jfrm.getContentPane().add(jsp);

        //Display the frame
        jfrm.setVisible(true);
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                new SplitPaneDemo();
            }

        });
    }
} 
```

有什么办法可以改变它的颜色，让它真正脱颖而出？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:39:57.573

您可以使用该`SplitPane.background`属性，如下所示。

![拆分窗格背景](../Images/7e0be5fdcd0016210293c3211f11df40.png)

```
import javax.swing.*;
import java.awt.*;

/** @see http://stackoverflow.com/a/10110232/230513 */
public class SplitPaneDemo {

    //constructor
    public SplitPaneDemo() {
        JFrame jf = new JFrame("Split Pane Demo");
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //--Make two labels to show the split pane
        JPanel left = content("Left side: ");
        JPanel right = content("Right side: ");

        //--Create a split pane
        JSplitPane jsp = new JSplitPane(
            JSplitPane.HORIZONTAL_SPLIT, true, left, right);
        jsp.setDividerLocation(0.5f);

        //Add the split pane to the frame's content pane
        jf.add(jsp);
        jf.pack();

        //Display the frame
        jf.setLocationRelativeTo(null);
        jf.setVisible(true);

        //Code to get a list of component names in the console
        for (Component myComponent : jsp.getComponents()) {
            System.out.println(myComponent);
        }
    }

    private JPanel content(String s) {
        final JLabel label = new JLabel(s + "Some text.", JLabel.CENTER);
        JPanel panel = new JPanel(new GridLayout()) {

            @Override
            public Dimension getPreferredSize() {
                Dimension d = label.getPreferredSize();
                return new Dimension(d.width * 2, d.height * 3);
            }
        };
        panel.setOpaque(true);
        panel.setBackground(new Color(0xffffffc0));
        panel.add(label);
        return panel;
    }

    public static void main(String[] args) {
        UIManager.put("SplitPane.background", new Color(0xff8080ff));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SplitPaneDemo();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T15:54:09.660

`JLabel`默认是`NON_Opaque`，simple是透明的，你可以

*   更改`JLabels`为`JComponent`or`JPanel`可能会更好

*   改变不透明度`JLabel#setOpaque(true)`

# c# - WPF 中的自动收报机栏

> ID：10109339
> 
> 赞同：1
> 
> 时间：2012-04-11T15:42:43.153
> 
> 标签：c#, wpf, ticker

我正在考虑显示数据的方法，我想到的是一种代码，用户可以在项目之间切换。

IE。

<这里有一些文字...>

如果用户单击左按钮，动画会导致文本向左滑动，并从右侧出现一些新文本。单击右键也是如此。

是否有任何现有的 WPF 控件可以做到这一点（我对 WPF 很陌生）？如果没有，手动制作有多难？我想我需要使用故事板来制作动画？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:47:46.863

听起来您在谈论轮播控件。使用 ItemsControl 或 ListBox 将所选项目滑动到视图中来制作自己的项目并不难。那里有一些控件，包括 Telerik 制作的控件。这里有几个链接可以帮助您入门，但只需 google “WPF Carousel”

[http://wpfcarousel.codeplex.com/](http://wpfcarousel.codeplex.com/)

[http://www.telerik.com/products/wpf/carousel.aspx](http://www.telerik.com/products/wpf/carousel.aspx)

# java - 自动更新软件的设计

> ID：10109340
> 
> 赞同：5
> 
> 时间：2012-04-11T15:42:45.453
> 
> 标签：java, desktop, auto-update

简而言之，您将如何设计一个支持简单可靠的自动更新的应用程序？

我对如何切割它以及所涉及的各种操作很感兴趣。

编辑：这与这个问题有关：[自毁应用程序](https://stackoverflow.com/questions/10107989/self-destructing-application)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:59:06.780

需要处理的问题：

*   如果进行更新的应用程序*本身*正在更新，则需要重新启动，或者需要执行存根将文件移动到位（以避免文件使用中的错误。）

*   无论您通过网络请求与之通信以检索文件的任何服务都需要知道您正在运行的已安装包的当前版本。它将动态构建文件 URL 列表，甚至可能压缩文件并将其放在客户端的单个 URL 中。否则，让客户端遍历 URL 列表，拉取每个文件。每个 URL 都将与一个操作相关联，例如“复制”或“执行”。

*   处理每个检索到的文件并将其安装到客户端。

*   更新需要是原子的（如果操作的任何部分失败，则能够回滚。）您不希望处于部分状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T16:08:27.007

Java 网络启动协议在简化自动更新软件的部署方面做得很好。该站点上的一些人报告了它的问题，但这可能是由于使用旧版本的 Java 或未正确设置 JNLP 文件。我发现它在 Mac 和 Windows 以及工作中的 PC 上运行良好，无需以管理员身份登录，我能够有效地“安装”我的软件。从用户的角度来看，就像我给了她一个新的桌面应用程序一样。桌面上有一个程序图标，我的程序保存的文件与之相关联 - Windows 为它们提供正确的图标，当您双击它们时它们会打开。但是每次她运行程序时，JNLP 首先检查她本地存储的 JAR 文件与我服务器上的内容，以及她的文件是否比我服务器上的文件旧，软件得到更新。这些程序的启动速度仍然与本机 Windows 应用程序一样快，除了第一次必须下载所有内容。

现在要使程序自毁，这里有两个选项：

1.  将服务器上的 jar 文件更改为简短无用。用户启动程序，它会更新，然后他们会看到一个对话框，告诉他们该程序不再可用。您也可以通过这种方式禁用功能。但这会立即影响所有用户。您可以创建几个不同的 JNLP 文件，每个文件用于具有相同时间线的不同类别的用户，以使您的应用程序能够运行，您甚至可以让服务生成 JNLP 文件。但是禁用它的控件仍然来自您更改服务器上的 jar。

2.  当程序启动时，它首先联系 Web 服务以验证程序是否应该仍在运行。您可以创建一个数据库表，将您的用户与他们现在可以使用的功能相关联。如果您的用户没有注册，您将需要在他们第一次运行程序时以某种方式为他们创建一个 id，将其放在 db 表上并使用首选项 api 将其存储在客户端计算机上。

如果您不熟悉使用 JNLP 自动更新，这里有一些背景知识可以帮助您入门：

JNLP 文件是一个 XML 文件，它描述了您的应用程序在线存储的位置以及它需要运行哪些 JAR 文件。还指定了应用程序的各种属性，例如启动画面、桌面图标、更新样式（总是询问、不提示就更新、在后台更新）以及与程序关联的文件。

[阅读 JNLP 开发人员指南](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/contents.html)以获取有关如何使其工作的详细说明。

您还可以在线查看大量示例。在 Chrome 中，JNLP 文件的默认行为只是保存它，在其他浏览器中，您可能需要右键单击并另存为，但这仅适用于文件的直接链接而不是花哨的 javascript 按钮。然后，您可以在您喜欢的文本编辑器中打开 JNLP 文件作为示例。
[swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)使用 JNLP 文件来演示代码。

# javascript - Array.Splice 原型

> ID：10109344
> 
> 赞同：0
> 
> 时间：2012-04-11T15:42:59.440
> 
> 标签：javascript, arrays, splice

我有一个 addAfter 和 addBefore 函数，可以将新元素添加到数组中。这个数组是我其他函数使用的存储。基本上我正在存储定义表格单元格的低级对象。将元素添加到数组后，我必须将元素的 html 属性的值插入表格行。

有没有办法对我的数组进行原型处理以处理这两个操作，而不是每次我 addAfter 或 addBefore 时都必须加倍工作负载，而不会弄乱本机数组的原型？

```
var bays=[];

 addAfter: function (b, n) {
            for (var i = 0, ii, len = bays.length; i < len; i++) {
                ii = i + 1; if (ii == n) {
                    bays.splice(ii, 0, b);
                    var newCell = canvsTrBay.insertCell(ii);
                    newCell.outerHTML = b._html;
                };
            };
            this.build();
        } 
```

***是否可以执行以下操作：***

```
 bays.prototype.add=function(b,n,isAfter){

       for (var i = 0, ii, len = bays.length; i < len; i++) {
                    ii =(isAfter? (i + 1):(n>0?i-1:0); 
                     if (ii == n) {
                        bays.splice(ii, 0, b);
                        var newCell = canvsTrBay.insertCell(ii);
                        newCell.outerHTML = b._html;
                    };
                };
                this.build();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:45:44.500

您可以将其直接添加到对象本身：

```
bays.add = ...; 
```

# iphone - iPhone SDK 访问用户输入的内容

> ID：10109345
> 
> 赞同：0
> 
> 时间：2012-04-11T15:43:10.327
> 
> 标签：iphone, ios

有没有办法查看用户在 iPhone 上在任何应用程序中输入的内容，然后根据他们输入的内容执行操作。例如，如果用户正在键入文本消息，有没有办法查看他正在键入的内容并超链接一个单词，或者显示一个通知？

如果您需要进一步说明，请告诉我。

**编辑：**

文本监控将发生在不同的应用程序上；我希望能够跟踪所有输入的文本，因此如果用户正在输入注释或文本消息，我希望能够跟踪它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:48:00.090

许多与文本输入相关的视图都有[委托方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)，但它们似乎不会以每个字符的粒度发送通知。当然，你可以有自己的看法，做任何你想做的事。没有代码很难回答你的问题，但答案似乎是“是的，但不容易”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:49:35.033

实验：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

您需要实现 UITextFieldDelegate 并将 textField 的委托设置为您正在使用的任何（例如）viewController，以便在对 textField 进行任何更改时收到消息。

我假设您的意思是在您正在编码的应用程序中，而不是任何其他可能正在运行的应用程序 - 那是不可能的，也可能是不可取的！

# php - 在哪里检查外键：在 PHP 中通过附加查询，还是让 MySQL 引发错误？

> ID：10109346
> 
> 赞同：1
> 
> 时间：2012-04-11T15:43:12.560
> 
> 标签：php, mysql, insert, foreign-keys

哪个是处理`FOREIGN KEY`数据库错误的最佳方法`INSERT`？

1.  PHP之前`INSERT`：加载`SELECT`检查外键匹配的附加查询（）？

2.  让 MySQL 引发错误，而 PDO 抛出异常？

3.  存在更多选择吗？

与速度/优雅/可重用代码/等进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:47:55.637

在您接触数据库之前检查您意识到可能存在的错误总是有意义的，所以我会说选项 1 是最好的选择。它还为您提供更用户友好的错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:48:29.880

有时 1) 不是一种选择。想象一下，您有参加会议的人员。如果您有一个 PeopleMeetings 表（M 到 N 关联），您不能执行 SELECT 然后执行 INSERT... b/c 您可以执行 SELECT 并发现 Person 和 Meeting 都存在，然后另一个进程可以删除会议，然后您将执行插入，这将失败 b/c 会议不再存在。

这就是为什么我总是做 2)... 显然，如果会议不存在，我会在加载页面之前做一个 SELECT，向用户显示系统上当前的会议，但是做 2) 是必须的。

更不用说你不需要再做 2 个额外的查询（在我的例子中）一个到 People，另一个到 Meeting……你仍然可以优雅地处理错误，向用户提供出错的信息（当你如果你做了 2 SELECT 查询会做）

此外，您应该使用事务...这样，如果您正在对数据库进行更改并且此 INSERT 失败，则事务将回滚并且数据库不会处于不一致状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:45:36.023

如果您不想“用户友好”并显示有用的错误消息，我会说 1。

当然，答案将取决于您的上下文...

# c - 使用荒谬的内存量的堆实现 - C

> ID：10109350
> 
> 赞同：4
> 
> 时间：2012-04-11T15:43:22.433
> 
> 标签：c, memory-management, data-structures

`min-heap`作为 Dijkstra 算法的一部分，我正在用 C 语言编写 a的实现。我已经把所有细节都写下来了，我的测试程序通过了 valgrind 测试，但它在这个过程中分配了荒谬的内存量。最后的测试是在一个网格上`INT_MAX`（`INT_MAX`坐标只是整数），我`SIGXCPU`在测试时会出错。即使我只是将`16k`位置插入队列然后删除所有内容，它仍然需要很长时间并分配超过`8 MB`. 当我在巨大的网格测试用例上运行它时，它可以`500 MB`在我手动退出之前达到。会发生什么？这是我的代码的一部分：

```
struct position {
    int x;
    int y
};

typedef struct elt {
    int priority;
    int distance;
    struct position p;
} *Elt;

typedef struct heap {
    int size;
    int capacity;
    Elt *elts;
} *Heap;

void heap_insert(Heap h, Elt e, int *counter) {
    if(h->capacity < (h->size + 2)) {
        h->elts = realloc(h->elts, h->capacity * sizeof(Elt) * 2);
        h->capacity *= 2;
    }
    h->elts[h->size] = malloc(sizeof(*Elt));
    elt_assign(h->elts[h->size], e);
    h->size++;
    heapify(h->size, h->elts);
    *counter = *counter + 1;
} 
```

我所有的其他功能都一次性进行内存管理，在功能中进行，或者根本不进行。在这种情况下，初始大小是`64`，但我从 开始得到了相同的效果`1024`。我还尝试限制队列的大小，但无济于事。我很确定这不是我的堆积代码，但这是以防万一

```
static void floatDown(int n, Elt *a, int pos) {
    Elt x = malloc(sizeof(struct elt));
    elt_assign(x, a[pos]);
    for(;;) {
        if(Child(pos, 1) < n && a[Child(pos, 1)]->priority < a[Child(pos, 0)]->priority) {
            if(a[Child(pos, 1)]->priority < x->priority) {
                elt_assign(a[pos], a[Child(pos, 1)]);
                pos = Child(pos, 1);
            } else {
                break;
            }
        } else if(Child(pos, 0) < n && a[Child(pos, 0)]->priority < x->priority) {
            elt_assign(a[pos], a[Child(pos, 0)]);
            pos = Child(pos, 0);
        } else {
            break;
        }
    }
    elt_assign(a[pos], x);
    free(x);
}

static void heapify(int n, Elt *a) {
    for(int i = n - 1; i >= 0; i--) {
        floatDown(n, a, i);
    }
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:49:43.583

这是我的工作理论。我愿意发现自己错了，但是如果没有其余代码，我就无法检测、运行和测试它。

`... struct heap { ... Elt *elts; } ...`when的间接性`typedef struct elt {...} *Elt;`节省了复制 4 个整数并用复制 1 个指针替换它的成本，但是复制速度很快，并且只发生 log2(N) 次。

相反，每个`struct elt`都是单独的 malloc'd。无需四处寻找 malloc'd 块的实际大小，我们可以估计，平均而言这将浪费 N/2 sizeof(struct elt) （实际上，我认为它在我的机器上更糟）。

它还可能创建不连续的内存块（通过将小块放在较大的块之间），因此 realloc 必须*始终*分配更大的块，因此更难重用以前的块。在这种特定情况下，我认为这并不像由于内部碎片或大量 malloc 调用造成的浪费那么重要。

它还可能创建一个“缓存破坏者”。实际值分布在整个内存中，并且由于 malloc 结构 elt 块的内部碎片，缓存行相对稀疏。

所以替换：

```
typedef struct elt {
    int priority;
    int distance;
    struct position p;
} *Elt;

typedef struct heap {
    int size;
    int capacity;
    Elt *elts;
} *Heap; 
```

和

```
typedef struct elt {
    int priority;
    int distance;
    struct position p;
} Elt;    // no longer a pointer

typedef struct heap {
    int size;
    int capacity;
    Elt *elts;
} *Heap; 
```

并改变：

```
void heap_insert(Heap h, Elt e, int *counter) {
    if(h->capacity < (h->size + 2)) {
        h->elts = realloc(h->elts, h->capacity * sizeof(Elt) * 2);
        h->capacity *= 2;
    }
    h->elts[h->size] = malloc(sizeof(*Elt));
    elt_assign(h->elts[h->size], e);
    h->size++;
    heapify(h->size, h->elts);
    *counter = *counter + 1;
} 
```

至

```
void heap_insert(Heap h, Elt e, int *counter) {
    if(h->capacity < (h->size + 2)) {
        h->elts = realloc(h->elts, h->capacity * sizeof(Elt) * 2);
        h->capacity *= 2;
    }
    h->elts[h->size] = e;  // no longer need to malloc
    h->size++;
    heapify(h->size, h->elts);
    *counter = *counter + 1;
} 
```

因此，用于保存堆的 malloc'd/realloc'd 的内存量应该大约为 2 * N * sizeof(struct elt)。函数/宏 elt_assign 可能会被更改以隐藏其他更改。

然后通过更改进一步减少 malloc'ing 的数量：

```
static void floatDown(int n, Elt *a, int pos) {
    Elt x = malloc(sizeof(struct elt));
    elt_assign(x, a[pos]);
...
    elt_assign(a[pos], x);
    free(x);
} 
```

至

```
static void floatDown(int n, Elt *a, int pos) {
    Elt x = a[pos];
...
    a[pos] = x;
} 
```

这应该会进一步减少 malloc'ed 和 free'd 的内存量。

从本质上讲，应该只有（大约）log2(N) 次 realloc 调用。realloc 只是扩展现有块而不是副本的可能性也更大。

* * *

编辑：

`heap_insert`比内存分配有一个更大的问题：

```
void heap_insert(Heap h, Elt e, int *counter) {
    ...
    heapify(h->size, h->elts);
    ...
} 
```

`heapify`**每次**插入堆中的元素都会被调用，即 heapify 被调用 N 次。`heapify`是：

```
static void heapify(int n, Elt *a) {
    for(int i = n - 1; i >= 0; i--) {
        floatDown(n, a, i);
    }
} 
```

到目前为止，对于插入的**每个****元素**，这都会调用堆中`floatdown`的每个元素。因此运行时间大约为**(N^2)/2**（即 O(N^2)) 运行时间。****`heap_insert`****

 ******我相信`heap_insert`应该使用`floatDown`它添加到堆中的每个元素，而不是`heapify`.******

# php - 功能测试服务

> ID：10109353
> 
> 赞同：0
> 
> 时间：2012-04-11T15:43:37.980
> 
> 标签：php, unit-testing, service, phpunit

我无法测试我的应用程序中的一些简单服务。这是我的服务方法：

```
public function createNewCourse($details = array())
    {
        $course = new Course($details);
        $this->persistenceManager->save($course);
    } 
```

基本上我正在向该服务发送一个数组，创建设置对象属性的 $course 对象。之后我调用persistenceManager，它基本上有一个将对象插入数据库的保存方法。无论如何，如何在不实际测试持久性的情况下测试此方法的任何提示，因为那将是另一个测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:55:43.740

如果[作为依赖注入到您的对象中，](http://www.potstuck.com/2009/01/08/php-dependency-injection/)`persistanceManager`那么您可以创建一个[模拟对象](http://www.phpunit.de/manual/current/en/test-doubles.html)来在您的测试中表示它。

如果不是，那么您将很难进行单元测试，您应该重构代码以使用依赖注入。

别担心，依赖注入只是一个非常简单概念的花哨的短语。

您将在对 Course 对象进行单元测试时遇到类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:01:23.287

使用存根 persistenceManager 并将其提供给包含*createNewCourse*方法的类。存根应如下所示：

```
class StubPersistenceManager
{
    private $course;
    public function save($course)
    {
         $this->course = $course;
    }
    public function getCourse()
    {
         return $this->course;
    }
} 
```

确保在包含*createNewCourse*方法的类中将此存根的实例作为 $this->persistenceManager 注入。

在测试中，您调用*createNewCourse*方法，随后可以使用存根的*getCourse*函数获取提供给持久性管理器的课程实例。

# c# - 从 Combobox 双位数转换为 int 双位数

> ID：10109355
> 
> 赞同：-1
> 
> 时间：2012-04-11T15:43:39.970
> 
> 标签：c#, int

```
Min = Convert.ToInt32(cbMin.SelectedItem); 
```

这是我的问题，使用该行将组合框转换为整数变量。现在，如果我从下拉列表中选择“00”或“05”，则该值仅显示为“0”或“5”它似乎仅在数字以“0”开头时发生

我错过了什么吗？

PS：顺便说一句，当我设置组合框时，我只是使用侧面的属性部分并填写了集合。只是想确定我把它扔在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:47:10.177

如果要前导零使用字符串，请不要将值转换为整数

```
i.ToString("00") 
```

试试这个解决方案会为你工作

最终代码是

字符串 s = (Convert.ToInt32(cbMin.SelectedItem)).ToString("00")

**编辑**

如果你已经用 0 分配了 valeu ，那么你只需要写

```
string Min = cbMin.SelectedItem.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:47:38.820

整数没有前导零。它们是数字数据类型。前导零只能在字符串数据类型中使用。

*   int 0 与字符串“0”不同
*   int 1 与字符串“1”不同

如果您需要输出带有前导 0 的值，并且从不在数学计算中使用它，则应将其保留为字符串。首先不要将其转换为 int 。

如果需要将其作为整数进行计算，则需要将其转换为 int，但在需要前导零的地方，请对其进行格式化。将其转换回字符串并使用数据格式获取前导零。

`"1".ToString("00")` 将导致“01”。

`"15".ToString("00")`将导致“15”。

有关格式化数字数据类型的更多信息，请参阅此处的文档[和](http://msdn.microsoft.com/en-us/library/0c899ak8%28VS.80%29.aspx)[此处](http://msdn.microsoft.com/en-us/library/0c899ak8%28VS.80%29.aspx)的自定义数字格式字符串（如我上面的示例所示）文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:02:51.217

`5`像`05`在*C#*中那样制作整数是没有意义的。但是如果想要一个字符串有这种格式，你可以这样做：

```
string Min = Convert.ToInt32(cbMin.SelectedItem).ToString("00"); 
```

或者

```
string Min = String.Format("{0:0#}", Convert.ToInt32(cbMin.SelectedItem)); 
```

# javascript - 如何将 window.location 设置为特定路径（没有主机）？

> ID：10109360
> 
> 赞同：17
> 
> 时间：2012-04-11T15:44:05.790
> 
> 标签：javascript, jquery

我正在使用窗口定位方法在一段时间后将网页重定向到另一个网页。

url 需要从 www.myurl.com/home 更改为 www.myurl.com/other。问题是我不知道最终的 URL 是什么，所以我不能使用绝对链接，它们只能是路径。这是我到目前为止所拥有的：

```
 window.location.pathname = "mobility.html" 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-11T15:48:01.877

你可以在你的 URL 前面加上一个`/`，使它们相对于域根目录（无需对域名进行硬编码）。像这样：

```
window.location = "/mobility.html" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-16T03:29:04.743

`window.location.assign("/path")`也有效。

# c# - SP2101：方法主体不得包含超过 120 行代码 - 我该如何抑制这一点？

> ID：10109361
> 
> 赞同：2
> 
> 时间：2012-04-11T15:44:06.163
> 
> 标签：c#, stylecop, suppressmessage

我有一种方法可以遍历大量文件类型，如下所示：

```
case ".jpg": 
    res = "image/jpeg"; 
    break;
case ".pdf": 
    res = "application/pdf"; 
    break;
case ".doc": 
    res = "application/msword"; 
    break; 
```

..这持续了几百行。我遇到了 StyleCop 错误：`SP2101: Method body must not contain more than 120 code lines`

我四处寻找，找不到任何东西，更不用说压制了。有谁知道如何禁止此消息？

**编辑**：我认为这是一个`StyleCop+`错误，无法使用 FxCop 程序复制抑制来解决。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T15:55:44.963

您*可以将*其重构为`Dictionary<string,string>`：

```
var mimeTypesPerFileType = new Dictionary<string,string>();
mimeTypesPerFileType.Add(".jpg", "image/jpeg");
mimeTypesPerFileType.Add(".pdf", "application/pdf");
... 
```

这会将方法中的行数减少大约三分之一（尽管这可能在单独的方法/字段中，因此您不需要每次都重新填充字典）。

然后该方法更改为：

```
return mimeTypesPerFileType[fileType]; 
```

* * *

更新：

看到您有大约 400 个奇怪的案例（方法中大约有 1300 行），您确实应该从文件或数据库中加载此地图。这*肯定会*减少行数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T20:34:47.043

我是 StyleCop+ 的作者。

它添加到原始 StyleCop 功能的规则之一确实是**SP2101 (MethodMustNotContainMoreLinesThan)**，它检查您的方法的大小。

像任何其他 StyleCop 警告一样，它可能是：

*   禁用，在这种情况下，这意味着您只是不需要它
*   在代码中的某个特定位置被抑制（当你通常仍然需要它时，但不是在这里）

此外，它是可配置的。如果你想使用这个规则，你可以为你自己的配置输入任何数字而不是**120 。****120**只是一些默认值。

这条规则的重点是可维护性。检查您是否陷入意大利面条式代码可能非常重要。StyleCop 只是一个工具，让您能够控制它。StyleCop+ 提供了更多检查规则。因此，如果您想使用它们 - 请继续。如果你不这样做 - 只需禁用它。这是一种在使用前确实需要配置的工具。

如果您在配置方面需要任何帮助，请告诉我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T15:54:17.563

我不使用 StyleCop，但一个建议可能是改变你的方法。您可以将所有这些值对存储在 XML 文件等中，并使用 a`List(Of T)`来组织它们。您的方法可以减少到几行。

# spotify - Spotify 播放按钮不适用于“已加星标”播放列表

> ID：10109363
> 
> 赞同：3
> 
> 时间：2012-04-11T15:44:13.123
> 
> 标签：spotify

我无法让 Spotify 发布的新功能 Play Button 在我使用的已加星标的播放列表上运行。当我使用任何其他播放列表时，它工作得很好。

例子...

作品：

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:joshua88wa:playlist:6U00tOjtzhBrEgpJJhTxDh" width="300" height="380" frameborder="0" allowtransparency="true"></iframe> 
```

不起作用：

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:joshua88wa:starred" width="300" height="380" frameborder="0" allowtransparency="true"></iframe> 
```

有什么方法可以让我的已加星标播放列表与此新功能一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:47:14.007

Spotify 播放按钮不支持已加星标的播放列表。原因在于它是如何在后端实现的。它基本上给我们的服务器带来了太多的负载。我们最终会解决这个问题，但目前还不可能。

# jsf - JSF：错误处理 和 JSF1073 错误

> ID：10109364
> 
> 赞同：1
> 
> 时间：2012-04-11T15:44:16.537
> 
> 标签：jsf, jsf-2, error-handling

我有一个`error-page`指令将所有异常重定向到错误显示页面

我的`web.xml`：

```
<web-app [...]>
    [...]
    <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/view/error.xhtml</location>
    </error-page>
</web-app> 
```

**它几乎适用于任何异常**，但今天我注意到有时会记录 JSF 错误并且不处理异常（即，没有重定向到错误页面）。

这是我在日志中的内容：

```
javax.enterprise.resource.webcontainer.jsf.context || JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=searchForm:j_idt147, Message=/view/listView.xhtml @217,7 actionListener="#{listController.nextPageClicked}": java.lang.NullPointerException
javax.enterprise.resource.webcontainer.jsf.context || /view/listView.xhtml @217,7 actionListener="#{listController.nextPageClicked}": java.lang.NullPointerException
javax.faces.event.AbortProcessingException: /view/listView.xhtml @217,7 actionListener="#{listController.nextPageClicked}": java.lang.NullPointerException
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.doChainInvoke(StandardPipeline.java:600)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:96)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
    at ch.ethz.id.wai.web.controller.ListController.nextPageClicked(ListController.java:410)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

我该如何处理这些异常？

**编辑**：通过*句柄*我并不是说我想纠正导致异常的问题（这是另一个主题），但我的问题是如何使用`<error-page>`指令在 JSF 中捕获异常。错误页面可见，日志中的条目很容易被遗漏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T01:45:01.757

这是设计使然。当一个`actionListener`方法抛出异常时，它只会被记录，不会被抛出。它“只是”一个旨在进行琐碎的预处理/记录任务等的侦听器，而不是真正的动作。只有当一个`action`方法抛出异常时，才会一直委托给容器，最终进入默认的错误页面。

如果要执行对异常敏感的业务操作，请改为在`action`方法中执行。

### 也可以看看：

*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# macos - 我应该担心“范围内的书签代理连接中断”日志消息吗？

> ID：10109367
> 
> 赞同：3
> 
> 时间：2012-04-11T15:44:21.500
> 
> 标签：macos, osx-lion, nsurl, appstore-sandbox

我正在对我的 Mac 应用程序进行沙盒处理，并且正在使用 OS X 10.7.3 的[安全范围书签](https://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW16)功能来保留对应用程序沙箱之外文件的引用。我的所有代码似乎都可以正常运行，但最终我在应用程序的输出中重复了数百次以下消息（对于相对简短的操作）。

```
scoped bookmarks agent connection interrupted 
```

这是一个问题吗？这让我觉得我做错了事，但我不确定那可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:28:10.067

不，你不应该担心。至少根据苹果员工的说法。

如果您拥有 Mac Dev Center 会员资格，请参阅论坛上的[此主题](https://devforums.apple.com/message/618767#618767 "是")以了解详细信息。

如果您不这样做，则可能没有人可以告诉您详细信息，因为该主题位于论坛的 NDA 部分。（尽管它是 Lion 的一项功能，而且这个问题专门针对 10.7.3，但应用程序沙盒论坛是 Mountain Lion 部分的一部分……）

编辑：正如 Dov 所指出的，Mountain Lion 已经公开了很长时间，因此该主题不再出现在论坛的 NDA 部分。（应用程序沙盒论坛已移至部署论坛，我相信任何人都可以访问。）您应该可以点击链接了解更多详细信息。

但来自 Apple 员工 Aerie 的相关部分是：

> 这是无害的。代理积极空闲退出，中断空闲连接。由于您将进程冻结在调试器中，因此与代理的连接处于空闲状态。
> 
> 这是出乎意料的，但是是的，仍然无害。我们将看看可能导致输出如此频繁的原因。

不知道有没有修复。我个人在 10.8.2 和 10.8.3 beta 下没有像在 10.7.3 和 10.8 PR 下那样经常注意到它……但是我没有开发相同的代码，并且可能没有给予太多关注。

# c# - 是否可以对潜在的空对象引用进行静态代码验证？

> ID：10109369
> 
> 赞同：8
> 
> 时间：2012-04-11T15:44:23.370
> 
> 标签：c#, .net-3.5, static-analysis

我想要一种在对象引用可能引发空引用异常时获得警告的方法，以便我可以为这些编写防御性代码。

我看过 Resharper，但没有看到任何可以实现这一点的东西。

Code Contracts 可能无法启动。该应用程序非常大，它是在代码合同正式可用之前用 .NET 3.5 编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:57:16.530

Resharper 实际上确实完成了类似的事情。可能的 NullReferenceExpections 在 IDE 中以蓝色突出显示，当您将鼠标悬停在它们上方时会显示工具提示。

![在此处输入图像描述](../Images/e9c5190686a3386ce3ede757a1bae3b6.png)

然后，Resharper 在它自己的检查结果窗口中跟踪潜在的错误和警告（与 Visual Studio 的编译器错误和警告分开）。

![在此处输入图像描述](../Images/26468dfa82e5cb2ca9326503ed58cdde.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:58:28.777

一般来说，除非你专门初始化了一个对象，否则它总是有可能抛出一个空对象引用，至少就编译器而言。

为了让算法检查对对象的引用是否可能为空，它必须遍历程序可以采用的所有可能路径，其中包括您可能正在使用的任何外部库中的路径。即使对于最简单的程序，这样的算法也会降低编译器的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:51:58.900

我反对为代码和每个方法中的每个可用字段盲目地防御 null 的想法。

以下帮助我决定在哪里检查空值：

**1-谁会调用你的方法？**
如果一个方法是私有的并且您可以控制它是如何被访问的，那么我认为防止空检查是没有意义的，除非它是方法逻辑的一部分来期望空值。如果一个方法向公众公开（例如 API），那么 null 检查当然应该是一个大问题。

**2- 软件设计：**
您正在调用的图像`method1(fromAnimalToString(animal));`由于某种原因`fromAnimalToString()`永远不会返回 null （尽管可能会返回一个空字符串）。
那么在这种情况下，检查`animal != null`method1() 的主体是没有意义的

**3- 测试：**
在软件工程中，几乎不可能测试所有可能执行的场景。但是，请测试正常和替代方案并确保流程符合预期。

# c++ - C 样式字符串到 std::string 转换说明

> ID：10109370
> 
> 赞同：5
> 
> 时间：2012-04-11T15:44:25.103
> 
> 标签：c++, string, copy

我有几个问题，我认为对于具有 C++ 经验的人来说很容易回答，我会为 TL;DR 加粗问题

给定以下代码：

```
void stringTest(const std::string &s)
{
    std::cout << s << std::endl;
}

int main()
{
    stringTest("HelloWorld");
} 
```

希望有人可以在这里指出我思考过程中的错误：

**为什么 stringTest 中的参数在传递 C-Style 字符串时必须标记为 const？**是否存在使用其 cstyle 字符串构造函数进行的到 std::string 的隐式转换，因此“s”不再是对文字的引用（并且不需要是 const）。

**此外，cstyle 字符串构造函数会是什么样子，编译器如何知道在看到时调用它**：

```
stringTest("HelloWorld"); 
```

它是否只是将字符串文字识别为 char* 之类的东西？

我在研究复制构造函数时偶然发现了这些问题。我自己澄清的另一个快速问题......

在类似的情况下：

```
std::string s = "HelloWorld"; 
```

**cstyle字符串构造函数是用来实例化一个临时std::string，然后使用字符串复制构造函数将临时字符串复制到“s”中吗？**：

```
std::string(const std::string&); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:47:52.853

> 为什么 stringTest 中的参数在传递 C-Style 字符串时必须标记为 const？

仅当参数是引用时才需要，因为临时`std::string`是从`char const*`您传入的构造的，并且对临时的非`const`引用是非法的。

> 它是否只是将字符串文字识别为 char* 之类的东西？

字符串文字是一个`char const`数组，它衰减为`char const*`. 由此，编译器推断它应该使用非`explicit`构造函数`std::string::string(char const *)`来构造临时对象。

> cstyle的构造函数是用来实例化一个临时的std::string，然后使用字符串拷贝构造函数将临时字符串复制到“s”中吗？

比这复杂一点。是的，创建了一个临时的。但是复制构造函数可能会也可能不会被调用；允许编译器跳过复制构造作为优化。但是，仍然必须提供复制构造函数，因此无法编译以下内容：

```
class String {
    String(char const *) {}
  private:
    String(String const &);
};

int main()
{
    String s = "";
} 
```

此外，在 C++11 中，将使用移动构造函数（如果提供）；在这种情况下，不需要复制构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:50:29.350

> 为什么 stringTest 中的参数在传递 C-Style 字符串时必须标记为 const？

编辑：临时变量必须是不可变的。看到拉尔斯曼的评论和回答，他是对的。

原因很简单：

```
void change(std::string& c) { c = "abc"; }
change("test"); // what should the code exactly do?? 
```

> 此外，cstyle 字符串构造函数是什么样的，编译器如何知道在看到时调用它：

它查找`std::string`构造`string(char*)`函数

> 在类似的情况下：
> 
> ```
> std::string s = "HelloWorld"; 
> ```
> 
> cstyle的构造函数是用来实例化一个临时的std::string，然后用字符串拷贝构造函数把临时字符串复制到“s”中吗？：std::string(const std::string&);

不，在这种确切的情况下 ( `TYPE variable = SOMETHING`)，它与写作 相同`TYPE variable(SOMETHING);`。因此，不使用复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:02:22.807

> 它是否只是将字符串文字识别为 char* 之类的东西？

原始问题的这一部分没有像我希望的那样清楚地回答。不过，我完全赞同（并投票赞成）约塞连对其余部分的回答。

基本上，您需要了解编译器在看到代码中的字符串文字时在做什么。该字符数组（实际上是任何 c 样式字符串）实际上存储在与其所属代码完全不同的位置（取决于体系结构，数字文字可以作为程序集的一部分存储在该位置本身/二进制指令）。这里的两个代码块“或多或少”等效（忽略缺少包含或命名空间声明）：

```
int main(void)
{
    cout << "Hello!" << endl;
    return 0;
} 
```

这更接近“真正”发生的事情：

```
const char HELLO_STR[] = { 'H', 'e', 'l', 'l', 'o', '!', 0 };

int main(void)
{
    cout << HELLO_STR << endl;
    return 0;
} 
```

如果我在数组初始化或其他任何内容中犯了错误，请原谅我，但我认为这表达了我的意思，即字符串文字“真正”存储在哪里。它不是内联的，但对于定义它的程序的另一部分来说是一个不可见的常量。此外，那里的一些（大多数？）编译器还将字符串文字“一起”排列，这样如果您在 50 个地方使用相同的文字，它只存储其中一个，并且所有这些都引用同一个常量，节省内存。

所以请记住，每当您使用字符串文字时，您都在使用“隐形”存在于某处的 const char[N]，它被隐式转换为 const char*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:49:17.493

在`const string & s`此示例中，需要从参数“HelloWorld”调用构造函数。使用的构造函数是类型转换构造。

A`string& s`不会这样做，因为 s 直接引用了一个字符串对象。

类型转换由类似于

```
 basic_string(const _CharT* __s); 
```

使用 typedef

```
typedef basic_string<char>    string; 
```

所以声明将评估为

```
basic_string(const char * __s) 
```

# php - PHP ZipArchive::open 总是导致 ZIPARCHIVE::ER_READ 错误

> ID：10109373
> 
> 赞同：1
> 
> 时间：2012-04-11T15:44:36.693
> 
> 标签：php, linux, zip

我目前将大量照片存储在 LAMP 服务器上的 zip 存档中。当一个新用户被添加到我的程序中时，我打开 zip 存档并添加他们的照片。

问题是当 zip 存档接近 50MB 时，函数 ZipArchive::open 总是返回错误号 5，我相信这是这个错误 ZIPARCHIVE::ER_READ

有谁知道为什么会发生这种情况？

非常感谢，

西奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:16:07.260

最后我停止使用 ZipArchive 类并使用 php exec 命令在命令行上压缩文件[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

```
exec('tar -cvf file.tar myfile.txt'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:52:12.930

尝试增加 php 的`memory_limit`. 加载较大的 .zip 文件时，它可能会耗尽内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:07:23.357

也尽量增加`max_execution_time`。

# testing - 测试用户的活动是否显示在 Insights 中？

> ID：10109374
> 
> 赞同：1
> 
> 时间：2012-04-11T15:44:38.847
> 
> 标签：testing, facebook-insights, facebook-test-users

我可以期望测试用户执行的“赞”会出现在 Facebook Insights 中吗？

# sql - SQL 数据库已删除标志和 DeletedBy DeletedOn

> ID：10109377
> 
> 赞同：1
> 
> 时间：2012-04-11T15:44:46.027
> 
> 标签：sql, sql-server

我在我的数据库中添加了一个历史表。最初我添加了一个名为 Deleted 的位，如果该行被删除，则打算将其更新为 1，否则每一行都是一个更新。

然后我被告知我们需要记录谁删除了什么时间。所以我添加了 Nullable [DeletedBy] [DeletedOn] 字段。在这一点上，我想知道这是否使我的 Deleted Bit 变得多余。您可以简单地查询表，如果要查看删除了哪一行，则检查 DeletedBy 不是 Null 的位置。

我打算在这个问题上问哪个是更好的做法：

1.  拥有额外的位列

2.  使用已经存在的可为空列来识别已删除的行

但我开始认为这是一种偏好。所以我的问题是，哪个更有效？如果这个表变得很大，运行是否有性能提升：

```
 Select * from MyTable where [Deleted] = 1 
```

超过

```
 Select * from MyTable where [DeletedBy] is not null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:51:17.070

这更像是一种偏好。从技术上讲，该`datetime`字段[比](http://msdn.microsoft.com/en-us/library/ms172424%28v=SQL.100%29.aspx)字段大，`bit`但是由于您无论如何都需要存储它，所以这并不重要。但是，在性能方面，您可以对其中任何一个进行索引并获得相同的结果。我个人认为该`bit`字段是多余的并使用 nullable `datetime`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:53:43.177

如果您前一段时间添加了“DeletedBy”，并且您的实时数据库中已经存在“已删除”的记录，那么您需要保留该位字段，因为您没有信息可以在“删除者”中输入' 在这个阶段（我想）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:00:54.330

好吧，您确实需要知道谁删除了，因此 DeletedBy 列必须保留在那里。这提出了主要问题：您是否应该保留位列？

答案很简单：不 :) 我知道它只是一些列，它占用的空间不多，但是乘以很多行就是很多位。当然，它可能不会影响您的存储，但在这种情况下没有理由保留冗余数据。

关于您可能拥有的 deleted = 1 字段，只需将 DeletedBy 更新为“系统”之类的内容或告诉您在新字段实施之前记录已被删除的内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:31:18.893

您基本上是在创建审计跟踪，而且操作很简单。首先，使用审计信息的一些标准字段创建所有审计表。例如：

```
[audit_id] [int] IDENTITY(1,1) NOT NULL,
[audit_action] [varchar](16) NOT NULL,
[audit_date] [datetime] NOT NULL,
[audit_user_name] [varchar](128) NOT NULL,
--<your fields from the table being audited> 
```

将 audit_date 默认为 的值`getdate()`。如果您使用 Active Directory 安全性，则默认 audit_user_name 值为`suser_sname()`，否则您必须在查询中提供此值。

现在，为要审计的表创建一个 INSERT、UPDATE 和 DELETE 触发器。您将把这些值写入您的审计表中。以下是 DELETE 的示例：

```
CREATE TRIGGER [dbo].[tr_my_table_being_audited_delete] 
   ON  [dbo].[my_table_being_audited] 
   AFTER DELETE
AS 
BEGIN

SET NOCOUNT ON;

INSERT INTO dbo.my_audit_trail_table (audit_action, --<your fields from the table being audited>)
    SELECT  'DELETE', --<your fields from the table being audited>
    FROM    deleted

END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T16:33:08.867

对于大型表，我真的不喜欢使用软删除，我更喜欢存档，但我知道所有项目都是不同的。

我可能只会在主表上保留“DeletedBy”标志，因为它的开销要小一些，并创建一个带有“DeletedBy”和“Timestamp”的 DeletionLog 表进行审计

这在高读取环境中尤其有益。

# facebook - Facebook - 我如何使用 javascript sdk 向公司发布信息？

> ID：10109384
> 
> 赞同：1
> 
> 时间：2012-04-11T15:45:32.837
> 
> 标签：facebook, integration

我是 facebook 发帖的新手，但在使用用户帐户离线发布但无法使用公司页面离线发布时取得了一些成功。

我通过自己的个人 Facebook 帐户创建了自己的“Facebook 应用程序”，称为“尼克海报应用程序”。我已经为我的个人页面和公司页面的应用授予了三个权限（offline_access、read_stream、publish_stream）。我通过对每个帐户执行这些步骤来做到这一点...

```
Creating the app...
1\.       Login to facebook with the account you want linked to the app
2\.       Follow this link http://www.facebook.com/developers/apps.php#!/developers/createapp.php
3\.       Create your app and take a note of you App Id and your App secret Id.

Giving the correct rights to the app and getting the access_token..
Method 1:
1\.       Get the account in question to login to facebook
2\.       However you like, direct the user to this link (replacing <App-Id> with the App Id of the created app) https://graph.facebook.com/oauth/authorize?client_id=<App-Id>&scope=offline_access,read_stream&redirect_uri=http://www.facebook.com/connect/login_success.html
3\.       Take a note of the result of the “code” querystring.
4\.       Goto this url (replace “&lt;APP-ID>” with you appId and “&lt;APP-SECRET>” with your apps secret id and “&lt;code>” with the copied code)
https://graph.facebook.com/oauth/access_token?client_id=<APP-ID>&redirect_uri=http://www.facebook.com/connect/login_success.html&client_secret=<APP-SECRET>&code=<code>
5\.       Copy what you see, minus the expires querystring.  That is your access_token. 
```

在我拥有两个帐户的访问令牌后，我使用此代码发布帖子。

```
<!-- FACEBOOK -->        
<div id="fb-root"></div>
<script>
    (function () {
        var e = document.createElement('script');
        // replacing with an older version until FB fixes the cancel-login bug
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        //e.src = 'scripts/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());
</script>
<!-- END-OF-FACEBOOK -->
<script>
    //initialise
    window.fbAsyncInit = function () {
        FB.init({
            appId: '351023398277068',
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true, // parse XFBML
            oauth: true // Enable oauth authentication
        });
    };
    function sendPost(inMessage) {
        var opts = {
            message: inMessage,
            access_token: '<SAVED-TOKEN>'
        };

        FB.api('/me/feed', 'post', opts, function (response) {
            if (!response || response.error) {
                alert('Posting error occured');
            }
            else {
                alert('Success - Post ID: ' + response.id);
            }
        });
    }

</script> 
```

当使用参数“测试帖子”执行“sendPost”命令时，它将适用于我的个人帐户（前提是我将 access_token 放在适当的位置）。这对我的公司页面不起作用，我不知道为什么（我确实把我的 access_token 放在了适当的位置）。

Facebook 也没有很好地记录这一点，并且很难取得进展，有没有人明白为什么这对公司页面不起作用？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:10:05.803

您可以设置“to”参数以定位您希望发布到的页面，“如果您希望将页面作为应用程序发布到您的页面，则需要管理页面权限。

```
<div id="msg"></div>
<script>
// uid is the id of the page or user you wish to post to.
      function feedthis2(uid) {

        // calling the API ...
        var obj = {
        method: 'feed',
        to: ''+uid+''    
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      }
    feedthis2('AnotherFeed'); // to http://facebook.com/anotherfeed
    //feedthis2('135669679827333');
</script> 
```

# dom - ExtJS 从一行中选择某个单元格

> ID：10109393
> 
> 赞同：0
> 
> 时间：2012-04-11T15:45:49.517
> 
> 标签：dom, extjs, extjs4

我有一个处理程序：onCalendarEditFunc 用于编辑网格中选定的单元格。现在我有这个：

```
onCalendarEditFunc: function() {
        var selection = this.getView().getSelectionModel().getSelection();
        requires : [
            'Ext.grid.plugin.CellEditing',
            'Ext.grid.column.Column'
        ]

        edit = this.editing;
        console.log(this.getView().getSelectionModel().getSelection());
        edit.cancelEdit();
    //  this.store.insert(0, rec);
        edit.startEditByPosition({
            row: this.store.indexOf(selection[0]),
            column: 0
        });

    }, 
```

where`row: this.store.indexOf(selection[0]),`工作正常，就像我可以编辑所选行中的第一个单元格。但是我的行有多个列，所以我想给出`column:`一个值，它是所选单元格的值。

谢谢

勒龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:33:57.093

为了检测用户选择的确切单元格（如果您想编辑按钮功能，使所选单元格像我的情况一样可编辑），您可以执行以下操作。这是 initComponent 函数的开始

```
initComponent: function(){

        this.editing = Ext.create('Ext.grid.plugin.CellEditing');
        Ext.apply(this, {
            title: 'Календар',
            frame: false,
            plugins : [this.editing],
            store: 'CalendarEvents',
            selModel: {
                selType: 'cellmodel'
            }, 
```

这里的重要部分是

```
selModel: {
          selType: 'cellmodel'
          }, 
```

然后允许您在编辑功能中使用以下语法：

```
editfunction: function() {
    var selection = this.view.getSelectionModel().getCurrentPosition();
    requires : [
        'Ext.grid.plugin.CellEditing',
        'Ext.grid.column.Column',
        'Ext.selection.CellModel'
    ]

    edit = this.editing;
    //console.log(this.view.getSelectionModel().getCurrentPosition().column);

    edit.cancelEdit();
//  this.store.insert(0, rec);
    edit.startEditByPosition({
        row: selection.row,
        column: selection.column
    });

}, 
```

就是这样，现在您获取所选单元格的位置并传递它，以便您可以从那里开始编辑或在函数中开始编辑：

```
edit.startEditByPosition({
            row: selection.row,
            column: selection.column
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:34:20.230

尝试这样的事情：

```
edit.cancelEdit();
edit.startEdit(selection[0] /* this basically your record */, column /* 3 for example */); 
```

# emacs - 在电子邮件模式下启动 aspell

> ID：10109394
> 
> 赞同：2
> 
> 时间：2012-04-11T15:45:54.847
> 
> 标签：emacs, aspell

尽管浏览[了 aspell 文档](http://aspell.net/0.50-doc/man-html/4_Customizing.html#SECTION00541300000000000000)，但我无法让它跳过引用的文本，就像电子邮件模式所期望的那样。我的 .emacs.d 文件中有以下内容：

```
(setq ispell-program-name "aspell")
(add-hook 'mail-mode-hook (lambda ()                                            
  (setq ispell-extra-args '("--mode=email")))) 
```

然而，Aspell 会继续检查引用的消息的拼写，即使`C-h v ispell-extra-args`返回`Its value is ("--mode=email")`。我还应该指出，从命令行执行 aspell 不会忽略该`--mode=email`选项，因此 aspell 本身似乎没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:59:11.170

`ispell-message`我认为，您需要从同一个包中查看功能。它将拼写检查您的邮件和主题标题的正文，但会排除其他标题和引用的邮件。在函数的描述 ( `C-h f ispell-message`) 中，您可以找到`mail-send`&`message-send`命令的钩子示例...

# ajax - 代理外部 REST Api 的正确方法？

> ID：10109397
> 
> 赞同：3
> 
> 时间：2012-04-11T15:46:08.317
> 
> 标签：ajax, json, rest

我们需要使用外部 REST Api 并动态更新我们网站上的内容，并且遇到了跨站点脚本和 Ajax 的古老问题。

我已经阅读了 JSONP，但是我不想在一百万年后沿着这条路走下去，因为它看起来真的是一个相当肮脏的 hack。

作为该问题的解决方案，让本地服务充当对外部 Api 的任何请求的代理是否“正确”和“适当”？所以在客户端会有一个 Ajax 调用来`../RestProxy/MakeRequest`传递它需要向外部 api 发出的请求的详细信息，它执行请求并返回任何传回的内容。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:41:16.760

有三种方法可以做到这一点：

## 1.JSONP

这被许多流行的 API 和框架所接受。JQuery 使它变得容易。我会推荐这个。

## 2\. 代理

就像你描述的那样工作。为您添加额外的步骤和服务器代码和服务器负载。但是，它确实允许您在将结果发送到客户端之前过滤或以其他方式操作结果。

## 3.依赖访问控制允许来源

这是服务器可以设置的标头，以允许您直接从其服务器读取 json，即使您不在同一个域中。这消除了对 jsonp hack 的需要，但它需要设置服务器来支持它，并且需要一个支持它的 Web 浏览器。

Access-Control-Allow-Origin 支持：

*   IE8+
*   火狐 3.6+
*   Safari 4.0+
*   铬 6+
*   iOS Safari 3.2+
*   安卓浏览器 2.1+

如果您需要支持 IE7，那么此选项不适合您。

# android - 页面导航栏的android页面指示器

> ID：10109399
> 
> 赞同：0
> 
> 时间：2012-04-11T15:46:13.447
> 
> 标签：android, xml, indicator

当我将大量数据从外部数据库加载到我的 android 应用程序（通过 Web 服务）时，我想每页显示 20 个项目，因为有些查询就像数百个项目一样。在我的屏幕底部，我制作了自己的页面导航栏，其中包含 2 个按钮（上一个和下一个）和一个用于显示页码的 textView。我想要添加的可能性是让用户看到用户在哪个页面上与页面总数相关。我设法动态显示/更改实际页码，但我不知道如何显示总页数。

我的想法是我从 xml 中获得结果的数量。如您所见，有超过 2k 条记录。我正在考虑制作一种方法，例如 2k/20=totalPages。2k 记录根据询问的查询而变化。

```
 <elencoanagrafiche found="2542" errStatus="0"> 
```

这是个好主意吗？还是有人有更好的主意？android有自动执行此操作的api吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:55:25.893

您建议计算总页数的方式是正确的，例如：-

```
 int records = 25;
    int pageSize = 5;
    int totalPages = (int) Math.ceil(records / pageSize); 
```

我不知道 Android 中列表分页的开箱即用解决方案

# php - 什么是“真正的”MVC 模式？

> ID：10109404
> 
> 赞同：4
> 
> 时间：2012-04-11T15:46:26.120
> 
> 标签：php, model-view-controller, design-patterns

在 Google 上搜索 MVC 解释和教程时，我浏览了前 4 页中的所有链接（搜索词：mvc php）并做了笔记。我发现 MVC 有 4 种不同的解释方式。我知道理论上它们都归结为同一件事，但是看到编程中的大多数模式都有不同的名称，我想知道为什么这 4 种截然不同的模式都以相同的名称知道。（请记住，使用相同方法的第 5 种模式称为 MVP）。我发现的 4 种模式是（希望这是正确的，因为我对 ASCII 艺术毫无希望）：

```
U --> C --> M --> V --> U

      V --> U
      ^
      |
U --> C <-> M

            U
            ^
            |
U --> C --> V <-> M

      M <-> V --> U
      ^     ^
      |     |
U --> C ----| 
```

其中 U = 用户

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:51:10.250

MVC 是一种适应其使用环境的模式，因此没有“真正的”MVC 模式，只有在给定环境中使用的 MVC 模式。

MVC 最初是在 Smalltalk 中开发的，但 smalltalk 是一种独特的语言，它提供了大多数其他语言所不具备的功能。

[MVC 的维基百科条目](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)几乎总结了它。

# objective-c - iOS 上的 OpenGL ES - glReadPixels() 返回侧面带有黑条的图像

> ID：10109405
> 
> 赞同：1
> 
> 时间：2012-04-11T15:46:26.947
> 
> 标签：objective-c, ios, opengl-es-2.0, glreadpixels

我喜欢使用片段着色器将简单的纹理渲染到 4 个顶点，并使用 glReadPixels 读取图像分辨率。我将（readPixel）大小设置为（源）图片大小，但我没有得到完整的图像。右侧总是有一个黑条。并且图像似乎被压缩了。

图像的返回部分是正确的。它显示了我的 sobel 着色器的分辨率。所以我不认为 ReadPixel 部分或 SetImage 部分有一些错误。但我不知道...

这是我设置图像源的方法：

```
-(void)setImageSource : (unsigned char*) image
{
static const GLfloat textureVertices[] = 
{
    0.0f, 1.0f,
    0.0f, 0.0f,
    1.0f, 1.0f,
    1.0f, 0.0f,
};

static const GLfloat squareVertices[] = 
{
    -1.0f, -1.0f,
    1.0f, -1.0f,
    -1.0f, 1.0f,
    1.0f, 1.0f
};

glGenTextures(1, &pictureTexture);
glActiveTexture(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, pictureTexture);

glUniform1i(uniforms[UNIFORM_VIDEOFRAME], 0);

glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(ATTRIB_VERTEX);
glVertexAttribPointer(ATTRIB_TEXTUREPOSITON, 2, GL_FLOAT, 0, 0, textureVertices);
glEnableVertexAttribArray(ATTRIB_TEXTUREPOSITON);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, imageHeight, imageWidth, 0, GL_RGBA, GL_UNSIGNED_BYTE, image);
} 
```

这里是渲染纹理的部分：

```
-(void)render
{
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    glViewport(0, 0, imageHeight, imageWidth);

    [self presentFramebuffer];
} 
```

这是读取决议的部分：

```
-(void)readPixels : (unsigned char*) dest
{            
    glReadPixels(0, 0, imageHeight, imageWidth, GL_RGBA, GL_UNSIGNED_BYTE, dest);

    glDeleteTextures(1, &pictureTexture);
} 
```

我不知道我在哪里犯了错误。我在这个论坛和 khronos 论坛上进行了搜索，但没有找到解决方案（而且我没有找到具有相同错误描述的案例）。

也许是另一个重要或令人困惑的信息 - 我也尝试将代码放入 c++ 类。但是，当我使用 EAGLContext 走出 Objective C 类时，我得到了正确的图片尺寸，但分辨率错误，分辨率图像只包含雪，但侧面没有黑条。

有人知道这个错误的解决方案吗？

问候，克里特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:32:28.097

我已经解决了这个问题。错误出现在 OpenGL ES 视图的初始化中。我为 initWithFrame 创建矩形的部分。

```
CGRectMake(0.0f, 0.0f, applicationFrame.size.width, applicationFrame.size.height) 
```

当我自己设置尺寸时，尺寸有误，我在目的地得到了完整的图片。

我渲染图片上的雪的另一部分来自错误的数据类型。当我将一个变量转换为 GLuint 时，它是不一样的，然后初始化一个新的 GLuint 变量并将其设置为值......但我不知道为什么。

```
unsigned int j = 20
GLuint i = 20; 
```

glReadPixels(0, 0, j, (GLuint)j, GL_RGBA, GL_UNSIGNED_BYTE, pictureDest); 当我使用 GLuint 变量而不是铸造元素时，一切正常。

克里基特

# javascript - 如何覆盖由 jquery/javascript 设置的 css 高度？

> ID：10109406
> 
> 赞同：13
> 
> 时间：2012-04-11T15:46:29.817
> 
> 标签：javascript, jquery, css, height

我有这个：

```
 var setHeight = $(this).outerHeight(); 
 // returns e.g. 687

 $("#someElement").css({'height': $setHeight+"px !important" });
 // I want to override this jquery-set height 
```

我不确定这是正确的方法......可能不是，因为它不起作用。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T15:49:00.740

您的变量名没有前导`$`. 此外，该`!important`标志将导致它在 Firefox 中不起作用，但是当您将此样式直接应用于元素时，您不需要它。

```
$("#someElement").css('height', setHeight + "px"); 
```

另请注意，如果您只设置元素的高度，您也可以将其缩短为`height()`调用：

```
$("#someElement").height(setHeight); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T15:48:53.837

`setHeight`，不是`$setHeight`。并且`!important`不需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T15:50:15.937

您的变量不匹配；请记住，标点符号和正确的拼写对于正确调用变量很重要；尝试将第二行更改为：

```
$("#someElement").css('height',setHeight+'px !important'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T15:49:16.853

取出美元符号 ;) 'setHeight'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T15:50:51.327

除了您的变量是`setHeight`并且您正在尝试使用`$setHeight`. 确保它们相同。确保您的选择器正确并获取元素。我相信你甚至不需要`!important`. 样式标签应该覆盖任何 .css 定义，除非你有`!important`它。

# facebook - 在 facebook 评论上登录我的 facebook 应用程序

> ID：10109409
> 
> 赞同：1
> 
> 时间：2012-04-11T15:46:32.777
> 
> 标签：facebook, facebook-javascript-sdk

我的网页上有这样的评论代码：

```
<div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=111285118965654";
    fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));</script>

  <fb:comments href="MY_WEB_URL" num_posts="2" width="470"></fb:comments> 
```

评论工作正常。我已经在头上：

```
<meta property="fb:admins" content="MY_FBID"/>
<meta property="fb:app_id" content="MY_APPID"/> 
```

使用这些选项，我可以使用审核工具，但我无法删除用户的任何帖子。我已经读过（我不知道这是否属实）如果有人使用我的应用程序登录到 facebook，并在 FB.login 上添加带有参数“publish_stream”的范围，那么我的应用程序将有办法删除任何评论. 好吧，问题是我不知道如何强制用户在发表评论之前登录我的 Facebook 应用程序。

对不起，如果我的解释不好或错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:52:41.903

您可以检查用户是否已登录并已授予权限，如果是，则呈现评论框，如果没有，则呈现登录按钮以供用户重新授权或使用您的应用进行身份验证。

让我找到一些代码片段。

* * *

[注意：我刚刚使用https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)对我的应用程序进行了测试，我无法删除除我自己或我的页面拥有的任何帖子。其他用户仍在隐藏、禁止或吹嘘。

# css - facebook登录按钮分层停止标题栏中的下拉菜单

> ID：10109411
> 
> 赞同：1
> 
> 时间：2012-04-11T15:46:40.130
> 
> 标签：css, facebook, z-index, xfbml

背景：我在标题横幅中的导航下拉菜单工作得很好，直到我在标题横幅空间附近放置了一个 facebook 登录按钮。现在我已经这样做了，我的导航不起作用或样式。我确定我犯了一些基本的错误或疏忽，但我不太明白为什么这两个元素会像这样协同工作 - 如果有人能对此有所了解，我会非常感激欣赏它：

```
<div id="header">
<div class="headercontainer">

<ul id=navigation">

<li><a href="/about/" class="nav">About<span></span></a>
    <ul>
    <li><a href="#">About</a></li> 
    <li><a href="#">Team</a></li>
    <li><a href="#">Blog</a></li> 
    <li><a href="#">Terms of Service</a></li>
    <li><a href="#">Privacy Policy</a></li>
    <li><a href="#">Intellectual Property Notice</a></li>
    </ul>
</li>

</ul> <!--end Navigation-->

</div><!-- end headercontainer-->
    </div> <!-- end header -->

<div id="login">
<div class="fb-login-button" scope="email">Login with Facebook</div>
</div> 
```

CSS：

```
#header {position: relative; top: 0; right: 0; left: 0; height: 44px; background-color: #3B3B3B;}

.headercontainer li {position: relative; display: inline; font-size: 1.1em;}
.headercontainer .nav {position: relative; top: 15px; left: 420px; display: inline-block; color: #FFF;}
.headercontainer .nav span {position: absolute;}
.headercontainer li:hover .nav {color: #FF2A2A;}

.headercontainer li ul {position: relative; display: none; width: 100px; left: 880px; z-index: 108; background-color: #fff; border-top: 1px solid #cccaca; box-shadow: 0 0 2px 2px #888; -moz-box-shadow: 0 0 2px 2px #888; -webkit-box-shadow: 0 0 2px 2px #888;}
.headercontainer li:hover ul {display: block;}
.headercontainer li ul li:first-child a {padding-top: 10px;}
.headercontainer li ul li:last-child a {padding-bottom: 10px;}
.headercontainer li ul a {display: block; padding: 5px; text-align: left; font-weight: normal; color: #0b0808;}
.headercontainer li ul a:hover {color: #cb0000; text-decoration: none; background-color: #e1dfdf;}
.headercontainer li ul a:active {color: #fff; background-color: #FF2A2A;}

#login .fb-login-button {position: relative; margin-top: -31px; left: 315px;} 
```

`/* ==== NAV BAR ==== */`

```
#navigation {position: relative; float: right; z-index: 110;}
#navigation ul {z-index: 108; top: 28px; left: -10px;}
#navigation .nav {height: 28px; padding: 14px 8px 0 8px;}
#navigation .nav span {top: 28px; right: 4px; width: 8px; height: 6px;}
#navigation li:hover .nav {text-decoration: none; text-shadow: 0 1px rgba(255,255,255,0.3); background-color: #e1dfdf;}
#navigation li:active .nav {color: #fff; text-shadow: 0 -1px rgba(34,25,25,0.3); background-color: #ff2a2a;}` 
```

脚本：

```
<script> window.fbAsyncInit = function() {
        FB.init({
        appId      : '...',
        status     : true, 
        cookie     : true,
        xfbml      : true,
        oauth      : true,
      });
    };
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:02:48.477

`<ul id=navigation">`缺少引号。

# asp.net-mvc - 我必须改进我的 ASP.NET，我应该直接跳到 MVC 而不是 Webforms 吗？

> ID：10109417
> 
> 赞同：0
> 
> 时间：2012-04-11T15:47:17.180
> 
> 标签：asp.net-mvc, webforms

我知道很多人多次问过 MVC 与 Webforms 的问题。我的问题略有不同，因为我目前正在将我的技能从 ASP.NET2/VB.NET 更新到 ASP.NET4/C#。我在认真地考虑也许我不应该浪费时间来升级我的 Webforms 技能，这些技能是 Okish 的，而应该努力重新开始使用 MVC。我一直在查看 ASP.NET 服务器控件的所有属性并感叹！！！我确实看到了只关注 JS、CSS 以及现在的 JQuery 和 CSS3 等 Web 技术的好处。

我会对你的想法感兴趣吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:53:39.823

听起来你在这里做的是白纸黑字。你正在改变语言和技术。我的建议是确定你认为未来最好的技术并学习它。你已经致力于学习新的东西——让它成为你能做到的最有价值的经验。

从我的角度来看，我会推荐 MVC。我个人觉得这是一个更好的前进平台。您将不得不添加相当多的辅助技能，例如 Razor、JQuery 和所有其他技能，但这是值得的。但最重要的是，它是最适合您的。如果 Webforms 为您的环境提供更好的服务，那么这是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:54:12.477

六个月前我换了工作。我之前在一家仍在使用 .NET 2.0、VB.NET 和 ASP.NET WebForms 的大公司工作。我现在在一家使用 .NET 4.0、C# 和 ASP.NET MVC3 的公司工作。所以，我自己也经历过。

如果您了解 Web 的工作原理并希望完全控制客户端体验，那么 MVC 无疑是您的最佳选择。在我之前的工作中，我最终会大发雷霆，因为我讨厌 WebForms 如何阻止我创建带有清晰标记的页面。但是，很多人不知道 HTTP、CSS、Javascript 和 HTML 是如何组合在一起的。WebForms 是一个解决方案。但是，完全控制您发送给客户/客户的内容会更加有趣和高效。

# java - 困难的 JAXB 映射

> ID：10109418
> 
> 赞同：1
> 
> 时间：2012-04-11T15:47:23.137
> 
> 标签：java, jaxb

我试图在一个更大的文档中映射以下 XML 结构，显然这不是 XML 的最大用途，但这是我必须使用的。

为清楚起见简化示例：

```
 <details>
    <pictures>
      <picture1>
        http://domain.com/path/picture1.jpg
      </picture1>
      <picture2>
        http://domain.com/path/picture2.jpg
      </picture2>
      <picture3>
        http://domain.com/path/picture3.jpg
      </picture3>
      <picture4>
        http://domain.com/path/picture4.jpg
      </picture4>
      <picture5>
        http://domain.com/path/picture5.jpg
      </picture5>
      <picture6>
        http://domain.com/path/picture6.jpg
      </picture6>
      <picture7>
        http://domain.com/path/picture7.jpg
      </picture7>
    </pictures>
  </details> 
```

该文档有一个 DTD，它声明将有多达 30 个不同的图片元素，编号为 1-30，名称为`<picutre[n]/>`

我想做的是，而不是为这些元素中的每一个创建 30 个不同的类，称为 Picture1、Picture2、Picture3 ……等等。我只想使用一个 Picture 类并将其用于所有 30 个唯一元素名称。

以下是我到目前为止所尝试的。

```
@XmlRootElement
public class Details {

   ...

   @XmlElementWrapper
   @XmlElementRefs({
        @XmlElementRef( name="picture1", type=Picture.class ),
        @XmlElementRef( name="picture2", type=Picture.class ),
        @XmlElementRef( name="picture3", type=Picture.class ),
        @XmlElementRef( name="picture4", type=Picture.class ),
        @XmlElementRef( name="picture5", type=Picture.class ),
        @XmlElementRef( name="picture6", type=Picture.class ),
        @XmlElementRef( name="picture7", type=Picture.class ),
        @XmlElementRef( name="picture8", type=Picture.class ),
        @XmlElementRef( name="picture9", type=Picture.class ),
        @XmlElementRef( name="picture10", type=Picture.class ),
        @XmlElementRef( name="picture11", type=Picture.class ),
        @XmlElementRef( name="picture12", type=Picture.class ),
        @XmlElementRef( name="picture13", type=Picture.class ),
        @XmlElementRef( name="picture14", type=Picture.class ),
        @XmlElementRef( name="picture15", type=Picture.class ),
        @XmlElementRef( name="picture16", type=Picture.class ),
        @XmlElementRef( name="picture17", type=Picture.class ),
        @XmlElementRef( name="picture18", type=Picture.class ),
        @XmlElementRef( name="picture19", type=Picture.class ),
        @XmlElementRef( name="picture20", type=Picture.class ),
        @XmlElementRef( name="picture21", type=Picture.class ),
        @XmlElementRef( name="picture22", type=Picture.class ),
        @XmlElementRef( name="picture23", type=Picture.class ),
        @XmlElementRef( name="picture24", type=Picture.class ),
        @XmlElementRef( name="picture25", type=Picture.class ),
        @XmlElementRef( name="picture26", type=Picture.class ),
        @XmlElementRef( name="picture27", type=Picture.class ),
        @XmlElementRef( name="picture28", type=Picture.class ),
        @XmlElementRef( name="picture29", type=Picture.class ),
        @XmlElementRef( name="picture30", type=Picture.class )
    })
   public List<Picture> getPictures() {
      return this.pictures;
   }

   public void setPictures( List<Pictures> pictures ) {
      this.pictures = pictures;
   }

   ...

}

@XmlElementWrapper
public class Picture {
 ...
} 
```

这会导致 getPictures 始终返回 null。

此外，我尝试将 Picture 类上的注释更改为`@XmlElementWrapper( name="picture1" )`导致我从 getPictures() 返回的列表但只包含`<picture1/>`元素而不包含其余元素。

我知道我可以求助于获取 JAXBElement 对象列表，但如果我可以避免它，我宁愿不这样做。有什么想法可以映射吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:03:25.650

有几种方法可以处理这个用例：

**选项1**

您可以通过利用来执行以下操作`@XmlElements`：

```
package forum10109418;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Details {

   private List<Picture> pictures;

   @XmlElementWrapper
   @XmlElements({
       @XmlElement( name="picture1", type=Picture.class ),
       @XmlElement( name="picture2", type=Picture.class ),
       @XmlElement( name="picture3", type=Picture.class ),
       @XmlElement( name="picture4", type=Picture.class ),
       @XmlElement( name="picture5", type=Picture.class ),
       @XmlElement( name="picture6", type=Picture.class ),
       @XmlElement( name="picture7", type=Picture.class ),
       @XmlElement( name="picture8", type=Picture.class ),
       @XmlElement( name="picture9", type=Picture.class ),
       @XmlElement( name="picture10", type=Picture.class ),
       @XmlElement( name="picture11", type=Picture.class ),
       @XmlElement( name="picture12", type=Picture.class ),
       @XmlElement( name="picture13", type=Picture.class ),
       @XmlElement( name="picture14", type=Picture.class ),
       @XmlElement( name="picture15", type=Picture.class ),
       @XmlElement( name="picture16", type=Picture.class ),
       @XmlElement( name="picture17", type=Picture.class ),
       @XmlElement( name="picture18", type=Picture.class ),
       @XmlElement( name="picture19", type=Picture.class ),
       @XmlElement( name="picture20", type=Picture.class ),
       @XmlElement( name="picture21", type=Picture.class ),
       @XmlElement( name="picture22", type=Picture.class ),
       @XmlElement( name="picture23", type=Picture.class ),
       @XmlElement( name="picture24", type=Picture.class ),
       @XmlElement( name="picture25", type=Picture.class ),
       @XmlElement( name="picture26", type=Picture.class ),
       @XmlElement( name="picture27", type=Picture.class ),
       @XmlElement( name="picture28", type=Picture.class ),
       @XmlElement( name="picture29", type=Picture.class ),
       @XmlElement( name="picture30", type=Picture.class )
   })

   public List<Picture> getPictures() {
      return this.pictures;
   }

   public void setPictures( List<Picture> pictures ) {
      this.pictures = pictures;
   }

} 
```

**选项 #2**

`Details`您可以按如下方式映射您的班级：

```
package forum10109418;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Details {

   private List<Picture> pictures;

   @XmlElementWrapper
   @XmlElement(name="picture")
   public List<Picture> getPictures() {
      return this.pictures;
   }

   public void setPictures( List<Picture> pictures ) {
      this.pictures = pictures;
   }

} 
```

然后用 a`StreamReaderDelegate`去掉数字后缀：

```
package forum10109418;

import java.io.FileInputStream;
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.stream.util.StreamReaderDelegate;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Details.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(new FileInputStream("src/forum10109418/input.xml"));
        xsr = new StreamReaderDelegate(xsr) {
            @Override
            public String getLocalName() {
                String localName = super.getLocalName();
                if(localName.startsWith("picture") && !localName.equals("pictures")) {
                    return "picture";
                }
                return localName;
            }

        };
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Details details = (Details) unmarshaller.unmarshal(xsr);
        System.out.println(details.getPictures().size());
    }

} 
```

**选项#3**

如果您使用[**EclipseLink MOXy**](https://www.eclipse.org/eclipselink/moxy.php)作为您的[**JAXB (JSR-222)**](https://jcp.org/en/jsr/detail?id=222)提供程序，那么您可以使用`@XmlVariableNode`我们添加的扩展：

*   [http://blog.bdoughan.com/2013/06/mapping-bad-xml-enumerated-collection.html](http://blog.bdoughan.com/2013/06/mapping-bad-xml-enumerated-collection.html)

# java - 以编程方式更改 BMP 文件

> ID：10109420
> 
> 赞同：0
> 
> 时间：2012-04-11T15:47:37.850
> 
> 标签：java, file, bmp

我想加载一个 bmp 文件（在 Java 中）并在 Java 程序的语法中操作图像数据。我怎样才能做到这一点？我尝试只加载图像，如下所示：

```
 public static void main(String[] args) {
            System.out.println("START");
            loadbitmap lbm = new loadbitmap();
            lbm.loadBMPFile();
            System.out.println("END");
        }

        private void loadBMPFile()
        {
            {
                try{

                    FileInputStream fstream = new FileInputStream("sample_fingerprint_grayscale.bmp");
                    DataInputStream in = new DataInputStream(fstream);
                    BufferedReader br = new BufferedReader(new InputStreamReader(in));
                    String inputString;
                    while ((inputString = br.readLine()) != null)   {

                        readBMPFile.add(inputString);
                    }
                    in.close();
                }
                catch (Exception e){
                    System.out.println("IN ERROR");
                    System.err.println("Error: " + e.getMessage());
                }
                System.out.println("IN loadBMPFile");
                System.out.println("BMP size is " + readBMPFile.size());
                System.out.println(readBMPFile.get(2));
            }
        }
} 
```

但是当我检查数据时，它并不真的存在。我是这方面的菜鸟，所以任何正确方向的观点都值得赞赏。

这是输出：

```
START
IN loadBMPFile
BM¸U

(At this point there is a large amount of gibberish characters that won't paste into Stack Overflow)

END 
```

我有一个十六进制阅读器（Frhed），可以将这些字符格式化为十六进制格式，我希望我可以将它们带入一个数组列表并从那里操作它们。

这是十六进制阅读器输出：

```
BM<bh:b8>U<bh:01><bh:00><bh:00><bh:00><bh:00><bh:00>6<bh:04><bh:00><bh:00>(<bh:00><bh:00><bh:00><bh:f0><bh:00><bh:00><bh:00><bh:98><bh:fe><bh:ff><bh:ff><bh:01><bh:00><bh:08><bh:00><bh:00><bh:00><bh:00><bh:00><bh:82>Q<bh:01><bh:00><bh:12><bh:0b><bh:00><bh:00><bh:12><bh:0b><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:00><bh:01><bh:01><bh:01><bh:00><bh:02><bh:02><bh:02><bh:00><bh:03><bh:03><bh:03><bh:00><bh:04><bh:04><bh:04><bh:00><bh:05><bh:05><bh:05><bh:00><bh:06><bh:06><bh:06><bh:00><bh:07><bh:07><bh:07><bh:00><bh:08><bh:08><bh:08><bh:00><bh:09><bh:09><bh:09><bh:00>

<bh:00><bh:0b><bh:0b><bh:0b><bh:00><bh:0c><bh:0c><bh:0c><bh:00>

<bh:00><bh:0e><bh:0e><bh:0e><bh:00><bh:0f><bh:0f><bh:0f><bh:00><bh:10><bh:10><bh:10><bh:00><bh:11><bh:11><bh:11><bh:00><bh:12><bh:12><bh:12><bh:00><bh:13><bh:13><bh:13><bh:00><bh:14><bh:14><bh:14><bh:00><bh:15><bh:15><bh:15><bh:00><bh:16><bh:16><bh:16><bh:00><bh:17><bh:17><bh:17><bh:00><bh:18><bh:18><bh:18><bh:00><bh:19><bh:19><bh:19><bh:00><bh:1a><bh:1a><bh:1a><bh:00><bh:1b><bh:1b><bh:1b><bh:00><bh:1c><bh:1c><bh:1c><bh:00><bh:1d><bh:1d><bh:1d><bh:00><bh:1e><bh:1e><bh:1e><bh:00><bh:1f><bh:1f><bh:1f><bh:00>   <bh:00>!!!<bh:00>"""<bh:00>###<bh:00>$$$<bh:00>%%%<bh:00>&&&<bh:00>'''<bh:00>(((<bh:00>)))<bh:00>***<bh:00>+++<bh:00>,,,<bh:00>---<bh:00>...<bh:00>///<bh:00>000<bh:00>111<bh:00>222<bh:00>333<bh:00>444<bh:00>555<bh:00>666<bh:00>777<bh:00>888<bh:00>999<bh:00>:::<bh:00>;;;<bh:00>\<\<\<<bh:00>===<bh:00>>>><bh:00>???<bh:00>@@@<bh:00>AAA<bh:00>BBB<bh:00>CCC<bh:00>DDD<bh:00>EEE<bh:00>FFF<bh:00>GGG<bh:00>HHH<bh:00>III<bh:00>JJJ<bh:00>KKK<bh:00>LLL<bh:00>MMM<bh:00>NNN<bh:00>OOO<bh:00>PPP<bh:00>QQQ<bh:00>RRR<bh:00>SSS<bh:00>TTT<bh:00>UUU<bh:00>VVV<bh:00>WWW<bh:00>XXX<bh:00>YYY<bh:00>ZZZ<bh:00>[[[<bh:00>\\\\\\<bh:00>]]]<bh:00>^^^<bh:00>___<bh:00>```<bh:00>aaa<bh:00>bbb<bh:00>ccc<bh:00>ddd<bh:00>eee<bh:00>fff<bh:00>ggg<bh:00>hhh<bh:00>iii<bh:00>jjj<bh:00>kkk<bh:00>lll<bh:00>mmm<bh:00>nnn<bh:00>ooo<bh:00>ppp<bh:00>qqq<bh:00>rrr<bh:00>sss<bh:00>ttt<bh:00>uuu<bh:00>vvv<bh:00>www<bh:00>xxx<bh:00>yyy<bh:00>zzz<bh:00>{{{<bh:00>|||<bh:00>}}}<bh:00>~~~<bh:00><bh:7f><bh:7f><bh:7f><bh:00><bh:80><bh:80><bh:80><bh:00><bh:81><bh:81><bh:81><bh:00><bh:82><bh:82><bh:82><bh:00><bh:83><bh:83><bh:83><bh:00><bh:84><bh:84><bh:84><bh:00><bh:85><bh:85><bh:85><bh:00><bh:86><bh:86><bh:86><bh:00><bh:87><bh:87><bh:87><bh:00><bh:88><bh:88><bh:88><bh:00><bh:89><bh:89><bh:89><bh:00><bh:8a><bh:8a><bh:8a><bh:00><bh:8b><bh:8b><bh:8b><bh:00><bh:8c><bh:8c><bh:8c><bh:00><bh:8d><bh:8d><bh:8d><bh:00><bh:8e><bh:8e><bh:8e><bh:00><bh:8f><bh:8f><bh:8f><bh:00><bh:90><bh:90><bh:90><bh:00><bh:91><bh:91><bh:91><bh:00><bh:92><bh:92><bh:92><bh:00><bh:93><bh:93><bh:93><bh:00><bh:94><bh:94><bh:94><bh:00><bh:95><bh:95><bh:95><bh:00><bh:96><bh:96><bh:96><bh:00><bh:97><bh:97><bh:97><bh:00><bh:98><bh:98><bh:98><bh:00><bh:99><bh:99><bh:99><bh:00><bh:9a><bh:9a><bh:9a><bh:00><bh:9b><bh:9b><bh:9b><bh:00><bh:9c><bh:9c><bh:9c><bh:00><bh:9d><bh:9d><bh:9d><bh:00><bh:9e><bh:9e><bh:9e><bh:00><bh:9f><bh:9f><bh:9f><bh:00><bh:a0><bh:a0><bh:a0><bh:00><bh:a1><bh:a1><bh:a1><bh:00><bh:a2><bh:a2><bh:a2><bh:00><bh:a3><bh:a3><bh:a3><bh:00><bh:a4><bh:a4><bh:a4><bh:00><bh:a5><bh:a5><bh:a5><bh:00><bh:a6><bh:a6><bh:a6><bh:00><bh:a7><bh:a7><bh:a7><bh:00><bh:a8><bh:a8><bh:a8><bh:00><bh:a9><bh:a9><bh:a9><bh:00><bh:aa><bh:aa><bh:aa><bh:00><bh:ab><bh:ab><bh:ab><bh:00><bh:ac><bh:ac><bh:ac><bh:00><bh:ad><bh:ad><bh:ad><bh:00><bh:ae><bh:ae><bh:ae><bh:00><bh:af><bh:af><bh:af><bh:00><bh:b0><bh:b0><bh:b0><bh:00><bh:b1><bh:b1><bh:b1><bh:00><bh:b2><bh:b2><bh:b2><bh:00><bh:b3><bh:b3><bh:b3><bh:00><bh:b4><bh:b4><bh:b4><bh:00><bh:b5><bh:b5><bh:b5><bh:00><bh:b6><bh:b6><bh:b6><bh:00><bh:b7><bh:b7><bh:b7><bh:00><bh:b8><bh:b8><bh:b8><bh:00><bh:b9><bh:b9><bh:b9><bh:00><bh:ba><bh:ba><bh:ba><bh:00><bh:bb><bh:bb><bh:bb><bh:00><bh:bc><bh:bc><bh:bc><bh:00><bh:bd><bh:bd><bh:bd><bh:00><bh:be><bh:be><bh:be><bh:00><bh:bf><bh:bf><bh:bf><bh:00><bh:c0><bh:c0><bh:c0><bh:00><bh:c1><bh:c1><bh:c1><bh:00><bh:c2><bh:c2><bh:c2><bh:00><bh:c3><bh:c3><bh:c3><bh:00><bh:c4><bh:c4><bh:c4><bh:00><bh:c5><bh:c5><bh:c5><bh:00><bh:c6><bh:c6><bh:c6><bh:00><bh:c7><bh:c7><bh:c7><bh:00><bh:c8><bh:c8><bh:c8><bh:00><bh:c9><bh:c9><bh:c9><bh:00><bh:ca><bh:ca><bh:ca><bh:00><bh:cb><bh:cb><bh:cb><bh:00><bh:cc><bh:cc><bh:cc><bh:00><bh:cd><bh:cd><bh:cd><bh:00><bh:ce><bh:ce><bh:ce><bh:00><bh:cf><bh:cf><bh:cf><bh:00><bh:d0><bh:d0><bh:d0><bh:00><bh:d1><bh:d1><bh:d1><bh:00><bh:d2><bh:d2><bh:d2><bh:00><bh:d3><bh:d3><bh:d3><bh:00><bh:d4><bh:d4><bh:d4><bh:00><bh:d5><bh:d5><bh:d5><bh:00><bh:d6><bh:d6><bh:d6><bh:00><bh:d7><bh:d7><bh:d7><bh:00><bh:d8><bh:d8><bh:d8><bh:00><bh:d9><bh:d9><bh:d9><bh:00><bh:da><bh:da><bh:da><bh:00><bh:db><bh:db><bh:db><bh:00><bh:dc><bh:dc><bh:dc><bh:00><bh:dd><bh:dd><bh:dd><bh:00><bh:de><bh:de><bh:de><bh:00><bh:df><bh:df><bh:df><bh:00><bh:e0><bh:e0><bh:e0><bh:00><bh:e1><bh:e1><bh:e1><bh:00><bh:e2><bh:e2><bh:e2><bh:00><bh:e3><bh:e3><bh:e3><bh:00><bh:e4><bh:e4><bh:e4><bh:00><bh:e5><bh:e5><bh:e5><bh:00><bh:e6><bh:e6><bh:e6><bh:00><bh:e7><bh:e7><bh:e7><bh:00><bh:e8><bh:e8><bh:e8><bh:00><bh:e9><bh:e9><bh:e9><bh:00><bh:ea><bh:ea><bh:ea><bh:00><bh:eb><bh:eb><bh:eb><bh:00><bh:ec><bh:ec><bh:ec><bh:00><bh:ed><bh:ed><bh:ed><bh:00><bh:ee><bh:ee><bh:ee><bh:00><bh:ef><bh:ef><bh:ef><bh:00><bh:f0><bh:f0><bh:f0><bh:00><bh:f1><bh:f1><bh:f1><bh:00><bh:f2><bh:f2><bh:f2><bh:00><bh:f3><bh:f3><bh:f3><bh:00><bh:f4><bh:f4><bh:f4><bh:00><bh:f5><bh:f5><bh:f5><bh:00><bh:f6><bh:f6><bh:f6><bh:00><bh:f7><bh:f7><bh:f7><bh:00><bh:f8><bh:f8><bh:f8><bh:00><bh:f9><bh:f9><bh:f9><bh:00><bh:fa><bh:fa><bh:fa><bh:00><bh:fb><bh:fb><bh:fb><bh:00><bh:fc><bh:fc><bh:fc><bh:00><bh:fd><bh:fd><bh:fd><bh:00><bh:fe><bh:fe><bh:fe><bh:00><bh:ff><bh:ff><bh:ff><bh:00><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff><bh:ff> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:22:56.650

使用[javax.imageio.ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)。

```
BufferedImage img = ImageIO.read(new File("... .bmp")); 
```

一个 BufferedImage 也可能会被改变，所以非常适合修改。

# iphone - 应用内购买在 iphone 中返回错误代码 1001？

> ID：10109425
> 
> 赞同：1
> 
> 时间：2012-04-11T15:47:47.120
> 
> 标签：iphone, in-app-purchase

我有一个 iPhone 应用程序，当我尝试在沙盒中购买东西时，它返回错误代码 1001 无法连接到 iTunes。但是这段代码在 30 分钟前运行良好。我已经测试了几天并且工作正常。突然就来了。我已经尝试了所有可能的答案，比如退出商店，卸载并重新安装。似乎没有任何工作。有谁能够帮我？

# ninject - Ninject 3.0.0 和 Nservicebus 3.0.3 -> 帮助配置？

> ID：10109429
> 
> 赞同：2
> 
> 时间：2012-04-11T15:47:58.200
> 
> 标签：ninject, nservicebus

有没有人有任何想法如何让两者结合在一起，以便我可以在类文件中注入 IBus？

我尝试下载 Official Nservicebus.Ninject 包，但它似乎通过 Nuget 受限于 Ninject 的 2.x 行。我继续下载源代码到 Ninject 的对象构建器。我正在经历几个试验和错误场景中的一些问题。

首先是 IBus 没有通过属性注入设置。这可能是我对如何使用 Objectbuilder 的误解，但我的印象是通过设置公共 IBus Bus {get; set;} 在程序集中的一个类上，它将为我设置。

然后，我沿着以下路线尝试了一些事情：

```
Configure.Instance.Builder.Build<IBus>() 
```

这产生了以下结果：

```
Error activating IBus
More than one matching bindings are available.
Activation path:
1) Request for IBus

Suggestions:
1) Ensure that you have defined a binding for IBus only once. 
```

如果我对 UnicastBus 而不是 IBus 做一个明确的请求，我会得到一个实例，但它会在 base.Activite 上用以下内容轰炸：

```
More than one matching bindings are available.
Activation path:
  2) Injection of dependency IBus into property Bus of type TimeoutMessageConverter
  1) Request for TimeoutMessageConverter

Suggestions:
  1) Ensure that you have defined a binding for IBus only once. 
```

我并没有声称自己是 ninject 大师（背景是 spring.net），因为这个项目交给了我，看我是否可以利用它现有的使用 Ninject 的基础设施并获取对总线的引用来调用来自调度程序的发布该项目。在一天的大部分时间里，我一直在旋转我的车轮。

这是 Ninject 正在加载的 NServiceBus 模块（设置取自另一个 SO 帖子）：

```
public class NServiceBusModule : NinjectModule
{
    public override void Load()
    {
       this.Bind<IBus>().ToConstant(this.CreateBus()).InSingletonScope();
    }

    private IBus CreateBus()
    {
        return Configure.With()
                .DefineEndpointName("publishMe")
                .NinjectBuilder(this.Kernel)
                .XmlSerializer()
                .MsmqTransport()
                .IsTransactional(true)
                .InMemorySubscriptionStorage()
                .UnicastBus()                    
                .CreateBus().Start(() =>
                Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
    }

} 
```

我没有在 EndpointConfig 中利用任何 IWantCustomInitialization，因为我认为这就是获取总线引用所需的全部内容。

我有另一个想法，我可以继续将项目分开一点，我相信它会工作得很好（让网络应用程序——在 global.ascx 中设置总线——直接发布到端点并从那里开始)，但尽量保持在项目大纲的初始要求范围内。

如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:39:15.933

`NinjectBuilder`添加`IBus`绑定。你有两个选择：

1.  在您的代码中使用重新绑定
2.  只需调用`CreateBus()`而不添加绑定

# ios - xcode 4 仅在设备上复制资源一次

> ID：10109432
> 
> 赞同：4
> 
> 时间：2012-04-11T15:48:08.077
> 
> 标签：ios, xcode, build, resources, copy

我对 xCode 的资源复制阶段有疑问。我有一个非常重的应用程序（大约 1gb，很多 png），我想知道是否可以只复制设备上的所有资源一次？因为，当我更改程序的某些行并进行另一个构建时，xCode 会再次复制所有资源......但它们没有改变。

可以选择跳过设备上的复制阶段还是只复制一次？

谢谢

Xcode 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:22:04.820

我遇到了同样的问题，这是一个对我有用的 XCode hack：

1.  正确构建应用程序，然后所有资源将被复制到设备上
2.  从目标中删除“复制资源”构建阶段
3.  进行清理（即使您删除了构建阶段，所有资源仍存在于构建文件夹中并在执行时上传到设备）
4.  执行“运行”（这只会将构建文件夹中的文件上传到设备上的正确位置，将第一步中的资源留在原处并上传二进制文件）
5.  每当您想上传资源时，只需“git checkout”您的 xcodeproj 即可恢复您的更改并返回到第一步，请确保不要签入您对项目的更改）

请注意，您正在削弱构建过程，如果使用不正确，您可能会引入本地错误。

# c++ - 以毫秒为单位的时间

> ID：10109434
> 
> 赞同：4
> 
> 时间：2012-04-11T15:48:16.557
> 
> 标签：c++

我在 unistd.h 中找到了 usleep 函数，我认为在每次操作之前等待一段时间很有用。但我发现如果线程没有收到任何信号，它只会休眠。例如，如果我按下按钮（我使用的是 OpenGL，但问题是关于 time.h 和 unistd.h 的更具体的问题），线程被唤醒，我没有得到我想要的。在 time.h 中有一个 sleep 函数，它接受一个整数，但是一个整数太多了（我想等待 0.3 秒），所以我使用了 usleep。我问是否有一个以毫秒为单位的函数（来自任何 GNU 或任何库）。它应该像 time() 一样工作，但返回毫秒而不是秒。这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T16:23:07.200

如果你有提升，你可以这样做：

```
#include <boost/thread.hpp>

int main()
{
  boost::this_thread::sleep(boost::posix_time::millisec(2000));
  return 0;
} 
```

正如您在代码中看到的，这个简单的示例休眠了 2000 毫秒。

编辑：

好的，我以为我理解了这个问题，但后来我阅读了评论，现在我不太确定了。

也许您想获取自某个点/事件以来经过了多少毫秒？如果是这种情况，那么您可以执行以下操作：

```
#include <boost/chrono.hpp>
#include <boost/thread.hpp>
#include <iostream>

int main()
{
  boost::chrono::high_resolution_clock::time_point start = boost::chrono::high_resolution_clock::now();
  boost::this_thread::sleep(boost::posix_time::millisec(2000));
  boost::chrono::milliseconds ms = boost::chrono::duration_cast<boost::chrono::milliseconds> (boost::chrono::high_resolution_clock::now() - start);
  std::cout << "2000ms sleep took " << ms.count() << "ms " << "\n";
  return 0;
} 
```

（请原谅排长队）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:52:00.213

这是我使用的跨平台功能：

```
unsigned Util::getTickCount()
{
#ifdef WINDOWS
    return GetTickCount();
#else
    struct timeval tv;
    gettimeofday(&tv, 0);
    return unsigned((tv.tv_sec * 1000) + (tv.tv_usec / 1000));
#endif
} 
```

# qt - 如何将信号转发到最后点击的 QGraphicsScene

> ID：10109437
> 
> 赞同：0
> 
> 时间：2012-04-11T15:48:35.280
> 
> 标签：qt, signals-slots

我有几个 QGraphicsScene 子类“CustomScene”，它们都派生自一个包含虚函数 cut()、copy()、paste() 和 delete() 的通用接口。QGraphicsScene是超类，继承自CustomSceneInterface，继承自CustomScene。每个 CustomScene 都显示在主窗口中的单独 QGraphicsViews 中。我还有用于剪切、复制、粘贴和删除的 QActions。

我无法弄清楚如何将 QAction 信号发送到最后单击的任何 CustomScene （或任何具有“焦点”的）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:08:34.153

我意识到我可以将 QAction 信号发送到检查哪个 QGraphicsView 具有焦点的插槽，然后调用其场景的适当方法。我需要打电话

```
QWidget::setFocusPolicy(Qt::ClickFocus) 
```

在 QGraphicsViews 上让它正常工作。如果有人能想到更好的解决方案，请告诉我。

编辑：

使用 Qt5 并且能够将 lambda 表达式用作插槽，我现在可以采用一种非常漂亮的方法。首先，我创建了一个函数`lastClickedScene()`，它返回最后点击的场景。然后我做`connect(actionCut, &QAction::triggered, [=]{lastClickedScene->cut();})`。

# arrays - 嵌套的 AS3 阵列按钮

> ID：10109438
> 
> 赞同：1
> 
> 时间：2012-04-11T15:48:37.270
> 
> 标签：arrays, actionscript-3, flash-cs5

我有一个按钮列表：

同意按钮不同意按钮容器.clickButton1 容器.clickButton2

Container 是另一个影片剪辑，里面是最后两个按钮。

我怎样才能把它放在数组中并将所有相同的侦听器应用于每个侦听器？

```
var buttonArray:Array = new Array("agreeButton", "disagreeButton", "container.clickButton1", "container.clickButton2");
for (var i:int=0; i<buttonArray.length; i++) {
    this[buttonArray[i]].addEventListener(MouseEvent.ROLL_OVER, mouseRollOver);
    this[buttonArray[i]].addEventListener(MouseEvent.ROLL_OUT, mouseRollOut);
    this[buttonArray[i]].addEventListener(MouseEvent.CLICK, mouseClick);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:58:05.377

保留对按钮的引用并将它们添加到数组中。

```
var agreeButton:Button = new Button();
var disagreeButton:Button = new Button();

//... Code that will add the above instantiated buttons to the canvas

var buttonArray:Array = new Array(agreeButton, disagreeButton);

for (var i:int = 0; i < buttonArray.length; i++) {    
buttonArray[i].addEventListener(MouseEvent.CLICK, mouseClick);
}

private function mouseClick(event:MouseEvent):void {
    Alert.show("Boom!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:54:55.490

我会创建一个`button`由每个按钮扩展的类。在您添加的按钮类`eventListeners`中。

例子：

如果这有什么问题，请原谅我，我已经有一段时间没有在 AS3 中编码了。

```
class MyButton extends Button
{
    public function MyButton()
    {
        this.addEventListener(MouseEvent.ROLL_OVER, mouseRollOver);
        this.addEventListener(MouseEvent.ROLL_OUT, mouseRollOut);
        this.addEventListener(MouseEvent.CLICK, mouseClick);
    }
    //... Add mouseRollOver, mouseRollOut, mouseClick methods
} 
```

您的个人按钮

```
class DisagreeButton extends MyButton
{
    public function DisagreeButton()
    {

    } 
}

class AgreeButton extends MyButton
{
    public function AgreeButton()
    {

    } 
} 
```

实例化按钮后，所有事件侦听器都将应用于每个按钮。

# sharepoint - InfoPath 表单如何获取登录到 SharePoint 的用户的声明？

> ID：10109442
> 
> 赞同：1
> 
> 时间：2012-04-11T15:48:59.483
> 
> 标签：sharepoint, infopath, claims-based-identity, infopath2010, claims

我们有一个包含提案列表（InfoPath 表单）的文档库。来自不同组织的用户使用声明（表单身份验证，通过外联网）通过 SharePoint 登录。表单在客户端的 InfoPath 中打开。InfoPath 表单包含一个字段，表示提案所属的组织（选择列表），然后用户在填写表单时选择该字段。

我们编写了一个自定义声明提供程序，它使用组织声明来增加每个用户的登录。

当用户在 InfoPath 表单填充器中打开来自 SharePoint 的提案时，我们希望：

*   使用与用户声明匹配的组织预填充组织选择列表
*   如果用户对组织的声明值与表单上选定的组织不匹配，则限制表单的保存（插入和更新）

我想知道如何在 InfoPath 中获取声明信息。或者，有关如何使用自定义工作流/事件接收器/Web 服务（或其他东西）在服务器端执行此操作的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:04:21.507

我不确定这是否适用于您的特定实现，但是，您可以设置要从 Web 服务检索的输入控件（下拉列表、列表框等）的数据源。

然后，您可以使用 eForm 上的隐藏字段，这些字段填充了您需要的元数据，例如用户 ID。这些值随后被传递给 web 服务，并且返回（列表或其他）绑定到 eForm 中所需的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:17:15.130

这是从 SharePoint 2010 获取声明的基本教程。将其放在 InfoPath 表单后面的代码中。[http://msdn.microsoft.com/en-us/library/ee535731.aspx](http://msdn.microsoft.com/en-us/library/ee535731.aspx)

理想情况下，您希望从 InfoPath 表单的 FormEvents_Loading 方法调用代码，如果用户的组织无效，则创建一个 bool，如果为 false，将阻止表单提交。这将在 FormEvents_Submit 方法中完成。

# android - 对数据库中的元素进行排序

> ID：10109445
> 
> 赞同：2
> 
> 时间：2012-04-11T15:49:04.230
> 
> 标签：android, database, sqlite

我已经在 android ( SQLite ) 中成功创建了一个数据库表。我正在尝试根据名字或姓氏（升序/降序）对数据库中的元素进行排序。（为此，我在上下文菜单中有按钮）。我在编写 SQL 语句时遇到问题。任何想法？

```
public void onCreate(Bundle savedInstanceState) 
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.database);

        ListView lv=(ListView)findViewById(R.id.mylist);

         dbh = new DatabaseHelper(this);
         c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
             DatabaseHelper.NAME + 
  ", " + DatabaseHelper.LASTNAME + 
      ", " + DatabaseHelper.ans2 + 
                        " FROM " +
                DatabaseHelper.TABLE_NAME, null); // initializing 

            String[] dataFrom ={DatabaseHelper.NAME, DatabaseHelper.LASTNAME, DatabaseHelper.ans2};
            int[] dataTo = {R.id.name, R.id.value1, R.id.value2};               
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                    R.layout.row, c, dataFrom, dataTo);

           lv.setAdapter(adapter);

           registerForContextMenu(lv);

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:57:28.840

你可以这样做，检查这个 URL [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

```
dbh.getReadableDatabase().query(DatabaseHelper.TABLE_NAME,
                                    new String[]{DatabaseHelper.NAME,
                                                DatabaseHelper.LASTNAME, 
                                              ,DatabaseHelper.ans2},null,null,null,
                                             DatabaseHelper.NAME,null); 
```

在倒数第二个参数中，设置要排序的行，例如可以添加字符串 ASC 或 DESC

```
DatabaseHelper.NAME + " ASC" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:58:35.220

我认为你在混淆事情。您无法控制它在数据库中的存储方式。您只需要担心如何从数据库中获取数据。您需要使用 order by 子句（默认情况下它是您指定的列上的 Asc）。

```
 c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
             DatabaseHelper.NAME + 
  ", " + DatabaseHelper.LASTNAME + 
      ", " + DatabaseHelper.ans2 + 
                        " FROM " +
                DatabaseHelper.TABLE_NAME ORDER BY yourColumnName, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T15:55:10.537

我相信您正在寻找 ORDER BY 关键字。您将在此处找到详细说明：

[由@w3schools.com 订购](http://www.w3schools.com/sql/sql_orderby.asp)

# asp.net-mvc - 在 RedirectToAction 之后 ViewBag 为 NULL（+ ViewBag 的重新初始化）

> ID：10109447
> 
> 赞同：25
> 
> 时间：2012-04-11T15:49:16.590
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我将 RedirectToAction 作为控制器中的返回值，在我看来，我使用 ViewBag。虽然 ViewBag 在 RedirectToAction 之后变为空是一个众所周知的问题。当我在 OnActionExecuting 方法中重新初始化重载控制器中的 ViewBag 值时遇到问题。ViewBag 又是空的。但问题是，在我的本地 PC (win7) 上它工作正常，但在 web 托管服务器 (win 2008) 上它崩溃了。那么有人可以帮助说出可能导致这种情况的原因吗？也许这是一个设置或什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-15T12:17:25.637

ViewBag 和 ViewData 仅在当前请求中存在。TempData 是在您使用重定向时使用的东西（并且只有这样）：[http](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications) ://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications states这很明显：

> [...] TempData 对象在一种基本情况下运行良好：
> 
> *   在当前和下一个 HTTP 请求之间传递数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:20:50.243

数据层深处存在异常，该异常被错误捕获，从而阻止传播，但导致 ViewBag 消失。

所以要小心捕捉异常。

# symfony - 如何在 symfony2 中制作所需的文件字段

> ID：10109457
> 
> 赞同：1
> 
> 时间：2012-04-11T15:49:55.147
> 
> 标签：symfony, symfony-forms

是的，这是一个非常简单的问题，但我是 symfony 2 的新手，没有找到任何答案……这是我的表格：

```
class CsvUploadType extends AbstractType
{
  public function buildForm(FormBuilder $builder, array $options)
  {
    $builder->add('document', 'file');
  }

  public function getDefaultOptions(array $options)
  {
    $collectionConstraint = new Collection(
        array( 'document' => new File(array('maxSize' => '200k', 'mimeTypes' => array('text/csv','text/plain'))),
            )
        );

    return array('validation_constraint' => $collectionConstraint);
  }

  public function getName()
  {
    return 'csv_upload';
  }
} 
```

感谢您的任何帮助！

注意：这不是基于实体的表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:46:22.650

以下是我项目中一个表单字段的几个约束示例：

```
/**
 * @param  array $options
 * @return array
 */
public function getDefaultOptions(array $options)
{
    return array(
        'validation_constraint' => new Collection(array(
            'email' => array(
                new NotBlank(array(
                    'message' => 'contact.email.blank'
                )),
                new Email(array(
                    'message' => 'contact.email.invalid'
                ))
            ),
            // ...
        ))
    );
} 
```

只需根据您的需要进行调整。

# actionscript-3 - how to set width and height for stage during resize event in as3

> ID：10109460
> 
> 赞同：0
> 
> 时间：2012-04-11T15:50:04.277
> 
> 标签：actionscript-3, flash

I want to set width and height of the stage during resize of that swf.. I do it in resize event handling..but doesn't work..any other way to achieve this?

```
 stage.addEventListener (Event.RESIZE, resizeListener);

 function resizeListener (e:Event):void {
  stage.stageWidth=500;
  stage.stageHeight=300;

 } 
```

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:50:24.183

by the sounds of it you just need

```
 stage.align     = "";
 stage.scaleMode = StageScaleMode.NO_SCALE; 
```

this will keep the content the same size no matter how much you stretch the window

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:03:39.100

```
Updated: 
```

you need is to compare the ratios of the width and height scales of the content and the target. To make the loaded image fit within the area, scaling so that everything is inside you can do something like this:

```
 var scale:Number = Math.min( _holder.width / _loader.content.width,
                            _holder.height / _loader.content.height );
   _loader.content.scaleX = _loader.content.scaleY = scale; 
```

This will make sure that you can see everything. If you change Math.min to Math.max, you will get a different result if the dimensions don't match.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:46:20.243

```
 public function loaderComplete(event:Event):void
   { 
  var content:MovieClip = MovieClip(event.currentTarget.content );

  //the dimensions of the external SWF
  var _width:int = content.width;
  var _height:int = content.height;

  // you have several options here , assuming you have a container Sprite
  // you can directly set to the dimensions of your container, if any
  if( container.width < _width )
      _width = container.width // and do the same for height

  // or you could scale your content to fit , here's a simple version
  // but you can check the height too or keep checking both value
  // until it fits
  if( container.width < _width ) 
  { 
      var scale:Number = container.width / _width;
      content.scaleX = content.scaleY = scale;
  }

  } 
```

This answer gives better understanding of previous code given by swati singh.See this link [How to resize an external SWF to fit into a container?](https://stackoverflow.com/questions/3481677/how-to-resize-an-external-swf-to-fit-into-a-container) Thanks to all

# magento - Google SERP 描述中的电子商务分页

> ID：10109473
> 
> 赞同：0
> 
> 时间：2012-04-11T15:51:08.320
> 
> 标签：magento, seo, e-commerce

有什么办法可以删除这个，然后弄乱语法？

![Google SERP 中的分页](../Images/028227d9ff23dcb3703296e1efa7ae63.png)

HTML 代码：

```
<table class="toolbar" border="0">
<tr><td class="pager" style="width: 414px;">
<table class="pager" cellspacing="0">
<tr>
<td>Items 1 to 9 of 144 total</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:14:19.370

[Google 会自动执行此操作](http://insidesearch.blogspot.com.au/2011/08/new-snippets-for-list-pages.html)。如果您不希望它出现在结果中，则需要重新格式化您的页面以不使用鼓励他们这样做的格式。否则，它是你无法控制的。

# java - 在 imagej 中显示线条的不同方式的优点

> ID：10109479
> 
> 赞同：0
> 
> 时间：2012-04-11T15:51:26.927
> 
> 标签：java, image-processing, imagej

我使用图像处理器 drawLine() 方法在 imagej 中创建了一条线。我还注意到存在一个 Line 类。

我在 imagej 方面没有太多经验，想知道使用一种方法比另一种方法有什么优势？

另外，如果我要使用 Line 类，我该如何改变 Line 的颜色

提前致谢

贝特曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:43:00.603

主要区别是

drawLine() : ImageProcessor.drawLine() 方法将改变显示的 ImageProcessor 中的像素值。

Line 类扩展了 ROI，因此继承了 ROI 的所有属性。你可以测量它的轮廓。

这真的取决于你想要做什么。您是要测量值还是要更改像素值以显示某些内容？如果您使用堆栈，则 ROI 将出现在堆栈中的每个图像上。drawLine() 方法仅在一个 imageProcessor 上调用，因此只有堆栈中的一个图像受到影响。

如果您使用 Line 类，您可以通过调用方法 Fill 来更改像素值。可以通过更改用于填充的值来编辑颜色（像素值）。您还可以更改 ROI 线的颜色。

使用 drawLine() 方法在 ImageProcessor 上设置颜色，例如 setColor(Color.WHITE);

# objective-c - UINavigationController 子类 - 自定义 Pop

> ID：10109480
> 
> 赞同：1
> 
> 时间：2012-04-11T15:51:27.160
> 
> 标签：objective-c, ios, uinavigationcontroller, interface-builder, subclass

像许多其他人一样，我想在 UINavigationController 中使用“后退”按钮时执行一个操作。我知道一些替代方法，例如添加我自己的按钮并尝试欺骗外观，使用 viewWillDisappear 并在所有会导致视图消失的非返回操作上设置标签等。

但我想尝试的是继承 UINavigationController 并在 popViewControllerAnimated 中注入一些东西：

但我无法让一个简单的测试用例工作。这是我尝试过的...

我创建了一个新类 CustomNavigationController，它继承自 UINavigationController。在这里，我更新了 popViewControllerAnimated：

。H：

```
#import <UIKit/UIKit.h>

@interface CustomNavigationController : UINavigationController

@end 
```

米：

```
#import "CustomNavigationController.h"

@interface CustomNavigationController ()

@end

@implementation CustomNavigationController

- (UIViewController *)popViewControllerAnimated:(BOOL)animated{
    NSLog(@"pop!");
    return [super popViewControllerAnimated:animated];
}

@end 
```

在界面生成器中，我更改了导航控制器的类： ![在此处输入图像描述](../Images/3e0bb242351ea6c32d30147d21217473.png)

我错过了什么？每当我在此导航控制器中弹出任何视图时，我都希望记录“弹出”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:22:46.963

[从UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)文档的第一段开始。

> UINavigationController 类实现了一个专门的视图控制器来管理分层内容的导航。此类不用于子类化。相反，在您希望应用程序的用户界面反映内容的分层性质的情况下，您可以按原样使用它的实例。

如果你想要这种自定义，你最好实现自己的导航样式控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:23:08.027

我刚刚在 iPhone 5.1 模拟器上测试了相同的实现，它工作正常 - 似乎问题出在其他地方。

我从单视图应用程序模板创建了一个空项目，并使用您在问题正文中发布的代码添加了 CustomNavigationController 类。UIButton 用于将另一个视图控制器推送到导航堆栈（使用情节提要的 segue），并且“POP”消息按预期发布在控制台中。

![在此处输入图像描述](../Images/2d18aca1433750c055a1c3e798e884f3.png)

# c - 我可以根据 C 标准分配超过 65535 个字节吗？

> ID：10109487
> 
> 赞同：2
> 
> 时间：2012-04-11T15:51:42.410
> 
> 标签：c, malloc, size-t

`malloc`定义如下：

```
void *malloc(size_t size); 
```

[http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)

* * *

`size_t`定义（stddef.h）：

`size_t: Unsigned integer type of the result of the sizeof operator.` [http://pubs.opengroup.org/onlinepubs/009604499/basedefs/stddef.h.html](http://pubs.opengroup.org/onlinepubs/009604499/basedefs/stddef.h.html)

* * *

但根据this page，最大限制`size_t`为65535。（其他整数类型的部分限制）：

size_t 的限制：SIZE_MAX 65535 [http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html)

* * *

这是否意味着当我想遵守 C 标准时，我不能分配超过 65535 个字节？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T15:56:41.650

`SIZE_MAX`必须至少为 65535。如果您运行的是 MS-DOS 之类的东西，它实际上可能会那么小。在典型的、相当流行的台式计算机（例如，任何不到 10 年的计算机）上，您可以预期它会更大，通常至少约为 40 亿（更准确地说是 2 ^(32) -1）。

您是否需要（尝试）处理更有限的系统将取决于您可能关心将代码移植到的目标范围。如果您确实可能需要在一个可寻址内存小于 1 兆字节的系统上处理 16 位编译器，那么您在编写代码时必须牢记这一点。然而，老实说，对于大多数人来说，这根本无关紧要——即使是相对较小的便携式系统（例如，iPod）也可以处理比这更多的内存。OTOH，如果您正在为唱歌贺卡编写代码，那么是的，这种限制可能伴随着领土（但在这种情况下，标准通常更多地被视为一般准则而不是绝对法律）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:53:39.510

的最小值`SIZE_MAX`是 65535，但它可以（并且通常是）更多。

在大多数非嵌入式平台上，`size_t`is a `typedef`for`unsigned long`并`SIZE_MAX`设置为`ULONG_MAX`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:04:40.850

在 32 位平台上，SIZE_MAX 通常为 2^32 - 1，在 64 位平台上为 2^64 - 1。如果不确定，请检查 printf。

```
printf("sizeof size_t = %zx, SIZE_MAX = %zx\n", sizeof(size_t), SIZE_MAX); 
```

包括 stdint.h 以获取 SIZE_MAX 的值。

# javascript - 如何将 .index() 的第一个元素的默认索引从 0 更改为 1

> ID：10109492
> 
> 赞同：1
> 
> 时间：2012-04-11T15:52:01.510
> 
> 标签：javascript, jquery, indexing, position

我[`.index()`](https://api.jquery.com/index/)用来获取元素的位置。因此，默认情况下，它为第一个返回 0。有没有办法将默认值设置为 1，所以返回的索引将是 1,2,3... 而不是 0,1,2...？

```
<div class="tabs">
    <a href="">1</a>
    <a href="">2</a>
    <a href="">3</a>
</div> 
```

和 jQuery：

```
$(function(){
    $('.tabs a').click(function(e){
        var index = $('.tabs a').index(this);
        console.log(index);
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:53:39.330

您无法更改默认值，但您可以手动添加它

```
var index = $('.tabs a').index(this) + 1; 
```

如果这还不够好，您可以创建一个插件来返回您想要的值。

```
(function($){
    $.fn.myIndex = function(x) {
        return $(this).index(x) + 1;
    };
})(jQuery); 
```

因此，您可以使用`.myIndex`并获取添加 1 的 jQuery 索引。

[**活生生的例子**](http://jsfiddle.net/qGGku/)

# doxygen - Objective-C 文档生成器：HeaderDoc vs. Doxygen vs. AppleDoc

> ID：10109496
> 
> 赞同：74
> 
> 时间：2012-04-11T15:52:13.927
> 
> 标签：doxygen, documentation-generation, headerdoc, appledoc

我需要为我的工作场所实施文档生成解决方案，并将其范围缩小到标题中提到的三个。在这些解决方案之间进行形式化比较的方式中，我能够找到的信息非常少，我希望你们中具有上述一项或多项经验的人能够参与进来：

以下是我从最初的通行证中收集到的信息：

HeaderDoc 优点：与苹果现有的文档一致，与制作苹果文档集的兼容性
HeaderDoc 缺点：难以修改行为，项目没有积极开展，许多人已经放弃它（意味着一定有缺陷，虽然我无法量化它）。

Doxygen 优点：积极支持广泛使用基础的社区 b/c，非常可定制，大多数输出​​类型（如乳胶等）
Doxygen 缺点：需要努力使其外观/行为与苹果文档一致，与苹果文档集的兼容性并不那么简单

AppleDoc 优点：看起来与苹果现有的文档一致，与制作苹果文档集的兼容性，
AppleDoc 缺点：类型定义、枚举和函数的文档存在问题，正在积极开发中

这听起来准确吗？我们所需的解决方案将具有：

*   与苹果objective-c 类参考一致的外观
*   能够通过选项单击从 Xcode 中提取文档参考，然后链接到文档（就像苹果的类一样）
*   智能处理类别、扩展等（甚至是苹果类的自定义类别）
*   能够创建我们自己的参考页面（比如这个页面：加载中……可以包含图像，并且可以从生成的类引用无缝链接，比如苹果的 UIViewController 类引用如何链接到链接页面。
*   易于运行的命令行命令，可以集成到构建脚本中
*   优雅地处理非常大的代码库

基于以上所有信息，上述任何解决方案是否明显优于其他解决方案？任何要添加的建议或信息将不胜感激。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-12T18:41:15.357

作为 doxygen 的创造者和主要开发者，让我也提供我的观点
（显然也有偏见；-）

如果您正在寻找 100% 忠实于 Apple 自己的文档风格的副本，那么 AppleDoc 在这方面是一个更好的选择。使用 doxygen，您将很难获得完全相同的外观，因此我不建议您尝试。

关于 Xcode 文档集；Apple 提供了如何使用 doxygen 进行设置的说明（在 Xcode 3 发布时编写）[。](http://developer.apple.com/library/ios/#featuredarticles/DoxygenXcode/_index.html)对于 Xcode 4，还有一个[很好的指南](http://www.duckrowing.com/2010/03/18/documenting-objective-c-with-doxygen-part-ii/)如何集成 doxygen。

从 1.8.0 版本开始，doxygen 支持[Markdown 标记](http://www.doxygen.nl/manual/markdown.html)，以及大量的附加[标记](http://www.doxygen.nl/manual/commands.html)命令。

使用 doxygen，您可以在主页（@mainpage）和子页面（使用@subpage 或@page）上包含文档。在页面内，您可以创建部分和子部分。事实上，doxygen 的用户手册完全是用 doxygen 编写的。除此之外，您可以将类或函数组合在一起（使用@defgroup 和@ingroup）并在类内部创建自定义部分（使用@name）。

Doxygen 使用配置文件作为输入。`doxygen -g`您可以使用或使用[图形编辑器](http://www.doxygen.nl/manual/doxywizard_usage.html)生成具有默认值的模板来创建和编辑模板。您还可以使用脚本通过 doxygen 管道选项（请参阅[常见问题解答](http://www.doxygen.nl/manual/doxygen/faq.html)`doxygen -`的问题 17 以获取示例）

Doxygen 不仅限于 Objective-C，它支持包括 C、C++ 和 Java 在内的大量语言。Doxygen 也不限于 Mac 平台，例如它也可以在 Windows 和 Linux 上运行。Doxygen 的输出也不仅仅支持 HTML；您可以生成 PDF 输出（通过 LaTeX）或 RTF 和手册页。

Doxygen 也超越了纯粹的文档。doxygen 可以从源代码创建各种图形和图表（参见[点](http://www.doxygen.nl/manual/config.html#config_dot)相关选项）。Doxygen 还可以创建代码的可浏览和语法高亮版本，并与文档交叉引用（请参阅[源浏览器](http://www.doxygen.nl/manual/config.html#sourcebrowser_index)相关选项）。

Doxygen 对于中小型项目非常快（虽然图表生成可能很慢，但现在并行运行在多个 CPU 内核上，并且一次运行的图表在下一次运行中被重用）。对于非常大的项目（例如数百万行代码），doxygen 允许将项目拆分为多个部分，然后可以将这些部分链接在一起，正如我[在此处](https://stackoverflow.com/questions/8247189/doxygen-is-slow)解释的那样。

[可以在这里](http://dl.dropbox.com/u/2601212/NanoStore%202.0/html/index.html)找到一个在 Objective-C 中使用 doxygen 的真实示例。

doxygen 的发展高度依赖于用户的反馈。我们有一个用于问题和讨论的活动[邮件列表](http://sourceforge.net/mail/?group_id=5971)，以及一个用于错误和功能请求的[错误跟踪器。](https://github.com/doxygen/doxygen/issues/new)

大多数 doxygen 用户将其用于 C 和 C++ 代码，因此这些语言自然拥有最成熟的支持，并且输出更针对这些语言的功能和需求进行调整。也就是说，其他语言的愿望和问题也被认真对待。

请注意，我自己在 Mac 上进行了几乎所有的 doxygen 开发和大多数测试。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-04-12T12:32:42.737

我是 appledoc 的作者，所以这个答案可能有偏见:) 我尝试了所有提到的生成器（以及更多），但是因为没有产生我想要的结果而感到沮丧（与你的目标相似）。

根据您的观点（我只提到了appledoc和doxygen，我不太记得headerdoc）：

1.  一致的外观：appledoc 开箱即用，其他需要调整 css，但可能可行。

2.  生成文档集（用于 Xcode 参考）：appledoc 完全支持开箱即用的可搜索和可选项单击文档，doxygen 生成您需要自己调用的 xml 和 makefile。此外，appledoc 支持开箱即用的[已发布文档集](http://gentlebytes.com/appledoc-docs-examples-advanced/)。

3.  类别：appledoc 允许您[将类别合并到已知类或将它们分开，基础和其他苹果类类别在](http://gentlebytes.com/appledoc-docs-examples-advanced/index.html#merge-categories)[索引文件](http://gentlebytes.com/media/appledoc/examples/v2/latest/index.html)中单独列出。doxygen：当我尝试时，这不是最好的。

4.  自定义参考页面：appledoc[支持](http://gentlebytes.com/appledoc-docs-examples-documents/)开箱即用，使用 markdown 或自定义 html，doxygen：您可以在主页中包含自定义文档，不知道是否可以包含更多页面。

5.  简单的命令行：取决于您如何看待它：appledoc 可以通过命令行开关获取所有参数（但也支持可选的全局和项目设置 plist 文件），因此它应该很容易与构建脚本集成。doxygen 需要使用配置文件来设置所有参数。

6.  大型代码库：所有工具都应该支持这一点，尽管没有比较时间。也不确定是否有任何工具支持缓存值（运行以前收集的数据以节省一些时间） - 我正在考虑为下一个主要版本添加它。

自从我尝试使用其他工具以来已经有一段时间了，所以上面提到的 doxygen/headerdoc 问题可能已经得到解决！appledoc 本身也有缺点：就像你提到的那样，不支持枚举、结构、函数等（在这个方向上做了一些工作，[检查这个 fork](https://github.com/pilky/appledoc)），它有自己的[一组问题](https://github.com/tomaz/appledoc/issues)，可能会阻止你使用它，具体取决于你的要求。

我目前正在进行重大更新，将[涵盖最明显的问题](http://gentlebytes.com/2012/02/bringing-appledoc-to-next-level/)，包括对枚举、结构等的支持。一旦我完成更大的块并使其足够稳定，我就会定期将新东西推送到实验分支，所以你可以关注进步。但现在还很早，进展取决于我的时间，所以可能需要很长时间才能找到解决方案。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-19T16:05:12.750

Xcode 5 现在将解析您的评论以搜索文档并显示它：

![评论示例](../Images/8db4fa1eaf19982a6d159cc182275abc.png)

您不必再使用 appledoc 或 doxygen（至少在您不想导出文档时）。更多信息可以在[这里找到](http://androidkr.blogspot.de/2013/06/xcode-5-comment-for-documentation.html)

# sql-server - T SQL - 为什么这里不需要 AS？

> ID：10109501
> 
> 赞同：0
> 
> 时间：2012-04-11T15:52:32.667
> 
> 标签：sql-server, tsql

解决方案：[https](https://stackoverflow.com/a/439768/857994) ://stackoverflow.com/a/439768/857994给出以下代码：

```
 DELETE TableA 
    FROM TableA a
    INNER JOIN
    TableB b on b.Bid = a.Bid
    and [my filter condition] 
```

我的问题是：

为什么我们不需要 FROM 中的 AS 来将 TableA 别名为 a here？我们不需要像这样的选择查询中的 AS`SELECT E.FirstName FROM Employee AS E;`吗？

有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:58:21.260

那里的“AS”关键字是可选的。在 SELECT 查询中也不需要它。（尝试一下！）

以下是 MSDN 中“FROM”的一些语法：

```
[ FROM { <table_source> } [ ,...n ] ] 
<table_source> ::= 
{
    table_or_view_name [ [ AS ] table_alias ] [ <tablesample_clause> ] 
    ...
} 
```

如您所见，`[ AS ]`括号中的是，这意味着它是可选的。您*永远*不需要添加它，尽管我想有些人可能会争辩说它使查询更具可读性。我不同意，但这是个人喜好（或您的 DBA 的个人喜好）的问题。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms177634.aspx 。](http://msdn.microsoft.com/en-us/library/ms177634.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:58:35.283

它们是同一个东西，要么用“as”别名，要么不带别名。见： [http ://www.tsqltutorials.com/aliases.php](http://www.tsqltutorials.com/aliases.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T15:58:29.153

在为要选择的列名取别名时需要 AS，但在 FROM 子句中为表名取别名时不需要。而且，不，在那一秒更短的 SELECT 中您不需要 AS。

除了“这是语言的定义语法”之外，没有“为什么”。我发现试图对语言设计者的秘密隐藏动机进行事后猜测不会有任何好处。

# visual-studio-2010 - C++、DeviL、Opengl 和 msvs2010 - 它可以编译和链接，但无法在 dll 中加载入口点

> ID：10109502
> 
> 赞同：0
> 
> 时间：2012-04-11T15:52:33.687
> 
> 标签：visual-studio-2010, dll, entry-point, devil

我正在尝试在我的项目中使用 Windows 中的 DevIl 图像库，使用 MSVS2010。[我已经从http://openil.sourceforge.net/download.php](http://openil.sourceforge.net/download.php)下载了 sdk “DevIL 1.7.8 SDK for 32-bit Windows”，并将其放入我所有其他库所在的文件夹中。我已将我的项目配置为包含其标题并与提供的 .lib 链接。我已将提供的 dll 复制到我的 .exe 所在的文件夹中。它编译和链接没有问题，但是当我尝试执行它时，我有一个错误弹出窗口说“程序入口点_ilGetData@0不能位于DevIl.dll”（从西班牙语翻译）。我遵循了与我使用的所有库相同的步骤，没有问题，所以我不知道问题出在哪里。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:32:40.533

我认为问题在于二进制文件是使用旧版本的 Visual Studio 构建的……您可能必须自己构建库。

# python - 有效地生成小于 N 的所有合数（及其分解）

> ID：10109510
> 
> 赞同：14
> 
> 时间：2012-04-11T15:52:57.020
> 
> 标签：python, algorithm, iterator, generator

我想构建一个高效的 Python 迭代器/生成器，它产生：

*   小于 N 的所有合数
*   连同他们的素数分解

我将其称为“composites_with_factors()”

*假设我们已经有*一个小于 N 的素数列表，或者一个可以做同样事情的素数生成器。

请注意，我：

*   不需要按数字顺序产生数字
*   不关心 1 是否在开始时产生
*   不要关心是否也产生了素数

我认为这可以通过一个聪明的递归生成器来完成......

因此，例如，对 composites_with_factors(16) 的调用可能会产生：

```
# yields values in form of "composite_value, (factor_tuple)"
2, (2)
4, (2, 2)
8, (2, 2, 2)
6, (2, 3)
12, (2, 2, 3)
10, (2, 5)
14, (2, 7)
3, (3)
9, (3, 3)
15, (3, 5)
5, (5)
7, (7)
11, (11)
13, (13) 
```

正如您从我的输出顺序中看到的那样，我设想这个工作是从可用素数生成器上的最小素数开始，并输出该素数的所有幂小于 N，然后再次尝试通过该素数的幂，但在每个阶段看看我是否可以应用额外素数的幂（并且仍然小于 N）。当所有与那个素数的组合都完成后，放下它，然后用素数生成器上可用的下一个最低素数重复。

我尝试用“递归生成器”来做这件事让我很困惑，什么时候用“yield”、“raise StopIteration”或“return”退出递归，或者干脆退出递归函数。

谢谢你的智慧！

附加说明：

我*现在确实*有一种方法可以做到这一点：我编写了一个分解数字的函数，所以我可以将它们分解为素数，并产生结果。没问题。我依靠“什么是数字 N 的最低素数”的缓存来保持这个速度极快......对于 N 高达 1000 万。

但是，一旦我从缓存中取出，我们就会将其转移到“幼稚”的因式分解。（呸。）

这篇文章的要点是：

*   我假设“从它们的因子生成大型复合材料”将比“分解大型复合材料”更快......特别是因为我不关心订单，并且
*   如何让 Python 生成器“递归”调用自身，并生成一个生成的东西流？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T16:26:17.727

假设`primesiter(n)`在所有素数上创建一个迭代器`n`（不应该包含 1 `primesiter`，或者下面的代码很好地进入 inf.循环）

```
def composite_value(n, min_p = 0):
    for p in primesiter(n):
        # avoid double solutions such as (6, [2,3]), and (6, [3,2])
        if p < min_p: continue
        yield (p, [p])
        for t, r in composite_value(n//p, min_p = p): # uses integer division
            yield (t*p, [p] + r) 
```

*输出*

```
>> list(composite_value(16))
[(2, [2]),
 (4, [2, 2]),
 (8, [2, 2, 2]),
 (16, [2, 2, 2, 2]),
 (12, [2, 2, 3]),
 (6, [2, 3]),
 (10, [2, 5]),
 (14, [2, 7]),
 (3, [3]),
 (9, [3, 3]),
 (15, [3, 5]),
 (5, [5]),
 (7, [7]),
 (11, [11]),
 (13, [13])] 
```

注意：它也包括 n (= 16)，我使用列表而不是元组。如果需要，两者都可以轻松解决，但我将把它留作练习。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T16:45:04.857

这是一个基于筛子的实现（*请原谅 un-pythonic 代码:)*）：

```
def sieve(n):
    # start each number off with an empty list of factors
    #   note that nums[n] will give the factors of n
    nums = [[] for x in range(n)]
    # start the counter at the first prime
    prime = 2
    while prime < n:
        power = prime
        while power < n:
            multiple = power
            while multiple < n:
                nums[multiple].append(prime)
                multiple += power
            power *= prime
        # find the next prime
        #   the next number with no factors
        k = prime + 1
        if k >= n:    # no primes left!!!
            return nums
        # the prime will have an empty list of factors
        while len(nums[k]) > 0:
            k += 1
            if k >= n:    # no primes left!!!
                return nums
        prime = k
    return nums

def runTests():
    primes = sieve(100)
    if primes[3] == [3]:
        print "passed"
    else:
        print "failed"
    if primes[10] == [2,5]:
        print "passed"
    else:
        print "failed"
    if primes[32] == [2,2,2,2,2]:
        print "passed"
    else:
        print "failed" 
```

测试：

```
>>> runTests()
passed
passed
passed 
```

在我的机器上，这需要 56 秒才能运行：

```
primes = sieve(14000000) # 14 million! 
```

例子：

```
>>> primes[:10]
[[], [], [2], [3], [2, 2], [5], [2, 3], [7], [2, 2, 2], [3, 3]]

>>> primes[10000]
[2, 2, 2, 2, 5, 5, 5, 5]

>>> primes[65536]
[2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]

>>> primes[6561]
[3, 3, 3, 3, 3, 3, 3, 3]

>>> primes[233223]
[3, 17, 17, 269] 
```

内存消耗：大约 5000 万个整数，在 1400 万个列表中：

```
>>> sum(map(len, primes))
53303934 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:42:00.253

递归（伪代码）：

```
def get_factorizations_of_all_numbers( start = starting_point
                                     , end = end_point
                                     , minp = mimimum_prime
                                     ):
    if start > end:
        return Empty_List
    if minp ^ 2 > end:
        return list_of_all_primes( start, end )
    else
        a = minp * get_factorizations_of_all_numbers( rounddown(start/minp)
                                                    , roundup(end/minp)
                                                    )
        b = get_factorizations_of_all_numbers( start
                                             , end
                                             , next_prime( minp )
                                             )
        return append( a , b )

get_factorizations_of_all_numbers( 1, n, 2 ) 
```

# hadoop - 在地图减少中计算中位数

> ID：10109514
> 
> 赞同：16
> 
> 时间：2012-04-11T15:53:07.757
> 
> 标签：hadoop, statistics, mapreduce, apache-pig, median

有人可以举例说明地图减少中中位数/分位数的计算吗？

我对Datafu的中位数的理解是'n'个映射器对数据进行排序并将数据发送到“1”个reducer，该reducer负责对来自n个映射器的所有数据进行排序并找到中值（中间值）我的理解是否正确？，

如果是这样，这种方法是否适用于大量数据，因为我可以清楚地看到一个单一的减速器正在努力完成最后的任务。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T16:40:52.143

试图找到系列中的中位数（中间数）将需要 1 个 reducer 传递整个数字范围以确定哪个是“中间”值。

根据输入集中值的范围和唯一性，您可以引入组合器来输出每个值的频率 - 减少发送到单个减速器的地图输出数量。然后，您的减速器可以使用排序值/频率对来识别中位数。

另一种可以扩展的方法（如果您知道值的范围和粗略分布）是使用自定义分区器，该分区器按范围桶分配键（0-99 到减速器 0，100-199 到减速器 2，依此类推上）。然而，这将需要一些辅助工作来检查 reducer 输出并执行最终的中值计算（例如，知道每个 reducer 中的键数，您可以计算哪个 reducer 输出将包含中值以及偏移量）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-08T14:38:09.507

你真的需要*准确的*中位数和分位数吗？

很多时候，您最好只获得近似值并使用它们，特别是如果您将其用于例如数据分区。

实际上，**您可以使用近似分位数来加速找到确切的分位数**（实际上是在`O(n/p)`时间上），这里是该策略的粗略概述：

1.  让每个*分区*的映射器计算所需的分位数，并将它们输出到新的数据集。该数据集应该小几个数量级（除非您要求的分位数太多！）
2.  *在这个数据集中，再次*计算分位数，类似于“中位数的中位数”。这些是您的初步估计。
3.  根据这些分位数对数据进行重新分区（甚至以这种方式获得的附加分区）。目标是最终保证真正的分位数在一个分区中，并且每个分区最多应该有一个期望的分位数
4.  在每个分区中，执行 QuickSelect (in `O(n)`) 以找到真正的分位数。

每个步骤都是线性时间。成本最高的步骤是第 3 部分，因为它需要重新分配整个数据集，因此会产生`O(n)`网络流量。您可以通过为第一次迭代选择“备用”分位数来优化该过程。说，你想找到全球中位数。您无法在线性过程中轻松找到它，但是当将其拆分为 k 个分区时，您可能可以*将其缩小到数据集的 1/kth。*因此，不是让每个节点报告其中值，而是让每个节点另外报告 (k-1)/(2k) 和 (k+1)/(2k) 处的对象。这应该允许您缩小真实中位数*必须的值范围*撒谎。因此在下一步中，您可以将每个节点在所需范围内的那些对象发送到单个主节点，并仅选择此范围内的中位数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T18:22:11.077

O((n log n)/p) 对它进行排序，然后 O(1) 得到中位数。

是的......你可以获得 O(n/p) 但你不能在 Hadoop 中使用开箱即用的排序功能。除非您能证明 2-20 小时的开发时间来编写并行的第 k 大算法，否则我只会排序并获得中心项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-22T17:28:00.817

在许多实际场景中，数据集中值的基数相对较小。在这种情况下，可以通过两个 MapReduce 作业有效地解决问题：

1.  计算数据集中值的频率（基本上是字数统计工作）
2.  身份映射器 + 一个基于 <值 - 频率> 对计算中值的化简器

作业 1\. 将大大减少数据量，并且可以完全并行执行。工作 2\. 的 Reducer 只需要处理`n`( `n`= `cardinality of your value set`) 项而不是所有值，就像天真的方法一样。

下面是作业 2 的示例减速器。它是可以直接在 Hadoop 流中使用的 python 脚本。假设数据集中的值是`ints`，但可以很容易地用于`double`s

```
import sys

item_to_index_range = []
total_count = 0

# Store in memory a mapping of a value to the range of indexes it has in a sorted list of all values
for line in sys.stdin:
    item, count = line.strip().split("\t", 1)
    new_total_count = total_count + int(count)
    item_to_index_range.append((item, (total_count + 1,   new_total_count + 1)))
    total_count = new_total_count

# Calculate index(es) of middle items
middle_items_indexes = [(total_count / 2) + 1]
if total_count % 2 == 0:
    middle_items_indexes += [total_count / 2]

# Retrieve middle item(s) 
middle_items = []
for i in middle_items_indexes:
    for item, index_range in item_to_index_range:
        if i in range(*index_range):
            middle_items.append(item)
            continue

print sum(middle_items) / float(len(middle_items)) 
```

这个答案建立在最初来自[Chris White](https://stackoverflow.com/users/1279787/chris-white%20Chris%20White's)[答案](https://stackoverflow.com/questions/10109514/computing-median-in-map-reduce/10110249#10110249)的建议之上。答案建议使用组合器作为计算值频率的平均值。但是，在 MapReduce 中，并不能保证始终执行组合器。这有一些副作用：

*   reducer 首先必须计算最终的 < 值 - 频率 > 对，然后计算中位数。
*   在最坏的情况下，combiners 永远不会被执行，reducer 仍然必须努力处理所有单独的值

# jquery - 在 qTip2 中处理谷歌地图标记

> ID：10109516
> 
> 赞同：1
> 
> 时间：2012-04-11T15:53:10.683
> 
> 标签：jquery, google-maps-api-3, qtip2

我正在尝试创建一个内部管理界面，以使用 qTip 和谷歌地图快速将位置添加到事件中。这是一个简化的小提琴：http: [//jsfiddle.net/mykel_suthertun/RWtRe/](http://jsfiddle.net/mykel_suthertun/RWtRe/)

它目前可以工作，减去两个错误：

1.  每次打开 qTip 时都会复制标记。*（已解决。请参阅下面的评论。）*
2.  它目前无法处理打开未定义地图中心或标记的地图。

**回复：#1** - 要了解我的意思，请单击右侧的图钉图标。点击关闭。单击以再次打开它。现在在同一个地方有两个标记。它应该只创建一次。

我认为这是因为我在 qTip 的“显示”事件中创建了标记，而不是在“渲染”中。当我将它移动到“渲染”时，我遇到了让地图完全显示的错误。

**回复：#2** - 要查看此错误，只需单击任何目标图标。如果没有定义标记或中心，我只需要它来打开默认地图状态。我将如何调整我的代码来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:25:26.323

**[最后的小提琴。](http://jsfiddle.net/mykel_suthertun/RWtRe/36/)**

那里有一些效率极低的 JavaScript（重复的函数等），但它目前可以运行并完成我需要的所有操作。自原始版本以来，我还在那里添加了一些其他功能。希望这可以帮助某人。

# ios - 由于流中的优化，值暂时不可用

> ID：10109517
> 
> 赞同：2
> 
> 时间：2012-04-11T15:53:19.450
> 
> 标签：ios, sigabrt, nsstream

我最近开始使用发布版本（管理方案并设置从调试到发布的运行）来测试我的应用程序。我注意到的是，有时我会在流方法中弹出以下错误，我似乎无法找到找到错误的方法。这在调试模式下完美运行，但在发布版本中，除了 SIGABRT 消息之外，我没有收到任何通知。我也不知道如何检查模拟器上的崩溃日志以查看问题所在。下面我附上了崩溃的堆栈跟踪：

```
#0  0x918749c6 in __pthread_kill ()
#1  0x916c0f78 in pthread_kill ()
#2  0x916b1ce3 in __abort ()
#3  0x916ae64a in __stack_chk_fail ()
#4  0x00006d0d in -[MainViewController processMessage:len:] (_cmd=0x9ceb9, msg=0xdfd7004 "Login="User" Pass="Pass" Id="1234" PlayerId="345" Location="12,35" Color="Red" PlayerId="65" Location="180,0" Color="Blue" PlayerId="29" Location="0,200" Color="..., len=333295) at /Users/seb/Desktop/Tutorials/Networking/MainViewController.m:850
#5  0x000044b3 in -[MainViewController stream:handleEvent:] (_cmd=0x17a0410, stream=<value temporarily unavailable, due to optimizations>, eventCode=<value temporarily unavailable, due to optimizations>) at /Users/seb/Desktop/Tutorials/Networking/MainViewController.m:260
#6  0x01716501 in _inputStreamCallbackFunc ()
#7  0x016e606d in _signalEventSync ()
#8  0x016e67ca in _cfstream_solo_signalEventSync ()
#9  0x016e5e71 in _CFStreamSignalEvent ()
#10 0x016e6727 in CFReadStreamSignalEvent ()
#11 0x020083ad in SocketStream::dispatchSignalFromSocketCallbackUnlocked ()
#12 0x01f64191 in SocketStream::socketCallback ()
#13 0x01f640a1 in SocketStream::_SocketCallBack_stream ()
#14 0x016b3e44 in __CFSocketPerformV0 ()
#15 0x0171997f in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ ()
#16 0x0167cb73 in __CFRunLoopDoSources0 ()
#17 0x0167c454 in __CFRunLoopRun ()
#18 0x0167bdb4 in CFRunLoopRunSpecific ()
#19 0x0167bccb in CFRunLoopRunInMode ()
#20 0x0226f879 in GSEventRunModal ()
#21 0x0226f93e in GSEventRun ()
#22 0x0066aa9b in UIApplicationMain ()
#23 0x0000201b in main (argc=1, argv=0xbffff5e0) at /Users/seb/Desktop/Tutorials/Networking/main.m:14 
```

来自流的案例声明：handleevent 发生崩溃的地方：

```
case NSStreamEventHasBytesAvailable:
        {
            if (stream == inputStream)
            {
                NSLog(@"NSStreamEventHasBytesAvailable");

                uint8_t buffer[4096];
                unsigned int len = 0;
                NSInputStream* inputstream = (NSInputStream*)stream;
                len = [inputstream read:buffer maxLength:sizeof(buffer)];

                // Check if our stream is still valid
                if([inputstream streamError] != nil)
                {
                    //We lost our connection to the host
                    NSError *theError = [stream streamError];
                    [self setConnectError:[NSString stringWithFormat:@"Error %i: %@",
                                                            [theError code], [theError localizedDescription]]];

                    break;
                }

                [streamIncomingData appendBytes:buffer length:len];

                int processedBytes = 0;
                while (true)
                {
                    if ([streamIncomingData length] >= processedBytes + sizeof(uint32_t))
                    {
                        const char* bufferstart = ((const char*)[streamIncomingData mutableBytes]) + processedBytes;
                        uint32_t sz_n;
                        memcpy(&sz_n, bufferstart, sizeof(sz_n));
                        uint32_t sz_h = htonl(sz_n);

                        if ([streamIncomingData length] >= processedBytes + sz_h + sizeof(uint32_t))
                        {
                            [self processMessage:bufstart + sizeof(uint32_t) len:sz_h];
                            processedBytes += sz_h + sizeof(uint32_t);
                        }
                        else
                        {
                            break;
                        }
                    }
                    else
                    {
                        break;
                    }
                }
                if (processedBytes)
                {
                    if (processedBytes < [streamIncomingData length])
                    {
                        NSMutableData *newdata = [NSMutableData dataWithBytes:[streamIncomingData bytes] + processedBytes length:[streamIncomingData length] - processedBytes];
                        [streamIncomingData setData:newdata];
                    }
                    else
                    {
                        [streamIncomingData setLength:0];
                    }
                }
            }

            break;
        } 
```

进程消息方法：

```
- (void)processMessage:(const char*)msg len:(int)len
{
    NSLog(@"processMessage start (%d)", len);
    {
        char buffer[len + 1];
        memcpy(buffer, msg, len);
        buffer[len + 1] = '\0';
        NSLog(@"%s", buffer);
    }

    NSLog(@"processMessage end");
} 
```

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:25:46.120

`buffer`您通过尝试在 bounds 之外分配空终止符来破坏堆栈`len + 1`。正确的代码是：

```
 char buffer[len + 1];
    memcpy(buffer, msg, len);
    buffer[len] = '\0';
    NSLog(@"%s", buffer); 
```

您所做的是未定义的行为，并且将未定义的行为与为发布模式完成的优化相结合很可能是您仅在发布模式下看到此问题的原因。

# c# - 我的 CollectionViewSource 没有收到更改

> ID：10109518
> 
> 赞同：3
> 
> 时间：2012-04-11T15:53:37.853
> 
> 标签：c#, wpf, collectionviewsource

我有一个 ListView，我在后面的代码中绑定到 CollectionViewSource：

```
collectionView = CollectionViewSource.GetDefaultView(TableView.ItemsSource);
collectionView.SortDescriptions.Clear();
collectionView.SortDescriptions.Add(new SortDescription(propertyName, direction)); 
```

TableView就是ListView，propertyName就是我要排序的列名，方向是升序或者降序。

XAML 对 ItemSource 具有以下内容：

```
ItemsSource="{Binding Rows}" 
```

后面的代码对行有以下内容：

```
List<TableRow> rows;

public List<TableRow> Rows
{
    get { return rows; }
    set 
    {
        rows = value;
        UpdateProperty("Rows");
    }
} 
```

更新如下：

```
public void Update()
{
     ...generate a list of rows...

     Rows = ...rows...
} 
```

调用 Update 时会出现问题，列表视图会更新，但会丢失之前在 CollectionViewSource 上设置的排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:12:25.637

如果您正在“更新”行，那么之前行上的任何设置都将消失。如果您清除（不是新的）行，那么我认为它们将保留该设置。

而且您甚至不希望更新中的行 = 行。然后在分配行之后。

```
NotifyPropertyChange("Rows"); 
```

所以 UI 知道要更新

如果你要去新的然后重新分配

```
collectionView = CollectionViewSource.GetDefaultView(TableView.ItemsSource);
collectionView.SortDescriptions.Clear();
collectionView.SortDescriptions.Add(new SortDescription(propertyName, direction)); 
```

Maybe

```
private List<TableRow> rows = new List<TableRow>(); 
```

and have that the only place you new it

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T10:43:10.357

The answer is to reapply the sort descriptions after the update, as in:

```
collectionView = CollectionViewSource.GetDefaultView(TableView.ItemsSource);  
collectionView.SortDescriptions.Clear();
collectionView.SortDescriptions.Add(new SortDescription(propertyName, direction)); 
```

Then the sorting isn't lost. Refresh on the collection view doesn't help.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T11:23:58.063

> If an item property value involved in one of the grouping, sorting and filtering operations is updated, then the sorting/grouping/filtering will not be done again.
> 
> WPF 4.5 introduce a feature called live shaping which shapes the collection view in live.

See [this article](http://www.jonathanantoine.com/2011/10/05/wpf-4-5-%E2%80%93-part-10-live-shaping/) for more info.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:08:44.837

Did you try to do `CollectionView.Refresh()` after your update?

If this does not help then I think your problem occurs because you change the source of your `CollectionView` by assigning new value to your `Rows` list.

I don't know if it is possible to your code but don't assign new list just clear your previous one and insert new rows there.

```
if (Rows != null)
   Rows.Clear();
   Rows.TrimExcess();
else
   Rows = new List<TableRow>(); 
```

# android - Service、ProgressBar、Gridview（和他的 notifydatasetchanged）的组合一个 QuickAction-Implementation 出错了

> ID：10109526
> 
> 赞同：0
> 
> 时间：2012-04-11T15:53:55.670
> 
> 标签：android, gridview, baseadapter, quickaction

（对不起我的拼写错误）

我在组合一些事情时遇到了问题：

我使用 GridView 从数据库下载节目内容。onClick 文件被下载，以后可以查看。它大约 20MB。此下载由服务完成。

gridView 中的每个项目在布局中都包含一个进度条。如果项目正在通过服务在后台下载，则仅显示此进度条。

Service 发送关于下载进度的广播，Intent 包含项目的 ID，以便在 gridview 的 Adapter 的数据中找到它。

在我的 Activity 中注册了 BroadcastReceiver 以获取进度更新（请记住，可以同时下载），它在 gridview-adapter 中调用函数“setProgress”

```
public void setProgress(long id, int progress)
{
   for (int i = 0;i < list.size();i++)
   {
      if (list.get(i).getId() == id)
      {
          list.get(i).setProgress(progress);
          notifyDataSetChanged();
      }
   }        
} 
```

至此，一切正常。

此外，我使用来自 http://www 的 QuickAction 实现。londatiga.net/it/how-to-create-quickaction-dialog-in-android/（空格，因为我不能发布两个以上的超链接）

现在问题来了：

有时，我猜当 notifydatasetchanged 被调用并且用户点击一个项目时，快速操作显示在错误的位置。

为了更清楚，这里有两张图片：

第一个是应该发生的事情（在这种情况下，单击 gridview 的第一项） [http://dl.dropbox.com/u/9031500/expected.png](http://dl.dropbox.com/u/9031500/expected.png)

第二张图片显示了有时会发生什么（仅当某些下载正在运行时，这就是为什么我猜它是因为“notifydatasetchanged”和视图的重建）。这也是对第一项的点击，不幸的是，快速操作显示在第四项： [http ://dl.dropbox.com/u/9031500/wrong.png](http://dl.dropbox.com/u/9031500/wrong.png)

这是我在呼吁快速行动的活动中的实现：

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    showQuickAction(view, position);
}

@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
    showQuickAction(view, position);
    return true;
}

private void showQuickAction(View view, int position)
{
    RelativeLayout facsimile = (RelativeLayout) view.findViewById(R.id.lib_item_image_layout);
    Log.i(LOGTAG, "Position:"+position);
    currentPaper = TZReader.paperDao.load(libraryAdapter.getItemId(position));
    Log.i(LOGTAG,"Set CurrentPaper:"+currentPaper.getTitelWithDate());

    ActionItem downloadItem = new ActionItem(ACTION_ITEM_DOWNLOAD, "Download", getResources().getDrawable(R.drawable.ic_action_download));
    ActionItem readItem = new ActionItem(ACTION_ITEM_READ, "Lesen", getResources().getDrawable(R.drawable.ic_action_read));
    ActionItem deleteItem = new ActionItem(ACTION_ITEM_DELETE, "Löschen", getResources().getDrawable(R.drawable.ic_action_delete));
    ActionItem cancelItem = new ActionItem(ACTION_ITEM_CANCEL, "Abbrechen", getResources().getDrawable(R.drawable.ic_action_cancel));

    QuickAction mQuickAction = new QuickAction(this, QuickAction.HORIZONTAL);

    switch (currentPaper.getState())
    {
    case Paper.DOWNLOADED_READABLE:
        mQuickAction.addActionItem(readItem);
        mQuickAction.addActionItem(deleteItem);         
        break;
    case Paper.DOWNLOADED_BUT_UPDATE:
        mQuickAction.addActionItem(downloadItem);
        mQuickAction.addActionItem(deleteItem);
        break;
    case Paper.IS_DOWNLOADING:
        mQuickAction.addActionItem(cancelItem);
        break;
    case Paper.NOT_DOWNLOADED:
        mQuickAction.addActionItem(downloadItem);
        break;  
    }

    //Set listener for action item clicked
    mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {         
        @Override
        public void onItemClick(QuickAction source, int pos, int actionId) {                        
            //here we can filter which action item was clicked with pos or actionId parameter
            switch(actionId)
            {
            case ACTION_ITEM_DOWNLOAD:
                Intent downloadIntent = new Intent(getApplicationContext(), DownloadService.class);
                downloadIntent.putExtra(DownloadService.PARAMETER_PAPER_DB_ID_LONG, currentPaper.getId());
                startService(downloadIntent);
                break;
            case ACTION_ITEM_READ:

                break;
            case ACTION_ITEM_DELETE:
                DeleteAlertDialogFragment newFragment = DeleteAlertDialogFragment.newInstance(currentPaper.getId());
                newFragment.setStyle(SherlockDialogFragment.STYLE_NO_TITLE,0);
                newFragment.show(getSupportFragmentManager(), "dialog");
                break;
            case ACTION_ITEM_CANCEL:
                break;                  
            }
        }
    });     

    mQuickAction.show(facsimile);   
} 
```

也许有人对我有任何想法或提示我如何处理这个问题！提前一百万谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:40:45.910

我找到了解决我的问题的方法。

解决方案是我实现自己的 ProgressBar，它现在包含一个 BroadcastListerner 并设置每个项目的进度。所以我可以更改值而无需调用“notifydatasetchanged”。非常适合我的需要。我仍然不确定这是否是一个好的解决方案，但它运作良好。

这是进度条的代码：

```
public class ListeningProgressBar extends ProgressBar {

public ListeningProgressBar(Context context, AttributeSet attrs) {
    super(context, attrs);
}

final IntentFilter intentDownloadProgressFilter = new IntentFilter(DownloadService.DOWNLOAD_PROGRESS_BROADCAST);
private long paperId = 0;
private boolean isReceiverRegistered = false;

@Override
protected void onAttachedToWindow() {

    getContext().getApplicationContext().registerReceiver(downloadProgressBroadcastReceiver,intentDownloadProgressFilter);
    isReceiverRegistered = true;

    super.onAttachedToWindow();
}

@Override
protected void onDetachedFromWindow() {
    if (isReceiverRegistered)
    {
        getContext().getApplicationContext().unregisterReceiver(downloadProgressBroadcastReceiver);
        isReceiverRegistered = false;
    }
    super.onDetachedFromWindow();
}

private BroadcastReceiver downloadProgressBroadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        long id = intent.getLongExtra(DownloadService.PARAMETER_PAPER_DB_ID_LONG, -1);
        int progressValue = intent.getIntExtra(DownloadService.PARAMETER_PAPER_PROGRESS_INT, 0);
        if (paperId == id)
        {
            setProgress(progressValue);
        }
    }
};

public long getPaperId() {
    return paperId;
}

public void setPaperId(long paperId) {
    this.paperId = paperId;
}

} 
```

我只是将它用作我的 XML 布局中的普通自定义视图。在适配器中，我设置了我的内容的 id，以便为接收者提供数据，如果它是正确的内容，则只是为了设置进度。

最后，我的问题解决了，进度更新了，不需要调用notifydatasetchanged。是的！

# sql-server-2008 - TSQL 从价格历史中返回价格变化的日期

> ID：10109535
> 
> 赞同：2
> 
> 时间：2012-04-11T15:54:49.580
> 
> 标签：sql-server-2008

我有一个包含这 4 个字段的价格历史表

1.  ID
2.  日期
3.  产品
4.  价格

每件产品都有记录。我正在尝试编写一个查询来返回每个产品的起始价格的记录以及每次价格变化的记录。

我尝试按价格分组，但很明显，当价格变化而不是稍后的日期变回时，这会中断，因为它只会返回 1 条记录。

我已经编写了这个查询来生成我正在尝试处理的示例数据

```
CREATE TABLE #PriceHistory
(
 [Id] INT IDENTITY,
 [Date] DATETIME ,
 [Product] NVARCHAR(30) ,
 [Price] MONEY 
)

INSERT INTO #PriceHistory([Date],[Product],[Price])
SELECT '20120101', 'Tesco', 1.99
UNION ALL
SELECT '20120102', 'Tesco', 1.97
UNION ALL
SELECT '20120103', 'Tesco', 1.97
UNION ALL
SELECT '20120105', 'Tesco', 1.99
UNION ALL
SELECT '20120104', 'Tesco', 1.99
UNION ALL
SELECT '20120106', 'Tesco', 1.99
UNION ALL
SELECT '20120101', 'BP', 1.99
UNION ALL
SELECT '20120102', 'BP', 1.01
UNION ALL
SELECT '20120103', 'BP', 1.99

SELECT * FROM #PriceHistory

DROP TABLE #PriceHistory 
```

从该样本数据中，我期望的结果应该是

```
1 2012-01-01 Tesco 1.99
2 2012-01-02 Tesco 1.97
5 2012-01-04 Tesco 1.99
9 2012-02-11 BP 1.99
8 2012-02-20 BP 1.01 
```

关于实现这一目标的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:03:27.780

此查询以价格开始，并尝试查找相同价格的相同产品的先前记录...如果没有相同价格的相同产品的记录，则返回该记录：

```
SELECT ph.* 
FROM 
    #PriceHistory ph 
    LEFT JOIN #PriceHistory ph2 ON
        ph.Product = ph2.Product
        AND ph.Price = ph2.Price
        AND ph2.Date = (
            SELECT MAX(ph3.Date)
            FROM #PriceHistory ph3
            WHERE 
                ph3.Product = ph.Product
                AND ph3.Date < ph.Date
            )
WHERE ph2.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:01:52.287

没有很好的测试，但试试这个：

```
SELECT DISTINCT P1.* FROM #PriceHistory P1
JOIN #PriceHistory P2 ON P1.Date = P2.Date + 1 
OR P1.Date in (SELECT MIN(Date) From #PriceHistory P3) 
WHERE P1.Product = P2.Product AND P1.Price <> P2.Price 
```

相邻日期；相同的产品；不同的价格

[编辑捕捉“第一个”日期]

# asp.net-mvc - 如何从两个表在 mvc3 中动态填充下拉列表？

> ID：10109540
> 
> 赞同：0
> 
> 时间：2012-04-11T15:55:18.740
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我已经创建了 mvc3 应用程序。在哪里使用 EF 从表中填充下拉列表。

现在`two dropdownlists`我`index.cshtml`每个人都从不同的表中填充。

代码 index.cshtml：

我将模型作为实体，因为它同时拥有我的表格`table1`和`table2`

`@model Mapping.Models.mydataEntities1`

但问题是我无法从两个表中选择值。:(

像下面的代码仅在我给出模型时才有效`@model Mapping.Models.table1`

但需要从不同的表中选择两个下拉列表中的值

```
@using (Html.BeginForm())
{
    @Html.DropDownListFor(
        x => x.CategoryId, 
        new SelectList(Model.Categories, "Value", "Text"),
        "-- Select category --"
    )
    <input type="submit" value="OK" />
} 
```

我怎样才能做到这一点？

我用过EF

```
 public partial class mydataEntities1 : DbContext
    {
        public mydataEntities1()
            : base("name=mydataEntities1")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<table1> table1 { get; set; }
        public DbSet<table2> table2 { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:10:41.050

我建议使用实际的“模型”，而不是直接将数据实体推送到视图中。像这样的东西可能是你应该为你的模型使用的东西：

```
public class MyModel
{
    public Mapping.Models.table1 table1;
    public Mapping.Models.table2 table2;
} 
```

然后你的模型就会变成

```
@model MyModel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:30:28.487

我不是 EF 用户，但假设您的模型已填充并正常工作，以下代码应该可以工作

```
@Html.DropDownListFor(
    x => x.table1.CategoryId, 
    new SelectList(Model.table1.Categories, "Value", "Text"),
    "-- Select category --"
)

@Html.DropDownListFor(
    x => x.table2.CategoryId, 
    new SelectList(Model.table2.Categories, "Value", "Text"),
    "-- Select category --"
) 
```

但我强烈建议您创建一个 ViewModel 以将您的数据公开给视图，而不是您的域实体或直接存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:18:43.417

查看代码

```
 <%: Html.DropDownList("courses","--select--")%> 
```

控制器代码

公共 ActionResult Index() { newclass nw = new newclass();

```
 IEnumerable<SelectListItem> lt = nw.method().Select(c => new SelectListItem
        {
            Text = c.EmpName,
            Value = c.EmpId.ToString()
        });
        ViewData["courses"] = lt;

        return View();
    } 
```

型号代码

公共类 newclass { DataClasses2DataContext db = new DataClasses2DataContext(); public IEnumerable method() { List lt = (from val in db.Employees select new Class1 { EmpName = val.EmpName, EmpId = val.EmpId }).Distinct().ToList(); if (lt != null) { var values = from val in lt orderby val.EmpId select val; 返回值；} 否则返回空值；}

```
}
public class Class1
{

    public int EmpId{get;set;}
    public string EmpName { get; set; }
    public string location { get; set; }
    public Int64 Phno{get;set;}

} 
```

将模型类命名空间添加到控制器并尝试它希望这将完美地填充 asp.net mvc3 中的下拉列表

# c - 使用 ESC 字符访问 GSM 03.38 扩展字符集

> ID：10109542
> 
> 赞同：1
> 
> 时间：2012-04-11T15:55:22.507
> 
> 标签：c, gsm

我正在编写一个通过串行端口与 SIEMENS TC65 GSM 调制解调器通信的 C 应用程序。我能够正确发送 SMS 消息，但现在我想发送一些超出默认 GSM 03.38 字符集的字符。

请参阅：[http ://www.csoft.co.uk/sms/character_sets/gsm.htm](http://www.csoft.co.uk/sms/character_sets/gsm.htm)

例如，如果我尝试发送 character `[`，此页面会告诉我必须使用`ESC`character 后跟`<`. 问题是调制解调器正在解释`ESC`字符并中止消息的发送，它没有读取完整的消息内容。

谁能帮我发送这些位于“扩展”GSM 03.38 字符集上的字符？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T17:38:49.170

您的链接表中有一些不正确的字符。我建议在[这里](http://www.3gpp.org/ftp/Specs/html-info/0338.htm)下载 3GPP的 GSM 和最新 UICC[的](http://www.3gpp.org/ftp/Specs/html-info/23038.htm)原始规范。UICC 规范已包含欧元符号。

要访问扩展表，您需要添加转义控件`0x1B`，如下所示：

```
 ^ : 0x1B 0x14
 { : 0x1B 0x28
 } : 0x1B 0x29
 \ : 0x1B 0x2F
 [ : 0x1B 0x3C
 ~ : 0x1B 0x3D
 ] : 0x1B 0x3E
 | : 0x1B 0x40
 € : 0x1B 0x65
 page break : 0x1B 0x0A 
```

使用示例：

```
// [Hello]
byte[] text = new byte[] {0x1B, 0x3C, 'H', 'e', 'l', 'l', 'o', 0x1B, 0x3E}; 
```

笔记：

1.  0-9、AZ、az、空格（一些其他字符）的 ASCII 码与 GSM 默认字母表类似。其余请看表
2.  如果手机/手机不支持分机表字符，则按默认表字符显示（如欧元显示为小'e'）
3.  如果您使用的是阿拉伯语或中文，则不能使用 GSM 默认字母及其扩展表。而是使用 Unicode 字符集 2 (UCS-2)

# c - 哈希表 - 链表 - 分段错误

> ID：10109544
> 
> 赞同：0
> 
> 时间：2012-04-11T15:55:24.740
> 
> 标签：c, function, segmentation-fault, arguments, hashtable

我正在尝试使用链表链接实现哈希表。以下代码有效 -

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define TABSIZ 200

struct record {
    struct record *next;
    char name[BUFSIZ];
    int data;
};

static struct record *htable[TABSIZ];

unsigned hash(char *s)
{
    unsigned h;

    for (h = 0; *s; s++)
        h = *s;
//printf("%d", h%TABSIZ);
//I know its not a good hash function but i wanted to check chaining
    return h % TABSIZ;
}

struct record *find(char *name)
{
    struct record *item;

    for (item = htable[hash(name)]; item; item = item->next)
    {
        if (strcmp(name, item->name) == 0)
            return item;
    }

    return NULL;
}

struct record *insert(char *name,int value)
{
    struct record *item;
    unsigned h;

    if ((item = find(name)) == NULL)
    {
        if ((item = malloc(sizeof (*item))) == NULL)
            return NULL;

        strcpy(item->name, name);
        item->data=value;
        h = hash(name);
        item->next = htable[h];
        htable[h] = item;
    }

    return item;
}
void printTable()
{
    int i=0;
    struct record *temp;
    for(i=0;i<=TABSIZ;i++)
    {
        temp=htable[i];
        while(temp!=NULL)
        {
            printf("\n%d - %s - %d\n", i,temp->name, temp->data);
            temp=temp->next;
            }
    }
}
int main(void)
{
    char buf[BUFSIZ];int value;
    struct record *item;
    do{
    printf("Enter the name of the student:\n");
    scanf("%s", buf);
    if(strcmp(buf,"stop")==0) break;
    printf("Enter the marks of the student:\n");
    scanf("%d", &value);
    if(insert(buf, value)==NULL)
    {
        break;
    }
}while((strcmp(buf,"stop"))!=0);

    printf("Enter a name to find: ");
    scanf("%s", buf);
    if((item=find(buf))!=NULL)
        printf("The marks of the student is %d\n", item->data);
    else printf("\n Not Found\n");
    printTable();
    return 0;
} 
```

现在我正在尝试删除全局变量并将局部变量用于结构数组。我删除了 htable 的全局声明，并在 main 中声明为

```
struct record *htable[TABSIZ]; 
```

并将功能更改为

```
struct record *find(struct record *htable, char *name);
struct record *insert(struct record *htable, char *name,int value); 
```

我将这些函数称为

```
find(htable, name);
insert(htable,name,value); 
```

但现在我的程序出现了段错误。我传递结构数组对吗？我是否正确声明了它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:27:26.683

我之前的回答走错了路。

当它是全局的时，它会自动初始化为 0。

当它在 main 堆栈上声明时，它没有被初始化。

添加一个`memset( htable, 0, sizeof(htable))`in `main()`，它应该返回到以前的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:22:14.167

在打印表（）中：

```
for(i=0;i<=TABSIZ;i++) 
```

看起来很可疑。你可能想要：

```
void printTable()
{
    unsigned int i;
    struct record *temp;

    for(i=0; i < TABSIZ;i++)
    {
        for (temp=htable[i]; temp!=NULL; temp=temp->next )
        {
            printf("\n%d - %s - %d\n", i,temp->name, temp->data);

        }
    }
} 
```

# android - LinearLayout 中的 android TabHost

> ID：10109547
> 
> 赞同：1
> 
> 时间：2012-04-11T15:55:28.910
> 
> 标签：android, android-tabhost

在寻找解决方案后，我决定重新[提出这里已经提出](https://stackoverflow.com/questions/3745305/android-tabhost-inside-linearlayout)的问题。

我有一个 TabHost 控件，我需要将它放在其他布局（LinearLayout）中。我收集了谷歌给我们的例子（[http://developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)），并且做了同样的事情，唯一的区别是 TabHost 不是布局的根，并且显示视图的activity类没有扩展TabActivity，而是Activity

我的xml是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabHost android:id="@+id/tabhost"
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <LinearLayout android:orientation="vertical"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:padding="5dp">
            <TabWidget android:id="@android:id/tabs"
                android:layout_width="fill_parent" android:layout_height="53px"
                android:tabStripEnabled="false" android:layout_margin="1px"
                android:background="#222222" />
            <FrameLayout android:id="@android:id/tabcontent"
                android:layout_width="fill_parent" android:layout_height="fill_parent"
                android:padding="5dp" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

java类是这样的：

```
public class TabsExampleActivity extends Activity {

    TabHost tabHost;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initTabs();

    }

    private void initTabs() {
        Resources res = getResources();                     // Resource object to get Drawables
        tabHost = (TabHost) findViewById(R.id.tabhost);     // The activity TabHost

        TabHost.TabSpec spec;                               // Resusable TabSpec for each tab
        Intent intent;                                      // Reusable Intent for each tab        

        intent = new Intent("eu.pkg.tabsExample.BuildingTabActivity");
        spec = tabHost.newTabSpec("text").setIndicator("",
                          res.getDrawable(R.drawable.tab_text_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, ClipArtTabActivity.class);
        spec = tabHost.newTabSpec("clipart").setIndicator("",
                          res.getDrawable(R.drawable.tab_clipart_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, FrameSelectorTabActivity.class);
        spec = tabHost.newTabSpec("frame").setIndicator("",
                          res.getDrawable(R.drawable.tab_frame_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, BgSelectorTabActivity.class);
        spec = tabHost.newTabSpec("bg").setIndicator("",
                          res.getDrawable(R.drawable.tab_bg_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, BuildingTabActivity.class);
        spec = tabHost.newTabSpec("build").setIndicator("",
                          res.getDrawable(R.drawable.tab_build_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(4);
    }
} 
```

如果我将 TabActivity 用作基本活动，并将 TabHost 用作 root，那么代码运行良好，我看到了选项卡......等等。

仅当我扩展 Activity 并且错误是：

> 04-11 18:53:38.874: 错误/AndroidRuntime(32539): java.lang.RuntimeException: 无法启动活动 ComponentInfo{eu.pkg.tabsExample/eu.pkg.tabsExample.TabsExampleActivity}: java.lang.NullPointerException

问题是：**如何在 LinearLayout 中托管 TabHost**？

**编辑：**

按照评论中的建议进行更改后，日志猫错误为：

> 04-11 20:52:01.993: 错误/imdg81(28747): IsShutDownStarted() 04-11 20:52:01.999: 错误/SensorManager(28747): registerListener 4:gp2a 光传感器延迟:240 04-11 20:52 ：01.999：错误/SensorManager（28747）：=======>>>传感器线程正在运行<<<======== 04-11 20：52：02.075：错误/imdg81（28747）： IsShutDownStarted() 04-11 20:52:02.284：错误/LockPatternKeyguardView(28747)：电话已启动完成。所以可以为音乐播放器发送广播消息 04-11 20:52:05.507: ERROR/jdwp(3675): 写入握手字节失败: 管道损坏 (-1 of 14) 04-11 20:52:05.609: ERROR/AndroidRuntime( 3675）：致命异常：主要 04-11 20:52:05.609：错误/AndroidRuntime（3675）：java.lang.RuntimeException：无法启动活动 ComponentInfo{eu.pkg.tabsExample/eu.pkg.tabsExample.TabsExampleActivity}： java.lang.IllegalStateException：您是否忘记调用“public void setup(LocalActivityManager activityGroup)”？04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 04-11 20:52 :05.609: ERROR/AndroidRuntime(3675): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 04-11 20:52:05.609: ERROR/AndroidRuntime(3675): at android.os.Handler。 dispatchMessage(Handler.java:99) 04-11 20:52:05.609: ERROR/AndroidRuntime(3675): at android.os.Looper.loop(Looper.java:123) 04-11 20:52:05.609: 公共无效设置（LocalActivityManager 活动组）'？04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654) 04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在android.widget.TabHost.setCurrentTab(TabHost.java:328) 04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android.widget.TabHost.addTab(TabHost.java:213) 04-11 20: 52:05.609: ERROR/AndroidRuntime(3675): at eu.pkg.tabsExample.TabsExampleActivity.initTabs(TabsExampleActivity.java:43) 04-11 20:52:05.609: ERROR/AndroidRuntime(3675): at eu.pkg.tabsExample .TabsExampleActivity.onCreate(TabsExampleActivity.java:27) 04-11 20:52:05.609: 错误/AndroidRuntime(3675): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 04-11 20:52:05.609 ：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T14:40:44.553

问题解决了。正如用户 207 在其中一个评论中给出的，来自另一个 stackoverflow 问题的正确解决方案是：

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabHost android:id="@android:id/tabhost"  
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <LinearLayout android:orientation="vertical"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:padding="5dp">
            <TabWidget android:id="@android:id/tabs"
                android:layout_width="fill_parent" android:layout_height="53px"
                android:tabStripEnabled="false" android:layout_margin="1px"
                android:background="#222222" />
            <FrameLayout android:id="@android:id/tabcontent"
                android:layout_width="fill_parent" android:layout_height="fill_parent"
                android:padding="5dp" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

和java文件：

```
package eu.pkg.tabsExample;

import android.app.Activity;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.os.Handler;
import android.widget.TabHost;

public class TabsExampleActivity extends Activity {

    TabHost tabHost;
    LocalActivityManager mLocalActivityManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initTabs(savedInstanceState);
    }

    @Override
    protected void onResume() {
        mLocalActivityManager.dispatchResume(); 
        super.onResume();
    }

    @Override
    protected void onPause() {
        mLocalActivityManager.dispatchPause(isFinishing());
        super.onPause();
    }

    private void initTabs(Bundle savedInstanceState) {
        Resources res = getResources();                     // Resource object to get Drawables
        tabHost = (TabHost) findViewById(android.R.id.tabhost);     // The activity TabHost
        mLocalActivityManager = new LocalActivityManager(this, false);
        mLocalActivityManager.dispatchCreate(savedInstanceState);
        tabHost.setup(mLocalActivityManager);

        TabHost.TabSpec spec;                               // Resusable TabSpec for each tab
        Intent intent;                                      // Reusable Intent for each tab        

        intent = new Intent("eu.pkg.tabsExample.BuildingTabActivity");
        spec = tabHost.newTabSpec("text").setIndicator("",
                          res.getDrawable(R.drawable.tab_text_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, ClipArtTabActivity.class);
        spec = tabHost.newTabSpec("clipart").setIndicator("",
                          res.getDrawable(R.drawable.tab_clipart_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, FrameSelectorTabActivity.class);
        spec = tabHost.newTabSpec("frame").setIndicator("",
                          res.getDrawable(R.drawable.tab_frame_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, BgSelectorTabActivity.class);
        spec = tabHost.newTabSpec("bg").setIndicator("",
                          res.getDrawable(R.drawable.tab_bg_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, BuildingTabActivity.class);
        spec = tabHost.newTabSpec("build").setIndicator("",
                          res.getDrawable(R.drawable.tab_build_selector))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(4);
    }
} 
```

幕后的魔力在于这 4 行代码：

```
 tabHost = (TabHost) findViewById(android.R.id.tabhost);     // The activity TabHost
    mLocalActivityManager = new LocalActivityManager(this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    tabHost.setup(mLocalActivityManager); 
```

感谢大家对此答案的贡献。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:11:12.010

[这](https://stackoverflow.com/questions/3163884/android-tabhost-without-tabactivity/5098774#5098774)将解决您的错误。

另外：我刚刚读到您想要扩展`Activity`而不是`TabActivity`因为您正在尝试实现“嵌套选项卡”。在`TabActivity`另一个`TabActivity`. 以前没有这样做过，但我没有看到任何可能出现的问题。`Activity`添加或`TabActivity`作为选项卡内容没有区别。你可以试一试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:13:03.517

更改此特定行

> TabHost android:id="@+id/tabhost"

至

> TabHost android:id="@android:id/tabhost"

**编辑**

在以下行之后添加

```
tabHost = (TabHost) findViewById(R.id.tabhost);
tabHost.setup(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:01:00.637

如果您使用 Activity 而不是扩展 TabActivity，这是解决方案

[https://stackoverflow.com/a/5098774/563306](https://stackoverflow.com/a/5098774/563306)

# caching - 部署新软件后如何刷新jquery移动多页文档

> ID：10109550
> 
> 赞同：1
> 
> 时间：2012-04-11T15:55:34.223
> 
> 标签：caching, jquery-mobile, browser-cache

我有一个 jqm 多页文档（index.html），其中包括几个页面和其他资产（js、css 等）。我将服务器配置为对 html、css 和 js 文件使用 etags。请求/响应标头已正确设置，并且按预期工作。

在使用我的应用程序期间，没有对 index.html 的请求（除了注销），因此浏览器永远没有机会查看是否有新文件，更不用说所有的 css 和js 文件（除非用户注销、再次请求页面或进行刷新）。如果我部署新软件，我如何通知用户新软件可用和/或以某种方式强制刷新 index.html 文件？

我最初的想法是将版本号存储在客户端上，并定期向服务器发出 ajax 请求以检查版本号。如果有新的 sw 可用，则显示一个链接以通知用户新的 sw 并单击该链接以获取它（重新加载 index.html）。

我很好奇其他人是怎么做到的？想法？建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T08:17:16.207

> 如果您链接到多页文档，则必须在链接上使用 data-ajax="false" 属性以导致整个页面刷新，因为上述限制我们仅加载 Ajax 请求中的第一个页面节点，因为潜在的哈希冲突. 当前有一个子页面插件，可以加载多页文档。

参考：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)

还请看这个：

> **不使用 Ajax 导航的情况**
> 
> 在某些情况下，将使用普通的 http 请求而不是 Ajax 请求。一种情况是在链接到外部网站上的页面时。您还可以通过以下链接属性指定进行正常的 http 请求：
> 
> 相对=外部
> 
> 目标（具有任何值，例如“_blank”）

如果页面加载为 http 请求而不是 Ajax，则问题将得到解决。

# javascript - 如何在已经存在的事件之前绑定事件？

> ID：10109552
> 
> 赞同：1
> 
> 时间：2012-04-11T15:55:40.463
> 
> 标签：javascript, jquery, events

`$(element).data("events")`给了我所有事件的列表`element`。考虑到*我需要绑定一个事件并在另一个已经绑定到它之前触发它*，我该如何实现呢？

我曾想过将事件转移到从 返回的列表中`$(element).data("events").myevent`，但我猜这不是正确的方法。

谢谢你。

# database - 一般来说，数据库处理交集（找到公共集）的策略是什么？

> ID：10109561
> 
> 赞同：0
> 
> 时间：2012-04-11T15:55:58.353
> 
> 标签：database, intersection

1.  RDBMS 中的布尔运算符，
    select * from table1 where table1.field1 = 'foo' and table1.field2 = 'bar'

2.  在 RDBMS 中相交，
    SELECT field2 FROM table1
    INTERSECT
    SELECT field2 FROM table2

在这两种情况下，我看到有两组，最终结果是两组的交集。

我对这些一般工作方式的猜测是
1\. 找到具有最小元素
的集合 2\. 迭代具有最小元素的集合并查看它是否包含在另一个集合中。

我问这个的原因是，当集合很大时，第 2 步似乎需要很长时间。
但我似乎找不到更好的方法。

*   编辑：删除谷歌相关示例

# php - 将表和更改日志合并到 PostgreSQL 中的视图中

> ID：10109564
> 
> 赞同：1
> 
> 时间：2012-04-11T15:56:08.630
> 
> 标签：php, postgresql, plpgsql, dynamic-sql, crosstab

我的 PostgreSQL 数据库包含一个表来存储已注册实体的实例。此表是通过电子表格上传填充的。网络界面允许操作员修改呈现的信息。但是，原始数据没有被修改。所有更改都存储在具有、和`changes`列的单独表中。`unique_id``column_name``value``updated_at`

进行更改后，首先查询原始表，然后查询更改表（使用实例 ID 和最新更改日期，按列名分组）将更改呈现给操作员。这两个结果在 PHP 中合并并呈现在 Web 界面上。这是执行任务的一种相当严格的方式，我想将所有逻辑保留在 SQL 中。

我可以使用以下查询轻松选择表的最新更改：

```
SELECT fltr_chg.unique_id, fltr_chg.column_name, chg_val.value 
FROM changes AS chg_val
JOIN ( 
      SELECT chg_rec.unique_id, chg_rec.column_name, MAX( chg_rec.updated_at )
      FROM information_schema.columns AS source
      JOIN changes AS chg_rec ON source.table_name = 'instances'
                             AND source.column_name = chg_rec.column_name
      GROUP BY chg_rec.unique_id, chg_rec.column_name
     ) AS fltr_chg ON fltr_chg.unique_id = chg_val.unique_id
                  AND fltr_chg.column_name = chg_val.column_name; 
```

从`instances`表中选择条目同样简单：

```
SELECT * FROM instances; 
```

现在，如果只有一种方法可以转换前一个结果并将结果值替换为后者，基于`unique_id`and `column_name`，并且仍然将结果保留为表格，那么问题将得到解决。这可能吗？

我确信这不是最罕见的问题，而且很可能，某些系统确实以类似的方式跟踪数据的更改。如果不通过上述方式之一（当前和寻求的解决方案），他们如何将它们应用回数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:58:14.267

假设 Postgres **9.1**或更高版本。
我简化/优化了您的基本查询以检索最新值：

```
SELECT DISTINCT ON (1,2)
       c.unique_id, a.attname AS col, c.value
FROM   pg_attribute a
LEFT   JOIN changes c ON c.column_name = a.attname
                     AND c.table_name  = 'instances'
                 --  AND c.unique_id   = 3  -- uncomment to fetch single row
WHERE  a.attrelid = 'instances'::regclass   -- schema-qualify to be clear?
AND    a.attnum > 0                         -- no system columns
AND    NOT a.attisdropped                   -- no deleted columns
ORDER  BY 1, 2, c.updated_at DESC; 
```

我查询 PostgreSQL 目录而不是标准信息模式，因为这样更快。注意特殊转换为[`::regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html).

现在，这给了你一张**桌子**。**您需要连续**`unique_id`一个的所有值。 要实现这一点，您基本上有三个选择：

 **1.  每列一个子选择（或连接）。昂贵且笨重。但仅适用于几列的有效选项。

2.  一个大`CASE`声明。

3.  一个**枢轴函数**。PostgreSQL为此[`crosstab()`在附加模块`tablefunc`](http://www.postgresql.org/docs/current/interactive/tablefunc.html)中提供了该功能。
    基本说明：

    *   [PostgreSQL 交叉表查询](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)

### 基本数据透视表`crosstab()`

我完全重写了函数：

```
SELECT *
FROM   crosstab(
    $x$
    SELECT DISTINCT ON (1, 2)
           unique_id, column_name, value
    FROM   changes
    WHERE  table_name = 'instances'
 -- AND    unique_id = 3  -- un-comment to fetch single row
    ORDER  BY 1, 2, updated_at DESC;
    $x$,

    $y$
    SELECT attname
    FROM   pg_catalog.pg_attribute
    WHERE  attrelid = 'instances'::regclass  -- possibly schema-qualify table name
    AND    attnum > 0
    AND    NOT attisdropped
    AND    attname <> 'unique_id'
    ORDER  BY attnum
    $y$
    )
AS tbl (
 unique_id integer
-- !!! You have to list all columns in order here !!! --
); 
```

我将目录查找与值查询分开，因为`crosstab()`具有两个参数的函数分别提供列名。缺失值（更改中没有条目）将自动替换为`NULL`。***这个用例的完美匹配！***

假设`attname`匹配`column_name`. 排除`unique_id`，它起着特殊的作用。

## 全自动化

解决[您的评论](https://stackoverflow.com/questions/10109564/merge-a-table-and-a-change-log-into-a-view-in-postgresql/10110519#comment12959689_10110519)：**有一种方法**可以自动提供列定义列表。不过，这不适合胆小的人。

我在这里使用了许多高级 Postgres 功能：`crosstab()`plpgsql 函数与动态 SQL、复合类型处理、高级美元引用、目录查找、聚合函数、窗口函数、对象标识符类型……

测试环境：

```
CREATE TABLE instances (
  unique_id int
, col1      text
, col2      text -- two columns are enough for the demo
);

INSERT INTO instances VALUES
  (1, 'foo1', 'bar1')
, (2, 'foo2', 'bar2')
, (3, 'foo3', 'bar3')
, (4, 'foo4', 'bar4');

CREATE TABLE changes (
  unique_id   int
, table_name  text
, column_name text
, value       text
, updated_at  timestamp
);

INSERT INTO changes VALUES
  (1, 'instances', 'col1', 'foo11', '2012-04-12 00:01')
, (1, 'instances', 'col1', 'foo12', '2012-04-12 00:02')
, (1, 'instances', 'col1', 'foo1x', '2012-04-12 00:03')
, (1, 'instances', 'col2', 'bar11', '2012-04-12 00:11')
, (1, 'instances', 'col2', 'bar17', '2012-04-12 00:12')
, (1, 'instances', 'col2', 'bar1x', '2012-04-12 00:13')

, (2, 'instances', 'col1', 'foo2x', '2012-04-12 00:01')
, (2, 'instances', 'col2', 'bar2x', '2012-04-12 00:13')

 -- NO change for col1 of row 3 - to test NULLs
, (3, 'instances', 'col2', 'bar3x', '2012-04-12 00:13');

 -- NO changes at all for row 4 - to test NULLs 
```

### *一张桌子*的自动化功能

 *```
CREATE OR REPLACE FUNCTION f_curr_instance(int, OUT t public.instances) AS
$func$
BEGIN
   EXECUTE $f$
   SELECT *
   FROM   crosstab($x$
      SELECT DISTINCT ON (1,2)
             unique_id, column_name, value
      FROM   changes
      WHERE  table_name = 'instances'
      AND    unique_id =  $f$ || $1 || $f$
      ORDER  BY 1, 2, updated_at DESC;
      $x$
    , $y$
      SELECT attname
      FROM   pg_catalog.pg_attribute
      WHERE  attrelid = 'public.instances'::regclass
      AND    attnum > 0
      AND    NOT attisdropped
      AND    attname <> 'unique_id'
      ORDER  BY attnum
      $y$) AS tbl ($f$
   || (SELECT string_agg(attname || ' ' || atttypid::regtype::text
                       , ', ' ORDER BY attnum) -- must be in order
       FROM   pg_catalog.pg_attribute
       WHERE  attrelid = 'public.instances'::regclass
       AND    attnum > 0
       AND    NOT attisdropped)
   || ')'
   INTO t;
END
$func$  LANGUAGE plpgsql; 
```

该表`instances`是硬编码的，模式有资格明确。请注意使用表类型作为返回类型。PostgreSQL 中的每个表都有一个自动注册的行类型。这必然与函数的返回类型相匹配`crosstab()`。

这将函数绑定到表的类型：

*   如果您尝试`DROP`上桌，您将收到一条错误消息
*   您的功能将在`ALTER TABLE`. 您必须重新创建它（无需更改）。我认为这是 9.1 中的错误。`ALTER TABLE`不应该默默地破坏函数，而是引发错误。

这表现非常好。

称呼：

```
SELECT * FROM f_curr_instance(3);

unique_id | col1  | col2
----------+-------+-----
 3        |<NULL> | bar3x 
```

请注意`col1`这里的情况`NULL`。
在查询中使用以显示具有最新值的实例：

```
SELECT i.unique_id
     , COALESCE(c.col1, i.col1)
     , COALESCE(c.col2, i.col2)
FROM   instances i
LEFT   JOIN f_curr_instance(3) c USING (unique_id)
WHERE  i.unique_id = 3; 
```

### *任何桌子*的完全自动化

 *（2016 年添加。这是炸药。）
需要 Postgres **9.1**或更高版本。（可以使用 pg 8.4，但我没有费心去回补丁。）

```
CREATE OR REPLACE FUNCTION f_curr_instance(_id int, INOUT _t ANYELEMENT) AS
$func$
DECLARE
   _type text := pg_typeof(_t);
BEGIN
   EXECUTE
   (
   SELECT format
         ($f$
         SELECT *
         FROM   crosstab(
            $x$
            SELECT DISTINCT ON (1,2)
                   unique_id, column_name, value
            FROM   changes
            WHERE  table_name = %1$L
            AND    unique_id  = %2$s
            ORDER  BY 1, 2, updated_at DESC;
            $x$    
          , $y$
            SELECT attname
            FROM   pg_catalog.pg_attribute
            WHERE  attrelid = %1$L::regclass
            AND    attnum > 0
            AND    NOT attisdropped
            AND    attname <> 'unique_id'
            ORDER  BY attnum
            $y$) AS ct (%3$s)
         $f$
          , _type, _id
          , string_agg(attname || ' ' || atttypid::regtype::text
                     , ', ' ORDER BY attnum)  -- must be in order
         )
   FROM   pg_catalog.pg_attribute
   WHERE  attrelid = _type::regclass
   AND    attnum > 0
   AND    NOT attisdropped
   )
   INTO _t;
END
$func$  LANGUAGE plpgsql; 
```

调用（提供表类型`NULL::public.instances`：

```
SELECT * FROM f_curr_instance(3, NULL::public.instances); 
```

有关的：

*   [重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries/11751557#11751557)
*   [如何使用动态 SQL 设置复合变量字段的值](https://stackoverflow.com/questions/7711432/how-to-set-value-of-composite-variable-field-using-dynamic-sql)****

# python - While 语句在应该停止的时候没有停止

> ID：10109565
> 
> 赞同：1
> 
> 时间：2012-04-11T15:56:09.627
> 
> 标签：python, while-loop

这是我在此的头一篇博文。我是 Python 和一般编程的新手，所以我不确定我哪里出错了。这是我在 Project Euler 上针对问题 #52 提出的解决方案（我知道这也可能不是最好的方法）。我对这段代码的问题是 while 语句在得到正确答案时不会中断。只有当我以正确答案开始 num 时，它才会抓住它并给我答案：142857，但是当我用其他任何东西初始化它时，它会继续计数超过 142857。奇怪的是我使用了相同的确切方法来回答另一个欧拉问题，那个工作得很好。谁能告诉我为什么会在这里发生？谢谢！

```
def digits(number):
    return [int(x) for x in str(number)]

def same_digits():
    num = 1
    x2 = sorted(digits(num*2))
    x3 = sorted(digits(num*3))
    x4 = sorted(digits(num*4))
    x5 = sorted(digits(num*5))
    x6 = sorted(digits(num*6))

    while x2 != x3 != x4 != x5 != x6:
        num += 1
    print num 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:59:20.127

变量`x2`等在循环内不会更改，因此它们将始终保持其初始值。如果您希望在`num`更改时重新计算它们的值，则需要将该代码移动到循环中。

此外，您在此处使用比较运算符链接。表达方式

```
x2 != x3 != x4 != x5 != x6 
```

相当于

```
x2 != x3 and x3 != x4 and x4 != x5 and x5 != x6 
```

这可能不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:59:06.713

`while`循环永远不会中断，因为它们的`x2,x3,x4,x5,x6`值都相同。只有`num`循环中的变化。

此外，`x2 != x3 != x4 != x5 != x6`看起来很腥。要检查所有数字是否不同，请尝试：

```
len(set([x2,x3,x4,x5,x6])) != 5 
```

仅采用`set`唯一值并`len`计算此“集合”的大小。最好把它们放在一个列表中，比如说`R`，这变成：

```
len(set(R)) != 5 
```

当您的列表包含多个`5`元素时非常方便！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:59:14.363

您没有修改`xi`while 循环中的任何参数，因此比较永远不会改变。

# javascript - JQuery :has()，我只需要选择孩子

> ID：10109567
> 
> 赞同：0
> 
> 时间：2012-04-11T15:56:17.440
> 
> 标签：javascript, jquery, jquery-selectors, hierarchical-data

我有一些使用 JQuery 操作的分层数据，并且我正在尝试添加某种类型的视觉指示，以指示选择了我的树中的哪些元素。这是我正在生成的 html 示例（我们正在对其进行操作）：

```
<li>
    <input class="selectedcheck" checked disabled type="checkbox" name="ign-130">
    <input class="millermultiselect" type="checkbox" name="chk-130">
    <a href="#" data-parent="6" data-nodename="Egypt" data-self="130">Egypt</a>
    <ul>
          <li>
                <input class="selectedcheck" checked disabled type="checkbox" name="ign-131">
                <input class="millermultiselect" type="checkbox" name="chk-131">
                <a href="#" data-parent="130" data-nodename="Cairo" data-self="131">Cairo</a>
          </li>
    </ul>
</li> 
```

所有这些都位于 div#miller 中。第一个复选框 (.selectedcheck) 仅用于显示选择了一个区域（它一开始是隐藏的，并在选择父区域时显示，因此如果您在埃及单击 .millermultiselect，在开罗单击 .selectedcheck将取代开罗的 .millermultiselect 变得可见）。我想做的也是向任何包含（作为直接子项）选中复选框的 li 添加一个类。我正在尝试使用以下 JQuery 代码来完成此操作：

```
$("#miller li:has(input:checkbox:checked:visible)").addClass('chosen'); 
```

我遇到的问题是，由于所有区域都由嵌套的 ul 组成，因此选中任何区域中的复选框也会将 .chosen 添加到树中更高的任何 li ......因此单击 Cairo 的复选框会添加 .选择了埃及和非洲的班级。

任何人都知道我将如何仅捕获具有可见且选中复选框的 li 作为直接孩子？

这是我的整个 js 文件，以防万一它提供洞察力：

```
$(document).ready(function() {
    $(".selectedcheck").hide();
    showSelected = function(){
        $("#miller li").removeClass("chosen");
        $("#miller li:has(input:checkbox:checked:visible)").addClass('chosen');
    };
    $("#miller a").click(function(event) {
        event.preventDefault();
        $("#miller li").removeClass("selected");
        $(this).parent().addClass("selected");
        data = $(this).data();
        $("#addChild").attr("href", "addChild.php?parentid=" + data.self).html("Add item under " + data.nodename);
        $("#addSibling").attr("href", "addChild.php?parentid=" + data.parent).html("Add item next to " + data.nodename);
        $("#editRegion").attr("href", "editRegion.php?id=" + data.self).html("Edit " + data.nodename);
        $("#deleteRegion").attr("href", "deleteRegion.php?id=" + data.self).html("Delete " + data.nodename);
        $("#addResort").attr("href", "addResort.php?regionid=" + data.self).html("Add resort to " + data.nodename);
        $("#miller ul ul").hide();
        $(this).parents("#miller ul").show();
        $(this).siblings("#miller ul").show();
        showSelected();
    });
    $("#miller .millermultiselect").click(function(event) {
        $("#miller li").removeClass("selected");
        $(this).parent().addClass("selected");
        $("#miller ul ul").hide();
        $(this).parents("#miller ul").show();
        if($(this).is(':checked')) {
            $(this).parent().find(".millermultiselect").not(this).hide();
            $(this).parent().find(".millermultiselect").not(this).removeAttr("checked");
            $(this).parent().find(".selectedcheck").show();
        } else {
            $(this).parent().find(".millermultiselect").not(this).show();
            $(this).parent().find(".selectedcheck").hide();
        }
        $(this).siblings(".selectedcheck").hide();
        $(this).siblings("#miller ul").show();
        showSelected();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:00:16.890

您可以使用直接后代选择器，然后获取它的父级：

```
$("#miller li > input:checkbox:checked:visible").parent().addClass("chosen"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:03:49.973

> 我将如何仅捕获具有可见且已选中复选框的 li 作为直接子级？

怎么扭转问题？

```
$('input:checkbox').is(':visible').is(':checked').parent('li') 
```

# iphone - UIWebView 的网络可达性

> ID：10109571
> 
> 赞同：2
> 
> 时间：2012-04-11T15:56:33.263
> 
> 标签：iphone, xcode, networking, app-store

我刚刚完成了我的第一个应用程序，它是我的网络应用程序的全屏视图。它工作正常，我正要提交它，但我注意到苹果需要网络可达性。我已经尝试了很多方法来做到这一点，包括网络座位和查找 UIWebViews 错误，但都没有奏效。如果有人可以给我一个工作教程的链接或向我解释这一点，将不胜感激......谢谢！顺便说一句-我正在使用单视图应用程序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T19:02:18.137

我在没有可达性的情况下将应用程序上传到了商店，但后来我在 Apple 文档上读到，当没有连接到互联网时需要向用户发送消息（但是我的应用程序已获得批准）。我认为 Apple 对此并没有那么严格，但在出现问题时向用户提供一些反馈是一种很好的编程习惯。

因此，我强烈建议您在项目中使用可达性。

这是 Apple 示例代码：http: [//developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

如果你使用上面的代码，你可以实现这样的东西：

```
//Check connection
Reachability *r = [Reachability reachabilityWithHostName:@"m.google.com"];
NetworkStatus internetStatus = [r currentReachabilityStatus];
if(internetStatus == NotReachable){

    NSLog(@"There's no connection");

    UIAlertView *errorAlertView = [[UIAlertView alloc]
                 initWithTitle:@"No internet connection"
                 message:@"Internet connection is required to use this app"
                 delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [errorAlertView show];

}else
    NSLog(@"Internet connection is OK"); 
```

记得导入 Rechability 文件

```
#import "Reachability.h" 
```

如果您正在使用新的 ARC 功能进行开发，这里是 Reachability 的修改版本：[https](https://github.com/tonymillion/Reachability) ://github.com/tonymillion/Reachability （该页面提供了很好的示例代码）

这两个版本我都用过，而且效果很好。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:26:15.370

苹果有一些可达性[示例代码](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

根据我的经验，可达性是一种很好的做法，但我不知道它是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:39:32.227

Apple 本身并不要求可达性。但是，它们确实要求您的应用程序保持响应并执行合理的操作，即使网络不可用、无法正常工作或出现故障也是如此。

因此，在飞行模式下测试您的应用程序，也可能在 WIFI 模式下测试您的 WIFI 接入点背面的电缆。如果您的应用程序的用户界面锁定或看起来死机，请修复它。

# garbage-collection - Hadoop .20 数据节点上的“超出 GC 开销限制”

> ID：10109572
> 
> 赞同：9
> 
> 时间：2012-04-11T15:56:33.567
> 
> 标签：garbage-collection, hadoop

我已经搜索并没有找到很多与 Hadoop Datanode 进程因超过 GC 开销限制而死亡相关的信息，所以我想我会发布一个问题。

我们正在运行一个测试，我们需要确认我们的 Hadoop 集群可以处理存储在其上的大约 300 万个文件（目前是一个 4 节点集群）。我们使用的是 64 位 JVM，我们已经为 namenode 分配了 8g。但是，当我的测试程序向 DFS 写入更多文件时，数据节点开始因以下错误而死亡：线程“DataNode：[/var/hadoop/data/hadoop/data]”中的异常 java.lang.OutOfMemoryError：超出 GC 开销限制

我看到了一些关于一些选项的帖子（并行 GC？）我想可以在 hadoop-env.sh 中设置，但我不太确定语法而且我是一个新手，所以我不太了解它是如何完成的。感谢您在这里的任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T20:09:17.077

尝试通过使用这个来增加datanode的内存：（需要重启hadoop才能工作）

```
export HADOOP_DATANODE_OPTS="-Xmx10g" 
```

这会将堆设置为 10gb ...您可以根据需要增加。

您也可以将其粘贴到`$HADOOP_CONF_DIR/hadoop-env.sh`文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T14:07:21.373

如果您从命令行运行 map reduce 作业，您可以使用参数`-D 'mapreduce.map.java.opts=-Xmx1024m'`和/或 -D 'mapreduce.reduce.java.opts=-Xmx1024m' 来增加堆。例子：

```
hadoop --config /etc/hadoop/conf jar /usr/lib/hbase-solr/tools/hbase-indexer-mr-*-job.jar --conf /etc/hbase/conf/hbase-site.xml -D 'mapreduce.map.java.opts=-Xmx1024m' --hbase-indexer-file $HOME/morphline-hbase-mapper.xml --zk-host 127.0.0.1/solr --collection hbase-collection1 --go-live --log4j /home/cloudera/morphlines/log4j.properties 
```

请注意，在某些 Cloudera 文档中，它们仍然使用旧参数`mapred.child.java.opts`,`mapred.map.child.java.opts`和`mapred.reduce.child.java.opts`. 这些参数不再适用于 Hadoop 2（请参阅[What is the relationship between 'mapreduce.map.memory.mb' and 'mapred.map.child.java.opts' in Apache Hadoop YARN?](https://stackoverflow.com/questions/24070557/what-is-the-relation-between-mapreduce-map-memory-mb-and-mapred-map-child-jav)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-24T02:00:54.363

这篇[文章](https://stackoverflow.com/questions/33341515/hadoop-streaming-gc-overhead-limit-exceeded/33343011#33343011)为我解决了这个问题。

因此，关键是“*预先设置该环境变量*”（第一次看到这个 linux 命令语法 :)）

```
HADOOP_CLIENT_OPTS="-Xmx10g" hadoop jar "your.jar" "source.dir" "target.dir" 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-11T19:09:00.427

GC 开销限制表明您的（小）堆已满。

当您处理大量数据时，这就是 MapReduce 操作中经常发生的情况。尝试这个：

```
< property >

  < name > mapred.child.java.opts < /name >

   < value > -Xmx1024m -XX:-UseGCOverheadLimit < /value >

< /property > 
```

另外，请尝试以下操作：

使用组合器，reducer 获取的列表不应超过 map 数量的一小部分

同时，您可以从 OOME 生成堆转储并使用 YourKit 等进行分析并对其进行分析

# macos - 访问 bash 数组键 (mac)

> ID：10109575
> 
> 赞同：2
> 
> 时间：2012-04-11T15:56:50.490
> 
> 标签：macos, bash, unix

出于某种原因，我无法使用感叹号语法访问数组键：

```
declare -a sites
sites=(["fr"]="frederick" ["an"]="annapolis")

for i in "${!sites[@]}"
  do
    echo "key: $i "
  done 
```

这只是回显“key：0”

我在这里做错了什么？

另外，我想添加价值。

所以我们的看跌期权是：

键：fr，值：弗雷德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-03T20:34:18.620

它*可以*在旧的 bash 版本中完成。

在旧版本的 bash 中，您可以使用整个环境变量集来实现关联数组（也称为哈希）

```
export HASH_PREFIX="I_AM_A_HASH"

hash-set() {
    HASH_NAME="$1" ; shift
    HASH_KEY="$1"  ; shift
    HASH_VAL="$1"  ; shift
    eval "export ${HASH_PREFIX}_${HASH_NAME}_KEY_${HASH_KEY}='$HASH_VAL'"
}
hash-get() {
    HASH_NAME="$1" ; shift
    HASH_KEY="$1"  ; shift
    eval "echo \"\$${HASH_PREFIX}_${HASH_NAME}_KEY_${HASH_KEY}\""
}
hash-keys() {
    HASH_NAME="$1" ; shift
    HASH_PREFIX_NAME_LENGTH=$(( ${#HASH_PREFIX} + ${#HASH_NAME} + 6 ))
    declare -x | while read -r LINE_READ ; do
        LINE_READ="${LINE_READ:11}"
        if [   x"${LINE_READ:0:HASH_PREFIX_NAME_LENGTH}" \
             = x"${HASH_PREFIX}_${HASH_NAME}_KEY_" \
           ]
        then
            LINE_READ="${LINE_READ:HASH_PREFIX_NAME_LENGTH}"
            LINE_READ="${LINE_READ/=*/}"
           echo "${LINE_READ}"
        fi
    done
}

hash-set sites "fr" "frederick"
hash-set sites "an" "annapolis"

for i in $(hash-keys sites) ; do
    echo "key: $i, value: $(hash-get sites $i)"
done 
```

键被限制为与环境变量相同的字符（0-9、az、AZ、_）。

您可以使用“_xx”来表示非字母数字 ascii 值（例如“_5f”表示“_”，“_3f”表示“?”）。Rosettacode 有如何在纯 bash 中在 ascii 字符和十六进制之间来回转换。

同样在 mac 笔记本电脑上，您可以安装自制软件，然后使用它来安装更新的 bash。您还可以在 awk 或 perl 或 ruby​​ 或 python 中使用完整的关联数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T16:05:59.027

问题是`declare -a`。

根据手册页，它应该是`declare -A`.

```
declare [-aAfFgilrtux] [-p] [name[=value] ...]
    ...
    -a     Each name is an indexed array variable (see Arrays above).
    -A     Each name is an associative array variable (see Arrays above). 
```

试试这个：

```
declare -A sites
sites=(["fr"]="frederick" ["an"]="annapolis")

for i in "${!sites[@]}"
  do
    echo "key: $i, value: ${sites[$i]}"
  done 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-05T18:56:21.337

我认为这可能是缺乏大写的阻碍......

```
declare -A _sites=( ["fr"]="frederick" ["an"]="annapolis" )

for i in "${!_sites[@]}"; do
    printf '%s -> %s\n' "${i}" "${_sites[$i]}"
done 
```

* * *

有助于整理上述内容的资源不限于以下内容；

*   [@anubhava](https://stackoverflow.com/a/28179520/2632107)关于`declare -A`使用的回答

*   [@lhunath](https://stackoverflow.com/a/3467959/2632107)的答案还涵盖了 Bash 版本`3`或更低版本的解决方法。

> *在阅读了其他发布的答案的评论后，我认为如果卡在由于某些原因*无法更新的旧版 Bash 中，您会想要最后列出的答案的解决方法。

* * *

[@Fenn](https://stackoverflow.com/a/55976763/2632107)还有一些注意事项...

```
hash-set() {
    HASH_NAME="$1" ; shift
    HASH_KEY="$1"  ; shift
    HASH_VAL="$1"  ; shift
    eval "export ${HASH_PREFIX}_${HASH_NAME}_KEY_${HASH_KEY}='$HASH_VAL'"
} 
```

...没有`shift`ing, or `eval`, 并且带有必需的参数可能看起来像...

```
hash_set(){
    local _name="${1:?${FUNCNAME[0]} not provided a Hash Name}"
    local _key="${2:?${FUNCNAME[0]} not provided a Hash Key}"
    local _value="${3:?${FUNCNAME[0]} not provided a Value}"
    declare -g "${HASH_PREFIX}_${_name}_KEY_${_key}='${_value}'"
} 
```

...希望这对于将答案转化为可以投票的东西更有帮助。

# ssrs-2008 - 通过 SSRS 参数输入的文本，包括字段名称

> ID：10109576
> 
> 赞同：3
> 
> 时间：2012-04-11T15:56:57.147
> 
> 标签：ssrs-2008, reporting-services

我有一个 SSRS“语句”类型的报告，它具有文本框和表格的一般布局。对于主文本框，我想让用户将值作为参数提供，以便可以自定义文本，即

```
Parameters!MainText.Value = "Dear Mr.Doe, Here is your statement." 
```

然后我可以将文本框的值设置为参数的值：

```
=Parameters!MainText.Value 
```

但是，我需要能够允许传入的参数值包含数据集字段，如下所示：

```
Parameters!MainText.Value = "Dear Mr.Doe, Here is your [Fields!RunDate.Value] statement" 
```

这样我的报告输出将如下所示：

“亲爱的 Doe 先生，这是您 11 月的声明。”

我知道您可以通过提供静态文本和字段请求在文本框中定义它来执行此操作，但我需要 SSRS 来识别***参数***字符串内部有一个需要转义和绑定的字段请求。

有没有人对此有任何想法？我正在使用 SSRS 2008R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:16:37.517

你试过串联吗？

参数！MainText.Value = "亲爱的 Mr.Doe，这是你的" & [Fields!RunDate.Value] & "声明"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:12:23.967

有几种截然不同的方法。要知道哪个最适合您，需要更多信息：

1.  **报告中的嵌入代码。**最快的实现可能是在返回参数的报告中嵌入代码，但`String.Replace()`适当地调用以替换动态值。您需要为将替换字符串的用户建立一些代码。嵌入式代码将使您能够访问报告中的许多对象。例如：

    ```
    Public Function TestGlobals(ByVal s As String) As String
       Return Report.Globals.ExecutionTime.ToString
    End Function 
    ```

    将返回执行时间。此处显示了访问报告参数的其他方法[。](http://msdn.microsoft.com/en-us/library/ms155798%28v=sql.100%29.aspx)

    1.5**如果这个函数变得非常大，请考虑使用自定义程序集。**然后您可以使用 Visual Studio 获得更好的创作体验

2.  **修改 XML。**根据您使用它的位置，您可以直接修改 .rdl/.rdlc XML。

3.  **考虑其他工具，**例如 ReportBuilder。如果您需要为用户提供更多报告创作的灵活性，有许多专门为此目的而构建的工具，例如 SSRS 的 Report Builder。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T22:14:03.377

这是另一种方法：**显示已填充数据集值的参数字符串。**

为此：例如，创建一个名为 RunDate 的参数并将默认值设置为“从查询中获取值”并选择第一个数据集和值字段 (RunDate)。现在该参数将保存 RunDate 字段，您可以在其他地方使用它。将此参数设置为隐藏或内部并设置正确的数据类型。例如日期/时间，以便您稍后可以格式化它的值。

现在创建第二个参数，它将保存您想要的默认文本：

```
Parameters!MainText.Value = "Dear Mr.Doe, Here is your [Parameters!RunDate.Value] statement" 
```

不确定这种语法是否有效，但你明白了。您也可以在此处进行格式化，例如仅日期时间的月份：

```
="Dear Mr.Doe, Here is your " & Format(Parameters!RunDate.Value, "MMMM") & " statement" 
```

这种方法仅使用内置方法，并且不需要解析器，因此用户不必学习它的语法。

当然有一个缺点：用户可以完全控制参数内容，并且可以提供与报告内容不匹配的值 - 但字符串替换方法也是如此。

为了完整起见，还有一个**简单的选项：附加多个参数**：创建两个名为 MainTextBeforeRunDate 和 MainTextAfterRunDate 的参数。

文本框值表达式变为：

```
=Parameters!MainTextBeforeRunDate.Value & Fields!RunDate.Value & Parameters!MainTextAfterRunDate.Value. 
```

这应该解释自己。最简单的解决方案通常是最好的，但在这种情况下，我有疑问。至少这可以确保您的 RunDate 最终出现在最终报告文本中。

# objective-c - 调度队列如何工作

> ID：10109577
> 
> 赞同：8
> 
> 时间：2012-04-11T15:57:01.723
> 
> 标签：objective-c, grand-central-dispatch

我在这里有点困惑，我使用队列，我到了一个我有点迷失的地步。

我有一个名为`getPeople`who has to fetch 来自服务器的用户图片的方法。为了不阻止我使用的应用程序：

```
 -(IBAction)seeMorePeople{
        dispatch_queue_t getPeopleQueue = dispatch_queue_create("Pinta Ocupantes", NULL);
        dispatch_async(getPeopleQueue, ^{
           [self getPeople];
        });
       dispatch_release(getPeopleQueue);
 } 
```

每次用户点击按钮时都会执行前面的代码。诸如“给我这张专辑中的照片”之类的内容，然后再次点击“现在我想要其他专辑中的人们的照片”，不同的照片和不同数量的照片。如果用户非常快地点击按钮，当第二个队列已经开始时，第一个队列不会完成获取数据。我将数据存储在`getPeople`NSMutableArray 中，因此当 2 个队列同时执行时，它们都在同一个数组上写入，并且应用程序由于超出范围异常而崩溃。通过数据的方式`getPeople`是这样的：

```
-(void)getPeople:(NSDictionary *)peopleDictionary{
    //I receive an NSDictionary and I go through it
    NSArray *keys = [peopleDictionary allKeys];
    int indexOfArray = 0;
    for(NSString *key in keys){
         //Complex operation that are not important
         [peopleInArray insertObjetAtIndex:indexOfArray];//People in array is a global variable
         indexOfArray++;
    }
} 
```

我不知道如何摆脱这种情况，我想在第二个队列进来时停止第一个队列，但是 GCD 没有这个选项......任何其他方式来完成这个，希望没有专业重新编码，无论如何现在我没有想法，所以任何线索都会有所帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T17:17:20.097

如果可能，我建议您避免与信号量同步。GCD 的设计就是为了避免这种情况。后台任务应该准备数据，但不能触及外部状态。准备好数据后，它应该将外部状态的更新分派到串行队列，或者如果状态绑定到 GUI，则分派到主队列。

所以，像这样：

```
-(void)getPeople:(NSDictionary *)peopleDictionary{
    //I receive an NSDictionary and I go through it
    NSArray *keys = [peopleDictionary allKeys];
    for(NSString *key in keys){
         //Complex operation that are not important
         dispatch_async(dispatch_get_main_queue(), ^{
             [peopleInArray addObject:<whatever>];
         });
    }
} 
```

如果您想替换数组，而不是让两个线程以交错方式添加到它，您可以在后台累积整个数组并将整个数组调度`peopleInArray`到主队列。

如果你想取消，你可以用一个标志自己实现它，或者你应该考虑使用`NSOperation`and`NSOperationQueue`而不是 GCD。这些具有内置的取消概念，尽管您的自定义操作仍需要检查它们是否已被取消并停止工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:06:43.053

你是对的，没有办法停止已调度的队列。`getPeople`您可以做的一件事是使用[信号量](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/synchronization/synchronization.html)来确保同时只有一个队列正在访问（[这可能更有趣](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocThreading.html)）。

如果您只是想避免用户多次单击按钮，您可以使用在异步调度`stillExecuting`中设置为的 bool 变量，并在. 在创建之前，您只需检查是否仍在执行。`YES``NO``getPeople``getPeopleQueue``getPeople`

```
if(!stillExecuting) {
       dispatch_queue_t getPeopleQueue = dispatch_queue_create("Pinta Ocupantes", NULL);
        dispatch_async(getPeopleQueue, ^{
           [self getPeople];
        });
       dispatch_release(getPeopleQueue);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-18T08:29:36.643

NSString *lastLoginTime =@"您上次登录时间";

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate* date1 = [dateFormat lastLoginTime];
    NSDate* date2 = [dateFormat dateFromString:[NSString currentDateTime]];
    NSTimeInterval secondsSinceLastLogin = [date2 timeIntervalSinceDate:date1];
    //  NSLog(@"Seconds Since Last Login: %g", secondsSinceLastLogin);
    int hours = (int)secondsSinceLastLogin / 3600; 
```

# scala - 我怎样才能使这种方法更具Scalalicious

> ID：10109578
> 
> 赞同：3
> 
> 时间：2012-04-11T15:57:02.943
> 
> 标签：scala, recursion, idioms

我有一个函数可以计算给定一个简单的 node.id、node.parentId 关联的某些 treeNodes 集合的左右节点值。它非常简单并且效果很好......但是，我想知道是否有更惯用的方法。具体来说，有一种方法可以在不使用一些外部跟踪值的情况下跟踪左/右值，但仍然保持美味的递归。

```
/* 
 * A tree node
 */
case class TreeNode(val id:String, val parentId: String){
    var left: Int = 0
    var right: Int = 0
}

/* 
 * a method to compute the left/right node values 
 */
def walktree(node: TreeNode) = {
    /* 
     * increment state for the inner function 
     */
    var c = 0

    /*
     * A method to set the increment state
     */
    def increment = { c+=1; c } // poo

    /* 
     * the tasty inner method
     * treeNodes is a List[TreeNode]
     */
    def walk(node: TreeNode): Unit = {
      node.left = increment

      /* 
       * recurse on all direct descendants 
       */
      treeNodes filter( _.parentId == node.id) foreach (walk(_))

      node.right = increment
    }

    walk(node)
}

walktree(someRootNode) 
```

编辑 - 节点列表取自数据库。将节点拉入适当的树会花费太多时间。我正在将一个平面列表拉入内存，我所拥有的只是通过节点 ID 与父母和孩子相关的关联。

添加左/右节点值允许我通过单个 SQL 查询获得所有子节点（和子节点的子节点）的快照商店。

如果父子关联发生变化（它们经常发生变化），计算需要非常快速地运行以保持数据完整性。

除了使用很棒的 Scala 集合之外，我还通过对树节点上的一些前/后过滤使用并行处理来提高速度。我想找到一种更惯用的方法来跟踪左/右节点值。在查看@dhg 的答案后，它变得更好了。使用 groupBy 而不是过滤器将算法（主要是？）变成线性的而不是二次的！

```
val treeNodeMap = treeNodes.groupBy(_.parentId).withDefaultValue(Nil)

def walktree(node: TreeNode) = {
    def walk(node: TreeNode, counter: Int): Int = {
        node.left = counter 
        node.right = 
          treeNodeMap(node.id) 
          .foldLeft(counter+1) {
            (result, curnode) => walk(curnode, result) + 1
        }
        node.right
    }
    walk(node,1)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:22:02.990

您的代码似乎正在计算按顺序遍历编号。

我认为你想让你的代码更好的是一个`fold`向下传递当前值并向上传递更新值的方法。`treeNodes.groupBy(_.parentId)`请注意，做一个before`walktree`以防止您在`treeNodes.filter(...)`每次调用时都调用它也可能是值得的`walk`。

```
val treeNodes = List(TreeNode("1","0"),TreeNode("2","1"),TreeNode("3","1"))

val treeNodeMap = treeNodes.groupBy(_.parentId).withDefaultValue(Nil)

def walktree2(node: TreeNode) = {
  def walk(node: TreeNode, c: Int): Int = {
    node.left = c
    val newC = 
      treeNodeMap(node.id)         // get the children without filtering
        .foldLeft(c+1)((c, child) => walk(child, c) + 1)
    node.right = newC
    newC
  }

  walk(node, 1)
} 
```

它产生相同的结果：

```
scala> walktree2(TreeNode("0","-1"))
scala> treeNodes.map(n => "(%s,%s)".format(n.left,n.right))
res32: List[String] = List((2,7), (3,4), (5,6)) 
```

* * *

也就是说，我将完全重写您的代码，如下所示：

```
case class TreeNode(        // class is now immutable; `walktree` returns a new tree
  id: String,
  value: Int,               // value to be set during `walktree` 
  left: Option[TreeNode],   // recursively-defined structure
  right: Option[TreeNode])  //   makes traversal much simpler

def walktree(node: TreeNode) = {
  def walk(nodeOption: Option[TreeNode], c: Int): (Option[TreeNode], Int) = {
    nodeOption match {
      case None => (None, c)  // if this child doesn't exist, do nothing
      case Some(node) =>      // if this child exists, recursively walk
        val (newLeft, cLeft) = walk(node.left, c)        // walk the left side
        val newC = cLeft + 1                             // update the value
        val (newRight, cRight) = walk(node.right, newC)  // walk the right side
        (Some(TreeNode(node.id, newC, newLeft, newRight)), cRight)
    }
  }

  walk(Some(node), 0)._1
} 
```

然后你可以像这样使用它：

```
walktree(
  TreeNode("1", -1,
    Some(TreeNode("2", -1,
      Some(TreeNode("3", -1, None, None)),
      Some(TreeNode("4", -1, None, None)))),
    Some(TreeNode("5", -1, None, None)))) 
```

生产：

```
Some(TreeNode(1,4,
  Some(TreeNode(2,2,
    Some(TreeNode(3,1,None,None)),
    Some(TreeNode(4,3,None,None)))),
  Some(TreeNode(5,5,None,None)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:14:21.620

如果我正确地理解了你的算法：

```
def walktree(node: TreeNode, c: Int): Int = {
    node.left = c

    val c2 = treeNodes.filter(_.parentId == node.id).foldLeft(c + 1) { 
        (cur, n) => walktree(n, cur)
    }

    node.right = c2 + 1
    c2 + 2
}

walktree(new TreeNode("", ""), 0) 
```

很可能会发生非一错误。

一些随机的想法（更适合[http://codereview.stackexchange.com](http://codereview.stackexchange.com)）：

*   尝试发布编译...我们必须猜测这是一个序列`TreeNode`：

*   `val``case`对于类是隐含的：

    ```
    case class TreeNode(val id: String, val parentId: String) { 
    ```

*   避免显式`=`和`Unit`for`Unit`函数：

    ```
    def walktree(node: TreeNode) = {
    def walk(node: TreeNode): Unit = { 
    ```

*   有副作用的方法应该有`()`：

    ```
    def increment = {c += 1; c} 
    ```

*   这非常慢，考虑在实际节点中存储子节点列表：

    ```
    treeNodes filter (_.parentId == node.id) foreach (walk(_)) 
    ```

*   更简洁的语法是`treeNodes foreach walk`：

    ```
    treeNodes foreach (walk(_)) 
    ```

# c# - FileSystemWatcher 没有调用更改事件

> ID：10109582
> 
> 赞同：2
> 
> 时间：2012-04-11T15:57:18.307
> 
> 标签：c#, events, xml-serialization, filesystemwatcher

我写了以下代码。

```
 [XmlRoot("myxml")]
public class myxml
{
    [XmlElement("one")]
    public string one { get; set; }
    [XmlElement("two")]
    public string two { get; set; }
}
class Program
{
    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        // Specify what is done when a file is changed, created, or deleted.
        Console.WriteLine("File: " + e.FullPath + " " + e.ChangeType);
    }

  // 

    static void Main(string[] args)
    {
        myxml m = new myxml();
        m.one = "111";
        m.two = "222";
        FileSystemWatcher watcher = new FileSystemWatcher(@"c:\", "myxml.xml");
        watcher.Changed += new FileSystemEventHandler(OnChanged);
        FileStream fs = new FileStream(@"c:\myxml.xml", FileMode.Open);
        XmlSerializer x = new XmlSerializer(m.GetType());
        x.Serialize(fs, m);
        fs.Close();

    }
} 
```

现在我认为在以下行之后 OnChanged 事件将被调用但没有......

```
x.Serialize(fs, m); 
```

在这条线之后也没有发生任何事情

```
fs.Close(); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:01:50.243

您必须将 EnableRaisingEvents 设置为 true 才能开始引发事件。

# c# - 装饰器设计模式内存图

> ID：10109585
> 
> 赞同：1
> 
> 时间：2012-04-11T15:57:28.467
> 
> 标签：c#, design-patterns, memory, uml, decorator

在以下表示用于设计游戏角色场景的装饰器模式的 UML 图中，执行以下代码时对象在堆中的外观如何？

![装饰器 UML](../Images/941f1dc548f9372f8b239bdc70d5330d.png)

```
GameCharacter milo;
milo = new Armour (new DefensiveSpell(new Knight()));
milo.Defend(); 
```

另外，上面的代码是否与下面的代码相同：

```
GameCharacter milo;
milo = new Knight();
milo = new DefensiveSpell(milo);
milo = new Armour(milo);
milo.Defend(); 
```

我相信 Knight 对象将首先在堆上创建，'milo' 对象指向它。然后将创建 DefensiveSpell 和 Armor。DefensiveSpell 中的“包裹”对象将指向“Knight”，Armor 中的“包裹”对象将指向 DefensiveSpell。另外，当执行 milo.Defend() 代码时，我相信在 Armor 中会调用 Defend() 方法，该方法将调用 DefensiveSpell 的 Defend() ，而后者又会调用骑士的 Defend() ，最终执行一些防御动作。这是我到目前为止的图表：

![内存图](../Images/e9bdcc3598874bfad815704d9fe5baf1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:09:51.543

您几乎完全正确，只是几个小问题： milo 和 Wrapped 是对对象的引用，而不是对象本身。因此，将有一个 Armor 对象，其中包含对 DefensiveSpell 对象的*引用*，该对象包含对 Knight 对象的*引用。*milo*引用*指向 Armor 对象，而不是 Knight 对象。

此外，当您调用 defer 时，它不会自动将调用转发给超类。因此，除非您的装饰器明确调用`base.Defend()`.

# c# - 使用 REST 为具有图像的复杂对象提供服务

> ID：10109587
> 
> 赞同：2
> 
> 时间：2012-04-11T15:57:32.207
> 
> 标签：c#, wcf, rest

Noob WCF/REST 问题在这里！
我需要构建一个简单的 Web 服务（目前是一种方法），我更喜欢 REST/JSON 类型的架构，但我不确定在我的情况下是否可以实现。

我知道在使用基于 REST 的服务时，将复杂对象序列化/反序列化到 JSON 中非常容易。尽管我还没有测试过，但对于基于[REST 的服务返回图像](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/fetching-image-using-wcf-rest-service/)来说，它看起来也很容易。

但是，我的方案可能需要同时提供两者。下面是一个可以返回的对象定义示例：

```
class Response
{
  string myTitle;
  string myDate;
  Object myImage; 
} 
```

我意识到我可以将物理图像存储在任何可访问的地方，然后简单地将 URL 作为字符串返回，但我想尽可能避免开销。

甚至可能吗？

另请注意，我并没有以任何方式致力于 REST 或 JSON，只是所有酷孩子都在使用它，所以......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:03:46.593

如果您希望图像作为 JSON 对象的一部分，请将其转换为可序列化类型。最简单的方法就是使用它的字节表示。

```
System.Drawing.Image img = System.Drawing.Image.FromFile("filename");
byte[] imgContent;
using (System.IO.MemoryStream m = new System.IO.MemoryStream())
{
    img.Save(m, img.RawFormat);
    imgContent = new byte[m.Length];
    const int count = 4096;
    byte[] buffer = new byte[4096];
    for (int i = 0; i < m.Length; i += count)
    {
        m.Read(buffer, i, (m.Length - i < count ? (int)(m.Length - i) : count));
        buffer.CopyTo(imgContent, i);
    }
}
myResponse.myImage = imgContent; 
```

**编辑：**正如 OP 所发现的，有一种更简单/更快的编写方式：

```
System.Drawing.Image img = System.Drawing.Image.FromFile("filename");
using (System.IO.MemoryStream m = new System.IO.MemoryStream())
{
    img.Save(m, img.RawFormat);
    myResponse.myImage = m.ToArray();
} 
```

# c# - 在 C# 中调用 C++ dll 时找不到入口点

> ID：10109590
> 
> 赞同：20
> 
> 时间：2012-04-11T15:58:05.663
> 
> 标签：c#, c++, pinvoke

我正在尝试学习 P/Invoke，所以我在 C++ 中创建了一个简单的 dll

KingFucs.h：

```
namespace KingFuncs
{
    class KingFuncs
    {
    public:
        static __declspec(dllexport) int GiveMeNumber(int i);
    };
} 
```

KingFuns.cpp:

```
#include "KingFuncs.h"
#include <stdexcept>

using namespace std;

namespace KingFuncs
{
    int KingFuncs::GiveMeNumber(int i)
    {
        return i;
    }
} 
```

所以它确实编译了，然后我将此 dll 复制到我的 WPF 的调试文件夹中，代码如下：

```
[DllImport("KingFuncDll.dll", EntryPoint = "GiveMeNumber", SetLastError = true, CharSet = CharSet.Ansi, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern int GiveMeNumber(
              int i
              ); 
```

并在按钮单击中调用它：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    int num = GiveMeNumber(123);
} 
```

但这给了我例外：

> 无法在 DLL“KingFuncDll.dll”中找到名为“GiveMeNumber”的入口点。

真的......我做错了什么......它显然能够找到DLL，否则将是另一个例外。但是我的方法名称完全一样......我想不出其他原因。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-11T16:02:25.563

导出函数时需要使用`extern "C"`，以便抑制 C++ 名称修改。而且您也不应该尝试对班级成员进行 p/invoke。改用自由函数：

```
extern "C" {
    __declspec(dllexport) int GiveMeNumber(int i)
    {
        return i;
    }
} 
```

在托管方面，您的`DllImport`属性都是错误的。不要使用`SetLastError`which 仅适用于 Win32 API。`CharSet`如果没有文本参数，请不要设置。不需要`ExactSpelling`。并且调用约定大概是`Cdecl`.

```
[DllImport("KingFuncDll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int GiveMeNumber(int i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:06:35.340

问题是您在 C++ 类中声明 C++“函数”并告诉 P/Invoke 使用 StdCall。

尝试在类之外声明一个 C++ 函数并像你一样导出它。然后你的代码应该可以工作。

如果您确实必须在类中包含 C++ 函数，请查看 CallingConvention.ThisCall。但随后您负责创建非托管类实例并将其作为 P/Invoke 调用的第一个参数传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T08:39:59.470

dll 文件的入口点名称在 .exp 文件中给出，该文件位于存在其他源文件的调试文件夹中。如果dumpbin 不起作用，你可以试试这个。

# mysql - MySql 存储过程 SET 命令——出错时

> ID：10109593
> 
> 赞同：0
> 
> 时间：2012-04-11T15:58:11.613
> 
> 标签：mysql, rdbms

谷歌搜索了一段时间后，我没有看到答案。无论如何，我在存储过程中遇到了一种情况，我在其中进行了一组选择，例如：

```
SET someVariable = (SELECT ...) 
```

无论如何，由于系统中其他地方存在一些冗余记录，因此在 SET 中使用的这个 SELECT 查询返回不止一行。我猜这会导致破损或损坏？真假？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:01:54.597

真的。分配给变量时，查询必须返回包含单列的单行。您也可以使用以下语法来执行此操作：

```
SELECT someColumn INTO myVariable ... LIMIT 1; 
```

# maven - Maven打包耳朵从项目级别而不是父级查找依赖项

> ID：10109594
> 
> 赞同：0
> 
> 时间：2012-04-11T15:58:16.093
> 
> 标签：maven, build, packaging, ear, pom.xml

我目前有一个父 pom，它声明了两个模块：一个 ear 和一个 war。耳朵依赖于战争（并使用组/工件ID和包装类型声明它的依赖关系）。

从父 pom 级别打包时，reactor 会拾取两个工件并将战争正确打包到耳朵中，正如您所期望的那样。但是，当从 ear 的项目 pom 打包时（尽管在两个项目中都声明了指向父 pom 的元素），ear 无法找到战争工件。

我知道，当在耳朵级别打包时，Maven 会正确找到到达父级的方式，但是它是否不会迭代到父级包含的各种模块以获取工件？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:09:37.077

听起来你的育儿结构被打破了，如果 EAR 依赖于 WAR，那么它应该是一个子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:35:11.893

这就是 Maven 的工作方式。没关系。解决依赖关系时，Maven 在反应器中查找它们，然后是本地存储库，然后是远程存储库。因此，当从父项目级别进行构建时，两个项目都在反应器中，因此 EAR 可以轻松选择 WAR。（具体来说，不是因为父子关系，而是因为它们是模块。）但是，当您单独构建EAR模块时，reactor无法提供WAR以及本地repo和远程repo。如果您将 WAR 模块安装到本地 repo 中`mvn install`，然后尝试构建 EAR，将使用本地 repo 找到 WAR 工件。

# php - nuSOAP：服务器端的标头身份验证

> ID：10109599
> 
> 赞同：0
> 
> 时间：2012-04-11T15:58:29.760
> 
> 标签：php, nusoap

任何人都可以请建议如何解析 nuSOAP 标头并`username/password/Signature`从下面的 SOAP 请求中检查

```
<SOAP-ENV:Header>
    <SOAP-ENV:Header xmlns:wsa="http://admin.example.com">
      <Username>testuser</Username>
      <Password>test123456</Password>
      <Signature>5595610031002</Signature>
    </SOAP-ENV:Header>
  </SOAP-ENV:Header> 
```

即：我需要在服务器端解析此标头并验证每个请求的凭据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:33:42.767

我不确定，但我找到了使用以下代码跟踪凭据的替代方法。让我解释。

`$sSoapRequest = file_get_contents('php://input');`将整个 SOAP 请求返回到服务器端的代码......

以下2个功能帮助我带出价值观..

```
function doAuthenticate()
{
    $sSoapRequest = file_get_contents('php://input');
    if(isset($sSoapRequest))
    {
        $sUsername = hookTextBetweenTags($sSoapRequest, 'Username');
        $sPassword = hookTextBetweenTags($sSoapRequest, 'Password');
        $sSignature = hookTextBetweenTags($sSoapRequest, 'Signature');
        if($sUsername=='testuser' && $sPassword=='test123456' && $sSignature=='5595610031002')
            return true;
        else
            return false;
    }
}
function hookTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
    preg_match($pattern, $string, $matches);
    return $matches[1];
} 
```

并且，`doAuthenticate()`对服务器端的每个进程使用方法。

# matlab - 将数据从 Matlab 写入文本文件

> ID：10109601
> 
> 赞同：1
> 
> 时间：2012-04-11T15:58:34.393
> 
> 标签：matlab, file-io

我需要将多个数组保存到以下格式的文本文件中：

> n=2 % 数组数量
> 
> r=3 % 第一个数组中的行数
> 1 2 3 % 实际数据
> 4 5 6
> 7 8 9
> 
> r=3 % 第二个数组中的行数
> 5 6 7 % 实际数据
> 1 2 3
> 7 8 9

请你帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:25:46.237

使用[fprintf](http://www.mathworks.co.uk/help/techdoc/ref/fprintf.html)。如果您的数组存储在单元格数组中，以便您可以遍历它们。

```
arrays = cell(N, 1); %A cell array of arrays

f = fopen('output.txt', 'w');
fprintf(f, 'n=%i\n', N);

for i=1:N
  rows = size(arrays{i}, 1);
  fprintf(f, '\nr=%i\n', rows);
  for j=1:rows
    fprintf(f, '%g ', arrays{i}(N, :));
    fprintf(f, '\n');
  end
end
fclose(f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:27:32.457

到目前为止你做了什么？

作为一般规则，对于这种事情，你的朋友是函数[fprintf](http://www.mathworks.co.uk/help/techdoc/ref/fprintf.html)，它将数据打印到文件，和[varargin](http://www.mathworks.co.uk/help/techdoc/ref/varargin.html)，它允许你为函数提供可变长度的参数列表。因此，处理此类任务的函数的良好签名可能是

```
function [output_args] = pretty_save_to_file(fName, varargin) 
```

这`fName`是您要将数据保存到的文件的名称，并且`varargin`是您要保存的矩阵名称的占位符。一旦你填写了函数的血腥细节，你应该可以使用类似的东西来调用它

```
pretty_save_to_file('output.txt', A, B, C) % prints matrices A, B, and C to output.txt 
```

此外，由于您要确定每个矩阵中的行数，您可能会发现以下涉及[size](http://www.mathworks.co.uk/help/techdoc/ref/size.html)函数的片段很有用：

```
[nrows, ncols] = size(A); % Stores the number of rows and columns of A in nrows, ncols 
```

最后， fprintf 函数允许您指定所需的矩阵格式。

# c# - C# Deserialize XML to object：XML 文档中存在错误（3、2）

> ID：10109608
> 
> 赞同：0
> 
> 时间：2012-04-11T15:58:55.203
> 
> 标签：c#, xml, xsd, xml-serialization, deserialization

我正在尝试将 XML 反序列化为 C# 对象

我收到错误消息：XML 文档 (3, 2) 中存在错误。

似乎无法修复它！这是代码：

XSD 是：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--Created with Liquid XML Studio 2012 Developer Edition (Trial) 10.0.2.3955     (http://www.liquid-technologies.com)-->
<xs:schema xmlns:tns="http://www.adamroe.com/xsd/cameras.xsd" elementFormDefault="qualified" targetNamespace="http://www.adamroe.com/xsd/cameras.xsd"     xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="CameraBase">
    <xs:complexType>
        <xs:sequence minOccurs="1" maxOccurs="1">
            <xs:element name="Cameras">
                <xs:complexType>
                    <xs:sequence minOccurs="0" maxOccurs="unbounded">
                        <xs:element name="Camera" type="tns:CameraType" />
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:complexType name="CameraType">
    <xs:sequence>
        <xs:element name="Make" type="xs:string" />
        <xs:element name="Model" type="xs:string" />
        <xs:element name="Variable1" type="xs:double" />
        <xs:element name="Variable2" type="xs:double" />
    </xs:sequence>
</xs:complexType>
</xs:schema> 
```

XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Created with Liquid XML Studio 2012 Developer Edition (Trial) 10.0.2.3955     (http://www.liquid-technologies.com) -->
<aroe:CameraBase xmlns:aroe="http://www.adamroe.com/xsd/cameras.xsd"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xsi:schemaLocation="http://www.adamroe.com/xsd/cameras.xsd     C:\Users\Adam\Desktop\Cameras.xsd">
<aroe:Cameras>
    <aroe:Camera>
    <aroe:Make>SONY</aroe:Make>
    <aroe:Model>DSC-W130</aroe:Model>
    <aroe:Variable1>0.6352</aroe:Variable1>
    <aroe:Variable2>22.375</aroe:Variable2>
</aroe:Camera>
<aroe:Camera>
    <aroe:Make>Panasonic</aroe:Make>
    <aroe:Model>DMC-FX30</aroe:Model>
    <aroe:Variable1>0.8869</aroe:Variable1>
    <aroe:Variable2>24.73</aroe:Variable2>
</aroe:Camera>
<aroe:Camera>
    <aroe:Make>Olympus</aroe:Make>
    <aroe:Model>X450</aroe:Model>
    <aroe:Variable1>0.6003</aroe:Variable1>
    <aroe:Variable2>20.654</aroe:Variable2>
</aroe:Camera>
<aroe:Camera>
    <aroe:Make>Fujifilm</aroe:Make>
    <aroe:Model>FinePix S9600</aroe:Model>
    <aroe:Variable1>1.0024</aroe:Variable1>
    <aroe:Variable2>35.704</aroe:Variable2>
</aroe:Camera>
<aroe:Camera>
    <aroe:Make>Canon</aroe:Make>
    <aroe:Model>EOS 400D</aroe:Model>
    <aroe:Variable1>1.5143</aroe:Variable1>
    <aroe:Variable2>69.409</aroe:Variable2>
</aroe:Camera>
</aroe:Cameras>
</aroe:CameraBase> 
```

课程是：

```
public class Camera
{
    public string Make;
    public string Model;
    public double Variable1;
    public double Variable2;
} 
```

反序列化代码：

```
public class PopulateXML
{
    public void DeserializeObject(string filenameXML)
    {
        Console.WriteLine("Reading with XmlReader");

        // Create an instance of the XmlSerializer specifying type and namespace.
        XmlSerializer serializer = new
        XmlSerializer(typeof(List<Camera>));

        // A FileStream is needed to read the XML document.
        FileStream fs = new FileStream(filenameXML, FileMode.Open);
        XmlReader reader = new XmlTextReader(fs);

        // Declare an object variable of the type to be deserialized.
        List<Camera> i;

        // Use the Deserialize method to restore the object's state.
        i = (List<Camera>)serializer.Deserialize(reader);
    }
} 
```

主要的：

```
PopulateXML x = new PopulateXML();
        // Read a purchase order.
        x.DeserializeObject("Cameras.xml"); 
```

抛出异常： i = (List)serializer.Deserialize(reader);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:20:48.887

```
XmlSerializer serializer = new XmlSerializer(typeof(Camera));

Stream fs = File.OpenRead(filenameXMLpath);

// Use the Deserialize method to restore the object's state.
Camera cam = serializer.Deserialize(fs) as Camera; 
```

这肯定对你有用。在您的情况下，它不起作用，因为您将其类型转换为不正确的数据类型，即 List。每当开发人员将反序列化对象类型转换为不正确的数据类型时，通常会弹出此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:57:38.577

您可以使用 LinqToXml 和这些扩展：[http](http://searisen.com/xmllib/extensions.wiki) ://searisen.com/xmllib/extensions.wiki轻松解析 Xml。

```
XElement root = XElement.Load(file); // or .Parse(string)
List<Camera> cameras = root.GetEnumerable("Cameras/Camera", x => new Camera()
{
    Make = x.Get("Make", string.Empty),
    Model = x.Get("Model", string.Empty),
    Variable1 = x.Get<double>("Variable1", 0),
    Variable2 = x.Get<double>("Variable2", 0)
}).ToList(); 
```

PS我已经对其进行了测试，它适用于您的xml。

PSS 考虑将此属性添加`[DebuggerDisplay("{Make} - {Model}")]`到您的相机类中，以便更好地查看调试器中的列表/数组。

# java - 如何制作 php 代码来显示我发送到服务器的内容？

> ID：10109609
> 
> 赞同：1
> 
> 时间：2012-04-11T15:59:04.613
> 
> 标签：java, php, android

我正在尝试将 jsonarray 上传到服务器，然后获取响应文本以查看服务器对对象的作用。在android方面，我有这个代码：

```
 HttpPost httppost = new HttpPost("http://10.0.0.2/namedate.php");I am 
            HttpClient httpclient = new DefaultHttpClient();
            httppost.getParams().setParameter("jsonarray", json_a.toString());
            HttpResponse response = httpclient.execute(httppost);
            String responseText = EntityUtils.toString(response.getEntity());
            Log.d("ProviderTester", "The response text is "+ responseText);
            Log.i("JSONInfo","JSON object: " + json_a.toString()); 
```

jsonarray 从 logcat 看起来像这样：

```
04-10 21:29:53.293: I/JSONInfo(466): JSON object: ["[name=Mike, datetime=2012-04-10 21:29]","[name=Roger, datetime=2012-04-10 21:29]"] 
```

目前我只是试图回显字符串，然后希望稍后将表格从字符串中取出：

```
 <?php

    echo $_POST['jsonarray'];

   ?> 
```

以下是我从 logcat 得到的回复：

```
04-10 22:22:20.033: D/ProviderTester(499): The response text is 
```

我该如何解决这个问题，以便我可以看到我发送到服务器的 jsonarray 字符串？

编辑：当我将我的 Android 代码更改为：

```
 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("json_a", json_a.toString()));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            String responseText = EntityUtils.toString(response.getEntity()); 
```

然后我使用接受的 php 脚本答案在 LogCat 中得到以下响应：

```
04-10 23:05:39.833: D/ProviderTester(601): The response text is POST = array (
04-10 23:05:39.833: D/ProviderTester(601):   'json_a' => '[name=Mike, datetime=2012-04-10 21:29]\\",\\"[name=Roger, datetime=2012-03-10 21:29]\\"]\\"]',
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): GET = array (
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): request = array (
04-10 23:05:39.833: D/ProviderTester(601):   'Content-Length' => '174',
04-10 23:05:39.833: D/ProviderTester(601):   'Content-Type' => 'application/x-www-form-urlencoded',
04-10 23:05:39.833: D/ProviderTester(601):   'Host' => 'graasdfon.hostei.com',
04-10 23:05:39.833: D/ProviderTester(601):   'Connection' => 'Keep-Alive',
04-10 23:05:39.833: D/ProviderTester(601):   'User-Agent' => 'Apache-HttpClient/UNAVAILABLE (java 1.4)',
04-10 23:05:39.833: D/ProviderTester(601):   'Expect' => '100-Continue',
04-10 23:05:39.833: D/ProviderTester(601): )
04-10 23:05:39.833: D/ProviderTester(601): 
04-10 23:05:39.833: D/ProviderTester(601): <!-- www.000webhost.com Analytics Code --> 
```

现在我只需要弄清楚如何处理 json_a 服务器端。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:07:16.080

我不知道是什么导致了您的问题（我不知道 Android/Java），但调试它的最佳方法是在 PHP 中简单地对此进行调试：

```
<?php
    var_dump($_POST);
?> 
```

这将导致 PHP 输出它通过 POST 接收到的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:24:22.390

您需要在帖子的实体中传递 json 值。试试这个：

```
StringEntity params =new StringEntity(json_a.toString());
httppost.addHeader("content-type", "application/x-www-form-urlencoded");
httppost.setEntity(params); 
```

代替：

```
httppost.getParams().setParameter("jsonarray", json_a.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:48:03.697

> 回声 $_POST['jsonarray'];

PHP 没有办法对非标量数据类型进行隐式 toString() 表示。您需要进行显式转换。

例如，如果您想查看所有 HTTP 变量和请求标头，请尝试以下操作：

```
<?php

$out="POST = " . var_export($_POST, true) . "\n";
$out.="GET = " . var_export($_GET, true) . "\n";
$out.="request = " . var_export(getallheaders(), true) . "\n";
print $out;

?> 
```

（这不会拾取写入 STDIN 但未正确包含为 POST 的内容）

# objective-c - Xcode，为什么控制台中省略了一些 NSLog 条目？

> ID：10109618
> 
> 赞同：3
> 
> 时间：2012-04-11T15:59:27.997
> 
> 标签：objective-c, xcode, console, nslog

我刚开始学习IOS开发。每次我运行这个程序时，控制台并不总是显示我的 NSLogs。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSMutableArray *items = [[NSMutableArray alloc] init];

        [items addObject:@"One"];
        [items addObject:@"Two"];
        [items addObject:@"Three"];

        [items insertObject:@"zero" atIndex:0];

        NSLog(@"Object at 0 is %@", [items objectAtIndex:0]);
        NSLog(@"Object at 1 is %@", [items objectAtIndex:1]);
        NSLog(@"Object at 2 is %@", [items objectAtIndex:2]);
        NSLog(@"Object at 3 is %@", [items objectAtIndex:3]);

        for (int i = 0; i < [items count]; i++) {
            NSLog(@"%@", [items objectAtIndex:i]);
        }
        items = nil;           
    }
    return 0;
} 
```

每次运行它时，我都应该在控制台中得到它：

```
2012-04-11 16:29:10.419 RandomPossessions[701:403] Object at 0 is zero
2012-04-11 16:29:10.421 RandomPossessions[701:403] Object at 1 is One
2012-04-11 16:29:10.422 RandomPossessions[701:403] Object at 2 is Two
2012-04-11 16:29:10.422 RandomPossessions[701:403] Object at 3 is Three
2012-04-11 16:29:10.423 RandomPossessions[701:403] zero
2012-04-11 16:29:10.423 RandomPossessions[701:403] One
2012-04-11 16:29:10.424 RandomPossessions[701:403] Two
2012-04-11 16:29:10.424 RandomPossessions[701:403] Three 
```

但有时它并没有全部显示出来。另一次我运行它，我可以得到：

```
2012-04-11 16:48:20.626 RandomPossessions[734:403] Object at 0 is zero
2012-04-11 16:48:20.628 RandomPossessions[734:403] Object at 1 is One 
```

我必须多次运行该程序才能将完整的 NSLog 列表输出到控制台。这是一个错误，还是我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:43:25.957

迷人。我刚刚尝试了您的代码并得到了相同的结果。这是我的假设：

在您的行设置断点：

```
 [items insertObject:@"zero" atIndex:0]; 
```

当调试器到达那里时，调试面板显示一个线程。

现在向前迈进

```
 NSLog(@"Object at 1 is %@", [items objectAtIndex:1]); 
```

现在有3个线程。

我敢打赌，其他 2 个线程正在对日志进行实际写入。如果程序在这些单独的线程写入日志之前完成，那么它们就会被杀死，并且您的日志不会被写入。

我尝试添加一个呼叫

```
sleep(0); 
```

在 main 函数结束时，突然日志开始适当地出现。

然后我尝试删除该行，原始症状消失了，我无法再重现您遇到的问题。

底线：我认为这是程序在写入日志之前退出的症状。如果您正在编写 iOS 应用程序，则不必担心这种事情。这只是一个模糊的实现细节。

祝学习顺利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:54:40.370

用于`fflush()`在退出应用程序之前写出缓冲区：

```
fflush(stdout); 
```

或使用`NSFileHandle`：

```
[[NSFileHandle fileHandleWithStandardOutput] synchronizeFile]; 
```

# vb.net - 为什么在 VB.NET 中 listcontrol 没有 Items 集合，但在 ASP.NET 中却有？

> ID：10109619
> 
> 赞同：1
> 
> 时间：2012-04-11T15:59:28.497
> 
> 标签：vb.net, listcontrol, itemscollection

我有一个从数据库加载列表的简单子程序。我希望能够通过将列表类型定义为通用抽象基类 ListControl 来使用相同的代码来加载 ListBox 和 ComboBox，并且看不出为什么我不能 - 除了 VB.NET 不公开/implement/whatever ListControl 中的 Items 集合。我沮丧地注意到，在 ASP.NET 中并非如此。目前我的代码很难看，因为我必须检查传入的列表控件类型，以便将其转换为具有 Items 集合的类型。（由于许多其他原因，我的代码可能也很丑陋，但对我来说很漂亮）。有没有办法重写代码以避免必须通过测试和铸造废话？（我已经将它剥离了一些，所以剩下的就是问题所在）。

```
Sub loadList(ByVal db As SqlDatabase, ByVal strCommandText As String, lstHost As ListControl, Optional bClearList As Boolean = True, Optional bIsListBox As Boolean = True)
    If bClearList Then
        If bIsListBox Then
            CType(lstHost, ListBox).Items.Clear()
        Else
            CType(lstHost, ComboBox).Items.Clear()
        End If
    End If
    Dim dt As DataTable = db.ExecuteDataSet(db.GetSqlStringCommand(strCommandText)).Tables(0)
    For i = 0 To dt.Rows.Count - 1
        If bIsListBox Then
            CType(lstHost, ListBox).Items.Add(dt.Rows(i)(0).ToString)
        Else
            CType(lstHost, ComboBox).Items.Add(dt.Rows(i)(0).ToString)
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:26:39.327

这是因为在 winforms 中，ListBox 对象集合与 ComboBox 对象集合不同。我能想到的最简单的整理方法是制作一个像这样的帮助类

```
Public Class ListHelper
    Public Shared Sub Clear(ByRef lst As ListControl)
        If TypeOf lst Is ListBox Then
            CType(lst, ListBox).Items.Clear()
        Else
            CType(lst, ComboBox).Items.Clear()
        End If
    End Sub

    Public Shared Sub Add(ByRef lst As ListControl, ByVal itm As Object)
        If TypeOf lst Is ListBox Then
            CType(lst, ListBox).Items.Add(itm)
        Else
            CType(lst, ComboBox).Items.Add(itm)
        End If
    End Sub
End Class 
```

然后在你的代码中你可以这样做：

```
Sub loadList(ByVal db As SqlDatabase, ByVal strCommandText As String, _
  ByVal lstHost As ListControl, Optional ByVal bClearList As Boolean = True)
    If bClearList Then
        ListHelper.Clear(lstHost)
    End If
    Dim dt As DataTable = _
      db.ExecuteDataSet(db.GetSqlStringCommand(strCommandText)).Tables(0)
    For i = 0 To dt.Rows.Count - 1
        ListHelper.Add(lstHost, dt.Rows(i)(0).ToString)
    Next
End Sub 
```

**编辑 ：**

另一种（可能更好的）方法是使用扩展方法（添加一个新模块和）：

```
Imports System.Runtime.CompilerServices
Module ListExtensions
    <Extension()> _
    Public Sub AddToItems(ByRef lc As ListControl, ByVal itm As Object)
        If TypeOf lc Is ListBox Then
            CType(lc, ListBox).Items.Add(itm)
        ElseIf TypeOf lc is ComboBox then
            CType(lc, ComboBox).Items.Add(itm)
        Else
            'handle abuse
        End If
    End Sub

    <Extension()> _
    Public Sub ClearItems(ByRef lc As ListControl)
        If TypeOf lc Is ListBox Then
            CType(lc, ListBox).Items.Clear()
        ElseIf TypeOf lc is ComboBox Then
            CType(lc, ComboBox).Items.Clear()
        Else
            'handle abuse
        End If
    End Sub
End Module 
```

最终在您的代码中更加整洁：

```
Sub loadList(ByVal db As SqlDatabase, ByVal strCommandText As String, _
  ByVal lstHost As ListControl, Optional ByVal bClearList As Boolean = True)
    If bClearList Then
        lstHost.ClearItems()
    End If
    Dim dt As DataTable = _
      db.ExecuteDataSet(db.GetSqlStringCommand(strCommandText)).Tables(0)
    For i = 0 To dt.Rows.Count - 1
        lstHost.AddToItems(dt.Rows(i)(0).ToString)
    Next
End Sub 
```

在这里，我调用了这些`ClearItems`，`AddToItems`以避免与实例方法产生歧义。ListControl 本身没有`.Clear()`，`.Add()`但为了明确起见，最好有一个独特的扩展命名法。

# openlayers - OpenLayers：如何计算两点之间的距离？

> ID：10109620
> 
> 赞同：12
> 
> 时间：2012-04-11T15:59:29.277
> 
> 标签：openlayers, distance, points, mercator

如何使用墨卡托投影计算 2 点之间的 OpenLayers 距离？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T16:34:39.087

采用`point1.distanceTo(point2)`

```
var Geographic  = new OpenLayers.Projection("EPSG:4326"); 
var Mercator = new OpenLayers.Projection("EPSG:900913");

function distanceBetweenPoints(latlng1, latlng2){
        var point1 = new OpenLayers.Geometry.Point(latlng1.lon, latlng1.lat).transform(Geographic, Mercator);
        var point2 = new OpenLayers.Geometry.Point(latlng2.lon, latlng2.lat).transform(Geographic, Mercator);       
        return point1.distanceTo(point2);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-11T12:29:37.443

如果使用**openlayers3 ，您可以使用该方法**

在两点之间实例化一个 ol.geom.LineString 对象并计算线的长度：

```
 this.distanceBetweenPoints = function(latlng1, latlng2){
            var line = new ol.geom.LineString([latlng1, latlng2]);
            return Math.round(line.getLength() * 100) / 100;
        }; 
```

然后，您可以使用某种格式获得可读值：

```
 this.formatDistance = function(length) {
            if (length >= 1000) {
                length = (Math.round(length / 1000 * 100) / 100) +
                ' ' + 'km';
            } else {
                length = Math.round(length) +
                ' ' + 'm';
            }
            return length;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-06T14:42:04.947

尝试`getLength`获得几何的球面长度：

```
import LineString from 'ol/geom/LineString';
import {getLength} from 'ol/sphere';

const line = new LineString([coordStart, coordEnd]);
const distance = getLength(line); 
```

API：[https ://openlayers.org/en/latest/apidoc/module-ol_sphere.html#.getLength](https://openlayers.org/en/latest/apidoc/module-ol_sphere.html#.getLength)

# clearcase - RTC 源代码管理中的“删除前备份”是什么？

> ID：10109622
> 
> 赞同：2
> 
> 时间：2012-04-11T15:59:45.563
> 
> 标签：clearcase, rtc

RTC 组件的左侧是“（4：放置前备份）”。这是什么意思&为什么会出现？这是被删除（删除）之前的备份组件吗？

![在此处输入图像描述](../Images/3aaf9047820ca80db6b22dd00ebdfda2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:46:35.470

4 是基线的 id（1 是第一个基线的 id，指的是空组件）

'Backup before drop' 是创建基线的用户给出的基线名称。

您可以随时更改该基线并通过单击存储库工作区中的“替换为”按钮来选择另一个基线。

# c# - 加载程序集并使用不同的名称和扩展名复制它

> ID：10109626
> 
> 赞同：2
> 
> 时间：2012-04-11T16:00:10.757
> 
> 标签：c#, assemblies, reflection.emit, system.reflection

最近开始使用 Reflection、Reflection.Emit 和 Code Dom。我编码的目的是加载一个程序集（例如“C:\Temp\MyAssembly.exe”），读取它的类和方法。这已经完成，但是我有兴趣将“MyAssembly.exe”的副本保存到“MyAssembly.dll”。原因是我想检测代码并对方法进行一些更改。我知道如何创建新程序集并保存它们，但我不确定是否可以将扩展名为 .exe 的现有程序集（包括其所有类和方法）“克隆”到 .dll。

我将不胜感激任何建议！谢谢。彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:08:45.370

简单地将“MyAssembly.exe”的副本保存到“MyAssembly.dll”应该不是什么大问题（例如，使用 File.Copy）并且不需要 Reflection 或 Reflection.Emit。

但是，正如评论所揭示的那样，问题更多是将“MyAssembly.exe”的*修改*副本保存到不同的文件名。无法使用 Reflection.Emit 修改现有程序集，但您还有其他选择：

*   您可以使用第三方工具（例如[Cecil](http://www.mono-project.com/Cecil)或[Microsoft CCI](http://ccimetadata.codeplex.com/)）来加载程序集、修改它并以不同的名称保存它；
*   您可以使用 .NET 框架/SDK 中包含的 IL 反汇编器和 IL 汇编器来反汇编，然后修改，然后重新组装您的程序集；
*   理论上，您可以加载程序集，通过反射分析它并使用反射发出一个完全等效的新程序集。Emit；但是，我不会走那条路，因为要做到这一点将是一项巨大的工作。

# php - 当我在循环中执行数据库查询 xxxx+ 次时，为什么我的服务器返回 500 内部错误？

> ID：10109635
> 
> 赞同：1
> 
> 时间：2012-04-11T16:00:41.850
> 
> 标签：php, internal-server-error

这可能是一个愚蠢的问题，但我很好奇：

当我循环一个数据库查询一个*荒谬*的（10000+）次时，我的服务器返回一个 500 内部错误。

我*没有*在任何类型的应用程序中包含这样的东西，我只是完全好奇。

编辑：

有几件事我忘了提：

脚本的时间限制已设置为无限。

该脚本实际上仍然执行所有数据库查询，即使返回错误也是如此。

错误会在片刻后出现，而不是立即出现。

一旦返回错误，我将在几分钟内无法访问服务器上的任何其他页面（好像它被冻结了，并且必须重新启动？）...

我也在共享主机...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:15:09.850

如果你得到了，`500`那么就像一个`PHP`你没有看到的错误..你可以用它来找出错误

```
error_reporting(E_ALL);
ini_set('display_errors','On');
set_time_limit(0) ; 
```

如果您无权设置上述选项，也可以执行此操作

```
print_r(error_get_last()); 
```

我希望它有帮助

# ocaml - OCaml中单独文件中的函子？

> ID：10109636
> 
> 赞同：6
> 
> 时间：2012-04-11T16:00:43.347
> 
> 标签：ocaml, functor

我想要一个大函子 Hello(Blah: Blah_type) 并将其保存在文件 hello.ml 中，但我该怎么做呢？

如果我只是在我的顶级文件中，我会有模块 Hello(Blah: Blah_type) = struct val x = 2 end

但是我如何将论点放在 hello.ml 中？我不能只是让整个文件成为“val x = 2”......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:25:34.340

OCamlPro 有一个编译器补丁和外部工具可以支持这个：

[http://www.ocamlpro.com/blog/2011/08/10/ocaml-pack-functors.html](http://www.ocamlpro.com/blog/2011/08/10/ocaml-pack-functors.html)

据我所知，官方编译器版本不支持将 .ml 文件作为函子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T16:24:12.590

这不可能。源文件始终表示为普通模块，而不是仿函数。这可以通过一个额外的打开来轻松解决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T11:18:16.950

`foo.ml`用真实的代码示例而不是包含内容的文件来补充 ygrek 的答案

```
module type S = sig
  (* ... *)
end

module Hello (M : S) = struct
  (* ... *)
end

module M : S = struct
  (* ... *)
end

module H = Hello(M)

(* ... *) 
```

你可以有`hello.ml`内容

```
module type S = sig
  (* ... *)
end

module Make (M : S) = struct
  (* ... *)
end 
```

并`foo.ml`改写为

```
module M : Hello.S = struct
  (* ... *)
end

module H = Hello.Make(M)

(* ... *) 
```

PS：如果您觉得它令人困惑，模块密封`M : S`或是`M : Hello.S`可选的（无论如何传递给函子时 M 将被强制到此签名），这只是为了说明如何做到这一点。

# python - 使用 QWorkspace 级联

> ID：10109638
> 
> 赞同：2
> 
> 时间：2012-04-11T16:00:48.247
> 
> 标签：python, pyqt4, cascade

我正在尝试使用自己的级联和平铺定义重载 QWorkspace 类，但是当我尝试使用 .move 函数时，它会相对于子窗口移动内部小部件，而不是相对于工作区移动子窗口。

这是我正在使用的代码：

```
class MdiArea(QWorkspace):
    def tile(self):
        if len(self.windowList()) < 2:
            return

    def cascade(self):

        if len(self.windowList()) < 2:
            return

        windows = []
        for window in self.windowList():
            windows.append((window.width(), window.height(), window))

            windows.sort()
#        
            x = 0
            y = 0
            endX = self.width() - min(windows[-1][0], self.width())
            endY = self.height() - min(windows[-1][1], self.height())

        for i in range(len(windows)):

            x = i * 10
            y = i * 10

            width, height, window = windows[i]
            window.move(x, y)

            window.raise_() 
```

这是最终对我有用的代码（特别注意'parent（）'添加）：class MdiArea（QWorkspace）：def tile（self）：print self.width（）if len（self.windowList（））< 2：在 self.windowList() 中为窗口返回 i=0： x = i * window.parent().width() y = 5 window.parent().move(x, y) window.parent().raise_ ()
i=i+1

```
def cascade(self):
    if len(self.windowList()) < 2:
        return
    i=0
    for window in self.windowList():
        x = i * 15
        y = i * 30            
        window.parent().move(x, y)
        window.parent().raise_()            
        i=i+1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:40:16.137

每个窗口小部件都放在一个框架小部件内，因此它是该小部件的父小部件。所以你需要移动和抬起`window.parentWidget()`

但是该类`QWorkSpace`已被弃用，您应该`QMdiArea`改用（其`subWindowList`方法实际上返回窗口列表而不是内部小部件列表）。

# mongodb - 数组查询和返回

> ID：10109639
> 
> 赞同：0
> 
> 时间：2012-04-11T16:00:49.500
> 
> 标签：mongodb

我第一次冒险进入蒙戈。请回答以下问题，为我节省一些时间。这是架构。

```
"_id" : 1,
  "FullName" : "Full Name",
  "Email" : "email@email.com",
  "FacebookId" : NumberLong(0),
  "LastModified" : ISODate("2012-04-11T09:26:10.955Z"),
  "Connections" : [{
      "_id" : 7,
      "FullName" : "Fuller name",
      "Email" : "connections@email.com",
      "FacebookId" : NumberLong(0),
      "LastModified" : ISODate("0001-01-01T00:00:00Z")
    },

  .... 
```

给定一个顶级用户的 id，我想返回 Connections 数组中的所有电子邮件，最好只返回电子邮件。什么是查询字符串？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:48:59.863

您不能只从 MongoDB 的子对象中获取值。

如果您执行这样的查询：

```
db.test.find({"_id": 1}, {"Connections.Email":1}); 
```

你会得到这样的回应：

```
{ 
  "_id": 1, 
  "Connections" : [ {"Email":"connections@email.com"}, 
                    {"Email":"foo@example.com"} ] 
} 
```

这是您可以通过 MongoDB 的简单查询和字段选择获得的最接近的结果。

然后，您可以使用简单的`foreach`.

# silverlight - 无法在 Silverlight 中寻找媒体元素

> ID：10109640
> 
> 赞同：0
> 
> 时间：2012-04-11T16:00:51.350
> 
> 标签：silverlight, mediaelement, seek

这是这种情况。

我有一个 MainPage.Xaml，在这个 MainPage.Xaml 中我嵌入了一个 UserControl (VideoWidget.Xaml) (LayouRoot.Children)。

VideoWidget.Xaml 在其 LayoutRoot 中嵌入了一个 mediaElement。

我正在尝试从 MainPage.Xaml 暂停/播放 MediaElement (mediaElement1)，但没有响应。

例如

```
public MainPage()
    {
        // Required to initialize variables
        InitializeComponent();            
        Video testVideo = new Video();

        VideoWidget video = new VideoWidget(testVideo);
        videoWidget.Height = 246;
        videoWidget.Width = 290;
        LayoutRoot.Children.Add(video);
        video.mediaElement1.play();
      } 
```

mediaElement 的 All 方法没有响应。请帮忙。

莫希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:05:38.660

尝试将测试控制按钮放在 VideoWidget 本身内。那样有用吗？如果是这样，您将 VideoWidget 中的 mediaElement 作为公共成员公开的方式可能存在问题。

# google-maps - 位置检测

> ID：10109644
> 
> 赞同：0
> 
> 时间：2012-04-11T16:01:03.347
> 
> 标签：google-maps, google-maps-api-3

我在[http://www.strahlen.org/map/central.htm](http://www.strahlen.org/map/central.htm)上使用 geometa.js来检测浏览器的位置。在 Chrome 和 Firefox 中完美流畅，但它并不总是适用于使用 IE 和/或 Safari 的用户。

这是我能解决的吗？是否有更好的定位脚本可供我使用，适用于所有浏览器/平台？

干杯，弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:05:40.553

[看起来](http://code.google.com/p/google-ajax-examples/source/browse/trunk/whereareyou/scripts/geometa.js?r=187#2)geometa.js 作为`navigator.geolocation`获取位置的后备。太好了，这是最好的方法，唯一的问题是支持不是普遍的： [http ://caniuse.com/#search=geolocation](http://caniuse.com/#search=geolocation)

# objective-c - Objective C中为NSObjects存储的保留计数在哪里

> ID：10109645
> 
> 赞同：10
> 
> 时间：2012-04-11T16:01:08.527
> 
> 标签：objective-c, memory-management

我很好奇保留/释放在内部是如何工作的。从表面上看，似乎有一个与 an 的每个实例相关的整数`NSObject`，当您分别调用`-retain`and时，它会`-release`分别增加和减少。

但是看一下`NSObject`，它唯一的实例变量是`isa`变量，用于确定其类类型。

那么单个对象的保留计数存储在哪里？不是说我要乱搞，只是为了我自己的教化。

它是否与 一起存储`NSObject`，但隐藏在一些 Objective C 实现细节中？如果是这样，那对我来说似乎是一个糟糕的设计。一个人*应该*能够创建自己的根类并以类似的方式处理自己的保留/释放计数（并不是说这是一个好主意——必须有一个*很好*的理由不使用`NSObject`）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T16:58:43.313

保留计数的存储位置取决于使用的运行时和类的实现。

对于 Apple 的 Objective-C 运行时，你可以通过深入[研究 Objective-C 运行时的源代码来](http://www.opensource.apple.com/source/objc4/objc4-493.11/)了解很多。

例如，如果您使用 ARC（我认为即使您没有使用），大多数对象的引用计数都存储在哈希表中。看看中的`_objc_rootRetain`函数`runtime/objc-arr.mm`。我不知道他们为什么这样做。也许这是一种将保留计数保持在一起以获得更好的缓存行为的方法（这在 ARC 下很重要，因为 ARC 比非 ARC 代码通常更频繁地调整保留计数）。

但是，某些类会覆盖`retain`相关方法并将保留计数存储在其他地方。例如，在调试内存泄漏时，我发现这样`CALayer`做了。a 不使用运行时的正常保留计数机制，而是`CALayer`将其保留计数存储在私有 C++ 实现对象中。这相当令人沮丧，因为这意味着 Instruments Allocations 工具不会记录`CALayer`对象的保留和释放。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T16:44:03.843

我们不确切知道数据是如何存储的，但我们可以排除几个选项：

# 私有实现变量

我们可以排除这种情况，仅仅是因为当我们遍历`NSObject`类的 iVar 时，我们只看到一个: `isa`，如通过该程序所示：

```
id object = [NSObject new];
Class meta = object->isa;

printf("class name: %s\n", class_getName(meta));

unsigned count;
Ivar *ivars = class_copyIvarList(meta, &count);

for (int i = 0; i < count; i++) {
    printf("iVar: %s\n", ivar_getName(ivars[i]));
}

free(ivars); 
```

请注意，甚至私有实现属性也存在于类元数据中。

# 私人财产

我们也可以排除这种情况，因为在类元数据中甚至公开了私有属性，如下例所示，`NSObject`该类没有属性：

```
id object = [NSObject new];    
Class meta = object->isa;

printf("class name: %s\n", class_getName(meta));

objc_property_t *properties = class_copyPropertyList(meta, &count);

for (int i = 0; i < count; i++) {
    printf("property: %s\n", property_getName(properties[i]));
} 
```

# 关联对象

这个很难排除，因为没有直接的方法来获取所有关联对象的列表。但是，由于关联对象的概念非常新，并且引用计数一直存在，我说这不太可能。

# CoreFoundation 结构修改

这是我最好的猜测。当您创建一个 NSObject 时，它是一个幕后结构。也就是说实际的 NSObject 数据表示是这样的：

```
typedef struct CFObject {
    int retainCount;
    id isa;
} *CFObjectRef; 
```

然后，当创建一个对象时：

```
id object_createInstance(...)
{
    CFObjectRef object = malloc(sizeof(struct CFObject));

    ...

    return (id) (object + sizeof(object->retainCount));
}

int object_retainCount(id self)
{
    CFObjectRef asObject = (CFObjectRef) (self - sizeof(asObject->retainCount));
    return asObject->retainCount;
} 
```

但是，我无法验证这一点，因为还有许多其他方法可以做到这一点（例如，整数到对象的映射）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:25:40.713

听起来不像，但以防万一……如果您想直接使用保留计数，[请不要](http://www.friday.com/bbum/2011/12/18/retaincount-is-useless/).

至于实现细节，WWDC 2011 的会议提到，在 ARC 下，大部分引用计数实现已经转移到 ObjC 运行时。[它的来源是可用的](http://opensource.apple.com/source/objc4/objc4-493.9/)，所以你也许可以自己找出它是如何工作的。对于手动引用计数，大部分 ObjC 行为都在 CoreFoundation 和 libdispatch 中复制，它们也是开源的——如果你想自己实现一个类似的方案，这些可能证明是有教育意义的。

一般来说，这是一个实现细节，原因与许多事情相同：封装是好的策略，尤其是对于框架提供者。您不希望框架的用户依赖于实现细节，因为这样您就无法在不破坏他们的代码的情况下更改您的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:21:01.313

如需更多见解，请查看[http://www.mikeash.com/pyblog/friday-qa-2011-09-16-lets-build-reference-counting.html，Mike](http://www.mikeash.com/pyblog/friday-qa-2011-09-16-lets-build-reference-counting.html) Ash 在其中探索了一种替代实现，例如 Apple 使用的实现.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T17:00:13.917

不知道这是否相关，但我偶然发现了有关在 Objective-C 中实现高阶消息的[博客文章。](http://jpobjc.wordpress.com/2010/08/15/my-higher-order-message-implementation/)作者将 HOM 对象实现为根类（即不是从 NSObject 继承），实现如下所示：

```
@interface HigherOrderMessage {
    Class isa;
    NSUInteger retainCount;

    //not relevant to this question part
} 
```

然后保留计数管理方法是这样实现的：

```
- (id)retain {
    __sync_add_and_fetch(&retainCount, 1);
    return self;
}

- (id)autorelease {
    [NSAutoreleasePool addObject:self];
    return self;
}

- (void)release {
    if (__sync_sub_and_fetch(&retainCount, 1) == 0) {
        [methodSignatureForSelector release];
        [forward release];
        object_dispose(self);
    }
} 
```

这段代码确实有效，所以虽然我们不知道 Cocoa 类中的 retainCount 是如何实现的，但可以肯定的是，它*可以*以某种类似的方式实现。

# ios - LLVM 编译器在 ARC 开启的情况下找不到符号 __bridge

> ID：10109646
> 
> 赞同：1
> 
> 时间：2012-04-11T16:01:14.413
> 
> 标签：ios, xcode4.2

> **可能重复：**
> [xcode 上未声明的标识符 __bridge](https://stackoverflow.com/questions/7063644/undeclared-identifier-bridge-on-xcode)

我是 iOS 5.0 中自动引用计数的新手，并将旧项目从手动内存管理转换为 ARC。一切正常（我用 -fno-objc-arc 编译器标志为选定的 3rd 方库关闭了 ARC），除了 Apples Reachability 类。我在这里下载了一个 ARC'ified 版本的 Reachability

[https://gist.github.com/1182373](https://gist.github.com/1182373)

这对很多人来说似乎都很好。

我确实收到以下编译器错误：

```
use of undeclared identifier '__bridge' [3]
         NSCAssert([(__bridge NSObject*) info isKindOfClass: [Reachability class]], @"info was wrong class in ReachabilityCallback"); 
```

我之前在我的项目中有一个较旧的（非 ARC）版本的可达性，并且之前使用 -fno-objc-arc 标志对其进行了编译。我已经删除了编译器标志，清理并编译但不断收到上述错误。删除 __bridge 符号时，我按预期收到以下错误

```
error: cast to 'NSObject *' of a non-Objective-C to an Objective-C pointer is disallowed with Automatic Reference Counting [4]
     NSCAssert([(NSObject*) info isKindOfClass: [Reachability class]], @"info was wrong class in ReachabilityCallback"); 
```

所以你可以看到ARC确实打开了。我使用 XCode 4.2（构建 4D5031b）。

我将不胜感激您可能提供的任何见解！提前致谢。

干杯，乔治

# ruby - NetBeans 6.9.1 和 ruby FastDebugger

> ID：10109654
> 
> 赞同：0
> 
> 时间：2012-04-11T16:01:53.967
> 
> 标签：ruby, netbeans

我需要使用 ruby​​ 1.8.6 来运行旧脚本。我已经安装了 NetBeans 6.9.1，我正在尝试使用快速调试器，但是当我尝试安装它时，我得到：

```
/home/eianni/.rvm/gems/ruby-1.8.6-p420@xml2rpc/gems/rubygems-bundler-0.3.0/lib/rubygems_bundler/regenerate_binstubs_command.rb:34: warning: parenthesize argument(s) for future version
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug-ide:
    ERROR: Failed to build gem native extension.

/home/eianni/.rvm/rubies/ruby-1.8.6-p420/bin/ruby mkrf_conf.rb
/home/eianni/.rvm/gems/ruby-1.8.6-p420@xml2rpc/gems/rubygems-bundler-0.3.0/lib/rubygems_bundler/regenerate_binstubs_command.rb:34: warning: parenthesize argument(s) for future version

Gem files will remain installed in /home/eianni/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/gems/1.8/gems/ruby-debug-ide-0.4.9 for inspection.
Results logged to /home/eianni/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/gems/1.8/gems/ruby-debug-ide-0.4.9/ext/gem_make.out 
```

这可能是因为 ruby​​ 版本太旧了，但是有没有办法告诉 Netbeans 为 ruby​​-debug-ide 使用不同的版本。我可以安装没有问题`ruby-debug-ide 0.10.0`。

我正在使用 Ubuntu 10.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T08:36:29.820

为了使用`ruby-debug-ide 0.4.9`with `Ruby 1.8.6`，您必须安装`ruby-debug-base 0.10.3`和`linecache 0.45`。

要了解和管理您在 Netbeans 中的宝石：

> 工具 -> Ruby Gems -> 已安装

# jquery - 使用 jQuery 按类对 li 元素进行排序

> ID：10109656
> 
> 赞同：4
> 
> 时间：2012-04-11T16:01:57.253
> 
> 标签：jquery, html, sorting, jquery-selectors, html-lists

我想**用 jQuery 通过数组重新排序 li 元素**

我的列表代码如下所示：

```
<html>
<head>
<script src="list.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>

<div class="list">
   <ul class="xyz">
     <li class="element1">content for 1</li>
     <li class="element2">content for 2</li>
     <li class="element3">content for 3</li>
   </ul>
</div>

</body>
</html> 
```

我现在想通过数组重新排序 DOM 元素。

我试过了，但我没有让它运行：

```
var array = ['element2', 'element1', 'element3'];

$.each(array,function(index,value){
   $('.xyz').append($(value));
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:04:17.657

你错过了`.`- 选择一个`class`你必须使用的 DOM 元素`.`- 请参阅[类选择器](http://api.jquery.com/class-selector/)文档

```
var array = ['element2', 'element1', 'element3'];

$.each(array,function(index,value){
   $('.xyz').append($('.'+value));    // add . here
});​ 
```

或者，您可以`.`将

[这里的工作示例](http://jsfiddle.net/pJdJn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:04:36.777

我会将每个元素的内部 HTML`li`放入一个数组中，清空`ul`元素，然后`ul`用第一步中创建的数组的排序项重新填充。

# javascript - 我应该在覆盖超时变量之前调用 clearTimeout 吗？

> ID：10109660
> 
> 赞同：11
> 
> 时间：2012-04-11T16:02:27.877
> 
> 标签：javascript, settimeout

刚刚在我们的应用程序中找到了这个代码片段。我想知道第一行是否是多余的——如果变量立即被覆盖，是否需要对变量调用 clearTimeout？还是有一些我应该注意的情况？

```
function Countdown() {
    clearTimeout(sessionTimeoutHandle);
    sessionTimeoutHandle = setTimeout(function () { countdownHandler() }, MILLISECONDS);
} 
```

我的预感是“是的，你需要调用 clearTimeout”，因为我想不出如果可以将 timeout 变量设置为 null，为什么 clearTimeout 方法会存在。

我想更好的问题是：

```
var timeoutHandler = setTimeout(countdownHandler, MILLISECONDS);
timeoutHandler = setTimeout(countdownHandler, MILLISECONDS); 
```

我现在有两个函数等待在大约 MILLISECONDS 内触发，还是只有一个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T16:35:47.650

您对 setTimeout 的调用会返回一个整数来标识它，以便在您想要清除它时引用它。因此，覆盖变量并不会清除超时，它只会覆盖您对它的 id 的引用。如果您覆盖引用，则无法再清除较早的引用:-(

正如 Niko 所说，您将使用 clearTimeout 来阻止回调触发。

插图：

```
var t = setTimeout(ch, 1000, "first timeout");
t = setTimeout(ch, 1500, "second timeout");
clearTimeout(t); // this will only clear the second timeout
t = setTimeout(ch, 2000, "third timeout");
function ch(s){
  console.log(s);
}
```

我希望这是一些帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T16:04:16.793

不，只有在您确实需要清除它时才需要调用它。

如果这是使用该变量的唯一代码，那么应该没有必要。

* * *

仅供参考，看起来你可以缩短代码一点......

```
function Countdown() {
    clearTimeout(sessionTimeoutHandle);
    sessionTimeoutHandle = setTimeout(countdownHandler, MILLISECONDS);
} 
```

匿名函数什么也没得到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T16:07:28.457

> 我想不出为什么 clearTimeout 方法会存在

`clearTimeout`存在*取消*现有定时器，即擦除定时器并防止其回调函数被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:04:06.447

clearTimeout 用于取消超时，而不是用于释放任何内存或类似的东西。如果您想停止计时器，请调用 clearTimeout - 如果您希望它完成或已经完成，则无需这样做。

# ios - 使用未声明的标识符“__bridge”

> ID：10109661
> 
> 赞同：0
> 
> 时间：2012-04-11T16:02:30.143
> 
> 标签：ios, automatic-ref-counting

> **可能重复：**
> [xcode 上未声明的标识符 __bridge](https://stackoverflow.com/questions/7063644/undeclared-identifier-bridge-on-xcode)

我的项目是打开ARC，为什么还是出现这个错误：use of undeclared identifier '__bridge'

期待您的回复并感谢您的帮助！

# c# - 在 OpenRasta 中，配置可能不明确的 URI 是否错误？

> ID：10109662
> 
> 赞同：3
> 
> 时间：2012-04-11T16:02:43.280
> 
> 标签：c#, openrasta

使用 OpenRasta 并给出以下 2 个处理程序：

```
public class HelloWorldHandler1
{
    public string GetHelloWorld(string test, string test2)
    {
        return "Hello.World!";
    }
}

public class HelloWorldHandler2
{
    public string GetHelloWorld(string test)
    {
        return "Hello.World!";
    }
} 
```

配置如下

```
ResourceSpace.Has.ResourcesOfType<Resource1>()
    .AtUri("/{test}/{test2}")
    .HandledBy<HelloWorldHandler1>();

ResourceSpace.Has.ResourcesOfType<Resource2>()
    .AtUri("/Hello/{test}")
    .HandledBy<HelloWorldHandler2>(); 
```

如果我 GET 则按`/first/example`预期使用`HelloWorldHandler1.GetHelloWorld`参数调用`first`。`example`

如果我 GET`/Hello/example`然后在我期望它被调用时`HelloWorldHandler2.GetHelloWorld`使用参数调用。`Hello``example`

**解决方法 1**

如果我颠倒配置的顺序：

```
ResourceSpace.Has.ResourcesOfType<Resource2>()
    .AtUri("/Hello/{test}")
    .HandledBy<HelloWorldHandler2>();

ResourceSpace.Has.ResourcesOfType<Resource1>()
    .AtUri("/{test}/{test2}")
    .HandledBy<HelloWorldHandler1>(); 
```

然后行为如预期：

```
GET /first/example => HelloWorldHandler1.GetHelloWorld["first","example"]
GET /Hello/example => HelloWorldHandler2.GetHelloWorld["example"] 
```

**解决方法 2**

如果更改参数名称：

```
ResourceSpace.Has.ResourcesOfType<Resource2>()
    .AtUri("/Hello/{somethingelse}")
    .HandledBy<HelloWorldHandler2>();

public class HelloWorldHandler2
{
    public string GetHelloWorld(string somethingelse)
    {
        return "Hello.World!";
    }
} 
```

然后行为也符合预期。

**问题**

1.  尝试以这种方式配置 URI 有错吗？他们在哪些地方可能不明确应该调用哪个处理程序？
2.  这是 OpenRasta 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:21:17.690

1.  是的，我会说这是错误的，2\. 不，这不是错误。

对 /Hello/example 的请求与模式 /{test}/{test2} 匹配，因此如果首先注册该模式，它将处理请求。

避免模​​棱两可的 URI 以避免模棱两可的结果 :)

# python - Python中的多线程/多处理

> ID：10109666
> 
> 赞同：2
> 
> 时间：2012-04-11T16:03:02.917
> 
> 标签：python, multithreading, multiprocessing

我创建了一个简单的子字符串搜索程序，它递归地查看文件夹并扫描大量文件。该程序使用 Boyer-Moore-Horspool 算法，在解析大量数据方面非常有效。

程序链接：http: [//pastebin.com/KqEMMMCT](http://pastebin.com/KqEMMMCT)

我现在要做的是让它更有效率。如果查看代码，您会注意到搜索了三个不同的目录。我希望能够创建一个同时搜索每个目录的进程/线程，这将**大大**加快我的程序。

实现这一点的最佳方法是什么？我已经做了一些初步研究，但我的实现并不成功。它们似乎在 25 分钟左右的处理后就死掉了（现在单进程版本需要将近 24 小时才能运行；数据量很大，并且有 648 个唯一关键字。）

我使用多处理 API 进行了各种实验，并将所有各种文件压缩为 3 个文件（每个目录一个），然后通过 mmap() 将文件映射到内存，但是我不确定这是否是合适的路线去，然后 b：我的程序总是在随机点死掉，调试绝对是一场噩梦。

是的，我已经进行了广泛的谷歌搜索，但我在池/线程/子进程/多线程/多处理之间感到非常困惑。

我不是要你写我的程序，只是帮助我理解实施解决方案所需的思考过程。谢谢！

仅供参考：我计划在程序运行后开源代码。我认为这是一个相当有用的脚本，并且在线提供的多处理现实世界实现的示例有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:51:45.693

做什么取决于是什么减慢了这个过程。

如果您正在单个磁盘上读取，并且磁盘 I/O 会减慢您的速度，那么多个线程/进程可能只会减慢您的速度，因为读取头现在会随着不同的线程获得控制权而到处跳跃，而您将花费更多时间寻找而不是阅读。

如果您在单个磁盘上读取，并且处理速度会减慢您的速度，那么您可能会通过使用多处理来分析数据获得加速，但您仍然应该从单个线程读取以避免寻道时间延迟（这通常是非常长，多毫秒）。

如果您正在从多个磁盘读取数据，并且磁盘 I/O 会降低您的速度，那么多个线程或进程可能会提高您的速度。线程更容易，并且由于您的大部分延迟时间都远离处理器，因此 GIL 不会妨碍您。

如果您正在从多个磁盘读取数据，并且处理速度会减慢您的速度，那么您需要使用多处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:42:57.340

多处理比多线程（IMO）更容易理解/使用。出于我的原因，我建议阅读TAOUP 的[这一部分](http://catb.org/~esr/writings/taoup/html/ch07s03.html#id2923889)。基本上，一个线程所做的一切，一个进程所做的，*只有程序员必须做操作系统可以处理的所有事情*。共享资源（内存/文件/CPU 周期）？学习线程的锁定/互斥体/信号量等。如果您使用进程，操作系统会为您执行此操作。

我建议建立 4 个以上的流程。1 从硬盘驱动器中提取数据，其他三个查询下一块。也许是第五个过程将它们粘在一起。

这自然适合[生成器](http://www.dabeaz.com/generators-uk/index.html)。请参阅[genfind](http://www.dabeaz.com/generators-uk/genfind.py)示例以及使用它的[gengrep](http://www.dabeaz.com/generators-uk/gengrep.py)示例。

同样在同一个站点上，查看[协程](http://www.dabeaz.com/coroutines/index.html)部分。

# uikit - cocos2d项目中的CoreGraphics drawRect EXEC BAD ACCESS

> ID：10109667
> 
> 赞同：0
> 
> 时间：2012-04-11T16:03:08.993
> 
> 标签：uikit, cocos2d-iphone, core-graphics, exc-bad-access, drawrect

我在这里找到了一个有趣的谜语。我的 cocos2d 项目使用 UIView 来显示比常规警报视图更好的弹出窗口。为了在弹出窗口的大小上更加灵活，我在 drawRect 方法中绘制了背景。

但首先是我如何实现 cocos2d 和 UIKit 的层次结构： ![等级制度](../Images/cc228563b5c284de05ed99f8a95e61ed.png)

每个 UIKit 元素都被添加到 RootViewController。每个 CCNode 到 EAGLView。（如果有人有更好的解决方案来混合这些世界，请不要等待告诉我！）不幸的是每个 UIKit 视图都在 cocos 节点前面。

当我将第一个弹出窗口添加到 RootViewController 时，一切正常。但是，如果我删除第一个弹出窗口并向 RootViewController 添加新的弹出窗口，则会发生错误访问。它仅在与 cocos2d 结合使用时才会崩溃。

我使用 Ray Wenderlichs CoreGraphics 101 教程中的代码。 ![迷恋;撞车;崩溃](../Images/dcf1c6d78009f9a92bfc32cbe70e649e.png)

context 和 strokeColor 不为零。另一个重要信息：我使用 ARC 并且支持 iOS 4.2 及更高版本。

完整的代码可以在 raywenderlich.com 或下面找到

```
void drawLinearGradient(CGContextRef context, CGRect rect, CGColorRef startColor, CGColorRef endColor)
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat locations[] = { 0.0, 1.0 };

    NSArray *colors = [NSArray arrayWithObjects:(__bridge id)startColor, (__bridge id)endColor, nil];

    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, 
                                                        (__bridge CFArrayRef) colors, locations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextSaveGState(context);
    CGContextAddRect(context, rect);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGContextRestoreGState(context);

    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);
}

CGRect rectFor1PxStroke(CGRect rect)
{
    return CGRectMake(rect.origin.x + 0.5, rect.origin.y + 0.5, rect.size.width - 1, rect.size.height -1);
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect frame = CGRectInset(self.bounds, 2, 2);

    CGContextSetShadowWithColor(context, CGSizeMake(0, 0), 3.0, shadowColor);

    CGRect strokeRect = CGRectInset(frame, -2.0, -2.0);
    CGContextSetStrokeColorWithColor(context, strokeColor);
    CGContextSetLineWidth(context, 2.0);
    CGContextStrokeRect(context, rectFor1PxStroke(strokeRect));
    drawLinearGradient(context, frame, gradient1, gradient2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:22:09.657

ARC 发布名为 strokeColor 的 CGColorRef。一种解决方法是将其替换为 CGFloat 数组并使用 CGContextSetStrokeColor 代替 CGContextSetStrokeColorWithColor

这个答案解决了这个问题： [App crash when using __bridge for CoreGraphics gradient on ARC](https://stackoverflow.com/questions/9963530/app-crashes-when-using-bridge-for-coregraphics-gradient-on-arc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:09:52.523

我同意 zeiteisen ，ARC 发布 CGColorRef 和最简单的方法来解决这个问题

*   用 **CGContextSetStrokeColor**（上下文，组件）替换 CGContextSetStrokeColorWithColor
*   *将strokeColor*的UIColor 更改为“RGB CGFloat components array”，如下所示：

    ```
    static CGFloat red, green, blue, alpha;

    - (void)getRGBComponents:(CGFloat [4])components forColor:(UIColor *)color {

        [color getRed:&red green:&green blue:&blue alpha:&alpha];//To fetch CGFloat RGB components

        for (int component = 0; component < 4; component++) {      
            switch (component) {
                case 0:
                    components[component] = red;
                    break;
                case 1:
                    components[component] = green;
                    break;
                case 2:
                    components[component] = blue;
                    break;
                case 3:
                    components[component] = alpha;
                    break; 
               default:
                   break;
        }
    } 
    ```

    }

像这样使用这个方法：

```
CGFloat components[4];
UIColor *strokeColor=[UIColor greyColor];//My color 
[self getRGBComponents:components forColor:strokeColor];//'components' will be substituted in CGContextSetStrokeColor
NSLog(@"%f %f %f %f", components[0], components[1], components[2],components[3]); 
```

# c# - 搜索列表最快的方法是什么 跨多个属性？

> ID：10109670
> 
> 赞同：10
> 
> 时间：2012-04-11T16:03:26.217
> 
> 标签：c#, linq

我有一个继承的过程，我正在从另一种语言转换为 C#。过程中的许多步骤循环通过可能是很多记录（100K-200K）来进行计算。作为这些过程的一部分，它通常会查找另一个列表以检索一些值。我通常会将这种事情移动到 SQL 语句中（我们已经能够做到），但在这些情况下，并没有真正简单的方法来做到这一点。在某些地方，我们尝试将代码转换为存储过程，但发现它的工作效果不如我们希望的那样好。

实际上，代码是这样做的：

```
var match = cost.Where(r => r.ryp.StartsWith(record.form.TrimEnd()) && 
                       r.year == record.year && 
                       r.period == record.period).FirstOrDefault(); 
```

cost 是本地列表类型。如果我只在一个字段上进行搜索，我可能会将其移至字典中。记录也不总是唯一的。

显然，这真的很慢。

我遇到了可以构建索引的开源库[I4O](https://github.com/ericksoa/i4o)，但是它在各种查询中对我来说都失败了（而且我真的没有时间尝试调试源代码）。它也不适用于 .StartsWith 或 .Contains （StartsWith 更为重要，因为许多原始查询都利用了搜索“A”会在“ABC”中找到匹配项的事实）。

有没有其他项目（开源或商业）做这种事情？

编辑：

我根据反馈进行了一些搜索，发现[Power Collections](http://powercollections.codeplex.com/)支持具有非唯一键的字典。

我测试了 ToLookup() 效果很好 - 它仍然没有原始代码那么快，但它至少是可以接受的。它从 45 秒减少到 3-4 秒。我将看一下其他查找的 Trie 结构。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T16:30:32.237

循环遍历 100K-200K 项目的列表不会花费很长时间。使用嵌套循环 (n^2) 在列表中查找匹配项确实需要很长时间。我推断这就是您正在做的事情（因为您已分配给本地匹配变量）。

如果您想快速将项目匹配在一起，请使用`.ToLookup`.

```
var lookup = cost.ToLookup(r => new {r.year, r.period, form = r.ryp});

foreach(var group in lookup)
{
  // do something with items in group.
} 
```

对于基于键的匹配，您的起始条件很麻烦。解决该问题的一种方法是在生成密钥时忽略它。

```
var lookup = cost.ToLookup(r => new {r.year, r.period });
var key = new {record.year, record.period};
string lookForThis = record.form.TrimEnd();
var match = lookup[key].FirstOrDefault(r => r.ryp.StartsWith(lookForThis)) 
```

理想情况下，您将创建一次查找并将其重用于许多查询。即使您没有...即使您每次都创建查找，它仍然会比 n^2 快。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-11T16:15:37.017

当然，你可以做得比这更好。让我们首先考虑字典不是仅在您想查询一个字段时才有用；您可以很容易地拥有一个字典，其中键是聚合许多字段的不可变值。所以对于这个特定的查询，一个直接的改进是创建一个键类型：

```
// should be immutable, GetHashCode and Equals should be implemented, etc etc
struct Key
{
    public int year;
    public int period;
} 
```

然后将您的数据打包到您当前列表的类型`IDictionary<Key, ICollection<T>>`或类似位置。`T`这样，您可以大大减少每次迭代中考虑的行数。

下一步将不是使用 an`ICollection<T>`作为值类型，而是使用[trie](http://en.wikipedia.org/wiki/Trie)（[这](http://geekyisawesome.blogspot.com/2010/07/c-trie.html)看起来很有希望），这是一种专门用于查找具有指定前缀的字符串的数据结构。

最后，免费的微优化将`TrimEnd`脱离循环。

现在当然，所有这些仅适用于给定的特定示例，并且由于您的情况的其他细节可能需要重新审视，但无论如何您应该能够从这个或类似的东西中获得实际收益。

# antlr - 为什么我的 antlr 语法似乎正确解析了这个输入？

> ID：10109672
> 
> 赞同：1
> 
> 时间：2012-04-11T16:03:26.623
> 
> 标签：antlr, antlr3

我使用python在ANTLR中创建了一个小语法（一种可以接受ID列表的数字列表的语法），但是当我输入一个字符串时`December 12 1965`，ANTLR将在文件上运行并显示没有错误使用以下代码（并且我使用的所有 python 代码都通过 @main 嵌入）：

```
grammar ParserLang;

options {
    language=Python;
}

@header {
import sys
import antlr3

from ParserLangLexer import ParserLangLexer
}

@main { 
def main(argv, otherArg=None):
    char_stream = antlr3.ANTLRInputStream(open(sys.argv[1],'r'))
    lexer = ParserLangLexer(char_stream)

    tokens = CommonTokenStream(lexer)
    parser = ParserLangParser(tokens);

    rule   = parser.entry_rule()
}

program     : idList EOF
            | integerList EOF
            ;

idList      : ID whitespace idList 
            | ID
            ;

integerList : INTEGER whitespace integerList 
            | INTEGER
            ;

whitespace  : (WHITESPACE | COMMENT) +;

ID            : LETTER (DIGIT | LETTER)*;
INTEGER       : (NONZERO_DIGIT DIGIT*) | ZERO ;
WHITESPACE    : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ;
COMMENT       : ('/*' .* '*/') | ('//' .* '\n') { $channel = HIDDEN; } ;

fragment ZERO            : '0' ;
fragment DIGIT         : '0' .. '9';
fragment NONZERO_DIGIT : '1' .. '9';
fragment LETTER        : 'a' .. 'z' | 'A' .. 'Z'; 
```

难道我做错了什么？

编辑：当我使用具有相同语法的 ANTLRWorks 输入时，会引发 NoViableAltException。如何通过代码获取该错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:41:53.690

我无法重现它。`rule = parser.entry_rule()`当我在修复语法（应该是：）中的错误后从您的输入生成词法分析器和解析器`rule = parser.program()`并解析输入`"December 12 1965"`（作为文件的输入或纯字符串）时，我收到以下错误：

```
line 1:0 no viable alternative at input u'December' 
```

这可能看起来很奇怪，因为这可能是`idList`. 事实是，您的语法还包含一个错误和一件可以改进的小事：

*   `WHITESPACE`并且`COMMENT`被放置在`HIDDEN`通道上，因此在解析器规则中不可用（至少，在不改变解析器读取其令牌的通道的情况下......）；
*   a`COMMENT`在输入的末尾，即没有 a`\n`在末尾，将不会被正确标记。最好像这样定义单行注释：`'//' ~('\r' | '\n')*`. `WHITESPACE`毕竟，尾随换行符将被规则捕获。

由于该规则，解析器无法匹配 a `idList`（或 a `integerList`），因此`whitespace`会产生指向第一个标记 ( `'December'`) 的错误。

这是一个有效的语法（如预期的那样）：

```
grammar ParserLang;

options {
    language=Python;
}

@header {
import sys
import antlr3

from ParserLangLexer import ParserLangLexer
}

@main { 
def main(argv, otherArg=None):
    lexer = ParserLangLexer(antlr3.ANTLRStringStream('December 12 1965'))
    parser = ParserLangParser(CommonTokenStream(lexer))
    parser.program()
}

program     : idList EOF
            | integerList EOF
            ;

idList      : ID+
            ;

integerList : INTEGER+
            ;

ID          : LETTER (DIGIT | LETTER)*;
INTEGER     : (NONZERO_DIGIT DIGIT*) | ZERO ;
WHITESPACE  : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ { $channel = HIDDEN; } ;
COMMENT     : ('/*' .* '*/' | '//' ~('\r' | '\n')*)   { $channel = HIDDEN; } ;

fragment ZERO          : '0' ;
fragment DIGIT         : '0' .. '9';
fragment NONZERO_DIGIT : '1' .. '9';
fragment LETTER        : 'a' .. 'z' | 'A' .. 'Z'; 
```

运行上述语法生成的解析器也会产生错误：

```
line 1:9 missing EOF at u'12' 
```

但这是意料之中的：在 a 之后`idList`，解析器期望的是`EOF`，但它却遇到`'12'`了。

# html - 让 IE 像其他浏览器一样显示的技巧

> ID：10109674
> 
> 赞同：2
> 
> 时间：2012-04-11T16:03:28.880
> 
> 标签：html, css, internet-explorer

我一直在为大学做一个 PHP 项目，因为我对 PHP 很垃圾，所以我让设计变得非常简单，这样我就可以专注于编程方面的事情。现在编程正在运行，我正在设计。该网站在 Chrome 和其他 webkit 浏览器中看起来不错，但在 IE9 中看起来很糟糕。主要问题是...

1 - 背景图像将 div 扩展到完整图像大小，而在 webkit 中仅填充 div 大小。

2 - 内容不居中，而是向左浮动。

有谁知道我可以用来让 IE 像其他浏览器一样执行的任何脚本/黑客？我目前唯一使用的是 Modernizr。

如果有帮助，您可以在这里查看该网站 - [http://newmedia.leeds.ac.uk/ug10/cs10cwh/pod/index.php](http://newmedia.leeds.ac.uk/ug10/cs10cwh/pod/index.php)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:10:49.360

Modernizr 可以提供帮助，特别是如果您使用的是 html5 和 css3 等更新的东西。另一件可以帮助的事情是样板代码，我个人喜欢[html5reset](http://html5reset.org/)。

其中一件特别的事情将对您有很大帮助：如果我在 IE 中查看您的网站，它会说它进入 Quirks 模式，使 IE7、8 和 9 的行为......嗯......古怪:) 放置以下您的 head 部分中的元标记以改进 IE 的内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

您可以通过调出开发人员工具栏 (F12) 来查看 IE 正在运行的“浏览器模式”和“文档模式”，您可以临时调整浏览会话以查看如果文档模式为“IE9 标准”会发生什么。

* * *

一个简短的更新。您可能还想尝试使用[w3 验证器](http://validator.w3.org/)。它为您的网站提供的错误之一：

```
Line 1, Column 15: Comments seen before doctype. Internet Explorer will 
go into the quirks mode. 
```

未关闭的标签也有一些错误，这可能会导致渲染失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:10:11.140

我们所做的是为 IE 版本使用单独的 .css，并在根目录中确定浏览器并包含该 .css

因此，包括所有浏览器的普通 css，对于 IE 版本，包括覆盖主样式表的必要部分的特定 .css 文件。

编辑：就像 Jeroen 所说，强制 IE 以真实模式呈现，而不是一些兼容或怪癖的东西。

# c++ - 为什么对象的重载运算符 = 需要返回？

> ID：10109676
> 
> 赞同：2
> 
> 时间：2012-04-11T16:03:44.577
> 
> 标签：c++, operator-overloading, return, inner-classes, assignment-operator

```
class sample
{
  private:
    int radius;
    float x,y;
  public:
    circle()
     {

     }
    circle(int rr;float xx;float yy)
     {
      radius=rr;
      x=xx;
      y=yy;
     }

 circle operator =(circle& c)
     {
      cout << endl<<"Assignment operator invoked";
      radius=c.radius;
      x=c.x;
      y=c.y;
      return circle(radius,x,y);
     }

}

int main()
{
 circle c1(10,2.5,2.5);
 circle c1,c4;
 c4=c2=c1;
} 
```

在重载的“=”函数中，语句

```
radius=c.radius;
x=c.x;
y=c.y; 
```

本身使 c2 的所有数据成员都等于 c1 的，那么为什么需要 return 呢？类似地，在 c1=c2+c3 中，c2 和 c3 使用重载的 + 运算符相加，并将值返回给 c1，但这不会变成 c1=，所以我们不应该使用另一个 = 运算符来分配总和c2和c3到c1？我很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:13:15.230

它不是*必需*的（即`void`返回类型是合法的），但标准做法是返回一个引用以`*this`允许赋值链接*而没有任何效率开销*。例如：

```
class circle
{
    int radius;
    float x, y;

public:
    circle()
      : radius(), x(), y()
    { }

    circle(int rr, float xx, float yy)
      : radius(rr), x(xx), y(yy)
    { }

    circle& operator =(circle const& c)
    {
        std::cout << "Copy-assignment operator invoked\n";
        radius = c.radius;
        x = c.x;
        y = c.y;
        return *this;
    }
};

int main()
{
    circle c1(10, 2.5f, 2.5f);
    circle c2, c3;
    c3 = c2 = c1;
} 
```

*正如您所做的那样，按value*返回一个新对象肯定是非标准的，因为它会创建不必要的临时对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T16:20:54.410

这不是强制性的，但返回一个引用`*this`允许人们链接分配，就像你可以使用基本类型一样。

但是，只有当赋值运算符通过值或`const`引用获取其参数时，这才有效；你的不`const`参考，这是你应该只在特殊情况下做的事情。

```
circle & operator=(circle const & c) {
    radius = c.radius;
    x = c.x;
    y = c.y;
    return *this;
} 
```

使用这样的运算符，`c4=c2=c1`将编译，并将具有分配 to 的效果`c1`，然后分配 to的`c2`新值。`c2``c4`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:13:27.050

是为了支持的成语`a = b = c`。

你也做错了；回报不应该`circle &`，`circle`回报应该是`return *this;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:18:13.020

您可以从赋值运算符函数中返回 *this 以返回对当前对象的引用。您还可以使

```
circle& operator = (circle& c)
{
// do assignments
    return *this;
} 
```

# ios - 检测一个点是否在 MKPolygon 叠加层内

> ID：10109677
> 
> 赞同：18
> 
> 时间：2012-04-11T16:03:45.397
> 
> 标签：ios, objective-c, mkmapview, mapkit

我希望能够判断水龙头是否在 MKPolygon 内。

我有一个 MKPolygon：

```
CLLocationCoordinate2D  points[4];

points[0] = CLLocationCoordinate2DMake(41.000512, -109.050116);
points[1] = CLLocationCoordinate2DMake(41.002371, -102.052066);
points[2] = CLLocationCoordinate2DMake(36.993076, -102.041981);
points[3] = CLLocationCoordinate2DMake(36.99892, -109.045267);

MKPolygon* poly = [MKPolygon polygonWithCoordinates:points count:4];

[self.mapView addOverlay:poly];  

//create UIGestureRecognizer to detect a tap
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(foundTap:)];
tapRecognizer.numberOfTapsRequired = 1;
tapRecognizer.numberOfTouchesRequired = 1;
[self.mapView addGestureRecognizer:tapRecognizer]; 
```

它只是科罗拉多州的基本轮廓。

我设置了纬度/经度转换：

```
-(IBAction)foundTap:(UITapGestureRecognizer *)recognizer
{
    CGPoint point = [recognizer locationInView:self.mapView];

    CLLocationCoordinate2D tapPoint = [self.mapView convertPoint:point toCoordinateFromView:self.view];
} 
```

但如果我的分接点在 MKPolygon 内，我不确定如何技术。似乎没有一种方法可以进行此检查，所以我猜我需要将 MKPolygon 转换为 CGRect 并使用 CGRectContainsPoint。

MKPolygon 有一个 .points 属性，但我似乎无法让它们退出。

有什么建议么？

编辑：

以下两种解决方案都适用于 iOS 6 或更低版本，但会在 iOS 7 中中断。在 iOS 7 中，该`polygon.path`属性总是返回`NULL`. 安娜女士很友好地[在这里提供了另一个 SO 问题的解决方案](https://stackoverflow.com/questions/19014926/detecting-a-point-in-a-mkpolygon-broke-with-ios7-cgpathcontainspoint)。它涉及从多边形点创建自己的路径以传递到`CGPathContainsPoint()`.

我的多边形图像：

![在此处输入图像描述](../Images/881be4fb4280597106a6b5019cff61e0.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T23:02:59.967

我创建了这个 MKPolygon 类别以防有人想使用它。似乎运作良好。您必须考虑内部多边形（即多边形中的孔）：

```
@interface MKPolygon (PointInPolygon)
  -(BOOL) pointInPolygon:(CLLocationCoordinate2D) point mapView: (MKMapView*) mapView;
@end

@implementation MKPolygon (PointInPolygon)

-(BOOL) pointInPolygon:(CLLocationCoordinate2D) point mapView: (MKMapView*) mapView {
    MKMapPoint mapPoint = MKMapPointForCoordinate(point);
    MKPolygonView * polygonView = (MKPolygonView*)[mapView viewForOverlay:self];
    CGPoint polygonViewPoint = [polygonView pointForMapPoint:mapPoint];
    return CGPathContainsPoint(polygonView.path, NULL, polygonViewPoint, NO) && 
        ![self pointInInteriorPolygons:point mapView:mapView];
}

-(BOOL) pointInInteriorPolygons:(CLLocationCoordinate2D) point mapView: (MKMapView*) mapView {
    return [self pointInInteriorPolygonIndex:0 point:point mapView:mapView];
}

-(BOOL) pointInInteriorPolygonIndex:(int) index point:(CLLocationCoordinate2D) point mapView: (MKMapView*) mapView {
    if(index >= [self.interiorPolygons count])
        return NO;
    return [[self.interiorPolygons objectAtIndex:index] pointInPolygon:point mapView:mapView] || [self pointInInteriorPolygonIndex:(index+1) point:point mapView:mapView];
}

@end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T15:44:38.593

你的`foundTap`方法：

```
-(IBAction)foundTap:(UITapGestureRecognizer *)recognizer
{
    CGPoint point = [recognizer locationInView:self.mapView];

    CLLocationCoordinate2D tapPoint = [self.mapView convertPoint:point toCoordinateFromView:self.view];

    [self pointInsideOverlay:tapPoint];

    if (isInside) 
     {
       ....
     }
} 
```

这是从上一个调用的方法，以检查该点是否在覆盖范围内：

```
-(void)pointInsideOverlay:(CLLocationCoordinate2D )tapPoint 
{
    isInside = FALSE; 

    MKPolygonView *polygonView = (MKPolygonView *)[mapView viewForOverlay:polygonOverlay];

    MKMapPoint mapPoint = MKMapPointForCoordinate(tapPoint);

    CGPoint polygonViewPoint = [polygonView pointForMapPoint:mapPoint];

    BOOL mapCoordinateIsInPolygon = CGPathContainsPoint(polygonView.path, NULL, polygonViewPoint, NO);

        if ( !mapCoordinateIsInPolygon )

            //we are finding points that are inside the overlay
        {
            isInside = TRUE;
        }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-16T07:12:57.823

我从字符串中的 xml 文件中获取 MKPolygon 数据点。我将数据字符串解析为点数组并使用[http://alienryderflex.com/polygon/中给出的方法](http://alienryderflex.com/polygon/)

这个对我有用....

```
-(BOOL)isPoint:(CLLocationCoordinate2D)findLocation inPloygon:(NSArray*)polygon{

    NSMutableArray *tempPolygon=[NSMutableArray arrayWithArray:polygon];
    int   i, j=(int)tempPolygon.count-1 ;
    bool  oddNodes=NO;
    double x=findLocation.latitude;
    double y=findLocation.longitude;

    for (i=0; i<tempPolygon.count; i++) {
        NSString*coordString=[tempPolygon objectAtIndex:i];
        NSArray*pointsOfCoordString=[coordString componentsSeparatedByString:@","];
        CLLocationCoordinate2D point=CLLocationCoordinate2DMake([[pointsOfCoordString objectAtIndex:1] doubleValue], [[pointsOfCoordString objectAtIndex:0] doubleValue]);
        NSString*nextCoordString=[tempPolygon objectAtIndex:j];
        NSArray*nextPointsOfCoordString=[nextCoordString componentsSeparatedByString:@","];
        CLLocationCoordinate2D nextPoint=CLLocationCoordinate2DMake([[nextPointsOfCoordString objectAtIndex:1] doubleValue], [[nextPointsOfCoordString objectAtIndex:0] doubleValue]);

        if ((point.longitude<y && nextPoint.longitude>=y)
            ||  (nextPoint.longitude<y && point.longitude>=y)) {
            if (point.latitude+(y-point.longitude)/(nextPoint.longitude-point.longitude)*(nextPoint.latitude-point.latitude)<x) {
                oddNodes=!oddNodes; }}
        j=i; }

    return oddNodes;

} 
```

我的多边形（NSArray）对象在字符串中，例如`@"-89.860021,44.944266,0"`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-28T11:02:39.963

感谢@Steve Stomp，这是**Swift 4.2的更新版本**

```
extension MKPolygon {
    func contain(coor: CLLocationCoordinate2D) -> Bool {
        let polygonRenderer = MKPolygonRenderer(polygon: self)
        let currentMapPoint: MKMapPoint = MKMapPoint(coor)
        let polygonViewPoint: CGPoint = polygonRenderer.point(for: currentMapPoint)
        if polygonRenderer.path == nil {
            return false
        }else{
            return polygonRenderer.path.contains(polygonViewPoint)
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-11T18:32:44.497

确定一个点是否在任意多边形中并非易事，Apple 不将其作为 MKPolygon 的一部分提供也就不足为奇了。您可以访问这些点，这使您可以遍历边缘。

要确定点 p 是否在多边形 s 内，请将每条边视为 s 中的一条有向线段。如果来自 p 的任何固定方向（通常平行于 X 或 Y 轴）的射线与线段相交，则取射线与该有向线段的叉积的 Z 分量的符号。如果 Z 分量 > 0，则将 1 添加到计数器。如果小于 0，则减 1。实现这一点的技巧是避免当边缘几乎平行于光线或光线穿过顶点时出现问题（它只需要计数一次，而不是每条边缘一次） .

当您对 s 中的所有边执行此操作时，您将计算光线与多边形轮廓相交的次数，如果边是从左到右，则添加，如果它是从右到左，你减去了。如果结果总和为零，则您在多边形之外。否则你就在里面。

有许多可能的优化。其中之一是在更完整的测试之前进行快速边界框测试。另一个是在所有边上都有一个边界的数据结构，以简单地丢弃不与射线相交的边。

编辑： AXB 的 Z 分量（ A 与 B 的叉积）由下式给出：

```
a.x * b.y - a.y * b.x 
```

由于您只关心标志，因此您可以检查

```
a.x * b.y > a.y * b.x 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-25T19:15:52.767

这在#Swift 4.2 中对我有用：

```
extension MKPolygon {
    func isCoordinateInsidePolyon(coordinate: CLLocationCoordinate2D) -> Bool {
        let polygonRenderer = MKPolygonRenderer(polygon: self)
        let currentMapPoint: MKMapPoint = MKMapPoint(coor)
        let polygonViewPoint: CGPoint = polygonRenderer.point(for: currentMapPoint)
        if polygonRenderer.path == nil {
            return false
        }else{
            return polygonRenderer.path.contains(polygonViewPoint)
        }
    }
} 
```

# c - 为什么 x86 的 INC 指令不是原子的？

> ID：10109679
> 
> 赞同：21
> 
> 时间：2012-04-11T16:03:48.247
> 
> 标签：c, assembly, x86-64, atomic

我读过 x86 的 INC 指令不是原子的。我的问题是怎么来的？假设我们在 x86-64 上递增一个 64 位整数，我们可以用一条指令来完成，因为 INC 指令同时适用于内存变量和寄存器。那么它为什么不是原子的呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T16:07:01.500

为什么会这样？处理器内核仍然需要读取存储在内存位置的值，计算它的增量，然后将其存储回来。读取和存储之间存在延迟，同时另一个操作可能会影响该内存位置。

即使是乱序执行，处理器内核也足够“聪明”，不会绊倒自己的指令，也不会负责在时间间隙内修改此内存。但是，另一个内核可能发出了修改该位置的指令，DMA 传输可能影响了该位置，或者其他硬件以某种方式触及了该内存位置。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-11T16:59:42.123

现代 x86 处理器作为其执行管道的一部分，将 x86 指令“编译”成较低级别的操作集；英特尔将这些 uOps 称为 AMD rOps，但归根结底是某些类型的*单个 x86 指令*由 CPU 中的实际功能单元分*几个步骤*执行。
例如，这意味着：

```
INC EAX 
```

像单个“迷你操作”一样执行`uOp.inc eax`（让我这么称呼它-它们没有暴露）。
对于其他操作数，情况会有所不同，例如：

```
INC DWORD PTR [ EAX ] 
```

低级分解虽然看起来更像：

```
uOp.load tmp_reg, [ EAX ]
uOp.inc tmp_reg
uOp.store [ EAX ], tmp_reg 
```

因此不是原子执行的。另一方面，如果您在*前面*加上`LOCK INC [ EAX ]`，这将告诉管道的“编译”阶段以不同的方式分解，以确保满足原子性要求。

这样做的原因当然是别人提到的——速度；如果不是总是需要的话，为什么要使某些东西成为原子的并且必然会变慢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:51:44.677

除非您需要，否则您*真的*不想要有保证的原子操作，来自[Agner Fog](http://www.agner.org/)的[软件优化资源](http://www.agner.org/optimize/)：[instruction_tables.pdf](http://www.agner.org/optimize/instruction_tables.pdf) (1996 – 2017)：

> 带有 LOCK 前缀的指令有很长的延迟，这取决于缓存组织和可能的 RAM 速度。如果有多个处理器或内核或直接内存访问 (DMA) 设备，则所有锁定的指令都将锁定高速缓存行以进行独占访问，这可能涉及 RAM 访问。**一个 LOCK 前缀通常花费超过一百个时钟周期，即使在单处理器系统上也是如此。**这也适用于带有内存操作数的 XCHG 指令。

# ruby-on-rails - 如何测试 img 标签是否指向现有图像？

> ID：10109680
> 
> 赞同：2
> 
> 时间：2012-04-11T16:03:48.667
> 
> 标签：ruby-on-rails, cucumber, capybara

我在 RoR 应用程序上使用 Cucumber 和 Capybara 进行 BDD。我有以下功能

```
Feature: List profiles
  In order to know that the people behind the profiles are real people 
  As a lurker
  I want to be able to find who is registed and see their profile picture

Background: Profiles have been added to the database, some with picture attached
  Given some profiles exist
  And  I am on the home page

Scenario: Search by city, avatars should be there
  When I search for a city with profiles
  Then I should see some result profiles with avatar 
```

底层 Capybara 步骤文件包含：

```
Then /^I should see some result profiles with avatar$/ do
  page.should have_css("#profile_search_results .profile img.avatar", :count => some_profiles)
end 
```

此步骤检查页面是否包含

```
<div id="#profile_search_results>
  <img class="avatar" src="" /> 
```

但是...我还想检查图像是否存在（它不是损坏的图像）。

我怎样才能在我的 Capybara 步骤中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:02:31.810

无需使用 Selenium 或任何其他驱动程序即可进行检查的方法是从 img 元素中提取 src 属性（感谢 MrDanA），并在访问该 URL 后检查状态代码：

```
page.should have_css("#profile_search_results .profile img.avatar", :count => some_profiles)
img = page.first(:css, "#profile_search_results .profile img.avatar")
visit img[:src]
page.status_code.should be 200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:09:32.667

您可以使用 Capybara 的 finder 方法找到有`img`问题的标签，然后获取它的`src`属性（例如`src = element[:src]`）。然后你可以使用 Ruby 来查看它是否存在。所以总而言之，它看起来像这样：

```
element = page.first(:css, "...")
src = element[:src]
assert File.exists?("#{Rails.root}/#{src}") 
```

我没有尝试过这个来确保给定的路径`File.exists?`是正确的。但是，如果您首先在测试中将其打印出来，您会看到它的外观以及是否需要对其进行一些修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T03:00:08.567

假设测试在 Firefox 中运行，您可以检查`naturalWidth`图像的属性。如果为 0，则图像损坏。

```
if find('img.avatar')[:naturalWidth] == 0
  raise('image broken')
end 
```

# javascript - 是否有 JavaScript 替代 isNaN()？

> ID：10109683
> 
> 赞同：0
> 
> 时间：2012-04-11T16:03:54.003
> 
> 标签：javascript

> **可能重复：**
> [isNaN() 的 JavaScript 逻辑](https://stackoverflow.com/questions/10094738/javascript-logic-for-isnan)

嘿，我只想检查文本框中输入的值是否不是数字或不使用函数`isNaN();`。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:09:01.987

```
parseFloat(value)!== +value; 
```

但是 isNaN(value) 有什么问题呢？

# c# - XSD.exe 缺少嵌套属性

> ID：10109689
> 
> 赞同：2
> 
> 时间：2012-04-11T16:04:19.997
> 
> 标签：c#, xslt, xsd

我在这里有一个扁平的 XSD：http: [//pastebin.com/tQVSH9Jp](http://pastebin.com/tQVSH9Jp)

我有一个“替代”XSLT 脚本，我正在针对它运行它来修复 XSD.exe（它忽略引用的元素），但是生成的 XSD 缺少一些属性。（`ID`不存在于`UniqueID_Type`）。

任何人都可以提供一个 XSLT 脚本来正确执行这些替换，甚至完全提供另一种解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:25:56.790

有趣的是，有人建议自己编写 xsd.exe，并且还要依赖 XmlSchemaImporter... 一方面，我认为这不是一件容易的事；其次，缺少属性的问题来自[XmlSchemaImporter](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlschemaimporter.aspx)；ImportAttributeGroupMembers 中有一个错误：它不是在寻找 XmlSchemaAttributeGroupRef，而是在检查 XmlSchemaAttributeGroup（摘录如下，由 Reflector 提供）：

```
private void ImportAttributeGroupMembers(XmlSchemaAttributeGroup group, string identifier, CodeIdentifiers members, CodeIdentifiers membersScope, string ns)
{
    for (int i = 0; i < group.Attributes.Count; i++)
    {
        object obj2 = group.Attributes[i];
        if (obj2 is XmlSchemaAttributeGroup)
        {
            ...
        }
        else if (obj2 is XmlSchemaAttribute)
        {
           ...
        }
     }
     ...
} 
```

有一个类似的实用程序，[xsd2code](http://xsd2code.codeplex.com/)，在进入 XML 模式重构 (XSR) 之前，我会尝试使用原始 XSD。

如果你想走这条路，我推荐XSR 的[QTAssistant](http://paschidev.com)（我与之相关）。我已经用最新版本 (4.0.21) 尝试了你的 XSD，它工作正常。我已经在[这里](http://pastebin.com/DeSRpigz)发布了结果。

使用 XSD.exe 为您指出有缺陷的片段生成的代码（我只是显示字段）现在显示 ID 属性的 idField：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.opentravel.org/OTA/2003/05")]
public partial class UniqueID_Type {

    private CompanyNameType companyNameField;

    private string uRLField;

    private string typeField;

    private string instanceField;

    private string idField;

    private string iD_ContextField;

    ...
} 
```

特定于您的设置的是必须设置为 true 的 InlineAttributeGroups：

![QTAssistant 设置 InlineAttributeGroups](../Images/02a861337d77c2c11daee8e9acb257a2.png)

如果您对有关使用 QTAssistant 进行重构的更多详细信息感兴趣，请查看[这篇文章](https://stackoverflow.com/questions/8378648/xsd-structure-to-csv-as-path-type-cardinality)，同样是关于 SO。无论如何，我已经发布了整个重构模式，请随意使用它......

# android - 在 Android 中使用多个 SpanObject 或多个 TextView 更好吗？

> ID：10109694
> 
> 赞同：9
> 
> 时间：2012-04-11T16:04:42.950
> 
> 标签：android, performance, garbage-collection, textview

我有一个`ListView`，每个都有一个`TextView`和`TextView`几个项目，每个项目都有一个简短的描述。为了对项目和描述应用不同的样式，我使用了多个 span 对象：`ClickableSpan`、`ForegroundColorSpan`、`BackgroundColorSpan`和.`AbsoluteSizeSpan``StyleSpan`

平均而言，`ListView`有 10`TextView`秒，每个`TextView`有 10 对项目/描述，每对使用大约 6`SpanObject`秒，因此总共约 600`SpanObject`秒`ListView`。并且当用户单击其中一个项目时，它`ListView`会被清除并再次重绘，从而生成另一组 600`SpanObject`秒。

所以我想知道`TextView`为每个项目和每个描述创建一个并通过 XML 格式化它是否是一个更好的主意，而不是`TextView`用 span 设置 s 的样式，这样大约有 200 `TextView`s 而没有`SpanObject`s。

作为说明，我没有从这种方法开始，因为视图的层次结构树会更复杂，并且`TextView`创建 s 的成本更高，`SpanObject`但是现在我看到`SpanObject`我正在创建的 s 的数量我不确定是什么更好。我也在考虑开始编写一个回收机制，但不确定它是否值得，或者这对 Android GC 来说应该不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T01:48:13.753

我知道你问这个问题已经有几年了，我希望你现在已经找到了答案，但我想无论如何我都会回答你的问题。

对于任何 android 设备，您拥有的 TextViews 和 SpanObjects 的数量都非常昂贵，并且每次加载它们不仅会导致延迟，而且可能会导致与 OOM 相关的崩溃（内存不足）。

解决这个问题的方法是使用 RecyclerView 和 CardView。首先，编写你的 RecyclerView 适配器。在这个类中，编写一个静态类来加载每张卡片中的所有 TextView 和其他项（卡片本质上是一个列表项）。这样，您的所有项目都在 OnCreate 上加载，并且不会连续生成。如果您使用片段，这将特别有用。此链接可能对您有用：http: [//www.binpress.com/tutorial/android-l-recyclerview-and-cardview-tutorial/156](http://www.binpress.com/tutorial/android-l-recyclerview-and-cardview-tutorial/156)

这是一个带有静态类的 RecyclerView 适配器类的示例：

```
public class ContactAdapter extends RecyclerView.Adapter<ContactAdapter.ContactViewHolder> {

    private List<ContactInfo> contactList;

    public ContactAdapter(List<ContactInfo> contactList) {
            this.contactList = contactList;
    }

    @Override
    public int getItemCount() {
          return contactList.size();
    }

    @Override
    public void onBindViewHolder(ContactViewHolder contactViewHolder, int i) {
        ContactInfo ci = contactList.get(i);
        contactViewHolder.vName.setText(ci.name);
        contactViewHolder.vSurname.setText(ci.surname);
        contactViewHolder.vEmail.setText(ci.email);
        contactViewHolder.vTitle.setText(ci.name + " " + ci.surname);
   }

   @Override
   public ContactViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
        View itemView = LayoutInflater.
                    from(viewGroup.getContext()).
                    inflate(R.layout.card_layout, viewGroup, false);

        return new ContactViewHolder(itemView);
   }

   //Static class that loads all card item components

  public static class ContactViewHolder extends RecyclerView.ViewHolder {
     protected TextView vName;
     protected TextView vSurname;
     protected TextView vEmail;
     protected TextView vTitle;

     public ContactViewHolder(View v) {
          super(v);
          vName =  (TextView) v.findViewById(R.id.txtName);
          vSurname = (TextView)  v.findViewById(R.id.txtSurname);
          vEmail = (TextView)  v.findViewById(R.id.txtEmail);
          vTitle = (TextView) v.findViewById(R.id.title);
      }
 }
} 
```

# c# - 在主窗体中使用另一个类的方法

> ID：10109698
> 
> 赞同：1
> 
> 时间：2012-04-11T16:05:21.730
> 
> 标签：c#, forms, class, methods

我正在尝试使用带有 C# 的 Windows 窗体创建一个待办事项列表程序（我正在使用 Visual Studio 2010，如果相关的话），用户可以在其中添加新任务并设置标题及其描述，以及删除和编辑任务。

我通过将所有内容放入一个表单类并为每个任务的删除和编辑按钮放入相同的删除和编辑代码（我已将其设置为最多可以添加 5 个任务）来使其工作，但它非常杂乱无章，我想将所有代码用于设置任务的标题，描述以及编辑和删除在一个单独的类中，并在需要的地方简单地调用每个方法。

在过去的两周里，我在整个互联网上搜索，试图找到一些有用的东西，但我是编码新手，我发现的很多东西都不是相对的，或者我只是不明白。我已经使用`form f1 = new form1();`和使用过`f1.AddTask();`，我没有收到任何错误，但是当我运行程序并单击按钮时没有任何反应。

我是这个网站的新手，不太确定需要什么，但我愿意做任何事情来让它发挥作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:23:38.537

请参阅[以下链接](https://stackoverflow.com/questions/8166896/how-do-i-invoke-a-method-in-a-userform-from-parent-form/8168642#8168642) 与示例类似，以从一个到另一个调用方法，和/或设置值。这些是基于 WinForms 的。如果您使用 WPF 并使用 Windows 而不是窗体，只需更改任何窗体或窗口的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:31:34.243

尝试构建一个额外的类来放置所有重复的代码。

```
public class CommonMethods() {

    public static void AddTask(Control c, Task t) {  /* code to add a task */ }
    public static void EditTask(Control c, Task t) {  /* code to edit a task */ }
    public static void DeleteTask(Control c, Task t) {  /* code to delete a task */ }

/*
etc... other methods here
*/
} 
```

然后在您的表单中调用这些方法并仅将您需要添加/编辑/删除任务的控件传递给该方法。

# c++ - 在 C++ 中嵌入 matplotlib

> ID：10109700
> 
> 赞同：11
> 
> 时间：2012-04-11T16:05:37.700
> 
> 标签：c++, python, matplotlib

我正在使用 C++ 代码从套接字读取消息，并尝试使用 交互式地绘制它`matplotlib`，但似乎 Python 代码会阻塞主线程，无论我使用`show()`or`ion()`和`draw()`。`ion()`并且`draw()`不会在 Python 中阻塞。

`matplotlib`知道如何在 C++ 代码中进行交互绘图吗？

一个例子真的很好。

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T13:09:47.313

您也可以尝试创建一个新线程来调用阻塞函数，这样它就不会阻塞主程序循环中的 IO。使用线程对象数组并循环查找未使用的对象，创建一个线程来执行阻塞调用，并在它们完成时让另一个线程加入它们。

这段代码是我为了演示我的意思是使用线程来获得阻塞函数的伪异步行为的快速拼凑...我没有编译它或梳理它，它只是向你展示如何完成这。

```
#include <pthread.h>
#include <sys/types.h>
#include <string>
#include <memory.h>
#include <malloc.h>
#define MAX_THREADS 256 // Make this as low as possible!
using namespace std;
pthread_t PTHREAD_NULL;
typedef string someTypeOrStruct;
class MyClass
{
    typedef struct
    {
        int id;
        MyClass *obj;
        someTypeOrStruct input;
    } thread_data;

    void draw();    //Undefined in this example
    bool getInput(someTypeOrStruct *);  //Undefined in this example
    int AsyncDraw(MyClass * obj, someTypeOrStruct &input);
    static void * Joiner(MyClass * obj);
    static void * DoDraw(thread_data *arg);
    pthread_t thread[MAX_THREADS], JoinThread;
    bool threadRunning[MAX_THREADS], StopJoinThread;

    bool exitRequested;
public:
    void Main();
};

bool MyClass::getInput(someTypeOrStruct *input)
{
}

void MyClass::Main()
{
    exitRequested = false;
    pthread_create( &JoinThread, NULL, (void *(*)(void *))MyClass::Joiner, this);

    while(!exitRequested)
    {
        someTypeOrStruct tmpinput;
        if(getInput(&tmpinput))
            AsyncDraw(this, tmpinput);
    }

    if(JoinThread != PTHREAD_NULL)
    {
        StopJoinThread = true;
        pthread_join(JoinThread, NULL);
    }
}

void *MyClass::DoDraw(thread_data *arg)
{
    if(arg == NULL) return NULL;
    thread_data *data = (thread_data *) arg;
    data->obj->threadRunning[data->id] = true;
    // -> Do your draw here <- //
    free(arg);
    data->obj->threadRunning[data->id] = false; // Let the joinThread know we are done with this handle...
}

int MyClass::AsyncDraw(MyClass *obj, someTypeOrStruct &input)
{
    int timeout = 10; // Adjust higher to make it try harder...
    while(timeout)
    {
        for(int i = 0; i < MAX_THREADS; i++)
        {
            if(thread[i] == PTHREAD_NULL)
            {
                thread_data *data = (thread_data *)malloc(sizeof(thread_data));
                if(data)
                {
                    data->id = i;
                    data->obj = this;
                    data->input = input;

                    pthread_create( &(thread[i]), NULL,(void* (*)(void*))MyClass::DoDraw, (void *)&data);
                    return 1;
                }
                return 0;
            }
        }
        timeout--;
    }
}

void *MyClass::Joiner(MyClass * obj)
{
    obj->StopJoinThread = false;
    while(!obj->StopJoinThread)
    {
        for(int i = 0; i < MAX_THREADS; i++)
            if(!obj->threadRunning[i] && obj->thread[i] != PTHREAD_NULL)
            {
                pthread_join(obj->thread[i], NULL);
                obj->thread[i] = PTHREAD_NULL;
            }
    }
}

int main(int argc, char **argv)
{
    MyClass base;
    base.Main();
    return 0;
} 
```

这样，您可以在进行抽签时继续接受输入。

~~修复了上面的代码确实可以编译，一定要加上-lpthread

# java - Android 错误：应用程序已意外停止，请重试

> ID：10109705
> 
> 赞同：0
> 
> 时间：2012-04-11T16:05:51.893
> 
> 标签：java, android

每当我尝试在模拟器中运行它时，我一直在开发一个 android 和应用程序它给了我这个错误：应用程序 Explicit_intents (process.com.andrewbook.explicit_intents) 已意外停止，请再试一次。

这是代码：

```
package com.andrewbook.explicit_intents;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class Main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final EditText et = (EditText) findViewById(R.id.editText1);
        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(Main.this, Second.class);
                intent.putExtra("thetext", et.getText().toString());
                startActivity(intent);
            }
        });
    }

} 
```

这是 logcat 输出：

```
04-09 13:20:32.632: E/AndroidRuntime(637): FATAL EXCEPTION: main
04-09 13:20:32.632: E/AndroidRuntime(637): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.andrewbook.explicit_intents/com.andrewbook.explicit_intents.Explicit_IntentsActivity}: java.lang.ClassNotFoundException: com.andrewbook.explicit_intents.Explicit_IntentsActivity in loader dalvik.system.PathClassLoader[/data/app/com.andrewbook.explicit_intents-2.apk]
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.os.Looper.loop(Looper.java:123)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-09 13:20:32.632: E/AndroidRuntime(637):  at java.lang.reflect.Method.invokeNative(Native Method)
04-09 13:20:32.632: E/AndroidRuntime(637):  at java.lang.reflect.Method.invoke(Method.java:507)
04-09 13:20:32.632: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-09 13:20:32.632: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-09 13:20:32.632: E/AndroidRuntime(637):  at dalvik.system.NativeStart.main(Native Method)
04-09 13:20:32.632: E/AndroidRuntime(637): Caused by: java.lang.ClassNotFoundException: com.andrewbook.explicit_intents.Explicit_IntentsActivity in loader dalvik.system.PathClassLoader[/data/app/com.andrewbook.explicit_intents-2.apk]
04-09 13:20:32.632: E/AndroidRuntime(637):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-09 13:20:32.632: E/AndroidRuntime(637):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-09 13:20:32.632: E/AndroidRuntime(637):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-09 13:20:32.632: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-09 13:20:32.632: E/AndroidRuntime(637):  ... 11 more
04-09 13:20:32.662: W/ActivityManager(75):   Force finishing activity com.andrewbook.explicit_intents/.Explicit_IntentsActivity
04-09 13:20:33.171: W/ActivityManager(75): Activity pause timeout for HistoryRecord{4075b080 com.andrewbook.explicit_intents/.Explicit_IntentsActivity}
04-09 13:20:44.131: W/ActivityManager(75): Activity destroy timeout for HistoryRecord{4075b080 com.andrewbook.explicit_intents/.Explicit_IntentsActivity}
04-09 13:21:57.092: D/SntpClient(75): request time failed: java.net.SocketException: Address family not supported by protocol
04-09 13:25:32.681: I/Process(637): Sending signal. PID: 637 SIG: 9
04-09 13:25:32.702: I/ActivityManager(75): Process com.andrewbook.explicit_intents (pid 637) has died.
04-09 13:25:32.791: W/InputManagerService(75): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4075fea8
04-09 13:26:57.101: D/SntpClient(75): request time failed: java.net.SocketException: Address family not supported by protocol
04-09 13:28:59.951: I/ActivityManager(75): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.andrewbook.explicit_intents/.Explicit_IntentsActivity } from pid 246
04-09 13:29:00.021: I/ActivityManager(75): Start proc com.andrewbook.explicit_intents for activity com.andrewbook.explicit_intents/.Explicit_IntentsActivity: pid=646 uid=10034 gids={}
04-09 13:29:00.782: D/AndroidRuntime(646): Shutting down VM
04-09 13:29:00.812: W/dalvikvm(646): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-09 13:29:00.872: E/AndroidRuntime(646): FATAL EXCEPTION: main
04-09 13:29:00.872: E/AndroidRuntime(646): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.andrewbook.explicit_intents/com.andrewbook.explicit_intents.Explicit_IntentsActivity}: java.lang.ClassNotFoundException: com.andrewbook.explicit_intents.Explicit_IntentsActivity in loader dalvik.system.PathClassLoader[/data/app/com.andrewbook.explicit_intents-2.apk]
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.os.Looper.loop(Looper.java:123)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-09 13:29:00.872: E/AndroidRuntime(646):  at java.lang.reflect.Method.invokeNative(Native Method)
04-09 13:29:00.872: E/AndroidRuntime(646):  at java.lang.reflect.Method.invoke(Method.java:507)
04-09 13:29:00.872: E/AndroidRuntime(646):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-09 13:29:00.872: E/AndroidRuntime(646):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-09 13:29:00.872: E/AndroidRuntime(646):  at dalvik.system.NativeStart.main(Native Method)
04-09 13:29:00.872: E/AndroidRuntime(646): Caused by: java.lang.ClassNotFoundException: com.andrewbook.explicit_intents.Explicit_IntentsActivity in loader dalvik.system.PathClassLoader[/data/app/com.andrewbook.explicit_intents-2.apk]
04-09 13:29:00.872: E/AndroidRuntime(646):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-09 13:29:00.872: E/AndroidRuntime(646):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-09 13:29:00.872: E/AndroidRuntime(646):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-09 13:29:00.872: E/AndroidRuntime(646):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-09 13:29:00.872: E/AndroidRuntime(646):  ... 11 more 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:08:45.683

我想你忘了在 AndroidManifest 中添加 Activity

> java.lang.ClassNotFoundException:com.andrewbook.explicit_intents.Explicit_IntentsActivity in loaderdalvik.system.PathClassLoader[/data/app/com.andrewbook.explicit_intents-2.apk]

ClassNotFound 的唯一原因是清单中的路径错误，或者清单中未声明活动

在清单中添加该行应该可以

```
<activity android:name="com.andrewbook.explicit_intents.Explicit_IntentsActivity" 
                  android:label="@string/someLabel"/> 
```

# android - 为什么滚动列表视图会大大增加内存使用量？

> ID：10109706
> 
> 赞同：2
> 
> 时间：2012-04-11T16:05:55.517
> 
> 标签：android, listview, memory

我有一个可能包含 15 行的列表视图。每行（列表项）包含 2 个文本字段。

当我第一次创建列表视图时，几乎没有内存使用，但在我触摸它滚动时，内存使用量增加了约 2 MB。

这往往会使 GC 运行，这使得滚动非常不稳定。

我正在重用视图，所以这不可能。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:10:29.230

如果您启用了drawingCache（默认情况下），那么每个子视图将在滚动期间呈现为位图。这将增加内存使用量，但不应与您遇到的波动有关。您是否在您的 bindView/getView 方法中执行任何额外步骤（例如分配位图）？

# joomla2.5 - Joomla 2.5 内容插件

> ID：10109708
> 
> 赞同：1
> 
> 时间：2012-04-11T16:06:06.210
> 
> 标签：joomla2.5

我正在尝试将一个简单的插件部署到 Joomla 2.5 安装中。类声明之外的插件中的代码运行并将两个脚本标签添加到头部。但是，其中的代码什么也不做。我无法更改 $article->title 或 $article->text。我从不同的文章中逐字复制和粘贴，但似乎一切都只谈论 1.5。我发现的 1.7 内容只提到将 onPrepareContent 更改为 onContentPrepare。两者似乎都没有做任何事情。我将不胜感激任何帮助！

```
 <?php
    // No direct access.
    defined( '_JEXEC' ) or die( 'Restricted access' );

    class plgContentPicasaGallery extends JPlugin
    {
        /**
         *
         * @param   string  The context of the content being passed to the plugin.
         * @param   mixed   An object with a "text" property.
         * @param   array   Additional parameters.
         * @param   int     Optional page number. Unused. Defaults to zero.
         * @return  boolean True on success.
         */
        public function onContentBeforeDisplay($context, &$article, &$params, $page = 0)
        {

            if (is_object($article)) {
                $article->text = "omfg, wtf?";
                return true;
            } else {
                $article = "omfg, I'm not an object, wtf?";
                return true;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:49:28.067

Joomla documentation & tutorials a little bit out dated, new framework changed few things. To find proper signatures simply look at `/plugins/content/...` files.

Below is proper function signature & phpdoc for `onContentPrepare`.

```
/**
 * @param   string  The context of the content being passed to the plugin.
 * @param   object  The article object.  Note $article->text is also available
 * @param   object  The article params
 * @param   int     The 'page' number
 */
public function onContentPrepare($context, &$article, &$params, $page = 0)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:50:01.717

我对 Joomla 的冷漠压倒了我的理智。我正在编辑服务器上的插件文件，我期待更新插件。谢谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:28:35.463

你可以使用这个方法

```
jimport('joomla.form.helper');
$urla= JRequest::getVar('id');
$urlview= JRequest::getVar('view');
if ($urlview=='article')
{}
if ($urla==10<- number id article )
{} 
```

我知道框架 joomla 很好，但它用于理解方法

# c# - 防止在我们调用 TabPages.Clear() 时调用 SelectedIndexChanged() 方法

> ID：10109709
> 
> 赞同：0
> 
> 时间：2012-04-11T16:06:08.993
> 
> 标签：c#, winforms

C# WinForms：当我调用 TabPages 的 Clear() 方法时：

```
tabControl.TabPages.Clear(); 
```

它也在触发 SelectedIndexChanged 事件

```
tabControl_SelectedIndexChanged 
```

. 但我不想那样。当我调用 Clear() 时，是否有一种正式的甚至是骇人听闻的方法来防止调用它？我仍然希望在用户单击选项卡时调用它，但我只是不希望在其他地方调用 Clear() 方法时自动调用它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:11:35.480

正如 Sani 评论的那样，这是一个简单的解决方法：

```
tabControl.SelectedIndexChanged -= tabControl_SelectedIndexChanged;
tabControl.TabPages.Clear();
tabControl.SelectedIndexChanged += tabControl_SelectedIndexChanged; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:25:45.183

除了我所做的评论之外，您还可以将其设为扩展方法：

```
public static void ClearAllTabPages(this TabControl tc, EventHandler eh)
{
  tc.SelectedIndexChanged -= eh;
  tc.TabPages.Clear();
  tc.SelectedIndexChanged += eh;
} 
```

现在，您无需记住在要清除 TabPages 的每个地方都取消钩子并重新钩子事件处理程序。你只需调用：

```
tabControl.ClearAllTabPages(tabControl_SelectedIndexChanged); 
```

**注意：**
我没有尝试过这段代码，但它应该可以工作。

# plugins - 插件如何从 AddinRoot 检索和处理数据？

> ID：10109710
> 
> 赞同：1
> 
> 时间：2012-04-11T16:06:14.870
> 
> 标签：plugins, mono.addins

我打算在我的 C#/.NET 项目中使用 Mono.Addins。

为此，我阅读了 codeplex.com 中提供的编程指南和参考手册，从 github.com 下载了最新版本的源代码，并成功构建了源包中包含的所有示例。但是，无论是在线文档还是示例项目，都试图通过创建 ExtensionNode 的新实例来演示如何扩展 AddinHost。似乎遗漏了一些关于如何从 AddinHost 检索和处理数据的内容。

例如，假设我有一个处理 RTF 文档的文本编辑器，并且我想为插件提供以自己的方式查找/替换文档的可能性（例如，Regex / Forward / Backward / Whole document / Current Line. ..)，所以插件需要先从 AddinHost 获取内容。这是我需要回答的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:45:10.800

如果我理解得很好，您必须维护对 RTF 文档的引用，我认为在您的插件的初始化代码中提供它可能是一种获取它的方法。

或者您可以使用一种“IFindReplaceAddin”方法，例如“FindReplace”，它接受 RTF 文档作为参数并返回详细说明的文档。

# jquery - jquery ui滑块-反转开始和结束位置

> ID：10109712
> 
> 赞同：0
> 
> 时间：2012-04-11T16:06:33.880
> 
> 标签：jquery, jquery-ui

我有一个垂直滑块。有什么方法可以让处理程序从上到下工作吗？

```
$( ".dragscrollbar" ).slider({
            orientation: "vertical"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:10:21.167

你需要这样做：

```
$( ".dragscrollbar" ).slider({ value: 100 }); 
```

如果您更改了最大值，只需更改它是否说 100 是您的新最大值

# c# - ASP.NET，使用 DataReader 的正确方法

> ID：10109719
> 
> 赞同：4
> 
> 时间：2012-04-11T16:06:55.320
> 
> 标签：c#, asp.net, sqldatareader, datareader, advantage-database-server

我想知道使用 DataReader 的正确方法。（C# 和优势数据库）

假设我的数据库中有 Order、Item 和 Customer 表。

我需要从cs文件中的每个表中读取数据。

所以我打开了数据库连接并使用 DataReader 读取数据。

喜欢，

```
AdsConnection conn = new AdsConnection("~~~~");
AdsCommand cmd;
AdsDataReader reader;

conn.open();
cmd = conn.CreateCommand();
cmd.CommandText = "Select * from order";
reader = cmd.ExecuteReader(); 
```

现在我需要阅读另一张桌子。但我认为我需要关闭连接和阅读器并重新连接并重新定义它们。

所以，我定义了另一个读者。

```
conn.Close();
conn.Open();
AdsDataReader itemReader;
cmd.CommandText = " Select * from item";
itemReader = cmd.ExecuteReader();

.
.
reader.close();
itemReader.close();
conn.Close(); 
```

可以吗？像这样使用？有谁知道更好的方法，请指教~

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:11:28.673

ADO.NET 2.0 引入了一个称为 MARS- Multiple Active Result Sets 的特性。这允许您向数据库提交多个查询并通过一次调用检索它们。

这是 MSDN 文章，其中包含使用 MARS 的代码示例：

[http://msdn.microsoft.com/en-us/library/yf1a7f4f(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yf1a7f4f(v=vs.80).aspx)

请注意，连接字符串将 MultipleActiveResultSets 属性设置为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T17:43:16.433

（因为更合适的答案已被删除）

您可以保持连接打开，但作为一种良好做法，您应该尽快关闭命令和阅读器。

最好的方法是将每个这些资源放在一个`using() { }`声明中。

例如，如果将每个查询放在单独的方法中是可能或有益的，则为每个连接使用单独的连接。只要您的数据库支持连接池，就不会损失性能。

还有一点：

*   不要使用`SELECT *`，拼出列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T01:39:44.740

i suggest u to learn or use SQLHelper

[http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html](http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html)

# arrays - 使用 JNA 访问包含结构数组的结构

> ID：10109723
> 
> 赞同：0
> 
> 时间：2012-04-11T16:07:04.177
> 
> 标签：arrays, struct, jna

我有一个 C 库，它使用一个包含另一个结构的数组的结构。我在确定通过 JNA 从 Java 访问它的正确方法时遇到了一些困难。

C代码如下：

```
typedef struct Item {
    int x;
} Item;
typedef struct ItemList {
    int itemCount;
    Item* items; // an array of Item
} ItemList;

int addItemList(ItemList list)
{
    int result = 0;
    int i = 0;

    for (i=0; i<list.itemCount; i++)
    {
        result += (list.items)[i].x;
    }
    return result;
} 
```

我可以通过以下示例从 C 应用程序中使用它：

```
ItemList list;
list.itemCount = 3;
list.items = (Item*)malloc(sizeof(Item) * 3);
list.items[0].x = 1;
list.items[1].x = 2;
list.items[2].x = 3;
int y = addItemList(list);
printf("%d\n", y); 
```

我尝试使用以下 Java 代码从 Java（通过 JNA）访问它：

```
public interface CLibrary extends Library {
    public static class Item extends Structure {
        public static class ByValue extends Item implements Structure.ByValue {}
        public int x;
    }
    public static class ItemList extends Structure {
        public static class ByValue extends ItemList implements Structure.ByValue {}
        public static class ByReference extends ItemList implements Structure.ByReference {}
        public int itemCount;
        public Item[] items;
    }
    int addItemList(ItemList.ByValue items);
}

...

CLibrary.Item[] items = (CLibrary.Item[])new CLibrary.Item().toArray(3);
items[0].x = 1;
items[1].x = 2;
items[2].x = 3;
CLibrary.ItemList.ByValue list = new CLibrary.ItemList.ByValue();
list.items = items;
list.itemCount = 3;
int y = clib.addItemList(list);
System.out.println(y); 
```

但是，上述 Java 会导致核心转储。

我尝试更改 ItemList 定义（在 Java 中）以使用 Item.ByValue 数组：

```
public static class ItemList extends Structure {
    public static class ByValue extends ItemList implements Structure.ByValue {}
    public static class ByReference extends ItemList implements Structure.ByReference {}
    public int itemCount;
    public Item.ByValue[] items;
} 
```

然后将用法（在Java中）更改为：

```
CLibrary.Item.ByValue[] items = (CLibrary.Item.ByValue[])new CLibrary.Item.ByValue().toArray(3);
items[0].x = 1;
items[1].x = 2;
items[2].x = 3;
CLibrary.ItemList.ByValue list = new CLibrary.ItemList.ByValue();
list.items = items;
list.itemCount = 3;
int y = clib.addItemList(list); 
```

但结果相同。

我也尝试将 C 函数签名更改为

```
int addItemList(ItemList* list); 
```

并相应地调整了 C 实现。然后我更改了 Java 代码以将 CLibrary.ItemList.ByReference 传递给 addItemList - 但结果相同。

我错过了什么？使用 JNA 将包含结构数组的结构从 Java 传递到 C 的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:51:10.473

正如我在上面看到的那样，您遇到了问题。

在您的代码之上，您`Item.ByValue`在 *Item* *上使用

但它应该是`Item.ByReference`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T20:21:32.203

通过使用以下 Java 代码，我能够使用原始 C 代码：

```
public interface CLibrary extends Library {
    public static class Item extends Structure {
        public static class ByReference extends Item implements Structure.ByReference {}
        public int x;
    }
    public static class ItemList extends Structure {
        public static class ByValue extends ItemList implements Structure.ByValue {}
        public int itemCount;
        public Item.ByReference items;
    }
    int addItemList(ItemList.ByValue items);
}

…

CLibrary.ItemList.ByValue list = new CLibrary.ItemList.ByValue();
list.items = new CLibrary.Item.ByReference();
list.itemCount = 3;
CLibrary.Item[] items = (CLibrary.Item[])list.items.toArray(3);
items[0].x = 1;
items[1].x = 2;
items[2].x = 3;
int y = clib.addItemList(list);
System.out.println(y); 
```

# php - php共享内存和信号量，避免键冲突

> ID：10109724
> 
> 赞同：1
> 
> 时间：2012-04-11T16:07:06.620
> 
> 标签：php, semaphore, shared-memory

在使用 php 共享内存和信号量时。如何首先检查信号量和共享内存块的密钥是否与其他 php 实例发生冲突？另外，当使用 shm_attach 函数创建一个新块时，有没有办法验证该块还不存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:38:59.180

我真的不明白你在这里问什么。共享内存的全部意义在于它是*共享*的——因此能够在不同的 PHP 实例中使用相同的密钥几乎是一项要求。

通常人们使用文件系统路径（语义上有意义）通过 ftok() 函数生成密钥（没有意义）。如果你想生成一个不被任何其他 php 实例共享的随机密钥，那么使用 tempnam() 创建一个新文件，然后 ftok 它。

> 使用 shm_attach 函数创建新块时，有没有办法验证该块尚未存在？

是的 - 在你创建它之后把它放在那里。如果在这两个步骤之间它是空的，那么它是新的。

# javascript - 如何在之间更改文本

> ID：10109736
> 
> 赞同：1
> 
> 时间：2012-04-11T16:07:57.930
> 
> 标签：javascript

对不起，愚蠢的问题，但我无法弄清楚（初学者）

我有一个 UL 列表，其中包含以下项目：

```
<div id="some_list"> 
<li ><a href="#">Hardware &ndash; HP Proliant DL145G2 AAA</a> 
```

如何将 OnClick 的 AAA 更改为 BBB？

我假设该函数应该调用 $(document).ready，但我不知道我应该在函数 change_list 中做什么。

```
<script type="text/javascript">
function change_list(aaa){
...
}
$(document).ready(function () {
    $('#some_list li a').click(change_list);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:11:53.820

这是[*函数参数*](http://api.jquery.com/text/#text2)版本的一个很好的用途`.text()`：

```
$('#some_list li a').click(function() {
    $(this).text(function(index, text) {
         return text.replace('AAA', 'BBB');
    });
}); 
```

许多 jQuery 函数的函数参数版本特别适合“读-修改-写”操作。

它们避免了编写单​​独的代码来*读取*值、*修改*它，然后将值*写*回 DOM 的需要。

替代方案看起来像这样：

```
$('#some_list li a').click(function() {
    var oldText = $(this).text();
    var newText = oldText.replace('AAA', 'BBB');
    $(this).text(newText);
}); 
```

请注意它现在如何调用`.text()`两次 - 一次检索值，然后再次写入新值。

在这种情况下，节省的成本并不高，但是当您想要修改属性或 CSS 值等内容时，该方法特别强大，因为它避免了大量的代码重复。

函数参数方法的另一个优点是它允许您将逻辑与 DOM 操作分开。您可以编写只关心修改字符串的琐碎修改函数，并让 jQuery 处理 DOM 操作。

# c# - 为什么默认 == 实现不调用 Equals？

> ID：10109738
> 
> 赞同：26
> 
> 时间：2012-04-11T16:08:03.537
> 
> 标签：c#, java, .net

> **可能重复：**
> [为什么 ReferenceEquals 和 == 运算符的行为与 Equals 不同](https://stackoverflow.com/questions/8344016/why-referenceequals-and-operator-behave-different-from-equals)

运算符的默认实现`==`按引用比较对象。因此，当您覆盖 Equals （默认行为相同）时，您还必须指定`==`and`!=`运算符，以便它们调用 Equals （并使其在每个层次结构类中，因为`==`and`!=`运算符不是虚拟的）。

我的问题是为什么会这样？为什么要通过引用而不是使用 Equals 来比较对象`==`？`!=`我想这样一个基本的事情应该是有原因的。

**更新。**

评论：我假设`==`应该依赖于 Equals（但反之亦然），因为您可以在基类中覆盖 Equals 并在派生类中自动使用此实现。`==`如果 Equals在其实现中使用它就行不通，因为`==`它不是虚拟的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T16:17:05.250

我相信主要原因是`==`静态**运算**符，可以在*需要实例*`null`时调用对象。`Equals`

 *例如：

```
Foo foo1 = null;
Foo foo2 = null;

Console.WriteLine(foo1 == foo2); // cannot use Equals 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T16:16:29.027

Object.ReferenceEquals 是`static`比较*引用*相等性的成员。甚至值类型在传递给该方法之前也会被装箱。

怎么样`Equals`，它是一种`virtual`方法，这意味着它允许消费者*覆盖*功能。

因此，行为的默认实现`==`假定默认比较（参考）对您来说是可以的，如果您需要特定的东西，在这种情况下，框架为您提供了一个*可以*被覆盖的`virtual`方法。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:37:12.407

“原因”是因为有时需要知道 A*是否与*B 相同，而不是它们是否仅仅是彼此“相等”。

例如，两个对象彼此相等可能对您的大多数业务逻辑有意义，但是，您可能还需要利用一些并发实用程序来执行原子操作，其中结果取决于对象身份，而不是相等性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:31:19.190

== 自 C 以来一直存在并用作参考，它已集成到语言语法中，而不必回复方法调用（即使两者的结果相同）。

简单地说，因为 C# 不是 Objective C :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T16:42:04.857

在 Java 中，有时可以通过简单地比较引用来快速确定两个标识符是否相等。`==`有它的位置。如果你看一个IDE生成的`equals`方法，你经常会发现第一个比较是引用相等，毕竟，如果对象引用相同，为什么还要检查字段呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T17:12:52.847

我将其称为功能。通过引用，两个相同的对象仍然是两个独立的对象。如果您覆盖 Equals，那么您可以确定两个对象是否相同。即使两个对象是相同的，我也可能想测试它们是否是同一个对象。我经常有理由覆盖 equals 但从来不需要覆盖 == != （但该语言提供了该选项）。

使用字符串他们会覆盖 == 而我不喜欢它。尽管字符串是一种引用类型，但相等运算符（== 和 !=）被定义为比较字符串对象的值，而不是引用（7.9.7 字符串相等运算符）。这使得对字符串相等性的测试更加直观。请参阅此介绍的问题。 [WPF ListBox 滚动到底部](https://stackoverflow.com/questions/9999859/wpf-listbox-scroll-to-the-bottom/10000879#10000879)**

# java - 将android应用程序与sql数据库连接？

> ID：10109739
> 
> 赞同：1
> 
> 时间：2012-04-11T16:08:04.097
> 
> 标签：java, php, android, mysql

我尝试了这个连接数据库的例子，我有简单的数据库，这是 java 类：

```
package com.cvele.android.sqlconn;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class SqlconnActivity extends Activity {
    /** Called when the activity is first created. */

    TextView txt;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout rootLayout = new LinearLayout(getApplicationContext());  
        txt = new TextView(getApplicationContext());  
        rootLayout.addView(txt);  
        setContentView(rootLayout);  
        txt.setText("Connecting..."); 
        txt.setText(getServerData(LINK_PHP)); 
    }
    public static final String LINK_PHP = "http://10.0.2.2/sajt.php"; 

    private String getServerData(String returnString) {

        InputStream is = null;
        String result = "";
        ArrayList<NameValuePair>nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("year","1970"));

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(LINK_PHP);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                Log.i("log_tag","id: "+json_data.getInt("id")+
                    ", name: "+json_data.getString("name")+
                    ", sex: "+json_data.getString("sex")+
                    ", birthyear: "+json_data.getInt("birthyear")
                    );

                returnString += "\n\t" + jArray.getJSONObject(i); 
            }
        }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return returnString; 
    }
} 
```

这是php：

```
<?

$databasehost = "127.0.0.1";
$databasename = "peopledata";
$databaseusername ="nikola";
$databasepassword = "nikola";

$con = mysql_connect($databasehost,$databaseusername,$databasepassword) or die(mysql_error());
mysql_select_db($databasename) or die(mysql_error());
$query = mysql_query("SELECT * FROM people WHERE birthyear >'".$_REQUEST['year']."'");

if (mysql_errno()) { 
    header("HTTP/1.1 500 Internal Server Error");
    echo $query.'\n';
    echo mysql_error(); 
}
else
{
    $rows = array();
    while($r = mysql_fetch_assoc($query)) {
        $rows[] = $r;
    }
    print json_encode($rows);
}
?> 
```

因此，当我构建它时，它总是只写字符串 LINK_PHP ="http://10.0.2.2/sajt.php" 中的“”之间的内容。我无法从我的数据库中获取任何数据。我的问题是，为什么它总是写在我的应用程序上..？提前致谢。这就是我得到的： ![在此处输入图像描述](../Images/076148ba7428d1423e17b4ab1dee5036.png)

好的，这就是我在 LogCat 中得到的：

```
04-11 16:02:33.064: I/dalvikvm(811): threadid=3: reacting to signal 3
04-11 16:02:33.256: I/dalvikvm(811): Wrote stack traces to '/data/anr/traces.txt'
04-11 16:02:33.544: I/dalvikvm(811): threadid=3: reacting to signal 3
04-11 16:02:33.604: I/dalvikvm(811): Wrote stack traces to '/data/anr/traces.txt'
04-11 16:02:33.724: E/log_tag(811): Error in http connection android.os.NetworkOnMainThreadException
04-11 16:02:33.724: E/log_tag(811): Error converting result java.lang.NullPointerException
04-11 16:02:33.744: E/log_tag(811): Error parsing data org.json.JSONException: End of input at character 0 of 
04-11 16:02:33.944: D/gralloc_goldfish(811): Emulator without GPU emulation detected.
04-11 16:02:34.044: I/dalvikvm(811): threadid=3: reacting to signal 3
04-11 16:02:34.104: I/dalvikvm(811): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:54:55.713

1.  您不能`NETWORK`在同一个线程上运行您的活动（来自较新版本的 Android SDK）。
2.  为此，请继续实施`Asynctask`. 即使考虑到内存，它也会处理您的所有任务。
3.  也有`Runnable`线程，但要通过`AsyncTask`.
4.  获取输入流。制作一个`while loop`阅读流并`append`使用`String`.
5.  现在，如果您有 XML，则按`Document`对象解析 XML。为此，通过`DocumentBuilderFactory`. （xml 的示例）。
6.  现在，从`Document`（对象**文档**中的实例）对象获取数据`doc.getElementByTagName("yourxmltaghere")`；
7.  但是，如果您使用 JSON，请保留您的`JSON`. 如果它有子对象，则`for`循环直到`mArray.length`然后一一获取您的数据。

上面，您说`Value <?xml of type java.lang.String cannot be converted to JSONArray`，这意味着您正在尝试将您的 XML 转换为 JSON。所以，我这里没有你的`CASTING`代码。但是，我通过以下方式做到了这一点。

```
InputStream is = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();
String line = 
while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
} 

String xml = sb.toString();                         
JSONObject baseObject = XML.toJSONObject(xml);

JSONObject todo_items = baseObject.getJSONObject("todo-items");
JSONArray todo_item = todo_items.getJSONArray("todo-item");
tempItems = GenerateVO(todo_item); 
```

这里，`XML`是我加载的类。我没有找到任何其他所以使用这个。我从`org.json`提供的包中获得了这个类`JSON`。通过谷歌获得它或从这里获得。 [XML 链接](https://github.com/douglascrockford/JSON-java/blob/master/XML.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:34:53.373

再次检查实际收到的 HTTP 消息：似乎您得到的是 XML 而不是 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:14:07.210

查阅 LogCat 输出。想一想，您会在那里看到有关异常的消息。

使用 Eclipse，您可以使用 Window>Show View>LogCat 打开 LogCat 输出。

根据这条线

```
Error in http connection android.os.NetworkOnMainThreadException 
```

您已将应用程序定位到 Honeycomb 或更高版本。[抛出异常](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)是因为您正在从主（GUI）线程执行网络操作，这是强烈禁止的：）尝试将您的应用程序定位到 API 级别 10（姜饼）只是为了尝试您的代码。但进一步将您的网络操作移至[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# database - sql 'limit' 命令如何在后台工作？

> ID：10109742
> 
> 赞同：0
> 
> 时间：2012-04-11T16:08:09.720
> 
> 标签：database, pagination, limit

我知道“限制”命令用于网站的分页。
我想知道 DB 是否能够在不线性遍历结果集的情况下找到起始索引。

例如，对于查询“查找第 100 和第 120 之间的东西”，DB 是否有办法定位查询的第 100 项而不线性超过 100 项？

如果它确实必须进行线性搜索，我猜我在任何大网站上看到的分页不是通过简单的“限制”命令实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:19:18.003

在不讨论具体实现的情况下，肯定有支持基于偏移量的瞬时查找的数据结构。想想普通的 C 整数、结构和指针数组（可能指向结构）。

除此之外，关系数据库还有多种缓存方案，因此即使第一次查找需要一段时间，后续查询也可以显着加快速度。

在实际实现的情况下，您应该始终对已索引的列进行 ORDER BY 和 LIMIT。

# html - 为什么我可以在此代码中检查超过 1 个单选按钮

> ID：10109743
> 
> 赞同：3
> 
> 时间：2012-04-11T16:08:13.537
> 
> 标签：html

```
<body>
    <form name="search_form" id="search_form" method="POST" action="search_user_data.php">
        <table border="1">
            <tr>
                <td colspan="2">
                    <input type="text" id="search" name="search" />
                </td>
                <td>
                    <input type="submit" value="Search"/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" name="id_radio"/>ID
                </td>
                <td>
                    <input type="radio" name="surname_radio"/>Surname
                </td>
                <td>
                    <input type="radio" name="dob_radio"/>DoB
                </td>
            </tr>
        </table>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T16:09:32.967

因为`name`单选按钮中的属性在单选组中必须相同。

试试这个：

```
<input type="radio" name="somename" value="id_radio"/>ID
<input type="radio" name="somename" value="surname_radio"/>Surname
<input type="radio" name="somename" value="dob_radio"/>DoB 
```

更多信息在[w3c](http://www.w3.org/TR/html401/interact/forms.html#radio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:10:11.617

该`name`属性将单选按钮链接到一个组中。用于`value`每个按钮的实际值。

```
 <td>
                <input type="radio" value="id_radio" name="btn_group"/>ID
            </td>
            <td>
                <input type="radio" value="surname_radio" name="btn_group"/>Surname
            </td>
            <td>
                <input type="radio" value="dob_radio" name="btn_group"/>DoB
            </td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:10:48.193

这是因为他们都有不同的名字。给他们 1 个名字，他们将作为一个群体行动：

```
<input type="radio" name="radioGroup" value='id'/>ID
<input type="radio" name="radioGroup" value='surname'/>Surname
<input type="radio" name="radioGroup" value='dob'/>DoB 
```

[http://www.echocho.com/htmlforms10.htm](http://www.echoecho.com/htmlforms10.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:13:14.550

您必须为所有无线电输入使用相同的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T22:44:15.163

您的问题是每个单选按钮都有不同的名称，以便它们组合在一起，它们必须具有相同的名称，看起来您混淆了名称和值。

```
<body>
    <form name="search_form" id="search_form" method="POST" action="search_user_data.php">
        <table border="1">
            <tr>
                <td colspan="2">
                    <input type="text" id="search" name="search" />
                </td>
                <td>
                    <input type="submit" value="Search"/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" name="searchType" value="id_radio"/>ID
                </td>
                <td>
                    <input type="radio" name="searchType" value="surname_radio"/>Surname
                </td>
                <td>
                    <input type="radio" name="searchType" value="dob_radio"/>DoB
                </td>
            </tr>
        </table>
    </form>
</body> 
```

# linux - 如果 linux 中有足够的 RAM 可用，则释放交换

> ID：10109744
> 
> 赞同：0
> 
> 时间：2012-04-11T16:08:15.790
> 
> 标签：linux, swap, ram

我刚刚用这些命令发布了我的交换

```
$ swapoff -av 
```

然后等了几秒

```
$ swapon -av 
```

它就像一个魅力，它可以被称为一个好的做法？

如果我有足够的空闲或缓存使用的 RAM，我认为它唯一可能。我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:15:31.463

只有当所有进程的组合内存要求适合您的 RAM 时，这才应该起作用。所以我不认为这是一个很好的做法，而是 YMMV。

实际上，swap 目前是如此缓慢，以至于它并不重要。因为访问磁盘上的一千字节（几毫秒）比访问 RAM 中的一千字节（几微秒）慢 100000 倍以上。早在 1990 年代初期，这个比率还没有那么大，当时让进程的工作集略大于 RAM 是有意义的。今天它的意义要小得多（而且 RAM 价格便宜，而且 RAM 容量很大）。

当然，几乎空闲进程的冷数据仍然被换出（特别是为了增加文件系统缓存）。

今天的交换空间也用于休眠目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:26:03.370

很好，但最好只删除缓存：

```
同步 && 回声 3 > /proc/sys/vm/drop_caches
```

# eclipse - OEPE 自动生成 EAR、Weblogic 和 Openfaces

> ID：10109748
> 
> 赞同：1
> 
> 时间：2012-04-11T16:08:30.620
> 
> 标签：eclipse, ear, openfaces

我有一个支持 JSF 2.0 的 Web 应用程序。我使用 Eclipse Indigo 和 Oracle Enterprise Pack for Eclipse (OEPE) 作为 IDE。问题是当我将 openfaces 3.0 添加到我的项目时，打开页面时出现错误：

> "java.lang.IllegalStateException: 在同一个请求中发生了第二个通知。phaseId.ordinal: 1; phaseId = RESTORE_VIEW 1; 发现注册了多个 org.openfaces.component.validation.ValidatorPhaseListener (2) . 检查您的应用程序的类路径中是否只部署了一个 JSF 实现，并且 openfaces.jar 在应用程序和服务器的库中没有重复。”

当我使用标准 Eclipse 工具导出 EAR 并通过控制台将其部署在 Weblogic 上时，一切正常。如果我在 Weblogic 属性中设置“发布为展开的存档”，也会发生同样的情况。因此，问题似乎在于`_auto_generated_ear_`设置“发布为虚拟应用程序”时应用程序使用的 OEPE 制作和使用方式。我尝试使用爆炸档案，但这几乎是不可能的，因为热插拔不起作用，而且发布时间非常长：我可以在发布应用程序时泡一杯茶喝。那么，是否可以在`_auto_generated_ear_`OEPE使用资源的方式上做一些修改呢？

# sed - 从文本文件中删除单行段落的命令行方法

> ID：10109754
> 
> 赞同：0
> 
> 时间：2012-04-11T16:08:46.563
> 
> 标签：sed, awk

我有一个包含两种类型段落的 .txt 文件：

> 一些语句和数字 (02) 等，然后是一个返回
> 更多的东西，然后是两个返回
> 
> 然后是单行段落，后跟两个返回
> 
> 随着一些更多的双行文本返回
> 一些更多的文本。

我想从文本文件中删除所有单行段落。所以结果是：

> 一些语句和数字 (02) 等，然后是一个返回
> 更多的东西，然后是两个返回
> 
> 随着一些更多的双行文本返回
> 一些更多的文本

我一直在尝试使用 sed 和 awk 来执行此操作，但我一直遇到问题，我提出了一个正则表达式，该表达式将寻找一个换行符，后跟一些字符，并以两个连续的换行符 \n\n 结尾。

有没有办法用一个衬里做到这一点，还是我必须编写一个脚本来逐行阅读并确定段落的长度并以这种方式将其剥离？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:10:53.307

```
awk -F '\n' -v RS='' -v ORS='\n\n' 'NF>1' input.txt 
```

*   当`RS`设置为空字符串时，每条记录总是在遇到的第一个空行处结束。
*   当`RS`设置为空字符串并`FS`设置为单个字符时，换行符始终充当字段分隔符。

[[阅读更多]](http://www.gnu.org/software/gawk/manual/html_node/Multiple-Line.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:20:10.870

我倾向于使用 Perl 进行面向段落的解析：

```
perl -00 -lne 'print if tr/\n/\n/ > 0' 
```

# php - 使用 PHP (Twitter Streaming API) 收集和处理数据

> ID：10109759
> 
> 赞同：0
> 
> 时间：2012-04-11T16:09:14.090
> 
> 标签：php, sockets, twitter, twitter-streaming-api, phirehose

在阅读了所有 twitter 流 API 和[Phirehose](https://github.com/fennb/phirehose/wiki/Introduction) PHP 文档之后，我遇到了一些我还没有做的事情，分别收集和处理数据。

如果我理解正确，它背后的逻辑是防止在处理阶段出现日志堵塞，这将支持收集过程。我以前看过一些例子，但它们基本上在收集后立即写入 MySQL 数据库，这似乎与 twitter 建议的做法背道而驰。

我想要一些建议/帮助是，处理这个问题的最佳方法是什么以及如何处理。人们似乎建议将所有数据直接写入文本文件，然后使用单独的函数对其进行解析/处理。但是使用这种方法，我认为它可能会占用内存。

这就是问题所在，这一切都将作为守护进程/后台进程运行。那么有没有人有解决这样的问题的经验，或者更具体地说，twitter phirehose 库？谢谢！

一些注意事项： *连接将通过一个套接字，所以我的猜测是该文件将不断被附加？不确定是否有人对此有任何反馈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:32:57.283

phirehose 库附带了一个如何执行此操作的示例。看：

*   收集：[https ://github.com/fennb/phirehose/blob/master/example/ghetto-queue-collect.php](https://github.com/fennb/phirehose/blob/master/example/ghetto-queue-collect.php)
*   消费：[https ://github.com/fennb/phirehose/blob/master/example/ghetto-queue-consume.php](https://github.com/fennb/phirehose/blob/master/example/ghetto-queue-consume.php)

这使用了一个可扩展且快速的平面文件，即：您的平均硬盘可以以 40MB/s+ 的速度顺序写入并线性扩展（即：与数据库不同，它不会随着变大而变慢）。

您不需要任何数据库功能来使用流（即：您只需要下一条推文，不涉及“查询”）。

如果您经常旋转文件，您将获得近乎实时的性能（如果需要）。

# ruby-on-rails - 通过accepts_nested_attributes_for保存时虚拟属性为零

> ID：10109760
> 
> 赞同：0
> 
> 时间：2012-04-11T16:09:19.770
> 
> 标签：ruby-on-rails

当我通过嵌套属性保存记录时，虚拟属性不会在子模型中设置。

```
class Person < ActiveRecord::Base
  has_many :houses
  accepts_nested_attributes_for :houses
end

class House < ActiveRecord::Base
  attr_accessor :house_name  #virtual
  before_save do 
    puts attributes # doesn't include house_name when saving through parent model
    puts @house_name # nil when saving through parent model
  end

end

person = Person.find(1)
person.houses.count #=> 3
person.houses.first.house_name = 'crazy house'
person.save # house_name not in attributes

house = person.houses.first
house.house_name = 'moms house'
house.save #house_name is in attributes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:34:58.693

你的代码：

```
person.houses.first.house_name = 'crazy house' 
```

获取第一个关联的`House`. `Person`没有办法知道你是否改变它的房子。我猜你只是高估了魔法。所有你需要的是`update_attributes`房子：

```
person.houses.first.update_attributes house_name: 'crazy house' 
```

# c# - 如何从 Excel 调用 C# 库？

> ID：10109767
> 
> 赞同：2
> 
> 时间：2012-04-11T16:09:42.310
> 
> 标签：c#, .net, excel, dll, add-in

我编写了 C# 库，我想通过 Excel 用户界面使用库对象。

用户可以选择一个范围，一些按钮将运行以选定范围作为输入的方法。

在 Visual Studio 中，我已经看到我能够编写 C# Excel 加载项：这是一个好方法吗？有没有更好的办法 ？也许创建一个 C# Excel 模板并在其中编写代码？

有什么好的教程/示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:14:27.573

如果您只想在 Excel 提供的功能之外提供一些附加功能，最好创建一个 Excel 加载项。如果您只想为用户提供一组有限的功能并需要控制所有用户操作，则需要创建一个嵌入了 Excel 对象的 C# 应用程序（或使用提供简单 API 的第 3 方 Excel 库）。

# sql - 从父 ID 中获取所有孩子

> ID：10109770
> 
> 赞同：0
> 
> 时间：2012-04-11T16:09:53.210
> 
> 标签：sql, sql-server-2008

嗨，我需要一个查询来执行此操作我的表数据

```
ID        ParentID         DATA
--------------------------------
1             -1             a
2              1             b
3              2             c
4              3             d
5              3             f 
```

什么需要一个以 ID 作为参数并返回所有`recursively childs`和`Itself`

```
parameter : (ID=2) 
```

返回必须是：

```
ID        ParentID         DATA
--------------------------------
2              1             b
3              2             c
4              3             d
5              3             f 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:31:17.290

试试这个：

```
;with temp as (
  select id, parentId, data from t
  where id = 2
  union all
  select t.id, t.parentId, t.data from t
  join temp on temp.id = t.parentId
)
select * from temp 
```

[在这里](http://sqlfiddle.com/#!3/603bf/1)拉小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:28:27.933

这应该为你做：

```
create table #temp 
(
    id int, 
    parentid int,
    data varchar(1)
)
insert #temp (id, parentid, data) values (1, -1, 'a')
insert #temp (id, parentid, data) values (2,1, 'b')
insert #temp (id, parentid, data) values  (3,2, 'c')
insert #temp (id, parentid, data) values  (4,3, 'd')
insert #temp (id, parentid, data) values  (5,3, 'f')

; with cte as (
    select  id, parentid, data, id as topparent
    from    #temp
    union all
    select  child.id, child.parentid, child.data, parent.topparent
    from    #temp child
    join    cte parent
    on      parent.id = child.parentid

)
select  id, parentid, data
from    cte
where topparent = 2

drop table #temp 
```

编辑或者你可以把`WHERE`子句放在第一个里面`select`

```
create table #temp 
(
    id int, 
    parentid int,
    data varchar(1)
)
insert #temp (id, parentid, data) values (1, -1, 'a')
insert #temp (id, parentid, data) values (2,1, 'b')
insert #temp (id, parentid, data) values  (3,2, 'c')
insert #temp (id, parentid, data) values  (4,3, 'd')
insert #temp (id, parentid, data) values  (5,3, 'f')

; with cte as (
    select  id, parentid, data, id as topparent
    from    #temp
    WHERE id = 2
    union all
    select  child.id, child.parentid, child.data, parent.topparent
    from    #temp child
    join    cte parent
    on      parent.id = child.parentid

)
select  id, parentid, data
from    cte

drop table #temp 
```

结果：

```
id  parentid      data
2   1              b
3   2              c
4   3              d
5   3              f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:30:01.477

```
declare @ID int = 2;

with C as
(
  select ID, ParentID, DATA
  from YourTable
  where ID = @ID
  union all
  select T.ID, T.ParentID, T.DATA
  from YourTable as T
    inner join C 
      on T.ParentID = C.ID
)
select ID, ParentID, DATA
from C 
```

试用[SE-Data](https://data.stackexchange.com/stackoverflow/query/66441/recursive)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:13:01.640

试试这个。

```
select * from table where id= 2 or parentid = 2 
```

# jsf-2 - PrettyFaces 登录后重定向到 RESTful url

> ID：10109772
> 
> 赞同：0
> 
> 时间：2012-04-11T16:10:06.617
> 
> 标签：jsf-2, prettyfaces

我正在使用 PrettyFaces 3.3.3。我有一个要求，如果用户试图查看一个页面，但没有登录，他们会被发送到登录页面，然后重定向到他们想要查看的原始页面。只是想知道什么是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:23:38.600

您可能需要一个安全框架。基本思想是您希望在安全过滤器中拦截请求的 URL，将其保存到用户的会话中，然后在身份验证完成后（例如，用户已使用其凭据提交表单，或您正在使用的任何机制）您从用户的会话中检索保存的 URL 并对其执行 302 重定向。

这不是 PrettyFaces 可以直接帮助您的事情，只是您可以使用它更轻松地捕获 URL`PrettyContext.getCurrentInstance(request).getRequestURL();`

这里有一篇关于这个的文章：http: [//ocpsoft.org/java/jsf-java/spring-security-what-happens-after-you-log-in/](http://ocpsoft.org/java/jsf-java/spring-security-what-happens-after-you-log-in/)

使用[OCPsoft Rewrite](http://ocpsoft.org/rewrite/)（PrettyFaces 4 的核心），您也可以通过编程方式执行此操作，甚至可以直接在您的安全规则或注释配置中进行身份验证：[https ://github.com/ocpsoft/prettyfaces/blob/master/annotations/src /test/java/org/ocpsoft/prettyfaces/annotation/jaas/JaasRolesBean.java](https://github.com/ocpsoft/prettyfaces/blob/master/annotations/src/test/java/org/ocpsoft/prettyfaces/annotation/jaas/JaasRolesBean.java)

这是即将推出的功能，但尚未完成 - 我们希望得到反馈。

# php - 在某些情况下使用 facebook graph API 无法获得用户喜欢

> ID：10109773
> 
> 赞同：1
> 
> 时间：2012-04-11T16:10:09.423
> 
> 标签：php, facebook-graph-api, facebook-like

我的 Facebook 应用程序有问题。我想知道用户是否喜欢显示一个内容或另一个内容的页面。问题是一些用户点击了like按钮，但应用程序没有从facebook graph API读取它。这是我用来检查用户是否喜欢该页面的代码：

```
$appID = '171296629176';

$resp = file_get_contents("https://graph.facebook.com/".$user."/likes?access_token=".$facebook->getAccessToken()."&limit=9999");
$data = json_decode($resp,true);

$liked = 0;

$likes_array = $data['data'];
$likes_next = '';
if(($data != null) && (array_key_exists('paging',$data)) && (array_key_exists('next',$data['paging']))){
    $likes_next = $data['paging']['next'];
}

foreach($likes_array as $like)
{
    if($appID == $like['id']){
        $liked = 1;     
    }
}

while(strlen($likes_next) > 0){
    $resp = file_get_contents($likes_next);
    $data = json_decode($resp,true);

    $likes_array = $data['data'];
    $likes_next = '';
    if(($data != null) && (array_key_exists('paging',$data)) && (array_key_exists('next',$data['paging']))){
        $likes_next = $data['paging']['next'];
    }

    foreach($likes_array as $like)
    {
        if($appID == $like['id']){
            $liked = 1;     
        }
    }
} 
```

在某些情况下，它不起作用。我不知道 facebook API 是返回一个空的喜欢列表还是返回一个不完整的列表。使用我的帐户和其他帐户可以正常工作，我无法联系遇到问题的用户来测试应用程序。

提前致谢。阿方索。

# jersey - 将 neo4j 与 jersey 和 tomcat 集成

> ID：10109776
> 
> 赞同：1
> 
> 时间：2012-04-11T16:10:14.920
> 
> 标签：jersey, tomcat7, neo4j

我正在使用neo4j（v.1.7.02）的java嵌入式版本，使用Chypher创建了一个小项目来查询数据库并且一切正常。现在我正在尝试将它部署在 Tomcat 上以作为 Web 应用程序工作，因此我使用 Jersey 创建了一个 REST 服务。REST 也可以正常工作，但没有 neo4j。

我真的很难让neo4j在webservice REST项目中运行和连接，我不确定在哪里找到tb以及如何配置它以使neo4j在tomcat上运行良好。我在没有 maven 的情况下手动上传了 neo4j 库。

我在网上搜索了很多，没有运气。任何人都知道在哪里放置 neo db 文件夹或在哪里可以找到它的基本配置文件？

提前致谢

编辑：这是我与数据库的连接：

```
// NEO4J SERVER START
    GraphDatabaseService graphDb = new EmbeddedGraphDatabase("neo4jdb"); 
```

这是我的结构：

![在此处输入图像描述](../Images/591b343164aa5e7042a1e0f686901743.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:08:42.423

不知道为什么您在使用 Tomcat 和 Neo4j 时遇到问题。他们真的不应该有任何关系。您的应用程序在带有嵌入式 neo4j 的独立模式下运行良好。然后它在容器中运行时也应该可以工作。您的应用如何连接到 neo4j？Neo4j 文件夹可以在任何地方——只要您在构建嵌入式数据库服务器时指定它的路径。

# html - 在元素内部对齐元素

> ID：10109778
> 
> 赞同：0
> 
> 时间：2012-04-11T16:10:21.960
> 
> 标签：html, css

查看我附加的图像，我试图让包含图像（带有红色边框）的较暗矩形形状与较浅灰色正方形的底部中心对齐。

![在此处输入图像描述](../Images/e078e42924cb157fd83001f818e63de0.png)

我曾尝试`position:absolute`使用 a将深色矩形设置为，`0px bottom`但随后我使用`margin:0 auto`. 我也试过只用 a`vertical-align:bottom`但还是不会打球！！！

这样做的正确方法是什么？要记住的一件事是，我使用了 170 x 105 的尺寸，这些实际上是未知的，因为它们是动态生成的元素，尺寸是可变的。

到目前为止，这是我的代码：

```
.item_preview { width:220px; height:200px; text-align:center; position:relative; background:#EEE; }
.item_preview_img_wrap { width:170px; height:105px; margin:0 auto; background:#CCC; vertical-align:bottom; }
.item_preview_img_wrap img { margin:0 auto; border:solid 5px #FF0000; }

<div class="gallery_item">
    <div class="item_preview">
        <div class="item_preview_img_wrap">
            <img src="asf.jpg">
        </div>
    </div>

    <div class="item_options">
        options
    </div>

    <div class="item_info_header">
        <div class="date">Date</div>
        <div class="item">ID</div>
        <div class="clear"></div>
    </div>

    <div class="item_info_main">
        <p class="caption">Caption here</p>
        <p class="subject"><strong>People:<strong> People here</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:21:46.873

如果要在浅灰色框的底部显示图像，请使用下面的 CSS：

```
.item_preview { width:220px; height:200px; text-align:center; position:relative; background:#EEE; } 
.item_preview_img_wrap { width:170px; height:105px; margin:0 auto; background:#CCC; } 
.item_preview_img_wrap img { border:solid 5px #FF0000; position: absolute; left: 50%; bottom: 0px margin-left: -halfofimagewidth } 
```

**注意：-halfofimagewidth 是图像大小的一半，例如，如果您的图像是 100 像素，边框是 5 像素，那么它应该是 -55 像素**

如果要在中心的 dak 灰色框底部显示图像，请使用下面的 CSS：

```
.item_preview { width:220px; height:200px; text-align:center; background:#EEE; } 
    .item_preview_img_wrap { width:170px; height:105px; margin:0 auto; background:#CCC; position: relative; } 
    .item_preview_img_wrap img { border:solid 5px #FF0000; position: absolute; left: 50%; bottom: 0px margin-left: -halfofimagewidth } 
```

如果您仍然发现任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:17:30.077

内盒的宽度是否总是相对于外盒？如果是这样，您可以像这样为您的左值使用百分比......

[http://jsfiddle.net/hcharge/zYprr/](http://jsfiddle.net/hcharge/zYprr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:17:47.677

像这样写：

```
.item_preview_img_wrap { 
 width:170px; 
 height:105px; 
 position:absolute;
 left:50%;
 margin-left:-85px;
 bottom:0;
 background:#CCC; 
 } 
```

# javascript - 如果文本不适合同一行，则不显示所有

> ID：10109781
> 
> 赞同：0
> 
> 时间：2012-04-11T16:10:29.223
> 
> 标签：javascript, css

我的网站上有一个左侧边栏，其中包含一个带有链接的列表。如果一个链接很长，它不会只放在一行上。例如：'这是一个很长很长的链接'。我能做些什么来尽可能多地显示此文本（例如，'这是一个很长'），但它只适合一行（一行有 200 像素宽度）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:11:29.050

将 CSS 设置为：

```
overflow:hidden;
white-space:nowrap; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:19:17.317

有一个名为的 CSS3 属性`text-overflow`可以控制您所描述的内容。结合`overflow: hidden;`和`white-space: nowrap;`您可以自定义在行尾显示的内容。

[这里](http://dochub.io/#css/text-overflow)有很好的文档，描述了该属性的灵活性。但是，假设您要做的就是在超出其宽度的行的末尾添加一个省略号 (...)，那么您所要做的就是：

```
.sidebar p { /*Or whatever selector matches*/
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:12:54.633

应用`overflow: hidden;`在容器上，连同设定的宽度和高度。

# c# - .NET 4.0 中的“无法使用已与其基础 RCW 分离的 COM 对象”

> ID：10109782
> 
> 赞同：7
> 
> 时间：2012-04-11T16:10:29.910
> 
> 标签：c#, com, com-callable-wrapper

我的 .NET 3.5 C# WinForms 应用程序中有一个类，它有五个方法。每种方法都使用不同的 C++ COM 接口集。用于`Marshal.FinalReleaseCOMObject`清理这些 COM 对象。此代码在此 .NET 平台上运行良好，没有任何问题。但是，当我将此应用程序移至 .NET 4.0 时，我开始在这些方法之一中将变量从`ICOMInterface1`to 转换为的行中出现此错误`ICOMInterface2`，即：

```
ICOMInterface1  myVar= obj as ICOMInterface2; 
```

> 无法使用已与其底层 RCW 分离的 COM 对象。

如果我删除正在使用的行`Marshal.FinalReleaseCOMObject`，我不会收到此错误。

我在这里想念什么？以及如何从 .NET 4.0 平台的内存中清除这些非托管 COM 对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T16:30:20.610

简单的答案是*永远不要*使用`Marshal.FinalReleaseComObject`，除非你绝对必须。如果你这样做了，你必须遵守一些额外的规则。

在 .NET 中使用 COM 对象时，运行时会为该对象创建所谓的“RCW”或“运行时可调用包装器”。这个 RCW 只是一个普通的对象，它持有对象上的 COM 引用。当这个对象被垃圾回收时，它会在 COM 对象上调用 IUnknown::Release()，正如你所期望的那样。这意味着除非您的 COM 对象*要求*最后一个 Release() 在某个特定时刻完成，否则只需让垃圾收集器处理它即可。许多 COM 对象都属于这种情况，因此请绝对确认您*必须*仔细管理对 Release() 的调用。

因此，当您调用 FinalReleaseComObject 时，这实际上是减少 RCW 对 COM 对象的引用，直到它达到零，然后 RCW 释放 COM 对象。在这一点上，这个 RCW 现在是僵尸，任何使用它都会给出你所看到的异常。CLR（默认情况下）只为任何底层 COM 对象创建一个 RCW，因此这意味着如果您使用的 COM API 返回相同的对象两次，它只会有一个 RCW。调用 FinalReleaseComObject 意味着突然间*所有*对该 RCW 的使用都停止了。

保证您拥有唯一 Marshal.GetUniqueObjectForIUnknown 的唯一方法，它可以防止任何 RCW 共享。但就像我之前所说的，在大多数 COM API 中，这并不是必须的，所以不要这样做。

Paul Harrington 写了一篇关于 [Final]ReleaseComObject的好[博客文章，它是邪恶的。](http://blogs.msdn.com/b/visualstudio/archive/2010/03/01/marshal-releasecomobject-considered-dangerous.aspx)这是一种危险的武器，除非需要，否则只会伤害你。既然你在问这个问题，我怀疑你实际上根本不需要打电话。:-)

# java - 如何确认NUMA？

> ID：10109783
> 
> 赞同：8
> 
> 时间：2012-04-11T16:10:31.113
> 
> 标签：java, linux, numa

如何确认主机支持 NUMA？[Oracle 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#numa)说 NUMA 感知从内核 2.6.19 开始，但NUMA[手册页](https://www.kernel.org/doc/man-pages/online/pages/man7/numa.7.html)说它是在 2.6.14 中引入的。我想确定一个 Java 进程开始时`-XX:+UseNUMA`实际上正在利用某些东西。

检查 numa_maps，我发现我有它们：

```
# find /proc -name numa_maps
/proc/1/task/1/numa_maps
/proc/1/numa_maps
/proc/2/task/2/numa_maps
/proc/2/numa_maps
/proc/3/task/3/numa_maps 
```

虽然我的内核落后于 Oracle 所说的：

```
# uname -sr
Linux 2.6.18-92.el5 
```

我目前在 RHEL5.1 上使用 64 位 jdk1.6.0_29。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:31:18.333

这些 /proc 文件的存在表明您的 linux 内核是 numa 感知的。不要太在意比较版本号，因为，特别是对于 Oracle / RHEL 内核，供应商移植/向后移植了许多特性，而没有保持版本字符串“最新”。

测试同一事物的其他方法：

```
$ grep NUMA=y /boot/config-`uname -r`
CONFIG_NUMA=y
CONFIG_K8_NUMA=y
CONFIG_X86_64_ACPI_NUMA=y
CONFIG_ACPI_NUMA=y

$ numactl --hardware
available: 2 nodes (0-1)
node 0 size: 18156 MB
node 0 free: 9053 MB
node 1 size: 18180 MB
node 1 free: 6853 MB
node distances:
node   0   1
  0:  10  20
  1:  20  10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T21:26:47.880

Oracle 文档还指出：

*注意：Linux Kernel 中有一个已知的错误，当使用 -XX:UseNUMA 时可能会导致 JVM 崩溃。该错误已在 2012 年修复，因此不会影响最新版本的 Linux 内核。要查看您的内核是否有此错误，您可以运行本[机复制](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/reproducer.c)器。*

我在这里复制了它以展示它的简单性：

[http://docs.oracle.com/javase/7/docs/technotes/guides/vm/reproducer.c](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/reproducer.c)

要构建复制器，您可能需要安装**numactl**或**numactl-devel**软件包，具体取决于您的发行版。详情请参阅`man numa_maps`。

```
#include <numaif.h>
#include <numa.h>
#include <stddef.h>
#include <sys/mman.h>
#include <stdint.h>

int main(void) {
   if (numa_all_nodes_ptr == (void*)0) {
     return -1;
   }

   size_t pagesize = getpagesize();

   void* mapped_memory = mmap(NULL, 3 * pagesize, PROT_READ|PROT_WRITE,
MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
   if (mapped_memory == MAP_FAILED) {
     return -2;
   }

   void* page0 = mapped_memory;
   void* page1 = (void*)((uintptr_t)page0 + pagesize);
   void* page2 = (void*)((uintptr_t)page1 + pagesize); 

 // Set up the last page as interleaved.
   mbind(page2, pagesize, MPOL_INTERLEAVE, numa_all_nodes_ptr->maskp,
numa_all_nodes_ptr->size, 0);

   // Setup the last two pages as interleaved.
   mbind(page1, 2 * pagesize, MPOL_INTERLEAVE,
numa_all_nodes_ptr->maskp, numa_all_nodes_ptr->size, 0);

   *((char*)page2) = 2;
   *((char*)page1) = 1;
   *((char*)page0) = 0; // Crash here, when mbind_merge was broken.

   return 0;
} 
```

因此，我认为 2.6.19 是第一个**安全**版本。

# dns - 将我的博客域指向我自己的虚拟主机

> ID：10109785
> 
> 赞同：0
> 
> 时间：2012-04-11T16:10:36.130
> 
> 标签：dns, cross-domain, web-hosting, blogger

我刚刚通过 google(goDaddy) 为我的博客博客购买了一个域名。目前，它指向博客网站主机。

我也想将它指向我自己的网络主机，这样我就可以托管文件，同时不会从博主那里丢失我的博客内容。

这可能吗？一个域有 2 个虚拟主机？

对不起，我对这些域和主机真的很陌生，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:55:58.037

您可以将您的域保留在您的网站上，然后设置一个子域（例如 blog.YOURDOMAIN.COM）并将其指向您的博客帐户。

1.  转到[http://www.google.com/a/domainname](http://www.google.com/a/domainname)，将 domainname 替换为您的域名。
2.  现在，您需要使用之前专门为您的域的 Google Apps 创建的用户名和密码登录您的 Google 帐户。如果您不知道此信息，请单击“无法访问您的帐户”。
3.  登录后，单击“域设置”选项卡。
4.  单击“高级 DNS 设置”。
5.  您现在将看到列出了您的登录名、密码和 PIN。
6.  单击登录到 DNS 控制台并使用登录名和密码登录。
7.  您现在应该在域控制中心。单击转发，然后选择转发子域。
8.  在添加子域字段中，输入子域。
9.  根据您的服务器设置选择 http:// 或 https://。
10.  在将此子域转发到中，输入要将子域转发到的 URL。这将是您的 Blogger 博客的 URL。
11.  要查看其他选项，请单击高级选项，然后选择以下选项之一：

    仅转发 — 指定此转发设置的时间长度。选择以下重定向类型之一： 我永久转发我的域 — 使用“301 永久移动”HTTP 响应重定向到您在转发到字段中指定的站点。HTTP 301 响应代码告诉用户代理（包括搜索引擎）该位置已永久移动。我只是暂时转发我的域 - 使用“302 Found”HTTP 响应重定向到您在“转发到”字段中指定的站点。HTTP 302 响应代码告诉用户代理（包括搜索引擎）该位置已暂时移动。Forward with Masking Title - 显示在浏览器窗口顶部和搜索结果中。描述 - 显示在搜索引擎结果中的网站的简短描述。

12.  单击确定。

您只是继续指向您的网络主机的 IP 的主域。

# elasticsearch - 在弹性搜索中，有没有办法显示文档中的哪个字段是“命中”？

> ID：10109786
> 
> 赞同：3
> 
> 时间：2012-04-11T16:10:38.880
> 
> 标签：elasticsearch

使用 elasticsearch 搜索某些文档时，我想查看文档中的哪个字段是“命中”，将其标记为搜索结果。有没有本地方法可以做到这一点，还是我需要在搜索客户端中做到这一点？

例如：

```
GET /events/_search?q=nottingham 
```

给我：

```
{//elided
    {'hits'[
       {'id':1,
        'name': 'Some name',
        'nicknames': ['Nottingham']
       }]}} 
```

从这个例子中很明显，昵称匹配，但我可以让 elasticsearch 为我标记吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:23:22.790

Elasticsearch 可以在结果字段中从您的查询中找到并突出显示术语。有关详细信息，请参阅[http://www.elasticsearch.org/guide/reference/api/search/highlighting.html](http://www.elasticsearch.org/guide/reference/api/search/highlighting.html)。从技术上讲，它与标记导致“命中”的字段不同，但对于大多数实际目的来说，它同样有用。

# meteor - Meteor.js 中更新 DOM 后的回调

> ID：10109788
> 
> 赞同：35
> 
> 时间：2012-04-11T16:10:44.950
> 
> 标签：meteor

我有这个 Meteor 项目：[https ://github.com/jfahrenkrug/code_buddy](https://github.com/jfahrenkrug/code_buddy)

它基本上是一个具有大文本区域和预区域的工具，可让您输入自动推送到所有连接客户端的源代码片段。

我想在代码更改时自动运行 highlightSyntax 函数，但它并没有真正起作用。

我试过query.observe，但效果不太好：语法高亮闪过一次，然后又消失了。

所以我的问题是：如何在 DOM 更新后运行代码？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-12T08:27:07.727

一个hacky方法是：

**foo.html**

```
<template name="mytemplate">
  <div id="my-magic-div">
    .. stuff goes here ..
    {{add_my_special_behavior}}
  </div>
</template> 
```

**foo.js**

```
Template.mytemplate.add_my_special_behavior = function () {
  Meteor.defer(function () {
    // find #my-magic-div in the DOM
    // do stuff to it
  });
  // return nothing
}; 
```

每当渲染（或重新渲染）模板时，都会调用该函数，因此您可以将其用作挂钩来执行您想要执行的任何特殊 DOM 操作。您需要使用 Meteor.defer（与 settimeout(f, 0) 做同样的事情），因为在渲染模板时，它还没有在 DOM 中。

请记住，您可以在不将模板插入 DOM 的情况下渲染模板！例如，这样做是完全合法的：

```
console.log(Template.mytemplate()) 
```

所以当一个模板被渲染时，并不能 100% 保证它最终会出现在 DOM 中。这取决于模板的用户。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-05T14:40:55.730

从 Meteor 0.4.0 开始，`Template.myTemplate.rendered`提供了一个回调

> 当 Template.myTemplate 的实例第一次呈现到 DOM 节点并放入文档**时**调用**一次**。

 **更多信息请访问[http://docs.meteor.com/#template_rendered](http://docs.meteor.com/#template_rendered)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-09T08:44:57.630

对于当前版本的 Meteor (1.0)，我们现在可以使用 Tracker 的[.afterFlush()](http://docs.meteor.com/#/full/tracker_afterflush)函数。

```
Tracker.autorun(function(e){
   var data = Router.current().data();
   if(data.key !== undefined){
       //the data is there but dom may not be created yet
     Tracker.afterFlush(function(){
       //dom is now created.
    });
   }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T18:40:03.283

更新 DOM 后没有回调，但是您可以使用[`Tracker.flush()`](http://docs.meteor.com/#/full/tracker_flush).

调用 后`flush()`，您知道 DOM 已更新，因此您可以执行所需的任何手动 DOM 更改。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-23T16:01:05.423

这个问题很老了，但两年后的解决方案是集成一个[操作转换库与 Meteor](https://github.com/mizzao/meteor-sharejs)并在客户端使用 Ace 或 CodeMirror，它会自动突出显示语法。这具有允许人们同时编辑的额外好处。

我已经为你完成了工作:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-15T01:30:52.467

在[Blaze Components](https://github.com/peerlibrary/meteor-blaze-components)（我是作者之一）中，您有一个 API，它在插入、移动或删除 DOM 时调用方法。您可以[在此处查看](https://github.com/peerlibrary/meteor-blaze-components/blob/master/tests/tests.coffee#L465)如何在 DOM 更改时创建反应变量。

这种方法的缺点是它不会在 DOM 元素属性更改（如`class`更改）时更改。仅当 DOM 元素本身发生更改时。这适用于大多数情况，但如果您需要第二种，我建议您简单地使用[MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)。在这种情况下，您也可以响应外部变化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-22T08:54:02.683

它似乎`Template.myTemplate.rendered`无法正常工作或我不明白...

在呈现包含所有帖子的模板后，我需要内联加载 TinyMCE，所以我有：

## - 一个模板

```
<div id="wrapper">     
         {{#each posts}}
             <div class="editable">{{post}}</div>
         {{/each}}        
  </div> 
```

## - 和一个函数

```
Template.myPosts.rendered = function(){
      console.dir($("div"));
      tinymce.init({
          selector: "div.editable",
          inline: true,
          plugins: [
              "advlist autolink lists link image charmap print preview anchor",
              "searchreplace visualblocks code fullscreen",
              "insertdatetime media table contextmenu paste"
          ],
          toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
}); 
```

}

但是，控制台只记录包含我的帖子`<div id="wrapper">`的 div 而不是div。`<div class="editable">`所以，似乎`Template.myTemplate.rendered`回调发生在模板渲染之前，对吧？

编辑：我将`Template.myTemplate.rendered`代码放在 a`setTimeout()`中，一切似乎都可以正常工作，所以我肯定`Template.myTemplate.rendered`会导致问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-19T16:03:10.280

我刚刚发现了一个似乎运行良好的小技巧：

```
Template.myTemplate.onRendered(function() {
    this.autorun(function() {
        Meteor.setTimeout(function() {
            // DOM has been updated
        }, 1);
    });
}); 
```

我不是 Meteor 专家，所以它可能有一些缺点，但我现在还没有找到任何东西——除了它有点脏！

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-12T04:13:13.120

我认为您可能想将回调传递给

```
Meteor.startup(callback) 
```

见[http://docs.meteor.com/#meteor_startup](http://docs.meteor.com/#meteor_startup)**

# javascript - 开发 JavaScript API 以公开服务

> ID：10109792
> 
> 赞同：0
> 
> 时间：2012-04-11T16:10:53.323
> 
> 标签：javascript, web-services, api

我们计划开发一个 JavaScript API 来公开我们的一些基于 Java EE 的服务。我们这样做是为了牢记 Google Maps API。有人可以建议我们应该从哪里开始以及我们需要遵循的方法来创建有用且可扩展的 JavaScript API 吗？任何建议都会对我们有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:48:37.723

除了谷歌地图，我认为你应该看看 twitter，它有一个非常好的 REST API。(https://dev.twitter.com/docs/api) REST 是构建 API 的关键。

除此之外，您还应该考虑生成 API 密钥，这样您就可以控制谁在使用您的服务做什么

这似乎是一个很好的开始：

[http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http](http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:25:35.770

一定要把它变成一个 RESTful JSON Api，然后你就可以将它用于各种目的。twitter 等 API。人。是很好的模型（尽管关于什么是完全 REST 有很多争论）。

我是 Mike Pearce 关于如何设计好的 API 的忠实粉丝：http: [//blog.mikepearce.net/2010/08/08/api-anti-patterns-how-not-to-write-a-restful -api/](http://blog.mikepearce.net/2010/08/08/api-anti-patterns-how-not-to-write-a-restful-api/)

# c++ - 编译器警告重新：对局部变量的引用

> ID：10109795
> 
> 赞同：3
> 
> 时间：2012-04-11T16:11:01.440
> 
> 标签：c++, reference, scope

所以，我有这两个函数`ref()`，`pointy()`它们分别创建一个本地引用和指向本地定义的 int 的指针：

```
#include <iostream>

int& ref() {
  int knuckles = 6;
  int &chuckles = knuckles;
  return chuckles;
};

int* pointy() {
    int buckles = 8;
    return &buckles;
};

int main(int argc, char **argv) {
    int a = ref(), *b = pointy();
    int c = 14, d = 20;
    std::cout << a << ' ' << *b << ' ' << c+d;
}; 
```

代码编译得很好，它给出了一个关于返回局部变量地址的警告`buckles`，但我担心的是它没有说任何关于`ref()`返回引用的内容`knuckles`。我的编译器（通过 MinGW 的 g++，如果有影响的话）只是在工作中睡觉吗？引用是否有一些东西可以防止所指对象超出范围？还是我的参考语法不好？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:20:19.663

您的两个测试用例不平行。这个程序：

```
#include <iostream>

int& ref() {
  int knuckles = 6;
  return knuckles;
};

int* pointy() {
    int buckles = 8;
    return &buckles;
};

int main(int argc, char **argv) {
    int a = ref(), *b = pointy();
    int c = 14, d = 20;
    std::cout << a << ' ' << *b << ' ' << c+d;
}; 
```

产生这些警告：

```
$ g++ -O4 -std=c++0x    x.cc   -o x
x.cc: In function ‘int& ref()’:
x.cc:4:7: warning: reference to local variable ‘knuckles’ returned [enabled by default]
x.cc: In function ‘int* pointy()’:
x.cc:9:9: warning: address of local variable ‘buckles’ returned [enabled by default] 
```

# c# - 如何在绑定时将 jquery 动画添加到单个 ListViewItem？

> ID：10109798
> 
> 赞同：0
> 
> 时间：2012-04-11T16:11:10.420
> 
> 标签：c#, jquery, asp.net, jquery-ui, listview

我有一个包含在 UpdatePanel 中的列表视图，它显示来自线程的评论。更新面板是这样的，当用户提交新评论时，列表会重新绑定以反映新评论，而无需回发。我想要做的是在重新绑定后获取最后一个评论列表项，并对其应用 jquery-ui 效果，这将使其脉动几次。我不完全确定如何或是否可以做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:32:25.407

尝试

```
$("containername:last-child").animate(); 
```

其中 containername 是包含列表视图的容器的 id，而 .animate() 是您的 jquery-ui 效果。

# php - 上传多个文件并显示一个数组

> ID：10109799
> 
> 赞同：0
> 
> 时间：2012-04-11T16:11:19.153
> 
> 标签：php, image, variables, file-upload

我有一个脚本可以将几个图像上传到一个目录。我在数组的帮助下意识到这一点。因此我得到了这个代码：

```
$allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');
$errors = array();
$output = array();

if(!empty($_FILES['image']['tmp_name'])){  

     foreach($_FILES['image']['name'] as $key => $array_value){

        if(!in_array(pathinfo($_FILES['image']['name'][$key], PATHINFO_EXTENSION), $allowed_extension)){
                die("Die!");
        }
    }

    foreach($_FILES['image']['name'] as $key => $array_value){

       $file_name = $_FILES['image']['name'][$key];
       $file_size = $_FILES['image']['size'][$key];
       $file_tmp = $_FILES['image']['tmp_name'][$key];

       $file_extension = pathinfo($file_name, PATHINFO_EXTENSION);
       $file_extension = strtolower($file_extension);

         if (!in_array($file_extension, $allowed_extension)){
        $errors[$file_name][] = "format $file_extension in image $file_name is not accepted";
        continue;
         }

         if ($file_size > 2097152){
        $errors[$file_name][] = "maxsize of 2MB on $file_name has reached";
                    }

         if (count($errors) == 0){

        $dir = "a/b/c";

        if (is_dir($dir)){
            mkdir("a/b/c/tmp_images", 0755);
        }else{
            mkdir("a/b/c", 0755);
            mkdir("a/b/c/tmp_images", 0755);
        }

        $path = "a/b/c/tmp_images"; 
        $prifix = basename($file_name, "." . $file_extension);

        //var_dump ($prifix);

        $uploadfile = $path . "/" . $file_name;

        $x = 0;
        while (file_exists($uploadfile)){
               $x ++;
               $uploadfile = "{$path}/{$prifix}-{$x}.{$file_extension}";
            }

            if (move_uploaded_file($file_tmp, $uploadfile)){
               $file_name = basename($uploadfile);
               $output [$file_name] = "OK";

            }else{

            $output[$file_name] = "Failure while Uploading!";
            $errors[$file_name][] = "Failure: Can't move uploaded pictures!";
            }//else...
         }//if(count($errors))...
    }//foreach($_FILES['image']['name']... 
}//if(!empty($_FILES['image']['tmp_name'])... 
```

现在我的第一个问题是：当我有两种不同类型的文件类型时，上传将被中止并且错误消息“死！” 将显示。从代码中可以看出，第一个 foreach-part 将执行此操作。第二个 foreach-part 正在做我真正喜欢显示的事情，但是当我离开第一个 foreach-part 时，以防出现一个错误和一个正确的文件类型，上传将会发生。问题在于，用户在提交数据后无法进行任何更改。因此必须中止上传。

我的第二个问题是：当我离开第一个 foreach 部分时，它将仅显示“数组”，而不是显示数组 [0] 的文本，其中包含错误消息，以防文件类型或大小错误。所以输出不应该是“数组”它应该是“$file_name 上的最大大小为 2MB 已达到”

所以我不知道如何解决这个问题。如果有人可以告诉我该怎么做，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:28:38.130

不要使用 die("Die!"); 在您的代码中，因为它终止脚本的执行。提供您的 HTML 以查找路由原因。

# html - 无法在 jquery datepicker 中禁用未来日期

> ID：10109806
> 
> 赞同：1
> 
> 时间：2012-04-11T16:11:54.400
> 
> 标签：html, jsp, jquery-ui-datepicker

我的应用程序要求日期选择器应在单击时显示日历正文，选择日期为今天的有效日期和未激活的未来日期……我是 jquery 的新手，它困扰了我一个月。请帮忙。我可以显示日期选择器并选择直到 2030 年的任何日期，但我需要日历仅在今天或当前日期处于活动状态。提前致谢。

我的日历要显示..

```
<table id="calenderTable" class="">
                <tbody id="calenderTableHead">
                    <tr>
                        <td colspan="4" align="center">
                            <select onChange="showCalenderBody(createCalender(document.getElementById('selectYear').value,
                                this.selectedIndex, false));" id="selectMonth">
                                <option value="0">Jan</option>
                                <option value="1">Feb</option>
                                <option value="2">Mar</option>
                                <option value="3">Apr</option>
                                <option value="4">May</option>
                                <option value="5">Jun</option>
                                <option value="6">Jul</option>
                                <option value="7">Aug</option>
                                <option value="8">Sep</option>
                                <option value="9">Oct</option>
                                <option value="10">Nov</option>
                                <option value="11">Dec</option>
                            </select>
                        </td>
                        <td colspan="2" align="center">
                            <select onChange="showCalenderBody(createCalender(this.value,
                document.getElementById('selectMonth').selectedIndex, false));" id="selectYear">
                            </select>
                        </td>
                        <td align="center">
                            <a href="#" onClick="closeCalender();"><font color="#003333" size="+1">X</font></a>
                        </td>
                    </tr>
                </tbody>
                <tbody id="calenderTableDays">
                    <tr style="">
                        <td>Sun</td><td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td>Sat</td>
                    </tr>
                </tbody>
                <tbody id="calender"></tbody>
            </table> 
```

日期字段如下：

```
 <tr>
       <td>effected date</td>
             <td>
                 <input type="text" name="eff_date" class="required" id="eff_date"><a href="#" onClick="setYears(1947, 2030);
 showCalender(this, 'eff_date');" class="" id="calender">
   <img src="Calender/calender.png"></a>
              </td>
      </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T23:53:43.870

假设我理解这个问题，这很容易完成。您想设置最大允许的可选日期，对吗？您只需要使用 maxDate 选项。

这是一个完整的示例，假设您包含脚本和链接标签中引用的正确文件：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>date</title>
    <meta charset="utf-8">
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.18.custom.css" rel="stylesheet" />   
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
</head>
<body>
    <div class="demo">
        <p>Date: <input type="text" id="datepicker"></p>
    </div>
<script>
$(function() {
    $("#datepicker").datepicker({maxDate: '+0d'});
});
</script>
</body>
</html> 
```

你可以在这里看到它的工作：http: [//gigaloop.com/answers/date.html](http://gigaloop.com/answers/date.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:23:04.503

您可以使用 maxDate 并与 minDate 结合使用：http: [//jqueryui.com/demos/datepicker/#option-maxDate](http://jqueryui.com/demos/datepicker/#option-maxDate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T05:07:07.813

在脚本标签中，写：

```
 $(function() {
        $( "#datepicker-1" ).datepicker({
            minDate:"Now", maxDate: "+1m+1d"
        }); 
     }); 
```

如果要显示 1 个月前和未来 1 个月的日期，可以将 minDate 更改为“-1m”。根据您的问题，如果您想从今天起禁用未来几天，您可以输入 maxDate: "+1d" 。1y=1 年，1m=1 个月，1d=1 天。

# jquery - jQuery 对象——在下面的代码中发生了什么？

> ID：10109807
> 
> 赞同：0
> 
> 时间：2012-04-11T16:11:54.387
> 
> 标签：jquery

谁能向我解释一下下面这段 jQuery 中可能发生的事情？

```
 var tileDiv = $('<div/>', { 'class': 'tile', 'text': this.name, 'id': this.tileId });
        tileDiv.css('border-top', '5px solid ' + this.scenes[sceneId].borderColor);
        tileDiv.data(this); 
```

对我来说，它看起来像是`tileDiv`设置为一个 jQuery 对象，其中包含两个值 -`<div/>`以及逗号后面的第二位。但是，不能 100% 确定通话发生了什么`tileDiv.data(this)`。感谢您的澄清或最佳猜测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:14:39.640

代码`div`使用第二个参数中传递的属性创建一个新对象，并将 jQuery 对象存储在`tileDiv`：

```
var tileDiv = $('<div/>', { 'class': 'tile', 'text': this.name, 'id': this.tileId }); 
```

然后添加`border-top`CSS 属性：

```
tileDiv.css('border-top', '5px solid ' + this.scenes[sceneId].borderColor); 
```

至于最后一行，该`.data`函数允许您存储和检索与该 jQuery 对象关联的数据。它还可用于从`data-`元素的 HTML5 属性中检索信息。在这种情况下， 的所有成员都`this`将存储在`tileDiv`的数据中。如果你有：

```
this.someData = 99;
this.otherData = 87;
tileDiv.data(this); 
```

然后`tileDiv.data('someData')`将返回 99`tileDiv.data('otherData')`并将返回 87，如您在[此 jsFiddle](http://jsfiddle.net/TfYWD/)中所见。

请参阅`.data`此处的 jQuery 文档：[`.data`jQuery API](http://api.jquery.com/data/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:15:47.720

Data 是一个将元数据存储在 DOM 对象中的 JQuery 命令：http: [//api.jquery.com/data/](http://api.jquery.com/data/) 数据可以是您喜欢的任何内容。您添加这样的数据：

```
tileDiv.data(key, object_with_data) 
```

并像这样检索它：

```
var tileDiv.data(key); 
```

所以，是的，看起来上面检索数据但没有做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:19:54.703

`data`是 HTML 属性的 HTML 5 前缀。如果我们知道`this`在您的上下文中是一个基本字符串，例如“hello”，jQuery 会尝试获取一个名为 .html 的属性 HTML 属性`data-hello`。但是正如您所看到的，您的对象没有任何类似的属性，所以什么都没有发生。

它等于写

```
 $(titleDiv).attr("data-" + this) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:22:10.670

第一行创建一个新的 div，设置`id`和`class`属性，然后设置 div 的内部文本。

第二行设置顶部边框样式。

第三行将数据附加到等于`this`对象所有属性的新 div 中，我猜这是通过`new Something`构造函数创建的 Javascript 对象，尽管它也可以是普通对象。

所以 if ，在第三行执行后`this.answer = 42`的结果也将是 42 。`tileDiv.data("answer")`

复制 的所有属性似乎有点浪费，`this`最好这样说`tileDiv.data("tileInfo", this)`，但如果不看更多代码就很难说。

# c# - 将依赖属性附加到用户控件

> ID：10109808
> 
> 赞同：0
> 
> 时间：2012-04-11T16:11:59.327
> 
> 标签：c#, .net, wpf, xaml, dependency-properties

如何注册填充`DependencyProperty`，`Rectangle`以便我可以动态更改颜色？

```
<UserControl.Resources>
    <Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Rectangle Stroke="Black">
                            <Rectangle.Fill>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#FF48B6E4" Offset="0.013"/>
                                    <GradientStop Color="#FF091D8D" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot">
    <Button Style="{DynamicResource ButtonStyle1}"/>
    <TextBlock
        x:Name="NodeName"
        x:FieldModifier="public"
        Text="Property"
        Margin="8"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        TextWrapping="Wrap" 
        TextAlignment="Center"
        FontFamily="Segoe Print"
        FontWeight="Bold" 
        Foreground="White"
        FontSize="40"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:05:18.047

如果您在`MyProperty`中注册了自己的依赖属性`UserControl`，则可以通过以下方式绑定它：

```
...
<Rectangle Stroke="Black" Fill="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Parent.Parent.MyProperty}" />
... 
```

无需进行其他更改。

这会将`Fill`属性绑定到分配样式的控件的父级，在您的情况下是`UserControl`它本身。

使用此方法，您不仅可以将其绑定到 a 的属性，`UserControl`还可以将其绑定到其他控件的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T17:06:00.057

为什么不绑定`Fill`到`Background`Button 的属性：

```
<ControlTemplate TargetType="{x:Type Button}"> 
    <Grid> 
        <Rectangle Stroke="Black" Fill="{TemplateBinding Background}" /> 
        ...
    </Grid> 
    ...
</ControlTemplate> 
```

然后`Background`像这样设置：

```
<Button Style="{DynamicResource ButtonStyle1}">
    <Button.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">   
            <GradientStop Color="#FF48B6E4" Offset="0.013"/>   
            <GradientStop Color="#FF091D8D" Offset="1"/>   
        </LinearGradientBrush>   
    </Button.Background>
</Button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:18:01.497

我会在您的 YourUserControl 视图上创建一个依赖属性，如下所示（为简洁起见，我删除了您的一些标记）：

```
<UserControl.Resources>
<Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid>
                    <Rectangle Stroke="Black" Fill="{TemplateBinding Background}">
                    </Rectangle>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

```
<Grid x:Name="LayoutRoot">
    <Button Style="{DynamicResource ButtonStyle1}" Background="{Binding DynamicColor}"/>
</Grid> 
```

然后在 YourUserControl.xaml.cs 你可以创建你的依赖属性：

```
 private My_ViewModel _viewModel
    {
        get { return this.DataContext as My_ViewModel; }
    }

    public LinearGradientBrush DynamicColor
    {
        get { return (string)GetValue(DynamicColorProperty); }
        set { SetValue(DynamicColorProperty, value); }
    }
    public static readonly DependencyProperty DynamicColorProperty =
        DependencyProperty.Register("DynamicColor", typeof(LinearGradientBrush), typeof(YourUserControl),
        new PropertyMetadata(new PropertyChangedCallback(OnDynamicColorPropertyChanged)));

    private static void OnDynamicColorPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((YourUserControl)d).OnTrackerInstanceChanged(e);
    }

    protected virtual void OnDynamicColorPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        this._viewModel.DynamicColor = e.NewValue;
    }

public class My_ViewModel : INotifyPropertyChanged
{
    public LinearGradientBrush DynamicColor
    {
        get { return dynamicColor; }
        set 
        { 
            if(dynamicColor != value)
            {
                dynamicColor = value;
                OnPropertyChanged("DynamicColor");
            }
        }
    }
    private LinearGradientBrush dynamicColor;
} 
```

这种方法让您可以完全控制 DynamicColor 属性的值，并让您能够有效地对行为进行单元测试。

# c# - LINQ-To-Entity（LINQ to Entities 不支持指定的类型成员 ''）

> ID：10109816
> 
> 赞同：1
> 
> 时间：2012-04-11T16:12:56.807
> 
> 标签：c#, entity-framework, lambda, linq-to-entities

我很难理解这个问题：

这是我需要使用 LINQ to Entities 实现的 T-SQL 查询

```
select r.ReviewID, b.BusinessID, b.Name as BusinessName ,r.Description
from gb_business.Review r
inner join gb_business.Business b on r.BusinessID = b.BusinessID
inner join gb_listing.RegionalService rs on b.BusinessID = rs.BusinessID
where r.ReviewStatusID=1 and rs.TypeID=1 and rs.IsMain=1 
```

在 VS2010 中它看起来像这样（没有**where**子句）

```
var res1 = (from r in context.Review
            join b in context.Business on r.BusinessID equals b.BusinessID
            join rs in context.RegionalService on b.BusinessID equals rs.Business.BusinessID
            select r).ToList(); 
```

此表达式编译良好，但在运行时出现异常：LINQ to Entities 不支持指定的类型成员“BusinessID”。仅支持初始化程序、实体成员和实体导航属性。

我想知道为什么 BusinessID 是个问题。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:06:22.180

那里给出了您问题的答案：[问题：我可以在非实体成员字段上创建一个 linq 到实体查询吗](https://stackoverflow.com/questions/5654491/can-i-create-a-linq-to-entity-query-on-non-entity-member-fields)

使用这些 LinQ 进行实体查询时，您只能使用“实体成员”，即在数据表中定义的属性。

由于您的查询被包装（“翻译”）为 SQL 命令，因此您必须使用在数据模型中定义的属性。

在您的示例中，我强烈建议您确保“BusinessID”与现有数据列匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:33:14.047

可能`BusinessID`未标记为实体成员。

# dynamics-crm-2011 - 如何在 CRM 插件中获取当前用户记录？

> ID：10109818
> 
> 赞同：4
> 
> 时间：2012-04-11T16:13:08.203
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我正在开发一个插件。每当调用插件时，我需要获取当前用户信息吗？有没有办法找回它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T21:54:59.747

该信息在 PluginExecutionContext 中可用。下面的代码来自插件必须实现的 Execute 方法。

```
public void Execute(IServiceProvider serviceProvider)
{
    IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
    Guid userId = context.InitiatingUserId;
} 
```

仅供参考，上下文还有一个“UserId”属性，它可能与 InitiatingUserId 相同也可能不同。如果您的插件步骤注册“在用户的上下文中运行”字段具有值“调用用户”，那么它们将是相同的。如果您在“在用户上下文中运行”字段中指定了用户，则 UserId 字段将包含您指定的人员的用户 ID，而 InitiatingUserId 将是其操作触发插件的实际 CRM 用户。听起来您正在寻找 InitiatingUserId。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T20:42:56.483

上面的答案是正确的。另外请记住，如果您不想在用户上下文中运行插件，您还可以从 InputEntity 获取修改用户，该输入实体从任何正在更新的字段传递到插件中。

在您未在用户上下文中运行的情况下，您可以执行 service.Retrieve 调用以获取修改用户的完整记录。

# c# - 如何在 ASP.NET/C# 环境中按钮的文本字段上的字母字符串之间进行迭代？

> ID：10109822
> 
> 赞同：0
> 
> 时间：2012-04-11T16:13:15.720
> 
> 标签：c#, asp.net, button, browser

我有 9 个按钮设置为井字游戏。它是基于网络浏览器的，因此两个玩家要玩，他们必须连接到浏览器 URL，并输入游戏的 que。当他们在游戏中时，第一个玩家由谁先加入会话来决定。当他按下浏览器上的按钮时，它会向其他玩家的浏览器发送请求/响应，以将该按钮填写为他玩过的“X”。第二个玩家将按下九个按钮之一并将他的文本字段填写为“O”。同样，这将向主机发送请求/响应，主机发送到第一个玩家的浏览器以显示玩家二已经玩过。我所说的响应/请求是指在两个浏览器上玩的一个游戏的有效性检查。

我的问题是，如何在两个玩家之间的 X 和 O 之间进行迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:19:35.247

当您想在 Web 场景中提供多个用户之间的实时交互时，您需要使用长轮询/Web 套接字。如果您使用 ASP.Net，则可以使用[SignalR](http://signalr.net/)或[XSockets.Net](http://xsockets.net/)等库，它们根据浏览器功能抽象出长轮询/网络套接字功能。您可以查看这些站点中的示例以了解如何使其工作。

# php - 使用 eBay API 使用 PHP 获取我的 eBay 列表

> ID：10109825
> 
> 赞同：2
> 
> 时间：2012-04-11T16:13:29.003
> 
> 标签：php, xml, ebay-api

我一直在阅读 eBay 开发人员网络，我一生都无法弄清楚如何通过他们的 API 来完成从 eBay 用户（我）那里检索所有列表的*简单*任务。

任何人都可以帮助我实现这一目标。

非常感谢。

编辑：

我尝试过使用以下 HTTP 方法：

```
http://open.api.ebay.com/Shopping?callname=GetUser&appid=APPID&siteid=3&UserId=USERID 
```

但这并没有给我带来任何运气。

主要是使用 PHP 方法，我尝试阅读 EBATNS 但没有运气，我可以开始编码以产生一些小的东西。

我还查看了[在 PHP 中使用 eBay API 来检索我的 eBay 信息](https://stackoverflow.com/questions/3674788/use-of-ebay-api-in-php-to-retrieve-my-ebay-information)，但这也对我没有太大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T21:50:49.890

如果有人需要这个问题的答案，经过一天的研究，我已经想通了。

> [http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsAdvanced&SECURITY-APPNAME=](http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsAdvanced&SECURITY-APPNAME=) **PRODUCTION-APPID** &RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&itemFilter(0).name=Seller&itemFilter(0).value (0)=**用户**名&paginationInput.entriesPerPage=10&keywords=

# excel - 您如何将父类别应用于子类别中的项目？

> ID：10109827
> 
> 赞同：0
> 
> 时间：2012-04-11T16:13:55.953
> 
> 标签：excel, magento, categories, product

当我浏览我的产品时，我意识到当我点击一个类别时，它并没有显示完整的项目列表。当我去后端时，我意识到没有为某些产品选择主要的父类别。有没有办法轻松地将父类别添加到项目中？我对magento和excel的了解有限，我尝试将父类别添加到excel中的项目中，但这不是最有效的方法。非常感谢任何帮助和建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:31:16.993

您可以只锚定类别，以便它们显示它们下的产品以及它们下的每个类别。

```
 $categories = Mage::getModel('catalog/category')
         ->getCollection()
         ->addAttributeToSelect('*')
         ->addAttributeToFilter('entity_id', array("gt" => 2))
         ->setOrder('entity_id')
         ;

foreach($categories as $category) {
                $category->setIncludeInMenu(1);
                $category->setIsActive(1);
                $category->setIsAnchor(1);
                $category->save()
                } 
```

如果您将类别设置为锚，则分层导航（请参阅 Magento 中的分层导航如何工作？查看分层导航）将在分层导航中显示此类别的子类别。然后，分层导航会获取下面的所有产品，包括子类别中的产品，并显示这些产品的所有可过滤属性。如果您没有将类别设置为锚点，它将不会在分层导航中显示可过滤的属性。

此选项卡可以在管理类别 > some_category > 设计选项卡 > 是锚点中找到

# c# - 如何将服务层验证消息传递回调用方？

> ID：10109828
> 
> 赞同：9
> 
> 时间：2012-04-11T16:14:01.400
> 
> 标签：c#, asp.net-mvc-3, validation, repository, service-layer

我做了很多研究，包括这里的 SO，我似乎找不到明确的方向。我目前有一个 ASP.NET MVC3 应用程序，其服务层位于存储库之上。

在我的服务层中，我具有以下功能：

```
public class MyService{

    public void CreateDebitRequest(int userId, int cardId, decimal Amount, .... )
    {
    //perform some sort of validation on parameters, save to database
    }

    public void CreateCreditRequest(.....)
    }
        //perform some sort of validation on parameters, save to database
    }

    public void CreateBatchFile()
    {
        //construct a file using a semi-complex process which could fail
        //write the file to the server, which could fail
    }

    public PaymentTransaction ChargePaymentCard(int paymentCardId, decimal amount)
    {
        //validate customer is eligible for amount, call 3rd party payments api call,
        //...save to database, other potential failures, etc.
    }

} 
```

我见过有人说参数验证不是很例外，所以抛出异常不是很合适。我也不喜欢传入输出参数（例如字符串）并检查空值的想法。我已经考虑实现一个 ValidationDictionary 类，并使其成为任何给定服务类的属性（它将包含一个 IsValid 布尔值和一个错误消息列表，并且可以在服务层中的任何给定函数调用之后检查以查看如何事情过去了）。运行任何给定函数后，我可以检查 ValidationDictionary 状态：

```
var svc = new MyService();
svc.CreateBatchFile();
if (svc.ValidationDictionary.IsValid)
    //proceed
else
   //display values from svc.ValidationDictionary.Messages... 
```

我不喜欢这一点的是，我必须为每个服务层函数调用更新它，以避免让它保留旧值（如果我选择不将它用于许多或大多数函数，人们仍然会期待它在运行任何给定函数后具有有意义或空值）。我考虑的另一件事是为每个可能具有详细验证信息的函数调用传入 ValidationDictionary，但随后我又回到使用 out 参数...

大家有什么建议吗？我似乎想不出任何干净的方法来做到这一点。有时为函数返回 null 就足够了，但有时我希望将更多的验证信息传递回调用者。任何意见，将不胜感激！

**编辑澄清：** 我的服务层不知道它是一个 MVC 应用程序正在使用它。服务层只有某些公共函数，例如 CreateBatchFile() 或 AddDebitRequest()。有时返回 null 足以让消费者（在这种情况下是控制器，但可能是其他东西）知道发生了什么，有时消费者希望从服务层获得更多信息（如果消费者是，则可能传递给 ModelState控制器）。我如何从服务层本身冒泡这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T16:43:46.860

这就是我所做的。有一个用于验证的类，而不是传递参数传递一个视图模型。所以在你的情况下是这样的，其中 ValidationResult 只是一个带有 MemberName 和 ErrorMessage 属性的简单类：

```
public class DebitRequestValidator{

  public IEnumerable<ValidationResult> Validate(DebitRequestModel model){

    //do some validation
    yield return new ValidationResult {
      MemberName = "cardId",
      ErrorMessage = "Invalid CardId."
    }
  } 
```

}

然后创建一个控制器扩展方法将这些验证结果复制到模型状态。

```
public static class ControllerExtensions
{
    public static void AddModelErrors(this ModelStateDictionary modelState, IEnumerable<ValidationResult> validationResults)
    {
        if (validationResults == null) return;

        foreach (var validationResult in validationResults)
        {
            modelState.AddModelError(validationResult.MemberName, validationResult.ErrorMessage);
        }
    }
} 
```

然后在你的控制器中做类似的事情

```
[HttpPost]
public ActionResult DebitRequest(DebitRequestModel model) {
  var validator = new DebitRequestValidator();
  var results = validator.Validate(model);
  ModelState.AddModelErrors(results);
  if (!ModelState.IsValid)
    return View(model)

  //else do other stuff here
} 
```

然后在您的视图中，您可以像正常一样显示错误。

```
@Html.ValidationMessageFor(m => m.CardId) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:27:06.597

使用在视图和控制器操作方法之间传递的 ViewModel 对象。ViewModel 对象可以通过`Validate(ValidationDictionary validationDictionary)`方法处理验证。

在调用服务层中的任何方法之前，控制器必须调用 ViewModel 对象的 Validate 方法。这应该只对 http POST 操作是必需的。

然后，您的视图将必须显示验证消息。

此解决方案要求视图模型对象在控制器操作和视图之间传递，但现在主要由 MVC 中的 ModelBinder 处理。

您的控制器（http post）操作将如下所示：

```
[HttpPost]
public ActionResult Foo(BarViewModel viewModel)
{
    viewModel.Validate(ValidationDictionary);

    if (!ModelState.IsValid)
    {
        return View(viewModel);
    }

    // Calls to servicelayer
} 
```

ViewModel 中的 Validate 方法如下所示：

```
public void Validate(ValidationDictionary validationDictionary)
{
    if (SomeProperty.Length > 30)
    {
        validationDictionary.AddError("SomeProperty", "Max length is 30 chars");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-09T06:20:48.937

如果你只是在做 ViewModel Validation，**FluentValidation**是一个很好的库。

如果您想将业务验证作为对用户的反馈，您可以使用适配器模式，它会为您提供您想要的。

创建一个接口（IValidationDictionary 或类似的东西）。此接口将定义一个 AddError 方法，并将传递给您的服务以添加错误消息。

```
public interface IValidationDictionary
{
    void AddError(string key, string errorMessage);
} 
```

为您的 mvc 应用程序创建一个 ModelStateAdapter。

```
public class ModelStateAdapter : IValidationDictionary
{
    private ModelStateDictionary _modelState;

    public ModelStateAdapter(ModelStateDictionary modelState)
    {
        _modelState = modelState;
    }

    public void AddError(string key, string errorMessage)
    {
        _modelState.AddModelError(key, errorMessage);
    }
} 
```

您需要验证的服务调用将需要 IValidationDictionary

```
 public class MyService
    {        
        public void CreateDebitRequest(int userId, int cardId, decimal Amount, .... , IValidationDictionary validationDictionary)
          {
                if(userId == 0)
                    validationDictionary.AddError("UserId", "UserId cannot be 0");
          }
     } 
```

然后，您将依赖`IValidationDictionary`但不依赖 MVC，这也会使您的解决方案可测试。

如果您需要在没有 的应用程序中实现服务`ModelStateDictionary`，您只需`IValidationDictionary`在用于保存错误的类上实现接口。

控制器示例：

```
public ActionResult Test(ViewModel viewModel)
{
    var modelStateAdapter = new ModelStateAdapter(ModelState);
    _serviceName.CreateDebitRequest(viewModel.UserId, viewModel.CardId, ... , modelStateAdapter);

    if(ModelState.IsValid)
        return View("Success")

    return View(viewModel);
} 
```

这种方法的优点：

*   不依赖调用库
*   可以模拟 IValidationDictionary 进行测试。

这种方法的缺点：

*   您需要将 IValidationDictionary 传递给要对其进行验证的每个方法，然后将其返回给用户。

    或者

    您需要在要验证的每个控制器操作中初始化服务的验证字典（如果您决定将 IValidationDictionary 作为私有字段）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:20:10.323

我使用了一个传递消息数组（或类集合）的系统，每个元素都有代码、描述和友好消息。我们过去只是简单地检查是否有任何东西。它在 UI 和另一个“服务”层之间运行良好，所有异常都被很好地捕获，它们被翻译成这些验证规则......只是一个想法

# xcode - 在文本字段标签内显示变量

> ID：10109829
> 
> 赞同：0
> 
> 时间：2012-04-11T16:14:04.100
> 
> 标签：xcode, cocoa, label, textfield, nstextfield

在我的 Cocoa 应用程序中，我在 NSTextView 中显示了计算结果，现在我希望你能在 NSextField 中看到结果，我尝试了各种方式但没有成功。

```
[textField insertText:[NSString stringWithFormat:@"%i \n", giorni]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:15:29.693

怎么样：（为 NS 而不是 UI textField 编辑）

```
[textField setIntValue:giorni]; 
```

# razor - Razor：将动态值加在一起

> ID：10109833
> 
> 赞同：0
> 
> 时间：2012-04-11T16:14:16.587
> 
> 标签：razor

我有一组使用 foreach 循环动态生成的值，如何将它们添加到一个值中？

例如，假设我有一个站点，其中每个节点都有一个与之关联的数字。我怎样才能把所有*这些*数字加在一起？到目前为止，我认为它类似于以下内容，其中“node.aNumberValue”的值被添加到下一个，依此类推：

```
@foreach (var x in nodes){

    var total = node.aNumberValue + node.aNumberValue (etc...);

    <p>@total</p>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:17:51.543

这就是你想要的，我认为：

```
int total = 0;
@foreach (var x in nodes)
{
    total += x.aNumberValue;
}
<p>@total</p> 
```

甚至更好，只是：

```
<p>@nodes.Sum(x => x.aNumberValue)</p> 
```

# javascript - 警告后尝试关闭窗口

> ID：10109834
> 
> 赞同：3
> 
> 时间：2012-04-11T16:14:19.060
> 
> 标签：javascript

好的，所以我有一个页面会将信息发布到数据库，然后它会返回到另一个页面。现在唯一的事情是他们希望页面在警报出现后自动关闭，告诉他们数据库内容已保存。我将它放在条件 if 语句下的 php 页面上，然后从那里运行 javascript。唯一不工作的事情。我已经尝试过 window.close 和 self.close 并且只是 close() 但似乎没有任何想法。也在 Chrome 中尝试这个。

```
if( $_POST['finished'] == 'Send' )  
{

(this is just DB stuff here)

echo "<script type='text/javascript'>ConfirmStatus = confirm('Thank you for entering the information.')

if (ConfirmStatus == true) {

self.close();
}</script>";    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:32:16.693

```
echo "<script type='text/javascript'>
    if (confirm('Thank you for entering the information.')){
    window.close();
    }</script>"; 
```

# wordpress - Facebook 评论不接受获取永久链接

> ID：10109837
> 
> 赞同：0
> 
> 时间：2012-04-11T16:14:21.983
> 
> 标签：wordpress, facebook-comments, permalinks

我已经在我的 wordpress 博客上手动安装了 facebook 评论，但在评论框下方不断收到一条错误消息：

警告：[http://invalid.invalid/?php%20echo%20get_permalink();%20](http://invalid.invalid/?php%20echo%20get_permalink();%20) ?> 无法访问。

我把它放在我的标题中：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

和 ：

```
<meta property="og:title" content="<?php echo get_the_title(); ?> "/>
<meta property="og:url" content="<?php echo get_permalink(); ?>"/>
<meta property="og:image" content="xxxxxxxxx"/>
<meta property="og:description" content="<?php
    while(have_posts()):the_post();
    $out_excerpt = str_replace(array("\r\n", "\r", "\n"), "", get_the_excerpt());
    echo apply_filters('the_excerpt_rss', $out_excerpt);
    endwhile;   ?>"/>
<meta property="fb:app_id" content="xxxxx">
<meta property="fb:admins" content="xxxxx"/> 
```

在我的 single.php 文件中，我添加了这个：

```
 <?php if (in_category('randomposts')) {
     echo '<div></div>';
} else {
 echo '<div class="fb-comments" data-href="<?php echo get_permalink(); ?>" data-num-posts="5" data-width="640"></div>';
}

?> 
```

我在 facebook 调试器/linter 中检查了我的网站，没有出现任何问题。评论框显示在我的页面上，但该警告困扰着我。您可以分享到 facebook，但随后它显示[http://invalid.invalid](http://invalid.invalid)作为 url。我发现问题出在我的 single.php 文件中的“echo get_permalink”。当我输入我的主页 url 时，没有警告并且一切正常，除了它共享我的主页 url 而不是帖子 url。

这是一个例子：

```
http://www.itrainmymind.com/this-is-a-tespost/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:27:35.150

你有两个`echo`。你想要的是

```
echo '<div class="fb-comments" data-href="', get_permalink() ,'" data-num-posts="5" data-width="640"></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T20:50:51.220

使用 facebook，您必须将其用于 wordpress single.php 页面中的超链接

```
<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url;?> 
```

只需使用默认代码

```
<?php echo get_permalink(); ?> 
```

不管用

# upload - 使用 samba 恢复上传

> ID：10109842
> 
> 赞同：1
> 
> 时间：2012-04-11T16:14:50.967
> 
> 标签：upload, samba, resume

如果出现网络中断，我一直在使用 smbget 命令恢复下载...例如

```
smbget -r smb://mysambaserver/path/to/file 
```

是否有“上传”文件的等价物？

" `smbclient get`" 和 " `smbcllient put`" 似乎都没有恢复选项。我检查了谷歌，但“smb put resume”似乎只是为了列出上传简历的人！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T23:04:38.233

上传文件没有等价物，至少不是作为 Samba 本身的一部分。

# ruby-on-rails - 关于如何使 Apache Tomcat 与 Ruby on Rails 应用程序一起工作的分步指南？

> ID：10109843
> 
> 赞同：0
> 
> 时间：2012-04-11T16:14:51.787
> 
> 标签：ruby-on-rails, tomcat, installation, documentation

我有 Windows 7 x64。Tomcat 和 Rails 都已安装并正常工作。我只是不知道如何让它们一起工作。

因此，我正在寻找有关如何使 Apache Tomcat 与 Ruby on Rails 应用程序一起工作的分步指南的链接。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:25:02.170

Tomcat 用于 Java 应用程序，它允许您运行 Java Servlet 和 JavaServer Pages。您不需要完整的 Apache Tomcat 服务器，一个普通的 Apache 或 Nginx 网络服务器就足够了。[在Phusion Passenger](http://www.modrails.com/)的帮助下，Rails 应用程序的部署非常容易。只需遵循[Phusion 乘客用户指南即可](http://www.modrails.com/documentation/Users%20guide%20Apache.html)。但是，如果您必须使用 Tomcat，您可以[将 Apache Tomcat 服务器与 Apache Web 服务器连接起来](http://tomcat.apache.org/connectors-doc/)。这需要[mod_jk 模块](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)，这是一个处理 Tomcat 和 Apache 之间通信的 Tomcat-Apache 插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:27:15.977

一种方法是使用 JRuby 作为您的 Ruby 解释器，[http://jruby.org](http://jruby.org)。然后，您可以从 Ruby 调用 java 库，使用 WEBrick 进行开发，并通过使用 warble gem [http://rubygems.org/gems/warbler](http://rubygems.org/gems/warbler)将 Rails 应用程序转换为 war 文件进行部署。然后当然可以使用 Tomcat 或 JBoss 部署 war 文件，就像将其放入 Tomcat 的 web-apps 目录一样容易。

您还可以查看 TorqueBox [http://torquebox.org/](http://torquebox.org/)，了解在 JRuby 和 JBoss 上部署 Rails 应用程序的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:20:53.570

我假设您在端口 8080 上运行了 tomcat？如果是这样，您将需要设置一个代理来拥有 tomcat。如果你能更具体地说明你所说的合作是什么意思，那将会有所帮助。这是一个如何代理tomcat的链接。

[http://tomcat.apache.org/tomcat-5.5-doc/proxy-howto.html](http://tomcat.apache.org/tomcat-5.5-doc/proxy-howto.html)

# asp.net - 样式表 - 如何让字段并排显示

> ID：10109844
> 
> 赞同：0
> 
> 时间：2012-04-11T16:14:54.387
> 
> 标签：asp.net, css, asp.net-mvc, stylesheet

我使用用户控件在 ASP.NET MVC 应用程序中显示一堆字段。例如。

```
 <div class="metadata-left metadata">
        <div>
            Default Domain:</div>
        <br />
        <div>
            Disabled:</div>
        <br/>
        </div>
    <div class="metadata-right metadata">
        <div>
            <%= Html.EditorFor(c => c.IsDefault) %></div>
        <br />
        <div>
            <%= Html.EditorFor(c => c.IsDisabled) %></div>
        <br />
        </div> 
```

在样式表中，我有以下类：

```
.metadata-left
{
    float: left;
    width: auto;
    text-align: right;
}
.metadata-right
{
    float: left;
    width: 68%;
    padding-left: 3%;
    text-align: left;
}
.metadata div
{
    height: 20px;
} 
```

如何让这些字段并排显示？现在我把它们一个接一个地放在一列下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:22:04.617

像这样组织元素可能会更成功

```
<div class="metadata-field">
  <div class="metadata-left metadata">
        Default Domain:
  </div>
  <div class="metadata-right metadata">
        <%= Html.EditorFor(c => c.IsDefault) %>
  </div>
</div>
<div class="metadata-field">
  <div class="metadata-left metadata">
        Disabled:
  </div>
  <div class="metadata-right metadata">
        <%= Html.EditorFor(c => c.IsDisabled) %>
  </div>
</div> 
```

使用 CSS：

```
.metadata-field {
    clear:both;
}
.metadata-left
{
    float: left;
    width: auto;
    text-align: right;
}
.metadata-right
{
    float: left;
    width: 68%;
    padding-left: 3%;
    text-align: left;
}
.metadata div
{
    height: 20px;
}​ 
```

您可以进行调整以进一步更改布局。

见：http: [//jsfiddle.net/LbTg9/](http://jsfiddle.net/LbTg9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:17:35.670

它很可能是 的宽度`.metadata-left`。添加一个明确的宽度，如：

```
.metadata-left
{
    float: left;
    width: 29%;
    text-align: right;
}
.metadata-right
{
    float: left;
    width: 68%;
    padding-left: 3%;
    text-align: left;
} 
```

# python - 安装了哪个版本的fabric API

> ID：10109845
> 
> 赞同：7
> 
> 时间：2012-04-11T16:15:17.657
> 
> 标签：python, fabric

我如何通过 API 发现我安装了哪个版本的结构？

我明白我可以跑

```
$ fab --version 
```

但我宁愿做类似的事情

```
>>> import fabric
>>> fabric.version
'1.4.1' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:24:12.603

结构中有版本子模块：

```
>>>import fabric.version
>>>fabric.version.get_version()
'1.2.2' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T19:53:51.837

你甚至不需要这样做，它在[文档](http://docs.fabfile.org/en/1.4.1/usage/env.html?highlight=version#version)中：

```
from fabric.api import *
print env.version 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-12T13:27:55.797

可悲的是，使用 Fabric 2 你现在必须做类似的事情

```
import fabric
if hasattr(fabric, '__version__'):
    # For fabric2
    print(fabric.__version_info__)
    print(fabric.__version__)   # for a version tuple
else:
    # for fabric1
    from fabric.api import *
    print(env.version) 
```

# tfs - 当集合/团队项目不存在时，从 TFS 源代码管理中删除项目

> ID：10109846
> 
> 赞同：3
> 
> 时间：2012-04-11T16:15:19.550
> 
> 标签：tfs

我有一个 Visual Studio 解决方案 (2010)，其中包含在 Team Foundation Server 2010 中受源代码控制的代码项目。该集合/项目不再存在，但代码并未从集合中删除。该系列和项目已重新创建，与第一次完全一样。当我在VS中打开解决方案时，它告诉我它可以找到我的项目，它处于离线状态，并询问我是否要在线。我单击“是”，但随后出现错误并说找不到工作区。我所有的文件都是只读的。我认为这是因为源代码控制，并且由于它没有连接，我无法检查它们（删除只读）。

如何清除旧的解决方案并重新连接所有内容，而不是重新创建所有代码解决方案？

**编辑**

澄清一下： Collection 是指 TFS Collection

项目指的是 TFS 团队项目

解决方案参考 VS Code 解决方案

问题是代码解决方案仍然与不存在的团队项目相关联。当我打开它时，我收到消息“此解决方案处于脱机状态，但其关联的 TFS 服务器可用。您想在加载后使用此解决方案联机吗？” 是“无法确定此解决方案的工作区”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T16:34:16.027

加载项目后，启用源代码管理 - Team Foundation Server 工具栏，单击“更改源代码管理”按钮（仅启用一个），它会询问您是否希望永久删除与源代码管理的关联。

# python - Python 机械化模块加密

> ID：10109848
> 
> 赞同：1
> 
> 时间：2012-04-11T16:15:35.827
> 
> 标签：python, encryption, https, mechanize, mechanize-python

如果我使用带有 mechanize 的 python 脚本来填写网站上的表格（例如登录信息），我应该担心加密吗？我需要/可以做些什么来确保发送的密码是加密的？（或者这甚至是必要的吗？使用机械化填写表格是否等同于使用标准网络浏览器填写表格，因此我实际上并没有“发送”任何东西（即它取决于网站使用 https））。

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:24:04.710

这与使用网络浏览器完全一样——您应该使用相同的判断来判断您是否要输入您的用户名和密码。

# algorithm - 最大权重的词分区

> ID：10109856
> 
> 赞同：2
> 
> 时间：2012-04-11T16:16:02.243
> 
> 标签：algorithm, nlp, dynamic-programming, linear-programming

我正在开发一款游戏，我需要找到特定句子的最大权重。

假设我有句子“the quick brown fox”，并假设单个词和双词都具有定义的权重：“the”-> 10、“quick”-> 5、“brown”-> 3、“fox”-> 8 , “快速” -> 5, “快速棕色” -> 10, “棕色狐狸” -> 1

我想知道单字和双字的哪个组合提供了最大的权重，在这种情况下，它将是“the”、“quick brown”、“fox”（权重 = 28）

有人告诉我这个问题可以通过线性规划来解决，但我看不到如何实现这种方法。具体来说，我不知道如何表达问题的约束，在这种情况下，一些双词不能与包含的单个词组合（即“快速”不能与任何一个组合） "the" 或 "quick")

有人可以就如何解决这个问题提供一些指导吗？我不是该领域的专家，并且对 Simplex 的工作原理有一些基本的了解（从学校回来），但我缺乏关于如何为此类问题建模的知识。

此外，任何其他方法（不涉及线性编程或蛮力）也将受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:07:46.270

您可以在这里非常有效地使用 DP。

令 F 为最大权重函数，令句子为 w1 w2 w3 .. wk

让 G( [w1 w2 ..]) 返回组合的字典权重。

F([w1 w2 w3...wk]) = Max( G([w1])+ F([w2 w3...wk]), G([w1, w2])+ F([w3 w4.. .wk]) ... )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:43:23.793

您的示例问题的蛮力方法涉及`2^7`可能的组合 - 让我们看看我们是否可以减少它。为方便起见，让我们映射变量：

```
the quick brown fox -> (a1, a2, a3, a4)
the quick   -> b1
quick brown -> b2
brown fox   -> b3 
```

其中`a3=True`表示我们使用的是“棕色”。由此，我们可以构造出一套规则。例如，`b3`不能与`a3`or一起使用`a4`：

```
(a1:b1)     (b1:a1,a2)
(a2:b1,b2)  (b2:a2,a3)
(a3:b2,b3)  (b3:a3,a4)
(a4:b3) 
```

现在从数组开始`S=[a1=0,a2=0,...,b3=0]`递归地遍历变量组合，如果分支违反了我们的规则之一，则尽早修剪它。如果我们到达一个叶子节点，则输出与变量对应的权重，如果是迄今为止最大的，则保留它。这可能不是最有效的答案，但它肯定可以减少组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:57:55.503

用 from position to的单词调用`BiggestWeight(i)`子问题，其中是单词的数量。`i``n-1``n`

*   你的问题是找到`BiggestWeight(0)`.

*   基本情况是`BiggestWeight(n)`，等于`0`，因为单词列表是空的，并且`BiggestWeight(n-1)`，等于`weight(n-1)`，因为对于一个单词的列表只有一个选择。

*   子问题之间的关系是： `BiggestWeight(i) = max(weight(i)+BiggestWeight(i+1), pairWeight(i,i+1)+BiggestWeight(i+2) )` 因为第`i`-个字要么是单字，要么是双字的第一个。

因此，如果将值存储在大小为的表中`n+1`，则可以在 中找到结果`O(n)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:30:00.027

假设组合仅由单字和双字组成：

```
int single[n];//if we choose i-th word : single[i]
int doubles[n];//if we choose the i-th and i+1-th word as a combination : doubles[i], the last word has the same value for it's single and doubles

int dp[n+2];//dynamic programming
dp[n] = dp[n+1] = 0;//bottom up

for(int i=n-1;i>=0;i--)
{
    dp[i]=max(dp[i+1]+single[i],dp[i+2],double[i];
}
//the maximum value is dp[0] 
```

# hadoop - 如何一次运行多个java文件？

> ID：10109859
> 
> 赞同：2
> 
> 时间：2012-04-11T16:16:08.933
> 
> 标签：hadoop, cloud

我的 hadoop 项目有多个 .java 文件。如何在不使用 eclipse 的情况下执行它们？

PS：我使用默认的ubuntu终端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:34:07.873

您需要将文件[编译](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-33.htm)`.java`成 jar，然后使用 hadoop [jar](http://hadoop.apache.org/common/docs/current/commands_manual.html#jar)命令执行它。如果您的代码具有外部依赖项，您将需要使用该`-libjars`标志或创建一个[fat jar](https://stackoverflow.com/a/9829583/698839)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:58:18.653

您可以使用 javac *.java 编译当前工作目录中的所有文件。至于执行它们，请使用 java *filename 文件*
名末尾没有 .class 的地方。IE，你有`MyProgram.java`哪个编译成`MyProgram.class`你会输入：`java MyProgram`

顺便说一句，您希望运行项目的主类（有点含糊，但它可能是唯一具有 main 方法的类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:53:11.420

以下是编译hadoop java文件和执行程序的简单步骤：

编译：

javac -classpath <HADOOP_INSTALL_DIR>/hadoop-<版本>.jar -d <OUTPUT_DIR_NAME> (<YOUR_MUTLIPLE_JAVAFILES_PATH> --like *.java)

构建jar文件：

jar cvf < YOUR_JAR_FILE_PATH_WITH_NAME> -C <(之前的编译输出)OUTPUT_DIR_NAME>

使用 Hadoop Jar 命令运行 Hadoop 程序：

hadoop jar <JAR_FILE_PATH> <MAIN_PROGRAM_NAME_IN_JAR> <INPUT_PARAMETERS_IF-ANY>

希望这可以帮助！

# objective-c - 如何基于另一个实体的一对多关系访问 CoreData 实体？

> ID：10109860
> 
> 赞同：0
> 
> 时间：2012-04-11T16:16:09.670
> 
> 标签：objective-c, ios, core-data, one-to-many, nsfetchrequest

我正在使用示例库存应用程序学习 CoreData。我的数据模型有 2 个实体，“拥有”和“资产类型”。财产与称为“assetType”的资产类型具有一对一的关系，而资产类型与名为“财产”的财产具有一对多的关系。每个 Possession 只有一个 Asset Type，但 Asset Types 有多个 Possession。

我想根据资产类型将表格视图分类为多个部分。不过，我需要一些帮助来填充我的数据结构。

这是我将如何建模我的表视图控制器

表部分的 NSArray 数组中的每个部分对象将是一个 NSDictionary，其中包含 2 个键，@"Header" - 将是资产类型，@"Possessions" 是该资产类型的财产数组。

我可以处理从这个结构构建我的表格视图没有问题。我还可以处理从 CoreData 获取资产类型到我的字典的标题键中。我被难住的地方是我如何利用资产类型与财产的多对多关系，以便我可以将财产放入字典的数组中。

如何将每个资产类型的财产放入一个数组中？

我是否需要使用谓词发出获取请求以获取具有匹配资产类型的财产，还是有更简单的方法？- 似乎效率低下，因为它必须检查所有财产以进行比赛！？！？！？！？

AssetType 实体的一对多关系“拥有”是 AssetType 实体的可访问属性吗？如果是这样，我该如何访问它？它返回什么？

我不是在寻找免费代码，但如果需要，我愿意发布我的代码。我真正想要的是知道解决这个问题的最佳方法，并可能指出在线有用的信息来完成这个。我不是一个完整的新手，但我仍然无法理解 CoreData，到目前为止，Apple 文档在这个主题上仍然让我很困惑。我很感激提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:26:16.320

如果您使用 Xcode 默认的 NSManagedObject 模板创建了 AssetType 类（见图）

![文件/新建/文件.../核心数据/NSManagedObject 子类](../Images/ea4463d46921e2fd7cfc1c3c34f6ac6e.png)

你的 AssetType.h 中应该有类似的东西：

```
@interface AssetType : NSManagedObject

@property (nonatomic, retain) NSSet *possessions;

@end

@interface AssetType (CoreDataGeneratedAccessors)

- (void) addPossessionsObject:    (Possession *) value;
- (void) removePossessionsObject: (Possession *) value;
- (void) addPossessions:          (NSSet *) value;
- (void) removePossessions:       (NSSet *) value

@end 
```

所以如果你有一个 AssetType 对象，你可以通过该`possessions`属性访问所有与之相关的 Possession 对象。虽然默认情况下它没有排序，因此要将这些对象作为数组访问，您需要调用集合的`-allObjects`方法，该方法将集合中的对象作为数组返回，然后可能以某种方式对这些对象进行排序。

编辑：

此外，即使您没有以这种方式创建 NSManagedObject 子类并且它还没有`possessions`实现该属性，您也可以按照与上面示例中所述相同的方式将该属性添加到该类中，并在 AssetType.m 中实现它作为`@dynamic possessions`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:56:54.873

从我正在阅读的内容来看，我怀疑这比您想象的要容易得多。

在我看来，您已经设想在您的 UITableController 的 tableView:cellForRowAtIndexPath: 方法中使用字典数据结构，而您可能根本不需要使用它。

当您表视图控制器实例化时，（viewDidLoad: 可能是最合适的地方）只需使用如下代码检索您的资产：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Asset" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSError *error = nil;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
if (fetchedObjects == nil) {
    // handle errors here
}

[fetchRequest release]; 
```

如有必要，将 fetchedObjects 数组分配给 NSArray 类型的实例变量，以便您可以在管理表的 UITableViewController 类中的多个位置引用它。然后在上面的代码之后，您可以执行以下操作：

```
self.assets = fetchedObjects; 
```

如果您还没有为资产 NSManagedObject 创建自定义子类，那么数组中的每个对象都是 NSManagedObject 类型，您需要将其读入该类型的变量中。

当您需要与资产相关的所有物列表时，它已经存在于数组中的每个资产对象中（这就是 CoreData 的美妙之处，如果它实际上没有在内存中实例化，那么当您尝试访问该属性时，CoreData 将自动为你实例化它）。

因此，假设您尚未为 NSManagedObject 定义自定义类，那么您的数组对象将属于该类型。将数组中的一个资产对象分配给一个名为（适当地）资产的局部变量，

例如，这会将索引 0 处的对象分配给局部变量。

```
NSManagedObject *asset = [self.assets objectAtIndex:0]; 
```

您可以使用以下代码获得您的财产：

```
NSSet *assetPossessions = [asset valueForKey:"@possessions"]; 
```

（假设在 xCode 的模型编辑器中定义的关系已被命名为“拥有”）

或者，如果您为 Asset NSManagedObject 生成了自己的自定义子类，那么这可能是一个更好的示例：

```
MyManagedAssetObject *asset = [self.assets objectAtIndex:0];
NSSet *assetPossessions = asset.possessions; 
```

注意在这个例子中，我假设你没有使用 NSFetchedResultsController。实际上，使用一个表来管理一个表甚至更容易，但是就像编程的情况一样，只有当你知道“只做一件事”并且（矛盾地）使答案复杂化时，它才会变得更容易。既然你没有提到它，我假设你没有使用它。

希望这可以帮助。保罗

# android - 是否有可能对两个键进行搜索的 sqlite 查询？

> ID：10109861
> 
> 赞同：0
> 
> 时间：2012-04-11T16:16:10.510
> 
> 标签：android, sqlite

我看到的所有查询示例都只使用一个键。是否可以使用两个键。我已经尝试了下面的代码，但它不起作用。我正在尝试查找日期和时间与表中日期和时间匹配的行

```
 public String getPrimaryID(int date, int time )
{

    Cursor c= db.query(DB_TABLE, new String[]{KEY_ROWID}, "date="+date+ "time=" + time, null, null, null, null);
    int id=c.getColumnIndex(KEY_ROWID);
    String result=c.getString(id);
    return result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:18:04.760

我认为您需要`AND`查询：

```
Cursor c= db.query(DB_TABLE, new String[]{KEY_ROWID}, "date="+date+ " AND time=" + time, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:22:14.737

尝试这个 ：

```
Cursor c = db.query(TABLENAME, null, "date = ? AND time = ?", new String[] { date, time }, null, null, null, null); 
```

或者 ：

```
String query ="SELECT * FROM " + TABLENAME + " " + "WHERE  "
                "date = ? " +
                "AND time = ? ";
Cursor c =  db.rawQuery(query, new String[] {date, time}); 
```

**解释：**变量`date`和`time`将替换`?`查询中的字符

# c++ - Boost:: Dijkstra Shortest Path，如何从路径迭代器中获取顶点索引？

> ID：10109862
> 
> 赞同：1
> 
> 时间：2012-04-11T16:16:13.777
> 
> 标签：c++, boost, dijkstra, boost-graph

在你开始阅读之前，为了帮助你理解我的问题，我告诉你我已经从这个链接复制了代码：[Dijkstra Shortest Path with VertexList = ListS in boost graph](https://stackoverflow.com/questions/7156880/dijkstra-shortest-path-with-vertexlist-lists-in-boost-graph)

所以..我正在重写我的程序代码以使用 boost，但现在当 99% 准备好时，我被我的 GPS 卡住了（用于游戏）。我有一个节点列表，幸运的是，我以一种很容易转换为 boost 方法的方式添加了这些节点。我需要做的就是创建一个这样的顶点变量：

```
Vertex Vx[MAX_NODES]; 
```

我从我给出的链接中复制了 typedef。

我添加顶点的方式是这样的：

```
 stringstream s;
            s << i;
            Vx[i] = add_vertex(s.str(),dgraph); 
```

其中“i”等于一个整数。（例如int i = 9）

并且 eges 也很容易添加。现在，我有自己的结构化数组，称为“xNode”。例如： xNode[i] 保存节点的 XYZ 位置（xNode[i].X xNode[i].Y 等）的所有信息。

现在，当使用链接中的代码片段时，我已经这样做了：

```
// Write shortest path 
std::cout << "Shortest path from " << startid << " to " << endid << ":" << std::endl; 
float totalDistance = 0; 
for(PathType::reverse_iterator pathIterator = path.rbegin(); pathIterator !=       path.rend(); ++pathIterator) 
{ 
    std::cout << source(*pathIterator, dgraph) << " -> " <<     target(*pathIterator, dgraph)
    << " = " << get( boost::edge_weight, dgraph, *pathIterator ) <<     std::endl; 
} 
```

这就是我卡住的地方，为“source(*pathIterator, dgraph)”和“target(*pathIterator, dgraph)”获取地址，但我需要顶点索引来访问xNode[i]，i是NodeID（或以及顶点 ID | Vx[i])。我怎样才能做到这一点？

* * *

编辑：我试图做：

```
for(PathType::reverse_iterator pathIterator = path.rbegin(); pathIterator !=       path.rend(); ++pathIterator) 
{ 
    for(int i = 0; i < MAX_NODES; ++i)
    {
        if(source(*pathIterator, dgraph) == *((Vertex*)Vx[i]))
        {
            cout  << "  " << i << "  " << endl;
            break;
        }
    }
} 
```

但这只是崩溃..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:30:36.720

使用该`typedef`问题中的 s ，您可以使用`get(boost::vertex_index, dgraph, v)`获取 的索引`v`。您还可以使用以下方法缓存属性映射：

```
IndexMap vi = get(boost::vertex_index, dgraph); 
```

然后用于`get(vi, v)`获取`v`.

# regex - HTML5 PushState 正则表达式问题

> ID：10109863
> 
> 赞同：1
> 
> 时间：2012-04-11T16:16:18.280
> 
> 标签：regex, html, iis, pushstate

我一直在为我正在从事的项目试验 Backbone，但我一直在让 Backbone 的“pushState”按我想要的方式运行时遇到问题。

我有一个由 4 个视图和一个路由器组成的简单项目。如果在这种情况下很重要，我将通过元素的 id 进行路由。当我转到其中一个视图的哈希（http://example.com/backbonetest/#step1 **）**时，它显示正确，并且 url 已更改。这是我希望在这里发生的事情，但是当我尝试导航到没有哈希的同一事物时，问题就来了（http://example.com/backbonetest/step1 **）**。我在服务器 (IIS) 上得到一个 404，这是意料之中的，因为该页面不存在。

我一整天都在尝试做的是为 IIS 编写一个正则表达式，它将捕获并重写 url，删除 url 末尾的片段，以便正确提供页面。我宁愿简单地重写 url 而不是拥有同名的物理文件，因为页面的内容将动态生成，并且无论如何都需要脚本来获取内容。

我遇到的问题可能与我需要如何在文件系统上构建文件夹/脚本/样式有关。我希望能够将整个示例包含在**/backbonetest/**文件夹中。对于脚本，'backbonetest/scripts' 等等。

我列出了我一直在测试我的正则表达式的 URL，以及我一直试图达到的结果：

```
    输入输出：

    2                       
    a2                      
    ab2                     
    ab22                    
    第2步                   
    脚本.js 脚本.js
    脚本/脚本/
    555/东西 555/东西
    脚本/script.js 脚本/script.js

```

**编辑：**我发现使用的 url 不包含前面的斜杠，这就是 Qtax 的解决方案在 IIS 中不起作用的原因。新的输入结构如上所示。

'/555/stuff' url 我希望 404 正常。如果没有定义除当前子目录之外的子目录，并且 url 没有引用显式文件（例如带有扩展名的文件），我只想重写 url。

我整天都在网上搜索这个问题的解决方案，并尝试使用正则表达式，但没有设法为我的问题找到合适的解决方案。在任何地方都没有找到任何东西之后，我想我一定是看错了……

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:53:08.143

经过多次头部/桌面撞击后，我想出了解决方案。它引起的所有大惊小怪都非常简单：

```
^[^\./]+$
```

本质上：

如果 url 不包含 '/' 或 '.' 则替换 在它的任何地方。

现在，对于使用具有 Backbone 和 HTML5 推送状态的 IIS 的任何人来说，这应该是一个解决方案。只需将其弹出到应用程序根目录的 web.config 中，并将重写操作更改为“。”，它应该就可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T10:32:26.340

这让我整个早上的大脑都融化了！

我已经添加到这个 - 在我的场景中，我有一个位于 API 虚拟目录中的 API 项目（以消除对 CORS 的需要） - 我显然不想重写任何 PAI 调用，所以我重新 -我的写法如下-如果需要，您可以对 API URL 执行类似操作...

```
 <rule name="Handle PushState">
        <match url="^[^\./]+[^\./api]+(.*)$" />
        <conditions>
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        </conditions>
        <action type="Rewrite" url="." />
      </rule> 
```

# c# - TCP连接丢失时抛出错误

> ID：10109868
> 
> 赞同：0
> 
> 时间：2012-04-11T16:16:58.283
> 
> 标签：c#

我有一段代码可以在 TCP 端口上“侦听”，并且无论发送什么，都只会返回一个字符串。问题是客户端只是在测试端口是否处于活动状态然后断开连接。此时我会抛出一个错误。无法访问已处置的对象对象名称：“System.Net.Socket.NetworkSystem”

我认为问题在于这段代码在一个线程上，当连接关闭时，while循环引用了一个已处理的对象......当客户端关闭连接时，我应该如何防止错误触发？

```
 //Cretae listener to accept client connections
        TcpClient tcpClient = (TcpClient)client;
        NetworkStream clientStream = tcpClient.GetStream();

        byte[] rcvBuffer = new byte[BUFSIZE]; // Receive buffer
        int bytesRcvd; // Received byte count
        while (ServiceRunning)  // Run forever, accepting and servicing connections
        {
            try
            {
                // Receive until client closes connection, indicated by 0 return value
                int totalBytesEchoed = 0;

//I THINK THIS IS WHERE THE PROBLEM IS .. THE CLIENTSTREAM.READ???

                while (((bytesRcvd = clientStream.Read(rcvBuffer, 0, rcvBuffer.Length)) > 0) && (ServiceRunning))
                {
                    clientStream.Write(responseBytes, 0, responseBytes.Length);
                    WriteEventToWindowsLog("GSSResponderService", "Received "+System.Text.Encoding.UTF8.GetString(rcvBuffer), System.Diagnostics.EventLogEntryType.Information);
                    totalBytesEchoed += bytesRcvd;
                }

                WriteEventToWindowsLog("GSSResponderService", "Responded to " + totalBytesEchoed.ToString() + " bytes.", System.Diagnostics.EventLogEntryType.Information);

                // Close the stream and socket. We are done with this client!
                clientStream.Close();
                tcpClient.Close();

            }
            catch (Exception e)
            {
//THIS IS GETTING TRIGGERED WHEN A CONNECTION IS LOST
                WriteEventToWindowsLog("GSSResponderService", "Error:" + e.Message, System.Diagnostics.EventLogEntryType.Error);
                clientStream.Close();
                tcpClient.Close();
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:53:44.493

根据 MSDN，[NetworkStream](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)类的[Read](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)方法在底层 Socket 关闭时抛出*IOException* ，在 NetworkStream 关​​闭或从网络读取失败时抛出*ObjectDisposedException 。**Write*方法会抛出相同的异常。

 ***因此，捕获这两种异常类型并在异常处理程序中采取适当的措施就足够了。

```
 TcpClient tcpClient = (TcpClient)client;
    NetworkStream clientStream = tcpClient.GetStream();

    byte[] rcvBuffer = new byte[BUFSIZE]; // Receive buffer
    int bytesRcvd; // Received byte count
    while (ServiceRunning)  // Run forever, accepting and servicing connections
    {
        try
        {
            // Receive until client closes connection, indicated by 0 return value
            int totalBytesEchoed = 0;

            try
            {
                while (((bytesRcvd = clientStream.Read(rcvBuffer, 0, rcvBuffer.Length)) > 0) && (ServiceRunning))
                {
                    clientStream.Write(responseBytes, 0, responseBytes.Length);
                    WriteEventToWindowsLog("GSSResponderService", "Received "+System.Text.Encoding.UTF8.GetString(rcvBuffer), System.Diagnostics.EventLogEntryType.Information);
                    totalBytesEchoed += bytesRcvd;
                }
            }
            catch(IOException)
            {
                //HERE GOES CODE TO HANDLE CLIENT DISCONNECTION
            }
            catch(ObjectDisposedException)
            {
                //HERE GOES CODE TO HANDLE CLIENT DISCONNECTION
            }

            WriteEventToWindowsLog("GSSResponderService", "Responded to " + totalBytesEchoed.ToString() + " bytes.", System.Diagnostics.EventLogEntryType.Information);

            // Close the stream and socket. We are done with this client!
            clientStream.Close();
            tcpClient.Close();

        }
        catch (Exception e)
        {
            WriteEventToWindowsLog("GSSResponderService", "Error:" + e.Message, System.Diagnostics.EventLogEntryType.Error);
            clientStream.Close();
            tcpClient.Close();
            break;
        }
    }
} 
```***

# python - 如何使用已经是 xml 格式的请求消息来提供 suds

> ID：10109877
> 
> 赞同：1
> 
> 时间：2012-04-11T16:17:52.567
> 
> 标签：python, testing, soap, suds

我有一些 web 服务要测试，在axis2 中的服务器上运行。

我已经获得了一些我们应该使用我们的 web 服务从第三方接收的 xml 数据。该 xml 数据根据我们的 web 服务的 wsdl 格式正确。

为了测试我做：（*按照suds中给出的axis2.py测试文件）*

```
url = 'http://localhost:8080/axis2/services/{0}?wsdl'.format('myWebService')
print 'url=%s' % url
client = Client(url)
print client
with open("input.xml") as f:
    inputXml = f.read()
print client.service.myWebserviceRequest(inputXml) 
```

我收到以下错误消息：

```
urllib2.URLError: <urlopen error [Errno 10061] No connection could be made becau
se the target machine actively refused it> 
```

据我在声明`print Client`中看到的，suds 正在等待的对象不是 xml 形式，而是 python 形式。（这就是axis.py代码的其余部分所建议的）

但就我而言，我已经将数据格式化为 xml。你知道我如何将它作为 xml 直接输入到请求中`client.service.myWebserviceRequest`吗？

（这不是连接问题，因为我访问的是axis2 webservice `getVersion`）

**EDIT1：**的输出`print client statement`。

```
Service ( myWebService ) tns="ws.myCompany.com"
   Prefixes (2)
      ns2 = "myData.ws.myCompany.com"
      ns3 = "ws.myCompany.com"
   Ports (1):
      (MyServiceSSOAP12port_http)
         Methods (1):
            sendMyInformation(ns2:DATA_HEADER DATA_HEADER, ns2:OTHER_CONTENT OTHER_CONTENT, )
         Types (1):
            WSExceptionType 
```

让我感到困惑的是，suds Client 暴露了表单的服务`sendMyInformation((ns2:DATA_HEADER DATA_HEADER, ns2:OTHER_CONTENT OTHER_CONTENT,)`

而在我的 wsdl 中，要提供的数据是：

```
<xs:element name="WHOLE_CONTENT">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="DATA_HEADER"/>
            <xs:element ref="OTHER_CONTENT"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:17:54.023

刚在找答案的时候看到这个问题

你解决了吗？你看起来像下面这样吗

消息注入（诊断/测试？）¶ 服务 API 提供消息/回复注入。

要注入要发送的soap 消息或注入要处理的回复或故障，就像由soap 服务器返回一样，只需指定__inject 关键字参数。

调用服务时。例如：

发送原始肥皂消息：

`print client.service.test(__inject={'msg':message})`
全科医生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T07:44:54.280

从我认为 suds 版本 0.39 开始，您可以传入要发送的原始 xm。

```
from suds.sax.text import Raw

xml = Raw('<person name="jeff"><age>5</age></person>')
result = client.service.sendMyInformation(xml) 
```

要检查实际发送的内容，在构建客户端时，您不能将 nosend 标志设置为 true。此标志不发送但生成肥皂

```
client=Client(url, nosend=True)
print client.envelope 
```

# svn - Ubuntu 上的 Subversion - 增量转储更改了修订号

> ID：10109880
> 
> 赞同：0
> 
> 时间：2012-04-11T16:18:08.000
> 
> 标签：svn, ubuntu, tortoisesvn, svnserve, svndump

上周我转储了我的颠覆服务器。本周我错误地继续在我的旧存储库上提交。现在我开始从修订号 6713 到最新版本进行增量转储。

```
svnadmin dump --incremental -r 6713:6720 /path/to/repository > rev6713.svn_dump 
```

当我将它加载到新存储库时，我意识到我的新存储库中已经有了修订版 6713。因此，它在加载时会自动增加修订号。现在，每当我尝试通过 TortoiseSVN 在本地计算机上进行更新时，它都会显示之前一个修订版的评论。例子：

```
Revision 6719 no comment
Revision 6720 yes comment 
```

它在 TortoiseSVN 上显示我的版本号为：6720 'no comment'。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:59:48.403

最后，我决定对颠覆服务器进行干净的转储。但是即使使用新转储也会发生此错误。经过长时间的搜索，我发现错误是因为tortoiseSVN的缓存，因此我清理了tortoiseSVN的缓存：

```
=> Right click on Folder - TortoiseSVN - Settings - Saved Data - Clear 
```

现在，它工作正常。

# c# - 什么可能导致表层次结构在 IE9 中无法正确呈现？

> ID：10109888
> 
> 赞同：0
> 
> 时间：2012-04-11T16:18:50.890
> 
> 标签：c#, asp.net, internet-explorer-9, repeater

我有一堆嵌套的 ASP.net 中继器，当我将最外层的中继器链接到我制作的 Object 数据结构时，它们每个都会生成表结构。它完全按照我在 Chrome、Firefox 或 IE9（在兼容模式下）中运行时的预期呈现。

但是当我在常规的旧 IE9 中运行它时，表格中会出现看似随机的空格，其中不包含任何数据，有时甚至会超出表格本身的最外层边框。

我想知道的是，是否有人对可能导致这种特殊行为或听说过类似问题的原因有任何可能的*想法？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:34:27.317

这似乎是 IE9 中的一个已知错误，它是由表格单元格之间的空格引起的。请参阅此答案以获取解决方案。[https://stackoverflow.com/a/6230802/84236](https://stackoverflow.com/a/6230802/84236)

# xcode - XCode、Storyboard、View Controller 项目未显示

> ID：10109898
> 
> 赞同：4
> 
> 时间：2012-04-11T16:19:49.453
> 
> 标签：xcode, storyboard, viewcontroller

今天打开一个项目时，XCode 中出现了一些奇怪的行为。`storyboard`视图中的内容已消失，例如`NavigationBar`in `viewController`、与之关联的按钮等。我可以在 Scene 列表中看到它们仍然存在。有没有办法让这些再次出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T12:47:11.710

您可能需要在情节提要中添加一个导航控制器，并使您的视图控制器成为根。您不能简单地将情节提要中模拟指标的顶部栏设置为导航栏。

# xml - 在 xml 模式中为列表强制执行元素值

> ID：10109899
> 
> 赞同：0
> 
> 时间：2012-04-11T16:19:50.640
> 
> 标签：xml, xsd, xml-validation

我有以下元素（请原谅语法）：-

```
<xs:complexType name="shop_T">
  <xs:element name="city" type="xs:string" />
  <xs:element name="other_info" type="other_info_T" />
</xs:complexType> 
```

现在我希望以两种方式引用这个 complexType

```
<xs:element name="list_shops_in_city">
  <xs:element name="city" type="xs:string" />
  <xs:element name="shop" type="shop_T" maxOccurs="unbounded"/>
</xs:element>

<xs:element name="order">
  <xs:element name="shop" type="shop_T" />
</xs:element> 
```

如果 shop_T 用于城市范围的商店列表，我是否可以强制执行它的子元素“city”的值应该与列表本身的值相同的约束。如果它是单独使用的，那么城市可以是任何东西。?

如果这不能用 XML Schema 完成，那么是否有另一种方法可以使用标准验证技术（比如使用 DTD。我只熟悉 XML Schema，所以我可以通过阅读另一种技术来完成）？还是我需要在我的应用程序逻辑中对此进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:25:59.223

它可以使用 XML Schema 完成，但只能使用 XSD 1.1 中的新断言工具，该工具在几周前成为推荐：Xerces 和 Saxon 支持 XSD 1.1。

# java - 从 Alfresco 中的 Java webscript 调用 js webscript

> ID：10109901
> 
> 赞同：0
> 
> 时间：2012-04-11T16:20:05.110
> 
> 标签：java, javascript, alfresco, web-scripting

我有个问题。我需要从 Java webscript 执行 js webscript。我知道，怎么做：

```
req.getRuntime().getContainer().getRegistry().getWebScript("com/home/testJs/testJs.get").execute(req, res) 
```

，但是如何构造新的 WebScriptRequest 对象呢？我需要这样做来重写请求路径。这对我来说真的是个问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:31:00.190

通常，您应该使用[WebScriptRequestURLImpl](http://www.springsurf.org/sites/1.0.0.M3/spring-webscripts/spring-webscripts/apidocs/org/springframework/extensions/webscripts/WebScriptRequestURLImpl.html)。没有任何其他细节，很难深入。

也就是说，通过另一个 HTTP 调用来解决您的问题通常是一个坏主意，这基本上表明模块化不良或缺乏代码重用。

我宁愿将 JS 和 Java Web 脚本流中常见的一段代码移动为一个[Action](http://wiki.alfresco.com/wiki/Custom_Actions)，您可以从这两个地方调用它，而无需重新打包输入参数，或者更糟的是通过 HTTP 发送它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:26:37.667

当然，skuro 说通过 HTTP 层两次是一个坏主意是正确的。

但事实上，Alfresco 开箱即用地支持**同时执行脚本控制器和 java 方法——没有丑陋的 hack，也无需通过整个 HTTP 层两次。**

你可以这样做：

将您的脚本代码放在相应的 .js 文件中。

确保您的 Java 类是 的子类`DeclarativeWebScript`，覆盖`executeImpl`并将您的自定义逻辑放在那里。

当然，您仍然可以争辩说拥有两个控制器是不好的风格。:)

# dynamic - 向客户提出一系列问题并进行产品推荐

> ID：10109903
> 
> 赞同：0
> 
> 时间：2012-04-11T16:20:17.977
> 
> 标签：dynamic, logic, conditional

我不知道该怎么称呼它，但我希望创建一组带有预定义选项的简单问题，并根据这些问题的答案，我希望我的网站向用户提供建议。

更具体地说，我在一家酒店公司工作，我们想问一系列问题，比如：“你对什么活动感兴趣？你会和谁一起旅行（家人、伴侣、一个人）？你喜欢外出就餐吗？还是自己做饭？根据对这些问题的回答，我们想向访客推荐我们的一处或多处房产。

是否有任何东西可以适应这种用途，或者我们正在寻找一个定制项目？

任何建议将不胜感激，如果这已经涵盖，我深表歉意......只是不知道要寻找什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:39:14.187

由于您的酒店公司应该拥有其酒店和东西的数据库，我会建立一个自定义项目。我会这样做：

*   定义所有酒店的数据库
*   每个酒店都应该有作为参数，每个问题的结果（见下面的例子）
*   构建一个 python/php/whatever 应用程序来询问客户这些问题
*   向他们展示最近的酒店，以获得一系列答案。

让我用一个例子来解释它：

假设我们有 3 个问题 [可以养宠物吗？可以接待孩子吗？有游泳池吗？] 和 3 家酒店 [A,B,C] 他们每个人都有一个数组，里面有这些问题的答案。

现在在你的 python/php/whatever 应用程序中，你必须问诸如“你喜欢和你的宠物一起旅行吗？”之类的问题。并存储答案以将所有答案与每个酒店的答案进行比较。然后只需通过接近用户的一系列答案来订购酒店。

# iphone - 应用间通信

> ID：10109906
> 
> 赞同：1
> 
> 时间：2012-04-11T16:20:36.793
> 
> 标签：iphone, ios

我有一个接受用户输入的应用程序。该信息用于创建查询字符串，该字符串使用自定义 URL 方案转发到第二个应用程序。第二个应用程序按预期打开，但从未访问过第二个应用程序的 AppDelegate 中的 application:openURL 方法。附上此方法的代码：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
{
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    ProcessorViewController *viewController = (ProcessorViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:@"ProcessorController"];

    return [viewController handleURL:url];
} 
```

任何确定为什么从未访问过应用程序委托中的此方法的帮助将不胜感激。

# php - 如何在本地主机和实时服务器上获得相同的 $_SERVER['REQUEST_URI']

> ID：10109907
> 
> 赞同：4
> 
> 时间：2012-04-11T16:20:51.840
> 
> 标签：php, url-routing

所以这就是事情，我正在构建需要根据请求 URI 调度 http 请求的调度程序类，所以我只对域后面的部分 URI 感兴趣。

现在，当我像这样在 URI 上的实时服务器上工作时：

```
www.domain.com/controller/method/params/ 
```

REQUEST_URI 将返回：

```
/controller/method/params/ 
```

但是当我在本地机器上工作时，我有这样的 URI：

```
localhost/project/controller/method/params/ 
```

并且 REQUEST_URI 将返回：

```
/project/controller/method/params/ 
```

那么有没有一种优雅而简洁的方法来告诉 php 只从 URI 中获取我需要的参数？它必须是 $_SERVER['REQUEST_URI']，但我需要在实时服务器和本地服务器上使用相同的字符串？

谢谢！

Dispatcher 将当前请求 URI 与配置文件中定义的 URI 进行比较。在实时服务器上它匹配，但在本地机器上比实时服务器上多一个段。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:25:19.030

通常我将本地网络服务器配置为响应“test.mysite.com”，并在主机文件中将 test.mysite.com 设置为 127.0.0.1，这样我可以更好地模拟生产环境，并且我不会被迫使用子路径在网址中

如果你使用 apache webserver，你可以简单地设置 N 个虚拟主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:00:05.700

如果存在，您可以简单地从 URL 的开头删除路径。

```
$path = '/project/'; // for localhost/project/controller/method/params/
//$path = '/';       // for domain.tld/controller/method/params/

$url = getenv('REQUEST_URI');
if(strpos($url, $path) === 0)
{
    $url = str_replace($path, '', $url, 1);
}
print $url; 
```

我还没有测试过上面的代码，所以杂散的“/”可能会搞砸。如果需要，您可以随时使用类似的东西修剪 URL `$url = trim($url, '/')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:33:16.790

```
$url = $_SERVER['REMOTE_ADDR'].$_SERVER['REQUEST_URI']; 
```

那是你要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T21:17:31.243

如果检测到 localhost ，我使用内置的*array_shift()函数。*

```
if ($_SERVER['HTTP_HOST'] == 'localhost') {
    $array_uri = explode('/', $_SERVER['REQUEST_URI']);
    array_shift($array_uri);
    $uri = $array_uri;
} else {
    $uri = explode('/', $_SERVER['REQUEST_URI']);
} 
```

# c# - ActionResult 函数出现问题

> ID：10109908
> 
> 赞同：0
> 
> 时间：2012-04-11T16:20:53.347
> 
> 标签：c#, asp.net-mvc-3

我正在尝试实现以下 ActionResult 函数，但出现错误：

错误 1“System.Data.Objects.ObjectSet”不包含“Find”的定义，并且找不到接受“System.Data.Objects.ObjectSet”类型的第一个参数的扩展方法“Find”（您是否缺少使用指令或程序集引用？） C:\Users\SDC\Documents\Adv Web\U0858987_PennineTheatre_Component_2\U0858987_PennineTheatre_Component_2\Controllers\ShowController.cs 37 35 U0858987_PennineTheatre_Component_2

任何人都可以帮助纠正这个错误吗？

```
 // DETAILS
    public ActionResult Details(int id)
    {
        Show shows = db.Shows.Find(id);
        //var show = db.Shows.Find(id);
        return View(shows);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:14:34.250

`db.Shows`是一种[`ObjectSet`](http://msdn.microsoft.com/en-us/library/dd412719.aspx)没有`Find`方法的方法，但是可以使用许多其他方法（包括 LINQ）。所以你可以拥有：

```
// don't forget to use the System.Linq namespace
public ActionResult Details(int id)
{
    var show = db.Shows.Single(s.Id == id);
} 
```

# ios - 自定义 UINavigationBar 字体

> ID：10109915
> 
> 赞同：22
> 
> 时间：2012-04-11T16:21:11.950
> 
> 标签：ios, ios5

我正在尝试自定义我的 UINavigationBar 字体，在我的应用程序委托中使用以下 iOS 5 代码`application:didFinishLaunchingWithOptions`：

```
if ([[UINavigationBar class] respondsToSelector:@selector(appearance)]) 
{
    [[UINavigationBar appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: 
                                                          [UIColor whiteColor], UITextAttributeTextColor,
                                                          [UIColor blackColor], UITextAttributeTextShadowColor,
                                                          [NSValue valueWithUIOffset:UIOffsetMake(1, 0)], UITextAttributeTextShadowOffset,
                                                          [UIFont fontWithName:kDefaultFont size:0.0], UITextAttributeFont, 
                                                          nil]];
} 
```

它工作正常，导航栏使用我的字体呈现。伟大的。

参考[文献](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)我发现建议您可以使用零字体大小，它会调整字体大小以适应您的导航栏（对于横向布局的较短导航栏，使用稍小的字体）。它确实选择了与导航栏高度完美匹配的字体大小。但是看起来如果你从纵向到横向再返回，导航栏标题标签的宽度会被搞砸，所以当你第一次查看时，显示为“长标题栏”的标题看起来不错在纵向中，当您在横向（使用适当较小的字体）查看它时看起来很好，但是当我回到纵向时，字体正确地恢复为较大的字体，但标题文本本身被截断，变成“长.. ." 即使完整标题有足够的空间。

显然，我可以只指定一个实际的字体大小（在这种情况下，我看不到这种截断行为），但随后我手动确定要使用的大小。更糟糕的是，横向和纵向的字体大小相同，所以现在我使用的字体大小适合较短的横向导航栏标题，并且标题小于较高的纵向导航栏所需的字体大小。

有没有人有过使用`setTitleTextAttributes`更改字体的经验`[UINavigationBar appearance]`，使字体大小在纵向和横向之间发生变化，但是当您在横向返回纵向时没有截断标题？我将寻求各种笨拙的解决方法，但如果您在这个问题上有任何经验，请告诉我。

**更新：**

在向 Apple 提交这个 bug 的过程中，我决定演示如何重现该问题：

1.  在 Xcode 4.3.2 中创建新的 iOS 主从应用程序。

2.  将上面的`setTitleTextAttributes`代码放在应用程序委托中`application:didFinishLaunchingWithOptions`（我使用了字体@“GillSans”）。

3.  转到 MasterViewController 并添加说`self.title = @"Long Title";`

4.  注释掉`UIBarButtonItem *addButton`代码。

5.  运行程序。请注意标题正确显示“长标题”。旋转到横向。看起来还是不错的。旋转回纵向，即使有足够的空间，标题现在也会显示“Long...”。

6.  奇怪的是，如果您恢复`UIBarButtonItem *addButton`代码，标题就会正常工作。但是，如果您删除 UIBarButton 项，或者将其替换为使用`initWithTitle`而不是的按钮，`initWithBarButtonSystemItem`则在从纵向旋转到横向然后再返回纵向后，导航栏标题会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:36:49.550

顺便说一句，我没有指出 Apple 回复了我的错误报告，并承认这是一个已知问题。希望它会尽快得到解决！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T09:31:42.937

我认为一个好的解决方案是在设备旋转后刷新导航栏的标题。就像是

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {

        self.navigationItem.title = @"Your title";

} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:45:20.367

根据@Abramodj 的回复（不起作用），我尝试了这个。据推测，该解决方案中没有发生任何事情，因为系统注意到文本实际上并没有改变。切换到什么都没有，然后再重新整理出来。

经过测试，绝对可以在 iOS5.0 上运行。

```
// iOS5 has a bug where if you switch orientation the title bar text gets cut off...
-(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation     {
    self.navigationItem.title = @"";
    self.navigationItem.title = @"Your Title";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T08:05:47.773

以下是我针对此问题的解决方法，这是在每种情况下出现在我的解决方法实现旁边的注释，以提醒我自己为什么要实现这段代码：

```
// when using an appearance proxy to set a custom font for the navigation bar (generally in
// application:didFinishLaunchingWithOptions: in the appDelegate code) for both iOS 5 & 6,
// there's a glitch that incorrectly auto-truncates the title in the following cirumstances:
//
// 1) when a 0.0 value is used for UITextAttributeFont in the titleTextAttributes dictionary
//    and a device/simulator running pre-iOS 5 rotates back to portrait from landscape
//    solution: perform [self.navigationController.navigationBar setNeedsLayout] in
//              didRotateFromInterfaceOrientation: the view controller in which the
//              auto-truncation is incorrectly occurring for systemVersion < 6.0
//
// 2) when a view initially loads running iOS 6 for a non-0.0 value for the UITextAttributeFont
//    in the titleTextAttributes dictionary
//    solution: perform [self.navigationController.navigationBar setNeedsLayout]
//              in viewDidLoad in the view controller in which the auto truncation is
//              incorrectly occurring for systemVersion >= 6.0 
```

因此，对于我可以使用 0.0 值`UITextAttributeFont`但必须继续支持 iOS5 的情况，我使用解决方案 (1)：

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)
        && UIDevice.currentDevice.systemVersion.floatValue < 6.0)
        [self.navigationController.navigationBar setNeedsLayout];
}
#endif 
```

在我想要支持 iOS 6 并在视图首次出现时修复故障而无需重新编写 MyAppAppearance 类方法的几个遗留代码案例中，我为 my 设置了非 0.0 值`[UINavigationBar appearance] titleTextAttributes`，我发现它更容易实施解决方案（2），因此：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
    if (UIDevice.currentDevice.systemVersion.floatValue >= 6.0)
#endif
        [self.navigationController.navigationBar setNeedsLayout];

    // … other viewDidLoadCode 
```

（`__IPHONE_OS_VERSION_MIN_REQUIRED`括号只是帮助提醒我，如果将来需要，哪些代码最终会消失，哪些可能必须保留。）

要更准确地了解此处发生的情况，尤其是在旋转的情况下，请在切换慢动画的情况下运行模拟器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-25T22:35:01.443

即使您没有像 Ben Clayton 描述的那样进行方向切换，在通过外观应用更改后 UINavigationBar 标题文本被切断的错误也可能发生。我已经看到这个问题发生在只支持纵向的应用程序上。

```
[self.navigationItem setTitle:@""];
[self.navigationItem setTitle:@"The real title"]; 
```

即使在这种情况下也能正常工作。

顺便说一句，我从 iOS 5 开始就遇到了这个问题。刚刚在 iOS 6 中对其进行了测试，但它仍然存在。什么鬼，苹果？

# sms - CDMA是否支持级联（长）短信

> ID：10109917
> 
> 赞同：2
> 
> 时间：2012-04-11T16:21:21.377
> 
> 标签：sms, smpp, cdma

1.  CDMA 是否支持级联短信？
2.  如果是 CDMA 的哪个版本增加了对它的支持？
3.  美国哪些使用 CDMA 的网络支持级联 SMS？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-31T19:09:38.997

不久前，我写了一篇关于此的博客文章：

[https://www.smallbusinesstech.net/concatenated-sms/](https://www.smallbusinesstech.net/concatenated-sms/)

基本上，Verizon 仅完全支持在他们自己的网络中连接的 SMS。当从 Verizon 发送到另一个网络时，串联的 SMS 工作正常。从另一个网络发送到 Verizon 的串联 SMS 消息作为单独的 SMS 消息传送。

Sprint 根本不支持串联 SMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T03:04:31.647

“长”短信是指EMS吗？EMS 是一系列（因运营商而异）的 SMS 消息“拼接在一起”。您的手机会收到 N 条消息，并将它们作为单个对象呈现给您。

但是，如前所述，这是特定于设备和运营商的。您的设备是按照运营商的 EMS 规格制造的。美国主要运营商支持 EMS，但细节各不相同。

# javascript - HTML 表导出到 CSV 不会导出超过 50 行

> ID：10109919
> 
> 赞同：0
> 
> 时间：2012-04-11T16:21:27.040
> 
> 标签：javascript, html

我有一个导出脚本，它将我的 HTML 表导出为 csv。

唯一的问题是它似乎将自己限制在 50 行。

恐怕这里要粘贴的东西太多了，但如果你看看我的脑袋，你会看到包含的文件:)

[http://php-playground.co.cc/testdir/metaex.php](http://php-playground.co.cc/testdir/metaex.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:38:45.193

我发现了问题，该页面不是 UTF 8，所以每当它看到它不喜欢的字符时它就会被切断！

# redis - Redis 中键的用户名或 ID

> ID：10109921
> 
> 赞同：8
> 
> 时间：2012-04-11T16:21:41.357
> 
> 标签：redis

我想知道使用用户 ID 的好处是什么，而不仅仅是使用唯一的用户名作为密钥。

*   用户：用户名 => {密码：哈希，年龄：45}
*   用户：0 => {用户名：USERNAME，密码：HASH，年龄：45}

请注意，我希望按名称查找用户，因此需要第二组键值来将用户名与 ID 相关联。

鉴于每个用户名都是唯一的并且必须是字母数字，是否有任何特殊原因说明使用 ID 系统可能是有益的。

我问这个的主要原因是因为我主要使用 ID，因为它们减少了在我的数据库中的查找时间，特别是当数据库以某种方式标准化时。但是 Redis 并没有获得这个好处，所以我想知道还有什么其他原因可以使用用户 ID 而不仅仅是用户名。

谢谢你的帮助，

采摘

ps 由于 Redis 处理哈希的方式，我实际上不确定这两种方法之间的内存差异，所以这方面的信息可能很好，尽管我以后可能会自己去测试。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T16:49:47.713

在您定义的用例中无关紧要，但使用整数用户 ID 还有其他优点。

迟早，您会想要在其他对象中引用用户 ID。例如，“用户 pluckerpluck 的朋友”。为了建模，你有两种选择 -

`friendsof:pluckerpluck -> SET{tom, dick, harry}`

VS

`friendsof:1 --> SET{2, 3, 4}`

前一种方法使用常规哈希表来存储元素，并且使用大量内存。后一种方法使用整数数组并且非常节省内存。

这种整数集的特殊编码称为 IntSet。您可以使用该属性控制 Redis 的行为`set-max-intset-entries`

```
# Sets have a special encoding in just one case: when a set is composed
# of just strings that happens to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512 
```

# jmeter - Jmeter - 响应断言触发时暂停？

> ID：10109922
> 
> 赞同：0
> 
> 时间：2012-04-11T16:21:43.120
> 
> 标签：jmeter

我已经在我正在构建的 API 上启动并运行了 Jmeter 测试。
如果 API 过载，API 会返回：

```
{"status":{"type":"failure","cause":"internal","http":500}} 
```

我想做的是让 JMeter 也暂停，如果它得到这个结果。

我已经设置了一个捕获这些错误的响应断言。看起来这应该是一个简单的设置，但我没有看到它。我看到我可以添加一个 If 控制器，但这仅适用于 Javascript 变量。

我是否需要添加正则表达式提取器，将“失败”作为“类型”变量，然后将其添加到 If 控制器？
似乎有点过于复杂？
我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:26:49.170

尝试使用[BeanShell Timer](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Timer)来处理这种情况。

它

*   允许编写脚本，因此您可以根据需要对计时器行为进行编程；
*   可以通过 ctx 变量访问 jmeter 上下文，因此您可以处理 ResponseCode 条件。

[在这里](http://ideoplex.com/id/1374/beanshell-timer-in-jmeter)您可以找到带有示例如何使用的好文章。[在这里](http://jmeter.apache.org/demos/BeanShellAssertion.bsh)
-如何访问 beanshell 变量和处理响应代码。

您的情况将是这样的：

```
if (prev.getResponseCode().equals("500") == true) { 
    . . .
} 
```

请注意：BeanShell Timer 中使用的脚本**应将返回值用作等待的毫秒数。**

另一个问题是这样做的原因是什么。
如果您有负载/压力测试场景，那么这些结果是您应该在测试期间获得并分析的结果。
如果您有某种“功能性”测试场景，那么您必须以更一般的方式处理这种情况，为每个采样器添加任何类型的正确配置的[计时器](http://jmeter.apache.org/usermanual/component_reference.html#timers)- 以避免过载或模拟“现实生活”场景。
我错过了什么吗？

# ruby - Ruby：定义类变量时来自 class_exec 的意外结果

> ID：10109925
> 
> 赞同：2
> 
> 时间：2012-04-11T16:21:57.660
> 
> 标签：ruby

在 Ruby 中，使用 定义类的内容时`class_exec`，我得到了意想不到的结果。当我在发送到的块中定义一个类变量时`class_exec`，该类变量被定义在`Object`而不是`class_exec`被调用的类：

```
class X; end
X.class_exec do
  @@inner_value = "123"
  def inner_value
    @@inner_value
  end
  def inner_value=(arg)
    @@inner_value = arg
  end
end

obj1 = X.new
puts obj1.inner_value
puts @@inner_value
puts Object.class_variables 
```

产生：

```
123
123
@@inner_value 
```

使用时不会发生这种情况`class_eval`：

```
X.class_eval(<<-RUBY)
  @@inner_value = "123"
  def inner_value
    @@inner_value
  end
  def inner_value=(arg)
    @@inner_value = arg
  end
RUBY

obj1 = X.new
puts obj1.inner_value
puts @@inner_value
puts Object.class_variables 
```

产生：

```
123 
```

和一个错误：

```
uninitialized class variable @@inner_value in Object (NameError) 
```

class_eval 的结果是我期望在这两种情况下发生的结果。我在 MRI 1.8.7 和 MRI 1.9.3 上都试过了，在 Windows XP 上运行时得到了相同的结果。

这是预期的行为吗？如果是这样，为什么？如果没有，错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:11:15.033

*类变量绑定到在编译时*声明它们的类。传递给 的块在传递给`class_exec`之前被编译`class_exec`，因此类变量被绑定到`Object`。

我猜你的 class_exec 是在顶层，它在 Object 中，所以这就是他们去的地方。展示：

```
public

class Object
    @@x = "ribbit"
end

def foo
    puts "test: #{@@x}"
end

x = Object.new
x.foo 
```

这就是为什么当您在模块中使用类变量时，包含该模块的所有类（通过包含的方法）将看到相同的类变量。类变量绑定到模块。如果你运行这个：

```
class WithClassVars
    def self.classvars
        @classvars ||= {}
    end

    def classvars
        self.class.classvars
    end
end

class A < WithClassVars;end
class B < WithClassVars;end

a = A.new
b = B.new
a.classvars[:a] = 1
b.classvars[:a] = 2

puts a.classvars
puts b.classvars 
```

a 和 b 最终会得到相同的数据。

如果您将代码作为字符串传递给，则该字符串将*在*`class_eval`中编译，因此您可以确保它们在正确的类中。 *`class_eval`*

 *因此，如果你想存储每个类的数据，你必须要么使用 class_eval，要么使用某种机制来使用类的实例变量。说：

```
class WithClassVars
    def self.classvars
        @classvars ||= {}
    end

    def classvars
        self.class.classvars
    end
end

class A < WithClassVars;end
class B < WithClassVars;end

a = A.new
b = B.new
a.classvars[:a] = 1
b.classvars[:a] = 2

puts a.classvars
puts b.classvars 
```*

# oracle-sqldeveloper - 我可以中断 SQL Developer 中的“计数行”操作吗？

> ID：10109935
> 
> 赞同：7
> 
> 时间：2012-04-11T16:22:35.543
> 
> 标签：oracle-sqldeveloper

当我执行查询并在结果区域中单击鼠标右键时，我会看到一个包含以下选项的弹出菜单：

*   将表格另存为报告...
*   单记录视图...
*   计算行...
*   查找/突出显示...
*   出口 ...

如果我选择“Count Rows”，如果开始时间过长，有没有办法中断操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T18:02:04.763

不，你似乎不能。

当您`Count Rows`从上下文菜单中选择时，它会在主 UI 线程上运行计数，挂起整个 UI，可能持续几分钟或几小时。

最好不要使用该功能 - 只需将`select count (*) from ( < your query here>)`它正确运行在可以取消的单独线程上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T09:32:48.340

您可以打开一个新实例**`sql developer`**并终止计算行数的会话。我确实建议使用**`select count(*)`**查询，因为从长远来看它不那么痛苦。

# ruby-on-rails - 关于 Rails 插件/引擎

> ID：10109937
> 
> 赞同：1
> 
> 时间：2012-04-11T16:22:48.220
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins

我正在寻找 Rails 插件来帮助我模块化我的应用程序。我有一些我很困惑的基本问题。

rails 插件可以有自己的数据库吗？我的应用程序的流量非常小，供内部使用，所以我对每个插件都使用单独的 sqlite DB 的想法很好。当我执行“rails plugin new”时，即使我使用 --full，也不会生成 database.yml。如果我创建一个并执行 rake db:create，则不会创建 sqlite db。

是否有一个很好的教程可用于使用 rails 3.2 创建一个 rails 插件？我发现的大多数都比较老，并且使用我认为现在内置在 rails 中的 enginex gem。

您可以将您的插件作为独立应用程序运行以进行测试，即使用 WEBrick 吗？当我在插件目录中运行“rails server”时，它只会显示“错误：无法识别命令”。

我想就是这样，我只是对如何开始感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:32:34.790

## 创建迁移

Rails 指南“引擎入门”指导您使用引擎根目录中的“rails g model post”。

[引擎入门](http://edgeguides.rubyonrails.org/engines.html)

如果您这样做，它将为您创建 db/migrate 文件夹，其中包含迁移。

```
$ rails g model post
  invoke  active_record
  create    db/migrate/20120517184738_create_my_engine_posts.rb
  create    app/models/my_engine/post.rb
  invoke    test_unit
  create      test/unit/my_engine/post_test.rb
  create      test/fixtures/my_engine/posts.yml 
```

您也可以直接生成迁移，就像使用 Rails 应用程序一样。

```
$ rails g migration AddMyEngineTable
  invoke  active_record
  create    db/migrate/20120517185241_add_my_engine_table.rb 
```

## 运行 Rails 服务器

Rails 指南还规定从 test/dummy 运行“rails s”，而不是从引擎目录的根目录运行。

我从涵盖 Rails 3.1 RC5 的主题的 ASCIICast 中看到，您曾经能够从引擎/gem 的根目录运行“rails s”。这已不再是这种情况。

从三个月前发布在 Github 上的 Rails 问题来看，他们似乎需要将引擎的范围与虚拟应用程序的范围分开。

[问题 #4894：可安装引擎 Rails 文件](https://github.com/rails/rails/issues/4894)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:52:00.207

简而言之，从引擎根：

```
test/dummy/script/rails s 
```

# printing - 确定接收到的数据是 PostScript 还是 PCL

> ID：10109938
> 
> 赞同：2
> 
> 时间：2012-04-11T16:22:51.793
> 
> 标签：printing, postscript, printer-control-language

我有一个通过 tcp/ip 接收打印机数据的服务。收到数据后，是否有可靠、有效的方法来检查数据流并确定数据是 PostScript 还是 PCL 数据？例如，我可以在数据流的开头查找哪些字符来指示格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:38:07.147

我可能只会计算文件中转义字符的数量。PCL 将拥有它们。后记将有大量的 % 符号。这不是一个完美的解决方案，但它非常简单，我敢打赌它实际上会非常可靠。

我能看到的唯一“真实”方法是实际解析 PCL 并解析 postscript 并查看哪个有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:33:29.207

我会加我的 2 美分。

就像其他人在这里提到的那样，您第一次尝试以编程方式识别文档是查看前两个字符。如果它以 开头`%!`，则它是 PostScript，如果它以转义字符（hex `1B`、oct `033`、ascii `27`）开头，因为 PCL 很可能会以 PCL 命令开头，那么它就是 PCL。这可能会解决您需要处理的 99% 的文档。如果仍然不知道，那么您可以在文档中搜索`showpage`细绳。如果它是 PostScript，它必须有一个显示页面来呈现页面。如果找不到，并且文件中有转义字符，则知道它是PCL，如果没有显示页面，并且没有转义字符，则可以在PCL一侧出错，因为原始文本文件是有效的 PCL，打印机可以在它们出现时将其清除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:56:14.843

Postscript 数据必须以“%!ps”或“%!PS”开头——它可能是一个更长的可读字符串，如“%!PS-Adobe-3.0”——但基本上就是这样。

很可能 PCL 有类似的签名——我记得过去见过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-24T15:37:28.367

根据[PCL 5 General Printing FAQs](https://developers.hp.com/system/files/PCL_5_General_Printing_FAQs.pdf) PCL 文件应以 ESC "E" 开头。我假设必须遵循另一个 ESC 序列。所以我的猜测是以字节 1B 45 1B 开头的文件很可能是 PCL 文件。这会使不符合此规则的 PCL 文件无法识别。

在我的用例中，macOS 总是在开头生成带有 ESC E 的 PCL。

# javascript - 从提示中获取数字并循环

> ID：10109940
> 
> 赞同：0
> 
> 时间：2012-04-11T16:22:57.417
> 
> 标签：javascript, for-loop

我想创建一个函数，从提示中获取一个数字，然后创建一个循环，其中我得到的数字是 alert() 执行的次数。

我试过这样：

```
function game() {
    var i = prompt("Choose a number");

    for(i; i === 0; i--) {
    alert("ALERT");
    }
}

game(); 
```

但是在我得到 prompt() 之后，什么也没有发生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:26:40.360

你的 for 循环条件是错误的。应该是 i>0，而不是 i===0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:31:01.747

或者...

```
while(i) {
    alert("ALERT");
    i--;
} 
```

零评估为假。

# php - Symfony 1.4（从 1.0 迁移）：外键和管理模块的 config.yml

> ID：10109944
> 
> 赞同：1
> 
> 时间：2012-04-11T16:23:07.130
> 
> 标签：php, symfony1, symfony-1.4

我正在将代码从 Symfony1.0 迁移到 Symfony 1.4。使用**Propel**创建了一个名为：**mymodel**的管理模块。

 **该模型的数据库是这样的：

```
table: mymodel_table.
  column: fkLabelId
  column: fkRightsOwnerId
NOTE: both are foreing keys. 
```

它们以这种方式连接 - 再次在物理数据库中 - ：

```
 fkLabelId        -------> REFER `DB/label`(`id`);

  fkRightsOwnerId  -------> REFER `DB/ownersright`(`id`); 
```

现在，我在我的项目中创建了管理模块 - **cms**在以下代码中：

```
php symfony propel:generate-admin cms --module=myModel MyModelTable 
```

在我的页面中，我可以看到表**mymodel_table**的信息，这是：both **id**。但我想查看其他两个表中引用的信息。

这是**SYMFONY 1.0 版本的 config.yml**：

```
generator:
class:              sfPropelAdminGenerator
param:
  model_class:      MyModel
  theme:            default
  fields:
    fk_label_id: {params: disabled=false}
    fk_rightsowner_id: {params: disabled=false}
  list:
    filters:              [fklabelid, _label_filter, fkrightsownerid, _rightsowner_filter]
    peer_method:          doSelectJoinAll
    display:              [=_label_list, =_rightsowner_list]
    actions:
    actions:
      _create:        ~
    object_actions:
      _edit:          ~
      _delete:        ~
  edit:
    display: [=_label_edit, =_rightsowner_edit]
    actions:
      _list:          ~
      _save_and_list: ~
      _save:          ~
      _delete:        ~ 
```

这是**SYMFONY 1.4 版本的 config.yml**：

```
generator:
  class: sfPropelGenerator
  param:
    model_class:           MyModel
    theme:                 admin15
    non_verbose_templates: true
    with_show:             false
    singular:              MyModel
    plural:                MyModel
    route_prefix:          My_model
    with_propel_route:     1
    actions_base_class:    sfActions

config:
  actions: ~
  fields:
    fk_label_id: {params: disabled=false}
    fk_rightsowner_id: {params: disabled=false}
  list:
    filters:              [fklabelid, _label_filter, fkrightsownerid, _rightsowner_filter] 
  //  peer_method:          doSelectJoinAll                         ("commented")
  //  display:              [=_label_list, =_rightsowner_list]      ("commented")
  filter:  ~
  form:    ~
  edit:    ~
  new:     ~ 
```

在`mypage.com/dev.php/mymodel`我得到：

```
500 | Internal Server Error | InvalidArgumentException
Your generator configuration contains some errors for the "list" context. The following configuration cannot be parsed: array( 'filters' => array( 0 => 'fklabelid', 1 => '_label_filter', 2 => 'fkrightsownerid', 3 => '_rightsowner_filter', ),). 
```

在**Symfony**页面[中没有找到](http://www.symfony-project.org/reference/1_4/en/06-Admin-Generator#chapter_06_actions)这个案例的好例子！尝试了 1.0 版本的许多排列。改变事物，在**config.yml添加****外部**命令。

 **我将不胜感激任何帮助。

**编辑**：

正如我被建议的那样，我正在做部分。我创建了一个**_Label_list.php**。将信息从外键重定向到命运表。在文件中，我正在做类似的事情：

```
 $rights = RightsOwnerQuery::create()->findPk($MyModel->getFkRightsOwnerId());

 //Print the Info
 echo $rights->getPrice() . ' ('. $rights->getId() . ')'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:28:30.897

symfony 1.0 中的旧`list > filters`版本已移至`filter`symfony 1.4 中的专用条目。

您现在必须`filter`在同一级别使用`list`.

```
config:
  actions: ~
  fields:
    fk_label_id: {params: disabled=false}
    fk_rightsowner_id: {params: disabled=false}
  list:            
  //  peer_method:          doSelectJoinAll                         ("commented")
  //  display:              [=_label_list, =_rightsowner_list]      ("commented")
  filter:
    display: [fklabelid, _label_filter, fkrightsownerid, _rightsowner_filter]
  form:    ~
  edit:    ~
  new:     ~ 
```

顺便说一句，请注意，以“_”开头的字段是部分的。所以不要忘记创建部分（我猜它们已经存在于 symfony 1.0 中）。

**编辑：** 关于部分，您必须在管理模块的模板目录中创建它们：

```
modules
  |- rightsownerinlabel
    |- actions
    |- config
      |- generator.yml
    |- lib
    |- templates
      |- _label_filter.php
      |- _rightsowner_filter.php 
```

我不经常使用过滤器，但深入研究缓存文件夹中生成的代码以查看如何检索 FormFilter 对象并确实想要使用****

# jquery - jQuery .live() 在 IE9 中不起作用

> ID：10109946
> 
> 赞同：2
> 
> 时间：2012-04-11T16:23:10.967
> 
> 标签：jquery

我在我的网站上使用 jQuery 1.7.1，并将该`.live()`函数用于一些需要在未来添加的元素上调用的事件。由于某种原因它不起作用（没有错误，没有警报，没有显示任何内容）。我读了一点，有些人说它不起作用，而另一些人说它工作正常，但我没有看到任何解决方法、修复或任何最新的东西。它在其他浏览器中运行良好，只是在 IE9（可能还有其他 IE）中不行。

我可以使用 jQuery 中的 .live 替代方法、插件或一些解决方法吗？

我目前的代码如下：

```
$('select[name="CourseLevelSelector"] option').live('dblclick', function () {
    //Do Stuff
}); 
```

-杰克

编辑：

总而言之，我的目标是我有 2 个多个选择框，一个包含数据，另一个为空白。当您双击包含数据的选择框中的选项时，它将自身复制到空选择中。如果您然后双击已添加的选项，它将完全删除它。（此代码有效，只是事件处理程序无效）

HTML 看起来是这样的：

```
<select name="CourseLevelSelector" multiple="multiple">
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
</select>
<select name="CourseLevelIDs" multiple="multiple">

</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:36:03.003

在 IE 中，`option`元素没有点击事件，只有`select`元素。您需要将事件绑定到选择对象。

在 IE 中尝试这个测试应用程序来查看问题：http: [//jsfiddle.net/jfriend00/JGrbh/](http://jsfiddle.net/jfriend00/JGrbh/)

每，你更多的请求披露你实际上想要做什么，你可以像这样[http://jsfiddle.net/jfriend00/Ry9Ns/](http://jsfiddle.net/jfriend00/Ry9Ns/)使用动态形式`.on()`而不是 deprecated来修复它`.live()`。

```
$("#container").on('dblclick', 'select[name="CourseLevelSelector"]', function(e) {
    var ids = $('select[name="CourseLevelIDs"]');
    $(this).find(":selected").each(function() {
        // make sure selected item is not already in the other list
        if (!ids.find('[value="' + this.value + '"]').length) {
            $(this).clone().appendTo(ids);
        }
    });

})

$("#container").on('dblclick', 'select[name="CourseLevelIDs"]', function(e) {
    $(this).find(":selected").remove();
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:00:52.743

根据 jfriend00 提供的信息，我找到了解决此问题的方法

由于 IE 不支持选项标签的点击处理程序，因此这是我所做的：

```
$('select[name="CourseLevelSelector"]').live('dblclick', function () {
    var doubleClickedOption = $(this).find(':selected');

    //Do Stuff
}); 
```

它处理选择框本身的双击，并将所选项目作为 jquery 对象获取，以便在代码中使用。

-杰克

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T16:28:23.293

尝试`jQuery.on`，因为您使用的是 1.7 版本的 jQuery。

或者

如果有一些 IE 对它敏感的标记问题。它通常发生在 Div ID 命名约定中。

# iphone - 用于交换位置的 iPhone 应用服务器

> ID：10109947
> 
> 赞同：-1
> 
> 时间：2012-04-11T16:23:17.337
> 
> 标签：iphone, ios, webserver, core-location

我正在尝试将应用程序连接到使用该应用程序从 iphone 接收数据的服务器，并且服务器也会响应（位置数据）有点像找到你的朋友但自动完成。我不知道 iPhone 应用程序应该使用什么服务器。还有什么语言将用于与服务器通信？

任何帮助/方向/文章将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:25:15.353

您可以使用任何服务器和任何语言，只要它在您的应用程序指定的端口上侦听请求，并且您已正确配置它。

对于初学者，这里有一个很好的 PHP / iOS 教程，可以帮助您启动和运行，尽管我并不是说您的最终实现必须使用 PHP：[http ://www.raywenderlich.com/2941/how-to-write-一个简单的 phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

# regex - 在 Perl 中，如何从日志文件的行中提取电子邮件地址？

> ID：10109948
> 
> 赞同：2
> 
> 时间：2012-04-11T16:23:21.683
> 
> 标签：regex, perl

我正在寻找将通过逐行读取文件创建的字符串。但是我只想从字符串中提取电子邮件，但它每次都会改变。唯一的内容是域，例如`@domain.com`.

所以对于输入字符串

```
 00:00:50,004 ERROR [SynchronousCallback] Cannot process resource: test.test@domain.com  Channel: channel16 
```

什么正则表达式会查找`@domain.com`并拉出所有`test.test@domain.com`. 我有一个将查找字符串的正则表达式，`m/@domain.com/i`但我不知道一旦`@domain.com`它位于整个字符串中后如何操作字符串。

我想要的输出只是电子邮件`test.test@domain.com`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T16:40:06.897

```
#!/usr/bin/env perl

use strict; use warnings;
use Email::Address;

while (my $line = <DATA>) {
    my ($addr) = Email::Address->parse($line);
    print $addr->address, "\n";
}

__DATA__
00:00:50,004 ERROR [SynchronousCallback] Cannot process resource: test.test@domain.com  Channel: channel16 
```

输出：

```
C:\温度> tt
test.test@domain.com
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T16:25:45.490

电子邮件地址之前总是会有空格吗？如果是这样，你可以使用类似的东西：

```
m/\s([^\s\@]+\@domain.com)/i 
```

然后您可以通过查看来检索整个电子邮件地址`$1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:43:00.977

看起来您只需要使用 . 捕获域字符串之前的所有非空白字符`/\S+\@domain\.com/`。这个程序显示了原理。

```
my $s = '00:00:50,004 ERROR [SynchronousCallback] Cannot process resource: test.test@domain.com  Channel: channel16';
print "$_\n" for $s =~ /\S+\@domain\.com/gi; 
```

**输出**

```
test.test@domain.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:36:01.440

如果您需要正则表达式的所有结果（每行不止一封电子邮件），您可以这样做：

```
while ($str =~ s# ([^ ]+\@domain.com)##i){
  my $email = $1;
  print $email."\n";
} 
```

问候，

# c# - 调用隐藏字段的值时需要Javascript对象错误

> ID：10109951
> 
> 赞同：1
> 
> 时间：2012-04-11T16:23:27.273
> 
> 标签：c#, javascript, asp.net, object-expected

代码：HTML：

```
<input type="hidden" id="lblHierarchyType" value="" runat="server" /> 
```

C#代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (lblHierarchyType.Value == "")
        {
            lblHierarchyType.Value = "AOR";
        }
        if (!Page.IsPostBack)
        {
            txtUserID.Focus();
            FillGroupsList();
            FillOrgTree();
            ClearErrorMsgs();
        }           
    } 
```

Javascript：

```
 function populateSelectedNode(node) {
            debugger
            var selectedOrg = node.getValue();
            var hierarchyType = document.getElementById("lblHierarchyType").value;
        } 
```

当将 lblHierarachy.value 分配给 var 层次结构时，代码会出错（Microsoft JScript 运行时错误：需要对象）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:25:44.200

ASP.NET 将生成的 ID 不会是“lblHierarchyType”，因此最好通过其 ClientID 更改它

```
 var hierarchyType = document.
                   getElementById("<%= lblHierarchyType.ClientID%>").value; 
```

# ruby - 具有多种可能性的单元格总和

> ID：10109956
> 
> 赞同：1
> 
> 时间：2012-04-11T16:23:47.133
> 
> 标签：ruby

我正在用 Ruby 编写一个 Killer Sudoku Solver，我尝试采用人类策略并将它们放入代码中。我已经实施了大约 10 种策略，但我在这方面遇到了问题。

在杀手数独中，我们有细胞的“区域”，我们知道这些细胞的总和，我们知道每个细胞的可能性。

例子 ：

*   单元格 1 可以是 1、3、4 或 9
*   单元格 2 可以是 2、4 或 5
*   单元格 3 可以是 3、4 或 9
*   所有单元格的总和必须为 12

我希望我的程序尝试所有可能性以消除可能性。例如，在这里，单元格 1 不能是 9，因为您不能通过在单元格 2 和 3 中添加两个可能的数字来得到 3。

所以我希望对于任何数量的单元格，它通过尝试它们并看到它不起作用来删除那些不可能的单元格。

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:48:27.337

有多种方法可以解决游戏解决的一般问题，而模仿人类策略并不总是最好的方法。也就是说，您可以通过以下方式解决您的问题：

第一种方式，蛮力

基本上，我们想尝试单元格组合的所有可能性，并选择具有正确总和的那些。

```
cell_1 = [1,3,4,9]
cell_2 = [2,4,5]
cell_3 = [3,4,9]
all_valid_combinations = cell_1.product(cell_2,cell_3).select {|combo| combo.sum == 12}
# => [[1, 2, 9], [3, 5, 4], [4, 4, 4], [4, 5, 3]]
#.sum isn't a built-in function, it's just used here for convenience 
```

要将其减少到单个单元格，您可以执行以下操作：

```
cell_1 = all_valid_combinations.map {|combo| combo[0]}.uniq
# => [1, 3, 4]
cell_2 = all_valid_combinations.map {|combo| combo[1]}.uniq
# => [2, 5, 4]
. . . 
```

如果你没有大量的单元格，这种方式更容易编码。虽然它可能会变得有点低效。对于小问题，这是我使用的方式。

* * *

第二种方式，回溯搜索

另一种众所周知的技术从另一种方法中解决了这个问题。基本上，对于每个单元格，询问“考虑到其他单元格，这个单元格可以是这个数字吗？”

那么，从单元格 1 开始，数字可以是 1 吗？为了检查，我们看看单元格 2 和 3 是否可以和为 11。 (12-1) * 单元格 2 的值可以是 2 吗？检查，单元格 3 的总和是否为 9 (11-1)

等等。在非常大的情况下，您可以有许多有效组合，这会稍微快一些，因为您可以在第一次找到单元格的有效数字时返回“真”。但是，有些人发现递归算法有点难以理解，因此您的里程可能会有所不同。

# c# - 在 codedom 中使用动态对象创建 LINQ 查询

> ID：10109961
> 
> 赞同：3
> 
> 时间：2012-04-11T16:24:05.807
> 
> 标签：c#, linq, codedom, expandoobject

我尝试在 LINQ 查询中使用 expandoobjects 来查询在运行时创建的属性，例如来自 csv 文件的标题。如果直接在代码中键入 LINQ 查询，则一切正常，如示例所示：

```
// initialize testdata
List<ExpandoObject> hans = new List<ExpandoObject>();
string[] names = {"Apfel", "Birne", "Banane", "Orange"};
int[] ids = { 1, 2, 3, 4 };
for (int i = 0; i < 4; i++)
{
   dynamic horst = new ExpandoObject();
   ((IDictionary<string, object>)horst).Add("Fruit", names[i]);
   ((IDictionary<string, object>)horst).Add("ID", ids[i]);
   hans.Add(horst);
}

// try some LINQ queries, both are working as intended
var klaus = from dynamic x in hans where x.ID < 3 select x;
//var klaus = hans.Where(x => x.ID < 3).Select(x => x); 
```

然后我尝试从命令行读取查询并使用稍微修改过的评估 linq 编译器版本创建动态 LINQ 查询。

```
string expression = System.Console.ReadLine();
LinqCompiler lc = new LinqCompiler(expression);
lc.AddSource<ExpandoObject>("hans", hans);
IEnumerable<ExpandoObject> klaus = (IEnumerable<ExpandoObject>)lc.Evaluate(); 
```

只要我不使用 WHERE 或 ORDER BY 语句，一切都很好，但如果查询中包含任何 WHERE 或 ORDER BY，我在 linq 编译器中编译 codedom 代码时会出错：*CS1963: An expression树可能不包含动态操作。*

查询代码是使用以下行创建的：

```
doRequestMethod.Statements.Add(new CodeMethodReturnStatement(new CodeSnippetExpression(Query))); 
```

我想 codedom 编译器正在以某种不同于解析直接键入 LINQ 查询的方式构建表达式树。任何让它工作的想法都会被认可，包括为运行时生成的对象动态创建查询的其他想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:35:00.073

为了得到你得到的错误，我必须修复[LINQ 编译器](http://linqcompiler.codeplex.com/)以支持`dynamic`，通过告诉它使用 C# 4.0 并添加对 Microsoft.CSharp.dll 的引用，所以我假设你已经做了同样的事情。

问题是 LINQ 编译器中的源可以是任何集合，包括`IQueryable<T>`. 如果`IQueryable<T>`应该正常工作，您实际上需要将其视为`IQueryable<T>`，而不是`IEnumerable<T>`。LINQ 编译器解决这个问题的方法是将*任何源*视为`IQuerybale<T>`使用`AsQueryable()`扩展方法。

这意味着生成的代码如下所示：

```
public object DoRequest(System.Linq.IQueryable<System.Dynamic.ExpandoObject> hans) {
    return from dynamic x in hans where x.ID < 3 select x;
} 
```

这段代码的问题是它试图使用`IQuerybale<T>`LINQ 方法的版本，即使用`Expression`s. 而且，正如错误消息告诉您的那样，`Expression`s 不支持`dynamic`.

我认为解决此问题的最简单方法是将 LINQ 编译器修改为使用`IEnumerable<T>`，而不是将`IQuerybale<T>`其更改`AddSource()`为：

```
public void AddSource<T>(string name, IEnumerable<T> source) 
{
    this.sources.Add(new SourceDescription(name, typeof(IEnumerable<T>), source));
} 
```

当然，这意味着它不能很好地用于数据库查询，但`dynamic`无论如何您都不能使数据库查询工作。

# rabl - Rabl，删除子元素的父元素

> ID：10109963
> 
> 赞同：2
> 
> 时间：2012-04-11T16:24:09.827
> 
> 标签：rabl

谁能帮我摆脱“项目”中的“项目”元素

输出应该是：
`"list":{ "items":[ { { data1: "test" } , { data2: "test2" } } }`

```
collection @list

child :items => :items do
  attributes :place_id
end

child :items do
  child :place do |place|
    extends 'places/place', object: place
  end
end 
```

电流输出：
`"list":{ "items":[{ "item":{data1: "test"} "item":{ data2: "test2"}}}`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T07:55:40.823

我有同样的问题，这就是解决方案。您可能需要创建名为配置 rabl 的文件。
配置/初始化程序/rabl.config.rb

```
Rabl.configure do |config|
    config.include_json_root = true
    config.include_child_root =  false
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:45:32.477

老问题，供未来用户参考：

启动文件`rabl_init.rb`，关闭 root by `config.include_json_root = false`，如果你仍然想在你的集合对象中有一个 root，使用类似的东西：

```
collection @orders, :object_root=>"order"
    extends "api/v1/orders/show"
# End of @orders 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T03:51:19.930

在子节点中删除根元素有一个可行的解决方案：[Removing child root nodes in RABL](https://stackoverflow.com/questions/9673136/removing-child-root-nodes-in-rabl)

设置`config.include_json_root = false`似乎只删除 JSON 的第一级根。

# c++ - char 指针的内容在传递给 catch 块时似乎被删除

> ID：10109971
> 
> 赞同：1
> 
> 时间：2012-04-11T16:24:24.403
> 
> 标签：c++, visual-c++, exception, exception-handling

我遇到了我抛出的异常类的一个非常奇怪的（至少对我而言）行为。我所做的是`new`在异常类的构造函数中为字符串分配内存并用字符填充它。到目前为止一切都很好。在调试代码时，我可以在 Visual Studio 中看到指针实际上具有正确的内容。

现在奇怪的事情发生了。我的下一个断点位于构造后异常传递到的 catch 块中，在这里我可以在调试器中看到异常对象中包含的字符串的内容已严重损坏。即使地址根本没有改变！所以看起来字符串的内容被破坏了。

所以我在异常析构函数中放了一个断点，实际上，它是在进入 catch 块之前调用的。这让我很困惑，因为我学会了通过引用 catch 块来传递异常。但是，如果在我可以访问动态创建的数据之前调用了析构函数......

我构建了一个最小的示例来显示我所处的情况：

```
#include <iostream>
#include <cstring>

class test_exception {
public:
    test_exception();
    ~test_exception() {
        delete[] _msg;
    }

    // Getter Functions
    char* errorMessage() const {
        return _msg; 
    }
private:
    char* _msg;
};

test_exception::test_exception()
{
    _msg = new char[22];
    strcpy(_msg, "This is a test string");
}

int main(int argc, char* argv[])
{
    try {
        throw test_exception();
    } catch (const test_exception& err) {
        std::cout << err.errorMessage() << std::endl;
    }

    std::cin.get();

    return 0;
} 
```

如果有人能告诉我这是否是奇怪的 MS 行为，或者我误解了应该如何使用 try - catch - 块，那将会创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:27:01.727

抛出异常时会复制（或在 C++11 中，可能会移动）异常。引用 C++11，§15.1/3：

> *throw-expression*初始化一个临时对象，称为*exception object*，其类型通过从 throw 操作数的静态类型中删除任何顶级*cv 限定符*并从“array of `T`”或“function”中调整类型来确定return `T`” 分别指向“pointer to `T`”或“pointer to function returned `T`”。临时值是一个左值，用于初始化匹配*处理程序*中命名的变量。如果异常对象的类型是不完整类型或指向不完整类型的指针（可能是 cv 限定的）`void`该程序格式不正确。除了这些限制和 15.3 中提到的类型匹配限制之外，of 的操作数`throw`被完全视为调用中的函数参数或 return 语句的操作数。

因为`test_exception`违反了[三规则](https://stackoverflow.com/q/4172722/636019)（或对于 C++11，[五规则](https://stackoverflow.com/q/4782757/636019)），在您进入块`test_exception::_msg`时已被删除。`catch`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:31:43.100

由于复制了异常，因此您应该向 test_exception 对象添加一个复制构造函数。抛出的异常*与*catch 收到的异常不同。

# eclipse - 退出时如何让 Eclipse 保存项目树的状态？

> ID：10109973
> 
> 赞同：1
> 
> 时间：2012-04-11T16:24:28.510
> 
> 标签：eclipse

当我使用 Eclipse 时，我经常使用项目树，并且经常展开和折叠文件夹。有没有办法让 Eclipse 在我启动时自动重新加载项目树的最后状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:26:48.593

据我所知，您能做的最好的事情就是选择“与编辑器链接”并在您要扩展的每个节点中打开一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:17:34.550

不完全是……但Mylyn非常接近它。在 Mylyn 中，包导航器的状态可以通过当前任务的上下文来控制。

developerWorks 的“ [Mylyn 2.0，第 2 部分：自动化上下文管理](http://www.ibm.com/developerworks/java/library/j-mylyn2/)”解释了这一切。

# awk - 使用 awk 在小脚本中将月份从 Aaa 转换为 xx

> ID：10109974
> 
> 赞同：4
> 
> 时间：2012-04-11T16:24:32.867
> 
> 标签：awk, type-conversion

我正在尝试报告每个日期创建的文件数量。我可以用这个小班轮做到这一点：

```
ls -la foo*.bar|awk '{print $7, $6}'|sort|uniq -c 
```

我得到一个列表，按日期创建了多少个 fooxxx.bar 文件，但月份的形式是：Aaa（即：Apr），我想要 xx（即：04）。

我感觉答案就在这里：

```
awk '
BEGIN{
   m=split("Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec",d,"|")
   for(o=1;o<=m;o++){
      months[d[o]]=sprintf("%02d",o)
    }
format = "%m/%d/%Y %H:%M"
}
{
split($4,time,":")
date = (strftime("%Y") " " months[$2] " " $3 " " time[1] " " time[2] " 0")
print strftime(format, mktime(date))
}' 
```

但是完全不知道我需要去掉什么，也不知道如何将 7 美元转移到我从中提取的任何东西上，以将 Apr 转换为 04。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T05:19:09.453

这是在 awk 中将缩写的月份名称转换为数字的惯用方法：

```
$ echo "Feb" | awk '{printf "%02d\n",(index("JanFebMarAprMayJunJulAugSepOctNovDec",$0)+2)/3}'
02

$ echo "May" | awk '{printf "%02d\n",(index("JanFebMarAprMayJunJulAugSepOctNovDec",$0)+2)/3}'
05 
```

如果您需要更多信息来解决您的问题，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:04:37.717

假设月份的名称只出现在月份列中，那么你可以这样做：

```
ls -la foo*.bar|awk '{sub(/Jan/,"01");sub(/Feb/,"02");print $7, $6}'|sort|uniq -c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T13:29:00.680

为了解析 AIX istat，我使用：

```
istat .profile | grep "^Last modified" | read dummy dummy dummy  mon day time dummy yr dummy
echo "M: $mon D: $day T: $time Y: $yr"
-> Month: Mar Day: 12 Time: 12:05:36 Year: 2012 
```

为了解析 AIX istat 月份，我使用了这个两行 AIX 6.1 ksh 88：

```
monstr="???JanFebMarAprMayJunJulAugSepOctNovDec???"
mon="Oct" ; hugo=${monstr%${mon}*} ; hugolen=${#hugo} ; let hugol=hugolen/3 ; echo "Month: $hugol"
-> Month: 10 
```

1..12 : 月份名称 ok

如果 lt 1 或 gt 12 ：月份名称不正确

而不是“雨果”使用说话的名字;-))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:31:31.080

只需使用您月份的字段编号作为`months`数组的索引。

```
print months[$6] 
```

由于`ls`输出因系统而异，有时在同一系统上取决于文件年龄，并且您没有给出任何示例，因此我无法知道如何进一步指导您。

哦，[不要解析`ls`](http://mywiki.wooledge.org/ParsingLs).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-04T11:39:48.767

为 AIX 添加一个版本，显示如何检索所有日期元素（在您需要它们的任何时区），并显示 iso8601 输出

```
tempTZ="UTC" ; TZ="$tempTZ" istat /path/to/somefile \
| grep modified \
| awk -v tmpTZ="$tempTZ" '
   BEGIN {Mmms="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"; 
          n=split(Mmms,Mmm," ") ; 
          for(i=1;i<=n;i++){ mm[Mmm[i]]=sprintf("%02d",i) } 
   }
         { printf("%s-%s-%sT%s %s",$NF, mm[$4], $5, $6, tmpTZ )  }
  ' ## this will output an iso8601 date of the modification date of that file, 
    ## for ex: 2019-04-18T14:16:05 UTC 
 ## you can tempTZ=anything, for ex: tempTZ="UTC+2" to see that date in UTC+2 timezone... or tempTZ="EST" , etc 
```

我展示了 iso8601 版本以使其更加知名和使用，但当然您可能只需要“mm”部分，这很容易完成：mm[$4]

# c# - wcf中的linq和string.compare/string.equals？

> ID：10109977
> 
> 赞同：1
> 
> 时间：2012-04-11T16:24:50.390
> 
> 标签：c#, wcf, linq

我有以下方法，我想尝试添加 String.Compare

```
public List<Group> GetStudentCollectionByGroup(string anything)
{
    List<Group> groups = (from g in Groups
                          where 
                              (from t in g.Groupsz 
                              where t.StudentID == anything 
                                 || t.FirstName == anything 
                                 || t.LastName == anything select t).Count() > 0
                 select g).ToList();

        return groups;
    } 
```

如果我尝试`!=`而不是`==`在客户端，无论我在文本框中输入什么，无论输入什么，我都会以某种方式返回组。如果我使用`==`它只会返回与我输入的内容相关联的组（当然属于那个学生）所以我希望 String.Compare 可以帮助我只是不知道如何用它构造上面的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:36:12.347

如果您替换`==`为`!=`您说“返回任何`t`学生 ID 不是`anything`, 或者名字不是`anything`, 或者姓不是`anything`” 的唯一记录可能无法通过该检查`(anything, anything, anything)`。

您想要的是不区分大小写的比较。

```
string.Equals(t.FirstName, anything, StringComparision.CurrentCultureIgnoreCase); 
```

# java - Ehcache + Hibernate 日志输出

> ID：10109981
> 
> 赞同：1
> 
> 时间：2012-04-11T16:25:04.843
> 
> 标签：java, hibernate, ehcache

我在将它与 Hibernate 2nd Level 缓存一起使用时收到 Eh-cache 日志记录输出 - 我不了解输出及其可能意味着什么。它被大量打印到日志中。

```
 DEBUG [net.sf.ehcache.store.disk.Segment] put added 0 on heap
 DEBUG [net.sf.ehcache.store.disk.Segment] put updated, deleted 0 on heap 
```

谁能阐明这可能意味着什么？根据统计数据的打印，我的二级缓存似乎正在工作......

```
INFO [com.atlaschase.falcon.commands.domain.AircraftCommandResolutionService] [  name = aircraftCache cacheHits = 824 onDiskHits = 0 offHeapHits = 0 inMemoryHits = 824 misses = 182 onDiskMisses = 182 offHeapMisses = 0 inMemoryMisses = 182 size = 91 averageGetTime = 1.0745527 evictionCount = 0 ] 
```

任何帮助，将不胜感激 ..

西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:29:37.083

此输出由[DiskStore](http://ehcache.org/documentation/user-guide/storage-options#DiskStore)生成，在 EhCache 中默认启用 IIRC。基本上，EhCache 会将缓存的数据从内存溢出到磁盘。如果要禁用此功能，请将`overflowToDisk`属性设置为`flase`：

```
<cache name="..." overflowToDisk="false" 
```

> 哦 - 有人还可以确认“averageGetTime”以毫秒而不是秒为单位吗？

确认，毫秒。虽然[JavaDoc`Statistics.getAverageGetTime()`](http://ehcache.org/apidocs/net/sf/ehcache/Statistics.html#getAverageGetTime%28%29)有点令人*困惑*：

> [...] 因为 ehcache 支持 JDK1.4.2，所以每次获取时间都使用 System.currentTimeMilis，而不是纳秒。因此准确性受到限制。

我在以下代码中找到了`LiveCacheStatisticsImpl`：

```
public float getAverageGetTimeMillis() {
    //...
    return (float) totalGetTimeTakenMillis.get() / hitCount;
} 
```

# coldfusion - 阻止 ColdFusion 发送电子邮件

> ID：10109987
> 
> 赞同：3
> 
> 时间：2012-04-11T16:25:19.473
> 
> 标签：coldfusion, firewall, cfmail

即使在 cfmail 标记中使用了服务器和凭据，我也想禁止在我们的开发服务器上发送所有电子邮件。我希望将无法传递的消息放入线轴，以便我们可以阅读它们。

这是在窗户上。

编辑 - 为什么？我们目前在管理员中将邮件服务器设置为虚拟，但我们在各种邮件标签上指定了许多服务器。曾经被开发人员意外发送邮件烧毁，我们想完全禁用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:33:47.427

您可以针对端口 25 传出防火墙（如果您在本地中继，请确保并排除 127.0.0.1）。您将使用 iptables 或 Windows 防火墙来阻止传出端口 25 连接。您的邮件将由 CF 创建，但 CF 假脱机程序无法投递，会将它们退回到 undeliverables 文件夹。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T17:31:24.330

根据您有多少 cfmail 标记，您可能会考虑将它们重写为 cfmail 的抽象，然后您可以有条件地全局禁用它。

一个例子是我自己的 Mailer.cfc，它只允许那个用例。 [http://www.bryantwebconsulting.com/docs/com-sebtools/mailer-cfc.cfm](http://www.bryantwebconsulting.com/docs/com-sebtools/mailer-cfc.cfm) （参见“模拟邮寄”）

尽管我认为 Mailer.cfc 会专门解决您的问题，但更广泛的一点是您可以为功能创建一个抽象层，然后将您自己的行为应用于它。这确实需要对代码进行一些更改，但也为您的应用程序提供了很大的灵活性和控制权。

# javascript - 是否有一个纯粹的客户端（javascript）照片库可以从 s3 中提取照片？

> ID：10109988
> 
> 赞同：1
> 
> 时间：2012-04-11T16:25:28.407
> 
> 标签：javascript, amazon-s3

我正在寻找可以从亚马逊 S3 存储桶或保管箱中提取照片的仅 javascript 照片库。

这样的事情存在吗？

基本上我想为不需要任何服务器端代码的客户端创建一个网站，并且可以从我的客户自己可以上传自己的照片的地方（比如亚马逊 s3 或保管箱）提取照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:35:52.460

好吧，我认为您需要一些服务器端代码来提供 Dropbox 和 S3 之间的链接。但如果他们直接上传到 S3，您应该可以直接从 S3 或云端引用它。

一些可能对您有所帮助的软件包：

[http://code.google.com/p/js3db/](http://code.google.com/p/js3db/)

[https://www.amazon.com/clouddrive/learnmore](https://www.amazon.com/clouddrive/learnmore)

[http://www.andreafabrizi.it/?dropbox_uploader](http://www.andreafabrizi.it/?dropbox_uploader)

[http://sparkleshare.org/](http://sparkleshare.org/)

[http://jacwright.com/556/client-side-only-javascript-amazon-s3-cms/](http://jacwright.com/556/client-side-only-javascript-amazon-s3-cms/)

希望有帮助...