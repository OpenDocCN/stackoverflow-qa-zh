# StackOverflow 问答 11643000-11643999

# bash - Uniq 许多文件到位

> ID：11643007
> 
> 赞同：3
> 
> 时间：2012-07-25T05:00:02.883
> 
> 标签：bash, unix

我有很多`*.dat`文件。什么是可以删除每行中重复的相邻行的 bash 脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T05:03:41.440

你的意思是这样吗？

```
#!/bin/bash
for f in "$@"
do
   cp "$f" /tmp/tmp.dat
   uniq /tmp/tmp.dat > "$f"
done 
```

您可以在包含许多 *.dat 文件的目录中运行。如果你把它放在一个名为 的脚本中`uniq_dat`，并使其可执行，你可以像这样运行它：

```
uniq_dat *.dat 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-11T19:41:21.380

使用排序！

```
sort -u foo -o foo
# is short for
sort --unique foo -o foo

# if you want to avoid sorting
sort —merge —unique foo -o foo 
```

# html - 如果我向左浮动一个 h4 和 2 个 div，向右浮动 1 个 div，

> ID：11643010
> 
> 赞同：0
> 
> 时间：2012-07-25T05:00:07.323
> 
> 标签：html, css, css-float

如果我将一个 h4 和 2 个 div 向左浮动，我将 1 个 div 向右浮动，如何在剩余空间内放置一个块并使其完美地填充剩余空间。笔记！剩余的空间需要有背景颜色，我不想让颜色扩散到这个空间之外

[h4][div][div][剩余空间][div]

谢谢，问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:23:02.097

如果我理解正确，我认为这行得通吗？

[http://jsfiddle.net/eNDPG/3/](http://jsfiddle.net/eNDPG/3/)

# java - 使用 java.io.File 时出现 NullPointerException

> ID：11643011
> 
> 赞同：0
> 
> 时间：2012-07-25T05:00:10.910
> 
> 标签：java, java-io

我正在尝试使用该程序来计算 D:\ 驱动器中的所有文件，但是当我运行它时它会引发异常。

```
package lmh;

import java.io.File;

public class FileList {

    static int fileNum = 0;
    static int directoryNum = 0;
    static int cannotRead = 0;

    public static void main(String[] args) {
        File f = new File("e:/");
        printFileStructure(f);
        System.out.println("result:");
        System.out.println("file number：" + fileNum);
        System.out.println("directory number：" + directoryNum);
        System.out.println("cannot rend:" + cannotRead);
    }

    public static void printFileStructure(File f) {
        File[] files = f.listFiles();
        for (int i = 0; i < files.length; i++) {
            if (files[i].isFile()) {
                if (files[i].canRead()) {
                    fileNum++;
                    System.out.println(files[i].getName());
                } else {
                    cannotRead ++;
                } 
            }
            else if (files[i].isDirectory()) {
                if (files[i].canRead()) {
                    directoryNum++;
                    printFileStructure(files[i]);
                } else {
                    cannotRead ++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:04:28.960

`File.listFiles()`不保证返回非空值。这往往会发生（根据我的经验），因为 Java 可以看到看起来像目录的内容，但无法列出它（想到联结）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T05:09:57.947

甚至是javadoc

```
f.listFiles() 
```

说... **如果此抽象路径名不表示目录，则此方法返回 null**。否则返回一个 File 对象数组，一个对应于目录中的每个文件或目录。结果中不包括表示目录本身和目录父目录的路径名。每个生成的抽象路径名都是使用 File(File, String) 构造函数从这个抽象路径名构造的。因此，如果这个路径名是绝对的，那么每个生成的路径名都是绝对的；如果此路径名是相对的，则每个生成的路径名都将相对于同一目录。

所以我相信这是罪魁祸首。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T05:08:58.947

由于 MadProgrammer 指出的原因，添加一个空检查。

代替：

```
for (int i = 0; i < files.length; i++) { 
```

和

```
if(files != null)
    for (int i = 0; i < files.length; i++) { 
```

我将驱动器更改为 D （因为我没有 E 驱动器）并且程序在我的机器上成功完成了这个修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:17:55.863

尝试**“E:\\”**进入目录。我认为它应该工作。

# iphone - 推特实施。在 iPhone 应用程序的登录中

> ID：11643013
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:00:17.153
> 
> 标签：iphone, ios5, login, twitter

我是 twitter 实现的新手，在我的应用程序中有一个登录屏幕，我还想提供一个 twitter 登录选项，这意味着用户也可以从他的 twitter 帐户登录。

请提供一些有用的提示，如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:15:48.853

您可以使用 TwitterShare 文件。

**TwitterShare.h**

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>

@interface TwitterShare : UIViewController
{    
    TWTweetComposeViewController *_tweetSheet;
}

@property (nonatomic, retain) TWTweetComposeViewController *_tweetSheet;

- (void)buildTweetSheet:(UIView*) viewOnWhichToShow;
-(void)share:(UIImage*)imageToUpload viewOnWhichToShow:(UIView*) viewOnWhichToShow;

@end 
```

**TwitterShare.m**

```
#import <MobileCoreServices/UTCoreTypes.h>
#import "TwitterShare.h"
#import "ProgressIndicator.h"

@implementation TwitterShare
@synthesize _tweetSheet;

#pragma mark -
#pragma mark View methods

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

#pragma mark -
#pragma mark Showing Tweet Sheet

- (void)buildTweetSheet:(UIView*) viewOnWhichToShow
{
    /* make instance of tweet sheet */
    _tweetSheet = [[TWTweetComposeViewController alloc] init];

    /* Specify the completion handler */
    TWTweetComposeViewControllerCompletionHandler completionHandler = ^(TWTweetComposeViewControllerResult result)
    {
        [self dismissModalViewControllerAnimated:YES];

        NSString *info;
        if(result == TWTweetComposeViewControllerResultDone)
        {
            info = [NSString stringWithFormat:@"Saved"];
            ProgressIndicator *indicator = [[ProgressIndicator alloc]init];
            [indicator tweetSuccessOrFail:info view:viewOnWhichToShow];
            [indicator release];
            indicator = nil;
        }
        else if(result == TWTweetComposeViewControllerResultCancelled)
        {
            // statements if tweet sheet cancelled.
        }
        [_tweetSheet release];
        _tweetSheet = nil;
    };

    [_tweetSheet setCompletionHandler:completionHandler];
}

#pragma mark -
#pragma mark Share to Twitter

-(void)share:(UIImage*)imageToUpload viewOnWhichToShow:(UIView *)viewOnWhichToShow
{
    [self setView:viewOnWhichToShow];

    [self buildTweetSheet:viewOnWhichToShow];

    /* add Image To _tweetSheet */
    /* Show our tweet sheet */
    [_tweetSheet addImage:imageToUpload];

    [self presentModalViewController:_tweetSheet animated:YES ];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:11:17.750

看起来你还没有访问（和收藏）[Twitter Developers](https://dev.twitter.com/)及其文档：

*   使用 Twitter 登录：[https ://dev.twitter.com/docs/auth/implementing-sign-twitter](https://dev.twitter.com/docs/auth/implementing-sign-twitter)
*   使用 iOS >= iOS5 的 SSO：[https ://dev.twitter.com/docs/ios#Single_Sign-On](https://dev.twitter.com/docs/ios#Single_Sign-On)

# jquery - Jquery-同一个对象，多次点击，多种功能

> ID：11643014
> 
> 赞同：0
> 
> 时间：2012-07-25T05:00:32.740
> 
> 标签：jquery, function, click

我试图找出最好的方法来实现单击 object1 一次并导致一个函数（动画对象 A），然后再次单击 object1 并导致另一个函数（动画另一个对象-B）等效果的最佳方法。

有人可以向我扔一些术语来说明在这里使用什么吗？我确实知道如何通过 jQuery/CSS add/remove/toggle 类实现动画，但我正在寻找最有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:03:16.630

您正在寻找 JQuery 的“一次性”事件处理程序。

[http://api.jquery.com/one/](http://api.jquery.com/one/)

```
function first() {
    $('#a').animate();
};

function next() {
    $('#b').animate();
};

$('#button').one('click', function() {
    first();
    $('#button').click(next);
}; 
```

这将`first`在第一次触发 click 事件时运行该函数，然后将 click 事件重新绑定到该`next`函数以进行所有后续单击。

**编辑：**或者，如果您有两个并希望它们交替，您可以使用 Vishal 的建议`toggle`：[http ://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

**编辑 2**：

另一种选择是在事件处理程序中保留一个计数器，如下所示：

```
function fireA() { /*...*/ }
function fireB() { /*...*/ }
function fireC() { /*...*/ }

$('#button').click(function() {
   var events = [fireA, fireB, fireC];

   //declare counter
   if(!this.counter) { this.counter = 0; }

   events[this.counter]();
   this.counter = (this.counter + 1) % 3;
}); 
```

# c# - 在第一个 ListView 中选择一行后如何显示/显示第二个 ListView？

> ID：11643015
> 
> 赞同：1
> 
> 时间：2012-07-25T05:00:49.243
> 
> 标签：c#, asp.net, listview

我是一名新的 ASP.NET 开发人员，我必须创建一个测验引擎应用程序。我正在使用三个 LiveView 控件来显示：

***测验信息***、***问题信息（基于第一个 ListView 上选择的测验）***和***答案信息（基于第二个 ListView 上选择的问题）***

我有以下数据库设计：

```
QuizContent Table: ID, QuizID, QuestionID, AnswerID, isCorrect
Quiz Table: QuizID, Title, Description, isSent
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer 
```

**我现在想要的是：**当用户（管理员）来到测验引擎页面时，他应该只看到第一个 ListView，主要是关于测验信息。当他选择其中一个测验时，第二个 ListView 将显示该所选测验的问题信息，依此类推第三个 ListView。我只在显示第二个 ListView 时遇到问题。我不知道如何展示它。

**那么该怎么做呢？**

我知道我不应该发布太多的代码或信息，但我必须这样做才能明确：

```
<div align="center">
            <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" >

                <EditItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update"  runat="server" CommandName="Update" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </EditItemTemplate>
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>
                                No data was returned.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add"  runat="server" CommandName="Insert" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                        </td>

                        <%--<td>
                            &nbsp;</td>--%>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </InsertItemTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete"  runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit"  runat="server" CommandName="Edit" />

                            <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select"  runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Title</th>
                                <th style="border-bottom:2px solid #003366; ">Description</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>
                </LayoutTemplate>
                <SelectedItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </SelectedItemTemplate>
            </asp:ListView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 

                SelectCommand="SELECT * FROM [Quiz]" 
                DeleteCommand="DELETE FROM [Quiz] WHERE [QuizID] = @QuizID" 
                InsertCommand="INSERT INTO [Quiz] ([Title], [Description]) VALUES (@Title, @Description)" 

                UpdateCommand="UPDATE [Quiz] SET [Title] = @Title, [Description] = @Description WHERE [QuizID] = @QuizID">
                <DeleteParameters>
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource>
    </div>

    <br /><br />

    <%--Second ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem" visible="false">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="QuestionIDLabel1" runat="server" 
                            Text='<%# Eval("QuestionID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>'/>
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />

                        <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select" runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Question</th>
                                <th style="border-bottom:2px solid #003366; ">Question Order</th>
                                <th style="border-bottom:2px solid #003366; ">Answer Explanation</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>     
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT [Question].* FROM [Question] INNER JOIN [QuizContent] ON [QuizContent].[QuizID] = @QuizID"

            DeleteCommand="DELETE FROM [Question] WHERE [QuestionID] = @QuestionID" 
            InsertCommand="INSERT INTO [Question] ([Question], [QuestionOrder], [AnswerExplanation]) VALUES (@Question, @QuestionOrder, @AnswerExplanation)" 

            UpdateCommand="UPDATE [Question] SET [Question] = @Question, [QuestionOrder] = @QuestionOrder, [AnswerExplanation] = @AnswerExplanation WHERE [QuestionID] = @QuestionID">

                <DeleteParameters>
                    <asp:Parameter Name="QuestionID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                    <asp:ControlParameter ControlID="ListView1" Name="QuizID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>

        <br /><br />

    <%--Third ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView3" runat="server" DataSourceID="SqlDataSource3" 
            DataKeyNames="AnswerID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel1" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>'/>
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                    <thead>
                        <tr style="background-color:#C6D7B5;">
                            <th style="border-bottom:2px solid #003366; ">...</th>
                            <th style="border-bottom:2px solid #003366; ">Answer</th>
                        </tr>
                    </thead>
                    <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                </table></div>
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" 
                            Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT [Answers].* FROM [Answers] INNER JOIN [QuizContent] ON [QuizContent].QuestionID = @QuestionID"

            DeleteCommand="DELETE FROM [Answers] WHERE [AnswerID] = @AnswerID" 
            InsertCommand="INSERT INTO [Answers] ([Answer]) VALUES (@Answer)" 

            UpdateCommand="UPDATE [Answers] SET [Answer] = @Answer WHERE [AnswerID] = @AnswerID">
                <DeleteParameters>
                    <asp:Parameter Name="AnswerID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                    <asp:ControlParameter ControlID="ListView2" Name="QuestionID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView2" Name="QuestionID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

**注意：** 我没有任何代码隐藏。问题再次如下：当我运行代码时，我会看到三个 ListView 控件。它应该只显示其中之一。当用户选择其中一行时，将显示第二个 ListView，以此类推第三个 ListView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:48:29.813

我记得在同一个项目的相关问题上帮助过你 -[如何开发这个依赖于另一个 ListView 的 ListView？](https://stackoverflow.com/questions/11516402/how-to-develop-this-listview-which-depends-on-another-listview)- 你从来没有跟进。查看您的历史，您似乎打算让 Stack Overflow 社区为您完成几乎所有的工作。几乎每个问题都与同一个项目的不同方面有关。

咆哮->如果我是你，我会对这种方法感到难过，因为你没有表现出主动性，没有表现出对你的手艺拥有所有权的动力。你似乎满足于让别人在你收获赏金的同时辛勤劳作，而你的理解水平几乎没有从起点开始推动。但无论如何......我们中的一些人只是喜欢解决问题，并总是努力扩大我们的技能。我们只是希望我们的同事有更多的热情和致力于工艺。<-结束咆哮

解决方案-> 我在您的另一篇文章中提到的相同内容适用于此处。首先，您的设计有问题。在这里，您想将 ListView2（问题）绑定到 ListView1（测验），其中架构中没有任何内容可以加入它们！！！您可以通过 QuizContents 表的键将问题与测验链接到其他两个表，但在您的演示文稿中，QuizContents 出现在这两个表之后，因此即使这样也行不通。这在您当前的设置中无法完成。看看我在上面提到的链接中推荐的内容，即使你不同意，如果你花一点时间先考虑一下设计，然后再匆忙破解和编码，你会发现你是什么尝试是行不通的。改造你的设计。解决方案->

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:18:44.043

好的，我已经帮助您解决了类似的问题，这一次，我决定确切地查看问题，因此我使用您的结构在本地创建了表，并且可以复制您的问题

基本上您的查询是错误的，我不知道您希望如何隐藏/显示`ListView`控件而不编写代码或 JavaScript...

我必须说我同意@GrayFox374 你应该表现出更多的主动性......

反正...

我已经测试了这段代码，我认为这正是您正在寻找的：

Basically when the page loads only the quizes table is visible, when a quiz is selected, if it has records, the questions table is shown and finally when you select a question, the answers table is shown only if it contains data.

## 输出

### 页面加载时

![在此处输入图像描述](../Images/f41d79886ab7a5081904c382226a9396.png)

### 选择测验时

![在此处输入图像描述](../Images/e4167a8d9ef571e8eedcc9f4a763ce41.png)

### 选择问题时

![在此处输入图像描述](../Images/d0d3108a11a45a9a5d63a55da7190a04.png)

## 背后的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.InitializeListView(this.ListView2);
            this.InitializeListView(this.ListView3);
        }
    }

    protected void ListView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.InitializeListView(this.ListView2);
        this.InitializeListView(this.ListView3);
    }

    protected void ListView2_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.InitializeListView(this.ListView3);
    }

    private void InitializeListView(ListView listView)
    {
        listView.SelectedIndex = -1;
        listView.EditIndex = -1;
        listView.DataBind();

        listView.Visible = listView.Items.Count > 0;
    } 
```

## ASPX

**注意：只显示我更新的代码**

```
 <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" 
                onselectedindexchanged="ListView1_SelectedIndexChanged" >
.....

 <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem"
            onselectedindexchanged="ListView2_SelectedIndexChanged">
....
    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT        QuestionID, Question, QuestionOrder, AnswerExplanation
FROM            Question
WHERE        (QuestionID IN
                             (SELECT DISTINCT QuestionID
                               FROM            QuizContent
                               WHERE        (QuizID = @QuizID)))"
            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" DefaultValue="0" 
                PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
.....

        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT        AnswerID, Answer
FROM            Answers
WHERE        (AnswerID IN
                             (SELECT DISTINCT AnswerID
                               FROM            QuizContent
                               WHERE        (QuestionID = @QuestionID)))"

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView2" Name="QuestionID" DefaultValue="0"
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters> 
```

**请注意，如果这不起作用，我强烈建议您对数据库手动运行查询以丢弃数据问题**

好吧，我希望我没有忘记添加更多修改

# sql-server - SQL Server 2008 复制

> ID：11643016
> 
> 赞同：1
> 
> 时间：2012-07-25T05:00:52.357
> 
> 标签：sql-server, sql-server-2008, replication

我要进行 SQL Server 复制。我无法添加发布者。它显示如下。

> 没有您可以订阅的发布，可能是因为此服务器没有发布，或者您没有足够的权限来访问发布。

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:29:42.510

这是您看到的错误吗？

![在此处输入图像描述](../Images/1e12f1f3fedfbb8de69af1bc8e643478.png)

当您在下拉框中选择的发布者上尝试创建订阅而没有任何可用的发布时，会发生这种情况。

您可以使用新建发布向导创建发布。只需右键单击 SSMS 中的 Local Publications 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:56:17.663

您可以尝试此复制
[http://msdn.microsoft.com/en-us/library/ms165700(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms165700(SQL.90).aspx) 因为它不能是分发者/发布者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:42:34.907

很好的答案-想了很多。我现在将继续安装 SQL 2008（无论如何它都带有复制功能）。我对此处的 microsoft 链接的期望是，我将获得一个 addOn 复制功能作为下载 - 但它不是（只是更多信息）。无论如何，谢谢：chagbert。

# c# - 使用 HttpClient，我怎样才能干净地读取和反序列化 RSS 提要？

> ID：11643017
> 
> 赞同：1
> 
> 时间：2012-07-25T05:00:53.613
> 
> 标签：c#, .net, rss, asp.net-web-api, dotnet-httpclient

我正在使用[NuGet 上可用的 HttpClient](http://nuget.org/packages/HttpClient)。

这是我开始的代码：

```
string url = "http://example.com/rssfeed.rss";
HttpClient client = new HttpClient();
client.DefaultRequestHeaders.UserAgent.Clear();
client.DefaultRequestHeaders.Add("User-Agent", "CheesoTest");
var task = client.GetAsync(url);
try
{
    task.Wait();
    HttpResponseMessage resp = task.Result;

    var t2 = resp.Content.ReadAsAsync<RSS.Feed>();
    t2.Wait();
    var result = t2.Result;
}
catch (Exception e1)
{
    MessageBox.Show("Exception: " + e1.ToString());
} 
```

问题：

1.  我必须使用 DataContract/DataMember 属性显式定义`RSS.Feed`和装饰它。看起来确实应该内置一个 RSS 类。是吗？（也许我只是不知道）

2.  这会失败，并出现一个抱怨 RSS 提要中的处理指令的异常。它实际上是一个样式表，我不在乎。我只想要数据。

例外是：

> 异常：System.AggregateException：发生一个或多个错误。---> System.InvalidOperationException: XML 文档 (1, 2) 中存在错误。---> System.Xml.XmlException：不支持处理指令（XML 声明除外）和 DTD。第 1 行，位置 2。

提要如下所示：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="/rss.xsl"?>
<rss version="2.0">
   <channel><title>blah foo fizz bang</title>.... 
```

关于更好的方法的任何提示？使用 HttpClient！！

我发现文档有点薄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:22:24.490

或者，您是否查看过 WCF 的 SyndicationFeed？System.ServiceModel.dll 有一个[SyndicationFeed.Load(XmlReader)](http://msdn.microsoft.com/en-us/library/bb515814.aspx)方法，可以将提要反序列化为 SyndicationFeed 对象。

# cordova - PhoneGap 2.0 iOS 错误：/版本：没有这样的文件或目录

> ID：11643019
> 
> 赞同：6
> 
> 时间：2012-07-25T05:01:00.223
> 
> 标签：cordova, cordova-2.0.0

在安装新的phonegap ie phonegap 2.0 时，我收到此错误任何人请帮助我使用xcode 4.3.2 ios 5.1 解决此错误：

缺少依赖目标“CordovaLib（来自 CordovaLib.xcodeproj）”

CpResource /VERSION /Users/arjun/Library/Developer/Xcode/DerivedData/MenuApp-emlsuylgddtbitggsiybbtqsxxmb/Build/Products/Debug-iphonesimulator/MenuApp.app/VERSION

```
cd /Users/arjun/Desktop/MenuApp

setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"

builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks -strip-tool /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip /VERSION /Users/arjun/Library/Developer/Xcode/DerivedData/MenuApp-emlsuylgddtbitggsiybbtqsxxmb/Build/Products/Debug-iphonesimulator/MenuApp.app 
```

错误：/版本：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:59:33.733

我对这个 PhoneGap 世界也是全新的，iOS 版本也有同样的问题。

确保您使用 2.0.0 版本，因为在今天，2.0.1 版本缺少 .pkg 文件。按照 PhoneGap.com 中的教程进行操作。

当您运行`./create /user/myhome/documents/HelloWorld com.mydomain.HelloWorld HelloWorld`并打开 时`HelloWorld.xcodeproj`，选择`HelloWorld`项目，然后转到`Targets`，单击该`HelloWorld`项目，然后转到`Build Phases`选项卡。展开`Target Dependencies`选项。应该`CordobaLib`列出一个项目，如果有，删除它，然后重新添加。

我花了几个小时才发现这一点，希望它可以节省其他人的时间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:22:14.663

如果您安装了 Cordova-2.0.0 开发套件，这是由于在 index.html 文件中加载了不正确的 Phonegap JavaScript 文件。确保以下语句

```
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script> 
```

正在加载与您正在使用的 SDK 匹配的 phonegap js 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:14:42.867

请参阅：（第 25 步可能会有所帮助）

[http://docs.phonegap.com/en/edge/guide_upgrading_ios_index.md.html#Upgrading%20Cordova%20iOS](http://docs.phonegap.com/en/edge/guide_upgrading_ios_index.md.html#Upgrading%20Cordova%20iOS)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T22:38:37.613

编辑`your_project_folder/www/config.xml`

和改变

```
preference name="phonegap-version" value="1.9.0" 
```

至

```
preference name="phonegap-version" value="2.0.0" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T09:46:48.657

尝试将“您的项目”根文件夹移动到相同的“CordovaLib”根文件夹。

# visual-c++ - 来自托管 C++/CLI 的 ObjectQuery 扩展

> ID：11643023
> 
> 赞同：2
> 
> 时间：2012-07-25T05:01:23.927
> 
> 标签：visual-c++, c++-cli

我正在尝试将项目转移到使用实体框架，但为了让它更有趣，该项目使用 C++/CLR。

我有一个查询

```
ObjectQuery<myData::Facility^>^ facQ = myContext->FacilitySet; 
```

我想这样做

```
int n = facQ.Count() 
```

但我不能，因为 c++ 不能识别使用 C# 语法的扩展方法。facQ->Count() 不起作用。

[使用托管 C++/CLI 中的 C# 扩展方法](https://stackoverflow.com/questions/1349674/using-c-sharp-extension-methods-from-managed-c-cli)显示了用户定义扩展的答案；但在这种情况下，扩展是 .NET 框架[http://msdn.microsoft.com/en-us/library/bb349034%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/bb349034%28v=vs.90%29.aspx)的一部分。

有任何想法吗？

（我使用的是 Visual Studio 2008 和 .NET 3.5）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:21:54.280

System::Data::Objects::ObjectQuery 实现`IEnumerable<T>`. 您在 C# 中看到的 Count() 方法来自 System::Linq::Enumerable 类。

```
using namespace System::Linq;

int n = Enumerable::Count(facQ); 
```

另请参阅[此答案](https://stackoverflow.com/questions/5643734/how-to-use-linq-in-c-cli-in-vs-2010-net-4-0/5645267#5645267)，其中显示了在该类中调用其他扩展方法的几个示例。

# grails - 将自动生成 Grails 测试脚手架更改为 Spock 测试

> ID：11643027
> 
> 赞同：1
> 
> 时间：2012-07-25T05:01:32.300
> 
> 标签：grails, spock

嗨，我正在尝试更改 grails 中自动生成的测试用例

```
@TestMixin(GrailsUnitTestMixin)
class KLAKSpec {

    void setUp() {
        // Setup logic here
    }

    void tearDown() {
        // Tear down logic here
    }

    void testSomething() {
        fail "Implement me"
    }
} 
```

到 Spock Type 测试格式，就像这样

```
@TestFor(GrailsUnitTestCase)
class @artifact.name@ extends @artifact.superclass@ {
        def "feature method"() {
                setup:

                when:

                then:

                where:

}
} 
```

虽然我在 scipt 文件夹下添加了一个 _Events.groovy 脚本，并在 artifacts 文件夹中添加了一个 Spec.groovy 文件，当我自动生成列表时该文件会更改名称。

任何人都可以让我知道如何更改为规范格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:16:19.190

前段时间我写了一篇博客文章：[Auto-generate Spock specs for Grails artifacts](http://adhockery.blogspot.co.uk/2010/08/auto-generate-spock-specs-for-grails.html)。这篇文章是在 Grails 2 之前编写的，所以它仍然使用旧的超类而不是`@TestFor`但它应该很容易适应。我们仍在使用 Grails 1.3.7 的项目中使用这种技术。这是一个有点生硬的工具，因为 Grails 没有为测试生成公开一个独特的事件，但它工作正常。

# python - 使用python调整图像大小并在缓冲区中获取数据

> ID：11643035
> 
> 赞同：1
> 
> 时间：2012-07-25T05:01:56.747
> 
> 标签：python, image, resize

我想将输入图像调整为固定大小。然后我想将调整大小的图像文件的全部内容放在缓冲区中以供进一步使用，例如将其与其他缓冲区（数据）一起附加。

目前我正在使用以下python函数进行操作，

```
def get_resize_img(img_file):
    img = Image.open(img_file)
    img = img.resize((640,960), Image.NEAREST)
    img.save("tmp_out.jpg")
    fp = open("tmp_out.jpg", "rb")
    data = fp.read()
    fp.close()
    print "img sz:", len(data)
    return data 
```

有没有更好的方法来实现这一点，而无需写入虚拟文件（tmp_out.jpg）并从中读取。

-莫汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:11:44.087

```
Import StringIO

def get_resize_img(img_file):
    buffer = StringIO.StringIO()
    img = Image.open(img_file)
    img = img.resize((640,960), Image.NEAREST)
    format = "YOUR_FORMAT" // JPG,PNG,etc.
    img.save(buffer,format)
    return buffer.getvalue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:13:58.897

我想你可以使用`getdata`来获取图像数据，这实际上是图像缓冲区。然后您可以使用 重建图像`frombuffer`。或者，也许您可​​以只返回调整大小的 Image 对象并稍后使用它。

你可以在这里查看[文档](http://www.pythonware.com/library/pil/handbook/image.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:17:46.103

如果您使用的是 numpy，那么可以完成以下操作

```
data = numpy.asarray(im) 
```

# c# - 专注于 Excel 应用程序

> ID：11643037
> 
> 赞同：1
> 
> 时间：2012-07-25T05:02:08.470
> 
> 标签：c#, vsto

如何在 vsto C# 中将焦点放在 Excel 应用程序对象上我一直在寻找它但没有任何成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:21:22.107

试试这个代码

```
 Process[] processes = Process.GetProcessesByName("excel");
 foreach (Process p in processes)
 {
     if (p.MainWindowTitle.Contains(fileName.Substring(fileName.LastIndexOf("/") + 1)))
     {
         SetForegroundWindow(p.MainWindowHandle);
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T09:02:01.677

我的 VSTO 应用程序中的解决方案是：

```
 [DllImport("user32.dll", SetLastError = true)]
    public static extern bool BringWindowToTop(IntPtr hWnd);

    /// <summary>
    /// Gets the main excel window.
    /// </summary>
    /// <returns>An ArbitraryWindow that represents the main excel window.</returns>
    public static ArbitraryWindow GetMainExcelWindow()
    {
        var excelHwnd_IntPtr = new IntPtr(Globals.ThisAddIn.Application.Hwnd);
        var excelWindow = new ArbitraryWindow(excelHwnd_IntPtr);

        return excelWindow;
    }

    /// <summary>
    /// Activates the excel window.
    /// </summary>
    public static void ActivateExcelWindow()
    {
        var currentlyActiveForm = Form.ActiveForm;
        //if (currentlyActiveForm != null && currentlyActiveForm.GetType() == typeof(FormProgress)) return;

        var handle = GetMainExcelWindow().Handle;
        BringWindowToTop(handle);
    } 
```

只需调用“ActivateExcelWindow()”即可激活 Excel 主窗口。

问候，约尔格

# php - 我是否需要修改 autoload.php 文件以供作曲家使用 symfony？

> ID：11643038
> 
> 赞同：0
> 
> 时间：2012-07-25T05:02:17.403
> 
> 标签：php, symfony, composer-php

我正在使用 symfony 供应商/安装来更新新模块。我已经下载了模块，但我对作曲家感到困惑。

在我的`deps`文件中，我已经下载了许多新的捆绑包。

1.  现在，如果我使用作曲家，这些捆绑包将如何更新。我需要为composer.json 转换Deps 等效文件吗？
2.  现在我是否还需要更改我的 autoload.php 文件以使用 composer
3.  如果我需要安装新的捆绑包，那么我的旧捆绑包会保持与供应商一起安装的原样吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:59:15.133

> 现在，如果我使用作曲家，这些捆绑包将如何更新。我需要为composer.json 转换Deps 等效文件吗？

你的 deps 文件需要转换成 composer.json。

composer.lock 类似于 deps.lock 并且它是自动生成的。运行 install 命令时，composer 将使用 composer.lock 来安装锁定的版本。运行 update 命令将更新软件包并将安装的版本存储在 composer.lock 中。

> 现在我是否还需要更改我的 autoload.php 文件以使用 composer

仅当您从使用供应商脚本过渡到作曲家时。您只需更新一次 app/autoload.php 文件即可包含 composer 生成的文件。查看[symfony-standard](https://github.com/symfony/symfony-standard/blob/master/app/autoload.php)（master 分支）或[此处](https://github.com/KnpLabs/symfony-with-composer/blob/master/app/autoload.php)的示例。

每次运行 install 或 update 命令时，Composer 都会为您重新生成自动加载器。

# php - mySQL 语句 ORDER BY 多列

> ID：11643042
> 
> 赞同：0
> 
> 时间：2012-07-25T05:02:56.830
> 
> 标签：php, mysql, sql, sql-order-by

如果我有两列，价格（full_price，sales_price），并且这些列中有数字。我知道 sql 语句可以执行多个 order by，但是当这些列中有值时它是如何工作的？

```
("SELECT * FROM table ORDER BY full_price,sales_price DESC") 
```

我该如何完成才能选择两列中的最小值？它会根据 full_price 和 sales_price 之间的所选列对数据进行排序吗？

注意：有时 sales_price 将没有价值。

谢谢

编辑：

例子

```
id    full_price        sales_price
1      23                 42           
2      342                200
3      1
4      10                 8 
```

我想要做的是使用这些数字，我可以输出与最低价格相关的数据。

顺序应该是：

```
3,4,1,2 
```

原因：

```
3: 1
4: 8
1: 23
2: 200 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:15:06.393

假设您的空白`sales_price`是 NULL 并且`full_price`不能为 NULL：

```
select ...
from ...
where ...
order by case
    when sales_price is null then full_price
    else least(full_price, sales_price)
end 
```

您可能希望添加辅助排序键以从关系中获得一致且合理的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:12:35.710

```
SELECT * FROM table
ORDER BY case when sales_price is null or full_price is null
              then 0
              when full_price > sales_price
              then sales_price ASC
              else full_price ASC
         end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:12:36.120

如果您想要基于 full_price 和 sales_price 差异的结果，请尝试：

```
SELECT *
FROM table
ORDER BY ABS(full_price - IF(sales_price IS NULL, 0, sales_price)) ASC 
```

或者，如果您想要基于 full_price 和 sales_price 比较的结果，请尝试：

```
SELECT *
FROM table
ORDER BY IF(full_price < IF(sales_price IS NULL, 0, sales_price), 
            full_price , sales_price ) ASC 
```

# powershell - 使用 Powershell 从文件中删除最后一行

> ID：11643043
> 
> 赞同：15
> 
> 时间：2012-07-25T05:03:05.207
> 
> 标签：powershell, text, csv

我在用

```
gc FileWithEmptyLines.txt | where {$_ -ne ""} > FileWithNoEmptyLines.txt 
```

删除 SSRS 放在我的 CSV 底部的空行。

但是，包含数据的最后一行以 CRLF 结尾（如在 Notepad++ 中查看的那样） - 这并没有被删除，因此从技术上讲，文件底部仍然有一个空白行。

有没有办法从最后一行删除这个 CRLF（当然，保持数据完整）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T07:33:41.913

如果您已经知道文件的最后一件事是您想要摆脱的 CRLF（并且您也知道编码），您可以走捷径：

```
$stream = [IO.File]::OpenWrite('foo.txt')
$stream.SetLength($stream.Length - 2)
$stream.Close()
$stream.Dispose() 
```

这是文件的就地截断。它无需将所有文件读入内存即可工作（如果您有一个*非常*大的文件，那就太好了）。它适用于 ASCII、Latin-* 和 UTF-8。它不适用于 UTF-16（在这种情况下，您必须从末尾删除四个字节）。

您可以额外检查最后两个字节是否*真的*是您要删除的内容：

```
$stream = [IO.File]::Open('foo.txt', [IO.FileMode]::Open)
$stream.Position = $stream.Length - 2
$bytes = 0..1 | %{ $stream.ReadByte() }
$compareBytes = 13,10 # CR,LF
if ("$bytes" -eq "$compareBytes") {
    $stream.SetLength($stream.Length - 2)
}
$stream.Close()
$stream.Dispose() 
```

同样，如果您使用其他编码进行调整，例如对于 UTF-16，您需要与`0,10,0,13`或进行比较`10,0,13,0`。

同意，这不是很 PowerShell-ey，但是自从我不得不处理 700-MiB 的数据库转储后，我对将潜在的大文件完全读入内存持谨慎态度；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T05:27:48.163

当您使用它读取文件`Get-Content`时，将管道中的每一行作为字符串流式传输。当`Out-File`（本质上`>`是别名）获取这些字符串时，它总是附加一个行终止符序列。如果文件不是太大，请尝试以下操作：

```
$text = [IO.File]::ReadAllText("c:\FileWithEmptyLinesAtEnd.txt")
[IO.File]::WriteAllText("c:\FileWithEmptyLinesAtEnd.txt", $text.TrimEnd()) 
```

这是之前的文件：

```
14> fhex .\FileWithEmptyLinesAtEnd.txt

Address:  0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F ASCII
-------- ----------------------------------------------- ----------------
00000000 73 65 72 76 65 72 31 2C 73 65 72 76 65 72 32 2E server1,server2.
00000010 64 6F 6D 61 69 6E 2E 6C 6F 63 61 6C 2C 73 65 72 domain.local,ser
00000020 76 65 72 33 0D 0A 20 20 20 20 20 20             ver3.. 
```

之后：

```
19> fhex .\FileWithEmptyLinesAtEnd.txt

Address:  0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F ASCII
-------- ----------------------------------------------- ----------------
00000000 73 65 72 76 65 72 31 2C 73 65 72 76 65 72 32 2E server1,server2.
00000010 64 6F 6D 61 69 6E 2E 6C 6F 63 61 6C 2C 73 65 72 domain.local,ser
00000020 76 65 72 33                                     ver3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T19:43:43.110

我不确定这对这种情况有多适用，但我的谷歌搜索删除了文本文件的最后一行导致我来到这里，上面的示例/解决方案不起作用。这是我可以用来让它工作的命令：

```
$file = "file.txt"
Get-Content $file | Measure-Object -Line
$a = (Get-Content $file | Measure-Object)
(Get-Content $file) | ? {($a.count-1)-notcontains $_.ReadCount} | Set-Content $file 
```

如果您正在处理一个大文件，您可能希望首先将其通过管道传输到一个临时文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T18:57:15.320

对于“UCS-2 Little Endian”文件格式，请使用：

```
$stream = [IO.File]::Open($filename, [IO.FileMode]::Open)
$stream.Position = $stream.Length - 4
$bytes = 0..3 | %{ $stream.ReadByte() }
$compareBytes = 13,0,10,0 # CR,LF
echo "bytes: "$bytes
if ("$bytes" -eq "$compareBytes")
{
    $stream.SetLength($stream.Length - 4)
}
$stream.Close()
$stream.Dispose() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T07:27:43.217

试试这个，虽然它会从你的文件中删除所有空行

```
(Get-Content c:\FileWithEmptyLinesAtEnd.txt) | 
Where-Object {$_ -match '\S'} | 
Out-File c:\FileWithEmptyLinesAtEnd.txt 
```

# c# - 使用代码裁剪动画 GIF

> ID：11643048
> 
> 赞同：0
> 
> 时间：2012-07-25T05:03:28.033
> 
> 标签：c#, .net, image, system.drawing, animated-gif

我正在使用一段代码

```
string originalfilename = Server.MapPath(" ") + "\\img\\" + file_image.FileName;
string originalrelative = "\\img\\" + file_image.FileName;
file_image.SaveAs(originalfilename);
string thumbfilename = Server.MapPath(" ") + "\\img\\t_" + file_image.FileName;
string thumbrelative = "\\img\\t_" + file_image.FileName;
Bitmap original = new Bitmap(originalfilename);
int squareside = 0;
if (original.Width >= original.Height) { squareside = original.Height; } 
 else { squareside = original.Width; }
Bitmap squareimage = (Bitmap)original.Clone(
    new Rectangle(new Point(0, 0), new Size(squareside, squareside)),
    System.Drawing.Imaging.PixelFormat.DontCare);
Bitmap thumb = (Bitmap)squareimage.GetThumbnailImage(200, 200,
    new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback),
    IntPtr.Zero);
thumb.Save(thumbfilename);
file_original = file_image.PostedFile.FileName;
file_thumb = "t_"+file_image.PostedFile.FileName; 
```

获取每张上传图片的缩略图，我在网站上使用图片的缩略图版本。我应该如何操作此代码以将 gif 文件保留为动画 gif 文件？当我获得动画 gif 的缩略图时，此代码会将它们保存为普通 gif。当然位图类不支持动画 gif，但 .net 框架是否支持任何替代方案？

# actionscript-3 - TypeError：手风琴 AS3 中的错误 #1010

> ID：11643049
> 
> 赞同：0
> 
> 时间：2012-07-25T05:03:37.323
> 
> 标签：actionscript-3, flash, accordion, typeerror

我在 Flash 中创建了 Accordion。我收到以下错误

```
TypeError: Error #1010: A term is undefined and has no properties.
at accordionSub_fla::accordionMain_1/mouserOver() 
```

但是，这个错误只反映在 Panel3 上，我有 9 个面板，除了 Panel3 之外，所有面板都工作正常，而且这个 Panel3 不只是打开。下面是函数代码

```
function mouserOver(e:MouseEvent):void {
var overed:MovieClip = MovieClip(e.target);
for(var i:int=0; i<numChildren; i++)
{
    var mc:MovieClip = MovieClip(getChildAt(i));
    if(mc.props.ind <= overed.props.ind)
    {
        TweenLite.to(mc, 1, {x:mc.props.lx, ease:Expo.easeOut});
        var request:URLRequest = new URLRequest(mc.props.links);
        myTimer.start();
        myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, urlAction);
        function urlAction(evt:TimerEvent)
        {
            navigateToURL(request, 'myFrame');
        }

    }
    else
    {
        TweenLite.to(mc, 1, {x:mc.props.rx, ease:Expo.easeOut});
    }
}} 
```

任何立即响应都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:20:45.110

numChildren 的价值从何而来？

检查这些行： var mc:MovieClip = MovieClip(getChildAt(i)); 如果（mc.props.ind <= overed.props.ind）

mc 在某些情况下可以为 null，访问其属性将引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:43:54.130

我得到了答案..代码没有错误。实际上，当我单击按钮时，它会出现错误，并且我将 Panel3 的标题设置为按钮，因此它触发了错误。现在，我把它变成了简单的文本字段，现在问题解决了。

无论如何，谢谢弗兰克

# c++ - 提高c/c++技能和解决能力

> ID：11643059
> 
> 赞同：2
> 
> 时间：2012-07-25T05:04:33.607
> 
> 标签：c++, c

我可以说我是 C/C++ 的中级程序员。我正在尝试找到一个网站（文档；任何东西），其中包含 C 和 C++ 的好谜题（或类似的）。我的目标是体验 C 和 C++ 的脑筋急转弯之类的东西。当然不是任何面试类型的问题。我想提高我的 C/C++ 技术，在解决问题的情况下，或者在算法的实现过程中，处理特定的逻辑；等等

其次，我也在研究可以在 C 和 C++ 中实践的新的、简单的和创新的问题（只是问题，以提高问题的解决能力）。例如，实现移位旋转功能（这是非常基本的，但会教你深入的位处理），以及像图形这样的高级水平；等等

基本上，我希望解决一个问题，提高我的 C/C++ 技能，以及两个，提高使用 C/C++ 解决问题的技能。

# matlab - 如何将字符串（逻辑运算和关系运算）转换为符号对象？

> ID：11643063
> 
> 赞同：0
> 
> 时间：2012-07-25T05:05:00.257
> 
> 标签：matlab

如何将字符串（逻辑运算和关系运算）转换为符号对象？例如..

```
zz = '(xx>=-4 ) & (xx<-3 )' 
```

如何转换`zz`为符号对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:31:13.450

你试过`sym`命令吗？

```
zz = sym('(xx>=-4 ) & (xx<-3 )'); 
```

这应该有效，如果`xx`已经是一个符号表达式，即之后

```
syms xx 
```

# asp.net - 它应该是 WebAPI 还是 asmx

> ID：11643072
> 
> 赞同：14
> 
> 时间：2012-07-25T05:06:31.033
> 
> 标签：asp.net, asp.net-mvc, web-services, asmx, asp.net-web-api

我应该为我的两个简单 API 使用 ASMX 服务还是 ASP.NET Web API？

我想在我的 ASP.NET MVC 项目中创建两个简单的 API。一个接受 3 个参数 ( `currentUserID`, `DataType`, `ActionName`)。它返回它们和它们请求的数据的 XML 字符串。API 由客户端 JavaScript 代码使用。另一个 API 接收 XML 字符串并在服务器端使用该字符串对数据库执行操作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-25T05:21:34.270

我刚刚回答了一个相关的问题：

[ASP.NET Web API 发布后 ASP.NET MVC 框架的未来是什么](https://stackoverflow.com/q/11621550/1268570)

基本上，微软提供的开发 Web 服务的框架有：

*   ASMX。基于 SOAP 的 XML 服务。

*   WCF。基于 SOAP 的 Web 服务。这些服务是传统 ASMX 服务的演变，基本上它们专注于将服务本身与传输协议分开。这就是为什么您可以使用多个端点公开相同的服务，因此可以使用多个协议（TCP、HTTP、命名管道、MSMQ、HTTPS）。这种灵活性伴随着配置问题。社区中对 WCF 的主要抱怨之一是繁琐且广泛的配置

*   网页 API。基于不在 SOAP 中的 HTTP。这个新的 API 是一个创建服务的新框架。与其他两个前辈的主要区别在于它基于 HTTP 而不是 SOAP，因此您可以使用几个 HTTP 功能，例如：

    *   它包含非常有意义和描述性的消息标头 - 标头建议消息正文的内容类型，标头解释如何缓存信息，如何保护信息等。
    *   使用动词来定义动作（POST、PUT、DELETE..）
    *   它包含一个可用于发送任何类型内容的正文
    *   它使用 URI 来标识信息路径（资源）和操作

    WEB API 专注于编写服务以通过 HTTP 公开它们（目前仅在 HTTP 上）。如果您想使用其他协议公开您的服务，那么您应该考虑使用 WCF。

    WEB API基于MVC（如果你想知道它基于MVC的原因，很简单）

    > WCF Web API 的另一个目标是整合已知概念，帮助开发人员克服 WCF 面临的一些缺点，例如庞大的配置、属性的过度使用以及不能很好地支持测试的 WCF 基础结构。因此，Web API 使用 IoC，启用约定优于配置，并尝试提供更简单的配置环境。
    > 
    > ASP.NET MVC 基础结构及其对 HTTP 请求和响应的优雅处理，以及对易于创建的控制器的支持似乎是创建这种新型服务的正确方法。

考虑以下几点来选择 WCF 或 WEB API

> *   如果您的意图是创建支持特殊场景的服务——单向消息传递、消息队列、双工通信等，那么您最好选择 WCF
> *   如果您想创建可以在可用时使用快速传输通道的服务，例如 TCP、命名管道，甚至可能是 UDP（在 WCF 4.5 中），并且您还希望在所有其他传输不可用时支持 HTTP，那么您就是最好使用 WCF 并同时使用基于 SOAP 的绑定和 WebHttp 绑定。
> *   如果你想通过 HTTP 创建可以使用 HTTP 全部功能的面向资源的服务——使用 ETags 定义浏览器的缓存控制、版本控制和并发，传递各种内容类型，如图像、文档、HTML 页面等，使用 URI 模板要在您的响应中包含任务 URI，那么新的 Web API 是您的最佳选择。
> *   如果你想创建一个多目标服务，它既可以用作 HTTP 上的面向资源的服务，也可以用作 TCP 上的 RPC 样式的 SOAP 服务——请先跟我谈谈，我会给你一些建议。

更详细的比较：

[http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec](http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:18:14.247

看来您确实对 Views 做了很多工作，所以我认为 Web API 在这一点上会是更简洁的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:13:52.387

如果可能，我会在 mvc4 中使用 Web Api 控制器。您可以返回一个通用的可枚举列表或模型，它会自动将数据输出为请求的任何格式，例如 xml 或 json。它非常惊人。

# javascript - jquery $.post 解释

> ID：11643076
> 
> 赞同：0
> 
> 时间：2012-07-25T05:07:16.670
> 
> 标签：javascript, ajax, jquery, jquery-post

我编写了以下代码来使用*jQuery*发布数据，它工作正常，但是没有`return false;`，代码不起作用，我在搜索了 1 天后发现了这个返回语句......

有人可以告诉我，`return false;`结束后有什么用`$.post`？
我是*jQuery*的新手，希望对此有更好的理解。

```
$("#formid").submit( function () {    
  $.post(
   'ajax.php',
    $(this).serialize(),
    function(data){                 
       $("#result").html(data);
       $("#result").fadeIn('slow');
    }
  );
  return false;   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:09:58.817

这里`return false;`不用于 AJAX 的 $.post 方法，而是用于防止 form( `#formid`) 提交，这可以取消您的 AJAX 请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:10:19.223

如果您删除`return false;`，您将看到浏览器继续提交表单（不使用 AJAX）。返回 false 将阻止浏览器执行默认操作，从而导致仅发生 AJAX 调用。

`preventDefault()`通过调用传递给提交事件的事件对象可以获得类似的结果。

例如：

```
$("#formid").submit( function (event) {    
      $.post(
       'ajax.php',
        $(this).serialize(),
        function(data){                 
           $("#result").html(data);
           $("#result").fadeIn('slow');
        }
      );
    event.preventDefault();   
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:11:12.043

这`return false`实际上是在阻止表单提交的默认操作。如果您不写该声明，则您的表单将被提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:13:12.890

Return false 会在用户单击提交按钮时停止执行默认表单操作。只执行 jQuery 部分。否则，整个页面将在表单提交时重新加载。

[您可以在 jQuery API 的.submit()](http://api.jquery.com/submit/)页面上阅读相关内容。

有以下一段：

> 当表单提交时，消息会被提醒。这发生在实际提交之前，因此我们可以通过在事件对象上调用 .preventDefault() 或从我们的处理程序返回 false 来取消提交操作。当点击另一个元素时，我们可以手动触发事件：

# javascript - Nivo 滑块加载问题？

> ID：11643077
> 
> 赞同：0
> 
> 时间：2012-07-25T05:07:32.487
> 
> 标签：javascript, html, css, nivo-slider

这是我的[网站](http://www.codtelevision.com)。出于某种原因，我的 Nivo 滑块不会显示...它只是坐在那里并加载。为什么，我该如何解决？这是我的CSS：

```
 #slider {
    position:relative;
    width:618px;
    height:246px;
    background:url(http://www.codtelevision.com/nivo/images/loading.gif) no-repeat 50% 50%;
}
#slider img {
    display: none; 
    position:absolute;
    top:0px;
    left:0px;
}

.nivo-controlNav {
    position:absolute;
    left:260px;
    bottom:-30px;
}
.nivo-controlNav a {
    display:block;
    width:22px;
    height:22px;
    background:url(http://www.codtelevision.com/nivo/images/bullets.png) no-repeat;
    text-indent:-9999px;
    border:0;
    margin-right:3px;
    float:left;
}
.nivo-controlNav a.active {
    background-position:0 -22px;
}

.nivo-directionNav a {
    display:block;
    width:30px;
    height:30px;
    background:url(http://www.codtelevision.com/nivo/images/arrows.png) no-repeat;
    text-indent:-9999px;
    border:0;
}
a.nivo-nextNav {
    background-position:-30px 0;
    right:15px;
}
a.nivo-prevNav {
    left:15px;
}

.nivo-caption {
    text-shadow:none;
    font-family: Helvetica, Arial, sans-serif;
}
.nivo-caption a {
    color:#efe9d1;
    text-decoration:underline;
}

.clear {
    clear:both;
} 
```

如果这没有帮助，请查看我的网站或告诉我要粘贴什么代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:11:27.057

去掉 html 中第 15 行多余的 script 标签。

更新1：

更改`$('#slider').nivoSlider();`为`$('#slider').nivoSlider({`如下所示。

```
$(document).ready(function() {
    $('#slider').nivoSlider({
        effect:'fade', //Specify sets like: 'fold,fade,sliceDown'
        slices:15,
        animSpeed:600, //Slide transition speed
        pauseTime:8000,
        startSlide:0, //Set starting Slide (0 index)
        directionNav:true, //Next & Prev
        directionNavHide:true, //Only show on hover
        controlNav:true, //1,2,3...
        controlNavThumbs:false, //Use thumbnails for Control Nav
        controlNavThumbsFromRel:false, //Use image rel for thumbs
        controlNavThumbsSearch: '.jpg', //Replace this with...
        controlNavThumbsReplace: '_thumb.jpg', //...this in thumb Image src
        keyboardNav:true, //Use left & right arrows
        pauseOnHover:false, //Stop animation while hovering
        manualAdvance:false, //Force manual transitions
        captionOpacity:0.8, //Universal caption opacity
        beforeChange: function(){},
        afterChange: function(){},
        slideshowEnd: function(){}, //Triggers after all slides have been shown
        lastSlide: function(){}, //Triggers when last slide is shown
        afterLoad: function(){} //Triggers when slider has loaded
    });
}); 
```

更新 2：

好的，所以您在 375 行的 html 中包含了最新版本的 jQuery。请在此行之后粘贴您的 Nivoslider。那就是在第 375 行之后移动以下脚本，比如在`</body>`标记之前。

```
<script type="text/javascript" src="http://www.codtelevision.com/nivo/js/jquery.nivo.slider.pack.js"></script>
    <script type="text/javascript">

   $(document).ready(function() {
    $('#slider').nivoSlider({
        effect:'fade', //Specify sets like: 'fold,fade,sliceDown'
        slices:15,
        animSpeed:600, //Slide transition speed
        pauseTime:8000,
        startSlide:0, //Set starting Slide (0 index)
        directionNav:true, //Next & Prev
        directionNavHide:true, //Only show on hover
        controlNav:true, //1,2,3...
        controlNavThumbs:false, //Use thumbnails for Control Nav
        controlNavThumbsFromRel:false, //Use image rel for thumbs
        controlNavThumbsSearch: '.jpg', //Replace this with...
        controlNavThumbsReplace: '_thumb.jpg', //...this in thumb Image src
        keyboardNav:true, //Use left & right arrows
        pauseOnHover:false, //Stop animation while hovering
        manualAdvance:false, //Force manual transitions
        captionOpacity:0.8, //Universal caption opacity
        beforeChange: function(){},
        afterChange: function(){},
        slideshowEnd: function(){}, //Triggers after all slides have been shown
        lastSlide: function(){}, //Triggers when last slide is shown
        afterLoad: function(){} //Triggers when slider has loaded
    });
}); 
```

更新 3：

或者，您可以在开头包含最新版本并消除冲突。因此，将第 13 行中的 jquery 更新为最新的 src `http://code.jquery.com/jquery-latest.js`，并将`$(window).load(function() {`第 17 行中的`$(document).ready(function() {`. 它会起作用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:13:22.983

好的，第一件事。查看您的代码后，顶部有一个未关闭且不包含任何内容的脚本标签。去掉它。

```
<script type="text/javascript">
<script type="text/javascript">

$(document).ready(function() {
$('#slider').nivoSlider();
    effect:'fade', //Specify sets like: 'fold,fade,sliceDown'
    slices:15, 
```

编辑：jQuery 冲突。

在顶部你有

```
<script type="text/javascript" src="http://www.codtelevision.com/nivo/js/jquery-1.4.3.min.js"></script> 
```

在底部你有

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

页面上只包含一个版本的 jQuery。

# javascript - Mac：Apple Dock 弹跳效果

> ID：11643080
> 
> 赞同：0
> 
> 时间：2012-07-25T05:07:55.197
> 
> 标签：javascript, jquery

我正在寻找一个酒吧的弹跳效果。如果您在 mac 中注意到，所有应用程序都排成一列的 Dock。单击任何应用程序的那一刻，图标就会开始弹跳。我正在寻找类似的效果。酒吧需要反弹 3 次，然后停止一两秒钟，然后再次反弹 3 次。

这是我目前正在做的事情，但没有帮助

```
$(function () {
function bounceDiv(){
    $("#six").effect("bounce", { times:3, distance:20 }, 400);
}
setInterval(bounceDiv,1000);
}); 
```

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:12:51.543

## *您可以使用 jQuery/JavaScript*尝试Fantastic Bouncy Effect

 *![在此处输入图像描述](../Images/d26dcf8c142fbbf5016d0a068b0f4f76.png)

我们的目标是创建一个包含 4 个框 (DIV) 的 HTML 页面。单击这些框中的每一个都会使它们反弹，这是一个特定的方向。我们可以使用 jQuery 方法的参数来控制元素弹跳的方向和速度。

### HTML

```
<table>
<tr>
    <td><div id="bouncy1">Click here to bounce. Direction: Up</div></td>
    <td><div id="bouncy2">Click here to bounce. Direction: Left</div></td>
</tr>
<tr>
    <td><div id="bouncy3">Click here to bounce. Direction: Right</div></td>
    <td><div id="bouncy4">Click here to bounce. Direction: Down</div></td>
</tr>
</table>
<br/>
<input id="bounceAll" type="button" value="Click to Bounce All!"/> 
```

### CSS

```
div {
    padding:5px;
    width:150px;
    height:100px;
    text-align:center;
}
#bouncy1 {
    background-color:#FFEE88;
}
#bouncy2 {
    background-color:#EE88FF;
}
#bouncy3 {
    background-color:#EE8888;
}
#bouncy4 {
    background-color:#88EEFF;
} 
```

### JavaScript

```
$(function(){

    //Add bounce effect on Click of the DIV
    $('#bouncy1').click(function () {
          $(this).effect("bounce", { times:5 }, 300);
    });

    $('#bouncy2').click(function () {
          $(this).effect("bounce", { direction:'left', times:5 }, 300);
    });

    $('#bouncy3').click(function () {
          $(this).effect("bounce", { direction:'right', times:5 }, 300);
    });

    $('#bouncy4').click(function () {
          $(this).effect("bounce", { direction:'down', times:5 }, 300);
    });

    //Bounce all DIVs on click of button
    $("#bounceAll").click(function(){
        $("div").click();
    });
}); 
```

### [使用 jQuery/JavaScript](http://viralpatel.net/blogs/jquery-bounce-effect-bounce-html-js/)在 Fantastic Bouncy Effect 演示

### 对于您的 JavaScript

```
$(document).ready(function(){
    $("div").click();
}); 
```

### 在你的 JavaScript

```
$(function () {
    function bounceDiv(){
        $("#six").effect("bounce", { times:3, distance:20 }, 400);
    }
    setInterval('bounceDiv()', 1000);
}); 
```

### 你忘了`'`s！:(

**来源：http: [//viralpatel.net/blogs/jquery-bounce-effect-bounce-html-js/](http://viralpatel.net/blogs/jquery-bounce-effect-bounce-html-js/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:22:56.403

这将工作 100%

```
<script type="text/javascript">
function bounceDiv(){
    $("#six").effect("bounce", { times:3 }, 300);
}

$(document).ready(function() 
{
    setInterval('bounceDiv()',5000);
});
</script> 
```

享受 ：）*

# hadoop - Hadoop 作业输出中的不需要的字符

> ID：11643082
> 
> 赞同：0
> 
> 时间：2012-07-25T05:08:26.467
> 
> 标签：hadoop

我写了一个简单的程序来收集一些数据中关于二元组的一些统计数据。我将统计信息打印到自定义文件中。

```
Path file = new Path(context.getConfiguration().get("mapred.output.dir") + "/bigram.txt");
FSDataOutputStream out = file.getFileSystem(context.getConfiguration()).create(file); 
```

我的代码有以下几行：

```
Text.writeString(out, "total number of unique bigrams: " + uniqBigramCount + "\n");
Text.writeString(out, "total number of bigrams: " + totalBigramCount + "\n");
Text.writeString(out, "number of bigrams that appear only once: " + onceBigramCount + "\n"); 
```

我在 vim/gedit 中得到以下输出：

```
'total number of unique bigrams: 424462
!total number of bigrams: 1578220
0number of bigrams that appear only once: 296139 
```

除了行首不需要的字符外，还有一些非打印字符。这背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:35:15.293

正如@ThomasJungblut 所说， writeString 方法为每次调用 writeString 写出两个值 - 字符串的长度（作为 vint）和字符串字节：

```
/** Write a UTF8 encoded string to out
 */
public static int writeString(DataOutput out, String s) throws IOException {
  ByteBuffer bytes = encode(s);
  int length = bytes.limit();
  WritableUtils.writeVInt(out, length);
  out.write(bytes.array(), 0, length);
  return length;
} 
```

如果您只是希望能够将文本输出打印到该文件（即所有人类可读），那么我建议您`out`用 a 包装变量`PrintStream`，并使用 println 或 printf 方法：

```
PrintStream ps = new PrintStream(out);
ps.printf("total number of unique bigrams: %d\n", uniqBigramCount);
ps.printf("total number of bigrams: %d\n", totalBigramCount);
ps.printf("number of bigrams that appear only once: %d\n", onceBigramCount);
ps.close(); 
```

# export - 使用谷歌 api 同步谷歌日历

> ID：11643092
> 
> 赞同：1
> 
> 时间：2012-07-25T05:09:23.403
> 
> 标签：export, google-calendar-api, sync

我想将 google 日历与 facebook 朋友的生日同步

我知道如何用 java 代码导出我朋友的生日

有人知道如何将谷歌日历与这个导出的 ics 文件同步吗？？（以程序方式）

有什么方法可以访问谷歌日历 URL 同步？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T05:11:37.177

请检查：[https ://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

# c# - 使用 ajax 创建视图的 MVC 3 Partialview

> ID：11643101
> 
> 赞同：0
> 
> 时间：2012-07-25T05:10:36.180
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3, asp.net-mvc-partialview

![在此处输入图像描述](../Images/24530afe86c668f02cd30aab15329f18.png)我希望能够选择一个带有数值的下拉列表并使用所选值来确定需要添加到实体表中的对象列表的大小。我无法获得初始化列表的计数。此外，每次用户选择不同的项目时，我都需要刷新部分视图。假设如果用户一开始选择 3，partial 包含 3 个 div 块，但后来将选择更改为 1，partial 应该只有一个块。我一直在尝试不同的方法，但没有运气。任何帮助将不胜感激。

到目前为止，这是我一直在做的事情：用于 ajax 调用的 jQuery：

```
$(function () {
    $('#drpSelect').change(function () {
        $.ajax({
            type: 'GET',
            url: '/EduKate/_Test',
            data: null,
            success: function (data) {
                $("#result").append(data);                    
            }
        });
        return false;    
    });
}); 
```

落下：

```
 <select id="drpSelect">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select> 
```

Create.cshtml 文件中的目标 div

```
 //some other html helpers for other properties ...
//where I want the partial
        <div id="result"></div> 
```

部分视图：_Course.cshtml

```
@model List<EduKate.DataModel.Course>

@foreach (var item in Model)
{
    <div class="course">
    @Html.LabelFor(model => item.CourseID)
    @Html.TextBoxFor(model => item.CourseID)

    @Html.LabelFor(model => item.Credits)
    @Html.TextBoxFor(model => item.Credits)

    @Html.LabelFor(model => item.Title)
    @Html.TextBoxFor(model => item.Title)
    </div>
} 
```

ActionResult 在课程视图上呈现部分视图：

```
 public ActionResult _Test(int value)
    {            
        EdukateViewModel edukateViewModel = new EdukateViewModel();
        //
        for(int i = 0; i < value; i++)
        {
            Course course = new Course();
            edukateViewModel.CourseList.Add(course);
        }
        return PartialView("_Course", edukateViewModel.CourseList);
    } 
```

Create Action 的 Get 和 Post 方法

```
 public ActionResult Create()
    {
        return View();
    } 

    [HttpPost]
    public ActionResult Create(EdukateViewModel edukateViewModel)
    {
        try
        {
            //List<course> property in viewmodel is always null
            edukateRepository.Insert(edukateViewModel);
            return RedirectToAction("Index");
        }
        catch(Exception exp)
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:22:31.143

div 没有更新的原因是事件边界丢失了，因为我认为你替换了包括下拉代码在内的整个 div。使用 jquery `on' api 来绑定事件

```
$(function () {
    $(document).on('change','#drpSelect',function () {
        $.ajax({
            type: 'GET',
            url: '/EduKate/_Test',
            data: null,
            success: function (data) {
                $("#result").append(data);                    
            }
        });
        return false;    
    });
}); 
```

# ruby - 参考 gem 的安装文件夹

> ID：11643103
> 
> 赞同：0
> 
> 时间：2012-07-25T05:10:43.423
> 
> 标签：ruby, gem, bundler

我想将 ca 证书与我的 gem 捆绑在一起，以避免 ssh 连接问题。我将如何引用我的 gem 的安装文件夹。换句话说，我想做：

```
ENV['SSL_FILE'] = "#{install_dir}/ssl/cacert.pem" 
```

我将如何获得 install_dir？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:04:33.357

`Gem.dir`

从命令行，此命令将打印出您计算机上环境的选项：

```
$ gem environment 
```

这是源代码：[Gem::Commands::EnvironmentCommand](https://github.com/rubygems/rubygems/blob/master/lib/rubygems/commands/environment_command.rb)检查方法下的其余变量`#execute`。如果您需要使用较旧的红宝石，请`require rubygems`明确访问该命令。

# c# - 更新 Shopify 变体返回 400 错误请求

> ID：11643110
> 
> 赞同：1
> 
> 时间：2012-07-25T05:11:09.597
> 
> 标签：c#, shopify

我正在尝试使用以下 json 和 c# 代码更新 shopify 中现有变体的库存：

```
 var p = new
    {
            id = "220994352",
            inventory_quantity = "0"
    };

    string url = "https://somestore.myshopify.com/admin/variants/220994352.json";

    ShopifyAuthorizationState authState = (ShopifyAuthorizationState)HttpContext.Current.Session["shopify_auth_state"];
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.Method = "PUT";
    request.ContentType = "application/json";
    request.Headers.Add("X-Shopify-Access-Token", authState.AccessToken);

    var serializer = new JavaScriptSerializer();
    var json = serializer.Serialize(p);
    json = "{ variant: " + json + "}";

    if (!String.IsNullOrEmpty(json))
    {
        using (var ms = new MemoryStream())
        {
            using (var writer = new StreamWriter(request.GetRequestStream()))
            {
                writer.Write(json);
                writer.Close();
            }
        }
    }

    string result = "";
    try
    {
        var response = (HttpWebResponse)request.GetResponse();
        using (Stream stream = response.GetResponseStream())
        {
            StreamReader sr = new StreamReader(stream);
            result = sr.ReadToEnd();
            sr.Close();
        }
    }
    catch (WebException ex)
    {
        WebHeaderCollection webHeaderCollection = ex.Response.Headers;
        foreach (var header in ex.Response.Headers.AllKeys)
        {
            Console.WriteLine(webHeaderCollection[header]);
        }
    } 
```

但是，每次我运行它时，我都会收到一个 400 Bad 请求，但没有关于错误的详细信息。我可以毫无问题地阅读库存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:12:55.757

您确定在授权应用程序时设置了您的范围权限以便对产品具有写入权限吗？

您能否发布一个指向原始 http 响应的链接以显示返回的确切内容，包括标题以查看那里是否有更多详细信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:01:52.537

400 bad request 通常意味着正在发送的数据是无效的。并且查看您的 json 可能会对您有所帮助。尝试在您的 json 字符串中为变量加上引号。

# android - 如何过滤要从 google play 下载到特定设备的 android 应用程序？

> ID：11643112
> 
> 赞同：0
> 
> 时间：2012-07-25T05:11:10.863
> 
> 标签：android

我必须在我的 android 应用程序中配置过滤器，因此它应该只对特定的设备集（例如 HTC、三星标签等）可见，假设其他配置（如 minsdk 版本等）与这些设备集兼容，仅我必须添加一个额外的过滤器才能使该应用程序对某些设备可见。

所以场景是：

将应用程序上传到 Google play 后，当用户尝试搜索应用程序时，它应该只对拥有 HTC、三星标签的用户可见，否则它不应该是可见的，这意味着如果用户使用任何其他标签或手机搜索这个应用程序，它不应该可见下载。

谁能知道如何实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:31:47.160

在这一点上，不要在代码中认为它是可能的。

但是，当您将应用程序上传到 Google Play 时，您可以删除您选择的任何和所有设备。因此，只需确保过滤器将允许您的设备，而不必担心还有什么可以使用它。

当您将其上传到 Android 开发者控制台时，您将看到如下内容： ![ADC](../Images/3f968b12a85a50ec108f2b06f11bbdd6.png)

然后点击“显示设备”

![在此处输入图像描述](../Images/647ba3397a0f81ee7b06942f6c647af4.png)

然后只排除你不想要的那些。

# c++ - 函数没有易失性。怎么修？

> ID：11643116
> 
> 赞同：4
> 
> 时间：2012-07-25T05:11:23.873
> 
> 标签：c++, c, visual-c++, volatile

我在 2 个线程之间共享一个变量。我使用 volatile 来避免优化。

但是，它显示了 strcpy 中没有 volatile 的错误。（如下）

如何正确修复此错误？

有人告诉我要键入 volatile。但是如果我抛弃了 volatile，那么我就失去了 volatile 的目的......最终可能会因为优化而出现运行时错误......不是吗？

非常感谢。

（代码可以直接编译）

* * *

```
CRITICAL_SECTION CriticalSection;

HANDLE hEvent;

void __cdecl MyThread(void* name)

{

char serName[256];

volatile char* vptr = (char*) name;

EnterCriticalSection(&CriticalSection);

strcpy(serName, vptr); // error : cannot convert 'volatile'

// use (and not modify) name…

LeaveCriticalSection(&CriticalSection);

SetEvent (hEvent) ;

}

void main ()

{

char name[256] = "abcde";

hEvent = CreateEvent (NULL, false, false, NULL) ;

if (!InitializeCriticalSectionAndSpinCount(&CriticalSection, 0x80000400) )

return;

_beginthread (MyThread, 0, name) ;

EnterCriticalSection(&CriticalSection);

// access name…

LeaveCriticalSection(&CriticalSection);

WaitForSingleObject (hEvent, INFINITE) ;

DeleteCriticalSection(&CriticalSection);

CloseHandle (hEvent);

system("pause");

} 
```

* * *

另一方面，我可以编写自己的 strcpy 来支持 volatile。但这很奇怪。因为如果是这样，那么我每次使用 volatile 时都必须编写自己的 I/O 流（或那些复杂的函数）？

再次感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T06:05:48.443

显然，您对“易失性”的含义没有清楚的了解。含义或多或少是“嘿编译器，请注意其他人将更改此变量，因此您不能假设除非您的代码将其写入，否则该值将保持不变。此外，其他人可能正在监视此变量，因此当我写信给这个变量请不要对无关紧要的假设做奇怪的事情，因为对于那些观看它的其他人来说，所以只要写下我想让你写的东西，以及当我告诉你这样做的时候。”

什么时候使用“volatile”很重要？这是一个常见的例子：

```
volatile int stopflag; // flag will be set by an interrupt handler

void mainloop()
{
    stopflag = 0;
    while (!stopflag)
    {
       ...
    }
} 
```

如果三个点中的代码从不接触`stopflag`并且从不调用具有未知实现的函数，那么编译器可能会避免读取循环中的标志，因为查看代码本身似乎不需要读取变量根本......只是设置并永远循环。

另一种情况可能是：

```
extern volatile unsigned char outloc; // monitored by hardware

...
// emit a wave pulse
for (int x=0; x<256; x++)
    outloc = x; 
```

在没有`volatile`编译器的情况下，可能只想写入`0xFF`该位置而不是写入所有中间值。

请注意，`volatile`在现代硬件上使用线程同步是不够的。在今天的计算机中，通常 CPU 是多核的，因此写入和读取不再是原子操作。虽然在过去（在单核 CPU 上），实际上通常可以使用 volatile 变量进行线程同步，但现在这是错误的。

您似乎确实有兴趣告诉其他人确实正在读取和写入**缓冲区**，但在这种情况下，缓冲区的地址是公共的，因此在任何函数调用时（除非它是内联的或具有已知的实现代码）编译器必须假设缓冲区内容可能已更改或将被未知代码读取。

我敢打赌，线程同步原语是以正确的方式声明的，以确保在您的情况下也是如此（即使`strcpy`是内联的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:35:16.733

我可以理解，在某些地方（在使用线程时）我们不希望优化发生，为此我们使用“volatile”关键字。

参考[MSDN](http://msdn.microsoft.com/en-us/library/145yc477%28v=vs.71%29.aspx) _

要将指针指向的对象声明为 const 或 volatile，请使用以下形式的声明：

```
const    char *cpch;
volatile char *vpch; 
```

要将指针的值（即存储在指针中的实际地址）声明为 const 或 volatile，请使用以下形式的声明：

```
char * const    pchc;
char * volatile pchv; 
```

因此，您可以使用（根据您的需要）

```
"strcpy(serName, (char *)vptr);"  or " char*  volatile vptr = (char*) name;" 
```

以上是通过抑制优化运行代码的解决方案，也不会造成任何错误。现在您将不需要自己实现完整的 I/O :)

这对我有用。希望对你也有帮助...

# php - 根据语言验证 utf8 字符，php

> ID：11643118
> 
> 赞同：0
> 
> 时间：2012-07-25T05:11:29.130
> 
> 标签：php, zend-framework, unicode, utf-8

我想根据之前选择的语言验证 utf8 字符。有什么办法吗？？？意思是，如果我选择印地语，那么我想限制用户输入其他语言（如西班牙语、中文等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:19:48.423

您可以检查这些字符是否都来自某些 Unicode 块。我不知道印地语，但在维基百科页面上，它通常是用[梵文](http://en.wikipedia.org/wiki/Devanagari)字母写的，所以这可能适用于这种特殊情况：

```
// permit devanagari, white space, and numbers 
if (preg_match('/^[\p{Devanagari}\p{Z}\p{N}]+$/u', $text) {
    echo 'all well';
} else {
    echo 'illegal characters';
} 
```

[您可以在PCRE 文档](http://www.php.net/manual/en/regexp.reference.unicode.php)中查找可以使用的块列表。但是，这种方法不会阻止某人在土耳其论坛上发布英语，因为这些语言是用同一块中的字符编写的。

# assembly - 学习 MIPS 组装

> ID：11643119
> 
> 赞同：1
> 
> 时间：2012-07-25T05:11:34.743
> 
> 标签：assembly, mips

我正在研究汇编和 MIPS 指令集。这是我正在学习的第一个基本程序：

```
.text
    .globl main
main:
    li  $t0, -10 #  $t0 = -10   ("load immediate")
    li  $t1, -31 #  $t1 = -31   ("load immediate")
    li  $t2, -10 #  $t2 = -10   ("load immediate")
    li  $t3, -31 #  $t3 = -31   ("load immediate")

    #swap

    xor $t0, $t0, $t1
    xor $t1, $t0, $t1
    xor $t0, $t0, $t1

    addu    $t2, $t2, $t3
    subu    $t3, $t2, $t3
    subu    $t2, $t2, $t3

    li  $v0, 10
    syscall 
```

现在我想了解每条指令的作用，因为我可以在我的模拟器中运行这个程序，这让我更加想知道这个程序以及它的作用以及我如何改变它来学习更多的汇编。首先，您能否告诉我如何评论 xor、addu 和 subu 部分，以及 syscall 是什么意思以及第一部分 .text 和 .blobl main 是什么意思？

我是否让这比实际上更困难？您也可以向我提供 MIPS 汇编编程的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:18:19.173

我将其分解：

`li`是所谓的伪指令，汇编器会将其拆分为`lui`(Load Upper Immediate) 和`ori`(OR Immediate)，从 2 个 16 位立即数构造一个 32 位值。虽然`lw`可以使用，但它通常没有任何好处并且会破坏缓存线。

将`xor`只计算 op1 = op2 XOR op3。在您的特殊情况下，它用于在 $t0 和 $t1 上进行[寄存器交换。](http://en.wikipedia.org/wiki/XOR_swap_algorithm)

`addu`并且`subu`只会添加/减去 op2 和 op3 并将结果存储到 op1 中。同样，您的代码中显示的内容将交换两个寄存器 $t2 和 $t3。

`syscall`将陷入您的操作系统并执行某些特定功能。函数号将存储在 $v0 中，因此您的示例运行函数号 10，这对于“退出”来说似乎很常见。

# iphone - CCScale不适用于精灵

> ID：11643123
> 
> 赞同：0
> 
> 时间：2012-07-25T05:11:52.610
> 
> 标签：iphone, ios, cocos2d-iphone

我想使用 CCScaleTo 缩放我的精灵。

这是我的代码：

```
CCSprite *spritePauseScreen =[CCSprite spriteWithFile:@"resumeGameScreenBG.png"] ;
spritePauseScreen.position= ccp(winSize.width/2,winSize.height/2);
spritePauseScreen.scale=0.5f;
[spritePauseScreen runAction:[CCScaleTo actionWithDuration:0.6 scaleX:1.0f scaleY:1.0f]];
[self addChild:spritePauseScreen z:7]; 
```

它不工作。精灵仅以 0.5 的比例值显示。它没有扩展到 1.0 请帮助？...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:26:38.360

试试这个代码。

```
int delayTime = 0.3f;
CCSprite *each = [CCSprite spriteWithFile:@"Icon.png"];
each.position = ccp(160,240);
each.scaleX = 0.0f;
each.scaleY = 0.0f;
CCAction *action = [CCSequence actions:
          [CCDelayTime actionWithDuration: delayTime],
          [CCScaleTo actionWithDuration:0.5F scale:1.0],nil];
delayTime += 0.2f;
[each runAction: action];
[self addChild:each]; 
```

# php - php 超过 5 个项目创建新的 div

> ID：11643126
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:12:20.550
> 
> 标签：php

我正在使用 PHP 和 MYSQL。这是我的代码

```
 <?php 

    $result = mysql_query("SELECT * FROM `item` order by `ID` limit 0, 5");
    $rows = mysql_num_rows ($result); 
    $item = 0 ; 

     while ($item < $rows){

        $title = mysql_result($result,$list,"name");
        $id = mysql_result($result,$list,"ID");
        echo "<div id="new"> $id . $title  </div> ";

     $item++;
    }
     ?> 
```

我的问题是，如果项目超过 5 个（您可以看到我限制项目），是否有可能创建一个新的 div id=new 来显示其余项目？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:16:23.790

以这种方式更改`while()`循环：

```
 echo '<div>'; // Starting DIV
 while ($item < $rows){
    $title = mysql_result($result,$list,"name");
    $id = mysql_result($result,$list,"ID");
    echo "<div id="new"> $id . $title  </div> ";
    $item++;
    echo ($item % 5 == 0) ? '</div><div>' : ""; // Close and Open a New DIV
}
echo '</div>'; // Ending DIV 
```

很高兴能帮助你！:)

# php - 文本旋转排列

> ID：11643127
> 
> 赞同：0
> 
> 时间：2012-07-25T05:12:32.107
> 
> 标签：php, javascript, spinner, permutation, spinning

我想获得旋转文本的排列数：

我的文字：

```
{abc|{cde|fgh}} aaa {cde|fg}. 
```

结果应为**6 (3x2)**

我想获得无限数量的嵌套单词的排列。

我怎样才能做到这一点？我试图将文本扁平化`{abc|cde|fgh} {cde|fg}`，然后只做**3x2**，但是我如何扁平化这个文本，我有这个问题，有人可以帮助我吗？

我想在 php 或 javascript 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:30:52.707

想到的第一个解决方案是创建一个递归方法。

## 递归方法

递归方法接受一个字符串，并返回排列它的方式数。

**基本情况**：

基本情况：如果字符串中没有'{'和'}'，则返回'|'的个数 字符串中的符号加 1。

**否则**：

找到第一个'{'的位置，称之为Pos1。

找到它对应的'}'，称之为Pos2。

现在形成 3 个子串 [0 到 Pos1)、( Pos1 到 Pos2 )、(Pos2 到 End]

请注意，Pos1 和 Pos2 不包含在子字符串中，因此我们丢失了两个大括号。

返回每个子字符串的递归乘积/总和。

下面是演示上述算法的 C# 代码：

```
static void Main(string[] args)
{

    string test1 ="{abc|{cde|fgh}} aaa {cde|fg}.";

    int numWays = getNumWaysRecursive(test1);

    Console.WriteLine("NumWays: " + numWays);
    Console.ReadLine();
}

private static int getNumWaysRecursive( string s )
{
    if (s == null) return 1;
    if (s == "") return 1;

    int firstBracePos = s.IndexOf('{');

    if (firstBracePos == -1) //Base case, no braces.
    {
        int pipeCount = 0;

        for (int i = 1; i < s.Length - 1; i++)
        {
            if (s[i] == '|')
            {
                if (pipeCount == -1)
                {
                    pipeCount = 0;
                }
                pipeCount++;
            }
        }

        return pipeCount + 1;
    }

    //Non-Base case:
    // find the first Left Brace
    // find the right brace it corresponds with

    int numOfNests = 0;
    int pos = firstBracePos + 1;

    while (pos < s.Length)
    {
        if (s[pos] == '}')
        {
            numOfNests--;
            if (numOfNests == -1)
            {
                break;
            }
        }

        else if (s[pos] == '{')
        {
            numOfNests++;
        }

        pos++;
    }

    //Get rid of those braces, and recurse on the three parts:
    // 1\. the part before the braces.
    // 2\. the part between the braces.
    // 3\. the part after the braces.

    string firstPart; 
    if (firstBracePos == 0)
    {
        firstPart = "";
    }
    else
    {
        firstPart = s.Substring(0, firstBracePos);
    }

    string secondPart = s.Substring(firstBracePos + 1, pos - firstBracePos - 1);
    string lastPart = s.Substring(pos + 1 );

    int sum1 = getNumWaysRecursive(firstPart); 
    int sum2 = getNumWaysRecursive(secondPart);
    int sum3 = getNumWaysRecursive(lastPart);

    bool strng1HasPipes = (firstPart.IndexOf('|') != -1);

    int sum = 1;

    if ( strng1HasPipes )
    {
        sum += sum1 - 1;
        sum += sum2;
    }
    else
    {
        sum *= sum2;
    }

    if (sum3 == 0)
    {
        ;
    }
    else
    {
        sum *= sum3;
    }

    return sum;
} 
```

不幸的是，这并不能完全反映整个情况。

它在“{abc|{cde|fgh}} aaa {cde|fg} eee | {abc | bbb }”之类的字符串上失败。

因为它不太了解倒数第二个管道符号的嵌套位置，因为它没有嵌套在任何大括号内。

所以你应该对字符串进行初始扫描，并根据 '|' 将其分解为子字符串 不在大括号内的符号，然后将这些子字符串的小计相加。

# sql - 有子句中的SQL划分问题

> ID：11643131
> 
> 赞同：0
> 
> 时间：2012-07-25T05:12:51.373
> 
> 标签：sql, oracle

当我尝试这样做时

```
select first_name from employees 
group by salary,first_name
having salary between 0 and 4800 
```

我收到了 49 条记录

当我尝试这样做时，我没有得到任何结果

```
select first_name from employees 
group by salary,first_name
having salary between 0 and (max(salary)/5) 
```

这里`select max(salary)/5 from employees fetches`：4800

这很简单，但我不知道我在做什么愚蠢的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:17:19.053

在这份声明中

```
select first_name from employees 
group by salary,first_name
having salary between 0 and (max(salary)/5) 
```

您按薪水和名字分组，这很可能只按一行分组。您实际上是在寻找介于 0 和 X/5 之间的 X，这可能不会返回任何结果。

在这份声明中

```
select max(salary)/5 from employees fetches 
```

你没有分组，所以你得到每个人的最高薪水。

我认为这

```
select first_name from employees 
WHERE salary between 0 and (SELECT max(salary) FROM employees)/5 
```

是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:20:13.747

您不能在 where 子句中使用聚合函数。

用这个：

```
select first_name from employees 
group by salary,first_name
having salary between 0 and (SELECT max(salary)/5 from employees) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:25:12.323

我会使用子查询来避免第二次传递数据：

```
select first_name
from (select first_name
            ,salary
            ,max(salary) over () max_salary
      from employees)
where salary between 0 and max_salary/5
group by salary,first_name; 
```

虽然我不知道你为什么按薪水和名字分组。

# c++ - 在头文件中添加头文件

> ID：11643134
> 
> 赞同：1
> 
> 时间：2012-07-25T05:12:55.193
> 
> 标签：c++, header

```
#ifndef LISTTEST_H
#define LISTTEST_H
#include <vector>
#include <string>

template <class T>
class ListTest {
    public:
        vector<T>* encrypt(vector<T> *list, int* key);
        void setkeyLength(int keyLength);
        int getKeyLength();
    private:
        int keyLength;
};

#endif  /* LISTTEST_H */ 
```

> 我在自己的头文件中包含了向量和字符串头文件，但是在“vector* encrypt(vector *list, int* key);”中 编译器给出向量未定义的错误我在这里做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:14:14.310

您需要限定`vector`using `std::vector`，因为它是`std`命名空间的一部分。您还应该考虑删除`<string>`，因为您不在标题中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:14:17.300

它们包含在`std`命名空间中：

```
std::vector<T>* encrypt(std::vector<T> *list, int* key); 
```

# c# - 三元？运算符与 c# 中的传统 If-else 运算符对比

> ID：11643137
> 
> 赞同：42
> 
> 时间：2012-07-25T05:12:58.393
> 
> 标签：c#, if-statement, ternary-operator

> **可能重复：**
> [条件运算符慢吗？](https://stackoverflow.com/questions/2259741/is-the-conditional-operator-slow)

我是`?`C# 中运算符的大量用户。然而，我的项目经理经常警告我，与大型应用程序中`?`的语句相比，使用运算符可能会花费一些性能。`If-Else`所以我被告知避免使用它。但是，我喜欢使用它，因为它简洁并且可以保持代码简洁。

使用`?`运算符时是否存在这样的性能开销？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-25T05:36:44.597

我运行了 1 亿个三元运算符和 1 亿个 If-Else 语句，并记录了每个语句的性能。这是代码：

```
Stopwatch s = new Stopwatch();
// System.Diagnostics Stopwatch
int test = 0;
s.Start();
for(int a = 0; a < 100000000; a++)
    test = a % 50 == 0 ? 1 : 2;
s.Stop();

s.Restart();
for(int b = 0; b < 100000000; b++)
{
    if(b % 50 == 0)
        test = 1;
    else
        test = 2; 
}
s.Stop(); 
```

这是结果（在 Intel Atom 1.66ghz 和 1gb 内存上运行，我知道，这很糟糕）：

*   三元运算符：每个运算符 5986 毫秒或 0.00000005986 秒。

*   If-Else：每条语句 5667 毫秒或 0.00000005667 秒。

别忘了我跑了 1 亿次，我认为两者之间的 0.00000000319 秒差异并不重要。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-25T05:30:44.470

不。

使用使您的代码可读的东西。如果`if`语句这样做，请使用它们。如果三元运算符这样做，请使用它们。

无论如何，两者很可能都将编译为相同的 IL。

无论如何，会使您的应用程序变慢的事情可能是数据库或网络或硬盘驱动器......除了您是否使用`if`语句或三元表达式之外的任何东西。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-25T05:34:12.517

没有理由期望性能上有任何差异。

在我看来，只有在所有三个操作数都非常简洁且易于阅读的情况下，才应该使用三元运算符。否则我认为它有可能使代码更难阅读。

我认为很多人误用了这个运算符，把太多的逻辑塞进一长行代码中。除非整行少于 80 个字符，否则我个人不会使用它。

好的：

`return isFunky ? funkyValue : null;`

坏的：

```
return (thisThing == thatThing && (anotherThing != null || ! IsThisTrue())) ? someThing.GetThis().GetThat() : yetAnotherThing.GetBlah().GetFoo(); 
```

我见过人们做的比上面的差很多。我认为他们应该放弃他们的三元特权！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-25T05:35:56.050

三元运算很难读懂。如果使用嵌套条件，理解三元将成为一种开销。如果条件数量更多，请尽量避免使用三元。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-25T05:32:59.357

从我个人的角度来看，我没有看到三元运算符和 if 语句之间的任何性能差异。许多编程语言都支持它，并且三元运算符对开发人员更友好，而传统的 If-else 运算符在一般情况下是可以理解的。

[http://en.wikipedia.org/wiki/%3F%3a](http://en.wikipedia.org/wiki/%3F%3a)

# gnuplot - 使用 GNUPLOT 表示流数据

> ID：11643140
> 
> 赞同：0
> 
> 时间：2012-07-25T05:13:13.760
> 
> 标签：gnuplot

我想使用 gnuplot 表示流数据。我尝试使用“replot”、“pause”和“reread”等命令进行绘图。但是当数据集如此大且相似时，它太慢太奇怪了。有没有其他方法来绘制流数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:30:31.143

[feedgnuplot](https://github.com/dkogan/feedgnuplot)是一个围绕 Gnuplot 的 Perl 包装脚本，它完全按照您使用`replot`. 它具有带选项的实时流模式`--stream`。该文档有一个示例，其中绘制了网络接口带宽使用的实时图表。如果 feedgnuplot 不直接支持您需要的某些选项，您可以将选项传递给 gnuplot，因此支持所有绘图样式、轴设置等。

# php - DOMDocument / DOMXPath

> ID：11643143
> 
> 赞同：0
> 
> 时间：2012-07-25T05:13:25.200
> 
> 标签：php, css, regex, phpquery

我正在使用 DOMDocument / DOMXPath 尝试使 CSS 内联。除了我传递给它的 HTML 说它不是有效的 XML 之外，它会完美地工作。

如何设置这些功能以忽略未知标签？

无论如何，我可以让这些功能不那么挑剔吗？我使用 phpQuery 类来操作和输出所有内容。但是当我将它传递给 inlinify 的东西时，它会中断。

其他基于 web 的 inlinify 应用程序对我的输出 html 没有问题。

还有..有人知道非 DOMDocument / DOMXPath 方法吗？所有 CSS 都位于一对样式标签之间。也许花哨的正则表达式或 phpQuery 本身或两者兼而有之？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:16:12.837

公平地说，这并没有错。如果你想加载 HTML，那么你应该使用`DOMDocument::loadHTML*()`.

# php - Wordpress：Jquery .html 函数现在在 PHP foreach 循环中执行

> ID：11643146
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:13:40.953
> 
> 标签：php, javascript, jquery, wordpress

实际上，我想在选择一个下拉列表时显示一个动态下拉列表。这是我的html：

```
echo  '<select onchange="showcertificate(this.value);" value="'. $certificatelist .'" name=\'certificatelist\'>'; 
```

它正在调用函数 showcertificate，即：

```
<script type="text/javascript">
  function showcertificate(vendorid)
  {
      var vendorid = vendorid;
      var xmlhttp = new window.XMLHttpRequest();
      xmlhttp.open("GET","admin-ajax.php?action=wpt_exam_certificatelist&u="+vendorid,true);
    xmlhttp.send();
    <?php
      if(isset($_GET["u"]))
      {
     $vendorid = $_GET['u'];
      }
      $certquery = $wpdb->get_results("SELECT * FROM wp_posts INNER JOIN wp_postmeta ON wp_posts.ID=wp_postmeta.post_id WHERE wp_posts.post_status='publish' AND wp_posts.post_type='certificate' AND wp_postmeta.meta_value='$vendorid'");
     foreach($certquery as $c)
        { ?>
    $("#cert").html('<option  name=\'certificatelist\'><?php echo $c->post_title; ?></option>');
      <?php }
      ?> 
  }
  </script> 
```

问题是 .html 函数没有在 foreach 循环内执行。如果我删除 foreach 循环，它工作正常。我已经在里面浪费了一天。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:21:57.113

首先，你画错了`option`它没有属性`name`它只有`value`属性。第二个 $.html - 重写整个内部 html 代码，你为每个 $().html 重新编写 - 你只得到最后一次更改。

```
var options = '';
<?php foreach($certquery as $c) echo "options += '<option>{$c->post_title}</option>"; ?>
$("#cert").html(options); 
```

# javascript - Backbone 视图能否在单个 html 元素上具有两个不同的事件

> ID：11643148
> 
> 赞同：1
> 
> 时间：2012-07-25T05:13:53.743
> 
> 标签：javascript, events, backbone.js

在我的 Backbone 视图中，我可以将多个事件绑定到同一个元素吗？

```
events:{
      'click .app'    : 'appindex',
      'dblclick .app' : 'launchapp'
},

appindex: function() {
    alert(1);
},

launchapp: function() {
    alert(2);
} 
```

双击后，该`launchapp`方法似乎永远不会触发。有人可以帮我理解为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:22:22.060

您的代码片段似乎很好，所以我认为问题在于`appindex`单击后会显示一个警告框并且不允许您进行双击。尝试用调用来替换它`console.log(...)`。如果这仍然无济于事，请尝试创建一个简单的 jsFiddle 供其他人测试。

# windows-7 - 拥有没有默认容器的智能卡是否有效？

> ID：11643155
> 
> 赞同：0
> 
> 时间：2012-07-25T05:14:29.593
> 
> 标签：windows-7, login, smartcard

这个问题是关于托管用于登录 Windows 7 或 Windows Server 2008 R2 的智能卡登录证书。我读过，在 2000/XP 时间范围内，智能卡上可能只有一个这样的证书，并且必须在默认容器中。在 Windows 7 中，我读到卡上可以存在多个智能卡登录证书，我想知道其中一个是否仍需要在默认容器中？我还想知道在 Windows 7 上是否需要在智能卡上具有默认容器？

非常感谢，尤金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:00:17.210

智能卡始终具有默认容器。如果它被删除，则 CSP 会将另一个容器标记为默认容器。在这里阅读[更多](http://technet.microsoft.com/en-us/library/ff404300%28v=ws.10%29)

# c++ - C++ 中的静态对象

> ID：11643156
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:14:30.653
> 
> 标签：c++, object

我有`Mtx`在矩阵之间做一些计算

```
Mtx M1(rows1,cols1,1); //instantiate data members and fill the matrix with 1s
Mtx M2(rows2,cols2,2); //instantiate data members and fill the matrix with 2s

Mtx M3(rows3,cols3,0); //instantiate data members and fill the matrix with 0s

M3 += M1; //+= is overloaded - First M3
M3 -= M2; //-= is overloaded - Second M3 
```

第一个`M3`用`M3`零填充并将其添加到`M1`，答案将分配给`M3`. 我这里没有问题。

问题出在第二个`M3`！它不会减去`M3`用零填充的值，而是使用前一个操作的结果并将其从`M2`.

我怎样才能使`M3`静态保持其价值？它与静态对象有关吗？我希望你明白我的意思！

感谢您的帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:16:31.597

这是因为您使用的是**`+=`operator**。您正在为左侧的对象**分配** *新值。*

当您使用时，`+=`您正在更改 M3 的值。

你想要的是这样的：

```
Mtx M4 = M3 + M1;
Mtx M5 = M3 - M2; 
```

甚至更好：

```
const static Mtx ZERO_MTX(rows3,cols3,0);
Mtx M4 = ZERO_MTX + M1;
Mtx M5 = ZERO_MTX - M2; 
```

# search - solr 搜索多个类别和标签

> ID：11643163
> 
> 赞同：4
> 
> 时间：2012-07-25T05:15:43.360
> 
> 标签：search, solr, schema

我想将 solr 用于以下场景：

每张照片可能有多组。每组将有 1 个“类别”和 1 个“标签集”：

例如照片A Set 1：“类别”=一件（单件）；“标签集” = 修身、复古、红色（多件）

例如照片A Set 2：“类别”=凉鞋（单件）；“标签集” = 平台，红色（多项目）

我们希望能够根据上述类别/标签搜索照片：例如“厚底凉鞋”、“红色单件”等

谁能指出我们应该如何设置必要的 schema.xml 文件？（在我们的案例中，我们不需要显示分面类别）

（solr 版本 1.4.1）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:32:28.587

您应该在架构中添加两个字段。两者都将是文本字段。您的类别很简单，但您需要使用多值字段。请参阅以下 SO 帖子 - 它与您正在做的事情非常相关：

[Solr 中“多值”字段类型的用途是什么？](https://stackoverflow.com/questions/5800762/what-is-the-use-of-multivalued-field-type-in-solr)

```
<field name="category" stored="true" indexed="true" type="text_general" /> 
<field name="tags" stored="true" indexed="true" type="text_general" multiValued="true"/> 
```

对于您的搜索，您可以添加搜索处理程序以查看和提升特定字段，或者您可以将两个字段复制到第三个字段并在此第三个字段中的组合值上进行搜索。例如

```
<field name="text" stored="true" indexed="true" type="text_general" multiValued="true"/>    
<copyField dest="text" source="category"/>
<copyField dest="text" source="tags"/> 
```

# ruby-on-rails - Rails - 来自组件库和 STI 的组件

> ID：11643167
> 
> 赞同：0
> 
> 时间：2012-07-25T05:16:05.040
> 
> 标签：ruby-on-rails, activerecord, sti

我有一个正在开发的 Rails 应用程序。我在数据库结构上遇到了一些困难。我有`Users`。这些用户有`Projects`，项目有组件。我希望用户能够从一些现有组件中进行选择，然后编辑这些值。我希望他们选择的组件来自数据库。我希望生成的组件成为一个新组件。为了让生活更混乱，有不同类型的组件，我想把这些类干成类似的东西

```
Component < ActiveRecord::Base
  # component stuff
end

SubComponent < Component
  # sub-component stuff
end 
```

然后在 1 个控制器和 1 个视图中，我希望用户能够处理所有组件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:38:18.940

好吧，由于这个问题有点含糊，我将只发布我想出的东西，所以如果人们偶然发现这个问题，这里至少有一些有用的东西。

这是我为说明 STI 和嵌套资源的某些方面而制作的示例应用程序。 [http://rails-example-association.herokuapp.com](http://rails-example-association.herokuapp.com)

网站上的 github 上有一个指向源代码的链接。

# ruby - 在 Sinatra 中，我可以在路径和视图中使用变量吗？

> ID：11643174
> 
> 赞同：3
> 
> 时间：2012-07-25T05:16:44.723
> 
> 标签：ruby, sinatra, haml

所以我正在学习使用 Sinatra（非常基础）并且我了解以下基本代码：

```
get '/derp' do
    haml :derp
end 
```

我很快开始思考：如果我有十几页，我是否必须为每个 url 写一个 get/do 语句，如上所述？必须有一种方法可以使用变量来执行以下操作：

```
get '/$var' do
    haml :$var
end 
```

`$var`我输入的内容在哪里。基本上，如果我`/foo`在地址栏中输入，我希望 Sinatra 查找一个名为`foo.haml`并使用它的视图，或者显示 404。对于`/bar`、等也是如此`/derp`。

那可能吗？我是否误解了它应该如何工作的一些基本方面 - 我是否应该在继续学习时忽略这个问题并稍后再回来？

这似乎是一件非常基本的简单事情，可以让生活更轻松，我无法想象人们会手动声明每一页......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:31:14.330

你可以这样做：

```
get '/:allroutes' do
  haml param[:allroutes].to_sym
end 
```

这将显示 :allroutes 的haml模板。例如，如果你点击`localhost/test`它会在下面显示模板`test`等等。更简单的版本是使用 sinatra 提供的*match all*路由：

```
get '/*/test' do
  # The * value can be accessed by using params[:splat]
  # assuming you accessed the address localhost/foo/test, the values would be
  # params[:splat]  # => ['foo']
  haml params[:splat][0].to_sym # This displays the splat.haml template.
end

get '/*/test/*/notest' do
  # assuming you accessed the address localhost/foo/test/bar/notest
  # params[:splat]  # => ['foo', 'bar']
  haml params[:splat][0].to_sym # etc etc...
end

# And now, all you need to do inside the blocks is to convert the variables into 
# a symbol and pass in to haml to get that template. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T15:15:22.917

除了 Kashyap 的出色回答。

如果您想命名您的参数并且不必将它们从`params`散列中取出，您可以：

```
get '/*/test/*/notest' do |first, second|
  # assuming you accessed the address localhost/foo/test/bar/notest
  # first => 'foo'
  # second => 'bar'
  haml first.to_sym # etc etc
end 
```

# php - Silverstripe Form Renderwith 不显示表单或任何样式

> ID：11643177
> 
> 赞同：0
> 
> 时间：2012-07-25T05:16:52.027
> 
> 标签：php, silverstripe

我正在尝试使用以下模板呈现表单：

```
function FacebookForm($fbFields) {

        $actions = new FieldSet(
            new FormAction('doFaceBookForm', 'Register')
        );

        $memberfields = singleton('XEUser')->getMemberFormFields();

        $fields = new FieldSet();
        $reqFields = array();
        foreach($fbFields as $key => $value){
            switch($value){
                case 'Gender':
                    $fields->push($memberfields->fieldByName('Gender'));
                    $reqFields[] = 'Gender';
                    break;
                case 'DateOfBirth':
                    $fields->push($memberfields->fieldByName('DateOfBirth'));
                    $reqFields[] = 'DateOfBirth';
                    break;
            }
        }
        $validator = new RequiredFields($reqFields);

        $form = new Form($this, 'FaceBookForm', $fields, $actions,$validator);
        $form->disableSecurityToken();

        return $form->renderWith(array('FacebookController','Page'));
        //return $form;

    } 
```

当我只是`return $form`出现我的表单但在默认的 contentController.ss 中时，我创建了一个新模板并添加了`return $form->renderWith(array('FacebookController','Page'));`. 当我这样做时，我得到了应该在页面中的所有内容，但根本没有应用任何样式，甚至没有出现表单。这是我的 FacebookController 模板：

```
<div id="left">

    <h2>Thankyou for signing up with your Facebook account</h2>
    <p>The following details could not be obtained from your Facebook account, please enter them now.</p>
    $form
</div>

<div id="right">

</div> 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:28:36.040

尝试在模板中使用方法的名称：

`$FacebookForm`

或者，您可以继承 Form 类并使用自定义`forTemplate()`方法。更多信息如下。

看：

*   [http://doc.silverstripe.org/framework/en/topics/forms](http://doc.silverstripe.org/framework/en/topics/forms)
*   [http://doc.silverstripe.org/framework/en/tutorials/3-forms](http://doc.silverstripe.org/framework/en/tutorials/3-forms)

# ios - UIImageView 动画预加载

> ID：11643182
> 
> 赞同：1
> 
> 时间：2012-07-25T05:17:50.327
> 
> 标签：ios, animation, uiimageview, delay, preload

几天来，我一直在努力寻找最有效/最高效的解决方案，将一组图像加载到 .animationImages 属性中，并能够即时更改该数组。这是场景： - 我有一个 UIImageView - 根据用户输入（手机移动、陀螺仪），我将加载一组特定的图像以进行动画处理。- 在用户输入（触摸）时播放加载的动画。

现在，图像数组使用“NSThread detachNewThreadSelector”加载到不同的线程上，该线程使用 initWithData 从 gyroHandler 上运行的块调用（仅在某些情况下）。其他启动方法完全失败。

现在的问题是，当我第一次触摸（因为当前动画已经加载）并触发动画时，整个事情都会冻结。一秒钟，然后播放动画。如果我再次触摸，它会成功播放动画，没有延迟/冻结。

现在我在某处阅读以在后台制作动画......我尝试使用：

```
[imgAnimationKey performSelectorInBackground:@selector(startAnimating) withObject:nil]; 
```

但结果是一样的。

我的阵列有 19 个图像，很可能总是有相同的。问题是我可能有更多 5+ 可以播放的动画，这就是我没有多个 UIImageViews 的原因。

有人知道预加载图像并避免第一次播放延迟的方法吗？或者我可以让动画在不同的线程中运行并避免这种效果（我可能做错了）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:46:13.817

You could make a category for the UIImage class for preloading your image in a background thread before you provide it to the image property of your UIImageView:

**h:**

```
#import <Foundation/Foundation.h>

@interface UIImage (preloadedImage)

- (UIImage *) preloadedImage;

@end 
```

**m:**

```
#import "UIImage+preloadedImage.h"

@implementation UIImage (preloadedImage)

- (UIImage *) preloadedImage {
    CGImageRef image = self.CGImage;

    // make a bitmap context of a suitable size to draw to, forcing decode
    size_t width = CGImageGetWidth(image);
    size_t height = CGImageGetHeight(image);

    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef imageContext =  CGBitmapContextCreate(NULL, width, height, 8, width * 4, colourSpace,
                                                       kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
    CGColorSpaceRelease(colourSpace);

    // draw the image to the context, release it
    CGContextDrawImage(imageContext, CGRectMake(0, 0, width, height), image);

    // now get an image ref from the context
    CGImageRef outputImage = CGBitmapContextCreateImage(imageContext);

    UIImage *cachedImage = [UIImage imageWithCGImage:outputImage];

    // clean up
    CGImageRelease(outputImage);
    CGContextRelease(imageContext);

    return cachedImage;
}

@end 
```

make the call of the preloadedImage on a background thread then and set the result on the main thread.

# php - SQL Server 子字符串循环

> ID：11643186
> 
> 赞同：0
> 
> 时间：2012-07-25T05:18:00.763
> 
> 标签：php, sql-server, substring

我需要关于子字符串的帮助。

该列`guild_data`包含`binary(4000)`.

我需要从 269 开始，每 40 和 15 长度获取每个值，直到结束。

例子：

```
SELECT DISTINCT
        CONVERT(VARCHAR,substring(guild_data, 269, 15)) AS name,
        CONVERT(VARCHAR,substring(guild_data, 309, 15)) AS name1,
        CONVERT(VARCHAR,substring(guild_data, 349, 15)) AS name2,
        CONVERT(VARCHAR,substring(guild_data, 389, 15)) AS name3,
    -- so on until it gets till the end...
FROM 
        guild_data 
```

有没有办法更有效地做到这一点？

我估计大约有 100 次重复...

```
 269, 309, 349, 389, 429, 469, 509, 549, 589, 629, 669, 709, 749, 789, 829, 869, 909, 949, 989, 1029, 1069, 1109, 1149, 1189, 1229, 1269, 1309, 1349, 1389, 1429, 1469, 1509, 1549, 1589, 1629, 1669, 1709, 1749, 1789, 1829, 1869, 1909, 1949, 1989, 2029, 2069, 2109, 2149, 2189, 2229, 2269, 2309, 2349, 2389, 2429, 2469, 2509, 2549, 2589, 2629, 2669, 2709, 2749, 2789, 2829, 2869, 2909, 2949, 2989, 3029, 3069, 3109, 3149, 3189, 3229, 3269, 3309, 3349, 3389, 3429, 3469, 3509, 3549, 3589, 3629, 3669, 3709, 3749, 3789, 3829, 3869, 3909, 3949, 3989 
```

谢谢你。

我正在寻找 T-SQL 查询。不过，我将在 PHP 脚本上使用它。

----edit---- 我们这里有这个脚本，它也可以工作。但是它太长了:)

```
CONVERT(VARCHAR,substring(guild_data, 269, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 309, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 349, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 389, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 429, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 469, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 509, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 549, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 589, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 629, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 669, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 709, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 749, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 789, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 829, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 869, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 909, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 949, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 989, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1029, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1069, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1109, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1149, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1189, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1229, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1269, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1309, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1349, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1389, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1429, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1469, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1509, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1549, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1589, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1629, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1669, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1709, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1749, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1789, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1829, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1869, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1909, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1949, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 1989, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2029, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2069, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2109, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2149, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2189, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2229, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2269, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2309, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2349, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2389, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2429, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2469, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2509, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2549, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2589, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2629, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2669, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2709, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2749, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2789, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2829, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2869, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2909, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2949, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 2989, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3029, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3069, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3109, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3149, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3189, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3229, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3269, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3309, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3349, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3389, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3429, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3469, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3509, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3549, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3589, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3629, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3669, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3709, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3749, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3789, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3829, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3869, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3909, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3949, 15)) AS glname,
CONVERT(VARCHAR,substring(guild_data, 3989, 15)) AS glname 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:24:46.743

这是 CTE 使用示例：

```
DECLARE @String VARCHAR(4000) = '111111111111111222222222222222333333333333333444444444444444555555555555555'
DECLARE @b VARBINARY(4000) = CONVERT(varbinary(4000),@string)
DECLARE @StartPos int=1
DECLARE @Len tinyint=15
;WITH C (Orig,Startpos,Value) AS (
SELECT @b,@StartPos,CONVERT(VARCHAR,SUBSTRING(@b,@StartPos,@Len))
UNION ALL
SELECT @b,C.Startpos+@Len,CONVERT(VARCHAR,SUBSTRING(@b,C.StartPos+@Len,@Len)) FROM C
WHERE C.Startpos+@Len < = LEN(@b)
)
select C.Value from c 
```

结果：

```
Value
111111111111111
222222222222222
333333333333333
444444444444444
555555555555555 
```

在您的情况下，您应该将 @StartPos 更改为 269 并将 @Len 更改为 15

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:06:23.107

另一种方法

```
declare @string varchar(4000)
set @string = '111111111111111222222222222222333333333333333444444444444444555555555555555' 
declare @startpos int=1 
declare @len tinyint=15 

declare @t table(data varchar(100))
while len(@string)>15
begin
    insert into @t
    select substring(@string,@startpos,@len)
    select @string=substring(@string,@startpos+15,len(@string))
end
    insert into @t
    select substring(@string,@startpos,@len)
select data from @t 
```

# google-chrome - Google Chrome - 开发者工具 - 网络面板

> ID：11643187
> 
> 赞同：1
> 
> 时间：2012-07-25T05:18:08.040
> 
> 标签：google-chrome

当我在 Google Chrome 开发工具中检查我的网络面板时，在标有
**大小**
内容 的列中

我发现类似这样的内容
**大小** 47.19KB
**内容** 572.92KB

实际传输的数据是哪一个？这对我来说很重要，因为我使用 GAE 并希望使用每次通话限制 1MB 的最后一滴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:23:50.850

`Size`是实际传输的字节数；因此它反映了您正在使用的任何响应压缩。

# c++ - C++如何在字符串中使用变量

> ID：11643188
> 
> 赞同：2
> 
> 时间：2012-07-25T05:18:08.600
> 
> 标签：c++, string

以下代码不起作用：

```
string currency;
currency = "EURUSD";

system("lynx -dump 'http://somesite.com/q?s="+currency+"=X' > file.txt"); 
```

如何`currency`在这行 C++`system()`调用中使用？

这是我的错误：

```
Error value:
main.cpp: In function ‘int main()’:
main.cpp:22:84: error: cannot convert ‘std::basic_string<char>’ to ‘const char*’ for argument ‘1’ to ‘int system(const char*)’
make: *** [main.o] Error 1
BUILD FAILED (exit value 2, total time: 890ms) 
```

在 PHP 中我`.`用来连接字符串，但在 C++ 中我不确定语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:23:07.780

使用字符串流：

```
#include <sstream>
string currency;
currency = "EURUSD";
std::stringstream ss;
ss << "lynx -dump 'http://somesite.com/q?s=" << currency << "=X' > file.txt";
system(ss.str().c_str()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:19:59.450

`std::string::c_str()`会给你一个`char*`（const'd不知何故）你可以在C字符串函数中使用。但是您应该首先考虑创建一个`std::string`包含完整命令的命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T05:25:29.710

你不能`+`a`std::string`到 a `char []`。虽然你可以`+`a`char []`到 a `std::string`。

我建议使用`std::string`s 并获得`const char*`只是为了调用`system()`：

```
string const currency = "EURUSD";
string const command_line = "lynx -dump 'http://somesite.com/q?s=" + currency + "=X' > file.txt";

system(command_line.c_str()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:30:49.947

那应该行得通。

```
std::string currency("EURUSD");
std::string command("lynx -dump 'http://somesite.com/q?s="+currency+"=X' > file.txt")
system(command.c_str()); 
```

# apache - 使用 APACHE 从 IP 地址重定向到主机名的配置

> ID：11643203
> 
> 赞同：0
> 
> 时间：2012-07-25T05:20:03.507
> 
> 标签：apache, hostname

我已经为特定机器配置了主机名。

IP 地址：192.XXX.XXX.XXX 主机名：[https ://www.mymachine.com/link1](https://www.mymachine.com/link1)

当用户使用 IP 访问浏览器时，我希望他被重定向到主机名。

要添加的apache配置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:22:57.857

首先你试试这个简短的设置..

```
<VirtualHost *>
       ServerName www.myDomain.com
       DocumentRoot /www/myDomainRoot
</VirtualHost> 
```

/* 然后在详细配置之后 */

# /etc/apache2/sites-available/default

```
<VirtualHost <yourIP address>:<PortNo>>

    ServerAdmin webmaster@localhost
    ServerName application.mymachine #or whatever

DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

</VirtualHost> 
```

# php - 我写的 php 代码中的错误无法理解如何纠正它？

> ID：11643207
> 
> 赞同：0
> 
> 时间：2012-07-25T05:20:32.210
> 
> 标签：php, oop

```
类日志记录{   

    私人 $log_file = 'c:/xampp/htdocs/jcert2/tmp/sslogfile.txt';   
    公共静态 $fp = null;

    公共静态函数 lwrite($message){   
    if (Logging::fp) 记录::lopen();   
  // $script_name = pathinfo($_SERVER['PHP_SELF'], PATHINFO_FILENAME);   
    $time = date('H:i:s');   
    fwrite(Logging::fp, "$time $message\n");   
  }   
  // 打开日志文件   
  私有静态函数 lopen(){   
    $lfile = $this->log_file;   
    $today = date('Ymd');   
    Logging::fp = fopen($lfile . '_' . $today, 'a') 或 exit("无法打开 $lfile!");   
  }   
}  

```

我创建了一个日志文件，最后一行出现错误

```
记录::fp = fopen(....)
```

错误是意外的'='有人可以指导我理解和纠正错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:22:53.287

双冒号表示类的静态属性。您不能为类的静态属性赋值。有关静态属性的更多信息，请参阅：

[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:28:27.397

缺少 $: Logging::$fp = fopen($lfile . '_' . $today, 'a') 或 exit("Can't open $lfile!");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:34:08.330

您可以使用 getter/setter

```
class Logging{   

    private $log_file = 'c:/xampp/htdocs/jcert2/tmp/sslogfile.txt';   
    private $fp = null;

    private static function lopen(){   
        $lfile = $this->log_file;   
        $today = date('Y-m-d');   
        $this->fp = fopen($lfile . '_' . $today, 'a') or exit("Can't open $lfile!");   
    }

    public static function get_fp(){
        return $this->fp;
    }
} 
```

# php - 调用函数时PHP Webservice已连接但未经授权的错误

> ID：11643209
> 
> 赞同：0
> 
> 时间：2012-07-25T05:20:35.273
> 
> 标签：php, web-services, soap

我调用了一个 Web 服务，它成功连接并返回了它的方法，但是当我调用这个函数之一时，它得到了未经授权的错误..

**我的代码在这里**

```
try { 
$service = new SoapClient("http://www.go-to-orbit.com/oos/solo/soapServer.php?wsdl");

$header = new SoapHeader('http://oncore.qubitwebtechnologies.com/', 'AuthorisationHeader', array('login' => "ONCORE",'password' => "ONCORE"), false);
$service->__setSoapHeaders(array($header));   

var_dump($service->__getFunctions());

$response = $service->__soapCall("getAllOnHand", array() );
}
catch (Exception $e)
{
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}

print_r($response); 
```

**结果是**

```
 array(2) { [0]=> string(18) "Map getAllOnHand()" [1]=> string(33) "int getOnHand(string $partNumber)" } Caught exception: Unauthorized 
```

我尝试了 2 天，但没有运气，谁能救救我

错误信息

```
Exception object(SoapFault)#4 (9) { ["message":protected]=> string(12) "Unauthorized" ["string":"Exception":private]=> string(0) "" ["code":protected]=> int(0) ["file":protected]=> string(47) "/home/qubitweb/public_html/oncore/jumi/soap.php" ["line":protected]=> int(87) ["trace":"Exception":private]=> array(1) { [0]=> array(6) { ["file"]=> string(47) "/home/qubitweb/public_html/oncore/jumi/soap.php" ["line"]=> int(87) ["function"]=> string(10) "__soapCall" ["class"]=> string(10) "SoapClient" ["type"]=> string(2) "->" ["args"]=> array(2) { [0]=> string(12) "getAllOnHand" [1]=> array(0) { } } } } ["previous":"Exception":private]=> NULL ["faultstring"]=> string(12) "Unauthorized" ["faultcode"]=> string(6) "Sender" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:51:31.043

```
class SOAPStruct
{
    function __construct($user, $pass) 
    {
        $this->username = $user;
        $this->password = $pass;
    }
}

$service = new SoapClient("http://www.go-to-orbit.com/oos/solo/soapServer.php?wsdl");

$auth = new SOAPStruct("ONCORE","ONCORE");

$header = new     SoapHeader("http://oncore.qubitwebtechnologies.com/","AuthHeader",$auth,false); 

$service->__setSoapHeaders($header);   

$response = $service->getAllOnHand();

var_dump( $response ); 
```

此代码现在可以工作，您需要将值设置为相同的键，例如 AuthHeader、用户名、密码。

# java - App Engine 上的 javax.xml.ws.Service 初始化出错

> ID：11643218
> 
> 赞同：0
> 
> 时间：2012-07-25T05:21:27.863
> 
> 标签：java, web-services, google-app-engine, soap, jax-ws

我正在尝试从 GAE 连接到 SOAP 服务器。见[例子](https://stackoverflow.com/questions/9003761/simple-curl-failing-from-linux-command-line/11321675#11321675)。它在开发服务器上一切正常，但在生产中我在初始化期间收到 500 错误。经过大量挖掘，我设法捕获了一个 Throwable 并记录了堆栈跟踪：

```
java.lang.ExceptionInInitializerError
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:58)
at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:142)
at javax.xml.ws.spi.Provider.provider(Provider.java:102) 
```

此问题可能与[问题 4910](http://code.google.com/p/googleappengine/issues/detail?id=4910)有关。那里的一个建议说：

> 我上面的意思是你不应该将任何实现 jaxws 的 jar 文件放入你的战争中。App Engine 运行时包含 jaxws 的实现，您应该使用它。

在我的类路径中我发现

1.  xml-apis-1.0.b2,=.jar
2.  jaxb-api.jar
3.  jaxb-impl.jar

它们看起来不像 jaxws 实现，至少据我所知。真的不能没有 jaxb（如果我删除那个 jar，我会得到一个错误）。

欢迎任何建议。

[更新] [似乎] [3](http://code.google.com/p/googleappengine/issues/detail?id=4910#c41)仅在类路径中包含 jaxb 会导致问题，因此无法找到 GAE 的 jaxws 实现。

[这个答案](https://stackoverflow.com/questions/8692865/how-does-java-initialize-the-jaxb-jax-ws-etc-implementation)对于了解 jaxws 初始化的工作方式也很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:27:50.760

经过大量挖掘后，我放弃了 GAE 的 jaxws 实现。工厂类加载器无法找到它们的实现，期间。

所以我选择了[Force.com Web 服务连接器](http://code.google.com/p/sfdc-wsc/)并设法让它工作。代码生成过程中存在错误，在生成的代码中，GAE 连接器也需要一些修复。

我很想在 GitHub 上创建一个项目来展示我所做的事情。此实现更快，您还可以设置套接字超时！

# php - 如何将数组插入一行？

> ID：11643220
> 
> 赞同：0
> 
> 时间：2012-07-25T05:21:44.137
> 
> 标签：php, mysql, arrays, insert

以下代码适用于从表单插入数组，但它将每个值插入到它自己的行中。如何将数组插入一行？

```
<?php 
require_once('config.php'); 
require_once('open_db.php');
$palette=$_POST['colors_palette'];
while (list ($key,$val) = @each ($palette)) {
}
For ($i=0; $i<sizeof($palette);$i++) {
$query="INSERT INTO style_test1 (colors_palette) VALUES ('".$palette[$i]."')";
Mysql_query($query) or die(mysql_error());
}
Echo "Record is inserted";
?>

<form method="post" action="insert_array.php" >
<input type="checkbox" name="colors_palette[]" value="jewel" />                
<input type="checkbox" name="colors_palette[]" value="bright" />                     
<input type="checkbox" name="colors_palette[]" value="soft" /> 
<input type="checkbox" name="colors_palette[]" value="earth" />
<input type="submit" name="Submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:26:43.170

要作为**字符串**插入：

```
<?php 
 require_once('config.php'); 
 require_once('open_db.php');

 $palette=$_POST['colors_palette'];

 $query="INSERT INTO style_test1 (colors_palette) VALUES ('". serialize($palette) ."')";
 mysql_query($query) or die(mysql_error());

 echo "Record is inserted";
?> 
```

然后，您可以`unserialize`将数据作为数组或对象返回。

不过，更好的方法是插入为**JSON 格式的**字符串。

```
$query="INSERT INTO style_test1 (colors_palette) VALUES ('". json_encode($palette). "')"; 
```

然后您可以使用`json_decode`将其解码回数组。

**内爆：**

```
$pal   = implode(',', $palette);
$query = "INSERT INTO style_test1 (colors_palette) VALUES ('".$pal."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:24:45.350

要将数组转换为逗号分隔的变量，请使用`implode`PHP 中的函数：

```
$query="INSERT INTO style_test1 (colors_palette) VALUES ('".implode(',',$palette)."')"; 
```

编辑：试试这个代码：

```
<?php 
 require_once('config.php'); 
 require_once('open_db.php');

 $palette=$_POST['colors_palette'];

 $query="INSERT INTO style_test1 (colors_palette) VALUES ('".implode(',',$palette)."')";
 mysql_query($query) or die(mysql_error());

 echo "Record is inserted";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T05:24:56.497

你可以使用PHP函数

```
serialize($myArray); 
```

此函数将数组转换为字符串。因此，您可以在行字段中插入。

并在字符串上使用反序列化来获取一个数组。

您也可以将数组内爆以获取字符串

```
$string = implode(',',$myArray); 
```

# python - PyQt/PySide 中是否有默认图标？

> ID：11643221
> 
> 赞同：28
> 
> 时间：2012-07-25T05:21:46.080
> 
> 标签：python, user-interface, icons, pyqt, pyside

我正在阅读有关 PySide 的教程，我在想，我是否需要为每一件事找到自己的图标，或者是否有某种方法可以使用一些内置图标。这样，如果我想让我的小 gui 在另一个桌面环境上运行，我就不需要找到一套全新的图标。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-05T19:51:57.587

你需要的是 Pyside QIcon.fromTheme 函数。基本上它使用当前系统主题中所需的图标创建 QIcon 对象。

用法：

`undoicon = QIcon.fromTheme("edit-undo")`

“编辑撤消” - 图标“类型”/“功能”的名称可以在[这里找到](http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html)

这适用于 X11 系统，对于 MacOSX 和 Windows 检查 QIcon 文档 [QIcon.fromTheme](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.fromTheme)

**编辑**从网站插入这个，因为上次它是一个损坏的链接。

> *静态*PySide.QtGui.QIcon。**fromTheme** (*名称[, fallback=QIcon()]* )
> 
> **参数：**
> 
> *   **名称**- Unicode
> *   **后备**- [PySide.QtGui.QIcon](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.QIcon)
> 
> **返回类型：**
> 
> [PySide.QtGui.QIcon](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.QIcon)
> 
> 返回当前图标主题中名称对应的[PySide.QtGui.QIcon 。](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.QIcon)如果在当前主题中未找到此类图标，则返回后备。
> 
> 最新版本的freedesktop图标规范和命名规范可以在这里获取：
> 
> *   [http://standards.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html](http://standards.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html)
> *   [http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html](http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html)
> 
> 从当前图标主题中获取图标：
> 
> ```
> undoicon = QIcon.fromTheme("edit-undo") 
> ```
> 
> 或者，如果您想为不支持主题图标的平台提供有保证的回退，您可以使用第二个参数：
> 
> ```
> undoicon = QIcon.fromTheme("edit-undo", QIcon(":/undo.png")) 
> ```
> 
> > **笔记**
> > 
> > 默认情况下，只有 X11 支持主题图标。为了在 Mac 和 Windows 上使用主题图标，您必须在其中一个[PySide.QtGui.QIcon.themeSearchPaths()](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.themeSearchPaths)中捆绑一个兼容的主题并设置适当的[PySide.QtGui.QIcon.themeName()](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.themeName)。
> > 
> > **也可以看看**
> > 
> > *   [PySide.QtGui.QIcon.themeName()](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.themeName)
> > *   [PySide.QtGui.QIcon.setThemeName()](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.setThemeName)
> > *   [PySide.QtGui.QIcon.themeSearchPaths()](http://pyside.github.io/docs/pyside/PySide/QtGui/QIcon.html?highlight=qicon#PySide.QtGui.PySide.QtGui.QIcon.themeSearchPaths)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-10T21:27:08.733

还有另一种方法可以使用默认样式的标准像素图访问 PyQt/PySide 中的一些标准内置图标。例如，以下创建一个用于打开文件的图标：

```
self.style().standardIcon(QtGui.QStyle.SP_DialogOpenButton) 
```

有关标准像素图的完整列表，请参阅：

[http://srinikom.github.io/pyside-docs/PySide/QtGui/QStyle.html#PySide.QtGui.PySide.QtGui.QStyle.StandardPixmap](http://srinikom.github.io/pyside-docs/PySide/QtGui/QStyle.html#PySide.QtGui.PySide.QtGui.QStyle.StandardPixmap)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T05:39:28.677

我不认为这特定于任何绑定，您可以查看 qt 通用文档

看看[这里](http://qt-project.org/doc/qt-4.8/qstyle.html#standardIcon)和[这里](http://qt-project.org/doc/qt-4.8/qstyle.html#StandardPixmap-enum)

[相关问题](https://stackoverflow.com/questions/695142/how-to-use-default-icons-with-qt)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-30T20:13:14.500

在`PyQt5`中，这是一个使用播放图标创建按钮的简单示例：

```
play_button = QtGui.QPushButton('Play video')
play_button.setIcon(QtGui.QApplication.style().standardIcon(QtGui.QStyle.SP_MediaPlay)) 
```

Qt5 文档提供了可能的 SP（“标准像素图”）图标的列表。见`enum QStyle::StandardPixmap`这里：[http ://doc.qt.io/qt-5/qstyle.html](http://doc.qt.io/qt-5/qstyle.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-03T21:59:40.517

我一直无法找到标准图标的图像，因此以供将来参考： http: [//nukesaq88.hatenablog.com/entry/2013/04/12/005525](http://nukesaq88.hatenablog.com/entry/2013/04/12/005525)

而我正在使用的代码（PyQt4，Pyside 可能类似）：

```
 # In method of QMainWindow subclass
    stdicon = self.style().standardIcon
    style = QtGui.QStyle
    reload_foo = QtGui.QAction(stdicon(style.SP_BrowserReload), '&Reload', self) 
```

如果（显然是自动生成的）[Qt 文档](http://doc.qt.io/qt-5/qstyle.html#StandardPixmap-enum)在 standardIcons 枚举表中有图片，那就太好了......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-05T15:59:34.937

另一个使用[标准图标](http://doc.qt.io/qt-5/qstyle.html#StandardPixmap-enum)的 PyQt5 示例（[eqzx](https://stackoverflow.com/users/209246/eqzx)的答案对我不起作用）：

```
 from PyQt5.QtWidgets import QApplication, QStyle
 from PyQt5.QtGui import QIcon

 desktop_icon = QIcon(QApplication.style().standardIcon(QStyle.SP_DesktopIcon) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T17:46:24.950

在 PyQt 中，窗口图标默认是 Qt 标志。我认为您将必须在 gui 中找到自己的图标。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-23T12:23:49.303

将显示所有内置图标的 PyQt5 示例（列表来自[QStyle 文档](https://doc.qt.io/qt-5/qstyle.html#StandardPixmap-enum)）。

```
from PyQt5.QtWidgets import (QApplication, QGridLayout, QPushButton, QStyle, QWidget)

class Window(QWidget):
    def __init__(self):
        super(Window, self).__init__()
        icons = [
            'SP_ArrowBack',
            'SP_ArrowDown',
            'SP_ArrowForward',
            'SP_ArrowLeft',
            'SP_ArrowRight',
            'SP_ArrowUp',
            'SP_BrowserReload',
            'SP_BrowserStop',
            'SP_CommandLink',
            'SP_ComputerIcon',
            'SP_DesktopIcon',
            'SP_DialogAbortButton',
            'SP_DialogApplyButton',
            'SP_DialogCancelButton',
            'SP_DialogCloseButton',
            'SP_DialogDiscardButton',
            'SP_DialogHelpButton',
            'SP_DialogIgnoreButton',
            'SP_DialogNoButton',
            'SP_DialogNoToAllButton',
            'SP_DialogOkButton',
            'SP_DialogOpenButton',
            'SP_DialogResetButton',
            'SP_DialogRetryButton',
            'SP_DialogSaveAllButton',
            'SP_DialogSaveButton',
            'SP_DialogYesButton',
            'SP_DialogYesToAllButton',
            'SP_DirClosedIcon',
            'SP_DirHomeIcon',
            'SP_DirIcon',
            'SP_DirLinkIcon',
            'SP_DirLinkOpenIcon',
            'SP_DirOpenIcon',
            'SP_DockWidgetCloseButton',
            'SP_DriveCDIcon',
            'SP_DriveDVDIcon',
            'SP_DriveFDIcon',
            'SP_DriveHDIcon',
            'SP_DriveNetIcon',
            'SP_FileDialogBack',
            'SP_FileDialogContentsView',
            'SP_FileDialogDetailedView',
            'SP_FileDialogEnd',
            'SP_FileDialogInfoView',
            'SP_FileDialogListView',
            'SP_FileDialogNewFolder',
            'SP_FileDialogStart',
            'SP_FileDialogToParent',
            'SP_FileIcon',
            'SP_FileLinkIcon',
            'SP_LineEditClearButton',
            'SP_MediaPause',
            'SP_MediaPlay',
            'SP_MediaSeekBackward',
            'SP_MediaSeekForward',
            'SP_MediaSkipBackward',
            'SP_MediaSkipForward',
            'SP_MediaStop',
            'SP_MediaVolume',
            'SP_MediaVolumeMuted',
            'SP_MessageBoxCritical',
            'SP_MessageBoxInformation',
            'SP_MessageBoxQuestion',
            'SP_MessageBoxWarning',
            'SP_RestoreDefaultsButton',
            'SP_TitleBarCloseButton',
            'SP_TitleBarContextHelpButton',
            'SP_TitleBarMaxButton',
            'SP_TitleBarMenuButton',
            'SP_TitleBarMinButton',
            'SP_TitleBarNormalButton',
            'SP_TitleBarShadeButton',
            'SP_TitleBarUnshadeButton',
            'SP_ToolBarHorizontalExtensionButton',
            'SP_ToolBarVerticalExtensionButton',
            'SP_TrashIcon',
            'SP_VistaShield',
        ]

        layout = QGridLayout()

        for n, name in enumerate(icons):
            btn = QPushButton(name)
            pixmapi = getattr(QStyle.StandardPixmap, name)
            icon = self.style().standardIcon(pixmapi)
            btn.setIcon(icon)
            layout.addWidget(btn, int(n / 4), n % 4)

        self.setLayout(layout)

app = QApplication([])
w = Window()
w.show()
app.exec() 
```

# java - Scanner 和 nextInt 丢弃整数

> ID：11643222
> 
> 赞同：3
> 
> 时间：2012-07-25T05:21:50.397
> 
> 标签：java, input

我正在使用 Scanner 在 java 中获取用户输入。当我使用 nextInt() 并且用户输入“2 5”时，将分配值“2”并丢弃 5。如果我想显示这样的输入是错误的怎么办？我想到的一个解决方案是我可以使用 nextString() 而不是 nextInt() 然后解决问题。但是有人可以提出更好的解决方案吗？

我意识到它并没有在空格后丢弃整数，而是将它用于下一个输入。

```
import java.util.Scanner;
class Test{
static Scanner in=new Scanner(System.in);
static void trial(){
    int k=in.nextInt();
    System.out.println(k);
    System.out.println(k);
}

public static void main(String[] args){     
    int k=in.nextInt();
    System.out.println(k);
    System.out.println(k);
    trial();        
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T05:31:33.340

**1.**首先使用`nextLine()`读取**整行。**

**2.**使用`Integer.parseInt()`方法**验证整数输入**。

**例如：**

```
Scanner scan = new Scanner(System.in);
String s = scan.nextLine();

try{
    Integer.parseInt(s);
}
catch(NumberFormatException ex){
    System.out.println("Its not a valid Integer");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:26:14.423

就个人而言，我建议一次性阅读该行，并使用 String.split() 来解析各个“单词”：

> [http://pages.cs.wisc.edu/~hasti/cs302/examples/Parsing/parseString.html](http://pages.cs.wisc.edu/~hasti/cs302/examples/Parsing/parseString.html)
> 
> 我们想将一个短语分成单词，其中空格用于分隔单词。例如

```
the music made   it   hard      to        concentrate 
```

> 在这种情况下，我们只有一个分隔符（空格），而连续的分隔符（即一行中的几个空格）应该被视为一个分隔符。为了在 Java 中解析这个字符串，我们做

```
String phrase = 
  "the music made   it   hard      to        concentrate"; 
String delims = "[ ]+"; 
String[] tokens =  phrase.split(delims); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:25:02.573

使用`readLine()`从[`BufferedReader`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html). 您将获得一个`String`包含用户输入到 Enter 的所有内容。从那里，您可以对输入做您想做的事情，并检查它是否符合您预期的格式。

# android - 如何从退出按钮退出android应用程序？

> ID：11643224
> 
> 赞同：2
> 
> 时间：2012-07-25T05:21:51.587
> 
> 标签：android

> **可能重复：**
> [android - 退出应用程序代码](https://stackoverflow.com/questions/3226495/android-exit-application-code)

我正在寻找将 android 应用程序退出到主屏幕（android 手机）的方法。

我的代码不是完全退出应用程序，而是转向应用程序的根活动。

# 这是我的代码

```
//Expression
    Button exit = (Button) findViewById(R.id.exit);
    exit.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            finish();
            System.exit(0);
        }
    }); 
```

你能告诉我如何退出应用程序并进入安卓手机的主屏幕吗？

问候，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T05:25:07.617

```
public void AppExit()
{

    this.finish();
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);

    /*int pid = android.os.Process.myPid();=====> use this if you want to kill your activity. But its not a good one to do.
    android.os.Process.killProcess(pid);*/

} 
```

`exit`在单击按钮的位置调用此方法

# android - 与电话簿同步的 Android 应用程序？

> ID：11643229
> 
> 赞同：0
> 
> 时间：2012-07-25T05:22:23.827
> 
> 标签：android, database, synchronization

我正在创建一个 android 测试应用程序，其中我有一个按钮。单击按钮时，我想将电话簿记录与我的本地数据库同步。如果电话簿中的记录不在 db 表中，则插入它，否则保持原样。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:10:04.340

要从您的电话簿中获取联系人列表，您需要在`AndroidManifest.XML`（即`android.permission.READ_CONTACTS`）中写入权限。您可以使用以下方法收集联系人列表。

```
 ShowContact()
         {
           ArrayList<String> nameList;
           ArrayList<String> phoneNoList;

           ContentResolver cr = getContentResolver();
           Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
           if (cur.getCount() > 0) {
          while (cur.moveToNext()) {
            String id = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
               if(Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                   //Query phone here.  Covered next

                 Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                 new String[]{id}, null);
                  while (pCur.moveToNext()) {
                // Do something with phones
                    String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    nameList.add(name); // Here you can list of contact.
                    phoneNoList.add(phoneNo); // And here you can get list of phone number.You have to query separately for getting phone_no,email,name etc 
   // Here you have to iterate this(i.e. nameList) with your list in the database.And your rest of logic.

                } 
                pCur.close();                 
        }
     }      
   }
} 
```

让我知道在获取联系人列表时是否有任何问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-08T05:26:04.263

public static List fetchContacts(Context context) { final String DISPLAY_NAME = ContactsContract.Contacts.DISPLAY_NAME_PRIMARY;

```
 final String FILTER = DISPLAY_NAME + " NOT LIKE '%@%'";

    final String ORDER = String.format("%1$s COLLATE NOCASE", DISPLAY_NAME);
    final String[] PROJECTION = {
            ContactsContract.Contacts._ID,
            DISPLAY_NAME,
            ContactsContract.Contacts.HAS_PHONE_NUMBER
    };
    ArrayList<MyContact> contacts = new ArrayList<>();
    try {
        ContentResolver cr = context.getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, PROJECTION, FILTER, null, ORDER);
        if (cursor != null && cursor.moveToFirst()) {
            do {
                MyContact contact = new MyContact();
                // get the contact's information
                String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                contact.setContactId(id);

                String name = cursor.getString(cursor.getColumnIndex(DISPLAY_NAME));
                contact.setUserName(name);
                Integer hasPhone = cursor.getInt(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
                // get the user's email address
                String email = null;
                Cursor ce = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, new String[]{ContactsContract.CommonDataKinds.Email.DATA},
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[]{id}, null);
                if (ce != null && ce.moveToFirst()) {
                    email = ce.getString(ce.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                    ce.close();
                }
                contact.setEmailAddress(email);
                // get the user's phone number
                String phone = null;
                if (hasPhone > 0) {
                    Cursor cp = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER,
                                    ContactsContract.CommonDataKinds.Phone.CONTACT_LAST_UPDATED_TIMESTAMP,
                                    ContactsContract.CommonDataKinds.Phone.PHOTO_URI},
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[]{id}, null);
                    if (cp != null && cp.moveToFirst()) {
                        phone = cp.getString(cp.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                        String timeStamp = cp.getString(cp.getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_LAST_UPDATED_TIMESTAMP));
                        contact.setLastUpdateTimestamp(timeStamp);

                        String photoUri = cp.getString(cp.getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_URI));
                        contact.setPhotoUri(photoUri);

                        cp.close();
                    }
                }
                contact.setPhone_number(phone);
                contacts.add(contact);
            } while (cursor.moveToNext());
            // clean up cursor
            cursor.close();
            Utils.list = contacts;
            sendMessage(context);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return contacts;
} 
```

# architecture - 工程\集成用户故事——如何用客户价值来写？

> ID：11643230
> 
> 赞同：0
> 
> 时间：2012-07-25T05:22:32.450
> 
> 标签：architecture, agile, enterprise, user-stories

我在一家大型电信公司工作，我们部门最近转向了“企业敏捷”工作模式（这一切都非常令人兴奋！）我们过去曾运行过特定的敏捷友好项目，但现在正试图交付我们的整体使用敏捷原则的程序。我们的大部分工作都是基于系统集成和配置的，我们内部运行的软件开发很少。

我现在正在尝试从我们的生命周期计划中交付功能，并尝试鼓励团队编写以客户价值为中心的故事，但是当该功能需要大量技术基础工作时，您如何做到这一点，以交付非常锁定的一部分用户功能？（第三方软件已经定义了用户可以做什么和不能做什么）

例如，我们具有通过新报告解决方案提供现有客户报告的功能。不会提供任何新功能 - 至少作为初始版本的一部分。我们已经确定了一组我们将为用户构建的标准报告。这些是我们的客户价值故事。但是要交付一个故事，我们需要部署和配置新的主机、新的业务对象数据库、新的数据收集点、新的数据聚合和提取层，并将当前客户数据导出到解决方案中并验证\调整演示文稿 - 在我们构建之前并提交实际报告。

新客户队列报告的交付是我们的 EPIC 故事，我们应该如何捕捉交付此报告所需的所有技术基础工作？主机的登台和数据库的构建可以写成用户故事还是仅仅写成技术任务。如果将其编写为非估计任务，我们将运行大约 4-5 次迭代，然后才能交付单个用户故事。即使试图提供最小的功能，这个故事也是针对拥有大量数据的大型客户，并且需要大量的技术工作来提供第一个价值故事/

我在这个优秀的网站、网络和诸如 Mike Cohn 的书籍中进行了搜索，advise 似乎主要是基于软件开发的。我很想得到一些可以应用于大型企业明智工程项目的答案。随着敏捷运动因其软开发根源而发展壮大，这对于那里的团队来说一定是一个日益严重的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:46:21.393

我想也许你正在接近这个错误。大量可交付成果与敏捷哲学背道而驰——即您需要能够快速响应客户需求的变化。

例如，允许定义新报告的新技术的实施。如果客户已经签署了此协议，那么不用说应该提前交付少量的报告。

另一方面，如果客户尚未对此签字，那么此时您的敏捷交付可能是样本报告和证明，证明您可以在自己的基础架构上交付客户想要的东西，直到您购买为止。

对我来说，敏捷意味着能够改变方向——我认为你的方法并不适合这一点，因为你的用户故事过于关注后来的可交付成果。

# c# - 如何将 pdf 文件作为附件添加到电子邮件

> ID：11643231
> 
> 赞同：6
> 
> 时间：2012-07-25T05:22:33.047
> 
> 标签：c#, asp.net

我将每个人的报告动态存储为`pdf`并且应该将其发送给他们的电子邮件`Attacment`。如何将其作为电子邮件的附件发送。这是我的代码。

```
public void Esendmail(string EmailFrom, string EmailTo, 
                      string EmailBody, string EmailSubject, string EmailCC)
{
            MailMessage message = new MailMessage();
            message.From = new MailAddress(EmailFrom);
            message.CC.Add(EmailCC);

            message.To.Add(new MailAddress(EmailTo));
            message.IsBodyHtml = true;
            message.Body = EmailBody;
            message.Subject = EmailSubject;

            SmtpClient client = new SmtpClient();

            client.Send(message);

 } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T05:26:01.590

使用此示例代码

```
MailMessage message = new MailMessage();
message.To = "abc@domain.com";
message.From = "xyz@domain.com";
message.Subject = "mail with pdf";
message.Body = "your pdf attached";
message.Attachments.Add(new Attachment(@"c:\pdftoattach.pdf"));

SmtpMail.SmtpServer = "mail.domain.com";
SmtpMail.Send(message); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T05:36:48.827

```
MailMessage message = new MailMessage();
FileStream fileStream = File.Create("PdfPath");
var memoryStream = new MemoryStream();
fileStream.Position = 0;
fileStream.CopyTo(memoryStream);
message.Attachments.Add(new Attachment(memoryStream,Path.GetFileName("PdfPath"))); 
```

# sql - 在sql中如何找到最低和最高值

> ID：11643234
> 
> 赞同：0
> 
> 时间：2012-07-25T05:22:50.613
> 
> 标签：sql, union

我有两个表，我想写一个查询，它会给出我这样做的最高和最低值，但它显示''联合附近的一些错误'......（使用联合是命令。）

```
select TOP 1  od.productid,od.unitprice,totalprice=(od.unitprice-od.discount) from orderdetails od
inner join
orders o
on od.orderid=o.orderid
where o.orderdate between '10/7/1997' and '10/14/1997'
order by totalprice asc

union  

select TOP 1 od.productid,od.unitprice,totalprice=(od.unitprice-od.discount) from orderdetails od
inner join
orders o
on od.orderid=o.orderid
where o.orderdate between '10/7/1997' and '10/14/1997'
order by totalprice asc 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:29:14.733

让我们假设您正在使用 Sql Server。

您不能将 an`ORDER BY`作为联合的第一个选择部分的一部分。

如果您希望使用 order by，则需要使用子选择。

就像是

```
DECLARe @TABLE  TABLE(
        Val VARCHAR(20)
)

SELECT  *
FROM    (
            SELECT  TOP 1
                    Val
            FROM    @TABLE
            ORDER BY val
        ) minVal
UNION 
SELECT  *
FROM    (
            SELECT  TOP 1
                    Val
            FROM    @TABLE
            ORDER BY val DESC
        ) maxVal 
```

# cakephp - cakephp重定向查询

> ID：11643240
> 
> 赞同：3
> 
> 时间：2012-07-25T05:23:28.587
> 
> 标签：cakephp, redirect, login

创建一个基本的登录页面 - 它正在工作，但后来我们更改了我们的数据库，我们的重定向不再工作。

当我们登录站点时，在检查站点正在检查数据库的 sql 代码后，返回说用户名/密码不正确 - 它正在发送正确的信息，但不允许我们登录。

我们希望用户在登录站点时被重定向到 ebox（控制器）主页（视图）。

这是控制器中用于登录的代码

```
 public function login(){

    $this->set('title_for_layout', 'Individual Registration');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');

    if ($this->request->is('post')){
        if ($this->Auth->login()){
            $username = $this->request->data['User']['username'];
            if (0 === $this->User->find('count',array('conditions'=>array('activated'=>true,'username'=> $username)))){
                $this->Session->setFlash('Sorry, your account is not validated yet.');
                $this->redirect($this->referer());
                } 
            else{
                $this->Auth->user('id');
                $this->redirect( array('controller' => 'Eboxs','action' => 'home'));
                }
        }  

        else{
            $this->Session->setFlash('Username or password is incorrect');
        }
    }else{
        $this->Session->setFlash('Welcome, please login');
    }

} 
```

这是视图的代码

```
<?php    
         echo $this->Form->create('User', array('action' => 'login'));
         echo $this->Form->input('username');
         echo $this->Form->input('password');
         echo $this->Form->end('Login');

     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:01:42.907

```
I think try this

//app controller
class AppController extends Controller {

    public $components = array(
        'Acl',
        'Auth' => array(
            'authorize' => array(
                'Actions' => array('actionPath' => 'controllers')
            )
        ),
        'Session'
    );

    public function beforeFilter() {

     //Configure AuthComponent
     $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
     $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
     $this->Auth->loginRedirect = array('controller' => 'posts', 'action' => 'add');
    }

}

//login action view

echo $this->Form->inputs(array(
    'legend' => __('Login'),
    'username',
    'password'
));

//this is controller code

 if ($this->request->is('post')) {
      if ($this->Auth->login()) {
   $this->redirect($this->Auth->redirect());
      } else {
   $this->Session->setFlash('Your username or password was incorrect.');
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:26:05.390

当您更改数据库时，在 core.php 文件中将调试模式启用为“2”，或者您可以删除模型缓存。您可以稍后在生产站点中将调试模式更改为 0。还要检查新数据库的用户表中的用户名和密码是否有效。还要检查密码字段的结构。它应该是 varchar 255。

还将上述逻辑修改为 -

```
if ($this->Auth->login()){
  $username = $this->request->data['User']['username'];
  if (0 === $this->User->find('count',array('conditions'=>array('activated'=>true,'username'=> $username)))) {

     $this->Session->setFlash('Sorry, your account is not validated yet.');
     $this->redirect($this->referer());
   } else {
    $this->Auth->user('id');
    $this->redirect( array('controller' => 'Eboxs','action' => 'home'));
   }   
} 
```

在视图文件中而不是使用

```
echo $this->Form->create('User', array('action' => 'login')); 
```

尝试使用 -

```
echo $this->Form->create('User', array('url' => array('controller' => 'users', 'action' => 'login'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:52:35.220

在以下情况下，您可以检查代码不工作的原因：

1.  您是否在用户模型中使用了 beforeFilter() 方法？

    如果是，请检查它在说什么。

2.  将您的“登录”方法放入用户控制器的 beforeFilter 中的 Auth->allow() 方法中。

    ```
    function beforeFilter(){
        $this->Auth->allow('login');
    } 
    ```

3.  请检查保存到数据库中的相关哈希密码是否等于您为相应用户输入的密码。您可以使用以下语法检查 Auth 哈希密码：

    ```
    pr(AuthComponent::password('USER PASSWORD HERE')); 
    ```

4.  您可以使用以下语法来创建表单：

    ```
    echo $this->Form->create('User', array('url' => $this->request->params)); 
    ```

请询问它是否仍然不适合您。

# c# - 具有来自其他数据表的 id 的数据表，需要转换此数据表以将 id 替换为其数据表名称列值

> ID：11643241
> 
> 赞同：4
> 
> 时间：2012-07-25T05:23:38.487
> 
> 标签：c#, datatable

我有 N 个数据表，其中 N-1 个数据表代表一些实体，1 个代表这些实体之间的关系。

像 **实体国家**

```
Country DATATABLE

ID    | Country Name | Country Code
------------------------------------
ID1   | USA          | USA
ID2   | INDIA        | IND
ID3   | CHINA        | CHI 
```

**实体大陆**

```
Continent DATATABLE

ID     | Continent Name | Continent Code
------------------------------------
IDC1   | NORTH AMERICA  | NA
IDC2   | SOUTH AMERICA  | SA
IDC3   | ASIA           | AS 
```

**实体公司**

```
Company DATATABLE

ID    | Company Name   | Company Code
------------------------------------
CM1   | XYZ Company    | XYZ
CM2   | Fun Company    | Fun
CM3   | ABC Company    | ABC 
```

**这些之间的关系。**

```
Company_Country_Continent_Relationship DataTable 

ID    | Company        | Country    |  Continent     | Some Value1     | Some Value 2
-------------------------------------------------------------------------------------
R1    | CM1            | ID1        |  IDC1          | 100             | 150
R2    | CM2            | ID2        |  IDC3          | 200             | 200
R3    | CM3            | ID1        |  IDC1          | 150             | 250
R4    | CM1            | ID3        |  IDC3          | 100             | 150
R5    | CM2            | ID1        |  IDC1          | 200             | 200
R6    | CM3            | ID2        |  IDC3          | 150             | 250
R7    | CM1            | ID2        |  IDC3          | 100             | 150
R8    | CM2            | ID3        |  IDC3          | 200             | 200
R9    | CM3            | ID3        |  IDC3          | 150             | 250 
```

现在我需要生成另一个关系表，它将保存名称而不是 ID。在此示例中，关系数据存储公司、国家和大陆的 ID，现在我想将这些 id 值转换为名称，即。代替或 CM1 - XYZ 公司。

对于这种转换，我使用了一种方法`TramnsformRelationshipData`，并且它工作正常。

```
 public static DataTable TramnsformRelationshipData(DataTable relationshipData, Dictionary<string, DataTable> mapping)
    {
        DataTable transformedDataTable = null;
        if (relationshipData == null || mapping == null )
           return null;

        transformedDataTable = relationshipData.Copy();

        foreach (DataColumn item in relationshipData.Columns)
        {
            if (mapping.ContainsKey(item.ColumnName))
            {
                var instanceData = mapping[item.ColumnName];
                if (instanceData == null)
                    return null;

                foreach (DataRow row in transformedDataTable.Rows)
                {
                    var filteredRows = instanceData.Select("ID = '" + row[item.ColumnName] + "'");
                    if (filteredRows.Any())
                        row[item.ColumnName] = filteredRows[0][1];
                }
            }
        }

        return transformedDataTable;
    } 
```

但是，这种方法迭代所有数据表，并且当关系数据有更多实体要转换时非常慢。那么，我该如何优化此代码，以处理具有大量行的大量数据表。

**编辑**：在大多数情况下，这些数据不存储在数据库中，这些数据在内存中，并且在内存中，这些数据表的计数可以增加或减少。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:40:29.070

`SELECT INTO`您是否考虑过使用语句创建 SQL 代码（这将比使用 C# 代码快得多） ？当我需要处理大量数据时，我通常更喜欢使用 SQL。

示例取自[此 MSDN](http://msdn.microsoft.com/en-us/library/ms188029.aspx)页面。

```
SELECT c.FirstName, c.LastName, e.JobTitle, a.AddressLine1, a.City, sp.Name AS [State/Province], a.PostalCode
INTO dbo.EmployeeAddresses
FROM Person.Person AS c JOIN HumanResources.Employee AS e ON e.BusinessEntityID = c.BusinessEntityID
JOIN Person.BusinessEntityAddress AS bea ON e.BusinessEntityID = bea.BusinessEntityID
JOIN Person.Address AS a ON bea.AddressID = a.AddressID
JOIN Person.StateProvince as sp ON sp.StateProvinceID = a.StateProvinceID; 
```

首先写一个`SELECT`语句来获取你的数据，然后添加`INTO`语句。

或者，您可以在用户`INSERT`和`SELECT`位置指定要插入数据的列列表。示例取自[MSDN](http://msdn.microsoft.com/en-us/library/ms174335.aspx)页面。

```
INSERT INTO Production.ZeroInventory (DeletedProductID, RemovedOnDate)
SELECT ProductID, GETDATE() FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:50:13.527

在我看来问题本身非常简单，如果您使用 sql，3 个连接可以解决它。
我猜源不在 sql 中（如果是的话，我会建议在那里创建一个视图以获得最佳性能）。
如果您必须使用数据集，您可以使用 linq 来模拟连接。

检查此[链接](http://blogs.msdn.com/b/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)以了解如何将 linq 与数据集一起使用。[您可以在此处](http://code.msdn.microsoft.com/LINQ-Join-Operators-dabef4e9#crossjoin)
了解如何加入最终结果将如下所示：

```
var q = from r in relations.AsEnumerable()
        join c in countries.AsEnumerable() on r.Country equals c.Id
        join con in continents.AsEnumerable() on r.Continent equals con.Id
        select new { someval = r.someValue1, 
                     someval2 = r.someValue2, 
                     countryname = c.Name 
                     continent = con.Name}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T16:31:57.333

这里的解决方案是创建一个基于哈希的集合（即哈希表、字典、.NET 中的查找），其中 ID 列是键并使用它而不是 .Select(Id = x)

代码可能看起来像这样......未经测试。

```
public static DataTable TramnsformRelationshipData(DataTable relationshipData, Dictionary<string, DataTable> mapping) 
    { 
        Dictionary<string,Dictionary<string,DataRow>> newMappings = new Dictionary<string,Dictionary<string,DataRow>>();
        foreach (var kvp in mapping)
        {
            newMappings.Add(kvp.Key,kvp.Value.Rows.Cast<DataRow>().ToDictionary(dr=>dr["ID"] as string));
        }

        DataTable transformedDataTable = null; 
        if (relationshipData == null || mapping == null ) 
           return null; 

        transformedDataTable = relationshipData.Copy(); 

        foreach (DataColumn item in relationshipData.Columns) 
        { 
            if (newMapping.ContainsKey(item.ColumnName)) 
            { 
                var instanceData = newMapping[item.ColumnName]; 
                if (instanceData == null) 
                    return null; 

                foreach (DataRow row in transformedDataTable.Rows) 
                { 
                //  var filteredRows = instanceData.Select("ID = '" + row[item.ColumnName] + "'"); 
                //  if (filteredRows.Any()) 
                    row[item.ColumnName] = instanceData[row[item.ColumnName]][1];                       
                } 
            } 
        } 

        return transformedDataTable; 
    } 
```

# postgresql - 本地网络中的 Postgresql 服务器复制

> ID：11643242
> 
> 赞同：0
> 
> 时间：2012-07-25T05:23:43.483
> 
> 标签：postgresql, replication

我的本地网络中有一台 postgresql 服务器，它为内部 ERP、电子商务和其他一些工具托管内部数据库。尽管如此，我不断地向现有表添加新行，并且由于我是通过网络进行的，因此该过程不仅速度慢，而且会在高峰时段加载服务器。我正在考虑在其上插入另一个带有 postgresql 的服务器并使用此实例，但我想要某种复制 - 我在第二个实例上添加或修改的所有新数据，我想与“主”服务器实例同步，反之亦然-诗。我以前从未这样做过，任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:29:40.857

通过多主复制执行此操作是寻找问题的解决方案。优化当前方法比在当前问题之上添加另一组复杂的问题（多主复制）要好得多。

如果您真的想以这种方式玩多主复制，那么 bucardo 是可以使用的工具。然而，这个答案的其余部分将寻找替代方案。

您真正想做的第一件事是优化批量加载。最好的方法是确保您的整个批量加载作为单个事务运行。这减少了磁盘命中，并确保所有行同时变得可见。如果您正在执行大量插入和更新，您可能希望首先将所有内容加载到临时表中，然后运行单个查询来从临时表中更新您的数据库。在 Pg 9.2 中，您可以将临时表设置为不记录日志，这也将为您带来一些性能优势（并且由于数据是瞬态的，WAL 不会给您带来任何好处）。

在您确认批量加载以合理的方式完成之后，您应该做的第二件事是仔细分析所有内容。瓶颈并不总是您认为的，有时问题可能是从触发器行为不端到缺少索引的所有问题。但是看看当时的性能问题实际上是什么。您可能会发现它们很容易修复。

# php - Mysql Query 它返回 SNo 和 Group By

> ID：11643243
> 
> 赞同：0
> 
> 时间：2012-07-25T05:23:45.267
> 
> 标签：php, mysql, sql

我正在寻找返回 Sno 和行的 MySQL 查询。请注意，查询使用按功能分组。

请注意下面的查询。它不适用于按功能分组

```
SELECT @rownum:= @rownum+1 AS Sno
  FROM tableName, (SELECT @rownum:=0) r; 
```

有人可以解释为什么我`r`在上面查询的末尾没有出现错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:30:53.850

`(SELECT @rownum:=0)`是派生表，必须在 MySQL 中为其指定别名，否则将引发错误。尝试这个：

```
SET @rownum = 0;

SELECT (@rownum:= @rownum + 1) AS Sno 
FROM tableName; 
```

# android - 如何从android上的网络运营商获取当前的塔位置

> ID：11643244
> 
> 赞同：6
> 
> 时间：2012-07-25T05:23:45.860
> 
> 标签：android, networking

我想当前获取塔位置地址，如诺基亚手机在主屏幕中显示当前塔位置，如移动设备上显示的运营商名称和塔地址。我想如下所示：

***SIM 运营商名称***

***当前的塔楼地址***

我想在 android 上离线获取这些详细信息！

任何人都可以帮助我不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:11:03.103

试试这个 [得到细胞](http://android-coding.blogspot.in/2011/06/get-location-of-cell-id-from.html)

希望对您有所帮助。

以下是从原始 URL 获取的内容，以防原始页面不可用。

* * *

使用 HttpGet() 从 opencellid.org 获取 Cell ID 的位置。创建了一个类 OpenCellID 来处理与 opencellid.org 的 http 通信。为了简化工作，发送带有“fmt=txt”的请求，这样我们就可以简单地拆分结果来检索我们的纬度、经度。

```
To know more about the project OpenCellID, refer to last post.

Get location of Cell ID, from opencellid.org using HttpGet()

We need the following permission in this example:
android.permission.ACCESS_COARSE_LOCATION
android.permission.ACCESS_FINE_LOCATION
android.permission.READ_PHONE_STATE
android.permission.INTERNET

package com.AndroidTelephonyManager;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.telephony.gsm.GsmCellLocation;
import android.widget.TextView;

public class AndroidTelephonyManager extends Activity {

 public class OpenCellID {
  String mcc;  //Mobile Country Code
  String mnc;  //mobile network code
  String cellid; //Cell ID
  String lac;  //Location Area Code

  Boolean error;
  String strURLSent;
  String GetOpenCellID_fullresult;

  String latitude;
  String longitude;

  public Boolean isError(){
   return error;
  }

  public void setMcc(String value){
   mcc = value;
  }

  public void setMnc(String value){
   mnc = value;
  }

  public void setCallID(int value){
   cellid = String.valueOf(value);
  }

  public void setCallLac(int value){
   lac = String.valueOf(value);
  }

  public String getLocation(){
   return(latitude + " : " + longitude);
  }

  public void groupURLSent(){
   strURLSent =
    "http://www.opencellid.org/cell/get?mcc=" + mcc
    +"&mnc=" + mnc
    +"&cellid=" + cellid
    +"&lac=" + lac
    +"&fmt=txt";
  }

  public String getstrURLSent(){
   return strURLSent;
  }

  public String getGetOpenCellID_fullresult(){
   return GetOpenCellID_fullresult;
  }

  public void GetOpenCellID() throws Exception {
   groupURLSent();
   HttpClient client = new DefaultHttpClient();
   HttpGet request = new HttpGet(strURLSent);
   HttpResponse response = client.execute(request);
   GetOpenCellID_fullresult = EntityUtils.toString(response.getEntity()); 
   spliteResult();
  }

  private void spliteResult(){
   if(GetOpenCellID_fullresult.equalsIgnoreCase("err")){
    error = true;
   }else{
    error = false;
    String[] tResult = GetOpenCellID_fullresult.split(",");
    latitude = tResult[0];
    longitude = tResult[1];
   }

  }
 }

 int myLatitude, myLongitude;
 OpenCellID openCellID;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       TextView textGsmCellLocation = (TextView)findViewById(R.id.gsmcelllocation);
       TextView textMCC = (TextView)findViewById(R.id.mcc);
       TextView textMNC = (TextView)findViewById(R.id.mnc);
       TextView textCID = (TextView)findViewById(R.id.cid);
       TextView textLAC = (TextView)findViewById(R.id.lac);
       TextView textGeo = (TextView)findViewById(R.id.geo);
       TextView textRemark = (TextView)findViewById(R.id.remark);

       //retrieve a reference to an instance of TelephonyManager
       TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
       GsmCellLocation cellLocation = (GsmCellLocation)telephonyManager.getCellLocation();

       String networkOperator = telephonyManager.getNetworkOperator();
       String mcc = networkOperator.substring(0, 3);
       String mnc = networkOperator.substring(3);
       textMCC.setText("mcc: " + mcc);
       textMNC.setText("mnc: " + mnc);

       int cid = cellLocation.getCid();
       int lac = cellLocation.getLac();
       textGsmCellLocation.setText(cellLocation.toString());
       textCID.setText("gsm cell id: " + String.valueOf(cid));
       textLAC.setText("gsm location area code: " + String.valueOf(lac));

       openCellID = new OpenCellID();

       openCellID.setMcc(mcc);
       openCellID.setMnc(mnc);
       openCellID.setCallID(cid);
       openCellID.setCallLac(lac);
       try {
   openCellID.GetOpenCellID();

   if(!openCellID.isError()){
    textGeo.setText(openCellID.getLocation());
    textRemark.setText( "\n\n"
      + "URL sent: \n" + openCellID.getstrURLSent() + "\n\n"
      + "response: \n" + openCellID.GetOpenCellID_fullresult);
   }else{
    textGeo.setText("Error");
   }
  } catch (Exception e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   textGeo.setText("Exception: " + e.toString());
  }
   }   
}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello"
   />
<TextView 
   android:id="@+id/gsmcelllocation"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/mcc"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/mnc"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/cid"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/lac"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/geo"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
<TextView 
   android:id="@+id/remark"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:38:04.870

获取 Android 手机当前连接的当前网络运营商名称的最简单方法是获取 android.telephony.TelephonyManager 并从那里获取：

```
TelephonyManager telephonyManager =((TelephonyManager) Context.getSystemService(Context.TELEPHONY_SERVICE));
String operatorName = telephonyManager.getNetworkOperatorName(); 
```

String simName = telephonyManager.getSimOperatorName();

# facebook - Facebook API 在尝试使用 localhost 运行时发送错误响应

> ID：11643257
> 
> 赞同：2
> 
> 时间：2012-07-25T05:25:01.980
> 
> 标签：facebook, facebook-graph-api

我在本地主机中创建了一个小应用程序。

我已经检查了wieshark：

请求是：

> HTTP GET： [http ://www.facebook.com/dialog/oauth?api_key=APPID&app_id=APPID&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df17ca8709c %26origin%3Dhttp%253A%252F%252F127.0.0.1%253A8080%252Ffd1147b44%26domain%3D127.0.0.1%26relation%3Dparent.parent&client_id=121312018012923&display=none&domain=127.0.0.0&1&redirect_uri=en 2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df164e7a46c%26origin%3Dhttp%253A%252F%252F](http://www.facebook.com/dialog/oauth?api_key=APPID&app_id=APPID&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df17ca8709c%26origin%3Dhttp%253A%252F%252F127.0.0.1%253A8080%252Ffd1147b44%26domain%3D127.0.0.1%26relation%3Dparent.parent&client_id=121312018012923&display=none&domain=127.0.0.1&locale=en_US&origin=1&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df164e7a46c%26origin%3Dhttp%253A%252F%252F) * *127.0.0.1%253A8080%* *252Ffd1147b44%261%3D127.0.0\. %26relation%3Dparent%26frame%3Df216567208&response_type=token%2Csigned_request%2Ccode&sdk=joey

Facebook 正在发送 200 OK：

> [截断] 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者该域必须是一个 o 的子域

我不明白问题是什么：我的本地主机上运行了 XAMPP。在画布和站点 URL 中，我有：[http](http://mytestdomain.com:8080) ://mytestdomain.com:8080 。

在我的 /etc/hosts 机器中，我有 127.0.0.1 mytestdomain.com。

我正在运行的实际代码

```
<body>
        <div id="fb-root"></div>
<script>

      window.fbAsyncInit = function() {
          FB.init({appId: 'APPID', status: true, cookie: true, xfbml: true});

      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

      FB.getLoginStatus(function(response) {         
        if (response.status == "connected") {
        alert("yes I am in ");
        }
        else{
        alert(" you need to login to facebook:");
        }
        });

    function checkFacebookLogin() {
    alert("hai");
    }

    </script>

 <p id="fb_login_button_1"><fb:login-button onlogin="checkFacebookLogin();" size="medium" scope="email">Sign in using Facebook</fb:login-button></p>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:21:38.763

您在 Visual Studio 中调试的地址需要与您的[https://developers.facebook.com/](https://developers.facebook.com/) “站点 URL”完全匹配。我建议使用 IIS 进行调试并手动创建一个虚拟目录以匹配您的站点 URL。（另外，您不必指定端口，如果它不是默认的 80 或 443 端口，我发现有时会导致问题）

就我这个问题而言，调试时我有一个“http://www.domain.com/App”，但我的 Facebook 开发人员站点 URL 是“http://domain.com/App”。我还看到人们将斜杠“/”关闭或使用“https”而不是“http”。

底线是您需要确保您的 URL 匹配正确。Facebook 似乎非常挑剔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:27:19.727

在 Facebook 的应用程序配置中，您的应用程序 URL 是否指向您的本地主机？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:04:12.460

尝试在本地服务器上设置虚拟主机。你做的一个，你将能够创建虚拟 URL。如果您随后将 facebook 应用程序中的 URL 设置为虚拟 URL，我相信您将能够从本地服务器进行一些 facebook 调用，但是如果我没记错的话，您仍然无法发布到图表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:28:42.937

据我所知。Facebook 不再允许在 localhost 中测试您的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:54:35.070

我认为您可能对多个站点使用相同的应用程序和密钥。您需要更改您网站的应用程序和密钥，您可以从应用程序[facebook 开发人员生成您的密钥](https://developers.facebook.com/apps)

对我来说，这很有效，希望对您有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T16:19:19.843

另一种可能性：在我的情况下，我有多个 WP 插件/脚本调用 FB 代码，并且本地和生产上的 AppID 不同 - 在某个阶段，我忽略了本地/生产配置之间的冲突。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-05T10:16:07.770

看看以下内容，然后尝试：

1.  应用程序域：your-domain.com
2.  使用 Facebook 登录的网站：your-domain.com:8080
3.  在 C:\Windows\System32\drivers\etc\hosts 中，添加条目 127.0.0.1 your-domain.com
4.  在浏览器地址栏中输入：http: [//your-domain.com :8080/appname](http://your-domain.com:8080/appname)

而已！

# ios - ios aws sdk cloudfront 图像下载和视频流

> ID：11643266
> 
> 赞同：2
> 
> 时间：2012-07-25T05:25:45.417
> 
> 标签：ios, amazon-web-services, amazon-s3, stream, amazon-cloudfront

我正在构建一个需要使用亚马逊网络服务的应用程序。我已将图像上传到 Amazon S3 存储桶。现在我需要通过 CloudFront 下载它们。我设置了 2 个云前端分发 url（用于图像和视频，如 xxx.cloudfront.net）。

我的问题是如何进一步进行？

AWS iOS SDK 中是否有任何类可以执行此操作，或者我必须创建自己的请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:25:47.007

我希望这可以帮助你：

```
S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc] initWithKey:nameImage withBucket:@"nameBuckets"];

S3GetObjectResponse *getObjectResponse = [[AmazonClientManager s3] getObject:getObjectRequest];

UIImage *tampon = [[UIImage alloc] initWithData:getObjectResponse.body]; 
```

# struts - 如果action类在struts中返回null会发生什么？

> ID：11643272
> 
> 赞同：5
> 
> 时间：2012-07-25T05:26:39.557
> 
> 标签：struts

如果action类在struts中返回null会发生什么？

如果它显示空jsp页面，那么如果你想显示一些东西我们如何实现呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T05:35:13.223

如果 Action 返回 null，则不会进行进一步的处理/转发，并且将到目前为止的响应发送到客户端。

如果您只想发送错误响应，或者直接在 Action 中创建输出而不是转发到视图（当然不鼓励您这样做），这很有用。

如果要显示某些内容，请不要返回 null。

如果 Struts 代码在某种程度上超出了您的控制范围（但为什么会发生这种情况，即使您不想接触可以子类化的源代码），我想您可以安装一个 ServletFilter 来注入一些额外的后处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:24:29.313

我认为可以利用对服务器进行 AJAX 调用并在客户端浏览器中填充数据而无需重新加载页面。

# ruby-on-rails - rails 如何为数据库条目设置 id

> ID：11643275
> 
> 赞同：0
> 
> 时间：2012-07-25T05:27:08.257
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

如果您创建 5`User`条记录，则将它们全部销毁。创建的数据库中的下一个`User`条目将有一个`id`6。rails 怎么知道给这个新行一个`id`of`6`和 not `1`？我遇到了这个问题，因为我试图“猜测”`User`记录的下一个 id 是什么，但在上述情况下遇到了麻烦。我目前正在使用 postgresql，但我不相信这个功能会依赖于数据库？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:29:30.250

这取决于数据库。插入时，大多数数据库都会返回插入行的 id。在 PostgreSQL 中，您拥有所谓的“序列”，它保留当前/下一个 id 编号（不确定是哪个）。其他数据库可能会有所不同。

请参阅：[https ://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L726](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L726)

这是它找到当前序列的地方：[https ://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L1513](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L1513)

# .net - Protobuf 如何设置只读属性

> ID：11643278
> 
> 赞同：3
> 
> 时间：2012-07-25T05:27:24.553
> 
> 标签：.net, protobuf-net

我对这实际上是如何工作的很感兴趣，因为我只是想确保我没有弄错我的测试成功的事实。

从我读过的其他 stackoverflow 问题中，protobuf 无法设置只读属性。但它似乎做得很好。

我有以下课程（修剪以演示）

```
<
ProtoContract()
> _
Public Class WebOrder
    Implements IWebOrder

   Friend Sub New()
      MyBase.New()
      mItems = New Ordered.StockItemsCollection
   end sub 

   Private mItems As Ordered.StockItemsCollection
    <ProtoMember(4)>
    Public ReadOnly Property Items As Ordered.StockItemsCollection
        Get
            Return mItems
        End Get
    End Property

    Private ReadOnly Property COMItems As Ordered.StockItemsCollection Implements IWebOrder.Items
        Get
            Return mItems
        End Get
    End Property
end class 
```

当我使用以下代码对其进行测试时，它是成功的。

```
Dim si As New WebConnector.Ordered.StockItem With {.ItemType = WebConnector.StockItemType.Instruction, 
                    .Description = "test", .Quantity = 5}

activeOrder.Items.Add(si)

Using ms As New MemoryStream
    ProtoBuf.Serializer.Serialize(Of WebConnector.WebOrder)(ms, activeOrder)
    ms.Seek(0, SeekOrigin.Begin)
    ch = ProtoBuf.Serializer.Deserialize(Of WebConnector.WebOrder)(ms)
End Using

For Each si In ch.Items
    Debug.Print(si.ItemType.ToString & " --- " & si.Description & " --- x" & si.Quantity)
Next 
```

结果：

说明 --- 测试 --- x5

protobuf 是进入我的财产并找到支持字段并设置它，还是只是`.Add`针对集合或 StockItems？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:20:57.860

对于列表，它*不需要*是读写；基本上，如果它是只读的，它只使用`.Add`. 如果它是读写的，那么它还会做一个额外的“它是空的吗？如果是，创建一个列表的新实例，并调用setter”。这意味着惰性代码可以工作，即（以 ac# 为例）

```
[ProtoMember(12)]
public List<Foo> Items {get;set;} 
```

但是，我*个人对*列表的偏好是让它们像您的示例中那样只读。

> protobuf 是到达我的财产并找到支持字段并设置它还是只是 .Add 到集合或 StockItems？

后者。它从不尝试从属性中解析字段。如果您**明确标记**要序列化的字段，它将对它们起作用-但在没有被告知的情况下不会这样做。

# testing - 如何测试黄瓜表中未修剪的值

> ID：11643281
> 
> 赞同：1
> 
> 时间：2012-07-25T05:27:32.840
> 
> 标签：testing, cucumber, whitespace

如何在场景大纲示例中测试未修剪的值，例如“hola”（不带双引号）？

```
Examples:
  |Fullname|Email|Password|
  |       Felipe|felipe@gmail.com|1234567|
  |Felipe       |felipe@gmail.com|1234567|
  |   Felipe    |felipe@gmail.com|1234567| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:08:32.843

IMO 这是矫枉过正。您不需要对不属于您的代码进行深入测试。一个例子应该足以证明集成，例如：

```
Given I am adding a new person
When I fill in a name containing whitespace
Then the name should be saved with the whitespace stripped 
```

# wpf-controls - WPF 创建按钮并加载图像

> ID：11643284
> 
> 赞同：0
> 
> 时间：2012-07-25T05:28:23.783
> 
> 标签：wpf-controls

我想创建一个按钮并加载图像或将图像切片到按钮。图片如下

![云台图像](../Images/e89566f77db100adc879f17755b82870.png)

如果我们查看图像，中心有一个圆形（圆形）图像，它必须是一个按钮，中心图像周围有 4 个半曲线椭圆，即使它必须是一个按钮。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:34:24.320

本文是图像[上](http://www.c-sharpcorner.com/uploadfile/bryianTan/silverlight-creating-image-map-with-hotspots/)图像地图样式可点击区域的一个很好的示例。一个有点冗长的例子，但非常适用于您的查询。

# sql - 从单列中分离名称

> ID：11643285
> 
> 赞同：0
> 
> 时间：2012-07-25T05:28:23.627
> 
> 标签：sql, sql-server-2008

我的专栏看起来像这样

```
Fullname
--------------------------
Joseph Davis Matthews
Leonardo Maser Davidson
Leo Garces S. Yu 
```

我想分隔姓氏以便于搜索，所以我执行此子字符串函数

```
RIGHT(dbo.Fullname, 40) as lastname 
```

我的查询结果显示：

```
Lastname
---------------------------
Joseph Davis Matthews
Leonardo Maser Davidson
Leo Garces S. Yu 
```

源列是`char(40)`，是否有更简单的脚本将姓氏与列分开？

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:37:43.910

正如@marc_s 所提到的，您假设姓氏只是最后一个词。假设这是您想要的，您可以通过执行以下操作来获取字符串的最后一个单词：

```
declare @names as table
(
    name varchar(40)
)

insert into @Names values ('Joseph Davis Matthews')
insert into @Names values ('Leonardo Maser Davidson')
insert into @Names values ('Leo Garces S. Yu')

SELECT RIGHT(name,
        COALESCE(
            NULLIF(
                CHARINDEX(' ', REVERSE(name)) - 1,
                -1),
            LEN(name)))
FROM @names 
```

但同样，它假设每个人的姓只有 1 个单词，这是一个不正确的假设

# android - 相机文件夹中的位图副本

> ID：11643286
> 
> 赞同：0
> 
> 时间：2012-07-25T05:28:25.213
> 
> 标签：android, bitmap, storage, external

我在保存从 LayoutView 获得的位图图像时遇到了一个奇怪的问题。下面的代码创建位图并应作为图像导出到 SD 卡上的调色板文件夹。它实际上是这样做的，但是当我打开 Gallery 应用程序时，我的相机文件夹中也有位图的副本。有没有办法我可以单独复制到文件夹中而不在相机文件夹中复制？此外，如果有一种方法可以删除“相机”文件夹中的相同副本，那也可以。谢谢！

```
LinearLayout paletteView = (LinearLayout)findViewById(R.id.ExportBitmapLayout);
paletteView.setDrawingCacheEnabled(true);
paletteView.buildDrawingCache();
Bitmap bm = paletteView.getDrawingCache();

String filename = "PALETTETITLE";
filename.toLowerCase();
filename.replace(" ","_");
filename = filename.substring(0, (filename.length() < 30) ? filename.length() : 29);

ContentValues values = new ContentValues();
values.put(Images.Media.DATE_ADDED, System.currentTimeMillis());
values.put(Images.Media.MIME_TYPE, "image/jpeg");
values.put(Images.Media.TITLE, filename);

boolean created = createDirIfNotExists("palettes");

if (created)
    Log.i("Directory created","OK");    
else
    Log.i("Directory exists","OK");

//if successful
try 
{
    OutputStream fOut = null;

    String longString = Environment.getExternalStorageDirectory()
            + File.separator + "palettes" +File.separator + filename+".jpg";

    File f = new File(longString);
    fOut = new FileOutputStream(f);

    bm.compress(Bitmap.CompressFormat.JPEG, 100, fOut);

    fOut.flush();
    fOut.close();

    MediaStore.Images.Media.insertImage(getContentResolver(), f.getAbsolutePath(), filename, filename);

    Context context = ExportMenuImageActivity.this.getApplicationContext();
    Toast toast = Toast.makeText(context, "Image saved to Gallery! NOTE: Unintentional save in Camera folder. Fix in next update.", Toast.LENGTH_LONG);
    toast.show();

    MediaScannerConnection.scanFile(context, new String[] {longString}, null, new MediaScannerConnection.OnScanCompletedListener() 
    {   
        public void onScanCompleted(String path, Uri uri) 
        {
        }
    });

}

catch (FileNotFoundException e)
{
    e.printStackTrace();
}

catch (IOException e)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:36:07.607

```
Here is the complete solution of your problem.You can not do anything like protecting the camera folder to save images. But you can delete the latest image jsut after your image inserted inside the database.

Here is the code for deleting the latest file from the camera folder, Just do copy and paste it and call this method whenever you want to delete the latest file from you camera folder..

private void deleteLatest() {
        // TODO Auto-generated method stub
        File f = new File(Environment.getExternalStorageDirectory() + "/DCIM/Camera" );

        //Log.i("Log", "file name in delete folder :  "+f.toString());
        File [] files = f.listFiles();

        //Log.i("Log", "List of files is: " +files.toString());
        Arrays.sort( files, new Comparator<Object>()
                {
            public int compare(Object o1, Object o2) {

                if (((File)o1).lastModified() > ((File)o2).lastModified()) {
                    //         Log.i("Log", "Going -1");
                    return -1;
                } else if (((File)o1).lastModified() < ((File)o2).lastModified()) {
                    //     Log.i("Log", "Going +1");
                    return 1;
                } else {
                    //     Log.i("Log", "Going 0");
                    return 0;
                }
            }

                });

        //Log.i("Log", "Count of the FILES AFTER DELETING ::"+files[0].length());
        files[0].delete();

    }

If still you have any query then let me know!!!
Cheers... 
```

# android - 在断开 USB 电缆的同时完成活动

> ID：11643288
> 
> 赞同：1
> 
> 时间：2012-07-25T05:28:27.253
> 
> 标签：android, broadcastreceiver, activity-finish

我的应用程序可以通过两种方式启动。1.手动启动。（通过单击启动器菜单中的启动器图标） 2\. 自动启动（通过将 USB 电缆连接到设备）

该应用程序可以通过两种方式完成。1\. 手动完成（按下返回按钮） 2\. 自动完成（断开 USB 数据线）

我编写了一个广播接收器，如果 USB 电缆连接，它将启动应用程序。现在我通过 `"android.intent.action.ACTION_POWER_DISCONNECTED"`在活动本身中注册操作来完成我的活动。它工作正常。我的问题是当用户断开 USB 电缆而处于锁定状态的设备活动尚未完成时。活动中编写的广播接收器无法接收动作，但我可以在广播接收器中接收动作。我无法完成广播接收器的活动。

我正在做的是在广播接收器中将布尔变量设为 true，并检查活动的 onResume() 并尝试从 onResume() 完成活动。它也不起作用。有什么解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:03:53.257

现在已修复。我在 onResume() 中注册接收器并在 onPause() 中取消注册。所以当设备处于锁定状态时，我不会得到断开 USB 电缆的动作。因为当用户锁定设备时，应用程序将进入 onPause()。现在我在 onCreate() 中注册它并从 onDestroy() 注销，所以它正在工作。干杯！！！

# javascript - Jquery .Submit() 没有触发提交事件

> ID：11643290
> 
> 赞同：5
> 
> 时间：2012-07-25T05:28:35.147
> 
> 标签：javascript, jquery, submit, form-submit, jquery-events

我有一个很小的问题，

我想在下拉更改时使用 jQuery 提交我的代码：

```
 $("#mydropDown").change(function(){           
        $("#myForm").submit();
    }); 
```

但它没有提交。

我还在 Firebug 控制台中触发了以下代码：

```
$("#myForm").submit(); 
```

它给了我这个输出

`[form#myForm]`

我不明白有什么问题......：o？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:05:48.607

嗨，那次我使用 unbind ，但我真的很想找出它发生的原因。后来我找到了这个问题的答案。我不太确定它是否正确，但它对我有用。**在同一个表单 ('#myForm') 中，有一个 id='submit' 和 name='submit' 的提交按钮。** 我将两者都更改为 submit_btn 并且它对我有用，希望它可以帮助......

谢谢您的支持！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:34:59.163

您可能有另一个绑定到您的表单的事件正在取消提交事件。

要检查这一点，您可以在控制台中执行以下命令：

```
console.log($('#myForm').data('events')); 
```

这将输出绑定到您的表单的所有事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T05:38:51.813

可能是，如果要清理，您还有另一个事件绑定：

```
 $("#mydropDown").change(function(){           
        $("#myForm").unbind().submit();
    }); 
```

确保在

```
$(document).ready(function(){
  //....
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:47:04.133

jquery 是非常基本的，所以它必须是别的东西。为了调试这个我会注释掉所有的jquery，看看你是否可以用一个提交按钮来提交表单。

如果这不起作用，它将查看您的操作页面。

# javascript - 在 Windows 8 Metro Javascript 应用程序中使用 Geolocator 出现“管道正在关闭”错误

> ID：11643292
> 
> 赞同：2
> 
> 时间：2012-07-25T05:28:42.127
> 
> 标签：javascript, geolocation, windows-8, microsoft-metro

使用以下代码，我收到以下错误：

```
the pipe is being closed 
```

和

```
the wait operation timed out 
```

代码：

```
var loc = new Windows.Devices.Geolocation.Geolocator();
loc.getGeopositionAsync().done(function (pos) {
    console.log(pos);
}); 
```

我在 Windows 8 模拟器中运行它，并尝试启用和禁用模拟位置。

是什么导致了这个错误，在真正的 GPS 设备和模拟器中使用 Geolocator 成功检索用户位置的正确方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:04:23.807

您的代码在我的本地机器和模拟器上的 Windows 8 Release Preview 上都可以正常工作。

我在模拟器中对它进行了测试，同时打开和关闭了模拟位置。

要检查的一件事...您是否在应用清单的“功能”部分中启用了位置？

此外，您可能想尝试将位置信息写入屏幕...上面的代码只会将 pos 对象传递给控制台，因此即使您通过错误。

这是我所做的：

1.  从一个新的空白 JavaScript 应用开始。
2.  `<p>`打开 default.html，并在包含默认内容的标签中添加一个“geo”的 id 。
3.  将以下代码添加到 app.onactivated 处理程序以进行测试（我在右大括号之前添加了我的代码：

    ```
    var loc = new Windows.Devices.Geolocation.Geolocator();
    loc.getGeopositionAsync().done(function (pos) {
        console.log(pos);
        var geo = document.getElementById("geo");
        geo.innerText = pos.coordinate.latitude + ", " + pos.coordinate.longitude;
    }); 
    ```

我正在测试的机器是一台没有 GPS 的笔记本电脑，因此底层 API 将使用 WiFi 或 IP 地址信息进行地理定位。如果 GPS 可用，它应该用于对您的应用透明的位置数据。

# android - Android 中 SQLiteDatabase.CursorFactory 的用途是什么？

> ID：11643294
> 
> 赞同：41
> 
> 时间：2012-07-25T05:28:57.207
> 
> 标签：android, sqlite

我通过扩展`SQLiteOpenHelper`类创建了一个数据库。它也被创造了。这是我正在粘贴的代码

```
public Imagehelper(Context context) {
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);

    cntxt = context;
    filename = Environment.getExternalStorageDirectory();

    DATABASE_FILE_PATH_EXTERNAL = filename.getAbsolutePath()+File.separator+DATABASE_NAME;
    Log.i("Log", ":"+DATABASE_FILE_PATH_EXTERNAL);
} 
```

这里一切正常。但是如果你专注于参数传入 super **super(context, DATABASE_NAME, null, SCHEMA_VERSION);** . 我无法理解 null 参数。我知道在这里我们必须传递**SQLiteDatabase.CursorFactory**对象。

但是怎么办？？还有那有什么用？？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-25T05:42:43.803

传递 null 的原因是您想要标准`SQLiteCursor`行为。如果你想实现 a`specialized Cursor`你可以通过扩展来获得它`Cursor class`（这是为了对查询结果进行额外的操作）。在这些情况下，您可以使用`CursorFactory`该类返回您的 Cursor 实现的实例。这是该文件

[SQLiteDatabase.CursorFactory 文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.CursorFactory.html)

> 用于在调用查询时允许返回 Cursor 的子类。

# iphone - 指南针在说谎怎么办

> ID：11643301
> 
> 赞同：2
> 
> 时间：2012-07-25T05:29:57.027
> 
> 标签：iphone, ios, compass-geolocation

如果两个或多个不同设备上的指南针给我不同的航向，我该怎么办？我试图在设备上校准指南针，但无论如何有时它们会向我显示不同的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:44:20.953

由于 iPhone 罗盘“就像磁针罗盘一样工作”：

> 数字罗盘航向的准确性可能会受到磁场或其他环境干扰的影响，包括因靠近 iPhone 耳塞中的磁铁而造成的干扰。指南针可能需要不时校准（[Apple：iPhone 和 iPad：校准指南针](http://support.apple.com/kb/TS2767?viewlocale=en_US&locale=en_US)）。

您有几个固定指南针的选项：

1.  **按照指示！**以八字形动作移动设备。但是，这看起来对您不起作用。

2.  **“[d] 忽略要校准的消息”**。某些区域比其他区域具有更多的磁干扰，例如在汽车中，因为它的仪表板。您可以不理会它，因为“设备最终会在几圈后重新校准。请注意，它可能需要在您驾驶时定期重新校准，具体取决于存在的磁干扰水平。”

3.  **重新启动（不是“滑动关机”重新启动）。**按住电源按钮和主页按钮，直到出现 Apple 标志。

我很确定这些是你的选择。可能还有更多，所以我会做更多的研究。

如果您只是想看看哪个指南针是错误的，请获取一个**真正的**指南针并将其与两部 iPhone 上的航向进行比较。无论它与哪一个匹配，另一部电话都是错误的。如果您没有真正的指南针，您可以按照[本](http://adventure.howstuffworks.com/outdoor-activities/hiking/compass2.htm)教程自制一个（更有趣）！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:32:20.747

好吧，如果 2 个 iOS 设备为您提供 2 个不同的读数，那么其中至少有一个具有未校准的硬件。那么这是一个硬件问题吗？我认为在程序方面没有什么可做的，特别是如果你不知道确切的偏差是什么。

# c - 8皇后之谜：使用随机数导致无限循环

> ID：11643302
> 
> 赞同：0
> 
> 时间：2012-07-25T05:30:11.697
> 
> 标签：c, random, infinite-loop, n-queens

执行此代码时，我的终端大部分时间都挂起，但每隔一段时间我就会得到我想要打印出来的解决方案。我知道这不是解决皇后谜题的最佳方法，所以请不要对此发表评论。感谢任何花时间提供帮助的人。

```
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

int check(int number, int arr[]){
    int num = 0;
    int i;
    for(i = 0; i < 8; i++){
        if(arr[i] == number)
            num = 1;
    }

    return num;
}
int main(int argc, char * argv[]){
    srand(time(NULL));
    int r, r2, i, v;
    char arr[8][8];
    int sum[8] = {0};
    int sum2[8] = {0};
    int row[8];
    int col[8];
    int cRow[8];
    int cCol[8];
    int count = 0;
    int sums = 0;
    int sums2 = 0;

    //Fill arrays and 2d array.
    for(i = 0; i < 8; i++){
        row[i] = 0;
        col[i] = 0;
        cRow[i] = 0;
        cCol[i] = 0;
        for(v = 0; v < 8; v++){
            arr[i][v] = '_';
        }
    }
    for(v = 0; v < 8; v++){
        sum[v] = 0;
        sum2[v] = 0;
        printf("%d", sum[v]);
    }

    //Loop ends when 8 queens have been drawn
    while(count < 8){    

        r = rand() % 8;
        r2 = rand() % 8;
        sums = r + r2;
        sums2 = r2 - r;

        /*If space on board is empty. If row and col value have not been used.
        Once a value of both row and col that have not been used has been reached 
        by random, mark that value between 0-7 as used.*/
        if((row[r] == 0) && (col[r2] == 0) && (check(sums, sum)==0)&& (check(sums2, sum2)==0)){

            sum[count] = sums;
            sum2[count] = sums2;
            row[r] = 1;
            col[r2] = 1;

            /*These two are used to store coordinate values in 2 arrays to be written               later.*/
            cRow[count] = r;
            cCol[count] = r2;
            count++;            
            printf("\n%d\n", r);
            printf("%d\n", r2);
            printf("%d\n\n", sums);
            for(v = 0; v < 8; v++){
                //sum[v] = 0;
                printf("%d", sum[v]);
            }
        }
    }

    //Print the coordinate values. 
    printf("\n");
    for(v = 0;v<8;v++)
        printf("%d ", cRow[v]);
    printf("\n");
    for(v = 0;v<8;v++)
        printf("%d ", cCol[v]);
    printf("\n");

    //Write the coordinate values. 
    for(i = 0; i < 8; i++){
        arr[cRow[i]][cCol[i]] = 'Q';
    }

    //Print 2d array
    for(i = 0; i < 8; i++){
        for(v = 0; v < 8; v++){
            printf("%c ", arr[i][v]);
        }
        printf("\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:39:19.887

无限循环问题是因为如果您的程序到达无法合法放置更多皇后的地步，它就无法“回溯”。那时，它只会永远循环，徒劳地挑选不起作用的地方。相反，要摆脱这种情况，它需要“取消放置”它已经放置的东西。（因此，您将需要明确检测列、行或对角线中何时不再有合法点。）

# c# - 无法通过 asp 上传文件：使用 c# 2.0 在 asp.net 3.5 中上传文件

> ID：11643306
> 
> 赞同：0
> 
> 时间：2012-07-25T05:30:38.430
> 
> 标签：c#, asp.net

我无法通过 asp 上传文件：FileUpload 总是 FileUpload1.HasFile 是错误的以下是我尝试上传文件的代码，但不幸的是我仍然无法上传文件

ASPX 代码

c#代码后面的代码

```
protected void btSave_Click(object sender, EventArgs e)
{
    try
    {
            noteFile = "";
            /*File is existed or not cheked**/
            if (FileUpload1.HasFile)
            {
                /*File Size Checked*/
                if (FileUpload1.FileBytes.Length < 1024 * 1000)
                {
                    /*File Type Checked*/
                    string fileType=Path.GetExtension(FileUpload1.FileName);
                    if (fileType == ".xls" || fileType == ".doc")
                    {
                        /*get the last 'noteID' and add 1 to noteID*/
                        dt.Clear();
                        dt = dConnect.noteInfo(0, "", "", "", "", "", "", "", "admin");
                        noteID = 0;

                        /*Check the file name if any singal gile is save then need to delete it*/
                        dt.Clear();
                        dt = dConnect.noteInfo(0, "", "", "", "", "", "", dt.Rows[0]["noteID"].ToString() + '_', "byAdminFile");
                        exceprionString = "";
                        exceprionString = dConnect.exceptionMessage();

                        if (dt.Rows.Count == 0 && exceprionString.Equals(""))
                        {
                            noteID = 1 + Convert.ToInt32(dt.Rows[0]["noteID"].ToString());

                            FileUpload1.SaveAs(Server.MapPath("~/note") + noteID.ToString() + '_' + FileUpload1.FileName);

                            noteFile = noteID.ToString() + '_' + FileUpload1.FileName;
                        }
                        else
                        {
                            noteFile = "";
                            SMS("Only One File Can Stor Per Note");
                        }
                    }
                    else
                        SMS("Only Word or Excel File Can Upload");

                }
                else
                    SMS("File Size Should Not More Than 1 MB");
            }
            else
            {
                noteFile = "";
                SMS(FileUpload1.FileName.ToString());
            }

    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:51:40.417

**您是否正在使用 Browse 上传文件？** 如果是，您在受保护的 void Page_Load 上有任何内容吗？

**如果是，您是否使用 ASP.NET 的“AJAX”** 检查这个[FileUpload1.HasFile 总是返回 false](https://stackoverflow.com/questions/5848523/fileupload1-hasfile-is-always-returning-false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T11:22:34.447

请检查您的文件是否包含一些数据。我在空白文件中遇到了同样的问题。我在空白文件中添加了一些文本，它解决了我的问题。

要检查文件大小，您可以尝试使用以下代码

```
 if(FileUpload1.PostedFile.ContentLength > 1048576); 
```

# c# - 从 c# .net 中的另一个下拉列表中获取 SelectParameters 的参数

> ID：11643316
> 
> 赞同：0
> 
> 时间：2012-07-25T05:31:28.423
> 
> 标签：c#, .net

有谁可以从 c# .net 中的另一个下拉列表中获取 SelectParameters 的参数？

我在网上查了一下，我按照被告知的步骤进行操作，但它似乎对我不起作用。

代码：

如果我有以下代码来检索下拉列表的数据：

```
 <asp:DropDownList ID="DropDownVisaType" runat="server" DataSourceID="dsDropDownVisaType" CssClass="dsDropDownVisaType"
    DataValueField="VisaTypeID" DataTextField="VisaType" AppendDataBoundItems="true" >
        <asp:ListItem></asp:ListItem>
        </asp:DropDownList>  
        <asp:SqlDataSource ID="dsDropDownVisaType" runat="server" ConnectionString="<%$ ConnectionStrings:SmartStaffConnectionString %>"
           SelectCommand="app_visa_type_select" SelectCommandType="StoredProcedure">
        </asp:SqlDataSource> 
```

选择下拉列表后，我想使用下拉列表中的 VisaTypeID 从另一个下拉列表中检索数据，如下所示：

```
 <asp:DropDownList ID="DropDownVisaTypeSpecific" runat="server" DataSourceID="dsDropDownVisaTypeSpecific" CssClass="dsDropDownVisaTypeSpecific"
    DataValueField="VisaTypeSpecificID" DataTextField="VisaTypeSpecific" AppendDataBoundItems="true" >
        <asp:ListItem></asp:ListItem>
        </asp:DropDownList>  
        <asp:SqlDataSource ID="dsDropDownVisaTypeSpecific" runat="server" ConnectionString="<%$ ConnectionStrings:SmartStaffConnectionString %>"
           SelectCommand="app_visa_type_specific_select" SelectCommandType="StoredProcedure">
            <SelectParameters>
              <asp:ControlParameter Property="SelectedValue" ControlID="DropDownVisaType" Name="VisaTypeID" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

有谁知道我的代码出了什么问题，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:38:07.917

有一个事件 SelectedIndexChanged for A 下拉列表，您可以使用该事件获取所选项目的值。如下所示：

```
 protected void DropDownVisaType_SelectedIndexChanged(object sender, EventArgs e)
{
  Int32 value = Convert.ToInt32(DropDownVisaType.SelectedItem.Value);
  DropDownVisaTypeSpecific.DataSource=Method_Name(Value);
  DropDownVisaTypeSpecific.DataBind();
} 
```

# asp.net-mvc-3 - ASP.NET MVC 3 中的动态路由

> ID：11643319
> 
> 赞同：1
> 
> 时间：2012-07-25T05:31:38.390
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我正在使用 MVC 3 和 razor 构建博客引擎。在这种情况下，我给出了一个用户可以拥有多个博客的选项（类似于 blogger.com）

现在假设用户 'yasser' 有以下 3 个博客

*   技术故事
*   游戏极客
*   我的故事

所以我希望所有其他用户通过以下网址访问这些博客

*   www.domainName.com/blogs/TechStory
*   www.domainName.com/blogs/GameGeek
*   www.domainName.com/blogs/MeMyStory

并且可以添加更多博客，因此将来会访问更多此类 url。

我知道路由需要做一些事情，但是对 MVC 新手似乎并没有得到它。请有人指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:42:51.127

将此路线添加到您的默认路线之上：

```
routes.MapRoute(
    "Blog",
    "Blogs/{blogName}",
    new { controller = "Blogs", action = "Index" }
); 
```

您的控制器将如下所示：

```
public class BlogsController : Controller
{
    public ActionResult Index(string blogName)
    {
        BlogModel model = // find blog by blog name
        return View(model);
    }
} 
```

另外，一个建议：将控制器名称保持为单数模式：BlogController 而不是 BlogsController。如果您决定这样做，请相应地更改 URL 和路由。

# jquery - 来自 csv 文件的 Jquery 数据表

> ID：11643320
> 
> 赞同：0
> 
> 时间：2012-07-25T05:31:40.443
> 
> 标签：jquery, datatable

我正在尝试使用 php 从 csv 文件中填充我的 Jquery Dtable 以解析 csv，然后尝试使用 Dtable 进行渲染，但似乎不起作用（

```
TypeError: nCell is undefined
[Break On This Error]   nCell.className += ' '+oCol.sClass; 
```

）。让它工作的其他解决方法是什么？

```
<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $('#result_table').dataTable();
            } );
</script>

<?php 
echo "
<table cellpadding='0' cellspacing='0' border='0' class='display' id='result_table' width='100%'>
            <thead>
                <th>Zeit</th>
                <th>Level</th>
                <th>Message</th>
                <th>Refferer</th>         
            </thead>\n\n";
$f = fopen("../logfile.csv", "r");
while (($line = fgetcsv($f)) !== false) {
        echo "<tr>";
        foreach ($line as $cell) {
                echo "<td>" . htmlspecialchars($cell) . "</td>";
        }
        echo "<tr>\n";
}
fclose($f);
echo "\n    <tfoot>
        <tr>
                <th>Zeit</th>
                <th>Level</th>
                <th>Message</th>
                <th>Refferer</th>     
        </tr>
    </tfoot></table>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:48:19.857

根据上面的评论，您似乎缺少标签。

```
<tbody>
</tbody> 
```

在它读取 CSV 以确保它是一个有效的表之后，我会检查 Firebug 或 View Source 中的 HTML 输出。

# salesforce - 当测试类中的 seeAlldata = false 时，如何创建具有系统管理员配置文件的用户

> ID：11643324
> 
> 赞同：4
> 
> 时间：2012-07-25T05:32:04.180
> 
> 标签：salesforce, apex-code

我想使用系统管理员配置文件在测试类中创建一个用户。

我遇到的问题是我有 seeAllData = false 在测试类中只使用来自测试类的数据。

```
 List<Profile> ps = [select id, name from Profile where  name = 'System Administrator']; 
```

这可能不会返回任何值。

我们如何创建用户的任何想法

**编辑**

即使使用seeAllData = false，我也可以获取查询数据。即使 SeeAllData = false ，配置文件记录是否可见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T12:14:47.150

根据[文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_data_access.htm)，用户和配置文件对象被认为是“用于管理您的组织的对象”，并且无论您的测试类/方法是否包含`IsTest(SeeAllData=true)`注释都可以访问。

可以通过这种方式访问​​的其他对象包括：

*   组织
*   记录类型
*   顶点类
*   顶点触发器
*   顶点组件
*   顶点页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T11:36:28.940

```
We can use the code directly to create a role and attach it to a user with system admin profile.

@isTest static void UserCreate() { 
UserRole obj=new UserRole(Name= 'ABC'); 
insert obj; 

Profile pf= [Select Id from profile where Name='System Administrator']; 

String orgId=UserInfo.getOrganizationId(); 
String dateString=String.valueof(Datetime.now()).replace(' ','').replace(':','').replace('-','') 

Integer RandomId=Integer.valueOf(Math.rint(Math.random()*1000000)); 
String uniqueName=orgId+dateString+RandomId; 

User uu=new User(firstname = 'Alan', 
lastName = 'McCarthy', 
email = uniqueName + '@test' + orgId + '.org', 
Username = uniqueName + '@test' + orgId + '.org', 
EmailEncodingKey = 'ISO-8859-1', 
Alias = uniqueName.substring(18, 23), 
TimeZoneSidKey = 'America/Los_Angeles', 
LocaleSidKey = 'en_US', 
LanguageLocaleKey = 'en_US', 
ProfileId = pf.Id, 
UserRoleId = obj.Id); 

} 
```

# iphone - 为什么我们在 sqlite3_prepare_v2( ) 中使用 NULL

> ID：11643325
> 
> 赞同：0
> 
> 时间：2012-07-25T05:32:09.290
> 
> 标签：iphone, ios, ios4, sqlite

请谁能告诉我为什么我们`NULL`在下面的第五个参数中写？

```
if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:41:11.210

只要你`sql`只有一个语句，你就不需要使用第五个参数。当`sql`有多个语句时，您可以收到指向下一个语句开头的指针。例如：

```
const char* sql =
  "DROP TABLE price_list;"
  "CREATE TABLE price_list ( item TEXT, price INTEGER)";
while ( *sql ) {
  sqlite3_stmt* statement;
  sqlite3_prepare_v2(db, sql, -1, &statement, &sql);
  sqlite_step(statement);
  sqlite_finalize(statement);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:39:01.580

因为您不关心 SQL 语句的未编译部分。从[文档](http://sqlite.org/c3ref/prepare.html)：

> 如果 pzTail 不为 NULL，则 *pzTail 指向 zSql 中第一个 SQL 语句末尾之后的第一个字节。这些例程只编译 zSql 中的第一条语句，因此 *pzTail 指向未编译的内容。

如果您有一个包含许多 SQL 语句的字符串，那么使用它会很有用，但如果您没有，那么它就很笨拙。

# google-maps - gmap3 在标记顶部显示集群图像

> ID：11643327
> 
> 赞同：0
> 
> 时间：2012-07-25T05:32:20.713
> 
> 标签：google-maps, jquery-gmap3

我已经使用了集群和标记。工作场所集群和用户标记。这里用户的标记应该出现在集群的顶部，但我想要在顶部的集群图像和用户的标记下方。我也尝试过改变css，如下所示 -

```
.cluster-3
{
    background: url(images/m3.png) no-repeat;
    line-height: 66px;
    width: 70px;
    height: 56px;
    z-index:5000 !important;
    position:relative;   
} 
```

但对地图没有影响。

请提出任何好的解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:04:14.013

[**MarkerOptions**](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)有一个`zIndex`属性，您可以对其进行修改以获得所需的效果。[](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

# ruby-on-rails - 在我的 Rails 应用程序中使用 HAML 列出表中的所有项目时，我也会得到一个奇怪的转储。erb 不会发生这种情况

> ID：11643334
> 
> 赞同：0
> 
> 时间：2012-07-25T05:33:24.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我知道这个问题的标题可能很奇怪，但这是我能用文字解释的最好方法。情况如下：

我制作了一个简单的 Rails 应用程序，其中有一个名为“Teams”的表。此表中有一些条目，我想遍历并列出所有团队的名称。这是我为控制器和视图编写的代码：

**团队控制器.rb**

```
def index
  @teams = Team.all
  respond_to do |format|
    format.html
  end
end 
```

**index.html.haml**

```
%h3
  Listing teams

= @teams.each do |team|
  %p= link_to team.name, team

%p= link_to 'Add new team', new_team_path 
```

输出正确地遍历了所有团队，但随后也抛出了 @teams 全部内容的奇怪转储。这是一个屏幕截图：

![截屏](../Images/e6d00166477eddcb9370d6d03bcd43a1.png)

更重要的是，以前当我使用默认的 erb 标准写出这篇文章时，一切都很好。我决定改用haml，这似乎是唯一出现的问题，我一生都无法弄清楚为什么会这样。

希望得到一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T05:37:09.790

删除`=`行`each`首（第 4 行）并将其替换为`-`. 您正在输出每个（即每一行）的返回值。

像这样：

```
%h3
  Listing teams

- @teams.each do |team|
  %p= link_to team.name, team

%p= link_to 'Add new team', new_team_path 
```

# java - 将检票页面的内容包含在检票面板中

> ID：11643335
> 
> 赞同：1
> 
> 时间：2012-07-25T05:33:28.063
> 
> 标签：java, wicket, panel, webpage

在我的项目中，我遇到了检票口面板的问题。假设我们有一个扩展 WebPage 的现成页面

```
public class MyPage extends WebPage {
  public MyPage(){
    add(new Label("some id","Hello"));
  }
} 
```

和扩展面板的面板

```
 public class MyPanel extends Panel{
  public MyPanel(){
    // here need to add content of MyPage
    // for example : inclide(new MyPage())
  }
} 
```

如何将我的页面包含到面板中，或者如何将页面内容包含到面板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:28:49.617

将 Mypage 拆分为页面和面板，在 MyPanel 中重用这个新面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:17:05.047

**第一个想法**：不要。Wicket 是基于组件组件树的。这是该框架的两个主要优点。不要破坏这些。

**第二个想法**：如果你真的真的很想......通过它的构造函数向面板提供内容。Wicket 是 Java，而 Java 是面向对象的。只是传递你的对象...

**第三个想法**：在 Wicket >= 1.5 的情况下，使用 Wicket 事件系统来触发目标对象的更改。

# android - 如何使用 Android ViewPager？

> ID：11643341
> 
> 赞同：10
> 
> 时间：2012-07-25T05:34:12.880
> 
> 标签：android, android-layout, android-viewpager

> **可能重复：**
> [android viewPager 实现](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

有人可以告诉我如何在我的项目中正确实施 ViewPager 吗？我需要知道使用它可以实现什么？我对编程和android有点陌生。基本上我需要对我现在正在开发的应用程序使用水平分页。

我需要一步一步的指导指南。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T05:37:22.197

试试这个网站 -[使用 ViewPager 滑动页面](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

这将帮助您逐步实现视图寻呼机。

[ViewPager 示例](http://manishkpr.webheavens.com/android-viewpager-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:45:19.053

它是使用新的 ADT 20 自动完成的，您只需在创建新的 Android 应用程序时在右侧部分中选择“tabs+swipe”。然后，您只需要创建片段，例如他们给您的 Dummy 片段。

# java - 将文本写入 html 文件类型

> ID：11643351
> 
> 赞同：3
> 
> 时间：2012-07-25T05:35:13.503
> 
> 标签：java, file, webpage

我正在尝试将以下方法的结果写入网页。我认为这是可能的，我只是很难弄清楚到底该怎么做。任何帮助将不胜感激。谢谢。

```
...
      System.out.println("Final Register");
      for (int i=0; i < ch.length; i++)
        {
         System.out.println(cd.getDenomLiteralAt(i)+" "+cd.getDenomNumAt(i));
        }
   }

... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T06:19:58.023

在java中，有很多方法可以在文件上写入数据。要写入文本数据，最简单的方法是使用 BufferedWriter。

请参阅下面的演示

```
FileWriter fWriter = null;
BufferedWriter writer = null;
try {
    fWriter = new FileWriter("fileName.html");
    writer = new BufferedWriter(fWriter);
    writer.write("<span>This iss your html content here</span>");
    writer.newLine(); //this is not actually needed for html files - can make your code more readable though 
    writer.close(); //make sure you close the writer object 
} catch (Exception e) {
  //catch any exceptions here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:38:08.947

您需要做的就是知道您的网络服务器的公共 HTML 文件的路径。

运行 Java 代码并写入该路径下的文件。这与写入机器上的任何其他文件没有什么不同，除了这个世界可以看到的文件。唯一的问题是，如果您的 Java 将创建该文件，您应该确保为该文件设置足够的保护权限。0755 是中等安全的。

# objective-c - 请揭开这个空的神秘面纱

> ID：11643361
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:36:20.287
> 
> 标签：objective-c, ios

我在我的项目中调用 Web 服务，用于处理 Web 服务结果有一个方法，它告诉服务返回什么。其他方法使用此值进行进一步处理。

网络问题、网络服务问题或任何 xyz 原因、网络服务处理方法返回 (null) 值。

现在我必须执行 nul 检查，两种方法对我有用

```
if([val isEqualToString:@"(null)"]) ...

if(!val) ... 
```

关于检查 null 有很多问题，但没有清除我的概念。有人说如果我检查长度`val.length`为 6，则检查长度，因为处理程序方法返回“（null）”。我`!val`不清楚这是如何工作的。有些人还说检查 isKindOfClass [NSNull null] ...

请任何人都可以揭开这个空的神秘面纱。

请不要比较 nil vs Nil vs Null ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:26:26.553

`if(!val)`将测试是否`val`是`null`。那应该是您想要使用的，简单明了。`if(val == nil)`是等价的。

`[val isEqualToString:@"null"]`顾名思义，将测试是否`val`等于*字符串*“null”，这肯定会使其不是`null`。

`[val isKindOfClass:[NSNull class]]`现在与你无关，所以不要担心。

**编辑，因为您要求解释`NSNull`**：

有时，您需要能够存储*概念*而`nil`不是`nil`自身。

`nil`假设你想要一个里面有一个数组。你希望你的数组看起来像`[obj1, obj2, nil, obj3]`.

你不能像这样声明一个数组，`[NSArray arrayWithObjects:obj1, obj2, nil, obj3, nil]`因为当它通过参数时，当它看到`nil`它就会停止。这将导致数组`[obj1, obj2]`，这不是您想要的。

那么在这种情况下你会怎么做呢？你做你的数组`[NSArray arrayWithObjects:obj1, obj2, [NSNull null], obj3]`。现在您的数组中有一个*对象*，但这个特定的对象是系统中每个人都同意称之为“null”的对象。**它实际上不是空的。**

这里真正发生的`[NSNull null]`是一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。当您调用 时`[NSNull null]`，它会返回 的静态实例`NSNull`。如果您`[NSNull null]`再次调用，它将返回相同的对象，无论您在哪里调用该方法。因为`NSNull`在您的应用程序的整个世界中只有一个实例，所以它*等同*于 null，因为在同一个地址上永远不会有一个对象不具有 null 的含义。

所以，正如我上面所说，它与你根本无关。仅`NSNull`当您需要合法的 Objective-C 对象但您希望它为“null”时才需要。它通常`NSNull`比简单地使用字符串`@"(null)"`或类似的东西更安全，因为它可能会覆盖该字符串的值，弄乱字符串比较，有时您可能需要将字符串存储`@"(null)"`在与您相同的数据结构中'正在存储空对象等。

# css - CSS：复杂选择器 :parent 和 :not

> ID：11643374
> 
> 赞同：3
> 
> 时间：2012-07-25T05:37:42.343
> 
> 标签：css, css-selectors

我有这个 html 代码：

```
<div class='ui'>
    <h3 class='title'>
        <a href='#'>Link to Header</a>
    </h3>
</div>
<a href='#'>Another link</a> 
```

我想为所有锚 a 设置 CSS 样式，但不是为 div.ui 的父 h3 元素中的那个。我无法将类添加到锚 a 到 h3 元素中。

我试试这个：

```
a:not(:parent:parent.ui){color:#dedede;} 
```

但这不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T05:39:58.847

正如 Kobi 在评论中指出的那样，没有这样的`:parent`选择器。

相反，我建议您设置所有`a`标签的样式，然后在不同规则中的`a`标签内设置标签：`h3`

```
a { 
    color: #dedede;
}
.ui h3 a {
    color: another color;
} 
```

# displaytag - 如何使用 displaytag 格式化列中的文本？

> ID：11643375
> 
> 赞同：0
> 
> 时间：2012-07-25T05:37:42.177
> 
> 标签：displaytag

我在显示标签中遇到问题。在我的应用程序中有一个名为“city”的下拉列表，其中包含不同的值 hyd、b'lore 等。因此，当我们从城市下拉列表中选择一个选项并单击提交时，会使用显示标签显示表格数据. 单击提交按钮后数据正在显示，但数据格式不正确。我可以格式化该列中的文本吗？

```
description(displaying the data like this) 
--------------
aaaa
aaaaa
a
aaa
aaaaaaaa
aaaa
aaaaaa
aa
aaaaaaaaaaaa

description(i want the data to be like this)
----------
aaaaaa
aaaaaa
aaaaaa

    That is actually the data can be adjusted in maximum of 3-4 lines but here the data is adjusted inin morethan 6-7 lines. 
This is only happening with only one particular record.. Hw can i do this?? 
```

我这样写标签：

```
<display:column property="description" style="width:2%;white-space:nowrap;"  class="normalfont"/> 
```

任何人都可以建议我在显示标签的样式属性中使用哪些值来格式化文本..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T10:18:06.317

您可以使用`maxLength="integer"`. 我会将文本设为

> 描述（显示这样的数据）
> 
> * * *
> 
> 啊啊啊……
> 
> 啊啊啊……
> 
> 啊啊啊……

如下使用

```
<display:column property="description" style="width:2%;white-space:nowrap;"  class="normalfont" maxLength="40"/> 
```

# sql-server-2008 - 将 SQL 转换为 Sybase 方言

> ID：11643384
> 
> 赞同：0
> 
> 时间：2012-07-25T05:38:34.783
> 
> 标签：sql-server-2008, sybase

查询是

```
Select id from TableA 
where typ_cd="NT"
 and id not in
( select id from TableA where typ_cd="BB") 
```

我需要找到那些 type_cd ="NT" 的 id，并将这些 id 与 type_cd="BB" 不存在的同一个表进行比较。我很困惑为什么上面的查询没有返回正确的值。

编辑：-我正在引用同一个表，并且列 ID 没有空值

请让我知道如何在 sql server 中实现相同的结果，以便我可以尝试在 sybase 中编写等效查询

```
 TableA

id typ_cd
 1   NT
 1   BB
 3   NT
 4   NT
 4   BB 
```

我需要 id=1`result`因为 id=1 存在于 typ_cd=NT 但不存在于 typ_cd=BB 但目前上述查询在 sybase 中为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:50:57.410

用单引号替换双引号。

```
Select id from TableA 
where typ_cd='NT'
 and id not in
( select id from TableA where typ_cd='BB') 
```

# objective-c - 如何使用 MKNetworkKIt 在服务器上发布 NSData

> ID：11643385
> 
> 赞同：0
> 
> 时间：2012-07-25T05:38:33.863
> 
> 标签：objective-c, soap, mknetworkkit

目前我们的应用程序正在使用`ASIFormDataRequest`在服务器上发布数据。

我正在使用

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:urlWeb];
[request setShouldPresentAuthenticationDialog:NO];
[request addRequestHeader:@"User-Agent" value:@"ASIHTTPRequest"];
[request setRequestMethod:@"POST"];
[request addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
[request addRequestHeader:@"SOAPAction" value:@"http://something"];
[request setUsername:@"ABC"]; 
[request setPassword:@"XYZ"]; 
[request setDomain:@"LMN"];
[request appendPostData:[strSoapEnvl dataUsingEncoding:NSUTF8StringEncoding] ];
[request setDelegate:self];
[request setTimeOutSeconds:60];
[request setNumberOfTimesToRetryOnTimeout:2];
[request startAsynchronous]; 
```

但是`ASIHTTPRequest`不支持 ARC。所以我决定使用*MKNetworkKIt*作为替代品。但我没有得到任何示例代码来做同样的事情。

我已经看到从 Mugunth Kumar 的 github 下载的代码，但他们在那里使用`NSMutableDictionary`对象作为参数`MKNetworkOperation`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:31:57.973

对于 SOAP，您应该使用类似的东西。

```
[op setCustomPostDataEncodingHandler:^NSString *(NSDictionary *postDataDict) {

    DDXMLDocument *doc = [[DDXMLDocument alloc] initWithXMLString:[rootElement XMLString] 
                                                      options:0 
                                                        error:nil];
    return [doc XMLString];

} forType:@"text/xml"]; 
```

`NSDictioanry`适用于 JSON、URL 或 x-plist 编码，它们实际上是最常见的编码类型。

# php - 使用 PHP 为 MySQL 添加整数

> ID：11643387
> 
> 赞同：-2
> 
> 时间：2012-07-25T05:38:44.267
> 
> 标签：php, mysql

我正在为我的会员制作一个很酷的系统，他们将红宝石作为一种货币。

当他们登录时，我的代码是这样的......

```
$rubies = $row['Rubies'];

        require("scripts/functions.php");

        check($lastdate);

        if ($outcome == 1){
        $outcome2 = "10";
            mysql_query("UPDATE users SET Rubies=".$outcome2."+10 WHERE id = '".$dbid."'");
            } 
```

它的功能...

```
function check($lastdate){

    if ($dbuser == $lastdate){
        $outcome = 0;
        }
        else
            $outcome = 1;

} 
```

为什么这不向我的数据库添加 10 个红宝石？我只有 12 岁，乖点...查看我的屏幕：[https ://join.me/515-042-461](https://join.me/515-042-461)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:41:04.480

因为你要加 10 到 10。

```
UPDATE users
  SET Rubies = Rubies + 10
  WHERE id = :sanitized_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:45:06.630

您的函数没有返回任何内容，目前它只是设置变量`$outcome`。添加一个`return $outcome;`，像这样：

```
function check($lastdate){
    if ($dbuser == $lastdate){
        $outcome = 0;
    } else {
        $outcome = 1;
    }
    return $outcome;
} 
```

还有一些其他的事情需要考虑，在将变量放入 SQL 语句之前对其进行清理。我个人建议使用 mysqli 或 PDO 作为 DB 连接器，因为

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

而且，请确保`$dbuser`在此功能中以某种方式可用。

# css - 将提交和取消按钮与引导程序对齐

> ID：11643389
> 
> 赞同：3
> 
> 时间：2012-07-25T05:38:54.470
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我`bootstrap 2.0`在我的 Rails 应用程序中使用（使用`bootstrap-sass`gem）并且无法让提交按钮与取消按钮对齐。

以下是 html.erb 文件中表单的代码片段：

```
<div class="span3">
  <%= f.submit class: "btn btn-primary" %>
  <button type="button" class="btn">Cancel</button>
</div> 
```

这是它生成的 HTML：

```
<input class="btn btn-primary" type="submit" value="Add Person" name="commit">
<button class="btn" type="button">Cancel</button> 
```

这就是它在 Firefox 14.0.1 中的样子。当我看着

![未对齐按钮的图片](../Images/fc290905f39f631aa90d3a40af91e272.png)

注意：将 input-append 添加到 div 让我接近（见下图）但仍然有点偏离 - 请注意取消仍然有点低，并且添加人员按钮右侧的圆角被切断.

![在此处输入图像描述](../Images/b906c8d0a4aafaeec518723018981fd6.png)

我怎样才能让这两个按钮正确对齐？

**更新** 我使用的是 Firefox 14.0.1。当我查看@Vestride 创建的 jsfiddle 来复制这个问题时，我看到的是：

![在此处输入图像描述](../Images/da61d29d1e2292b911c97ca024c74c37.png)

我对第一个结果很满意，但是当我将完全相同的代码添加到我的网站时，我没有得到相同的结果。相反，我得到了上面混乱的对齐方式。我想知道这意味着什么？也许我的引导程序 CSS 搞砸了？

**更新 7/27** 响应 Vestride 的最新建议，这里是按钮，它们显示在我的 Firefox 中，来自小提琴 Vestride 放在一起。请注意，从输入更改为提交没有任何改进。 ![在此处输入图像描述](../Images/965f689f1c0a30fe68e091fd2120b049.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:28:22.743

我做了一个 jsfiddle [http://jsfiddle.net/Vestride/YT3sq](http://jsfiddle.net/Vestride/YT3sq)但无法复制您的问题。它们非常适合我（Chrome 21）。你使用的是什么浏览器？在第二个示例中，我向`btn-group`容器元素添加了一个类。这也可能解决您的问题。

编辑：尝试制作你`<input />`的`<button type="submit">`. 为我在 Firefox 中工作。我也更新了小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-26T12:52:27.533

我知道这是一个老问题，但是使用 Bootstrap 4 我遇到了同样的问题。为我解决的问题是在**提交按钮**上使用引导类添加`margin-bottom: 0`或类。`mb-0`

# c# - 读取大型 excel 文件的 Open XML SDK 性能如何？

> ID：11643392
> 
> 赞同：3
> 
> 时间：2012-07-25T05:39:07.513
> 
> 标签：c#, .net, excel, com, openxml-sdk

全部，

我们计划在 Visual Studio C#（开发客户端应用程序）中使用 Microsoft 的 Open XML SDK 来读取大的 excel 文件，导入数据并输入到数据库中。

它的性能如何？

您认为使用 COM 更好吗？或使用其他商业图书馆来执行此操作？

非常感谢，非常感谢您的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:59:26.520

OpenXML 优于 .Net 中的 COM 互操作。尽管您在 OpenXML 中没有看到比 COM 更显着的性能，但它很容易编码。更容易维护。考虑到您应该阅读大量数据，请查看以下链接以进行优化。

[http://msdn.microsoft.com/en-us/library/ff191178.aspx](http://msdn.microsoft.com/en-us/library/ff191178.aspx)

[http://blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open-xml-sdk.aspx](http://blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open-xml-sdk.aspx)

Johan 有一篇很好的文章，关于为什么我们不应该使用 COM Interop [http://weblogs.asp.net/jdanforth/archive/2011/05/15/never-never-never-do-office-interop-on-the-服务器.aspx](http://weblogs.asp.net/jdanforth/archive/2011/05/15/never-never-never-do-office-interop-on-the-server.aspx)

如果您认为 OpenXML 编码过多，请查看 ClosedXML。它是免费的，可以作为 OpenXML 的包装器。

[http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:19:39.657

如果您使用流式方法，则可以使用 Open XML SDK 非常快速地读取/创建巨大的电子表格：

[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/01/10/screen-cast-using-open-xml-and-linq-to-xml-in-a-streaming-fashion-to-创建巨大的电子表格.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/01/10/screen-cast-using-open-xml-and-linq-to-xml-in-a-streaming-fashion-to-create-huge-spreadsheets.aspx)

-埃里克

# ruby-on-rails - 在 Ruby/Rails 中将对象列表呈现为 JSON 的更简单方法

> ID：11643393
> 
> 赞同：0
> 
> 时间：2012-07-25T05:39:16.717
> 
> 标签：ruby-on-rails, ruby, json, list

我想将对象列表呈现为 JSON，但我不想使用 to_json，因为我想呈现非常特定的格式和信息子集。

这是我的观点（`foo.json.erb`）：

```
{
"id" : <%= @user.id %>,
"progress" : [
    <% @rewards_tapped[0..-2].each do |reward| %>
        <%= render "rewardprogress", :reward => reward, 
                                     :user => @user %>,
    <% end %>
    <%= render "rewardprogress", :reward => @rewards_tapped.last, 
                                 :user => @user %>
]
} 
```

如您所见，它非常难看，因为我必须单独渲染@rewards_tapped 中的最后一项，以便它在条目后没有逗号（以生成有效的JSON）。

必须有更好的方法来做到这一点，我对 Ruby 有点陌生。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:49:47.267

尝试不同的模板系统，如[rabl](https://github.com/nesquena/rabl)或[jbuilder](https://github.com/rails/jbuilder)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:18:49.227

如果您不需要增量渲染，那么您可以简单地构建一个嵌套的哈希/数组 Ruby 数据结构，然后调用`#to_json`它。您还可以使用符号作为键，它们将成为生成的 JSON 中的字符串键。

假设您确实需要增量渲染，那么这可能是您可以做出的一个小改进（或者可能只是用另一种丑陋代替）。`@rewards_tapped`如果转换为数组 for速度很慢，这可能会更快`[0..-2]`。

```
{
"id" : <%= @user.id %>,
"progress" : [
    <% @rewards_tapped.each_with_index do |reward, idx|
    %><%= idx == 0 ? '' : ',' %>
    <%= render "rewardprogress", :reward => reward, 
                                     :user => @user
    %><% end %>
]
} 
```

# c++ - 我可以在原语上调用 delete 吗？

> ID：11643395
> 
> 赞同：5
> 
> 时间：2012-07-25T05:39:21.303
> 
> 标签：c++, templates, destructor, delete-operator

我有一个模板类 myFoo，它存储 T 类型的“东西”，它可以是原始类型，也可以是指向复杂类型的指针。当 myFoo 被删除时，我想释放与它碰巧存储的所有内容相关的所有内存。这意味着我需要在存储的每个指针上调用 delete，但我也可能最终在原语上调用 delete。这样安全吗？？

我在下面包含了 myFoo 的草图，以更好地突出正在发生的事情。我不确定析构函数的行为是否定义明确。

```
template<class T>
class myFoo
{
   public:
       myFoo(int size) 
       { 
          size_ = size;
          T* foo = new T[size_]; 
       }

       void addFoo(T tmp, int index) 
       {
             foo[index] = tmp;
       }

       virtual ~myFoo()
       {
           for(int i=0; i < size_; i++)
           {
               delete foo[i];
           }
           delete [] foo;
       }

  private:
      int size_;
      T* foo;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T05:43:00.850

您唯一可以调用`delete`的是指针类型。例如，调用 是一个错误`delete`。`int`如果您安排您的模板，以便您的代码尝试做一些错误的事情，编译器会通知您并拒绝编译您的代码。

所以不，您不必担心“意外”删除非指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:16:47.687

模板专业化

```
template <class T> struct delete_it;

template <class T> struct delete_it<T*>
{
   static void func(T* ptr) { delete ptr; }
};

template <> struct delete_it<int>
{
   static void func(int) {}
};

template <> struct delete_it<double>
{
   static void func(double) {}
}; 
```

对所有原始类型重复此操作。然后

```
 virtual ~myFoo()
   {
       for(int i=0; i < size_; i++)
       {
           delete_it<T>::func(foo[i]);
       }
       delete [] foo;
   } 
```

未经检查的代码。

# c++ - 获取控件周围的“填充”

> ID：11643397
> 
> 赞同：1
> 
> 时间：2012-07-25T05:39:33.997
> 
> 标签：c++, winapi, size, controls

我使用win32来生成我的界面。

我正在寻找窗口自然放置在控件周围的填充。例如，在选项卡控件中，选项卡控件的高度包括顶部边框的高度和顶部的选项卡标题的高度。按钮也是如此。

我想知道如何在创建实际控件之前找到这些额外填充的确切高度，因为我需要将它们添加到高度和宽度，以便控件的客户区在创建后是正确的大小具有静态精确大小的主机内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:03:38.727

请参阅`AdjustWindowRect`调整窗口以进行填充。

# iphone - 应用程序因非消耗品而被应用商店拒绝

> ID：11643400
> 
> 赞同：0
> 
> 时间：2012-07-25T05:40:31.910
> 
> 标签：iphone, in-app-purchase, appstore-approval

我们发现，虽然您的应用提供可恢复的应用内购买，但它不包括允许用户恢复之前购买的应用内购买所需的“恢复”功能，如恢复交易中所述应用内购买编程指南的部分：

“...如果您的应用程序支持必须可恢复的产品类型，则您必须包含一个允许用户恢复这些购买的界面。此界面允许用户将产品添加到其他设备，或者，如果原始设备被擦除，则可以在原始设备上恢复交易。”

要恢复以前购买的应用内购买产品，最好提供一个“恢复”按钮，并在用户点击“恢复”按钮时启动恢复过程。

有关恢复交易和验证商店收据的更多信息，请参阅应用内购买编程指南。

我使用了这些恢复方法：

```
- (void) restoreTransaction: (SKPaymentTransaction *)transaction {
    [self recordTransaction: transaction]; 
    [self provideContent: transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction]; 
}

- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error; 
```

请任何人告诉我我的界面中缺少什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:14:04.547

您需要添加一个**恢复购买**按钮，这意味着您需要为用户提供一种方法来恢复他们已购买的项目。

# serialization - 当我在 apache 模块中序列化嵌套类时发生段错误

> ID：11643402
> 
> 赞同：1
> 
> 时间：2012-07-25T05:40:57.703
> 
> 标签：serialization, boost, apache-modules

在 Apache 模块中序列化简单类“A”没有错误，但是当我尝试序列化我的复杂对象（如具有成员类型“A”的“X”）时，我在 Apache 模块中遇到了段错误。（这不会发生在可执行的控制台应用程序上）

------------------------- 这是我的代码：-------------------- -

```
class A {
private:
    friend class boost::serialization::access; // to enable boost "access" class to call private "serialize" method of class "A"
    template<class ArchT>
    void serialize(ArchT &ar, unsigned int version) {   // method for both serializing and deserializing
        ar & memA; // (de)serialize member "memA"
    }
    std::string memA; // sample member
public:
    A(){}
    A(std::string pmemA) :
        memA(pmemA) {
    }
    std::string GetMemA()
    {
        return memA;
    }
};
class X {

private:
    friend class boost::serialization::access;
    template<class ArchT>
    void serialize(ArchT &ar, unsigned int version) {
        ar & memX;
        ar & a;
    }
    std::string memX;
    A a;
public:
    X(std::string pmemX, A pa) :
        memX(pmemX), a(pa) {
    }
    X(){}

};
-------------------
                        string st=GetRandomFileName();
            ofstream out(st.c_str());
            boost::archive::text_oarchive out_r(out);
            A a("Amem");
            X x("Xmem", a);
            out_r << x; // not works
                        out_r << a; // works! 
```

-------------------这是来自gdb for apache的堆栈跟踪----------------

boost::serialization::typeid_system::extended_type_info_typeid_0::is_less_than(boost::serialization::extended_type_info const&) const () from /tmp/libIRSProWebApacheModule.so

2 0xb7223c61 在 std::_Rb_tree

# git - Git推送到远程存储库上的分支不起作用

> ID：11643408
> 
> 赞同：0
> 
> 时间：2012-07-25T05:41:29.783
> 
> 标签：git

我有两个存储库 origin 和 fork。我在本地克隆了 origin 并将 fork 添加为远程存储库。我现在创建了一个新的本地分支，例如：

```
git checkout master
git branch new
git checkout new 
```

我对 new 进行了一些更改并在本地提交了它们。现在，我想将我的新分支推送到 fork 存储库。我尝试了以下方法：

```
git push fork new 
```

然而，这实际上推动了起源。新分支是在 origin 而不是 fork 中创建的。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:44:48.210

添加到您的`~/.gitconfig`：

```
[push]
    default = current 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:13:43.823

可能您的远程“分叉”指向错误的 URL。您可以使用以下命令获取有关远程仓库的所有信息：

`git remote show <remote_name>`

# linux - 如何使用 getopts 创建标志以在 linux 中运行 mount 命令？

> ID：11643414
> 
> 赞同：0
> 
> 时间：2012-07-25T05:42:19.770
> 
> 标签：linux, parameters

我需要脚本方面的帮助。我的脚本是查找挂载是否存在。虽然我希望它仅在我使用 getopts 传递标志时运行。我怎样才能做到这一点？

```
FS_TO_CHECK="/dev"

如果猫 /proc/mounts | grep $FS_TO_CHECK > /dev/null; 然后
# 文件系统已挂载
别的
# 文件系统没有挂载
菲

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:44:52.683

传递命令行参数的最简单示例：

`$ ./MyScript.sh some_parameter`

MyScript.sh：

```
#!/bin/bash

echo $1 
```

这是[关于 getopts 的简单教程](http://wiki.bash-hackers.org/howto/getopts_tutorial)。

# php - 如何在没有 composer 的情况下安装 Doctrine2 Extensions？

> ID：11643415
> 
> 赞同：0
> 
> 时间：2012-07-25T05:42:32.017
> 
> 标签：php, symfony, doctrine-orm, composer-php

我想安装[这个](http://gediminasm.org/article/install-gedmo-doctrine2-extensions-in-symfony2)。

但我对作曲家感到不舒服。有没有其他办法。

我的意思是我可以在哪里复制文件夹并将其粘贴到某个地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:27:55.407

如果您想要将某些内容放入您的 deps 文件中，您可以尝试

```
[gedmo-doctrine-extensions]
    git=http://github.com/l3pp4rd/DoctrineExtensions.git
    version=v2.1.0
[DoctrineExtensionsBundle]
    git=git://github.com/stof/StofDoctrineExtensionsBundle.git
    target=/bundles/Stof/DoctrineExtensionsBundle 
```

# php - 在数组中查找各种值？

> ID：11643421
> 
> 赞同：1
> 
> 时间：2012-07-25T05:43:14.027
> 
> 标签：php, arrays

我想在数组中找到几个值中的任何一个的第一次出现。

```
$sentence = array(I, want, to, go, to, the, market);
if(in_array(array('swim','fly','go'), $sentence)) {
    // Should return KEY = 3 as 'go' was found in the third key of the array
    } 
```

我敢肯定这一定很常见，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:45:07.417

[http://tr.php.net/manual/en/function.array-keys.php](http://tr.php.net/manual/en/function.array-keys.php)

我想更具体地说，您正在寻找这种类型的功能？

```
<?php
$array = array(0 => 100, "color" => "red");
print_r(array_keys($array));

$array = array("blue", "red", "green", "blue", "blue");
print_r(array_keys($array, "blue"));

$array = array("color" => array("blue", "red", "green"),
               "size"  => array("small", "medium", "large"));
print_r(array_keys($array));
?> 
```

上面的示例将输出：

```
Array
(
    [0] => 0
    [1] => color
)
Array
(
    [0] => 0
    [1] => 3
    [2] => 4
)
Array
(
    [0] => color
    [1] => size
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:47:19.130

请使用此函数**array_search**如果在数组中找到元素，它将返回元素的键

例子

```
$array = array(0 => 'blue', 1 => 'red', 2 => 'green', 3 => 'red');

$key = array_search('green', $array); // $key = 2;
$key = array_search('red', $array);   // $key = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:48:52.203

首先你应该正确阅读 in_array 函数的手册，你以错误的顺序传递参数

```
$sentence = array(I, want, to, go, to, the, market);

 $found_key = array();   
 foreach($sentence as $key => $word)
    {
      if(in_array($word,array('swim','fly','go')))  
       { $found_keys[] = $key;}
    }
   print_r($found_keys); 
```

我希望这是你需要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:53:24.820

array_keys 会很有效。

```
$keys = array_keys($sentence,array('swim','fly','go'); 
```

然后 $keys 将是一个在 $sentence 中游泳、飞行和去的键的列表

就像下面的代码将返回具有空值的键列表

```
$array = array('one','','three');
$keys = array_keys($array,""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T06:01:45.820

```
function find_in_array($needles,$array) {
    $pos = false;
    foreach ($needles as $key => $value) {
        if (in_array($value, $array)) {
            if(!$pos || array_search($value, $array) < $pos) {
                $pos = array_search($value, $array);
                }
            }
        }
        return $pos;
    }

echo find_in_array($values,$sentence); 
```

This is what I am using right now, I'm testing array_keys as suggested by Darian Brown

# javascript - 在 emberjs 的插座中绑定子视图和集合

> ID：11643426
> 
> 赞同：2
> 
> 时间：2012-07-25T05:43:53.720
> 
> 标签：javascript, ember.js, handlebars.js

我正在尝试`Team`在`{{outlet}}`. 此`Team`视图由一个简单`Person`视图（团队领导）和一组`Person`视图（团队成员）组成。`connectOutlet()`通过调用ApplicationController来设置插座。

尽管`Person`子视图按预期呈现在标记中，`name`但缺少所有值。看来我的绑定和/或控制器设置不正确。我错过了什么？

代码和演示：http: [//jsfiddle.net/aek38/fkKFJ/](http://jsfiddle.net/aek38/fkKFJ/)

相关的车把模板有：

```
<script type="text/x-handlebars" data-template-name="app">
    <div class="container">
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" data-template-name="person">
    <em>Person name is:</em> {{name}}
</script>

<script type="text/x-handlebars" data-template-name="team">
    <h3>Team Leader</h3>
    <em>Leader name should be:</em>{{leader.name}}
    {{view App.PersonView contentBinding="leader"}}
    <h3>Team Members</h3>
    {{#collection contentBinding="members"}}
        {{view App.PersonView contentBinding="content"}}
    {{/collection}}
</script> 
```

代码片段：

```
App = Ember.Application.create({
ready: function() {
    this.initialize();
},
ApplicationController: Ember.Controller.extend(),
ApplicationView: Ember.View.extend({
    templateName: "app"
}),

Person: Ember.Object.extend({
    name: "Jane Doe"
}),
PersonController: Ember.ObjectController.extend(),
PersonView: Ember.View.extend({
    templateName: "person"
}),

Team: Ember.Object.extend({
    members: [],
    leader: null
}),
TeamController: Ember.ObjectController.extend(),
TeamView: Ember.View.extend({
    templateName: "team"
}),
// ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:26:17.420

您可以使用

```
{{view App.PersonView contextBinding="leader"}} 
```

并使用`{{#each}}`而不是`{{#collection}}`成员

[http://jsfiddle.net/LQTsV/1/](http://jsfiddle.net/LQTsV/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:07:35.053

不太确定发生了什么，但我调整了您的小提琴以使其正常工作：

[http://jsfiddle.net/lifeinafolder/sPcwv/](http://jsfiddle.net/lifeinafolder/sPcwv/)

似乎绑定在某种意义上无法正常工作：

> 内容绑定=“这个”

有效，但

> contentBinding="this.leader"

没有。

对不起，但我无法解决更多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:10:23.377

您`content`在人员视图上设置变量`contentBinding`可能应该是`personBinding`. 然后在你的模板中你应该得到`view.person.name`.

`{{collection}}`应该是一个`{{each}}`块。

```
{{#each members}}
    {{view App.PersonView personBinding="this"}}
{{/each}} 
```

此人员模板将在正确的位置查找名称。

```
<script type="text/x-handlebars" data-template-name="person">
    <em>Person name is:</em> {{view.person.name}}
</script> 
```

没有改变你的js。

小提琴：http: [//jsfiddle.net/albertjan/fkKFJ/9/](http://jsfiddle.net/albertjan/fkKFJ/9/)

# iphone - 如何从使用 instantiateViewControllerWithIdentifier 调用的视图控制器设置 UIImageView？

> ID：11643427
> 
> 赞同：0
> 
> 时间：2012-07-25T05:43:53.360
> 
> 标签：iphone, objective-c, xcode, ios5

我正在使用情节提要，我需要使用子视图来导入 xib。xib 只是显示图像。它有一个 UIImageView 和一个 UIBarButtonItem。将图像作为子视图导入后如何设置？

我已经尝试在子视图 xib 的 h+m 文件中设置方法，但也许我做错了。这是我的代码

```
-(void)showPreviewImageScreen:(UIImage *)image 
{

    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"libraryImagePreview"];

    [vc setPreviewImage:image];

    [self.navigationController.view addSubview:vc.view];

} 
```

我得到的错误是“UIViewController 没有可见的@interface 声明选择器'setPreviewImage'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:08:11.570

没有一种称为 setPreviewImage 的方法（据我所知）。您使用 setImage: 设置图像：但这必须在您的 xib 中的 UIImageView 上调用，而不是在您的视图控制器 vc 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:49:28.683

@rdelmar 感谢您为我指出正确的方向。这是我想出的解决方案。我用 1 标记了 UIimageView，然后循环遍历子视图以找到此标记并以这种方式定位它。

```
-(void)showPreviewImageScreen:(UIImage *)image 
{

    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"libraryImagePreview"];

    for (UIView *subview in vc.view.subviews)
    {
        if(subview.tag==1)
        {
            UIImageView *IV = subview;
            [IV setImage:image];
        }
    }

   [self.navigationController.view addSubview:vc.view];

} 
```

# sharepoint-2010 - 在使用功能添加新列表之前检查列表是否存在？

> ID：11643434
> 
> 赞同：0
> 
> 时间：2012-07-25T05:44:48.150
> 
> 标签：sharepoint-2010, sharepoint-list, sharepoint-feature

我正在尝试使用功能创建一些列表，以便在团队网站上激活该功能后立即自动创建这些自定义列表。该功能的范围是站点级别。在使用功能添加新列表之前，是否可以检查网站集中已经存在的列表？我试图对功能激活事件进行此检查，这给了我错误，说同名列表已经存在。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:10:57.443

```
public static class SPWebHelper
{
    public static bool IsListExistByTitle(this SPWeb web, string title)
    {
         return web.Lists.Cast<SPList>().FirstOrDefault(
                        list => list.Title == title) != null;
    }

    public static bool IsListExistByInternalName(this SPWeb web, string internalName)
    {
         return web.Lists.Cast<SPList>().FirstOrDefault(
                        list => list.RootFolder.Name == internalName)!=null;
    }
} 
```

电话分机功能

```
bool existlist = SPContext.Current.Web.IsListExistByTitle("YourListTitle"); 
```

# c# - 如何从类中返回多个参数

> ID：11643445
> 
> 赞同：1
> 
> 时间：2012-07-25T05:45:35.337
> 
> 标签：c#, methods, parameters

## 我现在从这个类返回字符串主题，如果我想从这个类返回两个字符串，我该怎么做？

字符串主题；

```
 public string getdata(string EmailFrom,string EmailTo, string EmailComment )
    {

        {

            scom.CommandType = CommandType.StoredProcedure;

            try
            {

                SqlDataReader rdr = scom.ExecuteReader();
                if (rdr.HasRows)
                {
                    while (rdr.Read())
                    {

                    Subject = rdr["EmailSubject"].ToString();

                    }
                }

                return Subject; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:49:15.057

您可以使用“输出”参数。

```
var string1 = String.Empty;
var string2 = String.Empty;

public string MyMethod(out string string1, out string string2)
{
    string1 = "string1";
    string2 = "string2";
} 
```

有关这方面的更多信息：[out（C# 参考）](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)

您可以返回自己的 DTO（数据传输对象）类。

```
class MyResult {
   string Property1 { get; set;}
   string Property2 { get; set;}
}

public MyResult MyMethod(){
    var result = new MyResult();
    result.Property1 = "string1";
    result.Property2 = "string2";
    return result;
} 
```

有关 DTO 的更多信息：[http ://en.wikipedia.org/wiki/Data_transfer_object](http://en.wikipedia.org/wiki/Data_transfer_object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:49:25.100

在类中使用类型参数...例如

```
static void FooClass(out int foo, out int bar)
{
    foo= (int)Math.Pow(2, 2);
    bar= (int)Math.Pow(3, 2);
} 
```

您也可以使用`List<String>`将 Datareader 的值放入其中并返回 List 集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T05:49:43.430

这些是您可用的选项。

1.  使用 ref 或 out 关键字[。- .NET 中 ref 和 out 参数之间的区别](https://stackoverflow.com/questions/135234/difference-between-ref-and-out-parameters-in-net)
2.  创建一个类或结构并从方法中返回该类或结构
3.  如果您使用的是 .Net 4.0+，则可以使用 Tuple 类。- [http://msdn.microsoft.com/en-us/library/system.tuple.aspx](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T05:56:43.620

只要您不介意重新调整的参数，您就可以使用[元组重新调整多个参数](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)`tuple.Item1, tuple.Item2, tuple.Item3`

```
public Tuple<string, string, string> GetData()
{

Tuple<string, string, string> tuple = new Tuple<string, string, string>("1",
        "cat", "dog");
return tuple;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:50:18.470

您可以使用要返回的属性创建一个类/结构，也可以返回字符串的枚举（例如 a `List<string>`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T05:52:59.043

创建一个对象，例如

```
public class MailType
{
    string _subject=string.empty;
    string _string1=string.empty1;
    string _string2=string.empty2;

    public string Subject
    {
         get{
             return _subject;
         }
         set{
             _subject=value;
         }
    }

    public string String1
    {
         get{
             return _string1;
         }
         set{
             _string1=value;
         }
    }

    public string String2
    {
         get{
             return _string2;
         }
         set{
             _string2=value;
         }
    }
} 
```

在循环中创建此类的对象，将值存储在对象的 Subject、String1 和 String2 属性中，并从函数中返回 List：getdata..

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-25T05:51:28.580

您需要定义一个包含 3 个字段的类型，表示您希望从该方法返回的信息。比您更改方法的签名以返回您定义的类型。从内部，您使用获取的任何数据初始化此类型的实例并将其返回。

不幸的是，现代 OO 语言不支持从语言级别的方法返回两个（或更多）。

# screen-scraping - 无需设置规则即可自动查找文本内容的网络抓取工具或库

> ID：11643448
> 
> 赞同：0
> 
> 时间：2012-07-25T05:46:08.003
> 
> 标签：screen-scraping, web-scraping, beautifulsoup, scrapy

是否有网络抓取工具或库可以自动检测重复的 HTML 块并抓取块内的文本内容，从而无需人工输入规则 - CSS 选择器或 xpath 来查找内容？

这是基于现代内容网站是由 PHP 或 Python 等服务器端语言动态生成的假设。内容几乎总是由模板中的 for 循环呈现，因此总是可以找到重复的 HTML 块。一个例子：

```
<div id="content">

<div class="blog entry">
    <div class="title">
        <h1>1st post</h2>
    </div>
    <div class="content">
        <p>...</p>
    </div>
</div>

<div class="blog entry">
    <div class="title">
        <h1>2nd post</h2>
    </div>
    <div class="content">
        <p>...</p>
    </div>
</div>

<div class="blog entry">
    <div class="title">
        <h1>3rd post</h2>
    </div>
    <div class="content">
        <p>...</p>
    </div>
</div>

</div> 
```

像 bautiful soap 和 scrapy 这样的库需要人工输入规则才能进行抓取。它们不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:58:53.097

你可能想看看我的[抓取库](http://videlibri.sourceforge.net/cgi-bin/htmlparserExampleCGI)。它不会自动工作，也不会检测到重复的部分。但它很接近，因为它根本不需要规则，而是使用模板，您可以直接从您拥有的 html 中获取模板。

例如，在上面的示例中，读取 2 个数组中所有帖子的模板是：

```
 <div id="content">

 <div class="blog entry">
     <div class="title">
         <h1>{title:=.}</h1>
     </div>
     <div class="content">
         <p>{content:=.}</p>
     </div>
 </div>*

 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:56:21.847

没用过，但听说过[scrapely](https://github.com/scrapy/scrapely)：

> 与大多数抓取库不同，Scrapely 不适用于 DOM 树或 xpath，因此它不依赖于诸如 lxml 或 libxml2 之类的库。相反，它使用了一个内部的纯 Python 解析器，它可以接受格式不正确的 HTML。HTML 被转换为一个令牌 id 数组，用于匹配要提取的项目。
> 
> Scrapely 提取基于基于实例的学习算法，并使用解析器树将匹配的项目组合成复杂的对象（它支持嵌套和重复的对象），灵感来自 A Hierarchical Approach to Wrapper Induction

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T05:14:46.600

你可以试试 HTQL：

```
import htql;
a=htql.Browser();

p,b=a.goUrl('http://channel9.msdn.com/Blogs/Vector/Announcing-BUILD-2012');
htql.query(p, '&html_main_text'); 

p,b=a.goUrl('http://stackoverflow.com/questions/tagged/screen-scraping');
htql.query(p, '&html_main_text'); 
```

# c# - C# Console.ReadKey 1 个字符滞后？

> ID：11643456
> 
> 赞同：0
> 
> 时间：2012-07-25T05:47:18.470
> 
> 标签：c#, console.readkey

我正在尝试使用 Console.ReadKey() 函数来拦截用户的击键并重建他们在屏幕上输入的内容（因为我需要经常清除屏幕，经常移动光标，这似乎就像确保他们输入的内容不会消失或出现在屏幕上的随机点的最全面的方法一样。

我的问题是：在做类似的事情时，是否有其他人因为没有更好的术语而经历过 1 个字符的“滞后”？假设我想输入单词“This”。当我按“T”时，无论我等待多长时间，什么都没有出现。当我按“h”时，会出现“T”。“i”，出现“h”。在我按下另一个键之前，我键入的字母不会出现，即使那个键是空格键。有人对我做错了什么有任何建议吗？我确定这与我使用 Console.Readkey 的方式有关，我只是看不出有什么替代方案可行。我在下面附上了一个小而简单的例子。

谢谢！

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading;

    namespace ConsoleApplication2

{
    class Program
    {

        private static string userInput = "";
        static ConsoleKeyInfo inf;
        static StringBuilder input = new StringBuilder();

        static void Main(string[] args)
        {
            Thread tickThread = new Thread(new ThreadStart(DrawScreen));
            Thread userThread = new Thread(new ThreadStart(UserEventHandler));
            tickThread.Start();
            Thread.Sleep(1);
            userThread.Start();
            Thread.Sleep(20000);
            tickThread.Abort();
            userThread.Abort();
        }

        private static void DrawScreen()
        {
            while (true)
            {
                Console.Clear();
                Console.SetCursorPosition(0, 0);
                Console.Write("> " + userInput);
                Thread.Sleep(300);
            }
        }

        private static void UserEventHandler()
        {
            inf = Console.ReadKey(true);

            while (true)
            {
                if (inf.Key != ConsoleKey.Enter)
                    input.Append(inf.KeyChar);
                else
                {
                    input = new StringBuilder();
                    userInput = "";
                }

                inf = Console.ReadKey(true);

                userInput = input.ToString();

            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:05:51.517

这是因为你有 2 次`Console.ReadKey()`

如果您将代码更改为此

```
 private static void UserEventHandler()
    {
        while (true)
        {
            inf = Console.ReadKey(true);
            if (inf.Key != ConsoleKey.Enter)
                input.Append(inf.KeyChar);
            else
            {
                input = new StringBuilder();
                userInput = "";
            }
            userInput = input.ToString();
        }
    } 
```

它不会滞后。第二个`Console.ReadKey()`是阻止您的代码。我没有检查你是否需要`true`readkey的参数，那是让你找出来

# ruby - 如何阻止来自 Ruby Mechanize Gem 的访问？

> ID：11643460
> 
> 赞同：3
> 
> 时间：2012-07-25T05:47:37.347
> 
> 标签：ruby, screen-scraping, web-scraping, mechanize, mechanize-ruby

我开始为 Ruby 使用 Mechanize gem，我想知道 Web 服务器是否可以检测并阻止来自 Mechanize 代理的活动？

如果是，阻止 Mechanize 废弃或访问网站的代码或步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:09:55.303

他们可以通过多种方式检测自动化流程正在访问他们的站点：

*   他们可以检查用户代理字符串。
*   他们可以看到您的要求。浏览器请求 HTML 页面中的所有图像和 CSS。默认情况下不会机械化。
*   一个人停下来阅读一页并理解它所说的内容。一段代码不会，除非它被编程为暂停，否则它将全速运行，因此请求一个接一个地快速跟进。

这些不一定指向 Mechanize 运行，而是代码抓取网站的指纹。

他们能做些什么呢？

*   禁止该用户代理。
*   禁止来自您的 IP 号码或域或子网的任何请求。
*   禁止来自您的 IP 号码、域或子网的任何过快发生的请求。

有许多不同的方法可以处理这些事情，具体取决于他们的服务器和网络硬件。

这个问题对于 StackOverflow 来说是非常离题的，可能应该在[https://serverfault.com/](https://serverfault.com/)或[https://webmasters.stackexchange.com/上提问](https://webmasters.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:49:34.507

您可以建立一个 robots.txt 文件并希望人们尊重它。

如果您开始通过 User-Agent 字符串阻止，他们可以假装是 IE。

# html - 使用 HTML 表单输入更新 JSON 文本文件

> ID：11643461
> 
> 赞同：0
> 
> 时间：2012-07-25T05:47:41.107
> 
> 标签：html, json, forms

如果这已在其他地方得到回答，我很抱歉。我真的做了很多搜索，但没有什么能完全回答我的问题。另外，我有点新，所以在回答时请记住这一点......

我有一个来自[http://timeline.verite.co/](http://timeline.verite.co/)的时间线， 这是一个很棒的时间线，可以通过 JSON 文件进行更新。但是，我希望能够通过我网站上的用户表单更新 JSON 文件。

例如：有一个管理页面...表单区域的代码在这里：

```
 <div id = "contentarea">    
        <div id="tab1">
            <form id="randomevents" method="POST" action="#">
                <ul>
                    <li><label for="event_title">Event Title</label>
                        <input id="event_title" type="text"></li>
                    <li><label for="event_details">Event Details</label>
                        <textarea rows="15" cols="44"></textarea></li>
                    <li><label for="date">Date: ex "mm/dd/yyyy"</label>
                        <input id="date" type="text"></li>
                    <div id="submitevent"><button type="submit" class="button">Submit</button></div>

                </ul>
            </form> 
```

时间线位于另一个页面上......它的代码是这样的：

```
 <div id="timeline-embed"></div>
    <script type="text/javascript">
        var timeline_config = {
        width:              '100%',
        height:             '300px',
        source:             'data.json',
        start_at_end:       false,                          
        start_at_slide:     '1',                            
        hash_bookmark:      true,                           
        font:               'Bevan-PotanoSans',             
        maptype:            'watercolor',                   
        css:                'js/maintimeline/compiled/css/timeline.css',    
        js:                 'js/maintimeline/compiled/js/timeline-min.js'   
    }

</script> 
```

JSON 文件如下所示（部分）：

```
{
"timeline":
{
    "headline":"Helen Queen",
    "type":"default",
    "text":"A beautiful mother, wife, woman",
    "date": [
        {
            "startDate":"1924,1,26",
            "headline":"A little girl is born into a big family!",
            "text":"<p>Helen is born on January 11, 1924\. She is the fifth girl and the eight overall child!</p>",
            "asset":
            {
                "media":"images/fortimeline/helen.jpg",
                "credit":"",
                "caption":""
            }
        }, 
```

我想要的是让用户在管理页面上的表单中输入内容并让它更新（并添加到）JSON 文件，然后它会自动更新时间轴页面。就像我说的那样，我已经搜索了答案，但没有完全匹配的答案，或者答案让我难以理解！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:27:32.333

您的管理区域应该将更改的文件发送到服务器，我想您已经实现了该部分。

您的时间线页面（客户端）需要做的是获悉数据发生了变化。这基本上可以通过两种方式完成：

*   定期**轮询**服务器以询问是否有更改。这很容易做到：创建一个计时器，例如每 60 秒再次从服务器请求数据，将其与已有的数据进行比较，如果发生更改，则重新绘制时间线。这种方法在服务器端不需要什么特别的。更有效的方法不是一次又一次地检索完整的文件，而是实现一个像“getLastUpdatedTimestamp”这样的服务器端方法，它返回文件最后更新的时间。然后客户端可以比较这个时间戳而不是整个文件，如果发生更改，则检索新文件。

*   **通过推送**通知自动获得服务器的通知。这将是最好的解决方案，但还不是很容易实现（需要在客户端和服务器之间保持一个套接字打开，这仅受现代浏览器支持）。

# java - 返回图像资源 ID

> ID：11643465
> 
> 赞同：1
> 
> 时间：2012-07-25T05:48:13.383
> 
> 标签：java, android

我正在尝试让用户导入自定义背景的程序。

这是我所在的位置：

我有 getDrawable 函数将另一个函数作为参数：

```
mDrawableBg = getResources().getDrawable(getImage()); 
```

getImage() 假设返回一个引用所选图像的整数，这是该函数的代码（到目前为止）：

```
public int getImage(){

    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
    intent.setType("image/*");
    startActivityForResult(intent, 10);

} 
```

这是假设打开图库并让用户选择图像。然后我会使用 mDrawableBg 来设置背景。不过，我不确定如何将参考 ID 返回到该选定图像。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:56:31.647

试试这个：

```
 String pathName = "selected Image path";
    Resources res = getResources();
    Bitmap bitmap = BitmapFactory.decodeFile(pathName);
    BitmapDrawable bd = new BitmapDrawable(res, bitmap);
    View view = findViewById(R.id.container);
    view.setBackgroundDrawable(bd); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T05:55:20.453

我不确定，但如果您的意思是您不知道如何从该意图接收结果，您可以使用：

```
 @Override
    protected void onActivityResult(int requestCode,int resultCode,Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_OK) 
        {
            if (requestCode == 10)
            {
                // DoSomething
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:19:39.723

恐怕您尝试这样做的方式是不可能的。作为一名新的 Android 开发人员，您需要了解的一件事是活动之间的循环是如何工作的。在您的情况下，您正在运行一个`Activity`调用 an`Intent`从它获取数据的方法。然而，在 Android API 中，an`Intent`只能在它自己的时候被引用。这意味着您不能`getImage()`按照您尝试过的方式使用您的方法。

不过还是有希望的！

您首先需要做的是调用`Intent`. 您将通过您现在拥有的代码执行此操作`getImage()`：

```
public void getImage() { // This has to be a void!
    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
    intent.setType("image/*");
    startActivityForResult(intent, 10);
} 
```

此方法现在将启动您希望用户从中选择的图像选择器。接下来，您必须捕获返回的内容。这**不能**从您的`getImage()`方法返回，而是必须从其他地方收集。

您必须实现以下方法：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        final int SELECT_PICTURE = 1; // Hardcoded from API
        if (requestCode == SELECT_PICTURE) {
            String pathToImage = data.getData().getPath(); // Get path to image, returned by the image picker Intent
            mDrawableBg = Drawable.createFromPath(pathToImage); // Get a Drawable from the path
        }
    }
} 
```

最后，不要调用`mDrawableBg = getResources().getDrawable(getImage());`，只需调用`getImage();`。这将初始化图像选择器。

一些阅读：

*   [Android `Activity`（特别是关于`Intent`s 的内容并返回结果）](http://developer.android.com/reference/android/app/Activity.html)
*   [安卓`Drawable`](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)
*   [`Drawable`从路径中获取](https://stackoverflow.com/questions/5834221/android-drawable-from-file-path)
*   [更多关于图像选择器`Intent`](https://stackoverflow.com/questions/2507898/how-to-pick-a-image-from-gallery-sd-card-for-my-app-in-android)

祝你好运！

# php - 将图像从 Android 上传到 MySQL 数据库

> ID：11643474
> 
> 赞同：4
> 
> 时间：2012-07-25T05:49:02.823
> 
> 标签：php, android, mysql

再会！我正在尝试搜索将图像文件从 Android 上传到在线 MySQL 数据库的基本教程，但我找不到任何内容。

我现在正在制作一个活动，可以将用户的个人资料图片从 Android 上传到在线服务器。

我需要的是显示一个按钮，当它被点击时，用户可以从文件中选择一个图像。有人可以指导我这样做吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:58:41.500

**在客户端，您可以执行此操作。**

```
HttpURLConnection connection = null;
DataOutputStream outputStream = null;
DataInputStream inputStream = null;    

String pathToOurFile = "path of the image.jpeg";
String urlServer = "http://xxx.xxx.xxx.xxx/uploader.php";
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1*1024*1024;

try {
        FileInputStream fileInStream = new FileInputStream(new File(pathToOurFile) );

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

       // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0)
        {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        serverResponseCode = connection.getResponseCode();
        serverResponseMessage = connection.getResponseMessage();

        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
    }
    catch (Exception ex)
    {
        //Exception handling
    } 
```

**服务器端**

```
<?php
    $target_path  = "./";
    $target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
         echo "Success";
    } else{
        echo "Error";
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:04:12.553

使用以下代码从 ImageGallery 获取图像：

```
Intent i = new Intent(Intent.ACTION_PICK,
               android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, ACTIVITY_SELECT_IMAGE); 
```

它将启动 ImageGallery，现在您可以选择一个图像，并在 onActivityResult 中您可以将图像解码为位图，如链接中所述：[here](https://stackoverflow.com/questions/2507898/how-to-pick-a-image-from-gallery-sd-card-for-my-app-in-android)：

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case REQ_CODE_PICK_IMAGE:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
        }
    }
} 
```

接下来，您需要将该位图上传到服务器。为此，您可以使用 Haresh 的解决方案。

# openshift - 如何调试 Openshift 中的 503 错误？

> ID：11643483
> 
> 赞同：7
> 
> 时间：2012-07-25T05:49:50.653
> 
> 标签：openshift

我在 Openshift 上托管了一个可扩展的 EAP 6.0 Web 应用程序，每当我尝试访问该应用程序时都会收到 HTTP 503 错误消息。我该如何解决。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T05:49:50.653

就我而言，这是 HAProxy 墨盒的问题，而不是我的 Web 墨盒的问题。我通过尝试在[http://app-domain.rhcloud.com/haproxy-status/](http://app-domain.rhcloud.com/haproxy-status/)查看 HAProxy 状态页面发现了这一点（显然，您必须替换该 URL 中的应用程序和域以匹配您自己的 Openshift 设置） . 该页面显示 503 错误。

要修复它，请使用 SSH 进入 HAProxy 会话

```
ssh 1234567890abcdef1234567890abcdef@app-domain.rhcloud.com 
```

您将从 OpenShift Web 管理控制台获得您的实际用户名和主机名。然后运行

```
ctl_app restart 
```

这将重新启动 HAProxy。对我来说，这解决了这个问题。

我在调试时发现的另一个方便的技巧是，您可以绕过 HAProxy 浏览到 Web 墨盒的特定实例。

在 HAProxy 状态页面中，您可以看到 Web 墨盒实例名为 gear-1234567890ab-domain。去掉“gear-”前缀，然后使用剩余的十六进制字符和域名组成一个 URL，如：

```
1234567890ab-domain.rhcloud.com 
```

这将带您直接进入特定的 Web 墨盒，绕过任何 HAProxy 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-18T16:15:22.170

谢谢菲克斯，

它对我有用，让您详细说明您的建议，以便其他人也可以受益。

第 1 步：cd /var/lib/openshift/your server/haproxy/conf

第 2 步：vi haproxy.cfg

第 3 步：删除“选项 httpchk GET /”

第四步：保存

第 5 步：ctl_app 重启

# c# - 如何查询相机分辨率并将它们添加到列表中

> ID：11643487
> 
> 赞同：0
> 
> 时间：2012-07-25T05:50:19.450
> 
> 标签：c#, windows-phone-7, xaml, camera

我只是想查询 WP7 设备的相机分辨率，并将这些分辨率添加到 ListPicker，以便用户可以选择他或她想要的视频画笔分辨率。我的 videobrush 显示在我的 MainPage 上，分辨率 ListPicker 在我的 SettingsPage 上，因此我还需要将此值从 SettingsPage 传递到 MainPage，以便正确应用所选分辨率。到目前为止，我所拥有的如下，虽然我不确定如何获取分辨率并将它们添加到 ListPicker，然后传递这个值以在 MainPage 中使用？

主页.xaml

```
<Border x:Name="videoRectangle" Grid.Row="0" Grid.ColumnSpan="2" >
            <Border.Background>
                <VideoBrush  x:Name="viewfinderBrush">
                    <VideoBrush.RelativeTransform>
                        <CompositeTransform x:Name="viewfinderBrushTransform" CenterX=".5" CenterY=".5" Rotation="90" />
                    </VideoBrush.RelativeTransform>
                </VideoBrush>
            </Border.Background>
 </Border> 
```

MainPage.xaml.cs

```
#region Fields
    //Declare a field of type PhotoCamera that will hold a reference to the camera
    private PhotoCamera camera;        

    #endregion

    #region Ctr

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    #endregion

    #region Navigation

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        //if camera = null {  .. } <-- is this necessary beforehand?
        // Check to see if the camera is available on the device.
        if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary) == true) ||
             (PhotoCamera.IsCameraTypeSupported(CameraType.FrontFacing) == true))
        {
            // Initialize the camera, when available.
            if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
            {
                // Use front-facing camera if available.
                camera = new PhotoCamera(CameraType.Primary);

                camera.Initialized += camera_Initialized;
                viewfinderBrush.SetSource(camera);
            }
            else
            {
                // The Primary camera is not supported on the device.
                this.Dispatcher.BeginInvoke(delegate()
                {
                    // Write message.
                    MessageBox.Show("Primary camera is not available on this device.", "Error!", MessageBoxButton.OK);
                });
            }
        }
        else
        {
            // No camera is supported on the device.
            //this.Dispatcher.BeginInvoke(delegate()
            //{
                // Write message.
                MessageBox.Show("Primary camera is available on this device.", "Error!", MessageBoxButton.OK);
            //});
        }

        base.OnNavigatedTo(e);
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        if (camera != null)
        {
            camera.Dispose();
            camera.Initialized -= camera_Initialized;
            camera = null;
        }

        base.OnNavigatedFrom(e);
    }

    #endregion

    void camera_Initialized(object sender, CameraOperationCompletedEventArgs e)
    {
        if (e.Succeeded)
        {
            //var res = from resolution in camera.AvailableResolutions
            //          //change to best resolution on camera
            //          //http://msdn.microsoft.com/en-us/library/hh202951(v=VS.92).aspx
            //          where resolution.Width == 640
            //          select resolution;

            //camera.Resolution = res.First();

            //***apply camera resolution here!?

            this.Dispatcher.BeginInvoke(delegate()
            {
                ShowRegularVideo();
            });
        }

        //throw new NotImplementedException();
    }

    private void ShowRegularVideo()
    {
        videoRectangle.Width = this.ActualWidth;
        videoRectangle.Height = this.ActualHeight;
    } 
```

设置页面.xaml

```
<toolkit:ListPicker x:Name="ResolutionListPicker" Header="Resolutions" Grid.Row="3" Grid.ColumnSpan="2"                                            
                                        SelectedIndex="{Binding}"
                                        SelectionChanged="ResolutionListPicker_SelectionChanged"/> 
```

SettingsPage.xaml.cs

```
#region Fields

    //Declare a field of type PhotoCamera that will hold a reference to the camera
    private PhotoCamera camera; 

    List<int> resolutionsList;

    #endregion

    #region Ctr

    public Settings()
    {
        InitializeComponent();
    }

    #endregion

    #region Navigation

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        GetResolutions();
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
    }

    #endregion

    private void GetResolutions()
    {
        resolutionsList = new List<int>();

        //var res = from resolution in camera.AvailableResolutions
        //          //change to best resolution on camera
        //          //http://msdn.microsoft.com/en-us/library/hh202951(v=VS.92).aspx
        //          where resolution.Width == 640
        //          select resolution;

        //camera.Resolution = res.First();

        for (int i = 0; i < camera.AvailableResolutions.Count(); i++)
        {
            //resolutionsList.Add(...)
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:40:00.330

我认为您从如何：为 Windows Phone 创建基本相机应用程序开始 [http://msdn.microsoft.com/en-us/library/hh202956(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202956(v=vs.92).aspx)

如果您查看 Res 按钮，它会告诉您如何更改分辨率。如果不看看如何：在 Windows Phone 的应用程序中调整捕获的图片分辨率 [http://msdn.microsoft.com/en-us/library/hh202951(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202951(v=vs.92).aspx)

Camera.AvailableResolutions [http://msdn.microsoft.com/en-us/library/microsoft.devices.camera.availableresolutions(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.devices.camera.availableresolutions(v=vs.92).aspx)

分辨率是大小结构的集合。每个 Size 指定一个 Height 和 Width 属性。像素数 = 高 x 宽

然后用 1024 适当除以得到千像素或百万像素

# mysql - 在数据库的 updatedBy 字段中包含用户 ID 或用户名是否更好

> ID：11643489
> 
> 赞同：0
> 
> 时间：2012-07-25T05:50:23.637
> 
> 标签：mysql, database-design, symfony, doctrine-orm, data-modeling

我的几乎所有表格中都有字段，例如`createdBy`or `updatedBy`。我认为这仅供参考。

你认为我应该在那里输入用户名还是`userID`. 因为如果我需要直接查看数据库，那么这可以提供更好的理解，否则这是一种不好的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:55:01.273

始终使用外键来存储引用记录，在您的情况下是用户 ID。

关于如何存储的方法，这取决于您的需要。

> a) 如果您想知道谁最后更新了记录。那么你应该`userID`在表中创建一个列。

存储外键而不是其他记录总是好的，因为这样您可以关联和获取用户的所有记录。但是这种方法会有一个限制，因为您只能存储一个用户 ID，您只能知道谁最后更新了它。

> b) 如果您想存储所有记录，要知道哪个用户更新了记录以及何时更新，那么您应该将其存储在一对多关系表中。例如

`user_log with columns user_id, update_datetime`也许还有一个消息栏，告诉用户做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:54:16.190

用户身份。因为它们比用户名更小更快。

假设您的用户想要更改用户名，那么您将不需要更新所有表格，这是非常有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T05:56:55.487

始终使用 ID 来保持规范化的关系数据结构。这将提供更好的性能和更大的可扩展性。如果您可以包含约束，它将使它更清洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T05:57:57.940

这并不总是坏事。捍卫您的应用需求。标准化可以很好地消除冗余。而如果速度是您可以保持原样的因素。因为加入需要时间。插入数据也意味着插入两个表。

从来没有少，总是+1标准化，书上:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:58:33.440

使用以后无法更改的东西。通常这对 user_id 是正确的。

*在特殊情况下，您可能还*需要存储姓名（以便能够显示当时用户的姓名，在她结婚之前，或者已经被删除的用户的姓名）。但通常，您再次查询数据库以获取（当前）名称（也可以轻松缓存）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T09:03:52.013

对于用户名，代理键往往是更好的选择。因此，在您的情况下，FK（`createdBy`和`updatedBy`）将引用代理键（`userID`）而不是自然键（用户名）。

但是，这*并不*意味着 surrogate*总是*比自然键更好：考虑[这个标准列表](https://stackoverflow.com/a/11639189/533120)。

# c# - C#如何从控制台应用程序调用MVC Action方法

> ID：11643490
> 
> 赞同：7
> 
> 时间：2012-07-25T05:50:24.553
> 
> 标签：c#, asp.net-mvc

我正在开发控制台应用程序，它获取一些数据并调用 MVC3 Action 方法并将获取的数据作为参数传递给该操作方法。但我的问题是控制台应用程序如何知道数据成功传递\MVC 操作方法调用正确以及服务器 mvc 应用程序是否正在运行

这是我的代码：

```
public static void Main()
{
// Mvc application object intialization
                HomeController object_Mail = new HomeController();
            // Mvc action method call
           object_Mail.mailgateway(mvcemails); //mvcemails parameter passed to Actionmethod               
} 
```

请指导我...

谢谢，拉吉

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T05:57:53.633

您不能像在此处所做的那样调用 MVC 操作，桌面应用程序和 Web 应用程序是不相关的。它们作为两个不同的实体存在。现在，如果您需要从桌面应用程序调用 mvc 操作，就像调用任何其他 Web使用您的桌面应用程序的端点，您需要创建一个 HTTPRequest..

在您的桌面应用程序中创建一个 HTTPRequest，如下所示：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://"+ <your mvc action endpoint> )
request.Method = "GET";
//specify other request properties

try
{
    response = (HttpWebResponse)request.GetResponse();
} 
```

如果您想将一些数据传递给您的操作，即操作参数，您可以按如下方式构建您的网址：

**获取请求**

```
string url = string.Format(
            "http://mysite/somepage?key1={0}&key2={1}",
            Uri.EscapeDataString("value1"),
            Uri.EscapeDataString("value2")); 
```

和 **POST REQUEST**

```
webRequest.Method = "POST";
var data=string.Format("key1={0}&key2={1}",Uri.EscapeDataString("value1"),Uri.EscapeDataString("value2")");
StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream());
requestWriter.Write();
requestWriter.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:59:24.277

我认为您需要使用 WebClient 或 HttpWebRequest 类来调用操作方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:12:05.570

可以按照您的方式进行操作。但是，大多数 Web 应用程序都有很多依赖项，您需要使用像[Moq这样的框架来存根或模拟这些依赖项](http://code.google.com/p/moq/)

我经常在单元测试库中引用包含我的 MVC 应用程序的 DLL，这相当于您描述的场景。我使用 Moq 来提供控制器所需的请求上下文和其他依赖项，例如会话状态、数据库存储库等。

如果您使用虚假依赖项，您的控制器操作可能无用。在这种情况下，我会遵循其他答案的建议。

这是一个大而复杂的话题，在许多博客和其他有关单元测试 asp.net mvc 的 stackoverflow 问题上都有讨论。

# android - 使 ListView 与其他项目一起滚动

> ID：11643495
> 
> 赞同：1
> 
> 时间：2012-07-25T05:50:51.450
> 
> 标签：android, listview

[http://realdevs.tistory.com/entry/asdf](http://realdevs.tistory.com/entry/asdf)

↑ 图片。

我用的时候有问题`ListView`。

由于屏幕已满`widgets`，我希望`ListView`的项目与 中的其他项目一起滚动`layout`。

在图片中，蓝色的是布局上的一个小部件，红色的是`ListView`.

当我向上滚动项目时，它们会移动，但蓝色的不会。

我怎样才能让它一起移动，`ListView`因为它是 ListView 中的一个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:18:33.733

你添加你的`blue layout`作为你的`listView`标题。

[这](https://stackoverflow.com/a/2620252/1436931)将帮助您添加布局作为标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:54:37.257

只需在滚动视图中添加蓝色部分

```
 <ScrollView
           xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"  
           >

your layout
........

 </ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:27:58.720

从您在[http://realdevs.tistory.com/entry/asdf中的图片](http://realdevs.tistory.com/entry/asdf)

我在编码xml这个实现。

```
<?xml version="1.0" encoding="utf-8"?> 
```

`<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">`

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#e0e0e0"
    android:orientation="vertical" >

    <!-- this layout add your other items. I'm exam add Button -->
    <Button
        android:id="@+id/butonTop"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:text="Top Button" />

</LinearLayout>

<!-- ListView in bottom screen and can auto scroll.  --> 
<ListView
    android:id="@+id/dataListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:drawSelectorOnTop="false" >
</ListView> 
```

`</LinearLayout>`

# android - Android -- 从 JNI 获取 MEID

> ID：11643498
> 
> 赞同：1
> 
> 时间：2012-07-25T05:51:01.747
> 
> 标签：android, c++, c, android-ndk, java-native-interface

我正在使用 Android 编写一些 JNI 代码，并且正在寻找一种从设备中查询移动设备标识符 (MEID) 的方法。

[http://en.wikipedia.org/wiki/Mobile_equipment_identifier](http://en.wikipedia.org/wiki/Mobile_equipment_identifier)

我正在尝试编写可以在 Android 设备上自行运行的 C 或 C++ 代码，所以我认为我不能使用 Java（即从 获取 MEID `TelephonyManager`）。

搜索 StackOverflow 发现：[是否有我可以用来获取设备的 IMEI/MEID 的 android shell 或 adb 命令？](https://stackoverflow.com/questions/6852106/is-there-an-android-shell-or-adb-command-that-i-could-use-to-get-a-devices-imei)

好的很好，`dumpsys iphonesubinfo`可以得到我需要的信息。它有效！

`dumpsys`除了作为 Android 源代码的一部分，我找不到源代码。所以我下载了那个......我的硬盘在下载完成之前就已经装满了，但我确实得到了`dumpsys`. 这是一个非常短的 C++ 文件。它所做的只是查询Android的`IBinder`界面。

所以，我的问题：

0) 有什么方法可以编写一个查询来反对`IBinder`只使用 NDK 中的东西吗？使用的包含文件`dumpsys.cpp`不在 NDK 中，并且`grep`在 NDK 目录中没有找到`IBinder`任何包含文件或代码示例，所以我的猜测是“否”（但我想是错误的）。

1）还有其他获取MEID的好方法吗？

我认真地认为我应该只使用`system("dumpsys iphonesubinfo > /tmp/myprogname_dumpsys.tmp"`然后打开生成的文件并解析它。这应该可行，但我很难称它为优雅......而且我不确定是否`dumpsys`在每个 Android 设备上都可用。

`system()`编辑：使用运行的想法`dumpsys`将行不通，因为`dumpsys`需要`android.permission.DUMP`和 Android 不再允许非系统应用程序拥有该权限。

[java中的Dumpsys权限拒绝](https://stackoverflow.com/questions/11113349/dumpsys-permission-denial-in-java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:32:06.343

我相信 Dalvik 实现了与 JVM 相同的所有 JNI 接口，因此虽然有点繁琐，但完全可以通过 JNI 从本机代码调用任意 Java 类和方法。

```
/* assuming you already have */
JNIEnv *env;
jobject context;
/* then call (with error-checking) */
jclass cls = (*env)->FindClass(env, "android/context/Context");
jmethodId mid = (*env)->GetMethodID(env, context_cls, "getSystemService",
    "(Ljava/lang/String;)Ljava/lang/Object;");
jfieldID fid = (*env)->GetStaticFieldID(env, cls, "TELEPHONY_SERVICE",
    "Ljava/lang/String;");
jstring str = (*env)->GetStaticObjectField(env, cls, fid);
jobject telephony = (*env)->CallObjectMethod(env, context, mid, str);
cls = (*env)->FindClass(env, "android/telephony/TelephonyManager");
mid =(*env)->GetMethodID(env, cls, "getDeviceId", "()Ljava/lang/String;");
str = (*env)->CallObjectMethod(env, telephony, mid);
jsize len = (*env)->GetStringUTFLength(env, str);
char* deviceId = calloc(len + 1, 1);
(*env)->GetStringUTFRegion(env, str, 0, len, deviceId);
(*env)->DeleteLocalRef(env, str);
/* to get a string in deviceId */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:50:30.650

在 Java 端检索 MEID，然后将其作为`jstring`参数传递给您的 JNI 函数。它会比从 C 调用回 Java 更干净。

至于如何检索它，请参阅 Abhilasha 的回答。

# c++ - 如何读取 UCS-2 文件？

> ID：11643500
> 
> 赞同：5
> 
> 时间：2012-07-25T05:51:11.967
> 
> 标签：c++, unicode, encoding, character-encoding, wofstream

我正在编写一个程序来获取 UCS-2 Little Endian 中 *.rc 文件编码中的信息。

```
int _tmain(int argc, _TCHAR* argv[]) {
  wstring csvLine(wstring sLine);
  wifstream fin("en.rc");
  wofstream fout("table.csv");
  wofstream fout_rm("temp.txt");
  wstring sLine;
  fout << "en\n";
  while(getline(fin,sLine)) {
    if (sLine.find(L"IDS") == -1)
      fout_rm << sLine << endl;
    else
      fout << csvLine(sLine);
  }
  fout << flush;
  system("pause");
  return 0;
} 
```

“en.rc”中的第一行是`#include <windows.h>`但`sLine`显示如下：

```
[0]     255 L'ÿ'
[1]     254 L'þ'
[2]     35  L'#'
[3]     0
[4]     105 L'i'
[5]     0
[6]     110 L'n'
[7]     0
[8]     99  L'c'
.       .
.       .
.       . 
```

该程序可以正确处理 UTF-8。我怎样才能对 UCS-2 做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T17:34:35.623

宽流使用宽流缓冲区来访问文件。Wide 流缓冲区从文件中读取字节，并使用其 codecvt facet 将这些字节转换为宽字符。默认的 codecvt facet 是`std::codecvt<wchar_t, char ,std::mbstate_t>`在本地字符集 for`wchar_t`和`char`（即，like `mbstowcs(`）之间转换）。

您没有使用本机 char 字符集，因此您想要的是一个 codecvt 方面，它读取`UCS-2`为多字节序列并将其转换为宽字符。

```
#include <fstream>
#include <string>
#include <codecvt>
#include <iostream>

int main(int argc, char *argv[])
{
    wifstream fin("en.rc", std::ios::binary); // You need to open the file in binary mode

    // Imbue the file stream with a codecvt facet that uses UTF-16 as the external multibyte encoding
    fin.imbue(std::locale(fin.getloc(),
              new std::codecvt_utf16<wchar_t, 0xffff, consume_header>));

    // ^ We set 0xFFFF as the maxcode because that's the largest that will fit in a single wchar_t
    //   We use consume_header to detect and use the UTF-16 'BOM'

    // The following is not really the correct way to write Unicode output, but it's easy
    std::wstring sLine;
    std::wstring_convert<std::codecvt_utf8<wchar_t>, wchar_t> convert;
    while (getline(fin, sLine))
    {
        std::cout << convert.to_bytes(sLine) << '\n';
    }
} 
```

请注意，这里有一个问题`UTF-16`。的目的`wchar_t`是让一个`wchar_t`代表一个代码点。但是 Windows 使用`UTF-16`它将一些代码点表示为*两个* `wchar_t`s。这意味着标准 API 在 Windows 上不能很好地工作。

这里的结果是，当文件包含代理对时，`codecvt_utf16`将读取该对，将其转换为大于 16 位的单个代码点值，并且必须将值截断为 16 位以将其粘贴到`wchar_t`. 这意味着此代码实际上仅限于`UCS-2`. 我已将 maxcode 模板参数设置`0xFFFF`为反映这一点。

有许多其他问题`wchar_t`，您可能只想完全避免它：[C++ wchar_t 有什么“错误”？](https://stackoverflow.com/a/11107667/365496)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T08:56:54.037

```
#include <filesystem>
namespace fs = std::filesystem;

    FILE* f = _wfopen(L"myfile.txt", L"rb");
    auto file_size = fs::file_size(filename);
std::wstring buf;       
buf.resize((size_t)file_size / sizeof(decltype(buf)::value_type));// buf in my code is a template object, so I use decltype(buf) to decide its type.
    fread(&buf[0], 1, 2, f); // escape UCS2 BOM
    fread(&buf[0], 1, file_size, f); 
```

# c# - .NET 应用程序中带有 Web 浏览器控件的拼写检查器

> ID：11643504
> 
> 赞同：2
> 
> 时间：2012-07-25T05:51:30.497
> 
> 标签：c#, winforms

我正在尝试在我的应用程序中实现拼写检查功能。这可以通过网络浏览器控制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:20:53.837

按照这个超链接，然后实现你自己的逻辑在网络浏览器中做下划线。

[http://www.maierhofer.de/en/documentation/nhunspell/index.html](http://www.maierhofer.de/en/documentation/nhunspell/index.html)

这是开源拼写检查器。

# c - C - 未定义的行为或正确的输出

> ID：11643505
> 
> 赞同：0
> 
> 时间：2012-07-25T05:51:37.610
> 
> 标签：c, expression, operator-precedence

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

我以前读过这种说法，但这种说法很奇怪。

对于 C 中的这段代码，

```
int main()
{
  int a=5,i;
  i = (++a)+(++a)+(++a);
  printf("%d",i);
  return 0;
} 
```

应该期待什么输出？还是会导致未定义的行为？

# ruby - 无法在 RVM 中设置 Ruby 版本？

> ID：11643509
> 
> 赞同：0
> 
> 时间：2012-07-25T05:52:18.127
> 
> 标签：ruby, rvm

我已经安装了最新的 RVM，并且默认安装了 Ruby 1.9.3-p194。

但是，我在命令行上看不到这个 Ruby 版本：

```
murtaza@murtaza-dev:~$ rvm use current
ruby-1.9.3-p194
murtaza@murtaza-dev:~$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
murtaza@murtaza-dev:~$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:59:28.463

尝试

```
rvm use 1.9.3 
```

或许

```
rvm use 1.9.3 --default 
```

如果您希望每次启动终端时都默认使用该 ruby​​，请同时重新启动终端

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T06:01:16.227

问题是我没有将此行添加到`.bashrc`：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

在此之后，使用 RVM 设置 Ruby 版本成功。

# php - 即使浏览器被客户端关闭，也使用 PHP 发送邮件

> ID：11643510
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:52:22.203
> 
> 标签：php, email, browser, send

我正在制作一个电子商务网站。

如果客户在购物车中只留下一件商品并单击结帐流程，那么即使浏览器关闭，我也需要发送电子邮件。

这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:27:14.100

当用户单击结帐按钮时，您可以在数据库中创建任务。然后，您可以运行 cronjob 来迭代所有任务并发送电子邮件。或者你可以使用像 Celery 这样的任务队列机制 - [https://github.com/gjedeer/celery-php](https://github.com/gjedeer/celery-php) http://celeryproject.org/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:00:13.527

您需要在页面上跟踪用户，以便能够知道用户何时关闭浏览器。依靠客户端脚本（浏览器中的 JavaScript）通知您用户仅关闭浏览器是不够的。

只需执行 AJAX 请求，例如。10 秒，如果您不会从用户浏览器获得任何信息，例如。几分钟，您可以假设浏览器已关闭，您可以发送电子邮件。

# c# - 如果释放了关联的 UI，C# 中的异步等待代码会发生什么

> ID：11643511
> 
> 赞同：2
> 
> 时间：2012-07-25T05:52:24.167
> 
> 标签：c#, asynchronous, task-parallel-library

假设我有一个 WPF 对话框，其中我有异步事件处理程序等待一些需要很长时间的调用。然后用户在等待返回之前关闭对话框（并且代码处理它）。我想这会导致崩溃。是否有规定的方法来使用 C# 5 中的新 async/await 关键字和 .NET 4.5 中的新 TaskAsync 方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:04:07.413

我认为这取决于具体情况。如果您在 d 对象的`async`方法中有代码`Dispose()`，它可以继续正常运行，因为`Dispose()`对框架没有任何意义。当然，如果该方法调用了一些会抛出`ObjectDisposedException`（或一些其他异常）的方法，那将停止异步操作（除非您捕获到异常）。但这不会自动发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:20:23.490

`async`/`await`应该可以正常工作。

[每个 WPF 窗口都会创建自己的`SynchronizationContext`](http://nitoprograms.blogspot.com/2009/09/another-synchronizationcontext-gotcha.html)- 至少现在是这样（这是一个实现细节）。但这些只是 common 的简单包装`Dispatcher`。

所以，`TaskAwaiter`最终会`SynchronizationContext`为一个被破坏的窗口捕获 a ，但这并不重要，因为`Dispatcher`它仍然在那里。

现在，您的代码所做的是另一回事。例如，如果您`async`在这种情况下有一个事件处理程序，它必须能够处理已处置实例的恢复。

Adam 和 leppie 都有很好的评论：要么阻止用户关闭对话框，要么取消任务（并确保在实际关闭对话框之前取消它）。另一个不错的选择 - 如果您的想法是开始一个*应该*比对话框更持久的操作 - 是启动`Task`然后将其添加到正在进行的操作的共享集合中。所有这些选项都可以防止`async`事件处理程序在已处置的实例上运行的不良情况。

# iphone - 使用 ios 进行 HTTP 直播

> ID：11643513
> 
> 赞同：12
> 
> 时间：2012-07-25T05:52:31.873
> 
> 标签：iphone, http-live-streaming

我的应用被苹果拒绝了，他们给出了一个理由

> 我们发现您的应用未使用 HTTP Live Streaming 协议（基线流为 64 kbps）来广播流式视频

然后我搜索解决方案，通过互联网，所有解决方案都建议我必须使用 .U8F8 和 .ts 扩展名进行直播，但我的应用程序具有 mp4 格式。我已经用于`MPMoviePlayerController`流媒体。

所以我的问题是：

1.  我必须将 mp4 视频转换为 M8U8 吗？
2.  我必须使用`MPMoviePlayer`吗？
3.  我可以在运行时将 mp4 视频转换为 M8U8 格式以及如何实现直播
4.  是否有任何可用于 HTTP 直播的示例代码？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T13:57:29.153

我只能评论预先录制的视频，不能评论直播...

> 我必须将 mp4 视频转换为 M8U8 吗？

我想你的意思是.m3u8。基本上，您需要获取 .mp4 文件并：

1.  将其编码为适用于移动带宽的友好比特率。为此，您可以使用 Apple 的 Compressor* 应用程序，它具有 HTTP 实时流媒体预设。如果您正在玩，请选择大约 1000kbps 的速度。

2.  使用 Apple 的 mediafilesegmenter 将输出切片。您最终会得到许多小的 .ts 文件和列出它们的清单 (.m3u8)。

3.  点击播放器中的 .m3u8 文件（initWithContentURL...），您就可以离开了。

4.  重复上述步骤 1 和 2 并指定不同的带宽。我们选择了 Compressor 中的预设。

5.  您最终会得到不同版本的视频，每个带宽 1 个，使用 Apple 的 variantplaylistcreator 工具创建一个主播放列表文件，该文件将您的播放器指向每个带宽，以便它可以自动切换。

6.  将所有 .ts 文件和 .m3u8 文件粘贴到网络上，并使用 mediastreamvalidator 工具检查您的主播放列表文件是否正常并正确指向每个版本。

确保在主播放列表文件中首先具有良好的质量比特率，因为这是首先播放的版本。我们选择了 1000kbps 左右的速度。

> 我必须使用 MPMoviePlayer 吗？

我无法评论其他库，我们使用了 MPMoviePlayer。

> 我可以在运行时将 mp4 视频转换为 M8U8 格式以及如何实现直播

您可以为直播流，但为预先录制的视频做这一切之前。将您的所有文件放到网上，验证您的播放列表 (.m3u8) 并使用主 .m3u8 文件播放您的视频。

> 是否有任何可用于 HTTP 直播的示例代码？

在我们的实现中，iOS 中的客户端完成所有工作（例如，根据可用带宽切换流）。因此，您只需要事先确保所有文件都在正确的位置。

Compressor - [https://www.apple.com/final-cut-pro/compressor/](https://www.apple.com/final-cut-pro/compressor/) mediafilesegmenter 和 mediastreamvalidator 工具命令行工具可从 Apple 开发者网站下载。

这些文章有你需要知道的一切： [https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html) [https://developer.apple.com/library/archive/ technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238](https://developer.apple.com/library/archive/technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238)

在 Safari 中打开它： [https](https://developer.apple.com/streaming/examples/advanced-stream.html) ://developer.apple.com/streaming/examples/advanced-stream.html - 每个“齿轮”都是不同的比特率流

在文本编辑器中打开这个 .m3u8 文件，以获取示例主播放列表文件：[https ://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8](https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T06:27:07.877

如果您的 MP4 文件长度超过 10 分钟，您将需要使用 HLS 流式传输文件。
对于实时流，您可以使用这样的软件对其进行实时编码： [http ://www.mcommstv.com/products/mcomms-transcode](http://www.mcommstv.com/products/mcomms-transcode)

如果是 VoD 文件，则使用您最喜欢的 H.264/AAC 编码器对其进行预编码。

请记住包含文件的多个比特率版本，包括 64kbps。如果您不包含 64kbps 流，Apple 将拒绝该应用程序。我们通常使用： 64k 120k 240k 480k 800kbps 1200kbps 您在多速率 m3u8 文件中首先列出的比特率将在前 30 秒播放，将中等比特率放在首位，这样当用户开启时开始流式传输不会花费太长时间3G网络慢。这是一个例子：

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=120000
120k/Playlist.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=60000
60k/Playlist.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=240000
240k/Playlist.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1, BANDWIDTH=480000
480k/Playlist.m3u8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T07:12:05.513

我们必须将任何音频文件转换为 m3U8 格式。

在运行时我找不到任何插件。我搜索得很少。

*   因此，我们在使用 URl 的同时设置了 IIS 服务器。

    [http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart](http://www.hanselman.com/blog/CommentView.aspx?guid=86968cd5-feeb-47f2-b02e-1eb4fa556379#commentstart)

*   并得到了链接。像 [http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest](http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest)

    通过修改它像 [http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest(format=m3U8-aapl)](http://4a75a0cce3694e29bc670b3d574fec92.cloudapp.net/push.isml/manifest(format=m3U8-aapl))

我们可以使用 Video 标签在 HTML5 中使用这个 URL。我们也可以上传点播视频。

# python-sphinx - 如何使用 sphinx 为每个模块生成一页

> ID：11643514
> 
> 赞同：12
> 
> 时间：2012-07-25T05:52:34.367
> 
> 标签：python-sphinx

我们使用 Sphinx 来生成我们的 Python 文档。

这是我们使用的命令行：

```
sphinx-apidoc -F -o %WORKSPACE%\docs_rst %PACKAGE%

sphinx-build -b html %WORKSPACE%\docs_rst %WORKSPACE%\docs 
```

问题是我们每个包只有一页。但是，我们真正需要的是每个模块一页，否则页面会变得太长。

请问我该如何设置？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-07T04:38:12.323

我已经向 Sphinx 提交了一个补丁来完全满足您的要求——它向 apidoc 添加了一个命令行选项，它将每个模块放在自己的页面上。

补丁可以在这里查看：[https ://bitbucket.org/birkenfeld/sphinx/pull-request/161/added-option-to-apidoc-to-write-each](https://bitbucket.org/birkenfeld/sphinx/pull-request/161/added-option-to-apidoc-to-write-each)

它目前正在等待合并到 Sphinx 中，该命令将添加一个单独的标签，这样可以正常工作：

`sphinx-apidoc -o [output_dir] [package_dir] --separate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:57:13.533

您也许可以使用`autosummary`扩展和`sphinx-autogen`脚本（可能使用自定义模板）来执行类似的操作。

# c# - 如何从后面代码中的确认框获取响应

> ID：11643515
> 
> 赞同：5
> 
> 时间：2012-07-25T05:52:49.627
> 
> 标签：c#, asp.net

我是 asp.net/C# 的新手。我正在尝试创建一个 Web 应用程序。

下面是我的要求。

我正在尝试在单击按钮时保存记录。在保存记录之前，我将检查该记录是否存在于数据库中（在后面的代码中）。如果存在，那么我需要向用户显示警报“记录已经存在。你要继续?”当用户按下“是”时，我需要继续保存代码中的记录，否则我只需要退出保存过程。

```
//......code for checking the existence of the record    
if (check == true)
{            
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "script", " confirm('Record already exist.Do you want to proceed?');", true);
}
// 
```

上面的代码向我显示了带有“确定”和“取消”按钮的确认框。我的问题是

1.  如何在确认对话框中将其设为“是”或“否”？
2.  用户按下“是”/“否”后，我怎样才能捕捉到响应（是/否），然后继续我的程序的其余部分？

我已经搜索了很多。但无法得到正确的答案。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:07:56.483

您可以通过多种方式做到这一点：

一种是在页面上放置一个按钮，使其显示：无，当确认为真时，用js触发它的点击。

就像在 aspx 中一样

```
<asp:Button runat="server" ID="btnSaveData" 
     onClick="btnSaveData_Click" style="display:none;" /> 
```

在客户端制作一个调用确认对话框的js函数，比如

```
function ConfirmSave()
{
   if(confirm('Record already exist.Do you want to proceed?')
   {
       jQuery("[ID$=btnSaveData]").click();
   }

} 
```

在后面的代码中

您的代码检查某些事件处理程序

```
if (check == true)
{            
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "script", 
      "ConfirmSave();", true);
} 
```

bthSaveData 用于保存数据的单击处理程序。

```
protected void btnSaveData_Click(object sender, EventArgs e)
{
 // Code for your saving.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T05:59:37.697

您可以像这样在 JS 中使用确认框

```
var ans = confirm ('Record already exist.Do you want to proceed?');
if(ans==true)
{
}
else
{
} 
```

其次，要在后面的代码中获得响应，您可以将 Yes/No 值存储到隐藏字段中，例如

```
document.getElementById('<%= hiddenField.ClientID %>').value = ans; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:08:13.147

将 AJAX 工具包与 modalpopupextender 一起使用。

```
 <cc1:modalpopupextender id="ModalPopupExtender1" runat="server"  cancelcontrolid="ButtonNo" okcontrolid="ButtonYes" popupcontrolid="PNL" targetcontrolid="UrSaveButton">
   </cc1:modalpopupextender>  
   <asp:Panel ID="PNL" runat="server" Style="display: none; width: 200px; background-color: #000099; border-width: 2px; border-color: Black; border-style: solid; padding: 20px;">
     <span style="color: White; font-weight: bold">Record already exist.Do you want to proceed?</span>
       <br />
        <br />
            <div style="text-align: right;">
                <asp:Button CssClass="tbl_blue" ID="ButtonYes" runat="server" CausesValidation="false" EnableTheming="false" Text="YES" />
                <asp:Button CssClass="tbl_blue" ID="ButtonNo" runat="server" CausesValidation="false" EnableTheming="false" Text="NO" />
             </div>
  </asp:Panel> 
```

您可以根据需要自定义它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:00:59.600

解决方法之一可以是将 TRUE / FALSE 标志存储在具有属性 runat="server" 的控件中，具体取决于用户所做的选择（是/否）。然后在后端，您可以检查此控件的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:59:21.160

你可以看看这个链接[http://www.codeproject.com/Articles/8173/A-Simple-ASP-NET-Server-Control-Message-Box-Confirm](http://www.codeproject.com/Articles/8173/A-Simple-ASP-NET-Server-Control-Message-Box-Confir)。

此外，您还可以创建自己的自定义确认框。

# jquery - 如何更改鼠标悬停事件上的单元格空格？

> ID：11643517
> 
> 赞同：0
> 
> 时间：2012-07-25T05:52:57.660
> 
> 标签：jquery, html, css, html-table, highlighting

我使用以下属性来创建表。我使用`cellSpacing="5"`for 空间。当我执行时，表格中的单元格之间的空格会很好。**如何用另一种颜色更改鼠标悬停事件上的单元格空格**？这可能吗？

```
Table Creation:

    <table border="0" id="TabDeclaration"  width="100%" cellpadding="5" cellspacing="3" border="2">
        <tr>
            <td>aaaa</td>
            <td>bbbb</td>
            <td>azaz</td>
        </tr>
        <tr>
            <td>cccc</td>
            <td>dddd</td>
        </tr>
        <tr>
            <td>eeee</td>
            <td>ffff</td>
        </tr>      
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:57:29.103

您可以使用以下内容更改`background-color`悬停：

```
<script>
    $(function() {
        $('td').hover(function() {
           $(this).addClass('hover');
        }, function() {
           $(this).removeClass('hover');        
        });
    });
</script>

<style>
    td {
        background-color: red;        
    }

    td.hover {
        background-color: blue;        
    }
</style> 
```

[功能 JSFiddle](http://jsfiddle.net/faceleg/4b7Hr/1/)。

![截屏](../Images/fe1c5412bd9eaff255aebdc80d5369b1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:16:32.497

不要使用`cellspacing`. 使用`padding`. 然后你可以改变单元格的背景颜色。

提供您`td`的类可能会有所帮助，以便您可以使用 CSS 或 jQuery 选择器更好地定位它们。

单元格间距在单元格之外，因此您无法更改背景颜色。您必须更改整个表格的背景颜色。

# iphone - 如何将数据从 SQLite 传递到 UITextVIew？

> ID：11643519
> 
> 赞同：0
> 
> 时间：2012-07-25T05:53:07.143
> 
> 标签：iphone, objective-c, uitextview, xcode4.3

我正在尝试从数据库中检索数据并将其显示在 UITextView 中，但是当我运行项目时，TextView 将为空。

AppDelegate.m:

```
-(void) readPlotsFromDatabase {
// Setup the database object
sqlite3 *database;

// Init the Array
ps = [[NSMutableArray alloc] init];

// Open the database from the users filessytem
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "select * from Plot";
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        // Loop through the results and add them to the feeds array
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            // Read the data from the result row
            NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];

            // Create a new object with the data from the database
            Plot *plots = [[Plot alloc] description:aDescription];

            // Add the object to the Array
            [ps addObject:plots];

            // [themes release];
        }
    }
    // Release the compiled statement from memory
    sqlite3_finalize(compiledStatement);

}
sqlite3_close(database);

} 
```

绘图.h：

```
@interface Plot : NSObject {

NSString *description;

}

@property (nonatomic,retain) NSString *description;

-(id)description:(NSString *)d;

@end 
```

绘图.m：

```
@implementation Plot

@synthesize description;

-(id)description:(NSString *)d {
self.description = d;
return self;
}

@end 
```

PlotViewController.h：

```
@interface PlotViewController : UIViewController {

IBOutlet UITextView *plotDescription;

Plot *plots;
AppDelegate *appDelegate;
NSString *plotDes;

}

@property (nonatomic, retain) IBOutlet UITextView *plotDescription;

@property (nonatomic, retain) Plot *plots;
@property (nonatomic, retain) NSString *plotDes;

@end 
```

PlotViewController.m：

```
- (void)viewDidLoad
{
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
plotDescription.text = plots.description;
[super viewDidLoad];
} 
```

编辑：

我现在将我的 PlotViewController.m 更改为此并且它能够工作。

```
- (void)viewDidLoad
{
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    Plot *p = (Plot *)[appDelegate.ps objectAtIndex:0]; 
    plotDescription.text = p.description;
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:08:41.627

将 NSMutablearray 作为 Appdalegate 方法中的reture：

```
-(NSMutableArray) readPlotsFromDatabase {
// Setup the database object
sqlite3 *database;

// Init the Array
ps = [[NSMutableArray alloc] init];

// Open the database from the users filessytem
if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "select * from Plot";
    sqlite3_stmt *compiledStatement;
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        // Loop through the results and add them to the feeds array
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            // Read the data from the result row
            NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];

            // Add the object to the Array
            [ps addObject:aDescription];

        }
    }
    // Release the compiled statement from memory
    sqlite3_finalize(compiledStatement);

}
sqlite3_close(database);

return ps;
} 
```

还有 PlotViewController.m：

```
- (void)viewDidLoad
{
appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSMutableArray *temp = [appDelegate readPlotsFromDatabase];
plotDescription.text = [temp objectAtindex:0];
[super viewDidLoad];
} 
```

# wordpress - 如何让 Wordpress 页面覆盖现有目录（不是子目录）？

> ID：11643523
> 
> 赞同：-1
> 
> 时间：2012-07-25T05:53:39.500
> 
> 标签：wordpress, .htaccess, directory, rewrite, slug

我有一个名为 /final-fantasy-vii/ 的现有目录，其中有一个 /images/ 文件夹。我用相同的“final-fantasy-vii”创建了一个页面，当我在线访问该页面时，它向我显示 /images/ 文件夹，而不是我在 WordPress 中创建的实际页面。

有没有解决的办法？我已经破解了几天了，我只是不知道该怎么做。任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:56:29.343

更改 slug（可以在编辑页面时完成，靠近页面中间的顶部）或更改预先存在的目录。slug 不必与标题完全匹配，因此您最好的选择可能是将其调整为对内容仍然有意义的不同内容。

# c++ - C ++如何将变量传递给函数？

> ID：11643530
> 
> 赞同：-4
> 
> 时间：2012-07-25T05:55:02.980
> 
> 标签：c++

```
void webparser()
{
    stringstream ss;
    ss << "lynx -dump 'http://somesite.com/q?s=" << currency << "=X' > file.txt";
    system(ss.str().c_str());
} 
```

如果我想将 GBPUSD 用作 char chArray[]，我如何将例如“GBPUSD”传递给 webparser；然后在我的情况下将传递的值分配为可变货币

谢谢，不需要退货。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:58:02.153

```
void webparser(const std::string& currency) {
  stringstream ss;
  ss << "lynx -dump 'http://somesite.com/q?s=" << currency << "=X' > file.txt";
  system(ss.str().c_str());
} 
```

调用函数：

```
webparser("Hello, World!"); 
```

# sql - 具有异常值的sql更新查询

> ID：11643533
> 
> 赞同：0
> 
> 时间：2012-07-25T05:55:35.680
> 
> 标签：sql, oracle10g

我想执行`update query`为

源列是`varchar`类型，目标列是`date`类型

我正在使用 oracle 10g，所以 isdate 功能不起作用

我想更新基于列而不是基于行

认为

更新后的预期输出

```
source             target 
11/12/2012         11 dec 2012 
sdfsdf             null 

update dummy set 
    informationdate = 
(begin to_date(txt_informationdate) exception when others null); 
```

我不能使用最大限制的程序或功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:02:13.300

您可以使用 Oracle 的错误记录工具：

```
execute dbms_errlog.create_error_log('DUMMY', 'DATE_ERRORS');

update dummy 
   set informationdate = to_date(txt_informationdate, 'mm/dd/yyyy')
log errors into date_errors
reject limit unlimited; 
```

更新将更改 to_date() 成功的所有行。所有其他人都将登录到 DATE_ERRORS 表中，您可以在那里检查它们。

请注意，我在 to_update() 调用中使用了格式掩码以确保正确转换文本。你不应该在没有指定格式的情况下使用 to_date()，因为它依赖于 NLS（客户端）设置，这可能不是你认为的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:03:30.880

这可能有助于[Oracle/PLSQL：To_Date 函数](http://www.techonthenet.com/oracle/functions/to_date.php)

**编辑：**

好的。再次阅读您的问题后，我认为在这种情况下，使用 MERGE 可能比 UPDATE 更有效。

有关更多信息，请访问此[更新单列中的多行](https://forums.oracle.com/forums/thread.jspa?threadID=1071525)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:44:55.973

如果你在 pl/sql 上下文中运行，你真的可以像这样去做

```
declare
   l_date date;
begin
   begin
      l_date := to_date(txt_informationdate);
   exception
      when others then l_date := null;
   end;
   if l_date is null then
      update dummy set informationdate = l_date;
   end if;
exception
   when others then 
      dbms_output.put_line('something else went wrong');
end; 
```

我没有对此进行测试，但应该可以。也许你必须纠正一些语法错误。

如果您想从其他语言程序中进行更新，那么您可能需要为上述内容创建一个小过程，而不是对远程过程调用进行更新。或者您也可以为自己定义一个 is_date 函数，可能像这样

```
create or replace function is_date(i_date varchar2)
return date
as
begin
   return to_date(i_date);
exception
   when other then return null;
end; 
```

您的更新可能看起来像这样

```
update dummy set informationdate = is_date(txt_informationdate); 
```

同样，这一切都未经测试，可能有一些语法错误，但我相信你明白了。

# c - C块范围函数？

> ID：11643535
> 
> 赞同：3
> 
> 时间：2012-07-25T05:55:42.700
> 
> 标签：c

是否可以创建适用于块范围的函数？如

编辑澄清

```
enum { cannot, must };
int it(enum modal verb);

describe(fx) {
    context("some context") {
        it(must) { /* Some test that returns an int to it() */ };
    }
} 
```

我怀疑这是可能的，那么我能做的下一件最好的事情是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T06:25:56.227

这对我来说几乎就像 Smalltalk 或 Ruby，这让我觉得你想将*闭包*（有时称为*blocks*）传递给函数。这可以通过对 C 的各种扩展来实现，并且还有一些变通方法。

例如，也许你想遍历一个列表：

```
{
    // this does not actually work, sorry
    iterate(list) { |i| -> printf("%d\n", i); }
} 
```

如果您使用 Apple 对 C 的扩展，则可以使用称为“块”的东西

```
{
    // Apple only
    iterate(list, ^(int i) { printf("%d\n", i); });
} 
```

你也可以写一个回调，

```
static void my_callback(int i) { printf("%d\n", i); }

...
{
    iterate(list, my_callback);
} 
```

回调不能访问其他函数作用域内的变量，所以你必须想办法共享变量。

GCC中有嵌套函数；这些可以访问范围变量，就像 Apple 的“块”扩展一样。

```
{
    // GCC only
    void callback(int i) { printf "%d\n", i); }
    iterate(list, callback);
} 
```

如果你发现自己非常想做这件事，你可以通过切换到 C 以外的语言来省去很多麻烦。C 对于高阶编程不是很友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:59:05.493

我不确定你想要什么，但也许GCC的[嵌套函数扩展可以满足你的需求。](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Nested-Functions.html)请注意，它是一个非标准扩展（并且一些其他编译器不提供它）。

请注意，C 函数（可悲）不是[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)；这是切换到某些函数式语言（如 Ocaml、Haskell、Scheme ...）的原因。

# objective-c - 不可编辑时未调用 textViewShouldBeginEditing 变为可编辑

> ID：11643537
> 
> 赞同：5
> 
> 时间：2012-07-25T05:56:07.520
> 
> 标签：objective-c, ios, xcode, uitextviewdelegate

我在 UITextFieldDelegate 上遇到了问题，任何人都可以帮助我，将不胜感激。有一个 UITextView，我实现了它的委托。通常所有的委托方法都调用得很好。但在这种情况下：

1.  设置 UITextView 不可编辑。
2.  长按 UITextView 直到弹出窗口出现（复制，剪切，...）。
3.  关闭弹出窗口，并将 UITextView 设置为可编辑
4.  点击 UITextView 使 UITextView 进入编辑模式。
5.  您会发现未调用委托方法 textViewShouldBeginEditing。

我需要调用 textViewShouldBeginEditing 来处理一些 UI 更改。任何人都知道如何解决它？非常感谢！

**测试项目**：我创建了一个简单的测试项目，它将 NSLog 方法的调用，您可以快速测试我的案例，谢谢！源代码在这里：http: [//goo.gl/tGQS5](http://goo.gl/tGQS5)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T06:49:48.033

您是否可能忘记去了：

myTextView.delegate = 自我；

?

## 额外的信息

在我最近发布的一个应用程序中，我做了类似的事情。

我禁用了 UITextField，因此我可以在 UITableViewSectionHeader 上使用长按手势来编辑节标题的名称，然后单击节标题来选择它。

我不得不说：

```
// groupName is my UITextField
groupName.userInteractionEnabled = YES;
[groupName becomeFirstResponder]; 
```

在我的长按手势识别器回调方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:24:32.233

@Albert Zhang，仅当您的 textview 成为第一响应者时才会调用“textViewShouldBeginEditing”。您可以通过执行以下操作来强制它。

```
- (IBAction)onSwitch:(id)sender{
    self.textView.editable = self.editableSwitch.on;

    if(self.textView.editable)
    {
        [[self textView]becomeFirstResponder];
    }
} 
```

# asp.net-mvc-3 - MVC3编程的正确方法，适当使用局部视图

> ID：11643552
> 
> 赞同：1
> 
> 时间：2012-07-25T05:57:48.997
> 
> 标签：asp.net-mvc-3

我有一个视图，顶部有一个下拉列表，基本上允许用户选择两个选项之一。现在，基于此选择，我必须在此页面上显示内容。

现在，正确的方法是什么，我应该创建两个局部视图并将它们放在单独的 div 中，并根据选择让其中一个可见

或者，只有两个 div 并在其中包含我的 chtml 标记，并根据用户选择使其中一个可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:53:23.843

如果多个视图不需要它们或由 ajax 调用加载，我看不到创建部分视图的任何原因。我会简单地使用两个 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:50:42.277

如果要使用部分视图，可以使用 ajax 将它们加载到包含内容的单个 div 中，而不是让它们既已在页面上又被隐藏。

对控制器的 jquery 调用如下所示：

```
$("#form").submit(function() {
        $.ajax({
        type: 'POST',
        url: '@Url.Action("PartialViewMethod","ControllerName")',
        data: $(this).serialize(),
        success: function (data) {
            $("#contentDivId").html(data);
        },
        });
} 
```

控制器方法如下所示：

```
public ActionResult PartialViewMethod (string PartialViewName) {
     return PartialView("_" + PartialViewName);
} 
```

假设这包含在提交要返回的局部视图名称的表单中，这会将 html 从局部视图加载到具有 id 的 div 中`contentDivId`。

# c# - 从 Java 脚本调用 C# 代码背后的代码

> ID：11643563
> 
> 赞同：0
> 
> 时间：2012-07-25T05:58:57.943
> 
> 标签：c#, javascript

我们正在使用VS2008。我们正在调用作为 EXE 可执行文件创建的 ActiveX shell 脚本对象，它读取密码键盘进行身份验证并返回结果。此对象在 ASPX 页面中的 Javascript 中调用。

得到结果后，我们需要存储我们在页面后面用 C# 代码编写的信息。

我的问题是，我们应该如何调用 ASPX java 脚本中的代码或 WCF 服务。

我的java脚本代码如下：

```
 function launchExecutable(strdata) {

        try {
            var shellActiveXObject = new ActiveXObject("WScript.Shell");

            shellActiveXObject.Run("c:\\Test\\EBCK.exe " + strdata, 1, true);
        }
        catch (e) {
            alert(e.message);
        }

        try {
            var abc = window.clipboardData.getData('Text');
            // from here we have to call the C# code which is written in CS file or 
            // call a WCF Web service
        }
        catch (e) {
            alert(e.message);
        } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:17:07.990

要在 javascript 中调用 wcf 服务，请使用 ScriptManager。例如：

```
<asp:scriptmanager id="ScriptManager1" runat="server">
        <services>
            <asp:servicereference path="http://localhost:61586/Service1.svc">        
 </services> 
```

在上面的代码中，请注意 servicereference 设置为托管在另一个域上的 WCF 服务。

使用 makeCall：

```
function makeCall() {
                      var proxy = new JsonpAjaxService.Service1();
                     proxy.set_enableJsonp(true);
                     proxy.GetCustomer(onSuccess, onFail, null);
                 } 
```

您可以使用**onSuccess**从服务调用中获取结果并显示数据。

```
function onSuccess(result) {
                 alert( result.Name + " " +result.Address);
             } 
```

如果服务失败，您可以使用**onFail 。**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:26:37.297

您可以在页面上添加脚本管理器

并使用该属性创建一个静态方法`[webmethod]`并从 JQuery 或 javascript 调用该方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:02:46.540

您可以将值存储在隐藏字段中并回发页面。回发页面时，在后面的代码中访问隐藏字段值。

```
<asp:Hidden Id="hid" value="" runat="server"> 
```

要在 javascript 中回发页面，请使用 __doPostback。

# javascript - 如何重新加载 jquery 使其适用于下一个进程

> ID：11643564
> 
> 赞同：1
> 
> 时间：2012-07-25T05:58:58.830
> 
> 标签：javascript, jquery, html, ajax

我在运行在 JQuery 下运行的第二个进程时遇到问题，如下面的代码。

```
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></head>
<body>
    <script type="text/javascript" src='jquery-1.6.2.min.js'> </script>
    <div id="displayArea1">
    </div>
    <br/>
    <div id="displayArea2">
    </div>
    <input id="btnSet" type="button" value="Set The Value" />
    <script>

        //The input that should i use
        var itemToPrintOut1 = "[Input1 (working)]     Search <strong style='cursor:pointer' title='Click here'>IP{<span id='ip1'>192.168.2.56,192.168.2.89,192.168.2.75</span>}</strong> that has accessed to MAIL-SERVER{192.168.2.8}";
        var itemToPrintOut2 = "[Input2 (not working)] Search <strong style='cursor:pointer' title='Click here'>IP{<span id='ip2'>192.168.2.56,192.168.2.89,192.168.2.75</span>}</strong> that has accessed to MAIL-SERVER{192.168.2.8}";

        $("#displayArea1").html(itemToPrintOut1);  //If I enable this line, it is works as what i want(because it is using jquery)

        $("#btnSet").click(function(){
            $("#displayArea2").html(itemToPrintOut2);
        });

        $("#ip1").click(function(){
            alert("Normal method, data = " + $("#ip1").html());
        });

        $("#ip2").click(function(){
            alert("The method I should use, data = " + $("#ip2").html());
        });
    </script>
</body> 
```

第一次（加载时）它将显示`itemToPrintOut1`文本，我可以单击 IP 地址。我对此没有任何意见！

但是当我单击按钮并显示第二个文本`itemToPrintOut2`时，我无法再单击 IP。

任何人都可以帮助我如何确保第二个输出也可以与 JQUERY 一起使用。对我来说，有很多事情也与这个问题有关。它与JQuery加载有关吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:04:33.533

您正在尝试将处理程序绑定到尚不存在的元素，请尝试以下操作：

```
<script>

    //The input that should i use
    var itemToPrintOut1 = "[Input1 (working)]     Search <strong style='cursor:pointer' title='Click here'>IP{<span id='ip1'>192.168.2.56,192.168.2.89,192.168.2.75</span>}</strong> that has accessed to MAIL-SERVER{192.168.2.8}";
    var itemToPrintOut2 = "[Input2 (not working)] Search <strong style='cursor:pointer' title='Click here'>IP{<span id='ip2'>192.168.2.56,192.168.2.89,192.168.2.75</span>}</strong> that has accessed to MAIL-SERVER{192.168.2.8}";

    $("#displayArea1").html(itemToPrintOut1);  //If I enable this line, it is works as what i want(because it is using jquery)

    $("#btnSet").click(function(){
        $("#displayArea2").html(itemToPrintOut2);

         $("#ip2").click(function(){
               alert("The method I should use, data = " + $("#ip2").html());
         });
    });

    $("#ip1").click(function(){
        alert("Normal method, data = " + $("#ip1").html());
    });

</script> 
```

然后，当您单击时`ip1`，它会添加`ip2`html 和他的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:06:59.067

当您将点击事件添加到 ip2 时，它不存在。您可以使用 jquery 'live' 将事件绑定到页面上稍后出现的任何内容上。

```
$('#ip2').live('click',function() {}); 
```

这将在稍后添加到文档中的任何 dom 元素上绑定 click 事件，如果它们的 id 为 'ip2'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:07:10.457

您可以使用 .live() 而不是 .click() 在运行时绑定事件。由于 .live() 已被弃用，您可能想尝试 .on() 方法。

# makefile - Makefile.in 和变量替换

> ID：11643565
> 
> 赞同：11
> 
> 时间：2012-07-25T05:59:02.490
> 
> 标签：makefile, autoconf, automake

在`Makefile.in`我看到变量定义中，外部变量名称包含在两个`@`符号之间

```
# @configure_input@

package = @PACKAGE_NAME@ 
```

那些外部变量从何而来？另外，我在 GNU 手册中找不到在两个`@`符号之间精确包含变量的含义是什么？它是 Makefile.in 特有的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T11:20:53.340

这是一个自动配置的事情。

完成`./configure`运行后，它会生成并执行一个名为 的文件`config.status`，该文件是一个 shell 脚本，具有变量替换的最终值（用 声明的任何内容`AC_SUBST`）。

中声明的任何内容`AC_CONFIG_FILES`都由 处理`config.status`，通常是`foo.in`转为`foo`。

当 automake 处理`Makefile.am`成`Makefile.in`时，任何`AC_SUBST`变量都会自动变为可用（使用类似的声明`FOO = @FOO@`），除非它被调用`AM_SUBST_NOTMAKE`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T10:12:31.380

（我不是专家，但是）是的，它们特定于 Makefile.in，并[`configure`](http://www.gnu.org/software/autoconf/)在组装时替换它们`Makefile`，请参阅 [Autoconf 手册，第 4.8 节](http://www.gnu.org/software/autoconf/manual/autoconf.html#Makefile-Substitutions)。例如，`@PACKAGE_NAME@`由[AC_INIT](http://www.gnu.org/software/autoconf/manual/autoconf.html#Initializing-configure)定义。

# search - 按日期范围搜索 Bing Azure API

> ID：11643567
> 
> 赞同：2
> 
> 时间：2012-07-25T05:59:15.383
> 
> 标签：search, bing

所以我实现了必应搜索 API（最新的 Azure 市场版本）。

基本上我正在尝试将 Google 搜索结果与 Bing 结合起来，我完成了 Google 部分（Google Custom Search API），现在我被 Bing 困住了。

我的搜索应该支持： - 按关键字搜索 - 排除关键字的选项 - 指定要搜索的网站的选项 - 指定日期的选项（过去 24 小时、过去一周、过去一个月等）

我尝试了很多方法，我搜索再搜索，但 Bing API 似乎没有提供按日期搜索的选项。然而，我找到了一种使用 www.bing.com 而不是 API 执行特定日期搜索的方法。

Bing 不支持这一点并不是我的错，但是在我继续向我的客户解释他所支付的永远不会是他想要的之前，我想看看你们中是否有人得到了一些特殊的黑客或任何解决方法那个问题。

提前感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:53:27.867

Unfortunately, this is no longer a feature in Bing. I've heard whispers that they're planning on bringing it back in, but nothing has yet come out of that.

I'm sure this isn't the answer you'd like to hear, but that's the answer I have for you.

It used to be around: [http://www.webranking.com/blog/bings-narrow-by-date-search-tool](http://www.webranking.com/blog/bings-narrow-by-date-search-tool) however, as you can tell, it isn't anymore. I've looked for a workaround, too; perhaps I'm not searching hard enough, but I've come up emptyhanded.

# oracle - Invalid Identifier - 只有部分表名被休眠

> ID：11643568
> 
> 赞同：0
> 
> 时间：2012-07-25T05:59:19.283
> 
> 标签：oracle, hibernate

当我执行查询以在 Hibernate 中保存对象时-生成的查询是错误的-下面是休眠生成的查询-

```
select sintranhis_.SINID, sintranhis_.SINDDT as SINDDT3_, sintranhis_.SINDES as SINDES3_, sintranhis_.SINTIME as SINTIME3_, sintranhis_.SINTNO as SINTNO3_ from ERPDSS3.SINTRAN_HISTORY  sintranhis_ where sintranhis_.SINID=? 
```

下面是 SINTRAN_HISTORY 类 -

```
public class SottranHistory extends Persistent_Model implements java.io.Serializable {

     private SottranHistoryId id;
     private Stpmast stpmast;
     private String sotdes;
     private BigDecimal sottno;
     private Date sotddt;
     private Timestamp sottime;

    public SottranHistory() {
    }

    public SottranHistory(SottranHistoryId id, Stpmast stpmast) {
        this.id = id;
        this.stpmast = stpmast;
    }
    public SottranHistory(SottranHistoryId id, Stpmast stpmast, String sotdes, BigDecimal sottno, Date sotddt, Timestamp sottime) {
       this.id = id;
       this.stpmast = stpmast;
       this.sotdes = sotdes;
       this.sottno = sottno;
       this.sotddt = sotddt;
       this.sottime = sottime;
    }

     @EmbeddedId

    @AttributeOverrides( {
        @AttributeOverride(name="sottyp", column=@Column(name="SOTTYP", nullable=false, length=12) ), 
        @AttributeOverride(name="sotid", column=@Column(name="SOTID", nullable=false, precision=6, scale=0) ) } )
    public SottranHistoryId getId() {
        return this.id;
    }

    public void setId(SottranHistoryId id) {
        this.id = id;
    }

@ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="SOTTYP", nullable=false, insertable=false, updatable=false)
    public Stpmast getStpmast() {
        return this.stpmast;
    }

    public void setStpmast(Stpmast stpmast) {
        this.stpmast = stpmast;
    }

    @Column(name="SOTDES", length=70)
    public String getSotdes() {
        return this.sotdes;
    }

    public void setSotdes(String sotdes) {
        this.sotdes = sotdes;
    }

    @Column(name="SOTTNO", precision=22, scale=0)
    public BigDecimal getSottno() {
        return this.sottno;
    }

    public void setSottno(BigDecimal sottno) {
        this.sottno = sottno;
    }

    @Temporal(TemporalType.DATE)
    @Column(name="SOTDDT ", length=7)
    public Date getSotddt() {
        return this.sotddt;
    }

    public void setSotddt(Date sotddt) {
        this.sotddt = sotddt;
    }

    @Column(name="SOTTIME")
    public Timestamp getSottime() {
        return this.sottime;
    }

    public void setSottime(Timestamp sottime) {
        this.sottime = sottime;
    }
} 
```

错误恰好是 -

```
SEVERE: ORA-00904: "SINTRANHIS_"."SINID": invalid identifier

Jul 25, 2012 11:25:36 AM com.dchan.codelion.models.Persistent_Model attachDirty
SEVERE: attach failed
org.hibernate.exception.SQLGrammarException: could not retrieve snapshot: [com.dchan.codelion.models.SintranHistory#1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:04:32.297

最后发现列名有空格。修复后一切正常

# php - 无法使用 require 包含我的 Css 文件或包含在我的代码中

> ID：11643570
> 
> 赞同：0
> 
> 时间：2012-07-25T05:59:22.393
> 
> 标签：php, css

我的网站遇到了一些不寻常的问题。我已经在我的头文件中插入了所有的 CSS 文件，并且我已经将它包含在每个 php 页面中，下面是一个 php 头文件，我将它包含在每个 php 页面中。但是标题的内容出现了，但样式根本没有出现。我已经检查了 Css 和包含文件的路径，但我仍然找不到问题。

让我在下面为您提供路径详细信息，如果我没有，您也许可以发现问题。标头位于 include 文件夹中，现在我要做的是从位于 admin 文件夹中的 admincontent.php 中调用标头。

标头中包含的 css 文件：localhost/bobs/css/cssfiles....

标头路径：localhost/bobs/includes/header.php

调用标头的文件：localhost/bobs/admin/admincontent.php

```
<?php require_once("function.php")?>
<!DOCTYPE html>
<html leng ="en">
<head>
<meta charset="utf-8" /> 
<title>ClickTravelStay</title>
 <link href="css/reset.css" rel="stylesheet" type="text/css">
 <link href="css/general.css" rel="stylesheet" type="text/css">
 <link href="css/footer.css" rel="stylesheet" type="text/css">
 <link href="css/form.css" rel="stylesheet" type="text/css">
 <link href="css/admin.css" rel="stylesheet" type="text/css">
 <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
 <link href='http://fonts.googleapis.com/css?family=Oswald:400,700' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="topHeader" class="Calign"> 
    <a href ="index.php" id="logoFigure">
    <img src="img/repetimg/logo.png" height="60"/ >
    </a>   
    <div class="cBoth"><!-- clear Both--></div>    
    <ul id="nav">
    <li><a href="index.php">HOME</a></li>
    <li><a href="vication.php">VICATION</a></li>
    <li><a href="carrental.php">CAR RENTAL</a></li>
    <li><a href="#">Corporate</a></li>
    <li><a href="deals.php">DEALS</a></li>
    <li><a href="contact.php">CONTACT</a></li>
    <li><a href="about.php">ABOUT US</a></li>
    </ul>

    <ul id="help">
    <li><a href="#">Book online or call: 080099999 Free from a landline</a></li>
    </ul>
</div><!-- END OF topHeader--> 
```

现在下面的代码就是调用头文件的admincontent.php的代码。

```
<?php require_once("../includes/header.php");?>
<?php require_once("../includes/connection.php");?>
<?php find_hotel_and_room_forNavig();?>
<div class="cBoth"></div>
<div id="sep"></div>
<div id="content" class="Calign">
<ul id="menu">
             <?php
               Navigation($selected_hot, $selected_rom);
             ?>
             <li><a href="new_hotel.php">+ Add new Hotel >></a></li>
</ul>
<div id="subcontent">
<?php
     echo $selected_hot['hotel_name']."</p>"; 
     echo $selected_rom['room_type']."</p>";
?>
</div><!--end of subcontent-->
</div><!--end of content-->
</body>
</html> 
```

我不明白的是，当我从 index.php 中调用标头时，说管理文件夹像这样（localhost/bobs/index.php）一切正常，但我无法从管理文件夹中引用标头。这是一个错误，因为从我看到的路径很好，除非还有其他需要设置的东西。请记住，我可以访问标题的内容，但样式根本不显示。html 像往常一样出现，但没有任何风格。非常感谢您的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:05:00.983

> 我不明白的是，当我从 index.php 中调用标头时，说管理文件夹像这样（localhost/bobs/index.php）一切正常，但我无法从管理文件夹中引用标头。

这是按设计工作的：您正在使用[相对路径](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)。请改用 CSS 样式表的绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:04:55.413

使用绝对路径

```
/bobs/css/[filename].css 
```

# java - IF 语句条件

> ID：11643575
> 
> 赞同：1
> 
> 时间：2012-07-25T05:59:29.240
> 
> 标签：java

这是我的代码，我有一个简单的问题

```
import java.util.*;
import java.io.*;
import type.lib.GlobalCredit;
import type.lib.CreditCard;
import java.text.SimpleDateFormat;

public class eCheck08A

{
public static void main(String[] args)

{
    PrintStream out = System.out;
    Scanner in = new Scanner(System.in);

    GlobalCredit credit1 = new GlobalCredit().getRandom();

    out.print("Enter report range in years ... ");
    int range = in.nextInt();
    out.println("Cards expiring before " + range + " year(s) from now: ");

    SimpleDateFormat sf = new SimpleDateFormat("dd/MM/yyyy");

    for (CreditCard cc : credit1)
    {

    Calendar c = Calendar.getInstance();
    c.setTime(cc.getExpiryDate());
    c.add(Calendar.YEAR, range);
    Date newDate = c.getTime();

        if (cc.getExpiryDate().compareTo(newDate) < range)
        {
            if(cc.getExpiryDate().compareTo(newDate) > range)
            {
                out.print("*");
            }
            out.print(cc.getNumber());
            out.println("\t" + sf.format(cc.getExpiryDate()));

        }
    }

}
} 
```

它应该是什么样子的输出：

```
Enter report range in years ... 3
Cards expiring before 3 years from now:

561561-8 20/11/2015
045645-7 22/02/2017
456462-3 16/04/2013 *
546548-5 19/08/2016 
```

当前年份是 2012 该人输入“3”作为范围。所以从 2012 年到 2015 年的任何年份都应该有一个“*”。和上面的输出一样，2013 有一个“*”。你能告诉我在我的 IF 语句中做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:05:37.670

compareTo 方法不会返回您期望的结果。仅当第一个参数较小时才保证返回负数，如果大于则返回正数，如果它们相等则返回零。

编辑：这是您如何更改它以使您的代码工作的方法：

```
Date now = new Date(System.currentTimeMillis());
Date endDate = new Date(now.getTime());
endDate.SetYear(endDate.getYear() + 3);
if (cc.getExpiryDate().after(now) && cc.ExpiryDate.before(endDate)) {
 // do stuff.
} 
```

您必须小心处理边缘情况（如果您包括间隔结束等），但这应该作为方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:12:44.587

如果您要`cc.getExpiryDate()`与**当前日期 + 范围**进行比较，您希望`newDate`是：

```
Calendar c = Calendar.getInstance();
// commenting this line out because getInstance() gives us the current date already
//    c.setTime(cc.getExpiryDate());
c.add(Calendar.YEAR, range);
Date newDate = c.getTime(); 
```

这`newDate`是当前日期之前的“范围”年。现在您可以开始比较您的`cc.getExpiryDate()`值：

```
 // expiry date is BEFORE the date + "range" years ahead
    if (cc.getExpiryDate().compareTo(newDate) < 0)
    {
        // the expiry date is AFTER or ON the current date
        if(cc.getExpiryDate().compareTo(new Date()) >= 0)
        {
            out.print("*");
        }
    }
    out.print(cc.getNumber());
    out.println("\t" + sf.format(cc.getExpiryDate())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:13:03.290

我认为你的整个逻辑都是错误的。您应该根据日期比较信用卡到期日期`today + nYears`，而不是`expiryDate + nYears`.

看看`Date.after`，，，`Date.equals`_`Date.before`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:15:41.327

看看 Date.compareTo() 方法的java文档...

*返回： 如果参数 Date 等于此 Date，则值为 0；如果此 Date 在 Date 参数之前，则值小于 0；如果此 Date 在 Date 参数之后，则值大于 0。*

但这并不能为您提供多年的差异。它只会给你-1、0或1。

**作为一种解决方案，您需要从日期中提取年份，然后进行比较。**

# asp.net - RegisterStartupScript 不适用于 ScriptManager、Updatepanel。这是为什么？

> ID：11643578
> 
> 赞同：44
> 
> 时间：2012-07-25T05:59:42.450
> 
> 标签：asp.net, updatepanel, scriptmanager

```
protected void timer1_Tick(object sender, EventArgs e)
    {
        foreach (RepeaterItem item in rpChat.Items)
        {
            TextBox txt = item.FindControl("txtChatMessage") as TextBox;
            if (txt != null)
            {
                message[i] = txt.Text;
                i--;
            }
        }
        lblStatusChat.Text = "";
        RepeaterBind();
        string javaScript = "<script language=JavaScript>\n" + "alert('Button1_Click client-side');\n" + "</script>";

        Page.ClientScript.RegisterStartupScript(this.GetType(), "myKey", javaScript);
    } 
```

`timer_click`触发器和更新面板。并且警报消息不会出现在 timer_tick 事件上

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-25T06:10:40.140

当您使用 UpdatePanel 时，您不能像您尝试的那样使用 ClientScript 调用 JavaScript。你必须`ScriptManager.RegisterStartupScript`改用。

所以改变你的

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "myKey", javaScript); 
```

到

```
ScriptManager.RegisterStartupScript(updatePanelId,updatePanelId.GetType(), "alert", javaScript, true); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T06:01:49.830

您需要使用 ScriptManager 类，因为您在进行回发和使用 updatepanel 时是注册脚本

MSDN：[**`ScriptManager.RegisterStartupScript`**](http://msdn.microsoft.com/en-us/library/bb359558)

ScriptManager.RegisterStartupScript 方法用于在控件包装在 UpdatePanel 中时将客户端脚本添加到页面。

**ASPX 页面**

```
<div>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Label ID="lblDisplayDate" runat="server" Text="Label"></asp:Label>
         <asp:Button ID="btnPostback" runat="server" onclick="btnPostback_Click" 
        Text="ClickMe" />
    </ContentTemplate>
</asp:UpdatePanel>
</div> 
```

**CodeBehind 注册启动脚本**

```
protected void btnPostback_Click(object sender, EventArgs e)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder();
    sb.Append(@"<script language='javascript'>");
    sb.Append(@"var lbl = document.getElementById('lblDisplayDate');");
    sb.Append(@"lbl.style.color='red';");
    sb.Append(@"</script>");

    ScriptManager.RegisterStartupScript(btnPostback,this.GetType(), "JSCR", sb.ToString(),false);

} 
```

详细信息：[**在异步回发期间使用 RegisterStartupScript 以编程方式添加 JavaScript**](http://www.dotnetcurry.com/ShowArticle.aspx?ID=200)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-14T04:57:35.657

在我的情况下 ScriptManager.RegisterStartupScript 也不起作用。

不行：

```
ScriptManager.RegisterStartupScript(Me, 
  Me.GetType(), 
  String.Format("Data{0}", Me.ID), 
  "<script>alert(111);</script>", 
  False) 
```

工作：

```
ScriptManager.RegisterStartupScript(Me.Page, 
  Me.GetType(), 
  String.Format("Data{0}", Me.ID), 
  "<script>alert(111);</script>", 
  False) 
```

`Me`在示例中是我的自定义控件继承自 `System.Web.UI.WebControls.WebParts.WebPart`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-16T09:02:08.343

一定要晚一点，但我在这里找到了解决办法[http://forums.asp.net/p/1117430/5483679.aspx/1](http://forums.asp.net/p/1117430/5483679.aspx/1)

您必须使用 System.Web.UI.ScriptManager.RegisterClientScriptBlock 而不是 Page.ClientScript.RegisterStartupScript

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-15T21:25:47.520

如果您所在的班级似乎无法访问 Page。

```
Page page = HttpContext.Current.CurrentHandler as Page;

ScriptManager.RegisterStartupScript(page,page.GetType(), Guid.NewGuid().ToString(), yourScriptVariable, true); 
```

# asp.net-ajax - IE9 中的 MaskedEdit 扩展器问题

> ID：11643580
> 
> 赞同：0
> 
> 时间：2012-07-25T06:00:32.537
> 
> 标签：asp.net-ajax

![在此处输入图像描述](../Images/dac1464d9cc0252f6c92268c303feec5.png)

在我的页面中，我有一个带有 Ajax Masked 编辑扩展器控件的显示日期的文本框，但是当我打开页面时出现“未指定的 JavaScript 错误”之类的错误，但它在 IE7、8 而不是 IE9 中运行良好，并且也适用于 Safari。以下是我的代码示例：

```
<asp:TextBox ID="txtReturnedDate" CssClass="calendarField" runat="server" ></asp:TextBox>
                        <cc1:CalendarExtender ID="CalendarExtender2" runat="server" TargetControlID="txtReturnedDate"  PopupButtonID="imgReturnedDate" 
                                              PopupPosition="Right" CssClass="Calendar"/>
                        <asp:linkbutton runat="server" CssClass="calendarButton" ID="imgReturnedDate" Text="<img border='0' class='calendarButton' src='Images/coreCalendarIcon.gif'>"></asp:linkbutton> 
                        <cc1:MaskedEditExtender ID="MaskedEditExtender2" runat="server" TargetControlID="txtReturnedDate" Mask="99/99/9999" OnFocusCssClass="MaskedEditFocus" AutoComplete="false" 
                            OnInvalidCssClass="MaskedEditError" MaskType="Date" DisplayMoney="None" AcceptNegative="None"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:22:49.567

如果您有母版页，请将以下内容放在 <head>

< meta http-equiv="X-UA-Compatible" content="IE=8; IE=7" />

这将告诉浏览器使用 IE8 Standards vs IE9

# asp.net-mvc - 如何使用 ajax 响应和 MVC Razor 重新绑定 Telerik 网格

> ID：11643588
> 
> 赞同：0
> 
> 时间：2012-07-25T06:01:15.130
> 
> 标签：asp.net-mvc, razor, telerik

请让我知道如何使用 Ajax Respone 重新绑定 Telerik 网格。如何在控制器中编写返回方法，以便 ajax 响应获取所有数据并将这些数据与 Telerik 网格绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:01:55.293

Grid 有一个广泛的客户端 API，您可以在您的场景中使用它。要注意的事件是 OnDataBinding。

看看我们为 Grid 提供的以下示例。 [http://demos.telerik.com/aspnet-mvc/grid/externalservicetwitter](http://demos.telerik.com/aspnet-mvc/grid/externalservicetwitter)

这是一个我们连接到 Twitter 并获取推文的演示。但是连接到推特、搜索推文、获取推文以及将网格与结果绑定的操作都是从客户端完成的。

网格首先定义如下：

```
<%= Html.Telerik().Grid<TwitterItem>()
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Template(o => { }).Title("Author").Width(100);
            columns.Template(o => { }).Title("Avatar").Width(80);
            columns.Bound(o => o.text).Title("Post");
        })
        .ClientEvents(events => events
            .OnDataBinding("onDataBinding")
            .OnRowDataBound("onRowDataBound")
        )
        .Scrollable(scrolling=>scrolling.Height(400))
%> 
```

当用户点击搜索按钮时，我们会在网格上发出一个 ajaxrequest。这是代码片段：

```
$('#searchButton').click(function(e) {
     e.preventDefault();
     $('#Grid').data('tGrid').ajaxRequest();
}); 
```

这会导致 OnDataBinding 触发。这是 ondatabinding 方法的代码片段：

```
function onDataBinding(e) {
    var grid = $(this).data('tGrid');

    $('.t-status .t-icon', grid.element).addClass('t-loading');
    // call the twitter search api
    $.ajax({
        url: 'http://search.twitter.com/search.json',
        contentType: 'application/json; charset=utf-8',
        type: 'GET',
        dataType: 'jsonp',
        error: function(xhr, status) {
            alert(status);
        },
        data: {
            q: $('#searchText').val()
        },
        success: function(result) {
            grid.dataBind(result.results);
            $('.t-status .t-icon', grid.element).removeClass('t-loading');
        }
    });
} 
```

如您所见，我们向 twitter 发出 ajax 请求，当数据返回时，我们只需调用网格上的 dataBind 方法。

希望我能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

# python - Python：确定缺失的行

> ID：11643591
> 
> 赞同：0
> 
> 时间：2012-07-25T06:01:42.307
> 
> 标签：python, list, data-extraction

以包含以下几行的短文件为例：

```
Apple = 1
Pear = 1
Orange = 2
;
Orange = 3
Pear = 1
;
Apple = 1
Pear = 1
Orange = 1 
```

我所做的是读取文本文件，并将`Apple`,`Orange`和`Pear`放入各自的列表中，例如：

```
Orange = [ 2,3,1 ]
Pear = [ 1,1,1 ] 
```

我曾经`line.count('Apple')==1`确定文本文件中的当前行是一个水果，然后将其后的值附加`=`到列表中。

如您所见，缺少第二部分`Apple`。我希望列表是：

```
Apple = [ 1,'-',1] 
```

每当该行不显示水果时，应附加列表`-`以指示它。

我的问题是，那我该怎么做。确定一个部分缺少水果名称，然后附加`-`到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:11:06.937

您可以保留一个数组，其中包含在一个部分中找到的所有水果名称。当您遇到分号时，您检查每个水果的名称是否存在于数组中，如果不存在则附加一个“-”，然后清除数组并继续下一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:32:30.960

```
if line.count('Apple')==1:
    Apple.append(str(number))
else:
    Apple.append('-') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:34:07.230

```
from collections import defaultdict
from itertools import takewhile

d = defaultdict(list)
valid_fruits = set(['Apple', 'Pear', 'Orange'])

with open('data.txt') as f:
    while True:
        fruits = dict(takewhile(lambda x: x[0] != ';',
                                (line.rstrip().split(' = ') for line in f)))
        if not fruits:
            break
        for fruit in valid_fruits:
            if fruit in fruits:
                d[fruit].append(int(fruits[fruit]))
            else:
                d[fruit].append('-')

print d 
```

输出：

```
defaultdict(<type 'list'>, {'Orange': [2, 3, 1], 'Pear': [1, 1, 1], 'Apple': [1, '-', 1]}) 
```

# c# - Castle Windsor PerWebRequest Lifestyle 没有受到尊重

> ID：11643594
> 
> 赞同：1
> 
> 时间：2012-07-25T06:01:46.810
> 
> 标签：c#, asp.net, asp.net-mvc, castle-windsor

我正在开发一个 3 层 MVC 应用程序。数据层包含一个 EF4 代码优先的 DbContext：

```
public class MyDataContext : DbContext
{
    // DbSet<>s...
} 
```

DI 还有一个接口和一个实现：

```
public interface IContextFactory
{
    MyDataContext GetContext();
}

public class ContextFactory : IContextFactory
{
    readonly MyDataContext context;
    public ContextFactory(MyDataContext context)
    {
        this.context = context;
    }

    public MyDataContext GetContext()
    {
        return this.context;
    }
} 
```

还有一个存储库模式：

```
public interface IRepository<T>
{
    T Create();
    void Insert(T entity);
    void Delete(T entity);
    ...
    void Save();
}

public class Repository<TEntity> : IRepository<TEntity>
  where TEntity: class, new()
{
    public Repository(IContextFactory factory)
    {
        this.context = factory.GetContext();
        this.set = factory.Set<TEntity>();
    }
    ...
} 
```

上层通过`IRepository<>`注入城堡温莎来访问实体。自定义提供程序/模块`.Resolve<>()`根据需要明确地显示它们。

数据层正在城堡中注册`IWindsorInstaller`：

```
container.Register(
    Component.For<MyDataContext>()
    .DependsOn(new Hashtable() { {"connectionStringName", "DefaultConnection"} })
    .LifestylePerWebRequest());

container.Register(
    Component.For<IContextFactory>()
    .ImplementedBy<ContextFactory>()
    .LifestylePerWebRequest());

container.Register(
     Component.For(typeof(IRepository<>))
    .ImplementedBy(typeof(Repository<>))
    .LifestylePerWebRequest()); 
```

我不知道有什么问题——我的测试没有涵盖数据上下文——但是在调试模式下，我的数据上下文的构造函数在每个 Web 请求中被调用了近十几次。

**编辑**：虽然它没有解释为什么`Repository`并且`MyDataContext`没有将范围限定为 Web 请求，但我在构造函数中的断点显示了一个相同的调用堆栈，它构造的所有十多次：`MembershipProvider.GetUser -> new Repository(IContextFactory)`。我没有明确的调用`GetUser`——到底是什么导致 FormsAuthentication 调用 GetUser 这么多次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:13:04.967

在 Global.asax.cs 文件中添加类似的内容：

```
 protected void Application_BeginRequest(object sender, EventArgs args)
    {
        System.Diagnostics.Debug.WriteLine(this.Request.RequestType + " " + this.Request.RawUrl);
    } 
```

连接调试器并验证每个“请求”确实只有一个请求。也许您有并行运行的 ajax 请求。或者，也许您的内容元素（js 文件、图像）受到保护，并且它们正在执行 C# 代码。

# javascript - 如何更改 Facebook 发送弹出窗口的位置？

> ID：11643598
> 
> 赞同：7
> 
> 时间：2012-07-25T06:02:06.787
> 
> 标签：javascript, facebook, facebook-graph-api, jquery, send

我在我的网站底部使用喜欢和发送插件。但是，当单击发送按钮时，弹出窗口会打开并且没有显示完整。如何使弹出窗口打开到上面？但不会更改喜欢和发送按钮的位置。仅更改弹出窗口的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:09:52.030

因此，您必须`negative margin`从左侧添加一些以将小部件弹出框向左移动，直到它进入`visible area`。你可以在你的css中使用它：

```
.fb_edge_comment_widget {
    margin-left: -370px !important; //use any figure appropriate to you
} 
```

您需要在出现按钮的父 div 中添加一些 margin-bottom，这样它就会强制弹出框向左显示并且完全可见......

**这是类似问题的链接： [Facebook Like Widget on Fan page, Comment area out of visible area](https://stackoverflow.com/questions/5808240/facebook-like-widget-on-fan-page-comment-area-out-of-visible-area)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T14:31:41.873

实际上，这是可能的。

我们的解决方案不仅仅是让 Facebook Like 对话框出现在上面，它也是完全异步的，因此页面不会阻塞，它会自动创建正确的 url 条目，因此我们所有的页面都使用相同的 javascript，它会更新并显示它只有在知道实际大小后，才能用一块石头杀死3只鸟。

1）我们在所有页面中都包含一个“空”的 div，而不是用 javascript 填充：
`<div id="social-media-bar"><div id="social-media"></div></div>`

PS：2 级 div 的原因是因为我稍后会将其扩展到 google+、twitter 等

2）我们使用 LazyLoad 加载器异步加载 facebook
，但任何都可以，如果你愿意，你也可以同步： `LazyLoad.js(('https:' == document.location.protocol ? 'https://' : 'http://') +
'connect.facebook.net/en_US/all.js');`

3) 在 facebook 初始化中，我们：
- 填充专用 div，
- 要求 fb 解析插入的标签
- 解析后使用超时以确保显示已刷新，因此宽度和高度是正确的。

```
window.fbAsyncInit = function() { 
        var d = document,n,nn,url,url_ref,i;`

        // due to bug in facebook need to delay the actual access to data after parse
        function FBUpdateSize(){
            var h,str;
            // show facebook entry using actual element size
            h = nn.firstChild.clientHeight;
            str = h+'px';
            nn.style.height= str;
            n.style.height= str;
            n.style.overflow='visible';
        }

        FB.init({   channelUrl : 'http://www.plixo.com.sg/channel.html',
                    //appId : '228760567272221', 
                    status     : false,
                    xfbml      : false}); 

        // create facebook entries in the DOM
        n = d.getElementById('social-media');
        url = d.URL;
        i = url.lastIndexOf('/')+1;
        url_ref = url.slice(i,url.indexOf('.',i));
        nn = d.createElement('fb-like');
        nn.innerHTML = '<div id="fb_like_bottom"><fb:like href="' + url + '" ref="' + url_ref + '" send="false" layout="standard" width="360px" show_faces="false"></fb:like></div>';
        nn = n.appendChild(nn);

        // call facebook to fill DOM entries
        // use a timeout in callback to ensure browser has refreshed internal clientHeight
        FB.XFBML.parse(nn,function(){setTimeout(FBUpdateSize,50)});
    };` 
```

4) 并且只有 3 种专用的 css 样式用于重新定位对话框：
`#social-media{position:relative;display:block;width:auto;z-index:200;overflow:hidden;height:0;background-color:#f2f2f2;border:1px solid #bdc7d8}`
`#fb_like_bottom{padding:4px;position:absolute}`
`#fb_like_bottom .fb_iframe_widget_lift{bottom:0;background-color:#f2f2f2;border:1px solid #bdc7d8!important;margin:-5px;padding:4px}`

您可以查看我们任何网站页面中的示例，例如[http://www.plixo.com.sg/large-format-printing-services.html](http://www.plixo.com.sg/large-format-printing-services.html)。

随意重用/修改等，如果您链​​接到我们的任何页面，将不胜感激；-)

# grails - 在视图页面上传照片

> ID：11643603
> 
> 赞同：0
> 
> 时间：2012-07-25T06:03:02.503
> 
> 标签：grails

上传一张应为指定尺寸的照片，例如：护照尺寸照片在我的查看页面中。请帮助我。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:24:04.630

我有这个观点

```
<div id="resultAvatar" class="message">
    <g:if test="${msg != null}">
        ${msg}
    </g:if>
    <g:else>
        <g:message code="profile.avatar.upload.info" />
    </g:else>
</div>
<div id="warnAvatar" class="warning" style="display:none;"></div>
<br />
<g:form name="avatarForm" id="avatarForm"
    controller="profile" action="saveAvatar"
    update="resultAvatar" enctype="multipart/form-data">

<style type="text/css">
    div.fileinputs {
        position: relative;
        width: 70%;
        text-align: right;
    }
    div.fakefile {
        position: absolute;
        top: 0px;
        right: 0px;
        z-index: 1;
        width: 148px;
    }
    div.fakefile input[type=button] {
        /* enough width to completely overlap the real hidden file control */
        cursor: pointer;
        width: 148px;
    }
    div.fileinputs input.file {
        position: relative;
        -moz-opacity:0 ;
        filter:alpha(opacity: 0);
        opacity: 0;
        z-index: 2;
    }
</style>        
    <table style="width:100%;"><tr>
        <td style="pading:40px">
            <div class="fileinputs">
                <input type="file" class="file" name="avatar" id="avatarBox" style="width:100%">
                <div class="fakefile">
                    <input type="button" value="Selecciona" />
                </div>
            </div>
        </td>
        <td>
            <a href="#" onclick="checkExt();return false;"
            class="botverde3"
            >Cargar</a>
        </td>
    </tr></table>

    <%--ti:multiFile id="avatarBox" name="avatar"/--%>
    <input id="submitAvatar" style="display:none;" type="submit" />
</g:form>
<g:javascript>

function checkExt(){
    var ext = $('#avatarBox').val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
        $('#warnAvatar').html('Extensión de fichero no admitida, solo se permiten archivos .gif, .png, .jpg y .jpeg');
        $('#warnAvatar').show();
    }else{
        var submitBtn = $('#submitAvatar');
        submitBtn.click();
    }
}
</g:javascript> 
```

在控制器方面

```
@Secured(['ROLE_USER'])
def saveAvatar = {
    def errors
    def user = theInitService.loggedUser()
    def hasFiles = fileService.hasFiles(request,'avatar')

    if(hasFiles) {
        errors = saveAvatar(request)
    }
    if(errors.equals("true")){
        render(template:"avatarUploadForm", model:[msg: 'There was a problem, try to upload it later.'])
    }else{
        render(template:"avatarUploadForm", model:[msg: 'The avatar was correctly saved.'])
    }
}

private String saveAvatar(request) {
    //println("save avatar for bean")
    def files = fileService.saveAvatarForBean(request)

    return files
} 
```

saveAvatarForBean 只是一个你必须保存的 Java 文件，有很多关于它的文档。我认为最不同的部分是 Grails 如何管理多部分文件和表单。

在这里，您有一个实用的代码

[http://ashokabhat.wordpress.com/2012/01/08/save-bytes-image-in-the-application-server-using-java/](http://ashokabhat.wordpress.com/2012/01/08/save-bytes-image-in-the-application-server-using-java/)

希望能帮助到你！:)

# .net - 在 wpf 组合框下拉菜单中显示选项卡控件

> ID：11643604
> 
> 赞同：1
> 
> 时间：2012-07-25T06:03:03.320
> 
> 标签：.net, wpf, combobox, wpfdatagrid, tabcontrol

我想在下拉列表中显示`TabControl`每个选项卡。可能吗 ？`DataGrid``ComboBox`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:06:56.130

简短的回答 - 是的

您可以使用模板来执行此操作，创建一个`template`用于`ComboBox`拥有`Datagrid`. 或者您可以修改`ControlTemplate`of `ComboBox`，如本文中所做的那样 -

[WPF DataGrid 作为 ComboBox 下拉菜单](http://www.eggheadcafe.com/tutorials/xaml/e8585e81-34c8-4808-ae3e-b8b35d738842/wpf-datagrid-as-combobox-dropdown.aspx)

但我怀疑这会有多大用处。

# javascript - 黑莓 PlayBook Webworks：低帧率

> ID：11643605
> 
> 赞同：0
> 
> 时间：2012-07-25T06:03:08.463
> 
> 标签：javascript, blackberry, blackberry-webworks, blackberry-playbook, playbook

虽然我的 blackberry webworks 应用程序在 Blackberry 7.0 和 7.1 设备上运行良好，但它在 PlayBooks 上的帧速率非常低。例如，在页面上滚动或在画布上绘制内容时。我使用 jQuery JavaScript 扩展。

低帧率导致 PlayBook 设备无法使用的原因可能是什么？

任何帮助，将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:01:41.207

推荐使用 jQuery Mobile 而不是 jQuery-UI，因为它更适合移动设备。jQuery 通常会生成大量的页面重绘，这对于流畅的 UI 来说代价高昂。您的应用中有很多页面吗？

最后，如果您使用像 iScroll 这样的 JavaScript 库来引入动态滚动，我建议您禁用它 - 原生 Web 引擎会为您执行此操作。

# sqlite - 执行 SQLite 脚本

> ID：11643611
> 
> 赞同：128
> 
> 时间：2012-07-25T06:03:52.883
> 
> 标签：sqlite

我使用以下命令启动 sqlite3 版本 3.7.7、unix 11.4.2：

```
sqlite3 auction.db 
```

尚未创建auction.db 的地方。

```
sqlite> auction.db < create.sql; 
```

给我这个错误：`near "auction": syntax error`

如何运行脚本？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-07-25T06:11:16.360

您想从 shell 中`create.sql`输入`sqlite3`，而不是从 SQLite 内部输入：

```
$ sqlite3 auction.db < create.sql 
```

SQLite 的 SQL 版本不理解`<`文件，你的 shell 可以。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2012-07-25T06:14:57.047

有很多方法可以做到这一点，一种方法是：

`sqlite3 auction.db`

其次是：

`sqlite> .read create.sql`

一般来说，SQLite 项目有非常棒的文档！我知道我们经常在文档之前联系 Google，但在 SQLite 的案例中，文档确实是最好的技术写作。它干净、清晰、简洁。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-05-20T17:26:24.323

为了执行简单的查询并返回我的 shell 脚本，我认为这很好用：

```
$ sqlite3 example.db 'SELECT * FROM some_table;' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-11T09:52:49.120

对于那些使用 PowerShell

```
PS C:\> Get-Content create.sql -Raw | sqlite3 auction.db 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-22T15:53:42.247

如果您使用的是 windows CMD，您可以使用此命令使用 sqlite3 创建数据库

```
C:\sqlite3.exe DBNAME.db ".read DBSCRIPT.sql" 
```

如果您没有具有该名称的数据库 sqlite3 将创建一个，并且如果您已经有一个，它仍然会运行它但出现“TABLENAME 已存在”错误，我认为您也可以使用此命令来更改已经存在的数据库（但我不确定）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-07T13:40:11.380

```
sqlite3 -init create.sql auction.db .quit 
```

当我输入命令`man sqlite3`时，我在“选项”下看到：

> **-init** *file从**file*
>        读取和执行命令，其中可以包含 SQL 语句和元命令的混合。

 *在“SQLITE META-COMMANDS”下：

> .quit 退出这个程序

另请参阅：[SQLite 的命令行 Shell：3\. sqlite3 的特殊命令（点命令）](https://www.sqlite.org/cli.html#special_commands_to_sqlite3_dot_commands_)。

另外，当我输入命令时`sqlite3 -help`，我会在“选项”下看到：

> -init FILENAME 读取/处理命名文件*

# java - Nodelist.item 返回 null

> ID：11643615
> 
> 赞同：0
> 
> 时间：2012-07-25T06:04:22.857
> 
> 标签：java, xml, parsing, xml-parsing

下面是我读取 xml 文件的主要代码。System.out.println(node) 在 1.5 和 1.6 中返回 null。我正在发布一个示例程序来重现该错误。在代码之后我也将我的 xml 放入了相同的程序代码和 xml 在 jdk 1.4 中工作正常。但是在更改为上述版本后，它返回 null。

```
public class Main
{        
    private static Document document;

    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException
    {
        File xmlfile = new File("D:\\utility_1341173385278.xml");

        parseXMLFile(xmlfile);
        getNodes(getRootNode(), "DIR");
    }

    public static void parseXMLFile(File file) throws ParserConfigurationException, SAXException, IOException
    {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        document = db.parse(file);
    }

    // get root node in xml

    public static  Node getRootNode()
    {
        return document.getDocumentElement();
    }

    // To get nodes in xml file starting from root node and prints all nodes which starts with given name.....

    public static List getNodes(Node parent, String nodeName)
    {
        List newList = new ArrayList();

        NodeList list = parent.getChildNodes();
        if (list != null)
        {
            for (int i = 0; i < list.getLength(); i++)
            {
                Node node = list.item(i);
                System.out.println(node);
                if (node.getNodeName().equals(nodeName))
                {
                    newList.add(node);
                }
            }
        }

        list = null;

        return newList;
    }
} 
```

xml 文件带有 DIR、DATABASE 和 FILE 标签

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <DATABASE data="" name="Test" path="file:/D:/Java/bu%2077/Test/utility/">
        <DIR last_mod_date="1341058205411" name="utility" status="unchanged">
            <DIR last_mod_date="1341058205445" name="bs90" status="unchanged">
                <DIR last_mod_date="1341058205699" name=".r280" status="unchanged">
                    <DIR last_mod_date="1341058205756" name="0093" status="unchanged">
                        <FILE last_mod_date="1340873680000" name="c2c1f5f1.000004b6" size="3360" status="unchanged"/>
                        <FILE last_mod_date="1340873680000" name="c7c1f0f1.00000cba" size="3440" status="unchanged"/>
                    </DIR>
                 </DIR>
                <FILE last_mod_date="1340957268000" name="New Text Document.txt" size="5" status="unchanged"/>
            </DIR>
        </DIR>
    </DATABASE> 
```

我在 1.4 和 1.5 上都执行了这个。下面是 1.4 中的输出

```
 <DIR last_mod_date="1341058205411" name="utility" status="unchanged">
                <DIR last_mod_date="1341058205445" name="bs90" status="unchanged">
                    <DIR last_mod_date="1341058205699" name=".r280" status="unchanged">
                        <DIR last_mod_date="1341058205756" name="0093" status="unchanged">
                            <FILE last_mod_date="1340873680000" name="c2c1f5f1.000004b6" size="3360" status="unchanged"/>
                            <FILE last_mod_date="1340873680000" name="c7c1f0f1.00000cba" size="3440" status="unchanged"/>
                        </DIR>
                     </DIR>
                    <FILE last_mod_date="1340957268000" name="New Text Document.txt" size="5" status="unchanged"/>
                </DIR>
            </DIR>

****************************************
output in 1.5

[#text: 
    ]
[DIR: null]
[#text: 
]
[#text: 
    ]
[DIR: null]
[#text: 
]
[#text: 
        ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T21:46:32.503

而不是这样做：

```
Node node = list.item(i);
System.out.println(node); 
```

尝试：

```
Element value = (Element) list.item(i);
System.out.println(value.getTextContent()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:39:39.520

所以他们改变了 toString() 的实现。你为什么还要依赖它？

创建您自己的 Node 包装器以覆盖 toString() 或获取您感兴趣的属性。

# google-maps - 谷歌地图/谷歌地球不同季节的卫星图像

> ID：11643626
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:10.080
> 
> 标签：google-maps, google-earth

有什么方法可以从一年中的不同月份或一年中的不同季节从谷歌地图/谷歌地球获取卫星图像。

例如，我想**在 Winter 获得纽约市**的卫星图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:40:07.770

您可以通过 UI 或通过创建[适当的 KML](https://developers.google.com/kml/documentation/touring#imagery)或使用 Earth API 以[编程方式在 Google 地球中查看历史图像。](http://code.google.com/apis/ajax/playground/#time_and_historical_imagery_ui)

# php - Array_search 出现故障？

> ID：11643627
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:10.483
> 
> 标签：php, arrays, search, indexing, return

前几行只是为了仔细检查所有变量是否符合要求。他们都给出了正确的数据。

print_r($stack) 确实给出了上述数组元素，（+ 和更多元素）

```
<?php
$item_name = $_POST['item_name']; 
echo $item_name.'<br/><br/>'; // IBM-3246785
print_r($stack);   // Array ( [0] => IBM-3246785 [1] => IBM-3567465 [2] => IBM-4579645 [3] => [4] => IBM-1234567 [5] => [6] => IBM-12345678 [7] => [8] => IBM-24374365 )            

$key = array_search($item_name, $stack);
if ($key !== false) {
    echo "The key where find was found is:" . $key;
} else{
    echo $item_name . " was NOT FOUND in the array";
};
?> 
```

数组搜索每次都返回错误！！！尝试用 IBM-3246785 替换 $item_name - 问题仍然存在。无法让它返回所选“item_name”的索引/键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:12:42.737

我刚刚在这里运行了这段代码---

```
<?php

$item_name = "IBM-3246785";
$stack = Array (0 => 'IBM-3246785', 1 => 'IBM-3567465', 2 => 'IBM-4579645', 3 => 'IBM-1234567',4 => 'IBM-12345678', 5 => 'IBM-24374365');

$key = array_search($item_name, $stack);
if ($key !== false) {
    echo "The key where find was found is:" . $key;
} else{
    echo $item_name . " was NOT FOUND in the array";
};
?> 
```

它返回了 - 找到 find 的键是：0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:12:26.593

您可以尝试比较 $item_name 和 $stack[0]，例如`if ($item_name == $stack[0]) echo "Done";` 您可以先尝试检查是否为 false，例如`if ($key === false) echo "Not"; else echo "Is";` ，也许您可​​以尝试不同的函数来检索正确的数组键。

# html - 带有 .appcache 后备的 iframe src

> ID：11643628
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:16.917
> 
> 标签：html, iframe, manifest

html代码：

```
<iframe src='online.html'></iframe>
<script src='online.js'></script> 
```

清单文件：

```
CACHE MANIFEST
#VER
CACHE:

FALLBACK:
online.html offline.html
online.js offline.js

NETWORK:
* 
```

问题：当我的浏览器离线时，它可以自动加载offline.js替换online.js，但总是加载online.html而不是offline.html。

我该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T18:11:01.177

在你的 js 文件中写入 iframe。

在线.js

```
document.write('<iframe src="online.html"></iframe>'); 
```

离线.js

```
document.write('<iframe src="offline.html"></iframe>'); 
```

# ruby - 如何在没有 sudo 的情况下安装 gems

> ID：11643629
> 
> 赞同：35
> 
> 时间：2012-07-25T06:05:27.927
> 
> 标签：ruby, gem

在我所有的 gem 安装中，我必须执行 sudo 吗？所以

> 须藤宝石安装导轨

会工作，而只有

> 宝石安装导轨

不管用。我该如何补救？

我已经安装了 rvm -

```
murtaza@murtaza-dev:~$ which rvm
/home/murtaza/.rvm/bin/rvm

murtaza@murtaza-dev:~$ which gem
/home/murtaza/.rvm/rubies/ruby-1.9.3-p194/bin/gem 
```

但是，当我对 gem 进行任何操作时，我也会收到此警告-

```
murtaza@murtaza-dev:~$ gem
/home/murtaza/.rvm/rubies/ruby-1.9.3-p194/bin/gem:4: warning: Insecure world writable dir /opt in PATH, mode 040777 
```

**编辑**

`curl -L get.rvm.io | bash -s stable --auto`我已经使用（不带 sudo）重新安装了 rvm 。

但是，当我尝试安装 gem 时，它仍然给我以下错误 -

```
murtaza@murtaza-dev:~$ gem install rails
/home/murtaza/.rvm/rubies/ruby-1.9.3-p194/bin/gem:4: warning: Insecure world writable dir /opt in PATH, mode 040777
ERROR:  While executing gem ... (Errno::EACCES)
    Permission denied - /home/murtaza/.gem/specs 
```

**编辑**

我确实对整个事情做了 chown 但仍然收到错误 -

```
murtaza@murtaza-dev:~$ sudo chown murtaza.murtaza -R ~/.rvm/*

 murtaza@murtaza-dev:~$ gem install rails
    /home/murtaza/.rvm/rubies/ruby-1.9.3-p194/bin/gem:4: warning: Insecure world writable dir /opt in PATH, mode 040777
    ERROR:  While executing gem ... (Errno::EACCES)
        Permission denied - /home/murtaza/.gem/specs 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T06:53:20.613

使用`chown`整体`.rvm`和`.gem`目录返回给您的用户。您可能以前使用`sudo`过，它搞砸了权限。

```
sudo chown -R username:group ~/.rvm
sudo chown -R username:group ~/.gem 
```

当然，将用户名更改为*您的用户名*并将组更改为*您的组*

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-25T06:15:17.450

当你在没有 sudo 的情况下安装它们时，Ruby 不知道它们被安装到哪里。我不记得默认情况下将它们安装在哪里，可能是 ~/.gems 之类的地方。无论如何，您可以通过设置 GEM_HOME 环境变量来告诉 Ruby 安装它们的位置。

```
$ # assuming your gems are stored in ~/.gems
$ GEM_HOME="$HOME/.gems" ruby my_program.rb 
```

如果可行，那么您可以将它放在 ~/.bashrc 中（有许多可能的文件可以放入，具体取决于您的系统）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-07-27T10:10:29.607

对于 Mac 用户，这对我有用...

1.  将 GEM_HOME 添加到您的`.bash_profile`

例如，`nano ~/.bash_profile`并将`export GEM_HOME=$HOME/.gem`路径添加到您自己的主文件夹的位置

2.  将 gem 可执行文件添加到系统路径

同样在`.bash_profile`，添加`export PATH="$GEM_HOME/bin:$PATH"`

来源： http: [//michaelehead.com/2016/02/06/installing-gems-without-sudo.html](http://michaelehead.com/2016/02/06/installing-gems-without-sudo.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-25T06:07:24.817

您应该安装[Ruby 版本管理器](https://rvm.io/)。它将已安装的 rubies 和 gems 存储在您的主目录中，因此现在您不必使用`sudo`来安装 gems。除此之外，它还有很多功能。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-21T02:58:43.313

苹果系统

```
brew install ruby 
```

为 zsh编辑 `~/.zshrc` （对于 Bash 可能类似于*`~/.bash_aliases`*）

```
# By default, binaries installed by gem will be placed into:
# /usr/local/lib/ruby/gems/2.6.0/bin
export GEM_HOME="/usr/local/lib/ruby/gems/"
export PATH="$GEM_HOME/bin:$PATH" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-09T16:28:29.957

我通过以下方式解决了我的问题：（我有 ubuntu 17.10）

打开终端并输入：

```
echo "gem: --user-install" >> ~/.gemrc 
```

然后在 .bashrc 文件中添加 ruby​​ 的 bin 路径

```
export PATH="$PATH:$HOME/.gem/ruby/x.x.x/bin" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-16T12:43:56.063

试试`gem install package --install-dir $HOME/.gem`。

不要忘记设置之前提到的路径`export PATH="$PATH:$HOME/.gem/bin"`。

您必须考虑更改 PATH 顺序，例如`export PATH="$HOME/.gem/bin:$PATH"`. 例如，如果您尝试将 rails 安装到 OS X 系统上的本地目录中，但已经内置了一个可执行文件，则可能会发生这种情况。在这种情况下，如果您不更改路径顺序，您还将收到以下输出：

> Rails 目前没有安装在这个系统上。要获取最新版本，只需键入：
> 
> $ sudo gem 安装导轨
> 
> 然后，您可以重新运行“rails”命令。

并将变量设置`GEM_HOME`为`export GEM_HOME="$HOME/.gems"`

# java - 使用轮询组件刷新时 Primefaces 图表内存泄漏

> ID：11643630
> 
> 赞同：1
> 
> 时间：2012-07-25T06:05:34.363
> 
> 标签：java, ajax, jsf, primefaces

我的页面中有 10 个图表，我`poll`每 1 分钟使用一次组件刷新它们。但是一小时后，我看到 firefox 和 chrome 获得了超过 1 GB 的内存，有时甚至 firefox 崩溃。

这是primefaces图表引起的内存泄漏吗？我该如何解决这个问题？

这是我的示例应用程序的源代码：

在此代码间隔设置为 3 秒，以更快地看到问题！

```
<h:body>

    <h:form id="timerForm">
        <p:poll interval="3" widgetVar="timer" update=":chartPanel" autoStart="true" /> 
    </h:form>
    <p:panelGrid columns="2" id="chartPanel">

        <p:lineChart id="chart1" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />
        <p:lineChart id="chart2" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />
        <p:lineChart id="chart3" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />
        <p:lineChart id="chart4" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />
        <p:lineChart id="chart5" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />
        <p:lineChart id="chart6" value="#{chartController.model}"
                             legendPosition="nw" style="height:200px;width: 500px;" minY="0" />

    </p:panelGrid>

</h:body> 
```

这是豆子：

```
@Named
@RequestScoped
public class ChartController {

static final Logger log = Logger.getLogger(ChartController.class.getName());

@PostConstruct
private void init() {
}

private ChartSeries getData(String label) {
    ChartSeries data = new ChartSeries();
    data.setLabel(label);
    for (int i = 1; i <= 20; i++) {
        data.set(i, Math.random() * 1000);
    }
    if (data.getData().isEmpty()) {
        data.set(0, 0);
    }
    log.log(Level.INFO, "Chart loaded for :{0}", label);
    return data;
}

public CartesianChartModel getModel() {
    CartesianChartModel chartModel = new CartesianChartModel();
    chartModel.addSeries(getData("Data 1"));
    chartModel.addSeries(getData("Data 2"));
    chartModel.addSeries(getData("Data 3"));
    return chartModel;
}
} 
```

当我关闭浏览器时，它会完全释放内存。这里是要下载的源代码：我已经上传了源代码，它是一个maven项目，只需下载它并在你的IDE中打开它并部署在你的应用服务器中。

[https://dl.dropbox.com/s/secmuo7vjasdaue/chart-bug.zip?dl=1](https://dl.dropbox.com/s/secmuo7vjasdaue/chart-bug.zip?dl=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:27:40.453

组件在刷新前不会销毁资源。我发现这是 3.3.1 版本的 bug，在 3.4-SNAPSHOT 中修复

这是参考：

[http://forum.primefaces.org/viewtopic.php?f=3&t=18286&hilit=chart+memory+leak](http://forum.primefaces.org/viewtopic.php?f=3&t=18286&hilit=chart+memory+leak)

[http://code.google.com/p/primefaces/issues/detail?id=4183](http://code.google.com/p/primefaces/issues/detail?id=4183)

# wcf - 通过客户端使用安全的 WCF 服务

> ID：11643632
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:37.493
> 
> 标签：wcf, security, certificate

我在客户端应用程序中使用安全的 WCF 服务。我的问题是当我直接在浏览器上点击 https: url 时，它要求选择一个证书并且它运行良好但通过客户端应用程序我收到错误： `Could not establish secure channel for SSL/TLS with authority 'server name'` 任何人都可以解释这种行为谢谢

# eclipse - 从 SWT 浏览器读取服务器响应

> ID：11643633
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:41.167
> 
> 标签：eclipse, swt

如何从 SWT 浏览器获取服务器响应。我正在寻找类似的东西`HttpURLConnection.getInputStream()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:54:13.417

试试看`browser.getText()`，见[http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html#getText](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html#getText) ()

# domain-driven-design - DDD中的软删除

> ID：11643636
> 
> 赞同：0
> 
> 时间：2012-07-25T06:05:52.497
> 
> 标签：domain-driven-design, ddd-repositories

我有一个场景，当用户请求删除时，可能会根据某些逻辑将给定实体标记为软删除或硬删除。

从 DDD 范式处理这个问题，我看到了一些问题：- DDD 建议将 Repository 对象用于所有与持久性相关的东西，其中域层只定义了这样的 repo 接口（包含典型的方法，如存储、删除、查找）和包含实际执行。鉴于此，对于我的问题，决定是否进行软删除的逻辑属于域层，如何在域层中包含逻辑，以保证任何其他删除请求的安全性在实际调用 RepoImpl 上的删除点之前，层通过此逻辑进行引导，该删除点实际上从底层存储中删除了实体 ??。

  即使我有一个具有类似方法的域服务`void removeEntity(Entity ent)`，我必须在我的 repo 接口上调用一个公共方法这一事实`void remove(Entity ent)`违背了目的，因为我不能强制执行`removeEntity`服务层的调用，而不是`remove`在 repo 上调用，并且 RepoImpl 需要有一个 remove 方法来实现删除一个实体。

*建议的解决方案*
==============
  我有这个想法看起来很做作，假设 Repo 接口有一个抽象实现，它提供了一个 final `public void remove(Entity ent)`，抽象实现可以做这个逻辑来确定是否它是软删除还是硬删除。如果它是软删除，它实际上是对设置了适当标志的实体的更新，所以它调用，`this.store(ent)`否则它将实体包装在一个`DeleteEvent`类中

```
 public class DeleteEvent<T>{
   //parametrized for Entity
  private T ent;
   DeleteEvent(T ent){
     this.entity = ent;   
}

 public T getEntity(){
   return this.entity; 
}
} 
```

请注意非公共的包访问构造函数，该类的对象只能从域层内构造，因此 RepoImpl 上的另一个删除方法是`void removeFromStore(DeleteEvent evt)` RepoImpl 从该密封器/持有者获取实体并实现删除过程。
这虽然看起来可以工作是相当古怪/hacky，有没有更清洁的方法来实现同样的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:15:25.747

您的主要问题是这里缺乏无处不在的语言。软删除和硬删除不是领域术语，而是技术术语。您需要做的第一件事是在技术删除操作的用例中重新考虑您的语言。删除到底是什么意思？我会说你需要一个取消、撤销、过期、暂停、禁止、阻止、完成等。考虑你将域模型放入的**状态而不是 CRUD 操作。**

那么你的问题的答案是：永远不要硬删除。

更多阅读：[http ://www.udidahan.com/2009/09/01/dont-delete-just-dont/](http://www.udidahan.com/2009/09/01/dont-delete-just-dont/)

# doctrine-orm - Doctrine ORM 错误：请求了未知的列类型 varchar

> ID：11643639
> 
> 赞同：0
> 
> 时间：2012-07-25T06:06:14.573
> 
> 标签：doctrine-orm

好的，所以我刚刚分配了一个使用 Doctrine 和 Zend 的新项目。这是我第一次使用 Doctrine，我遇到了一个错误，谷歌没有给出任何答案。我在表中添加了一个新字段（VARCHAR 17），在该表的实体中添加了 getter/setter 函数，然后运行 ​​orm:generate-proxies。

一切都很好，除了现在我在尝试保存任何内容时遇到此错误：请求了未知的列类型 varchar。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T06:45:14.350

问题是，学说注释不知道底层数据库。因此，您需要做的就是将您的字段标记为长度为 17 的类型字符串：

```
/**
* mySuperField
* \ORM\Column(name="mySuperField", type="string", length=17)
*/
$mySuperField; 
```

有关如何映射实体属性的参考，另请参阅[Doctrine Basic Mapping](http://doctrine-orm.readthedocs.org/en/latest/reference/basic-mapping.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T13:05:11.663

首先了解学说命令
orm:generate-entities 在实体文件中编写 getter/setter 函数，
orm:schema-tool:update 更新数据库表，
您不应该手动执行此工作，只需编写 yaml/xml/php schema并运行它们。

如果你使用[Bisna 库](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2)来集成学说 2 和 zf，那么 application.ini 文件中必须有“adapterClass”和“mappingDirs[]”选项来描述架构文件的位置。

在实体和模式文件中使用类型“字符串”而不是 varchar。我更喜欢 yaml 模式：

```
username:
  type: string
  length: 17 
```

# apache - 如果不存在图像，则显示默认图像

> ID：11643640
> 
> 赞同：2
> 
> 时间：2012-07-25T06:06:16.380
> 
> 标签：apache, mod-rewrite, centos

我在 Centos 5 上运行 Apache，我想实现重写规则。当用户尝试访问文件夹`/var/site.com/html/image/products/`中的图像时，规则应检查图像是否存在，如果不存在，我想`/var/site.com/html/image/defaultimage.jpg`显示

我试图把它放在 .htaccess 中， `/var/site.com/html/image/products/`但它没有用

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_URI} \.(gif|jpg|jpeg|png)$ 
RewriteRule .* /var/site.com/html/image/defaultimage.jpg [L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T10:38:28.023

a 的目标（第二个参数）`RewriteRule`可以是文件路径或 URI 路径，apache 会尝试猜测您的意思。出于某种原因，如果它以 a 开头`/`，它倾向于认为它是一个 URI 路径。尝试从目标中删除文档根目录：

```
RewriteRule .* /image/defaultimage.jpg [L] 
```

# c# - 获取当前项目文件夹的相对路径

> ID：11643642
> 
> 赞同：-1
> 
> 时间：2012-07-25T06:06:43.543
> 
> 标签：c#, asp.net-mvc

我正在尝试获取相对路径，例如：`C:\somedirectory\someproject\someproject.Business\somefolder\`

我试过了`Path.GetFullPath(Application.StartupPath)`。但它返回 DevServer 的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:57:51.433

我假设您已将解决方案分隔在不同的项目中，并且您至少拥有：

*   业务层
*   Web应用程序

从上面的信息来看，您似乎正在尝试访问位于业务层中的文件夹。但是您可能正在执行来自 Web 服务器应用程序的代码，这就是为什么之前的答案都不起作用的原因。

如果它是您尝试访问的某个文件，我建议您在 Visual Studio 中更改文件/文件夹构建操作。这将自动将文件复制到应用程序运行的正确上下文中。 ![在此处输入图像描述](../Images/270c66570bccc56b891a344f067b9e6f.png)

> BuildAction 属性指示在执行构建时 Visual Studio 对文件执行的操作。BuildAction 可以具有以下几个值之一：
> 
> **无**- 文件不包含在项目输出组中，并且不在构建过程中编译。一个示例是包含文档的文本文件，例如自述文件。
> 
> **编译**- 文件被编译到构建输出中。此设置用于代码文件。
> 
> **内容**- 文件未编译，但包含在内容输出组中。例如，此设置是 .htm 或其他类型的 Web 文件的默认值。
> 
> **嵌入式资源**- 此文件作为 DLL 或可执行文件嵌入到主项目构建输出中。它通常用于资源文件。

您可以阅读有关 msdn 上构建操作的更多信息：http: [//msdn.microsoft.com/en-us/library/0c6xyb66 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0c6xyb66(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:08:05.137

怎么样

```
Server.Mappath(string path); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:30:05.657

请使用[Directory.GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)方法

该方法返回一个字符串，其中包含当前工作目录的路径，并且不以反斜杠 () 结尾。

# android - 如何创建android UI，使其不随屏幕分辨率而改变？

> ID：11643643
> 
> 赞同：2
> 
> 时间：2012-07-25T06:06:48.070
> 
> 标签：android, android-layout, android-emulator

我有一个带有背景图像的 android 应用程序，我会在模拟器上部署它并查看它的行为。

最初我使用带有皮肤 WVGA800 的模拟器。在 UI 中，布局中声明的所有 textView 都已正确放置。但是当我将模拟器皮肤更改为 500x600 时，在 UI 中很少有 textView 放错位置。

所以有人可以建议如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:50:36.173

我的选择： 1）对于简单的 ui，我认为你可以使用许多带有视图的 attars，如下；android:layout_centerHrizontal android:layout_centerVertical
android:layout_centerInparent
android:layout_alignParentBottom android:layout_alignParentLeft
android:layout_alignParentRight
android:layout_alignParentTop
android:layout_alignWithParentIfMissing

android:layout_below
android:layout_above
android:layout_toLeftOf
android:layout_toRightOf
android:layout_alignTop
android:layout_alignLeft
android:layout_alignBottom android:layout_alignRight

android:layout_marginBottom
android:layout_marginLeft
android:layout_marginRight
android:layout_marginTop

这有助于使用 layout 或 view attars 来设置它的位置。2）你可以使用一些布局xml来适应它。就像那样

```
if(screen width < 480)
setcontentview(r.layout.for480lay)
else if(screen width > 480&&screen width <640)
setcontentview(r.layout.for640lay)
..
.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:35:53.430

关于 Android 的好处，但困难的是你不知道你的代码运行的设备的大小或纵横比是什么。如果您想要全屏图像，您需要愿意对它们进行缩放（按比例或不成比例）或裁剪。

如果您尝试将文本放置在背景图像上的特定位置，那么您将遇到麻烦。我以前试过这个，很快就改变了主意。

这是我的建议：阅读屏幕支持[文档](http://developer.android.com/guide/practices/screens_support.html)（如@abhilasha 所说）并使用可很好缩放的自适应 UI 元素（如 9-patch 图像、相对布局等）。

然后，如果您想在图像中放置文本，而不是尝试将 a 放置在`TextView`上`ImageView`，请将您想要的图像设置为`TextView`. 然后你知道文本相对于图像的位置。

# javascript - 单击跨度内的隐藏文件输入会导致 RangeError

> ID：11643651
> 
> 赞同：0
> 
> 时间：2012-07-25T06:07:26.900
> 
> 标签：javascript, jquery, jquery-selectors

我有 HTML：

```
<span class="btn btn-success js-uploader">
    <i class="icon-upload icon-white"></i> Upload
    <input type="file" multiple>
</span> 
```

和 jQuery/JavaScript：

```
$('.js-uploader').click(function(){
    $(this).find('input[type="file"]').click();
}); 
```

基本上，当单击具有类的跨度时，`.js-upload`也应单击文件输入。但是当我使用`.find()`or时`.js-uploader > input[type="file"]`，它会导致 RangeError。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T06:13:55.000

控制台消息：`too much recursion`

当您单击输入时，它也会冒泡跨越，但跨度单击处理程序也会导致单击输入

尝试检查 event.target 是否输入

```
$('.js-uploader').click(function(e){
     if ($(e.target).is('input[type="file"]')) return;
     $(this).find('input[type="file"]').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:16:02.590

重递归..在这里检查小提琴..你会知道[http://jsfiddle.net/umBWV/1/](http://jsfiddle.net/umBWV/1/)

# python - 在 python 对象中使用 self 参数

> ID：11643653
> 
> 赞同：1
> 
> 时间：2012-07-25T06:07:29.377
> 
> 标签：python, class

我有一个关于在 python 中定义函数和自参数的问题。

有以下代码。

```
class Dictionaries(object):
    __CSVDescription = ["ID", "States", "FilterTime", "Reaction", "DTC", "ActiveDischarge"]

    def __makeDict(Lst):
        return dict(zip(Lst, range(len(Lst))))

    def getDict(self):
        return self.__makeDict(self.__CSVDescription)

    CSVDescription = __makeDict(__CSVDescription)

x = Dictionaries()
print x.CSVDescription
print x.getDict() 
```

`x.CSVDescription`工作正常。但`print x.getDict()`返回错误。

```
TypeError: __makeDict() takes exactly 1 argument (2 given) 
```

我可以将`self`-parameter 添加到`__makeDict()`方法中，但随后`print x.CSVDescription`将不起作用。

如何`self`正确使用 -parameter？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T06:11:12.823

在 python 中，`self`参数隐式传递给实例方法，除非方法用`@staticmethod`.

在这种情况下，`__makeDict`不需要对对象本身的引用，因此可以将其设为静态方法，因此您可以省略`self`：

```
@staticmethod
def __makeDict(Lst): # ...

def getDict(self):
    return self.__makeDict(self.__CSVDescription) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:00:57.517

使用的解决方案`@staticmethod`在这里不起作用，因为从类主体本身调用方法不会调用描述符协议（如果它们是描述符，这对于普通方法来说也是一个问题 - 但直到类之后才会出现这种情况定义已编译）。这里有四个主要选项 - 但其中大多数可以被视为某种程度的代码混淆，并且确实需要注释来回答“为什么不只使用`staticmethod`？”的问题。

第一个是，正如@Marcus 建议的那样，总是从类中调用方法，而不是从实例中调用。也就是说，每次你会做`self.__makeDict`，做`self.__class__.__makeDict`代替。这看起来很奇怪，因为这是一件很奇怪的事情——在 Python 中，您几乎不需要调用方法 as ，而且只有在您这样做时（在可用`Class.method`之前编写的代码中），使用将是错误的。`super``self.__class__`

以类似的方式，但反过来，您可以将其设为 a`staticmethod`并在类主体中手动调用描述符协议 - do: `__makeDict.__get__(None, Dictionaries)(__lst)`。

或者，您可以通过使用可选参数来检测自己调用它的上下文：

```
def __makeDict(self, Lst=None):
    if Lst is None:
       Lst = self
    ... 
```

但是，到目前为止，最好的方法是意识到你正在使用 Python 而不是 Java——把它放在课堂之外。

```
def _makeDict(Lst):
    ...

class Dictionaries(object):
   def getDict(self):
      return _makeDict(self.__CSVDescription)

   CSVDescription = _makeDict(__CSVDescription) 
```

# nginx - 在 Nginx 中重写规则以阻止特定 URL

> ID：11643654
> 
> 赞同：1
> 
> 时间：2012-07-25T06:07:30.857
> 
> 标签：nginx, rewrite, reverse-proxy

我想阻止特定的 URL 被访问并返回 444 错误。

例子：

```
if ( $request_uri ~ https://subdomain.domain.com/abc/xyzdirector/login.do ) {
return    444;
} 
```

现在这工作正常，问题是如果我在浏览器中键入以下 URL 并更改子目录中的任何大小写，它都不起作用：

例子：

```
https://subdomain.domain.com/ABC/xyzdirector/login.d
https://subdomain.domain.com/abc/XYZdirector/login.d
https://subdomain.domain.com/abc/xyzdirecTOR/login.d
https://subdomain.domain.com/Abc/XyzDirector/login.d 
```

当我这样做时，URL 被转发和服务。

我该如何阻止这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:22:32.107

您想要一个不区分大小写的[正则表达式位置](http://nginx.org/r/location)：

```
location ~* ^/abc/xyzdirector/login\.do$ {
  return 444;
} 
```

如果您的配置中有任何其他正则表达式位置，请确保将其放在可能与此 url 匹配的任何其他位置之上。

# .htaccess - Htaccess 301 重定向 index.html 也重定向插件域问题

> ID：11643658
> 
> 赞同：0
> 
> 时间：2012-07-25T06:07:45.597
> 
> 标签：.htaccess, redirect

我有这个问题，我不知道如何解决：我正在尝试将 html 网站重定向到 wordpress 网站。我试图重定向的域作为主域，其中显然有一个 HTML 站点，其中 index.html 作为主页。现在 - 同一主机上还有 2 个站点使用插件域并位于 2 个目录中： **example.com**和**example2.com**（它们都是 wordpress 站点）

我创建了一个非常简单的 htaccess 文件，并将许多行将主域的 html 页面重定向到另一个域，如下所示：

```
Redirect 301 /somepage.html http://www.newdomain.com
Redirect 301 /anotherpage.html http://www.newdomain.com 
```

等等等等。此时所有的 .html 页面都可以正常重定向。

现在-问题是：我还想将主页（index.html）指向另一个域（ww.newdomain.com），所以我也放了这一行（与其他html页面一样）：

```
Redirect 301 /index.html http://www.newdomain.com 
```

这对我来说似乎很好，但发生的事情是它将 index.html 重定向到新域，但也重定向了位于我之前提到的不同目录中的 2 个 wordpress 站点......

我不知道为什么会发生这种情况，但我可以假设重定向浏览器遇到的第一页重定向主根上的所有内容，包括插件域。

有没有人有解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:18:15.613

尝试更改（我认为您有错字，我猜它与第一部分中的第二个重定向不同）：

```
Redirect 301 / http://www.newdomain.com 
```

至：

```
RedirectMatch 301 ^/$ http://www.newdomain.com 
```

编辑：由于似乎有多个域具有相同的文档根，请尝试：

```
RewriteEngine On

# for redirecting "/"
RewriteCond %{HTTP_HOST} ^(www\.)?olddomain.com
RewirteRule ^$ http://www.newdomain.com/ [R=301,L]

# for redirecting "/somepage.html"
RewriteCond %{HTTP_HOST} ^(www\.)?olddomain2.com
RewriteRule ^somapage.html$ http://www.newdomain2.com/ [R=301,L] 
```

等等

# c# - 如何使用 c# 代码将转换 mst 应用于 msi？

> ID：11643661
> 
> 赞同：0
> 
> 时间：2012-07-25T06:07:52.153
> 
> 标签：c#, .net, windows-installer, transform

我正在尝试在 C# .Net 中开发一个工具（使用 Windows 窗体）。我已经生成了一个 MSI 文件和一个 MST（转换文件）。我必须首先读取 msi 文件（使用表单菜单菜单项从用户获取输入），然后读取 mst 文件（与 msi 作为输入的方式相同）。接下来，通过复制输入的 msi 创建一个临时 msi（可能在临时位置）并将转换应用于该临时 msi。然后，我可以根据我的要求查询 msi 表（与 mst 合并）。我正在使用 Visual Studio 2010 专业版。这是我使用 Windows 安装程序参考库编写的一段代码。

```
 using System;
      using System.ComponentModel;
      using System.Windows.Forms;
      using WindowsInstaller;
      using System.Xml;
      using System.IO;

        //// Create an Installer instance
        Type classType = Type.GetTypeFromProgID("WindowsInstaller.Installer");
        Object installerObj = Activator.CreateInstance(classType);
        Installer installer = installerObj as Installer;
        Database database = Installer.OpenDatabase(File_MSI,MsiOpenDatabaseMode.
         msiOpenDatabaseModeTransact);
            database.ApplyTransform (File_MST, MsiTransformError.msiTransformErrorViewTransform);
            WindowsInstaller.View viewmst = null;
            string sqlquerymst = string.Format("Select * FROM _TransformView");
            viewmst = database.OpenView(sqlquerymst);
            viewmst.Execute(null);
            database.Commit();
            viewmst.Close();
            string sql = String.Format("Select Property,Value FROM Property");
            WindowsInstaller.View view = database.OpenView(sql);
            view.Execute(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:52:50.800

虽然尚不清楚您面临什么问题，但我有一些一般性建议给您：

*   即使您没有使用[WiX 工具集](http://wixtoolset.org/)来构建您的 MSI 程序包，您也可以利用其 .NET API 来处理称为 DTF 的 MSI 程序包。您可以在与 WiX 工具集一起安装的 DTF.chm 文件中找到更多信息。例如，看一下`Database`类及其`ApplyTransform()`方法
*   你描述的场景听起来有点棘手，我怀疑它可以简化。如果您将转换应用于 MSI 包以读取该转换带来的内容，则在构建此转换时在较早的步骤中获取该数据可能会容易得多，并避免查询 MSI 数据库，这不是最简单的事情。当然，这是指你自己制作转换的情况，它不是第三方的东西

希望这可以以任何方式帮助您。

# c++ - Python ImportError - 未定义符号 - 用于自定义 C++ 模块

> ID：11643666
> 
> 赞同：26
> 
> 时间：2012-07-25T06:08:09.330
> 
> 标签：c++, python, opencv, shared-libraries

我一直在 Ubuntu 11.04 上使用 OpenCV 2.3 到 2.4.2 在 C++ 中开发 Python 模块。OpenCV 是从源代码构建的。我没有使用 Ubuntu 存储库中的 OpenCV 版本。

我的 Python 模块编译没有问题，并且在 Python 中正确加载。但是，当我在 Ubuntu 11.10 或 12.04 上编译此模块时，尝试在 Python 中加载它时会收到带有消息“未定义符号”的 ImportError。

这就是我编译模块的方式：

```
g++ -fPIC -shared `pkg-config --cflags --libs python` `pkg-config --cflags --libs opencv` -I/usr/local/include/opencv2/legacy -o mymodule.so mymodule.cpp 
```

这是“pkg-config --cflags --libs opencv”的输出

```
-I/usr/local/include/opencv -I/usr/local/include  /usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so 
```

我得到的错误是：

```
ImportError: /path/to/service/mymodule.so: undefined symbol: _ZN5CvSVMD1Ev 
```

我的理解是“未定义的符号”通常意味着在任何链接库中都找不到给定的符号。但我知道这个符号存在于 libopencv_ml.so 中，因为当我运行它时：

```
$ nm -g  /usr/local/lib/libopencv_ml.so | grep _ZN5CvSVMD1Ev 
```

我得到：

```
000000000002fd40 T _ZN5CvSVMD1Ev 
```

/usr/local/lib 似乎在动态链接器缓存中。

```
$ cat /etc/ld.so.conf.d/libc.conf 
# libc default configuration
/usr/local/lib 
```

so 文件也在缓存中。

```
$ ldconfig -p | grep opencv | grep ml
        libopencv_ml.so.2.4 (libc6,x86-64) => /usr/local/lib/libopencv_ml.so.2.4
        libopencv_ml.so (libc6,x86-64) => /usr/local/lib/libopencv_ml.so 
```

那么你能给我任何线索我可能做错了什么吗？在运行 Python 时加载共享库的方式在 Ubuntu 11.04 和 11.10 之间是否发生了变化？或者这是 OpenCV 的问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T06:07:16.293

解决方案是在 g++ 命令行上将生成的模块名称放在它所依赖的其他模块之前。

```
g++ -fPIC -shared -o mymodule.so mymodule.cpp `pkg-config --cflags --libs python` `pkg-config --cflags --libs opencv` -I/usr/local/include/opencv2/legacy 
```

gcc 手册页提到了该`-l`选项，

> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，`foo.o -lz bar.o`在文件 foo.o 之后但 bar.o 之前搜索库 z。如果 bar.o 引用 z 中的函数，则可能不会加载这些函数。

由于 mymodule.so 的名称是在它应该链接到的库之前提供的，因此它们实际上都没有链接到生成的 .so 文件。

感谢@JFSebastian 指出如何`-l`工作。

# authorization - 美味派后认证问题

> ID：11643671
> 
> 赞同：4
> 
> 时间：2012-07-25T06:08:30.393
> 
> 标签：authorization, tastypie

我在使用美味派并将数据发布到它时遇到问题。我只能检索 401 错误代码。

为了澄清起见，我能够成功地从 sweetpie api 中检索数据。

附件是代码片段，也许有人可以帮我解决这个问题。在开始之前，有一点背景知识：我正在使用自定义授权类。

```
 class CustomAuthorization(Authorization):
        def is_authorized(self, request, object=None):
            if request.user.username == 'custom_user':
                return True
            return False 
```

这是实际的资源：

```
 class CustomObjectResource(ModelResource):
        class Meta:
            queryset = CustomObject.objects.all()
            authentication = ApiKeyAuthentication()
            authorization = CustomAuthorization()
            list_allowed_methods = ['get', 'post', ]
            detail_allowed_methods = ['get', 'post', 'put']
            include_resource_uri = False
            resource_name = 'customobject'
            always_return_data = True

        def obj_create(self, bundle, request=None, **kwargs):
            try:
                print "request"
            except:
                raise BadRequest('I couldnt save your information.')
            return True 
```

我知道 obj_create 方法是伪造的，但它仍然应该被调用并做一些事情，或者这已经是问题了吗？

以下 curl 命令用于将数据发布到tastepie API。

```
 curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"body": "This will prbbly be my lst post.", "pub_date": "2011-05-22T00:46:38", "slug": "another-post", "title": "Another Post"}' http://local.com:8000/api/v1/customobject/?format=json&username=custom_user&api_key=123456789012345 
```

api_key 是正确的，但在这种情况下是假的！

如前所述，get 方法有效，但 post 不起作用。

任何人都知道如何解决这个问题或有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:09:37.513

我会尝试一些事情来调试这个问题。

1）尝试添加：`allowed_methods = ['get', 'post', 'put']`

2）在 custom_authorization 中添加打印语句以检查是否由于 request.user.username 不同而导致问题。

3）在APIKeyAuthentication的源中也做（2）。

这应该足以让您调试问题。完成后请记住**删除**打印语句！

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:38:11.847

这可能是由于一个已知[问题](https://github.com/toastdriven/django-tastypie/issues/508)。目前在背景上，美味派将 POST 转换为 PUT，正如 Nikunj 指出的那样，因为在 list_allowed_methods 中你没有 PUT，所以 POST 也被阻止了……但不确定是否存在，因为在这种情况下你应该得到不允许的方法。我建议在“is_authorized”方法中进行调试并检查那里发生了什么。

# javascript - 在 javascript 中，哪个操作需要更多的浏览器工作？

> ID：11643676
> 
> 赞同：0
> 
> 时间：2012-07-25T06:09:05.153
> 
> 标签：javascript

在 javascript 中，哪个操作需要更多的浏览器工作？

```
var variable1;

// Operation 1
variable1 = 8;

// Operation 2
if (variable1 != 8) {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:33:09.810

根据我刚刚进行的[这个 jsPerf 测试](http://jsperf.com/assignment-versus-comparison)，分配比比较快得多 - 有时会快一个数量级，具体取决于您的浏览器。

我在 Firefox 中观察到一个奇怪的错误，其中分配的每分钟操作结果有时报告为“无限”。如果发生这种情况，只需再次运行测试。

# gwt - 检查应用程序是否以托管模式/部署模式运行（本地或远程机器）

> ID：11643677
> 
> 赞同：1
> 
> 时间：2012-07-25T06:09:10.213
> 
> 标签：gwt, deployment, gwt-hosted-mode

我想检查我的 gwt 应用程序是在托管模式还是部署模式下运行。如果已部署，则检查它是部署在本地机器还是远程机器上。有没有办法做到这一点。因为我想更改网址取决于模式。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:15:59.390

我假设部署是指生产模式。
要检查您的应用程序是否在生产模式下运行，请调用：

```
com.google.gwt.core.client.GWT.isProdMode() 
```

在浏览器中运行时返回 true

要检查您的应用程序是在托管模式还是生产模式下运行，请调用：

```
com.google.gwt.core.client.GWT.isClient() 
```

并使用

```
com.google.gwt.core.client.GWT.getHostPageBaseURL() 
```

获取托管页面的 url 前缀。

# python - 如何从 Django 中的应用程序等配置中注册 Flask 蓝图？

> ID：11643680
> 
> 赞同：4
> 
> 时间：2012-07-25T06:10:02.777
> 
> 标签：python, django-apps, flask

如何从我的配置中注册 Flask 蓝图，例如 Django 中的应用程序？

我想在配置文件中定义蓝图，会自动注册

```
#config.py
BLUEPRINTS = (
'news',
'files',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:54:12.027

实际上，我一直在一个暂定名为[Hip Pocket](https://github.com/svieira/HipPocket)的项目中勾勒出类似的东西。它与@HighCat 给你的答案基本相同，除了它使用 Python 的打包系统而不是`config.py`文件（尽管它可以扩展为从配置文件自动加载 -[问题](https://github.com/svieira/HipPocket/issues)和[拉取请求](https://github.com/svieira/HipPocket/pulls)是最受欢迎的。）

所以在 Hip Pocket 你会这样做（看看[`hip_pocket.tasks`](https://github.com/svieira/HipPocket/blob/master/hip_pocket/tasks.py)它是如何工作的）：

```
from flask import Flask
from hip_pocket.tasks import autoload

app = Flask(__name__)
autoload(app) 
```

`autoload`遍历一个包（默认名为“apps”，尽管您可以通过传入关键字 arg 来更改它`apps_package`）寻找要`flask.Blueprint`在应用程序上注册的对象（默认情况下，它会查找在它找到的每个子包中命名`routes`的模块中命名的符号`routes`但这些默认值也可以更改。）您的文件夹布局*可能*如下所示：

```
+ you_app
. . . . __init__.py
. . . . app.py
. . . . + apps
        . . . . __init__.py
        . . . . routes.py # contains the declaration `routes = Blueprint(...)`
        . . . . + news
                . . . . __init__.py
                . . . . routes.py     # Ditto
                . . . . some_module.py
        . . . . + files
                . . . . __init__.py
                . . . . routes.py     # Ditto
                . . . . # etc. 
```

或者，如果你想使用基于配置的加载器，你可以这样做：

```
 from flask import Flask
 from werkzeug.utils import import_string

 app = Flask(__name__)
 app.config.from_object("your_app.config")

 for tool_path in app.config["BLUEPRINTS"]:
     tool = import_string(tool_path)
     app.register_blueprint(tool) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:08:08.377

Flask 不是 Django，它没有这些特性。如果你真的需要这个，你可以尝试自己实现这个行为：

假设您有中央 Flask 应用程序文件，其中包含：

```
import flask
app = flask.Flask(__name__) 
```

1.  将您的 BLUEPRINTS 变量放入烧瓶的配置（您使用 app.config.from_pyfile(...) 注册的那个），因此可以通过 app.config['BLUEPRINTS'] 访问它
2.  在您的中央应用程序文件中（您在其中执行 app=flask.Flask(__name__)），只需遍历 app.config['BLUEPRINTS']，尝试从它们可以存在的地方导入它们，然后使用 app.register_blueprint 注册它们()。

# batch-file - 将整个文件夹上传到 FTP 的批处理文件

> ID：11643683
> 
> 赞同：2
> 
> 时间：2012-07-25T06:10:43.703
> 
> 标签：batch-file, ftp

我正在尝试将整个文件夹上传到 ftp，但它只上传一个文件，可能是什么问题？

打开*运行*窗口 → `cmd`→`ftp -s:C:\ftpfile.bat`

这是我的批处理代码：

```
open FTP address
USERNAME
PASSWORD
bin
mput C:\user\*
bye 
```

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:52:56.433

您[`prompt`](http://www.nsftools.com/tips/MSFTP.htm#prompt)之前是否尝试过使用`mput`以停用交互模式？

```
open FTP address
USERNAME
PASSWORD
prompt
bin
mput C:\user\*
bye 
```

# php - jQuery $.submit 和文件在 IE 和 FF 中不起作用

> ID：11643684
> 
> 赞同：0
> 
> 时间：2012-07-25T06:10:46.330
> 
> 标签：php, jquery

```
<?php
    if (!empty($_FILES)){
        echo "<pre>";
        echo $_FILES['file']['type'];
        echo "</pre>";
        return;
    }
?>
<script type="text/javascript">
    function autoUpLoad(){
        $("#txtHint").html("<center><img src='include/images/loader.gif' />Reading selected file...</center>");
        $(document).ready(function(){
            $("#file").change(function(){
                $("#myForm").submit(function(data){
                    $("#txtHint").html(data);
                });
            });
        });
    }
</script>
<form id="myForm" method="post" enctype="multipart/form-data">
    <input type="file" name="file" id = "file" onchange='autoUpLoad()'/>
    <input type="submit" value="Send" />
</form>
<div id="txtHint">
    test
</div> 
```

上面的代码不起作用，我不确定这里有什么问题？只有当我删除这些行时它才有效：

```
function(data){
    $("#txtHint").html(data);
} 
```

它只是不允许我将数据返回到`txtHint`. 谁能向我解释如何使它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:13:10.680

您正在绑定提交事件，而不是触发它。

`.submit()`以回调为参数的方法用于绑定提交事件，不带参数则触发提交事件。

您应该执行以下操作：

```
$(document).ready(function () {
    $("#myForm").submit(function (data) {
        $("#txtHint").html(data);
    });
    $("#file").change(function () {
        $("#myForm").submit();
    });
}); 
```

# soa - 妈妈与 SOA？区别？

> ID：11643688
> 
> 赞同：11
> 
> 时间：2012-07-25T06:11:10.227
> 
> 标签：soa, mom

它们有许多共同的特点。但是有什么区别呢？

MOM 允许异步，而 SOA 不允许，这是唯一的区别吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-30T23:56:03.783

SOA，即面向服务的架构，是一种架构，它定义了如何在不同应用程序之间构建对业务信息的访问。简而言之，通常，一个应用程序需要使用应用程序需要的一条信息（可能是订单文件或其他任何东西）来完成某些事情。另一个应用程序可能能够对该条信息进行相应的处理，因此它具有能力。然后第一个应用程序使用提供服务的第二个应用程序的服务（无论底层技术如何，可以是任何东西，例如 JMS、HTTP/SOAP、HTTP/REST、EMail、FTP 等）。为了完成这项工作，必须定义第一个应用程序和服务之间的合同，以清除诸如消息格式（XSD 或类似）、协议（HTTP/SOAP？JMS？）等内容。

另一方面，MOM（面向消息的中间件）只是一系列软件/中间件平台。它们是实际的实现，而不是像 SOA 这样的高级概念。它们可用于实现 SOA 架构、事件驱动架构或其他架构。通常，MOM 使用 MOM 服务器存储和转发消息的异步消息传递来丰富一组应用程序。通常，诸如事务、保证交付、故障转移、松散耦合和负载平衡之类的东西都内置在 MOM 实现中。MOM 的示例是[IBM WebSphere MQ](http://www-01.ibm.com/software/integration/wmq/)、Apache [ActiveMQ](http://activemq.apache.org/)、[RabbitMQ](http://www.rabbitmq.com/)、JBoss [HornetQ](http://www.jboss.org/hornetq)等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T09:50:07.140

面向消息的中间件 (MOM) 是一种技术，而 SOA 是一种架构。尽管很多人在谈论 SOA 时会想到 Web 服务，但您也可以使用 MOM 来实现它（实际上在许多情况下这是更好的选择）

# javascript - 如何通过查询字符串传递和检索 Html 标签

> ID：11643689
> 
> 赞同：2
> 
> 时间：2012-07-25T06:11:11.203
> 
> 标签：javascript, jquery, asp.net, vb.net, query-string

**默认.aspx**

```
<script type="text/javascript">
    $(function() {
$("#add_questions").click(function() {
var question = $("#wmd-output").val();
var option1 = $("#option1").val();
var option2 = $("#option2").val();
var option3 = $("#option3").val();
var option4 = $("#option4").val();
var answer = $("#answer").val();
var paper = $("#txt_subject_id").val();
var dataString = 'question='+ question +'&option1='+option1 +'&option2='+option2 +'&option3='+option3 +'&option4='+option4 +'&answer='+answer+'&paper='+paper;

$("#flash").show();
$("#flash").fadeIn(400).html('<img src="../images/validate.gif" align="absmiddle">');
//alert(dataString)

$.ajax({
type: "GET",
url: "Default2.aspx",
data: dataString,
cache: false,
success: function(html){
$("#display").after(html);
//alert(html)
//document.getElementById('content').value='';
//document.getElementById('content').focus();
$("#flash").hide();
}
});
 return false;
});
});

</script> 
```

让

`dataString="question=p>hello</p>&option1=option1&option2=option2&option3=option3&option4=option4&answer=answer&paper=paper"`

如何使用 jquery 将此查询字符串传递到下一页？我没有从下一页得到响应，这意味着`question=<p>hello</p>`没有获得价值。

**默认2.aspx**

```
Dim question As String
question = Request.QueryString("question")
Response.Write(question) 
```

我也试过`encodeUri`和`encodeURIcomponent`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:23:47.737

你说你试试，`encodeURIcomponent`但我怕你把它应用在全线上。您必须将`encodeURIcomponent`单独应用于每个值以使其工作为：

```
var dataString = 'question='+ encodeURIcomponent(question) +'&option1='+ 
  encodeURIcomponent(option1) +'&option2='+ encodeURIcomponent(option2) +'&option3='+ 
   encodeURIcomponent(option3) +'&option4='+ encodeURIcomponent(option4) +'&answer='+ 
     encodeURIcomponent(answer)+'&paper='+ encodeURIcomponent(paper); 
```

另外，您是否检查过您从 中读取的值`var question = $("#wmd-output").val();`？是`"#wmd-output"`正确的还是您需要添加呈现的客户端 ID？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:29:49.093

首先感谢大家的努力。

这就是我所做的

```
question=encodeURIComponent(question)
var dataString = 'question='+ encodeURIComponent(question) +'&option1='+ option1 +'&option2='+ option2 +'&option3='+ option3 +'&option4='+ option4 +'&answer='+ answer +'&paper='+ paper; 
```

我用过`encodeURIComponent`两次，在服务器端解码时

`quest = Server.UrlDecode(question)`

显示正确的值。

再次感谢您的帮助！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T06:19:11.330

恐怕您无法通过查询字符串传递 HTML。您可以改用 Session。您可以将 HTML 存储在字符串变量中并将其存储在 Session 中。在下一页，您可以从 Session 中检索它。

```
Session.Add("myHTML","<p></p>"); 
```

在下一页加载

```
String html = Session["myHTML"].ToString(); 
```

# java - java中的后台进程监听stdin

> ID：11643693
> 
> 赞同：5
> 
> 时间：2012-07-25T06:11:38.070
> 
> 标签：java, shell, stdin, background-process

我必须制作一个java程序，当用户输入0时它应该退出。用java代码编写没问题。

```
int cmd = read();
System.out.println("got command : " + cmd);
if (cmd == 48) { // ASCII code for 0
System.exit(0); 
```

我想在 linux 中使用 start-stop 脚本运行这个过程。我也可以使用`&`或`nohup`

```
case "$1" in    
  'start')
    if [ -f myfifo ]; then
      rm myfifo
    fi
    mkfifo myfifo
    cat > myfifo &
    echo $! > myfifo-cat-pid
    java -jar myjar.jar >/dev/null 2>&1 0<myfifo &
    echo "Started process: "$!
    ;;

  'stop')
    echo 0 > myfifo
    echo "Stopped process: "
    rm myfifo
    ;;
esac 
```

我的问题是，一旦我运行此过程，它就会读取输入-1。虽然我想从 stdinput 读取当somthing 明确地回显到它时，即调用停止。只是我需要一个程序被shell脚本明确关闭。我已经很努力了。帮我。

编辑 ：

我只想在用户按下 q 或任何此类事件时关闭程序，并且不希望代码中出现无限循环。如果可能的话，任何其他方法（如监听其他事件）也会有所帮助。我的代码不应该轮询事件。我尝试过`Jnotify`在该目录中创建或删除文件时监视目录并引发事件。但不幸的是，他们不支持 SunOS。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:38:22.670

好吧，事实上，这些`fifo`文件的行为似乎并不像您想象的那样。

该`read()`命令未阻塞管道。您应该循环直到获得数据：

```
 try {
        bis = new BufferedInputStream(System.in);
        while (true) {
            byte[] buffer = new byte[4096];
            if (bis.available() > 0) {
                bis.read(buffer, 0, bis.available());
                // do some clever thing
            } else {
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    } catch (IOException e) {
        // it failed...
    } 
```

这将尝试读取，如果没有，则等待 50 毫秒。

M。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:36:35.710

由于管道中还没有数据，因此会`read()`看到流的结尾，因此它会返回`-1`. 在从流中读取之前调用`available()`以确保其中有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:54:03.090

如果您`set -m`在 shell 脚本的顶部使用（因此启用强制作业控制），您应该会看到一致的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-22T15:21:27.603

当您在脚本中执行命令时，该命令的标准输入会从`/dev/null`.

```
# test by executing a script with ...
- cat > myfifo & lsof -p $!
+ cat 0<&0 > myfifo & lsof -p $! 
```

# javascript - 在 IE8 中恢复被覆盖的 javascript 方法

> ID：11643695
> 
> 赞同：1
> 
> 时间：2012-07-25T06:11:42.247
> 
> 标签：javascript, debugging, methods, overriding, prototype

我覆盖了`Element`原型上的一些方法，所以我可以像这样添加一个自定义钩子：

```
Element.prototype._method = Element.prototype.method;
Element.prototype.method = function(){
  this._method.apply(this, arguments);
  // custom callback
} 
```

在某些时候，我想恢复原来的方法，所以我这样做：

```
Element.prototype.method = Element.prototype._method; 
```

但是，当在节点上调用元素时，在 IE8 中`method`似乎会抛出错误。`Invalid procedure call or argument`我是否错误地恢复了原始方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:25:29.783

看来 IE8 有这个问题，不是很容易解决，但你可以尝试恢复覆盖`delete`。`Element.prototype`

```
var old = Element.prototype.getElementsByTagName;
Element.prototype.getElementsByTagName = old;
// alert(document.body.getElementsByTagName('script').length); // this throws Error
delete Element.prototype.getElementsByTagName;
alert(document.body.getElementsByTagName('script').length); // Now it works as expected 
```

# ruby - 如何阻止站点中的 Watir ruby gem 活动？

> ID：11643701
> 
> 赞同：2
> 
> 时间：2012-07-25T06:12:17.227
> 
> 标签：ruby, web-scraping, screen-scraping, watir

我是一名网站管理员，我正在尝试控制浏览器操作的 Watir ruby​​ gem。

我知道很多开发人员使用 Watir 进行测试，但我也看到使用 Watir 从网站上抓取内容。

我想知道作为网站管理员，我可以检测到这种用法吗？我还可以检测到**刮板**正在使用 Watir 吗？

另外我怎样才能阻止Watir？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:04:33.837

我不确定您是否可以检测到访问您网站的浏览器背后是否有人类或 Watir 脚本。Watir 驱动真正的浏览器，因此通过用户代理进行过滤无济于事。

如果你有一个工具可以让你实时监控流量，你可以通过大量流量到同一个 IP 来检测屏幕抓取。然后，您可以（暂时）阻止 IP。

目前我想不出任何其他方法来阻止屏幕抓取。像这样`robots.txt`的文件只是一个约定，脚本可以忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:49:51.733

如果您监视该用户的使用情况，您可能会检测到是否有人抓取了您的网站 - 如果用户做事非常快，那么它可能是机器人。

但是，您无法检测到刮板是否使用 Watir 或任何其他刮板工具。

# javascript - 如何将数据表单 wicket 页面加载到 highchart？

> ID：11643704
> 
> 赞同：0
> 
> 时间：2012-07-25T06:12:30.530
> 
> 标签：javascript, database, wicket

我正在使用 highchart 库创建条形图。

样本编码部分是

```
series: [{           
    name: 'foo',
    data: [10000, 60000, 90000, 14000, 18000, 21000, 25000, 26000, 23000, 18000, 13000, 9000]
}] 
```

如何从检票口页面获取这些数据值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:13:19.673

将 highchart 与 wicket 集成起来非常容易。请参阅以下网站[http://code.google.com/p/wicket-charts/](http://code.google.com/p/wicket-charts/)

# r - 数据框可以由矩阵和向量组成吗

> ID：11643705
> 
> 赞同：0
> 
> 时间：2012-07-25T06:12:30.997
> 
> 标签：r

我有一组向量和矩阵，它们可以分为 5 个子组。由于我想更轻松、更整洁地管理这些向量和矩阵，我可以将多个向量或多个矩阵放入一个数据帧中吗？如果允许这样做，如果我将它们分组到一个数据帧中，内存消耗是否会更大（比将它们保留为单独的向量和矩阵）？

感谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:21:42.113

基于我们在上面的评论中讨论的内容，这里有一个你应该能够重现的例子。*请务必先保存所有工作，因为此示例会删除当前工作区中的对象。*

```
## SAVE ANY WORK YOU NEED TO BEFORE DOING THIS!
##
## Start with a clean workspace
##
rm(list=ls())
ls()
set.seed(1)
## Make up some data
A = rnorm(10000)
B = sample(letters, 10000, replace=TRUE)
C = matrix(50000, nrow=10000, ncol=5)
## The same data as a data.frame
temp.df = data.frame(A = A)
temp.df$B = B
temp.df$C = C
## The same data as a list
temp.list = list(A, B, C)
##
## How big is each object?
##    
sort( sapply(ls(), function(x) { object.size(get(x)) }) )
#     A         B         C temp.list   temp.df 
# 80040     81288    400200    561600    562304 
sum(sort( sapply(ls(), function(x) { object.size(get(x)) }) )[1:3])
# [1] 561528 
```

您可以看到大小差异是微不足道的，无论您是将对象收集为 a `list`（推荐）还是 a `data.frame`（出于实际目的不推荐，尽管 a`data.frame` *是*a`list`和 a `class`of `data.frame`。

另请参阅：[此处](https://stackoverflow.com/questions/1395270/determining-memory-usage)和[此处](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session)。

# c# - 好编码？（多个消息循环）

> ID：11643706
> 
> 赞同：10
> 
> 时间：2012-07-25T06:12:35.133
> 
> 标签：c#, multithreading, coding-style

我需要一些正确编码的建议：

我正在开发一个使用多个串行连接的程序。每条通信线路都有一个控制器作为抽象层。在控制器和串行端口之间，插入协议以将数据包装在数据包中，以备传输。该协议负责处理失败的交付、重新发送等。为了确保 GUI 不会挂起，每个连接线（协议和串行端口）都在单独的线程上创建。控制器由主线程处理，因为它在 GUI 中有控件。

目前，当我创建线程时，我选择在它们上创建一个消息循环（Application.Run()），所以如果没有工作，我只是调用线程（BeginInvoke）并使用消息循环而不是轮询缓冲区并产生一个缓冲区。这目前工作得很好，到目前为止还没有严重的问题。

我现在的问题是：这是“良好的编码”，还是我应该在胎面上使用 while 循环并轮询缓冲区？还是第三件事？

我想展示代码，但到目前为止它是几千行代码，所以如果您需要查看代码的任何部分，请具体说明。:)

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:21:49.987

在每个线程中使用消息循环非常好；Windows 针对这种情况进行了优化。避免轮询是对的，但您可能想研究其他更有效的基于事件的设计，例如准备一个包以进行传输并调用`SetEvent`以通知线程它已准备好，或者像 Martin 一样的信号量和线程安全队列詹姆斯建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:16:50.230

我不是 100% 确定你在这里做什么，但是，有点“填写”听起来不错:)

当您的应用程序处于空闲状态（无通信）时，CPU 使用率是否为 0%？

您的应用程序是否没有 sleep(0)/sleep(1) 或类似的轮询循环？

它是否以相当低的延迟运行？

如果答案是三个“是”，你应该没问题:)

在少数情况下（非常少！），轮询结果等是一个好主意，（例如，当线程中的事件频率如此之高以至于向 GUI 发送每个进度事件的信号时会压倒它），但大多数情况下，这只是糟糕的设计。

# c# - 同一个锁中的多个线程

> ID：11643707
> 
> 赞同：0
> 
> 时间：2012-07-25T06:12:36.823
> 
> 标签：c#, .net, multithreading

我正在尝试为常规 Queue 类实现线程安全的包装器。但似乎多个线程可能会获得相同的锁。所以我的问题是：
1\. 怎么可能？
2、如何避免？
3.任何有用的建议都很高兴

这是我的队列：

```
public class SafeQueue<T> : SimpleQueue<T>
{
    private readonly object sync = new object();
    private readonly Queue<T> queue = new Queue<T>();

    public override T Dequeue()
    {
        T item;
        lock (sync)
        {
            Debug.Print("{1:mm ss ffff} {0} locked in dequeue", Thread.CurrentThread.ManagedThreadId, DateTime.Now);
            item = queue.Dequeue();
        }
        Debug.Print("{1:mm ss ffff} {0} unlocked dequeue", Thread.CurrentThread.ManagedThreadId, DateTime.Now);
        return item;

    }

    public override void Enqueue(T item)
    {
        lock (sync)
        {
            queue.Enqueue( item );
        }
    }

    public override IEnumerator<T> GetEnumerator()
    {
        Queue<T> q;
        lock (sync)
        {
            q = new Queue<T>(queue);
        }

        return ((IEnumerable<T>) q).GetEnumerator();
    }

    public override int Count
    {
        get
        {
            int c;
            lock (sync)
            {
                Debug.Print("{1:mm ss ffff} {0} locked in count", Thread.CurrentThread.ManagedThreadId, DateTime.Now);
                c = queue.Count;
            }
            Debug.Print("{1:mm ss ffff} {0} unlocked count. Ret {2}", Thread.CurrentThread.ManagedThreadId, DateTime.Now,c);
            return c;
        }
    }
} 
```

这是我使用它的一块（工作是一个线程函数）：

```
private readonly SafeQueue<string> taskQueue = new SafeQueue<string>();
private volatile bool stop = false;
...
 private void Work()
    {
        while ( !stop )
        {
            string dir = null;
            if (taskQueue.Count > 0)
            {
                dir = taskQueue.Dequeue();
            }
... 
```

所以，问题基本上是：两个线程获取 Count 属性的锁并返回一个正值。从那以后，他们都尝试使元素出队。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T06:16:19.797

一个明显的错误是，在您检查计数和关联的`Dequeue`. 出于这个原因，线程安全队列通常具有原子`TryDequeue`操作。

通过这样的操作，您的代码变为：

```
while ( !stop )
{
    string dir;
    if(taskQueue.TryDequeue(out dir))
    {
    } 
```

您的调试打印也可能具有误导性。您仅在实际解锁发生后的某个时间打印“解锁”行。因此，在实际解锁和调试输出之间，不同的线程可能会进入锁并打印其“锁定”行，从而导致输出混乱。

.net 有两个内置的线程安全队列：`ConcurrentQueue<T>`一个是非阻塞的，`BlockingCollection<T>`一个是阻塞的。

# magento - Magento：从前端以编程方式更新和删除，不起作用？

> ID：11643712
> 
> 赞同：1
> 
> 时间：2012-07-25T06:12:59.193
> 
> 标签：magento, magento-1.6

我正在尝试从前端更新产品，但它不允许我更新产品的所有字段，

**这是用于更新**的索引控制器的代码：

```
public function updateVproductAction(){
    if($addvp = $this->getRequest()->getPost())
{

    /***********************  Product Update  ***************************/

    /**
    * Get the resource model
    */
       $resource = Mage::getSingleton('core/resource');

       /**
    * Retrieve the write connection
    */
       $writeConnection = $resource->getConnection('core_write');

       /**
    * Retrieve our table name
    */
       $table = $resource->getTableName('catalog/product');

       /**
    * Set the product ID
    */
       $productId = $addvp['product']['id'];

       /**
    * Set the new SKU
    * It is assumed that you are hard coding the new SKU in
    * If the input is not dynamic, consider using the
    * Varien_Db_Select object to insert data
    */
       //$newSku = 'new-sku';

        $sku            =   $addvp['product']['sku'];
        $name           =   $addvp['product']['name'];
        $description        =   $addvp['product']['description'];
        $short_description      =   $addvp['product']['short_description'];
        $weight         =   $addvp['product']['weight'];

        $news_from_date     =   $addvp['product']['news_from_date'];
        $news_to_date       =   $addvp['product']['news_to_date'];

        $status         =   $addvp['product']['status'];

        $price          =   $addvp['product']['price'];
        $special_price      =   $addvp['product']['special_price'];
        $tax_class_id       =   $addvp['product']['tax_class_id'];

        $meta_title         =   $addvp['product']['meta_title'];
        $meta_keyword       =   $addvp['product']['meta_keyword'];
        $meta_description       =   $addvp['product']['meta_description'];

        $stock_data         =   array(
                            'is_in_stock' => 1,
                            'qty' => $addvp['product']['stock_data']['qty']
                        );

    $query = "UPDATE {$table} SET sku = '{$sku}', name = '{$name}', description = '{$description}', short_description = '{$short_description}', weight = '{$weight}', news_from_date = '{$news_from_date}', news_to_date = '{$news_to_date}', status = '{$status}', price = '{$price}', special_price = '{$special_price}', tax_class_id = '{$tax_class_id}', meta_title = '{$meta_title}', meta_keyword =  '{$meta_keyword}', meta_description = '{$meta_description}', stock_data = '{$stock_data}' WHERE entity_id = "
            .(int) $productId;

    try
    {
        /**
        * Execute the query
        */
        $writeConnection->query($query);
        echo "successfully updated product with ID: ". $productId ."<br />";
    } 
    catch (Exception $e) 
    {
        echo "Could not update product with ID: ". $productId ."<br />";
    }

}

} 
```

任何人都可以帮助并纠正我的错误吗？

**对于删除产品，我只是从 Helper 调用此函数：**

```
public function vDeleteproduct($vprod){

    //print_r($vprod); exit;
    try
        {
            $product = Mage::getSingleton('catalog/product')->load($vprod);
            Mage::dispatchEvent('catalog_controller_product_delete', array('product' => $product));
            $product->delete();
            //$product = Mage::getModel('catalog/product')->load($vprod)->delete();
            echo "successfully deleted product with ID: ". $vprod ."<br />";
        } 
    catch (Exception $e) 
        {
            echo "Could not delete product with ID: ". $vprod ."<br />";
        }

    return;

} 
```

它也不起作用:(

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:16:09.013

**删除产品：**

我通过授予从非管理区域（即前端）删除的访问权限找到了答案。它为我创造了魔力。

[http://inhoo.net/ecommerce/magento/programming-magento/how-to-delete-magento-product-from-frontend-template-code-from-view-files/](http://inchoo.net/ecommerce/magento/programming-magento/how-to-delete-magento-product-from-frontend-template-code-from-view-files/)

上面的链接帮助我找到了解决方案。

# weblogic - 使用 wlst 在远程 Weblogic 服务器中上传 jar 文件

> ID：11643717
> 
> 赞同：1
> 
> 时间：2012-07-25T06:13:22.510
> 
> 标签：weblogic, aspectj, wlst

有没有办法使用 wlst 将 jar 文件上传到远程 weblogic 服务器上的特定位置？这是我的场景 - 我需要将 aspectjweaver.jar 上传到远程服务器。这需要在 weblogic 启动之前完成，因为编织发生在启动期间。FTP 不是一个选项，因为这些端口被阻止。

# asp.net-mvc-3 - 如何在 mvc3 razor 视图中使用会话变量持久化数据？

> ID：11643721
> 
> 赞同：7
> 
> 时间：2012-07-25T06:13:57.410
> 
> 标签：asp.net-mvc-3, session-variables

我正在使用 Razor 处理 MVC3 应用程序。在验证用户后，在我的帐户控制器中，我从数据库中获取用户 ClientID。在这里，我想将 ClientID 保留在 Session 变量中。它在所有控制器和 Razor 视图中使用。

我不知道实现这个的最佳方法是什么。或者如何在会话变量中持久化数据。以及如何在整个控制器中使用会话变量中的持久数据。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T06:24:46.083

我通常会编写一个 Session 包装器，以便将来轻松访问它：

```
public class SessionData
{
    const string ClientId_KEY = "ClientId";

    public static int ClientId
    {
        get { return HttpContext.Current.Session[ClientId_KEY] != null ? (int)HttpContext.Current.Session[ClientId_KEY] : 0; }
        set { HttpContext.Current.Session[ClientId_KEY] = value; }
    }
} 
```

之后，您可以像这样从任何地方访问它：

```
int clientId = SessionData.ClientId; 
```

如果你愿意，你可以像这样在 Session 中使用整个对象。

或者你可以这样设置：`SessionData.ClientId = clientId;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:22:53.120

如果您使用的是 ASP.NET 表单身份验证，则用户名已存储在 cookie 中。您可以通过控制器从控制器访问它

```
Controller.User.Identity.Name 
```

可以将用户 ID 存储为用户名。当你打电话给像

```
FormsAuthentication.RedirectFromLoginPage 
```

给它 ID 而不是名称。然后可以使用上述方法找到 ID，不需要额外的会话数据。如果你想在会话中存储一些东西，只需调用

```
Session["UserID"] = value; 
```

从您的控制器。

# mysql - SQL查询，返回随机排序的有限制的行，可能吗？

> ID：11643725
> 
> 赞同：0
> 
> 时间：2012-07-25T06:14:22.727
> 
> 标签：mysql, sql

我正在考虑返回一个随机排序的`SQL`响应，其中结果随机混合，有限制。事情是我需要所有的行回来，基本上分为组（行块）。我希望我很清楚。

例如，从表 A：

```
ID   |   NAME    |   PROFESSION
++++++++++++++++++++++++++++++++
1    |  Jack     |   Carpenter
2    |  Rob      |   Manager
3    |  Phil     |   Driver
4    |  Mary     |   Cook
5    |  Tim      |   Postman
6    |  Bob      |   Programmer 
```

查询将返回如下内容：

限制为 0,2：

```
6    |  Bob      |   Programmer
4    |  Mary     |   Cook 
```

限制为 2,2：

```
1    |  Jack     |   Carpenter
5    |  Tim      |   Postman 
```

限制为 4,2：

```
3    |  Phil     |   Driver
2    |  Rob      |   Manager 
```

注意：`all the table rows were returned`。在我的页面中，我需要一个`<<` `>>`按钮来向用户显示所需的数据“组”。我该如何编写这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:35:18.960

您解释的问题的更好名称是*随机打乱记录*。确实，顺序是随机的，但是由于需要记住顺序，因此您别无选择，只能将其保存在列中。您可以通过保存随机填充的字段并根据该字段对记录进行排序来做到这一点。通过这种方式，您可以以无特定顺序对记录进行排序，同时记住该顺序以供将来的选择查询使用。每当您厌倦了订单时，您可以使用新的随机生成的值更新提到的字段以再次打乱它们。这是玩家在不重复播放歌曲两次的情况下随机播放播放列表的技术。

[编辑]

虽然第一个给定的解决方案是一般答案，但您可以在 MySQL 中使用一个 hack 来随机排序记录。通过这种方式，您只需存储它的种子即可记住订单。

```
SELECT * FROM tbl ORDER BY RAND(s); 
```

例如，如果您希望每个用户看到一些不同的随机排序的记录，您可以使用他们的 user_id 作为种子。这样，每个用户看到记录的顺序将保持不变，但它是随机的并且与其他用户不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:18:31.443

我可以在这里想到两件事：

1.  如果表中的数据很大，请添加一列，告诉行所属的组。当用户单击 >> 或 << 按钮时，获取该特定组的行。

2.  如果您正在处理少量数据，则可以在代码本身中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:35:56.423

如果您使用`ORDER BY RAND()`，那么您将不得不在不建议的地方标记选定的记录。

您可以结合使用一些智能算法`total_pages`，`ID`例如

```
SELECT *
FROM  my_table
ORDER BY MOD(ID, total_pages); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:38:12.097

在表中添加一个名为*random_col的列*

然后每次你需要随机化你运行的表

```
UPDATE table SET random_col = RAND() 
```

现在每次你想检索结果时，你都会运行一个正常的选择

```
SELECT * FROM table ORDER BY random_col ASC LIMIT x,y 
```

结果将以相同的顺序显示，直到您通过运行“更新”再次随机化它们

# c++ - _CrtCheckMemory 的可靠性如何？

> ID：11643726
> 
> 赞同：4
> 
> 时间：2012-07-25T06:14:23.650
> 
> 标签：c++, qt, heap-memory, heap-corruption

我有一些奇怪的堆损坏，并试图使用 _CrtCheckMemory 来发现它。

**如果 _CrtCheckMemory 函数返回 true，是否意味着 100% 内存* 正常？**

我认为当它返回 false 时很明显，然后内存中出现了问题。

相关代码为：

```
assert( _CrtCheckMemory() );
renderText( x + (max_height/4.0) * w, y + (fm.descent() + (label.shadedText ? 1.0 : 0.0)) * h, 0.0, label.text, label.font );
assert( _CrtCheckMemory() ); 
```

第一个调用返回 true，但第二个调用返回 false。renderText 是一个 QGLWidget::renderText 调用，而 label 在调用 renderText 之前和之后是一个有效的对象。

*：我的意思是堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:55:34.527

以我的经验，_Crt... 调试功能效果很好，但重量轻，因此并非万无一失。您应该将测试推入 fm.descent()

# android - 在android中计算用户移动速度

> ID：11643727
> 
> 赞同：5
> 
> 时间：2012-07-25T06:14:28.320
> 
> 标签：android, gps, accelerometer

我需要计算*用户移动的速度*。所以我们需要两件事来计算速度，它们是`GPS`和`Accelerometer`。

但两者都有其局限性。

1)`GPS`并非一直可用。虽然我总是获取用户的当前位置，但我`Network provider`只是从而不是从`GPS`.

2)`Accelerometer`不准确。

那么我应该采用哪种方法呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T07:35:16.403

通过**传感器融合，使用****它们两者**可以获得最准确的结果。请参阅我之前对问题[Using accelerometer to calculate speed](https://stackoverflow.com/q/10921395/341970)或另一个问题[GPS VS accelerometer to calculate distance](https://stackoverflow.com/q/9916926/341970)的回答。

 **至于加速度计的精度，请参阅[Get velocity from 3DVector using accelerometer sensor](https://stackoverflow.com/q/9957625/341970)。

[如果您想在室内跟踪用户，请在问题Android 加速度计准确性（惯性导航）](https://stackoverflow.com/a/7835988/341970)中查看您实际上可以做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T06:34:19.947

您可以在 locationprovider 上调用 .getSpeed()

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T06:37:03.177

[此链接](http://code.google.com/p/krvarma-android-samples/source/browse/#svn/trunk/SpeedDemo)提供了基于 GPS 的实现**

# sql - Oracle10G SQL：将列变成行

> ID：11643731
> 
> 赞同：1
> 
> 时间：2012-07-25T06:14:55.440
> 
> 标签：sql, oracle

我需要将列转换为行并获得其平均值。

例如我有这张表：

```
Name   Math    Science     Computer
----   ----    -------     --------
Ted    90       89          95
Zed    99       98          98
Fed    85       75          90 
```

输出应该是：

```
Subject      Average
-------      -------
Math         88
Science      87.33
Computer     94.33 
```

我怎样才能实现它？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:29:47.850

如果您使用的是 11G，则可以使用[`unpivot`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6779)：

```
SELECT subject, AVG(percentage) AS percentage
FROM (
    SELECT * FROM tablea
    UNPIVOT (percentage FOR subject IN (math, science, computer))
)
GROUP BY subject
ORDER BY subject;

SUBJECT  PERCENTAGE
-------- ----------
COMPUTER      94.33
MATH          91.33
SCIENCE       87.33 
```

但既然你不是，你可以假装它。改编自[本网站](http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php#unpivot)：

```
SELECT subject, AVG(percentage) AS percentage
FROM (
    SELECT DECODE(unpivot_row, 1, 'Math',
                               2, 'Science',
                               3, 'Computer') AS subject,
           DECODE(unpivot_row, 1, math,
                               2, science,
                               3, computer) AS percentage
    FROM tablea
    CROSS JOIN (SELECT level AS unpivot_row FROM dual CONNECT BY level <= 3)
)
GROUP BY subject
ORDER BY subject;

SUBJECT  PERCENTAGE
-------- ----------
Computer      94.33
Math          91.33
Science       87.33 
```

在这两种情况下，内部`select`都将行转换为列；在 10g 中你只需要自己做。只是生成一个虚拟值列表，这`SELECT ... CONNECT BY ...`必须足以涵盖要转换为行的列数（如果你真的有 1000 个，你应该重新审视数据模型）。这两个`decode`语句使用生成的数字来匹配列名和值 - 自行运行内部选择以查看其外观。

如果不使用动态 SQL，您将无法避免列出列 - 只列出一次真实`unpivot`的 10g 版本，但两次使用假的 10g 版本，并且您必须确保它们正确匹配，并且行号生成器正在产生足够的价值。（太多了，你可能会得到奇怪的结果，但是由于任何额外的值在这里都是 null 并且你正在使用`avg`，在这种情况下它并不重要；就像一个健全性检查一样，你应该让它完全匹配） .

* * *

或者另一个版本，基于你总是想要除 之外的所有列`name`，这意味着你只需要列出你想要的列一次，并且更容易在视觉上匹配它们 - 只需继续添加`when`子句；而且您不需要行数：

```
SELECT subject, AVG(percentage) AS percentage
FROM (
    SELECT column_name AS subject,
        CASE
            WHEN column_name = 'MATH' then math
            WHEN column_name = 'SCIENCE' then science
            WHEN column_name = 'COMPUTER' then computer
        END AS percentage
    FROM tablea
    CROSS JOIN (
        SELECT column_name
        FROM user_tab_columns
        WHERE table_name = 'TABLEA'
        AND column_name != 'NAME'
    )
)
GROUP BY subject
ORDER BY subject;

SUBJECT                        PERCENTAGE
------------------------------ ----------
COMPUTER                            94.33
MATH                                91.33
SCIENCE                             87.33 
```

# javascript - 如何在 CKEditor 中指向或选择具有内容的任意元素？

> ID：11643732
> 
> 赞同：0
> 
> 时间：2012-07-25T06:14:55.883
> 
> 标签：javascript, ckeditor

我需要将 CSS 类添加到用户在 CKEditor 中选择或指向的任何元素。例如，如果有一个包含列表的表，我的元素结构和元素路径在光标下可能如下所示：

```
body > table > tbody > tr > td > ul > li 
```

其中，用户需要能够以某种方式选择或指向表、tr、td、ul 或 li 元素。在用户选择/指向他们想要添加类的元素后，他们会得到一个对话框来选择一个类。

我如何检测用户想要指向的元素？

我愿意接受任何和所有建议，即使这意味着破解核心。例如，我认为这对于具有上下文菜单的 elementspath 是可行的，我可以在其中单击元素的“属性”之类的内容，然后会弹出一个对话框，用户可以在其中选择一个类，但我不知道如何甚至不知道如果可以将上下文菜单添加到元素路径！

*在 Firefox 中，这种方法开箱即用，当用户单击 elementspath 中的元素时，我可以 GetSelectedElement 并返回用户单击的内容，但它在 IE/Chrome 中不起作用。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:43:59.173

我拼凑了一个可怕但有点实用的解决方案。在 elementspath plugin.js 我添加了

```
function onContextMenu(elementIndex, ev) {
    editor.focus();
    var element = editor._.elementsPath.list[elementIndex];
    editor.execCommand('elementspathContextmenuForElement', ev, element);
}
var onContextMenuHanlder = CKEDITOR.tools.addFunction(onContextMenu); 
```

然后在生成元素路径项 html 的位置添加：

```
oncontextmenu="return CKEDITOR.tools.callFunction(', onContextMenuHanlder, ',', index, ', event );" 
```

然后我做了一个插件来创建一个html“上下文菜单”

```
CKEDITOR.plugins.add('elementspathcontextmenu', {
    init: function (editor) {
        editor.addCommand('elementspathContextmenuForElement', {
            exec: function (editor, event, element) {
                debug(element);
                var tempX = event.pageX + 'px';
                var tempY = event.pageY + 'px';
                window.newdiv = document.createElement('div');
                window.newdiv.setAttribute('id', "tmpContextMenuDiv");
                window.newdiv.style.width = 300 + 'px';
                window.newdiv.style.height = 300 + 'px';
                window.newdiv.style.position = "absolute";
                window.newdiv.style.left = tempX;
                window.newdiv.style.top = tempY;
                window.newdiv.innerHTML = '<p><a href="#" onclick="return false;">Do something</a></p>';
                document.body.appendChild(window.newdiv);
            },
            canUndo: false    // No support for undo/redo
        });
    }
}); 
```

I feel a bit dirty hacking the core like that and creating a div element for the context menu in that way but it kind of works for me. This is by no means the final code but it gets the point across.

# c++ - C ++如何继续主直到用户选择退出选择

> ID：11643734
> 
> 赞同：1
> 
> 时间：2012-07-25T06:14:56.573
> 
> 标签：c++

```
int main()
{
    string selection;
    // print out selection menu
    selection = userOption();
    cout << selection << endl;

    //now perform web parser
    webparser(selection);    

    //now perform searchstring
    searchString(selection);
return 0;
} 
```

以上是我的部分代码字符串 userOption() 是一个像这样打印出菜单的函数

## 货币

1.  美元/新加坡元
2.  欧元/美元
3.  输入您自己的货币对
4.  退出程序

我如何让 main 不退出，直到从 userOption 选择 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:18:12.997

一个简单的do-while：

```
int main()
{
  string exitstr("4");
  string selection;
  do {
    // print out selection menu
    selection = userOption();
    cout << selection << endl;
    if (selection == exitstr)
      break;
    //now perform web parser
    webparser(selection);    

    //now perform searchstring
    searchString(selection);
  } while (1);
return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:17:22.490

```
int main()
{
    string selection;
    while( (selection = userOption()) != "4")
    {
        cout << selection << endl;
        //now perform web parser
        webparser(selection);    
        //now perform searchstring
        searchString(selection);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:19:33.390

```
int main()
{
    for (;;)
    {
        string selection;
        // print out selection menu
        selection = userOption();
        cout << selection << endl;

        if (selection == "4") break;

        //now perform web parser
        webparser(selection);    

        //now perform searchstring
        searchString(selection);
    }
    return 0;
} 
```

类似于 perreals 的答案。有很多方法可以编写“无限”循环，我认为在循环头（作为 this 或 by `while(true)`）中表达它会更好 - 当你开始阅读循环时，你会立即知道结束条件在里面的某个地方。

# oracle - 插入表格期间的数据检查

> ID：11643735
> 
> 赞同：0
> 
> 时间：2012-07-25T06:14:57.330
> 
> 标签：oracle

我想在插入表之前检查数据的值。比如，如果像“或&”这样的东西出现在数据中，它应该忽略它或使用一些转义序列插入。

```
create table test (checkit varchar2(40));
insert into test values("Here is the & test data"); 
```

或者

```
insert into test values("Here is the " test data"); 
```

有没有办法在 oracle 中做到这一点？谢谢

编辑

我想知道解决方案，尤其是对于像 & 、 " 等字符的解决方案，而不是示例中所示的普通数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:16:30.530

您可以使用[BEFORE trigger](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm)来做到这一点。

* * *

这是一个用 &`&amp;`和 " 替换`&quot`;的例子。

```
SET DEFINE OFF;
drop table test;
create table test (checkit varchar2(60));

CREATE OR REPLACE TRIGGER validateTest
  BEFORE DELETE OR INSERT OR UPDATE ON test
  FOR EACH ROW
BEGIN
  :new.checkit := replace(:new.checkit, '&', '&lte;');
  :new.checkit := replace(:new.checkit, '"', '&quot;');
END;
/

insert into test (checkit) values ('Here is the & test "data"');
select * from test; 
```

输出：

```
drop table test succeeded.
create table succeeded.
TRIGGER validateTest Compiled.
1 rows inserted
CHECKIT                                                      
------------------------------------------------------------ 
Here is the &lte; test &quot;data&quot;                    

1 rows selected 
```

显然替换字符串可以是任何东西。

# c# - 实体框架：使用多对多关系时数据不正确

> ID：11643741
> 
> 赞同：2
> 
> 时间：2012-07-25T06:15:44.547
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有以下使用实体框架**代码优先**方法的 C# 代码。表是在数据库中创建的；但输入的数据不正确。

> 人 1 是俱乐部 1 和俱乐部 3 的成员。
> 
> 第 2 个人是 Club 2 和 Club 3 的成员
> 
> 这意味着 Club 2 只有一名成员。

但是使用下面的查询可以看出数据库中到达的数据是不正确的。

为了使其正确，需要在 C# 代码中进行哪些更改？

![在此处输入图像描述](../Images/934315648d7858900c17151c5c623507.png)

```
 static void Main(string[] args)
    {

        Database.SetInitializer<NerdDinners>(new MyInitializer());
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";

        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = new Club();
            Club club2 = new Club();
            Club club3 = new Club();

            Person p1 = new Person();
            Person p2 = new Person();

            List<Club> clubsForPerson1 = new List<Club>();
            clubsForPerson1.Add(club1);
            clubsForPerson1.Add(club3);

            List<Club> clubsForPerson2 = new List<Club>();
            clubsForPerson2.Add(club2);
            clubsForPerson2.Add(club3);

            List<Person> personInClub1 = new List<Person>();
            personInClub1.Add(p1);

            List<Person> personInClub2 = new List<Person>();
            personInClub2.Add(p2);

            List<Person> personInClub3 = new List<Person>();
            personInClub3.Add(p1);
            personInClub3.Add(p2);

            club1.Members=personInClub1;
            club2.Members=personInClub2;
            club3.Members=personInClub3;

            p1.Clubs = clubsForPerson1;
            p2.Clubs = clubsForPerson2;

            db.Clubs.Add(club1);
            db.Clubs.Add(club2);
            db.Clubs.Add(club3);

            db.Persons.Add(p1);
            db.Persons.Add(p2);

            int recordsAffected = db.SaveChanges();

        }

    }

namespace LijosEF
{

public class Person
{
    public int PersonId { get; set; }
    public virtual ICollection<Club> Clubs { get; set; }
}

public class Club
{
    public int ClubId { get; set; }
    public virtual ICollection<Person> Members { get; set; }
}

public abstract class PaymentComponent
{

    public int PaymentComponentID { get; set; }
    public int MyValue { get; set; }
    public abstract int GetEffectiveValue();
}

public partial class GiftCouponPayment : PaymentComponent
{

    public override int GetEffectiveValue()
    {
        if (MyValue < 2000)
        {
            return 0;
        }
        return MyValue;
    }

}

public partial class ClubCardPayment : PaymentComponent
{
    public override int GetEffectiveValue()
    {
        return MyValue;
    }
}

public partial class Payment
{
    public int PaymentID { get; set; }
    public List<PaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; }

}

public class MyInitializer : CreateDatabaseIfNotExists<NerdDinners>
{
    //Only one identity column can be created per table.
    protected override void Seed(NerdDinners context)
    {

    }
}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
         //Fluent API - Plural Removal
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<Person> Persons { get; set; }
    public DbSet<Club> Clubs { get; set; }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:39:47.990

实际上没有问题。由于 id 创建的顺序，我认为这是一个问题。我在[实体框架中发布了一些其他问题：多对多关系中的重复记录](https://stackoverflow.com/questions/11646299/entity-framework-duplicate-records-in-many-to-many-relationship)。

它用

```
((IObjectContextAdapter)db).ObjectContext.Attach((IEntityWithKey)entity); 
```

# html-parsing - 从 html 创建 csv

> ID：11643742
> 
> 赞同：0
> 
> 时间：2012-07-25T06:15:46.673
> 
> 标签：html-parsing, simple-html-dom

我有代码，我需要它来获取包含以下内容的 csv 文件。

img.myImg 的源文件；EAN内容：Z88799010290

我试过了，但没有运气如何合并两个 foreach：

```
foreach($html->find('img.myImg') as $e)
    echo $e->src . '<br>;';

foreach($html->find('div.EANN') as $ean)
    echo $ean. ';<br>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:36:14.810

```
<div id="wybr_45" alt="-8204" class="listProduct"><div id="d4b">

<div class="fl fotoimage">
    <div class="listLink1"> <a href="#" onclick="changeData('popshop','Mainframe','showModuleNew','DeepProductSelect',1234,1234);" >
   <img src="http://example/script.php?a=87x112&amp;t=B2B.BSDTrade&amp;i=-441"  class="myImg" alt="w"/> </a>
  </div>

</div>

<div class="fl descriptionColumn">

<div class="lpTitle2 listName"><b> <a href="#">GATTA: MICHELLE LOVE pończochy samonośne wz.03</a></b></div>
<div class="lpTitle2"><!-- <a href="#" >brak opisu </a> --></div>
<span class="lpTitle2">Kod:</span><b>-8204</b>
<div class="EANN">000245035190</div><div class="lpTitle2 producer">Producent: <a style="font-size: 12px; color: #555;" href="#">GATTA</a></div>

</div>

<div class="marketIndex">
<div class="priceColumn"> <span class="oldPrice1"> 
</span></div>
<div class="OrderCpl"><span class="addtoOrderL" onclick="deepProductTable_showForProduct(-8204);" >

<span onclick="deepProductTable_showForProduct(-8204);" class="addtobasket"/> </span></div>
</div></div></div> 
```

结果：

```
http://example/script.php?a=87x112&amp;t=B2B.BSDTrade&amp;i=-723;000937090290 
```

# blackberry - 在黑莓中解析 JSON 数据的问题

> ID：11643744
> 
> 赞同：1
> 
> 时间：2012-07-25T06:15:48.283
> 
> 标签：blackberry, java-me

我是 BB 的新手，试图解析 Json 文件，只想在对话框中打印 Json 响应。但它引发了一个关于`No Application Instance`并且也在获取的错误`IllegalStateException`。我使用`GET`url 方法。我还添加了`UiApplication`类似的权限..

**UIApplicationScreen**

```
public static void main(String[] args) {
    ApplicationPermissions permRequest = ApplicationPermissionsManager.getInstance().getApplicationPermissions();
    permRequest = new ApplicationPermissions();
    permRequest.addPermission( ApplicationPermissions.PERMISSION_INTERNET );
    ApplicationPermissionsManager.getInstance().invokePermissionsRequest( permRequest );

    UiFunApplication app = new UiFunApplication();
    app.enterEventDispatcher(); 
```

**这是主屏幕代码....**

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Vector;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

import net.rim.device.api.applicationcontrol.ApplicationPermissions;
import net.rim.device.api.applicationcontrol.ApplicationPermissionsManager;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.MainScreen;

import com.rim.samples.jsonme.cakeorder.org.json.me.JSONArray;
import com.rim.samples.jsonme.cakeorder.org.json.me.JSONObject;

public class UiMainscreen extends MainScreen  {

    public UiMainscreen() {
        Dialog.alert("asdasd");
         HttpConnection conn = null;
          InputStream in = null;
          ByteArrayOutputStream out = null;
          try {
           //  String url = "http://api.twitter.com/1/users/show.json?screen_name=Kaka";
             String url = "http://docs.blackberry.com/sampledata.json";

             conn = (HttpConnection) Connector.open(url, Connector.READ);
             conn.setRequestMethod(HttpConnection.GET);

             int code = conn.getResponseCode();
             if (code == HttpConnection.HTTP_OK) {
                in = conn.openInputStream();
                out = new ByteArrayOutputStream();
                byte[] buffer = new byte[in.available()];
                int len = 0;
                while ((len = in.read(buffer)) > 0) {
                   out.write(buffer);
                }
                out.flush();
                String response = new String(out.toByteArray());
                Dialog.alert("response is ::"+response);
                } catch (Exception e) {
             Dialog.alert(e.getMessage());
          } finally {
             if (out != null) {
                try {
                    out.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Dialog.alert(e.getMessage());
                }
             }
             if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Dialog.alert(e.getMessage());
                }
             }
             if (conn != null) {
                try {
                    conn.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Dialog.alert(e.getMessage());
                }
             }
          }
        }
    } 
```

**更新：：**

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Vector;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

import net.rim.device.api.applicationcontrol.ApplicationPermissions;
import net.rim.device.api.applicationcontrol.ApplicationPermissionsManager;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.CheckboxField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.MainScreen;

import com.rim.samples.jsonme.cakeorder.org.json.me.JSONArray;
import com.rim.samples.jsonme.cakeorder.org.json.me.JSONObject;

public class UiMainscreen extends MainScreen implements FieldChangeListener {

    public UiMainscreen() {
        ButtonField loginButton;

        loginButton = new ButtonField("Go", ButtonField.CONSUME_CLICK);
        loginButton.setChangeListener(this);

        add(loginButton);

    }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        if (field instanceof ButtonField) {

            Dialog.alert("Message");
            HttpConnection conn = null;
            InputStream in = null;
            ByteArrayOutputStream out = null;
            try {
                // String url =
                // "http://api.twitter.com/1/users/show.json?screen_name=Kaka";
                String url = "http://docs.blackberry.com/sampledata.json";

                conn = (HttpConnection) Connector.open(url, Connector.READ);
                conn.setRequestMethod(HttpConnection.GET);

                int code = conn.getResponseCode();
                if (code == HttpConnection.HTTP_OK) {
                    in = conn.openInputStream();
                    out = new ByteArrayOutputStream();
                    byte[] buffer = new byte[in.available()];
                    int len = 0;
                    while ((len = in.read(buffer)) > 0) {
                        out.write(buffer);
                    }
                    out.flush();
                    String response = new String(out.toByteArray());
                    Dialog.alert("response is ::" + response);

                    /*
                     * JSONObject resObject = new JSONObject(response); String
                     * key = resObject.getString("vehicleType");
                     * 
                     * Vector resultsVector = new Vector(); JSONArray jsonArray
                     * = resObject.getJSONArray("name"); if (jsonArray.length()
                     * > 0) { for (int i = 0; i < jsonArray.length();i++) {
                     * Vector elementsVector = new Vector(); JSONObject jsonObj
                     * = jsonArray.getJSONObject(i);
                     * elementsVector.addElement(jsonObj
                     * .getString("experiencePoints"));
                     * elementsVector.addElement
                     * (jsonObj.getString("Insert Json Array Element Key2"));
                     * resultsVector.addElement(elementsVector); } }
                     */
                }
            } catch (Exception e) {
                Dialog.alert(e.getMessage());
            } finally {
                if (out != null) {
                    try {
                        out.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Dialog.alert(e.getMessage());
                    }
                }
                if (in != null) {
                    try {
                        in.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Dialog.alert(e.getMessage());
                    }
                }
                if (conn != null) {
                    try {
                        conn.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Dialog.alert(e.getMessage());
                    }
                }
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:05:47.947

试试这个代码 -

```
final ButtonField b=new ButtonField("JSON");
    add(b);

    FieldChangeListener listener=new FieldChangeListener() {
        public void fieldChanged(Field field, int context) {
            if(field==b){

                try {
                    String httpURL = "http://docs.blackberry.com/sampledata.json";  
                    HttpConnection httpConn;
                    httpConn = (HttpConnection) Connector.open(httpURL);
                    httpConn.setRequestMethod(HttpConnection.POST);
                    DataOutputStream _outStream = new DataOutputStream(httpConn.openDataOutputStream());
                    byte[] request_body = httpURL.getBytes();
                    for (int i = 0; i < request_body.length; i++) {
                    _outStream.writeByte(request_body[i]);
                    }
                    DataInputStream _inputStream = new DataInputStream(
                    httpConn.openInputStream());
                    StringBuffer _responseMessage = new StringBuffer();
                    int ch;
                    while ((ch = _inputStream.read()) != -1) {
                    _responseMessage.append((char) ch);
                    }
                    String res = (_responseMessage.toString());
                    String responce = res.trim();

                    Dialog.alert(responce);

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        }
    };
    b.setChangeListener(listener); 
```

# jquery - 改进占位符

> ID：11643746
> 
> 赞同：0
> 
> 时间：2012-07-25T06:15:55.857
> 
> 标签：jquery, html, css

我已经像 twitter 和 google 一样实现了占位符，但出于某种原因我想改进此代码。当有人检查元素时，我只想允许获取输入元素

这是代码

```
<style type="text/css">
    input.txtl{padding: 4px 4px;width: 100%;border: 0px}
    div.txtlo{width: 200px;position: relative;border: 1px solid #000099;}
    div.placer{position: absolute;z-index: 5;top: 0px;left: 0px;background: transparent;width: 100%;color: #cccccc;white-space: nowrap;padding: 2px;padding-left: 4px}
    div.hints{background: transparent;margin: 3px}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript">
     function perform(val,hid){
        val=val.trim();
        if(val==""){
            $("#"+hid).show();
        }else{
            $("#"+hid).hide();
        }
    }
</script>
<div class="txtlo">
    <input type="text" class="txtl" id="us" onkeyup="perform(this.value,'plcus')" />
    <div class="placer" onclick="$('#us').focus()" id="plcus">Enter Password</div>
</div> 
```

现在，当我使用 Firefox 的默认检查器检查这个时，我得到了这个。

![在此处输入图像描述](../Images/b5a45c93892383020da1dd7574e04ad8.png)

正如您在此图像中看到的那样，显示了蓝色边框，这意味着我的占位符 div 大于输入.....是否有办法使输入和占位符在宽度和高度上都相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:21:31.683

嘿，现在习惯了这个

```
<input type="text" onkeypress="return submitenter(this,event)" id="" name="" onfocus="this.value = ''" onblur="if(this.value == '') this.value='Enter Password'" value="Enter Password"> 
```

## [**现场演示**](http://tinkerbin.com/t4owp0It)

**或者这个**

```
<input type="text" placeholder="Enter Password"> 
```

[**现场演示**](http://tinkerbin.com/gDY3b2Tf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:33:46.750

对于您的 css 问题，请尝试此操作。根据您的需要进行调整。
**演示：http:** [//jsfiddle.net/elclanrs/bCqQp/](http://jsfiddle.net/elclanrs/bCqQp/)

```
.txtlo, .placer, .txtl {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.txtlo {
  position: relative;
  width: 200px;
  height: 30px;
  line-height: 30px;
  padding: 0 1em;
  border: 1px solid black;
}
.placer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding: 0 1em;
}
.txtl {
  display: block;
  width: 100%;
  border: none;
} 
```

# rspec - RSpec：描述、上下文、特征、场景？

> ID：11643747
> 
> 赞同：121
> 
> 时间：2012-07-25T06:15:57.330
> 
> 标签：rspec, rspec2, rspec-rails

`describe`, `context`, `feature`, `scenario`: 这四个有什么区别，我什么时候使用每个？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-07-26T09:04:28.867

是的`context`别名`describe`，因此它们在功能上是等效的。您可以互换使用它们，唯一的区别是您的规范文件的读取方式。例如，测试输出没有区别。RSpec 书说：

> “我们倾向于使用`describe()`事物和`context()`上下文”。

我个人喜欢使用`describe`，但我可以理解为什么人们更喜欢`context`。

`feature`并且`scenario`是 Capybara 的一部分，而不是 RSpec，旨在用于验收测试。`feature`等价于`describe`/ `context`，`scenario`等价于`it`/ `example`。

如果您正在使用 Capybara 编写验收测试，请使用`feature`/`scenario`语法，如果不使用`describe`/`it`语法。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-12-03T11:38:35.327

今天早上，在写一些规范时，我遇到了同样的问题。通常，我主要使用`describe`并且不会特别考虑这一点，但今天早上我正在处理一个模块的许多案例和不同的规范，因此对于下一个将阅读这些规范的开发人员来说，它必须易于理解。所以我向谷歌询问了这个问题，我发现了这个：[describe vs. context in rspec](http://lmws.net/describe-vs-context-in-rspec)，我觉得他的回答很有趣：

> 根据rspec源码，“context”只是“describe”的一个别名方法，意思是这两种方法在功能上没有区别。但是，通过使用这两种方法，存在上下文差异有助于使您的测试更易于理解。
> 
> “描述”的目的是针对一个功能包装一组测试，而“上下文”是针对同一状态下的一个功能包装一组测试。

所以，依靠这个原则，你会写一个这样的规范：

```
#
# The feature/behaviour I'm currently testing
#
describe "item ordering" do

  # 1st state of the feature/behaviour I'm testing
  context "without a order param" do
    ...
  end

  # 2nd state of the feature/behaviour I'm testing
  context "with a given order column" do
    ..
  end

  # Last state of the feature/behaviour I'm testing
  context "with a given order column + reverse" do
    ..
  end
end 
```

不确定这是否是普遍接受的规则，但我发现这种方法清晰且很容易掌握。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-19T11:24:17.100

根据[文档](https://relishapp.com/rspec/rspec-rails/v/3-8/docs/feature-specs/feature-spec)，扩展 Pierre 的[出色答案](https://stackoverflow.com/a/34065098/3249501)：

> 特性和场景 DSL 分别对应于 describe 和 it。这些方法只是允许功能规范作为客户和验收测试阅读更多内容的别名。

因此，对于那些熟悉 Mocha 术语 describe 和 it（更适合从用户的角度描述测试的行为，因此 Mocha 主要用作前端测试框架）的人，您可以：

*   选择始终且仅使用`describe`and`it`或其他配对
*   选择在需要在特定应用程序状态下进行多个断言/测试`it`的块内使用`context`

使用第二个选项，您仍然可以遵循“...wrap[ping] 一组针对同一状态下的一个功能的测试”的意图。

因此，您的测试可能如下所示：

```
#
# The feature/behaviour I'm currently testing
#
describe "item ordering" do

  # 1st state of the feature/behaviour I'm testing
  context "without an order param" do
    # 1st and only test we want to run in this state
    it "asks the user for missing order param" do
     ...
    end
  end

  # 2nd state of the feature/behaviour I'm testing
  context "with an invalid order param" do
    # 1st test we want to run in this state
    it "validates and rejects order param" do
      ...
    end
    # 2nd test we want to run in this state
    it "returns an error to user" do
      ...
    end
  end

  # 3rd state of the feature/behaviour I'm testing with multiple tests
  context "with a valid order param" do
    it "validates and accepts order param" do
      ...
    end
    it "displays correct price for order" do
      ...
    end
    unless being_audited
      it "secretly charges higher price to user" do
        ...
      end
    end
  end
end 
```

这样您就`feature`可以完全跳过关键字，您可能希望将其用于特定的前端功能，或者如果您正在进行 FDD（功能驱动开发），这可能会让某些人感到不舒服。在此处询问您的开发团队的意见。

警告：不要总是遵循行业标准，想象一下如果我们按照大众汽车的理念模拟我们的所有测试？

# jquery - $.mobile.changePage 没有 ajax

> ID：11643751
> 
> 赞同：1
> 
> 时间：2012-07-25T06:16:20.653
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-mobile, cordova

嗨，我使用了从一个页面导航到另一个页面`$.mobile.changePage('test.html');`。这在 android、symbian 和 blackberry6+ 中运行良好。但我也希望我的应用程序在 blackberry5 上运行。Blackberry5 不支持 ajax，因此`$.mobile.changePage('test.html');`不适用于它。

出于这个原因，我使用`window.open("test.html");`and `window.location.href = "test.html";` Here 它在所有平台上都能完美运行，包括 blackberry4.6+。但现在问题是我在 test.html 中有标题：

```
 <div data-role="header" align="center">

        <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
            <h1>Test.html</h1>
        <a href="MainMenu.html"  data-icon="grid">Menu</a>

    </div> 
```

但是现在后退按钮不起作用。如果我`$.mobile.changePage('test.html');`用于导航，则后退按钮可以正常工作，但不能使用`window.open("test.html");`and `window.location.href = "test.html";`。

因此，我使用会话并在单击后退按钮时强行调用页面。作为：

```
<script type="application/javascript">

            function redirect(url)
            {
                alert("inside redirect:"+url);
                window.location = url;
            }

        </script>

        <div data-role="navbar">
            <ul>

                <li> <a onclick="redirect( getCookie('paged'))" data-icon="back" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Back</a></li>
                <li> <a onclick="redirect(getCookie('paged'))" data-icon="back" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Back</a></li>

            </ul>
        </div> 
```

现在，后退按钮也可以正常工作，但是当我单击硬件后退按钮时，它会再次转到之前的页面。

我如何在`$.mobile.changePage(...)`没有 ajax 的情况下使用，所以我可以将它用于包括 blackberry4.6+ 在内的所有平台

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:59:06.990

我尝试使用全局配置禁用 ajax，但由于某种原因它对我来说不起作用。

我尝试如下，它有效

```
window.location.href="myfile.html"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:59:58.683

您可以使用此功能。

```
$.mobile.changePage('#gototestpage'); 
```

但是有一些限制。您必须像这样将代码保留在另一个 div 中的同一页面中，

```
<div id="gototestpage"> --- Your Code here ----- </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:27:16.867

您是否尝试将全局属性设置`$.mobile.ajaxEnabled`为`false`？请参阅[http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)。据说“jQuery Mobile 将尽可能通过 Ajax 自动处理链接点击和表单提交”。我现在不确定它是否也会影响`$.mobile.changePage`，但也许值得一试......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T14:34:56.247

我已经尝试了这两种解决方案，都对我有用：

```
window.location.href = yourpageurl; 
```

或者

```
$.mobile.ajaxEnabled = false;
$(":mobile-pagecontainer").pagecontainer( "change", yourpageurl); 
```

# python - py2exe 找不到包 Tix

> ID：11643753
> 
> 赞同：5
> 
> 时间：2012-07-25T06:16:28.867
> 
> 标签：python, py2exe, tix

尝试使用 py2exe 为我的 GUI 程序创建可执行文件时，出现以下错误：

```
Traceback (most recent call last):
  File "dopy.py", line 139, in <module>
  File "Tix.pyc", line 225, in __init__
_tkinter.TclError: can't find package Tix 
```

我的程序导入了 Tix，但是 py2exe 没有打包。

我在网上找不到任何有效的解决方案，但最接近的是[http://www.py2exe.org/index.cgi/TixSetup](http://www.py2exe.org/index.cgi/TixSetup)。

不幸的是，将 data_files 更改为我的 Tix 路径（我的 Tix8.4.3 而不是旧的 Tix8.1）也不起作用。

如果没有 Tix，我的程序可执行文件无法启动，py2exe 似乎不想包含它。

查看 py2exe 创建的“dist”文件夹，我注意到有一个 tcl 文件夹，其中包含一个“tcl8.5”文件夹和一个“tk8.5”文件夹，但没有 Tix 文件夹。这些文件夹在我的“Python/tcl/”文件夹下是相同的。

只需将“tix8.4.3”文件夹复制到“dist/tcl/”文件夹中即可包含 Tix DLL 和包文件，现在我的程序可以运行了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T17:32:10.047

使用 py2exe 选项包帮助 py2exe 找到包'Tix'。

# symfony - Symfony 中的 API 和缓存

> ID：11643756
> 
> 赞同：0
> 
> 时间：2012-07-25T06:16:40.367
> 
> 标签：symfony, memcached

我正在 Symfony 2.0 中构建一个具有大量 AJAX 的站点，该站点使用从 API 获取的数据构建页面内容，例如： http: [//mysite.com/api/pictures/list](http://mysite.com/api/pictures/list)

使用存储库处理数据，有时在页面代码中使用存储库，以便您看到的图像字符串可能来自使用 PictureRepository 的控制器，或者通过 Ajax 使用访问 PictureRepository 的 API。

我想使用 Memcached 来减轻数据库负载，但不确定将缓存代码放在哪里。最好缓存数据库结果还是 API 结果？或者差异可以忽略不计？在存储库中拥有 memcached 逻辑意味着只需编写一次代码（无论是通过 API 访问还是直接访问），但似乎尽可能避免访问存储库也是有意义的。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:38:32.987

我的观点是 memcached 应该用于会话存储。出于您的目的，您最好考虑使用[Varnish](https://www.varnish-cache.org/)作为 http 缓存。

之后，您可以使用[ESI](http://en.wikipedia.org/wiki/Edge_Side_Includes)[配置您的应用程序](http://symfony.com/doc/current/book/http_cache.html)。

至少，这就是我们在应用程序中的做法；）

# actionscript-3 - AS3 麦克风隐私设置仅显示 3 个选项卡

> ID：11643757
> 
> 赞同：2
> 
> 时间：2012-07-25T06:16:42.153
> 
> 标签：actionscript-3, flash, firefox, privacy

所以我一直在努力解决这个问题，现在是我寻求帮助的时候了。我有一个闪存录音机，它向用户显示一个弹出窗口，要求他们允许使用以下方法访问麦克风：

**AS3——**

Security.showSettings(SecurityPanel.PRIVACY);

现在，在 chrome 上它可以完美运行！一切都正确显示，如下所示：

[http://postimage.org/image/6e6ldfmpj/](http://postimage.org/image/6e6ldfmpj/)

伟大的。现在的问题是，在 Firefox（我相信 IE9）上它看起来像：

[http://postimage.org/image/mqp1kmcjj/](http://postimage.org/image/mqp1kmcjj/)

请注意第二个（Firefox）中只有 3 个选项卡。好吧，第二个标签是隐私，允许您“允许”或“拒绝”我们的网站访问您的麦克风。因此，该选项卡甚至不可见是一个问题……对此有什么想法吗？我似乎在任何地方都找不到任何人弹出相同的 Flash 对话框，只有 3 个选项卡。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:38:02.703

您可以使用 [Allow][Deny] 对话框：

![允许/拒绝 Flash Player 对话框](../Images/7e19ff587e3ce5766374d432c38a0d50.png)

每当您通过将麦克风/相机附加到 NetStream 来访问它们时，它就会出现。

关于stackoverflow的相关问题： [允许拒绝记住闪存安全面板](https://stackoverflow.com/questions/11318279/allow-deny-remember-flash-security-panel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T13:04:06.277

正如上面提到的 Sunil D.，Firefox 不会在私人/隐身模式下显示某些选项卡。问题是用户不仅可以通过打开新的私人窗口来打开它，还可以通过更改一些常规的 Firefox 首选项来打开它。转到 Firefox 选项，选择“隐私”选项卡并搜索“历史”组。在那里你会看到一个带有“Firefox will:”标签的下拉菜单。在那里你可以选择“从不记得历史”项目，浏览器会告诉你一个小提示：

> Firefox 将使用与隐私浏览相同的设置，并且在您浏览 Web 时不会记住任何历史记录。

然后您的浏览器将重新启动。进一步的研究表明，在进行此类操作后，Firefox 确实开启了隐私模式。Sunil D. 和 Jordan Reiter 都是对的——问题可能发生在私人模式下的用户身上，问题可以通过重新安装 Firefox 及其所有配置（包括该历史设置）来解决。当然，要求用户更改该设置要容易得多。此外，使用 JavaScript 进行私有模式检测可以帮助通知用户这个预期的问题。

# iphone - 在同一视图中动态添加视图

> ID：11643764
> 
> 赞同：0
> 
> 时间：2012-07-25T06:17:50.733
> 
> 标签：iphone, uiview

我有一个包含一些文本字段和选择器视图和一个按钮的视图，当单击按钮时，所有这些文本字段和选择器视图应该再次出现在同一个视图中。现在我应该如何获取初始视图以及如何加载相同的视图单击按钮时显示上一个视图。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:25:25.600

如果我遇到了您的问题，那么此代码可能会对您有所帮助。我只在按钮单击事件上添加文本字段。所以我认为它可能会给你其他观点的想法，你可以对其他观点做同样的事情。我给你.m文件，希望你能写.h文件。这是我的 .m 文件看起来像 -

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize btn = _btn; // IBOutlet of UIButton
@synthesize txtFieldOne = _txtFieldOne; // IBOutlet of UITextField
@synthesize txtFieldTwo = _txtFieldTwo; // IBOutlet of UITextField

- (void)viewDidLoad
{
    newYCoordinateForNewTxtFld = 40.0; // newYCoordinateForNewTxtFld is of type CGFloat
    frame = self.txtFieldTwo.frame;    // frame is of type CGRect

    [super viewDidLoad];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return true;

}

// TextField Delegate Method you might required in your project
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (IBAction)btnClicked:(id)sender
{

    // I am giving u a simple idea, so written simple code. You can make code more usable with ur view by adding various functions, loops, etc ,etc.
    int tagValue = 0;

    UITextField *newTextField = [[UITextField alloc]initWithFrame:CGRectMake(frame.origin.x, frame.origin.y+newYCoordinateForNewTxtFld, frame.size.width, frame.size.height)];
    newTextField.delegate = self;
    newTextField.tag = tagValue++;
    frame = newTextField.frame;
    newTextField.backgroundColor = [UIColor whiteColor];
    [newTextField setBorderStyle:UITextBorderStyleRoundedRect];
    [self.view addSubview:newTextField];

    newTextField = nil;
    newTextField = [[UITextField alloc]initWithFrame:CGRectMake(frame.origin.x, frame.origin.y+newYCoordinateForNewTxtFld, frame.size.width, frame.size.height)];
    newTextField.tag = tagValue++;
    newTextField.delegate = self;
    frame = newTextField.frame;
    newTextField.backgroundColor = [UIColor whiteColor];
    [newTextField setBorderStyle:UITextBorderStyleRoundedRect];
    [self.view addSubview:newTextField];

}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:51:48.137

这是方法：

1.  在您的视图控制器上：添加一个按钮和一个 UIScrollView。

2.  创建一个独立的视图，比如 MyView 包含所有的 TextFields 和选择器。（您可以通过 xib 或通过代码创建它）

3.  在控制器的 ViewDidLoad 方法中，在 UIScrollView 上添加这个 MyView。

4.  在 onButtonPressed 上类似地在 UIScrollView 上添加 MyView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:22:00.117

在按钮单击上设置框架和添加子视图（文本字段和选择器视图），您可以将这些子视图显示到主视图。

否则，您可以最初将它们全部放在主视图中并最初隐藏它们。并在按钮上单击设置它们`Hidden : NO`。

# ruby-on-rails - 如何在我的 NetBeans 6.9.1 中安装调试器

> ID：11643769
> 
> 赞同：2
> 
> 时间：2012-07-25T06:18:20.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在我的 NetBeans 6.9.1 中安装调试器。

我正在使用相互通信的 Web 应用程序，并且我还使用带有 2 个不同 gemset 的*RVM*，它们分别安装了相同版本的 Ruby 和 Rails。

那么如何安装调试器

我试过了，但无法安装这个 gem

```
 ruby-debug-base19 (0.11.25)
 ruby-debug-ide (0.4.16)
 linecache19 (0.5.12) 
```

收到此错误

```
bash: syntax error near unexpected token `('
samarth:~/project/MyECF-Pacer-Service$ gem install ruby-debug-base19
/home/samarth/.rvm/rubies/ruby-1.9.2-p320/bin/gem:4: warning: Insecure world writable     dir /home/samarth/.rvm/gems/ruby-1.9.2-p320@persi/bin in PATH, mode 042777
WARNING:  Error fetching data: Errno::ETIMEDOUT: Connection timed out - connect(2)         (http://rubygems.org/latest_specs.4.8.gz)
ERROR:  Could not find a valid gem 'ruby-debug-base19' (>= 0) in any repository
ERROR:  Possible alternatives: ruby-debug-base19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:34:58.290

我可以通过手动下载以下版本来安装它，将目录更改为下载位置并在以下版本上运行 gem install：

linecache19-0.5.13.gem ruby​​-debug-base19.0.11.26.gem

您可以从以下网址获取它们：[http ://rubyforge.org/projects/ruby-debug19/](http://rubyforge.org/projects/ruby-debug19/)

# java - TeamCity 日志记录和静音测试故事

> ID：11643775
> 
> 赞同：1
> 
> 时间：2012-07-25T06:18:35.937
> 
> 标签：java, logging, ant, teamcity

我有一个 TeamCity Professional 6.5.1 服务器和几个代理，我的项目的一些集成测试正在其中运行。问题是将失败事件打印到日志中，但仅适用于非静音测试。以前我已经配置了 ant 任务以在某些测试失败时打印出消息

```
 <junit printsummary="on"
           haltonfailure="off"
           failureproperty="some-test-failed"
           errorproperty="some-test-failed"
           timeout="300000">
           ...
    </junit>

    <if>
        <equals arg1="${some-test-failed}" arg2="true" />
        <then>
            <echo level="error" message="Some test failed!" />
        </then>
    </if> 
```

但这发生在没有任何静音意识的情况下，并且没有给出测试失败的具体名称。

是否可以在 TC 日志记录中启用有关静音选项的测试失败事件？

# javascript - Javascript跨域操作如何存储cookies？

> ID：11643778
> 
> 赞同：0
> 
> 时间：2012-07-25T06:19:00.310
> 
> 标签：javascript, cross-domain

我想为浏览器开发一个小型 javascript 工具。

该工具可以从当前网页中提取一些内容并将其提交到另一个站点。

整个工作流程分为3个阶段。

第一阶段是从当前页面中提取内容。

第二阶段是登录。用户需要在登录表单中输入他们的用户名和密码。

第三阶段是提交从第一阶段提取的内容。

我的问题是第三阶段需要第二阶段的cookie。

我尝试过 iframe，但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:31:48.747

Cookie 至少需要位于同一个顶级域中，并且 cookie 集必须对顶级域可见。如果您在另一个域上，这不是一个可行的选择。

另一种传递数据的方式是通过表单提交。假设您在外国域的页面上，使用此技术，您可以让您的脚本构建一个登录表单，该表单连同您收集的数据一起提交到您的站点。这也意味着第 2 步和第 3 步合并。不需要饼干。

# scala - Play 2.0 和 SNAPSHOT 依赖项

> ID：11643780
> 
> 赞同：14
> 
> 时间：2012-07-25T06:19:12.637
> 
> 标签：scala, playframework, playframework-2.0, sbt, ivy

我正在混合构建环境中设置我的第一个游戏应用程序。我的公司（到目前为止）对所有东西都使用 maven，我正试图让我的 play 应用程序与我的其他工件很好地交互。

有没有办法让 ivy/sbt/play 以类似于 maven 的方式处理 SNAPSHOT - 即，要么总是从远程存储库更新它们（例如，在构建工作者上），要么使用本地 .m2 存储库，直到依赖“过期”，然后从服务器刷新它。

我已经在我的 Build.scala 中为一个工件声明了一个 SNAPSHOT 依赖项，我希望这个依赖项的本地更新对我的 play 项目可见。在 Maven 方面，我执行以下操作

```
mvn clean install 
```

它（当然）构建并将我的外部工件安装到我的本地 maven 存储库（位于 ~/.m2/repository）。我希望这些更改对我的 play 项目立即可见，但我不知道如何告诉 sbt/play 不要缓存 SNAPSHOT。不管我做什么，这个依赖永远不会在播放中刷新——我必须进入实际的播放常春藤缓存并手动删除依赖以获取任何更改。理想情况下，我希望 sbt/ivy 只解析本地 maven 存储库的路径，而不是在内部缓存它。我的 Build.scala 中有以下内容

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    resolvers += "Local Maven Repository" at "file://" + Path.userHome.absolutePath + "/.m2/repository",
    testOptions in Test := Nil
) 
```

当我在游戏中运行构建时，它会正确使用此存储库，但随后会将结果缓存在常春藤缓存中。有没有我可以告诉 Ivy/sbt 不要这样做的咒语？也许在 ivysettings.xml 中有一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:13:59.327

@kheraud -> clean /reload/ update -> 将不起作用 sbt 在本地缓存它并且不再检查本地 maven 中的新快照

@dprat -> 我一直在寻找网络解决方案，但没有找到更多:(我放弃了 - 只需删除常春藤缓存中的本地包，`play update` 你可以简化它并制作一个脚本

```
rm -rf ~/.ivy2/cache/your.package.foo
play update compile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T14:16:55.817

在其他地方，我看到这归因于 SBT 缺陷[https://groups.google.com/forum/?fromgroups=#!topic/play-framework/O7_cAdUWQII](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/O7_cAdUWQII)

一种解决方案似乎是使用 Nexus。您必须从 maven 部署到 nexus。您将不得不使用 nexus 路径而不是 mvn。您必须安装并运行 nexus！

要安装 nexus，请转到 sonatype 并下载。观看文件权限（阅读说明），但这很简单。您需要将凭据放在 ~/.m2/settings.xml 中。默认为 admin，admin123。

```
<settings>
  <servers>
    <server>
      <id>snapshots</id>
      <username>admin</username>
        <password>admin123</password>
    </server>
  </servers>
</settings> 
```

maven deploy 由 nexus 提供给您，例如：

```
<distributionManagement>
    <repository>
        <id>releases</id>
        <url>http://0.0.0.0:8081/nexus/content/repositories/releases</url>
    </repository>
    <snapshotRepository>
        <id>snapshots</id>
        <url>http://0.0.0.0:8081/nexus/content/repositories/snapshots</url>
    </snapshotRepository>
</distributionManagement> 
```

然后`mvn deploy`将您的资源放在那里。

然后在play sbt中使用

```
resolvers += "Local Nexus Repository" at "http://0.0.0.0:8081/nexus/content/repositories/snapshots" 
```

您仍然需要停止播放，使用播放更新，然后重新开始播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:13:39.997

您可以使用：

*   `play reload`// 重新加载当前的应用构建文件
*   `play update`// 更新应用依赖

在构建您的应用程序之前。我不知道您是否可以将 sbt 配置为不缓存 SNAPSHOT 依赖项，但您可以编写构建过程的脚本以强制重新加载依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T13:02:51.640

我不确定这是如何工作的，但是“另一个人告诉我”——是的，这就是我对此的参考范围——清理播放安装中的“存储库”文件夹可能会有所帮助。

我有一个小“refresh.sh”脚本可以做到这一点：

```
rm -rf /opt/play/repository/cache/com.mycompany
play clean
play update
play run 
```

它似乎对我有用。“/opt/play”是您安装游戏的地方，“com.mycompany”是您需要刷新的地方。

我并不是说这是对的，但如果没有其他方法，它可能值得一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-17T07:29:01.887

从 sbt 版本 0.13.6（2014 年 8 月）开始，可以使用 中的构建设置标志`updateOptions`来`Build.scala/build.sbt`控制 SNAPSHOT 分辨率。

```
updateOptions := updateOptions.value.withLatestSnapshots(false/true) 
```

有关此新功能的文档在[这里](http://www.scala-sbt.org/1.0/docs/sbt-0.13-Tech-Previews.html#Latest+SNAPSHOTs)

github上的相应[拉取请求以获取详细信息。](https://github.com/sbt/sbt/pull/1520/)

# c++ - 日期时间验证为 25-Jul-2012 15:08:23

> ID：11643783
> 
> 赞同：0
> 
> 时间：2012-07-25T06:19:36.397
> 
> 标签：c++, windows

我正在使用以下方法来验证日期。如何在字符串中格式化月份？

```
bool CDateTime :: IsValidDate(char* pcDate) //pcDate = 25-Jul-2012 15:08:23
{
    bool bVal = true;
    int iRet = 0;
    struct tm tmNewTime;   

    iRet = sscanf_s(pcDate, "%d-%d-%d %d:%d:%d", &tmNewTime.tm_mon, &tmNewTime.tm_mday, &tmNewTime.tm_year, &tmNewTime.tm_hour, &tmNewTime.tm_min, &tmNewTime.tm_sec);
    if (iRet == -1)
        bVal = false;

    if (bVal == true)
    {
        tmNewTime.tm_year -= 1900;
        tmNewTime.tm_mon -= 1;
        bVal = IsValidTm(&tmNewTime);
    }
    return bVal;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:25:38.670

使用[strptime](http://pubs.opengroup.org/onlinepubs/007904975/functions/strptime.html)：

```
#include <time.h>
char *str = "25-Jul-2012 15:08:23";
struct tm tm;
if (strptime (str, "%d-%b-%Y %H:%M:%S", &tm) == NULL) {
   /* Bad format !! */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T06:36:05.310

这样做的 C++11 方法是：

```
#include <iostream>
#include <iomanip>
#include <ctime>
#include <chrono>

int main()
{
    auto now = std::chrono::system_clock::now();
    auto now_c = std::chrono::system_clock::to_time_t(now);

    std::cout << "Now is " << std::put_time(std::localtime(&now_c), "%d-%b-%Y %H:%M:%S") << '\n';
} 
```

**注意：**流 I/O 操纵`std::put_time`器尚未在所有编译器中完全实现。例如，GCC 4.7.1 没有它。

# javascript - 如何获取 window.getSelection() 的范围对象？

> ID：11643787
> 
> 赞同：1
> 
> 时间：2012-07-25T06:19:48.320
> 
> 标签：javascript, jquery, range

在 js 函数中，当用户选择了内容时，我想获取作为网页内容一部分的所有节点（HTML 元素）。

现在，我知道 window.getSelection() 会给我一个选择对象。此外，必须将此选择对象转换为范围对象，然后才能获得属于该选择的节点（HTML 元素）列表。

如何获取范围对象？根据我的阅读，不同的浏览器对范围对象有不同的实现......最初，我将只在 Google Chrome 中使用这个 js 函数......所以代码应该在 Google Chrome 中完美运行......但我确实希望代码能正常工作跨越所有/大多数新版本的谷歌浏览器......代码可能是 JS 或纯 Jquery。

还有一个问题——我是否必须为此使用像“Rangy”这样的js库——http: [//code.google.com/p/rangy/](http://code.google.com/p/rangy/) ？或者这可以使用纯js或jquery代码来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T08:43:27.867

除了 IE < 9，所有主流浏览器都实现了相同的选择和范围标准，并且已经这样做了多年。有一些差异，但 API 是相同的。如果您不介意 IE < 9，那么您真的不需要使用 Rangy（在 gzip 压缩之前它大约 40KB），尽管它确实有一种方便的方法来获取您可能会发现有用的节点。

要获取选择范围内的节点，您可以像这样获取选定范围：

```
var sel = window.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
} 
```

要从范围中获取节点，您可以使用[此答案](https://stackoverflow.com/a/7931003/96100)中的代码。如果您使用 Rangy，它将是

```
var sel = rangy.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var nodes = range.getNodes();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:10:57.887

我可以看到您面临的问题不是获取范围对象，而是在选择中找到 HTML 节点。在[此演示](http://rangy.googlecode.com/svn/trunk/demos/core.html)中，如果您选择文本并单击“获取选择 html”按钮，您将获得包括 DOM 在内的选定文本。一旦你得到它，你就可以使用 jquery 代码找到一个 DOM 节点列表。如果您需要更多信息，请告诉我。

# php - 使用 jquery/AJax 创建表单

> ID：11643793
> 
> 赞同：-1
> 
> 时间：2012-07-25T06:20:28.477
> 
> 标签：php, jquery, html, ajax

我在 Div 中有一个简单的联系我们表单。我想要的是当用户提交表单时，经过适当的验证，而不是重定向到其他感谢页面，我只想从该 Div 中删除联系表单并向他展示“谢谢”留言

我怎么做 ？演示/下载代码将很有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:26:00.487

一个简单、出色且广泛使用的 jQuery 表单插件：

[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

您可以使用此插件使用 ajax 提交表单，然后在成功回调时显示适当的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:38:21.540

```
 $("#submitBtn").click(function () {
$("#divId").html("Loading PleaseWait"); //divId contain all the text field
    $.ajax({

                type: "POST",
                data: "data=" + $("#data").val(),   //id of the text field (value)
                url: "demo.php",                    //page name to which u r passing the value
                success: function(msg){
                if($("#divId").html(msg))
                { 
                    $("#divId").html("Thank You");
                }

            }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:23:19.203

稍微搜索一下会很棒；）

```
<div id="form>
[ Your HTML Form]
</div>
<script>
$([form]).submit(function () {
   $("#id").html("Thank You");
});
</script> 
```

# android - Android：客户端/网络服务编程

> ID：11643794
> 
> 赞同：0
> 
> 时间：2012-07-25T06:20:30.700
> 
> 标签：android, web-services, wamp, client-side

我正在为我的以下问题寻找一个简单的例子。我有一个带有一些网络服务的服务器端，放在`WAMP`我笔记本电脑的服务器上。在我的 Android 项目中，我需要通过客户端编程来使用这些网络服务。

最好和最简单的方法是什么？（我看到的所有示例都对我不起作用或者不是简单的 enghuf 以了解那里发生的事情......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:37:12.843

以下是一些教程/资源：

1.  [如何将Android与PHP、MySQL连接起来](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)
2.  [使用 PHP、MySQL 和 SQLite 进行 Android 登录和注册](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

# jquery - 自动完成仅适用于加载组件

> ID：11643796
> 
> 赞同：1
> 
> 时间：2012-07-25T06:20:53.417
> 
> 标签：jquery, autocomplete

我正在使用 jquery 自动完成插件来提供自动建议。

它仅加载页面的 onload 元素。

如何使它适用于通过 ajax 加载 jQuery 的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:27:00.453

在附加元素后调用`$(...).autocomplete(...)`（再次），例如在 ajax 的成功回调中。

例如：

```
$(...).ajax({
    ...
    success: function(respond) {
        $(...).append(respond); // add new elements
        $(...).autocomplete(...); // add autocomplete to them
    }
    ...
}); 
```

Ps：如果你有一个自动完成元素onload，并且只想改变他们的选项，你可以使用`source`automplete的参数来动态获取值（无需再次设置自动完成）。

# sql-server-2008 - SQL Mail 不适用于 64 位版本的 SQL Server

> ID：11643797
> 
> 赞同：-1
> 
> 时间：2012-07-25T06:20:59.610
> 
> 标签：sql-server-2008, exec, sqlmail

我的要求是每当更新名为“CustomerInfo”的表时，我想从 MS SQL Server 发送电子邮件。但是每当更新表时，我都会收到错误消息“SQL Mail 不适用于 64 位版本的 SQL Server”。

我遵循的步骤 -

1.  [从 - http://www.datasprings.com/resources/articles-information/creating-email-triggers-in-sql-server-2005](http://www.datasprings.com/resources/articles-information/creating-email-triggers-in-sql-server-2005)创建表和触发器
2.  然后配置 xp_sendmail

    EXEC sp_configure '显示高级选项', '1'; 重新配置 exec sp_configure 'SQL Mail XPs', 1 重新配置

3.  然后按照此处给出的配置数据库邮件[http://www.codeproject.com/Articles/29060/SQL-SERVER-2008-Configure-Database-Mail-Send-Email](http://www.codeproject.com/Articles/29060/SQL-SERVER-2008-Configure-Database-Mail-Send-Email)

现在当我更新表格时出现错误 -

```
SQL Mail does not work with the 64-bit version of SQL Server 
```

任何帮助是极大的赞赏 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:07:47.483

SQL Mail 已弃用。使用[数据库邮件](http://msdn.microsoft.com/en-us/library/ms175887%28v=sql.105%29.aspx)。

数据库邮件不需要 MAPI 配置文件，并且可以通过 SMTP 发送邮件。

# django - django 管理员列表页面查看

> ID：11643799
> 
> 赞同：0
> 
> 时间：2012-07-25T06:21:13.023
> 
> 标签：django, django-admin

如何使用视图自定义 django 管理列表页面以及如何在模板 change_list.html 中传递值以在[django 管理列表页面中显示新字段](https://stackoverflow.com/questions/11611494/django-admin-list-page)

我试图在管理员中编写列表视图：

```
def get_urls(self):
        urls = super(BeneficiaryAdmin, self).get_urls()
        my_urls = patterns('',
            (r'^list_view/$', self.list_view)
        )
        return my_urls + urls

def list_view(self, request):
        print "kkkkkkkkkkkkkkkkkkkkkkkkkk"
        # custom view which should return an HttpResponse
        return HttpResponseRedirect("/dashboard/member_management/beneficiary/") 
```

但是 list_view 是不可调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:23:54.537

你读过[Overriding admin templates](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:13:19.593

```
def changelist_view(self, request, extra_context=None):
        from django.contrib.admin.views.main import ChangeList
        cl = ChangeList(request, self.model, list(self.list_display), 
                        self.list_display_links, self.list_filter, 
                        self.date_hierarchy, self.search_fields,  
                        self.list_select_related, 
                        self.list_per_page, 
                        self.list_editable, 
                        self)

        if extra_context is None: 
            extra_context = {}
return super(BeneficiaryAdmin, self).changelist_view(request, extra_context=extra_context) 
```

我们可以使用它来编辑列表视图页面。

# emacs - 标题中的组织模式任务日期 - 可能吗？

> ID：11643800
> 
> 赞同：2
> 
> 时间：2012-07-25T06:21:19.723
> 
> 标签：emacs, org-mode

我有一个任务，需要每天完成，截止日期在第二天。因此，如果我在我的 .org 文件中写入如下内容：

```
** TODO Daily report
DEADLINE: <2012-07-27 Fri +1d> 
SCHEDULED: <2012-07-26 Thu +1d> 
```

这会产生相当讨厌的议程，每天有两行相同的文本“每日报告”：

```
Friday     27 July 2012
Work:       Scheduled:  TODO Daily report
Work:       Deadline:   TODO Daily report 
```

我想要的是能够在“每日报告”文本之后看到日期，并在该行对应的那一天添加日期。例如：

```
Friday     27 July 2012
Work:       Scheduled:  TODO Daily report for 27 July 2012
Work:       Deadline:   TODO Daily report for 26 July 2012 
```

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:18:11.737

您可以将以下内容添加到 ~/.emacs 以避免冗余：

```
(setq org-agenda-skip-scheduled-if-deadline-is-shown t) 
```

从这个变量的文档中：

```
In the agenda of today, an entry can show up multiple times because
it is both scheduled and has a nearby deadline, and maybe a plain time
stamp as well.
When this variable is t, then only the deadline is shown and the fact that
the entry is scheduled today or was scheduled previously is not shown.
When this variable is nil, the entry will be shown several times.  When
the variable is the symbol `not-today', then skip scheduled previously,
but not scheduled today. 
```

如果您希望保留预定行而不是截止日期，则更新版本的 org-mode 还允许以下设置：

```
(setq org-agenda-skip-deadline-prewarning-if-scheduled t) 
```

从文档中：

```
This will apply on all days where a prewarning for the deadline would
be shown, but not at the day when the entry is actually due.  On that day,
the deadline will be shown anyway. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T07:33:01.343

不，这是不可能的。

我会简单地使用`SCHEDULED`, not `DEADLINE`，因为`SCHEDULED`这里隐含的意思是“今天就做一天”，因此`DEADLINE`cookie 引入了您观察到的冗余。

# c# - 正则表达式 C# - 如何匹配类的方法和属性名称

> ID：11643801
> 
> 赞同：1
> 
> 时间：2012-07-25T06:21:22.557
> 
> 标签：c#, regex, pattern-matching

我想匹配方法名称（带参数）和属性名称。我不想在匹配中包含访问器。例如，我得到了这样的课程：

```
public class test
{
    public static string NA = "n/a";

    public static DateTime DateParser(string dateToBeParsed)
    {
        DateTime returnValue = new DateTime();
        DateTime.TryParse(dateToBeParsed, GetCulture(), System.Globalization.DateTimeStyles.AssumeLocal , out returnValue);
        return returnValue;
    }
} 
```

对于类名，我使用这种正则表达式：**(?<=class\s)[^\s]** + 对于我尝试这样的方法：**[^\s]+(?=()**但这将选择所有具有**(**的文本。对于方法，我需要选择具有**(**以及诸如公共、私有和受保护的访问器之类的访问器。如何在不包括在最终匹配中的情况下执行此操作？我只需要括号内的方法名称和参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:17:55.417

**编辑**：使用这个`Regex`

```
(?:public\s|private\s|protected\s)?[\s\w]*\s+(?<methodName>\w+)\s*\(\s*(?:(ref\s|/in\s|out\s)?\s*(?<parameterType>\w+)\s+(?<parameter>\w+)\s*,?\s*)+\) 
```

并获取名为`methodName`and`parameterType`和的组`parameter`。

你的代码可以是这样的：

```
var inputString0 = "public void test(string name, out int value)\r\nvoid test(string name, int value)";
foreach (Match match in Regex.Matches(inputString0, @"(?:public\s|private\s|protected\s)?[\s\w]*\s+(?<methodName>\w+)\s*\(\s*(?:(ref\s|/in\s|out\s)?\s*(?<parameterType>[\w\?\[\]]+)\s+(?<parameter>\w+)\s*,?\s*)+\)"))
{
    var methodName = match.Groups["methodName"].Value;
    var typeParameterPair = new Dictionary<string, string>();
    int i = 0;
    foreach (var capture in match.Groups["parameterType"].Captures)
    {
        typeParameterPair.Add(match.Groups["parameterType"].Captures[i].Value, match.Groups["parameter"].Captures[i].Value);
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:25:28.810

使用反射怎么样？

```
class Program
{
    static void Main(string[] args)
    {
        string assemblyName = Path.Combine(Path.GetTempPath(), string.Format("temp{0}.dll", Guid.NewGuid()));
        CSharpCodeProvider codeProvider = new CSharpCodeProvider();
        CompilerParameters compilerParameters = new CompilerParameters(new string[]
        {
            "System.dll",
            "Microsoft.CSharp.dll",
        }, assemblyName);

        CompilerResults cr = codeProvider.CompileAssemblyFromSource(compilerParameters, File.ReadAllText("Program.cs"));

        if (cr.Errors.Count > 0)
        {
            foreach (CompilerError error in cr.Errors)
            {
                Console.WriteLine(error.ErrorText);
            }
        }
        else
        {
            AppDomain appDomain = AppDomain.CreateDomain("volatile");
            Proxy p = (Proxy)appDomain.CreateInstanceAndUnwrap(Assembly.GetExecutingAssembly().FullName, typeof(Proxy).FullName);
            p.ShowTypesStructure(assemblyName);
            AppDomain.Unload(appDomain);
            File.Delete(assemblyName);
        }
        Console.ReadLine();
    }
}

public class Proxy : MarshalByRefObject
{
    public void ShowTypesStructure(string assemblyName)
    {
        Assembly assembly = Assembly.LoadFrom(assemblyName);
        Type[] types = assembly.GetTypes();
        foreach (Type type in types)
        {
            Console.WriteLine(type.Name);
            MethodInfo[] mis = type.GetMethods();
            foreach (MethodInfo mi in mis)
            {
                Console.WriteLine("\t" + mi.Name);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:37:37.063

用正则表达式来做到这一点相当困难。

您可以尝试创建一个适当的解析器。[Irony](http://irony.codeplex.com/)库易于使用，其中一个示例是 C# 解析器。

但是，如果您想使用正则表达式，可以尝试使用[Expresso 之](http://www.ultrapico.com/Expresso.htm)类的工具，它可以帮助您测试和构建正则表达式。

你还应该写很多单元测试——当你修改一个正则表达式时很容易破坏一些东西。

很抱歉没有提供“使用此表达式”之类的“具体”帮助，但我认为如果您想避免使用解析器，那真的需要做很多工作:)

# mongodb - Ubuntu 上的 Mongodb 实例数

> ID：11643809
> 
> 赞同：-1
> 
> 时间：2012-07-25T06:21:45.753
> 
> 标签：mongodb, ubuntu

有没有一种方法可以计算在给定时间在单个 ubuntu 服务器上运行了多少个“mongod”实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T08:08:40.473

在 Ubuntu 上，`ps`正在运行的`mongod`进程的输出将如下所示 -

mongodb 2210 3.3 1.5 259012 15300 pts/0 Dl 11:48 0:00 mongod --dbpath /var/tmp/mongotest --logpath /var/tmp/mongotest_log --port 3001

所以你可以遵循 Sergio 的解决方案。如果您想排除配置服务器元素（因为它也是一个 mongod 进程，请参阅我的评论）

另一种检查方法是运行 -

```
ls /etc/mongodb*conf | wc -l 
```

因为每个 mongod 实例**都应该**（如果按照推荐安装）它自己的配置文件`etc`，例如 /etc/mongodb.conf、/etc/mongodb1.conf、/etc/mongodb2.conf 等。

每个 mongod 实例都有自己的 logpath 和 datapath，您应该在`etc`. 例如 -

```
# mongodb1.conf

dbpath=/var/lib/mongodb1

#where to log
logpath=/var/log/mongodb/mongodb1.log

port = 30001 
```

所以前面的命令也将适用。

```
ls /var/lib/mongodb* | wc -l

ls /var/log/mongodb/mongodb*log | wc -l 
```

您可能对我在[dba.stackexchange.com](https://dba.stackexchange.com/questions/19067/upstart-script-in-ubuntu-for-mongodb)上的回答感兴趣，以获取有关如何使用 Upstart 在 Ubuntu 上运行多个 mongodb 实例的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:26:06.943

你总是可以使用一些 unix-fu。

```
ps aux | grep mongod | grep -v grep |  wc -l 
```

`grep -v grep`部分是排除 grep 自匹配。如果有人知道更好的解决方案，请改进。

# java - 如何使用 Java 在印地语和拉丁语字符之间音译印地语文本？

> ID：11643810
> 
> 赞同：3
> 
> 时间：2012-07-25T06:21:47.647
> 
> 标签：java, transliteration, hindi

如何使用 Java 将用英文字母书写的印地语意思转换为印地语？

例如。

输入文本为：anil NE lath marke apko Ganga me hi Fenk diya。

在印地语

输出文本为：अनिल ने लात मार्के आपको गंगा में ही फेंक दिया

如何使用 Java 或任何 Java API 进行转换？

我喜欢谷歌以外的一个名为 Jitter 的 API，但出现错误

```
Source is: inko
Input is: a2b45xdsfsdf
Output is: 
Matches is: 0
Exception in thread "main" org.jtr.transliterate.CharacterParseException: No valid delimiter found for start of expression
    at org.jtr.transliterate.Perl5Parser.parsePerlString(Perl5Parser.java:133) 
```

源代码是

```
/*
 * Copyright (c) 2001-2005, Nicholas Cull
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 *  * Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 *  * Neither the name "jtr" nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

package org.jtr.transliterate;

/**
 * A utility class for providing Perl 5 syntactic sugar on top of the
 * {@link CharacterParser} class. This parses Perl-style transliteration strings
 * into a form suitable for <code>CharacterParser</code>. For instance, the
 * string <code>"tr/a-zA-Z/0-9a-zA-Z/cd"</code> is parsed into two strings
 * <code>"a-zA-Z"</code>, <code>"0-9a-zA-Z"</code>, and the flags
 * <code>COMPLEMENT_MASK | DELETE_UNREPLACEABLES_MASK</code>.
 *
 * @author <a href="mailto:run2000@users.sourceforge.net">Nicholas Cull</a>
 * @version $Id: Perl5Parser.java,v 1.3 2005/03/14 06:40:18 run2000 Exp $
 * @since 1.1
 */
public final class Perl5Parser {

    /** Initial state of the sequence parser. */
    private static final short INITIAL_STATE = 0;
    /** Sequence parser encountered an escape character. */
    private static final short ESCAPE_STATE = 1;
    /** Sequence parser encountered the delimiter. */
    private static final short DELIMITER_STATE = 2;

    /** Private constructor to indicate this is a static class. */
    private Perl5Parser() {
    }

    /**
     * <p>Parses the given string in Perl syntax and returns a populated
     * {@link CharacterReplacer} object that can be used to perform the
     * specified transliteration.</p>
     *
     * <p>This is a simple factory method that calls the {@link #parsePerlString
     * parsePerlString} method below, creates a new {@link CharacterReplacer}
     * object and populates it with the results.</p>
     *
     * @param source the String to be parsed and compiled
     * @return a new CharacterReplacer ready for transliterations
     * @throws CharacterParseException something went wrong during parsing
     * @throws NullPointerException source is <code>null</code>
     */
    public static CharacterReplacer makeReplacer( String source )
            throws CharacterParseException {

        StringBuffer input = new StringBuffer();
        StringBuffer output = new StringBuffer();
        int flags = 0;
        CharacterReplacer replacer;

        flags = parsePerlString( source, input, output );
        replacer = new CharacterReplacer( input.toString(), output.toString() );
        replacer.setFlags( flags );
        return replacer;
    }

    /**
     * <p>Parses the given Perl-style transliteration string into two parts:</p>
     * <ol>
     * <li>The input character string to be transliterated
     * <li>The replacement character string
     * </ol>
     * <p>These strings can then be fed into the constructors for
     * {@link CharacterReplacer}. It also returns any flags encountered at the
     * end of the string into a form suitable for CharacterReplacer.</p>
     *
     * @param source the string to be parsed
     * @param input (out) the characters to be transliterated
     * @param output (out) the replacement characters
     * @return any flags parsed at the end of the character sequence
     * @throws CharacterParseException there was a problem parsing the source
     * String
     * @throws NullPointerException source is <code>null</code>
     */
    public static int parsePerlString( String source, StringBuffer input,
            StringBuffer output ) throws CharacterParseException {

        int length = source.length();
        int pos = 0;
        int flags = 0;
        char delimiter;

        if( length < 3 ) {
            throw new CharacterParseException(
                    "Source is too small to be parsed", pos );
        }

        if( input == null || output == null ) {
            throw new CharacterParseException(
                    "String buffers have not been initialized", pos );
        }

        if( source.startsWith( "tr" )) {
            pos = 2;
        } else if( source.startsWith( "y" )) {
            pos = 1;
        }

        delimiter = source.charAt( pos );
        if( delimiter == '-' || delimiter == '\\' ||
                Character.isLetterOrDigit( delimiter )) {
            throw new CharacterParseException(
                    "No valid delimiter found for start of expression", pos );
        }

        pos++;
        pos = parseSequence( source, pos, delimiter, input );

        if( pos == length ) {
            throw new CharacterParseException(
                    "Cannot parse replacement sequence, no character sequence found",
                    pos );
        }

        pos = parseSequence( source, pos, delimiter, output );

        // Parse any flags at the end
        while( pos < length ) {
            char flag = source.charAt( pos );
            switch( flag ) {
                case 'c':
                    flags = flags | CharacterParser.COMPLEMENT_MASK;
                    break;

                case 'd':
                    flags = flags | CharacterParser.DELETE_UNREPLACEABLES_MASK;
                    break;

                case 's':
                    flags = flags | CharacterParser.SQUASH_DUPLICATES_MASK;
                    break;

                default:
                    throw new CharacterParseException(
                            "Unknown flag passed into character parser", pos );
            }
            pos++;
        }
        return flags;
    }

    /**
     * Parse the first or second character sequence and place the parsed result
     * into the given StringBuffer. The source string is scanned from initial
     * position pos until an unescaped delimiter character is found. We use a
     * simple finite state machine to determine when we encounter an escape
     * character or a delimiter.
     *
     * @param source the source String to be scanned
     * @param pos the starting position for the scan
     * @param delimiter the delimiter character to indicate the end of the
     * sequence
     * @param buffer the character buffer to store the parsed result
     * @return the new position of the parser
     * @throws NullPointerException source or buffer are <code>null</code>
     */
    private static int parseSequence( String source, int pos, char delimiter,
                                      StringBuffer buffer ) {
        int length = source.length();
        short state = INITIAL_STATE;
        int startPos = pos;
        char curr = '\0';

        while(( pos < length ) && ( state != DELIMITER_STATE )) {
            curr = source.charAt( pos );
            switch( state ) {
                case INITIAL_STATE:
                    if( curr == '\\' ) {
                        state = ESCAPE_STATE;
                    } else if( curr == delimiter ) {
                        // Copy the current source to the buffer
                        buffer.append( source.substring( startPos, pos ));
                        state = DELIMITER_STATE;
                    }
                    break;

                case ESCAPE_STATE:
                    if( curr == delimiter ) {
                        // Previous character was to escape the delimiter.
                        // Have to add the previous characters to the buffer.
                        buffer.append( source.substring( startPos, pos - 1 ));
                        startPos = pos;
                    }
                    state = INITIAL_STATE;
                    break;
            }
            pos++;
        }

        if( state != DELIMITER_STATE ) {
            buffer.append( source.substring( startPos ));
        }
        return pos;
    }

    /**
     * A simple test case for this class.
     *
     * @param args ignored
     * @throws Exception if an exception is encountered, throw it to the caller
     */
    public static void main( String args[] ) throws Exception {
        String source = "inko";
        String input = "a2b45xdsfsdf";
        String output = "";
        int matches = 0;

        try {
            CharacterReplacer replacer = makeReplacer( source );
            output = replacer.doReplacement( input );
            matches = replacer.getMatches();
        } finally {
            System.out.println( "Source is: " + source );
            System.out.println( "Input is: " + input );
            System.out.println( "Output is: " + output );
            System.out.println( "Matches is: " + matches );
        }
    }
}

at org.jtr.transliterate.Perl5Parser.makeReplacer(Perl5Parser.java:82)
at org.jtr.transliterate.Perl5Parser.main(Perl5Parser.java:240) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:39:40.137

如果我对您的理解正确，那么您希望能够音译成印地语文本。（即从一种*书写系统*转换为另一种书写系统）。这通常比翻译容易得多（即从一种*语言*转换为另一种语言）。

我不知道有一个图书馆可以做到这一点，但是[这个关于印地语音译的维基词典页面](https://en.wiktionary.org/wiki/Wiktionary%3aHindi_transliteration)可能会让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:52:23.787

I seen an android dictionary hinkhoj which does the same thing without internet access. So definitely it is possible in java.

Replacing each letter or group of letters with corresponding Hindi unicode will work. Like replacing 'ma' with '\u092E'

Sample working program;

```
public class EnglishToHindiTranslator {

    static Map<String, String> phoneticMap = new HashMap<String, String>();
    static Map<String, String> maatraMap = new HashMap<String, String>();

    static {
        phoneticMap.put("ma","\u092E");
        phoneticMap.put("ta","\u0924");
        phoneticMap.put("t","\u0924\u094D");
        phoneticMap.put("ra","\u0930");
        maatraMap.put("a","\u093E");
    }

    public static void main(String[] args) throws UnsupportedEncodingException {
        String engWord = "maatra";
        engWord = engWord.replaceAll("ma",phoneticMap.get("ma") );
        engWord = engWord.replaceAll("t",phoneticMap.get("t") );
        engWord = engWord.replaceAll("ra",phoneticMap.get("ra") );
        engWord = engWord.replaceAll("a",maatraMap.get("a") );

        System.out.println(new String(engWord.getBytes("UTF-8")));
    }
} 
```

# javascript - 如何限制选择框中选项名称的大小？

> ID：11643811
> 
> 赞同：0
> 
> 时间：2012-07-25T06:21:54.593
> 
> 标签：javascript, html, jsp, drop-down-menu

我正在从数据库中检索选择框的选项。我想限制下拉框中选项值的宽度。

例如：如果我只需要 8 个字符长，数据库中的值是“ELEPHANT GROUP”在我的下拉列表中。下拉框中要显示的值是“大象”

我希望我的选项值限制为特定大小。谁能帮我解决这个问题。？

简要信息：

我的开发人员在他的一个表单上有一个动态列表框。即：管理用户可以创建显示在选择框中供一般用户选择的选项。我们的目的是让管理员用户创建最多约 50 个字符的选项，但我们的业务需求不允许我们限制管理员用户创建的选项名称的大小。这让我们对数百个字符宽的 SelectBox 的可能性持开放态度，将所有表格格式扔出窗口并导致屏幕水平滚动。几天来我们一直在无休止地争论这个问题，显然不能限制选项名称的字符输入。有没有办法操纵选择框的显示以防止它超过一定数量的字符宽但仍然显示很长的选项名称？

希望现在你已经完全解决了我的问题。请帮助我解决它。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:26:35.797

你可以做一个[`substring()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)得到8个第一个字符来显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:52:49.180

```
enter code here

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>

<BODY>

<select id = "mysel" onchange = "show()">
<option value = 0>Select one ....</option>
<option value = "January">January</option>
<option value = "February">February</option>
<option value = "March">March</option>
</select>
<br>
<input type = "text" id = "month" size = "1" readonly>

<script type = "text/javascript">

function show() {
var val = document.getElementById("mysel").value;
val = val.substring(0,3);
alert (val);
document.getElementById("month").value = val;
}

</script>
</BODY>
</HTML> 
```

/*通过使用子字符串你可以做到这一点。否则，您可以使用支持 CSS 的较新浏览器指定带有样式的框的宽度。唯一的问题是，你看不到整个单词。它切断它。希望对你有所帮助*/

# android - 在 android 媒体播放器中添加字幕轨道

> ID：11643814
> 
> 赞同：2
> 
> 时间：2012-07-25T06:22:06.940
> 
> 标签：android, android-mediaplayer

嗨，我是 Android 开发的新手。我想在我的 android 应用程序中为媒体播放器添加字幕。我已经搜索并找到了一个方法，即 addTimedTextSource(...) 但它给出了错误 java.lang.NoSuchMethodError: android.media.MediaPlayer.addTimedTextSource

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.video_view);
        mp = new MediaPlayer();
//        vw = (VideoView)findViewById(R.id.video_intent);
        Intent intent = getIntent();
        path = intent.getStringExtra("path");
        Log.d("File path ::::::::::::::::::",path);

        try {
            mp.setDataSource("file://"+path);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mp.start();
        String mimeType = getMimeType("file://mnt/sdcard/BarbieGirl.srt");
//      mp.selectTrack(index);
        try {
            mp.addTimedTextSource(path, mimeType);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    @Override
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onPrepared(MediaPlayer mp) {
        // TODO Auto-generated method stub

    } 
```

谁能告诉我如何使用它或任何关于如何在 android 中显示字幕轨道的想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:38:20.597

如果您收到该错误，可能是因为您在低于 SDK 16 (Jelly Bean) 的设备上运行此代码。您应该将其包装在 SDK 门中：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
   mp.addTimedTextSource(...
} 
```

# c# - .NET 中椭圆的最大尺寸是多少？

> ID：11643815
> 
> 赞同：0
> 
> 时间：2012-07-25T06:22:08.617
> 
> 标签：c#, .net, graphics, gdi+, system.drawing

我正在尝试使用一个`System.Drawing.Graphics`对象来绘制一个非常大（数百万像素）的椭圆（实际上是一个圆），尽管由于我正在绘制的图片框大小合理，我应该没有图像或接近一条线的东西，取决于椭圆的位置）。我正在使用 System.Drawing.Graphics.DrawEllipse(Pen, RectangleF) 来绘制椭圆。我可以成功构造一个 RectangleF 来描述我想要的尺寸。例如，这个`ToString`'d`RectangleF`描述了一个比我的实际可见视图空间大得多的椭圆，并且当传递给 DrawElipse 时实际上应该什么都不做（因为椭圆的边缘没有任何部分与可见区域相交）：

```
{X=-9.065709E+08,Y=-9.065711E+08,Width=1.813143E+09,Height=1.813143E+09} 
```

相反，试图绘制一个以它为界的椭圆`RectangleF`会产生一个`OverflowException`. 该`DrawElipse`方法没有被指定为永远抛出一个`OverflowException`，[微软文档](http://msdn.microsoft.com/en-us/library/zd0737f9.aspx)也没有给出任何迹象表明某些`RectangleF`s 是不合适的参数。

`DrawElipse`在休息之前，我可以画出多大的椭圆，它的中心可以离 0 多远？

# c - C中局部变量的内存分配

> ID：11643817
> 
> 赞同：0
> 
> 时间：2012-07-25T06:22:27.150
> 
> 标签：c, memory-management

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)
> [C中变量的范围与生命周期](https://stackoverflow.com/questions/7632120/scope-vs-life-of-variable-in-c)

```
int *p;

void foo()
{
    int i = 5;
    p = &i;
}

void foo1()
{
    printf("%d\n", *p);
}

int main()
{
   foo();
   foo1();
   return 0;
} 
```

输出：5（foo1() 打印 i 的值）

注意：我在 Linux 上运行这个程序

据我所知，局部自动变量的范围仅限于块/函数的生命周期。

1.  foo() 中的这个变量 i 存储在哪个内存段中？或者函数的所有局部变量在哪里存储？
2.  如何从另一个功能访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:29:59.513

`*p`访问in时，您正在调用未定义的行为`foo1()`。如果您添加了这样的功能：

```
void do_very_little(void)
{
    char buffer[] = "abcdef";
    puts(buffer);
} 
```

`foo()`并在调用and之间调用它`foo1()`，您可能会得到不同的输出。这不能保证；关于未定义行为的一个有趣的事情是任何事情都可能发生，你没有理由抱怨。

# java - GXT 重绘 CollapsePanel 标题

> ID：11643819
> 
> 赞同：0
> 
> 时间：2012-07-25T06:22:33.393
> 
> 标签：java, gxt

我遇到了 CollapsePanel 的问题。

当事件被触发时，我需要更改它的标题。到目前为止，我覆盖了 BorderLayout 的 createCollapsePanel 并向我需要的事件添加了一个侦听器：

```
final BorderLayout layout = new BorderLayout()
{

    @Override
    protected CollapsePanel createCollapsePanel(final ContentPanel panel, final BorderLayoutData data)
    {
        final CollapsePanel result = super.createCollapsePanel(panel, data);
        panel.getHeader().addListener(Events.Change, new Listener<BaseEvent>()
        {
            @Override
            public void handleEvent(BaseEvent be)
            {
                result.setTitle(panel.getHeading());
                result.repaint();
                layout();
            }
        });
        result.setTitle(panel.getHeading());
        return result;
    }
}; 
```

上面的代码执行得很好，但是结果 CollapsePanel 永远不会得到新的标题。

有什么我想念的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:31:24.900

您可能需要接收您正在收听的事件......

```
result.sinkEvents(Events.Change); 
```

（我切换到 gxt3，它的做法有点不同，所以我没有测试那条线。我不确定你是否需要 Events.Change 或 Events.OnChange）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:56:22.757

```
 final BorderLayout layout = new BorderLayout()
    {
        @Override
        protected CollapsePanel createCollapsePanel(final ContentPanel panel, final BorderLayoutData data)
        {
            final CollapsePanel result = super.createCollapsePanel(panel, data);

            result.sinkEvents(Events.Change.getEventCode());
            panel.getHeader().addListener(Events.Change, new Listener<BaseEvent>()
            {
                @Override
                public void handleEvent(BaseEvent be)
                {
                    result.getElement().getElementsByTagName("span").getItem(0).setInnerText(panel.getHeading());
                    PcTreeUI.this.layout(true);
                }
            });
            result.setTitle(panel.getHeading());
            return result;
        }
    }; 
```

# c# - 从图形转换为位图时为空位图

> ID：11643820
> 
> 赞同：2
> 
> 时间：2012-07-25T06:22:49.460
> 
> 标签：c#, winforms, gdi+

我使用一个库来从这里绘制大纲文本[http://www.codeproject.com/Articles/42529/Outline-Text](http://www.codeproject.com/Articles/42529/Outline-Text)

我为测试编写了一个函数我试图将outlineText图形对象保存为位图图形对象正确绘制在控件上但是当我将它保存为图像时结果图像为空

```
 Graphics graphic = this .CreateGraphics();
        graphic.SmoothingMode = SmoothingMode.AntiAlias;
        StringFormat fmt = new StringFormat(StringFormat.GenericTypographic);
        Int32 lNum = (Int32)Math.Log((Double)this.TextAlign, 2);
        fmt.LineAlignment = (StringAlignment)(lNum / 4);
        fmt.Alignment = (StringAlignment)(lNum % 4);

        OutlineText m_OutlineText = new OutlineText();            

        m_OutlineText.EnableShadow(true);
        m_OutlineText.SetNullShadow();
        m_OutlineText.Shadow(ShadowColor, ShadowSize, new Point(4, 4));
        FontFamily fontFamily = this.Font.FontFamily;
        float fStartX = 0.0f;
        float fStartY = 0.0f;
        float fDestWidth = 0.0f;
        float fDestHeight = 0.0f;
        m_OutlineText.MeasureString(
            graphic,
            fontFamily,
            this.Font.Style,
            (int)this.Font.Size,
            this.Text,
            new Point(10, 10),
            fmt,
            ref fStartX,
            ref fStartY,
            ref fDestWidth,
            ref fDestHeight);

        LinearGradientBrush gradientBrush = new LinearGradientBrush(new RectangleF(fStartX, fStartY, fDestWidth - (fStartX - 10), fDestHeight - (fStartY - 10)),
           GrediantA, GrediantB, LinearGradientMode.Vertical);
        m_OutlineText.TextOutline(gradientBrush, OutlineColor, OutlineSize);
        if (_myRc == null)
        {
            _myRc = ClientRectangle;
        }
        m_OutlineText.DrawString(graphic, fontFamily, this.Font.Style, (int)this.Font.Size, this.Text, _myRc, fmt);

      _textImage = new Bitmap(this.Width, this.Height, graphic);
      _textImage.Save(@"C:\bmp.jpg"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:45:38.480

构造函数：[`Bitmap(Int32, Int32, Graphics)`](http://msdn.microsoft.com/en-us/library/byca5y1f)用指定的大小和指定的 Graphics 对象的分辨率初始化 Bitmap 类的新实例。它应该是空的。将仅使用图形的分辨率。

如果你想在位图上绘制一些东西并保存它，而不是从位图创建图形：

```
using(Bitmap bitmap = new Bitmap(Width, Height))
using (Graphics graphics = Graphics.FromImage(bitmap))
{
    Rectangle rect = new Rectangle(0, 0, Width, Height);
    graphics.FillRectangle(new SolidBrush(BackColor), rect);
    graphics.DrawString("Hello, World", Font, new SolidBrush(ForeColor), rect);
    bitmap.Save(@"D:\hello_world.bmp");
} 
```

如果要在控件上绘图并将其图像保存到文件，请使用[Control.DrawToBitmap](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)方法。

BTW bitmap should have `.bmp` extension, it's not JPEG image.

# salesforce - 使用 Salesforce-to-Salesforce 自动接受客户和相关联系人

> ID：11643824
> 
> 赞同：2
> 
> 时间：2012-07-25T06:23:23.363
> 
> 标签：salesforce

我需要通过 S2S 从 Org A 共享到 Org B 的联系人自动显示在 Org B 中正确的（以前共享的）帐户下。

我的目标是从组织 A 发布帐户 A1 及其相关联系人，并让它们全部自动显示在组织 B 中（无需手动干预），并保留相同的帐户/联系人关系。

我确信我之前已经这样做了，但我最近几次这样做可能是使用自定义主从记录。

有人可以澄清这是否真的可行，还是 S2S 仅支持真正的自定义主从关系？

到目前为止，我已经尝试了手动共享（“转发到连接” - 带有和不带有“转发相关记录”复选框）和自动（通过帐户中的 PartnerNetworkConnection 和/或更新后和/或插入触发器后的联系人）共享。我也尝试过先联系然后帐户，然后再联系帐户。我还尝试检查和取消选中联系人的“自动接受”，甚至取消映射它，天真地希望这会导致

如果我使用触发器自动发送联系人并在 PartnerNetworkRecordConnection 记录上填充 ParentRecordId，则联系人会被共享但不会自动接受，我必须手动将其映射到帐户。如果我在没有指定 ParentRecordId 的情况下共享它，它会自动接受，但没有任何帐户。来自帐户的“转发到连接”和“转发相关记录”复选框似乎做同样的事情 - 帐户和所有子联系人都被转发，但联系人记录不会被自动接受。

我确信 Salesforce-to-Salesforce 处理了这个，但我找不到任何关于它的更多信息。任何人都有一个适用于与相关联系人自动共享和自动接受帐户的配方？

如果是代码疏忽（我非常怀疑），这里是我用来共享联系人的代码。它大致基于“Salesforce 到 Salesforce 的最佳实践”代码示例 (http://wiki.developerforce.com/page/Best_Practices_for_Salesforce_to_Salesforce)

```
public static void share(List<Contact> triggerNew) {
    // Define connection id
    Id networkId = ConnectionHelper.getConnectionId('Some Partner Connection');

    Set<Id> localContactAccountSet = new Set<Id>();
    List<Contact> localContactSet = new List<Contact>();
    Set<Id> sharedAccountSet = new Set<Id>();

    // only share records created in this org, do not add contacts received from another org.
    for (Contact ct : triggerNew) {
        if (ct.ConnectionReceivedId == null) {
            localContactAccountSet.add(ct.AccountId);
            localContactSet.add(ct);
        }       
    }

    if (localContactAccountSet.size() > 0) {
        List<PartnerNetworkRecordConnection> newConns = new List<PartnerNetworkRecordConnection>();

        // Get the contact account's partner network record connections
        for (PartnerNetworkRecordConnection accountSharingRecord : [SELECT p.Status, p.LocalRecordId, p.ConnectionId FROM PartnerNetworkRecordConnection p WHERE p.LocalRecordId IN :localContactAccountSet]) {
            // for each partner connection record for contact's account, check if it is active 
            if ((accountSharingRecord.status.equalsignorecase('Sent') || accountSharingRecord.status.equalsignorecase('Received')) && (accountSharingRecord.ConnectionId == networkId)) {
                sharedAccountSet.add(accountSharingRecord.LocalRecordId); 
            }
        }

        if (sharedAccountSet.size() > 0) {
            for (Contact ct : localContactSet) {
                if (sharedAccountSet.contains(ct.AccountId)) {
                    PartnerNetworkRecordConnection newConnection =
                      new PartnerNetworkRecordConnection(
                          ConnectionId = networkId,
                          LocalRecordId = ct.Id,
                          SendClosedTasks = false,
                          SendOpenTasks = false,
                          SendEmails = false,
                          ParentRecordId = ct.AccountId);

                    newConns.add(newConnection);
                }
            }

            if (newConns.size() > 0 ) {
               database.insert(newConns);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:44:00.260

更新：问题已解决。

结果发现 Contact 上有一个长期未使用且被遗忘的自定义 Lookup(Account) 字段。删除此字段可解决问题并导致帐户和联系人都被自动接受。

感谢 Salesforce 对此非常迅速的反应，帮助我解决了这个问题。

并且作为一个友好的提醒：子对象上的多个查找关系将阻止自动接受在子对象上发生。这在文档中，但在诊断过程中我没有发生。

# javascript - 加载时画布尺寸不正确

> ID：11643826
> 
> 赞同：0
> 
> 时间：2012-07-25T06:23:34.533
> 
> 标签：javascript, html, canvas

我有一个画布网页，它可以正常工作，但有时在启动时大小不正确。说我已经声明了一个这样的canvas html标签：

```
<canvas id="main_canvas"></canvas> 
```

我已经包含了一个 javascript 文件，该文件负责使用 jquery 进行大小调整

```
$(function() {
    var canvas = $('canvas')[0];

    var DISPLAY_WIDTH = window.innerWidth-10,
        DISPLAY_HEIGHT = 620, 
```

有时在页面加载后，画布大小会被压缩到一个非常小的区域，并且所有渲染的对象都相互堆叠，如果我刷新但是这个问题不再存在。我使用了检查元素工具，发现当尺寸问题发生时，我有 html 代码

```
<canvas id="main_canvas" width="-10" height="620"></canvas> 
```

似乎由于某种未知原因`window.innerwidth`未获得，宽度仅设置为 -10 并导致问题。但是 jquery 声明`$(function(){})`应该只在页面加载后执行，我认为我不能`window.innerWidth`只在 html 标记中使用。而且我不想将宽度设置为其他数值，因为这个问题也可能再次发生，我只是将这个数字宽度作为我的画布宽度。

无论如何可以告诉我一些修复？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:28:33.197

如果你把它全部放在

```
$(document).ready(function() 
```

功能？引用：

> 它里面的所有东西都会在 DOM 被加载并且页面内容被加载之前加载。（来源： http: [//www.learningjquery.com/2006/09/introducing-document-ready](http://www.learningjquery.com/2006/09/introducing-document-ready)）

# asp.net - 页面输出缓存不适用于跟踪

> ID：11643831
> 
> 赞同：0
> 
> 时间：2012-07-25T06:23:58.670
> 
> 标签：asp.net, caching, stack-trace

我已将以下代码放在 .aspx 页面中：

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="CarWale.CarDataIO.MasterDataEntry" Trace="true"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ OutputCache Duration="10" VaryByParam="none" %>

<head runat="server">
<title>Master Data Entry</title>
<link href="/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<form id="form1" runat="server">
<div> <%= DateTime.Now.ToString() %></div>
</form>
</body>
</html> 
```

当上面的页面使用 Trace="false" 呈现时，代码运行正常。该页面正在被缓存，并且 DateTime 按预期每 10 秒后更改一次。

但是，当应用 Trace="true" 时，所有页面缓存都丢失了，并且每次刷新页面时 DateTime 都在更改，甚至在 10 秒持续时间完成之前。我认为这是 ASP.NET 框架中的一个严重错误。

谁能指导我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:11:06.997

我不认为这是一个错误，而只是跟踪并允许它输出到页面的结果。

如果您使用这些设置进行跟踪，`web.config`它应该可以工作。

```
<trace enabled="true" requestLimit="1000" localOnly="false" pageOutput="false"/> 
```

在这里，`pageOutput="false"`将阻止跟踪直接显示在页面上，现在只能通过[TraceViewer](http://msdn.microsoft.com/en-us/library/wwh16c6c.aspx)访问。要查看跟踪，只需附加`\Trace.axd`到您的 asp.net 页面的 url（选择`default.aspx`以获取与之前相同的结果页面）。

禁用后，跟踪现在`pageOutput`将不再阻止输出缓存。

# python - Python Tkinter：无法从另一个类配置按钮

> ID：11643832
> 
> 赞同：0
> 
> 时间：2012-07-25T06:23:58.890
> 
> 标签：python, model-view-controller, tkinter, syntax-error, nested-class

我只是在学习 MVC 并且我正在使用 Tkinter 来这样做，但是当我试图从一个类中的一个类中配置一个按钮时，我不断收到这个错误

```
Traceback (most recent call last):
  File "Controller.py", line 22, in <module>
    controller = Controller(root)
  File "Controller.py", line 10, in __init__
    self.view.addWidgets.btn.config(command=self.addShow)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1205, in configure
    return self._configure('configure', cnf, kw)
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1196, in _configure
    self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
_tkinter.TclError: invalid command name ".35986680.35987112.35991848" 
```

如果您无法从错误中确定问题，我可以发布我的代码，但它们位于两个单独的文件中，尽管这些文件只有 40 行长。

细节：

```
Button is in Frame class
Frame class is in View class
View class is in Controller class
function being called by Button command is in Controller class
    error happens when i configure button from Controller class
    self.view.addWidgets.btn.config(command=self.addShow) 
```

### 编辑

我对代码进行了条带化​​。

控制器.py

```
from View import *
from Model import *
from Tkinter import *

class Controller:
    def __init__(self,root):
        self.model = Model()
        self.view = View(root)

        self.view.addWidgets.btn.config(command=self.addShow)

    def addShow(self):
        print 'Working'

root=Tk()
root.withdraw()
controller = Controller(root)
root.mainloop() 
```

视图.py

```
from Tkinter import *
from MultiListbox import *
from AddFrame import *  

class View(Toplevel):
    def __init__(self, master):
        Toplevel.__init__(self, master)
        self.title('Show Preserver')

        self.protocol(self.protocol('WM_DELETE_WINDOW', master.destroy))#When i delete this i dont get the error but it still dosent work

        self.addFrame=Frame(self,bg='black')
        self.addWidgets=AddFrame(self.addFrame)

        self.addFrame.grid(row=0)

        self.mainloop() 
```

添加框架.py

```
#Add Frame
from Tkinter import *

class AddFrame(Frame):

    def __init__(self,master):

        self.frame = Frame(master,bg='black')
        self.frame.grid(row=0,column=0,sticky=W+E)

        self.btn = Button(self.frame,text='Add',bg='black',fg='yellow',activebackground='yellow',activeforeground='black', width=2,command=None)     
        self.btn.grid(row=0,column=6,sticky=E) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:16:38.790

该错误`invalid command name ".35986680.35987112.35991848"`来自为 Tkinter 提供支持的底层 Tcl 解释器。`.35986680.35987112.35991848`是小部件的低级标识符，它还表示用于与该小部件交互的代理命令。由于 Tcl 说“无效的命令名称”，这几乎总是意味着低级小部件已被破坏，因为当小部件被销毁时命令消失了。

查看您的代码，它似乎`.35986680.35987112.35991848`代表`self.view.AddWidgets.btn`. 您确定该小部件在您尝试配置它时仍然存在吗？

[时间过去了，现在问题有一些代码......]

你打`mainloop`了两次电话，这不是 Tkinter 的设计用途。您需要删除其中之一。

# mysql - mysql 从 3 个表中计数

> ID：11643833
> 
> 赞同：1
> 
> 时间：2012-07-25T06:24:03.393
> 
> 标签：mysql, join

我尝试玩不同的 mysql joins/selects 来获取至少有 25 个帖子或评论的所有用户。有

```
users
  id
  valid

posts
  id
  user_id

comments
  id
  user_id 
```

在那里，我试图让所有用户记录至少 25 条评论+帖子..

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:26:27.577

尝试

```
select u.* 
from users u
left outer join posts p on p.user_id = u.id
left outer join comments c on c.user_id = u.id
group by u.id
having (count(p.id) + count(c.id)) >= 25 
```

# jquery - IE跨域问题

> ID：11643839
> 
> 赞同：0
> 
> 时间：2012-07-25T06:24:30.270
> 
> 标签：jquery, ajax, internet-explorer, cross-domain, resteasy

我目前正在处理一些需要发送跨域 ajax 请求的东西。我正在使用 jQuery 1.7.2 和 Resteasy。这是我的ajax请求：

```
 $.ajax({
    url: Configuration.AjaxUrlPrefix + "/rest/conf/saveoption",
    data: {
        save_option: JSON.stringify(optionData)
    },
    type: "POST",
    dataType: 'text',
    success: success,
    error: fail,
    cache: false
}); 
```

我使用拦截器向我的其余响应添加一些标头：

```
@Provider
@ServerInterceptor
public class CrossDomainInteceptor implements PostProcessInterceptor
{

    @Override
    public void postProcess(ServerResponse response)
    {
        MultivaluedMap<String, Object> metadata = response.getMetadata();
        metadata.add("Access-Control-Allow-Origin", "*");
        metadata.add("Access-Control-Allow-Methods", "*");
        metadata.add("Access-Control-Max-Age", "*");
        metadata.add("Access-Control-Allow-Headers", "*");
    }

} 
```

它适用于 Chrome 和 FF，但不适用于 IE8 和 IE9。而且我在 IE 开发人员工具中没有看到任何错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:31:39.110

IE8-9 应该`XDomainRequest`用来触发跨域 ajax 请求，而 jQuery**本身不**支持它，我在 jQuery 错误跟踪器上找到了一张票：http: [//bugs.jquery.com/ticket/8283](http://bugs.jquery.com/ticket/8283)

jQuery 团队可能认为`XDomainRequest`与其 ajax 接口不完全兼容，因此决定不支持它，但是插件可能会有所帮助：[https ://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js)

请记住 xdr 传输有一些限制，请查看上面 jQuery 票证的讨论

# c++ - 如何在类中初始化 char 数组？

> ID：11643844
> 
> 赞同：0
> 
> 时间：2012-07-25T06:24:59.357
> 
> 标签：c++

我正要在一个类中初始化一个 char 数组

```
class a{
    char a[25];
};

a::a(){
    a[] = {'a','b','c'};
} 
```

但给出编译时错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T06:32:37.627

如果你的编译器支持 C++11 特性，你可以这样做：

```
a::a() :arr({'a','b','c'})
{} 
```

否则，您必须手动完成，或者您可以使用以下功能`memcpy`：

```
a::a() {
    memcpy(arr,"abc",3);
    // The other initialization method will fill the rest in with 0,
    // I don't know if that's important, but:
    std::fill(arr + 3, arr + 25, '\0');
} 
```

或者，正如 ehemient 所建议的：

```
a::a() {
    strncpy(arr, "abc", 25);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T13:30:22.660

```
class LexerP
{   
public:
    char header[5];
    void h();
    void echo(){printf(" salut les gars ...\n \n");};   
};

void LexerP::h()
{
    int i=0;
    int j=0;

    char headM[5] ={0x07,0x0A,0x05,0x00,0x05};
    /*  for (i=0;i<strlen(this->header);i++)
    header[i]=headM[i];*/
    strcpy(this->header,headM)
};

main()
{
    LexerP *M=new (LexerP);
    M->echo();
    M->h();
    return 0;
} 
```

# ruby-on-rails - 在 before_filter 中设置布局时的奇怪行为

> ID：11643857
> 
> 赞同：1
> 
> 时间：2012-07-25T06:26:16.633
> 
> 标签：ruby-on-rails, rendering

我正在尝试创建一个模块来抽象一些用于选择控制器中动作布局的逻辑。

下面是一个示例控制器的样子：

```
class StudentsController < ApplicationController
  second_tierable only: [:new, :create]
  layout "students"
  ... 
```

我在 ApplicationController 中包含了一个模块，它定义了以下类方法：

```
def second_tierable(options = {})
  self.send(:before_filter, options.slice(:only, :except)) do
    self.class.layout "second_tier_page"
  end
end 
```

这是我期望发生的事情：

*   如果操作是新的或创建的，则布局为“second_tier_page”。
*   布局是“学生”，否则

这正是发生的情况，除了在运行 new 或 create 操作之后。例如，如果我访问“students/new”，然后访问“students/index”，那么“second_tier_page”布局将呈现为索引。

我正在开发模式下运行我的应用程序。有趣的是，如果我对我的应用程序中的任何文件进行更改并保存，当我刷新“索引”时，正确的布局就会呈现。这让我相信某些东西被缓存在某个地方，但我对根本问题不知所措。

有任何想法吗？

# c# - VirtualPathProvider 性能

> ID：11643863
> 
> 赞同：5
> 
> 时间：2012-07-25T06:26:36.750
> 
> 标签：c#, asp.net-mvc, virtualpathprovider

我目前正在尝试创建一个类库并将 MVC 视图嵌入其中，以便我们可以在多个站点之间共享它，如下所述：[http ://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins /](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/)

性能很重要，所以我试图弄清楚这是否是要走的路。如果可能的话，有人可以简要解释一下 VirtualPathProvider 吗？

我注意到这个方法只为每个文件调用一次。

```
public override VirtualFile GetFile(string virtualPath)
{
    if (ResourceFileExists(virtualPath))
         return new EmbeddedVirtualFile(virtualPath);

    return base.GetFile(virtualPath);
} 
```

VirtualPathProvider 是否自动缓存文件/视图？在另一篇文章（解释同样的事情）中，他们说您应该覆盖 GetCacheDependency：

```
public override CacheDependency GetCacheDependency(string virtualPath, IEnumerable virtualPathDependencies, DateTime utcStart)
{
    if (ResourceFileExists(virtualPath))
        // Return null or otherwise ASP.NET will try to monitor the file.
        // Is actually the default implementation.
        return null;

    return base.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
} 
```

那么这里返回null不会影响VirtualFile的“缓存”吗？我问这个的原因是因为我们创建的 VirtualFile 的自定义实现，称为 EmbeddedVirtualFile，在覆盖的 Open() 方法中使用了这段代码：

```
var assembly = Assembly.LoadFile(assemblyName);
if (assembly != null)
{
    Stream resourceStream = assembly.GetManifestResourceStream(resourceName);
    return resourceStream;
} 
```

我有点担心这会对性能产生影响。有人可以安慰我吗？

# iphone - NSNotification addObserver: 中的参数“object”是什么？

> ID：11643866
> 
> 赞同：29
> 
> 时间：2012-07-25T06:26:41.657
> 
> 标签：iphone, nsnotificationcenter

我的一个名为 Message.m 的班级正在发布带有如下对象的`sentObject`通知

```
NSDictionary *sentObject = [NSDictionary dictionaryWithObjectsAndKeys:draftData.arr,@"data", nil];

//Post notification to inform a receiver to reload data     
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadDuringSave" object:self userInfo:sentObject]; 
```

DraftData.m 将成为接收通知的接收者，如下所示

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(dataReloaded:) 
                                             name:@"reloadDuringSave" 
                                           object:nil]; 
```

对于发布通知，`userInfo`可以是`nil` 或可以是`object`（如本例`sentObject`中的类型`NSDictionary`）。

### 问题：

`object`in`addObserver`方法的其他参数是什么？它们可以是 以外的任何东西`nil`，如果是，那又是什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-25T06:35:53.670

[“ addObserver](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserver:selector:name:object:) ”的那个“object”参数是一个可选的**过滤器**。发布通知后，您可以为通知的​​发送者设置一个对象，然后只会通知该发送者的事件。如果设置为“nil”，您将收到此类型的所有通知（无论是谁发送的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T06:35:28.327

您可以使用它通过通知传递任何对象。然后通知的接收者将能够访问该对象。例如，您可以这样实现`dataReloaded`：

```
- (void)dataReloaded:(NSNotification *)notification {

    NSLog(@"%@", notification.object); // this will log the object you passed in addObserver:selector:name:object:

} 
```

当您想通过通知传递数据时，它会很有用，以便通知的接收者也可以使用该数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-12T10:14:34.323

对于任何对苹果文档感兴趣的人。这就是它所说的：

> *通知发送者*
> 
> 观察者想要接收其通知的对象；也就是说，只有这个发送者发送的通知才会传递给观察者。如果您传递 nil，通知中心不会使用通知的发送者来决定是否将其传递给观察者。

# java - 关于 lilith（Logback 的日志查看器）的任何好的教程？

> ID：11643872
> 
> 赞同：13
> 
> 时间：2012-07-25T06:27:11.640
> 
> 标签：java, logback, apache-chainsaw, log-viewer

我正在使用 slf4j + logback 进行日志记录。我正在寻找一个好的事件日志查看器（如 Apache Chainsaw）。Logback 网站提到了[Lilith](http://lilith.huxhorn.de/)。lilith 网站不仅丑陋（网站主页上这么说！）而且还缺少任何文档。

是否有任何关于如何开始使用 Lilith 的教程（可能是我发现很难掌握，因为我从未使用过 Apache Chainsaw，如果我阅读有关 Chainsaw 的教程会有所帮助吗？）。

此外，是否有任何用于 logback 的替代日志查看器具有更好的文档？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T00:10:19.593

我是[莉莉丝](http://lilith.huxhorn.de/)的开发者，也是丑陋主页的创造者。;)

我知道它缺少文档，而且我不太擅长“销售”我的应用程序。

请查看[https://github.com/huxi/lilith上的自述文件](https://github.com/huxi/lilith)

我试图在该文件中描述 Lilith 最常见的用例。莉莉丝本身也包含一些帮助。

Ekkehard Gentz 写了一个关于莉莉丝的小教程：http: [//ekkescorner.wordpress.com/2009/09/05/osgi-logging-part-8-viewing-log-events-lilith/](http://ekkescorner.wordpress.com/2009/09/05/osgi-logging-part-8-viewing-log-events-lilith/)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:45:21.287

基本上，创建一个`logback.xml`包含以下内容的文件

```
<configuration>

   <appender name="LogbackClassic" class="ch.qos.logback.classic.net.SocketAppender">
      <RemoteHost>localhost</RemoteHost>
      <Port>4560</Port>
      <ReconnectionDelay>170</ReconnectionDelay>
      <IncludeCallerData>true</IncludeCallerData>
   </appender>

   <root level="INFO">
      <appender-ref ref="LogbackClassic"/>
   </root>

</configuration> 
```

让您可以使用系统属性传入此配置`logback.configurationFile`，因此您可能想要执行以下操作：

```
final String LOGBACK = "logback.configurationFile";
if(System.getProperty(LOGBACK) == null)
    System.setProperty(LOGBACK, "file:logback.xml"); 
```

这应该足够了，一旦您的应用程序开始记录日志，就会在 Lilith 中打开一个窗口并向您显示日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:50:41.260

Chainsaw 可以读取任何常规文本日志文件，包括由 slf4j 和 logback 创建的文件。

试试最新的 Chainsaw 开发者快照 - 它有大量新功能，可以轻松着色、搜索和过滤事件。您还可以注释任何日志条目（通过在“标记”字段中添加注释），从 Chainsaw 导出日志文件并将日志文件通过电子邮件发送给其他人，他们可以看到您的日志以及您添加到日志条目中的注释 -位置，与您从 Chainsaw 导出日志时看到的完全一样。

Chainsaw 的初始配置对话框可以轻松帮助您开始拖尾日志文件 - 您可以指定要处理的日志文件，然后指定文件格式，Chainsaw 将开始拖尾文件。

如果您使用的是 log4j 和 fileappender，则可以使用该 log4j.properties 文件（或 log4j.xml）让 Chainsaw 开始跟踪从配置文件中的 fileappender 条目定义的日志文件。

Chainsaw 还有一个内置在 UI 中的教程，可从帮助菜单或欢迎选项卡中获得。

右键单击大多数内容以查看您可以执行的操作并浏览菜单。或向 log4j-users 邮件列表发布消息以获得问题的解答。

Chainsaw 的最新开发者快照可在此处获得：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# hadoop - 如何在 Hadoop 中只识别大小写？

> ID：11643874
> 
> 赞同：0
> 
> 时间：2012-07-25T06:27:15.223
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我是hadoop mapreduce的新手。我想开发mapreduce代码以将文件文本转换为小写。但是与文件中前面的序列一样。这意味着文件的实际顺序而不是类似于字数数据序列。所以有什么能给我的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:46:22.167

只需逐行读取文件，然后将其作为键值**<< LineNumber,UPPERCASEOFLINE >>**发出，因此每一行的大写将成为reducer的值（只有一个元素的列表）。

现在您所要做的就是将值（每个键的单行）作为reducer 的键发出**，**您可以将reducer**值**设为NullWritable。

**映射器中的LineNumber**对于每行输入以 1 为增量开始。还要重写 isSplitable() 以返回 false 以便使一个文件完全由一个映射器处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T18:00:14.083

通过hadoop map reduce程序将给定文本转换为大写时，我遇到了同样的问题。

以下是我的减速器代码片段

```
public static class UpperCaseReducer extends MapReduceBase implements Reducer<Text,Text,Text,Text>
    {
        public void reduce(Text key,Iterator<Text> value,OutputCollector<Text, Text> output,Reporter rporter) throws IOException
        {
            //while(value.hasNext())
            {
                String NULL= new String();
                //System.out.println(value.toString());
                output.collect(value.next(),new Text(""));
            }
        }
    } 
```

在我的映射器代码中，我只是逐行读取输入文本，将其转换为大写，并将原始行作为键传递，并将转换后的文本作为映射器方法中的值作为输出。

# sql - 按列分组并按列聚合

> ID：11643875
> 
> 赞同：0
> 
> 时间：2012-07-25T06:27:23.137
> 
> 标签：sql, sql-server, sql-server-2008, group-by, aggregate-functions

我有一个要求，我的数据看起来像

```
Customer   OpenBal  Qty  Date
---------  -------  ---  --------
707001304  597      -48  20100414
707001304  597      -30  20100415
707001304  597      -30  20100419
707001304  597      -54  20100420 
```

我想计算并获取数据

```
Customer   OpenBal  Qty  Date      ClosingBal (OpenBal+Qty)
---------  -------  ---  --------  ----------
707001304  597      -48  20100414  549
707001304  549      -30  20100415  519
707001304  519      -30  20100419  489
707001304  489      -54  20100420  435 
```

可以帮忙，我如何汇总数据`Qty`并`Date`减去`OpenBal`一天。`ClosingBal`一天将打开第二天的余额。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:56:15.377

也许我遗漏了一些东西，但你不能只添加列`+`吗？

```
select  Customer
,       OpenBal
,       Qty
,       Date
,       OpenBal + Qty as ClosingBal
from    YourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:18:58.193

> > 原始表的每一行都包含相同的 OpenBal。OP 希望它是前一天的 CloseBal

对于 Oracle 10g、11g、SQL Server 2012 和 DB2 9.5，您可以使用 LAG 函数访问先前计算的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:12:41.383

这可能会有所帮助：

```
SELECT Customer, OpenBal, Date, SUM(OpenBal + Qty) AS Closingbal FROM Table_Name
GROUP BY Date, Customer, OpenBal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:46:09.577

尝试这个：

```
insert into t_Customer values

(707001304,597,-48,20100414),
(707001304,597,-30,20100415),
(707001304,597,-30,20100419),
(707001304,597,-54,20100420)

select * from t_Customer

;WITH CTE as(select ROW_NUMBER() over (order by Customer) as sno,Customer,OpenBal,Qty,date,OpenBal+Qty as clsBal from t_Customer)
,CTE1 as (
select sno,Customer,OpenBal,Qty,date,clsBal from CTE where sno=1
union all
select c.sno,c.Customer,c1.clsBal,c.Qty,c.date,c1.clsBal+c.qty from CTE1 c1 inner join CTE c on c1.sno+1 =c.sno 
)
SELECT * FROM CTE1 
```

# php - 使用 javascript 查找下一个特定元素？

> ID：11643876
> 
> 赞同：0
> 
> 时间：2012-07-25T06:27:28.480
> 
> 标签：php, javascript

我对此有疑问，我想通过选中与一行中的选择元素对应的复选框来启用选择元素。我怎样才能做到这一点？

```
<table>
<?php do { ?>
 <tr>
 <td><input type="checkbox" /></td>
 <td>
    <select disabled="disabled">
     <option value="1">Dog</option>
     <option value="2">Cat</option>
    </select>
 </td>
</tr>
<?php } while($row = mysql_fetch_assoc($result)); ?>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:00:36.367

你可以试试这是 Javascript 之类的创建一个函数

```
function CheckMe(field)
{
    var tr = field.parentNode.parentNode;
    var select = tr.getElementsByTagName("select");

    if(select.length>0)
    {
        if(field.checked)
        {
            select[0].removeAttribute("disable");
        }
        else
        {
            select[0].setAttribute("disable", "disable")  
        }
    }
} 
```

并改变你的 php do loop

```
<td><input type="checkbox" /></td> 
```

到

```
<td><input type="checkbox" onclick="CheckMe(this)" /></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:53:31.267

在纯javascript中，此代码将在选中复选框时启用同一行中的选择列表，并在未选中时禁用它：

```
var table = document.getElementById("myTable");
var checkboxes = table.getElementsByTagName("input");
for (var i = 0; i < checkboxes.length; i++) {
    checkboxes[i].addEventListener("click", function() {
        var row = this.parentNode.parentNode;
        var select = row.getElementsByTagName("select")[0];
        if (this.checked) {
           select.removeAttribute("disabled");
        } else {
           select.setAttribute("disabled", "disabled");
        }
    }, false);
}​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/w8ZUj/](http://jsfiddle.net/jfriend00/w8ZUj/)

`addEventListener`仅供参考 -旧版本的 IE 不支持此用途。`addEvent`如果必须支持旧版本的 IE，则可以使用在 IE 中替代的合适的跨浏览器替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:15:23.427

其他人已经根据 parentNode 给了你答案，但是更通用的解决方案可以与 simlpe *upTo*函数一起使用，例如

```
function upTo(el, tagName) {
  tagName = tagName.toLowerCase();
  var el;
  do {
    el = el.parentNode;
    if (el.tagName.toLowerCase() == tagName) {
      return el;
    }
  } while (el.parentNode)
} 
```

因此，要获取 select 元素，侦听器将类似于：

```
<input type="checkbox" onclick="doSelect(this);"> 
```

其中*doSelect*是：

```
function doSelect(el) {
  var sel;
  var row = upTo(el, 'tr');

  if (row) {
    sel = row.getElementsByTagName('select')[0];
  }

  if (sel) {
    sel.disabled = !el.checked;
  }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T06:35:26.920

您可以将 onchange 事件添加到复选框，如下所示：

```
<input type="checkbox" onchange="enableSelect(this)" /> 
```

然后使用此javascript代码启用与复选框在同一行中的选择框

```
function enableSelect(checkbox) {
    var selectElements = checkbox.parentNode.parentNode.getElementsByTagName("select");
    selectElements[0].disabled = !checkbox.checked;
} 
```

# iphone - iPhone - 收到内存警告

> ID：11643877
> 
> 赞同：2
> 
> 时间：2012-07-25T06:27:31.653
> 
> 标签：iphone, objective-c, memory-management, avfoundation

我正在使用 aVFoundation 框架从视频资产中读取 CMSampleBufferRef，在一段时间循环中，我得到如下图像：

```
-(void)splitImagesFromVideo
{
    if (images != nil) {
        [images release];
        images = nil;
    }
    images =[[NSMutableArray alloc] init];

    NSURL *fileURL = [[NSBundle mainBundle]
                      URLForResource:@"3idiots" withExtension:@"mov"];

    NSLog(@"video: %@",videoURL);

    AVAsset *theAVAsset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];

    NSError *error = nil;
    float width = theAVAsset.naturalSize.width;
    float height = theAVAsset.naturalSize.height; 
    AVAssetReader *mAssetReader = [[AVAssetReader alloc] initWithAsset:theAVAsset error:&error]; 

    NSArray *videoTracks = [theAVAsset tracksWithMediaType:AVMediaTypeVideo]; 
    AVAssetTrack *videoTrack = [videoTracks objectAtIndex:0];

    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
    AVAssetReaderTrackOutput* mAssetReaderOutput = [[AVAssetReaderTrackOutput alloc] initWithTrack:videoTrack outputSettings:options];

    [mAssetReader addOutput:mAssetReaderOutput];

    BOOL success = [mAssetReader startReading];
    NSInteger val = 1;

    while ( [mAssetReader status]==AVAssetReaderStatusReading ){
        CMSampleBufferRef buffer = [mAssetReaderOutput copyNextSampleBuffer];//read next image.
        if (buffer) {

            UIImage *img = [self imageFromSampleBuffer:buffer];
            if (img != nil) {

                NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
                img = [self imageOfSize:CGSizeMake(320, 480) fromImage:img];
                [images addObject:img];
                [pool release];
            }

            CMSampleBufferInvalidate(buffer);
            CFRelease(buffer);
            buffer = nil;

        }
        NSLog(@"value: %d", val++);
    }

    [images removeLastObject];
    NSLog(@"img count: %d", [images count]);
    NSLog(@"imgs: %@",images);

    [theAVAsset release];
    [mAssetReader release];
    [mAssetReaderOutput release];
    NSLog(@"count: %d", [images count]);
} 
```

当 while 循环正在执行时，它会打印我输入的日志，并增加 integer `val`。在这之间有时会在 GDB 中显示一条消息“收到内存警告”。

非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:04:27.163

听起来您需要考虑将 while 循环的每次迭代都包装在自动释放池中[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:42:12.420

移动你的

```
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; 
```

行到 while() 循环内，然后放一个

```
 [pool drain]; 
```

就在while循环结束之前。

此外，根据您拥有的图像数量，您将耗尽内存，因为您将缩小的图像保留在内存中......

# java - 如何在 jsf 中预填充 h:inputText

> ID：11643880
> 
> 赞同：0
> 
> 时间：2012-07-25T06:27:51.093
> 
> 标签：java, javascript, jsf, ip-geolocation

我有两个输入文本，我想用城市和国家的地理位置数据预填充它们。这是我想用来获取位置的 api

```
 <script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>

  <script language="Javascript"> 
    document.write(geoplugin_city(), geoplugin_countryName()); 
  </script> 
```

JSF：

```
<h:inputText id="city" style="width:100%;"  value="#{m.city}"></h:inputText>

<h:inputText id="city" style="width:100%;"  value="#{m.country}"></h:inputText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:20:48.947

第一个：你给你`inputText`的第二个更改给了相同的 id 到*国家*

尝试这样的事情

```
document.getElementById("yourFormId:city").value = geoplugin_city();
document.getElementById("yourFormId:country").value = geoplugin_countryName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:20:56.537

那么，您为什么不创建`JavaScript`将城市和国家名称设置为您的 ID 的函数（我想您将拥有 id city 和 country，现在您对两者都有相同的 id `inputText`）。并且只需在页面加载时调用它，根据这个[问题](https://stackoverflow.com/questions/2375676/how-to-define-an-onload-function-in-jsf-template-that-will-be-defined-elsewhere)有两种方法。

# java - 我应该把执行的 HQL 结果放在哪里？

> ID：11643881
> 
> 赞同：0
> 
> 时间：2012-07-25T06:27:55.877
> 
> 标签：java, hql

我有一个 HQL 连接查询，但我不知道如何执行它。我的意思是我不知道我应该把结果放在哪个数据类型中。结果集是一个字符串和日期类型的数组。我想使用大小为 2 的数组列表。 int 的第一个位置和日期的第二个位置。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:43:18.107

HQL 查询的结果通常是某个对象的列表。HQL 还使您可以在运行查询期间创建一些新对象的列表，例如：

```
select new SomeObject(something.arg1,something.arg2,something.arg3) from Somewhere as something 
```

但请查看 HQL 文档以获取更多详细信息，这应该是如何解决您的问题的一个想法。

[关于 HQL 的文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# c++ - 静态成员变量的类内赋值

> ID：11643883
> 
> 赞同：0
> 
> 时间：2012-07-25T06:28:05.680
> 
> 标签：c++, static-members

这是代码，

```
class A {
public:
    static A *get_a()
    {
        if(_pa == 0)
            _pa = new A;
        return _pa;
    }

private:
    static A *_pa = 0;  //cannot compile
}; 
```

在上面的代码中，如果我将`_pa`' 的定义移出类，

```
A * A::_pa = 0;  //can compile 
```

我的问题是，`static A *_pa = 0`类体内只是一个声明，而不是定义，对吗？

`static`此外，为类内的数据成员赋值是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T06:33:34.967

除非它是**const**整数类型（char、short、int、...），否则除了标题中的声明之外，您还必须在 .cpp-File 中定义静态成员。

```
header:
class XYZ {
  static XYZ * instance;
};

//cpp:
XYZ * XYZ::instance; 
```

# jquery - 元素悬停重叠元素

> ID：11643884
> 
> 赞同：0
> 
> 时间：2012-07-25T06:28:11.357
> 
> 标签：jquery, hover, tooltip, mouseover, mouseleave

我正在尝试使用 jQuery 获得工具提示效果，但它并没有完全按照我想要的方式工作。

```
$(".product").mouseover(function() {
    $(this).find(".description").fadeIn(300);
}).mouseleave(function() {
    $(this).find(".description").stop().fadeOut(300);
}); 
```

`.product`是父元素，`.description`是子元素。

[这](http://jsfiddle.net/saTNB/3)是我正在处理的页面。如果我悬停它，我需要工具提示 ( `.description`) 保持可见。我已经成功地让它工作了，**但是**如果工具提示与另一个父元素的坐标重叠（`.product`毕竟触发了函数），它就会消失。

任何人都可以将我推向正确的方向吗？我在 stackoverflow 上阅读了很多内容，但尽管有很多类似的问题，但这些建议的解决方案似乎对我不起作用。任何善良的灵魂都可以在这里帮助一个 JavaScript 白痴吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:34:58.110

尝试将`z-index`您的工具提示设置为`999999`：

```
<dd class="description" style="opacity: 1; display: block; z-index: 999999; ">
    Avocado op een bootje van rijst en zeewier
    <span class="social">FB | Twitter</span>
</dd> 
```

确保 z-index`dd.description`高于这些图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:38:23.817

尝试`position:relative`设置`dd.productWrap`

你`<dl>`有`display: table-call`。这可以防止`position:relative`应用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:35:48.763

我要做的是`mouseleave`在鼠标进入时取消绑定功能`.description`，并在鼠标离开时重新绑定`.description`。尽管仅使用经过测试的工具提示插件（有很多）可能更简单（并且错误更少）。

# screen - 关于显示器物理尺寸、屏幕分辨率、dpi

> ID：11643886
> 
> 赞同：1
> 
> 时间：2012-07-25T06:28:15.953
> 
> 标签：screen, resolution, screen-resolution, dpi

我有一台戴尔笔记本电脑纬度5420。

内置显示器的宽度为 12.20 英寸，高度为~~6.69~~ 6,86 英寸。

操作系统是Windows7。屏幕分辨率设置为 1600 x 900（首选分辨率）。

此外，Windows7 配置了 100% 的“设置自定义文本大小 (DPI)”（9 点 Segoe UI，每英寸 96 像素）。我认为这意味着 windows7 认为我的 1 英寸显示器使用 96 像素。

如果我将 1600 像素除以 12.20 英寸（或 900 除以 6,86），结果约为 131,1。

~~系统的预期 DPI 应该是多少？水平的？垂直的？鉴于这种配置，一个正方形会在我的屏幕中被视为一个矩形吗？我错过了什么吗？~~

原来的问题现在没有意义了。分辨率和物理尺寸现在遵循相同的 16:9 格式。

现在它困扰我的问题是，实际上屏幕似乎每英寸大约有 131 像素，但操作系统认为它有 96 英寸像素。如果我告诉一个程序写一行 1 英寸，屏幕上会打印多少像素？96还是131？如果我告诉一个程序写 131 个像素，然后在屏幕上放一把尺子，我会测量什么？

编辑原因：抱歉给您带来不便。我用尺子重新检查了测量，我在垂直测量中出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:09:02.863

[GetDeviceCaps](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144877%28v=vs.85%29.aspx)旨在返回此信息（`HORZSIZE`/ `VERTSIZE`，`LOGPIXELSX`/ `LOGPIXELSY`）。然而，

> `GetDeviceCaps`报告显示驱动程序提供的信息。如果显示驱动程序拒绝报告任何信息，`GetDeviceCaps`则根据固定计算来计算信息。如果显示驱动程序报告无效信息，`GetDeviceCaps`则返回无效信息。此外，如果显示驱动程序拒绝报告信息，`GetDeviceCaps`可能会计算出不正确的信息，因为它假定固定 DPI (96 DPI) 或固定大小（取决于显示驱动程序提供和未提供的信息）。**不幸的是，实现到 Windows 显示驱动程序模型 (WDDM)（在 Windows Vista 中引入）的显示驱动程序会导致 GDI 无法获取信息，因此 GetDeviceCaps 必须始终计算信息。**

对于我的 Windows 7 笔记本电脑，`HORZSIZE`完全`VERTSIZE`错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:41:58.163

96 像素/英寸是一种虚拟，与实际屏幕尺寸无关。假设您有一个 4000 * 3000 像素的屏幕，LOGPIXELX 仍将返回 96（使用标准设置）。请阅读[这篇文章](http://blogs.msdn.com/b/fontblog/archive/2005/11/08/490490.aspx)以获得全面的解释。

顺便说一句，我的电脑上的 HORZSIZE 和 VERTSIZE 也是完全错误的。

# credit-card - 在 authorize.net 上向客户信息管理器发送 CCV 代码

> ID：11643888
> 
> 赞同：0
> 
> 时间：2012-07-25T06:28:29.043
> 
> 标签：credit-card, authorize.net, authorize.net-cim

我在 authorize.net 上实现了 CIM（客户信息管理器）我的困惑是：何时提供 CCV 号码？1）在创建客户资料时（在 createCustomerProfileRequest 的输入参数列表中）？2）或者，在进行交易时？

在我的网站中，客户曾经在 authorize.net 上创建了他的个人资料，几天后，我（商家）收到付款，因为我有客户个人资料 ID。

现在我不想打电话给我的客户给我他的交易 CCV 代码，所以第 2 点在我实施的方式中是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:51:27.237

您在创建付款资料时提供 CVV 编号。在对配置文件收费时无法提供，因为 API 调用不允许这样做。

# php - PHP错误从mysql数据库初始化会话数据

> ID：11643892
> 
> 赞同：0
> 
> 时间：2012-07-25T06:28:34.660
> 
> 标签：php, mysql, session

我已将会话设置为保存在数据库中。我想在多个子域之间共享相同的会话，但似乎每个子域都覆盖了另一个子域的会话。

例如，我在一个子域的会话中添加了一些变量，它们在上面显示正常，但是当我访问另一个子域时，会话是空的。

我使用的课程如下：

```
<?php

class Nip_Session
{

    protected $id;
    protected $_lifetime;
    protected $db;
    protected $table = 'session';

    public function __construct()
    {
        $this->db =  Nip_Registry::instance()->get('__DBROOT');

        $this->_lifetime = get_cfg_var("session.gc_maxlifetime");

        ini_set('session.save_handler', 'user');
        register_shutdown_function('session_write_close');

        $id = $this->checkRequestId();
        $this->setHandlers()->start($id);
    }

    /**
     * Restarts the session, with new optional session id
     *
     * @param string $id
     */
    public function reinitialize($id = false)
    {
        session_write_close();
        $this->setHandlers()->start($id);
    }

    /**
     * Starts the session, with optional session id
     *
     * @param string $id
     */
    protected function start($id = false)
    {
        if ($id) {
            session_id($id);
        }
        Nip_AutoLoader::instance()->isFatal(false);
        session_start();
        Nip_AutoLoader::instance()->isFatal(true);
    }

    /**
     * Overrides default session handling functions
     *
     * @return Session
     */
    protected function setHandlers()
    {
        session_set_save_handler(
            array($this, 'open'),
            array($this, 'close'),
            array($this, 'read'),
            array($this, 'write'),
            array($this, 'destroy'),
            array($this, 'gc')
        );

        return $this;
    }

    public function open()
    {
        return true;
    }

    public function close()
    {
        return true;
    }

    /**
     * Public method to return the session id
     * @todo implement a verification method ( ex: adding another validation string in the sessionID )
     * @return int
     */
    public function getId()
    {
        return session_id();
    }

    /**
     * Gets the session ID from REQUEST
     * @return int
     */
    public function checkRequestId()
    {
        if (isset($_REQUEST['session_id'])) {
            return $_REQUEST['session_id'];
        }

        return false;
    }

    /**
     * Fetches session entry from database
     *
     * @param string $id
     * @return mixed
     */
    public function read($id)
    {
        /* @var $result Nip_DBResult */
        $query = $this->db->newQuery('select');
        $query->from($this->table)
              ->where('id = ?', $id)
              ->where('expires > ?', time())
              ->limit(1);
        $result = $this->db->execute($query);

        $return = false;
        if ($result->numRows()) {
            $row = $result->fetchResult();
            $return = $this->decodeData($row['data']);
        }
        return $return;
    }

    /**
     * Stores the surrent session in the database
     *
     * @param string $id
     * @param mixed $data
     * @return int
     */
    public function write($id, $data)
    {
        $replace = array();
        $replace['id'] = $id;
        $replace['data'] = $this->encodeData($data);
        $replace['expires'] = time() + $this->_lifetime;

        $query = $this->db->newQuery('replace');
        $query->table($this->table)
              ->data($replace);
        $result = $this->db->execute($query);

        return $this->db->affectedRows();
    }

    /**
     * Destroys current session and deletes it's entry from the database
     *
     * @param string $id
     * @return int
     */
    public function destroy($id)
    {
        $query = $this->db->newQuery("delete");
        $query->table($this->table);
        $query->where('id = ?', $id);
        $query->limit(1);
        $query->execute();

        return $this->db->affectedRows();
    }

    /**
     * Garbage control. Called by PHP to remove expired entries from the database
     * @return int
     */
    public function gc()
    {
        $query = $this->db->newQuery("delete");
        $query->table($this->table);
        $query->where('expires <= ?', time());
        $query->execute();

        return $this->db->affectedRows();
    }

    /**
     * @param Nip_DB_Wrapper $db
     * @return Nip_Session
     */
    public function setDB($db)
    {
        $this->db = $db;
        return $this;
    }

    /**
     * @param int $lifetime
     * @return Nip_Session
     */
    public function setLifetime($lifetime)
    {
        if ($lifetime && is_numeric($lifetime)) {
            $this->_lifetime = $lifetime;
        }
        return $this;
    }

    /**
     * Encodes data to be stored
     *
     * @param mixed $data
     * @return string
     */
    protected function encodeData($data)
    {
        return base64_encode($data);
    }

    /**
     * Decodes data to be used
     *
     * @param string $data
     * @return mixed
     */
    protected function decodeData($data)
    {
        return base64_decode($data);
    }

    /**
     * Singleton
     *
     * @return Nip_Session
     */
    static public function instance()
    {
        static $instance;
        if (!($instance instanceof Nip_Session)) {
            $instance = new Nip_Session();
        }
        return $instance;
    }

} 
```

我做了一些回声，会话ID是相同的。我在 read 方法中做了一个 var_dump ，它似乎可以从数据库中读取：

`string(1484)"X3pJX1JQTk9LeW9fQVBBWk03dnhNMVFKNmxLZk1YdEtIMkNGS3EzdW5Oa0hvUFVaWTZJdHlyMzJUc09MUDUwUFpBZHZXTDZfbzM3SjhSbmp1T3lfVnBkMEdSY0dqQzc ......"`

$_SESSION 仍然是空的:(有什么想法吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:16:02.537

默认情况下，会话 ID 存储在 cookie 中，因此不能在不同域之间共享。我不确定将其设置为在 url 中传播是否会有所不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:42:09.813

suhosin 使用包含子域文档根的密钥对会话进行编码似乎是一个问题。***suhosin.session.cryptdocroot***设置。

[http://rommelsantor.com/clog/2011/02/06/php-shared-session-encoding-solution/](http://rommelsantor.com/clog/2011/02/06/php-shared-session-encoding-solution/)

# php - 没有梨的休息服务器

> ID：11643895
> 
> 赞同：0
> 
> 时间：2012-07-25T06:28:50.933
> 
> 标签：php, xml

我们有一个 php 网站，我们正在尝试实现一个 api。为了实现这个 API，我们需要使用 sing RESTFUL 服务发送一个 xml 请求。

所以我们需要做任何休息方法（没有梨）来发布xml请求。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:01:08.600

使用 cURL 将任何数据发布到任何 API 并从服务器接收响应（可以是 XML、JSON 等）。

要编写需要 POST 的 XML 请求，请使用`SimpleXML`并将其插入到 API 请求的 POSTFIELD 中。

看看这个答案，它与你的相似，但有一个不同。

[https://stackoverflow.com/a/11638765/1548719](https://stackoverflow.com/a/11638765/1548719)

要将 POST 发送到 URL (API)，您需要添加几个`CURLOPT`选项：

```
curl_setopt($ch, CURLOPT_POST, 1); // using usual POST (like form submitted application/x-www-form-urlencoded)
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/xml')); // defining content type of the request we are sending
curl_setopt($ch, CURLOPT_POSTFIELDS, $previouslyComposedXMLRequest); // and finally transmitting POST parameter in form of XML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:31:19.760

```
wget http://example.com/path/to/interface 
```

或者在 PHP 中，您可以只使用常见的文件/流函数

```
file_get_contents('http://example.com/path/to/interface'); 
```

# android - ListFragment vs Fragment：使用加载器、适配器、视图实现最佳实践

> ID：11643896
> 
> 赞同：2
> 
> 时间：2012-07-25T06:29:14.003
> 
> 标签：android

我已经使用基于**AsyncTaskLoader**和**ArrayAdapter**的自定义类、方法以及列表项的自定义视图类实现了**ListFragment**和**ListView** ，因为它是由[android 文档和示例提出的](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)****`setListAdapter(adapter)`****

 ****现在在**onListItemClick**我导航到带有片段的项目的详细信息活动。

我应该在这里使用哪些最佳实践/类来实现详细信息表单？

我知道我仍然可以使用**AsyncTaskLoader**（它为我从 Web 服务加载数据），但我还需要适配器吗？哪一个？

也许互联网上有一个样本？

我找到了很多关于如何创建列表表单的示例（包括在 SDK 中），但没有找到使用加载器的详细信息表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:23:31.340

检查此链接....有关详细信息，请使用 listfragments....

[http://tausiq.wordpress.com/2012/12/12/android-custom-adapter-listview-with-listfragment-and-loadermanager-inside-fragmentactivity/](http://tausiq.wordpress.com/2012/12/12/android-custom-adapter-listview-with-listfragment-and-loadermanager-inside-fragmentactivity/)****

# android - 如何从android中的微调器获取项目的文本

> ID：11643899
> 
> 赞同：0
> 
> 时间：2012-07-25T06:29:39.203
> 
> 标签：android, spinner

我正在尝试通过匹配名称但无法从我的微调器视图中获取项目文本。这是我使用的代码：

```
for(int i=0;i<calendar_spinner.getAdapter().getCount();i++) {
           String s= calendar_spinner.getAdapter().getItem(i).toString();
           System.out.println("Calendars are"+s);
           if(calendar_Name.equals(s))
         { 
          System.out.println("Calendar setted");
          calendar_spinner.setSelection(i); 
          break;
         }
} 
```

我得到 s 的输出为 com.android.calendermodel.MyCalendarsModel@405872a0 不完全是名字，有些不同......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T06:32:09.420

检查这个：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View arg1,
                int pos, long arg3) {
            String Text = parent.getSelectedItem().toString();
              }
          } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T17:32:47.680

我也在寻找一个非常相似的问题的解决方案：

对于 ArrayAdapter 你可以这样做：

```
Spinner s = (Spinner) findViewById(R.id.spinner_id);
int i = adapter.getPosition("blue");
s.setSelection(i); 
```

对于自定义适配器，您可以执行以下操作：

```
Spinner s = (Spinner) findViewById(R.id.spinner_id);
for(i=0; i < adapter.getCount(); i++) {
  if("blue".equals(adapter.getItem(i).toString())){
    s.setSelection(i);
    break;
  }
} 
```

从以下位置获得此信息： [http ://www.dcpagesapps.com/developer-resources/android/23-android-spinner-tips?start=1](http://www.dcpagesapps.com/developer-resources/android/23-android-spinner-tips?start=1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T06:34:58.013

这不是正确的做法。您应该使用Spinner 的**setOnItemSelectedListener**。如果您坚持按照自己的方式进行操作，您可以覆盖对象的**toString**方法，只返回您想要的文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T06:33:48.233

在声明适配器时，您可以覆盖 getItem 方法以仅返回字符串。依照指示：

```
ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item_1, arr)
{
     public Object getItem(int position)
     {
        return arr[position];
     }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T06:35:34.250

因此，您正在尝试获取微调器选择名称？这很简单，你不需要调用它的适配器，它只是：

`String itemName = mySpinner.getSelectedItem().toString()`

如果您只想在微调器选项更改时执行操作（例如过滤日历），您可以`OnItemSelected`为微调器实现侦听器。

# jquery - 字符串索引Json jquery

> ID：11643901
> 
> 赞同：-4
> 
> 时间：2012-07-25T06:29:50.260
> 
> 标签：jquery, json

> **可能重复：**
> [在 Jquery 中读取 JSON 字符串](https://stackoverflow.com/questions/2524489/reading-json-string-in-jquery)

以下 Json 字符串

```
{
   "direct":{
      "newvisits":3,
      "uniquevisits":3,
      "retvisits":0
   },
   "user":{
      "newvisits":4,
      "uniquevisits":4,
      "retvisits":0
   }
} 
```

元素`"direct"`等`"user"`是**动态**填充的值。

如何访问`"direct"`和`"user"`使用 jquery 的值？详细 想要获取“direct”和“user”[动态填充字段]的名称，然后是每个类别下的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:42:43.820

假设 retVal 是 JSON 对象。

`retVal.direct`或者`retVal["direct"]`会给你直接的对象。

**编辑** 为了得到你可以做的钥匙。

```
for(key in retVal){
   retVal['key'] // something like this.
} 
```

# php - 如何让 PHP 布尔 FALSE 仅输出为 FALSE

> ID：11643906
> 
> 赞同：6
> 
> 时间：2012-07-25T06:30:04.707
> 
> 标签：php

> **可能重复：**
> [将变量从 php 传输到 js](https://stackoverflow.com/questions/10290278/transfer-a-variable-from-php-to-js)

这可能看起来微不足道。我将 PHP 变量的值设置为 false。然后经过一些处理，我在脚本中输出了一些 JavaScript 变量。这是代码

```
$a = true;
$b = false;
echo '<script type="text/javascript">
          var a = '.$a.';
          var b = '.$b.';
      </script>'; 
```

当脚本完成时，我得到这个输出：

```
var a = 1;
var b = ; 
```

所以我在 JavaScript 中遇到语法错误。现在的问题是，如何在 JavaScript 中也将这些值作为真正的布尔值？

预期输出：

```
var a = true;
var b = false; 
```

我不想要像`'true'`or `'false'`...or 1 和 0 这样的字符串，而只想要布尔`true`值`false`。关于这个的任何帮助，还有一些关于为什么 PHP 会这样表现的解释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T06:33:33.987

```
echo '<script type="text/javascript">
          var a = '.($a?"true":"false").';
          var b = '.($b?"true":"false").';
      </script>'; 
```

我想，你不能简单地回显真/假来得到这个词，你需要将它转换为字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T06:35:44.287

使用[json_encode](http://php.net/manual/en/function.json-encode.php)。

```
$a = true;
$b = false;
echo '<script type="text/javascript">
          var a = '.json_encode($a).';
          var b = '.json_encode($b).';
      </script>'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T06:38:05.700

另一种方法是使用[`var_export()`](http://php.net/manual/en/function.var-export.php)

```
echo '<script type="text/javascript">
          var a = ', var_export($a), ';
          var b = ', var_export($b), ';
      </script>'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T06:36:20.303

编码为 JSON。

```
$ php
<?php
echo json_encode(true) . "\n";
echo json_encode(false) . "\n";             
true
false 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T06:33:47.407

我怀疑这会起作用并且很容易添加：

```
($val ? "true" : "false") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T06:36:34.053

我会在 php 端使用[json_encode() ，在 js 端使用](http://php.net/manual/en/function.json-encode.php)[JSON2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)来传输变量。（大多数js框架都包含json2）

```
<?php
$js_vars = json_encode(array(
    'a' => true,
    'b' => false,
));
?>
<script>
   JS_VARS = JSON.parse('<?php print $js_vars?>');
   console.log(JS_VARS.a, JS_VARS.b);
</script> 
```

也适用于单个变量，但我建议对变量进行分组，这样它们就不会污染 javascript 的全局对象。

# connection-string - 如何使用适用于所有默认 sql express 默认实例的实例为 sql server 2005 创建连接字符串？

> ID：11643907
> 
> 赞同：0
> 
> 时间：2012-07-25T06:30:15.023
> 
> 标签：connection-string, ssms, sql-server-express, setup-deployment

我在 SQL Server 2005 Management Studio 中构建了我的数据库，并在我的 C#.NET 应用程序上进行了部署，我在应用程序中添加了 SQL Server Express Edition ..

我正在使用连接字符串

```
server=My-PC\\SA;database=My_database;uid=sa;pwd=sql;" 
```

现在在部署时它会给出实例错误。那么如何创建一个默认适用于 SQL Server 2005 Management Studio 和 SQL Server Express Edition 的连接字符串呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:37:30.153

希望这应该工作，

```
Server = .\SQLEXPRESS; Integrated Security=SSPI 
```

# java - 将用户对象存储到会话的安全性

> ID：11643913
> 
> 赞同：2
> 
> 时间：2012-07-25T06:31:17.730
> 
> 标签：java, security, authentication

我正在创建自己的身份验证系统（使用 Java）。当用户通过身份验证并从数据存储加载用户对象时，将此用户对象存储到会话是安全的，并假设当用户在会话中有用户对象时，它是通过合法登录获得的真实有效的用户对象？有没有我在这里没有看到的任何可能的安全问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:33:56.220

会话劫持？您的登录页面上可能存在 SQL 注入或 XSS？中间人攻击？

在设计安全登录系统时，您只需考虑几件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:35:10.590

原则上是的。

您一个人可以完全控制会话变量（客户端对这些变量既没有读取权限也没有权限）。如果绕过了身份验证机制，这并不是因为用户设置了自己的会话变量（例如，他可以设置 cookie 的内容）。

话虽如此，当然有一些方法可以*破解*网页（在[OWASP 前 10 名](https://www.owasp.org/index.php/Top_10_2010-Main)中阅读，包括 CSRF、XSS 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:37:24.170

我个人倾向于在我的所有网络应用程序上执行此操作，但我会在将用户对象中的敏感数据存储在会话中之前删除或加密它，例如密码

替代方法是填充和使用用户对象的轻量级版本，该版本将仅包含会话中所需的数据（即用户 ID、名字、姓氏）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:38:59.653

添加到所有其他帖子中，我认为还有一个安全问题。您`database`仅在用户登录时验证用户，然后您将用户设置为`session`让说当用户登录并且`session`在两者之间处于活动状态时访问被撤销，在这种情况下，用户将有权访问，直到他的会话寿命是不可接受的.

# javascript - 为什么使用 panoramio javascript api 不显示图像

> ID：11643920
> 
> 赞同：1
> 
> 时间：2012-07-25T06:31:48.860
> 
> 标签：javascript, image, panoramio

鉴于其纬度/经度，我正在尝试显示一堆城市的图像。

我正在使用 panoramio 的[javascript api](http://www.panoramio.com/api/widget/api.html#js)，但是，我没有看到任何输出。chrome 控制台上没有错误。

这是来源：

```
<head>
  <title>My page</title>
  <meta name="description" content="This is my page." />
  <script type="text/javascript" src="http://www.panoramio.com/wapi/wapi.js?v=1" />
  <script type="text/javascript">
  var myRequest = new panoramio.PhotoRequest({
      'rect': {'sw': {'lat': -30, 'lng': 10.5}, 'ne': {'lat': 50.5, 'lng': 30}}
    });
  var myOptions = {
          'width': 300,
          'height': 200
        };
  var widget = new panoramio.PhotoWidget('wapiblock', myRequest, myOptions);
  widget.setPosition(0);
  </script>
</head>
<body>

<div id="wapiblock"></div>

</body> 
```

显示相同问题的[jsfiddle ：](http://jsfiddle.net/AMy9j/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:51:50.307

问题是，非常有趣的是结束`</script>`标签。你不能缩短它。`<img />`始终以完整形式关闭所有标签，除了`<br />`和`<meta />`。

**错误的：**

```
<script src="http://www.panoramio.com/wapi/wapi.js?v=1" /> 
```

**对：**

```
<script src="http://www.panoramio.com/wapi/wapi.js?v=1"></script> 
```

工作示例：http: [//jsfiddle.net/AMy9j/1/](http://jsfiddle.net/AMy9j/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T10:47:02.380

小部件在撰写模式下不显示。发布后会显示。

[小部件的示例在这里](http://codespk.blogspot.com)

```
 <div dir="ltr" style="text-align: center;" trbidi="on">

    <script src="https://ssl.panoramio.com/wapi/wapi.js?v=1&amp;hl=en"></script>

    <div id="wapiblock" style="float: right; margin: 10px 15px"></div>

    <script type="text/javascript">

    var myRequest = {
      'tag': 'kahna',
      'rect': {'sw': {'lat': -30, 'lng': 10.5}, 'ne': {'lat': 50.5, 'lng': 30}}
    };

      var myOptions = {
      'width': 300,
      'height': 200
    };
    var wapiblock = document.getElementById('wapiblock');

      var photo_widget = new panoramio.PhotoWidget('wapiblock', myRequest, myOptions);

      photo_widget.setPosition(0);

    </script>

    </div> 
```

# c# - 组合框中的索引逻辑？

> ID：11643928
> 
> 赞同：1
> 
> 时间：2012-07-25T06:32:21.040
> 
> 标签：c#, combobox, indexing

我有combobox1和comboox2，在combobox1中我的元素是A，B，C和combobox2 a，b，c，d，e，f ...我使用属性屏幕添加了这些元素（我的意思是没有代码）。

```
 combobox1                     combobox2
    ---------------               ---------------
           A                            a
           B                            b
           C                            c
                                        d
                                        e
                                        f 
```

A 相关 a、b、c 和 B 相关 b、c 和 C 相关 d、e、f。

当我选择“A”时，我只想看到 a,b,c ；when select "B" just b,c etc.

我可以给出组合框1项目的索引号吗？当我选择“A”时，我只想看到“a”、“b”、“c”元素（我的意思是 0、1、2 个索引数字）当我选择“B”时，我只想看到 b、c（我的意思是 1、 2 个墨水数字）。我想这样做，因为如果没有索引号，我必须与编写代码建立所有关系。我在下面写了一个小代码，但还有很长的路要走。

索引逻辑更好，确定组合框中是否有索引逻辑:)

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
  {
     comboBox2.Items.Clear();
     switch (comboBox1.SelectedItem.ToString())
      {
        case "A":
           comboBox2.Items.AddRange(new string[] { "a", "b", "c" });
           break;

        case "B":
           comboBox2.Items.AddRange(new string[] { "b", "c" });
           break;
      }
      comboBox2.SelectedIndex = -1;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:50:04.513

您可以通过索引结构来避免 case 语句。

```
Dictionary<string, List<string>> items = 
      new Dictionary<string, List<string>>() { {"A", new List<string> {"a", "b","c"} } };

private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
  {
     combobox2.DataSource = ltems[comboBox1.SelectedItem.ToString()];
     combobox2.DataBind();
   } 
```

# eclipse-plugin - Eclipse Monkey 项目的当前存储库在哪里

> ID：11643929
> 
> 赞同：1
> 
> 时间：2012-07-25T06:32:21.897
> 
> 标签：eclipse-plugin

在用于安装 Eclipse 猴子插件的破折号项目站点上建议使用以下网址 [http://download.eclipse.org/technology/dash/update/](http://download.eclipse.org/technology/dash/update/)

但目前它没有响应

我在哪里可以找到准备安装 Eclipse Monkey 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:46:22.027

转到 URL：[http](http://wiki.eclipse.org/Eclipse_Monkey/Overview) ://wiki.eclipse.org/Eclipse_Monkey/Overview 。由于它不活跃，它已被存档。您也可以从上面的链接获取存档项目的 url。

否则，您可以从第 1.5 节单独下载插件

# php - 如何使用索引为多个数据库创建搜索引擎

> ID：11643933
> 
> 赞同：1
> 
> 时间：2012-07-25T06:32:37.797
> 
> 标签：php, mysql, search-engine

> **可能重复：**
> [如何在单个网页上连接到多个 MySQL 数据库？](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

我正在为我的网站构建一个搜索引擎，我有 6 个数据库和许多表。

对于多个数据库，我知道我必须构建一个索引文件，其中包含来自所有数据库和表的信息。

我知道如何在 PHP 和 MySQL 中为数据库构建搜索引擎，

连接多个数据库

```
mysql_connect(“hostname”, “username”, “password”);
mysql_select_db(“database1”);

mysql_connect(“hostname”, “username”, “password”);
mysql_select_db(“database2”); 
```

并像这样查询

```
"(SELECT * from database1.search_table WHERE MATCH (title, link) AGAINST(‘keyword’))
  Union All 
 (SELECT * from database2.search_table WHERE MATCH (title, link) AGAINST(‘keyword’)" 
```

我想通过制作一个索引文件来做到这一点。

请为此提出任何好的教程或方法，我谷歌了很多次但没有好的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:51:37.537

我想到了三种方法来做到这一点： 1-st 你可以用户多个数据库连接。这是最繁重的方法，因为它会增加与服务器的连接。2-nd 你可以只切换选择的数据库。3-rd 您可以通过选择查询中的数据库来使您的查询数据库独立。这是一个例子：

```
SELECT * FROM `database`.`table` WHERE `database`.`table`.`column`='something' 
```

我个人认为第三种方式是最好的。

# wcf - WCF 客户端配置中是否需要证书编码值？

> ID：11643936
> 
> 赞同：0
> 
> 时间：2012-07-25T06:33:12.427
> 
> 标签：wcf, security

我有安全模式设置为消息的 WCF 服务：

```
<security mode="Message">
   <message 
      clientCredentialType="UserName" 
      negotiateServiceCredential="true" 
      establishSecurityContext="true" 
      algorithmSuite="Default" />
</security>
...
<behaviors>
  <serviceBehaviors>
      ...
      <serviceCredentials>
        <serviceCertificate findValue="my Certifiacate ..."/>
      </serviceCredentials> 
```

服务证书在 serviceBehaviors 部分给出。

当 VS 创建客户端 (.NET)（通过添加服务引用）时，它会`<identity><certificate encodedValue="long string"/></identity>`在 web.config 中创建元素。

我发现即使此部分为空白，客户端也可以成功连接服务。我的猜测是客户端使用服务证书的编码值来加密消息。但是，当配置中未指定编码值时，它也可以工作吗？那么这样做的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:42:16.240

仅当您在 wcf 配置中指定要在绑定中使用加密时，它才会加密。

```
<wsHttpBinding>
  <binding>
    <security mode="Message">
      <transport clientCredentialType="Windows" proxyCredentialType="None"
       realm="" />
      <message clientCredentialType="Certificate" negotiateServiceCredential="true"
       algorithmSuite="TripleDesSha256Rsa15" establishSecurityContext="true" />
     </security>
   </binding>
</wsHttpBindings> 
```

# c# - 如何在此 ListView 中插入用于插入其他内容的图像？

> ID：11643948
> 
> 赞同：0
> 
> 时间：2012-07-25T06:34:05.920
> 
> 标签：c#, asp.net, image, listview

我是一名新的 ASP.NET 开发人员，我必须创建一个测验引擎应用程序。我正在使用 ListView 在特定测验下插入问题。

我有以下数据库设计：

```
QuizContent Table: ID, QuizID, QuestionID, AnswerID
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer
QuestionImage: ID, QuestionID, URL 
```

我现在想要的是让管理员能够将图像嵌入到这些问题中的任何一个。**既然我在数据库中有两个不同的表，我该怎么做？如上面的设计所示，一个用于问题，一个用于图像。**我有这个设计是因为不是所有的问题都会有图像。除此之外，我可能有两个或三个问题或更多具有相同图像的问题。

我知道我不应该发布太多的代码或信息，但我必须这样做才能明确：

```
<div align="center">
        <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem" OnSelectedIndexChanged="ListView2_SelectedIndexChanged">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                    <%--<td>
                         <asp:TextBox ID="UrlTextBox" runat="server" Text='<%# Bind("Url") %>' />
                     </td>--%>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table id="Table1" runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>'/>
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                    <%--<td>
                         <asp:FileUpload ID="ImageIDUploader" runat="server" size="10" />
                        </td>--%>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />

                        <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select" runat="server" CommandName="Select" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                    <%--<td>
                            <a href='<%# Eval("URL") %>' target="_blank">
                                <asp:Label ID="ImageURLlbl" runat="server" Text='<%# Eval("URL") %>' />
                            </a>
                        </td>--%>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Question</th>
                                <th style="border-bottom:2px solid #003366; ">Question Order</th>
                                <th style="border-bottom:2px solid #003366; ">Answer Explanation</th>
                                <th style="border-bottom:2px solid #003366; ">Image (URL)</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>     
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                    <%--<td>
                            <asp:Label ID="ImageURLlbl" runat="server" 
                                Text='<%# Eval("URL") %>' />
                        </td>--%>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT     QuestionID, Question, QuestionOrder, AnswerExplanation
                            FROM         dbo.Question
                            WHERE     (QuestionID IN
                                                      (SELECT DISTINCT QuestionID
                                                        FROM          dbo.QuizContent
                                                        WHERE      (QuizID = @QuizID)))"

            DeleteCommand="DELETE FROM [Question] WHERE [QuestionID] = @QuestionID" 
            InsertCommand="INSERT INTO [Question] ([Question], [QuestionOrder], [AnswerExplanation]) VALUES (@Question, @QuestionOrder, @AnswerExplanation)" 

            UpdateCommand="UPDATE [Question] SET [Question] = @Question, [QuestionOrder] = @QuestionOrder, [AnswerExplanation] = @AnswerExplanation WHERE [QuestionID] = @QuestionID">

                <DeleteParameters>
                    <asp:Parameter Name="QuestionID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                    <asp:ControlParameter ControlID="ListView1" Name="QuizID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" DefaultValue="0"
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

**那么该怎么做呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:40:49.170

不要在同一个列表视图中添加图像，而是显示现有图像的选择，并选择添加另一个图像，打开一个包含所有图像列表的弹出窗口和一个上传新图像的选项。

创建一个视图以结合问题和图像：

```
CREATE VIEW QuestionsView AS
SELECT Question.*, QuestionImage.ID AS ImageID
FROM Question LEFT OUTER JOIN QuestionImage ON Question.QuestionID = QuestionImage.QuestionID 
```

使用此视图为您的 ListView 选择记录。

要显示 DropDownList：

```
<td>
   <asp:DropDownList runat="server" DataSourceID="imagesDataSource" SelectedValue="<%# Bind("ImageID") %>" DataTextField="URL" DataValueField="ID" /> 
   <asp:SqlDataSource runat="server" ID="imagesDataSource" SelectCommand="SELECT * FROM QuestionImage" />
</td> 
```

更改您的 ListView 数据源以使用存储过程进行更新，该过程为每个 Bind 使用获取一个参数。

添加链接以打开图像列表弹出窗口。对于弹出窗口，您可以使用此处的示例之一：http: [//smashingspy.com/32-best-jquery-popup-window-dialog-box-example/](http://smashingspy.com/32-best-jquery-popup-window-dialog-box-example/)

# java - 为什么鼓励带有处理程序的私有变量？

> ID：11643950
> 
> 赞同：0
> 
> 时间：2012-07-25T06:34:11.450
> 
> 标签：java, android, theory

> **可能的重复：**
> [Getter 和 Setter 是邪恶的吗？](https://stackoverflow.com/questions/565095/are-getters-and-setters-evil)

我找不到有一个私有变量背后的逻辑原因，它带有一个 getter 和一个 setter，除了直接处理比拥有公共变量更可取的值之外什么都不做。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:37:10.253

因为，

**验证**是原因之一。将字段名称保留在公共 API 之外还允许您稍后在不破坏 API 的情况下更改它。它还允许您稍后以其他方式更改类，例如将字段移动到其他类（以便公共设置器将调用不同类中的设置器）。调用 setter 还允许您做其他事情，例如通知感兴趣的其他组件值的变化。如果直接访问该字段，这一切都是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T06:37:47.293

他们更喜欢未来证明代码。将来如果您想消除该变量或使用另一个变量来导出此变量值 - 更改会更简单。您只需要更改 getter/setter，其余代码不受影响。这不是直接访问变量的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T06:40:48.480

正如@user370305 已经提到的一个原因是验证。其他原因是类型转换。Setter 可以接受字符串并将其解析为整数。还有一个原因是数据封装。不一定要将简单的文件存储在同一个类中。`setName(String)`类的方法`Person`可以将名称存储在更复杂的数据结构中。使用简单字段不允许您在`Person`不影响使用它的代码的情况下更改类的内部实现。

编辑：还有另一个技术原因。使用 getter 和 setter 发现和调试代码要容易得多。如果某些字段意外更改，您可以将断点切换到适当的设置器并很快找到问题。如果这个字段是公开的，并且你有 1000 个对该字段的引用，那么理论上你必须在所有这些地方放置 1000 个断点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T06:44:28.890

**1.** **在不同的上下文中**`Encapsulation`有不同的用途，类似**的不断变化的行为需要封装在抽象类或接口**中。**`design patterns`**

 ******2.**拥有`private instance variable`和`public getter setter`是 b

**3.**主要是**验证用户的输入**... 直接将值设置为实例变量是危险的。

**例如：**

```
int dogAge;

       System.out.println("My dogs age is :"+dogAge); 
```

**现在，如果有人给出负年龄怎么办......那么......？？？**

**所以我们必须这样做……**

```
int dogAge;

      public void setAge(int age){

       if (age>0){
         dogAge = age;
        }
       else{

              System.out.println("Not a valid age");
           }

     }

     public int getAge(){

        return dogAge;

      }

    System.out.println("My dog age is :"+ getAge()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T06:39:37.680

它很简单.. 如果您将这些变量公开，那么您就授予了向它们添加任何值的权利。但是，如果您通过 getter 或 setter 执行此操作……您可以对其进行检查并控制输入或转换，而无需让最终用户知道

例如：

```
getName(){
  return firstName+lastName;
} 
```

或者

```
 getData(){
  // code to convert byte to Mb or whatever you like to represent
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T06:43:26.300

使用`accessors`来限制对字段变量的直接访问优于使用`public fields`，但是，这样做`getters and setter for each and every field is overkill`并被认为不是一个好习惯。不过，这也取决于具体情况，有时您只需要一个哑数据对象。`Accessors`应该为真正需要它们的字段添加。请参阅此链接以了解有关它的更多信息[Getter Setter: To Use or Not to Use](http://java.dzone.com/articles/getter-setter-use-or-not-use-0)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-25T06:56:02.187

> 我找不到有一个私有变量背后的逻辑原因，它带有一个 getter 和一个 setter，除了直接处理比拥有公共变量更可取的值之外什么都不做。

考虑到您在 getter 和 setter 中添加的任何其他代码都会增加复杂性并且还需要进行测试。对于完全由您控制的小型系统，使用 getter 和 setter 可能没有什么好处。运用你的专业判断。您可能不需要未来的校对和增加的复杂性。或者，拥有直接访问的效率和简单性对您来说可能更重要。

就个人而言，我认为 getter 和 setter 被过度使用了。对于完全由您控制的小型系统，直接访问可能是可行的方法。****

# asp.net-mvc - 将 ASP.NET MVC 布局应用于 Jquery.Mobile 页面的最佳实践

> ID：11643954
> 
> 赞同：8
> 
> 时间：2012-07-25T06:34:51.010
> 
> 标签：asp.net-mvc, jquery-mobile

这个问题接近于：[ASP.NET MVC 应用程序中的 jQuery Mobile 布局，](https://stackoverflow.com/questions/6875520/jquery-mobile-layout-in-asp-net-mvc-app)但我正在尝试找到最佳实践，因为我认为在每个视图中重新键入页眉和页脚效率不高。肯定有更好的办法。

因此，我正在寻找使 ASP.NET MVC 共享布局视图（也称为母版页）与我的视图/部分视图一起使用的最佳方法。

通过阅读，有两种方法可以从 MVC 布局呈现 JQuery 移动页面：

1) 标准布局格式：

```
 <!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 
        ...
</head> 
<body>
<div  data-role="page"> 
    <div  data-role="header">...</div> 
    <div  data-role="content">@RenderBody()</div> 
    <div  data-role="footer">...</div> 
</div>
</body>
</html> 
```

在我学习的过程中，我开始遇到问题，后来才知道你不能真正在主支付中加载其他“页面”。所有继承的视图都必须是该主 Jquery 移动页面的一部分。坏的。2)

```
 <!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 
        ...
</head> 
<body>
<div  data-role="page">     
     @RenderBody()
</div>
</body>
</html> 
```

这将起作用，但这也意味着我必须在每个视图上重新键入页眉和页脚。

各位可以分享一下你们的看法吗？让我能够在我的布局中加载多个 Jquery Mobile“页面”而又不必到处重复页眉/页脚的最佳方法是什么？...我的意思是如果一个人必须在某个时候改变怎么办？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:16:48.137

我在类似情况下做过的一件事是制作没有“页面”div的主布局：

```
<!DOCTYPE html> 
<html> 
    <head>...</head>
    <body>
        @RenderBody()
    </body>
</html> 
```

然后制作从主布局继承的布局页面，您可以在其中包含页眉/页脚

```
@{
    Layout = "~/Views/Shared/_LayoutMobileMaster.cshtml";
}
<div data-role="page" data-theme="b" position="fixed">
    <div data-role="header" data-position="fixed" data-theme="b" id="contentHeader">
        <a id="backBtn" data-direction="reverse" data-icon="back" class="ui-btn-left">Back</a>
        <h1>@ViewBag.Title</h1>
        <a id="logoutBtn" data-icon="gear" class="ui-btn-right">Logout</a>
    </div>
    <div data-role="content" data-theme="b">
        @RenderBody()
    </div>
</div> 
```

当然，如果您的每个页面都有不同的页眉/页脚，那么这不是很实用；您还不如取消中间布局并将页眉/页脚直接放在每个视图中。但是，如果您有不同的多个页面集，其中每个集都需要具有特定的外观，那么我认为这会非常有用。

# sql - 带有日期计算的 SQL 视图

> ID：11643974
> 
> 赞同：0
> 
> 时间：2012-07-25T06:36:10.257
> 
> 标签：sql

我有一个跟踪库存位置的数据库。

该应用程序编写得很糟糕，并且是一团乱七八糟的意大利面条代码，没有 MVC 分离，并且模型的更新可以发生在任意数量的文件中。

首次编写应用程序时，它只需要跟踪库存当前所在的位置，因此库存表中存在一个 SiteID 列，该列列出了它当前分配到的位置。

从那时起，所有者决定他想要维护库存分配到哪些位置的历史记录。我没有遍历所有代码来尝试查找它可能更新的所有位置，而是添加了一个触发器`ON UPDATE`，并将其添加`ON INSERT`到在历史表中记录移动的库存表。

最初的要求是能够查看库存的移动历史，这很容易解决`SELECT * FROM history WHERE InvID = X ORDER BY timestamp DESC`

现在，我被要求为给定位置生成一个列表，该列表显示何时将一段库存分配给该站点，以及它离开的日期（下面的示例）。理想情况下，如果可能的话，我想在不修改现有架构和触发器的情况下实现这一点。

我能够检索一次分配给站点的所有库存的列表以及分配日期。我正在努力解决的是如何找到该库存离开网站的日期。我可以在应用程序中执行此操作，但我想知道是否可以使用 SQL。

**库存表**

```
InventoryID     InventoryName    SiteID
===========     =============    ======
          1     Widget A         $ID
          2     Widget B         $ID
          3     Widget C         $ID 
```

**位置表**

```
SiteID    SiteName
======    ========
     1    Somewhere
     2    Nowhere
     3    Anywhere 
```

**历史表**

```
InvID    SiteID    Timestamp
=====    ======    =========
    1         1    2012-01-01
    1         2    2012-01-02
    2         1    2012-01-03
    1         1    2012-01-04 
```

**新视图应该是这样的**

```
InvID    DateIn        DateOut
=====    ==========    ==========
    1    2012-01-01    2012-01-02
    2    2012-01-03    NULL
    1    2012-01-04    NULL 
```

**使用编程语言生成表的伪代码（后处理 SQL 查询**

```
SELECT * FROM history WHERE SiteID = 1

foreach (row in result) {
    DateOut = SELECT * FROM history WHERE InvID = result.InvID AND timestamp > result.timestamp LIMIT 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:52:06.860

试试这个：

它只是可能与左外连接到同一个表并从右表中获取最小日期

```
select H1.InvID,I.InventoryName,H1.SiteID,H1.[Timestamp] [date in],
MIN(H2.[Timestamp]) [date out] 
from    History H1 left outer join History H2
on      H1.InvID=H2.InvID and H1.[Timestamp]<H2.[Timestamp]
join Inventory I on I.InventoryID= H1.InvID
where   H1.SiteID=1
group by    H1.InvID,I.InventoryName,H1.SiteID,H1.[Timestamp] 
```

[Sql Fiddle 演示](http://www.sqlfiddle.com/#!3/3bce2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:52:39.230

您可以使用子查询来查找库存项目位于不同站点的第一个日期：

```
select  h1.InvID
,       h1.Timestamp as DateIn
,       (
        select  min(TimeStamp)
        from    history h2
        where   h2.InvID = h1.InvID
                and h2.SiteID <> h1.SiteID
                and h2.TimeStamp > h1.TimeStamp
        ) as DateOut
from    history h1
where   h1.SiteID = X 
```

# php - 如何在 PHP 和 MySQL 上使用登录用户创建电子邮件通知

> ID：11643976
> 
> 赞同：-5
> 
> 时间：2012-07-25T06:36:23.897
> 
> 标签：php, mysql, email, login, notifications

> **可能重复：**
> [访问页面时如何发送电子邮件通知？](https://stackoverflow.com/questions/6021183/how-to-send-an-email-notification-when-a-page-is-visited)

我只是想问一下如何通过登录系统创建电子邮件通知。例如，如果用户登录系统，那么管理员将从系统收到一封邮件，通知用户在用户访问系统的确切日期和时间登录。

类似用户的访问在MYSQL数据库上

当他/她登录时，我如何使用会话调用用户表并通过 PHP 系统给我发邮件？？？

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:52:13.507

```
$email = "self@email.com";
$subject = "New Membership";
$message = "your text here";
$header = "Content-Type: text/html; charset=UTF-8;\r\n";
mail($email, $subject, $message, $header); 
```

您还必须在 MySql 文件夹中的某处有您的电子邮件弹出和 smtp 连接。也许其他人可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:53:57.577

我假设您在登录时使用 MySQL 数据库来检索用户的信息。

```
 if($login_success){

            $email_to="admin@domain.com";
            $email_subject="A user logged in to the system";
            $email_from='system_info@domain.com';

            $email_message = "Following user has logged in to the system at ".$time."\n\n";

            $email_message .= "Name  : ".$name."\n\n";
            $email_message .= "Email  : ".$email."\n\n";
            $email_message .= "User ID: ".$user_id."\n\n";

            $headers = 'From: '.$email_from."\r\n".
            'Reply-To: '.$email_from."\r\n" .
            'X-Mailer: PHP/' . phpversion();
            @mail($email_to, $email_subject, $email_message, $headers);
        } 
```

可以计算登录时间 -`$time= date('l jS \of F Y h:i:s A');`

希望这可以帮助

# c++ - 非特化模板参数的模板特化

> ID：11643979
> 
> 赞同：3
> 
> 时间：2012-07-25T06:36:49.180
> 
> 标签：c++, templates, specialization

鉴于我可以这样做：

```
template <class T>
struct foo {
    typedef T   type;
};

template <template <size_t> class B>
struct foo2 {
    typedef B<0>    type;
};

struct bar1 {};

template <size_t N = 1>
struct bar2 {};

// usage
foo<bar1>::type // ok, = bar1
foo<bar2<> >::type // ok, = bar2<1>
foo2<bar2>::type // ok, = bar2<0> 
```

我可以部分专门化 foo 以接受未专门化的类参数 bar2 吗？像：

```
foo<bar2>::type  // should give me bar2<0> 
```

我在下面尝试了一些方法，但它不起作用：

```
// compile error 
template <template <size_t> class B>
struct foo<B> {   
    typedef B<0>    type;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T07:11:50.677

使用`decltype`重载的模板函数，我想出了这个：

```
#include <type_traits>  

struct bar;

template <size_t> struct baz;

template <typename T>
struct foo_type
{
  typedef T type;
};

template <template <size_t> class C>
struct foo_class_template
{
  typedef C<0> type;
};

template <typename T>
foo_type<T> doit();

template <template <size_t> class C>
foo_class_template<C> doit();

void stackoverflow()
{
  typedef decltype(doit<bar>()) Ret;
  static_assert(std::is_same<Ret::type, bar>::value, "oops");

  typedef decltype(doit<baz>()) Ret2;
  static_assert(std::is_same<Ret2::type, baz<0>>::value, "oops");
} 
```

不过，您需要 C++11 支持才能正常工作。

# azure - AjaxControlToolkit.dll 在 Windows azure 上不起作用

> ID：11643983
> 
> 赞同：1
> 
> 时间：2012-07-25T06:37:11.037
> 
> 标签：azure

当我在 azure 中部署我的 asp.net 应用程序时，以下 dll 不起作用： 1\. DropDownCheckBoxes.dll 2\. AjaxControlToolkit.dll

它们在服务器和本地部署的非云应用程序中完美运行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:45:35.130

您能否解释一下为什么您认为这些程序集在 Windows Azure 中不起作用？您是否在网络角色或网站中遇到问题？

大多数问题的出现是因为程序集未包含在包中。您能否为这两个程序集尝试以下操作：

1.  右键单击程序集
2.  选择**属性**
3.  **将复制本地**更改为**真**

重新部署应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T01:53:14.063

将其发布到 Azure 时选中“在目标位置删除其他文件”复选框，它将起作用。我遇到了同样的问题，其他解决方案都不起作用。这也是我在其中找到解决方案的线程，如此简单，但谁知道呢！我也不必卸载并重新安装，我所做的只是在发布期间选中复选框：

[http://social.msdn.microsoft.com/Forums/windowsazure/en-US/e29cc03b-c822-4ba9-b044-51107c367848/ajaxcontroltoolkit-is-not-working-when-deployed-to-azure?referrer=http ://social.msdn.microsoft.com/Forums/windowsazure/en-US/e29cc03b-c822-4ba9-b044-51107c367848/ajaxcontroltoolkit-is-not-working-when-deployed-to-azure?referrer=http:// /social.msdn.microsoft.com/Forums/windowsazure/en-US/e29cc03b-c822-4ba9-b044-51107c367848/ajaxcontroltoolkit-is-not-working-when-deployed-to-azure][1]

# objective-c - 关于代表的一些困惑

> ID：11643992
> 
> 赞同：1
> 
> 时间：2012-07-25T06:37:48.680
> 
> 标签：objective-c, ios

```
@protocol msgRcvdFrom <NSObject>

@optional
-(void) msg:(NSString *)msg from:(NSString *)from;
.
.
. 
if([delegate respondsToSelector:@selector(msg:from:)])
{
    [delegate msg:body from:user];
} 
```

这是我的委托，两个不同的类正在使用它，当调用 respondsToSelector 时会通知两个类吗？或者如果我想一次通知一个班级。请清除这种混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:51:43.083

`delegate`通常是一个对象（声明为`id< msgRcvdFrom>`）。所以..当你打电话时`respondToSelector`，`delegate`你是在询问那个特定的对象是否有方法！

# c# - 如何实现方法 (T) 从一个界面

> ID：11643993
> 
> 赞同：0
> 
> 时间：2012-07-25T06:37:48.103
> 
> 标签：c#, interface

我正在建立一个小型基础设施，用于与不同的搜索系统（例如 Apache Solr、SQL DB 等）进行通信。对于每个系统，我都有一个单独的类 (="communicator")，它实现了一个公共接口，以便后续应用程序可以以相同的方式与所有搜索系统“对话”。此外，每个搜索系统都有自己的类，我用它来创建实际查询。该单个查询类的对象保存所有相关的查询参数并传递给相应的通信器类。所以对于 Solr，它看起来像这样：

```
Solr solr = new Solr();
SolrQuery sQuery = new SolrQuery();
//use some methods on sQuery to specify the query
var result = solr.query(sQuery); 
```

到现在为止还挺好。但是如何在界面中指定查询方法呢？Solr 类需要一个 SolrQuery 类型的对象。MySQL 类需要一个 MySQLQuery 类型的对象。

我想要的一种解决方案是：我像这样更改整个界面：

```
interface ISearchTechnology<T>
{
  someReturnType query(T queryObject);
} 
```

然后将 Solr (eg) 的类定义更改为

```
class Solr : ISearchTechnology<SolrQuery> 
```

这样可行。但这在概念上没有意义。SolrQuery 类型仅与这一方法（查询）相关，与整个类无关。我可能需要包括其他类型（SolrQuery 除外，例如 SolrAnswer）。包括所有这样的人是令人困惑的，违反了我对这个概念的理解。

我试图将该`<T>`部分附加到接口（`query<T>(T queryObject)`）中的方法，但我还没有找到任何实际实现它的方法。

最后我想有以下情况：每个通信器类都实现了接口要求的查询方法，但只接受一种特定类型的参数，与所有其他通信器类不同。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:46:45.303

`ISearchTechnology<T>`即使从概念的角度来看，您的方法也是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:27:15.877

这个怎么样：

```
public interface ITechnology<TQuery, TSearch>
{
    TQuery Query(TQuery queryObject);
    TSearch Search(TSearch saerchObject);
}

public interface ISolrTechnology : ITechnology<SolrQuery, SolrSearch>
{
}

public class Solr : ISolrTechnology
{
    public SolrQuery Query(SolrQuery queryObject) {
        // ...
    }
    public SolrSearch Search(SolrSearch searchObject) {
        // ...
    }
} 
```

`interface ISolrTechnology`当然是可选的。`class Solr`可以继承`ITechnology<SolrQuery, SolrSearch>`自己。