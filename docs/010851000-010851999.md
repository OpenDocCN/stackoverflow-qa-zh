# StackOverflow 问答 10851000-10851999

# jquery - 调整div中第一张图片的大小

> ID：10851001
> 
> 赞同：2
> 
> 时间：2012-06-01T13:13:58.017
> 
> 标签：jquery

我需要使用 jquery 设置图像的特定宽度和高度（在 css 中），但仅限于一个 div 中的第一个图像。有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T13:14:57.173

`#your_div`is 是指包含图像的 div，可能是你有别的东西。

```
$('#your_div img:first').css({
   height: 200, // also use '200px' or something other
   width: 200  // '200px' or something other
}); 
```

的替代品`img:first`是`img:eq(0)`。

阅读有关 jQuery[`:first`](http://api.jquery.com/first)和[`:eq()`](http://api.jquery.com/eq)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:15:54.013

```
$("#myDiv img:first").width(100).height(100); 
```

这是[JsFiddle](http://jsfiddle.net/LTsSc/)示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:18:53.413

试试看：

```
$('#yourDiv img:first-child').css({width:'100px',height:'100px'}); 
```

# jquery - Rails/jquery mobile 呈现空白页面以响应不呈现任何内容。我怎么能压制它？

> ID：10851002
> 
> 赞同：1
> 
> 时间：2012-06-01T13:13:58.327
> 
> 标签：jquery, ruby-on-rails-3, jquery-mobile

在我看来，单击单选按钮时，答案将发布到数据库中，无需渲染任何内容，但我收到了 406 消息。

应用程序.js：

```
$('.submittable').live('change', function() {
    $(this).parents('form:first').submit();
    return false;
}); 
```

控制器：

```
 def update_result
    ...
    render :nothing => true
  end 
```

看法：

```
<%= form_tag update_result_answers_path, 'data-ajax' => false do %>
   ...
<% end %> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:44:46.487

`406`表示服务器理解并处理了请求，但服务器的响应是客户端无法理解的形式。

你应该试试：

```
head :ok 
```

`render :nothing`与 具有相似的含义`head :ok`。它们都 send `200`，除了`head :ok`允许您发回更多的 http 标头。它对于 ajax 请求很有用，在这些请求中，您想要发送回浏览器的只是对请求已完成的确认。在 上`complete callback`，您可以更新 UI 以显示它已成功完成。

# content-management-system - Kentico CMS：找不到页面 URL

> ID：10851006
> 
> 赞同：2
> 
> 时间：2012-06-01T13:14:09.500
> 
> 标签：content-management-system, http-status-code-404, kentico

**肯蒂科CMS**

我创建了一个自定义 404 页面，当有人遇到 404/page not found 错误时重定向到该页面。

然后在`Site Manager > Settings > Content`我添加了这个自定义页面的 URL 位置。

现在，当我尝试导航到我的站点中不存在的页面时，我仍然得到标准的 404 服务器错误页面。为什么它没有重定向到我的自定义页面？

**网站结构：** ![在此处输入图像描述](../Images/a0fb8a03dd4984085404c22bf59157dd.png)

**站点管理器 > 设置页面：** ![在此处输入图像描述](../Images/0d522a955741f23a86970f30068ee1ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:41:56.847

如果您使用的是无扩展名 url（看起来像），您是否更改了 IIS 中的 404 设置？您需要将 404 错误映射到 Kentico 的处理程序 /cmspages/handler404.aspx。

[IIS 7 说明](http://devnet.kentico.com/docs/devguide/index.html?custom_url_extensions_iis7.htm)。 [IIS 6 说明](http://devnet.kentico.com/docs/devguide/custom_url_extensions_iis6.htm?zoom_highlightsub=404)

# php - 安全 MYSQL 连接详细信息

> ID：10851007
> 
> 赞同：1
> 
> 时间：2012-06-01T13:14:18.023
> 
> 标签：php, mysql

只是想对此提出一些建议。是否可以在浏览器中查看 PHP 源代码。我想不是。但想确保我的连接详细信息，例如：

```
 include ("connection.php");
$con = mysql_connect("$host","$db_name","$db_user, $db_pass"); 
```

任何使用浏览器的人都无法调用和查看。

如果我 .htaccess the connection.php 文件，这是否意味着您无法使用 ftp 访问该文件，但任何调用 include() 文件的脚本仍然可以工作？

希望这是有道理的。我要确保的是我的数据库连接密码是安全的。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:16:50.910

有几种方法可以通过浏览器泄露您的 PHP 代码，其中包括：

1.  错误配置的服务器（因此 php 文件不会被解析）
2.  通过附加扩展名制作备份文件：例如 secretfile.php.bak
3.  攻击者也有可能通过以下方式访问文件：`http://example.com/../../../etc/passwd`
4.  不是真正进入 php 文件的方法，但另一种获取信息的常用方法是通过[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。（我看到您正在使用`mysql_*`-> 请停止使用它）：

> `mysql_*`请停止使用古老的功能编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://goo.gl/vFWnC)。

将所有 php 文件保留在文档根目录之外并仅在文档根目录中保留引导文件被认为是一种很好的做法。

您应该将数据库设置为仅在可能的情况下接受来自本地主机的连接的另一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:16:37.900

不。您无法在浏览器中看到服务器端 (PHP) 代码，除非您的服务器配置有问题。

所以放松并停止担心有人从浏览器中的“查看源代码”窃取您的数据库用户名和密码。这不会发生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:17:27.757

我的建议是创建一个包含所有敏感数据的配置文件。确保此文件位于服务器根目录之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:15:18.453

不，没有人可以查看您的 PHP 代码（除非他们以某种方式通过 FTP、SSH 访问了您的服务器……）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:18:31.330

*无法*查看 PHP 代码。但是有可能以某种方式操纵您的应用程序。因此，为了获得双重保护，您可以采取哪些措施，从公共层次结构之外的路径中包含一个包含连接数据的文件，例如：

```
/home/public_html/index.php <= your website

http://yoururl.org gets to public_html => index.php

/home/files/connectionData.php <= file to store your files 
```

# javascript - JavaScript 移动应用程序的使用数据收集

> ID：10851008
> 
> 赞同：2
> 
> 时间：2012-06-01T13:14:19.750
> 
> 标签：javascript, mobile, cordova

我想收集有关客户如何使用我开发的应用程序的信息。目标是改善用户体验并了解人们最常使用的内容。

根据以前的经验，我知道有两种选择 - 要么调用 ad-hok URL 来收集状态/事件/页面/点击，要么在本地存储中聚合信息并在可能的情况下将其推送回服务器。

是否已经为移动应用制定了解决方案？用 JavaScript 编写的可以轻松插入的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:18:38.373

使用flurry或mixpanel。

[http://www.flurry.com/](http://www.flurry.com/)

[https://mixpanel.com/](https://mixpanel.com/)

# django - django==1.4 支持 html5

> ID：10851009
> 
> 赞同：9
> 
> 时间：2012-06-01T13:14:28.227
> 
> 标签：django, django-templates

我有一个使用 Django 1.4 构建的小型博客应用程序，最近，我一直在学习 html5 和 css3 的“点点滴滴”。我即将开始将我的网站转换为 html5/css3，我想知道 Django 小部件是否支持 html5(?)

我的博客没什么特别的——一些表格，一些表格等等。例如，当我这样做时，

```
{{form_as_p}} 
```

我想知道 django 是否会生成所需的 html5 标记（？）我阅读了文档，它说管理页面支持 html5，但我找不到任何常规应用程序的文档。

如果 Django 不支持 html5，那么实现这一目标的最佳方法是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T14:00:48.050

Django 的表单输出是 XHTML。Django 不支持新的 HTML5 输入类型，如数字、电子邮件、url 等，但添加它们并不难。请参阅[https://code.djangoproject.com/ticket/16630](https://code.djangoproject.com/ticket/16630)或[https://github.com/rhec/django-html5](https://github.com/rhec/django-html5)话虽如此，我不知道 Django 生成对 HTML5 无效的标记的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:24:23.800

“如果 Django 不支持 html5，那么实现这一目标的最佳方法是什么？”

到目前为止，我一直在尝试一种猴子补丁方法，结果非常令人鼓舞，对我来说最大的好处是无需更改现有代码，也无需修改第三方应用程序或 Django 管理员。这使事情变得非常干净和集中，并且不需要多毛和重复的`admin.site.register(...)`/ `admin.site.register(...)`。

[https://github.com/danielsokolowski/django-html5monkeypatch](https://github.com/danielsokolowski/django-html5monkeypatch)

# networking - 如何从 Internet 访问作为服务从 netbeans 运行的 Tomcat 7？

> ID：10851015
> 
> 赞同：2
> 
> 时间：2012-06-01T13:14:54.647
> 
> 标签：networking, tomcat7

我完成了一个 jsp 项目，我想通过 Internet 提供它。我打开了路由器的 8084 端口，并尝试访问 URL mypublicIP:8084，但没有任何反应。我还禁用了 Windows 防火墙，并且没有使用任何其他防火墙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:06:06.150

您必须将路由器配置为将 Internet 请求转发到运行 Tomcat 的特定计算机。为此，您可以向路由器提供与您所谓的“mypublicIP”不同的计算机 IP 地址。在我的 Linksys 路由器配置 Web 应用程序中，它称为端口范围转发。

# perl - XPath 表达式使用 XML::LibXML::XPathContext -> findnodes() 返回空节点列表

> ID：10851018
> 
> 赞同：2
> 
> 时间：2012-06-01T13:15:05.817
> 
> 标签：perl, xpath, libxml2

xml:

```
<zoo xmlns="http://www.zoo.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.zoo.com animali.xsd">

<area id="1" posizione="nord" nome="scimmie">
    <animale>
        <nome>Gigi</nome>
        <sesso>Male</sesso>
        <eta>3</eta>
        <img>../images/Gigi.png</img>
    </animale>

    <animale>
        <nome>Gigia</nome>
        <sesso>Female</sesso>
        <eta>2</eta>
        <img>../images/Gigia.png</img>
    </animale>
</area>

<area id="2" posizione="nord" nome="giraffe">
    <animale>
        <nome>Giro</nome>
        <sesso>Male</sesso>
        <eta>6</eta>
        <img>../images/Giro.png</img>
    </animale>
</area>
<area id="3" posizione="D8" nome="Cammelli"/>
</zoo> 
```

代码：

```
my $parser = XML::LibXML->new;
my $doc = $parser->parse_file("../xml/animals.xml");
my $root = $doc->getDocumentElement();
my $xpc = XML::LibXML::XPathContext->new;
$xpc->registerNs('zoo', 'http://www.zoo.com');
my $xpath_exp = "//zoo:animale[nome='".$name."']";  #also tried with "Gigi" instead of $name
my $size = $xpc -> findnodes($xpath_exp, $doc)->size(); 
```

使用这些 xml 和代码，我总是有 $size = 0

但如果我尝试不带谓词的 xpath 表达式，例如“//zoo:animale”或“//zoo:animale/nome”

如果我在这个 xpath 测试器上尝试相同的表达式（带有谓词）：http: [//www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm](http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm)，它可以工作

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:19:22.797

> ```
> "//zoo:animale[nome='".$name."']"; 
> ```

**必须是**：

```
"//zoo:animale[zoo:nome='".$name."']"; 
```

# sql - SQL - 在联合查询中只计算一个表的条目

> ID：10851020
> 
> 赞同：4
> 
> 时间：2012-06-01T13:15:10.170
> 
> 标签：sql, ms-access, count, aggregate

这似乎是一件很平常的事情，但我似乎找不到如何去做。

我有一个连接查询

```
 SELECT a.nom_batim, COUNT(b.maxten) AS NumFaulty
 FROM tblTrials AS b, tblRooms AS a
 WHERE b.batiment = a.batiment
 AND b.maxten > 10
 GROUP BY a.nom_batim
 ORDER BY a.nom_batim 
```

那应该只返回 tblTrials 条目的计数。但是，由于我不知道如何编写代码，它目前正在计算 的所有出现次数`b.maxten > 10`， TIMES 的所有出现次数`b.batiment = a.batiment`。我`b.maxten > 10`在表中有 1 次实际出现，但是 b.batiment = a.batiment 出现了 231 次（这些表设置不当，不是我的选择；这些表对我来说是只读的），因此它返回计数231.

如何正确显示ID 字段`COUNT(b.maxten)`，但仍显示`a.nom_batim`为用户友好的表示形式？`batiment`（`a.nom_batim`是建筑物的长名称# `batiment`）

**更新**
这就是我到目前为止所做的事情..

```
SELECT a.nom_batim, COUNT(b.batiment) AS NumFaulty
FROM (SELECT DISTINCT nom_batim, batiment FROM tblRooms) AS a
INNER JOIN tblTrials AS b ON a.batiment = b.batiment
WHERE b.maxten > 10
GROUP BY a.nom_batim
ORDER BY a.nom_batim 
```

当我只需要来自 tblRooms 的最大约 30 个值，但必须查询所有 5000+ 行时，它似乎可以工作，但只选择不同的`batiment`值。没有`batiment`桌子就没有办法做到这一点`tblBatiment: batiment, nom_batim`我知道这是最好的方法，但我没有访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:18:49.877

您可以在子查询中执行计数，因此它仅适用于一个表的记录：

```
SELECT ..
FROM (SELECT batiment, COUNT(maxten) FROM tblTrials WHERE maxten > 10) AS b
    ,tblRooms AS a
... 
```

否则，计数将应用于最终结果中的所有记录，因为查询引擎不会区分来自 COUNT 中一个地方或另一个地方的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T15:15:55.230

回到你原来的查询，如果你在 tblTrials 表上有一个标识列，你可以得到你想要的：

```
SELECT a.nom_batim, COUNT(distinct b.id) AS NumFaulty
FROM tblTrials b INNER JOIN tblRooms a   
     ON b.batiment = a.batiment
WHERE b.maxten > 10
GROUP BY a.nom_batim
ORDER BY a.nom_batim 
```

我还用正确的连接语法（使用“join”关键字）替换了您的连接语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:19:53.583

尝试使用：

```
HAVING b.maxten>10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:20:55.483

试试这个：

```
 SELECT a.nom_batim, COUNT(b.maxten) AS NumFaulty
 FROM tblTrials AS b, tblRooms AS a
 WHERE b.batiment = a.batiment
 GROUP BY a.nom_batim
 HAVING count(b.maxten) > 10
 ORDER BY a.nom_batim 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T13:49:15.503

到目前为止我能做的最好的工作：

```
SELECT a.nom_batim AS Building, Count(q.batiment) AS Fixes
FROM (SELECT DISTINCT nom_batim, batiment FROM tblRooms)  AS a 
INNER JOIN tblTrials AS q 
ON a.batiment = q.batiment
WHERE q.maxten > 10
GROUP BY a.nom_batim 
```

考虑到 tblTrials 可能包含 60k 个条目，而 tblRooms 可能包含 10k 个条目，似乎`SELECT DISTINCT nom_batim, batiment FROM tblRooms`会很慢。但条目尚未输入，所以我无法真正测试它。Gordon 提出了一个很好的观点，如果它返回相同的东西，它很可能是相同的速度。我确实有多字段主键，因此它也可能对事情有所帮助（也许不如 ID 字段多，但你能做什么）。

感谢其他回答。

# cordova - PhoneGap 调试 - 概念

> ID：10851023
> 
> 赞同：1
> 
> 时间：2012-06-01T13:15:17.180
> 
> 标签：cordova

设备的行为方式存在一些差异，有些手机具有其他手机没有的功能，那么在不同平台上调试和测试 PhoneGap 应用程序而不需要购买昂贵的移动设备的最佳方法是什么？

这只是一个概念问题。请列出所有可能的工具或方法以及资源链接

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:32:22.330

链接很少，希望它会起作用。

[http://wiki.phonegap.com/w/page/16494768/Debugging%20PhoneGap%20Apps](http://wiki.phonegap.com/w/page/16494768/Debugging%20PhoneGap%20Apps)

[http://phonegap.com/2011/05/18/debugging-phonegap-javascript/](http://phonegap.com/2011/05/18/debugging-phonegap-javascript/)

[http://developer.android.com/guide/webapps/debugging.html](http://developer.android.com/guide/webapps/debugging.html)

[http://www.frenchguys.com/wordpress/showing-console-consolelog-output-phonegap-androideclipse/](http://www.frenchguys.com/wordpress/showing-console-consolelog-output-phonegap-androideclipse/)

# css - 在 RAILS 应用程序中使用 COMPASS 的 CSS3 PIE

> ID：10851026
> 
> 赞同：1
> 
> 时间：2012-06-01T13:15:20.940
> 
> 标签：css, internet-explorer-8, compass-sass, css3pie

我在 IE 8 中需要 CSS3，所以我认为我需要 PIE 在 IE8 中创建 css3“函数”。我怎样才能简单地将它集成到我的设计中。我有很多边界半径和其他 css3 效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:06:14.213

我没有任何运气使用指南针安装派。我刚刚从[css3pie.com](http://css3pie.com)下载了 pie ，将 PIE.htc 文件放在 assets 下的 stylesheets 目录中，并将以下内容放在我导入到所有个人样式表中的 _base.scss 文件中。

```
@import "compass/css3/pie";

$pie-behavior: url("/assets/PIE.htc");
$pie-base-class: pie-element;

.pie-element {
  @include pie-element(relative);
} 
```

然后我使用@extend .pie-element。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:22:33.707

请参阅[指南针文档](http://compass-style.org/reference/compass/css3/pie/)。

> > 指南针安装指南针/馅饼
> > 
> > 这将安装一个示例样式表和一个 PIE.htc 行为文件，必须将其加载到您的 IE 页面中。

# ruby - MonitorMixin 条件变量 -> 死锁

> ID：10851030
> 
> 赞同：3
> 
> 时间：2012-06-01T13:15:45.013
> 
> 标签：ruby, multithreading, deadlock

我有一个提供条件变量的同步队列。

当数据添加到队列中时，该条件变量会发出信号。

我有 5 个线程：

```
Thread.new do
  loop do
    @queue.synchronize {
      cond.wait_until { @queue.has_data? || @queue.finished? }
    }
    # some processing code that can also call @queue.enqueue
  end
end 
```

然后我做：

```
@queue.enqueue some_data
@threads.each(&:join) 
```

`MyQueue#enqueue`看起来像这样：

```
def enqueue(data)
  synchronize do
    @pending << v unless queued?(data) || processed?(data) || processing?(data)
    data_cond.signal
  end
end

def finished?
  @started && @processing.empty? && @pending.empty?
end

def has_data?
  !@pending.empty?
end 
```

然后我开始#join

```
deadlock detected 
```

这究竟是如何导致死锁的，如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:01:50.890

我想知道这是否是***所有***线程都被***同一个***条件变量阻塞的问题，并且没有一个线程可用于将数据排入队列，这会释放其他线程。

基于此代码中的注释：

```
Thread.new do
  loop do
    @queue.synchronize {
      cond.wait_until { @queue.has_data? || @queue.finished? }
    }
    # some processing code that can also call @queue.enqueue
  end
end 
```

您的评论提到“一些也可以调用@queue.enqueue 的处理代码”，这是唯一`@queue.enqueue`被调用的地方吗？如果是这样，那么所有线程都将在条件变量上被阻塞，并且没有一个线程能够到达能够调用 enqueue 的点。我确信 Ruby 可以检测到所有线程都被锁定在同一个实体上，并且没有一个可以释放它，因此死锁。

如果您确实有一个单独的线程，它只入队（这将是典型的生产者/消费者情况），请确保它也不会等待条件变量，这也可能导致死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:55:46.437

帮助您有点困难，因为您只发布代码片段......

你应该试试[work_queue](http://gemcutter.org/gems/work_queue) gem，或者至少看看[源代码](https://github.com/fmmfonseca/work_queue/blob/master/lib/work_queue.rb)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:49:20.180

有没有必要等待has_data？|| 完成的？在同步块中。代码应如下所示：

```
Thread.new do
  loop do
    cond.wait_until { @queue.has_data? || @queue.finished? }
    enq = nil
    @queue.synchronize {
        enq = @queue.pop
    }
    # some processing code that can also call @queue.enqueue
  end
end 
```

在这种情况下，只有在处理队列内容时才锁定其他线程。您需要做的是同步队列状态更改，例如完成

更好的解决方案是用互斥锁包装所有线程关键变量，就像[在](http://rails.rubyonrails.org/classes/Module.html#M000054)rails 中一样。它会使代码变慢一点，因为它消除了同时变量访问。

# vim - 在 VIM 中增加多个 IP 地址

> ID：10851031
> 
> 赞同：4
> 
> 时间：2012-06-01T13:15:49.403
> 
> 标签：vim, replace, increment

我想编辑我的主机文件以匹配我当前的 IP，我可以在 Python 或 AWK 中完成，但我想知道 VIM 中是否有办法......

让我们看看我的意思，我的主机看起来像这样：

```
192.168.11.172    blazer blazer.mydomain
192.168.11.173    faster faster.mydomain
...
192.168.11.225    schurtig schurtig.mydomain 
```

现在，我想将每个 IP 增加 32，因此最终结果将是：

```
192.168.11.202    blazer blazer.mydomain
192.168.11.203    faster faster.mydomain
...
192.168.11.257    schurtig schurtig.mydomain 
```

如果我将光标放在正确的 IP 上，然后输入

> 30 和 CTRL+A

它做我想要的。

唯一的问题，我有大约 300 台主机……而且我需要每 3 个月执行一次……虽然我可以在 Python 中执行，但在 vim 中查看文件**感觉**更安全，因为我不需要运行脚本，然后控制之后的结果。

以下仅更改第一行：

```
let i=172 | g/172/s//\=i+30/ 
```

我想在一个循环中重复这个不同的 IP 范围能够说出我应该增加多少次，是否有一个“技巧”可以做到这一点？

在此先感谢您的努力，奥兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T02:40:14.750

可以使用以下替换命令。

```
:%s/\(\d\+\.\)\{3}\zs\d\+/\=submatch(0)+30/g 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:40:32.530

尝试这个：

```
:let i=30 | %s/^\(\d*\.\d*\.\d*\.\)\(\d*\)/\=submatch(1).(submatch(2)+i) 
```

`\(\d*\.\d*\.\d*\.\)`(retrived by `submatch(1)`) 匹配 IP 前三个数字和点 (eg `192.168.11.`) 和`\(\d*\)`(retrieveed by `submatch(2)`) 匹配 IP 最后一个数字。

我认为这是控制它的更好方法：

```
:let i=30 | %s/^\(\d*\.\d*\.\d*\.\)\(\d*\)/\=submatch(1).(submatch(2)+i)/gc 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T13:24:11.427

我当然不是 vim 专家（还），但我会这样做（`[]`显示光标位置）

```
192.168.11.[1]72    blazer blazer.mydomain
192.168.11.173    faster faster.mydomain
...
192.168.11.225    schurtig schurtig.mydomain 
```

按`qa`（启动名为 a 的宏）。进行修改（例如`30 CTRL-A`）。光标现在应该在这里：

```
192.168.11.20[2]    blazer blazer.mydomain
192.168.11.173    faster faster.mydomain
...
192.168.11.225    schurtig schurtig.mydomain 
```

按`b`转到单词的开头：

```
192.168.11.[2]02    blazer blazer.mydomain
192.168.11.173    faster faster.mydomain
...
192.168.11.225    schurtig schurtig.mydomain 
```

按`j`（或向下箭头）转到下一个要更改的数字的开头：

```
192.168.11.202    blazer blazer.mydomain
192.168.11.[1]73    faster faster.mydomain
...
192.168.11.225    schurtig schurtig.mydomain 
```

按`q`终止宏定义。

现在您还剩下 53 个 IP，您只需将宏重复 53 次：`53@a`

# logging - 重新生成 nginx 日志

> ID：10851038
> 
> 赞同：0
> 
> 时间：2012-06-01T13:16:20.910
> 
> 标签：logging, hadoop, nginx, webserver, hive

我目前正在将我网页上的所有活动记录到文件 access.log 中的 nginx 网络服务器。该文件因其格式而难以理解，我希望通过将这些日志文件导出到 Hadoop Hive 来分析它们。但是，hive 无法理解原始 nginx 日志。因此，我计划将这些日志重新生成为 JSON 或 CSV 格式，然后将它们导出到配置单元，以便我可以查询和分析日志。请向我推荐一些工具/方法，使我能够完成上述工作。目前我的 nginx 日志如下所示：

```
115.249.242.17 - - [01/Jun/2012:18:44:57 +0530] "GET /flashlayer?videoId=66127&playSessionId=VOD_66127_e04393db-0b40-44b1-aad8-aa2169ac71a710.32.6.1311338556485611&duration=0&playerState=playing&playerError=null HTTP/1.1" 200 86 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/12.0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:08:43.207

以您提供的日志行为例，您应该能够在 HDFS 数据之上创建 Hive 表而不会出现任何问题。

要开始使用，可以使用 MetadataTypedColumnsetSerDe 或 RegexSerDe。MetadataTypedColumnsetSerDe 通常在记录的字段由相同字符（例如制表符或逗号等）分隔时使用。这是您在语句中使用时默认使用的`ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'`SerDe `CREATE TABLE`。无需明确指定 SerDe。

当所有记录都匹配特定的正则表达式时，通常使用 RegexSerDe。您可以在此正则表达式上使用分组来提取您将制作列数据的部分。[此处](https://cwiki.apache.org/Hive/gettingstarted.html#GettingStarted-ApacheWeblogData "here")提供了 RegexSerDe 的示例

请注意，RegexSerDe 的性能比 LazySimpleSerDe 差，因此您应该尽可能使用 LazySimpleSerDe。

另请注意，无论您使用什么 SerDe，Hive 目前都有一个限制，即您的表的一条记录必须存在于一个 Hive 中。换句话说，您不能让一条记录溢出到数据文件的多行（如果数据是 XML，这很常见），也不能在一行中存在多条记录。有一些方法可以绕过这个限制，但如果可能的话，请避免这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-02T11:54:20.537

**sed**可能是完成此类任务的最佳和最简单的工具。

# drupal - Drupal - uc_upsell 模块的主题？

> ID：10851039
> 
> 赞同：1
> 
> 时间：2012-06-01T13:16:22.860
> 
> 标签：drupal, ubercart

在我的 ubercart 安装中，我使用 uc_upsell 块来显示相关产品。该块工作正常，但我想自定义它的模板以重新排列字段并添加新部分等。例如，我希望产品标题出现在图像上方。

这可能吗？如果可以，我该怎么做？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:56:21.157

它有点小技巧，因为您不应该修改模块，但您始终可以进入***uc_upsell.module***文件并在第 236-239 行找到以 // Linked title 开头的代码

将这四行移到 `$output = '';`第 223 行的右下方，您就可以开始了。我相信其他人会通过在 template.tpl.php 文件中展示如何执行此操作来改进此评论，但此答案将适合您的目的，直到有模块更新

# ios - iOS CoreAudio - 使用 AUFilePlayer 和渲染回调

> ID：10851042
> 
> 赞同：3
> 
> 时间：2012-06-01T13:16:35.863
> 
> 标签：ios, core-audio

刚刚开始开发一个小型测试 iOS 5.0 应用程序，看看该平台上的可能性。

一些资源没有价值，例如 Chris Adamson 的博客和 David Zicarelli 的 audioGraph 示例（基于 Apple 的 MixerHost 并具有许多新功能）。

我想要做的是设置这样的东西，使用来自 iOS 5.x SDK 的新 FilePlayer AudioUnit。

(AUFilePlayer bus0) -> (一些自定义进程) -> (bus0 MultiChannelMixer bus0) -> (bus0 Remote I/O)

我从 audioGraph 开始，删除了我不想要的，最后得到了上面的链。

我可以看到 AUFilePlayer 的首选输出是 8.24 流，因此混音器也以这种方式设置（输入范围为 8.24）。我的流程将处理它需要的任何转换。

为总线 0 上的混音器注册了“自定义进程”回调。启动应用程序后，它会定期调用，我可以通过记录来验证。

```
static OSStatus simpleRenderCallback (
                                  void *inRefCon, 
                                  AudioUnitRenderActionFlags  
                                  *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp,  
                                  UInt32  inBusNumber,   
                                  UInt32  inNumberFrames,  
                                  AudioBufferList *ioData
                                  ) {
MixerHostAudio* THIS = (MixerHostAudio*) inRefCon; //the MixerHostAudio instance

AudioUnit fpUnit= THIS.auFilePlayerUnit_1;

OSStatus renderErr = noErr;

renderErr= AudioUnitRender(AUFilePlayerUnit, ioActionFlags, inTimeStamp, 0, inNumberFrames, ioData); 
if (renderErr < 0) {
    NSLog(@"error:%ld",renderErr);
    return renderErr;
}

return noErr;
} 
```

问题是每次在我的回调中调用 AudioUnitRender 时，我总是得到一个 renderErr = -50。

我现在正在使用模拟器运行，Mac 声卡设置为 44,100Hz，我可以看到 inNumberFrames 始终等于 512。

问题出在哪里？-50 表示 CoreAudio 中的“错误参数”，但这还不足以知道出了什么问题。

谢谢！

# javascript - YUI 3 上的分离事件

> ID：10851048
> 
> 赞同：1
> 
> 时间：2012-06-01T13:16:47.647
> 
> 标签：javascript, touch, yui3

我尝试使用 YUI 3 在“后退”按钮上分离“touchstart”元素。

但没有什么是分离的。当我点击“后退”按钮时，这两个函数都会被调用。

这是我的代码：

```
Y.all('.back').detachAll('touchstart');
Y.all('.back').on('touchstart',function(e){
     alert('types'); 
     loadMainframe(myURL);
     e.preventDefault();
});

Y.all('.back').detachAll('touchstart');
Y.all('.back').on('touchstart',function(e){ 
     alert('resto'); 
     loadMainframe(myURL);
     e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:21:42.733

好的，我找到了。

您可以分离事件，仅适用于您正在使用的 Y 元素。

我使用了一个全局元素

```
YEvent = YUI().use('node','touch-event'); 
```

现在我在 YEvent 元素上创建了我的 detach() 和 on()，它正在工作。

# php - 正则表达式与 php

> ID：10851050
> 
> 赞同：2
> 
> 时间：2012-06-01T13:16:51.500
> 
> 标签：php, regex

```
 $pattern="/[a-z]*[a-z]*/i";
if(!preg_match($pattern, $value)){
         $this->error_name="The name should contain at least two letters."; 
       } 
```

我正在尝试检查用户是否用至少两个字母输入了他的名字。所以基本上，他不能输入他的名字，如 111111111111.. 它必须有两个字母。

我写的正则表达式不起作用..为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:19:52.380

您可以使用：

```
$pattern="/^[a-z]{2,}$/i"; 
```

这将确保名称只有字母，并且名称中至少有 2 个字母。

编辑：

看起来您希望名称至少包含两个字母，并且还可以包含其他非字母：

```
$pattern="/^.*[a-z].*[a-z].*$/i"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:39:05.953

当字符串中至少使用两个字母时返回 true：

```
preg_match_all('/[a-z]/', $str, $m) >= 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:18:17.577

**试试这个（您的代码已修改）：**

```
$pattern="/^[a-z]{2}.*/i";
if(!preg_match($pattern, $value)){
         $this->error_name="The name should contain at least two letters."; 
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:28:10.793

```
$pattern="/^([a-z]{2})|([a-z].*[0-9].*[a-z].*).*/i"; 
```

我认为答案应该是上面那个..你的答案给了我一个线索..

现在它也将匹配这些名称：

a1111111111111a

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:20:24.407

```
$pattern="/[a-z].*[a-z]/i";
if(!preg_match($pattern, $value)){
   $this->error_name="The name should contain at least two letters."; 
} 
```

您的代码不起作用，因为`*`意味着零次或多次，因此它也将不匹配或匹配一个字符。

# iphone - 是否有模板 XCode 项目可用于制作仅显示网页的 iOS 应用程序？

> ID：10851052
> 
> 赞同：4
> 
> 时间：2012-06-01T13:17:00.330
> 
> 标签：iphone, ios, uiwebview

我想制作一个 iPhone/iOS 应用程序，当它打开时，只需启动一个带有特定页面的 UIWebView 并且什么都不做。是否有一个模板 XCode 项目我可以用来帮助我加快这个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:21:51.723

不，Xcode 不提供这样的模板。但是，您可以使用“单一视图应用程序”模板，并且使用 Storyboard 应该很容易做到。

这是一个教程：[http ://www.youtube.com/watch?v=bGPJeYxWr3Y](http://www.youtube.com/watch?v=bGPJeYxWr3Y)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:47:23.540

```
CGRect webFrame = CGRectMake(0.0, 0.0, 320.0, 460.0);
UIWebView *webView = [[UIWebView alloc] initWithFrame:webFrame];
[webView setBackgroundColor:[UIColor clearColor]];
NSString *urlAddress = @"http://www.google.com";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
[self.view addSubview:webView]; 
[webView release]; 
```

把它放在你的单视图应用程序视图控制器的 viewDidLoad 中，你就拥有了它.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:48:44.837

在 GITHub 上有一个相同的 shell 应用程序。 [https://github.com/endymion/iOS-HTML5-Shell-App/](https://github.com/endymion/iOS-HTML5-Shell-App/)

但正如作者所说，帮世界一个忙，不要使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T13:20:14.027

没有模板。但是您可以只创建一个新项目“Single View Application”。然后在 Interface Builder 中将您的视图设置为 UIWebView 并添加一些行来加载您所需的网站，例如 viewWillAppear。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:53:09.480

不完全是一个模板，但你可以把它放到你的项目中并使用它。这是 UIWebView 中的一个下降。[http://cocoacontrols.com/platforms/ios/controls/web-browser-view-controller](http://cocoacontrols.com/platforms/ios/controls/web-browser-view-controller)

# spring - 使用 DefaultMessageListenerContainer 从主题中丢失消息

> ID：10851064
> 
> 赞同：0
> 
> 时间：2012-06-01T13:17:59.677
> 
> 标签：spring, jms, spring-jms

我正在使用 DefaultMessageListenerContainer 来使用来自主题的消息（代理是 ActiveMQ）。因为消费者是在运行时创建的，所以我正在执行以下操作：

1）我在春天配置了一个 Conainer 模板

```
<bean id="topiccontainertemplate" class="org.springframework.jms.listener.DefaultMessageListenerContainer" scope="prototype" destroy-method="stop">
    <property name="connectionFactory" ref="connectionfactory" />
    <property name="pubSubDomain" value="true" />
    <property name="cacheLevelName" value="CACHE_CONSUMER" />
    <property name="destinationName" value="default" />
</bean> 
```

2）当需要一个新的消费者时，我从应用程序上下文中获得一个新的消费者并重新配置destinationName。

```
DefaultMessageListenerContainer container = context.getBean("topiccontainertemplate", DefaultMessageListenerContainer.class);
container.setDestinationName(localEntity.getId().getDestination());
container.setMessageListener(getListener());
container.start(); 
```

不幸的是，该容器错过了有关该主题的一些消息。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T15:03:29.457

您的订阅看起来并不持久。如果是这样，当您的潜艇离线/启动时，消息就会被保存。您的订阅者将从完全启动的那一刻开始收到消息 - 在此之前发送的消息将丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:41:25.350

经过更多测试后，我们在消费者创建过程中发现了竞争条件。消息没有丢失，它们没有在我们的代码中正确分发。

# sql-server - 带有标识（自动增量）列的 BULK INSERT

> ID：10851065
> 
> 赞同：78
> 
> 时间：2012-06-01T13:18:07.163
> 
> 标签：sql-server, bulkinsert, identity-column

我正在尝试从 CSV 文件在数据库中添加批量数据。

Employee 表有一个`ID`自动递增的列 (PK)。

```
CREATE TABLE [dbo].[Employee](
 [id] [int] IDENTITY(1,1) NOT NULL,
 [Name] [varchar](50) NULL,
 [Address] [varchar](50) NULL
) ON [PRIMARY] 
```

我正在使用这个查询：

```
BULK INSERT Employee  FROM 'path\tempFile.csv ' 
WITH (FIRSTROW = 2,KEEPIDENTITY,FIELDTERMINATOR = ',' , ROWTERMINATOR = '\n'); 
```

.CSV 文件 -

```
Name,Address
name1,addr test 1
name2,addr test 2 
```

但它会导致此错误消息：

> 第 2 行第 1 列 (id) 的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-12T20:22:15.820

在 csv 文件中添加一个 id 列并将其留空：

```
id,Name,Address
,name1,addr test 1
,name2,addr test 2 
```

从查询中删除 KEEPIDENTITY 关键字：

```
BULK INSERT Employee  FROM 'path\tempFile.csv ' 
WITH (FIRSTROW = 2,FIELDTERMINATOR = ',' , ROWTERMINATOR = '\n'); 
```

id 身份字段将自动递增。

如果您将值分配给 csv 中的 id 字段，除非您使用 KEEPIDENTITY 关键字，否则它们将被忽略，然后将使用它们而不是自动增量。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-01T13:24:02.357

不要直接将 BULK INSERT 插入到您的*真实*表中。

我会永远

1.  从 CSV 文件插入*临时*表`dbo.Employee_Staging`（不带列）`IDENTITY`
2.  可能编辑/清理/操作您导入的数据
3.  然后使用以下 T-SQL 语句将数据复制到真实表中：

    ```
    INSERT INTO dbo.Employee(Name, Address) 
       SELECT Name, Address
       FROM dbo.Employee_Staging 
    ```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-04-25T13:51:06.503

我遇到了类似的问题，但我需要确保 ID 的顺序与源文件中的顺序一致。我的解决方案是为 BULK INSERT 使用 VIEW：

保持表原样并创建此视图（选择除 ID 列之外的所有内容）

```
CREATE VIEW [dbo].[VW_Employee]
AS
SELECT [Name], [Address]
FROM [dbo].[Employee]; 
```

您的 BULK INSERT 应如下所示：

```
BULK INSERT [dbo].[VW_Employee] FROM 'path\tempFile.csv ' 
WITH (FIRSTROW = 2,FIELDTERMINATOR = ',' , ROWTERMINATOR = '\n'); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-27T07:32:10.977

您必须使用格式文件进行批量插入：

```
 BULK INSERT Employee FROM 'path\tempFile.csv ' 
   WITH (FORMATFILE = 'path\tempFile.fmt'); 
```

其中格式文件 (tempFile.fmt) 如下所示：

> 11.0
> 2
> 1 SQLCHAR 0 50 "\t" 2 名称 SQL_Latin1_General_CP1_CI_AS
> 2 SQLCHAR 0 50 "\r\n" 3 地址 SQL_Latin1_General_CP1_CI_AS

更多细节在这里 - [http://msdn.microsoft.com/en-us/library/ms179250.aspx](http://msdn.microsoft.com/en-us/library/ms179250.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-04T10:16:02.807

我的解决方案是将 ID 字段添加为表中的 LAST 字段，因此批量插入会忽略它并获取自动值。干净简单...

例如，如果插入临时表：

```
CREATE TABLE #TempTable 
(field1 varchar(max), field2 varchar(max), ... 
ROW_ID int IDENTITY(1,1) NOT NULL) 
```

请注意，该`ROW_ID`字段必须始终指定为 LAST 字段！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-16T15:37:01.090

1.  创建一个包含标识列 + 其他列的表；
2.  在其上创建一个视图并仅公开您将批量插入的列；
3.  视图中的 BCP

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-18T13:35:01.863

我遇到了同样的问题，导致损失数小时，所以我很受鼓舞地分享我的发现和对我有用的解决方案。

**1.使用excel文件**

这是我采用的方法。我没有使用 csv 文件，而是使用了一个包含如下内容的 excel 文件 (.xlsx)。

```
id  username   email                token website

    johndoe   johndoe@divostar.com        divostar.com
    bobstone  bobstone@divosays.com        divosays.com 
```

请注意，id 列没有值。

接下来，使用 Microsoft SQL Server Management Studio 连接到您的数据库并右键单击您的数据库并选择导入数据（任务下的子菜单）。选择 Microsoft Excel 作为源。当您到达名为“选择源表和视图”的阶段时，单击**编辑映射**。对于`id`目标下的列，单击它并选择**忽略**。`Enable Identity insert`除非您想在从另一个数据库导入数据并希望维护源数据库的自动增量 id 的情况下保留 id，否则不要检查。继续完成，就是这样。您的数据将顺利导入。

**2\. 使用 CSV 文件**

在您的 csv 文件中，确保您的数据如下所示。

```
id,username,email,token,website
,johndoe,johndoe@divostar.com,,divostar.com
,bobstone,bobstone@divosays.com,,divosays.com 
```

运行以下查询：

```
BULK INSERT Metrics FROM 'D:\Data Management\Data\CSV2\Production Data 2004 - 2016.csv '
WITH (FIRSTROW = 2, FIELDTERMINATOR = ',', ROWTERMINATOR = '\n'); 
```

这种方法的问题是 CSV 应该在数据库服务器或数据库可以访问的某个共享文件夹中，否则您可能会收到类似“无法打开文件。操作系统返回错误代码 21（设备未准备好)”。

如果您要连接到远程数据库，则可以将 CSV 上传到该服务器上的目录并引用批量插入的路径。

**3\. 使用 CSV 文件和 Microsoft SQL Server Management Studio 导入选项**

像第一种方法一样启动您的导入数据。对于源，选择**平面文件源**并浏览您的 CSV 文件。确保正确的菜单（常规、列、高级、预览）正常。确保在列菜单（列分隔符）下设置正确的分隔符。就像上面的 excel 方法一样，单击**edit mappings**。对于目标下的 id 列，单击它并选择**忽略**。

继续完成，就是这样。您的数据将顺利导入。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-05T17:45:23.293

这是一个非常古老的帖子，但是给出的答案都没有在不改变提出条件的情况下解决问题，这是我做不到的。

我通过使用 BULK INSERT 的 OPENROWSET 变体解决了这个问题。这使用相同的格式文件并以相同的方式工作，但它允许使用 SELECT 语句读取数据文件。

创建你的表：

```
CREATE TABLE target_table(
id bigint IDENTITY(1,1),
col1 varchar(256) NULL,
col2 varchar(256) NULL,
col3 varchar(256) NULL) 
```

打开命令窗口运行：

```
bcp dbname.dbo.target_table format nul -c -x -f C:\format_file.xml -t; -T 
```

这会根据表格的外观创建格式文件。

现在编辑格式文件并删除 FIELD ID="1" 和 COLUMN SOURCE="1" 的整个行，因为这在我们的数据文件中不存在。
还可以根据数据文件的需要调整终止符：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="256" COLLATION="Finnish_Swedish_CI_AS"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="256" COLLATION="Finnish_Swedish_CI_AS"/>
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="256" COLLATION="Finnish_Swedish_CI_AS"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="2" NAME="col1" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="3" NAME="col2" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="4" NAME="col3" xsi:type="SQLVARYCHAR"/>
 </ROW>
</BCPFORMAT> 
```

现在我们可以使用 select 将数据文件批量加载到我们的表中，从而完全控制列，在这种情况下，通过不将数据插入标识列：

```
INSERT INTO target_table (col1,col2, col3)
SELECT * FROM  openrowset(
bulk 'C:\data_file.txt',
formatfile='C:\format_file.xml') as t; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-17T11:54:51.167

另一种选择是，如果您使用临时表而不是临时表，则可以按照导入的预期创建临时表，然后在导入后添加标识列。

所以你的 sql 做这样的事情：

1.  如果临时表存在，则删除
2.  创建临时表
3.  批量导入临时表
4.  更改临时表添加身份
5.  <你想对数据做什么>
6.  删除临时表

仍然不是很干净，但它是另一种选择......可能也必须获得锁以确保安全。

# javascript - Simperium (JS) 从存储桶中删除对象

> ID：10851067
> 
> 赞同：4
> 
> 时间：2012-06-01T13:18:12.647
> 
> 标签：javascript, simperium

Simperium JS 客户端中是否有办法从存储桶中删除项目？

其他 API 似乎能够做到这一点。

我试过使用：

```
bucket.update(id, null)

bucket.update(id, undefined) 
```

但这些似乎没有任何作用。没有`bucket.delete`或`bucket.remove`我可以看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:29:02.893

当您更新该 ID 时，该 ID 的“本地”回调也应该返回 null。那应该从存储桶中删除对象。

# c# - USB 继电器单元编程

> ID：10851069
> 
> 赞同：2
> 
> 时间：2012-06-01T13:18:20.177
> 
> 标签：c#, serial-port

从来没有做过任何嵌入式或硬件编程，我主要处理网络应用程序。但是我们可能需要在 C# 中关闭/打开 USB 继电器。我获得了我们在[这里](http://www.sigma-shop.com/manuals/usb_one_relay_box_manual.pdf)购买的设备的 PDF 文件。

在文档中有一些示例代码，例如：

```
private void button1_ON_Click(object sender, EventArgs e)
{
serialPort1.Write(new byte[] { 0xFF, 0x01, 0x01 }, 0, 3);
}
private void button1_OFF_Click(object sender, EventArgs e)
{
serialPort1.Write(new byte[] { 0xFF, 0x01, 0x00 }, 0, 3);
} 
```

问题是，我不需要 DLL / 某种库来访问`serialPort1`吗，抱歉这个垃圾问题，但我只是不确定这样的事情是如何工作的。我没有从 pdf 或网站上看到任何关于我需要参考的任何类型的图书馆的迹象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:25:56.030

不，您只需要使用[SerialPort](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)类。我记得 USB 设备可能会将自己注册为一个名为“COM##”的串行端口，其中哈希表示数字。您将需要提供端口名称和比特率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:42:18.690

.NET 带有一个`System.IO.Ports.SerialPort`非常糟糕的类。这就是示例中使用的内容。如果您只需要发送数据并且不需要自动检测端口，而是有一个存储的配置文件，那么它可能会运行得很好。

如果您对启动工作线程并进行同步只是为了从串行端口读取而感到恼火，并且无法使用热插拔通知生成的即插即用端口名称，那么我建议使用另一个串行 API。Win32 还不错，我希望有一天能够发布我为工作而构建的包装器，使所有这些任务变得容易（检测何时插入设备，根据 USB 描述符字符串查找端口，提升 UI数据到达时的事件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:21:28.070

FTDI 生产 USB/串行芯片组。使用其芯片组的 USB 设备将在您的计算机上显示为串行设备（COM 端口）。如果没有与产品软件打包，FTDI 有一个驱动程序，您可以从他们的网站下载。相当标准。

该产品 PDF 中提供了驱动程序链接。[http://www.ftdichip.com/Drivers/VCP.htm](http://www.ftdichip.com/Drivers/VCP.htm)

安装后，您只需通过串行通信。

# asp.net - 使用每个用户的密码作为自己数据的加密密钥

> ID：10851071
> 
> 赞同：0
> 
> 时间：2012-06-01T13:18:34.963
> 
> 标签：asp.net, c#-4.0, encryption

我想加密用户的个人数据，然后将它们保存在数据库中。

加密必须在应用程序中完成（我不能在 sql server 端这样做）

现在我想知道是否可以使用每个用户的密码来加密和解密他们的数据？这种方法的优缺点是什么 /

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:34:03.687

一大“骗局”：如果用户更改了他/她的密码怎么办？然后你需要重新加密所有数据！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:12:56.453

您说过要存储用户的安全个人数据。除非个人信息这样做。由于多种原因，通常不建议使用它非常敏感。然而，通常做的是用户密码的散列+加盐。

这个页面很好地解释了散列和加盐的工作原理以及为什么它比加密然后解密密码更好。

[http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)

至于加密用户的个人信息，就像密码一样，我们可以使用自定义的盐 + 散列算法，该算法非常简单但在我们的应用程序中使用自定义散列等效的用户 ID 是有效的，它预计是永久的、静态的和永久的。

由于 uID（或每个用户的专用唯一字符串）可以对普通公众隐藏，并且我们确保无法从未经授权的来源访问我们的自定义共享功能，因此我们拥有可靠的安全系统。

这意味着，我们基于唯一字符串（例如用户 ID）和哈希+盐用户密码对个人信息进行哈希+盐。对于要解密的个人信息，用户 ID 哈希和密码哈希都应与数据库匹配。

更好的方法是在程序中使用已知的加密协议。例如，如果实施得当，通过 HTTPS TLS 发送的数据是非常安全的。

# struts2 - 请求参数 if struts2 if tag

> ID：10851075
> 
> 赞同：0
> 
> 时间：2012-06-01T13:18:49.597
> 
> 标签：struts2, tags

我还有另一个可能是基本问题。如果你能提供帮助，我会很高兴。

有一个请求参数'action'。如果我写：

```
<label><s:property value="%{#parameters.action}"/></label> 
```

出现值（为 1）

所以现在尝试测试：

```
<s:if test="%{#parameters.action == '1'}">YES 1</s:if><s:else>NOT 1</s:else> 
```

NOT 1 出现。

我已经尝试了我在网上找到的所有语法进行测试。没有任何变化，NOT 1 仍然显示

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:13:38.010

这是因为：

*   的值`%{#parameters.action}`是一个数组，而不是单个值，并且
*   该值将被类型转换为数字（不知道为什么；需要查看）

正确的表达方式是：

```
<s:if test="%{#parameters.action[0] == 1}">YES 1</s:if><s:else>NOT 1</s:else> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:50:45.847

正确的表达方式是：

`<s:if test="#parameters.action[0] == 1">YES 1</s:if><s:else>NOT 1</s:else>`

请求参数是 [Strinf, String[]] 的映射，所以你必须像上面一样访问它

# ruby-on-rails - Rails (3.2)/Postgres 使用方法查询日期时间字段或如何找到该日期的 11:59:59？

> ID：10851080
> 
> 赞同：1
> 
> 时间：2012-06-01T13:19:12.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我有一个带有过期日期时间字段的模型，我一直在将其与 Time.now 进行比较。

现在我的客户希望模型在视图中保留到到期日的午夜。

所以，我认为我需要做的是能够在该字段上调用 ​​end_of_day 方法作为查找的一部分。

像……</p>

Model.where('expiration.end_of_day < ?', Time.now)

这当然是行不通的，也许我只是把这一切都弄错了。

这是在使用 Postgres 的 Rails 3.2 上（我认为是 9.1。它在 Heroku 上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:15:46.870

我假设您的`expiration`列是时间戳而不是日期，这就是问题的根源。我认为以下内容应该适合您：

```
Model.where('expiration > ?', Time.now.beginning_of_day)  # All records which expire today or later 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:37:28.713

在纯 postgresql 中会是这样的：

```
expiration < current_date + 1 
```

* * *

```
select current_date;
    date    
------------
 2012-06-01
(1 row)

select '2012-06-01 23:59:59' < current_date + 1;
 ?column? 
----------
 t
(1 row) 
```

# android - 荣格在 Android 上

> ID：10851082
> 
> 赞同：5
> 
> 时间：2012-06-01T13:19:24.503
> 
> 标签：android, jung, graph-visualization

我一直在试图弄清楚如何在 Android 上使用 JUNG (http://jung.sourceforge.net/)。据我所知，Android SDK 不支持摇摆。是否有 JUNG 渲染器的 Android 端口或将 Swing 代码转换为适用于 android 的正确 UI 代码的工具？

# doxygen - Doxygen 命令行 - 错误处理

> ID：10851083
> 
> 赞同：1
> 
> 时间：2012-06-01T13:19:24.577
> 
> 标签：doxygen

我在命令行模式下使用 Doxygen（通过计划在特定时间运行的批处理文件）来生成代码文档。

我为它提供了一个包含所有设置的 Doxyfile。它会**覆盖**先前为相同代码生成的文档。

我的问题是，输入的位置名称可能会在某个时候改变。因此，在日志中，doxygen 显示它找不到输入位置之一。

**我的目标是只有**在**没有错误**的情况下才应该生成/覆盖文档。

在我的脑海里有三种可能的解决方案（按照方便程度降低的顺序）：

1.  **出现任何**错误时中断文档生成。
2.  如果无法中断文档生成，我可以在其他地方生成文档，然后在批处理文件中使用简单的移动命令替换旧文档，**如果**Doxygen 没有引发任何错误。为此，我将不得不在批处理文件运行时掌握 Doxygen 错误。
3.  将文档保存到不同的文件夹，将日志保存到 txt，批量扫描 txt 以查找错误（这个，我可以做，但更喜欢避免）

那么，在通过批处理文件运行 Doxygen 时，有什么方法可以解决这个错误吗？

# http - 通过 http 连接移动设备时的 NAT 遍历

> ID：10851089
> 
> 赞同：0
> 
> 时间：2012-06-01T13:19:42.607
> 
> 标签：http, mobile, p2p, nat, ipv4

有人会知道这个问题的答案吗？

我正在阅读 Practical JXTA II（也在[http://www.scribd.com/doc/47538921/Practical-JXTA-II](http://www.scribd.com/doc/47538921/Practical-JXTA-II)）。我对第 92 页第二段关于与 NAT 后面的对等点建立通信的声明感到困惑：“这样的对等点仍然无法访问……直到……或 b) 无法访问的对等点自发地与远程对等点建立连接。”

这似乎意味着 IPv4 本地地址到公共地址的 NAT 转换总是相同的。如果路由器将一大组地址映射到一组较小的公共地址，结果会不会有所不同？一旦收到 HTTP 响应，会话将被终止，其他人可以使用该公共 IP，对吗？一旦 HTTP 会话结束，路由器将不再记录使用的映射。

我正在尝试为 Web 服务实现一个想法，其中应用程序的一个方面是 P2P（我有时需要两个节点同时充当客户端和服务器）。中央服务器可以有一个 DNS 注册地址，但各种潜在的移动节点可能在 NAT 等之后。读完这篇文章后，我想如果我让 NAT 后面的节点在启动时建立连接，告诉中央 DNS 注册，我会没问题节点他们的公共地址，但现在我认为该地址可能会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:33:00.900

她是我对 Jérôme 意思的理解。

假设对等点 A 是 WAN 可见的，对等点 B 是防火墙。对等体 A 可以向对等体 B 发送数据，当

*   对等点 A 和对等点 B 都建立到中继服务器的出站连接。对等点 A 在出站请求中向中继发送数据，该出站请求通过同步响应（对等点 B 与中继的连接）转发给对等点 B。

*   对等体 B 与对等体 A 建立连接，对等体 A 在同步响应中将数据发送回对等体 B。“反向调用”机制。

对于 JXTA，对等点向网络发布本地地址和可选的 WAN 地址（地址是主机+端口）。如果您想使用 NAT 与该对等点建立直接连接，则每个对等点只能有一个 WAN 地址。

在 P2P 网络中拥有中央服务器是一个坏主意：您会创建单点故障，而这正是 P2P 网络擅长避免的。

然而，正如您所暗示的，仍然需要维护“地址/对等位置”的注册表。但是，必须分发此注册表。这需要一本书，但这里有两种方法：

*   节点上的分布式哈希表 (DHT)：每个节点都持有并共享部分注册表的副本。JXTA 有这样的机制，但请查看 Wikipedia 上的 Kademlia 以获得非常成功的算法。

*   全局索引节点方法（我相信类似于 Skype）：使用 DHT 或其他复制算法保存注册表的有限数量的专用对等点/节点。对等点使用防火墙友好协议 (HTTP) 连接到 GIN 以获取地址，并且 GIN 使用快速套接字到套接字连接相互通信（查看 Hazelcast 以获得实现 GIN 的快速方法）。

# javascript - 如何使用 JS/jQuery 在 IE 中捕获评论 nodeType 8？

> ID：10851092
> 
> 赞同：1
> 
> 时间：2012-06-01T13:19:49.037
> 
> 标签：javascript, jquery

我正在尝试捕获特定的注释行。以下代码适用于除 IE 之外的所有浏览器，当然：

```
<script>
var llf = jQuery('.select').contents().filter(function() {
return this.nodeType === 8 // Comment node
})[2].nodeValue.replace("LLF: ", "").trim();
console.log(llf);
alert(llf);
</script> 
```

这是 HTML：

```
<td class="select" nowrap="nowrap" rowspan="3">
<!-- NON IDEAL REASON:  1 hour time window -->
<b>$423.59</b><br />
<b>&#163;267.50</b><br />
<!--  Policy Name: Investment Bank -->
<!--LLF: 1253.12 --> //This is the line I want to capture 
```

如果有一种方法可以为所有浏览器做到这一点，但如果你能想到一个针对 IE + 条件注释的特定解决方案也很好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:29:36.643

IE 没有[`String#trim`](http://ecma-international.org/ecma-262/5.1/#sec-15.5.4.20)，最近才在 ES5 中引入，所以当你尝试使用它时它会抛出异常。但是当您使用 jQuery 时，您可以`jQuery.trim`改用：

```
var llf = jQuery.trim(jQuery('.select').contents().filter(function() {
    return this.nodeType === 8; // Comment node
})[2].nodeValue.replace("LLF: ", ""));
console.log(llf);
alert(llf); 
```

[现场复制](http://jsbin.com/ezuvoh)| [来源](http://jsbin.com/ezuvoh)- 在 IE7 和 IE9 中为我工作，所以我也假设 IE8

* * *

我建议稍微分解一下该语句（尤其是这样的问题更容易调试），并在`=== 8`.

# apache-flex - Flex Spark 将文本替换为彩色文本

> ID：10851098
> 
> 赞同：0
> 
> 时间：2012-06-01T13:20:04.473
> 
> 标签：apache-flex, mobile, replace, flex-spark

我正在制作简单的编辑器。我想要这样，当我写任何文本时，让我们将 RichEditableText 中的无色文本替换为彩色文本。

例如：PHP -->`<s:span color="#FF0000">PHP<s:span>`

此代码不起作用：

```
editorum.text = editorum.text.replace('PHP','<s:span color="#FF0000">php<s:span>'); 
```

编辑部是：`<s:RichEditableText id="editorum" ></s:RichEditableText>`

[点击这里试试](http://samed.us/samples/ops.swf)

源代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               width="319" height="198" minWidth="955" minHeight="600">
    <fx:Style source="ops.css"/>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import flashx.textLayout.formats.TextLayoutFormat;
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;
            import spark.events.TextOperationEvent;
            import spark.utils.TextFlowUtil;
            protected function editorum_changeHandler(event:TextOperationEvent):void
            {
                editorum.text = editorum.text.replace('melon','<s:span color="#FF0000">melon<s:span>');
            }
        ]]>
    </fx:Script>
    <s:RichEditableText id="editorum" x="10" y="28" width="299" height="159"
                        change="editorum_changeHandler(event)">

    </s:RichEditableText>
    <s:Label x="10" y="10" width="119" text="Write 'melon' :"/>
</s:Application> 
```

**另一个问题**；最后如何发送指针？当我按任意键时，指针将要处理。试试：[http ://samed.us/samples/ops3.swf](http://samed.us/samples/ops3.swf)

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:30:42.277

而不是这一行：

```
editorum.text = editorum.text.replace('melon','<s:span color="#FF0000">melon<s:span>'); 
```

尝试这样的事情：

```
var text : String = editorum.text.replace('melon','<s:span color="#FF0000">melon<s:span>')
editorum.textFlow = TextConverter.importToFlow(text, TextConverter.TEXT_FIELD_HTML_FORMAT); 
```

基本上，您需要将 HTML 转换为 TLF 框架可以理解的内容。 [阅读一些](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff8.html)关于 textFlow 和 TextConverter 的文档

# ios - iOS BLE 技术从哪一点入手

> ID：10851106
> 
> 赞同：8
> 
> 时间：2012-06-01T13:20:28.980
> 
> 标签：ios, bluetooth, core-bluetooth, bluetooth-lowenergy

我需要使用 BLE 技术进行开发。找了一些介绍和源码：

[http://processors.wiki.ti.com/index.php/Category:IPhone4SBLEDemo](http://processors.wiki.ti.com/index.php/Category:IPhone4SBLEDemo)

但我没有找到任何教程从头开始使用这项技术（CoreBluetooth 框架）从选择传感器进行测试，还有 WWDC 2011

是否有任何教程可以在 iOS 上开始使用 BLE 技术？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T15:16:53.113

不幸的是，核心蓝牙框架并不多，因为它相对较新。我建议在编写任何代码之前对蓝牙低功耗的工作原理有一个非常深入的了解。

一些不错的资源：

围绕该站点进行研究，以开始了解服务和特征的位置以及它们的作用。

[http://developer.bluetooth.org/gatt/Pages/GATT-Specification-Documents.aspx](http://developer.bluetooth.org/gatt/Pages/GATT-Specification-Documents.aspx)

该站点具有您将在蓝牙站点上看到的服务的实际固件实现代码，以及对这些东西如何与所提供的文档一起使用的更全面的解释。

[http://www.ti.com/tool/cc2540dk](http://www.ti.com/tool/cc2540dk)

如果所有这些对您来说都有意义，那么我将获得一个设备并开始破解。核心蓝牙框架的文档很少，但严重依赖委托。您会发现，一旦您开始在委托方法中发现服务，发现和使用特征值就是小菜一碟。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T09:40:19.833

您应该查看以下内容：

[CBCentralManager](http://developer.apple.com/library/mac/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html)

这是您可以开始使用的示例代码：

[Apple 的温度传感器示例。](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)

还要确保：您已登录 Apple for Developer Provisiong 配置文件，以便在您的 iPhone 中测试您的应用程序。

希望这可以帮助。

# ruby-on-rails - 旋转数组直到满足条件

> ID：10851107
> 
> 赞同：0
> 
> 时间：2012-06-01T13:20:30.257
> 
> 标签：ruby-on-rails, ruby

我知道如何实现这一点，但它似乎不像红宝石那样做。

我每周有几天的哈希：

```
DAYS = {
1 => "Monday",
2 => "Tuesday",
3 => "Wednesday",
4 => "Thursday",
5 => "Friday",
6 => "Saturday",
7 => "Sunday"} 
```

（可能有一些rails helper，但我已经以我能想到的最快方式实现了它）

现在我想创建一个数组，其中第一个元素是今天，其他天应该保持有序。

这是这个数组

```
 def day_keys
    # proper sorting of days, start with today and then continue
    day_array = (1..7).to_a
    loop do
      break if day_array.first == Time.now.wday
      day_array.rotate!
    end
    day_array
  end 
```

今天是星期五，所以它回来了`[5,6,7,1,2,3,4]`。在此之后，我将此数组中的值与`DAYS`哈希中的键映射以查找日期名称。

解决方案对我来说似乎很粗糙，所以我想听听一些关于如何实现它的想法。我花了一些时间看，`Array#cycle`但`Enumerable#inject`似乎没有什么适合我的需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:34:20.037

怎么样： `((Time.now.wday)..(Time.now.wday+6)).collect{|i| ((i-1) % 7) +1}`

如果你在 Rails 中，你有更多的助手。这会产生一个日期数组：

```
 ((Time.now.to_date)..(6.days.from_now.to_date)).collect{|i| i} 
```

如果您想要日期名称，只需稍作修改

```
 ((Time.now.to_date)..(6.days.from_now.to_date)).collect{|i| i.strftime "%A"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:39:39.547

像这样的东西会起作用......

```
DAYS_HASH = { 'Mon' => 1,
'Tue', => 2,
'Wed', => 3,
'Thu', => 4,
'Fri', => 5 }

DAYS_ARY = ['Mon','Tue','Wed','Thu','Fri']

def days(start)
  DAYS_ARRAY.rotate(start-1)
end 
```

> 天（DAYS_HASH['星期三']）

```
=> ['Wed', 'Thu', 'Fri', 'Mon', 'Tue'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:47:03.257

如果你有 ruby​​ 1.8.7

```
day_array.index(Time.now.wday).times do day_array.push(day_array.shift) end 
```

如果你有 ruby​​ 1.9.2

```
day_array.index(Time.now.wday).times do day_array.rotate end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T13:53:25.930

```
require 'date'
today = Date.today
p (today..today+6).map{|day| Date::DAYNAMES[day.wday]}
#=>["Friday", "Saturday", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday"] 
```

# javascript - 如果我存储缓存并达到缓存限制会发生什么？

> ID：10851110
> 
> 赞同：1
> 
> 时间：2012-06-01T13:20:37.123
> 
> 标签：javascript, caching, browser, browser-cache

我了解[每个浏览器都有缓存限制](http://www.blaze.io/mobile/understanding-mobile-cache-sizes/)。现在我想知道如果我在达到限制时尝试存储缓存会发生什么？

它会删除旧的缓存还是不允许我存储它？

如果它确实删除了旧的缓存，它们会是我的还是其他人的？（我不是指相同的页面缓存，而是由我的网站缓存）。

一般来说，它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:45:48.873

这取决于使用的缓存。不同的缓存使用不同的策略：

*   [先进先出](http://en.wikipedia.org/wiki/FIFO)
*   [LFU](http://en.wikipedia.org/wiki/Least_frequently_used)
*   ...

一般来说，很难为您的缓存找到正确的策略，因为每种策略都有其缺点。

# c# - 在哪里可以找到好的 VS Coded UI 参考？

> ID：10851112
> 
> 赞同：3
> 
> 时间：2012-06-01T13:20:51.647
> 
> 标签：c#, coded-ui-tests

来自 Winrunner、Quick Test Professional 和 Selenium，令我惊讶的是，除了标准的 MSDN 资源外，互联网上没有太多关于 VS Coded UI 测试的内容。

真的没有太多关于这个主题的好的参考资料、博客或论坛，还是我使用谷歌的方式错误？

我找到的一些资源：

*   [RBurnham 的博客](http://rburnham.wordpress.com/category/coded-ui-tests/)
*   [MSDN Visual Studio UI 自动化测试论坛](http://social.msdn.microsoft.com/Forums/en-US/vsautotest/threads)
*   [不错的尝试，但只有两个旧条目博客](http://codedui101.blogspot.nl/)
*   [Gautam Goenka 博客（又是 MSDN）](http://blogs.msdn.com/b/gautamg/archive/tags/coded+ui+test/)
*   [Visual Studio 团队测试团队博客](http://blogs.msdn.com/b/vstsqualitytools/archive/tags/coded+ui+test/)

其他人发现了那些：

*   [使用 Visual Studio 2010 编码 UI 或 MSDN 进行自动化测试 绝对基本入门指南](http://msdn.microsoft.com/en-us/magazine/hh875174.aspx)( [KMoraz](https://stackoverflow.com/questions/10851112/where-can-good-vs-coded-ui-references-be-found/10851226#10851226) )
    本文中提到的链接：
    [Anutthara Bharadwaj 博客](http://blogs.msdn.com/b/anutthara/archive/tags/coded+ui/)
    [Balachander G. Subramaniam](http://blogs.msdn.com/b/balagans/archive/tags/codeduitest/)
    [Singhal Rubels 博客](http://blogs.msdn.com/b/rubel/)
    [VSTS 质量工具团队博客](http://blogs.msdn.com/b/vstsqualitytools/)

*   [Mathew Aniyan 博客](http://blogs.msdn.com/b/mathew_aniyan/archive/2010/02/11/content-index-for-coded-ui-test.aspx)( [KMoraz](https://stackoverflow.com/questions/10851112/where-can-good-vs-coded-ui-references-be-found/10851226#10851226) ) 上编码 UI 测试的内容索引

*   [实习生的经验](http://blogs.windward.net/marcusj/2012/05/31/starting-out-with-coded-ui-tests/)( [Vi3GameHkr](https://stackoverflow.com/questions/10851112/where-can-good-vs-coded-ui-references-be-found/10852925#10852925) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:14:48.660

如果您有耐心，MSDN 文档实际上涵盖了相当多的内容。一旦您对这两个页面上的大量链接进行分类，KMoraz 提供的链接非常有用。

同样，如果你有耐心，我写了一篇博客文章，重点介绍了一些文章（所有这些文章都列在 KMoraz 提供的这两个页面之一中），这些文章在我开始使用 Coded UI 测试时对我有帮助：

[http://blogs.windward.net/marcusj/2012/05/31/starting-out-with-coded-ui-tests/](http://blogs.windward.net/marcusj/2012/05/31/starting-out-with-coded-ui-tests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:29:13.487

[编码 UI 测试的内容索引](http://blogs.msdn.com/b/mathew_aniyan/archive/2010/02/11/content-index-for-coded-ui-test.aspx)拥有您需要的一切。

[使用 Visual Studio 2010 Coded UI 测试自动化](http://msdn.microsoft.com/en-us/magazine/hh875174.aspx)- 这是一个很好的起点。

# jquery - 通过jquery中的ID

> ID：10851115
> 
> 赞同：0
> 
> 时间：2012-06-01T13:21:07.873
> 
> 标签：jquery, html

我想制作一个包含多个元素的脚本。我想出了给出`HTML elements`数值的想法`id`。`id=0`我使用下面的 jquery 来访问它。

```
var image_id = 0;//initializing the image id variable 
var get_image = document.getElementById(image_id);//getting the element based on the ID
var image = $(get_image);//creating a selector

function doSomething()
{
    image_id++;
}
//finally I use this line of code to display the number on screen to check it's value
$("span").text(image_id);
doSomething() 
```

上面的代码确实可以正常工作，因为我希望它除了`image_id++`行......在某种程度上。当我`alert`在它下面放置一个时，它确实向我显示值增加了，但是它没有应用。元素上显示的值`span`始终为 0 受影响的元素也不受代码影响。谁能指出我做错了什么，或者是否有可能或建议一种更有效的方法，我感谢所有反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:31:43.903

试试这个：

```
$('img').each(function(i,v){
   var id  = $(this).attr('id')
   $('span').text(id); // or $('span').text($('span').text() + " " + id)
}) 
```

# java - 下拉菜单“'null Converter'的转换错误设置值''”

> ID：10851117
> 
> 赞同：5
> 
> 时间：2012-06-01T13:21:16.000
> 
> 标签：java, drop-down-menu, seam

所以我正在使用 seam 尝试制作一个下拉菜单来将交付添加到数据库。我正在使用下拉菜单来选择数据库中的哪个员工正在交付。该菜单可以很好地加载数据库中的所有员工，但是当我选择一个并单击添加时，我收到错误“转换错误设置值'（员工哈希）''null Converter'。

这是下拉菜单的代码：

```
<my:dropdown label="Employee ID" id="emp" value="#{deliveryPort.emp}" required="false">
                    <f:selectItem itemValue="#{null}" itemLabel="Selct One"/>
                    <s:selectItems value="#{deliveryPort.empList}" var="emp" label="#   {emp.employeeId} #{ emp.nameFirst}"/> 
               </my:dropdown> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T13:33:07.663

你应该做两件事来避免这个错误：

1.  确保您的班级`emp`正在实施`equals()`和`hashCode()`
2.  使用转换器转换您选择的值，然后再将其传递给支持 bean

BalusC 写了一个关于转换器以及如何使用它们的很好的[教程。](http://balusc.blogspot.ch/2007/09/objects-in-hselectonemenu.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T14:38:52.887

根据@flash 的回答，我在Employee 类（emp 类）中实现了转换器和equals() & hashCode()。

XHTML 的一部分：

```
<my:dropdown label="Employee ID" id="emp" value="#{deliveryPort.emp}" required="false">
    <f:selectItem itemValue="#{null}" itemLabel="Selct One"/>
    <s:selectItems value="#{deliveryPort.empList}" var="emp" label="#   {emp.employeeId} #{ emp.nameFirst}"/> 
    <f:converter converterId="empConverter" />
</my:dropdown> 
```

员工转换器类：

```
package mypackage.converters;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

@FacesConverter("empConverter")
public class EmployeeConverter implements Converter
{

    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        return value;
    }

    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        return value.toString();
    }

} 
```

Employee类的一部分（emp的类，据说employeeId是String）：

```
public boolean equals(Object other)
{
    return other instanceof Employee && (employeeId != null) ? employeeId.equals(((Employee) other).employeeId) : (other == this);
}

public int hashCode()
{
    return employeeId != null ? this.getClass().hashCode() + employeeId.hashCode() : super.hashCode();
}

public String toString()
{
    return "Employee[" + employeeId + "," + nameFirst + "]";
} 
```

我有一个类似的问题。它对我有用。

# c# - 在文本框上单击，显示（弹出）日历？

> ID：10851119
> 
> 赞同：2
> 
> 时间：2012-06-01T13:21:24.827
> 
> 标签：c#, asp.net, datetime, calendar

我想知道单击文本框时如何实现日历？示例：当我单击文本框时，会弹出日历。像这样 ：![在此处输入图像描述](../Images/949dd898c800a8cd0690827b68a0220f.png)

我点击了文本框，日历出现了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:23:11.570

AJAX 控件工具包中包含这个确切的功能。

[ASP.NET AJAX 控件工具包日历演示](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:24:16.180

使用 jQuery UI Datepicker 实现跨浏览器：

[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/)

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>

<div class="demo">

<p>Date: <input id="datepicker" type="text"></p>

</div><!-- End demo -->

<div style="display: none;" class="demo-description">
<p>The datepicker is tied to a standard form input field.  Focus on the input (click, or use the tab key) to open an interactive calendar in a small overlay.  Choose a date, click elsewhere on the page (blur the input), or hit the Esc key to close. If a date is chosen, feedback is shown as the input's value.</p>
</div><!-- End demo-description --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:25:11.393

最快最简单的方法是使用 JQuery 或其他 Javascript 框架。

这里有一个演示：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:27:02.767

你可以试试juice [datepicker](http://juiceui.com/controls/datepicker) control

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:22:31.297

像 jQuery UI 这样的东西可能：

[http://jqueryui.com/](http://jqueryui.com/)

# python - 如何从python中的字符串中提取某些信息？

> ID：10851121
> 
> 赞同：1
> 
> 时间：2012-06-01T13:21:32.300
> 
> 标签：python, html, string

我正在尝试使用 python 从 html 代码中提取某些信息。例如：

```
<a href="#tips">Visit the Useful Tips Section</a> 
and I would like to get result : Visit the Useful Tips Section

<div id="menu" style="background-color:#FFD700;height:200px;width:100px;float:left;">
<b>Menu</b><br />
HTML<br />
CSS<br />
and I would like to get Menu HTML CSS 
```

换句话说，我希望得到 <> 和 <> 之间的所有内容，我正在尝试编写一个 python 函数，将 html 代码作为字符串，然后从那里提取信息。我被困在 string.split('<') 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:24:03.433

您应该使用适当的 HTML 解析库，例如[HTMLParser](http://docs.python.org/library/htmlparser.html)模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:32:55.990

您可以使用[`lxml`](http://lxml.de/)html 解析器。

```
>>> import lxml.html as lh
>>> st = ''' load your above html content into a string '''
>>> d = lh.fromstring(st)
>>> d.text_content()

'Visit the Useful Tips Section \nand I would like to get result : Visit the Useful Tips Section\n\n\nMenu\nHTML\nCSS\nand I would
like to get Menu HTML CSS\n' 
```

或者你可以做

```
>>> for content in d.text_content().split("\n"):
...     if content:
...             print content
...
Visit the Useful Tips Section
and I would like to get result : Visit the Useful Tips Section
Menu
HTML
CSS
and I would like to get Menu HTML CSS
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:26:25.407

```
string = '<a href="#tips">Visit the Useful Tips Section</a>'
re.findall('<[^>]*>(.*)<[^>]*>', string) //return 'Visit the Useful Tips Section' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:29:12.207

我了解您正在尝试去除 HTML 标签并仅保留文本。

您可以定义一个表示标签的正则表达式。然后用空字符串替换所有匹配项。

例子：

```
def remove_html_tags(data):
    p = re.compile(r'<.*?>')
    return p.sub('', data) 
```

参考：

[例子](http://love-python.blogspot.co.uk/2008/07/strip-html-tags-using-python.html)

[关于 python 正则表达式的文档](http://docs.python.org/library/re.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:44:20.200

我会使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) - 对于格式错误的 html，它会变得不那么暴躁。

# javascript - 获取网格中焦点行中单元格的值

> ID：10851131
> 
> 赞同：0
> 
> 时间：2012-06-01T13:21:58.910
> 
> 标签：javascript, asp.net-mvc-3

我正在尝试获取焦点行中单元格的值，但它不起作用。

```
function OnGridFocusedRowChanged() {
        gvUserGroups.GetRowValues(gvUserGroups.GetFocusedRowIndex(), 'NAME', OnGetRowValues);
    }

function OnGetRowValues(values) {
        alert(values[0].toString());
    } 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:28:08.503

在此函数中，您只提供一个字段*NAME*，因此 GetRowValues 不会返回数组。

试试这个：

```
function OnGetRowValues(value) {
        alert(value.toString());
    } 
```

我在[演示页面上](http://demos.devexpress.com/ASPxGridViewDemos/Rows/FocusedRow.aspx)使用 Firebug 对此进行了测试，效果很好。

# android - 将xml转换为android中的自定义小部件

> ID：10851133
> 
> 赞同：0
> 
> 时间：2012-06-01T13:22:10.910
> 
> 标签：android, xml

这是我想将其转换为小部件的 xml。基本上我正在做的是根据用户在循环内多次膨胀布局它的工作bt问题是如果用户输入两位数，它会花费太长时间来膨胀和应用程序崩溃。作为输入。那是我想将该布局转换为小部件，以便我可以在循环外对其进行充气，然后在循环内连续添加。正确的 nw 我在添加之前在循环内膨胀 evry 时间。

```
 <?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout android:id="@+id/RelativeLayout1"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout android:layout_width="fill_parent"
        android:id="@+id/Main_linearLayout" android:layout_height="wrap_content">
        <RelativeLayout android:id="@+id/Number_relativeLayout"
            android:layout_height="wrap_content" android:layout_width="50dip"
            android:background="@drawable/left">
            <RelativeLayout android:id="@+id/num_Lyout"
                android:layout_width="wrap_content" android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_centerHorizontal="true" android:background="@drawable/measureno">
                <TextView android:layout_width="wrap_content"
                    android:layout_height="wrap_content" android:id="@+id/num_txt"
                    android:textStyle="bold" android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true" android:textColor="#000000"></TextView>
            </RelativeLayout>
        </RelativeLayout>
        <LinearLayout android:layout_height="match_parent"
            android:orientation="vertical" android:layout_width="fill_parent"
            android:id="@+id/Right_Main_Content">
            <LinearLayout android:layout_height="wrap_content"
                android:layout_width="match_parent" android:id="@+id/Upper_Right_Main_Content"
                android:background="@drawable/big">
                <LinearLayout android:layout_height="match_parent"
                    android:layout_width="0dp" android:layout_weight="1"
                    android:id="@+id/Left_Upper_Right_Content">
                    <RelativeLayout android:layout_height="match_parent"
                        android:id="@+id/relativeLayout2" android:layout_width="match_parent"
                        android:padding="10dp">
                        <LinearLayout android:layout_height="wrap_content"
                            android:id="@+id/linearLayout4" android:layout_centerVertical="true"
                            android:layout_centerHorizontal="true" android:layout_width="match_parent">
                            <TextView android:id="@+id/textView1"
                                android:layout_height="wrap_content" android:text="A(ft.)"
                                android:layout_width="wrap_content" android:textColor="#076663"
                                android:textStyle="bold"></TextView>
                            <EditText android:id="@+id/editText1"
                                android:layout_height="wrap_content" android:layout_weight="1"
                                android:layout_width="0dp" android:background="@drawable/textareabg">
                                <requestFocus></requestFocus>
                            </EditText>
                        </LinearLayout>
                    </RelativeLayout>
                </LinearLayout>
                <LinearLayout android:layout_height="match_parent"
                    android:layout_weight="1" android:layout_width="0dp"
                    android:id="@+id/Right_Upper_Right_Content">
                    <RelativeLayout android:layout_height="match_parent"
                        android:id="@+id/RelativeLayout01" android:layout_width="match_parent"
                        android:padding="10dp">
                        <LinearLayout android:layout_width="match_parent"
                            android:layout_centerHorizontal="true" android:layout_height="wrap_content"
                            android:layout_centerVertical="true" android:id="@+id/LinearLayout01">
                            <TextView android:layout_height="wrap_content"
                                android:id="@+id/TextView01" android:text="A(in.)"
                                android:layout_width="wrap_content" android:textColor="#076663"
                                android:textStyle="bold"></TextView>
                            <EditText android:id="@+id/EditText01"
                                android:layout_width="0dp" android:layout_height="wrap_content"
                                android:layout_weight="1" android:background="@drawable/textareabg"></EditText>
                        </LinearLayout>
                    </RelativeLayout>
                </LinearLayout>
            </LinearLayout>
            <RelativeLayout android:id="@+id/wrapper_bottom"
                android:layout_height="wrap_content" android:layout_width="wrap_content">
                <LinearLayout android:id="@+id/LinearLayout1"
                    android:layout_width="match_parent" android:background="@drawable/bottomthis"
                    android:layout_height="wrap_content">
                    <RadioGroup android:layout_height="wrap_content"
                        android:orientation="horizontal" android:id="@+id/radioGroup"
                        android:layout_weight="1" android:layout_width="0dp">
                        <TextView android:layout_width="wrap_content"
                            android:layout_height="wrap_content" android:textColor="#076663"
                            android:id="@+id/textView5" android:text="Obstruction"></TextView>
                        <RadioButton android:layout_height="wrap_content"
                            android:layout_width="wrap_content" android:button="@drawable/redio_on"
                            android:checked="true" android:id="@+id/radio_Obstruction_a"></RadioButton>
                        <TextView android:layout_width="wrap_content"
                            android:layout_height="wrap_content" android:textColor="#076663"
                            android:id="@+id/textView6" android:text="Raisedwall"></TextView>
                        <RadioButton android:layout_width="wrap_content"
                            android:layout_height="wrap_content" android:button="@drawable/rediooff"
                            android:id="@+id/radio_Raisedwall_a"></RadioButton>
                    </RadioGroup>
                </LinearLayout>
            </RelativeLayout>
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

# c# - 使用内存流而不是从文件中读取的好处

> ID：10851137
> 
> 赞同：0
> 
> 时间：2012-06-01T13:22:22.397
> 
> 标签：c#, .net, email, memorystream

我最近正在查看一段使用[System.Net.Mail.Attachment](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)将文件附加到电子邮件的代码。当前的实现是将附件作为文件存储到存储设备并为其赋予唯一的名称。然后将该文件附加到[MailMessage](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage)中，如下所示：

```
Attachment data = new Attachment(filename);
message.Attachments.Add(data); 
```

然后发送电子邮件，然后从存储设备中删除文件。

将文件存储在 MemoryStream （它已经是）中然后将其作为附件传递给电子邮件不是更快/更好吗？我会想象在 MailMessage 类的某个地方，文件被读入流并以相同的方式发送，并且将其存储到磁盘的整个过程是完全没有必要的。

我的直觉...写入磁盘是完全不合理的，应该实现使用流。（我错了吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:24:41.943

是的，最好避免将其写入磁盘，除非出于其他原因需要该步骤。该类`Attachment`可以将流和文件名作为其构造函数的参数，而不是为其提供物理文件路径。

[http://msdn.microsoft.com/en-us/library/6sdktyws.aspx](http://msdn.microsoft.com/en-us/library/6sdktyws.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:25:24.983

当然; `Attachment`甚至有一个接受流和名称的构造函数，因此可以完全删除将文件写入磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:30:47.323

虽然这绝对是可能的，但在进行更改之前请考虑两件事： 1\. 附件作为 MemoryStream 存在的时间。2.如果不写文件会很长，那么你的系统邮件吞吐量和内存压力也会增加。

# python - SQLalchemy - 使用 SQL 服务器身份验证登录

> ID：10851141
> 
> 赞同：1
> 
> 时间：2012-06-01T13:22:28.340
> 
> 标签：python, sqlalchemy, pyodbc

我正在使用 SQLalchemy 和 pyodbc 连接到 SQL 服务器。我可以使用“Windows 身份验证”进行连接：

```
create_engine('mssql+pyodbc://[ServerName]/[DatabaseName]',echo=True) 
```

这很好，但是当我尝试登录（SQL 服务器身份验证）时它失败了：

```
create_engine('mssql+pyodbc://[User]:{Password]@[ServerName]/[DatabaseName]',echo=True) 
```

1.  我的代码正确吗？我错过了一个设置吗？
2.  有没有办法列出数据库用户来检查名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:19:27.160

1.  是的，您的连接字符串是正确的。确保用户/密码组合正确。另请注意，用户/密码只能用于使用“SQL Server 身份验证”（在下面的代码中`SQL_LOGIN`）而不是“Windows 身份验证”的用户
2.  如果您有足够的权限进行连接，您可以执行以下命令来查看所有登录：
    `for x in session.execute("SELECT name, type, type_desc FROM sys.server_principals"): print x`

# llvm - LLVM + KLEE：模块中未找到“主”功能

> ID：10851145
> 
> 赞同：1
> 
> 时间：2012-06-01T13:22:33.527
> 
> 标签：llvm, klee

我试图为一个项目设置 Klee，并且在按照[http://klee.llvm.org/TestingCoreutils.html测试 coreutils 时遇到了困难](http://klee.llvm.org/TestingCoreutils.html)

```
src$ $KLEE cut.bc
'main' function not found in module.
*** glibc detected *** /home/klee/Development//klee-build/Debug+Asserts/bin/klee:    double free or corruption (!prev): 0x0000000003a79850 *** 
```

问题很可能是 llvm 构建本身，而不是 Klee，因为当我使用 llvm-dis 分解 .bc 文件时，只有模块 ID 存在，没有实际代码

查看构建输出，让我感到奇怪的是：

```
Potential incompatible plugin version. GCC: 4.6 (20120301). Expected: 4.6 (20120301)
Defines 'dragonegg_disable_version_check' as env variable to remove this warning
Please note that unexpected errors might occur. 
```

任何想法都会被重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T20:12:13.527

问题在于您的 LLVM 版本。KLEE 尚不兼容 llvm3.0 或更高版本。尝试构建 llvm 2.7 .. 2.9 之一。

# hadoop - 从目录中读取文件以创建 ZIP hadoop

> ID：10851151
> 
> 赞同：0
> 
> 时间：2012-06-01T13:22:49.410
> 
> 标签：hadoop, mapreduce, zip

我正在寻找 Hadoop 示例，它比 wordcount 示例更复杂。

我想做的是读取Hadoop目录中的文件并获得一个zip文件，所以我想收集map类中的所有文件并在reduce类中创建zip文件。

谁能给我一个教程或示例的链接，而不是帮助我构建它？

**我不希望任何人为我这样做，我要求提供比 wordaccount 更好的示例的链接。**

**我几乎明白了，如果你需要它：[https ://github.com/flopezluis/testing-hadoop](https://github.com/flopezluis/testing-hadoop)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:40:25.910

如果您的目标是规范化记录中的结构化数据，请从多个输入中输入，然后对其进行处理。基于它，我认为你真的需要看看[这篇](http://blog.data-miners.com/2010/01/hadoop-and-mapreduce-normalizing-data.html)过去对我有帮助的文章。它包括如何使用 Hadoop/MapReduce 规范化数据并提供基于 Java 的源代码，如下所示：

*   步骤 1：从原始数据中提取列值对。
*   步骤 2：提取不在主 ID 文件中的列值对
*   步骤 3：计算主文件中每列的最大 ID
*   第 4 步：计算不匹配值的新 ID
*   第 5 步：将新 ID 与现有主 ID 合并
*   第 6 步：将原始数据中的值替换为 ID

还有另一个例子是关于在 JAVA 中使用新的 Writable 和 InputFormat 类**读写通用记录结构的方法。**看看[这里](http://www.data-miners.com/blog/2009/12/hadoop-and-mapreduce-method-for-reading.html)。

# ios - 从远程服务器获取 ios 应用程序的时间

> ID：10851161
> 
> 赞同：4
> 
> 时间：2012-06-01T13:23:39.650
> 
> 标签：ios, datetime, nsdate

我想知道我的 iOS 应用程序如何从远程服务器（NTP？其他..？）获取日期时间，而不是使用本地 iPad 日期时间；并在 NSDate 上对其进行转换。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:29:24.827

[https://github.com/jbenet/ios-ntp](https://github.com/jbenet/ios-ntp)似乎是 iOS 的 NTP 框架，它为您提供

```
[NSDate networkDate]; 
```

# java - Android：我如何在 .java 文件和 GSOAP 之间进行接口

> ID：10851163
> 
> 赞同：1
> 
> 时间：2012-06-01T13:23:42.577
> 
> 标签：java, android, c++, sqlite, gsoap

我想使用 android 应用程序向 Gsoap 服务器发送一些数据。我无法得到适当的解决方案。我已经在 C++ 中创建了数据库文件，并且需要使用 Gsoap c++​​ 文件制作界面 android 应用程序。我能够连接到 gsoap 服务器，但无法将数据存储和发送为 c++ 格式**，但我想将 gsoap 连接到 .java 格式**。谁能帮帮我..或告诉我如何进行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:52:02.063

您不能将 Gsoap 转换为 .java 文件。它纯粹用于c语言。

# python - 在文本中交换行

> ID：10851165
> 
> 赞同：0
> 
> 时间：2012-06-01T13:23:55.947
> 
> 标签：python, linux, line, swap

如何改变这个：

```
fv (x,y,z) begin  print x;;;  print y ;;; return x + y + z end;

x = fv(2,34,5)

g (x) begin y = x + 45 ;;;  return y end;

z = g(23)

r = 53

h (x,y,z,r) begin  print x;;;  print y ;;; print z;;;print r;;;return x + y + z end; 
```

对此：

```
def fv (x,y,z) :    
    print x   
    print y   
    return x + y + z 

x = fv(2,34,5)

def g (x) :  
    y = x + 45  
    return y 

z = g(23)

r = 53

def h (x,y,z,r) :   
    print x   
    print y   
    print z   
    print r   
    return x + y + z 
```

我不是要完整的代码或做我的功课，我只需要建议和/或样本或如何做到这一点的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:38:27.220

因为你只是在寻找一个开始的提示，这可能是家庭作业......

对各种换行符（例如“begin”、“;;;”、“end;”）执行 replace() 将它们转换为“\n”，其中一个可能带有 ':'。

使用 .split("\n") 将生成的文本拆分为行

走线调整行前缀（“def”，缩进）

使用 "\n".join(...) 将这些行重新组合在一起

编写输出文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:41:10.530

这可以让你开始

```
for line in code:
    line = line.replace( "begin", " :\n" + " " * 4 ).replace( ";;;", "\n" + " " * 4 ).replace( "end;", "\n" + " " * 4 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:29:54.600

例如，查看`[sed](http://linux.die.net/man/1/sed)`命令行工具。很难知道您期望/允许使用哪些工具...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:17:16.403

这可能有点矫枉过正，但请看一下 Ply 解析器项目。您将必须了解正则表达式和 Backus Naur 格式。

[层解析器](http://www.dabeaz.com/ply/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:34:15.597

好吧，对于文件的初学者`open()`，使用它的`readlines()`方法将其放入字符串列表中。

从那里您可以遍历该列表并使用方法组合或字符串模块中`split(";;;")`更复杂的方法。`re`

# iphone - 如果 CALLER 取消，audioPlayerEndInterruption 将不起作用

> ID：10851174
> 
> 赞同：1
> 
> 时间：2012-06-01T13:24:25.710
> 
> 标签：iphone, ios, ios5

我正在使用 audioPlayerEndInterruption 在“中断”后恢复游戏音乐。它似乎适用于所有测试的场景，除了： **如果接到电话但来电者挂断（在被接听之前）**，游戏会回来，但音轨不会。

正如我所说，所有其他呼叫中断情况都有效，轨道确实回来了。我想知道这是否是某种iOS错误？有人听说过这个问题吗？似乎很奇怪。

我倾向于暂时忘记它，但它很烦人！我的代码是这样的：

```
-(void)audioPlayerEndInterruption:(AVAudioPlayer *)player withFlags:(NSUInteger)flags{
    if(flags == AVAudioSessionInterruptionFlags_ShouldResume && player != nil){
        [player play];
    }
} 
```

将不胜感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:13:13.920

迟到总比不到好。

我也遇到了这个问题。它看起来像一个错误（至少在 ios 5.1 中），因为如果所有 AVAudioPlayer 都已停止，并且仅播放 openAL 声音，则 AVAudioSession 委托方法会按预期调用（但 AVAudioPlayer 不会）。

因此，如果 AVAudioPlayer 正在运行，我使用一种解决方法：只需将 AppDelegate::applicationDidBecomeActive 调用添加到您的 audioPlayerEndInterruption 处理程序，并在适当的情况下进行一些检查（如果存在声音管理器等等）。这对我有用。

# python - Python：写入下一个空行

> ID：10851175
> 
> 赞同：4
> 
> 时间：2012-06-01T13:24:26.083
> 
> 标签：python

我正在尝试编写经过三个大迭代以及每次打开和关闭输出文件时正在完成的操作的输出。迭代后计数器会被重置，类似这样的事情，我是一个巨大的新手，并且很难用我编写的伪劣代码来解决这个问题。因此，即使速度较慢，我也想改变它的输出方式。

目前对于输出，它只是重写第一行，所以我只有最后一次运行程序的输出。（tau，输出是代码中上述迭代中给定值的变量）

```
with open(fileName + '.autocorrelate', "w") as outfile:
    outfile.writelines('{0}     {1}{2}'.format(tau, output, '\n')) 
```

我想知道是否有任何快速方法可以让 python 在打开文件并在那里写入新行时检查第一个空行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T13:27:11.737

使用“a”而不是“w”打开将写入文件末尾。这就是不覆盖的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:27:20.953

如果您以附加模式打开文件：`"a"`而不是“ `w`”，您将能够在文件末尾写一个新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:46:18.453

你会做类似的事情来保持对文件中每个空行的引用（行号）

```
# Get file contents
fd = open(file)
contents = fd.readlines()
fd.close()

empty_line = []
i = 0

# find empty line
for line in contents:
    if line == "":
       empty_line.append(i)
    i+=1 
```

# css - LI 在 IE7 中拉伸到整个页面宽度，但在 Chrome 中很好

> ID：10851179
> 
> 赞同：0
> 
> 时间：2012-06-01T13:24:45.843
> 
> 标签：css, html4

我创建了一个包含在 t div 中的菜单。在 Chrome 中运行时菜单显示良好，但在 IE7 中拉伸了所有 LI 项

我只是无法理解这个。

可以在[http://jsfiddle.net/uMASt/](http://jsfiddle.net/uMASt/)找到一个示例。页面在 jsfiddle 上正确加载，但在我的硬盘上不正确

谢谢！伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:31:27.030

由于在 jsfiddle 上正确加载时不可能看到发生了什么问题，即使在 IE7 中，我也可以给它一个有希望的猜测...... IE7 过着它自己的生活，有时需要一些额外的属性，IE 只有属性以星号开头.

尝试添加 *zoom:1; *显示：内联；到你的 li 元素，见下文。

```
 #menu li {            
        display:block;
        float:left;
        border-top:1px solid #CCC;
        text-transform:uppercase;
        width:auto;
        *zoom:1;
        *display:inline;
    }
    #menu li a {
        padding: 10px 15px 10px 25px;
        display:block;
        height:50px;
        text-decoration:none;
        color:#FFF;
        *zoom:1;
        *display:inline;
    } 
```

# git - 始终保持 git 镜像同步

> ID：10851181
> 
> 赞同：7
> 
> 时间：2012-06-01T13:25:01.450
> 
> 标签：git, mirroring

我有几个使用 Drupal 的站点，我有几个服务器，live、dev1、dev2 ......

Drupal 的代码库 repo 很大（112Mb），所以我热衷于充分利用 git 的硬链接能力，这样每次我添加一个站点时都不会重复这个。

等等，比如说，我有一个裸主仓库的实时服务器，我所有的站点都是这个的克隆，每个站点都使用不同的分支。这在一台服务器上很棒，使用硬链接，快速高效。

但是在我的开发服务器上，它们通常都是从裸主存储库克隆的，这意味着同一台机器上的两个站点不能使用硬链接来节省空间。

我想做的是在我的每台开发服务器上设置一个裸仓库的镜像，然后从中克隆。

```
dev1$ git clone --mirror live:master-bare-repo  dev1-mirror-repo
dev1$ git clone -b site1 dev1-mirror-repo site1
dev1$ git clone -b site2 dev1-mirror-repo site2 
```

到目前为止一切都很好。但我希望镜子始终保持同步。所以我在 dev1 的镜像上使用[了 post-receive hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)来做`git push --mirror origin`. 现在，如果 dev1 上的 site1 推送提交，它们会神奇地推送到 master-bare-repo。

**但是**，如果我在**实时**服务器上进行更改，然后推送呢？我不能设置一个`post-receive`钩子来推送给其他人，因为这可能会触发*他们的* `post-receive`钩子，最终会递归？

有什么聪明的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:06:53.187

首先，**您不会以递归结束**，因为当“一切都是最新的”（如[另一个问题](https://stackoverflow.com/questions/10878495/git-post-receive-hook-for-everything-up-to-date "这另一个问题")中所述）时不会执行 post-receive 钩子，这将是来自*推送*的结果镜像到实时服务器。

另一方面，这并不是一个可扩展的设计（每次添加新镜像时，您都需要更改实时服务器的挂钩以添加要推送的站点）。您可能会发现在您的镜像中使用“惰性”同步策略更优雅：当他们收到推送时，他们不只是推送到主服务器，而是在此之前从主服务器获取/拉取。这样你就不需要在 master 中设置 hook，同步策略将完全由镜像管理。这种策略的缺点是您最终可能希望在需要推送任何更改之前对要传播到镜像的实时服务器进行更改。因此，您必须考虑对 master 的更改是否对补偿可伸缩性的权衡至关重要。当然，一个补丁可以让这个“可扩展”

# ruby - 工头不会从独角兽开始

> ID：10851182
> 
> 赞同：1
> 
> 时间：2012-06-01T13:25:02.423
> 
> 标签：ruby, macos, rvm, unicorn, foreman

我正在尝试让 Foreman 使用我的 Unicorn 设置。

这是我的Procfile：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

这是我启动 Foreman 时的输出：

```
10:41:37 web.1     | started with pid 19300
10:41:38 web.1     | /Users/seth/.rvm/gems/ruby-1.9.2-p136/gems/bundler-1.1.4/lib/bundler/shared_helpers.rb:2:in `require': no such file to load -- rubygems (LoadError)
10:41:38 web.1     | process terminated
10:41:38 web.1     |    from /Users/seth/.rvm/gems/ruby-1.9.2-p136/gems/bundler-1.1.4/lib/bundler/shared_helpers.rb:2
10:41:38 system    | sending SIGTERM to all processes
10:41:38 web.1     |    from /Users/seth/.rvm/gems/ruby-1.9.2-p136/gems/bundler-1.1.4/lib/bundler/setup.rb:1:in 
```

它失败了：

```
require 'rubygems' 
```

更新：通过运行*ruby​​ --version*进行快速健全性检查后，我意识到我实际上正在运行 1.8.7。出于某种原因，在我关闭该终端窗口后，运行*rvm use --default 1.9.2-p136*甚至新安装的 1.9.2-p320 都不会持续存在。它总是恢复到 1.8.7。

所以我现在可以启动工头，但是当我关闭那个终端并回来时，我又回到了 1.8.7，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:34:24.590

移动这条线：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

在我的 .profile 底部为我修复它。这对我有帮助：[为什么“RVM --default”在 MacOSX 上对我不起作用？](https://stackoverflow.com/questions/5604877/why-doesnt-rvm-default-work-for-me-on-macosx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:19:05.043

您需要运行登录会话以使 RVM 以交互模式运行 - 例如：[https](https://rvm.io/integration/gnome-terminal/) ://rvm.io/integration/gnome-terminal/或[https://rvm.io/workflow/screen/](https://rvm.io/workflow/screen/)

但要在脚本中使用 RVM，您应该阅读：[https ://rvm.io/integration/cron/](https://rvm.io/integration/cron/)

# php - 时事通讯订阅死亡，没有错误

> ID：10851185
> 
> 赞同：-2
> 
> 时间：2012-06-01T13:25:11.333
> 
> 标签：php, mysql, function, mysql-real-escape-string

我在撰写时事通讯订阅时遇到问题。问题是当有人单击提交时，我似乎没有收到任何错误，或者实际上根本没有任何错误，所发生的只是他们呈现一个空白的白页，仅此而已，因此很难诊断。

基本上，政策提醒表单上有一个名为 newslettersubscribe 的字段，如果这等于是，则用户还订阅了新闻通讯列表以及他们正在注册的政策提醒列表。我不是 100% 确定我是否正确使用了 real_escape_string 函数？

```
<?php
$email = real_escape_string($_POST['email']);
$name = real_escape_string($_POST['name']);
$newslettersubscribe = real_escape_string($_POST['newslettersubscribe']);
if ($newslettersubscribe == 'no'){
}
else{
mysql_query("INSERT INTO ymeg_chronoforms_data_NewsletterDesigner (email, name)
VALUES ('$email', '$name')") or die(mysql_error());
}
?> 
```

编辑>>>>>>>>>>>>>>>>>>>>

如果我删除真正的转义字符串，我会收到错误

```
Unknown column 'email' in 'field list' 
```

点击提交时，这可能解释了白页，上述错误是什么意思？

编辑 2 >>>>>>>>>>>>>>>>>

这是我试图连接到的数据库中的示例记录：

```
cf_id   6
cf_uid  5f04f21f80a596f17341cec92a48b197
cf_created  2012-06-01 10:13:16
cf_modified     
cf_ipaddress    217.154.186.84
cf_user_id  44
name    Iain Simpson
email   test@1testdsdsfswqewed.csdom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:13:19.977

尝试回显值以确保它不是简单地默认为的问题

```
$newslettersubscribe = 'no'; 
```

你需要做一些简单的事情，如下所示：

```
$email = real_escape_string($_POST['email']);
$name = real_escape_string($_POST['name']);
$newslettersubscribe = real_escape_string($_POST['newslettersubscribe']);

echo $email.' | '.$name.' | '.$newslettersubscribe;
exit(); 
```

这至少应该向您展示所需变量的值。这一切都是为了简单地解决即将发生的问题，以及它如何影响您的 sql 查询。

# android - 在 android 上使用 web 服务时出现异常错误

> ID：10851188
> 
> 赞同：2
> 
> 时间：2012-06-01T13:25:33.043
> 
> 标签：android, eclipse, web-services, exception

现在我已经使用 SOAP 方法来使用来自 android eclipse 的 web 服务。

我需要从 edittext 获取输入并显示正确的值，这意味着调用 Web 服务并返回结果。

模拟器运行后，显示为“错误：java.lang.RuntimeException：无法序列化0004”。如何克服这个错误。

这是我的代码，请找到

**screen.java**

```
public class X_classActivity extends Activity 
{
    private EditText edit;
    private Button btn; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         edit = (EditText) findViewById(R.id.editText1); 
         btn = (Button)findViewById(R.id.button1);
         btn.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                      fun();
             }
         });
   }

private void fun()
{
    //getSOAPResponse() method returns SOAP Response
    SoapObject soapResponseObject = getSOAPResponse(edit.getText());
}

public SoapObject getSOAPResponse(GetChars search)
{
    SoapObject soapObject = new SoapObject("http://tempuri.org/", "GetName");
    soapObject.addProperty("str", search);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(soapObject);
    HttpTransportSE androidHttpTransport = new      HttpTransportSE("http://122.248.240.105:234/Service1.asmx?WSDL");
    try 
    {
         androidHttpTransport.call("http://tempuri.org/GetName", envelope);//call the eb service Method
         Object result = envelope.getResponse();
         System.out.println(" " + result.toString());
         ((TextView) findViewById (R.id.textView2)).setText(""+result.toString());
    } 
    catch (Exception E) 
    {
         E.printStackTrace();
         ((TextView) findViewById (R.id.textView2)).setText("ERROR:"    + E.getClass().getName() + ":" + E.getMessage());
    }
    return soapObject;
   }
} 
```

**日志猫**

```
06-01 18:39:56.020: W/KeyCharacterMap(932): No keyboard for id 0
06-01 18:39:56.020: W/KeyCharacterMap(932): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-01 18:40:00.510: W/System.err(932): java.lang.RuntimeException: Cannot serialize: 0004
06-01 18:40:00.520: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:661)
06-01 18:40:00.520: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:645)
06-01 18:40:00.520: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:614)
06-01 18:40:00.520: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:598)
06-01 18:40:00.520: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:655)
06-01 18:40:00.530: W/System.err(932):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:579)
06-01 18:40:00.530: W/System.err(932):  at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:192)
06-01 18:40:00.530: W/System.err(932):  at org.ksoap2.transport.Transport.createRequestData(Transport.java:74)
06-01 18:40:00.530: W/System.err(932):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:58)
06-01 18:40:00.530: W/System.err(932):  at com.x.x.x.X_classActivity.getSOAPResponse(X_classActivity.java:57)
06-01 18:40:00.530: W/System.err(932):  at com.x.x.x.X_classActivity.fun(X_classActivity.java:45)
06-01 18:40:00.530: W/System.err(932):  at com.x.x.x.X_classActivity.access$0(X_classActivity.java:41)
06-01 18:40:00.530: W/System.err(932):  at com.x.x.x.X_classActivity$1.onClick(X_classActivity.java:36)
06-01 18:40:00.530: W/System.err(932):  at android.view.View.performClick(View.java:2408)
06-01 18:40:00.530: W/System.err(932):  at android.view.View$PerformClick.run(View.java:8816)
06-01 18:40:00.530: W/System.err(932):  at android.os.Handler.handleCallback(Handler.java:587)
06-01 18:40:00.530: W/System.err(932):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-01 18:40:00.530: W/System.err(932):  at android.os.Looper.loop(Looper.java:123)
06-01 18:40:00.530: W/System.err(932):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-01 18:40:00.530: W/System.err(932):  at java.lang.reflect.Method.invokeNative(Native Method)
06-01 18:40:00.530: W/System.err(932):  at java.lang.reflect.Method.invoke(Method.java:521)
06-01 18:40:00.540: W/System.err(932):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-01 18:40:00.540: W/System.err(932):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-01 18:40:00.540: W/System.err(932):  at dalvik.system.NativeStart.main(Native Method) 
```

**网络方法**

```
 public class GetName {
public String GetName(String str){
    return(str);
}    } 
```

非常感谢！！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T02:42:48.937

我认为你在这行做错了什么，

```
androidHttpTransport.call("http://tempuri.org/GetName", envelope);//call the eb service Method 
```

我认为第一个论点是错误的。请参阅以下代码，它对我来说很好用。另外，请在构建项目时导出依赖项。有时它会帮助你。

```
 private String METHOD_NAME = "";
    // our webservice method name
    private String NAMESPACE = "http://ws.travel_ceylon.web.org";
    // Here package name in webservice with reverse order.
    private String SOAP_ACTION = NAMESPACE + METHOD_NAME;
    // NAMESPACE + method name
    private static final String URL = "http://192.168.177.130:8080/Travel_Ceylon_Central_Web_Service/services/Travel_Ceylon_Web_Service?wsdl";

    // you must use ipaddress here, don’t use Hostname or localhost

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String city = "Matara";
        String im = "Galle Face";

        METHOD_NAME = "getLongitude_City";
        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("city", city);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Object result = envelope.getResponse();
            ((TextView) findViewById(R.id.txtCityLongitude)).setText(city
                    + " Longitude is : " + result.toString());

        } catch (Exception E) {
            E.printStackTrace();
            ((TextView) findViewById(R.id.txtCityLongitude)).setText("ERROR:"
                    + E.getClass().getName() + ":" + E.getMessage());
        } 
```

# django - Django：一个简单的表单问题

> ID：10851189
> 
> 赞同：1
> 
> 时间：2012-06-01T13:25:48.070
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我是 django 的新手，我在使用简单的表单 POST 时遇到问题。我在 forms.py 中有一个 ModelForm，当用户在 html 中输入信息时，views.py 会获取并保存它。但是，我不断收到错误消息，说它找不到 view.py 中不存在的视图。请帮我找出错误。谢谢！

网址.py

```
urlpatterns = patterns('',
                       (r'^mypage/(?P<username>\w+)/$', 'recipeapp.views.my_view'), 
```

表格.py

```
class NewRecipeForm(forms.ModelForm):

    user_info = forms.ForeignKey(User)
    title = forms.CharField(min_length=2,max_length=50,required=True,)
    post_date = forms.DateField(auto_now=True)
    ingredients = forms.TextField(widget=forms.Textarea(),)
    picture = forms.ImageField(upload_to='photos/%Y/%m/%d',)
    content = forms.TextField(widget=forms.Textarea(),) 
```

视图.py

```
@csrf_protect
from recipeapp.forms import NewRecipeForm

    def my_view(request,username):
        if request.method == 'POST':
            form = NewRecipeForm(request.POST)
            if form.is_valid():
                form.save()
        else:
            form = NewRecipeForm()

        return render_to_response('postlogin.html',{'username':username},{'form': form}, RequestContext(request)) 
```

postlogin.html

```
 <form action="" method="post" id="form">
            {% csrf_token %}

                <div id="dish-name">
                <label><p>Dish name</p></label>
                {{form.title}}
                </div>

                <div id="ingredients">
                <label><p>Ingredients</p></label>
                {{form.ingredients}}
                </div>

                <div id="content">
                <label><p>Content</p></label>
                {{form.content}}
                </div>

                {{form.picture}}
       </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:36:05.127

这真的是你的全部views.py吗？你至少有三个问题：

首先，您还没有导入`csrf_protect`- 就像任何名称一样，需要先定义装饰器才能使用它。

其次，你必须装饰一个实际的函数，而不是一个文件。装饰器应该在`my_view`.

第三，你的缩进被破坏了 -`def`根本不应该缩进。

鉴于所有这些，我预计 Python 由于语法错误而无法导入您的视图。

另请注意，您不应该真正使用`csrf_protect`- 您应该在中间件中启用 CSRF 保护（默认情况下启用）并且只使用`csrf_exempt`装饰器，然后只在非常罕见的情况下使用。

# clearcase - 重用 ClearCase 视图

> ID：10851192
> 
> 赞同：5
> 
> 时间：2012-06-01T13:25:56.357
> 
> 标签：clearcase, clearcase-ucm

我想重新加载一个视图（之前创建的）而不是创建一个全新的视图。

两种情况：

1 - 硬盘崩溃，本地视图不再存在。
2 - 使用 ClearCase 设置新的笔记本电脑。

在这两种情况中的任何一种（或两种）中，是否可以在本地驱动器上恢复视图？还是必须删除视图然后创建一个新视图？如果我能摆脱它，我宁愿没有 STREAM_2_int 和 STREAM_3_int。

（附带问题：如果有人有台式机和笔记本电脑，他们可以在每台电脑上使用相同的视图，还是每台电脑只有一个视图？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:47:58.533

是的，对于快照视图，只要 ClearCase 视图存储（`.vws`目录）与视图本身不在同一工作站上。

使目录成为（先前创建的）快照视图的根目录所需的唯一文件是隐藏文件**`view.dat`**。

请参阅 IBM 技术说明“[重新生成`view.dat`文件](http://www-304.ibm.com/support/docview.wss?uid=swg21204161)”

用于恢复该 view.dat 文件的 perl 脚本（打包在任何 ClearCase 安装中）是`<ClearCase>\etc\utils\regen_view_dot_dat.pl -tag <view-tag-id> <view root directory path>`.

例子：

```
C:\source>ccperl c:\Rational\ClearCase\etc\utils\regen_view_dot_dat.pl -tag aSnapViewName .
rgy_view_uuid: "d17190d381de4ce89757d5465eb41f2c".
creating ".\view.dat".

C:\source>type view.dat
ws_oid:00000000000000000000000000000000 view_uuid:d17190d381de4ce89757d5465eb41f2c 
```

同样，只有当视图存储`\\shared\path\to\aSnapViewName.vws`位于可从工作站或新笔记本电脑访问的共享路径中时，这才有效。

# javascript - 复制到电子表格时将逻辑构建到 Google Apps 脚本表单中

> ID：10851193
> 
> 赞同：0
> 
> 时间：2012-06-01T13:26:06.370
> 
> 标签：javascript, google-apps-script

我使用谷歌应用程序脚本构建了一个简单的表单，允许人们输入即将发生的事件的信息（日期/时间、位置、成本等），然后单击一个按钮，它将信息传输到共享谷歌电子表格和谷歌日历中的列. 我还想出了如何使它将信息传输到多个电子表格，但我想建立一些逻辑，它将某些信息一直传输到一个电子表格，但如果其中一个字段仅将某些信息传输到第二个电子表格非零。有没有办法建立逻辑，如果一个人填写了某个字段，只会触发信息传输到第二个电子表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:11:38.797

您是使用标准的 Google 表单还是使用 UI 服务构建它？

*   在第一个选项中，数据始终写入与其链接的电子表格，没有任何选项，但您始终可以让脚本在收到答案时删除一些项目和/或将它们移动/复制到另一张表。
*   在第二个选项中，您完全按照您想要的方式做您想做的事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:45:19.297

您需要从表单的提交请求中读取数据。看看下面的教程；

[http://www.steegle.com/websites/google-sites-howtos/apps-script-contact-us-form-email](http://www.steegle.com/websites/google-sites-howtos/apps-script-contact-us-form-email)

# php - 使用第一个表的自动递增 id 更新第二个表

> ID：10851194
> 
> 赞同：2
> 
> 时间：2012-06-01T13:26:12.190
> 
> 标签：php, mysql

这是我在网站上的第一篇文章。我是 mysql 和 php 的新手，所以请原谅任何错误并指出它们。我有一张表来存储招聘详细信息：

**table_hiring**
招聘id int(20) AUTOINCREMENT => (主键);
招聘名称 varchar(80);
招聘日期 bigint(20);
……

我有另一个表来存储工具及其租用价格，其中有：

**table_tools**
tool_id int(10)AUTOINCREMENT => (主键);
tool_description varchar(100);
tool_price 双倍；

每个雇用请求都将保存在雇用表中。我的问题是每个租用请求都可以有多个工具（它是一个地面租用。所以租用者可以请求一个障碍组、一个射击组和一个标枪组等等。）。我对在单个字段中存储多个值的问题感到困惑。我做了一些研究，并决定有另一张桌子

**table_tool_hire**
tool_hire_id() => (来自 table_hiring 的主键);
tool_id() => (table_tools 的主键);
tool_hire_date bigint(20);

问题是每次有雇用请求时，根据雇用者的请求，我需要在一个查询中填充 table_hiring 和 table_tool_hire，并且雇用 ID 需要在两个表中都匹配。

如何将值插入 table_hiring 并同时获取要更新到 table_tool_hire 表中的该雇用的自动递增 id 值？请帮助...提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:31:16.323

对于 PHP，可以使用`mysql_insert_id()`. 对于 .NET，看看[这个](http://forums.mysql.com/read.php?38,98672,98868#msg-98868).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:32:22.367

请看看这个论坛，

[获取事务中的所有插入 ID](https://stackoverflow.com/questions/10755334/get-all-insert-ids-in-a-transaction/10755486#10755486)

您可以使用变量存储最后一个插入ID，

```
INSERT INTO messages(`message`) VALUES ('message1');
@message1:=last_insert_id();
INSERT INTO messages_tags(`message_id`, `tags`) VALUES (LAST_INSERT_ID(), 'tagfoo1');
@message2:=last_insert_id(); 
```

如果你做

```
select @message1; 
```

结果是 1234，所以你有

```
@message1 => 1234
@message2 => 1235 
```

# visual-studio-2008 - Developer Express XtraGrid - 不会显示货币。忽略显示格式

> ID：10851200
> 
> 赞同：0
> 
> 时间：2012-06-01T13:26:40.473
> 
> 标签：visual-studio-2008, devexpress, xtragrid

我在 Developer Express XtraGrid 控件中显示带有货币符号的数据时遇到问题。

问题中的列是浮点数和十进制数据类型。

基本上它似乎在忽略格式

...通过设计师设置...

选择左侧的“主要”部分单击“列”添加我的列，每个列设置 Fieldname ，然后显示格式： DisplayFormat / FormatString = c2 DisplayFormat / FormatType = Numeric

...以及在运行时..

```
DevExpress.Utils.FormatInfo fi = new DevExpress.Utils.FormatInfo();
fi.FormatType = DevExpress.Utils.FormatType.Numeric;
fi.FormatString = "c2";
gridColumn3.DisplayFormat.Assign(fi); //Denomination
gridColumn5.DisplayFormat.Assign(fi); //Value 
```

两者都没有任何效果。

我注意到其他人在 devexpress 网站上遇到了同样的问题：http: [//www.devexpress.com/Support/Center/p/Q302261.aspx](http://www.devexpress.com/Support/Center/p/Q302261.aspx)

Ted 提供的示例项目在这方面工作正常，当我将 DisplayFormat 更改为 Numeric "c2" 时，这会显示我想要的 currentcy 符号

考虑到这是在 XtraGrid 中某处设置的奇怪属性，我在表单中添加了一个全新的属性，除了要填充的列和如上所述的 DisplayFormat 之外什么都没有设置。

还是没有运气。

有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:44:12.920

我已经放弃使用设计师了。对它进行长时间的硬编码似乎可行。欢迎回到 1987...

# shell - 避免 shell 脚本中的交互模式

> ID：10851201
> 
> 赞同：4
> 
> 时间：2012-06-01T13:26:41.917
> 
> 标签：shell, scripting

有一个交互式 shell 控制台，我可以进入它，在控制台中运行特定的命令集并从中退出。

现在我想编写一个连接到交互式 shell 控制台并静默运行我的命令的 bash 脚本，最后退出而没有任何交互。这意味着我希望以非交互方式将所有内容自动化。任何想法我怎样才能做到这一点？

我正在尝试类似 blabla shell 是这里的交互式控制台，它总是让我进入交互模式:(

```
/usr/bin/blabla shell << EOF 
do A,
do B,
do C
quit
EOF 
```

我有一个长/特定版本的这个问题可以在这里找到-> [在 shell/bash 脚本中配置水槽-避免交互式水槽 shell 控制台](https://stackoverflow.com/q/10850986/1275937)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:43:10.077

关闭`stdin`应该可以解决问题：

```
exec <&- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:43:29.643

命令如果你的`expect`朋友。即使以非常复杂的方式，它也可以模拟与其他命令的交互通信。

从[人的期望](http://manpages.ubuntu.com/manpages/precise/en/man1/expect.1.html)：

> Expect 是一个根据脚本与其他交互式程序“对话”的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:57:58.027

您可以尝试将在交互式提示中输入的命令放入文件中，然后运行如下命令：

```
command < file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T16:56:33.307

也许*Secure SHell 可以满足*`ssh`您的需要。它要求将“远程”机器配置为 SSH 服务器。我经常使用它在其他主机上运行命令，例如

```
 ssh user@host command 
```

# java - 针对 XSD 验证 CXF GET 请求

> ID：10851202
> 
> 赞同：1
> 
> 时间：2012-06-01T13:26:48.293
> 
> 标签：java, validation, rest, xsd, cxf

有什么方法可以验证 GET 请求，即针对 XML 模式的查询参数。对于 POST，我们可以有 schemaLocations 配置，对于 GET 是否有类似的东西。我希望在调用我的服务类方法之前进行此验证。

# java - MQ - 查看消息 - 文本限制

> ID：10851209
> 
> 赞同：6
> 
> 时间：2012-06-01T13:27:23.470
> 
> 标签：java, jakarta-ee, jms, ibm-mq

在 MQ 资源管理器中浏览消息时，它只显示前 1000 个字符。我们无法看到完整的消息。是否有任何可用的免费软件可用于查看完整的消息？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T13:53:10.307

在切换到其他东西之前，您是否尝试过调整 WMQ Explorer 设置？

首先，进入首选项对话框： ![在此处输入图像描述](../Images/3ba495b5d1799179cb73c8744dc0fc71.png)

然后选择 Messages 面板并调整值： ![在此处输入图像描述](../Images/daac9bf5b59f6b115725f5862d10d303.png)

WMQ Explorer 设置这些默认值的原因是为了防止出现明显的“挂起”，例如，如果有 3500 条大小为 64k 的消息。鉴于这些默认值，Explorer 将下载不超过 500 个，并且只下载每个的前 10k 字节。给定默认值，Explorer 可以浏览包含大量消息的深度队列，并且仍会在可预测的时间内返回。

任何其他浏览器工具都存在同样的问题，因为瓶颈是网络而不是工具。

也就是说，如果您想查看其他桌面客户端工具，[SupportPac MO71](http://ibm.co/SupptPacMO71)非常受欢迎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T08:56:46.867

Hermes jms 使用 jms api - 因此您不会获得所有 wmq 功能，但会获得很多功能。它的开源。 [爱马仕JMS最新下载](http://hermesjms.com/patches)

我也喜欢 mqmon [MO71](http://www-304.ibm.com/support/docview.wss?uid=swg24000142)和 rfhutil [IH03](http://www-304.ibm.com/support/docview.wss?uid=swg24000637)，它们来自 IBM，但它们是原生的 WMQ，各有利弊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:04:36.870

您可能想看看[MQ Visual Edit](http://www.capitalware.biz/mqve_overview.html "MQ 可视化编辑")。它是一个独立的 MQ 消息编辑工具，但不是免费的。

# jquery - 添加规则 JQuery 验证在 IE 中不起作用

> ID：10851217
> 
> 赞同：0
> 
> 时间：2012-06-01T13:28:46.903
> 
> 标签：jquery, internet-explorer, validation

我正在使用以下函数动态添加 JQuery 验证规则：

```
function addRules(rulesObj) {
    for (item in rulesObj) {
        $('#' + item).rules('add', rulesObj[item]);
    }
} 
```

我正在使用 JQuery 版本 1.7.2 和 JQuery validate 1.9，它在 IE 7 和 8 中不起作用。在 Chrome 和 FF 中运行良好。我错过了什么吗？错误：`Object doesn't support this action.`

规则如下所示：

```
var ctrxRules = {
        L4 : {
            required : true
             }
}; 
```

**如果规则为空，则有效。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:34:26.817

我无法解释为什么，但解决方案很简单，添加一个`var`前项：

```
function addRules(rulesObj) {
    for (var item in rulesObj) {
        $('#' + item).rules('add', rulesObj[item]);
    }
} 
```

# javascript - 如何使用 Knockout 构建单页应用程序？

> ID：10851219
> 
> 赞同：9
> 
> 时间：2012-06-01T13:28:51.530
> 
> 标签：javascript, jquery, asp.net-mvc, knockout.js, single-page-application

我最近开始玩 Knockout，我必须说它真的很棒，它可以为 Web 应用程序带来强大的功能。

但是现在我想做一些真实的事情并使用 Knockout 构建我的解决方案。例如。我的视图模型应该如何初始化。他们应该去哪里？我主要针对单页应用程序。因此，我主要对构建单页应用程序感兴趣。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T13:40:51.270

这个难题有很多部分，但这里有一个简短的清单。

免责声明：我也会对您的应用程序做出一些假设，因此其中一些会有所不同。此外，这只是一种方法。可能有很好的方法。但这对您来说应该是一个很好的起点。

假设您的应用是 SPA 中一组相邻的 5 个主要视图：

1.  创建一个 master/shell html 页面来容纳应用程序
2.  为每个视图创建一个视图/部分页面 (html)。每个视图都是隐藏的，直到您导航/路由到它。
3.  创建一个可以绑定到每个视图的视图模型创建一个启动一切的 bootstrapper.js。
4.  Bootstrapper 应该启动您使用的任何路由引擎（sammy、history 等）
5.  Bootstrapper 将视图绑定到视图模型 Bootstrapper 还可以为您的 SPA 启动任何种子数据和状态
6.  提示：使用 SoC。让您的视图模型成为视图模型。不要让他们做路由、ajax 调用、ui 操作等。对其他功能有单独的对象。DRY、KIS、SoC ......所有的好东西 :-)

我使用显示模块模式来创建我的视图模型，尽管标准模块也非常好。

如果您有更具体的问题，很乐意回答。我试图保持这个简短的事实，这不是一个 5 分钟的答案。事实上，我正在为 Pluralsight 编写一门课程，其中一种方法将于 2012 年 8 月推出 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T04:52:17.210

我刚刚开源了我组装的迷你 SPA 框架，其中 Knockout 是主要组件。

**knockout-spa** 建立在 Knockout、Require、Director、Sugar 之上的迷你（但成熟）SPA 框架。 [https://github.com/onlyurei/knockout-spa](https://github.com/onlyurei/knockout-spa)

**现场演示： http:** [//knockout-spa.mybluemix.net](http://knockout-spa.mybluemix.net)

### 特征

*   路由（基于 Flatiron 的 Director）：HTML5 历史记录（pushState）或哈希。
*   高度可组合和可重用：在页面特定的 JS 中为页面选择模块/组件，它们将自动连接到页面的 HTML 模板
*   SEO 就绪 (prerender.io)
*   快速且轻量级（85 KB 的 JS 压缩和压缩）
*   用于生产的 JS 的两层包构建：大多数页面将使用的通用模块，以及将延迟加载的页面特定模块
*   有组织的文件夹结构可帮助您保持头脑清醒地组织和重用 JS、CSS、HTML
*   使用 Knockout 3.3.0+ 准备好使用 Knockout 的 Web 组件和自定义标签 ( [http://knockoutjs.com/documentation/component-overview.html](http://knockoutjs.com/documentation/component-overview.html) )
*   所有文档都在主要依赖项自己的主页中，因此您无需完全学习新框架
    *   淘汰赛[http://knockoutjs.com](http://knockoutjs.com)
    *   需要[http://requirejs.org](http://requirejs.org)
    *   导演[https://github.com/flatiron/director](https://github.com/flatiron/director)
    *   jQuery [http://jquery.com](http://jquery.com)
    *   糖[http://sugarjs.com](http://sugarjs.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-21T18:20:05.697

对于那些需要更新替代方案的人（2015 年）...另一种选择（也是一个非常好的选择）是使用 Yeoman 为您搭建一个单页应用程序，如 Steven Sanderson 的博客中[所述](http://blog.stevensanderson.com/2014/06/11/architecting-large-single-page-applications-with-knockout-js/)

它为您完成了您需要的所有架构，因此您可以专注于编写代码。尽量利用已知的淘汰组件功能的可重用性 - Steve Sanderson 对此进行了惊人的描述，因此我不会剥夺他出色工作的荣耀。

# javascript - 和......有什么区别？

> ID：10851220
> 
> 赞同：0
> 
> 时间：2012-06-01T13:29:00.320
> 
> 标签：javascript, jquery

> **可能重复： $(“** [*”、$(“#container1”)) 和 $(“#container2”).find(“*](https://stackoverflow.com/questions/1626010/what-is-the-difference-between-container1-and-container2-fin)
> [”)有什么区别？](https://stackoverflow.com/questions/1626010/what-is-the-difference-between-container1-and-container2-fin)

 *和有什么区别

`jQuery('.classname', this.frame)`和`this.frame.find('.classname')`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:31:47.593

没什么，如果你看一下jQuery的源代码，`jQuery('.classname', this.frame)`只是调用`jQuery(this.frame).find('.classname')`

[见第 192 行](http://code.jquery.com/jquery-1.7.2.js)

就此而言，您可以阅读Felix King 指出的[文档：](http://api.jquery.com/jQuery/#selector-context)

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:31:18.953

第二个例子会爆炸，因为`this.frame`它不是一个 jquery 对象。除此之外，它们是等价的。

你可能是说`$(this.frame).find('.classname')`*

# vbscript - 如何包含 CDO 主机名和端口？

> ID：10851225
> 
> 赞同：0
> 
> 时间：2012-06-01T13:29:13.453
> 
> 标签：vbscript, asp-classic, cdo.message

如何将主机名和端口 25 传递到此 vbscript？

```
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>New Page 1</title>
</head>
<%
if request("Name") ="" or request("Email") ="" or request("Address") ="" then 
response.redirect("catalogue_error.html")
end if

Subject="Enquiry from test test"
BodyText=" <div id='textareazzz' style='font-family:arial'> <br>"
BodyText=BodyText+"<strong>Line of Business:</strong>"&request("Line of Business")&"<br>"
BodyText=BodyText+"<strong>Name:</strong>"&request("Name")&"<br>"
BodyText=BodyText+"<strong>Company:</strong>"&request("Company")&"<br>"
BodyText=BodyText+"<strong>Address:</strong>"&request("Address")&"<br>"
BodyText=BodyText+"<strong>Post Code:</strong>"&request("Post Code")&"<br>"
BodyText=BodyText+"<strong>Contact Tel No:</strong>"&request("Contact Tel No")&"<br>"
BodyText=BodyText+"<strong>Email:</strong>"&request("Email")&"<br>"
BodyText=BodyText+"</div>"
Response.write(BodyText)

Dim objMessage
Set objMessage = Server.CreateObject("CDO.Message")

With objMessage
.To = "test@hotmail.co.uk"
'.To = "test@hotmail.co.uk"
.From = "test@test.co.uk"
.Subject = Subject
.HTMLBody = BodyText
.Send
End With

Set objMessage = Nothing
response.redirect("cdo.html")
%>
<body>
<%=request("From")%><br>
<%=request("Subject")%><br>
<%=request("Message")%><br>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:43:07.860

`Configuration.Fields`您可以通过对象的属性配置电子邮件发送选项`CDO.Message`：

```
objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 ' cdoSendUsingPort
objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "server"
objMessage.Configuration.Fields.Item _
    ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 
```

# google-chrome - 我可以从谷歌浏览器应用程序中进行 XSS 跨站点脚本吗？

> ID：10851227
> 
> 赞同：0
> 
> 时间：2012-06-01T13:29:18.947
> 
> 标签：google-chrome, scripting, xss

我想做一个可以 XSS 的谷歌浏览器应用程序（打包）。我尝试将权限模式和显式 URL、选项卡和 content_script 匹配规则添加到应用程序清单。没有工作。我不希望“黑客”允许 XSS，因为谷歌可以解决这个问题。

编辑：是的，这是一个合法的应用程序。我正在为具有相互信任的 IP 的设备制作远程控制工具。我来自桌面编程背景来制作某个产品的网络版本。我想知道 chrome 应用程序是否具有像桌面应用程序那样的权限，可以在安装时获得批准，然后允许该应用程序执行这些权限所涵盖的操作。

# mysql - 如何找到与定义值匹配的确切组？

> ID：10851229
> 
> 赞同：3
> 
> 时间：2012-06-01T13:29:25.497
> 
> 标签：mysql, sql

*我简化了表格，以便更容易理解。*

我有一个包含组的表，并且存在一个包含多个值的组。这是表格：

```
VALUE | GROUP
  A   |   1
  B   |   1
  A   |   2
  C   |   2
  B   |   3
  A   |   4
  B   |   4
  A   |   5
  B   |   5
  C   |   5 
```

我想为我的查询提供值，我以编程方式构建并找到与这些值匹配的确切组。

例如，如果我为我的查询提供值 A 和 B，我想要作为结果组 1 和 4

```
A  ---------------> null 
A and B ----------> 1 and 4 
A , B and C ------> 5 
B  ---------------> 3 
A and C ----------> 2 
C ----------------> null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:38:17.933

您可以使用如下查询（假设值，组对是唯一的）：

```
select `GROUP`
from MyTable
group by `GROUP`
having count(`VALUE`) = count(case when `VALUE` IN ('a','b') then 1 end)
   and count(case when `VALUE` IN ('a','b') then 1 end) = @Count; 
```

`('a','b')`您要测试的值列表在哪里，并且`@Count`是检查集中不同值的计数（在本例中为 2）。

演示：[http ://www.sqlfiddle.com/#!2/78def/13](http://www.sqlfiddle.com/#!2/78def/13)

# ant - 如何将 ant-contrib.jar 与竹子一起使用？

> ID：10851233
> 
> 赞同：0
> 
> 时间：2012-06-01T13:29:35.757
> 
> 标签：ant, bamboo, ant-contrib

在我的机器上，我有一个 Ant 插件。它被称为蚂蚁贡献。它很容易安装。我只是把 ant-contrib-0.3.jar 放在 Ant 的 lib 文件夹中。它让我可以用 Ant 做一些很酷的事情，包括 if 语句。现在，我想使用 Bamboo 运行我的构建脚本。目前，竹子使用的 Ant 版本没有这些功能，所以我的脚本失败了。如何在竹子中安装 ant-contrib 之类的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:51:50.173

我的建议是将 ant-contrib jar 与您的源代码一起提交，并通过如下声明任务使您的构建更具可移植性：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
  <classpath>
    <pathelement location="${lib.dir}/ant-contrib-0.3.jar"/>
  </classpath>
</taskdef> 
```

另一种选择是使用[ivy](http://ant.apache.org/ivy/)来管理构建的第 3 方依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:42:56.243

将 ant-contrib-version.jar 复制到 Ant 安装的 lib 目录或 CLASSPATH 环境变量中。如果您想使用项目中的任务之一。

对于 Ant 1.6 及更高版本，在 build.xml 文件中添加以下行

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
<classpath>
<pathelement location="/home/svnadmin/apache-ant-1.8.4/lib/ant-contrib-version.jar"/>
</classpath>
</taskdef> 
```

对于 Ant 版本 1.5，在 build.xml 文件中添加以下行。此外，您必须使用 .properties 文件而不是 antlib.xml

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
<classpath>
<pathelement location="/home/svnadmin/apache-ant-1.5.0/lib/ant-contrib-version.jar"/>
</classpath>
</taskdef> 
```

# django - 使用 Django pyodbc SQLSERVER 问题

> ID：10851237
> 
> 赞同：5
> 
> 时间：2012-06-01T13:30:07.253
> 
> 标签：django, pyodbc, django-pyodbc

我正在尝试将 django 与 sqlserver 连接起来。我已经安装了 python odbc 和 django-odbc。

我的数据库配置（settings.py）

```
DATABASES = {
    'default': {
        'ENGINE': 'sql_server.pyodbc', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'EDAS',                      # Or path to database file if using sqlite3.
        'USER': 'sa',                      # Not used with sqlite3.
        'PASSWORD': '1324',                  # Not used with sqlite3.
        'HOST': 'DBIO01-HP',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '1433'                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

但是，当我尝试运行服务器时出现此错误：

C:\edas>python manage.py runserver

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.comma
nds.runserver.Command object at 0x02EC2E70>>
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django\core\management\validation.py", line 23, in get_validation_errors
    from django.db import models, connection
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\sql_server\pyodbc\base.py", line 56, in <module>
    elif 'collation' in settings.DATABASE_OPTIONS:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 185, in inner
    return func(self._wrapped, *args)
AttributeError: 'Settings' object has no attribute 'DATABASE_OPTIONS' 
```

**有人可以帮我弄清楚如何解决它吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:31:31.793

通过切换到 Michael Baltaks 提到的分支，我走得更远了。我使用以下命令卸载旧的不兼容版本：

```
$ pip uninstall sql-server.pyodbc 
```

然后安装 git-hub 版本：

```
$ pip install https://github.com/avidal/django-pyodbc/archive/django-1.4.zip 
```

然而，这并没有让我一直工作。我现在收到以下错误：

> pyodbc.Error: ('00000', '[00000] [iODBC][Driver Manager]dlopen({FreeTDS}, 6): image not found (0) (SQLDriverConnect)')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:36:17.807

看起来有人在这里为 django 1.4 挑选了 django-pyodbc [https://github.com/avidal/django-pyodbc](https://github.com/avidal/django-pyodbc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:15:14.273

看看这个分叉：[https ://github.com/avidal/django-pyodbc](https://github.com/avidal/django-pyodbc)

它与 Django 1.4 兼容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T07:00:23.003

兄弟，

这是2岁了...希望你有一个答案。对于它的价值：您声明的数据库对象需要一个“选项”参数，见下文。

```
#Database connector
DATABASES = {
    'default': {
        'ENGINE': '',
        'NAME': '',
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
        'OPTIONS': {
            'driver': '',
            'MARS_Connection': True,
        },
    }
}
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T13:45:41.250

看起来 django-odbc 是一个死项目，并且不再与最新的 Django 兼容，因为版本 1.3。

您可以通过编辑 C:\Python27\lib\site-packages\sql_server\pyodbc\base.py"，第 56 行来修复它`settings.DATABASES['default'].get('options')`，但如果您这样做，您无疑会发现更多的不兼容性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-27T20:07:21.527

删除 sql server 文件夹，`Lib\site-packages\`执行 pip install django-pyodbc-azure pip install sql_server.pyodbc

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-30T13:55:53.757

这对我有用，特别是 driver_supports_utf8 行：

```
'dbconn': {
            'CREATE_DB': False,
            'CREATE_USER': False,
            'CREATE_TBLSPACE': False,
            'ENGINE': 'django_pyodbc',
            'NAME': 'DBNAME',
            'USER': 'user',
            'PASSWORD': 'password',
            'HOST': 'HOST',
            'OPTIONS': {
                'host_is_server': True,
                'driver_supports_utf8': True,
            }
        } 
```

# ios - 在 iOS 模拟器 XCode 上自动重新部署

> ID：10851238
> 
> 赞同：1
> 
> 时间：2012-06-01T13:30:10.040
> 
> 标签：ios, xcode, deployment, installation

有什么方法可以 [edit] 在您点击运行时将您的应用程序从 xcode 重新部署到 iOS 模拟器上，而无需每次都从应用程序 [/edit] 中删除 [edit] 现有数据 [/edit]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:47:05.567

如果您希望它每次都以空数据开始，您可以使用 Xcode 管理器为新启动的应用程序拍摄应用程序数据快照，将快照添加到您的项目中，然后编辑您的方案并转到 Run -> Options 并选择应用程序数据弹出菜单中的快照。这样，当应用程序启动时，它总是以相同的、可能是空的数据开始。

不过，我认为它不会清除 NSUserDefaults。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:31:33.977

你不应该每次都删除它......你应该能够点击运行，它会覆盖或更新那里加载的版本。

我通常有一个调试按钮来删除所有数据并在必要时添加假数据并将它们包装在一个`DEBUG`标志中。这使我无需重新启动应用程序即可控制它。

```
- (void)viewDidLoad
{
    #if DEBUG
        // Make Button and hook it to clearAllData
    #endif
}

- (void)clearAllData
{
    // Clear the Core Data databases
    SDAppDelegate *myDelegate = [[UIApplication sharedApplication] delegate];
    [myDelegate clearAllData];

    // Clear the UserDefaults
    [[NSUserDefaults standardUserDefaults] removePersistentDomainForName:[[NSBundle mainBundle] bundleIdentifier]];

    // Run the initial Setup again
    [self setup];
} 
```

# restkit - 如何设置 RestKit 0.10.0 以识别“错误”和“错误”消息？

> ID：10851239
> 
> 赞同：2
> 
> 时间：2012-06-01T13:30:23.890
> 
> 标签：restkit

回到 0.10.0 之前，“错误”和“错误”消息都与 RestKit 一起“正常工作”。我看到在 0.10.0 中您可以为错误映射设置 rootKeyPath。

```
 objectManager.mappingProvider.errorMapping.rootKeyPath = @"errors"; 
```

但是我只能将其设置为错误异或错误。对我来说，这似乎是一种倒退。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T01:33:12.287

这是我必须管理的错误：

```
#import <RestKit/RKErrorMessage.h>

...

//configure error manager
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping mapKeyPath:@"message" toAttribute:@"errorMessage"];
[objectManager.mappingProvider setErrorMapping:errorMapping]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:29:23.470

在 0.10.0 RestKit 中添加了错误上下文，如果状态代码是 4xx 或 5xx，它只会尝试将响应映射到错误映射，但它们只允许一个顶级密钥路径（据我所知）。因此，我无法同时映射“错误”和“错误”。[我试图在不修改 restkit 的情况下解决此问题，但我必须修改您可以在我的分支https://github.com/stevemoser/RestKit/tree/fix-errors-context](https://github.com/stevemoser/RestKit/tree/fix-errors-context)中看到的一行 然后当我设置我的错误映射时，它看起来像这样：

```
#import <RestKit/RKErrorMessage.h>
#import <RestKit/RKObjectMappingProvider+Contexts.h>

[objectManager.mappingProvider setErrorMapping:nil];
[objectManager.mappingProvider setValue:[NSMutableDictionary dictionary] forContext:RKObjectMappingProviderContextErrors];
RKObjectMapping* errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping mapKeyPath:@"" toAttribute:@"errorMessage"];
[objectManager.mappingProvider setMapping:errorMapping forKeyPath:@"error" context:RKObjectMappingProviderContextErrors];
[objectManager.mappingProvider setMapping:errorMapping forKeyPath:@"errors" context:RKObjectMappingProviderContextErrors]; 
```

# python - python比较两个矩阵

> ID：10851246
> 
> 赞同：4
> 
> 时间：2012-06-01T13:31:05.683
> 
> 标签：python

在下面显示的矩阵中，我想匹配两个矩阵中的第一个元素。如果第一个元素相等，那么我需要匹配两个矩阵中的第二个元素，依此类推..如果元素相同，则打印“相同”，否则打印“不一样”....

我的问题是，对于 m*n where m=n always

```
 for i in a1:
     for j in a2:
        if i!=j:
           break
         else:
           //compare the next corresponding columns and print "same" or "not same"

 a1=[1,44,55],[2,33,66],[3,77,91]  

 a2=[1,44,55],[2,45,66],[3,77,91]    

 OR 

 a1=[1,44,55]
    [2,33,66]
    [3,77,91]  

 a2=[1,44,55]
    [2,45,66]
    [3,77,91] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T17:48:33.870

由于浮点舍入错误，您可能会遇到一些问题。

```
>>> import numpy as np
>>> x = np.array(1.1)
>>> print x * x
1.21
>>> x * x == 1.21
False
>>> x * x
1.2100000000000002
>>> np.allclose(x * x, 1.21)
True 
```

要比较两个数值矩阵是否相等，建议您使用`np.allclose()`

```
>>> import numpy as np
>>> x = np.array([[1.1, 1.3], [1.3, 1.1]])
>>> y = np.array([[1.21, 1.69], [1.69, 1.21]])
>>> x * x
array([[ 1.21,  1.69],
       [ 1.69,  1.21]])
>>> x * x == y
array([[False, False],
       [False, False]], dtype=bool)
>>> np.allclose(x * x, y)
True 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T13:41:24.553

有什么问题`a1 == a2`？

```
In [1]: a1=[[1,44,55],
   ...:     [2,33,66],
   ...:     [3,77,91]]

In [2]: a2=[[1,44,55],
   ...:     [2,45,66], # <- second element differs
   ...:     [3,77,91]]

In [3]: a1 == a2
Out[3]: False

In [4]: a1=[[1,44,55],
   ...:     [2,33,66],
   ...:     [3,77,91]]

In [5]: a2=[[1,44,55],
   ...:     [2,33,66],
   ...:     [3,77,91]]

In [6]: a1 == a2
Out[6]: True 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-27T03:40:07.690

如果您使用的是 numpy 数组，请使用`.all()`and `.any()`。

```
x = np.array([[1, 2, 3], [4, 5, 6]])
y = np.array([[1, 2, 3], [4, 5, 6]])
x.all() == y.all()
>> True

x = np.array([[1, 2, 3], [4, 5, 6]])
y = np.array([[11, 21, 31], [41, 4, 61]])
x.any() == y.any()
>> True (since x[1][0] == y[1][1]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T13:45:10.460

如果你想对矩阵进行操作，`numpy`是你可以使用的最好的库

```
In [11]: a = numpy.matrix([[1,44,55],
    ...:                   [2,33,66],
    ...:                   [3,77,91]])

In [12]: b = numpy.matrix([[1,44,55],
    ...:                   [2,45,66],
    ...:                   [3,77,91]])

In [13]: a == b
Out[13]: 
matrix([[ True,  True,  True],
        [ True, False,  True],
        [ True,  True,  True]], dtype=bool) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-11T13:18:45.680

以下是不使用 numpy 的列表解决方案。

```
def isIdentical(a: list, b: list) -> bool:
    rows, cols = len(a), len(a[0])
    return all([a[i][j] == b[i][j] for j in range(cols) for i in range(rows)]) 
```

# c++11 - 如何在 CMake 中激活 C++ 11？

> ID：10851247
> 
> 赞同：386
> 
> 时间：2012-06-01T13:31:09.937
> 
> 标签：c++11, cmake

当我尝试运行 CMake 生成的 makefile 来编译我的程序时，出现以下错误

> C++ 98 模式不支持基于范围的 for 循环。

我尝试添加`add_definitions(-std=c++0x)`到我的`CMakeLists.txt`，但它没有帮助。

我也试过这个：

```
if(CMAKE_COMPILER_IS_GNUCXX)
    add_definitions(-std=gnu++0x)
endif() 
```

当我这样做时`g++ --version`，我得到：

> g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

我也试过`SET(CMAKE_CXX_FLAGS "-std=c++0x")`了，还是不行。

我不明白如何使用 CMake 激活 C++ 11 功能。

* * *

## 回答 #1

> 赞同：444
> 
> 时间：2015-06-23T18:05:27.910

CMake 3.1 引入了您可以使用的[CMAKE_CXX_STANDARD](http://www.cmake.org/cmake/help/v3.1/variable/CMAKE_CXX_STANDARD.html)变量。如果您知道您将始终拥有 CMake 3.1 或更高版本，您可以将其写入您的顶级 CMakeLists.txt 文件，或将其放在定义任何新目标之前：

```
set (CMAKE_CXX_STANDARD 11) 
```

如果你需要支持旧版本的 CMake，这里有一个我想出的宏，你可以使用：

```
macro(use_cxx11)
  if (CMAKE_VERSION VERSION_LESS "3.1")
    if (CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
      set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")
    endif ()
  else ()
    set (CMAKE_CXX_STANDARD 11)
  endif ()
endmacro(use_cxx11) 
```

该宏目前仅支持 GCC，但应该可以直接将其扩展到其他编译器。

`use_cxx11()`然后，您可以在任何定义使用 C++11 的目标的 CMakeLists.txt 文件的顶部编写代码。

## 针对 macOS 的 clang 用户的 CMake 问题 #15943

如果您使用 CMake 和 clang 来定位 macOS，则存在可能导致该功能无法正常工作的[错误（不添加任何编译器标志）。](https://gitlab.kitware.com/cmake/cmake/issues/15943)`CMAKE_CXX_STANDARD`确保您执行以下操作之一：

*   使用[cmake_minimum_required](https://cmake.org/cmake/help/v3.0/command/cmake_minimum_required.html)要求 CMake 3.0 或更高版本，或

*   在命令前的 CMakeLists.txt 文件顶部使用以下代码将策略 CMP0025 设置为 NEW `project`：

    ```
     # Fix behavior of CMAKE_CXX_STANDARD when targeting macOS.
      if (POLICY CMP0025)
        cmake_policy(SET CMP0025 NEW)
      endif () 
    ```

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2013-11-23T17:27:43.677

CMake 命令[**`target_compile_features()`**](http://www.cmake.org/cmake/help/v3.1/command/target_compile_features.html)用于指定所需的 C++ 功能**`cxx_range_for`**。然后 CMake 将引导使用 C++ 标准。

```
cmake_minimum_required(VERSION 3.1.0 FATAL_ERROR)
project(foobar CXX)
add_executable(foobar main.cc)
target_compile_features(foobar PRIVATE cxx_range_for) 
```

无需使用**`add_definitions(-std=c++11)`**或修改 CMake 变量**`CMAKE_CXX_FLAGS`**，因为 CMake 将确保使用适当的命令行标志调用 C++ 编译器。

也许您的 C++ 程序使用了除`cxx_range_for`. CMake 全局属性[**`CMAKE_CXX_KNOWN_FEATURES`**](http://www.cmake.org/cmake/help/v3.1/prop_gbl/CMAKE_CXX_KNOWN_FEATURES.html)列出了您可以选择的 C++ 功能。

除了使用`target_compile_features()`，您还可以通过设置 CMake 属性 [**`CXX_STANDARD`**](http://www.cmake.org/cmake/help/v3.1/prop_tgt/CXX_STANDARD.html) 和 [**`CXX_STANDARD_REQUIRED`**](http://www.cmake.org/cmake/help/v3.1/prop_tgt/CXX_STANDARD_REQUIRED.html)CMake 目标来明确指定 C++ 标准。

另请参阅[我更详细的答案](https://stackoverflow.com/a/20165220/757777)。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2014-09-14T19:04:46.900

我在用

```
include(CheckCXXCompilerFlag)
CHECK_CXX_COMPILER_FLAG("-std=c++11" COMPILER_SUPPORTS_CXX11)
CHECK_CXX_COMPILER_FLAG("-std=c++0x" COMPILER_SUPPORTS_CXX0X)
if(COMPILER_SUPPORTS_CXX11)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
elseif(COMPILER_SUPPORTS_CXX0X)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x")
else()
        message(STATUS "The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.")
endif() 
```

但是如果你想玩`C++11`，`g++ 4.6.1`已经很老了。尝试获取更新的`g++`版本。

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2015-05-15T03:50:23.230

设置 Cxx 标准的最简单方法是：

```
 set_property(TARGET tgt PROPERTY CXX_STANDARD 11) 
```

有关更多详细信息，请参阅[CMake 文档](http://www.cmake.org/cmake/help/v3.1/prop_tgt/CXX_STANDARD.html?highlight=cxx_standard)。

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2012-06-01T14:59:31.140

事实证明，`SET(CMAKE_CXX_FLAGS "-std=c++0x")`它确实激活了许多 C++11 特性。它不起作用的原因是该语句看起来像这样：

```
set(CMAKE_CXX_FLAGS "-std=c++0x ${CMAKE_CXX_FLAGS} -g -ftest-coverage -fprofile-arcs") 
```

按照这种方法，不知何故该`-std=c++0x`标志被覆盖并且它不起作用。一个一个地设置标志或使用列表方法是有效的。

```
list( APPEND CMAKE_CXX_FLAGS "-std=c++0x ${CMAKE_CXX_FLAGS} -g -ftest-coverage -fprofile-arcs") 
```

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2018-09-18T08:42:28.957

在现代 CMake (>= 3.1) 上，设置全局要求的最佳方法是：

```
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF) 
```

它翻译为“我希望所有目标都使用 C++11，它不是可选的，我不想使用任何 GNU 或 Microsoft 扩展。” 从 C++17 开始，这仍然是恕我直言的最佳方式。

资料来源：*[在 CMake 中启用 C++11 及更高版本](https://crascit.com/2015/03/28/enabling-cxx11-in-cmake/)*

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2018-04-01T11:37:27.343

对于 CMake 3.8 及更高版本，您可以使用

```
target_compile_features(target PUBLIC cxx_std_11) 
```

如果您希望在工具链无法遵守此标准的情况下使生成步骤失败，您可以将其设为必需。

```
set_target_properties(target PROPERTIES CXX_STANDARD_REQUIRED ON) 
```

如果您想严格遵守标准 C++ 即避免编译器提供的 C++ 扩展（如 GCC 的`-std=gnu++17`），另外设置

```
set_target_properties(target PROPERTIES CXX_EXTENSIONS OFF) 
```

这在[An Introduction to Modern CMake](https://cliutils.gitlab.io/modern-cmake/chapters/features/cpp11.html) -> 添加功能 -> C++11 and Beyond 中有详细记录。如果您受到限制，它还提供了有关如何在旧版本的 CMake 上实现这一点的建议。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2016-02-22T11:17:54.170

最简单的方法：

`add_compile_options(-std=c++11)`

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2013-05-06T06:52:33.367

这是启用 C++11 支持的另一种方式，

```
ADD_DEFINITIONS(
    -std=c++11 # Or -std=c++0x
    # Other flags
) 
```

我遇到过只有这种方法有效而其他方法失败的情况。也许它与最新版本的 CMake 有关。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-12-06T18:28:04.557

如果您想始终激活最新的 C++ 标准，根据最近（CMake 3.8 和 CMake 3.11）为 CMAKE_CXX_STANDARD 增加的值 17 和 20 ，这是我对[David Grayson 答案的扩展：](https://stackoverflow.com/a/31010221/671366)

```
IF (CMAKE_VERSION VERSION_LESS "3.8")
    SET(CMAKE_CXX_STANDARD 14)
ELSEIF (CMAKE_VERSION VERSION_LESS "3.11")
    SET(CMAKE_CXX_STANDARD 17)
ELSE()
    SET(CMAKE_CXX_STANDARD 20)
ENDIF()

# Typically, you'll also want to turn off compiler-specific extensions:
SET(CMAKE_CXX_EXTENSIONS OFF) 
```

（使用该代码代替`set (CMAKE_CXX_STANDARD 11)`链接答案中的 。）

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2020-04-17T21:51:11.553

现代 cmake 提供了更简单的方法来配置编译器以使用特定版本的 C++。任何人唯一需要做的就是设置相关的目标属性。在[cmake 支持的属性](https://cmake.org/cmake/help/latest/manual/cmake-properties.7.html#target-properties)中，用于确定如何配置编译器以支持特定 C++ 版本的属性如下：

*   [`CXX_STANDARD`](https://cmake.org/cmake/help/latest/prop_tgt/CXX_STANDARD.html)设置 C++ 标准，其功能需要构建目标。将此设置为`11`目标 C++11。

*   [`CXX_EXTENSIONS`](https://cmake.org/cmake/help/latest/prop_tgt/CXX_EXTENSIONS.html)，一个布尔值，指定是否请求编译器特定的扩展。将此设置为`Off`禁用对任何编译器特定扩展的支持。

为了演示，这里是一个最小的工作示例`CMakeLists.txt`。

```
cmake_minimum_required(VERSION 3.1)

project(testproject LANGUAGES CXX )

set(testproject_SOURCES
    main.c++
    )

add_executable(testproject ${testproject_SOURCES})

set_target_properties(testproject
    PROPERTIES
    CXX_STANDARD 11
    CXX_EXTENSIONS off
    ) 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-08-01T08:27:28.463

对我有用的是在 CMakeLists.txt 中设置以下行：

```
set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11") 
```

设置此命令会激活编译器的 C++11 功能，执行该`cmake ..`命令后，您应该能够`range based for loops`在代码中使用并编译它而不会出现任何错误。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-06-13T09:36:10.637

我认为只有这两行就足够了。

```
set(CMAKE_CXX_STANDARD 11)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-02T01:48:28.770

您可以使用以下内容。这会根据您的环境自动修改功能。

```
target_compile_features(your_target INTERFACE cxx_std_20) 
```

例如，

*   在 Gnu/Linux 上添加以下内容`-std=gnu++20`
*   在带有 Clang/Ninja 的 Windows 上，它变成`-std=c++20`
*   在带有 MSVC 的 Windows 上，它变成`/std=c++20`

因此，您支持尽可能多的环境。

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2016-01-29T16:46:19.367

OS X 和 Homebrew LLVM 相关：

不要忘记在它之后调用 cmake_minimum_required(VERSION 3.3) 和 project() ！

或者 CMake 将`project()`在第 1 行之前隐式插入，从而导致 Clang 版本检测问题以及可能的其他类型的问题。这是[一个相关的问题](https://cmake.org/Bug/view.php?id=15943)。

# java - java String 格式，用于至少 10 个字符的长整数

> ID：10851248
> 
> 赞同：6
> 
> 时间：2012-06-01T13:31:10.910
> 
> 标签：java, formatting

我有一个长整数，我希望能够打印出来并写入 csv 文件。如果我只写未格式化的字符串，它会打印 1.2345E9 而不是完整的确切数字。我应该使用什么 String.format() 才能正确打印出每个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:37:03.053

这可能只是 MS Excel 对您的“糟糕”格式化。在此处查看此`test.csv`文件：

```
"COLUMN"
12345678901234567890 
```

在 MS Excel 中打开

![在此处输入图像描述](../Images/6c8a7887de50015c2ac4dc61096df1f8.png)

因此，请检查您的 CSV 内容。可能，您在那里没有 Java 格式问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:06:27.313

要保留从电子表格到 csv 文件的数字内容的显示模式，需要使用引号将该值转换为文本。

**示例**：

```
CSV contents (when opened in a text editor) ->: 1234567890',"""1234567890""",1234567890
XLS displays them as ------------------------>: 1234567890',"""1234567890""",1.23E+09 
```

每个单元格的内容都根据电子表格应用程序解析的默认值类型显示。
因此，CSV 没有办法，只能用引号将数值括起来以保留所需的字符串格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:43:14.380

您可以根据需要格式化单元格内容，例如数字/货币/日期/字符串等。通过您用于创建 csv 的 API 方法。

# asp.net - 为什么这个 ASP.NET 堆栈跟踪会同时报告两个异常？

> ID：10851249
> 
> 赞同：1
> 
> 时间：2012-06-01T13:31:13.633
> 
> 标签：asp.net, .net, sharepoint, iis, stack-trace

在 Sharepoint 网站上，用户尝试再次回复他已经回复过的调查。IIS 返回 HTTP 500 并提供带有以下错误消息的页面：

```
Server Error in '/' Application. 
--------------------------------------------------------------------------------
You are not allowed to respond again to this survey. 

Description: An unhandled exception occurred during the execution of the current web  request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Runtime.InteropServices.COMException: You are not allowed to respond again to this survey.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 

Stack Trace: 

[COMException (0x81020039): You are not allowed to respond again to this survey.]
    Microsoft.SharePoint.Library.SPRequestInternalClass.IsVotingAllowed() +0
    Microsoft.SharePoint.Library.SPRequest.IsVotingAllowed() +174
[SPException: You are not allowed to respond again to this survey.]
    Microsoft.SharePoint.Library.SPRequest.IsVotingAllowed() +312
    Microsoft.SharePoint.WebPartPages.ListFormWebPart.OnInit(EventArgs e) +955
    System.Web.UI.Control.InitRecursive(Control namingContainer) +143
    System.Web.UI.Control.AddedControl(Control control, Int32 index) +271
    System.Web.UI.WebControls.WebParts.WebPartManagerControlCollection.AddWebPartHelper(WebPart webPart) +305
    System.Web.UI.WebControls.WebParts.WebPartManagerControlCollection.AddWebPart(WebPart webPart) +1930590
    System.Web.UI.WebControls.WebParts.WebPartManagerInternals.AddWebPart(WebPart webPart) +63
    Microsoft.SharePoint.WebPartPages.SPWebPartManager.AddWebPartWithRetry(WebPart webPart) +147
    Microsoft.SharePoint.WebPartPages.SPWebPartManager.AddDynamicWebPart(WebPart webPart) +122
    Microsoft.SharePoint.WebPartPages.SPWebPartManager.CreateWebPartsFromRowSetData(Boolean onlyInitializeClosedWebParts) +12053
    Microsoft.SharePoint.WebPartPages.SPWebPartManager.LoadWebParts() +93
    Microsoft.SharePoint.WebPartPages.SPWebPartManager.OnPageInitComplete(Object sender, EventArgs e) +690
    System.EventHandler.Invoke(Object sender, EventArgs e) +0
    System.Web.UI.Page.OnInitComplete(EventArgs e) +11038910
    System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1674 
```

那里报告了两个例外 -`System.Runtime.InteropServices.COMException`和`SPException`.

这怎么可能？同时报告两个异常的 ASP.NET 级别发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:41:30.110

一个是另一个的内在例外。

# c# - 将标签作为参数传递给函数

> ID：10851252
> 
> 赞同：3
> 
> 时间：2012-06-01T13:31:29.653
> 
> 标签：c#, winforms, delegates

我正在创建一个实用程序，在执行一些计算后将少量记录插入 SQL。我正在使用后台工作人员来阻止应用程序进入无响应状态。随着流程的进行，我需要更改一些使用委托的标签值。是否可以将我的标签作为参数传递给具有委托的函数，以便我可以重用其中的一些代码？

下面是我用来改变label2值的函数。对于 label3，我使用了另一个几乎相同的函数。是否可以创建一个接受标签作为参数的函数，以便我可以传递控件名称和所需的消息，并为我进行更新？

这是我更改label2的代码：

```
public void changelabel(string msg)
{
    if (label2.InvokeRequired)
        label2.Invoke(new MethodInvoker(delegate
        {
            label2.Text = msg;
        }));
    else
        label2.Text = msg;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T13:52:37.300

您的标签只是表单的字段，只要您实际上不调用方法或在它们上设置属性，就可以随意传递它们：

```
public void ChangeLabel(string msg, Label label) {
    if (label.InvokeRequired)
        label.Invoke(new MethodInvoker(delegate {
            label.Text = msg;
        }));
    else
        label.Text = msg;
} 
```

# maven - 独立客户端的 JBoss AS 7 maven 依赖项

> ID：10851257
> 
> 赞同：4
> 
> 时间：2012-06-01T13:31:43.167
> 
> 标签：maven, jboss7.x

我们有一个连接到 JBoss 服务器的独立桌面客户端。对于 JBoss 版本 6，桌面客户端项目使用的 maven 依赖项是

```
<dependency>
  <groupId>org.jboss.jbossas</groupId>
  <artifactId>jboss-as-client</artifactId>
</dependency> 
```

对于 JBoss 7.1.1，不存在这种依赖关系。开发独立桌面客户端时应该使用的正确 maven 依赖项是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T05:32:23.020

如果您直接连接到 EJB，您需要 EJB 客户端库。在 JBoss AS7 的早期版本中，需要大量单独的依赖项。从`7.1.1-Final`BOM（材料清单）开始（AFAIK）可用：

```
<dependencies>
  <dependency>
    <groupId>org.jboss.as</groupId>
    <artifactId>jboss-as-ejb-client-bom</artifactId>
    <version>7.1.1.Final</version>
    <type>pom</type>
  </dependency>
</dependencies> 
```

您将在[此处](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)找到有关 JNDI 查找和调用方法的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:50:39.963

我对 JBoss AS 6 客户端不太熟悉，但对于 JBoss AS 7，您需要以下内容。

```
<dependencies>
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-controller-client</artifactId>
        <version>${as.version}</version>
    </dependency>
</dependencies> 
```

您将使用`org.jboss.as.controller.client.ModelControllerClient`独立模式或`org.jboss.as.controller.client.helpers.domain.DomainClient`域模式。

# c++ - 生产者/消费者模式的 STL 容器线程安全性

> ID：10851263
> 
> 赞同：1
> 
> 时间：2012-06-01T13:31:55.223
> 
> 标签：c++, multithreading, stl, race-condition

我打算做以下事情：

存储要使用的预构建对象的双端队列。主线程可能会到处使用这些对象。我有另一个垃圾线程用于日志记录和其他时间不紧迫但昂贵的事情。当预建对象用完时，我会在垃圾线程中重新填充它们。

现在我的问题是，这里会有比赛条件吗？从技术上讲，一个线程从前面消耗对象，另一个线程将对象推到后面。只要我不让尺寸下降到零，应该没问题。我唯一关心的是这个双端队列的“大小”。他们是否在 STL 容器中存储整数“大小”变量？修改该大小变量是否应该引入竞争条件？

解决这个问题的最佳方法是什么？我真的不想使用锁，因为主线程对性能至关重要（我首先预构建这些对象的原因！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T13:35:39.043

STL 容器不是线程安全的，句号，不要玩这个。具体来说，双端队列元素通常存储在一个短数组链中，并且在使用双端队列操作时会修改该链，因此有很大的空间可以搞砸。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:36:12.507

另一种选择是有 2 个双端队列，一个用于读取另一个用于写入。主线程读取，其他线程写入。当读取的双端队列为空时，切换双端队列（只需移动 2 个指针），这将涉及锁定，但只是偶尔。

消费者线程将驱动切换，因此***它只***需要在切换时进行锁定。生产者线程需要在每次写入时锁定，以防切换发生在写入过程中，但正如您提到的，消费者对性能的要求较低，所以不用担心。

正如其他人提到的那样，您关于无锁的建议确实很危险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:52:52.957

正如@sharptooth 提到的，STL 容器不是线程安全的。您使用的是支持 C++11 的编译器吗？如果是这样，您可以使用原子类型实现无锁队列。否则，您需要使用汇编程序进行比较和交换或使用特定于平台的 API（请参阅[此处](https://stackoverflow.com/questions/151841/high-level-compare-and-swap-cas-functions)）。请参阅[此问题](https://stackoverflow.com/q/1164023/105344)以获取有关如何执行此操作的信息。

我要强调的是，您应该在使用标准线程同步时测量性能，看看您是否真的需要无锁技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:38:25.033

即使是 non-empty 也会有数据竞争`deque`。

您必须保护对直通锁的所有访问（不仅仅是写入）`deque`，或者使用专为多线程环境中的消费者-生产者模型设计的队列（例如 Microsoft 的`unbounded_buffer`）。

# javascript - 将 JSON 编码值解析为字符串、布尔值等

> ID：10851264
> 
> 赞同：0
> 
> 时间：2012-06-01T13:31:55.583
> 
> 标签：javascript, json, localization

我有一个已本地化的 JSON 编码对象，最终将填写一个 JS 文件以获取选项。选项的预期输出是（默认值和它正在寻找的“类型”的解释）：

```
jQuery(window).load(function() {
    jQuery('.flexslider').flexslider({
        animation: "fade",              //String: Select your animation type, "fade" or "slide"
        slideDirection: "horizontal",   //String: Select the sliding direction, "horizontal" or "vertical"
        slideshow: true,                //Boolean: Animate slider automatically
        slideshowSpeed: 7000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
        animationDuration: 600,         //Integer: Set the speed of animations, in milliseconds
        directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
        controlNav: true,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
        keyboardNav: true,              //Boolean: Allow slider navigating via keyboard left/right keys
        mousewheel: false,              //Boolean: Allow slider navigating via mousewheel
        prevText: "Previous",           //String: Set the text for the "previous" directionNav item
        nextText: "Next",               //String: Set the text for the "next" directionNav item
        pausePlay: false,               //Boolean: Create pause/play dynamic element
        pauseText: 'Pause',             //String: Set the text for the "pause" pausePlay item
        playText: 'Play',               //String: Set the text for the "play" pausePlay item
        randomize: false,               //Boolean: Randomize slide order
        slideToStart: 0,                //Integer: The slide that the slider should start on. Array notation (0 = first slide)
        animationLoop: true,            //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
        pauseOnAction: true,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
        pauseOnHover: false,            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
        controlsContainer: "",          //Selector: Declare which container the navigation elements should be appended too. Default container is the flexSlider element. Example use would be ".flexslider-container", "#container", etc. If the given element is not found, the default action will be taken.
        manualControls: "",             //Selector: Declare custom control navigation. Example would be ".flex-control-nav li" or "#tabs-nav li img", etc. The number of elements in your controlNav should match the number of slides/tabs.
        start: function(){},            //Callback: function(slider) - Fires when the slider loads the first slide
        before: function(){},           //Callback: function(slider) - Fires asynchronously with each slider animation
        after: function(){},            //Callback: function(slider) - Fires after each slider animation completes
        end: function(){}               //Callback: function(slider) - Fires when the slider reaches the last slide (asynchronous)
    });
}); 
```

我当前的 JSON 编码对象的 HTML 输出是：

```
/*<![
    CDATA[
        */varflexslider_vars=[

        ];flexslider_vars={
            "js_animation": "fade",
            "js_slide_direction": "horizontal",
            "js_slideshow": "1",
            "js_slideshow_speed": "7000",
            "js_animation_duration": "600",
            "js_direction_nav": "1",
            "js_control_nav": "1",
            "js_keyboard_nav": "1",
            "js_mousewheel": null,
            "js_prev_text": "Prevous",
            "js_next_text": "Next",
            "js_pause_play": null,
            "js_pause_text": "Pause",
            "js_play_text": "Play",
            "js_randomize": null,
            "js_slide_start": "0",
            "js_animation_loop": "1",
            "js_pause_on_action": "1",
            "js_pause_on_hover": null,
            "js_controls_container": "",
            "js_manual_controls": "",
            "js_start_function": "function(){}",
            "js_before_function": "function(){}",
            "js_after_function": "function(){}",
            "js_end_function": "function(){}"
        };/*
    ]
]>*/ 
```

这就是我目前（但未成功）将这些选项添加到 JS 文件的方式：

```
jQuery(window).load(function() {
    jQuery('.flexslider').flexslider({
        animation: flexslider_vars.js_animation,              //String: Select your animation type, "fade" or "slide"
        slideDirection: flexslider_vars.js_slide_direction,   //String: Select the sliding direction, "horizontal" or "vertical"
        slideshow: flexslider_vars.js_slideshow,                //Boolean: Animate slider automatically
        slideshowSpeed: flexslider_vars.js_slideshow_speed,           //Integer: Set the speed of the slideshow cycling, in milliseconds
        animationDuration: flexslider_vars.js_animation_duration,         //Integer: Set the speed of animations, in milliseconds
        directionNav: flexslider_vars.js_direction_nav,             //Boolean: Create navigation for previous/next navigation? (true/false)
        controlNav: flexslider_vars.js_control_nav,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
        keyboardNav: flexslider_vars.js_keyboard_navjs_mousewheel,              //Boolean: Allow slider navigating via keyboard left/right keys
        mousewheel: flexslider_vars.js_mousewheel,              //Boolean: Allow slider navigating via mousewheel
        prevText: flexslider_vars.js_prev_text,           //String: Set the text for the "previous" directionNav item
        nextText: flexslider_vars.js_next_text,               //String: Set the text for the "next" directionNav item
        pausePlay: flexslider_vars.js_pause_play,               //Boolean: Create pause/play dynamic element
        pauseText: flexslider_vars.js_pause_text,             //String: Set the text for the "pause" pausePlay item
        playText: flexslider_vars.js_play_text,               //String: Set the text for the "play" pausePlay item
        randomize: flexslider_vars.js_randomize,               //Boolean: Randomize slide order
        slideToStart: flexslider_vars.js_slide_start,                //Integer: The slide that the slider should start on. Array notation (0 = first slide)
        animationLoop: flexslider_vars.js_animation_loop,            //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
        pauseOnAction: flexslider_vars.js_pause_on_action,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
        pauseOnHover: flexslider_vars.js_pause_on_hover,            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
        controlsContainer: flexslider_vars.js_controls_container,          //Selector: Declare which container the navigation elements should be appended too. Default container is the flexSlider element. Example use would be ".flexslider-container", "#container", etc. If the given element is not found, the default action will be taken.
        manualControls: flexslider_vars.js_manual_controls,             //Selector: Declare custom control navigation. Example would be ".flex-control-nav li" or "#tabs-nav li img", etc. The number of elements in your controlNav should match the number of slides/tabs.
        start: flexslider_vars.js_start_function,            //Callback: function(slider) - Fires when the slider loads the first slide
        before: flexslider_vars.js_before_function,           //Callback: function(slider) - Fires asynchronously with each slider animation
        after: flexslider_vars.js_after_function,            //Callback: function(slider) - Fires after each slider animation completes
        end: flexslider_vars.js_end_function              //Callback: function(slider) - Fires when the slider reaches the last slide (asynchronous)
    });
}); 
```

所以 - 问题不在于调用选项本身（这似乎工作正常），它是根据 JS 文件的所需值改变实际输出（字符串、布尔值、整数等），因为截至目前，它是正因为它而做深蹲。我会很感激任何朝着正确方向的推动。谢谢！

# django - 使用 django 为 postgresql 获取“事务空闲”

> ID：10851265
> 
> 赞同：4
> 
> 时间：2012-06-01T13:31:59.030
> 
> 标签：django, postgresql

我们正在使用 Django 1.3.1 和 Postgres 9.1

我有一个视图，它只是触发多个选择以从数据库中获取数据。

在 Django 文档中提到，当请求完成时，如果在调用视图期间仅触发了 select 语句，则会发出 ROLLBACK。但是，我在日志中看到很多“事务中的空闲”，尤其是当我有超过 200 个请求时。我在 postgres 日志中看不到任何提交或回滚语句。

可能是什么问题呢？我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T01:13:48.273

首先，我会查看相关的帖子[当 PostgreSQL 进程“处于事务中空闲”时是什么意思？](https://stackoverflow.com/questions/51019/what-does-it-mean-when-a-postgresql-process-is-idle-in-transaction)这涵盖了一些相关的领域。

“Idle in transaction”的原因之一可能是输入“BEGIN”的开发人员或系统管理员；在 psql 中忘记“提交”或“回滚”。我去过那儿。:)

但是，您提到您的问题与有很多并发连接有关。听起来调查上面帖子中的“锁”提示可能对您有所帮助。

还有一些建议：这个问题可能是次要的。主要问题可能是 200 个连接超出了您的硬件和调整可以轻松处理的范围，所以一切都会变慢，当事情变慢时，更多的事情正在等待其他事情完成。

如果您的 Web 应用程序前面没有像 Nginx 这样的反向代理，请考虑添加一个。它可以在同一主机上运行而无需额外的硬件。反向代理将用于调节与后端 Django Web 服务器的连接数量，从而调节数据库连接的数量——我之前遇到过太多的数据库连接，这就是我解决它的方法！

使用 Apache 的 prefork 模型，假设使用 Apache::DBI 之类的东西，Apache worker 的数量和数据库连接的数量之间存在 1=1 的对应关系。想象一下有人通过慢速连接连接到 Web 服务器。Web 和数据库服务器相对较快地处理请求，但是只要内容被运回客户端，请求就会在 Web 服务器上保持打开状态，这是不必要的。同时，数据库连接槽被占用。

通过添加反向代理，后端服务器可以快速将回复传递回反向代理，然后释放后端工作人员和数据库槽。然后反向代理负责将内容返回给客户端，可能保持自己的开放状态连接时间更长。前面可能有 200 个到反向代理的连接，但后端需要的工作人员和数据库插槽要少得多。

如果您使用 MRTG 或类似工具绘制 db 插槽，您将看到您实际使用了多少插槽，并且可以调低 PostgreSQL 中的 max_connections，将这些资源释放用于其他用途。

您还可以查看[pg_top](http://ptop.projects.postgresql.org/)以帮助监控您的数据库在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:01:42.067

我知道这是一个较老的问题，但这篇文章可能会描述[django 中的空闲事务问题](http://thebuild.com/blog/2010/10/25/django-and-postgresql-idle-in-transaction-connections/)。

本质上，如果事务没有被标记为脏（通常由写入数据触发），Django 的 TransactionMiddleware 不会显式地提交事务。然而，即使它们是只读的，它仍然为所有查询开始一个事务。因此， pg 等待查看是否有更多命令即将到来并且您获得空闲事务。

链接的文章显示了对事务中间件的小修改以始终提交（基本上删除了检查事务是否为脏的条件）。我将很快在生产环境中尝试此修复程序。

# android - 运行 LocationPollerDemo 时未接收到广播

> ID：10851268
> 
> 赞同：0
> 
> 时间：2012-06-01T13:32:06.107
> 
> 标签：android, commonsware-cwac

我从 Commonsware 搜索了许多关于[LocPoller](https://github.com/commonsguy/cwac-locpoll)的问题和答案，但没有找到我的问题的答案。我已经尝试使用来自 github 的最新演示，但我遇到了问题。首先，我必须承认我在演示中修改了 PERIOD，因此警报每 15 秒触发一次。我意识到这将大量消耗面糊，这只是为了测试。我希望[LocationReceiver 的](https://github.com/commonsguy/cwac-locpoll/blob/master/demo/src/com/commonsware/cwac/locpoll/demo/LocationReceiver.java)onReceive() 会每 15 秒被调用一次，但这并没有发生。

调试事情我看到警报正在触发，一切似乎都很好，因为它正在到达 PollerThread 并调用 sendBroadcast。所以我认为我的设置有误，但我不确定是什么。除了在演示中更改 PERIOD 之外，其他一切都保持原样。我试过在设备和模拟器（8 级）上运行它。任何调试此问题的帮助将不胜感激。

最后，我正在寻找的功能是能够跟踪手机位置，以便我的应用程序可以随时获取当前位置。我在研究中看到了这一点，尽管它非常符合要求。如果有人对不同的方法有更好的了解，我很想听听。

谢谢，林德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:47:50.530

> 最后，我正在寻找的功能是能够跟踪手机位置，以便我的应用程序可以随时获取当前位置。我在研究中看到了这一点，尽管它非常符合要求。

不它不是。

> 如果有人对不同的方法有更好的了解，我很想听听。

第 1 步：`requestLocationUpdates()`当您想开始在应用中接收位置更新时调用

第 2 步：根据需要使用提供给您`LocationListener`或呼叫的位置修复`getLastKnownLocation()`

第 3 步：`removeUpdates()`当您不想再在应用中接收位置更新时调用

# c# - 为什么 C# 中的整数除法返回整数而不是浮点数？

> ID：10851273
> 
> 赞同：157
> 
> 时间：2012-06-01T13:32:44.513
> 
> 标签：c#, division

有谁知道为什么 C# 中的整数除法返回整数而不是浮点数？它背后的想法是什么？（它只是 C/C++ 的遗产吗？）

在 C# 中：

```
float x = 13 / 4;   
//== operator is overridden here to use epsilon compare
if (x == 3.0)
   print 'Hello world'; 
```

此代码的结果将是：

```
'Hello world' 
```

严格来说，没有整数除法之类的东西（根据定义，除法是一种产生有理数的运算，整数是其中的一个很小的子集。）

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-06-01T13:42:56.320

虽然新程序员在实际打算使用浮点除法时犯下执行整数除法的错误是很常见的，但实际上整数除法是一种非常常见的操作。如果您假设人们很少使用它，并且每次进行除法时都需要记住转换为浮点数，那您就错了。

首先，整数除法要快很多，所以如果你只需要一个整数结果，你会想要使用更有效的算法。

其次，有许多使用整数除法的算法，如果除法的结果总是一个浮点数，你将不得不每次都对结果进行四舍五入。我脑海中浮现的一个例子是改变一个数字的基数。计算每个数字涉及一个数字的整数除法以及余数，而不是数字的浮点除法。

由于这些（和其他相关）原因，整数除法会产生整数。如果你想获得两个整数的浮点除法，你只需要记住将一个转换为`double`// `float`。`decimal`

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-06-01T13:34:42.617

请参阅 C#[规范](https://web.archive.org/web/20120622130319/http://msdn.microsoft.com:80/en-us/library/aa691373(v=vs.71).aspx)。除法运算符分为三种类型

*   整数除法
*   浮点除法
*   小数除法

在您的情况下，我们有整数除法，并应用以下规则：

> 除法将结果向零舍入，结果的绝对值是小于两个操作数的商的绝对值的最大可能整数。当两个操作数具有相同符号时，结果为零或正，当两个操作数具有相反符号时，结果为零或负。

我认为 C# 对整数使用这种类型的除法（某些语言返回浮点结果）的原因是硬件 - 整数除法更快更简单。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-06-01T13:42:40.060

每种数据类型都能够重载每个运算符。如果分子和分母都是整数，则整数类型将执行除法运算，并返回整数类型。如果要进行浮点除法，则必须在除法之前将一个或多个数字转换为浮点类型。例如：

```
int x = 13;
int y = 4;
float x = (float)y / (float)z; 
```

或者，如果您使用的是文字：

```
float x = 13f / 4f; 
```

请记住，浮点数并不精确。如果您关心精度，请改用小数类型。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-01T13:35:48.117

由于您不使用任何后缀，因此文字`13`和`4`被解释为整数：

> [手册](http://msdn.microsoft.com/en-us/library/aa664674%28v=vs.71%29)：
> 
> 如果字面量没有后缀，则它具有可以表示其值的第一个类型：`int`, `uint`, `long`, `ulong`。

因此，由于您声明`13`为整数，因此将执行整数除法：

> [手册](http://msdn.microsoft.com/en-us/library/aa691373%28v=vs.71%29.aspx)：
> 
> 对于 x / y 形式的运算，应用二元运算符重载决议来选择特定的运算符实现。操作数转换为所选运算符的参数类型，结果类型为运算符的返回类型。
> 
> 下面列出了预定义的除法运算符。运算符都计算 x 和 y 的商。
> 
> **整数除法：**
> 
> ```
> int operator /(int x, int y);
> uint operator /(uint x, uint y);
> long operator /(long x, long y);
> ulong operator /(ulong x, ulong y); 
> ```

因此四舍五入发生：

> 除法将结果向零舍入，结果的绝对值是小于两个操作数的商的绝对值的最大可能整数。当两个操作数具有相同符号时，结果为零或正，当两个操作数具有相反符号时，结果为零或负。

如果您执行以下操作：

```
int x = 13f / 4f; 
```

您将收到编译器错误，因为浮点除法（ 的`/`运算符`13f`）导致浮点数，不能隐式转换为 int。

如果您希望除法是浮点除法，则必须使结果为浮点数：

```
float x = 13 / 4; 
```

请注意，您仍将除以整数，这将隐式转换为浮点数：结果将是`3.0`. `f`使用后缀 ( `13f`, )将操作数显式声明为浮点数`4f`。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-11-07T22:17:16.113

可能有用：

```
double a = 5.0/2.0;   
Console.WriteLine (a);      // 2.5

double b = 5/2;   
Console.WriteLine (b);      // 2

int c = 5/2;   
Console.WriteLine (c);      // 2

double d = 5f/2f;   
Console.WriteLine (d);      // 2.5 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-02-28T20:10:05.313

这只是一个**基本操作**。

记住当你学会划分时。一开始我们解决了`9/6 = 1 with remainder 3`.

```
9 / 6 == 1  //true
9 % 6 == 3 // true 
```

/-operator 与 %-operator 组合用于检索这些值。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-05-01T19:16:03.713

结果将始终是分子和分母范围更大的类型。例外是 byte 和 short，它们产生 int (Int32)。

```
var a = (byte)5 / (byte)2;  // 2 (Int32)
var b = (short)5 / (byte)2; // 2 (Int32)
var c = 5 / 2;              // 2 (Int32)
var d = 5 / 2U;             // 2 (UInt32)
var e = 5L / 2U;            // 2 (Int64)
var f = 5L / 2UL;           // 2 (UInt64)
var g = 5F / 2UL;           // 2.5 (Single/float)
var h = 5F / 2D;            // 2.5 (Double)
var i = 5.0 / 2F;           // 2.5 (Double)
var j = 5M / 2;             // 2.5 (Decimal)
var k = 5M / 2F;            // Not allowed 
```

浮点类型和十进制类型之间没有隐式转换，因此它们之间的除法是不允许的。您必须明确转换并决定您想要哪一个（与浮点类型相比，Decimal 具有更高的精度和更小的范围）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-18T17:58:06.777

作为了解您所获得内容的一个小技巧，您可以使用*var*，因此编译器会告诉您期望的类型：

```
int a = 1;
int b = 2;
var result = a/b; 
```

您的编译器会告诉您*结果*将是*int*类型。

# php - PHP 和 Javascript 不能很好地协同工作

> ID：10851275
> 
> 赞同：1
> 
> 时间：2012-06-01T13:33:01.620
> 
> 标签：php, javascript, mysql

***免责声明：**我是一名 iOS 开发人员，几乎没有 JQuery、PHP 或 MySQL 经验。*

这是交易：我有一个包含电影信息（`FilmTitle`、、、`FilmGenre`等`FilmDirector`）的 MySQL 数据库。

我的目标是：

1.  从数据库中获取电影片名并将它们存储在`Array`.
    *我为此使用 PHP，并且工作正常。*
2.  将此 PHP`Array`传递给 JavaScript `Array`。
    *这也有效。*
3.  最后，使用 JavaScript `Array`，我想使用其内容填充下拉菜单`createElement()`。
    *这**不起作用**。*

我得到了各种愚蠢的东西：有些`document.write()`命令正在工作，有些则没有；下拉菜单没有被填充；等等

**第一个问题：**这甚至是一个好的策略吗？我认为随着数据库中电影数量的变化，正确更新下拉菜单的唯一方法就是按照我的描述进行操作。

**第二个问题：**这应该都在 PHP 文件中，而不是 HTML 文件中，对吗？但是 PHP 甚至可以执行 JavaScript 函数吗？或者是否需要做一些特别的事情来完成这项工作？

## 编码

```
<?php
echo "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>";
echo "<allFilms>";

$link = mysql_connect(" . . . .  ");
$query = "select * from FilmsSmallTable";
$result = mysql_query($query);
// Declare array variable:
$allFilmTitles = array();

    while($row = mysql_fetch_assoc($result))
    {
        echo "<film>";

            echo "<FilmName>";
            echo $row['FilmTitle'];
            array_push($allFilmTitles, $row["FilmTitle"]);
            echo "</FilmName>";

        echo "</film>";
    }

// Print array out to verify:    
echo "Here is the array's full contents:<br/>";
print_r ($allFilmTitles);

//convert array to string using ":#:" as separator
$stringedArray = implode(":#:",$allFilmTitles);

echo "<br/><br/>";
echo "PHP Array converted to a PHP String (the 'stringedArray' variable) = <br/>";
print_r ($stringedArray);
echo "</allFilms>";
?>

<html>
<head>
<title>PHP & JS</title>

<script type="text/javascript">

function showArray() {
   //Convert PHP string to JavaScript string
   var JSArrayString = "<? print $stringedArray; ?>";

  //Create JavaScript array
   var JSarray = new Array();

   var x;
   //Fill JavaScript array from the converted string   
   JSarray = JSArrayString.split(":#:");
   // And sort it:
   JSarray.sort();

   //document.write("JSarray's length = ", JSarray.length);
   document.write("JSarray contains: ", JSarray);

   // reset the Form's drop-down menu to contain no elements:
   FilmsDropDownMenu.length = 0;

   for (counter = 0;  counter < JSarray.length; counter++) {
    document.write("Counter = " + counter + "<br/>");
    var newMenuItem=document.createElement("option");
    newMenuItem.text = JSarray[counter];
    try {
        //currentMenu.add(newMenuItem, null); // standards compliant
        FilmsDropDownMenu.add(newMenuItem, null); // standards compliant
    }
    catch(ex) {
        //currentMenu.add(newMenuItem); // IE only
        FilmsDropDownMenu.add(newMenuItem);
    }
}

function displayUsersChoice() {
// Grab the INDEX number of the choice the user selected from that menu:
var tempMenu = document.getElementById("FilmsDropDownMenu").selectedIndex; 
choice = tempMenu[choiceSelected].value;
alert ("You chose: " + choice);
}

</script>

</head>

<body onload="showArray()">
Hello!

<form id="myForm">
<select id="FilmsDropDownMenu" onChange="displayUsersChoice()">
    <option>==Choose Film to Edit:==</option>
    <option>Star Wars</option>
    <option>Raiders</option>
    <option>2001</option>
</select>

<input type="submit" value="Display Array" onclick="showArray()" />
</form>

<br/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:45:49.093

这只是一个如何直接从 PHP 创建下拉列表的示例。有时简单的方法是正确的方法：

```
$allFilmTitles = array("Godfather", "Colombo", "Naked Gun");
print '<select name="FilmsDropDownMenu" id="FilmsDropDownMenu">';

foreach ($allFilmTitles as $film)
{
    print "<option>{$film}</option>";
}

print "</select>"; 
```

# websphere - websphere 应用程序服务器中的文件夹“installedApps”和“应用程序”有什么区别？

> ID：10851276
> 
> 赞同：8
> 
> 时间：2012-06-01T13:33:04.297
> 
> 标签：websphere

通常，在我们创建 DMGR 和 Node 的配置文件之后，我们在路径 $DMGRPROFILE_HOME/config/cells/$cellName 下有文件夹**应用程序，在路径 $NODEPROFILE_HOME/ 下有****installedApps**。所有要部署的应用程序都将放在文件夹**installedApps**中。而且我们也可以在上面的文件夹**applications**下看到同样的内容。所以我的问题是它们之间有什么区别？为什么 websphere 应用服务器除了**installedApps之外，还会将此类应用放入文件夹****应用**程序中？更重要的是，例如，如果我需要更新我部署的应用程序战争文件的一个名为 web.xml 的文件，我是否必须更新上述两个路径下的文件？

 **提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T14:43:08.170

Dmgr 配置文件下的`applications`路径包含已在管理控制台中部署的文件。

节点配置文件下的`installedApps`路径包含已同步到每个节点后的这些文件。在大多数情况下，这也将在部署之后立即进行。

## 部署单个文件

最安全的做法是使用管理控制台部署单个文件，而不是在文件系统上就地编辑它：

[![在此处输入图像描述](../Images/0b05e8345348f50bef94826e02769bba.png)](https://i.stack.imgur.com/48rkt.png)

缺点是您必须输入服务器部署文件名的*完整路径。*例如`webapp.war/WEB-INF/classes/com/yourcompany/project/package1/YourClass.class`。

如果您有错字，它会部署，但不会部署在您想要的位置，并且您可能不会注意到它，直到您的预期更改没有生效。

## 在文件系统上直接编辑

也就是说，在文件系统上编辑会更快，所以我们有时会这样做，尤其是对于 JSP 之类的。为此，您需要编辑节点`installedApps`目录下的副本。（位置由 WebSphere 变量 控制`APP_INSTALL_ROOT`，默认为`${USER_INSTALL_ROOT}/installedApps`。）

## web.xml

`web.xml`，然而，是不同的。如果您在 中进行编辑`installedApps`，则更改将不会生效。相反，您需要在路径中编辑一个，例如：

`$NODEPROFILE_HOME/config/cells/cellName/applications/earName.ear/deployments/applicationName/warName.war/WEB-INF`

或者在 $DMGRPROFILE_HOME 中执行，然后同步节点（通过 syncNode.sh 或通过管理控制台）。

无论哪种方式，您都需要重新启动企业应用程序。**

# c++ - 我无法获取 LPRECT 结构数据，我做错了什么？

> ID：10851278
> 
> 赞同：5
> 
> 时间：2012-06-01T13:33:13.483
> 
> 标签：c++, winapi

它应该可以正常工作：

```
#include <iostream>
#define _WIN32_WINNT 0x501
#include <windows.h>

using namespace std;

int main() {
  HWND consoleWindow = GetConsoleWindow();
  LPRECT lpRect;
  GetWindowRect(consoleWindow,lpRect);
  cout << lpRect.top <<endl;
} 
```

但相反，我得到了这个：

```
error: request for member 'top' in 'lpRect', which is of non-class type 'LPRECT {aka tagRECT*}' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T13:36:53.427

你的代码是错误的。Windows 在这里需要一个有效的 Rect。LPRECT 只是一个指针，你还没有初始化它。请像这样修改它。

```
HWND consoleWindow = GetConsoleWindow();
RECT aRect;
GetWindowRect(consoleWindow,&aRect);
cout << aRect.top <<endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:36:24.160

`LPRECT`类型是指向的*指针*`[RECT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162897%28v=vs.85%29.aspx)`。这（不幸的是，在我看来）在 Win32 API 中很常见，它们会在你身上“隐藏星号”。由于星号在 C 语言中很重要，因此会造成更多混乱。

所以，无论如何，你需要使用一个实际`RECT`的地方来存储结果：

```
RECT rect; /* An actual RECT, with space for holding a rectangle. */

/* The type of &rect is LPRECT. */
GetWindowRect(consoleWindow, &rect); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:36:48.690

你要：

```
RECT Rect;
GetWindowRect(consoleWindow, &Rect);
cout << Rect.top <<endl; 
```

我会说你是一个 C# 人，因为你试图在不理解指针的情况下使用类型和 API 调用。`LPRECT`是派生类型，表示它是指向`RECT`. 拥有这种类型的变量，您声明了一个指向无效内存地址的指针（指针变量未初始化）。您的代码预计会使应用程序崩溃。

您需要改为保存一个`RECT`变量，并将一个指针传递给它以使其由 API 初始化/归档。

# java - 在 Eclipse 插件中保存操作的挂钩

> ID：10851280
> 
> 赞同：6
> 
> 时间：2012-06-01T13:33:16.683
> 
> 标签：java, eclipse, plugins, save

我想为 Eclipse 创建一个 Google Closure Compiler 插件。我已经有一个弹出菜单项来将 JavaScript 文件编译为其缩小版本。但是，如果每次保存时`*.js`都会自动生成该缩小版本，那将非常有帮助。我读过/听说过自然和建设者、扩展点和`IResourceChangeListener`. 但我没有弄清楚我应该使用什么，尤其是如何让它工作。

是否有一个插件的工作示例可以执行“相同类型的事情”，这样我就可以使用它或编写这样的教程？

通过下面的答案，我搜索了使用`IResourceChangeListener`并提出了以下代码的项目：

清单：[http ://codepaste.net/3yahwe](http://codepaste.net/3yahwe)

`plugin.xml`：[http ://codepaste.net/qek3rw](http://codepaste.net/qek3rw)

激活器：[http ://codepaste.net/s7xowm](http://codepaste.net/s7xowm)

[虚拟启动： http](http://codepaste.net/rkub82) ://codepaste.net/rkub82

MinifiedJavascriptUpdater：[http ://codepaste.net/koweuh](http://codepaste.net/koweuh)

其中`MinifiedJavascriptUpdater.java`包含函数的代码永远不会到达`IResourceChangeListener`。`resourceChanged()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:28:25.380

从这里回答[http://www.eclipse.org/forums/index.php/t/362425/](http://www.eclipse.org/forums/index.php/t/362425/)

解决方案是将代码放入激活器并摆脱`MinifiedJavascriptUpdater`：

```
package closure_compiler_save;

import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.osgi.framework.BundleContext;

/**
 * The activator class controls the plug-in life cycle
 */
public class Activator extends AbstractUIPlugin {

    // The plug-in ID
    public static final String PLUGIN_ID = "closure-compiler-save"; //$NON-NLS-1$

    // The shared instance
    private static Activator plugin;

    /**
     * The constructor
     */
    public Activator() {
    } //gets here

    @Override
    public void start(BundleContext context) throws Exception {
        super.start(context);
        Activator.plugin = this;

        ResourcesPlugin.getWorkspace().addResourceChangeListener(new IResourceChangeListener() {
            public void resourceChanged(IResourceChangeEvent event) {
                System.out.println("Something changed!");
            }
        });
    }

    @Override
    public void stop(BundleContext context) throws Exception {
        Activator.plugin = null;
        super.stop(context);
    }

    /**
     * Returns the shared instance
     *
     * @return the shared instance
     */
    public static Activator getDefault() {
        return plugin;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:06:44.120

你需要一个建造者来做这件事。Eclipse 为您想要做的事情提供了广泛的支持，即随着事情的变化需要维护生成的工件的概念。[这篇论文](http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html)将帮助您入门（尽管它非常古老，但它是完全准确的）。

所有语言插件（JDT、CDT 等）在编译代码时都会做这种事情。

# objective-c - 在 xcode 中添加 webview 时，我得到 sigbart；如何链接到 WebKit 框架？

> ID：10851281
> 
> 赞同：0
> 
> 时间：2012-06-01T13:33:22.303
> 
> 标签：objective-c, xcode, cocoa

[添加 Cocoa WebView 时的 SIGABRT](https://stackoverflow.com/questions/4629392/sigabrt-when-adding-cocoa-webview)

这似乎可以回答我的问题，但我不知道“链接反对”是什么意思。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:38:49.167

是的！只是自己解决了。

我需要在我的项目中包含 webkit 框架。

有关说明，请参阅此链接。

[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:39:10.733

在 Xcode 4 中，在左侧的 Project Navigator 中选择您的项目。

然后在主窗口中，选择“构建阶段”。

第三部分是“Link Binary With Libraries”。单击本节左下角的“+”，然后您可以使用可用框架的列表。您可以在此处选择 WebKit 框架，将其链接到您的项目。

# asp.net-mvc - ASP.Net MVC 4 RC 中不推荐使用 AntiForgeryToken

> ID：10851283
> 
> 赞同：28
> 
> 时间：2012-06-01T13:33:40.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, antiforgerytoken

我刚刚安装了 ASP.Net MVC 4 RC 来替换 ASP.Net MVC 4 beta。尝试运行现有应用程序时，我收到一条`AntiForgeryToken`已弃用的错误消息。这是我的代码：

```
using (Html.BeginForm("", "", FormMethod.Post, new { id = "MonthElectionForm" }))
{
    @Html.AntiForgeryToken("AddEditMonthElection")
} 
```

**- - 更新 - -**

ASP.Net MVC 4 RC 已经废弃了 ValidateAntiForgeryToken 属性和 AntiForgeryToken html 帮助器的 Salt 属性。所以，现在我的代码如下所示：

控制器：

```
 [HttpPost]
        [ValidateAntiForgeryToken]
        public JsonResult CreateCompany(CompanyDataEntryViewModel modelData)
       {...} 
```

形式：

```
@using (Html.BeginForm("", "", FormMethod.Post, new { id = "CreateCompanyDataEntryForm" }))
{
    @Html.AntiForgeryToken()
...
} 
```

查看生成的 HTML，AntiForgeryToken 仍会生成隐藏字段并提供加密值。我的行动仍然有效。但是我失去了指定要在加密过程中使用的密钥的能力。我不太确定这个过程是如何工作的，但在我知道我在动作和表单上设置盐值之前。这些值必须匹配才能使操作接受帖子。那么，你现在如何设置盐值呢？我认为它与 AntiForgeryConfig AdditionalDataProvider 有关，但我找不到任何关于如何使用 AntiForgeryConfig AdditionalDataProvider 的谷歌搜索。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-01T19:46:21.103

设置*salt*参数是不必要的，也没有提供任何额外的保护，因此我们删除了对它的支持。

[有关更多信息，请参阅我在如何为 ValidateAntiForgeryToken 选择盐值的](https://stackoverflow.com/questions/9444214/how-to-choose-a-salt-value-for-validateantiforgerytoken)回复。

# c# - BinaryFormatter.Deserialize 的 OutOfMemory 异常来自其内部 StringBuilder 调用

> ID：10851285
> 
> 赞同：5
> 
> 时间：2012-06-01T13:33:40.137
> 
> 标签：c#, deserialization, out-of-memory, stringbuilder, binaryformatter

我有一个 .NET 4 WCF 服务，它正在向客户端发送一些被客户端反序列化的大对象（~115Mb）。对象第一次进入它时反序列化很好。但是，所有后续调用都会抛出`OutOfMemoryException`. 我已经检查以确保我的所有东西`IDisposables`都包裹在`using`块中。我已经查看了与此类似的其他问题，例如[BinaryFormatter outofmemory 异常反序列](https://stackoverflow.com/q/4150721/1300754) 化和[Deserialize from MemoryStream throws OutOfMemory exception in C#](https://stackoverflow.com/q/1136061/1300754) 。我尝试了一些人们推荐的解决方案，包括使用[Simon Hewitt 的 Optimized Serializer](http://www.codeproject.com/Articles/16017/Optimizing-Serialization-in-NET-part-2)。但是，最终，他仍然依赖于`BinaryFormatter`反序列化对象。

我抓住`OutOfMemoryException`并查看了堆栈跟踪（见下文）。跟踪似乎源于`StringBuilder`类中的内存利用率问题。我已经阅读了其他文章，关于如何`StringBuilder`在需要更多空间时使用 (length * 2) 算法导致内存问题。

```
at System.Text.StringBuilder.ToString()    
at System.IO.BinaryReader.ReadString()    
at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectString(BinaryHeaderEnum binaryHeaderEnum)    
at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()    
at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)    
at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)    
at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream) 
```

有没有办法以`BinaryFormatter`不同的方式工作而不使用`StringBuilder`，或者有没有更好的替代方法来`BinaryFormatter`更好地管理内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:30:13.607

我不建议将 BinaryFormatter 用于任何大小（实际上，如果您不使用 binaryformatter，它可能会小很多）。如果它是相当简单的数据，例如表格数据或有一些约束，例如没有循环引用等，那么使用简单的二进制编写器滚动您自己的二进制序列化，或者使用一些现成的序列化器，如[protobuf-net](http://code.google.com/p/protobuf-net/)或[json.net](http://json.codeplex.com)应该更紧凑，速度更快。

# android - android ListView 没有得到更新

> ID：10851286
> 
> 赞同：0
> 
> 时间：2012-06-01T13:33:41.470
> 
> 标签：android, android-listview

正如标题所说，我的列表视图不会被填满。我知道适配器装满了 3 个项目，并通过它进行了调试。但我的 xml 根本没有显示任何内容：

如果应该做任何事情，适配器是一个全局变量。代码：

```
private void listChange(CustomCursor c){

    List<SimpleListItem> itemsList = new ArrayList<SimpleListItem>();

    while (c.moveToNext()) {
        String picture = c.getString("picture");
        String text = c.getString("name");
        itemsList.add(new SimpleListItem(text, picture));

    }
    productListAdapter = new ProductAdapter(getBaseContext(),R.layout.product_item, itemsList);
    setListAdapter(productListAdapter);
    productListAdapter.notifyDataSetChanged();

} 
```

活动的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <dk.foo.views.PageHeaderView
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </dk.foo.views.PageHeaderView>

    <ListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:44:46.773

如果您想查看 ，请修改您`orientation`的。`LinearLayout``vertical``ListView`

现在`orientation`，您的父级`LinearLayout`设置为`horizontal`，`width`您的自定义视图`PageHeaderView`设置为`FILL_PARENT`，您将`ListView`被推出屏幕。

# java - onPostExecute Looper AsyncTask

> ID：10851287
> 
> 赞同：0
> 
> 时间：2012-06-01T13:34:02.443
> 
> 标签：java, android

我的 Android 应用程序允许用户从 Fragment 更新他们的 Facebook 状态。我已经实现了以下 AsyncTask 以便他们可以登录：

```
 public class updateFacebookTask extends AsyncTask<String, Void, Boolean> {
    protected Boolean doInBackground(final String... message) {
        Log.i(TAG, "Async UFT");

        myFResult = false;

            Looper.prepare();   

            if (loginAndPostToWall()) {
                Log.i(TAG, "loginAndPostToWall Returned: " + myFResult);

                myFResult = true;

            } else {
                Log.i(TAG, "loginAndPostToWall Returned: " + myFResult);

                myFResult = false;
            }

            //Looper.loop();

        return myFResult;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        Log.i(TAG, "UFT - oPrE");

    }
    @Override
    protected void onPostExecute(Boolean myFResult) {
        super.onPostExecute(myFResult);

        if (myFResult) {
            Log.i(TAG, "UFT oPE - Success: " + myFResult);

        } else {
            Log.w(TAG, "UFT oPE - fail: " + myFResult);

        }
    } 
```

AsyncTask 使用如下方法 loginAndPostToWall()，它实现了一个 DialogListener 作为 Facebook sdk 的一部分：

```
public boolean loginAndPostToWall() {

    myFResult = false;

    facebook.authorize(getActivity(), PERMISSIONS,
            Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

                public void onComplete(Bundle values) {
                    Log.i(TAG, "LoginDialog Complete - Success");

                    myFResult = true;

                }

                public void onFacebookError(FacebookError error) {
                    Log.w(TAG,
                            "onFacebookError - Authentication with Facebook failed");

                    myFResult = false;

                }

                public void onError(DialogError error) {
                    Log.w(TAG,
                            "onError - Authentication with Facebook failed");
                    looper = false;
                    Log.i(TAG, "looper " + looper);

                    myFResult = false;

                }

                public void onCancel() {
                    Log.w(TAG,
                            "onCancel - Authentication with Facebook cancelled");

                    myFResult = false;

                }
            });

    return myFResult;
} 
```

我有两个问题，我真的需要帮助：

1.  LogInAndPostToWall 立即将 myFResult 返回为 false。我想要它做的是等到 webView 的登录从 DialogListener 返回 onComplete （或错误）。我怎样才能让它在那个时候而不是之前返回 myFResult ？

2.  如果我包含 Looper.loop(); onPostExecute 永远不会被调用。如果我不包括 Looper.prepare(); 我收到一条错误消息，说没有它我无法创建处理程序。我应该在某处调用 quit() 吗？

我已经坚持了两天（！）并阅读了很多很多 SO 帖子 - 我尝试使用 runnables 并记录所有正在运行的线程等，但没有任何乐趣。

提前谢谢你救了我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:37:23.397

loginAndPostToWall() 应该在 UI 线程上执行，因为它会修改 UI。doInBackgorund() 方法永远不会在 UI 线程上执行，并且您不应该在其中包含 Looper.prepare() 或 Looper.loop() 代码。

# sql - 检索具有 2 个相同结果 SQL 的最后一条记录

> ID：10851291
> 
> 赞同：0
> 
> 时间：2012-06-01T13:34:07.617
> 
> 标签：sql, get, record

我有一个小问题......我需要为此检索最后的记录：

> id：0
> 用户名：管理员
> 类型：逻辑
> id_quest：1
> risp：X
> 
> id：1
> 用户名：管理员
> 类型：逻辑
> id_quest：1
> risp：X
> 
> id：2
> 用户名：管理员
> 类型：逻辑
> id_quest：1
> risp：Y
> 
> id：3
> 用户名：大声笑
> 类型：逻辑
> id_quest：2
> risp：Z
> 
> id：4
> 用户名：大声笑
> 类型：生物学
> id_quest：1
> risp：K
> 
> id：5
> 用户名：大声笑
> 类型：生物学
> id_quest：1
> risp：Q

我想在“类型和 id_quest 相同”时检索最后一条记录，所以在这种情况下它应该给出：id:5、id:3 和 id:2。

这是我的数据库：

```
CREATE TABLE IF NOT EXISTS `question` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `type` varchar(50) NOT NULL,
  `id_quest` int(255) DEFAULT NULL,
  `risp` int(1) DEFAULT NULL,
  `non_contata` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=127 ;

INSERT INTO `question` (`id`, `username`, `type`, `id_quest`, `risp`, `non_contata`) VALUES
(91, 'Admin', 'biologia', 1, X, 0),
(92, 'Admin', 'biologia', 2, X, 0),
(93, 'Admin', 'logica', 3, X, 0),
(94, 'Admin', 'logica', 4, X, 0),
(73, 'J.J.J', 'biologia', 1, X, 0),
(74, 'J.J.J', 'biologia', 2, X, 0),
(75, 'J.J.J', 'biologia', 3, X, 0),
(76, 'J.J.J', 'biologia', 4, X, 0),
(109, 'Admin', 'biologia', 1, X, 0),
(110, 'Admin', 'biologia', 2, X, 0),
(111, 'Admin', 'biologia', 3, X, 0),
(112, 'Admin', 'biologia', 4, X, 0), 
```

我希望该查询返回此 ID：112,111,110,109,76,75,74,73,94,93

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:39:05.547

根据最后一条记录，您可能是指 id 最大的那个。

以下应该这样做：

```
select *
from t
where t.id in (select max(id)
               from t
               group by type, id_quest
               having count(*) > 1
              ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:38:18.993

基本上，它应该使用分组来工作：

```
SELECT MAX(id)
FROM table
GROUP BY type, id_quest
ORDER BY 1 DESC 
```

假设“最后一条记录”是指最大的 id，并且重复条目在表中的位置无关紧要。

在 MySQL 上，此查询返回：

```
mysql> SELECT max(ID) FROM test GROUP BY type, id_quest ORDER BY 1 DESC;
+---------+
| max(ID) |
+---------+
|       5 |
|       3 |
|       2 |
+---------+
3 rows in set (0.00 sec) 
```

如果您只想比较直接的前辈，那么事情会变得有点复杂，您需要使用子查询。

```
SELECT id
FROM question q1
WHERE
IFNULL((SELECT q2.type=q1.type FROM question q2 WHERE q2.id > q1.id ORDER BY q2.id LIMIT 1),0) = 0
OR
IFNULL((SELECT q3.id_quest=q1.id_quest FROM question q3 WHERE q3.id > q1.id ORDER BY q3.id LIMIT 1),0) = 0
ORDER BY id DESC; 
```

此查询将 id_quest 和 type 列与具有下一个最高 id 的列进行比较，如果相同则输出 1，否则输出 0。

但是，在一张大表上，这可能会非常低效，最好编写一个脚本来顺序遍历每一行并过滤掉重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:40:27.220

试试这个（如果 id 是唯一的或主键）：

```
Select * from tableName where id in (Select Max(id) from tableName Group By type, id_quest) 
```

# jquery - 如何记住用户是否关闭了下拉 div

> ID：10851293
> 
> 赞同：1
> 
> 时间：2012-06-01T13:34:17.297
> 
> 标签：jquery, cookies, drop-down-menu

我有一个小下拉消息要添加到站点，它使用以下代码

```
<script>$(document).ready(function(){
$('#someid1') .slideDown('slow');}); $(document).ready(function() $('#hide').click(function(){
 $('#someid1').slideUp('slow'); });});</script>

<div id="someid1"><div id="someid2">some gibberish <a id="hide" href="#">HERE</a></div></div> 
```

当用户点击这里隐藏我想记住这个选择。问题是我知道我可能需要一个 cookie 来执行此操作，但对它们一无所知，任何帮助表示赞赏

提前感谢灰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:37:27.980

试试这个 jQuery 插件：[https](https://github.com/carhartl/jquery-cookie) ://github.com/carhartl/jquery-cookie这是一个简单、轻量级的 jQuery 插件，用于读取、写入和删除 cookie。

您可以简单地**创建**Cookie

```
$.cookie('the_cookie', 'the_value'); 
```

并**阅读**Cookie

```
$.cookie('the_cookie'); // => 'the_value' 
```

所以你**要求**...

```
if ($.cookie('the_cookie') === 'the_value') {
    $('#someid1').addClass('open');
} 
```

**CSS**

```
#someid1 {
    display:none;
}

#someid1.open {
    display:block
} 
```

**示例实现**

```
<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title></title>

        <!-- Get jQuery Core -->
        <script src="/path/to/jquery.js" type="text/javascript"></script>

        <!-- Get Cookie Plugin -->
        <script src="/path/to/jquery.cookie.js" type="text/javascript"></script>

        <script type="text/javascript">

            // Is DOM ready?
            $(document).ready(function() {

                $('#hide').click(function(e){

                    // Set Cookie named 'notification'to the value 'hide'
                    $.cookie('notification', 'hide'); 

                    // Hide your Div
                    $('#someid1').slideUp('slow');

                    // Disable default behavior
                    e.preventDefault();
                });

                // Hide DIV is Cookie is Set
                if( $.cookie('notification') === 'hide' ){
                    $('#someid1').hide();
                }

            });
        </script>

    </head>
    <body>
        <div id="someid1">

            <div id="someid2">some gibberish</div>
            <a id="hide" href="#">HERE</a>

        </div>
    </body>
</html> 
```

**注意：**此代码未经测试，可能无法正常工作。但它会给你一个正确方向的提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:46:08.203

您不一定需要使用 cookie；您可以尝试使用[store.js](https://github.com/frankkohlhepp/store-js)存储数据，它封装了浏览器本地存储和其他一些在客户端存储数据的方法。

```
/*
store.js groups your values into something called a store. Multiple stores are separated from each other.
So let's make a new store:
*/

var settings = new Store("settings");

/*
Just choose a name for the new store, and save it in a variable. Always remember to use the "new" keyword! Never leave it off!
Now you can almost normally get, set and remove values:
*/

settings.set("color", "blue");
settings.set("enable_test1", true);
settings.set("number_of_rainbows", 8);

// and

var color = settings.get("color");

// and

settings.remove("color"); 
```

...用代码编辑..

```
 <div id="cookiemsg"><div id="cookiecenter"><p>This website places a
 Google Analytics cookie on your machine, this helps us collect
 anonymous information so that we can provide a better experiance for
 you. By using this site you imply your consent to this. For more
 information or to find out how you can remove this cookie please visit
 our privacy policy <a href="#">HERE</a> or if you are happy with this
 click <a id="hide" href="#">HERE</a></p></div><!--end of
 cookiecenter--></div><!--end of cookiemsg--> 
```

​</p>

```
$(function(){
    var store = new Store("com.domain.page.store")
    var acceptedCookie = store.get("acceptedCookie");
    if(typeof acceptedCookie == "undefined"){
     //set a default
       acceptedCookie = false
     }
    if(!acceptedCookie){
        $('#cookiemsg').slideDown('slow');
    }

    $('#hide').click(function(){
         $('#cookiemsg').slideUp('slow');
         store.set("acceptedCookie", true);
   });

}); 
```

# .net - 常见的 DLL 是否应该在 WiX 中具有相同的组件 ID

> ID：10851298
> 
> 赞同：3
> 
> 时间：2012-06-01T13:34:31.650
> 
> 标签：.net, installation, wix, windows-installer

我正在为客户端/服务器应用程序编写几个安装包。我正在使用 Wix Toolkit，并且建议每个 DLL 都被包装为具有唯一 ID 的自己的组件。

有一些常见的 DLL 需要安装在两个包中。这些 DLL 是否应该具有相同的组件 GUID，或者它们在每个包中是否应该不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:54:47.880

鉴于您对我的评论的回复，如果客户端和服务器都安装在同一台机器上，情况会变得特别糟糕。

从[Windows 安装程序组件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372830%28v=vs.85%29.aspx)：

> 共享相同组件 ID 的两个组件被视为同一组件的多个实例，而不管它们的实际内容如何。*用户计算机上仅安装任何组件的单个实例。*

（强调补充）。

加：

> *   每个组件必须存储在一个文件夹中。

以下要点听起来可能与以下内容相矛盾：

> *   任何文件、注册表项、快捷方式或其他资源都不应作为多个组件的成员提供。

但这实际上是在反过来说——如果您有两个安装程序将同一个 DLL 安装到同*一个*位置，那么它们*必须*是同一个组件的一部分。重要的是文件的位置（以及它的名称、其中的位、版本等）。

* * *

回复：我的答案的第一行，并考虑到您打算做什么 - 如果安装了服务器（服务器目录中的 DLL），然后安装了客户端，则 GAC 中*不会*存在 DLL，因此客户端应用程序不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:01:52.980

已安装的组件由它们的 GUID 和[keypath 标识](https://stackoverflow.com/questions/2003043/what-is-the-wix-keypath-attribute)。

如果两个包都将组件安装到*相同*的位置，那么两个包都必须使用相同的 GUID，以便正确地对组件进行引用计数，这一点很重要。

如果两个包都将组件安装到*不同*的位置，那么在任何情况下它们都将被单独管理，因为 keypath 不同。在这种情况下，GUID 是否相同并不重要。

**结论：您应该保持 GUID 相同**。

顺便说一句，wix鼓励您通过将组件定义编译成[wixlib](http://robmensching.com/blog/posts/2008/10/10/What-are-.wixlibs-and-why-would-you-use-them)，然后在构建不同的安装程序包时使用该 wixlib 来共享组件定义。这类似于您创建 DLL 然后在不同的应用程序中使用该 DLL 的方式。

如果您使用 wixlib，您的 GUID 问题甚至不会出现，因为您无法为不同的包更改它们。

# html - 小宽度时右浮动div后左浮动div

> ID：10851299
> 
> 赞同：0
> 
> 时间：2012-06-01T13:34:38.857
> 
> 标签：html, css, responsive-design

示例：http: [//jsfiddle.net/tkKth/](http://jsfiddle.net/tkKth/)

当我调整窗口大小（设置`.container {width:200px;}`）时，左 div 出现在右 div 之后。当 div 左/右改变它们在 html 文档中的位置时，有没有办法用 css 做到这一点？-> `<div class="left">Left div</div> <div class="right">Right div</div>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:53:20.480

6在您的示例[http://jsfiddle.net/tkKth/](http://jsfiddle.net/tkKth/)上，右侧 div 在左侧之前

```
<div class="container">
<div class="right">Right div</div>
<div class="left">Left div
</div>​ 
```

在你的问题上是相反的

```
<div class="container">
<div class="left">Left div</div>
<div class="right">Right div</div>
</div>​ 
```

如果 .container 宽度 <= .left 宽度 & .right 宽度，则先到先得

如果左侧高度是固定的（例如 36 像素），您可以使用带有 min-device-width 的媒体查询：如果屏幕低于 600 像素，并将其添加到 .right

```
top:36px; /* equivalent to .left height*/
position:absolute; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T22:01:02.960

几年后，flexbox 得到了很好的支持，因此可以通过以下方式实现：

```
.container { 
    display: flex; 
}

.left {
    order: 2;
}

.right {
    order: 1;
} 
```

# php - 网页用户的 fwrite 权限

> ID：10851306
> 
> 赞同：0
> 
> 时间：2012-06-01T13:35:15.753
> 
> 标签：php, permissions, file-permissions, fwrite

我将允许我的用户`iframe`在我的网站上制作 d HTML 页面。他们将输入包括标记在内的文本，我将使用 .html 创建 .html 文件`fwrite()`。

是否有理由**不对**这些 .html 文件授予文件权限`0777`？

显然我不希望人们执行 javascript 但其他标记应该没问题。那我应该这样做`0766`吗？

我对权限不是很熟悉，所以一般建议也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:23:27.090

0777 不适用于 HTML 等数据文件。它们可能应该设置为 0644（所有者读+写，组/其他只读）。

请注意，HTML 文件上的可执行位绝对与它在浏览器中加载时的权限无关。例如，无论其权限如何，Javascript 都可以在任何 HTML 文件中正常运行——如果您不想让 Javascript 从这些文件中运行，则需要自己过滤内容。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:37:27.990

如果你能确定，他们只会上传**html**文件——那就没问题了。

# sql - SQL Server 中的事务管理和临时表

> ID：10851309
> 
> 赞同：2
> 
> 时间：2012-06-01T13:35:24.637
> 
> 标签：sql, sql-server, tsql, transactions

抱歉标题，可能不是很清楚。

我在脚本中有一些相互依赖的 SQL 查询。
该脚本使用插入数据的临时表（`#temp_data`表）。

这是**预期的输出**：

```
___________________________________
| speed1 |  speed2   |  distance   |  
|   1    |   NULL    |     10      |  
|   3    |   NULL    |     40      |
|   5    |   NULL    |     90      |
|  NULL  |    1      |     10      |
|  NULL  |    3      |     40      |
|  NULL  |    5      |     90      | 
```

这是**查询结构**（我没有包括实际的查询，因为它太大了）：

```
-- First group
queryForSpeed1
queryToUpdateDistanceBasedOnSpeed1

-- Second group 
queryForSpeed2
queryToUpdateDistanceBasedOnSpeed2 
```

如果我将第一组查询（`queryForSpeed1`和`queryToUpdateDistanceBasedOnSpeed1`）与第二组分开运行，那么我会得到预期的输出：只有`speed1`和`distance`列包含数据：

```
___________________________________
| speed1 |  speed2   |  distance   |  
|   1    |   NULL    |     10      |  
|   3    |   NULL    |     40      |
|   5    |   NULL    |     90      |
|  NULL  |   NULL    |    NULL     |
|  NULL  |   NULL    |    NULL     |
|  NULL  |   NULL    |    NULL     | 
```

当我运行第二组时也会发生同样的情况：

```
___________________________________
| speed1 |  speed2   |  distance   |  
|  NULL  |   NULL    |    NULL     |  
|  NULL  |   NULL    |    NULL     |
|  NULL  |   NULL    |    NULL     |
|  NULL  |    1      |     10      |
|  NULL  |    2      |     40      |
|  NULL  |    3      |     90      | 
```

**但是**，当我**运行两组**时：所有距离都是**`NULL`**：

```
___________________________________
| speed1 |  speed2   |  distance   |  
|   1    |   NULL    |    NULL     |  
|   3    |   NULL    |    NULL     |
|   5    |   NULL    |    NULL     |
|  NULL  |    1      |    NULL     |
|  NULL  |    2      |    NULL     |
|  NULL  |    3      |    NULL     | 
```

我相信这在某种程度上与事务管理和临时表有关，尽管我无法在 Google 上找到解决问题的相关内容。

根据我的阅读，SQL Server 保留了一个事务日志，其中存储了每个更新、插入和任何内容……当它到达脚本末尾时，它实际上执行了所有这些插入和更新。

因此，我对距离列所做的更新发现所有速度都为 NULL，因为数据尚未从先前的更新中插入到临时表中，但在查询结束时，速度已插入表中，这就是为什么它们是可见的。

我玩了一下**[GO 语句](http://msdn.microsoft.com/en-us/library/ms188037.aspx)**来批量执行我的脚本，但到目前为止还没有运气......

* * *

**我究竟做错了什么？有人可以指出我正确的方向吗？**

* * *

## 编辑

这是[实际的查询](http://pastebin.com/wXNsJyZv)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:50:06.720

这几乎肯定是由您编写查询的方式引起的。

`#temp_data1`要确认，只需使用and`#temp_data2`而不是单个 table重写您的查询`#temp_data`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T22:18:15.343

问题与事务无关，而与您对`#temp_speed_profile`. 第二次通过`#temp_speed_profile`检索所有六条记录。Voyage_Id 的第一条记录中的 Speed_new 为空，因此 @distance 变为空。当您在下一回合保留@distance 的值时，它仍然为空。

使用不同的临时表时问题就消失了，因为第二遍仅适用于第二组数据。

关于游标的说明 - 定义游标时，请确保添加本地和 fast_forward。本地，因为它限制了游标的范围，并且 fast_forward 用于优化提取。

# android - Android如何在分享网址时添加额外的文字

> ID：10851310
> 
> 赞同：1
> 
> 时间：2012-06-01T13:35:26.797
> 
> 标签：android

我想在 android 应用程序中添加一个功能以通过电子邮件和 facebook 共享 url，我正在使用以下代码，

```
Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_SUBJECT, title);
shareIntent.putExtra(Intent.EXTRA_TEXT, content );
shareIntent.setType("text/plain");
startActivity(Intent.createChooser(shareIntent,"Share article")); 
```

通过电子邮件共享时，我希望内容字符串包含 content = someurl +（通过 MyApp 共享），而通过 Facebook 共享时，我想使用 content = someurl

因为如果我向其中添加任何内容，Facebook 将拒绝识别该网址。

任何人都可以帮助我解决问题，因为我可以同时实现这两者吗？

# javascript - 文档点击不在元素jQuery中

> ID：10851312
> 
> 赞同：22
> 
> 时间：2012-06-01T13:35:38.577
> 
> 标签：javascript, jquery, html

使用 jQuery 如何检测不是特定元素的点击，并因此执行一项操作？

我有以下 JavaScript

```
$('#master').click(function() {
    $('#slave').toggle();
});

$(document).not('#master','#slave').click(function() {
    $('#slave').hide();
}); 
```

而且我看不出我在逻辑上哪里出错了。[你可以在这里](http://jsfiddle.net/gZ4Hz/1/)看到一个活生生的例子

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-01T13:38:54.167

由于您绑定到`click`文档上的事件，您可以使用[event.target](http://api.jquery.com/event.target/)来获取启动事件的元素：

```
$(document).click(function(event) {
    if (!$(event.target).is("#master, #slave")) {
        $("#slave").hide();
    }
}); 
```

**编辑：**正如 Mattias 在他的评论中正确指出的那样，上面的代码将无法识别来自`#master`and的后代的点击事件`#slave`（如果有的话）。在这种情况下，您可以使用[close()](http://api.jquery.com/closest/)来检查事件的目标：

```
$(document).click(function(event) {
    if (!$(event.target).closest("#master, #slave").length) {
        $("#slave").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:42:09.293

这段代码是否符合您的要求？（不完全确定我是否理解正确）

```
$('body').on('click', '*:not( #master, #slave )', function() {
    $('#slave').hide();
}); 
```

[http://jsfiddle.net/gZ4Hz/8/](http://jsfiddle.net/gZ4Hz/8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T22:22:59.613

jQuery 长期以来一直支持事件委托。困难在于创建合适的选择器。最初[`delegate`](http://api.jquery.com/delegate)是使用的，但最近[`on`](http://api.jquery.com/on)应该使用委托形式。

事件委托的目的是侦听子元素上的事件并调用这些元素上的绑定事件处理程序，就好像它们已绑定到子元素而不是父元素一样。这意味着不是将处理程序绑定到DOM 中的*每个*元素，而是将处理程序绑定到初始选择中的每个元素（`document`是单个元素）。这也提供了一种使用单个选择器绑定到不断变化的元素集的简单方法，因为新元素将传播它们的事件以`document`判断它们在初始事件处理程序被绑定时是否存在：

```
$(document).on('click', '*:not(#master, #master *, #slave, #slave *)', function (e) {
    //this will reference the clicked element
}); 
```

另外，请注意，我不仅说元素不能是`#master`or `#slave`，它们也**不能**是`#master`or的子元素`#slave`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T13:49:49.777

另一个想法，它可能无法正常工作，因为您的浏览器可能没有`body`以 100% 的高度呈现；尝试调整你的基础 css 来固定身体的高度，然后再考虑其他一些想法。

[e.stopPropagation()](http://api.jquery.com/event.stopPropagation/)：*防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。*

因此，如果您将第一次点击代码更改为以下内容：

```
$('#master').click(function(e) {
    e.stopPropagation();
    $('#slave').toggle();
}); 
```

然后你也可以改变第二个的呼号：

```
$("body, body *").not('#master, #slave').click(function(e) {
    $('#slave').hide();
}); 
```

这应该涵盖它。试试看！或者看到[**这个 jsFiddle**](http://jsfiddle.net/SpYk3/e6sFy/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-11T11:32:45.810

Fredrik 的答案适用于文档中已经存在的元素，但不适用于通过 ajax 调用获取的元素。我尝试了以下方法，它对我有用。为未来的 ajax 编码人员共享代码。

```
 $(document).on('click',function(event) {
        if (!$(event.target).closest("#selector").length) {
            if ($('#selector').is(":visible"))
                $('#selector').slideUp();
        }
    }); 
```

会发布它作为评论，但我没有足够的声誉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-26T14:20:02.007

```
$('.clickable-row').on("click",function(){
  window.location = $(this).data('href');
  return false;
});
$("td > a").on("click",function(e){
  e.stopPropagation();
}); 
```

或者

```
jQuery(document).ready(function($) {
    $('.clickable-row').on("click",function(){
      window.location = $(this).data('href');
      return false;
    });
    $("td > a").on("click",function(e){
        e.stopPropagation();
    });
}); 
```

# ios - iOS：NSString 丢失 URL，显示 (null)

> ID：10851314
> 
> 赞同：1
> 
> 时间：2012-06-01T13:35:42.687
> 
> 标签：ios, xcode, url, nsstring, null

到目前为止，这是我的代码：

```
NSString *listedImageURL = listedProduct.image;

NSLog(@"URL: %@", listedImageURL); 
```

此代码工作正常，NSLog 向我显示了正确的 URL。但是当我尝试以下代码时， NSLog 显示（空）：

```
NSString *listedImageURL = listedProduct.image;

NSURL *imageURL = [NSURL URLWithString:listedImageURL];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *image = [UIImage imageWithData:imageData]; 
```

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:21:44.850

我相信 relower 是在正确的轨道上，文档指出：

> 此方法要求 URLString 包含任何必要的百分比转义码，它们是 ':'、'/'、'%'、'#'、';' 和 '@'。请注意，“%”转义是通过 UTF-8 转换的。

我相信，如果您要发布一些您正在转换的 URL 示例，那么确定哪些字符可能会给您带来问题会很有帮助。

我建议记录：listedImageURL

然后也运行：

```
NSString *escapedImageUrl = [listedProduct.image stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

然后记录。

这应该让你看到什么被逃避了，什么被错过了。它可以像杂散空间一样简单。

您也可以尝试使用 NSASCIIStringEncoding 而不是 NSUTF8StringEncoding ，看看是否有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:40:20.500

它可以为空，因为您的字符串到 url 的转换。

试试下面的代码；

```
NSString *listedImageURL = [listedProduct.image stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *imageURL = [NSURL URLWithString:listedImageURL];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *image = [UIImage imageWithData:imageData]; 
```

我想会为你工作。祝你好运。

# html - 是否可以在 HTML 电子邮件中使用 display:block on td 来实现响应式表格设计？

> ID：10851318
> 
> 赞同：16
> 
> 时间：2012-06-01T13:35:54.207
> 
> 标签：html, css, html-table, media-queries, html-email

这篇精彩的文章描述了如何创建可以惊人地扩展到移动浏览器的响应式表格。

现在我正在尝试将相同的技术应用于 html 电子邮件，但`display:block`似乎不适用于 html 电子邮件。

**要重现该问题：**

1.  将以下代码另存为 HTML 页面：

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
        <meta charset="utf-8">
        <style type="text/css">
            @media only screen and (max-width: 760px), screen and (max-device-width: 480px)  {
                /* Force table to not be like tables anymore */
                table, td, tbody, tr{
                        display: block;
                        width:100%;
                        padding:0;
                        clear:both;
                }
                td {
                        /* Behave  like a "row" */
                        position: relative !important;
                }
            }
        </style>
    </head>
    <body>
        <table style="width:100%;">
            <tr>
                <td style="border:1px solid red;">1/1</td>
                <td style="border:1px solid red;">1/2</td>
                <td style="border:1px solid red;">1/3</td>
            </tr>
            <tr>
                <td style="border:1px solid red;">2/1</td>
                <td style="border:1px solid red;">2/2</td>
                <td style="border:1px solid red;">2/3</td>
            </tr>
        </table>
    </body>
    </html> 
    ```

2.  在 Safari 中打开页面

3.  调整窗口大小以注意表格如何随着较小的窗口大小而变化

4.  按`CMD`+`i`或`File->Mail`此页面的内容创建 HTML 电子邮件

5.  调整电子邮件窗口的大小以注意表格如何正确调整大小

6.  将电子邮件发送给自己并打开它。

7.  现在请注意电子邮件确实如何响应媒体查询但未成功地重新设置表格的样式。

我还没有找到真正正确显示表格的电子邮件客户端。这是一个死胡同还是你有解决方法的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-31T06:10:35.887

接受的答案提供了一些很好的信息，但它没有直接解决这个问题。我最近一直在尝试响应式电子邮件，并提出了一些其他人可能会觉得有用的好的解决方案。开始了...

要回答这个问题，您可以使用`display:block;`使表格列在某些移动设备（Android、iOS 和 Kindle）上表现为行。

这是一个示例，展示了如何在移动设备上制作 2 列布局堆栈（左列在右列顶部）。

**HTML**

```
<table class="deviceWidth" width="100%" cellpadding="0" cellspacing="0" border="0" style="border-collapse: collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; ">
  <tr>
    <td width="50%" align="right" class="full">
      <p style="mso-table-lspace:0;mso-table-rspace:0; padding:0; margin:0;">
        <a href="#"><img src="http://placehold.it/440x440&text=LEFT" alt="" border="0" style="display: block; width:100%; height:auto;" /></a>  
      </p>                  
    </td>
    <td width="50%" align="left" class="full">
        <a href="#"><img src="http://placehold.it/440x440&text=RIGHT" alt="" border="0" style="display: block; width:100%; height:auto;" /></a>                     
    </td>
  </tr>
</table> 
```

**CSS**

```
@media only screen and (max-width: 640px)  {
    body[yahoo] .deviceWidth {width:440px!important; }  T 

    body[yahoo] .full {
        display:block;
        width:100%;
    }
} 
```

**注意：**选择`body[yahoo]`器[阻止 Yahoo 呈现媒体查询](http://www.emailonacid.com/blog/details/C13/stop_yahoo_mail_from_rendering_your_media_queries)。我的`body`电子邮件元素有一个`yahoo="fix"`属性。

上面的 CSS 表示如果屏幕宽度小于 640 像素，那么`td`s 的 class 为`full`should `display:block`with `width:100%`。

现在，让我们来点花哨的。有时您会希望左侧的列堆叠在右侧的列下方。为此，我们可以使用`dir="rtl"`包含`table`来翻转列的顺序。CSS 保持不变，这是新的 HTML：

**HTML**

```
<table class="deviceWidth" dir="rtl"  width="100%" cellpadding="0" cellspacing="0" border="0" style="border-collapse: collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; ">
  <tr>
    <td width="50%" dir="ltr" align="right" class="full">
      <p style="mso-table-lspace:0;mso-table-rspace:0; padding:0; margin:0;">
        <a href="#"><img src="http://placehold.it/440x440&text=RIGHT" alt="" border="0" style="display: block; width:100%; height:auto;" /></a> 
      </p>                  
    </td>
    <td width="50%" dir="ltr" align="left" class="full">
        <a href="#"><img src="http://placehold.it/440x440&text=LEFT" alt="" border="0" style="display: block; width:100%; height:auto;" /></a>                      
    </td>
  </tr>
</table> 
```

通过添加，`dir="rtl"`我们告诉它反转列的顺序。第一列（在 HTML 流中）显示在右侧，第二列（在 HTML 中）在左侧。对于小于 640 像素的屏幕，它首先显示第一列（右侧的列），然后显示第二列（左侧的列）。

这是[完整的 HTML 和 CSS](http://jsfiddle.net/brettdewoody/xnJ9Q/)以及来自 Gmail 和 iOS 5 的屏幕截图。

![邮箱](../Images/84459d33b68d621c5c8d5e846f2fafbc.png) ![iOS 5](../Images/632c616d5bbe8d5786094786b7088829.png) ![安卓 4](../Images/4d64189fc0a4d15e938cf8fcc27bb0a1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T20:14:34.523

我能够让它工作，结果如下： [https ://litmus.com/pub/d9ac198](https://litmus.com/pub/d9ac198)

这是我用来强制 td 表现得像行的代码：

```
table[class="magic"],
table[class="magic"] tbody,
table[class="magic"] tr,
table[class="magic"] td {
    display: block !important;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T14:03:05.840

我建议你参考这个： http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

虽然不是最新的，但在电子邮件的 css 支持方面，它是一个很好的资源。不幸的是，在构建电子邮件模板时，您不仅需要考虑浏览器，而且还需要考虑不同的客户端，例如 Outlook 和它们提供的 CSS 支持是出了名的差。

最重要的是，像 gmail 这样的邮件提供商倾向于剥离文档的某些部分（例如 head 标签），因此很难将任何响应式设计概念应用到对即使是基本的支持也很差的受众（电子邮件客户端） css。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T13:53:58.053

另一种方法是在一封电子邮件中使用两种设计：一种用于桌面阅读器，另一种用于移动阅读器，如此[处所示](https://stackoverflow.com/questions/29389866/responsive-e-mail-turn-table-cells-td-to-cleared-blocks#answer-29392600)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T08:36:43.803

我发现使用媒体查询为这样的移动设备堆叠 td 元素

```
td[class="stack-content"] {display:block !important} 
```

似乎适用于大多数设备，但显然不支持 display: block 属性的 windows phone 7 除外。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T16:28:13.830

我有完全相同的问题！我认为它只会在 iOS 设备上的 Mail 上运行，但它确实发生了你所说的 - 在你真正发送它之前它一直有效。

@Luca，我们知道支持不是很好，但是媒体查询被大多数人忽略了，所以如果您希望电子邮件在现代电子邮件客户端上看起来更好一点，添加它是一个不错的选择。Outlook 和其他人仍然会收到“正常”的 HTML 电子邮件，但没有媒体查询/响应表。

# regex - 使用正则表达式排除部分字符串

> ID：10851320
> 
> 赞同：1
> 
> 时间：2012-06-01T13:35:57.313
> 
> 标签：regex, url, regular-language

我对正则表达式很不好，我正在寻找一个标准。这是一个正则表达式，应该嵌入到防火墙的 url 中，因此它将阻止任何与末尾列表不同的 url。

这是我目前使用的，但它不起作用：

```
http://www.youtube.com/(*.*)list=UUFwtOm4N5djdcuTAlNIWJaQ 
```

这是示例网址（被阻止）：

```
http://www.youtube.com/watch?NR=1&feature=fvwp&v=P1b5VY_Bp_o&list=UUFwtOm4N5djdcuTAlNIWJaQ 
```

我正在尝试制作一个成功完全匹配的正则表达式，当`NR=1`或`feature=fvwp` 不存在时，我想我可以这样做：`(?!^feature=fvwp$)`但是`v=`and`list=UUFwtOm4N5djdcuTAlNIWJaQ`是允许的。

v= 也应该限制为任何字符（大写和小写）和 11 个长度，我假设它：`/^[a-z0-9]{11}$/`

我怎样才能将所有这些构建在一起并使其工作，以便它只允许并匹配此 url，不包括允许我解释的先前标准：

```
http://www.youtube.com/watch?v=4eK_RWpTgcc&feature=BFa&list=UUFwtOm4N5djdcuTAlNIWJaQ

http://www.youtube.com/watch?v=TLRl85TJwZM&feature=BFa&list=UUFwtOm4N5djdcuTAlNIWJaQ

http://www.youtube.com/watch?v=QEV9yqrpxkc&feature=BFa&list=UUFwtOm4N5djdcuTAlNIWJaQ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:08:45.550

您可以根据正则表达式*匹配*进行阻止吗？如果是这样，只需使用 `(.*)www\.youtube\.com/watch\?NR=1&feature=fvwp`并阻止任何匹配的内容。

# c++ - 字典容器，如果键不完全正确，也可以找到值

> ID：10851322
> 
> 赞同：1
> 
> 时间：2012-06-01T13:36:03.433
> 
> 标签：c++, dictionary, containers

我需要一个 C++ 内存字典容器，它获取一个键，并以任何方式返回一个值。也就是说，如果键在“键列表”中不存在，它会找到最相似的键，并给出值。

有什么建议么？

**编辑：**

感谢您的评论。

更多细节：为了简单，让我们从数字键开始。如果钥匙距离钥匙在 200 以内，就拿到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:23:09.000

你需要使用一种叫做[locality-sensitive hashing 的](http://en.wikipedia.org/wiki/Locality_sensitive_hashing)东西，并且你需要在它上面写一点代码（我保证只是一点点。一个额外的词）。

首先，您需要使用`std::map`and not`std::unordered_map`或任何其他哈希表 - 它*必须*是树或其他有序数据结构。

您的关键是局部敏感散列，它具有散列相似输入以关闭输出的行为。所以 AAA 的哈希值和 AAB 的哈希值会比 AAA 和 CCC 的哈希值更接近。该值将是您想要的任何值。

要检索“最近匹配”，您只需要使用`std::map::lower_bound`(或`std::map::upper_bound`) 从地图中获取与任何给定输入最接近的值。

所以你的代码看起来像这样

```
std::map<unsigned int, some_struct> mymap;
for(;;;)
{
   mymap[locale_sensitive_hash(some_struct(some random value))] = some_struct(some random value)
}

//Now find the object we have that is nearest to some_struct(AAA)
unsigned int this_hash = locale_sensitive_hash(some_struct(AAA));
some_struct nearest_object = mymap.lower_bound(this_hash); 
```

做完了。

一些注意事项：

这是假设一个非数字键。数字本身已经是“区域敏感的哈希”，即如果`H(n)`是`n`，则`H(n)`和之间的差异与输入和`H(n')`之间的差异成正比。在这种情况下，这是您唯一需要的，并且您不需要额外的散列步骤。`n``n'``lower_bound`

你可以很容易地扩展这个方法来做一些事情，比如指定对象之间的最大距离。这将取决于您使用的区域设置敏感哈希以及它如何表示两个给定输入的两个哈希之间的距离，但通常只是在返回(with being ) 之前比较`H(n)`和。`H(n')``nearest_struct``nearest_struct``n'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:31:34.227

一种方法是使用多图...

```
T& get(int key)
{
    // use a multimap as storage
    static multimap<int, T> m;

    multimap<int, T>::iterator best;

    // search for key within 200
    for (auto it = m.lower_bound(key-200); it != m.upper_bound(key+200); ++it)
        if (best)
            // if multiple matches use the closest one to the key
            best = (abs(it->first-key) < abs(best->first-key) ? it : best);
        else
            best = it;

    // if none found, insert new entry
    if (!best)
         best = m.insert(key, T());

    return best->second;
} 
```

另一种更快但更混乱的方法是使用 unordered_map 和两级键......

```
T& get(int key)
{
    struct KeyValue
    {
        int key;
        T value;
    };

    static unordered_map<int, vector<KeyValue>> m;

    vector<KeyValue>::iterator best;

    int b = key/200;
    int a = b - 1;
    int c = b + 1;

    // function to search bucket for a key...
    auto ms = [&](int bucket)
    {
        for (auto it = m[bucket].begin(); it != m[bucket].end(); ++it)
            if (abs(it->key - key) <= 200)
            {
                if (best)
                    best = (abs(it->key - key) < abs(best->key - key));
                else
                    best = it;
            }
    };

    ms(a);
    ms(b);
    ms(c);

    if (!best)
        best = m[key/200].push_back({key, T()});

    return best->value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:49:34.117

`std::map`解决此问题的一种方法可能是编写您自己的通过组合扩展的容器类。

将 a`std::map`作为成员并转发任何需要的函数和 typedef。

确保至少使用以下功能实现您的“试错”逻辑：

*   `count`
*   `find`
*   `operator[]`
*   `at`

# php - 用于随机锚文本的 PHP 加权数组

> ID：10851323
> 
> 赞同：0
> 
> 时间：2012-06-01T13:36:04.387
> 
> 标签：php

尝试设置一个简单的嵌入框来回显 url 并随机化源锚文本。我实现了这两个：

```
<textarea class="cf" onclick="this.focus();this.select()" readonly="readonly">
<iframe src="<?php
$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
echo $url;
?>" width="550px" height="400px" frameborder="0" scrolling="auto" allowtransparency="true"><a href="http://example.com/"><?php 
$raAnchor = array(1 => 'example.com', 
           2 => 'http://example.com/', 
           3 => 'www.example.com', 
           4 => 'Click here');  
$raNumber = count($raAnchor); 
echo $raAnchor[rand(1, $raNumber)]; 
?></a></iframe>
</textarea> 
```

问题：如何对数组中的随机结果进行加权以支持特定的回声？例如，希望 example.com 有 50% 的时间回显。我想我可以像这样在数组中放入更多 example.com：

```
1 => 'example.com', 
2 => 'example.com', 
3 => 'example.com', 
4 => 'example.com', 
5 => 'http://example.com/', 
6 => 'www.example.com', 
7 => 'Click here'); 
```

似乎必须有一个更优雅的解决方案。我是编程新手，我对 php 了解最少，所以如果你能指出我正确的方向，我可以从那里开始。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:42:17.537

你可以这样做：

```
<?php
    if(rand(1,2) == 1)
    {
        //Example goes here
    }
    else
    {
        //Everything else
    }
?> 
```

你可以对间隔做同样的事情。例如：

```
<?php
    $r = rand(1,10); 
    if($r >=1 && $r < 4)
    {
        /* 30% */
    }
    else if($r >=4 && $r < 9)
    {
        /* 60% */
    }
    else
    {
        /* 10% */
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:42:34.960

您始终可以生成一个随机数 1-100，然后如果 <= 40，则使用 1。否则，再进行一次随机以选择 2-7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T13:57:06.413

只需选择一个大的 MAX 值并以 1/100 为基础进行播放（更灵活；更随机）

```
if (($index = mt_rand(1,1000))<500) {
   // yes, 50%
   shuffle($arr);
   return $arr[$index];
}
else {
   // the other 50%
} 
```

或者只是随机的：

```
shuffle($arr);
return $arr[ array_rand($arr) ]; 
```

# eclipse - ant 的 mvn eclipse 插件的等价物是什么？

> ID：10851328
> 
> 赞同：1
> 
> 时间：2012-06-01T13:36:21.830
> 
> 标签：eclipse, ant

我有一个来自另一个团队的笨拙的蚂蚁项目，我想在 Eclipse 中工作。是否有相当于 maven 的 eclipse:eclipse 命令的蚂蚁？

我可以手动将它导入到 eclipse 中，但是我需要做一些步骤才能让它在 eclipse 中正常工作，我想自动化这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:02:28.070

Ant 已经融入 Eclipse，因此没有单独的插件，它只带有基本和 JDT 支持。

我认为你能做的最好的事情（我不确定它会有多好）是像这样创建项目：`New -> Project -> Java -> Java Project from Existing Buildfile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:03:56.363

您可以使用 Eclipse 向导从现有的 Ant 文件创建 Java 项目。请参阅“现有 Ant 构建文件中的文件/新建/项目.../Java/Java 项目”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:37:17.987

如果您继承了别人的代码，并且想快速开始，我建议您使用[ANT2IDE](http://gleamynode.net/articles/2234/ant2ide-ide-project-file-generation-from-ant-buildxml)项目。不需要对构建进行任何更新，因为它巧妙地使用 ANT 构建侦听器来确定*javac*任务使用的 jar。

如果您有时间重构构建，我建议使用[ivy](http://ant.apache.org/ivy/)来管理依赖项。有一个[Eclipse 插件](http://ant.apache.org/ivy/ivyde/)可用。

# android - 三星 android 应用内代码不起作用

> ID：10851332
> 
> 赞同：1
> 
> 时间：2012-06-01T13:36:29.620
> 
> 标签：android, in-app

1 添加了 1 个 jar API 文件。这是示例代码的其余部分

我从[http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=9986&nacode=下载的](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=9986&nacode=)

我收到错误：

**`06-01 18:22:31.900: E/AndroidRuntime(24713): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.samsungapps.plasma.plasmatester/com.samsungapps.plasma.plasmatester.PlasmaTesterActivity}: java.lang.ClassNotFoundException: com.samsungapps.plasma.plasmatester.PlasmaTesterActivity in loader dalvik.system.PathClassLoader[/data/app/com.samsungapps.plasma.plasmatester-1.apk]`**

```
 public class PlasmaTesterActivity extends Activity implements PlasmaListener {
    private class ItemInformationListAdapter extends
            ArrayAdapter<ItemInformation> {

        public ItemInformationListAdapter(Context context,
                int textViewResourceId, ArrayList<ItemInformation> objects) {
            super(context, textViewResourceId, objects);

            __itemInformationList = objects;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater inflater = PlasmaTesterActivity.this
                        .getLayoutInflater();
                v = inflater.inflate(R.layout.row, null);
            }

            final ItemInformation pi = __itemInformationList.get(position);
            if (pi != null) {
                TextView tv1 = (TextView) v.findViewById(R.id.textView1);
                tv1.setText(pi.getItemName());
                TextView tv2 = (TextView) v.findViewById(R.id.textView2);
                tv2.setText(getPriceStringWithCurrencyUnit(pi));
                TextView tv3 = (TextView) v.findViewById(R.id.textView3);
                tv3.setText(pi.getItemDescription());
                Button b = (Button) v.findViewById(R.id.button1);
                b.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        __plasma.requestPurchaseItem(__transactionId++,
                                pi.getItemId());
                    }
                });
            }

            return v;
        }

        private ArrayList<ItemInformation> __itemInformationList = null;
    }

    private class PurchasedItemInformationListAdapter extends
            ArrayAdapter<PurchasedItemInformation> {

        public PurchasedItemInformationListAdapter(Context context,
                int textViewResourceId,
                ArrayList<PurchasedItemInformation> objects) {
            super(context, textViewResourceId, objects);

            __purchasedItemInformationList = objects;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater inflater = PlasmaTesterActivity.this
                        .getLayoutInflater();
                v = inflater.inflate(R.layout.row, null);
            }

            final PurchasedItemInformation pi = __purchasedItemInformationList
                    .get(position);
            if (pi != null) {
                TextView tv1 = (TextView) v.findViewById(R.id.textView1);
                tv1.setText(pi.getItemName());
                TextView tv2 = (TextView) v.findViewById(R.id.textView2);
                tv2.setText(getPriceStringWithCurrencyUnit(pi));
                TextView tv3 = (TextView) v.findViewById(R.id.textView3);
                tv3.setText(pi.getPaymentId());

                Button b = (Button) v.findViewById(R.id.button1);
                b.setVisibility(View.GONE);
            }

            return v;
        }

        private ArrayList<PurchasedItemInformation> __purchasedItemInformationList = null;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        __plasma = new Plasma(__ITEM_GROUP_ID, this);
        __plasma.setPlasmaListener(this);
        __plasma.setDeveloperFlag(1);

        ArrayList<ItemInformation> itemInformationList = new ArrayList<ItemInformation>();
        __itemInformationListAdapter = new ItemInformationListAdapter(this,
                R.layout.row, itemInformationList);

        ArrayList<PurchasedItemInformation> purchasedItemInformationList = new ArrayList<PurchasedItemInformation>();
        __purchasedItemInformationListAdapter = new PurchasedItemInformationListAdapter(
                this, R.layout.row, purchasedItemInformationList);

        ListView itemList = (ListView) findViewById(R.id.listView1);
        itemList.setAdapter(__itemInformationListAdapter);

        ListView purchaseList = (ListView) findViewById(R.id.listView2);
        purchaseList.setAdapter(__purchasedItemInformationListAdapter);

        Button getItemListButton = (Button) findViewById(R.id.button1);
        getItemListButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                __plasma.requestItemInformationList(__transactionId++, 1,
                        __ITEM_LIST_REQUEST_COUNT);
            }
        });

        Button getPurchaseListButton = (Button) findViewById(R.id.button2);
        getPurchaseListButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                __plasma.requestPurchasedItemInformationList(__transactionId++,
                        1, __ITEM_LIST_REQUEST_COUNT);
            }
        });
    }

    @Override
    public void onItemInformationListReceived(int transactionId,
            int statusCode, ArrayList<ItemInformation> itemInformationList) {
        switch (statusCode) {
        case Plasma.STATUS_CODE_SUCCESS:
            __itemInformationListAdapter.clear();
            for (int i = 0; i < itemInformationList.size(); i++) {
                ItemInformation itemInformation = itemInformationList.get(i);
                __itemInformationListAdapter.add(itemInformation);
            }
            __itemInformationListAdapter.notifyDataSetChanged();
            break;
        default:
            String errorMessage = "Failed to retrieve the item list";
            showErrorDialog(statusCode, errorMessage);
            break;
        }
    }

    @Override
    public void onPurchasedItemInformationListReceived(int transactionId,
            int statusCode,
            ArrayList<PurchasedItemInformation> purchasedItemInformationList) {
        switch (statusCode) {
        case Plasma.STATUS_CODE_SUCCESS:
            __purchasedItemInformationListAdapter.clear();
            for (int i = 0; i < purchasedItemInformationList.size(); i++) {
                PurchasedItemInformation purchasedItemInformation = purchasedItemInformationList
                        .get(i);
                __purchasedItemInformationListAdapter
                        .add(purchasedItemInformation);
            }
            __purchasedItemInformationListAdapter.notifyDataSetChanged();
            break;
        default:
            String errorMessage = "Failed to retrieve the purchase list";
            showErrorDialog(statusCode, errorMessage);
            break;
        }
    }

    @Override
    public void onPurchaseItemFinished(int transactionId, int statusCode,
            PurchasedItemInformation purchasedItemInformation) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

        switch (statusCode) {
        case Plasma.STATUS_CODE_SUCCESS:
            StringBuilder purchasedItemInformationStringBuilder = new StringBuilder();
            purchasedItemInformationStringBuilder.append("Item name: ");
            purchasedItemInformationStringBuilder
                    .append(purchasedItemInformation.getItemName());
            purchasedItemInformationStringBuilder.append(__CR_LF);
            purchasedItemInformationStringBuilder.append("Item ID: ");
            purchasedItemInformationStringBuilder
                    .append(purchasedItemInformation.getItemId());
            purchasedItemInformationStringBuilder.append(__CR_LF);
            purchasedItemInformationStringBuilder.append("Payment ID: ");
            purchasedItemInformationStringBuilder
                    .append(purchasedItemInformation.getPaymentId());
            purchasedItemInformationStringBuilder.append(__CR_LF);
            purchasedItemInformationStringBuilder.append("Purchase date: ");
            purchasedItemInformationStringBuilder
                    .append(purchasedItemInformation.getPurchaseDate());

            purchasedItemInformationStringBuilder.append(__CR_LF);
            purchasedItemInformationStringBuilder.append("Price: ");
            purchasedItemInformationStringBuilder
                    .append(getPriceStringWithCurrencyUnit(purchasedItemInformation));

            alertDialogBuilder.setTitle("Purchase information");
            alertDialogBuilder.setMessage(purchasedItemInformationStringBuilder
                    .toString());
            alertDialogBuilder.show();
            break;
        case Plasma.STATUS_CODE_CANCEL:
            break;
        default:
            String errorMessage = "Failed to purchase the item";
            showErrorDialog(statusCode, errorMessage);
            break;
        }
    }

    private void showErrorDialog(int errorCode, String errorMessage) {
        String errorMessageWithCode = String.format("%s (%d)", errorMessage,
                errorCode);

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
        alertDialogBuilder.setTitle("Error");
        alertDialogBuilder.setMessage(errorMessageWithCode);
        alertDialogBuilder.show();
    }

    private String getPriceStringWithCurrencyUnit(
            ItemInformation itemInformation) {
        String priceStringFormatString = null;
        if (itemInformation.getCurrencyUnitHasPenny()) {
            priceStringFormatString = "%.2f";
        } else {
            priceStringFormatString = "%.0f";
        }

        String priceString = String.format(priceStringFormatString,
                itemInformation.getItemPrice());

        StringBuffer priceStringWithCurrencyUnitBuffer = new StringBuffer();
        if (itemInformation.getCurrencyUnitPrecedes()) {
            priceStringWithCurrencyUnitBuffer.append(itemInformation
                    .getCurrencyUnit());
            priceStringWithCurrencyUnitBuffer.append(priceString);
        } else {
            priceStringWithCurrencyUnitBuffer.append(priceString);
            priceStringWithCurrencyUnitBuffer.append(itemInformation
                    .getCurrencyUnit());
        }

        return priceStringWithCurrencyUnitBuffer.toString();
    }

    private ItemInformationListAdapter __itemInformationListAdapter = null;
    private PurchasedItemInformationListAdapter __purchasedItemInformationListAdapter = null;
    private int __transactionId = 0;
    private Plasma __plasma = null;

    private static final String __ITEM_GROUP_ID = "100000008752";
    private static final int __ITEM_LIST_REQUEST_COUNT = 15;
    private static final String __CR_LF = "\n";
} 
```

和清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.samsungapps.plasma.plasmatester" android:versionCode="1"
    android:versionName="1.5">
    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".PlasmaTesterActivity" android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:42:40.623

你把罐子放在你的`libs`文件夹里了吗？（您说您添加了它，但没有添加它的位置/方式）。

他们最近更改了要求，现在需要进入`libs`我上面提到的文件夹。

# javascript - 一些输入的问题

> ID：10851333
> 
> 赞同：2
> 
> 时间：2012-06-01T13:36:32.497
> 
> 标签：javascript, html, input

有谁知道我怎样才能用 HTML 和 JS制作这个[http://prntscr.com/9z7pk ？](http://prntscr.com/9z7pk)我制作了这张图片，以便您可以更好地理解我的意思。我已经用 2 个多选输入完成了这项工作，但我不知道如何在 html 中插入以放置复选框。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:39:15.987

如果您发现自己的应用程序中有很多这些复杂的小部件，您应该研究像[extJS](http://www.sencha.com/products/extjs)或其他类似框架这样的框架。它将为您省去麻烦，并防止您重新发明一个已经被重新发明了太多次的轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:52:31.197

不幸的是，多选不会让您将复选框或其他任意内容注入菜单项 - 它依赖于操作系统原生的多选热键（通常是 shift 和 control）。

您可以尝试将项目设置为`ol`或`ul`列表，并将文档项目设置为`li`其中的元素。每当您将一个项目添加到右侧列表时，呈现一个新`li`元素并`<input type="hidden" />`使用逗号分隔的所选项目列表更新一个。

根据您希望交互的工作方式，您可以：

1.  如图所示实现添加/删除按钮，需要您自己在列表中实现多选。像 extJS（如 zi42 提到的）这样的小部件框架可以帮助解决这个问题。
2.  在左侧框中的所有项目旁边放置一个“添加”链接，在选择框中的所有项目旁边放置一个“删除”链接，必填项目除外。
3.  处理双框，而是将复选框放置在单个统一列表中的每个项目上，除了应该具有选中但禁用的复选框输入的必填项目。

# focus - 如何禁用 NSButton 焦点轮廓

> ID：10851340
> 
> 赞同：2
> 
> 时间：2012-06-01T13:36:57.497
> 
> 标签：focus, nsbutton, outline

当我的应用程序启动时，它有一个按钮。这个按钮最终得到了一个非常难看的蓝色轮廓。我怎样才能禁用它？（欢迎使用代码或 Interface Builder 解决方案。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T03:18:48.223

在界面生成器中单击按钮，然后在右侧面板中转到属性检查器。在属性面板的底部有一个名为“视图”的部分。该部分中的第一项是“对焦环”。将此值更改为“无”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-25T20:29:59.637

现在是 2016 年，这就是您在 Swift 2.2 中以编程方式执行此操作的方式：

```
view.focusRingType = .None 
```

# c# - NHibernate 可以将列映射到表吗？

> ID：10851353
> 
> 赞同：0
> 
> 时间：2012-06-01T13:37:40.230
> 
> 标签：c#, mysql, xml, nhibernate, nhibernate-mapping

我正在为数据库创建映射 xml 文件，但我有一个对象`LogObj`，我想根据`logid`传递的对象映射到不同的表（具有相同的模式）。

例如，该表`tblsystemlogs`包含一个列，该列`logstable`可以包含各种表名，例如`tbllogsprod`、`tbllogstest`、`tbllogsdev`。

查询是：`SELECT logstable FROM tblsystemlogs WHERE logid = {0};`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:11:34.400

您是否尝试过使用[Table Per Concrete Class](http://www.nhforge.org/doc/nh/en/index.html#inheritance-tableperconcrete)映射。

你会有某种基础抽象类——即。Log，以及三个具体实现 LogProduction、LogTest 和 LogDev。

SystemLog 类将具有[任何映射](http://www.nhforge.org/doc/nh/en/index.html#mapping-types-anymapping)的属性 Log ，并且 logstable 列将用作元列。

# jquery - 在 jquery 中将秒转换为日期，不能在 IE 中使用 new Date("秒数")

> ID：10851356
> 
> 赞同：0
> 
> 时间：2012-06-01T13:37:50.040
> 
> 标签：jquery, internet-explorer

我正在使用日历，但在 IE 中 eventStartDay = new Date(eventStart.getTime() + (24 * 60 * 60 * 1000*(days))); 不管用。我用函数 parseISO8601("yyyy-mm-dd") 替换 new Date 但我不知道如何仅使用秒来获取日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:53:45.103

你说过你得到`NaN`了结果。这告诉我们要么`days`是`NaN`，要么它`eventStart`的潜在价值是`NaN`。

我的猜测是您要求`Date`构造函数为您解析一个字符串，将结果放入 中`eventStart`，而不是检查它是否有效。*记录*为受支持的唯一字符串格式[`new Date(string)`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.3.2)是：

1.  无论`Date#toString`吐出什么（未定义，但必须在输入时接受），

2.  ISO-8601 的简化形式（在旧浏览器中不一定支持，在 ES5 中是新的）

...但实际上，所有现代浏览器（包括 IE）也将允许您使用 format `"yyyy/mm/dd"`。

因此，我怀疑您可能正在尝试解析您正在测试的 IE 版本不支持的日期字符串。例如，`"yyyy-mm-dd"`即使对`"yyyy/mm/dd"`.

所以我怀疑这是你遇到的问题，`eventStart`实际上是无效的，它污染了整个计算。修复它可能就像`.replace(/-/g, "/")`事先在字符串上做 a 一样简单。如果您的格式比 更复杂`yyyy-mm-dd`，您可能会查看[MomentJS](http://momentjs.com/)或类似的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:58:30.090

我发现所有浏览器都支持以下格式，所以我使用了其中的格式，这样它就不会在任何浏览器中崩溃。

```
var d = new Date(2011, 01, 07); // yyyy, mm-1, dd  
var d = new Date(2011, 01, 07, 11, 05, 00); // yyyy, mm-1, dd, hh, mm, ss  
var d = new Date("02/07/2011"); // "mm/dd/yyyy"  
var d = new Date("02/07/2011 11:05:00"); // "mm/dd/yyyy hh:mm:ss"  
var d = new Date(1297076700000); // milliseconds  
var d = new Date("Mon Feb 07 2011 11:05:00 GMT"); // ""Day Mon dd yyyy hh:mm:ss GMT/UTC 
```

# php - Google API - 每次都强制授予权限

> ID：10851358
> 
> 赞同：3
> 
> 时间：2012-06-01T13:38:03.497
> 
> 标签：php, google-api, google-analytics-api, google-api-client

我正在使用 Google API PHP 客户端。每次我尝试登录时，我都被迫授予应用程序权限。

下面是我的代码。我基本上是在访问 Google API for Analytics

```
require_once 'lib/apiClient.php';
require_once 'lib/contrib/apiAnalyticsService.php';
session_start();

$client = new apiClient();
$client->setApplicationName("Google Analytics");

$client->setClientId('7xxxx');
$client->setClientSecret('xxxx');
$client->setRedirectUri('xxxx');
$client->setDeveloperKey('xxxx');

$analytics = new apiAnalyticsService($client);

if (isset($_GET['logout'])) {
    unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
    $client->authenticate();
    $_SESSION['token'] = $client->getAccessToken();
    $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
    header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
    $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
    $profileId = getProfileIds($analytics);

    echo "<select>";
    foreach ($profileId as $profiles) {
        echo "<option value=\"" . $profiles['profileId'] . "\">" . $profiles['name'] .
            "</option>";
    }
    echo "</select>";

} else {
    $authUrl = $client->createAuthUrl();
    print "<a class='login' href='$authUrl'>Connect Me!</a>";
} 
```

我们可以将什么选项传递给**createAuthUrl()**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T13:39:52.857

通过设置

```
$client->setApprovalPrompt('auto'); 
```

如果帐户有权访问 api，它将自动重定向。默认情况下它**的“力量”**

# php - PHP 父级并在代码中使用它而不是在类本身中？

> ID：10851371
> 
> 赞同：0
> 
> 时间：2012-06-01T13:38:29.510
> 
> 标签：php, oop, parent, extends

我有 2 节课，比如

```
class A {
     public function B () {
         return 'b';
     }
}

class C extends A {
     public function D () {
         return 'd';
     }
} 
```

我知道用`function b`在`class C`我做的，

```
class A {
     public function B () {
         return 'b';
     }
}

class C extends A {
     public function D () {
         $b = parent::B();
         return 'd';
     }
} 
```

但是当我启动对象时呢？我必须做吗（有效）

```
$c = new C();
$b = $c -> b(); 
```

还是我还必须使用这个`parent`关键字？

我试着做，

```
$c = new C();
$b = $c -> parent::B(); 
```

但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:42:34.357

您不需要`parent`第二个示例中的关键字，因为类`C`extends `A`，它继承了它的所有成员函数和变量。所以，`$c->b();`完全有效。这是关键字文档的[链接，其中指出：](http://php.net/manual/en/keyword.extends.php)`extends`

> 通常，您需要具有与另一个现有类相似的变量和函数的类。事实上，定义一个可以在所有项目中使用的通用类并根据每个特定项目的需要调整该类是一种很好的做法。为了促进这一点，类可以是其他类的扩展。**扩展或派生类具有基类的所有变量和函数**（这称为“继承”，尽管事实上没有人死亡）以及您在扩展定义中添加的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:44:09.127

当类`C`从 扩展时`A`，您可以使用它来达到功能`B()`：

```
class C extends A {
     public function D () {
         $b = $this->B();
         return 'd';
     }
} 
```

同样，从实例化的类`C`中，您应该按照您提到的使用`$c->B()`. 该`parent::`构造仅用于类方法内部；它不能在类声明之外使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:40:47.480

使用有效的。

当实例继承函数时，它们可以直接从该对象调用。调用者不需要知道`b`是某个函数`C`还是`c`从另一个类继承的。

# mysql - activerecord：不使用事务更新对象属性

> ID：10851376
> 
> 赞同：0
> 
> 时间：2012-06-01T13:38:57.263
> 
> 标签：mysql, ruby-on-rails, activerecord, transactions

这是我的代码：

```
class UserTopicVisit < ActiveRecord::Base
  belongs_to :user
  belongs_to :topic

  def self.log_last_user_topic_visit(user_id, topic_id)
    visit = UserTopicVisit.find_or_create_by_user_id_and_topic_id(user_id, topic_id)
    visit.update_attributes!(:last_visit => Time.now.to_formatted_s(:db))
  end
end 
```

这是不言自明的。

问题是：我需要能够通过简单的 mysql 查询在没有事务的情况下更新对象属性。我怎样才能使用 activerecord 来完成呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:56:24.627

也许您正在寻找[更新列](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)

> 更新对象的单个属性，而不调用 save
> 
> *   验证被跳过。
> *   回调被跳过。
> *   如果该列可用，updated_at/updated_on 列不会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T18:53:32.727

`update_attributes`使用事务，但奇怪的是，`save`不使用事务，所以如果你想要回调和所有没有事务的爵士乐，你可以这样做：

```
visit.last_visit = Time.now.to_formatted_s(:db)
visit.save! 
```

在引擎盖下，`update_attributes`实际上只是调用`attributes=`then `save`。

# linux - 是否有必要使用 deconf 来获取 debian 包中的用户输入

> ID：10851380
> 
> 赞同：1
> 
> 时间：2012-06-01T13:39:04.407
> 
> 标签：linux, ubuntu, debian, packaging, debconf

我正在创建一个示例 debian 包，我需要在其中获取用户输入，这是一个数字，通常所有用户输入都是在 postinst 脚本中获取的，如果我使用简单的读取命令来获取我想要的内容，这对我来说很简单，

必须使用 debconf，例如创建模板然后配置脚本并使用 postinst 中的 db_get，如[deconf 教程](http://www.fifi.org/doc/debconf-doc/tutorial.html)

谁能告诉我为什么要使用上述复杂过程而不是使用简单的读取命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:07:44.110

没有要求，但 debconf 为您做了很多工作，如果您不利用它，您将不得不手动完成这些工作。例如：

*   您必须手动管理问题的优先级，以便仅在用户要求提示您提供问题优先级或更高级别的信息时才提出问题，否则提供默认值。
*   您将必须弄清楚软件包是否正在被初始安装、重新安装或升级，这样您就不会在升级过程中提出问题（用户可能已经在安装过程中回答了这个问题）。
*   您将必须弄清楚什么样的用户界面可用，并使用 readline、curses 或其他方法进行提示，具体取决于系统的配置方式和可用的内容。

你还确定要拒绝 debconf 吗？

# java - 获取用户输入的计算器程序

> ID：10851390
> 
> 赞同：1
> 
> 时间：2012-06-01T13:39:41.140
> 
> 标签：java, swing

为了练习，我正在尝试创建一个功能齐全的计算器。我在下面复制了我的代码的 ActionListener 类。我觉得我的这种获取用户输入的方法，将其存储为整数/双精度并不能很好地工作，因为它太基本并且不适用于所有情况。我想知道是否有人可以帮助我找出一种方法来构建我的代码，让用户输入两个数字和一个符号，并基本上创建一个功能齐全的 GUI 计算器。我的问题是从我的 JButton 获取用户输入，以像计算器一样的方式存储为数字（按 1 两次 == 11）并将其用于以后的计算。

我很欣赏这方面的任何建议。

```
private class TheHandler implements ActionListener{
            public void actionPerformed(ActionEvent event){
                while(equals!=event.getSource())
                    if(one==event.getSource()){
                       result.setText("1");
                       num1=1;
                    }
                    else if(two==event.getSource()){
                       result.setText("2");

                    }
                    else if(three==event.getSource()){
                       result.setText("3");
                    }
                    else if(four==event.getSource()){
                       result.setText("4");
                    }
                    else if(five==event.getSource()){
                       result.setText("5");
                    }
                    else if(six==event.getSource()){
                       result.setText("6");
                    }
                    else if(seven==event.getSource()){
                       result.setText("7");
                    }
                    else if(eight==event.getSource()){
                       result.setText("8");
                    }
                    else if(nine==event.getSource()){
                        result.setText("9");
                    }
                    else if(zero==event.getSource()){
                        result.setText("0");
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:49:11.347

您应该完全删除**while**。

我建议使用数字变量，例如

```
long num = 0;
int digit; 
```

每个事件应该只设置数字

```
 ...
 else if(nine==event.getSource()){
     digit = 9;
 } else if(zero==event.getSource()){
     digit = 0;
 }
...
num = num * 10 + digit;
...
result.setText(Long.toString(num)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:47:05.317

一个类成员变量如何存储显示的当前状态并将其用于设置文本？

```
private class TheHandler implements ActionListener{
    String display = "";
    public void actionPerformed(ActionEvent event){
        while(equals!=event.getSource()){
            if(one==event.getSource()){
                display=display+"1";

            }
            ..... 
        }
        result.setText(display);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:40:03.603

您可以更清楚地将每个按钮与一个数字相关联，如下所示：

```
private class TheHandler implements ActionListener{
  private Map<Object, String> numbers = new HashMap<Object, String>();
  {
    numbers.put(zero, "0");
    numbers.put(one, "1");
    ...
  }
  public void actionPerformed(ActionEvent event){
    Object source = event.getSource();
    while(equals != source){
      String number = numbers.get(source);
      if (number != null){
        result.setText(number);
      }
    }
  }
} 
```

# ruby-on-rails - Formtastic远程形式

> ID：10851391
> 
> 赞同：0
> 
> 时间：2012-06-01T13:39:46.257
> 
> 标签：ruby-on-rails, formtastic, remote-forms

我正在使用 Formtastic，我正在尝试设置一个远程表单来访问编辑操作，而无需离开当前页面并转到 /1/edit 类型的 url。

我的表格如下：

```
<%= semantic_form_for shipdr_website, :url => edit_shipdr_website_path(shipdr_website), :html => { :method => :post }, :remote => true do |f| %>
  <%= f.input :name, :input_html => { :value => shipdr_website.name } %>
  <%= f.input :url, :input_html => { :value => shipdr_website.url } %>
  <%= f.input :api_key, :input_html => { :value => shipdr_website.api_key }  %>
  <%= f.actions %>
<% end %> 
```

该视图位于 shipdr/dash/websites 下，dash 视图的控制器没有编辑操作，因此我需要使用远程表单来访问不同控制器的编辑方法。

表单显示并且页面加载时没有显示任何错误，但是，当我单击“创建网站”按钮时，什么也没有发生。如果我删除了`remote => true`第 1 行的部分，那么`No route matches [POST] "/shipdr/websites/14/edit"`当我单击按钮时就会得到。

这是我使用 rake 路线的路线：

```
 shipdr_dashboard_dashboard        /shipdr/dashboard/dashboard(.:format)       {:controller=>"shipdr/dashboard", :action=>"dashboard"}
            shipdr_websites GET    /shipdr/websites(.:format)                  {:action=>"index", :controller=>"shipdr/websites"}
                             POST   /shipdr/websites(.:format)                  {:action=>"create", :controller=>"shipdr/websites"}
         new_shipdr_website GET    /shipdr/websites/new(.:format)              {:action=>"new", :controller=>"shipdr/websites"}
        edit_shipdr_website GET    /shipdr/websites/:id/edit(.:format)         {:action=>"edit", :controller=>"shipdr/websites"}
             shipdr_website GET    /shipdr/websites/:id(.:format)              {:action=>"show", :controller=>"shipdr/websites"}
                             PUT    /shipdr/websites/:id(.:format)              {:action=>"update", :controller=>"shipdr/websites"}
                             DELETE /shipdr/websites/:id(.:format)              {:action=>"destroy", :controller=>"shipdr/websites"}
            shipdr_carriers GET    /shipdr/carriers(.:format)                  {:action=>"index", :controller=>"shipdr/carriers"}
                             POST   /shipdr/carriers(.:format)                  {:action=>"create", :controller=>"shipdr/carriers"}
         new_shipdr_carrier GET    /shipdr/carriers/new(.:format)              {:action=>"new", :controller=>"shipdr/carriers"}
        edit_shipdr_carrier GET    /shipdr/carriers/:id/edit(.:format)         {:action=>"edit", :controller=>"shipdr/carriers"}
             shipdr_carrier GET    /shipdr/carriers/:id(.:format)              {:action=>"show", :controller=>"shipdr/carriers"}
                             PUT    /shipdr/carriers/:id(.:format)              {:action=>"update", :controller=>"shipdr/carriers"}
                             DELETE /shipdr/carriers/:id(.:format)              {:action=>"destroy", :controller=>"shipdr/carriers"}
           shipdr_countries GET    /shipdr/countries(.:format)                 {:action=>"index", :controller=>"shipdr/countries"}
                             POST   /shipdr/countries(.:format)                 {:action=>"create", :controller=>"shipdr/countries"}
         new_shipdr_country GET    /shipdr/countries/new(.:format)             {:action=>"new", :controller=>"shipdr/countries"}
        edit_shipdr_country GET    /shipdr/countries/:id/edit(.:format)        {:action=>"edit", :controller=>"shipdr/countries"}
             shipdr_country GET    /shipdr/countries/:id(.:format)             {:action=>"show", :controller=>"shipdr/countries"}
                             PUT    /shipdr/countries/:id(.:format)             {:action=>"update", :controller=>"shipdr/countries"}
                             DELETE /shipdr/countries/:id(.:format)             {:action=>"destroy", :controller=>"shipdr/countries"}
     shipdr_shipping_groups GET    /shipdr/shipping_groups(.:format)           {:action=>"index", :controller=>"shipdr/shipping_groups"}
                             POST   /shipdr/shipping_groups(.:format)           {:action=>"create", :controller=>"shipdr/shipping_groups"}
  new_shipdr_shipping_group GET    /shipdr/shipping_groups/new(.:format)       {:action=>"new", :controller=>"shipdr/shipping_groups"}
 edit_shipdr_shipping_group GET    /shipdr/shipping_groups/:id/edit(.:format)  {:action=>"edit", :controller=>"shipdr/shipping_groups"}
      shipdr_shipping_group GET    /shipdr/shipping_groups/:id(.:format)       {:action=>"show", :controller=>"shipdr/shipping_groups"}
                             PUT    /shipdr/shipping_groups/:id(.:format)       {:action=>"update", :controller=>"shipdr/shipping_groups"}
                             DELETE /shipdr/shipping_groups/:id(.:format)       {:action=>"destroy", :controller=>"shipdr/shipping_groups"}
      shipdr_shipping_rules GET    /shipdr/shipping_rules(.:format)            {:action=>"index", :controller=>"shipdr/shipping_rules"}
                             POST   /shipdr/shipping_rules(.:format)            {:action=>"create", :controller=>"shipdr/shipping_rules"}
   new_shipdr_shipping_rule GET    /shipdr/shipping_rules/new(.:format)        {:action=>"new", :controller=>"shipdr/shipping_rules"}
  edit_shipdr_shipping_rule GET    /shipdr/shipping_rules/:id/edit(.:format)   {:action=>"edit", :controller=>"shipdr/shipping_rules"}
       shipdr_shipping_rule GET    /shipdr/shipping_rules/:id(.:format)        {:action=>"show", :controller=>"shipdr/shipping_rules"}
                             PUT    /shipdr/shipping_rules/:id(.:format)        {:action=>"update", :controller=>"shipdr/shipping_rules"}
                             DELETE /shipdr/shipping_rules/:id(.:format)        {:action=>"destroy", :controller=>"shipdr/shipping_rules"}
    shipdr_shipping_methods GET    /shipdr/shipping_methods(.:format)          {:action=>"index", :controller=>"shipdr/shipping_methods"}
                             POST   /shipdr/shipping_methods(.:format)          {:action=>"create", :controller=>"shipdr/shipping_methods"}
 new_shipdr_shipping_method GET    /shipdr/shipping_methods/new(.:format)      {:action=>"new", :controller=>"shipdr/shipping_methods"}
edit_shipdr_shipping_method GET    /shipdr/shipping_methods/:id/edit(.:format) {:action=>"edit", :controller=>"shipdr/shipping_methods"}
     shipdr_shipping_method GET    /shipdr/shipping_methods/:id(.:format)      {:action=>"show", :controller=>"shipdr/shipping_methods"}
                             PUT    /shipdr/shipping_methods/:id(.:format)      {:action=>"update", :controller=>"shipdr/shipping_methods"}
                             DELETE /shipdr/shipping_methods/:id(.:format)      {:action=>"destroy", :controller=>"shipdr/shipping_methods"}
        shipdr_ship_filters GET    /shipdr/ship_filters(.:format)              {:action=>"index", :controller=>"shipdr/ship_filters"}
                             POST   /shipdr/ship_filters(.:format)              {:action=>"create", :controller=>"shipdr/ship_filters"}
     new_shipdr_ship_filter GET    /shipdr/ship_filters/new(.:format)          {:action=>"new", :controller=>"shipdr/ship_filters"}
    edit_shipdr_ship_filter GET    /shipdr/ship_filters/:id/edit(.:format)     {:action=>"edit", :controller=>"shipdr/ship_filters"}
         shipdr_ship_filter GET    /shipdr/ship_filters/:id(.:format)          {:action=>"show", :controller=>"shipdr/ship_filters"}
                             PUT    /shipdr/ship_filters/:id(.:format)          {:action=>"update", :controller=>"shipdr/ship_filters"}
                             DELETE /shipdr/ship_filters/:id(.:format)          {:action=>"destroy", :controller=>"shipdr/ship_filters"}
               shipdr_zones GET    /shipdr/zones(.:format)                     {:action=>"index", :controller=>"shipdr/zones"}
                             POST   /shipdr/zones(.:format)                     {:action=>"create", :controller=>"shipdr/zones"}
            new_shipdr_zone GET    /shipdr/zones/new(.:format)                 {:action=>"new", :controller=>"shipdr/zones"}
           edit_shipdr_zone GET    /shipdr/zones/:id/edit(.:format)            {:action=>"edit", :controller=>"shipdr/zones"}
                shipdr_zone GET    /shipdr/zones/:id(.:format)                 {:action=>"show", :controller=>"shipdr/zones"}
                             PUT    /shipdr/zones/:id(.:format)                 {:action=>"update", :controller=>"shipdr/zones"}
                             DELETE /shipdr/zones/:id(.:format)                 {:action=>"destroy", :controller=>"shipdr/zones"}
      new_admin_user_session GET    /admin_users/sign_in(.:format)               {:action=>"new", :controller=>"devise/sessions"}
          admin_user_session POST   /admin_users/sign_in(.:format)               {:action=>"create", :controller=>"devise/sessions"}
  destroy_admin_user_session DELETE /admin_users/sign_out(.:format)              {:action=>"destroy", :controller=>"devise/sessions"}
         admin_user_password POST   /admin_users/password(.:format)              {:action=>"create", :controller=>"devise/passwords"}
     new_admin_user_password GET    /admin_users/password/new(.:format)          {:action=>"new", :controller=>"devise/passwords"}
    edit_admin_user_password GET    /admin_users/password/edit(.:format)         {:action=>"edit", :controller=>"devise/passwords"}
                             PUT    /admin_users/password(.:format)              {:action=>"update", :controller=>"devise/passwords"}
            new_user_session GET    /users/sign_in(.:format)                     {:action=>"new", :controller=>"devise/sessions"}
                user_session POST   /users/sign_in(.:format)                     {:action=>"create", :controller=>"devise/sessions"}
        destroy_user_session DELETE /users/sign_out(.:format)                    {:action=>"destroy", :controller=>"devise/sessions"}
      user_omniauth_callback        /users/auth/:action/callback(.:format)       {:action=>/google/, :controller=>"omniauth/omniauth_callbacks"}
               user_password POST   /users/password(.:format)                    {:action=>"create", :controller=>"devise/passwords"}
           new_user_password GET    /users/password/new(.:format)                {:action=>"new", :controller=>"devise/passwords"}
          edit_user_password GET    /users/password/edit(.:format)               {:action=>"edit", :controller=>"devise/passwords"}
                             PUT    /users/password(.:format)                    {:action=>"update", :controller=>"devise/passwords"}
    cancel_user_registration GET    /users/cancel(.:format)                      {:action=>"cancel", :controller=>"devise/registrations"}
           user_registration POST   /users(.:format)                             {:action=>"create", :controller=>"devise/registrations"}
       new_user_registration GET    /users/sign_up(.:format)                     {:action=>"new", :controller=>"devise/registrations"}
      edit_user_registration GET    /users/edit(.:format)                        {:action=>"edit", :controller=>"devise/registrations"}
                             PUT    /users(.:format)                             {:action=>"update", :controller=>"devise/registrations"}
                             DELETE /users(.:format)                             {:action=>"destroy", :controller=>"devise/registrations"}
                       users GET    /users(.:format)                             {:action=>"index", :controller=>"users"}
                             POST   /users(.:format)                             {:action=>"create", :controller=>"users"}
                    new_user GET    /users/new(.:format)                         {:action=>"new", :controller=>"users"}
                   edit_user GET    /users/:id/edit(.:format)                    {:action=>"edit", :controller=>"users"}
                        user GET    /users/:id(.:format)                         {:action=>"show", :controller=>"users"}
                             PUT    /users/:id(.:format)                         {:action=>"update", :controller=>"users"}
                             DELETE /users/:id(.:format)                         {:action=>"destroy", :controller=>"users"}
               pages_contact GET    /pages/contact(.:format)                     {:controller=>"pages", :action=>"contact"}
               pages_pricing GET    /pages/pricing(.:format)                     {:controller=>"pages", :action=>"pricing"}
              pages_features GET    /pages/features(.:format)                    {:controller=>"pages", :action=>"features"}
            pages_howitworks GET    /pages/howitworks(.:format)                  {:controller=>"pages", :action=>"howitworks"}
                  pages_home GET    /pages/home(.:format)                        {:controller=>"pages", :action=>"home"}
                    settings        /settings(.:format)                          {:controller=>"pages", :action=>"settings"}
                             GET    /shipdr/dashboard/dashboard(.:format)       {:controller=>"shipdr/dashboard", :action=>"dashboard"}
     shipdr_dashboard_rules GET    /shipdr/dashboard/rules(.:format)           {:controller=>"shipdr/dashboard", :action=>"rules"}
      shipdr_dashboard_ship GET    /shipdr/dashboard/ship(.:format)            {:controller=>"shipdr/dashboard", :action=>"ship"}
  shipdr_dashboard_validate GET    /shipdr/dashboard/validate(.:format)        {:controller=>"shipdr/dashboard", :action=>"validate"}
 shipdr_dashboard_analytics GET    /shipdr/dashboard/analytics(.:format)       {:controller=>"shipdr/dashboard", :action=>"analytics"}
  shipdr_dashboard_carriers GET    /shipdr/dashboard/carriers(.:format)        {:controller=>"shipdr/dashboard", :action=>"carriers"}
  shipdr_dashboard_websites GET    /shipdr/dashboard/websites(.:format)        {:controller=>"shipdr/dashboard", :action=>"websites"}
                        root        /                                            {:controller=>"pages", :action=>"home"} 
```

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:56:00.753

你检查过你的 routes.rb 文件吗？给我们耙路线信息

您的控制器设置为 ajax 请求吗？

你有必要的 javascript 来作用于语义形式吗？

这些是要让您的表格正常工作的事情。

查看[https://gist.github.com/548387?file=tickets_controller.rb](https://gist.github.com/548387?file=tickets_controller.rb)了解您需要的内容。

# c++ - 如何为具有位域的结构赋值？

> ID：10851396
> 
> 赞同：10
> 
> 时间：2012-06-01T13:40:17.073
> 
> 标签：c++, bit-fields

我有一个带有位域（总共 32 位宽度）的结构，并且我有一个 32 位变量。当我尝试将变量值分配给我的结构时，出现错误：

> 错误：请求从“uint32_t {aka unsigned int}”转换为非标量类型“main()::CPUID”。

```
struct CPUIDregs
    {
       uint32_t EAXBuf;
    };
CPUIDregs CPUIDregsoutput;   

int main () {

 struct CPUID          
    {
          uint32_t   Stepping         : 4;         
          uint32_t   Model            : 4;        
          uint32_t   FamilyID         : 4;        
          uint32_t   Type             : 2;        
          uint32_t   Reserved1        : 2;         
          uint32_t   ExtendedModel    : 4;         
          uint32_t   ExtendedFamilyID : 8;          
          uint32_t   Reserved2        : 4;          
    };

    CPUID CPUIDoutput = CPUIDregsoutput.EAXBuf; 
```

你知道如何以最短的方式做到这一点吗？谢谢

PS当然我在实际代码中有更合适的EAX值，但我想它不会影响这里。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-01T14:27:15.517

您永远不应该依赖编译器如何在内存中布置您的结构。有很多方法可以通过单个作业完成您想做的事情，但我既不会推荐也不会告诉您。

完成任务的最佳方法如下：

```
static inline void to_id(struct CPUid *id, uint32_t value)
{
    id->Stepping         = value & 0xf;
    id->Model            = value >> 4 & 0xf;
    id->FamilyID         = value >> 8 & 0xf;
    id->Type             = value >> 12 & 0x3;
    id->Reserved1        = value >> 14 & 0x3;
    id->ExtendedModel    = value >> 16 & 0xf;
    id->ExtendedFamilyID = value >> 20 & 0xff;
    id->Reserved2        = value >> 28 & 0xf;
} 
```

而相反

```
static inline uint32_t from_id(struct CPUid *id)
{
    return id->Stepping
         | id->Model << 4
         | id->FamilyID << 8
         | id->Type << 12
         | id->Reserved1 << 14
         | id->ExtendedModel << 16
         | id->ExtendedFamilyID << 20
         | id->Reserved2 << 28;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-08T20:12:53.957

使用工会。

```
union foo {
    struct {
        uint8_t a : 4;
        uint8_t b : 4;
        uint8_t c : 4;
        uint8_t d : 4;
        uint16_t e;
    };
    uint32_t allfields;
};

int main(void) {
    union foo a;

    a.allfields = 0;
    a.b = 3;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T10:32:27.367

如果有人感兴趣，我有一个更好的解决方案来解决我自己的问题：

```
*(reinterpret_cast<uint32_t *> (&CPUIDoutput)) = CPUIDregsoutput.EAXBuf; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T13:43:51.410

这些是结构成员，因此您需要直接分配它们，或者确保您的分配的 RHS 是 type 的值`CPUID`。不知道为什么您希望能够从整数分配给结构。

结构包含位域的事实，并且位的总和恰好与您尝试分配的整数中的位数相同，这毫无意义。出于分配目的，它们仍然不是兼容的类型。

如果这太模糊，请考虑显示更多/更好的代码。

# javascript - 如何使用 JavaScript 将焦点设置在隐藏的文本框字段上？

> ID：10851402
> 
> 赞同：28
> 
> 时间：2012-06-01T13:40:51.353
> 
> 标签：javascript, focus

如何将焦点设置在隐藏的文本框元素上？

**我试过这个：**

```
document.getElementById("textControl_fd_component_JSON_TASK_NStext64").focus(); 
```

但是，这在这里不起作用。在这种情况下作为`alert(document.activeElement.id);`回报。`null`

如果我使该字段可见，则上面的脚本可以正常工作。有什么想法我弄错了吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-01T14:06:48.257

如果您确实需要这样做，请使框透明，而不是隐藏：

```
opacity:0;
filter:alpha(opacity=0); 
```

或者，如果您想确保用户不会意外单击它，只需将输入放在 div 中

```
width: 0;
overflow: hidden; 
```

**但是**，肯定有更好的方法来做你想做的事，也许是使用`keydown`/`keypress`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:47:47.977

我认为这是不允许的，至少在 IE 中是这样。我从[jQuery 的 focus page](http://api.jquery.com/focus/)获得了这些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T15:23:22.760

如果您需要解决方法并且无法更改不透明度属性，您可以添加一些 js。

```
/* bind a click handler to your trigger */
jQuery('#your-search-trigger').on('click', function searchIconEventhandler (event) {
    /* in case your field is fading, cheat a little (check css transition duration) */
    setTimeout ( function timeoutFunction () {
        /* show the cursor */
        jQuery('#your-search-input').focus();
    }, 100);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-16T23:11:50.117

使用 Apsillers 的回答，我对同样情况的设置涉及：

1.  具有位置的父 div:relative;
2.  子表单元素位置：绝对；z-索引：0；不透明度：0；过滤器：阿尔法（不透明度= 0）；
3.  第二个子元素位置：绝对；z-index：（值> 0）（定位以覆盖透明输入）。

鉴于所提出的问题，Aspillers 的答案是正确的，但我想举一个实际的例子来说明什么时候这是必要的。

具体来说，如果您使用任何类型的脚本/插件来进行“花式”输入（即单选/检查元素，选择元素），则可以隐藏表单元素。但是如果你的脚本或插件写得不好，它可能会消除键盘的可访问性。通过允许所有元素具有焦点来保持表单的流动可以为网站用户省去很多麻烦。

# shell - 将较大的文件拆分为较小的文件：有关“拆分”的帮助

> ID：10851405
> 
> 赞同：1
> 
> 时间：2012-06-01T13:41:14.297
> 
> 标签：shell, awk, split, gawk

我有一个大文件（2GB），看起来像这样：

```
 >10GS_A
  YTVVYFPVRGRCAALRMLLADQGQSWKEEVVTVETWQEGSLKASCLYGQLPKFQDGD
  LTLYQSNTILRHLGRTLGLYGKDQQEAALVDMVNDGVEDLRCKYISLIYTNYEAGKD
  DYVKALPGQLKPFETLLSQNQGGKTFIVGDQISFADYNLLDLLLIHEVLAPGCLDAFP
  LLSAYVGRLSARPKLKAFLASPEYVNLPINGNGKQ 
  >11BA_A
  KESAAAKFERQHMDSGNSPSSSSNYCNLMMCCRKMTQGKCKPVNTFVHESLADVKAV
  CSQKKVTCKNGQTNCYQSKSTMRITDCRETGSSKYPNCAYKTTQVEKHIIVACGGKP
  SVPVHFDASV
  >11BG_A
  KESAAKFERQHMDSGNSPSSSSNYCNLMMCCRKMTQGKCKPVNTFVHESLADVKAVCSQKKVT
  CKNGQTNCYQSKSTMRITDCRETGSSKYPNCAYKTTQVEKHIIVACGGKPSVPVHFDASV
  >121P_A
  MTEYKLVVVGAGGVGKSALTIQLIQNHFVDEYDPTIEDSYRKQVVIDGETCLLDILDTAGQEEYSAMRD 
  QYMRTGEGFLCVFAINNTKSFEDIHQYREQIKRVKDSDDVPMVLVGNKCDLAARTVESRQAQDLARSYG
  IPYIETSAKTRQGVEDAFYTLVREIRQH 
```

我想将此文件拆分为基于分隔符“>”的较小文件，在这种情况下，生成了 4 个包含以下文本并以下列方式命名的文件：

```
10gs_A.txt
11ba_A.txt
11bg_A.txt
121p_A.txt 
```

并且它们包含以下内容：10gs_A.txt

```
>10GS_A
YTVVYFPVRGRCAALRMLLADQGQSWKEEVVTVETWQEGSLKASCLYGQLPKFQDGD
LTLYQSNTILRHLGRTLGLYGKDQQEAALVDMVNDGVEDLRCKYISLIYTNYEAGKD
DYVKALPGQLKPFETLLSQNQGGKTFIVGDQISFADYNLLDLLLIHEVLAPGCLDAFP
LLSAYVGRLSARPKLKAFLASPEYVNLPINGNGKQ 
```

11ba_A.txt

```
>11BA_A
KESAAAKFERQHMDSGNSPSSSSNYCNLMMCCRKMTQGKCKPVNTFVHESLADVKAV
CSQKKVTCKNGQTNCYQSKSTMRITDCRETGSSKYPNCAYKTTQVEKHIIVACGGKP
SVPVHFDASV 
```

... 等等。我知道在 linux 中使用 split 命令分隔较大的文本文件，但是它将创建的文件命名为 temp00、temp01、temp03。有没有办法拆分这个较大的文件并根据我的需要命名文件？实现此目的的拆分功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:07:21.767

如何使用 awk 脚本拆分 mybigfile

分离器.awk

```
BEGIN {outname = "noname.txt"}

/^>/  { outname = substr($0,2,40) ".txt"
        next }

      { print > outname } 
```

如果要在输出中使用分隔符行，请使用以下命令：

分离器.awk

```
BEGIN {outname = "noname.txt"}

/^>/  { outname = substr($0,2,40) ".txt"}

      { print > outname } 
```

然后运行这个文件

```
awk -f splitter.awk mybigfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T06:33:05.473

有了`gawk`你可以做 -

```
gawk -v RS='>' 'NF{ print RS$0 > $1".txt" }' InputFile 
```

# c# - 用 DirectX C# 画一条线

> ID：10851406
> 
> 赞同：0
> 
> 时间：2012-06-01T13:41:15.107
> 
> 标签：c#, directx-9

我正在尝试使用 DirectX9 绘制一条简单的线并遇到以下情况：

当代码到达该行时：

```
Device device = new Device( some example code I'v found); 
```

表单的位置以周期性的方式变化，这意味着每次程序执行时。我看到（在调试模式下）表单位置属性在第 6 次执行时发生变化并返回其原始值。为什么？

在调整代码大小时，抛出一个指向该行的一般异常

```
device.DrawUserPrimitive(..) 
```

# vb.net - vb.net 读取 txtfile 并导航到该站点（自己的浏览器开发）

> ID：10851407
> 
> 赞同：-2
> 
> 时间：2012-06-01T13:41:18.033
> 
> 标签：vb.net, textbox, read-write

我已经构建了自己的浏览器 9see 附加代码）但是我想修改代码，以便 textbox1 在开始时读取一个 txt 文件并使用该文本文件的内容导航到与该文本中的文本具有相同值的 URL文件。所有这一切都应该在 Web 浏览器表单启动时发生。

文本文件内容的示例是[http://www.testsite.com](http://www.testsite.com)

代码如下：

```
 #Region "Webbrowser navigation"

    Private Sub Go()
        WebBrowser1.Navigate(TextBox1.Text)

    End Sub

    Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
        Go()
    End Sub

    Private Sub TextBox1_keydown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
        If e.KeyCode = Keys.Enter Then
            Go()
        End If
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        WebBrowser1.GoBack()
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        WebBrowser1.GoForward()
    End Sub

    Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        WebBrowser1.Stop()
    End Sub

#End Region 
```

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:08:58.680

在表单的 Load 事件的事件处理程序中，执行以下操作：

```
TextBox1.Text = File.ReadAllText("StartUrl.txt")
Go() 
```

但是，除非您有充分的理由使用文本文件，否则我建议您使用更灵活和更标准的东西，例如 XML。如果您不介意使用标准的 app.config 文件，只需将其中一个添加到您的项目中，您就可以使用 ConfigurationManager 类来读取设置。

# php - WordPress 数据库中的附加表

> ID：10851408
> 
> 赞同：0
> 
> 时间：2012-06-01T13:41:24.103
> 
> 标签：php, mysql, database, wordpress

我正在使用 WordPress，我想为我的网站开发更多服务。我正在考虑在 WordPress 数据库中创建新表。这种方法会奏效吗？我不希望 WordPress 在更新等时删除我的表。

这些服务将位于单独的页面上，它们不会是 WordPress 插件。我只想使用 WordPress 数据库来存储我的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:45:38.530

正如 WP Tech Ninja（Samuel Wood，又名 Otto）在wordpress.org 上的[这篇文章](http://wordpress.org/support/topic/add-tables-to-wp-database)中所引用的，您可以安全地将表格添加到 Wordpress 数据库中，升级或维护不应该成为问题。

> 添加新表很好，几个插件就是这样做的。Twitter 工具，其中之一。
> 
> [...]
> 
> 升级可以修改数据库，但如果您完全使用其他表，则 WordPress 不会触及该表。它只查看自己的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:57:46.507

不要这样做。

几年前，我实际上有机会与 Matt Mullenweg 交谈，他建议避免使用任何像瘟疫一样添加表格的插件，原因如下：

使用选项表（`wp_options`或`wp_N_options`用于多站点）来存储您的数据——这就是它们的用途。它们基本上是键/值，因此您可以在其中存储几乎任何您想要的东西。通过这样做，您还可以获得能够使用 Wordpress api 的简单调用来读取和写入数据的好处，因此您不必为编写数据处理程序而烦恼。

删除插件时的自动清理也容易得多，因为您可以再次使用 API 并为您处理这些函数（是的，有钩子可以告诉您何时发生这种情况）。手动删除表格很痛苦，并且在您的插件被卸载时很难做到。

# java - 多个搜索结果，一个 GUI

> ID：10851410
> 
> 赞同：0
> 
> 时间：2012-06-01T13:41:30.110
> 
> 标签：java, arrays, search

我正在搜索一个数组并将用户输入的日期与存储在数组中的日期进行匹配。

该代码运行良好，可以完美地找到日期或给出适当的错误消息，唯一的问题是由于我的程序的性质，它可能会导致多个记录具有相同的日期。

现在，我只有一个表单以这种格式显示每个搜索结果：

lbl txtField lbl txtField

等等，如果日期匹配，它将在文本字段中显示匹配记录的数据的 REST。

现在，如何显示与日期匹配的每条记录的数据？

我的代码：

```
 public void searchDay() {
        String idInputString  = JOptionPane.showInputDialog(null, "Please enter the Date you're searching for using the format: DD/MM/YYYY");

        for (int i = 0, count = 0; i < orderID.length; i++) {
            if (idInputString.equals(startDate[i])) {

                txtOrderID.setText(orderID[i]);
                txtOrderForename.setText(customerForename[i]);
                txtOrderSurname.setText(customerSurname[i]);

                txtOrderAddress1.setText(address1[i]);
                txtOrderAddress2.setText(address2[i]);
                txtOrderTown.setText(town[i]);
                txtOrderCounty.setText(county[i]);
                txtOrderPost.setText(postCode[i]);
                txtOrderCarModel.setText(carModel[i]);

                txtOrderCarReg.setText(carReg[i]);
                txtOrderStartDate.setText(startDate[i]);
                txtOrderStartTime.setText(startTime[i]);

                txtOrderSerial.setText(serialNum[i]);
                count++;
            } 
            if(i == orderID.length - 1 && count==0){
                JOptionPane.showMessageDialog(null, "Order ID Doesn't Exist", "Error!", JOptionPane.WARNING_MESSAGE);
                break;
            }

   }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:46:30.637

即时创建更多文本字段，或将结果放入[JTable 中](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:32:33.257

最终的 UI 可以`JList`在`PAGE_START`GUI 的 上列出一天或范围内的订单，但只显示“订单号”。然后有一个`JPanel`包含一组标签和字段的字段，`CENTER`以显示列表中所选订单的详细信息。

@Ray 建议的A`JTable`可能是一个可行的替代方案，但我有时觉得数据比在单个表行（每个订单使用一行）中能够很好地呈现更复杂。

# asp.net-mvc-3 - 返回浏览页面时如何在MVC中保留状态

> ID：10851412
> 
> 赞同：-2
> 
> 时间：2012-06-01T13:41:41.753
> 
> 标签：asp.net-mvc-3, jquery, viewstate

我想在浏览页面时使用 js 在 MVC 中保存状态。我尝试了以下所有技巧。没有任何警报出现？

如果将代码放在 webform 站点的页面中，所有警报都会出现，但如果将代码放在 MVC 站点的页面中，则不会出现任何警报。在 MVC 3 页面中，当用户按下浏览器的“上一个”按钮时，我想找到一个使用 javascript 保留复选框状态的地方。

我不能使用服务器端代码，例如 [如何处理 ASP.NET MVC 表单中的复选框？](https://stackoverflow.com/questions/220020/how-to-handle-checkboxes-in-asp-net-mvc-forms)或[在 ASP.NET MVC 中维护动态复选框列表的状态，](https://stackoverflow.com/questions/3291501/maintain-state-of-a-dynamic-list-of-checkboxes-in-asp-net-mvc/3298821#3298821)因为我们需要嵌入现有的 js 代码

感谢其他理想的任何帮助。

```
<body onunload="">
<script type="text/javascript">
    alert('press previous button, reload1');

    alert('press previous button, reload2');
    history.navigationMode = 'compatible';
    $(document).ready(function () {

        //wire up checkboxes.  //$("input[name='element12']")   //($"input[name="addedFav"]") 
        //   $("input[name='addedFav']").live('change', function (e) {
        alert('press previous button, reload3');

    });

    window.onload = function () { alert('press previous button, reload4'); };

</script>
<a href="http://stackoverflow.com">click me, then press the back button</a>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:19:13.280

看起来您的页面上可能有另一个引发未处理错误的 javascript 代码块。尝试检查您的浏览器控制台以获取确切的行

..edit.. 如果您只想存储复选框状态，您应该尝试使用[store.js](https://github.com/frankkohlhepp/store-js)。您可以将 jquery 单击处理程序附加到序列化选定复选框并存储它们的复选框。然后在页面加载时检查商店是否已填充，如果是，则反序列化并选择适当的复选框

# ruby-on-rails - 页面渲染速度提升

> ID：10851413
> 
> 赞同：4
> 
> 时间：2012-06-01T13:41:46.187
> 
> 标签：ruby-on-rails, performance, frontend, webpage-rendering

我们正在运行一个 Web 服务，它正在与一些相当长的页面渲染时间作斗争，尤其是 IE8（大约 20 秒）。我们非常擅长构建高性能的后端系统，但不擅长优化前端。

目前看来（来自newrelic）页面渲染和dom解析是最大的问题。

我们已经尝试优化 js 脚本，这有点帮助，但页面在 IE8 中呈现速度仍然很慢，我觉得那里有一些低调的果实。我的问题是，我真的不知道从哪里开始，什么会起作用，如果有一些我看不到的红色羔羊在闪烁。我需要有经验的眼睛。

任何人都可以帮助我朝着正确的方向前进（我对一切都持开放态度！）？

慢页面在这里：[慢页面](http://autouncle.dk/da/brugte-biler?ref=popular_search_link&s%5Bhas_aircondition_or_climate_control%5D=true&s%5Bhas_pilot%5D=true&s%5Bmax_km%5D=150000&s%5Bmax_price%5D=200000&s%5Bmin_engine_size%5D=1.6&s%5Bmin_fuel_economy%5D=22.0&s%5Bmin_year%5D=2004)

PS。我们正在运行 Rails 3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T10:28:29.873

1.  我建议你通过上面的工具（[YSlow](http://yslow.org/)也是一个很好的工具）或者这个 Online-Tool [Pingdom来](http://tools.pingdom.com/fpt/)**分析你的网站**。在那里你会以一种非常简单的方式看到你的速度消失了。

2.  在Hooopo**的**回答（非常棒！）[Yahoo！开发者网络](http://developer.yahoo.com/performance/rules.html)

3.  “*目前看来（来自 newrelic）页面渲染和 dom 解析是最大的问题。* ”因此我建议你学习这本书： Nicholas C. Zakas 的[高性能 Javascript](https://rads.stackoverflow.com/amzn/click/com/059680279X)。

4.  将尽可能多的 JS 放在页面底部以改进渐进式渲染。

5.  我有时会发现 CSS 选择器有点长（如果它是一个小站点并不重要，但在这种情况下......）。这会使您的页面呈现非常缓慢，尤其是在 IE 中。

示例（来自您的网站）：

```
table.results_table td.car_details .content > .left { ... } 
```

尝试将这个大选择器分解为这个（如果可能的话）：

```
.car_details .content .left-child { ... } 
```

简短：优化您的 JS 性能并保持您的 css-selector 尽可能小而简单。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:59:27.903

要优化前端，请尝试这两个工具并遵循其建议：

[http://www.webpagetest.org/](http://www.webpagetest.org/)

[https://developers.google.com/speed/pagespeed/insights](https://developers.google.com/speed/pagespeed/insights)

您还可以使用 css sprite image 来减少 http 请求。试试[https://github.com/Compass/compass-rails](https://github.com/Compass/compass-rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:18:37.603

推荐两本书给你：

[http://www.amazon.com/High-Performance-Web-Sites-Essential/dp/0596529309](https://rads.stackoverflow.com/amzn/click/com/0596529309)

![你好](../Images/3975aad384a7e00d5e6de6124fa5bc3b.png)

[http://shop.oreilly.com/product/9780596522315.do](http://shop.oreilly.com/product/9780596522315.do)

![在此处输入图像描述](../Images/a66307137e1f6e07afeb54cd0d2bf556.png)

# jquery - 使用 Jquery 上传文件后禁用悬停效果

> ID：10851416
> 
> 赞同：0
> 
> 时间：2012-06-01T13:42:03.020
> 
> 标签：jquery, file-upload, hover

我正在使用 hack 使文件上传输入在浏览器中显示相同。诀窍是基本上将上传输入的不透明度设置为零，并在其上方放置一个常规输入，并使用自定义样式。用户上传文件后，我使用 jquery 来获取文件名的值并将其存储在其上方的输入中（假输入）。

我的jQuery是：

```
 var browse = $("#browse");

    $('.wpcf7-file').on('change', function(){
            $('#fakeUpload').val(this.value).css({'background':'#f1f1f1', 'text-indent':'72px'});
            browse.css('backgroundPosition' , '5px -60px');
    });

    $("input.wpcf7-file").hover(function(){
        browse.css('backgroundPosition' , '5px -28px');
    }, function(){
        browse.css('backgroundPosition' , '5px 4px');
    }); 
```

如您所见，这里做了两件事：从 .wpcf7 输入中获取一个值并将其存储为 #fakeUpload 的值。div, browse 或多或少是一个指示上传状态的按钮。用户选择文件后，浏览按钮进入非活动状态。

问题是用户进入这种“非活动状态”后，其下方的悬停效果仍然保持活动状态。使用上传文件后（更改输入）我想禁用所有悬停效果。解决此问题的最佳方法是什么？

如果您需要查看我的 html/css，请告诉我，但我认为这是一个非常简单的 jquery 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:45:48.393

在`change`事件中，您可以向该字段添加一个类，如下所示：

```
 $('.wpcf7-file').on('change', function(){
        /// you code
        $(this).addClass('inactive');
     }); 
```

然后更改悬停选择器

```
 $("input.wpcf7-file:not('.inactive')").hover(function(){
        browse.css('backgroundPosition' , '5px -28px');
    }, function(){
        browse.css('backgroundPosition' , '5px 4px');
    }); 
```

[**工作样本**](http://jsfiddle.net/thecodeparadox/zHv2Q/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:46:29.117

尝试：

```
$("input.wpcf7-file").unbind('mouseenter mouseleave') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:54:44.463

我认为这可能对你有用：

```
var browse = $("#browse");

$('.wpcf7-file').on('change', function(){
        $('#fakeUpload').val(this.value).css({'background':'#f1f1f1', 'text-indent':'72px'});
        browse.css('backgroundPosition' , '5px -60px');
        $("input.wpcf7-file").off("mouseenter ").off("mouseleave")
});

$("input.wpcf7-file").hover(function(){
    browse.css('backgroundPosition' , '5px -28px');
}, function(){
    browse.css('backgroundPosition' , '5px 4px');
}); 
```

# c - gcc 不能在 mac 上运行

> ID：10851418
> 
> 赞同：2
> 
> 时间：2012-06-01T13:42:08.437
> 
> 标签：c, macos, gcc

我已将**Xcode 从 v3 更新到 v4.2.1**，它工作正常，但作为 C 新手，我想在 Text Wrangler 中编写代码并在 CLI 中使用 gcc 进行编译。

gcc 现在由于某种原因返回“找不到命令”（之前它工作得很好）

经过一番谷歌搜索后，我发现**gcc 已从 /usr/bin 移至 /Developer/usr/bin**（我可以在那里看到）。现在 gcc 在我使用确切路径时运行，但**找不到任何头文件。**

```
my-MacBook-Pro:Desktop user$ /Developer/usr/bin/gcc -o program  program.c 
program.c:15:19: error: stdio.h: No such file or directory
program.c:16:18: error: math.h: No such file or directory
program.c:17:20: error: stdlib.h: No such file or directory
program.c: In function ‘main’:
program.c:33: warning: incompatible implicit declaration of built-in function ‘malloc’
program.c:35: warning: incompatible implicit declaration of built-in function ‘sqrt’
program.c:44: warning: incompatible implicit declaration of built-in function ‘printf’
program.c:65: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:50:51.267

在 Xcode 4.3+ 中，默认情况下不安装“命令行工具”包。您可以在首选项 -> 下载中下载它。请注意，您需要狮子。

编辑：

在 Xcode < 4.3 中，命令行工具包含在 Xcode 安装中，因此上述解决方案不适用。

但是，尝试使用 xcode-select：http: [//developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)

[编辑 2：从Apple 开发网站](http://developer.apple.com)的下载部分安装 Xcode 命令行工具。

# javascript - Google Maps API V3 - 管理折线

> ID：10851421
> 
> 赞同：1
> 
> 时间：2012-06-01T13:42:16.933
> 
> 标签：javascript, google-maps, google-maps-api-3

我有这个功能，点击标记后，在与项目相关的点之间绘制一条线。

```
function showDetails(itemId)
{   
    var newlatlng = itemId.position;
    var xmlhttp;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.open("GET", "index.php?r=items/ajaxdetails&id="+itemId.indice, 
                 false);
    xmlhttp.send();

    var checkins = JSON.parse(xmlhttp.responseText);
    var numeroCheckins = checkins.length;

    var polylineCheckins = [];

    var bounds = new google.maps.LatLngBounds();

    for (counter = 0; counter< numeroCheckins; counter++)
    {
        var posizione = new google.maps.LatLng(checkins[counter].lat,
                                               checkins[counter].long);
        polylineCheckins[counter] = posizione;
        bounds.extend(posizione);
    }

    var polyline = new google.maps.Polyline({
        path: polylineCheckins,
        strokeColor: "#FF0000",
        strokeOpacity: 0.5,
        strokeWeight: 5
        });

    polyline.setMap(map);

    map.fitBounds(bounds);
} 
```

一切正常，但如果多次调用此函数，则始终显示上一行。我尝试使用 setMap(null) 方法但没有成功，尝试重置折线。

在绘制新的折线之前，我想达到删除前一条折线的结果。

谢谢你的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:11:41.750

在地图上只保留一条折线的最简单方法`showDetails`是创建一个全局折线变量。这样，每次`showDetails`调用全局变量都会被修改。

现在，每次`showDetails`运行都会创建一个新的折线，并且不会返回对它的引用，所以我看不到将前一行的地图设置为 null 的方法。

```
 // GLOBAL 
  var detailsPolyline = new google.maps.Polyline({
    strokeColor: "#FF0000",
    strokeOpacity: 0.5,
    strokeWeight: 5
  }); 
```

里面`showDetails`：

```
detailsPolyline.setPath(polylineCheckins);
detailsPolyline.setMap(map);

map.fitBounds(bounds); 
```

这是我使用的整个测试用例，因为我没有创建自己的对象的 php 文件

```
 var map;
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP };

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    showDetails([ {lat: 20, long: 0},
                  {lat: 20, long: 10},
                  {lat: 30, long: 20}]);

    showDetails([ {lat: 10, long: 0},
                  {lat: 10, long: 10},
                  {lat: 20, long: 20}]);
  }

  var detailsPolyline = new google.maps.Polyline({
    strokeColor: "#FF0000",
    strokeOpacity: 0.5,
    strokeWeight: 5
  });

function showDetails(checkins)
{   
    var numeroCheckins = checkins.length;
    var polylineCheckins = [];
    var bounds = new google.maps.LatLngBounds();

    for (counter = 0; counter< numeroCheckins; counter++)
        {
        var posizione = new google.maps.LatLng(checkins[counter].lat, checkins[counter].long);
        polylineCheckins[counter] = posizione;
        bounds.extend(posizione);
        }

    detailsPolyline.setPath(polylineCheckins);
    detailsPolyline.setMap(map);

    map.fitBounds(bounds);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:10:35.930

您在`polyline`函数本身内定义变量，因此一旦函数完成，该变量就超出了任何其他方法的范围（如`setMap(null)`）。

有几种方法可以做到这一点。最简单的方法是将函数外部的折线定义为全局变量：

```
var polyline = null;

function showDetails(itemId)
{ 
  if (polyline != null)
  {
    polyline.setMap(null);
    polyline = null;
  }

  /* more code */

  polyline = new google.maps.Polyline({
    path: polylineCheckins,
    strokeColor: "#FF0000",
    strokeOpacity: 0.5,
    strokeWeight: 5
  });

  polyline.setMap(map);

  map.fitBounds(bounds);
} 
```

# aptana3 - Aptana Studio 3 - 丢失的远程站点

> ID：10851431
> 
> 赞同：0
> 
> 时间：2012-06-01T13:42:39.403
> 
> 标签：aptana3

在使用 Aptana Studio 3 (Linux Mint 12) 时，我遇到了一个反复出现且非常烦人的问题。

我使用远程选项卡来跟踪几个 FTP 站点，但每隔几个月，列表就会完全消失，我必须手动重新输入每个连接的详细信息。

![在此处输入图像描述](../Images/a1fd9dc89b8b53be6ecbcc425f1d1cb5.png)

有没有人遇到过这个/知道是否有办法找回它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:34:01.447

这发生在我最近更新 Aptana 3 时。但是，远程窗格的刷新以某种方式找到了我所有的旧远程连接。

# unit-testing - 用于测试objectify的gwt junit

> ID：10851440
> 
> 赞同：1
> 
> 时间：2012-06-01T13:43:07.333
> 
> 标签：unit-testing, google-app-engine, junit, objectify

我正在尝试使用 gwt junit 测试我的 gwt 应用程序，但似乎无法正确设置以使对象化被测试。所有教程都演示了测试 DataStore 但不对象化（这是更高级别的数据库服务） 我的测试基类如下所示：

```
public class TestBase {
private static final LocalServiceTestHelper helper =
    new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());
protected static ObjectifyFactory fact;

@BeforeClass
public static void setUp() {
    helper.setUp();
    fact = new ObjectifyFactory() {
        @Override
        public Objectify begin(ObjectifyOpts opts)
        {
            opts.setSessionCache(false);
            return super.begin(opts);
        }
    };

}

@AfterClass
public static void tearDown() {
    helper.tearDown();
}

} 
```

然后我有扩展基础的类：

```
public class UserServiceTest extends TestBase{
private User inactiveUser;
private UserService us;
Objectify _ofy;

@Rule
public ExpectedException thrown = ExpectedException.none();

@Before
public void beforeTest() {   

    //Register the classes used in the test
    fact.register(User.class);

    us = new UserService();
    inactiveUser = new User();

}   

@Test
public void basicTest(){
    Objectify ofy = ObjectifyService.begin();
    ofy.put(inactiveUser); //This fails with exception: An exception occurred: com.google.apphosting.api.ApiProxy$CallNotFoundException 

            //My goal is to reach these test but "addUser" uses also objectify
    //UserService.addUser("shpungin@gmail.com", "bye");
    //assertNotNull(inactiveUser.get_id());
} 
```

你知道我做错了什么吗？我查看了整个互联网并没有找到解决方案（有些人甚至说要从 .classpath 中删除 app-engine-sdk ，但它似乎有效。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:31:31.313

我解决了这个问题。

虽然 com.google.apphosting.api.ApiProxy 应该是应用程序引擎的一部分，但一些 jars 仍然需要在 .classpath 内：

${SDK_ROOT}/lib/testing/appengine-testing.jar

${SDK_ROOT}/lib/impl/appengine-api.jar

${SDK_ROOT}/lib/impl/appengine-api-labs.jar

${SDK_ROOT}/lib/impl/appengine-api-stubs.jar //这个我漏掉了

我还将我的应用程序引擎升级到 v 1.6.4.1（也许这也有帮助）。

# python - 按索引列表拆分字符串

> ID：10851445
> 
> 赞同：36
> 
> 时间：2012-06-01T13:43:22.833
> 
> 标签：python, string, split, indices

我想通过索引列表拆分字符串，其中拆分段以一个索引开始并在下一个索引之前结束。

**例子：**

```
s = 'long string that I want to split up'
indices = [0,5,12,17]
parts = [s[index:] for index in indices]
for part in parts:
    print part 
```

**这将返回：**

> 我要拆分的长字符串 我要拆分的字符串 我 要拆分的字符串 我 要拆分的
> 字符串

**我试图得到：**

> 我要拆分 的长
> 字符串

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-01T13:45:36.970

```
s = 'long string that I want to split up'
indices = [0,5,12,17]
parts = [s[i:j] for i,j in zip(indices, indices[1:]+[None])] 
```

返回

```
['long ', 'string ', 'that ', 'I want to split up'] 
```

您可以使用以下方式打印：

```
print '\n'.join(parts) 
```

另一种可能性（不复制`indices`）是：

```
s = 'long string that I want to split up'
indices = [0,5,12,17]
indices.append(None)
parts = [s[indices[i]:indices[i+1]] for i in xrange(len(indices)-1)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:52:37.160

这是一个大量使用[itertools 模块](http://docs.python.org/library/itertools.html)的简短解决方案。该`tee`函数用于对索引进行成对迭代。有关更多帮助，请参阅模块中的“*配方*”部分。

```
>>> from itertools import tee, izip_longest
>>> s = 'long string that I want to split up'
>>> indices = [0,5,12,17]
>>> start, end = tee(indices)
>>> next(end)
0
>>> [s[i:j] for i,j in izip_longest(start, end)]
['long ', 'string ', 'that ', 'I want to split up'] 
```

**编辑**：这是一个不复制索引列表的版本，所以它应该更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-03T22:18:24.250

如果您不想对索引列表进行任何修改，您可以编写一个生成器：

```
>>> def split_by_idx(S, list_of_indices):
...     left, right = 0, list_of_indices[0]
...     yield S[left:right]
...     left = right
...     for right in list_of_indices[1:]:
...         yield S[left:right]
...         left = right
...     yield S[left:]
... 
>>> 
>>> 
>>> s = 'long string that I want to split up'
>>> indices = [5,12,17]
>>> [i for i in split_by_idx(s, indices)]
['long ', 'string ', 'that ', 'I want to split up'] 
```

# visual-studio - 如何提高 VS Test Project 中的测试运行速度？

> ID：10851450
> 
> 赞同：1
> 
> 时间：2012-06-01T13:43:45.047
> 
> 标签：visual-studio, mstest, load-testing

我正在尝试在 VS 测试项目中创建负载测试。我有一个被多次调用的空测试方法。充其量我的测试每秒运行 600 次。

如何增加每秒运行测试的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:16:43.470

> 充其量我的测试每秒运行 600 次。

我认为这受到`Load test`正在执行的机器的限制。也许，您可以通过以下方式增加此数字：

*   `Virtual Users`为您的负载测试添加更多内容。您的测试迭代将共享给虚拟用户，他们将并行执行它们。
*   添加更多`Test Agents`。如果您正在使用测试平台，您`Load Tests`可以定义更多 VM（如果可能）作为测试代理。

有关详细信息，请参阅以下参考资料：

1.  [为负载测试配置测试控制器和测试代理](http://msdn.microsoft.com/en-us/library/ms243155.aspx)
2.  [关于负载测试的混合控制](http://msdn.microsoft.com/en-us/library/ms243157.aspx)
3.  [如何：为分布式负载测试创建测试设置](http://msdn.microsoft.com/en-us/library/ff426235.aspx)

**如果您向空测试方法添加功能，恐怕运行/秒数会再次减少。

# c# - 单元测试 SocketAsyncEventArgs

> ID：10851458
> 
> 赞同：1
> 
> 时间：2012-06-01T13:44:13.810
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

我正在尝试设置采用 SocketAsyncEventArgs 的方法的单元测试，即来自 Sockets 类的 IOCP 函数之一。

为了将这些类之一推入我的函数，我需要更改 SAEA 的 .BytesTransferred 属性。如何做到这一点？我尝试使用 PrivateObject.SetFieldOrProperty，但它告诉我它无法找到该属性：

```
pargs.SetFieldOrProperty("BytesTransferred", expected); 
```

我收到以下异常：“找不到方法‘System.Net.Sockets.SocketAsyncEventArgs.BytesTransferred’。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:12:18.253

此属性没有设置器。两种解决方案：

1.  不要使用 SocketAsyncEventArgs 进行测试。相反，在某种模拟对象上进行测试。
2.  设置私有字段 m_BytesTransferred。使用反射器查看实现细节。

解决方案＃2会让我紧张。我会选择#1。

# php - WordPress 高级搜索

> ID：10851460
> 
> 赞同：0
> 
> 时间：2012-06-01T13:44:18.827
> 
> 标签：php, wordpress

我创建了一个包含代码的自定义搜索页面

```
<?php 
function filter_where( $where = '' ) {
    $where .= " AND post_date >= '{$_GET['frmdate']}' AND post_date < '{$_GET['todate']}'";
    return $where;
}
add_filter( 'posts_where', 'filter_where');
$query = new WP_Query( array( 'post_type' => 'post' ) );
    while( $query->have_posts() ) : $query->the_post(); ?>

    <p><?php the_title(); the_date() ?></p>

<?php    endwhile; ?>
<?php remove_filter( 'posts_where', 'filter_where' ); wp_reset_query(); ?> 
```

***我的目标是在“两个日期”之间*搜索带有“关键字”的帖子**

 *我的搜索变量像这样通过**url**

```
www.something.com?page_id=372&s12=lorem&s13=ipsum&frmdate=2012-03-01&todate=2012-06-12 
```

当我的网址看起来像这样时，使用我的当前代码过滤两个日期之间的结果可以正常工作`www.something.com?page_id=372&frmdate=2012-03-01&todate=2012-06-12`

当 iam 添加时`&s=lorem`关键字和日期过滤都不起作用。即使我单独添加它 (&s=lorem)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:54:29.377

您可能只想更改 WP 模板层次结构中可用的搜索模板，而不是使用自定义页面。请参阅[这篇文章](http://codeblow.com/questions/wordpress-search-queries/)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:28:51.643

用下面的代码更新了我的代码，**它可以很好地满足我的所有要求**，不确定是否有另一种更聪明的方法

```
<?php 
function filter_where( $where = '' ) {
    if(isset($_GET['frmdate']) && isset($_GET['todate'])){
        $where .= " AND post_date >= '{$_GET['frmdate']}' AND post_date < '{$_GET['todate']}'";
    }
    if(isset($_GET['s12'])){
        $where .= " AND post_content LIKE '%{$_GET['s12']}%' " ;
    }
    if(isset($_GET['s13'])){
        $where .= " AND post_title LIKE '%{$_GET['s13']}%' "    ;
    }
    //echo $where;exit;
    return $where;
}
add_filter( 'posts_where', 'filter_where');
$query = new WP_Query( array( 'post_type' => 'post' ) );

    while( $query->have_posts() ) : $query->the_post(); ?>

    <li>
        <h4><a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h4>
        <div class="monthDate"> <span class="date"><?php the_time('M d,Y H.i'); ?></span> <span class="month"><?php comments_number();?></span> </div>
        <p><?php content('100'); ?></p>
    </li>

<?php    endwhile; ?>
<?php remove_filter( 'posts_where', 'filter_where' ); wp_reset_query(); ?> 
```*

# android - Android上的强制溢出菜单按钮

> ID：10851462
> 
> 赞同：3
> 
> 时间：2012-06-01T13:44:21.410
> 
> 标签：android, android-fragments, android-actionbar, android-menu

我正在为 Android 4.0.3 开发一个应用程序。我有多个片段，每个片段上都显示一个菜单项。我想要一个有 2 个菜单项的溢出菜单按钮。如何强制显示溢出菜单并向其添加菜单项？我通过在每个片段中调用 onCreateOptionsMenu 函数来添加菜单项。

任何和所有的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:54:24.697

要强制进入溢出菜单，请执行以下操作：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
   menu.add(0, 2, 0, "Item 1").setShowAsAction(MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

   return true;
} 
```

`SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW`将强制该项目进入：

Android 3.0 + : ActionBar 作为溢出 Android 2.3 - : 菜单按钮

如果您想重新创建菜单，则需要调用`invalidateOptionsMenu();`This will re-create from `OnCreateOptionsMenu`。

# node.js - module.exports 的替代品

> ID：10851463
> 
> 赞同：0
> 
> 时间：2012-06-01T13:44:21.563
> 
> 标签：node.js, module

我有一个听起来很奇怪的问题。我们使用的是 node.js，但是我们编写 javascript 代码的方式是函数式的。我们有一个 lint 工具，可以报告非法使用赋值表达式。除了 'module.exports = xxx' 语句之外，我们可以将它们全部排除。

有没有其他方法可以在 node.js 中加载模块？

例如; 以下语句可以作为解决方案，因为它不是赋值表达式而是变量声明： var exports = xxx; 如果 nodejs 有办法获取这个“exports”变量，那么我们就完成了。

克，

科恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T19:47:50.627

以下为我做了诀窍：

```
vm.runInThisContext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:12:45.813

看起来改变 lint 工具是最好的方法。:)

但是，您可以使用纯功能的不同模块加载器（那里有一些针对 node.js 的 AMD 实现）。

# mysql - SQL 查询：在给定时间间隔内活动的所有 ID 的列表，按它们的开始时间排序

> ID：10851466
> 
> 赞同：8
> 
> 时间：2012-06-01T13:44:46.380
> 
> 标签：mysql, sql

我有一个包含轨道点（x/y 坐标）的 MySQL 表。每行包含该轨道在该给定时间点的 TrackID、时间戳以及 X 和 Y 位置。

我想要的是在给定时间间隔（tmin...tmax）内活动的所有 TrackID 的列表，按它们的开始时间排序，*即使该开始时间在时间​​间隔之外*。

一个小插图可能会有所帮助：

![插图](../Images/f89bb3230b47469931364976289e7121.png)

例如：轨道 1 从 t11 到 t12 处于活动状态，这意味着我的表中有很多行 ID=1，时间戳从 t11 到 t12。

所需的输出将是：

```
TrackID | StartTime
--------+-----------
    7   |    t71
    1   |    t11
    2   |    t21
    6   |    t61 
```

我试过这样的事情：

```
SELECT TrackID, MIN(Timestamp) AS StartTime FROM Tracks WHERE Timestamp BETWEEN tmin AND tmax GROUP BY TrackID ORDER BY StartTime; 
```

但是，在上面的示例中，我没有得到轨道 1 和 7 的实际开始时间，因为根本不考虑时间戳小于 tmin 的所有行。

当然，我可以在第一步中获取所有活动的 TrackID

```
SELECT TrackID FROM Tracks WHERE Timestamp BETWEEN tmin AND tmax GROUP BY TrackID; 
```

然后通过单独的查询找到所有这些曲目的开始时间，然后在我的应用程序代码中对它们进行排序。

但我确信有一种方法可以通过一个 SQL 查询来做到这一点。我的表包含数百万行，所以这里的效率是一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:52:27.070

看看你的图片 - 你想要的所有范围的结束时间都大于`min`和开始时间小于`max`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:56:01.373

考虑它的一种方法是构建逻辑来处理图表中的四种特殊情况。这两条规则就足够了。

1.  趋向 > tmin 和
2.  tstart < tmax

如果这两个条件中的任何一个为真，则应包括轨道。您将需要第二个查询中的曲目列表及其最小值和最大值，然后执行比较：

```
SELECT T.TrackID
  FROM (SELECT TrackID, MIN(Timestamp) AS StartTime, MAX(Timestamp) AS EndTime
        FROM Tracks GROUP BY TrackID) T
 WHERE T.EndTime > tmin AND T.StartTime < tmax 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:51:25.597

怎么样：

```
SELECT TrackID, MIN(Timestamp) AS StartTime FROM Tracks WHERE EXISTS(
    SELECT *
    FROM Tracks
    WHERE Timestamp BETWEEN tmin AND tmax)
GROUP BY TrackID ORDER BY StartTime; 
```

我认为这更好：

```
SELECT SQUERY.TrackID, MIN(SQUERY.Timestamp) AS StartTime FROM (
    SELECT *
    FROM Tracks
    WHERE Timestamp BETWEEN tmin AND tmax) AS SQUERY
GROUP BY SQUERY.TrackID ORDER BY SQUERY.StartTime; 
```

好的，我确定现在就是这样：p

```
SELECT TrackID, MIN(Timestamp) AS StartTime FROM Tracks WHERE TrackID IN (
    SELECT TrackID
    FROM Tracks
    WHERE Timestamp BETWEEN tmin AND tmax)
GROUP BY TrackID ORDER BY StartTime; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T13:51:59.090

您的第二个查询走在了正确的轨道上，您只需要添加一个`ORDER BY`子句。

```
SELECT DISTINCT TrackID 
FROM Tracks 
WHERE Timestamp BETWEEN tmin AND tmax 
GROUP BY TrackID 
ORDER BY Timestamp; 
```

# java - Netbeans GUI Builder：如何编辑生成的代码

> ID：10851468
> 
> 赞同：0
> 
> 时间：2012-06-01T13:44:55.087
> 
> 标签：java, user-interface, netbeans, jtree

我正在使用 Netbeans GUI Builder，我正在向我的表单添加一个 JTree，因为 Netbeans 正在为 JTree 生成所有代码。

我想知道的是，Netbeans 中有没有一种方法可以将代码添加到生成的代码中......就像`Generated Code`它创建的部分的源视图中一样

```
jTree = new javax.swing.JTree(); 
```

我想添加`populateJTree.addNodes(null, folder)`所以它看起来像

```
jTree = new javax.swing.JTree(populateJTree.addNodes(null, folder)); 
```

有没有办法做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:00:03.293

是的，有一种方法可以添加代码。只需右键单击组件（在本例中为 JTree），然后选择“自定义代码”，选择“自定义创建”，您就可以开始了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:55:16.173

我对其进行了排序，如果您转到`Properties`JTree 和该`Code`部分的窗口，您可以添加

`new javax.swing.JTree(populateJTree.addNodes(null, folder));`

到自定义创建代码部分，它将创建

`jTree = new javax.swing.JTree(populateJTree.addNodes(null, folder));`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-05T05:44:54.347

1.  在记事本中打开 .java 文件。
2.  现在在 initComponents() 方法中删除上面的行，
    `@SuppressWarnings("unchecked") // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents` 并在 initComponents() 方法的末尾，删除 `// </editor-fold>//GEN-END:initComponents`
3.  在 .java 文件的末尾是一个变量声明，它还包含生成的代码，也将其删除， `// Variables declaration - do not modify//GEN-BEGIN:variables` 并且 `// End of variables declaration//GEN-END:variables`
4.  从记事本保存文件。
5.  现在打开 net-beans
6.  现在看到您可以编辑生成的代码。

    *   如果您想取回生成的代码以与设计交互，请先保存文件，然后反转上述过程。*

# php - 为什么 RedBean 的事务功能不起作用？

> ID：10851471
> 
> 赞同：4
> 
> 时间：2012-06-01T13:45:10.263
> 
> 标签：php, mysql, transactions, redbean

我刚刚注意到，在使用 PHP 和 RedBean（以及一个事务）将一些数据导入 MySQL 数据库时，我可以看到在导入运行时行数在增长。为了证实我的怀疑，我在导入函数的末尾将 更改为并尝试导入`R::commit()`。`R::rollback()`事实上，即使我调用回滚，数据也是导入的并且是永久的。

我不知道为什么交易没有完成它的工作，也不知道从哪里开始寻找，因此这个问题。[这是函数的导入部分](http://pastebin.com/a1fiZVn5)。让我指定**除了事务不工作之外**，导入功能工作得很好，所以没有必要剖析它。

感谢任何和所有的假设

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T18:53:12.303

啊哈！知道了。急于证明@furier 错了，我查阅了[RedBean 事务文档](http://www.redbeanphp.com/manual/transactions)并偶然发现了一个非常有用的注释：

> 许多数据库在更改架构后会自动提交，因此请确保您在之后测试您的事务`R::freeze(true);`！

`R::freeze(true);`总而言之，如果您没有使用中断应用程序中的所有事务操作来冻结 RedBean，某些数据库可能会自动提交

# django - django - 我如何向现有的modelForm添加新值？

> ID：10851473
> 
> 赞同：0
> 
> 时间：2012-06-01T13:45:14.247
> 
> 标签：django

所以我有一个模型表格 - 这是 django*令人难以置信*的不直观的模型编辑过程，如果有人有一个可靠的“白痴”教程，我很想听听它！

手头的问题是向 modelForm 字段添加/设置一个值，以便它显示在 html 中。

所以，我的视图逻辑中有这段代码：

```
class EditSaveModel(View):

    def get(self,request,id=None):
        form = self.getForm(request,id)
        return self.renderTheForm(form,request)

    def getForm(self,request,id):
        if id:
            return self.idHelper(request,id)
        return PostForm() 
```

这被称为“获取”。所以，在这里，我要么是想展示一个预先完成的表格，要么是一个新的表格！

深入 idHelper：

```
 def idHelper(self,request,id):
        thePost = get_object_or_404(Post, pk=id)
        if thePost.story.user != request.user:
            return HttpResponseForbidden(render_to_response('errors/403.html'))
        postForm = PostForm(instance=thePost)
        postForm.fields.storyId.value = thePost.story.id **ANY NUMBER OF COMBOS HAVE BEEN TRIED!
        return postForm 
```

我在哪里获得一个帖子对象，检查它是否属于活动用户，然后为其附加一个新值 - “storyId”

我也试过，上面：

```
 postForm.storyId.value = thePost.story.id 
```

但这告诉我 postForm*没有*要设置的 storyId 值！

和：

```
 postForm.storyId = thePost.story.id 
```

但这实际上并没有*设置*storyId - 也就是说，在html中，不存在任何值。

看看我的 PostForm 定义：

```
class PostForm(forms.ModelForm):
    storyId = forms.IntegerField(required=True, widget=forms.HiddenInput())

    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop('request', None)
        super(PostForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Post
        ordering = ['create_date']
        fields = ('post',)

    #some validation here!
    #associates the new post with the story, and checks that the user adding the post also owns that story
    def clean(self):
        cleaned_data = super(PostForm, self).clean()
        storyId = self.cleaned_data.get('storyId')
        storyArray = Story.objects.filter(id=storyId,user=self.request.user.id)
        if not len(storyArray): #eh, this means if self.story is empty.
            raise forms.ValidationError('Whoops, something went wrong with the story you\'re using . Please try again')
        self.story = storyArray[0]
        return cleaned_data 
```

对了，这样清楚吗？总结：

我想在我的 PostForm 上附加一个*隐藏*的storyId 字段，以便我始终知道给定帖子附加到哪个故事！现在，我知道可能有其他方法可以做到这一点 - 我可能能够以某种方式将外键添加为“隐藏”？这是受欢迎的，请告诉我如何！但是我现在真的很想将外键作为隐藏字段，所以请随意提出不同的方式，但也可以回答外键作为隐藏模型表单的问题！

有了上面的所有代码，我想我可以在 html 中使用它（因为我的表单绝对被称为“表单”）：

```
{% for hidden in form.hidden_fields %}
    {{ hidden.errors }}
    {{ hidden }}
{% endfor %} 
```

甚至

```
{{ form.storyId }} 
```

但这不起作用！storyId 永远不会显示为设定值。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:30:48.037

您是否尝试过将其传递给构造函数？

```
def __init__(self, *args, **kwargs):
    self.request = kwargs.pop('request', None)
    self.story_id = kwargs.pop('story_id', None)
    super(PostForm, self).__init__(*args, **kwargs)
    self.fields['storyId'].initial = self.story_id 
```

# reporting-services - 不支持 SSRS 2012 自定义代码 .NET Framework 4.0

> ID：10851474
> 
> 赞同：16
> 
> 时间：2012-06-01T13:45:15.817
> 
> 标签：reporting-services, sqlclr, sql-server-2012

我非常希望由于 SQL Server 2012 SQLCLR 支持 .NET 4.0，SQL Server Reporting Services (SSRS) 2012 将支持 .NET 4.0 自定义代码程序集。尝试上传引用 .NET 4.0 程序集的 rdl（通过报告管理器或通过 RSBuild）时，报告管理器会引发错误说明

> 此程序集由比当前加载的运行时更新的运行时构建，无法加载。(rsErrorLoadingCodeModule)

我可以配置一些东西来让 SSRS 2012 加载 .NET 4.0 程序集吗？我们是否会等到 SQL Server 的下一个主要版本才能看到 .NET 4.0 对 SSRS 中的自定义程序集的支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-23T04:55:12.217

SSRS 2014 现已发布，自定义代码**仍不**支持 .Net 4.0 框架。

请参阅“安装 SQL Server 2014 的硬件和软件要求”中的先决条件 ( [http://msdn.microsoft.com/en-us/library/ms143506(v=sql.120).aspx](http://msdn.microsoft.com/en-us/library/ms143506(v=sql.120).aspx) )

非常有趣的是，SQL Server 2014 几天前刚刚进行了 RTM，并且已经被 .Net Framework 的人认为是“遗留应用程序”，他们说：

> 默认情况下，.NET Framework 3.5 不包含在 Windows 8 或 Windows Server 2012 中，但您可以下载和部署它以实现旧应用程序的兼容性。

...请参阅“Microsoft .NET Framework 3.5 部署注意事项”（[http://technet.microsoft.com/en-us/library/dn482066.aspx](http://technet.microsoft.com/en-us/library/dn482066.aspx)）

我认为更大的问题是.Net 3.5 SP1 的支持生命周期是否实际上可以与它作为默认组件的操作系统相关联。不管他们怎么说，只要 SQL Server 继续将其作为他们今天发布的产品的先决条件，我就不会看到 Microsoft 退出对 .Net 3.5 的支持。.Net 框架的家伙现在对那些懒惰的 SQL 家伙不太满意……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:53:50.973

实际上，我发现使用 .Net 4.0 程序集的报告在 VS 2010 (PreviewProcessingService.exe) 中可以正常工作...

在 SharePoint 2013 集成模式下将报告部署到 SSRS 2012 SP1 时，这些报告也可能对您有用。

以下是 SSRS 何时/何地支持 .Net 4.0 CLR 的权威答案：http: [//support.microsoft.com/kb/2869522/en-us](http://support.microsoft.com/kb/2869522/en-us)

对于我们这些在独立模式（没有 SharePoint）中使用 SSRS 的人来说，我们可能会在 .Net 2.0 CLR 上停留一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T10:26:16.947

我可能错了，可能存在更多差异，但是比较了从报告服务下载的报告和使用 .Net 框架 4.0+ 在 Visual Studio 中制作的“相同”报告，我认为唯一的区别是在 xml 中放置了 ReportParametersLayout 部分。如果您手动从报告文件的 xml 版本中删除它，然后上传希望它对您有用

# node.js - 使用 express shouldjs 或其他断言库对 nodejs 中的 html 标签进行响应测试

> ID：10851482
> 
> 赞同：0
> 
> 时间：2012-06-01T13:45:40.263
> 
> 标签：node.js, tdd, express, mocha.js

有人知道 shouldjs 的扩展或其他有助于断言 html 标签的响应流的断言库吗？

我想写一些验收测试，比如

```
body.should.contain.link 'login' 
```

或者

```
body.should.contain.h1 'Hello world' 
```

只是我想到的一个例子，它可能非常方便......

或者你们如何测试你的反应......？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T03:18:55.620

Chai Assertion Library 有一个您可能感兴趣的插件，但不支持该*精确标记。*

首先，如果您在浏览器中进行测试，则有[chai-jquery](http://chaijs.com/plugins/chai-jquery)。它可以让你做这样的事情：

```
$('body').should.have('h1.title').text('Hello world'); 
```

从代码片段的外观来看，您正在服务器端进行测试，这使事情变得更加复杂。我们曾尝试通过使用 jsdom 解析从服务器返回的 html 并将其加载到 jquery 对象中进行测试，从而使 chai-jquery 与节点一起工作，但 jsdom 不能很好地与 jQuery 配合使用。

我见过（但尚未尝试）的替代方法是[cherio](https://github.com/MatthewMueller/cheerio)。它的行为似乎更像预期的 jQuery。在这种情况下，你可以做这样的事情（未经测试）......

```
$('h1', body).text().should.contain('Hello universe'); 
```

希望这足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:58:54.577

几个月前我遇到了同样的问题，但我似乎找不到代码。最近听到很多人说[chai](http://chaijs.com)它有一个类似于 should 的 api。原来它确实有一个[包含](http://chaijs.com/api/bdd/#include-section)方法。

# c# - 这个 linq 查询（查询数据表）我做错了什么

> ID：10851484
> 
> 赞同：0
> 
> 时间：2012-06-01T13:45:41.387
> 
> 标签：c#, winforms, linq, datatable

我正在将我的 Windows 窗体应用程序连接到他们的 Access DB（呃，我知道），并且无法让我的 linq 查询返回任何内容。

```
var matchDateField = from myRow in boilerDT.AsEnumerable()
                     where myRow.Field<DateTime>("EntryDate").ToShortDateString() == dateTimePicker1.Value.ToShortDateString()
                     select myRow; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:53:29.183

获取所有行：

```
IEnumerable<DataRow> dateFieldQuery =
                    from myRow in boilerDT.AsEnumerable()
                    select myRow; 
```

按日期过滤：

```
IEnumerable<DataRow> matchDateField =
                dateFieldQuery.Where(p => p.Field<DateTime>("EntryDate").Date == dateTimePicker1.Value); 
```

因此，您在这里使用延迟执行，它可以组合多个查询或扩展一个查询。扩展查询时，会对其进行修改以包含新操作，最终执行将反映更改。

第一个查询返回所有行，第二个查询扩展第一个查询，使用 Where 返回具有特定日期的所有行。

# java - TrafficStats.getUidRxBytes(ProcessUID) 随机返回“-1”？

> ID：10851485
> 
> 赞同：0
> 
> 时间：2012-06-01T13:45:42.207
> 
> 标签：java, android

我正在尝试读取正在运行的应用程序产生的流量。我非常想获取每个进程的网络使用数据。

TrafficStats.getUidRxBytes(ProcessUID); 有时会返回正确的结果，但有时会返回“-1”。如果我理解正确，在上述情况下会返回 TrafficStats.UNSUPPORTED，我不明白的是，为什么？我认为 UNSUPPORTED 标志是为了区分运行设备获取数据的能力，并且没有以任何方式绑定到某个进程。

```
 Integer ProcessUID = ProcessListData.get(i).getUID();
        Long RxBytes = TrafficStats.getUidRxBytes(ProcessUID);
        Long TxBytes = TrafficStats.getUidTxBytes(ProcessUID); 
```

我正在运行 Android 2.3.3。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:15:41.940

**“-1”表示 TrafficStats.UNSUPPORTED**

看followin链接，可能对你有帮助

[有人能解释一下 TrafficStats 如何在 Android 操作系统中发挥它的魔力吗？](https://stackoverflow.com/questions/4029186/can-someone-explain-how-trafficstats-works-its-magic-in-the-android-os/9472571#9472571)

# java - 如何在 Android 中使用自签名 SSL 证书

> ID：10851486
> 
> 赞同：4
> 
> 时间：2012-06-01T13:45:45.800
> 
> 标签：java, android, ssl, https, android-networking

这件事已经困扰我好几天了。我已经阅读了很多关于整个问题的其他问题，但仍然无法继续。

我创建了一个简单的测试应用程序，只是为了在 Android 上测试 SSL。该应用程序只有一个按钮，单击该按钮时，该应用程序会尝试通过 SSL 加密连接向我的测试服务器发送“Hello World”，然后它会以完全相同的短语进行响应。

首先，我使用 openssl 为我的服务器创建了一个测试密钥和测试证书。然后我一直按照[Crazy Bob 的博客](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)中的说明进行操作。我直接从 Bouncy Castle 的站点获得了 Bouncy Castle 提供程序，创建了一个受信任的密钥库，如 Crazy Bob 的博客上所示，并且我相信此时一切都正确。

当我尝试运行我的代码时，我得到了异常“IOException：错误版本的密钥库”。然后我在 StackOverflow 上找到[了这个问题。](https://stackoverflow.com/questions/5176600/android-bouncy-castle-ioexception)有人建议我应该尝试使用较旧的 Bouncy Castle Providers 而不是最新**的 bcprov-jdk15on-147.jar**。我继续考虑这一点，实际上最终尝试了从 jdk13-146 到 jdk16-146 的每个 bcpprovider。仍然每次我得到相同的“IOExcpetion：错误版本的密钥库”。例外。

然后我在 StackOverflow 上发现[了另一个关于类似问题的问题。](https://stackoverflow.com/questions/8411008/android-client-http-server-how-do-i-know-client-is-sending-data-using-my-app)有人设法通过使用 512 位大小的密钥而不是 1024 位大小的密钥来摆脱该异常。好吧，我试了一下，什么也没做，但同样的例外。

所以我现在在这里，想知道下一步该怎么做。我几乎没有想法和谷歌搜索结果。

我的网络代码是疯狂鲍勃代码的一对一副本，除此之外，应用程序只有处理按钮的活动类。我正在尝试在 API 级别 7 上实现这一点。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:02:39.067

2个选择：

1.  您可以做您所做的事情并创建自己的密钥库，我已经做到了，这是我存储的代码中的说明（因为让它工作非常耗时）：

    要生成 PKS：

    1.  在 IIS7 中创建证书，然后导出为 pfx。按照 SelfSSL 上的说明进行操作：[http](http://www.robbagby.com/iis/self-signed-certificates-on-iis-7-the-easy-way-and-the-most-effective-way/) : //www.robbagby.com/iis/self-signed-certificates-on-iis-7-the-easy-way-and-the-most-effective-way/1a。下载工具：[http](http://cid-3c8d41bb553e84f5.skydrive.live.com/browse.aspx/SelfSSL) ://cid-3c8d41bb553e84f5.skydrive.live.com/browse.aspx/SelfSSL 1b。运行：SelfSSL /N:CN=mydomainname /V:1000 /S:1 /P:8081 我在我的服务器 1c 上使用端口 8181。从 IIS 管理器导出到 cert.pfx
    2.  在 SSL 中运行命令行以将文件转换为 X.509： openssl pkcs12 -in C:\cert.pfx -out C:\cert.cer -nodes
    3.  编辑文件并删除所有文件，除了 -----BEGIN.... END CERTIFICATE----- 重要！当我得到适当的（5）个破折号并将标签和数据放在单独的行上时它正在工作
    4.  使用密钥工具。C:\Java\JDK\bcprov.jar 单独下载 C:\Users>keytool -import -v -trustcacerts -alias key_alias -file C:\cert.cer -keystore C:\mystore.bks -storetype BKS -provider org .bouncycastle.jce.provider.BouncyCastleProvider -providerpath C:\Java\JDK\bcprov.jar -storepass 123456
2.  创建 TRUST ALL KeyStore 并忘记这一切。基本上，您可以使用任何 SSL 而不会出错。如果您真的关心，只需在生产中禁用它。这是我用来准备 SSL 客户端的代码（假设您使用 Apache Http 客户端）

    ```
    private HttpClient getHttpClient()
    {
        HttpParams params = new BasicHttpParams();

        //Set main protocol parameters
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.DEFAULT_CONTENT_CHARSET);
        HttpProtocolParams.setUseExpectContinue(params, true);

        // Turn off stale checking.  Our connections break all the time anyway, and it's not worth it to pay the penalty of checking every time.
        HttpConnectionParams.setStaleCheckingEnabled(params, false);
        // FIX v2.2.1+ - Set timeout to 30 seconds, seems like 5 seconds was not enough for good communication
        HttpConnectionParams.setConnectionTimeout(params, 30 * 1000);
        HttpConnectionParams.setSoTimeout(params, 30 * 1000);
        HttpConnectionParams.setSocketBufferSize(params, 8192);

        // Don't handle redirects -- return them to the caller.  Our code often wants to re-POST after a redirect, which we must do ourselves.
        HttpClientParams.setRedirecting(params, false);

        // Register our own "trust-all" SSL scheme
        SchemeRegistry schReg = new SchemeRegistry();
        try
        {
            KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
            trustStore.load(null, null);

            TrustAllSSLSocketFactory sslSocketFactory = new TrustAllSSLSocketFactory(trustStore);
            sslSocketFactory.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            Scheme sslTrustAllScheme = new Scheme("https", sslSocketFactory, 443);
            schReg.register(sslTrustAllScheme);
        }
        catch (Exception ex)
        {
            LogData.e(LOG_TAG, ex, LogData.Priority.None);
        }

        ClientConnectionManager conMgr = new ThreadSafeClientConnManager(params,schReg);
        return new DefaultHttpClient(conMgr, params);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:19:25.153

好吧，我也遇到了同样的情况，为了解决它，我从**R4j引用的同一篇博客文章（** [http://nelenkov.blogspot.in/2011/12/using-custom-certificate-trust-store-on.html](http://nelenkov.blogspot.in/2011/12/using-custom-certificate-trust-store-on.html)）中获得了帮助. 以下是涉及的步骤：

 **1.  **创建自定义信任库**：我使用 Portecle 创建了一个密钥库并将公钥证书从我的服务器导入到其中。
2.  **使用密钥对创建自定义密钥库**： keytool -genkeypair -alias sample -keyalg RSA -sigalg SHA1withRSA -dname "CN=Nazgul, OU=Assault, O=Sauron Enterprises, L=Mordor, ST=Middle Earth, C=ME" -keypass welcome123 -validity 365 -storetype pkcs12 -keystore g:\mordor_key_store.pfx -storepass welcome123 -keysize 2048
3.  **然后，您可以按照nelkov 的**博客中的说明使用它们。您可能还需要创建自己的自定义**AbstractVerifier**，以防您遇到为 abc.com 颁发证书而验证器拒绝 www.abc.com 的情况
4.  最后，要创建安全的 HTTPClient，您可以执行以下操作：

    ```
     public static DefaultHttpClient getSecureHttpClient(){
        SchemeRegistry schemeRegistry = new SchemeRegistry();
        SSLContext sslContext = null;
        try {
            sslContext = createSslContext(true);
        } catch (GeneralSecurityException e) {
            e.printStackTrace();
        }
        final X509HostnameVerifier delegate = new BrowserCompatHostnameVerifier();
        MySSLSocketFactory socketFactory = new MySSLSocketFactory(sslContext, delegate);
        schemeRegistry.register(new Scheme("https", socketFactory, 443));

        DefaultHttpClient client = new DefaultHttpClient();
        HttpParams params = client.getParams();
        client = new DefaultHttpClient(new ThreadSafeClientConnManager(params,
                schemeRegistry), params){
            protected HttpParams determineParams(HttpRequest req) {
                HttpParams params = req.getParams(); // req is an HttpRequest object
                HttpConnectionParams.setSoTimeout(params, 60000);
                HttpConnectionParams.setConnectionTimeout(params, 60000);
                return params;
            }
        };

        return client;
    } 
    ```

关于我选择的详细原因，您可以参考这篇文章[http://fuking-android.quora.com/Implement-HTTPS-for-android-apps-a-novices-tale](http://fuking-android.quora.com/Implement-HTTPS-for-android-apps-a-novices-tale)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:46:32.357

当我尝试向 EWS 请求时，这与[我的问题类似。](https://stackoverflow.com/questions/10068979/request-exchange-web-services-2007-2010-with-soapxml-over-https-in-android)您可以参考[此链接](http://nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html)并下载[示例源代码](https://github.com/nelenkov/custom-cert-https)，然后像我的回答一样对其进行修改。希望这可以帮助！

**更新**：
以下命令对我有用（我大约 2 个月前尝试过）：

```
 C:\OpenSSL-Win32\bin>keytool -importcert -v -trustcacerts -file "d:/cer.cer" 
  -alias parkgroup_restful -keystore "D:/parkgroup-ws-client.bks" 
  -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath 
 "D:/bcprov-jdk16-145.jar" -storetype BKS -storepass 1234567

  .... /**It should show the result here**/

   Trust this certificate? [no]:  yes
   Certificate was added to keystore
   [Storing D:/parkgroup-ws-client.bks]

   C:\OpenSSL-Win32\bin>keytool -list -keystore "D:/parkgroup-ws-client.bks" -provi
   der org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath "D:/bcprov-
   jdk16-145.jar" -storetype BKS -storepass 1234567

   Keystore type: BKS
   Keystore provider: BC

   Your keystore contains 1 entry

   parkgroup_restful, Apr 10, 2012, trustedCertEntry,
   Certificate fingerprint (MD5): 36:47:88:62:23:1C:F3:52:17:BE:7A:A9:94:56:19:18 
```

可以看到，我使用**的是 bcprov-jdk16-145.jar**和 openssl lib。你可以试试。
另一个创建密钥库的工具：http: [//portecle.sourceforge.net/](http://portecle.sourceforge.net/)**

# java - 如何让 Joda 使用 String.format 方法（即 java.util.Formatter 类）？

> ID：10851487
> 
> 赞同：2
> 
> 时间：2012-06-01T13:45:46.317
> 
> 标签：java, formatting, jodatime

是否可以使`org.joda.time.LocalDate.LocalDate`对象与 无缝工作`String.format`？这是一个简单的测试用例来说明我正在尝试做的事情：

```
public class JodaTests {

    @Test
    public void testLocalDateStringFormat() {
        final Logger logger = LoggerFactory.getLogger(JodaTests.class);
        //works, prints: 2012-06-01
        logger.info(String.format("%s", new LocalDate()));
        //works, prints: 06/01/2012
        logger.info(String.format("%1$tm/%1$td/%1$tY", new LocalDate().toDate()));
        //throws java.util.IllegalFormatConversionException: m != org.joda.time.LocalDate
        logger.info(String.format("%1$tm/%1$td/%1$tY", new LocalDate()));
    }

} 
```

很明显，我可以调用`toDate`方法将 转换`LocalDate`为 a `java.util.Date`，然后它可以与[Formatter](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)一起正常工作。但是有没有办法以某种方式配置 Joda 和/或 JDK 以使我在那里的第 3 行（引发异常的行）工作？我尝试过网络搜索，也通过 Joda API 进行了一些搜索，但没有看到任何明显的答案。

**澄清**：我知道 Joda 的内置格式化功能（通过），但由于我正在使用一些库代码，我`DateTimeFormat`特别需要格式化 a 。`LocalDate``String.format`

[如本文](https://blogs.oracle.com/CoreJavaTechTips/entry/using_printf_with_customized_formattable)`Formattable`所述，通过在您的自定义类型中实现接口，似乎有一些有限的功能可以做到这一点。不幸的是，是一个类，所以我不能（轻松）扩展它来实现接口。我想包装类是唯一的方法。或者，当然，通过使用格式字符串然后获取每个单独的字段（即），这在我的情况下是不可取的。`LocalDate``final``%d``LocalDate.getYear`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:50:20.513

您是否需要使用字符串格式化程序，如果您只需要一个字符串，您可以这样做（或使用另一种格式/模式）：

```
DateTimeFormat.forPattern("dd MMM yyyy").print(new LocaDate()); 
```

# c# - jqGrid 数据未显示但正在生成行

> ID：10851493
> 
> 赞同：0
> 
> 时间：2012-06-01T13:46:10.287
> 
> 标签：c#, jquery, asp.net-mvc, json, jqgrid

我正在开发一个 MVC 应用程序。我在我的 aspx 页面中编写了一个 jqGrid。

```
$(document).ready(function () {

            jQuery("#jqgajax").jqGrid({

                url: 'http://localhost:54136/home/fetchData',
                datatype: "json",
                colNames: ['ProcessName', 'WorkingSet64'],
                colModel: [
                            { name: 'ProcessName', index: 'ProcessName', width: 55 },
                            { name: 'WorkingSet64', index: 'WorkingSet64', width: 90 }
                        ],
                rowNum: 80,
                mtype:'Get',
                width: 700,
                rowList: [10, 20, 30],
                sortname:'id',
                viewrecords: true,
                sortorder: "desc",
                caption: "New API Example"
            });
        }); 
```

**控制器上的 C# 代码：**

```
 var jsonData = new
           {
               total =10,
               page = 10,
               records = 10,
               rows = (
                from p in pu
                select new
                {
                    id = ++counter,
                    cell = new
                    {
                        ProcessName = p.ProcessName.ToString(),
                        WorkingSet64 = p.Memory.ToString()
                    }
                }).ToArray()
           };

            return Json(jsonData,JsonRequestBehavior.AllowGet); 
```

**在网格中生成行的问题，但行中没有数据。** ![在此处输入图像描述](../Images/d53acbb3b9996be39443185735615948.png)

请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:07:04.993

默认[jsonReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)等待`cell`作为字符串数组。所以你应该替换代码的一部分

```
cell = new
{
    ProcessName = p.ProcessName.ToString(),
    WorkingSet64 = p.Memory.ToString()
} 
```

到

```
cell = new [] { p.ProcessName, p.Memory.ToString() } 
```

# c# - 如何从给定路径读取和搜索多个 Excel 文件？

> ID：10851494
> 
> 赞同：0
> 
> 时间：2012-06-01T13:46:11.613
> 
> 标签：c#

我是 c# 新手，我想知道关于从给定路径读取多个 excel 文件的要求。就在 UI 中，我将提供一个用于输入路径的文本框，以便可以以这样的方式编写代码，以便从路径中读取所有 .xlsx 文件。

扩展到此要求，我将提供另一个用于输入搜索项的文本框，以便代码可以搜索所有工作簿，如果搜索项与任何单元格内容匹配，则它必须显示与该工作簿对应的工作表名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:52:41.587

研究使用[Office 互操作](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)

您还可以使用 OpenFileDialog 并过滤 xls 文件。

```
OpenFileDialog getFile = new OpenFileDialog();
getFile.Filter = "Excel Files (*.xslx)|*.xlsx|Csv files (*.csv)|*.csv"; 
```

# iphone - 视图的导航控制器

> ID：10851495
> 
> 赞同：1
> 
> 时间：2012-06-01T13:46:17.813
> 
> 标签：iphone, uinavigationcontroller

当我们这样做时

```
self.navigationController.toolBarHidden = NO; 
```

问题：navigationController 从何而来。我看了一下 UIViewController.h 但我根本找不到那个属性

请就此给我建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:54:41.157

查看（在**UINavigationControler.h**`UINavigationControllerItem`中）上的类别：`UIViewController`

 **```
@interface UIViewController (UINavigationControllerItem)

@property(nonatomic,readonly,retain) UINavigationItem *navigationItem; // Created on-demand so that a view controller may customize its navigation appearance.
@property(nonatomic) BOOL hidesBottomBarWhenPushed; // If YES, then when this view controller is pushed into a controller hierarchy with a bottom bar (like a tab bar), the bottom bar will slide out. Default is NO.
@property(nonatomic,readonly,retain) UINavigationController *navigationController; // If this view controller has been pushed onto a navigation controller, return it.

@end 
```**

# javascript - 如何指定应该在 html 文件中加载哪些 requirejs 模块

> ID：10851498
> 
> 赞同：0
> 
> 时间：2012-06-01T13:46:21.870
> 
> 标签：javascript, requirejs

我在任何地方都找不到答案。是否需要这样做或优化器是否以某种方式这样做？

如果缩小的 requirejs 文件变得非常大，是否适合分解 my_main.js 并可能使用 my_main1 和 my_main2？

```
<script type="text/javascript" data-main="my_main.js" src="scripts/require.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:51:57.110

您可以通过“require”和“define”调用指定所需的模块......

您的 index.html 将有一个标签，例如：

```
<script type="text/javascript" data-main="my_main.js" src="scripts/require.js"></script> 
```

在“my_main.js”中，您可以执行以下操作：

```
require(["module1", "module2"], function(module1, module2) {
}); 
```

它将加载到模块 1 和模块 2 中。

当您决定优化代码时，优化器将查看您加载的所有模块及其所有依赖项，并将它们放在一个缩小的文件中。您只需要在优化的构建中加载 index.html 中的那个缩小文件。

# javascript - jQuery $().html 转义 &-sign

> ID：10851501
> 
> 赞同：0
> 
> 时间：2012-06-01T13:46:37.017
> 
> 标签：javascript, jquery

```
var alt = json_data['alt']; // some text
var url = json_data['url']; // some url

var img_url = '<img src=\'/' + url + '?h=100&w=100\' alt=\'' + alt + '\'>';
$('#imagepreview').html(img_url); // translates to <img src="/some_url?h=100&amp;w=100" alt="some_text"> 
```

为什么会发生这种情况，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:49:47.023

`&amp;`实际上是有效的 URL，而不是 &

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:51:53.850

我个人认为不会发生这种情况，但是您应该这样做：

```
var img = $('<img />', {
    src: '/' + url + '?h=100&w=100',
    alt: alt
}).appendTo('#imagepreview'); 
```

这样可以确保正确完成任何转义，例如`alt`属性！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:11:39.127

您必须使用 \u0026 而不是 &

# python - Python 的 smtplib 与 Dovecot/SSL

> ID：10851503
> 
> 赞同：3
> 
> 时间：2012-06-01T13:46:56.377
> 
> 标签：python, ssl, smtp, smtplib, dovecot

我正在尝试使用 Python 的 smtplib 连接到 Dovecot 服务器。两者看起来都很有能力，但我一定错过了一些基本的东西。在任何一个文档中都找不到任何内容。

非 SSL 连接立即被拒绝...

```
Python 2.7.2 (default, Jun 12 2011, 14:24:46) [MSC v.1500 64 bit (AMD64)] on win32
>>> import smtplib
>>> x = smtplib.SMTP()
>>> x.set_debuglevel(True)
>>> x.connect('mail.jc-bell.com', 995)
connect: ('mail.jc-bell.com', 995)
connect: (995, 'mail.jc-bell.com') 
```

SSL 连接似乎很接近，但 Dovecot 期待 ehlo/helo 之外的其他东西

```
>>> import smtplib
>>> x = smtplib.SMTP_SSL()
>>> x.set_debuglevel(True)
>>> x.connect('mail.TheMailServer.com', 995)
connect: ('mail.TheMailServer.com', 995)
connect: ('mail.TheMailServer.com', 995)
reply: '+OK Dovecot ready.\r\n'
reply: retcode (-1); Msg: Dovecot ready.
connect: Dovecot ready.
(-1, 'Dovecot ready.')
>>> x.login('me@TheMailServer.com', '...')
send: 'ehlo my.host\r\n'
reply: '-ERR Unknown command.\r\n'
reply: retcode (-1); Msg: Unknown command.
send: 'helo my.host\r\n'
reply: '-ERR Unknown command.\r\n'
reply: retcode (-1); Msg: Unknown command.
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Software\Python27\lib\smtplib.py", line 564, in login
    self.ehlo_or_helo_if_needed()
  File "C:\Software\Python27\lib\smtplib.py", line 527, in ehlo_or_helo_if_needed
    raise SMTPHeloError(code, resp)
smtplib.SMTPHeloError: (-1, 'Unknown command.') 
```

我错过了什么？

服务器的证书是自签名的，但我认为这不是 CA 问题，因为我已经达到了“+ OK ...”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:51:26.647

Dovecot 是一个 POP3 / IMAP 服务器（用于检查邮件）。smtplib 是一个 SMTP 客户端（用于发送邮件）。要连接到 Dovecot，您需要使用[imaplib](http://docs.python.org/library/imaplib.html)或[poplib 之](http://docs.python.org/library/poplib.html)类的东西。

# asp.net - 加密密钥存储在哪里？

> ID：10851509
> 
> 赞同：3
> 
> 时间：2012-06-01T13:47:13.483
> 
> 标签：asp.net, security, cryptography, encryption-asymmetric

我是密码学新手。我读过对称和非对称算法分别使用一个和两个加密密钥。这些密钥必须存放在安全的地方。但是当我在网上搜索有关如何在 asp.net 中进行加密的教程时，我发现了一些奇怪的东西！例如[本教程](http://www.c-sharpcorner.com/uploadfile/brij_mcn/public-key-encryption-rsa-method-for-encryption-and-decryption-in-Asp-Net/) 。

加密或解密数据时没有存储或提供公钥或私钥！我无法理解。

我遇到的另一个问题是，到目前为止我发现的所有教程都只是代码，没有任何关于这些代码是什么以及为什么使用的解释。我很欣赏任何好的教程建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T15:07:02.953

从[RSACryptoServiceProvider 构造函数](http://msdn.microsoft.com/en-us/library/x8z5e11b.aspx "RSACryptoServiceProvider 构造函数")：

> 如果未找到默认密钥，则会创建一个新密钥。
> 
> 此构造函数创建一个适用于加密会话密钥的交换密钥对，以便可以安全地存储它们并与其他用户交换。生成的密钥对应于使用非托管 Microsoft 加密 API (CAPI) 中使用的 AT_KEYEXCHANGE 值生成的密钥。

因此，如果它找不到已经创建的密钥对，它只是生成一个新的密钥对；除了基于会话的数据之外，您不应该使用它。

一点背景知识（我假设您使用的是 Windows），非对称密钥对与证书相关联。这些证书用于信任非对称密钥。每个证书都可以由证书颁发机构（颁发非对称密钥的颁发机构）签名，如果您信任证书颁发机构，那么您信任属于该颁发机构签署的证书的非对称密钥。所有这些证书都存储在您的“证书存储”中，也就是“密钥存储”（Java）、“密钥环”（Mac）。

您可以通过执行查看您的证书`Start > Run > certmgr.msc`。您的证书位于个人 > 证书下。如果您打开一个，然后转到`Certificate Path`选项卡，您将看到证书链到一个证书颁发机构。如果在您的商店中找到属于证书颁发机构的“根”证书，`Trusted Root Certification Authorities > Certificates`则该证书被视为有效且受信任。

如果你想为用户加密某些东西，你应该进入他的证书存储，并取出他的加密证书。为此，您应该打开“当前用户”密钥库，并遍历其中的所有证书，并挑选出具有“密钥加密”密钥用法的证书，如果有多个，请询问用户的哪个他想用。

If you want to encrypt something using a service account (for example if you were a web server) you should use certificates found in the "Local Machine" key store, and only grant your service account read access to the private key associated with the certificate you want to use.

This can be done using [X509Store Class](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store.aspx), for example:

```
X509Store certificateStore = new X509Store("MY", StoreLocation.CurrentUser);
X509Certificate2Collection allCertificates = certificateStore.Certificates;
//Iterate through all certificates 
```

"MY" represents personal certificates, the rest can be found [here](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx). CurrentUser represents user keys, the other option is LocalMachine.

Once you have the certificate you want to use, you should use the public key for encryption, and the private key for decryption, in conjunction with a symmetric key. So if you had a big set of data you wanted to encrypt, what you would do is:

1.  Get certificate
2.  Pull public key from certificate
3.  生成对称密钥 (AES)
4.  使用对称密钥加密数据
5.  用公钥加密对称密钥
6.  将加密的对称密钥与加密数据一起存储，以及用于加密的证书的标识符（序列号）

解密时，您应该：

1.  从加密数据中读取序列号
2.  使用该序列号从密钥库中提取证书
3.  从该证书中提取私钥
4.  使用该私钥解密对称密钥
5.  使用该对称密钥解密数据
6.  使用数据

我有一堆代码示例可以完成此操作，如果您想看一下，请告诉我您需要帮助的部分。

这可能有点令人困惑，所以让我知道你想要澄清什么。

# c# - 是否可以仅为 MVC / 控制器操作请求执行 IHttpModule？

> ID：10851511
> 
> 赞同：1
> 
> 时间：2012-06-01T13:47:22.767
> 
> 标签：c#, model-view-controller, nhibernate, iis, httphandler

我的 NHibernate 会话管理有一个 HttpModule。

问题是，当加载图片时，每个请求都会调用我的 HttpModule 并创建一个新的 ISession，这是一种愚蠢的做法。

将 HttpModule 配置为仅针对 MVC 请求调用它会很好。否则 HttpModule 不应被图像、css、js 等请求调用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:55:16.860

首先，创建新会话的开销不是很大——它不一定连接到数据库。

其次，如果您只希望它用于 MVC 请求，则可以使用过滤器而不是 MVC 中的模块来打开和关闭会话

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:59:00.077

要回答这个问题，请使用正则表达式查看 Request.Url 以匹配您不想处理的文件扩展名，并在不处理的情况下返回。

# html - 在内容编辑器中更改图像并为每个使用唯一的热点（图像映射）。(html-Sharepoint)

> ID：10851513
> 
> 赞同：0
> 
> 时间：2012-06-01T13:47:23.373
> 
> 标签：html, sharepoint

我有一个html问题。我正在使用 sharepoint - 在 Sharepoint Designer 上工作。我正在尝试将元素组合为当前单独工作的元素。我是 html 新手，所以请原谅我在形成这个问题时缺乏凝聚力。

第一页。我正在使用一个函数在 3 个不同的图像之间进行选择

```
function changeIt(imageName,objName)
{
var obj = document.getElementById(objName);

the if statement below is just how i've been trying to toggle between visible and not based on a certain criteria:
//************ 

if (imageName ==  'http://office-na.ms.com/ops/SecuritiesOperations/Images1/NoneSelected.JPG')
{
document.getElementById('falseyear').style.display = 'block';
}
else
{
document.getElementById('falseyear').style.display = 'none';
}
//**************

var imgTag = "<img src='"+imageName+"' border='0' />";
obj.innerHTML = imgTag;

return; 
}
/script>

</head>

<body>

<a id="one" href="#" onclick="changeIt('http://office-na.com/NoneSelected.JPG','image1');">Main</a>
<a id="two" href="#" onclick="changeIt(,http://office-na.com/PlanningSelected.JPG','image1');">Planning</a>
<a id="three" href="#" onclick="changeIt('http://office-na.com/RequirementSelected.JPG','image1');">Requirement</a>

<div id="image1">
<img src="http://office-na.com/NoneSelected.JPG" border="0" alt="one" usemap="#FPMap0" />
</div>

<div id="falseyear" style="display:none"><h3>The year you entered is not valid</h3></div>
<br/><br/>

</body>
</html> 
```

//第二部分是我为其中一张图片设置了热点（超链接），如下所示

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 1</title>
</head>

<body>

<p><map name="FPMap0" id="FPMap0">
<area title="Click to follow hyperlink" href="http://office-na.ms.com/Templates/Blank%20Template.doc" shape="rect" coords="760, 490, 889, 514" />
<area title="click to follow hyperlink" href="http://office-na.ms.com/Templates/Small%20Template.ppt" shape="rect" coords="760, 512, 889, 537" />
<area title="click to follow hyperlink" href="http://office-na.ms.com/Templates/Large%20Template.ppt" shape="rect" coords="760, 536, 891, 560" />
<area title="Click to follow hyperlink" href="http://office-na.ms.com/Templates/Blank%20Template.ppt" shape="rect" coords="760, 575, 890, 598" />
</map>
<img alt="Practice" src="Best.jpg" width="960" height="720" usemap="#FPMap0" /></p>

</body>

</html> 
```

我想将两者结合起来，以便我可以根据在第一节中选择的图像添加热点。那么有没有办法根据选择的图像添加/更改地图超链接？这就是为什么我在第一部分添加了 if 语句，以查看是否可以根据条件打开和关闭某些内容。这是可以在html中完成的吗？如果不是，我应该研究什么语言？ASP.NET? Javascript？

感谢您花时间阅读和回复，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:20:14.553

大家好，所以我拼凑了一个解决方案。可能不是最好的，但它有效

我创建了两个文档库，其中包含相互链接的热链接，并且还具有模板文件夹中每个唯一图像（计划和要求）所需的文件（dox、ppt 等）的热链接。我知道必须有一种更优雅的方式来做到这一点。但想分享解决方案。

感谢这么多人查看这个问题，尽管没有任何评论/建议的答案..tumbleweed..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 3</title>
</head>

<body>

<map name="FPMap0" id="FPMap0">
<area title="Click to follow hyperlink" href="http://office.com/Templates/Planning/Checklist.xlsx" shape="rect" coords="736, 487, 826, 513" />
<area title="Click to follow hyperlink" href="http://officecom/Templates/Planning/Plan.mpp" shape="rect" coords="833, 529, 897, 552" />
<area title="Click to follow hyperlink" href="http://office.com/Templates/Planning/TEMPLATE_v2.ppt" shape="rect" coords="736, 567, 826, 591" />
<area title="Click to follow hyperlink" href="http://office.com/Templates/Planning/Template.mpp" shape="rect" coords="737, 529, 826, 551" />

<area title="Go to Page 2" href="http://office.com/Require/Forms/AllItems.aspx" shape="rect" coords="256, 144, 377, 177" />
</map>

<img src="actices/Images1/Best.jpg" usemap="#FPMap0"/>

</body>

</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 1</title>
</head>

<body>

<p><map name="FPMap0" id="FPMap0">
<area title="Click to follow hyperlink" href="http://office.com/Templates/Information.docx" shape="rect" coords="240, 448, 489, 472" />
<area title="Click to follow hyperlink" href="http://office.com/Templates/Template.doc" shape="rect" coords="760, 490, 889, 514" />
<area title="click to follow hyperlink" href="http://office.com/Templates/Example.docx" shape="rect" coords="760, 512, 889, 537" />
<area title="click to follow hyperlink" href="http://office.com/Templates/_Example.docx" shape="rect" coords="760, 536, 891, 560" />
<area title="Click to follow hyperlink" href="http://office.com/Templates/Examples.vsd" shape="rect" coords="760, 575, 890, 598" />

<area title="Go to Page 1" href="http://office.com/Plan/Forms/AllItems.aspx" shape="rect" coords="136, 144, 240, 177" />

</map>
<img src="Images1/Require.jpg" width="960" height="720" usemap="#FPMap0" /></p>

</body>

</html> 
```

# java - 使用套接字 ID 的套接字详细信息

> ID：10851515
> 
> 赞同：0
> 
> 时间：2012-06-01T13:47:34.677
> 
> 标签：java, c, sockets

这个问题听起来很基础。c 或 Java 中是否有任何函数可以让我仅使用套接字标识符来获取套接字详细信息，例如端口、地址、缓冲区大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:06:57.337

下面发布了一些与我有关的最少信息。

我对Java了解不多。但就'C'而言，您可以使用[getsockopt](http://linux.die.net/man/3/getsockopt)函数来获取套接字的缓冲区大小（发送缓冲区和接收缓冲区）。

看来[getsockname](http://linux.die.net/man/2/getsockname)可以帮助您获取套接字绑定到的 ip 和端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:15:57.170

在函数accept的c中：

```
csock = accept(sock, (struct sockaddr*)&csin, &recsize); 
```

*   sock 是套接字服务器（int）
*   csock 是套接字客户端（int）
*   recsize 是大小
*   csin 是一个包含客户详细信息的结构
    *   csin.sin_addr 是客户端的地址
    *   csin.sin_port 是客户端的端口

从套接字 ID 试试这个：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>

f()
{
   int s;
   struct sockaddr_in sa;
   int sa_len;
   .
   .
   .
      /* We must put the length in a variable.              */
   sa_len = sizeof(sa);
      /* Ask getsockname to fill in this socket's local     */
      /* address.                                           */
   if (getsockname(s, &sa, &sa_len) == -1) {
      perror("getsockname() failed");
      return -1;
   }

  /* Print it. The IP address is often zero beacuase    */
  /* sockets are seldom bound to a specific local       */
  /* interface.                                         */
   printf("Local IP address is: %s\n", inet_ntoa(sa.sin_add r));
   printf("Local port is: %d\n", (int) ntohs(sa.sin_port));
   .
   .
   .
} 
```

# tsql - TSQL：使用动态 WHERE 选择来自另一个表

> ID：10851520
> 
> 赞同：1
> 
> 时间：2012-06-01T13:47:51.510
> 
> 标签：tsql, sql-server-2005, where-clause

我正在为客户开发一个统计数据解决方案，现在我需要通过使用来自**另一个表**的动态条件（由客户填写并且它可以每天更改）来选择一些行`from a table`（**销售数据）。**

 **另外我需要使用光标来执行更多的计算和其他的东西所以这是场景：

```
DECLARE cRiga CURSOR LOCAL FAST_FORWARD FOR
    -- here i will put the SELECT ...
OPEN cRiga
    FETCH NEXT FROM cRiga INTO @field1, @field2, @field3, ...
    WHILE @@FETCH_STATUS = 0
    BEGIN
        -- do some stuff here ...
        FETCH NEXT FROM cRiga INTO @field1, @field2, @field3, ...
    END
CLOSE cRiga
DEALLOCATE cRiga 
```

这是我可以找到动态条件的**条件表**（请参阅列 Completa = 0）

```
IDIncentive CdMarca CdSettore CdGruppo Completa
----------- ------- --------- -------- -----------
1           COES    NULL      NULL     1
1           DELONG  10        0024     0  <
1           RHOSS   NULL      NULL     1
1           SILE    10        0012     0  <
1           SILE    11        0025     0  <
1           THERMI  NULL      NULL     1
....... more rows ... 
```

为了更清楚，我尝试将许多查询中所需的 SQL 分解为：

```
Select Field1, ... from SELLDATA 
where IDIncentive=1 and CdMarca='DELONG' and CdSettore=10 and CdGruppo='0024'
UNION ALL
Select Field1, ... from SELLDATA 
where IDIncentive=1 and CdMarca='SILE' and CdSettore=10 and CdGruppo='0012'
UNION ALL
Select Field1, ... from SELLDATA 
where IDIncentive=1 and CdMarca='SILE' and CdSettore=11 and CdGruppo='0025' 
```

你可以想象我不能这样做，因为客户每天都会改变条件，所以我的问题是：

**我如何创建一个具有在光标中使用的所有条件（如我上面的示例）的选择？有办法吗？**

感谢谁能帮助我，如果需要更多信息以更清楚地说明这个问题，请告知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:12:46.680

假设您实际上需要一个游标（10 次中有 9 次不需要），您可以使用动态 SQL 和 sp_executesql 在运行时创建任意游标：

```
declare @cursor cursor
declare @sql nvarchar(max)
declare @dynamic_part nvarchar(max)
declare @name sysname

set @dynamic_part = 'tables'
set @sql = '
  set @cursor = cursor static for select top (100) name from sys.'+@dynamic_part+'
  open @cursor'

exec sp_executesql @sql, N'@cursor cursor output', @cursor output 
while 1=1 begin
  fetch next from @cursor into @name
  if @@fetch_status <> 0 break
  print @name
end
close @cursor deallocate @cursor 
```

或者，您可以创建临时表，通过动态 SQL 填充临时表，然后针对临时表定义游标：

```
declare @cursor cursor
declare @sql nvarchar(max)
declare @dynamic_part nvarchar(max)
declare @name sysname

if object_id('tempdb..#these_things') is not null drop table #these_things
create table #these_things (name sysname)

set @dynamic_part = 'tables'
set @sql = 'insert #these_things (name) select top (100) name from sys.'+@dynamic_part
exec (@sql)

set @cursor = cursor fast_forward for select name from #these_things
open @cursor
while 1=1 begin
  fetch next from @cursor into @name
  if @@fetch_status <> 0 break
  print @name
end
close @cursor deallocate @cursor 
```

这可能更干净一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:23:58.833

您可以使用已经存在的 ConditionTable 表通过连接来过滤 SELLDATA：无游标，无联合所有。

```
Select Field1, ... 
  from SELLDATA 
 inner join ConditionTable
    ON SELLDATA.IDIncentive=ConditionTable.IDIncentive 
   and SELLDATA.CdMarca=ConditionTable.CdMarca
   and SELLDATA.CdSettore=ConditionTable.CdSettore
   and SELLDATA.CdGruppo=ConditionTable.CdGruppo
 where ConditionTable.Completa = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:51:37.283

我认为子查询应该对您有所帮助。

[http://dev.mysql.com/doc/refman/5.1/en/subqueries.html](http://dev.mysql.com/doc/refman/5.1/en/subqueries.html)**

# cocoa - List of kAB*** properties?

> ID：10851522
> 
> 赞同：0
> 
> 时间：2012-06-01T13:48:01.107
> 
> 标签：cocoa, addressbook, appkit

The AddressBook framework has a list of constants, like `kABFirstNameProperty`. I'm wondering if there's a list of those that I could display in a user interface, other than having to "replicate" this myself?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:46:12.297

In the C-based Address Book API for the Mac, there's [a function named `ABCopyArrayOfPropertiesForRecordType`](http://developer.apple.com/library/mac/documentation/UserExperience/Reference/AddressBook/C/ABAddressBookRef/Reference/reference.html#//apple_ref/c/func/ABCopyArrayOfPropertiesForRecordType) that sounds like exactly what you need.

I would hope that the property keys would be equal to those in the Objective-C AB API, if that's what you're using, but you should probably test that—or just use the C-based API.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T01:19:16.360

I just found the Objective-C API's equivalents to the `ABCopyArrayOfPropertiesForRecordType` function. Two methods:

*   [`+[ABPerson properties]`](http://developer.apple.com/library/mac/documentation/UserExperience/Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/occ/clm/ABPerson/properties)
*   [`+[ABGroup properties]`](http://developer.apple.com/library/mac/documentation/UserExperience/Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/clm/ABGroup/properties)

Since these are class methods, you should find that they return all known properties for any records of that type.

# struts2 - 在 freemarker 中显示 maven pom 版本

> ID：10851524
> 
> 赞同：1
> 
> 时间：2012-06-01T13:48:21.153
> 
> 标签：struts2, freemarker, pom.xml

在 jsp 中，我可以使用 ${version} 轻松显示 .pom 的版本。

当我在 freemarker 模板中尝试相同的操作时，逻辑上会调用操作 getVersion 方法（struts2）。

有没有办法直接在 freemarker 模板中显示 maven 版本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:41:12.310

我这样做的方法是在 src/main/resources 目录中添加一个像“applicationResources.properties”这样的属性文件，并带有一个版本属性：

```
application.version=${version} 
```

然后在 pom 中添加：

```
<resources>
   <resource>
      <directory>src/main/resources</directory>
      <filtering>true</filtering>
   </resource>
</resources> 
```

然后在struts.xml中添加：

```
<constant name="struts.custom.i18n.resources" value="applicationResources" /> 
```

然后在我的 JSP 中：

```
<s:text name="application.version" /> 
```

对于 Freemarker，您应该能够使用：

```
<@s.text name="application.version" /> 
```

# javascript - 试图在悬停时解释 jQuery/冻结窗格

> ID：10851526
> 
> 赞同：0
> 
> 时间：2012-06-01T13:48:37.633
> 
> 标签：javascript, jquery

所以我正在尝试阅读一些几年前由我的组织编写的 jQuery。我对 jQuery 不是很精通（但我对 Javascript 很熟悉）。如果用户将鼠标悬停在幻灯片上，我试图阻止幻灯片旋转到下一张幻灯片。

这是代码的第一部分，我认为它所决定的只是幻灯片应该出现的位置和方式。我认为它还说幻灯片将每 7 秒切换一次。

```
var current_slide_index = 0; //The index of the slide being displayed;
var timer; //the timer counting the delay to the transition
var time_delay = 7000;

    $(document).ready( function() {

        $('.pane:first').addClass('current');

        if (!$.support.opacity) $('.panes .pane').not('.current').hide();

        $('.tabs a').click( function(e) {
            e.preventDefault();

            var triggers = $('.tabs a');
            current_slide_index = triggers.index($(this));

            showSlide();

            });

        });

function showSlide() //Show the slide indicated by current_slide_index
{
    var triggers = $('.tabs a');
    triggers.removeClass('current').eq(current_slide_index).addClass('current');
            var old_slide = $('.panes .pane.current');

            if (!$.support.opacity) {
                old_slide.children().fadeOut(500, function() {
                    old_slide.removeClass('current').hide();
                    $('.panes .pane').eq(current_slide_index).addClass('current').show().children().fadeIn(300);
                    });
            } else {
                old_slide.removeClass('current').fadeOut(500, function() {
                    $('.panes .pane').eq(current_slide_index).addClass('current').fadeIn(300);
                    });
                }

    clearTimeout(timer);
    timer = setTimeout('rotateSlide()',time_delay);

} 
```

我相信这是我必须停止的部分 - 我可以通过设置某种条件来确定我是否将鼠标悬停在相关幻灯片上吗？这就是我缺乏 jQuery 知识伤害我的地方 - 我没有最模糊的如何停止滑块。

```
function rotateSlide() //move the slide to the next one
{
        //calculate the next index
        var triggers = $('.tabs a');
        //wrap to index zero if necessary
        current_slide_index = (current_slide_index + 1) % triggers.length;

        //Now show the new slide
        showSlide();

}

timer = setTimeout('rotateSlide()',time_delay); 
```

所以我的问题是，谁能更清楚地为我解释这段代码，如果你将鼠标悬停在滑块上，有没有办法防止滑块滑动？

据我所知，我可以选择#slider 并使用类似的东西（这是伪代码）

```
if ($("slider").hover) {
blah blah blah thing that prevents slide from rotating
}
else {
code that allows rotating
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:59:38.010

您对代码的理解非常准确。为了实现您想要的功能，我会做几件事。首先，将计时器代码移动到一对函数中，如下所示：

```
function holdThisSlide() {
  clearTimeout(timer);
}

function showNextSlideIn(delay) {
  delay = delay || time_delay;
  holdThisSlide();
  timer = setTimeout('rotateSlide()',delay);
} 
```

接下来，将调用放在您刚刚删除 clearTimeout/setTimeout 行`showNextSlideIn()`的底部。`showSlide`

最后，在函数定义上方添加悬停行为：

```
$(".panes .pane").hover(
  function() { holdThisSlide(); },
  function() { showNextSlideIn(); }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:57:38.800

您发布的代码写得不是很好，但这里有一个快速修复来做您想做的事情。可能最好的方法是在鼠标悬停在幻灯片容器上时简单地清除超时，并在鼠标离开时设置新的超时。

它应该看起来像：

```
$('#slidecontainer').hover(    // setting hover handlers for #slidecontainer
    function() {    // mouse enter
        clearTimeout(timer);
    },
    function() {    // mouse leave
        timer = setTimeout('rotateSlide()', time_delay);
    }
) 
```

# jquery - 使用 jQuery 将行添加到表的 tbody

> ID：10851527
> 
> 赞同：80
> 
> 时间：2012-06-01T13:48:46.777
> 
> 标签：jquery, dynamic, html-table, rows

我正在尝试向`tbody`表中添加行。但我在实现这一目标方面遇到了问题。首先，在从 html 页面更改下拉菜单时调用发生所有事情的函数。我创建了一个`tr`字符串`td`，其中包含包含 html 元素、文本和其他内容的所有内容。但是当我尝试使用以下方法将生成的行添加到表中时：

```
$(newRowContent).appendTo("#tblEntAttributes tbody"); 
```

我遇到一个错误。表的名称是`tblEntAttributes`，我正在尝试将其添加到`tbody`.

实际上发生的事情是 jQuery 无法`tblEntAttributes`作为 html 元素获取。但我可以使用它访问它`documemt.getElementById("tblEntAttributes");`

有什么方法可以通过向`tbody`表中添加行来实现这一点。可能是绕道之类的。

这是整个代码：

```
var newRowContent = "<tr><td><input type=\"checkbox\" id=\"" + chkboxId + "\" value=\"" + chkboxValue + "\"></td><td>" + displayName + "</td><td>" + logicalName + "</td><td>" + dataType + "</td><td><input type=\"checkbox\" id=\"chkAllPrimaryAttrs\" name=\"chkAllPrimaryAttrs\" value=\"chkAllPrimaryAttrs\"></td><td><input type=\"checkbox\" id=\"chkAllPrimaryAttrs\" name=\"chkAllPrimaryAttrs\" value=\"chkAllPrimaryAttrs\"></td></tr>";

$("#tblEntAttributes tbody").append(newRowContent); 
```

我忘记提到的一件事是编写此代码的函数实际上是 ajax 调用的成功回调函数。我可以使用访问表格，`document.getElementById("tblEntAttributes")`但由于某种原因`$(#tblEntAttributes)`似乎不起作用。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-01T13:51:44.567

`("#tblEntAttributes tbody")`

需要是

`$("#tblEntAttributes tbody")`.

您没有选择具有正确语法的元素

这是两者的示例

```
$(newRowContent).appendTo($("#tblEntAttributes")); 
```

和

```
$("#tblEntAttributes tbody").append(newRowContent); 
```

工作 [http://jsfiddle.net/xW4NZ/](http://jsfiddle.net/xW4NZ/)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-10-16T11:56:22.773

用这个

```
$("#tblEntAttributes tbody").append(newRowContent); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-04T06:33:37.837

我从来没有遇到过这样奇怪的问题！oO

你知道问题是什么吗？$ 不工作。我用 jQuery 尝试了相同的代码，`jQuery("#tblEntAttributes tbody").append(newRowContent);`它就像一个魅力！

不知道为什么会出现这个奇怪的问题！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-01T14:21:43.783

这是使用您提到的 html 下拉列表的 appendTo 版本。它在“更改”上插入另一行。

```
$('#dropdown').on( 'change', function(e) {
    $('#table').append('<tr><td>COL1</td><td>COL2</td></tr>');
}); 
```

有一个例子供你玩。祝你好运！

[http://jsfiddle.net/xtHaF/12/](http://jsfiddle.net/xtHaF/12/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-01T13:59:05.873

正如@wirey所说`appendTo`应该可以工作，如果没有，那么你可以试试这个：

```
$("#tblEntAttributes tbody").append(newRowContent); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-08T23:41:11.523

使用 Lodash，您可以创建一个模板，您可以通过以下方式执行此操作：

```
 <div class="container">
        <div class="row justify-content-center">
            <div class="col-12">
                <table id="tblEntAttributes" class="table">
                    <tbody>
                        <tr>
                            <td>
                                chkboxId
                            </td>
                            <td>
                               chkboxValue
                            </td>
                            <td>
                                displayName
                            </td>
                            <td>
                               logicalName
                            </td>
                            <td>
                                dataType
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button class="btn btn-primary" id="test">appendTo</button>
            </div>
        </div>
     </div> 
```

这里是javascript：

```
 var count = 1;
        window.addEventListener('load', function () {
            var compiledRow = _.template("<tr><td><input type=\"checkbox\" id=\"<%= chkboxId %>\" value=\"<%= chkboxValue %>\"></td><td><%= displayName %></td><td><%= logicalName %></td><td><%= dataType %></td><td><input type=\"checkbox\" id=\"chkAllPrimaryAttrs\" name=\"chkAllPrimaryAttrs\" value=\"chkAllPrimaryAttrs\"></td><td><input type=\"checkbox\" id=\"chkAllPrimaryAttrs\" name=\"chkAllPrimaryAttrs\" value=\"chkAllPrimaryAttrs\"></td></tr>");
            document.getElementById('test').addEventListener('click', function (e) {
                var ajaxData = { 'chkboxId': 'chkboxId-' + count, 'chkboxValue': 'chkboxValue-' + count, 'displayName': 'displayName-' + count, 'logicalName': 'logicalName-' + count, 'dataType': 'dataType-' + count };
                var tableRowData = compiledRow(ajaxData);
                $("#tblEntAttributes tbody").append(tableRowData);
                count++;
            });
        }); 
```

这是在[jsbin中](https://jsbin.com/xiqaloh/2/edit?js,output)

# asp.net - 网格视图问题

> ID：10851528
> 
> 赞同：1
> 
> 时间：2012-06-01T13:48:52.470
> 
> 标签：asp.net, sql, vb.net, gridview

我有一个带有四个模板字段的gridview，我需要能够将信息放入以保存到数据库中。当我点击编辑按钮并且我的列更改为编辑模式时，我可以很好地输入信息......但是当我尝试循环通过控件获取信息时，它什么也没得到？

```
Private Sub gvOLIAdj_RowEditing(sender As Object, e As System.Web.UI.WebControls.GridViewEditEventArgs) Handles gvOLIAdjst.RowEditing     
    gvOLIAdjst.EditIndex = e.NewEditIndex     
    BindData()  
End Sub 
```

这是我到目前为止的更新活动......有什么想法吗？我只是不这样做吗？

```
Private Sub gvOLIAdj_RowUpdating(sender As Object, e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles gvOLIAdjst.RowUpdating     
Dim dts As DataTable = DirectCast(Session("BudgetsTable"), DataTable)     
Dim row As GridViewRow = gvOLIAdjst.Rows(e.RowIndex)     
If DirectCast(row.FindControl("txtItemTempTtlAmt"), TextBox).Text = "" Then           
    lblError.Text = "Invalid Entry. Correct and try again"         
    e.Cancel = True     
Else        
    lblError.Text = ""         
    dts.Rows(row.DataItemIndex)("Approval Date") = DirectCast(row.FindControl("txtItemTempApprDt"), TextBox).Text         
    dts.Rows(row.DataItemIndex)("Total Amount") = DirectCast(row.FindControl("txtItemTempTtlAmt"), TextBox).Text         
    dts.Rows(row.DataItemIndex)("Comments") = DirectCast(row.FindControl("txtItemTempCmmt"), TextBox).Text         
    dts.Rows(row.DataItemIndex)("Initials") = DirectCast(row.FindControl("lblItemTempInit"), Label).Text          

    gvOLIAdjst.EditIndex = -1         
    BindData()      
End If
If Not IsPostBack Then
        result = dal.dbConnect(sqlconnection, ConfigurationManager.AppSettings("SQLServerConnection"))
        If result = "Successful" Then
            dt = ExecuteInsertUpdateDeleteStoredProc(sqlconnection, "@amt", txtItemTempApprDt.text)
            dbClose
        End If

    End If 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:55:14.010

尝试删除此检查（如果您在 rowupdating 事件中从模板控件中获取值）：

```
If Not IsPostBack Then

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:26:17.457

我不会从 GridView 行中提取控件，而是使用[`GridViewUpdateEventArgs`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.aspx)您可以访问的变量。您可以从属性中提取值[`NewValues`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.newvalues.aspx)（您可能还需要其他有用的属性 - 例如`OldValues`和`RowIndex`）。

您可以像这样访问它们：

```
e.NewValues("Data Field Name").ToString() 
```

其中“数据字段名称”是该值的键（您`GridView`的数据集中的字段名称）。

像这样的东西应该工作

```
dts.Rows(row.DataItemIndex)("Approval Date") = e.NewValues("Approval Date").ToString()
dts.Rows(row.DataItemIndex)("Total Amount") = e.NewValues("Total Amount").ToString()
dts.Rows(row.DataItemIndex)("Comments") = e.NewValues("Comments").ToString()
dts.Rows(row.DataItemIndex)("Initials") = e.NewValues("Initials").ToString() 
```

我在那里显示的键可能不完全正确，因为我看不到您如何将数据绑定到 GridView。我相信，您可以设置断点并检查“NewValues”字典以找到确切的键。如果您有任何问题，请告诉我。

# iphone - ibook 之类的应用程序中的放大和缩小功能

> ID：10851531
> 
> 赞同：2
> 
> 时间：2012-06-01T13:48:58.787
> 
> 标签：iphone, zooming, uitapgesturerecognizer, ibooks, uiswipegesturerecognizer

我是图形编程的新手，并且正在学习它。我正在开发一个类似于 iBooks 的应用程序。[来自github的代码](https://github.com/brow/leaves)

它工作得很好。如果有任何机构可以给我正确的指示/方法，我怎样才能使它放大/缩小。我是否应该关注/接近图层类（所有图层创建所在的位置）来实现放大/缩小功能。到目前为止，我一直在 UIViewController 类中尝试这样的事情

```
#import "LeavesView.h"

@interface LeavesViewController : UIViewController <LeavesViewDataSource, LeavesViewDelegate,UIScrollViewDelegate,UIGestureRecognizerDelegate> {  
    LeavesView *leavesView;    
    UIScrollView *theScrollView;    
}

-(void) zoomStuff;
// added by Lnkd.com?24 - use designated initializer to avoid continuous loop when loaded from NIB
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle;

-(id)init;

@end  

    #define ZOOM_AMOUNT 0.25f  
    #define NO_ZOOM_SCALE 1.0f  
    #define MINIMUM_ZOOM_SCALE 1.0f  
    #define MAXIMUM_ZOOM_SCALE 5.0f  
    #define NAV_AREA_SIZE 48.0f    
    - (void)loadView {  
    [super loadView];  
    leavesView.frame = self.view.bounds;  
    leavesView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;  
    [self zoomStuff];     
}  

- (void) viewDidLoad {  
    [super viewDidLoad];  

    leavesView.dataSource = self;  
    leavesView.delegate = self;  
    leavesView.backgroundColor=[UIColor redColor];  
    [leavesView reloadData];  
}  
-(void) zoomStuff  
{
    UITapGestureRecognizer *tapGesture = nil;  
    UISwipeGestureRecognizer *swipeGesture = nil;  

    theScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];  

    theScrollView.scrollsToTop = NO;  
    theScrollView.directionalLockEnabled = YES;  
    theScrollView.showsVerticalScrollIndicator = NO; 
    theScrollView.showsHorizontalScrollIndicator = NO;  
    theScrollView.contentMode = UIViewContentModeRedraw;  
    theScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;  
    theScrollView.minimumZoomScale = MINIMUM_ZOOM_SCALE;  
 theScrollView.maximumZoomScale = MAXIMUM_ZOOM_SCALE;  
    theScrollView.contentSize = theScrollView.bounds.size;  
    theScrollView.backgroundColor = [UIColor yellowColor];  
    theScrollView.delegate = self;  

    [self.view addSubview:theScrollView];
    [theScrollView addSubview:leavesView];

    tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchesOne:)]; 
    tapGesture.cancelsTouchesInView = NO; 

 tapGesture.delaysTouchesEnded = NO; 
//tapGesture.delegate = self;  
    tapGesture.numberOfTouchesRequired = 1; 
tapGesture.numberOfTapsRequired = 1; 
// One finger single tap
    [self.view addGestureRecognizer:tapGesture];
   [tapGesture release];  

    tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchesOne:)];

    tapGesture.cancelsTouchesInView = NO;
   tapGesture.delaysTouchesEnded = NO;   
//tapGesture.delegate = self;    
    tapGesture.numberOfTouchesRequired = 1;
   tapGesture.numberOfTapsRequired = 2; 
// One finger double tap  
    [self.view addGestureRecognizer:tapGesture];
 [tapGesture release];  

    tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchesTwo:)];

    tapGesture.cancelsTouchesInView = NO;
   tapGesture.delaysTouchesEnded = NO;  
 //tapGesture.delegate = self;  

    tapGesture.numberOfTouchesRequired = 2;

   tapGesture.numberOfTapsRequired = 2;  
 // Two finger double tap

    [leavesView addGestureRecognizer:tapGesture];
 [tapGesture release];

}

- (void)handleTouchesOne:(UITapGestureRecognizer *)recognizer
{  
    CGRect tapAreaRect = CGRectZero;  
    CGRect viewBounds = recognizer.view.bounds;  
    CGPoint tapLocation = [recognizer locationInView:recognizer.view];  
    NSInteger numberOfTaps = recognizer.numberOfTapsRequired;  

    // Page increment (single or double tap)  

    tapAreaRect.size.width = NAV_AREA_SIZE;  
    tapAreaRect.origin.y = (viewBounds.origin.y + NAV_AREA_SIZE);  
    tapAreaRect.origin.x = (viewBounds.size.width - NAV_AREA_SIZE);  
    tapAreaRect.size.height = (viewBounds.size.height - NAV_AREA_SIZE);   

    // Page decrement (single or double tap)  

    tapAreaRect.size.width = NAV_AREA_SIZE;  
    tapAreaRect.origin.x = viewBounds.origin.x;  
    tapAreaRect.origin.y = (viewBounds.origin.y + NAV_AREA_SIZE);  
    tapAreaRect.size.height = (viewBounds.size.height - NAV_AREA_SIZE);  

    if (numberOfTaps == 1) // Reader toolbar (single tap)  
    {
        tapAreaRect.size.height = NAV_AREA_SIZE;  
        tapAreaRect.origin.x = viewBounds.origin.x;  
        tapAreaRect.origin.y = viewBounds.origin.y;  
        tapAreaRect.size.width = viewBounds.size.width;  

    }  

    if (numberOfTaps == 2)  // Zoom area handling (double tap)  
    {  
        tapAreaRect = CGRectInset(viewBounds, NAV_AREA_SIZE, NAV_AREA_SIZE);  

        if (CGRectContainsPoint(tapAreaRect, tapLocation))  
        {
            CGFloat zoomScale = theScrollView.zoomScale;  

            if (zoomScale < MAXIMUM_ZOOM_SCALE) // Zoom in if below maximum zoom scale  
            {  
                zoomScale = ((zoomScale += ZOOM_AMOUNT) > MAXIMUM_ZOOM_SCALE) ? MAXIMUM_ZOOM_SCALE : zoomScale;  

                [theScrollView setZoomScale:zoomScale animated:YES];  
            }  
        }  
    }  
}  

- (void)handleTouchesTwo:(UITapGestureRecognizer *)recognizer  
{  
    CGRect viewBounds = recognizer.view.bounds;  
    CGPoint tapLocation = [recognizer locationInView:recognizer.view];  

    CGRect tapAreaRect = CGRectInset(viewBounds, NAV_AREA_SIZE, NAV_AREA_SIZE);  

    if (CGRectContainsPoint(tapAreaRect, tapLocation))  
    {  
        CGFloat zoomScale = theScrollView.zoomScale;  

        if (zoomScale > MINIMUM_ZOOM_SCALE) // Zoom out if above minimum zoom scale  
        {  
            zoomScale = ((zoomScale -= ZOOM_AMOUNT) < MINIMUM_ZOOM_SCALE) ? MINIMUM_ZOOM_SCALE : zoomScale;  

            [theScrollView setZoomScale:zoomScale animated:YES];
        }
    }
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)this shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)that  
{
    if ([this isMemberOfClass:[UISwipeGestureRecognizer class]])  
        return YES;  
    else  
        return NO;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:37:51.630

在 LeavesViewController 中

设置`scrollView.delegate = self;` 然后添加以下

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scroll
{
    return leavesView;
} 
```

这应该允许 LeavesView 缩放

# java - 如何使用 Netbeans 7.2 和 Maven 设置系统属性？

> ID：10851534
> 
> 赞同：2
> 
> 时间：2012-06-01T13:49:21.310
> 
> 标签：java, maven, netbeans, junit, system-properties

我正在 NetBeans 7.2 中运行单元测试。使用 Maven。

如何设置系统属性？

我尝试使用以下方法添加属性：

项目属性 > 运行 > JVM 参数

但这并没有什么不同。我认为这可能与在不同的 JVM 中运行的 JUnit 有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T07:23:18.970

由于 NetBeans 与 Maven 很好地集成，它将使用 Maven 配置 (POM) 来处理生命周期，例如清理、构建（安装）和测试。例如，当您*右键单击项目*并选择“*清理并构建*”时，您可能会看到如下内容：

```
cd D:\temp\prj\netbeans\dummy; 
JAVA_HOME=C:\\Java.Application\\Sun\\Java\\jdk1.6.0_31 "\"
C:\\Java.Application\\Sun\\NetBeans 7.1\\java\\maven\\bin\\mvn.bat\"" 
clean install 
```

我正在使用[maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/)设置/传递系统属性，如下所示：-

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <encoding>UTF-8</encoding>
                <systemProperties>
                    <property>
                        <name>DEF</name>
                        <value>456</value>
                    </property>
                </systemProperties>
                <argLine>-DABC=123</argLine>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

您可能会看到有 2 个位置用于传递系统属性，如下所示：

1.  系统**属性**标签
2.  **argLine**标记_

关于***argLine 标记***，您不仅可以传递系统属性，还可以传递任何进一步的 JVM 参数，例如 -Xms、-Xmx。

[您可以在此处](http://maven.apache.org/plugins/maven-surefire-plugin/examples/system-properties.html)查看有关系统属性和 argLine的更多[信息](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#argLine)。

# ios - 在滚动实时 CorePlot 散点图上更新 X 轴

> ID：10851536
> 
> 赞同：2
> 
> 时间：2012-06-01T13:49:31.590
> 
> 标签：ios, ipad, core-plot

我正在尝试在装有 iOS 5.1 的 iPad 上使用 CorePlot 1.0 实现实时散点图。有几个问题和一个主要的例外 - 轴重绘，事情进展顺利。

当收集到足够的数据时，我会调整 plotSpace 中的范围：

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(self.graphMinX)
                                                length:CPTDecimalFromFloat(self.graphRangeX)]; 
```

当我这样做时，图表上的图会调整，就好像轴已经改变一样，*但轴没有调整*- 所以数据图正确显示在不正确的轴上。停止数据源后，轴将正确更新 5 秒。

我已经查看了 CorePlot iOS Plot Gallery 中[RealTimePlot](http://code.google.com/p/core-plot/source/browse/examples/CorePlotGallery/src/plots/RealTimePlot.m) (RTP) 中的代码，但我找不到任何*显着*差异（尽管肯定存在）。

我的代码和 RTP 之间的一个区别：

我在后台 GCD 队列中捕获新数据，然后通过将其附加到`[NSNotificationCenter defaultCenter]`

**更新：** 架构层次结构的简化视图是这样的：

*   拆分视图控制器
*   *   细节视图控制器
*   *   *   `TreatmentGraph`对象（管理`CPTXYGraph`）
*   *   *   *   [集合]`TreatmentChannel`对象（每个管理一个`CPTXYPlot`）

有一个数据通知的`DetailViewController`观察者，如下所示：

```
- (void)dataArrived:(NSNotification *)notification
{
    FVMonitoredSignal *sig = [notification object];

    NSValue *currValue = [sig.dataPoints lastObject];
    CGPoint point = [currValue CGPointValue];

    [self.treatmentGraph addPoint:point toChannelWithIdentifier:sig.signalName];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.graphHostingView.hostedGraph reloadData];
    });

    return;
} 
```

（请注意，我使用 GCD 将数据强制重新加载到 UI 队列 - RTP 中的示例似乎不需要这样做）这是一个危险信号，但是什么？

在`TreatmentGraph`我们检查是否需要调整 X 轴并将数据发送到适当的`TreatmentChannel`.

```
- (void)addPoint:(CGPoint)point toChannelWithIdentifier:(NSString *)identifier
{
    // Check for a graph shift
    if (point.x >= (self.graphMinX + self.graphRangeX))
    {
        [self shiftGraphX];
    }

    FVTreatmentChannel *channel = [self.channels objectForKey:identifier];
    [channel addPoint:point];

    return;
}

- (void)shiftGraphX
{
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(self.graphMinX) length:CPTDecimalFromFloat(self.graphRangeX)];
} 
```

我的猜测是在主队列空闲之前轴不会更新，但是由于我已经在新数据到达时强制重新加载，所以我很困惑为什么轴重绘不会发生。

接受这样的`TreatmentChannel`新数据：

```
- (void)addPoint:(CGPoint)point
{
    [self.plotData addObject:[NSValue valueWithCGPoint:point]]; // cache it
    [self.plot insertDataAtIndex:self.plotData.count-1 numberOfRecords:1];
    [self.plot reloadData];
} 
```

请注意，我`-insertDataAtIndex:numberOfRecords:`用于仅添加新数据并`-reloadData`专门在`CPTXYPlot`. 这不会导致显示更新 - 直到`-reloadData`在数据通知处理程序中调用`DetailViewController`我才获得显示更新。

问题：

1.  我该怎么做才能使我的轴更及时地更新？
2.  除非我在数据到达时强制重新加载，否则为什么我没有在图表上显示图表的任何线索？

通过确保对轴和/或绘图空间的任何更新都被包装以将它们放回 GCD 主队列来解决第 1 项。

第 2 项通过包装调用来解决，以`-insertDataAtIndex:numberOfRecords:`允许删除许多`-reloadData`困扰我的调用。

**故事**的寓意：考虑与 UIKit 调用等效的 CorePlot 交互 - 确保它们都发生在主队列上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T00:26:46.603

1.  每当绘图空间范围发生变化时，轴都应重新标记和重绘。您何时根据新数据更新绘图空间？

2.  您必须告诉绘图有新数据可用。`-reloadData`是做到这一点的一种方法，尽管对于这个应用程序，有更快的方法来做到这一点。实时绘图示例使用`-insertDataAtIndex:numberOfRecords:`and`-deleteDataInIndexRange:`添加新点并删除滚动到视图之外的点。这比每次发生变化时重新加载绘图的所有数据要快。`-reloadData`如果您有多个绘图，则调用图表而不是受影响的绘图会更慢，因为它将重新加载所有绘图的数据。

# sql - 客户帐户表的推荐表架构？

> ID：10851544
> 
> 赞同：1
> 
> 时间：2012-06-01T13:50:07.430
> 
> 标签：sql, database

我想为保存客户及其费用和付款的系统创建一个数据库模式。推荐的方法是什么，以便我以后可以仅使用一个查询获得所有客户的列表以及他们的总费用和付款？

单个查询应返回如下结果：

```
NAME  |  TotalCharges  |  TotalPayments
John          80              100
Nick         100               90 
```

我正在考虑创建两个单独的表，一个用于收费，一个用于付款。

```
CUSTOMERS
-ID
-NAME

CHARGES
-ID
-CUSTOMER_ID
-AMOUNT

PAYMENTS
-ID
-CUSTOMER_ID
-AMOUNT 
```

另一种方法是为费用和付款创建一个表，每个表使用一个列，如下所示：

```
CUSTOMERS
-ID
-NAME

CHARGES_AND_PAYMENTS
-ID
-CUSTOMER_ID
-CHARGE_AMOUNT
-PAYMENT_AMOUNT 
```

另一种方法是使用 TRANSACTION_TYPE 标志为费用和付款使用一个表。0-> 付款，1-> 收费，但如果我使用这种方法，我将无法使用一个查询（或者我可以吗？）获得客户的总费用和付款

```
CUSTOMERS
-ID
-NAME

CHARGES_AND_PAYMENTS
-ID
-CUSTOMER_ID
-TRANSACTION_TYPE  (Flag: 0=Payment, 1=Charge)
-AMOUNT 
```

哪个是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:57:37.050

您的第一种方法是正确的解决方案。

用于检索数据的 Sql 查询将是：

```
select 
    CUSTOMERS.ID,  CUSTOMERS.Name, 
   sum( CHARGES.AMOUNT ) as total_CHARGES_amount,
   sum( PAYMENTS.AMOUNT ) as total_PAYMENTS_amount
from
   CUSTOMERS 
  left outer join
   CHARGES on CUSTOMERS.ID = CHARGES.CUSTOMER_ID
  left outer join
   PAYMENTS on CUSTOMERS.ID = PAYMENTS.CUSTOMER_ID
group by
   CUSTOMERS.ID,  CUSTOMERS.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:58:19.847

对每个客户 ID 的费用和付款表进行汇总

```
select Customers.Name
 , Customers.id
 , ( select sum(Charges.Amount)
       from Charges
      where CustomerId = Customers.id )
 , ( select sum(Payments.Amount)
       from Payments
       where CustomerId = Customers.id ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:00:54.867

在所有 3 种方法中，您都可以通过一个查询来获取数据，但我会推荐第一种方法，因为您的数据将根据实体正确组织。您的单个查询将如下所示：

```
Select C.Name, SUM(CH.AMOUNT) AS CHARGES, SUM(P.AMOUNT) AS PAYMENTS
FROM CUSTOMERS C
LEFT JOIN CHARGES CH ON C.ID = CH.CUSTOMER_ID
LEFT JOIN PAYMENTS P ON C.ID = P.CUSTOMER_ID
WHERE C.ID = @CustomerId
GROUP BY C.Name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T14:45:43.150

您应该使用第一种方法，将费用和付款分成两个单独的组。

这些有不同的特点。例如，付款可能具有付款方式、要申请的费用（可能在单独的表中以处理多项费用的付款）、是否为部分费用等。

费用可能会有不同的信息，例如计费日期等。

正如其他人所指出的，您可以将来自多个表的结果组合到一个查询中。然而，这一事实与如何设计数据库模式的问题完全不同。

# jquery - Codeigniter中的Json jquery

> ID：10851548
> 
> 赞同：0
> 
> 时间：2012-06-01T13:50:41.387
> 
> 标签：jquery, json, codeigniter

我正在尝试创建从 jquery 创建的动态 html 并将其保存为 json 并使用 codeigniter 发布到数据库。目前数据库中的数据显示不正确。它只是 0。我很困惑的一些问题。如果表存储 json 数据，表的值应该是多少？varchar 还是什么？

我使用 ajax 从 jquery 发布到 codeigniter 中的控制器

我的 jquery 代码如下

```
 $.ajax({
    type: "POST",
    dataType: "JSON",
    //url: "<?php echo site_url('application/models/question_model/jsonAddData');?>",
    url:'jsonAddData',
    //data: cssObject,
    data: item,
    success: function(data) {
            //alert('ok');
        }
}); 
```

控制器代码如下

```
 if($this->input->is_ajax_request()) {
        try{
            $this->load->database();
            $title = $this->input->post('cssObject');
            print_r($title);
            header('Content-Type: application/json',true);
            $query1 = "INSERT INTO testjson (data) VALUES (".$this->db->escape($title).")";
            $query = $this->db->query($query1);
            log_message('debug',$title);
        }
        catch(Exception $e)
        {
            log_message('debug',$e->getMessage());
            show_error($e->getMessage());
        }
    } 
```

当我使用 chrome 开发人员工具时，帖子没问题。但在数据库中什么都没有。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:02:23.477

如果您想接收类似的数据

```
$title = $this->input->post('cssObject'); 
```

那么你必须使用

```
data: {cssObject: cssObject} , 
```

在你的ajax调用中。

# concurrency - 使用细粒度锁的代码示例（JCR Jackrabbit？）

> ID：10851553
> 
> 赞同：2
> 
> 时间：2012-06-01T13:50:57.313
> 
> 标签：concurrency, tree, jackrabbit, jcr, concurrent-programming

我正在进行一项学术研究，试图开发一种有助于实现细粒度锁定功能的编程工具，用于维护树状数据结构的并发程序。

例如，程序员可能会编写一些函数来接收树根节点并修改树（通过遍历某些路由并添加/删除节点），该工具将帮助他找到代码中的哪些节点应该被锁定和它们可以在哪里被释放——所以这些函数可以在同一棵树上同时执行。

我正在寻找一些现实生活中的代码示例，其中使用了这种细粒度的锁定，或者它可以用于更好的性能但程序员懒得实现它（例如，他在函数期间锁定了整个树-调用而不释放无用的节点）。

我阅读了使用树形数据库的 JCR 和 Jackrabbit，并找到了一篇解释如何在 JCR 中锁定节点的文章（但没有示例）： [http ://www.day.com/specs/jcr/2.0/17_Locking .html](http://www.day.com/specs/jcr/2.0/17_Locking.html)

我在数据库方面的背景非常小，我不完全理解在 Jackrabbit 数据库和并发方面什么是允许的，什么是不允许的。不允许从 2 个线程访问同一个节点，但是不同的存储库呢？如果 2 个不同的客户端尝试访问同一个节点会发生什么（例如，一个尝试删除它，另一个尝试修改它 - session.save() 会失败吗？）。

谢谢，奥伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:18:45.550

首先，不要混淆数据库/jackrabbit/locking。Jackrabbit 实现了自己的锁定，数据库也是如此。

Jackrabbit 允许您使用`LockManager.lock()`. 将该`isDeep`参数设置为 true 意味着下面的所有节点也将被锁定。锁定的节点可以被另一个会话读取，但不能被修改。

从技术上讲，如果 2 个线程使用同一个会话，它们可以编辑同一个节点，但这是相当危险的，应该避免。

如果一个节点可能被 2 个并发会话修改，那么您应该始终锁定该节点。哪个会话最后到达那里应该等待锁被释放。如果您不锁定，那么至少有一个会话将引发异常。

我不确定从不同存储库访问节点是什么意思。一个节点只能属于一个存储库。如果您的意思是让 2 个长耳兔实例访问同一个数据库，那么也应该避免这种情况，或者您应该考虑使用集群。

实施锁定时，将取决于您的设计和要求。如果您只有一个会话，则锁定是没有意义的，反之亦然。是否锁定节点或子树将取决于您的数据代表什么。例如，如果一个节点代表一个文件夹，您可能只想锁定该节点而不是整个子树。如果子树代表一个复杂的文档，那么您可能需要锁定子树。

至于锁定整棵树，我希望我不会遇到这样做的人！

# apache-flex - 通过打开模式对话框编辑数据网格

> ID：10851554
> 
> 赞同：0
> 
> 时间：2012-06-01T13:51:01.633
> 
> 标签：apache-flex, datagrid

当我单击 Flex Datagrid 中的列时，我想打开一个包含一些问题的对话框。对话框关闭后，我想用对话框中的信息填充该单元格。

到目前为止，我所拥有的是：

```
 public function startEdit(event:DataGridEvent):void {
            // event.dataField is null, so we figure it out ourselves
            var column:DataGridColumn = dgQObjects.columns[event.columnIndex];
            if (column.dataField == "parameters") {
                // depending on the type, we can fill in parameters
                var type:String = ListCollectionView(dgQObjects.dataProvider).getItemAt(event.rowIndex).type;
                switch(type) {
                    case "Gauge":
                        event.preventDefault();

                        quartzObjects[event.rowIndex].parameters = "foo";
                        updateLocalStorage();
                        dgQObjects.validateNow();
                        break;
                    case "Indicator":
                        break;
                    case "New Row":
                        event.preventDefault();
                        break;
                }
            }

        } 
```

它将“参数”设置为“foo”，这很好，但它并没有在数据网格中显示（validateNow() 什么都不做）。另外，如果我输入一个 Alert()，startEdit 会继续触发，我永远无法关闭 Alertbox。网格定义如下：

```
 <QuartzUI:DoubleClickDataGrid width="800" x="10" y="10" height="337" 
             id="dgQObjects"
             editable="true"
             itemEditBegin="{startEdit(event)}"
             itemEditEnd="{checkQuartzObjects()}"
             creationComplete="{initDataGrid()}"
             > 
```

（DoublieClickDataGrid 是 DataGrid 的子类）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:40:46.520

您应该通过模型对象上的数据绑定来做到这一点。它会让你的生活轻松很多。假设以下 DataGrid：

```
<s:DataGrid id="dg" dataProvider="{dp}" 
            doubleClickEnabled="true" 
            doubleClick="editSelectedItem()">

    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="name" />
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

`doubleClickEnabled`默认情况`false`下，因此我们必须明确设置它才能捕获`doubleClick`事件。现在让我们看一下`editSelectedItem()`方法：

```
private function editSelectedItem():void {
    var popup:MyEditor = new MyEditor();
    popup.data = dg.selectedItem as MyClass;
    PopUpManager.addPopUp(popup, this, true);
    PopUpManager.centerPopUp(popup);
} 
```

我们只是创建一个新视图并将当前选定的数据网格项传递给它。然后我们将其作为模式弹出窗口打开。（请注意，我没有添加任何代码来再次关闭弹出窗口以使我的示例尽可能简单）。现在 MyEditor 视图如下所示：

```
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:m="net.riastar.model.*"
         title="Edit label"
         width="400" height="300" >

    <fx:Declarations>
        <m:MyClass id="data" />
    </fx:Declarations>

    <s:TextInput text="@{data.name}" />

</s:Panel> 
```

我们使用双向数据绑定来编辑实例的`name`属性`MyClass`（请注意，必须标记此属性才能`Bindable`使其工作）。这对于一个工作示例来说已经足够了：如果您现在编辑 TextInput 中的值，您将在后台的 DataGrid 中看到相应的值更改。

# hadoop - 安装配置单元时出现javaerror

> ID：10851556
> 
> 赞同：0
> 
> 时间：2012-06-01T13:51:06.770
> 
> 标签：hadoop, hive

我想在我的 ubuntu 上安装 Hive 和 hadoop。我按照[这篇文章](http://www.hackido.com/2010/05/install-hadoop-and-hive-on-ubuntu-lucid.html)所有的事情似乎都很好，但是当我写这个命令的最后一步，关于 Java 的错误出现如下：

**/home/babak/Downloads/hadoop/bin/../bin hadoop：第258行：/usr/lib/j2sdk1.5-sun/bin/java：找不到文件或文件夹**

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:11:49.793

您需要找到您的机器上安装 java 的位置：

```
which java 
```

然后从那里跟随任何符号链接或包装脚本到 java 可执行文件的实际位置。

一个更简单的方法是运行文件索引器，然后找到文件（这里我使用 jps 可执行文件，它与 java 位于同一文件夹中：

```
#> sudo updatedb
#> locate jps 
```

无论你得到什么，去掉 bin/jps 后缀，这就是你的 JAVA_HOME 值。如果找不到可执行文件，则需要安装 java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:45:37.663

Hadoop 需要 Java 版本 1.6 或更高版本。似乎 hadoop 正在寻找 Java 1.5。另外，确保变量 HADOOP_HOME 在文件 /conf/hadoop-env.sh 中设置

我有如下一行：

```
export JAVA_HOME=/usr/lib/jvm/java-6-sun/ 
```

# sql - 简单的informix选择存储过程

> ID：10851558
> 
> 赞同：3
> 
> 时间：2012-06-01T13:51:09.340
> 
> 标签：sql, stored-procedures, informix

我正在尝试编写一个执行 select 语句的简单存储过程，但它一直给我一个语法错误，而没有任何其他帮助告诉我错误是什么

```
create procedure _this_is_it(this CHAR(3), that CHAR(4), other CHAR(3))
foreach select * from table 
where column1 = this and
column2 = that and
column3 = other
end foreach
end procedure; 
```

我应该得到语法错误的任何理由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:09:54.520

删除`foreach`和`_`作为第一个字母，还在`;`选择的末尾添加一个。

```
create procedure this_is_it(this CHAR(3), that CHAR(4), other CHAR(3))

select * from table 
where column1 = this and
column2 = that and
column3 = other;

end procedure; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T11:41:47.587

如果要在 foreach 循环中执行某些处理，则必须**SELECT INTO**变量。所以你的代码会变成：

```
drop procedure if exists _this_is_it ;
drop table if exists this_table ;
create temp table this_table(column1 CHAR(3), column2 CHAR(4), column3 CHAR(3))
with no log ;
insert into this_table values("A","B","C") ;

create procedure _this_is_it(this CHAR(3), that CHAR(4), other CHAR(3))
returns CHAR(10) AS something

define f_this CHAR(3) ;
define f_that CHAR(4) ;
define f_other CHAR(3) ;

foreach
select * into f_this, f_that, f_other
from this_table
where column1 = this and
column2 = that and
column3 = other

return f_this||f_that||f_other WITH RESUME ;

end foreach
end procedure;

grant execute on _this_is_it to public;
execute procedure _this_is_it("A","B","C") ;

drop procedure if exists _this_is_it ;
drop table if exists this_table ; 
```

FOREACH 语句的语法可从 IBM 的[Infocenter](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.sqls.doc/ids_sqs_1331.htm?resultof=%22FOREACH%22%20%22foreach%22%20 "信息中心")获得。

# pdf - iTextSharp - 保留现有 PDF 中的可填写字段

> ID：10851559
> 
> 赞同：1
> 
> 时间：2012-06-01T13:51:12.437
> 
> 标签：pdf, itextsharp, field

我创建了一个应用程序，它可以读取 PDF 文件，向指定字段添加内容，在文档上设置密码，然后存在。

该应用程序从具有可填写字段的 PDF 文件中读取。

这工作正常。该字段得到更新并且 PDF 保存没有问题 - 直到我添加这个：

```
PdfEncryptor.Encrypt(reader, output, true, null, "busspass13579", PdfWriter.ALLOW_SCREENREADERS); 
```

然后 PDF 变得完全平坦，没有可填充的字段。

有任何想法吗？

# c++ - 在阅读之前更改标识符的后缀？

> ID：10851562
> 
> 赞同：0
> 
> 时间：2012-06-01T13:51:37.063
> 
> 标签：c++

我真的不能理解后缀。我知道它首先使用标识符然后增加或减少，首先显示`i`然后`++`。但现在我认为我错了，仍然不明白。

```
#include <iostream>

using namespace std;

int main()
{
    int i = 0;
    cout << i << i++ << i;
    cout << "\n\n\nPress Enter to close the window . . . ";
    cin.clear();
    cin.sync();
    cin.get();
    return 0;
} 
```

输出：

```
101

Press Enter to close the window . . . 
```

首先`i`在增量读取之前更改。为什么？

我期望

```
001

Press Enter to close the window . . . 
```

有人可以解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:56:46.040

只是永远不要做这样的事情，它是未定义的

```
 cout << i << i++ << i; 
```

最好做

```
 cout << i << i << (i + 1);
 i ++; 
```

如果你想要你的预期结果。

* * *

案子

```
 cout << i++; 
```

已定义并且完全可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T14:15:05.810

我认为这里的 undefined*) 是函数参数的评估*顺序*。您在这里实际调用的是对（重载）的函数调用

```
std::ostream& operator<< (std::ostream&, int); 
```

第一个参数是对同一函数的另一个调用的输出，所以你的

```
cout << i << i++ << i; 
```

扩展到

```
operator<<( operator<<( operator<<(cout,i), i++), i); 
```

由于未指定评估函数参数的顺序，因此这里可能发生任何事情。您可以通过编写单独的行来避免这种情况：

```
cout << i;
cout << i++;
cout << i; 
```

扩展到无害的

```
operator<<(cout,i);
operator<<(cout,i++);
operator<<(cout,i); 
```

*) 编辑：更准确地说，`cout<<i<<i++;`是*未定义*的，因为函数参数的评估顺序*未指定*。

# c# - 通过反射检索内部嵌套类的内部成员

> ID：10851565
> 
> 赞同：1
> 
> 时间：2012-06-01T13:51:44.287
> 
> 标签：c#, vb.net, winforms, reflection, internal

好的，感谢[ILSpy](http://wiki.sharpdevelop.net/ilspy.ashx)，我知道**MenuItem**类包含一个名为**MenuItemData的****内部**类，它本身包含一个名为**onDrawItem的****内部**成员。

 ******给定一个 MenuItem，我想检索与成员 onDrawItem 对应的对象。但我所能做的就是获取 FieldInfo，而不是对象本身。

这是我的代码：

```
 Dim obj As Object
            Dim fi As FieldInfo
            Dim item as System.Windows.Forms.MenuItem
            Dim mType As System.Type

            mType = item.GetType()

            mType = mType.GetMember("MenuItemData", BindingFlags.NonPublic)(0)

            fi = mType.GetField("onDrawItem", BindingFlags.Static Or BindingFlags.Instance Or BindingFlags.NonPublic)

            obj = fi.GetValue(item) 
```

到达最后一行时，我收到一条错误消息（被引用）：

> 在“System.Windows.Forms.MenuItem+MenuItemData”类型中定义的字段“onDrawItem”不是“System.Windows.Forms.MenuItem”类型的目标对象的字段

我不知道在最后一行将什么对象传递给 GetValue 函数。有什么线索吗？

**- - 编辑 - -**

我的目标是**删除**名为**DrawItem**的 menuItem 的基本 eventHandler 。请参阅[此帖子](https://stackoverflow.com/q/91778/610380)和已`RemoveClickEvent`接受答案中的功能以获得更好的理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:07:16.983

```
System.Type menuItemType = typeof(System.Windows.Forms.MenuItem);

System.Type menuItemDataType = menuItemType.GetNestedType("MenuItemData",
    System.Reflection.BindingFlags.NonPublic);

System.Reflection.FieldInfo fieldInfoOnDrawItem= menuItemDataType.GetField("onDrawItem", 
    System.Reflection.BindingFlags.NonPublic | 
    System.Reflection.BindingFlags.Instance |
    System.Reflection.BindingFlags.GetField ); 
```

加法：要获得值，您需要引用 a 的实例`MenuItemData`。为此，您需要通过实例`GetValue`中的`data`字段获取值`MenuItem`并使用它。

```
System.Windows.Forms.MenuItem menuItem = new System.Windows.Forms.MenuItem();
System.Reflection.FieldInfo fieldInfoData = menuItemType.GetField("data",
    System.Reflection.BindingFlags.NonPublic |
    System.Reflection.BindingFlags.Instance |
    System.Reflection.BindingFlags.GetField);

object dataField = fieldInfoData.GetValue(menuItem);
object onDrawItem = fieldInfoOnDrawItem.GetValue(dataField); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:23:50.770

onDrawItem 应该是一个事件，特别是考虑到其声明类型的注释。我在 MSDN 上找到了这个页面，它应该能够帮助你。

```
Dim tExForm As Type = assem.GetType("ExampleForm")
Dim exFormAsObj As Object = Activator.CreateInstance(tExForm)
Dim evClick As EventInfo = tExForm.GetEvent("Click")
Dim tDelegate As Type = evClick.EventHandlerType
Dim miHandler As MethodInfo = GetType(Example).GetMethod("LuckyHandler", BindingFlags.NonPublic Or BindingFlags.Instance) 
```

最后一点应该对你最有用。获取链接到事件的方法的方法信息，然后您可以使用它来触发方法或链接到它。

*更新* [此页面也可能有所帮助。](http://www.devx.com/vb2themax/Tip/18827)******

# c++ - std::getline() 访问冲突，以前可以工作但现在无法从任何文件中读取

> ID：10851567
> 
> 赞同：0
> 
> 时间：2012-06-01T13:51:44.933
> 
> 标签：c++, file-io, getline

我有一个需要从 .txt 文件中读取数据的 C++ 应用程序。我已经让这个应用程序工作了大约 8-9 个月，但是在更改了应用程序的另一部分之后，它在任何对 getline() 的调用中都会出现“访问冲突”错误。

这是我的代码：

```
std::string line;
std::ifstream config;
config.open(fileName);

if(config.is_open()) {

    while(config.good())
    {
        std::getline(config, line);
        //Other code to do stuff with the string "line".
    } 
```

我不知道为什么现在会发生这种情况，这可能与某处的某些 std 库 dll 有关吗？

我完全不知所措。

作为一种快速修复，是否有另一种简单的方法来逐行读取文件，这可能会绕过这个问题？

谢谢。

哦，这是错误信息：

> 0xC0000005：访问冲突写入位置 0x00000014。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:34:45.413

这不是您问题的答案，而是一般性的回答。

不要`fstream`从 cplusplus.com 复制代码，您的示例应该是：

```
std::string line;
std::ifstream config(fileName);

while (std::getline(config, line))
{
    //Other code to do stuff with the string "line".
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T02:50:16.407

确保替换链接器中的所有调试 .lib 并用发布版本替换它们如果您使用 Visual C++ 进行发布构建。

例如：属性 -> 链接器 -> 输入 -> 附加依赖项（从**msvcrt.lib** (release)替换**msvcrtd.lib** (last char 'd' for debug lib) ）

# php - php/mysql 标签查询模式

> ID：10851569
> 
> 赞同：0
> 
> 时间：2012-06-01T13:51:49.177
> 
> 标签：php, mysql, join

我有一个 3 表标签系统、主题、标签和标签主题。

我现在想在显示主题时显示每个主题的各种标签。由于一个主题有多个标签，所以当我在下面进行查询时，我得到多行并且主题显示多次，每行一次。我认为我不能使用 groupby，因为我没有对列进行任何数学运算。我真正想要的是每个主题，显示主题，然后是帖子的标签列表，例如（对于 Siri）、“iphone、智能手机、Siri”。表：

```
topics
id | name |userid
tags
id | topicid | topicname
tagtopic
id | tagid | topicid '

$sql = "SELECT * FROM `topics` t
LEFT JOIN `tagtopic` tagtopic
on t.id = tagtopic.topicid
WHERE t.id= '12'"; 
```

应该提到显示已完成，`while($row = mysql_fetch_array($res))`以便显示记录集的行。我希望它显示一次主题，但由于为标签创建了多行，因此它显示了多次。

我是否必须放弃加入并执行子查询？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:55:50.883

您可以执行[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)将所有标签放入以逗号分隔的单个字段中。

```
SELECT GROUP_CONCAT(tt.tagid) FROM topics t
JOIN tagtopic tt ON tt.topicid = t.topicid
WHERE t.id=12
GROUP BY t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:01:13.860

如果您对 ON AND ONLY ON 主题执行此查询（扣除`WHERE t.id = 12`）
在您的`while`循环中：

```
var first = true;
while($row = mysql_fetch_array($res)) {
    if(first) {
        // PRINT THE TOPIC NAME
        $first = false;
    }
    // PRINT THE TAG ROW
} 
```

# json - 将 JSON 转换为 grails 对象

> ID：10851572
> 
> 赞同：3
> 
> 时间：2012-06-01T13:51:58.483
> 
> 标签：json, grails

我的视图页面中有一个 JSON 对象，我通过参数传递它，比如说“params.userInfo”，在控制器中，我希望它解析为我创建的对象“用户”。我该怎么做 ？用户对象可能是这样的

```
class User{
  string name
  string age
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:07:55.557

这应该有效：

```
def user = new User(params.userInfo) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T14:01:58.343

您可以在此处从 Grails 文档中获取信息：http: [//grails.org/Converters+Reference](http://grails.org/Converters+Reference)

# java - struts2 - java.lang.IllegalStateException 在操作调用结果流以下载 PDF 文件时间歇性发生

> ID：10851576
> 
> 赞同：6
> 
> 时间：2012-06-01T13:52:20.640
> 
> 标签：java, jsp, struts2, pdf-generation, download

我有一个名为 GetFile 的操作，它直接打开一个文件下载框来打开 PDF。

下面是 struts.xml 配置和相同的操作类。我使用结果类型作为流来实现这一点。我可以看到 pdf 下载框一直打开，我也可以下载文件。

但我发现昨晚有一些请求触发了该操作，并产生了以下错误。

```
 org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response
        at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:570)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:452)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
        at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
        at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
        at org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:159)
        at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
        at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:374)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at deshaw.irweb.web.interceptor.AuthInterceptor.intercept(AuthInterceptor.java:60)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
        at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:294)
        at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:183)
        at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:169)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: getOutputStream() has already been called for this response
        at org.apache.catalina.connector.Response.getWriter(Response.java:636)
        at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:205)
        at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:105)
        at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
        at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
        at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:182)
        at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:123)
        at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:80)
        at org.apache.jsp.jsp.ServerError_jsp._jspService(ServerError_jsp.java:157)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
        ... 38 more 
```

有人可以告诉我可能导致问题的原因吗？我目前无法重现该问题。我在某处读到这可能是由于关闭了下载对话框，但即使在我从多个浏览器尝试之后也不是这样。还检查了[getOutputStream() 已为此响应调用](https://stackoverflow.com/questions/1776142/getoutputstream-has-already-been-called-for-this-response)，但无法直接与我的问题相关，因为没有重定向到 jsp，因为 struts2 操作直接导致结果流。

# struts.xml

```
<action name="GetFile" class="Class" method="DownloadFile">
            <result name="success" type="stream">
            <param name="contentType">contentType</param>
            <param name="contentDisposition">fileName</param>
            <param name="bufferSize">1024</param>
            <param name="inputName">inputStream</param> 
            </result>
</action> 
```

# 动作类

```
public String DownloadFile ()
{
        // create the object variable pdfdoc which is a custom object.
        // You can assume that the pdfdoc is properly constructed 
        // and getFileContent does what it is required to do, so
        // that the final pdf is generated.
        ...
        ...
        inputStream = new ByteArrayInputStream(pdfdoc.getFileContent());
        contentType = pdfdoc.getContentType();
        fileName = pdfdoc.getFileName();
        contentDisposition = doc.getContentDisposition();
        bufferSize = 1024;
        return "success";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:47:25.983

我在使用 Internet Explorer 时遇到了类似的问题，并通过在响应标头中添加它来修复它：

```
response.setHeader("Expires","0");
response.setHeader("Pragma","cache");
response.setHeader("Cache-Control","private"); 
```

也许您在日志中看到的请求是由 Internet Explorer 生成的。

看看[这里](http://www.coderanch.com/t/432713/Struts/Struts-Files-DownLoad-Streaming-as)和[这里](http://eirikhoem.wordpress.com/2007/06/15/generated-pdfs-over-https-with-internet-explorer/)！

更新：要在日志中打印浏览器版本，您可以执行以下操作：

```
System.out.println(request.getHeader("User-Agent")); 
```

# c# - 向下拉列表添加另一个排序选项

> ID：10851577
> 
> 赞同：0
> 
> 时间：2012-06-01T13:52:21.030
> 
> 标签：c#, asp.net-mvc-3

我有这些代码行，它们将项目添加到下拉列表中，并按收听日期和时间对它们进行排序。我想更进一步，按字母顺序按项目的“类型”或描述进行排序。

这是我在控制器中的代码：

```
public void AddHearingsToViewModel(CourtActivityViewModel viewModel, IQueryable<Hearing> hearings)
    {
        if (viewModel.HearingEntryId == Guid.Empty)
            viewModel.HearingEntryId = hearings.OrderByDescending(h => h.HearingDate).ThenByDescending(d=>d.HearingDate).FirstOrDefault().HearingEntryId;
        viewModel.Hearings = hearings.ToSelectList("HearingEntryId", "CourtActivitySelection", viewModel.HearingEntryId.ToString());
    } 
```

我的 ..Domain.Entities.Hearing

```
public partial class Hearing
{

    public string CourtActivitySelection
    {
        get { return string.Format(@"{0:d} - {0:t} - {1} ", HearingDate, HearingType.Description); }
    }

    public override string ToString()
    {
        return string.Format(@"{1} on {0:d} @ {0:t}", HearingDate, HearingType.Description);
    }
}

public partial class HearingEntry
{

    public override string ToString()
    {
        return string.Format(@"{1} on {0:d} @ {0:t}", HearingDate, HearingType.Description);
    }

} 
```

我试过了：

```
viewModel.HearingEntryId = hearings.OrderByDescending(h => h.HearingDate).ThenByDescending(d=>d.HearingDate).OrderBy(t=>t.HearingType).FirstOrDefault().HearingEntryId; 
```

确切的错误是：

无法按类型“Kids.Domain.Entities.HearingType”订购。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：无法按类型“Kids.Domain.Entities.HearingType”排序。

红色的线是我添加的线`.ThenBy(t=>t.HearingType)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:14:36.677

看起来你`HearingType`是一个没有实现[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)的类。在 HearingType 所在的类型上实现此接口

```
public SomeClassThatHearingTypeIsAnInstanceOf : IComparable
{
} 
```

或将您的代码更改为

```
.ThenBy(t=>t.HearingType.SomePropertyYouWantToSortBy) 
```

您可能遇到的唯一问题（因为我不知道您的课程是如何填充的，所以`HearingType`可能是`null`.

# macos - OS X：安装此 .pkg 文件后立即自动运行我的应用程序

> ID：10851585
> 
> 赞同：1
> 
> 时间：2012-06-01T13:52:39.923
> 
> 标签：macos

我开发了一个 mac 应用程序并使用 Xcode 中的 Product->Archive->Share 创建一个 .pkg 文件并将提交到 Appstore。我想以这种方式安装此 .pkg 文件后立即自动运行我的应用程序。我知道使用 PackageMaker，可以编写前置和后置脚本。但是，Appstore 不接受使用 PackageMaker 创建的任何 .pkg 文件，所以我使用 Xcode 中的 Product->Archive->Share 来创建 pkg 文件。

有人可以建议我如何在安装此 .pkg 文件后立即自动运行我的应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:34:12.757

你不应该能够做到这一点。App Store 的部分重点在于提供统一、一致的安装体验——应用程序下载、静默安装，然后显示在 LaunchPad 中供您运行，如果您愿意的话。

还记得以前从 App Store 获取 Xcode 时，意味着您在 /Applications 中有一个名为“Install Xcode.app”的应用程序，然后您必须运行该安装程序吗？这让 Xcode 的一半用户感到困惑，他们在技术上与任何应用程序可能拥有的用户群一样精通，而且它来自 Apple，甚至他们也无法通过自动启动“安装 Xcode.app”来解决这个问题。

# google-app-engine - 就请求总数和唯一身份访问者而言，Google App Engine 免费配额中的任意数量

> ID：10851591
> 
> 赞同：0
> 
> 时间：2012-06-01T13:52:53.403
> 
> 标签：google-app-engine

就其每天允许的请求总数和唯一身份访问者而言，是否有人在 Google App Engine（免费配额）上有任何数字？也许有现场生产代码的人可以告诉我们这一点？粗略的数字就足够了，只是为了得到这个想法。我无法从定价模型中获取此信息。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:14:58.903

我第一次开始使用 App Engine 时遇到了这个问题，但无法用您问题中的信息来回答。

您必须对各个 API 配额使用情况进行估计，然后据此进行计算。

您可以通过尝试找出您可能首先达到的 API 配额，然后找出在配额用完之前可以服务的请求数来简化它。IE：

*   为用户存储照片或其他大数据？您可能会首先达到 blobstore 配额。每日/唯一访客人数可能无关紧要。
*   提供大量照片或大数据？您可能会首先达到带宽配额。
*   需要为每个视图启动一个频道？您可能会首先达到频道配额并每天获得 100 次观看。
*   需要为每个视图发送电子邮件？您可能会首先达到邮件配额。
*   需要大量查询数据存储？您可能会首先达到数据存储限制。

数据存储限制是最难计算的。您将获得 50k 读取和 50k 写入操作。很可能你读的比写的多。

*   如果您每页需要 2 次读取操作，您可能每天可以进行 25k 次查看。
*   如果您每页需要 2 个读取操作，但您很聪明，并且您对它们进行内存缓存，并且内存缓存在 80% 的时间内有效，那么您每天可以获得 125k 次查看。
*   如果每页需要 500 次读取操作并且无法缓存，则每天可以进行 100 次查看。前提是您没有用完其他配额之一。

做你自己的数学。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:41:38.053

配额和费率（免费和付费应用程序）列在[https://developers.google.com/appengine/docs/quotas](https://developers.google.com/appengine/docs/quotas)上。

# android - Android 地图 - 使用布局作为覆盖项

> ID：10851593
> 
> 赞同：4
> 
> 时间：2012-06-01T13:52:59.560
> 
> 标签：android, google-maps, android-layout, mapquest

我在 Android 中使用 MapQuest 提供的地图，但实现方式与 Google Maps 相同，因此同样的问题也适用。

对于覆盖项目，我想使用带有 ImageView 和 TextView 的布局，因为 TextView 将显示一些信息。问题是我似乎只能显示一个drawable作为我的叠加层，它必须来自 Drawable 文件夹。

这是添加叠加项的代码：

```
private void loadSingleOverlay(TapControlledMap mapViewPassed, String title, String address)
{
    Drawable icon = getResources().getDrawable(R.drawable.marker2);

    OverlayItem newItem = new OverlayItem(point, title, address);

    overlay = new ExtendedItemizedOverlay(icon);
    overlay.addItem(newItem);

    // add a tap listener
    overlay.setTapListener(tapListener);

    List<Overlay> listOfOverlays = mapViewPassed.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(overlay);
    mapViewPassed.invalidate();

} 
```

我想膨胀和使用的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/marker_red" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1" />

</RelativeLayout> 
```

这是我想要的结果：

![在此处输入图像描述](../Images/f16ad0a6ceb6863c6b602ed676c2fa0b.png)

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T15:00:32.903

这是不容易的。我知道的唯一方法是创建您的视图（例如，带有背景和文本视图的布局），然后将其渲染为位图。

```
public static Bitmap loadBitmapFromView(View v) {
    DisplayMetrics dm = v.getContext().getResources().getDisplayMetrics();  
    Bitmap b = Bitmap.createBitmap(Math.round(v.getMeasuredWidth() * dm.density), Math.round(v.getMeasuredHeight() * dm.density), Bitmap.Config.ARGB_8888);                
        Canvas c = new Canvas(b);
        v.draw(c);
        return b;
    } 
```

然后，您可以使用以下内容添加到您的地图中。您将不得不根据您的标记视图大小来调整边界。

```
Drawable d = new BitmapDrawable(Utils.loadBitmapFromView(yourView));
        d.setBounds(-35, -30, Math.round(d.getIntrinsicWidth() * dm.density) - 35, Math.round(d.getIntrinsicHeight() * dm.density) - 30);
        overlayItem.setMarker(d);
        overlayListView.add(overlay); 
```

# php - 在 PHP 中存储敏感数据

> ID：10851606
> 
> 赞同：3
> 
> 时间：2012-06-01T13:53:38.220
> 
> 标签：php

我正在开发一个 PHP 项目，我正在使用一个全局设置文件，我在其中包含一些全局值，例如用于连接到 mysql 的数据库凭据。例如：

设置.php：

```
<?php          
    const DB_ADDRESS = 'localhost';
    const DB_USERNAME = 'johndoe';
    const DB_PASSWORD = 'mypassword';
    const DB_PORT = 7777;   
?> 
```

我的问题，它足够安全吗？例如，在资源管理器/chrome 中调试时有什么方法可以查看变量值？有没有其他更安全的方法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T13:55:56.383

PHP 信息在发送到浏览器之前在服务器上进行处理，因此在正常情况下无法在浏览器内部看到。但是，如果您的网络服务器配置错误，您的代码的纯文本版本可能会发送到浏览器，从而使其对用户可见。这就是为什么重要的代码应始终保留在文档根目录之外并在需要时包含在文件中的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T14:45:57.240

虽然这在服务器受损的情况下提供的保护很少，但如果您的源代码通过错误或其他漏洞公开可见（例如：[http ://www.php.net/archive/2012.php#id2012 -05-06-1](http://www.php.net/archive/2012.php#id2012-05-06-1) ) 一种越来越普遍的方法是将各种凭据和参数设置为服务器环境变量。

例如，在 apache vhost/.htaccess 中，您可以设置如下环境变量：

```
SetEnv DB_ADDRESS localhost
... 
```

在您的 PHP 代码中：

```
$DB_ADDRESS = getenv('DB_ADDRESS'); 
```

当然，您可以将此值分配给类常量、全局常量，具体取决于您的用例等......

这也使您的源代码更具可移植性，允许根据托管环境（登台/生产等）提供不同的配置：

[SetEnv APPLICATION_ENV 开发 - .htaccess 与 Zend 框架交互？](https://stackoverflow.com/questions/5448943/setenv-application-env-development-htaccess-interacting-with-zend-framework)

您的设置永远不会被硬编码，也无法在源代码中访问。Heroku 使用类似的方法来配置应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T13:55:26.717

变量保存在服务器中，不会发送到客户端。除非您的脚本存在任何允许用户输出自定义变量的漏洞，否则对于没有源代码访问权限的任何人来说，它们都是安全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T13:55:56.700

这是标准方式（查看 phpmyadmin、mediawiki 等）：此 php 文件不可访问，如果您在服务器设置中没有出错，则它不可读。

通常你会添加一个测试来检查这个设置文件是否包含在你的一个 php 文件中：

```
<?php
if ( !defined('IN_KP') ) die("Hacking attempt");
?> 
```

当然，您在包含文件中定义“IN_KP”：

```
<?php
define('IN_KP', true);
include("sensitive_file.php");
?> 
```

但总体而言，最好的保护是那些敏感数据不是那么敏感，因为您的 mysql 帐户只能由 localhost 访问（如果不修复它！）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-01T13:58:00.283

您的后端代码永远不应出现在前端，除非您的设置出现严重错误。如果发生这种情况并且您的后端源代码“泄露”——不太可能但[有可能](http://thehackernews.com/2012/05/un-patched-php-cgi-remote-code.html)——那么您的密码将一目了然。

您可以使用对称加密方案加密密码字符串，但您必须将加密密钥存储在某处。然后，如果加密密钥泄露，您将回到起点。它仍然比使用纯文本密码好一点，但没有什么是 100% 安全的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T13:56:21.623

> 例如，在资源管理器/chrome 中调试时有什么方法可以查看变量值？

如果您从不将它们发送到视图（即 echo、var_dump、print_r、session 等），那么不会。浏览器永远不会知道它们。

# iphone - 将值传递给委托方法

> ID：10851611
> 
> 赞同：0
> 
> 时间：2012-06-01T13:54:10.117
> 
> 标签：iphone, objective-c, ios, delegates

我正在尝试将值传递给委托中的方法并返回一个`NSString`值。出于某种原因，我在委托错误中找不到属性。我会很感激任何帮助。这是我的代码：

**委托人.h**

```
- (NSString*) getSoundFilePath:(int)pageNumber; 
```

**委托人.m**

```
-(NSString*) getSoundFilePath:(int)pageNumber{
    switch (pageNumber) {
        case 1:
            return soundFilePathPage1;
            break;
        case 2:
            return soundFilePathPage2;
            break;
        case 3:
            return soundFilePathPage3;
            break;
        case 4:
            return soundFilePathPage4;
            break;
        case 5:
            return soundFilePathPage5;
            break;
        case 6:
            return soundFilePathPage6;
            break;
    }
    return nil;
} 
```

**应用程序.m**

```
int page = 1;
NSString *audioFilePath = appDelegate.getSoundFilePath:page; 
//that's where i get the error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:56:03.917

你应该寻找一个客观的c介绍。

正确的行是

```
NSString *audioFilePath = [appDelegate getSoundFilePath:page]; 
```

# c - 如何使用 cvGetCaptureProperty 检索视频格式

> ID：10851615
> 
> 赞同：1
> 
> 时间：2012-06-01T13:54:29.557
> 
> 标签：c, visual-studio-2008, opencv

我正在尝试检索视频格式

前任。我的输入视频文件是 video.mpeg 然后我想要格式为 mpeg

我使用了这个功能

```
double Format = cvGetCapturePrperty(capture,CV_CAP_PROP_FORMAT); 
```

但它返回 0.000

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:06:46.103

`CV_CAP_PROP_FORMAT`不是你想的那样。检查文档。

您可能正在寻找：

```
double val = cvGetCaptureProperty( capture, CV_CAP_PROP_FOURCC );
char* fourcc = (char*) (&val); 
```

# android - ksoap2 xmlPullParserException 未终止的实体引用

> ID：10851616
> 
> 赞同：4
> 
> 时间：2012-06-01T13:54:30.420
> 
> 标签：android, android-ksoap2

昨天我有一个用户给我发电子邮件说他的应用程序有问题，所以我开始和他一起调试，让他给我发了电话日志，`XmlPullParserError`当他打电话给服务器时他收到了

```
E/Message Exchange::CallWebService(6426): Exception: org.xmlpull.v1.XmlPullParserException: unterminated entity ref (position:TEXT �������`I�...@1:18 in java.io.InputStreamReader@406c8808) 05-31 12:33:25.573 
W/System.err(6426): org.xmlpull.v1.XmlPullParserException: unterminated entity ref (position:TEXT �������`I�...@1:18 in java.io.InputStreamReader@406c8808) 05-31-12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)05-31 12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.error(KXmlParser.java:269)05-31-12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.pushEntity(KXmlParser.java:781)05-31 12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.pushText(KXmlParser.java:849)05-31 12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:354)05-31 12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)05-31 12:33:25.573 
W/System.err(6426):     at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1408)05-31 12:33:25.573 
W/System.err(6426):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)05-31 12:33:25.573 
W/System.err(6426):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)05-31 12:33:25.573 
W/System.err(6426):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)05-31 12:33:25.573 
W/System.err(6426):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)05-31 12:33:25.573 
W/System.err(6426):     at ecm2.android.MessageExchange$1.run(MessageExchange.java:96)05-31 12:33:25.573 
W/System.err(6426):     at java.lang.Thread.run(Thread.java:1019)05-31 12:33:27.928 
```

这是它总是失败的线

```
trans.call(SOAP_ACTION, soapEnvelope); 
```

这使得调用服务器，它只是抛出一个错误。我有`same exact phone`这个人，我让他运行`exact version I am running`，我调用服务器没有问题，但他仍然有问题。

我让他卸载并重新安装了几次，所以我不知道是什么导致了他的手机而不是我的手机？

这就是我创建 XML 的方式

```
private static String CreateCallXML(String sDeviceID, String sEMailAddress, String sVersion) {
    Logging logger = new Logging();
    XmlSerializer serializer = Xml.newSerializer();
    StringWriter writer = new StringWriter();
    try {
        serializer.setOutput(writer);
        serializer.startDocument("UTF-8", true);
        serializer.startTag("", "PostData");
        serializer.startTag("", "RetrieveMsg");
        serializer.attribute("", "ver", sVersion);
        serializer.attribute("", "DevID", sDeviceID);
        serializer.attribute("", "eMailAddress", sEMailAddress);
        logger.append("D", className, "CreateCallXML", "LastIncMsgID:" + Settings.LastIncMsgID);
        logger.append("D", className, "CreateCallXML", "LastDLMsgID: " + Settings.LastDLMsgID);
        serializer.attribute("", "LastIncMsgID", "" + Settings.LastIncMsgID);
        serializer.attribute("", "LastDLMsgID", "" + Settings.LastDLMsgID);
        serializer.endTag("", "RetrieveMsg");
        serializer.endTag("", "PostData");
        serializer.endDocument();
        return writer.toString();
    } catch (Exception e) {
        return null;
    }
} 
```

**更新 2：**

在浏览完代码之后，用户的电子邮件地址似乎是问题，用户电子邮件地址的一个例子是，`abcd3961@gmail.com`如果我使用它，它会在命中线路以调用服务器时引发异常。如果我更改电子邮件地址中的一个字母，它会正常执行呼叫。

这是一个ksoap问题吗？由于我不能告诉他更改他的电子邮件地址，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T14:16:50.157

**未终止实体**发生此错误时

1...响应字符串中的错误可能是某些实体未关闭。

```
<root>
    <a> first </a>
    <b>second             <----- </b> missing here
</roor> 
```

2 ...您在 xml 文件中获得了一些 xml 字符

```
 like      & { } � ... 
```

您需要将所有**&**替换为**& amp;** [看到这个答案](https://stackoverflow.com/a/10000095/1289716)

```
...
String str = writer.toString();
str = str.replaceAll("&","&amp;");
str = str.replaceAll("?","&#63;");
return str; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T01:49:23.217

我在 Android 2.2 设备上遇到了同样的问题，发现 ksoap2 2.6.5 与 Android 2.2 不兼容。好吧，我认为这就是问题所在，我所知道的是它会引发这些错误。我将我的 ksoap2 降级到 2.4，它又开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:08:32.337

我有同样的问题。解决方案是当我从 XML 发送响应时，我必须将用户名中的“&”替换为 &，因为有些用户有问题，但其他用户没有。

所以“MAC”答案中的第2步

# excel - 使用 Sub 和多个函数遇到障碍。试图使其成为一键式按钮操作

> ID：10851618
> 
> 赞同：0
> 
> 时间：2012-06-01T13:54:35.587
> 
> 标签：excel, vba

代码已更新，即使在检查 Microsoft Scripting RunTime 以处于活动状态后，我也收到错误消息。以下是错误：

```
Option Explicit

Sub Update_JL()

    Dim wsJL As Worksheet 'Jobs List
    Dim wsJD As Worksheet 'Jobs Data
    Dim wsJAR As Worksheet 'JL Archive
    Dim lastrow As Long, fstcell As Long
    Dim strCompany As String, strPart As String, strPath As String

    Set wsJL = Sheets("Jobs List")
    Set wsJD = Sheets("Jobs Data")
    Set wsJAR = Sheets("JL Archive")

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

    With Intersect(wsJL.UsedRange, wsJL.Columns("Q"))
        .AutoFilter 1, "<>Same"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("B:O"))
            .Copy wsJAR.Cells(Rows.Count, "B").End(xlUp).Offset(1)
            .EntireRow.Delete
        End With
        .AutoFilter
    End With

    With wsJD
        'Clean empty cells in Column C
        lastrow = Range("B" & Rows.Count).End(xlUp).Row + 1
        Range("C5:C" & lastrow).SpecialCells(xlCellTypeBlanks).EntireRow.Delete
    End With

    With Intersect(wsJD.UsedRange, wsJD.Columns("Q"))
        ActiveSheet.Range("P:Q").Calculate
        .AutoFilter 1, "<>Different"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With

    With wsJD
        .AutoFilterMode = False
        Intersect(.UsedRange, .Columns("G")).Cut .Range("F1")
        Intersect(.UsedRange, .Columns("H")).Cut .Range("G1")
        Intersect(.UsedRange, .Columns("L")).Cut .Range("H1")
        Intersect(.UsedRange, .Columns("N")).Cut .Range("I1")
        Intersect(.UsedRange, .Range("B:I")).Copy wsJL.Cells(Rows.Count, "B").End(xlUp).Offset(1)
    End With

        With wsJL
        lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
        wsJL.Range("R1:Y1").Copy
        wsJL.Range("B3:I" & lastrow).PasteSpecial xlPasteFormats
        lastrow = wsJL.Cells(Rows.Count, "J").End(xlUp).Row + 1
        fstcell = wsJL.Cells(Rows.Count, "I").End(xlUp).Row
        wsJL.Range("Z1:AG1").Copy wsJL.Range("J" & fstcell & ":Q" & lastrow)
        wsJL.Range("S2:X2").Copy wsJL.Range("P" & fstcell & ":T" & lastrow)
        lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
        wsJL.Range("J:Q").Calculate
        Range("B3:N" & lastrow).Sort key1:=Range("F3" & lastrow), order1:=xlAscending

    End With

    With wsJAR
        lastrow = wsJAR.Cells(Rows.Count, "O").End(xlUp).Row
        wsJAR.Range("R2:T2").Copy wsJAR.Range("R3:T" & lastrow)
        wsJAR.Range("M1").Copy wsJAR.Range("M3:M" & lastrow)
    End With

    With wsJL
        strCompany = Range("C3") ' assumes company name in C3
        strPart = CleanName(Range("D3")) ' assumes part in D1
        strPath = CleanName(Range("Lists!$G$2"))

        If Not FolderExists(strPath & strCompany) Then
        'company doesn't exist, so create full path
            FolderCreate strPath & strCompany & Application.PathSeparator & strPart
        Else
        'company does exist, but does part folder
            If Not FolderExists(strPath & strCompany & Application.PathSeparator & strPart) Then
                FolderCreate strPath & strCompany & Application.PathSeparator & strPart
            End If
        End If

        Range("J:M").Calculate
    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With

End Sub

Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If Functions.FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path ' could there be any error with this, like if the path is really screwed up?
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function

Function FolderExists(ByVal path As String) As Boolean

FolderExists = False
Dim fso As New FileSystemObject

If fso.FolderExists(path) Then FolderExists = True

End Function

Function CleanName(strName As String) As String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/", "")
    CleanName = Replace(CleanName, "*", "")
    CleanName = Replace(CleanName, ".", "")

End Function 
```

到目前为止，错误就在这里，因为这是脚本允许我去的地方。错误是：

```
Compile Error: Variable not defined 
```

代码如下，争用的地方在`*`.`If **Functions**.FolderExists(path) Then`

```
Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If Functions.FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path ' could there be any error with this, like if the path is really screwed up?
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:19:36.807

你只是把代码弄错了一点。

每个新函数都应该在 sub 之下，因为它是一个从 sub 调用的单独过程。值得阅读函数和子函数并相互调用它们。

我在下面重新组织了。希望会更加清晰和干净。

```
Option Explicit

Sub Update_JL()

    Dim wsJL As Worksheet 'Jobs List
    Dim wsJD As Worksheet 'Jobs Data
    Dim wsJAR As Worksheet 'JL Archive
    Dim lastrow As Long, fstcell As Long
    Dim strCompany As String, strPart As String, strPath As String

    Set wsJL = Sheets("Jobs List")
    Set wsJD = Sheets("Jobs Data")
    Set wsJAR = Sheets("JL Archive")

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

    With Intersect(wsJL.UsedRange, wsJL.Columns("Q"))
        .AutoFilter 1, "<>Same"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("B:O"))
            .Copy wsJAR.Cells(Rows.Count, "B").End(xlUp).Offset(1)
            .EntireRow.Delete
        End With
        .AutoFilter
    End With

    With wsJD
        'Clean up step 1
        lastrow = Range("B" & Rows.Count).End(xlUp).Row + 1
        Range("C5:C" & lastrow).SpecialCells(xlCellTypeBlanks).EntireRow.Delete

        'Blow away rows that are useless
        lastrow = Range("B5").End(xlDown).Row
        Range("P5:Q5").Copy wsJD.Range("P6:Q" & lastrow)
        wsJD.UsedRange.Copy Sheets.Add.Range("A1")
    End With

    With Intersect(ActiveSheet.UsedRange, ActiveSheet.Columns("Q"))
        ActiveSheet.Range("P:Q").Calculate
        .AutoFilter 1, "<>Different"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With

    With ActiveSheet
        ActiveSheet.Range("P:Q").Calculate
        .AutoFilterMode = False
        Intersect(.UsedRange, .Columns("G")).Cut .Range("F1")
        Intersect(.UsedRange, .Columns("H")).Cut .Range("G1")
        Intersect(.UsedRange, .Columns("L")).Cut .Range("H1")
        Intersect(.UsedRange, .Columns("N")).Cut .Range("I1")
        Intersect(.UsedRange, .Range("B:I")).Copy wsJL.Cells(Rows.Count, "B").End(xlUp).Offset(1)
        .Delete
    End With

    With wsJL
        lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
        wsJL.Range("R1:Y1").Copy
        wsJL.Range("B3:I" & lastrow).PasteSpecial xlPasteFormats
        lastrow = wsJL.Cells(Rows.Count, "J").End(xlUp).Row + 1
        fstcell = wsJL.Cells(Rows.Count, "I").End(xlUp).Row
        wsJL.Range("Z1:AG1").Copy wsJL.Range("J" & fstcell & ":Q" & lastrow)
        wsJL.Range("S2:X2").Copy wsJL.Range("P" & fstcell & ":T" & lastrow)
        lastrow = wsJL.Cells(Rows.Count, "B").End(xlUp).Row
        wsJL.Range("J:Q").Calculate
        Range("B3:N" & lastrow).Sort key1:=Range("F3" & lastrow), order1:=xlAscending

    End With

    With wsJAR
        lastrow = wsJAR.Cells(Rows.Count, "O").End(xlUp).Row
        wsJAR.Range("R2:T2").Copy wsJAR.Range("R3:T" & lastrow)
        wsJAR.Range("M1").Copy wsJAR.Range("M3:M" & lastrow)
    End With

    With wsJL

        strCompany = Range("C3") ' assumes company name in C3
        strPart = CleanName(Range("D3")) ' assumes part in D1
        strPath = CleanName(Range("Lists!$G$2"))

        If Not FolderExists(strPath & strCompany) Then
        'company doesn't exist, so create full path
            FolderCreate strPath & strCompany & Application.PathSeparator & strPart
        Else
        'company does exist, but does part folder
            If Not FolderExists(strPath & strCompany & Application.PathSeparator & strPart) Then
                FolderCreate strPath & strCompany & Application.PathSeparator & strPart
            End If
        End If

        Range("J:M").Calculate

    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With

End Sub

Function FolderCreate(ByVal path As String) As Boolean

FolderCreate = True
Dim fso As New FileSystemObject

If FolderExists(path) Then
    Exit Function
Else
    On Error GoTo DeadInTheWater
    fso.CreateFolder path ' could there be any error with this, like if the path is really screwed up?
    Exit Function
End If

DeadInTheWater:
    MsgBox "A folder could not be created for the following path: " & path & ". Check the path name and try again."
    FolderCreate = False
    Exit Function

End Function

Function FolderExists(ByVal path As String) As Boolean

FolderExists = False
Dim fso As New FileSystemObject

If fso.FolderExists(path) Then FolderExists = True

End Function

Function CleanName(strName As String) As String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/", "")
    CleanName = Replace(CleanName, "*", "")
    CleanName = Replace(CleanName, ".", "")

End Function 
```

# node.js - 使 lftp 写入标准输出而无需先关闭进程

> ID：10851622
> 
> 赞同：0
> 
> 时间：2012-06-01T13:54:42.740
> 
> 标签：node.js, stdout, child-process, unbuffered, lftp

我正在尝试使用 child_process 将 lftp 程序包装在 node.js 应用程序中。问题是 lftp 不会将其输出写入标准输出，因此我无法在 node.js 中捕获其输出。示例代码：

```
var proc = require('child_process').spawn('lftp', ['-p', port, '-u', username + ',' + password, host]);

proc.stdout.on('data', function (data) {
    console.log('stdout:', data.toString('utf-8'));
});

proc.on('exit', function (code) {
    console.log('process exited with code ' + code);
});

proc.stdin.write('ls');
// proc.stdin.end(); 
```

如果我取消注释为 lftp 子进程调用 stdin.end() 的行，则 ls 命令的输出将按原样出现在我的终端中。如果我不这样做，该过程只会挂起并且没有任何输出。

我也尝试过使用 unbuffer，但它似乎不再允许我写入 lftp 的标准输入。它输出通常的“[解析主机地址...]”内容，但不输出 ls 命令的输出。

我的问题是：我必须做些什么才能使用 node.js 的 child_process 与 lftp 交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:15:13.823

嗯，这很愚蠢。我忘了在 ls 命令到 stdin 之后写一个换行符。它似乎不需要取消缓冲就可以工作。

# windows - GO 可以用作应用程序中的脚本引擎吗？

> ID：10851624
> 
> 赞同：13
> 
> 时间：2012-06-01T13:54:46.950
> 
> 标签：windows, scripting, go

*GO*可以用作应用程序中的脚本语言吗？我找不到任何关于此的信息：是否有一个动态链接库版本，它可以从 Windows 应用程序与一些标准方法（如*Compile()*、*Execute*和*回调*、*变量共享*等功能进行接口）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:32:24.783

起初这可能听起来很奇怪，但请跟我来：我认为它是脚本语言的完美候选者，因为它的编译时间是如此之快......听我说......

大多数脚本语言都是解释性的，因此它们不需要（甚至在某些情况下提供）编译。然而，编译语言通常更安全，因为它们可以在编译时捕获某些错误，这比在运行时捕获语法错误要好。

使用 Go，编译时间如此之快，以至于任何运行 Go 代码的程序（例如 Web 服务器）都可以假设如果代码发生更改，则按需编译代码，否则使用编译后的版本。

实际上，如果您查看 Google App Engine 并下载他们的 Go 开发网络服务器 ( [https://developers.google.com/appengine/](https://developers.google.com/appengine/) )，您会注意到他们的网络服务器正是这样做的。如果您通过他们的 Hello World 教程运行 Go，您会注意到，如果您对代码进行更改，则无需重新编译 Go 代码即可使更改生效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T19:18:17.300

[Go](http://golang.org/ref/spec)不是脚本语言。因为 Go 是为快速编译而设计的，所以有一些尝试将其用作脚本语言。例如，

*   [去跑步](https://wiki.ubuntu.com/gorun)
*   [现在出发](https://github.com/kless/GoNow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:16:39.750

理论上（也许在我不知道的某个地方），Go 可以用作脚本语言。请注意，它与使用例如 C 作为脚本语言一样有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T00:40:19.300

不可以。Go 代码不能在非 Go 应用程序中使用，除非 Go 负责启动整个应用程序。

# c# - 使用 Entity.Framework 时数据存储在哪里？

> ID：10851627
> 
> 赞同：0
> 
> 时间：2012-06-01T13:54:49.260
> 
> 标签：c#, entity-framework

我创建了一个数据初始化类来在开始时存储一些数据。我现在想查看这些数据，看看它的样子。可以以某种方式完成吗？顺便说一句，这些数据存储的是什么，是mssql吗？

```
public class AccountsInitializer : 
    DropCreateDatabaseAlways<Base.Models.AccountRepository>
{
    protected override void Seed(Models.AccountRepository context)
    {
         context.Accounts.Add(admin);
         ...
         base.Seed();
    }
} 
```

**app.config 文件**

```
<connectionStrings>
    <add name="Accounts" 
         connectionString="data source=yoaynzmjvq.database.windows.net;
         Initial Catalog=accounts;
         User ID= ...;
         Password=...;
         Encrypt=true;
         Trusted_Connection=false;
         MultipleActiveResultSets=True" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:04:39.537

根据您的连接字符串，它是一个名为`accounts`(Initial Catalog) 的 MS SQL (SqlClient) 数据库，位于名为`yoaynzmjvq.database.windows.net`(Data Source) 的服务器上。

# sql-server - 有没有办法检查 SQL Server 数据库是否有活动的 BEGIN CONVERSATION TIMER？

> ID：10851629
> 
> 赞同：0
> 
> 时间：2012-06-01T13:55:07.630
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, service-broker

我正在使用消息传递计时器功能来安排异步过程的执行，一切似乎都很顺利，但我只测试了很短的时间范围（将超时设置为几个小时）。

我决定使用此功能是因为计时器功能应该完全包含在单个数据库范围/上下文“内”（而不是依赖于服务器实例）。因此，计时器不应受到服务器重新启动、从备份中恢复数据库（前提是在计时器设置后已完成备份）等的干扰。如果它在实践中确实以这种方式工作，我会很高兴，但它似乎也是美丽是真的，所以我希望能够检查计时器。也许看看它会火多久。

有没有我可以运行的查询，也许是在 sys.objects 表上，可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:57:52.423

我自己从未使用过此功能，但[文档](http://msdn.microsoft.com/en-us/library/ms176082.aspx)说这`sys.conversation_endpoints.dialog_timer`是“此对话的对话计时器发送 DialogTimer 消息的时间”，我认为这是您正在寻找的。

# java - 无法以某种方式将空值放入 HashMap

> ID：10851631
> 
> 赞同：-10
> 
> 时间：2012-06-01T13:55:12.857
> 
> 标签：java, android, null, hashmap

我正在编写一个 Android 应用程序并使用`HashMap<String,MyClass>`. 根据 Java 和 Android 文档，HashMap 应该接受空键和空值。但是，奇怪的是，我不能将 null 值放入我的地图中。在代码中：

```
myMap.put(1, null); 
```

我收到错误：

`The method put(String, MyClass) in the type HashMap<String,MyClass> is not applicable for the arguments (int, null)`.

这是为什么？什么可能是错误的以及如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T13:57:53.433

在这种情况下，值不是问题。由于 HashMap 被声明为具有 String 键，并且您尝试将 int 键放入其中，因此它不是在抱怨值而是在抱怨键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T13:57:54.633

因为您使用的是 int 类型的键，并且它被声明为除了 String 类型的键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T14:42:15.257

HashMap 被声明为具有 String 键，并且您正在尝试放置一个 int 键。

在您的情况下，您可以使用以下内容：

```
myMap.put("1", null); 
```

或者

```
myMap.put(1 + "", null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T13:25:27.617

首先尝试找出错误然后寻找所需的解决方案。因为我们的大多数问题都将通过查看错误描述来解决。它清楚地表明您使用的是 int 而不是 string。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-10T12:01:23.563

如果您想使用 Integer 作为 Map 的键，请将您的 Map 定义更改为：

```
Map<Integer,MyClass> myMap = new HashMap();
myMap.put(1, null); 
```

其他明智的使用字符串作为你的地图的关键：

```
Map<String,MyClass> myMap = new HashMap();
myMap.put("1", null); 
```

# c# - Web 服务的摘要说明

> ID：10851635
> 
> 赞同：1
> 
> 时间：2012-06-01T13:55:19.253
> 
> 标签：c#, web-services, intellisense

我正在编写许多 Web 服务，并想知道是否有任何方法可以发布摘要或一些注释，以便任何使用它们的人都可以看到该方法的用途等。

我敢肯定，这要么是一个“不可能”的问题，要么是一个“非常容易做”的问题。

我在我的方法中添加了 xml 注释，但是当我在对象资源管理器中查看服务时，或者在我的测试工具应用程序中使用了 Web 服务时，似乎没有任何可用的注释。

使用 Visual Studio 2010 用 C# 编写的 Web 服务和 winforms 测试工具应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:00:49.613

wsdl:document 不受 XmlSerialiser 支持，但您可能对这个[http://wcfextras.codeplex.com/有一些运气](http://wcfextras.codeplex.com/)

# google-apps-script - 如何让脚本在手机和平 板电脑上工作

> ID：10851641
> 
> 赞同：2
> 
> 时间：2012-06-01T13:55:55.977
> 
> 标签：google-apps-script, google-sheets, triggers, mobile-devices

我正在为使用 onEdit 函数编辑单元格时运行的谷歌文档电子表格编写脚本。

到目前为止，它执行的功能超出了电子表格功能可以实现的范围，例如：

*   根据输入位置验证所有数据
*   提供保护不应该被修改的细胞的机制
*   记录输入的日期和时间数据（虽然用户部分不能正常工作）
*   检查重复条目并相应地发出警告
*   应用数字格式（超出菜单中的有限选择）
*   应用条件格式（没有限制！）
*   还有更多

但是我发现的一个问题是，当从移动浏览器（例如 iPhone 或安卓平板电脑）编辑单元格时，脚本不起作用？

根据维基百科：

> Google Apps Script 是一种基于云的脚本语言，用于在 Google Apps 平台中进行轻量级应用程序开发。它基于 JavaScript，[2] 但是它不是在客户端上运行，而是在 Google Cloud 中执行。

是我做错了什么还是有另一种方法来设置我的触发器，以便即使有人从移动浏览器输入数据也能运行我的脚本？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:50:31.623

在移动视图中编辑行时，不会触发编辑触发器。单击“转到电子表格视图”链接将打开完整的电子表格编辑器，触发器将在其中触发。可能存在技术上的复杂性，使触发器在移动视图中工作变得不切实际，但您可以在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上为其创建功能请求。

# php - 使用 MySQL SELECT 语句搜索记录

> ID：10851648
> 
> 赞同：-2
> 
> 时间：2012-06-01T13:56:17.193
> 
> 标签：php, mysql, search

我正在尝试在数据库中搜索用户输入的术语。这是我正在使用的 MYSQL 语句：

```
SELECT CompanyName, FirstName, LastName, Phone, Email, City, Rep, id 
FROM calls 
WHERE Rep='JSC' && CompanyName || FirstName || LastName || PhoneMisc1 || Email || City LIKE '%$terms%' 
```

问题是，它不仅返回 Rep='JSC' 的记录，而且它的其余部分都用于返回类似于术语的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:03:23.773

做喜欢

```
SELECT CompanyName, FirstName, LastName, Phone, Email, City, Rep, id  
FROM calls WHERE Rep='JSC' and 
(
CompanyName LIKE '%$terms%' 
or
FirstName LIKE '%$terms%' 
 or 
 LastName LIKE '%$terms%' 
or 
PhoneMisc1 LIKE '%$terms%' 
or 
Email LIKE '%$terms%' 
or 
City LIKE '%$terms%'
) 
```

# android - 在 Maven->Update Project 之后，Android 应用程序对 android 库项目的引用被破坏

> ID：10851655
> 
> 赞同：1
> 
> 时间：2012-06-01T13:56:54.493
> 
> 标签：android, maven, m2eclipse, android-maven-plugin

我有一个 android 项目和一个它依赖的 android 库项目（我自己的）。我使用 maven，包括 maven-android-plugin，用于自动构建，并使用 Eclipse 作为我的 IDE，使用 m2eclipse 和 m2e-android 来连接两者。

在大多数情况下，它工作正常：我可以从命令行进行 maven 构建，也可以从 Eclipse 构建。

但是，我经常在 Eclipse 中为主要的 android 应用程序项目生成一个构建错误，上面写着“项目配置不是最新的 pom.xml。运行 Maven->更新项目或使用快速修复。”。当我这样做时，它似乎弄乱了应用程序的 project.properties 文件中从应用程序到库项目的相对路径。具体来说，库项目的相对路径从正确的一个更改为一个反映项目在 Eclipse 工作区中的相对位置的路径。

示例：磁盘布局如下所示：

/libs
-- /my-lib
/apps
-- /my-app

因此，从 my-app 到 my-lib 的正确相对路径是 ../../libs/my-lib。

但是，在我的 Eclipse 工作区中，my-app 和 my-lib 是兄弟姐妹，当我执行 Maven-Update 项目时，它会更新 project.properties，以便 my-lib 的相对路径（即“android.library.reference.1 =") 变成“../my-lib”。

结果，在 Eclipse 中，主应用程序中对库项目中符号的所有引用都出现编译错误。如果我然后转到 Eclipse 中的 Android 属性对话框，在列出库项目的底部部分，我的库项目旁边有一个红色的 X。如果我删除它并重新添加它，从而更正 project.properties 中的相对路径，那么一切都很好。

这有点麻烦。知道如何解决吗？注意：虽然我描述的相对路径的更改是正确的，但这只是一个理论，这与项目在 Eclipse 工作区中的相对位置有关——这可能是巧合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:28:00.117

这是一个已知问题，目前正在处理：

[https://github.com/rgladwell/m2e-android/issues/76](https://github.com/rgladwell/m2e-android/issues/76)

# axis2 - Axis2 和 Spring3 集成

> ID：10851656
> 
> 赞同：1
> 
> 时间：2012-06-01T13:56:57.480
> 
> 标签：axis2, spring-3

我有一个使用 Spring3 开发的 Web 应用程序。Web 应用程序的某些功能也需要作为 Web 服务公开。Web 应用程序作为 .war 文件部署在 Tomcat 服务器中。我已经在站点[http://axis.apache.org/axis2/java/core/docs/spring.html](http://axis.apache.org/axis2/java/core/docs/spring.html)中完成了 Axis2 和 Spring 的集成。我不清楚的是最终结构的样子。需要澄清以下几点，

1）“With ServletContext”和“Without ServletContext”的最终应用程序的目录结构应该是什么？

2）.aar文件也应该放在WEB-INF/lib目录下吗？如果是这样，axis2如何将其识别为服务，因为它对.aar文件之类的目录结构以及其中包含services.xml的META-INF具有强制性。以及与 META-INF 文件夹处于同一级别的类。

我不确定我在获取整个图片时是否出错。任何指南或好的教程都会非常有帮助。

# ruby-on-rails - 可选的 time_select 和 allow_blank 默认为 00:00

> ID：10851659
> 
> 赞同：6
> 
> 时间：2012-06-01T13:57:03.580
> 
> 标签：ruby-on-rails

我正在尝试在我的表单中设置一个时间字段可选。我正在这样做：

```
<%= f.time_select :end_time, minute_step: 5, include_blank: true %> 
```

然而，当它被提交时，由于使用 time_select 自动提交了默认日期信息，因此参数如下所示：

`end_time(1i): '2000' end_time(2i): '1' end_time(3i): '1' end_time(4i): '' end_time(5i): ''`

Rails 将此解释为真实日期并将 end_time 设置为 00:00

是否有任何修复/锻炼能够有一个可选的时间字段？我在控制器中试过这个：

```
if params[:event][:end_time] && params[:event][:end_time][:hour].blank? && params[:event][:end_time][:minute].blank?
  params[:event][:end_time] = nil
end 
```

但这似乎不起作用。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-02T23:11:02.143

按照同样的思路，对我来说效果很好的是：

向控制器添加前置过滤器/操作

```
before_filter :filter_blank_end_time, only: [:create, :update] 
```

创建过滤器

```
def filter_blank_end_time
    if params[:event]['end_time(4i)'].blank?
        params[:event]['end_time(1i)'] = ""
        params[:event]['end_time(2i)'] = ""
        params[:event]['end_time(3i)'] = ""
        params[:event]['end_time(4i)'] = ""
        params[:event]['end_time(5i)'] = ""
    end
end 
```

为所有字段传递空字符串似乎会为结束时间产生 NIL 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:06:32.860

您的参数不是 [:event][:end_time]，它们是：

[:event]['end_time(1i)']..[:event]['end_time(5i)'] 分别。

使参数值为零无济于事，您需要从参数哈希中拒绝该键；例如

`params[:event].except('end_time(4i)', 'end_time(5i)') if params[:event]['end_time(4i)'].blank?`

# objective-c - 如何检测目标c静态方法中的调用类

> ID：10851664
> 
> 赞同：0
> 
> 时间：2012-06-01T13:57:14.580
> 
> 标签：objective-c, class, inheritance, factory-method

如何从静态方法中检测调用类，以便如果该类是子类，则检测到子类？（见 MakeInstance 内的评论）

```
@interface Widget : NSObject
+ (id) MakeInstance;
@end

@implementation Widget
+ (id) MakeInstance{
    Class klass = //How do I get this?
    id instance = [[klass alloc] init];
    return instance;
}
@end

@interface UberWidget : Widget
//stuff
@end

@implementation UberWidget
//Stuff that does not involve re-defining MakeInstance
@end

//Somewhere in the program
UberWidget* my_widget = [UberWidget MakeInstance]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:59:19.173

我相信您要完成的适当解决方案是：

```
+ (id) MakeInstance{
    id instance = [[self alloc] init];
    return instance;
} 
```

正如 Cyrille 指出的那样，`[instance autorelease]`如果您想遵循约定（并且不使用 ARC），它可能应该返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:01:45.777

UIAdam 的解决方案非常适合您的情况。虽然如果你想检测，更具体地说，你的方法是从哪个类调用的，`[self class]`在对象上使用，或者只是`self`用于类。

# paypal - 是否可以在提交给 PayPal 的参数列表中为订阅按钮发布高级 HTML 变量？

> ID：10851677
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:07.933
> 
> 标签：paypal, paypal-subscriptions

我正在使用 PayPal 标准订阅按钮。HTML 看起来类似于下面的代码片段。问题是 FORM 参数 a1/p1/t1、a3/p3/t3、src/sra 以及 PayPal 订阅按钮的任何其他高级 HTML 变量都无法被覆盖。也就是说，它们仍然设置为您在 PayPal 网站上的标准按钮配置中配置的值。

问题：如何以编程方式覆盖我网站上的高级 PayPal 订阅参数？这甚至可能吗？谢谢。

```
<form accept-charset="UTF-8" action="https://www.paypal.com/cgi-bin/webscr" class="signup_company" id="signup_company" method="post">
  <input type="hidden" name="cmd" value="_s-xclick" />
  <input type="hidden" name="hosted_button_id" value="MY_PAYPAL_BUTTON_ID" />
  <input type="hidden" name="currency_code" value="USD" />

  <!-- First two months of subscription are free. -->
  <input type="hidden" name="a1" value="0" />
  <input type="hidden" name="p1" value="2" />
  <input type="hidden" name="t1" value="M" />

  <!-- Recurring subscription payments. -->
  <input type="hidden" name="a3" value="29.95" />
  <input type="hidden" name="p3" value="1" />
  <input type="hidden" name="t3" value="M" />
  <input type="hidden" name="src" value="1" />
  <input type="hidden" name="sra" value="1" />

  <!-- Pass-through variable sent to paypal; it is set in javascript before the submit. -->
  <input type="hidden" name="custom" value="Evergreen::::foo@baz.com::::4" />

  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribe_SM.gif"
    border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"
    onclick="$(#signup_company).submit();" />
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:19:02.113

在与 PayPal 技术人员交谈后，如果您希望对 HTML 表单变量进行最大程度的编程控制，以下是如何继续使用 PayPal 标准订阅按钮：

1.  不要将您的按钮保存为 PayPal 的托管按钮。如果这样做，则无法覆盖您在 PayPal 配置和保存的任何价格等级。
2.  不要加密您的按钮。这意味着当您创建订阅按钮时，您应该做两件事： (a) 在 HTML 表单发布中使用您的电子邮件地址，而不是来自 PayPal 的某些商家 ID；(b) 取消保护/取消加密在按钮创建步骤中生成的 HTML 表单变量。

一旦您将 PayPal 生成的 HTML 复制并粘贴到您的 web 应用程序中，您就可以依靠 JavaScript 事件处理程序来动态调整 HTML 表单参数，这些参数决定了您的订阅的定价/持续时间等。

# c++ - 打印网页问题的内容

> ID：10851679
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:13.997
> 
> 标签：c++, visual-c++, mfc

我不知道我的代码有什么问题，但它不会向标准输出打印任何内容，尽管调试器中显示了一些内容。

```
#include "stdafx.h"
#include <afx.h>
#include <afxinet.h>

#include <iostream>
#include <list>
#include <string>
#include <vector>
#include "wininet.h"

using namespace std;

void DisplayPage(LPCTSTR pszURL)
{
   CInternetSession session(_T("Mozilla/5.0"));
   CStdioFile* pFile = NULL;
   pFile = session.OpenURL(pszURL);
   CString str = _T("");

   while ( pFile->ReadString(str) )
   {
       wcout << str.GetString() << endl;  // <-- here I expect some output, get nothing
                                            //     not even newline !
   }

   delete pFile;
   session.Close();
}

// --- MAIN ---
int _tmain(int argc, _TCHAR* argv[])
{
    DisplayPage( _T("http://www.google.com") );

    cout << "done !" << endl;
    cin.get();

    return 0;
} 
```

这是一个控制台项目。控制台窗口弹出消息*“完成！”* 仅显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:44:39.947

如果有人对此感兴趣，则该问题是由尝试写入默认控制台的网页收到的非 OEM 字符引起的（期望 OEM 字符，翻译模式）。在第一个非 OEM 字符处，std::wcout 停止处理。将控制台设置为二进制模式或将接收到的字符串转换为适当的编码*，然后再*发送到标准输出。

```
#include <fcntl.h>
#include <io.h>

...
int old_transmode = _setmode(_fileno(stdout), _O_U16TEXT);
std::wcout << str.GetString() << std::endl;    // print wide string characters
...
_set_mode(_fileno(stdout), old_transmode);    // restore original console output mode 
```

# excel - 如何从多个excel表中读取并根据A列合并数据

> ID：10851680
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:14.423
> 
> 标签：excel, excel-2010, vba

我有 n 个带有一些客户端#的 excel 文件，以及在安装、故障排除、交付等不同阶段花费的小时数。

客户编号、安装、故障排除、交付
7890 2 1 0.5

与此类似，我在其他 excel 文件中也有客户端，但其他文件中可能会有一些客户端重复。现在我需要在一张纸上整理所有数据，但我不需要重复客户，而是在适当的列中总结所有总小时数。

我尝试使用以下代码为 cloumn A 获取唯一客户，但它没有奏效：

```
Sub Combine_Workbooks_Select_Files()

    Dim MyPath As String
    Dim SourceRcount As Long, Fnum As Long
    Dim mybook As Workbook, BaseWks As Worksheet
    Dim sourceRange As Range, destrange As Range
    Dim rnum As Long, CalcMode As Long
    Dim SaveDriveDir As String
    Dim FName As Variant

    With Application
        CalcMode = .Calculation
        .Calculation = xlCalculationManual
        .ScreenUpdating = False
        .EnableEvents = False
    End With

    SaveDriveDir = CurDir
    ChDirNet "C:\"

    FName = Application.GetOpenFilename(filefilter:="Excel Files (*.xl*), *.xl*", _
                                        MultiSelect:=True)
    If IsArray(FName) Then
        Set BaseWks = Workbooks.Add(xlWBATWorksheet).Worksheets(1)
        rnum = 1
        For Fnum = LBound(FName) To UBound(FName)
            Set mybook = Nothing
            On Error Resume Next
            Set mybook = Workbooks.Open(FName(Fnum))
            On Error GoTo 0
            If Not mybook Is Nothing Then
                On Error Resume Next
                With mybook.Worksheets(1)
                    Set sourceRange = .Range("A1:A25")
                End With
                If Err.Number > 0 Then
                    Err.Clear
                    Set sourceRange = Nothing
                Else
        If sourceRange.Columns.Count >= BaseWks.Columns.Count Then
                        Set sourceRange = Nothing
                    End If
                End If
                On Error GoTo 0

                If Not sourceRange Is Nothing Then

                    SourceRcount = sourceRange.Rows.Count

                    If rnum + SourceRcount >= BaseWks.Rows.Count Then
                        MsgBox "Not enough rows in the sheet. "
                        BaseWks.Columns.AutoFit
                        mybook.Close savechanges:=False
                        GoTo ExitTheSub
                    Else
                        Set destrange = BaseWks.Range("A" & rnum)
                        With sourceRange
                            Set destrange = destrange. _
                                            Resize(.Rows.Count, .Columns.Count)
                        End With
                        destrange.Value = sourceRange.Value

                        rnum = rnum + SourceRcount
                    End If
                End If
                mybook.Close savechanges:=False
            End If
        Next Fnum
        BaseWks.Columns.AutoFit
    End If

ExitTheSub:

    With Application
        .ScreenUpdating = True
        .EnableEvents = True
        .Calculation = CalcMode
    End With
    ChDirNet SaveDriveDir

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:42:57.860

将要重复数据删除的数据复制到已知范围内，然后您可以使用它`ActiveSheet.Range("$A$1:$A$22").RemoveDuplicates`来删除任何重复项

# wpf - DataGrid 滚动导致混合值

> ID：10851682
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:22.277
> 
> 标签：wpf, silverlight, datagrid, scroll

当我在（WPF 或 Silverlight）中绑定了一个列表时，当我上下滚动时`DataGrid`，其中的值会混合在一起。`DataGrid`

![滚动行为](../Images/7e09dfc50e66f1c56b56ecf769b7c1f8.png)

左边是原始值，右边是滚动后的值。

这里有一些 Xam（没什么特别的）：

```
<sdk:DataGrid Grid.Row="2" Grid.ColumnSpan="2" ItemsSource="{Binding LookupTable1}" AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Header="Value" Width="150" Binding="{Binding Path=TextValue}"/>
        <sdk:DataGridTemplateColumn Header="Color" Width="*">
            <sdk:DataGridTemplateColumn.CellTemplate>
                <sdk:HierarchicalDataTemplate>
                    <telerik:RadColorPicker/>
                </sdk:HierarchicalDataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:20:47.790

我没有看到您已将 Telerik 颜色选择器绑定到您的 itemssource 上的任何属性，所以我不知道它如何知道为任何单独的行显示什么颜色。我对telerik控件本身并不是特别熟悉，但是如果在实例化时没有初始化，它们会显示随机颜色吗？

```
 <sdk:DataGridTemplateColumn Header="Color" Width="*">
         <sdk:DataGridTemplateColumn.CellTemplate>
              <sdk:HierarchicalDataTemplate>
                      <telerik:RadColorPicker/> <!-- this isn't bound to anything //-->
              </sdk:HierarchicalDataTemplate>
         </sdk:DataGridTemplateColumn.CellTemplate>
   </sdk:DataGridTemplateColumn> 
```

# javascript - EXTJS4 X模板

> ID：10851683
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:25.170
> 
> 标签：javascript, extjs, extjs4

作为 EXTJS 世界中的一个初学者，我希望得到一些建议，因为我有点卡在这里：

我正在使用 Xtemplate 从商店中提取信息。

```
var tpl = new Ext.XTemplate(
            '<tpl for=".">',
            '<p>{data.address}</p>',
            '<p>{data.ip}</p>',
            '</br>',
            '</tpl>'
        ); 
```

这会将 {data.address} 的字符串显示为 /domain/hub/servername。

我试图了解我如何能够只显示“服务器名称”部分。

阅读我在那里看到的文档，您可以在里面使用一个函数，所以我尝试并失败了：

```
'<p>{[RegExp(".*/(.*)", data.address)]}</p>', 
```

我可能在那里离目标很远，就像我说我正在努力解决这个问题。欢迎任何建议！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:37:14.817

您可以像这样使用`inline code`和的组合`Template member functions`：

```
var tpl = new Ext.XTemplate(
    '<tpl for=".">',
    '<p>{[this.getServerName(values.data.address)]}</p>',
    '<p>{data.ip}</p>',
    '</br>',
    '</tpl>',
    {
        getServerName: function(fulladdress) {
            return fulladdress.replace(/.*\//g, '');
        }
    }
); 
```

这是[演示](http://jsfiddle.net/molecule/eUhf9/1/)。

# blackberry - rapc: c: Error!: 数据贡献太大 j2me Polish

> ID：10851685
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:32.840
> 
> 标签：blackberry, java-me, blackberry-jde, j2mepolish

我正在开发一个使用 j2me Polish 的项目，现在我收到一个错误，即 Using Default Jar Packager

```
creating JAD file [D:\MobileDevelopment\risingkarachi5_21_2012\dist\BlackBerry-5.0-de_DE-risingkarachi.jad].
jdp: Reading template...
jdp: Collecting java classes from D:\MobileDevelopment\risingkarachi5_21_2012\build\real\BlackBerry\5.0\de_DE\source...
jdp: Collecting resources from D:\MobileDevelopment\risingkarachi5_21_2012\build\real\BlackBerry\5.0\de_DE\resources...
jdp: Writing files to project D:\MobileDevelopment\risingkarachi5_21_2012\build\real\BlackBerry\5.0\de_DE\J2ME_Polish_Beispiel.jdp...
jdp: Creating D:\MobileDevelopment\risingkarachi5_21_2012\build\real\BlackBerry\5.0\de_DE\J2ME_Polish_Beispiel.jdp
JDP: Note: project is obfuscated, the generated JDP will not contain the necessary subproject for the imported files.
jdp: Creating D:\MobileDevelopment\risingkarachi5_21_2012\build\real\BlackBerry\5.0\de_DE\J2ME_Polish_BeispielLIB.jdp
rapc: Converting jar to cod for device [BlackBerry/5.0]
rapc: Resolving
rapc: Optimizing
rapc: c: Error!: Data contribution too large: 435372
rapc-call: [java, -Xmx512m, -cp, C:\Program Files (x86)\Research In Motion\BlackBerry JDE 5.0.0\bin\rapc.jar, net.rim.tools.compiler.Compiler, import=C:\Program Files (x86)\Research In Motion\BlackBerry JDE 5.0.0\lib\net_rim_api.jar, codename=BlackBerry-5.0-de_DE-risingkarachi, BlackBerry-5.0-de_DE-risingkarachi.rapc, BlackBerry-5.0-de_DE-risingkarachi.jar]
D:\MobileDevelopment\risingkarachi5_21_2012\build.xml:99: rapc failed and returned 97
BUILD FAILED (total time: 13 seconds) 
```

我已经使用了 build.xml 中的所有黑莓属性，并且我遵循了

[http://www.enough.de/products/j2me-polish/documentation/platforms/blackberry/](http://www.enough.de/products/j2me-polish/documentation/platforms/blackberry/)链接以创建黑莓版本，但仍未解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:27:40.760

我的问题已经解决，当您使用一些资源（如类或图像）超过 64kb 并且我的单个类为 296kb 时会出现此问题，因此我收到此错误，然后我将该类分为多个小类。

谢谢

# regex - 关键字的正则表达式

> ID：10851686
> 
> 赞同：4
> 
> 时间：2012-06-01T13:58:33.313
> 
> 标签：regex, f#

如何编写正则表达式来表示某些关键字，而在它们之后或之前没有任何字母/数字？（符号和空格是可选的）

我试着写这个，但它似乎不起作用：

```
let resWord = "[class|function|static|this|return]"
let keyword = new Regex("[^[^a-zA-Z0-9]]"+resWord+"[^[a-zA-Z0-9]$]") 
```

我是正则表达式的新手，所以如果这是一个愚蠢的问题，请原谅:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T14:09:05.557

这可以使用消极的前瞻性和落后性来实现

```
 (?<![a-zA-Z0-9])(class|function|static|this|return)(?![a-zA-Z0-9]) 
```

或者没有他们。

```
 ([^a-zA-Z0-9])(class|function|static|this|return)([^a-zA-Z0-9]) 
```

# extjs - 需要将 ExtJs 示例应用程序转换为 MVC 应用程序

> ID：10851687
> 
> 赞同：1
> 
> 时间：2012-06-01T13:58:39.237
> 
> 标签：extjs, extjs4, extjs-mvc

我对这个示例有疑问，请参阅此链接 [http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/buffer-grid.html)

我想在 MVC 应用程序中进行转换。所以任何人请帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T05:38:47.677

首先你的模型在你的 app/model 文件夹中

```
Ext.define('AppName.model.Employee', {
    extend: 'Ext.data.Model',
    fields: [
       {name: 'rating', type: 'int'},
       {name: 'salary', type: 'float'},
       {name: 'name'}
    ]
}); 
```

并存储在您的应用程序/商店文件夹中

```
Ext.define('AppName.store.Employee', {
    extend:'Ext.data.Store', 
    buffered: true,
    pageSize: 5000, 
    model: 'Employee',
    proxy: { type: 'memory' }
}); 
```

以及您的 app/view 文件夹中的网格视图

```
Ext.define('AppName.view.EmployeeGrid', {
    alias:'employeegrid',
    extend:'Ext.grid.Panel', 
    width: 700,
    height: 500,
    title: 'Bufffered Grid of 5,000 random records',
    store: 'Employee',
    loadMask: true,
    disableSelection: true,
    viewConfig: { trackOver: false }, 
    columns:[{
        xtype: 'rownumberer',
        width: 40,
        sortable: false
    },{
        text: 'Name',
        flex:1 ,
        sortable: true,
        dataIndex: 'name'
    },{
        text: 'Rating',
        width: 125,
        sortable: true,
        dataIndex: 'rating'
    },{
        text: 'Salary',
        width: 125,
        sortable: true,
        dataIndex: 'salary',
        align: 'right',
        renderer: Ext.util.Format.usMoney
    }]
}); 
```

你的控制器在你的 app/controller 文件夹中

```
Ext.define('AppName.controller.Employee',{
    extend:'Ext.app.Controller',
    stores:['Employee'],
    views:['EmployeeGrid'],
    refs:[
        {ref:'employeeGrid',selector:'employeegrid'}        
    ],
    init:function(){
        var me = this;
        me.getEmployeeStore().loadData(me.createFakeData(5000));        
    },
    createFakeData:function(count) {
        var firstNames   = ['Ed', 'Tommy', 'Aaron', 'Abe', 'Jamie', 'Adam', 'Dave', 'David', 'Jay', 'Nicolas', 'Nige'],
            lastNames    = ['Spencer', 'Maintz', 'Conran', 'Elias', 'Avins', 'Mishcon', 'Kaneda', 'Davis', 'Robinson', 'Ferrero', 'White'],
            ratings      = [1, 2, 3, 4, 5],
            salaries     = [100, 400, 900, 1500, 1000000];

        var data = [];
        for (var i = 0; i < (count || 25); i++) {
            var ratingId    = Math.floor(Math.random() * ratings.length),
                salaryId    = Math.floor(Math.random() * salaries.length),
                firstNameId = Math.floor(Math.random() * firstNames.length),
                lastNameId  = Math.floor(Math.random() * lastNames.length),

                rating      = ratings[ratingId],
                salary      = salaries[salaryId],
                name        = Ext.String.format("{0} {1}", firstNames[firstNameId], lastNames[lastNameId]);

            data.push({
                rating: rating,
                salary: salary,
                name: name
            });
        }
        return data;
    }         
}); 
```

Funally你必须在你的应用程序文件夹中创建应用程序

```
Ext.application({
    requires:[
        'Ext.grid.*',
        'Ext.data.*',
        'Ext.util.*',
        'Ext.grid.PagingScroller',
        'AppName.view.EmployeeGrid'
    ],
    name:'AppName', 
    models:['Employee'], 
    stores:['Employee'],
    controllers:['Employee'],
    launch:function () {
        Ext.onReady(function(){
              Ext.create('Ext.Viewport', {
                  layout: 'fit',
                  items:[{xtype:'emplyeegrid'}]
              });
        });    
    }
 }); 
```

# javascript - jQuery :not() 选择器与 iOS5 兼容吗？

> ID：10851690
> 
> 赞同：0
> 
> 时间：2012-06-01T13:58:50.420
> 
> 标签：javascript, jquery, ios, ipad, safari

我在我的客户 wordpress 博客中使用以下**jQuery块：**

```
 jQuery(this)
      .children(":not('.previewTitle, .previewBody')")
      .fadeTo(fadeTime, activeOpacity, function(){
      //some code
}); 
```

这段代码淡化了父容器（this），但不是两个内部容器`.previewTitle`，`.previewBody`正如我所愿。此代码适用于除 iOS (5) Safari 之外的所有主要浏览器版本 - 有人知道为什么***iOS***对我有意见吗？

谢谢！

编辑：我已经检查了你的测试代码几次，但我真的看不出有什么不同。这是我的完整代码：

```
jQuery(thumbs).hover(
            function(){
                jQuery(this).children(":not(.previewTitle, .previewBody)").fadeTo(fadeTime, activeOpacity, function(){
                    //Display Preview Body once faded in
                    strId = jQuery(this).closest('div').attr('id'); //Get parent DIV ID
                    jQuery('#previewTitle' + strId.substr(9)).show();
                    jQuery('#previewBody' + strId.substr(9)).show();
                });
            },
            function(){
                // Only fade out if the user hasn't clicked the thumb
                if(!jQuery(this).hasClass(clickedClass)) 
                {
                    //Fade out of thumbnail..
                    jQuery(this).children(":not(.previewTitle, .previewBody)").fadeTo(fadeTime, inactiveOpacity, function(){
                        //Hide Preview Body once faded out
                        strId = jQuery(this).closest('div').attr('id'); //Get parent DIV ID
                        jQuery('#previewTitle' + strId.substr(9)).hide();
                        jQuery('#previewBody' + strId.substr(9)).hide();
                    });
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:03:16.317

您不要将论点`:not`放在引号中，只需：

```
jQuery(this).children(":not(.previewTitle, .previewBody)").fadeTo(....
//            no quote ----^              no quote ----^ 
```

`:not`接受*选择器*，而不是字符串。我很感兴趣它可以在带有引号的其他浏览器上运行......

除此之外，它应该可以工作。它适用于 iOS 4.3.2（我妻子的 iPad）：[Live copy](http://jsbin.com/anufer) | [资源](http://jsbin.com/anufer/edit)

HTML：

```
<p>Click anywhere in the shaded container:</p>
<div id="container">
  <p>Child that will fade</p>
  <p>Another that will fade</p>
  <p class="previewTitle">previewTitle - won't fade</p>
  <p>Another that will</p>
  <p class="previewBody">previewBody - won't fade</p>
  <p>Another that will</p>
</div> 
```

JavaScript：

```
jQuery(function($) {

  $("#container").click(function() {
    $(this)
      .children(":not('.previewTitle, .previewBody')")
      .fadeTo("slow", "0.2");
  });

}); 
```

...但我没有方便测试的 iOS 5。

* * *

边注：

> 这段代码淡化了父容器（this），但不是两个内部容器`.previewTitle`，`.previewBody`正如我所愿。

您引用的代码根本不会淡化父容器。除了列出的两个之外，它会淡化它的所有*孩子。*那不是一回事。

# codeigniter - 如何在命令行脚本中使用 CodeIgniter 的活动记录（或模型）对象？

> ID：10851695
> 
> 赞同：1
> 
> 时间：2012-06-01T13:59:10.720
> 
> 标签：codeigniter

标题几乎概括了它。我想编写一个脚本来从第三方导入一些数据。有什么方法可以获取 CodeIgniter 的 Active Record 类的实例，或者可以从命令行运行的脚本中的特定模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:19:47.013

假设您在其中有您的 CodeIgnited 应用程序`ignited/`，您有您的命令行脚本在其中运行`cli/`。这是您的文件夹布局：

```
ignited/
    application/
    system/
    index.php
cli/
    mycli.php 
```

现在你想`cli/mycli.php`使用一些模型`ignited/`

首先，你应该对你的`ignited`应用做一些事情：

1.  修改您的默认控制器（在 中设置`ignited/application/config/routes.php`）。例如`ignited/application/controllers/welcome.php`：

    ```
    class Welcome extends CI_Controller {

        public function index()
        {
            $this->load->view('welcome_message');
        }
    } 
    ```

    添加这些代码：

    ```
    if ($this->input->is_cli_request())
    {
        return;
    } 
    ```

    所以它看起来像：

    ```
    class Welcome extends CI_Controller {

        public function index()
        {
            if ($this->input->is_cli_request())
            {
                return;
            }
            $this->load->view('welcome_message');
        }
    } 
    ```

2.  为了测试，我创建了一个测试模型`ignited/application/models/do_nothing_model.php`：

    ```
    class Do_nothing_model extends CI_Model {

        public function __construct()
        {
            parent::__construct();
        }

        public function do_nothing()
        {
            return "Do nothing";
        }

    } 
    ```

好的！现在试试这个`cli/mycli.php`：

```
require_once('../ignited/index.php');

$ci =& get_instance();

$ci->load->model('do_nothing_model');
echo $ci->do_nothing_model->do_nothing(); 
```

***Drawback***: unable to run the default action of your default controller in command line

**UPDATE 2012-06-08**: from [CodeIgniter Wiki](http://codeigniter.com/wiki/Calling_CI_models_from_outside_script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:18:55.950

不确定这是否是您想要的，但如果您只需要从 CLI 运行 CI，这里是用户指南参考：

[http://codeigniter.com/user_guide/general/cli.html](http://codeigniter.com/user_guide/general/cli.html)

澄清一下，您不需要它面向网络，只需设置您的应用程序并运行您需要的命令（控制器方法输入）：

```
$ php index.php tools message "John Smith" 
```

该示例将运行 CI 的主`index.php`文件，然后是`tools`控制器和方法`message`，“John Smith”是您对消息的输入（可以是机器上用于文件导入的本地文件引用）。

# c# - 带有覆盖的 C# 重载

> ID：10851697
> 
> 赞同：0
> 
> 时间：2012-06-01T13:59:14.820
> 
> 标签：c#, overloading, overriding

我当然可以自己写一个虚拟测试来回答这个问题，但我想知道人们对这个问题的看法。这里是：

当我们同时重载和覆盖时会调用哪个方法？我只考虑类型重载而不是重载，并且当类型重载相关时。

让我举个例子：

```
class AA {}
class BB : AA {}

class A {
    public virtual void methodA(AA anAA) { Console.Write("A:methodA(AA) called"); }
    public virtual void methodA(BB aBB) { Console.Write("A:methodA(BB) called"); }
}

class B : A {
    public override void methodA(AA anAA) { Console.Write("B:methodA(AA) called"); }
}

new B().methodA(new BB());     // Case 1
new B().methodA(new AA());     // Case 2
new B().methodA((AA)new BB()); // Case 3 
```

你能说出情况 1、2 和 3 会发生什么吗？

我个人认为超载是邪恶的，并且没有一致的想法可以导致可预测的答案。这完全基于编译器+虚拟机中实现的约定。

编辑：如果您对为什么超载是邪恶的有疑问，您可以阅读[Gilad Brach的博客文章](http://gbracha.blogspot.ch/2009/09/systemic-overload.html)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T14:02:05.717

不，这是完全可以预测的。首先解析方法签名——即首先确定**重载**。然后，调用最**被覆盖**的方法。所以输出将是：

*   A:methodA(BB) 调用
*   B:methodA(AA) 调用
*   B:methodA(AA) 调用

在后两种情况下，将调用获取 AA 实例的方法，因为这是传入的引用类型，并且调用的是 B 的版本。请注意，即使这样也会产生相同的结果：

```
A instance = new B();
instance.methodA((AA)new BB()); // Case 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T14:01:38.740

当编译器确定要调用哪个方法时，从方法集中排除被覆盖的方法。请参阅[成员查找](http://msdn.microsoft.com/en-us/library/aa691331%28v=vs.71%29.aspx)算法。因此，当您调用`methodA`type时，将构造`B`一组名称`methodA`来自 type及其基类型的成员：`B`

```
override B.methodA(AA)
virtual A.methodA(AA)
virtual A.methodA(BB) 
```

然后`ovveride`从集合中删除修饰符的成员：

```
virtual A.methodA(AA)
virtual A.methodA(BB) 
```

这组方法是查找的结果。之后，应用[重载决议](http://msdn.microsoft.com/en-us/library/aa691340%28VS.71%29.aspx)来定义要调用的成员。

1.  `A.methodA(BB)`被调用，因为它的参数匹配参数。
2.  `A.methodA(AA)`将被选中，但它是虚拟方法，所以实际上调用转到`B.method(AA)`
3.  与选项 2 相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:02:54.000

我想结果会是这样

案例 1：Console.Write("A:methodA(BB) 调用");

案例 2：Console.Write("B:methodA(AA) 调用");

案例 3：Console.Write("B:methodA(AA) 调用");

在案例 3 中，它将看起来是它传递的类型，它是 B

# javascript - 用于 Visual Studio 2010 的 JS Lint 问题

> ID：10851699
> 
> 赞同：1
> 
> 时间：2012-06-01T13:59:23.250
> 
> 标签：javascript, jshint

我有一个带有 JS 对象的文件：

```
function Monitor() {

var self = this;
... 
```

我有一个文件，它创建了一个实例并使用它。

```
self.monitor = new Monitor(); 
```

这些文件按顺序包含在 cshtml 文件中：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/Shared/Monitor.js")"> </script>
<script type="text/javascript" src="@Url.Content("~/Scripts/Views/NewMonitor_Index.js")"></script> 
```

问题是我收到此错误：

```
Warning 1 JS Hint: 'Monitor' is not defined. 
```

如何配置它以便它找到监视器对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:27:17.977

我不认为是否有自动方式。尽管 JSHint 可以检测到其他脚本标记，但可能更难获得文件的实际路径。

无论如何，如果我知道某个符号在上下文中肯定是可用的，我添加一个

```
/*global Monitor*/ 
```

在脚本的开头。

如果每个脚本中都有一个符号，我将它添加到`.jshintrc`目录中的文件中，例如

```
{
    "predef": [
        "Monitor"
    ]
} 
```

但我不知道这是否/如何在 Windows 上工作。

# perl - 将变量从 perl 分配给 csh

> ID：10851708
> 
> 赞同：1
> 
> 时间：2012-06-01T14:00:24.367
> 
> 标签：perl, shell, csh

我有一个 csh 脚本，我的目标是使用 perl 模块 Config::Simple 读取一个 ini 配置文件。我想执行我的 perl 命令并将结果分配给一个变量。

```
perl -MConfig::Simple -e '$cfg = new Config::Simple("../config.ini"); $myvar = $cfg->param("myvar");' 
```

语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:03:39.723

将脚本的返回值接收到变量中？我不知道 csh 语法，但在 bash 中是：

```
myvar=`perl ....`; 
```

但是如果你想设置几个变量，就不确定了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:12:06.470

要设置多个变量，您可以使用`print`shell 将评估的 perl 脚本 csh 语法。

我不知道 csh 但在 bash 中应该这样做

```
#!/bin/sh
eval `perl -E 'say "FOO=123"; say "BAR=456"'`
echo "FOO is $FOO" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:54:29.300

中的命令替换`csh`如下所示：

```
#!/bin/csh
set VAR=`perl -E 'say q(hello world)'`
echo ${VAR} 
```

而且，顺便说一句，我希望您使用`csh`like的后代`tcsh`。最初的`csh`实现是一个脑残的外壳。这篇经典[论文](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)描述了原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:00:22.080

我有类似的要求，我使用的是 python 而不是 perl。我的 python 脚本正在生成 3 个输出字符串，并且需要在 csh 中将这些值设置为变量。

这是一个解决方案..希望它会有所帮助！

Python内部：

> 我使用了三个变量：x、y 和 z 我在 python 中只有一个打印语句，它打印：x,y,z

CSH内部：

```
set py_opt = `./my_python_script`
set csh_x = `echo $py_opt | sed 's/,/ /g' | awk '{print $1}'`
set csh_y = `echo $py_opt | sed 's/,/ /g' | awk '{print $2}'`
set csh_z = `echo $py_opt | sed 's/,/ /g' | awk '{print $3}'` 
```

# spring-security - SavedRequestAwareAuthenticationSuccessHandler 在 # 之后去除部分 URL

> ID：10851716
> 
> 赞同：1
> 
> 时间：2012-06-01T14:00:56.177
> 
> 标签：spring-security

我已经扩展`SavedRequestAwareAuthenticationSuccessHandler`创建一个处理程序，通过覆盖来跟踪用户登录等`onAuthenticationSuccess`。不幸的是，似乎 # 之后的 URL 部分已被将`ExceptionTranslationFilter`其存储在会话中以供成功登录后使用的部分剥离。这对我来说是个大问题，因为我的应用程序在 Ajax 上很重，我使用 # 之后的部分 url 来标记应用程序状态并启用书签以及使用后退/前进按钮等导航。有人有什么想法吗？

# sharepoint - Sharepoint 2010 中用于捕获附件的事件接收器

> ID：10851717
> 
> 赞同：0
> 
> 时间：2012-06-01T14:01:00.080
> 
> 标签：sharepoint, sharepoint-2010

我想在列表项中捕获附件以检查文件长度及其扩展名。我创建了一个 SPItemEventReceiver 类，并重写了 SPItemEventReceiver.ItemAttachmentAdding 方法。但是，添加附件时不会触发该事件。

这个事件什么时候触发？如何检查文件长度和扩展名？

**我的 EventHandler 类：**

```
public class EventReceiver : SPItemEventReceiver
{
   /// <summary>
   /// An attachment is being added to the item.
   /// </summary>
   public override void ItemAttachmentAdding(SPItemEventProperties properties)
   {

       //some code here

       base.ItemAttachmentAdding(properties);
   }
} 
```

**我的元素.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Receivers ListTemplateId="100">
      <Receiver>
        <Name>EventReceiverItemAttachmentAdding</Name>
        <Type>ItemAttachmentAdding</Type>
        <Assembly>$SharePoint.Project.AssemblyFullName$</Assembly>
        <Class>EventReceiver.EventReceiver</Class>
        <SequenceNumber>10000</SequenceNumber>
      </Receiver>
  </Receivers>
</Elements> 
```

# c# - 无法评估表达式，因为本机框架位于调用堆栈的顶部

> ID：10851719
> 
> 赞同：5
> 
> 时间：2012-06-01T14:01:02.907
> 
> 标签：c#, windows-services

我正在创建一个简单的窗口服务，当我去调试时，我收到错误消息“无法评估表达式，因为本机框架位于调用堆栈的顶部。”。此外，当我在 Release 中构建服务并运行它时，它只是挂起。

```
 static void Main()
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] { new MyService1() };

        ServiceBase.Run(ServicesToRun);
    } 
```

这就是 Program.cs 文件中的所有内容，它通常挂在 ServiceBase.Run(ServicesToRun) 行上。

我能够找到的所有内容都只与未评估的表达式有关，因为代码已优化或必须处理 asp.net 和 response.redirect。

服务代码。

```
 public TruckRateClearService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        tmrProcess.Enabled = true;
    }

    protected override void OnCustomCommand(int command)
    {
        base.OnCustomCommand(command);
        if (command == 129)
        {
            OnStart(null);
        }
    }

    protected override void OnStop()
    {
        tmrProcess.Enabled = false;
    }

    private void tmrProcess_Tick(object sender, EventArgs e)
    {
        tmrProcess.Enabled = false;

        try 
        {
            eventLog.WriteEntry("Clearing Truck Rates Start" + DateTime.Now.ToString());

            TruckRateClearingAgent.Process();

            eventLog.WriteEntry("Clearing Truck Rates Finished" + DateTime.Now.ToString());
        }
        catch (Exception ex)
        {
            eventLog.WriteEntry(ex.ToString(), EventLogEntryType.Error);
        }

        tmrProcess.Enabled = true;
    }

    internal void Run()
    {
        tmrProcess_Tick(tmrProcess, null);
    } 
```

最近在 Eren Ersönmez 的评论中添加了 Internal Void Run()。他的想法对帮助调试我的逻辑非常有帮助，直到我弄清楚其余部分。

我能够进入本机调用堆栈，它位于一个位置，76F17094 ret。现在我不知道这是什么，但也许其他人会。

此外，当我启动服务并考虑将其附加到 VS 时，我注意到它的两个实例。一个是普通的 .exe，另一个是 .vshost.exe。当我启动其他服务时，我只在 Attach to process 调试器的一部分中看到 .exe 文件。这可能是因为一个在 v4 框架（.vshost .exe 服务）上，另一个在 v2（单个 .exe 服务）框架上？

我相信我得到了它的工作。看来问题出在我使用的计时器上。我使用的原始计时器是 System.Windows.Forms 计时器。我将它切换到 System.Timers.Timers 并且一切都重新开始工作。仍然无法将 VS 附加到它，但我仍然可以使用 Internal Run() 方法对其进行调试。感谢所有帮助nn

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:22:22.540

您的主要问题是您试图直接运行 Windows 服务 exe。Windows 服务只能通过服务控制管理器 (SCM) 启动。为了能够在 VS 中进行调试，我建议如下：

```
static void Main()
{
    if (Environment.UserInteractive)
    {
        new MyService1().Run();
        Thread.Sleep(Timeout.Infinite);
    }
    else
    {
        ServiceBase.Run(new ServiceBase[] { new MyService1() });
    }
} 
```

您将创建一个`MyService1.Run`方法来生成一个运行服务循环的新线程。此外，您可以`Run`从`MyService1.Onstart`.

该方案在由 SCM 启动时将其作为服务运行，但在 VS 中调试时将其视为普通 exe（或在 VS 外部直接作为 exe 运行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:07:15.987

**问题**

此通知意味着线程当前正在执行非托管代码，因此不能用于计算表达式。

在某些情况下，您可以等待调用返回托管代码，然后再计算表达式。不幸的是，在这种情况下，在您关闭服务之前不会发生这种情况。

**替代**

您可能会考虑覆盖[ServiceBase.OnCustomCommand](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.oncustomcommand.aspx)方法并在此处放置一个断点，以便您可以评估您的表达式。

```
protected override void OnCustomCommand(int command)
{
   //Debugger.Break()   <- or just put a breakpoint in here.
} 
```

您可以按如下方式调用自定义命令：

```
c:\>sc control YourServiceName 129 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:19:27.953

您看到的异常意味着非托管代码正在引发异常，因此 .NET 调试器无法向您显示通常有用的详细信息。

你在 MyService1() 做什么？你能把里面的代码贴出来吗？

您是否还尝试通过从环境中启动服务来调试服务。那可能行不通。

我通常会这样写：

```
static void Main(params string[] args)
{
   if (args.Length > 0 && args[0] == "/console")
   {
      // Run whatever your service calls here
   }
   else
   {
      ServiceBase[] ServicesToRun;
      ServicesToRun = new ServiceBase[] { new MyService1() };

      ServiceBase.Run(ServicesToRun);
  }
} 
```

然后在调试选项卡下的项目属性中输入`/console`命令行参数。您应该能够进入应用程序并对其进行调试。您只能通过首先安装它来调试服务：http: [//msdn.microsoft.com/en-us/library/7a50syb3 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7a50syb3(v=vs.80).aspx)

# git - 我可以在一个命令中销毁并重新创建 Git 远程分支吗？

> ID：10851720
> 
> 赞同：11
> 
> 时间：2012-06-01T14:01:08.867
> 
> 标签：git

在 Git 中，我有时会处理长时间运行的分支。我喜欢不时地以 master 为基础，以便在我准备好时更容易合并。

变基后，我无法将先前推送的分支推送到远程，因为我的分支的历史不再与远程的该分支的历史一致。所以我必须先删除它。

这是我目前的工作流程：

```
git checkout my_branch
git rebase master
git push origin :my_branch  # Delete remote version of the branch
git push origin my_branch   # Push up my new version of history on this branch 
```

是否有一个单一的原子命令可以替换最后两个命令？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T14:06:09.427

如果允许重写远程分支，则可以使用`git push --force my_remote my_branch`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T13:48:30.413

没错，`git push -f`在例子中是合适的。

原因是不需要重新创建整个分支，因为所有提交 pre-rebase 保持不变。

我们只需要将新的重新定位本地提交覆盖到包含非重新定位陈旧提交的远程仓库。

* * *

在我类似的用例中，`git push -f`由于我的远程仓库被错误地删除了，所以我[在 PATH 中创建了一个 git-create shell 脚本](https://coderwall.com/p/mnwcog/create-new-github-repo-from-command-line)，让我很容易：

```
git create my_branch
git push -f 
```

# javascript - 更改 Jquery 工具选项卡幻灯片可点击区域

> ID：10851722
> 
> 赞同：0
> 
> 时间：2012-06-01T14:01:19.647
> 
> 标签：javascript, jquery, slider

[http://jquerytools.org/demos/tabs/slideshow.htm](http://jquerytools.org/demos/tabs/slideshow.htm)

我可以更改它以使面板不可点击吗？让它只有导航是可点击的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:12:38.433

放在`$(".images div").unbind('click');`脚本的底部，紧随其后`}).slideshow();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:07:01.877

```
$(".slidetabs").tabs(".images > div").unbind("click"); 
```

# iphone - 如何加载远程图像并保存到 NSMutableArray

> ID：10851724
> 
> 赞同：0
> 
> 时间：2012-06-01T14:01:23.250
> 
> 标签：iphone, xcode, uiscrollview, afnetworking

我正在尝试将 5 或 6 个遥控器图像加载到滚动视图并水平滑动。我可以从我的网络服务器（JSON 输出）中获取 URL，我正在尝试使用 AFnetworking 来解决性能问题。

到目前为止，我可以获得 URL 并将一张图片加载到这样的 UIImageview （使用 Storyboard ）

```
Jsonobject *items = [posterNSMarray objectAtIndex:0]; //load one url only 
NSlog (@"Object url %@", items.pUrl); //  picture URL
[self.imageview setImageWithURl :[NSURL URLWithString:items.pUrl] placeholderImage :[UIImage imageNamed:@"placeholder"]]; 
```

**[编辑问题]** 我的问题是如何获取所有图像并将其保存到 NSMutableArray

谢谢你的帮助 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:43:21.887

**[编辑]** 根据您在下面的评论，我实际上可能会选择一种不同的方法来引入您的所有图像。此时，您实际上可以使用 UIImageView 或 UIButton 来获得您想要的点击（从滚动视图）。将 UIImage 分配给您选择的 UIButton 或 UIImageView，然后根据需要将它们放置在滚动视图上。您必须为每个 Button 或 ImageView 动态创建操作。然后，您的操作创建应该会在您的滚动视图或您动画到的另一个视图控制器等上方显示另一个视图。在视图控制器中，您将 UIImageView 作为全屏显示。此时您可以实现自己的 UIGestureRecognizers 来实现双击等...

我会使用 UIListView。这是自定义 UIListView 实现的一个很好的链接。

[http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

我会将您的图像加载到 NSMutableArray 中，供自定义 UITableView 的绘图例程使用。

至于滑动，您可以捕获滑动事件，然后您可以随意处理列表项（即从您的图像数组中删除、编辑等）。

另一个链接： http: [//www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:36:12.650

从您的问题和评论看来，您似乎想要加载带有多个图像的 UIScrollView，然后在每个图像中滑动。听起来您也希望能够点击一个并让它启动一个放大的图像供用户查看。

我为一个旧项目编写了其中一些函数（它们有点粗糙），但你可以使用它们，因为它们是我完成我认为你所要求的内容的方式。

```
-(void)setupPictures
{
    imageSectionSlider = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, IMAGE_HEIGHT)];
    imageSectionSlider.showsVerticalScrollIndicator = NO;
    imageSectionSlider.showsHorizontalScrollIndicator = NO;
    imageSectionSlider.pagingEnabled = YES;
    imageSectionSlider.bounces = NO;

    UIView* tilesHolder = [[UIView alloc]initWithFrame:CGRectMake(0, 0, (([[thisStory imageList]count] * (self.frame.size.width))), IMAGE_HEIGHT)];
tilesHolder.userInteractionEnabled = YES;

    for (int count = 0; count < [[thisStory imageList]count]; count++) 
    {
        [tilesHolder addSubview:[self createImageTile:[[thisStory imageList]objectAtIndex:count] Count:count Rect:CGRectMake(  320*count , 0, 320, IMAGE_HEIGHT)]];
    }

    [imageSectionSlider setContentSize:CGSizeMake( tilesHolder.frame.size.width , tilesHolder.frame.size.height)];
    [imageSectionSlider addSubview:tilesHolder];
    [tilesHolder release];
}

-(UIView*)createImageTile:(ImageItem*)input Count:(int)count Rect:(CGRect)rect
{
    UIView* imageTile = [[UIView alloc]initWithFrame:rect];
    [imageTile setTag:count];

    UIImageView* image = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, imageTile.frame.size.width, imageTile.frame.size.height - 45)];
    [image setImage:[input imageData]];
    image.contentMode = UIViewContentModeScaleAspectFill; 
    image.clipsToBounds = YES;
    image.userInteractionEnabled = YES;
    image.tag = count;

    UIGestureRecognizer* featureImageGesRec = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(countTaps:)];
    [image addGestureRecognizer:featureImageGesRec];
    [featureImageGesRec release];

    [imageTile addSubview:image];
    [image release];
    return [imageTile autorelease];
}

- (void)countTaps:(NSObject*)sender {
    tapCount++;
    if (tapCount == 1) {
    //do something with single tap
    }
    else if (tapCount == 2)
    {   
        [NSObject cancelPreviousPerformRequestsWithTarget:self];
        [self doubleTap:sender];
    }
}

-(void)doubleTap:(NSObject*)sender
{
    UITapGestureRecognizer* item = (UITapGestureRecognizer*)sender;
    tapCount = 0;
//FullSizeImage
    ImageItem* selectedItem = [[thisStory imageList]objectAtIndex:item.view.tag];
    ExpandedView* pictureView = [[ExpandedView alloc]initWithImage:[selectedItem imageData]];
    [thisParent.navigationController pushViewController:pictureView animated:YES];
    [pictureView release];

} 
```

只需在此行中传递您的异步加载图像...

```
 [tilesHolder addSubview:[self createImageTile:/*Image*/ Count:count Rect:CGRectMake(  320*count , 0, 320, IMAGE_HEIGHT)]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:43:37.710

如果您使用 AFNetworking Conect，则使用 Image Request 概念：- 试试这个代码：-

```
 - (void)setupPage
{
    scrollPage = 0 ;

    scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0f,0, 320,367)];
    [scrollView setBackgroundColor:[UIColor clearColor]];
    [scrollView setDelegate:self];
    [self.view addSubview:scrollView];

    NSUInteger nimages = 0;
    CGFloat cx = 0;
    CGFloat cy = 0;

    for (; nimages < [stealArr count]; nimages++)
    {
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f,320.0f,367)];

        CGRect rect = imageView.frame;

        rect.size.height = 331;
        rect.size.width = 320.0f;

        rect.origin.y = 0.0f;
        rect.origin.x = 0.0f+cx;

        imageView.frame = rect;

        [imageView setBackgroundColor:[UIColor clearColor]];
        imageView.contentMode = UIViewContentModeScaleToFill;

        [scrollView addSubview:imageView];

    [imageView setImageWithURL:[NSURL URLWithString:@"http://i.imgur.com/r4uwx.jpg"] placeholderImage:[UIImage imageNamed:@"placeholderImage"]];

        cx += scrollView.frame.size.width;
        cy += scrollView.frame.size.height;

    }   

    pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 331.0f, 320, 36)] ;
    [pageControl setCurrentPage:0] ;
    [pageControl addTarget: self action: @selector(pageControlClicked:) forControlEvents: UIControlEventValueChanged] ;
    [pageControl setDefersCurrentPageDisplay: YES];
    [pageControl setBackgroundColor:[UIColor blackColor]];
    [self.view addSubview:pageControl];

    pageControl.numberOfPages = [stealArr count];

    [scrollView setContentSize:CGSizeMake(cx,[scrollView bounds].size.height)];

    [scrollView setPagingEnabled:TRUE];
}
 when Your are scroll the page

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    // We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
    // which a scroll event generated from the user hitting the page control triggers updates from
    // the delegate method. We use a boolean to disable the delegate logic when the page control is used.
    // Switch the indicator when more than 50% of the previous/next page is visible
    CGFloat pageWidth = scrollView.frame.size.width;
    scrollPage = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = scrollPage;

    be to unload the views+controllers which are no longer visible
}

     for Paging
    - (void)pageControlClicked:(id)sender
    {
        UIPageControl *thePageControl = (UIPageControl *)sender ;

        // we need to scroll to the new index
        [scrollView setContentOffset: CGPointMake(scrollView.bounds.size.width * thePageControl.currentPage, scrollView.contentOffset.y) animated: YES] ;
    } 
```

# python - xlrd - 将数据附加到已打开的工作簿

> ID：10851726
> 
> 赞同：1
> 
> 时间：2012-06-01T14:01:28.767
> 
> 标签：python, xlrd, xlwt

我正在尝试编写一个 python 程序，用于使用 xlrd 和 xlwt 将实时股票报价从 csv 文件附加到 excel 文件（已经打开）。

该任务总结如下。

从我的股票经纪人的应用程序中，我的硬盘上不断更新一个 csv 文件。我希望编写一个程序，该程序在运行时会将新数据从 csv 文件附加到保持打开状态的 excel 文件中（我想知道是否可以读取和写入打开的文件）。

我希望保持文件打开，因为我将在其中包含股票图表。

可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:45:44.610

不是直接的。xlutils 可以使用 xlrd 和 xlwt 来复制电子表格，并且附加到“要写入”的工作表很简单。我不认为阅读打开的电子表格是一个问题——但 xlwt 不会写入打开的书/工作表。

您可以编写一个 Excel VBA 宏来绘制图形。原则上，我认为命令工作簿中的宏可以关闭您的股票工作簿，调用您的 python 代码来复制和更新，打开新的电子表格，并可能运行宏来重新绘制图形。

另一种方法是使用 matplotlib 绘制图形。我认为睡眠循环可以每 n 秒唤醒一次，获取新的 csv 数据，将其附加到您的“大”csv 数据中，然后重新绘制图表。恕我直言，采用这种方法可以让您使用 python，并且应该让事情变得更容易。披露：我的 Python 比我的 VBA 更好。

# scala - 在scala中一般地实例化特征

> ID：10851727
> 
> 赞同：3
> 
> 时间：2012-06-01T14:01:29.520
> 
> 标签：scala, generics, traits

我正在尝试制作一个允许用户将多个处理器链接在一起的系统。我遇到的困难是每个处理器实际上都有它关心的两位信息，我希望以类型安全的方式处理这些信息。我把它归结为这个问题：

鉴于：

```
//First family of stuff
trait A {
  def doA {}
}

trait B {
  def doB {}
} 

//Second family of stuff
trait X {
  def doX {}
}

trait Y {
  def doY {}
} 
```

我可以将这两个家族的元素组合成 4 种口味：

```
var f = new A with X {}
f.doA
d.doX

var g = new A with Y {}
//... 
```

伟大的。问题是我希望每个函数（doA 等）返回两种类型的组合，以便我可以将东西链接在一起。本质上我想做： trait A { def doThing = { new A with ThingThatImmixedInWithLikeXOrY {} } }

每个处理器都需要返回一个匿名类，该类包括 1) 处理器已知的类型 2) 与之混合的类型。

我的第一个尝试是使用泛型，如下所示：

```
trait A {
  this : {def makeWithT[TOther]} =>
  def doA = makeWithT[B]
}

trait B {
  this : {def makeWithT[TOther]} =>
  def doB = makeWithT[A]
}

trait X {
  this : {def makeWithS[TOther]} =>
  def doX = makeWithT[Y]
}

trait Y {
  this : {def makeWithS[TOther]} =>
  def doY = makeWithT[Y]
}

class Foo[T, S] extends S with T {
  def makeWithT[OtherT] = new T with OtherT
  def makeWithS[OtherT] = new S with OtherT
}

var f = new Foo[A, X]
f.doA.doB
f.doX.doA
f.doX.doY
... 
```

显然，我遇到了一系列问题：

1.  我不能创建一个从类型参数扩展的泛型类

2.  我无法通过泛型参数实例化我的匿名类

3.  我无法在 trait 中定义函数的返回类型，因为在它与某些东西混合之前我不知道类型。

当谈到 scala 时，我有点菜鸟，我觉得我正在以完全错误的方式处理这个问题，也许我应该使用隐式和 CanBuildFrom 模式。任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:43:11.983

可堆叠处理器最著名的解决方案是可堆叠特征

[http://www.artima.com/scalazine/articles/stackable_trait_pattern.html](http://www.artima.com/scalazine/articles/stackable_trait_pattern.html)

```
trait StackableRoot {
  def StackablePass (x:Int) : x
}
trait StackableDouble extends StackableRoot {
  def internalPass (x:Int) = 2*x
  abstract override def StackablePass(x:Int) = super.StackablePass(internalPass(x))
}
trait StackableIncrement extends StackableRoot {
  def internalPass (x:Int) = x+1
  abstract override def StackablePass(x:Int) = super.StackablePass(internalPass(x))
} 
```

有一些样板

```
 abstract override def StackablePass(x:Int) = super.StackablePass(internalPass(x)) 
```

这无法通过打包到参数化特征中来避免，因为它需要 scala 多次继承一些具有不同参数的特征，而著名的类型擦除则禁止这些特征

# php - 通过php检测文档（表格）中的列 - 算法

> ID：10851729
> 
> 赞同：2
> 
> 时间：2012-06-01T14:01:34.310
> 
> 标签：php, html, algorithm, dom

给定如下表，分别检测两列的最佳方法是什么？

所以我需要第一列的总跨度。

重要的是要记住，列的 nr 可以改变。

在本例中，第二列从“10 欧元”（第二行）开始。第一部分等于 2 个 colspan。另一部分是 5 个 colspan。

关于如何做到这一点的任何（抽象）想法？

![在此处输入图像描述](../Images/d821da62c950119551080a999baecb6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:39:14.477

您必须考虑表格单元格之间的间隙并标记它们的位置，如下所示：：

```
0 1 2 3 4     7
0   2 3 4 5 6 7
0 1 2   4 5   7
...
0   2         7 
```

一旦你用上述信息构建了一个数组，你就可以遍历它们并标记常见的间隙位置：

```
0   2         7 
```

由于 0 和 7 都在桌子的边缘，您可以将它们去掉。然后你就剩下位置 2 作为你的行之间的共同间隙。

完毕 ：）

# spring-mvc - Spring 3 组件扫描项目范围

> ID：10851730
> 
> 赞同：0
> 
> 时间：2012-06-01T14:01:34.420
> 
> 标签：spring-mvc

我有一个依赖于多个内部 Maven 项目的 Web 应用程序，一个可以通过组件扫描从其他项目连接组件吗？例如：在 web 应用项目的应用程序上下文 xml 中

```
<context:component-scan base-package="com.mycompany.app" />
<context:component-scan base-package="com.mycompany.projectX.service.impl"/>
<context:component-scan base-package="com.mycompany.projectY.service.impl" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:08:30.877

是的，你就是这样做的。但是，如果有歧义，您可能会遇到麻烦。例如，您要连接的同一接口有多个实现。

# iphone - NSFetchedResultsController 为每个部分设置限制

> ID：10851743
> 
> 赞同：0
> 
> 时间：2012-06-01T14:02:32.690
> 
> 标签：iphone, uitableview, core-data, nsfetchedresultscontroller

您将如何设置由 NSFetchedResultsController 控制的 tableview 中每个部分的限制？例如：我有一堆节目，每个节目都有开始日期并在不同的舞台上播放。我希望能够在每个阶段只显示谁是下一个。所以我不需要对整个请求进行限制，而是对每个部分进行限制。

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Event"];    

NSMutableArray *predicates = [NSMutableArray array];
[predicates addObject:[NSPredicate predicateWithFormat:@"startDate > %@", [NSDate date]]];    
request.predicate = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];
NSSortDescriptor *stageSort = [[NSSortDescriptor alloc] initWithKey:@"stage.id" ascending:YES];
NSSortDescriptor *dateSort = [[NSSortDescriptor alloc] initWithKey:@"startDate" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:stageSort, dateSort, nil];
[request setSortDescriptors:sortDescriptors];

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.managedObjectContext
                                                                      sectionNameKeyPath:@"stage.id"
                                                                               cacheName:nil]; 
```

如果我将它限制在 tableview 委托方法中，但当 fetch 更改并尝试更新表时经常崩溃，这种工作方式。我认为这是因为 NSFetchedResultsController 中的对象比显示的对象多得多，并且更改这些对象的动画会破坏它。

我将如何为每个部分设置更有效的限制？我只想要每个部分的第一个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:12:24.497

总的来说，我认为你的方法是可行的。

只需修复您的表格更新例程即可。在插入一行之前，检查你的逻辑是否应该完成，如果没有，跳过插入。

# java - JAVA pdfbox PDF到非常简单的HTML

> ID：10851744
> 
> 赞同：1
> 
> 时间：2012-06-01T14:02:35.950
> 
> 标签：java, html, pdf, pdfbox

我想构建一个将 PDF 剧本转换为 HTML 的应用程序。剧本是非常简单的文本，没有图像或其他类型的对象，但格式非常重要。幸运的是，也没有太多的格式约定。

也就是说，我在互联网上找到了 PDFbox java 库，我想使用它，但我找不到有关如何检索有关格式（或文本坐标）的信息的示例。

我需要知道边距框坐标和文本的坐标，以便我可以比较它们以检查文本是否缩进。

我希望我已经足够清楚了。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:27:55.813

[https://pdfbox.apache.org/2.0/commandline.html#extracttext](https://pdfbox.apache.org/2.0/commandline.html#extracttext)

“-html boolean false 以 HTML 格式而不是原始文本输出。”

这看起来像你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T11:27:32.283

请看一下这个[链接](https://jackson-brain.com/using-pdfbox-to-locate-text-coordinates-within-a-pdf-in-java/)。我想它会对你有所帮助。无论如何，如果链接断开，我将从那里复制代码......

```
package printtextlocations;

import java.io.File;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.apache.pdfbox.exceptions.InvalidPasswordException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
 import org.apache.pdfbox.pdmodel.common.PDStream;
import org.apache.pdfbox.util.PDFTextStripper;
import org.apache.pdfbox.util.TextPosition;

public class PrintTextLocations extends PDFTextStripper {

public static StringBuilder tWord = new StringBuilder();
public static String seek;
public static String[] seekA;
public static List wordList = new ArrayList();
public static boolean is1stChar = true;
public static boolean lineMatch;
public static int pageNo = 1;
public static double lastYVal;

public PrintTextLocations()
        throws IOException {
    super.setSortByPosition(true);
}

public static void main(String[] args)
        throws Exception {
    PDDocument document = null;
    seekA = args[1].split(",");
    seek = args[1];
    try {
        File input = new File(args[0]);
        document = PDDocument.load(input);
        if (document.isEncrypted()) {
            try {
                document.decrypt("");
            } catch (InvalidPasswordException e) {
                System.err.println("Error: Document is encrypted with a password.");
                System.exit(1);
            }
        }
        PrintTextLocations printer = new PrintTextLocations();
        List allPages = document.getDocumentCatalog().getAllPages();

        for (int i = 0; i < allPages.size(); i++) {
            PDPage page = (PDPage) allPages.get(i);
            PDStream contents = page.getContents();

            if (contents != null) {
                printer.processStream(page, page.findResources(), page.getContents().getStream());
            }
            pageNo += 1;
        }
    } finally {
        if (document != null) {
            System.out.println(wordList);
            document.close();
        }
    }
}

@Override
protected void processTextPosition(TextPosition text) {
    String tChar = text.getCharacter();
    System.out.println("String[" + text.getXDirAdj() + ","
            + text.getYDirAdj() + " fs=" + text.getFontSize() + " xscale="
            + text.getXScale() + " height=" + text.getHeightDir() + " space="
            + text.getWidthOfSpace() + " width="
            + text.getWidthDirAdj() + "]" + text.getCharacter());
    String REGEX = "[,.\\[\\](:;!?)/]";
    char c = tChar.charAt(0);
    lineMatch = matchCharLine(text);
    if ((!tChar.matches(REGEX)) && (!Character.isWhitespace(c))) {
        if ((!is1stChar) && (lineMatch == true)) {
            appendChar(tChar);
        } else if (is1stChar == true) {
            setWordCoord(text, tChar);
        }
    } else {
        endWord();
    }
}

protected void appendChar(String tChar) {
    tWord.append(tChar);
    is1stChar = false;
}

protected void setWordCoord(TextPosition text, String tChar) {
    tWord.append("(").append(pageNo).append(")[").append(roundVal(Float.valueOf(text.getXDirAdj()))).append(" : ").append(roundVal(Float.valueOf(text.getYDirAdj()))).append("] ").append(tChar);
    is1stChar = false;
}

protected void endWord() {
    String newWord = tWord.toString().replaceAll("[^\\x00-\\x7F]", "");
    String sWord = newWord.substring(newWord.lastIndexOf(' ') + 1);
    if (!"".equals(sWord)) {
        if (Arrays.asList(seekA).contains(sWord)) {
            wordList.add(newWord);
        } else if ("SHOWMETHEMONEY".equals(seek)) {
            wordList.add(newWord);
        }
    }
    tWord.delete(0, tWord.length());
    is1stChar = true;
}

protected boolean matchCharLine(TextPosition text) {
    Double yVal = roundVal(Float.valueOf(text.getYDirAdj()));
    if (yVal.doubleValue() == lastYVal) {
        return true;
    }
    lastYVal = yVal.doubleValue();
    endWord();
    return false;
}

protected Double roundVal(Float yVal) {
    DecimalFormat rounded = new DecimalFormat("0.0'0'");
    Double yValDub = new Double(rounded.format(yVal));
    return yValDub;
}
} 
```

# c# - recaptcha.validate 方法在 mvc3 控制器中不可用

> ID：10851749
> 
> 赞同：0
> 
> 时间：2012-06-01T14:03:00.347
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我正在编写一个带有 recaptcha 字段的 mvc3 表单。

在我的控制器顶部，我确保有：@using System.Web.Helpers @using Recaptcha

并且 recaptcha 字段在被调用时呈现在视图上，但它与页面是否被认为是有效的没有任何关系。在视图中，我使用 @ReCaptcha.GetHtml(publicKey: "[public removed from this example]") 渲染它

我试图在我的控制器中调用 Recaptcha.Validate，但后来我被告知它在当前上下文中不存在。当我在 Recaptcha 上使用智能感知时，唯一可用的字段是 Design、RecaptchaControl、RecaptchaControlMVC、RecaptchaResponse 和 RecaptchaValidator。为什么我的recaptcha 字段不起作用，为什么根据Visual Studio 不存在验证功能？

# image - 将上传的图像（使用 Ajax）绘制到 Canvas

> ID：10851756
> 
> 赞同：3
> 
> 时间：2012-06-01T14:03:54.230
> 
> 标签：image, jquery, canvas

我正在使用 jQuery AJAX 表单插件上传图片而不刷新页面。如果我在图像标签中显示上传的图像（将 src 设置为上传的图像路径）就可以了。但是，我无法在画布元素上绘制该上传的图像。我实际上不知道问题是什么。

```
if (isset($_FILES["image"]["name"]) && !empty($_FILES["image"]["name"])) {
  $filename = $_FILES["image"]["name"];
  $tmpname = $_FILES["image"]["tmp_name"];

  $location = "uploads/";
  move_uploaded_file($tmpname, $location.$filename);
  echo $location.$filename;
} else {}​

var canvas = document.getElementById("canv");
var contex = canvas.getContext("2d");           
var img = new Image();
img.src = responseText;
img.onload = function(){ contex.putImageData(img, 0, 0); } 
```

以上是我在 Ajax 进程完成时调用的回调函数（内部）。感谢您提供任何有用的答案。

更新：完整代码

```
<html>
<head>
<script src="jq171.js"></script>  <!--jQuery-->
<script src="jqform.js"></script> <!--jQuery ajax Form plugin-->

<script>
    $(document).ready(function(){
        $("#myform").ajaxForm(function({success: updateSrc}){
        });
    });

    function updateSrc(responseText){
        var canvas = document.getElementById("canv");
        var contex = canvas.getContext("2d");

        var img = new Image();
        img.src = responseText;
        img.onload = function(){ contex.drawImage(img, 0, 0); }

    }
</script>
</head>
<body>
<form id="myform" action="this.php" method="post" enctype="multipart/form-data" >
<canvas id="canv" width="400px" height="400px"></canvas>
<input type="file" name="image"/>
<input type="submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T07:42:56.453

您是否有理由不只是对图像进行自动请求？

如将 updateSrc 保留为

```
function updateSrc(imagePath){
        var canvas = document.getElementById("canv");
        var contex = canvas.getContext("2d");

        var img = new Image();
        img.src = imagePath;
        img.onload = function(){ contex.drawImage(img, 0, 0); }

    } 
```

其中 imagePath 是图像文件的路径。例如：

updateSrc("images/example_image.jpg");

所以jquery ajax请求甚至不需要写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:09:48.327

您使用了错误的功能。

```
context.putImageData(imgData,x,y); 
```

它需要图像数据，它不是图像对象，而是原始像素数据。相反，您想使用：

```
context.drawImage(img,0,0); 
```

它应该可以解决您的问题

# python - Modifying the immutable class instance

> ID：10851759
> 
> 赞同：0
> 
> 时间：2012-06-01T14:04:00.643
> 
> 标签：python, python-2.7, immutability

I've got a somewhat complex data-type `Mask` that I'd like to be able to use fast identity checking for such as:

```
seen = set()
m = Mask(...)
if m in seen:
    ... 
```

This suggests that Mask should be *hashable* and therefore *immutable*. However, I'd like to generate variants of `m` and `Mask` seems like the place to encapsulate the variation logic. Here is a minimalish example that demonstrates what I want to accomplish:

```
class Mask(object):
    def __init__(self, seq):
        self.seq = seq
        self.hash = reduce(lambda x, y: x ^ y, self.seq)

    # __hash__ and __cmp__ satisfy the hashable contract §3.4.1)
    def __hash__(self):
        return self.hash

    def __cmp__(self, other):
        return cmp(self.seq, other.seq)

    def complement(self):
        # cannot modify self without violating immutability requirement
        # so return a new instance instead
        return Mask([-x for x in self.seq]) 
```

This satisfies all of the hashable and immutable properties. The peculiarity is having what is effectively a Factory method `complement`; is this a reasonable way to implement the desired function? Note that I am **not** at all interested in protecting against "malicious" modification as many related questions on SO are looking to achieve.

As this example is intentionally small it could be trivially solved by making a tuple of seq. The type that I am actually working with does not afford such simple casting.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:15:41.617

Yes, this is pretty much how you write an immutable class; methods that would otherwise change an object's state become, in your terms, "factories" that create new instances.

Note that in the specific case of computing a complement, you can name the method `__invert__` and use it as

```
inv_mask = ~mask 
```

Operator syntax is a strong signal to client code that operations return new values of the same type.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:07:51.113

When using immutable types, all 'variation' methods must return new objects/instances, and thus be factories in that sense.

Many languages make strings immutable (including Python). So all string operations return new strings; `strB = strA.replace(...)` etc.

If you could change the instance at all, it wouldn't be immutable.

Edit:

Rereading, you're asking if this is reasonable, and I say yes. The logic would not be better put somewhere else, and as I pointed out with string immutability it is a common paradigm to get new variations from existing ones.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:29:02.990

Python doesn't inforce immutability. It is up to you to make sure that objects are not modified while they are in a `set`. Otherwise you don't need immutability to use sets, dictionaries in Python.

# java - Swing：如何禁止 JFrame/JDialog 之外的交互？

> ID：10851760
> 
> 赞同：2
> 
> 时间：2012-06-01T14:04:09.087
> 
> 标签：java, swing, jframe, jdialog

我想在执行线程时显示进度条并阻止与我的应用程序框架的交互。

在另一个线程中，有人建议使用 JDialog 而不是 JFrame 和`setModal(true)`. 但是，这样做时，对话框会阻止整个应用程序。

这基本上是我的代码：

```
 MyDialog dlg = new MyDialog(); 
 dlg.setModal(true); 
 dlg.setVisible(true); 

 //do some stuff....
 //(never executed when setModal(true)

 dlg.setVisible(false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:07:47.460

最简单的方法是使用 JXLayer 和 LockableUI。[在此处](http://weblogs.java.net/blog/alexfromsun/archive/2008/07/jxlayer_30_lock.html)查看如何执行此操作的示例。

另请注意，JXLayer 已进入 Java 7，并以[javax.swing.JLayer](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLayer.html)的形式提供。

另一件事是，您不应该在事件调度线程中执行长时间运行的任务。阅读有关[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)并[学习为 Swing 编写多线程代码](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T14:07:54.467

这就是模态对话框的要点，在“框”之外不会发生任何交互。模式弹出窗口还会在等待用户输入时暂停线程。如果你想在显示对话框时做其他事情，你要么必须在对话框本身中做，要么启动一个新线程来处理它。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T20:58:24.503

使用模态对话框尝试这样的事情：

```
 final JDialog dlg = new JDialog();
                dlg.setModal(true);
                dlg.setSize(500, 500);
                dlg.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowActivated(WindowEvent e) { //or other method
                        new Thread(new Runnable() {
                            public void run() {
                                try {
                                    //execute your long running task
                                } //you should catch exception
                                finally {
                                    dlg.setVisible(false);
                                    dlg.dispose();
                                }
                            }
                        }).start();
                    }
                });
                dlg.setVisible(true); 
```

我还可以在您的 JFrame 上设置 GlassPane，它将拦截来自用户的任何事件。

# ruby-on-rails - 在 Rails 中存储 XML 文件的位置

> ID：10851763
> 
> 赞同：5
> 
> 时间：2012-06-01T14:04:19.860
> 
> 标签：ruby-on-rails, xml

我正在编写一个 Ruby on Rails 站点，它从我拥有的“本地”XML 文件中加载一些数据。rails 目录结构中存储此文件的逻辑位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:38:03.663

这里的主要问题是您拥有 XML 文件的原因是什么：配置信息或数据存储。如果首先 - 那么最好的位置将是*congif*文件夹，否则 - 除了*公共*文件夹之外，您甚至可以在任何您喜欢的地方创建*xml**文件*夹。

# php - 在 CakePHP 中创建反向链接用户引用

> ID：10851766
> 
> 赞同：5
> 
> 时间：2012-06-01T14:04:33.827
> 
> 标签：php, cakephp

我尝试在我的 404 错误页面中执行以下操作来创建引用页面的反向链接，这样我就不必依赖 javascript。

```
<?php $this->set('refer', $this->referer()); ?>

<p><?php echo '<a href="'.$refer.'">Back to previous page</a>'; ?></p> 
```

但是它不起作用...任何想法为什么？这段代码是在`/Errors/error404.ctp`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-12T02:12:44.907

使用请求对象:)

```
$this->request->referer(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-20T22:57:07.113

在 CakePHP3 中，您可以使用：

```
<li><?= $this->Html->link(__('Back'), $this->request->referer()) ?></li> 
```

应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:05:13.980

尝试将此添加到应用控制器的 beforeRender 方法中：

```
beforeRender() {
    $this->set('refer',$this->referer);
} 
```

那么它应该对所有视图都可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-01T06:27:00.507

$this->request->referer() 适用于 Cakephp **2.8.0 版的 .ctp 文件** `<?php echo $this->Html->link(__d('user', 'Login', true), $this->request->referer(), array('class' => 'login_text')); ?>`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-06T17:43:11.803

使用just `$_SERVER['HTTP_REFERER']`来代替呢？我知道这不是蛋糕的做法，但它似乎适用于你的情况。

# sql - 如何通过 SELECT 声明和初始化包变量

> ID：10851769
> 
> 赞同：5
> 
> 时间：2012-06-01T14:04:46.777
> 
> 标签：sql, oracle, variables, plsql, oracle11g

有人可以帮我理解为什么我可以在包中声明硬编码的日期值但不能从查询中分配值吗？我已经看到了许多显示硬编码值声明的示例（包括参考书），但我无法找到通过查询将值分配给变量的示例。

这是允许的：

```
create or replace package body PACKAGE_NAME AS
    tDate DATE := '2012-05-30';
    -- ...procedures follow 
```

这是允许的：

```
create or replace package body PACKAGE_NAME AS
    tDate DATE := sysdate; 
```

这是不允许的：

```
create or replace package body PACKAGE_NAME AS
    tDate DATE := select MAX(date_) from Table_Name; 
```

我已经尝试了多种方法，但我可以接受它不起作用 - 我可以根据需要在程序本身中使用它。但我想知道为什么我不能用`tDate`这种方式赋值？具体错误是：

> 期待...时遇到符号'SELECT'。

添加我可以通过存储过程中的查询获得分配的变量值，但相同的过程似乎不适用于包体。

```
PROCEDURE Proc_Name IS
tDate Date;
BEGIN
SELECT MAX(date_) into tDate from Table_Name; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T14:35:07.447

你需要在你的包体中创建一个包初始化块。这是一个相对神秘的 PL/SQL 包知识，但它存在并且可以使用。这是一个例子：

```
CREATE OR REPLACE PACKAGE TEST_PKG IS
  tDate  DATE;
END TEST_PKG; 
```

在这里，我们创建了一个包规范，它只包含一个 DATE 变量。现在我们将创建一个简单的主体，它使用 SELECT 语句初始化该变量：

```
CREATE OR REPLACE PACKAGE BODY TEST_PKG IS
  -- package-private variables go first (if any)
(...) 
  -- then the public functions/procedures
(...)
  -- then a final BEGIN-END block which is the package initialization block
BEGIN
  SELECT SYSDATE
    INTO tDATE
    FROM DUAL;
EXCEPTION  -- you can have exception handlers in your initialization block
  WHEN OTHERS THEN
    NULL;  -- pointless here, but this is just an example
    RAISE;
END TEST_PKG; 
```

现在，如果您执行以下操作：

```
begin
  -- Test statements here
  DBMS_OUTPUT.PUT_LINE('TEST_PKG.tDate = ' || TEST_PKG.tDate);
end; 
```

它应该打印当前日期。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:09:43.133

`INTO`直接选择变量时需要使用。

```
select MAX(date_) 
INTO tDate
from Table_Name; 
```

# pyside - 使用 PyInstaller 打包 PySide

> ID：10851771
> 
> 赞同：1
> 
> 时间：2012-06-01T14:05:13.593
> 
> 标签：pyside

我正在尝试将 pyside + QML 应用程序打包在一个文件中。当我运行可执行文件时，出现此错误

> ImportError：无法导入模块“PySide.QtNetwork”
> 致命的 Python 错误：无法初始化模块 QtDeclarative

有人有线索吗？

PS：我在Windows上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T14:52:36.137

尝试明确导入模块：

导入 PySide.QtNetwork

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T19:48:44.657

只想说这解决了我用 pyImporter 打包 pySide 应用程序的问题。我收到了这个错误：

> 回溯（最后一次调用）：文件“”，第 93 行，在文件“c:\Users\Rizzo the Rat\Desktop\PyInstaller-2.1\PyInstaller\loader\pyi_importers.py”中，第 409 行，在 load_module module = imp .load_module(fullname, fp, filename, self._c_ext_tuple) ImportError: could not import module 'PySide.QtXml'

直到我添加了这一行：

```
from PySide import QtXml 
```

# c++ - c++ 在另一个库中继承库异常以将它们传递给调用代码

> ID：10851772
> 
> 赞同：2
> 
> 时间：2012-06-01T14:05:26.087
> 
> 标签：c++, exception

考虑以下情况：我有一个包含第三方库的库。这个第三方库抛出了非常好的、有用的异常，源自`std::exception`. 我想将这些异常传达给调用我的库的代码，但我也不想在调用代码中包含第 3 方库。该第 3 方库以后可能会发生变化。

在我的库中创建我自己的继承第三方异常的类似乎很有意义，如下所示：

```
class myException: public thirdParty {}; 
```

有没有一种简单的方法来捕获第三方实例并将其复制到 myException？稍后我可能会向 myException 添加功能，但现在，我真的只想让第三方对调用代码可用，而不在那里包含第三方库。

当然，我确实意识到调用代码会知道thirdParty，因为第三方库的标头包含在我的库标头中，而我的库标头包含在调用代码中。但是我正在尝试建立一个合同，上面写着：“嘿，这些是我的库抛出的异常。稍后，我可能会换掉第三方库，但我仍然会抛出异常，它的异常所做的事情。 "

这是正确的吗？有没有更好的方法来做到这一点？我应该让我的调用代码知道第三方异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:40:43.287

如果目标是减少与第三方库的耦合，那么您应该将您的代码视为边界。因此，您不会将实现泄露给您的用户。

问题是为什么您的用户需要关心第三方库抛出的异常？他们应该关心你的代码的抽象和接口。

所以我**不会继承**这些异常，而是创建一系列异常来反映我希望我的代码抛出的异常。您可以给它们起相同的名称，但您应该是这些例外的所有者。

# yui - 扩展 YUI 面板

> ID：10851774
> 
> 赞同：1
> 
> 时间：2012-06-01T14:05:34.823
> 
> 标签：yui, panel

我需要使用一些自定义功能来扩展 YUI 面板，这些功能将在一个新文件中并在多个视图之间共享。

我对如何最好地解决这个问题有点茫然，有人可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:37:10.390

假设您想扩展一个 Panel 以创建一个在其主体中具有列表的面板。我通常`Y.Base.create`用于这个。与使用构造函数和`Y.extend`. 但我会在 YUI 论坛中更接近您的示例。

有一些技巧可以处理 WidgetStdMod（ 的组件之一`Y.Panel`），但主要是关于使用`Y.extend`和遵循 YUI 继承模式。我将尝试用一个例子来回答：

```
function MyPanel() {
    MyPanel.superclass.constructor.apply(this, arguments);
}
// hack: call it the same so you get the same css class names
// this is good for demos and tests. probably not for real life
MyPanel.NAME = 'panel';

MyPanel.ATTRS = {
    listItems: {
        // YUI now clones this array, so all's right with the world
        value: []
    },
    bodyContent: {
        // we want this so that WidgetStdMod creates the body node
        // and we can insert our list inside it
        value: ''
    }
};

Y.extend(MyPanel, Y.Panel, {
    // always a nice idea to keep templates in the prototype
    LIST_TEMPLATE: '<ul class="yui3-panel-list"></ul>',

    initializer: function (config) {
        // you'll probably want to use progressive enhancement here
        this._listContainer = Y.Node.create(this.LIST_TEMPLATE);

        // initializer is also the place where you'll want to instantiate other
        // objects that will live inside the panel
    },

    renderUI: function () {
        // you're inheriting from Panel, so you'll want to keep its rendering logic
        // renderUI/bindUI/syncUI don't call the superclass automatically like
        // initializer and destructor
        MyPanel.superclass.renderUI.call(this);

        // Normally we would append stuff to the body in the renderUI method
        // Unfortunately, as of 3.5.0 YUI still removes all content from the body
        // during renderUI, so we either hack it or do everything in syncUI
        // Hacking WidgetStdModNode is doable but I don't have the code around
        // and I haven't memorized it
        //var body = this.getStdModNode('body');
    },

    syncUI: function () {
        // same here
        MyPanel.superclass.syncUI.call(this);

        // insert stuff in the body node
        var listContainer = this._listContainer.appendTo(this.getStdModNode('body'));

        Y.Array.each(this.get('listItems'), function (item) {
            listContainer.append('<li>' + item + '</li>');
        });
    }
}); 
```

# javascript - 用 defineProperty 替换原型上的 __defineGetter__ 和 __defineSetter__

> ID：10851776
> 
> 赞同：1
> 
> 时间：2012-06-01T14:05:45.323
> 
> 标签：javascript

我目前使用以下语法来定义一个带有 getter 和 setter 的类。

```
SomeObject = function() {

  this._propertyOne = 'test';

}

SomeObject.prototype.__defineGetter__('propertyOne', function() {

  return this._propertyOne;

});

SomeObject.prototype.__defineSetter__('propertyOne', function(value) {

  this._propertyOne = value;

}); 
```

然后我可以像这样访问该属性：

```
var o = new SomeObject();
o.propertyOne = 'test2';
console.log(o.propertyOne); 
```

如何使用未弃用的 defineProperty 命令或类似命令实现相同的效果？

我试过这样的事情：

```
Object.defineProperty(SomeObject.prototype, 'propertyOne', {
  get: function() {

    return this._propertyOne;

  }.bind(this),
  set: function(value) {

    this._propertyOne = value;

  }.bind(this)
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:14:52.020

在您运行的那一刻`Object.defineProperty`，该`this`值不是您想要的，而是`window`（或您从中运行该片段的对象）。所以这就是实际发生的事情：

```
Object.defineProperty(SomeObject.prototype, 'propertyOne', {
  get: function() {

    return this._propertyOne;

  }.bind(window),
  set: function(value) {

    this._propertyOne = value;

  }.bind(window)
}); 
```

卸下`.bind(this)`零件，它应该可以正常工作。

# objective-c - NSTableView 选中行高亮

> ID：10851777
> 
> 赞同：0
> 
> 时间：2012-06-01T14:05:51.050
> 
> 标签：objective-c, cocoa, nstableview

我有一个有两列的 NSTableView，一列是 NSButtonCell，另一列是 NSTextFieldCell。NSTextFieldCell 中的文本无法编辑，但用户可以选择文本的一部分并将其变为粗体。当前的实现是允许他们双击并选择文本的一部分。问题是，一旦用户完成加粗，所选行的突出显示颜色仍然存在。

NSTableView 通常每次都有可变数量的行。我不能将 SelectRow 设为 false，因为我需要能够选择行。我还需要支持 10.5.8，所以我不能设置 - NSTableViewSelectionHighlightStyle 为无。

我的应用程序是一个 Cocoa 应用程序，需要在 10.5.8、10.6 和 10.7 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:04:55.570

您可以尝试将所选行设置为 false。NSTableView 有一个方法 deselectRow。加粗完成后，您可以取消选择该行。

# java - 下载文件大小 0

> ID：10851778
> 
> 赞同：2
> 
> 时间：2012-06-01T14:05:56.167
> 
> 标签：java, jsp, jsf, servlets, alfresco

我在这里尝试添加一个特定的对话框 bean，以便在应该下载特定 docx 文件的 Alfresco Explorer 上执行操作。当我点击下载操作时，代码工作正常，它会下载文件，但如我的问题标题中所述，文件大小为 0 字节。

我正在使用它来做到这一点：

```
public class NewFormDialog extends BaseDialogBean {

protected String aspect;

protected String finishImpl(FacesContext context, String outcome)
        throws Exception {

    download(aspect);

    // // get the space the action will apply to
    // NodeRef nodeRef = this.browseBean.getActionSpace().getNodeRef();
    //
    // // resolve the fully qualified aspect name
    // QName aspectToAdd = Repository.resolveToQName(this.aspect);
    //
    // // add the aspect to the space
    // getNodeService().addAspect(nodeRef, aspectToAdd, null);
    //
    // // return the default outcome
    return outcome;
}

public boolean getFinishButtonDisabled() {
    return false;
}

public String getFinishButtonLabel() {
    return "Download";
}

public void download(String pAspect) throws ServletException, IOException {

    String filename = pAspect;
    String filepath = "\\";
    BufferedInputStream buf = null;
    ServletOutputStream myOut = null;

    try {
        FacesContext fc = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) fc
                .getExternalContext().getResponse();

        myOut = response.getOutputStream();
        File myfile = new File(filepath + filename);

        // set response headers
        response.setContentType("application/octet-stream");

        response.addHeader("Content-Disposition", "attachment; filename="
                + filename);

        response.setContentLength((int) myfile.length());

        FileInputStream input = new FileInputStream(myfile);
        buf = new BufferedInputStream(input);
        int readBytes = 0;

        // read from the file; write to the ServletOutputStream
        while ((readBytes = buf.read()) != -1)
            myOut.write(readBytes);
        myOut.flush();
        response.flushBuffer();

    } catch (IOException ioe) {

        throw new ServletException(ioe.getMessage());

    } finally {
        // close the input/output streams
        if (myOut != null)
            myOut.close();
        if (buf != null)
            buf.close();
        FacesContext.getCurrentInstance().responseComplete();
    }
}

public String getAspect() {
    return aspect;
}

public void setAspect(String aspect) {
    this.aspect = aspect;
}
} 
```

我尝试了我发现的所有解决方案都没有用。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:32:36.237

如果文件不存在，则该`File.length()`方法返回。`0`检查以确保文件存在。

**提示：** Apache [Commons IO 库](http://commons.apache.org/io/)简化了许多与 I/O 相关的任务。例如，以下代码片段将文件内容流式传输到 servlet 响应：

```
HttpServletResponse response = ...
File myfile = ...
InputStream in = null;
OutputStream out = null;
try {
  in = new FileInputStream(myfile);
  out = response.getOutputStream();
  IOUtils.copy(in, out);
} finally {
  IOUtils.closeQuietly(in); //checks for null
  IOUtils.closeQuietly(out); //checks for null
} 
```

# wpf - 刷新 ViewModel 的实体框架上下文

> ID：10851782
> 
> 赞同：0
> 
> 时间：2012-06-01T14:06:13.460
> 
> 标签：wpf, entity-framework, unit-testing, mvvm

我在当前项目中使用 WPF、MVVM 和实体框架。

为简单起见，假设我有一个针对材料列表（实木）进行 CRUD 操作的视图模型。

我的 ViewModel 的 EF 上下文 ( *WTContext* ) 是通过属性注入初始化的，例如：

```
SolidWoods_VM newView = new SolidWoods_VM();
newView.Context = new WTContext(SettingsManager.Instance.GetConnectionString()); 
```

这样我就可以测试这个 ViewModel：

```
SolidWoods_VM swVM = new SolidWoods_VM();
swVM.Context = new FakeWTContext(); 
```

想象一下，在插入操作期间出现问题并且 WTContext.SaveChanges() 失败。刷新 ViewModels 上下文的最佳方式是什么？

1.  **在名为ForTestingPurposes**的视图模型中创建一个新的 bool 属性，当 SaveChanges 方法失败时：

    ```
    try
    {
        Context.SaveChanges();
    }
    catch
    {
        if (!ForTestingPurposes)
        {
            Context = new WTContext(SettingsManager.Instance.GetConnectionString());
        }
    } 
    ```

2.  向 mainviewmodel 发送消息以重新加载上下文（通过中介模式）：

    ```
    Mediator.Instance.NotifyColleagues<SolidWoods_VM>(MediatorMessages.NeedToUpdateMyContext, this); 
    ```

（然而，这样我仍然需要 bool 属性）

3.为你们提供了一个更优雅的解决方案，没有额外的属性:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:42:02.143

为什么不将数据上下文所需的方法/属性抽象到接口上，然后实现处理异常的实现。

```
//WARNING: written in SO window
public interface IDataSource
{
    void SaveChanges();
    //... and anything else you need ...
}

public class RealDataSource : IDataSource
{
    private WTContext _context;

    public void SaveChanges()
    {
        try { _context.SaveChanges(); }
        catch
        {
            _context = new WTContext(/*...*/);
        }
    }
} 
```

这样你仍然可以实现一个假的/模拟的数据源，但是你的视图模型类不需要知道数据是如何被实际检索的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:22:23.740

我的观点是，你最好的选择是信息。

您需要一种方法来指示保存出错，并且它可能无法为类的所有使用者提供重新生成上下文的服务。例如，如果您在其中绑定到您的 VM，则重置上下文可能会产生其他 UI 后果。

# ant - 如何在 ant 内部捕获 antcall 的输出？

> ID：10851785
> 
> 赞同：2
> 
> 时间：2012-06-01T14:06:18.740
> 
> 标签：ant

我有一个在 Eclipse 中运行的 Ant 脚本，它在控制台中输出，如下所示：

```
buildStuff:
     [echo] Building <project>
doStuff:
syncStuff:
     [sync] Copying 1 file to <directory>
doOtherStuff:
callWebservice:
     [http] HTTP Request
     [http] ********************
     [http] URL:        <url>
     [http] Method:     GET
     [http] HTTP Response
     [http] ********************
     [http] Status:     200
     [echo] [callWebservice] Success 
```

我想将部分/全部这些输出放入 ant 脚本内的属性中。

使用[exec](http://ant.apache.org/manual/Tasks/exec.html)任务，我可以指定“输出属性”属性，但这不适**用于**antcall[任务](http://ant.apache.org/manual/Tasks/antcall.html)。

那么，如何从 ant 中访问或重定向控制台输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:24:00.243

好的，找到了一些有用的东西......

**[记录](http://ant.apache.org/manual/Tasks/recorder.html)**任务可以监听输出并将其发送到文件。

显然它不允许相对路径 - 该文件与构建脚本在同一目录中创建（与 basedir 值无关）。

然后可以使用[loadfile任务将其放入属性中，然后](http://ant.apache.org/manual/Tasks/loadfile.html)[删除](http://ant.apache.org/manual/Tasks/delete.html)以进行清理。

将记录器直接输出到属性会更好，但这似乎不是一个选项，无论出于何种原因。

总之，这有效：

```
<record name="${CurProject}.status" />

<echo>Building ${CurProject}</echo>
etc...

<record name="${CurProject}.status" action="stop" />
<loadfile srcFile="build/${CurProject}.status" property="Status" />
<delete file="build/${CurProject}.status" /> 
```

# c# - asp:button 返回行为

> ID：10851786
> 
> 赞同：2
> 
> 时间：2012-06-01T14:06:22.697
> 
> 标签：c#, asp.net, button

我的页面上有一堆按钮，在文本框旁边我有一个搜索按钮。

现在，当我按下键盘上的返回键时，它实际上会激活正上方的添加用户按钮。

如何将文本框与搜索按钮链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T14:09:45.620

您可以为表单设置默认按钮：

```
<form id="form1" runat="server" defaultbutton="btn1"> 
```

您可以使用 asp:panel 设置默认按钮。

```
<form runat="server">
<asp:Panel runat="server" DefaultButton="bt1">

<asp:TextBox runat="server" />
<asp:Button id="bt1" Text="Default" runat="server" />

</asp:Panel>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:12:27.560

以下javascript方法将为您完成：

```
function clickButton(e, buttonid){
  var evt = e ? e : window.event;
  var bt = document.getElementById(buttonid);
  if (bt){
      if (evt.keyCode == 13){
            bt.click();
            return false;
      }
  }
} 
```

在后面的代码中，将此事件与您的文本框一起附加，例如：

```
TextBox1.Attributes.Add("onkeypress", "return clickButton(event,'" + Button1.ClientID + "')"); 
```

# spreadsheetgear - 如何使用电子表格定义整个列的边框？

> ID：10851790
> 
> 赞同：0
> 
> 时间：2012-06-01T14:06:34.433
> 
> 标签：spreadsheetgear

我知道如何定义单元格的边框样式，例如：

```
Dim border As SpreadsheetGear.IBorder

border = sheet.Cells(1, column).Borders(SpreadsheetGear.BordersIndex.EdgeRight)

border.Color = System.Drawing.Color.Black
border.LineStyle = SpreadsheetGear.LineStyle.Continuous
border.Weight = SpreadsheetGear.BorderWeight.Medium 
```

这是有效的。

我现在要做的是***为整个列***定义边框的样式。就像我在 Excel***中通过单击标题选择列并定义边框属性时所***获得的一样。

我试图在这个范围内做到这一点：

```
border = sheet.Cells(1, column).Columns.Borders(SpreadsheetGear.BordersIndex.EdgeRight) 
```

代码不会崩溃，但不会添加边框。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:46:02.247

尝试使用 EntireColumn，而不是 Columns：

```
border = sheet.Cells(1, column).EntireColumn.Borders(SpreadsheetGear.BordersIndex.EdgeRight) 
```

# sencha-touch - Sencha Touch - Pubnub 集成

> ID：10851797
> 
> 赞同：2
> 
> 时间：2012-06-01T14:06:50.910
> 
> 标签：sencha-touch, sencha-touch-2, pubnub

有没有人设法将 Pubnub 服务集成到 Sencha Touch 中？

我正在考虑只包括不断发出请求的库，但不太确定它将如何对其他所有内容做出反应。想知道是否有人实际上已经找到了合适的解决方案，以及这是否适用于 Native，我猜它会发出请求并且无论如何都会正常工作？

谢谢， 多姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:18:31.937

是的，这当然是可能的。为了测试它，我做了一个聊天示例。

现场演示[在这里](http://pubnub.s3.amazonaws.com/sencha-touch/index.html)

代码[在这里](https://github.com/pubnub/pubnub-api/tree/master/app-showcase/sencha-touch)

为了集成 PubNub，缩小的 javascript 库包含在`/resources/js`项目中并添加到项目中，`app.json`如下所示：

```
{
    "path": "resources/js/pubnub-3.1.min.js"
}, 
```

然后，在 app.js 中的 launch() 中，添加以下内容：

```
var pubnub = PUBNUB.init({
    publish_key   : 'demo',
    subscribe_key : 'demo',
    ssl           : false,
    origin        : 'pubsub.pubnub.com'
}); 
```

从那里，您可以像往常一样 使用`pubnub.publish()`和使用。`pubnub.subscribe()`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:40:53.770

或者只是使用 websockets。像 SocketIO 一样易于使用

# javascript - 试图让我的传单地图在 Internet Explorer 上工作

> ID：10851798
> 
> 赞同：-1
> 
> 时间：2012-06-01T14:06:56.447
> 
> 标签：javascript, css, mapping, cross-browser, leaflet

我最近一直在努力让我的网络地图在 Internet Explorer 上运行。它在所有其他主要浏览器上都可以完美运行，但没有任何内容可以在 IE 中加载。任何擅长浏览器测试的人都可以提供帮助吗？

我知道我在这个项目中使用的传单 javascript api 理论上支持 IE。在实践中，这不是很好......

让我知道是否还有其他可以帮助解决此问题的内容...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:14:24.657

这是一个逗号问题......不会再犯这个错误了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:42:46.460

IE9 的开发工具报告说，wax.js 的第 1875 行有一个错误*，*似乎是[Reqwest](https://github.com/ded/reqwest)。

尝试将元素的设置`src`为时，错误是“操作中止” 。我的猜测是，由于您在 HTTPS 页面上，IE 不喜欢从 HTTP 动态插入脚本。`<script>``http://a.tiles.mapbox.com/v3/slremap.slremap.jsonp?callback=grid`

我会尝试：

*   在常规 HTTP 上托管页面。
*   使用 jQuery 的 AJAX 工具而不是 Reqwest。

# javascript - 将当前视图存储在 cookie 中

> ID：10851799
> 
> 赞同：1
> 
> 时间：2012-06-01T14:06:57.407
> 
> 标签：javascript, three.js

我们正在使用 three.js 来显示来自 MRI 测量的胃内容物的 3D 切片。颜色是近似浓度；每个气泡都是一个体素，即一个 3D 像素。使用左侧的菜单加载。

[http://menne-biomed.de/uni/3d/](http://menne-biomed.de/uni/3d/)

（可以将其用作示例代码）

顶部的平面（旋转图像）是重力产生的膳食液位。

我们希望将当前视图存储在 cookie 中，以便用户在返回后获得相同的视图。但是，我无法确定将哪个矩阵存储在 cookie 中。

我已阅读 [https://github.com/mrdoob/three.js/issues/1188#issuecomment-3666286](https://github.com/mrdoob/three.js/issues/1188#issuecomment-3666286)

但我找不到要存储在 cookie 中的矩阵。我发现的那些在旋转时不会改变。请注意，我知道如何使用 cookie，所以这是一个 THREE.js 问题，与通用 javascript 编程无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:59:16.487

如果它只是你想保存的相机坐标，你可以这样做：

```
var string = JSON.stringify( [
    camera.position.x,
    camera.position.y,
    camera.position.z,
    camera.rotation.x,
    camera.rotation.y,
    camera.rotation.z
] ); 
```

然后根据保存的数据设置相机：

```
var array = JSON.parse( string );
camera.position.x = array[ 0 ];
camera.position.y = array[ 1 ];
camera.position.z = array[ 2 ];
camera.rotation.x = array[ 3 ];
camera.rotation.y = array[ 4 ];
camera.rotation.z = array[ 5 ]; 
```

# php - 我的网站的服务器 IP 地址而不是域 IP

> ID：10851802
> 
> 赞同：0
> 
> 时间：2012-06-01T14:07:03.203
> 
> 标签：php, web, ip, payment-gateway

嗨，我需要知道我的网站的 IP 地址才能提供给我的支付网关。我知道我可以通过访问 google 上出现的任何网站找到 IP 地址，但我的理解是它们提供的域 IP 地址可能与托管该站点的服务器的 IP 地址不同。

那么如何找出我的服务器的IP地址是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:51:24.127

从命令行运行此命令以获取服务器的传出 IP：

`wget -q -O - checkip.dyndns.org|sed -e 's/.*Current IP Address: //' -e 's/<.*$//'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:08:38.893

服务器的 IP 地址可以通过以下[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)变量找到：

```
<?php
echo $_SERVER['SERVER_ADDR']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:16:29.663

你也可以做一个快速的 PHP 输出

```
<?php
phpinfo();
?> 
```

它将包含您的主机详细信息所需的所有值（使用后不要将此文件公开）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:16:44.367

域名IP是什么意思？查询您的域时从 DNS 查找返回的 IP？这很可能等于您（共享）服务器的 IP，否则您的网站将无法访问。

一个例外是当您的 DNS 记录所代表的 IP 属于代理服务器时，代理服务器会将请求转发到真实服务器。

[您始终可以通过从服务器访问www.whatismyip.com](http://www.whatismyip.com/)来获取服务器的公共 IP 地址。

# python - 如何在 OSX 上的 python 中将字符串转换为一组击键

> ID：10851804
> 
> 赞同：2
> 
> 时间：2012-06-01T14:07:04.997
> 
> 标签：python, macos

给定一个字符串，我希望能够发送一组击键来键入该字符串，并且我希望能够在 OSX 上的 python 中完成它（在 python 中，因为它是已经用 python 编写的更大项目的一部分，在 OSX 上，因为我正在尝试将其移植到 OSX）。

我现在可以像这样使用 pyobj 来做到这一点（这有点简化）：

```
from Quartz import *

CHAR_TO_SEQUENCE = {
    'a':[(0, True), (0, False)]
}

def send_string(string):
    for c in string:
        sequence = CHAR_TO_SEQUENCE[c]
        for keycode, key_down in sequence:
            CGEventPost(kCGSessionEventTap, CGEventCreateKeyboardEvent(None, keycode, key_down)) 
```

我已经充实了 CHAR_TO_SEQUENCE 以包含我可以在键盘上输入的大部分内容，这需要一段时间并且很乏味。

这样做的问题是：
- 它仅在键盘具有 ANSII 标准布局时才有效。例如，如果有人使用法语键盘，它会输入错误的内容。
- 它需要这张可笑的桌子。

我为 OSX 找到了这个通用解决方案，但不知道如何将其应用于 python： [如何将 ASCII 字符转换为 CGKeyCode？](https://stackoverflow.com/questions/1918841/how-to-convert-ascii-character-to-cgkeycode)

那里提到的 API 似乎无法通过 pyobj 获得（或者我只是无法弄清楚导入路径）。

我已经看到一些[建议](https://stackoverflow.com/a/3169981/1406713)将 CGEventKeyboardSetUnicodeString 设置为所需的字符串，而不必担心键码。但是我无法弄清楚如何从 python 调用 CGEventKeyboardSetUnicodeString （我无法正确获取参数）并且不清楚这是否会起作用，因为文档说应用程序可以选择忽略它以支持键码。

有没有办法在 OSX 上的 python 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:30:14.993

看起来 Carbon 模块没有包装 TIS* 函数，其他任何东西也没有。

您可以扩展 PyObjC，但是构建一个简单的扩展模块来包装您实际需要的两个函数要简单得多。

由于这样做比解释如何做要快，因此您可以从[https://github.com/abarnert/pykeycode](https://github.com/abarnert/pykeycode)获取它，然后执行通常的“python setup.py build_ext --inplace”或“sudo python setup.py install"，然后查看 test.py 以了解如何使用它。

# asp.net-mvc - Ninject - 跨程序集的依赖注入

> ID：10851805
> 
> 赞同：3
> 
> 时间：2012-06-01T14:07:11.563
> 
> 标签：asp.net-mvc, ninject

我有一个引用六个程序集的 MVC 应用程序。每个程序集都有网站的相关组件。在某些情况下，这些程序集相互依赖。这是一些原型

```
Assembly1
---------
interface ILogger{...}

Assembly2
--------
class MyLogger : ILogger {...}

Assembly3
--------
interface IRepository {.....}

Assembly4
---------
interface MyResository : IRepository
{
 [Inject]
  public ILogger Logger{get;set;}
  ... other methods...
}

MVCApp
------

public HomeController : Controller
{
  [Inject]
   public ILogger Logger{get;set;}
  [Inject]
   public IRepository Repository{get;set;}
} 
```

我已将所有用于 Di 解析的 Ninject 相关代码放在一个单独的程序集中，并且该程序集引用了所有其他项目。

这就是发生的事情。当 HomeController 被实例化时，我有 Logger 和 Repository 属性的有效实例。Logger 没有依赖，完美。但是当我查看 Repository 的实例时，Logger 实例还没有被实例化。

在这种情况下如何使用 Ninject 设置 DI？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:18:16.077

我通过为 IRepository 实现提供程序解决了这个问题。在 CreateInstance 中，我通过使用 Kernel 解析 Logger 属性来实例化它。

```
CreateInstance(context)
{
  var repo = new MyRepository();
  repo.Logger = context.Kernel.Get<ILogger>();
} 
```

奇迹般有效！

# c++ - 类似于 \see 或 \sa 的 Doxygen 别名

> ID：10851809
> 
> 赞同：0
> 
> 时间：2012-06-01T14:07:20.813
> 
> 标签：c++, doxygen

我想定义一个行为类似于`\sa`or的别名`\see`，例如，将用它标记的后续段落分组到一个部分中，并在一行中列出每个项目。

例如

```
\foo One
\foo Two
\foo Three 
```

最终应该是

```
Foo:
  One
  Two
  Three 
```

长话短说：行为相似`\see`但标签不同的别名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:34:44.467

看看[`\xrefitem`](http://www.doxygen.nl/manual/commands.html#cmdxrefitem)命令。从 doxygen 文档（强调我的）：

> 该命令是对 和 等命令的`\todo`概括`\bug`。它可用于创建用户定义的文本部分，这些文本部分会在发生位置和将生成的相关页面之间自动交叉引用。**在相关页面上，将收集相同类型的所有部分。**

文档中的示例建议您放置别名

```
ALIASES += "reminder=\xrefitem reminders \"Reminder\" \"Reminders\"" 
```

在您的配置文件中。然后写类似

```
\reminder test 1
\reminder test 2
\reminder test 3 
```

在您的文档中将导致如下内容：

```
Reminder:  
   test 1  
   test 2  
   test 3 
```

唯一的问题是您将在“相关页面”选项卡下的一个名为“提醒”的附加页面下。如果您不想要这个相关页面，您可以使用[自定义命令](http://www.doxygen.nl/manual/custcmd.html)文档中记录的别名：

```
ALIASES += sideeffect="\par Side Effects:\n" 
```

这将允许您将命令`\sideeffect`放入文档中，这将导致用户定义的段落带有标题**Side Effects:**。但是，这些不会在最终文档中组合在一起（即每个`\sideeffect`都会生成一个**副作用：**标题）。

# javascript - HTML 文档 - 无法阻止对象拖动

> ID：10851810
> 
> 赞同：0
> 
> 时间：2012-06-01T14:07:20.847
> 
> 标签：javascript, jquery, html

我正在开发一个可用于测试的网络应用程序：

> “http://83.150.87.220/dropbox/HelsinkiViSeZip/Jatkasaari”

它（主要）用于放大图像并平移同一图像。

一旦文档加载并且中心图像变得可见，您可以`mousedown + drag`在`zoom in/out`该图像上或平移它。

按下鼠标按钮时，您会注意到图像变得模糊，并且光标下方出现指示符（png 图像）。该指示器向您显示如何移动光标以选择操作（缩放/平移）。

在 Chrome 中一切正常，但在 FF 中，一旦你`mousedown`第二次在图像上并开始拖动光标，指示器（我之前提到的图像）似乎会`png`一直拖动并将一切弄乱。这似乎几乎是在任何浏览器中单击拖动图像的默认行为。但这很奇怪，因为在第一次`mousedown+cursor drag`组合中，一切正常。更不用说我确保防止图像的默认操作：

```
$(document).on('mousedown dragstart', 'img, a.icon', function(event) {  
    event.preventDefault(); 
}); 
```

我对如何找到问题的想法一无所知，所以我疯了......有人可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:35:19.043

我遇到了类似的问题，似乎还需要`return false;`防止浏览器的默认行为。

[这是小提琴](http://jsfiddle.net/eloyesp/RS9vR/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:09:55.203

您可以尝试将其设置为 div 容器内的背景图像或类似的东西，然后只显示/隐藏它而不是使用 img 元素。这样，您将无法使用光标实际“选择”图像，但如果它是由 javascript 驱动的，一切都应该仍然有效。

# c# - 发送邮件时出错，指出我的 IP 已被列入黑名单

> ID：10851815
> 
> 赞同：1
> 
> 时间：2012-06-01T14:07:48.190
> 
> 标签：c#, .net, email, system.net.mail

我不断地从不同的地址发送邮件，到目前为止我还没有遇到任何问题。

现在我正在发送一封新邮件（只有一封电子邮件），并在该`client.Send(message)`行中引发异常；

```
{System.Net.Mail.SmtpException: El buzón de correo no está disponible. La respuesta del servidor fue: 5.7.1 Mail refused, your IP is blacklisted - See http://www.spamhaus.org/query/bl?ip=+186.49.3.153 
```

我一直在环顾四周，但没有运气。我从未从该地址发送过电子邮件，但如果我更改凭据并尝试从另一个帐户发送，我没有问题。

我点击了链接，并在消息错误（186.49.3.153）中查找了 IP 地址。[此](http://www.spamhaus.org/query/ip/186.49.3.153)链接指向显示 IP 列在策略阻止列表 (PBL) 中的页面。我阅读了描述，说如果我使用任何普通的电子邮件软件（Outlook、Entourage 等），那只是因为我需要打开“SMTP 身份验证”。

但是，情况并非如此，因为我使用 .NET 发送电子邮件。关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:36:30.893

您的邮件服务器 IP 被阻止（如提供的网站所示）。

该网页解释了您被列入黑名单的原因。

如果您不在静态 IP 上使用其他人已将其列入黑名单的 IP，这也是可能的。

无论您被阻止的原因是什么，都提供了一个选项来取消阻止您的 IP。只需按照说明进行操作，您很快就会重新启动并运行。

# php - 表的奇数行和偶数行

> ID：10851816
> 
> 赞同：1
> 
> 时间：2012-06-01T14:07:48.420
> 
> 标签：php, javascript, jquery, mysql, html

我有一个从 MYSQL 数据库中获取行的表

```
<table id="table1">
<?php
// Connect to database server
    mysql_connect("localhost", "root", "asnaeb") or die (mysql_error ());
// Select database
        mysql_query("SET NAMES `utf8`"); // UTF 8 support!!
    mysql_select_db("scores") or die(mysql_error());
// SQL query
    $strSQL = "SELECT * FROM latest";
// Execute the query (the recordset $rs contains the result)
    $rs = mysql_query($strSQL);
// Loop the recordset $rs
// Each row will be made into an array ($row) using mysql_fetch_array
    while($row = mysql_fetch_array($rs)) { 
// Write the value of the column FirstName (which is now in the array $row) 
?>

<?php echo $row['Header'].""; ?>
<tr>
<td id='date'><?php echo $row['Date'].""; ?></td>
<td id='time'><?php echo $row['Time'].""; ?></td>
<td id='hometeam'><?php echo $row['HomeTeam'].""; ?></td>
<td id='score'><?php echo $row['Score'].""; ?></td>
<td id='awayteam'><?php echo $row['AwayTeam'].""; ?></td>
<td id='other'><?php echo $row['Other'].""; ?></td>
</tr>

<?php } mysql_close(); ?>
</table> 
```

我有 2 个名为“A”和“B”的 CSS 类，用于奇数行和偶数行

我目前通过替换来完成此操作`<tr>`， `<tr class='<?php echo $row['Row'].""; ?>'>` 并且我在我的数据库表中有一个列“行”，我在 A 或 B 中添加了偶数行或奇数行...问题是如果我想在其中一个之间删除或添加新行这些我将不得不更改另一个中的所有 A 和 B。

我在另一个问题中看到了很多方法可以在 javascript 或 jquery 中做到这一点，但对于带有 TR 的普通表，这不是我的情况......（尝试了其中一些脚本但无法修复它）

所以我想要一种更简单的方法来完成偶数和奇数行，谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T14:12:30.240

以 CSS 方式（无内联类）一劳永逸地做到这一点：

**在 CSS 中**：

```
#table1 tr:nth-child(odd) td { background-color:#ebebeb }
#table1 tr:nth-child(even) td { background-color:#0000ff } 
```

**在您的 HTML 中**：

```
<table id="table1"> 
```

就是这样，无论您的表格行是否被删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T14:10:58.510

您可以像这样使用 jQuery 轻松添加这些类

```
$(function(){
  $('#table1 tr:odd').addClass('A');

 // for even

 $('#table1 tr:even').addClass('B');

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:14:35.927

为什么不在`while`循环中使用模数？这是比将课程存储在数据库中更好的方法...：

```
 $i = 0;        
    while($row = mysql_fetch_array($rs)) { 
    // Write the value of the column FirstName (which is now in the array $row) 
    ?>

    <?php echo $row['Header'].""; ?>
    <tr class="<?php echo $i%2 == 0 ? "class_A" : "class_B" ; $i++;?>" >
    <td id='date'><?php echo $row['Date'].""; ?></td>
    <td id='time'><?php echo $row['Time'].""; ?></td>
    <td id='hometeam'><?php echo $row['HomeTeam'].""; ?></td>
    <td id='score'><?php echo $row['Score'].""; ?></td>
    <td id='awayteam'><?php echo $row['AwayTeam'].""; ?></td>
    <td id='other'><?php echo $row['Other'].""; ?></td>
    </tr>

    <?php } mysql_close(); ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T14:15:27.177

```
<?php
$class="odd"
while($row = mysql_fetch_array($rs)) { 
  $class = ($class=='even' ? 'odd' : 'even');
?>
<tr class="<?php echo $class">
...
</tr>
<?php } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T14:14:58.690

有很多方法可以做到这一点，PHP、Javascript 甚至纯 CSS。这是向每隔一行添加一个类的 PHP 方法：

```
while($row = mysql_fetch_blahblah()) {

$i = 0; ?>
    <tr class="<?php echo $i % 2 == 0 ? 'class1' : 'class2';?>">
        <td>....</td>
    </tr>
<?php
$i++; // increment our counter 
} 
```

基本上，[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)返回除以它两侧的数字的余数，例如`3 % 2 == 1`, `4 % 2 == 0`，`5 % 2 == 1`所以我们可以判断`$i`是奇数还是偶数，并交替添加到`<tr>`.

恕我直言，您希望以这种方式 100% 保证它会工作（无浏览器依赖项），或者如果您为现代浏览器设计应用程序，请选择 CSS 路线。

# java - 可以在 Java 中动态自定义语言环境吗？

> ID：10851819
> 
> 赞同：1
> 
> 时间：2012-06-01T14:07:51.487
> 
> 标签：java, internationalization, locale

我有一种情况，客户出于不明原因想要一个特定的语言环境，*除了*修改为根据语言环境以小写字母显示的月份名称应以大写字母显示（这不是语言环境的标准变体有问题）。我已经有`SimpleDateFormatter`引用`Locale`.

我的问题是是否可以根据指定的国家代码动态构建 Locale 的实例，*但要进行具体的修改？*或者，是否可以从头开始构建一个语言环境实例，在运行时指定所有细节，以便`SimpleDateFormatter`引用它会相应地改变它的几个月的大小写？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:15:43.720

[LocaleServiceProvider](http://docs.oracle.com/javase/6/docs/api/java/util/spi/LocaleServiceProvider.html)的 Javadoc应该可以帮助您入门。

# javascript - 使用javascript修改xml

> ID：10851820
> 
> 赞同：0
> 
> 时间：2012-06-01T14:07:53.663
> 
> 标签：javascript, xml

我开始学习 xml，但我遇到了一个问题。我需要向 xml 文件中添加元素，所以我使用这种方法：

```
function newNode() 
{
    var xmlDoc = loadXMLDoc("Nodes.xml");

    var nodes = xmlDoc.documentElement;
    var newNode = xmlDoc.createElement('node');
    var newName = xmlDoc.createElement('name');
    var newText = xmlDoc.createTextNode('Start Node');

    newName.appendChild(newText);
    newNode.appendChild(newName);
    xmlDoc.documentElement.appendChild(newNode);

    alert(xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue);

    return xmlDoc;
} 
```

它工作正常并且警报显示“启动节点”，但是当我使用与以下相同的警报命令时：

```
function z() 
{
    var xmlDoc = loadXMLDoc("Nodes.xml");
    alert(xmlDoc.getElementsByTagName("name")[0].childNodes[0].nodeValue);
} 
```

我收到此错误： *无法获取属性“childNodes”的值：对象为空或未定义。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:23:12.087

您能否在运行 z 函数之前发送一个 XML 文件的示例？

根据我在这里看到的，它只是意味着文档中没有“name”节点，这意味着 getElementsByTagName("name") = []，解释了为什么 getElementsByTagName("name")[0] 是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:50:07.897

我讨厌成为那种人，但可以使用 jQuery、dojo、mootools 或我最近最喜欢的 zepto（如果您不需要支持旧的 IE）等库轻松修改和遍历 XML。

# java - 嵌套类可以实例化外部类吗？

> ID：10851822
> 
> 赞同：1
> 
> 时间：2012-06-01T14:07:55.353
> 
> 标签：java, class, recursion, nested, instantiation

假设在外部类类中有一个嵌套类；该嵌套类可以在其内部实例化外部类的实例吗？

如果外部类在其内部实例化一个内部类的实例，而后者又在内部类中实例化外部类的一个实例，这会导致无限递归吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T14:12:30.257

如果您指的是以下内容，那么是的，**它将**导致`StackOverflowError`.

```
public class Outer {

    public Outer() {
        Inner inner = new Inner();
    }

    private class Inner {
        public Inner() {
            Outer outer = new Outer();
        }
    }

    public static void main(String[] args) {
        Outer outer = new Outer();
    }
} 
```

以上打印：

```
Exception in thread "main" java.lang.StackOverflowError
    at com.adarshr.Outer.<init>(Outer.java:6)
    at com.adarshr.Outer$Inner.<init>(Outer.java:12)
    at com.adarshr.Outer.<init>(Outer.java:7)
    at com.adarshr.Outer$Inner.<init>(Outer.java:12)
    at com.adarshr.Outer.<init>(Outer.java:7)
    at com.adarshr.Outer$Inner.<init>(Outer.java:12) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T14:14:23.283

如果你有一个*静态*的内部类，你应该可以这样做，因为外部类实际上只是作为一个命名空间——也就是说，拥有内部类的现有实例而没有外部类的现有实例是合法的，所以是的。

如果内部类不是静态的，它只能存在（只能被实例化）在其封闭类的上下文中。所以你必须先创建外部才能创建内部，所以不。

# php - 更新关联数组

> ID：10851826
> 
> 赞同：0
> 
> 时间：2012-06-01T14:08:11.107
> 
> 标签：php, arrays, associative-array

可能只是我周末已经签出，但是在更新基于某个值的关联数组时遇到了一些麻烦。例如，这是我到目前为止所拥有的：

```
$slideshow_vars = array(
        'js_animation'          => $slideshow_options['js_animation'],
        'js_slide_direction'    => $slideshow_options['js_slide_direction'],
        'js_slideshow'          => $slideshow_options['js_slideshow'],
        'js_slideshow_speed'    => $slideshow_options['js_slideshow_speed'],
        'js_animation_duration' => $slideshow_options['js_animation_duration'],
        'js_direction_nav'      => $slideshow_options['js_direction_nav'],
        'js_control_nav'        => $slideshow_options['js_control_nav'],
        'js_keyboard_nav'       => $slideshow_options['js_keyboard_nav'],
        'js_mousewheel'         => $slideshow_options['js_mousewheel'],
        'js_prev_text'          => $slideshow_options['js_prev_text'],
        'js_next_text'          => $slideshow_options['js_next_text'],
        'js_pause_play'         => $slideshow_options['js_pause_play'],
        'js_pause_text'         => $slideshow_options['js_pause_text'],
        'js_play_text'          => $slideshow_options['js_play_text'],
        'js_randomize'          => $slideshow_options['js_randomize'],
        'js_slide_start'        => $slideshow_options['js_slide_start'],
        'js_animation_loop'     => $slideshow_options['js_animation_loop'],
        'js_pause_on_action'    => $slideshow_options['js_pause_on_action'],
        'js_pause_on_hover'     => $slideshow_options['js_pause_on_hover'],
        'js_controls_container' => $slideshow_options['js_controls_container'],
        'js_manual_controls'    => $slideshow_options['js_manual_controls'],
        'js_start_function'     => $slideshow_options['js_start_function'],
        'js_before_function'    => $slideshow_options['js_before_function'],
        'js_after_function'     => $slideshow_options['js_after_function'],
        'js_end_function'       => $slideshow_options['js_end_function']
    );
foreach ($slideshow_vars as $key => $value) {
    if($value == NULL) {
        $value = "false";
    }
}
print_r($slideshow_vars); 
```

在数组中的许多值中，它们正在输出`NULL`——好吧，我需要将它们更改为字符串`false`（此数据正在本地化，然后发送到预期为 false 的 JS 文件）。当我执行上述操作时，`print_r()`它实际上并没有更新任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T14:10:03.990

这是因为 foreach 通常按值传递数组字段。你需要做的是：

```
foreach ($slideshow_vars as $key => &$value) {
    if($value == NULL) {
        $value = "false";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:09:45.347

您必须使用规范路径更新这样的数组：

```
$slideshow_vars[$key] = 'false'; 
```

或者[cyper](https://stackoverflow.com/users/371707/cypher)通过使用`... as $key => &$value`向内部循环传递引用`$value`而不是它的值来提到什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:11:46.237

每个循环，`$value`都设置为该值。通过更新 的值`$value`，您只是在本地范围内更改它，而不是在该数组中设置值。为此，您要引用该字段并对其进行更新，如下所示：

```
foreach ($slideshow_vars as $key => $value) {
    if($value == NULL) {
        $slideshow_vars[$key] = "false";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T14:28:28.390

如果所有的键都相同，并且您想为自己节省大量代码，则可以尝试尝试以下方法：

```
$slideshow_vars = array_merge( // Merge two arrays:
    // Create an array of the same keys, but all with values of "false"
    array_combine( 
        array_keys( $slideshow_options), 
        array_fill( 0, count( $slideshow_options), "false")
    ), 
    // Remove values that equal false (may need to specify a more precise callback here)
    array_filter( $slideshow_options)
); 
```

这应该给你`$slideshow_vars`你正在寻找的变量。

# ruby-on-rails-3 - Rails 3.2 + Require.js？

> ID：10851827
> 
> 赞同：3
> 
> 时间：2012-06-01T14:08:14.450
> 
> 标签：ruby-on-rails-3, backbone.js, requirejs

我一直在阅读有关 Require.js 的大量信息。AMD 看起来很有趣，我让它在一个独立的backbone.js 应用程序中工作。但是，Rails 中的 Sprocket 似乎与之冲突。您是否推荐项目使用标准 Rails 资产管道而不使用 Require.js？

我看过这篇文章，但它是针对 Rails 3.1 的，所以不确定它是否仍然适用：[Using RequireJS with a Rails 3.1 app](https://stackoverflow.com/questions/7921445/using-requirejs-with-a-rails-3-1-app)

此外，Underscore 似乎不再支持 AMD。我不想使用另一个包来处理 Backbone。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:30:37.053

前段时间我这样做了，我使用“使用” requireJS 插件来加载不兼容的库，例如 underscore.js

[https://github.com/tbranyen/use.js](https://github.com/tbranyen/use.js)

而且我认为我只将 require.js 包含在 sprockets 资产中，并像在任何其他应用程序中一样使用它。

# generics - Ninject 中的通用绑定没有默认构造函数

> ID：10851828
> 
> 赞同：3
> 
> 时间：2012-06-01T14:08:20.723
> 
> 标签：generics, binding, ninject

Ninject 似乎在解决以下问题时遇到了问题：

```
public interface IRepository<TEntity> : IDisposable where TEntity : class,IEntity
{
}

public class Repository<TEntity> : IRepository<TEntity> where TEntity : class,IEntity
{
    protected IDbContext _context;

    public Repository(IDbContext context)
    {
        _context = context;
    }
} 
```

当需要做一些特别的事情时，我会：

```
public interface IMyEntityRepository : IRepository<MyEntity>
{
    int GetSomeStuffForAnObject();
} 
```

这很好用，但是如果我只使用默认值，绑定就不起作用`Repository<T>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:25:48.980

好吧，我之前一定错过了什么。

```
Bind(typeof(IRepository<>)).To(typeof(Repository<>)); 
```

似乎工作。

# linq - 我可以使用 linq 在序数/索引 # 上加入两个结果集吗？

> ID：10851831
> 
> 赞同：0
> 
> 时间：2012-06-01T14:08:35.910
> 
> 标签：linq, c#-4.0, linq-to-objects, html-agility-pack

我正在尝试使用 linq 到带有 html 敏捷包的对象来加入两个结果集的相对序号位置。一组是标题列表，另一组是一组表，每个表对应一个标题值。每组计数为五。我在[这里](https://stackoverflow.com/questions/2703091/using-linq-to-xml-how-can-i-join-two-sets-of-data-based-on-ordinal-position)阅读了看起来非常相似的帖子，但无法将其转化为我的目的。这是我用来获取两个 html 节点集合的内容：

```
HtmlNodeCollection ratingsChgsHdrs = htmlDoc.DocumentNode.SelectNodes("//div[@id='calendar-header']");
HtmlNodeCollection ratingsChgsTbls = htmlDoc.DocumentNode.SelectNodes("//table[@class='calendar-table']"); 
```

该集合包含InnerText 属性`ratingsChgsHdrs`中每个表的标题。`ratingsChgsTbls`我正在寻找的最终结果是一个包含所有五个表中的所有行的结果集，并且标题值作为属性添加到每一行。我希望这很清楚..任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:49:39.580

这可能有效：

```
ratingsChgsHdrs.Select((x, i) => new { x, ratingsChgsTbls.ElementAt(i) }); 
```

# javascript - 向标记添加侦听器在循环中不起作用

> ID：10851832
> 
> 赞同：1
> 
> 时间：2012-06-01T14:08:36.160
> 
> 标签：javascript, google-maps

我正在尝试将侦听器添加到循环中的标记，但它不起作用。

单独添加它们时，它可以工作。像这样：

```
 google.maps.event.addListener(markersArr[0], 'click', function() {
        infoWindowArr[0].disableAutoPan=true;
        infoWindowArr[0].open(map,markersArr[0]);
    });

    google.maps.event.addListener(markersArr[1], 'click', function() {
        infoWindowArr[1].disableAutoPan=true;
        infoWindowArr[1].open(map,markersArr[1]);
    }); 
```

但是在循环中添加时，单击标记不会弹出信息窗口。

```
 for (var u=0; u<2; u++){
             google.maps.event.addListener(markersArr[u], 'click', function() {
             infoWindowArr[u].disableAutoPan=true;
             infoWindowArr[u].open(map,markersArr[u]);
        }); 
```

谁能解释如何让它循环工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:17:33.697

您的问题是侦听器函数引用了`u`在外部范围中定义的变量，并且在函数外部发生了更改，即在您的侦听器运行时，它将看到`u == 2`，因为循环已经完成。

您可以将侦听器包装在另一个闭包中：

```
function makeListener(index) {
    return function() {
        infoWindowArr[index].disableAutoPan=true;
        infoWindowArr[index].open(map,markersArr[index]);
    }
}

for (var u=0; u<2; u++){
    google.maps.event.addListener(markersArr[u], 'click', makeListener(u));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:21:45.333

我[遇到了同样的情况，工程师用匿名函数包装器回答](https://stackoverflow.com/questions/10095371/object-creation-in-loop-broken-unrolled-works)。它看起来像这样。它比创建辅助函数更紧凑但可读性更低。

```
 for (var u=0; u<2; u++){
      (function(u) {
         google.maps.event.addListener(markersArr[u], 'click', function() {
           infoWindowArr[u].disableAutoPan=true;
           infoWindowArr[u].open(map,markersArr[u]);
         });
      })(u);
    } 
```

# c# - foreach 里面的 foreach 有 2 个不同的字典

> ID：10851841
> 
> 赞同：0
> 
> 时间：2012-06-01T14:09:11.960
> 
> 标签：c#, xna

我想在客户端绘制多个玩家。如果没有 foreach 轮换，它可以正常工作，但是当我添加 foreach 轮换时，它会使用彼此轮换更新两个玩家，而不是轮换的玩家。

```
foreach (var kvp in positions)
{
    foreach (var kvr in rotations)
    {
        // draw player
        spriteBatch.Draw(texture, kvp.Value, null, Color.White, 
        kvr.Value, new Vector2(texture.Width / 2, texture.Height / 2), 1f, 
        SpriteEffects.None, 1f);
    }
} 
```

每个玩家都有一个唯一的 ID，我将其作为密钥存储在两个字典中。有没有办法可以结合这些字典来获得正确的结果？

现在，字典位置包含 (long,Vector2(x,y))，其中 long 是唯一的用户 ID，旋转包含 (long, float)，其中 long 是与位置相同的用户 ID，float 是旋转。

编辑：这工作正常，但不会在设置时更新旋转。

```
foreach (var kvp in positions)
{
    // draw player
    spriteBatch.Draw(texture, kvp.Value, null, Color.White, 1f, 
    new Vector2(texture.Width / 2, texture.Height / 2), 1f, 
    SpriteEffects.None, 1f);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:22:29.013

为什么不创建一个包含有关玩家的所有信息的 Player 类。

```
class Player
{
    public Vector2 Position { get; set; }
    public float Rotation { get; set; }
} 
```

并且只需使用循环保留一个字典，在这里我将向您展示一个非常简单的游戏类，它可以吸引 5 个轮换玩家，希望它会有所帮助:)

```
public class Game1 : Microsoft.Xna.Framework.Game
{
GraphicsDeviceManager graphics;
SpriteBatch spriteBatch;

Dictionary<int, Player> players;
Texture2D texture;

public Game1()
{
    graphics = new GraphicsDeviceManager(this);
    Content.RootDirectory = "Content";
}

protected override void LoadContent()
{
    spriteBatch = new SpriteBatch(GraphicsDevice);
    texture = Content.Load<Texture2D>("player");

    Random rnd = new Random();

    players = new Dictionary<int, Player>()
        {
            // Add 5 new players, their location is random and so is their rotation.
            {0,  new Player() { Position = new Vector2(rnd.Next(1024),rnd.Next(768)), Rotation = rnd.Next(360), Size = new Vector2(texture.Width, texture.Height)}}, 
            {1,  new Player() { Position = new Vector2(rnd.Next(1024),rnd.Next(768)), Rotation = rnd.Next(360), Size = new Vector2(texture.Width, texture.Height)}}, 
            {2,  new Player() { Position = new Vector2(rnd.Next(1024),rnd.Next(768)), Rotation = rnd.Next(360), Size = new Vector2(texture.Width, texture.Height)}}, 
            {3,  new Player() { Position = new Vector2(rnd.Next(1024),rnd.Next(768)), Rotation = rnd.Next(360), Size = new Vector2(texture.Width, texture.Height)}}, 
            {4,  new Player() { Position = new Vector2(rnd.Next(1024),rnd.Next(768)), Rotation = rnd.Next(360), Size = new Vector2(texture.Width, texture.Height)}}, 
        };
}

protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    spriteBatch.Begin();
    for (int i = 0; i < players.Count; i++)
    {
        Player targetPlayer = players[i];
        spriteBatch.Draw(texture, targetPlayer.PlayerRectangle, null, Color.White, targetPlayer.Rotation, targetPlayer.Centre, SpriteEffects.None, 0.0f);
    }
    spriteBatch.End();

    base.Draw(gameTime);
}
}

class Player
{
Rectangle playerRectangle;
Vector2 position;
Vector2 size;
Vector2 center;

public Vector2 Position { get { return position; } set { position = value; UpdateRectangleAndCentre(); } }
public Vector2 Size { get { return size; } set { size = value; UpdateRectangleAndCentre(); } }
public float Rotation { get; set; }
public Rectangle PlayerRectangle { get { return playerRectangle; } }
public Vector2 Centre { get { return center; } }

void UpdateRectangleAndCentre()
{
    playerRectangle = new Rectangle((int)Position.X, (int)Position.Y, (int)Size.X, (int)Size.Y);
    center = new Vector2(size.X / 2, size.Y / 2);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:19:13.860

是不是这么简单：

```
 foreach (var kvp in positions)
        {
            kvr = rotations[kvp.Key];
            // draw player
            spriteBatch.Draw(texture, kvp.Value, null, Color.White, 
            kvr.Value, new Vector2(texture.Width / 2, texture.Height / 2), 1f, 
            SpriteEffects.None, 1f);
        } 
```

# asp.net - 如何在 IIS 6.1 中将 IE 设置为默认浏览器？

> ID：10851842
> 
> 赞同：2
> 
> 时间：2012-06-01T14:09:13.113
> 
> 标签：asp.net, internet-explorer, iis, iis-6, hosting

我正在使用 IIS 6.1 托管 Asp.net 网站。如果我在 IIS 中浏览网站，它将在 chrome 中打开。现在我需要在 IIs 中使用浏览时，我希望网站将在 Internet Explorer 中打开？如何在 IIS 6.1 中将 IE 设置为默认浏览器？在浏览时。在 IIS 中需要进行哪些更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:13:49.703

这不是 IIS 设置，而是您的默认浏览器设置。

从 Control Panel\All Control Panel Items\Default Programs (Windows 7) 修改它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-28T14:13:19.527

您可以按照以下步骤为 IIS 设置默认浏览器：

在谷歌浏览器中打开设置并按照以下屏幕截图进行操作。

[![在此处输入图像描述](../Images/8ce45faa214d909121d73652d69ba080.png)](https://i.stack.imgur.com/nfzQZ.png) [![在此处输入图像描述](../Images/c7e4bfa34813005764076fd8fe903daf.png)](https://i.stack.imgur.com/h6rVC.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:14:26.227

简短的回答：你不能。

Web 服务器无法控制哪些浏览器将访问您的网站。如果您谈论的是在运行 Web 项目时打开浏览器的 Visual Studio 开发服务器，您可以在 Windows 中更改默认浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:14:40.087

您无法从 IIS 控制它，基本上是您的 windows 设置哪个浏览器是您的默认浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-17T10:10:03.170

您需要在您的操作系统上更改默认浏览器。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-08-23T11:32:08.167

超级老问题，但现在这里的答案是错误的。在 Visual Studio 中，您可以为不是由使用 IIS express 的版本创建的项目选择浏览器，并且该选项将覆盖您的默认浏览器，并且 Visual Studio 将使用该选项来构建使用 IIS 的项目的后续版本表示。除了那些项目，我还没有发现这个选项是否存在于任何地方，但如果可以的话，我会更新。

# c# - 如何在新选项卡中打开剃刀操作链接？

> ID：10851860
> 
> 赞同：76
> 
> 时间：2012-06-01T14:10:36.190
> 
> 标签：c#, html, razor

我试图让我的链接在新标签页中打开（它必须是剃刀格式）：

```
 <a href="@Url.Action("RunReport", "Performance", new { reportView = Model.ReportView.ToString() }, new { target = "_blank" })" type="submit" id="runReport" class="button Secondary">@Reports.RunReport</a> 
```

这虽然行不​​通。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-06-01T14:21:17.197

只需使用`HtmlHelper` `ActionLink`and 相应地设置`RouteValues`and `HtmlAttributes`。

```
@Html.ActionLink(Reports.RunReport, "RunReport", new { controller = "Performance", reportView = Model.ReportView.ToString() }, new { target = "_blank" }) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-06-01T14:21:44.910

看起来您将[Html.ActionLink()](http://msdn.microsoft.com/en-us/library/dd492124.aspx)与[Url.Action()](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action.aspx)混淆了。Url.Action 没有设置 Target 的参数，因为它只返回一个 URL。

根据您当前的代码，锚点应该如下所示：

```
<a href="@Url.Action("RunReport", "Performance", new { reportView = Model.ReportView.ToString() })" 
   type="submit" 
   id="runReport" 
   target="_blank"
   class="button Secondary">
     @Reports.RunReport
</a> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-01T14:25:59.920

那不会编译，因为`UrlHelper.Action(string,string,object,object)`不存在。

`UrlHelper.Action`只会根据您提供的操作生成 URL，而不是`<a>`标记。如果您想添加 HtmlAttribute（例如`target="_blank"`，在新选项卡中打开链接），您可以：

*   `<a>`自己给元素添加target属性：

    ```
    <a href="@Url.Action("RunReport", "Performance",
        new { reportView = Model.ReportView.ToString() })",
        target = "_blank" type="submit" id="runReport" class="button Secondary">
        @Reports.RunReport
    </a> 
    ```

*   使用 Html.ActionLink 生成`<a>`标记元素：

    ```
    @Html.ActionLink("Report View", "RunReport", null, new { target = "_blank" }) 
    ```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-10-27T14:56:28.957

如果您的目标是使用 ActionLink 帮助程序并打开一个新选项卡：

```
@Html.ActionLink("New tab please", "Home", null , new { target = "_blank" })

@Html.ActionLink("New tab please", "Home", Nothing, New With {Key .target = "_blank"}) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-08-18T06:11:52.540

```
@Html.ActionLink(
"Pay Now",
"Add",
"Payment",
new { @id = 1 },htmlAttributes:new { @class="btn btn-success",@target= "_blank" } ) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-12-15T22:09:10.873

使用命名参数：

```
@Html.ActionLink(linkText: "TestTab", actionName: "TestAction", controllerName: "TestController", routeValues: null, htmlAttributes: new { target = "_blank"}) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-05-03T07:37:30.470

为了

> @Url.Action

```
<a href="@Url.Action("Action", "Controller")" target="_blank">Link Text</a> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-20T18:22:30.910

带有角度参数的 asp.net mvc ActionLink 新选项卡

```
<a  target="_blank" class="btn" data-ng-href="@Url.Action("RunReport", "Performance")?hotelCode={{hotel.code}}">Select Room</a> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-01T14:21:05.013

您将其设置`type`为`submit`. 这意味着浏览器应该将您的`<form>`数据发布到服务器。

事实上，根据[w3schools](http://www.w3schools.com/tags/tag_a.asp) ，标签没有类型属性。

所以远程`type`属性，它应该适合你。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-18T06:44:35.747

`<a href="@Url.Action("RunReport", "Performance", new { reportView = Model.ReportView.ToString() })" type="submit" id="runReport" target="_blank" class="button Secondary"> @Reports.RunReport </a>`

# asp.net - 找不到类型或命名空间名称“Ajax”

> ID：10851862
> 
> 赞同：0
> 
> 时间：2012-06-01T14:10:43.667
> 
> 标签：asp.net, ajax, jquery

我有一个旧项目，其中包含三个不同的项目。当我尝试构建项目时，我收到此错误消息：

```
"The type or namespace name 'Ajax' could not be found (are you missing a using    
directive or an assembly reference?)" 
```

我在网上找到了缺少项目或命名空间的解决方案，但看起来我缺少一些默认库。

代码如下所示：

```
//Ajax method to Check for existing file name
[Ajax.AjaxMethod()]
public DataTable CheckSearchName(string searchname){
   // code goes here
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:53:22.723

终于问题解决了。我错过了这个项目的参考。我在我网站的 bin 文件夹中找到了一个 Ajax.dll 文件。然后我所要做的就是添加对该文件的引用（网站/项目>添加引用>浏览>（浏览到Bin文件夹）>Ajax.dll

那成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:22:20.480

这听起来像是 .NET 1.1/2.0 时代真正古老的 Microsoft AJAX.NET 库。

请参阅此处：[Microsoft AJAX.NET](http://msdn.microsoft.com/en-us/library/aa479042.aspx)，它有一个类库的下载链接：[Ajax.NET Professional](http://www.ajaxpro.info/)。

# python - 在 Notepad++ 中添加到 Python 语法高亮

> ID：10851868
> 
> 赞同：2
> 
> 时间：2012-06-01T14:11:07.693
> 
> 标签：python, xml, notepad++

我想在 Notepad++ 中为 Python 内置函数添加语法高亮。我在 AppData/Notepad++ 中修改了 langs.xml，将这一行添加到 python 标记中：

```
<Keywords name="instre2">len max min sum map str int reduce</Keywords> 
```

我还在同一位置的 stylers.xml 中的 python 标记中添加了这一行：

```
<WordsStyle name="BUILTINS" styleID="13" fgColor="8080FF" bgColor="FFFFFF" fontName="" fontStyle="0" fontSize="" keywordClass="instre2" /> 
```

当我转到 Settings->Style Configurator->Python->BUILTINS 时，我会看到我的内置函数列表以及我分配给它们的颜色。但是，在编辑 Python 文件时，内置函数不会突出显示。为什么是这样？

[我在这里](http://sourceforge.net/projects/notepad-plus/forums/forum/331754/topic/4028342)找到了类似的东西，但我找不到文件 LexPython.cxx。我该如何解决这个问题？有可能解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:22:22.033

基于 .cxx 文件扩展名，这将使*LexPython.cxx*成为 c++ 源文件，因此听起来您需要编写 Python 词法分析器并将其添加到 Notepad++ 构建过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:41:09.243

他的意思是Notepad++**源代码**包中的*“...\scintilla\lexers\LexPython.cxx” 。*

 **您不能像那样添加其他类型。例如，我建议您将*BUILTINS*单词简单地添加到现有的*KEYWORDS*列表中。这就是我通常做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-02T05:27:29.810

你快到了...只需将你添加的关键字列表的 styleID 设置为 14，只有 14 个有效。现在您可以通过样式配置器设置颜色。看这里的效果 [内置函数高亮](https://i.stack.imgur.com/INdjN.png) 内置函数 int() 和 range() 用自定义颜色渲染。

一点解释：

[这里](https://notepad-plus-plus.org/community/topic/156/how-to-add-additional-styles-to-an-existing-languages-in-style-configurator/3)指出“...... Syntilla 词法分析器使用预定义的数字来着色事物（这些是“styleID”）......”并且它们是为每种语言定义的。您可以在 notepad++ 源文件 SciLexer.h 中查看它。

实际上有一个为 python (SCE_P_WORD2) 定义的 id 为 14 的组 WORD2，但它没有在默认的 stylers.xml 中使用。**

# objective-c - 带有 ARC 的结构中的 Objective-C 类

> ID：10851870
> 
> 赞同：11
> 
> 时间：2012-06-01T14:11:12.647
> 
> 标签：objective-c, struct, automatic-ref-counting, objective-c++

我尝试制作一个带有类的结构，例如：

```
struct my_struct
{
    NSString *string;
    // more fields
}; 
```

令我惊讶的是，Objective-C++ 在启用 ARC 的情况下允许这样做。
它将如何管理字符串？
它可以很容易地保留在每个作业中，但问题是释放。
它可以添加一个带有释放的析构函数，但这将使结构变得不平凡。
它也可以使它不保留或释放，但这样做应该有 unsafe_unretained。

根据我的观察，使用它时没有任何崩溃，但我想知道这里到底发生了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T14:28:29.527

请参阅[ARC 文档的 4.3.5](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.restrictions.records)：

> 4.3.5。结构和联合的所有权限定字段
> 
> 如果程序将 C 结构或联合的成员声明为具有非平凡的所有权限定类型，则该程序是格式错误的。
> 
> 基本原理：在 C++ 意义上，生成的类型将是非 POD，但 C 并没有为我们提供非常好的语言工具来管理聚合的生命周期，因此简单地禁止它们更方便。仍然可以使用 void* 或 __unsafe_unretained 对象来管理它。
> 
> 此限制不适用于 Objective-C++。但是，非平凡的所有权限定类型被认为是非 POD：在 C++11 术语中，它们不是平凡的默认可构造、可复制构造、可移动构造、可复制分配、可移动分配或可破坏的。使用 ARC 之外的类违反 C++ 的单一定义规则，在 ARC 下，该类将具有非平凡的所有权限定成员。
> 
> 基本原理：与 C 不同，我们可以将所有权限定子对象的所有必要 ARC 语义表达为类的（默认）特殊成员函数的子操作。这些功能然后变得不平凡。这具有非显而易见的结果，即该类将具有非平凡的复制构造函数和非平凡的析构函数；如果这在 ARC 之外通常不成立，则该类型的对象将以与 ABI 不兼容的方式传递和返回。

如果您通读所有注意事项，我强烈建议您不要在 ObjC++ 中这样做。我强烈建议不要在任何情况下广泛使用 ObjC++。它是一种桥接语言，可以帮助纯 ObjC 和纯 C++ 相互交流。它有很多问题。将 ObjC++ 与 ARC 结合引入了 ObjC 中不会发生的时间和空间性能成本，以使其异常安全。定义这些特定于 ObjC++ 的数据结构使得与非 ObjC++ 代码和非 ARC 代码交互变得困难（请注意，您不能在 ARC 之外使用它）。您应该从 ARC 免费获得的大部分内容突然变得困难，因为您不得不再次担心内存管理（正如您已经发现的那样）。

构建一个纯 ObjC 层。构建一个纯 C++ 层。构建一个薄的 ObjC++ 层将两者联系在一起。不要将 ObjC 对象放在结构中，绝对不要放在任何公共结构中（即在定义它的单个 ObjC++ 对象之外可见）。

# tcp - FFmpeg 运行时错误。返回输入/输出错误

> ID：10851874
> 
> 赞同：0
> 
> 时间：2012-06-01T14:11:43.140
> 
> 标签：tcp, android-ndk, ffmpeg

tcp 打开时出现错误。
确切地说，`avformat_open_input`总是返回-5（输入/输出错误）。
我使用 gdb 查看了错误代码的来源，发现`getaddrinfo`（在 libavformat/tcp.c 中）函数没有按预期工作并返回错误值 EIO。我的 ffmpeg 源具有`ff_getaddrinfo`（在 libavformat/os_support.c 中）链接到`getaddrinfo`（哪个函数是指针函数）的函数，但是当我运行程序时，我的程序调用了 libc.so（不是 getaddrinfo）中的其他函数，动态库。我找不到调用哪个函数。
我将有效的 url 提供给了 ffmpeg。有效的 url 是“http://stream.radiojavan.com/radiojavan”。

我编译了 ffmpeg 源代码供 Android 使用并使用 ffmpeg 版本 0.8.1
这是我的配置。

```
./configure --target-os=linux \
    --prefix=$PREFIX \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --arch=arm \
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums  -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
    --disable-shared \
    --enable-static \
    --extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \
    --disable-ffplay \
    --enable-zlib \ 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:58:51.210

将 Internet 权限添加到您的 Android 清单中，它可能会起作用。“android.permission.INTERNET（使用权限）”

# objective-c - 如何在点击应用程序图标时获取所有通知？

> ID：10851876
> 
> 赞同：1
> 
> 时间：2012-06-01T14:11:48.530
> 
> 标签：objective-c

我的设置是根据 Apple 的文档进行的，我可以接收推送通知。

以下是 PN 进入时的预期行为：

**应用程序在后台，我点击通知：**我可以在通知中心看到通知。点击通知，应用程序来到前台，我可以看到上面的方法被调用了。 **应用程序处于活动状态并且已经在前台：**我可以看到上面的方法被调用。现在，以下是我看到的特殊行为：

PN 进来了。在通知中看到它，看到应用程序图标上的徽章。我单击应用程序图标 - 而不是通知：在这种情况下，我发现没有调用上述方法。我期待它被称为......以前有人见过这种行为吗？这是应该发生的事情吗？我在 Apple 文档中看不到任何关于此的内容......另外，有没有办法解决这个问题？

# asp.net - 使 ASP.NET 标签可见似乎没有效果

> ID：10851878
> 
> 赞同：0
> 
> 时间：2012-06-01T14:11:58.247
> 
> 标签：asp.net, vb.net

我的代码中有以下内容：

```
 lblIsInvalid.Visible = True 
```

我注意到，即使在转到这条线之后，它也不会使标签可见。我认为这可能是一个刷新问题，因为最后一行是 lblIsInvalid.Visible = True。对于标签控件，是否有任何我可能不知道的刷新属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:15:33.610

如果这是一个 WinForm 项目，不，标签可见性按您期望的方式工作。如果您将它设置为可见但它没有显示，这很可能是因为它位于不可见的容器父控件内，或者它的位置不在表单的可视区域之外，或者它位于另一个控件后面，或者某些东西将它设置为不可见再次。

# compiler-errors - IntelliJ Idea，运行代码，不管不相关的项目文件中的错误

> ID：10851880
> 
> 赞同：79
> 
> 时间：2012-06-01T14:12:04.527
> 
> 标签：compiler-errors, intellij-idea

我从 Eclipse 中错过的一件事是，如果我的项目中一些完全不相关的文件包含错误，我将无法运行代码来测试各种事物（想想简短的 main()）。我在常见问题解答中读到我可以使用带有 -proceedOnErrors 参数的 Eclipse 编译器，但它仍然不起作用。临时修复未完成的代码进行编译并不是我真正想要的。

我应该注意我也使用 Scala 插件，但我的大部分代码仍然是 Java 文件。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-12-19T09:09:12.457

修改您的配置以使用`Make, no error check`option 而不是`Make`.

有关更多信息，[请参阅此答案](https://stackoverflow.com/a/16784855/607767)

请注意，这在您的用例中可能还不够。最后一招是使用[Vics answer](https://stackoverflow.com/a/10858442/607767)提供的解决方案。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-01T23:12:56.413

好吧，你可以做到。当然，重要的部分是带有`main`函数的类编译。

有两种方法可以走：

1.  编译您只想运行的类 (CTRL Shift F9)。右键单击运行该`main`功能。`main`它会失败，但 IntelliJ 会自动为这个函数创建一个临时运行配置。现在编辑此配置并取消选中“启动前制作”选项。然后返回文件并`main`像以前一样启动。
2.  转到配置屏幕，然后是默认值，然后是应用程序窗格。取消选中“启动前制作”选项，然后你就可以开始了，就像第一节一样，对于`main`你将在这个项目中遇到/创建的任何功能。

**编辑**

这个答案已经过时了，应该使用@ipandzic的[答案](https://stackoverflow.com/a/20677403/579828)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-12-19T21:58:23.600

正如这个答案所建议的那样（[https://stackoverflow.com/a/14793361/986160](https://stackoverflow.com/a/14793361/986160)），您可以使用 Settings > Build,Execution,Deployment > Compilers > Excludes 并添加与从编译中排除的项目无关的部分。确保您尝试运行的部分没有从这些排除项中导入。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-18T03:51:52.297

1.  编辑配置。

[![在此处输入图像描述](../Images/65d1e493e554f3d07d5f8625186e42d6.png)](https://i.stack.imgur.com/rM8ow.png)

2.  使用最新版本的 IntelliJ，我们需要通过单击“-”从“启动前制作”选项中删除构建。下面是截图。

[![在此处输入图像描述](../Images/eeb31a84c0eb3909504d7585c0c82cc6.png)](https://i.stack.imgur.com/pd9n2.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-29T22:53:11.570

无论出于何种原因，在我的大型遗留 Gradle 项目中，上述解决方案都不适合我。但是，我遇到的错误只是因为 IntelliJ 中的某些方法没有正确连接（即代码的其他区域没有明显的编译错误）。因此，我最终运行了`gradle clean build idea`这对我的目的有用。在那之后，我的测试课运行没有问题。

# r - 将数据框的名称传递到 r 中的循环中

> ID：10851881
> 
> 赞同：3
> 
> 时间：2012-06-01T14:12:04.930
> 
> 标签：r, function, dataframe

这只是我的问题的一个小例子：

```
myfun <- function (dataframe) {
namef <- paste (dataframe, ".raw", sep = "")
return(namef)
}
xy <- data.frame (A = 1:10, B = 11:20)

myfun(xy)
[1] "1:10.raw"  "11:20.raw" 
```

在这种情况下，我要返回的是文件“xy.raw”的名称。

names(dataframe) 将不起作用，因为它将给出数据框列的名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:24:23.177

尝试 ：

```
paste(substitute(dataframe),".raw,sep="") 
```

# javascript - 使用 Javascript/jQuery 以编程方式关闭 SELECT 下拉列表

> ID：10851882
> 
> 赞同：32
> 
> 时间：2012-06-01T14:12:05.283
> 
> 标签：javascript, jquery, html, html-select

我有一个用一个值初始化的下拉列表。当用户单击它时，将删除单个元素并添加一个新元素，显示“正在加载”，然后向服务器发出 AJAX 调用，并在返回时将新值添加到控件中。

问题是控件在更新时保持打开状态，我想关闭它。

这是一个例子：http: [//jsfiddle.net/vtortola/CGuBk/2/](http://jsfiddle.net/vtortola/CGuBk/2/)

该示例的 AJAX 未获取数据可能是因为我在调用 jsfiddle api 时做错了什么，但它显示了***`SELECT`***在更新期间保持打开状态的方式。

**我想知道如何以编程方式关闭下拉列表而不关注另一个输入。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T14:22:52.980

我不确定其他任何人，但我使用的是最新的稳定版本的 Chrome，并且没有其他答案涉及`.blur()`我的工作。

本题反问：[Programmatically open a drop-down menu](https://stackoverflow.com/questions/2800266/programmatically-open-a-drop-down-menu)

似乎得到的结论是，由于浏览器处理字段元素点击的方式，这是不可能的。

更好的解决方案是用纯 HTML 替换下拉菜单，并在需要时使用简单的`.hide()`命令将其隐藏。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-01T14:15:18.830

只需在您的收盘价内添加这一行结束`click`。

```
$(this).blur(); 
```

所以它看起来像

```
$select.click(function(e){

    $select.html('<option value="-1">Loading</option>');

    $(this).blur();
    ......
    ...
}); 
```

[**演示**](http://jsfiddle.net/thecodeparadox/Hevku/)

哈哈！如果我们对***Chrome***新版本有疑问，那么：

采取`select`如下假货：

```
<select class="fake" style="display: none">
    <option value="-1">Loading</option>
</select> 
```

并执行以下操作：

```
$select.click(function(e) {
    $(this).hide(0); // hide current select box

    //$select.html('<option value="-1">Loading</option>');

    $('select.fake').show(0); // show the fake slide

    $.ajax({
           // your code
        }).done(function(data) {

           $('select.fake').hide(0);
           $select.show(0);

        })
        ......
    }): 
```

**[演示](http://jsfiddle.net/thecodeparadox/Hevku/)**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-01T14:15:27.177

后...

```
$select.html('<option value="-1">Loading</option>'); 
```

尝试添加...

```
$select.blur(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-01T14:15:23.737

我认为你需要做的就是瞄准别的东西，或者我应该说失去对选择的关注（模糊它）

```
<select>
    <option value="0">Initial Value</option>
</select>

var $select = $('select');
$select.click(function(e){

    $select.html('<option value="-1">Loading</option>');

    $.ajax({
        url: '/echo/json/',
        method:'post',
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: { json: JSON.stringify([1, 2, 3]), delay:1 }
    }).done(function(data){

        $.each($.map(data, function (item, i) {
                    return "<option value='" + item +"' >" + item + "</option>";

                }), function (i, item) {
                    $element.append(item);
                });

    }).fail(function(){
        alert('error');
    });

   e.preventDefault();
   e.stopPropagation(); 
   $(this).blur();    
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-11T10:41:09.670

我知道这是一个老问题，并且已经有了答案，但我认为以下解决方案可能是实现目标的公平方式。

您可以通过重新渲染来模拟选择的关闭。在 jQuery 中，您可以实现一个简单的插件来实现：

```
$.fn.closeSelect = function() {
    if($(this).is("select")){
        var fakeSelect = $(this).clone();
        $(this).replaceWith(fakeSelect);
    }
}; 
```

并以这种方式使用它：

```
$("#mySelect").closeSelect(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-08T18:02:06.937

**解决方案 1** 我找到了非常简单的解决方案。

```
select.style.display = "none";
setTimeout(function () {
    select.style.display = "block";
}, 10); 
```

这个隐藏在 DOM 中的元素，这导致下拉菜单将被关闭，然后延迟 10 毫秒（没有延迟它不起作用）将它返回到 DOM。

**解决方案 2**：稍微复杂一点但没有延迟的是从 DOM 中完全删除元素，然后立即将其返回。

```
var parent = select.parentElement;
var anchor = document.createElement("div");
parent.insertBefore(anchor, select);
parent.removeChild(select);
parent.insertBefore(select, anchor);
parent.removeChild(anchor); 
```

这存储了元素的父级，然后在选择之前带上锚。Anchor 用于在 DOM 之前的相同位置恢复选择。当然它可以实现为功能选择元素。

```
HTMLSelectElement.prototype.closeDropdown = function () {
    var parent = this.parentElement;
    var anchor = document.createElement("div");
    parent.insertBefore(anchor, this);
    parent.removeChild(this);
    parent.insertBefore(this, anchor);
    parent.removeChild(anchor);
} 
```

然后打电话

```
select.closeDropdown(); 
```

[例子](https://jsfiddle.net/1ca2q141/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-13T07:41:38.757

```
$('.select').on('change', function () {
    $(this).click();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-16T15:59:29.750

我知道旧帖子，但我有一个非常简单的解决方案。

```
$(someSelectElement).on('change', function(e) {
    e.target.size = 0    
} 
```

如果您单击列表中的任何项目，这将折叠选择元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-19T17:10:31.940

我发现关闭选定元素的最简单方法是暂时禁用它：

```
$selectElement.attr('disabled', true);

setTimeout(() => {
   $selectElement.attr('disabled', false);
}, 4); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-18T23:46:41.330

万一其他人在使用 Angular2，对我有用的解决方案是添加一个（焦点）事件，该事件调用`$($event.srcElement).attr("disabled","disabled");`

然后，当我希望它再次变为活动状态时，我添加了一个超时以重新启用该元素。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-05T00:06:10.300

请试试这个，为我工作：

```
$("#mySelect").dropdown('toggle'); 
```

# c# - 将字符串拆分为二维数组

> ID：10851886
> 
> 赞同：3
> 
> 时间：2012-06-01T14:12:15.543
> 
> 标签：c#, multidimensional-array

如何在 C# Console App 中将拆分字符串转换为二维数组？

```
char[,] table2x2 = new char[2, 2]; 
string myString = "11A23A4A5A"; 
string[] splitA = myString.Split(new char[] { 'A' }); 
```

这样输出将是

```
Console.WriteLine(table3x3[0, 0]); //output: 11
Console.WriteLine(table3x3[0, 1]); //output: 23
Console.WriteLine(table3x3[1, 0]); //output: 4
Console.WriteLine(table3x3[1, 1]); //output: 5 
```

回到原来的问题。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T14:13:49.550

```
// your code, char[,] replaced by string[,]
string[,] table2x2 = new string[2, 2];  
string myString = "11A23A4A5A"; 
string[] splitA = myString.Split(new char[] { 'A' }); 

// this converts splitA into a 2D array
// Math.Min is used to avoid filling past the array bounds
for (int i = 0; i < Math.Min(splitA.Length, 2*2); i++) {
    table2x2[i / 2, i % 2] = splitA[i];
} 
```

# php - IFRAME 会话 ID 不匹配，直到您重新加载页面

> ID：10851891
> 
> 赞同：0
> 
> 时间：2012-06-01T14:12:31.210
> 
> 标签：php, facebook, session, iframe

我有一个画布应用程序`IFRAME`，我一直试图弄清楚为什么它在`IE`. 最后，我找到了一个名为`IEWatch`firebug for explorer 的程序。使用这个我推断出`sessionID`我的应用程序的索引和后端脚本不匹配。在 index.php 的顶部，`session_start()`就像我在后端脚本中所做的那样，我将数据传递给使用 ajax。如果我重新加载页面`sessionID`然后匹配的（index.php 更改以匹配 backend.php sessionID。这不会发生在 chrome 中。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:14:48.313

您需要 IE 接受跨浏览器 cookie 是[P3P](http://en.wikipedia.org/wiki/P3P)策略标头。

```
//required for IE in iframe FB environments if sessions are to work.
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

把它放在 index.php 文件的顶部

# java - 计算servlet中的相对路径？

> ID：10851892
> 
> 赞同：2
> 
> 时间：2012-06-01T14:12:38.503
> 
> 标签：java, servlets, relative-path, servlet-filters

我想创建一个 servlet 过滤器来计算任何给定 servlet 请求的根 servlet 的相关 url 路径。

所以对于绑定到的 servlet`http://somedomain/context/`：

请求`http://somedomain/context/path1/path2`将返回`..`

并且请求`http://somedomain/context/path1/path2/path3`将返回`../..`

有谁知道一种可靠的方法来做到这一点？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:34:03.400

使用新的 java 文件系统实用程序 (1.7)，该`Path` `relativize(Path)`方法应该可以工作。来自[路径操作教程](http://docs.oracle.com/javase/tutorial/essential/io/pathOps.html)。

* * *

```
Path p1 = Paths.get("joe");
Path p2 = Paths.get("sally"); 
```

在没有任何其他信息的情况下，假设 joe 和 sally 是兄弟姐妹，这意味着节点位于树结构中的同一级别。要从 joe 导航到 sally，您需要先向上导航到父节点，然后再向下导航到 sally：

```
// Result is ../sally
Path p1_to_p2 = p1.relativize(p2);
// Result is ../joe
Path p2_to_p1 = p2.relativize(p1); 
```

* * *

现在，这种技术是否可取，我将留给其他人评论。

请注意，路径不需要存在于磁盘上，您也可以声明具有固定根的路径，因此`Path`like`new Path("/servlet/subdir/subdir2")`和`Path`like`new Path("/servlet")`应该`relativize(...)`是`Path`like `new Path("../..")`。

# active-directory - XPages 检索当前登录的 Active Directory 用户

> ID：10851901
> 
> 赞同：0
> 
> 时间：2012-06-01T14:13:14.737
> 
> 标签：active-directory, xpages

谁能建议我如何能够检索当前登录的 Active Directory 用户？

我一直在研究这通常如何在 JSF 中完成：

```
javax.faces.context.FacesContext.getCurrentInstance().getExternalContext().getRequest().getUserPrincipal() 
```

不幸的是，这似乎总是检索多米诺用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:56:09.557

没有“Active Directory 用户”之类的东西。当您使用 Domino 服务器进行身份验证时，无论您根据什么对用户进行身份验证，您总是会得到一个“Domino 用户”。我怀疑 AD 在身份验证时提供了一个“Domino 用户”名称，根据您的配置，该名称可能与 AD 凭据不同。因此，您的操作过程将是对 AD 进行 LDAP 查找以获取匹配的 AD 用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:16:49.313

如果您按照 Domino 的建议使用 LDAP distinctName 属性，则可以使用如下公式获取经过 LDAP 验证的用户名：

```
@If(
 @NameLookup([NoUpdate]:[NoSearching]; @UserName ;"Fullname")!=""; @Name([CN];@UserName);
 @NameLookup([NoUpdate]:[TrustedOnly]; @UserName; "cn")=@Name([CN];@UserName);  @NameLookup( [NoUpdate]:[TrustedOnly]; @UserName ;"displayName");
 @UserName ); 
```

但在 Xpages 中，我认为您需要使用 Java 进行 LDAP 查找。

# c++ - if 条件不起作用后的 ofstream 对象

> ID：10851902
> 
> 赞同：0
> 
> 时间：2012-06-01T14:13:18.730
> 
> 标签：c++

我正在处理的 C++ 代码遇到了一些奇怪的问题。这是关于我创建的一个“ofstream”对象，以便在文件中包含我需要的数据。

无论如何，我需要放置这个对象，我在“if”条件之后将其称为 output1。因此，任何通过我想要的条件的数据然后在文件中。

现在，如果我在条件后面加上通常的“cout”：

```
.
.
if (Check == 0) cout << data1 << " " << data2 << endl;
. 
```

我会在屏幕上打印结果。

但是当我把我的输出1，

```
if (Check == 0) output1 << data1 << " " << data2 << endl; 
```

然后文件中没有写入任何内容！

我检查了我的 output1 对象在代码中的其他地方工作正常。但不是在这里！并且编译器没有提到任何错误或缺乏声明。

有任何想法吗？

注意：我不能把代码放在这里，甚至相关部分也不能放在这里，因为它是一个很长的代码，并不打算公开，所以我无权复制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:15:30.280

我的水晶球告诉我你有两个不同的对象，都命名为`output1`.

该`if`声明肯定对问题没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:32:16.973

你的**if**完全没问题。

可能你忘了刷新和关闭输出流？

或者您稍后重新打开流？

或者你使用多个输出1？

所以更多的代码片段会导致更具体的答案

# mysql - 仅当存在字符时才选择 MySQL 子字符串

> ID：10851905
> 
> 赞同：4
> 
> 时间：2012-06-01T14:13:23.483
> 
> 标签：mysql, substring, locate

A 有一个由自动过程填充的表，其中包含来自第三方提要的数千个公司名称。大多数公司名称只是名称，但有些公司名称后有连字符。我正在尝试进行仅返回公司名称的选择。现在我有两个疑问：

```
SELECT DISTINCT vendor FROM feed_data;
SELECT DISTINCT SUBSTRING(vendor, 1, LOCATE(' - ', vendor)) FROM feed_data; 
```

第一个查询给了我一切，第二个查询只给了我有连字符的公司名称。我正在寻找一种同时获得两者的方法。

样本数据：

```
vendor:
American Widgets
Bravo Widgets - The best widgets money can buy 
```

此外，此查询实际上是填充菜单的较大查询的子查询部分，因此可能会限制可能的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:19:45.360

使用此查询：

```
select distinct 
     if(LOCATE(' - ', vendor)>0, SUBSTRING(vendor, 1, LOCATE(' - ', vendor)), vendor)
from feed_data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:16:35.747

使用联合 - 每半个查询：

```
SELECT DISTINCT 
    SUBSTRING(vendor, 1, LOCATE(' - ', vendor))
FROM feed_data
where vendor like '%-%'
union
SELECT DISTINCT
    vendor
FROM feed_data
where vendor not like '%-%'; 
```

或者，使用`if()`：

```
SELECT DISTINCT
    if (vendor like '%-%', SUBSTRING(vendor, 1, LOCATE(' - ', vendor)), vendor)
FROM feed_data; 
```

或者，使用`case`：

```
SELECT DISTINCT
    case
        when vendor like '%-%' then SUBSTRING(vendor, 1, LOCATE(' - ', vendor))
        else vendor
    end
FROM feed_data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:24:08.403

可能是这样的（它会给你所有的供应商添加一个字段来提及它是否带有连字符）

```
SELECT distinct vendor,
(case when LOCATE('-', vendor) >= 0 
then 'True'
else 'False' end) as IsVendorWithHiphen
FROM feed_data; 
```

这一个将为您提供所有供应商的结果，`-`无论在哪里都被替换

```
select distinct 
(case when LOCATE('-', vendor) >= 0 then SUBSTRING(vendor, 1, LOCATE(' - ', vendor))
 else vendor) as myvendor from feed_data; 
```

# python - Python 3：UnboundLocalError：赋值前引用的局部变量

> ID：10851906
> 
> 赞同：299
> 
> 时间：2012-06-01T14:13:28.917
> 
> 标签：python, python-3.x, scope

以下代码给出了错误`UnboundLocalError: local variable 'Var1' referenced before assignment`：

```
Var1 = 1
Var2 = 0
def function(): 
    if Var2 == 0 and Var1 > 0:
        print("Result One")
    elif Var2 == 1 and Var1 > 0:
        print("Result Two")
    elif Var1 < 1:
        print("Result Three")
    Var1 =- 1
function() 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：616
> 
> 时间：2012-06-01T14:19:51.503

这是因为，即使`Var1`存在，您也在`Var1`函数内部的名称上使用了赋值语句（`Var1 -= 1`在底线）。自然，这会在函数的范围内创建一个变量，称为`Var1`（实际上，a `-=`or`+=`只会更新（重新分配）现有变量，但由于未知原因（可能在此上下文中保持一致性），Python 将其视为赋值）。Python 解释器在模块加载时看到这一点，并决定（正确地）全局范围`Var1`不应该在本地范围内使用，当您尝试在本地分配之前引用变量时会导致问题。

Python 开发人员通常不赞成在不必要的情况下使用全局变量，因为它会导致代码混乱和有问题。但是，如果您想使用它们来完成您的代码所暗示的内容，您可以简单地**在函数顶部**添加：

```
global Var1, Var2 
```

这将告诉 Python 您**不**打算在函数的局部范围内定义`Var1`or`Var2`变量。Python 解释器在模块加载时看到这一点，并决定（正确地）在全局范围内查找对上述变量的任何引用。

### 一些资源

*   Python 网站对这个常见问题有[很好的解释](https://docs.python.org/3/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value)。
*   Python 3 提供了一个相关的[`nonlocal`](https://docs.python.org/3/reference/simple_stmts.html#nonlocal)声明——也检查一下。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-06-01T14:19:54.873

如果您在函数内部设置变量的值，python 会将其理解为创建具有该名称的局部变量。这个局部变量掩盖了全局变量。

在您的情况下，`Var1`被视为局部变量，并且在设置之前使用它，因此会出现错误。

`global Var1`为了解决这个问题，你可以通过放入你的函数来明确地说它是一个全局的。

```
Var1 = 1
Var2 = 0
def function():
    global Var1
    if Var2 == 0 and Var1 > 0:
        print("Result One")
    elif Var2 == 1 and Var1 > 0:
        print("Result Two")
    elif Var1 < 1:
        print("Result Three")
    Var1 =- 1
function() 
```

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2012-06-01T14:15:32.050

您可以通过传递参数而不是依赖全局来解决此问题

```
def function(Var1, Var2): 
    if Var2 == 0 and Var1 > 0:
        print("Result One")
    elif Var2 == 1 and Var1 > 0:
        print("Result Two")
    elif Var1 < 1:
        print("Result Three")
    return Var1 - 1
function(1, 1) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-10-27T01:10:52.470

我不喜欢这种行为，但这就是 Python 的工作方式。其他人已经回答了这个问题，但为了完整起见，让我指出 Python 2 有更多这样的怪癖。

```
def f(x):
    return x

def main():
    print f(3)
    if (True):
        print [f for f in [1, 2, 3]]

main() 
```

Python 2.7.6 返回错误：

```
Traceback (most recent call last):
  File "weird.py", line 9, in <module>
    main()
  File "weird.py", line 5, in main
    print f(3)
UnboundLocalError: local variable 'f' referenced before assignment 
```

Python 看到`f`被用作 中的局部变量`[f for f in [1, 2, 3]]`，并确定它也是 中的局部变量`f(3)`。您可以添加一个`global f`语句：

```
def f(x):
    return x

def main():
    global f
    print f(3)
    if (True):
        print [f for f in [1, 2, 3]]

main() 
```

它确实有效；但是，*f 最后变成了 3...*也就是说，`print [f for f in [1, 2, 3]]`现在将全局变量更改`f`为`3`，因此它不再是函数。

幸运的是，在将括号添加到`print`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-17T18:39:37.837

为什么不简单地返回您的计算值并让调用者修改全局变量。在函数中操作全局变量不是一个好主意，如下所示：

```
Var1 = 1
Var2 = 0

def function(): 
    if Var2 == 0 and Var1 > 0:
        print("Result One")
    elif Var2 == 1 and Var1 > 0:
        print("Result Two")
    elif Var1 < 1:
        print("Result Three")
    return Var1 - 1

Var1 = function() 
```

甚至制作全局变量的本地副本并使用它们并返回调用者可以适当分配的结果

```
def function():
v1, v2 = Var1, Var2
# calculate using the local variables v1 & v2
return v1 - 1

Var1 = function() 
```

# c++ - 将嵌套的 C 循环转换为单个 boost 索引？

> ID：10851913
> 
> 赞同：5
> 
> 时间：2012-06-01T14:14:09.587
> 
> 标签：c++, boost, cartesian-product

我正在慢慢学习`boost`，并试图找到一种简单的方法来转换以下 C++ 片段：

```
for(int i=-n;i<n+1;i++) {
  for(int j=-n;j<n+1;j++) {
     for(int k=-n;k<n+1;k++) {
       cout << i << ' ' << j << ' ' << k << endl;
     }
  }
} 
```

进入一个我可以循环的迭代器。用我的母语`python`（我可以这样称呼它吗？），这是一个单线使用`itertools`：

```
itrtools.product(range(-n,n+1),repeat=3) 
```

一个完整的答案将提供一个最小的工作示例和文档链接，以便我可以 RTFM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T19:49:12.497

Boost.Preprocessor可以[`BOOST_PP_SEQ_FOR_EACH_PRODUCT`](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/ref/seq_for_each_product.html)在预处理步骤中执行此操作[。](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)

> BOOST_PP_SEQ_FOR_EACH_PRODUCT 宏为几个 seq 的每个笛卡尔积重复一个宏。

但我想这不是你要找的。

如果一些可重用的代码没问题，那么您可以使用[Boost.Iterator](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/index.html)中的[函数输入迭代器](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/function_input_iterator.html)来生成给定范围的笛卡尔积。

**发电机**

```
class product_generator
{
    public:
        typedef std::vector<int> result_type;

        product_generator (int lower, int upper, unsigned int repeat)
            : m_lower(lower), m_upper(upper)
        {  
            for(unsigned int i = 0; i < repeat; ++i)
            {  
                m_iters.push_back(m_lower);
            }
        };

        std::vector<int> operator() ()
        {  
            for(int& i : m_iters)
            {  
                if(++i >= m_upper)
                    i = m_lower;
                else
                    break;
            }

            std::vector<int> res;
            for(int i : m_iters)
                res.push_back(i);

            return res;
        };

    private:
        int m_lower;
        int m_upper;
        std::vector<int> m_iters;
}; 
```

使用此生成器，您可以执行以下操作：

```
product_generator p(lower, upper, repeat);
auto bgn = boost::make_function_input_iterator(p, (double)0); 
```

`bgn`是单个迭代器，您可以循环该迭代器以生成由输入范围形成的输入序列的笛卡尔积。

一个完整的工作示例：

```
#include <vector>
#include <iostream>
#include <boost/iterator/function_input_iterator.hpp>
#include <math.h>

int main ()
{
    int lower = 1;
    int upper = 4;
    unsigned int repeat = 3;

    product_generator p(lower, upper, repeat);

    for(   
            auto bgn = boost::make_function_input_iterator(p, (double)0);
            bgn != boost::make_function_input_iterator(p, pow(upper-lower, repeat));
            ++bgn
       )
    {  
        for(int i : *bgn)
        {  
            std::cout << i << " ";
        }
        std::cout << std::endl;
    }
} 
```

# lwuit - 在 Symbian 手机上使用 Lwuit FileTree 打开存储卡（“E”）时出错

> ID：10851918
> 
> 赞同：0
> 
> 时间：2012-06-01T14:14:35.483
> 
> 标签：lwuit

我做了一个 FileBrowser，它在所有功能手机上都可以正常工作，但在 Symbian 上，FileTree 无法打开存储卡（“E:”）我得到无效的 url 异常。但是，它只能打开移动内存（“C:”）我怎么能解决这个问题？

# android - Android 延迟列表加载和点击

> ID：10851923
> 
> 赞同：0
> 
> 时间：2012-06-01T14:14:52.067
> 
> 标签：android, button, user-interface, click, lazy-loading

我正在寻找一种更好的点击方式，我有一个正在处理的惰性列表，但由于某种原因，我只能使每个列表行的整个列表都可以点击，我想在该列表中制作不同的项目每行可点击假设我在惰性列表的一行中有三张或两张图片，并使每一张都可点击。现在正在使用它，但它只会让我的列表每行可点击

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
             switch (arg2)
             {
                case 0:
                 Intent newActivity0 = new Intent(AmainActivityFractals.this,FractalsTwoOne.class);     
                 startActivity(newActivity0);
                break;
                case 1:
                 Intent newActivity1 = new Intent(AmainActivityFractals.this,FractalsTwoTwo.class);     
                 startActivity(newActivity1);
                break; 
```

有人知道更好的方法吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:19:55.050

[这里](https://stackoverflow.com/questions/1709166/android-listview-elements-with-multiple-clickable-buttons)非常相似的问题。

基本上，`onClickListeners()`当您膨胀列表项时，将 for your buttons 添加到您的列表适配器中`View`。

# actionscript - 仅在将 swf 加载到另一个文件后才调试错误 1046？

> ID：10851925
> 
> 赞同：0
> 
> 时间：2012-06-01T14:14:54.727
> 
> 标签：actionscript

仅在将 .swf 文件加载到另一个 SWF 文件后，我才收到[错误 1046 。](http://curtismorley.com/2007/06/20/flash-cs3-flex-2-as3-error-1046/)

当我自己发布 swf 时，我没有收到任何错误消息。

将 swf 加载到另一个 swf 后，我收到 1046 错误消息。

我试过几次更改链接名称，但运气不好。

我还梳理了我正在加载的 swf，看看是否有与链接相似的名称，但我什么也没看到？

# c++ - ASCII 颜色到 HEX 颜色

> ID：10851926
> 
> 赞同：1
> 
> 时间：2012-06-01T14:14:54.760
> 
> 标签：c++, hex, mud

我是老式 MUD 的建造者。我的任务是制作一个基于网络的房间/对象/移动编辑器。这对我来说没问题，而且几乎完成了。我唯一的问题是颜色图表。我不确定如何将 ASCII 颜色从 Lope 的颜色系统转换为 HEX 值以在 CSS 中使用。

例如，红色定义为：

```
#define C_RED       "\e[0;31m" 
```

我不确定如何在 Hex 中将其更改为红色以用于 CSS，以及哪种阴影（lope 的颜色系统中有两种红色阴影。一种深色，一种浅色。大多数颜色相同）。

有谁知道从一个转换到另一个的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:27:21.527

我记得，这里只有 10 种“颜色”需要担心：

*   红色的
*   绿色的
*   蓝色的
*   青色
*   洋红色（紫色）
*   黄色
*   黑色的
*   白色的

幸运的是，这些只是 RGB 系统的主要和次要颜色：

*   红色的：`0xFF0000`
*   绿色的：`0x00FF00`
*   蓝色的：`0x0000FF`
*   青色：`0x00FFFF`
*   洋红色（紫色）：`0xFF00FF`
*   黄色：`0xFFFF00`
*   黑色的：`0x000000`
*   白色的：`0xFFFFFF`

对于深色版本，请尝试将每个字节减半为 7F

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:18:18.423

手动输入每个条目将是我的第一个猜测，除非您可以遵循控制台颜色的模式。

# blackberry - 黑莓高级 UI 库

> ID：10851928
> 
> 赞同：1
> 
> 时间：2012-06-01T14:14:58.890
> 
> 标签：blackberry, blackberry-jde

从哪里下载Blackberry的**高级 UI 库？**我知道 [http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276) 这是链接，但我得到的只是**高级 UI 图像。拉链**。我没有得到任何高级 UI library.zip 那里请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:17:58.353

从github下载..

[https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI)

仅图像。

[http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)

# preprocessor - DDK 预处理器指令

> ID：10851930
> 
> 赞同：1
> 
> 时间：2012-06-01T14:15:11.497
> 
> 标签：preprocessor, cpu-architecture, wdk

DDK 的构建环境是否将预处理器定义传递给代码以指定 x86/ia64/x64 以供代码使用 with`#ifdef`等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:22:33.307

从我所看到的情况来看，它没有。

但是，在设置 makefile、make`i385`和`amd64`目录`ia64`并将单独的代码文件存储在这些目录中时。

然后，在您的源文件中，分别使用`I386_SOURCES=`和`AMD64_SOURCES=`vars`IA64_SOURCES=`来指定源文件。

这适用于 .asm 文件，也*应该*适用于所有其他 .c 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:00:33.657

是的。查看[Predefined Macros](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)您还可以在 DDK 包含文件中看到很多这样的语句：

```
#if defined(_M_MRX000) || defined(_M_ALPHA) || defined(_M_PPC) || defined(_M_IA64) || defined(_M_AMD64)
#define UNALIGNED __unaligned
#if defined(_WIN64)
#define UNALIGNED64 __unaligned
#else
#define UNALIGNED64
#endif
#else
#define UNALIGNED
#define UNALIGNED64
#endif 
```

# c# - c# winforms - 如何填充 DataGridViewRowHeaders 和 FirstRow - 就像日历一样

> ID：10851932
> 
> 赞同：0
> 
> 时间：2012-06-01T14:15:16.870
> 
> 标签：c#, winforms, datagridview, calendar

时间：2019-06-01 标签：c#winforms

在一个表单上，我有一个 DataGridView 和三个按钮。

按钮是：lastMonth、currentMonth 和 nextMonth。

dgv 有 30 或 31 列（每列是一个月中的一天）。

列标题是：1 2 3 ...（日期）。

我应该用 dayNames（第一个字母）填充 dgv 的 firstRow - MTV ...

就像是：

1 2 3 4 5... 直到 30 或 31 // 这些是列标题

MTWT F... 直到结束 // 这些是 firstRowCells

单击按钮应根据相应月份当天的第一个字母更改第一行。Anu 关于编码的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:25:42.083

我会在 CodeProject 上寻找想法，比如[这个](http://www.codeproject.com/Articles/38699/A-Professional-Calendar-Agenda-View-That-You-Will)。

[http://www.codeproject.com/search.aspx?q=calendar&doctypeid=1%3b2%3b3&ratingmin=4.5](http://www.codeproject.com/search.aspx?q=calendar&doctypeid=1%3b2%3b3&ratingmin=4.5)

# javascript - 创建复杂的 HTML 表格

> ID：10851946
> 
> 赞同：0
> 
> 时间：2012-06-01T14:15:47.330
> 
> 标签：javascript, jquery, html-table

我想尽可能地创建一个与此类似的 HTML 表： ![在此处输入图像描述](../Images/0282cd07f1e6ecb63c98bab033f2dc88.png)

主要“功能”包括：

*   `td`s 基于值着色
*   基于百分比的背景条
*   仅限 HTML 和 javascript/jQuery（无论如何手动输入数据）

是否可以仅使用 HTML/js 来做这样的事情，你会推荐什么来完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:18:57.103

在每个 中放置两个`DIV`s `TD`，一个绝对定位以显示值，另一个用于条形图。在栏上使用简单的 CSS3 渐变背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:23:59.747

使用 js 根据值对单元格着色应该非常简单。

我从未见过 html 表格中的条形图，但这是一个可能的方向：每个 td 包含一个供用户输入值的输入和一个浮动 div。当用户更新值时，使用js将浮动div的宽度设置为合适的百分比。

需要考虑的事项：

*   将输入的 Z-index 设置为高于浮动 div
*   确保浮动的 div 可以清楚且容易地识别，以便 js 知道要更新哪个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T14:27:54.043

是的，您可以使用 html/css/js 来实现这一点。我建议您使用 jquery（因为它仍然是 js），您可以获取数字并计算百分比，然后为条形添加一个类

# arrays - Perl：将数组的哈希与另一个数组进行比较

> ID：10851948
> 
> 赞同：0
> 
> 时间：2012-06-01T14:16:00.123
> 
> 标签：arrays, perl, hash

给定文件：

A.hash.pl：

```
%h1 = (
  A=>['4631 4576','6646 6646',],
  B=>['3539 4576',],
); 
```

B.输入.txt

```
4576    4631    4
4576    3539    4 
```

我必须编写一个 Perl 代码来查找 input.txt 中的值 (4631 4576)。（顺序并不重要。）这里，'4631 4576' 在 input.txt 中显示为 4576 4631。

我写了以下代码，但似乎有一些问题：

```
#!/usr/bin/perl -w
open (FH, "input.txt") or die "can't open file: &! \n";
require "hash.pl";
foreach $amp (<FH>)
{
    if ($amp=~/(\d+)\t(\d+)\t(\d+)/)        
    {       
        foreach $keys (keys %h1)
        {
            @tmparray= @{$h1{$keys}};
            foreach $tmp1 (@tmparray)
            {
                if ($tmp1 =~ m/($1 $2|$2 $1)/ )
                {
                    print "$keys", "$3\n";
                }
            }
        }
    }
}
close (FH);
exit; 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:27:58.727

此解决方案`do`优先使用，`require`因为后者旨在包含库源文件并在此上下文中返回无用的标量值。`do`只返回执行的最后一条语句的值，因此可用于初始化局部变量。

该程序不使用正则表达式，而是调用`split`以收集文件中的非空白字段。然后它检查是否有三个，并且它们都是数字的。

将结果`split`放入数组可以避免捕获的正则表达式字段丢失的问题。

构建正则表达式`$re`，允许前两个字段以任意顺序出现，然后`grep`在每个散列元素上调用以验证散列值数组中的任何值是否与此文件条目匹配。

输出看起来很小，但它包含与显示的原始代码相同的信息。

```
use strict;
use warnings;

my %data = do 'hash.pl';

open my $fh, '<', 'input.txt' or die $!;

while (<$fh>) {

  my @values = split;
  next if grep /\D/, @values or @values != 3;

  my $re = qr/\A$values[0]\s+$values[1]\z|\A$values[1]\s+$values[0]\z/;

  foreach my $key (keys %data) {
    print "$key - $values[2]\n" if grep $_ =~ $re, @{$data{$key}};
  }
} 
```

**输出**

```
A - 4
B - 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T15:22:11.460

问题很简单：你在你的程序中使用`$1`, `$2`, `$3`，但是当你使用它们时，你已经失去了它们的价值。这些是全局符号，只要您使用正则表达式运算符，它们就会被替换。在您的第一次正则表达式匹配后，只需将它们保存在另一个变量中：

```
$first  = $1;
$second = $2;
$third  = $3; 
```

您还应该小心使用正则表达式。您的正则表达式有效，但它们非常非常狭窄。当您第一次在文件中有标签时，我错过了它。我喜欢使用`\s+`任何类型的空白。这将涵盖多个制表符或空格或不同的组合。

我还强烈建议您学习一些更[*现代的 Perl*](http://onyxneon.com/books/modern_perl/modern_perl_a4.pdf)。如果您在程序中使用了这两行代码，您会立即发现问题：

```
use strict;
use warnings; 
```

这`strict`将确保您已通过`my`或定义了变量`our`。这样可以确保您不会说`$Foo`一个又`$foo`一个，并且想知道您存储的价值发生了什么变化`$foo`。

当您进行第二次正则表达式匹配时`warnings`，会立即突出显示`$1`并且`$2`没有值。

因为，`require`当你使用`strict`. `my`变量是具有有限范围的严格局部变量。这就是为什么 99% 的时间都在使用它。

`my`变量只存在于它声明的范围内。例如，如果您在循环内声明一个变量，则它在循环外不存在：

```
if ($a > $b) {
    my $highest = $a;
} 
else {
    my $highest = $b;
}
print "The highest value is $highest\n"; 
```

这不起作用，因为`$highest`在 if 语句中定义。您必须在声明`$highest`之外声明它才能工作：

```
my $highest;
if ($a > $b) {
    $highest = $a;
} 
else {
    $highest = $b;
}
print "The highest value is $highest\n"; 
```

声明的`our`变量对整个*包*全局可用。您可以在任何地方定义它——在循环中、在 if 语句中、在任何地方——它稍后将可用。

包只是一个名称空间。除非您另有声明，否则您总是在`main`包裹中。防止模块变量影响代码中的变量很有用。这样，您包含的模块可以使用变量`$foo`，并且您可以使用变量`$foo`而不会相互干扰。

我不得不进入这个的原因是因为你的`require`。`my`变量仅在其范围内可用。也就是说，for 循环、if 语句或整个文件。请注意最后一个：*整个文件*. 这意味着如果我这样做`my %h1`，它就不会存在于文件之外。因此，我必须用`our`.

此外，当您使用 时`strict`，它非常严格。当它看到一个尚未声明的变量时，它会生成一个编译时错误。因此，我必须`%h1`在主程序中声明，以便编译器知道它。

我也使用`say`从我的`use feature qw(say);`. 就像`print`它总是打印一个 NL 字符。它看起来并不多，但在许多情况下它可以不那么混乱。

现在强烈建议您使用声明的标量来打开文件，而不仅仅是文件句柄。文件句柄是全局的，可能会导致问题。另外，在子程序中很难使用文件句柄。另外，建议使用三部分的 open 语句。这可以防止文件名以`>`或开头时出现问题`|`。

这是用更现代的 Perl 风格重写的程序。我保留了您的标准算法，但添加了新的编译指示，在 ing`%h1`之前声明`require`，并使用了更标准的`open`. 否则，这几乎就是你所拥有的。

```
#! /usr/bin/env perl
#

use strict;
use warnings;
use feature qw(say);

our %h1;
require "hash.pl";

open ( my $input_fh, "<", "input.txt" )
    or die "can't open file: $! \n";

foreach my $amp ( <$input_fh> ) {
    chomp $amp;
    if ( $amp =~ /(\d+)\s+(\d+)\s+(\d+)/ ) {
        # Got to save the $1, $2, and $3 for later
        my $first = $1;
        my $second = $2;
        my $third = $3;
        foreach my $key ( keys %h1 ) {
            foreach my $tmp1 ( @{$h1{$key}} ) {
                if ($tmp1 =~ /($first\s+$second|$second\s+$first)/ ) {
                    say qq("$key": "$third");
                }
            }
        }
    }
}
close $input_fh; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T15:05:55.763

您正在尝试重用 variables `$1`，`$2`并`$3`在另一个正则表达式中，我怀疑这就是把事情搞砸的原因。当我尝试你的代码时，我得到了错误：

```
Use of uninitialized value $2 in regexp compilation ... 
```

因此，一种可能的解决方案是在捕获值后立即复制这些值，以避免在`$1`编译第二个正则表达式时 etc 变量被覆盖：

```
if ($amp=~/(\d+)\t(\d+)\t(\d+)/) {       
    my @args = ($1,$2,$3); 
```

然后当然替换`$1`为`$args[0]`等等。

您还应该知道，不运行脚本`use warnings`不是一个好主意。你认为通过懒惰节省的时间将比调试简单的错误少 10 倍。[为什么要使用严格和警告？](https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings)

# variables - ExtJS - 如何保留“this”类对象？

> ID：10851951
> 
> 赞同：1
> 
> 时间：2012-06-01T14:16:35.880
> 
> 标签：variables, extjs, this

我在 ExtJs 的 Controller 类中的代码如下所示。

1.  如何在`this`不使用全局变量的情况下将对象传递给其他函数，因为我将使用我的应用程序的多个实例。

2.  如果只能在全局范围内完成，我如何隔离我的全局变量（仅针对一个实例）？

我使用 ExtJs 4.1 和 DeftJs

谢谢！

#

编辑：

我想在所有地方`oMeasurements`替换！`this`

```
init: function() {
    oMeasurements = this;
    this.readConfig();
},
readConfig: function() {

         oMeasurements.httpApi.request({
               module : 'monitor',
               func  :  'getConfig',
               success: oMeasurements.readConfigCallback
         });
      },

readConfigCallback: function(oResponse) {
taskMeasurements =  {
            run: oMeasurements.output,
            interval: '1000'
            ,scope: this
         }
Ext.TaskManager.start(taskMeasurements); 
},

output: function() {
         // finally here, "this" is no more my original "this"
         console.log(this);

         oMeasurements.httpApi.request({
               module : 'monitor',
               func   : 'getMeasurementsFiles',
               success: oMeasurements.outputCallback
         });
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:54:42.337

您需要`scope: this`在回调定义之后添加。您失去作用域不是因为您从另一个函数调用函数，而是因为您正在使用回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:15:16.853

通常在带有回调的 Ext 函数调用中有一个作用域参数。

您还可以使用 Ext.bind() 设置函数的“this”；

例如，如果您将函数 a() 传递给另一个方法并运行它，“this”将是被调用者。如果你调用了 Ext.bind(a, this)，当传递“a”时，“this”将指向调用者。

# javascript - 使用 Javascript 检测 Safari Windows

> ID：10851954
> 
> 赞同：5
> 
> 时间：2012-06-01T14:16:40.193
> 
> 标签：javascript, safari, browser-detection

如何检查用户是否在 Windows 上使用 Safari？因为我需要在网站上应用一些特殊的样式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T14:19:03.610

您可以测试`navigator.userAgent`字符串`Safari/`和`Windows`（[Safari 用户代理字符串列表](http://www.useragentstring.com/pages/Safari/)），例如：[Live Example](http://jsbin.com/kepan/1)

```
var ua = navigator.userAgent.toLowerCase();
if (ua.indexOf("safari/") !== -1 &&  // It says it's Safari
    ua.indexOf("windows") !== -1 &&  // It says it's on Windows
    ua.indexOf("chrom")   === -1     // It DOESN'T say it's Chrome/Chromium
    ) {
    // Looks like Safari on Windows (but browser detection is unreliable and best avoided)
} 
```

...但是*浏览器*检测通常不是解决问题的最佳方法。*在可能的情况下使用特征*检测要好得多。您可以对几乎所有内容进行特征检测。Kangax 有[一个很棒的功能检测列表](http://kangax.github.com/cft/)，当然像[Moderizr](http://modernizr.com/)这样的库也可以做到。但我不知道你的用例......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:28:42.403

这个插件似乎正是你想要的。[插件链接](http://www.stoimen.com/blog/2009/07/16/jquery-browser-and-os-detection-plugin/)

在插件页面上，它们链接到运行插件的测试页面，该插件将回击浏览器和操作系统。[测试链接](http://stoimen.com/jquery.client.plugin/)

# php - 在 PHP 中比较数组中的值的最有效方法

> ID：10851957
> 
> 赞同：2
> 
> 时间：2012-06-01T14:16:44.873
> 
> 标签：php, arrays, comparison

我想使用 PHP 对测验进行评分。我有一个测验，提交后会提供一系列答案。它们都是真/假，所以数组类似于

```
array([0] => T, [1] => F, [2] => F) 
```

然后我有一个答案键，比如

```
array([0] => T, [1] => F, [2] => T) 
```

我需要检查每个答案，这样我不仅可以计算正确百分比，而且当且仅当遗漏问题的数量少于 20% 时，才能显示遗漏问题的正确答案。

所以我的问题是，我应该做某种 foreach 循环来遍历每个循环，还是使用某种数组比较函数会更整洁，如果是这样，哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T17:22:42.753

使用`foreach()`：

```
$answer   = array(true, true, false, true, false);
$expected = array(true, true, true,  true, false);
$error    = array();

foreach ($answer as $k => $v) {
  if ($v !== $expected[$k])
    $error[$k] = $v;
}

// Display the correct answer if number of mistakes is <= 20%
if (floatval(count($error) / count($expected)) <= .2) {
  $correct = array_intersect_key($expected, $error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:19:49.547

使用 foreach 循环，您将拥有更多控制权。您可以通过将数组中的相等值除以总问题数来确定正确的百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:40:59.333

以分级阵列为起点。由于它应该包含所有键（对于所有问题），您可以使用它们来检测提交数组中缺少的键*并*找到所有答案。如果您要手动计算报告，下面是一个示例：

```
$submission = array(1 => true, 3 => false, 4 => true, 100 => true);
$grading = array(0 => true, 1 => true, 2 => true, 3 => true, 4 => true);

//gather data
$answered = array();
$missing = array();
$correct = array();
$wrong = array();
foreach ($grading as $key => $answer) {
    if(array_key_exists($key, $submission)) {
        array_push($answered, $key);
        if ($submission[$key] === $answer)
            array_push($correct, $key);
        else
            array_push($wrong, $key);
    }
    else
        array_push($missing, $key);
}

//print report
echo "correct\n";
print_r($correct);
echo "\n\n";

echo "wrong\n";
print_r($wrong);
echo "\n\n";

echo "missing\n";
print_r($missing);
echo "\n\n";

echo "% answered\n";
echo 100*(count($answered)/count($grading));
echo "\n\n";

echo "% correct (of all questions)\n";
echo 100*(count($correct)/count($grading));
echo "\n\n";

echo "% correct (of all answered)\n";
echo 100*(count($correct)/count($answered));
echo "\n\n";

echo "% wrong (of all questions)\n";
echo 100*(count($wrong)/count($grading));
echo "\n\n";

echo "% wrong (of all answered)\n";
echo 100*(count($wrong)/count($answered)); 
```

# python - 无论时态或形式如何，我如何匹配单词？

> ID：10851959
> 
> 赞同：4
> 
> 时间：2012-06-01T14:17:03.767
> 
> 标签：python, nlp, nltk, string-matching

我目前正在编写一个贯穿文档的脚本，提取所有关键字，然后尝试将这些关键字与在其他文档中找到的关键字进行匹配。有一些细节使这一点复杂化，但它们与我的问题不是很相关。基本上，我希望能够匹配单词，而不管它们出现的时态。

例如：如果给定字符串“swim”、“swam”和“swimming”，我想要一个可以识别这些都是同一个单词的程序，尽管它是否会将单词存储为游泳、游泳或游泳对我来说没那么重要。

我知道这个问题可以通过包含所有这些单词形式的字典来解决，但我不知道有任何字典以这种方式映射到对此有用。我更喜欢与 Python 兼容的解决方案或库，因为这是我目前用于此脚本的，但我可以使用几乎任何语言的解决方案（保存 haskell 或 eiffel 或类似的晦涩/困难的东西）一起工作）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T14:20:52.970

查看[pywordnet](http://osteele.com/projects/pywordnet/)。

```
>>> N['dog']
dog(n.)
>>> N['dog'].getSenses()
('dog' in {noun: dog, domestic dog, Canis familiaris},
 'dog' in {noun: frump, dog}, 'dog' in {noun: dog},
 'dog' in {noun: cad, bounder, blackguard, dog, hound, heel},
 'dog' in {noun: pawl, detent, click, dog},
 'dog' in {noun: andiron, firedog, dog, dogiron}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T04:55:21.973

从您的问题来看，听起来您正在寻找一种**词干提取**或**词形还原**算法，该算法基本上将每个单词映射到其字典形式。一种著名的此类算法是 Porter Stemming 算法，它已经存在了 30 年，并在包括 Python 在内的多种语言中实现。[您可以在http://tartarus.org/martin/PorterStemmer/](http://tartarus.org/martin/PorterStemmer/)找到这些实现的列表。

虽然 Porter 词干分析器已经存在很长时间并且出于比较原因可能很有用，但 Spaceghost 正确地指出这不一定是可用的最佳系统。[Snowball](http://snowball.tartarus.org/algorithms/english/stemmer.html)应该比 Porter 词干算法更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:58:09.660

你描述的这个问题似乎是一个词干问题，它们是一些有用的词干分析器，比如搬运工词干分析器。更具体地说，尝试使用 Python 的 nltk 工具包来实现它，如果我没记错的话，它带有一个搬运工词干分析器。

# tfs - 如何使用 Visual Studio 2012 在 TFS 预览上禁用多次签出

> ID：10851961
> 
> 赞同：1
> 
> 时间：2012-06-01T14:17:11.457
> 
> 标签：tfs, beta, visual-studio-2012, azure-devops

我在 TFS Preview 中有一个项目，并添加了 2 个其他人来使用 Visual Studio 2012 beta 处理该项目。我将项目的设置更改为不允许对文件进行多次签出，但它并没有改变任何东西。我也改为只在服务器上工作，但仍然允许多次签出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T14:31:20.023

您是否在 Visual Studio 2012 中使用本地工作区？这是新的默认设置，允许您使用不需要只读文件的工作区，并且在签出文件时不需要通知服务器。

为了使自动锁定起作用，您需要使用服务器工作区。团队中的每个人都需要转换他们的工作区类型。如果您打开源代码管理资源管理器，您应该会在视图工具栏中的组合框中看到您的工作区名称被选中。如果您将该组合放下，将会有一个选项：“工作区...”。如果您随后选择您的工作区，选择“编辑”，然后在“编辑工作区”对话框中选择“高级”选项，您应该会看到切换工作区类型的选项：

如果您将工作区更改为“位置：服务器”，那么您将拥有与允许自动锁定的先前版本的 TFS 相同类型的工作区。

# c# - Authorize.Net 交易详情 API 不返回 LineItems

> ID：10851964
> 
> 赞同：1
> 
> 时间：2012-06-01T14:17:22.287
> 
> 标签：c#, asp.net, e-commerce, payment-gateway, authorize.net

我使用`Transaction Details API`with`Authorize.Net C# SDK`直接从[Authorize.Net 网站](http://developer.authorize.net/api/transaction_details/)使用以下代码获取过去 30 天内所有交易的列表：

```
 //open a call to the Gateway
        var gate = new ReportingGateway("myAPILogin", "myTransactionKey");

        //Get all the batches settled
        var batches = gate.GetSettledBatchList();

        Console.WriteLine("All Batches in the last 30 days");

        //Loop each batch returned
        foreach (var item in batches)
        {
            Console.WriteLine("Batch ID: {0}, Settled On : {1}", item.ID,
                              item.SettledOn.ToShortDateString());
        }

        Console.WriteLine("*****************************************************");
        Console.WriteLine();

        //get all Transactions for the last 30 days
        var transactions = gate.GetTransactionList();
        foreach (var item in transactions)
        {
            Console.WriteLine("Transaction {0}: Card: {1} for {2} on {3}",
                              item.TransactionID, item.CardNumber,
                              item.SettleAmount.ToString("C"),
                              item.DateSubmitted.ToShortDateString());
        } 
```

它工作正常。我试图通过添加以下内容来获取`LineItems`每个列表：`Transaction`

```
 ...
        foreach (var item in transactions)
        {
            Console.WriteLine("Transaction {0}: Card: {1} for {2} on {3}",
                              item.TransactionID, item.CardNumber,
                              item.SettleAmount.ToString("C"),
                              item.DateSubmitted.ToShortDateString());
            foreach (var li in item.LineItems)
            {
                Console.WriteLine("    LineItem ID: {0} Name: {1} Quantity: {2} Unit Price: {3}",
                              li.ID, li.Name, li.Quantity, li.UnitPrice);
            }
        } 
```

虽然它没有显示任何`LineItems`内容，但我什至设置了一个断点并看到它总是`LineItems`为每个事务显示 0，即使我可以登录 Web 界面并`LineItems`在事务详细信息报告中查看。

![在此处输入图像描述](../Images/f85271eebf204f43769c355cab2465b8.png)

我究竟做错了什么？如何`LineItems`使用 ? 查看每笔交易`Authorize.Net C# SDK`？

**答案：（**感谢 SO 用户[Josh](https://stackoverflow.com/a/10852600/585552)）

```
 ...
        var transactions = gate.GetTransactionList();
        foreach (var item in transactions)
        {
            Console.WriteLine("Transaction {0}: Card: {1} for {2} on {3}",
                              item.TransactionID, item.CardNumber,
                              item.SettleAmount.ToString("C"),
                              item.DateSubmitted.ToShortDateString());

            var details = gate.GetTransactionDetails(item.TransactionID);

            foreach (var li in details.LineItems)
            {
                Console.WriteLine("    LineItem ID: {0} Name: {1} Quantity: {2} Unit Price: {3}",
                              li.ID, li.Name, li.Quantity, li.UnitPrice);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:54:49.240

GetTransactionList 返回有关交易的有限信息。在每笔交易中，执行 GetTransactionDetails：

**GetTransactionList**此函数返回指定批次 ID 的有限事务详细信息。

**GetTransactionDetails**此函数返回指定事务 ID 的完整事务详细信息。

发现自 Authorize.net 的 XML API 库[查看 XML 部分的底部](https://developer.authorize.net/api/transaction_details/)

# css - CSS 指定扫描文档上的位置

> ID：10851971
> 
> 赞同：3
> 
> 时间：2012-06-01T14:18:02.900
> 
> 标签：css, printing, positioning

我正在尝试编写 CSS 规则以将文本放置在扫描的文档上。

原因：该文件是预先打印的表格。我正在尝试将文本定位在屏幕上，使其与实际表单上的“空格”相关。

问题：虽然我使用厘米定位值，但它们似乎与实际页面上的值不一致。我可以看到这种错位，因为我的扫描图像位于页面背景中。

我试过的：

1.  我用尺子物理测量位置并用 CSS 指定它们。但在屏幕上，它不符合。

2.  我使用扫描的图像来定位 CSS 值。那么打印输出不正确。

3.  我什至使用 Inkscape 将扫描的页面缩放到以厘米为单位的精确尺寸，并考虑了所有边距等......

我需要什么：我正在尝试在屏幕上正确显示输出值，并让它们以正确的方式打印。我知道使用两张 CSS 表（一张用于打印）是一种选择。但是我正在开发这个程序，而不是实际打印的地方。那么有没有一种方便的方法可以将确切的屏幕位置与实际/最终打印输出上的位置相匹配？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:23:53.157

扫描的文档与任何其他图像一样，将其用作背景并将元素绝对放置在其顶部。以像素而不是厘米为单位进行所有测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:22:21.493

您需要为打印创建一个特定的 CSS 样式表，即使您附近没有您所说的打印机。必须这样做……无论您在屏幕上测量多少次，打印机都会打印不同的内容。CSS 它是必需的，但真正的问题是您必须了解和理解的打印机内部配置。

您应该阅读本教程，我发现它很有用！ [如何](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)通过**Smashing Magazine**设置打印样式表。

然而这还不够……您真的需要询问有关打印机的所有可能细节！有了打印机的型号，如果实际打印的人不知道，你可以去看看它打印时的默认边距，你真的应该知道。如果他们没有告诉你或者你没有找到他们，那么一定有办法告诉打印机打印它的内部配置。我需要在几秒钟内按顺序按一些按钮才能在我需要打印的模型中执行此操作。像你一样，我身边没有它。

我做过一次，我一直在努力，直到我不得不打印这些信息。打印机什么都知道！它是边距，它是度量，从左到右，从右到左考虑多少像素，等等。所有你需要它在那里，你需要知道它来完美地打印你的格式，使你的 CSS 适应这个不可移动的供应商值.

作为个人建议，您应该[在 Twitter 上关注 Smashing Magazine](http://twitter.com/#!/smashingmag) =) 我发现他们关于网页设计和 CSS 的推文非常有趣 =)

祝你好运！=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:33:54.577

这不是一个理想的解决方案，但我想我可能会帮助您在屏幕上正确定位。

我会在表单顶部创建一个动态测试网格，以便您知道位置在哪里。

与此类似：

```
for($i = 0; $i < 500px; $i++)
{
      for($j = 0; $j < 500px; $j++)
      {
         echo '<span class="gridPoint" style="position:absolute; top:'.$i.'; left:'.$j.'">' . $i . ',' . $j .'</span>';
      }
} 
```

这将允许查看确切的坐标，文本必须非常小，但它可以让生活更轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T00:31:27.843

在开始之前以固定的宽度和高度（以像素为单位）缩放扫描的图像。然后也使用像素覆盖单词。这样，当您打印时，它应该对齐，因为两者都是像素。您的文本大小和行高也应以像素为单位指定。

如果那行不通，那么应该真正告诉您确切地*了解*它是如何行不通的。文本行是否正确，但都向上或向下移动了一定数量的像素？那么这可能是一个行高问题。文本是否按行正确排列，但随着行的进行，单词会不同步？可能与不同的字母和单词间距有关。等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T14:27:16.800

我认为您可以在 JS 中使用坐标。

1.  使用设计软件（油漆可以是工具..）获取您必须放置的每个元素的坐标
2.  使用 JS 将元素放置在您拥有的坐标中

它可以完成这项工作，并且坐标比测量更好。

# linux - 在同一台服务器上运行 Tomcat 和 JBoss 是否有任何陷阱？

> ID：10851973
> 
> 赞同：0
> 
> 时间：2012-06-01T14:18:15.413
> 
> 标签：linux, tomcat, jboss

我需要在我的开发 Linux 服务器上运行 Tomcat v6.0 的实例，以便测试我开发的应用程序。在同一台（物理）服务器上，我需要运行一个 hudson-ci 实例。由于 Tomcat 经常打开和关闭，我考虑在不同的端口上为持续集成软件运行另一台服务器（即 JBoss AS 6）。

有什么我应该提前注意的陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:24:33.963

不，只要确保没有端口冲突（每个将使用多个端口）。你应该可以启动Tomcat，然后启动JBoss，查找错误，修复，重复。

# r - 在 R 中创建矩阵的有效方法

> ID：10851976
> 
> 赞同：2
> 
> 时间：2012-06-01T01:38:07.173
> 
> 标签：r, matrix

我正在尝试从向量创建这样的矩阵：

```
 vec= c(2, 5, 9)
    > A
            [,1] [,2] [,3] [,4]
    [1,]     2    0    0    0
    [2,]     5    3    0    0
    [3,]     9    7    4    0 
```

实际上总是第一列是向量元素，第二列从 0 开始，然后是 (5-2 = 3)，然后第二列的第三个元素是 (9-2 = 7)。然后第三列从 0 开始，然后是 0 和 (9-5 = 4)，最后一列始终为零。vec 的长度可能会更改为任何数字，例如 4、5、...。如何编写有效的函数或代码来创建此矩阵？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T05:25:00.573

我不知道效率，但这里有两个不使用 for 循环的解决方案：

```
n <- length(vec)    
A <- replicate(n+1, vec) - cbind(0, t(replicate(n, vec)))
A[upper.tri(A)] <- 0 
```

这个更长，但只创建一个矩阵

```
n <- length(vec)
A <- replicate(n, vec)
A <- A - t(A)
A <- cbind(vec, A)
A[upper.tri(A)] <- 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T02:45:04.050

我认为这会做你想要的：

```
f = function(vec)
{
   n = length(vec)  
   M = matrix(0,n,n+1)
   M[,1] = vec
   for(i in 1:n) M[,i+1] = c(rep(0,i),vec[-c(1:i)]-vec[i])
   return(M)
}

vec = c(2,5,9)
f(vec)
     [,1] [,2] [,3] [,4]
[1,]    2    0    0    0
[2,]    5    3    0    0
[3,]    9    7    4    0 
```

# linux-kernel - Linux (2.6.32) 上的进程不可抢占

> ID：10851982
> 
> 赞同：0
> 
> 时间：2012-06-01T14:18:42.543
> 
> 标签：linux-kernel, real-time, scheduler, preemption

我正在尝试使进程不可抢占。我已将调度程序策略更改为`SCHED_FIFO`并将其设置`rtprio`为 99。一旦进程启动，在没有 IO 中断的情况下，我是否可以保证该进程不会被其他进程抢占？rtprio=99 是最高优先级还是内核的某些进程具有更高的优先级？最后，我如何知道进程在执行过程中是否被抢占？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:36:06.563

它确实有其他进程可以抢占 rt 最高的进程。`stop_machine()`例如，为热移除 CPUS、修改内核代码文本而创建的进程。

您可以从 /proc/$PID/sched 获取信息以确定进程是否已被抢占。猫 /proc/$PID/sched

```
nr_switches                        :                 4197
nr_voluntary_switches              :                 4140
nr_involuntary_switches            :                   57 
```

如果`nr_switches`被改变，则进程已被抢占

# c++ - VC++中的指针算法（三重指针赋值）

> ID：10851984
> 
> 赞同：1
> 
> 时间：2012-06-01T14:18:50.037
> 
> 标签：c++, visual-c++, pointers, nullpointerexception

我的场景如下（VC++代码）：

```
IDirect3DSurface9 ***ppp;
IDirect3DSurface9* p; 
```

我打电话`CreateOffscreenPlainSurface( , , ,&p,null)`，现在 p 将保存 D3D 表面的地址。所以我想分配`p`给`ppp`.

所以我在做

```
(*(*ppp)) = p; 
```

但它抛出了运行时异常。我不明白为什么。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:20:59.693

此赋值引发异常，因为您正在写入由未初始化指针指向的地址。您需要为指向指针数组的指针分配内存，然后再分配给指针数组，然后才能进行分配。

```
ppp = new IDirect3DSurface9**[10];  // Pick the right size here
ppp[0] = new IDirect3DSurface9*[5]; // Pick the right size here, too
ppp[0][0] = p; 
```

完成这些数组后，不要忘记`delete[]`它们。

如果使用指向指针的指针不是明确要求，请考虑`std::vector<std::vector<IDirect3DSurface9*> >`改用。

# php - 如何不隐藏空 XML 节点 PHP

> ID：10851987
> 
> 赞同：0
> 
> 时间：2012-06-01T14:19:00.053
> 
> 标签：php

我想知道如何不仅返回关闭的 XML 节点，如果它是空的，可以在下面的 CustomerFax 节点中看到，并且还返回一个没有内容的打开节点，例如 OrderType 节点。谢谢

```
<PushedOrders clientID="0" domainID="0" username="" password="">
<Order>
<OrderType></OrderType>
<WebOrderID></WebOrderID>
<CustomerFax/>
</Order>
</PushedOrders> 
```

编辑添加我当前使用的 PHP 代码，它只在为空时返回结束标记。当我查看示例 xml 上方的示例 xml 的页面源时，空节点返回节点标记之间：

```
$xml = new SimpleXMLElement('<PushedOrders/>');

$xml->addAttribute(XML_ATTRIBUTE_CLIENTID, '0');
$xml->addAttribute(XML_ATTRIBUTE_DOMAINID, '0');
$xml->addAttribute(XML_ATTRIBUTE_USERNAME, '');
$xml->addAttribute(XML_ATTRIBUTE_PASSWORD, '');

$order = $xml->addChild('Order');

$content = $order->addChild('OrderType');
$content = $order->addChild('WebOrderID');
$content = $order->addChild('CustomerFax');

echo formatXML($xml->saveXML('SalesOrder')); 
```

# ios - 将 CLLocation 数组保存到存档 ios

> ID：10851988
> 
> 赞同：1
> 
> 时间：2012-06-01T14:19:00.107
> 
> 标签：ios, arrays, object, archive, cllocation

我似乎无法弄清楚如何归档我的 CLLocation 数据。

我想存档当应用程序被杀死（由用户或操作系统）时从位置管理器检索到的 CLLocation 对象，并在启动时检索它。然而，在 applicationWillEnterForeground 方法中取消归档后，NSLog 打印计数为 0 有人能告诉我我做错了什么吗？这就是我所拥有的：

```
-(void)applicationWillTerminate:(UIApplication *)application {

if([self.locs count] > 0) {
    NSArray* arr = [[NSArray alloc] initWithObjects:self.locs, nil];
    NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Locs.archive"];
    [NSKeyedArchiver archiveRootObject:arr toFile:archivePath];
    //[arr release];
}
[self.locationManager stopUpdatingLocation];
[self.locationManager release];
} 
```

和

```
-(void)applicationWillEnterForeground:(UIApplication *)application {
NSString *archivePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Locs.archive"];
self.locs = [NSKeyedUnarchiver unarchiveObjectWithFile:archivePath];
NSLog(@"friet : %i", [self.locs count]);
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(networkStatusChanged:) name:kReachabilityChangedNotification object:nil];
[self sendLocations];
} 
```

这些是文档，我已经找到了它们，但它们对我没有任何意义！

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Articles/codingctypes.html#//apple_ref/doc/uid/20001294-96887](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Articles/codingctypes.html#//apple_ref/doc/uid/20001294-96887)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:33:05.163

You have to realize that as of iOS 4, if the device supports multitasking, the `applicationWillTerminate:` method never gets called. Use `applicationDidEnterBackground:` instead. Better yet, save the data immediately every time it changes and don't wait for the app to be backgrounded. Otherwise, you will lose data if the app crashes or if you kill it in the debugger.

Also, I don't know if it's a good idea to save a file to `NSTemporaryDirectory()`, even for testing. Have you checked whether a file saved to that location will actually be there when the app is relaunched. It might be a better idea to choose the library directory instead.

# iphone - 将 Safari 中的网站 URL 指向 iPhone 应用程序

> ID：10851994
> 
> 赞同：0
> 
> 时间：2012-06-01T14:19:13.830
> 
> 标签：iphone, objective-c, ios5, safari

我知道通过使用自定义 url 方案，我可以在 Safari 中放置一个指向我的应用程序的链接（例如“myApp://”）。我想知道是否有一种方法可以设置一个 URL，例如“http://myApp.com”来指向我的应用程序。原因是我的网站上有一个可用于打开 URL 的 Web 应用程序。但 iPhone 应用程序具有更多功能，我希望在可用时打开它而不是 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:25:41.400

您可以检查代理，如果代理是 iphone，则将 url 重定向到自定义 url 方案

# ruby-on-rails - ruby 的后台工作线程

> ID：10851996
> 
> 赞同：0
> 
> 时间：2012-06-01T14:19:17.307
> 
> 标签：ruby-on-rails, background, event-handling

我想在 Rails 应用程序中添加类似“背景”线程的东西。我需要不时查看邮件（比如说每 10 分钟），然后根据邮件做一些事情。这应该与错误跟踪器的工作方式相同，您可以回复从错误跟踪器收到的电子邮件，它会接收电子邮件并将其添加到工单中。

有没有简单的方法在后台运行这样的东西？我不想使用 cron 或任何系统工具，只是纯粹的 ruby​​。我开始申请，我不应该关心其他任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:25:38.987

EventMachine 有[PeriodicTimer](http://eventmachine.rubyforge.org/EventMachine/PeriodicTimer.html)

```
 n = 0
 timer = EventMachine::PeriodicTimer.new(5) do
   puts "the time is #{Time.now}"
   timer.cancel if (n+=1) > 5
 end 
```

[rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)是一个使用纯 Ruby 基础 EventMachine 编写的类似 cron 的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T23:57:17.640

接受的答案有几个潜在的问题值得指出。

首先，`PeriodicTimer`使用尾递归重新调度自身执行，即`EventMachine.add_timer`在执行其块后调用。不幸的是，代码没有使用`begin-ensure-end`这意味着如果您的代码中有异常，计时器将停止。参见[GH#454](https://github.com/eventmachine/eventmachine/issues/454)。

其次，存在`EventMachine`作为单例在单线程中运行的反应器循环的问题。如果您`PeriodicTimer`在其块中启动并执行慢速电子邮件操作，您将阻塞其他代码可能依赖的反应器循环。更好的方法是使用`EventMachine::Deferrable`. 有关示例，请参见[这篇文章。](http://rubylearning.com/blog/2010/10/01/an-introduction-to-eventmachine-and-how-to-avoid-callback-spaghetti/)

最后但并非最不重要`EventMachine`的一点是，如果反应器的反应器尚未运行，则应在单独的线程上运行，但如果反应器的线程已在运行，则应在反应器的线程上“安排”您的工作。

把这些放在一起，你就有了一些类似的东西：

```
def check_email
  timer = EM::PeriodicTimer.new(10.minutes) do
    begin
      DefferableEmailChecker.new.errback do |error|
        # handle error
        # note that this code will run OUTSIDE the
        # periodic timer block
      end
    rescue Exception => e
      # even with a Deferable this is good practice
      # if you want to cancel, use timer.cancel
    end
  end
end

if EM.reactor_running?
  EM.schedule do
    check_email
  end
else
  Thread.new do
    EM.run do
      check_email
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:30:01.317

查看[Daemon-Kit](https://github.com/kennethkalmer/daemon-kit)。它允许您在与 Rails 项目具有相似约定的框架中创建 Ruby 守护程序。我们用它来监控和执行各种后台任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T14:30:22.303

我在我的项目中使用[了delayed_job 。](https://github.com/collectiveidea/delayed_job)

> Delayed_job（或 DJ）封装了在后台异步执行较长任务的常见模式。

# jquery-mobile - JQuery Mobile：单击按钮时如何不显示按钮焦点光环？

> ID：10851997
> 
> 赞同：4
> 
> 时间：2012-06-01T14:19:25.827
> 
> 标签：jquery-mobile

我使用 jQuery Mobile 在我的网络应用程序中有按钮。

单击按钮时，添加了 ui-focus 类，该类在按钮周围显示蓝色光环。该类将一直停留在那里，直到单击页面上的另一个位置。这发生在 Firefox 中，而不是 iPad。我希望不显示这个光环。

我必须怎么做才能完全不显示那个焦点光环？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T01:46:09.087

您可以覆盖默认 css 而不是破解源代码。只需确保您的 css 文件位于 JQM 文件之后。

```
.ui-focus,
.ui-btn:focus {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none ;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:23:31.150

我发现最好的方法是在单击按钮后将焦点返回到页面。

```
$('yourButtons').click(function(){
    //Do some important stuff
    // ....

    $.mobile.activePage.focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:15:02.277

那很简单，只需打开您的 xxx-mobile-theme.css 文件
并找到类**ui-focus** 并手动删除**box-shadow**属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T23:38:39.353

由于我有一个自定义提交按钮并在按钮上使用了 data-role="none" ，因此没有一个解决方案对我有用。:focus 事件仍然有蓝光，所以这对我有用。我将表单包裹在一个名为 myform 的 div 中。

```
.myform button:focus {
  outline: 0;
} 
```

# ios - 通过网页运行的 iOS 应用程序

> ID：10851999
> 
> 赞同：-2
> 
> 时间：2012-06-01T14:19:29.263
> 
> 标签：ios, web

有没有办法让用 Objective-C 编写的 iOS 应用程序从网页运行？

就像应用程序的演示一样。

我不想使用 PhoneGap 或 HTML5 重写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:39:18.577

最简洁的答案是不。

您误解了您所做的应用程序的类型。在 ios 中，您正在制作机器编码的应用程序——在 arm 处理器中运行的应用程序，在具有特定内存、存储和硬件（加速度计等）的特定触摸屏上。在网络服务器上，您正在运行从解释器（如 php、ruby、python 等）解释的脚本。

因此，唯一的方法是通过视频。在模拟器中捕获您的应用程序的使用情况，并将其作为 Flash 文件显示在您的网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:03:54.810

[pieceable.com](http://pieceable.com)的查看器允许您在 Web 浏览器中运行 iOS 应用程序