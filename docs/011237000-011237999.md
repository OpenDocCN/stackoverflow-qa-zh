# StackOverflow 问答 11237000-11237999

# php - Python 等价于 PHP 包括

> ID：11237002
> 
> 赞同：5
> 
> 时间：2012-06-28T01:33:51.677
> 
> 标签：php, python, include

我需要一个 Python 等价于 PHP 的 include 函数。我知道 execfile()，但这不一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T01:36:19.863

尝试[`import`](http://docs.python.org/reference/simple_stmts.html#the-import-statement)，使用 try/except on `ImportError`：

```
try:
    import modulename
except ImportError:
    print 'importing modulename failed' 
```

没有抓住`ImportError`它就相当于`require`, sorta-kinda。

请注意，python 只会执行*一次*模块代码（使其更像是一个`include_once`or`require_once`语句。当然，模块中的函数可以多次调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T01:40:38.310

如果您想要在脚本中将字符串变量设置为外部文件*a la* php 的内容（[示例 #6 Using output buffering to include a PHP file into a string](http://php.net/manual/en/function.include.php) ...），那么这可能有效：

```
s = open('file.abc').read() 
```

# javascript - 未在 rails 3 远程部分负载中应用淘汰赛绑定

> ID：11237003
> 
> 赞同：0
> 
> 时间：2012-06-28T01:34:03.850
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, knockout.js

我在我的应用程序加载的 js 文件中有这个视图模型：

```
var portfolioViewModel = function() {
    var self = this;
    this.selectedCompany = ko.observable('All Companies');
    this.allComp = ko.observable(true);
    this.chartSeries = ko.observableArray();
    $(function(){
        self.chart.addSeries(companyChart['All Companies']);
    });
    $.each(companyData, function(index, company) {
       self[company] = ko.observable(false);
       self.chartSeries.push(companyChart[company]);
   });

    this.chart = ko.observable();

    this.showCompany = function(company){
        self.hideCompanies();
        self[company](true);
        self.allComp(false);
        self.selectedCompany(company);
        while(self.chart.series.length > 0){
            self.chart.series[0].remove(true);
        }
        self.chart.addSeries(companyChart[company]);
    }
    this.allCompanies = function(){
        self.hideCompanies();
        self.allComp(true);
        self.selectedCompany('All Companies');
        self.chart.addSeries(companyChart['All Companies']);
        $.each(companyData, function(index, company) {
            self.chart.addSeries(companyChart[company]);
        });
    }

    this.hideCompanies = function(){
        $.each(companyData, function(i, c){
           self[c](false);
        });
        while(self.chart.series.length > 0){
            self.chart.series[0].remove(true);
        }
    }
} 
```

它根据选择的任何公司控制将系列添加到高图表图表。

在我的部分中，我有一些 HTML，然后是以下 javascript 代码块：

```
<!--SCRIPTS-->
<script type="text/javascript">
    <% companies = current_user.list_of_companies %>
    <% funding_date = current_user.first_funding_date * 1000 %>
    var companyData = <%= companies.map(&:name).to_json.html_safe %>;
    var companyChart = {};

    companyChart['All Companies'] = {
                           name: 'Total Portfolio',
                           pointInterval: <%= 1.day * 1000 %>,
                           pointStart: <%=funding_date %>,
                           data: <%= current_user.portfolio_values.group("portfolio_values.day").select("portfolio_values.day, SUM(portfolio_values.value) as totals").map(&:totals).collect{|x| x.to_i} %>
                         }

    <% companies.each do |company|%>

    companyChart['<%= company.name %>'] = {
                          name: '<%= company.name %>',
                          pointInterval: <%= 1.day * 1000 %>,
                          pointStart: <%= funding_date %>,
                          data: <%= current_user.portfolio_values.where(:company_id => company.id).map(&:value).collect{|x| x.to_i} %>
                        }

    <% end %>

    var vm = new portfolioViewModel();
    ko.applyBindings(vm);

    vm.chart = new Highcharts.StockChart({
          chart: {
                renderTo: 'chart1',
                backgroundColor: 'transparent',
                zoomType: 'xy',
                type: 'areaspline',
                style: {
                    color: '#ffffff'
                }
             },
            labels : {
                style: {
                    color: 'red'
                }
            },
            colors: [
            '#ea00ff',
            '#229aff',
            '#ff4e00',
            '#ea00ff',
            '#229aff',
            '#ff4e00',
            '#ea00ff',
            '#229aff',
            '#ff4e00',
            '#ea00ff',
            '#229aff',
            '#ff4e00'
            ],
            credits: {
                enabled: false
            },
            rangeSelector: {
                enabled: false,
                buttons: [{
                    type: 'month',
                    count: 1,
                    text: '1m'
                }, {
                    type: 'ytd',
                    text: 'YTD'
                }, {
                    type: 'all',
                    text: 'All'
                }],
                buttonTheme: { // styles for the buttons
                            fill: 'none',
                            stroke: 'none',
                            style: {
                                color: '#fff',
                                fontWeight: 'bold'
                            },
                            states: {
                                hover: {
                                    stroke: 'none',
                                    fill: 'black'
                                },
                                select: {
                                    stroke: 'none',
                                    fill: 'black',
                                    style: {
                                        color: 'white'
                                    }
                                }
                            }
                        },
                        inputStyle: {
                            color: '#fff',
                            fontWeight: 'bold',
                            borderColor:'transparent',
                            background: 'transparent'

                        },
                        labelStyle: {
                            color: 'silver',
                            fontWeight: 'bold'
                        }
            },
            navigator: {
                enabled: false,
            },
            plotOptions : {
                areaspline : {
                    lineWidth : 2,
                    fillOpacity : .2,
                    shadow:true,
                    marker : {
                        enabled : false,
                        symbol: 'circle'
                    }
                }
            },
            yAxis: {
              alternateGridColor: 'rgba(0,0,0,0.1)',
              gridLineColor: 'rgba(0,0,0,0.3)',
              lineColor: 'rgba(0,0,0,0.3)',
              lineWidth: 1,
                labels: {
                    style: {
                        color: 'rgba(255,255,255,0.6)',
                        fontWeight: 'bold'
                    }
                }
            },
            xAxis: {
                gridLineWidth: 1,
                gridLineColor: 'rgba(0,0,0,0.3)',
                type: 'datetime',
                lineColor: 'rgba(0,0,0,0.3)',
                labels: {
                    style: {
                        color: 'rgba(255,255,255,0.6)',
                        fontWeight: 'bold'
                    }
                }
            },
            scrollbar : {
                enabled : false
            },
        series: vm.chartSeries()
      });

</script>
<!--SCRIPTS--> 
```

有时会应用绑定并加载部分脚本，但很多时候它们不会。当他们没有通过对部分的远程调用加载时（即使 HTML 通过），脚本块似乎会完全丢失。

我什至不确定如何开始调试。有没有人看到任何明显的错误？我对javascript很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:04:27.800

通常，如果有任何类型的 javascript 错误停止执行以后的 javascript，这将阻止您的 ko 模型加载，或者导致它仅加载一部分。我建议将 Firebug 与 Firefox 或类似的东西一起使用，以检查导致问题的 javascript 错误。

此外，“gon”gem 是从 Rails 模型中获取信息到 javascript 中的好方法。我还喜欢将 rabl gem 与 .json.rabl 模板一起用于 ajax 请求以更新淘汰模型。

# twitter - Twitter 搜索小部件仅显示最近的推文

> ID：11237004
> 
> 赞同：2
> 
> 时间：2012-06-28T01:34:31.553
> 
> 标签：twitter

我们正在尝试在我们的网站中使用 Twitter 搜索小部件：[Twitter 小部件](https://twitter.com/about/resources/widgets/widget_search)

但是，它似乎只显示最新的推文。

例如，如果使用以下搜索查询，我们只返回过去 25 小时内发布的 4 个结果，但没有更早的结果：from:CorkBoston since:2010-01-01

这是一个限制吗？我在任何文档中都没有看到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:33:24.827

这是他们的局限：

*   `The Search API is not complete index of all Tweets, but instead an index of recent Tweets. At the moment that index includes between 6-9 days of Tweets.`

*   `You cannot use the Search API to find Tweets older than about a week.`

[https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

# ios - 如何确定该用户是第一次运行该应用程序？

> ID：11237008
> 
> 赞同：6
> 
> 时间：2012-06-28T01:35:22.107
> 
> 标签：ios, xcode

我最近遇到了我的 iOS 应用程序的问题。在我的应用程序中，第一次运行时会出现一个指令视图，然后从那时起隐藏。我怎样才能实现这个效果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T04:47:31.967

尝试使用此功能：

```
- (BOOL) isFirstRun
{
  NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  
  if ([defaults objectForKey:@"isFirstRun"])
  {
    return NO;
  }

  [defaults setObject:[NSDate date] forKey:@"isFirstRun"];
  [[NSUserDefaults standardUserDefaults] synchronize];  

  return YES;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T01:38:10.607

在您的应用程序委托中检查用户默认值中的键（您自己的自定义键，例如“AppWasAlreadyStartedPrevious”）。如果密钥尚不存在，则为第一次运行。您可以显示您的指令视图并将密钥添加到用户默认值。下次用户启动应用程序时，您会在用户默认值中找到密钥，并且知道这不是第一次运行。

请参阅[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T01:43:21.647

每次启动应用程序时存储一个文件并检查该文件是否存在。如果 tr 文件不存在，则显示介绍，然后创建文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T01:47:21.940

我认为唯一的方法是将一个值存储到一个指定的文件中，在运行应用程序时，您应该先检查该值，然后您可以处理应用程序是否已经运行的结果。

# entity-framework - 性能：LinqPad 和 Entity Framework 为相同的 Linq 请求生成不同的 SQL

> ID：11237010
> 
> 赞同：3
> 
> 时间：2012-06-28T01:35:26.617
> 
> 标签：entity-framework, linqpad

我想我从 LinqPad 文档中了解到，它使用与实体框架不同的 linq 到 tsql 转换器。LinqPad 实际上至少在一种情况下更有效！这是详细信息：

LinqPad 生成以下简单的 sql 查询：

```
SELECT [t0].[personId]
FROM [Person] AS [t0]
WHERE (NOT (([t0].[deleted]) = 1)) AND ([t0].[masterPersonId] = @p0)
ORDER BY [t0].[personId] DESC 
```

对于这个 C# linq 代码：

```
int? state = null;
string realmId = null;
int? reviewerId = null;
bool? deleted = false;
long? parentPersonId = 1275660779659;

var query = from person in Persons
     where 
     (!deleted.HasValue || person.Deleted == deleted) && 
     (!state.HasValue || person.personState == state) &&
     (!parentPersonId.HasValue || person.masterPersonId == parentPersonId) && 
     (realmId == null || person.realmId == realmId) &&
     (reviewerId == null ||(person.reviewerId == reviewerId ))
     orderby person.personId descending
     select person.personId; 
```

所以你可以看到 LinqPad 翻译了上面的 linq 语句，并在参数值为 null 时删除了无关的 sql。好的！

然而，无论空参数如何，EF*总是会生成这个：*

```
SELECT 
[Extent1].[personId] AS [personId]
FROM [dbo].[Person] AS [Extent1]
WHERE (@p__linq__0 IS NULL OR [Extent1].[deleted] = @p__linq__1) AND 
(@p__linq__2 IS NULL OR [Extent1].[personState] = @p__linq__3) AND 
(@p__linq__4 IS NULL OR [Extent1].[masterPersonId] = @p__linq__5) AND 
(@p__linq__6 IS NULL OR [Extent1].[realmId] = @p__linq__7) AND 
((@p__linq__8 IS NULL) OR ([Extent1].[reviewerId] = @p__linq__9)) 
```

它使查询速度变慢。我们希望使用 LinqPad 为 EF 评估生成的 sql，但如果结果不同，显然不会。看起来我们可以针对 LinqPad 中的 EF 连接的自定义程序集。我会尝试一下，看看我们是否至少可以将 sql 查询放在一起。

有人曾经走过这条路或知道我们可以利用的 EF 设置吗？我们正在运行 EF4。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:37:56.220

我从 LinqPad 的作者那里找到了这个出色的网络广播，他在其中提到了这个问题。 [http://oreilly.com/pub/e/1295](http://oreilly.com/pub/e/1295)

我使用的是 Linq To SQL 翻译而不是 EF。

# events - 为什么 node.js 将传入的数据分成块？

> ID：11237015
> 
> 赞同：2
> 
> 时间：2012-06-28T01:35:45.333
> 
> 标签：events, node.js, loops

node.js 中的以下代码不会在括号内记录所有传入数据，而是将数据分成块。例如，如果输入数据是 ABCDEF...XYZ，它会将数据记录为 [ABC][DEF]...[XYZ] 而不是 [ABCDEF...XYZ]。当然，数据要大得多，字母表只是一个例子。

我应该如何写这个，以便所有传入的数据都记录在括号内而不是部分？

```
chatServer.on('connection', function(client) 
{
    client.on('data', function(data) 
    {
        console.log('[' + data.toString() + ']');
    })    
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T01:47:39.533

好吧，您的数据以数据包的形式到达，因此（在这种情况下）您应该将数据包连接到您在函数外部定义的变量中。

```
buffer = '';

chatServer.on('connection', function(client) 
{
    client.on('data', function(data) 
    {
        buffer += data.toString();
    })    
});

console.log('[' + buffer + ']'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T01:57:59.777

正如 matthewdavidson 所说，您订阅的是发送的每一个“块”数据，而不是整个消息。您更有可能希望在函数内的闭包中捕获数据并仍然异步响应。尝试以下操作：

```
chatServer.on('connection', function(client) 
{
    var buffer = '';

    client.on('data', function(data) 
    {
        buffer += data;
    })

    client.on('end', function(){
        console.log('[' + buffer + ']');
    })
}); 
```

结帐[http://www.nodebeginner.org/#handling-post-requests](http://www.nodebeginner.org/#handling-post-requests)了解更多信息

# iphone - 区分 iPad 和 iPhone 的 Web 图标

> ID：11237019
> 
> 赞同：3
> 
> 时间：2012-06-28T01:36:26.000
> 
> 标签：iphone, ipad, favicon, retina-display

有没有办法说 iPad 使用一个图标，iPhone 使用另一个图标？我知道的唯一最喜欢的图标代码是，`<link rel="apple-touch-icon" href="icon.jpg">`但这只是通用的 Apple，并没有指定设备。而且我认为由于较新的 iPhone 和 iPad 具有视网膜显示屏，因此我也需要一个 diff webapp 图标，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T04:56:09.390

当然，来自优秀的[图标手册](http://iconhandbook.co.uk/reference/examples/favicons/)：

```
<!-- For iPhone 4 Retina display: -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">

<!-- For iPad: -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">

<!-- For iPhone: -->
<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-57x57-precomposed.png"> 
```

# django - https://example.com/admin 在 Django Nginx 和 gunicorn 中重定向到 https://admin

> ID：11237023
> 
> 赞同：2
> 
> 时间：2012-06-28T01:37:05.573
> 
> 标签：django, https, nginx, gunicorn

整个应用程序使用 SSL（在生产中）与 Django + Nginx + Gunicorn 一起工作。但是当我尝试通过[https://example.com/admin](https://example.com/admin)访问 django-admin 页面并尝试登录时，它会将我重定向到（[https://admin](https://admin)）。

PS：对不起一个愚蠢的问题。任何输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:20:35.523

这听起来非常类似于[Django 的 HttpResponseRedirect 似乎剥离了我的 subdomain](https://stackoverflow.com/q/1457006/647002)。

如果是这样，可能的问题是您的 nginx 代理或 Gunicorn 没有将域名 (HTTP_HOST) 传递给 Django。通过检查 Django 中的 request.META 进行验证。

# xcode - 如何制作Spotify ipad应用程序登录屏幕Xcode

> ID：11237027
> 
> 赞同：-1
> 
> 时间：2012-06-28T01:37:30.323
> 
> 标签：xcode, animation, spotify

我如何在 xcode 中创建一个视图，如 spotify 登录窗口，图像在背景中像旋转木马一样移动

![登录应用程序的图像](../Images/452bee009408ae86862a840fffe69680.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:56:22.517

看起来他们有许多带有 alpha 和翻译动画的图像视图。随着图像向左移动，图像视图的 alpha 值会降低。平移动画是向左移动的图像。它看起来也像这样应用于 UIImageViews 的 CATransform3D 变换：

```
#import <Quartzcore/Quartzcore.h>
---------------------------------
UIImageView *albumCoverImageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"Black Eyed Peas Album"]];
CALayer *layer = albumCoverImageView.layer;
CATransform3D perspectiveTransform = CATransform3DIdentity;
perspectiveTransform.m34 = 1.0 / -1000;
perspectiveTransform = CATransform3DRotate(perspectiveTransform, 45.0f * M_PI / 180.0f, 0.0f, 1.0f, 0.0f);
layer.transform = perspectiveTransform; 
```

总之：

*   专辑封面从右到左的慢速翻译动画
*   图像的 Alpha（不透明度）随着图像从右向左移动而降低
*   使用 CATransform3D 进行透视变换

希望这可以帮助！

# php - 使用 apiClient 添加 Google 日历

> ID：11237029
> 
> 赞同：0
> 
> 时间：2012-06-28T01:37:38.640
> 
> 标签：php, insert, google-calendar-api

我终于能够获得访问令牌，现在我很困惑如何仅使用 Google 提供的 apiClient 添加日历。

```
$apiClient = SiteController::getApiClient();

$service = new apiCalendarService($apiClient);

$calendar = new Calendar();
$calendar->description = "What";

$service->calendars->insert($calendar); 
```

这会产生：

```
Error calling POST https://www.googleapis.com/calendar/v3/calendars?key=mykey: (400) Required 
```

是否有一些关于添加日历的文档/示例？似乎有很多例子可以简单地添加一个事件。

* * *

我现在离我更近了，我明白了

```
apiServiceException

Error calling POST 

https://www.googleapis.com/calendar/v3/users/me/calendarList?key=mykey: (404) Not Found 
```

使用他们在文档中提供的样板代码

```
$calendarListEntry = new CalendarListEntry();
$calendarListEntry->setId("calendarId");

$createdCalendarListEntry = $service->calendarList->insert($calendarListEntry);

echo $createdCalendarListEntry->getSummary(); 
```

* * *

[在谷歌日历 API v3 中插入​​新的 calendarEntry 会返回 404](https://stackoverflow.com/questions/11052792/inserting-a-new-calendarentry-in-google-calendar-api-v3-returns-a-404)

如何更改我的请求 URL 从

```
https://www.googleapis.com/calendar/v3/users/me/calendarList?key=mykey 
```

到

```
https://www.googleapis.com/calendar/v3/calendars 
```

* * *

这有效： // 创建新日历 $apiClient = SiteController::getApiClient();

```
 $service = new apiCalendarService($apiClient);

        $calendar = new Calendar();
        $calendar->setSummary(Home::model()->count() . '-' . $model->name);

        $createdCalendar = $service->calendars->insert($calendar); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:11:01.327

您可以参考[Google Calendar API v1 Developers' Guide](https://developers.google.com/google-apps/calendar/v1/developers_guide_php)。

# c++ - C/C++ 中的正向和反向 Gabor 变换库

> ID：11237030
> 
> 赞同：2
> 
> 时间：2012-06-28T01:37:45.240
> 
> 标签：c++, c, signal-processing

我想知道是否存在用于*正向和反向 Gabor 变换*的高度优化的 C/C++ 库（[维基百科链接](http://en.wikipedia.org/wiki/Gabor_transform)）。这**与**通常应用于图像的 Gabor 过滤器不同。该库可以是封闭的，也可以是 FOSS/开源的，但我更喜欢后者，因为我正在研究一个研究应用程序。

我正在实施[Seismic Inverse Q 滤波](http://www.scribd.com/doc/45448335/SEISMIC-INVERSE-q-FILTERING)书中的逆 Q 滤波算法（参见第 125 页）。作者似乎喜欢使用 Gabor 变换。

需要正向和逆变换，因为一些操作是在频域信号上计算的，而逆变换用于计算离散的时域信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:03:29.367

据我所知，没有专门的库来计算 Gabor 变换 (GT)。与连续小波变换 (CWT) 类似，GT 只能在一定程度上近似，因为它被定义为时间和频率连续函数。

但是，可以使用标准工具来获得 GT 的近似值。通常的方法，类似于 CWT，是在傅立叶空间中实现这些变换。GT 和 CWT 一样，本质上只是一个滤波器组。对于 GT，您将计算 FFT，乘以 GT 内核的傅里叶变换，这是一个以所需频带为中心的高斯，然后计算每个频带的逆 FFT。

[本文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.19.7500)介绍了基于 IIR 滤波器组的 GT 的另一个很好的近似值。此方法也可以使用标准工具（MatLab、SciPy 等）实现

我很好奇，你的目标是什么科学应用？通常 CWT 是更好的选择，因为它尊重自然缩放行为并且具有更高程度的对称性，特别是在膨胀下它是不变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-17T08:39:23.133

对于 2022 年，有一个库工具箱[LTFAT](http://ltfat.org/)，带有 matlab/octave/python 接口和支持 1D/2D 正向和反向 gabor 变换的 ac 后端。

# javascript - 在移动设备上选择文本时覆盖本机行为

> ID：11237032
> 
> 赞同：6
> 
> 时间：2012-06-28T01:37:55.473
> 
> 标签：javascript, android, ios

我想知道当您在移动浏览器上选择文本时是否有办法覆盖本机行为。我试图通过提供自己的操作栏来支持 iPhone 和 Android 设备。

有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:01:30.220

尽管您可以非常简单地使用`selectionchange`事件来显示您的“操作栏”以及本机功能，但如果您想“替换”本机行为，您需要从头开始伪造整个选择或使用`selectionchange`事件和第二个例如，选择是让您使用彩色 span 元素包装所选文本并取消实际选择（同时显示您的操作栏），这种方法的问题在于 1）本机操作栏可能会显示一秒钟和 2）体验将不同于用户习惯的可能产生危险影响的体验。另一方面，如果您想从头开始选择，您应该使用`user-select`css 属性来禁用文本选择，然后根据 touchstart 和 thouchend 找出要“选择”的文本（带有彩色跨度）（实际上只有在极其受控的环境中才有可能（例如纯文本阅读器应用程序））。

请注意，这在 Firefox 和 Opera 中不起作用，因为`selectionchange`事件不会在那里触发，您需要`touchend`在文档上使用事件处理程序 + 停止所有其他 touchend 事件的冒泡以支持 opera mobile 和 firefox mobile。（功劳`select`归于`selectionchange`Tim Down）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:31:11.423

**参考：**

[**带有插件的 jsFiddle 演示**](http://jsfiddle.net/ebEqu/1/)

我制作的上述 jsFiddle Demo 使用插件来允许您***防止***在**Android**或**iOS**设备（以及桌面浏览器）中选择任何文本块。

这不会**干扰**您可能拥有的其他标记，例如`.click();`jsFiddle 中演示的 jQuery 事件侦听器。

它很容易使用，这里是安装 jQuery 插件后的示例标记。

**示例 HTML：**

```
<p class="notSelectable">This text is not selectable</p>

<p> This text is selectable</p> 
```

**示例 jQuery：**

```
$(document).ready(function(){

   $('.notSelectable').disableSelection();

}); 
```

**完整的 jQuery 插件：**

```
$.fn.extend({
    disableSelection: function() {
        this.each(function() {
            this.onselectstart = function() {
                return false;
            };
            this.unselectable = "on";
            $(this).css('-moz-user-select', 'none');
            $(this).css('-webkit-user-select', 'none');
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:01:36.830

如果您的目标是防止选择，您可以使用一些 CSS，例如

```
body 
{ 
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
} 
```

# c - 原子变量可以替换 pthread_rwlock 吗？可以无锁吗

> ID：11237036
> 
> 赞同：1
> 
> 时间：2012-06-28T01:38:43.630
> 
> 标签：c, linux, pthreads, atomic, lock-free

我有一些线程要写入资源，有些线程要读取它。但是 pthread_rwlock 会导致很多上下文切换。所以我想了一种方法来避免它。但我不确定它是否安全。

这是代码：

```
sig_atomic_t slot = 0;

struct resource {
    sig_atomic_t in_use;  /*Counter,if in_use, not zero*/
    .....
} xxx[2];

int read_thread()
{
    i = slot; /*avoid slot changes in process */
    xxx[i].in_use++;
    read(xxx[i]);
    xxx[i].in_use--;
}

int write_thread()
{
    mutex_lock;  /*mutex between write threads */

    if (slot == 0) {
    while(xxx[1].in_use != 0);  /*wait last read thread in slot 1*/
    clear(xxx[1]);
    write(xxx[1]);
    slot = 1;
    } else if (slot == 1) {
    while(xxx[0].in_use != 0);
    clear(xxx[0]);
    write(xxx[0]);
    slot = 0;
    }

    mutex_unlock;
} 
```

这行得通吗？成本是 2 倍存储和 3 个原子变量。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:45:01.377

你的算法不是无锁的；作者使用自旋锁。

真的有必要做双缓冲和自旋锁吗？您可以改为`(slot ^ 1)`用作写入槽和`slot`读取槽吗？写入后，作者将自动更改 的值`slot`，从而“发布”其写入。您可以通过这种方式连续多次读取同一个插槽，但如果这不是您想要的语义，那么您应该使用队列。

顺便说一句， a`sig_atomic_t`不提供多线程所需的原子性类型。至少，您应该声明`slot`为`volatile sig_atomic_t`，并在读写时使用内存屏障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:01:17.583

您的策略是让作者写入与读者阅读内容不同的插槽。并且您在写入完成后切换读取槽号。但是，您将参加比赛。

```
slot    reader             writer1            writer2
----    ------             -------            -------
0                          mutex_lock
        i = 0
                           ... slot=1
1                          mutex_unlock       mutex_lock
                                              ... clear(xxx[0])
        xxx[0].in_use++
        read(xxx[0])                          write(xxx[0]) 
```

但是，总的来说，这种策略可能会导致作家挨饿（即作家可能永远旋转）。

但是，如果您愿意容忍这种情况，那么 let`xxx[]`是一个由 2 个指针组成的数组会更安全`resource`。让读者随时阅读`xxx[0]`，让作者争相更新`xxx[1]`。当编写器完成更新时，它会在和`xxx[1]`上使用 CAS 。`xxx[0]``xxx[1]`

```
struct resource {
    sig_atomic_t in_use;  /*Counter,if in_use, not zero*/
    sig_atomic_t writer;
    .....
} *xxx[2];

void read_thread()
{
    resource *p = xxx[0];
    p->in_use++;
    while (p->writer) {
        p->in_use--;
        p = xxx[0];
        p->in_use++;
    }
    read(*p);
    p->in_use--;
}

void write_thread()
{
    resource *p;
    mutex_lock;  /*mutex between write threads */
    xxx[1]->writer = 1;

    while(xxx[1]->in_use != 0);  /*wait last read thread in slot 1*/
    clear(xxx[1]);
    write(xxx[1]);
    xxx[1] = CAS(&xxx[0], p = xxx[0], xxx[1]);
    assert(p == xxx[1]);

    xxx[0]->writer = 0;
    mutex_unlock;
} 
```

如果您想避免写入器饥饿，但又想要自旋锁的性能，那么您正在考虑使用自旋锁而不是互斥锁来实现自己的读取器/写入器锁。谷歌搜索“读写自旋锁实现”指向[这个页面](http://locklessinc.com/articles/locks/)，我发现这是一个有趣的阅读。

# asp.net-mvc - 如何在单个 MVC EF 查询中使用 2 个包含语句？

> ID：11237047
> 
> 赞同：2
> 
> 时间：2012-06-28T01:41:03.933
> 
> 标签：asp.net-mvc, entity-framework, jsonresult

我正在尝试编写一个包含 2 个连接的查询。

*   1 StoryTemplate 可以有多个故事
*   1 个故事可以有多个 StoryDrafts

我开始对 StoryDrafts 对象进行查询，因为这是它链接到 UserId 的地方。

我没有从 StoryDrafts 对象直接到 StoryTemplates 对象的引用。我将如何正确构建此查询？

```
 public JsonResult Index(int userId)
    {
        return Json(
            db.StoryDrafts
                .Include("Story")
                .Include("StoryTemplate")
                .Where(d => d.UserId == userId)
            ,JsonRequestBehavior.AllowGet);
    } 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:06:47.860

如果它适合您，请尝试扁平化您的层次结构。这是一个示例，您可能希望根据需要对其进行自定义。

```
var result = from c in db.Customers
                    join o in db.Orders 
                    on c equals o.Customers
                    select new
                               {
                                   custid = c.CustomerID,
                                   cname = c.CompanyName,
                                   address = c.Address,
                                   orderid = o.OrderID,
                                   freight = o.Freight,                                   
                                   orderdate = o.OrderDate

                               }; 
```

如果**奉承不符合您的要求**，那么您需要**使用返回**[嵌套组](http://msdn.microsoft.com/en-us/library/bb545974.aspx)的查询。最后，查看以下链接以获取更多参考 - [LINQ 查询表达式](http://msdn.microsoft.com/en-us/library/bb397676)。

# homebrew - 自制符号链接错误

> ID：11237048
> 
> 赞同：86
> 
> 时间：2012-06-28T01:41:08.900
> 
> 标签：homebrew

我正在尝试使用以下方法安装 memcached：

```
brew install memcached 
```

这以关于自制软件无法创建符号链接的错误结束：

```
The linking step did not complete successfully
The formula built, but is not symlinked into /usr/local 
```

帮助！

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-06-28T01:41:09.757

我卸载了迄今为止安装的自制软件（libevent 依赖项）：

```
brew uninstall libevent 
```

然后 chow-ned usr/local 目录：

```
sudo chown -R $(whoami) /usr/local 
```

然后尝试再次安装 memcached 并且成功了：

```
brew install memcached 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2017-11-10T17:59:20.527

从 High Sierra 开始，/usr/local 不再支持 chown。[Homebrew 问题](https://github.com/Homebrew/brew/issues/3228)中建议的新程序是：

```
sudo chown -R $(whoami) $(brew --prefix)/* 
```

仅供参考：如果缺少所需的 /usr/local 子文件夹（例如 ./include 或 ./Frameworks），您必须先 mkdir 它们

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-10-05T14:52:46.403

感谢您更新您自己的问题，这对我帮助很大。`/usr/local`由于我已经在管理员组中，因此我通过将所有位置都设为可写分组来解决此问题。

为此，只需使用以下命令

```
sudo chmod -R g+w /usr/local 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-02-19T11:09:08.633

在我执行@septerr 回答中的建议后，我仍然无法通过自制软件安装迦太基......经过一些谷歌搜索后我发现了这个：Gist [https://gist.github.com/dalegaspi/7d336944041f31466c0f9c7a17f7d601](https://gist.github.com/dalegaspi/7d336944041f31466c0f9c7a17f7d601)

无论如何......得到这个：

`Error: An unexpected error occurred during the 'brew link' step The formula built, but is not symlinked into /usr/local Permission denied @ dir_s_mkdir - /usr/local/Frameworks Error: Permission denied @ dir_s_mkdir - /usr/local/Frameworks`

做过这个：

`sudo chown -R $(whoami) $(brew --prefix)/*`

和

`sudo install -d -o $(whoami) -g admin /usr/local/Frameworks`

之后能够成功安装迦太基

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-18T18:27:53.110

似乎自 El Capitan 以来，/usr/local 中的文件权限已更改，导致我出现上述问题。

而不是选择的解决方案，我建议做一个：

```
sudo chown -R :staff /usr/local 
```

这将适用于所有用户

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-16T12:54:57.383

防止符号链接错误

`brew install pyenv`

在 macOS Big Sur 11.6.2 上。

@sean-denigris 建议的解决方案有效

`sudo chown -R $(whoami) $(brew --prefix)/*`

在此之前，我尝试过@marko 提出的解决方案

`sudo chmod -R g+w /usr/local`

这给出了以下错误

`chmod: Unable to change file mode on /usr/local: Operation not permitted`

# sql - 如果在 SELECT 语句中连接两个表，表列上的所有索引都不能再使用了？

> ID：11237053
> 
> 赞同：0
> 
> 时间：2012-06-28T01:41:54.620
> 
> 标签：sql, indexing

假设我们有：

```
 SELECT * 
    FROM Pictures 
    JOIN Categories ON Categories.CategoryId = Pictures.CategoryId
   WHERE Pictures.UserId = @UserId
ORDER BY Pictures.UploadDate DESC 
```

在这种情况下，数据库首先连接两个表，然后在派生表上工作，我认为这意味着单个表上的索引将没有用，除非您能想出一个绑定到某个列的索引派生表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:26:19.543

您对 SQL 的工作原理有一个根本性的误解。SQL 语言指定应返回的结果集。它没有说明数据库应该如何实现这些结果。

由数据库引擎来解析语句并提出一个执行计划（希望是一个有效的计划）来产生正确的结果。许多现代关系数据库都有复杂的查询优化器，可以完全分离语句并派生似乎与原始查询没有关系的执行计划。（至少对未经训练的人来说不是）

如果引擎使用基于成本的优化器，同一查询的执行计划甚至会随着时间而改变。基于成本的优化器根据已收集的有关数据和索引的统计信息做出决策。随着统计数据的变化，执行计划也会发生变化。

通过您的简单查询，您假设数据库必须在应用 where 子句之前连接表并创建一个临时结果集。这可能是您对问题的看法，但数据库可以自由地以完全不同的方式实现它。我怀疑有很多（如果有的话）数据库会为您的简单查询创建临时结果集。

这并不是说您永远无法预测何时可以使用或不使用索引。但是需要实践和经验才能了解数据库*如何*执行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T02:12:38.657

如果图片的“CategoryId”在表“Categories”的 CategoryId 字段中，这将加入为您提供所有类别信息的表。（如果没有此类类别，则没有特定“图片”的结果）

此查询可能会返回几行数据。无论您要访问哪个表，任一表的索引都会很有用。

通常你的程序会循环遍历结果集。

CategoryId 将为您提供具有该类别中所有相关字段的类别中的行，并且“Picture.Id”（假设有这样一个字段）将为您提供对数据库中该确切图片行的引用。

然后，您可以使用相关索引“UPDATE Categories SET .... WHERE CategoryId =” + “UPDATE Pictures ..... WHERE PictureId =" + 或某些类似的索引来操作任一表，具体取决于您的编程环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:48:51.140

索引由优化器使用，这取决于查询中发生的情况。对于发布的查询，没有什么可以阻止索引被使用。但是，并非所有数据库的操作都相同——MySQL 只允许每个 SELECT 使用一个索引（检查查询计划，因为优化器可能会解释 JOIN 以便可以使用另一个索引）。

可能确保无法使用索引的东西是改变数据的任何功能/操作。IE：让月份/等日期过期，在 LIKE 子句的左侧通配符......

# python - 有没有更简单的方法来分类显示我的对象？

> ID：11237058
> 
> 赞同：1
> 
> 时间：2012-06-28T01:42:52.800
> 
> 标签：python, django, django-templates, django-views

我有两个这样的模型：

```
class ClassA(models.Model):
    ida = models.AutoField(primary_key=True)
    classb = models.ForeignKey(ClassB)
    name = models.CharField(max_length=765)

class ClassB(models.Model):
    idb = models.AutoField(primary_key=True)
    name = models.CharField(max_length=765) 
```

我想显示一个标题`ClassA`下分组的所有对象的列表。`ClassB`这是我的观点：

```
def show_class_a_objects(request):
    class_b_objects = ClassB.objects.all().order_by('name')
    class_a_objects = ClassA.objects.all().order_by('name')
    return render_to_response('show_objects.html', {
        'class_a_objects': class_a_objects, 'class_a_objects': class_a_objects, 
    }) 
```

我的`show_objects.html`文件如下所示：

```
{% extends "base_show.html" %}
{% block content %}
</p>
<table>
<th align="left">Name</th>
{% for b in class_b_objects %}
    <tr>
    <td>{{b.name}}</td>
    </tr>
    {% for a in class_a_objects %}
        {% ifequal a.classb b %}
        <tr>
        <td><a href="{{ a.get_absolute_url }}">{{a.name}}</a></td>
        </tr>
        {% endifequal %}
    {% endfor %}
{% endfor %}
</table>
</br>
{% endblock %} 
```

有没有更好的方法来代替使用两个嵌套的 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:56:47.157

```
def show_class_a_objects(request):
    class_b_objects = ClassB.objects.all().order_by('name')
    class_a_objects = ClassA.objects.all().order_by('name') 
```

您不需要像这样查询 ClassA 对象来实现您想要的分组。当您在 ClassA -> ClassB 上创建 ForeignKey 时，您的 ClassB 将包含一个关系，该关系将为您返回所有具有 ClassB 作为 ForeignKey 的 ClassA 对象：

**看法**

```
def show_class_a_objects(request):
    class_b_objects = ClassB.objects.all().order_by('name')
    return render_to_response('show_objects.html', {
        'class_b_objects': class_b_objects, 
    }) 
```

**模板**

```
{% for b in class_b_objects %}
    <tr>
    <td>{{b.name}}</td>
    </tr>
    {% for a in b.classa_set.all %}
        <tr>
        <td><a href="{{ a.get_absolute_url }}">{{a.name}}</a></td>
        </tr>
    {% endfor %}
{% endfor %} 
```

您仍然需要一个嵌套的 for 循环，但您不再需要遍历每个其他类的整个范围并进行比较以找到正确的类。

如果你想要更多的控制，你应该再次将它移动到你的视图中并预先构建字典：

**看法**

```
def show_class_a_objects(request):
    class_b = ClassB.objects.all().order_by('name')
    class_b_objects = [(b, b.classa_set.all().order_by('name')) for b in class_b]
    return render_to_response('show_objects.html', {
        'class_b_objects': class_b_objects
    }) 
```

**模板**

```
{% for b, a_list in class_b_objects %}
    <tr>
    <td>{{b.name}}</td>
    </tr>
    {% for a in a_list %}
        <tr>
        <td><a href="{{ a.get_absolute_url }}">{{a.name}}</a></td>
        </tr>
    {% endfor %}
{% endfor %} 
```

**更新：减少查询数量**

根据评论，我想解决将数据库查询量从原来的 2 增加到`1 + num_of_classb_objects`. 这是因为当原始 ClassB 查询为 1 时，每个`b.classa_set.all()`关系调用都是另一个查询，用于获取相关的 ClassA 实例。

如果您想尝试并测试替代方案，您可以查看这篇关于[高效反向查找的博客文章](http://blog.roseman.org.uk/2010/01/11/django-patterns-part-2-efficient-reverse-lookups/)

示例（改编自您的型号名称的链接）：

```
qs = ClassB.objects.all()
obj_dict = dict([(obj.id, obj) for obj in qs])
objects = ClassA.objects.filter(classb__in=qs)
relation_dict = {}
for obj in objects:
    relation_dict.setdefault(obj.classb_id, []).append(obj)
for id, related_items in relation_dict.items():
    obj_dict[id]._related_items = related_items 
```

此外，如果您正在运行 django >= 1.4，则此功能应该是官方的[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related).

我没有对此进行测试，但我想将其呈现为您可以查看的内容，如果`n+1`您不接受查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:22:43.743

为了避免通过反向关系访问每组而产生大量查询`A`，您可以执行以下操作：

```
>>> from itertools import groupby
>>> alla = ClassA.objects.filter().order_by('classb').select_related('classb')
>>> groups = []
>>> for key,group in groupby(alla, lambda a: a.classb_id):
...     groups.append(list(group)) 
```

现在你有了一个可迭代的迭代！我们专注于具有外键的类仅仅是因为您只需要执行一个查询（这更复杂，但从长远来看可以节省您的时间）。上面发生的事情是，我们正在对列表进行排序`A`，`B`然后将每个列表保存`A`到它自己的列表/可迭代中。由于`A`能够访问`B`，因此您无需担心遍历`B`.

```
>>> for g in groups:
...     print g[0].classb # this is your grouping/header
...     print g           # this is a list of your classa instances 
```

如果您想通过生成器减少迭代次数，您可以变得更花哨，但我发现通过关注带有 的模型`ForeignKey`，您可以在视图中以更复杂的代码为代价获得更好的 SQL 性能。复杂性（IMO）可以忽略不计，因为大量的 SQL 查询可能会导致您的应用程序死亡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:54:58.023

也许你可以[`ManyToManyField()`](https://docs.djangoproject.com/en/dev/ref/models/fields/#manytomanyfield)在你的`class B`模型中包含多个`class A`对象`object B`。这样您只需调用该字段即可获取`class A`具有相同值的所有对象`class B`。

# sql - 不想排序但最后想要空值

> ID：11237059
> 
> 赞同：0
> 
> 时间：2012-06-28T01:43:02.317
> 
> 标签：sql, tsql

我想按 id asc、date asc 排序，但在有 NULL 的情况下，我希望这些值最后。因此，在下面的示例中，我真的想 1\. 按 id 排序，2\. 按日期排序，其中值不为空，然后 3) 按日期排序，最后列出值为 NULL 的行。

```
id  date       value
A12 6/21/2012  125
A12 6/15/2012  NULL
B11 5/28/2011  100
C12 4/23/2012  168 
```

如何对值列进行排序，以使 NULL 值位于最后，而不对非空值进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:55:03.387

试试这个：

```
SELECT id, date, value
FROM mytable
ORDER BY id, (CASE WHEN value IS NULL THEN 1 ELSE 0 END), date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:52:14.853

在对非空值进行排序后，您可以使用`UNION`运算符将​​空值附加到结果集的底部：

```
SELECT id, date, value
FROM tbl
WHERE value IS NOT NULL
ORDER BY id, date

UNION ALL

SELECT id, date, value
FROM tbl
WHERE value IS NULL
ORDER BY id, date 
```

# android - 即使我强制停止应用程序，whatsapp 服务如何重新启动？

> ID：11237064
> 
> 赞同：26
> 
> 时间：2012-06-28T01:43:35.500
> 
> 标签：android, service, background, whatsapp

我在设备 A 上运行 whatsapp（从现在开始我们可以称之为 appX）。我去管理应用程序 -> 强制关闭，所以 appX 被关闭，我不再将 appX 视为正在运行的服务。

现在，5 分钟后，我从另一台设备的 appX（设备 B）向设备 A appX（我们杀死它的那个）发送了一条消息。以下是我测试的 2 个场景：

*   带有 android 2.1 的设备 A：它永远不会收到消息，因此我们可以说所有 appX 服务都没有重新启动。如果用户手动重新启动应用程序，它只会收到消息。

*   带有 android 2.3.6 的设备 A：出于某种神奇的原因，无论 appX 被杀死后多久，只要我们从设备 B 发送消息 - > 设备 A 收到消息，appX 的服务就会重新启动。注意：在 appX 关闭并且没有收到任何通知的情况下，我无法在管理应用程序中看到任何正在运行的 appX 服务，因此这意味着这个神奇的服务会在收到消息/通知后立即重新启动

我知道这听起来很奇怪，很多人会说这是不可能的，但同样，这已经在这两种设备上进行了测试。

我正在尝试完成同样的行为，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-28T05:55:19.983

> 在您对此答案投赞成票/反对票之前，请考虑到该答案现在已经将近 3 年了（说到 2015 年 5 月），情况可能已经改变！

我认为这里发生的事情并不神奇！它只是 Android C2DM（请参阅：[https](https://developers.google.com/android/c2dm/) ://developers.google.com/android/c2dm/ ），而应用程序已注册`Receiver`传入推送通知并被此消息唤醒。Android C2DM 是/曾经在 Android 2.2 中可用，这就是为什么在 Android 2.1 启动并运行的设备上看不到相同行为的原因。

顺便说一句：如您所见，自 2012 年 6 月 26 日起，C2DM 已被弃用。因此，应该使用 GCM 而不是 C2DM（参见：http: [//developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)）

有用的评论：GCM 需要可用的互联网连接。通过此限制，您可以使用任何其他广播接收器，例如 SMSReceiver。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-09T09:54:31.697

从**Android 3.1** (API 12) 开始，**如果应用程序被强制停止，它将不会重新启动，直到用户再次手动运行该应用程序**。

即使应用程序包含 a`Service`或 active ，也会发生这种情况`BroadcastReceiver`。

[你可以在这里](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)找到官方文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-09T11:33:02.460

我不知道 WhatsApp 服务。

但是有可能在强制停止应用程序后，重新启动应用程序的服务。

我为我的聊天应用程序使用[START_STICKY](http://developer.android.com/reference/android/app/Service.html#START_STICKY)服务。我必须做同样的事情，所以我使用 START_STICKY 服务，所以当我的应用程序终止或强制停止设置时，几秒钟后我的服务重新启动，我能够登录到我的 xmpp 服务器并接收传入消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-14T05:41:16.060

这里没什么神奇的 appX 通过 android GCM 平台[https://developer.android.com/google/gcm/index.html](https://developer.android.com/google/gcm/index.html)在 GCM 中使用推送通知应用程序注册广播接收器，广播接收器在获取推送通知时启动服务. Android GCM 依赖于 android 2.2 及更高版本上可用的 google play 服务，因此您在 2.1 设备上看不到该消息

# sql - SQL LEFT JOIN 发现非零值为零

> ID：11237066
> 
> 赞同：1
> 
> 时间：2012-06-28T01:43:45.687
> 
> 标签：sql, sql-server, left-join

我有以下查询，其中包含许多具有 7 个结果列的 LEFT JOIN 子句，其中最后两个是数字。我期望 count_non_zero 列始终等于 count_total 列（鉴于我当前拥有的数据）

```
WITH temp_table AS ( 
SELECT 
    attr.company_name_id AS option_id, 
    attr.company_name AS option_name, 
    uj.internship_company_name_id, 
    AVG(CASE WHEN s.salary > 0 THEN s.salary END) AS average, 
    COUNT(CASE WHEN s.salary > 0 THEN attr.company_name END) as count_non_zero, 
    COUNT(attr.company_name_id) as count_total 
FROM company_name attr 
    LEFT JOIN user_job_internship uj ON uj.internship_company_name_id = attr.company_name_id 
        AND attr.approved_by_administrator = 1 
    LEFT JOIN salary_internship s ON uj.user_job_internship_id = s.user_job_id 
        AND uj.job_type_id = 4 
    LEFT JOIN [user] u ON u.user_id = uj.user_id AND u.include_in_student_site_results = 1  
        AND u.site_instance_id IN (1) 
    LEFT JOIN user_education_mba_school mba ON u.user_id = mba.user_id  
        AND mba.mba_graduation_year_id NOT IN (8)  
GROUP BY attr.company_name_id, attr.company_name, uj.internship_company_name_id)
SELECT * FROM (SELECT ROW_NUMBER() OVER (ORDER BY average DESC) AS row, * 
FROM temp_table WHERE count_total >= 3) sub 
WHERE row >= 1 AND row <= 25 ORDER BY average DESC; 
```

我运行此查询以证明“salary”列中没有任何值返回值 0。

```
SELECT s.* FROM user_job_internship uj, salary_internship s 
where internship_company_name_id = 440
AND uj.user_job_internship_id = s.user_job_id 
```

我在想有什么东西会弄乱结果，导致 count_non_zero 得到不存在的计数。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:28:14.150

我假设您的 count_total 大于您的 count_non_zero。这是意料之中的，因为您正在使用外连接来加入 user_job_internship 和 Salary_internship。

您的查询包括没有任何实习的公司。***如果工资为 0或***根本没有实习，公司将不会被包括在 count_non_zero 中。

将这两个连接更改为内部连接，您应该会得到预期的结果。

另一种选择是更改您的 count_total 以忽略没有实习的公司

```
count(case when s.user_job_id is not null then attr.company_name_id end) as count_total 
```

你还有另外一个小风险。您的 count_non_zero 正在计算 company_name 而您的 count_total 正在计算 company_name_id。如果 company_name 列允许 NULL 值，您可能会遇到问题。

# html - 两个 div 框 [第一个浮动，第二个清除]，第二个边距似乎没有先推出

> ID：11237068
> 
> 赞同：0
> 
> 时间：2012-06-28T01:44:01.067
> 
> 标签：html, css

在下面的代码中，我有两个 div 框。第一个是 float:left，第二个是 clear:left，所以它位于第一个之下。我的问题是为什么 margin-top:20px 不推开第一个 div？

```
<head>
 <style>
 div { width:100px; height:100px; background-color:green; }
 #box1 { float:left; }
 #box2 { background-color:red; clear:left; margin-top:20px; }
 </style>
</head>
<body>
 <div id="box1"></div>
 <div id="box2"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:56:48.660

是的，这很混乱。阅读[有关折叠边距的 CSS 规范](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)。

具体来说，

“如果具有间隙的元素的顶部和底部边距相邻，则它的边距会与后续兄弟的相邻边距一起折叠，但生成的边距不会与父块的底部边距折叠。”

要获得您正在寻找的效果，您需要将边距应用于没有间隙的元素，在这种情况下是第一个 div，如下所示：

[http://jsfiddle.net/6bfYU/](http://jsfiddle.net/6bfYU/)

# javascript - JQuery PriceFormat 和 OnChange

> ID：11237069
> 
> 赞同：0
> 
> 时间：2012-06-28T01:44:30.417
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 JQuery PriceFormat 插件 (http://jquerypriceformat.com/)。

我的代码如下：

```
$('#valor').priceFormat({
    prefix: 'R$ ',
    centsSeparator: ',',
    thousandsSeparator: '.',
    limit: 8,
    centsLimit: 2
     }); 
```

但是，但我希望能够在用户键入值时更改另一个输入的值。例如，我使用 priceFormat 的输入是产品价格。但是，还有另一种输入称为税收，例如，它会随价格发生动态变化（假设税收是价格的 1%）。我希望能够在用户更改产品价格时更改税值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:00:22.037

如果您在向产品价格输入值时尝试更改税率值，那么您应该点击产品价格文本框的**按键**事件。

这是它的文档以及一个示例： [http ://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

这是一些伪代码...

```
$(document).ready(function() {

  $('#productPrice').keypress(function() {

    var price = $('#productPrice').val();
    // do comparisons with price to decide a tax rate...
    $('#taxRate').val("8.375%");

  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:32:05.613

我已经通过将 keyup 事件绑定到这样的函数来解决这个问题：

```
function calcularTaxa(){
    //code of function here
}

$("#valor").bind('keyup', calcularTaxa); 
```

希望这对某人有所帮助。;D

# c++ - Ctypes 在使用 CMake 创建的共享库中找不到符号

> ID：11237072
> 
> 赞同：11
> 
> 时间：2012-06-28T01:45:18.133
> 
> 标签：c++, python, c, cmake, ctypes

我在 linux 中创建共享库的 CMake 设置类似于

```
SET (CMAKE_CXX_FLAGS "-fPIC")

SET (LIB_UTILS_SRC
    Utils.cpp
)

ADD_LIBRARY (UTILS SHARED
    ${LIB_UTILS_SRC}
) 
```

源 Utils.cpp

```
double addTwoNumber(double x, double y)
{
    return x + y;
} 
```

当尝试使用 CTypes 访问“addTwoNumber”函数时

```
import os
import ctypes as c

libPath = '/home/AP/workspace/LearningCPP/lib/libUTILS.so'
libUTILS = c.cdll.LoadLibrary(libPath)

prototype = c.CFUNCTYPE(    
    c.c_double,                
    c.c_double,                
    c.c_double                
)
addTwoNumber = prototype(('addTwoNumber', libUTILS))

res = addTwoNumber(c.c_double(2.3), c.c_double(3.5) ) 
```

我收到了一些类似的消息。

```
AttributeError: /home/AP/workspace/LearningCPP/lib/libUTILS.so:
undefined symbol: addTwoNumber 
```

我使用“nm --demangle libUTILS.so”命令检查了 libUTILS.so，它清楚地显示了其中的“addTwoNumber”符号。

为什么我仍然从 python 收到“未定义符号”消息？我猜必须设置一些编译器标志，以便正确处理符号。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T02:16:37.963

有趣的是，我通常使用，`numpy.ctypes`因为我经常需要处理大型数据集，并且从来没有遇到过任何问题，但我想我知道这里发生了什么，这是名称被 g++ 编译器弄乱了，我让它这样工作：

生成文件：

```
g++ -Wall -fPIC -O2 -c Utils.cpp
g++ -shared -Wl -o libUTILS.so Utils.o 
```

实用程序.cpp

```
extern "C" double addTwoNumber(double x, double y)
{
    return x + y;
} 
```

测试.py

```
import os
import ctypes as c

libUTILS = c.cdll.LoadLibrary('libUTILS.so')

prototype = c.CFUNCTYPE(    
    c.c_double,                
    c.c_double,                
    c.c_double                
)
addTwoNumber = prototype(('addTwoNumber', libUTILS))

res = addTwoNumber(c.c_double(2.3), c.c_double(3.5) )
print res 
```

输出：

```
$ python test.py
5.8 
```

请注意`extern`关键字，这确保编译器不会破坏名称，在 Windows 下您必须做一些额外的事情，我确实发现[http://wolfprojects.altervista.org/dllforpyinc.php](http://wolfprojects.altervista.org/dllforpyinc.php)这很有趣。

我希望这有帮助。

我的机器：

> $ g++ --version
> i686-apple-darwin10-g++-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3) 版权所有 (C) 2007 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。
> 
> $ uname -a
> Darwin MacBookPro 10.8.0 达尔文内核版本 10.8.0：2011 年 6 月 7 日星期二 16:33:36 PDT；根：xnu-1504.15.3~1/RELEASE_I386 i386

# android - ExpandableListView 中的 EditText - 打开软键盘时保持焦点

> ID：11237073
> 
> 赞同：3
> 
> 时间：2012-06-28T01:45:22.097
> 
> 标签：android, android-listview, expandablelistadapter

我有一个包含多个组的 ExpandableList，每个组都包含一个不同类型的子项（不同的布局）。我有几个具有相似结构但子视图不同的活动，因此我决定为它编写一个自定义适配器。适配器在大多数情况下都运行良好，除了几个问题：

1.  在子视图中键入文本几乎是不可能的。在键入每个字符后，EditText 似乎失去了焦点。我附上了一个截图来说明这种行为。
2.  当组展开/折叠几次后，TextViews 中的文本似乎消失了，每个视图中只出现第一个单词的第一个字母。不知何故，它们的布局参数似乎以某种方式计算错误。

以下是截图： ![EditText - 紧张的打字](../Images/32270c2ef3d372e6bb273d440203db80.png) ![TextView - TextView 中的文本布局](../Images/f24d8833b7cc2ad0f438bc952de2ed76.png)

这是我的适配器的代码：

```
public class GenericExpandableListAdapter extends BaseExpandableListAdapter {

    private Context context;
    private String[] groups;
    private View[] children;

    public static interface ExpandableListItemClickListener {
        public void onClick(View view, int groupId, int itemId);
    }

    public GenericExpandableListAdapter(Context context, String[] groups, int[] children) {
        if(groups.length != children.length) {
            throw new IllegalArgumentException("Items must have the same length as groups.");
        }
        this.context = context;
        this.groups = groups;

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.children = new View[children.length];
        for(int i = 0; i < children.length; i++) {
            this.children[i] = inflater.inflate(children[i], null);
        }
    }

    public GenericExpandableListAdapter(Context context, String[] groups, View[] children) {
        if(groups.length != children.length) {
            throw new IllegalArgumentException("Items must have the same length as groups.");
        }
        this.context = context;
        this.groups = groups;
        this.children = children;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition];
    }

    @Override
    public int getChildTypeCount() {
        return children.length + 1;
    }

    @Override
    public int getChildType(int groupPosition, int childPosition) {
        return groupPosition;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public View getChildView(final int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        if(convertView != null) {
            return convertView;
        }
        return children[groupPosition];
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return 1;
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    @Override
    public int getGroupTypeCount() {
        return 1;
    }

    @Override
    public int getGroupCount() {
        return groups.length;
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public int getGroupType(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {

        if(convertView != null) {
            ((TextView) convertView).setText(getGroup(groupPosition).toString());
            return convertView;
        }
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, 64);

        final TextView textView = new TextView(context);
        textView.setLayoutParams(lp);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        // Set the text starting position
        textView.setPadding(50, 0, 0, 0);
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:50:11.653

我有一个类似的问题。

将此添加到您的清单文件中，看看它是否有效。它对我有用。

```
android:windowSoftInputMode="adjustPan" 
```

在您的活动标签中，所以它会是这样的

```
<activity
        android:name=".MainActivity"
        android:label="@string/app_name" 
        android:windowSoftInputMode="adjustPan"> 
```

# c# - C# GUI 应用程序，它存储一个数组并通过单击按钮显示最高和最低数字

> ID：11237075
> 
> 赞同：-1
> 
> 时间：2012-06-28T01:46:07.997
> 
> 标签：c#

**背景：**
这是从 13 小时前更新的，因为我已经对此进行了一些研究和试验。我是这个编程领域的新手，所以我会很简短，我正在自学 C#

我正在尝试学习如何从用户输入到文本框中的整数从 button1_Click 计算出来以显示在表单上。是的，这是一项课堂作业，但我认为我可以很好地处理其中的一些问题，但不是全部；这就是我转向你们的原因。

**问题：**
我在 C# 语言、Windows 窗体应用程序中使用 Microsoft Visual Studio 2010，我需要创建一个 GUI，允许用户输入 10 个整数值，这些值将存储在从 button_Click 对象调用的数组中。这些值将显示用户输入的最高和最低值。唯一的问题是数组必须在 Click() 方法之上声明。

到目前为止，这是我想出的：

```
namespace SmallAndLargeGUI
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void inputText_TextChanged(object sender, EventArgs e)
        {
            this.Text = inputText.Text;
        }

        public void submitButton_Click(object sender, EventArgs e)
        {
            int userValue; 
            if(int.TryParse(inputText.Text, out userValue)) 
        { 

        } 
        else 
        {
            MessageBox.Show("Please enter a valid integer into the text box.");
        } 

            int x;
            x = Convert.x.ToString();
            int squaredResults = squared(x);
            int cubedResults = cubed(x); squared(x);
            squaredLabel.Text = x.ToString() + " squared is " + squaredResults.ToString();
            cubedLabel.Text = x.ToString() + " cubed is " + cubedResults.ToString();
        }
        public static int squared(int x)
        {
            x = x * x;
            return x;
        }
        public static int cubed(int x)
        {
            x = x * squared(x);
            return x;    
        }
    }
} 
```

现在我无法运行这个程序，因为第 38 行显示了一条错误消息：“System.Convert”不包含“x”的定义此外，我仍然必须有一个数组，该数组包含来自文本框的 10 个整数并在上面声明Click() 方法。请各位大侠帮帮我？这是昨天到期的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:03:22.590

这看起来像家庭作业，所以你应该尝试更多。这是您可以执行的操作：解析字符串（假设它是逗号分隔的数字列表），将每个值转换为`int`并填充您的数组。您可以调用`.Max()`/`.Min()`方法或循环遍历数组的值并获取最大值/最小值。这是一段代码：

```
int n = 10;
int[] numbers = (from sn in System.Text.RegularExpressions.Regex.Split(inputText.Text, @"\s*,\s*") select int.Parse(sn)).ToArray();
int max = numbers.Max();
int min = numbers.Min();
//int max = numbers[0];
//int min = numbers[0];
//for(int i = 1; i < n; i++)
//{
//    if(max < numbers[i])
//    {
//        max = numbers[i];
//    }
//    if(min > numbers[i])
//    {
//        min = numbers[i];
//    }
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T05:57:02.420

这很可能是一个家庭作业，我不会提供完整的解决方案，而只是提供一个提示。

对我来说，任务似乎是一些如何接受 10 个整数，然后显示它们中的最小和最大。为此，无需维护数组（仅当维护数组本身不是问题的一部分时才偏离路线）。您只需要跟踪当前最小值和当前最大值。

当您收到输入时，将其与当前的最小值和最大值进行比较，并相应地更新它们。例如

```
if(num < curr_min) curr_min = num; 
```

# haskell - Haskell 优先级：Lambda 和运算符

> ID：11237076
> 
> 赞同：21
> 
> 时间：2012-06-28T01:46:21.640
> 
> 标签：haskell, grammar, operator-precedence

我发现优先级和关联性是我理解语法乍一看试图表达的 Haskell 代码的一大障碍。

例如，

```
blockyPlain :: Monad m => m t -> m t1 -> m (t, t1)
blockyPlain xs ys = xs >>= \x -> ys >>= \y -> return (x, y) 
```

通过实验，我终于明白了意思，

```
blockyPlain xs ys = xs >>= (\x -> (ys >>= (\y -> return (x, y)))) 
```

代替

```
blockyPlain xs ys = xs >>= (\x -> ys) >>= (\y -> return (x, y)) 
```

其工作方式为：

```
*Main> blockyPlain [1,2,3] [4,5,6]
[(1,4),(1,5),(1,6),(2,4),(2,5),(2,6),(3,4),(3,5),(3,6)] 
```

我可以从 ghci 中获取 (>>=) 作为运算符 (infixl 1 >>=) 的信息。

但是没有关于 -> 的信息，因为它不是运算符。

你们中的某个人可以提供一些参考以使这个语法更容易掌握吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T02:54:45.390

lambda 的规则非常简单：lambda 的主体尽可能向右延伸，而不会碰到不平衡的括号。

```
f (\x -> foo (bar baz) *** quux >>= quuxbar)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                       body 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T12:17:18.507

一个好的经验法则似乎是，您永远不能创建优先于内置句法结构的自定义运算符。例如考虑这个例子：

```
if b then f *** x else f *** y 
```

不管 的关联性如何`***`，没有人会期望它绑定为：

```
(if b then f *** x else f) *** y 
```

Haskell 中没有很多语法结构（`do`并且`case`由于布局语法而有些特殊），但`let`可以用作另一个示例：

```
(let x = y in y *** x) /= ((let x = y in y) *** x) 
```

# java - 为便携式 Eclipse 设置 JAVA_HOME

> ID：11237078
> 
> 赞同：1
> 
> 时间：2012-06-28T01:46:36.993
> 
> 标签：java, java-home

我正在运行 Windows XP。我在 USB 上安装了一个便携式 Eclipse，当我尝试安装 Android SDK 时，它说“找不到 Java SE 开发工具包 (JDK)”并告诉我设置 JAVA_HOME 环境变量。Java SDK 位于

K:\EclipsePortable\JDK\bin K:\EclipsePortable\JRE\bin K:\EclipsePortable\JDK\jre\bin K:\EclipsePortable\App\Eclipse\JRE\bin

我正在使用 K:\EclipsePortable\JDK\ 所以我假设我将它设置为这两个路径之一。我该怎么做呢？这是在 eclipse 中还是在 Windows 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-16T12:29:15.610

如果你想用它添加一个可移植的 jdk，你需要调整 eclipse.ini 文件。为此添加

```
-vm
K:\EclipsePortable\JDK\bin\javaw.exe

```

如下所示

```
  .
  .
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
打开文件
-vm
K:\EclipsePortable\JDK\bin\javaw.exe
--launcher.appendVmargs
-vmargs
.
.

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:25:12.900

环境变量用于操作系统。正如您在 Windows XP 上一样 - 请按照以下步骤设置 JAVA_HOME 环境变量：

单击“开始”->“控制面板”并打开“系统”。选择“高级”选项卡，然后单击“环境变量”按钮。在“系统变量”部分，添加一个名为 JAVA_HOME 的新变量，并将值放入您的 Java JDK 目录（K:\EclipsePortable\JDK）

或者，您可以按`Windows`+`Pause/Break`组合键，这将立即调出“系统属性”窗口，然后您可以从那里开始。

# html - 带有提交按钮的 HTML 表格单元格填充

> ID：11237080
> 
> 赞同：1
> 
> 时间：2012-06-28T01:46:42.950
> 
> 标签：html, cell, padding

当在表格中添加提交按钮时，整个表格中的单元格填充会变大。该按钮位于单元格的最顶部。我希望它位于中心，单元格填充较少。没有什么对我真正有用...

```
<html>    
    <head>    
        <style type = "text/css">    
            td {border:1px solid black;}    
        </style>    
    </head>    
    <body>    
        <table>    
            <tr>
                <td>Fish</td>
                <td>Salmon</td>
                <td>Trout</td>
                <td>Steak</td>
                <td><form><input type = "submit"></input></form></td>
            </tr>    
        </table>    
    </body>    
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T01:53:03.513

这是由于`form`元素具有一些默认边距和填充。您可以通过将以下内容添加到样式表来将它们重置为零：

```
form {margin: 0; padding:0;} 
```

然后您可以正常设置表格的其余部分。考虑使用某种 CSS 重置脚本，例如 Eric Meyer 的：

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:59:27.253

一种解决方案可以是：

```
<html>

<head>

<style type = "text/css">

td {
    border:1px solid black;
}

td form {
    display : table-cell;
    vertical-align: middle;
    margin : 0;
    padding : 0;
}

</style>

</head>

<body>

<table>

<tr>
<td>Fish</td>
<td>Salmon</td>
<td>Trout</td>
<td>Steak</td>
<td><form><input type = "submit" /></form></td>
</tr>

</table>

</body>

</html> 
```

试试看 :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:56:32.327

你可以试试这个

```
<td><form><input type = "submit" style="margin:0;"></input></form></td> 
```

# android - 为什么我的日志不会显示在 logcat 中？

> ID：11237087
> 
> 赞同：0
> 
> 时间：2012-06-28T01:48:04.403
> 
> 标签：android, eclipse, adb, logcat

我一直在使用 Eclipse Indigo，直到几个小时前，一切都运行良好。当我重新启动它并进行了一些更改时，我在手机上运行了该程序，但没有显示我的日志。手机的日志显示在 logcat 中，但项目中没有任何内容。我已经选择了设备，我尝试过多次重启 eclipse，我已经重置了 ADB，并且我已经运行了命令 adb usb 和 adb logcat（它仍然不显示我的日志）。我知道我的日志是正确的： Log.e("Tag","Message"); 有人有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:05:22.357

事实证明，这对我来说是一个愚蠢的错误。我将日志设置为：Log.e("Tag","") 而不是：Log.e("","Message")。显然，如果你有前者，它不会显示到 LogCat 上，去看看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:27:25.430

我认为，您还没有选择在其上运行您的应用程序的 device 或 emulator ，

在 Eclipse 中，转到**DDMS Perspective**并**选择运行应用程序的设备或模拟器。**

**（注：无需重启Eclipse）**

# jquery - 在 addClass 和其他人工作时，removeClass 被忽略

> ID：11237089
> 
> 赞同：0
> 
> 时间：2012-06-28T01:48:15.107
> 
> 标签：jquery, removeclass

我将以下行绑定到单击事件：

```
$(this).parents(".addonoptions").children().removeClass("highlight"); 
```

它应该从父母的孩子中剥离“突出”类。但它什么也没做。

如果我将其更改为：

```
$(this).parents(".addonoptions").children().addClass("highlight"); 
```

然后突出显示类成功添加到所有孩子。同样，如果我将“removeClass”更改为“hide()”，那么选定的元素会被很好地隐藏，所以我知道选择了正确的元素。我已经阅读了许多关于 removeClass 不起作用的其他问题和答案，但在这种情况下似乎没有一个答案有效。

这是 HTML 外观的基本示例，“clickme”类与上面的事件相关联。

```
<div class="addonoptions">
<div><p class="clickme">Click to remove highlights</p></div>
<div class="highlight"><p class="clickme">Click to remove highlights</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:51:46.850

`children`仅查找直接子节点（在这种情况下，使用`<div>`s 而不是`<p>`标签，`find`而是使用。

现场示例 - [http://jsfiddle.net/sKz6y/](http://jsfiddle.net/sKz6y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:52:41.737

如果`$(this)`是`<p>`标签，那么`children()`调用将返回`<div>`s 的集合。您需要使用 jQuery 的`find`方法：

尝试：

```
$(this).parents(".addonoptions").find('p').removeClass("highlight"); 
```

[http://api.jquery.com/children/](http://api.jquery.com/children/)

[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

```
<div class="addonoptions">
    <div>
        <p class="clickme">Click to remove highlights</p>
    </div>
    <div class="highlight">
        <p class="clickme">Click to remove highlights</p>
    </div>
</div>​

$('.clickme').on('click', function(){
    $(this).parents('.addonoptions').children().removeClass('highlight');
    $(this).parent().addClass('highlight');
});​ 
```

[http://jsfiddle.net/E4K7P/](http://jsfiddle.net/E4K7P/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T02:12:47.393

您可以通过简单地在类本身上调用 removeClass 来真正简化删除：

演示：http: [//jsfiddle.net/hwxj9/](http://jsfiddle.net/hwxj9/)

```
$('.clickme').click(function() {
    /* remove highlight class*/
    $('div.highlight').removeClass('highlight');
    /* or if class exists in other parts of page
       $(this).closest('.addonoptions').find('div.highlight').removeClass('highlight');

     */
    /* highlight parent of p */
    $(this).parent().addClass('highlight');

}) 
```

# boost - 链接 boost 库时出错

> ID：11237092
> 
> 赞同：0
> 
> 时间：2012-06-28T01:49:21.083
> 
> 标签：boost, linker, cmake

我想运行需要提升库的代码。我使用 CMake 构建了它。其他人已经编写了此代码和 cmakelist。它需要与 boost 正则表达式、文件系统和系统库链接。

我下载了 boost 1.48 并构建了上面提到的 3 个库。现在我有 dll 和静态库（.a）。我运行了一个使用这些库的简单程序。它工作得很好。

现在在使用 CMake 时，它​​给出了与 boost 库相关的链接器错误。我检查了cmakelist，但我不明白要修改什么。cmakelist 的相关部分是：

```
set(WITH_BOOST_REGEX ON CACHE BOOL "Include BOOST REGEX support")
set(WITH_BOOST_FILESYSTEM ON CACHE BOOL "Include BOOST FILESYSTEM support")
set(WITH_BOOST_SYSTEM ON CACHE BOOL "Include BOOST SYSTEM support")

if(WITH_BOOST_REGEX)
  CHECK_MODULE(libboost-regex HAVE_BOOST_REGEX)
else()
  set(HAVE_BOOST_REGEX FALSE)
endif()

if(WITH_BOOST_FILESYSTEM)
  CHECK_MODULE(libboost-filesystem HAVE_BOOST_FILESYSTEM)
else()
  set(HAVE_BOOST_FILESYSTEM FALSE)
endif() 
```

我认为我只是在指定链接路径时犯了一个错误，但我无法找到如何更正它。

通过成功指定该程序和库的目标文件的路径，我成功地运行了一个与 boost_regex 的动态和静态库链接的简单示例程序。

现在在这段代码中，还有各种其他模块。它说 boost_regex 库丢失。link.txt 在那里说明要链接到哪些库，如下所示：

```
/usr/bin/c++ CMakeFiles/test_ensembletraining.dir/ensembletraining.o -o ../../bin/test_ensembletraining -rdynamic ../../lib/libensembletraining.so.0.3.2 ../../lib/libutils.so.0.3.2 ../../lib/libfeatureextraction.so.0.3.2 ../../lib/libintegraltransform.so.0.3.2 -lboost_regex.so -lboost_filesystem -lboost_system.so -lopencv_core -lopencv_flann -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_objdetect -lopencv_features2d -lopencv_calib3d -lopencv_legacy -lopencv_contrib -Wl,-rpath,/home/rizwan/vosm-0.3.3/lib: 
```

它成功链接到 opencv 库，但没有链接到 boost 库。我认为指定链接库的路径有误。我试图通过浏览所有 cmakelist 文件来查找指定此路径的位置。

如果有人想提供帮助，请先从 VOSM 下载代码。使用 CMake 构建它。从 boost 网站下载 boost 1.48 库。如果它有效，请告诉我你是如何做到的。

这是 cmakecachelist 的一部分：

```
//Include BOOST FILESYSTEM support
WITH_BOOST_FILESYSTEM:BOOL=ON

//Include BOOST REGEX support
WITH_BOOST_REGEX:BOOL=ON

//Include BOOST SYSTEM support
WITH_BOOST_SYSTEM:BOOL=ON

//Include OPENCV 2.x support
WITH_OPENCV:BOOL=ON 
```

这是cmakelist ..

```
if (BUILD_EXAMPLES)
    project(ensembletraining_exe)

    if(CMAKE_COMPILER_IS_GNUCXX)
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wno-unused-function")
    endif()

    include_directories(
        "${CMAKE_SOURCE_DIR}/modules/ensembletraining/include"
        "${CMAKE_SOURCE_DIR}/modules/common/include"
        "${CMAKE_SOURCE_DIR}/modules/featureextraction/include"
    )

    # ---------------------------------------------
    #      Define executable targets
    # ---------------------------------------------
    MACRO(VO_DEFINE_EXAMPLE name srcs)
        set(the_target "test_${name}")
        add_executable(${the_target} ${srcs})
        set_target_properties(${the_target} PROPERTIES
            OUTPUT_NAME "test_${name}"
            PROJECT_LABEL "(EXAMPLE) test_${name}")
        add_dependencies(${the_target} ensembletraining 
            opencv_core opencv_flann opencv_imgproc opencv_highgui
            opencv_ml opencv_video opencv_objdetect opencv_features2d
            opencv_calib3d opencv_legacy opencv_contrib)
        target_link_libraries(${the_target} ${VOSM_LINKER_LIBS} ensembletraining utils featureextraction integraltransform
            boost_regex boost_filesystem boost_system opencv_core
            opencv_flann opencv_imgproc opencv_highgui opencv_ml opencv_video opencv_objdetect
            opencv_features2d opencv_calib3d opencv_legacy opencv_contrib)

        if(WIN32)
            install(TARGETS ${the_target}
                RUNTIME DESTINATION "tests" COMPONENT main)
        endif()
        install(TARGETS ${the_target} RUNTIME DESTINATION bin COMPONENT main)
    ENDMACRO(VO_DEFINE_EXAMPLE)

    file(GLOB cpp_samples RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *.cpp *.c)

    foreach(sample_filename ${cpp_samples})
        get_filename_component(sample ${sample_filename} NAME_WE)
        VO_DEFINE_EXAMPLE(${sample}  ${sample_filename})
    endforeach()
endif(BUILD_EXAMPLES)

if (INSTALL_C_EXAMPLES AND NOT WIN32)
    file(GLOB C_SAMPLES *.c *.cpp *.jpg *.png *.data makefile.* build_all.sh *.dsp *.cmd )
    install(FILES ${C_SAMPLES}
            DESTINATION share/vosm/tests
            PERMISSIONS OWNER_READ GROUP_READ WORLD_READ)
endif () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:07:35.847

我建议使用`find_package`来查找所需的 Boost 库：

*   将`BOOST_ROOT`环境变量设置为 Boost 根目录，即包含`boost`,和其余部分的环境变量，例如`libs`（全局或执行 CMake 时）`stage``C:\boost_1_48_0`
*   将以下内容添加到您的`CMakeLists.txt`：

    ```
    find_package(Boost 1.48 COMPONENTS regex system filesystem REQUIRED)
    target_link_libraries(your_target ${Boost_LIBRARIES})
    include_directories(${Boost_INCLUDE_DIRS}) 
    ```

*   如果您只需要静态库，请将`Boost_USE_STATIC_LIBS`变量设置为`TRUE`（在 find_package 之前！）

*   如果您的 Boost 链接到静态 C++ 运行时，`Boost_USE_STATIC_RUNTIME`请将`TRUE`

# drupal - Ubercart 您的购物车中没有产品

> ID：11237094
> 
> 赞同：1
> 
> 时间：2012-06-28T01:49:34.947
> 
> 标签：drupal, drupal-6, ubercart

我正在使用带有 Ubercart 和[uc_hotel](http://drupal.org/project/uc_hotel)模块的 Drupal 6。

现在的问题是，当我现在尝试预订时，它说您的购物车中没有产品。但是，当我现在尝试以管理员身份预订时，它会在我的购物车中显示产品。

我也检查了权限...

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:51:31.360

您必须启用匿名结帐（用户无需登录即可结帐）。

出现在 admin/store/settings/checkout/edit/basic 下。

希望对你有帮助！！！

# python - 如何在 Python 中用 subprocess.call 替换 os.system("mkdir" _testName)？

> ID：11237096
> 
> 赞同：1
> 
> 时间：2012-06-28T01:50:26.340
> 
> 标签：python, subprocess, os.system

如何在 Python 中替换`os.system("mkdir " + _testName)`为？`subprocess.call()`

`mkdir`是我要运行的 unix 命令。`_testName`是在 python 脚本中定义的变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:57:32.843

没有子进程：[os.mkdir](http://docs.python.org/library/os.html#os.mkdir)

与子流程：

```
subprocess.call(['mkdir',_testName]) 
```

或者，如果您想确保自己成功：

```
subprocess.check_call(['mkdir', _testName]) 
```

# node.js - Node.js：v0.8 中的域模块

> ID：11237097
> 
> 赞同：1
> 
> 时间：2012-06-28T01:50:33.013
> 
> 标签：node.js, module, dns

我想问一些关于节点 v0.8 中的新模块“域”的信息。

```
var domain = require('domain');
var EventEmitter = require('events').EventEmitter;

var dm = domain.create();

dm.on('error', function(err) {
    console.log('Catch some error: ', err.message);
});

var emitter = new EventEmitter();
emitter.on('test', function() {
    throw new Error('Emit an error !');
});
dm.add(emitter);
// emitter.emit('test');                         <- This line

dm.run(function() {
    setTimeout(function() {
        throw new Error('Timeout !');
    }, 10);
}); 
```

输出：

```
Catch some error:  Timeout ! 
```

如果添加该行

```
emitter.emit('test'); 
```

然后输出：

```
Catch some error:  Emit an error ! 
```

所以我的问题是为什么它不输出“捕获一些错误：超时！” 添加以上行后？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:06:26.350

这里根本没有执行`dm.run(function() {`，您必须在任何异常发生之前将处理程序添加到域。

与之比较

```
var domain = require('domain');
var EventEmitter = require('events').EventEmitter;

var dm = domain.create();

dm.on('error', function(err) {
    console.log('Catch some error: ', err.message);
});

var emitter = new EventEmitter();
emitter.on('test', function() {
    throw new Error('Emit an error !');
});
dm.add(emitter);    
dm.run(function() {
    setTimeout(function() {
        throw new Error('Timeout !');
    }, 10);
});
emitter.emit('test'); 
```

输出：

```
Catch some error:  Emit an error !
Catch some error:  Timeout ! 
```

# c++ - Win32 仍然最适合 Windows 游戏开发？

> ID：11237098
> 
> 赞同：1
> 
> 时间：2012-06-28T01:50:33.813
> 
> 标签：c++

我希望在空闲时间开始一个新项目，涵盖计算机科学的许多领域，我已经决定开发一款游戏（最有可能是飞行模拟器或简单的 2D 横向卷轴）。无论如何，我在编写商业应用程序的工作中做了很多 C#/Java 开发，所以我希望用 C++ 做一个游戏（我以前用 C#/XNA 来做游戏）。

但是，我正在尝试为 C++ 游戏开发找到一个好的框架。我以前使用过 Qt，但不相信这适合我想要实现的目标。Win32 和 OpenGL 仍然是 C++ 游戏开发的最佳选择吗？

另外，我想保持这个漂亮的 OO，有什么建议包装 Win32 用于游戏开发？或者 OpenGL 是否提供抽象来提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:53:46.230

根据我的经验，Win API 是一团糟。我建议使用 SDL 之类的东西，这样可以省去麻烦。作为奖励，这也将使其跨平台。您还可以将 OpenGL 与 SDL 一起使用。

SDL 仍然有点低级，并且具有 C 风格的 API，因此您需要编写自己的 OO 包装器。我听说 SFML 和 Allegro 是流行的替代品，但我对它们的经验较少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T01:56:32.080

SFML 可能是你能得到的最接近的。大多数使用 2D 渲染的人都自己制作，而大多数使用 3D 的人要么使用 Irrlicht 之类的东西，要么自己制作。

至于 OGL，OGL API 是可怕的——它甚至比 Windows API 还要糟糕。至少那是 OO，C 风格，而不是简单的旧 global-variables-up-wazoo。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T02:00:41.520

查看[GLFW](http://www.glfw.org/index.html)。它看起来很简约（以一种好的方式）。

# php - 在 div 中加载的页面的面包屑

> ID：11237101
> 
> 赞同：1
> 
> 时间：2012-06-28T01:51:03.127
> 
> 标签：php, javascript, jquery, ajax, breadcrumbs

我的网站仅包含一个页面，其中所有其他页面都加载在 div 中，我想做的是创建面包屑以跟踪 div 内加载的页面，我在互联网上找到的所有解决方案仅适用于加载的页面整个窗口，所以有人有更好的主意吗？我的页面：

```
<div id="nav" class="mmenu" style="float: left; position: fixed;">
    <ul type="none">
        <li><a class="upper" id="1" style="border-top-left-radius: 6px; border-top-right-radius: 6px; background-image:url('menu icons/user-blue.gif'); background-repeat: no-repeat; background-position: left; background-position-x: 5px;" target="collabsoft" href= "ProfilePage.php?property_variable=mine">My Profile</a></li>
        <li><a id="2" style="background-image:url('menu icons/comments.png'); background-repeat: no-repeat; background-position: left; background-position-x: 5px;"  target="collabsoft" href= "viewMessages.php">Messages</a></li>
        <li><a id="3" style="background-image:url('menu icons/newspaper.gif'); background-repeat: no-repeat; background-position: left; background-position-x: 5px;"  target="collabsoft" href= "userHomepage.php">My Conferences</a></li>
        <li><a id="4" style="background-image:url('menu icons/pageflip.gif'); background-repeat: no-repeat; background-position: left;background-position-x: 2px;"  target="collabsoft" href= "availableConferences2.php">Conferences</a></li>
        <li><a id="5" style="background-image:url('menu icons/users.gif'); background-repeat: no-repeat; background-position: left; background-position-x: 5px;"  target="collabsoft" href= "incomingRequests.php">Requests</a></li>
        <li><a id="6" style="background-image:url('menu icons/book.gif'); background-repeat: no-repeat; background-position: left;background-position-x: 5px;"   target="collabsoft" href= "viewNews.php" >News</a></li>
        <li><a class="lower" id="7" style="border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; background-image:url('menu icons/gear.gif'); background-repeat: no-repeat; background-position: left;background-position-x: 5px;" target="collabsoft" href= "generalOptions.php" >Options</a></li>
    </ul>
</div>
<table id="collabsoft_table" style="border: 0px;">
    <tr>
        <td id="collabsoft_td"style="border:0px;">
            <div scrolling="no" id="collabsoft" name="collabsoft" style="color: #003366; left:200px; display:none;position: absolute; border: 5px #1f487c solid; width: fit-content; height: fit-content; border-radius: 10px;"></div>
        </td>
    </tr>
</table> 
```

用于在 div 中加载页面的函数：

```
$("#nav a").click(function(event) { 
    event.preventDefault();
    var page = $(this).attr("href"); 
    $("#collabsoft").slideUp("500",function() {
        $("#collabsoft").load(page,function() {
            $(this).slideDown(500);
        });
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:16:14.737

使用[jQuery bbq](http://benalman.com/projects/jquery-bbq-plugin/)等浏览器历史小部件来跟踪页面。这样，您就启用了两个后退按钮，并且您将能够跟踪用户访问的所有页面。请注意，它的学习曲线有点陡峭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:35:14.527

是的，我猜 jQuery bbq 很棒。但在我最近的情况下，我使用了[jQuery hashchange 事件](http://benalman.com/projects/jquery-hashchange-plugin/).. 它简单、轻巧、简单地为我完成了工作。

我没有使用面包屑，但是对于页面标题，我`$("#pageheader").text("header for div1/div2");`在使用 jQuery 加载相应的 div 时使用。

# java - Jax-rs(Jersey) 在 POST 请求中使用 Json 对象数组

> ID：11237102
> 
> 赞同：11
> 
> 时间：2012-06-28T01:51:13.330
> 
> 标签：java, rest, jersey, jax-rs

使用 jax-rs(Jersey) 我尝试实现一个带有 JSON 对象列表的 POST 请求

```
//The resource look like this
@Path("/path")
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void setJsonl(List<SomeObj> test) {
  //do work
  System.out.println(test);
}

//The class to define the json structure
@XmlRootElement
public class SomeObj{

private String tag;
private String value;

public String getTag() {
 return tag;
}

public void setTag(String tag) {
  this.tag = tag;
}

public String getValue() {
  return value;
}

public void setValue(String value) {
  this.value = value;
}
} 
```

当我尝试使用 curl 测试 REST api 时，我总是收到“错误请求”错误，我在这里遗漏了什么吗？

```
curl -X POST -H "Content-Type: application/json" -d '{"SomeObj":[{"tag":"abc", "value":"ghi"},{"tag":"123", "value":"456"}]}' http://{host_name}:8080/path_to_resource 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:22:52.283

如果您不介意更改方法的签名：

```
import org.json.JSONArray;

    //The resource look like this
    @Path("/path")
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public void setJsonl(String array){
        JSONArray o = new JSONArray(last_data);
        System.out.println(o.toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-29T17:39:22.117

一个迟到的答案，但可能对其他人有帮助发布这个：

> [{"tag":"abc", "value":"ghi"},{"tag":"123", "value":"456"}]

因为通过发送这个：

> {"SomeObj":[{"tag":"abc", "value":"ghi"},{"tag":"123", "value":"456"}]}

您正在发布一个具有单个“SomeObj”命名属性的对象。您没有发布数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T16:02:38.743

尝试将您的 JSON 数组包装在一个对象中，例如：

```
@XmlRootElement 
public class SomeObjListWrapper {
private List<SomeObj> list;
// getters and setters
}

curl -X POST -H "Content-Type: application/json" -d '{"list":[{"tag":"abc", "value":"ghi"},{"tag":"123", "value":"456"}]}' http://{host_name}:8080/path_to_resource 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-27T05:28:30.470

在服务器端：

```
import _root_.org.codehaus.jettison.json.{JSONArray, JSONObject}
@POST
@Path("/wants-json-array")
@Consumes(Array(MediaType.APPLICATION_JSON))
def wantsJSONArray(array: JSONArray): Response =
{
    // here's your array
} 
```

在客户端：

```
$.ajax(
{
    type: "GET",
    url: '/your-web-service/wants-json-array',
    data: JSON.stringify(THEARRAYYOUARESENDINGTOTHESERVER),
    contentType: "application/json",
    dataType: "json",
    processData: false
}); 
```

# node.js - Node.js Cron 作业与日期对象混淆

> ID：11237107
> 
> 赞同：0
> 
> 时间：2012-06-28T01:52:36.583
> 
> 标签：node.js, cron, express

我正在尝试安排几个 cron 作业来为我的网络应用程序中的不同实体生成序列号。但是我遇到了这个问题，当我循环每个表时，它说它与 date.js 有关。我没有对日期对象做任何事情？反正不在这个阶段。有几个猜测是 cron 对象在其代码中执行日期操作并引用 date.js。我正在使用 date.js 来访问诸如 ISO 日期之类的内容。

```
for (t in config.generatorTables) {
    console.log("t = " + config.generatorTables[t] + "\n\n");

    var ts3 = azure.createTableService();
    var jobSerialNumbers = new cronJob({
        //cronTime: '*/' + rndNumber + ' * * * * *',
        cronTime: '*/1 * * * * *',
        onTick: function () {
            //console.log(new Date() + " calling topUpSerialNumbers \n\n");
            manageSerialNumbers.topUpSerialNumbers(config.generatorTables[t], function () { });
        },
        start: false,
        timeZone: "America/Los_Angeles"
    });

    ts3.createTableIfNotExists(config.generatorTables[t], function (error) {
        if (error === null) {
            var query = azure.TableQuery
                .select()
                .from(config.generatorTables[t])
                .where('PartitionKey eq ?', '0')

            ts3.queryEntities(query, function (error, serialNumberEntities) {
                if (error === null && serialNumberEntities.length == 0) {
                    manageSerialNumbers.generateNewNumbers(config.maxNumber, config.serialNumberSize, config.generatorTables[t], function () {
                        jobSerialNumbers.start();
                    });
                }
                else jobSerialNumbers.start();
            });
        }
    });
} 
```

这是我检查 server.js.logs\0.txt 文件时收到的错误消息：

C:\node\w\WebRole1\public\javascripts\date.js:56 onsole.log('isDST'); return this.toString().match(/(E|C|M|P)(S|D)T/)[2] == "D" ^ TypeError: Cannot read property '2' of null at Date.isDST (C:\node\w\WebRole1\public\javascripts\date.js:56:110) 在 Date.getTimezone (C:\node\w\WebRole1\public\javascripts\date.js:56:228) 在 Object ._getNextDateFrom (C:\node\w\WebRole1\node_modules\cron\lib\cron.js:88:30) 在 Object.sendAt (C:\node\w\WebRole1\node_modules\cron\lib\cron.js: 51:17) 在 Object.getTimeout (C:\node\w\WebRole1\node_modules\cron\lib\cron.js:58:30) 在 Object.start (C:\node\w\WebRole1\node_modules\cron\ lib\cron.js:279:33) 在 C:\node\w\WebRole1\server.js:169:46 在 Object.generateNewNumbers (C:

我在我的 database.js 文件中使用这一行：

要求（'../public/javascripts/date'）；

因为 date.js 是全球性的，我只需要这样做一次，对吗？即它有一堆内置日期对象的原型（扩展）。

在 manageSerialNumbers.js 中我只是在做一个回调，它们没有执行代码，因为我已经全部注释掉了，但仍然收到这个错误。

任何帮助或建议将不胜感激。

好的，我已经注释掉了 date.js 模块，现在我收到了这个错误：

您指定了时区，但未包含该`time`模块。时区功能被禁用。请安装`time`模块以在您的应用程序中使用时区。

当我检查 cron.js 模块时，它的顶部有以下语句：

```
var CronDate = Date;
try {
  CronDate = require("time").Date;
} catch(e) {
  //no time module...leave CronDate alone. :)
} 
```

所以这会得出结论，它确实与 date.js 模块有关？

任何人都可以看到有什么问题。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:22:55.953

我用了一段时间的 date.js，然后意识到 Node.js/V8 中的 Date 对象已经有了 ISO 支持、输入和输出，而 Date.js 只是添加了一个非常具体的边缘情况。你到底需要 date.js 做什么？

如果你确实需要 date.js ......

> 因为 date.js 是全球性的，我只需要这样做一次，对吗？

只要代码在同一个进程中运行，情况就是如此。我不熟悉 Azure 上的 Node.js，或者提供`cronJob`您正在使用的方法的库，但也许它会产生一个新进程，它有自己的 V8 实例，然后您会丢失 Date 对象更改？（所以`require`在那个代码中再次出现。）

# google-apps-script - 有没有办法访问 google-apps-script 中电子表格范围的验证规则

> ID：11237114
> 
> 赞同：2
> 
> 时间：2012-06-28T01:53:42.327
> 
> 标签：google-apps-script

我查看了 Spreadsheet 类、Sheet 类和 Range 类的文档。我找不到可以访问范围验证规则的方法。

我查看了“使用验证规则”的文档。

是否可以访问范围内每个单元格的属性？

我还假设一个范围内的每个单元格只能有一个验证规则。我在这个假设上错了吗？我得出了这个假设，因为一个单元格似乎只显示一条验证消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:20:56.300

Apps 脚本目前不提供访问验证规则的方法。您可以按照以下方式打开功能请求：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=219) ://code.google.com/p/google-apps-script-issues/issues/detail?id=219 。

# javascript - IE7 中的 Javascript 在检索时返回错误值？

> ID：11237117
> 
> 赞同：0
> 
> 时间：2012-06-28T01:54:11.190
> 
> 标签：javascript, dom, internet-explorer-7

在较早的问题 (http://bit.ly/KNMN89) 中，我遇到了一个由 IE7 的 setAttribute() 实现中断引起的问题。同时，在测试问题时，我发现了这一点：

> 在 IE7 中`document.documentElement`，`document.getElementsByTagName('html')[0]`、 和`document.body.parentNode`不像其他浏览器那样返回 [object HTMLHtmlElement] 而是返回 [object]。

作为一个 Javascript 新手，我不确定这意味着什么：这是否意味着 IE7 没有正确读取 <html> 元素作为 DOM 的根？还是仅仅是返回错误值的情况？此外，如果有的话，这种差异对设计师/开发人员有何影响？

我猜这可能不是一个大问题，但我想至少在继续之前知道发生了什么，而不是简单地忽略这个异常。如果这里的 Javascript 资深人士能给我一些相关建议，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:57:00.567

这仅仅是因为对象`[object]`在IE7中转换为字符串，没有指定什么类型的对象。此外，IE7 没有`HTML*Element`对象类型。但是，`document.documentElement`两者`document.getElementsByTagName('html')[0]`都返回作为`<html>`文档根的元素。

# php - 403 禁止在 php mkdir 上

> ID：11237129
> 
> 赞同：0
> 
> 时间：2012-06-28T01:55:24.460
> 
> 标签：php

使用 mkdir 函数执行 php 脚本时出现 403 Forbidden 页面。

这是 mkdir 代码：

```
mkdir('uploads/'.$upload_folder.'/', 777) 
```

我试过775、666权限，但是什么都没有。在我想存储图像、mp3 和视频的目录中。谁能帮我？

***更新 1***

这是整个脚本：

```
$folderStr = $_REQUEST['folderName'];

//create SEO firndly directory name
$upload_folder =    preg_replace("'\s+'", '-', $folderStr);

// The place the files will be uploaded to (currently a 'files' directory).
$upload_path = 'uploads/'.$upload_folder.'/';

//Check whether folder exists or create with the name supplied
if(is_dir($upload_folder))
echo 'directory exists';
else
mkdir('uploads/'.$upload_folder.'/', 777); 
```

它应该在“上传”文件夹中创建一个新目录，其名称从我从那里获得的带有值“文件夹名称”的表单中给出，并将表单中给出的文件上传到创建的新目录中。它也不能在文件夹名称上写希腊字符。我必须改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-17T14:51:08.110

您需要在所需模式前面加一个零，例如

```
mkdir('uploads/'.$upload_folder.'/', 0777) 
```

如果您使用“777”，您将获得如下奇怪的权限：

`dr----x--t`

而不是这个：

`drwxrwxr-x`

**原因（来自[PHP chmod](http://php.net/chmod)文档）：** “请注意，模式不会自动假定为八进制值，因此为了确保预期的操作，您需要在模式前加上零 (0)。”

我可以确认这仍然发生在 PHP 7.0.3 中，尽管[对整数处理进行了相关更改](http://php.net/manual/en/migration70.incompatible.php)：“以前，包含无效数字的八进制文字被静默截断（0128 被视为 012）。现在，无效的八进制文字将导致解析错误。”

然而 0777 无论如何都是默认值，它提供了最广泛的访问权限，因此您不需要指定它，*除非*您想设置任何以后的参数（例如，通常将第三个选项设置为**true**以启用递归目录的创建很有用，而不是在父级不存在时创建错误。）

# java - Java 使用 TransactionManager 实现两阶段提交

> ID：11237137
> 
> 赞同：2
> 
> 时间：2012-06-28T01:56:17.427
> 
> 标签：java, transactions, distributed-transactions

我需要使用 TransactionManager 和 ResourceManager 实现两阶段提交协议。我已经在谷歌上搜索了几个小时，找不到任何有用的东西。我知道协议是如何工作的，但我不知道从哪里开始这个实现。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:42:11.317

我将从查看 Spring 提供的事务管理功能开始。他们非常支持切换事务管理器。您没有指定如何运行您的应用程序（即什么应用程序服务器），但每个应用程序服务器都有一个 JTA 事务管理器的实现。Spring 为多个应用服务器提供了可插拔的事务管理器实现。例如，他们有一个用于 IBM WebSphere (org.springframework.transaction.jta.WebSphereUowTransactionManager)。这将允许您的应用程序更轻松地切换事务管理器。

下面是一个 Spring 参考。请注意，2 阶段提交内容通常与全局事务管理（相对于本地事务管理）相关。

[http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)

提供您的应用服务器，您也可能会得到一些更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:04:52.650

看看 Atomikos 的实现。 [http://www.atomikos.com/Documentation/TwoPhaseCommitWithTomcatSpringJMSAndJDBC](http://www.atomikos.com/Documentation/TwoPhaseCommitWithTomcatSpringJMSAndJDBC)

# php - 如何使用相同的复选框多次提交以创建多组选择？

> ID：11237142
> 
> 赞同：1
> 
> 时间：2012-06-28T01:56:38.937
> 
> 标签：php, jquery, ajax

我想要一组使用 AJAX 发布到 PHP 页面的复选框，但是在发布之后我希望能够使用相同的复选框将另一组选择发送到同一个 PHP 页面，最多指定数量集，然后将这些集用作 PHP 页面中的数据。

我无法弄清楚这将如何实现。有任何想法吗？

索引.php：

```
<form id="checkboxes">
  <input type="checkbox" id="1" name="checkboxes[]" value="1" />
  <input type="checkbox" id="2" name="checkboxes[]" value="2" />
  <input type="checkbox" id="3" name="checkboxes[]" value="3" />
  <input type="checkbox" id="1" name="checkboxes[]" value="4" />
  <input type="checkbox" id="1" name="checkboxes[]" value="5" />
  <input type="button" id="button" name="submit" value="Submit" />
</form>
<script type="text/javascript">
  $(function() {
    $("#button").click(function() {
    $.ajax({
      type: "POST",
      url: "process.php",
      data: $("form#checkboxes").serialize(),
      success: function(data) {
        $("#div").load('success.php')
      }
    });
    })
  })
</script> 
```

进程.php：

```
$data = array();
foreach($_POST['checkboxes'] as $key => $value){
  $data[] = "$value";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:17:35.923

您将使用 ajax 调用的成功函数。我们将获取每个复选框的值，然后通过 ajax 提交表单，防止默认，然后在表单提交后取消选中所有框。

```
$('something').submit(function(e){
  e.preventDefault();
  var checked = [];
  $.each($('input[type=checkbox]'), function(i,v){
    if($(this).is(':checked')){
      checked.push($(this).val());
    }
  });
  $.ajax({
    url: 'someurl.ext',
    type: 'post',
    data: checked,
    success: function(data){
      $.each($('input[type=checkbox]'), function(i,v){
        $(this).prop('checked', false');
      });
    }

  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:19:51.823

如果您希望数据随着时间的推移占主导地位，则需要使用 Sessions。所以，你可以这样使用它：

```
<?php
    session_start();
    if (!isset($_SESSION["data"]))
        $_SESSION["data"] = array();
    foreach($_POST['checkboxes'] as $key => $value){
      $_SESSION["data"] = "$value";
    }
    // Print out the final array, if there's a parameter final!
    if (isset($_GET["final"]))
        foreach ($_SESSION["data"] as $data)
            echo $data;
?> 
```

对于 JavaScript，您需要重置东西：

```
<form id="checkboxes">
    <input type="checkbox" id="1" name="checkboxes[]" value="1" />
    <input type="checkbox" id="2" name="checkboxes[]" value="2" />
    <input type="checkbox" id="3" name="checkboxes[]" value="3" />
    <input type="checkbox" id="1" name="checkboxes[]" value="4" />
    <input type="checkbox" id="1" name="checkboxes[]" value="5" />
    <input type="button" id="button" name="submit" value="Submit" />
</form>
<script type="text/javascript">
    $(function() {
        $("#button").click(function() {
            $.ajax({
                type: "POST",
                url: "process.php",
                data: $("form#checkboxes").serialize(),
                success: function(data) {
                    $("#div").load('success.php');
                    $("form#checkboxes > input[type='checkbox']").removeAttr('checked');
                }
            });
        });
    });
</script> 
```

# android - Logcat 出现空指针异常？

> ID：11237143
> 
> 赞同：0
> 
> 时间：2012-06-28T01:56:41.670
> 
> 标签：android, listview

我的历史列表视图有一些问题。在 logcat 上，它指出问题的原因是 new_item。

这是我的代码

```
c.mDbHelper.fetchAllNotes();
    Item new_item;    
for (i=0; i<c.getCount(); i++) {

    new_item.set(c.getString(1), c.getString(2), c.getInt(4), Uri.parse(c.getString(5)));
    item.add(new_item);
    c.moveToNext();
} 
```

项目是我做的一个类。这是 set() 方法。

```
public void set(String name, String code, int qty, Uri imageuri){
    this.name = name;
    this.code = code;
    this.qty = qty;
    this.imageuri = imageuri;
} 
```

这是我的日志猫

```
06-28 09:12:49.528: E/AndroidRuntime(818): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.avs.QRscanner/com.android.avs.QRscanner.ViewStock}: java.lang.NullPointerException
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.os.Looper.loop(Looper.java:123)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-28 09:12:49.528: E/AndroidRuntime(818):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 09:12:49.528: E/AndroidRuntime(818):  at java.lang.reflect.Method.invoke(Method.java:507)
06-28 09:12:49.528: E/AndroidRuntime(818):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-28 09:12:49.528: E/AndroidRuntime(818):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-28 09:12:49.528: E/AndroidRuntime(818):  at dalvik.system.NativeStart.main(Native Method)
06-28 09:12:49.528: E/AndroidRuntime(818): Caused by: java.lang.NullPointerException
06-28 09:12:49.528: E/AndroidRuntime(818):  at     com.android.avs.QRscanner.CustomAdapter.getCount(CustomAdapter.java:24)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.widget.ListView.setAdapter(ListView.java:454)
06-28 09:12:49.528: E/AndroidRuntime(818):  at com.android.avs.QRscanner.ViewStock.onCreate(ViewStock.java:36)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-28 09:12:49.528: E/AndroidRuntime(818):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-28 09:12:49.528: E/AndroidRuntime(818):  ... 11 more 
```

DbHelper 有 5 列，分别为 string、string、string、int、string（用于存储 Uri）

在此先感谢您的帮助。

编辑：将 new_item 添加到列表项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:15:00.160

是否需要初始化new_item，即（下面第3行）

```
c.mDbHelper.fetchAllNotes();
Item new_item;  // <-- Add this (thx jack57)
for (i=0; i<c.getCount(); i++) {
 new_item = new Item();    // <-- Initialize here to prevent NullPointerException
 new_item.set(c.getString(1), c.getString(2), c.getInt(4), Uri.parse(c.getString(5)));
 c.moveToNext();
} 
```

您可能想在`Item`某处使用该对象。在循环转到下一个`i`值后，它似乎丢失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T02:30:16.227

您应该使用 a`CursorAdapter`来显示您的内容`Cursor`，然后将其绑定到您的`ListView`with `setListAdapter`。

# scala - 调用没有“this”关键字的成员方法

> ID：11237147
> 
> 赞同：2
> 
> 时间：2012-06-28T01:57:02.823
> 
> 标签：scala

在 Scala 中，是否可以调用成员方法而不必调用自身的实例？

例如，有这个类：

```
class Model {
    def action(value : String) = {
        // Do action
    }
} 
```

此对象实现有效：

```
object MyModel extends Model {
    this action "doSomething"
} 
```

但我想做这样的事情：

```
object MyModel extends Model {
    action "doSomething"
} 
```

与 Java 属性文件一样，因为它是定义对象状态的一种巧妙方法。

我设法定义了一个别名`this`：

```
def declare = this 
```

但是在调用成员方法之前必须使用一个词是相同的问题。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T02:07:30.753

是的，但你必须使用括号：

```
object MyModel extends Model {
    action("doSomething")
} 
```

例如，有关何时可以省略或不能省略括号的更多详细信息，请参见此[答案。](https://stackoverflow.com/a/1182099/334519)

作为旁注，您还可以别名`this`如下：

```
object MyModel extends Model { declare =>
  declare action "doSomething"
} 
```

如果您想从嵌套类内部引用一个类，这通常很有用`this`——它比`Outer.this.x`在 Java 中编写要简单一些。

# c# - C# 从另一个线程启动计时器

> ID：11237149
> 
> 赞同：0
> 
> 时间：2012-06-28T01:57:28.437
> 
> 标签：c#

我有一个由主线程制作的计时器，现在如果我需要从另一个线程启动计时器，我该怎么做？

已解决：这是我的代码：

```
public delegate void MyDelegate();

if (this.InvokeRequired)
{
    BeginInvoke(new MyDelegate(delegate()
    {
        timer1.Start();
    }));
} 
```

# java - 我如何进行 5' 3"1/2 之类的测量，然后将其乘以 1.414 并在 android java 上以相同格式显示答案

> ID：11237152
> 
> 赞同：0
> 
> 时间：2012-06-28T01:57:52.663
> 
> 标签：java, android, fractions, inches

我正在做的是这个，我不理会 5' 然后我把 3" 除以 12 变成小数点，然后我将分子除以分母，然后我把它全部加起来并乘以 1.414 它可以工作但是我不知道如何显示英尺英寸和几分之一英寸

```
 c2c_fdecimal = f_num / f_den;
    c2c_fdeci_fft = c2c_fdecimal / 12.0;
    deci_of_foot = inchs / 12.0;
    total_travel= feet + c2c_fdeci_fft + deci_of_foot;

    toff_ftodeci = tkoff_numa / tkoff_dena;
    tkoff_inch = tkoff_inch / 12.0;
    sub_toff = toff_ftodeci / 12.0 + tkoff_inch;
    ans = (total_travel * ffformula) - sub_toff;
    //print out measurement format
    ansint = (int)ans;
    strip_inches = (int) ((ans - ansint) * 12.0); 
    //print answer
    editText2.setText(ansint + " ft" + strip_inches + " in"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:14:47.563

Here's how you'd figure out the feet and inches in Java:

```
double resultInInches; // you start with inches...
int feet = (int)(resultInInches / 12);
double rest = (resultInInches / 12) - feet;
int wholeInches = (int)rest;
rest = rest-wholeInches; // rest now holds the fraction of the inch, eg 0.4141 
```

Now all that's left to do is display `rest` as a fraction. I'm not familiar with what is or is not permitted in the Android SDK, and there's a bunch of ways to do this (see [this answer](https://stackoverflow.com/questions/474535/best-way-to-represent-a-fraction-in-java)).

# javascript - 事件被绑定两次或更多jquery

> ID：11237155
> 
> 赞同：0
> 
> 时间：2012-06-28T01:58:05.440
> 
> 标签：javascript, jquery

我正在尝试使用 javascript 动态生成 html。我正在点击我页面上的按钮。我的页面上有多个按钮导致我的元素被多次绑定，从而产生所需的结果以出现在按钮被单击的次数中。

我的问题是有什么东西可以检查一个元素是否已经绑定在 jquery 中？如果是这样，我如何将它与 jquery 中的 .live() 函数结合起来。

这是我的代码：

```
$(document).ready(

    function () {
        $(':button').live("click", ".textbox, :button", function () {
            alert("binding");
            $(".textbox").click(function () {
                defaultVal = this.defaultValue;
                if (this.defaultValue) {
                    this.value = "";
                }
            });
            $(".textbox").blur(function () {
                if (this.value == "") {
                    this.value = defaultVal;
                }
            });
            $('[name="numsets"]').blur(function () {
                if (!parseInt(this.value)) {
                    $(this).val("you need to enter a number");
                }
            });
            $('[name="weightrepbutton"]').click(function () {
                var $numsets = $(this).parent().children('[name="numsets"]');
                if ($numsets.val() != "you need to enter a number" && $numsets.val() != "Number of Sets") {
                    var numbersets = parseInt($numsets.val())
                    repandweight.call(this, numbersets)
                    $(this).hide();
                    $numsets.hide();
                }
            })
        });
    }); 
```

问题是第4行，每次点击一个按钮，之前绑定的所有函数似乎都绑定了两次同一个函数，这是个问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:19:45.620

你做了两次！一内一。取出外部绑定，它应该可以工作

```
$(document).ready(function () {

      $(document).on("click",".textbox",function () {
          defaultVal = this.defaultValue;
          if (this.defaultValue) {
               this.value = "";
          }
      });

      $(document).on("blur",".textbox",function () {
          var item=$(this);
          if (item.val() == "") {
               item.val(defaultVal);
          }
      });

      $(document).on("blur","input[name='numsets']",function () {
          var item=$(this);
          if (!parseInt(item.val())) {
                item.val("you need to enter a number");
          }
      });

      $(document).on("click","input[name='weightrepbutton']",function () {
                var $numsets = $(this).parent().children('[name="numsets"]');
                if ($numsets.val() != "you need to enter a number" && $numsets.val() != "Number of Sets") {
                    var numbersets = parseInt($numsets.val())
                    repandweight.call(this, numbersets)
                    $(this).hide();
                    $numsets.hide();
                }
      })            
    }); 
```

如果您使用的是 jQuery 1.7+ 版本，请考虑切换到 jQuery [on](http://api.jquery.com/on/)而不是`live`.

编辑：更新`live`为`on`OP 在评论中提到的。

# c# - 不完整的消息（C# TCP/IP 客户端）

> ID：11237156
> 
> 赞同：2
> 
> 时间：2012-06-28T01:58:10.873
> 
> 标签：c#, java, sockets, networking, tcp

首先，我绝对不是网络程序员。我尝试做的是在 Java 服务器和 C# 客户端之间进行非常简单的 TCP/IP 通信。

Java服务器：

```
 public void run(){   
try {
       // Open server socket
       _server = new ServerSocket(SERVER_PORT);
       _client = _server.accept();
                System.out.println("ComInterface: client connected.");
                // Wait for a client data output stream
                while(true){

                    // Receive message from client
                    BufferedReader is =
                            new BufferedReader(new InputStreamReader(_client.getInputStream()));
                    msg = is.readLine();

                    // Process message
                    if(msg!=null){
                        System.out.println("ComInterface: Message Received : <" + msg + ">.");
                        processMessage(msg); // Independant method
                    }
                    else{
                        System.out.println("ComInterface: client closed connection.");
                        _client.close();
                        _client = _server.accept();
                        System.out.println("ComInterface: client connected.");
                    }

                }

            } catch (IOException e) {
                e.printStackTrace();
            }
}

public void sendMessage(String msg){
        try {

            // Out stream
            DataOutputStream os = new DataOutputStream(_client.getOutputStream());

            os.writeBytes((String)(msg+"\n"+(char)13));
            os.flush();
            System.out.println("ComInterface: Message <" + msg + "> sent");

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    } 
```

这是 C# 客户端：

```
public class ComInterface : MonoBehaviour
    {
        public const String SERVER_IP = "127.0.0.1"; // Localhost
        public const int PORT = 1100; // Default port 
        public const int READ_BUFFER_SIZE = 5000; // 4.8828125 kilobytes

        private TcpClient _client;
        private ASCIIEncoding _asen;
        private byte[] _readBuffer;
        private String _msg;

        public Boolean connected { get; internal set; } // setter is for internal use only

        /**
         * Initialize internal variables (buffer, socket...)
         */
        public ComInterface()
        {
            connected = false;
            _client = new TcpClient();
            _asen = new ASCIIEncoding();
            _readBuffer = new Byte[READ_BUFFER_SIZE];
            _msg = String.Empty;
        }

        /**
         * Connect to server at SERVER_IP:PORT
         * Return true if connection was a success, or false if failure.
         */
        public Boolean Connect()
        {
            try
            {

                _client.Connect(SERVER_IP, PORT);
                connected = true;
                Array.Clear(_readBuffer, 0, _readBuffer.Length);
                Debug.Log("TCPClient: <Connect> Connected to the server");
                // Start an asynchronous read invoking ReceiveComMessage
                _client.GetStream().BeginRead(_readBuffer, 0, READ_BUFFER_SIZE, new AsyncCallback(ReceiveComMessage), _client.GetStream());
            }
            catch (Exception ex)
            {
                Debug.Log("TCPClient: <Connect> Cannot connect to the server - " + ex.Message);
                connected = false;
            }
            // Return connection state
            return connected;
        }

 /**
         * Received a message from Communicator
         */
        private void ReceiveComMessage(IAsyncResult ar)
        {
            int BytesRead;
            String msg;
            try
            {
                BytesRead = _client.GetStream().EndRead(ar);
                if (BytesRead < 1)
                {
                    // if no bytes were read server has close.  
                    Debug.Log("TCPClient: <ReceiveComMessage> The server has closed (BytesRead<1)");
                    this.Disconnect();
                    return;
                }
                // Convert the byte array the message was saved into,
                msg = Encoding.ASCII.GetString(_readBuffer);
                Debug.Log("C# Message: \"" + msg + "\""); // Output example in log below
                BytesRead = 0;
                Array.Clear(_readBuffer, 0, _readBuffer.Length);

                // Start a new asynchronous read into readBuffer.
                _client.GetStream().BeginRead(_readBuffer, 0, READ_BUFFER_SIZE, new AsyncCallback(ReceiveComMessage), _readBuffer);

            }
            catch (Exception ex)
            {
                Debug.Log("TCPClient: <ReceiveComMessage> The server has closed (Exception):" + ex.Message + " see " + ex.StackTrace);
                this.Disconnect();
            } 
```

主要问题是所有消息都到达不完整。这是日志跟踪：

```
C#: Message "{
C#: Message ""sender":"Bob"",
C#: Message ""recipient":",
etc... 
```

而不是例如

```
C#: Message "{"sender":"Bob","recipient":[1,2,3]}" 
```

我有点困惑，我需要一些帮助来解决这个问题。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:19:19.113

[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)是面向流的连接，而不是面向消息的连接。它没有消息的概念。当你写出你的序列化字符串时，它只会看到一个毫无意义的字节序列。TCP 可以自由地将该流分解为多个片段，并且它们将在客户端以这些片段大小的块的形式接收。您可以在另一端重建整个消息。

在您的场景中，通常会发送消息长度前缀。这样，客户端首先读取长度前缀，然后它就可以知道传入消息应该有多大。

我会认真考虑使用 Google 的[协议缓冲区](http://code.google.com/p/protobuf/)之类的东西作为声明消息然后使用大小前缀选项流式传输它们的好方法。好处是您定义了一组消息，然后使用可用的[工具](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)从消息定义中自动生成 C++、Java、C# 等代码。这将有助于拥有在不同语言之间工作的一致消息集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:52:59.997

一条消息（我的意思是任何数据）在通过套接字发送时，被分成**几个数据包**。打印每个收到的数据包时，您看不到整个消息。

您应该定义*消息*字符串的结尾（类似于“.#.”）。在您收到此序列之前，您会一直连接收到的消息。

这就是*会话协议*（即在 TCP 之上运行的协议）所做的事情。

希望这可以帮助。

问候， 卡里尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:56:48.383

看看这个例子……

Java TCP 服务器...

```
import java.net.*;
import java.io.*;

public class TcpServer
{
    public static void main(String h[])
    {
        try
        {
            ServerSocket serverSocket = new ServerSocket(1100);
            Socket socket = serverSocket.accept();
            System.out.println("Client Accepted");
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            System.out.println("Received: " + bufferedReader.readLine());
            PrintWriter printWriter = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true);
            printWriter.println("Hello Theo. Welcome to socket programming.");
        } catch (Exception e)
        {
            System.out.println(e);
        }
    }
} 
```

C# TCP 客户端...

```
using System;
using System.IO;
using System.Net.Sockets;

class Program
{
    static void Main(string[] args)
    {
        try
        {
            var client = new TcpClient("localhost", 1100);
            var stream = client.GetStream();
            var streamWriter = new StreamWriter(stream);
            streamWriter.WriteLine("My name is Theo");
            streamWriter.Flush();
            var streamReader = new StreamReader(stream);
            Console.WriteLine("Received: " + streamReader.ReadLine());
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }

        Console.WriteLine("Press a key to continue.");
        Console.ReadKey();
    }
} 
```

# php - 比较php中的两个字符串获取不匹配的字符数？

> ID：11237159
> 
> 赞同：2
> 
> 时间：2012-06-28T01:58:34.713
> 
> 标签：php

有些用户喜欢用大写来写帖子标题，这完全是烦人的。我不想让他们再写一次，我想知道他们写的标题的百分比是大写的，所以如果超过 50%，我只需应用 strtolower。

我的想法是将他们的字符串转换为小写，看看它与原始字符串有什么不同（3 个不同的字符意味着最初有 3 个大写字符）：

```
$title = 'AAAA';
$title2 =  strtolower($title); 
```

如何比较 $title 和 $title2 以获得不匹配的字符数？

例如：

```
$title = 'AAAa'
$title2 = 'aaaa'

$differences = '3'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T02:03:05.243

```
$title = 'AAAa';
$title2 =  strtolower($title);
$differences = 0;
for ($i=0,$l=strlen($title); $i < $l; $i++) {
  if ($title{$i} !== $title2{$i}) {
    $differences++;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:09:04.693

你可以试试[`levenshtein($title,$title2,1,1000,1000000)`](http://php.net/levenshtein)。在得到的数字中，单位告诉您必须添加多少个字母，千位告诉您更改了多少（可能是您最想要的），百万告诉您删除的字母数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T03:57:09.753

使用 PHP 的本机函数[similar_text()](http://www.php.net/manual/pt_BR/function.similar-text.php)我想你会得到你想要的。使用示例：

```
$title = 'AAAa';
$title2 = 'aaaa';

similar_text ( $title , $title2, $percentege );

echo $percentege . '%'; // Output: 25% 
```

你也可以这样使用它：

```
echo similar_text ( $title , $title2 ); // Output: 1 
```

第一种用法返回两个字符串之间的相似度百分比，第二种用法返回两个字符串具有的相似字符的数量。

希望它可以帮助你！

# forms - Cakephp 控制器不处理表单数据

> ID：11237160
> 
> 赞同：1
> 
> 时间：2012-06-28T01:58:48.927
> 
> 标签：forms, cakephp, cakephp-1.3

嗨，我是 cakephp 的新手（v.1.3）。我正在尝试做一些简单的事情。

我有两个表：fichas[id,... etc] 和 labos[id,laboratorio,ficha_id] 所以“labos”属于“fichas”。（labos.laboratorio 是 ENUM 字段）。

我想查看给定 labos.id 和 labos.laboratorio 的“ficha”，所以我在“home.ctp”中包含了以下代码

```
<h3>Mostrar Ficha</h3>
<?php echo $this->Form->create('ficha',array('action'=>'localiza'));?>
<?php echo $this->Form->radio('laboratorio',array('A','B','C'),array('A','B','C')); ?>
<?php echo $this->Form->input('id',array('label'=>'Numero','type'=>'text')); ?>
<?php echo $this->Form->end("Mostrar");?> 
```

然后在“fichas_controller.php”中添加以下内容：

```
function localiza(){

    $laboratorio=$this->data['Ficha']['laboratorio'];
    $id=$this->data['Ficha']['id'];
    if(!$id){
            $this->Session->setFlash('Por favor introduzca un valor valido');
            $this->redirect(array('action'=>'index'));
        }

    $this->set('fichas',$this->Ficha->findID($id,$laboratorio));

} 
```

最后在模型“ficha.php”中如下：

```
function findID($id=null,$laboratorio=null){
    return $this->find('all',array('conditions'=>array('Labo.laboratorio'=>$laboratorio,'Labo.id'=>$id)));
} 
```

显然文件views/fichas/localiza.ctp 存在

问题是当我按下表单中的提交按钮时，它只会重新加载 home.ctp 页面。看起来控制器的代码没有被执行，因为我试图强制错误消息应该加载索引操作，将 if 条件更改为 true，但结果相同。我已经更改了模型中函数的名称，期望出现错误，但我得到了相同的结果。我在 home.ctp 页面中有另外两个表单，但调用了另一个操作和模型。其中一个几乎相同，并且工作正常。我无法弄清楚错误。

提前感谢您的帮助。马塞洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:07:17.010

数组键`$this->data['Ficha']`可能不存在。你已经创建了小写的“ficha”形式，这个名字应该大写，否则数据在`$this->data['ficha']`. 所以表单创建调用看起来像这样：

```
<?php echo $this->Form->create('Ficha',array('action'=>'localiza'));?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:50:10.153

您可能已将 home.ctp 文件添加到另一个控制器中。尝试在以下行中添加控制器：

```
<?php echo $this->Form->create('ficha',array('controller' => 'fichas', 'action'=>'localiza'));?> 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:11:27.627

您可以在 Cake 上通过两种方式进行调试

```
Configure::write('debug', 2);
debug($this->data); 
```

或者

其他 PHP 方式

```
print_r($this->data); 
```

这样，您将知道您是否正确传递了 data->params。

为什么你的模型第一个字符是小写的？它应该是

*   菲查斯
*   拉博斯

然后，如果您愿意，您可以在控制器上直接查找。

$d = $this->Fichas->find('all', array();

# installation - 如何知道用户在摆动面板中选择的 JDK 的位版本

> ID：11237161
> 
> 赞同：2
> 
> 时间：2012-06-28T01:59:07.150
> 
> 标签：installation, java

我们的软件有一个用于列出 jdk 安装路径的摆动面板。例如，如果用户的 PC 中安装了 4 个 jdk，并且 jdk 路径在面板中列出：

1.  C:\Java\jdk1.5.0_19\bin\java.exe

2.  D:\software\Java6\jdk1.6.0_31\bin\java.exe

3.  D:\软件\Java6\jdk1.6.0_31_64\bin\java.exe

4.  D:\installedapp\jdk1.7.0_03\bin\java.exe

用户需要选择其中一个 jdk 安装路径来安装我们的软件。我们想知道用户选择的 jdk 的位版本（32 位或 64 位），我们该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:58:47.290

好吧，如果您知道位置，您可能会`Runtime.exec("pathToJavaInstallPath/bin/java.exe -version")`以这种方式使用和捕获版本。这至少是一种蛮力方式。

样本输出：

```
java version "1.6.0_32"
Java(TM) SE Runtime Environment (build 1.6.0_32-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.7-b02, mixed mode) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:09:11.027

您还可以使用[`GetBinaryType`](http://msdn.microsoft.com/en-us/library/aa364819%28VS.85%29.aspx)Win32 API 函数来确定给定的 .exe 是 32 位还是 64 位。

有关详细信息，请参阅问题[如何检测给定的 PE 文件（exe 或 dll）是 64 位还是 32 位](https://stackoverflow.com/questions/1153090/how-to-detect-that-a-given-pe-file-exe-or-dll-is-64-bit-or-32-bit) 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T02:10:29.080

您可以使用“java.version”属性读取正在执行的 Java 版本：

*   [http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

您还可以阅读架构（例如 x86 与 amd64）、操作系统和 JRE 主页。

# jquery - 检查验证后jquery提交表单

> ID：11237163
> 
> 赞同：1
> 
> 时间：2012-06-28T01:59:20.363
> 
> 标签：jquery, ajax

如果用户使用 jquery 在没有更改 url 的情况下选中复选框，我需要将用户从索引页面重定向到另一个名为“free.php”的页面。我在这里创建了一个示例，

> [http://jsfiddle.net/jKHQe/](http://jsfiddle.net/jKHQe/)

这里的复选框正在验证，但我无法重定向到 free.php。虽然我是 jquery 和 ajax 的新手，但我找不到答案。我需要在我的代码中更改什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:07:57.127

`$.ajax`除非您在其中一个处理程序中进行物理重定向，否则无法使用调用进行重定向。但是，这会破坏您不更改浏览器网址的意图。

不更改浏览器 URL 的唯一方法是：

*   合并一个`iframe`and 并将其源更改为`free.php`
*   处理 ajax 调用并将响应注入到页面上当前的元素中。

* * *

处理`ajax`并将`HTML`响应注入`free.php`到`DOM`：

```
$.ajax({
    type: "POST",
    url: "free.php",
    data: formdata,
    dataType : 'html',
    success : function(html) { $('div.result').html(html); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:07:33.773

为什么不将操作设置为 free.php 并删除 ajax 调用？所以它会是：

```
$("#agreeForm").submit(function()
{

    if (!$("#agree").is(':checked'))  
    {
    document.getElementById("err").innerHTML="you must agree to terms if you would like to access web";
              return false;

    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:08:40.387

我不认为`$.ajax`这是您希望从您的描述中做的事情，$.ajax() 用于调用页面并从中获得响应而无需重新加载。

我会一起删除 ajax 调用，并将您的表单标题更改为`<form method="POST" action="free.php" id="agreeForm" name="Agree">`

```
$(document).ready(function() {
   $("#agreeForm").submit(function()
    {
      if (!$("#agree").is(':checked'))  
      {
         document.getElementById("err").innerHTML="you must agree to terms if you would like to access web";
         return false;

      } 
   });
}); 
```

# c# - c#如何添加响应消息的链接

> ID：11237165
> 
> 赞同：0
> 
> 时间：2012-06-28T01:59:52.303
> 
> 标签：c#, user-controls, response

我有一个要添加链接的 html 响应消息。是否可以添加以下链接：

```
responseMsg.InnerText = "Your postcode is in the network, so please proceed to Step 2."; 
```

我尝试了以下方法，但它导致用户控件崩溃：

```
responseMsg.InnerText = "Your postcode is in the network, so please <a href="#">proceed to Step 2</a>."; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:22:59.927

尝试设置`InnerHtml`：

```
responseMsg.InnerHtml = "Your postcode is in the network, so please <a href='#'>proceed to Step 2</a>."; 
```

使用可以转义锚标记中的双引号，例如`<a href=\"#\">...</a>`

或者您可以使用单引号，例如`<a href='#'>...</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:15:41.527

更改单引号的双引号

```
responseMsg.InnerText = "Your postcode is in the network, so please "<a href='http://proceedtosteptwo.aspx' title='this is a test'>proceed to Step 2</a>"; 
```

我希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:04:57.207

你可以做任何一种方式

转义引号

```
responseMsg.InnerText = "Your postcode is in the network, so please <a href=\"#\">proceed to Step 2</a>."; 
```

或在 href 上使用单引号

```
responseMsg.InnerText = "Your postcode is in the network, so please <a href='#'>proceed to Step 2</a>."; 
```

# javascript - jQuery 对话框中的 javascript setInterval() 不会在销毁或删除时停止

> ID：11237167
> 
> 赞同：0
> 
> 时间：2012-06-28T02:00:09.340
> 
> 标签：javascript, jquery, ajax, jquery-ui

我有一个出现并加载外部页面的 jQuery 对话框。在该页面中，我正在运行一个`setInterval()`函数，该函数每 1 秒（AJAX）连续查询我的服务器。问题是当我关闭对话框时，setInterval 并没有停止运行。

这是对话框的代码：

```
var theUrl = 'someUrl';

var popUp = document.createElement('div');

$(popUp).dialog({
        width: 400,
        height: 270,
        title: "Some Title",
        autoOpen: true,
        resizable:false,
        close: function(ev, ui) {
                    $(this).dialog('destroy');
               },
        modal: true,
        open: function() { 
                    $(this).load(theUrl);
              }
}); 
```

我试着打电话和`$(this).dialog('destroy')`关闭。没有任何效果。无论如何“卸载”加载的页面？`$(this).remove()``document.body.removeChild(popUp)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:03:29.237

`setInterval`返回一个处理程序，您可以将其传递给以`clearInterval`停止函数运行。这是它如何工作的基本示例。

```
var handler = setInterval(function() {}, 2000);
clearInterval(handler); 
```

对于你的例子，你想打电话`clearInterval`对于您的示例，`close`调用.`ui.dialog`

文件：

`setInterval`- [https://developer.mozilla.org/en/window.setInterval](https://developer.mozilla.org/en/window.setInterval)

`clearInterval`- [https://developer.mozilla.org/en/DOM/window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)

**编辑**

`clearInterval`如果没有存储的处理程序 from ，您将无法调用`setInterval`，因此如果调用`setInterval`是在另一个脚本中，那么您要捕获处理程序的唯一方法是覆盖`window.setInterval`自身。

```
$(function() {
    var originalSetInterval = window.setInterval;
    var handlers = [];

    window.setInterval = function() {
        handlers.push(arguments[0]);
        originalSetInterval(arguments);
    };

    $('whatever').dialog({
        close: function() {
            for (var i = 0; i < handlers.length; i++) {
                clearInterval(handlers[i]);
            }
            handlers = [];
        }
    });
}); 
```

请注意，要覆盖的代码`window.setInterval`必须在包含`<script>`要引入外部文件的标记之前出现。此外，这种方法将在调用时清除所有间隔函数`clearInterval`，因此这并不理想，但这是您完成此任务的唯一方法。

# c - 包含 gcc 的链接器选项

> ID：11237169
> 
> 赞同：2
> 
> 时间：2012-06-28T02:00:31.817
> 
> 标签：c, gcc, linker, linker-errors

我编译了一个项目并在我的系统上运行它，它做得很好。

我将它上传到 git 并要求我的管理员在服务器上运行它，它说`undefined reference to 'clock_gettime'`. 可以通过使用`-lrt`选项链接库来解决此错误。之前我也遇到过类似的问题，但这与在选项`math.h`的帮助下链接库有关。`-lm`

有没有办法找到要链接的所有库，这样您就不会遇到此类问题，也不会在管理员面前感到尴尬。如何决定要链接的所有库。可以有一个思考过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:06:20.987

对于基于 *nix 的机器，`ldd`可执行文件将打印共享库依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T02:55:03.690

有些`man`页面会提到应该使用的标题和库。（不幸的是，并非所有页面都如此。）

例如，查看`man 3 signal`. 在我的系统上，该页面`LIBRARY`的顶部有一个部分`Standard C Library (libc, -lc)`，后面是一个`SYNOPSIS`部分`#include <signal.h>`。

其他一些策略包括：

*   在 shell 循环中直接使用`strings`piped to`egrep`在已安装的库中搜索对名称的引用。这可能会为常用名称返回大量误报，但对于与单个英文单词不匹配的复杂函数名称非常有效。

*   迭代编译和链接。如果您尝试解析单个函数，请编写一个调用该函数的小程序，并使用 shell 或 makefile 循环来测试系统上的每个单个库（从最有可能来自`/usr/lib`其他地方或其他任何地方的候选库开始）。在某个时候，构建会成功并向您展示正确的库。这种方法需要一些工作来设置，但是您创建的基础架构也很容易在将来重用。

*   使用链接器的工具（例如`otool`，在 Mac OS X`objdump`或`readelf`Solaris 或 Linux 上）反复检查二进制文件。例如，尝试从特定名称（`otool -v -t -p _symbol`在 Mac OS X 上）开始反汇编库的文本部分。

# c - #包含C中的路径

> ID：11237173
> 
> 赞同：0
> 
> 时间：2012-06-28T02:01:30.087
> 
> 标签：c

> **可能重复：**
> [如何将目录添加到 C 标头包含路径？](https://stackoverflow.com/questions/4825652/how-do-i-add-a-directory-to-c-header-include-path)

我想为我的`mysql.h`文件设置一个包含路径，该路径位于另一个位置，例如：`"root/a/b/c"`.

我试过了：

```
#include "/a/b/c/mysql.h" 
```

但它不编译。我错过了一个选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:05:13.717

在您的`.c`文件中，您可以使用相对路径来包含该`.h`文件。例如，如果`.c`文件在`/d/e/f/g`文件夹中并且`.h`文件在`/a/b/c`文件夹中，那么您的`#include`语句必须是

```
#include "../../../../a/b/c/mysql.h" 
```

如果斜线的数量在 1 或 2 左右（2 已经有点脏），这是可以接受的。如果您稍后移动文件夹，那就不好了。

或者，您只能指定`.h`文件的名称，并使用`-I <dir>`您替换为包含文件`<dir>`的文件夹路径的标志`.h`。如果您移动文件夹，您只需在编译命令中进行一些更改（通常在生成文件中）。

# arrays - 数组大小限制在 VBA 中传递数组参数

> ID：11237195
> 
> 赞同：5
> 
> 时间：2012-06-28T02:05:26.590
> 
> 标签：arrays, vba, excel

Excel-VBA 2007 似乎对作为参数传递的数组大小有 64k 限制。

有人知道修复或解决方法吗？

这是代码：

```
Public Function funA(n)
    Dim ar()
    ReDim ar(n)
    funA = ar
End Function

Public Function funB(x)
    funB = UBound(x)
End Function 
```

从 Excel：

```
=funB(funA(2^16-1))   '65536 as expected

=funB(funA(2^16))    'Gives a #VALUE 
```

往里看，funA() 工作正常，但传递给 funB，参数 x 是错误 2015。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:38:15.307

我认为这是电子表格单元格本身的限制，而不是 VBA。Excel 可以在函数之间传递大于 2^16 的数组，但显然它不能在单元格中包含该大小的数组。

作为一个实验，`funA(2^16)`在单元格公式中突出显示并按 F9 - 它会给你一个`'#VALUE!'`错误。

`funA`因为公式在启动之前已经计算出结果，所以`funB`它试图`funB`在已经计算出错误的函数上运行。

这似乎是一种解决方法，就像 Brad 发布的那样（即`funB(funA(n))`在自身内部计算的第三个函数）在计算完成之前将单元格排除在等式之外，所以它工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T08:16:42.693

因为一维数组作为一行列传递回 Excel，所以您已经达到 Excel 2007 对列数 (64K) 的限制。

如果您将数组设为二维并作为行返回，则它应该可以工作：

```
Public Function funA(n)
    Dim ar()
    ReDim ar(n,1)
    funA = ar
End Function 
```

或者，您可以使用 Transpose 将数组从行旋转到列，但这可能不如首先创建二维数组有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T02:51:07.157

这似乎与我能找到的解决方法一样接近。从 VBA 执行函数间调用

如果你做这样的事情

```
Public Function funBA(n As Variant) As Variant
    funBA = funB(funA(n))
End Function 
```

它似乎可以工作到 n=2^24=2^8^3 （这看起来不像 VBA 中的任何数据类型断点，这是挂断的地方，但这是一个相当大的数组）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T03:00:10.503

这不是 VBA 问题，因为您可以运行它并且不会出现错误

```
Public Sub test()

  x = funB(funA(2 ^ 16 - 1))
  y = funB(funA(2 ^ 16))

  Debug.Print x; y

End Sub 
```

将其传递回 Excel 似乎是一个问题 - 文档不多，但似乎是 Excel 限制。

这是另一个链接，但没有解决方案[WorksheetFunction 数组大小限制](https://stackoverflow.com/questions/7024826/worksheetfunction-array-size-limit)

和另一个 [http://answers.microsoft.com/en-us/office/forum/office_2007-excel/passing-arrays-to-excel-worksheet-functions-in/56d76732-9a15-4fd2-9cad-41263a4045d4](http://answers.microsoft.com/en-us/office/forum/office_2007-excel/passing-arrays-to-excel-worksheet-functions-in/56d76732-9a15-4fd2-9cad-41263a4045d4)

# apache - htaccess 重定向.com 中的特殊字符匹配？

> ID：11237199
> 
> 赞同：0
> 
> 时间：2012-06-28T02:06:15.497
> 
> 标签：apache, .htaccess, mod-rewrite

我试图以这样的格式创建一个 SEO 友好的 url

```
http://web_url/news/**news_title**/**newsid** 
```

被重定向到

```
http://web_url/index.php?t=news&newsid=newsid 
```

我编写了以下 .htaccess 规则，但只要 url 格式没有特殊字符，它就会失败，但是一旦 url 中出现特殊字符，它就会失败

```
eg. http://web_url/news/mywebsite.com is live!/4 
```

这是我的规则：

```
RewriteRule ^news/([a-zA-Z0-9_-]+)/([0-9]+)$ index.php?t=news&newsid=$2

RewriteRule ^news/([a-zA-Z0-9_-]+)/([0-9]+)/$ index.php?t=news&newsid=$2 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:46:05.130

只需使用

```
RewriteRule ^news/([^/]+)/([0-9]+)/?$ index.php?t=news&newsid=$2 
```

而不是两个规则。

# html - 没有垂直单元格边框的表格

> ID：11237204
> 
> 赞同：15
> 
> 时间：2012-06-28T02:07:18.830
> 
> 标签：html, css, html-table

我希望我的 HTML 表格只显示水平单元格边框。有没有办法可以隐藏垂直单元格边框？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T02:12:40.213

You can add strictly horizontal border lines by styling `tr` tags via CSS.

Example CSS:

```
tr {
    border-bottom: 1px solid black;
    border-top: 1px solid black;
    border-collapse: collapse;
}​ 
```

Of course, you can use any border style/width/color you choose.

JS Fiddle: [http://jsfiddle.net/XPyzM/](http://jsfiddle.net/XPyzM/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T04:42:46.873

```
table, th, td {
  border-left: none;
  border-right: none;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T02:10:09.983

假设您使用的是 old-style `<table border="1">`，请 make it `<table border="1" rules="rows">`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-27T01:31:37.607

```
<style>
  td {border-left: 1px solid black;}
</style> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-24T00:55:35.957

我终于想通了，您需要将`border-collapse`属性设置为`table`！

CSS：

```
table {
    border-collapse: collapse;
}

tr {
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
} 
```

你的桌子只有水平线！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-31T10:12:31.960

```
th, td {
  border-bottom: 1px solid #ddd;
} 
```

见[https://www.w3schools.com/css/css_table.asp](https://www.w3schools.com/css/css_table.asp)

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2013-07-12T10:57:24.020

您可以通过 CSS 设置 tr 标签的样式来添加严格的水平边框线。

```
<TABLE 
    BORDER=1 CELLPADDING=3 CELLSPACING=1 
    RULES=COLS FRAME=BOX
> 
```

# mysql - 如何获取外键使用的表名

> ID：11237209
> 
> 赞同：0
> 
> 时间：2012-06-28T02:08:25.397
> 
> 标签：mysql, jpa, entity, primary-key

我使用了 JPA 和 mysql。每个表都有实体类。我有四个表。

**表 1：学生表**

```
studentId(PK), studentName 
1              jack
2              robert
3              tom
4              smith 
```

**表 2：roll_table**

```
rollId(PK), studentId(FK) 
10001          1
10002          2
10003          3
10004          4 
```

**表3：地址表**

```
addressId(PK)  City          studentId(FK) 
1               Washngton       1
2               NewYork1        2
3               Newyork2        3
4               Wasington2      4 
```

**表4：contact_table**

```
------------------------------------------------
contactId(pk) phoneNumber email studentId(FK) 
------------------------------------------------

---------------------------------------------- 
```

基表是“student_table”。'studentId' 是该表的主键。

剩下的 3 个表都使用了这个 studentId 作为外键。共有 3 个表包含数据。一张表没有任何数据。

**如果数据存在其他表，我需要为“studentId = 2 使用的表名和表计数”编写查询。否则是否有任何其他逻辑来获取此信息。**

就像现在 studentId = 2 使用了两个表。所以结果是*(roll_table,address_table)*
假设联系人表有studentId=2的数据，那么结果是*(roll_table,address_table,contact_table)*

帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:31:28.530

尝试左连接，它可以帮助您显示左表（学生姓名）中的所有记录，即使右表（roll_table，address_table，contact_table）上没有匹配项

```
 SELECT student_table.studentId,student_table.studentName
 FROM student_table
 LEFT JOIN roll_table ON student_table.studentId = roll_table.studentId
 LEFT JOIN address_table ON student_table.studentId = address_table.studentId
 LEFT JOIN contact_table ON student_table.studentId = contact_table.studentId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:53:34.483

试试这个查询

```
SELECT * FROM information_schema.KEY_COLUMN_USAGE 
         WHERE REFERENCED_TABLE_NAME = 'Your base table name'
         AND TABLE_SCHEMA='DataBaseName' 
         AND REFERENCED_COLUMN_NAME = 'coloumnName' 
```

例子

```
 SELECT * FROM information_schema.KEY_COLUMN_USAGE 
         WHERE REFERENCED_TABLE_NAME = 'student_table'
         AND TABLE_SCHEMA='student_dataBase' 
         AND REFERENCED_COLUMN_NAME = 'studentId' 
```

# android - 在资产/字体文件夹中导入机器人字体后，我的应用滚动非常糟糕

> ID：11237214
> 
> 赞同：4
> 
> 时间：2012-06-28T02:09:23.417
> 
> 标签：android, performance, fonts, scroll

我的应用程序运行android冰淇淋三明治，在字体文件夹中导入roboto.ttf和roboto-bold.ttf字体并使用这些字体设置四个文本视图之后，滚动列表视图时非常（非常）慢。有谁知道优化性能的方法？是否有任何提高速度的提示和技巧？

我澄清在插入这些代码行之前它非常顺利：

```
Typeface roboto = Typeface.createFromAsset(activity.getAssets(), "fonts/Roboto-Regular.ttf");
    Typeface robotobold = Typeface.createFromAsset(activity.getAssets(), "fonts/Roboto-Bold.ttf");
    nome.setTypeface(robotobold);
    mq.setTypeface(roboto);
    citta.setTypeface(roboto);
    prezzo.setTypeface(roboto);
    descrizione.setTypeface(roboto); 
```

我添加了可以帮助进行字体缓存的类：

```
public class TypefaceCache {
  private final HashMap<String, Typeface> map;
  private Context con;
  public TypefaceCache(Context con) {
              map = new HashMap<String, Typeface>();
              this.con = con;
  }

  public Typeface getTypeface(String file) {
    Typeface result = map.get(file);
    if (result == null) {
      result = Typeface.createFromAsset(con.getAssets(), file);
      map.put(file, result);
    }
    return result;
  }
} 
```

我通过调用类和字体

```
 TypefaceCache typecache = new TypefaceCache(activity);
    Typeface roboto = typecache.getTypeface("fonts/Roboto-Regular.ttf"); 
```

但结果是一样的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T02:55:54.953

您可以尝试缓存您的`Typeface`.

```
public class TypefaceCache {
  private final HashMap<String, Typeface> map =
      new HashMap<String, Typeface>();

  private Typeface getTypeface(String file, Context context) {
    Typeface result = map.get(file);
    if (result == null) {
      result = Typeface.createFromAsset(context.getAssets(), file);
      map.put(file, result);
    }
    return result;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:18:14.870

不久前我遇到了这个问题，解决方案是将类设置为静态，就像在这个[博客](http://www.levinotik.com/2011/09/22/custom-fonts-in-android-can-cause-issues-heres-how-to-fix-it/)中描述的一样；

```
public class TypefaceSingleton {  
    private static TypefaceSingleton instance = new TypefaceSingleton();  
    private TypefaceSingleton() {}  

    public static TypefaceSingleton getInstance() { 
        return instance; 
    }  
    public Typeface getTypeface() { 
        return Typeface.createFromAsset(ThinkNearApp.getContext().getResources().getAssets(), "fonts/Roboto-Bold.ttf"); 
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:33:06.600

这是我的解决方案：在我启动 ui 的异步任务中，我插入类变量

```
private final HashMap<String, Typeface> map; 
```

然后我通过类构造函数初始化它

```
map = new HashMap<String, Typeface>(); 
```

我实现了在类中加载我的字体的方法：

```
private Typeface getTypeface(String file, Context context) {
    Typeface result = map.get(file);
    if (result == null) {
      result = Typeface.createFromAsset(context.getAssets(), file);
      map.put(file, result);
    }
    return result;
} 
```

然后，每当我想在异步任务中，我添加我最喜欢的字体，我加载到我的文本视图上，一切都非常顺利。谢谢你们

# asp.net-mvc-3 - 两个控制器动作（共享同一个模型）使用同一个视图

> ID：11237215
> 
> 赞同：0
> 
> 时间：2012-06-28T02:09:26.570
> 
> 标签：asp.net-mvc-3

我有两个控制器动作都共享相同的模型。我可以在同一个视图中返回它们吗？

原因是我需要在一个视图中显示 2 个类别。一个类别显示所有用户 IN 角色，另一个类别显示用户 NOT IN 角色。

想知道我该怎么做？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:48:21.727

当然是。对于控制器中的不同操作，您可以拥有相同的模型和视图。在这里，我将向您展示如何为*创建*和*编辑*操作创建 1 个视图。

1两种行动的**模型**：

```
public class CreateEditModel
{
    public CreateEditViewMode Mode { get; set; }
    public string AnOtherProperty { get; set; }
}

public enum CreateEditViewMode { Create, Edit } 
```

的属性`Mode`将`CreateEditModel`帮助我们自定义每个动作的视图。

**行动：**

```
 public ActionResult Create()
    {
        Models.CreateEditModel model = new Models.CreateEditModel();
        model.Mode = Models.CreateEditViewMode.Create;
        //Manipulate model
        return View("CreateEdit", model);
    }

    [HttpPost]
    public ActionResult Create(FormCollection collection)
    {
        // TODO: Add insert logic here
        return RedirectToAction("Index");
    }

    public ActionResult Edit(int id)
    {
        Models.CreateEditModel model = new Models.CreateEditModel();
        model.Mode = Models.CreateEditViewMode.Edit;
        //Manipulate model
        return View("CreateEdit", model);
    }

    [HttpPost]
    public ActionResult Edit(int id, FormCollection collection)
    {
        // TODO: Add update logic here
        return RedirectToAction("Index");
    } 
```

`model.Mode`请注意我们如何在操作中分配`[HttpGet]`： 1\. 我们可以自定义视图。2.查看可以发回正确的`[HttpPost]`动作。

两个动作的1 个**视图**：

```
@using MvcApplication1.Models
@model MvcApplication1.Models.CreateEditModel
@{
    ViewBag.Title = @Model.Mode.ToString();
}

<h2>@Model.Mode.ToString()</h2>

@using (Html.BeginForm(Model.Mode.ToString(), "Home"))
{
   <input type="submit"
          value="@(Model.Mode == CreateEditViewMode.Create ? "Create" : "Update")" />
} 
```

棘手的部分是使用[Method的以下](http://msdn.microsoft.com/en-us/library/dd492590.aspx)[重载`FormExtensions.BeginForm()`](http://msdn.microsoft.com/en-us/library/dd492590.aspx)：

```
 public static MvcForm BeginForm(
      this HtmlHelper htmlHelper,
      string actionName,
      string controllerName
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:48:48.373

如果我正确理解了您的问题，您希望一个视图显示两个不同的用户列表：给定角色的用户列表和不属于给定角色的用户列表。

这是完全可能的——使用`ViewModel`. 您创建一个具有视图所需的所有不同属性的类，并将其用作视图的模型。修改您的控制器操作以设置所有必要的属性

例如

视图模型

```
public class UserListViewModel
{
   public string Role { get; set; }
   public List<User> UsersInRole { get; set; }
   public List<User> UsersNotInRole  { get; set; }
} 
```

控制器动作

```
public ActionResult ShowRoleDetails ( string role ) {

    var model = new UserListViewModel();

    model.Role = role;
    model.UsersInRole = //some code to get users in the given role
    model.UsersNotInRole  = //some code to get users not in the given role

    return View(model);
} 
```

风景

```
@model ViewModel
...

<h1>Users in @Model.Role</h1>
@foreach (var user in Model.UsersInRole)
{
   <p>@user.Name
}

<h1>Users not in @Model.Role</h1>
@foreach (var user in Model.UsersNotInRole)
{
   <p>@user.Name
} 
```

# android - 在 android home 小部件中获取 TextView 的文本（不在活动中）？

> ID：11237217
> 
> 赞同：2
> 
> 时间：2012-06-28T02:09:59.130
> 
> 标签：android, widget, textview

我刚开始使用 android home 小部件进行编程，所以我可以通过 settextviewtext() 从我的小部件提供程序将文本设置为 home 小部件中的 textview，但是当我想从中获取文本时，我没有理想。不能像在活动中一样正常使用 findViewById()，然后使用 getText()。有没有办法从小部件提供者那里获取主页小部件中的 textview 文本？或者告诉我如何从另一个活动中获得？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T03:33:47.790

[`CommonsWare`](https://stackoverflow.com/users/115145/commonsware)在[这个问题](https://stackoverflow.com/questions/10969019/retrieve-text-from-textbox-in-android-widget/10969042#10969042)中说：

> 你不能。应用小部件是只写的：您可以向它们推送数据，但不能读取它们。
> 
> 相反，当您使用新文本更新应用小部件时，您需要将该文本存储在某个地方，也许是在一个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:14:31.150

[read this](http://www.vogella.com/articles/AndroidWidgets/article.html) for widget tutorial and what you can do with it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-19T11:21:58.777

1.  在您实例化 App Widget 布局和显示的地方，请编写以下代码：

    ```
     SharedPreferences settings = 
     PreferenceManager.getDefaultSharedPreferences(context);
     @SuppressLint("CommitPrefEdits")
     SharedPreferences.Editor  editor = settings.edit();
     String rowid = "500"; 
     editor.putString("appWidgetRowId", rowid);
     editor.apply(); 
    ```

2.  然后得到那个rowid（意思是500），在AppWidgetProvider中写下这个：

    ```
    @Override
         public void onReceive(final Context context, Intent intent) {
             super.onReceive(context, intent);

     SharedPreferences settings = 
     PreferenceManager.getDefaultSharedPreferences(context);
                 @SuppressLint("CommitPrefEdits")
                 SharedPreferences.Editor  editor = settings.edit();

                 final String rowId= settings.getString("appWidgetRowId", null);
                 Toast toast = Toast.makeText(context, "Opening....  "+rowId, Toast.LENGTH_SHORT);
                 toast.setGravity(Gravity.CENTER|Gravity.BOTTOM, 0, 0);
                 toast.show();
     } 
    ```

您可以在小部件单击选项上调用第二种方法。

# wpf - 从样式中的模板绑定

> ID：11237218
> 
> 赞同：2
> 
> 时间：2012-06-28T02:10:04.553
> 
> 标签：wpf, xaml, styles

我正在尝试在下面的样式中计算 ControlTemplate.Triggers，但我还没有弄清楚如何找到命名的 Ellipse 和 Path 属性。

比如IsMouseOver时，改变Ellipse的背景。什么是找到 Ellipse 的好方法，以便我可以按照设置此样式的方式设置 Fill 属性？有没有更好的方法来布置它？

干杯，
贝里尔

```
<Style x:Key="CloseCrossToggleButtonStyle" TargetType="{x:Type ToggleButton}">

<Setter Property="ContentTemplate">  
    <Setter.Value>
        <DataTemplate>

            <Grid Background="Transparent">

                <!-- The background of the button, as an ellipse. -->
                <Ellipse x:Name="theEllipse" />

                <!-- A path that renders a cross. -->
                <Path x:Name="theCross"...

            </Grid>

        </DataTemplate>
    </Setter.Value>
</Setter>

<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
            <ContentPresenter x:Name="theContent"/>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Ellipse.Fill" Value="{StaticResource HoverBackgroundBrush}" />
                    <Setter Property="Path.Stroke" Value="{StaticResource HoverForegroundBrush}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

# 好的，正在工作

```
 <Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
            <Grid Background="Transparent">
                <!-- The background of the button, as an ellipse. -->
                <Ellipse x:Name="theEllipse" />
                <!-- A path that renders a cross. -->
                <Path x:Name="theCross"
                      ...
                </Path>

            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="theEllipse" Property="Fill" Value="{StaticResource HoverBackgroundBrush}" />
                    <Setter TargetName="theCross" Property="Stroke" Value="{StaticResource HoverForegroundBrush}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="true">
                    <Setter TargetName="theEllipse" Property="Fill" Value="{StaticResource PressedBackgroundBrush}" />
                    <Setter TargetName="theEllipse" Property="Stroke" Value="{StaticResource PressedBorderBrush}" />
                    <Setter TargetName="theCross" Property="Stroke" Value="{StaticResource PressedForegroundBrush}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:01:03.880

在 ControlTemplate.Triggers 中，您只能操作 ContentTemplate 内的控件，您无权访问 ContentTemplate 模板之外的元素。

你可以像下面的例子一样（我正在更改按钮图像......）：

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Button}">
            <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                <Image x:Name="imgBackground" Source="{StaticResource UpArrowImageNormal}" Stretch="None"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="imgBackground"
                            Property="Source" Value="{StaticResource UpArrowImageIsPressed}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="imgBackground" Property="Source" Value="{StaticResource UpArrowImageDisabled}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

* * *

~~不幸的是，我不知道如何应用触发器数据模板。我相信它只能在 ContentPresenter 中应用触发器...~~

更正，您似乎可以使用此（示例）：

```
<Button x:Name="btnTest" Height="23" Width="75"  HorizontalAlignment="Left"  VerticalAlignment="Top" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch">
            <Button.ContentTemplate>
                <DataTemplate>
                    <Rectangle x:Name="t" Fill="Azure" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                    <DataTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="t" Property="Fill" Value="Black"/>
                        </Trigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </Button.ContentTemplate>
        </Button> 
```

# java - 正则表达式获取 > 和 < 之间的所有数据

> ID：11237223
> 
> 赞同：0
> 
> 时间：2012-06-28T02:11:12.720
> 
> 标签：java, regex

我正在寻找一个从以下格式获取所有数据的正则表达式：

```
">DATA<" returns "DATA"

"> DATA <" returns " DATA "

">.4930894812948cm <" returns ".4930894812948cm "

"> 939j@$%^^ < > << <" returns " 939j@$%^^ < > << "

">DATA< blah blah blah >DATA123< BLah >DATA456<" returns "DATA", "DATA123" and "DATA456" 
```

（示例中的引号是为了使它们更易于阅读；它们不应出现在实际结果中。）

DATA 可以是任何编码

`>DATA<`可以位于文本文件中的任何位置，因此可以一个接一个地重复。同样，所有数据是指所有数据，包括`\n`, `\r`, `.`, 保留字符等。

我试过`>(.*?)<`了，但没有用。

我正在用 Java 做这个。

添加另一个示例：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
Integer facilisis neque tellus, eget rhoncus sapien. 
Pellentesque placerat purus non eros auctor ut consectetur magna bibendum. 
Nam sollicitudin cursus >urna< nec varius. 
Pellentesque elit augue, semper non porttitor nec, adipiscing ut ligula. 
Cras accumsan >dolor< augue. 
Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. >Sed< >rhoncus< ultrices elementum. 

    >lac
    us<

 Ut elementum condimentum est > pir. < feugiat. 
```

应标记：

```
"urna"
"dolor"
"Sed"
"rhoncus"
"la
    cus"
" pir. " 
```

...包括它们之间的空格和行分隔符。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:13:21.787

Here's the regex you want:

```
>(.*)< 
```

You don't want to use the lazy operator (?). The lazy operator makes the wildcard stop as early as possible and still continue the regex (So it stops at the FIRST <), however without the ?, the wildcard is greedy and will match all characters, and then work backwards until it locates the LAST <.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:19:47.467

很难准确地辨别 OP 想要什么，但是......

`>([^<]*)<`将返回 > 和 < 之间的值，包括可能介于两者之间的任何字符（包括 > 和空格）。

所以：

"> ABC <" 将返回 " ABC "

"> AB>C>D<" 将返回 "AB>C>D"

"> ABC" 将不返回任何内容

测试用例在这里：[fiddle](http://fiddle.re/6gqc)。（单击“Java”链接。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:21:17.340

如果介于两者之间的数据不是随机的，我建议使用 global + multiline `\>([^\<])*\<`。但是，由于数据***是***随机的，我认为您无法想出一个正则表达式来可靠地捕获所有可能介于`>`和之间的字符`<`。

# php - 使用 PHP 或 Javascript 裁剪图像

> ID：11237224
> 
> 赞同：0
> 
> 时间：2012-06-28T02:11:33.150
> 
> 标签：php, javascript, image, load, crop

我有一个名为“progressbar.png”的图像。有没有一种方法可以使用 PHP 或 Javascript 裁剪此图像，每次页面加载时，图像都会根据进度百分比进行裁剪并加载到页面中。例如，如果图像为 200 像素宽，则在 25% 的进度下，图像将被裁剪为仅 50 像素宽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:15:04.497

制作一个 div，将 div 的背景设置为您的图像，并将 div 的宽度操作为您想要的任何内容。

HTML：

```
<div id="progressbar"></div> 
```

CSS：

```
#progressbar{
background:url(progressbar.png) top left;
height:progressbarheightpx;
} 
```

Javascript：

```
document.getElementById('progressbar').style.width='50px' 
```

或者可以在 PHP 中通过简单地将宽度直接打印到 div 来完成：

```
<div id="progressbar" width="<?php echo $percent_done*200;?>px"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:15:56.657

您可以将 img 标签包装在 div 中。使用 css 将溢出标记为隐藏，使用 javascript 动态设置宽度。但是，您可能想查看 jQueryUI 的进度条。

[http://jqueryui.com/demos/progressbar/](http://jqueryui.com/demos/progressbar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:18:32.970

每次百分比变化时，裁剪服务器端（使用 PHP）都需要一个新文件的请求。

使用 JavaScript 裁剪图像可以通过使用`<canvas>`（请参阅[在 Javascript 中复制和裁剪图像](https://stackoverflow.com/q/4200374/1048572)）来完成，尽管这将是一个巨大的开销。

只需使用 CSS，它有几种技术可以仅显示元素的剪切。请参阅[CSS 显示调整大小和裁剪的](https://stackoverflow.com/q/493296/1048572)图像、[使用 HTML 和 CSS 剪辑图像](https://stackoverflow.com/questions/7094023/clip-images-with-html-and-css)或[如何使用 CSS 在图像上显示区域](https://stackoverflow.com/q/3708234/1048572)

BTW：通常不需要使用图像作为进度条。使用适当样式的简单 DOM 元素要容易得多，HTML5 甚至提供了`<progress>`标签。请参阅[如何制作进度条](https://stackoverflow.com/questions/3951903/how-to-make-a-progress-bar)

# javascript - UIWebView 中的 iOS loadHtmlString 不适用于 Javascript

> ID：11237229
> 
> 赞同：9
> 
> 时间：2012-06-28T02:12:57.827
> 
> 标签：javascript, ios, uiwebview

我有一个 iOS 应用程序来加载一个 html 字符串，该字符串引用同一目录中的外部 css 文件和 javascript 文件。

这是我的html文件：

```
<html>
<head>
    <meta name="viewport" content= user-scalable="no", width="device-width" />
    <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8"/> 
    <link rel="stylesheet" type="text/css" href="mystyle.css" />
    <script type="text/javascript" src="myjavascript.js"></script>
</head> 
```

css 文件工作正常，但似乎 js 文件从未加载。可能是什么原因？

顺便说一句，我正在使用 loadHtmlString: BaseUrl 方法来加载我的 html 字符串。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T18:27:11.643

这个问题有点老了，但由于它没有得到回答，我想指出，如果你希望你的 web 视图加载驻留在你的包中的 javascript 文件，那么这样做的方法是：

```
[webView loadHTMLString:html
               baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

如果您不指定 baseURL，则无法加载 javascript 文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T17:04:50.930

默认情况下，xcode 会将新的 Javascript 文件放在 Compile Resources 中，而不是 Bundle Resources 中。单击您的项目，然后单击您的目标。在“构建阶段”下，您可能会在“编译源”下看到 Javascript 文件。将它们向下拖动到“复制捆绑资源”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:07:37.120

就像其他人说的

*   使用 baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];

*   复制捆绑资源而*不是*编译资源。

就是这样！

# objective-c - 从另一个类访问位于 NSPersistentDocument 中的 NSProgressIndicator

> ID：11237230
> 
> 赞同：0
> 
> 时间：2012-06-28T02:12:58.583
> 
> 标签：objective-c, macos, xcode4

在我构建的应用程序中，我创建了 NSPersistentDocument 的 TerminalController 子类。在 TerminalController 中有一个 NSProgressIndicator 的出口，它连接到主窗口 nib 中的进度指示器实例。将服务于确定进度的进度指示器放置在 TerminalController 类中，因为我希望我所有的各种类都在从服务器上传或下载数据的过程中使用。

特别是有一个类经常用于上传图像 - ImageUploader - 它假设触发位于主窗口笔尖并连接到终端控制器的进度指示器。

我的问题是我似乎无法弄清楚如何从 ImageUploader 访问 TerminalController 中的进度指示器。我无法在主窗口 nib 中创建 ImageUploader 的实例并在那里连接，因为 ImageUploader 经常在代码中初始化和释放。

必须有一种方法可以从我认为的任何对象进行访问。我的一个想法是制作进度指示器全局实例，但我知道从结构的角度来看是错误的，不推荐。

我非常感谢有关此问题的任何建议

这是我的代码示例

NSPersistentDocument 的 TerminalController 子类

```
@interface TerminalController : NSPersistentDocument{
    IBOutlet NSProgressIndicator *loadingIndicator;
}
@property (retain, nonatomic) NSProgressIndicator *loadingIndicator;

@implementation TerminalController

@synthesize loadingIndicator;

- (void)dealloc
{
    [loadingIndicator release];
    [super dealloc];
} 
```

ImageUploader 类

```
@interface ImageUploader : NSObject{
    ...

    NSProgressIndicator  *progressIndictor; // This is progress indicator that should point to TerminalController progress indicator
}

@implementation CustomXMLRequests

- (void) uploadImage:(NSURL *)withUrl{
    ...

    // How to point to progress indicator that is located in TerminalController that is subclass of NSPersistentDocument
    [progressIndictor setUsesThreadedAnimation:YES];
    [progressIndictor startAnimation:self];
    [progressIndictor setMinValue:0.0];
    [progressIndictor setMaxValue:1.0];
}

- (void)connection:(NSURLConnection *)connection 
   didSendBodyData:(NSInteger)bytesWritten 
 totalBytesWritten:(NSInteger)totalBytesWritten 
totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite{
    double prgrs = (double)totalBytesWritten/totalBytesExpectedToWrite;
    [progressIndictor setDoubleValue:prgrs];
    [progressIndictor displayIfNeeded];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:19:04.643

如果您无法建立直接的 XIB 连接（通过 IBOutlet 从一个视图控制器到另一个），您的下一个最佳选择是[使用“ `NSNotifications`”将消息传递](https://stackoverflow.com/questions/4107598/iphone-what-is-the-purpose-of-nsnotification)给感兴趣的观察者（即从您的 ImageUploader 到您的 TerminalController），或者您可以让您的 TerminalController 以某种方式注册为 ImageUploader 的委托，然后以这种方式更新您的进度指示器。

# php - jQuery对话框表单提交不发布值

> ID：11237234
> 
> 赞同：1
> 
> 时间：2012-06-28T02:13:48.173
> 
> 标签：php, jquery, jquery-ui

我有一个像这样的简单表格：

```
<form method="post" name="change_pass" id="change_pass" action="change_pass2.php">
    <input type="hidden" id="uid" value="<?php echo $userid ?>">
    <div id="dialog" style="display:none">
        <input type="text" name="pass" id="pass">Password :
        <input type="text" name="conf_pass" id="conf_pass">Confirm Password:
    </div>
</form>
<div id="weak" style="display:none" title="Weak password">
    <p >Please make sure your password is atleast 8 characters</p>
</div>
<div id="mismatch" style="display:none" title="Failure">
    <p>Password mismatch</p>
</div>
</body>
</html> 
```

我正在使用 jquery ui 的对话功能来创建这样的对话表单，

```
$(function(){
    $('#dialog').dialog({
        title : 'You must change your password',
        modal : true,
        closeOnEscape: false,
        dialogClass: 'no-close',
        resizable: false,
        draggable: false,
        buttons: {
            'Change Password' : function() {
                if ( $('#pass').val().length <  8 || $('#pass').val() == 'dantours')  {                         
                    $('#weak').dialog();
                }
                else if ( $('#pass').val() != $('#conf_pass').val()){
                    $('#mismatch').dialog();
                }
                else 
                    $('#change_pass').submit();
                }
        }
    }); 
}); 
```

但是在 change_pass2.php 页面上，$_POST 数组是空的。我一直把头靠在显示器上试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T02:27:19.037

jQuery 对话框会将对话框移动到正文的末尾，它在表单范围之外，如此处[所述](http://forum.jquery.com/topic/dialog-widget-forms-append-to-forms-when-applicable)。所以不会发布任何数据。

你需要这样做：

```
$("#dialog").dialog({your options...}).parent().appendTo($("#change_pass")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:33:47.097

由于无论您将元素放在代码中的哪个位置，对话框都会附加到正文，并且不再是表单的子级，只需将 html 更改为将表单作为对话框的子级

```
<div id="dialog" style="display:none">
   <form method="post" name="change_pass" id="change_pass" action="change_pass2.php">
       <input type="hidden" id="uid" value="<?php echo $userid ?>">    
         <input type="text" name="pass" id="pass">Password :
        <input type="text" name="conf_pass" id="conf_pass">Confirm Password:    
   </form>
</div> 
```

附加到正文的原因是允许定位基于正文

# c# - Website works on localhost but not When uploaded to server it is giving an error

> ID：11237236
> 
> 赞同：0
> 
> 时间：2012-06-28T02:14:26.067
> 
> 标签：c#, ms-access

I have Website which works fine on localhost but not on server when uploaded, it is giving an error as Operation must use a updatable query

Code is as follows:

```
 OleDbConnection myCon;

    string path = @Server.MapPath(".") + "/Accomdation1.mdb";
    myCon = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path);

    myCon.Open();
    string f = TextBox1.Text;
    string g = TextBox5.Text;
    string d = DropDownList1.Text;
    string a = TextBox2.Text;
    string h = TextBox7.Text;
    string k = TextBox6.Text;
    string u = TextBox8.Text;
    string y = TextBox9.Text;

    OleDbCommand cmd = new OleDbCommand("INSERT INTO Accomdation (lastname, firstname,gender,UHCLID,Dateofarrival,timeofarrival,flightno,emaildi)" + " VALUES('" + f + "', '" + g + "', '" + d + "', '" + a + "', '" + h + "', '" + k + "', '" + u + "', '" + y + "')", myCon);
    cmd.ExecuteNonQuery();           
    // TextBox1.Text = e1.Message;     
    myCon.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:58:11.583

TYR以下！1\. 确保在尝试执行上述代码时没有打开“Accomdation1.mdb”。2\. 右键单击​​“Accomdation1.mdb”下的 App_folder 转到“安全”选项卡下的属性，授予“网络服务”的完全权限

# c# - C# inheritance, custom controls, templates, converters, and dependency properties and getting them to all play nicely

> ID：11237237
> 
> 赞同：1
> 
> 时间：2012-06-28T02:14:28.873
> 
> 标签：c#, binding, dependency-properties

I have three classes `Assignment` (abstract), `CourseAssignment`, and `StudentAssignment`. `StudentAssignment` and `CourseAssignment` both inherit from the abstract `Assignment` class.

I have a complex style where I have reformatted the look and feel of the WPF calendar, but I want assignments to show up in my calendar, so I have created a custom control (call it `MyCalendar`, which inherits from Calendar, but adds a dependency property (see code below) which allows me to bind an assignment list to the calendar.

```
public static DependencyProperty AssignmentsProperty =
        DependencyProperty.Register
        ("Assignments",typeof(ObservableCollection<Assignment>),typeof(Calendar));

    public ObservableCollection<Assignment> Assignments
    { 
        get {return (ObservableCollection<Assignment>)GetValue(AssignmentsProperty);} 
        set {SetValue(AssignmentsProperty, value); }
    } 
```

Depending on which tab control I place the calendar control, the binding is going to be either to an observable collection of `StudentAssignment` or `CourseAssignment`. The calendar shouldn't really care if the assignment list is a `CourseAssignment` or `StudentAssignment` list, because all it needs is the due date and description (both properties are in the base abstract class), but herein lies my problem. I am using a IMultiValueConverter to put the assignments onto the correct day

```
[ValueConversion(typeof(ObservableCollection<Assignment>), typeof(ObservableCollection<Assignment>))]
public class AssignmentConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        DateTime date = (DateTime)values[1];
        ObservableCollection<Assignment> assignments = new ObservableCollection<Assignment>();

        foreach (Assignment assignment in (ObservableCollection<Assignment>)values[0])
        {
            if (assignment.DueDate.Date == date)
            {
                assignments.Add(assignment);
            }
        }
        return assignments;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
```

**What is the best way to get my binding to work?** I know I want to set the binding to the observable collection, but if I do it in XAML, I get `cannot convert from observablecollection(CourseAssignment) to observablecollection(Assignment)` error; I need to somehow convert the collection of CourseAssignments to a collection of Assignments before I do the binding, right? What is the best way to do that?

# jquery - JQuery Loading animation: still large gap before animation appears

> ID：11237240
> 
> 赞同：1
> 
> 时间：2012-06-28T02:14:33.787
> 
> 标签：jquery, dom, animation, loading

I have a large page where the DOM takes a while to completely load. I thought it would be good to have a little loading animation appear whilst the page is loading so I implemented this:

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://github.com/Modernizr/Modernizr/raw/master/modernizr.js"></script>
    <script>
        // Wait for window load
        $(window).load(function() {
            // Animate loader off screen
            $("#wait").animate({
                top: -200
            }, 1500);
        });
    </script>

<body>
<div id="wait">
<img src="/assets/images/ajax-loader.gif" />
</div> 
```

(found [here](http://css-tricks.com/snippets/jquery/display-loading-graphic-until-page-fully-loaded/))

It works but only at the very last moment, when the DOM is about 4/5ths already loaded. Was hoping if anyone knew a better way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:38:15.183

不使用 $(window).load() 尝试 $(document).ready()，通常在加载大图像时通常使用 $(window).load()

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://github.com/Modernizr/Modernizr/raw/master/modernizr.js"></script>
    <script>
        // Wait for window load
        $(document).ready(function() {
            // Animate loader off screen
            $("#wait").animate({
                top: -200
            }, 1500);
        });
    </script>

<body>
<div id="wait">
<img src="/assets/images/ajax-loader.gif" />
</div> 
```

**编辑** 如果你加载一个大图像我修改了代码，希望这会对你有所帮助

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
function showLoading(){
  var $loading = $(".loading");
  var windowH = $(window).height();
  var windowW = $(window).width();

  $loading.css({
    position:"fixed",
    left: ((windowW - $loading.outerWidth())/2 + $(document).scrollLeft()),
    top: ((windowH - $loading.outerHeight())/2 + $(document).scrollTop())
  }).show();
}

function hideLoading(){
   $(".loading").hide();
}

 $(function(){
      showLoading();

      $("#Iframe").load(function(){
        hideLoading();
      }).attr("src", "http://www.somesite.com/images/Purple-Flowers-Wallpaper.jpg");

    });
</script>

<div id="dialog-box">
    <iframe id="Iframe"  src="javascript:void(0);" height="500px" width="800px" ></iframe>
    </div>

<div class="loading">
      <br /><br />
      <div>Loading...</div>
    </div> 
```

# linux - 502 Bad Gateway Nginx

> ID：11237241
> 
> 赞同：2
> 
> 时间：2012-06-28T02:14:38.100
> 
> 标签：linux, nginx

**Edited**: This error only occurs when I'm using Chrome. If I switch to Safari or FireFox, my server code works OK.

Here's the error log. Please help. I'm playing with the Google OAuth 2.0 API and there's something wrong after Google calls my server back.

Let me know if you need more information to diagnose. (I'm a super newbie so I've no idea what to paste here...)

Besides, **114.247.XXX.YYY** is my local office IP, with which I'm browsing websites and accessing remote servers.

```
2012/06/28 09:54:08 [error] 2170#0: *21 upstream sent too big header
while reading response header from upstream, client: **114.247.XXX.YYY**,
server: my_domain_name.com, request: "GET
/login-callback/google?state=my_randomly_generated_state&code=my_google_authorization_code
HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "my_domain_name.com" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:09:34.823

好的，我也有这个问题，但是在每个浏览器中。

验证您是否没有监听套接字。

纳米 /etc/php5/fpm/pool.d/www.conf

我的解决方案是：

```
$ sudo nano /etc/nginx/sites-available/default

server {
[...]
location ~ \.php$ {
  root /your/site/root;
  fastcgi_index index.php;
  include fastcgi_params;
  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;

  fastcgi_pass 127.0.0.1:9000;
  #IF you are using a socket change the line above for thise one:
  #fastcgi_pass    unix:/var/run/php5-fpm.sock;

  ###to be sure validate on /etc/php5/fpm/pool.d/www.conf
  ####listen = 127.0.0.1:9000 #not a socket
  ####listen = /var/run/php5-fpm.sock #listen a socket

  # add these two lines:
  fastcgi_buffer_size 16k;
  fastcgi_buffers 4 16k;
}
[...]
}
$sudo service nginx restart 
```

来源：[点击这里](http://shikii.net/blog/firephp-on-nginx-502-bad-gateway/)

# java - Java套接字使客户端或服务器崩溃？

> ID：11237251
> 
> 赞同：1
> 
> 时间：2012-06-28T02:15:41.960
> 
> 标签：java, sockets

好的，所以我对 Java 套接字完全陌生，我真的不知道这个问题，我的好朋友告诉我在这里发布。

客户： http: [//www.pastie.org/4163360](http://www.pastie.org/4163360)

服务器： http: [//www.pastie.org/4163364](http://www.pastie.org/4163364)

运行客户端时收到的错误：

```
Exception in thread "main" java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at talk.Client.main(Client.java:36) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:28:16.287

运行您的代码 - 必须更改主机的 IP，否则一切正常。因此，可以确认这是一个 IP/防火墙问题。仔细检查您的 ipconfig / ifconfig 以获取您的 IP 地址。对不起，但还不能对问题发表评论:(

# android - drawLines 方法在缩放的 Canvas 上产生奇怪的效果

> ID：11237256
> 
> 赞同：1
> 
> 时间：2012-06-28T02:17:20.133
> 
> 标签：android, graphics, paint, android-canvas

我有一个自定义 View 子类，它允许用户画出一个汉字。线坐标被保存到一个浮点数组 (x1, y1, x2, y2, x2, y2, x3, y3...)，它被缩放到单位大小，即所有坐标都是 0 和 1 之间的值。这使得稍后在不同尺寸的视图中对草图进行动画处理时更容易。它还有助于将绘制的内容与同一坐标空间中的另一个动画进行比较。坐标垂直翻转，也有助于进行比较。

这意味着当在 View 的 onDraw 方法中绘制线条时，必须在调用 drawLines 绘制草图之前放大和平移 Canvas。

在办公室的所有设备上（Android ~2.3）一切正常，模拟器也正常。然而，两名使用三星 Galaxy S2 手机的用户都报告称他们最近都升级到了 Android 4，他们发现这些行看起来“有问题”，如下所示：

![说明问题](../Images/f6698db7ec3203eb596774360dea96eb.png)

我尝试从 drawLines 切换到使用 Path 对象，但在这种情况下，用户报告说线条根本没有出现！

这是我配置油漆的方式：

```
 paint = new Paint();        
    paint.setStyle(Style.STROKE);
    paint.setStrokeWidth(kTCDrawPathWidth);
    paint.setStrokeCap(Cap.ROUND);
    paint.setStrokeJoin(Join.BEVEL);
    paint.setColor(Color.WHITE); 
```

这就是我绘制草图的地方：

```
 RectF frame = getDrawingBounds();   
    canvas.drawRoundRect(frame, 3, 3, drawAreaFramePaint);      
    canvas.drawRoundRect(frame, 3, 3, drawAreaFrameBorderPaint);

    canvas.save();
    canvas.translate(frame.left, frame.top+frame.height());
    canvas.scale(frame.width(), -frame.height());

    for (TCPath path : paths)
        canvas.drawLines(path.getLines(), paint);

    if (drawingPath!=null)
        canvas.drawLines(drawingPath.getLines(), paint);

    canvas.restore(); 
```

有什么明显的问题吗？Android 4 中的 Paint/Canvas 行​​为是否发生了变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:00:28.220

如果您正在使用硬件加速，请尝试为正在绘制的自定义视图关闭它（myView.setLayerType（View.LAYER_TYPE_SOFTWARE）。您也可以尝试禁用抗锯齿，看看是否有帮助。

否则，我建议再给 Path 一个机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:43:46.203

我不知道这是否正确，但以防万一：

```
canvas.scale(frame.width(), -frame.height()); 
```

减号在前面做什么`frame.height()`？

你从什么中减去？

# jquery - 如何使用 jquery 摆脱 li 中的图像？

> ID：11237257
> 
> 赞同：0
> 
> 时间：2012-06-28T02:17:20.917
> 
> 标签：jquery, slider, html-lists

我正在尝试在 Rapidweaver 中安装滑块，并且我想在特定页面上仅显示幻灯片 1 和 2。我对此还是很陌生，所以任何事情都可以提供帮助。那么，如何使用 jquery 删除幻灯片 3？

```
<ul id="unoslider" class="unoslider">
 <li id="slide1"><img src="images/banner_1.jpg"  /></li>
 <li id="slide2"><img src="images/banner_2.jpg"  /></li>
 <li id="slide3"><img src="images/banner_3.jpg"  /></li>
</ul> 
```

请帮我！

太感谢了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:18:39.803

要从 DOM 中删除它：

```
$('#unoslider #slide3').remove(); 
```

将其显示设置为“ `hidden`”：

```
$('#unoslider #slide3').hide(); 
```

# mysql - MYSQL 包括零项目计数的日期值

> ID：11237268
> 
> 赞同：3
> 
> 时间：2012-06-28T02:18:40.477
> 
> 标签：mysql, sql, datetime, count

我想计算总购买次数以及按 item_id 购买的次数。在此示例中，用户可以拥有一件物品，而这些物品可以被其他用户购买。所有者不能购买自己的物品。

我遇到的问题是如何在没有购买的日子与正整数计数的日子一起返回计数为“0”的结果。

这是我的桌子：

```
 items           |          items_purchased          | numbers |   dates
i_id  item_id user_id | p_id item_id  user_id     date    |   num   | datefield
  1      1       11   |  1      1         13   2009-01-11 | 1       | 2005-06-07
  2      2       12   |  2      1         14   2009-01-11 | 2       | 2005-06-08
  3      3       11   |  3      2         15   2009-01-12 | 3       | 2005-06-09   
                      |  4      3         16   2009-01-12 | ...     | ...
                      |  5      1         17   2011-12-12 | 1000    | 2015-06-07 
```

这是我的 MYSQL 查询的商品购买总数`user_id=11`：

```
SELECT COUNT(*) as counts, DATE(purchase_date) as DATE
FROM items_purchased 
JOIN items on items_purchased.item_id=items.item_id 
WHERE items.user_id=11 
GROUP BY DATE(purchase_date)
//note this query **doesn't** make use of the numbers and dates tables b/c I don't know how to use them 
```

结果如下：

```
counts    date
  2    2009-01-11
  1    2009-01-12
  1    2011-12-12 
```

这是我希望看到的：

```
counts    date
  2    2009-01-11
  1    2009-01-12
  0    2009-01-13
  0    ... // should be a row here for each day between 2009-01-13 and 2011-12-12
  1    2011-12-12
  0    ... // should be a row here for each day between 2011-12-12 and current date
  0    current date (2012-6-27) 
```

`item_id=1`这是我的 MYSQL 查询，查询仅限于拥有的购买总数`user_id=11`：

```
SELECT COUNT(*) as counts, DATE(purchase_date) as DATE
FROM items_purchased 
JOIN items on items_purchased.item_id=items.item_id 
WHERE items.user_id=11 and items.item_id=1
GROUP BY DATE(purchase_date) 
```

结果如下：

```
counts    date
  2    2009-01-11
  1    2011-12-12 
```

与上面类似，这是我希望看到的：

```
counts    date
  2    2009-01-11
  0    2009-01-12
  0    ... // should be a row here for each day between 2009-01-12 and 2011-12-12
  1    2011-12-12
  0    ... // should be a row here for each day between 2011-12-12 and current date
  0    current date (2012-6-27) 
```

不知何故，我认为我需要合并`numbers`和`dates`表，但我不知道该怎么做。任何想法将不胜感激，

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T03:20:26.177

编辑更正答案：

[http://sqlfiddle.com/#!2/ae665/4](http://sqlfiddle.com/#!2/ae665/4)

```
SELECT date_format(datefield,'%Y-%m-%d') AS DATE, IFNULL(counts, 0), item_id FROM 
    dates a
LEFT JOIN 
    (SELECT COUNT(*) as counts, purchase_date,user_id,item_id 
     FROM items_purchased 
     WHERE item_id=1
     GROUP BY date(purchase_date),item_id )r 
ON date(a.datefield) = date(r.purchase_date) ; 
```

上述查询基于以下假设：

> 1.  表日期包含您要列出的日期范围内的连续日期。
> 2.  不太确定项目表的用途。第二个查询是按 items_purchased 表的 purchase_date 和 item_id 分组。
> 3.  计数是计算在特定日期购买的特定项目（与 user_id 无关）。

**@timpeterson (OP) 更新主要感谢@Sel。**这是演示我感兴趣的两个查询的 sqlfiddles：

1.  单个用户拥有的所有项目的购买次数/天（例如，`user_id=11`）：[http ://sqlfiddle.com/#!2/76c00/3](http://sqlfiddle.com/#!2/76c00/3)
2.  购买/天`item_id=1`拥有者`user_id=11`： [http ://sqlfiddle.com/#!2/76c00/1](http://sqlfiddle.com/#!2/76c00/1)

这是第二个的 SQL 代码，以防链接以某种方式断开：

```
SELECT date_format(datefield,'%Y-%m-%d') AS DATE, 
IFNULL(countItem, 0), item_id
FROM dates a
LEFT JOIN 
(SELECT countItem, purchase_date,i.user_id,p.item_id FROM (
   SELECT count(*) as countItem, purchase_date,user_id,item_id 
   FROM items_purchased 
   GROUP BY date(purchase_date),item_id
   ) p 
 inner join items i
 on i.item_id=p.item_id
 WHERE p.item_id='1' and i.user_id='11' //just get rid of "p.item_id='1'" to produce the 1st query result
)r 
ON date(a.datefield) = date(r.purchase_date); 
```

# node.js - Node.js - 这里和那里需要猫鼬会导致冗余？

> ID：11237269
> 
> 赞同：6
> 
> 时间：2012-06-28T02:18:48.667
> 
> 标签：node.js, arguments, mongoose, require, redundancy

我有以下 Node.js 目录结构。

```
|--app/
   |--app.js
   |--routers/
      |--index.js/
   |--models/
      |--schemas.js
      |--post.js 
```

在**app.js**中，有这样一行`mongoose.connect('mongodb://localhost/' + config.DB_NAME);`。在**schema.js 中**：

```
var mongoose = require('mongoose')
    , Schema = mongoose.Schema
    , ObjectId = Schema.ObjectId;

var PostSchema = new Schema({
    title: String
    , author: String
    , body: String
    , creataAt: { 
        type: Date
        , default: Date.now
    }
});

// other schemas goes here

module.exports.PostSchema = PostSchema; 
```

在**post.js 中**：

```
var mongoose = require('mongoose')
    , PostSchema = require('./schemas').PostSchema
    , PostModel = mongoose.model('Post', PostSchema);

module.exports = PostModel; 
```

在**index.js**中，可能会有这样一行：`var PostModel = require('../models/post');`. 上面提到的所有文件都需要**mongoose**。**schemas.js**的目的是帮助程序员在单个文件中掌握数据库的模式。但是，我想知道这个工具是否会导致冗余并导致更多开销，因为我到处都需要**猫鼬**。我应该把它作为一个**论点**传递吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T02:21:29.977

如果您只担心性能，则不必担心。根据[http://nodejs.org/docs/latest/api/modules.html#modules_caching](http://nodejs.org/docs/latest/api/modules.html#modules_caching)：

> ### 缓存
> 
> 模块在第一次加载后被缓存。这意味着（除其他外）每次调用都`require('foo')`将返回完全相同的对象，如果它会解析为同一个文件。
> 
> 多次调用`require('foo')`可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。
> 
> 如果你想让一个模块多次执行代码，那么导出一个函数，然后调用那个函数。

所以，你实际上并不是`requiring`每次都是 Mongoose。相反，每次在第一次之后，都会返回缓存的 Mongoose 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T15:03:34.673

当需要链接模块中的猫鼬时，您还需要注意。在 mongoose 的情况下，您通常依靠单例模式来连接 mongodb，而缓存机制可能会妨碍模块化。我可能做错了什么，但我在那里详细说明了问题：[https ://stackoverflow.com/questions/16687619/node-js-require-do-not-behave-as-expected-when-using-linked-packages](https://stackoverflow.com/questions/16687619/node-js-require-do-not-behave-as-expected-when-using-linked-packages)

# c - realloc() 没有返回带有旧值副本的新块

> ID：11237278
> 
> 赞同：3
> 
> 时间：2012-06-28T02:20:04.343
> 
> 标签：c, memory-management, realloc

考虑这段代码：

```
char buffer[] = "abcdefghijklmnopqrstuvwxyz",
*val = malloc(10), *pbuf = buffer, *pval = val, *tmpbuf;

int size = 10,loaded = 0;

while(*pbuf) {

    if((loaded + 1) >= size) {
        size += 10;
        tmpbuf = realloc(val, size);

        if(tmpbuf != NULL) {
            val = tmpbuf;
            pval = val;
        } else {
            printf("realloc()\n");
            exit(-1);
        }
    }

    *pval ++= *pbuf ++;
    loaded ++;
}

*pval ++= '\0';
printf("%s\n", val);
free(val); 
```

它打印`tuvwxyz`而不是`abcdefghijklmnopqrstuvwxyz`.

为什么？根据文档，返回的新指针`realloc()`不保留先前传递的缓冲区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T02:31:19.610

它正在将缓冲区复制到新缓冲区（如果不相同）。问题是您正在覆盖缓冲区。“pval = val；” 将您的写入点设置为缓冲区的第一个字节，重新替换任何内容。尝试更改为“pval = val + loaded;”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:31:54.350

调用 to 后`realloc`，您重新分配`pval`给`val`，而后者又分配自`tmpbuf`。换句话说，在每次调用 , 之后`realloc`，`pval`都会将点重置为动态缓冲区的开头。

# mysql - 多个数据库或许多表？

> ID：11237280
> 
> 赞同：7
> 
> 时间：2012-06-28T02:21:02.660
> 
> 标签：mysql

我已经对这个问题进行了一些研究（通过谷歌和在这里），但没有发现任何我认为符合我的情况的东西，所以我问。

我有一个项目，目前有一个帐户 - 一个环境模型，并希望扩展到一个帐户 - 多个环境。环境将是相同的（至少就表结构而言）并且需要大约 100 个表。我在两种可能的方法之间左右为难：

1.  使用单个数据库，带有表前缀来分隔每个环境和一个无前缀的帐户表
2.  使用多个数据库 - 一个中央帐户数据库，每个环境都有一个单独的数据库（中央数据库可能有其他中央的、一次性的数据，例如我们论坛软件的表格）

这两种方法是否有任何显着的性能提升/担忧？数据将（至少目前）全部驻留在同一物理服务器上。查询应该只需要访问一个环境（在极少数情况下除外）——当然还有主账户记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:25:30.423

I think it'd be simpler to only manage one database. This will make development and configuration much easier, than having many databases to worry about configuring correctly.

In terms of performance, you can let the DBMS handle the clustering/distributed stuff, so you won't have to worry about it. Splitting up the data yourself isn't going to make things faster usually, since the DBMS can (usually) do a much better job at that then you can.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T02:30:11.267

我们有多个数据库的工作——以及不同的数据库供应商（DB2、Oracle、MySQL）。巨大的 PITA，尽管其中一些痛苦可能来自于每个数据库由不同的组拥有的事实。但是，如果您需要在数据库（而不是应用程序）中加入数据（您认为现在这种情况很少见，但您等待...），您会后悔多服务器解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T02:50:46.190

有趣的问题。作为标准答案，我建议让一个实例运行所有帐户。即前缀解决方案。这是托管服务提供商到处使用的方法。

让一个 RDBMS 运行似乎是有意义的。更容易进行备份和其他系统范围的任务。我建议就性能而言，运行一个实例比为每个帐户运行一个单独的进程要高效得多。

如果您需要启用负载平衡，“前缀”模型也将更容易扩展，因为大多数现代 RDBMS 都具有支持此类功能的插件/功能，而不必为每个帐户的每个实例设置多次。

现代数据库系统很容易每秒处理数千个请求，通过查找花哨的自定义（前缀）表名，它们不会有任何性能损失。只要您能想出一个简单的层次结构（帐户前缀）方法来分离帐户，运行数千个表就不会有问题。

唯一潜在的缺点是安全性。在大多数情况下，即使拥有多台服务器也无法解决您的安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T02:24:44.497

I would say use many databases to allow for future modification of the various environments. It is doubtful you are talking about static data that all of the site would use, each site deserves its own set of data...

If for no other reason, (as I said before) to allow for modifications.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T02:44:19.207

The project I'm currently working on is similar in that respect; one account for multiple sites.

The solution I've gone for is delegated authentication, one service that solely deals with authentication and issues verifiable assertions about an identity. This can be coupled with authorization as well. To get an idea of what is required you can look at the [OpenID](http://openid.net/) project, and [OAuth2](http://oauth.net/2/) for authorization.

Setting up this service is not easy (though the OpenID site has setup guides for it), but it does provide the flexibility to move your environments out to different physical locations without having to change your code. In fact, you're free to even keep a single database and perhaps move one environment to a dedicated machine when it gains more traction than the others.

# java - 使用 maven 从 XSD 生成 JS？

> ID：11237282
> 
> 赞同：2
> 
> 时间：2012-06-28T02:21:20.257
> 
> 标签：java, javascript, maven, code-generation, maven-plugin

我可以使用这个 maven 插件`maven-jaxb-plugin`从 XSD 文件生成 Java 类。现在我想从 XSD 生成 JavaScript 类，并且也使用 maven。你有什么主意吗？

如果没有从xsd生成js的maven插件，有什么好办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:55:25.383

首先，我在使用 Maven 和 Java 方面没有任何类似的经验，但我突然想到了一件事。正如我在谷歌搜索后看到的那样，没有你想要的工具。但也许两步处理在这里可以工作？您可以使用[JAXB](http://mojo.codehaus.org/jaxb2-maven-plugin/)从 XSD 生成 Java 类，然后使用[STJS](http://st-js.org/)等工具从该 Java 生成 JavaScript。正如我所说，我不能从我的个人经验中说任何话，但我会尝试一下，看看它是如何工作的。

# android - android中的扰码

> ID：11237284
> 
> 赞同：0
> 
> 时间：2012-06-28T02:21:38.273
> 
> 标签：android, gsm, telephony, cellular-network, umts

谁能告诉我如何在android中获取服务单元的扰码？我试过[getPSC()](http://developer.android.com/reference/android/telephony/gsm/GsmCellLocation.html#getPsc%28%29) 但它总是检索 -1 。我能够正确获取[相邻小区 psc](http://developer.android.com/reference/android/telephony/NeighboringCellInfo.html#getPsc%28%29)，但服务小区 psc 始终给出 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:08:20.530

如果您阅读[文档](http://developer.android.com/reference/android/telephony/gsm/GsmCellLocation.html#getPsc%28%29)，您会发现扰码仅与 UMTS 网络相关。如果蜂窝网络使用任何其他技术（例如 GSM），您将得到 -1 作为结果。

编辑：

另一个想法：也许有一个错误，硬件供应商没有正确地`getPsc()`接听电话来做正确的事情。

# cmake - 使用 CMake 选项命令而不是设置的优点？

> ID：11237287
> 
> 赞同：15
> 
> 时间：2012-06-28T02:22:16.073
> 
> 标签：cmake

我认为`option`命令是多余的，因为它可以被`set`命令替换。`option`使用该命令可以获得哪些好处？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T03:08:55.320

命令中定义的变量在[`option`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aoption)CMake GUI 中或在使用[`cmake -i`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#opt%3a-i). [`set`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aset)对于使用unless定义`CACHE`且类型不是的变量，情况并非如此`INTERNAL`。

此外，该[`CMakeDependentOption`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module%3aCMakeDependentOption)模块允许指定选项之间的依赖关系。

# android - 将 GCM 通知发布到现有 C2DM 注册 ID

> ID：11237289
> 
> 赞同：0
> 
> 时间：2012-06-28T02:22:31.370
> 
> 标签：android, android-c2dm

我想知道是否可以使用新的 GCM 机制并将通知发布到我现有的基于 C2DM 的注册 ID？

迁移/GCM 文档没有涉及这部分，但暗示它可能不起作用，因为它提到我们必须将 GCM 注册 ID 与 C2DM 注册 ID 分开存储。

这也意味着要迁移到 GCM，我们需要维护两组注册 id，并在可预见的将来使用两个单独的调用（GCM 和 C2DM），对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:40:06.777

我自己尝试了一个实验，在使用 GCM 向 C2DM 创建的注册 ID 发送消息时，我收到错误“MisMatchedSenderId”。这是有道理的，因为旧的 C2DM 使用电子邮件地址作为发件人 ID，而新的 GCM 使用 API 密钥。

因此，在所有应用程序升级以使用新的 GCM 之前，似乎必须维护两组注册 ID。

# android - 为什么 rsDebug 不起作用？

> ID：11237290
> 
> 赞同：12
> 
> 时间：2012-06-28T02:22:52.250
> 
> 标签：android, renderscript

我在[Android RenderScript示例“Fountain”中插入了一个](http://developer.android.com/reference/android/renderscript/package-summary.html)[rsDebug](http://developer.android.com/reference/renderscript/rs__debug_8rsh.html)方法，但我没有从 logcat 中得到任何消息。

这是一个代码片段来演示我尝试过的内容：

```
int root() {
    float dt = min(rsGetDt(), 0.1f);
    rsDebug("dt", dt);
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:24:38.167

我一直在使用此处的渲染脚本示例 CarouselView 示例，[这](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=2&q=)是我为使 rsDebug 工作所做的工作：

1.  将 debuggable="true" 添加到清单文件中的应用程序标记中：

    ```
    <application android:debuggable="true"> 
    ```

2.  添加

    ```
    \#include "rs_debug.rsh" 
    ```

到 carousel.rs 渲染脚本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T19:46:53.783

除了戴夫的答案，我还想添加以下提示：

renderscript 中的消息以“详细”级别输出。因此，您可能很容易忽略它们，因为您处于错误的级别。

因此，在 Android Studio 中，您可以在此处更改 logcat 输出：

![在此处输入图像描述](../Images/5f4e0f2cd36c46dbda68634e4962108b.png)

# c - 在 C , UNIX 中。mysql相关错误信息

> ID：11237293
> 
> 赞同：-4
> 
> 时间：2012-06-28T02:23:08.143
> 
> 标签：c

编译后。我有

```
/usr/ccs/bin/ld：不满意的符号：
   mysql_query（首先在 test3.o 中引用）（代码）
   mysql_close（首先在test3.o中引用）（代码）
   mysql_init（首先在test3.o中引用）（代码）
   mysql_num_fields（首先在 test3.o 中引用）（代码）
   mysql_free_Result（首先在test3.o中引用）（代码）
   mysql_real_connect（首先在test3.o中引用）（代码）
   mysql_store_result（首先在test3.o中引用）（代码）
   mysql_error（首先在 test3.o 中引用）（代码）
   mysql_fetch_row（首先在 test3.o 中引用）（代码）

```

消息..谁能告诉我我的代码有什么问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:49:49.177

你没有*链接*到图书馆。

根据环境（IDE、命令行等），您执行此操作的方式会有所不同。如果您在命令行上构建，请添加`-lmysql`到命令行末尾以与库链接。在 IDE 中，它通常位于项目设置中的某个位置，可能位于名为“链接器”的部分/选项卡中。

# python - 使用re.search python的不平衡括号错误

> ID：11237295
> 
> 赞同：-4
> 
> 时间：2012-06-28T02:24:25.683
> 
> 标签：python, regex, parentheses

我有一个要循环遍历的列表（用于 trimtemp 中的 trim），并查看它在给定字符串（modeltrim）中是否有任何匹配项。代码在大多数情况下运行良好，但时不时地给我以下错误：

```
Traceback (most recent call last):
  File "/home/hostadl/PricesFinal.py", line 318, in <module>
    main()
  File "/home/hostadl/PricesFinal.py", line 215, in main
    match = re.search(r'{0}'.format(trimtemp), modeltrim, re.IGNORECASE)
  File "/usr/local/lib/python3.2/re.py", line 158, in search
    return _compile(pattern, flags).search(string)
  File "/usr/local/lib/python3.2/re.py", line 256, in _compile
    return _compile_typed(type(pattern), pattern, flags)
  File "/usr/local/lib/python3.2/functools.py", line 180, in wrapper
    result = user_function(*args, **kwds)
  File "/usr/local/lib/python3.2/re.py", line 268, in _compile_typed
    return sre_compile.compile(pattern, flags)
  File "/usr/local/lib/python3.2/sre_compile.py", line 491, in compile
    p = sre_parse.parse(p, flags)
  File "/usr/local/lib/python3.2/sre_parse.py", line 692, in parse
    p = _parse_sub(source, pattern, 0)
  File "/usr/local/lib/python3.2/sre_parse.py", line 315, in _parse_sub
    itemsappend(_parse(source, state))
  File "/usr/local/lib/python3.2/sre_parse.py", line 642, in _parse
    raise error("unbalanced parenthesis")
sre_constants.error: unbalanced parenthesis 
```

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:33:16.797

这条线似乎是问题所在

```
match = re.search(r'{0}'.format(trimtemp), modeltrim, re.IGNORECASE) 
```

你应该看看`format(trimtemp)`包含什么。也许添加只是添加一个

```
print format(trimtemp) 
```

之前就行了。可能它包含`(`或`)`对 具有重要意义`re`。也许`re.escape(format(trimtemp))`是你需要的

# ruby-on-rails - private method `test' called for #

> ID：11237298
> 
> 赞同：4
> 
> 时间：2012-06-28T02:24:35.883
> 
> 标签：ruby-on-rails, ruby

Is there anyone can take a look. I got confused about this. Thank you very much.

```
[river@localhost demo04]$ rake db:migrate --trace
  WARNING: 'require 'rake/rdoctask'' is deprecated.  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead.
    at /home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/rdoctask.rb
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  CreateProducts: migrating =================================================
-- create_table(:products)
rake aborted!
An error has occurred, all later migrations canceled:

private method `test' called for #<ActiveRecord::ConnectionAdapters::TableDefinition:0x7f2a8fb07c30>
./db/migrate//20120628020339_create_products.rb:5:in `up_without_benchmarks'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/connection_adapters/abstract/schema_statements.rb:104:in `create_table'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/connection_adapters/mysql_adapter.rb:445:in `create_table'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:346:in `send'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:346:in `method_missing'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:326:in `say_with_time'
/home/river/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:326:in `say_with_time'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:342:in `method_missing'
./db/migrate//20120628020339_create_products.rb:3:in `up_without_benchmarks'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:280:in `send'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:280:in `migrate'
/home/river/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/benchmark.rb:293:in `measure'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:280:in `migrate'
(__DELEGATION__):2:in `__send__'
(__DELEGATION__):2:in `migrate'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:480:in `migrate'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:556:in `call'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:556:in `ddl_transaction'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:479:in `migrate'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:466:in `each'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:466:in `migrate'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:394:in `up'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/activerecord-2.2.2/lib/active_record/migration.rb:377:in `migrate'
/home/river/.rvm/gems/ruby-1.8.7-p358/gems/rails-2.2.2/lib/tasks/databases.rake:111
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/home/river/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.9.2.2/bin/rake:33
/home/river/.rvm/gems/ruby-1.8.7-p358@global/bin/rake:19:in `load'
/home/river/.rvm/gems/ruby-1.8.7-p358@global/bin/rake:19
/home/river/.rvm/gems/ruby-1.8.7-p358/bin/ruby_noexec_wrapper:14
Tasks: TOP => db:migrate 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T05:22:04.580

我猜您的`20120628020339_create_products.rb`迁移有问题，您可能在那里使用了关键字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-20T17:21:06.087

当我在生成资源时输入错误的数据类型时，我得到了这个。而不是`content:text`，我输入了`content:test`。检查你的拼写。

# ruby - ruby typical eql? and == implementations

> ID：11237301
> 
> 赞同：6
> 
> 时间：2012-06-28T02:24:52.067
> 
> 标签：ruby, equality, idioms

I've been reading about the differences between `eql?` and `==` in ruby, and I understand that `==` compares the values while `eql?` compares the value and the type

According to the ruby docs:

*For objects of class Object, eql? is synonymous with ==. Subclasses normally continue this tradition, but there are exceptions.*

It does not seem like the behavior specified in the docs is automatically inherited, but rather this is just a suggestion of how to implement these methods. Does this also imply that if you override either `==` or `eql?` then you should override both?

In the class `Person` below, is this the typical way of overridding `eql?` and `==`, where the less restrictive `==` just delegates to the more restrictive `eql?` (it would seem backwards to have `eql?` delegate to `==` if `==` was only implemented to compare values and not types).

```
class Person

  def initialize(name) 
    @name = name
  end

  def eql?(other)
    other.instance_of?(self.class) && @name == other.name
  end

  def ==(other)
    self.eql?(other)
  end

protected
    attr_reader :name

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T05:32:43.930

我现在很困惑，文档中的 eql[别名是什么意思？](http://ruby-doc.org/core-1.9.3/Module.html#method-i-alias_method "红宝石文档")和 == 方法是这样实现的：

```
class Test
  def foo
    "foo"
  end
  alias_method :bar, :foo
end

baz = Test.new
baz.foo #=> foo
baz.bar #=> foo

#override method bar
class Test
  def bar
    "bbq!"
  end
end

baz = Test.new
baz.foo #=> foo
baz.bar #=> bbq! 
```

所以这就是为什么当你覆盖 == 时，它不会影响 eql？尽管它们是“同义词”。所以在你的情况下，它应该是：

```
class Person
  #...
  def ==(other)
    other.instance_of?(self.class) && @name == other.name
  end
  alias_method :eql?, :==
  #...
end 
```

# recursion - Drools recursive rules not firing

> ID：11237303
> 
> 赞同：1
> 
> 时间：2012-06-28T02:24:55.230
> 
> 标签：recursion, drools

I took the Fibanocci example and modified it little bit. It still seems to work, but I don't know how. Here is my rule.

```
rule "Recurse"
salience 10
    when
       f : Fibanocci(value == 0)
       not Fibanocci(sequence == 0)
    then
       System.out.println(f.sequence + "/" + f.value);
       insert(new Fibanocci(f.sequence - 1));
end 
```

I get the following output:

50/0 49/0 48/0 47/0 46/0 45/0 .. and so on

It seems to me every time a new instance of `Fibanocci` is inserted, it should start from 50 again, but it doesn't.

```
// here is my class, getter/setter skipped
public class Fibonacci {

    private int sequence;
    private long value;

    public Fibonacci(final int sequence) {
        this.sequence = sequence;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:46:19.530

Here is a short explanation, why the rules fire like they do:

*   Every rule fires exactly once for any combination of matching working memory elements.
*   The first match is generated by *"a Fibonacci-Object with value==0"* and *"the non-existance of a Fibonacci-Object with sequence==0"*.
*   For this combination, the rule will **not fire again** until
    *   the particular Fibonacci-Object is modified and updated.
    *   a Fibonacci-Object with sequence==0 appears and then disappears (*)
*   The consequence of the rule creates another Fibonacci-Object with value==0\. This creates only one more match of *"a Fibonacci-Object with value==0"* and *"the non-existance of a Fibonacci-Object with sequence==0"*. (The "non-existance" fact is not changed.)

*) only 99% sure about that

# android - Android 模拟器 - 无法让键盘显示

> ID：11237305
> 
> 赞同：0
> 
> 时间：2012-06-28T02:25:34.497
> 
> 标签：android, android-emulator, android-2.3-gingerbread, android-keypad

基本上我根本无法显示屏幕键盘。

我已经尝试了所有我读过的解决方案，让它出现在我的应用程序中，现在我得出的结论是它一定是模拟器，因为它在使用消息、写电子邮件等时没有出现。

我在设置中查看了语言和输入并检查了示例软键盘，重新启动了模拟器，没有任何变化。

使用安卓 SKD 2.3.3

3.7 英寸 WVGA (Nexus One)

我希望有人能猜出发生了什么。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:45:46.183

您可以使用它来打开软键盘`device`：

```
edit_Text.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(hasFocus){
        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
.showSoftInput(edit_Text, InputMethodManager.SHOW_FORCED);
    }else
        Toast.makeText(getApplicationContext(), "lost the focus", 2000).show();
}
}); 
```

对于`emulator`，我认为它不能保证。真的我没有任何方式以编程方式出现软键盘。有时它会出现，有时不会。在 android 4.0.3 的模拟器中，你可以在通知栏中看到一个符号而不是出现软键盘：
![在此处输入图像描述](../Images/3793595ea2a9bd2a353567ed97ac224c.png)

# java - JToolBar 总是浮动的

> ID：11237306
> 
> 赞同：0
> 
> 时间：2012-06-28T02:25:35.027
> 
> 标签：java, swing, uimanager, jtoolbar

当您将 JToolBar 添加到组件时，您可以将其拖出并创建一个新的浮动窗口，同时父组件也在那里。如何使 JToolBar 自动显示此浮动窗口，而父项不可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:32:54.453

您可以覆盖 javax.swing.plaf.basic.BasicToolBarUI 并将其父级设置为容器的实例（JDialog、JFrame）。默认情况下，这应该会创建一个浮动工具栏。

您可以像下面这样设置 BasicToolbarUI：

```
ui = new BasicToolBarUI();
toolBar = new JToolBar();
toolBar.setUI(ui); 
```

# mongodb - Haskell，mongodb，日期

> ID：11237307
> 
> 赞同：2
> 
> 时间：2012-06-28T02:25:50.410
> 
> 标签：mongodb, haskell, bson

如何从haskell将日期插入或自动插入mongodb？从 mongo 日期类型转换为 haskell 数据类型的最佳方法是什么？

比如说，在我插入博客文章记录（任何 haskell Web 框架）并且我想自动为每条记录加上日期戳的情况下。我该怎么办？问题更多是关于从 haskell 驱动程序中进行类型转换和 mongodb 日期类型创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:26:33.040

您必须创建一个 bson 文档并将其存储在 mongodb 中。最优雅的是为您自己的类型创建一个转换作为 bson 的实例。

从[来源](http://hackage.haskell.org/packages/archive/bson/0.2.1/doc/html/Data-Bson.html)：

```
instance Val UTCTime where
    val = UTC
    cast' (UTC x) = Just x
    cast' _ = Nothing

instance Val POSIXTime where
    val = UTC . posixSecondsToUTCTime . roundTo (1/1000)
    cast' (UTC x) = Just (utcTimeToPOSIXSeconds x)
    cast' _ = Nothing 
```

（或使用时间戳：：ObjectId -> UTCTime免费获取timestamo）

# flash - 如何从外部加载的子级调用父级影片剪辑中的函数？

> ID：11237316
> 
> 赞同：0
> 
> 时间：2012-06-28T02:27:45.247
> 
> 标签：flash, actionscript-2

我有一个 swf 文件，它是我的“shell”程序，其中包含许多功能。这个 shell 程序加载子电影。在子电影的根时间轴中，我有以下代码：

```
function putresponse(q,r) {
    trace (r);
    _root.debug(r);
}
_root.debug("foo"); 
```

调试是一个将一些文本写入屏幕的函数。当我在本地运行它时，将调用 putresponse 函数并进行跟踪。当我远程运行它（在 shell 内）时，第一次调试会在加载时立即发生（如您所料），但稍后当调用 putresponse 时，不会执行 debug(r)。外部剪辑与外壳的 url 相同，所以我认为这不是安全问题。另外，正如我所说， debug("foo") 工作正常。这个真的让我很困惑。任何人都可以解释为什么我不能从 _root 调用调试时从函数调用而不是在第一级时间轴上调用？

编辑：对 putresponse 的调用来自本地（在子 MC 内）MC 深处的两层。实际调用是：

```
_parent._parent.putrepsonse(q,r); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:18:28.417

`Loader`这是使用该类的外部加载的 SWF吗？可能想尝试：

```
req = new URLRequest("test.swf"); // test.swf has function foo()
ldr = new Loader();
ldr.contentLoaderInfo.addEventListener(Event.COMPLETE, sayFoo);
ldr.load(req);
someclip.addChild(ldr);
function sayFoo(event:Event):void {
   externalSwf = event.target.content;
   externalSwf.foo();
} 
```

检查：[http ://www.kirupa.com/forum/showthread.php?290484-How-to-execute-a-function-in-an-externally-loaded-swf](http://www.kirupa.com/forum/showthread.php?290484-How-to-execute-a-function-in-an-externally-loaded-swf)

# jsp - 从基于表单的身份验证注销

> ID：11237318
> 
> 赞同：2
> 
> 时间：2012-06-28T02:28:15.087
> 
> 标签：jsp, servlets, security

使用 servlet 2.3 可以在用户使用表单身份验证登录时将其注销。我知道 servlet 3.0 具有注销功能。servlet 2.3 用户应该如何注销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:10:11.667

只是使会话无效。

```
request.getSession().invalidate(); 
```

之后不要忘记发送重定向。

```
response.sendRedirect(request.getContextPath() + "/login.jsp"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:57:28.100

看这里[关于注销](https://stackoverflow.com/questions/10893727/how-to-properly-logout-of-a-java-ee-6-web-application-after-logging-in/10893823#10893823)。它还解释了两者之间的区别

`Servlet 3.0 HttpServletRequest.logout()`

和

`session.invalidate() method.`

# django - Django i18n 不起作用

> ID：11237324
> 
> 赞同：7
> 
> 时间：2012-06-28T02:28:32.930
> 
> 标签：django, internationalization, locale

我正在尝试为我的项目激活不同的语言。现在英语和西班牙语。

我将描述我遵循的所有步骤：

首先，我将自己放在我要翻译的目录中。或者更好的说法是，所有 {% trans %} 标签都是：

```
$ cd media/templates/landing/
$ mkdir locale
$ django-admin.py makemessages --locale=en 
```

最后一个命令创建目录/文件 /locale/en/LC_MESSAGES/django.po

我打开 django.po 并继续用英语完成所有 msgstr 字段。msgstr 标签是西班牙语。我尊重有关长消息案例的提示。填写完这个文件后，我做：

```
$ django-admin.py compilemessages 
```

这个过程 django.po 并创建 django.mo。

所以我修改了settings.py。重要线路：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'ism.context_processor.user_vars',
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.messages.context_processors.messages',
    'django.core.context_processors.request',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'pipeline.middleware.MinifyHTMLMiddleware',
}

TIME_ZONE = 'Atlantic/Canary'

LANGUAGE_CODE = 'es'

USE_I18N = True

_ = lambda s: s

LANGUAGES = (
    ('es', _('Espanol')),
    ('en', _('English')),
)

USE_L10N = True

USE_TZ = True 
```

最后，我将这一行添加到 URLS.py：

```
(r'^i18n/', include('django.conf.urls.i18n')), 
```

我重新启动我的开发服务器，我将我的 Firefox 浏览器配置为首先选择英语作为主要语言，但它不起作用。所有文本仍以西班牙语而不是英语显示。

我确保 Firefox 是用英语配置的，因为在 Django 视图函数（呈现 .html）中，我使用 request.LANGUAGE_CODE 进行打印，打印“en”。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:52:19.180

> 首先，我将自己放在我要翻译的目录中。或者更好的说法是，所有 {% trans %} 标签都是：
> 
> $ cd media/templates/landing/ $ mkdir locale $ django-admin.py makemessages --locale=en

这不是你应该做的翻译。

您为要翻译的语言创建消息文件，而*不是*要翻译*的*语言，即基础语言。在这种情况下，那是英语。

还需要从您的项目目录运行命令；不是模板目录。

所以，你的命令应该是：

`$ django-admin.py makemessages --locale=es`

您应该从***项目***的根目录而不是模板目录运行它。您也无需创建`locale`目录，该命令将为您创建该目录。

接下来，您将*西班牙语*翻译添加到文件中。该文件将具有英文标签。这告诉 django 加载英文版的西班牙文版本。

一旦你有了它，你编译消息文件（再次从根）

`$ django-admin.py compilemessages`

现在翻译已准备好用于您的应用程序。你需要告诉 django 你想要哪种语言。由于您使用的是内置视图来切换语言，因此您需要使用所需的语言调用该视图。

您可以使用文档中提供的模板：

```
<form action="/i18n/setlang/" method="post">
{% csrf_token %}
<input name="next" type="hidden" value="{{ redirect_to }}" />
<select name="language">
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
<option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
{% endfor %}
</select>
<input type="submit" value="Go" />
</form> 
```

从此表单中选择语言，以便 django 知道要加载哪些翻译。

您还应该阅读[django 如何](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#how-django-discovers-language-preference)为您的视图和模板发现语言偏好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-19T02:48:31.637

*编者注：此答案已从问题的编辑迁移。它是由原始海报编写的。*

采用语言环境路径时出现问题。Django 忽略（或只是没有找到）我在根路径中的语言环境目录，因此 django.po/mo 不可用。在 settings.py 中添加 LOCALE_PATHS 可以解决所有这些问题。

更多信息-> [https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations)

# actionscript-3 - AS3 hitTestPoint 精度延迟一帧

> ID：11237325
> 
> 赞同：0
> 
> 时间：2012-06-28T02:28:59.130
> 
> 标签：actionscript-3, flash, hittest

当我在做我目前的项目时，我发现当我移动对象时，hitTestPoint 的准确性会延迟一帧。因此，如果对象 A 被移动到一个全新且遥远的位置，对该对象执行的 hitTestPoint 将返回 false。为了说明这一点，我使用最基本的逻辑做了一个快速实验：

```
import flash.display.Sprite;
import flash.display.Graphics;
import flash.events.Event;

var me:Sprite = new Sprite();
var g:Graphics = me.graphics;
g.beginFill( 0xFF0000 );
g.drawRect( -10, -10, 20, 20 );
g.endFill();
addChild( me );

trace( "Hit test at (0,0) while object is at (" + me.x + "," + me.y + ") = " + me.hitTestPoint( 0, 0, true ) );

me.x = 300;
me.y = 300;

trace( "\n>>>>>>>>>> WHERE DID THE OBJECT GO? >>>>>>>>>>" );
trace( "Hit test at (0,0) while object is at (" + me.x + "," + me.y + ") = " + me.hitTestPoint( 0, 0, true ) );
trace( "Hit test at (150,150) while object is at (" + me.x + "," + me.y + ") = " + me.hitTestPoint( 150, 150, true ) );
trace( "Hit test at (300,300) while object is at (" + me.x + "," + me.y + ") = " + me.hitTestPoint( 300, 300, true ) );
trace( ">>>>>>>>>> WHERE DID THE OBJECT GO? >>>>>>>>>>\n" );

removeChild( me );
addChild( me );

trace( "After remove/addChild, hit test at (300,300) while object is at (" + me.x + "," + me.y + ") = " + me.hitTestPoint( 300, 300, true ) ); 
```

结果如下：

```
Hit test at (0,0) while object is at (0,0) = true

>>>>>>>>>> WHERE DID THE OBJECT GO? >>>>>>>>>>
Hit test at (0,0) while object is at (300,300) = false
Hit test at (150,150) while object is at (300,300) = false
Hit test at (300,300) while object is at (300,300) = false
>>>>>>>>>> WHERE DID THE OBJECT GO? >>>>>>>>>>

After remove/addChild, hit test at (300,300) while object is at (300,300) = true 
```

我发现在将孩子移除并将其添加回舞台后，hitTestPoint 再次起作用。但 hitTestPoint 也适用于下一帧。

到目前为止，有人遇到过同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:01:03.593

我认为这个问题的发生是由于 flash 处理显示对象的方式。我的**猜测**是你打电话的那一刻

```
addChild(me); 
```

“addChild”强制 flash 绘制“我”。但是当您使用 x 和 y 参数移动“我”时，flash 会等待帧完成，然后再重新绘制图形。

我再次**猜测**您是否要强制 Flash 立即重绘

```
import flash.display.Sprite;
import flash.display.Graphics;
import flash.events.Event;

var me:Sprite = new Sprite();
var g:Graphics = me.graphics;
var myIndex:int;
g.beginFill( 0xFF0000 );
g.drawRect( -10, -10, 20, 20 );
g.endFill();
addChild( me );

me.x = 300;
me.y = 300;

addChild(me); 
```

除非无法绕过它，否则不要使用此 hack，因为它会减慢您的应用程序的速度。我再次无法检查我是否正确，因为我的电脑上没有闪光灯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:17:17.770

我可以确认 chandings 所说的关于闪光灯更新对象在舞台上的位置的时间，但可以更正和扩展解释。Flash 确实具有固定的帧速率，并且显示更新遵循此时间线。但是游戏逻辑可以比渲染速度更快或更慢。如果你调用`addChild(me)`它不会立即更新位置，但也会在下一帧的开始。

因此，您必须选择使用固定时间步长或可变时间步长。与您做出的选择无关，最好使用诸如`OnEnterFame`管理时间步长之类的事件，而不是依靠 Flash 播放器来更新您的逻辑。

我在[gamedev.stackexchange.com](http://gamedev.stackexchange.com)上写了一个类似问题[的答案](https://gamedev.stackexchange.com/questions/29583/2d-animation-smoothness-delta-time-vs-kinematics/29600#29600)，该线程也有一些有用的链接：

*   [时间和运动](http://flashpunk.net/2011/05/timing-motion/)
*   [修复你的时间步长！](http://gafferongames.com/game-physics/fix-your-timestep/)

这是另一个与语言无关的有用线程：[Fixed time step vs Variable time step](https://gamedev.stackexchange.com/questions/1589/fixed-time-step-vs-variable-time-step)

# c++ - 食人魔投影仪通过物体发光

> ID：11237326
> 
> 赞同：3
> 
> 时间：2012-06-28T02:29:13.640
> 
> 标签：c++, ogre, projector, decal

在 Ogre 中，我将贴花投影到球体上。然而，贴花直接穿过球体并将另一个贴花投射到对面！我该如何阻止它？

```
material planets/Planet_Earth { 
  technique { 
    pass { 
      texture_unit { 
        texture earth_surface.png 
        filtering trilinear 
        scale 1 1 
      } 
    } 
  } 
} 
```

恐怕以下答案都不起作用。我已经尝试了所有阴影设置并探索了搅拌机的纹理设置，但似乎没有任何效果。贴花只是渲染两面！它甚至发生在 Ogre 教程 6 中！任何可能的建议表示赞赏！

注意：我正在编辑别人的代码，只是发现它不是网格，球体是在代码中创建的：O sowwy :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:47:22.337

启用某种形式的阴影应该可以解决它。 [食人魔基础阴影](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic%20Tutorial%202)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T08:51:44.747

您必须使用适合您的网格的纹理。Ogre 使用 UV 映射将贴花映射到网格。根据您用于创建 3d 模型的 CG 程序，有不同的创建方法。[看看这个搅拌机教程](http://en.wikibooks.org/wiki/Blender_3D%3a_Noob_to_Pro/UV_Map_Basics)的例子。您还需要一个[导出](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=OGRE+Exporters)器来从中获取`.mesh`文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T01:02:11.590

我只是无法让它工作，因为没有 uv 贴图。我放弃并使用了一个看起来像我的贴花的 .mesh 并将其定位在球体的表面上。对不起大家。

# javascript - 如何对对象的更改进行 Jquery 事件？

> ID：11237328
> 
> 赞同：0
> 
> 时间：2012-06-28T02:29:29.327
> 
> 标签：javascript, jquery

我确信这个问题有一些非常简单的解决方案，至少看起来应该有。但是我一直没找到...

我有一个对象（它不是 DOM 的一部分），它的属性会定期更新：

```
var myobject;
//wait 10 seconds
myobject.property1 = "abc"; 
```

我想在这个属性发生变化时触发一个动作（它不仅仅是 1，而是许多不同的属性）。我该如何在 JQuery 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:42:05.520

您可以触发自定义事件。

```
function changeProperty(obj, prop, value) {
  if (prop in obj && obj[prop] !== value) {
     obj[prop] = value;
     // trigger on document is just an example.
     $(document).trigger('PropertyChange', [obj, prop]);
  }
}

var myobject;
// use the function to change property.
changeProperty(myobject, 'property1', 'abc');

// bind this custom event
$(document).on('PropertyChange', function(obj, prop) {
  console.log(obj, prop);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:32:11.733

`setInterval`根据先前检查的值的数组使用和检查属性值。如果他们改变了呼叫`function`...

```
var previousVals = [],
    checkinterval = setInterval(function(){
        for(var i in myobject) {
            if(/* comparison logic true */) valchanged(myobject[i]);
        }
    }, 4000); /* check every 4 seconds */

function valchanged(value) { /* ... do something */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:35:34.100

我可以说一个解决方案。在很大程度上，这是一个非常容易解决的问题，无需 DOM 事件，使用 setTimeout() 对我的元素进行递归检查。这个解决方案的问题在于，每秒检查我选择的元素的属性是非常臃肿和不断的 DOM 遍历。因此，鉴于这种解决方案的缺陷，我们可以使用一个鲜为人知的 DOM 事件，称为 DOMAttrModified（您可以在此处阅读有关此事件和所有其他标准 DOM 事件的更多信息：http: [//www.w3.org/TR/DOM-Level- 2-事件/events.html](http://www.w3.org/TR/DOM-Level-2-Events/events.html) )

## 最佳解决方案

此事件最有可能不常用，因为它尚未被所有浏览器支持。也就是说，IE 确实支持称为“propertychange”的类似事件，至少，如果我们正在处理所有其他不支持任何内容的浏览器（我我在看着你 Chrome/Safari）。您可以在此处查看浏览器列表和事件兼容性：[http ://www.quirksmode.org/dom/events/index.html](http://www.quirksmode.org/dom/events/index.html)

由于 jQuery 是当今开发人员事实上的首选 Javascript 库，因此我为它创建了一个插件，它在所有浏览器中模仿 DOMAttrModified 事件。

## 代码

```
$.fn.watch = function(props, callback, timeout){
    if(!timeout)
        timeout = 10;
    return this.each(function(){
        var el      = $(this),
            func    = function(){ __check.call(this, el) },
            data    = { props:  props.split(","),
                        func:   callback,
                        vals:   [] };
        $.each(data.props, function(i) { data.vals[i] = el.css(data.props[i]); });
        el.data(data);
        if (typeof (this.onpropertychange) == "object"){
            el.bind("propertychange", callback);
        } else if ($.browser.mozilla){
            el.bind("DOMAttrModified", callback);
        } else {
            setInterval(func, timeout);
        }
    });
    function __check(el) {
        var data    = el.data(),
            changed = false,
            temp    = "";
        for(var i=0;i < data.props.length; i++) {
            temp = el.css(data.props[i]);
            if(data.vals[i] != temp){
                data.vals[i] = temp;
                changed = true;
                break;
            }
        }
        if(changed && data.func) {
            data.func.call(el, data);
        }
    }
} 
```

## 初始化代码

```
jQuery(function($){
    $(".demo span").watch('width,height', function(){
        if(parseFloat($(this).width()) >= 150){
            $(this).css({'background':'green'});
        }
        if(parseFloat($(this).height()) >= 200){
            $(this).css({'background':'blue'});
        }
    });
    $('.demo a').toggle(function(){
        $('.demo span').animate({'width':'400px','height':'200px'}, 1000);
    }, function(){
        $('.demo span').css({'width':'50px','height':'50px','background':'red'});
    });
}); 
```

## 现场演示

该插件允许您指定要“监视”哪些属性以进行更改。当其中一个属性发生更改时，它将触发您的回调函数。 [http://darcyclarke.me/dev/watch/](http://darcyclarke.me/dev/watch/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T02:36:54.443

```
setInterval(function() {
  // Do something every 2 seconds
  $('#myObject').attr('anyAttribute',value);
}, 2000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T02:37:06.687

试试这个@Ryan

希望这会有所帮助。

**示例代码**

```
$("#myObject").bind("input propertychange", function (evt) {
    // If it's the propertychange event, make sure it's the value that changed.
    if (window.event && event.type == "propertychange" && event.propertyName != "value")
        //do whatever

    // or if you want to use .prop api to get the attribute
        // Do your thing here
    }, 2000)); <---- delay here 2 seconds
}); 
```

# google-apps-script - Google Apps 脚本的失败摘要：为查看者订阅更改的副本

> ID：11237330
> 
> 赞同：0
> 
> 时间：2012-06-28T02:30:04.367
> 
> 标签：google-apps-script

我每天都会收到错误通知，如下所示

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** 发件人：日期: 2012 年 6 月 27 日 16:16 主题：Google Apps 失败摘要脚本：订阅者的订阅更改副本 收件人：uwcsea@gapps.uwcsea.edu.sg

您的脚本“为查看者订阅更改的副本”最近未能成功完成。故障摘要如下所示。要为此脚本配置触发器，或更改您的设置以接收未来的失败通知，请单击此处。

该脚本由文档为查看者订阅更改使用：车库销售。

详细信息： Start Function Error Message Trigger End 6/27/12 4:15 PM send_changes 数据存储错误（第 5 行） 基于时间 6/27/12 4:16 PM

真挚地，

Google Apps 脚本

需要帮忙？访问 Google Apps 脚本文档。请不要回复这个信息。(c) 2012 谷歌 ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** /

这是我遇到的错误之一 - [http://screencast.com/t/QCRBCKxHRFGx](http://screencast.com/t/QCRBCKxHRFGx)

急需帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:06:14.850

我建议您尝试手动运行触发器下的功能并调试问题。当您尝试将空值写入脚本/用户属性时，会发生数据存储错误。

很难说为什么会出现屏幕截图中显示的错误，但是如果您可以在此处输入一些可能会有所帮助的代码

# vb.net - 将控件分配给 VB.NET 中的数组

> ID：11237334
> 
> 赞同：0
> 
> 时间：2012-06-28T02:31:16.023
> 
> 标签：vb.net

我创建了一个数组 square(40) 作为图片框。

我必须将表单中的 40 个图片框分配给这些数组。都有名称，例如 pb1、pb2 等。如何通过循环来做到这一点？还是我必须按照标准方法一次分配一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:34:49.657

您可以遍历您的表单控件集合并以这种方式分配它们，我会将您的标记属性用作索引。

```
For Each cntrl As Control In Me.Controls
    If TypeOf cntrl Is PictureBox Then
        square(CInt(cntrl.Tag)) = CType(cntrl, PictureBox)
    End If
Next 
```

# c# - 查询大量大记录

> ID：11237338
> 
> 赞同：0
> 
> 时间：2012-06-28T02:32:01.703
> 
> 标签：c#, sql-server, database

我正在处理一种情况，我正在查询我们的数据库并可能返回 20k 条记录，其中每条记录都有一个大小从 10,000 字节到 1 兆字节不等的配置文件。所以数据量可能非常大。我不想向用户显示这些信息，所以这不是问题。我基本上将其作为计划任务运行，以检查这些配置中的某些行。

然而，我遇到的问题是，当我的记录数变高时，我可能会遇到`System.OutOfMemoryException`. 我有一个查询可以一次定位我需要的所有行，显然这不能正常工作。我正在寻找有关如何在不耗尽内存的情况下有效地查询这些行的建议。我已经考虑过获取我需要的所有行的列表，然后循环遍历结果并一次只提取一行配置，但这似乎不是很有效？

任何建议将不胜感激。

# excel - 合并两个 Private Sub Worksheet_Change

> ID：11237340
> 
> 赞同：2
> 
> 时间：2012-06-28T02:32:05.490
> 
> 标签：excel, vba

我正在使用 VBA 检查单元格的值，如果单元格的值大于一个值，则调用电子邮件模块发送电子邮件。

我想检查多个单元格，但了解在 VBA 中不可能有两个 Private Sub Worksheet_Change。检查多个单元格的最佳方法是什么？

这是我正在使用的代码；

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Cells.Count > 1 Then Exit Sub
    If Not Application.Intersect(Range("A1"), Target) Is Nothing Then
        If IsNumeric(Target.Value) And Target.Value > 10 Then
        Call Mail_small_Text_Outlook
        End If
    End If
End Sub 
```

如果可能的话，这是另一个我想合并到一个 Sub

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Cells.Count > 1 Then Exit Sub
    If Not Application.Intersect(Range("B1"), Target) Is Nothing Then
        If IsNumeric(Target.Value) And Target.Value > 20 Then
        Call Mail_small_Text_Outlook
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:51:47.787

```
Private Sub Worksheet_Change(ByVal Target As Range)

Select Case Taget.Address

  Case "$A$1" 'This will make sure its just one cell and its A1          
      If IsNumeric(Target.Value) And Target.Value > 10 Then         
        Call Mail_small_Text_Outlook         
      End If     

  Case "$B$1" 'This will make sure its just one cell and its B1
      If IsNumeric(Target.Value) And Target.Value > 20 Then         
        Call Mail_small_Text_Outlook         
      End If 

  'Case ... whatever else you want.

End Select
End Sub 
```

可能有更有效的方法，但这是首先想到的。希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:35:09.643

这样做怎么样？

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Call MailAlert(Target, "A1", 10)
    Call MailAlert(Target, "B1", 20)
End Sub

Private Sub MailAlert(ByVal Target As Range, ByVal Address As String, ByVal Value As Integer)
    If Target.Cells.Count > 1 Then Exit Sub
    If Not Application.Intersect(Range(Address), Target) Is Nothing Then
        If IsNumeric(Target.Value) And Target.Value > Value Then
        Call Mail_small_Text_Outlook
        End If
    End If
End Sub 
```

# html - 缩放时导航栏移动

> ID：11237341
> 
> 赞同：1
> 
> 时间：2012-06-28T02:32:07.610
> 
> 标签：html, css

每当我放大或缩小页面时，最后一个 li 会向右移动，然后向下移动。我希望它在缩放时保持在相同的位置。我对 html/css 还很陌生，我真的不知道我应该尝试做什么。

```
<html>
<head>
    <title>Delta Aluminum</title>
    <link rel=stylesheet href="/css/style.css" type="text/css"/>
</head>
<body>
    <div id="page">
        <div id="header">
            <div id="logo">
                <a href="/"><img src="/images/logogrey.png"></a>
            </div>
            <div id="nav">
                <ul>
                    <li id="home"><a href="/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Home&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                    <li id="services"><a href="/services/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Services&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                    <li id="photo"><a href="/gallery/">&nbsp;&nbsp;&nbsp;Photo Gallery&nbsp;&nbsp;&nbsp;</a></li>
                    <li id="glossary"><a href="/glossary/">Glossary of Terms</a></li>
                    <li id="about"><a href="/about/">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;About Us&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                    <li id="contact"><a href="/contact/">&nbsp;&nbsp;&nbsp;&nbsp;Contact Us&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
                </ul>   
            </div>
        </div>
        <div id="banner">
            <img src="/images/imgmain.jpg">
        </div>
        <div id="content">
            <h2>Welcome to Delta Aluminum!</h2>
            <h3>Professional Installation</h3>
            <h3>Over fifteen years of experience and over 7000 homes installed in the Greater Toronto Area</h3>
            <ul>
                <li>Soffit and fascia (aluminum and copper)</li>
                <li>5" and 6" eavestrough and downspouts (aluminum and copper)</li>
                <li>Half-round eavestrough and round downspouts (aluminum and copper)</li>
                <li>Siding (vinyl and aluminum) </li>
                <li>Copper and metal roofs</li>
            </ul>
            <img src="/images/contentimg.jpg">
        </div>
        <div id="footer">
            <p>&copy; 2012&nbsp;Delta Aluminum D Inc.</p>
        </div>
    </div>
</body> 
```

```
 #nav{
    display: inline-block;
}
    #nav ul{
        margin-left:-40px;  
}
        #nav ul li{
            padding: 7px 0px 12px 0px;
            display: inline;
        }
            #nav ul li a{
                padding: 7px 30px;
                color: #444;
            }
            #nav ul li a:hover{
                padding: 7px 30px 11px 30px;
                background-color: white;
                color: black;
            }
            #nav ul li a:active{
                padding: 7px 30px;
                background-color: white;
                color: black;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:49:27.300

在#nav 上指定宽度将避免换行，因为默认情况下 div 将拉伸到窗口的末尾。也使用   因为间距通常是一个坏主意。改用 CSS 边距或填充。

看看这篇文章，它可能会对你有所帮助。

[http://www.vanseodesign.com/css/simple-navigation-bar-with-css-and-xhtml/](http://www.vanseodesign.com/css/simple-navigation-bar-with-css-and-xhtml/)

# c++ - 字段的类型不完整 const char * []

> ID：11237345
> 
> 赞同：0
> 
> 时间：2012-06-28T02:32:12.747
> 
> 标签：c++

我正在尝试将 argv 从我的程序的主函数传递给我的类的构造函数。然后我想将我班级中的一个字段设置为这些值。我 `const char * _argv[];`的头文件中有。我的构造函数是：

`Sweeper(int argc, const char * argv[]){_argc = argc; _argv = argv;}`

我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:36:14.257

对于函数参数（仅），`const char * argv[]`是一种有趣的拼写方式`const char **argv`。所以解决方法是定义`_argv`匹配。

# postgresql - Heroku - 无法通过 Play Framework 应用程序设置 postgres 数据库？

> ID：11237351
> 
> 赞同：5
> 
> 时间：2012-06-28T02:33:52.747
> 
> 标签：postgresql, exception, heroku, playframework

我正在尝试通过播放框架应用程序在 heroku 上设置 postgres 数据库，但我不断收到关于我的 DATABASE_URL 的错误。

堆栈跟踪： -

```
-----> Heroku receiving push
-----> Play 2.0 - Java app detected
-----> Running: sbt clean compile stage
       Getting net.java.dev.jna jna 3.2.3 ...
       :: retrieving :: org.scala-sbt#boot-jna
        confs: [default]
        1 artifacts copied, 0 already retrieved (838kB/25ms)
       Getting org.scala-tools.sbt sbt_2.9.1 0.11.2 ...
       :: retrieving :: org.scala-sbt#boot-app
        confs: [default]
        37 artifacts copied, 0 already retrieved (7324kB/78ms)
       Getting Scala 2.9.1 (for sbt)...
       :: retrieving :: org.scala-sbt#boot-scala
        confs: [default]
        4 artifacts copied, 0 already retrieved (19939kB/188ms)
       [info] Loading global plugins from /tmp/build_hdhsg4dgyxy/.sbt_home/.sbt/plugins
       [info] Updating {file:/tmp/build_hdhsg4dgyxy/.sbt_home/.sbt/plugins/}default-05c586...
       [info] Resolving org.scala-tools.sbt#sbt_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#main_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#actions_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#classfile_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#io_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#control_2.9.1;0.11.2 ...
       [info] Resolving org.scala-lang#scala-library;2.9.1 ...
       [info] Resolving org.scala-tools.sbt#interface;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#logging_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#process_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#classpath_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#launcher-interface_2.9.1;0.11.2 ...
       [info] Resolving org.scala-lang#scala-compiler;2.9.1 ...
       [info] Resolving org.scala-tools.sbt#incremental-compiler_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#collections_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#api_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#persist_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbinary#sbinary_2.9.0;0.4.0 ...
       [info] Resolving org.scala-tools.sbt#compile_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#ivy_2.9.1;0.11.2 ...
       [info] Resolving org.apache.ivy#ivy;2.2.0 ...
       [info] Resolving com.jcraft#jsch;0.1.31 ...
       [info] Resolving commons-httpclient#commons-httpclient;3.1 ...
       [info] Resolving commons-logging#commons-logging;1.0.4 ...
       [info] Resolving commons-codec#commons-codec;1.2 ...
       [info] Resolving org.scala-tools.sbt#completion_2.9.1;0.11.2 ...
       [info] Resolving jline#jline;0.9.94 ...
       [info] Resolving org.scala-tools.sbt#run_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#task-system_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#tasks_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#tracking_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#cache_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#testing_2.9.1;0.11.2 ...
       [info] Resolving org.scala-tools.testing#test-interface;0.5 ...
       [info] Resolving org.scala-tools.sbt#compiler-interface;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#precompiled-2_8_1;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#precompiled-2_8_0;0.11.2 ...
       [info] Resolving org.scala-tools.sbt#precompiled-2_9_0;0.11.2 ...
       [info] Done updating.
       [info] Compiling 1 Scala source to /tmp/build_hdhsg4dgyxy/.sbt_home/.sbt/plugins/target/scala-2.9.1/sbt-0.11.2/classes...
       [info] Loading project definition from /tmp/build_hdhsg4dgyxy/project
       [info] Set current project to PostDemo (in build file:/tmp/build_hdhsg4dgyxy/)
       [success] Total time: 0 s, completed Jun 28, 2012 2:20:47 AM
       [info] Updating {file:/tmp/build_hdhsg4dgyxy/}PostDemo...
[info] downloading http://repo.typesafe.com/typesafe/releases/postgresql/postgresql/9.1-901.jdbc4/postgresql-9.1-901.jdbc4.jar ...
       [info]   [SUCCESSFUL ] postgresql#postgresql;9.1-901.jdbc4!postgresql.jar (117ms)
       [info] Done updating.
       [info] Compiling 4 Scala sources and 4 Java sources to /tmp/build_hdhsg4dgyxy/target/scala-2.9.1/classes...
       [error] {file:/tmp/build_hdhsg4dgyxy/}PostDemo/compile:compile: com.typesafe.config.ConfigException$UnresolvedSubstitution: conf/application.conf: 37: Could not resolve substitution to a value: ${DATABASE_URL}
       [error] Total time: 10 s, completed Jun 28, 2012 2:20:57 AM
 !     Failed to build app with sbt
 !     Heroku push rejected, failed to compile Play 2.0 - java app
       error: failed to push some refs to 'git@heroku.com.git' 
```

我使用以下命令将我的 DATABASE_URL 设置为环境变量： -

```
echo "export DATABASE_URL=postgres://postgres:1234@localhost/Play">>.bash_profile
 . .bash_profile 
```

我也尝试设置另一个 URL，我发现使用`heroku config`我知道的命令是一个很大的 postgres URL，但它不能正常工作并且每次都会出现相同的异常。

这是我在 application.conf 文件中添加的内容

```
%prod.db=${DATABASE_URL} 
```

依赖

```
val appDependencies = Seq(
   "postgresql" % "postgresql" % "9.1-901.jdbc4"
) 
```

所以现在我对我的`DATABASE_URL`. 为什么 heroku 无法用合适的值代替它。heroku 在哪里寻找合适的 URL？在我的`application.conf`文件中还是在我系统的 bash 配置文件中设置的环境变量中？

任何帮助将非常感激。

谢谢

**编辑**

日志

```
2012-06-28 20:38:18,500 - [INFO] - from play in main 
Listening for HTTP on port 9000...

2012-06-28 20:38:25,862 - [INFO] - from play in play-akka.actor.default-dispatcher-1 
database [default] connected at jdbc:postgresql://localhost/Play

2012-06-28 20:38:27,470 - [ERROR] - from application in New I/O server worker #1-1 

! @6aoffk4jk - Internal server error, for request [GET /login/?username=abc&&password=abc] ->

play.api.db.evolutions.InvalidDatabaseRevision: Database 'default' needs evolution! [An SQL script need to be run on your database.]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:424) ~[play_2.9.1.jar:2.0.1]
    at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:410) ~[play_2.9.1.jar:2.0.1]
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.2]
    at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.2]
    at play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:410) ~[play_2.9.1.jar:2.0.1]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.2]
    at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.2]
    at play.api.Play$.start(Play.scala:60) ~[play_2.9.1.jar:2.0.1]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:125) ~[play_2.9.1.jar:2.0.1]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.1]
    at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:112) ~[play_2.9.1.jar:2.0.1]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
    at scala.Either$RightProjection.flatMap(Either.scala:277) ~[scala-library.jar:0.11.2]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.1]
    at akka.dispatch.Future$$anon$3.liftedTree1$1(Future.scala:195) ~[akka-actor.jar:2.0.1]
    at akka.dispatch.Future$$anon$3.run(Future.scala:194) ~[akka-actor.jar:2.0.1]
    at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:83) ~[akka-actor.jar:2.0.1]
    at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381) ~[akka-actor.jar:2.0.1]
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) ~[akka-actor.jar:2.0.1]
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:974) ~[akka-actor.jar:2.0.1]
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1478) ~[akka-actor.jar:2.0.1]
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) ~[akka-actor.jar:2.0.1]

2012-06-28 20:38:30,150 - [WARN] - from play in New I/O server worker #1-1 
Applying evolution script for database 'default':

# !!! WARNING! This script contains DOWNS evolutions that are likely destructives

# --- Rev:2,Downs - eddafc8
delete from admins;
delete from employees;

# --- Rev:2,Ups - 822c4da
insert into admins (username, password) values ('abc', 'abc');
insert into admins (username, password) values ('abc', 'abc');

insert into employees (id,name,email) values (1, 'Super Man', 'superman@superhero.com');
insert into employees (id,name,email) values (2, 'Bat man', 'batman@superhero.com');
insert into employees (id,name,email) values (3, 'Spider Man', 'spidy@superhero.com');
insert into employees (id,name,email) values (4, 'Iron Man', 'ironman@superhero.com');

2012-06-28 20:38:30,741 - [INFO] - from play in play-akka.actor.default-dispatcher-1 
database [default] connected at jdbc:postgresql://localhost/Play

2012-06-28 20:38:31,519 - [INFO] - from play in play-akka.actor.default-dispatcher-1 
Application started (Dev) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T04:19:13.260

看来您正在混合一些 Play 1 和 Play 2 约定。看来您正在使用 Play 2。在 Play 2 中，设置它的最简单方法是不在`DATABASE_URL`您的中使用`application.conf`，而只是覆盖您的数据库配置`Procfile`：

```
web: target/start -Dhttp.port=$PORT -DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=$DATABASE_URL 
```

有关更详细的演练，请参阅我的[Play 2 教程](https://github.com/jamesward/play2torial)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T14:55:03.537

在 Heroku 中使用 play 2.4、Slick 3.0.3 和 postgres 它适用于我以下运行我的 sql 进化脚本的设置：

在 build.sbt 中：

```
name := """app-name""" 
```

并在 libraryDependencies ++= Seq(

```
"com.typesafe.play" %% "play-slick" % "1.0.1",
"com.typesafe.play" %% "play-slick-evolutions" % "1.0.1",
"com.typesafe.slick" %% "slick" % "3.0.3",
"org.postgresql" % "postgresql" % "9.4-1201-jdbc41",
"org.slf4j" % "slf4j-nop" % "1.6.4", 
```

在 application.conf 中：

```
slick.dbs.default.driver ="slick.driver.PostgresDriver$"
slick.dbs.default.db.dataSourceClass = "slick.jdbc.DatabaseUrlDataSource"
slick.dbs.default.db.properties.driver = "org.postgresql.Driver" 
```

在 Procfile 中：

```
web: target/universal/stage/bin/app-name -Dhttp.port=${PORT} -Dplay.evolutions.db.default.autoApply=true 
```

干杯

# perl - 在 Perl 中，如何使用正则表达式替换从字符串中删除 + 号？

> ID：11237352
> 
> 赞同：-7
> 
> 时间：2012-06-28T02:33:59.363
> 
> 标签：perl

在 Perl 中，我有一个 URL 读取为`health+development`，我想`+`从中间删除它，以便它可以读取为`health development`. 任何想法都会节省我的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:57:04.353

你真的应该使用[URI](http://search.cpan.org/perldoc?URI)来解析 url。`+`不是 url 中唯一的特殊字符。我会提供一些代码，但您没有指定网址的哪一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:34:45.623

您应该遵循[@ikegami 的建议](https://stackoverflow.com/a/11237485/100754)来解析 URL。

至于`+`从字符串中删除符号，我发现字符类比斜线转义更具可读性：

```
my $s = 'health+development+topics';
$s =~ s/ [+] / /gx;
print "$s\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T02:53:49.720

您应该看看[使用正则表达式进行搜索和替换](http://perldoc.perl.org/perlrequick.html#Search-and-replace)。

但为了节省您的时间，这里有一个快速演示：

```
my $str = 'health+development';
$str =~ s/\+/ /; # replace '+' with ' '
print $str; 
```

# windows - SSL 证书在 Safari 上不起作用

> ID：11237354
> 
> 赞同：2
> 
> 时间：2012-06-28T02:34:32.820
> 
> 标签：windows, ssl, safari

我们的站点设置为通过 GoDaddy.com 的证书使用 SSL。在除 Safari 之外的所有浏览器上，SSL 都没有问题。但是，在 PC 上的 Safari 上，我们无法访问该站点。当您尝试浏览该站点时，您会收到“选择证书”提示或“无可用证书”提示。如果您收到“选择证书”提示并且您选择了一个有效的证书，则提示消失并且看起来页面开始加载，但它只是无限期地挂起。

我已经与 GoDaddy 进行了详细的交谈，他们已经确认 SSL 或证书链没有问题。

托管该站点的服务器正在运行 Windows Server 2008 - IIS 7。该问题已在最新版本的 Safari (5.1.7) 上重现。

这在 MAC 上运行良好。

任何帮助将不胜感激！

该网站是[https://www.nextcrew.com](https://www.nextcrew.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:21:57.313

```
 <Connector protocol="HTTP/1.1"
               port="8443" maxThreads="200"
               scheme="https" secure="true" SSLEnabled="true"
               SSLCertificateFile="conf/ssl/server.cer"
               SSLCertificateKeyFile="conf/ssl/server.key"
               SSLVerifyClient="none" SSLProtocol="SSLv3"/> 
```

`SSLVerifyClient="optional"`不适用于 Windows 版 Safari。

# c# - Selenium webdriver窗口处理c#switchTo失败

> ID：11237357
> 
> 赞同：5
> 
> 时间：2012-06-28T02:34:48.170
> 
> 标签：c#, selenium, for-loop, webdriver, window-handles

在测试过程中会弹出 2 个窗口。

我的代码：

```
string BaseWindow = driver.CurrentWindowHandle;                 
ReadOnlyCollection<string> handles = driver.WindowHandles;

foreach(string handle in handles)                    
{                         
    Boolean a = driver.SwitchTo().Window(handle).Url.Contains("Main");
    if (a == true)  
    {       
        InitialSetting.driver.SwitchTo().Window(handle);      
        break;
    }  
} 
```

我想切换到 url 包含“Main”的窗口。但是当测试运行时，它会在两个窗口之间不断切换，并且不会停止。

我调试并发现`foreach`即使`boolean a`是真的也没有中断。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T09:29:30.817

```
//switch to new window 
driver.FindElement(By.Id("link")).Click(); 

//wait for new window to open 
Thread.Sleep(2000); 

//get the current window handles 
string popupHandle = string.Empty; 
ReadOnlyCollection<string> windowHandles = driver.WindowHandles;  

foreach (string handle in windowHandles)  
{  
    if (handle != existingWindowHandle)  
    {  
         popupHandle = handle; break;  
    }  
}  

 //switch to new window 
driver.SwitchTo().Window(popupHandle); 

//check for element on new page 
webElement = driver.FindElement(By.Id("four04msg")); 
if(webElement.Text == "THE CONTENT YOU REQUESTED COULDN’T BE FOUND...")  
{  
    return false;  
}  
else  
{  
    return true;  
}  

 //close the new window to navigate to the previous one
driver.close(); 

//switch back to original window 
driver.SwitchTo().Window(existingWindowHandle); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:51:00.353

1.  使用原始邮政编码。

    `string existingWindowHandle = driver.CurrentWindowHandle;`

    它的第一个窗口。

2.  一件重要的事情是：

    `ReadOnlyCollection<string> windowHandles = driver.WindowHandles`

    包含字符串名称对象，而不是 Windows 标题名称，例如 Collection`windowHandles`可以包含：

    **不是 Windows 标题名称，因为** `{Menu},{PopUp}`
    **它包含**：`{45e615b3-266f-4ae0-a508-e901f42a36d3},{c6010037-0be6-4842-8d38-7f37c2621e81}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-30T16:43:35.753

```
IJavaScriptExecutor js = driver as IJavaScriptExecutor;
js.ExecuteScript("window.open()");
String ventanaPrincipal = driver.CurrentWindowHandle;
List<string> listWindow = new List<string>(driver.WindowHandles);
driver.SwitchTo().Window(listWindow[1]);
driver.Navigate().GoToUrl("http:www.google.com");
IWebElement search = driver.FindElement(By.Name("q"));
search.SendKeys("RPA"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T18:00:07.087

```
 IWebDriver popup = null;
        string mainWindow = driver.CurrentWindowHandle;
        bool foundPopupTitle = false;
        foreach (string handle in driver.WindowHandles)
        {
            popup = driver.SwitchTo().Window(handle);
            if (popup.Title.Contains(title))
            {
                foundPopupTitle = true;
                break;
            }
        }

        if (foundPopupTitle)
        {
            popup.Close();
        }
        //switch back to original window
        driver.SwitchTo().Window(mainWindow); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-11-05T11:34:24.543

```
string NewWindowHandle = string.Empty;
ReadOnlyCollection<string> windowHandles = driver.WindowHandles;
NewWindowHandle = windowHandles[windowHandles.Count - 1];
driver.SwitchTo().Window(NewWindowHandle); 
```

# linq-to-xml - XDocument - 查找特定节点的值

> ID：11237359
> 
> 赞同：1
> 
> 时间：2012-06-28T02:34:50.310
> 
> 标签：linq-to-xml

我在使用 XDocument 时遇到问题。我需要的是在这个xml中获取一个名为“LocalityName”的节点的值：[http ://maps.google.com/maps/geo?q=59.4344,24.3342&output=xml&sensor=false](http://maps.google.com/maps/geo?q=59.4344,24.3342&output=xml&sensor=false)

我使用 XmlDocument 完成了这项工作：

```
 XmlDocument doc = new XmlDocument();
        doc.Load("http://maps.google.com/maps/geo?q=54.9133,23.9001&output=xml&sensor=false");

        XmlNodeList myElement = doc.GetElementsByTagName("Locality");
        foreach (XmlNode node in myElement)
        {
            XmlElement myElement = (XmlElement)node;
            string varN = myElement.GetElementsByTagName("LocalityName")[0].InnerText; 
```

不知道这是否是最好的方法，但它确实有效。现在我需要对 XDocument 做同样的事情。我一直在寻找整个晚上，但没有什么对我有用。请指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T05:30:47.770

这里有两种使用 XDocument 的方法：

```
 XDocument doc = XDocument.Load("http://maps.google.com/maps/geo?q=54.9133,23.9001&output=xml&sensor=false");

    var localityName = doc.Descendants(XName.Get("LocalityName", @"urn:oasis:names:tc:ciq:xsdschema:xAL:2.0")).First().Value;

    var localityName2 = (from d in doc.Descendants()
                         where d.Name.LocalName == "LocalityName"
                         select d.Value).First(); 
```

第一种方法 (localityName) 假设您知道命名空间，请参阅[https://stackoverflow.com/a/6209890/1207991](https://stackoverflow.com/a/6209890/1207991)了解更多信息。

第二种方法 (localityName2) 不需要命名空间，请参阅[https://stackoverflow.com/a/2611152/1207991](https://stackoverflow.com/a/2611152/1207991)了解更多信息。

# css - 如何使用 CSS 将此提交按钮强制到新行？

> ID：11237360
> 
> 赞同：2
> 
> 时间：2012-06-28T02:34:56.643
> 
> 标签：css

我希望将按钮强制向左并在新行上。到目前为止，我能够做到这一点的唯一方法是`<br /><br /><br />`在提交按钮的标记上方插入一些额外的标记。

如何修改此 CSS 以强制按钮换行？

```
fieldset input[type="submit"] {
    background-color: #d3dce0;
    border: 1px solid #787878;
    cursor: pointer;
    font-size: 1.0em;
    font-weight: 600;
    padding: 7px 7px 7px 7px;
    margin-top: 20px;
    display : inline-block;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T02:37:34.083

在您的 CSS 中，请更改此行：

```
fieldset input[type="submit"] {
    display: inline-block;
} 
```

这样：

```
fieldset input[type="submit"] {
    display: block;
} 
```

请不要有空格`display`。:)

# coldfusion - Coldfusion-10 错误：从 init_datetype 函数返回的值不是 pagedatetype_cfc 类型

> ID：11237374
> 
> 赞同：2
> 
> 时间：2012-06-28T02:36:59.097
> 
> 标签：coldfusion, coldfusion-10, application.cfc

在 Coldfusion 10 中，我收到以下错误： **“从 Application.cfc 调用事件处理程序方法时发生异常。方法名称是：onRequestStart。”**

**根本原因：详细信息：** “如果将组件名称指定为返回类型，则可能找不到该组件的定义文件或无法访问。”

**根本原因：消息：** “从 init_pagedatetype_ver04 函数返回的值不是 gg2_pagedatetype_cfc_ver04 类型。”

**任何想法我做错了什么？这是相关文件和相关代码 **

**文件 #1：“\application.cfc”**

```
 <cfset THIS.mappings["/inc_CFC"]= getDirectoryFromPath(getCurrentTemplatePath())
        & "/inc_CFC" >

<cffunction name="onRequestStart">

  <!--- INIT page structure --->
  <cfset REQUEST.paths.msg= (getDirectoryFromPath(getCurrentTemplatePath())
         & "inc_CFC") >

  <cfset REQUEST.gg2_pageDataStruct= 0 >

  <cfinvoke 
     returnvariable="REQUEST.gg2_pageDataStruct" 
     component="inc_CFC.gg2_pagedatatype_cfc_ver04" 
     method="init_pagedatetype_ver04"></cfinvoke>
  . . . 
  </cffunction> 
```

**文件 #1：“\inc_CFC\gg2_pagedatatype_cfc_ver04.cfc”**

```
 <cfcomponent  output="false"  
    displayname="gg2_pagedatetype_cfc_ver04"
    hint="Component/Class/Module that manages all business Data "  >
    . . . 
    <cffunction name="init_pagedatetype_ver04"
      returntype="gg2_pagedatetype_cfc_ver04"  output="false" >

     <cfset var LOCAL=StructNew()>

     <!--- Do nothing but create blank object / component for now.  Later on 
       user will call other functions to init parts of structure/component --->

     <cfreturn THIS> 
   </cffunction>

   . . . 
  </cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:46:01.413

你只是有一些拼写错误看看这些：

```
gg2_pagedatatype_cfc_ver04
gg2_pagedatetype_cfc_ver04 
```

一个说`data`，一个说`date`。确保您的所有名称和类型都正确匹配，您的错误就会消失。

# wpf - 如何让 WPF 菜单像旧的 win 表单菜单一样对齐？

> ID：11237378
> 
> 赞同：5
> 
> 时间：2012-06-28T02:37:46.367
> 
> 标签：wpf

我有一个正在开发的 WPF 应用程序。目前一切都非常简单，因为我还没有实现任何“肉”。使用原型困扰一些用户的一件事是，菜单从以前在 win 表单中的方式“向后”下拉。

[![在此处输入图像描述](../Images/8bf14ffd97f7ec900e437a05b2e504ab.png)](https://i.stack.imgur.com/7QSlO.png)

我正在寻找的是菜单框的左边缘与父菜单中“文件”一词的左边缘对齐。我一直在做一些搜索，但我认为我没有找到正确的关键字。我不确定它是否有任何区别，但我也在使用 Galasoft 的 MVVMLight 库。

我的问题是如何让菜单的左边缘与“文件”文本的左边缘对齐？提前谢谢！

```
 <Menu Grid.Row="0" Grid.Column="0">
        <MenuItem Header="_File" >
            <MenuItem Header="EnableWatcher" IsCheckable="True" IsChecked="{Binding WatcherEnabled}" />
            <Separator />
            <MenuItem Header="_Exit" />
        </MenuItem>
    </Menu> 
```

编辑：这是 xaml 文件中的所有代码。

```
 <Window x:Class="DonkeySuite.Watcher.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:DonkeySuite.Watcher.ViewModel"
    Title="MainWindow" Height="350" Width="525" Icon="/DonkeySuite.Watcher;component/BlueFolder.ico">
<Window.DataContext>
    <ViewModel:MainViewModel />
</Window.DataContext>
<!--<i:Interaction.Triggers>
    <i:EventTrigger EventName="Closing">
        <Command:EventToCommand Command="{Binding SaveSettings}"/>
    </i:EventTrigger>
</i:Interaction.Triggers>-->
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>

    </Grid.ColumnDefinitions>
    <Menu Grid.Row="0" Grid.Column="0">
        <MenuItem Header="_File" >
            <MenuItem Header="EnableWatcher" IsCheckable="True" IsChecked="{Binding WatcherEnabled}" />
            <Separator />
            <MenuItem Header="_Exit" />
        </MenuItem>
    </Menu>

    <Grid Grid.Column="0" Grid.Row="1">
        <Grid.RowDefinitions>

        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="60" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="100" />
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">Directory:</TextBlock>
        <TextBox Grid.Column="1" Text="{Binding WatchDirectory, Mode=TwoWay}" VerticalAlignment="Center"></TextBox>
        <Button Grid.Column="2" Content="Browse" Command="{Binding BrowseForDirectory}" Height="24" Margin="5, 0, 15, 0">
        </Button>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-03T22:19:05.807

我终于弄明白了。我找到了 Microsoft 的链接，解决了我的问题。显然这是因为我的电脑上有一个 Wacom 平板电脑。它与 WPF 完全无关。

[http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/menus-are-being-right-aligned/cb94ff1e-5c3f-4535-944a-ae5632149a0d](http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/menus-are-being-right-aligned/cb94ff1e-5c3f-4535-944a-ae5632149a0d)

万一链接最终消失，这里是一个坚果壳中的详细信息。

> 按**Windows 键 + R**调出**运行**对话框。在**打开** 行中，**复制/粘贴**以下文本行。
> 
> `shell:::{80F3F1D5-FECA-45F3-BC32-752C152E456E}`
> 
> 按**确定**。
> 
> 这将启动**Tablet PC Settings**配置对话框（即使您没有 Tablet PC）。
> 
> 选择**其他**选项卡。
> 
> 在“**惯用手**”部分，勾选“**左手”** 选项。
> 
> 单击**确定**。

# jquery - How to call same function in jquery for two checkbox events?

> ID：11237379
> 
> 赞同：0
> 
> 时间：2012-06-28T02:37:55.147
> 
> 标签：jquery

> **Possible Duplicate:**
> [Triggering jquery event function at page load](https://stackoverflow.com/questions/2765542/triggering-jquery-event-function-at-page-load)

I have a function to do something when a checkbox in a checkbox group is clicked to be checked. But now, I want something more. When the page is first time loaded, I have couple of the checkboxes pre-checked, so I want the function can be called for those checked checkbox, then, when user click checkbox, the same function will run again.

I tried `.bind("ready, click",function())`... doesn't work.

here is the current code which is working fine for click event, thanks!

```
<script>
$(document).ready(function(){

    $('.list_item').click(function(e){
        var facility_id = $(this).val();

        if ($(this).is(':checked')) {
                do somthing 1;
                    }
            });
            } else {
                do somthing 2;
                }
            }           
        });
    })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:39:56.387

Try this: using `.each` when DOM loads API = [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

Further you can refactor like this: move `.is(:checked)` in seperate function and call it from click function.

The reason click work is because the `click` event is well bound to the element. but when you load `.each` will be the right API to use.

hope this helps, please let me know if I missed anything.

**code**

```
$(document).ready(function(){

    $('.list_item').each(function(e){
        var facility_id = $(this).val();

        if ($(this).is(':checked')) {
                do somthing 1;
                    }
            });
            } else {
                do somthing 2;
                }
            }           
        });
    }) 
```

# algorithm - 替代秩函数RBTree（红黑树）

> ID：11237381
> 
> 赞同：0
> 
> 时间：2012-06-28T02:38:30.367
> 
> 标签：algorithm, rank, red-black-tree

我有一个订单统计增强红黑树。

它在大多数情况下都有效。但我需要实现一个快速函数（O（lg n）），它主要按排序顺序返回节点的位置。就像我教科书中的 OS-rank 函数一样。但有一个转折：如果两个节点具有相同的分数，则返回值应该相同。这是 os-rank 函数（在伪代码中，对于给定的节点 x，其中 root 是树的根）。

```
OS-Rank(x)
r=x.left.size+1
y=x
while y!=root
  if y==y.p.right
    r+=y.p.left.size+1
y=y.p
return r 
```

但是：我需要的是，如果 A 有键 1 而节点 B 有键 1，则函数对两者都返回 1。等等。我尝试过这样的事情。

```
rank(x)
start with value r=1
check that x.right is not Nil
  case x.right has the same key as x
    add x.right.#nodeswithkeyhigher(x.key) to r
  other cases: add x.right.size to r
y=x
while y != root
  if y.parent.left == y
    case y.parent.right.key>x.key
      add y.parent.right to r
    other cases
      add y.parent.right.#nodeswithkeyhigher(x.key) to r
  y=y.parent
return r 
```

你猜怎么着：一个测试用例失败了。我想知道这是否是一种正确的做事方式，或者我是否犯了一些我没有看到的错误（否则错误出现在 Node.#nodeswithkeyhigher(key) 函数中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:03:54.373

编辑：答案的最后一段，感谢 Sticky。

tl;dr：跳到最后几段

这与我遇到的问题相同。（是的，DS 也是如此）。到目前为止，除了 5 之外的所有运行都是正确的。我已经测试了几件事，其中一件非常简单：只需在 OSRank 中交换左右即可。在某些情况下，它给出了正确的答案，但在更难的情况下，它有点偏离。哦，我还补充说，如果 y.score == y.parent.score 我只添加 y.parent 的正确大小，否则我添加正确的大小 + 1。

```
public int OSRank(Node x)
    {
        int r = x.Right.Size + 1;
        Node y = x;
        while (y != root)
        {
            if (y == y.Parent.Left)
            {
                if (y.Score == y.Parent.Score)
                    r = r + y.Parent.Right.Size;
                else
                    r = r + y.Parent.Right.Size + 1;
            }
            y = y.Parent;
        }
        return r;
    } 
```

让我们首先在第 340 页的树上测试这个方法（图 14.1）。我们将搜索 38 的排名（应该返回 4，因为 39、47 和 41 更高）：

1.  r = 1 + 1 = 2 //右侧 + 1
2.  r = 2 //什么都没有发生，因为我们是一个正确的孩子
3.  r = r + 1 + 1 = 4 //我们是左孩子，我们父母的key更大并且parent.Right.size = 1
4.  r = 4 //什么都没有发生，因为我们是正确的孩子

所以在这种情况下，结果是正确的。但是，如果我们在树中添加另一个键为 38 的节点会怎样。这稍微重塑了我们的树，节点 26 的右侧部分现在看起来像：

（我还不允许添加图片，所以请看这里：http://i47.tinypic.com/358ynhh.png）

如果我们使用相同的算法，我们会得到以下结果（选择红色的）：

1.  r = 0 + 1 = 1 //没有右边
2.  r = 1 //我们是正确的孩子
3.  r = 1 //我们是正确的孩子
4.  r = 1 + 3 + 1 = 5 //3来自节点41的大小。
5.  r = 5 //我们是正确的孩子

虽然我们在这里预计排名第 4。当我输入这个时，我注意到我们检查了 y.Score == y.Parent.Score，但我完全忘记了 y 的变化。因此，在第 4 行中，子句“y.Score == y.Parent.Score”是错误的，因为我们将节点 30 与 38 进行了比较。因此，如果我们将该行更改为：

```
if (x.Score == y.Parent.Score) 
```

该算法输出秩 4，这是正确的。这意味着我们消除了另一个问题。但是还有更多，我也没有弄清楚：

*   Y.Parent.Right 包含重复键的情况。从技术上讲，如果我们有 3 个具有相同密钥的节点，它们应该算作 1。
*   Y.Parent.Right 包含等于 x.Key 的键（您想要排名的节点）的情况。那会使我们倒退几个等级，这是错误的。

## 我想你可以保留另一个整数来保存分数更高的节点数量。插入后，如果该节点的子树不包含具有相同分数的节点，则可以爬树并调整值。但是我现在不知道这是如何完成的（并且有效地）。

编辑：首先找到具有相同分数 x 的 x 的最终后继者。然后以正常方式计算排名。上面的代码有效。

# jquery - 发布并替换的简单下拉菜单

> ID：11237384
> 
> 赞同：0
> 
> 时间：2012-06-28T02:39:09.363
> 
> 标签：jquery

我正在尝试制作一个下拉菜单，当您单击下拉菜单 a（在本例中为第 3 项）时，会显示 ul，然后当您单击 li 例如第 2 项时，它会被发布，然后是第 3 项（a 之间的文本）将被第 2 项替换，反之亦然。到目前为止，我一直没有成功地做到这一点。任何帮助将不胜感激。这是我到目前为止所拥有的：

```
<div class="dropdown">
    <a href="#">Item 3</a>
    <ul data-id='<?php echo $row['_id'] ?>' data-url='<?php echo Uri::create('edit') ?>'>
        <li> Item 1 </li>
        <li> Item 2 </li>
        <li> Item 4 </li>
        <li> Item 5 </li>
        <li> Item 6 </li>
    </ul>
</div>

$('.dropdown a').click(function() {
    $(this).parent().children('ul').toggle();
    return false;
});

$('.dropdown li').click(function() {
    var url = $(this).parent().data('url'),
        id = $(this).parent().data('id'),
        status = $(this).text();

$.post(url, { status: status, id: id }, function() {

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:14:25.220

解决方案在文本更改后对 LI 进行排序并再次滑动关闭下拉菜单

演示：http: [//jsfiddle.net/Ze7ej/](http://jsfiddle.net/Ze7ej/)

```
/* must delegate handler due to html change during sorting*/
$('.dropdown').on('click', 'li', function() {
    var $this = $(this),
        $parent = $this.parent(),
        $link = $parent.prev(),
        url = $parent.data('url'),
        id = $parent.data('id'),
        status = $this.text();
    $this.text($link.text());
    $link.text(status);
    $parent.slideToggle(function() {
        var list = $parent.children().get();
        list.sort(sortList);
        $parent.html($(list))
    });

    /* do ajax*/
});

function sortList(a, b) {
    return $.trim($(a).text()).localeCompare($.trim($(b).text()));
} 
```

# python - Python: use Windows API to create Unicode rendering of Japanese/Chinese text

> ID：11237385
> 
> 赞同：0
> 
> 时间：2012-06-28T02:39:23.663
> 
> 标签：python, winapi, unicode, fonts, render

I am trying to use a Python program to read a series of non-western (Japanese/Chinese) Unicode character strings from an Excel .xls file and create an image file for each string. The xlrd module gives me the Unicode strings from the Excel file, where they are properly displayed.

An answer to a [previous question](https://stackoverflow.com/questions/5750887/python-use-windows-api-to-render-text-using-a-ttf-font) provided some of the basic elements to use the Windows API in Python to render normal western text into an image file. However, if I change to the basic call to render 2 Japanese characters from a Unicode text string as:

```
f = Win32Font("MS Gothic", 24)
im = f.renderText(u'\u30bb\u30c3')
im.save("hope.png") 
```

The code fails: `UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)`

Any help in using the Windows API to properly render the Unicode strings would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:30:56.827

我花了几十个小时寻找一个 unicode ...W win32... 函数，直到 Mark Tolonen 给出答案，我立即将其实现为一个工作示例，其代码如下。如果一切顺利，您的打印机应该会输出一个字符串“汉字、にほんご、עברית、عربي我都市刷出。”。

```
# -*- coding: utf-8 -*-

import win32ui, win32con, win32gui, win32print, traceback

# init, bla bla bla
printername = win32print.GetDefaultPrinter()
hprinter = win32print.OpenPrinter(printername)
# load default settings
devmode = win32print.GetPrinter(hprinter, 8)["pDevMode"]
# this is where it gets INTERESTING:
# after the following two lines, use:
# dc for win32ui calls like LineTo, SelectObject, ...
# hdc for DrawTextW, your *MAGIC* function that supports unicode output
hdc = win32gui.CreateDC("WINSPOOL", printername, devmode)
dc = win32ui.CreateDCFromHandle(hdc)

# 1440 twips = 1 inch
dc.SetMapMode(win32con.MM_TWIPS)
# 20 twips = 1 pt
scale_factor = 20

# start the document, description as unicode
description = u'Test1'
dc.StartDoc(description)

# when working with the printer, enclose any potentially failing calls within a try block,
# because if you do not properly end the print job (see bottom), after a couple of such failures,
# you might need to restart windows as it runs out of handles or something and starts
# behaving in an unpredictable way, some documents fail to print, you cannot open windows, etc.

try :

    # Use a font
    font = win32ui.CreateFont({
        "name": "Arial Unicode MS", # a font name
        "height": int(scale_factor * 10), # 10 pt
        "weight": 400, # 400 = normal
    })

    # use dc -- SelectObject is a win32ui call
    dc.SelectObject(font)

    # this is the miracle where the unicode text gets to be printed; notice hdc,
    # not dc, for DrawTextW uses a different handle, i have found this in other posts
    win32gui.DrawTextW (hdc, u"\u6C49\u5B57\u3001\u306B\u307B\u3093\u3054\u3001\u05E2\u05D1\u05E8\u05D9\u05EA\u3001\u0639\u0631\u0628\u064A\u6211\u90FD\u4F1A\u5237\u51FA\u3002", -1, (0, -2000, 4000, -4000), win32con.DT_CENTER)

except :
    traceback.print_exc()

# must not forget to tell Windows we're done. This line must get called if StartDoc 
# was called, if you fail to do so, your sys might start behaving unexpectedly
dc.EndDoc() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:21:04.993

您需要使用 Unicode 版本的 Win32Api。快速浏览另一个问题的链接，您至少需要`win32gui.DrawTextW`而不是`win32ui.DrawText`在`Win32Font`实现中。注意 win32 **g** ui 是本机 API，而不是`win32ui`包装的 MFC API。在我快速浏览的文档中，我没有看到使用 Unicode 版本的 MFC 调用的方法`pywin32`，因此您需要从`PyCDC`using中获取本机句柄`GetSafeHdc`才能将其与本机 API 一起使用。

如果您需要更多帮助，请发布一个完整的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T18:45:11.420

```
# -*- coding: utf-8 -*-

import win32ui, win32con, win32gui, win32print, traceback

# init, bla bla bla
printername = win32print.GetDefaultPrinter()
hprinter = win32print.OpenPrinter(printername)
# load default settings
devmode = win32print.GetPrinter(hprinter, 8)["pDevMode"]
# this is where it gets INTERESTING:
# after the following two lines, use:
# dc for win32ui calls like LineTo, SelectObject, ...
# hdc for DrawTextW, your *MAGIC* function that supports unicode output
hdc = win32gui.CreateDC("WINSPOOL", printername, devmode)
dc = win32ui.CreateDCFromHandle(hdc)

# 1440 twips = 1 inch
dc.SetMapMode(win32con.MM_TWIPS)
# 20 twips = 1 pt
scale_factor = 20

# start the document, description as unicode
description = u'Test1'
dc.StartDoc(description)

# when working with the printer, enclose any potentially failing calls within a try block,
# because if you do not properly end the print job (see bottom), after a couple of such failures,
# you might need to restart windows as it runs out of handles or something and starts
# behaving in an unpredictable way, some documents fail to print, you cannot open windows, etc.

try :

    # Use a font
    font = win32ui.CreateFont({
        "name": "Arial Unicode MS", # a font name
        "height": int(scale_factor * 10), # 10 pt
        "weight": 400, # 400 = normal
    })

    # use dc -- SelectObject is a win32ui call
    dc.SelectObject(font)

    # this is the miracle where the unicode text gets to be printed; notice hdc,
    # not dc, for DrawTextW uses a different handle, i have found this in other posts
    win32gui.DrawTextW (hdc, u"\u6C49\u5B57\u3001\u306B\u307B\u3093\u3054\u3001\u05E2\u05D1\u05E8\u05D9\u05EA\u3001\u0639\u0631\u0628\u064A\u6211\u90FD\u4F1A\u5237\u51FA\u3002", -1, (0, -2000, 4000, -4000), win32con.DT_CENTER)

except :
    traceback.print_exc()

# must not forget to tell Windows we're done. This line must get called if StartDoc 
# was called, if you fail to do so, your sys might start behaving unexpectedly
dc.EndDoc() 
```

如何使用此代码打印 bmp 文件？我需要打印二维码 我有 bmp 文件 我收到此错误 - ( win32gui.DrawTextW(hdc, img, -1, (0, -2100, 4000, -4000), win32con.DT_CENTER) TypeError: Objects of type 'PilImage'无法转换为 Unicode。）

# hadoop - Is Hadoop the right tech for this?

> ID：11237390
> 
> 赞同：0
> 
> 时间：2012-06-28T02:40:34.233
> 
> 标签：hadoop, mapreduce

If I had millions of records of data, that are constantly being updated and added to every day, and I needed to comb through all of the data for records that match specific logic and then take that matching subset and insert it into a separate database would I use Hadoop and MapReduce for such a task or is there some other technology I am missing? The main reason I am looking for something other than a standard RDMS is because all of the base data is from multiple sources and not uniformly structured.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:58:48.303

Map-Reduce 是为可以并行化的算法而设计的，并且可以计算和聚合本地结果。一个典型的例子是计算文档中的单词。您可以将其拆分为多个部分，在其中计算一个节点上的一些单词，另一个节点上的一些单词等，然后将总数相加（显然这是一个微不足道的示例，但说明了问题的类型）。

Hadoop 专为处理大型数据文件（例如日志文件）而设计。默认块大小为 64MB，因此拥有数百万条小记录并不适合 Hadoop。

为了解决数据结构不统一的问题，您可以考虑使用 NoSQL 数据库，该数据库旨在处理大量 a 列为空的数据（例如 MongoDB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:42:33.010

Hadoop/MR 是为批处理而非实时处理而设计的。因此，必须考虑其他一些替代方案，如[Twitter](http://engineering.twitter.com/2011/08/storm-is-coming-more-details-and-plans.html) [Storm](http://rebelic.nl/engineering/storm-is-hadoop-of-realtime-processing/)、[HStreaming 。](http://www.hstreaming.com/)

此外，查看[Hama](http://incubator.apache.org/hama/)对数据的[实时处理](http://codingwiththomas.blogspot.in/2011/10/apache-hama-realtime-processing.html)。请注意，Hama 中的实时处理仍然很粗糙，需要做很多改进/工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T04:17:36.857

我会推荐 Storm 或 Flume。在其中任何一个中，您都可以在每条记录进入时对其进行分析并决定如何处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T07:23:21.287

如果您的数据量不是很大，并且数百万条记录听起来不是这样，我建议您尝试从 RDMBS 中获得最大收益，即使您的架构不会被正确规范化。我认为即使是结构 K1、K2、K3、Blob 也会更有用
。在 NoSQL 中，KeyValue 存储是为支持各种风格的无模式数据而构建的，但它们的查询能力是有限的。
唯一我认为有用的情况是 MongoDB/CoachDB 能够索引无模式数据。您将能够通过某些属性值获取记录。
关于 Hadoop MapReduce - 我认为它没有用，除非您想利用大量 CPU 进行处理或拥有大量数据或需要分布式排序功能。

# linux - 套接字发送并发保证

> ID：11237392
> 
> 赞同：3
> 
> 时间：2012-06-28T02:41:13.780
> 
> 标签：linux, sockets

如果我在两个进程（或两个线程）之间共享一个套接字，并且在这两个进程中我尝试发送一条阻塞的大消息（大于下划线协议缓冲区），是否可以保证两个消息都将按顺序发送？或者消息可以在内核中交错？

我主要对 TCP over IP 行为感兴趣，但如果它根据套接字的协议而有所不同会很有趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T05:27:14.637

您是在问，如果您`write()`在同一个套接字上向 A 和 B 发送消息，A 是否保证在 B 之前到达？对于 SOCK_STREAM（例如 TCP）和 SOCK_SEQPACKET（几乎从未使用过）套接字，答案是肯定的。对于互联网上的 SOCK_DGRAM（即 UDP 数据包），答案是否定的：数据包可以由网络重新排序。在单个主机上，unix 域数据报套接字将（在我知道的所有系统上）保留顺序，但我不相信任何标准都能保证这一点，而且我确信存在边缘情况。

或者等等：也许你在问两个进程写入的消息是否不会混合？是的：单个系统调用（write/writev/sendto/sendmsg）总是以原子方式将它们的内容放入文件描述符中。但显然，如果您或您的库将写入拆分为多个调用，您将失去该保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:49:17.133

对于 UDP，如果两个线程同时写入一个套接字句柄，两个消息将作为单独的数据报发送。如果数据包大于 MTU，可能会经历 IP 分段，但接收方将保留并正确重组生成的数据报。换句话说，您对 UDP 是安全的，除了与 UDP 相关的正常问题（数据报重新排序、数据包丢失等......）。

对于基于流的 TCP，我不知道。您的问题本质上是在问“如果两个线程尝试写入同一个文件句柄，该文件仍然清晰易读吗？” 我其实不知道答案。

您可以做的最简单的事情就是使用线程安全锁（互斥锁）来保护对套接字的发送/写入调用，这样只有线程才能一次写入套接字。

对于 TCP，我建议有一个专用线程来处理所有套接字 io。然后只需发明一种方法，使来自工作线程的消息可以异步排队到套接字线程以供其发送。套接字线程还可以处理 recv() 调用，并在套接字连接被远程端终止时通知其他线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T19:01:56.547

如果您尝试在超过底层缓冲区大小的 STREAM 套接字上发送大消息，则几乎可以保证您将获得短写入 - 写入或发送调用将仅写入部分数据（尽可能多适合缓冲区）然后返回写入的数量，让您对剩余的数据进行另一次写入。

如果您在多个线程或进程中执行此操作，则每次写入（或发送）都会将消息的一小部分自动写入发送缓冲区，但后续写入可能以任何顺序发生，结果是大缓冲区发送将交错。

另一方面，如果您在 DGRAM 套接字上发送消息，则整个消息将被自动发送（作为单个第 4 层数据包，它可能被协议栈的较低层分段和重新组合），或者您将收到错误（`EMSGSIZE`linux 或其他 UNIX 变体）

# c# - 在 .NET 中创建 COM 组件 - 是否可以自动注册“已实现的类别”？

> ID：11237393
> 
> 赞同：1
> 
> 时间：2012-06-28T02:41:15.513
> 
> 标签：c#, .net, com

我正在 C# 中为仅支持 ActiveX 的旧版应用程序创建自定义控件。该控件在其他应用程序中运行良好，但是旧版应用程序仅检查名为“控件”的组件类别而不是“.NET 类别”，因此它不会显示在可用控件列表中。

如果我进入 regedit 并手动将“控件”类别的 GUID 添加到已实现的类别中，如下所示 - 旧版应用程序会找到控件并将其插入没有问题。

`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\{XXXXXXX-XXXX-XXXX-XXXX-XXXXXXX}\Implemented Categories\{40FC6ED4-2438-11CF-A3DB-080036F12502}`

我想知道的是 - 在构建过程中是否有一种自动添加此类类别的方法？在部署期间，我不希望工程师必须进入注册表并添加此类别。创建注册表补丁是唯一的方法吗？

我正在使用 Visual Studio 项目来创建用于部署控件的 .msi 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:03:09.067

您可以使用[ComRegisterFunctionAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comregisterfunctionattribute%28v=vs.80%29.aspx)。它使您能够添加任意注册码。

```
using System;
using Microsoft.Win32;
using System.Runtime.InteropServices;
public class MyClassThatNeedsToRegister
{
   Guid categoryGuid = ...;

   [ComRegisterFunctionAttribute]
   public static void RegisterFunction(Type t)
   {
       RegistryKey key = Registry.ClassesRoot.CreateSubKey(
     "CLSID\\" + t.GUID.ToString("B") + 
     "\\Implemented Categories\\" + categoryGuid.ToString("B");
   }

   [ComUnregisterFunctionAttribute]
   public static void UnregisterFunction(Type t)
   {
      Registry.ClassesRoot.DeleteSubKey( "CLSID\\" + t.GUID.ToString("B") +
       "\\Implemented Categories\\" + categoryGuid.ToString("B"), false);
   }
} 
```

# jquery - Jquery Autocomplete 对 utf-8 字符区分大小写

> ID：11237394
> 
> 赞同：3
> 
> 时间：2012-06-28T02:41:24.383
> 
> 标签：jquery, utf-8, jquery-ui-autocomplete, turkish

我正在使用 jquery 自动完成插件来搜索一长串名称。它适用于所有拉丁语和英语字符，但对于土耳其语字符我有问题，因为搜索将区分大小写，例如：

`A`并将`a`匹配所有包含`A`or的城市`a`。

`İ`并且`i`不会匹配像`İstambul`和这样的城市`İzmir`

这是代码：

```
<label for="PROVINCE_AC_LEFT" class="
      PROVINCE_AC_LEFT">İl</label><input   type="text" name="PROVINCE_AC_LEFT_autocomplete_label"  id="PROVINCE_AC_LEFT_autocomplete_label" 
             value="" maxlength="" size=""/><input   type="hidden" name="PROVINCE_AC_LEFT"  id="PROVINCE_AC_LEFT" 
             value="" />
            <script>
             $(function() {

                            var tags_PROVINCE_AC_LEFT = [

               { label: "Van" , value: "6500" },

               { label: "Yozgat" , value: "6600" },

               { label: "Zonguldak" , value: "6700" },

               { label: "Aksaray" , value: "6800" },

               { label: "Bayburt" , value: "6900" },

               { label: "Karaman" , value: "7000" },

               { label: "Kırıkkale" , value: "7100" },

               { label: "Batman" , value: "7200" },

               { label: "Şırnak" , value: "7300" },

               { label: "Bartın" , value: "7400" },

               { label: "Ardahan" , value: "7500" },

               { label: "Iğdır" , value: "7600" },

               { label: "Yalova" , value: "7700" },

               { label: "Karabük" , value: "7800" },

               { label: "Kilis" , value: "7900" },

               { label: "Osmaniye" , value: "8000" },

               { label: "Düzce" , value: "8100" },

               { label: "Adana" , value: "0100" },

               { label: "Adıyaman" , value: "0200" },

               { label: "Afyonkarahisar" , value: "0300" },

               { label: "Ağrı" , value: "0400" },

               { label: "Amasya" , value: "0500" },

               { label: "Ankara" , value: "0600" },

               { label: "Antalya" , value: "0700" },

               { label: "Artvin" , value: "0800" },

               { label: "Aydın" , value: "0900" },

               { label: "Balıkesir" , value: "1000" },

               { label: "Bilecik" , value: "1100" },

               { label: "Bingöl" , value: "1200" },

               { label: "Bitlis" , value: "1300" },

               { label: "Bolu" , value: "1400" },

               { label: "Burdur" , value: "1500" },

               { label: "Bursa" , value: "1600" },

               { label: "Çanakkale" , value: "1700" },

               { label: "Çankırı" , value: "1800" },

               { label: "Çorum" , value: "1900" },

               { label: "Denizli" , value: "2000" },

               { label: "Diyarbakır" , value: "2100" },

               { label: "Edirne" , value: "2200" },

               { label: "Elazığ" , value: "2300" },

               { label: "Erzincan" , value: "2400" },

               { label: "Erzurum" , value: "2500" },

               { label: "Eskişehir" , value: "2600" },

               { label: "Gaziantep" , value: "2700" },

               { label: "Giresun" , value: "2800" },

               { label: "Gümüşhane" , value: "2900" },

               { label: "Hakkari" , value: "3000" },

               { label: "Hatay" , value: "3100" },

               { label: "Isparta" , value: "3200" },

               { label: "Mersin" , value: "3300" },

               { label: "İstanbul" , value: "3400" },

               { label: "İzmir" , value: "3500" },

               { label: "Kars" , value: "3600" },

               { label: "Kastamonu" , value: "3700" },

               { label: "Kayseri" , value: "3800" },

               { label: "Kırklareli" , value: "3900" },

               { label: "Kırşehir" , value: "4000" },

               { label: "Kocaeli" , value: "4100" },

               { label: "Konya" , value: "4200" },

               { label: "Kütahya" , value: "4300" },

               { label: "Malatya" , value: "4400" },

               { label: "Manisa" , value: "4500" },

               { label: "Kahramanmaraş" , value: "4600" },

               { label: "Mardin" , value: "4700" },

               { label: "Muğla" , value: "4800" },

               { label: "Muş" , value: "4900" },

               { label: "Nevşehir" , value: "5000" },

               { label: "Niğde" , value: "5100" },

               { label: "Ordu" , value: "5200" },

               { label: "Rize" , value: "5300" },

               { label: "Sakarya" , value: "5400" },

               { label: "Samsun" , value: "5500" },

               { label: "Siirt" , value: "5600" },

               { label: "Sinop" , value: "5700" },

               { label: "Sivas" , value: "5800" },

               { label: "Tekirdağ" , value: "5900" },

               { label: "Tokat" , value: "6000" },

               { label: "Trabzon" , value: "6100" },

               { label: "Tunceli" , value: "6200" },

               { label: "Şanlıurfa" , value: "6300" },

               { label: "Uşak" , value: "6400" },

                            ];

                            $( "#PROVINCE_AC_LEFT_autocomplete_label" ).autocomplete({
                                source: tags_PROVINCE_AC_LEFT,
                                select: function(event, ui) {
                                    var selectedObj = ui.item;
                                    $( "#PROVINCE_AC_LEFT_autocomplete_label" ).val(selectedObj.label);
                                    $( "#PROVINCE_AC_LEFT" ).val(selectedObj.value);
                                    return false;
                                },
                                focus: function( event, ui ) { $(this).val( ui.item.label ); return false; }
                            });
                        });

             </script> 
```

一个例子可以在注册问卷的第二页找到：

[http://tr.mysurvey.com/index.cfm?action=Main.join](http://tr.mysurvey.com/index.cfm?action=Main.join)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-06T14:07:58.907

在上次回复多年后，我遇到了同样的问题。

重音映射对于土耳其语来说不够好，因为它仍然将“I”与“i”匹配，反之亦然。但是，土耳其语中的小写“I”是“ı”，大写“i”是“İ”。因此，当我输入“I”时，“İzmir”不应该匹配，而当我输入“İ”时，“Iğdır”不应该匹配。

所以我使用了以下内容：

```
function toLowerTurkish(str) {
  var letters = {
    'Ç': 'ç', 'Ğ': 'ğ', 'I': 'ı', 'İ': 'i', 'Ö': 'ö', 'Ş': 'ş', 'Ü': 'ü',
  };
  str = str.replace(/(([ÇĞIİÖŞÜ]))/g, function(letter) { return letters[letter]; });
  return str.toLowerCase();
}

function containsTurkish(txt, str) {
  return toLowerTurkish(txt).indexOf(toLowerTurkish(str)) >= 0;
}

var itemList = [
  { label: 'İzmir',    value: 'İzmir' },
  { label: 'istanbul', value: 'istanbul' },
  { label: 'Iğdır', value: 'Iğdır' },
  { label: 'ısparta', value: 'ısparta' }
];

function autocompleteSourceTurkish(request, response) {
  var matchList = [];
  itemList.forEach(function(item, index) {
    if (containsTurkish(item.label, request.term)) matchList.push(item);
  });
  response(matchList);
}

$(function() {
  $('#itemMenu').autocomplete({
    source: autocompleteSourceTurkish
  });
}); 
```

[http://jsfiddle.net/emfy5gf9/](http://jsfiddle.net/emfy5gf9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:35:23.683

我建议看一下jQueryUI 示例页面上的[重音映射演示。](http://jqueryui.com/demos/autocomplete/#folding)演示中的想法是使用哈希将重音字符映射到非重音字符。我会将您的代码更改为该演示：

```
$("#PROVINCE_AC_LEFT_autocomplete_label").autocomplete({
    source: function(request, response) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
        response($.grep(tags_PROVINCE_AC_LEFT, function(value) {
            value = value.label || value.value || value;
            return matcher.test(value) || matcher.test(normalize(value));
        }));
    },
    select: function(event, ui) {
        var selectedObj = ui.item;
        $("#PROVINCE_AC_LEFT_autocomplete_label").val(selectedObj.label);
        $("#PROVINCE_AC_LEFT").val(selectedObj.value);
        return false;
    },
    focus: function(event, ui) {
        $(this).val(ui.item.label);
        return false;
    }
}); 
```

**示例：http:** [//jsfiddle.net/gZ8xz/](http://jsfiddle.net/gZ8xz/)

（我只在演示中添加了一些字符映射）

# image - MATLAB How to convert axis coordinates to pixel coordinates?

> ID：11237396
> 
> 赞同：6
> 
> 时间：2012-06-28T02:41:44.133
> 
> 标签：image, matlab, pixel, coordinate

What is the preferred way of converting from axis coordinates (e.g. those taken in by `plot` or those output in `point1` and `point2` of `houghlines`) to pixel coordinates in an image?

I see the function [axes2pix](http://www.mathworks.com/help/toolbox/images/ref/axes2pix.html) in the Mathworks documentation, but it is unclear how it works. Specifically, what is the third argument? The examples just pass in `30`, but it is unclear where this value comes from. The explanations depend on a knowledge of several other functions, which I don't know.

The related question: [Axis coordinates to pixel coordinates?](https://stackoverflow.com/q/7721255) suggests using `poly2mask`, which would work for a polygon, but how do I do the same thing for a single point, or a list of points?

That question also links to [Scripts to Convert Image to and from Graph Coordinates](http://www.mathworks.com/matlabcentral/fileexchange/29598-convert-image-to-and-from-graph-coordinates), but that code threw an exception:

```
Error using  / 
Matrix dimensions must agree. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:41:35.890

考虑以下代码。它显示了如何从轴坐标转换为图像像素坐标。

如果您使用自定义 XData/YData 位置而不是默认`1:width`和`1:height`. 在下面的示例中，我在 x/y 方向上移动了 100 和 200 像素。

```
function imageExample()
    %# RGB image
    img = imread('peppers.png');
    sz = size(img);

    %# show image
    hFig = figure();
    hAx = axes();
    image([1 sz(2)]+100, [1 sz(1)]+200, img)    %# shifted XData/YData

    %# hook-up mouse button-down event
    set(hFig, 'WindowButtonDownFcn',@mouseDown)

    function mouseDown(o,e)
        %# get current point
        p = get(hAx,'CurrentPoint');
        p = p(1,1:2);

        %# convert axes coordinates to image pixel coordinates
        %# I am also rounding to integers
        x = round( axes2pix(sz(2), [1 sz(2)], p(1)) );
        y = round( axes2pix(sz(1), [1 sz(1)], p(2)) );

        %# show (x,y) pixel in title
        title( sprintf('image pixel = (%d,%d)',x,y) )
    end
end 
```

![截屏](../Images/6bba9a2a76d1c1a67e58067053f11e55.png)

*（注意轴限制不是从 开始的`(1,1)`，因此需要`axes2pix`）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:51:52.933

可能有一种我没有听说过的内置方式，但这应该不难从头开始......

```
set(axes_handle,'units','pixels');
pos = get(axes_handle,'position');
xlim = get(axes_handle,'xlim');
ylim = get(axes_handle,'ylim'); 
```

使用这些值，您可以轻松地将坐标轴坐标转换为像素。

```
x_in_pixels = pos(1) + pos(3) * (x_in_axes-xlim(1))/(xlim(2)-xlim(1));
%# etc... 
```

以上`pos(1)`用作图中轴的 x 偏移量。如果您不关心这一点，请不要使用它。同样，如果您希望它在屏幕坐标中，请添加通过以下方式获得的位置的 x 偏移量`get(figure_handle,'position')`

# jquery-mobile - Horizontal scroll on a table in a div (HTML, jQueryMobile)?

> ID：11237400
> 
> 赞同：0
> 
> 时间：2012-06-28T02:42:16.017
> 
> 标签：jquery-mobile

I need to put a horizontal scroll on the following situation to be able to scroll photos(I use jquery mobile and need to run the program on android), any idea ? thanks

```
<div data-role="content" class="List" >
   <table>
    <tr> <td>image1</td> <td>image2</td> <td>image3</td> <td>image4</td> </tr>
   </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:25:24.327

对于滚动，你可以使用这样的东西

*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/)
*   [http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html](http://code.jquery.com/mobile/latest/demos/experiments/scrollview/scrollview-direction.html)（水平滚动）

# c++ - Win32_PhysicalMedia SerialNumber sometimes in wrong order

> ID：11237402
> 
> 赞同：6
> 
> 时间：2012-06-28T02:42:53.630
> 
> 标签：c++, wmi

Referring to [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx) i modify abit the code so i can retrieve HDD Serial Number

```
hres = pSvc->ExecQuery(
    bstr_t("WQL"),
    bstr_t("SELECT SerialNumber FROM Win32_PhysicalMedia"),
    WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, 
    NULL,
    &pEnumerator);
..
..<other code here>
..
hr = pclsObj->Get(L"SerialNumber", 0, &vtProp, 0, 0); 
```

I convert vtProp.bstrVal to std::wstring and do a reverse string, the reason i have to reverse the result from vtProp.bstrVal is because i found that some of the computer i use to retrieve serial number is in wrong order

For example: Computer 1 return serial: **W[space]-DXW1M6EC01056**, i have to do a reverse string to make it **[space]WD-WXM1E60C0165** which is correct after compare with label on the HDD

but when i test with Computer 2 return serial: **WD-WXM1E60C0165** (i use the same code, it actually return correctly when i check with the serial label on the HDD) if my code do a reverse string, it will become **W[space]-DXW1M6EC01056**

I check with both computer, it is Little-Endian, i do not know whether it has something to do with Endianness or not.

Is there anything making the return result in different order? HDD maker/brand? I run the program in Windows XP Pro for all test result.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:18:55.770

微软知道：

[http://connect.microsoft.com/VisualStudio/feedback/details/623282/win32-physicalmedia-returns-incorrect-serial-number-on-vista-or-higher-when-run-as-standard-user](http://connect.microsoft.com/VisualStudio/feedback/details/623282/win32-physicalmedia-returns-incorrect-serial-number-on-vista-or-higher-when-run-as-standard-user)

其他 Stack Overlow 用户也是如此：

[WMI Win32_PhysicalMedia SerialNumber 有时是十六进制，有时是颠倒的字节顺序](https://stackoverflow.com/questions/3903463/wmi-win32-physicalmedia-serialnumber-is-sometimes-hexadecimal-and-sometimes-in-r)

[WMI 硬盘序列号转置](https://stackoverflow.com/questions/10989338/wmi-hdd-serial-number-transposed)

# database-design - Multiple Foreign keys to a single table and single key pointing to more than one table

> ID：11237403
> 
> 赞同：3
> 
> 时间：2012-06-28T02:43:00.793
> 
> 标签：database-design, join, foreign-keys, self-join

I need some suggestions from the database design experts here.

1.  I have around six foreign keys into a single table (defect) which all point to primary key in user table. It is like:

    ```
    defect (.....,assigned_to,created_by,updated_by,closed_by...) 
    ```

    If I want to get information about the defect I can make six joins. Do we have any better way to do it?

2.  Another one is I have a `states` table which can store one of the user-defined set of values. I have defect table and task table and I want both of these tables to share the common state table (New, In Progress etc.). So I created:

    *   `task (.....,state_id,imp_id,.....)`
    *   `defect(.....,state_id,imp_id,...)`
    *   `state(state_id,state_name,...)`
    *   `importance(imp_id,imp_name,...)`

There are many such common attributes along with state like importance(normal, urgent etc), priority etc. And for all of them I want to use same table. I am keeping one flag in each of the tables to differentiate task and defect. What is the best solution in such a case?

If somebody is using this application in health domain, they would like to assign different types, states, importances for their defect or tasks. Moreover when a user selects any project I want to display all the types,states etc under configuration parameters section.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:58:13.403

> 1 ...

这本身并没有什么错。如果可能的用户“角色”是严格确定的并且不太可能改变，那么这实际上是首选的方式。您正在有效地建模 C:M 关系，其中 C 是常数。

另一方面，**如果**角色可以改变（例如，您需要能够动态地向缺陷添加新的“生命周期阶段”），那么建模真正的 M:N 关系的链接（又名联结）表可能有道理。像这样的东西：

![在此处输入图像描述](../Images/26389fdf61a6ac236f6cb27bac85f379.png)

顺便说一句，虽然 JOIN 有其成本，但这本身并不意味着您负担不起。而且您甚至*可能*并不总是需要所有的 JOIN - 只需执行能够带来您当前需要的信息的 JOIN，而将其他信息排除在外。无论如何，我建议您**测量**实际数据量以确定是否存在实际性能问题。

> 2 ...

如果公共字段很多，可以使用**继承¹**，尽量减少公共字段和外键的重复。例如：

![在此处输入图像描述](../Images/97cad5f1470991cf49ff4b5d8bd3202e.png)

在此模型中，每个“属性”表（例如`state`和`importance`）仅与 连接一次**，**`base`并通过它连接到每个“继承”表，例如`defect`和`task`。无论添加多少“继承”表，每个“属性”表仍然只有一个连接

`defects`这种模型基本上防止了“属性”FK 的扩散，代价是对和的管理更加繁琐`tasks`（因为它们现在分为“通用”和“特定”部分）。这是否比旧设计更好的平衡由您决定......

* * *

*¹阿卡。类别，子类，泛化层次结构等...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:24:13.390

对于第一个问题，在我看来，您最好将*缺陷*表分解为一个“行”表，该表存储事务的历史记录，例如创建、更新、分配等。

这样做的好处是更灵活。一个缺陷可以更容易地跟踪被更新和分配给多个人、被重新打开等的历史，并清楚地表示出多次更新。

你的*缺陷*表仍然会存储缺陷的一些通用全局状态（可能是状态、优先级等，特别是如果你不需要跟踪这些状态的变化），你会有一系列的*defect_lines*，每个都有一个指向*缺陷*的外键，另一个指向*用户*的外键，以及一个*类型*字段，指示它是“创建”、“更新”等。

例如。

```
defect ( id, priority, status )
defect_line ( defect_id, timestamp, type, user, comment ) 
```

根据您所做的假设，defect_id、timestamp 和 user 可能是 defect_line 的主键。

* * *

对于第二个问题，至少根据您提供的信息，它们似乎共享所有相同的属性 - 所以基本上是相同的东西，具有不同的类型标志（“任务”或“缺陷”），所以为什么不只是有他们在同一张桌子上？

我可能会在假设所有缺陷都可以视为任务（“要修复的事情”）的情况下调用此*任务，但所有任务都不是缺陷 - 但这现在都只是语义。*

但是，如果存在不同的非共享属性，那么您可能会遇到这样的情况，即您可以在表中拥有任务/缺陷的共享属性，以及针对每个特定属性的表，尽管它们可能仍然能够共享相同的“线”细节结构。然后，这部分成为规范化和易用性之间的决定 - 拥有两个基本具有相同属性的表可能更容易，而不是将其分解为多个表。

# heroku - Heroku - running a "ps" command via API

> ID：11237404
> 
> 赞同：2
> 
> 时间：2012-06-28T02:43:04.793
> 
> 标签：heroku

Is there a way to run command "heroku ps" via the Heroku API? I am interested in knowing how long a particular worker has been running.

For example I want to get this output: `urgent.1: up for 2h`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:16:16.883

您可以使用[Heroku 的 RESTful JSON API](https://api-docs.heroku.com/ps#GET/apps/ps)或众多 API 包装库之一：[Ruby](https://github.com/heroku/heroku.rb)、[Java](https://github.com/heroku/heroku.jar)、[Python](https://github.com/heroku/heroku.py)。社区还创建了一些其他人。

# php - getting Time and Date differences PHP

> ID：11237405
> 
> 赞同：0
> 
> 时间：2012-06-28T02:43:26.163
> 
> 标签：php

I am trying to get the differences of dates. I am a newbie, please understand. Here are some parts:

(Original Lines)

```
$BirthDate = "$month $day $year";
$dateBirth = date('F j, Y',strtotime($BirthDate)); 
```

These lines are actually working, however, I want to add more info like the hours, minutes, seconds and ante meridiem. I modified the code and here's what I did:

(Modified Lines)

```
$BirthDate = "$month $day $year $hours $minutes $seconds $ampm";
$dateBirth = date('F j, Y h:i:s a',strtotime($BirthDate)); 
```

Yes, the original lines work, the echo the correct inputted data. Problem is, when I did the Modified Lines, the output becomes:

```
January 1, 1970 08:00:00 am 
```

I can't somehow think of any solution to this. Please help. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:49:36.117

使用`\DateTime`对象及其差异方法`DateTime::dff`。程序风格将是`date_diff`.

[手动输入](http://www.php.net/manual/en/datetime.diff.php)

例子：

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:49:00.293

也许这会有所帮助

```
$birth_date = "2006-01-16"; 
$todays_date = date("Y-m-d"); 
$today = strtotime($todays_date); 
$b_date = strtotime($birth_date); 

if ($b_date > $today) { 
    $valid = "yes"; 
} else { 
    $valid = "no"; 
} 
```

# c++ - Why are all the strings I read ending up equal when I print them?

> ID：11237406
> 
> 赞同：2
> 
> 时间：2012-06-28T02:43:38.060
> 
> 标签：c++

I am learning C++ and there is a question in the book.

> Q: Write a program that defines a vector of pointers to strings. Read the vector, printing each string and its corresponding size.

Code:

```
vector<string*> v;
string str;
cout<<"Enter your string:"<<endl;

while(cin >> str)                            // input 
{
          string *ps=&str;
          v.push_back(ps);
}

vector<string*>::iterator iter=v.begin();
while( iter!=v.end())                         // output
   cout<< **iter++<<" "<<(**iter).size()<<endl; 
```

When I input "a sd fgh", I expect the output to be "a 1; sd 2; fgh 3"; but the output is "fgh 3; fgh 3; fgh 3." Anyone know where is going wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:49:26.957

你得到相同的输出，因为你所有的字符串都指向同一个地方——即你的`str`变量。您应该使用缓冲区`str`的数据创建新字符串，如下所示：

```
std::string *ps = new string(str); 
```

`delete ptr`完成此操作后，当您不再需要字符串时，不要忘记通过在函数末尾调用每个字符串指针来删除分配的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:47:30.030

我会给你一个线索：`std::string *ps = &str`这是一个非常糟糕的主意。每个指针都需要自己的内存。

# sorting - 在 ColdFusion 中按长度对字符串数组进行排序？

> ID：11237413
> 
> 赞同：1
> 
> 时间：2012-06-28T02:44:15.193
> 
> 标签：sorting, coldfusion

您将如何在 ColdFusion 中按长度对字符串数组进行排序？

在 PHP 中，可以使用`usort`如下所示：[PHP: Sort an array by the length of its values?](https://stackoverflow.com/questions/838227/php-sort-an-array-by-the-length-of-its-values)

CF10 中是否`ArraySort()`支持传入比较器函数`usort`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T06:31:12.107

我想这不会是最灵活甚至最有效的解决方案，但我对使用内置 CFML 排序的最短版本感兴趣......没有评论它只有 13 行代码:)

```
source = ["bb", "a", "ffff", "ccc", "dd", 22, 0];
lengths = {};
result = [];

// cache lengths of the values with index as key
for (i=1; i LTE ArrayLen(source); i++) {
    lengths[i] = Len(source[i]);
}

// sort the values using 'numeric' type
sorted = StructSort(lengths, "numeric", "asc");

// populate results using sorted cache indexes
for (v in sorted) {
    ArrayAppend(result, source[v]);
} 
```

结果是`["a",0,"bb",22,"dd","ccc","ffff"]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-17T12:27:39.370

上面的答案有错误，这里是使用arraysort按字符串长度排序的正确方法：

```
<cfscript>
data = [ "bb", "a", "dddd", "ccc" ];

arraySort( data, function( a, b ) {
    return len(a) - len(b);
});
</cfscript> 
```

此函数的比较器应返回一个数字`< 0`（小于）、`0`（等于）或`> 0`（大于），而不是布尔值。另请参阅[arraySort 文档](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-a-b/arraysort.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T03:55:06.373

您可以将快速排序算法与您自己的自定义比较器一起使用，类似于 Java 比较器的工作方式。

您可以在此处找到 quickSort UDF：http: [//cflib.org/udf/quickSort](http://cflib.org/udf/quickSort)。

您需要定义自己的比较器来告诉函数它应该如何进行排序。下面是一个工作示例。请注意，您需要在页面中*包含*UDF，以便快速排序功能可用。

```
 strings = ["bb", "a", "ccc"];

  WriteOutput(ArrayToList(quickSort(strings, descStringLenCompare)));
  //outputs a,bb,ccc

  WriteOutput(ArrayToList(quickSort(strings, ascStringLenCompare)));
  //outputs ccc,bb,a

  //Ascending comparator
  Numeric function ascStringLenCompare(required String s1, required String s2)
  {
    if (Len(s1) < Len(s2)){
      return -1;
    }else if (Len(s1) > Len(s2)) {
      return 1;
    }else{
      return 0;
    }
  }

  //Descending comparator
  Numeric function descStringLenCompare(required String s1, required String s2)
  {
    if (Len(s1) < Len(s2)){
      return 1;
    }else if (Len(s1) > Len(s2)) {
      return -1;
    } else {
      return 0;
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T10:32:05.437

在 Coldfusion 10 或 Railo 4 中，您可以使用[Underscore.cfc 库](http://russplaysguitar.github.com/UnderscoreCF/)以优雅而简单的方式编写此代码：

```
_ = new Underscore(); // instantiate the library

// define an array of strings
arrayOfStrings = ['ccc', 'a', 'dddd', 'bb'];

// perform sort
sortedArray = _.sortBy(arrayOfStrings, function (string) {
   return len(string);
});

// sortedArray: ['a','bb','ccc','dddd'] 
```

为数组中的每个值调用迭代器函数，并将该值作为第一个参数传入。该函数应返回您希望排序的值。在这种情况下，我们返回 len(string)。_.sortBy 总是按升序排序。

（免责声明：我写了 Underscore.cfc）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T03:13:39.007

在 CF10 中，您确实可以使用带有 ArraySort() 的闭包。

例如1。仅按长度排序。

```
<cfscript>
data = [ "bb", "a", "dddd", "ccc" ];

arraySort( data, function( a, b ) {
    return len(a) < len(b);
});
</cfscript> 
```

数据 ==`[ "a", "bb", "ccc", "dddd" ]`

例2。长度相同时按长度和字母顺序排序。

```
<cfscript>
data = [ "b", "a", "dddd", "ccc" ];

arraySort( data, function( a, b ) {
    return len(a) == len(b) ? compare( a, b ) : ( len(a) > len(b) );
});
</cfscript> 
```

数据 ==`[ "a", "b", "ccc", "dddd" ]`

例 3。同样，只是颠倒顺序。

```
<cfscript>
data = [ "b", "a", "dddd", "ccc" ];

arraySort( data, function( a, b ) {
    return len(a) == len(b) ? compare( b, a ) : ( len(a) < len(b) );
});
</cfscript> 
```

数据 ==`[ "dddd", "ccc", "b", "a" ]`

# c# - 将渲染从 RenderTarget2D 存储到颜色数组错误

> ID：11237416
> 
> 赞同：0
> 
> 时间：2012-06-28T02:44:50.313
> 
> 标签：c#, xna, render, rendertarget

所以我试图将渲染目标的结果存储到一个颜色数组中，这样我就可以使用迭代器单独操作它们。出于某种原因，以下代码将数组中的每个值设置为 R=0、G=0、B=0、A=0。好像它从未初始化过一样。GetData 方法是否使用不当？是别的吗？它应该是一个非常彩色的图像，并且绝对不透明。

问题不在于纹理没有正确绘制，我在没有设置渲染目标的情况下执行了代码（使用默认的后缓冲区）并且游戏运行得非常好。

```
 //Creating a new render target and setting it
        RenderTarget2D unprocessed = new RenderTarget2D(graphics.GraphicsDevice, Window.ClientBounds.Width, Window.ClientBounds.Height,false,SurfaceFormat.Color,DepthFormat.Depth24,4,RenderTargetUsage.PreserveContents);
        graphics.GraphicsDevice.SetRenderTarget(unprocessed);

        //Drawing background and main player
        spriteBatch.Draw(bgTex,new Rectangle(0,0,Window.ClientBounds.Width,Window.ClientBounds.Height),Color.White);
        mainPlayer.Draw(spriteBatch);

        //resetting render target
        graphics.GraphicsDevice.SetRenderTarget(null);

        //creating array of Color to copy render to
        Color[] baseImage = new Color[Window.ClientBounds.Width * Window.ClientBounds.Height];
        //I pause the program here and baseImage is an array of black transparent colors
        unprocessed.GetData<Color>(baseImage);

        spriteBatch.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:59:00.800

问题解决了。基本上它是黑色的原因是因为 spritebatch 需要在渲染目标“获取”数据之前首先结束。这就是为什么在 spritebatch 过程中颜色值仍然是黑色的原因。我所做的解决方法是在绘图发生之前和之后使 spritebatch 开始和结束，并立即解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:59:35.793

我相信有几个问题。第一个是您需要在访问渲染目标之前调用 spriteBatch.End() 。我也刚刚注意到没有调用 spriteBatch.Begin()。

```
RenderTarget2D unprocessed = new RenderTarget2D( /*...*/);
graphics.GraphicsDevice.SetRenderTarget(unprocessed);
graphics.GraphicsDevice.Clear(Color.Black);

//Drawing
spriteBatch.Begin();
spriteBatch.Draw(/*...*/);
spriteBatch.End();

//Getting
graphics.GraphicsDevice.SetRenderTarget(null); 
```

你只是回答了你自己的问题，所以......那没关系。

# jquery - 如何同时执行几个jquery animate

> ID：11237418
> 
> 赞同：2
> 
> 时间：2012-06-28T02:44:56.197
> 
> 标签：jquery, animation, queue

假设我有两个自定义的 animate 函数，由 origin jquery animate 函数组成：一个是摇动函数，从左到右摇动并无限循环返回：

```
var leftright = function (el) {
                var duration = 800;
                var interval = duration * 4;
                var shake = function () {
                    el.animate({'left': '-=15'  }, duration)
                        .animate({'left': '+=15'  }, duration)
                        .animate({'left': '+=15'  }, duration)
                        .animate({'left': '-=15'  }, duration)
                }

                shake();
                setInterval(function () {
                    shake();
                }, interval)
            } 
```

然后我一直为flash定义了一个flash动画函数：

```
 var flash = function (el) {
        var duration = 300;
        var interval = duration * 2;
        var f = function () {
            el.animate({'opacity': 0}, duration)
                .animate({'opacity': 1}, duration)                    
        }
        f();
        setInterval(function () {
            f();
        }, interval)
    } 
```

我希望元素同时执行两个动画，所以我使用队列：

```
 var que = $({});
            que.queue('leftright', function () {
                leftright($('#el'));    
            }).dequeue('leftright');

            que.queue('flash', function () {
                flash($('#el'));    
            }).dequeue('flash'); 
```

但他们仍然先执行摇动，然后执行闪光

我怎样才能同时执行它们？

这是演示：http: [//jsfiddle.net/hh54188/SykMu/](http://jsfiddle.net/hh54188/SykMu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:35:20.243

可能是... [http://jsfiddle.net/u7bgs](http://jsfiddle.net/u7bgs)

而不是这个js：

```
var que = $({});
que.queue('leftright', function () {
   leftright($('#el'));    
}).dequeue('leftright');

que.queue('flash', function () {
   flash($('#el'));    
}).dequeue('flash'); 
```

试试看：

```
$('#parent').wrap("<div class='wrapper'></div>");
leftright($('.wrapper:has(#parent)'));

flash($('#parent')); 
```

# javascript - 如何通过 Ajax 发送 HTML 和 Javascript

> ID：11237419
> 
> 赞同：1
> 
> 时间：2012-06-28T02:45:00.337
> 
> 标签：javascript, jquery, ajax

我想使用 AJAX 调用从同一页面检索 HTML 和 Javascript。但是，我不确定最好、最干净、最安全的方法是什么。我希望我的 Javascript 编辑客户端上已定义的对象。到目前为止，我的想法是：

在某些事件上执行的客户端脚本：

```
getMoreStuff = function () {
  $.ajax({
    url: '/someRoute',
    success: function (data) {
      $data = $(data);
      $things = $data.find('#things');
      $('#content').append($things);
      // Execute the script
    }
  })
} 
```

AJAX 请求的正文：

```
<div id="things">
  <div class="post">...</div>
  <div class="post">...</div>
  <div class="post">...</div>
  <div class="post">...</div>
  <div class="post">...</div>
</div>
<script>
  (function() {
    window.things || (window.things = []);
    things.concat([...some array...]);
  })();
</script> 
```

我不确定我的 jQuery 代码是否在我定义`$data`. 还是应该将脚本作为字符串发送并使用 eval？

这行得通吗？

```
$(document.body).append($data.find('script')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:56:30.460

[在此处](http://api.jquery.com/jQuery.ajax/)查看数据类型

> “html”：以纯文本形式返回 HTML；包含的脚本标签在插入 DOM 时进行评估。

# operating-system - 错误系统调用：功能未实现

> ID：11237420
> 
> 赞同：3
> 
> 时间：2012-06-28T02:45:15.893
> 
> 标签：operating-system, linux-kernel, kernel

我正在尝试向 linux 内核添加新的（虚拟）系统调用。

1）我在 linux-source/kernel/myfile.c 下添加了系统调用代码，并相应地更新了 Makefile。

2) 更新了 syscall.h、unistd.h 和 entry.S 文件以反映新的系统调用 (pedagogictime(int flag,struct timeval *time))

然后编译内核并安装并重新启动映像。

当我运行:`cat /proc/kallsyms | grep "pedag"`时，这是我得到的输出

0000000000000000 T sys_pedagogictime 0000000000000000 d event_exit__pedagogictime 0000000000000000 d event_enter__pedagogictime 0000000000000000 d __syscall_meta_ *pedagogictime 0000000000000000 d types* _pedagogictime 0000000000000000 d args__pedagogictime 0000000000000000 t trace_init_flags_enter__pedagogictime 0000000000000000 t trace_init_flags_exit__pedagogictime 0000000000000000 t __event_exit__pedagogictime 0000000000000000 t __event_enter__pedagogictime 0000000000000000 t __p_syscall_meta__pedagogictime 0000000000000000 t __initcall_trace_init_flags_exit__pedagogictimeearly 0000000000000000 t __initcall_trace_init_flags_enter__pedagogictimeearly

这意味着系统调用已正确注册。

在我的用户空间程序中，我正在写：

```
#define __NR_pedagogictime 1326 //1326 is my system call number
struct timeval *now = (struct timeval *)malloc(sizeof(struct timeval));

    long ret = syscall(__NR_pedagogictime,0,now);
    if(ret)
            perror("syscall "); 
```

但我得到了错误：

“系统调用：功能未实现”

我真的很感激对此的任何帮助。谢谢。

编辑：

顺便说一句， syscall() 的汇编代码如下所示（如果有帮助的话）：

```
 movl    $6, %esi
    movl    $1326, %edi
    movl    $0, %eax
    call    syscall
    cltq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T05:35:25.727

您选择了错误的系统调用号。看看内核如何在[此处](http://lxr.free-electrons.com/source/arch/x86/kernel/entry_32.S?v=2.6.38#L496)检查系统调用数限制。例如（x86、32 位）：

```
496 ENTRY(system_call)
497         RING0_INT_FRAME                 # can't unwind into user space anyway
498         pushl_cfi %eax                  # save orig_eax
499         SAVE_ALL
500         GET_THREAD_INFO(%ebp)
501                                         # system call tracing in operation / emulation
502         testl $_TIF_WORK_SYSCALL_ENTRY,TI_flags(%ebp)
503         jnz syscall_trace_entry
504         cmpl $(nr_syscalls), %eax
505         jae syscall_badsys
506 syscall_call:
507         call *sys_call_table(,%eax,4)
508         movl %eax,PT_EAX(%esp)          # store the return value 
```

因此，您可以看到此代码比较了`%eax`(syscall number) 和`nr_syscalls`(sys_call_table size)。高于或等于导致`syscall_badsys`。

您还需要修改[arch/x86/include/asm/unistd_32.h](http://lxr.free-electrons.com/source/arch/x86/include/asm/unistd_32.h?v=2.6.38)标头。

# semaphore - 如何在 reader writer 解决方案中导致 writer 优先级失败？

> ID：11237422
> 
> 赞同：1
> 
> 时间：2012-06-28T02:45:40.497
> 
> 标签：semaphore, writers

我有兴趣在读者/作者信号量解决方案中导致失败，作者优先。

在以下代码中，取自 Wikipedia：

```
 READER
      P(mutex_3);
        P(r);
          P(mutex_1);
            readcount := readcount + 1;
            if readcount = 1 then P(w);
          V(mutex_1);
        V(r);
      V(mutex_3);

      reading is performed

      P(mutex_1);
        readcount := readcount - 1;
        if readcount = 0 then V(w);
      V(mutex_1); 
```

...有一个二进制信号量`mutex_3`，它限制了试图访问`r`信号量的线程数，以便编写器具有优先权。

我试图删除那个互斥锁，以为作家会饿死，但没有成功。我用 Java 编写了一个程序，其中线程等待固定的时间两次：在读/写之后和期间。我创建了一个写入进程和 8 个读取进程，并将等待时间设置为 1 毫秒。我尝试创造一种情况，其中`r`信号量不断受到一位作家和许多读者的攻击。这些都没有导致我预期的失败。

难道我做错了什么？我怎样才能导致作家挨饿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:18:38.960

在这个问题中 - 来自[维基百科](http://en.wikipedia.org/wiki/Readers-writers_problem#cite_note-0)-

```
int readcount, writecount; (initial value = 0)
semaphore mutex_1, mutex_2, mutex_3, w, r ; (initial value = 1)

READER
  P(mutex_3);
    P(r);
      P(mutex_1);
        readcount := readcount + 1;
        if readcount = 1 then P(w);
      V(mutex_1);
    V(r);
  V(mutex_3);

  reading is performed

  P(mutex_1);
    readcount := readcount - 1;
    if readcount = 0 then V(w);
  V(mutex_1);

WRITER
  P(mutex_2);
    writecount := writecount + 1;
    if writecount = 1 then P(r);
  V(mutex_2);

  P(w);
    writing is performed
  V(w);

  P(mutex_2);
    writecount := writecount - 1;
    if writecount = 0 then V(r);
  V(mutex_2); 
```

在实践中很难让读者饿死，但从理论上讲，他们可以。

问题是 Writers 优先于 Readers，所以如果你一直有 Writers 来，那么 Readers 将永远等待执行。

希望能帮助到你！

# java - 始终收到 MQJE001：完成代码“2”，原因“2059”。错误

> ID：11237425
> 
> 赞同：3
> 
> 时间：2012-06-28T02:46:13.443
> 
> 标签：java, ibm-mq, websphere-7

我是 Web Sphere MQ 的新手。

我在 AIX 中创建了队列管理器、通道和侦听器，如下所示：

```
crtmqm MY_Q_MGR

strmqm MY_Q_MGR

runmqsc

DEFINE LISTENER(MY_QM_LISTENER) TRPTYPE(TCP) PORT(5030)

DEFINE CHANNEL(MY_QM_CHANNEL) CHLTYPE(SDR) CONNAME('10.128.1.51(5030)') XMITQ('MY_Q_MGR') DISCINT(0) 
```

然后我检查了 QMGR 是否正在运行。我在 proc 中看到了侦听器。

然后，我尝试如下从java创建MQQueueManager，我得到了`MQJE001: Completion Code '2', Reason '2059'.`

```
import com.ibm.mq.MQException;
import com.ibm.mq.MQGetMessageOptions;
import com.ibm.mq.MQMessage;
import com.ibm.mq.MQPutMessageOptions;
import com.ibm.mq.MQQueue;
import com.ibm.mq.MQQueueManager;
import com.ibm.mq.constants.MQConstants;
import com.ibm.mq.MQEnvironment;

public class MQSample {

  // code identifier
  static final String sccsid = "@(#) samples/wmqjava/MQSample.java, jmscc.samples, k700, k700-L080529 1.4.1.1 08/06/01 09:37:53";

    // define the name of the QueueManager
     private static final String qManager = "MY_Q_MGR";

  // and define the name of the Queue
  private static final String qName = "SYSTEM.DEFAULT.LOCAL.QUEUE";

  /**
   * Main entry point
   * 
   * @param args - command line arguments (ignored)
   */
  public static void main(String args[]) {
    try {
        MQEnvironment.hostname = "MY IP ADDRESS";
        MQEnvironment.channel = "MY_QM_CHANNEL";
        MQEnvironment.port = 5030;

      // Create a connection to the QueueManager
      System.out.println("Connecting to queue manager: " + qManager);
      System.out.println("Connecting to queue manager is finished: " + qManager);
      // Set up the options on the queue we wish to open
      int openOptions = MQConstants.MQOO_INPUT_AS_Q_DEF | MQConstants.MQOO_OUTPUT;

      // Now specify the queue that we wish to open and the open options
      System.out.println("Accessing queue: " + qName);
      MQQueue queue = qMgr.accessQueue(qName, openOptions);
      MQQueueManager qMgr = new MQQueueManager(qManager); // here i got error
      System.out.println("Connecting to queue manager is finished: " + qManager);
      // Set up the options on the queue we wish to open
      int openOptions = MQConstants.MQOO_INPUT_AS_Q_DEF | MQConstants.MQOO_OUTPUT;

      // Now specify the queue that we wish to open and the open options
      System.out.println("Accessing queue: " + qName);
      MQQueue queue = qMgr.accessQueue(qName, openOptions); 
```

我被困在这里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T03:53:35.887

您需要一个服务器连接 ( `SVRCONN`) 类型的通道，而不是`SDR`类型。客户端应用程序需要`SVRCONN`类型通道才能连接到队列管理器，其中`SDR`类型通道用于两个队列管理器之间的通信。

创建队列管理器时，会创建默认的 SVRCONN 通道`SYSTEM.DEF.SVRCONN`。您可以将其用于您的测试。但在生产中，建议您创建自己的频道，不要使用任何预定义的频道。

请参阅此[链接](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=/com.ibm.mq.amqtac.doc/wq11160_.htm)了解您需要做什么的完整详细信息。这来自 WebSphere MQ 快速入门书。

# erlang - 在 Erlang 中扩展 gen_event 行为

> ID：11237427
> 
> 赞同：1
> 
> 时间：2012-06-28T02:46:42.013
> 
> 标签：erlang, gen-event

我正在编写一个事件管理器，它将采用许多不同的事件处理程序。该事件管理器将收到许多不同事件的通知。每个处理程序只处理某些事件，而忽略其余的。每个处理程序还可以根据情况触发某些其他事件。

例如，第一个处理程序来处理`Event1`

```
-module (first_handler).
-behavior (gen_event).

...

handle_event(Event1, State) -> {ok, State};
handle_event(_, State) -> {ok, State}. 
```

第二个处理程序来处理`Event2`

```
-module (second_handler).
-behavior (gen_event).

...

handle_event(Event2, State) -> 
  gen_event:notify(self(), Event1),
  {ok, State};
handle_event(_, State) -> {ok, State}. 
```

事件触发可以通过在处理程序中调用来完成`gen_event:notify(self(), NewEvent)`，`handle_event`但我宁愿将其抽象出来并将其导出，以便可以从事件管理器中调用它。

由于模式匹配和忽略事件以及触发事件对所有处理程序都是通用的，所以无论如何我可以扩展`gen_event`行为以将它们作为内置提供吗？

我将从创建自定义行为的默认方式开始：

```
-module (gen_new_event).
-behaviour (gen_event).

behaviour_info(Type) -> gen_event:behaviour_info(Type). 
```

我不确定下一步该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:23:03.723

你到底想做什么？从您提供的示例中我无法理解。在 second_handler 中`handle_event/2`，`Event1`未绑定。另外，使用`self()`有效吗？那不应该是经理的注册名。不确定是`handle_event/2`由管理器还是每个处理程序进程执行（但后者更有意义）。

通过实现您的`gen_new_event`模块，您正在实现一个处理程序（即回调模块），而不是一个事件管理器。您拥有的事实`-behaviour(gen_event)`意味着您要求编译器检查是否`gen_new_event`实际实现了 列出的所有函数`gen_event:behaviour_info(callbacks)`，从而制作`gen_new_event`了一个合格的处理程序，您*可以*通过它添加到事件管理器中`gen_event:add_handler(manager_registered_name, gen_new_event, [])`。

现在，如果你带走`-behaviour (gen_event)`，`gen_new_event`不再需要实现以下功能：

```
35> gen_event:behaviour_info(callbacks).   
[{init,1},
 {handle_event,2},
 {handle_call,2},
 {handle_info,2},
 {terminate,2},
 {code_change,3}] 
```

您可以`gen_new_event`通过添加更多功能来实现行为（即接口），您将需要任何`-behaviour(gen_new_event)`用于实现的模块：

```
-module (gen_new_event).
-export([behaviour_info/1]).

behaviour_info(callbacks) -> 
    [{some_fun, 2}, {some_other_fun, 3} | gen_event:behaviour_info(callbacks)]. 
```

现在，如果在某个模块中，例如`-module(example)`，您添加属性`-behaviour(gen_new_event)`，那么该模块`example`将必须实现所有`gen_event`回调函数 +`some_fun/2`和`some_other_fun/3`。

我怀疑这就是您要寻找的东西，但是您的最后一个示例似乎表明您想要实现一种行为。请注意，您通过实现一个行为所做的只是要求其他模块在它们使用时实现某些功能`-behaviour(your_behaviour)`。

（另外，如果我理解正确，如果你想扩展，`gen_event`那么你总是可以简单地复制代码`gen_event.erl`并扩展它......我猜，但这对于你想要做的事情真的有必要吗？）。

**编辑**

目标：从 gen_event 实现中提取通用代码。因此，例如，您希望在每个 gen_events 中都有一个 handle_event/2 子句。

一种解决方法：您可以使用参数化模块。该模块将实现 gen_event 行为，但仅实现所有 gen_event 回调模块应具有的常见行为。任何不“常见”的东西都可以委托给模块的参数（您可以将其绑定到包含 gen_event 回调的“自定义”实现的模块名称。

例如

```
-module(abstract_gen_event, [SpecificGenEvent]).
-behaviour(gen_event).
-export(... all gen_event functions).

....

handle_event({info, Info}, State) ->
    %% Do something which you want all your gen_events to do.
handle_event(Event, State) ->
    %% Ok, now let the particular gen_event take over:
    SpecificGenEvent:handle_event(Event, State).

%% Same sort of thing for other callback functions
.... 
```

然后，您将实现一个或多个 gen_event 模块，您将插入到 abstract_gen_event 中。可以说其中之一是a_gen_event。

然后你应该能够做到：

```
AGenEvent = abstract_gen_event:new(a_gen_event). %% Note: the function new/x is auto-generated and will have arity according to how many parameters a parameterized module has. 
```

然后，我想您可以将 AGenEvent 传递给 gen_event:add_handler(some_ref, AGenEvent, []) 它应该可以工作，但请注意我从未尝试过。

也许您也可以使用宏来解决这个问题，或者（但这有点矫枉过正）在编译时使用 parse_transform/2 进行一些操作。不过只是一个想法。看看这个参数化的解决方案是如何先行的。

**第二次编辑**

（注意：不确定我是否应该删除本节之前的所有内容。请告诉我，或者如果您知道自己在做什么，请直接删除）。

好的，所以我自己尝试了一下，是的，参数化模块的返回值在将其提供给 gen_event:add_handler/3 的第二个参数时会崩溃......太糟糕了:(

除了 a) 使用宏 b) 使用 parse_transform/2 之外，我想不出任何其他方法来解决这个问题。

一种）

```
-module(ge).
-behaviour(gen_event).

-define(handle_event, 
handle_event({info, Info}, State) ->
    io:format("Info: ~p~n", [Info]),
    {ok, State}).

?handle_event;
handle_event(Event, State) ->
    io:format("got event: ~p~n", [Event]),
    {ok, State}. 
```

因此，基本上，您将在头文件中包含宏定义中定义的通用功能的所有回调函数子句，该头文件包含在使用此通用功能的每个 gen_event 中。然后你？X 在每个使用通用功能的回调函数之前/之后......我知道它不是那么干净，我通常厌倦自己使用宏但是嘿......如果问题真的让你烦恼，那是一种方法去做吧。

b) 谷歌搜索有关在 Erlang 中使用 parse_transform/2 的一些信息。您可以实现一个 parse_transform，它在您的 gen_event 模块中查找回调函数，这些模块*具有*回调的特定情况，但*没有*通用情况（即上述宏中的 ({info, Info}, State) 之类的子句）。然后，您只需添加构成通用案例的表格。

我建议做这样的事情（添加导出）：

```
-module(tmp).
 parse_transform(Forms, Options) ->
     io:format("~p~n", [Forms]),
     Forms.

-module(generic).
gen(Event, State) ->
    io:format("Event is: ~p~n", [Event]),
    {ok, State}. 
```

现在你可以编译：

```
c(tmp).
c(generic, {parse_transform, tmp}).
[{attribute,1,file,{"../src/generic.erl",1}},
 {attribute,4,module,generic},
 {attribute,14,compile,export_all},
 {function,19,gen,2,
       [{clause,19,
                [{var,19,'Event'},{var,19,'State'}],
                [],
                [{call,20,
                       {remote,20,{atom,20,io},{atom,20,format}},
                       [{string,20,"Event is: ~p~n"},
                        {cons,20,{var,20,'Event'},{nil,20}}]},
                 {tuple,21,[{atom,21,ok},{var,21,'State'}]}]}]},
 {eof,28}]
 {ok,generic} 
```

这样您就可以复制粘贴您将要注入的表单。您可以将它们复制到适当的 parse_transform/2 中，而不仅仅是打印，它实际上会遍历您的源代码并将您想要的代码注入到您想要的位置。

作为旁注，您可以将属性包含`-compile({parse_transform, tmp})`到您的每个 gen_event 模块中，这些模块需要以这种方式进行 parse_transformed 以添加通用功能（即，避免自己将其传递给编译器）。只需确保`tmp`在路径上的目录中加载或编译包含您的 parse_transform 的任何模块。

b) 我知道的工作似乎很多......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T12:12:42.593

您安装的处理程序已经在您启动然后安装处理程序的*事件管理器的上下文中运行。*因此，如果他们的句柄事件函数抛出数据，他们已经做了你想要的。

您不需要扩展事件行为。你要做的是：

```
 handle_event(Event, State) ->
   generic:handle_event(Event, State). 
```

然后让`generic`模块处理通用部分。请注意，如果需要，您可以提供`generic`一种方法来回调此处理程序模块以实现专门的处理程序行为。例如：

```
 generic:handle_event(fun ?MODULE:callback/2, Event, State)... 
```

等等。

# mysql - MySQL：是否可以 group_concat 多行？

> ID：11237428
> 
> 赞同：7
> 
> 时间：2012-06-28T02:47:07.893
> 
> 标签：mysql

这就是我想要的：

```
attribute_name  attribute_id    attribute_value
--------------------------------------------------------------------
Appliances      16, 17, 18, 19  Washer, Dryer, Dishwasher, Microwave
Consoles        7, 3            PS3, XBox 
```

这与我所拥有的很接近：

```
attribute_name  attribute_id   attribute_value
-------------------------------------------------
Appliances      16             Washer
Appliances      17             Dryer
Appliances      18             Dishwasher
Appliances      19             Microwave
Consoles        7              PS3
Consoles        3              XBox 
```

...从这个查询：

```
 SELECT     a.name AS attribute_name,

             av.attribute_value_id, av.value AS attribute_value

  FROM       attribute_value av

  INNER JOIN attribute a

               ON av.attribute_id = a.attribute_id

  WHERE      av.attribute_value_id IN

               (SELECT attribute_value_id

                FROM   property_attribute

                WHERE  property_id = 1)

  ORDER BY   a.name; 
```

我对 GROUP_CONCAT 没有成功。我什至不知道我想要什么是可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T02:52:10.367

您现有的查询将返回生成连接列所需的所有内容。如果将现有查询包装在子查询中，则可以`GROUP_CONCAT()`同时使用列和`GROUP BY attribute_name`：

```
SELECT 
  attribute_name,
  GROUP_CONCAT(attribute_value_id) AS attribute_value_ids,
  GROUP_CONCAT(attribute_value) AS attribute_values
FROM (
  /* Wrap the body of your existing query in a subselect */
  SELECT 
    a.name AS attribute_name,
    av.attribute_value_id,
    av.value AS attribute_value
  FROM  
    attribute_value av
    INNER JOIN attribute a
         ON av.attribute_id = a.attribute_id
  WHERE      
    av.attribute_value_id IN
               (SELECT attribute_value_id
                FROM   property_attribute
                WHERE  property_id = 1)
) attr_groups
GROUP BY attribute_name
ORDER BY attribute_name; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T02:54:01.180

```
SELECT group_concat(a.name, av.attribute_value_id, av.value) 
```

# c# - 从文本框插入数据到 Postgres SQL

> ID：11237431
> 
> 赞同：5
> 
> 时间：2012-06-28T02:47:49.800
> 
> 标签：c#, .net, postgresql, npgsql

我只是学习如何连接 C# 和 PostgresSQL。我想将数据从 tb1（文本框）和 tb2 插入数据库。但我不知道如何编码我以前的代码是从数据库中选择。这是我的代码

```
private void button1_Click(object sender, EventArgs e)
    {
        bool blnfound = false;
        NpgsqlConnection conn = new NpgsqlConnection("Server=127.0.0.1;Port=5432;User Id=postgres;Password=admin123;Database=Login");
        conn.Open();
        NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM login WHERE name='" + tb1.Text + "' and password = '" + tb2.Text + "'",conn);
        NpgsqlDataReader dr = cmd.ExecuteReader();

        if (dr.Read())
        {
            blnfound = true;
            Form2 f5 = new Form2();
            f5.Show();
            this.Hide();
        }

        if (blnfound == false)
        {
            MessageBox.Show("Name or password is incorrect", "Message Box", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);
            dr.Close();
            conn.Close();
        }
    } 
```

所以请帮我写代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T03:04:39.520

首先，您需要使用该`ExecuteNonQuery`方法，而不是`ExecuteReader`因为您正在执行一个`INSERT`而不是一个`SELECT`语句。所以，像：

```
NpgsqlCommand cmd = new NpgsqlCommand("insert into table1 values(1, 1)", conn);
cmd.ExecuteNonQuery(); 
```

如果这对您很重要，该`ExecuteNonQuery`方法还将返回受影响的行数。

其次，您需要使用 SQL 参数而不是构建不安全的 SQL 字符串。

利用：

```
cmd.Parameters.Add(new NpgsqlParameter("name", tb1.Text));
cmd.Parameters.Add(new NpgsqlParameter("pw", tb2.Text)); 
```

向查询中添加参数。您现在可以在 INSERT 语句中使用`:name`or来引用它`:pw`，例如：

```
NpgsqlCommand cmd = new NpgsqlCommand("insert into login (Name, Password) values(:name, :pw)", conn);
cmd.ExecuteNonQuery(); 
```

最后，您可能对使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)而不是执行原始 SQL 语句感兴趣。我会检查基于[NHibernate](http://nhforge.org/Default.aspx)构建的[.NET Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)或[Castle Active Record](http://www.castleproject.org/)。这些库将允许您在数据库中查询、更新、创建和删除数据，而无需编写所涉及的实际 SQL 语句。这是一个很好的开始方式，并且会简单地编写你的代码！

# asp.net-mvc-3 - 如何在 asp.net mvc 3 中实现自定义授权？

> ID：11237438
> 
> 赞同：1
> 
> 时间：2012-06-28T02:49:08.083
> 
> 标签：asp.net-mvc-3, sql-server-2008, action-filter

寻找带有 sql server 2008 的 asp.net mvc 3 应用程序的自定义授权解决方案。我不想使用`ASPNETDB.mdf`它。

目前我正在尝试使用 customactionfilter 但我不知道如何在这里返回布尔值。有没有人有类似场景的好样本？

```
public class CustAuthFilterAttribute : ActionFilterAttribute, IActionFilter
{

public string Roles {get;set;}
public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
           //return true/false based on Role the user has
            base.OnActionExecuting(filterContext);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:56:30.537

如果要实现自定义授权，则应该从[AuthorizeAttribute派生。](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

[这个](https://stackoverflow.com/a/717312/291687)答案为您提供了一个如何使用它的简短示例。

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        // check context and roles

        ...

        return true;
    }
} 
```

# mysql - Windows 上的 CPU 使用率 PostgreSQL 与 MySQL

> ID：11237444
> 
> 赞同：1
> 
> 时间：2012-06-28T02:50:06.537
> 
> 标签：mysql, postgresql

目前我有这台服务器

```
processor   : 3
vendor_id   : GenuineIntel
cpu family  : 15
model       : 2
model name  : Intel(R) Xeon(TM) CPU 2.40GHz
stepping    : 9
cpu MHz     : 2392.149
cache size  : 512 KB 
```

我的应用程序每秒处理 200-300 个事务，导致 MySQL 96% 的 CPU 使用率更高。任何人都可以提供帮助，提供链接我如何

*   对 PostgreSQL 做基准测试
*   你认为 PostgreSQL 可以提高 CPU 利用率而不是 MySQL
*   链接, wiki, 只显示基准比较

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T03:51:42.663

数据库用户的一个常见误解是高 CPU 使用率不好。

它不是。

数据库只有一个速度：尽可能快。它总是会在管理员设置的限制内用尽所有资源，以快速执行您的查询。

大多数查询比其他查询需要更多的一种特定资源。对于大型数据库上的大多数查询，资源是磁盘 I/O，因此数据库将尽可能快地破坏您的存储。在等待硬盘驱动器时，它通常不能做任何其他工作，因此线程/进程将进入睡眠状态并停止使用 CPU。

较小的数据库，或对大型数据库中的小型数据集的查询，通常完全适合 RAM。操作系统将从磁盘缓存数据，并将其放在 RAM 中，并准备好在数据库请求时返回。这意味着数据库不会等待磁盘并被迫休眠，因此它会全力以赴地使用 CPU 处理数据以快速为您提供答案。

您可能关心 CPU 使用的原因有两个：

*   您在那台机器上运行的其他东西没有获得足够的 CPU 时间；或者
*   您认为鉴于 100% 的 cpu 使用率，您没有从数据库中获得足够的性能

对于第一点，不要责怪数据库。这是一个管理员问题。设置操作系统调度程序控件，例如漂亮的级别，以重新确定工作负载的优先级 - 或者获得更大的服务器，可以完成您需要的所有工作而不会落后。

对于第二点，您需要查看您的数据库调整、查询等。这不是“数据库使用 100% cpu”的问题，而是“我没有获得足够的吞吐量并且似乎受 CPU 限制”的问题. 数据库和查询调优是一个很大的话题，我不会在这里讨论，尤其是因为我通常不使用 MySQL。

# android - Android日志记录方法是异步的吗？

> ID：11237445
> 
> 赞同：2
> 
> 时间：2012-06-28T02:50:34.630
> 
> 标签：android, logging, asynchronous, synchronous

Android 开发者文档没有提到**下面的方法（以及类似的方法）是否是同步的：[Log.i(String tag, String msg)](http://developer.android.com/reference/android/util/Log.html#i%28java.lang.String,%20java.lang.String%29)**

**任何人都可以对此有所了解吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:58:54.900

`android.util.Log`在调用线程上调用其所有方法。所以是的，它是同步的（如果不是，IMO 会有点傻）。

[您可以在此处](http://www.netmite.com/android/mydroid/donut/frameworks/base/core/java/android/util/Log.java)找到源代码。

# wordpress - 将博客整合到自己的网站中

> ID：11237447
> 
> 赞同：1
> 
> 时间：2012-06-28T02:50:49.043
> 
> 标签：wordpress, blog-engine

已经有几个标题相似的问题，但他们要么没有得到答案，要么答案太具体。

我想将博客集成到网站中，以便可以使用简单的界面更新内容，例如从 wordpress/blogger/... 帐户。我发现使用 iframe 的解决方案既麻烦又不专业，我不确定修改 wordpress/blogger/... 主题是否也能带来令人满意的结果，另外，我不喜欢在我的网站上运行整个 wordpress 引擎。

我从头开始构建我的轻量级网站（在 gedit、Linux 记事本中），因此我不受任何特定系统或软件的束缚，并且可以完全控制布局。

您对实现令人满意的解决方案有什么建议吗？我必须学习 ASP.NET 和 IIS 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:58:29.313

WordPress 是您系统的一个很好的解决方案。它易于安装和使用。

[WordPress Codex](http://codex.wordpress.org/Hosting_WordPress)的要求：

*   版本 3.2 的 WordPress 服务器要求：

    o PHP 5.2.4 或更高版本

    o MySQL 5.0.15 或更高版本

    o（可选）（MultiSite 需要）Apache mod_rewrite 模块（用于称为永久链接的干净 URI）

您还需要在 Apache 上安装它。因此，无需学习 ASP.NET 和 IIS。

If you want to have a blog, just pust the wordpress files in a folder called blog and install it there. You will then be able to access the website from `yourdomain.com/blog/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:02:01.420

也许，我认为集成 WP 将是最好的解决方案..[集成 WordPress](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)。

而对于 IIS 替代方案，ChiliASP 可以替代 Linux 上的 IIS，但成本为 $$$，而且我听说它运行不佳。除此之外，学习 PHP/MySQL。你永远不会后悔学习它，也永远不会回到 IIS/ASP。Linux/GNU 打开了你不会相信的大门。

# touch - 如何设置UITabBar触控区域

> ID：11237456
> 
> 赞同：3
> 
> 时间：2012-06-28T02:52:07.257
> 
> 标签：touch, uitabbar, overlap

我遇到了`UITabBar`触摸区域的问题。上方的额外触摸区域（约 5 像素）`UITabBar`计为`UITabBar`。放置在该区域中的所有对象都将被阻止并`UITabBar`会做出反应。

我发现有些人问了同样的问题（以下链接）并且无法得到答案。

有人可以帮忙吗？

[触摸 uiTabBar 上方](https://stackoverflow.com/questions/7205554/touch-above-the-uitabbar)

[https://stackoverflow.com/questions/7270517/uitabbar-line-above-the-bar-touch-problem](https://stackoverflow.com/questions/7270517/uitabbar-line-above-the-bar-touch-problem)

[UITabBar / UIToolBar 重叠问题（iphone sdk）](https://stackoverflow.com/questions/1611578/uitabbar-uitoolbar-overlap-problem-iphone-sdk?answertab=active#tab-top)

# javascript - JavaScript 控制台事件处理

> ID：11237458
> 
> 赞同：0
> 
> 时间：2012-06-28T02:52:14.037
> 
> 标签：javascript, jquery, node.js, setinterval

我有一个服务器在 node.js 中运行一个视频游戏，在控制台中通过 websockets 与客户端交谈。我有一个从 MySQL 数据库生成敌人的功能，但我想这是错误消息，它没有引用我的代码我认为它是一个 jquery 脚本......我想要做的是让脚本定期运行这个函数（对于测试我将其设置为 10 秒（在代码底部设置间隔），但最终我会将其设置为 60 左右。

我可以轻松地设置一个循环和一个 if (new Date().getTime() > event_time) 然后设置 event_time 但我不想在一个恒定循环上耗尽服务器资源。timers.js:223 callback.apply(timer, args); ^ TypeError: 无法在 Timer.ontimeout (timers.js:223:14) 调用未定义的方法“应用”

这是我的代码的重要部分，尽管您基本上不需要遵循其中的大部分内容，但我在底部有一个函数和一个设置间隔方法

```
function a (){
   sql="SELECT spawns.*, (quantity - COUNT(game_moblist.spawn_id)) AS     quantity_to_spawn,mobs.* FROM spawns LEFT JOIN mobs USING (mob_id) LEFT JOIN game_moblist     USING (spawn_id) GROUP BY spawn_id"
   connection.query(sql, function(err, rows, fields) {
      if (rows[0].quantity_to_spawn>=1){
         ocv = parseInt(rows[0].dex/3)+rows[0].level;
         dcv = parseInt(rows[0].dex/6)+rows[0].level/2;//dex adds same ocv and     dcv+evade combined bonus to make = dex hit about 50%
         evade = parseInt(rows[0].dex/6)+rows[0].level/2;
         dmg = parseInt(rows[0].str/3)+rows[0].level;
         max_hp = rows[0].con * rows[0].level;
         hp=max_hp;
         max_end=rows[0].con * rows[0].level;
         end=rows[0].con * rows[0].level;
         pd = rows[0].level/2;
         ed = rows[0].level/2;
         kill_exp=parseInt((rows[0].kill_exp*(Math.pow(1.25, rows[0].level+1)))*    ((Math.random()*0.1)+1))
         nextturn = new Date().getTime()
         spawn_sql="INSERT INTO game_moblist (posx, posy, ocv, dcv, evade, dmg, hp,     max_hp, end, max_end, pd, ed, land, next_turn, alignment, mob_name, level, spawn_id, mob_id, move_time, attack_time, action_time, kill_exp) VALUES "
         for (i=0;i<rows[0].quantity_to_spawn;i++){
            spawn_sql += "("+rows[0].posx+","+ rows[0].posy+","+ocv+","+dcv+","+evade+","+dmg+","+hp+","+max_hp+","+end+","+max_end+","+pd+","+ed+",'"+rows[0].land+"',"+nextturn+","+rows[0].alignment+",'"+rows[0].mob_name+"',"+rows[0].level+","+rows[0].spawn_id+","+rows[0].mob_id+","+rows[0].move_time+","+rows[0].attack_time+","+rows[0].action_time+","+kill_exp+")";
            if (i<rows[0].quantity_to_spawn-1){
               spawn_sql+=","
             }
         }

          console.log(spawn_sql)
         connection.query(spawn_sql, function(err, rows, fields) {if (err) throw err});
      }
   });
}
setInterval(a(),10000) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:56:47.603

使用[函数指针](http://msdn.microsoft.com/en-us/library/ie/ms536749#code-snippet-2)而不是函数调用作为 setInterval 的第一个参数：

```
setInterval(a,10000) 
```

# ruby - 添加到数组循环

> ID：11237460
> 
> 赞同：1
> 
> 时间：2012-06-28T02:52:39.157
> 
> 标签：ruby, arrays, hash

Ruby代码是：</p>

```
 a = []
    h = {}
    2.times.each do |i|
      %w(a b c).each do |x|
        h[x] = x + i.to_s
      end
      a << h
    end 
```

结果是：

```
a = [{"c"=>"c1", "b"=>"b1", "a"=>"a1"}, {"c"=>"c1", "b"=>"b1", "a"=>"a1"}] 
```

但我希望结果是：

```
a = [{"c"=>"c0", "b"=>"b0", "a"=>"a0"}, {"c"=>"c1", "b"=>"b1", "a"=>"a1"}] 
```

谁能帮帮我.thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:00:32.093

之后`a << h`你要做的`h = {}`。这是因为您正在为 h 分配一个新对象，以便它不会覆盖以前的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:19:58.943

*【补充回答】*你熟悉[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)的原理吗？

```
(0..1).map { |n| Hash[("a".."c").map { |c| [c, "#{c}#{n}"] }] }
#=> {"a"=>"a0", "b"=>"b0", "c"=>"c0"}, {"a"=>"a1", "b"=>"b1", "c"=>"c1"}] 
```

# zsh - 在 Mac OS Lion 上使用 tmux 提示之前出现奇怪的空间

> ID：11237462
> 
> 赞同：23
> 
> 时间：2012-06-28T02:52:59.190
> 
> 标签：zsh, tmux

它刚刚发生在我的 Lion 系统上，我正在使用 zsh 和 tmux

在 zsh shell 中正常

![在此处输入图像描述](../Images/b73028acb6d9f48a8d765d6ffb396979.png)

tmux 屏幕中的双倍空间

![更宽的缩进](../Images/40aa35b5cd4e5aeaf612a4bdde6cc544.png)

我在 zsh 或 tmux 中缺少一些配置吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-28T04:53:32.470

使用 -u 选项启动 tmux 以获得 unicode 功能。看到[这个问题](https://github.com/robbyrussell/oh-my-zsh/issues/559)。

来自`man tmux`：

> -u
> 
> tmux 尝试通过检查要为字符串“UTF-8”设置的 LC_ALL、LC_CTYPE 和 LANG 环境变量中的第一个来猜测终端是否可能支持 UTF-8。这并不总是正确的： -u 标志明确通知 tmux 支持 UTF-8。
> 
> 如果服务器从通过 -u 或检测到 UTF-8 的客户端启动，则在全局窗口和会话选项中分别启用 utf8 和 status-utf8 选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-17T02:57:14.423

我遇到了这个问题`zsh`，`byobu`和`tmux`。

要完全解决它：

*   将以下内容添加到`~/.zshrc`：

    `export LC_ALL=en_US.UTF-8 export LANG=en_US.UTF-8`

*   在`-u`之后添加：`byobu-lauch``~/.zprofile`

    `_byobu_sourced=1 . /usr/bin/byobu-launch -u`

*   将以下内容添加到`~/.byobu/.tmux.conf`：

    `set-option -g utf-8 on`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T07:11:24.080

当我将系统语言更改为英语时，我遇到了同样的问题。当我使用命令时，`locale`所有字段都是空的。当我在首选项（语言和区域 - > 高级）中将格式语言设置为俄语`locale`时 - 命令具有填充值，并且在 tmux 中没问题。

# iphone - AudioServices：第一个声音播放，第二个不播放。

> ID：11237464
> 
> 赞同：0
> 
> 时间：2012-06-28T02:53:46.610
> 
> 标签：iphone, ios, audio

我想我知道我的问题正在发生，但正在寻找验证和可能的解决方法。

我有一个简单的方法`-(void)playMySound:(NSString *)sound`，我在主 ViewController 的两个地方调用：

1.  In ViewDidLoad - 当初始视图加载时，声音按预期播放

2.  在按下按钮时触发的 IBAction 方法中。不播放此声音

我说我想我知道为什么 - 该按钮还通过 Storyboard 连接到 Segue，该故事板加载了第二个视图控制器。我认为这以某种方式在声音播放之前踩到了声音（可能是取消分配 SystemSoundID？）。我已经确认 playMySound 是从按钮按下触发的。

我希望这个解释是足够的，但如果不是，我会很乐意发布我的代码。

谢谢托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:17:50.343

好吧，毕竟我从原始 .mp3 重新创建了我的 .caf。我没有在 SoundStudio 中打开 .mp3 并导出为 CAF，而是按照 Apple 的说明在终端中使用以下命令进行转换：/usr/bin/afconvert -f caff -d LEI16 {INPUT} {OUTPUT}。生成的 .caf 现在可以正常工作了。

# javascript - JQuery：重用提交功能

> ID：11237477
> 
> 赞同：1
> 
> 时间：2012-06-28T02:56:12.800
> 
> 标签：javascript, jquery, ajax, forms, dynamic

嘿伙计们，我已经尽可能多地看了，但我找不到答案，我正在创建一个管理界面，该界面到处都有表格，我想为所有表格使用相同的 jquery 代码，我有一些代码这正在完成工作，但我想知道是否有更有效的方法来做到这一点。这是代码

```
 function submitForm( formname ) 
{
  $.ajax
  ({
    type:'POST', 
    url: 'session.php', 
    data: $(formname).serialize(), 
    success: function(response) 
    {
      if( $('#message_box').is(":visible") ) 
      {
        $('#message_box_msg').html ('') 
        $('#message_box').hide();
      }
      $('#message_box').slideDown();
      $('#message_box_msg').html (response);      
    }
  });
return false;
} 
```

现在我的表格看起来像这样：

```
<form id="adminForm" action="session.php" method="post" onsubmit="return submitForm('#adminForm');"> 
```

现在我的问题是......有没有更简单的方法来做到这一点，比如不必每次都为 submitForm() 函数提供表单 ID？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:59:44.123

是的，为所有表单定义一个公共类，并使用

```
$(".form_class").submit(function() {

  //stuff that gets executed on form submission ...

  return result;
}) 
```

并转储内联“onsubmit”。一般来说，这样做也更干净，因为它将视图与行为分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:35:49.070

您可能希望将处理程序委派给页面中的文档或其他永久资产，以处理任何 ajax 加载的表单。这将替换您的内联`onsubmit`

```
$(document).on('submit','form', function(){ 

     var allowSubmit=false,
         noSubmitMessage="Can't submit", /* can change message in various places in following code depending on app*/
         $form=$(this);/* cache jQuery form object */
    if( $form.hasClass('doValidation')){
        /* class specific code to run*/    
        allowSubmit = validationFunction();
    }

    if( allowSubmit){
       var data=$form.serialize()          
       /* do ajax*/
    }else{
       /* user feedback*/ 
       alert( noSubmitMessage);
    }

return false;

}); 
```

# bash - 如何关闭命名管道的作者？

> ID：11237479
> 
> 赞同：3
> 
> 时间：2012-06-28T02:56:16.033
> 
> 标签：bash, unix, pipe

我有兴趣同时关注几个远程文件并同时聚合文件上的统计信息。到目前为止，我这样做如下：

```
mkfifo mfifo
ssh -ft host1 'tail -f /path/to/log | grep something' > mfifo &
ssh -ft host2 'tail -f /path/to/log | grep something' > mfifo &
ssh -ft host3 'tail -f /path/to/log | grep something' > mfifo &
cat mfifo | awk '{x += $4; print $3} END {printf "total: %d", x}' 
```

这几乎可以按预期工作，聚合通过 awk 流式传输的 grepped 日志。但是，我不确定如何打印最终总数。我认为我需要关闭 fifo 的作者，但我不知道该怎么做。关于如何在不将整个流存储为文件的情况下执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:29:53.373

### 杀死 FIFO 写入器

您可以使用*fuser*来终止写入文件的进程。例如：

```
fuser -TERM -k -w mfifo; sleep 5; fuser -k -w mfifo 
```

请注意，fuser 默认发送 SIGKILL，因此给出的示例发送显式 SIGTERM，然后在强制终止进程之前等待 5 秒。这应该允许您的进程自行清理，但可以随意调整调用以适应。

另外，请注意我们传递了 -w 标志，因此 fuser 只会终止具有写访问权限的进程。如果没有这个标志，你也会杀死*cat*和*awk*。

# c# - 由按钮对象处理的 C# 文本框用户输入

> ID：11237483
> 
> 赞同：-1
> 
> 时间：2012-06-28T02:56:43.877
> 
> 标签：c#

> **可能重复：**
> [存储数组并通过单击按钮显示最高和最低数字的 C# GUI 应用程序](https://stackoverflow.com/questions/11237075/c-sharp-gui-application-that-stores-an-array-and-displays-the-highest-and-lowest)

这是从 13 小时前更新的，因为我已经对此进行了一些研究和试验。我是这个编程领域的新手，所以我会很短，我正在自学 C#，我正在尝试学习如何从用户输入到文本框中的整数从 button1_Click 中计算出来以显示在表单上。是的，这是一项课堂作业，但我认为我可以很好地处理其中的一些问题，但不是全部；这就是我转向你们的原因。感谢所有的建议家伙。

我在 C# 语言中使用 Microsoft Visual Studio 2010。我正在使用 Windows 窗体应用程序，我需要创建一个 GUI，允许用户输入 10 个整数值，这些值将存储在从 button_Click 对象调用的数组中。这些值将显示用户输入的最高和最低值。唯一的问题是数组必须在 Click() 方法之上声明。

到目前为止，这是我想出的：

```
namespace SmallAndLargeGUI
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void inputText_TextChanged(object sender, EventArgs e)
        {
            this.Text = inputText.Text;
        }

        public void submitButton_Click(object sender, EventArgs e)
        {
            int userValue; 
            if(int.TryParse(inputText.Text, out userValue)) 
        { 

        } 
        else 
        {
            MessageBox.Show("Please enter a valid integer into the text box.");
        } 

            int x;
            x = Convert.x.ToString();
            int squaredResults = squared(x);
            int cubedResults = cubed(x); squared(x);
            squaredLabel.Text = x.ToString() + " squared is " + squaredResults.ToString();
            cubedLabel.Text = x.ToString() + " cubed is " + cubedResults.ToString();
        }
        public static int squared(int x)
        {
            x = x * x;
            return x;
        }
        public static int cubed(int x)
        {
            x = x * squared(x);
            return x;    
        }
    }
} 
```

现在我无法运行这个程序，因为第 38 行显示了一条错误消息：“System.Convert”不包含“x”的定义此外，我仍然必须有一个数组，该数组包含来自文本框的 10 个整数并在上面声明Click() 方法。请各位大侠帮帮我？这是昨天到期的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:10:19.280

正如一些评论所提到的，这里确实没有足够的信息来为您提供有用的答案。.Net 中有两个用于 Windows 应用程序的主要用户界面框架。其中一个通常称为“WinForms”，另一个是“WPF”或“Windows Presentation Foundation”。

我要和你一起去最有可能使用 WinForms，因为它是两种技术中较旧的一种。这里的方法可以在双方都使用，只需稍作调整。在文本框中设置文本与在标签上以编程方式设置文本非常相似。您可以在 MSDN 上获得更多详细信息：[如何：在 Windows 窗体上显示文本](http://msdn.microsoft.com/en-us/library/bb383971%28v=vs.90%29)；[如何：使用 TextBox 控件获取用户输入](http://msdn.microsoft.com/en-us/library/bb397491%28v=vs.90%29)。

如果您使用的是 WPF，则“后端”代码几乎相同。您只需要确保您的文本框有一个`x:Name="userInputTextBox"`，以便您可以在后面的代码中引用它。**请注意**，您的用户可以在字段中输入“1”、“3”或“abcd”。确保您的应用程序不会爆炸很可能不在任务范围内，但请随意查找 C#`int.TryParse(...)`和“Try Catch”:-)

您的按钮处理程序可能如下所示：

```
void btnUserClick_Click(object sender, System.EventArgs e)
{
    int userValue;
    if(int.TryParse(txtUserInput.Text, out userValue))
    {
        // We have the value successfully, do calculation
    }
    else
    {
        // We don't have the users value.
        MessageBox.Show("Please enter a valid integer into the text box.")
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:29:00.913

在您的`retrieveInput_Click`处理程序中，您将最小/最大数字分配给本地 int。一旦确定了逻辑中的最小/最大数字，就需要将这些本地整数分配给 UI 元素以进行显示。

由于我们没有关于您的特定 UI 选择的任何详细信息，因此一种简单的解决方案可能是在表单中添加 2 个标签，然后在代码中将结果放入标签中：

```
for (int i = 0; i < numbers.Length; ++i)
{
  if (numbers[i] < min)
     min = numbers[i];
  if (numbers[i] > max)
     max = numbers[i];
}

// Assign Minimum to Label1
Label1.Text = "Minimum Value: " + min.ToString();
// Assign Maximum to Label2
Label2.Text = "Maximum Value: " + max.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T03:05:58.673

1.  定义名为 textbox1 或 txt_name 的文本框

2.  您可以编写 button1_Click 函数：

    ```
    int i_value = Convert.ToInt16(txt_name.Text); 
    ```

好的。我没有尝试捕获异常.... :(

也许上面的答案是对的。

顺便说一句，我认为这个问题主要集中在如何从文本框中获取 int 类型。正确的？

# saml - SAML 如何真正提供安全性？

> ID：11237489
> 
> 赞同：15
> 
> 时间：2012-06-28T02:58:17.730
> 
> 标签：saml

在阅读了一些文章和参考资料后，我发现它们实际上说明了 SAML 是什么、它包含哪些组件、它是如何工作的。一些不错的链接如下：

*   [关于 Shibboleth 和 SAML 的良好文档？](https://stackoverflow.com/questions/6153151/good-documentation-about-shibboleth-and-saml)
*   [ADFS、WIF、WS 联合、SAML 和 STS 之间有什么区别？](https://stackoverflow.com/questions/7979254/relate-adfs-wif-ws-federation-saml-sts)
*   [http://en.wikipedia.org/wiki/SAML](http://en.wikipedia.org/wiki/SAML)
*   [http://saml.xml.org/wiki/saml-introduction](http://saml.xml.org/wiki/saml-introduction)
*   [https://www.oasis-open.org/committees/download.php/27819/sstc-saml-tech-overview-2.0-cd-02.pdf](https://www.oasis-open.org/committees/download.php/27819/sstc-saml-tech-overview-2.0-cd-02.pdf) ...

但是，我仍然对此感到困惑：为什么说它是安全的？在我看来，简而言之，SAML 只是一种“格式化”的 XML 表示。它是一种在信息高速公路上交换数字的语言或机制。我找不到它是安全的，它只是提供了一种协商或标准的方式来交换信息。我不知道我的理解是否正确。为什么 SAML 包含“安全性”仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T14:26:38.040

我认为您在阅读完之后遗漏的部分是 SAML 如何要求使用 XML DSIG 和 XML ENC 规范来确保消息的完整性和机密性。虽然标准化的消息格式和通用名称标识符使各方之间共享身份信息变得更加容易，但正是这两个安全组件（如果实施得当）让企业、政府和云服务提供商能够自信地采用 SAML 来交换身份信息。

HTH-伊恩

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T13:48:00.457

为了确保安全，我们可以使用我们的私钥对响应进行数字签名，并与服务提供商共享证书。通过这种方式，它可以提供针对虚假 IdP 和“中间人”攻击 (MITM) 的安全性。

除此之外，始终建议将此事务设置为基于 SSL 的 HTTP。

最后但并非最不重要的一点是，您还可以使用持久/临时假名在 IdP 和 SP 之间交换信息。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-28T09:41:36.287

是的，SAML 是一种基于 XML 的信息交换语言，正如名称安全断言标记语言的含义。为什么 SAML 被称为安全标记语言是因为该语言专门定义用于交换安全和身份相关信息，例如授权信息、身份验证信息等。由于该语言的这种能力，围绕 SAML 定义了许多安全协议和配置文件，例如SSO 配置文件、Web 服务配置文件等。

# android - I/InputReader(304): dispatchTouch::touch 事件的动作为 1，pending(waiting finished signal)=0

> ID：11237493
> 
> 赞同：1
> 
> 时间：2012-06-28T02:58:47.940
> 
> 标签：android, android-listview, android-imageview, android-adapter

为了让listview更流畅，我决定用一个数组来保存getView()每次生成的view，以便重复使用，以避免重复getView()，所以他们继承BaseAdapter来写MyBaseAdapter。最终效果很好，运行很流畅，但是又出现了新的问题：listview第一项和第二项里面的按钮，有时候中间的没有响应点击事件，调试如下日志：

```
I/InputReader (304): dispatchTouch : touch events action is 1, pending (waiting finished signal) = 0
I/InputDispatcher (304): Delivering touch to current input target: action: 1, channel 42068da0 com.meet.baby / com.meet.baby.test (server)
I/InputDispatcher (304): Delivering touch to current input target: action: 1, channel TouchIntercepter (server) 
```

但是按钮的点击事件却能够补充条目被点击后执行。

```
package com.meet.baby.adapter;

import java.util.ArrayList;

import com.meet.baby.MyApp;
import com.meet.baby.R;
import com.meet.baby.modle.ui.BBLinearLayout;

import android.content.Context;
import android.database.DataSetObserver;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.ListView;

/**
 * 
 * @author zhangcy
 *
 * @param <T> datamodel
 * @param <V> viewmodel
 */
public abstract class MyBaseAdapter<T, V extends View> extends BaseAdapter{
    protected static final String TAG = "MyBaseAdapter";
    protected ArrayList<T> lisTs;
    protected V[] views;

    public MyBaseAdapter (ArrayList<T> dataViews) {
        lisTs = dataViews;
        if (lisTs == null) {
            dataViews = new ArrayList<T>();
        }
        buildList();
    }

    @SuppressWarnings("unchecked")
    private void buildList() {
        // TODO Auto-generated method stub
        int i = 0;
        if (lisTs != null && lisTs.size() > 0) {
            i = lisTs.size();
        }
        views = (V[]) new View[i];
    }

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub
        buildList();
        super.notifyDataSetChanged();
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        if (lisTs == null || lisTs.size() == 0) {
            BBLinearLayout layout = new BBLinearLayout(MyApp.getInstance().getContext());
            layout.setLayoutParams(new ListView.LayoutParams(LayoutParams.FILL_PARENT, 800));
            layout.setGravity(Gravity.CENTER_HORIZONTAL);
            try {
                layout.addView(getEmptyView());
            } catch (Exception e) {
                // TODO: handle exception
            }
            layout.setBackgroundResource(R.drawable.bg_drawable);
            layout.setEnabled(false);
            return layout;
        }
        V view = views[position];
        if ( view!= null) {
            view.setSelected(true);
            return view;
        }else {
            Context context = MyApp.getInstance().getContext();
            T data = lisTs.get(position);
            view = constructView(context, position, data);
            views[position] = view;
        }
        view.setSelected(true);
        return view;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        int i = 1;
        if (lisTs != null && lisTs.size() > 0) {
            i = lisTs.size();
        }
        return i;

    }

    public void notifyDataSetChanged(ArrayList<T> lists) {
        // TODO Auto-generated method stub
        this.lisTs = lists;
        notifyDataSetChanged();
    }

    @Override
    public void unregisterDataSetObserver(DataSetObserver observer) {
        if (observer != null) {
            super.unregisterDataSetObserver(observer);
        }
    }

    /**
     * retun View for each item
     * @param context 
     * @param position　
     * @param data　data for each item
     * @return V View for each item
     */
    public abstract V constructView(Context context, int position, T data);
    public abstract View getEmptyView();
} 
```

# cakephp - CakePHP 1.3：使用Route获取以下URL格式/news/06/27/12/slug-slug-slug

> ID：11237510
> 
> 赞同：0
> 
> 时间：2012-06-28T03:00:33.747
> 
> 标签：cakephp

全部，

我目前在我的应用程序中有 slug 设置，我在其中生成以下链接：

`http://www.domain.com/article/my-first-news-article`.

这是我用来完成此任务的当前路线，除了`view`接受 a`slug`而不是`id`：

```
Router::connect('/article/*',array('controller' => 'articles', 'action' => 'view')); 
```

但是，我想通过将发布日期添加到 URL 来进一步改进，如下所示：

`http://www.domain.com/article/2012/06/27/my-first-news-article`

我有来自 CakePHP 手册的以下代码，但它似乎不起作用：

```
 Router::connect(
        '/article/:year/:month/:day/:slug',
        array(
              'controller' => 'articles',
              'action' => 'view'
        ),
        array(
            'year' => '[12][0-9]{3}',
            'month' => '0[1-9]|1[012]',
            'day' => '0[1-9]|[12][0-9]|3[01]'
        )
    ); 
```

为此，我真的不在乎将什么日期传递给视图。我只关心通过的蛞蝓。然后我会用`function view($slug)`它来查找文章并显示它。但是 URL 必须是`http://www.domain.com/2012/06/27/slug-slug-slug`

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:08:04.570

$this->Html->link() 调用在您想在链接中使用日期的地方看起来如何？

你在那里添加所需的参数吗？

```
$this->Html->link('Article', array('year' => 2012, 'month' => 01, 'day' => 01, 'action' => 'view', 'slug' => $article['Article']['slug'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:12:18.270

为了完整起见，并且因为其他人可能对此也感兴趣，我将向您展示我对类似问题的解决方案：

我想要格式的 URL

```
http://mydomain.com/blog/2012/06/slug-slug-slug 
```

即/blog/yyyy/mm/slug

为此，我使用

```
// view a post by year and month and title
Router::connect('/blog/:year/:month/:title/*', array(
  'controller' => 'posts',
  'action' => 'view'
), array(
  'year' => '[12][0-9]{3}',
  'month' => '0[1-9]|1[012]',
  'title' => '[a-z0-9-]+'
)); 
```

使用以下规则，您可以确保输入正确的格式。它还可以防止用户输入诸如 & *"* % 之类的值作为 slug。

`http://mydomain.com/blog/2012/06/slug/page:2`当您的博客条目有多个页面 ( )时，标题后的 /* 甚至允许附加参数，例如用于分页。

我也意识到设置“pass”数组并不是必须的（至少在 CakePHP 2.0 中）。您可以通过 $this -> request -> params['year'] 等直接访问参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:55:33.093

经过更多的研究和试验，我能够弄清楚。

以下路由可以接受这样的 URL：

`http://www.mydomain.com/article/2009/06/10/my-first-article-in-mydomain-dot-com`.

事实上，如何设置日期实际上并不重要，它仍然可以工作。也可能是，

`http://www.mydomain.com/article/06/10/2012/my-first-article-in-mydomain-dot-com`

```
Router::connect(
        '/article/:year/:month/:day/:slug',
        array(
              'controller' => 'articles',
              'action' => 'view'
        ),
        array(
            'pass' => array('slug')
        )   
    ); 
```

# php - php中调用父方法的多种方式

> ID：11237511
> 
> 赞同：102
> 
> 时间：2012-06-28T03:00:40.280
> 
> 标签：php

起初我很困惑为什么构造函数中的两个方法调用都有效，但现在我想我明白了。扩展类继承父类的方法，就好像它们在类本身中声明一样，并且这些方法存在于父类中，所以两者都应该工作。

现在我想知道是否有调用方法（通过`parent`或`this`）的首选方式（即最佳实践），以及这些是否是执行相同代码的真正相同的方式，或者在使用时是否有任何警告另一个。

对不起，我可能想多了。

```
abstract class Animal {

    function get_species() {

        echo "test";

    }

}

class Dog extends Animal {

    function __construct(){

        $this->get_species();
        parent::get_species();

    }

}

$spike = new Dog; 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-06-28T03:34:53.080

有三种情况（我能想到），您可以在子类中调用方法，而该方法在父类中退出：

1.  方法不会被子类覆盖，只存在于父类中。

    这与您的示例相同，通常最好使用`$this -> get_species();` 您是对的，在这种情况下两者实际上是相同的，但是方法已被子类继承，因此没有理由区分。通过使用`$this`，您可以在继承的方法和本地声明的方法之间保持一致。

2.  方法被子类覆盖，并且具有来自父类的完全独特的逻辑。

    在这种情况下，您显然想要使用`$this -> get_species();`，因为您不希望执行父版本的方法。同样，通过始终使用`$this`，您不必担心这种情况与第一种情况之间的区别。

3.  方法扩展了父类，增加了父方法实现的功能。

    在这种情况下，您仍然希望``$this -> get_species();`在从子类的其他方法调用该方法时使用。您将调用父方法的一个地方将来自覆盖父方法的方法。例子：

    ```
    abstract class Animal {

        function get_species() {

            echo "I am an animal.";

        }

     }

     class Dog extends Animal {

         function __construct(){

             $this->get_species();
         }

         function get_species(){

             parent::get_species();
             echo "More specifically, I am a dog.";
         }
    } 
    ```

我能想象的唯一需要在覆盖方法之外直接调用父方法的情况是，如果他们做了两件不同的事情，并且您知道您需要该方法的父版本，而不是本地版本。这不应该是这种情况，但如果它确实出现了，解决这个问题的干净方法是创建一个新方法，其名称就像`get_parentSpecies()`它所做的只是调用父方法：

```
function get_parentSpecies(){

     parent::get_species();
} 
```

同样，这使一切保持良好和一致，允许对本地方法进行更改/修改，而​​不是依赖于父方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T03:09:24.130

除非我误解了这个问题，否则我几乎总是使用 $this->get_species，因为子类（在本例中是 dog）可以覆盖该方法，因为它确实扩展了它。如果类 dog 没有重新定义该方法，那么这两种方法在功能上是等效的，但是如果在将来的某个时候您决定希望 dog 中的 get_species 方法打印“dog”，那么您将不得不返回所有代码并更改。

当您使用 $this 时，它实际上是您创建的对象的一部分，因此在使用父类时也将始终是最新的（如果正在使用的属性在对象的生命周期中以某种方式发生了变化）正在调用静态类方法。

# paypal - Paypal 嵌入式链式自适应支付

> ID：11237513
> 
> 赞同：1
> 
> 时间：2012-06-28T03:00:53.017
> 
> 标签：paypal, payment, chained

我实现了paypal的嵌入式支付流程。在使用有效的支付密钥拨打并接收成功的“支付”电话后，我设法打开了灯箱 iframe。

但是有一条消息指出“此交易无效。请返回收件人的网站并重试。” 在打开的灯箱里。

知道是什么导致了这个消息吗？请帮忙。任何想法将不胜感激。

# asp.net - 如何在我的 asp.net 网站中获取每次执行的时间？

> ID：11237515
> 
> 赞同：0
> 
> 时间：2012-06-28T03:00:56.137
> 
> 标签：asp.net

我在本地 IIS 中有一个 asp.net 网站，由于 sql 查询（此 sql 查询大约需要 7 秒），其中一个页面需要很长时间（大约 10 秒）才能加载。我做了一些调整工作，最后使这个 sql 查询不到 1 秒。但是页面仍然需要大约 3 秒才能完成加载，我认为它仍然很慢。这个页面在 yslow 测试中得到了“B”，所以我想这个页面中一定有一些 CLR 执行需要这些时间，但是我怎么能获取这些执行的时间（循环或变量声明）？有什么有用的工具吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:25:35.363

在页面指令中添加trace="true"，页面生命周期各阶段的执行时间将在页面内容下方输出。

[ASP.NET 跟踪](http://msdn.microsoft.com/en-us/library/y13fw6we%28v=vs.71%29.aspx)

[如何：使用跟踪查看器查看 ASP.NET 跟踪信息](http://msdn.microsoft.com/en-us/library/wwh16c6c.aspx)

# java - 在 Java 中计算 alpha 形状（凹壳）

> ID：11237517
> 
> 赞同：3
> 
> 时间：2012-06-28T03:01:00.207
> 
> 标签：java, geometry, triangulation

使用 Java，我想计算[alpha 形状](http://en.wikipedia.org/wiki/Alpha_shape)：给定一组 2D 点，我想找到一个包含所有点的面积最小的多边形列表。[这](http://www.cgal.org/Manual/3.2/doc_html/cgal_manual/Alpha_shapes_2/Chapter_main.html)是更多信息。一个纯 Java 解决方案将是理想的。我可以从其他语言移植到 Java 的代码会很好。我宁愿不使用本机包装器。我可以通过合理的努力实现的算法解释也很好。

我真正需要的是构成 alpha 形状多边形的三角形，因此需要额外的功劳。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T03:45:42.227

[这个页面](https://archive.is/l3Un5)有一个很好的 Java 小程序，它带有 GPL 源代码，可以满足您的需求。还有完整的论文进一步描述了该算法。

它不做三角形镶嵌部分，但是一旦你有一个多边形，就有很多可用的库。如果不出意外，openGl 有一个出色的 tessellator，您可以使用或从中提取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T04:54:15.600

我不确定这些是否是@Geobits 描述的小程序和论文，但是现在可以在[此链接](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html)中找到一个小程序和一些论文。

然而，这只是你问题的开始。大多数现代浏览器[不支持 Java 小程序](https://java.com/en/download/faq/chrome.xml)。这是由于关于 NPAPI 和安全性的问题；有关详细信息，请参见例如这句话之前的链接。这种缺乏默认支持的情况发生在 2015 年秋季左右。

与其详细介绍完整的解决方案，我建议您访问[Oracle 关于如何让小程序运行的说明](https://java.com/en/download/help/enable_browser.xml)。它展示了如何在 Internet Explorer (IE)、Firefox 和 Safari 中启用小程序（我不知道 Microsoft Edge）。

您甚至无法在 Chrome 中启用 Java。一种解决方法基本上是在 Chrome 中模拟 IE。它在[这里](https://techhelpkb.com/how-to-enable-java-in-google-chrome-45/)描述。

请注意，我使用 IE 和 Firefox 上描述的方法测试了这个小程序，它们都在 Windows 10 上运行。我必须更改 Java 安全设置，如下一段所述。对于 IE，小程序很好用。对于 Firefox，我必须单击左上角看起来像乐高积木的按钮。小程序的一部分工作，但我无法让它允许我插入点。

信不信由你，这还没有结束。您还需要更改 Java 安全设置，以便相关站点可以运行 Java。再一次，Oracle 有一篇[文章](https://www.java.com/en/download/help/jcp_security.xml)描述了这一点。查找该`Exception Sites List`部分的屏幕截图，当您在计算机上到达该位置时，按下`Edit Site List`按钮并按照提示进行操作。您想将[http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html)添加到例外站点列表。

另一种选择是：

[http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/)

和下载`alpha.zip`。您也可以直接访问下载链接：

[http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.zip](http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.zip)

导航到您下载它的目录，提取内容，转到新`alpha`目录，然后运行

```
appletviewer Alpha.html 
```

但是，您需要找到 Java 的早期版本——最好是 Java 1.1，但我认为 Java 5 之前的任何东西都可以工作。

祝它运行好运！

* * *

**更多信息：**

[https://blog.mozilla.org/futurereleases/2015/10/08/npapi-plugins-in-firefox/](https://blog.mozilla.org/futurereleases/2015/10/08/npapi-plugins-in-firefox/)

Mozilla 打算在 2016 年底之前取消对 Firefox 中大多数 NPAPI 插件的支持。Firefox 几年前通过手动激活插件开始了这一过程，允许用户仅在必要时激活插件。这一决定反映了其他现代浏览器的行为，例如 Google Chrome 和 Microsoft Edge，它们已经删除了对旧插件的支持。

[http://www.ghacks.net/2016/04/11/firefox-drm-and-the-end-of-npapi/](http://www.ghacks.net/2016/04/11/firefox-drm-and-the-end-of-npapi/)

当前支持的最流行的插件是 Adob​​e Flash 和 Java，但 Firefox 可能会选择更多插件以使其功能可用。

当谷歌停止支持 NPAPI 时，谷歌在 Chrome 45 中踢出了 NPAPI，Mozilla 也宣布将终止支持。

谷歌相对于 Mozilla 的优势在于 Chrome 附带了一个内置于浏览器的 Flash 版本，这意味着最流行的 NPAPI 插件仍然可以在 Chrome 中使用，尽管形式不同。

...

到目前为止，Mozilla 表示对 NPAPI 的支持将在 2016 年底结束，但没有透露确切的时间。

2 月份 Mozilla.dev.tech.plugins 上的一篇文章透露了更新的计划。根据那里发布的信息，Mozilla 计划在 2017 年 4 月发布的 Firefox 53 中删除 NPAPI 支持。

下一个 Firefox ESR（扩展支持版本）版本是 52，将接收一年的安全更新。通过在 Firefox 53（ ESR*之后*的版本）中删除 NPAPI ，需要 NPAPI 支持的用户可以继续切换到 Firefox ESR 52 并继续使用 NPAPI 插件，直到 2018 年 5 月。

选择 Firefox 53 的主要原因是 Firefox 52 是一个新的 ESR 版本。这意味着 ESR 上的任何人都将能够使用 NPAPI 插件，直到不再使用该版本并且不是在 2018 年 5 月之前。

[https://java.com/en/download/help/firefox_java.xml](https://java.com/en/download/help/firefox_java.xml)

[https://support.mozilla.org/en-US/questions/975269](https://support.mozilla.org/en-US/questions/975269)

[http://news.softpedia.com/news/flash-npapi-support-to-be-removed-in-firefox-53-503777.shtml](http://news.softpedia.com/news/flash-npapi-support-to-be-removed-in-firefox-53-503777.shtml)

# c# - OutOfMemoryError / 将 C# 集成到 C 到 Java 时程序崩溃

> ID：11237520
> 
> 赞同：1
> 
> 时间：2012-06-28T03:01:38.457
> 
> 标签：c#, java, c, windows, java-native-interface

好的，所以我编写了一个 C# 驱动程序（驱动程序在虚拟程序中调用存根而不是设备驱动程序）程序调用 C 包装器 DLL，而 C 包装器 DLL 通过 JNI 调用 java jar 文件，这实际上完成了大部分工作。所有 3 个程序都是 32 位的。这样做是为了与另一个供应商集成，该供应商应该执行 C# 以及调用我们的 C DLL 的 C 程序。

我的示例测试 C# 到 C 到 Java 程序工作正常，但问题是，当供应商的实际 C# 程序调用我们的程序时，Hotspot JVM 要么完全初始化失败，要么在调用我们的函数期间正确初始化，它抛出OutOfMemory 错误。当我尝试使用不需要连续堆空间的 JRockit JVM 时，JVM 会导致程序彻底崩溃。

开发平台是 Windows 7 64 位操作系统。Core i7, 8GB RAM 实际程序必须是 32 位才能向后兼容旧硬件/操作系统。

据我了解，32 位进程通常有多达 2 GB 的可用地址空间。我的驱动程序占用的从任务管理器获取的峰值总大小为 256MB。供应商的 C# 程序加载了相当多的其他库，但我非常怀疑它们会占用超过 700MB。

这里可能是什么问题？是不是地址空间不连续？但如果是这样的话，为什么 JRockit 可以处理不连续的地址空间而直接崩溃呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T03:32:36.300

这里有太多可能出错的事情，无法推测可能是哪一个。

一些建议：

*   尝试通过独立于实际证据开发理论来调试问题是一个坏主意。您有一个理论，认为这与不连续的地址空间有关，（显然）没有任何真实证据。先拿证据...

*   随机更改变量（例如尝试不同的 JVM）是​​一种不好的方法，除非您有一些证据表明这是问题所在……在您的情况下。

*   如果您正在构建在 32 位平台和旧版操作系统上运行的东西，那么您需要一个 32 位 + 旧版操作系统测试环境来进行日常开发测试。（您问题的措辞表明您没有。）

*   您需要重现客户看到的实际问题。掌握他们的程序以及他们的硬件和操作系统等的详细信息，并尝试建立一个克隆。如果这不可能，请安排一次现场访问，您可以直接访问他们的工具包。

最后。试图在同一个过程中将 C、C# 和 Java 拼凑在一起的系统设计在技术上是非常危险的。无论谁认为这是一个好主意，都需要接受再教育。

# wpf - 是否可以刷绘图视觉？

> ID：11237524
> 
> 赞同：2
> 
> 时间：2012-06-28T03:02:10.463
> 
> 标签：wpf, brush

我正在 WPF 中使用 DrawingVisual 并想要制作一些效果。

是否可以用任何画笔刷 DrawingVisual？这意味着：

假设我有一个 DrawingVisual：

```
DrawingVisual myVisual = new DrawingVisual();

myVisual.RenderOpen().....
.....
....
.... 
```

不管我怎么画，我都想让整个视觉在最后变成一个彩色画笔。

类似于：drawingcontext.drawvisual(myVisual, Brushes.Red) ??

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:37:38.127

DrawingVisual 本身并不是一个可以用 Brush 填充或用 Pen 勾勒轮廓的绘图对象。相反，它是[绘图](http://msdn.microsoft.com/en-us/library/system.windows.media.drawing.aspx)对象的容器（以及其他视觉对象，因为它也是一个[ContainerVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.containervisual.aspx)）。

如果您想用“背景”画笔“填充”DrawingVisual，则必须绘制适当的绘图，例如足够大的填充矩形。

# javascript - 为不同的数组元素添加唯一的 CSS

> ID：11237525
> 
> 赞同：0
> 
> 时间：2012-06-28T03:02:15.590
> 
> 标签：javascript, css

在过去的半小时里，我试图环顾四周，但我相信以前没有人问过这个问题，因为我找不到答案。如何为数组中的每个元素指定不同的 CSS。最好将类附加到数组元素以限制冗余。

`var Stat = new Array();`

`Stat[0] = "<span class='good'>Alive</span>";`

换句话说，我想完成上述工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:10:49.423

我希望我能正确理解你的问题。您可以遍历数组并附加一个带有前缀后跟索引的类。如果我没有正确遵循您的问题，请告诉我。

```
var Stat = new Array();

for (var i = 0; i < 6; i++) {
  Stat.push('<span class="good' + i + '">Alive</span>');
}

// Produces an array with the following:
<span class="good0">Alive</span>
<span class="good1">Alive</span>
<span class="good2">Alive</span>
<span class="good3">Alive</span>
<span class="good4">Alive</span>
<span class="good5">Alive</span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:08:39.467

要使用您的 HTML/CSS 代码填充数组，您可以执行以下操作：

```
var Stat = new Array();

Stat.push("<span class='good'>Alive</span>");

Stat.push("<span class='bad'>Dead</span>");

Stat.push("<span class='evil'>Hell</span>"); 
```

在您的数组上面的代码之后`Stat`将具有以下内容：

```
Stat[0] == "<span class='good'>Alive</span>";

Stat[1] == "<span class='bad'>Dead</span>";

Stat[2] == "<span class='evil'>Hell</span>"; 
```

每个都`push`创建一个带有增量索引的新数组位置。

希望它可以帮助你！

# python - 我沿着椭圆有一组点。如何创建填充的二进制掩码

> ID：11237527
> 
> 赞同：1
> 
> 时间：2012-06-28T03:02:31.273
> 
> 标签：python, image-processing, numpy, matplotlib

我正在尝试获取此图像轮廓的填充二进制掩码。![图像的轮廓](../Images/7c1b99e311249c25e176b575022a54f6.png)

我看了一下这个问题[SciPy Create 2D Polygon Mask](https://stackoverflow.com/questions/3654289/scipy-create-2d-polygon-mask)；但是它似乎不喜欢我的数据集。

```
import numpy as np
from matplotlib.nxutils import points_inside_poly

nx, ny = 10, 10
poly_verts = [(1,1), (5,1), (5,9),(3,2),(1,1)]

# Create vertex coordinates for each grid cell...
# (<0,0> is at the top left of the grid in this system)
x, y = np.meshgrid(np.arange(nx), np.arange(ny))
x, y = x.flatten(), y.flatten()

points = np.vstack((x,y)).T

grid = points_inside_poly(points, poly_verts)
grid = grid.reshape((ny,nx))

print grid 
```

我想知道是否有另一种方法可以尝试返回二进制掩码或有人来解释 points_inside_poly 的局限性

因为它似乎最终会变成这样![badMaskScatter](../Images/1d5fb6ab3a80954c95b0dd90c89fbe6a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:15:39.860

我不确定您最后要绘制什么，但是您的示例对我有用：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.nxutils import points_inside_poly
from itertools import product, compress

pv = [(1,1),(5,1),(5,9),(3,2),(1,1)]

x, y = np.meshgrid(np.arange(10),np.arange(10))
x, y = x.flatten(), y.flatten()

xy = np.vstack((x,y)).T

grid = points_inside_poly(xy,pv)

xv, yv = zip(*pv)
xp, yp = zip(*compress(xy,grid))

plt.plot(xp,yp,'o',color='red',label='points')
plt.plot(xv,yv,'o',color='blue',label='vertices')
plt.xlim((0,10))
plt.ylim((0,10))
plt.legend()
plt.show() 
```

![points_inside_poly](../Images/37208b70d7cf74086eb5187cb25fc815.png)

# ruby-on-rails - Rails has_and_belongs_to_many 创建/插入不起作用

> ID：11237528
> 
> 赞同：1
> 
> 时间：2012-06-28T03:02:39.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下型号 -

```
class Employee < ActiveRecord::Base
  has_and_belongs_to_many :surveys, join_table: 'employee_surveys'
end

class Survey < ActiveRecord::Base
  has_and_belongs_to_many :employees, join_table: 'employee_surveys'
end 
```

当我这样做时`Employee.first.surveys.create(name: "New Survey")`，它会产生一个错误，抱怨`employee_id`是`null`??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:17:32.220

我认为您想在这里使用员工类的实例，而不是类本身。

喜欢：

```
employee = Employee.first
employee.surveys.create(name: "New Survey") 
```

# javascript - 在调用依赖它的方法时设置 javascript 对象属性

> ID：11237529
> 
> 赞同：2
> 
> 时间：2012-06-28T03:02:44.027
> 
> 标签：javascript, function, object, properties, methods

这是我正在尝试做的一个非常蹩脚的例子。这段代码有效。

```
var Love = {
  name: 'Johnny',
  kiss: function (girl){
    alert(this.name + " kissed " + girl );
  }
};

Love.name = "Chris";
Love.kiss("Becky"); 
```

我首先重新分配了name的属性，然后调用发送我的参数的方法

我真正想做的是在调用方法时使用 JSON 设置“名称”属性。我发誓我在某个地方看到过它，但我无法弄清楚。所以理想情况下它看起来像这样。

```
Love.kiss({
  name: 'Chris'},
  "Becky"); 
```

甚至是这样的。

```
var Love = {
  Guy: 'Johnny',
  Girl: 'Mallory',
  kiss: function (){
    alert(this.Guy + " kissed " + this.girl);
  }
};

Love.kiss({
  Guy: 'Chris',
  Girl; 'Becky'}); 
```

同样，我知道这是一个非常愚蠢的例子，但这个概念有一个我想使用的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:07:32.030

无论如何，您都想将对象文字（不是 JSON！）传递给函数，那么为什么不直接使用它呢？

```
function kiss(obj) {
    alert(obj.Guy + " kissed " + obj.Girl);
}

kiss({
    Guy: 'Chris',
    Girl: 'Becky'
}); 
```

为什么还要使用`Love`对象？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:07:39.487

只需遍历作为参数传入的对象的键并将它们分配给`this`：

```
var Love = {
    Guy: 'Johnny',
    Girl: 'Mallory',
    kiss: function(opts) {
        for (var k in opts) {
            this[k] = opts[k];
        }
        alert(this.Guy + " kissed " + this.Girl);
    }
};

Love.kiss({
    Guy: 'Chris',
    Girl: 'Becky'
});​  // -> alert('Chris kissed Becky') 
```

## [看演示](http://jsfiddle.net/upcxN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T03:06:56.257

```
var Love = {
  Guy: 'Johnny',
  Girl: 'Mallory',
  kiss: function( data ) {
    this.Guy = data.Guy;
    this.Girl = data.Girl;
    alert(this.Guy + " kissed " + this.Girl);
  }
};

Love.kiss({
  Guy: 'Chris',
  Girl: 'Becky'
}); 
```

这是你想要达到的目标吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:22:30.087

```
var Love = {
  Guy: 'Johnny',
  Girl: 'Mallory',

  kiss: function (obj){
    // if you want default values you can use ||
    this.Guy = obj.Guy || this.Guy;
    this.Girl = obj.Girl || this.Girl;

    alert(this.Guy + " kissed " + this.Girl);

    // or change the code above to the following if you don't want to store new values
    var guy = obj.Guy || this.Guy,
        girl = obj.Girl || this.Girl;

    alert(guy + " kissed " + girl);
  }
};

Love.kiss({
  Guy: 'Chris',
  Girl: 'Becky'
}); 
```

# celery - crontab 的 celery.beat 实现

> ID：11237536
> 
> 赞同：0
> 
> 时间：2012-06-28T03:03:27.147
> 
> 标签：celery

我的任务是在 Wowza 媒体服务器中添加一个新的流，它必须在用户指定的时间发生。目前我正在为此使用 crontab 和 http 提供程序。我想要一个`celery.beat`实现。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:07:22.123

如果这是在特定时间执行的一次性任务，那么您不需要使用定期任务（celerybeat）。

相反，您可以使用 eta/countdown 参数`task.apply_async`：

```
task.apply_async(eta=datetime(2012, 07, 1, 14, 30))

task.apply_async(countdown=30) #   in 30 seconds 
```

在这里阅读更多：

[http://celery.github.com/celery/userguide/calling.html](http://celery.github.com/celery/userguide/calling.html)

# javascript - 在 java 脚本中从 JSON 加载内容之前的返回值

> ID：11237538
> 
> 赞同：0
> 
> 时间：2012-06-28T03:03:56.960
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, json

我在 java 脚本中有一个函数，我用它从我的 asp.net mvc 控制器中获取 JSON，以在我的视图中显示该项目：

```
<script type="text/javascript" language="javascript">
var k = 0;
var record_count = 0;
var col_count = 3;
var row_count = record_count / col_count;
var str = "<table>";

function itemTemplate() {
 var url = '<%: Url.Content("~/") %>' + "ProductListing/AllProductListing/0";
 $.getJSON(url, function (product) {
      $.each(product.ja, function (index, value) {
       //append rows and column to my table by concat the string of 'str'
      });
 });
  str += '</table>';
  alert(str);
  return (str);
}
$(document).ready(function () {
  alert(itemTemplate());
});
</script> 
```

问题：当我在函数中警告函数时`$(document).ready`，首先它是警告`<table></table>`的，然后继续警告我在`$.getJSON`函数中连接它的完整字符串。所以该函数在获取 JSON 之前返回。

有人对此有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:08:44.213

尝试设置`async`为 false，然后`$.getJSON`拨打电话

**代码：**

```
jQuery.ajax({async : false});
$.getJSON( ... ); 
```

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

**注意：从 jQuery 1.8 开始，不推荐使用 async: false 。**

**替代解决方案**

```
<script type="text/javascript" language="javascript">
var k = 0;
var record_count = 0;
var col_count = 3;
var row_count = record_count / col_count;
//var str = "<table>";

function itemTemplate(callback) {
 var url = '<%: Url.Content("~/") %>' + "ProductListing/AllProductListing/0";
 $.getJSON(url, callback);
  //str += '</table>';
  //alert(str);
  //return (str);
}
$(document).ready(function () {
  itemTemplate(function (product) {
      var str = "<table>";
      $.each(product.ja, function (index, value) {
       //append rows and column to my table by concat the string of 'str'
      });
      str += "</table>";
      alert(str);
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:08:48.267

好吧，这就是 ajax 的工作方式，它`$.getJSON`启动了对服务器的异步调用，因此您将在 ajax 调用完成之前点击下一行。您应该在回调中为`getJSON`

```
function itemTemplate() {
 var url = '<%: Url.Content("~/") %>' + "ProductListing/AllProductListing/0";
 $.getJSON(url, function (product) {
      var html = "<table>";
      $.each(product.ja, function (index, value) {
       //append rows and column to my table by concat the string of 'str'
      });
      html += "</table>";
      // now append html to the DOM
 });
} 
```

该函数将在您从服务器取回数据之前返回，因此您想要对从服务器返回的数据执行的任何操作都必须在`.getJSON`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T04:05:04.297

对服务器的 Ajax 请求是**异步**的。这意味着，客户端计算机说：*在第 3 方服务器上进行操作。当你有一个答案（也就是一个回应）然后告诉我，我会处理它。*

所以..让连接那个JQuery代码来做-正是-...

```
<script type="text/javascript">

    $(document).ready(function () {
        // Just call this method, on load. 
        // (yuck, but i'm following your code)...
        itemTemplate(); 
    });

    function itemTemplate() {
        $.ajax({
            url: "/ProductListing/AllProductListing/0",
            type: "GET",
            success: function (data, textStatus, jqXHR) {
                // Handle success. like .. append data, etc.
                //.....
                alert("whatever");
            },
            error: function (jqXHR, textStatus, errorThrown) {
                // Handle the error. Don't forget you can access
                // data from the response (aka. the jqXHR)...
                alert(errorThrown);
            }
        });
    }

</script> 
```

这里的诀窍是连接`success:`和`error:`回调的。

一旦进入那里，你可以做任何你想做的事情，等等。

尝试在其中放置一个断点并查看值:)

参考：[jQuery.ajax() 文档的](http://api.jquery.com/jQuery.ajax/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:56:06.887

`$.getJSON`异步执行，这意味着一旦它触发请求，函数调用就被认为是完整的，JavaScript 引擎将继续执行下一行代码：`str += '</table>'`.

您会收到两个警报，因为您在`alert`函数中调用了该函数，该函数`itemTemplate`本身被调用以返回在 中进行的`alert`函数调用的值`$(document).ready`。你的意思是打`alert`两次电话吗？

无论如何，就构建而言，您的意图似乎是`str`在完成后关闭表格标签`$.each`...

```
var k = 0,
    record_count = 0,
    col_count = 3,
    row_count = record_count / col_count,
    str = '<table>';

function itemTemplate() {
    var url = '<%: Url.Content("~/") %>' + "ProductListing/AllProductListing/0";
    $.getJSON(url, function (product) {
        $.each(product.ja, function (index, value) {
            //append rows and column to my table by concat the string of 'str'
        });
        str += '</table>';
        alert(str);
    });
}

$(document).ready(function () {
    itemTemplate();
}); 
```

# json - C# MVC4 Web API - 生成的 JSON 应该返回对象而不是 $ref 到对象

> ID：11237540
> 
> 赞同：9
> 
> 时间：2012-06-28T03:04:28.117
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api, ref

我有一个使用 EntityFramework for ORM 的 ASP.NET MVC 4 Web API 应用程序。

在我返回的 JSON 中，在某些情况下，多个父节点存在同一个子节点。在这些情况下，子节点的第一次出现对其所有成员都是完全可见的。任何后续出现都显示为第一次出现的 $ref。相反，我希望每次在返回的 JSON 中显示完整的对象。

例如，而不是看到：

```
 [{
    "$id": "1",
    "userId": 1,
    "Badge": {
        "$id": "2",
        "badgeId": 1,
        "badgeName": "Gold"
        }
    }, {
    "$id": "3",
    "userId": 2,
    "Badge": {
        "$ref": "2"
        }
    }] 
```

我倒要看看：

```
 [{
    "$id": "1",
    "userId": 1,
    "Badge": {
        "$id": "2",
        "badgeId": 1,
        "badgeName": "Gold"
        }
    }, {
    "$id": "3",
    "userId": 2,
    "Badge": {
        "$id": "4",
        "badgeId": 1,
        "badgeName": "Gold"
        }
    }] 
```

基本上我想摆脱 JSON 中的任何“$ref”。有办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:32:00.060

一种简单的方法是编辑生成的实体类代码。对于每个实体类，都会`[DataContract(IsReference=true)]`分配一个属性。

类似于以下内容：

```
[EdmEntityTypeAttribute(NamespaceName="YourNamespace", Name="YourEntity")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class YourEntity : EntityObject
{ 
```

将其更改为`IsReference=false`. 这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T08:53:19.957

在我的例子中，我使用的是实体模型，我只是为我的 .edmx 图表表中的一个唯一字段设置了一个实体键。

# mef - 如何使用 MEF 为每个线程创建单例实例

> ID：11237551
> 
> 赞同：1
> 
> 时间：2012-06-28T03:06:35.197
> 
> 标签：mef

我是 MEF 的新手。我正在开发 C# WPF 应用程序并将 Prism 与 MEF 一起使用。

请告诉我如何使用 MEF 为类的每个线程创建单个实例。

非常感谢 DJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:23:22.087

在当前版本的 MEF 中，您需要开发复杂的容器层次结构来满足此要求（每个线程单个）。由于您是 MEF 的新手，因此实施起来会非常棘手。这是一个链接，其中包含有关此的更多信息：

[http://codebetter.com/glennblock/2009/08/16/should-i-use-mef-for-my-general-ioc-needs/](http://codebetter.com/glennblock/2009/08/16/should-i-use-mef-for-my-general-ioc-needs/)

我相信新版 MEF（目前称为 MEF2）中的一个新选项将是如何处理对象实例化的更好选项。您可以在 BCL 博客或此处阅读有关它的更多信息：

[http://mef.codeplex.com/](http://mef.codeplex.com/)

# c# - 没有定义键 c#

> ID：11237552
> 
> 赞同：0
> 
> 时间：2012-06-28T03:06:44.990
> 
> 标签：c#, key

```
foreach (string myKey in mySortedList.Keys) 
```

为什么它说不包含定义键和扩展键。我可以知道为什么吗？我已经`using System.Collections.Generic;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:38:07.923

无论`mySortedList`实际是什么，它都没有属性`Keys`。编译器告诉你这么多。所以：

1.  确定类型`mySortedList`。
2.  转到 MSDN，查阅文档。
3.  利润。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:11:33.040

要么`mySortedList`不是 a要么`SortedList`没有从更原始的状态中拆箱。

```
var list = mySortedList as SortedList;

foreach (string myKey in list.Keys) { ... } 
```

* * *

[http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T05:37:11.113

也许一个例子会有所帮助。在下面的代码中，第一个 foreach 编译，但第二个没有。两者都基于相同的 SortedList 实例，但第二个将其转换为不支持 Keys 的不同类型。

```
 SortedList<string, string> sorted = new SortedList<string, string>();

        foreach (string s in sorted.Keys)
            Console.WriteLine(s);

        IEnumerable stillSorted = sorted as IEnumerable;

        foreaach (string t in stillSorted.Keys)
            Console.WriteLine(t); 
```

这是你的问题吗？如果您正在传递一个对象，请尝试自己投射它，如下例所示：

```
 SortedList<string, string> sorted = mySortedList as SortedList<string, string>;
        if (sorted != null)
            foreach (string s in sorted.Keys)
                Console.WriteLine(s); 
```

# c# - 关节之间的角度方向 Kinect sdk ver 1.5

> ID：11237554
> 
> 赞同：1
> 
> 时间：2012-06-28T03:06:53.340
> 
> 标签：c#, wpf, kinect

我正在开发一个使用 kinect for windows sdk ver 1.5 的 wpf 应用程序，其中支持关节方向。我计算了骨骼关节之间的角度，其中角度是基于父骨骼计算的，如附图所示，问题是角度的计算没有确定其方向的符号，无论是向上“+ve”还是“- ve" 向下，我需要检测到这一点或放置一个符号，例如 +ve 如果向上，-ve 如果向下，如附图所示，第一张图片显示角度 = 4，然后如果我向上移动，角度将为45，如果我向下移动角度将是 48 而不是 -48，我需要知道的是如何区分和移动方向，如果向上，角度将是 + 角度，如果向下，角度将是 -ve 角度。这是图片的链接"

[http://imageshack.us/photo/my-images/267/64483060.png](http://imageshack.us/photo/my-images/267/64483060.png)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:50:26.237

计算叉积。叉积的符号会给你方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:59:42.543

您应该向我们提供一些代码以查看问题所在。你用过 Math.Atan 吗？也许您应该改用 Math.Atan2。这两者之间存在一些范围差异。看一看：

[http://en.wikipedia.org/wiki/Arctangent](http://en.wikipedia.org/wiki/Arctangent)

[http://en.wikipedia.org/wiki/Atan2](http://en.wikipedia.org/wiki/Atan2)

# objective-c - 使用cocos2d设计射击游戏，无法调用stopGame方法

> ID：11237556
> 
> 赞同：-1
> 
> 时间：2012-06-28T03:07:01.560
> 
> 标签：objective-c, cocos2d-iphone

```
-(void)spriteMoveFinishedid)sender    //when sprite is outside of screen,it's deleted;
｛
     CCSprite *sprite = (CCSprite *)sender;
     if (sprite.tag == 1)    //it's enemy;
    {  
        escapeNum++;
       [self removeChild:sprite cleanup:YES];
        if (escapeNum == 10) 
        {
            [self stopGameEx];   //Because the speed of every enemy isn't same to other and there are bullets,it maybe happens that two sprites disappear at the same time, and the program stop at this with error --- program received signal：“EXC_BAD_ACCESS”。
        }
      //...........
    }
｝ 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:06:03.497

在 if 循环中，更改 sprite 标签以将其标记为过期的 sprite，并在其他地方删除。

```
enum
{
   kTagExpiredSprite = 999 //any number not ur sprite tag(1)
}; 
```

......

```
-(void)spriteMoveFinishedid)sender    //when sprite is outside of screen,it's deleted;
｛
     CCSprite *sprite = (CCSprite *)sender;
     if (sprite.tag == 1)    //it's enemy;
    {  
        escapeNum++;
       sprite.tag = kTagExpiredSprite;
        if (escapeNum == 10) 
        {
            [self stopGameEx];   //Because the speed of every enemy isn't same to other and there are bullets,it maybe happens that two sprites disappear at the same time, and the program stop at this with error --- program received signal：“EXC_BAD_ACCESS”。
        }
      //...........
    }
｝ 
```

# pandas - read_csv 上的 TypeError，在 pandas .7 中工作，在 .8.0rc2 中出错，可能的依赖错误？

> ID：11237557
> 
> 赞同：0
> 
> 时间：2012-06-28T03:07:25.240
> 
> 标签：pandas

我正在尝试在 python 中执行以下操作：

```
from pandas import *
tickdata = read_csv('/home/user/sourcefile.csv',index_col=0,parse_dates='TRUE') 
```

csv 文件的行如下所示：

```
2011/11/23 23:56:00.554389,1165.2500
2011/11/23 23:56:02.310943,1165.5000
2011/11/23 23:56:05.564009,1165.2500 
```

在 pandas .7 上，这执行得很好。在 pandas .8.0rc2 上，我收到以下错误。因为我在两个不同的系统上安装了 .7 和 .8，所以我没有排除依赖关系或 python 版本差异。任何关于如何让它在 0.8 下执行的想法都值得赞赏。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.0rc2-py2.7-linux-x86_64.egg/pandas/io/parsers.py", line 225, in read_csv
return _read(TextParser, filepath_or_buffer, kwds)

File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.0rc2-py2.7-linux-x86_64.egg/pandas/io/parsers.py", line 192, in _read
return parser.get_chunk()
File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.0rc2-py2.7-linux-x86_64.egg/pandas/io/parsers.py", line 728, in get_chunk
index = self._agg_index(index)
File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.0rc2-py2.7-linux-x86_64.egg/pandas/io/parsers.py", line 846, in _agg_index
if try_parse_dates and self._should_parse_dates(self.index_col):
File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.0rc2-py2.7-linux-x86_64.egg/pandas/io/parsers.py", line 874, in _should_parse_dates
return i in to_parse or name in to_parse
TypeError: 'in <string>' requires string as left operand, not int 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:42:19.197

我已经在 GitHub 上报告了这个错误（错误报告的最佳位置）：

[https://github.com/pydata/pandas/issues/1544](https://github.com/pydata/pandas/issues/1544)

今天或明天应该有一个决议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:11:36.133

我修复了您粘贴的堆栈跟踪中显示的解析器错误。但是，我想知道您的日期列是否被命名为“TRUE”，或者您的意思是只传递一个布尔值？我没有仔细研究过 pandas 的历史，但我知道在 0.8 中，我们支持更复杂的日期解析行为作为时间序列 API 的一部分，所以在这里我们将字符串值解释为列名。

# java - 我在哪里可以找到所有选择器 xml 属性，包括子属性？

> ID：11237560
> 
> 赞同：1
> 
> 时间：2012-06-28T03:07:31.950
> 
> 标签：java, android

我是android新手，最近遇到selector xml，发现selector可以包含“item”，在“item”中可以包含“shape”，“gradient”等等！我尝试搜索有关此的文档，但找不到。

任何人都知道我在哪里可以找到与 Selector 相关的所有 xml 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:14:30.413

请检查：

[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# css - 如何将超级鱼子菜单置于其父菜单的中心？

> ID：11237564
> 
> 赞同：0
> 
> 时间：2012-06-28T03:08:10.747
> 
> 标签：css, menu, superfish

我的网站上有一个超级鱼菜单。我正在尝试找到一种方法将子菜单置于其父级下方。右不是子菜单左对齐。

我的[网站](http://phpblog.inutritie.ro)

我的菜单CSS：

```
/* Custom Styles */
.sf-menu { float:left }
/* 1st level links, no hover, no visits */
.sf-menu li {
    }
.sf-menu li a {
    color:#3E4245;
    line-height:18px;
    text-decoration:none; 
    text-shadow:0 1px 0 #fff;
    margin:0;
    padding:6px 12px; 
}
/* 1st level links, hover */
.sf-menu li a:hover {
    color: #7B9EBB
    }
/* 1st level links, while hovering over sub menu */
.sf-menu li.sfHover a {
    color:#7B9EBB
    }
/* 1st level current page */
.sf-menu .current-menu-item a {
    color: #7B9EBB;
    }
.sf-menu .current-menu-item { 
    background:#fefefe; 

    border: 1px solid #ddd;
    border-color: rgba(0,0,0,.15); 

    border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px; 

    background: #f5f5f5;
    background: -moz-linear-gradient(100% 100% 90deg, #f5f5f5, #fff);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#fff), to(#f5f5f5));

    -moz-box-shadow: 0 1px 1px rgba(0,0,0,.03);
    -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.03);
    box-shadow: 0 1px 1px rgba(0,0,0,.03);
    }
/* 1st level down triangles with pure css*/
.sf-menu li .sf-sub-indicator {

}

/* Drop-down */
.sf-menu li ul {
    background: #fff; margin:5px 0 0; padding:10px 0 0; position: absolute; left: -999em; width: 180px; border: 1px solid #e3e3e3; z-index:9999; 
    }
.sf-menu li ul, .sf-menu li ul ul {
    background: #FFF;
    border: 1px solid #e3e3e3;
    /* Border Radius */
    border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px; 
    /* Box Shadow */
    -moz-box-shadow: 0 2px 2px rgba(0,0,0,.03);
    -webkit-box-shadow: 0 2px 2px rgba(0,0,0,.03);
    box-shadow: 0 2px 2px rgba(0,0,0,.03);  
    margin: 0; 
    padding:10px 0 0 0; 
    }
.sf-menu li ul ul { border-radius: 0 4px 4px 4px; -moz-border-radius: 0 4px 4px 4px; -webkit-border-radius: 0 4px 4px 4px; }
.sf-menu li ul ul {
    margin-top: -1px
    }
.sf-menu li li, .sf-menu li li li {
    border:0; 
    border-bottom: 1px solid #dedede
    }
.sf-menu li li:last-child, .sf-menu li li li:last-child {
    border-bottom: none
    }
.sf-menu li li a, .sf-menu li li li a { 
    padding: 8px 15px; 
    color: #666 !important; 
    font-size: 0.8em;
    }
.sf-menu li li a:hover, .sf-menu li li li a:hover { 
    font-weight: bold; 
    }
/* Drop-down Arrow */
.sf-menu li li:first-child { 
    background: url('../images/nav-indicator.png') no-repeat scroll center top transparent;
    margin-top: -18px;
    padding-top: 10px
    }
.sf-menu li li li:first-child { background: none } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:49:00.077

我建议在您的 superfish css 文件的第 29 行使用负左参数。

```
 .sf-menu li#menu-item-34:hover ul,
    .sf-menu li#menu-item-34.sfHover ul {
      left: -48px;
    }

    .sf-menu li#menu-item-21:hover ul,
    .sf-menu li#menu-item-21.sfHover ul {
          left: -64px;
     }

    .sf-menu li#menu-item-20:hover ul,
    .sf-menu li#menu-item-20.sfHover ul {
          left:4px;
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T11:18:47.877

在 SUPERFISH JS 中：

```
var $this = this.addClass(o.hoverClass),
$ul = $this.children(o.popUpSelector);

var mainbtn_w = this.width()/2;
var sub_w = $ul.width()/2;
$ul.css('left', "-"+(sub_w-mainbtn_w)+"px"); 
```

# arrays - 将数组值分配给 VBA 中的变量会导致我的 UDF 退出

> ID：11237567
> 
> 赞同：4
> 
> 时间：2012-06-28T03:08:32.793
> 
> 标签：arrays, excel, vba, range

我似乎无法弄清楚为什么这个 UDF 在`currentInput = inputArray(i)`. 以下是相关代码：

```
Function OrderRange(inputRange As Range) As Variant

    Dim length As Integer
    inputHeight = inputRange.Count

    Dim inputArray As Variant
    inputArray = inputRange

    Dim strippedArray() As Variant
    ReDim strippedArray(0 To (inputHeight - 1))

    Dim currentInput As String

    Dim i As Integer

    For i = 0 To (inputHeight - 1)

        currentInput = inputArray(i)
        '...computations on currentInput...'
        strippedArray(i) = currentInput
    Next i
    OrderRange = strippedArray
End Function 
```

调试器到达`currentInput = inputArray(i)`，但是一旦我移到下一行，函数就会终止，并且`#VALUE!`在我调用函数的单元格中输入了一个错误。我知道这是一个具体问题，但我确定这是一个普遍问题，我将编辑这篇原始帖子以反映一般问题是什么。

**编辑：**这是关于将范围分配给变量数组的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T04:41:17.490

通过将它们设置为等于范围创建的变体数组具有两个维度，即使它们只有一列或一行宽。因此，如果您使用 A1:A10 调用该函数，您将得到一个 10 * 1 数组。维度的下限也将是一，而不是零。因此，您必须执行以下操作：

```
For i = 1 To (inputHeight)
    currentInput = inputArray(i, 1) 
```

此外，您应该使用 Option Explicit 以便提醒您声明所有变量。InputHeight 永远不会被声明。

# c++ - 存放非静态成员函数的静态成员函数指针

> ID：11237569
> 
> 赞同：1
> 
> 时间：2012-06-28T03:08:41.983
> 
> 标签：c++

这打败了我。我想要一个静态类变量，它是一个指向（非静态）成员函数的指针。我尝试了各种方法，但没有运气（包括使用`typedef`s，这似乎给了我一组不同的错误）。在下面的代码中，我有静态类函数指针`funcptr`，我可以从类外部成功调用它，但不能从成员函数内部调用它`CallFuncptr`——这是我想要做的。有什么建议么？

```
#include <stdio.h>

class A
{
public:
  static int (A::*funcptr)();
  int Four() { return 4;};
  int CallFuncptr() { return (this->*funcptr)(); } 
      // doesn't link -  undefined reference to `A::funcptr'
};
int (A::*funcptr)() = &A::Four;

int main()
{
  A fred;
  printf("four? %d\n", (fred.*funcptr)());  // This works
  printf("four? %d\n", fred.CallFuncptr()); // But this is the way I want to call it
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:34:02.530

试试这个：

```
#include <iostream>

class A {
public:
    typedef int (A::*AMemFn)();
    static AMemFn funcptr;
    int Four() { return 4; }
    int CallFuncptr() { return (this->*funcptr)(); }
};

A::AMemFn A::funcptr = &A::Four;

int main()
{
    A fred;
    std::cout << "four? " << fred.CallFuncptr() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:41:52.183

jweyrich 有一个漂亮的工作（我建议你使用它），但我想我会详细说明代码中的真正问题是什么：

你的问题是这一行：

```
int (A::*funcptr)() = &A::Four; 
```

这是定义一个名为的全局变量`funcptr`，它的类型是正确的，而不是`A::funcptr`.

你需要的是这个烂摊子：

```
int (A::*(A::funcptr))() = &A::Four; 
```

这种丑陋的混乱就是为什么我建议你沿着 typedef 路径去获得一个像 jweyrich 解决方案这样漂亮的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T03:37:20.470

静态变量不是特定对象的成员——它只能通过类命名空间访问。CallFuncptr 应该重写： `int CallFuncptr() { return (*funcptr)();` 我认为应该可以，因为这个函数可以访问 A 的命名空间中的函数而无需指定它。

此外，与 C++ 相比，函数指针更像是 C 构造。您可以使用代码访问类外部的静态变量： `A::CallFuncptr` 因为 CallFunctptr 只是驻留在 A 的命名空间中

# api - Zend - 如何将值从 API（类）传递到控制器？

> ID：11237575
> 
> 赞同：0
> 
> 时间：2012-06-28T03:09:16.737
> 
> 标签：api, zend-framework, zend-form, zend-controller

如果我构建了一个自定义 API（类）并希望将从 API 调用中获得的值传递给我的控制器，我该怎么做？通常我在我的控制器中这样做：

```
$form = new Application_My_Form();
$model = new Application_My_Model($form->getValues()); 
```

但是由于我没有使用表单并且没有视图，那么如何将值从我的 API 发布/传递到控制器的操作？有没有更好的方法将一组值从我的 API 类传递到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:37:08.273

所以您的 API 是在您的 ZF 应用程序中构建的？你在你的 API 的控制器内吗？您可以使用访问输入参数

```
$params = $this->getRequest()->getParams(); 
```

这将为您提供所提供参数的关联数组。

# c# - WinForm 本地化文件夹到子目录

> ID：11237577
> 
> 赞同：0
> 
> 时间：2012-06-28T03:09:23.713
> 
> 标签：c#, localization

我正在本地化一个用 C# 编写的 Windows 窗体应用程序，当我将我的应用程序本地化为不同的语言时。Visual Studio 为每种语言创建文件夹，例如

\es-ES

\fr-FR 等

我想避免这种情况，因为在我的情况下，应用程序存在于用户的驱动器根 C:\ 或 E:\ 等我不想污染用户的驱动器。但是，我可以创建一个子文件夹，然后让所有垃圾都放在那里。

请告知我该怎么做。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:09:10.550

您始终可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)来获取一个可部署的文件。[此处](https://stackoverflow.com/questions/1952638/single-assembly-multi-language-windows-forms-deployment-ilmerge-and-satellite-a)提到了如何将 ILMerge 与卫星组件一起使用。

# c++ - 如何在没有 Objective-C 的情况下创建 NSAutoreleasePool？

> ID：11237579
> 
> 赞同：7
> 
> 时间：2012-06-28T03:09:28.533
> 
> 标签：c++, objective-c, c, macos

我有用 C++ 编写的多平台游戏。在 mac 版本中，即使我没有任何 obj-c 代码，我使用的库之一似乎是自动释放的东西，并且我因此而出现内存泄漏，因为我没有创建 NSAutoreleasePool。

我想要的是能够在不使用 obj-c 代码的情况下创建（和销毁）一个 NSAutoreleasePool，所以我不需要创建一个 .m 文件，并为此更改我的构建脚本。那可能吗？怎么可能呢？

OBS：标记为 C 和 C++，因为任何这些语言的解决方案都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:45:16.597

你无法避免实例化 Objective-C 运行时——但显然你已经拥有了其中之一。

如果您想从 C 与运行时交互，您可以使用 Objective-C 运行时 API，如[Objective-C 运行时编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008048)和[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)中所述。

这个想法是这样的（未经测试）：

```
#include <objc/runtime.h>
#include <objc/objc-runtime.h>
id allocAndInitAutoreleasePool() {
  Class NSAutoreleasePoolClass = objc_getClass("NSAutoreleasePool");
  id pool = class_createInstance(NSAutoreleasePoolClass, 0);
  return objc_msgSend(pool, "init");
}
void drainAutoreleasePool(id pool) {
  (void)objc_msgSend(pool, "drain");
} 
```

如果你想从另一个文件调用这些函数，当然你也必须在其中包含 objc/runtime.h。或者，或者，您可以在 allocAndInit 函数的返回中将 id 强制转换为 void*，然后在 drain 函数中获取 void* 并强制转换回 id。（您也可以前向声明 struct objc_object 和 typedef struct objc_object *id，但我相信这实际上并不能保证是正确的定义。）

您不必在链接命令中传递 -lobjc 。

不用说，仅仅让构建脚本处理 .m 文件可能会减少工作量。

# javascript - 为什么Firefox中的背景不会改变，但会在ie中改变

> ID：11237580
> 
> 赞同：0
> 
> 时间：2012-06-28T03:10:04.320
> 
> 标签：javascript, asp.net

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link id="csslink" href="Handler.ashx" rel="stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input id="Button1" type="button" value="Blue" />
        <input id="Button2" type="button" value="Red" />
    </div>
    </form>
    <script type="text/javascript">
        var pageDefault = {
            btn1: document.getElementById('Button1'),
            btn2: document.getElementById('Button2'),
            csslink: document.getElementById('csslink'),
            init: function() {
                this.btn1.onclick = function() {
                    pageDefault.csslink.href = "Handler.ashx?id=1";
                }
                this.btn2.onclick = function() {
                    pageDefault.csslink.href = "Handler.ashx?id=2";
                }
            }
        }
        pageDefault.init();
    </script>
</body>
</html> 
```

这是 ashx ProcessRequest

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        var id = context.Request.QueryString["id"];

        if (id == "1")
        {

            context.Response.Write(@"
body
{
  background: Blue;
}  

");
        }
        else if (id == "2")
        {
            context.Response.Write(@"
body
{
  background: Red;
}  

");
        }
        else
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:48:17.197

```
 context.Response.ContentType = "text/css"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:21:59.547

尝试使用：

```
body
{
    /* Red */
    background-color: #ff0000;
}

body
{
    /* Blue */
    background-color: #0c00ff;
} 
```

# javascript - IE右键删除事件或者

What event is fired when you right-click on selected text in an  or `<textarea></code> tag and then click "Delete" in Interne</h1> <blockquote> <p>ID：11237583</p> <p>赞同：1</p> <p>时间：2012-06-28T03:10:17.840</p> <p>标签：javascript, internet-explorer, dom, dom-events</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-07-11T17:45:09.110</p> </blockquote> <p>正如 Ravi 在上面的评论中所写，这是一个已知问题。<a href="http://msdn.microsoft.com/en-us/library/ie/gg592978(v=vs.85).aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/ie/gg592978(v=vs.85).aspx</a></p> </body> </html></textarea>`

# python - 从内部线程杀死python线程的方法？

> ID：11237585
> 
> 赞同：1
> 
> 时间：2012-06-28T03:10:45.507
> 
> 标签：python, multithreading

我有一些 python 代码目前通过许多线程并行执行计算来执行昂贵的计算。在给定的时间段内，许多线程被动态创建和启动，它们共享相同的代码，这些代码在线程的 run 方法中明确说明。我的问题是如何在其运行方法结束时停止/杀死一个线程？（运行只调用一次）我需要这样做以便为下一批计算创建更多线程。

```
#Example

class someThread(threading.Thread):
    def __init__(self):
        #some init code
    def run(self):

        #Explicitly Stated Code without constant loops

        #Something performed to stop/kill this thread 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T05:35:25.137

您需要向主线程发出工作线程已完成的信号，然后调用[`join`](http://docs.python.org/library/threading.html#threading.Thread.join)该线程。

# selenium - selenium 驱动程序在新窗口弹出时关闭

> ID：11237588
> 
> 赞同：0
> 
> 时间：2012-06-28T03:10:54.050
> 
> 标签：selenium, webdriver

我运行测试

首先，我登录并关闭窗口并打开一个新窗口。

但测试失败了。

它显示无法获取浏览器（NoSuchDriver）。

这是否意味着我的驱动程序已关闭？

如何解决？

# php - 使用php将日期和时间转换为时间戳的最佳方法是什么？

> ID：11237596
> 
> 赞同：0
> 
> 时间：2012-06-28T03:12:32.697
> 
> 标签：php, timestamp, strtotime

我需要使用 php 将日期和时间 (GMT) 转换为时间戳。以下代码显示了我当前正在使用的内容：

```
<?php
$date="2012-06-29 10:50";
$timestamp = strtotime($date);
echo $timestamp;
?> 
```

但是，当我在在线转换器 (http://www.epochconverter.com) 中测试时间戳时，结果日期是 2012 年 6 月 29 日，格林威治标准时间 8:50 或 2 小时前。strtotime() 函数是否可能并不完全准确，而只是对时间的估计？如果是这样，我可以使用更好的方法来获取确切的时间吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:28:20.240

`strtotime`假设您正在转换服务器本地时间的字符串，因此如果服务器时区超出两个小时，则结果将是一样的。

[手册](http://php.net/strtotime)中的评论提出了几个解决方案，您可以将 UTC 附加到您的日期：

```
$timestamp = strtotime($date.' UTC'); 
```

或者您可以更改脚本的默认时区（这将适用于所有其他时间函数！）：

```
date_default_timezone_set('UTC');
$timestamp = strtotime($date); 
```

作为最后一种选择，您可以尝试[`date_create_from_format`](http://php.net/manual/en/datetime.createfromformat.php)使用它来指定字符串的确切格式：

```
$datetime = date_create_from_format('Y-m-d H:i', $date, new DateTimeZone('UTC'));

$timestamp = date_format($datetime, 'U');
// Alternatively (thanks Herbert) - 5.3+ only
$timestamp = date_timestamp_get($datetime); 
```

# authorize.net-cim - cimi和cim有什么区别

> ID：11237598
> 
> 赞同：0
> 
> 时间：2012-06-28T03:12:44.553
> 
> 标签：authorize.net-cim

我正在阅读 dmtf.org 上的一些文章。但我对一些概念感到困惑。什么是云基础设施管理接口 (CIMI)？我没有找到CIMI逻辑模型的定义。什么是通用信息模型（CIM）？以及它们之间的关系是什么？

有人帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:07:37.573

DMTF 的 CIMI 标准定义了 RESTful 协议和云基础设施管理模型；两者都在[DSP0263](http://www.dmtf.org/sites/default/files/standards/documents/DSP0263_1.0.pdf)中定义。

DMTF 的 CIM 标准是一个更广泛的 IT 管理模型，它被定义为一种称为 MOF 的语言中的“CIM 架构”，并且在此之上使用所谓的管理配置文件，该配置文件使用 CIM 架构中的类用于特定目的.

为简单起见，CIMI 标准已被定义为不使用 CIM 标准，而是独立工作。但是，还有一个 CIMI 到 CIM Schema 的映射，它在[DSP0264](http://www.dmtf.org/sites/default/files/standards/documents/DSP0264_1.0.pdf)中定义。这提供了一种使用 CIM 技术实现 CIMI 逻辑模型的替代方法。

因此有两种独立的方式来实现和使用 CIMI： 1\. 独立的，如 DSP0263 中定义的那样。如果您想要简单，这是您的选择。2\. 通过 CIM 技术，如 DSP0264 和 CIM Schema 中所定义。如果您已经投资于 CIM 技术并希望利用它，那么这是您的选择。

CIMI 的特定实现可以选择一个，甚至可以同时实现两者。

请注意，CIM 允许管理的领域不仅仅是云。热门领域包括存储（SMI-S，由 SNIA 定义）、服务器（SMASH，由 DMTF 定义）、系统虚拟化（VMAN，由 DMTF 定义）、桌面（DASH，由 DMTF 定义）。

安迪

# javascript - Javascript回调函数不起作用

> ID：11237602
> 
> 赞同：0
> 
> 时间：2012-06-28T03:13:37.033
> 
> 标签：javascript, jquery, jquery-ui, raphael

我正在使用这个函数来存储动画函数，并为顺序动画一一调用。

我不确定下面的代码中缺少什么。我希望它是一个回调函数。

目前这个方法只运行一次。

```
function treasure(){

    var blinky = function ()
    {
        if (funqueue.length > 0)
        {
            ((funqueue.shift())(), blinky);
        }
        else { return }

    }
     blinky();

} 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:30:33.797

如果它打算作为回调，它应该在调用括号内而不是之后传递。（另外，额外的环绕括号并不是真正必要的。）

```
funqueue.shift()(blinky); 
```

照原样，它只是[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)`blinky`的第二个值，它没有任何反应。

而且，如果它不是回调，而只是需要在 中的每个函数之后调用`funqueue`，那么只需：

```
funqueue.shift();
blinky(); 
```

# c++ - gtkmm 树模型添加行

> ID：11237606
> 
> 赞同：3
> 
> 时间：2012-06-28T03:14:13.863
> 
> 标签：c++, gtk, gtkmm

我对这个 ListStore 在本教程中的工作方式感到有些困惑[http://developer.gnome.org/gtkmm-tutorial/3.0/sec-treeview-examples.html.en](http://developer.gnome.org/gtkmm-tutorial/3.0/sec-treeview-examples.html.en)

除了 row[m_Columns.m_ITEM] = value 之外，我几乎了解所有内容

我的问题是它如何知道根据传递给重载 [] 的其他对象将值设置为行中的哪一列。它只是检查类型是否相同？如果是这样，那么如果您有两个相同类型的列会发生什么？它是否根据内存偏移量来确定它是哪一列？

我很难弄清楚它是如何从提供 m_Columns 实例的成员到弄清楚它应该将值放入哪一列的。

我想如果我可以让某人解释一下内部如何在树模型系统上工作，那就太好了，比如创建时会发生什么，然后添加新行的每个步骤等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:33:24.993

有一些模板诡计正在发生。数组运算符 in`TreeRow`为 的每个实例化而重载`TreeModelColumn<ColumnType>`。为了允许您分配给列以及读取它，它返回一个`TreeValueProxy<ColumnType>`实际实现这些操作的代理对象 ()。代理对象是实现类数组对象的标准 C++ 技术。代理包含对其用于执行实际工作 的相关对象`TreeRow`和 对象的引用。`TreeModelColumn<ColumnType>`

该`TreeModelColumn<ColumnType>`对象还存储了与列的`gobject`类型对应的类型，以及与列位置对应的整数。这最终用于与以`TreeRow::set_value<ColumnType>()`和开头的 gtk+ 库进行交互`TreeRow::get_value<ColumnType>()`。

如果您想要杂乱的细节，要查看的源文件是 [TreeRow](http://git.gnome.org/browse/gtkmm/tree/gtk/src/treeiter.hg)和[TreeModelColumn](http://git.gnome.org/browse/gtkmm/tree/gtk/gtkmm/treemodelcolumn.h)。

# facebook - 如何为没有应用程序或应用程序密码的页面获取 Facebook 访问令牌

> ID：11237610
> 
> 赞同：6
> 
> 时间：2012-06-28T03:14:41.230
> 
> 标签：facebook, graph, token

我正在尝试从另一个网站的 Facebook 页面自动显示墙贴。我可以使用 Graph API explorer 手动获取一个。当我在我的代码中使用生成的令牌时，一切都很好。问题是令牌很快过期。一天多次获取新代码是不切实际的。我知道有一种以编程方式请求访问令牌的方法——在我的例子中是通过 PHP，但所有示例都需要应用程序机密。由于这是一个页面而不是应用程序，因此没有秘密。

我试过这个：

[https://graph.facebook.com/oauth/authorize?type=user_agent&client_id=MY_CLIENT_ID&redirect_uri=http%3A%2F%2FMY_SITE_URL&scope=user_status](https://graph.facebook.com/oauth/authorize?type=user_agent&client_id=MY_CLIENT_ID&redirect_uri=http%3A%2F%2FMY_SITE_URL&scope=user_status)

我得到的是这样的：

{ "error": { "message": "验证应用程序时出错。由于系统错误，无法获取应用程序信息。", "type": "OAuthException", "code": 101 } }

我曾尝试使用 Fiddler 拦截来自 Graph API 资源管理器的调用，以查看我的代码文件中需要什么，但没有任何运气。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T04:59:52.167

1.  使用 app-id 建立此链接以授权管理页面 [https://www.facebook.com/dialog/oauth?client_id=MY_CLIENT_ID&redirect_uri=MY_SITE_URL&scope=manage_pages&response_type=token](https://www.facebook.com/dialog/oauth?client_id=MY_CLIENT_ID&redirect_uri=MY_SITE_URL&scope=manage_pages&response_type=token)

2.  perm 的交换令牌（更长的令牌）
    [https://graph.facebook.com/oauth/access_token?client_id=MY_CLIENT_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=](https://graph.facebook.com/oauth/access_token?client_id=MY_CLIENT_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=(from) （来自link1）

3.  访问此页面，找到您要发布的页面并复制新的 access_token [https://graph.facebook.com/me/accounts?access_token=](https://graph.facebook.com/me/accounts?access_token=)（来自链接2）

4.  使用最后一个令牌（表单链接 3）作为应用发布到页面

5.  ~~请注意，因为它将在 60 天内到期。（FB 不再提供无限制的离线访问令牌）~~

~~**编辑（2013 年 10 月 24 日）：**第 5 点不再正确，从长期用户令牌生成的页面访问令牌不会过期。~~

**编辑（2016 年 2 月）：**令牌现在“通常”在 60 天内到期，但可以随时失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:04:45.440

对于非私有（公共）的图形对象，您可以使用您的 app_id 作为 access_token。

您的 app_id 永远不会更改，因此您不必更新它。问题是墙的内容是你的吗？

如果是这样，您可以轻松地使用您的`app_id`来完成此操作，而无需每次都请求访问令牌。

但是，为了拥有 app_id，您需要使用 facebook 开发者帐户在 facebook 上创建一个应用程序。据我了解，没有办法匿名向 Graph API 发出请求，

# wordpress - Wordpress 循环：在特定帖子编号之后插入内容

> ID：11237613
> 
> 赞同：0
> 
> 时间：2012-06-28T03:15:34.787
> 
> 标签：wordpress, post, loops, count

我想知道是否有办法在我的自定义帖子循环中的特定帖子编号之后插入一块内容。

本质上，我想说：

在最近的 2 次之后，插入此代码块。

如果可以做到，我也很想知道这样的事情是否可以实现：

启动排除特定帖子格式（或类别）的自定义帖子循环，但在每 2 个帖子之后，插入 1 个排除的帖子格式。

感谢您的任何帮助。

```
 <!-- #STICKY-POSTS |begin| -->
    <section id="sticky-posts">

    <?php
        $args = array( 'post_type' => 'portfolio', 'posts_per_page' => 2, 'cat' => '8' );
        $custom_query = new WP_Query( $args);
        while($custom_query->have_posts()) : $custom_query->the_post();

            get_template_part('format', 'standard');

        endwhile;
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:03:34.063

做这样的事情：

```
<!-- #STICKY-POSTS |begin| -->
<section id="sticky-posts">

<?php
    $args = array( 'post_type' => 'portfolio', 'posts_per_page' => 2, 'cat' => '8' );
    $custom_query = new WP_Query( $args);
    $x = 0;
    while($custom_query->have_posts()) : $custom_query->the_post();
        if($x==2) {
        display your thing here.
        $x=0;
        }
        get_template_part('format', 'standard');
        $x++
    endwhile;
?> 
```

除非我搞砸了，否则 x=0 将在第一个普通帖子中变为 1，在第二个普通帖子中变为 2，然后在 if 语句中返回 true，回到 0 并重复冲洗。

# c# - 有没有像 linq to sql 设计器这样的控件的库

> ID：11237614
> 
> 赞同：1
> 
> 时间：2012-06-28T03:15:57.137
> 
> 标签：c#, .net, winforms

我现在正在做一个项目，我需要让用户创建一些映射，我喜欢 LINQ TO SQL DESIGNER 的工作方式，我想知道是否有人知道任何具有类似控件的控件库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:03:09.603

我发现（并个人使用）的最好的是[LightSpeeds](http://www.mindscapehq.com/products/lightspeed)。

您可以在此处阅读有关[从 Linq 迁移到 SQL 再到 Lightspeed 的](http://www.mindscapehq.com/blog/index.php/2010/01/14/moving-from-linq-to-sql-to-lightspeed/)更多信息。就像将 Linq2SQL 模型拖放到 Lightspeed 上一样简单！无需转换！！对于 8 个实体以下的模型，它也是免费的。

*该公司由 NZ MSFT 区域总监 (Jeremy) 和另一位 MVP (Daniel-John) 经营。我相信这个设计师是从 Ivan Tollson 的原作中发展而来的——研究他早期的一些作品可能会为您提供源代码。仅供参考：Lightspeed 支持论坛很有名——你会明白为什么！*

# c++ - 如何旋转树或 AVL 树？

> ID：11237618
> 
> 赞同：3
> 
> 时间：2012-06-28T03:16:51.160
> 
> 标签：c++, algorithm, data-structures, avl-tree

很抱歉再次打扰你们，但我有一个问题，我已经好几天没有自己弄清楚了。它是关于treap 的旋转，例如，在pos 处右旋treap。问题是如何链接（或连接）`pos->left`到`pos`的原始父级？我在网上找到了这段代码，它有效，但我没有看到它是如何解决我的问题的，是因为使用了`*&`? 如果是这样，你能帮我解释一下吗？`pos=b`这段代码的作用是什么？

```
void Treap::right_rotate(Node *&pos) {
    Node *b   = pos->left; 
    pos->left = b->right;
    b->right  = pos;
    pos       = b;
} 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T04:27:15.310

棘手的部分确实是`*&`部分。这将其声明为对指针的引用（这里有一个或[两个](http://www.codeproject.com/Articles/4894/Pointer-to-Pointer-and-Reference-to-Pointer#4)[链接](http://msdn.microsoft.com/en-us/library/1sf8shae%28v=vs.80%29.aspx)到一些类似的示例代码，但我担心它们可能比有用更令人困惑）。

通过更改指针指向的节点`pos = b`，您可以将内容交换到不同的节点，而无需知道父节点。原始参考被更新为新的旋转节点。

这是一个图表，以防万一您需要对旋转的外观有点矫枉过正（尽管听起来您理解那部分）。

初始条件：

```
Node *&pos; 

         |
        [P]
      /     \
     L       R
    / \     / \ 
   w   x   y   z 
```

然后存储左孩子，因为就 P 而言，您将要覆盖它。

```
Node *b = pos->left;
pos->left = b->right;

           |
    L     [P]
  /  \   /   \
 w     x      R
             / \ 
            y   z 
```

现在我们完成了旋转，因为 L 在空间中浮动，破坏了正确的树结构：

```
b->right = pos;

        L     
      /  \ |
     w    [P]
         /   \
        x     R
             / \ 
            y   z 
```

然后我们通过将节点指针的引用更新为替换内存中该位置内容的新节点来完成维护：

```
pos = b;

       |
      [L]     
     /   \
    w      P
         /   \
        x     R
             / \ 
            y   z 
```

之前指向`pos`(`pos`的原始父级) 的人现在指向内存中的同一位置，但该值现在已替换为已旋转的子级。

# algorithm - 保留的概念

> ID：11237619
> 
> 赞同：3
> 
> 时间：2012-06-28T03:16:52.737
> 
> 标签：algorithm, concept

我有一个问题，如果你能帮助我一些想法，我将不胜感激。

在在线酒店或机票预订系统中，通常会为用户分配一个特定的时间来完成他们的注册/付款等，并且在此期间系统会为该用户保留预订。如果用户在此期间无法完成注册，系统将超时，不允许用户继续进行任何操作。系统为其他用户取消保留。

我的问题是，如果用户被带到支付网关系统（贝宝等）并且他们将所有分配/保留时间都花在支付页面上，并且在成功支付后他们返回到站点，系统还会即使用户用完了分配的时间，也允许他们完成预订？

这在典型的预订系统中是如何工作的？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:53:36.340

如果您使用与支付网关的同步连接，那么一旦启动支付流程，预订状态应该会发生变化，例如“付款待定”。如果支付网关响应失败（或您有超时），您将其报告给用户，是否延长会话时间取决于您。

如果您使用异步连接，例如将用户重定向到 PayPal 页面并等待回复，那么您可能需要考虑授权而不是付款：如果用户在会话时间之后被重定向回您的站点限制已过，取消授权并通知用户他们花费的时间太长，需要重新开始。如果他们在他们的时限内，告诉 PayPal 完成交易并确保您收到您的钱。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:03:22.533

你的销售算法必须有一些智能。就像推销员试图达成交易一样。

他会知道这是一位老太太，这可能需要一段时间，但当她下定决心时，她会全额付款。

或者他是一个脾气暴躁的老人，总是说支票在邮局。

计算机只能在没有相遇或理解的情况下做出最好的猜测。

因此，您的最佳猜测将基于过去的响应并允许适当的超时。例如，监控您网站上表格的平均输入时间。由于互联网连接缓慢，可能会模拟一个老人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:59:31.477

使用贝宝，您可以进行付款授权。这将使客户贝宝帐户中的资金暂停。

在授权之后，它将被发送回您的系统，并带有交易 ID。然后您可以检查预订是否已超时。

如果是这样，您可以通知用户它已经超时并且他们没有被收费。然后，您使用交易 ID 取消交易以释放他们的资金

如果它没有超时，那么您可以捕获资金。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_authcapture](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_authcapture)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:26:41.427

系统应该让您支付预订费用，应该会弹出一些警告。如果您成功付款，那么您可能需要出示一些显示您已付款的机票，因此公司要么退还您的付款，要么给您房间。

每一点都应该以预期的方式考虑，这是你应该关心的工作，而不是你设计算法的方式。

想一想，如果您超过截止日期交付一些工作会发生什么。

# git - 我使用 git reset --soft HEAD^ 来保持我的状态，然后提交。所以每次如果我想提交，我应该使用 git reset --soft HEAD^ 吗？

> ID：11237620
> 
> 赞同：2
> 
> 时间：2012-06-28T03:17:07.267
> 
> 标签：git

其实我不确定，我每次都遵循 git amend 方法。这是好习惯吗？如果不是，为什么 git amend 不好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T03:27:48.593

不，“每次”**都不**`git commit --amend`是一个好习惯。它将您当前的更改与先前提交的更改合并。你最终会得到一个巨大的提交，并且没有任何提交历史。您应该进行大量细微的更改，以便真正跟踪功能的演变和错误的引入。

 **Using`git reset --soft HEAD^`在效果上或多或少相同：您将分支指针移动到上一个提交，但保持工作目录状态不变，然后使用您引入的所有更改进行单个大型提交。

每次提交时使用任一命令都会留下一个包含迄今为止的整个项目的提交。这样做绝对没有充分的理由，而且这是使用版本控制的完全错误的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T03:34:19.497

```
git reset --soft HEAD^ 
```

将有效地回到您上次提交之前的状态，但将您的更改保留在索引中（就像您已经完成了 git add，但还没有完成 git commit）

不要`git commit --ammend`每次，这只会不断修改你的最后一次提交。您希望将更改保留为有意义的更改集。**

# cocoa - 使用 Autolayout 扩展 NSTextViews

> ID：11237622
> 
> 赞同：25
> 
> 时间：2012-06-28T03:17:37.763
> 
> 标签：cocoa, osx-lion, nstextview, autolayout

我的应用程序由一个`NSScrollView`其文档视图组成，其中包含许多垂直堆叠的`NSTextViews`- 每个都在添加文本时在垂直方向上调整大小。

目前，这一切都在代码中进行管理。`NSTextViews`自动调整大小，但我用 观察它们的大小，重新计算它们的`NSViewFrameDidChangeNotification`所有原点以使它们不重叠，并调整它们的超级视图（滚动视图的文档视图）的大小，以便它们都适合并且可以滚动到。

这似乎是自动布局的完美候选者！我`NSLayoutConstraints`在第一个文本视图及其容器、最后一个文本视图及其容器以及每个文本视图之间进行设置。然后，如果任何文本视图增长，它会自动“下推”它下面的文本视图的起源以满足约束，最终增加文档视图的大小，每个人都很高兴！

除了，似乎没有办法`NSTextView`在基于约束的布局中添加文本时自动增长？使用与之前输入的文本自动扩展的完全相同`NSTextView`的内容，如果我没有为其高度指定约束，它默认为 0 并且不显示。如果我确实指定了一个约束，即使是 >=20 之类的不等式，它也会停留在该大小上，并且不会随着添加文本而增长。

我怀疑这与 NSTextView 的实现有关`-intrinsicContentSize`，默认情况下返回`(NSViewNoInstrinsicMetric, NSViewNoInstrinsicMetric)`.

所以我的问题是：如果我根据文本的布局进行子类化`NSTextView`以返回更有意义`intrinsicContentSize`的内容，那么我的自动布局会按预期工作吗？

`intrinsicContentSize`关于实现垂直调整大小的 NSTextView 的任何指针？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-22T23:15:33.347

我正在做一个非常相似的设置——一个包含文本视图的垂直堆栈视图，这些视图可以扩展以适应其文本内容并使用自动布局。

到目前为止，我不得不子类化`NSTextView`，这感觉不干净，但在实践中效果很好：

```
- (NSSize) intrinsicContentSize {
    NSTextContainer* textContainer = [self textContainer];
    NSLayoutManager* layoutManager = [self layoutManager];
    [layoutManager ensureLayoutForTextContainer: textContainer];
    return [layoutManager usedRectForTextContainer: textContainer].size;
}

- (void) didChangeText {
    [super didChangeText];
    [self invalidateIntrinsicContentSize];
} 
```

奇怪的是，添加时文本视图的初始大小`addSubview`不是固有大小；我还没有弄清楚如何发出第一个失效（挂钩`viewDidMoveToSuperview`没有帮助），但我相信我最终会弄明白的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T16:56:20.430

我在使用 NSTextField 时遇到了类似的问题，结果证明这是由于视图想要沿垂直方向紧紧地拥抱其文本内容。因此，如果您将内容拥抱优先级设置为低于其他约束的优先级，它可能会起作用。例如：

```
[textView setContentHuggingPriority:NSLayoutPriorityFittingSizeCompression-1.0 forOrientation:NSLayoutConstraintOrientationVertical]; 
```

在 Swift 中，这将是：

```
setContentHuggingPriority(NSLayoutConstraint.Priority.fittingSizeCompression, for:NSLayoutConstraint.Orientation.vertical) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-19T06:31:18.970

以下是如何在 Swift 3 中使用 Auto Layout 制作扩展的 NSTextView[![在此处输入图像描述](../Images/cb0fe7c2d91e98dbbcb6aa4e4ace1213.png)](https://i.stack.imgur.com/vHhdI.gif)

*   我使用[Anchors](https://github.com/onmyway133/Anchors)进行自动布局
*   使用`textDidChange`从`NSTextDelegate`. `NSTextViewDelegate`符合`NSTextDelegate`
*   这个想法是`textView`有`edges`约束的，这意味着每当它`intrinsicContentSize`发生变化时，它将扩展其父级，即`scrollView`

    ```
    import Cocoa
    import Anchors

    class TextView: NSTextView {
      override var intrinsicContentSize: NSSize {
        guard let manager = textContainer?.layoutManager else {
          return .zero
        }

        manager.ensureLayout(for: textContainer!)

        return manager.usedRect(for: textContainer!).size
      }
    }

    class ViewController: NSViewController, NSTextViewDelegate {

      @IBOutlet var textView: NSTextView!
      @IBOutlet weak var scrollView: NSScrollView!
      override func viewDidLoad() {
        super.viewDidLoad()

        textView.delegate = self

        activate(
          scrollView.anchor.top.constant(100),
          scrollView.anchor.paddingHorizontally(30)
        )

        activate(
          textView.anchor.edges
        )
      }

      // MARK: - NSTextDelegate
      func textDidChange(_ notification: Notification) {
        guard let textView = notification.object as? NSTextView else { return }

        print(textView.intrinsicContentSize)
        textView.invalidateIntrinsicContentSize()
      }
    } 
    ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-12T13:36:47.467

类准备复制和粘贴。斯威夫特 4.2，macOS 10.14

```
class HuggingTextView: NSTextView, NSTextViewDelegate {

    //MARK: - Initialization

    override init(frame: NSRect) {
        super.init(frame: frame)
        delegate = self
    }

    override init(frame frameRect: NSRect, textContainer container: NSTextContainer?) {
        super.init(frame: frameRect, textContainer: container)
        delegate = self
    }

    required init?(coder: NSCoder) {
        super.init(coder: coder)
        delegate = self
   }

    //MARK: - Overriden

    override var intrinsicContentSize: NSSize {
        guard let container = textContainer, let manager = container.layoutManager else {
            return super.intrinsicContentSize
        }
        manager.ensureLayout(for: container)
        return manager.usedRect(for: container).size
    }

    //MARK: - NSTextViewDelegate

    func textDidChange(_ notification: Notification) {
        invalidateIntrinsicContentSize()
    }

} 
```

# coffeescript - 如何在咖啡脚本中将命名函数作为参数传递

> ID：11237623
> 
> 赞同：0
> 
> 时间：2012-06-28T03:17:38.880
> 
> 标签：coffeescript

我希望 javascript 代码是

```
someFunction(42, function onSuccess() {}, function onFailure() {}) 
```

请注意，在定义 onSuccess 和 onFailure 时，我想命名它们（不是因为它是必需的，而是因为它记录了代码）。但是，我无法让咖啡脚本生成此代码。

对于匿名函数传递，我可以做

```
someFunction(42,
->
// onsuccess code
->
// onfailure code
) 
```

但是当我试图给这些函数起名字时，它并没有像预期的那样翻译成 Javascript

```
someFunction(42,
onSuccess : ->
// onsuccess code
onFailure : ->
// onfailure code
) 
```

翻译成

```
someFunction(42, { onSuccess : function () {}, onFailure : function () {} }) 
```

再试一次

```
someFunction(42,
onSuccess ->
// onsuccess code
onFailure ->
// onfailure code
) 
```

翻译成

```
someFunction(42, onSuccess(function () {}), onFailure(function () {})) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:47:00.583

在 CoffeeScript 中创建命名函数的唯一方法是使用`class`：

```
someFunction 42,
  class onSuccess
    constructor: ->
  class onFailure
    constructor: -> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:23:21.530

这行得通吗？

```
someFunction 42, (onSuccess = -> ), onFailure = -> 
```

[http://jsfiddle.net/keith_nicholas/Qdzph/](http://jsfiddle.net/keith_nicholas/Qdzph/)

生成..

```
somefunction(42, (onSuccess = function() {}), onFailure = function() {}); 
```

此外，这可能是有趣的[http://kangax.github.com/nfe/](http://kangax.github.com/nfe/)

而且，在咖啡脚本常见问题解答中，它谈到了为什么不能生成命名函数：-

[https://github.com/jashkenas/coffee-script/wiki/FAQ](https://github.com/jashkenas/coffee-script/wiki/FAQ)

# c++ - 内存泄漏和代码性能

> ID：11237625
> 
> 赞同：2
> 
> 时间：2012-06-28T03:18:26.800
> 
> 标签：c++, memory-leaks

修复内存泄漏是件好事，但我想知道除了内存问题之外，内存泄漏修复是否也有助于提高性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:20:43.433

一般来说，是的。主要原因是由于内存泄漏，您的程序将不断地从系统中获取新的内存，而这些内存不会在缓存中。如果您正确释放内存，您很快就会获得相同的内存，并且它已经在缓存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:32:32.967

好吧，内存泄漏实际上以某种方式提高了性能，因为您可以节省释放它们的时间 XD。但是当然，当可用内存不足时，您的系统肯定会遇到某种性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:21:25.743

没有明显的方式，很可能。它可能会稍微提高缓存性能。如果您的系统在几乎没有可用内存的情况下运行，它*也可能会*产生性能差异，但您几乎肯定会在系统中遇到更大、更明显的性能瓶颈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:32:21.643

这在很大程度上取决于您的代码。例如，delete 正在调用对象的析构函数（除了花费时间来释放内存），这可能很耗时，具体取决于析构函数的代码。另一方面，缓存未命中与小对象相关，而页面错误与非常大的对象相关，因此避免内存泄漏也可以显着提高性能。

也就是说，性能优化很可能比这要低得多。

# javascript - 带有 PhantomJs 和 CasperJs 的 injectJs

> ID：11237628
> 
> 赞同：9
> 
> 时间：2012-06-28T03:18:48.667
> 
> 标签：javascript, web-scraping, phantomjs, casperjs

我正在尝试使用 CasperJS 来抓取一个具有动态内容的网站，但到目前为止都失败了。该网站使用几个 js 库（例如 Prototype）来使用自动完成来创建内容。因此，我试图插入一些值并触发事件来启动内容创建。插入和触发事件可以正常工作，但不会创建任何内容。

我是 CasperJS 的新手，发现它与库的相对路径存在问题。我怀疑我的问题是由于在我的页面环境中没有正确加载库引起的。因此，我尝试`injectJs`像这样使用注入它们

> // ... 创建 casper 并做一些其他的事情
> 
> casper.then（函数（）{
> 
> ```
> this.echo(this.page.injectJs('http://www.my-website.com/path/to/js1'));
> this.echo(this.page.injectJs('http://www.my-website.com/path/to/js2'));
> 
>  }); 
> ```

不幸的是，这两个函数都返回 false。脚本的路径是正确的，还有哪里可能是这个问题的根源？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:10:50.470

我不相信 CasperJS 可以处理 HTTP 请求以注入脚本。这很奇怪，因为他们实际上[在包含 jQuery 的常见问题解答中](http://casperjs.org/faq.html#faq-jquery)显示了这一点。但是，相同的常见问题解答如下：

> 您不能使用 HTTP 协议注入脚本，您实际上必须使用脚本资源的相对/绝对文件系统路径。

只是为了仔细检查，我自己使用 Mac OS X 和您上面的代码进行了尝试。echo 的结果是`false`在通过 http 使用文件时以及`true`它是本地文件时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-13T09:51:58.003

这就是我在 Casperjs 脚本中注入 Jquery 的方式

```
casper.options.clientScripts = ["jquery-3.2.1.min.js"] 
```

**Jquery 文件应位于 casperjs 脚本所在的同一目录中**

# python - 查找列表中最小数字的索引值？

> ID：11237630
> 
> 赞同：18
> 
> 时间：2012-06-28T03:18:53.513
> 
> 标签：python

假设我有一个数字列表`[ 20, 15, 27, 30 ]`

我将如何返回此列表中最小值的索引号。( `15`) 显然， min(lst) 将返回最小的数字本身，但我该如何返回它的索引 " `1`" ？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-28T03:21:23.300

由于您已经知道如何找到最小值，您只需将该值提供给`index()`函数以获取该值在列表中的索引。IE，

```
n = [20, 15, 27, 30]
n.index(min(n)) 
```

产量

```
1 
```

这将返回列表中最小值的索引。请注意，如果有多个最小值，它将返回第*一个*.

[min()](http://docs.python.org/library/functions.html#min)：使用单个参数可迭代，返回非空可迭代的最小项（例如字符串、元组或列表）。如果有多个参数，则返回最小的参数。

[list.index(x)](http://docs.python.org/tutorial/datastructures.html)：返回列表中第一个值为 x 的项目的*索引*。如果没有这样的项目是错误的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T04:04:40.340

```
>>> L = [20, 15, 27, 30]
>>> min(range(len(L)), key=L.__getitem__)
1 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-28T03:54:25.247

另一种选择取决于数据的复杂性：

```
import heapq
s = [20, 15, 27, 30]
heapq.nsmallest(1, ((k, i) for i, k in enumerate(s))) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-28T04:08:43.380

这类似于@Jon Clements 的回答。他的用途`heapq`意味着它可以用来找到不止一个最小值。他没有使用`itemgetter()`他，而是简单地颠倒了元组中值的顺序，因此它们自然地以正确的顺序排序。

如果您只需要单个最小值，这是一种简单的方法：

```
from operator import itemgetter
lst = [20, 15, 27, 30]
i, value = min(enumerate(lst), key=itemgetter(1)) 
```

`enumerate()`是 Python 中将列表中的值与其索引配对的常用方法；它返回一个生成元组的迭代器，例如`(i, value)`where`value`是原始序列中的一个值，并且`i`是该值在序列中的索引。 `min()`可以带一个迭代器；`key=`参数设置为忽略配对索引值并仅在每个元组中找到最小第二个值（索引 1）的函数。

`min()`返回它找到的具有最小值的元组，然后我们使用元组解包将值分配给`i`and `value`。

显示的示例是一个列表，但这适用于包括迭代器的任何序列：

```
from random import randint
def rseq(n=20):
    for i in xrange(n):
        yield randint(0, 101)

i, value = min(enumerate(rseq()), key=itemgetter(1)) 
```

请注意，这`itemgetter(n)`是一个制造可调用对象的工厂。随着`itemgetter(1)`您获得一个可调用的，它返回序列中的第二项（索引 1）（在本例中为元组）。你也可以编写一个函数或一个`lambda`函数来做同样的事情：

```
def get1(x):
    return x[1]
i, value = min(enumerate(lst), key=get1)

i, value = min(enumerate(lst), key=lambda x: x[1]) 
```

# r - R中的对数概率图？

> ID：11237632
> 
> 赞同：3
> 
> 时间：2012-06-28T03:18:56.343
> 
> 标签：r

有谁知道如何在 R 中创建像这样的对数概率图，其中 x 轴是概率，y 轴是对数刻度。我阅读并下载了包 heR.Misc 包，但我不知道如何使用它。！![在此处输入图像描述](../Images/a68aa46427c59ff3dfdb23256b9d55d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T10:25:45.400

```
#create log probablity plot
#MPM 131201
#Make some dummy data
set.seed(21)
Dt<-as.data.frame(rlnorm(625, log(10), log(2.5)))
names(Dt)<-"Au_ppm"

#Create probablity scale lines and associated labels - 
PrbGrd <- qnorm(c(0.001,0.01, 0.05, 0.10,0.20,0.30,0.40, 0.50, 0.60, 0.70,0.80,0.90,0.95,0.99,0.999))
PrbGrdL<-c("0.1","1","5","10","20","30","40","50","60","70","80","90","95","99","99.9")

#create some value grid lines then convert to logs
ValGrd<-c(seq(0.001,0.01,0.001),seq(0.01,0.1,0.01),seq(0.1,1,0.1),seq(1,10,1),seq(10,100,10))
ValGrd<-log10(ValGrd)

#load up lattice packages - latticeExtra for nice log scale
require(lattice)
require(latticeExtra)

#Use qqmath to make the plot (note lattice does not work for weighted data - shame about that)

qqmath(~ Au_ppm, 
        data= Dt,
            distribution = function(p) qnorm(p),
        main = "Normal probablity / log (base 10) plot",
        pch=20,
        cex=0.5,
        xlab="Normal distribution scale (%)",
        scales=list(y=list(log=10,alternating=1),x = list(at = PrbGrd, labels = PrbGrdL, cex = 0.8)),
        yscale.components=yscale.components.log10ticks,
        panel=function(x,...){
            panel.abline(v=PrbGrd ,col="grey",lty=3)
            panel.abline(h=ValGrd,col="grey",lty=3)
            panel.qqmath(x,distribution=qnorm)
        }

    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-06T15:34:45.127

这是一个使用基本 R 的示例，从这篇文章中稍微简化了一点：（[https://stat.ethz.ch/pipermail/r-help/2004-February/045370.html](https://stat.ethz.ch/pipermail/r-help/2004-February/045370.html)）。

```
## Make some data
y <- rnorm(n=175, mean=100, sd=75)
y <- sort(y)
pct <- 1:length(y)/(length(y)+1)

## For x ticks
probs <- c(0.0001, 0.001, 0.01, 0.1, 0.3, 0.5, 0.7,
           0.9, 0.99, 0.999, 0.9999)
x.vals <- qnorm(probs)     

## Plotting area
xs <- c(-4, 4)
ys <- seq(-2,4)
par(xaxs="i", yaxs="i")
plot(NA, NA, xlim=c(xs[1], xs[2]), ylim=c(min(ys), max(ys)),
     axes=FALSE, xlab=NA, ylab=NA)

## X Axis
axis(side=1, at=x.vals, labels=FALSE, tck=-0.01)

text(x=x.vals, y=rep(min(ys)-0.35, length(x.vals)),
     labels=probs*100, xpd=TRUE, srt=325, font=2)

## Y Axis
axis(side=2, at=ys, labels=FALSE)
text(y=ys, x=rep(xs[1]-.08, length(ys)),
     labels= as.character(10^ys), xpd = NA, font=2,
     pos=2)

for (i in ys){
    axis(side=2, at=log10(seq(2,9))+ i,
         labels=NA, tck = -0.01)
}

## Grid lines and box
abline(h=ys, col="grey80", lty=2)
abline(v=qnorm(probs), col="grey80", lty=2)
box()

## Plot Data
lines(x=qnorm(pct), y=log10(y), col="blue") 
```

[![在此处输入图像描述](../Images/66d1b39250bf8d1b55edcc12a07a43d7.png)](https://i.stack.imgur.com/PSxsj.png)

# javascript - 黑鸟记录器 - 绝对没有任何反应

> ID：11237637
> 
> 赞同：0
> 
> 时间：2012-06-28T03:20:44.177
> 
> 标签：javascript

这应该很简单...

我认为尝试使用 Blackbird 记录器会很好（[Blackbird 主页](http://www.gscottolson.com/blackbirdjs/)）

按照作者页面上的指南，我在服务器上创建了一个目录，并将 blackbird.js、blackbird.css、两个 blackbird 图像文件和一个包含以下内容的 .html 文件加载到目录中。当我访问该页面时，警报会触发，但绝对不会发生其他任何事情。blackbird .js 和 .css 文件正在加载并在调试器中可见。我哪里出错了？（在 Firefox、Chrome 和 IE 上结果相同）。

```
<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Blackbird test</title>
    <link rel="Stylesheet" type="text/css" href="blackbird.css" />
    <script type="text/javascript" src="blackbird.js"></script>
    <script type="text/javascript">
        function func1() {
            alert("In function, about to send log messages");
            log.debug("hello");
            log.debug( 'this is a debug message' );
            log.info( 'this is an info message' );
            log.warn( 'this is a warning message' );
            log.error( 'this is an error message' );
        }
    </script>
</head>
<body>
<input type="button" value="click me" onclick="func1();"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:17:51.713

问题是您需要明确告诉黑鸟出现：

```
function func1() {
    log.toggle(); // Show it
    // rest of your code here;
} 
```

# java - 使用 Apache POI 在 Excel 工作表中动态创建行

> ID：11237638
> 
> 赞同：0
> 
> 时间：2012-06-28T03:20:50.867
> 
> 标签：java, excel, xml, apache-poi

我正在编写一个程序来读取一个大的 xml 文件并从中创建一个 excel 文件。每个节点的属性将是 excel 文件中的列标题。我创建了一个 Dom 对象并获得了节点列表。我需要遍历它，对于每个节点，我需要在 Excel 表中添加一行，并将节点的属性值作为列值。因此，在迭代时，我需要动态创建行。我该怎么做？我没有看到在 apache POI 中添加创建的行的功能，到目前为止我所看到的是每次都定义新行。我无法做到这一点，因为它有超过 5000 个条目。基本上我想做的是：

```
 Node node = null;
    HSSFRow datarow = null;
    for (int i = 0; i < nodeList.getLength(); i++) {
        node = nodeList.item(i);
        datarow = spreadSheet.createRow(i);
        //set values for data row here, and add it.
        //so in the loop, next time the same variable will be assigned to spreadSheet.createRow(1) etc.
    } 
```

我知道 createRow 是从 spreadSheet 调用的，它会将行添加到其中。但是在循环中，同样的变量也会被分配给其他行，所以我想最后我只会得到 1 行。请就此给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:25:24.843

尝试以下

```
 Node node = null;
    HSSFRow datarow = null;
    for (int i = 0; i < nodeList.getLength(); i++) {
        // On each loop you get the value of node item
        node = nodeList.item(i);
        //For every new node list you will create a row 
        datarow = spreadSheet.createRow(i);
        //Finally set the node value to the columns of the newly created Row
    } 
```

希望这可以帮助 ！！

# wireless - IR 命令通常重复多快（毫秒）？

> ID：11237647
> 
> 赞同：1
> 
> 时间：2012-06-28T03:21:40.657
> 
> 标签：wireless, infrared

我正在尝试通过串行模拟遥控 IR 信号。我对红外传输速度很好奇。是否有标准或典型速度？

这个想法是发送一个命令

```
 loop
     {
     key up
     delay (x milliseconds)
     } 
```

这个想法是以与遥控器大致相同的速度键入命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T00:06:00.137

我相信最常见的远程控制协议是飞利浦在 80 年代开发的 RC5。如果您有一些红外线遥控器，很可能其中至少有一个使用此协议。

RC5 以 36 kHz 调制信号。它在 25 毫秒的时间范围内传输 14 位。您可以找到更多详细信息：（包括带有时间的架构......）

[http://www.lennard.net.nz/electronics/rc5remote.html](http://www.lennard.net.nz/electronics/rc5remote.html) https://en.wikipedia.org/wiki/RC-5

对于数据传输（发送和接收），还有其他协议，例如 IrDA。（在 PDA 中找到...）。

尝试在串行端口上模拟 IR 信号很好，但我认为使用 IR 发射器会更有趣。您应该能够构建一个串行端口红外发射器。

例如：[http ://wiki.johnroy.com/serial-ir-transmitter](http://wiki.johnroy.com/serial-ir-transmitter)

就我个人而言，我使用 Arduino 板和 IR LED 完成了这项工作。

# android - 无法使用画布创建位图

> ID：11237650
> 
> 赞同：0
> 
> 时间：2012-06-28T03:22:20.530
> 
> 标签：android, canvas, drawing

你介意帮我解决这个问题吗？

我想在位图上画一个圆，然后在 mapView 上画位图。但位图仍未创建。这是我的代码：

```
public class CustomOverlay extends Overlay {
    public HeatPoint pt;
    Context mContext;
    Bitmap bmp;
    public CustomOverlay(HeatPoint pt,Context context){
        this.pt=pt;  
        this.mContext = context;
        bmp = Bitmap.createBitmap(200, 200, Bitmap.Config.ARGB_8888);
        Paint gp = new Paint();

    gp.setColor(0xFF0000);

    gp.setStyle(Style.FILL);
    Canvas myCanvas = new Canvas(bmp);
    myCanvas.drawRect(10,10,40,40,gp);   

    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        Point screenPts = new Point();
        mapView.getProjection().toPixels(pt.getGeo(), screenPts);
        canvas.drawBitmap(bmp, screenPts.x-16, screenPts.y-2, null);
        return true;
    }      

} 
```

在这段代码中，我想在屏幕上画一个圆圈，但是当我运行它时，什么也没发生。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:38:10.457

你可以看到下面的代码

```
int w = WIDTH_PX, h = HEIGHT_PX;

BitmapConfig conf = Bitmap.Config.ARGB_8888; // see other conf types
Bitmap bmp = Bitmap.createBitmap(w, h, conf); // this creates a MUTABLE bitmap
Canvas canvas = new Canvas(bmp); 
```

本教程可能会对您有所帮助

[http://www.tutorialforandroid.com/2010/11/drawing-with-canvas-in-android-renewed.html](http://www.tutorialforandroid.com/2010/11/drawing-with-canvas-in-android-renewed.html)

# android - android中fill_parent和match_parent的区别

> ID：11237651
> 
> 赞同：-8
> 
> 时间：2012-06-28T03:22:26.700
> 
> 标签：android

> **可能重复：**
> [android](https://stackoverflow.com/questions/5761960/what-is-the-difference-between-match-parent-and-fill-parent-property-in-android)
> [FILL_PARENT 和 MATCH_PARENT中的 match_parent 和 fill_parent 属性有什么区别](https://stackoverflow.com/questions/9949387/fill-parent-and-match-parent)

我已经浏览了android开发者网站，他们给出了以下区别：

注意：从 Android 2.2（API 级别 8）开始，“fill_parent”已重命名为“match_parent”以更好地反映行为。原因是如果您将视图设置为“fill_parent”，则在考虑同级视图后，它不会扩展以填充剩余空间，而是无论如何都会扩展以匹配父视图的大小——它将与任何同级视图重叠。

但是任何人都用example.so解释，这样事情就清楚了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T03:24:57.840

它们是一样的（在 API Level **8+**中）。使用 match_parent。

`fill_parent`（`MATCH_PARENT`在 API 级别**8**及更高版本中重命名），这意味着视图希望与其父级一样大（减去填充）

`fill_parent`：视图应该与其父级一样大（减去填充）。从 API 级别 8 开始不推荐使用此常量，并替换为`match_parent`

对于 Android API **1.6**到**2.1** `match_parent`会抛出一个错误，所以在这些情况下使用 fill_parent。为了支持向后兼容，最好使用`fill_parent`

我记得 Roman Guy（Google 的 Android 开发人员）说过，他们更改名称是因为`"fill_parent"`让开发人员感到困惑。事实上，`"fill_parent"`它不会填充剩余空间（因为您使用 weight 属性），但它占用的空间与其布局父级一样多。这就是为什么新名字是`"match_parent"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:25:09.170

两者都是`static final`表示值的常量`-1`。它们在编译时被硬编码到字节码`.apk`中，因此没有区别，并且都与所有 Android SDK 版本完全兼容。

您会看到它们在文档中都代表相同的值：

> **`public static final int FILL_PARENT`**
> 
> 视图请求的高度或宽度的特殊值。FILL_PARENT 表示视图希望与其父级一样大，减去父级的填充（如果有）。从 API 级别 8 开始不推荐使用此值，并替换为 MATCH_PARENT。
> 
> 常数值：-1 (0xffffffff)
> 
> **`public static final int MATCH_PARENT`**
> 
> 视图请求的高度或宽度的特殊值。MATCH_PARENT 表示视图希望与其父级一样大，减去父级的填充（如果有）。在 API 级别 8 中引入。
> 
> 常数值：-1 (0xffffffff)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T03:28:36.363

澄清是这样的：

*   Fill parent 暗示（或可能暗示）多个并排视图将扩展以完全填充它们的容器。因此，人们可能会认为将“fill_parent”添加到父视图的两个视图都将调整为父视图大小的 50%。
*   匹配父级更清晰，因为将视图设置为 fill_parent 实际上将大小设置为容器的大小。

正如其他用户所说（以及文档所述），这纯粹是一种更改，以使使用“fill_parent”的结果更加明显。

# android - 如何理解仿生的 bcopy.c 中的这段代码片段？

> ID：11237654
> 
> 赞同：2
> 
> 时间：2012-06-28T03:22:52.450
> 
> 标签：android, c, bionic

[我在http://androidxref.com/4.0.4/xref/bionic/libc/string/bcopy.c](http://androidxref.com/4.0.4/xref/bionic/libc/string/bcopy.c)中阅读了 memcpy 实现， 发现以下代码很难理解，谁能解释一下？

```
 36 /*
 37  * sizeof(word) MUST BE A POWER OF TWO
 38  * SO THAT wmask BELOW IS ALL ONES
 39  */
 40 typedef long word;      /* "word" used for optimal copy speed */
 41 
 42 #define wsize   sizeof(word)
 43 #define wmask   (wsize - 1)
 44 
```

...

```
 /*
 78          * Copy forward.
 79          */
 80         t = (long)src;  /* only need low bits */
 81         if ((t | (long)dst) & wmask) {
 82             /*
 83              * Try to align operands.  This cannot be done
 84              * unless the low bits match.
 85              */
 86             if ((t ^ (long)dst) & wmask || length < wsize)
 87                 t = length;
 88             else
 89                 t = wsize - (t & wmask); 
```

这些按位运算是什么意思？他们的意图是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T04:32:16.293

基本思想是满足对齐约束：每次要复制一个单词的每个“单词”必须在“单词”边界上对齐。

一些 CPU 将此作为基本约束，即加载和存储必须发生在“自然”边界上。在较旧的 ARM 处理器上，地址的低位实际上完全被忽略，因此从奇值地址加载或存储两个字节具有与以下相同的效果：

```
short w = *(short *)(addr & ~1); 
```

例如。在其他一些 CPU 上，未对齐的加载或存储会导致陷阱（例如 MIPS 和 SPARC），还有一些 CPU 会这样做，但会降低性能（x86）。

因此，假设您要从地址 0x12345 复制大量字节（例如，其中 4096 个）到地址 0x22345，并且“字长”为 4 个字节。如果我们首先复制三个字节，地址现在将是 0x12348 和 0x22348。此时我们可以只复制 1023 个 4 字节字，一次一个字，而不会因任何对齐问题而绊倒。之后我们将有一个剩余的字节要复制，因为 4096 = 3 + (4 * 1023) + 1。

这一切都假设字节都是单独寻址的，即使在加载和存储“单词”时也是如此。这种假设在某些机器上是错误的：例如，旧的 Data General MV10000 CPU 将使用“字地址”来寻址“字”，这实际上是字节地址除以 2。（因此不可能对跨越两个字节的“字”进行寻址：位置 0 处的字具有字节地址 0 和 1，但字地址为 0；位置 1 处的字具有字节地址 2 和 3；位置 2 处的字具有字节地址 4 和 5；等等。）在这样的机器上，您可能需要使用不同版本的 bcopy.c。

As @Alex noted, the XOR is just making sure that it is actually possible to align the two addresses. If you're copying from 0x12345 to 0x22345, it is; but if you're copying from 0x12345 to 0x22344, the two addresses will never line up.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T04:08:02.163

只需一步一步地做：

```
t = (long)src;
if ((t | (long)dst) & wmask) 
```

这些检查是否至少有一个`src`并且`dst`不是`sizeof(long)`.

```
if ((t ^ (long)dst) & wmask || length < wsize) 
```

这将检查`src`和`dst`是否以不同方式对齐`sizeof(long)`（IOW，不是 的“相等”倍数`sizeof(long)`）或 if `length < sizeof(long)-1`。

最后，您收到`t`必须在未对齐位置之间复制多少字节作为字节，要么全部（`length`），要么刚好足够（小于`sizeof(long)`）到达地址的倍数，`sizeof(long)`其余的可以以 . 为单位复制`long`。而后者是速度优化。

要查看所有内容，您必须知道整数，当以二进制表示时，是某个 2 的幂的倍数，而其最低有效位低于 2 的幂时全为零。

例子：

100 [2] (4 [10] ) 是 100 2 (4 10 ) 的倍数[1100] 2 [(] 12
10 [)]是[100] 2 (4 10 ) 的倍数[10000] 2 [(] 16
10 [)]是[100] 2 [(] 4 [10] )
0 [2]的倍数(0 [10] ) 是 100 [2]的倍数(4 [10] )
11 [2] (3 [10] ) 不是 100 [2] (4 [10] )
1101 [2] (13 [10 ) 的倍数]) 不是 100 [2] (4 [10] )的倍数

这就是`& (sizeof(long)-1)`用途。

您还需要知道一个值`XORed`本身给出 0，并且当您使用`XOR`不同的值时，结果是非零的。所以可以`XOR`用来比较。这就是`(t ^ (long)dst)`目的。

# php - 在每个字段旁边显示表单验证错误

> ID：11237655
> 
> 赞同：6
> 
> 时间：2012-06-28T03:23:03.660
> 
> 标签：php, forms, validation

我正在处理一个用 php 编写的简单联系表单，并且几乎所有设置都按照我的意愿进行设置，除了现在，所有验证错误都显示在表单顶部的 div 中，我想更改下面的代码，因此它们显示在导致错误的表单字段旁边，但我不确定如何完成此操作，因此我向专家寻求建议。

**PHP 验证例程**

```
$frm_valid = new Validate();

if(isset($_POST['submit'])){

$rules=array(
    array('Type'=>'Required','Var'=>$_POST['name'],'Msg'=>'Name field is required.'),
    array('Type'=>'Required','Var'=>$_POST['email'],'Msg'=>'Email address field is required.'),
    array('Type'=>'Email','Var'=>$_POST['email'],'Msg'=>'Your email address format is invalid.'),
    array('Type'=>'Required','Var'=>$_POST['subject'],'Msg'=>'Subject field is required.'),
    array('Type'=>'Required','Var'=>$_POST['message'],'Msg'=>'Message field is required.'),
);

$result = $frm_valid->Valid($rules);

if(is_array($result)){
    // Print validation errors (if any)
    echo('<div"><b>The form cannot be submitted until the following errors are corrected.</b><ul>');

    foreach($result as $key=>$val){
      echo '<li>'.$val.'</li>';
    }
    echo('</ul></div><br />');
  } 
  else {
    // Do something else.
  }
} 
```

**表单 HTML**

```
<form action="<? echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <input type="text" name="name" value="" /> <br />

    <input type="text" name="email" value="" />  <br />

    <input type="text" name="subject" value="" /> <br />

    <textarea name="message" cols="80" rows="7"></textarea> <br />

    <input type="submit" name="submit" value="Send" />
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T03:30:47.107

您需要为此更改整个代码！！！结构，也许是这样的：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
    <ul>
        <li>
            <label>
                <span>Name</span>
                <input type="text" name="name" />
                <small class="errorText"><?php echo ($_POST["name"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Email</span>
                <input type="text" name="email" />
                <small class="errorText"><?php echo ($_POST["email"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Subject</span>
                <input type="text" name="subject" />
                <small class="errorText"><?php echo ($_POST["subject"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <label>
                <span>Message</span>
                <textarea name="message" cols="80" rows="7"></textarea>
                <small class="errorText"><?php echo ($_POST["message"] == "") ? "This field is required" : ""; ?></small>
            </label>
        </li>
        <li>
            <input type="submit" name="submit" value="Send" />
        </li>
    </ul>
</form> 
```

和相同的CSS：

```
* {font-family: Segoe UI, Tahoma;}
h1 {font-weight: bold; font-size: 14pt; padding: 5px 0; margin: 5px 0; border: 1px solid #999; border-width: 1px 0;}
input[type='submit'] {padding: 5px 20px; cursor: pointer;}
ul, li {display: block; list-style: none; margin: 0; padding: 0;}
ul li {padding: 5px 0;}
ul li label span {display: block; cursor: pointer;}
ul li label .errorText {color: #f00; font-weight: bold; vertical-align: top;}
ul li label textarea {width: 300px;} 
```

你可以在这里看到一个现场演示：[Demo](http://jsfiddle.net/JHE22/)

## PHP 中的错误处理

为每个字段保留一个错误变量。说，

```
<?php
    $error = array(
        "name" => "",
        "email" => "",
        "subject" => "",
        "message" => ""
    );
?> 
```

用错误更新它们并在下面显示它们。

```
<?php
    if (empty()$_POST["email"])
        $error["email"] = "Email is required!";
    elseif (!isEmail($_POST["email"]))
        $error["email"] = "Not a Valid Email!";
?> 
```

如果没有错误，它将为空，并且用户不会看到错误消息。在您的表单代码中，您只需以这种方式更新：

```
<small class="errorText"><?php echo $error["name"]; ?></small>
<small class="errorText"><?php echo $error["email"]; ?></small> 
```

在后端的位置，`$error["email"]`将有`"This field is required"`or `"Not a valid email address!"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T14:37:40.520

如果您的每个字段都有一个错误，您可以使用以下方式：

```
 <input name='myfield'>
     @if ($errors->has('myfield'))
        <span style="color:red;">
            {{ $errors->first('myfield') }}
        </span>
     @endif 
```

# trigger.io - 对从 API 调用返回的 URL 使用 forge.tabs.open

> ID：11237661
> 
> 赞同：0
> 
> 时间：2012-06-28T03:23:43.883
> 
> 标签：trigger.io

我正在使用一个返回 URL 列表的 API，因此我希望遍历它们，生成链接，并让用户浏览这些链接。我想我应该在用户点击链接时使用 forge.tabs.open 来创建模态视图。这是代码：

```
$("#feed").append('<p><a href="javascript:void(0)" onclick="viewLink('+item.data.url+', "'+item.data.title+'");" class="viewlink">'+item.data.title+'</a></p>'); 
```

和 viewLink 功能：

```
var viewLink = function(linkurl, linktitle) {
    forge.logging.log(linkurl);
    forge.logging.log(linktitle);

    forge.tabs.openWithOptions({
        url: linkurl,
        title: linktitle,
        buttonText: "close"
    });
}; 
```

它在 iOS 上不起作用，也不会产生错误。当我在浏览器中运行它时，我收到此错误：

> Uncaught SyntaxError: Unexpected token :

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:18:05.007

您发布的 trigger.io 代码对我来说看起来不错。当我看到“意外标记”语法错误时，我立即想到：单引号、双引号或字符编码。

是否有任何链接标题具有“奇怪”字符？也许您需要转义或encodeURIComponent 或decodeURIComponent 呢？

# php - Python背后的PHP

> ID：11237665
> 
> 赞同：0
> 
> 时间：2012-06-28T03:24:11.663
> 
> 标签：php, python, nginx

我对 python 了解很多，但我不知道 php 的所有方面是否可以运行 python 并将其输出到 php，然后到 nginx，然后到客户端。现在我确实意识到这有点适得其反（所以请不要发布这是一个坏主意）但我只是好奇这是否可能......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:38:12.250

感谢[Cole Johnson](https://stackoverflow.com/users/1350209/)，我记得你可以在写入 dynamic.php 文件并检索输出后调用 php，`subprocess`然后将返回的代码发送到 nginx 到客户端（是的，这可能是大约两倍的时间）但是如果你正在寻找对于运行 php 代码的超级安全方式，这可能是一个想法。在运行代码之前让 python 解析代码，因此所有不“合法”合法的调用都将被注释掉或作为错误返回。

# java - 为什么我不能从 OpenGL 中的图像文件加载矩形？

> ID：11237666
> 
> 赞同：-3
> 
> 时间：2012-06-28T03:24:30.087
> 
> 标签：java, opengl, lwjgl

每次我的代码在关卡图像中遇到白色像素时，我都会编写一些代码来生成框。但是，它似乎不起作用。它仅在我注释掉图像部分的实际加载时才有效。

```
 GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(-5, 5, -5, 5, -20, 20);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    float camPosX=0, camPosY=0;
    for(int i=0;i<level.getWidth();i++){
        for(int j=0;j<level.getHeight();j++){
            if(level.getRGB(i, j)==Color.red.getRGB()){camPosX=i;camPosY=j;}
        }
    }
    System.out.println("Camera position is "+camPosX+", "+camPosY);
    int x=0;
    while (!Display.isCloseRequested()) {
        Display.sync(60);
        //poll for keypresses first, default key is 'forward'
        if(Keyboard.isKeyDown(Keyboard.KEY_NUMPAD8));

        GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT|GL11.GL_COLOR_BUFFER_BIT);
        //GL11.glEnable(GL11.GL_CULL_FACE);
        GL11.glEnable(GL11.GL_DEPTH_TEST);
        GL11.glColor3f(0, 0, 0);
        for(int i=0;i<level.getWidth();i++){
            for(int j=0;j<level.getHeight();j++){
                if(level.getRGB(i, j)==Color.WHITE.getRGB()){
                    GL11.glTranslatef(-i, 0, -j);
                    GL11.glRotatef(45, 1, 1, 1);
                    GL11.glBegin(GL11.GL_QUADS);
                    GL11.glColor3f(1.0f,0.0f,0.0f);          // Set The Color To Red
                    GL11.glVertex3f( 0.5f, 0.5f, 0.5f);          // Top Right Of The Quad (Front)
                    GL11.glVertex3f(-0.5f, 0.5f, 0.5f);          // Top Left Of The Quad (Front)
                    GL11.glVertex3f(-0.5f,-0.5f, 0.5f);          // Bottom Left Of The Quad (Front)
                    GL11.glVertex3f( 0.5f,-0.5f, 0.5f);          // Bottom Right Of The Quad (Front)
                    GL11.glVertex3f( 0.5f,-0.5f,-0.5f);          // Bottom Left Of The Quad (Back)
                    GL11.glVertex3f(-0.5f,-0.5f,-0.5f);          // Bottom Right Of The Quad (Back)
                    GL11.glVertex3f(-0.5f, 0.5f,-0.5f);          // Top Right Of The Quad (Back)
                    GL11.glVertex3f( 0.5f, 0.5f,-0.5f);          // Top Left Of The Quad (Back)
                    GL11.glVertex3f(-0.5f, 0.5f, 0.5f);          // Top Right Of The Quad (Left)
                    GL11.glVertex3f(-0.5f, 0.5f,-0.5f);          // Top Left Of The Quad (Left)
                    GL11.glVertex3f(-0.5f,-0.5f,-0.5f);          // Bottom Left Of The Quad (Left)
                    GL11.glVertex3f(-0.5f,-0.5f, 0.5f);          // Bottom Right Of The Quad (Left)
                    GL11.glVertex3f( 0.5f, 0.5f,-0.5f);          // Top Right Of The Quad (Right)
                    GL11.glVertex3f( 0.5f, 0.5f, 0.5f);          // Top Left Of The Quad (Right)
                    GL11.glVertex3f( 0.5f,-0.5f, 0.5f);          // Bottom Left Of The Quad (Right)
                    GL11.glVertex3f( 0.5f,-0.5f,-0.5f);          // Bottom Right Of The Quad (Right)
                    GL11.glEnd();
                    GL11.glLoadIdentity();
                }
            }
        }
        GL11.glTranslatef(-camPosX, 0, -camPosY);
        Display.update();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:57:51.700

在生成框的主循环中，您可能想要做

```
...
if(level.GetRGB(i, j)==Color.WHITE.getRGB()) {
    GL11.glPushMatrix(); // store current matrix
    GL11.glTranslatef(-i, 0, -j);
    ...
    GL11.glPopMatrix(); // instead of GL11.glLoadIdentity()
} 
```

线

```
GL11.glTranslatef(-camPosX, 0, -camPosY); 
```

可能不会像您认为的那样。它对以下调用没有任何影响`Display.update()`。但是，它*会*影响你的主循环的下一次运行，因为你没有`GL11.glLoadIdentity()`在主循环的开头调用。我建议将它移到主循环的开头并`glLoadIdentity()`在之前调用。

# asp.net - 500.0 0x800700c1 在 Windows 2008 Server x64 上的 IIS 7.5 ASP 32 位 AppPool

> ID：11237667
> 
> 赞同：3
> 
> 时间：2012-06-28T03:24:31.387
> 
> 标签：asp.net, asp-classic, windows-server-2008, iis-7.5, 32bit-64bit

我试图让一个经典的 ASP 应用程序在我们的带有 IIS 7.5 的新 Windows 2008 Server x64 上以 32 位模式运行。我创建了一个名为“TEST”的应用程序池，在经典模式下设置为 ASP.NET 2.0，然后进入高级设置，并将这个新应用程序池的“启用 32 位应用程序”设置为 true。

我将我们服务器上的一个 Web 应用程序分配给这个新的 AppPool 并尝试在浏览器中加载它。它给了我一个 500.0 错误 0x800700c1 这是不是有效的 Win32 应用程序的错误（re: [http://blogs.msdn.com/b/rakkimk/archive/2007/06/09/problems-with-32-bit- asp-net-2-0-dlls-on-a-windows-2003-server-64-bit.aspx](http://blogs.msdn.com/b/rakkimk/archive/2007/06/09/problems-with-32-bit-asp-net-2-0-dlls-on-a-windows-2003-server-64-bit.aspx) )

一旦我回到我的 AppPool 并将启用 32 位更改回 false，特定的 Web 应用程序运行良好。但是，有一个应用程序需要在 32 位模式下运行，这就是我试图让该站点在 32 位模式下运行的原因。

我觉得我错过了一些东西，但任何网站上似乎都不存在“东西”，告诉你唯一需要做的就是在 AppPool 中启用 32 位应用程序并将站点分配给该 AppPool。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:50:45.137

此问题已通过删除没有可用 32 位模块的 32 位应用程序文件夹下的处理程序映射得到解决。在这个特定的例子中，ColdFusion 9 64bit 安装在服务器上，它的文件夹下的处理程序映射导致了 500.0 问题。我删除了以下处理程序映射：

```
<add name="AboMapperCustom-1207286671" path="*" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\1\jrun_iis6_wildcard.dll" requireAccess="None" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286690" path="*.jsp" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286691" path="*.jws" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286692" path="*.cfm" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286693" path="*.cfml" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286694" path="*.cfc" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286695" path="*.cfr" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286696" path="*.cfswf" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286697" path="*.hbmxml" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" />
<add name="AboMapperCustom-1207286698" path="*.hbmxml" verb="*" modules="IsapiModule" scriptProcessor="D:\UPSDATA\JRun4\lib\wsconfig\jrun_iis6.dll" requireAccess="Script" responseBufferLimit="0" /> 
```

# javascript - Android 浏览器 touchend 事件错误解决方法

> ID：11237669
> 
> 赞同：2
> 
> 时间：2012-06-28T03:24:43.017
> 
> 标签：javascript, jquery, mobile, mobile-website, android-browser

我一直在为我的主页开发一个移动站点，并且在连接到移动触摸事件时遇到了问题。基本上我想完成以下工作：

1.  用户向下滚动
2.  on touchend 事件被触发 --> 调用一个函数来计算滚动后隐藏在上面的文档的数量（如 jQuery scrollTop）
3.  程序根据隐藏在顶部的文档的数量采取行动

我的问题如下。所以 touchend 在 iOS 中的工作方式与预期一样，当用户抬起手指时，该函数会调用 jQuery.scrollTop()，它会为我提供用户向下滚动的像素值。然而，在 Android 浏览器设备上，jQuery.scrollTop() 值似乎是在 touchstart 上计算的。也就是说，事件没有正确触发，我从 touchend 事件中获得了正确的 pageX 和 Y 坐标，但是 scrolltop() 返回用户开始滚动时的值。我已经在inet 上进行了检查，这似乎是一个已知的android 浏览器错误，我想知道是否有针对此问题的体面的解决方法，即不涉及阻止默认滚动行为的解决方法！？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:58:56.340

您是否考虑平滑滚动？还是只是基本的滚动？通过基本滚动，您应该能够简单地通过使用 document.body.scrollTop 获得正确的值

让我知道是否有问题

# c# - 当另一个对话框在顶部时禁用“关闭”按钮

> ID：11237680
> 
> 赞同：1
> 
> 时间：2012-06-28T03:26:39.367
> 
> 标签：c#, .net, winforms

我目前在这里的表格有问题。

每当某个进程正在进行时，我都会弹出一个进度对话框，但是当我单击进度对话框后面的窗口/表单的“X”按钮时，它将被关闭并取消正在进行的操作。

我怎样才能防止这种情况发生？我是否必须禁用进度条后面的整个表单？我该怎么做？

ps 我已经尝试过[这个](http://www.daniweb.com/software-development/csharp/code/216690/disable-close-button)、[这个](http://blogs.msdn.com/b/atosah/archive/2007/05/18/disable-close-x-button-in-winforms-using-c.aspx)和[这个](http://www.codeproject.com/Articles/20379/Disabling-Close-Button-on-Forms)，但它们似乎都没有在我的应用程序中工作。T__T

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:39:48.550

[`Form.ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)使用而不是启动表单`Form.Show()`。这将禁用后台表单（实际上是进程中的任何其他表单），直到您显示的表单关闭。作为一个额外的好处，您可以让表单返回一个值（例如，取消、确定、是、否等），以防需要采取任何行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:37:37.443

实际上不是您可能期望的答案，但您可以处理`Form.FormClosing`事件，设置`e.Cancel = True`

这不会禁用关闭按钮，但会使您的表单在这种情况下保持打开状态。

查看更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T03:45:26.657

您应该将进度条显示为模态对话框，请检查此答案是否适合您的[javasript，例如 winform 上的模型窗口](https://stackoverflow.com/questions/2698895/javascript-like-modal-window-for-winforms/3640750#3640750)

HTH。

# sql - 在循环表时执行 SQL 语句

> ID：11237682
> 
> 赞同：0
> 
> 时间：2012-06-28T03:26:41.443
> 
> 标签：sql, sql-server

我想创建一个包含几条记录的表，然后为该表中的每条记录运行一组 sql 语句。我会使用表中的数据来设置 sql 语句中的值。

这应该允许我只编写一次 SQL，然后为我放入表中的任何数据运行它。

但是，我不知道该怎么做。我应该使用游标来循环表格吗？还有什么办法？

感谢您给我的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:09:37.717

CURSOR 将有与之相关的开销，但它可能是遍历表的好方法。它们不是完全不必要的邪恶，并且有它们的位置。

由于 WilliamB2 提供的信息有限，听起来 CURSOR 集可能是解决此问题的一个很好的解决方案，可以遍历他的数据并生成多个下游 INSERT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:50:17.577

是的，您可以使用光标。您也可以使用 while 循环

```
declare @table as table(col1 int, col2 varchar(20))

declare @col1 int
declare @col2 varchar(50)

declare @sql varchar(max)

insert into @table
SELECT col1, col2 FROM OriginalTable

while(exists(select top 1 'x' from @table)) --as long as @table contains records continue
begin
   select top 1 @col1=col1, @col2=col2 from @table

   SET @sql = 'INSERT INTO Table t VALUES('+cast(@col1 as varchar)+')'

   delete top (1) from @table --remove the previously processed row. also ensures no infinite loop
end 
```

我认为光标有一个开销。

使用第二种方法，您不会在原始表上工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:05:26.510

也许你可以使用`INSERT...SELECT`而不是循环：

```
INSERT INTO target_table
SELECT
    some_col,
    some_other_col,
    'Some fixed value',
    NULL,
    42,
    you_get_the_idea
FROM source_table
WHERE source_table.you_get_the_idea = 1 
```

你的列`SELECT`应该与目标表的结构相匹配（你可以省略一个 int/identity pk，`id`如果你有一个）。

如果最好的选择是这个或循环取决于你想在循环中填充多少表。如果只是几个，我通常会坚持使用`INSERT...SELECT`.

# javascript - 你如何使用 javascript 通过 oauth 获取 twitter 时间线

> ID：11237683
> 
> 赞同：1
> 
> 时间：2012-06-28T03:26:48.810
> 
> 标签：javascript, api, twitter

我目前正试图通过 oauth 过程从 twitter 获取用户时间线数据，但我无法让它工作。

我在这里尝试了一些东西[http://bytespider.github.com/jsOAuth/](http://bytespider.github.com/jsOAuth/)并且我一直遇到同样的问题。

哇！此页面没有请求令牌。这是我们要求使用您的 Twitter 帐户的应用程序所需的特殊密钥。请返回将您发送到此处的站点或应用程序，然后重试；这可能只是一个错误。

做这件事不可能这么难吧？

这是我的代码

```
<html>
<head>
<title></title>
</head>
<body>
<script src="jsOAuth-1.3.4.min.js"></script>
<script>

    var config = {
        consumerKey: "[removed]",
        consumerSecret: "[removed]",

        requestTokenUrl: "https://api.twitter.com/oauth/request_token",
        authorizationUrl: "https://api.twitter.com/oauth/authorize",
        accessTokenUrl: "https://api.twitter.com/oauth/access_token"
    };
    var oauth = new OAuth(config);

    oauth.fetchRequestToken(openAuthoriseWindow, failureHandler);

    function openAuthoriseWindow(url)
    {
        var wnd = window.open(url, 'authorise');
        setTimeout(waitForPin, 100);

        function waitForPin()
        {
            if (wnd.closed)
            {
                var pin = prompt("Please enter your PIN", "");
                oauth.setVerifier(pin);
                oauth.fetchAccessToken(getSomeData, failureHandler);
            }
            else
            {
                setTimeout(waitForPin, 100);
            }
        }
    }

    function getSomeData()
    {
        oauth.get("https://api.twitter.com/oauth/something/?format=jsonp", function (data) {
            console.log(data.text);
        }, failureHandler);
    }

    function failureHandler(data)
    {
        console.error(data);
    }
</script>
</body>
</html> 
```

我也在控制台选项中收到此错误[https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token) 403（禁止）

编辑：有谁知道该怎么做？甚至无法在 Twitter 上找到好的资源。你也可以在没有密码的情况下实现这一点，只让用户输入他们的登录详细信息吗？

提前致谢

# .net - 如何获取可执行文件的版本？

> ID：11237684
> 
> 赞同：5
> 
> 时间：2012-06-28T03:27:00.583
> 
> 标签：.net, vb.net, version, exe, resource-files

救命！我正在编写一个 vb.net 程序来更新我的应用程序的自述文件。我想从其他已编译的应用程序中提取版本号。我想从可执行文件中读取版本号，而不是从其未编译的资源中读取。

如何在 vb.net 中做到这一点而不使用像 reshacker 这样的外部工具？

（我找到[了这个链接](https://stackoverflow.com/questions/3890012/how-to-access-string-resource-from-another-application)，但它是另一种语言的。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T11:11:23.967

您可以使用这样的功能来做到这一点：

```
Private Function GetFileVersionInfo(ByVal filename As String) As Version
    Return Version.Parse(FileVersionInfo.GetVersionInfo(filename).FileVersion)
End Function 
```

用法：

```
Debug.WriteLine(GetFileVersionInfo("C:\foo\bar\myapp.exe").ToString) 
```

输出：

```
4.2.9.281 
```

# python - 使用 Python 命名空间包进行开发

> ID：11237685
> 
> 赞同：4
> 
> 时间：2012-06-28T03:27:12.410
> 
> 标签：python, pip, namespaces, packaging, namespace-package

我在使用 python 命名空间包时遇到问题，想知道什么是好的解决方案。

我的项目结构类似于以下

```
project_name/ext/app_ext 
```

这就是我正在做的项目。它具有也在同一个命名空间中的依赖项。

```
project_name/ext/base_ext
project_name/ext/other_dependency 
```

我正在处理 django 应用程序中的“app_ext”命名空间包。但是，我遇到了接收`no module named app_ext`.

我认为这与依赖命名空间包的安装方式有关（我正在使用 PIP 安装）。依赖命名空间的包没有`__init__.py`像分发 / setuptools 文档中记录的那样与文件一起安装，但它们都在其安装包中真正包含以下声明。

```
from pkgutil import extend_path
__path__ = extend_path(__path__, __name__) 
```

现在到了真正的问题。当已经安装了一些相关的命名空间包时，是否有使用命名空间包的技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:45:14.910

一种解决方案是修改命名空间包的路径以添加您的本地路径。（如果您在 Django 中工作，您可以在 settings.py 中添加如下代码片段）。

```
from os import path
import sys

PACKAGE_NAMESPACE = ["project_name", "ext"]
VIRTUAL_PACKAGE = '.'.join(PACKAGE_NAMESPACE)
__import__(VIRTUAL_PACKAGE)
local_package = path.abspath(path.join(*PACKAGE_NAMESPACE))
sys.modules[VIRTUAL_PACKAGE].__dict__["__path__"].insert(0, local_package) 
```

这种方法也用于[tiddlyweb](https://github.com/tiddlyweb/tiddlyweb)项目的 tiddlywebplugins 命名空间。

# architecture - DDD、封装和分层架构：我的领域是否过于贫乏？

> ID：11237690
> 
> 赞同：4
> 
> 时间：2012-06-28T03:28:09.463
> 
> 标签：architecture, domain-driven-design

我目前正在使用 .net 和 nhibernate 为旅游行业的客户开发一些相当大的应用程序，并且在实施 DDD 时遇到了一些问题，并且团队内部在最佳方式上存在分歧。我希望有人可以提供一些指导。

目前，我们已经在域外实现了一个服务层，每个聚合根（[EntityName]Service）都有一个服务。所有其他层使用这些服务通过 GetByThis() 和 GetByTheOther() 等方法获取对聚合根的引用。我们从其他层对域的所有调用都是通过这些服务进行的。

这些服务持有对存储库的注入引用（在其他任何地方都没有引用），并且还负责所有保存/更新行为和管理事务性。服务方法越来越复杂，有时具有似乎属于域的行为，例如条件创建逻辑（如果 property = this 将子对象设置为某物，否则为其他东西）。我们的域实体大多具有简单的方法，例如 GetByThis() 和 HasAThing()。我觉得我们正在失去我们领域的表现力。

我的主要问题是：

*   服务层应该包含这么多逻辑吗？如果不是，它应该去哪里？如果是域，聚合根是否应该包含对存储库的引用？如果是，如何将这些注入（注入创建聚合根的工厂？）
*   应如何处理事务性？
*   实体（或聚合根）是否应该持有对域服务的引用？如果是这样，他们应该如何获得参考资料？
*   为了获得实体的新 id，我们必须调用一个存储过程，该过程已包装在存储库中。你会在哪里引用这个？需要创建许多子实体的实体上的一些复杂方法需要引用这个？

**编辑**

感谢@david-masters 和@guillaume31 的深思熟虑的回答。

你帮助我解决了我得到的那种“臭代码”的感觉。

首先，我应该说我们有一个（非常）遗留的 oracle DB 来应对，因此需要 Id Generation（以及其他问题）。

对于其他看到这个的人来说，这两个答案都给出了很好的建议，但对我来说，这是最好的建议：

“从务实的角度来看，这就是我会问自己的问题：如果我想在另一个应用程序中使用我的域层的一部分并重用它，它是否包含我在新应用程序中利用域所需的所有业务规则和行为? 如果不是，那么可能意味着当前在应用程序端的一些部分需要移动到领域层。”</p>

考虑到这一点，我重新评估了我们的域和服务层，现在相信我已经解决了我们的设计问题

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T10:20:30.213

应用程序服务层不应包含域逻辑。应用程序服务的目的是“协调”。它不应该做出任何**领域**决定；所有业务决策都应该在域对象或域服务中。应用程序服务接收来自消费者（通常是 UI）的调用，并调用域和基础设施服务中的方法。应用程序服务不应该像您所描述的那样具有杂乱无章的名称。他们应该有描述用例的有意义的动词。以下是银行应用程序的应用程序服务的示例：

```
public class AccountService : IAccountService
{
    //These are injected via dependency injection on the constructor
    private readonly IAccountRepository _accountRespository;
    private readonly IEmailNotificationService _emailNotificationServce;

    public void FreezeAccount(Guid accountId)
    {
        Account account = _accountRespository.GetById(accountId);

        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
             account.Freeze();
             _accountRespository.Save(account);  
             _emailNotificationServce.Send(CreateFreezeNotification(account));           
        }
    }
} 
```

我建议您的实体/聚合不要引用存储库，因此根本没有依赖关系。如果一个聚合需要来自第二个聚合的信息来做出决定，应用程序服务应该从它的存储库中获取第二个聚合并通过一个方法将它传递给第一个聚合。

我会将相同的原则应用于域服务。如果需要域服务（通常用例需要在一个事务中涉及多个聚合（尽管您应该尝试通过更好地设计聚合来避免这种情况以减少并发问题）），那么应用程序服务应该首先获取所需的聚合，然后将它们传递给域服务。然后域服务可以调用聚合上的域逻辑。

事务应在此应用程序服务级别处理。正如您在上面看到的，所有被调用和持久化的逻辑都包装在一个 UnitOfWork 中。只有当这个块没有错误地完成时，事务才会完成。

关于 ID：我总是选择 Guid 而不是数据库 ID。我只是发现生活变得如此轻松，并且避免了您描述的问题。如果您的数据库需要负责 ID（例如 INT IDENTITY 列），那么也许您可以将其设为辅助 ID 属性，并将 Guid ID 用于域目的以节省开销？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T12:59:54.663

> 服务层应该包含这么多逻辑吗？如果不是，它应该去哪里？

我假设您在这里谈论的是应用程序层中的服务，而不是域层。似乎您的域对象几乎是贫乏的，有些人认为这是一种反模式，但对此存在很多争论。

从务实的角度来看，这就是我会问自己的问题：如果我想将我的域层的一部分并在另一个应用程序中重用它，它是否包含我在新应用程序中利用域所需的所有业务规则和行为？如果不是，那么可能意味着当前在应用程序端的某些部分需要移动到域层。

请注意，我在这里谈论的是纯粹的领域业务规则，而不是特定于应用程序的规则。例如，必须通过 4 个步骤的向导执行某些操作，在最后一步结束时要求用户确认，以及在最后一步应用后所有修改都刷新到持久存储中。 - 特定的业务规则，而不是域规则。因此它们不应该被移动到域层。

> 如果是域，聚合根是否应该包含对存储库的引用？

IMO 聚合根不应该持有对其自己存储库的引用并知道如何存储自己，因为它打破了持久性无知并在域对象中引入了额外的责任，这将混淆它。但是，聚合根有时可能包含对另一个实体的存储库的引用。

> 应如何处理事务性？

我想说有两种交易类型：

*   应用层中的“用户”事务，也就是“工作单元”。这些是跨越用例或在 Web 应用程序中的网页生命周期内持续的高级事务（“视图中的打开会话”）。ORM 框架通常提供管理这些事务的工具。

*   域层中的事务。它们可以由域对象或服务启动。例如： FundsTransferService.Transfer() 可以在内部使用交易。在这里，您可以使用您平台的基本事务处理。

> 实体（或聚合根）是否应该持有对域服务的引用？如果是这样，他们应该如何获得参考资料？

是的，实体有时可以调用域服务。域服务包含不属于任何实体的域规则和行为。您可以硬编码这些依赖项或将它们注入实体中，具体取决于您想要的解耦级别。

> 为了获得实体的新 id，我们必须调用一个存储过程，该过程已包装在存储库中。你会在哪里引用这个？需要创建许多子实体的实体上的一些复杂方法需要引用这个？

我不建议为按需访问的实体生成 ID。正如 David 指出的那样，当您新建实体时，在语言级别生成 Guid 通常是一个更好的主意。

如果您仍想走 ID 生成路线，调用 ID 生成器通常是实体工厂的工作，而不是实体本身。

# java - 使用 Java Applet 中的 tomcat WebDav 触发打开和编辑文件

> ID：11237691
> 
> 赞同：0
> 
> 时间：2012-06-28T03:28:10.850
> 
> 标签：java, tomcat, webdav

目前我有一个 java 小程序（以 tomcat 6 作为后端），允许用户上传文件和下载文件以进行文档共享。但是，许多用户忘记将编辑后的文件上传回服务器。

因此，我想增强小程序以允许用户选择一个*文件** 进行编辑并直接保存到 Web 服务器。无需用户将文件保存到本地硬盘，然后手动将*文件** 上传回服务器。

经过几次凝视，似乎WebDav就是这样。我已经在 web.xml 中配置了启用 webdav 的 tomcat，现在我可以使用 Webdav 客户端 Cyber​​Duck 查看文件和编辑。

问题：

1.  是否可以在不安装 webdav 客户端的情况下查看/编辑/锁定*文件*？*
    原因是因为我有超过 3000 个桌面客户端使用该软件。webdav 的部署是一个问题，我如何让每个用户访问不同的 webdav，这样他们就看不到彼此的文件？
2.  是否可以触发本地应用程序在 WebDav中打开*文件*？*

*文件** = 表示可以从本地计算机打开的任何文件；示例：ms word、ms excel、ms powerpoint、pdf、PNG、JPG、txt 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:26:54.310

啊，我设法打开它： Runtime.getRuntime().exec("winword http://:/xyz/.../pgl_page-bi.doc");

问题是，每种类型的文件都需要在 .exec(""); 中包含不同的字符串。不像我预期的那么干净，但至少它有效。

# jquery - 即时创建 jQuery 对话框

> ID：11237692
> 
> 赞同：1
> 
> 时间：2012-06-28T03:28:19.663
> 
> 标签：jquery, dialog, non-modal

目前我有工作代码创建一些选择和复选框对象并将它们覆盖在当前文档上。然而，这是一个糟糕的解决方案，我需要将其改为非模式对话框，以便更容易阅读并且可以移动。我在 jqueryui.com 上查看了演示，但是当我复制源代码时，我什至无法让它显示一个对话框，所以我想我错过了一些东西。

'chooser' 变量中的值是固定的。在用户选择其中一个值后，我会根据选择创建一组复选框。当检查复选框或未选中复选框时，代码将执行一些操作（此处未显示）。如何将选择集和复选框改为非模态 jQuery 对话框对象并将其显示给用户，直到他们决定关闭它？除了以下对象之外，它唯一需要的另一件事是能够最小化和关闭。

```
var chooser = '<select class="criteria" id="criteria">' +
'<option value="Value 1">Value 1</option>' +
'<option value="Value 2">Value 2</option>' +
'</select>';

jQuery('.myClassName').addClass('my-chooser').append(
'<div class="criteria-chooser" id="criteria-chooser"></div>');
jQuery('.criteria-chooser').append(chooser);

jQuery('.criteria-chooser').append('<div class="criteria-choices" id="criteria-choices"></div>');
jQuery('.criteria-choices').append('<br>');
for (var i=0; i<len; i++) {
    jQuery('.criteria-choices').append('<tr>' +
    '<td><input type="checkbox" checked class="criteria-checkbox" id="' + i +
    '"></td>' +
    '<td> ' + arrayValue[i] + '</td>' +
    '</tr>');
} 
```

# .net - OhNetGen.exe 没有输出？（无论是代码还是错误信息！）

> ID：11237695
> 
> 赞同：1
> 
> 时间：2012-06-28T03:28:23.757
> 
> 标签：.net, mono, code-generation, upnp

我正在尝试评估 OhNet 在 iOS 平台上的机顶盒 UPnP 控制点解决方案。

我想使用 OhNetGen 为 UPnP 控制点堆栈生成一些自定义代理。我无法从该工具获得任何输出，无论是生成的代码还是错误消息！

我在 Win7 x64 平台上，我尝试为 x86 和 x64 下载预构建的 ohNet 版本，包括调试和发布版本。我还尝试更新到我认为可以为我提供 .NET v4 的最新版本的 WinSDK。使用必要的参数调用 OhNetGen.exe 时，任何二进制文件的行为都是相同的。

```
ohNetGen.exe --language=c --stack=cp --xml="c:\Program Files (x86)\UPnP\Developer Tools for UPnP Technologies\Sample Service Descriptions\AV_AVTransport-0.9.xml" --output=c:\Resources\UPNP\ohNet\proxies --domain=urn:schemas-upnp-org --type=AV_AVTransport-0.9 --version=1 
```

该命令在退出之前需要一些时间，但没有任何输出。既没有生成代理代码，也没有任何错误消息来说明失败的原因。由于我的设备上有一些自定义 UPnP 服务，如果我想使用 OhNet（我确实这样做了），我必须生成代理来控制它们！

感谢您提供的任何帮助或建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:32:33.350

根据一些建议和一些试验，我确实设法使用 OhNetGen 生成了代理。以下是步骤：

1.  解压 x64 发行版二进制下载。
2.  在文件夹ohNet-Windows-x64-release-dev\lib\t4中，新建路径OpenHome\Net\T4\Templates
3.  将所有 *.tt 文件从 lib\t4 复制到 lib\t4\OpenHome\Net\T4\Templates
4.  将 XML 服务模板放到相对于 OhNetGen.exe 的子目录中
5.  为代理创建一个输出目录，该目录是相对于 OhNetGen.exe 的子目录
6.  在命令提示符下，将目录更改为 lib\t4
7.  给出 xml 和输出选项的相对路径
8.  您现在应该能够以 lib\t4 作为当前目录运行 ohNetGen.exe。

仅供参考，这些是我使用的参数：

```
ohNetGen.exe --language=c --stack=cp --xml=config\EventServices.xml --output=proxies\ --domain=schemas-upnp-org --type=EventServices --version=1 
```

**编辑：像我上面那样输入域会导致 OhNetGen 生成一个在函数名称中带有破折号的代理。显然，这些是 C（和 C++）中的无效名称。您应该以 domain.org 格式输入域，OhNetGen 将处理任何必要的翻译。见下文：**

```
ohNetGen.exe --language=c --stack=cp --xml=config\EventServices.xml --output=proxies\ --domain=upnp.org --type=EventServices --version=1 
```

希望这可以帮助...

道格

# entity-framework - 每次我运行项目时，有什么方法可以运行代码优先迁移？

> ID：11237698
> 
> 赞同：1
> 
> 时间：2012-06-28T03:28:32.630
> 
> 标签：entity-framework, entity-framework-migrations

我想获取最新版本的数据库，并在每次项目运行时将一些行插入数据库进行测试。有没有办法在包管理器控制台中不输入命令的情况下使用最新版本的迁移升级数据库？

我找到了这篇文章，

[EF4.3 配置文件设置](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)

我知道我可以通过配置文件的上下文元素来让升级到最新版本，但是我不知道如何让每次在项目运行时没有输入命令的情况下运行升级。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:56:46.200

与上述配置等效的是在应用程序的引导程序中调用此代码：

```
Database.SetInitializer<YourContext>(new MigrateDatabaseToLatestVersion<YourContext, YourMigrationConfiguration>()); 
```

# java - 如何修改 HTML JLabel 以使用少于 8k 的缓冲区？

> ID：11237700
> 
> 赞同：3
> 
> 时间：2012-06-28T03:28:58.697
> 
> 标签：java, html, swing, jlabel

我发现每当我在带有 HTML 的 JLabel 上设置文本时，都会分配一个 8KB 的缓冲区，即使我的标签文本可能很短。深入研究一下，罪魁祸首似乎在于 DefaultStyledDocument：

```
public static final int BUFFER_SIZE_DEFAULT = 4096; 
```

看起来每次更改文本时，都会触发一个属性更改侦听器，并分配一个新的 HTMLDocument，其中 GapContent 具有该默认缓冲区大小。UTF-16 中的 4k 个字符为我提供了 8K 的内存，用于一个很小的标签。

据我所知，在分配文档之前，我无法更改该值。我认为反射可能会派上用场，每[使用 Java 反射更改私有静态最终字段](https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection)，但根据第二个答案，我似乎不走运。事后我考虑过调整间隙缓冲区的大小，但这似乎很棘手。

有人遇到过这个吗？我希望我必须变得非常老练才能有机会......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:04:07.473

我还没有遇到过这个问题，但是您可以使用具有指定初始长度的[GapContent来使用](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/GapContent.html#GapContent%28int%29)[此构造函数吗？](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/html/HTMLDocument.html#HTMLDocument%28javax.swing.text.AbstractDocument.Content,%20javax.swing.text.html.StyleSheet%29)默认构造函数使用默认缓冲区大小。

```
public DefaultStyledDocument()
{
    this(new GapContent(BUFFER_SIZE_DEFAULT), new StyleContext());
} 
```

所以只需使用`new HTMLDocument(new GapContent(/*whatever works for you*/), new StyleContext())`

# c#-4.0 - 如何在安装项目中写入 app.config 并在程序中使用它

> ID：11237702
> 
> 赞同：7
> 
> 时间：2012-06-28T03:29:39.350
> 
> 标签：c#-4.0, installation, app-config, visual-studio-setup-proje

*   我创建了一个从安装程序继承的 Installhelper.cs。
*   使用这段代码 (A) 覆盖 Install() 方法。

插入到 app.config 的这些值在安装后创建的**[projectName].exe.config 文件**中不可用。我已经在 app.config 中手动添加了如下所示的部分（B）

数据被传递给安装程序类，但数据不会写入 app.config 字段。在安装过程中，它们在创建的配置文件中保持不变。

任何帮助是极大的赞赏。我在这上面花了将近一天的时间。

代码 A：

```
[RunInstaller(true)]
public partial class Installation : System.Configuration.Install.Installer
{
    public Installation()
    {
        InitializeComponent();
    }

    public override void Install(IDictionary stateSaver)
    {
        //base.Install(stateSaver);

        try
        {
            // In order to get the value from the textBox named 'EDITA1' I needed to add the line:
            // '/PathValue = [EDITA1]' to the CustomActionData property of the CustomAction We added. 

            string userName = Context.Parameters["userName"];
            string password = Context.Parameters["password"];
            string folderPath = Context.Parameters["path"];

            MessageBox.Show(userName);
            MessageBox.Show(password);
            MessageBox.Show(folderPath);

            Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
           //config.AppSettings.Settings.Add("userName", userName);
           //config.AppSettings.Settings.Add("password", password);
           //config.AppSettings.Settings.Add("foderPath", folderPath);

            config.AppSettings.Settings["userName"].Value = userName;
            config.AppSettings.Settings["password"].Value = password;
            config.AppSettings.Settings["foderPath"].Value = folderPath;
            config.Save(ConfigurationSaveMode.Full);
            ConfigurationManager.RefreshSection("appSettings");

        }
        catch (FormatException e)
        {
            string s = e.Message;
            throw e;
        }
    }
} 
```

在应用程序配置中添加的部分是代码 B：

```
<appSettings>
<add key="userName" value="" />
<add key="password" value="" />
<add key="foderPath" value="" />
</appSettings> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:01:26.503

这个编码的问题是这一行

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

它没有给出配置文件在安装过程中所依赖的路径。因此必须将其更改为

```
string path = Path.Combine(new DirectoryInfo(Context.Parameters["assemblypath"].ToString()).Parent.FullName, "[project name].exe")

    Configuration config = ConfigurationManager.OpenExeConfiguration(path); 
```

现在它的工作。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:23:11.790

谢谢你。我们遇到了这个确切的问题，无法弄清楚为什么它不会写入文件。我做的唯一不同的事情是从应用程序中获取路径。

```
string path = Application.ExecutablePath;
Configuration config = ConfigurationManager.OpenExeConfiguration(path); 
```

# neo4j - 通过 Neo4j REST 在 Gemlin 中使用聚合

> ID：11237705
> 
> 赞同：2
> 
> 时间：2012-06-28T03:30:33.423
> 
> 标签：neo4j, gremlin

我通过 REST 接口使用 neo4j 1.7，并输入了以下查询：

```
{"script": "g.v(1).aggregate(x); g.V.except(x)", "params": {"x":[]}} 
```

它应该返回列表，缺少节点 1，而是返回整个节点列表。我查看了 neo4j 文档并查看了使用变量的示例，但此查询的行为似乎不如预期。

有没有其他人遇到过这个问题，或者这是不能/不应该通过 gremlin REST 接口完成的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:13:34.127

当您不在 Gremlin REPL 中时，您需要在表达式不是返回的最后一个表达式时手动迭代表达式（Gremlin 插件会自动迭代最后一个表达式）：

```
g.v(1).aggregate(x).iterate(); g.V.except(x) 
```

但是您可以将其简化为如下语句：

```
g.V.except([g.v(1)]) 
```

# mysql - MySQL将表的校验和存储在另一个表中

> ID：11237712
> 
> 赞同：2
> 
> 时间：2012-06-28T03:31:18.573
> 
> 标签：mysql, statistics, checksum

上下文：我们有带有大量表的大型数据库。他们中的大多数（99%）都在使用 innodb。我们希望有一个日常流程来监控哪个表已被修改。当他们使用 innodb 时，`Update_time`from的值

```
SHOW table STATUS from information_schema; 
```

一片空白。出于这个原因，我们想要创建一个日常程序，将每个表的校验和（以及其他相关的东西）存储在某个地方（最好是另一个表）。对此，我们将进行不同的检查。

问题：我正在尝试使用

```
checksum table from db_schema.table_name; 
```

它返回一个包含 2 列的结果集表：“表”、“校验和”。它给了我想要的值，但我无法在 select 或 insert 语句中使用它。

我尝试了很多东西，例如：

```
select `checksum` from (checksum table from db_schema.table_name); 
```

或其他类似的查询。但我无法从结果集中提取数据。

有没有办法我可以做到这一点？在此先感谢您的帮助。

编辑：最后我想要的是构建一个更复杂的结果集，其中包含不同的信息（表模式、表名、计数、校验和、日期时间：now()...）然后我将使用这个结果集与昨天的值并绘制我自己的统计数据。这就是为什么我想从该结果集中获取校验和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:56:15.767

无法直接使用 SQL 保存 CHECKSUM TABLE 的结果。您也不能在存储过程中使用准备好的语句或游标来使用校验和结果。

你最好围绕它制作一个脚本，或者下载一些流行的工具来为你做这件事。

对于使用 CHECKSUM=1 表参数的 MyISAM 表，您可以像这样简单地使用 INFORMATION_SCHEMA：

```
SELECT TABLE_NAME,CHECKSUM FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'test' AND ENGINE='MyISAM' 
      AND CHECKSUM IS NOT NULL; 
```

# java - 使用 Java 代码将 HTML 报告导出到 MS Word

> ID：11237713
> 
> 赞同：0
> 
> 时间：2012-06-28T03:31:22.063
> 
> 标签：java, jsp, struts1

我正在struts1中做一个项目。有一个小问题。

我有一个 HTML 报告，我需要将它导出到 MS Word 文档并打印出来。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:42:44.490

您可以考虑使用[Apache POI](http://poi.apache.org/)以 Microsoft Word 格式输出您的报告。您也可以参考[这个链接](http://tkgospodinov.com/writing-microsoft-word-documents-in-java-with-apache-poi/)来了解它是如何使用 Apache POI 完成的。一个基本的想法是，在您扩展 Action 的类中，使用 HttpServletResponse 输出文件。例如：

```
String filename = "words.doc";
p_response.setContentType("application/msword");
p_response.setHeader("Content-disposition",
"Attachment; filename=" + filename); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T00:00:16.223

将报告写成简单明了的 HTML。然后，对浏览器*撒谎：*

```
response.setHeader("Content-Disposition", "attachment; filename=\""
            + reportName + ".doc\"");
response.setContentType("application/msword");

report.writeTo(response.getOutputStream()); // Actually writes HTML, not doc. 
```

浏览器将假定它是一个 Word 文档并询问用户他们想如何打开它（即使用 MS Word 或 OpenOffice）。MS Word 和 OpenOffice 都足够聪明，不会被 .doc 文件的 HTML 内容所迷惑，并且会打开它供用户编辑。

如果必须只打印报告，我建议改为导出 PDF，可能使用 JasperReports，或者只为用户提供一个纯 HTML 页面进行打印。

# r - 如何在不使用外部图像托管的情况下在 knitr 生成的 github 上的 Markdown 中显示图像？

> ID：11237715
> 
> 赞同：16
> 
> 时间：2012-06-28T03:31:49.723
> 
> 标签：r, github, knitr, rstudio

我喜欢将包含多个 R Markdown 和 Markdown 文件的存储库上传到 github。

这是[github 上此类降价文件的示例](https://github.com/jeromyanglim/gelman-bayesian-data-analysis/blob/master/exercise-2-11-1/exercise-2-11-1.md)。这是一个屏幕抓取。

* * *

![在此处输入图像描述](../Images/269e68797d32dc66ff133785f7c93d06.png)

* * *

问题是图像不显示。您可以单击图像，然后您将转到文件的存储位置。引用的文件是：

```
 https://github.com/... /blob/.../myfigure.png 
```

而我认为它需要参考

```
 https://github.com/... /raw/.../myfigure.png 
```

### 我考虑的事情：

**imgur：**我可以通过添加以下代码来使用外部图像托管（例如，[参见此示例）：](https://raw.github.com/yihui/knitr/master/inst/examples/knitr-upload.Rmd)

```
```{r setup}
opts_knit$set(upload.fun = imgur_upload) # upload all images to imgur.com
```` 
```

但是，由于各种原因，我不想这样做（我在防火墙后面上传时遇到问题；它很慢；它会产生不必要的依赖）

**Rpubs：**还有非常酷的[Rpubs 。](http://rpubs.com/)但是，在发布时，它似乎更适合单个降价文档而不是多个 R 降价文档。而且它没有在源 R Markdown 和 Markdown 文档之间提供如此紧密的联系。

### 问题

*   是否有使用 R Markdown 和 knitr 生成 Markdown 文件的工作流程，这些文件在上传到 github 时允许 Markdown 文件显示存储在 github 存储库中的图像？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T03:41:56.503

这曾经是最小示例的一部分，使用

```
opts_knit$set(base.url='https://github.com/.../raw/.../') 
```

[在此处](https://github.com/yihui/knitr/commit/a562a1792a07aa1eaaa159afd01c037ac86c585e)和[此处](https://github.com/yihui/knitr/commit/e85848c6c2e3464fdc5d6c74154d19b049f32926)查看更改。

另见[http://yihui.name/knitr/options](http://yihui.name/knitr/options)。

**编辑**[更新以将 base.url 恢复为以前的值

关于切换，您可以将函数定义为

```
create_gitpath <- function(user, repo, branch = 'master'){
   paste0(paste('https://github.com', user, repo, 'raw', branch, sep = '/'),'/')
}

my_repo <- create_gitpath(user, repo)

knit.github <- function(..., git_url  ){
 old_url <- opts_knit$get('base.url')
 on.exit(opts_knit$set(base.url = old_url))
 opts_knit$set(base.url  = git_url)
 knit(..., envir = parent.frame())
} 
```

运行`knit`直到你想推`github`然后运行`knit.github(..., git_url = my_repo)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T07:16:25.740

Markdown 文件开头的以下代码呢？

```
``` {r setup,echo=FALSE,message=FALSE}
gitsubdir <- paste(tail(strsplit(getwd(),"/")[[1]],1),"/",sep="")
gitrep <- "https://github.com/mpiktas/myliuduomenis.lt"
gitbranch <- "master"
opts_knit$set(base.url=paste(gitrep,"raw",gitbranch,gitsubdir,sep="/"))
``` 
```

`gitrep`可以对其进行调整，以便`gitbranch`git 报告。在这里，我假设我是主 git 存储库目录下的一个目录级别。同样，这可能会被调整以适应更复杂的场景。

我在github上测试过，这里是 [Rmd](https://github.com/mpiktas/myliuduomenis.lt/blob/master/2012-05-23-roziniai-akiniai/2012-05-23-roziniai-akiniai.Rmd)文件和对应的[md](https://github.com/mpiktas/myliuduomenis.lt/blob/master/2012-05-23-roziniai-akiniai/2012-05-23-roziniai-akiniai.md)文件。

# java - 使用 Bindy 解析数据时出现日期模式问题

> ID：11237724
> 
> 赞同：0
> 
> 时间：2012-06-28T03:33:10.433
> 
> 标签：java, jpa, apache-camel

我正在从 CSV 文件中读取日期值，该值为“21/08/2009”。在解析这些数据时，Bindy 给了我一个错误，如下所示：

**org.apache.camel.dataformat.bindy.format.FormatException：提供的日期不符合定义的模式。**

我编写了以下代码。

```
package com.project1.projectdomain;

import java.lang.String;
import java.util.Date;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

import org.apache.camel.dataformat.bindy.annotation.CsvRecord;
import org.apache.camel.dataformat.bindy.annotation.DataField;

import com.project.Identifiable;

@Entity
@CsvRecord(separator = ",")
public class Trade implements Identifiable<String> {
     Classname classobject;

    @Id
    @DataField(pos = 1)
    private String id;

    @DataField(pos=2)
    private String code;

    @Temporal(TemporalType.DATE)
    @DataField(pos=3)
    private Date date1;

    @Temporal(TemporalType.DATE)
@DataField(pos=4)
    private Date date2; 
```

我使用 maven 构建项目，jpa 3.0 和 apache camel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:05:54.060

您需要在[@DataField](http://camel.apache.org/maven/camel-2.9.0/camel-bindy/apidocs/org/apache/camel/dataformat/bindy/annotation/DataField.html)上设置一个[模式属性](http://camel.apache.org/maven/camel-2.9.0/camel-bindy/apidocs/org/apache/camel/dataformat/bindy/annotation/DataField.html#pattern%28%29)，并根据[DateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)指定您使用的日期模式：

```
@DataField(pos=4, pattern="dd/MM/yyyy") 
```

# c# - 如何获取模板中动态资源设置的文本属性的值？

> ID：11237726
> 
> 赞同：1
> 
> 时间：2012-06-28T03:33:38.703
> 
> 标签：c#, .net, wpf, dynamicresource

我在这`.XAML`部分面临问题，有一个模板，`textblock`其文本属性的值由动态资源设置。在 中`.CS`，我不知道如何获取 text 属性的值。使用以下代码，只需获取一个空字符串。

```
DependencyObject tempObject = varDataGrid.Columns[i].HeaderTemplate.LoadContent();
(tempObject as TextBlock).Text.ToString(); 
```

给点建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:05:20.737

> text 属性的值由动态资源设置

假设您将此文本作为资源，那么在您后面的代码中应该能够使用您在标记中使用的相同资源键调用 this.FindResource("yourResourceKey")，并且它应该解析为与您的资源相同的类型. 例如：

```
string text = (string)this.FindResource("yourResourceKey"); 
```

如果这不是您正在执行的操作，请将您的 XAML 代码发布到您定义模板和资源的位置。

# javascript - 将 onmouseenter 设置为带参数的函数

> ID：11237729
> 
> 赞同：0
> 
> 时间：2012-06-28T03:33:58.250
> 
> 标签：javascript, function-pointers, onmouseover

我试图在准备好的回调中为元素的所有子 div 设置 onmouseenter 函数。所以身体的负荷是

```
 function ready(){
      for(var i=0;i<document.getElementById("pieces").childNodes.length;i++){
    var n=document.getElementById("pieces").childNodes.item(i);
    n.onmouseenter=function(){showBorder(n);};
    n.onmouseleave=hideBorder;
     }
    } 
```

但是所有获得其 onmouseenter 函数的 div 都使用在循环结束时出现的 n 值。我希望每个 onmouseenter 在设置回调时使用 n 的值。

我能做些什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:49:09.230

问题是处理程序绑定到相同的 single `n`。因此，更改会`n`更改*所有*处理程序。`n`

 *您可以做的是`n`通过传递`n`给在每次迭代中执行的即时函数来“本地化”。这使得`n`每个处理程序都绑定到`n`立即函数的，而不是`n`函数的`ready`

```
function ready() {
    var n;
    for (var i = 0; i < document.getElementById("pieces").childNodes.length; i++) {

        //the local n takes precedence over the outer n
        //therefore any use of n in the immediate function refers to the local n
        (function(n) {

            //you can actually name the variable anything you want
            //but to override the outer n, we use n for our local n

            n = document.getElementById("pieces").childNodes.item(i);
            n.onmouseenter = function() {
                showBorder(n);
            };
            n.onmouseleave = hideBorder;
        }(n));
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:47:01.530

JavaScript 具有函数级作用域，因此循环中的变量声明`n`（但**不是**`document.getElementById('pieces').childNodes.item(i)`to的赋值`n`）`for`实际上被提升到`ready`函数的顶部。

要理解这一点，假设您的代码实际上是这样编写的，因为 JavaScript 引擎实际上是这样解释它的：

```
function ready() {
    var i, n;
    for (i = 0; i < document.getElementById('pieces').childNodes.length; i++) {
        n = document.getElementById("pieces").childNodes.item(i);
        n.onmouseenter = function () { showBorder(n); };
        n.onmouseleave = hideBorder;
    }
} 
```

The assignment of `function () { showBorder(n); }` to `n`'s `onmouseenter` property creates a closure such that when that anonymous function actually executes it will have access to any and all data that was in scope at the time of creation, i.e. when the `ready` function is invoked. Thus, every one of those `onmouseenter` methods will have a reference to the variable `n` which, by the time `ready`'s execution is complete, has a value equivalent to `document.getElementById('pieces').childNodes.length`.

I would suggest the following code snippet:

```
function ready() {
    var pieces, i, l, n;
    pieces = document.getElementById('pieces').childNodes;
    for (i = 0, l = pieces.length; i < l; i++) {
        n = pieces.item(i);
        n.addEventListener('mouseover', (function (m) {
            showBorder(m);
        })(n), false);
        n.addEventListener('mouseout', hideBorder, false);
    }
} 
```

1.  Declare all variables at the top of the scope so there's no confusion about their scope within the function context.
2.  Lookup `document.getElementById('pieces').childNodes` *once* and assign that memory location to the `pieces` variable to avoid another lookup every time you need to reference that set of nodes.
3.  The comparison statement in the `for` loop is executed *every* iteration so instead of looking up `pieces.length` repeatedly assign it to the variable `l` once and reference that variable each time instead.
4.  The use of `on<event>` methods of a DOM element is, for the most part, the worst way to assign event handlers if for nothing else because you can only have a single function registered to a given DOM element at any time. The `addEventListener` method is the preferable way to assign handlers unless you expect your users to have an older version of Internet Explorer which instead uses the `attachEvent` method.
5.  The `mouseenter` and `mouseleave` events were not standard DOM events but rather custom events added by Microsoft for older versions of Internet Explorer. They were added to the DOM Level 3 specification and Firefox and Opera introduced support for these events, but Webkit still does not support them.*

# android - 在 Android 中听 ENTER 键

> ID：11237731
> 
> 赞同：10
> 
> 时间：2012-06-28T03:34:12.623
> 
> 标签：android, keylistener, enter

这是我的代码：

```
public class CaptureENTER extends Activity implements OnKeyListener{

/* on create and other stuff in here*/

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                (keyCode == KeyEvent.KEYCODE_ENTER)) {
           Toast.makeText(LiVoiceActivity.this,
                                     "YOU CLICKED ENTER KEY",
                                     Toast.LENGTH_LONG).show();

        }       
        return false;
    } 
```

我不知道发生了什么，但是当我按下键盘上的 ENTER 键（我使用的是 Android 模拟器）时，**事件未激活**。

我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T03:55:27.977

回归`true`不是问题。

您失败了，因为您必须将侦听器设置为 a `View`，而不仅仅是`Activity`.

**为澄清而编辑：**

侦听器的返回值并不意味着被理解为事件将被调用或不会被调用的信号。无论如何它不能，因为该`return`子句仅在您显示*后才*`Toast`被调用。

这是向系统发出的一个信号，表明需要进一步的操作（return `false`）或者该方法完全正确地处理了事件（return `true`）。这就是为什么[文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html#onKey%28android.view.View,%20int,%20android.view.KeyEvent%29)用这些话说：

> **退货**
> 
> 如果侦听器已经***消费***了事件，则为 true，否则为 false。

* * *

两者之间有区别：

*   `View.OnKeyListener` `interface`在你的`Activity`课堂上实施。

这允许您`Activity`在您的类中实现接口提供的功能，即向世界声明您*知道*`Activity`如何处理此类事件。

请注意我说的“*声明*”。仅仅因为你宣称你知道如何处理一个任务，并不意味着人们会把这个任务交给你，*也不意味着你可以自己生成这样的任务*。`implements`在我看来，这是关键字的一个很好的隐喻。这里是`Activity`“要求任务”。

**除了隐喻，从技术上讲，它`Activity`正在定义一种处理该事件的方法，但它本身不能生成那种事件。**

*   将`View`回调设置为您的`Activity`实现

使用它， a`View`绑定到一个侦听器（恰好是你的`Activity`），承诺在事件发生时通知它。

它与您“签订合同”`Activity`以接收输入（用户`View`在焦点对准时按下 ENTER 键）并通知`Activity`. 并且由于`Activity`先前声明它能够执行该操作，因此***双方*都可以按照先前的约定执行合同**（参见上一项）。

**再次抛开比喻，从技术上讲，这里`Activity`是由 注册的，`View`以便稍后在`View`触发事件时得到通知。`Activity`声明*如何*，但`View`知道*何时*。**

**结论：**

这只是`interface`s 的一个隐喻（至少在这种情况下）。它可能看起来很复杂，但是当您将其视为两方协议时，它就非常清楚了。如果您需要更好的技术解释，我建议您阅读有关`interface`s.

* * *

**回答新的评论问题：**

> 你好大卫和其他人。真的我不能为整个活动设置一个监听器吗？

不是那样的。您需要覆盖`dispatchKeyEvent`. 一个例子：

```
@Override
public boolean dispatchKeyEvent(KeyEvent e) {
if (e.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
    Toast.makeText(UITestsActivity.this,
               "YOU CLICKED ENTER KEY",
                Toast.LENGTH_LONG).show();
        return true;
    }
    return super.dispatchKeyEvent(e);
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-28T03:45:05.223

尝试这个：

```
public class CaptureENTER extends Activity implements OnKeyListener{ 

/* on create and other stuff in here*/ 

    @Override 
    public boolean onKey(View v, int keyCode, KeyEvent event) { 
        if ((event.getAction() == KeyEvent.ACTION_DOWN) && 
                (keyCode == KeyEvent.KEYCODE_ENTER)) { 
           Toast.makeText(LiVoiceActivity.this, 
                                     "YOU CLICKED ENTER KEY", 
                                     Toast.LENGTH_LONG).show(); 
          return true;

        }        
        return false; 
    } 
```

**编辑：** [大卫](https://stackoverflow.com/users/489607/david-cesarino)是正确的！

返回 true 不是问题。

您失败了，因为您必须将侦听器设置为视图，而不仅仅是活动。

# javascript - 如何“减少请求序列化”并提高 Google Page Speed？

> ID：11237734
> 
> 赞同：1
> 
> 时间：2012-06-28T03:34:23.693
> 
> 标签：javascript, jquery, optimization

因此，显然这两个外部 js 文件弄乱了我的 Google PageSpeed，它指出：

*   [http://otter.topsy.com/stats.js](http://otter.topsy.com/stats.js?etc) ?等...
*   [http://ajax.googleapis.com/.../jquery.min.js](http://ajax.googleapis.com/.../jquery.min.js)

都是序列化的请求（无论这意味着什么？）并且几乎没有给出关于如何改变这一事实的解释或想法。

以 jQuery.com 的 Google PageSpeed 检查器页面为例：[https ://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fjquery.com_2F&mobile=false&rule=AvoidExcessSerialization](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fjquery.com_2F&mobile=false&rule=AvoidExcessSerialization)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:47:37.030

您可以使用 JavaScript 和 CSS 捆绑器减少请求的总数（从而也减少序列化）。这些工具将多个 JavaScript 文件组合成一个 JavaScript 文件（也可以选择缩小文件），并将多个 CSS 文件组合成一个 CSS 文件。这导致从浏览器到服务器的 HTTP 连接更少，因此需要串行获取的内容更少。

ASP.Net MVC 4 对此有内置支持：

[http://theshravan.net/bundling-and-minification-support-in-asp-net-mvc-4/](http://theshravan.net/bundling-and-minification-support-in-asp-net-mvc-4/)

其他环境也有许多解决方案，例如[Juicer](http://cjohansen.no/en/ruby/juicer_a_css_and_javascript_packaging_tool/)。

如果您无法捆绑所有资源（可能一些来自 CDN，而另一些则在本地提供），您可以使用诸如[require.js 之](http://requirejs.org)类的负载管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:41:32.410

一个加载，然后另一个加载。谷歌告诉你异步加载它们（你可以使用某种加载管理器，比如 require.js 或 head.js）。

# hashtable - 如何在 RAM 中存储一个巨大的哈希表并在不同的应用程序之间共享？

> ID：11237741
> 
> 赞同：0
> 
> 时间：2012-06-28T03:35:48.787
> 
> 标签：hashtable, shared-memory, memory-mapped-files

数据包含数十亿个 ID 分数对等信息。为了快速访问这些配对信息，我计划使用哈希表容器，因为它的搜索时间复杂度是 O(1)。考虑到原始数据在 80G 左右，我不想每次需要运行搜索应用程序时都将数据加载到 RAM 中。我想要做的是生成一次哈希表，然后将其存储在 RAM 中，并具有文件系统生命周期的持久性（RAM 的费用不是标准），并用不同的应用程序搜索它。

根据我有限的理解，我可以使用“内存映射文件”（增强 C++ 库）。但我有问题：

1）将哈希表数据结构写入映射文件时是否可以保留它？2) 将现有文件映射到 RAM 需要多少时间？

任何答案/评论/建议都是最受欢迎的！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:44:25.270

1) 是的。该文件只是字节，就像内存一样。

2）创建映射将是有效的即时。除非在 64 位操作系统上，否则您将无法一次连续映射所有节点。当然，如果文件缓存不能保存您正在使用的地图部分，则必须从磁盘读取。

身份证有多大？对有多大？你有多少参考地点？（是否有大量使用的对和轻度使用的对？）您多久会搜索一次不存在的对？数据是否以读取为主？可能有更好的方法来做到这一点。我强烈建议从一个更广泛的问题开始，以确保您不会陷入次优路径。

# javascript - JavaScript 拆分值

> ID：11237747
> 
> 赞同：0
> 
> 时间：2012-06-28T03:36:25.353
> 
> 标签：javascript, split

我有以下代码：

```
var format_time="28-06-12 9:30:50";
var my_time_array=format_time.split(":");
alert(my_time_array[0]); // alerts 28-06-12 9
alert(my_time_array[1]); // alerts 30
alert(my_time_array[2]); // alerts 50 
```

当我只希望它显示“9”时，第一个警报错误地显示“28-06-12 9”。此外，如果 format_time="28-06-12 10:30:50"，那么我希望它显示“10”。

我似乎无法解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:40:35.150

先按空间分割：

```
var my_time_array=format_time.split(" ")[1].split(":"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T03:39:34.527

尝试

```
var hour = my_time_array[0].split(" ");
alert(hour[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:41:09.000

试试这个：

```
var format_time="28-06-12 9:30:50"; 
var my_time_array=format_time.split(" "); 
var my_time_array2=my_time_array[1].split(":"); 

alert(my_time_array2[0]); // alerts 9 
alert(my_time_array2[1]); // alerts 30 
alert(my_time_array2[2]); // alerts 50 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:41:01.390

```
var format_time="28-06-12 9:30:50"; 
var my_time_array1=format_time.split(" "); //Split on space. 
var my_time_array=my_time_array1[1].split(":"); //now split the time part.
alert(my_time_array[0]); // alerts 28-06-12 9 
alert(my_time_array[1]); // alerts 30 
alert(my_time_array[2]); // alerts 50 
```

# macos - llvm-g++ 创建多线程应用程序

> ID：11237749
> 
> 赞同：0
> 
> 时间：2012-06-28T03:36:34.387
> 
> 标签：macos, gcc, llvm

我最近有一台新的 MacBook Air，我正在使用 Qt Creator 作为 IDE 继续我在 OS X 中的开发。我对`llvm`编译器了解不多，但是当我运行应用程序时，Qt Creator 的调试器显示 4 个线程。我已经安装了 Xcode 并且 Qt Creator 正在`llvm-g++`用于编译器。

在 Linux 中，如果我传递`-fopenmp`给编译器和链接器并使用适当的指令，我可以使用 gcc 创建多线程应用程序，但`llvm`似乎是自己完成的。我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:54:12.097

LLVM 不会将线程引入您的应用程序。QT 为自己的目的创建线程，可能使用 pthreads API。

# c++ - 如何让声音停止在 OpenAL 中播放

> ID：11237751
> 
> 赞同：1
> 
> 时间：2012-06-28T03:36:39.177
> 
> 标签：c++, openal

我试图在单击事件上执行播放声音方法，然后在发布时调用停止方法，在 C++ 中使用 OpenAL。我的问题是我无法让它在发布时停止播放。我播放声音的源代码如下：

```
bool SoundManager::play(QString fileName, float pitch, float gain)
{
static uint sourceIndex = 0;
ALint state;

// Get the corresponding buffer id set up in the init function.
ALuint bufferID = mSoundBuffers[fileName];

if (bufferID != 0) {
    // Increment which source we are using, so that we play in a "free" source.
    sourceIndex = (sourceIndex + 1) % SOUNDMANAGER_MAX_NBR_OF_SOURCES;
    // Get the source in which the sound will be played.
    ALuint source = mSoundSources[sourceIndex];

    if (alIsSource (source) == AL_TRUE) {

        // Attach the buffer to an available source.
        alSourcei(source, AL_BUFFER, bufferID);

        if (alGetError() != AL_NO_ERROR) {
            reportOpenALError();
            return false;
        }

        // Set the source pitch value.
        alSourcef(source, AL_PITCH, pitch);
        if (alGetError() != AL_NO_ERROR) {
            reportOpenALError();
            return false;
        }

        // Set the source gain value.
        alSourcef(source, AL_GAIN, gain);

        if (alGetError() != AL_NO_ERROR) {
            reportOpenALError();
            return false;
        }
        alGetSourcei(source, AL_SOURCE_STATE, &state);
        if (state!=AL_PLAYING)
        alSourcePlay(source);
        else if(state==AL_PLAYING)
            alSourceStop(source);

        if (alGetError() != AL_NO_ERROR) {
            reportOpenALError();
            return false;
        }
    }
} else {
    // The buffer was not found.
    return false;
}` 
```

我认为问题在于第二次调用它时，应该停止它，它是一个不同的源，这就是它的状态不播放的原因。如果这是问题，那么我如何访问相同的源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:42:49.207

当然它和以前不一样的来源，你`sourceIndex`每次调用都增加变量。

所以第一个调用，播放，`sourceIndex`将是`1`（`sourceIndex + 1`）。下次您调用该函数（顺便说一句，该函数因*切换*播放的东西而被错误地命名）然后`sourceIndex`将再次增加一，这将为您提供源向量的新索引。

# ios - 目标 C 中的自我

> ID：11237752
> 
> 赞同：0
> 
> 时间：2012-06-28T03:37:15.930
> 
> 标签：ios, objective-c

```
-(void)setFaceView:(FaceView *)faceView  
{
_faceView= faceView;
self.faceView.dataSource = self;
} 
```

我刚开始通过 iTunes 上著名的斯坦福讲座学习 IOS 编程。我目前正在上第 6 课，我开始难以跟上课程的进度。

这是一个非常基本的东西，但我真的不明白“自我”是如何工作的。谁能教我这段代码中的“自我”在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:45:59.137

`self`是实例方法的objective-c中的一个隐式参数，它指的是执行该方法的对象-请参见此处：[给Self和Super的消息](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-89660)

在这种情况下，`self.faceView`调用绑定到运行此方法的实例的 faceView 的属性访问器，而赋值`_faceView= faceView;` 是将输入参数分配给`faceView`iVar `_faceView`。`self.faceView.dataSource = self;`将执行此方法的对象分配给对象`dataSource`属性的`faceView`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:00:38.040

self 是对象本身。当你分配一个对象时。它留出足够的内存来保存该类将使用的所有变量。

但是，当您初始化对象时，您将该内存附加到自身。self 本质上是一个“变量”（我松散地使用这个词），它使您可以访问您所在对象的所有功能。

如果您有使用以下方法的对象

```
+(BOOL) isThisWorking{ return YES;} 
```

您将不得不在类上调用该方法。不涉及自我。

但是，如果您有方法

```
-(BOOL) isThisWorking{ return YES; } 
```

那么您将有一个附加到类实例的方法。

调用第一个将要求您在类对象本身上调用它。

```
[MyObject isThisWorking]; 
```

调用第二个将要求您在实例上调用它。

```
MyObject *testObject = [[MyObject alloc] init];
[testObject isThisWorking]; 
```

当您在测试对象中的方法中时，您将没有“testObject”来调用方法。

自我填补了这个空白。

如果您来自另一种编程语言，您将熟悉做同样事情的其他结构。

例如在 .net 中，对象是“this”

如果我没记错的话，在老学校VB中，对象是“我”

# php - 使用 PHP 发送 POST 请求

> ID：11237754
> 
> 赞同：0
> 
> 时间：2012-06-28T03:37:34.840
> 
> 标签：php, http, post, http-post

我试图在一小时内使用 PHP 发送大约 5000 个 HTTP POST 请求，并获取一个 JSON 数据作为每个请求的响应。我已经知道以下四种方式：

1.  从 PHP Curl 发布
2.  从 Pecl_Http 发布
3.  从 Pecl_Http POST：OO 接口
4.  从 file_get_contents 发布

我的问题是我不知道在获得最佳性能的情况下应该使用哪一个。

*   你能解释一下每种方式的优缺点吗？
*   还有其他方法吗？
*   我怎样才能并行发布？当然，我需要每一个回应。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:42:57.387

这些没有区别。一个 POST 就是一个 POST，不管你怎么做，99% 的时间都花在了网络上。

如果您需要发出这么多请求，请考虑从命令行运行您的脚本。然后您可以同时多次启动同一个命令行。

# iis-7 - IIS 7 服务器中的日期时间格式问题

> ID：11237765
> 
> 赞同：5
> 
> 时间：2012-06-28T03:38:18.893
> 
> 标签：iis-7, datetime-format

我在 IIS 7 WS2008 上托管了我的网站之一。后来我意识到存在一些日期时间格式问题，比如我期待 dd/MM/yyyy 格式的东西，但它是 MM/dd/yyyy 格式，因此它曾经给我日期时间转换错误。

所以我通过以下步骤更改了日期时间格式：

控制面板 -> 区域和语言选项 -> 高级

并更改了注册表项

regedit >> HKEY_USERS>>默认>>控制面板>>国际

在这里我们更改了 dd MM yyyy 格式的“sLongDate”和“sShortDate”键

并重新启动服务器。

现在，问题是如果我创建新网站，我会发现一切正常，包括我的日期时间格式

但是我在进行所有这些日期时间设置更改之前创建的实际网站根本没有任何变化，我仍然面临同样的日期时间问题。

所以我已经删除了该站点并再次使用相同的 IP 地址和相同的端口托管了相同的站点，但仍然是同样的问题。

那么，是否像特定端口的某些日期时间配置一样。

**我不能改变我的端口。**

请建议我正确的解决方案。

提前致谢...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T05:30:59.927

经过大量的狩猎，我找到了解决问题的方法：

1) 更改服务器的日期时间格式：

**控制面板 -> 区域和语言选项 -> 高级**

2) 打开 IIS 并按照以下步骤操作：（**对于 IIS7）**

```
- 点击你的网站
- 选择 .NET 全球化选项
- 从文化选项卡中，选择所需的文化和 UI 文化。
- 最后 iisreset。
- 完成....

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-13T06:09:23.440

注册表项的更改

`regedit >> HKEY_USERS >> DEFAULT >> Control Panel >> International`

*我们已经更改了dd MM yyyy*格式的“sLongDate”和“sShortDate”键

并重新启动服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-06T05:46:07.987

1.  更改服务器的日期时间格式：

    控制面板 -> 区域和语言选项 -> 高级

2.  打开 IIS 并按照以下步骤操作：（对于 IIS7）

    *   点击你的网站
    *   选择 .NET 全球化选项
    *   从文化选项卡中，选择所需的文化和 UI 文化。
    *   最后iisreset。
    *   完成……

Sham 发布的这个答案对我们有用。我们正在升级服务器，应用程序或数据库没有变化，但升级后我们遇到了日期时间的字符串格式问题。以上建议对我有帮助...

# java - 将 Swing 中的 JTextArea 存储在 Access 2007 数据库中

> ID：11237768
> 
> 赞同：1
> 
> 时间：2012-06-28T03:39:26.477
> 
> 标签：java, sql, database, swing, jtextarea

我目前正在用 Java 编写一个应用程序，该应用程序执行 Swing GUI 组件的输入/输出，并从本地 Microsoft Access 2007 数据库存储/检索这些数据。一切都很顺利，除非我尝试使用来自 JTextArea 的输入来更新记录，该 JTextArea 将存储在 Text 或 Memo 字段中。我可以很好地接收来自 JTextField 的输入，但我得到一个“SQLException：UPDATE 语句中的语法错误”。使用 JTextArea。

这是有问题的代码：

```
/* <in_some_method> */
myJTextArea.setText(someString); // the components can have the exact
myJTextField.setText(someString); // same string and still have problems

saveEdit(myTable, myColumn, myJTextField.getText(), myID); // this works fine
saveEdit(myTable, myColumn, myJTextArea.getText(), myID); // this throws an exception
/* </in_some_method> */

/* the update method */
public void saveEdit(String table, String column, String value, long id) {
    String query = "UPDATE " + table + " ";
    query += "SET " + column + " = '" + value + "', "
    query +=  "UpdatedAt = Now() ";
    query += "WHERE ID = " + id;

    try {
        // conn is a working connection to the database
        Statement s = conn.createStatement();

        // execute the query
        s.executeUpdate(query);

        // close open database handle
        s.close();

    } catch (Exception ex) {
        System.err.println(ex);
    }
} 
```

几件事：

*   我不认为它与数据库中字段的数据类型存在；我已经尝试过 Memo 和 Text 的类型，并且都可以使用 JTextField 并且不能使用 JTextArea。

*   如前所述，异常是“SQLException：UPDATE 语句中的语法错误”。所以我知道我的问题与数据库表的布局无关；请求的表和列存在并且可以访问。

有人有什么想法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:53:27.913

我不知道是什么`someString`，但我打赌它包含换行符等，所以当设置为 a 时`JTextField`它会“变平”，而设置为`JTextArea`它时不会。因此，在获取时，您将拥有两个不同的字符串，一个可以正常工作，另一个会导致语法错误。

无论是哪种情况，您都应该在将字符串保存到数据库之前对其进行[转义](https://stackoverflow.com/q/1812891/520779)，否则您将面临[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的风险。这也将确保您的方法对两个组件都能正常工作（尽管由于上述原因，确切的字符串可能仍然不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:04:19.223

我同意 mgibsonbr 的观点，它对 SQL 注入很敏感。这是另一个关于如何使用它们的[教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

但是对于您的直接问题，鉴于使用文本字段的 getText() 检索的字符串已经有效，您是否尝试过存储使用 getText() 从 JTextArea 检索的字符串并检查它是什么？或者甚至尝试在 JTextArea 的 getText 方法上调用 trim 函数，这样就没有空格等。

也许没有为 JTextArea 正确设置 someString？

# c++ - 如何计算通过 C++ 将文件加载到应用程序中的时间？

> ID：11237777
> 
> 赞同：0
> 
> 时间：2012-06-28T03:40:41.243
> 
> 标签：c++, windows, file

我已经用 C++ 编写了一个代码来在其默认应用程序中打开一个文件，就像`.doc`在 MS-Word 中一样，现在我想计算在其应用程序中打开文件的时间。

为此，我需要知道加载到该应用程序中的文件百分比。但从过去 7 天开始，我找不到任何合适的解决方案。那么任何人都可以帮助我解决这个问题吗？

如果我使用的是 Windows，那么 Windows 任务管理器可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:00:30.117

你试图做的不仅不可能，甚至没有意义。

当您在 WMP 中播放 MP3 时，它不会将整个文件加载到内存中。相反，它一次将一小部分文件映射到内存中，这样它就可以在播放 MP3 时动态解码它。（我想如果你一直播放这首歌，没有停止或跳过或快进或倒带，它最终会读取文件的每个字节，可能在歌曲结束前几秒钟完成，但我怀疑这就是你'正在寻找。）

同样，Word 不会将任何整个 .doc 文件读入内存（除非它非常小）。这就是它能够在不使用大量内存的情况下编辑巨大文件的方式。（同样，如果你翻阅整个文件，它可能最终会读取每个字节——就此而言，它最终可能会将足够多的文件复制到自动保存的备份文件中，不再需要查看原始文件——但同样，我怀疑这就是你要找的东西。）

如果您只关心某些特定的应用程序，并且这些应用程序具有 COM 自动化接口（如 WMP 和 Word 一样），它们可能有方法或事件会在它们完成“加载”文件时告诉您（意味着它们'已经阅读了足够多的内容以开始播放/显示/等），或者当他们“完成”文件时（意味着移至下一首曲目或其他任何内容），但对此没有通用答案；不同的应用程序会有不同的自动化接口。（而且，作为旁注，你真的不想从 C++ 进行 COM 自动化，除非你真的必须这样做；使用 jscript、vbscript 或你最喜欢的 .NET 语言要容易得多……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:16:46.460

如果第三方进程没有发出信号表明它已经加载了某些东西，例如，通过某个输出流，一种方法是查看进程打开和关闭的文件句柄。我认为这将类似于 Process Explorer 之类的“任务管理器”能够查看进程的文件句柄。但是，如果进程在“加载”完成后没有关闭文件句柄，那么您将无法获得准确的时间。此外，您将无法获得已加载数据量的“实时”百分比。

# sass - 带有 Compass 和 Sass 的 Shopify 主题

> ID：11237792
> 
> 赞同：29
> 
> 时间：2012-06-28T03:43:36.433
> 
> 标签：sass, compass-sass, liquid, shopify

有人有使用 Compass 和 Sass 开发 Shopify 主题的工作流程吗？我真的很接近，我只需要弄清楚如何不在 CSS 液体标签上制作 Sass barf。

这是我所拥有的：

*   目录中的 sass/compass 项目（例如：、“/newwebsite/）
*   包含我的 Shopify 主题的子目录（“/newwebsite/newwebsite-theme/”）
*   Compass config.rb 将 css、_dir images_dir 和 javascripts_dir 全部指向它们的资产文件夹（“/newwebsite/newwebsite-theme/assets/”）
*   指南针手表
*   shopify_theme gem 也关注，上传主题文件到 shopify (https://github.com/Shopify/shopify_theme)
*   编辑 Sass 插值（见下面的分析器）
*   编辑指南针回调以重命名为 .css.liquid

问题：当您需要使用 Shopify 的液体模板标签时出现 Compass barf 的问题，例如背景图片 - 例如 background: url( "{{ "splash-1.jpg" | asset_url }}")

有谁知道如何指示 Compass / Sass 在 CSS 中吐出液体模板标签？如果我有，那么我就有了在本地编辑 Sass 并在 shopify 商店上立即实现更改的可靠工作流程。

谢谢

编辑：通过使用 Hopper 对 Sass 中的液体标签的回答，并将 Compass 输出 .css 文件重命名为 .css.liquid，我现在有了一个使用 Compass 和 Sass 设计 Shopify 主题的即时工作流程！以下是 config.rb 中 Compass 回调的代码：

```
on_stylesheet_saved do |filename|
  s = filename + ".liquid"
  puts "copying to: " + s
  FileUtils.cp(filename, s)
  puts "removing: " + filename
end 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T15:06:09.513

我不熟悉 Shopify 或液体标签，但我知道在 SASS 中您可以使用[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)来按原样输出纯 CSS。例如，这里的 SASS：

```
.test {
    background: url( #{'{{ "splash-1.jpg" | asset_url }}'} )
} 
```

将被编译为：

```
.test {
    background: url({{ "splash-1.jpg" | asset_url }}); } 
```

这会让你接近你正在寻找的东西吗？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-04T23:07:03.477

您如何防止 Compass 对属性之间的液体逻辑大喊大叫？例如，任何时候有一个流动的`if`声明我都会得到错误，并且使用`#{'...'}`似乎没有帮助。

这是我无法开始工作的测试：

```
#container {
  width:884px;
  margin:0px auto;
  min-height:500px;
  position:relative;
  padding:0 40px;
  {% if settings.page_bg_transparent %}
    background:transparent;
  {% else %}
    background:{{ settings.page_bg_color }};
  {% endif %}
} 
```

**更新**奇怪的是，评论液体逻辑有效：

```
#container {
  width:884px;
  margin:0px auto;
  min-height:500px;
  position:relative;
  padding:0 40px; 
  /* {% if settings.page_bg_transparent %} */
    background:transparent;
  /* {% else %} */
    background:#{'{{ settings.page_bg_color }}'}; 
  /* {% endif %} */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T11:35:58.600

对于资产 url，您还可以使用[SCSS 自定义函数](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adding_custom_functions)。把它放在你的*config.rb*文件中

```
module Sass::Script::Functions
  def shopify_image_url(string)
    assert_type string, :String
    Sass::Script::String.new("url({{'#{string.value}' | asset_url}})")
  end
end 
```

然后像这样在你的*styles.scss中使用它*

```
background: shopify_image_url('image.png'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-07T05:27:13.117

我发现保存后删除原始输出文件很有用，这样您就不会在资产目录中浮动那个额外的非流动文件。

```
on_stylesheet_saved do |filename|
  s = filename + ".liquid"
  puts "copying to: " + s
  FileUtils.cp(filename, s)
  puts "removing: " + filename
  FileUtils.remove_file(filename)
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-25T16:15:14.207

基于 hopper 的回答，对于使用 autoprefixer 处理 sass 输出的任何人，您需要添加一对额外的引号，因为`url( {{ ... }} )`会导致 autoprefixer 的解析器阻塞。

做这个：

```
background: url( "#{'{{ "splash-1.jpg" | asset_url }}'}" ) 
```

`*.css.liquid`在文件中变成这样：

```
background: url( '{{ "splash-1.jpg" | asset_url }}' ) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-21T11:45:18.467

如果您希望为新的响应式结帐使用保留“.scss.liquid”扩展名：

```
on_stylesheet_saved do |filename|
  FileUtils.mv filename, "#{File.dirname(filename)}/#{File.basename(filename,'.*')}.scss.liquid"
end 
```

它重命名文件而不是复制然后删除。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-28T15:53:44.310

我写了一篇文章，描述了我用来让 Compass 和 Sass 与 Shopify 一起工作的方法。这与 DOMUSNETWORK 的回答方法相同。我将更详细地介绍文件结构。

[http://www.mealeydev.com/blog/shopify-and-sass/](http://www.mealeydev.com/blog/shopify-and-sass/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-15T07:32:10.350

这部分地对我有用 - 但是我发现 Shopify Theme 应用程序很多时候不想上传我编辑的 .css.liquid 文件，因为它显然没有识别出该文件已被编辑。

为我解决的问题是在我的 config.rb 中使用以下代码，而不是上面问题中的代码：

```
on_stylesheet_saved do |filename|
  move_to = filename + ".liquid"
  puts "Moving from #{filename} to #{move_to}"
  FileUtils.mv(filename, move_to)
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-10T19:18:25.347

无耻的插...

我认为@nick 是在正确的轨道上。

在发送到 Shopify 之前编译 scss 会更好。

对于找到此答案的其他人，我认为 Quickshot 是您正在寻找的工具。

您仍然需要对资产 url 进行插值，但 quickshot 会自动重新编译您的 scss 并一步将结果上传到 shopify。这也使您能够`@include`在 scss 文件中使用。

[http://quickshot.io/](http://quickshot.io/)

[https://github.com/internalfx/quickshot](https://github.com/internalfx/quickshot)

# bash - 如何比较bash / awk中的两个十进制数字？

> ID：11237794
> 
> 赞同：27
> 
> 时间：2012-06-28T03:43:54.053
> 
> 标签：bash, shell, awk

我正在尝试比较两个十进制值，但出现错误。我用了

```
if [ "$(echo $result1 '>' $result2 | bc -l)" -eq 1 ];then 
```

正如其他堆栈溢出线程所建议的那样。

我收到错误。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-28T04:50:03.733

你可以使用 Bash 的数字上下文来做到这一点：

```
if (( $(echo "$result1 > $result2" | bc -l) )); then 
```

`bc`将输出 0 或 1，`(( ))`并将它们分别解释为 false 或 true。

使用 AWK 做同样的事情：

```
if (( $(echo "$result1 $result2" | awk '{print ($1 > $2)}') )); then 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-11T17:48:50.963

```
if awk 'BEGIN{exit ARGV[1]>ARGV[2]}' "$z" "$y"
then
  echo z not greater than y
else
  echo z greater than y
fi 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-19T10:01:01.770

```
if [[ `echo "$result1 $result2" | awk '{print ($1 > $2)}'` == 1 ]]; then
  echo "$result1 is greater than $result2"
fi 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-17T02:54:31.867

跟进丹尼斯的回复：

尽管他的回答对于小数点是正确的，但 bash throws *(standard_in) 1: syntax error* with floating point algorithm。

```
result1=12
result2=1.27554e-05

if (( $(echo "$result1 > $result2" | bc -l) )); then
    echo "r1 > r2"
else
    echo "r1 < r2"
fi 
```

尽管退出代码为 0，但这会返回带有警告的错误输出。

> (standard_in) 1: 语法错误
> r1 < r2

虽然对此没有明确的解决方案（讨论[线程 1](https://stackoverflow.com/q/8654051/1243763)和[线程 2](https://unix.stackexchange.com/q/137110/28675)`awk` ），但我使用了以下部分修复方法，通过使用后跟使用`bc`丹尼斯的回复和[此线程](https://stackoverflow.com/a/2424780/1243763)中的命令来四舍五入浮点结果

四舍五入到所需的小数位：以下将获得以 TB 为单位的递归目录空间，并在小数点后第二位四舍五入。

```
result2=$(du -s "/home/foo/videos" | tail -n1 | awk '{$1=$1/(1024^3); printf "%.2f", $1;}') 
```

然后，您可以使用上面的 bash 算术或使用[以下线程](https://stackoverflow.com/a/2424780/1243763)`[[ ]]`中的附件。

```
if (( $(echo "$result1 > $result2" | bc -l) )); then
    echo "r1 > r2"
else
    echo "r1 < r2"
fi 
```

或使用输出 1 为*真*而 0 为*假*`-eq`的运算符`bc`

 **```
if [[ $(bc <<< "$result1 < $result2") -eq 1 ]]; then
    echo "r1 < r2"
else
    echo "r1 > r2"
fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-04T07:50:11.777

对于 shell 脚本，我不能使用双括号 (())。所以，帮助我的是将它分成两行并以经典方式进行比较。

```
low_limit=4.2
value=3.9

result=$(echo "${value}<${low_limit}" | bc)

if [ $result = 1 ]; then
  echo too low; 
else 
  echo not too low; 
fi 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-18T11:23:36.753

你也可以`echo`声明`if...else`到`bc`。

```
- echo $result1 '>' $result2
+ echo "if (${result1} > ${result2}) 1 else 0"

(
#export IFS=2  # example why quoting is important
result1="2.3" 
result2="1.7" 
if [ "$(echo $result1 '>' $result2 | bc -l)" -eq 1 ]; then echo yes; else echo no;fi
if [ "$(echo "if (${result1} > ${result2}) 1 else 0" | bc -l)" -eq 1 ];then echo yes; else echo no; fi
if echo $result1 $result2 | awk '{exit !( $1 > $2)}'; then echo yes; else echo no; fi
) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-07-23T06:37:05.967

不能 bash 强制类型转换？例如：

```
($result1 + 0) < ($result2 + 0) 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-04-18T19:21:15.470

为什么使用 bc ？

```
for i in $(seq -3 0.5 4) ; do echo $i ; if [[ (( "$i" < 2 )) ]] ; then echo "... is < 2";fi; done 
```

唯一的问题：比较“<”不适用于负数：它们被视为绝对值。**

# database - 用于存储最近操作和最近遇到的人的设计

> ID：11237795
> 
> 赞同：2
> 
> 时间：2012-06-28T03:43:55.473
> 
> 标签：database, database-design

我想知道如何建立一个数据库来存储人们最近在旅行时所做的操作。例如，如果他们去博物馆，数据库将存储“Bob 去了这个博物馆”这个文本，并存储用户 ID 和时间戳。我想知道这些事件是否应该只存储在一个表中，如果我想要一个人的事件，我只需使用用户 ID 查询该表。

在类似的注释上，我想存储用户“最近遇到”的 50 个用户，这意味着用户在旅行中遇到的最后 50 个用户。我在想这也可以存储在一个表中，只有用户 ID 配对，没有重复。我只是担心桌子会变得太大。

对餐桌布置有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:26:36.470

就我个人而言，我会采用这样的 ER 结构：

![ER图](../Images/69586789f7c195b680f6c29c0bc71727.png)

# hadoop - 控制 MultipleOutputFormat 文件子路径

> ID：11237797
> 
> 赞同：1
> 
> 时间：2012-06-28T03:44:21.823
> 
> 标签：hadoop

我需要根据 reducer 键来控制 MultipleOutputFormat 管理的不同文件的子路径。

我基本上想根据给reducer的键设置文件的子路径。

我可以通过覆盖 MultipleOutputFormat 的 generateFileNameForKeyValue 方法来更改文件名，但是如何更改这些文件的子路径？

我的意思是只覆盖generateFileNameForKeyValue，我得到

```
mySetJobConfigOutputPath/fileNameBasedKey1.dat
                        /fileNameBasedKey2.dat
                        /fileNameBasedKey3.dat
                        ... 
```

但我想让它像下面这样组织文件

```
 mySetJobConfigOutputPath/path0ConfiguredInsideReducerBasedOnKey/fileNameBasedKey1.dat

                         /path1ConfiguredInsideReducerBasedOnKey/fileNameBasedKey2.dat
                                                                /fileNameBasedKey3.dat

                         /path2ConfiguredInsideReducerBasedOnKey/fileNameBasedKey8.dat 
```

正如所见，子路径和文件名都是由减速器内部的键计算出来的。

我知道如何配置文件名，但想知道是否可以在 mySetJobConfigOutputPath 文件夹下配置每个文件的子路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:04:21.593

我发现我也可以覆盖***getInputFileBasedOutputFileName***方法并在其中为其提供子路径。

```
@Override
protected String getInputFileBasedOutputFileName(JobConf conf, String Name)
{
     //your logic goes here. Simply addd the sub path to the name and return    
} 
```

您仍然应该实现***generateFileNameForKeyValue***将您的潜在客户文件名转换为密钥

更新：基本上这解释了一切[http://www.infoq.com/articles/HadoopOutputFormat](http://www.infoq.com/articles/HadoopOutputFormat)

# javascript - 我可以在选择元素的选项中使用 HTML 标签吗？

> ID：11237807
> 
> 赞同：67
> 
> 时间：2012-06-28T03:46:27.203
> 
> 标签：javascript, jquery, html, css

HTML 选择元素的选项是否可以包含 HTML 标记？

例如，给定以下代码：

```
 <select>
    <option value="one"><b>one is bold</b></option>
    <option value="two">two has some <span style='color:red;'>red</span> text</option>
    <option value="three">three is just normal</option>
 </select> 
```

我想要在 HTML 中实际呈现的选项。在这个应用程序中，我可以使用 HTML、CSS、JavaScript（包括 jQuery）。HTML 本身是通过 Django (django.form.fields.select) 呈现的。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-06-28T03:51:36.997

不，你不能这样做。`<option>`标签不能包含任何其他标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T03:58:48.850

不，但是这个：[样式化 HTML Select](https://stackoverflow.com/questions/3418280/styling-html-select)可以帮助你，这里有很多细节和投票：

[如何在没有 JavaScript 的情况下仅使用 CSS 设置 <select> 下拉菜单的样式？](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T03:53:21.197

你不能。

如果您想要这样做，您会做的是使用浮动 div 和位置之类的东西，并使用 Css 将其显示为看起来像一个选择。然后使用 javascipt 点击让用户选择。

像这样：[重新发明下拉菜单](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T04:02:13.453

选项标签不允许除文本以外的任何子项

这是我几个月前创建的一个小提琴，它用列表下拉列表替换选择元素，并更新每个选择的选择。只需使用 css [http://jsfiddle.net/6zcRk/隐藏选择](http://jsfiddle.net/6zcRk/)

该线程中的用户然后将其转换为 github 上可用的插件（请参阅线程中的链接）

[使用 jQuery 自定义下拉面板](https://stackoverflow.com/questions/9548618/custom-drop-down-panel-with-jquery)

# xml - 使用 kaleo 工作流程的一些问题和问题

> ID：11237808
> 
> 赞同：1
> 
> 时间：2012-06-28T03:46:47.127
> 
> 标签：xml, content-management-system, workflow, liferay, liferay-6

我对工作流程有几个问题：

1.  在工作流定义文件 ( `*.xml`) 中如何获取上一个任务？
    例如，当我在更新任务时，是否可以获取先前发送请求的任务，例如 previewer-1 或 previewer-2。

2.  当使用`<fork>`标签在 P-1 任务上分叉到两个任务（例如 P-1 和 P-2）的单个转换时，如果我拒绝内容，它似乎只被拒绝这个任务，即 P-1 而不是两个任务; 现在如果我第二次提交内容，它会再次分叉到2个分支，我会得到3个任务：`P-1 & P-2`而且`P-2`，这会造成很大的麻烦！

3.  另一个问题，当在任务 P-1 和 P-2 上同时更改内容时，它将更改为最新保存的内容，而不是同步，我怎样才能使其同步（或者至少，锁定此内容直到一个已经完成）？

# linux - 对于 SystemTap 脚本，我如何确保捕捉到进程正在结束的事实？

> ID：11237812
> 
> 赞同：0
> 
> 时间：2012-06-28T03:47:23.473
> 
> 标签：linux, process, systemtap

编写一个 SystemTap 脚本（适用于 Linux），并且我想确保我抓住了一个进程已经结束的事实。执行此操作的最佳方法是什么（例如，特定的内核函数，或者进程可能结束的详尽列表，例如调用 _exit()）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:13:13.643

在我看来，正确的做法是探测 do_exit。如果我错了，有人纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:31:36.193

尝试

```
probe kprocess.release { printf("pid=%d tid=%d\n", released_pid, released_tid) } 
```

或者

```
probe kernel.trace("sched_process_exit") { printf("pid=%d tid=%d\n", task_pid($p), task_tid($p)) } 
```

# objective-c - UIWebView 模拟器突然不工作了

> ID：11237814
> 
> 赞同：1
> 
> 时间：2012-06-28T03:48:29.480
> 
> 标签：objective-c, ios, uiwebview

我有这组代码大约一个小时前运行良好。然后当我试图再次启动它几分钟后，UIWebView 只显示一个白屏。但是如果现在我屏蔽了 -(bool) 方法，就会出现 viewDidLoad。（用NSLog测试）请问代码发生了什么？它正在工作，但突然停止运行。

.m

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

    NSString *titleString = @"Error Loading Page";
    NSString *messageString = [error localizedDescription];
    NSString *moreString = [error localizedFailureReason] ?
    [error localizedFailureReason] :
    NSLocalizedString(@"Try typing the URL again.", nil);
    messageString = [NSString stringWithFormat:@"%@. %@", messageString, moreString];

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:titleString
                                                        message:messageString delegate:self
                                              cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
    [alertView show];

} 
```

如果我实现上述方法，应用程序在打开 UIWebView 时会不断弹出错误域错误 -999 不停。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range1= [currentURL rangeOfString:@"news"];
    NSRange range2= [currentURL rangeOfString:@"pdf"];
    if (range1.location == NSNotFound)
    {
        NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];

        return YES;
    }
    if(range2.location==NSNotFound)
    {
        NSURL * url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];
        return YES;
    }

    return NO;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    webView.scalesPageToFit=YES;
    webView.delegate = self;

    NSString *urlAddress = @"http://www.imc.jhmi.edu/news.html";
    NSURL *url =[NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
    NSLog(@"sadfasdf");
} 
```

.h @interface ViewController : UIViewController{ IBOutlet UIWebView*webView; }

```
@property(nonatomic,strong) UIWebView*webView;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:08:50.627

加载请求时，委托方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

会被调用。

在这种方法中，您尝试无限次重新加载同一页面。

> 错误域=NSURLErrorDomain 代码=-999 “操作无法完成。（NSURLErrorDomain 错误-999。）” UserInfo=0xe203e80 {NSErrorFailingURLKey= [http://www.imc.jhmi.edu/news.html](http://www.imc.jhmi.edu/news.html) , NSErrorFailingURLStringKey= [http ://www.imc.jhmi.edu/news.html](http://www.imc.jhmi.edu/news.html) }

我尝试了您的代码并收到此错误。如果在 WebView 的上一个请求完成之前发出另一个请求，则可能会出现此错误。所以尽量避免在委托方法中重复加载请求的那些条件。

```
if(range2.location==NSNotFound) 
```

这个条件永远成立。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL] absoluteString];
    NSRange range1= [currentURL rangeOfString:@"news"];
    if (range1.location == NSNotFound)
    {
        NSURL *url = [NSURL URLWithString:@"http://www.imc.jhmi.edu/news.html"];
        [webView loadRequest:[NSURLRequest requestWithURL:url]];
        return YES;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:28:45.247

UIWebView 的委托方法：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request     navigationType:(UIWebViewNavigationType)navigationType{
} 
```

如果 Web 视图应该开始加载内容，则返回 YES，否则返回 NO。当您调用时，该方法会在 viewDidLoad 方法中调用：

```
[webView loadRequest:requestObj]; 
```

在委托方法中，您再次调用相同的方法：

```
[webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

这变成了一次又一次地调用委托方法并形成无限循环。每次 loadRequest 都会发生这种情况，但在加载之前，再次调用相同的 loadRequest，形成循环。

此方法无需 loadRequest，只需根据您需要的条件返回 YES 或 NO。

# ruby - ruby - 无法写入守护进程的日志

> ID：11237815
> 
> 赞同：4
> 
> 时间：2012-06-28T03:48:30.837
> 
> 标签：ruby, logging, daemon, daemons

通常我可以写日志`Logger`：

```
//abc.rb
require 'logger'
logger = Logger.new('foo.log')

$./abc.rb 
```

但在`Daemons`我得到一个权限错误：

```
//xyz.rb
require 'logger'
require 'daemons'

Daemons.run_proc('xyz') do
  logger = Logger.new('foo.log')
end

$./xyz.rb
/home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:599:in `initialize': Permission denied - foo.log (Errno::EACCES)
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:599:in `open'
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:599:in `create_logfile'
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:594:in `open_logfile'
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:549:in `initialize'
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:314:in `new'
from /home/raincole/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/logger.rb:314:in `initialize' 
```

我在同一个目录中以相同的身份运行`abc.rb`并运行。`xyz.rb`为什么一个日志不能像另一个日志一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T05:29:56.703

这就是原因。从[守护进程文档](http://www.rubydoc.info/gems/daemons/1.1.9/Daemons)。

我已为您将相关部分**加粗：**

> ## 守护进程在内部对我的守护进程做了什么？
> 
> 从技术角度来看，守护进程在创建守护进程时会执行以下操作：
> 
> 1.  分叉一个子进程（如果需要，退出父进程）
> 2.  成为会话负责人（将程序与控制终端分离）。
> 3.  分叉另一个子进程并退出第一个子进程。这防止了获取控制终端的可能性。
> 4.  **将当前工作目录更改为“/”。**
> 5.  清除文件创建掩码（将 umask 设置为 0000）。
> 6.  关闭文件描述符（如果可能，重新打开 STDOUT 和 STDERR 以指向日志文件）。

因此，在启动守护程序后，您应该将当前工作目录 ( `Dir.chdir`) 更改为要用于记录的目录，或者使用绝对路径作为日志文件。

# wix - WIX 更改初始安装目录

> ID：11237820
> 
> 赞同：0
> 
> 时间：2012-06-28T03:49:06.077
> 
> 标签：wix, installation

当我进行 WIX Build 设置时，

默认情况下，它安装到 ProgramFIles 目录中。

我想将其更改为应用程序本地数据目录，

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T06:45:22.160

您可以像这样使用文件夹定义：

```
<Directory Id='LocalAppDataFolder'>
    <Directory Id='MyAppFolder' Name='MyApp' />
</Directory> 
```

要查找其他系统文件夹的 ID，例如`LocalAppDataFolder`，请查看[Windows Installer 属性参考的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx)[系统文件夹属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx#system_folder_properties)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:55:50.960

Are you doing a per-user installation using the built in dialog sets?

If you set `Package/@InstallScope="perUser"` then the default installation folder will automatically be set to `[LocalAppDataFolder]Apps\[ApplicationFolderName]`

For more information [refer to the WiX manual.](http://wix.sourceforge.net/manual-wix3/wix_xsd_package.htm)

# file - 如何使用滚动平面文件跟踪侦听器重命名具有修改日期的日志文件

> ID：11237823
> 
> 赞同：0
> 
> 时间：2012-06-28T03:49:28.403
> 
> 标签：file, c#-4.0, logging, enterprise-library-5

我想要的输出是，如果“rolling.log”文件是在 26-06-2012 之前创建和修改的，那么第二天（27-06-2012）该文件应该用“rolling-26-06-2012..log”重命名. 现在输出是“rolling-27-06-2012.log”文件。

以下是我当前在 web.config 文件中的日志记录设置。

<*loggingConfiguration name=""tracingEnabled="true" defaultCategory="myTestLog">

```
<*listeners>

  <*add name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    fileName="C:\Project\Others\Testing\testMSLogging\rolling.log"
    formatter="Text Formatter" rollFileExistsBehavior="Increment"
    rollInterval="Minute" rollSizeKB="50" timeStampPattern="yyMMdd"
    filter="Information" />

  <*add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    fileName="C:\Project\Others\Testing\testMSLogging\testMSLogging\trace.log"
    formatter="Text Formatter" filter="Error" />
</listeners>

<*formatters>

  <*add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
    name="Text Formatter" />
</formatters>

<*categorySources>

  <*add switchValue="All" name="myTestLog">
    <*listeners>
      <add name="Rolling Flat File Trace Listener" />
    </listeners>
  </add>
</categorySources>

<*specialSources>

  <*allEvents switchValue="All" name="All Events" />
  <*notProcessed switchValue="All" name="Unprocessed Category" />
  <*errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
      <add name="Flat File Trace Listener" />
    </listeners>
  </errors>
</specialSources> 
```

请任何人帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:05:52.257

不幸的是，这是它在 Enterprise Library 中的工作方式。其默认平面文件滚轮背后的理念是，它将所有输出记录在 FILE.LOG 中，当滚动事件发生时，它将其重命名为 FILE-ROLL-NAME.LOG 并创建一个新的 FILE.LOG 如果您需要不同的行为，您可能需要创建自己的日志记录跟踪侦听器或使用其他工具，例如 log4net。

# oracle - Sqlplus oracle：如何在 1 行中在 bash 上运行 sql 命令？

> ID：11237824
> 
> 赞同：10
> 
> 时间：2012-06-28T03:49:39.497
> 
> 标签：oracle, sqlplus

我可以在 sqlplus 中将其转换为 bash 上的 1 个命令行吗？因为我想自动化它。

```
sqlplus / as sysdba
SQL> EXEC DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);
exit 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T04:50:44.433

您不需要自动退出，因为无论如何它都应该在文件末尾退出。因此，您可以在一行中执行以下操作：

```
echo 'EXEC DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);' | sqlplus / as sysdba 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T15:03:45.497

```
sqlplus user/password@host @file.sql 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T04:04:29.943

你可以在 shell 中通过 follow 来编写

```
#!/bin/bash
sqlplus / as sysdba <<EOF
EXEC DBMS_XDB.SETLISTENERLOCALACCESS(FALSE);
exit
EOF 
```

或者你可以把这个command放到一个程序中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T05:31:24.313

`sqlplus /nolog @your_script.sql`

# javascript - 使用 data-native-menu="false" 提交表单 onChange

> ID：11237825
> 
> 赞同：0
> 
> 时间：2012-06-28T03:49:49.417
> 
> 标签：javascript, jquery, jquery-mobile

I'm trying to submit a form when a select changes using jQuery Mobile. 我对选择元素的外观没有任何要求。但我确实要求在没有 ajax 的情况下提交表单。这是我拥有的代码：

```
<form name="langform" method="post" data-ajax="false">
    <select name="syslang" id="chooseLang" data-mini="true" onChange="this.form.submit()">
        <options />
    </select>
</form> 
```

现在这适用于 iPhone，但是当我在 Android 上尝试时，选择菜单没有出现。当我将 data-native-menu="false" 添加到选择时，选择菜单会显示并在 Android 上运行，但表单不会在 iPhone 上提交。

我应该提到我正在使用 jQuery Mobile 1.1.0 和 jQuery 1.7.1

我需要的只是让它在两个设备上正确提交。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:01:04.490

所以我找到了解决我的问题的方法。我只是想分享它，以防其他人遇到这个问题。显然 jQuery Mobile 1.1 在固定容器中的表单元素存在问题（使用位置：固定），特别是在 Android 2.2 和 2.3 中，如此处引用的[http://jquerymobile.com/demos/1.1.0/docs/forms/docs-forms。 .html](http://jquerymobile.com/demos/1.1.0/docs/forms/docs-forms.html) _

因此，您不能在其中使用固定位置的页脚和表单元素。

# iphone - AVCapture 和 iPhone 的相机默认设置有什么区别

> ID：11237826
> 
> 赞同：1
> 
> 时间：2012-06-28T03:49:53.740
> 
> 标签：iphone, ios, avcapturesession, avcapture, avcam

我的应用程序使用 AVCapture 捕获图像，这是我的主管的理想。但是我在互联网上进行了研究，无法获得有关 AVCapture 与 iPhone 或 iPop 的默认相机（标签焦点或相机质量......）之间差异的任何信息。请告诉我AVFoundation框架的进步...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:53:45.170

使用 AVCaptureSession，您可以为您的录音机提供更多功能。您可以自定义录制会话的几乎所有方面。您可以直接从相机中获取原始数据。然而，代码可能会变得非常复杂，并且没有为您处理任何事情。

使用 iOS 默认图像捕获控制器，您将被一些预设卡住，并且您将只有一点点相机功能。但是实现起来真的很简单。

# 更新了苹果代码的链接

如果您想了解如何使用 AVFoundation 进行摄像，您可能会喜欢苹果的这款应用。

就像我说的，您必须手动完成所有操作。所以要准备好一些工作。

[Apple 的 AVCam 演示应用程序](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)

# html - 如何在 html 中使用背景图片而不是 IMG 标签？

> ID：11237827
> 
> 赞同：0
> 
> 时间：2012-06-28T03:50:02.460
> 
> 标签：html, css

我有以下带有许多此类链接的 HTML：

```
<a class="button" id="menu">
   <img width="16" height="16" src="/Images/control-double.png">
</a> 
```

我为这些创建了一个精灵，将所有图像组合使用

[精灵](http://spritegen.website-performance.org/)

但是当我看这个时，它似乎只是为了背景，因为它给出了一个例子：

```
.sprite-control-double{ background-position: 0 -396px; width: 16px; height: 16px; } 
#container li {
    background: url(csg-4febd28fe3aa3.png) no-repeat top left;
} 
```

如何使用带有定位的精灵来定位图像而不是单个图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T04:06:31.517

`IMG`如果您使用“sprite”技术，那么您的锚点中不需要元素：

```
a.button {
    background-color: transparent;
    background-image: url(/Images/control-double.png);
    background-position: 0 -396px;
    background-repeat: no-repeat;
    height: 16px;
    width: 16px;
} 
```

我添加了`background-color`样式，因为在某些浏览器中，如果没有背景颜色，渲染引擎将不会显示背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T03:53:59.257

是的你可以。这就是精灵的工作方式，它们被用作元素的背景，其溢出设置为隐藏。

您应该完全删除`<img>`标签并依赖标签的背景`<a>`。sprite 的目的是替代对非语义`<img>`标签的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:03:42.967

从 spritegens 帮助页面链接的文章中很好地涵盖了这一切：[http ://www.alistapart.com/articles/sprites](http://www.alistapart.com/articles/sprites)

# xml - 无法在 Netbeans 7.1.2 中运行 DataApp 示例应用程序

> ID：11237833
> 
> 赞同：2
> 
> 时间：2012-06-28T03:51:27.780
> 
> 标签：xml, netbeans

这是从示例 javafx2.1 包运行示例 DataApp 应用程序时面临的挑战：我正在运行 Netbeans 7.1.2、javafx 2.1.、glassfish 3.1.2、Java EE6，并且我有 6gig ram。

当我右键单击 DataAppServer 项目或对 DataAppClient 项目执行相同操作并点击运行时，我收到以下错误消息：

```
C:\Users\Staples\Desktop\ITOWER STUDIO\javafx-samples-2.1.1\src\DataApp\DataAppServer\nbproject\build-impl.xml:533: The following error occurred while executing this line:
C:\Users\Staples\Desktop\ITOWER STUDIO\javafx-samples-2.1.1\src\DataApp\DataAppClient\build.xml:48: Problem: failed to create task or type javafx:com.sun.javafx.tools.ant:application
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet
BUILD FAILED (total time: 8 seconds)** 
```

我尝试按照类似问题中的说明添加 taskdef 标记，但它给出了相同的错误。当我打开项目并连接到 MySQL 数据库时没有错误。这是我添加的 taskdef 标签：

```
<taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
    uri="javafx:com.sun.javafx.tools.ant"
    classpath="C:\Program Files(x86)\Oracle\JavaFX 2.1 SDK\lib\ant-javafx.jar"/> 
```

第 48 行显示了这个字符串：

```
preloaderClass="dataapppreloader.DataAppPreloader"/> 
```

第 533 行显示：

```
<ant antfile="${project.DataAppClient}/build.xml" inheritall="false"target="jar"> 
```

我真的被困在这里了。需要帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:48:06.053

这有帮助： [无法构建 JavaFX 2.1.0 示例应用程序 - DataApp - 无法创建任务或键入 javafx:com.sun.javafx.tools.ant:application](https://stackoverflow.com/questions/10753949/cannot-build-javafx-2-1-0-sample-application-dataapp-failed-to-create-task-o)

..它告诉你添加

```
 <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
             uri="javafx:com.sun.javafx.tools.ant"
             classpath="C:\Program Files\Oracle\JavaFX 2.1 SDK\lib\ant-javafx.jar" /> 
```

线下

```
 <target name="-post-jar" depends="-init-javafx, -jfx-copylibs"> 
```

在 DataAppclient 文件夹中的 build.xml 文件中

# jquery - 从特定的 div中删除

> ID：11237838
> 
> 赞同：10
> 
> 时间：2012-06-28T03:52:26.937
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T03:54:28.777

```
$('#grape1,#grape12').find('br').remove(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T03:55:39.603

```
$('br', '#grape1, #grape12').remove();​ 
```

The second argument in the `$` selector allows you to filter your search to a given subset, instead of the entire DOM. In this case we tell jQuery to only look inside the `grape1` and `grape12` divs. This will match all br's in those div's.

[JsFiddle](http://jsfiddle.net/myPvT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-08T17:27:31.967

If that doesn't work (as happened in my case also) it's probably because the `<br>` are generated by some scripts after the JS `.remove()` code execution.

To check if I was right I set a quite long timeout and all my unwanted `<br>` disappeared after that time. So, in the end I just decided to put a simple CSS

`#grape1 br, #grape12 br { display: none; }`

and eveybody's happy =)

# php - 删除数组的两个字符串的一部分

> ID：11237839
> 
> 赞同：0
> 
> 时间：2012-06-28T03:52:34.857
> 
> 标签：php, arrays, string, replace

我正在尝试删除从 ftp_nlist 输出的数组的两个字符串的两个部分。我正在与 CI 合作。另请注意，正在处理视图中的多选列表，并且代码不正确。但是我认为我应该披露显示完整视图文件的其他选择列表。

```
 { ["parent_directory_one/child_directory_one"]=> int(0) ["parent_directory_one/child_directory_two"]=> int(1) } 
```

如何将以上内容更改为以下内容：

```
 { ["child_directory_one"]=> int(0) ["child_directory_two"]=> int(1) } 
```

那么如何更改如下：

```
 { ["parent_directory_one/child_directory_one/child_files_one"]=> int(0) ["parent_directory_two/child_directory_two/child_files_two"]=> int(1) } 
```

对此：

```
 { ["child_files_one"]=> int(0) ["child_files_two"]=> int(1) }
   //controller// 
```

好的，这是我尝试过的一些示例，并且视图文件正在构建中：

```
 //read default remote
    $glue = '/'; $strs = ''; $root_piece_rm = ltrim($strs, './'); 

    $list_rm = ftp_nlist($conn_id,$root_piece_rm);

    $list_rm = array_flip($list_rm);

    $data['list_rm'] = $list_rm;
    //end read default remote

    if($rm_targets):

    $glue = '/'; $list_sub_rm = ftp_nlist($conn_id,$rm_targets);

    foreach($list_sub_rm as $keys):

        $list_sub_rm  = ltrim($keys,$rm_targets.$glue);

    $data['list_sub_rm'] = var_dump(array($list_sub_rm));

    endforeach;

    endif; 
```

但是，子目录的以下代码是问题所在，我认为 ltrim 不起作用。但是，var_dump 输出的字符串是根据模式修剪的字符串，即 $rm_targets.$glue 需要删除，只显示子目录。

```
 //CONTROLLER//
    $rm_targets = $this->input->post('pt_rm_dirs',TRUE);

if($rm_targets):

$glue = '/'; $list_sub_rm = ftp_nlist($conn_id,$rm_targets);

$list_sub_rm = array_flip($list_sub_rm);

$list_sub_rm = array_keys($list_sub_rm);

foreach($list_sub_rm  as $index):

$eraser = ltrim($index,$rm_targets.$glue);

endforeach;

$data['list_sub_rm'] = $list_sub_rm;

endif; 
```

同样，基本上我需要从数组的以下字符串中删除父目录 { ["jm_gallery/new_test_origs"]=> int(0) ["jm_gallery/test_thumbs"]=> int(1) }

我不确定目前需要如何设置视图或控制器。

我从下面的 var_dump 获得的输出是我需要在多选列表中显示的内容。它本质上是子目录，但删除了正斜杠和父目录。在我开始使用 ftp_nlist 之前，我没有遇到过这种情况，这非常令人不安。

```
 //CONTROLLER//
if($rm_targets):

$glue = '/'; $list_sub_rm = ftp_nlist($conn_id,$rm_targets);

foreach($list_sub_rm as $keys):

    $list_sub_rm  = ltrim($keys,$rm_targets.$glue);

$data['list_sub_rm'] = var_dump(array($list_sub_rm));

endforeach;

endif; 
```

这是我想再次注意的正在建设中的视图文件，因此循环还不正确：

```
 //VIEW//
    <?php if(!defined('BASEPATH'))exit('No direct script access allowed'); ?>

    <?php echo form_open('test_sftp/test_function')?>

    <select name="pt_rm_dirs" multiple size="10">
    <option value="select one"<?php echo set_select('pt_rm_dirs', 'select_one');?>   >select&nbsp;one</option>
    <?php foreach($list_rm as $folder_rm_dirs => $contents_rm_dirs):?>
    <option value="<?php echo $folder_rm_dirs?>"<?php echo set_select('pt_rm_dirs', '$folder_rm_dirs');?> ><?php echo $folder_rm_dirs?></option>
    <?php endforeach;?>
    <?php unset($contents_rm_dirs);?> 
```

第2步：

为选定的远程目录指定新名称：

```
 <select name="ct_rm_subdirs" multiple size="10">
    <option value="select one"<?php echo set_select('ct_rm_subdirs', 'select_one');?> >select&nbsp;one</option>
    <?php foreach($list_sub_rm as $sub_folder_rm):?>
    <option value="<?php echo $sub_folder_rm?>"<?php echo set_select('ct_rm_subdirs', '$sub_folder_rm');?> ><?php echo $sub_folder_rm?></option>
    <?php endforeach;?>
    <?php unset($sub_contents_rm);?>
    </select>

    <select name="rm_sub_dirs_files" multiple size="15">
    <option value="select one"<?php echo set_select('rm_sub_dirs_files', 'select_one');?> >select&nbsp;one</option>
    <?php foreach($list_sub_rm as $sub_folder_rm => $sub_contents_rm):?>
    <optgroup label="<?php echo $sub_folder_rm?>">
    <?php foreach($sub_contents_rm as $files):?>
    <option value="<?php echo $files?>"<?php echo set_select('rm_sub_dirs_files', '$files');?> ><?php echo $files?></option>
    <?php endforeach;?>
    <?php endforeach;?>
    <?php unset($sub_contents_rm);?>
    <?php unset($files);?>
    </optgroup>
    </select> 
    <?php echo form_submit('submit', 'Submit');?>
    <?php echo form_close()?>

    </body>
    </html>
    <?php echo form_close();?> 
```

更新：当我 var_dump 时，字符串下面的代码会根据需要进行更改，但为什么我不能通过视图回显它们？我尝试将字符串转换为有问题的数组。

```
if($rm_targets):

$glue = '/'; 

$list_sub_rm = ftp_nlist($conn_id,$rm_targets);

foreach($list_sub_rm as $keys):

$list_sub_rm = ltrim($keys,$rm_targets.$glue);

$data['list_sub_rm'] = var_dump($list_sub_rm);

    endforeach;

endif; 
```

非常感谢任何帮助！！！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:47:26.150

看起来文件名是你数组中的键，这让我很震惊。

```
foreach ( $list_sub_rm as $key => $value ) {
    $key = preg_replace("#.*/([^/]*)$#", "$1", $key);
    $newArray[$key] = $value;
} 
```

# git - JGit 获取提交的时区

> ID：11237842
> 
> 赞同：1
> 
> 时间：2012-06-28T03:53:28.680
> 
> 标签：git, jgit

在 JGit 中，如何获取提交的时区？当前的 RevCommit 类没有任何关于时区的信息。它只返回 UTC unix 时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:01:47.150

使用 PersonIdent：

```
RevCommit commit = ...;
PersonIdent committerIdent = commit.getCommitterIdent();
if (committerIdent != null) {
    TimeZone timeZone = committerIdent.getTimeZone(); // or getTimeZoneOffset()
} 
```

也有`getAuthorIdent()`与作者相同的。

# jquery - MVC方法应该是get还是post以及如何在jquery中调用

> ID：11237845
> 
> 赞同：0
> 
> 时间：2012-06-28T03:53:41.647
> 
> 标签：jquery, asp.net-mvc

我在我的一个控制器上有这个方法来获取下拉列表：

```
public JsonResult GetPeople(int roleId)
{
    return Json(_uow.GetPeople(roleId).Select(e => new SelectListItem { Text = e.Name, Value = e.Id.ToString() }).ToList());
} 
```

所以基本上它会在一个特定的角色中得到一大堆人，并在 json 中返回一个 selectlistitem 列表。

我不确定它是否应该用 [HttpGet] 或 [HttpPost] 装饰。我认为这应该是一个获取，因为这本质上就是您所做的，即使您确实发布了一个 ID，也可以从服务器获取信息。

所以它没有装饰，所以默认情况下是 GET。

这就是我在 jquery 中的调用方式：

```
$.get('/People/GetPeople', { roleId: $('#roleddl').val() }, function (data) {

    $(data).each(function () {
        $("<option value=" + this.Value + ">" + this.Text + "</option>").appendTo(peopleddl);
    });

}); 
```

所以在这里我使用 $.get。它没有用。所以我认为它正在返回 json，所以我尝试了 $.getJSON ，但没有成功。所以然后我尝试了 $.post ，它的工作原理是：

```
$.post('/People/GetPeople', { roleId: $('#roleddl').val() }, function (data) {

    $(data).each(function () {
        $("<option value=" + this.Value + ">" + this.Text + "</option>").appendTo(peopleddl);
    });

}); 
```

所以我想知道为什么当它调用的方法不是 POST 时，jquery post 调用会起作用。

即使这有效，我应该有什么组合。IE。该方法应该用什么装饰，我应该用什么来调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:23:15.157

您需要修改您的 return 语句以允许返回 Json：

```
return Json(data, JsonRequestBehavior.AllowGet); 
```

Json 通过 GET 响应返回时存在已知漏洞（更多信息请参见：http: [//haacked.com/archive/2009/06/25/json-hijacking.aspx](http://haacked.com/archive/2009/06/25/json-hijacking.aspx)）

# vb.net - 如何在 vb.net 中循环遍历 Datatable 列并为其动态分配值？

> ID：11237852
> 
> 赞同：0
> 
> 时间：2012-06-28T03:54:16.127
> 
> 标签：vb.net, datatable, vb.net-2010

我正在从 XML 中检索值并将其存储在数据表中，之后我会将数据表值插入数据库。

数据库表结构将与我创建的数据表结构相同。

在下面的 XML 中，我只有 3 个节点（包含 EmpName 和 EmpID 的 6 个值），因此我必须将这些节点值分配给我的数据表的前六列。数据表中的其余列应为空。我怎样才能循环通过？

注意：表结构固定为只有 15 个员工详细信息，这听起来可能很傻，但这只是我的场景的一个示例，实际上与员工详细信息无关。如果 XML 中有超过 15 个节点，我将不得不忽略它。

XML：

```
<Employee>
    <add> 
      <EmpName>Ronaldo</EmpName>
      <EmpID>14</EmpID>
    </add>
    <add> 
      <EmpName>Messi</EmpName>
      <EmpID>15</EmpID>
    </add>
    <add> 
      <EmpName>David</EmpName>
      <EmpID>16</EmpID>
    </add>
  </Employee> 
```

数据表：

```
 dt_FAQ.Columns.Add("Employee_1", GetType(String)) 
        dt_FAQ.Columns.Add("EmpID_1", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_2", GetType(String))
        dt_FAQ.Columns.Add("EmpID_2", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_3", GetType(String))
        dt_FAQ.Columns.Add("EmpID_3", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_4", GetType(String))
        dt_FAQ.Columns.Add("EmpID_4", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_5", GetType(String))
        dt_FAQ.Columns.Add("EmpID_5", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_6", GetType(String))
        dt_FAQ.Columns.Add("EmpID_6", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_7", GetType(String))
        dt_FAQ.Columns.Add("EmpID_7", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_8", GetType(String))
        dt_FAQ.Columns.Add("EmpID_8", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_9", GetType(String))
        dt_FAQ.Columns.Add("EmpID_9", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_10", GetType(String))
        dt_FAQ.Columns.Add("EmpID_10", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_11", GetType(String))
        dt_FAQ.Columns.Add("EmpID_11", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_12", GetType(String))
        dt_FAQ.Columns.Add("EmpID_12", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_13", GetType(String))
        dt_FAQ.Columns.Add("EmpID_13", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_14", GetType(String))
        dt_FAQ.Columns.Add("EmpID_14", GetType(String)) 
        dt_FAQ.Columns.Add("Employee_15", GetType(String))
        dt_FAQ.Columns.Add("EmpID_15", GetType(String)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:38:14.890

尝试将数据添加到您的行中，您可以将“Value”和 i.ToString() 替换为您的实际数据。

```
Dim workRow As DataRow
Dim i As Integer

workRow = dt_FAQ.NewRow()

For i = 0 To 28
  if(i % 2 == 0) {
     workRow(i) = node[Math.Floor(i/2)].EmpName
  }
  else 
  {
     workRow(i) = node[Math.Floor(i/2)].EmpID
  }
Next

dt_FAQ.Rows.Add(workRow) 
```

HTH。

# mysql - 具有多个条件的查询语句？

> ID：11237855
> 
> 赞同：1
> 
> 时间：2012-06-28T03:54:33.373
> 
> 标签：mysql, where-clause

使用我的数据库运行此查询语句后：

```
select * from articles
where content like 'keyword1' or content like 
keyword2' or content like 'keyword3' and date 
between '2012-06-18 00:00:00' and '2012-06-25 23:59:59' 
order by date asc 
```

我能够取回基于日期排序的文章，其内容包含那些指定的关键字**但不在日期范围内**。谁能让我知道这个陈述有什么问题以及如何纠正它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:58:04.817

```
select * from articles where (content like 'keyword1' or content like 'keyword2' or content like 'keyword3') and (date between '2012-06-18 00:00:00' and '2012-06-25 23:59:59') order by date asc 
```

尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:14:18.543

确保DB中日期字段的数据类型与传入的参数格式相同，如果日期字段为日期，则使用[DATE_FORMAT()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数将其格式化为'%Y-%m-%d %h:%M:% s'，然后进行比较。就像是：

```
Where DATE_FORMAT(date,'%Y-%m-%d %H:%m:%s') between '2012-06-18 00:00:00' AND '2012-06-25 23:59:59' 
```

HTH。

# node.js - node.js 是否保留异步执行顺序？

> ID：11237859
> 
> 赞同：3
> 
> 时间：2012-06-28T03:55:20.330
> 
> 标签：node.js, asynchronous

我想知道 node.js 是否对异步调用开始/完成的顺序做出任何保证。

我不认为是这样，但是我已经阅读了 Internet 上的一些代码示例，我认为这些代码示例有问题，因为异步调用可能不会按预期的顺序完成，但是这些示例通常在节点有多棒的上下文中说明因为它的单线程异步模型。但是，我找不到这个一般问题的直接答案。

是不是不同节点模块做出不同保证的情况？例如在[https://stackoverflow.com/a/8018371/1072626](https://stackoverflow.com/a/8018371/1072626)，答案清楚地说明了涉及 Redis 的异步调用保留了顺序。

这个问题的症结可以归结为以下执行（或类似的）在节点中是严格安全的吗？

```
var fs = require("fs");
fs.unlink("/tmp/test.png");
fs.rename("/tmp/image1.png", "/tmp/test.png"); 
```

根据作者的说法，`unlink`需要调用，因为如果存在预先存在的文件，重命名将在 Windows 上失败。但是，这两个调用都是异步的，所以我最初的想法是调用`rename`应该在回调中，`unlink`以确保异步 I/O 在异步`rename`操作开始之前完成，否则`rename`可能会先执行，导致错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:33:51.280

异步操作没有任何确定的执行时间。

当您调用 时`unlink`，它会要求操作系统删除文件，但未定义操作系统何时实际删除文件；可能是一毫秒或一年后。

异步操作的全部意义在于它们不相互依赖，除非明确说明。

为了在`rename`之后发生`unlink`，您必须像这样修改您的代码：

```
fs.unlink("/tmp/test.png", function (err) {
    if (err) {
        console.log("An error occured");
    } else {
        fs.rename("/tmp/image1.png", "/tmp/test.png", function (err) {
            if (err) {
                console.log("An error occured");
            } else {
                console.log("Done renaming");
            }
        });
    }
}); 
```

或者，使用同步版本的 fs 函数（注意这些会阻塞执行线程）：

```
fs.unlinkSync("/tmp/test.png");
fs.renameSync("/tmp/image1.png", "/tmp/test.png"); 
```

还有诸如[async](https://github.com/caolan/async)之类的库可以使异步代码看起来更好：

```
async.waterfall([
    fs.unlink.bind(null, "/tmp/test.png");
    fs.rename.bind(null, "/tmp/image1.png", "/tmp/test.png");
], function (err) {
    if (err) {
        console.log("An error occured");
    } else {
        console.log("done renaming");
    }
}); 
```

请注意，在所有示例中，错误处理都非常简化以表示该想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:33:17.723

如果您查看 Node.js 的[文档](http://nodejs.org/api/fs.html#fs_fs_unlink_path_callback)，您会发现函数 fs.unlink 将回调作为参数：

```
 fs.unlink(path, [callback]); 
```

您打算在当前函数返回时执行的操作应作为回调参数传递给函数。因此，通常在您的情况下，代码将采用以下形式：

```
 var fs = require("fs");
 fs.unlink("/tmp/test.png", function(){
     fs.rename("/tmp/image1.png", "/tmp/test.png");
 }); 
```

在取消链接和重命名的特定情况下，Node.js 中也有同步功能，可以用作 fs.unlinkSync(path) 和 fs.renameSync(oldPath, newPath)。这将确保代码同步运行。

此外，如果您希望使用异步实现但保持更好的可读性，您可以考虑使用[async 之](https://github.com/caolan/async/)类的库。它还具有不同实现模式的选项，例如并行、串行、瀑布等。

希望这可以帮助。

# objective-c - Objective-C ARC：如何转换 (void *)YES 作为参数传递？

> ID：11237862
> 
> 赞同：1
> 
> 时间：2012-06-28T03:55:43.173
> 
> 标签：objective-c, automatic-ref-counting, selector

我有一组视图，我需要将它们全部隐藏，所以我使用：

```
BOOL shouldHideViews = YES;
[allViews makeObjectPerformSelector:@selector(setHidden:) withObject:(void *)shouldHideViews] 
```

当我将代码转换为 ARC 时，它告诉我需要一些桥接演员，然后我进行了更改：

```
(void *)shouldHideViews 
```

到

```
(__bridge BOOL)shouldHideViews 
```

它说不兼容的类型使用 __bridge 转换将“int”转换为“BOOL”

那么我该怎么做呢？我知道我可以迭代数组中的所有视图，但这不是重点，我一般想知道我应该怎么做才能使这个 ARC 兼容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:04:01.027

您不能将原始类型作为 void 指针传递。您应该将布尔变量保留为实例变量并在 setHidden 中引用它。这样你就可以这样做：

```
shouldHideViews = YES; //declare BOOL shouldHideViews; in your .h file
[allViews makeObjectPerformSelector:@selector(setHidden) withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:08:58.137

这些对你很有帮助

[如何在 Cocoa 中将 performSelector:withObject:afterDelay: 与原始类型一起使用？](https://stackoverflow.com/questions/904515/how-to-use-performselectorwithobjectafterdelay-with-primitive-types-in-cocoa)

[使用 performSelector:withObject:afterDelay: 与非对象参数](https://stackoverflow.com/questions/5210733/using-performselectorwithobjectafterdelay-with-non-object-parameters)

[SEL performSelector 和参数](https://stackoverflow.com/questions/2716143/sel-performselector-and-arguments)

您应该使用`NSNumber`或使用`NSInvocation`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T04:12:02.657

的`object`参数`makeObjectsPerformSelector:withObject:`是类型`id`。这意味着它需要指向一个 Objective-C 对象。将非对象投射到 an`id`是一个坏主意，因为系统（特别是在 ARC 下）被允许执行诸如将`retain`and`release`消息发送到 an之类的事情`id`，如果你投射`YES`到`id`.

我建议只使用快速枚举：

```
for (UIView *view in allViews) {
    view.hidden = shouldHideViews;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T04:14:46.710

其他表明您无法通过`YES`这种方式的答案是正确的。然而，有更简单的解决方案：

```
[allViews setValue:[NSNumber numberWithBool: shouldHideViews] forKey:@"hidden"]; 
```

这是有效的，因为 NSArray`setValue:forKey:`正是为了这种用途而覆盖了它。

您现在还可以使用块：

```
[allViews enumerateObjectsUsingBlock:
  ^(id obj, NSUInteger idx, BOOL *stop){ [obj setHidden:shouldHideViews];}]; 
```

或久经考验的真实`for()`循环（请参阅@rob mayoff 的回答。）

其中，我通常只使用`for`循环。

# android - 保存字符串序列化和缓冲的android JAVA.IO ObjectInputStream

> ID：11237865
> 
> 赞同：0
> 
> 时间：2012-06-28T03:56:10.213
> 
> 标签：android, save, java-io

我正在保存并加载混合数据类型。我要么保存部分错误，要么加载部分错误。我正在使用缓冲串行保存和加载方法。变量 lastFetchDate 定义为字符串并初始化为“00/00/00”。保存后重新加载数据时会引发错误。怎么了？我原以为 writeBytes 的反面是字符串的 readBytes。

保存如下：

```
 FileOutputStream fos = new FileOutputStream("userPrefs.dat"); 
  BufferedOutputStream bos = new BufferedOutputStream(fos);   
  ObjectOutputStream oos = new ObjectOutputStream(bos);
  oos.writeBytes(lastFetchDate);
  // I close all streams 
```

加载如下：

```
 FileInputStream fis = new FileInputStream("userPrefs.dat"); 
  BufferedInputStream bis = new BufferedInputStream(fis);   
  ObjectInputStream ois = new ObjectInputStream(bis);
  lastFetchDate=(String)ois.readObject();  //<<<<< Error thrown here
  // I close all streams 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:13:41.507

您已将字符串写入 byte[]，因此需要读取为 byte[]

```
 byte [] bString = new byte[lastFetchDate.length()*2];
    ois.readFully(bString, 0, bString.length); 
```

或者，如果您使用[writeObject 方法](http://developer.android.com/reference/java/io/ObjectOutputStream.html#writeObject%28java.lang.Object%29)写入对象 ，那么您可以读取对象，

```
oos.writeObject(lastFetchDate); 
```

# ios - 提高 MKOverlayViews 的性能

> ID：11237867
> 
> 赞同：1
> 
> 时间：2012-06-28T03:56:21.250
> 
> 标签：ios, performance, mkmapview, mapkit, mkoverlay

[前段时间我在这里](https://stackoverflow.com/questions/9387951/mkoverlayview-performance)问了一个类似的问题，关于通过在创建过程中使用线程来提高 MKOverlays 添加到 MKMapView 的速度，但我很快意识到，真正拖累我的过程部分并不是创建叠加层，但它们添加到地图中。创建许多叠加层（甚至超过 3000 个）需要的时间是可以接受的，但是将它们全部添加到地图中需要的时间太长（15 秒）。

* * *

我知道对于 Stack Overflow，“你最喜欢的”问题通常不被认为是“正确的”，但我认为这个问题还可以，因为尽管它在某种程度上是主观的，但仍然有一个“正确”的答案——提供具有大量 MKOverlayViews 的 MKMapView 的性能发生了重大变化。

基本上，我很想知道是否有人有任何提示或技巧（有任何）来调整将许多不同的 MKOverlays 添加到地图视图的速度。现在我的替代方案是将它们全部组合成一条大线，这要快得多，但是我失去了将每个线段视为单独线的能力（即能够为每个线段显示标注），这是其中之一应用程序中更酷的功能，所以我真的很想找到一种方法来完成这项工作。现在，只要有足够的时间，所有的行都会加载，但即使在之后，滚动也是一场噩梦。

我真的很想听听你的想法！谢谢！

# java - 在 Linux 上找不到 Java 命令

> ID：11237872
> 
> 赞同：32
> 
> 时间：2012-06-28T03:57:23.473
> 
> 标签：java, linux, bash, oracle-enterprise-linux

在 Oracle Enterprise Linux 中，当我键入时，`java`我得到

```
bash: java: command not found 
```

我已经安装了 Java 1.6，我有以下

```
sudo update-alternatives --config java

There are 2 programs which provide 'java'.

  Selection    Command
-----------------------------------------------
*  1           /usr/lib/jvm/jre-1.4.2-gcj/bin/java
 + 2           /usr/java/jre1.6.0_24/bin/java 
```

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-28T04:04:13.080

您可以使用以下命令将 Java 路径之一添加到 PATH 变量。

```
export PATH=$PATH:/usr/java/jre1.6.0_24/bin/ 
```

您可以将此行添加到主目录中的 .bashrc 文件中。将此添加到 .bashrc 将确保每次打开 bash 时都会更新 PATH 变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T15:35:55.730

我有这些选择：

```
-----------------------------------------------
*  1           /usr/lib/jvm/jre-1.6.0-openjdk.x86_64/bin/java
 + 2           /usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java
   3           /home/ec2-user/local/java/jre1.7.0_25/bin/java 
```

当我选择3时，它不起作用。当我选择2时，它确实有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-03T00:14:39.400

我发现对我来说最好的方法是下载解压缩然后将你的新文件符号链接`usr/java/jre-version/bin/java`到你的主 bin 作为 java。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-03T00:26:47.880

安装 jdk 后，我使用以下脚本更新默认替代方案。

```
#!/bin/bash
export JAVA_BIN_DIR=/usr/java/default/bin # replace with your installed directory
cd ${JAVA_BIN_DIR}
a=(java javac javadoc javah javap javaws)
for exe in ${a[@]}; do
    sudo update-alternatives --install "/usr/bin/${exe}" "${exe}" "${JAVA_BIN_DIR}/${exe}" 1
    sudo update-alternatives --set ${exe} ${JAVA_BIN_DIR}/${exe}
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-25T11:50:30.550

1.  执行： vi ~/.bashrc 或 vi ~/.bash_profile

（如果上面的命令不允许更新 .bashrc 文件，那么您可以通过在终端写入命令，即“leafpad ~/.bashrc”在记事本中打开此文件）

2.  添加行：export JAVA_HOME=/usr/java/jre1.6.0_24
3.  保存文件（使用`shift + Z + Z`）
4.  源 ~/.bashrc 或源 ~/.bash_profile
5.  执行：echo $JAVA_HOME（输出应该打印路径）

# ios - 四种设计模式——Objective C 示例代码？

> ID：11237874
> 
> 赞同：7
> 
> 时间：2012-06-28T03:58:24.103
> 
> 标签：ios, objective-c, design-patterns, gang-of-four

我很好奇是否有人知道任何可下载的用于四种设计模式的Objective C示例代码？我正在寻找工作示例 XCode 项目，不介意付费！

顺便说一句，如果您正在寻找其他语言，您可以从[这里开始寻找 Java](https://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns)或从[这里开始寻找各种语言](http://en.wikipedia.org/wiki/Software_design_pattern)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:28:22.957

这不是四人组，但 Apress 有Carlo Chung*的 Pro Objective-C 设计模式 for iOS*，其中包含许多这些模式。除此之外，我不确定在某个地方有这么多在 Objective C 中表示的这些模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T11:44:36.567

以下链接涵盖了一些设计模式

1.  外观（复杂层次结构之上的一个单一界面）
2.  MVC（最流行，没啥好说的）
3.  装饰器（查看依赖模型）
4.  复合（视图和对象的复杂层次结构）
5.  适配器（特定于协议）
6.  观察者（属性值变化时添加观察者）
    6.1\. KVO（Key Value Observing Pattern，与观察者相关）
    6.2。通知样式
7.  Memento（归档视图的状态并在应用重新加载时恢复）
8.  命令（通常称为目标-动作设计模式）

一般用于解决开发应用程序时发现的一些问题...... [http://www.raywenderlich.com/46988/ios-design-patterns](http://www.raywenderlich.com/46988/ios-design-patterns)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:52:38.843

没有一本针对特定代码应用了设计模式的书，但其中有一些非常有用的示例*Clean Code*和*Clean Coder*

# asp.net - 验证文本框不包含某些值

> ID：11237876
> 
> 赞同：0
> 
> 时间：2012-06-28T03:58:32.357
> 
> 标签：asp.net, validation

我的情况是，在我的 asp.net 页面中，TextBox 不应**包含**以下值
**.Edit
.Delete
.ReadOnly**

那么如何使用正则表达式来验证呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:04:53.780

或者您可以使用单个正则表达式验证器并编写

```
^\b((?!(Edit|Delete|ReadOnly)).)*$ 
```

让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:02:42.193

使用自定义验证器并检查其中的每一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:42:07.310

在三个正则表达式验证器中试试这个

```
^((?!Edit).)*$
^((?!Delete).)*$
^((?!Readonly).)*$ 
```

当然，您可以根据需要定制正则表达式。

# iphone - 加速 -[setImage:] 使用 UIImageView？

> ID：11237878
> 
> 赞同：2
> 
> 时间：2012-06-28T03:58:52.267
> 
> 标签：iphone, ios, uiimageview, uiimage

我目前正在开发一个应用程序，该应用程序包含图像下载和在滚动视图中显示大约 20 个图像。下载效果很好，从 NSData 到 UIImage 的转换也是如此。但是，如果多个下载同时完成，我会遇到 1 秒的延迟峰值，因此如果 UIImageView 的多个图像属性设置得非常接近。我怎样才能减少这种滞后？

这是下载完成时调用的代码。这可以在 1 秒的间隔内调用 20 次左右。

```
// _imageDataQueue is a dispatch_queue created in the init method
dispatch_async(_imageDataQueue, ^{

    // data is an NSData object set when the download completes
    UIImage *image = [UIImage imageWithData:data];

    dispatch_async(dispatch_get_main_queue(), ^{

        if (image) {

            // this is stripped down, but it is just some simple logic
            // and eventually the image is set
            [theImageView setImage:image];

        } else {

            // called if there is no image and theImageView's image is set
            // to a cached image
            [theImageView setImage:someCachedUIImage];

        }

    });

}); 
```

也许我可以将 setImage 调用排队？解决此问题的最佳方法是什么？

# java - 无法运行 java 验证 (JSR 303)

> ID：11237879
> 
> 赞同：2
> 
> 时间：2012-06-28T03:59:09.037
> 
> 标签：java, hibernate, validation, conflict, bean-validation

最近，我决定在我们的项目中使用JSR 303来验证bean，但是当我运行JUNI测试时，它出错了，日志如下：

```
java.lang.AbstractMethodError: org.hibernate.ejb.HibernatePersistence.getProviderUtil()Ljavax/persistence/spi/ProviderUtil;
    at javax.persistence.Persistence$1.isLoaded(Persistence.java:78)
    at org.hibernate.validator.engine.resolver.JPATraversableResolver.isReachable(JPATraversableResolver.java:61)
    at org.hibernate.validator.engine.resolver.DefaultTraversableResolver.isReachable(DefaultTraversableResolver.java:131)
    at org.hibernate.validator.engine.resolver.SingleThreadCachedTraversableResolver.isReachable(SingleThreadCachedTraversableResolver.java:46)
    at org.hibernate.validator.engine.ValidatorImpl.isValidationRequired(ValidatorImpl.java:1242)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:448)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:397)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:361)
    at org.hibernate.validator.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:313)
    at org.hibernate.validator.engine.ValidatorImpl.validate(ValidatorImpl.java:139)
    at com.icil.service.validator.BeanValidator.validate(BeanValidator.java:74)
    at com.icil.sofs.booking.model.ValidateTest.test1(ValidateTest.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunner.java:99)
    at org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.java:81)
    at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
    at org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:75)
    at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)
    at org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClassMethodsRunner.java:71)
    at org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner.java:35)
    at org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.java:42)
    at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
    at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有人告诉我这是由于 JAR 文件冲突。但我不知道哪个 JAR 有冲突。谁能告诉我哪些 JAR 文件有冲突。任何帮助对我来说都是巨大的，谢谢！！！

![在此处输入图像描述](../Images/7903a499137dca7d6dfc2832e6ad97c2.png)

![在此处输入图像描述](../Images/aa40c181b1ee91cd8802cb0a9611a50b.png)

![在此处输入图像描述](../Images/c6425ef8df747c97b9c7a299519fe6de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T13:02:25.720

如果只是验证问题，请考虑使用您自己的 TraversableResolver 实现，而不是 JPATraversableResolver 或 DefaultTraversableResolver。 [这是如何做到的](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-bootstrapping.html#d0e2255)。

JPATraversableResolver 可能会导致对 JPA 的不希望的依赖。[这是一个有类似问题的人。](https://forum.hibernate.org/viewtopic.php?f=26&t=1005704)

当然，如果您希望您的应用程序符合 JPA2，这不是一个解决方案。

```
public class MyTraversableResolver implements TraversableResolver {

     public boolean isReachable(Object traversableObject, Path.Node traversableProperty, Class rootBeanType, Path pathToTraversableObject, ElementType elementType) {
        return true;
     }

     public boolean isCascadable(Object traversableObject, Path.Node traversableProperty, Class rootBeanType, Path pathToTraversableObject, ElementType elementType) {
        return true;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T14:50:32.980

我面临着类似的问题。实际上，HibernatePersistence 在实体 jar 中没有 ProviderUtil() 方法。以下组合效果很好。

```
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-validator</artifactId>
<version>5.0.0.Final</version>
</dependency>

<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-annotations</artifactId>
<version>3.5.6-Final</version>
 </dependency>

 <dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-entitymanager</artifactId>
<version>3.6.5.Final</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T05:01:35.523

如果没有 JAR 列表，很难在这里为您提供帮助。你的项目中有 Maven 吗？

如果是这样，您可以使用 `mvn dependency:tree 并查看 jar 树。

可能是您使用的休眠不符合 JPA 2.0 规范 ProviderUtil 类是在 JPA 2.0 中引入的，如文档所述： [ProviderUtil](http://docs.oracle.com/javaee/6/api/javax/persistence/spi/ProviderUtil.html)

还有一个问题：您是在独立运行还是在某个容器（应用程序/Web 服务器或其他东西）内运行，例如，如果您正在运行 JBoss，它在 lib 文件夹中有自己的 jar，也可能与您的 jar 冲突。您究竟是如何运行 JUnit 测试的？

# facebook - 如何从我的朋友列表中获取 Facebook 用户名。？

> ID：11237880
> 
> 赞同：0
> 
> 时间：2012-06-28T03:59:38.647
> 
> 标签：facebook, facebook-graph-api

我想在我的朋友列表中获取人的用户名。我怎样才能做到这一点？

我在用

```
https://graph.facebook.com/me/friends&access_token=... 
```

这是返回给我一个`json response`包含所有名称和 ID 号的信息吗？我想以某种方式获取用户名（不是用户 ID）？

有一种方法可以访问每个 ID，然后获取用户名，但考虑到我有 500 个朋友，这需要很长时间。有没有更短的方法/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:07:57.983

在 fields 参数中询问用户名：

```
https://graph.facebook.com/me/friends?fields=username&access_token=... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:24:58.387

我似乎无法在 API 中找到任何内容来获取用户配置文件列表。但一种可能的解决方案是使用批处理请求。您可以将每个单独的用户配置文件请求合并为一个大批量。它仍然很麻烦，但比为每个朋友发出单独的 HTTP 请求要好。

[http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/](http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/)

例如：

```
 $batched_request = '[
    {"method":"GET","relative_url":"friend_id_1"},'.'{"method":"GET","relative_url":"friend_id_2"}
  ]';

  $post_url = "https://graph.facebook.com/" . "?batch=" . $batched_request
  . "&access_token=" . $access_token . "&method=post"; 
```

# php - 覆盖 Fosuser 配置文件表单的标签

> ID：11237882
> 
> 赞同：0
> 
> 时间：2012-06-28T04:00:09.407
> 
> 标签：php, forms, symfony, label, fosuserbundle

我写了一个表单类型扩展了forsuser ProfileFormType，但是每次我在模板中渲染它时，表单顶部应该总是有一个标签“用户”。我发现它来自原始 fosuser ProfileFormType：

```
namespace FOS\UserBundle\Form\Type;
use .....
class ProfileFormType extends AbstractType
{

private $class;

/**
 * @param string $class The User class name
 */
public function __construct($class)
{
    $this->class = $class;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $child = $builder->create('user', 'form', array('data_class' => $this->class));
    $this->buildUserForm($child, $options);

    ....... 
```

如果我为此表单字段添加属性，例如：

```
$child = $builder->create('user', 'form', array('label'=>'some info','data_class' => $this->class)); 
```

它可以工作，但它不利于修改原始文件，如何在我的自定义表单类型或渲染时在模板中修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:40:09.380

您需要`FOSUserBundle`通过创建自己的`UserBundle`和在 Bundle 类中添加来扩展：

```
public function getParent()
{
    return 'FOSUserBundle';
} 
```

然后创建 Form/Type 目录并创建一个名为的新表单类型`ProfileFormType`，并在该新表单类型位置内：

```
namespace Acme\UserBundle\Form\Type;  

use Symfony\Component\Form\FormBuilderInterface; 
use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;  

class ProfileFormType extends BaseType {     

public function buildForm(FormBuilderInterface $builder, array $options)     
{         
    parent::buildForm($builder, $options);         

    // add your custom field        
    $builder->add('name');    
}      

public function getName()     
{         
    return 'acme_user_profile';     
} 
```

之后，您需要将新表单添加到服务中，例如：

```
<services>         
     <service id="acme_user.profile.form.type" class="Acme\UserBundle\Form\Type\ProfileFormType">
         <tag name="form.type" alias="acme_user_profile" />             
         <argument>%fos_user.model.user.class%</argument>         
     </service>      
 </services> 
```

最后将其添加到您的 config.yml 中：

```
fos_user:     
    # ...     
    profile:       
        form:          
            type: acme_user_profile 
```

请记住替换`acme`为您当前的结构信息。

可以在以下位置找到更多信息：[https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:39:07.073

如果您只想覆盖标签，只需在`app/Resources/FOSUserBundle/translations`目录中添加一个 FOSUserBundle.xx.yml 文件。无需覆盖整个捆绑包，即使它可能适合进一步覆盖......

如果您已经覆盖了 FOSUserBundle，请将文件添加到`YourCustomFOSUserBundle/Resources/translations`!

从`FOSUserBundle/Resources/translations/FOSUserBundle.xx.yml`您要覆盖的地方复制它，并修改翻译。您应该只在此文件中保留修改后的翻译。

# java - Eclipse中粗黑光标删除代码，不知道怎么去掉

> ID：11237884
> 
> 赞同：35
> 
> 时间：2012-06-28T04:00:43.290
> 
> 标签：java, eclipse, text-cursor

当我在语句中间编辑代码时，它会替换它周围的当前代码。我找不到用只插入数据而不是替换它的普通游标来替换它的方法。在 Eclipse 中可以实现该功能吗？

[![查看第三条语句右侧的黑色光标](../Images/e0a84d44802f90fa0fb7175ab2d5d691.png)](https://i.stack.imgur.com/Af1Lc.png)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-28T04:04:12.150

在底部的状态栏中也发现了问题：

[![覆盖状态栏中的标签](../Images/598219bd1c0cba5cbe69e5a77e77e69f.png)](https://i.stack.imgur.com/LeaRC.png)

您处于覆盖模式而不是插入模式。

**“插入”键在插入和覆盖模式之间切换。**

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-28T04:18:11.703

听起来你点击了“插入”键..在大多数应用程序中，这会导致显示一个胖（实心矩形）光标，正如你的屏幕截图所示。这表明您处于*覆盖*模式而不是默认*插入*模式。

只需再次按下键盘上的“插入”键……它通常位于“删除”（不是退格）、滚动锁定和“打印屏幕”（通常在全尺寸键盘中的光标键上方）附近。这将切换返回插入模式并将光标变为垂直线而不是矩形。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-09T18:42:50.487

您可能已经按下`0`（也用于插入、快捷方式`INS`）键，它位于右滚动按钮的右侧。要解决问题，只需再次按下它或双击“覆盖”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-14T19:59:37.070

就我而言，这个问题与 Insert 键无关。在我不知情的情况下，这与启用 Vrapper 并像 Vim 一样进行编辑有关。

我只是切换了 Eclipse 顶部菜单栏中的 Vrapper 图标，然后按下插入键，问题就解决了。

希望这个答案对将来的某人有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-17T14:12:54.057

这个问题不仅可能发生在[eclipse](/questions/tagged/eclipse "显示标记为“日食”的问题")中，也可能发生在任何[text-editor](/questions/tagged/text-editor "显示标记为“文本编辑器”的问题")中。

在[Windows](/questions/tagged/windows "显示标记为“windows”的问题")系统上，在我的情况下是[windows-10](/questions/tagged/windows-10 "显示标记为“windows-10”的问题")`shift` ，当无意中同时按下和`insert`键时，就会出现这个问题，这会将用户带到**覆盖**模式。

要返回**插入**模式，您需要再次按`shift`和`insert`串联。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-28T18:33:36.403

就我而言，它与 Eclipse 中的**Toggle Vrapper 图标**有关。

如果您得到粗体黑色光标，则必须启用该图标。因此，单击 Toggle Vrapper 图标以禁用。它位于 Eclipse 的工具栏中。请参阅附图以了解清晰度。

[![在此处输入图像描述](../Images/dc0960fd45b9f07b59289d255f7f9cea.png)](https://i.stack.imgur.com/tAX21.jpg)

# hadoop - Hadoop添加第三个节点会出错

> ID：11237885
> 
> 赞同：0
> 
> 时间：2012-06-28T04:00:44.673
> 
> 标签：hadoop, apache-pig, hdfs

我是 Hadoop/Pig 初学者。

我在 hadoop 集群中有 3 个节点。我在其中一台机器上有Namenode和辅助namenode以及作业跟踪器，在另外两台机器上有数据节点和任务跟踪器。所有 3 个节点都是独立的物理机。

当我在 2 节点集群上运行示例 map reduce 示例时，它工作正常。但是，当我添加第三个节点时，它给了我以下错误。

> 740514，OP：MAPRED_SHUFFLE，CLIID：trib_201206271903_0002_m_00000000_0，持续时间：37426656 2012-06-27 19：13：20,458 org..hadoope.hadoope.hadoop.hadoop.mapred.mapred.tasktaskracker：getmaptracker：getmaptup：getmaptup（lotmaptup） DiskChecker$DiskErrorException：无法在 org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathToRead(LocalDirAllocator.java: 429) 在 org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:3857) 在 javax.servlet.http.HttpServlet .service(HttpServlet.java:707) 在 javax.servlet.http。org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 上的 HttpServlet.service(HttpServlet.java:820) org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)在 org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:835) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212) 在 org.mortbay.jetty.servlet .ServletHandler.handle(ServletHandler.java:399) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450) 在 org.mortbay.jetty.handler。ContextHandlerCollection.handle(ContextHandlerCollection.java:230) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay .jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) 在org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java: 410) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at org.mortbay.jetty.Server.handle(Server.java:326) at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) at org .mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212 ) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run( QueuedThreadPool.java:582)jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at org.mortbay.jetty.Server.handle(Server.java:326) at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) at org .mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212 ) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run( QueuedThreadPool.java:582)handleRequest(HttpConnection.java:542) at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) at org.mortbay.jetty .HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org. mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)handleRequest(HttpConnection.java:542) at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) at org.mortbay.jetty .HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org. mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)404) 在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
> 
> 2012-06-27 19:13:20,458 警告 org.apache.hadoop.mapred.TaskTracker：地图输出错误的未知孩子：尝试_201206271903_0002_m_000001_0。忽略。

我已按照说明[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:31:36.867

我不能确切地告诉你问题的解决方案，但我可以给你一个清单以某种方式进行验证。希望这可以帮助。

1.  您是否在新添加的节点上启动了 dfs 和 mapred 守护程序？
2.  您是否在从属配置文件中添加了第三个节点？
3.  检查您在 hdfs-site 文件中指定的数据路径，确保第三个节点可以在那里写入数据。

# jquery - jQuery 选择器帮助 - 或，和

> ID：11237886
> 
> 赞同：2
> 
> 时间：2012-06-28T04:00:47.917
> 
> 标签：jquery, jquery-selectors, jquery-isotope

我正在尝试创建一个 jQuery 选择器，它将执行以下操作：

```
(.a OR .b OR .c) AND (.x OR .y OR .z) 
```

显然，这不起作用：

```
$("(.a,.b,.c)(.x,.y,.z)") 
```

我需要在单个选择器中使用它，以便可以将它用作 Isotope 插件中的过滤器。[http://isotope.metafizzy.co/docs/filtering.html](http://isotope.metafizzy.co/docs/filtering.html)

这是我想要实现的示例：http: [//isotope.metafizzy.co/demos/combination-filters.html](http://isotope.metafizzy.co/demos/combination-filters.html)，只有我希望能够选择红色和蓝色。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:07:07.087

通过扩展`AND`（它基本上是[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)），这相当于：

```
.a.x OR .a.y OR .a.z OR .b.x OR .b.y OR .b.z OR .c.x OR .c.y OR .c.z 
```

所以只需用`OR`s替换`,`s ，你就有了一个选择器：

```
$('.a.x, .a.y, .a.z, .b.x, .b.y, .b.z, .c.x, .c.y, .c.z') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:10:01.753

您可以[`:not()`](http://api.jquery.com/not-selector/)使用[De Morgan 定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)来做到这一点（即，您使用双重否定将 AND 转换为 OR，而不是扩展您的逻辑公式）：

```
:not(:not(.a, .b, .c), :not(.x, .y, .z)) 
```

[jsFiddle](http://jsfiddle.net/nDFdd/)的工作示例。我正在应用的转换是：

```
a AND b ==> not(not(a AND b))
        ==> not((not a) OR (not b)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:14:26.867

您可以创建一个返回字符串的表达式

演示：http: [//jsfiddle.net/sq4xF/](http://jsfiddle.net/sq4xF/)

```
var parents=['a','b','c']
var kids=['c','d','e']

var selector=[];
for ( i=0; i<parents.length; i++){
   var sel='.'+parents[i] ;
    for (j=0; j<kids.length; j++){
       selector.push( sel+"."+kids[j]);  /* add space if kids are desecendents, "AND" was not clear in question*/
    }
}

$("'"+ selector.join()+"'").css('color','red') 
```

# c++ - 在 C++ 中的 multimap 中插入映射值的对

> ID：11237887
> 
> 赞同：0
> 
> 时间：2012-06-28T04:00:50.240
> 
> 标签：c++, stl, multimap

找到这个[包含对的 Multimap？](https://stackoverflow.com/questions/3099947/multimap-containing-pairs)，但帮助不大

我将如何插入两个字符串`pair`？下面，我的两次失败的尝试。

```
multimap<string, pair<string,string> > mymm;
mymm["Alex"] = std::pair<"000","000">; //errors
mymm.insert(pair<string, pair<string, string> > 
           ("Alex", std::pair<"000","000">); // errors out as well 
```

我正在使用 32 位的 Visual Studio 2010。谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T04:27:16.157

```
mymm.insert(make_pair("Alex",make_pair("000","000"))); 
```

多图不允许使用运算符 [] 进行查找，因为可能存在多个匹配项。

make_pair 是一种无需显式指定类型即可创建对的便捷方式。如果不使用 make_pair，您将需要执行以下操作：

```
mymm.insert(pair<string,pair<string,string> >("Alex",pair<string,string>("000","000"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T04:04:43.000

`std::pair<string,string>("000","000")`应该这样做。

< 和 > 之间包含的代码表示您要插入的变量的类型——在本例中为字符串

# c# - 在独立的可重用库中的 AutoMapper 中创建地图的推荐方法是什么？

> ID：11237891
> 
> 赞同：3
> 
> 时间：2012-06-28T04:01:50.770
> 
> 标签：c#, automapper, appdomain

我正在组合一个 .Net 4 库，该库旨在作为独立程序集分发。库的一部分执行一些临时 Web 服务调用，我计划在其中将投影版本返回给库的使用者。在 web 服务响应表示和库的使用者实际获得的内容之间需要进行大量映射。我希望利用[AutoMapper](http://automapper.org/)来完成这项任务；通常情况下，约定将能够为我处理很多无聊的从右到左的映射代码。

因此，例如，我的库可能会公开看起来像这样的代码：

```
public Widget GetWidget(Guid id)
{
    // Get server representation
    ServerWidget serverWidget = this.Request<ServerWidget>(id);

    // Map to client representation
    Widget clientWidget = Mapper.Map<ServerWidget, Widget>(serverWidget);

    return clientWidget;
} 
```

在代码的其他地方，我显然需要调用（加上映射的任何自定义配置）：

```
Mapper.CreateMap<ServerWidget, Widget>(); 
```

[根据 AutoMapper 的设计指南，](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)每个 AppDomain 只应执行一次（因为这是一项昂贵的操作）。由于该库可以在任意数量的可能环境中使用（ASP.NET、WinForms 应用程序、WPF 应用程序、单元测试运行程序等），在这种情况下如何正确设置地图？

显然，我的代码可以为客户端公开某种方法来调用“初始化事物”（在本例中为映射器）并假设他们确实在应用程序启动过程中的正确时间进行了该调用，但这看起来像强加给图书馆消费者的一个非常蹩脚的要求。

任何人对我有任何建议和/或可以将我指向 GitHub、Codeplex 等已经在做类似事情的开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:01:18.997

在你的库中拥有一个静态 IsMappingInitialised 方法怎么样，在进行这样的映射之前检查它，这是线程安全的：

```
private static readonly object MappingLock = new object();
private static bool _ready = false;

public static bool IsMappingInitialised()
{
    if (!_ready)
    {
        lock (MappingLock)
        {
            if (!_ready)
            {
                Mapper.CreateMap<ServerWidget, Widget>();
                _ready = true;
            }
        }
    }

    return _ready;
} 
```

这样你就不需要依赖你的消费者来进行初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T18:54:21.787

您还可以利用 .Net 的[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)功能。在您的类中添加一个静态构造函数并添加地图的创建。您不需要任何锁定，因为 CLR 可确保每个 AppDomain 只能执行一次静态构造函数。这对您的情况来说已经足够了，因为您使用的是静态映射器 ( `AutoMapper.Mapper`)，它也是每个 AppDomain 一个。

# php - 第一个下拉菜单自动更改第二个下拉菜单的选项

> ID：11237900
> 
> 赞同：11
> 
> 时间：2012-06-28T04:03:53.763
> 
> 标签：php, javascript, jquery, html

我有两个下拉菜单，其中选项不是从数据库中获取的。

第一个，让用户选择一个类别。

```
<select name="category">
    <option value="0">None</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
    <option value="4">Fourth</option>
</select> 
```

第二个选项取决于第一个下拉菜单中的选择。例如，如果用户选择第**一个**选项，那么第二个下拉菜单将显示

```
<select name="items">
    <option value="3">Smartphone</option>
    <option value="8">Charger</option>
</select> 
```

但是当用户改变主意或先选择**第二个**选项时，现在将显示第二个下拉列表

```
<select name="items">
    <option value="1">Basketball</option>
    <option value="4">Volleyball</option>
</select> 
```

我的问题是我怎样才能做到这一点？这可以在不使用数据库的情况下完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T04:23:25.727

请参阅下文以查看**不使用数据库的工作示例**。

## 使用 MySQL 数据库的工作示例

如果您想使用数据库连接它，是的，这肯定是可能的。考虑这张表：

```
CREATE TABLE `contents` (
    `id` INT PRIMARY KEY AUTO_INCREMENT,
    `name` VARCHAR (255),
    `parent` INT DEFAULT 0
);

INSERT INTO `contents` (`name`, `parent`) VALUES
    ('Names', 0),
    ('Places', 0),
    ('Animals', 0),
    ('Praveen', 1),
    ('Bill Gates', 1),
    ('Steve Jobs', 1),
    ('India', 2),
    ('New York', 2),
    ('London', 2),
    ('Singapore', 2),
    ('Cat', 3),
    ('Dog', 3),
    ('Tiger', 3),
    ('Deer', 3) 
```

## 表结构

```
+----+------------+--------+
| id | name       | parent |
+----+------------+--------+
|  1 | Names      |      0 |
|  2 | Places     |      0 |
|  3 | Animals    |      0 |
|  4 | Praveen    |      1 |
|  5 | Bill Gates |      1 |
|  6 | Steve Jobs |      1 |
|  7 | India      |      2 |
|  8 | New York   |      2 |
|  9 | London     |      2 |
| 10 | Singapore  |      2 |
| 11 | Cat        |      3 |
| 12 | Dog        |      3 |
| 13 | Tiger      |      3 |
| 14 | Deer       |      3 |
+----+------------+--------+ 
```

## 初始 HTML 和 PHP 代码

现在，让我们使用 PHP 首先填充初始值`<select>`：

```
<?php
    mysql_connect();
    mysql_select_db("contents");
    $result = mysql_query("SELECT * FROM `contents` WHERE `parent` = 0");
    while(($data = mysql_fetch_array($result)) !== false)
        echo '<option value="', $data['id'],'">', $data['name'],'</option>'
?> 
```

现在`<select>`准备好了。使用它的 onchange 函数，我们可以触发一个 AJAX 事件以`<select>`使用 parent 提供的数据获取新的`<select>`。

```
<select onchange="ajaxfunction(this.value)">
    <!-- Options would have been initially populated here -->
</select> 
```

现在对于 jQuery 函数，您可以这样做：

```
<script type="text/javascript">
    function ajaxfunction(parent)
    {
        $.ajax({
            url: 'process.php?parent=' + parent;
            success: function(data) {
                $("#sub").html(data);
            }
        });
    }
</script> 
```

在 HTML 中，在 之后，您需要用as`<select>`给另一个。`select``id``sub`

```
<select onchange="ajaxfunction(this.value)">
    <!-- Options would have been initially populated here -->
</select>
<select id="sub"></select> 
```

## 处理 PHP 源代码

最后是源代码`process.php`：

```
<?php
    mysql_connect();
    mysql_select_db("contents");
    $result = mysql_query("SELECT * FROM `contents` WHERE `parent` = " . mysql_real_escape_string($_GET["parent"]));
    while(($data = mysql_fetch_array($result)) !== false)
        echo '<option value="', $data['id'],'">', $data['name'],'</option>'
?> 
```

## 不使用数据库的工作示例

你只需要在 PHP 中替换它。

```
<?php
    $parent = array("Name", "Place", "Animals");
    foreach ($parent as $id => $name)
        echo '<option value="s', $id,'">', $name,'</option>'
?> 
```

对于`process.php`：

```
<?php
    $parent = array("Name", "Place", "Animals");
    $s0 = array("Praveen", "Bill Gates", "Steve Jobs");
    foreach (${$_GET["parent"]} as $id => $name)
        echo '<option value="', $data['id'],'">', $data['name'],'</option>'
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T04:40:32.940

关于数据库的部分并不是很清楚，因为选择可能会以某种方式“列出”。如果您有其他格式的它们，那是有道理的，或者如果您询问是否需要回调数据库 ( `postback`)，答案是否定的。但不清楚你的意思。

无论如何，您可以使用一个`rel=""`值（或`data-items=""`）来设置一个选择与另一个选择之间的关系。

例如：

**CSS**

```
.cascade {
    display: none;
} 
```

**HTML - 修改**

```
<select name="category">
    <option value="0">None</option>
    <option value="1" rel="accessories">Cellphones</option>
    <option value="2" rel="sports">Sports</option>
    <option value="3" rel="cars">Cars</option>
</select>
<select name="items" class="cascade">
    <option value="3" class="accessories">Smartphone</option>
    <option value="8" class="accessories">Charger</option>
    <option value="1" class="sports">Basketball</option>
    <option value="4" class="sports">Volleyball</option>
    <option value="6" class="cars">Corvette</option>
    <option value="2" class="cars">Monte Carloe</option>
</select> 
```

**jQuery**

```
$(document).ready(function(){
    var $cat = $('select[name=category]'),
        $items = $('select[name=items]');

    $cat.change(function(){
        var $this = $(this).find(':selected'),
            rel = $this.attr('rel'),
            $set = $items.find('option.' + rel);

        if ($set.size() < 0) {
            $items.hide();
            return;
        }

        $items.show().find('option').hide();

        $set.show().first().prop('selected', true);
    });
}); 
```

[http://jsfiddle.net/userdude/bY5LF/](http://jsfiddle.net/userdude/bY5LF/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T04:37:00.140

这是另一个例子，基本上所有的数据都在一个对象的页面上，你用它来显示不同的 [类别 FIDDLE](http://jsfiddle.net/CxYMB/)

```
var categories = {
    "None":[{value:'3', text:'No cataegory selected'}],
    "First":[{value:'1', text:'Bmw'},{value:'2', text:'Benz'}],
    "Second":[{value:'4', text:'Playstation'},{value:'5', text:'Xbox'},{value:'10', text:'Wii'}],
    "Third":[{value:'6', text:'Dell'},{value:'7', text:'Acer'}],
    "Fourth":[{value:'8', text:'Audi'},{value:'9', text:'Datsun'}]
};
function selectchange(){
    var select = $('[name=items]');
    select.empty();
    $.each(categories[$(':selected', this).text()], function(){
        select.append('<option value="'+this.value+'">'+this.text+'</option>');
    });
}
$(function(){
    $('[name=category]').on('change', selectchange);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T04:15:20.547

**2 代码的工作演示** `:)` [http://jsfiddle.net/PnSCL/2/](http://jsfiddle.net/PnSCL/2/) **或** [http://jsfiddle.net/PnSCL/](http://jsfiddle.net/PnSCL/)

这是可以实现的，但您需要在第一选择和第二选择之间建立关系。

请在这里查看： http: [//api.jquery.com/data/](http://api.jquery.com/data/)

我在`label`这里添加了关系[http://jsfiddle.net/PnSCL/2/](http://jsfiddle.net/PnSCL/2/) [ [http://www.w3schools.com/tags/tag_option.asp](http://www.w3schools.com/tags/tag_option.asp) ]

**行为**当您`first`从 select1 中选择选项时，它将显示，`smartphone, chargers`否则当用户`second`从 select1 中选择时，它将显示`baskeball, voleyball`在 select2 中。

希望这会有所帮助，如果我错过了什么，请告诉我。

**演示 1**

**代码**

```
$("#category").change(function() {
if($(this).data('options') == undefined){
    /*Taking an array of all options-2 and kind of embedding it on the select1*/
    $(this).data('options',$('#select2 option').clone());
    }
var id = $(this).val();
var options = $(this).data('options').filter('[label=' + id + ']');
$('#select2').html(options);
   // alert(options);
}); 
```

**HTML**

```
<select name="select1" id="category">
    <option value="0">None</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
    <option value="4">Fourth</option>
</select>

<select name="items" id="select2">

    <option value="3" label="1">Smartphone</option>
    <option value="8" label="1">Charger</option>

    <option value="1" label="2">Basketball</option>
    <option value="4" label="2">Volleyball</option>
</select> 
```

**演示 2** **代码**

```
$("#category").change(function() {
if($(this).data('options') == undefined){
    /*Taking an array of all options-2 and kind of embedding it on the select1*/
    $(this).data('options',$('#select2 option').clone());
    }
var id = $(this).val();
var options = $(this).data('options').filter('[value=' + id + ']');
$('#select2').html(options);
    alert(options);
}); 
```

**HTML**

```
<select name="select1" id="category">
    <option value="0">None</option>
    <option value="1">First</option>
    <option value="2">Second</option>
    <option value="3">Third</option>
    <option value="4">Fourth</option>
</select>

<select name="items" id="select2">

    <option value="1">Smartphone</option>
    <option value="1">Charger</option>

    <option value="2">Basketball</option>
    <option value="2">Volleyball</option>
</select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T05:04:34.717

**不使用任何数据库的工作解决方案：**

**HTML**

```
<select name="country" id="country" onChange="showState();">   
    <option value="">Select Country</option>
    <option value="1">Pakistan</option>
    <option value="2">Saudi Arabia</option>
</select>

<div id="div_state"></div> 
```

**jQuery**

```
<script>
    function showState()
    {
        $('body').css('cursor','wait');
        var value = document.getElementById('country').value;
        var url = 'http://fiddle.jshell.net/rathoreahsan/WcKQ2/4/show/';

        $.ajax({
            type: "GET",
            url: url,
            data:{'country':value},
            success:function(results)
            {              

                $('#div_state').html(results);

                if (value == "1") 
                {
                    $('#PK').css('display','block')                
                } 

                else if (value == "2") 
                {
                    $('#SA').css('display','block')                        
                }

                $('body').css('cursor','default');            

            }
        });
    }
</script> 
```

**CSS：**

```
#PK, #SA { display: none; } 
```

**查看演示** [http://jsfiddle.net/rathoreahsan/WyLsh/](http://jsfiddle.net/rathoreahsan/WyLsh/)

**国家页面： http:** [//fiddle.jshell.net/rathoreahsan/WcKQ2/4/show/](http://fiddle.jshell.net/rathoreahsan/WcKQ2/4/show/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-25T14:13:58.733

**这是一个非常简单的完整示例：**

外部 URL 将向我们发送选项列表，然后我们将使用 jquery $(selector).html() 方法将该下拉列表分配给第二个下拉菜单。

```
<script type="text/javascript">

    $("#country").on('change',function(){
        var country= $(this).val();

        $.ajax({
            url: 'cities.php' ,
            type: 'POST',
            data: "country="+country,
            success: function(cities)
            {
                $("#cities").html(cities);
            }

        });
    });
</script> 
```

[**完整演示**](https://codingpk.com/Post/Tutorial/how-to-get-drop-down-menu-list-depend-on-changing-the-other-drop-down-list)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-28T04:10:00.830

只是建议你怎么做——

```
<select name="country" id="country" onChange="showState();" >
<option value="">Select Country</option>
<option value="1">India</option>
<option value="2">Nepal</option>
</select> 
```

你的剧本——

```
<script type="text/javascript">
function showState( )
{
var value = document.getElementById('country').value;
var url = '<?php echo base_url ?>showstate.php';
$.ajax({
type: "GET",
url: url,
data:{'country':value},
success:function(results)
{   
    $('#div_state').html(results);
}
});
}
</script> 
```

你的`showstate.php`php页面——

```
//INCLUDE CONNECTION file to for db query
$type = $_GET['country'];

//Your DB QUERIES
//Your data on Get condition
/*USING SWITCH--
switch ($type) {
case "India":
    echo "I m in India";
    break;
case "Nepal":
    echo "I am in Nepal";
    break; 
```

`#div_state`这将在您的div中加载内容。您也可以为此使用 Jquery。我认为这会对您有所帮助 :) 如果您有任何疑问，请告诉我。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-01T10:00:31.437

```
$(document).ready(function(){
    $('#causes').change(function(){

         $.getJSON("<?=URL.$param->module."/".$param->controller?>/getcourtcauses",{causeId:  $(this).val()}, function(j){ 

        var options = '';
        if(j.length > 1 )
        {
            for (var i = 0; i < j.length; i++) {
                options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
            }
            if($('#subcauses').hide())
                {
                    $('#subcauses').show();
                }
                $('#subcauses').attr('disabled', false);
            $("#subcauses").html("");
            $("#subcauses").html(options);
         }
        else
            {
                $('#subcauses')
                    .find('option')
                    .remove()
                    .end();
                 $('#subcauses').attr('disabled', true);
            }
        }); 
```

# asp.net - 设置日期时间的图表轴最小值和最大值

> ID：11237902
> 
> 赞同：4
> 
> 时间：2012-06-28T04:03:59.107
> 
> 标签：asp.net, charts

我需要调整 ASP.NET 图表的 X 轴的最小值和最大值。轴表示日期时间值。这些属性是双打的，另一个网站上的人建议使用 .ToOADate() 来转换日期：

```
DateChart.ChartAreas[0].AxisX.Maximum = minDate.ToOADate(); 
```

但是，这样做会引发 ArgumentException（“不是合法的 OleAut 日期。”）。还有另一种方法可以设置这些值吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:24:08.413

事实证明，上面的代码是正确的。该异常是由页面上未正确配置的不同图表引发的。

# erlang - erl_tar 无法提取使用 make_tar 制作的文件

> ID：11237904
> 
> 赞同：1
> 
> 时间：2012-06-28T04:04:02.360
> 
> 标签：erlang, extract, tar

我正在将发布文件放在一起，这似乎工作正常

```
1> systools:make_tar("rel/project-1.0").
ok 
```

那时，我得到了预期的文件`rel/project-1.0.tar.gz`，但是，由于某种原因试图提取它错误

```
2> erl_tar:extract("rel/project-1.0.tar.gz").
{error,bad_header} 
```

尝试使用`tar`from shell 或等效`os:cmd/1`调用提取相同的文件可以正常工作。这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:30:38.167

存档是 gzip 压缩的（注意`.gz`扩展名）。您将需要使用[`extract/2`](http://www.erlang.org/doc/man/erl_tar.html#extract-2)并提供以下`compressed`选项：

```
erl_tar:extract("rel/project-1.0.tar.gz", [compressed]); 
```

# wpf - WPF AutoCompleteBox 弹出高度

> ID：11237911
> 
> 赞同：0
> 
> 时间：2012-06-28T04:04:35.360
> 
> 标签：wpf, autocomplete, wpf-controls, wpftoolkit, autocompletebox

我试图弄清楚如何增加 WPF Toolkit 的 AutoCompleteBox 的弹出高度。现在，只有少数项目适合弹出窗口。我怎样才能让它更高？我看到有一个 MaxPopupHeight 属性。最低身高呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:44:41.937

我不知道这是否正是您想要的，但我发现有用的是为弹出窗口指定一个明确的高度：

```
<tk:AutoCompleteBox ...>
  <tk:AutoCompleteBox.Resources>
     <Style TargetType="{x:Type Popup}">
        <Setter Property="Height" Value="200" />
     </Style>
  </tk:AutoCompleteBox.Resources>
</tk:AutoCompleteBox> 
```

[这也有助于解决一些人遇到](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/b32a9cec-accc-472b-8fcc-1eac77aa3280/)的 Toolkit 的 AutoCompleteBox 忽略 MaxDropDownHeight 的问题。实际上，现在我看到这几乎是对 Zabavsky 提出的解决方案的详细说明。

# sencha-touch-2 - setPressed 的分段按钮值不起作用

> ID：11237914
> 
> 赞同：0
> 
> 时间：2012-06-28T04:04:41.923
> 
> 标签：sencha-touch-2, uisegmentedcontrol

我正在创建一个分段按钮，我需要根据分段按钮的值修改应用程序。

```
{

                    margin : '5 -5 0 25',
                    xtype: 'segmentedbutton',
                    allowMultiple: true,
                    height : 40,
                    id : 'fontStyleBtn',
                    items: [
                            {
                                text: 'B',
                                width : 50,
                                style: 'background-color:red !important',
                                action : 'boldText'
                            },
                        {
                            text: 'I',
                            width : 50,
                            style: 'font-size:14px;font-style:italic;background-color:#008c99',
                            action : 'italicText'
                        },
                        {
                            text: 'U',
                            width : 50,
                            style: 'font-size:14px;background-color:#008c99;text-decoration:underline',
                            action : 'underlineText'
                        }
                    ]} 
```

当我点击 B 时，我的应用程序中的文本变得粗体。但我需要为其设置一个值，以便下次我点击它时，我可以将文本重置为正常。

```
Ext.getCmp('fontStyleBtn').getItems()[0].pressed = true; 
```

这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:52:11.070

`Ext.getCmp('fontStyleBtn').getItems()[0]`确实返回“B”按钮吗？

如果是，请尝试以下操作：

`Ext.getCmp('fontStyleBtn').getItems()[0].setPressed(true);`

# android - android 应用程序需要哪些权限才能使用警报管理器服务？

> ID：11237920
> 
> 赞同：12
> 
> 时间：2012-06-28T04:05:16.010
> 
> 标签：android, permissions, alarm

如果一个android应用想要使用Alarm Manager Service，那么这个应用需要拥有哪些权限呢？

我已经测试过，应用程序似乎不需要任何权限即可使用警报管理器服务。

真的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T04:10:30.817

是的，它是真实的。您不必添加任何特殊服务。请记住，当手机重新启动时，您设置的警报将丢失，因此您可能希望在启动时重新安排它们，这需要`android.permission.RECEIVE_BOOT_COMPLETED`权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-10T10:31:50.477

我不知道为什么没有人提到这个权限

但根据android文档，你应该使用 SET_ALARM 权限

[文档](http://developer.android.com/reference/android/Manifest.permission.html#SET_ALARM)

> 允许应用程序广播一个 Intent 来为用户设置警报。

```
<uses-permission android:name="com.android.alarm.permission.SET_ALARM"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:10:48.350

它每 10 分钟唤醒一次 CPU，直到手机关机。

```
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>

<receiver  android:process=":remote" android:name="Alarm"></receiver> 
```

如果您想在手机启动时设置重复闹钟：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>
...
<receiver android:name=".AutoStart">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"></action>
    </intent-filter>
</receiver> 
```

**有关更多详细信息：** [警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T04:11:16.913

添加到 Manifest.xml：

```
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
...
<receiver  android:process=":remote" android:name="Alarm"></receiver> 
```

代码：

```
 package YourPackage;
    import android.app.AlarmManager;
    import android.app.PendingIntent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.os.PowerManager;

public class Alarm extends BroadcastReceiver 
    {    
         @Override
         public void onReceive(Context context, Intent intent) 
         {   
             PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
             PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "YOUR TAG");
             wl.acquire();

             // Put here YOUR code.
             Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For example

             wl.release();
         }

     public void SetAlarm(Context context)
     {
         AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, Alarm.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * 60 * 10, pi); // Millisec * Second * Minute
     }

     public void CancelAlarm(Context context)
     {
         Intent intent = new Intent(context, Alarm.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
         AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
         alarmManager.cancel(sender);
     }
    } 
```

如果您想在手机启动时设置重复闹钟：

向 Manifest.xml 添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>
    <receiver android:name=".AutoStart">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"></action>
        </intent-filter>
</receiver> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-28T04:42:05.870

想在**克里斯蒂安**所说的内容中添加一些内容

即使您使用`android.permission.RECEIVE_BOOT_COMPLETED`权限，您的应用程序也将在 2.XX 设备上正常运行。

但在 4.x 设备中，除非您手动启动应用程序，否则广泛接收器将无法在启动时工作

# java - 休眠多线程多会话和对象

> ID：11237924
> 
> 赞同：1
> 
> 时间：2012-06-28T04:05:36.250
> 
> 标签：java, multithreading, hibernate, session

关于设置的几个事实：

*   这是一个基于 Tomcat 的应用程序（尽管问题也出现在 Tomcat 的上下文之外 - JUNIT）
*   不使用弹簧
*   每个线程都有自己的 Hibernate `Session`（在 TLS 上）
*   对象以混合方式保存/加载，即`ObjA`可以**由线程 A 创建，**然后**由线程 B 操作**，甚至稍后**由线程 A 更新，**再次**由线程 Z 操作，但这次使用 HQL**！

进行上述设置后，我遇到了错误，例如：

*   `org.hibernate.HibernateException: illegally attempted to associate a proxy with two open Sessions`
*   `org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)`

我的理解是

*   这一切都与 Hibernate 相关`Session`，因为会话“拥有”“附加”到它的对象（它创建/加载的对象）
*   并且可能是缓存问题

问题很明显：

*   我是否理解核心问题（上图）？
*   **如何避免此类问题？**
*   是否有经验法则可以帮助避免这些问题？
*   使用 Spring 会帮助解决它吗（请具体说明一下）？
*   在从数据存储中获取每个对象之后将其从每个对象中分离，并在更新之前`Session`将其附加到稍后将是处理它的理想方式吗？`Session`

如果我只使用一个`Session`对象，我当然可以避免所有这些，但这听起来……阻塞（线程方面）。

我确信这些问题很久以前就已经解决了，只需要找到它（无需重新发明轮子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:19:52.857

该对象附加到 Hibernate 会话，是的。它一次只能附加一个，是的。除非您关闭 Hibernate 会话，否则您可以尝试访问`evict()`该对象，从而将其与会话分离，从而可以将其加载到另一个线程中。问题是，这可能不切实际，具体取决于您的程序流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:55:44.457

`clear()`在获取对象之前调用。

# winapi - 如何使用 VerQueryValue？

> ID：11237928
> 
> 赞同：3
> 
> 时间：2012-06-28T04:06:11.860
> 
> 标签：winapi

我有一个需要从特定 dll 中检索版本信息的 exe（例如：FileDescription）。我的代码已经调用了 GetFileVersionInfoSize 和 GetFileVersionInfo。但我不确定如何应用 VerQueryValue，即使在通过[http://msdn.microsoft.com/en-us/library/ms647464(v=vs.85)](http://msdn.microsoft.com/en-us/library/ms647464(v=vs.85))和其他示例之后也是如此。

有人可以解释/阐明如何应用 VerQueryValue 及其用法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T20:33:52.730

要通过 VerQueryValue 获取 FileDescription，只需复制并粘贴 VerQueryValue 文档中的示例代码，并根据需要进行修改。

该示例代码背后的基本思想是：

*   使用第二种形式 (\VarFileInfo\Translation) 获取翻译列表。
*   然后使用第三种形式 (\StringFileInfo\lang-codepage\string-name) 来获取字符串。

（第一种形式 () 仅用于 VS_FIXEDFILEINFO，即版本号、标志等部分的一组数值）

示例代码获取每种语言的 FileDescription。如果您知道您只有一种语言（例如，因为您正在查看自己的应用程序，并且它没有被翻译），您可以跳过循环并返回第一个。对于更一般的用途，您希望为用户的语言选择最佳匹配并返回该语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-14T20:21:56.763

这是一个工作示例，经过多次尝试和错误。我正在使用 Borland C++，因此可能需要针对不兼容的环境更改次要细节。

```
#include <Windows.h>

std::string GetAppVersion()
{
    DWORD dwHandle;
    TCHAR fileName[MAX_PATH];

    GetModuleFileName(NULL, fileName, MAX_PATH);
    DWORD dwSize = GetFileVersionInfoSize(fileName, &dwHandle );
    TCHAR buffer[dwSize];

    VS_FIXEDFILEINFO* pvFileInfo = NULL;
    UINT fiLen = 0;

    if ((dwSize > 0) && GetFileVersionInfo(fileName, dwHandle, dwSize, &buffer))
    {
        VerQueryValue(&buffer, L"\\", (LPVOID*)&pvFileInfo, &fiLen);
    }

    if (fiLen > 0)
    {
        char buf[25];
        int len = sprintf(buf, "%hu.%hu.%hu.%hu",
            HIWORD(pvFileInfo->dwFileVersionMS),
            LOWORD(pvFileInfo->dwFileVersionMS),
            HIWORD(pvFileInfo->dwFileVersionLS),
            LOWORD(pvFileInfo->dwFileVersionLS)
        );

        return std::string(buf, len);
    }
    else
    {
        return std::string("(Unknown)");
    }
} 
```

# android - 移动网络 - 禁用长按/点击文本选择

> ID：11237936
> 
> 赞同：28
> 
> 时间：2012-06-28T04:07:11.987
> 
> 标签：android, iphone, css, mobile, highlight

我已经看到/听说过所有关于使用 的变体禁用文本选择的信息`user-select`，但是这些都不能解决我遇到的问题。在 Android 上（我猜是在 iPhone 上），如果你点击并按住文本，它会突出显示它并显示一些小标志来拖动和选择文本。我需要禁用那些（见图）：

![截屏](../Images/d067b8250f4db6dc71d2a0f7886df359.png)

我试过`-webkit-touch-callout`无济于事，甚至尝试过无济于事的事情`$('body').on('select',function(e){e.preventDefault();return;});`。而且像这样的廉价技巧`::selection:rgba(0,0,0,0);`也行不通，因为隐藏这些也无济于事——选择仍然会发生，并且会破坏 UI。另外，我猜这些标志仍然存在。

任何想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-28T04:11:14.023

```
-webkit-touch-callout:none;
-webkit-user-select:none;
-khtml-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
-webkit-tap-highlight-color:rgba(0,0,0,0); 
```

这将为每个浏览器禁用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-06T19:12:13.157

**参考：**

[**带有插件的 jsFiddle 演示**](http://jsfiddle.net/ebEqu/)

我制作的上述 jsFiddle Demo 使用插件来允许您***防止***在**Android**或**iOS**设备（以及桌面浏览器）中选择任何文本块。

它很容易使用，这里是安装 jQuery 插件后的示例标记。

**示例 HTML：**

```
<p class="notSelectable">This text is not selectable</p>

<p> This text is selectable</p> 
```

**示例 jQuery：**

```
$(document).ready(function(){

   $('.notSelectable').disableSelection();

}); 
```

**插件代码：**

```
$.fn.extend({
    disableSelection: function() {
        this.each(function() {
            this.onselectstart = function() {
                return false;
            };
            this.unselectable = "on";
            $(this).css('-moz-user-select', 'none');
            $(this).css('-webkit-user-select', 'none');
        });
        return this;
    }
}); 
```

**根据您的留言评论：** *`I still need to be able to trigger events (notably, touchstart, touchmove, and touchend) on the elements.`*

我会简单地使用**不受此插件影响****的包装器**，但使用此插件保护它的文本内容。

 **要允许与文本块中的链接进行交互，您可以使用除链接之外的所有链接并仅为那些`span tags`添加类名，从而保留锚链接的选择和交互。`.notSelected``span tags`

**状态更新：**这个更新[**的 jsFiddle**](http://jsfiddle.net/ebEqu/1/)确认您担心禁用文本选择时其他功能可能无法工作。在这个更新的 jsFiddle 中显示的是 jQuery Click 事件侦听器，它将在单击粗体文本时触发浏览器警报，即使该粗体文本不是文本可选择的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T04:44:17.583

-webkit-用户选择：无；直到 4.1 才支持 Android（对不起）。**

# linux - 从文件加载 linux 屏幕设置

> ID：11237940
> 
> 赞同：1
> 
> 时间：2012-06-28T04:07:53.563
> 
> 标签：linux, gnu-screen

我大量使用 linux screen ，通常如果操作系统没有重新启动或者说只要 SCREEN 进程存在，我就可以重新连接到我的终端。但是我不想每次在我的计算机重新启动后都设置屏幕，这是一项乏味的工作。

所以我通常设置一系列屏幕来运行不同类别的命令
1\. 创建一个窗口，重命名屏幕，运行特定命令
2\. 等等...

有没有办法自动创建这些屏幕设置，比如我可以编写脚本来做到这一点吗？

**编辑**：这里更重要的是如何在创建窗口后将一些命令粘贴到窗口中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T04:24:33.707

是的当然。

您只需要在`~/.screenrc`. 如果要使用多个配置，可以创建多个配置文件并使用`-c`键启动屏幕。

```
screen -c ~/.screenrc1
screen -c ~/.screenrc2
screen -c ~/.screenrc3 
```

示例`~/.screenrc`：

```
screen -t news 8 newsbeuter
screen -t jabber 9 freetalk 
```

这里将打开两个窗口： on 8 -- `newsbeuter`（窗口的名称`news`）；on 9 — `freetalk`（窗口的名称`jabber`）。

# pdf - 关于pdf的交叉引用表的查询

> ID：11237941
> 
> 赞同：-3
> 
> 时间：2012-06-28T04:07:53.797
> 
> 标签：pdf

我对 pdf 的交叉引用表有一些疑问。据我所知，每当我们更改 pdf 中的一些现有对象（例如图像、文本等）然后保存后，就会生成新的交叉引用表。现在我的问题是，对于更新的对象，它可以从新表中访问数据，但对于未更改的对象，它是否会查询上一个外部参照表（它可以从预告片/上一个获得的地址）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:00:17.603

要查找对象，您必须检查所有交叉引用表，从最新开始。请阅读[PDF 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)。

# java - DTO 模式是否已弃用？

> ID：11237946
> 
> 赞同：11
> 
> 时间：2012-06-28T04:08:19.800
> 
> 标签：java, design-patterns, jakarta-ee, application-design

在集群的完整 Java EE 应用程序中，DTO 模式仍然是一个有效的选项吗？有问题的应用程序使用 EJBs Hibernate 和 Struts with Spring 等。在这种情况下传输域对象有什么问题吗？

编辑：只是为了澄清我的问题，随着现代资源和 Java EE 的改进，是否有理由不只使用域对象？如果没有，那么 DTO 模式是否会逐渐淡出，不应该在新应用程序中使用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-28T06:02:10.627

不被弃用。是否应该使用 DTO 模式取决于应用程序架构。例如，当您开发 Web 服务（使用 JAX-WS 或 JAX-RS）时，您应该通过 Web 方法发送 DTO，以便 C# 或 Python 客户端应用程序可以使用它，并且您的 Web 方法不应返回类具有的对象休眠注释，请记住，与其他语言相比，不会使用这些注释或内部其他业务逻辑创建实体。

* * *

编辑（根据您的评论）：这取决于软件架构。例如，我正在处理一个 SOA 项目，我们将 DTO 用于服务层和表示层。更深入地讲，我们甚至使用 DTO 来处理服务内部的数据库通信，我们只使用 SP 与 DB 通信，所以没有 Hibernate 或任何其他 ORM 工具可以在那里工作，我们可以使用[Spring DAO](http://static.springsource.org/spring/docs/2.5.x/reference/jdbc.html)并且该框架也使用 DTO。现在，您可以在许多应用程序中找到很多 DTO 模式。

更多信息对这个问题很有帮助：

*   [DTO、VO、POJO、JavaBeans 的区别？](https://stackoverflow.com/a/1612671/1065197)（基本上，任何 DTO 都是 POJO）。
*   [核心 J2EE 模式 - 传输对象](http://www.oracle.com/technetwork/java/transferobject-139757.html)

编辑 2：另一个信息来源，将解释使用 DTO 设计的主要原因，由[Martin Fowler解释](http://en.wikipedia.org/wiki/Martin_Fowler)

*   [本地DTO](http://martinfowler.com/bliki/LocalDTO.html)

结论：DTO 不是反模式。DTO 仅在您需要将数据从一个子系统传递到另一个子系统并且它们没有默认或标准的通信方式时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T06:58:57.500

它是 Java EE 中非常有用的模式。

我使用 DTO 将相关实体对象从 EJB bean 传输到 UI 层。实体对象**在一个事务**中从 DB 中获取（请参阅[TransactionAttributeType.REQUIRED](http://docs.oracle.com/javaee/6/api/javax/ejb/TransactionAttributeType.html)）并存储在 DTO 对象中。DTO在 UI 层中*使用。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T04:23:54.027

图案是纯粹的设计。模式没有“弃用”，但随着时间的推移（或过度使用）使用量减少。
就个人而言，我不明白为什么不使用 DTO。
例如 - 在[oVirt](http://www.ovirt.org)开源项目中，我们有代表虚拟化领域中业务逻辑实体的实体。
这些实体应该由 Hibernate 注释进行注释（实际上，它们在今天，因为我们开始研究休眠 POC）并用作 DTO，然后从将映射到它们的注释对象中清除（假设使用[推土机](http://dozer.sourceforge.net/documentation/whymap.html)框架）并被客户使用
（我不喜欢客户端代码带有不必要的注释），或者实体应该作为传递给客户端的客户端对象（值对象），我们应该让其他类作为 DTO 实体

上述方法中的减号是您可能有 2 个并行类图——一个用于 DTO，一个用于值对象（由客户使用）——但是，在设计中的许多情况下，需要进行权衡。
您必须了解优缺点并选择最适合您的（在我们的案例中，由于客户端是 GWT，因此我们更容易分离到两个类层次结构，一个是 DTO/服务器端并且可以也可以用更多的服务器端注释进行注释，而其他的发送到 GWT 客户端代码）。

# c++ - findHomography、getPerspectiveTransform 和 getAffineTransform

> ID：11237948
> 
> 赞同：35
> 
> 时间：2012-06-28T04:08:43.887
> 
> 标签：c++, opencv, affinetransform, homography

这个问题是关于 OpenCV 函数的`findHomography`，`getPerspectiveTransform`&`getAffineTransform`

1.  `findHomography`和有什么区别`getPerspectiveTransform`？我从文档中的理解是，`getPerspectiveTransform`使用 4 个对应关系（这是计算单应性/透视变换所需的最小值）`findHomography`计算变换，即使您提供超过 4 个对应关系（大概使用最小二乘法之类的方法？ ）。这个对吗？（在这种情况下，OpenCV 仍然继续支持 getPerspectiveTransform 的唯一原因应该是遗留的？）

2.  我的下一个问题是我想知道是否有`findHomography`计算仿射变换的等价物？即使用最小二乘法或等效稳健方法来计算和仿射变换的函数。根据文档`getAffineTransform`只接受 3 个对应关系（这是计算仿射变换所需的最小值）。

最好的，

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-28T05:58:17.413

**Q #1**：是的，findHomography 试图找到两组点之间的最佳变换。它使用比最小二乘法更智能的东西，称为 RANSAC，它能够拒绝异常值 - 如果至少 50% + 1 的数据点正常，RANSAC 将尽最大努力找到它们，并构建可靠的转换。

getPerspectiveTransform 有很多有用的理由留下来——它是 findHomography 的基础，它在许多只有 4 个点并且你知道它们是正确的点的情况下很有用。findHomography 通常与自动检测到的点集一起使用 - 您可以找到其中的许多点，但置信度较低。当您确定 4 个角时，getPerspectiveTransform 非常好——例如手动标记或自动检测矩形。

**Q #2**仿射变换没有等价物。您可以使用 findHomography，因为仿射变换是单应性的子集。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-28T09:08:03.317

我同意@vasile 所写的一切。我只想补充一些意见：

`getPerspectiveTransform()`并且`getAffineTransform()`旨在分别处理*4*或*3*个点，这些点*已知是正确的对应关系*。在使用真实相机拍摄的真实图像上，您**永远无法**获得如此准确的对应关系，而不是自动或手动标记对应点。

总是有异常值。*只需看一下*想要通过点拟合曲线的简单情况（例如，采用带有噪声的生成方程`y1 = f(x) = 3.12x + gauss_noise`或`y2 = g(x) = 0.1x^2 + 3.1x + gauss_noise`）：在这两种情况下，找到一个好的二次函数来估计点要比一个好的线性函数容易得多. 二次方可能是一种矫枉过正，但在大多数情况下不会（在去除异常值之后），如果你想在那里拟合一条直线，你最好非常确定这是正确的模型，否则你会得到不可用的结果。

也就是说，如果您*非常确定*仿射变换是正确的，这里有一个建议：

*   使用`findHomography`，将*RANSAC*合并到功能中，以消除异常值并获得图像转换的初始估计
*   选择 3 个正确的匹配对应关系（与找到的单应性匹配），或将 3 个点从第一个图像重新投影到第二个（使用单应性）
*   使用这 3 个匹配项（尽可能接近正确）`getAffineTransform()`
*   如果您愿意，可以将所有这些都用您自己的方式包装起来`findAffine()`——瞧！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-17T23:44:08.087

关于 Q#2，estimateRigidTransform 是 getAffineTransform 的过采样等价物。我不知道它第一次发布时是否在 OCV 中，但它在 2.4 中可用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-16T22:55:11.010

找到超定方程组的仿射变换有一个简单的解决方案。

1.  请注意，一般来说，仿射变换通过使用伪逆或类似技术来找到线性方程组 Ax=B 的超定系统的解，因此

**x = (AA ^t ) ^(-1) A ^t B**

此外，这是通过简单调用solve(A, B, X) 在核心openCV 功能中处理的。

2.  熟悉一下 opencv/modules/imgproc/src/imgwarp.cpp 中的仿射变换代码：它实际上只做了两件事：

    一个。重新排列输入以创建系统 Ax=B;

    湾。然后调用solve(A, B, X);

注意：忽略 openCV 代码中的函数注释——它们令人困惑，并且不反映矩阵中元素的实际顺序。如果您正在求解 [u, v]'= Affine * [x, y, 1]，则重排为：

```
 x1 y1 1 0  0  1
         0  0  0 x1 y1 1
         x2 y2 1 0  0  1
    A =  0  0  0 x2 y2 1
         x3 y3 1 0  0  1
         0  0  0 x3 y3 1

    X = [Affine11, Affine12, Affine13, Affine21, Affine22, Affine23]’

         u1 v1
    B =  u2 v2
         u3 v3 
```

您需要做的就是添加更多积分。要使 Solve(A, B, X) 在超定系统上工作，请添加 DECOMP_SVD 参数。要查看有关该主题的 powerpoint 幻灯片，请使用此[链接](http://web4.cs.ucl.ac.uk/staff/s.prince/book/15_Models_For_Transformations.pptx)。如果您想了解更多关于计算机视觉背景下的伪逆，最好的来源是：[ComputerVision](http://web4.cs.ucl.ac.uk/staff/s.prince/book/book.pdf)，参见第 15 章和附录 C。

如果您仍然不确定如何添加更多积分，请参阅下面的代码：

```
// extension for n points;
cv::Mat getAffineTransformOverdetermined( const Point2f src[], const Point2f dst[], int n )
{
    Mat M(2, 3, CV_64F), X(6, 1, CV_64F, M.data); // output
    double* a = (double*)malloc(12*n*sizeof(double));
    double* b = (double*)malloc(2*n*sizeof(double));
    Mat A(2*n, 6, CV_64F, a), B(2*n, 1, CV_64F, b); // input

    for( int i = 0; i < n; i++ )
    {
        int j = i*12;   // 2 equations (in x, y) with 6 members: skip 12 elements
        int k = i*12+6; // second equation: skip extra 6 elements
        a[j] = a[k+3] = src[i].x;
        a[j+1] = a[k+4] = src[i].y;
        a[j+2] = a[k+5] = 1;
        a[j+3] = a[j+4] = a[j+5] = 0;
        a[k] = a[k+1] = a[k+2] = 0;
        b[i*2] = dst[i].x;
        b[i*2+1] = dst[i].y;
    }

    solve( A, B, X, DECOMP_SVD );
    delete a;
    delete b;
    return M;
}

// call original transform
vector<Point2f> src(3);
vector<Point2f> dst(3);
src[0] = Point2f(0.0, 0.0);src[1] = Point2f(1.0, 0.0);src[2] = Point2f(0.0, 1.0);
dst[0] = Point2f(0.0, 0.0);dst[1] = Point2f(1.0, 0.0);dst[2] = Point2f(0.0, 1.0);
Mat M = getAffineTransform(Mat(src), Mat(dst));
cout<<M<<endl;
// call new transform
src.resize(4); src[3] = Point2f(22, 2);
dst.resize(4); dst[3] = Point2f(22, 2);
Mat M2 = getAffineTransformOverdetermined(src.data(), dst.data(), src.size());
cout<<M2<<endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-15T09:24:37.350

getAffineTransform：仿射变换是平移、缩放、剪切和旋转的组合 [https://www.mathworks.com/discovery/affine-transformation.html](https://www.mathworks.com/discovery/affine-transformation.html) [https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm](https://www.tutorialspoint.com/computer_graphics/2d_transformation.htm)

getPerspectiveTransform：透视变换是项目映射 [在此处输入图像描述](https://i.stack.imgur.com/268uP.png)

# spring - 用户未登录时如何实现，服务器应重定向到Spring中的登录页面

> ID：11237967
> 
> 赞同：0
> 
> 时间：2012-06-28T04:10:53.190
> 
> 标签：spring

我是 Spring3 MVC 的新手，我正在使用它开发一个 Web 项目，我已经实现了登录和注销。我在用户登录时将用户信息放入会话中，并在他注销时将其删除。

现在我想实现：

如果用户登录，那么他可以做任何事情，但是如果他注销并访问服务器中的页面，我们应该重定向到登录页面。

我认为它可能在 web.xml 中使用了过滤器和一些配置，所以我不需要写太多代码。我认为使用配置很容易，但我不知道如何实现它。

那么我应该如何以及应该配置什么？有点像这个问题：[寻找一个简单的 Spring 安全示例](https://stackoverflow.com/questions/4899518/looking-for-a-simple-spring-security-example)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T18:49:57.557

使用 -
返回“重定向：登录页面”；

# linux - Linux 模块文件丢失

> ID：11237970
> 
> 赞同：1
> 
> 时间：2012-06-28T04:11:21.520
> 
> 标签：linux, kernel-module, parallel-port

实际上我是一个初学者，我正在尝试学习低级驱动程序和高级驱动程序的概念。我想知道一个模块是如何依赖其他模块来运行的。

我已经完成了`lsmod`命令。我在输出中找到了这些行。

```
parport_pc             25962  1 
lp                      7028  0 
parport                32635  3 ppdev,parport_pc,lp 
```

从以上几行，我了解到存在这样的模块，

> *   parport_pc
> *   LP
> *   看台

我在目录中找到了源代码`parport_pc.c`, 。但是我在整个文件系统中找不到源代码。尽管我在里面找到了。同样在目录中，我在 Makefile 中看到了一行，例如，`lp.c``/usr/src/drivers/parport``parport``parpot.ko``/lib/modules/linux2.6.32-37-generic/kernel/parport``/usr/src/drivers/parport`

```
obj-$(CONFIG_PARPORT)       += parport.o 
```

那么我在哪里可以找到该`parport.c`文件？我已经使用命令搜索了整个文件系统

```
find / -name parport.c 
```

但没有结果。为什么文件`parport.c`丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:23:14.573

该`parport.o`文件由多个`.c`文件编译而成，包括`share.c`、`ieee1284.c`、`ieee1284_ops.c`和`procfs.c`，可能还包括`daisy.c`和`probe.c`，所有`drivers/parport/`文件都位于 Linux 源代码的目录下。（此信息取自 Linux 3.5-rc3-00203-g8874e81，它比您正在查看的内核要新一些，但并行端口驱动程序不再有太大变化）。

为了找到此信息，我查看了相同的信息`Makefile`并注意到该`parport-objs`变量最初设置为，如果设置为`share.o ieee1284.o ieee1284_ops.o procfs.o`，则添加。`daisy.o probe.o``CONFIG_PARPORT_1284``y`

# android - 如何观察 contentprovider 变化？安卓

> ID：11237971
> 
> 赞同：18
> 
> 时间：2012-06-28T04:11:33.090
> 
> 标签：android, android-contentprovider, android-appwidget, notify

我创建了一个 Contentprovide 并实现了它的 update() 方法，如下所示：

```
@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    final SQLiteDatabase db = mHelper.getWritableDatabase();
    int count = db.update(InslideDB.FOLDER_TABLE, values, selection, selectionArgs);

    /* To notify the observer */
    this.getContext().getContentResolver().notifyChange(URI, null);  
    return count;
} 
```

如何在我的 appwidget 中获得通知？谢谢！

我正在尝试这个解析器，但没有日志（--------日期更改）打印：

```
class DataProviderObserver extends ContentObserver {
    private AppWidgetManager mAppWidgetManager;
    private ComponentName mComponentName;

    DataProviderObserver(AppWidgetManager mgr, ComponentName cn, Handler h) {
        super(h);
        mAppWidgetManager = mgr;
        mComponentName = cn;
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);  //NOTE: Have to call this. dwy.

        // The data has changed, so notify the widget that the collection view needs to be updated.
        // In response, the factory's onDataSetChanged() will be called which will requery the
        // cursor for the new data.

        Log.d("PresenterWidgetProvider", "--------------------Date Changed");

        mAppWidgetManager.notifyAppWidgetViewDataChanged(
                mAppWidgetManager.getAppWidgetIds(mComponentName), R.id.inslide_grid);
    }
}

public class PresenterWidgetProvider extends AppWidgetProvider{

    private static final String AUTHORITY = "com.apps.slide";

    static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/folder");

    public static final String EXTRA_INSLIDE_PATH = "EXTRA_WIDGET_PATH";
    private static HandlerThread sWorkerThread;
    private static Handler sWorkerQueue;
    private static DataProviderObserver sDataObserver;

    public PresenterWidgetProvider () {

        // Start the worker thread to update Content Provider.
        sWorkerThread = new HandlerThread("PresenterWidgetProvider worker");
        sWorkerThread.start();
        sWorkerQueue = new Handler(sWorkerThread.getLooper());

    }

    @Override
    public void onEnabled(Context context) {
        // Register for external updates to the data to trigger an update of the widget.  When using
        // content providers, the data is often updated via a background service, or in response to
        // user interaction in the main app.  To ensure that the widget always reflects the current
        // state of the data, we must listen for changes and update ourselves accordingly.
        final ContentResolver r = context.getContentResolver();
        if (sDataObserver == null) {
            final AppWidgetManager mgr = AppWidgetManager.getInstance(context);
            final ComponentName cn = new ComponentName(context, PresenterWidgetProvider.class);
            sDataObserver = new DataProviderObserver(mgr, cn, sWorkerQueue);
            r.registerContentObserver(CONTENT_URI, true, sDataObserver);
            Log.d("PresenterWidgetProvider", "--------------------onEnabled. sDataObserver = " + sDataObserver);
        }
    } 
```

所以，我终于通过4个步骤解决了它：

1.  添加 `this.getContext().getContentResolver().notifyChange(URI, null);`

到 ContentProvider 的 updat() insert() delete() 回调。

2.  创建一个新的观察者和新的线程来处理它。

3.  在 Observer 的 onChange() 中调用 notifyAppWidgetViewDataChanged()。

4.  删除小部件并放置一个新的。

就是这样。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T04:16:45.057

你可以使用[`ContentObserver`](http://developer.android.com/reference/android/database/ContentObserver.html)类。您只需要实现该类并使用该`getContentResolver().registerContentObserver()`方法来注册观察者。

# model-view-controller - Extjs 中的多个视口

> ID：11237972
> 
> 赞同：0
> 
> 时间：2012-06-28T04:11:36.963
> 
> 标签：model-view-controller, extjs, viewport

我有 100 个不同的 url，每个都指向纯 html 页面，我必须将这些纯 html 页面转换为 extjs 页面。所有页面的页脚和页眉都相同，但不同的纯 html 页面的中心部分不同。为了利用最大的代码，我想创建一个 EXTJS4.1.0 应用程序，它具有模型、视图、存储和控制器，但单独的 index.html、app.js 和 viewport.js。分开 index.html、app.js 和 viewport.js 的原因是，如果我不保留单个 index.html、app.js 和 viewport.js，那么我将无法为页面添加书签（因为用户和使用100 个不同页面的 100 个不同 url）所以基本上我将有 100 个不同的 app.js 和相应的 viewport.js（viewport.js）。

我的第一个问题是，我刚才提到的解决方案是正确的解决方案。

如果使用 autoCreateViewport: true，那么在 Extjs MVC 模式中，每个应用程序只能有一个 Viewport.js 文件是真的吗？

其次，如果您在 Ext.Application （在 app.js 中）使用 autoCreateViewport: false 并在启动方法中创建不同 Viweport 的实例，如下所示：

```
Ext.application({
    name: 'Panda',
    autoCreateViewport: false,
    launch: function() {
        Ext.create('Panda.viewport.ViewportOne')
    }
}); 
```

请注意，我创建了 ViewportOne 的实例，它是 100 个视口之一。使用此解决方案，我在运行应用程序时也遇到了故障（某些导航不起作用等）。是不是因为 extjs 不允许使用名称为 Panda.viewport.ViewportOne、Panda.viewport.ViewportTwo 等的视口？

如何在 Extjs 中创建带有书签页面的完全 MVC 风格的应用程序，这样每个页面都是同一个 extjs 应用程序的一部分（即它利用相同的模型视图、存储、控制器和动态加载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:08:30.707

我工作的公司有很多客户正在使用基于纯 html 和 javascript 构建的应用程序。每个用户只在该应用程序的一个页面上工作，他已在浏览器上添加了书签。我的任务是将那些普通的 html/javascript 页面升级到 Extjs 页面，这样用户就不必更新他们的书签了。

最后，我正在考虑在 Extjs 4.1.0 中创建单个应用程序，如果每个页面可以使用通用模型/视图/存储和控制器，它将有 100 个页面（index.html、indexOne.html 等用户将添加书签）。

所以基本上我的应用程序入口点会有所不同，但所有页面都将使用相同的模型/视图/存储/控制器。它更多的是一个架构问题。

希望这有帮助。

# c# - 生成决策树的库

> ID：11237975
> 
> 赞同：12
> 
> 时间：2012-06-28T04:12:23.277
> 
> 标签：c#, decision-tree

是否有 C# 库可以从数据表生成决策树，然后使用它来预测丢失的数据？

我做了一些研究，但没有找到任何可以从一组数据生成决策树的 C# 库。

任何帮助是极大的赞赏

编辑：更多详细说明：

假设我有一个包含姓名、年龄、薪水、婚姻状况、工作和投票（他们将在选举中投票给谁）的人的数据集。

我想使用这些数据来构建决策树。

然后我有另一个人的数据集，但没有“投票”列。我需要使用生成的决策树来预测这些人的投票。

决策树应该像对一个人的所有变量进行一系列测试以获得最终预测

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-30T18:37:09.717

你看过[Accord.NET 框架](http://accord-framework.net)吗？这里有更多信息：[C# 中的决策树](http://crsouza.com/2012/01/decision-trees-in-c/)

# iphone - 应用内购买和应用拒绝 iOS

> ID：11237977
> 
> 赞同：2
> 
> 时间：2012-06-28T04:12:32.147
> 
> 标签：iphone, ios, in-app-purchase

我是 iOS 应用内购买功能的新手。

我正在开发一个 iOS 应用程序，我将在其中展示我的产品及其价格，当用户想要购买产品时，他可以通过点击购物车来购买，这将启动一个网络视图并显示我的移动网页，他们可以从中购买所选产品。我的产品是有形的，将在应用程序之外交付。

我的问题是：

1.  即使用户交易是在我的移动网页中完成的，我是否需要实施应用内购买？

2.  如果我必须执行Apple In-App purchase，我如何知道用户是否购买了该产品，从而通知Apple已经购买了产品？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T04:22:38.897

这实际上取决于您销售的产品类型。如果是实实在在的好东西。即机票，或其他一些实物。您可以使用自己的付款机制。如果它可以在应用程序中使用，或者可以通过 Apple 的 IAP 机制交付，那么您必须使用 IAP。如果你不这样做，你很可能会被拒绝。

回答你的问题。1) 如果交易是通过网络完成的，并且是如上所述的非 IAP 类型的项目，那么您不能使用 IAP。2) 如果你确实有可以通过 IAP 购买的东西，Apple 负责交易，他们通常会从顶部收取 30% 的折扣。

查看[审查指南的第 11 节（特别是 11.2 和 11.3）](https://developer.apple.com/app-store/review/guidelines/#purchasing-currencies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:26:43.200

Apple 不允许您指导消费者在应用程序内购买东西。除非是应用内购买。

我们解决这个问题的方法。就是让用户请求有关它的信息。或签署发票。这将被发送到他们的电子邮件地址。他们可以在应用程序之外继续购买。

Apple 已经慷慨地接受了我们的应用程序的这个功能。

如果您希望他们在应用程序中提供信用卡号，那么您将需要使用应用程序内购买。

解决此问题的另一种方法可能是让他们在您的网站上注册并添加一张信用卡供他们购买。并在用户购买东西时使用该购买方法。

我认为不要求他们在应用程序上输入信用卡是主要问题。

# c - 使用整数比较区间

> ID：11237978
> 
> 赞同：2
> 
> 时间：2012-06-28T04:12:53.450
> 
> 标签：c, math, integer, rational-number, fractions

首先，我知道有许多不同的更简单/可靠的方法来执行我要问的问题，但这不是我问题的重点。

我试图比较两组整数，就好像它们是分数一样。我的意思是假设我有一个二维数组：

```
int array[2][2];

array[0][0] = 2;
array[0][1] = 3;
array[1][0] = 1;
array[1][1] = 50; 
```

我想如何处理这些数字是：

array[0][0] = 2 <--- 是分子

array[0][1] = 3 <--- 是分母

或者在这种情况下只有 2/3。然后我想做的是比较这两个分数；

```
if(2/3 < 1/50){
  //blah blah blah code here
} 
```

这里需要注意的是，我无法将数字转换为浮点数以保持其准确性或创建临时浮点占位符。有没有办法只使用整数值来比较这些？

我也不确切知道我应该为这个问题标记什么，如果你想到什么让我知道，我会标记它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T04:16:26.687

将两个分子乘以彼此的分母

IE

2/3 vs 1/50：将 50 和 1 乘以 3，然后将 2 和 3 乘以 50。

然后您可以比较分子而无需转换为浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:19:05.550

```
if(array[0][0]*array[1][1])<array[0][1]*array[1][0])
{
    // your code here

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:20:46.960

最直接的方法是找到最小公倍数，然后转换分子。之后，您可以将分子作为整数进行比较。

即2*50 = 100；1 * 3 = 3；==> 100 > 3

# extjs - ext js 手风琴

> ID：11237979
> 
> 赞同：0
> 
> 时间：2012-06-28T04:13:04.977
> 
> 标签：extjs, accordion

[http://www.myethiopia.org/QuickLinks/accordion.html](http://www.myethiopia.org/QuickLinks/accordion.html) 请在 IE 中查看此链接。我没有时间弄清楚为什么它在 Firefox 中不起作用。我正在尝试单击左栏中的链接并在中间打开页面。如果您单击气象站和奥罗米亚站，标题打开正常，但链接甚至没有打开。var menu1 下的第 325 行，查看代码的第一项。我究竟做错了什么？
第二个问题。我想在 Oromiya 站的左边有一个圆形的公告或轮廓类型的东西（不知道该怎么称呼它）。我怎样才能做到这一点？
复选框不是我要找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:47:52.190

如果要更新中心面板 html，可以使用 update() 函数。

在这个小例子中，我向中心面板添加了一个“id”，然后在菜单项的处理函数中使用此代码显示更新。

```
var centerRegion = Ext.getCmp('centerpanel');                             
centerRegion.update('<iframe src="http://www.myethiopia.org/QuickLinks/Weather/EthiopiaWeatherStations/Amharastations.html" style="width:100%;height:100%"></iframe>'); 
```

我不确定您要做什么，但看起来您想将网格加载到中心面板中，您可以直接执行此操作，而无需加载单独的 html 页面。

# php - 会话值不起作用

> ID：11237980
> 
> 赞同：0
> 
> 时间：2012-06-28T04:13:06.960
> 
> 标签：php, forms, post, submit

我试图制作一个将操作设置为服务器 php self 的单页脚本，但是即使在我输入正确的密码后运行脚本时，我也会得到“您必须提供密码”。我这样做对吗。请让我知道我的错误

登录.php

```
 <?php
        $pass = 'defense6';

        if(isset($_POST['submit'])){

            if(($_POST['password'] == $pass)) {    
                   $_SESSION['password'] = md5($_POST['password']);
                   header('Location: index.php');
            } else {
                echo 'Password Invalid';
            }

        }
        else {
            echo 'You must supply a password.'.$_SESSION['password'] ;
        }
        ?>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">  
Password: &nbsp;<input name="password" type="password" /><br/><br/>
:
<input type="submit" name="submit" value="Login" style="float:right;" />

<br/>
  <p></p>
</form> 
```

索引.php

```
<?php
$pass = 'defense6';
 if($_SESSION['password'] == md5($pass)) {}
else {header('Location: login.php');}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:15:48.580

您需要`seesion_start()`在使用会话的每个页面上添加。

[`session_start()`](http://php.net/manual/en/function.session-start.php)根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:18:08.547

在页面的开头添加[session_start()](http://php.net/manual/en/function.session-start.php)，这将有助于跨请求维护会话。

# objective-c - 下载 Tapku 库需要支付 github 帐户的费用吗？

> ID：11237988
> 
> 赞同：1
> 
> 时间：2012-06-28T04:15:28.407
> 
> 标签：objective-c, xcode, github, tapku

我的 iOS 应用程序需要一个好看的日历，我听说 Tapku 是最好的选择。但是，看起来我必须为一个 github 帐户付费才能加载 Tapku 库。

另外，如果我不需要支付任何费用，那么我该如何下载它并将其放入我的 xcode 项目中。

**我实际上已经看到了下载库的说明，但它们对我来说毫无意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:23:46.390

除非您想托管私有 git 存储库，否则 Github 帐户是免费的。但是您不需要 github 帐户`clone`或下载公共 github 存储库。只需单击“zip”链接下载 zip 或使用 git 克隆存储库，如下所示：

```
git clone https://github.com/devinross/tapkulibrary.git 
```

（您需要安装 git 才能从命令行使用 git）。

# iphone - 应用程序在未通过 Xcode 连接时崩溃

> ID：11237989
> 
> 赞同：1
> 
> 时间：2012-06-28T04:15:38.443
> 
> 标签：iphone, ios, xcode, crash-reports

我对 iOS App 有奇怪的行为。我的应用程序仅在未通过 XCode 连接时才会崩溃。此外，它仅在从后台到前台后才会崩溃。我刚刚浏览了崩溃日志，许多链接都建议这样做。

我现在无法找出崩溃日志的内容。

```
Jun  1 09:22:28 unknown SpringBoard[15] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0

Jun  1 09:22:28 unknown SpringBoard[15] <Notice>: MultitouchHID: detection mode: 0->255

Jun  1 09:22:28 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 1

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000070.133242]: AppleDPDisplay::setLCDStateGated:(0x81b4a000) Disabling

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000000.000163]: AppleDPDisplay::terminateLink:(0x81b4a000) Waited 0 ms for display to disable

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000000.000020]: AppleDPDisplay::terminateLink:(0x81b4a000) ret=0x00000000

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000000.000703]: AppleDPDisplay::deviceTerminated:(0x81b4a000) device=0xb4fcd300

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000000.000099]: AppleDPDisplay::setPower:(0x81b4a000) enable=0 ret=0x00000000

Jun  1 09:22:28 unknown kernel[0] <Debug>: [000000.000020]: AppleDPDisplay::setLCDStateGated:(0x81b4a000) enable=0 ret=0x00000000

Jun  1 09:22:29 unknown SpringBoard[15] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=1

Jun  1 09:22:29 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 0

Jun  1 09:22:29 unknown SpringBoard[15] <Notice>: MultitouchHID: detection mode: 255->0 (deferring until bootloaded)

Jun  1 09:22:29 unknown SpringBoard[15] <Notice>: MultitouchHID: device bootloaded

Jun  1 09:22:29 unknown SpringBoard[15] <Notice>: MultitouchHID: detection mode: 0->0

Jun  1 09:22:29 unknown kernel[0] <Debug>: set_crc_notification_state 0

Jun  1 09:22:29 unknown kernel[0] <Debug>: [000001.383400]: AppleDPDisplay::setLCDStateGated:(0x81b4a000) Enabling

Jun  1 09:22:29 unknown kernel[0] <Debug>: [000000.001806]: AppleDPDisplay::setPower:(0x81b4a000) setting bl deadline for 193 ms from now

Jun  1 09:22:29 unknown kernel[0] <Debug>: [000000.000027]: AppleDPDisplay::setPower:(0x81b4a000) enable=1 ret=0x00000000

Jun  1 09:22:29 unknown kernel[0] <Debug>: [000000.000018]: AppleDPDisplay::setLCDStateGated:(0x81b4a000) enable=1 ret=0x00000000

Jun  1 09:22:30 unknown kernel[0] <Debug>: [000000.052701]: AppleDPDisplay::devicePublished:(0x81b4a000) newDevice=0x8d3ee000

Jun  1 09:22:30 unknown kernel[0] <Debug>: [000000.023734]: AppleDPDisplay::trainLink:(0x81b4a000) Waited 23 ms for link training

Jun  1 09:22:30 unknown kernel[0] <Debug>: [000000.000174]: AppleDPDisplay::initiateLink:(0x81b4a000) Waited 78 ms for display to enable

Jun  1 09:22:30 unknown kernel[0] <Debug>: [000000.000020]: AppleDPDisplay::initiateLink:(0x81b4a000) _dpDevice=0x8d3ee000 ret=0x00000000

Jun  1 09:22:37 unknown ReportCrash[9152] <Notice>: Formulating crash report for process XYZ[9143]

Jun  1 09:22:37 unknown ReportCrash[9152] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/XYZ_2012-06-01-092237_The-new-iPad.plist using uid: 
0 gid: 0, synthetic_euid: 501 egid: 0

Jun  1 09:22:37 unknown com.apple.launchd[1] <Warning>: 
(UIKitApplication:com.company.test[0xe951]) Job appears to have crashed: Segmentation fault: 11

Jun  1 09:22:37 unknown SpringBoard[15] <Warning>: Application 'XYZ' exited abnormally with signal 11: Segmentation fault: 11 
```

任何人都可以在这里阅读并提示我一些解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:41:13.933

尝试添加一个 NSZombieEnabled。为此：

1) 按 cmd + Shift + ,

2）在左侧面板中单击“运行{应用程序名称}”

3）在右边选择诊断“

4）在“启用僵尸对象”处设置复选框

5）重试崩溃，然后你可以用XCode调试错误

# java - 使用 Servlet 3.0 上传文件时 request.getParameter() 是否仍然有效？

> ID：11237994
> 
> 赞同：3
> 
> 时间：2012-06-28T04:16:18.843
> 
> 标签：java, jsp, tomcat, servlets, file-upload

我刚刚从 BalusC 阅读了这个关于如何使用 3.0 Servlet API 上传文件的[好答案。](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

我的问题是关于`request.getParameter()`for common 字段的使用。例如，如果我的表单如下所示：

```
<form action="/upload" method="post" enctype="multipart/form-data">
    <fieldset>
        <label for="description">File description:</label>
        <input type="text" id="description" name="description" value="" />

        <label for="uploadedFile">File:</label>
        <input type="file" id="uploadedFile" name="uploadedFile" />

        <input type="submit" value="Send" />              
    </fieldset>
</form> 
```

按照 BalusC 的解释，我应该操作返回的 InputStream`part.getInputStream()`以获取**描述**字段的内容。这是为什么 ？我试着简单地打电话`request.getParameter("description")`，它似乎工作正常。

我使用 Tomcat 7.0.20。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T04:18:42.867

> *我试图简单地调用 request.getParameter("description")，它似乎工作正常。*

事实上，这在 Servlet 3.0 规范中是这样指定的，但直到最近它才在 Glassfish 的早期版本中起作用，即使它是参考实现。这已报告为[Glassfish 问题 16740](http://java.net/jira/browse/GLASSFISH-16740)，并已在 3.1.2 中修复，比第一个 3.0 版本晚了 2 年多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T04:51:12.313

它从 Servlet 3.0 本身就可用。所有 Servlet 3.0 容器都应该通过`HttpServletRequest.getParameter()`.

这是[Servlet 3.0 规范](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)在第 23 页所说的：

> ## 3.2 文件上传
> 
> ...
> 
> 对于带有`form-data`as `Content-Disposition`，但没有文件名的部件，部件的字符串值也可以通过 `getParameter`/ `getParameterValues`方法`HttpServletRequest`使用部件的名称。

# android - 如何根据对象的另一个值获取特定的 JSON 对象？

> ID：11237997
> 
> 赞同：2
> 
> 时间：2012-06-28T04:16:35.443
> 
> 标签：android, json, object

我有这样的json数组：

```
{"GetReportResult":
  [
   {"bulan":"4","total":"2448","type":"CHEESE1K","uang":"8847823"}, 
   {"bulan":"4","total":"572476","type":"ESL","uang":"5863408410"},
   {"bulan":"4","total":"46008","type":"ESL500ML","uang":"234498301"},
   {"bulan":"5","total":"5703","type":"CHEESE1K","uang":"134929306"},
   {"bulan":"5","total":"648663","type":"ESL","uang":"6645764498"},
   {"bulan":"5","total":"51958","type":"WHP","uang":"631994613"},
   {"bulan":"6","total":"6190","type":"CHEESE1K","uang":"104527773"},
   {"bulan":"6","total":"443335","type":"ESL","uang":"4540123082"},
   {"bulan":"6","total":"30550","type":"ESL500ML","uang":"148302378"},
  ]
} 
```

这是我想要获取某个对象的代码：

```
JSONArray  weeklyflash = json.getJSONArray("GetReportResult");
JSONObject e = weeklyflash.getJSONObject(i);     
String bulan = e.getString("bulan");

if (bulan == 6){
     map.put("total1", e.getString("total")); // I want the "total" values are from specified bulan (e.g. bulan == 6)
}
else if (bulan == 5){
     map.put("total2", e.getString("total")); // I want the "total" values are from specified bulan (e.g. bulan == 5)
}
else if (bulan == 4){
      map.put("total3", e.getString("total")); // I want the "total" values are from specified bulan (e.g. bulan == 4)
} 
```

我得到的是这样的：

```
 total1  |   total2   |  total3
----------------------------------
  2448    |   2448     |  2448
  572476  |   572476   |  572476
  46008   |   46008    |  46008 
```

我想获取来自指定对象值的值（例如，我想从`"total"`where `"bulan"`= 5 获取所有值）。怎么做？我想要的是这样的：

```
 total1  |   total2   |  total3
----------------------------------
  6190    |   5703     |  2448
  443335  |   648663   |  572476
  30550   |   51958    |  46008 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:13:32.187

干得好

```
try {
    ArrayList < String > listBulan4 = new ArrayList < String > ();
    ArrayList < String > listBulan5 = new ArrayList < String > ();
    ArrayList < String > listBulan6 = new ArrayList < String > ();

    JSONObject jsonObject = new JSONObject("jsonString");

    JSONArray array = jsonObject.getJSONArray("GetReportResult");

    for (int i = 0; i < array.length(); i++) {
        JSONObject object = array.getJSONObject(i);

        int bulanValue = Integer.parseInt(object.getString("bulan"));

        switch (bulanValue) {
        case 4:
            listBulan4.add(object.getString("total"));
            break;
        case 5:
            listBulan5.add(object.getString("total"));
            break;
        case 6:
            listBulan6.add(object.getString("total"));
            break;
        }
    }

    Map < String, ArrayList < String >> map = new HashMap < String, ArrayList < String >> ();
    map.put("total1", listBulan6);
    map.put("total2", listBulan5);
    map.put("total3", listBulan4);

} catch (Exception e) {} 
```

下面是代码。

```
package org.sample;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SOActivity extends Activity {

    String string = "{\"GetReportResult\":[{\"bulan\":\"4\",\"total\":\"2448\",\"type\":\"CHEESE1K\",\"uang\":\"8847823\"},{\"bulan\":\"4\",\"total\":\"572476\",\"type\":\"ESL\",\"uang\":\"5863408410\"},{\"bulan\":\"4\",\"total\":\"46008\",\"type\":\"ESL500ML\",\"uang\":\"234498301\"},{\"bulan\":\"5\",\"total\":\"5703\",\"type\":\"CHEESE1K\",\"uang\":\"134929306\"},{\"bulan\":\"5\",\"total\":\"648663\",\"type\":\"ESL\",\"uang\":\"6645764498\"},{\"bulan\":\"5\",\"total\":\"51958\",\"type\":\"WHP\",\"uang\":\"631994613\"},{\"bulan\":\"6\",\"total\":\"6190\",\"type\":\"CHEESE1K\",\"uang\":\"104527773\"},{\"bulan\":\"6\",\"total\":\"443335\",\"type\":\"ESL\",\"uang\":\"4540123082\"},{\"bulan\":\"6\",\"total\":\"30550\",\"type\":\"ESL500ML\",\"uang\":\"148302378\"}]}";
    Map < String, ArrayList < String >> map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);
        map = new HashMap < String, ArrayList < String >> ();
        try {
            ArrayList < String > listBulan4 = new ArrayList < String > ();
            ArrayList < String > listBulan5 = new ArrayList < String > ();
            ArrayList < String > listBulan6 = new ArrayList < String > ();

            JSONObject jsonObject = new JSONObject(string);

            JSONArray array = jsonObject.getJSONArray("GetReportResult");

            for (int i = 0; i < array.length(); i++) {
                JSONObject object = array.getJSONObject(i);

                int bulanValue = Integer.parseInt(object.getString("bulan"));

                switch (bulanValue) {
                case 4:
                    listBulan4.add(object.getString("total"));
                    break;
                case 5:
                    listBulan5.add(object.getString("total"));
                    break;
                case 6:
                    listBulan6.add(object.getString("total"));
                    break;
                }
            }

            map.put("total1", listBulan6);
            map.put("total2", listBulan5);
            map.put("total3", listBulan4);

        } catch (Exception e) {
            e.printStackTrace();
        }

        Log.i("test", map.toString());

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:20:41.257

使用地图。

Map 中的键是您想要总计的 Bulan 值。

迭代数组并更新相关bulan值的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T04:21:53.643

我认为这条线有问题

不蓝==6

试试这个方法...

bulan.equals("6")

我认为它对你有帮助。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T08:24:28.917

您的代码似乎正确。

哈希映射不允许重复键。在这里您尝试放置重复键。

所以尝试`ArrayList`

像这样的事情：

```
ArrayList < String > listBulan4 = new ArrayList < String > ();
  listBulan4.add(object.getString("total")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T05:00:22.877

你的代码对我来说看起来不错。你试一试

```
 if (bulan.equals("6")){
  map.put("total1", e.getString("total")); // I want the "total" values are from       specified bulan (e.g. bulan == 6)
}
else if (bulan.equals("5")){
     map.put("total2", e.getString("total")); // I want the "total" values are from specified bulan (e.g. bulan == 5)
 }
  else if (bulan.equals("4")){
     map.put("total3", e.getString("total")); // I want the "total" values are from specified bulan (e.g. bulan == 4)
} 
```

# android - Google 插件不适用于 App Engine 项目 - Eclipse Indigo - WindowsXP

> ID：11237999
> 
> 赞同：10
> 
> 时间：2012-06-28T04:16:37.320
> 
> 标签：android, eclipse, google-app-engine

我正在尝试浏览[云同步教程，](http://developer.android.com/training/cloudsync/aesync.html)但由于某种原因，它没有将 Android 正确导入到项目中。我今天再次尝试查看该问题，我注意到 Google 和 Android 插件有更新。我升级了，现在当我尝试加载 App Engine 连接到 Android 项目向导时，我看到以下错误：

```
无法启动选定的向导。
插件“com.google.gdt.eclipse.mobile.android”无法实例化类
“com.google.gdt.eclipse.mobile.android.wizards.NewAndroidCloudProjectWizard”。
com/android/io/StreamException

```

这是最新的 Google 插件的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:20:24.510

我认为每个使用最新 GAE 插件的人都有同样的问题。如果你看一下[这个](https://stackoverflow.com/questions/11276518/app-engine-connected-android-project-not-available/11382135#11382135)线程，我认为这是同一个问题。

长话短说，最新的插件似乎与向导不兼容，这可能是因为谷歌正在等待更新它以使用 GCM 而不是[C2DM](https://developers.google.com/android/c2dm/)。

这就是谷歌[在这里](https://groups.google.com/forum/#!msg/google-plugin-eclipse/_op9guM5pf4/BArAH-d3TgEJ)所说的，同时他们建议的解决方案是自己创建一个Android项目，右键单击并转到Google->生成应用引擎后端...我自己这样做时遇到了一些错误，但是可能会给你一些你需要的东西。