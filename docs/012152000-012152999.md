# StackOverflow 问答 12152000-12152999

# xcode - 如何使 AppDelegate 中声明的 GCDAsyncSocket 可用于查看控制器

> ID：12152000
> 
> 赞同：0
> 
> 时间：2012-08-28T02:24:28.010
> 
> 标签：xcode, ios5, gcdasyncsocket, appdelegate

在发布类似问题（不起作用）之后，我在 AppDelegate.h 上声明了一个 GCDAsyncSocket 实例

```
#import <UIKit/UIKit.h>

@class ViewController;
@class GCDAsyncSocket;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    GCDAsyncSocket *asyncSocket;

}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) GCDAsyncSocket *asyncSocket;
@property (strong, nonatomic) ViewController *viewController;

@end 
```

并在 AppDelegate.m 中进行套接字初始化

```
#import "AppDelegate.h"
#import "GCDAsyncSocket.h"
#import "ViewController.h"

@implementation AppDelegate
@synthesize asyncSocket;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    dispatch_queue_t mainQueue = dispatch_get_main_queue();
    self.asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:mainQueue];
    NSString *host = @"10.1.100.50";
    uint16_t port = 3040;

    NSError *error = nil;
    if (![self.asyncSocket connectToHost:host onPort:port error:&error])
    {
        NSLog(@"Error connecting: %@", error);
    }

    char bytes[] = "run";
    NSData* requestData = [[NSData alloc] initWithBytes:bytes length:sizeof(bytes)];
    [self.asyncSocket writeData:requestData withTimeout:-1 tag:0];
    return YES;
} 
```

我试图通过调用从多个视图控制器访问套接字：

```
GCDAsyncSocket *asyncSocket = [[[UIApplication sharedApplication] delegate] asyncSocket]; 
```

代码完成在 [[UIApplication sharedApplication] delegate] 处停止，无法建议 asyncSocket。当在 AppDelegate 中声明 asyncSocket 的实例时，我应该怎么做才能在多个视图控制器中访问 asyncSocket？谢谢！

这是我的 Xcode 项目文件：[http ://bit.ly/PLe1Le](http://bit.ly/PLe1Le)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:03:08.567

你在正确的轨道上。应用程序委托是套接字连接的好地方。我认为你被一些相对简单的事情绊倒了。

`[[UIApplication sharedApplication] delegate]`返回一个`id`或通用对象指针，指向符合`<UIApplicationDelegate>`协议的对象。因此代码完成无法知道您的应用程序的委托是*您的* `AppDelegate`类的实例。

请记住，如果您实际上使用 的实例作为`AppDelegate`应用程序的委托，那么`[[UIApplication sharedApplication] delegate]`将返回一个指向您的委托的指针，但它将是上面讨论的通用指针。

最简单的解决方案是将收到`[[UIApplication sharedApplication] delegate]`的指针转换为`AppDelegate`类型指针。

例如：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
// We now have a pointer to your app delegate that the compiler knows is an AppDelegate.
// So code completion will work and it will compile.
GCDAsyncSocket *socket = [myAppDelegate asyncSocket]; 
```

或者，您可以将调用堆叠到一个语句。语法看起来有点古怪，但这就是它的完成方式。

```
GCDAsyncSocket *socket = [(AppDelegate *)[[UIApplication sharedApplication] delegate] asyncSocket]; 
```

# java - Java 程序：curl ifconfig.me

> ID：12152004
> 
> 赞同：2
> 
> 时间：2012-08-28T02:24:58.667
> 
> 标签：java, ip

我正在开发一个**非常简单**的聊天客户端和服务器，我需要在服务器上显示这样的消息：（“IP：”+ ipAddr）
我的问题是在尝试获取服务器的 ipAddr 时。

我希望它的工作方式与 Mac 终端中的“curl ifconfig.me”完全一样。
如果我在我的计算机上执行 curl ifconfig.me，它将返回：76.xx.xxx.xxx
隐藏部分以保护自己。

我需要我的程序来返回这个。
目前使用此代码：

```
 try {

    InetAddress thisIp = InetAddress.getLocalHost();

    System.err.println("IP: "+ thisIp.getHostAddress());

    }
    catch(Exception e) {

    System.err.println("Error!");

    }

} 
```

它将返回 127.0.0.1，即 localhost IP 地址。谁能帮我找出一个程序来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:27:32.087

ifconfig.me 是一个网站，所以当你 curl 它时，你会得到一个外部网站，告诉你它所看到的 IP 地址。此信息在 JVM（或真正的计算机）内部不可用，您需要从网络外部的某个地方请求您的 ipaddress 以查看您的公共 ip 地址。

现在，如果你想用 Java 获取网站的内容，你可以这样做：

**请注意，这个（更新的）示例将准确模拟 cURL 发送到 ifconfig.me 站点的内容，因此您将获得预期的响应。如果您不发送看起来像 cURL 的用户代理，那么 ifconfig.me 只会向您发送它发送到 Web 浏览器的完整 HTML 文档**

```
public static void main( String[] args ) throws IllegalStateException, IOException
{
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet("http://ifconfig.me/");
    request.setHeader("User-Agent","curl/7.16.3 (i686-pc-cygwin) libcurl/7.16.3 OpenSSL/0.9.8h zlib/1.2.3 libssh2/0.15-CVS");
    HttpResponse response = client.execute(request);

    // Get the response
    String addr = IOUtils.toString(new InputStreamReader(response.getEntity().getContent()));
    System.out.println(addr);
} 
```

现在此代码使用 Apache Commons IO 的HttpComponents[和](http://commons.apache.org/io/)[IOUtils.toString](http://hc.apache.org/) ( [)](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)。这些项目将有助于使您的聊天客户端和服务器更加简单。

# c++ - 多个回调处理程序

> ID：12152005
> 
> 赞同：0
> 
> 时间：2012-08-28T02:25:25.300
> 
> 标签：c++, boost, boost-function

考虑一下片段：

```
# include <iostream>

# include <boost/scoped_ptr.hpp>
# include <boost/shared_ptr.hpp>

# include <boost/function.hpp>
# include <boost/array.hpp>
# include <boost/asio.hpp>
# include <boost/thread.hpp>
# include <boost/thread/locks.hpp>
# include <boost/bind.hpp>
# include <boost/noncopyable.hpp>

# include <boost/variant.hpp>

class DataLink {};
class Metadata {};
class Image {};

 typedef boost::function<void( DataLink const&, Metadata const& , Image const& )> Handler ; 
 typedef boost::function<void( Metadata const& , Image const& )> Handler2 ; 
 typedef boost::function<void( Image const& )> Handler3 ; 

typedef boost::variant<DataLink, Metadata, Image> Variant; 

enum callbackHandler { link_enum, meta_enum, image_enum };
class Worker {
  Handler  callBack ;
  //Handler2 callBack2 ;
  //Handler3 callBack3 ;

  DataLink dlink;
  Metadata meta ;
  Image    img ;

  callbackHandler handlerEnum ;

public :
  Worker ( const Handler& handler ) 
  : callBack ( handler ) 
   {}
  //Worker ( const Handler2& handler ) 
  //: callBack2 ( handler ) 
  // {}
  //Worker ( const Handler3& handler ) 
  //: callBack3 ( handler ) 
  // {}

  void Image ( ) {
    // update the img object 
    // invoke call back 
    handlerEnum = image_enum ;
    //const std::type_info& xxx = callBack.target_type();
    //std::cout << xxx.raw_name() << std::endl;
    callBack ( dlink, meta, img ) ;
  }

  void Metadata ( ) {
    // update the meta object 
    // invoke call back 
    handlerEnum = meta_enum ;
    callBack ( dlink, meta, img ) ;
  }

  void Dlink ( ) {
    // update the link object 
    // invoke call back 
    handlerEnum = link_enum ;
    callBack ( dlink, meta, img ) ;
  }

  callbackHandler getHandlerType() { return handlerEnum ; }
};

class Foo {
  Worker *ptrWorker ;
public :
  Foo () 
  : ptrWorker( 0 ) 
  {}

  void callback ( DataLink const& d, Metadata const& m , Image const&  i ) {
    callbackHandler tt = ptrWorker->getHandlerType();
    if ( tt == image_enum ) {
      std::cout <<  "Image object " << std::endl;
    }
    if ( tt == meta_enum ) {
      std::cout <<  "Meta object " << std::endl;
    }
    if ( tt == link_enum ) {
      std::cout <<  "Link object " << std::endl;
    }

  }
  bool start () {
    ptrWorker = new ( std::nothrow ) Worker ( boost::bind ( &Foo::callback, this, _1, _2, _3 ) );
    if ( !ptrWorker ) {
      return - 1 ;
    }
  }
  void testWorker() {
    ptrWorker->Image() ;
    ptrWorker->Metadata() ;
    ptrWorker->Dlink() ;
  }
};

int main() {
  Foo f;
  f.start() ;
  f.testWorker() ;
  std::cin.get() ;
} 
```

注释掉的构造函数允许我添加对 Handler2 和 Handler3 的支持，但是有没有办法确定传递给 Worker 类的构造函数的处理程序？目前成员函数 Metadata、Image 和 Dlink 使用 'callBack' 对象。如果用户处理程序传入另一个处理程序，我需要区分 - 比如说 Handler2

我需要使用枚举来实现，实际上是我自己的类型系统（按照歧视性联合 - 也就是变体），这一事实也是一个明确的迹象，表明设计需要重新思考这种情况下，我愿意重新设计。必须在类中定义 N-1 个虚拟处理程序（即，在任何时候都只使用一个处理程序，而其他处理程序什么都不做）会让人感到困惑和低内聚的对象模型，但谁知道呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:16:31.687

您可以使用从虚拟基类派生的仿函数来实现这一点：

```
struct CallbackBase
{
    // Dummy virtual functions that does nothing
    virtual operator()(DataLink const &, Metadata const &, Image const &) {}
    virtual operator()(Metadata const &, Image const &) {}
    virtual operator()(Image const &) {}
};

class Worker
{
    CallbackBase &callback_;

public:
    Worker(const CallbackBase &callback)
        : callback_(callback)
        { }

    void Image()
        {
            // Do something...

            callback_(img);
        }

    void Metadata()
        {
            // Do something...

            callback_(meta, img);
        }

    void Dlink()
        {
            // Do something...

            callback_(dlink, meta, img);
        }
};

struct MyCallback : public CallbackBase
{
    virtual operator()(Image const &)
        {
            // Do something useful here
        }
};

MyCallback my_callback;
Worker my_worker(my_callback); 
```

由于基回调类中的重载，`Worker`该类可以在正确的位置调用它们中的任何一个，而您只需在派生回调类中实现您实际需要的回调。

# python - 如何递归地创建可单独访问的对象

> ID：12152007
> 
> 赞同：0
> 
> 时间：2012-08-28T02:25:35.067
> 
> 标签：python, object, recursion, creation

我是 Python 的新手，缺乏正规培训。我学到的一切都是通过书籍和我看过的一些视频。因此，虽然我理解了基本概念，但我仍然对许多更好的编码人员可能认为理所当然的一些事情感到困惑。所以我需要这方面的帮助。

我正在开发一个国际象棋程序，在创建棋子时，我想知道如何使用一个函数创建它们，但以后能够单独访问它们以更改它们各自的位置。我不能像我希望的那样将字符串变成变量。

```
class Name(object):
    def __init__(self, posx, posy, posz):
        self.pos= (posz, posy, posz)
        box(pos=self.pos) 
```

然后我可以从列表中创建一个包含位置的一堆，但仍然可以将它们作为单独的对象访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:38:00.767

让自己更轻松的一种方法是不要让这些部分担心它们在哪里，而是将其委托给 Board 对象：

```
import string

class Piece(object):
    def __init__(self, type, colour):
        self.type = type
        self.colour = colour
    def __str__(self):
        return 'Piece(%(type)s, %(colour)s)' % self.__dict__

class Board(dict):
    def __init__(self, width, height):
        self.update(
            dict(((x,y), None) 
                for x in string.ascii_lowercase[:width] # alphabetic axis 
                for y in xrange(1, height+1)            # numeric axis
            )
        )

    def setup(self, position_seq):
        for type, colour, position in position_seq:
            self[position] = Piece(type, colour)

initial_positions = [
    ('rook', 'W', ('a', 1)),
    ('knight', 'W', ('b', 1)),
    ('bishop', 'W', ('c', 1)),
    ('queen', 'W', ('d', 1)),
    ('king', 'W', ('e', 1)),
    ('pawn', 'W', ('a', 2)),
]

b = Board( 8,8 )
b.setup( initial_positions )
print b['a',1] # returns Piece(rook, W) 
```

Board的`setup`方法采用一个元组列表，每个元组都包含实例化新片段所需的数据，并指定它应该在板上的位置。不需要递归，只需一个简单的循环将数据传递到类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:33:08.713

你想如何访问它们？如果您想通过字符串键访问它们，那么最简单的方法是将它们放入字典中。但是我不确定这是你真正想要做的。更常见的做法是将它们放在一个列表中。

# ruby-on-rails - 从嵌套 if 重构为 link_to_if

> ID：12152009
> 
> 赞同：1
> 
> 时间：2012-08-28T02:25:53.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

`if`我在共享视图中有以下声明：

```
<% if activity.holder.user.profile_type == "Manager" %>
  DAMANAGER
<% elsif profile == "managers" %>
  <%= link_to activity.holder.name, managers_enterprise_path(activity.holder) %>
<% else %>
  <%= activity.holder.name %>
<% end %> 
```

*profile 是一个本地字符串变量，它将是`"enterprises"`或`"managers"`取决于登录的配置文件！*

*活动也是来自`#each`语句 的局部变量*

* * *

该视图仅在具有不同配置文件（企业和经理）的两个用户之间共享，具有以下约束：

*   如果经理是活动的所有者，则应显示`DAMANAGER`

*   当我看到经理时，除非持有人是经理，否则它应该显示一个链接以显示拥有此活动的企业。

*   当我将其视为企业时，它应该显示，谁拥有该活动，持有人姓名。没有链接。

所以我自己挣扎并从那个重构到这个，这就是我现在得到的：

```
<%= link_to_if (profile == 'managers'), activity.holder.name, managers_enterprise_path(activity.holder) %> 
```

但这并没有显示`DAMANAGER`，而且还显示了企业`id`与经理的平等`id`，因为它将经理传递给了`managers_enterprise_path`。问题是：

**我怎样才能改进它？**

在此先感谢，如果您需要更多代码，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:10:14.093

我没有看到一种可维护的方式来做到这一点`if ... else ... end`。该`elsif ... else ... end`部分可以替换为`link_to_if`：

```
<% if activity.holder.user.profile_type == "Manager" %>
  DAMANAGER
<% else %>
  <%= link_to_if profile == "managers", activity.holder.name, managers_enterprise_path(activity.holder) %>
<% end %> 
```

# sql - 为什么/如何使用我的 SQL 查询变得更快？

> ID：12152012
> 
> 赞同：2
> 
> 时间：2012-08-28T02:26:21.163
> 
> 标签：sql, sql-server, query-optimization

我对一个表中的大约 1,300,000 条记录进行了查询。它获取满足某些 WHERE 条件的某些记录并将它们插入到另一个表中。它首先完全清除目标表。

每次 Execute 完成查询所需的时间会大大缩短：

```
1st: 5 minutes, 3 seconds
2nd: 2 minutes, 43 seconds
3rd: 12 seconds
4th: 3 seconds 
```

除了点击执行之外，我什么也没做。我的查询看起来像这样（出于长度目的，有些缩写）：

```
DELETE FROM dbo.ConsolidatedLogs --clear target table

DECLARE @ClientID int

DECLARE c CURSOR FOR SELECT ClientID FROM dbo.Clients
OPEN c

FETCH NEXT FROM c INTO @ClientID --foreach LogID
WHILE @@FETCH_STATUS = 0
BEGIN

   INSERT INTO dbo.ConsolidatedLogs
        (col1, col2)
        SELECT col1, col2
        FROM dbo.CompleteLogsRaw
        WHERE col3 = true AND
              ClientID = @ClientID

   FETCH NEXT FROM c INTO @ClientID

END
CLOSE c
DEALLOCATE c 
```

如何/为什么会发生这种情况？SQL Server 究竟在做什么使这成为可能？

此查询将作为 SQL Server 代理作业运行，每 3 小时运行一次。每次都需要整整 5 分钟，还是会更短，因为作业只运行这一个查询，即使它有 3 小时的延迟？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T02:44:00.960

如果每次运行相同的查询都变得更快，则很有可能会缓存内容。那么，东西可以缓存在哪里呢？

*   SQL Server 查询计划缓存
*   SQL Server 的查询缓存
*   操作系统 IO 缓冲区
*   硬盘控制器缓存
*   硬盘磁盘缓存

您可以在运行之间清除 SQL Server 查询缓存，以查看该缓存的影响是什么

[如何清除 SQL Server 查询缓存？](https://stackoverflow.com/questions/1873025/how-can-i-clear-the-sql-server-query-cache)

SQL Server 将使用任何专用于它的 RAM 将它经常访问的东西保存在 RAM 中而不是磁盘上。运行相同查询的次数越多，通常会在磁盘上找到的数据就越可能驻留在 RAM 中。

操作系统级别和硬件级别的缓存最容易通过重新启动来重置，如果您希望查看它们是否有助于改善结果。

如果您发布 SQL Server 用于每次执行查询的查询计划，则可以进行更详细的诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:45:04.347

当 Sql Server 在企业管理器中执行查询时，它会在第一次执行后创建一个“执行”或“查询计划”，并缓存该计划。简而言之，“查询计划”描述了 SQL Server 如何攻击满足结果所需的表、字段、索引和数据。每次重新运行它时，都会从计划缓存中获取该查询，并且省略了查询预处理器通常必须做的“繁重的工作”。这允许在第二次和后续执行时更快地执行查询。

请注意，这是对更详细（因此，本质上更酷）过程的过度简化，但那是查询计划 101 :)

# java - 回文检查不起作用

> ID：12152016
> 
> 赞同：0
> 
> 时间：2012-08-28T02:26:58.453
> 
> 标签：java

```
public class reverse
{
    public static void main(String[] args)
    {
        Scanner sc = new Scanner(System.in);
        System.out.print("Enter a new string : ");
        String word = sc.nextLine();
        StringBuilder s = new StringBuilder();
        for (int i = 0; i <= word.length() - 1; i++)
        {
            char c = word.charAt(word.length() - i - 1);
            s.append(c);
        }
        System.out.println("Reversed String = " + s);
        if (word.equals(s))
        {
            System.out.println("This is a palindrome");
        }
        else
        {
            System.out.println("This is not a palindrome");
        }
    }
} 
```

无论我输入什么字符串，这总是打印“这不是回文”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T02:30:09.803

你需要

```
if (word.equals(s.toString())){ 
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:31:22.317

word 是类型`String`，s 是类型`StringBuilder`，因此它们在类型方面不相等。

它应该是

```
if (word.equals(s.toString()) {
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T02:34:22.717

**在 StringBuilder 实例上调用 toString()，然后与 equals 方法进行比较**

if (s.toString().equals(word)){

```
} 
```

# objective-c - 对数字进行排序 Objective-C

> ID：12152020
> 
> 赞同：2
> 
> 时间：2012-08-28T02:27:33.940
> 
> 标签：objective-c, arrays, nslog, nsnumber

我想制作一个演示应用程序，我可以在其中输入 4 个数字到代码中，并按 1、2、3 顺序对其进行排序，并`NSLog`为我服务。有没有简单的算法或方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T21:52:07.683

```
// Put code in your App's ViewController
@implementation Sorting_NumbersViewController

- (void)viewDidLoad 
{

[super viewDidLoad];

// CODE STARTS HERE
  // This allocates and initializes the NSMutableArray
  NSMutableArray *anArray = [[NSMutableArray alloc] init];

  // These are where you enter your numbers
  [anArray addObject:@"1"];
  [anArray addObject:@"3"];
  [anArray addObject:@"2"];

  //This looks looks at the objects above and compares them with each-other
  NSArray *sorted = [anArray sortedArrayUsingSelector:@selector(compare:)];

  //This spits the result out in the console
  NSLog(@"Ordered Numbers: %@", sorted);  

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T02:31:41.040

`NSMutableArray`有一些很棒的排序方法，如此[处所述](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)。

不幸的是，这不是一个**给我的 codez**网站——我们希望看到你自己付出一点努力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:16:37.627

正如 Luke 所写，有一些很棒的排序方法内置于`NSMutableArray`. 但是，如果您自己实现算法，您将学到更多。查看[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort "冒泡排序")。它是一种类型的排序算法，应该可以很好地完成这项任务，并且无论如何理解都是一件很棒的事情。

编辑：查看这个[StackOverflow 链接](https://stackoverflow.com/questions/3205792/how-do-i-sort-an-nsmutable-array-with-nsnumbers-in-it)。我真的只是在谷歌上搜索了“s sort `NSMutableArray`of `NSNumber`s”，这是第一批热门歌曲之一。

# android - Corona sdk 允许设备音量控制

> ID：12152022
> 
> 赞同：1
> 
> 时间：2012-08-28T02:28:02.100
> 
> 标签：android, sdk, controls, coronasdk, volume

我在 Corona sdk 游戏中使用运行时侦听器，它可以工作，但是我真正感兴趣的是让我的游戏不会干扰用户通过使用他们设备上的硬件音量控制来设置他们的 droid 手机或平板电脑上的音量. 我在 Corona Labs 网站上找不到任何东西。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:26:36.050

这发生在我身上一次，是因为我使用了事件监听器“key”

要解决这个问题，您需要返回 FALSE，除了您正在处理的键，当“键”侦听器返回 true 时，这意味着：“我用那个键做了一些事情，所以操作系统应该忽略它”，当它返回 false 时，它的意思是：“我没有用那个键做任何事情，所以操作系统应该处理它”

那么，为什么不能设置音量呢？这是因为您在某处捕获了“key”事件，并且当按下的键是第一个音量时不返回 false（最简单的方法是为您想要的返回“true”，为其他所有内容返回“false”）。

当我遇到这个问题时，我有这个代码：

```
local downPress = false
function onBackButtonPressed(e)
    if (e.phase == "down" and e.keyName == "back") then
        downPress = true
    else
        if (e.phase == "up" and e.keyName == "back" and downPress) then
            storyboard.gotoScene( LastScene , "fade", 200 );
            Runtime:removeEventListener( "key", onBackButtonPressed );
        end
    end
end 
```

它对我想要的效果很好，但阻止了音量键。请注意，上面没有“return”声明。

现在的代码是这样的：

```
local downPress = false
function onBackButtonPressed(e)
    if (e.phase == "down" and e.keyName == "back") then
        downPress = true
        return true
    else
        if (e.phase == "up" and e.keyName == "back" and downPress) then
            storyboard.gotoScene( LastScene , "fade", 200 );
            Runtime:removeEventListener( "key", onBackButtonPressed );
            return true
        end
    end
    return false; --THE LINE YOU REALLY NEED IS THIS ONE!!!
end 
```

所以我所做的只是在按下并按下后退键时返回 true （我的目的是防止应用程序在按下后退键时退出，可能这也是你想要的）并为其他所有内容返回 false （包括音量键在那！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:50:23.913

如果您有这样的运行时侦听器（用于使用 android 中的后退硬按钮返回）：

```
Runtime:addEventListener( "key", handleBackButton ) 
```

请记住在侦听器末尾添加“return true”。

```
local function handleBackButton( event)
    if (event.phase == "down") and (event.keyName =="back") then
        -- your code for going back
        return true
    end
end 
```

并且记住运行时监听器是全局的，你只需要注册一次监听器，当不再使用监听器时也要记得移除它。

希望这可以帮助。干杯！

# ruby-on-rails - 使用 Resque 延迟 render_to

> ID：12152023
> 
> 赞同：0
> 
> 时间：2012-08-28T02:28:03.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, resque

我正在尝试复制 Ryan Bates 在 Resque 上的这个[railscast](http://railscasts.com/episodes/271-resque)中的设置，他在那里排队第三方服务 Web 请求，然后用结果更新他的结果页面。

我正在设计一个应用程序，它将与另一个 Rails 应用程序***而不是浏览器***交互，并希望复制类似的行为，主要区别在于**只需要 JSON 输出**

目前我有这样的东西：（我的模型是`Lists`和`Tasks`，一个列表`has_many`任务和一个任务`belongs_to`列表。

我的`lists_controller.rb`

```
def show
  Resque.enqueue(TaskDataFetcher,params[:id])
  # confused if I need to have a render_to below this.

end 
```

在`task_data_fetcher.rb`

```
require "net/http"
require "uri"

  class TaskDataFetcher
    @queue = :tasks_queue

    def self.perform(id)

      list = List.new(:id => id)
      url = "taskservice.com/" + id + ".json"

      uri = URI.parse(url)
      response = Net::HTTP.get_response(uri)
      task = Task.new(:contents => response.body)
      task.list = list
      # how to return this to the requesting server????
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:00:44.687

在 Railscast 中，您会看到 Resque 任务完成后结果不会自动更新，他必须多次重新加载页面，重新发出`show`请求。因此，如果您想复制此行为，您可以执行以下操作：

```
def show
    list = List.find(params[:id])
    if list
        respond_to do |format|
            format.json {render :json => list.to_json}
        end
    else
        Resque.enqueue(TaskDataFetcher, params[:id])
        render :nothing => true, :status => 202
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:27:09.940

**Requerement：** 因此您的用户正在请求您的服务以查看某些任务。而且您必须从其他服务中获取这些内容`taskservice.com`。然后我认为你必须通过数据库来实现持久性。

**建议：** 你可以有一个像`TaskRequest`有属性的模型

```
`id` # must ;)
`task_list` # might be xml or whatever format suits you best
`is_received` # boolean 
```

在您的`show`方法中，您创建一个`TaskRequest`条目并呈现一个视图，该视图将显示一个`loading`类型的事物并将通过 ajax 请求任务。ajax 响应应该返回任务列表和`is_received`. 但是，一旦您`is_received`对内容感到满意，您应该再次请求。

同时，您`TaskDataFetcher`应该收到两个`id`s。您现在发送的一个，另一个是`TaskRequest`id。因此，在从服务中获取数据后，它将存储在`TaskRequest`表中并将更新`is_recieve`为`true`. 将其设置为 true 最终将不再请求此数据。

好吧，整个解释可能看起来有点模糊。如果您没有任何零件或您需要其他任何东西，请告诉我。

*注意：*这有点像 SO 在回答问题时显示代码格式的方式；）

# ruby-on-rails - 将键值存储用于 URL 缩短器的优势？

> ID：12152025
> 
> 赞同：1
> 
> 时间：2012-08-28T02:28:33.893
> 
> 标签：ruby-on-rails, ruby, database, redis, url-shortener

我在网络上研究了很多 Rails 的 URL 缩短器，其中大多数都将持久性功能委托给了 redis。

谁能向我解释使用键值存储（如 Redis）而不是数据库来持久化和访问短 URL 的好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:32:10.100

像 redis 这样的数据库针对存储大量小值（例如链接及其短 url）进行了优化，因为它们被加载到内存 (ram) 中。这意味着当调用 redis 时，它会从 ram（更快）而不是硬盘驱动器（更慢）读取数据。

编辑：

如果您想了解更多信息，这是对顶级 no-sql 数据库的优缺点的精彩记录。绝对是一个很好的参考。

[http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T02:34:19.300

与 SQL 数据库相比，对键值存储进行分片、扩展和复制要简单得多，因此在数据适合时使用它是有意义的

# eclipse - Eclipse Tomcat 不会自动部署 Web 应用程序

> ID：12152028
> 
> 赞同：0
> 
> 时间：2012-08-28T02:29:01.257
> 
> 标签：eclipse, tomcat

大家好：我们已经完成了所有的eclipse服务器配置（使用eclipse服务器配置添加tomcat-juli.jar）。我们花了两天时间在网上搜索，测试了不同版本的tomcat和不同的电脑，后来发现eclipse不能自动部署web应用到tomcat服务，最后stackoverflow的一个线程建议右键手动构建war在项目上并选择 Export -> war file，因为您知道这不是解决方案。如果您提出任何解决方案，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:46:44.830

我的建议是单独安装 Tomcat 并使用 ANT 脚本构建您的 WAR 文件，该脚本会自动将您的 War 文件部署到`$TOMCAT_HOME/webapps`. 在`$TOMCAT_HOME/conf/server.xml`中，确保您拥有`unpackWARs`并`autoDeploy`设置为`"true"`：

```
<Host name="localhost"  
  appBase="webapps"
  unpackWARs="true" 
  autoDeploy="true"> 
```

# .net - 在启动时运行应用程序：注册表项与启动文件夹

> ID：12152032
> 
> 赞同：4
> 
> 时间：2012-08-28T02:29:33.787
> 
> 标签：.net, app-startup, startup-folder

我想在启动时运行一个应用程序。我知道有几个选择。我对以下选项最感兴趣：

1.  注册表方法：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
2.  将快捷方式复制到启动文件夹：C:\Users\@username@\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup

这两个选项有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T03:21:43.207

没有本质区别。该文件夹往往受到用户的喜爱，便于他们在那里创建快捷方式。注册表项往往是安装程序的最爱，用户禁用该程序的可能性较低。

这不再是一个保证，周围有很多实用程序可以帮助编辑密钥，而无需使用 Regedit.exe。包括 Windows 自己的 msconfig.exe

# memcached - Django haystack load_all 缓存

> ID：12152034
> 
> 赞同：0
> 
> 时间：2012-08-28T02:29:48.450
> 
> 标签：memcached, django-haystack

我正在尝试优化我的同事 django haystack 搜索功能，有一个 queryset.load_all() 可以加载 200 个模型实例，现在，鉴于我无法缓存 load_all() 的结果，有没有办法缓存这些单独的模型实例所以load_all() 将从 memcache 中读取以获取那些模型实例？

代码看起来像这样

```
result_set = query_set.load_all()[:self.max_results] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:57:09.887

我分两步解决了它：

1.  为缓存结果的模型创建缓存管理器。
2.  在您的 SearchIndex 中覆盖 index_queryset 以便您可以将管理器设置为使用：

> ```
> def index_queryset(self):
>     self.get_model().my_super_cache_manager.all() 
> ```

# c# - RegEx 最近的词匹配贪婪

> ID：12152037
> 
> 赞同：-1
> 
> 时间：2012-08-28T02:30:00.603
> 
> 标签：c#, regex, greedy

我有这个文字

```
"(Objectid < 200 OR ObjectID > 600) and (test or best) W/5 AND (apple OR 10a) AND (Objectid < 100 OR ObjectID > 500)" 
```

我想在上面的字符串中获取包含子字符串`And`或最接近（从左侧或右侧）`Or`包裹的字符串，其中是一个数字。`( )``W/digit``digit`

在上面的例子中，我应该得到（测试或最佳）（苹果或 10a）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:52:09.743

试试看：

```
var rgx = new Regex(@"(\([^)]*\))\WW/\d+\W(?:AND|OR|IN)\W(\([^)]*\))", RegexOptions.IgnoreCase);
var items = new List<Tuple<string,string>>();
var match = rgx.Match(subjectString);
while (match.Success) {
    items.Add(new Tuple<string,string>(match.Groups[1].Value, match.Groups[2].Value));
    match = match.NextMatch();
} 
```

# c++ - gdb 中的哪些命令与 dbx 中的路径图相同？

> ID：12152038
> 
> 赞同：2
> 
> 时间：2012-08-28T02:30:07.433
> 
> 标签：c++, linux, c++11

当我在 coredump 上使用 gdb 时，它会报告一些 .so 它无法在某个路径中找到。例如：

> 找不到 /root/a/xx.so 的符号文件

我没有在 root 中创建目录的管理员权限，但我有 xx.so，并且在 dbx 中，我可以使用路径映射来更改可以继续调试的路径。但是在 gdb 中我找不到相同的命令。

此外，我无权更改编译器命令。也就是说，我无法更改链接器路径来重新编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T07:17:07.220

您可以尝试`dir`命令更改到文件的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:24:12.980

这听起来像你想要的，当搜索失败`set solib-search-path`时，它需要一个以冒号分隔的目录名称列表来搜索共享库。`sysroot`

一个相关的命令`set sysroot`(aka `set solib-absolute-prefix`) 允许您将任何目录设置为用于加载具有绝对路径名的库的根目录，但您需要确保库在新根目录下的正确目录结构中布局，并且它听起来你不想这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-04T14:06:55.007

您正在寻找的命令是

```
set substitute-path <from> <to> 
```

# sql - 如何使用第二个表中的任意到期日期获取摘要查询？

> ID：12152043
> 
> 赞同：0
> 
> 时间：2012-08-28T02:31:31.413
> 
> 标签：sql, plsql, oracle11g

在 Oracle 11g 上使用 PL/SQL 如何编写查询以返回所需的结果？我想要使​​用许可证表的 expiry_date 的详细信息总和。每个 group by 中的所有事务必须在 expiry_date 之前发生。

```
Licenses

license_type vendor_code  funding_code  license_expiry_date 
---------------------------------------------------------------------------
CAB           1001        XR1           07/09/2011 4:23:18 pm
CAB           1002        XR2           07/06/2012 10:22:16 am

License_detail
register_period  license_type   active_date  fee  
---------------------------------------------------------------------
2012A            CAB             06/01/2011  25.00
2012A            CAB             07/01/2011  25.00
2012A            CAB             08/01/2011  30.00
2012A            CAB             09/01/2011  30.00
2012A            CAB             07/10/2012  40.00
2012A            CAB             07/11/2012  40.00

Desired Result

Period    Type   Funding   Vendor  TotalFees Expiry_Date
---------------------------------------------------------
2012A      CAB   XR1       1001     50.00    07/09/2011 4:23:18 pm
2012A      CAB   XR2       1002     60.00    07/06/2012 10:22:16 am
2012A      CAB   <null>    <null>   80.00    <null> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:48:40.343

您需要的是许可证的生效日期和结束日期。然后，您可以将其加入许可证详细信息，如下所示：

```
select ld.period, ld.type, l.funding_code, l.vendor_code, sum(fee) as fee,
       l.license_expiry_date
from license_detail ld left outer join
     (select l.*,
             lead(license_expiry_date, 1) over (partition by license_type
                                                order by license_expiry_date)
                                               ) as nextdate
      from licenses l
     ) l
     on ld.license_type = l.license_type and
        ld.active_date >= coalesce(license_expiry_date, ld.active_date) and
        ld.active_date < coalesce(nextdate, to_date('9999-01-01', 'yyyy-mm-dd'))
group by ld.period, ld.type, l.funding_code, l.vendor_code, l.license_expiry_date 
```

# javascript - 为缩略图库和更大的图像库添加下一个和上一个按钮

> ID：12152048
> 
> 赞同：0
> 
> 时间：2012-08-28T02:31:56.303
> 
> 标签：javascript, jquery

我正在尝试为缩略图和更大的图片库添加下一个和上一个按钮。下一个和上一个按钮也应该支持键盘事件监听器。

这是我尝试过的链接。

[http://jsfiddle.net/L7yKp/36/](http://jsfiddle.net/L7yKp/36/)

我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:04:34.620

在这里，我已经完成了添加下一个和上一个按钮的上述问题的完整解决方案。

**演示：** [http ://codebins.com/bin/4ldqp7y](http://codebins.com/bin/4ldqp7y)

**HTML**

```
<div id="panel">
  <div class="controls">
    <img src="http://aux.iconpedia.net/uploads/1698581142461241089.png" class="prev" />
    <span>
      Thumbnail Navigation 
    </span>
    <img src="http://cdn1.iconfinder.com/data/icons/fatcow/32x32_0760/resultset_next.png" class="next" />
  </div>

  <div id="thumbs">
    <div class="thumb active">
      <img src="http://images.replacements.com/images/images5/china/C/lenox_china_garden_birds_no_box_P0000014675S0122T2.jpg" width="100" height="80" />
    </div>
    <div class="thumb">
      <img src="http://coolfunnyanimals.com/thumb/funny-animal-bird-47.jpg" width="100" height="80" />
    </div>
    <div class="thumb">
      <img src="http://learnordie.files.wordpress.com/2012/05/thrasher.jpg" width="100" height="80" />
    </div>
    <div class="thumb">
      <img src="http://3.bp.blogspot.com/_N_mOB63qPaE/TSC17ceXRII/AAAAAAAARaQ/TeDi9FYIBPw/s1600/Flying-Bird-Picture-2.jpg" width="100" height="80" />
    </div>
    <div class="thumb">
      <img src="http://www.kevinhearne.com/wp-content/uploads/2011/11/pic6.jpg" width="100" height="80" />
    </div>
  </div>

  <div class="controls" align="center" width="400px">
    <img src="http://aux.iconpedia.net/uploads/1698581142461241089.png" class="prev" />
    <span>
      Large Image Navigation 
    </span>
    <img src="http://cdn1.iconfinder.com/data/icons/fatcow/32x32_0760/resultset_next.png" class="next" />
  </div>

  <div id="large">
    <div class="bigthumb active">
      <img src="http://images.replacements.com/images/images5/china/C/lenox_china_garden_birds_no_box_P0000014675S0122T2.jpg" />
    </div>
    <div class="bigthumb">
      <img src="http://coolfunnyanimals.com/thumb/funny-animal-bird-47.jpg" />
    </div>
    <div class="bigthumb">
      <img src="http://learnordie.files.wordpress.com/2012/05/thrasher.jpg" />
    </div>
    <div class="bigthumb">
      <img src="http://3.bp.blogspot.com/_N_mOB63qPaE/TSC17ceXRII/AAAAAAAARaQ/TeDi9FYIBPw/s1600/Flying-Bird-Picture-2.jpg" />
    </div>
    <div class="bigthumb">
      <img src="http://www.kevinhearne.com/wp-content/uploads/2011/11/pic6.jpg" />
    </div>
  </div>
</div> 
```

**CSS：**

```
#thumbs{
  text-align:center;
  background:#77a5c6;
  padding:5px;
}
.thumb{
  display:inline-block;
  margin:0px;
  padding:0px;
  cursor:pointer;
}
#thumbs .active{
  border:3px solid #333;
}
.controls{
  margin-left:10px;
}
.controls img{
  cursor:pointer;
  margin:0px;
}
.controls span{
  font-size:13px;
  display:inline-block;
  vertical-align:top;
  margin-top:5px;
}
#large{
  text-align:center;
}
#large .bigthumb{
  display:none;
}
#large .active{
  display:block;
}
#large .active img{
  border:2px solid #333;
} 
```

**jQuery：**

```
$(function() {
    $("#thumbs").find(".thumb:first").addClass("active");
    $("#large").find(".bigthumb:first").addClass("active");

    var getIndex = $("#thumbs").find(".active").index();

    $(".controls").each(function() {
        $(this).find(".next").click(function() {
            getIndex = $("#thumbs").find(".active").index();
            getIndex += 1;
            if (getIndex > ($("#thumbs").find(".thumb").length - 1)) {
                getIndex = 0;
            }
            setActiveImage(getIndex);
        });
        $(this).find(".prev").click(function() {
            getIndex -= 1;
            if (getIndex < 0) {
                getIndex = $("#thumbs").find(".thumb").length - 1;
            }
            setActiveImage(getIndex); //Set/Show Active Image
        });
    });

});

function setActiveImage(index) {
    if (typeof(index) == "undefined" || index == "" || index == null) index = 0;

    $("#thumbs").find(".thumb").removeClass("active");
    $("#thumbs").find(".thumb:eq(" + index + ")").addClass("active");
    $("#large").find(".bigthumb").removeClass("active");
    $("#large").find(".bigthumb:eq(" + index + ")").addClass("active");
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7y](http://codebins.com/bin/4ldqp7y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:01:06.190

见[http://jsfiddle.net/L7yKp/37/](http://jsfiddle.net/L7yKp/37/)

问题是

```
$(['next','prev']).each(function(){
    var that=this;
    $('#'+that).click(function(){
        $('#thumbs img.clicked')[that]().click();
    });
}); 
```

因为现在你有

```
<a href="#" id="tnext">Next</a>
<a href="#" id="tprev">Prev</a> 
```

和

```
<a href="#" id="lnext">Next</a>
<a href="#" id="lprev">Prev</a> 
```

所以解决方案是；

```
$(['next','prev']).each(function(){
    var that=this;
    $('.'+that).click(function(){
        $('#thumbs .clicked')[that]().click();
    });
}); 
```

和

```
<a href="#" class="next">Next</a>
<a href="#" class="prev">Prev</a> 
```

# javascript - Javascript/Jquery 将选择列表更改为单选按钮

> ID：12152051
> 
> 赞同：0
> 
> 时间：2012-08-28T02:32:10.023
> 
> 标签：javascript, jquery

我有一个选择列表，我想将其更改为可单击的单选按钮。

这是我的选择列表：

```
<select id="VariationGroup44" class="select" name="dlVariationGroup44">
<option value="Select Color"> Select Color </option>
<option selected="selected" value="1"> Black </option>
<option value="2"> Red </option>
<option value="3"> Green </option>
<option value="4"> Blue </option>
</select> 
```

我已成功将其转换为 UL，但选项不再可点击，这就是为什么我认为单选按钮会更好地工作。欢迎所有建议并非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:39:22.727

**工作流程：**

1.  迭代选项。
2.  你要什么就拿
3.  构建新的复选框。
4.  将它们附加到元素。

**编码：**

```
$('#VariationGroup44 option').each(function(i,obj){
  $('<li><input type="radio" name="chkOpt'+i+'" value="'+$(obj).val()+'"/><label for="chkOpt'+i+'"> '+$(this).text()+'</label></li>').appendTo('ul');
}); 
```

[工作的 jsFiddle。](http://jsfiddle.net/2fSCE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:37:05.273

```
function replaceSelect(select) {
  var opts = $(select).find('option');
  var name = $(select).attr('name');
  var id = $(select).attr('id');
  var list = [];
  opts.each(function() {
    list.push(
      '<li>'+
        '<label>'+
          '<input type="radio" name="'+ name +'">'+ 
          $(this).text()
        '</label>'+
      '</li>'
    );
  });
  $(select).replaceWith('<ul id="'+ id +'">'+ list.join('') +'</ul>');
}

// Usage
replaceSelect('#VariationGroup44'); 
```

# php - 如何使用 PHP 仅获取 CSV 文件的第二列？

> ID：12152052
> 
> 赞同：2
> 
> 时间：2012-08-28T02:32:40.737
> 
> 标签：php, cakephp, csv, cakephp-1.3

我有 csv 文件（test.csv），文本如下：

```
1,maly,maly(),f,df
2,cheata,aaa,df,df
3,cheata,df,df,df
4,maly,fc,cfv,f
5,maly,df,fg,fg
6,chantha,fc,gf,fg
7,chantha,gh,a,g
8,David,fgfd,dfg,g 
```

**我想要的是：**

我只想显示：`maly cheata chantha David`。对于两个或多个相同的名称，只取一个。我的php代码如下：

```
$c=0;   
$data=fopen('test.csv','r');
while($row=fgets($data)){
if($c!=0){
echo $row[3]."<br>\n";
}
$c++;
} 
```

**问题是**

它没有显示我想要的。它显示

> 哈哈哈

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:37:41.197

看起来您打算打电话`fgetcsv`而不是`fgets`. 此外，`name`索引将是`1`，而不是`3`：

```
<?php

$file = fopen('test.csv', 'r');
while($row = fgetcsv($file)) {
    if (isset($row[1])) {
        echo $row[1], "\n";
    }
}
fclose($file); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T02:41:06.177

使用[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)而不是`fgets`.

```
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if (isset($data[1])) {
            echo $data[1] . "<br>\n";
        }
    }
    fclose($handle);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T02:42:54.537

该`file`方法返回数组中的所有行。该`explode`方法通过特定的分隔符分割一行。

```
$lines = file($file_name);

$fields = array();
foreach ($lines as $line) {
    $cells = explode(',', $line);
    $fields[] = $cells[1];
}

echo "<pre>";
print_r($fields);
echo "</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T02:43:25.447

您的标题与您的问题不匹配，您想要第二列，而不是行。

首先，您获得每行的第 4 个字符，您需要执行以下操作（未经测试）：

```
$data=fopen('test.csv','r');
while($row=fgets($data)){
   $cols =  explode(',' $row);
   echo $cols[1]."<br>\n";
} 
```

# php - 包括原文格式

> ID：12152053
> 
> 赞同：0
> 
> 时间：2012-08-28T02:32:57.350
> 
> 标签：php, mysql, html

我希望从我的数据库、用户返回的帖子的格式与他们最初输入它们的方式相同。

就像当我从一行数据中回显文本时，它会像这样：

```
Hello There. 
```

当用户最初像这样格式化它时：

```
Hello
There. 
```

注意到回报了吗？我如何实现这一目标？

这是我的html：

```
 <form method="post" action="share.php">
            <textarea name="story"></textarea>
            <div id="share-something-bottom">
                <div id="share-something-camera">
                    <img src="images/camera.png"/>
                    <button type="submit" class="share"    
                                           name="share"><p>Share</p></button>
                </div>
            </div>
        </form> 
```

我在我的数据库表中使用 varchar 字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:34:36.860

将格式存储在数据库中，并确保在存储之前对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:56:12.540

如果您希望在页面上回显换行符时保留换行符，则需要使用`nl2br()`.

```
echo nl2br($string_from_database); 
```

您也可以将字符串包装在`<pre>`标签中，但这也会影响使用的字体（默认情况下）。

# ios - UISplitView - 用动画替换 DetailView

> ID：12152057
> 
> 赞同：1
> 
> 时间：2012-08-28T02:33:09.163
> 
> 标签：ios, animation, storyboard, uisplitviewcontroller

我想知道是否可以用动画替换 detailView。目前我在 MasterView 中有一些按钮，我使用这些按钮将 detailView 替换为不同的视图。我可以制作动画吗？谢谢..

# pyqt - keyPressEvent 方法在这个程序中是如何工作的？

> ID：12152060
> 
> 赞同：11
> 
> 时间：2012-08-28T02:33:36.573
> 
> 标签：pyqt

我无法理解 keyPressEvent 方法在这个程序中是如何工作的。具体来说，这里的“e”是什么？keyPressEvent 是使用预先存在的实例“e”重新定义的方法吗？

```
import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        self.setGeometry(300,300,250,150)
        self.setWindowTitle('Event handler')
        self.show()

    def keyPressEvent(self, e):

        if e.key() == QtCore.Qt.Key_Escape:
            self.close()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T02:44:38.350

e 是用户按键时产生的“事件”。这在事件处理程序中很常见，它是向事件处理程序传递信息（例如按下哪个键 - 这是用 e.key() 拉出的内容）的好方法，以便我们可以组合相关事件并处理它们单一功能。

```
# A key has been pressed!
def keyPressEvent(self, event):
    # Did the user press the Escape key?
    if event.key() == QtCore.Qt.Key_Escape: # QtCore.Qt.Key_Escape is a value that equates to what the operating system passes to python from the keyboard when the escape key is pressed.
        # Yes: Close the window
        self.close()
    # No:  Do nothing. 
```

# objective-c - UILabel 文本不更新

> ID：12152066
> 
> 赞同：0
> 
> 时间：2012-08-28T02:34:40.837
> 
> 标签：objective-c, xcode, uilabel, subview, updates

主视图有一个标签和一个按钮。我添加了一个包含 UILabel 和按钮的子视图。我想要做的是我想通过按下两个按钮之一来更新两个视图中的两个标签。问题是，如果我点击子视图的按钮，子视图的标签只会更新。相反，只有当我单击主视图中的按钮时，主视图的标签才会更改。

我想知道如何更新另一个视图的每个 label.text 。

提前致谢...

这是我的代码。1.ViewController.h

```
#import <UIKit/UIKit.h>
#import "SubView.h"

@interface ViewController : UIViewController{
    SubView *subView;
}

@property (weak, nonatomic) SubView *subView;
@property (retain, nonatomic) IBOutlet UILabel *amount;

@end 
```

2.ViewController.m

```
#import "ViewController.h"
#import "SubView.h" 

@interface ViewController ()

@end

@implementation ViewController

@synthesize subView=_subView;
@synthesize amount;

- (void)viewDidLoad
{
    [super viewDidLoad];

    subView = [[SubView alloc]initWithFrame:CGRectMake(10, 10, 300, 600)];

    [self.view addSubview:subView];

    amount = [[UILabel alloc]initWithFrame:CGRectMake(400, 400, 100, 50)];
    amount.text = @"test in the main view";
    [self.view addSubview:amount];

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(400, 300, 40, 20);
    btn.backgroundColor = [UIColor clearColor];
    [btn addTarget:self action:@selector(labelChange:)    
    forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn]; // add a button in the main view
// Do any additional setup after loading the view, typically from a nib.
}

- (IBAction)labelChange:(id)sender{
    amount.text = @"defaul label";

    SubView *sv = [[SubView alloc]init];
    sv.addObject2.text = @"label in the subview";

    NSLog(@"sv.addObject2.text = %@",sv.addObject2);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

3.子视图.h

```
#import <UIKit/UIKit.h>

@interface SubView : UIView {

    UIButton *btn;
    UILabel *label;
}
//@property (strong, nonatomic) UIView *view;
@property (weak, nonatomic) UIButton *btn;
@property (weak, nonatomic) UILabel *label;

- (UIButton *)addObject1;
- (UILabel *)addObject2;

@end 
```

4.子视图.m

```
#import "SubView.h"
#import "ViewController.h"

@implementation SubView
@synthesize btn=_btn, label=_label;
//@synthesize view;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    //UIView *contentView = [[UIView alloc]initWithFrame:frame];

    self.backgroundColor = [UIColor blackColor];

    UIButton *object1 = [self addObject1];
    UILabel *object2 = [self addObject2];

    [self addSubview:object1];
    [self addSubview:object2];

    return self;
}

- (UIButton *)addObject1{
    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(10, 10, 100, 20);
    btn.backgroundColor = [UIColor clearColor];

    [btn addTarget:self action:@selector(labelChange:)     forControlEvents:UIControlEventTouchUpInside];

    return btn;
}

- (IBAction)labelChange:(id)sender{
    label.text = @"change the label in the subview";
    ViewController *vc = [[ViewController alloc]init];
    [vc.amount setText:@"change the label in the mainview"];

}    

- (UILabel *)addObject2{

    label = [[UILabel alloc]initWithFrame:CGRectMake(10, 50, 200, 50)];
    [label setText: @"default"];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont fontWithName:@"Arial" size:12];
    label.textColor = [UIColor whiteColor];

    return label;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:09:48.180

我认为你需要阅读《[Objective-C 编程语言》](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2)”并了解“对象”和“指针”的含义

这是代码

子视图.h

```
#import <UIKit/UIKit.h>

@interface SubView : UIView {

    UIButton *btn;
    UILabel *label;
}
@property (weak, nonatomic) UIViewController *vc;
@property (weak, nonatomic) UIButton *btn;
@property (weak, nonatomic) UILabel *label;

- (UIButton *)addObject1;
- (UILabel *)addObject2;

@end 
```

子视图.m

```
#import "SubView.h"
#import "ViewController.h"

@implementation SubView
@synthesize btn=_btn, label=_label;
@synthesize vc;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    self.backgroundColor = [UIColor blackColor];

    UIButton *object1 = [self addObject1];
    UILabel *object2 = [self addObject2];

    [self addSubview:object1];
    [self addSubview:object2];

    return self;
}

- (UIButton *)addObject1{
    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(10, 10, 100, 20);
    btn.backgroundColor = [UIColor clearColor];

    [btn addTarget:self action:@selector(labelChange:)     forControlEvents:UIControlEventTouchUpInside];

    return btn;
}

- (IBAction)labelChange:(id)sender{
    label.text = @"change the label in the subview";
    [vc.amount setText:@"change the label in the mainview"];
}    

- (UILabel *)addObject2{
    label = [[UILabel alloc]initWithFrame:CGRectMake(10, 50, 200, 50)];
    [label setText: @"default"];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont fontWithName:@"Arial" size:12];
    label.textColor = [UIColor whiteColor];

    return label;
}

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "SubView.h" 

@interface ViewController ()

@end

@implementation ViewController

@synthesize subView=_subView;
@synthesize amount;

- (void)viewDidLoad
{
    [super viewDidLoad];

    subView = [[SubView alloc]initWithFrame:CGRectMake(10, 10, 300, 600)];
    subView.vc = self;
    [self.view addSubview:subView];

    amount = [[UILabel alloc]initWithFrame:CGRectMake(400, 400, 100, 50)];
    amount.text = @"test in the main view";
    [self.view addSubview:amount];

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(400, 300, 40, 20);
    btn.backgroundColor = [UIColor clearColor];
    [btn addTarget:self action:@selector(labelChange:)    
    forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn]; // add a button in the main view
}

- (IBAction)labelChange:(id)sender{
    amount.text = @"defaul label";

    subview.addObject2.text = @"label in the subview";
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:54:02.303

我想我得到了你想要做的事情，这是你应该做的：

1- 创建 3 个新文件 (xib,m,h)，将它们命名为 SubView.xib,m,h。你必须确保它继承了 UIView。

2-在 xib 文件中绘制子视图元素并将 IBOutlets 与它挂钩。但请确保文件所有者是 ViewController 并且根视图类类型是“SubView”

3- 在 ViewController 中创建一个 Subview 类型的 IBOutlet

4-打开 SubView.xib 并将 SubView（对象树中的根节点）与您在步骤 3 中创建的文件所有者 IBOutlet 挂钩

要在 ViewController.m 中加载新的 SubView，只需调用这一行：在该行之后，ViewController 中的 IBOutlet 将具有 SubView 的对象。

```
[[NSBundle mainBundle] loadNibNamed:@"SubView" owner:self options:nil]; 
```

在上面的代码中 self 反映到 ViewController

# c - 如何在 Codeblocks10.05 中进入 C99 模式？

> ID：12152067
> 
> 赞同：6
> 
> 时间：2012-08-28T02:34:40.170
> 
> 标签：c, codeblocks, c99

我最近意识到收到编译错误后我什至不在 C99 模式下

> 'for' 循环初始声明只允许在 C99 模式下

我找到了一些关于如何通过快速搜索到达 C99 的建议，它告诉我去`Projects -> Properties...`但是唉，它是灰色的，我不确定这是否是修复它的正确方法（可能不可用，因为我的文件是不是一个项目，它是一个普通的源文件）。我还看到很多类似的问题说要启用 C99 模式，所以我查看了编译器标志菜单，但我看不到任何关于 C99 的信息。我尝试了其他一些标志，例如*在 C 模式下，支持所有 ISO C90 程序...*，但是在设置此标志之后，我得到的错误比以前更多，每当编译器在 main() 中找到注释时，似乎就会出现这些错误。

注意：请不要只说在 for 循环之外初始化计数器。

更新：在尝试使用 gcc 在代码块之外进行编译时，我尝试 `gcc -O2 -std=C99 filename.c`了，但收到了一个错误：

> 无法识别的命令行选项“-std=C99”

我使用 64 位 Windows 7、CodeBlocks10.05 和 GNU gcc。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T02:58:31.573

为了将来参考，输入不区分大小写的标志，但是`-std=c99`在`settings->compiler->other options`终端中编译时，该标志是区分大小写的。谢谢克里斯！

# macos - 如何在 mac 中使用“getopt”命令使 bash 处理长参数？

> ID：12152077
> 
> 赞同：24
> 
> 时间：2012-08-28T02:36:25.347
> 
> 标签：macos, bash, gnu

我想让我的 bash 脚本处理长参数。我找到`getopt`了，但 OS X 不支持它。谁能告诉我为什么`getopt`由 BSD 实现，而不是 GNU？我尝试`getopt`在 GNU C lib 中构建，但由于我对 Linux 的技能不佳而失败了。

有人做过这项工作吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-05-27T14:07:51.013

有一个[用于 getopt 的酿造瓶](http://brewformulas.org/Gnu-getopt)。

跑吧`brew install gnu-getopt`。

您可以指定它的路径，例如 `/usr/local/Cellar/gnu-getopt/1.1.6/bin/getopt`

或者使用`brew link --force gnu-getopt`所以它将被链接到`/usr/local/bin/`

请注意，强制链接可能会损坏您的系统（因为它用 gnu 替换了系统 getopt）。

另请参阅建议定义的其他答案`FLAGS_GETOPT_CMD`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-28T23:46:29.693

我建议使用 Homebrew 安装`gnu-getopt`，然后添加`$FLAGS_GETOPT_CMD`到您的`~/.bash_profile`文件中以指定 getopt 的 cmd 路径，指向 homebrew 位置，如下所示：

```
brew install gnu-getopt 
```

然后按照 brew 的说明添加到本地路径：

```
sudo echo 'export PATH="/usr/local/opt/gnu-getopt/bin:$PATH"' >> ~/.bash_profile 
```

然后你可以添加`FLAGS_GETOPT_CMD`：

```
sudo echo 'export FLAGS_GETOPT_CMD="$(brew --prefix gnu-getopt)/bin/getopt"' >> ~/.bash_profile 
```

打开一个新终端，或`. ~/.bash_profile`在现有终端中运行以加载更改

运行`echo $FLAGS_GETOPT_CMD`以确认它实际上是在您的控制台中设置的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T03:12:30.677

改用它通常是一个更好的主意`getopts`，并坚持使用短选项。[你可以在这个 StackOverflow Q&A](https://stackoverflow.com/q/402377/1072112)中看到 getopts 的作用。短选项在整个 OSX 命令行工具中更加标准，并且一致性是一件好事。

此外，getopts 内置在 bash 中，因此它绝对可以在 OSX 以及所有其他可以运行 bash 的平台中使用。

请注意，`getopt`在 OSX 中也有一个。在终端中，键入`man getopt`以查看其文档。它不支持长选项。这是在编写工具以在 OSX 上运行时不使用长选项的一个很好的理由。

如果你想这样做，你可以`getopt`从[macports](http://www.macports.org/ports.php?by=library&substr=getopt)安装。或者，如果您想要更好的可移植性，您可以滚动自己的长参数处理。

发布一些代码，我们将帮助调试它。

# java - 取消 SwingWorker 的问题

> ID：12152079
> 
> 赞同：2
> 
> 时间：2012-08-28T02:37:24.867
> 
> 标签：java, swing, backup, swingworker

我正在制作一个旨在作为备份的程序。我已经`SwingWorker`进行了备份并将其所做的事情发布到`JTextArea`. 我想要一个按钮来取消工人，（一次初始化的数量未知）所以这就是我调用摇摆工人的方法，以及取消方法：

```
package main;

import java.io.File;
import java.util.ArrayList;

import javax.swing.SwingWorker;

public class test2 {

SwingWorker bw;
static ArrayList bgWorker = new ArrayList();
ArrayList al = new ArrayList(); // this is the list of files selected
static boolean bwInitiallized = false;

public void startBackup() throws Exception {
    Panel.txtArea.append("Starting Backup...\n");

    for (int i = 0; i < al.size(); i++) {
        /**
         * THIS IS WHERE I NEED TO CREATE THE FOLDER THAT EACH BACKUP FILE
         * WILL GO INTO EX: SC2 GOES INTO A FOLDER CALLED SC2 AND RIOT GOES
         * TO RIOT, ALL WITHIN THE DIRECTORY CHOSEN
         */
        File file = new File((String) al.get(i));
        File directory = new File(dir); // dir is gotten by a JFileChooser.

        bw = new BackgroundWorker(Panel.txtArea, file, directory);
        bgWorker.add(bw);
        bwInitiallized = true;
        bw.execute();

        /**
         * follows to the bottom of the txtarea
         */
        int x;
        Panel.txtArea.selectAll();
        x = Panel.txtArea.getSelectionEnd();
        Panel.txtArea.select(1, x);
    }
}

public static void cancel() {
    BackgroundWorker bg;

    if (bwInitiallized) {
        bwInitiallized = false;
        Panel.txtArea.append("Cancelling...\n");
        for (int i = 0; i < bgWorker.size(); i++) {
            bg = (BackgroundWorker) bgWorker.get(i);
            bg.cancel(true);
        }
        Panel.txtArea.append("Canceled backUp!\n");
    } else {
        Panel.txtArea.append("Cannot Cancel! Not Initiallized!\n");
    }
}
} 
```

好吧，由于我无法弄清楚的原因，这并没有取消其中的任何一个（据我所知）。我唯一能想到的就是当我做的时候

```
bg = (BackgroundWorker) bgWorker.get(i);
bg.cancel(true); 
```

它没有做我认为它做的事情，但是 idk。我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:08:56.340

我会`class FileWorker extends SwingWorker<File, File>`为每个文件创建一个实例，并创建一个实例`class Supervisor extends SwingWorker<Queue<File>, File>`来管理它们，如本[示例](https://stackoverflow.com/a/11372932/230513)中所建议的那样。您可以允许用户取消个人`FileWorker`或让`Supervisor`他们全部取消。[此处](https://sites.google.com/site/drjohnbmatthews/randomdata)`cancel()`显示了一个使用示例。

在任何情况下，请使用适当的`SwingWorker`类型参数以确保安全，并按照@Hovercraft 评论中的建议严格检查您的设计。

# python - (python) RSS 提要排序算法（复杂性）

> ID：12152081
> 
> 赞同：0
> 
> 时间：2012-08-28T02:37:39.013
> 
> 标签：python, algorithm, rss, complexity-theory

今天上班有一个很简单的任务，就是拿一个rss feed，里面自然有入口元素，有些类似，不过更新日期比较晚。任务是将提要解析为唯一的条目元素列表，并根据更新日期获取类似条目元素中的最新条目元素，*强调文本*。我设计了一个算法，我*认为*它对于大型 rss 提要是最佳的，我想检查它并从这个组中获得 O 表示法：

所以我有一个函数可以执行 root.findall('entry') 并生成条目元素列表，所以......

```
def filter_entries(self,entries):
    d = dict()
    for entry in entries: # STEP 1
        job_link = self.get_job_link(entry) #helper function to extract href of link
        if job_link in d:
            d[job_link].append(entry)
        else:
            d[job_link] = [entry]
     for k,v in d.iteritems(): #STEP 2
         results.append(self.sort_entry_list(v)[0])

def sort_entry_list(self,entry_list): #STEP 3
    return sorted(entry_list,key=lambda entry: parser.parse(entry.find('updated').text), reverse=True) 
```

现在：我知道#STEP 1 的 O 是 O(n) 因为它是一个简单的列表迭代，那么 #STEP 2 的 O 也是 O(m) 其中 m 是 d 的大小，而 #STEP 的 O 3 是 O(s)，其中 s 是要由 sorted() 函数排序的相似条目元素的大小。

所以算法 = O(m) + O(n) + O(s) <-- 对吗？

那么我如何推导出这些 max 函数的总和呢？另外，当 rss 提要有 500,000 个条目时，是否有更好的方法来做到这一点？

在此先感谢您的帮助

山姆

# html - 附加到居中对齐内容块一侧的菜单块

> ID：12152086
> 
> 赞同：2
> 
> 时间：2012-08-28T02:38:04.110
> 
> 标签：html, css

我需要内容块居中对齐，而菜单块必须“附加”到内容块的左侧。因此，这些块之间的距离应该在浏览器窗口增大时保持不变。你能告诉我如何实现这个吗？:)

这里有一些我想实现的示例图片：
[浏览器窗口最大化](http://db.tt/puHEOz7N)
[浏览器窗口变小](http://db.tt/1n6SQpD7)
[浏览器窗口变小，出现滚动条](http://db.tt/neLmh7hS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:48:18.443

哎呀，我错过了“不断增加”位，更新了解决问题的示例。

这就是你要找的？

[http://jsfiddle.net/r8YQc/1/](http://jsfiddle.net/r8YQc/1/)

HTML：

```
<div id="header"></div>
<div id="content">
    <div id="menu"></div>
</div>
<div id="footer"></div>
​ 
```

CSS：

```
html,
body{
    margin:0;
    padding:0;
}

#header{
    margin:10px;
    background-color:orange;
    height:50px;
}

#content{
    position:relative; /*Create new offset context*/
    display:block;
    width:300px; /*Define width*/
    margin: 0 auto; /*center horizontally in available space*/
    height:400px;
    background-color:green;
}

#menu{
    background-color:lightgreen;
    position:absolute; /*Use left/right/top/bottom in relation to #content's offset context*/
    right:310px; /*move the right edge of the element 310px left*/
    width:100px;
    height:200px;
}

#footer{
    background-color: blue;
    margin: 10px;
    height: 50px;
} 
```

附言

如果您为 body 元素添加 540 像素的最小宽度（300 像素内容宽度 + 4 * 10 像素边距 + 左右 100 像素间距用于菜单和空白空间），则在调整太小时不会剪裁布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:44:22.087

我看不到你的照片......但你的描述似乎很明显：

**HTML**

```
<div id="contentBlock">
    <ul>
        <li>Item</li>
        <li>Item</li>
        <li>Item</li>
        <li>Item</li>
    </ul>
</div> 
```

**CSS**

```
#contentBlock {
    width: 500px;
    display: block;
    margin: 0 auto;
}

#contentBlock ul {
    /* You really don't need anything in here because it should be left aligned in the first place */
} 
```

但是，如果您希望您的文本和其他元素`contentBlock`环绕菜单，那么我建议使用以下 CSS 补救措施：

```
#contentBlock {
    width: 500px;
    display: block;
    margin: 0 auto;
    overflow: hidden; /* This is important, it clears a heights on the contentBlock and allows the creation of floated children to be taken out of the DOM */
}

#contentBlock ul {
    float: left;
    /* Again... the menu's text should by default be left-aligned here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:08:51.410

1 使您的网站居中布局...这样可以很好地查看每个分辨率，因为您的网站看起来不像垂直设计。

为了在图片中进行布局，您需要做

1、html

```
<div id="header_wrapper">
    <div id="header"></div>
</div>
 <div id="wrapper">
  <div id="menu"></div>
  <div id="content">

  </div>
</div>
<div id="footer"></div>
​ 
```

2、css为header_wrapper

```
 #header_wrapper{
   width:100%; //so you can set the background to the header 
 } 
```

3、css为表头

```
 #header{
   max-width:1200px; 
   min-width:1000px;
 } 
```

4，现在制作一个包含菜单和内容的包装器

内容的 css

```
 #wrapper{
  margin:0 auto; //make it on the center of the page
  width:1000px;
  display:block;
  } 
```

5 现在在包装器中添加菜单和内容

菜单的CSS

```
#menu{
 width:100px;
 height:200px;
 float:left;
} 
```

6、现在为内容

```
#content{
    width:300px; /*Define width*/
    float:left;
 } 
```

# javascript - 如何参数化 ajax TruClient 脚本中的值

> ID：12152089
> 
> 赞同：0
> 
> 时间：2012-08-28T02:38:18.583
> 
> 标签：javascript, ajax, loadrunner, truclient

这是场景 - 有一个搜索条件给我 100 个搜索结果（100 个链接）。我希望虚拟用户随机点击任何这些链接。你能帮我处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T23:25:03.753

答案取决于是否每个列表框元素都是有效选择。如果列表框的第一个元素是说明性的（“请选择...”等），则需要一段代码：

**选项 1：（**当出现“请选择”时）

在步骤的“参数”部分中，将 Ordinal 设置为：

```
var objectIndex = Math.floor((object.length-1)*Math.random())+2;
objectIndex; 
```

**选项 2：（**当“请选择”不存在时）

在步骤的“参数”部分中，将序数设置为“0”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:57:55.723

您的路径是通过将链接关联到一个数组中，在数组中选择一个随机偏移量，然后选择一个 web_url 以前往相关链接......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:23:15.327

查看函数的帮助

```
web_reg_save_param()
web_reg_save_param_ex() 
```

尤其是帮助中的“Ord=All”/“Ordinal=All”部分。

然后，当您将相关数据捕获到数组中时，您可以使用

```
lr_paramarr_random("TheArrayName"); 
```

从数组中获取随机值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T04:39:01.590

也许这对你有用？[http://h30499.www3.hp.com/t5/LoadRunner-Support-Forum/Ajax-True-Client-parameterization-problem/td-p/5607543#.UDxLONYaNN9](http://h30499.www3.hp.com/t5/LoadRunner-Support-Forum/Ajax-True-Client-parameterization-problem/td-p/5607543#.UDxLONYaNN9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T19:21:29.583

在运行时生成一个随机数并将该变量放入 Ord= 参数中。例如

```
a = Rand(1,100)
lr_save_param("{myrandval}",a);
Web_custome_request("",
"",
"",
"Ord={myrandval}",
LAST); 
```

# c# - c# 中的 TBlobField delphi 等效项

> ID：12152093
> 
> 赞同：1
> 
> 时间：2012-08-28T02:39:05.943
> 
> 标签：c#, oracle, delphi

是否有任何与 C# 中的 TBlobField(Delphi) 等效的关键字。虽然我们有 OracleLob，但我们不能将数据列直接转换为 OracleLob，因为

`OracleLob blob = (OracleLob)(dataTable["Column_Name"];`

抛出错误。而`.AsVariant`在 Delphi 的帮助下，它可以很容易地转换为 TBlobField，如下所示，

```
TBlobField(AcctNumberCDS.FieldByName('IMAGE_BLOB')); 
```

想知道是否有任何等价物可以帮助 TBlobField。

# windows-8 - CreateFile2 在 Windows 8 中返回访问被拒绝错误

> ID：12152096
> 
> 赞同：2
> 
> 时间：2012-08-28T02:39:18.877
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

我编写了以下代码行来打开 InstalledFolder 目录下的文件：

```
Platform::String^ locationPath = Platform::String::Concat(Package::Current->InstalledLocation->Path, "\\Assets\\Logo.png");

CREATEFILE2_EXTENDED_PARAMETERS extendedParams = {0};
extendedParams.dwSize = sizeof(CREATEFILE2_EXTENDED_PARAMETERS);
extendedParams.dwFileAttributes = FILE_ATTRIBUTE_NORMAL;
extendedParams.dwFileFlags = FILE_FLAG_SEQUENTIAL_SCAN;
extendedParams.dwSecurityQosFlags = SECURITY_ANONYMOUS;
extendedParams.lpSecurityAttributes = nullptr;
extendedParams.hTemplateFile = nullptr;

Wrappers::FileHandle file(
    CreateFile2(
        locationPath->Data(),
        GENERIC_READ,
        0,
        OPEN_EXISTING,
        &extendedParams
        )
    );

DWORD e = GetLastError();
if (file.Get() == INVALID_HANDLE_VALUE)
{
    throw ref new Platform::FailureException();
} 
```

CreateFile2 返回拒绝访问错误。谁能帮帮我？

正如 JP Alioto 所建议的那样，我尝试使用 WinRT File I/O，如下所示

```
 create_task(StorageFile::GetFileFromApplicationUriAsync(ref new Windows::Foundation::Uri("ms-appx:///Assets/Logo.png")))
    .then([=](StorageFile^ f)
    {
        auto p = create_task(f->OpenAsync(FileAccessMode::Read));
        p.wait();
    }); 
```

我仍然在 p.wait() 处收到以下错误：

> 将无效参数传递给认为无效参数致命的函数

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T05:43:06.177

你正在传递`0`. `dwShareMode`的文档[`CreateFile2`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449422%28v=vs.85%29.aspx)说这个值......

> 阻止其他进程在请求删除、读取或写入访问权限时打开文件或设备。仅当应用程序对文件具有写访问权限时，才授予对文件或目录的独占访问权限。

您没有对包中文件的写入权限，这就是您收到拒绝访问错误的原因。您需要将共享模式设置为`FILE_SHARE_READ`。

# jquery - jQuery 搜索 (:contains) 没有标点符号，不包括特定的类

> ID：12152098
> 
> 赞同：1
> 
> 时间：2012-08-28T02:39:23.770
> 
> 标签：jquery, search, contains

目前，我在 html 文件中的 div 中搜索，如果在其中找到结果，则删除 hideMe 类，以显示找到的赞美诗。我想知道我是否可以在没有标点符号的情况下搜索赞美诗（从输入和输出中删除标点符号），同时也从搜索中排除 info 类。

```
<div id="himnario">
   <div id="1" class="song hideMe">
      <div class="info">I don't want this info to be searched</div>
      <div class="tuneName">This tune should be searched</div>
      <ol>
         <li>Verse 1</li>
         <li>Verse 2</li>
      </ol>
   </div>
   <div id="2" class="song hideMe">...</div>
</div> 
```

我目前的搜索代码是：

```
$("#himnario div.song:Contains("+item+")").removeClass('hideMe').highlight(item);
isHighlighted = true; //check if highlighted later and unhighlight, for better performance 
```

（用“包含”扩展jquery如下）

```
return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0; 
```

另外，我正在使用[jquery 插件](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)来突出显示结果，所以我想这会使事情复杂化。如果需要，对于标点符号妨碍的那些地方，突出显示可能会失效。

当然，效率越高越好，因为这将成为移动应用程序的一部分......如果从搜索中删除信息类需要很多时间，我将不得不从文件中删除它，因为它不是绝对的基本的。

[我从这里](http://www.vbdotnetforums.com/windows-forms/32792-replace-comma-regex-replace.html)找到了以下代码可能会有所帮助，它应该去除无效字符，但不确定如何以我有限的编码能力将其正确地合并到自定义包含函数中。

```
Return Regex.Replace(strIn, "[^\w\.@-]", "") 
```

非常感谢您的帮助。

编辑：感谢@Nick，这是首选的解决方案：

```
$('#himnario').children().addClass('hideMe'); // hide all hymns
//http://stackoverflow.com/questions/12152098/jquery-search-contains-without-punctuation-excluding-specific-class
// Get rid of punctuation in your search item - this only allows alphanumeric
item2 = item.toUpperCase().replace(/<(.|\n)*?>|[^a-z0-9\s]/gi, ''); 
// Loop though each song
$('#himnario').children().each(function() {
    var $this_song = $(this);
    // Examine the song title & the ordered list, but not the hidden info (first child)
    $this_song.children('.tuneName, ol').each(function() {
        // Get the html, strip the punctuation and check if it contains the item
        if ($(this).html().toUpperCase().replace(/<(.|\n)*?>|[^a-z0-9\s]/gi, '').indexOf(item2) !== -1) {
            // If item is contained, change song class
            $this_song.removeClass('hideMe').highlight(item); //original search phrase
            isHighlighted = true; //check later, for better performance
            return false;   // Prevents examination of song lines if the title contains the item
        } 
    });            
}); 
```

高亮功能：

```
/*
highlight v3
Highlights arbitrary terms.
<http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html>
MIT license.
Johann Burkard
<http://johannburkard.de>
<mailto:jb@eaio.com>
*/
jQuery.fn.highlight = function(pat) {
 function innerHighlight(node, pat) {
  var skip = 0;
  if (node.nodeType == 3) {
   var pos = node.data.toUpperCase().indexOf(pat);
   if (pos >= 0) {
    var spannode = document.createElement('span');
    spannode.className = 'highlight';
    var middlebit = node.splitText(pos);
    var endbit = middlebit.splitText(pat.length);
    var middleclone = middlebit.cloneNode(true);
    spannode.appendChild(middleclone);
    middlebit.parentNode.replaceChild(spannode, middlebit);
    skip = 1;
   }
  }
  else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {
   for (var i = 0; i < node.childNodes.length; ++i) {
    i += innerHighlight(node.childNodes[i], pat);
   }
  }
  return skip;
 }
 return this.each(function() {
  innerHighlight(this, pat.toUpperCase());
 });
};

jQuery.fn.removeHighlight = function() {
 return this.find("span.highlight").each(function() {
  this.parentNode.firstChild.nodeName;
  with (this.parentNode) {
   replaceChild(this.firstChild, this);
   normalize();
  }
 }).end();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:56:32.357

为什么不直接使用 Javascript 来完成此任务？一个简单的正则表达式应该可以解决问题：

```
str.replace(/[^a-z0-9\s]/gi, '') 
```

这将接受一个字符串`str`并删除任何不是数字或字母（字母数字）的字符。如果我是你，我不会覆盖原始 HTML（当然，除非那是重点），而是我会将 HTML 的值存储在一个字符串中`str`，然后在那里执行你讨厌的正则表达式。这样，原始 HTML 将保持完整，如果您愿意，您仍然可以使用和输出新字符串。真的不需要 jQuery，`:contains`只会[减慢你的速度](http://24ways.org/2011/your-jquery-now-with-less-suck)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:10:51.657

如果你直接通过它的 id 找到一个元素，然后从那里过滤，那么 jQuery 工作得最快。所以，我假设你的 HTML 是这样的：

```
<div id="himnario">
    <div id="1" class="song hideMe">
        <div class="info">Hidden text</div>
        <div class="tuneName">Search me!</div>
        <ol>
            <li>Verse 1</li> 
            <li>Verse 2</li>
        </ol>
    </div>
    <div id="2" class="song hideMe">
        ...
    </div>
</div> 
```

要最有效地查找歌曲，请执行以下操作：

```
$('#himnario').children()... 
```

注意：`children()`比`find()`只搜索一层深度要好得多。`.song`如果只有儿童歌曲，不指定会加快速度。如果是这样，你已经走得更快了。

一旦你有了孩子，你可以使用`each()`这不是绝对最快的方法，但没关系。所以这会检查每首歌曲/孩子：

```
$('#himnario').children().each(function(index) {...}); 
```

对于您的情况：

```
// Get rid of punctuation in you search item - this only allows alphanumeric
item = item.replace(/[\W]/gi, '');

// Loop though each song
$('#himnario').children().each(function() {
    var $this_song = $(this);

    // Loop through each line in this song [EDIT: this doesn't account for the title]
    $this_song.find('li').each(function() {

        // Get the html from the line, strip the punctuation and check if it contains the item
        if $(this).html().replace(/[\W]/gi, '').indexOf(item) !== -1 {
            // If item is contained, change song class
            $this_song.removeClass('hideMe');
            return false;   // Stops each_line loop once found one instance of item
        } 
    }            
}); 
```

我没有对突出显示做任何事情。我也没有对此进行测试，但是一旦发现任何小错误，它应该可以正常工作:)

编辑：根据您的“歌曲标题”字段，您可以执行以下操作：

```
// Get rid of punctuation in you search item - this only allows alphanumeric
item = item.replace(/[\W]/gi, '');

// Loop though each song
$('#himnario').children().each(function() {
    var $this_song = $(this);

    // Examine the song title & the ordered list, but not the hidden info (first child)
    $this_song.children().not(':first').each(function() {

        // Get the html, strip the punctuation and check if it contains the item
        if $(this).html().replace(/[\W]/gi, '').indexOf(item) !== -1 {
            // If item is contained, change song class
            $this_song.removeClass('hideMe');
            return false;   // Prevents examination of song lines if the title contains the item
        } 
    }            
}); 
```

这个版本应该比循环遍历每一行更快。另请注意，我已从调用中删除了`index`and `index2`vars，`.each`因为您不使用它们。

# javascript - 在 Bootstrap 模式窗口中打开远程内容

> ID：12152101
> 
> 赞同：21
> 
> 时间：2012-08-28T02:39:57.953
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我所需要的只是一个简单的示例，说明如何在 Twitter Bootstrap 模式窗口中打开远程内容。

我正在使用 Bootstrap v2.0.4，但我无法让它工作。我可以打开常规模式窗口，但我不能让它打开其中的远程文件。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T15:15:33.103

首先，远程数据必须满足同源策略。如果您对此不满意，那么之后的一切都会失败（如果您尝试加载外部 URL，请参阅[Twitter Bootstrap external URL's not working](https://stackoverflow.com/a/12153741/570918)）。

有两种方法可以使用 Bootstrap 数据 API 将远程内容加载到模态中。即指定要加载到`<a>`触发模式的元素中的远程 url 或在模式的标记中指定 url。

在前者中，使用**href**属性：

```
<a data-target="#myModal" href="/remote/url" role="button" class="btn" data-toggle="modal">Launch demo modal</a> 
```

在后者中，使用**data-remote**属性：

```
<div class="modal fade hide" id="myModal" data-remote="/remote/url">...</div> 
```

在元素中指定它的好处`<a>`是每个可以有不同的远程 url `<a>`，但仍然只使用一个模式。在您有多种方式启动具有相同内容的模式的情况下，使用**data-remote**属性可能更有利。然后，无论什么启动它（甚至是 JS 调用），它都会始终如一地提供相同的远程内容，而不必在所有调用方法中复制该信息。

这是使用后一种方法的演示：

### [JSFiddle](http://jsfiddle.net/mmfansler/cp67J/)

modal 正文中的内容是远程 html。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T18:57:04.940

我在 JSFiddle 上放置了一个工作示例，该示例说明了如何使用链接打开包含远程 URL（同源）的引导模式。它几乎是来自[twitter 的引导文档的](http://twitter.github.com/bootstrap/javascript.html#modals)逐字复制粘贴，稍作修改以使其适用于远程 URL。

它只是归结为将**href**属性指向您要打开的 URL 和用作模式窗口的 DIV 处的**data-target属性。**

[JSFI在这里闲逛](http://jsfiddle.net/matt_hwy1/hRq82/1/)

这里的代码相同：

```
<!-- Button to trigger modal -->
<a href="/matt_hwy1/uEQEP/4/show/" data-target="#myModal" data-toggle="modal">Launch demo modal</a>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal Test Header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>​ 
```

# java - 循环比较两个列表的所有对象

> ID：12152103
> 
> 赞同：1
> 
> 时间：2012-08-28T02:40:05.237
> 
> 标签：java, android, json, db4o

我收到两个对象的列表，我应该比较所有对象......

为此，我一直在使用下一个循环：

```
 for (int i=0;it2.hasNext();i++ ) {
           objetoDb4o=it2.next();
           tratdb4o=(Tratam)objetoDb4o;
             for (int j=0;it.hasNext();j++ ) {
                    objetoJson = it.next();
                    tratJson = (Tratam)objetoJson;

            }
        } 
```

it 和 it2 是迭代器.. size 的值是正确的（4 和 4）

但是循环不起作用..第一个 for 只迭代一次，第二个 for 迭代三次。

我找不到错误！你能帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:45:14.133

您需要`it`在进入内循环之前重置迭代器，否则在外循环的第一次迭代期间您将只通过第二个列表一次；剩余的迭代将停止在`it.hasNext()`，完全跳过内部循环。

# javascript - 动态速度计 javascript 或 jquery 插件

> ID：12152105
> 
> 赞同：2
> 
> 时间：2012-08-28T02:40:10.800
> 
> 标签：javascript, jquery, ajax, jquery-plugins

![在此处输入图像描述](../Images/aa3ab1555243255918710127fcbc83e2.png)

我想要**动态 ajax 插件**在页面上显示速度计。
一个想法是我设置背景并旋转针。
有人知道相关插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:12:22.543

这里有一些供您参考

[http://bernii.github.com/gauge.js/](http://bernii.github.com/gauge.js/)

[https://github.com/vjt/canvas-speedometer](https://github.com/vjt/canvas-speedometer)

还有更多关于[绘制半规/速度计（需要 JavaScript Canvas 或 Java Swing 示例）](https://stackoverflow.com/questions/5083221/drawing-a-half-gauge-speedometer-javascript-canvas-or-java-swing-example-needed)

# gwt - Jboss Errai 和自己的 Google Guice 模块

> ID：12152108
> 
> 赞同：1
> 
> 时间：2012-08-28T02:40:41.033
> 
> 标签：gwt, guice, errai

有谁知道如何将 Jboss Errai 项目包含到已经使用 Google Guice 的项目中？

Errai 文档说它在内部使用 Guice，但是我需要我的 Guice 模块识别 Errai 模块。

我收到此错误：

```
No implementation for org.jboss.errai.bus.client.framework.RequestDispatcher was bound. 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:16:48.523

Errai 确实支持使用 Guice 作为将服务连接到服务器上的一种方式。但是 Errai 并*没有*在客户端上使用 Gin。它使用自己的 IOC 容器：Errai IOC。

# perl - perl 通过骆驼书中的代码点示例创建字符

> ID：12152109
> 
> 赞同：1
> 
> 时间：2012-08-28T02:40:48.363
> 
> 标签：perl, utf-8

我有一个相当基本的问题。

我正在阅读骆驼书第 6 版。在第 2 章标量数据中，一个示例代码是这样的：

```
$alef = chr (0x05d0); 
```

我尝试使用以下内容打印它，但它打印了空白行。

```
#! /usr/bin/perl
use warnings;
use utf8;
binmode(STDOUT, ":utf8");
#use open qw/:std :utf8/;

$alef = chr(0x05D0);
print $alef;

$alpha = chr(hex('03B1'));
print $alpha;

$omega = chr(0x03C9);
print $omega; 
```

然后我检查了 UTF-8 的文档，虽然没有 05D0，但有一个 005D，它会给我一个右方括号“]”。

我的问题是：我是否错过了导致空白行的内容，或者它只是出版商/作者的一种类型？

并且 alpha 和 omega 作品会发现它是否不适合 alef。:)

谢谢戴维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:59:20.250

*这与UTF-8*无关。这些是*Unicode*字符。

[U+05D0](http://www.fileformat.info/info/unicode/char/5d0/index.htm) : א

[U+03B1](http://www.fileformat.info/info/unicode/char/3b1/index.htm) : α

[U+03C9](http://www.fileformat.info/info/unicode/char/3c9/index.htm) : ω

如果你有空行，你的字体可能没有这些字符的字形。

# python - ViM-LaTeX、python 和 Mac OS 10.8.1 和一个奇怪的错误

> ID：12152113
> 
> 赞同：2
> 
> 时间：2012-08-28T02:41:52.803
> 
> 标签：python, macos, vim, latex

我刚刚将我的机器更新为 Mountain Lion (10.8.1) 并尝试安装 vim-latex。我已经每天使用该套件大约 5 年了，但是在尝试进行全新安装并打开 .tex 文件时，我收到以下错误消息。

```
"UnitCircleAnalysis.tex" 118L, 4154CTraceback (most recent call last):
   File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 565,
in File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 547,
in main File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 278,
in addusersitepackages File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 253,
in getusersitepackages File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site.py", line 243,
in getuserbase File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 523,
in get_config_var File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 419,
in get_config_vars File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/sysconfig.py", line 298,
in _init_posix IOError: invalid Python installation: unable to open /usr/include/python2.7/pyconfig.h (No such file or directory) 
```

这似乎是 Python 实现的问题。有什么建议可以解决这个问题吗？

# android - 如何从 Android NDK 或 Cocos2dx 发送短信

> ID：12152117
> 
> 赞同：1
> 
> 时间：2012-08-28T02:42:20.347
> 
> 标签：android, android-ndk, cocos2d-x

我想从cocos2d-x引擎发送短信。如果这个引擎不能发送短信，Android NDK支持吗？任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:27:20.067

没有任何用于发送 SMS 消息的本机 C 功能，但您始终可以使用 JNI 访问[SMSManager](http://developer.android.com/reference/android/telephony/SmsManager.html)。

# c# - 通用方法如何返回所有类型 T

> ID：12152120
> 
> 赞同：2
> 
> 时间：2012-08-28T02:43:15.223
> 
> 标签：c#, generics

说我有以下代码：

```
public class Pond
{
  public List<Frog> Frogs { get; set; }
  public List<MudSkipper> MudSkippers { get; set; }
  public List<Eel> Eels { get; set; }
}

public class Frog: IAquaticLife
{

}

public class MudSkipper: IAquaticLife
{

}

public class Eel: IAquaticLife
{

} 
```

现在我想编写一个通用方法，该方法将为某个池塘返回这些类型的列表：

```
public IEnumerable<T> GetByPond<T>(int pondId) where T : IAquaticLife
{
   return Uow.GetByID<Pond>(pondId).Eels;
} 
```

好的，所以我在那里的东西将返回那个池塘里的所有鳗鱼。我想做的是归还所有的T。

所以如果我打电话`GetByPond<MudSkipper>(1)`，那将返回所有的弹涂鱼。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:51:29.760

像这样的东西怎么样

```
public IEnumerable<T> GetByPond<T>(int pondId) where T : IAquaticLife
{
   return from t in Uow.GetByID<Pond>(pondId).AquaticLife() 
          where (typeof(t) == typeof(T)) select t;
} 
```

或者简单地说（使用@DStanley 在更改答案之前指出的方法）

```
public IEnumerable<T> GetByPond<T>(int pondId) where T : IAquaticLife
{
   return Uow.GetByID<Pond>(pondId).AquaticLife().OfType<T>();
} 
```

这需要*Uow.GetByID(int id)*返回特定池塘中实现*IAquaticLife*的所有类型的生物。*但是，另一种方法是您将IAquaticLife*的各种实现者的知识硬编码到您的通用方法中。这不是一个好主意。

**更新**

目前，*Pond*具有*Eels*、*Mudskippers*等单独的集合。如果您想随着代码的发展添加更多实现*IAquaticLife*的东西，这将变得脆弱，因为您必须同时更改*Pond*和上面的通用方法。

我建议不要为每种类型的水生生物使用单独的方法，而是使用一个方法来返回池塘中实现*IAquaticLife*的所有内容，例如

```
public class Pond
{
    public IEnumerable<IAquaticLife> AquaticLife() { ... }
} 
```

我已经用这个假设更新了我上面的代码。

任何拥有 Pond 实例并想获得例如 Eels 的人都可以这样做：

```
var eels = pond.AquaticLife().OfType<Eels>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T02:52:46.393

~~试试这个：~~

 ~~```
return Uow.GetByID<Pond>(pondId).OfType<T>(); 
```~~  ~~**编辑**

由于您将集合放在单独的属性中，因此您可以使用`switch`块根据类型返回正确的属性，或者使用反射来根据类型名称获取属性。

根据您的要求，更好的设计是拥有一个`List<IAquaticLife>`可以存储所有小动物而不是单独属性的私有，但我假设您现在不能这样做。

开关的一个例子是：

```
public IEnumerable<T> GetByPond<T>(int pondId) where T : IAquaticLife
{
    switch(typeof(T))
    {
        case typeof(Eel):
            return Uow.GetByID<Pond>(pondId).Eels;
        //etc.
        default:
            throw new ApplicationException(string.Format("No property of type {0} found",typeof(T).Name));
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T04:52:32.953

```
public Pond GetByPond(int pondId)
{
    return Uow.GetByID<Pond>(pondId);
} 
```

如果您想要 Frogs，请执行以下操作：

```
var frogs = xxx.GetByPond(1).Frogs; 
```

如果您想要 MudSkippers，请执行以下操作：

```
var mudSkippers = xxx.GetByPond(1).MudSkippers; 
```

等等。

如果你可以打电话`GetByPond<Frog>(1)`，你可以打电话`GetByPond(1).Frogs`。

如果在任何情况下您都不知道`T`，则需要创建所有这些的集合并按类型过滤它们。如果您有中间子类型，这也很有用：

```
public IEnumerable<T> GetByPond<T>(int pondId) where T : IAquaticLife
{
    var pond = Uow.GetByID<Pond>(pondId);
    var life = pond.Frogs.Union(pond.Eels).Union(pond.MudSkippers);
    return life.OfType<T>();
} 
```

但是您连接集合只是为了过滤它们。~~

# mysql - 具有多字段键的“重复键更新”

> ID：12152125
> 
> 赞同：0
> 
> 时间：2012-08-28T02:43:49.427
> 
> 标签：mysql, unique-constraint

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)：

> 如果 [columns `a`and `b`are] 是唯一的，`INSERT`则等效于以下`UPDATE`语句：
> 
> ```
> UPDATE table SET c=c+1 WHERE a=1 OR b=2 LIMIT 1; 
> ```
> 
> 如果`a=1 OR b=2`匹配多行，则仅更新一行。通常，您应该尽量避免`ON DUPLICATE KEY UPDATE`在具有多个唯一索引的表上使用子句。

这很公平，但如果我有这个作为唯一的关​​键：

```
PRIMARY KEY (`a`,`b`) 
```

由于重复键同时依赖于两个字段，更新是否会可靠地影响发生重复的特定行，或者它是否与字段单独唯一一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:56:31.980

假设您使用与示例中相同的查询，它不会可靠地使用重复键更新行。它仍然会在数据顺序中找到具有任一匹配值的第一行。考虑下面的例子。

```
 a | b
1\. 1 | 1
2\. 1 | 2
3\. 1 | 3
4\. 1 | 4
5\. 2 | 1
6\. 2 | 2 
```

该查询`UPDATE table SET c=c+1 WHERE a=1 OR b=2 LIMIT 1;`将更新第一行，而不是所需的第二行。因此，简而言之，就好像列是单独的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:12:25.367

如果 on duplicate 涉及一个列女巫被定义为唯一或主键，或者在唯一键或主键中定义的相同列集，则 insert ... on duplicate update ... 语句将更新所有列所在的行此 PK 或唯一键具有相同的值。

要回答您对 G-Nugget 答案的评论，只会更新第 2 行。

希望有帮助;-)

# c - 为什么低优先级运算符首先执行？

> ID：12152143
> 
> 赞同：0
> 
> 时间：2012-08-28T02:45:31.647
> 
> 标签：c, operator-precedence

> **可能重复：**
> [运算符优先级问题](https://stackoverflow.com/questions/7212482/problem-with-operator-precedence)

我们知道前缀的[优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)大于“逻辑与”（`&&`），“逻辑与”的优先级大于“逻辑或”（`||`）。

[下面的程序](http://ideone.com/DG22i)似乎违反了它：

```
int main()

{
    int i=-3,j=2,k=0,m;
    m=++i||++j&&++k;
    printf("%d %d %d %d",i,j,k,m);
    return 0;
} 
```

如果优先级`++`大于`&&`，`||`则所有前缀都应首先执行。在此之后`i=-2,j=3,k=1`，然后`&&`将首先执行。为什么输出显示：`-2 2 0 1`？

该程序的行为在 ubuntu v12.04 上也是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:49:00.440

和运算`&&`符`||`是“短路”的。也就是说，如果左边的值为 FALSE`&&`或 TRUE，`||`则不执行右边的表达式（因为不需要确定整个表达式的值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:03:49.860

这是正确的，因为短路定义。

```
m = ++i||++j&&++k 
```

首先，左侧部分 ++i 始终为 TRUE，所以现在 i 为 -2 并且它不执行表达式的右侧部分，j,k 的值不会改变。

# python - 删除文档中的 TAGS

> ID：12152144
> 
> 赞同：1
> 
> 时间：2012-08-28T02:45:34.947
> 
> 标签：python, regex

我需要找到 .txt 格式的所有标签（SEC 文件）并从文件中删除。

好吧，作为Python的初学者，我使用以下代码查找标签，但它返回None，None，......并且我不知道如何删除所有标签。我的问题是如何找到所有标签 <....> 并删除所有标签，以便文档包含除标签之外的所有内容。

```
import re
tags = [re.search(r'<.+>', line) for line in mylist]
#mylist is the filename opened by open(filename, 'rU').readlines() 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:58:32.033

```
re.sub(r'<.*?>', '', line) 
```

使用[`re.sub`](http://docs.python.org/library/re.html#re.sub)与`<.*?>`表达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:58:34.683

使用这样的东西：

```
re.sub(r'<[^>]+>', '', open(filename, 'r').read()) 
```

您当前的代码正在`None`为不包含尖括号标签的每一行获取一个。

您可能希望使用`[^>]`它来确保它只匹配第一个 >。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:03:45.610

好吧，对于初学者来说，您将需要一个不同的正则表达式。您拥有的将选择第一个'<'和最后一个'>'之间的所有内容所以字符串：

```
I can type in <b>BOLD</b> 
```

将呈现匹配：

**大胆的**

解决这个问题的方法是使用惰性操作符[这个网站](http://www.regular-expressions.info/repeat.html)很好地解释了为什么你应该使用

<.+?>

匹配 HTML 标签。最终，你应该替换，所以：

re.sub(r'', '', 行)

不过，我怀疑您实际上想要匹配的是标签之间的内容。在这里，一个好的前瞻可以创造奇迹！

(?<=>).+?(?=<)

看起来很疯狂，但它很容易崩溃。让我们从你所知道的开始：

```
.+? 
```

匹配任意长度的字符串。? 意味着它将匹配可能的最短字符串。（我们之前添加的懒惰）

```
(<?=...) 
```

是一个回顾。它从字面上看自己身后而没有捕捉到表情。

```
(?=...) 
```

是前瞻。这与后视相同。然后用一点findall：

```
re.findall(r'(?<=>).+?(?=<)', line); 
```

现在，您可以遍历数组并修剪掉留下的不必要的空间，并获得一些非常好的输出！或者，如果您真的想使用替代方法（我知道我会的）：

```
re.sub(r'\s*(?:</+?>\s*)+', ' ', line) 
```

这

```
\s* 
```

将匹配附加到标签的任意数量的空格，然后您可以将其替换为一个空格，从而减少那些通常由于过度仔细标记而导致的令人不安的双倍和三倍空格。作为奖励，

```
(?: ... ) 
```

被称为非捕获组（它不会在结果中为您提供较小的子匹配）。在这种情况下，出于您的目的，这并不是真正必要的，但是考虑组总是有用的东西，并且只捕获您需要的那些是一种很好的做法。在其末尾添加一个 + （就像我所做的那样），将捕获尽可能多的标签，因为它们彼此相邻，将它们消除到一个空间中。所以如果文件有

```
This is <b> <i> overemphasized </b> </i>! 
```

你会得到

```
This is overemphasized ! 
```

代替

```
This is   overemphasized  ! 
```

# php - TinyMVC 总是显示“默认”控制器

> ID：12152145
> 
> 赞同：0
> 
> 时间：2012-08-28T02:46:12.520
> 
> 标签：php, frameworks

我一直在关注文档，用 smarty 测试了一个 html 模板，然后将其剪切。然后我发现控制器没有按预期工作——无论我创建什么名称`myapp/conrollers`，`'hello.php'`例如，包含文档中描述的类，即

```
class Hello_Controller extends TinyMVC_Controller
{
  function index()
  {
    echo "Hello World.";
  }
  function time()
  {
    echo "The time is now.";
  }
} 
```

我无法展示它。所以文件名是控制器类名的前缀，这里似乎一切正常，但是转到 /index.php/hello 会返回`'default.php'`. 我什至尝试通过设置将 myapp/configs/application.php 中的默认控制器更改为“hello” `$config['default_controller']`，但框架的行为就像它始终与“default.php”一起工作一样。屏幕或日志中没有错误（我检查了我的网络服务器和解释器的配置中的每个选项两次），我完全不知道如何处理那个该死的废话，我什至不能在它的论坛上写因为等了几天的'行政审批'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:12:46.773

我不得不深入框架内部寻找答案。当它检查控制器文件时，它使用不尊重包含路径的 file_exists()。谷歌搜索“TinyMVC+file_exists”给了我指向[该主题](http://www.tinymvc.com/f/index.php?topic=382.0)的链接，那里写着他们已经在 SVN 版本中修复了它。

# scala - 包命名结构

> ID：12152149
> 
> 赞同：3
> 
> 时间：2012-08-28T02:46:54.337
> 
> 标签：scala

这个包命名结构在 Scala 文件中完成了什么？

```
package myco.group.component
package foo
package bar 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T03:26:13.990

它与以下内容相同：

```
package myco.group.component.foo.bar

import mco.group.component._
import mco.group.component.foo._
import mco.group.component.foo.bar._ 
```

也一样：

```
package myco.group.component {
    package foo {
        package bar {
        ...
        }
    }
} 
```

# python - 有效替换单词列表的出现

> ID：12152150
> 
> 赞同：-1
> 
> 时间：2012-08-28T02:47:07.120
> 
> 标签：python, string, performance, algorithm, data-structures

我需要审查所有出现的带有 * 的单词列表。我的列表中有大约 400 个单词，它会受到大量流量的影响，所以我想让它变得非常高效。什么是有效的算法/数据结构来做到这一点？最好是已经在 Python 中的东西。

例子：

1.  “小便” => “**** 关闭”
2.  “你好” => “你好”
3.  “去地狱” => “去地狱”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:02:12.227

不区分大小写的[trie](http://en.wikipedia.org/wiki/Trie)支持的集合实现可能符合要求。对于每个单词，您只会处理最少的字符。例如，您只需处理单词“zoo”的第一个字母，就可以知道该单词不在您的列表中（假设您没有“z”脏话）。

然而，这是没有与 python 打包的东西。您可能会从简单的字典解决方案中观察到更好的性能，因为它是用 C 实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:25:16.250

就像chechen 提到的那样，a`Trie`可能是您需要的东西，实际上，您应该使用[Aho–Corasick 字符串匹配算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。比尝试更多的东西。

对于每个字符串，假设`S`您需要处理，时间复杂度大约为`O(len(S))`. 我的意思是，线性

并且您最初需要构建自动机，它的时间复杂度是`O(sigma(len(words)))`，而空间复杂度大约是（不太总是）`O(52*sigma(len(words)))`这里**52**表示字母的大小（我认为它是`['a'..'z', 'A'..'Z']`）。您只需执行一次（或每次系统启动时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:04:32.827

您可能希望针对其他人对基于正则表达式的解决方案进行计时。我之前使用过类似的基于正则表达式的文本替换一到三千个单词来将短语更改为链接，但我没有将这些页面提供给很多人。

我取出一组单词（可能是短语），并从中形成一个正则表达式，由于'\b'，它将匹配它们在文本中作为一个完整单词的出现。

如果您有字典将单词映射到其净化版本，那么您可以使用它。为了方便起见，我只是用“*”交换每个奇怪的字母。

sanitizer 函数只返回任何匹配的脏话的净化版本，并在文本的正则表达式替换调用中使用以返回净化版本。

```
import re
swearwords = set("Holy Cow".split())
swear = re.compile(r'\b(%s)\b' % '|'.join(sorted(swearwords, key=lambda w: (-len(w), w))))
sanitized = {sw:''.join((ch if not i % 2 else '*' for i,ch in enumerate(sw))) for sw in swearwords}

def sanitizer(matchobj):
    return sanitized.get(matchobj.group(1), '????')

txt = 'twat prick Holy Cow ... hell hello shitter bonk'
swear.sub(sanitizer, txt)
# Out[1]: 'twat prick H*l* C*w ... hell hello shitter bonk' 
```

您可能希望使用 re.subn 和 count 参数来限制完成的替换次数，如果它有太多亵渎的话，就拒绝整个文本：

```
maxswear = 2
newtxt, scount = swear.subn(sanitizer, txt, count=maxswear)
if scount >= maxswear: newtxt = 'Ouch my ears hurt. Please tone it down' 
print(newtxt)
# 'Ouch my ears hurt. Please tone it down' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T03:44:12.243

(1) 令 P 为要审查的短语集。

(2) 预计算 H = {h(w) | p in P, w 是 p} 中的一个词，其中 h 是一个明智的散列函数。

(3)对于输入的每个单词v，测试h(v)是否在H中。

(4) 如果 h(v) 不在 H 中，则发出 v。

(5) 如果 h(v) 在 H 中，则退回到任何简单的方法，该方法将检查 v 和后面的单词是否在 P 中形成一个短语。

步骤（5）不是问题，因为我们假设 P 与输入量相比（非常）小。步骤 (3) 是 O(1) 操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T03:09:22.843

如果性能是您想要的，我建议：

*   获取输入样本
*   计算每行被删词的平均数量
*   定义每行过滤的最大单词数（例如 3 个）
*   计算样本中哪些被删减的词命中率最高
*   编写一个给定审查词的函数，将生成一个带有 IF 语句的 python 文件来检查每个词，将“最热门”的词放在第一位，因为你只想匹配整个词，这将相当简单
*   一旦达到每行的最大数量，退出函数

**我知道这不好**，我只是建议这种方法，因为流量很大，对列表中的每个单词进行循环将对性能产生巨大的负面影响。

希望对您有所帮助或至少给您一些关于如何解决问题的开箱即用的想法。

# java - 在UTC中找出用户机器上的本地时间？

> ID：12152151
> 
> 赞同：0
> 
> 时间：2012-08-28T02:48:01.797
> 
> 标签：java, android

我需要在用户的手机上设置闹钟。这是一个 android 函数，警报需要时间以 System.currentTimeMillis() 格式触发。我想在用户的手机上设置晚上 7 点的闹钟，但我不知道用户将手机设置为哪个时区。

如何确定当天晚上 7 点的等效时间是 UTC (currentTimeMillis()) ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:21:11.780

```
Calendar cal = Calendar.getInstance(); // returns current time in user's default TimeZone
cal.set(Calendar.MILLISECOND, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.HOUR_OF_DAY, 19);
long time = cal.getTime().getTime(); 
```

# opengl - 将 OpenGL 纹理转换为 OpenCV Mat

> ID：12152156
> 
> 赞同：5
> 
> 时间：2012-08-28T02:48:43.227
> 
> 标签：opengl, opencv, typeconverter

有没有办法将 OpenGL 的`GLuint texture`类型转换为 OpenCV 的`cv::Mat`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:03:03.317

您可能想看看[这个问题](https://stackoverflow.com/q/9097756/743214)，它询问关于从转换`glReadPixels`为 a的问题，这与使用而不是`cv::Mat`时完全相同的问题。[`glGetTexImage`](http://www.opengl.org/sdk/docs/man/xhtml/glGetTexImage.xml)`glReadPixels`

[我](https://stackoverflow.com/a/9098883/743214)对这个问题的回答解释了如何将纹理数据直接读入`cv::Mat`'s 存储中，其中包含所有可能的缺陷（如填充、颜色排序等）。

# java - 各种 WSDL 到客户端存根代码生成器之间的区别？

> ID：12152163
> 
> 赞同：0
> 
> 时间：2012-08-28T02:49:21.327
> 
> 标签：java, wsdl, cxf, axis2, webservice-client

客户端存根代码生成器的不同 WSDL 及其区别是什么？如果我需要将复杂的 WSDL 转换为代码，哪个更好？所谓复杂，我的意思是 WSDL 具有各种约束，例如最小和最大长度/值、最小和最大出现次数。

到目前为止，我知道 Google 和 StackOverflow 有 3 个工具可以完成这项工作：`Axis2`、`CXF`和. 我只能测试 Axis2。我没有使用 CXF 和 IBM Rational 的经验。上述工具有什么区别？有没有其他好的工具可以推荐？`Eclipse WTP``IBM Rational`

我之前尝试使用 Axis2 从 WSDL 生成服务器存根，但没有生成一个 Web 服务方法，因此我停止使用 Axis2，认为 Axis2 的代码生成可能存在限制。Axis2 的代码生成是否有限制？我之前尝试过的是服务器存根。现在，我需要生成一个客户端存根。

请注意，我们使用的是 JDK 1.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:32:21.370

Eclipse WTP 只是调用 Axis 2 或 CXF，具体取决于您需要/已经安装。

CXF 的代码生成器与 JAX-WS（和 wsimport 命令）完全兼容，而且在 Java 5 上也能正常运行。通过使用 CXF，您现在当然可以在 Java 5 上运行，如果/当您迁移到 Java 6 时，您就可以那时决定转向 JDK 中的 JAX-WS impl 还是坚持使用 CXF。你会有这样的选择。使用轴 2，您将被轴 2 卡住。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:16:22.283

您没有偶然发现 jdk 中的默认 JAX-WS 实现（基于[metro](http://metro.java.net/guide/)）？

# regex - C 样式（单行）注释上的 Sed 替换

> ID：12152165
> 
> 赞同：0
> 
> 时间：2012-08-28T02:49:39.740
> 
> 标签：regex, sed

我有点困惑为什么这不起作用。我正在尝试做一些更复杂的事情，但我的问题的核心归结为匹配单行 C 注释。

示例`myfile`：

```
/* a comment */ 
```

跑步：

```
sed 's|/\*\([.]*\)\*/|\1|' ./myfile 
```

不匹配/替换。

这是为什么？我把它分成几部分，它似乎适用于单独的部分（开头`/*`、东西、结尾`*/`和组合（开头/中间和中间/结尾），并且一切正常，但把它放在一起却不行。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:59:13.483

`[.]*`正在寻找一串零个或多个点。你想`.`成为一个元字符；删除它周围的方括号。

```
sed 's|/\*\(.*\)\*/|\1|' ./myfile 
```

注意这是一个贪心匹配算法；这就是所有普通（POSIX）版本的`sed`支持。代表着：

```
XX /* comment1 */ YY /* comment2 */ ZZ 
```

将输出：

```
XX  comment1 */ YY /* comment2  ZZ 
```

用经典修复它`sed`几乎是不可能的，不值得尝试。如果您的 中支持 PCRE（与 Perl 兼容的正则表达式）`sed`，则可以使用非贪婪匹配运算符将其视为两个注释。

# android - Android - 如何从广播类中的另一个类调用方法？

> ID：12152166
> 
> 赞同：0
> 
> 时间：2012-08-28T02:49:54.967
> 
> 标签：android, sms, broadcastreceiver

在我的代码中，我有一个 java 文件，其中包含：

```
package com.myapp.basic;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiverActivity extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // Parse the SMS.
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null)
        {
            // Retrieve the SMS.
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                // In case of a particular App / Service.
                //if(msgs[i].getOriginatingAddress().equals("+91XXX"))
                //{
                //str += "SMS from " + msgs[i].getOriginatingAddress();
                //str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
                //}
            }
            if (str != "") { // remove the last \n
                str = str.substring(0, str.length()-1);
            }

            // Need to find a better way to check if the activity is running
            try {
                ((Police_ViewActivity) context.getApplicationContext()).handle_incoming_help_message(str); // crash here
            } catch(Exception e) {
                System.out.println(e.getMessage());
            }
            System.out.println("ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ");
        }
    }
} 
```

当 try 块中的代码发生时，它会崩溃并且我收到此错误：08-27 22:45:11.345: I/System.out(27606): android.app.Application 无法转换为 com.escortme.basic。 Police_ViewActivity

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:07:40.230

如果只需要在另一个类中调用handle_incoming_help_message 方法，只需将handle_incoming_help_message 方法设为静态即可。

`update:`

所以你应该启动 Police_ViewActivity 并告诉它你需要调用 handle_incoming_help_message

```
Intent intent = new Intent(context, Police_ViewActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
intent.putExtra("handle_incoming_help_message", str);
context.startActivity(intent); 
```

并在 Police_ViewActivity 的 onCreate（或 onResume 或 Onstart）中

```
String str = getIntent().getStringExtra("handle_incoming_help_message");
if(str != null)
    handle_incoming_help_message(str); 
```

`Update 2`

保持policeviewactivity的实例数最多为1？->[安卓启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:01:04.537

调用 Activity 最好使用`Intent`. 你可以把这样的东西：

```
Intent intent = new Intent(Police_ViewActivity.class);
intent.putExtra("help_message", str);

context.startActivity(intent); 
```

在警察视图活动的 onResume() 中，获取额外的并处理它：

```
onResume(){
    String msg = getIntent().getStringExtra("help_message");
    if (msg==null) return;
    handleMessage(msg);
} 
```

您不必担心正在创建的 Activity 的多个实例，在清单中您可以使用[Launchmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)指定 Activity 的启动方式。singleInstance 可能是您的选择。

# c++ - 为什么将函数名用作函数指针等同于将地址运算符应用于函数名？

> ID：12152167
> 
> 赞同：20
> 
> 时间：2012-08-28T02:50:12.247
> 
> 标签：c++, syntax, function-pointers

有趣的是，**使用函数名作为函数指针相当于将地址运算符应用于函数名**！

这是示例。

```
typedef bool (*FunType)(int);
bool f(int);
int main() {
  FunType a = f;
  FunType b = &a; // Sure, here's an error.
  FunType c = &f; // This is not an error, though. 
                  // It's equivalent to the statement without "&".
                  // So we have c equals a.
  return 0;
} 
```

使用名称是我们在数组中已经知道的。但是你不能写类似的东西

```
int a[2];
int * b = &a; // Error! 
```

它似乎与语言的其他部分不一致。这种设计的基本原理是什么？

[这个问题解释了这种行为的语义以及它为什么起作用。](https://stackoverflow.com/questions/6893285/why-do-all-these-crazy-function-pointer-definitions-all-work-what-is-really-goi)但我感兴趣的是为什么这种语言是这样设计的。

更有趣的是，函数类型在作为参数使用时可以隐式转换为指向自身的指针，但在作为返回类型使用时不会转换为指向自身的指针！

**例子：**

```
typedef bool FunctionType(int);
void g(FunctionType); // Implicitly converted to void g(FunctionType *).
FunctionType h(); // Error!
FunctionType * j(); // Return a function pointer to a function 
                    // that has the type of bool(int). 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T03:43:42.353

由于您特别询问这种行为的基本原理，这是我能找到的最接近的东西（来自 ANSI C90 基本原理文档 - [http://www.lysator.liu.se/c/rat/c3.html#3-3- 2-2](http://www.lysator.liu.se/c/rat/c3.html#3-3-2-2) ):

> 3.3.2.2 函数调用
> 
> 指向函数的指针可以用作 as`(*pf)()`或 as `pf()`。后一种结构在基础文档中没有得到认可，出现在一些当前版本的 C 中，是明确的，不会使旧代码无效，并且可以是重要的速记。简写对于只显示一个外部名称的包很有用，它指定一个充满指向对象 s 和函数的指针的结构：成员函数可以被称为`graphics.open(file)`而不是 `(*graphics.open)(file)`. 函数指示符的处理可能会导致一些奇怪但有效的句法形式。鉴于声明：
> 
> ```
> int f ( ) , ( *pf ) ( ) ; 
> ```
> 
> 那么以下所有表达式都是有效的函数调用：
> 
> ```
> ( &f)(); f(); (*f)(); (**f)(); (***f)();
> pf(); (*pf)(); (**pf)(); (***pf)(); 
> ```
> 
> 每行的第一个表达式在前一段中讨论过。二是常规用法。在几乎所有的表达式上下文中，所有后续表达式都利用函数指示符到指针值的隐式转换。委员会认为允许这些表格并没有真正的危害；取缔形式之类`(*f)()`的，虽然仍然允许`*a`（因为`int a[])`，只是看起来比它的价值更麻烦。

基本上，添加了函数指示符和函数指针之间的等价性，以使使用函数指针更加方便。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T02:57:53.360

这是从 C 继承的特性。

在 C 语言中，它是允许的，主要是因为函数名本身并没有太多其他含义。你可以用一个实际的函数做的就是调用它。如果你不打电话，你*唯一*能做的就是获取地址。由于没有歧义，任何时候函数名后面没有跟 a`(`来表示对该函数的调用，该名称的计算结果就是函数的地址。

这实际上有点类似于语言的其他部分——数组的名称计算为数组的第一个元素的地址，除非在一些相当有限的情况下（用作`&`or的操作数`sizeof`）。

由于 C 允许，C++ 也可以这样做，主要是因为同样如此：你可以对函数做的唯一事情是调用它或获取它的地址，所以如果名称后面没有`(`表示函数调用的 a，然后名称计算为地址，没有歧义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T04:17:29.243

对于数组，使用 address-of 运算符时没有指针衰减：

```
int a[2];
int * p1 = a;      // No address-of operator, so type is int*
int (*p2)[2] = &a; // Address-of operator used, so type is int (*)[2] 
```

这是有道理的，因为数组和指针是不同的类型，例如可以返回对数组的引用或在函数中传递对数组的引用。

但是，对于函数，还有什么其他类型可能？

```
void foo(){}
&foo; // #1
foo;  // #2 
```

让我们想象一下，只有 #2 给出了 type `void(*)()`，那么 type 会`&foo`是什么？没有其他可能。

# javascript - 淘汰赛添加绑定到动态表单元素

> ID：12152170
> 
> 赞同：0
> 
> 时间：2012-08-28T02:50:44.903
> 
> 标签：javascript, jquery, knockout.js

![在此处输入图像描述](../Images/b04e39088d292d46e6f32fdb4973edfa.png)

我得到了这个表格，所有这些输入都是整数。intpu B, C 通过nested_form gem 嵌套在表单中，当点击add another 时，会在表单中添加一个b,c 的克隆（但ids,names 不同）。

C'值 = A'值 * B'值 / 100

输入 A bindto underwriting_fee
输入 B bindto allocation_percent
输入 C ko.computed = A * B /100

```
var appmodel = function(){
    var self = this;
    self.underwriting_fee = ko.observable();
    self.lines = ko.observableArray([new line(self.underwriting_fee)]);
    self.addLine = function() { 
      self.lines.push(new line(self.underwriting_fee));
  };
};

var line = function(underwriting_fee){
    var self = this;
    self.underwriting_fee = underwriting_fee;
    self.allocation_percent = ko.observable();

    self.fee = ko.computed(function() {
      //console.log(self.underwriting_fee());
      //console.log(self.allocation_percent());

      if(!isNaN(self.underwriting_fee()) && !isNaN(self.allocation_percent())){
         return self.underwriting_fee() * self.allocation_percent() / 100 ;
      }
    });
};
ko.applyBindings(new appmodel()); 
```

目前，当我单击添加另一个时，将有两行 b1-c1，一行通过敲除 ko oberservable array，一行通过 rails nested_form gem。并且逐行嵌套形式不起作用（输入 c 未计算），由于相同的 id 和相同的名称，我不希望逐行剔除。

我已经阅读了文档并搜索了很多，但没有找到解决方案。

也许我不应该在这里使用 knockoutjs ？

# android - 安卓上的teamviewer等应用技术

> ID：12152173
> 
> 赞同：5
> 
> 时间：2012-08-28T02:51:28.970
> 
> 标签：android, sockets, streaming

我很担心在像 teamviewer 这样的应用程序上使用/应该使用哪些技术。我正在考虑一个 android 应用程序，它可以自动记录 android 设备屏幕上的任何操作，然后为 PC 应用程序提供流线以实时查看该屏幕。

任何人都可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T09:05:55.063

是的，你可以做到。

这就是你为安卓做的。需要几个步骤，但你可以做到...

[http://www.howtogeek.com/howto/42491/how-to-remote-view-and-control-your-android-phone/](http://www.howtogeek.com/howto/42491/how-to-remote-view-and-control-your-android-phone/)

希望这可以帮助。谢谢。

# php - 试图从节点中的字段中获取变量，而不是得到错误

> ID：12152175
> 
> 赞同：0
> 
> 时间：2012-08-28T02:51:49.713
> 
> 标签：php, drupal

好的，所以我想也许我不明白如何做到这一点。

我在这里遵循示例（或者我认为）：

[如何在drupal中获取内容类型的字段值](https://stackoverflow.com/questions/6555883/how-to-get-the-field-values-of-a-content-type-in-drupal)

据我所知，我应该有一个至少包含一个其他字段的自定义内容类型。

内容类型应该有一个启用 PHP 的字段，我应该在`print_r($node);`里面输入代码`<?php ?>`，它应该显示我的字段的所有值。

但是，这不是正在发生的事情，而是在使用自定义内容类型创建节点时出现此错误：

```
Notice: Undefined variable: node in eval() (line 1 of /hermes/waloraweb033/b418/moo.arao1989/modules/php/php.module(80) : eval()'d code).
Notice: Undefined variable: node in eval() (line 1 of /hermes/waloraweb033/b418/moo.arao1989/modules/php/php.module(80) : eval()'d code). 
```

那么为什么我的变量没有被定义呢？我正在使用内容类型创建一个自定义节点 - 它不应该提取该特定节点的信息吗？

这是在 Drupal 7

# c# - 将集合字典数据从 C# 传递到宏

> ID：12152178
> 
> 赞同：0
> 
> 时间：2012-08-28T02:52:03.503
> 
> 标签：c#, excel, dictionary, vba

我想将 C# 代码中的集合数据字典传递到 excel 宏中。我现在面临的问题是将字典传递给宏时出错。

这是我使用的 excel 模块中存在的宏代码的简单示例：

```
Public Sub dictionaryTest1(dataku As Variant)

Dim I As Integer
For Each v In dataku.Keys
    MsgBox "Name: " & v & " Age: " & dataku.Item(v)
Next
End Sub 
```

我下面是我的 c# 代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.Office.Core;
using System.Reflection;
using System.IO;
namespace WindowsMacro
{
    public partial class Form1 : Form
    {
public Form1()
    {
        InitializeComponent();
    }

private void RunMacro(object oApp, object[] oRunArgs)
    {
        oApp.GetType().InvokeMember("Run",
            System.Reflection.BindingFlags.Default |
            System.Reflection.BindingFlags.InvokeMethod,
            null, oApp, oRunArgs);
    }

private void button1_Click(object sender, EventArgs e)
    {
        Dictionary<string, int> dataku = new Dictionary<string, int>()
        {
            {"cat", 2},
            {"dog", 1},
            {"llama", 3},
            {"iguana", 5}
        };

        object oMissing = System.Reflection.Missing.Value;

        Excel.ApplicationClass oExcel = new Excel.ApplicationClass();
        oExcel.Visible = true;
        Excel.Workbooks oBooks = oExcel.Workbooks;
        Excel._Workbook oBook = null;

        //path to excel file at bin folder
        string executableLocation =   Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        string xslLocation = Path.Combine(executableLocation, "File.xls");

        oBook = oBooks.Open(xslLocation, oMissing, oMissing,
            oMissing, oMissing, oMissing, oMissing, oMissing, oMissing,
            oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);

        //Run macros with passing the dictionary data "dataku".
        RunMacro(oExcel, new Object[] { "dictionaryTest1", dataku });
        // Quit Excel and clean up.
        oBook.Close(false, oMissing, oMissing);
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oBook);
        oBook = null;
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oBooks);
        oBooks = null;
        oExcel.Quit();
        System.Runtime.InteropServices.Marshal.ReleaseComObject(oExcel);
        oExcel = null;
        GC.Collect();   //Garbage collection.
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:01:54.020

您应该更具体地了解您收到的错误。无论如何，我认为您的问题是您将宏传递给错误类型的对象。即你正在创建一个`Dictionary<string, int>`VBA 不知道的。

您没有指定 dictionaryTest1 宏接受的类型，但我想它是 Microsoft Scripting Runtime 中的 Dictionary 。如果是这种情况，您也应该在 C# 中创建这种对象。这意味着您必须将 Microsoft Scripting Runtime 添加到您的 .NET 项目的引用中，然后以这种方式创建将传递给宏的字典：

```
 Scripting.Dictionary dataku = new Scripting.DictionaryClass();
        dataku.Add("cat", 2);
        dataku.Add("dog", 1);
        dataku.Add("llama", 3);
        dataku.Add("iguana", 5); 
```

# google-apps-script - 如果值超过谷歌电子表格中的某个数字，则更改单元格背景颜色

> ID：12152182
> 
> 赞同：2
> 
> 时间：2012-08-28T02:52:30.580
> 
> 标签：google-apps-script, google-sheets, gs-conditional-formatting

这是一个两部分的问题。

首先我需要帮助编写这个脚本，然后我需要帮助在 Google 电子表格中实现一个脚本。

如果单元格中包含的数字超过 40（小时），我想要做的是更改单元格的背景颜色（变为红色）。对于我的电子表格，我有 7 天的列，每个列下都有一个输入列和一个输出列。我在电子表格的总列中使用一个公式从输入时间中减去输出时间的值，然后将该数字添加到下一个单元格，直到得到总数。这就是我想将此脚本应用到的列。我可以写一点 JS，但我真的不知道如何将它连接到电子表格而不是网站。

这是我关于它应该如何工作的基本想法：

```
 //Trying to get a script that will change the background color to red if hours are over 40\. 

function onEdit(e) {
   var cellID = e.source.getActiveCell();
   var cellValue = e.cell.getValue(); //I may need to slice out the numbers before the first : for this to work..not sure b/c i cant get this to debug. Also not sure that I need this function, maybe can just do var cellValue = cellID.value or just use cellID.value ?

  if (cellValue > 40 ) {
    cellID.setBackgroundColor('red');
  } else {
    cellID.setBackgroundColor('white');
  }
} 
```

不太确定 onEdit 功能..宁愿它是我自己的功能，但我不确定将它绑定到什么样的听众。此外，如果你们可以帮助我了解这件事情应该工作的一般想法，我可能会对其进行调整以使其适用于我的特定电子表格。我真正需要知道的是我应该在我的电子表格上听什么，以及如何将脚本实际附加到电子表格中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T16:46:11.477

您是否尝试过格式菜单中的条件格式。我希望这能解决你的问题。

# ruby-on-rails - JSON 请求返回两个响应

> ID：12152188
> 
> 赞同：0
> 
> 时间：2012-08-28T02:53:43.087
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

在我的 rails 应用程序中，我有一个`Item`模型，其中有很多`Versions`. 我的控制器有一个`versions`动作。

```
def versions
  @item = Item.find(params[:id])
  respond_to do |format|
    format.json { render json: @item.versions }
  end
end 
```

每当我请求版本时，有些项目会成功返回它们，而有些则不会。但是当我进入控制台时，我可以毫无问题地获得所有项目的版本。

成功（返回 JSON 版本数组）：

```
Started GET "/api/versions/4.json?"
Processing by ItemsController#versions as JSON
Parameters: {"id"=>"4"}
Completed 200 OK in 106ms (Views: 0.1ms | ActiveRecord: 19.8ms)
app[web.1]: cache: [GET /api/versions/4.json?] miss
heroku[router]: GET x.x.com/api/versions/4.json? dyno=web.1 queue=0 wait=0ms service=113ms status=200 bytes=831 
```

不成功（返回两个响应，状态均为 200，无 JSON 数据）：

```
Started GET "/api/versions/1.json?"
Processing by ItemsController#versions as JSON
Parameters: {"id"=>"1"}
Completed 200 OK in 249ms (Views: 0.1ms | ActiveRecord: 162.9ms)
app[web.1]: cache: [GET /api/versions/1.json?] miss
heroku[router]: GET x.x.com/api/versions/1.json? dyno=web.1 queue=0 wait=0ms service=257ms status=200 bytes=3540 
```

知道是什么原因造成的吗？我不知道如何在 Heroku 上记录 SQL，所以我没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:58:54.583

`SET log_statement='all';`重新您的 SQL 日志记录：通过在打开每个连接时发出 SQL 来启用语句日志记录。然后检查 Pg 的 Heroku 日志，看看发生了什么。

```
heroku logs --ps postgres 
```

看：

*   [Heroku 的 PostgreSQL 支持文档](https://devcenter.heroku.com/articles/heroku-postgresql)
*   [Heroku 的日志记录文档](https://devcenter.heroku.com/articles/logging)
*   [谷歌搜索：如何在 Heroku 上记录 SQL](http://google.com/search?q=how+to+log+SQL+on+Heroku)

这不会记录查询*结果*，仅记录查询文本、查询参数和错误/成功。

要处理结果记录，您需要在应用程序中进行；只需将消息打印到 stderr，Heroku 就会将它们添加到应用程序日志中，以便您可以通过`heroku logs`.

无论如何，您当前的代码看起来很狡猾。循环结果集并发出 json 感觉不对：

*   并不清楚只能有一个结果，因此只能发出一个 json 块；和
*   如果没有结果，则不发出 json

相反，将查找结果（如果有）保存到变量中。然后正确处理丢失的结果：在 RESTful API 中，您可能会报告 HTTP 状态`404 Not Found`；在更 RPC 风格的 API 中，您将返回一个空的 JSON 文档或带有某种“未找到”标志的 JSON 文档并报告 HTTP 状态`200 OK`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:34:01.017

这实际上是客户端的错误。在 iOS 上，我正在处理返回的数据`connection:didReceiveData:`，其中（当返回大块数据时）被多次调用，并有部分结果。为了解决这个问题，我改为连接该回调中的所有部分结果并处理`connectionDidFinishLoading:`. 愚蠢的错误，与 Heroku 或 Rails 无关。

感谢克雷格的帮助。

# w3c-geolocation - 是什么让 getCurrentPosition 失败？

> ID：12152191
> 
> 赞同：0
> 
> 时间：2012-08-28T02:54:02.353
> 
> 标签：w3c-geolocation

我做了一个简单的网站，上面有 javascript，它调用：

navigator.geolocation.getCurrentPosition(show_map, show_map_error);

我已经把网站放到了互联网上。我试图从不同位置的不同电脑（没有 GPS 小工具）打开网站。一个来自我家，一个来自朋友办公室。

但脚本并不总能获得位置。会有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:03:54.750

该方法不能保证返回位置，尤其是在没有连接 GPS 的情况下。

您可以尝试获取缓存位置。请参阅 API 规范中的以下内容

```
// Request a position. We only accept cached positions, no matter what 
// their age is. If the user agent does not have a cached position at
// all, it will immediately invoke the error callback.
navigator.geolocation.getCurrentPosition(successCallback,
                                         errorCallback,
                                         {maximumAge:Infinity, timeout:0});

function successCallback(position) {
  // By setting the 'maximumAge' to Infinity, the position
  // object is guaranteed to be a cached one.
  // By using a 'timeout' of 0 milliseconds, if there is
  // no cached position available at all, the user agent 
  // will immediately invoke the error callback with code
  // TIMEOUT and will not initiate a new position
  // acquisition process.
  if (position.timestamp < freshness_threshold && 
      position.coords.accuracy < accuracy_threshold) {
    // The position is relatively fresh and accurate.
  } else {
    // The position is quite old and/or inaccurate.
  }
}

function errorCallback(error) {
  switch(error.code) {
    case error.TIMEOUT:
      // Quick fallback when no cached position exists at all.
      doFallback();
      // Acquire a new position object.
      navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
      break;
    case ... // treat the other error cases.
  };
}

function doFallback() {
  // No cached position available at all.
  // Fallback to a default position.
} 
```

# php - 如何在 PHP 中使用正则表达式检查带有通配符的 IP 是否有效？

> ID：12152192
> 
> 赞同：0
> 
> 时间：2012-08-28T02:54:13.510
> 
> 标签：php, regex

我制作的一个页面允许用户使用 % 作为通配符（例如 192.168.1.%）提交 IP（全部是 IPv4，而不是 IPv6）。他们还可以提交不带通配符的完整 IP。IP 通过常规 HTML 表单输入发布，例如`<input name=\"ip\" maxlength=\"15\"/>`.

本质上，我只需要检查 IP 是否只包含数字、点和百分号（最多两个）。我并不真正关心人们输入大于 255 的数字，但我不希望他们每个点输入的数字超过三个。

我根本不知道正则表达式，所以我什至不知道从哪里开始。我知道 [0-9] 只允许数字 0-9，但这可能不会有太大帮助。我是否应该使用点作为分隔符将 $_POST['ip'] 变量分成多个部分，然后在每个部分上运行正则表达式？一次运行它可能更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:59:50.730

虽然您可以使用正则表达式来做到这一点，但我相信它会很复杂，更直接的解决方案是字符串函数和[`filter_var()`](http://www.php.net/manual/en/function.filter-var.php).

### 伪代码

*   [`substr_count()`](http://php.net/substr_count)确保最多 2 个的*通配符*
*   [`str_replace()`](http://php.net/str_replace) *带有*安全数字的**通配符*，比如说`50`*
**   利用`filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4)`*

 *如果其中任何一个失败，则您的 IP 错误。为了教你钓鱼，我会把代码留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:11:48.310

我知道，它看起来很难，但这是我最常用的 ip-validation 正则表达式，被 RegexBuddy 窃取，用你的“百分比字符”增强......因为你想用它来验证，所有简单的正则表达式都行不通在这里，因为'将匹配“999.345.465.123”，太......

让我知道，如果它工作...

```
if (preg_match('/(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]|%)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]|%)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]|%)\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]|%)/i', $_GET['ip'], $regs)) {
    // full validated ip
    $ip = $regs[0];

    // address octets directly?
    $first = $regs[1];
    $second = $regs[2];
    $third = $regs[3];
    $fourth = $regs[4];
} 
```*

# java - 迭代向量分配时的Matlab分段错误

> ID：12152193
> 
> 赞同：15
> 
> 时间：2012-08-28T02:54:21.013
> 
> 标签：java, matlab, debugging, segmentation-fault, matlab-class

我一直在对我之前编写的一些 matlab 代码进行矢量化处理，在此过程中，由于分段错误，matlab 开始崩溃。我将问题缩小到单一类型的计算：分配给多个结构属性。

例如，即使是这种形式的自赋值，在执行数千次时最终也会导致段错误：

> [my_class_instance.my_struct_vector.my_property] = my_class_instance.my_struct_vector.my_property；

我最初认为这一定是某种内存泄漏，因此尝试在每次迭代后打印出 java 的空闲内存，但这仍然相当稳定。

所以，是的，现在完全不知道为什么会中断：-/

**更新：以下更改修复了段错误：**

> temp = [my_class_instance.my_struct_vector];
> 
> [temp.my_property] = temp.my_property；
> 
> [my_class_instance.my_struct_vector] = temp;

**现在的问题是为什么这会解决任何问题。关于重复访问句柄类而不是结构列表的问题？**

**更新 2：情节变厚**

我终于复制了这个问题，并使用一个足够简单的虚拟程序来解决这个问题：

一个简单的类：

```
classdef test_class
    properties
        test_prop
    end
end 
```

还有一个程序对类进行大量向量分配，并且总是会崩溃。

```
test_instance = test_class();
test_instance.test_prop = struct('test_field',{1 1});
for i=1:10000

    [test_instance.test_prop.test_field] = test_instance.test_prop.test_field;
end 
```

**更新 3：情节变薄**

原来我发现了一个错误。根据 Matlab 技术支持，类属性的重复向量分配根本无法在 R2011a 中工作（并且可能在早期版本中）。他告诉我它在 R2012a 中运行良好，然后提到了我发现的相同解决方法：使用临时变量。

**是的...**

很确定这个问题以那张支持票结束，但是如果有任何大胆的人想试一试为什么这个错误存在，我肯定仍然会对这样的答案感兴趣。（学习很有趣！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:36:49.513

到目前为止，最可能的原因是该操作在内部使用自修改代码。这样做的问题是现代处理器具有 CPU 缓存，因此如果您更改内存中的代码，但代码已经提交到缓存，则会产生 seg 错误。

之所以是随机的，是因为它取决于修改的代码在修改时是否在缓存中等因素。

为了避免这种情况，程序员必须确保在进行自我修改之前让代码刷新缓存。

# javascript - 如何在 javascript 中创建一个监视数组的自定义事件？

> ID：12152194
> 
> 赞同：3
> 
> 时间：2012-08-28T02:54:37.207
> 
> 标签：javascript, custom-event

我看到有关如何创建自定义事件的其他问题，但我不清楚如何跟踪特定的自定义条件。

在我的示例中，我需要“监听”数组从 x 元素变为 y 元素的可能性。

我不确定在 Array 之上进行原型设计是否是一个好主意，尽管这正是我所需要的。

然而，更广泛的问题是，编写自定义侦听器的方法是什么，这些侦听器实际上类似于 -pseudo-

onClockStruckTwo 或 onDomChanged 或 onRapture

这意味着，与其等待其他一些预定义的 onEvent（onclick、onkeydown 等）发生，我想自己做。

请不要框架答案。我试图了解这在本机 javascript 中实际上是如何工作的。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:11:55.033

数组没有任何类型的事件通知系统来处理 javascript 的变化。因此，如果您想知道数组何时更改，则必须创建自己的通知系统。

由于您不想使用任何框架（其中许多提供事件通知和触发事物），因此您必须构建自己的框架。

事件系统有几种不同的方法（通过通用消息回调的消息，每个事件的单独回调，这些中任何一个的面向对象的方法，等等......

最直接的（认为不一定是最优雅的）是让创建事件的对象维护事件的回调列表。然后，当感兴趣的一方想要注册事件时，他们调用一个方法并将事件和回调传递给它。这类似于 addEventListener 在浏览器 DOM 中为 DOM 事件工作的方式。该方法调用的接收者然后将回调存储在回调数组中。一段时间后，当实际事件发生时，会依次调用为该事件注册的每个回调。

由于数组修改本身不会触发事件，因此您必须实现一个既使数组更改又发出事件信号的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:01:57.593

我问你的问题是“你在听**什么**？” 如果您正在收听服务器上的更改，则可以`setTimeout`进行 AJAX 调用，但这远非建议。如果您严格要求元素的长度发生变化，那么您必须知道其他一些东西会引发事件。我说如果它与服务器无关，根本不要“听”，只需将所需的 Javascript 代码附加到您知道会触发事件更改的内容的末尾。

**编辑**

这是[所有 Javascript 事件类型](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference)的列表。我没有看到任何提到 DOM 对象是空的。您可以按照您希望的方式进行[SOL 。](http://en.wiktionary.org/wiki/shit_out_of_luck)

# validation - Grails父子表单验证

> ID：12152195
> 
> 赞同：0
> 
> 时间：2012-08-28T02:55:18.627
> 
> 标签：validation, grails, parent-child

我有发票

```
class Invoice{
    static hasMany = [lineItems: InvoiceItem]
    double total
}

class InvoiceItem{
    String description
    double price
    double qty
} 
```

我的问题是表单验证。如果用户在价格或数量中输入字符串或无效数字格式，我会得到一个

```
Failed to convert property value of type java.lang.String 
to required type double for property price 
```

但是错误出现在 Invoice 对象中而不是 LineItems 对象中，因此我无法在 RED 中适当地突出显示表单。（并且字段值在显示时保持为零，因此消息对用户来说有点毫无意义）

我正在考虑使用带有字符串参数的 COMMAND 对象并验证它们的数值，但我不知道如何绑定 InvoiceItem 列表。

# 什么是合适的 Grails 方式？

我可以用javascript在客户端进行所有验证，但这不是我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:41:50.633

您可以使用命令对象来做到这一点。你需要阅读：

[http://blog.peterdelahunty.com/2009/01/cool-way-to-dynamically-add-entries-to.html](http://blog.peterdelahunty.com/2009/01/cool-way-to-dynamically-add-entries-to.html)

[命令对象数据绑定](https://stackoverflow.com/questions/8394885/command-object-data-binding)

[Grails 命令对象数据绑定](https://stackoverflow.com/questions/5677623/grails-command-object-data-binding)

[http://grails.1312388.n4.nabble.com/validating-nested-command-objects-td1346994.html](http://grails.1312388.n4.nabble.com/validating-nested-command-objects-td1346994.html)

# ruby-on-rails - rspec 控制器规范访问路由

> ID：12152208
> 
> 赞同：0
> 
> 时间：2012-08-28T02:56:59.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, ruby-on-rails-3.1

我有一个位置资源并通过以下方式访问：

```
http://localhost:3000/locations/37/edit 
```

在我的规范中，我有：

```
it "should allows us to edit" do
  @u=User.find_by_email('jon@domain.com')
  session[:user_id]=@u.id    
  get edit_location_path, {:id => '37'} 
```

但得到以下错误：

```
Failures:

  1) LocationsController should allows us to edit
     Failure/Error: get edit_location_path, :id => '37'
     ActionController::RoutingError:
       No route matches {:action=>"edit", :controller=>"locations"}
     # ./spec/controllers/locations_controller_spec.rb:12:in `block (2 levels) in <top (required)>' 
```

我将如何指定此资源的链接？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:41:23.770

假设它是描述 的控制器规范`LocationsController`，您可以使用`get :edit, :id => 37`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:50:42.407

就做`get edit_location_path(37)`？？

# c++ - 在 Mac Mountain Lion 上安装 GAlib 库

> ID：12152209
> 
> 赞同：0
> 
> 时间：2012-08-28T02:57:31.247
> 
> 标签：c++, installation, osx-mountain-lion, xcode4.4

我正在尝试安装此处找到的 MIT GAlib 库：http: [//lancet.mit.edu/ga/](http://lancet.mit.edu/ga/)

在这个过程中，我意识到我对安装库知之甚少。因此，指向以 mac 为中心的指南的链接解释这一点将非常有帮助。什么是制作文件，为什么还要制作任何东西？我应该将我的 C++ 库存储在哪个文件夹中？...等

或者，非常感谢您提供有关如何安装 GAlib 的分步指南。网站上的说明对我来说有点含糊：http: [//lancet.mit.edu/galib-2.4/Installation.html#mac](http://lancet.mit.edu/galib-2.4/Installation.html#mac)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T10:32:43.900

您可以使用 brew 来做到这一点：

```
#brew install galib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T03:18:04.060

```
# brew install homebrew/science/galib 
```

# javascript - InternetExplorer 7 支持 postMessage() 吗？

> ID：12152211
> 
> 赞同：0
> 
> 时间：2012-08-28T02:57:46.817
> 
> 标签：javascript, html, internet-explorer

我正在使用 IE9 测试我的代码，这让我还可以使用开发人员工具测试 IE8 和 IE7。在 IE7 模式下测试时似乎 postMessage 有效。

我认为 postMessage 不应该在 IE7 中工作，但我的测试说它可以，我认为这是因为我正在使用 IE9 进行测试。

IE7 应该完全支持 postMessage 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:59:20.170

对于 IE，PostMessages 仅支持 IE8 及以上版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:00:34.917

[不](http://caniuse.com/#feat=x-doc-messaging)；（甚至没有跨选项卡或窗口）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T03:48:06.847

确保您设置`Document Mode`为 IE7，而不是`Browser Mode`.

# ruby-on-rails - Capybara - 覆盖一个值

> ID：12152213
> 
> 赞同：0
> 
> 时间：2012-08-28T02:58:02.773
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我有以下有趣的场景：

测试系统，在我的例子中，ActiveMerchant 的 BogusGateway 需要“伪造”类型的信用卡才能有效。当然，这不是我提供给用户的选项之一。

在我的请求规范中，我试图用“虚假”覆盖签证的原始值，但我不清楚它是如何完成的。我尝试过类似的方法，但没有运气：

```
# setting the value for the visa card to be 'bogus'
find(:xpath, "//input[@id='billing_account_card_type_visa']").set "bogus"

# then clicking on the radio button...
choose "billing_account_card_type_visa" 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:26:23.413

如果用户不能选择那个选项，Capybara 应该怎么做呢？

不要模仿无法执行的用户操作，只需使用无效参数发出请求：

`post "/my_billing_path", :billing_account => { :card_type => "bogus }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:08:37.670

您可以只使用水豚的[`fill_in`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions%3afill_in)和[`choose`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#choose-instance_method)方法：

```
fill_in("billing_acount_card_type_visa", :with => "bogus")
choose("billing_account_card_type_visa") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:14:58.800

使用以下数字通过验证并使用 capybara 和虚假网关测试成功的交易：

*   签证 = 4111111111111111
*   万事达卡 = 5500000000000004
*   美国运通 = 340000000000009
*   发现 = 6011000000000004

# perl - 使用 Catalyst 框架为 flash/html5 播放器流式传输视频

> ID：12152214
> 
> 赞同：0
> 
> 时间：2012-08-28T02:58:12.527
> 
> 标签：perl, streaming, video-streaming, jwplayer, catalyst

我正在开发一个网站，使用 Catalyst（A perl MVC 框架）和 JWplayer 在线提供多个视频，我需要一种稳定的方式将视频流式传输到客户端播放器，并能够从随机点启动视频.

我在网上搜索了一些方法来做到这一点，但我找不到在 Catalyst（RTMP 或 HTTP 伪流）中实现它的简单方法。我发现的唯一简单示例是流 MP3 的旧 Catalyst 脚本（[http://dev.catalyst.perl.org/repos/Catalyst/trunk/examples/Streaming/lib/Streaming.pm](http://dev.catalyst.perl.org/repos/Catalyst/trunk/examples/Streaming/lib/Streaming.pm)）但我不知道如果我将该技术应用于视频，是否会按预期工作。

以不复杂的方式在 Catalyst/Perl 中提供在线视频的好方法是什么？或者推荐的方法是什么？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:50:50.040

最后，我使用带有 x_send_file 插件的 apache 来提供 webm 视频（使用范围字节搜索）和亚马逊云前端来提供 mp4 视频和 mp4 流媒体。

编辑：结束使用带有自定义插件的 Wowza Streaming Server 与 Catalyst 进行安全通信。如果没有专用的视频服务器，就没有可靠的视频流媒体方式，尤其是对于企业而言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:01:31.117

这只是部分答案，因为我目前也坚持这一点。

如果文件已经是 FLV 格式，那么 Static::Simple 插件就可以正常工作。我已经使用 root/static/ 目录中的文件和`$c->serve_static_file`方法对其进行了测试。下面是我的 jwplayer 设置（包装在 JQuery 的 ready 函数中。

```
<script type="text/javascript" src="[% c.uri_for('/static/js/mediaplayer-5.10') %]/jwplayer.js"></script>
<script type="text/javascript">
$(function() {
        jwplayer('mediaplayer').setup({
        'flashplayer': "[% c.uri_for('/static/js/mediaplayer-5.10/player.swf') %]",
        'id': 'playerID',
        'width': '480',
        'height': '270',
        'file': "[% c.uri_for('/download') %]/dump/ffs/root/static/transcode_jEfhmk.flv"
    }); 
});
</script> 
```

如果文件是其他格式，则需要对其进行转码。以下是我目前的尝试。它可以很好地转码，您甚至可以将文件流式传输到下载，但我无法让 jwplayer 从转码流中播放。

```
use IPC::Open3;

#path comes in as /flv/path/to/file.avi
sub index :Path :Args {
    my ( $self, $c, @path ) = @_; 
    @path = grep($_ ne '..', @path);
    my $path = join('/',@path);
    my $abs_path = $c->config->{'serve_dir'} . '/';
    $abs_path .= join("/", @path);

    if (-r $abs_path){
        my ($stdin, $stdout, $stderr, $pid);
    #avconv 
    # -i input_file
    # -b:v video bitrate
    # -s video size
    # -r video framerate
    # -an no audio (having trouble with the audio settings)
    # -f format
    # pipe:1 send transcoded video to STDOUT
        $pid = open3($stdin, $stdout, $stderr, "avconv -i \"$abs_path\" -b:v 600k -s 320x240 -r 25 -f flv -an pipe:1");

        $c->response->content_type("video/x-flv");
        $c->response->header('Content-Disposition' => "filename=transcode.flv");
        my $chunk_size = 1048576;
        do {
            read( $stdout, my $buffer, $chunk_size );
            $c->write( $buffer );
        } while (kill(0, $pid)); #loop while transcoding process is alive
    }
} 
```

要添加伪流，您需要创建一个控制器来查找开始查询参数，然后查找它，并将其发送`$c->response->body`到文件句柄。

```
open(my $fh, "<", $path);
binmode($fh);
if ($c->req->param('start')){
    seek($fh, $c->req->param('start'), 0); 
}
$c->response->body($fh); 
```

一个警告：视频必须在元数据中包含关键帧，jwplayer 才能进行搜索。

从 jwplayer 的[HTTP 流](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12534/video-delivery-http-pseudo-streaming)页面：

*注意：某些 FLV 编码器在编码视频时不包含搜索点元数据。如果没有这些数据，HTTP 伪流将无法工作。如果您怀疑您的视频没有元数据，请使用我们的[Metaviewer 插件](http://www.longtailvideo.com/addons/plugins/64/Metaviewer)检查视频。应该有一个搜索点或关键帧列表。如果不存在，请使用 FLVMDI 工具解析您的 FLV 视频并注入此元数据。*

# database - Enterprise Library 5 记录数据库争用

> ID：12152236
> 
> 赞同：0
> 
> 时间：2012-08-28T03:01:02.023
> 
> 标签：database, logging, enterprise-library

我希望通过使用企业库日志记录块并将捕获的信息写入数据库表来捕获 WCF 请求/响应信息。我的一个担心是，这可能会成为许多不同的 WCF 服务尝试登录到这个表的争用源。

在这种情况下，企业库日志记录是否处理争用问题，或者我是否需要实际使用 MSMQ 之类的东西并使用 MSMQ 将日志写入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:59:01.400

如果您下载企业库的源代码，您可以查看您正在使用的所有类。

也就是说，记录器类一次只会使用锁写入一条消息。如果您正在编写大量消息并且性能是一个问题，那么您可能需要阅读 AutoFlush 设置并缓存您的消息，并可能在不同的线程或其他东西上写入。

# django - 什么是基于模型的搜索？

> ID：12152240
> 
> 赞同：1
> 
> 时间：2012-08-28T03:01:21.393
> 
> 标签：django, solr, search-engine, elasticsearch, django-haystack

当我阅读`haystack`文档时，我得到了`Haystack is very Model-based and doesn’t work well outside of that use case.`. 什么是基于模型的搜索和基于模型的数据。google 或 bing 搜索引擎是否进行模型搜索？感谢您的考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:30:16.267

[https://docs.djangoproject.com/en/dev/topics/db/models/](https://docs.djangoproject.com/en/dev/topics/db/models/)

> 模型是有关您的数据的唯一、确定的数据源。它包含您存储的数据的基本字段和行为。通常，每个模型都映射到一个数据库表。

基本上，模型是一个包含与来自数据源（即数据库表）的某些数据相关的数据和方法的类。

> google 或 bing 搜索引擎是否进行模型搜索？

不，我不知道。Google 使用自己的网站索引，不提供使用数据库中数据的方法。

[https://developers.google.com/custom-search/docs/api](https://developers.google.com/custom-search/docs/api)

必应也是如此。这些与 Solr 或 ElasticSearch 不同，它们在您的服务器上实现并且可以通过 API 访问数据库中的数据。而 Google 和 Bing 的 API 仅允许您使用他们的搜索引擎对您网站的缓存。

# security - OAuth2 中客户端密码的用途是什么？

> ID：12152247
> 
> 赞同：29
> 
> 时间：2012-08-28T03:02:37.653
> 
> 标签：security, api, authentication, oauth, oauth-2.0

我有一个提供 API 的应用程序。此应用程序是 OAuth2 提供程序。

我想使用仅客户端应用程序访问此 API（读取和写入）。我正在使用[JSO](https://github.com/andreassolberg/jso)使这更容易。

它工作得很好。

问题是，我不必在任何地方输入我的客户密码（我在我的应用程序中注册的应用程序）。而且我理解为什么，任何人都可以使用它。

所以，如果我可以在没有客户端密码的情况下访问我的 api，你能向我解释一下它的目的是什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-25T19:45:19.417

[这个讨论](https://salesforce.stackexchange.com/questions/14009/whats-the-benefit-of-the-client-secret-in-oauth2)很好地解释了为什么客户端密码对于服务器端应用程序比客户端应用程序更重要。摘录：

> Web 应用程序 [服务器端应用程序] 使用客户端机密，因为它们代表了巨大的攻击向量。假设有人毒化了一个 DNS 条目并设置了一个“相似”的流氓应用程序，这种并列可能几个月都不会被注意到，因为这个中介会吸收大量数据。客户端机密应该可以减轻这种攻击向量。对于单用户客户端，妥协必须一次一台设备，相比之下，这是非常低效的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T16:21:15.947

Client Secret 在 OAuth 1.0 中用于对请求进行签名，因此它是必需的。一些 OAuth2 服务器（例如 Google Web Server API）需要发送客户端密码才能接收访问令牌（来自请求令牌或刷新令牌）。

OAuth 2.0 显着减少了客户端密码的作用，但它仍然传递给使用它的服务器。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-28T17:10:18.467

这也让我发疯，直到我看到一个让答案显而易见的例子。

***我必须先登录到服务器，然后服务器才会返回一个授予访问我的东西的令牌。***

换句话说，如果我还没有与服务器的有效登录会话，则服务器将向我（人类）显示一个登录屏幕。这就是为什么解释总是说“由服务器进行身份验证”之类的东西。

当然，服务器不必要求我登录。这现实吗？Dropbox 是否真的会将我的文件的访问权限授予未登录的任何人？当然不是。我读过的大多数解释都掩盖了这一点，就好像它无关紧要，而实际上它实际上是唯一重要的事情。

# visual-studio-2010 - 来自对象的 Visual Studio 中的 Crystal Report

> ID：12152250
> 
> 赞同：0
> 
> 时间：2012-08-28T03:02:53.477
> 
> 标签：visual-studio-2010, crystal-reports, reporting, .net

我正在将水晶报表添加到我的解决方案中，该解决方案分为不同的项目，但我无法从我的解决方案中的另一个项目中选择数据源作为对象。

我想做的事情是用方法的结果填充报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:09:27.030

我假设您的方法正在返回数据集或数据表。否则，您将不得不继续将从您的方法返回的信息添加到代码中的数据集，您将在其中调用报告并使用 SetDataSource 用您的数据填充报告。请参考下面给出的链接

[使用 C# 和数据集创建 Crystal Reports](http://www.codeproject.com/Articles/12694/Creating-Crystal-Reports-using-C-with-Datasets)

# html - 使用“背景大小：100%”

> ID：12152251
> 
> 赞同：0
> 
> 时间：2012-08-28T03:03:07.610
> 
> 标签：html, css, background, resize, fixed

所以我试图在我的页面左下角使用背景图像，但我希望它修复并使用浏览器窗口调整大小。

我接近达到这个目标的唯一方法是使用'背景尺寸：100％'但是，这会使图像太高。所以我不确定用什么来让它真正适合。

有什么建议么？

这是我目前的代码...

```
body {
background-color:#000000;
background-image:url(Image.png);
background-position: 0% 100%;
background-attachment:fixed;
background-repeat:no-repeat;
    background-size: 100%; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:06:29.367

嗯，`background-size`需要不止[一个值](http://www.w3schools.com/cssref/css3_pr_background-size.asp)。你可以尝试这样的事情：

```
background-size: auto 100%; 
```

但是，为简单起见，首先尝试：

```
background-size: cover; 
```

这将使背景的宽度自动调整为`100%`高度的纵横比。这保证了背景图像永远不会小于或大于高度，但宽度会随着浏览器的纵横比而变化。

**附录**

另请注意，`background-size`并非所有浏览器都支持。如果对 Internet Explorer 的支持对您来说是个问题，那么我强烈建议您使用 Javascript 后备。我还**强烈**建议阅读始终可爱的 Chris Coyier 关于[“完美整页背景图像”](http://css-tricks.com/perfect-full-page-background-image/)的文章。它讨论了各种后备方案！

# jquery - 带有横幅广告的 jquery 画廊

> ID：12152255
> 
> 赞同：0
> 
> 时间：2012-08-28T03:04:39.150
> 
> 标签：jquery, gallery, slideshow

有谁知道是否有支持横幅广告的 JQuery 画廊插件？我已经看到了很多不同的幻灯片/画廊选项，但我正在寻找一个能让我在每张照片上加载横幅的选项。

我看到这个 NBC 网站正在运行类似的东西（[例如这里](http://www.nbclosangeles.com/entertainment/music/NATLRock-Stars-Then-and-Now-97329329.html)），但我找不到插件。

# python - mac上的ssh -X在matlplotlib中给出错误

> ID：12152257
> 
> 赞同：2
> 
> 时间：2012-08-28T03:04:45.827
> 
> 标签：python, macos, ubuntu, ssh, matplotlib

我正在尝试 ssh 进入服务器并在其上运行 python 脚本。

当我在 mac 上运行命令时，我不断收到错误消息。

```
File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 443, in clf
gcf().clf()
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 369, in gcf
return figure()
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 343, in figure
**kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 80, in            new_figure_manager
  window = Tk.Tk()
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1688, in __init__
  self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)
  _tkinter.TclError: no display name and no $DISPLAY environment variable 
```

* * *

我正在使用 ssh -X abc@xyz.com 进行 ssh。这在 ubuntu 上没有任何问题，但在 mac 上会出现此错误。我刚刚转移到mac，我不明白我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:08:57.090

你有安装 XQuartz 吗？ `$DISPLAY`应该在 OS X 上自动设置为 launchd 套接字，该套接字在访问时会自动启动 XQuartz。一个常见的错误是设置`$DISPLAY`为：0.0，但我认为这会导致不同的错误。

事情应该是这样的：

```
% echo $DISPLAY
/tmp/launch-k9XueA/org.macosforge.xquartz:0 
```

# java - 由于内存消耗，Java EE 应用程序在 WAS 7.0 上挂起

> ID：12152270
> 
> 赞同：0
> 
> 时间：2012-08-28T03:07:57.790
> 
> 标签：java, jakarta-ee, websphere, websphere-7

我有一个在 WAS 6.0 上运行良好但在 WAS 7.0 上抛出核心转储的应用程序，因为 java 线程占用了整个内存。它在共享环境中运行。

有没有人遇到过这样的问题？如果需要，我可以提供核心转储，但我不能在此处将其作为文件附件附加。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:46:58.113

检查这个。

```
1) Open RAD and Start WCS server.
2) Log on to WebSphere administration console.
3) Select Servers-->Server types -->WebSphere application servers --> server1 -->Java and process management --> Process definition -->Java virtual machine.
4) Change the value of Maximum heap size field.(Eg 512 to 1024)
5) Save and restart the server.And Republish the application. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:49:06.150

如果它不是在开发环境中而是在正常环境中运行，则同样适用

# jquery - bbc-radio-1-zoom-tabs 的多个幻灯片

> ID：12152271
> 
> 赞同：0
> 
> 时间：2012-08-28T03:08:03.600
> 
> 标签：jquery, slider

[BBC Radio 1 Zoom Tabs 插件](http://jqueryfordesigners.com/bbc-radio-1-zoom-tabs/)不错，但我想多次使用它。我需要做什么才能完成这项工作？

CSS 也使图像混淆；有没有其他方法可以使用它们？

例子

```
#one {
  background: url(http://...) no-repeat center center;
}

#two {
  background: url(http://...) no-repeat center center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:14:13.367

我返工了插件的js：

[http://pastebin.com/D1WupuW1](http://pastebin.com/D1WupuW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:28:42.913

我刚刚查看了该网站，源代码看起来已经过时并且没有维护。建议使用单独的、文档齐全的插件，例如[jQuery Zoom](http://www.jacklmoore.com/zoom)和[jQuery UI 的滑块](http://docs.jquery.com/UI/Slider)作为更好的选择。

# jquery - IE 8 jquery 表单提交事件未触发 - MVC3

> ID：12152272
> 
> 赞同：0
> 
> 时间：2012-08-28T03:08:15.620
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

让我自己在 IE 8 中遇到问题。当我一起引用以下 2 时，表单提交事件不会触发。当我删除任何一个时，事件就会触发。

```
<script type="text/javascript" src="@Url.Script("jqueryMain/jquery.validate.js")"></script
<script type="text/javascript" src="@Url.Script("jqueryMain/jquery.validate.unobtrusive.min.js")"></script> 
```

js调用

```
<script type="text/javascript">

            $(document).ready(function () {
                $("#TransfersSearchForm").submit(function () {
                    alert(1);
                    return false;
                });
            });
        </script> 
```

我需要下载最新的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:49:19.360

下载了最新的 jquery.validation.js 和 IE8 问题得到了修复。

下载链接：http: [//bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

# java - java正则表达式，读取文件夹

> ID：12152280
> 
> 赞同：0
> 
> 时间：2012-08-28T03:09:05.293
> 
> 标签：java, regex, pattern-matching

我正在尝试创建一个程序，该程序返回文件中所有视频文件和文件夹的名称。我已经找到了视频文件的模式并且工作正常

```
String pattern = "(^\\w[ .A-z0-9_-]+(\\.mp4$|\\.avi$|\\.mkv$))"; 
```

但我坚持如何阅读文件夹，我尝试过的所有内容都有模式阅读文件夹，还有其他文件。由于文件夹名称可能在任何地方都有点，因此很难通过扩展来隔离。关于如何只读文件夹的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:52:36.687

我使用此代码（在 BalusC 的帮助下）查找文件名及其扩展名。

如果您的正则表达式正确，那么只需将其插入此处并根据您的要求添加其余代码。

```
public static void main(String[] args){
    File[] files = new File("temp").listFiles();
    showFiles(files);
}

public static void showFiles(File[] files) {
    for (File file : files) {
        if (file.isDirectory()) {
            System.out.println("Directory: " + file.getName());
            showFiles(file.listFiles()); 
        } else {
            System.out.println("File: " + file.getName());
            getFileNameAndSuffix(file);
        }
    }
}
public static void getFileNameAndSuffix(File file) 
{
    int index = file.getName().lastIndexOf('.');
    System.out.println(file.getName().substring(0, index));
    System.out.println(file.getName().substring(index));
} 
```

# php - 显然更新查询没有错误，但记录没有更新

> ID：12152289
> 
> 赞同：2
> 
> 时间：2012-08-28T03:10:59.570
> 
> 标签：php, mysql, sql, html

这是我的usersedit.php代码，另一个是users-edit-action.php在更新后表示数据已成功更新但它不会改变mysql中的任何内容..请帮我解决问题，谢谢用户-编辑.php

```
<?php include("../includes/config.php"); ?>
<?php
if ($_SESSION["isadmin"])
{

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$accountid=$_GET["id"];
$result = mysql_query("SELECT * FROM accounts WHERE (id='".$accountid."')");
while($row = mysql_fetch_array($result))
{
$id=$row['id'];
$firstname = $row['firstname'];
$lastname = $row['lastname'];
$email=$row['email'];
$type=$row['type'];
}
mysql_close($con);
?>
<!DOCTYPE HTML>
<html>
<head>
<title>Edit User</title>
<link rel="StyleSheet" href="../admin/css/style.css" type="text/css" media="screen">
</head>

<body>
<?php include("../admin/includes/header.php"); ?>
<?php include("../admin/includes/nav.php"); ?>
<?php include("../admin/includes/manage-users-aside.php"); ?>
<div id="maincontent">

<div id="breadcrumbs">
<a href="">Home</a> >
<a href="">Manage Users</a> >
<a href="">List Users</a> >
Edit User
</div>
<h2>Edit User</h2>

<form method="post" action="users-edit-action.php">
<input type="hidden" value="<?php echo $accountid; ?>" name="id" />
<label>Email/Username:</label><input type="text" name="email" value="<?php echo $email;     ?>" /><br /><br />
<label>Password:</label><input type="password" name="password" value="<?php echo     $password;?>" /><br /><br />
<label>First Name:</label><input type="text" name="firstname" value="<?php echo      $firstname; ?>" /><br /><br />
<label>Last Name:</label><input type="text" name="lastname" value="<?php echo $lastname; ?>" /><br /><br />
<label>Type:</label><br />
<input type="radio" name="type" value="S" <?php if ($type == 'S') echo     'checked="checked"'; ?> />Student<br />
<input type="radio" name="type" value="T" <?php if ($type == 'T') echo 'checked="checked"'; ?> /> Teacher<br />

<input type="submit" value="Edit" />
</form>
</div>
</body>
<?php include("../admin/includes/footer.php"); ?>
</html>
<?php

}    else
{
header("Location: ".$fullpath."login/unauthorized.php");
}
?> 
```

这是 users-edit-action.php

```
<?php include("../includes/config.php");?>
<?php

$id=$_POST["id"];
$firstname=$_POST["firstname"];
$lastname=$_POST["lastname"];
$email=$_POST["email"];
$type=$_POST["type"];

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$query=("UPDATE accounts SET firstname='".$firstname."' , lastname='".$lastname."         ,password='".$password."' , email='".$email."' type='".$type."' WHERE (id='".$id."')");
$result = mysql_query($query);
echo "User has been updated Successfully!!";
mysql_close($con);
?> 
```

请帮我弄清楚并解决问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:19:44.050

**[转义作为 MySQL 保留关键字的](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)**列名

```
$query=("UPDATE accounts 
         SET firstname='" . $firstname . "'   ,
             lastname='" . $lastname . "      ,
              `password`='" . $password . "'  ,          
              email='" . $email . "'          ,            // <== forgot comma
              type='" . $type . "' WHERE (id='".$id."')
        "); 
```

`Password`应该逃脱。
您忘记在`email`and之间添加逗号`type`。

您当前的查询容易发生**[SQL 注入](http://bobby-tables.com/)**。使用**[PDO](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

使用 PDO 扩展的示例：

```
<?php

    $query = "UPDATE accounts 
               SET firstname = ?,
                   lastname = ?,
                   `PassWord` = ?,          
                   email = ?,          
                   type = ? 
            WHERE id = ?
        ";

    $stmt = $dbh->prepare($query);
    $stmt->bindParam(1, $firstname);
    $stmt->bindParam(2, $lastname);
    $stmt->bindParam(3, $password);
    $stmt->bindParam(4, $email);
    $stmt->bindParam(5, $type);
    $stmt->bindParam(6, $id);

    $stmt->execute();
    echo ($stmt) ? "Successful" : "Error Occured";

?> 
```

这将允许您使用单引号插入记录。

# c# - 即使它说两种类型相同，Assert.IsInstanceOfType 也会失败

> ID：12152299
> 
> 赞同：2
> 
> 时间：2012-08-28T03:12:26.517
> 
> 标签：c#, asp.net-mvc, unit-testing

这怎么可能发生？我该如何解决？

![在此处输入图像描述](../Images/03660c10ab2dc3302c07a059f919b312.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T03:16:13.943

我的*猜测*（我强调这只是一个猜测）是测试程序集和被测程序集要么引用不同版本的`System.Web.Mvc`程序集，要么最终解析不同的版本。无论哪种方式，最终测试程序集都需要一个版本，而被测程序集返回另一个版本。

尝试进行清理然后完全重建，并检查其他罪魁祸首，如@SLaks 在评论中指出的 web.config 绑定重定向。

# timer - 一定时间后如何产生碰撞事件？

> ID：12152303
> 
> 赞同：0
> 
> 时间：2012-08-28T03:13:23.687
> 
> 标签：timer, coronasdk, collision

我正在尝试学习 Corona 以制作“虚拟宠物”之类的游戏。当诸如苹果之类的物品留在地板上大约 15 秒时，我想尝试删除并重新生成该物品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:26:57.297

您不希望在一段时间后发生碰撞事件......

你想检查一个物体在 15 秒后是否静止不动！

只需将 enterFrame 事件添加到您的运行时。

然后，如果位置发生变化，则检查每个对象并在对象上设置一个变量，例如：

```
if myObject.x ~= myObject.lastX and myObject.y ~= myObject.lastY then
    myObject.timeSinceLastMovement = event.time
end

myObject.lastX = myObject.x
myObject.lastY = myObject.y 
```

enterFrame 中的 event.time 通常以毫秒为单位跟踪应用程序启动以来的时间。

然后检查某个对象是否停止了 15 秒。

```
if myObject.timeSinceLastMovement + 15000 < event.time then
    -- code to respawn myObject go here
end 
```

# javascript - 围绕一个点旋转一个 html 元素

> ID：12152305
> 
> 赞同：0
> 
> 时间：2012-08-28T03:14:00.207
> 
> 标签：javascript, jquery, html, css, rotation

如何围绕任意点旋转 html 元素。
我知道有一个 css`rotate trasform`属性可以围绕自身旋转元素。**但我想像时钟指针**一样旋转它。
![在此处输入图像描述](../Images/0b648034f64b21b734ee2225e44a23ca.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:22:55.300

您可以使用变换原点：

[https://developer.mozilla.org/En/CSS/-moz-transform-origin](https://developer.mozilla.org/En/CSS/-moz-transform-origin)

如此处所述：

[CSS 相对于参考点的旋转](https://stackoverflow.com/questions/6633536/css-rotation-with-respect-to-a-reference-point)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:27:58.080

我之前使用旋转来实现这个效果。您需要做的就是以一定的透明度扩展针 png 文件。假设你有一根尺寸为 5x100 的针，只需将针设为 5x200，图片的一半是针，另一半是透明的。然后您可以旋转该图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:22:44.487

你将不得不在这个上使用 Javascript。正如预期的那样，这是我通过谷歌搜索找到的一些特别使用 jQuery 的东西。

*   [克里斯·科耶](http://css-tricks.com/css3-clock/)
*   [乔恩·库姆](http://joncom.be/code/css-clocks/)
*   [还有7个人...](http://www.webdeveloperjuice.com/2010/02/07/7-wonderful-analog-and-digital-clocks-using-css-and-javascript/)

# security - 为演示绕过浏览器安全性

> ID：12152306
> 
> 赞同：0
> 
> 时间：2012-08-28T03:14:03.360
> 
> 标签：security, browser

我要制作一个演示，其中首先使用域创建一个安全会话（我们称之为 paranoids.com），然后一堆本地读取的 html+javascript（我的演示）想要使用该安全会话。我们在 linux/openSuse 平台上使用 google-chrome，从 --disable-web-security 和 --allow-file-access-from-files 开始。

为什么我需要这样做？我需要从该域中抓取一些页面并使用替代渲染器重新渲染它们。我们对其他域名所有者绝对没有发言权。

最好的方法是什么，而不要求我可怜的养家糊口经历技术障碍？使用某些命令行参数运行时，我的脚本可以访问域 paranoids.com 的 JSESSIONID 吗？或者，这是不可能的，用户必须手动复制/粘贴 cookie 吗？

感谢您提供任何有助于实现该目标的想法。

# mysql - 使用实体框架通过 SSH 隧道连接到 MySQL

> ID：12152310
> 
> 赞同：1
> 
> 时间：2012-08-28T03:14:23.310
> 
> 标签：mysql, visual-studio-2010, entity-framework

我有一个运行 MySQL 的 Linux 实例。我得到了 MySQL 连接器，并且正在尝试在 Visual Studio 中设置与数据库的新连接。但它在 Amazon Web Services 上，并且需要通过 SSH 隧道完成连接。我已经让它在 MySQL Workbench 上运行，但 Visual Studio 似乎没有为此提供选项。

那可能吗 ？

这是我正在谈论的提示：![在此处输入图像描述](../Images/3c8c865a817ab49992ecedb07e4b0516.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T04:59:51.213

试试这个： http: [//www.chiark.greenend.org.uk/~sgtatham/putty/](http://www.chiark.greenend.org.uk/~sgtatham/putty/)

或者 MySQL Workbench，它内置了 SSH 隧道。 [http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

# c++ - c ++ getline读取整个文件

> ID：12152311
> 
> 赞同：2
> 
> 时间：2012-08-28T03:14:51.857
> 
> 标签：c++, file, text, getline

我正在使用 std::getline() 逐行读取文本文件。但是，第一次调用 getline 是读取整个文件！我还尝试将分隔符明确指定为 '\n'。任何想法为什么会发生这种情况？

我的代码：

```
std::ifstream serialIn;
...
serialIn.open(argv[3]);
...
std::string tmpStr;
std::getline(serialIn, tmpStr, '\n');
// All 570 lines in the file is in tmpStr!
...
std::string serialLine;
std::getline(serialIn, serialLine);
// serialLine == "" here 
```

我正在使用 Visual Studio 2008。文本文件有 570 行（我在 Notepad++ fwiw 中查看它）。

**编辑：**我通过使用 Notepad++ 将输入文本文件中的行尾转换为“Windows”行尾来解决这个问题。该文件是使用 c++ 代码在每行末尾使用 '\n' 编写的。为什么 getline() 需要 Windows 行尾 (\r\n)？这是否与字符宽度或 Microsoft 实现有关？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T03:16:18.517

只是猜测，但是您的文件是否可以具有 Unix 行尾并且您在 Windows 上运行？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:45:03.113

您将在代码 ( ) 中看到的*换行符*`'\n'`与平台的实际*行尾表示*（回车符 (CR) 和换行符 (LF) 字节的某种组合）混淆了。

标准 I/O 库函数自动将平台的行尾转换为文本模式流的概念换行符（默认值）。请参阅[文本和二进制 I/O 有什么区别？](http://www.c-faq.com/stdio/textvsbinary.html)来自 comp.lang.c 常见问题解答。（尽管这来自 C FAQ，但这些概念也适用于 C++。）由于您使用的是 Windows，标准 I/O 函数默认情况下将换行符写入为 CR-LF，并在读取时期望 CR-LF 用于换行符。

如果您不希望完成这些转换并且希望看到原始的、未掺杂的数据，那么您应该将流设置为二进制模式。在二进制模式下，`\n`只对应LF，`\r`只对应CR。

`"b"`在 C 中，您可以通过将其作为标志之一传递给来指定二进制模式`fopen`：

```
FILE* file = fopen(filename, "rb"); // Open a file for reading in binary mode. 
```

在 C++ 中：

```
 std::ifstream in;
 in.open(filename, std::ios::binary); 
```

或者：

```
 std::ifstream in(filename, std::ios::binary); 
```

# sql-server - 如何让实体框架覆盖现有数据库而不是创建新数据库？

> ID：12152312
> 
> 赞同：1
> 
> 时间：2012-08-28T03:14:58.320
> 
> 标签：sql-server, entity-framework, appharbor, entity-framework-migrations

我正在尝试在 AppHarbor 上部署实体框架，并且我希望它能够使用自动迁移进行迁移。

我遇到的麻烦是在 AppHarbor 数据库中，系统表中有 dbo._MigrationHistory 表。在 AppHarbor 中，我无权从头开始创建数据库（所以我无法让 EF 创建它），也无法使用备份恢复它。我认为，我唯一能做的就是使用 SQL Server 的导入/导出向导，它不会复制系统表。所以排除了在本地创建数据库并将其导出到 AppHarbor 服务器。

这个问题以及我过去使用 EF 的许多其他问题的解决方案是让 EF 执行与创建数据库相同的例程，但只删除现有数据库上的所有内容并从那里开始。NHibernate 就是这样做的。我可以让EF做吗？

不幸的是，AppHarbor 建议的 DontDropDbJustCreateTablesIfModelChanged IDatabaseInitializer 并没有做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:34:22.160

您可以创建一个不会用作系统表的[自定义 SQL 生成器。](http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table/)`MigrationHistory`

# java - 关于jackson转换Java dataType

> ID：12152313
> 
> 赞同：1
> 
> 时间：2012-08-28T03:15:01.057
> 
> 标签：java, jackson

有一个项目使用 Jackson，并有一个 Java 对象 Data。在对象中，有一个属性，也是一个对象Raw。在这个对象中，有一个属性，`List<Object[]>` 例如：

```
public class Data{
    Raw raw;
}

public class Raw{
    List<Object[]> list;
} 
```

如果`Object[]`有一个数据类型：`long`，我给一个值：123，那么杰克逊会将此数据类型转换为`int`，

即：如果值为`length < long && > int`，则数据类型也是`long`，如果`length < int`，则数据类型将变为`int`。

我使用的方法：

```
 byte[] bytes = writeValueAsBytes(Data), Data data = readValue(bytes, Data.class) 
```

转换时如何保留原始数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:38:59.843

杰克逊做了我认为你想要的：

```
@Test
public void testJackson() throws Exception {
    List<Number> numbers = new ArrayList<Number>();
    numbers.add(100L);
    numbers.add(new Long(Integer.MAX_VALUE) + 1000L);
    numbers.add(10.0);
    ObjectMapper om = new ObjectMapper();
    System.out.println(om.writeValueAsString(numbers));
    List<Number> newNumbers = om.readValue(om.writeValueAsString(numbers), ArrayList.class);
    System.out.println(newNumbers);
    assertEquals(Integer.class, newNumbers.get(0).getClass());
    assertEquals(newNumbers.get(1).getClass(), Long.class);
    assertTrue(! numbers.equals(newNumbers) );
} 
```

但是`numbers`不等于`newNumbers`，因为`100L`应该是整数。JSON 可以处理的最大数字是 64 位双精度。

如果您像二进制图像那样进行数据序列化，那么我会将数据编码为 Base64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:48:16.230

您可能想改用 type of `Number`，因此您可以轻松获取所需的任何类型的值。正如其他人指出的那样，JSON 只有“整数”类型，内容中没有任何内容可以指出预期的 Java 类型。这意味着您的 Class 必须指明预期的类型；如果您建议的只是`Object`，则可以自由选择最有效的表示。

# javascript - 使用 javascript 使用下拉菜单更改表格单元格的颜色

> ID：12152325
> 
> 赞同：2
> 
> 时间：2012-08-28T03:16:24.200
> 
> 标签：javascript, drop-down-menu, html-table, background-color

我想使用一些 javascript 代码来更改表格中单个单元格的背景颜色。

我下面有一些代码可以让我更改页面背景颜色。这在概念上与我想做的类似，但我真的希望能够只更改一个单元格......而不是整个页面。

我曾想过将其余的单元格边框和背景颜色设为白色，让我想要操作的单元格透明，但我认为这可能是一种蛮力方法，会在路上给我带来麻烦。

有没有人有任何建议用 javascript 做到这一点？

页面背景颜色更改代码在这里：

```
<form name="bgcolorForm">Try it now: 
<select onChange="if(this.selectedIndex!=0)
document.bgColor=this.options[this.selectedIndex].value">
<option value="choose">set background color    
<option value="FFFFCC">light yellow
<option value="CCFFFF">light blue
<option value="CCFFCC">light green
<option value="CCCCCC">gray
<option value="FFFFFF">white
</select></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:24:08.420

你在寻找这样的东西吗？[http://jsfiddle.net/2KdmA/](http://jsfiddle.net/2KdmA/) 但是如果你要大量操作我建议使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:24:22.450

只需使用： `document.getElementById('theID').style.backgroundColor ="#" + value`在单元格上。

你在使用 jQuery 吗？还是必须是纯JS？

使用 jQuery，您可以使用`$(selector).css("background-color", value);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:25:05.147

如果它只有一个单元格（不重复），您可以给它一个特定的 ID，然后在 onchange 事件中定位它。

例如，如果您的 td id = "mycell"

然后在选择更改时调用函数 updateColor

```
<select onChange="updateColor(this.options[this.selectedIndex].value);"> 
```

这是功能

```
function updateColor(color){
    var myCell = document.getElementById('mycell');     
        myCell.style.background = "#"+color;

} 
```

查看更新的[小提琴](http://jsfiddle.net/9w4HZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T03:37:39.403

如果您想通过单元格坐标访问，您可以执行类似的操作

```
function cellColour(tableId, row, column, col){
    var t = document.getElementById(tableId);
    if(!t) throw '#'+tableId+' does not exist.';
    if(t.rows.length <= row)  throw 'Row '+row+' of #'+tableId+' does not exist.';
    t = t.rows[row];
    if(t.cells.length <= column)  throw 'Column '+column+' of row '+row+' of #'+tableId+' does not exist.';
    t = t.cells[column];
    t.style.backgroundColor = col;
} 
```

# javascript - Javascript mouseup 和 mousedown 事件

> ID：12152328
> 
> 赞同：0
> 
> 时间：2012-08-28T03:17:13.933
> 
> 标签：javascript, canvas

我正在尝试将卡片的图像拖放到 javascript 的画布上，但即使 mouseup 事件在 main() 内，它似乎也不起作用。选择卡片后，它会跟随鼠标，但当我松开鼠标时它似乎没有松开。我也知道由于不清除屏幕而重复图像。

```
function main(){
var ctx = cvs.getContext("2d");
var img = new Image();
img.src = "allcards.png";
var imgX = 75;
var imgY = 75;
draw();

function draw(){
    ctx.drawImage(img,0,0,97,129,imgX,imgY,100,100);    
}

cvs.addEventListener("mouseup", function(ev){
        greaterX = false;
        lessX = false;
        greaterY = false;
        lessY = false;
    }
);

cvs.addEventListener("mousedown", function(ev){
        if(ev.clientX <= (imgX + 97)){
            var greaterX = true;
        }
        if(ev.clientY <= (imgY + 129)){
            var greaterY = true;
        }
        if(ev.clientX >= imgX){
            var lessX = true;
        }
        if(ev.clientY >= imgY){
            var lessY = true;
        }
        if(greaterX == true)
            if(greaterY == true)
                if(lessX == true)
                    if(lessY == true)
                        cvs.addEventListener("mousemove", function(ev){
                            var offsetX = (ev.clientX - imgX);
                            var offsetY = (ev.clientY - imgY);
                            imgX = imgX + offsetX;
                            imgY = imgY + offsetY;
                            draw();
                        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T03:25:43.093

`greaterX`,`lessX`等都`var`在你的函数内部定义`mousedown`，这意味着它们的范围仅限于`mousedown`函数。

因此，尝试将它们设置回函数`false`内部是没有用的`mouseup`。您需要在函数的主要部分声明变量：

```
function main() {
    var greaterX, lessX, greaterY, lessY;
    var ctx = cvs.getContext("2D");
    //etc... 
```

现在，简单地将`greaterX`,`lessX`等设置回 false 是不够的，因为`mousemove`里面的事件检查器`mousedown`仍然处于活动状态。当您应用事件侦听器时，它会一直留在那里，直到您将其移除。

因此，下一步是将事件函数分离为它自己的函数（我使用“mouseMoveHandler”作为名称）并使用inside of`mousemove`删除事件侦听器。[`.removeEventListener(type, listener, useCapture)`](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)`mouseup`

`mousemove`功能：

```
function mouseMoveHandler(ev) {
    offsetX = (ev.clientX - imgX);
    offsetY = (ev.clientY - imgY);
    imgX = imgX + offsetX;
    imgY = imgY + offsetY;
    draw();
} 
```

功能（`mousedown`重要部分）：

```
 if (greaterX === true) { //you need the brackets for multi-line if statements
        if (greaterY === true) {
            if (lessX === true) {
                if (lessY === true) {
                    cvs.addEventListener("mousemove",mouseMoveHandler,false);
                }
            }
        }
    } 
```

最后，`mouseup`函数：

```
cvs.addEventListener("mouseup", function(ev) {
    greaterX = false;
    lessX = false;
    greaterY = false;
    lessY = false;
    cvs.removeEventListener('mousemove',mouseMoveHandler,false);
}); 
```

这是一个带有解决方案的[jsFiddle](http://jsfiddle.net/nvM3n/)，但不使用您的图像。

# python - 如何在 python 中使用 scrapy 潦草文件托管网站？

> ID：12152330
> 
> 赞同：0
> 
> 时间：2012-08-28T03:17:28.650
> 
> 标签：python, scrapy, web-crawler

谁能帮我弄清楚如何潦草文件托管网站，如 filefactory.com？我不想下载所有托管的文件，只想用scrapy索引所有可用的文件。

我已经阅读了关于爬虫类的教程和文档。如果我只将网站主页作为起始 url，我就不会潦草整个网站，因为潦草取决于链接，但起始页面似乎不指向任何文件页面。这就是我正在考虑的问题，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:34:45.793

我有两条建议。第一个是确保您正确使用 Scrapy，第二个是收集更大的 URL 样本的最佳方法。

**第一的：**

确保您使用`CrawlSpider`来抓取网站。这是大多数人在想要获取已抓取页面上的所有链接并将其转换为 Scrapy 抓取的新请求时使用的方法。有关爬虫的更多信息，请参见[http://doc.scrapy.org/en/latest/topics/spiders.html 。](http://doc.scrapy.org/en/latest/topics/spiders.html)

如果你正确地构建了爬虫，它应该能够找到并爬取每个页面的大部分链接。

但是，如果包含下载链接的页面本身没有被 Scrapy 遇到的页面链接到，那么 Scrapy 就无法知道它们。

解决此问题的一种方法是在网站上使用多个入口点，在您知道 Scrapy 难以找到的区域中。您可以通过在`start_urls`变量中放置多个初始 url 来做到这一点。

**第二**

由于这很可能已经是您正在做的事情，因此这是我的下一个建议。如果您进入 Google，然后键入`site:www.filefactory.com`，您将看到一个链接，指向 Google 为 www.filefactory.com 编制索引的每个页面。确保您还检查`site:filefactory.com`，因为存在一些规范化问题。现在，当我这样做时，我看到大约有 600,000 个页面被编入索引。您应该做的是爬取谷歌，并首先收集所有这些索引网址，并将它们存储在数据库中。然后，使用所有这些在 FileFactory.com 网站上进行进一步搜索。

**还**

如果您拥有 Filefactory.com 的会员资格，您还可以对 scrapy 进行编程以提交表单或登录。这样做可能会允许您进一步访问。

# c# - 您如何在 Google Drive SDK 中获取文件修订的内容？

> ID：12152335
> 
> 赞同：6
> 
> 时间：2012-08-28T03:18:55.133
> 
> 标签：c#, .net, google-drive-api

我正在尝试使用 Google Drive .NET SDK 获取 google drive（实际上是 docs）文件的修订历史。我可以很好地获取给定文件的修订列表的元数据，但似乎对于任何给定的修订，DownLoadUrl 字段始终为空，并且 ExportLinks 都指向文档的最新完整版本（即，而不是元数据指示的修订版）。

有什么建议么？这就是它的工作原理吗？我注意到 API 资源管理器中 Revision 对象的返回值的行为方式相同。

[https://developers.google.com/drive/v2/reference/revisions/get](https://developers.google.com/drive/v2/reference/revisions/get)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:01:32.453

该`downloadUrl`字段仅填充内容存储在云端硬盘中的文件，而不填充 Google 原生格式。

如果 API 仍未按预期运行，请编辑您的问题以添加文件元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T17:42:47.787

我尝试了一下并使用了这个链接：

[https://developers.google.com/drive/v2/reference/revisions/list](https://developers.google.com/drive/v2/reference/revisions/list)

在项目中，您有指向该项目的链接。

我也尝试了
[https://developers.google.com/drive/v2/reference/revisions/get](https://developers.google.com/drive/v2/reference/revisions/get) 并且它有效。

它返回修订版的 downloadUrl。

# tfs - 在 TFS 构建通知工具中更改协调检查间隔

> ID：12152337
> 
> 赞同：1
> 
> 时间：2012-08-28T03:19:02.583
> 
> 标签：tfs, msbuild

是否可以将 TFS 构建通知工具的默认检查间隔从 2 分钟更改为更小的值？这让我很紧张，我希望 MS 决定给它一个间隔参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:09:20.957

看起来构建通知工具的轮询间隔是从注册表设置中获得的；在下面的示例中，我将其设置为 10 秒：

```
[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation\Build\BuildNotification\Subscriptions]
"PollingInterval"="00:00:10" 
```

# powershell - 使用 Get-AdGroupMember 递归查找嵌套组名称

> ID：12152338
> 
> 赞同：1
> 
> 时间：2012-08-28T03:19:08.327
> 
> 标签：powershell, active-directory

我正在使用[Get-AdGroupMember -recursive](http://technet.microsoft.com/en-us/library/ee617193.aspx) powershell 命令列出组中的用户和嵌套组中的用户。

我可以在输出结果中输出嵌套组的名称吗？

即用户A在A组，用户B在B组，用户C在C组

C 组在 B 组中，B 组在 A 组中。用户 C 正确显示为在 A 组中具有组成员身份，但如果不深入研究组，最初并不明显。

在我的“真实世界”案例中，顶层有大约七个组，然后是下一层的五个/六个组，所以我必须查看每个组以找到用户。返回的一些结果是三个嵌套组，需要一些挖掘才能确定用户实际属于哪个组。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:25:19.770

您将找到[此](https://stackoverflow.com/a/7794945/608772)答案的结尾，这是一种使用 C# 中的 .NET 3.5 程序集查找用户所属的所有组（以递归方式）的方法，这是对 PowerShell 的转换。这不是您问题的确切答案，但是在您的“现实世界”中，它应该会有所帮助。

```
# Load the .NET 3.5 assembly
Add-Type -AssemblyName System.DirectoryServices.AccountManagement

# Get an enum value
$ct = [System.DirectoryServices.AccountManagement.ContextType]::Domain

# Retreive the user as a user principal
$username = "jblanc"
$up = [System.DirectoryServices.AccountManagement.Principal]::FindByIdentity($ct,$username)

# Get all the authorization groups a user belongs to
$up.GetAuthorizationGroups() 
```

# portlet - websphere 门户 portlet 首选项未显示在配置中

> ID：12152340
> 
> 赞同：0
> 
> 时间：2012-08-28T03:19:32.290
> 
> 标签：portlet

我在 portlet.xml 中添加了参数。它不会显示在 portlet 的配置中。我以管理员身份登录。

```
<preference>
    <name>isDisablePortlet</name>
    <value>false</value>
</preference>
<preference>
    <name>disablePortletText</name>
    <value>xxxx</value>
</preference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:10:06.450

您不能只在部署后编辑文件系统上的首选项。仅在部署时读取值。部署后，您必须使用门户服务器的管理区域或为您的 portlet 创建配置模式。

# rspec - 在 rspec 中的钩子之前与之前相同：all?

> ID：12152342
> 
> 赞同：46
> 
> 时间：2012-08-28T03:19:38.053
> 
> 标签：rspec, rspec2, rspec-rails

我想知道`before`（如下所示）是否与`before :all`RSpec 中的相同。有时既没有`:each`也没有`:all`指定，这让我对`before`实际做了什么感到困惑。

```
require 'spec_helper'

describe "this is a description" do 
  before do # vs. before :all or before :each
   # do something...
  end
end 
```

如果有人能解释差异（如果有的话），将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-28T04:06:43.570

所以答案是 No.`before`等价于`before :each`, not`before :all`

[测试示例](https://gist.github.com/3494874)。

**更新**：哇，这个问题很受欢迎。为了避免认知超负荷，我建议您明确声明`:each`或`:all`。

# iphone - 架构 armv6 的未定义符号

> ID：12152345
> 
> 赞同：2
> 
> 时间：2012-08-28T03:20:05.447
> 
> 标签：iphone, ios, armv6

我的应用程序在运行 iOS 5.0 的 iPhone 模拟器上编译良好，但在运行 iOS 4.2.1 的旧物理 iPod touch 上却失败了。

我收到以下错误：

```
Undefined symbols for architecture armv6:
  "_OBJC_CLASS_$_TestFlight", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture armv6 
```

我查看了有关此的其他问题： [架构 armv6 的未定义符号，更新到 iOS 4.3](https://stackoverflow.com/questions/5403575/undefined-symbols-for-architecture-armv6-updating-to-ios-4-3)

但他们的解决方案不起作用。确实，TestFlight.h 不在 Compile sources 中，但是将其拖到 Compile Sources 并没有改变错误消息。（没有 TestFlight.m；我在“Link Binary with Libraries”中有 libTestFlight.a

同样，`#import "TestFlight.h"`在 AppDelegate.m 中删除和重新键入也没有改变任何东西。

还有什么可能导致我的 iPod 上出现此编译错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:12:46.063

首先，.h 文件不是源文件，因此请再次将其从“编译源”中删除。

关于错误 - 您可能正在使用不支持 armv6 的 TestFlight SDK 版本 - 他们在最近的版本中重新启用了此架构。更新到最新版本的 SDK，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:05:06.497

点击你的项目，选择

> 目标

然后转到

> 构建阶段

在

> 编译源

添加了 AppDelegate.m，它可能没有连接，编译器无法找到该文件。另见[链接](https://stackoverflow.com/questions/5403575/undefined-symbols-for-architecture-armv6-updating-to-ios-4-3)

# visual-studio-2010 - Visual Studio 强制在网站调试时启动 WP 模拟器

> ID：12152350
> 
> 赞同：0
> 
> 时间：2012-08-28T03:20:45.190
> 
> 标签：visual-studio-2010, debugging, windows-phone-7-emulator

我有 VS 解决方案，它混合了网站、控制台应用程序和 Windows Phone 应用程序。

当我选择我的网站作为启动项目时，在设备选择中它只出现 Windows Phone Emulator Devices 而不是调试选择。

因此，当我点击 F5 模拟器弹出窗口时，除非我选择 WP 项目，否则我不想要它。

如果我只想调试网站，是否有任何设置可以应用它不会显示 WP 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:34:00.120

In visual studio go to Build -> Configuration Manager, where all the projects in the solution will be listed. There is an option for the user to select which all projects needs to be selected for building and there you can select the only ones you need to build.

# jquery - jquery插件：创建

> ID：12152358
> 
> 赞同：-1
> 
> 时间：2012-08-28T03:22:38.283
> 
> 标签：jquery, json, plugins

我期望的输出是一个无序列表，它是用 jquery 创建的......它从一个 json 文件中输入（当我不将它创建为插件时它工作正常）。我对构建插件的概念非常陌生。我试图创建一个不输出我的无序列表的

json文件结构

```
{
    "Categories": [
    {
        "cat_id":"1",
        "name":"Main Menu1",
         "sub_categories":[
         {
             "cat_id":"10",
             "name":" Sub Menu11",
             "sub_level_one_link":"http:\/\/one.com"
         }, 
```

我的.js文件

```
//create plugin 
jQuery.fn.emrMenu= function (options) {
    myoptions = jQuery.extend ({ url: "error" }, options);

    if (myoptions.url=="error") { alert("Error:No data recieved"); return false; }
    $(this).html (myoptions.url);

    return this.each (function () { 

        //alert(myoptions.url+this.id);

        $.getJSON(myoptions.url,  function(data)
        {
            $.each(data.Categories, function(i, category)
            { 
                alert("test1");
                //get all sub menu items in list indexes      
                var submenudata='';
                $.each(category.sub_categories, function(i, sub_categories)
                { 
                    submenudata += "<li><a href='"+sub_categories.sub_level_one_link+"' <span>"+sub_categories.name+"</span></a></li>";

                });
                var menudata ="<li id='"+category.cat_id+"' class='has-sub '><a href='#'><span>"+category.name+"</span></a><ul>"+submenudata+"</ul></li>";                      
                //stringify unordered list and bind to div              
                var menu="<ul>"+menudata+"</ul>";

                //   $(menu).appendTo("#"this.id);
             });
        });           

        //alert (this.id);

    }); 
} 
```

并调用插件：

```
<script>
$(document).ready(function() {

    $('#menu_n').emrMenu ({ url: "menu_data.json"});

});
</script> 
```

在这一点上我很困惑任何帮助都非常感谢欢呼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:39:40.177

[http://jsfiddle.net/c6vnp/7/](http://jsfiddle.net/c6vnp/7/) 我用示例数据替换了 url 并删除了 .get 调用。但它应该给出与使用 ajax 获取数据时相同的结果。

我所做的是

```
var myoptions = jQuery.extend ({ url: "error" }, options); 
```

代替

```
myoptions = jQuery.extend ({ url: "error" }, options); 
```

此外，整个插件应该包含在

```
(function($){

})(jQuery); 
```

并将 jQuery 称为 $

此外，将菜单附加到“this”的注释掉的行，“this”不是你想要的。您应该在插件的开头定义 $this = $(this) 以便您始终可以访问原始的“this”。密切关注“这个”是什么是非常重要的。我总是 console.log(this); 每隔一段时间，只是为了确保。

# java - 正则表达式问题 - 找到确切的变量

> ID：12152364
> 
> 赞同：0
> 
> 时间：2012-08-28T03:24:18.633
> 
> 标签：java, regex

我正在寻找更改以下代码：

```
 x = 0;
            dx = (val - (x * x)) / (2.0 * x);
            x = x + dx;
            diff = val - (x * x);
            x = x;
return (x); 
```

进入：

```
VARIABLE_TO_MONITOR_x = 0;
                dx = (val - (VARIABLE_TO_MONITOR_x * VARIABLE_TO_MONITOR_x)) / (2.0 * VARIABLE_TO_MONITOR_x);
                VARIABLE_TO_MONITOR_x = VARIABLE_TO_MONITOR_x + dx;
                diff = val - (VARIABLE_TO_MONITOR_x * VARIABLE_TO_MONITOR_x);
                VARIABLE_TO_MONITOR_x = VARIABLE_TO_MONITOR_x;
    return (VARIABLE_TO_MONITOR_x); 
```

目前我正在使用：

```
strLine.matches("^.*(?<![a-zA-Z])" +variableN[1] + "(?![a-zA-Z]).*$") 
```

但这会返回以下内容：

```
 VARIABLE_TO_MONITOR_x = 0;
            dVARIABLE_TO_MONITOR_x = (val - (VARIABLE_TO_MONITOR_x * VARIABLE_TO_MONITOR_x)) / (2.0 * VARIABLE_TO_MONITOR_x);
            VARIABLE_TO_MONITOR_x = VARIABLE_TO_MONITOR_x + dVARIABLE_TO_MONITOR_x;
            diff = val - (VARIABLE_TO_MONITOR_x * VARIABLE_TO_MONITOR_x);
            VARIABLE_TO_MONITOR_x = VARIABLE_TO_MONITOR_x;
return (VARIABLE_TO_MONITOR_x); 
```

我如何调整这个正则表达式以不捕获不是我正在寻找的变量的实例？这会捕获变量包含在另一个单词中的实例......

任何帮助将不胜感激..

正则表达式菜鸟..

**编辑：** 这里也是替换的代码..

```
if (strLine.matches("^.*(?<![a-zA-Z])" + variableN[1] + "(?![a-zA-Z]).*$"))
{
    strLine = strLine.replace(variableN[1], VARIABLES + variableN[1]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T03:32:27.967

```
\b 
```

这是使用“单词边界”的好时机！

```
strLine.split("\\b" +variableN[1] + "\\b"); 
```

将返回一个由您的变量名完全分解的线段数组。"\b" 匹配单词的边缘。

然后，您可以使用您的新变量名一次将其打印出来，将其粘合在一起。或者更好：

```
strLine.replaceAll("\\b" +variableN[1] + "\\b", "VARIABLE_TO_MONITOR_" + variableN[1]); 
```

将为您完成所有更换！

# python - 从文本文档中删除标点符号和实体

> ID：12152367
> 
> 赞同：0
> 
> 时间：2012-08-28T03:24:33.947
> 
> 标签：python

我需要删除文本文档中的以下标点符号和实体。

1.  删除`&#151`, `&#148`,`&#some number`
2.  `; , . ( ) [ ] * ! !`
3.  `&nbsp`

我知道我可以用它来删除`&#some number`和`&nbsp`。但是，作为一个初学者，我不知道我是否可以做同样的事情来删除其他的东西，比如`;`，`,`等等。

```
match = re.sub(r'&#146', '', open('test2.txt', 'r').read()) 
```

另外，有什么方法可以一次删除所有这些，而不是多次运行相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:15:59.813

如果您已经将所有内容都包含在字符串中，则可以简单地使用[`translate()`](http://docs.python.org/library/stdtypes.html#str.translate)：

```
>>> s
"hello there ! this is a string with $ some % characters I & don't ( want!"
>>> s.translate(None,"$!%&(")
"hello there  this is a string with  some  characters I  don't  want" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:42:47.650

这些看起来像 HTML 和 URL 编码的实体。

您可以使用多种方式对其进行解码

*   urllib.unquote
*   urllib.unquote_plus
*   cgi.unescape
*   [http://wiki.python.org/moin/EscapingHtml](http://wiki.python.org/moin/EscapingHtml)

# c++ - 什么时候必须避免使用 MPI_COMM_WORLD？

> ID：12152369
> 
> 赞同：0
> 
> 时间：2012-08-28T03:25:00.770
> 
> 标签：c++, parallel-processing, mpi

当你不应该使用 MPI_COMM_WORLD 时，你能给我一些例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:46:20.233

我可以想到两种情况：当您编写多线程代码或库时。

原因是 MPI 通信器是消息匹配上下文的一部分。如果您`MPI_COMM_WORLD`在来自库和用户代码的 MPI 调用中使用，您可能会匹配错误消息。在库代码中使用特殊标签很脆弱，因为用户代码可能使用相同的标签。制作一个单独的通信器要容易得多。

多线程代码的问题是相同的 - 消息匹配，除了它有更多出错的机会。例如，如果您在多线程代码中使用集体调用，则不再有标记来区分它们，并且将导致未定义的行为。

最后，移除对 MPI_COMM_WORLD 的依赖可以让你的代码更加模块化。例如，假设您为某些计算编写了一个类。稍后您可能希望将此类包含在另一个程序中，但只对节点的子集执行计算。如果类构造函数接受一个通信器一个参数，`MPI_Comm_dup`s 它，并使用它 - 集成很容易。如果`MPI_COMM_WORLD`是硬编码的，那么将进行一些重构。

特别是在 C++ 中，您可能会将程序的独立部分封装在类中。将它们视为小型库并使它们彼此独立可能是有益的，这样使用它们的代码就不必担心组合可能会如何起作用。

# imagemagick - 如何使用 ImageMagick 获得 Photoshop 的“Save for Web”质量？

> ID：12152372
> 
> 赞同：5
> 
> 时间：2012-08-28T03:25:45.057
> 
> 标签：imagemagick, photoshop

当我使用 Photoshop 的“Save for Web”调整图像大小时，它看起来与使用 ImageMagick 转换图像不同。我可以在 ImageMagick 中更改设置以获得与 Photoshop 相同的结果吗？这是一个例子。

原本的：

![在此处输入图像描述](../Images/c02c108d8355e2fddfe9a2bbe21a4cb7.png)

“保存为网络” 30.01%
对
`convert -geometry 30.01% home-button-full.png home-button-ipad.png`

![在此处输入图像描述](../Images/a5433778de2e669213360ddd12d65374.png) ![在此处输入图像描述](../Images/8732bcce8f100c69ee35386afc3ae21c.png)

放大后更容易看出区别：

Photoshop：

![在此处输入图像描述](../Images/8c6928d8ae5bc739a687f4ef43d687ac.png)

图像魔术：

![在此处输入图像描述](../Images/3dee01d2ba9c31806fc5f673db882396.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T19:28:27.287

唯一可以发现的直接区别是：

*   Photoshop 的结果是`76x86`像素大小。
*   ImageMagick 的结果是`76x87`像素大小。
*   PNG 使用的 Photoshop 的颜色数是`378`.
*   PNG 使用的 ImageMagick 的颜色数量是`401`.
*   Photoshop 的 PNG 文件大小为`4.239 Bytes`.
*   ImageMagick 的 PNG 文件大小为`3.410 Bytes`.

我只知道如何解决第一个差异：

```
convert orig.png -scale 76x86\! scaled-76x86.png 
```

（此命令的结果已将 uniq 颜色的数量减少到`358`......但这只是*偶然*的。）

只要我们不知道其他类型的过滤 Photoshop 的*Save for Web...*确实适用，我们就几乎没有机会准确地模仿它的结果... 你可以试试这个：

```
convert orig.png -scale 76x86\! -interpolate bicubic scaled-76x86.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:56:45.383

检查您在 Photoshop 中使用的重新采样方法（双三次、双线性等），并确保它使用相同的方法。

`-interpolate type`类型为双三次、双线性、平均等。[插值类型](http://imagemagick.org/script/command-line-options.php?#interpolate)

根据文档 Imagemagick 默认使用双线性，而 Photoshop 默认使用双三次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T02:14:23.617

`-quality`如果您想要有损压缩，请尝试使用该参数。对于 jpg，ImageMagick 默认为 100（无损）。

[http://www.imagemagick.org/script/command-line-options.php#quality](http://www.imagemagick.org/script/command-line-options.php#quality) [http://www.simplesystems.org/RMagick/doc/imageattrs.html#quality](http://www.simplesystems.org/RMagick/doc/imageattrs.html#quality)

# google-maps-api-3 - Google Maps API 在距起点特定距离处沿路线显示图标

> ID：12152382
> 
> 赞同：0
> 
> 时间：2012-08-28T03:27:26.957
> 
> 标签：google-maps-api-3, tags

我想在 Google 地图上显示虚拟进度。我想显示带有路线的地图，并且在该路线上，我想从一开始就在一定距离（将根据数据计算）显示一个图标。根据与沿虚拟路线的进度相关的数据，该距离可能会随时或每天发生变化。例如，在从 LA 到 NY 的路线上，有一天我可能想在距离起点 772 英里处显示一个图标。沿路线的距离可以是单位或百分比。我已经看到了 google.maps.IconSequence 对象，但看不到如何将它与 DirectionsService 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:31:07.850

几个“英里标记/公里标记”示例和一个动画标记：

*   [每 2 公里](http://www.geocodezip.com/v3_polyline_example_kmmarkers_0.html)
*   [沿路线特定距离的 2 个标记](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html)
*   [沿路线的动画标记](http://www.geocodezip.com/v3_animate_marker_directions.html)

# elmah - Azure 诊断与 ELMAH 用例？

> ID：12152386
> 
> 赞同：3
> 
> 时间：2012-08-28T03:28:28.380
> 
> 标签：elmah, azure-diagnostics

我在独立（非 Azure）项目中使用了 ELMAH。对于 Azure 相关项目，我遇到了 Windows Azure 诊断 (WAD) 库。

从表面上看，它们似乎在做同样的事情（Azure 诊断也在做更多低级的事情）所以我想问一下，从技术角度来看，一个比另一个更适合特定类型的工作负载/设计？还是它们在用例中非常相似，只是香草与巧克力（即个人喜好）的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:44:17.073

我不认为这两个东西是替代品。机器上的诊断代理只是为了方便将跟踪、计数器和其他信息移动到存储中。ELMAH 更像是一个日志框架。如果您要将 ELMAH 配置为记录到 Trace，它实际上将与 AzureDiagnosticsTraceListener 协同工作，并且通过 ELMAH 输出的消息将被传输到存储（假设您配置了诊断代理来执行此操作）。

# javascript - Node.JS 不同的异步链如何在没有问题的情况下改变共享变量？

> ID：12152389
> 
> 赞同：2
> 
> 时间：2012-08-28T03:29:24.690
> 
> 标签：javascript, multithreading, node.js, concurrency

我对 Node JS 很着迷并且已经开始深入研究，但是，来自 Java 背景，我对下面这样的示例感到困惑，其中进行了依赖共享变量来跟踪的异步调用链（以便确定何时他们都完成了执行另一个动作）。如果这个问题过于基本，我深表歉意，但是我一直在寻找这个问题并没有找到解释，我可能没有使用正确的术语。

如果你在 Java 中做了这样的事情，你需要使变量 n 同步以避免冲突，否则它的完整性可能会受到损害（这只是基于我阅读的一些更复杂的示例的伪代码，如果它不完美，对不起）

```
 var n = 100

var funct_a = function(callback) {
   return function() {
       if (n == 0)
         callback()
       else
         n--
    }
}

for ( a in someArray) {

  funct_a (function() {
     //do something with variable a...
 })
} 
```

是不是这些只在一个“线程”中运行，因此它们实际上并没有在不同的 CPU 内核上运行，并且实际上不能同时写入变量？对于我来说，这似乎是解决这些类型冲突的一些核心节点服务器逻辑的唯一合乎逻辑的解释。任何可以阐明这一点的信息都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:05:20.197

node.js*是*单线程的，但听起来您更关心 JavaScript`closures`以及函数范围在 JavaScript 中的工作方式。如果您有其他一些可以访问的代码，`n`那么实际上，是的，您的`callback()`调用不会像您预期的那样运行。不过，从更高层次的角度来看，您应该知道 CommonJS 模块会阻止您的`n`变量成为 a `global`，因此除非您在模块内公开它或弄乱它，`n`否则不会被篡改。您可能已经知道这一点，但我建议您修改以下内容：

*   JavaScript 模块化模式；尤其是node.js的CommonJS，还要学AMD
*   JavaScript 函数范围
*   JavaScript 闭包

HTH 迈克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:11:34.363

在 node.js 中，除了 I/O 操作之外，所有代码都是同步工作的。它与 Java 完全不同。尝试阅读[这篇文章](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)，它可能会帮助您理解。

# java - 解析xml得到根元素，然后在根标签下动态添加标签

> ID：12152390
> 
> 赞同：5
> 
> 时间：2012-08-28T03:29:51.320
> 
> 标签：java, dom, xml-parsing

我想解析 xml 文件以获取根元素。然后在该根标签下追加添加名为*first-name的标签。*我该怎么做呢 ？这就是我现在一直在做的事情：

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();            
        Document document = db.newDocument();

        Element blobKey_E = document.createElement("first-name");
        blobKey_E.appendChild( document.createTextNode( name ) );
        // NOW APPEND blobKey_E to the root element 
        // After getting the root element from the xml in some directory

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(new File("/home/non-admin/NetBeansProjects/Personal Site_Testers/web/xml/xml_1.xml"));
        transformer.transform(source, result); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T03:34:08.093

```
Element root = document.getDocumentElement();
root.appendChild(document.createElement("first-name")); 
```

将追加`first-name`到 DOM 树的末尾

插入第一个位置有点困难......

```
Element root = document.getDocumentElement();
if (root.hasChildNodes()) {
    Node firstChild = root.getFirstChild();
    root.insertBefore(document.createElement("first-name"), firstChild);
} else {
    // Append to as per previous example
} 
```

**更新**

```
Eleement firstName = document.createElement("first-name");
firstName.setTextContent("Henry"); 
```

# xml - 正则表达式匹配不包含其他标签的 xml 标签

> ID：12152393
> 
> 赞同：2
> 
> 时间：2012-08-28T03:30:03.707
> 
> 标签：xml, regex, parsing, regex-lookarounds

假设我想像这样查找 XML：

```
<Address>
    <Street>Windsor</Street>
</Address> 
```

我不想像这样匹配 XML：

```
<Address>
    <Number>15</Number>
    <Street>Windsor</Street>
</Address> 
```

也就是说，**我正在寻找`Address`节点不*包含*标签`Number`的地址。**

我试过这样的模式

```
<Address>(?!Number)</Address> 
```

或者

```
<Address>.*?(?!Number).*?</Address> 
```

但我不太明白:-(

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:35:54.343

```
<Address>(?:(?!<Address>)(?!<Number>).)*</Address> 
```

警告：假设您的文本中没有换行符，或者`.`可以跨越换行符边界，即所谓的`/s`或`DOTALL`模式，这`(?s)`将在某些正则表达式语言中启用。

# objective-c - 将 UITableView 扩展到全尺寸？

> ID：12152394
> 
> 赞同：2
> 
> 时间：2012-08-28T03:30:04.760
> 
> 标签：objective-c, ios, uitableview

我有一个 UIViewController。其中有一个 UIScrollView，里面有几个视图。底部是一个 UITableView。

此 UITableView 是动态的，将显示少量或大量行。无论哪种方式，我都希望 UITableView 以全尺寸显示，以便用户可以使用父 UIScrollView 向下滚动到它的底部，而不是 UITableView 内的 UIScrollView。

我已通过禁用 UITableView 的滚动来尝试此操作（这很好用）。然后我尝试在运行时扩展 UITableView 以便所有行都可以正确显示。

但是，这部分不起作用。出于某种原因，尽管 UITableView 非常大，但并非所有行都被显示。

我已经像这样扩展了 UITableView：

```
CGRect frame = tableView.frame;
frame.size.height = 5000;
tableView.frame = frame; 
```

我错过了什么？UITableView 内是否还有另一个视图需要展开以显示所有行？

抱歉，如果这是一个愚蠢的问题，我上个月才使用 iOS。

在此先感谢您的帮助:)

* * *

为了澄清，这是问题的屏幕截图。

红色区域是UITableView，所以绝对是正确的大小。但是，应该有 10 个表行。只有 5 个，如果我增加表行的大小，甚至更少。

我需要做什么才能显示所有行？我需要调整什么大小？

![在此处输入图像描述](../Images/8f06754826553f670c81d52d6a1eb4ff.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:00:07.433

虽然我看到您已经设法让它运行，但`UITableView`在您自己的内部放置 a`UIScrollView`可能意味着表格视图无法像处理自己的滚动时那样有效地管理其内容单元格。

但是，如何添加自己的自定义视图并让它们随着表格单元格滚动？通过使它们成为`UITableView`. 如果您向 a 添加一个或两个子视图`UITableView`，它会将它们定位在其内容的上方和/或下方，并使用自己的单元格滚动它们。

下面的屏幕截图显示了它在 XCode 界面编辑器中的外观。请注意，根视图是`UITableView`，它包含页眉和页脚的两个子视图，这些子视图可以包含您需要的任何子视图。

![XCode 界面编辑器显示 UITableView 的子视图](../Images/adc7aaef77bc998a6e848862cf2bf976.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:14:45.620

我设法让它正常工作。但是，我不知道问题是什么。

我将 UITableView 向上移动，因此它覆盖了页面上的其他视图。它显示得很好。然后我将它向下移动以确定导致问题的原因，它开始完美显示。

我将其归结为放置 UITableView 的位置出现错误，因为我看不到任何其他问题。

# iphone - iOS presentMoviePlayerViewControllerAnimated 不能使用同一个 viewController 调用两次

> ID：12152400
> 
> 赞同：0
> 
> 时间：2012-08-28T03:31:42.960
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, mpmovieplayercontroller

所以我试图在我自己的视图控制器中使用方法 presentMoviePlayerViewControllerAnimated 来呈现 MPMoviePlayerViewController。

但是，一旦我单击左上角的蓝色 Done 按钮，当我再次呈现相同的 viewController 时（这样我就可以恢复视频而不必创建另一个 MPMoviePlayerViewController 实例），如果让它们消失，控件将不再起作用几秒钟后自己。如果您在控件消失之前与它们进行交互，这些控件仍然会起作用，但是一旦它们自行消失，您就无法再在点击视频时将它们恢复。这发生在设备和模拟器上。

简化代码：

```
- (void) startPlayback
{
    if (self.videoViewController == nil)
    {
        self.videoViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:self.videoUrl]];
    }
    // present the video player
    [self presentMoviePlayerViewControllerAnimated:self.videoViewController];
} 
```

假设 startPlayback 是视图控制器中的委托方法或其他东西，并且它是由按钮触发的。在这种情况下，Self 将引用视图控制器。

因此，它会调出完美运行的视频播放器。然后，稍等片刻，控件就会消失，我可以通过点击视频将它们恢复。然后我可以使用左上角的完成按钮关闭这个视频播放器。一旦我关闭它，我就可以带回视频视图控制器。视频仍将播放，但现在，当我稍等片刻，控件消失时，我无法再通过点击屏幕来调出控件，从而有效地将自己困在视频播放器中。

我已经找到了连接到完成按钮的各种解决方案，但它并没有真正让我重用视频播放器。例如：

```
// Remove the observer so that the blue button doesn't close the viewController
[[NSNotificationCenter defaultCenter] removeObserver:self.videoViewController name:MPMoviePlayerPlaybackDidFinishNotification object:self.videoViewController.moviePlayer];

// Add itself as an observer
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(movieEnded:) name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:self.videoViewController.moviePlayer]; 
```

在我的movieEnded:中，我可以通过以下方式关闭电影视图控制器：

```
[self dismissMoviePlayerViewControllerAnimated]; 
```

但是，当我尝试再次显示 viewController 时，视频播放器就会卡住 Loading... 永远。

有任何想法吗？

# ios5 - iOS 5 返回到类似于退出按钮的初始笔尖视图

> ID：12152401
> 
> 赞同：0
> 
> 时间：2012-08-28T03:32:23.130
> 
> 标签：ios5

这是我的第一篇文章，所以请温柔。

我有一个`iOS 5`应用程序（使用情节提要），我希望用户能够在其中注销，然后重置应用程序中的所有设置，并将用户返回到第一个 nib 视图。

我已经使用了这段代码：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

问题在于它只向用户发送 1 个视图而不是多个视图。这样做的问题是我有多个相互派生的表视图，我希望“退出”按钮在这些详细视图中的每一个中保持可见。此外，这必须同时适用于`iPhone`和`iPad`（通用）

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:42:42.037

为什么不在按钮单击时分配一个 BOOL 值 YES，然后在`viewWillAppear`每个 viewController 中：

（假设 BOOL 签名）

```
if(signingOut){  [self.navigationController popViewControllerAnimated:YES]; } 
```

否则，只需使用：

```
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:46:53.650

为什么不在导航控制器上设置 viewControllers 数组。

或者将您的注销命令发送到导航控制器的根控制器并让它弹出导航控制器而不使用动画，直到剩下两个。然后弹出倒数第二个动画。那么你仍然应该得到导航动画

# c# - 为什么 C# 中反射的性能很差？

> ID：12152402
> 
> 赞同：0
> 
> 时间：2012-08-28T03:32:23.257
> 
> 标签：c#, reflection

> **可能重复：**
> [反射真的很慢吗？](https://stackoverflow.com/questions/8846948/is-reflection-really-slow)

经常有人跟我说反射的表现很差，为什么呢？我搜索了有关反射的详细信息，想知道它的机制和“性能不佳”的秘密，但没有得到任何有用的信息。有人可以告诉我钥匙或一些信息吗？越详细越好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T04:03:07.273

两个方面。首先是查找元数据，第二次查找时速度很快。第一次您往往不得不为少数页面错误支付费用才能将数据从程序集中获取到 RAM。之后被缓存。您倾向于第一次关心（或衡量）。

第二个是直接调用方法或访问字段或属性的速度非常快。它通常不会花费超过一两个 CPU 周期。当方法可以内联或字段访问可以与另一条指令重叠时，包括 none。反射总是与那个比较差，它需要数百条指令。

当其他代码需要大量时间时，反射是一个合适的解决方案，因此反射成本是一个小因素。其中包括任何涉及 I/O 的内容，例如文件格式和 dbase 映射。以及在人类时间运行的代码，例如设计师和编译器。

# windows-runtime - GridView - 绑定到不同 ViewModel 的组？（结合图文文章）

> ID：12152406
> 
> 赞同：0
> 
> 时间：2012-08-28T03:33:18.970
> 
> 标签：windows-runtime, winrt-xaml

我想弄清楚如何将 GridView 与不同的类一起用于组。在 GridApp 模板中，所有内容都继承自 SampleDataCommon，您是否总是必须继承自 GridView 中的公共类？该文件似乎..缺乏这个材料。

**更新：** 具体来说，我要解决的问题是拥有一个 GridView，其中包含图像图块和文本新闻文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:08:15.290

您可以绑定到任何类类型。我*建议*他们实现一个通用接口或类。如果他们不能，那么将它们分组是没有意义的。您可以使用 DataTemplateSelector 显示组内的项目。这是一个[非常简单的示例](http://www.comyoucom.com/implementing-a-custom-datatemplateselector-in-winrt/)和一个[更复杂的示例](http://www.wiredprairie.us/blog/index.php/archives/1705)

# ruby-on-rails - 如何为 Rails 应用程序的 Watir 集成测试播种测试数据？

> ID：12152408
> 
> 赞同：1
> 
> 时间：2012-08-28T03:33:20.290
> 
> 标签：ruby-on-rails, rspec, watir

我正在使用 Watir 和 RSpec 为 Rails 应用程序编写集成测试。在跨越每个测试的数据库中设置数据的最佳方法是什么？例如，我想在一组测试中使用同一个用户。如何在所有测试运行之前播种公共数据（例如用户），然后为下一组测试清理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:28:35.023

[我相信 Jeff 在Cucumber & Cheese](https://leanpub.com/cucumber_and_cheese)书的“使用数据库”一章中谈到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:54:43.873

通常，为测试提供一些全局数据是一个坏主意，并且可能会在测试中引入依赖关系（这总是一个坏主意）。为了避免这种情况，每个测试都应该生成它自己需要的数据，而不是依赖于一些全局插入的数据。

如果您使用的是[RSpec](https://github.com/rspec/rspec-rails)，那么它会为您完成一些工作（它甚至会以随机顺序运行您的测试以避免依赖关系）——它会在运行测试之前创建一个数据库保存点并回滚测试所做的所有更改。理想情况下，这意味着测试数据库在测试运行之前是空的，并且在测试运行之后它将是空的。

在 Rails 中，您可以使用[Rails 自己的固定装置来播种所需的数据，或者使用像](http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)[FactoryGirl](https://github.com/thoughtbot/factory_girl)这样的第三方 gem 。

同样，不要创建任何将被所有测试使用的全局数据，因为这迟早会回来困扰您。

# javascript - 在循环中查找所有选项组合

> ID：12152409
> 
> 赞同：13
> 
> 时间：2012-08-28T03:33:29.777
> 
> 标签：javascript, arrays, loops

我正在寻找循环遍历一系列选项的最佳方法，以确保我点击了所有可用选项。

我创建了一个功能，允许客户端构建基本上是其他图像相互叠加的图像。这些其他图像被分成不同的组。他们在图像的一侧有链接，他们可以单击以滚动浏览所有不同的图像以查看它们。

现在我正在创建一个自动化过程，该过程将在用户单击其中一个链接时运行更改图像的功能。我需要确保在此过程中命中不同图像的每个可能组合。

假设有 3 种不同的帽子、4 种不同的衬衫、5 条不同的裤子和 6 种不同的鞋子。我可以将其表示为一个数组，其中包含每个组的选项数量。当前数组是`[3, 4, 5, 6]`。

遍历此数组以确保显示所有可能的选项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T04:19:00.523

您想要所有数组的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。

我的网站上有一个讨论这个问题的页面，包括 JavaScript 中的实现：http:
[//phrogz.net/lazy-cartesian-product](http://phrogz.net/lazy-cartesian-product)

例如，要以“向前”顺序快速遍历它们，您可以使用：

```
hats   = ['fez','fedora']
shirts = ['t-shirt','long']
pants  = ['shorts','jeans']
shoes  = ['sneaker','loafer']

lazyProduct( [hats,shirts,pants,shoes], function(hat,shirt,pant,shoe){
  // Your function is yielded unique combinations of values from the arrays
  console.log(hat,shirt,pant,shoe);
});

function lazyProduct(sets,f,context){
  if (!context) context=this;
  var p=[],max=sets.length-1,lens=[];
  for (var i=sets.length;i--;) lens[i]=sets[i].length;
  function dive(d){
    var a=sets[d], len=lens[d];
    if (d==max) for (var i=0;i<len;++i) p[d]=a[i], f.apply(context,p);
    else        for (var i=0;i<len;++i) p[d]=a[i], dive(d+1);
    p.pop();
  }
  dive(0);
} 
```

输出：

```
fez t-shirt shorts sneaker
fez t-shirt shorts loafer
fez t-shirt jeans sneaker
fez t-shirt jeans loafer
fez long shorts sneaker
fez long shorts loafer
fez long jeans sneaker
fez long jeans loafer
fedora t-shirt shorts sneaker
fedora t-shirt shorts loafer
fedora t-shirt jeans sneaker
fedora t-shirt jeans loafer
fedora long shorts sneaker
fedora long shorts loafer
fedora long jeans sneaker
fedora long jeans loafer
fez t-shirt shorts sneaker
fez t-shirt shorts loafer 
```

这与以下结果相同：

```
hats.forEach(function(hat){
  shirts.forEach(function(shirt){
    pants.forEach(function(pant){
      shoes.forEach(function(shoe){
        console.log(hat,shirt,pant,shoe);
      });
    });
  });
}); 
```

或（对于较旧的浏览器）：

```
for (var h=0;h<hats.length;h++){
  var hat = hats[h];
  for (var s=0;s<shirts.length;s++){
    var shirt = shirts[s];
    for (var p=0;p<pants.length;p++){
      var pant = pants[p];
      for (var e=0;e<shoes.length;e++){
        var shoe = shoes[e];
        console.log(hat,shirt,pant,shoe);        
      }
    }
  }
} 
```

…但它支持在运行时定义的任意数量的数组。（如果你使用我网站上的第一个“惰性”实现，你可以随机挑选项目，反向迭代，或者在任何时候轻松停止迭代。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:09:55.653

编辑：我在[**这里**](http://jsperf.com/arraycounting)比较了使用 jsperf 的不同方法，Phrogz 的方式显然是最快的，是这里第 3 次的两倍。

* * *

如果我理解正确，您是在询问计算每列数字是不同基数的位置。您可以递归地执行此操作。

```
function options(opArr, fullArray){
    var i = 0, j = opArr.length;
    if(j < fullArray.length){ // if opArr doesn't have item from each group, add new group
        while(i < fullArray[j]){ // count up for this group
            newArr = opArr.slice(0); // clone opArr so we don't run into shared reference troubles, not sure if necessary
            newArr[j] = i;
            i++;
            options(newArr, fullArray); // recurse
        }
    }else{ // opArr is now a unique array of your items
        // console.log(opArr);
    }
}
options([], [3, 9, 3, 3]); 
```

注意：此（示例）将导致`3 * 9 * 3 * 3 = 243`创建数组。这样你最终会吃掉很多内存。

* * *

另一种方法是从整数转换为数组，这可以节省内存使用，因为您可以忘记所有先前计算的数组

```
function countUp(arrayOfBases, callback, self){
    var arr = arrayOfBases.reverse(), x = 1, i = arr.length,
        me = (self===undefined?this:self),
        makeArr = function(arr, x, fn, me){
        var a = arr.slice(0), n = [], i = x, j = 0, k = 0;
        while(a.length > 0){
            k = a[0];
            if(k !== 0) j = i % k, i = (i - j) / k;
            else j = 0;
            n.unshift(j);
            a.shift();
        }
        fn.call(me,n);
    };
    while (i-->0) if(arr[i] !== 0) x = x * arr[i];
    i = 0;
    while(i < x){
        makeArr(arr, i, callback, me);
        i++;
    }
}
countUp([3,9,3,3], function(a){console.log(a);}); 
```

* * *

另一种方法，类似于前面的方法，保留上次生成的数组，因此循环中的计算更少，但代价是 init 更多。

```
function countUp2(arrayOfBases, callback, self){
    var arr = arrayOfBases.reverse(), x = 1, i = arr.length, last = [],
        me = (self===undefined?this:self),
        addOne = function(arr, n, fn, me){
        var j = n.length, i = j - 1;
        n[i]++;
        while(j = i, i-- > 0 && n[j] >= arr[j]){
            if(arr[j] === 0) n[i] += n[j], n[j] = 0;
            else n[i]++, n[j] -= arr[j];
        }
        return fn.call(me,n.slice(0)), n;
    };
    while (i-->0){
        if(arr[i] !== 0) x = x * arr[i];
        last[i] = 0;
    }
    i = 0;
    last[last.length-1] = -1;
    while(i < x){
        last = addOne(arr, last, callback, me);
        i++;
    }
}
countUp2([3,9,3,3], function(a){console.log(a);}); 
```

* * *

所有这些方法都会输出

```
[0,0,0,0]
[0,0,0,1]
...
[0,8,1,2]
[0,8,2,0]
...
[2,8,2,1]
[2,8,2,2] 
```

然后您可以根据自己的选择进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T08:26:50.630

也许这是一个迟到的答案。但我在[**geeksforgeeks**](https://www.geeksforgeeks.org/combinations-from-n-arrays-picking-one-element-from-each-array/)找到了不同的解决方案。所以任何人都可以试试这个。

```
const hats   = ['fez','fedora'];
const shirts = ['t-shirt','long'];
const pants  = ['shorts','jeans'];
const shoes  = ['sneaker','loafer'];

const data = [hats, shirts, pants, shoes];
const keys = ['hats', 'shirts', 'pants', 'shoes'];

function combination(data, keys) {
    const { length: numberOfArrays } = data;

    /**
     * Initialize a variable called indices
     * with the length of data array and
     * fill with zeros.
     */
    const indices = Array(numberOfArrays).fill(0);
    const result = [];

    while (true) {
        let obj = {};

        /**
         * Get the values from the inner arrays
         * with help of `indices` and make an object
         */
        for (let i = 0; i < numberOfArrays; i++) {
            obj[keys[i]] = data[i][indices[i]];
        }

        // Push the object into the result array
        result.push(obj);

        // Get the last array
        let pick = numberOfArrays - 1;

        /**
         * find the rightmost array that has more 
         * elements left after the current element  
         * in that array
         */
        while (pick >= 0 && (indices[pick] + 1 >= data[pick].length)) {
            pick--;
        }

        /**
         * No such array is found so no more  
         * combinations left 
         */
        if (pick < 0) break;

        /**
         * If found move to next element in that array
         */
        indices[pick]++;

        /**
         * for all arrays to the right of this  
         * array current index again points to  
         * first element 
         */
        for (let i = pick + 1; i < numberOfArrays; i++) {
            indices[i] = 0;
        }

    }

    return result;
}

console.log(combination(data, keys));
```

```
.as-console-wrapper {min-height: 100%!important; top: 0}
```

# mongodb - grails mongodb连接被拒绝

> ID：12152411
> 
> 赞同：2
> 
> 时间：2012-08-28T03:34:08.717
> 
> 标签：mongodb, grails, cloud-foundry

我的 grails 应用程序可以连接到我的本地 mongodb 并且工作正常，但是当我部署到 Cloud Foundry 时，尝试在 cf 上连接到 mongodb 时出现连接被拒绝错误。

我将 mongodb 服务绑定到我的应用程序，但它仍然无法连接？

barry-alexanders-MacBook-Pro:~ barryalexander$ vmc 应用程序

```
+-------------+----+---------+-------------------------+-----------------+
| Application | #  | Health  | URLS                    | Services        |
+-------------+----+---------+-------------------------+-----------------+
| RelCal      | 1  | RUNNING | relcal.cloudfoundry.com | mongodb-a77900c |
| barry       | 1  | STOPPED | barry.cloudfoundry.com  |                 |
+-------------+----+---------+-------------------------+-----------------+ 
```

[这是在http://relcal.cloudfoundry.com/release/calendar](http://relcal.cloudfoundry.com/release/calendar)点击我的应用程序后的堆栈跟踪

```
 Line | Method
    ->> 228 | _open    in com.mongodb.DBPort
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
    |   112 | go       in     ''
    |    79 | call . . in     ''
    |   218 | call     in com.mongodb.DBTCPConnector
    |   305 | __find . in com.mongodb.DBApiLayer$MyCollection
    |   369 | _check   in com.mongodb.DBCursor
    |   498 | _hasNext in     ''
    |   523 | hasNext  in     ''
    |    40 | hasNext  in com.google.code.morphia.query.MorphiaIterator
    |   258 | asList   in com.google.code.morphia.query.QueryImpl
    |    20 | doCall . in com.gap.release.calendar.RelCalRestController$_closure1
    ^   662 | run      in java.lang.Thread 
```

我错过了一些东西，但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:15:34.047

此时，将 grails/mongo 应用程序部署到 cloudfoundry 时，最好使用[Cloud Foundry Services - Using MongoDB with Grails](http://docs.cloudfoundry.com/services/mongodb/grails-mongodb.html)中描述的方法， 而不是使用 morphia。

# excel - RODBC 读取错误，其中 excel 列包含前导 NA

> ID：12152412
> 
> 赞同：3
> 
> 时间：2012-08-28T03:34:43.467
> 
> 标签：excel, r, rodbc

我一直在阅读 Excel 表格以`R`使用该`RODBC`软件包，并且遇到了 Excel ODBC 驱动程序的问题。包含（足够的）前导 NA 的列被强制为逻辑。

在 Excel 中，数据显示如下：

```
period      n       n.ft n.pt
1/02/1985   0.008   NA  0.025
1/03/1985   -0.003  NA  -0.024
1/04/1985   0.002   NA  0.015
1/05/1985   0.006   NA  0.012
1/06/1985   0.001   NA  0.003
1/07/1985   0.005   NA  0.010
1/08/1985   0.006   NA  0.001
1/09/1985   0.007   NA  0.013
1/10/1985   -0.002  NA  0.009
1/11/1985   0.013   NA  0.019
1/12/1985   -0.004  NA  -0.021
1/01/1986   0.008   NA  0.009
1/02/1986   0.002   NA  0.009
1/03/1986   0.002   -0.003  1.000
1/04/1986   0.010   -0.003  0.041
1/05/1986   0.000   -0.001  -0.004
1/06/1986   0.005   0.003   0.005
1/07/1986   -0.003  0.005   0.012
1/08/1986   -0.001  -0.003  -0.021
1/09/1986   0.003   -0.001  0.012
1/10/1986   0.003   0.003   0.010
1/11/1986   -0.003  0.003   -0.003
1/12/1986   0.003   -0.003  0.022
1/01/1987   0.001   0.013   -0.004
1/02/1987   0.004   -0.004  0.011
1/03/1987   0.004   0.008   0.005
1/04/1987   0.000   0.002   -0.002
1/05/1987   0.001   0.002   0.006
1/06/1987   0.004   0.010   0.00 
```

我读入了以下数据：

```
require(RODBC)
conexcel <- odbcConnectExcel(xls.file="C:/data/example.xls")
s1 <- 'SOx'
dd <- sqlFetch(conexcel, s1)
odbcClose(conexcel) 
```

*这在整个*第二列中读取为`NA`。我认为这是因为它被*猜测*是合乎逻辑的，因此随后的数字被评估为无效，因此`NA`.

```
> str(dd)
'data.frame':   29 obs. of  4 variables:
 $ period: POSIXct, format: "1985-02-01" "1985-03-01" ...
 $ n     : num  0.00833 -0.00338 0.00157 0.00562 0.00117 ...
 $ n#ft  : logi  NA NA NA NA NA NA ...
 $ n#pt  : num  0.02515 -0.02394 0.0154 0.01224 0.00301 ... 
```

我正在尝试找到一种方法来防止这种强制合乎逻辑，我认为这会导致随后的错误。

我通过搜索 SO 找到[了这个](https://stackoverflow.com/questions/9062761/annoying-feature-or-bugs-for-rodbc)Q+A，但是我正在工作并且不希望被允许编辑注册表以更改 DWORD 的默认值，如[建议](http://support.microsoft.com/kb/189897/EN-US)的那样（我知道这里设置的值决定了之前需要多少个 NA微软猜测数据类型并轰炸我的阅读）。

现在，我认为最好的解决方案是反转 Excel 中的数据，并将其倒置读入 R。

我喜欢一个好的*黑客*，但肯定有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:11:56.120

这不是错误，而是 ODBC 的一个功能（请注意缺少 R），如此处所述

[http://support.microsoft.com/kb/257819/en-us](http://support.microsoft.com/kb/257819/en-us)

（长页面，检查“混合数据类型”）。

由于使用 ODBC 读取 Excel 文件相当有限，因此我更喜欢 Gabor 提到的替代方案之一，更喜欢 XLConnnect。

# image - 谷歌脚本图像大小调整

> ID：12152413
> 
> 赞同：3
> 
> 时间：2012-08-28T03:34:46.720
> 
> 标签：image, google-apps-script, google-docs, google-apps

我正在尝试制作一个脚本来调整谷歌文档中的图像大小。我所拥有的是：

```
var imgs = currentDoc.getImages();

for (var i = 1; i < imgs.length; i++)
{
   cell = row.insertTableCell(1);
   imgNew = imgs[i].setWidth(365);

   cell.insertImage(1, imgNew.getBlob());
} 
```

图像被正确插入，但无论我将宽度设置为多少，大小都不会改变。由于图像进入一个单元格（宽度= 370），是否可以让图像占据 100% 的宽度并按比例缩放高度？如果不是，我可以手动设置像素数，但这也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:37:35.287

仅供参考，您不需要调用 getBlob()...任何具有 getBlob() 的东西都可以在需要 Blob 的地方直接传入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T07:47:59.013

问题是图像大小在插入表格后应该改变。以下代码正常工作

```
function test() {
  var doc = DocumentApp.openById('here_is_doc_id');
  var imgs = doc.getImages();
  var table = doc.getTables()[0];
  for (var i = 0; i < imgs.length; i++) {
   var row = table.appendTableRow();
   var cell = row.insertTableCell(0);
   var imgNew = imgs[i].copy();
   cell.insertImage(0, imgNew);
   imgNew.setWidth(365);
  }
} 
```

请注意，数组索引、单元格编号等从 0 而不是 1 开始。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-28T03:39:30.753

你有没有尝试过：

```
imgs[i].attr('width', '370'); 
```

或者尝试分配一个具有 width: 100% 的类

# ios5 - 尝试调用系统库中不存在的符号 (llvm_gcda_start_file)

> ID：12152416
> 
> 赞同：1
> 
> 时间：2012-08-28T03:35:12.647
> 
> 标签：ios5, code-coverage, xcode4.4

我正在尝试按照[XCode - 代码覆盖率中的说明进行操作？](https://stackoverflow.com/questions/5852002/xcode-code-coverage)和[Xcode 4.4.1 上的代码覆盖率](https://stackoverflow.com/questions/12055085/code-coverage-on-xcode-4-4-1)

.gcno 文件是在 DerivedData 中生成的，但我无法让它生成 .gcda 文件。当我按下主页按钮时，日志显示：

```
Detected an attempt to call a symbol in system libraries that is not present on the iPhone: 
fopen$UNIX2003 called from function llvm_gcda_start_file in image MyApp. 
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:00:29.960

根据[Xcode 代码覆盖率和 fopen$UNIX2003](https://stackoverflow.com/questions/9575023/xcode-code-coverage-and-fopenunix2003)以及[Xcode 4.2 的代码覆盖率 - 缺少文件](https://stackoverflow.com/questions/8732393/code-coverage-with-xcode-4-2-missing-files)

将以下内容作为 .m 文件添加到您的项目中：

```
#include <stdio.h>

FILE *fopen$UNIX2003( const char *filename, const char *mode )
{
    return fopen(filename, mode);
}

size_t fwrite$UNIX2003( const void *a, size_t b, size_t c, FILE *d )
{
    return fwrite(a, b, c, d);
} 
```

# javascript - 用于通过 Sprite Sheet 制作动画的优秀 JavaScript 引擎（不在画布中）

> ID：12152417
> 
> 赞同：0
> 
> 时间：2012-08-28T03:35:19.247
> 
> 标签：javascript, jquery

我环顾四周寻找一个很棒的 JavaScript Sprite Sheet 动画库/引擎，但找不到任何好的，所以我想我会四处询问 =)。

我在引擎中寻找的是：

1.  在非画布设置中为图像设置动画（例如：通过 css 或 img 标签的 div）
2.  控制帧率/动画速度
3.  标志循环或动画一次等。

有这样的引擎吗？如果不是，我总是可以自己做，但话又说回来，我不想重新发明轮子=]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:38:53.457

我过去使用过[Spritely](http://www.spritely.net/)并取得了成功。它们为您提供了对动画过程的相当健康的控制。此外，即使您不觉得它有用，我相信您在以后的某个时候可能会发现它的好用处。

# directshow - CBasePin::GetMediaType(int iPosition, ...) 方法的参数含义

> ID：12152420
> 
> 赞同：0
> 
> 时间：2012-08-28T03:35:58.797
> 
> 标签：directshow

感谢所有查看我问题的人。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd368709(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368709(v=vs.85).aspx)

从文档中关于`iPosition`参数的参数不是很清楚

```
virtual HRESULT GetMediaType(
  int iPosition,
  CMediaType *pMediaType
); 
```

据说是“*从零开始的索引值*”，但它是一个什么样的索引呢？样本的索引？

我有一个发送 H.264 NALU 流（MEDIASUBTYPE_AVC1）的源过滤器，它工作得很好，除了 SPS/PPS 可能会在视频播放一段时间后更改。

SPS 和 PPS 附加到结构中，在调用方法时`MPEG2VIDEOINFO`传入方法中。`CMediaType::SetFormat``GetMediaType`

并且还有另一个版本`GetMediaType`接受该`iPosition`参数。看来我可以使用这种方法来更新 SPS/PPS。

我的问题是：**iPosition 参数是什么意思，解码器过滤器如何知道为每个 NALU 样本分配了哪些 SPS/PPS。**

```
HRESULT GetMediaType(int iPosition, CMediaType *pMediaType)
{
    ATLTRACE( "\nGetMediaType( iPosition = %d ) ", iPosition);
    CheckPointer(pMediaType,E_POINTER);  
    CAutoLock lock(m_pFilter->pStateLock());

    if (iPosition < 0)
    {
        return E_INVALIDARG;
    }
    if (iPosition == 0)
    {
        pMediaType->InitMediaType();
        pMediaType->SetType(&MEDIATYPE_Video); 
        pMediaType->SetFormatType(&FORMAT_MPEG2Video);  
        pMediaType->SetSubtype(&MEDIASUBTYPE_AVC1);
        pMediaType->SetVariableSize();

    }

    int nCurrentSampleID;
    DWORD dwSize = m_pFlvFile->GetVideoFormatBufferSize(nCurrentSampleID);
    LPBYTE pBuffer = pMediaType->ReallocFormatBuffer(dwSize);
    memcpy( pBuffer, m_pFlvFile->GetVideoFormatBuffer(nCurrentSampleID), dwSize);

    pMediaType->SetFormat(pBuffer, dwSize);

    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:16:48.893

iPosition 用于提供不同的媒体类型，例如其他分辨率或不同的编码，或者在您的示例中可能是原始 h246。`VFW_S_NO_MORE_ITEMS`如果您只提供一种类型，那没关系，但如果 iPosition 太高，请不要忘记发送。

sps/pps 更改随媒体样本一起发送。您只需[将新](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407019%28v=vs.85%29.aspx)的媒体类型添加到`FillBuffer`. 一些解码器甚至不需要它，他们只是从数据流中读取 sps/pps。

# javascript - Facebook 超时回调函数

> ID：12152422
> 
> 赞同：1
> 
> 时间：2012-08-28T03:36:09.947
> 
> 标签：javascript, facebook, facebook-like

所以我对 Facebook 的 API 移动目标感到非常满意。在一个人在登录页面上点击“喜欢”后，我需要显示一些隐藏的内容。我可以让这个工作，当用户点击“喜欢”时，正常的 fb 对话出现，然后立即消失并显示内容。我已经通过以下 js 实现了这一点。

```
<script>
  FB.Event.subscribe('edge.create', function(href, widget) {
   document.getElementById('goodies').style.display = "block";
   document.getElementById('fb-content').style.display= "block";
   document.getElementById('copy').style.display = "none";
  });
</script> 
```

在有人点击“post to facebook”或对话关闭后，我找不到任何关于回调事件的文档，只有在他们点击之后。我如何将 setTimeout 函数合并到其中，让人们有时间填写 fb 对话？

谢谢。如果有人有更好的方法来做到这一点，我会全力以赴。这是针对业务页面的，我似乎无法再添加应用程序来获取应用程序 ID，因此此时 API 对我来说毫无用处。此外，如果要赞的 url 是一个 fb 页面，回调似乎不会触发。

使用的其他代码：

```
<html xmlns:fb="http://ogp.me/ns/fb#">
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<fb:like href="onlynonfburl.com" send="false" layout="button_count" width="450" show_faces="false" font="arial"></fb:like> 
```

# sql-server-2008 - 更新同一张表sql server 2008中的日期时间字段

> ID：12152423
> 
> 赞同：0
> 
> 时间：2012-08-28T03:36:23.667
> 
> 标签：sql-server-2008

我有这个 sql server 2008 的表结构。我想用 createdon 日期时间字段更新 mom_reportedon。我在 sql 语句下面尝试了这个，但它失败了。我怎么能试试这个？

```
Update table1
set reportedon = createdon
where name is not null

update table1
set reportedon = convert(datetime,'2012-03-29 17:50:59.000')
where mom_name is not null 
```

![在此处输入图像描述](../Images/8a1b28d04098d0267e7fa6052d750240.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:49:42.700

通常的做法是这样的：

```
UPDATE T1 SET reportedon = T2.createdon
FROM table1 T1
INNER JOIN table1 T2 ON T1.id = T2.id 
```

其中“id”是主键。但是，这看起来可能是上面示例中的“名称”，这意味着：

```
UPDATE T1 SET reportedon = T2.createdon
FROM table1 T1
INNER JOIN table1 T2 ON T1.name = T2.name 
```

（是的，你会在里面加入你的桌子，在那里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:29:11.037

```
UPDATE T1 SET reportedon = T2.createdon
FROM table1 T1
INNER JOIN table1 T2 ON T1.name = T2.name
where T1.name is not null 
```

# python - 我在 Flask 中有部分视图/代码吗？

> ID：12152424
> 
> 赞同：3
> 
> 时间：2012-08-28T03:36:24.673
> 
> 标签：python, flask

我正在从 C#.NET 迁移到 Python/Flask。

在 .NET 中，我`MasterPage, UserControl, PartialView`每个都有自己的代码。

例如，我可以将检查登录功能保存在其中`Login.ascx.cs`并呈现`Login.ascx`我想要的任何位置。如果已登录，则显示欢迎消息，否则显示登录表单。

但在 Flask 中，我只发现`{% include 'login.html' %}`其中包含静态 html 文件。

如何在 Flask 中实现这个设计？

**我现在可能有答案：**

我没有使用`g.user`，这就是我来这里寻求帮助的原因。别人建议`@app.context_processor`。我正在尝试，这似乎是我想要的。与`g`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:30:30.130

尽管它的名称可能会让您认为它不会[`include`](http://jinja.pocoo.org/docs/templates/#include)插入静态 HTML 文件的内容。它实际上插入了*渲染的*Jinja 模板的内容，它的功能非常类似于 MVC 的局部视图（如果我理解正确的话）。默认情况下，它[可以访问父模板上下文](http://jinja.pocoo.org/docs/templates/#import-context-behavior)。因此，例如，如果您将用户存储在`g.user`，因为`g`默认情况下可以访问，您可以简单地执行以下操作：

```
<-- login.html -->
{% if g.user.is_anonymous() %}
Login form goes here
{% else %}
Greetings {{g.user.full_name}}!
{% endif %} 
```

以及`{% include "login.html" %}`您希望登录表单/用户问候出现的任何地方。

**回复编辑**

如果您想确保`user`所有模板都可以访问它，您确实可以使用它[`context_processor`](http://flask.pocoo.org/docs/templating/#context-processors)来添加`user`：

```
@app.context_processor
def add_user():
    # Get user
    return {"user": user} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:25:01.417

您应该查看[Flask-Login](http://packages.python.org/Flask-Login/)，它是 Flask 的扩展。配置好之后就可以达到你的要求了。

# wpf - 如何将 Win32 SetCursor() 与 WPF 资源和 HwndHost 一起使用

> ID：12152425
> 
> 赞同：0
> 
> 时间：2012-08-28T03:36:27.163
> 
> 标签：wpf, winapi, cursor, resourcedictionary, hwndhost

我们的 WPF 应用程序中有一个 HwndHost UIElement，用于显示 Direct3d 图形，我发现为 HwndHost UIElment 设置光标的唯一方法是调用 Win32 API SetCursor()。我们所有的游标都是托管程序集中的资源，我不希望更改它，但我无法找到一种方法来通过任何 Win32 API（如 LoadImage()）加载其中一个游标。

有谁知道如何获取作为托管程序集中资源的游标的句柄（hCursor）？

或者，是否有另一种方法可以在显示 Direct3D 图形的 HwndHost 上设置光标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:40:14.233

我之前在这种情况下使用的技术是：

```
DllImport("user32.dll", EntryPoint = "LoadCursorFromFileW", CharSet = CharSet.Unicode)
public static extern IntPtr LoadCursorFromFile(String str);

...save your cursor into a temporary file...

IntPtr hCursor = DllImport.LoadCursorFromFile(sFilename);

...use hCursor in the SetCursor... 
```

*   确保将光标`.cur`文件添加到您的项目中`"Embedded Resource"`
*   确定/计算托管资源中光标的资源路径
*   通过使用访问该`Stream`游标`GetManifestResourceStream`
*   将该二进制数据保存到一个临时文件中
    （例如，如果需要，可以使用和`FileStream`使用）`FileMode.Create``FileAttributes.Temporary`
*   用于`LoadCursorFromFile`从文件中加载数据并创建一个光标句柄，然后您可以在 SetCursor 中使用该句柄。
*   清理临时文件

[http://support.microsoft.com/kb/319292](http://support.microsoft.com/kb/319292)

# objective-c - 如何检查某些内容是否存储在CoreData中

> ID：12152427
> 
> 赞同：-1
> 
> 时间：2012-08-28T03:36:50.427
> 
> 标签：objective-c, xcode, core-data, nspredicate, nsfetchrequest

嗨，我希望能够撕毁核心数据中的一些信息，但我不确定如何检查文件是否正确保存。我尝试使用 NSLog 但它在调用时返回 null 。我有一本字典，它有一个 uniqueID 和一个我想保存的标题。我将它与数据库的上下文一起传递。然后我对数据库进行排序以检查它是否有任何重复项，如果没有，则添加文件。

```
+(VacationPhoto*) photoWithFlickrInfo: (NSDictionary*) flickrInfo inManagedObjectContext: (NSManagedObjectContext*) context{

//returns the dictionary
NSLog(@"Photo To Store =%@", flickrInfo);

VacationPhoto * photo = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"VacationPhoto"];
request.predicate = [NSPredicate predicateWithFormat:@"uniqueID = %@", [flickrInfo objectForKey:FLICKR_PHOTO_ID]];
NSSortDescriptor * descriptor = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:descriptor];

NSError *error = nil;
NSArray *matches =  [context executeFetchRequest:request error:&error];

if (!matches || [matches count] > 1) {
    // handle error
} else if ( [matches count] == 0){
    photo.title = [flickrInfo objectForKey:FLICKR_PHOTO_TITLE];
//Returns NULL when called 
    NSLog(@"title = %@", photo.title);
    photo.uniqueID = [flickrInfo objectForKey:FLICKR_PHOTO_ID];
//Returns NULL when called 
    NSLog(@"ID = %@", photo.uniqueID);

} else {
//If photo already exists this is called
    photo = [matches lastObject];
}

return photo;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:50:47.853

查看核心数据更改的最简单方法是使用[sqlite 浏览器](http://sqlitebrowser.sourceforge.net/)

转到模拟器文件夹，找到应用程序，转到文档并打开您的文件夹

> XCODE_SIMLATOR_XX

寻找

> 应用

然后找到你的应用，打开Documents，找到你的App.sqlite，用sqlite浏览器打开，检查你的所有改动很容易，不建议编辑数据结构，因为coredata不是sqlite，只是用sqlite保存数据，但是您必须习惯于核心数据的对象方法；）

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:05:57.437

原来我在将信息添加到数据库时没有调用方法 insertNewObjectForEntityForName，这就是为什么没有保存任何内容的原因。在我添加它之后，NSLogs 提供了正确的信息

```
photo = [NSEntityDescription insertNewObjectForEntityForName:@"VacationPhoto" inManagedObjectContext:context];
    photo.title = [flickrInfo objectForKey:FLICKR_PHOTO_TITLE];
    NSLog(@"title = %@", photo.title);
    photo.uniqueID = [flickrInfo objectForKey:FLICKR_PHOTO_ID];
    NSLog(@"ID = %@", photo.uniqueID); 
```

# iphone - 从我在 iPhone 上的应用程序调用官方 *Settings* 应用程序（定位服务，IOS 5.1.1）

> ID：12152428
> 
> 赞同：2
> 
> 时间：2012-08-28T03:37:00.557
> 
> 标签：iphone, ios, settings

在我的应用程序中，我想将用户重定向到官方设置应用程序。如果可能，我还想直接进入“设置”应用中的“位置服务”部分。

我见过

[从我在 iPhone 上的应用程序调用官方 *Settings* 应用程序，](https://stackoverflow.com/questions/4496813/call-the-official-settings-app-from-my-app-on-iphone) 但在 iPhone4 中，以下代码没有响应（我的 ios 版本 5.1.1）：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]];//1 call Location service
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=WIFI"]];//2 //call wifi
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General&path=Network"]];//3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:13:15.310

Apple 删除了从 iOS 5.1 开始达到这些设置的能力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T13:51:49.787

[http://www.inappsettingskit.com/](http://www.inappsettingskit.com/)

这就是你想要的。它接受设置包，并允许您直接在您的应用程序中使用。

# iphone - iPhone - 如何以编程方式创建自定义相册并为相机胶卷中的照片提供自定义名称？

> ID：12152430
> 
> 赞同：23
> 
> 时间：2012-08-28T03:37:28.577
> 
> 标签：iphone, ios, camera, nsfilemanager

我正在开发一个 iPhone 照片应用程序，所以我需要在相机胶卷中创建一个名为“我的相册”的单独相册，并且我需要在新创建的目录中使用自定义名称保存我的 UIImageView 图像，例如“My Image.png” .

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-05-16T07:34:10.970

由于`AssetsLibrary`已**弃用**，请改用`Photos`框架（iOS 8 及更高版本）。

```
// Deprecated!
import AssetsLibrary

// Swift 3.0
let assetsLibrary = ALAssetsLibrary()
assetsLibrary.addAssetsGroupAlbum(withName: "NewAlbum", resultBlock: { assetsGroup in
    print(assetsGroup == nil ? "Already created" : "Success")
}, failureBlock: { error in
    print(error)
}) 
```

您可以使用共享**`PHPhotoLibrary`**对象创建新照片，但不能为它们指定特定名称，因为您将使用需要由*Photos.app*管理的资产。每个资产都有特定的属性。您可以获取对象、请求更改、资产/缩略图加载和缓存等。

要创建**自定义相册**，请使用[`PHAssetCollectionChangeRequest.creationRequestForAssetCollection(withTitle:`)](https://developer.apple.com/reference/photos/phassetcollectionchangerequest/1619454-creationrequestforassetcollectio)。

简要示例：

```
// Swift 3.0
func createPhotoLibraryAlbum(name: String) {
    var albumPlaceholder: PHObjectPlaceholder?
    PHPhotoLibrary.shared().performChanges({
        // Request creating an album with parameter name
        let createAlbumRequest = PHAssetCollectionChangeRequest.creationRequestForAssetCollection(withTitle: name)
        // Get a placeholder for the new album
        albumPlaceholder = createAlbumRequest.placeholderForCreatedAssetCollection
    }, completionHandler: { success, error in
        if success {
            guard let placeholder = albumPlaceholder else {
                fatalError("Album placeholder is nil")
            }

            let fetchResult = PHAssetCollection.fetchAssetCollections(withLocalIdentifiers: [placeholder.localIdentifier], options: nil)
            guard let album: PHAssetCollection = fetchResult.firstObject else {
                // FetchResult has no PHAssetCollection
                return
            }

            // Saved successfully!
            print(album.assetCollectionType)
        }
        else if let e = error {
            // Save album failed with error
        }
        else {
            // Save album failed with no error
        }
    })
} 
```

别忘了去**`import Photos`**图书馆。

要在该相册上创建**新照片资产**，请使用[`PHAssetChangeRequest.creationRequestForAsset(from:`)](https://developer.apple.com/documentation/photokit/phassetchangerequest/1624060-creationrequestforasset)。

```
// Swift 3.0
func createPhotoOnAlbum(photo: UIImage, album: PHAssetCollection) {
    PHPhotoLibrary.shared().performChanges({
        // Request creating an asset from the image
        let createAssetRequest = PHAssetChangeRequest.creationRequestForAsset(from: photo)
        // Request editing the album
        guard let albumChangeRequest = PHAssetCollectionChangeRequest(for: album) else {
            // Album change request has failed
            return
        }
        // Get a placeholder for the new asset and add it to the album editing request
        guard let photoPlaceholder = createAssetRequest.placeholderForCreatedAsset else {
            // Photo Placeholder is nil
            return
        }
        albumChangeRequest.addAssets([photoPlaceholder] as NSArray)
    }, completionHandler: { success, error in
        if success {
            // Saved successfully!
        }
        else if let e = error {
            // Save photo failed with error
        }
        else {
            // Save photo failed with no error
        }
    })
} 
```

**更新：**

我们需要请求访问权限才能使用照片库：

```
PHPhotoLibrary.requestAuthorization { status in
     switch status {
     ...
} 
```

**从 iOS 10**及更高版本开始，我们还需要在目标 .plist 文件中为“隐私 - 照片库使用说明”添加访问条目：

```
<key>NSPhotoLibraryUsageDescription</key>
<string>Access to photos is needed to provide app features</string> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-28T05:36:09.090

您可以使用 iOS 中的这些代码行轻松创建自定义相册并添加图像：

```
// Create the new album.
__block PHObjectPlaceholder *myAlbum;
[[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
    PHAssetCollectionChangeRequest *changeRequest = [PHAssetCollectionChangeRequest creationRequestForAssetCollectionWithTitle:title];
    myAlbum = changeRequest.placeholderForCreatedAssetCollection;
} completionHandler:^(BOOL success, NSError *error) {
    if (success) {
        PHFetchResult *fetchResult = [PHAssetCollection fetchAssetCollectionsWithLocalIdentifiers:@[myAlbum.localIdentifier] options:nil];
        PHAssetCollection *assetCollection = fetchResult.firstObject;

        [[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
            PHAssetChangeRequest *assetChangeRequest = [PHAssetChangeRequest creationRequestForAssetFromImage:image];

            // add asset
            PHAssetCollectionChangeRequest *assetCollectionChangeRequest = [PHAssetCollectionChangeRequest changeRequestForAssetCollection:assetCollection];
            [assetCollectionChangeRequest addAssets:@[[assetChangeRequest placeholderForCreatedAsset]]];
        } completionHandler:^(BOOL success, NSError *error) {
            if (!success) {
                NSLog(@"Error: %@", error);
            }
        }];
    } else {
        NSLog(@"Error: %@", error);
    }
}]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-10T10:40:11.163

创建新专辑：

```
/// Create album with given title
/// - Parameters:
///   - title: the title
///   - completionHandler: the completion handler
func createAlbum(withTitle title: String, completionHandler: @escaping (PHAssetCollection?) -> ()) {
    DispatchQueue.global(qos: .background).async {
        var placeholder: PHObjectPlaceholder?

        PHPhotoLibrary.shared().performChanges({
            let createAlbumRequest = PHAssetCollectionChangeRequest.creationRequestForAssetCollection(withTitle: title)
            placeholder = createAlbumRequest.placeholderForCreatedAssetCollection
        }, completionHandler: { (created, error) in
            var album: PHAssetCollection?
            if created {
                let collectionFetchResult = placeholder.map { PHAssetCollection.fetchAssetCollections(withLocalIdentifiers: [$0.localIdentifier], options: nil) }
                album = collectionFetchResult?.firstObject
            }

            completionHandler(album)
        })
    }
} 
```

获取具有指定名称的专辑：

```
/// Get album with given title
/// - Parameters:
///   - title: the title
///   - completionHandler: the completion handler
func getAlbum(title: String, completionHandler: @escaping (PHAssetCollection?) -> ()) {
    DispatchQueue.global(qos: .background).async { [weak self] in
        let fetchOptions = PHFetchOptions()
        fetchOptions.predicate = NSPredicate(format: "title = %@", title)
        let collections = PHAssetCollection.fetchAssetCollections(with: .album, subtype: .any, options: fetchOptions)

        if let album = collections.firstObject {
            completionHandler(album)
        } else {
            self?.createAlbum(withTitle: title, completionHandler: { (album) in
                completionHandler(album)
            })
        }
    }
} 
```

并将照片保存到相册：

```
func save(photo: UIImage, toAlbum titled: String, completionHandler: @escaping (Bool, Error?) -> ()) {
    getAlbum(title: titled) { (album) in
        DispatchQueue.global(qos: .background).async {
            PHPhotoLibrary.shared().performChanges({
                let assetRequest = PHAssetChangeRequest.creationRequestForAsset(from: photo)
                let assets = assetRequest.placeholderForCreatedAsset
                    .map { [$0] as NSArray } ?? NSArray()
                let albumChangeRequest = album.flatMap { PHAssetCollectionChangeRequest(for: $0) }
                albumChangeRequest?.addAssets(assets)
            }, completionHandler: { (success, error) in
                completionHandler(success, error)
            })
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-03T07:11:46.343

它从 iOS 5.0 开始工作。
请导入 AssetsLibrary/AssetsLibrary.h

```
ALAssetsLibrary* libraryFolder = [[ALAssetsLibrary alloc] init];
[libraryFolder addAssetsGroupAlbumWithName:@"My Album" resultBlock:^(ALAssetsGroup *group) 
{
    NSLog(@"Adding Folder:'My Album', success: %s", group.editable ? "Success" : "Already created: Not Success");
} failureBlock:^(NSError *error) 
{
    NSLog(@"Error: Adding on Folder");
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-08T09:23:34.487

您可以尝试我的以下方法为 iOS 7 和 iOS 8 创建相册

```
#define PHOTO_ALBUM_NAME @"AlbumName Videos"
-(void)createAlbum{

// PHPhotoLibrary_class will only be non-nil on iOS 8.x.x
Class PHPhotoLibrary_class = NSClassFromString(@"PHPhotoLibrary");

if (PHPhotoLibrary_class) {

    // iOS 8..x. . code that has to be called dynamically at runtime and will not link on iOS 7.x.x ...

    [[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
        [PHAssetCollectionChangeRequest creationRequestForAssetCollectionWithTitle:PHOTO_ALBUM_NAME];
    } completionHandler:^(BOOL success, NSError *error) {
        if (!success) {
            NSLog(@"Error creating album: %@", error);
        }else{
            NSLog(@"Created");
        }
    }];
}else{
    [self.library addAssetsGroupAlbumWithName:PHOTO_ALBUM_NAME resultBlock:^(ALAssetsGroup *group) {
        NSLog(@"adding album:'Compressed Videos', success: %s", group.editable ? "YES" : "NO");

        if (group.editable == NO) {
        }

    } failureBlock:^(NSError *error) {
        NSLog(@"error adding album");
    }];
}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-22T04:52:14.063

您可以先将具有自定义名称的图像保存到沙箱，然后将其保存到相册，这对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-09T14:27:08.767

```
/// Save images or videos（保存图片或视频）(kUTTypeImage, kUTTypeMovie)
/// Add to album if specified album name, and create album if needed
/// @params mediaArray UIImage, fileURL for a image or video
+ (void)_saveMediaArray:(NSArray *)mediaArray
                options:(LAImageSaverOptions *)options
             completion:(void (^)(NSError * _Nullable err))completion
{
    NSInteger __block count = 0;

    [PHPhotoLibrary.sharedPhotoLibrary performChanges:^{

        // Create album if needed
        PHAssetCollectionChangeRequest *assetCollectionChangeRequest = nil;
        NSMutableArray<PHObjectPlaceholder *> *assetChangeRequestPlaceholders = nil;
        if (options.targetAlbumName.length > 0) {
            assetChangeRequestPlaceholders = [NSMutableArray arrayWithCapacity:mediaArray.count];

            PHFetchOptions *fetchOptions = PHFetchOptions.new;
            //fetchOptions.includeAssetSourceTypes = PHAssetSourceTypeUserLibrary;
            fetchOptions.predicate = [NSPredicate predicateWithFormat:@"localizedTitle = %@", options.targetAlbumName]; // 不能用 block 形式的 predicate
            PHAssetCollection * assetCollection = [PHAssetCollection fetchAssetCollectionsWithType:PHAssetCollectionTypeAlbum subtype:PHAssetCollectionSubtypeAlbumRegular options:fetchOptions].firstObject;
            if (nil == assetCollection) {
                assetCollectionChangeRequest = [PHAssetCollectionChangeRequest creationRequestForAssetCollectionWithTitle:options.targetAlbumName];
            } else {
                assetCollectionChangeRequest = [PHAssetCollectionChangeRequest changeRequestForAssetCollection:assetCollection];
            }
         }

        // Save images
        for (id item in mediaArray) {
            PHAssetChangeRequest *assetChangeRequest = nil;
            // image object
            if ([item isKindOfClass:UIImage.class]) {
                UIImage *image = (UIImage *)item;
                assetChangeRequest = [PHAssetChangeRequest creationRequestForAssetFromImage:image];
                [assetChangeRequestPlaceholders addObject:assetChangeRequest.placeholderForCreatedAsset];
                ++count;
                continue;
            }

            // file url for image or movie
            NSURL *fileURL = (NSURL *)item;
            if ([item isKindOfClass:NSURL.class] && fileURL.isFileURL) {
                NSString *extension = fileURL.pathExtension;
                if (extension.length == 0) {
                    NSLog(@"illegal fileURL(no path extension): %@", fileURL);
                    continue; // illegal file url
                }
                CFStringRef uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, (__bridge CFStringRef)extension, NULL);
                BOOL isImage = false;
                BOOL isVideo = false;
                if (nil != uti && CFStringGetLength(uti) > 0) {
                    isImage = UTTypeConformsTo(uti, kUTTypeImage);
                    isVideo = UTTypeConformsTo(uti, kUTTypeMovie); // kUTTypeVideo, kUTTypeAudiovisualContent
                }
                if (isImage) {
                    assetChangeRequest = [PHAssetChangeRequest creationRequestForAssetFromImageAtFileURL:fileURL];
                    [assetChangeRequestPlaceholders addObject:assetChangeRequest.placeholderForCreatedAsset];
                    ++count;
                } if (isVideo) {
                    assetChangeRequest = [PHAssetChangeRequest creationRequestForAssetFromVideoAtFileURL:fileURL];
                    [assetChangeRequestPlaceholders addObject:assetChangeRequest.placeholderForCreatedAsset];
                    ++count;
                } else {
                    NSLog(@"illegal fileURL(neither image nor movie): %@", fileURL);
                    continue; // illegal file url
                }
            }
        }

        // add to album if needed
        [assetCollectionChangeRequest addAssets:assetChangeRequestPlaceholders];

    } completionHandler:^(BOOL success, NSError * _Nullable error) {

        // not in main thread 
        dispatch_async(dispatch_get_main_queue(), ^{
            completion(error);
        });
    }];
} 
```

顺便说一句，你可以做更多关于`LAImageSaverOptions`

```
@interface LAImageSaverOptions : NSObject

/// to show alert controller on the hostVC
@property(nonatomic, weak, null_resettable) UIViewController *hostVC;

/// total progress
@property (nonatomic, strong, null_resettable) NSProgress *progress;

// album name for saving images
@property (nonatomic, copy, nullable) NSString *targetAlbumName;

@end 
```

# c++ - 如何编写 C++ 控制台窗口程序

> ID：12152434
> 
> 赞同：1
> 
> 时间：2012-08-28T03:38:11.403
> 
> 标签：c++, windows, user-interface, console-application, wxwidgets

我想编写一个 C++ 程序，以便根据配置文件可以是控制台应用程序或窗口应用程序。对于 GUI，我使用的是 WxWidget。我应该分别在 Windows 和 Linux (Buntu) 中做什么。

有人可以提供一些简单的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:21:35.090

在运行时执行此操作的典型方法是将程序编译并链接为 Windows 应用程序。在运行时，您读取配置。如果它是为 GUI 设置的，那么创建窗口并按您的方式进行。如果它设置为控制台模式，那么您可以创建一个控制台窗口，将您的 stdout/stdin/sterr 流附加到它，然后离开。

我写了一个这样运行的程序。整个 UI 被抽象在一个纯虚拟接口后面，具体实现提供了控制台实现和 GUI 实现。在运行时，我实例化了正确的类型。构造函数生成正确类型的窗口。然后主程序调用一个虚拟的 Run 方法。控制台实现调用 main 的等价物。GUI 实现运行一个事件循环。

如果您是从命令行启动的（而不是启动自己的控制台窗口），那么真正困难的部分是附加到现有的控制台窗口。Devstudio 通过拥有 devstudio.com 和 devstudio.exe 来做到这一点，但它相当复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:32:46.213

在编译阶段执行此操作很简单，使用条件编译。

您的配置文件将包含您想要的预处理器定义。例如

```
#define GUI 
```

或者

```
#define CONSOLE 
```

然后将配置文件包含在要以不同方式编译的每个文件中

```
#include "gui_or_console.h" 
```

最后，您使用条件编译来告诉编译器要处理哪些代码

```
#idfef GUI

  // some GUI code

#endif

#ifdef CONSOLE

 // some CONSOLE code

#endif 
```

# java - Tomcat 安装在远程服务器上。如何在本地浏览器上查看

> ID：12152437
> 
> 赞同：1
> 
> 时间：2012-08-28T03:38:28.233
> 
> 标签：java, linux, apache, tomcat, ubuntu

我已经在远程 ubuntu 服务器上安装了 apache tomcat。我已经正确安装并配置了它（`ps -ef | grep tomcat`列出了tomcat进程）。我已经在 webapps 目录中部署了我的应用程序的战争文件。我有服务器的公共 IP 地址，也知道 tomcat 的监听端口。

当我在本地 Windows 机器的浏览器地址栏上输入 public_ip_address_of_server:tomcat_listening_port/my_application_name 时，出现“无法连接到 public_ip_address_of_server:tomcat_listening_port”错误

可能是什么原因？您的帮助将不胜感激。

注意：我已经测试过 tomcat 在服务器上运行正常。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:58:56.303

对我来说似乎是一个/w 问题，或者至少是一个连接问题。几样东西你可以试一试。。

1.  您可以使用 public_ip_address_of_server:tomcat_listening_port/my_application_name 从同一台机器访问该应用程序吗（我已经看到了您的说明。不要尝试本地主机，直接使用 ip。）
2.  你能尝试从其他盒子ping这台机器吗？
3.  你能不能直接点击 public_ip_address_of_server:tomcat_listening_port 看看是否有 tomcat 默认页面正在启动。如果不是，那么它不能只连接和它的一个/w 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:16:42.393

1) Ping 到运行tomcat 服务器的ip_address；如果 ping 失败，则首先修复网络问题。

2) 如果 ping 成功，则查看网络上是否配置了防火墙；如果已配置，则将其关闭。

3）尝试在本地机器上运行这个命令，看看你是否能够连接到服务器机器的端口

```
 nmap -p port ipaddress (for tcp)
     nmap -sU -p port ipaddress (for udp) 
```

4）如果失败，则在服务器机器上运行上述命令，看看它在那里工作。如果有效，那么您可以肯定地说存在一些网络或防火墙问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:32:49.033

感谢大家的帮助。我能够解决这个问题。我知道这很奇怪，但这不是任何防火墙或服务器问题。我刚刚安装了tomcat管理器并从那里上传了我的war文件，然后重新启动了我的tomcat。它帮助我的应用程序运行

再次感谢大家。

# python - 在python中将'aa'翻译成'a'和'ab'翻译成'b'

> ID：12152438
> 
> 赞同：1
> 
> 时间：2012-08-28T03:38:29.090
> 
> 标签：python, translate

我想了一晚上，但找不到快速的方法来做到这一点

首先出现的是replace()

```
for x,y in {'aa':'a','ab':'b'}.items():
    s = s.replace(x,y) 
```

但它不适用于这种情况：'aabcc'

正确的是'abcc'，但输出是'bcc'

我可以编写一些类似的代码（我已经用各种语言编写了这些代码，如 C#、php、actionscript 等。）

```
 output = []
   def foo1(x):
      if(x!='a'):
          output.append(x)
      else:
          functionPointer = readafterA
   def readafterA(x):
      if(x=='a'):
          output.append('a')
      elif(x=='b'):
          output.append('b')
      else:
          output.append('a'+x)
      functionPointer = foo1
   functionPointer = normalExecute
   for singlechar in s:
      functionPointer(singlechar)
   print(''.join(output)) 
```

我不想再写那些代码了，因为：

第一，当字典变大时，那些代码会搞砸。

第二，我相信在 Python 中必须有一些更优雅的方法来完成这项工作

**编辑：**我已经在第一段中修复了它，但这不是重点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T03:54:46.527

你不能使用字典。按照要替换它们的顺序指定元组。

```
>>> s = 'aabcc'
>>> for x,y in (('ab','b'), ('aa','a')):
...     s = s.replace(x,y)
... 
>>> s
'abcc' 
```

你也可以使用正则表达式

```
>>> s = 'aabcc'
>>> import re
>>> re.sub("a([ab])","\\1", s)
'abcc' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:09:25.153

这里发生的是：

```
>>> "aabcc".replace("aa","a")
"abcc" 
```

在下一次迭代中：

```
>>> "abcc".replace("ab","b")
"bcc" 
```

所以，你需要改变逻辑。

我有一个建议：

替换`"aa"`为`"^aa^"`然后 删除所有不需要`"ab"`的`"^b^"``"^"`

现在

```
>>> "aabcc".replace("aa","^a^")
"^a^bcc" 
```

在下一次迭代中：

```
>>> "^a^bcc".replace("ab","b")
"^a^bcc"
>>> "^a^bcc".replace("^","")
"abcc" 
```

酷吧？

# amazon-ec2 - 如何找出访问 EC2 实例的所有 IP 地址的列表

> ID：12152441
> 
> 赞同：0
> 
> 时间：2012-08-28T03:38:53.310
> 
> 标签：amazon-ec2

如何使用 ssh 协议找出某一天访问 EC2 实例的所有 IP 地址列表。有没有办法获取这些信息，我们需要它来进行审计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:43:09.860

试试命令：

```
[pinky][1] 
```

你会得到这样的东西：

```
Login      Name                 TTY    Idle   When                 Where 

root       root                 pts/0         2009-06-15 13:41     192.168.1.133 
```

# php - PHP PDO：自动识别 INSERT 或 UPDATE 的方法

> ID：12152455
> 
> 赞同：2
> 
> 时间：2012-08-28T03:40:51.387
> 
> 标签：php, sql, methods, pdo

我正在制作一个类来轻松管理 SQL 命令。我创建了所有 CRUD，现在我正在尝试创建一个名为 save ($ data, $ table) 的新方法。"save" 必须识别 INSERT 或 UPDATE 是否是一个句子。

我完全迷失在这一步，我的大脑没有感觉到一种安全有效的方法来识别两个句子中的哪一个。

我的第一个想法是使用主键进行比较...

值存在：更新

值不存在或为空：插入

但是，这是一个弱解决方案。例如，如果恶意用户在表单中发送 ID=5，则自动覆盖 id 为 5 的用户。

我接受建议和解决方案，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:21:10.847

答案分两部分：

1.  你想要的 SQL 是

    INSERT(fields) VALUES() ON DUPLICATE KEY UPDATE...

2.  控制的方法是发送一些其他的唯一标识符，而不是 ID。在您的表中，将主键（自动增量）和“unique_id”随机字符串 md5() 设置为表中的唯一键。发送随机字符串作为标识符。然后根据该随机字符串进行更新。如果它不存在，它将创建一个新记录并自动增加一个主键。

我会比这更深入地验证您是否期待“新”或“更新”，但这种方法似乎符合您的要求。

# android - 在 Android 中解析这个 JSON

> ID：12152468
> 
> 赞同：-3
> 
> 时间：2012-08-28T03:43:45.717
> 
> 标签：android, json, parsing

> **可能重复：**
> [如何在 Android 中解析这个 JSON？](https://stackoverflow.com/questions/3605077/how-can-i-parse-this-json-in-android)

我正在关注此[链接](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)来解析我的 json，但我无法执行，因为我很困惑。甚至重复的链接也没有提供任何参考，那些投票关闭这个问题的用户可以在他们提供的链接没有提供任何帮助来解决这些问题时回答我的问题吗？

我认为那些无法回答问题的人无权编辑某人的问题，也无权在他们提供的链接无法解决问题时关闭问题。帮我解析数据。

```
[
{
"id": "c200",
"name": "XYZ",
"email": "xyz@gmail.com",
},
{
"id": "c201",
"name": "Johnny",
"email": "john_johnny@gmail.com",

}] 
```

**[回答]**

由于这是一个封闭的帖子，所以我发布了我的答案：

```
//JSONArray
JSONArray hospital = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

     // getting JSON string from URL
    String json = jParser.makeHttpRequest(url, "GET",
            contactList);

    try {
        // Getting Array of Contacts
          hospital = new JSONArray(json);

          if (hospital != null) {

            // looping through
                for (int i = 0; i < hospital.length(); i++) {
                    JSONObject contacts = hospital.getJSONObject(i);

            // Storing each json item in variable
            String id = contacts.getString(TAG_HID);
            String name = contacts.getString(TAG_HNAME);
            String address = contacts.getString(TAG_HADDRESS);
            String phone1=contacts.getString(TAG_HPHONE1);
            String phone2=contacts.getString(TAG_HPHONE2);
            String fax=contacts.getString(TAG_HFAX);
            String email=contacts.getString(TAG_HEMAIL);
            String url=contacts.getString(TAG_URL);
            String hlongitude=contacts.getString(TAG_LONGITUDE);
            String hlatitude=contacts.getString(TAG_LATITUDE);
            String hdistance=contacts.getString(TAG_HDISTANCE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_HID, id);
            map.put(TAG_HNAME, name);
            map.put(TAG_HADDRESS, address);
            map.put(TAG_HPHONE1, phone1);
            map.put(TAG_HPHONE2, phone2);
            map.put(TAG_HFAX, fax);
            map.put(TAG_HEMAIL, email);
            map.put(TAG_URL, url);
            map.put(TAG_LONGITUDE, hlongitude);
            map.put(TAG_LATITUDE, hlatitude);   
            map.put(TAG_HDISTANCE, hdistance);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } 
    }
    catch (JSONException e) {
        e.printStackTrace();
    } 
```

JSON Parser 类的一些编码

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public String makeHttpRequest(String url, String method,
        ArrayList<HashMap<String, String>> contactList) {

    // Making HTTP request
    try {

        // check for request method
        if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity((List<? extends NameValuePair>) contactList));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } 
        else if (method == "GET") 
        {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format((List<? extends NameValuePair>) contactList, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } 
    catch (ClientProtocolException e) {
        e.printStackTrace();
    } 
    catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // return JSON String
    return json;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:48:09.590

由于您没有说，我假设您使用的是 Android 附带的内置 org.json 解析器。如果您使用不同的解析器，请查阅其文档。

将 json 作为字符串传递给[JSONArray 构造函数](http://developer.android.com/reference/org/json/JSONArray.html#JSONArray%28java.lang.String%29)。

# jquery - DIV 之间的额外空间

> ID：12152476
> 
> 赞同：2
> 
> 时间：2012-08-28T03:44:47.237
> 
> 标签：jquery, wordpress, jquery-ui, html, space

我正在使用 Wordpress 中的登录页面，该页面由两个主要组件组成：

1.  一个垂直和水平居中的 DIV（用 Jquery 完成）
2.  一系列带有翻转效果的按钮（用JqueryUI实现）

虽然这两个组件似乎都运行良好，但按钮之间有一个额外的空间，我似乎在 HTML 编辑器中找不到，可以在[这里](http://adrienneadams.org/landing/)看到。“主站点”、“移动”和“捐赠”按钮之间的空间明显大于标题和第一个按钮之间的空间。

在 Chrome 中使用检查元素，`</div>`每个按钮的标记后面的行都包含一个`" "`，我认为这可能是造成额外空间的原因，但我在 Wordpress HTML 编辑器中找不到它。我还下载了一个 WP disable wpautop-type 插件，但它并没有删除空间。

最后，当我将 HTML 和关联的 CSS 粘贴到[JSfiddle](http://jsfiddle.net/Koubenec/sJfKB/)中时，多余的空间消失了。我假设问题出在 Wordpress 的自动格式设置上。但是，我无法弄清楚添加空间的功能是什么或如何删除它。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:29:36.820

我最终为有问题的按钮添加了一个负的底部边距，它删除/减少了 DIV 之间的空间，使其正好符合我的需要。话虽这么说，如果添加负底部边距是不好的做法，请随时跳到这篇文章中并阻止我！

ShaunOReilly，非常感谢您的帮助和 jsfiddle - 我一定会记住的。

马卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:52:33.920

按钮之间有一些额外的双引号：

```
<div id="landing" style="margin-top: -100px; top: 50%; position: absolute; margin-left: -200px; left: 50%; "><div style="font-family: 'serif6_beta_rregular'; font-size: 26pt; color: #ffffff; text-align: center;">Adrienne Adams</div>
    ""
    <div class="sample" onclick="top.location.href='http://www.google.com'" style="background-color: rgb(35, 31, 32); color: rgb(255, 255, 255); ">Main Site</div>
    ""
    ​&lt;div class="sample" onclick="top.location.href='http://www.google.com'" style="background-color: rgb(35, 31, 32); color: rgb(255, 255, 255); ">Mobile</div>​
    ""
    <div class="sample" onclick="top.location.href='http://www.google.com'" style="background-color: rgb(35, 31, 32); color: rgb(255, 255, 255); ">Donate</div>​
</div> 
```

可能是一些换行符之类的。

这个看起来不同：http: [//jsfiddle.net/webwarrior/tHwmH/3/](http://jsfiddle.net/webwarrior/tHwmH/3/)

当我添加相同的双引号时，我得到相同的效果：http: [//jsfiddle.net/webwarrior/tHwmH/4/](http://jsfiddle.net/webwarrior/tHwmH/4/)

如果你不想花几天时间来弄清楚模板为什么会做它正在做的事情，那么将以下 jQuery 添加到`DocumentReady`函数中：

```
jQuery("#landing").parent().append("<div class='temp'><div>");
jQuery(".temp").append(jQuery("#landing div"));
jQuery("#landing").empty();
jQuery("#landing").append(jQuery(".temp div"));
jQuery(".temp").remove(); 
```

正如这里所见：http: [//jsfiddle.net/webwarrior/tHwmH/18/](http://jsfiddle.net/webwarrior/tHwmH/18/)

# java - 如何使用 path2d 绘制多边形并查看一个点是否在其区域内？

> ID：12152486
> 
> 赞同：4
> 
> 时间：2012-08-28T03:46:32.893
> 
> 标签：java, area, path-2d

我正在尝试使用带有 path2d 的多个顶点绘制任何类型的多边形形状，我想稍后使用 java.awt.geom.Area 查看确定点是否在其区域内

```
public static boolean is insideRegion(Region region, Coordinate coord){
Geopoint lastGeopoint = null;
        GeoPoint firstGeopoint = null;
        final Path2D boundary = new Path2D.Double();
        for(GeoPoint geoponto : region.getGeoPoints()){
            if(firstGeopoint == null) firstGeopoint = geoponto;
            if(lastGeopoint != null){
                boundary.moveTo(lastGeopoint.getLatitude(),lastGeopoint.getLongitude());                
                boundary.lineTo(geoponto.getLatitude(),geoponto.getLongitude());                
            }
            lastGeopoint = geoponto;
        }
        boundary.moveTo(lastGeopoint.getLatitude(),lastGeopoint.getLongitude());                
        boundary.lineTo(firstGeopoint.getLatitude(),firstGeopoint.getLongitude());

        final Area area = new Area(boundary);
        Point2D point = new Point2D.Double(coord.getLatitude(),coord.getLongitude());
        if (area.contains(point)) {
            return true;
        }
return false
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T04:14:59.087

所以我把这个非常快速的测试放在一起。

```
public class Poly extends JPanel {

    private Path2D prettyPoly;

    public Poly() {

        prettyPoly = new Path2D.Double();
        boolean isFirst = true;
        for (int points = 0; points < (int)Math.round(Math.random() * 100); points++) {
            double x = Math.random() * 300;
            double y = Math.random() * 300;

            if (isFirst) {
                prettyPoly.moveTo(x, y);
                isFirst = false;
            } else {
                prettyPoly.lineTo(x, y);
            }
        }

        prettyPoly.closePath();

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                Point p = e.getPoint();
                System.out.println(prettyPoly.contains(p));

                repaint();
            }
        });

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g.create();
        g2d.draw(prettyPoly);
        g2d.dispose();

    }
} 
```

这会在随机位置生成随机数量的点。

然后它使用鼠标单击来确定鼠标单击是否落在该形状内

**更新**

（注意，我将 更改为`g2d.draw`以便`g2d.fill`更容易看到内容区域）

![漂亮的聚](../Images/b96d9953d8cfc6b680fc3030ff0e32f0.png)

请注意，红色的所有内容都返回“true”，其他所有内容都返回“false”......

# python - 在写入文件之前替换 Python 中的字符

> ID：12152487
> 
> 赞同：0
> 
> 时间：2012-08-28T03:46:39.123
> 
> 标签：python, string, forms, variables, replace

我需要根据 html 表单输入创建一个 CSV。我有它的工作，但如果有人在其中一个字段中加上逗号，那么就会出现问题。由于预期的输入，这很可能发生。有没有办法在将输入字符串写入文件*之前替换输入字符串中的逗号？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:53:08.847

使用 Python 创建 CSV 文件（包括自动处理这个逗号问题）的最佳方法是使用[csv](http://docs.python.org/library/csv.html)标准库模块。您可以通过创建一个 CSV writer 对象来使用它

```
import csv
writer = csv.writer(open(filename)) 
```

[`writer.writerow`](http://docs.python.org/library/csv.html#csv.csvwriter.writerow)然后您实际上可以使用or写入文件[`writer.writerows`](http://docs.python.org/library/csv.html#csv.csvwriter.writerows)

如果要命名文件中的列，可以使用[`csv.DictWriter`](http://docs.python.org/library/csv.html#csv.DictWriter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T03:53:18.527

使用`csv`模块它会为你引用逗号：

```
>>> import csv
>>> import sys
>>> csv.writer(sys.stdout).writerow(['field with comma ,, ..', '2nd field'])
"field with comma ,, ..",2nd field 
```

读回来：

```
>>> from StringIO import StringIO
>>> next(csv.reader(StringIO('"field with comma ,, ..",2nd field')))
['field with comma ,, ..', '2nd field'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T03:54:23.810

您不需要替换逗号，`csv`模块会为您处理。它将引用那些包含嵌入逗号的字段。例如：

```
import csv
data = [['field 1', 'field 2', 'wobble', 'a,b,c'],
        ['another field 1', 'more field 2', 'wibble', 'c,b,a']]

with open('test.csv', 'w') as f:
    w = csv.writer(f)
    w.writerows(data)

$ cat test.csv
field 1,field 2,wobble,"a,b,c"
another field 1,more field 2,wibble,"c,b,a" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T03:53:49.713

查看 cvs.writer 文档：

[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

并将适当的 'quotechar' 传递给构造函数以支持正确的引用

或者您在生成 CSV 时替换应用程序中的相关字符（超出 csv 编写器的范围）。

# c# - 双击 DataGridView 行时会触发什么事件？

> ID：12152489
> 
> 赞同：0
> 
> 时间：2012-08-28T03:46:50.773
> 
> 标签：c#, winforms, events, datagridview

> **可能重复：**
> [双击 DataGridView 行？](https://stackoverflow.com/questions/3920339/double-click-datagridview-row)

双击`DataGridView`一行时会触发什么事件？

我能找到的只有`CellMouseDoubleClick`.

如何识别事件函数中的选定行？是`e.RowIndex`吗？

# java - Java：线程顺序

> ID：12152493
> 
> 赞同：3
> 
> 时间：2012-08-28T03:47:26.857
> 
> 标签：java, multithreading

下面的代码发现输出结果不是顺序的，不是从小到大的，怎么保证是从小到大的顺序呢？

爪哇代码

```
public class TestSync {  

    /** 
     * @param args 
     */  
    public static void main(String[] args) {  
        for (int i = 0; i < 10; i++) {  
            new Thread(new Thread1()).start();  
        }  

    }  

    public int getNum(int i) {  
        synchronized (this) {  
            i++;  
        }  
        return i;  
    }  

    static class Thread1 implements Runnable {  
        static Integer value = 0;  
        @Override  
        public void run() {  
            TestSync ts = new TestSync();  
            value = ts.getNum(value);  
            System.out.println("thread1:" + value);  
        }  
    }  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:00:48.867

尽管有人想知道为什么这是必要的，但这是一种方法。它并不优雅，但代表了对原始程序的最小更改：

```
import java.util.concurrent.*;

public class TestSync {

    public static void main(String[] args) {

    ExecutorService service = Executors.newSingleThreadExecutor();
    for (int i = 0; i < 10; i++) {
        service.submit(new Thread1());
    }

}

public int getNum(int i) {
    synchronized (this) {
        i++;
    }
    return i;
}

static class Thread1 implements Runnable {
    static Integer value = 0;
    @Override
    public void run() {
        TestSync ts = new TestSync();
        value = ts.getNum(value);
        System.out.println("thread1:" + value);
    }
} 
```

}

这是一个更好的版本。它使用 AtomicInteger 作为计数器（在这种情况下可能是矫枉过正）来删除令人不快的 getNum() 方法：

```
import java.util.concurrent.*;
import java.util.concurrent.atomic.*;

public class TestSync {  
    static private AtomicInteger i = new AtomicInteger(0);

    public static void main(String[] args) {  
        ExecutorService service = Executors.newSingleThreadExecutor();
        for (int i = 0; i < 10; i++) {  
            service.submit(new MyThread(i));  
        }  
        try { Thread.sleep(2*1000); } catch(Exception ex) {}
        service.shutdown();
    }  

    static class MyThread implements Runnable {  
        private int num = 0;
        public MyThread(int num) {
            this.num = num;
        }
        @Override  
        public void run() {  
            int value = i.incrementAndGet();
            System.out.println("thread # " + num + " value = " + value);  
        }  
    }  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:04:51.737

你想达到什么目的？您的代码仅同步对特定`TestSync`实例的调用。由于每个线程都创建了自己的实例，就好像您根本没有同步任何东西。您的代码没有做任何事情来同步或协调不同线程之间的访问。

我建议以下代码可能更符合您要完成的任务：

```
public static void main (String[] args) throws java.lang.Exception {
        for (int i = 0; i < 10; i++) {  
            new Thread1().start();  
        }  
}

//no need for this to be an instance method, or internally synchronized
public static int getNum(int i) {  
       return i + 1;  
}

static class Thread1 extends Thread {  
    static Integer value = 0;  

    @Override  
    public void run() {  
        while (value < 100) {
            synchronized(Thread1.class) {  //this ensures that all the threads use the same lock
                value = getNum(value);  
                System.out.println("Thread-" + this.getId() + ":  " + value);  
            }

            //for the sake of illustration, we sleep to ensure some other thread goes next
            try {Thread.sleep(100);} catch (Exception ignored) {} 
        }
    }  
} 
```

现场示例：http: [//ideone.com/BGUYY](http://ideone.com/BGUYY)

请注意，这`getNum()`基本上是多余的。如果您`value = getNum(value);`用简单的`value++;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:10:27.173

更不用说，无法保证在线程中运行时会执行什么顺序代码。这是由所谓的时间片造成的。CPU 会将时间“片”分配给特定线程。当切片启动时，它有效地暂停线程，并允许其他线程获得切片。最终，它会回到暂停的线程并给它们额外的时间片，但这真的取决于 CPU。

拥有多个内核和/或超线程允许 CPU 有更多线程同时被赋予时间片。

但是，正如我所说，不能保证线程的时间片顺序以及每个单独的线程将在何时何地暂停和恢复。

这意味着“i++”操作（连同相关的打印）的执行顺序不一定是您启动线程的顺序。此外，线程之间的任何共享变量都应该使用“volatile”修饰符来声明，以防止值的线程级缓存。

如果你想强制顺序排序，你应该质疑为什么你首先使用线程而不是顺序循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T04:04:28.330

我不是 Java 程序员，但同步锁不会阻止 getNum() 被乱序调用。而且因为 Thread1 在单独的线程上运行，调度程序可以自由地以任何顺序运行这 10 个线程。

同步确实保证了一次只能有一个线程执行同步部分内的代码。

如果要顺序执行，请在一个线程中调用所有 getNums()。或者使用像 ExecutorService 这样的线程队列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T04:43:41.333

实际上有2个问题。

1）。该`Synchronization`块特定于一个`Thread1`实例

你应该使用

```
 synchronized(TestSync.class) {  
                //  
                //
            } 
```

或者

```
synchronized(Thread1.class) {  
                //  
                //
            } 
```

2）。核心问题是这样的。 `Setting the static variable`并且您 `System.out.println()`也应该同步，以便`generation`值`printing`按顺序排列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T02:30:15.487

重写你的`main()`方法，如：

```
public static void main(String[] args)
{
    for (int i = 0; i < 10; i++)
    {
        Thread th = new Thread(new Thread1());
        th.start();
        try
        {
            th.join();
        }
        catch (InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

# html - 如何将文件作为附件上传到 CouchDB 实例？

> ID：12152495
> 
> 赞同：0
> 
> 时间：2012-08-28T03:47:46.653
> 
> 标签：html, couchdb

我有一个 HTML 表单，可用于创建当前仅包含文本内容的文档。但是，我也希望能够通过表单上传文件数据。

我怎样才能做到这一点？这是我目前使用的表格

```
<form class="form-horizontal well" id="submitform" name="submitform">
  <label class="control-label" for="brand">Brand</label>
          <label class="control-label" for="link">Any other thoughts?</label>
          <div class="control-group">
            <div class="controls">
              <textarea class="input" rows="3" name="notes" id="notes"></textarea>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <input type="submit" class="btn"/>
            </div>
          </div>

          <label class="control-label" for="picture[]">Got a Picture?</label>
          <div class="control-group">
            <div class="controls">
              <input type="file" name="_attachments" id="picture" accept="image/*" multiple/>
            </div>
          </div>
          </div>
      </fieldset>
    </form> 
```

我尝试使用一些 AJAX 上传文件，但我只能将文件名作为附件上传，而不是实际内容。

```
$.couch.db("couchclothes").saveDoc
  (
    {
      type:   $('#type').val(), 
      brand:  $('#brand').val(), 
      fit:    $('#fit').val(),
      color:  $('#color').val(),
      link:   $('#link').val(),
      notes:  $('#notes').val()
    },  
    {
      success: function(data) 
      { 
        alert("Saved data ok."); 
        var id = data.id;
        var rev = data.rev;

        // send a PUT request here
      }
    }  
  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:32:20.380

我也对如何使用字段和文件进行经典表单 POST 感兴趣。

但是，如果可以在两个单独的步骤中进行数据和文件上传（并回答您的问题），请检查适用于 XHR2 浏览器的解决方案：[如何从浏览器上传文件（附件）？](https://stackoverflow.com/questions/11864257/how-to-upload-a-file-attachment-from-the-browser)

# c# - 表单加载 ComboBox DropDownList

> ID：12152496
> 
> 赞同：0
> 
> 时间：2012-08-28T03:47:48.780
> 
> 标签：c#, winforms, forms, drop-down-menu, load

我想做的是当程序开始从combobox1中自动选择值0或1

组合框下拉列表： - 是 -（值 0） - 否 -（值 1）

我尝试这样的事情，但没有奏效

```
// ------------------- StartUP Load
private void Form1_Load(object sender, EventArgs e)
{
 comboBox4.SelectionStart = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T03:51:24.977

尝试

```
comboBox4.SelectedIndex = 0; 
```

那应该从“是”开始。如果您想以否启动它，请使用

```
comboBox4.SelectedIndex = 1; 
```

# php - 登录后我的 php 会话一直丢失

> ID：12152497
> 
> 赞同：3
> 
> 时间：2012-08-28T03:47:48.967
> 
> 标签：php, session, xampp

我已经阅读了很多关于 php 安全最佳实践的信息，并且我正在努力在我的 xampp 服务器上使用它们。

我有一个包含我所有的安全、ddos、会话管理的包含，其中有一个名为 sec_session_start 的函数。代码如下，但是当我尝试登录，然后重定向回我的主页时，所有会话数据都消失了。在我的登录过程页面上，在我进行重定向之前，它具有所有正确的会话数据。

在每个标题之后，我都在做“退出；”。我也试过写 session_write_close();

但这似乎不能解决我的问题。

这是功能代码。

```
function sec_session_start() {
$session_name = 'AnyName'; // Set a custom session name
$secure = false; // Set to true if using https.
$httponly = true; // This stops javascript being able to access the session id. 

ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
$cookieParams = session_get_cookie_params(); // Gets current cookies params.
session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
session_name($session_name); // Sets the session name to the one set above.
session_start(); // Start the php session
session_regenerate_id(true); // regenerated the session, delete the old one.  
} 
```

这个函数在每一页上被调用。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T03:59:24.500

删除 session_regenerate_id(true);

这是不必要的，并且不会覆盖以前的 cookie，但“真实”是真正的问题，因为它会清除以前的会话详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:46:21.633

看看你正在设置的 cookie。我在使用相同的函数时遇到了同样的问题，并通过在 session_set_cookie_params() 中明确说明我的域来修复它。出于某种原因，正在设置 www.example.com 和 example.com 的 cookie。

关于 session_regenerate_id(true) 的评论似乎是一条红鲱鱼，因为它应该复制任何现有的会话变量......而且它也有效。

```
function sec_session_start() {
    $domain = 'example.com'; // note $domain
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = true; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 
    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $domain, $secure, $httponly); // note $domain
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one.     
} 
```

# java - RegEX 模式 - 两步过程

> ID：12152503
> 
> 赞同：0
> 
> 时间：2012-08-28T03:48:44.163
> 
> 标签：java, regex

我的输入值为“+000011111.11”，我基本上想删除 + 和前导零。目前解决这个问题的方法是：

```
inputString="+0000111111.11"
StringBuffer bufOutputString = new StringBuffer(inputString);
StringBuffer bufNewOutputString = new StringBuffer();

for (int i = 0; i < inputString.length(); i++) {
    if (Character.isDigit(bufOutputString.charAt(i)) || bufOutputString.charAt(i)=='.') {
        bufNewOutputString.append(bufOutputString.charAt(i));
    }
}
inputString=bufNewOutputString.toString();
String s = inputString.replaceFirst ("^0*", "");
System.out.println("The Super converted value is"+s); 
```

所以基本上是使用for循环来消除“+”，然后使用正则表达式来确保前导零都消失了。

有没有更好的方法来处理这个字符串的解析？感谢您的输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T03:55:08.523

当然

```
String s = inputString.replaceFirst ("^\\+?0*", ""); 
```

用空字符串替换零或一个加号，以及零个或多个零。所以你可能可以用这一行替换你的所有代码。还是我错过了什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T04:01:29.313

您可以使用：

```
String s = Double.valueOf("+000011111.11").toString(); 
```

# javascript - 自动放置流程图形状的算法

> ID：12152506
> 
> 赞同：9
> 
> 时间：2012-08-28T03:49:22.020
> 
> 标签：javascript, algorithm, canvas, graph, d3.js

我的团队需要使用 HTML5 Canvas 或 D3 库（或其他更合适的工具，欢迎提出建议）用 JavaScript 构建流程图生成器。流程图将从 JSON 文档中定义的有向图生成。我的问题如下：我们可以使用哪种标准算法来促进流程图中形状（图中的节点）的自动放置，以最大限度地减少重叠连接的数量及其长度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T08:59:50.193

您正在寻找的标准算法是力导向图：[http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing)](http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing)) 如果您想要一个轻量级、与浏览器无关且高效的 FD js 库，请查看 arbor。 js: [https://github.com/samizdatco/arbor](https://github.com/samizdatco/arbor)

恕我直言，D3 是您能找到的最强大的库（它嵌入了基于力的算法），但它与 IE < 9 不兼容，并且比其他库（学习少，思考多）略低（面向文档）。

JIT 也是一个很好的库（它还嵌入了基于力的算法），与 IE < 9 不兼容。它更像是用于 infovis 的 Highcharts。多学习（助手、选项、参数），少思考。

WireIt (YUI3) 和 JSplump (jQuery) 是很好的管道库，但不包含 FD 算法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-16T17:30:01.220

力导向算法对于这类问题并不是完全最优的。我宁愿建议使用分层图形绘图（[http://en.wikipedia.org/wiki/Layered_graph_drawing](http://en.wikipedia.org/wiki/Layered_graph_drawing)）算法。这种算法的一个很好的 JS 实现是 Dagre ( [https://github.com/cpettitt/dagre](https://github.com/cpettitt/dagre) )。您还可以查看我关于自动布局和有向图渲染的博客文章：[http](http://www.daviddurman.com/automatic-graph-layout-with-jointjs-and-dagre.html) ://www.daviddurman.com/automatic-graph-layout-with-jointjs-and-dagre.html 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-24T06:26:13.597

[这](https://gojs.net/latest/index.html)是我发现有用的库。它被称为 GoJS。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T05:57:36.013

JavaScript InfoVis Toolkit (JIT) 可能有一些适合您的工具：

[http://thejit.org/](http://thejit.org/)

# c# - Asp.net 4.0 根据访问级别显示不同的菜单项

> ID：12152513
> 
> 赞同：0
> 
> 时间：2012-08-28T03:50:23.643
> 
> 标签：c#, asp.net-4.0

NET4.0，我想知道如何根据不同的访问级别从网站隐藏一些菜单（例如：新用户和参数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:52:50.890

我建议你阅读 asp.net 会员和角色提供者。按照这些链接

[Asp.net 成员资格和角色提供者](http://www.4guysfromrolla.com/articles/120705-1.aspx)

[asp.net 角色和成员资格演练](http://www.codeproject.com/Articles/342061/Understanding-ASP-NET-Roles-and-Membership-A-Begin)

像这样的东西。代码取自 MSDN

```
if (!Roles.IsUserInRole(User.Identity.Name, "Administrators"))
    {
      Label1.Text = "You are not Adminstrator , not authorized to view user roles.";
      yourMenu.Visible = false;
} 
```

# android - Android 2.2：使用意图时的 java.lang.RuntimeException

> ID：12152514
> 
> 赞同：0
> 
> 时间：2012-08-28T03:50:24.813
> 
> 标签：android, android-intent, android-manifest, android-2.2-froyo, runtimeexception

我在运行代码时遇到了这个问题（由意图引起）：

> 08-28 05:30:11.785: E/AndroidRuntime(27529): 致命异常: main 08-28 05:30:11.785: E/AndroidRuntime(27529): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. tnf.timetolunch/com.tnf.timetolunch.RestaurantListActivity}: java.lang.NullPointerException 08-28 05:30:11.785: E/AndroidRuntime(27529): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1618) 08 -28 05:30:11.785: E/AndroidRuntime(27529): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 android.app .ActivityThread.access$1500(ActivityThread.java:124) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:968) 08-28 05: 30：11.785：E/AndroidRuntime（27529）：在 android.os.Handler。dispatchMessage(Handler.java:99) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 android.os.Looper.loop(Looper.java:130) 08-28 05:30:11.785: E/ AndroidRuntime(27529): 在 android.app.ActivityThread.main(ActivityThread.java:3806) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 java.lang.reflect.Method.invokeNative(Native Method) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 java.lang.reflect.Method.invoke(Method.java:507) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 08-28 05:30:11.785: E/AndroidRuntime(27529): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:597) 08-28 05:30:11.785: E/AndroidRuntime(27529): at dalvik.system.NativeStart.main(Native Method) 08-28 05:30:11.785: E/AndroidRuntime(27529): Caused经过：java.lang.NullPointerException 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 android.content.ContextWrapper.getPackageName(ContextWrapper.java:127) 08-28 05:30:11.785: E/AndroidRuntime(27529 ): 在 android.app.Activity.getLocalClassName(Activity.java:3558) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 android.app.Activity.getPreferences(Activity.java:3592) 08- 28 05:30:11.785: E/AndroidRuntime(27529): 在 com.tnf.timetolunch.RestaurantListActivity.(RestaurantListActivity.java:18) 08-28 05:30:11.785: E/AndroidRuntime(27529): 在 java.lang .Class.newInstanceImpl(Native Method) 08-28 05:30:11.785: E/AndroidRuntime(27529): at java.lang.Class.newInstance(Class.java:1409) 08-28 05:30:11.785: E/ AndroidRuntime(27529): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 08-28 05:30:11.785:E/AndroidRuntime(27529): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1610) 08-28 05:30:11.785: E/AndroidRuntime(27529): ... 11 更多

我试图查找类似的错误以查看其他人如何解决他们的问题，我的清单似乎还可以（或者至少我的活动已注册）：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tnf.timetolunch"
    android:versionCode="1"
    android:versionName="@string/app_name" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:name="App"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".RestaurantListActivity"
            android:label="@string/title_activity_restaurants" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的 MainActivity 中的代码：

```
Intent i = new Intent(this, RestaurantListActivity.class);
startActivity(i); 
```

第一次在这里发帖，希望运气好。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:01:38.633

意图看起来不错。RestaurantListActivity 正在按预期启动。问题似乎出在初始化期间：

```
E/AndroidRuntime(27529): Caused by: java.lang.NullPointerException
08-28 05:30:11.785: E/AndroidRuntime(27529): at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
08-28 05:30:11.785: E/AndroidRuntime(27529): at android.app.Activity.getLocalClassName(Activity.java:3558)
08-28 05:30:11.785: E/AndroidRuntime(27529): at android.app.Activity.getPreferences(Activity.java:3592) 

08-28 05:30:11.785: E/AndroidRuntime(27529): at com.tnf.timetolunch.RestaurantListActivity.(RestaurantListActivity.java:18)
08-28 05:30:11.785: E/AndroidRuntime(27529): at java.lang.Class.newInstanceImpl(Native Method) 08-28 05:30:11.785: E/AndroidRuntime(27529): at java.lang.Class.newInstance(Class.java:1409) 08-28 05:30:11.785: E/AndroidRuntime(27529): at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-28 05:30:11.785: E/AndroidRuntime(27529): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1610)
08-28 05:30:11.785: E/AndroidRuntime(27529): ... 11 more 
```

我想知道您的 RestaurantListActivity 类中是否有任何构造函数？如果是这样，你不应该在那里进行任何与上下文相关的初始化......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T03:59:26.460

问题是你有 2 个主要意图的活动应该只有一个 MainActivity，我建议你只使用一个 Launcher Activity

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:11:03.777

采用

```
 <activity
        android:name=".RestaurantListActivity"
        android:label="@string/title_activity_restaurants" >           
    </activity> 
```

代替

```
 <activity
        android:name=".RestaurantListActivity"
        android:label="@string/title_activity_restaurants" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

在你的 MainActivity

```
Intent i = new Intent(MainActivity.this, RestaurantListActivity.class);
startActivity(i); 
```

# xml - 使用 XSLT 删除 XML 节点

> ID：12152519
> 
> 赞同：21
> 
> 时间：2012-08-28T03:51:23.963
> 
> 标签：xml, xslt

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets>
<Rowset>
    <Columns>
        <Column Description="FirstName" MaxRange="1" MinRange="0" Name="FirstName" SQLDataType="12" SourceColumn="FirstName"/>
        <Column Description="LastName" MaxRange="1" MinRange="0" Name="LastName" SQLDataType="12" SourceColumn="LastName"/>
        <Column Description="Phone" MaxRange="1" MinRange="0" Name="Phone" SQLDataType="1" SourceColumn="Phone"/>
    </Columns>
    <Row>
        <FirstName>Michael</FirstName>
        <LastName>David</LastName>
        <Phone>1234567890</Phone>
    </Row>
    <Row>
        <FirstName>David</FirstName>
        <LastName>Michael</LastName>
        <Phone>01234567890</Phone>
    </Row>
    <Row>
        <FirstName>Yang</FirstName>
        <LastName>Christina</LastName>
        <Phone>2345678901</Phone>
    </Row>
    <Row>
        <FirstName>Grey</FirstName>
        <LastName>Meredith</LastName>
        <Phone>3456789012</Phone>
    </Row>
    <Row>
        <FirstName>David</FirstName>
        <LastName>Shepherd</LastName>
        <Phone>5678901234</Phone>
    </Row>
</Rowset> 
```

我想`<Phone>`从每一行以及从列描述中删除节点。

所以我生成的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Rowsets>
<Rowset>
    <Columns>
        <Column Description="FirstName" MaxRange="1" MinRange="0" Name="FirstName" SQLDataType="12" SourceColumn="FirstName"/>
        <Column Description="LastName" MaxRange="1" MinRange="0" Name="LastName" SQLDataType="12" SourceColumn="LastName"/>
    </Columns>
    <Row>
        <FirstName>Michael</FirstName>
        <LastName>David</LastName>
    </Row>
    <Row>
        <FirstName>David</FirstName>
        <LastName>Michael</LastName>
    </Row>
    <Row>
        <FirstName>Yang</FirstName>
        <LastName>Christina</LastName>
    </Row>
    <Row>
        <FirstName>Grey</FirstName>
        <LastName>Meredith</LastName>
    </Row>
    <Row>
        <FirstName>David</FirstName>
        <LastName>Shepherd</LastName>
    </Row>
</Rowset> 
```

我该如何做到这一点？我尝试了各种 XSLT，但我做不到。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-28T04:53:53.403

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="Column[@SourceColumn='Phone']|Phone" />

</xsl:stylesheet> 
```

# salesforce - 由于 salesforce 的测试覆盖率，构建包失败

> ID：12152523
> 
> 赞同：1
> 
> 时间：2012-08-28T03:51:29.243
> 
> 标签：salesforce

我的包包含 A 类，我已经为其编写了所有测试，但在上传时仍然说我需要涵盖所有类的测试并且失败。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:38:45.623

测试是嵌入在类定义中还是存储在单独的文件中？

如果它们存储在单独的文件中，请确保该文件也包含在包中。

# c - 为什么这个程序不起作用？

> ID：12152524
> 
> 赞同：-1
> 
> 时间：2012-08-28T03:51:29.383
> 
> 标签：c, for-loop, robotics, radians, inverse-kinematics

//这是一个寻找机械臂inv运动学的程序。我的怀疑不在kine:-)。我的程序执行但总是打印“无法实现的位置”，即使对于已知值，它也是如此。在这里，我使用弧度表示角度，因为这就是 c 所理解的。请告诉我如何遇到这个，甚至告诉我更好的方法来实现这个。谢谢。// 现在，这个编辑过的程序可以工作，但是速度很慢.. 有人可以建议一种优化它的方法吗？

```
#include<stdio.h>
#include<math.h>
#include<conio.h>
int main()
{
    float a, b, c, d;
    int a1, b1, c1, d1;
    int x = 0, y = 0, z = 0;
    int x1 = 0, y1 = 0, z1 = 0;
    int i = 0, j = 0;
    printf("Enter X value: \n");
    scanf("%d", &x);
    printf("Enter Y value: \n");
    scanf("%d", &y);
    printf("Enter Z value: \n");
    scanf("%d", &z);
    for (a1 = -100 ; a1 <= 100 ; a1++)
    {
            printf("%d \t", j++);
            for (b1 = 0; b1 <= 180; b1++)
        {
            for (c1 = -100; c1 <= 100; c1++)
            {
                              for (d1 = -45; d1 <= 45; d1++)
                      {
                       a = a1 * 0.0174532925;
                       b = b1 * 0.0174532925;
                       c = c1 * 0.0174532925;
                       d = d1 * 0.0174532925;
                               x1 = (11*cos(d+c+b+a)+11*cos(d+c+b-a)+12*cos(c+b+a)+12*cos(c+b-a)+9*cos(b+a)+9*cos(b-a))/2;
                               if(x1 == x)
                               {
                                           y1 =(11*sin(d+c+b+a)-11*sin(d+c+b-a)+12*sin(c+b+a)-12*sin(c+b-a)+9*sin(b+a)-9*sin(b-a))/2;
                                           if(y1 == y)
                                           {
                                                 z1 = 11*sin(d+c+b) + 12*sin(c+b) + 9*sin(b);
                                                 if(z1 == z)
                                                 {
                              i = 1;
                              goto status;
                                                 }
                                            }
                                  }
                }
            }
        }
    }
    status:
    if(i == 0)
    printf("*****Positon unacheivable*****");
    else
        printf(" The joint angles for the desired positon are \n %d \t %d \t %d \t %d \n", a1, b1, c1, d1);
        getch(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:48:15.557

首先或第二次阅读此内容，但请阅读： [每位计算机科学家应了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

0.02 在大多数计算机上无法准确表示。它将大致表示。在您的循环中，每次添加大约 0.02 时，您的舍入误差就会越来越大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:08:22.840

这是一个简单的爬山算法。它从 a=b=c=d=0 开始，测量到所需 x、y、z 的距离，然后对 a、b、c、d 进行小的随机调整，并保留那些提高距离的调整。

它将永远运行，除非在极少数情况下找到完全匹配；由您决定停止条件。如果需要，您还可以对随机性设置一些界限，以防止它选择超出允许范围的 a、b、c、d 值，因为我懒得把它放进去。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>

static double getdist(double x, double y, double z,
                      double a, double b, double c, double d)
{
        double x1, y1, z1;

        x1 = (11*cos(d+c+b+a)+11*cos(d+c+b-a)+12*cos(c+b+a)+12*cos(c+b-a)+9*cos(b+a)+9*cos(b-a))/2;
        y1 = (11*sin(d+c+b+a)-11*sin(d+c+b-a)+12*sin(c+b+a)-12*sin(c+b-a)+9*sin(b+a)-9*sin(b-a))/2;
        z1 = 11*sin(d+c+b) + 12*sin(c+b) + 9*sin(b);

        return (x1-x)*(x1-x) + (y1-y)*(y1-y) + (z1-z)*(z1-z);
}

int main(int argc, char **argv)
{
    char *end;
    double x, y, z, a, b, c, d, dist, best;

    if(argc != 4) {
        fprintf(stderr, "Usage: %s x y z\n", argv[0]);
        return EXIT_FAILURE;
    }

    x = strtod(argv[1], &end);
    if(*end || !*argv[1]) {
        fprintf(stderr, "x value %s is not a number\n", argv[1]);
        return EXIT_FAILURE;
    }
    y = strtod(argv[2], &end);
    if(*end || !*argv[2]) {
        fprintf(stderr, "y value %s is not a number\n", argv[2]);
        return EXIT_FAILURE;
    }
    z = strtod(argv[3], &end);
    if(*end || !*argv[3]) {
        fprintf(stderr, "z value %s is not a number\n", argv[3]);
        return EXIT_FAILURE;
    }

    a = b = c = d = 0;
    best = getdist(x,y,z,a,b,c,d);
    printf("a=%f b=%f c=%f d=%f (dist=%f)\n", a, b, c, d, sqrt(best));
    srand(time(0));

    while(best) {
        double save_a, save_b, save_c, save_d;

        save_a = a;
        save_b = b;
        save_c = c;
        save_d = d;

        a += rand()*1./RAND_MAX*.02 - .01;
        b += rand()*1./RAND_MAX*.02 - .01;
        c += rand()*1./RAND_MAX*.02 - .01;
        d += rand()*1./RAND_MAX*.02 - .01;

        dist = getdist(x,y,z,a,b,c,d);

        if(dist < best) {
            best = dist;
            printf("a=%f b=%f c=%f d=%f (dist=%f)\n", a, b, c, d, sqrt(best));
        } else {
            a = save_a;
            b = save_b;
            c = save_c;
            d = save_d;
        }
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:57:33.653

您要求速度优化：

你有

```
for (a...)
   for (b..)
      for (c...)
         for (d...)
            ...
            11*cos(d+c+b+a) + 9*cos(b+a) + 12*cos(c+b+a)
            ... 
```

更好的是

```
for (a...)
   for (b..)
      mybpa = 9*cos(b+a)
      for (c...)
         mycpbpa = 12*cos(c+b+a)
         for (d...)
            mydpcpbpa = 11*cos(d+c+b+a)
            ...
            mydpcpbpa + mycpbpa + mybpa
            ... 
```

所以你尽早做耗时的计算。当它们达到该水平时，您应该计算所有这些值，它们在下一个循环中不会再改变。你甚至应该`9*cos(b+a)+9*cos(b-a)`在它们没有改变时立即进行小计

# ruby-on-rails - 为什么仅在 rails 3.2.8 中为一个关联“未初始化的常量”？

> ID：12152528
> 
> 赞同：1
> 
> 时间：2012-08-28T03:52:09.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3

发票项目是我们的 rails 3.2.8 应用程序中的一个模型。它的定义是：

```
class InvoiceItem < ActiveRecord::Base 

  belongs_to :invoice
  belongs_to :quote_test_item, :class_name => 'QuoteTestItem'
  belongs_to :lease_usage_record, :class_name => 'LeaseUsageRecord'

  validates :lease_usage_record_id, :uniqueness => { :scope => :invoice_id }, :unless => "lease_usage_record_id.nil?"

end 
```

有3个协会。如果 i 是发票项目对象。i.quote_test_item 将创建错误（在 Rails 控制台中）：

```
irb(main):037:0> i.quote_test_item
NameError: uninitialized constant InvoiceItem::quote_test_item 
```

我是：

```
irb(main):038:0> i
=> #<InvoiceItem id: 6, invoice_id: 6, lease_usage_record_id: nil, created_at: "2012-07-25 19:28:37", updated_at: "2012-07-25 19:28:37", quote_test_item_id: 1> 
```

但是 i.invoice 和 i.lease_usage_record 都通过了并且没有产生任何错误。例如：

```
irb(main):036:0> i.lease_usage_record
=> nil 
```

为什么只有 i.quote_test_item 创建了错误？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:29:41.237

确保您已执行所有迁移。您可能还想检查您的`QuoteTestItem`（顺便说一下，您不必指定，`:classname`因为它是推断的）来检查您是否有相应的`has_one :invoice_item`or `has_many :invoice_items`，这取决于您的建模方式。

# java - 实现OnTouchEvent后，onClick无效

> ID：12152531
> 
> 赞同：0
> 
> 时间：2012-08-28T03:52:57.177
> 
> 标签：java, android, onclick, touch, invalidation

现在我想实现一个自定义图像视图，它可以自动将背景变为灰色，但现在的问题是我的视图无法响应 onclick 事件，如果我返回 super.OnTouchEvent.invalidate() 将不起作用，所以效果无效，我现在不知道怎么办。

 `````
package com.test;

import android.content.Context;
import android.graphics.ColorMatrixColorFilter;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.ImageView;

/**
 * the class for the ImageView to automatic turn background to gray
 * 
 * @author jinningwei
 * 
 */
public class AutoGrayImageView extends ImageView {

    public AutoGrayImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    private boolean canAutoGray = true;

    /**
     * set the function of autogray whether enabled
     * 
     * @param enabled
     */
    public void enableAutoGray(boolean enabled) {
        canAutoGray = enabled;
    }

    private float grayscale = 0.2f;

    /**
     * set gray degree
     * 
     * @param grayscale
     */
    public void setGrayscale(float grayscale) {
        if (grayscale > 0.5f) {
            grayscale = 0.5f;
            return;
        }
        if (grayscale < 0.0f) {
            grayscale = 0.0f;
            return;
        }
        this.grayscale = grayscale;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (canAutoGray) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                float[] gray_matrix = { grayscale, grayscale, grayscale, 0.0f, 0.0f, // red
                        grayscale, grayscale, grayscale, 0.0f, 0.0f, // green
                        grayscale, grayscale, grayscale, 0.0f, 0.0f, // blue
                        0.0f, 0.0f, 0.0f, 1.0f, 0.0f, // alpha
                };
                this.getBackground().setColorFilter(new ColorMatrixColorFilter(gray_matrix));
                invalidate();
                return true;
            case MotionEvent.ACTION_UP:
                float[] reset_matrix = { 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, // red
                        0.0f, 1.0f, 0.0f, 0.0f, 0.0f,// green
                        0.0f, 0.0f, 1.0f, 0.0f, 0.0f, // blue
                        0.0f, 0.0f, 0.0f, 1.0f, 0.0f, // alpha
                };
                this.getBackground().setColorFilter(new ColorMatrixColorFilter(reset_matrix));
                invalidate();
                return false;
            }
        }
        return super.onTouchEvent(event);
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:01:30.690

我认为，如果您要覆盖该方法，那么您的代码应该是这样的

```
public boolean onTouchEvent(MotionEvent event) {
     super.onTouchEvent(event);
    if (canAutoGray) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            float[] gray_matrix = { grayscale, grayscale, grayscale, 0.0f, 0.0f, // red
                    grayscale, grayscale, grayscale, 0.0f, 0.0f, // green
                    grayscale, grayscale, grayscale, 0.0f, 0.0f, // blue
                    0.0f, 0.0f, 0.0f, 1.0f, 0.0f, // alpha
            };
            this.getBackground().setColorFilter(new ColorMatrixColorFilter(gray_matrix));
            invalidate();
            return true;
        case MotionEvent.ACTION_UP:
            float[] reset_matrix = { 1.0f, 0.0f, 0.0f, 0.0f, 0.0f, // red
                    0.0f, 1.0f, 0.0f, 0.0f, 0.0f,// green
                    0.0f, 0.0f, 1.0f, 0.0f, 0.0f, // blue
                    0.0f, 0.0f, 0.0f, 1.0f, 0.0f, // alpha
            };
            this.getBackground().setColorFilter(new ColorMatrixColorFilter(reset_matrix));
            invalidate();
            return false;
        }
    }
    return true;
} 
`````

# jquery - jquery ui对话框重定向关闭

> ID：12152532
> 
> 赞同：0
> 
> 时间：2012-08-28T03:53:02.767
> 
> 标签：jquery, jquery-ui

我试图强制对话框在初始化后关闭。这是最初创建对话框的方式

```
$("#myDialog").dialog({
    width: 960,
    hide: 'slide',
    position: 'top',
    show: 'slide'
}); 
```

我不将事件附加到上述代码的原因是我不希望对话框总是在关闭时重定向。我只希望手动进行重定向。我试图在显示对话框后使用此代码，但它不起作用。

```
 $("#myDialog").dialog({
        close: function(event, ui) { location.href = 'whatever.html' }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:02:04.813

您需要将此事件绑定到已创建的 jquery 对话框，如下所示，

```
$( "#myDialog" ).bind( "dialogclose", function(event, ui) {
location.href = 'whatever.html' ;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:06:55.733

您可以使用该[`option`方法](http://docs.jquery.com/UI/Dialog#method-option)更改现有 jQuery UI 小部件上的选项：

```
$('#myDialog').dialog('option', 'close', function(event, ui) { ... }); 
```

演示：http: [//jsfiddle.net/ambiguous/nuGqK/](http://jsfiddle.net/ambiguous/nuGqK/)

这应该适用于任何对话框选项。

# install4j - 如何在 install4j 中检查 Windows 8？

> ID：12152534
> 
> 赞同：1
> 
> 时间：2012-08-28T03:53:08.737
> 
> 标签：install4j

Util API 可以检查 windows 7、vista、xp 等。但不能检查 windows 8。如何在 install4j 中检查 windows 8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:45:29.810

`Util.isWindows8()`将包含在 install4j 5.1.3 中。

同时，您可以检查是否`Util.isWindows()`为真`System.getProperty("os.version").equals("6.2")`

# mapreduce - 用作 MapReduce 文件系统的要求是什么

> ID：12152535
> 
> 赞同：0
> 
> 时间：2012-08-28T03:53:16.227
> 
> 标签：mapreduce, hdfs

我知道 S3 和其他一些文件系统可以替代 HDFS，我想知道文件系统需要满足哪些要求才能在 MapReduce 框架中用作 HDFS 的替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T16:57:03.533

Hadoop 有一个文件系统的抽象概念，HDFS 只是其中的一种实现。Java 抽象类 org.apache.hadoop.fs.FileSystem 表示 Hadoop 中的文件系统，并且实现了几个具体的实现，包括用于小型部署和/或测试目的的本地。

[https://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T00:13:42.703

文件系统必须是*分布式*的或*全局可访问*的，以便分布式执行`MapReduce`能够通过网络与其通信。

# android - 根据可用的水平空间有条件地在 ListAdapter 中显示项目

> ID：12152537
> 
> 赞同：0
> 
> 时间：2012-08-28T03:53:21.300
> 
> 标签：android, android-layout

我有一个 ListAdapter，它使用 RelativeLayout 来显示列表中的项目。

布局有一个在右侧对齐的 TextView，我想根据可用空间从左侧显示 ImageView/TextView 对的变量列表。如果其中一对将与右对齐的文本视图重叠，我不想再显示了。

这里有几张图片可以说明：

在狭窄的屏幕上，可能会显示 2 对：

![窄列表项](../Images/ac89e469aa7953c3ac62a694c4f1bd62.png)

在更宽的屏幕上可能会显示 4 对：

![宽列表项](../Images/cc54b07bb643f0da4e5b58f5621f8eaa.png)

我已经尝试在 BaseAdapter getView 覆盖中测量元素。但这只是衡量文本，并没有告诉我位置。我想我也需要调用布局？

我可以使用更简单的技术吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:10:17.713

您可以为不同的方向和大小的屏幕设计单独的布局，然后 Android 会自动为您使用加载适当的布局。阅读如何做到这一点：[多屏幕设计](http://developer.android.com/training/multiscreen/index.html)

# session - 在什么阶段可以访问 Servlet 中的 Session？

> ID：12152545
> 
> 赞同：1
> 
> 时间：2012-08-28T03:54:32.697
> 
> 标签：session, servlets

我有一个小服务程序。在我的`doPost`方法中，我试图在`Session`. `session = req.getSession(false)`导致会话值为`null`。因此，我无法在其中设置任何内容。在我`servlet`遗嘱的哪个阶段，我可以访问`session`和存储其中的一些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:59:04.183

没有什么比在`HttpServlet`. 一旦 Servlet 被初始化并且在响应被提交之前，您可以随时创建它。

从[Javadoc](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)中，有两种创建方法`HttpSession`。

`getSession()` -- 返回与此请求关联的当前会话，或者如果请求没有会话，则创建一个。

和`getSession(boolean create)`-- 返回`HttpSession`与此请求关联的当前会话，或者，如果没有当前会话并且 create 为真，则返回一个新会话。

在这里，您正在传递 false `getSession(false)`。因此，如果会话不存在，它将返回`NULL`。

第一次创建会话时使用`getSession()`或`getSession(true)`设置属性，然后在后续使用中使用`getSession(false)`并获取属性访问它。

# c++ - 在比较中，字符是否转换为整数？

> ID：12152550
> 
> 赞同：0
> 
> 时间：2012-08-28T03:54:55.353
> 
> 标签：c++, pointers

我试图理解下面的比较语句中发生了什么。

```
int n = 1;

std::puts( ((char*)&n)[0] == 1 ? "-Y-" : "-N-" ); 
```

上面的语句对我的输出是`-Y-`

我的第一个问题是，为什么要将指针转换为 a`char*`而不是 a `int*`？

此外，如果我们将 char 与 int 进行比较，答案似乎应该是`-N-`.

与 比较时，char 是否会自动转换为 int `1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:02:05.810

那是一些可怕的代码，但它输出的原因 `-Y-`是因为您有效地将 int 的内容`n`视为字节数组，并且您的机器的字节顺序使得它`int = 1`以与`char[] = { 1 , 0 , 0, 0};`(don'不要依赖这个！）

因此，这就像你在做

```
int someInt = 1;
char someChar = 1;
if (someInt == someChar)
{
  puts("-Y"-):
}
else
{
  puts("-N"-):
} 
```

要回答您的第二个问题（和标题问题），是的 C++（和 C）将隐式进行类型提升：请参阅[C++ 运算符中的隐式类型转换规则](https://stackoverflow.com/questions/5563000/implicit-type-conversion-rules-in-c-operators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:08:11.523

您可能将 char 与 int 进行比较，但这里 char 的值是多少？您无法仅从您发布的代码中分辨出来，并且在不同的环境中它可能会有所不同。

您不是将 char 转换为 int 并进行比较，而是切掉 int 的一部分，将其视为 char，然后将其提升并进行比较。在 little-endian 机器上它可能是 1，在 big-endian 机器上是 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:06:45.857

答案取决于字节序：

```
>>> struct.pack('<i', 1)
'\x01\x00\x00\x00'
>>> struct.pack('>i', 1)
'\x00\x00\x00\x01' 
```

`-Y-`对应于小端字节序。

# windows - PSEXEC 批处理文件

> ID：12152553
> 
> 赞同：0
> 
> 时间：2012-08-28T03:55:08.783
> 
> 标签：windows, batch-file, cmd

我有一个使用以下代码的批处理文件：

```
@echo off

:: BatchGotAdmin
:-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0"
    goto KILLME
:--------------------------------------

:KILLME
CD "C:\Users\Justin\Desktop\PSTOOLS\"
psexec -s -i "cmd.exe" 
```

现在，您知道如果您在这样的批处理文件中使用过 PSEXEC，就会启动一个命令提示符来启动 PSEXEC，然后它会以系统帐户的身份启动 cmd.exe。如何关闭初始命令提示符（不是作为系统帐户运行的命令提示符）以使该批处理文件执行得更干净一些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:03:21.947

使用`-d`psexec 的选项告诉它不要等待新进程退出。

# c# - 将天数添加到必须从星期一开始的日期范围

> ID：12152554
> 
> 赞同：-1
> 
> 时间：2012-08-28T03:55:28.990
> 
> 标签：c#, asp.net, calendar

我正在研究一个时隙生成功能，在该功能中我必须生成当年的起始日期和截止日期。时隙的持续时间将插入文本框中。

在这里，我在本年度创建了一个时间段，但我只需要从星期一开始所有起始日期。

所以，如果一个时段从星期五开始，那么跳过直到星期一的日子。

在这里，我没有从星期一开始就完成了：

```
string fdate = "01/01/" + System.DateTime.Today.Year;
fdate = Convert.ToDateTime(fdate).AddDays(-1).ToString();
string ffdate = "";
string ttdate = "";
for (int date = 0; date < 365; )
{
    ffdate += Convert.ToDateTime(fdate).AddDays(1 + date).ToString() + ",";
    date += Convert.ToInt32(txtTime.Text);
    ttdate += Convert.ToDateTime(fdate).AddDays(date).ToString() + ",";
}
fromdate = ffdate.TrimEnd(',');
todate = ttdate.TrimEnd(','); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:19:53.103

试试这个

```
int day= 31; 
int month = 12;
bool IsMonday =false;
string fdate = day.Tostring() + "/"+month.Tostring()+ "/" + System.DateTime.Today.Year;
while(IsMonday )
{   

    if(DayOfWeek.Monday == (DateTime.ParseExact(fdate , "d", CultureInfo.InvariantCulture)).DayOfWeek) {
        IsMonday = true;
    } else {
        if(day==31){
            day= 1;
            month =1;
        } else {
            day= day+1;
            month =1;
        }
        fdate = day.Tostring() + "/"+month.Tostring()+ "/" + System.DateTime.Today.Year;
    }
}
string ffdate = "";
string ttdate = "";
for (int date = 0; date < 365; date=date+7 ){
    ffdate += Convert.ToDateTime(fdate).AddDays(date).ToString() + ",";        
    ttdate += Convert.ToDateTime(fdate).AddDays(Convert.ToInt32(txtTime.Text)).ToString() + ",";
}
fromdate = ffdate.TrimEnd(',');
todate = ttdate.TrimEnd(','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:20:58.783

我不确定我是否正确理解了这个问题，但从您的评论来看，这可能很有用。

如果起始日期以天为单位（从年初开始），您可以通过执行以下操作计算起始日期：

```
// minus one if entering 1 in the textbox means 1st of January. 
// Remove if 1st of January would require the user to enter 0
var daysToAdd = (int)textBoxFrom.Text - 1;
var fromDate = new DateTime(DateTime.Now.Year, 1, 1).AddDays(daysToAdd);
// you could also do: new DateTime(DateTime.Now.Year, 1, (int)textBoxFrom.Text) 
```

现在，找到第一个星期一：

```
for (var i = 0; i < 7; i++)
{
    if (fromDate.AddDays(i).DayOfWeek == DayOfWeek.Monday)
    {
        fromDate = fromDate.AddDays(i);
    }
} 
```

最后，计算当前日期：

```
var toDate = fromDate.AddDays((int)textBoxDays.Text); 
```

现在您有了日期，并且可以在必要时将它们转换为字符串。此外，您可能想查看[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx). 假设输入了正确的整数，我刚刚转换了文本框的内容。但也许用户可以输入字母，这会给你一个例外。

# android - 如何在android c++文件中打印日志？

> ID：12152555
> 
> 赞同：18
> 
> 时间：2012-08-28T03:55:30.527
> 
> 标签：android, logging

我添加了

```
#define LOG_NDEBUG 0
#define LOG_TAG "StagefrightMediaScanner"
#include <utils/Log.h> 
```

在里面`libstagefright/StagefrightMediaScanner.cpp`

但无法使用 LOGV 和 LOGE 打印任何内容，我还需要做其他事情吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-21T07:01:49.650

您可以使用以下代码获取Log

```
 __android_log_print(ANDROID_LOG_ERROR, "TRACKERS", "%s", Str); 
```

并添加以下头文件

```
#include <android/log.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T02:53:03.603

可以查看frameworks/av/media/libstagefright/Android.mk，是否有

```
 LOCAL_SHARED_LIBRARIES += liblog 
```

在里面。

那么，下`frameworks/av/media/libstagefright/`

```
$ mm

$ adb push $OUT/system/lib/libstagefright.so /system/lib/ 

$ adb shell killall mediaserver 
```

然后重新启动您的手机或启动一个`MEDIA_MOUNTED`意图，MediaScanner 将工作，并且应该显示您刚刚添加的日志（或`ALOGE/ALOGV`或）。`LOGE/LOGV`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T06:46:40.490

不，你做得对。只需检查它是否使用类似于 printf() 的 ALOGV()，如果要打印带有日志的整数，则可以这样编写："ALOGV("Integer is %d",integer);"。

# ios - iOS 模拟器不运行

> ID：12152559
> 
> 赞同：3
> 
> 时间：2012-08-28T03:56:52.403
> 
> 标签：ios, xcode, sdk

我对最新的 iOS 模拟器有一个严重的问题。我正在使用 macbook pro、Mountain Lion OS 和 xCode 4.4.1。这是最新的操作系统和最新的 xCode。

当我运行示例代码来测试 iOS 模拟器时，模拟器会打开但会冻结。
该应用程序没有响应，而是停留在黑屏，冻结。我已经重新下载了xcode并重新安装了很多次，它仍然无法正常工作。有人能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T04:06:46.090

通过删除所有内容来清除模拟器的数据和应用程序`~/Library/Application Support/iPhone Simulator/`。这将删除所有现有的用户应用程序，这可能会很好地解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T03:27:07.653

您也可以使用重置模拟器修复它。请参阅以下步骤

**-> 选择你的模拟器**

**-> 在菜单中选择 iOS 模拟器**

**-> 点击重置内容和设置...**

你所做的一切。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T21:06:19.053

我刚遇到模拟器“不起作用”的问题。它正在处理我以前的应用程序。我可以编译目标 5.0 并在 iPhone 6.1 模拟器上运行。但由于某种原因，这个新应用程序根本没有出现在模拟器上。所以安装 5.0 模拟器，现在它正在模拟器 5.0 上运行。

# sorting - 为什么 sortBy 不采用 (a -> a -> Bool)？

> ID：12152561
> 
> 赞同：20
> 
> 时间：2012-08-28T03:57:15.370
> 
> 标签：sorting, haskell

Haskell`sortBy`函数将`(a -> a -> Ordering)`其作为第一个参数。谁能教育我那里的推理是什么？我的背景完全是具有类似功能的语言`(a -> a -> Bool)`，所以不得不编写一个返回`LT`/的语言`GT`有点令人困惑。

这是在静态类型/纯函数式语言中执行此操作的标准方式吗？这是 ML 后裔语言特有的吗？是否有一些我没有看到的基本优势，或者使用布尔值有一些隐藏的*缺点？*

* * *

总结：

*   不是，它实际上是`Ordering`（显然没有在引擎盖下使用它来进行排序，但仍然）`GT | LT``GT | EQ | LT``GHC`

*   返回三分法值更紧密地模拟两个元素比较的可能结果

*   在某些情况下，使用`Ordering`而不是 a`Bool`将保存比较

*   使用 an`Ordering`可以更轻松地实现稳定的排序

*   使用 an`Ordering`可以让读者清楚地知道两个元素之间的比较正在进行（布尔值本身并不具有这种含义，尽管我觉得许多读者会假设它）

我暂时接受 Carl 的回答，并发布上述摘要，因为在本次编辑中没有一个单一的答案能达到所有要点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T04:54:40.260

我认为[布尔盲](http://existentialtype.wordpress.com/2011/03/15/boolean-blindness/)是主要原因。`Bool`是没有域语义的类型。在类似函数的情况下，它的语义`sortBy`完全来自约定，而不是来自函数正在运行的域。

这为编写比较函数所涉及的心理过程增加了一层间接性。而不是仅仅说“我可以返回的三个值小于、等于或大于”，排序的语义构建块，你说“我想返回小于，所以我必须将它转换为布尔值”。总是存在一个额外的心理转换步骤。即使您精通约定，它仍然会减慢您的速度。如果你不熟悉约定，你会因为不得不检查它是什么而减慢了很多速度。

它是 3 值而不是 2 值的事实意味着您在排序实现中也不需要非常小心以获得稳定性 - 但这是一个次要的实现细节。它并不像让你的价值观真正有意义那么重要。（此外，它并不`Bool`比 . 它更有效`Ordering`。它不是 Haskell 中的原语。它们都是在库中定义的代数数据类型。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-28T04:21:56.653

当你整理东西时，你把它们整理好；没有要确定的“真相”值。

更重要的是，“真实”是什么意思？第一个论点小于第二个？比...更棒？现在您将“true”覆盖为真正的“小于”（或“大于”，具体取决于您选择实现该功能的方式）。如果他们是平等的呢？

那么为什么不删掉中间人，可以这么说，并返回你的*真正*意思呢？

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-28T04:49:44.777

没有理由不能。如果您查看[ghc 实现](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Data-List.html#sortBy)，它只会检查结果是否正确`GT`。Haskell Report 版本的代码使用`insertBy`，同样只检查`GT`或不检查。您可以编写以下内容并毫无问题地使用它：

```
sortByBool :: (a -> a -> Bool) -> [a] -> [a]
sortByBool lte = sortBy (\x y -> if lte x y then LT else GT)

sort' :: Ord a => [a] -> [a]
sort' = sortByBool (<=) 
```

某些排序可以通过知道元素何时是 来执行优化`EQ`，但当前使用的实现不需要此信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-28T05:01:44.200

我认为有两个独立的设计决策：
1）创建`Ordering`类型
2）选择`sortBy`返回`Ordering`值

该`Ordering`类型不仅仅有用`sortBy`- 例如，`compare`它是类型类的“核心” `Ord`。它的类型是`:: Ord a => a -> a -> Ordering`. 那么，给定两个值，您可以找出它们是小于、大于还是等于——使用任何其他比较函数（`(<)`、`(<=)`、`(>)`、`(>=)`），您只能排除这三种可能性中的一种。

这是一个简单的示例，其中`Ordering`（至少在我看来）使函数的意图更加清晰：

```
f a b = 
  case compare a b of
    GT -> {- something -}
    LT -> {- something -}
    EQ -> {- something -} 
```

一旦你决定创建`Ordering`类型，那么我认为在你真正需要的信息的地方使用它是很自然的（比如`sortBy`），而不是`Bool`作为一种解决方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-28T06:15:09.233

在我们确实需要区分大小写的情况下，需要三个值`Ordering`来**保存比较**`EQ`。在重复保留`sort`or`merge`中，我们忽略了这种`EQ`情况，因此具有*小于等于或等于语义的****谓词***是完全可以接受的。但不是在我们确实想要区分比较的*三种*结果的情况下或在哪里。*`union``nubSort`*

 **```
mergeBy lte (x:xs) (y:ys)
    | lte y x   = y : mergeBy lte (x:xs) ys
    | otherwise = x : mergeBy lte xs (y:ys)

union (x:xs) (y:ys) = case compare x y of 
    LT -> x : union  xs (y:ys) 
    EQ -> x : union  xs    ys 
    GT -> y : union (x:xs) ys 
```

*用lte*谓词编写后一个是不自然的。**

# php - php.ini 文件中的upload_max_filesize 改变了，但ini_get 仍然显示2M

> ID：12152563
> 
> 赞同：0
> 
> 时间：2012-08-28T03:57:25.883
> 
> 标签：php

我不再尝试使用 ini_set 更改 upload_max_filesize。我已经看到了那些答案。

我使用 phpinfo() 的路径找到了我认为真正的 php.ini。我已经编辑了文件，将值从 2M 更改为 10M。

尽管如此， ini_get('upload_max_filesize') 仍然显示 2M 并且我的上传仍然失败，因为文件比这个大。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:02:18.367

如果遇到这样的问题，有四件事要检查：

1.  确保使用 phpinfo() 加载了正确的 php.ini
2.  确保没有通过[--with-config-file-scan-dir](http://php.net/manual/en/function.php-ini-scanned-files.php)选项加载额外的 ini 文件
3.  您没有在代码中的任何地方使用 ini_set() 来覆盖设置
4.  您在对 ini 文件进行任何更改后重新启动了 Web 服务器

不太常见的是，您还可以将 PHP 配置为使用 -d 或[--define](http://php.net/manual/en/features.commandline.options.php)指令运行，它们可以在运行时设置此设置。这也将显示在 phpinfo() 结果中。

# javascript - 如何使用 jQuery 等待来自回调的异步调用？

> ID：12152564
> 
> 赞同：2
> 
> 时间：2012-08-28T03:57:36.507
> 
> 标签：javascript, jquery, ajax, asynchronous

我正在使用基于 jQuery 的[select2](https://github.com/ivaynberg/select2)替换组合框，并且我必须定义一个回调来处理我从 json rest web 服务接收到的数据。

问题是，在同一个回调中，我必须发出另一个 GET 请求来获取匹配记录的总数，以便 select2 可以决定是否必须加载更多结果（它具有无限滚动功能）

代码是这样的：

```
$("#country").select2({
  ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
    url: 'http://localhost:9000/api/countries',
    dataType: 'json',
    data: function(term, page) {
      return {
        filter: term,
        page: page,
        len: 10
      };
    },
    results: function(data, page) {
      return {
        results: data, more: ????
      };
    }
  }
}); 
```

问题是我不知道如何发出异步请求（我正在发出跨域请求，并且文档说在这种情况下不支持异步）并等待它完成，然后再从结果回调中返回。

select2 页面中的示例如下所示：

```
results: function (data, page) {
  var more = (page * 10) < data.total; // whether or not there are more results available
  // notice we return the value of more so Select2 knows if more results can be loaded
  return {results: data.movies, more: more};
} 
```

问题是我的 Web 服务返回来自不同端点的记录总数，所以我必须发出另一个请求，如下所示：http://localhost:9000/api/countries?filter=term

任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T04:00:31.607

您不能等待 javascript 中的异步回调。您必须根据来自实际回调的异步响应来重组代码以完成所有未来的工作。

如果您需要进行多个连续的 ajax 调用，那么您发出第一个，然后在第一个 ajax 调用的成功处理程序或响应处理程序中，发出第二个 ajax 调用，并在第二个的响应处理程序中执行任何操作你想处理数据。

如果看到您正在使用该`.select2()`框架。在框架中，结果回调是 ajax 调用返回的地方。在该函数中，您将使用普通的 jQuery ajax 调用发出第二个 ajax 调用，并在第二个 ajax 调用的成功处理程序中，您将对返回的最终数据执行任何您想要执行的操作。您将无法使用结果回调的正常返回值，因为您在需要返回的点上还没有最终数据。我认为这只是一个限制`.select2()`，因为它只支持单个 ajax 调用。这只是意味着您不能使用一点内置行为，而必须自己使用自己的代码应用结果，但它没有`.select2()`

看起来您可能只想`change`直接挂钩事件而不使用它们的内置 ajax 东西，因为如果您需要两个序列化的 ajax 调用，它看起来并不能真正为您提供很多东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:53:21.163

我研究了select2上的源代码，最后得出了这个解决方案

```
var ajax = {
  url: 'http://localhost:9000/api/countries',
  len: 3,
};

$("#country").select2({
  query: function(options) {
    var data = {
      filter: options.term,
      page: options.page,
      len: ajax.len
    };
    $.ajax({
      url: ajax.url,
      data: data,
      dataType: 'json',
      type: 'GET',
      success: function(data) {
        $.ajax({
          url: ajax.url + '/count',
          data: { filter: options.term },
          dataype: 'json',
          success: function(resp) {
            var total = parseInt(resp, 10);
            var more = (options.page * ajax.len) < total;
            options.callback({results: data, more: more});
          }
        });
      }
    });
  },
}); 
```

如您所见，当第一次获取（ajax.url）完成时，我发出另一个请求（ajax.url + '/count'），只有当第二个请求完成时，我才调用 options.callback，有效地序列化两个 ajax 调用......

事实上，[来自 select2 的 ajax 函数](https://github.com/ivaynberg/select2/blob/master/select2.js#L285)具有更多功能，例如节流和丢弃乱序响应，我也只是移植了它们，但为了不使示例复杂化，我将它们排除在此响应之外......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:32:13.560

除了jfriend00的回答（这很好，顺便说一句），我发现了followgin解决方法，它基本上是同步发出请求，尽管jquery docs它似乎工作（至少对于chromium 18.0和jquery 1.8.0）

我只是发布它以防有人发现它有用...

```
var config = {
  url: 'http://localhost:9000/api/countries',
  len: 20,
  term: ''
}
$("#country").select2({
  ajax: { 
    url: config.url,
    dataType: 'json',
    data: function(term, page) {
      config.term = term;
      return {
        filter: term,
        page: page,
        len: config.len
      };
    },
    results: function(data, page) { // parse the results into the format expected by Select2.
      var more = false;
      $.ajax({
        url: config.url + '/count',
        data: { filter: config.term },
        cache: false,
        async: false,
        success: function(resp) {
          var total = parseInt(resp, 10);
          more = (page * config.len) < total;
        },
        async:false
      });
      return {
        results: data, more: more
      };
    }
  }
}); 
```

# php - Android App 和 PHP Server 的零配置网络

> ID：12152566
> 
> 赞同：1
> 
> 时间：2012-08-28T03:58:04.057
> 
> 标签：php, android, broadcast, zeroconf

如何让我的 android 应用程序获取我的 php 服务器的 IP 地址？

例如，android 应用程序发送广播消息。然后我的服务器侦听该消息并将服务器的 ip 地址发送到 android 应用程序。

```
Phone ----> Send broadcast message for requesting IP Address
Server <----- Receive the message
Server -----> Send the IP Address information to phone
Phone <---- Receive the information and save the server's IP Address. Finish 
```

我找到了 JmDNS，但是我的服务器是 PHP 而不是 Java。或者，有一个技巧或解决方案来完成这项工作？

# clojure - 使用带有原始参数的协议

> ID：12152567
> 
> 赞同：3
> 
> 时间：2012-08-28T03:58:35.697
> 
> 标签：clojure, protocols, primitive

我试图在 Clojure 1.4 中使用原始参数定义一个协议（这样我就可以避免在性能敏感代码中不必要的原始装箱）：

```
(defprotocol A
  (foo [a ^long x]))

(extend-type java.lang.String A 
  (foo [s ^long x] (.charAt s x))) 
```

这看起来工作正常，但当我尝试使用它时失败并出现异常：

```
(foo "abracadarbra" 3)
=> ClassCastException XXXX cannot be cast to clojure.lang.IFn$OLO 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:59:16.497

经过一些进一步的研究，协议似乎**还不支持原始类型提示**（从 Clojure 1.4 开始）。参见例如[https://groups.google.com/d/topic/clojure-dev/HxBqIewc494/discussion](https://groups.google.com/d/topic/clojure-dev/HxBqIewc494/discussion)

替代方案似乎是：

*   编写带有原始提示的常规函数​​。你失去了多态性。
*   使用 Java 接口（您可以使用[reify](http://clojuredocs.org/clojure_core/clojure.core/reify)在 Clojure 中构建实例）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:28:59.037

从 中取出类型提示`defprotocol`并将其留在`extend-type`

```
(defprotocol A
(foo [a x]))

(extend-type java.lang.String A 
  (foo [s ^Long x] (.charAt s x)))
nil
core> (foo "abracadarbra" 3)
\a 
```

或者您可以像这样更改类型提示：

```
(defprotocol A
(foo [a ^Long/TYPE x]))

(extend-type java.lang.String A 
  (foo [s ^long x] (.charAt s x)))
nil
core> (foo "abracadarbra" 3)
\a 
```

如果没有提示，这仍然不会产生反射警告`defprotocol`

编辑：

```
(extend-type java.lang.String A 
  (foo [s ^Long x] (type x)))
nil
core> (foo "abracadarbra" 3)
java.lang.Long 
```

# php - 开发富 Web 应用程序的最佳框架是什么？

> ID：12152569
> 
> 赞同：3
> 
> 时间：2012-08-28T03:58:54.843
> 
> 标签：php, frameworks

我需要知道提供 MVC 的最好的 php 框架是什么，并且许多像一个这样的自定义控件是 jsf。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:30:15.037

Yii是最好的。[http://en.wikipedia.org/wiki/Yii](http://en.wikipedia.org/wiki/Yii)。

[http://www.yiiframework.com/](http://www.yiiframework.com/)

它具有 MVC，您可以创建自定义字段。

是的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T04:58:44.537

我强烈推荐这个 PHP Framewkork

[http://codeigniter.com/](http://codeigniter.com/)

去年我也提出了同样的问题，在网络上最有名的十个 PHP 框架中查找，这在 10 分钟内令人信服，只需阅读此[http://codeigniter.com/user_guide/](http://codeigniter.com/user_guide/) 10 分钟并尝试自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T05:02:54.470

所有的框架都是最好的。它们是由最优秀的人创造的，因此它们在全世界都可用。一些流行的是；

```
Zend Framework
CakePhp
Simpfony
CodeIgniter 
```

它只取决于你，你喜欢哪一个。

# php - 不起作用并在此脚本中添加删除命令

> ID：12152574
> 
> 赞同：0
> 
> 时间：2012-08-28T03:59:29.023
> 
> 标签：php, jquery

编码：

```
var i=0,j=0;

var t1= new Array();
function createtext(){

    i++;

    t1[i]=document.createElement('input');

    t1[i].type='text';

    t1[i].name='text'+i;

    t1[i].value = "hello"+i;

    t1[i].size = 10;

    document.forms[0].appendChild(t1[i]);

    var mybr=document.createElement("<br>");

    document.appendChild(mybr);

} 
```

表格：

```
<form action="" method="get" name="f1">

    <input name="b1" type="button" onClick="createtext()" value="+">

</form> 
```

单击“+”按钮时，文本框将向下生成而不是每个文本框的侧面。然后每个文本框在其侧面都有一个“删除”链接。当单击“删除”时，文本框将删除。请帮助我。

```
------------------------------------------------
(+) <-imagine this is the button

[SAMPLETEXTBOX1] REMOVE <-imagine a textbox1 with remove link beside it

[SAMPLETEXTBOX2] REMOVE <-imagine a textbox2 with remove link beside it

[SAMPLETEXTBOX1] REMOVE <-imagine a textbox3 with remove link beside it 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:07:54.790

您应该附加到`form`，而不是`document`，也使用`document.createElement("br")`而不是`document.createElement("<br>")`。

```
var mybr=document.createElement("br");
document.forms[0].appendChild(mybr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:03:02.933

此外，您可以将输入框和文本包装在 DIV 中，这将为您提供下面显示的控件所需的结果。

然后，当您单击删除时，您可以只删除 DIV 元素，它可以带走它的所有子节点（输入和文本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:12:11.463

[http://jsfiddle.net/hfdAL/9/](http://jsfiddle.net/hfdAL/9/)

从您的 document.createElement 中删除 <>

# jquery - 这是类型选择器的示例

> ID：12152579
> 
> 赞同：-5
> 
> 时间：2012-08-28T04:00:29.460
> 
> 标签：jquery

我有一个关于 jQuery 的问题。

什么是类型选择器的示例？

1) h1

2) .h1

3) #h1

4）div h1

5) div>h1

谁能告诉我正确的答案是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:02:43.163

你试过谷歌搜索你的问题吗？

[http://www.w3.org/TR/CSS2/selector.html#type-selectors](http://www.w3.org/TR/CSS2/selector.html#type-selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:06:03.503

[**类型选择器**](http://www.w3.org/TR/CSS2/selector.html#type-selectors)匹配文档语言元素类型的名称。类型选择器匹配文档树中元素类型的每个实例。

**h1**

例子：`$("h1")`

上述规则选择`h1`文档树中的所有元素

**.h1**

例子：`$(".h1")`

上述规则选择`class="h1"`文档树中所有具有属性的元素

**#h1**

例子：`$("#h1")`

上述规则选择`id="h1"`文档树中所有具有属性的元素

**div h1**

例子：`$("div h1")`

上述规则选择文档树中`div`具有元素的所有元素`h1`

**div > h1**

例子：`$("div > h1")`

上面的规则选择文档树`h1`中元素的所有子元素`div`

# php - PHP 非持久化进程设计 vs Python/Java

> ID：12152593
> 
> 赞同：4
> 
> 时间：2012-08-28T04:02:21.317
> 
> 标签：php, python, process, web, uptime

目前，我正在考虑在这 3 种语言之间进行一个需要非常高正常运行时间的项目（正常运行时间比性能更重要）。

我已经做了一段时间的 PHP 开发人员，不介意切换到“更好”的语言，例如 Python，或者更（可能）更专业的语言，例如 Java，但有一件事阻碍了我：

在 PHP 中，假设一个用户创建了一些格式错误/奇怪的请求，导致我的代码崩溃——只有那个用户会受到影响。其他用户可以继续发出请求，因为每个 HTTP 请求都会调用一个新的 PHP 进程。

考虑 Python 或 Java：如果用户使我的后端代码崩溃，则只有一个进程在运行，整个 webapp 都会崩溃，这将是一场灾难。

我的问题是，有没有一个词可以描述这两种不同的 Web 编程方法？另外，我是否遗漏了任何明显的东西，或者 PHP 真的比 Python/Java/其他持久进程方法有这么大的优势，如果是这样，为什么 Python 不采用这种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:08:49.033

我正在寻找的是有人将我指向这样的文章：

[http://www.electricmonk.nl/docs/apache_fastcgi_python/apache_fastcgi_python.html](http://www.electricmonk.nl/docs/apache_fastcgi_python/apache_fastcgi_python.html)

Python 可以通过 WSGI 在后台持续运行，并且可以有许多解释器在等待请求。如果其中一个解释器崩溃，这不是问题，因为其他解释器正在等待，因为 Apache 可以自动重新启动任何崩溃的解释器。

Python 也可以在类似于 PHP 的每个请求上手动调用，但速度较慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:58:34.733

这不是特定于语言的问题。这是一个在将软件放入实际环境之前如何对其进行测试的问题。以及你如何设计你的服务器基础设施。

如果您的软件中存在导致服务器崩溃的错误，您应该修复它。如果 mod_php/您的代码中存在奇怪的错误，即使 PHP 也会使整个服务器崩溃。

如果您不想出现单点故障，则必须构建高可用性设置。至少 2 个负载均衡器（例如使用[keepalived](http://www.keepalived.org/)）、2 个 Web 服务器、2 个数据库服务器、2 个 ...

此外，您还想使用[God](http://godrb.com/)或[mon](https://mon.wiki.kernel.org/index.php/Main_Page)之类的东西来监控您的流程并对所需服务的突然死亡做出反应。

# asp.net-mvc-3 - 在 Linq 查询中分配/比较数据库中的 DateTime 值与 C# 中的 DateTime 值

> ID：12152594
> 
> 赞同：0
> 
> 时间：2012-08-28T04:02:35.110
> 
> 标签：asp.net-mvc-3, linq, c#-4.0

我有以下课程：

```
public class Top10Date
    {
        [Key]
        public int DateId { get; set; }
        public DateTime Date { get; set; }        
    } 
```

与数据库中的 Top10Date 表相关联。我正在尝试进行比较并将值分配给控制器类中的 latestDate：

```
public ActionResult Index(string date, DateTime? latestDate)
    {
        var topDate = db.Top10Dates;

        if (!latestDate.HasValue)
            latestDate = (DateTime?)(topDate.OrderByDescending(d => d.Date).FirstOrDefault());

       if (date.Value == "PreviousDate")
        {
            latestDate = (DateTime?)(topDate.Where(d => d.Date < latestDate.Date).OrderByDescending(d => d.Date).FirstOrDefault());                
        }

        if (date.Value == "NextDate")
        {
            latestDate = (DateTime?)(topDate.Where(d => d.Date > latestDate.Date).OrderBy(d => d.Date).FirstOrDefault());
        }

        .... 

        ViewBag.latestDate = latestDate

        return View();
    } 
```

但它给了我各种各样的错误。我也尝试过其他的东西，但没有一个有效：

```
latestDate = topDate.OrderByDescending(d => d.Date).FirstOrDefault();
latestDate.Value = topDate.OrderByDescending(d => d.Date).FirstOrDefault();

latestDate = topDate.Where(d => d.Date > latestDate.Value.Date).OrderBy(d => d.Date).FirstOrDefault(); 
```

另外我如何从数据库中获取 DateId？我试过了，现在可以了。

```
var dateId = (DateTime?)top10Date.Where(d => d.Date == latestDate.Value.Date).Select(x => x.DateId).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:42:21.293

尝试

```
if (!latestDate.HasValue)
    latestDate = (DateTime?)(topDate.OrderByDescending(d => d.Date).Select( x => x.Date).FirstOrDefault());    

if (date == "PreviousDate")
{
    latestDate = (DateTime?)(topDate.Where(d => d.Date < latestDate.Date).OrderByDescending(d => d.Date).Select(x => x.Date).FirstOrDefault());
}

if (date == "NextDate")
{
    latestDate = (DateTime?)(topDate.Where(d => d.Date > latestDate.Date).OrderBy(d => d.Date).Select(x => x.Date).FirstOrDefault());
} 
```

您的查询正在返回一个无法自动转换为`topDate`的实例。您可以使用 linq 方法让您的查询返回不同的东西 - 在这种情况下，属性`Top10Date``DateTime?``Select()``Date``Top10Date`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:26:22.667

如果其他人遇到类似问题，这是工作代码。我花了一整天的时间才弄清楚这一点。我非常感谢 StanK 向我展示了正确的道路：

```
if (!latestDate.HasValue)
            {
                latestDate = (DateTime?)(topDate.OrderByDescending(d => d.Date).Select(x => x.Date).FirstOrDefault());
            }

           if ( date == "PreviousDate")
            {
                latestDate = (DateTime?)(topDate.Where(d => d.Date < latestDate).OrderByDescending(d => d.Date).Select(x => x.Date).FirstOrDefault());                
            }

            if (date == "NextDate")
            {
                latestDate = (DateTime?)(topDate.Where(d => d.Date > latestDate).OrderBy(d => d.Date).Select(x => x.Date).FirstOrDefault());
            } 
```

这里还有如何获取最新日期的 DateId：

```
 int dateId = topDate.Where(d => d.Date == latestDate).Select(x => x.DateId).FirstOrDefault(); 
```

# jquery-deferred - jQuery - 延迟等待一系列 ajax 请求以完成甚至失败

> ID：12152595
> 
> 赞同：4
> 
> 时间：2012-08-28T04:02:36.803
> 
> 标签：jquery-deferred, deferred, deferred-execution

在多个 ajax 请求都完成后，无论它们是成功还是错误，如何执行一个函数？

我一直在尝试用来`$.when.apply(this, array)`传递延迟的 jqXHR 对象数组。但是就像文档说的那样

> 在其中一个 Deferred 被拒绝的多 Deferred 情况下，jQuery.when 立即 >为其主 Deferred 触发 failCallbacks。请注意，某些 Deferreds 可能仍然>未解决。

如何利用 jQuery 延迟对象始终等待所有 ajax 调用完成？

也许我应该创建自己的延迟来包装所有其他延迟？如果是这样，我不太清楚如何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-05T20:57:00.380

本着 Promise 规范未来如何使用`PromiseInspection`对象的精神，这里有一个 jQuery 附加函数，它告诉你所有承诺何时完成，无论是履行还是拒绝：

```
(function() {    
    // pass either multiple promises as separate arguments or an array of promises
    $.settle = function(p1) {
        var args;
        if (Array.isArray(p1)) {
              args = p1;
        } else {
            args = Array.prototype.slice.call(arguments);
        }

        return $.when.apply($, args.map(function(p) {
            // make sure p is a promise (it could be just a value)
            p = wrapInPromise(p);
            // Make sure that the returned promise here is always resolved with a PromiseInspection object, never rejected
            return p.then(function(val) {
                return new PromiseInspection(true, val);
            }, function(reason) {
                // Convert rejected promise into resolved promise by returning a resolved promised
                // One could just return the promiseInspection object directly if jQuery was
                // Promise spec compliant, but jQuery 1.x and 2.x are not so we have to take this extra step
                return wrapInPromise(new PromiseInspection(false, reason));
            });
        })).then(function() {
              // return an array of results which is just more convenient to work with
              // than the separate arguments that $.when() would normally return
            return Array.prototype.slice.call(arguments);
        });
    }

    // utility functions and objects
    function isPromise(p) {
        return p && (typeof p === "object" || typeof p === "function") && typeof p.then === "function";
    }

    function wrapInPromise(p) {
        if (!isPromise(p)) {
            p = $.Deferred().resolve(p);
        }
        return p;
    }

    function PromiseInspection(fulfilled, val) {
        return {
            isFulfilled: function() {
                return fulfilled;
            }, isRejected: function() {
                return !fulfilled;
            }, isPending: function() {
                // PromiseInspection objects created here are never pending
                return false;
            }, value: function() {
                if (!fulfilled) {
                    throw new Error("Can't call .value() on a promise that is not fulfilled");
                }
                return val;
            }, reason: function() {
                if (fulfilled) {
                    throw new Error("Can't call .reason() on a promise that is fulfilled");
                }
                return val;
            }
        };
    }
})(); 
```

然后，您可以像这样使用它：

```
$.settle(promiseArray).then(function(inspectionArray) {
    inspectionArray.forEach(function(pi) {
        if (pi.isFulfilled()) {
            // pi.value() is the value of the fulfilled promise
        } else {
            // pi.reason() is the reason for the rejection
        }
    });
}); 
```

请记住，`$.settle()`将始终履行（从不拒绝）并且履行的值是一个`PromiseInspection`对象数组，您可以询问每个对象以查看它是履行还是拒绝，然后获取相应的值或原因。有关示例用法，请参见下面的演示：

工作演示：[https ://jsfiddle.net/jfriend00/y0gjs31r/](https://jsfiddle.net/jfriend00/y0gjs31r/)

# google-maps - 如何让 fitBounds 知道自定义控件

> ID：12152596
> 
> 赞同：6
> 
> 时间：2012-08-28T04:02:37.863
> 
> 标签：google-maps, google-maps-api-3

我的谷歌地图左侧有一个大的（300*500px）自定义控件。我将我的标记聚集在一起。当用户单击标记时，我想放大地图以显示该集群中的标记。

问题是：

当我得到我的标记集合的边界时`map.fitBounds(collection_bounds)`，我最终在我的大控件下得到了标记。有没有办法防止`fitBounds`使用整个视口？

我尝试获取`LatLng`我的西南边界点，将其转换为像素，将 300px 移入，然后将其转换*回*a`LatLng`以用作新的西南边界点。但这不起作用，因为计算是*在缩放之前*完成的，所以 300px 移位最终太多了......我想写我自己的`fitBounds`，但我遇到了同样的问题，因为它是在缩放之前完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T04:37:23.823

你说的有效：

> 我尝试获取西南边界点的 LatLng，将其转换为像素，将 300px 移入，然后将其转换回 LatLng 以用作新的西南边界点。

如果您分两步执行，这对用户来说几乎是透明的，因为它执行得如此之快以至于您几乎没有注意到它。所以，首先你做一个法线`map.fitBounds(bounds);`，边界只由你的标记定义，然后你用你描述的技术重新调整。所以：

```
 google.maps.event.addListenerOnce(map,'bounds_changed',function(){
    // re-adjust bounds here as you described. 
    // This event fires only once and then the handler removes itself.
  });
  map.fitBounds(bounds); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T21:32:19.790

我在右手尺寸上有一个 400 像素宽的面板。

从调用 zoomWithPoints 开始，将两个点包含在视图中，以下代码实现了其他人描述的方法：1）缩放到边界 2）使用生成的缩放级别计算要添加到“maxLon”上的数量 3）缩放到再次界限。

```
function zoomToBbox(minLat, minLon, maxLat, maxLon) {
   var southwest = new google.maps.LatLng(minLat, minLon);
   var northeast = new google.maps.LatLng(maxLat, maxLon);
   var bounds = new google.maps.LatLngBounds(southwest, northeast);
   map.fitBounds(bounds);      
}

function zoomWithPoints(lat1, lon1, lat2, lon2) {
   var maxLat = Math.max(lat1, lat2);
   var maxLon = Math.max(lon1, lon2);
   var minLat = Math.min(lat1, lat2);
   var minLon = Math.min(lon1, lon2);

   zoomToBbox(minLat, minLon, maxLat, maxLon);

   var z = map.getZoom(); //get the zoom level after zooming

   // Add a bit to maxLon, to result in it panning left by 400 pixels
   var widthOfPanel = 400;
   var degreesPerTile = 360 / (Math.pow(2,z));
   var degreesPerPx = degreesPerTile / 256;
   var degreesForPanel = degreesPerPx * widthOfPanel;

   maxLon = maxLon + degreesForPanel;

   //zoom (pan across a bit) to take account of the added bit
   zoomToBbox(minLat, minLon, maxLat, maxLon);

   map.setZoom(z); //put it back to right zoom level if necessary
}

...call zoomWithPoints 
```

# c++ - c++ 在处理 vector.size() 时不合逻辑 >= 比较很可能是因为 size_type 是无符号的

> ID：12152605
> 
> 赞同：2
> 
> 时间：2012-08-28T04:03:44.570
> 
> 标签：c++, size-type

在处理 vector.size() aka size_type 时，我可以使用一些帮助来澄清这个奇怪的比较

```
vector<cv::Mat> rebuiltFaces;
int rebuildIndex = 1;
cout << "rebuiltFaces size is " << rebuiltFaces.size() << endl;

while( rebuildIndex >= rebuiltFaces.size() ) {
    cout << (rebuildIndex >= rebuiltFaces.size()) << " , " << rebuildIndex << " >= " << rebuiltFaces.size() << endl;
    --rebuildIndex;
} 
```

我从控制台中得到的是

```
rebuiltFaces size is 0
1 , 1 >= 0
1 , 0 >= 0
1 , -1 >= 0
1 , -2 >= 0
1 , -3 >= 0 
```

如果我不得不猜测，我会说编译器盲目地将rebuildIndex 强制转换为unsigned 和+- 但会导致事情表现得很奇怪，但我真的不确定。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:45:28.560

正如其他人所指出的，这是由于 C++ 在比较具有不同符号的值时应用的有点违反直觉的规则。该标准要求编译器将这两个值都转换为 `unsigned`. `unsigned`出于这个原因，除非您进行位操作（实际数值无关紧要），否则通常认为最好避免这种做法。遗憾的是，标准容器没有遵循这个最佳实践。

如果您以某种方式知道向量的大小永远不会溢出 `int`，那么您可以将结果转换为`std::vector<>::size()`to `int`并完成它。然而，这并非没有危险。正如马克吐温所说：“杀死你的不是你不知道的事情，而是你确定的事情不是真的。” 如果插入向量时没有验证，那么更安全的测试是：

```
while ( rebuildFaces.size() <= INT_MAX
        && rebuildIndex >= (int)rebuildFaces.size() ) 
```

或者，如果您真的没有预料到这种情况，并且准备在它发生时中止，请设计（或找到）一个`checked_cast`函数并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:30:47.227

在我能想到的任何现代计算机上，有符号整数都表示为二进制补码。32 位 int max 为 0x7fffffff，int min 为 0x80000000，这使得当值为负时添加很容易。系统工作时 0xffffffff 为 -1，加一会导致位全部翻转并等于零。在硬件中实现是一件非常有效的事情。

当数字从有符号值转换为无符号值时，存储在寄存器中的位不会改变。这使得像 -1 这样几乎没有负值的值变成了一个巨大的无符号数（无符号最大值），如果里面的代码没有做一些会通过访问内存而导致程序崩溃的事情，这将使该循环运行很长时间。吨。

这一切都完全合乎逻辑，只是不一定是您期望的逻辑。

例子...

```
$ cat foo.c
#include <stdio.h>

int main (int a, char** v) {
  unsigned int foo = 1;
  int bar = -1;

  if(foo < bar) printf("wat\n");
  return 0;
}

$ gcc -o foo foo.c
$ ./foo
wat
$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T05:45:46.050

在 C 和 C++ 语言中，当无符号类型的宽度与有符号类型相同或更大时，将在无符号类型的域中执行混合的有符号/无符号比较。singed 值被隐式转换为无符号类型。“编译器”在这里“盲目”做任何事情都没有什么。从一开始就在 C 和 C++ 中就是这样。

这就是您的示例中发生的情况。你`rebuildIndex`被隐式转换为`vector<cv::Mat>::size_type`. 即这个

```
rebuildIndex >= rebuiltFaces.size() 
```

实际上被解释为

```
(vector<cv::Mat>::size_type) rebuildIndex >= rebuiltFaces.size() 
```

当有符号值转换为无符号类型时，转换是按照模运算规则执行的，这是 C 和 C++ 中无符号运算背后众所周知的基本原理。

同样，所有这些都是语言所要求的，它与数字在机器中的表示方式等以及哪些位存储在哪里完全无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T04:38:25.960

无论底层表示如何（二进制补码是最流行的，但一个补码和符号幅度是其他），如果将 -1 转换为无符号类型，您将获得该类型可以表示的最大数。

原因是无符号“溢出”行为被严格定义为通过模算术将值转换为 0 和该类型的最大值之间的数字。本质上，如果该值大于最大值，则重复减去最大值，直到您的值在范围内。如果您的值小于最小值 (0)，则重复添加最大值，直到它在范围内。因此，如果我们假设 32 位`size_t`，则从 -1 开始，小于 0。因此，添加 2^32，得到`2^32 - 1`在范围内的 ，这就是您的最终值。

粗略地说，C++ 定义了这样的提升规则：任何类型的`char`or`short`都首先提升为`int`，而不管符号性如何。比较中的较小类型在比较中提升为较大的类型。如果两种类型的大小相同，但一种是有符号的，一种是无符号的，则有符号的类型将转换为无符号的。这里发生的是您`rebuildIndex`正在转换为 unsigned `size_t`。`1`被转换为`1u`，`0`被转换为`0u`，`-1`被转换为`-1u`，当转换为无符号类型时，它是类型的最大值`size_t`。

# python - 将 IP 列表分配给 Python 中的开关列表

> ID：12152612
> 
> 赞同：-4
> 
> 时间：2012-08-28T04:04:35.410
> 
> 标签：python

我如何能够将交换机列表分配给 IP 范围？

前任：

```
list = [switch1.com, switch2.com, switch3.com, ...] 
ip = [10.15.15.1, 10.15.15.2, all the way to 10.15.15.254] 
```

我希望能够将“交换机列表”中的第一个交换机分配给“IP 列表”中的第一个 IP。如果 IP 多于交换机，我不希望它为交换机分配多个 IP。每个交换机只需要一个 IP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:18:36.483

您想要以下内容吗？

```
>>> sws= ['switch1','switch2','switch3']
>>> ips = ['10.15.15.1','10.15.15.2','10.15.15.3','10.15.15.4']
>>> print zip(sws,ips)
[('switch1', '10.15.15.1'), ('switch2', '10.15.15.2'),('switch3', '10.15.15.3')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:06:59.573

```
if len(ip) == len(list):
    return zip(ip, list) # Returns [("10.15.15.1", "switch1.com"), ...] 
```

或者，如果您希望一个作为键，另一个作为值：

```
if len(ip) == len(list):
    ret = {}
    for i, j in zip(ip, list):
        ret[i] = j
    return ret 
```

# c++ - 指向类实例的指针？

> ID：12152613
> 
> 赞同：-1
> 
> 时间：2012-08-28T04:04:36.387
> 
> 标签：c++

这是我第一次提出问题。我是外国人，所以有点难以解释我的问题。也许我的标题也是错误的......让我们看看代码：

假设我定义了一个类：

```
class Test
{
    public:
        Test();
};

int main()
{
     Test *pointer = new Test(); //what's the difference between these two ways, 
     Test test;                  //if  the two ways are the same, which one is better under what
     pointer = &test;            //circumstance? 
} 
```

我希望你们能理解我在说什么并帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:09:49.460

```
Test *pointer = new Test(); 
```

***在freestore***（通常称为 Heap）上创建`Test`对象。它一直存在于内存中，直到您显式调用 . 它返回的地址。它被称为***动态***分配的对象。*`delete``new`*

 **```
Test test; 
```

***在自动存储***上创建`Test`对象，一旦创建对象的作用域（，）结束，它就会被释放。内存被自动（隐式）释放，因此命名为*Automatic*。这是广泛使用的***[资源获取概念的基础是初始化](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)***C++ 中的***[(RAII)](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)****`{``}`*

 **> **什么时候用哪一个？**

*   如果您希望您的对象在创建它的范围之外持续存在，请使用`#1`或使用`#2`.
*   通常，堆栈大小是有限的，因此如果您的对象占用大量内存，那么您可能会用完堆栈空间，在这种情况下通常会选择`#1`.

因此，使用哪一个取决于您手头的情况。但是，请注意，在 C++ 中，通常希望将使用限制在`new`最低限度并且仅在需要时使用。

**好读：**
[为什么 C++ 程序员应该尽量减少“新”的使用？](https://stackoverflow.com/questions/6500313/in-c-why-should-new-be-used-as-little-as-possible)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:07:23.160

```
Test *pointer = new Test(); 
```

是内存泄漏，因为您从未释放内存。该对象是在堆上创建的。

```
Test test; 
```

该对象是在堆栈上创建的。当到达最后一个花括号时，对象被移除。它“超出范围”。

它们不一样，哪个“更好”取决于您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:10:57.587

`Test test;`将在堆栈上创建一个对象。它是函数的局部变量，退出`main`时会自动释放。`main`当您只需要使用当前块中的一个对象时使用它。

`Test *pointer = new Test();`将在堆上创建一个对象，其生命周期不限于声明它的块。当您以这种方式声明对象时 - 使用`new`- 然后在某些时候您需要调用`delete`该对象，否则您将泄漏内存，因此您承担了处理内存管理的额外负担。当您需要创建一个需要保留的对象时使用它，即在代码的其他部分中，超过当前函数。

鉴于这几点，下面的代码就有问题了：

```
Test *pointer = new Test();
Test test;
pointer = &test; 
```

当您分配对`pointer`的引用时`test`，您会丢失指向已分配对象的指针，并泄漏内存。此外，如果您在可能`pointer`在其他地方使用的上下文中执行此操作，例如在返回对`Test`对象的引用的函数中，它将指向函数退出后无效的内存地址。****

# r - R中的文件写入哪里？

> ID：12152616
> 
> 赞同：1
> 
> 时间：2012-08-28T04:04:53.407
> 
> 标签：r

如果我使用 write 方法，这些文件将写入哪里？例子：

```
write(results, file="myFile.csv", ncolumns=1) 
```

我没有指定完整路径，所以我假设它正在写入某个默认目录。我检查了程序文件，但它不存在。关于在哪里看的建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T04:07:16.397

如果您在 R 会话中键入：

```
getwd() 
```

您应该能够检索您当前的工作目录，这是文件应该保存到的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:52:02.817

您还可以选择将工作区设置为您想要的位置：

```
setwd('C:/Users/.../Documents/R/Scripts') 
```

您保存的文件将自动写入此新位置。

# ruby-on-rails - 奇怪的空？Rails 3.2.8 中的行为

> ID：12152623
> 
> 赞同：1
> 
> 时间：2012-08-28T04:05:41.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

背景信息：
模型：App 和公告
关联：app has_many 公告

情况：我的 AnnouncementsController 中有一个非常简单的索引操作

```
def index
  app = App.find(params[:app_id])
  @announcements = app.announcements
end 
```

我正在使用 jbuilder gem 来输出 json，它表明我的 @announcements 数组是空的，但我确定其中有记录。我检查了来源，发现它使用了“空？” 在继续之前检查集合是否为空的方法。我想看看什么'空？方法返回，所以我在索引操作中添加了一行：

```
def index
  app = App.find(params[:app_id])
  @announcements = app.announcements
  puts @announcements.empty?.to_s # Returns: "true"
end 
```

“真”不是我所期待的，因为我确定我有数据。所以我添加了一个“检查”调用来检查@announcement 变量中的内容：

```
def index
  app = App.find(params[:app_id])
  @announcements = app.announcements
  puts @announcements.inspect # Returns: "[#<Announcement id: 1, app_id: 1, title: \"20% off everything!\", content: \"Enjoy 20% off everything from now until yesterday!!...\", image: \"0e06b94d-1ac6-4d90-b937-9fa7bfaf90c9.jpg\", status: 0, created_at: \"2012-08-27 15:33:00\", updated_at: \"2012-08-27 15:33:00\">]"
  puts @announcements.empty?.to_s # Returns: "false"
end 
```

嗯……有趣。因此，除了向我的变量“空”添加“检查”之外，无需进行任何更改。方法返回了不同的结果。

我所做的另一个有趣的观察是，如果我这样做了：

```
def index
  @announcements = Announcement.all
  puts @announcements.empty?.to_s # Returns: "false"
end 
```

'空的？工作正常。

有没有其他人有同样的问题，还是只有我一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:31:39.453

Rails 以惰性方式加载集合，因此当您检查它加载时，它不再为空。

# bash - 如何在 shell 脚本中删除文件名的扩展名？

> ID：12152626
> 
> 赞同：214
> 
> 时间：2012-08-28T04:06:05.333
> 
> 标签：bash, shell, sh, cut, gnu-coreutils

以下代码有什么问题？

```
name='$filename | cut -f1 -d'.'' 
```

照原样，我得到了文字 string `$filename | cut -f1 -d'.'`，但是如果我删除引号，我什么也得不到。同时，键入

```
"test.exe" | cut -f1 -d'.' 
```

在 shell 中给了我想要的输出，`test`. 我已经知道`$filename`已经分配了正确的值。我想要做的是将不带扩展名的文件名分配给变量。

* * *

## 回答 #1

> 赞同：393
> 
> 时间：2012-08-28T04:55:25.567

您还可以使用参数扩展：

```
$ filename=foo.txt
$ echo "${filename%.*}"
foo 
```

请注意，如果没有文件扩展名，它将进一步向后查找点，例如

*   如果文件名仅以点开头（例如`.bashrc`），它将删除整个文件名。
*   如果路径中只有一个点（例如`path.to/myfile`或`./myfile`），那么它将在路径内修剪。

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2012-08-28T04:10:56.783

当您想在脚本/命令中执行命令时，您应该使用[命令替换](https://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution)语法。`$(command)`

所以你的线是

```
name=$(echo "$filename" | cut -f 1 -d '.') 
```

代码说明：

1.  `echo`获取变量的值`$filename`并将其发送到标准输出
2.  然后我们获取输出并将其传递给`cut`命令
3.  将`cut`使用 . 作为分隔符（也称为分隔符），用于将字符串切割成段，并通过`-f`我们选择要在输出中包含的段
4.  然后`$()`命令替换将获取输出并返回其值
5.  返回的值将分配给名为的变量`name`

请注意，这给出了变量的部分直到第一个时期`.`：

```
$ filename=hello.world
$ echo "$filename" | cut -f 1 -d '.'
hello
$ filename=hello.hello.hello
$ echo "$filename" | cut -f 1 -d '.'
hello
$ filename=hello
$ echo "$filename" | cut -f 1 -d '.'
hello 
```

* * *

## 回答 #3

> 赞同：159
> 
> 时间：2015-05-02T21:49:17.730

如果您知道扩展名，则可以使用[basename](http://wikipedia.org/wiki/Basename)

```
$ basename /home/jsmith/base.wiki .wiki
base 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-09-15T11:31:42.867

如果您的文件名包含一个点（扩展名除外），则使用此：

```
echo $filename | rev | cut -f 2- -d '.' | rev 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2016-04-26T13:13:34.983

```
file1=/tmp/main.one.two.sh
t=$(basename "$file1")                        # output is main.one.two.sh
name=$(echo "$file1" | sed -e 's/\.[^.]*$//') # output is /tmp/main.one.two
name=$(echo "$t" | sed -e 's/\.[^.]*$//')     # output is main.one.two 
```

使用任何你想要的。在这里，我假设最后一个`.`（点）后跟文本是扩展名。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2020-09-19T15:37:11.323

仅使用 POSIX 的内置：

```
#!/usr/bin/env sh
path=this.path/with.dots/in.path.name/filename.tar.gz

# Get the basedir without external command
# by stripping out shortest trailing match of / followed by anything
dirname=${path%/*}

# Get the basename without external command
# by stripping out longest leading match of anything followed by /
basename=${path##*/}

# Strip uptmost trailing extension only
# by stripping out shortest trailing match of dot followed by anything
oneextless=${basename%.*}; echo "$oneextless" 

# Strip all extensions
# by stripping out longest trailing match of dot followed by anything
noext=${basename%%.*}; echo "$noext"

# Printout demo
printf %s\\n "$path" "$dirname" "$basename" "$oneextless" "$noext" 
```

打印演示：

```
this.path/with.dots/in.path.name/filename.tar.gz
this.path/with.dots/in.path.name
filename.tar.gz
filename.tar
filename 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-06-05T23:13:32.777

```
#!/bin/bash
file=/tmp/foo.bar.gz
echo $file ${file%.*} 
```

输出：

```
/tmp/foo.bar.gz /tmp/foo.bar 
```

请注意，仅删除了最后一个扩展名。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-06T07:55:58.943

我的建议是使用`basename`.
它在 Ubuntu 中是默认的，视觉上简单的代码并处理大多数情况。

以下是一些处理空格和多点/子扩展的子案例：

```
pathfile="../space fld/space -file.tar.gz"
echo ${pathfile//+(*\/|.*)} 
```

它通常从一开始就摆脱扩展，但在我们的道路`.`上失败了`..`

```
echo **"$(basename "${pathfile%.*}")"**  
space -file.tar     # I believe we needed exatly that 
```

这是一个重要的注意事项：

> 我在双引号内使用双引号来处理空格。由于向 $ 发送短信，单引号不会通过。Bash 是不寻常的，并且由于扩展而读取“第二个“第一个”引号。

但是，您仍然需要考虑`.hidden_files`

```
hidden="~/.bashrc"
echo "$(basename "${hidden%.*}")"  # will produce "~" !!! 
```

不是预期的“”结果。为了使它发生使用`$HOME`或`/home/user_path/`
因为 bash 再次“不寻常”并且不要扩展“~”（搜索 bash BashPitfalls）

```
hidden2="$HOME/.bashrc" ;  echo '$(basename "${pathfile%.*}")' 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-13T10:57:46.297

以前提供的答案在包含点的路径方面存在问题。一些例子：

```
/xyz.dir/file.ext
./file.ext
/a.b.c/x.ddd.txt 
```

我更喜欢使用`|sed -e 's/\.[^./]*$//'`. 例如：

```
$ echo "/xyz.dir/file.ext" | sed -e 's/\.[^./]*$//'
/xyz.dir/file
$ echo "./file.ext" | sed -e 's/\.[^./]*$//'
./file
$ echo "/a.b.c/x.ddd.txt" | sed -e 's/\.[^./]*$//'
/a.b.c/x.ddd 
```

注意：如果要删除多个扩展名（如上一个示例），请使用`|sed -e 's/\.[^/]*$//'`：

```
$ echo "/a.b.c/x.ddd.txt" | sed -e 's/\.[^/]*$//'
/a.b.c/x 
```

* * *

但是，此方法将在没有扩展名的“点文件”中失败：

```
$ echo "/a.b.c/.profile" | sed -e 's/\.[^./]*$//'
/a.b.c/ 
```

要涵盖此类情况，您可以使用：

```
$ echo "/a.b.c/.profile" | sed -re 's/(^.*[^/])\.[^./]*$/\1/'
/a.b.c/.profile 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-28T21:44:33.883

```
#!/bin/bash
filename=program.c
name=$(basename "$filename" .c)
echo "$name" 
```

输出：

```
program 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-30T11:08:56.337

正如 Hawker65 在 chepner answer 的评论中指出的那样，投票最多的解决方案既不考虑多个扩展名（例如 filename.tar.gz），也不考虑路径其余部分中的点（例如 this.path/with .dots/in.path.name）。一个可能的解决方案是：

```
a=this.path/with.dots/in.path.name/filename.tar.gz
echo $(dirname $a)/$(basename $a | cut -d. -f1) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-02-12T19:06:55.463

这个涵盖了所有的可能性！（路径中的点与否；有扩展名或无扩展名）：

`tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*});echo $filename_noextension`

笔记：

*   它为您提供不带任何扩展名的文件名。所以`$filename_noextension`变量中没有路径。
*   您最终会得到两个不需要的变量`$tmp1`和`$tmp2`. 确保您没有在脚本中使用它们。

测试示例：

`filename=.bashrc; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=.bashrc.txt; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=.bashrc.txt.tar; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=~/.bashrc; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=~/.bashrc.txt.tar; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=bashrc; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=bashrc.txt; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=bashrc.txt.tar; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=~/bashrc; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

`filename=~/bashrc.txt.tar; echo "filename: $filename"; tmp1=${filename##*/};tmp2=${tmp1:1};filename_noextension=$(echo -n ${tmp1:0:1};echo ${tmp2%.*}); echo "filename without extension: $filename_noextension"`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-28T00:10:32.403

您的代码有两个问题：

1.  您使用 '（勾号）而不是 `（反勾号）来包围生成要存储在变量中的字符串的命令。
2.  您没有将变量“$filename”“回显”到“cut”命令中。

我会将您的代码更改为“name=`echo $filename | cut -f 1 -d '。” `"，如下所示（再次注意名称变量定义周围的反引号）：

```
$> filename=foo.txt
$> echo $filename
foo.txt
$> name=`echo $filename | cut -f1 -d'.'`
$> echo $name
foo
$> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-15T09:55:17.733

在 Zsh 中：

```
fullname=bridge.zip
echo ${fullname:r} 
```

它简单、干净，并且可以链接以删除多个扩展：

```
fullname=bridge.tar.gz
echo ${fullname:r:r} 
```

并且可以与其他类似的[修饰符](https://zsh.sourceforge.io/Doc/Release/Expansion.html#Modifiers)组合使用。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-05-01T15:17:30.880

[![在此处输入图像描述](../Images/9d3c2d2c2cfc421d7877f474f4ff4bde.png)](https://i.stack.imgur.com/Mnh6P.png)

假设您的文件具有 .new 扩展名

```
ls -1 | awk '{ print "mv "$1" `basename "$1" .new`"}' | sh 
```

由于发布后没有显示特殊报价，请查看图片。

# python - 对 Project Euler #17 稍有关闭

> ID：12152627
> 
> 赞同：3
> 
> 时间：2012-08-28T04:06:07.997
> 
> 标签：python

几个小时前我发布了这个问题，但我想我删除了它！真的很抱歉...我正在研究 Project Euler 问题 17。

尽管还有其他更明显的解决方案，但作为学习练习，我处理了打算使用递归解决它的问题。我还希望某些代码片段以后可以在其他环境中使用。对于不熟悉的人，问题描述本身位于代码顶部的文档字符串中。

这是有问题的代码：

```
"""If the numbers 1 to 5 are written out in words:
one, two, three, four, five

then there are 3 + 3 + 5 + 4 + 4 = 19 letters used in total.

If all the numbers from 1 to 1000 (one thousand) inclusive were written out in words,
how many letters would be used?

NOTE: Do not count spaces or hyphens. For example, 342 (three hundred and forty-two)
contains 23 letters and 115 (one hundred and fifteen) contains 20 letters. The use of
"and" when writing out numbers is in compliance with British usage.
"""

import collections
import re

SMALLS =       [(0,     "zero"),
                (1,     "one"),
                (2,     "two"),
                (3,     "three"),
                (4,     "four"),
                (5,     "five"),
                (6,     "six"),
                (7,     "seven"),
                (8,     "eight"),
                (9,     "nine"),
                (10,    "ten"),
                (11,    "eleven"),
                (12,    "twelve"),
                (13,    "thirteen"),
                (14,    "fourteen"),
                (15,    "fifteen"),
                (16,    "sixteen"),
                (17,    "seventeen"),
                (18,    "eighteen"),
                (19,    "nineteen")]

MULTS_OF_TEN = [(20,    "twenty"),
                (30,    "thirty"),
                (40,    "forty"),
                (50,    "fifty"),
                (60,    "sixty"),
                (70,    "seventy"),
                (80,    "eighty"),
                (90,    "ninety")]

HUNDRED =      [(100,   "hundred")]

BIGS =         [(1000,  "thousand"),
                (10**6, "million"),
                (10**9, "billion")]

# other bigs: trillion, quadrillion, quintillion, sextillion, septillion, octillion, nonillion, decillion,
#             undecillion, duodecillion, tredecillion, quattuordecillion, quindecillion, sexdecillion,
#             septendecillion, octodecillion, novemdecillion, vigintillion

SMALLS = collections.OrderedDict(reversed(SMALLS))
MULTS_OF_TEN = collections.OrderedDict(reversed(MULTS_OF_TEN))
HUNDRED = collections.OrderedDict(reversed(HUNDRED))
BIGS = collections.OrderedDict(reversed(BIGS))

def int_to_words(num, follows_hundreds=False):
    """Retuns the text-equivelent of num, using recursion for distinct
    pieces.
    """
    def do_chunk(n,
                 num_text_map,
                 include_quotient=True,
                 is_hundreds=False):

        for x in num_text_map:
            quotient = n // x
            remainder = n % x

            if n == x: return num_text_map[x]

            if quotient and remainder:
                quotient_text = (int_to_words(quotient) + " " + num_text_map[x]) \
                                if include_quotient else \
                                (num_text_map[x])
                remainder_text = int_to_words(remainder, follows_hundreds=True) \
                                if is_hundreds else \
                                int_to_words(remainder)
                return quotient_text + " " + remainder_text

            elif quotient:
                quotient_text = (int_to_words(quotient) + " " + num_text_map[x]) \
                                if include_quotient else \
                                (num_text_map[x])
                return quotient_text

        return False

    result = do_chunk(num, BIGS)
    if result: return result

    result = do_chunk(num, HUNDRED, is_hundreds=True)
    if result: return result

    result = do_chunk(num, MULTS_OF_TEN, include_quotient=False)
    if result and follows_hundreds: return "and " + result
    if result: return result

    result = do_chunk(num, SMALLS)
    if result and follows_hundreds: return "and " + result
    if result: return result

def count_letters(string):
    looking_for = "[a-z]"
    instances = re.findall(looking_for, string)
    return len(instances)

def tally_letters(start, end):
    total_letters = 0
    for i in range(start, end + 1):
        total_letters += count_letters(int_to_words(i))
    return total_letters 
```

这是程序的输出，与预期的解决方案进行比较。

```
>>> answer = tally_letters(1, 1000)
>>> assert answer == 21124
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    assert answer == 21124
AssertionError
>>> answer
1: 21118 
```

让我感到困惑的是，我的差距为 6。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T04:13:06.557

我想如果有人给我九个气球，然后再给我一个，我会说我有十个气球。另一方面，如果我有九十九个气球，然后我又收到一个，我会说“我有一百个气球”，而不是“我有一百个气球”：

```
>>> int_to_words(10)
'ten'
>>> int_to_words(100)
'hundred'
>>> int_to_words(1000)
'thousand' 
```

`len("one")*2 == 6`.

# javascript - 动态生成的 CSS 背景图像属性中的重音字符

> ID：12152639
> 
> 赞同：1
> 
> 时间：2012-08-28T04:07:17.037
> 
> 标签：javascript, html, css, apache, backbone.js

我正在尝试为 JSON 对象中的每个成员动态生成缩略图网格。

每个成员都有一个'title'键和值，当网页加载时，会根据每个成员的标题生成一个URI。这个 URI 成为一个主干.js 对象中的 'img' 属性，它在模板中用于呈现。（见底部的代码）。

我的问题是其中一些标题有重音符号，当网站加载时，缩略图路径中的重音符号变为“x%CC%81”，其中“x”是重音元音。这只发生在我的网络服务器（Apache 2.2.6）上 - 当使用 MAMP（我相信它是 Apache 2.2.26）在本地测试站点时，一切正常。

我在创建字符串路径时尝试使用 decodeURI() ，但无济于事。因此，我认为它与任一服务器有关（因为它在 MAMP 中工作，但在我的网络服务器中不起作用），但我想不出为什么。对我来说，更可能的罪魁祸首是 CSS 无法解析重音符号。

这是为每个项目生成 uris 的主干.js 代码片段：

```
//For each model in the collection, generate the image uri, 
//where item.getHyphTitle() is the title that may contain accent marks

_.each(this.collection.models, function(item){
        item.set("img", decodeURI('../images/thumbs/' + item.getHyphTitle() + '-thumb.jpg'));
        renderContact(item);
 },this); 
```

这是使用的模板部分：

```
<div class="work-background" style="background-image:url('<%= img %>');"></div> 
```

我希望这很清楚 - 提出您可能需要澄清的任何问题。提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:00:36.740

看起来您可能有编码错误。一些操作系统支持你正在尝试做的事情（我认为是 OSX），而其他操作系统则不支持。这是有关该问题的太多详细信息的链接：

[文件系统、Unicode 和规范化](http://developers.sun.com/global/products_platforms/solaris/reference/presentations/IUC29-FileSystems.pdf)

# c++ - 带符号的 16 位 SSE 平均值

> ID：12152640
> 
> 赞同：3
> 
> 时间：2012-08-28T04:07:18.900
> 
> 标签：c++, c, performance, sse

`_mm_avg_epu16`通过 .提供两个无符号 16 位整数的平均值`PAVGW`。正在转换为`float`并除以`2.`使用 SSE 的唯一适当（最佳）方法来获得~~两个有符号 16 位整数~~的平均值，即“有符号平均值，四舍五入，然后取反最高位”（@Mysticial），或者还有另一个方式？

* * *

编辑：这是我要优化的代码，到目前为止，我使用 SSE 的所有尝试都接近但不完全匹配，通常是围绕饱和/溢出包装的问题：

```
int16_t *a;
int16_t *b;
uint16_t *out;

out[i] = int((a[i] + b[i]) / 2.0f + 32768.5f) 
```

尝试#1：

```
const __m128i outputVal = _mm_add_epi16(_mm_avg_epu16(a, b),  _mm_set1_epi16(32768)); 
```

尝试#2：

```
const __m128i sum = _mm_add_epi16(a, b);
const __m128i outputVal = _mm_add_epi16(_mm_srai_epi16(sum, 1), _mm_set1_epi16(32768)); 
```

尝试#3：

```
const __m128 elt_offset = _mm_set1_ps(32768.5f);

const __m128 avg_divisor = _mm_set1_ps(2.f);

const __m128i eltSum = _mm_add_epi16(edgeRowElts, edgeInnerRowElts); /* eltSum = int((inputData[i] + inputData[i + (direction*x)]) */
const __m64 eltSumLow  = _mm_movepi64_pi64(eltSum); /* eltSumLow = (__m64) (0x0ffffffff & eltSum) */
const __m64 eltSumHigh = _mm_movepi64_pi64(_mm_srli_si128(eltSum, 8)); /* eltSumHigh = (__m64) (0x0ffffffff & (eltSum >> 64)) */

/* Lower */
__m128 eltSumF = _mm_cvtpi16_ps(eltSumLow); /* eltSumF = (float) eltSum; */

__m128 eltAvg  = _mm_div_ps(eltSumF, avg_divisor); /* eltAvg = eltSum / 2.0f */
__m128 eltAvgOffset = _mm_add_ps(eltAvg,  elt_offset); /* eltAvgOffset = eltAvg + 32768.5f */
const __m64 outputValLow  = _mm_cvtps_pi16(eltAvgOffset); /* outputVal = (short) eltAvgOffset */

/* Upper */
eltSumF = _mm_cvtpi16_ps(eltSumHigh); /* eltSumF = (float) eltSum; */

eltAvg  = _mm_div_ps(eltSumF, avg_divisor); /* eltAvg = eltSum / 2.0f */
eltAvgOffset = _mm_add_ps(eltAvg,  elt_offset); /* eltAvgOffset = eltAvg + 32768.5f */
const __m64 outputValHigh = _mm_cvtps_pi16(eltAvgOffset); /* outputVal = (short) eltAvgOffset */

__m128i outputVal = _mm_slli_si128(_mm_movpi64_epi64(outputValHigh), 8); /* outputVal = (outputValHigh << 64); */
outputVal = _mm_or_si128(outputVal, _mm_movpi64_epi64(outputValLow)); /* outputVal = outputVal | (outputValLow); */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:48:09.290

我不确定我是否完全理解这里的所有要求，但似乎：

```
a = _mm_add_epi16(a, _mm_set1_epi16(32768));
b = _mm_add_epi16(b, _mm_set1_epi16(32768));
outputVal = _mm_avg_epu16(a, b); 
```

应该给你除了四舍五入要求之外的一切。

如果是这样，那么在事后修复四舍五入应该不难：

```
round = _mm_xor_si128(a, b);
round = _mm_and_si128(round, _mm_set1_epi16(1));
outputVal = _mm_add_epi16(outputVal, round); 
```

# ruby-on-rails - 如何将 Rails 应用程序从使用 MongoDB 迁移到 PostgreSQL？

> ID：12152642
> 
> 赞同：1
> 
> 时间：2012-08-28T04:07:39.500
> 
> 标签：ruby-on-rails, postgresql, mongoid

我有一个现有的 Rails 应用程序，我已经投入了大约 100 小时的开发时间。我想把它推到 Heroku，但我犯了一个错误，就是在我所有的开发工作中都使用了 mongoDB。现在我没有模式或任何类似的东西，我正试图推出 Heroku 并使用 PostgreSQL。有没有办法可以删除 Mongoid 并使用 Postgres？我试过使用 DataMapper，但这似乎弊大于利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T20:30:26.737

使用 postgresql 的 json 数据类型，将 mongo 集合转换为表，每个表应该是 id 和 doc (json)，然后很容易从一个转移到另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:50:53.860

迁移是容易还是困难取决于很多事情，包括您必须适应多少不同版本的数据结构。一般来说，如果您分阶段进行此操作，您会发现它会容易得多：

1.  确保所有 Mongo 数据在结构上与您的 RDBMS 模型一致，并且数据结构版本都相同。

2.  移动您的数据。预计会发现问题，您将不得不返回到第 1 步。

您可以预料到的主要问题是数据验证问题，因为您正在从结构化程度较低的数据平台转移到结构化程度更高的数据平台。

根据您在 MapReduce 方面所做的工作，您也可能在那里进行一些工作。

# jquery - 将 css 应用于 jquery 代码

> ID：12152644
> 
> 赞同：0
> 
> 时间：2012-08-28T04:07:47.527
> 
> 标签：jquery

我想将 jquery themeroller highlight/error html 应用于我的 jquery 代码。jquery高亮代码是这样的（错误代码类似）：

```
<div class="ui-widget">
    <div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;"> 
    <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
    <strong>Hey!</strong> Sample ui-state-highlight style.</p>
    </div>
</div> 
```

我的代码结构如下：

```
function doAjax(){
        $.ajax({
            url: 'myfile.php',
            success: function(data) {
                if (data == 'Initializing...please wait')
                {
                    $('#quote p').html(data); //here I would add highlight css code
                    setTimeout(doAjax, 2000);
                }
                else
                {

                    $('#quote p').html(data); //here is error css code

                }

            }
        });

    } 
```

这打印到一个 div：

```
<div id="quote"><p> </p></div> 
```

我认为在这里使用`.css()`很麻烦。有没有办法将 html 添加到条件中？请注意，`.html(data)`当您从服务器收到不同的消息时，这是必要的，除非有其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:09:40.050

您可以尝试创建一个小部件来创建元素。

```
$.widget( "jui.highlightBox", {

    options: {
        html:'',
        icon: 'ui-icon-info'
    },

    _create: function() {
        var wrapper = $('<div>',{'class':'ui-widget'}),
            container = $('<div>',{'class':'ui-state-highlight ui-corner-all',style:'margin-top: 20px; padding:.7em;'}),
            icon = $('<span>',{'class':'ui-icon ' + this.options.icon,style:'float: left; margin-right: .3em;'});
        wrapper.html(container.html(this.options.html))
        .appendTo(this.element);
        if(this.options.icon != '')
            icon.prependTo(container);
    }
}); 
```

对于错误文本...

```
$.widget( "jui.errorBox", {

    options: {
        html:'',
        icon: 'ui-icon-alert'
    },

    _create: function() {

        var wrapper = $('<div>',{'class':'ui-widget'}),
            container = $('<div>',{'class':'ui-state-error ui-corner-all',style:'margin-top: 20px; padding:.7em;'}),
            icon = $('<span>',{'class':'ui-icon ' + this.options.icon,style:'float: left; margin-right: .3em;'});
        wrapper.html(container.html(this.options.html))
        .appendTo(this.element);
        if(this.options.icon != '')
            icon.prependTo(container);
    }
}); 
```

你可以像这样使用高光...

```
$('<p>').highlightBox({'html':data}).appendTo('#quote'); // highlight 
```

...这是错误文本

```
$('<p>').errorBox({'html':data}).appendTo('#quote'); // error 
```

所以你的函数现在看起来像这样......

```
function doAjax(){
        $.ajax({
            url: 'myfile.php',
            success: function(data) {
                if (data == 'Initializing...please wait')
                {
                    $('<p>').highlightBox({'html':data}).appendTo('#quote');
                    setTimeout(doAjax, 2000);
                }
                else
                {

                    $('<p>').errorBox({'html':data}).appendTo('#quote');

                }

            }
        });

    } 
```

由于这会创建`<p>`标签，因此您可以将其从 HTML 中删除...

```
<div id="quote"></div> 
```

我很惊讶 JQuery UI 还没有内置的小部件。

# webrtc - 我可以将 MediaStream 从 PeerConnection 发送到另一个吗？

> ID：12152645
> 
> 赞同：2
> 
> 时间：2012-08-28T04:07:48.073
> 
> 标签：webrtc

我正在使用 Chrome 23.0.1246.0 canary，最新版本。我想将通过 PeerConnection 从客户端接收的 MediaStream 通过 PeerConnection 发送到另一个客户端。我的意思是，ClientA 通过我们之间的 PeerConnection 将其本地媒体流发送给我，然后，我通过 ClientB 和我之间的 PeerConnection 将此媒体流发送给 ClientB。

这是我的代码，但它不起作用，当我第二次单击 AddVideo 按钮时，不会调用“gotRemoteStream”函数。我不知道原因。

任何人都可以帮助我吗？

```
<!DOCTYPE html>
<html>
<head>
<title>Video Link</title>
<style type="text/css">
    video { width: 200px;}
</style>
</head>
<body>
<input id="btnAddVideo" type="button" value="Add Video" onclick="AddVideo();" />
<div id="videos"></div>
<script type="text/ecmascript">
    var pcs = new Array();
    var pcr = new Array();
    var mediaStream = new Array();
    var msIndex = 0;
    navigator.webkitGetUserMedia({ audio: true, video: true }, gotStream, function () { alert('get MediaStream Error'); });
    function gotStream(stream) {
        mediaStream[0] = stream;
    }

    var pc1;
    var pc2;
    function AddVideo() {
        if (mediaStream[msIndex] == null) return;
        pc1 = new webkitPeerConnection00(null, iceCallback1);
        pc1.addStream(mediaStream[msIndex]);
        var offer = pc1.createOffer(null);
        pc1.setLocalDescription(256, offer);

        pc2 = new webkitPeerConnection00(null, iceCallback2);
        pc2.onaddstream = gotRemoteStream;
        pc2.setRemoteDescription(256, new SessionDescription(offer.toSdp()));
        var answer = pc2.createAnswer(offer.toSdp(), { has_audio: true, has_video: true });
        pc2.setLocalDescription(768, answer);

        pc1.setRemoteDescription(768, new SessionDescription(answer.toSdp()));
        pc2.startIce();
        pc1.startIce();

        pcs.push(pc1);
        pcr.push(pc2);
    }
    function iceCallback1(candidate, bMore) {
        pc2.processIceMessage(new IceCandidate(candidate.label, candidate.toSdp()));
    }
    function iceCallback2(candidate, bMore) {
        pc1.processIceMessage(new IceCandidate(candidate.label, candidate.toSdp()));
    }
    function gotRemoteStream(e) {
        var v = document.createElement('video');
        v.autoplay = 'autoplay';
        v.src = webkitURL.createObjectURL(e.stream);
        document.getElementById('videos').appendChild(v);
        mediaStream.push(e.stream);
        msIndex++;
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T12:01:05.070

是的你可以。使用*PeerConnection的**addStream*函数，您可以添加任何您想要的*MediaStream 。*实际上，在将流添加到 PeerConnection 之后，您必须再次在客户端之间交换 SDP（本地和远程描述）。

 **您的代码不是最新的，因为自从您发布问题以来，api 已经有了很多改进。如果您在当前[标准](http://dev.w3.org/2011/webrtc/editor/webrtc.html)的帮助下更新它，我可以帮助您。:)**

# asp.net-mvc-3 - MVC3 SSL 故障 - 不需要 SSL 时无法从 HTTPS 切换到 HTTP

> ID：12152650
> 
> 赞同：0
> 
> 时间：2012-08-28T04:08:46.263
> 
> 标签：asp.net-mvc-3, ssl, https

当用户浏览到不需要它的页面（并且他们没有登录）时，我试图让我的 MVC3 站点从 HTTPS 重定向回 HTTP。我不想承担运行整个站点 HTTPS 的负担，但看起来这就是我必须走的路。

我在远程调试和符号方面遇到了很多麻烦，但是回到 1985 年并使用消息框等价物进行调试，我得出了以下结论：

```
if (filterContext.ActionDescriptor
     .GetCustomAttributes(typeof(RequireHttpsAttribute), true)
     .Any()
   )
{
   return true;
}
return false; 
```

总是返回假。

控制器 def 开始为：

```
[FilterIP(
    ConfigurationKeyAllowedSingleIPs = "AllowedAdminSingleIPs",
    ConfigurationKeyAllowedMaskedIPs = "AllowedAdminMaskedIPs",
    ConfigurationKeyDeniedSingleIPs = "DeniedAdminSingleIPs",
    ConfigurationKeyDeniedMaskedIPs = "DeniedAdminMaskedIPs"
)]
[RequireHttps]
public class AccountController : Controller
{ 
```

它似乎不适用于此控制器中的任何操作（尽管它们确实成功路由到 SSL）。

有什么建议么？我很想看到我认为是我自己的 nuery 的答案；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:16:28.760

[自定义 NotRequreHttpsAttribute 教程](http://amilagm.com/2012/04/configure-asp-net-mvc-controller-to-use-ssl-or-not-to-use-ssl/)

我使用上面的链接帖子来实现我的自定义属性，并从 https 重定向到 http。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:06:48.563

发现我的问题与发布到的服务器上的绑定有关。我们为舞台和生产使用相同的服务器，并且没有设置舞台 https 绑定，因此每当它调用 https 页面时，它都会解析到我们的生产站点（看起来相同，因此很难发现）。

一旦我添加了绑定，它就全部解决了。我的代码没问题...

# linux - FFMPEG缩放，如何设置比例使宽度和高度不超过一定数量？

> ID：12152652
> 
> 赞同：6
> 
> 时间：2012-08-28T04:09:01.497
> 
> 标签：linux, ffmpeg

我有 2 个视频，一个是 500 像素 x 100 像素（只是一个例子，就像在 iphone 上横向录制的东西）。以及 1980 x 400 像素的视频。我需要视频来转换保持纵横比。我知道 -vf 比例过滤器，例如 -vf scale=-1:320，但这只需要宽度并相应地缩放高度。我的 500 x 100 视频宽 320 像素，高 1600 像素。这很糟糕，我需要它的最大高度为 500 像素，最大宽度为 320（只是示例尺寸）。

我将如何配置 -vf scale 功能来做到这一点？

使用最新的 ffmpeg 0.11

回顾：将任何视频缩放到最大 500 高度：320 宽度，同时保持纵横比

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-12T13:31:01.060

为了避免将黑带编码到视频中（该`-aspect`选项可以），您可以将几个表达式传递给缩放视频过滤器，如下所示：

`-vf scale='if(gt(a,320/500),320,-1)':'if(gt(a,320/500),-1,500)'`

请注意，单引号需要由 ffmpeg 接收，因此如果您在 shell 下运行命令，则需要转义它们（例如，在整个`scale=...`参数周围使用双引号）。

（来源：[ffmpeg trac](https://trac.ffmpeg.org/wiki/Scaling%20%28resizing%29%20with%20ffmpeg)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T04:41:43.163

您不需要使用 vf 比例。只要给 -s widthxheight ，它就会缩放到那个大小。对于纵横比，使用 -aspect 例如。我有一个 320x240 的文件，我想将其转换为 360x240，侧面带有黑色条纹

```
ffmpeg -i input.mp4 -acodec copy -vcodec mpeg4 -s 360x240 -aspect 4:3 out.mp4 
```

就是这样。

# android - 如何在 Android 4.0 默认日历中添加事件？

> ID：12152653
> 
> 赞同：7
> 
> 时间：2012-08-28T04:09:11.893
> 
> 标签：android, android-layout, android-widget

![在此处输入图像描述](../Images/58fba8d467b3437037f8aece275ec48b.png)

在 Android 4.0 默认日历中，如果我们想移至下个月，则需要滚动日历，但我需要通过按上图中存在的箭头移至下个月或上个月。我还想添加到默认日历。如果添加事件，则该日期应像图像中一样标记。

我使用了这个日历视图。

```
<CalendarView
    android:id="@+id/calendarView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" /> 
```

我想知道如何务实地使用向这个 CalendarView 添加事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:32:00.530

要**移至下个月或上个月**，您可以使用以下代码：

```
 mButtonNext = (Button) findViewById(R.id.buttonNext);
    mButtonNext.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Calendar cal = new GregorianCalendar();
            cal.setTimeInMillis(mCalendarView.getDate() );
            cal.add(Calendar.MONTH, 1);
            mCalendarView.setDate(cal.getTimeInMillis(), true, true);
        }
    });

    mButtonPrevious = (Button) findViewById(R.id.buttonPrevious);
    mButtonPrevious.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Calendar cal = new GregorianCalendar();
            cal.setTimeInMillis(mCalendarView.getDate() );
            cal.add(Calendar.MONTH, -1);                
            mCalendarView.setDate(cal.getTimeInMillis(), true, true);
        }
    }); 
```

如果您想**在默认日历中添加事件**，您必须查看发布的链接 @adam2510。这是您可以使用的示例代码：

```
public void addEvent() {   
    ContentResolver cr = mContext.getContentResolver();
    ContentValues eventValues = new ContentValues();
    eventValues.put(Events.TITLE, "title");
    eventValues.put(Events.EVENT_LOCATION, "location");
    eventValues.put(Events.DTSTART, startTimeMilliseconds);
    eventValues.put(Events.DTEND, endTimeMilliseconds);
    eventValues.put(Events.CALENDAR_ID, "1");//Defaul calendar
    eventValues.put(Events.EVENT_TIMEZONE, TimeZone.SHORT);
    cr.insert(Events.CONTENT_URI, eventValues);
} 
```

但`CalendarView`不适用于事件。在 Android 文档中，您可以阅读以下内容`CalendarView`：

> “此类是用于显示和选择日期的日历小部件”。

我找不到更改单元格属性的简单方法。
如果您想在自己的日历中添加事件，最好实现自己的日历，您可以在其中更改所有视图的属性。您可以在 google.com 中找到大量日历实现

# c# - c# winforms Form Load ComboBox DropDownList 从XML文件中获取值

> ID：12152654
> 
> 赞同：1
> 
> 时间：2012-08-28T04:09:22.337
> 
> 标签：c#, winforms

XML 文件：

```
<?xml version="1.0" encoding="utf-16"?>
<XMLFILE>
 <Active>0</Active>
 <Hits_Method>1</Hits_Method>
</XMLFILE> 
```

我要做的是在 Form1_Load 上从 XML 文件（Hits_Method）中获取 ComboBox4 的值，并且当程序开始向我显示该值时。我尝试了这样的事情，但没有成功

```
// ------------------- StartUP Load
private void Form1_Load(object sender, EventArgs e)
{
    // --------------- Read XML File / Data: Settings_Ads_General
    String xmlfile = "Settings_General.xml";
    XmlTextReader xreader = new XmlTextReader(xmlfile);

    string comboBox4Value = xreader.GetAttribute("Hits_Method");
    comboBox4.SelectedIndex = comboBox4Value;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:18:46.740

试试这个：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        // --------------- Read XML File / Data: Settings_Ads_General
        String xmlfile = "Settings_General.xml";
        XmlDocument doc = new XmlDocument();
        doc.Load(xmlfile);

        string comboBox4Value = doc.SelectSingleNode("XMLFILE/Hits_Method").InnerText;
        comboBox4.SelectedIndex = Convert.ToInt32(comboBox4Value);

    } 
```

该`SelectSingleNode`方法基于 XPath 表达式提取数据。而“XMLFILE/Hits_Method”是通向您价值的 XPath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:41:44.050

我将使用 XmlDocument 和 XmlNode 类。

```
{
    String sPath = "file.xml"
    XmlDocument doc = new XmlDocument();
    doc.Load(sPath)
    XmlNode node = doc.SelectSingleNode("XMLFILE/Hits_Method");
    if (node != null)
        comboBox4.SelectedIndex = node.InnerText;
} 
```

# javascript - 骨干model.change（）没有触发

> ID：12152657
> 
> 赞同：0
> 
> 时间：2012-08-28T04:09:26.190
> 
> 标签：javascript, events, backbone.js

我目前正在使用 Backbone 编写应用程序，出于某种原因，它不会更新视图，但仅在某些情况下。

如果我在 index.html#/blog/2 刷新页面，它会很好地加载页面，一切都很好。但是，如果我在 index.html#/blog/1 处刷新页面，然后将 URL 更改为 index.html#/blog/2 并按 Enter（不刷新），则永远不会触发更改。

这是我的路由器：

```
makeChange: function() {

    // Set activePage to the current page_id => /blog/2
    var attributes = {activePage: this.page_id};
    var $this = this;

    // Loop through all sections in the app
    app.sections.some( function( section ) {

        // Check if section has the page
        if( !section.validate( attributes ) )
        {

            // If it has, set the activePage to /blog/2
            section.set( attributes, {silent: true} );
            // Set active section to whatever section-id was matched
            app.set( {activeSect: section.id}, {silent: true} );

            console.log('Calling change!');

            // Calling change on both the app and the section
            app.change();
            section.change();

            console.log('Change complete!');

            return true;

        }

    });

} 
```

这是应用程序视图（在上面被称为“应用程序”^）：

```
var AppView = Backbone.View.extend({

    initialize: function( option ) {

        app.bind( 'change', _.bind( this.changeSect, this ) );

    },

    changeSect: function() {

        var newSect = app.sections.get( app.get('activeSect' ) );
        var newSectView = newSect.view;

        if( !app.hasChanged( 'activeSect' ) )
            newSectView.activate( null, newSect );

        else
        {

            var oldSect = app.sections.get( app.previous( 'activeSect' ) );
            var oldSectView = oldSect.view;

            newSectView.activate( oldSect, newSect );
            oldSectView.deactivate( oldSect, newSect );

        }

    }

}); 
```

如果您需要查看其他类/模型/视图，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:40:31.033

我解决了！这仅在同一部分的不同页面之间导航（通过更改部分中的 activePage）时发生，因此应用程序中的 activeSect 从未更改，因此从未调用 changeSect()。现在，即使应用程序中的 activeSect 相同，并且该部分中的 activePage 已更改，它仍然会调用应用程序中的 changeSect() 。

在 Section-model 中，我添加了这个：

```
initialize: function() {

    this.pages = new Pages();
    this.bind( 'change', _.bind( this.bindChange, this ) );

},

prepareForceChange: function() {

    this.forceChange = true;

},

bindChange: function() {

    console.log('BINDCHANGE!');
    if( this.forceChange )
    {

        AppView.prototype.forceChange();
        this.forceChange = false;

    }

}, 
```

在上面的 router.makeChange() 中：

```
section.set( attributes, {silent: true} );
app.set( {activeSect: section.id}, {silent: true} ); 
```

我补充说：

```
var oldSectId = app.get('activeSect');
if( oldSectId == section.id ) section.prepareForceChange(); 
```

# c# - 让背景或相机“滚动”基于字符位置

> ID：12152662
> 
> 赞同：0
> 
> 时间：2012-08-28T04:10:26.767
> 
> 标签：c#, background, xna, scroll, 2d

我正在开发一款具有自上而下视图的 RPG 游戏。我想将图片加载到角色正在行走的背景中，但到目前为止，我还没有弄清楚如何正确重绘背景以使其“滚动”。我发现的大多数示例都是自动滚动的。

我希望相机始终以角色为中心，直到背景图像到达其边界，然后角色将移动而无需在另一个位置重新绘制图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:46:59.393

你的问题有点不清楚，但我想我明白了它的要点。让我们看看你的要求。

1.  你有一个头顶摄像机，它直接向下看二维平面。我们可以将其表示为一个简单的 {x, y} 坐标对，对应于相机正在查看的平面上的点。
2.  相机可以跟踪某些对象的运动，可能是玩家，但更普遍的是游戏世界中的任何东西。
3.  摄像机必须保持在游戏世界的有限范围内。

这很容易实现。从广义上讲，在您的`Update()`方法内部的某个地方，您需要执行一些步骤来满足这些要求中的每一个：

```
if (cameraTarget != null)
{
    camera.Position = cameraTarget.Position;
    ClampCameraToWorldBounds();
} 
```

换句话说：如果我们有一个目标对象，将我们的位置锁定到它的位置；但请确保我们不会越界。

`ClampCameraToBounds()`实现起来也很简单。假设您有一些对象 ，`world`其中包含一个`Bounds`以像素为单位表示世界范围的属性：

```
private void ClampCameraToWorldBounds()
{
    var screenWidth = graphicsDevice.PresentationParameters.BackBufferWidth;
    var screenHeight = graphicsDevice.PresentationParameters.BackBufferHeight;

    var minimumX = (screenWidth / 2);
    var minimumY = (screnHeight / 2);

    var maximumX = world.Bounds.Width - (screenWidth / 2);
    var maximumY = world.Bounds.Height - (screenHeight / 2);
    var maximumPos = new Vector2(maximumX, maximumY);

    camera.Position = Vector2.Clamp(camera.Position, minimumPos, maximumPos);
} 
```

这确保了相机永远不会接近世界边缘的一半屏幕。为什么是半屏？因为我们已经将相机的 {x, y} 定义为*相机正在注视的点*，这意味着它应该始终位于屏幕的中心。

这应该会给您一个具有您在问题中指定的行为的相机。从这里开始，只需实现地形渲染器，以便相对于相机对象指定的 {x, y} 坐标绘制背景。

给定对象在游戏世界坐标中的位置，我们可以将该位置转换为相机空间：

```
var worldPosition = new Vector2(x, y);
var cameraSpace = camera.Position - world.Postion; 
```

然后从相机空间进入屏幕空间：

```
var screenSpaceX = (screenWidth / 2) - cameraSpace.X;
var screenSpaceY = (screenHeight / 2) - cameraSpace.Y; 
```

然后，您可以使用对象的屏幕空间坐标来渲染它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:02:03.470

您可以在简单的 Vector2 中表示位置并将其移向任何实体。 `public Vector2 cameraPosition;`

当您加载关卡时，您需要将摄像机位置设置为您的玩家（或它应该在的对象）

您将需要一个矩阵和其他一些东西，如下面的代码所示。评论中对此进行了解释。这样做可以防止您必须将 cameraPosition 添加到您绘制的所有内容中。

```
 //This will move our camera
    ScrollCamera(spriteBatch.GraphicsDevice.Viewport);

    //We now must get the center of the screen
    Vector2 Origin = new Vector2(spriteBatch.GraphicsDevice.Viewport.Width / 2.0f, spriteBatch.GraphicsDevice.Viewport.Height / 2.0f);

    //Now the matrix, It will hold the position, and Rotation/Zoom for advanced features
    Matrix cameraTransform = Matrix.CreateTranslation(new Vector3(-cameraPosition, 0.0f)) *
       Matrix.CreateTranslation(new Vector3(-Origin, 0.0f)) *
       Matrix.CreateRotationZ(rot) * //Add Rotation
       Matrix.CreateScale(zoom, zoom, 1) * //Add Zoom
       Matrix.CreateTranslation(new Vector3(Origin, 0.0f)); //Add Origin

      //Now we can start to draw with our camera, using the Matrix overload
    spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend, SamplerState.LinearClamp, DepthStencilState.Default,
                             RasterizerState.CullCounterClockwise, null, cameraTransform);

    DrawTiles(spriteBatch); //Or whatever method you have for drawing tiles

    spriteBatch.End(); //End the camera spritebatch
    // After this you can make another spritebatch without a camera to draw UI and things that will not move 
```

如果您想添加任何花哨的东西，我添加了缩放和旋转，只需替换变量即可。

那应该让您开始使用它。

但是，您需要确保相机在边界内，并使其跟随。

我将向您展示如何添加平滑滚动，但是如果您想要简单的滚动，请参阅此[示例](http://msdn.microsoft.com/en-us/library/dd254919%28v=xnagamestudio.31%29.aspx)。

```
 private void ScrollCamera(Viewport viewport)
        {
            //Add to the camera positon, So we can see the origin
            cameraPosition.X = cameraPosition.X + (viewport.Width / 2);
            cameraPosition.Y = cameraPosition.Y + (viewport.Height / 2);

            //Smoothly move the camera towards the player
            cameraPosition.X = MathHelper.Lerp(cameraPosition.X , Player.Position.X, 0.1f);
            cameraPosition.Y = MathHelper.Lerp(cameraPosition.Y, Player.Position.Y, 0.1f);
            //Undo the origin because it will be calculated with the Matrix (I know this isnt the best way but its what I had real quick)
            cameraPosition.X = cameraPosition.X -( viewport.Width / 2);
            cameraPosition.Y = cameraPosition.Y - (viewport.Height / 2);

            //Shake the camera, Use the mouse to scroll or anything like that, add it here (Ex, Earthquakes)

            //Round it, So it dosent try to draw in between 2 pixels
            cameraPosition.Y= (float)Math.Round(cameraPosition.Y);
            cameraPosition.X = (float)Math.Round(cameraPosition.X);

            //Clamp it off, So it stops scrolling near the edges
            cameraPosition.X = MathHelper.Clamp(cameraPosition.X, 1f, Width * Tile.Width);
            cameraPosition.Y = MathHelper.Clamp(cameraPosition.Y, 1f, Height * Tile.Height);

        } 
```

希望这可以帮助！

# javascript - 在 vs.net 2010 中调试 JavaScript 代码

> ID：12152664
> 
> 赞同：-1
> 
> 时间：2012-08-28T04:10:26.777
> 
> 标签：javascript, winforms, visual-studio-2010, c#-4.0, webbrowser-control

我有一个`win-form`带有 Web 浏览器控件的应用程序。

我在这个网络浏览器中使用了一个`JavaScript`代码。但有时我的 JavaScript 代码会返回`error`

我想知道是否可以在 vs.net 2010 中调试 JavaScript 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:23:37.000

您可以调试在 ASP.Net 应用程序（WebForms 或 MVC）中运行的 Javascript，但不能在您的 Win Forms 应用程序中调试。如果您有浏览器控件正在运行的站点的代码，那么您可以在 VS 2010 中启动该会话并进行调试。

# ios - 当我使用 UIScrollView 时 Cocos2d 停止

> ID：12152667
> 
> 赞同：0
> 
> 时间：2012-08-28T04:10:45.170
> 
> 标签：ios, cocos2d-iphone

我`UIScrollView`在 cocos2d 中添加了一个。我在滚动视图中有 100 条记录。当我滚动滚动视图时，所有 cocos2d 操作、事件和时间表都会停止。

我正在使用 cocos2d 2.0 来支持视网膜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:02:58.957

使用 CCScrollLayer 而不是 uiscrollview。Cocos2D 使用 OpenGL ES 来渲染图像，所以它很难使用 UIScrollView。你可以在 cocos2D 扩展中找到 CCScrollLayer。便于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T01:33:03.173

如果你想要减速和反弹，你应该看看 CCKit。

我正在寻找一种在 Cocos2d 2.0 中获得 UIScrollView 感觉的方法，但没有成功地使用可靠的 UIKit 和 CC2d 混合。

如果你这样做，请报告。

# ios - iPhone 如何通过蓝牙发现外部配件？

> ID：12152678
> 
> 赞同：0
> 
> 时间：2012-08-28T04:12:04.453
> 
> 标签：ios, external-accessory

iPhone如何知道通过蓝牙自动连接到MFi设备？iPhone 上的蓝牙是否一直在寻找要连接的设备？如果周围有一些 MFi（都支持蓝牙）会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:11:39.870

用户必须前往 Settings/Bluetooth 或 Settings/General/Bluetooth（根据设备运行的 iOS 版本），并等待 iOS 发现 MFi 配件。

然后用户必须第一次手动连接设备。配件通常会记住配对关系并自动重新连接到 iOS，如果用户在 iOS 的蓝牙开启时运气好的话。

虽然我从来没有尝试过连接多个蓝牙MFi设备，但Apple的文件显示iOS 5之后支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:41:38.670

您在 .m 文件（实现）中导入**ExternalAccessory/ExternalAccessory.h**，以便您可以使用包含附件信息的库或获取可用的附件。使用它，我们还可以打开与所选附件的会话。

我不确定您是否可以连接到检测到的多个蓝牙设备。

# ruby-on-rails - 如何实现 before_filter？

> ID：12152680
> 
> 赞同：1
> 
> 时间：2012-08-28T04:12:11.307
> 
> 标签：ruby-on-rails, ruby

谁能告诉我实现rail的before_filter方法的想法？（我想尝试编写自己的before_method）

特别是，我想知道 ruby​​ 是否有一些方法来检测方法调用？

我的想法是：

步骤1：`alias_method :old_method, :method`

第2步：`alias_method :method, :wrapper_method`

step3：在 中`wrapper_method`，我们先做一些事情，然后调用`old_method`

有什么问题吗？

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:28:28.797

如果您只想在调用任何其他方法之前触发一个方法，您可以简单地执行此操作`before_filter`

```
class UsersController < ApplicationController
    before_filter :check_something
    ... 
    ... 
    ...
end 
```

这样，该`check_something`方法将在调用该类的任何方法之前被调用。

`only`您也可以通过设置或`except`选项来限制这一点。喜欢

```
before_filter :check_something, :only =. [:show, :edit] 
```

在这种情况下，该`check_something`方法将只为`show`和调用`edit`。

可能是值得一看的[before_filter](http://apidock.com/rails/ActionController/Filters/ClassMethods/before_filter)和[after_filter](http://apidock.com/rails/v2.3.8/ActionController/Filters/ClassMethods/after_filter)文章。

# ios - RestKit：如何重试失败的请求？

> ID：12152683
> 
> 赞同：2
> 
> 时间：2012-08-28T04:12:27.827
> 
> 标签：ios, restkit

`RKRequests`如果它们失败，我正在尝试让我的应用程序重试。我正在尝试这样做：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)errorIn
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.waitView stop];

    NSInteger code = objectLoader.response.statusCode;

    if (201 != code && 200 != code)
    {
        // determine whether to requeue the request or not

        if ([objectLoader.userData isEqualToString:@"capture"]) // requeue captures
        {
            NSLog(@"requeueing request");
            [objectLoader.queue cancelRequest:objectLoader];
            [objectLoader send];
        }
    }
} 
```

...但它总是崩溃，因为它`objectLoader`似乎是`cancelRequest`行后的一个悬空指针。如果`RKRequest`失败，我如何重试而不崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:28:40.500

您可以尝试访问 RKRequest，例如使用 RKRequestDelegate 协议：

```
- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error 
```

因为那时您可以执行以下操作：

```
NSAssert(!request.isUnsent && !request.isLoading, @"Cant retry load, current attempt has not completed");
[request reset];
[request send]; 
```

# vbscript - 从 RSOP_Session SecurityGroups 获取 SID 的标题

> ID：12152684
> 
> 赞同：0
> 
> 时间：2012-08-28T04:12:50.090
> 
> 标签：vbscript, sid

从 WMI 命名空间中，我可以获取一个使用 WQL`root\rsop\user\<user_SID>`的数组。我最终得到了一个类似于以下内容的 SID 列表：`SecurityGroups``Select SecurityGroups from RSOP_Session`

```
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-999
S-1-1-0
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-682003330-9999
S-1-5-32-545
S-1-5-32-544
S-1-5-4
S-1-5-11
S-1-2-0
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-888
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-77777
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-66666
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-55555
S-1-5-21-xxxxxxxxxx-xxxxxxxxxx-604776629-44444 
```

我的问题：如何检索这些 SID 的标题（名称）？其中一些属于该域，而另一些属于我不确定谁/什么/在哪里......（问题当然是后者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:09:27.137

使用 YARU（Yet Another Registry Utility）处理 SAM 和 SYSTEM 配置单元，并从报告菜单生成密码哈希报告，使用导出配置单元的“提取配置单元”选项和您正在使用的系统的“实时系统”选项。

YARU 可以在以下位置找到下载：

[https://www.tzworks.net/download_links.php](https://www.tzworks.net/download_links.php)

YARU 位于注册表和事件日志分析下的列表中间。

# c++ - KEY_WOW64_32KEY 在 32 位和 64 位编译之间给出不同的结果

> ID：12152685
> 
> 赞同：0
> 
> 时间：2012-08-28T04:12:53.767
> 
> 标签：c++, registry, 64-bit, wow64

您好我正在尝试使用 32 位和 64 位编译代码读取和写入注册表值。每个编译都应该读/写到相同的位置。我尝试使用 KEY_WOW64_32KEY 无济于事。

当我使用 32 位目标编译以下代码时，它会写入和读取值。当我使用 64 位目标编译时，它找不到也无法写入密钥。

编辑：以下代码适用于 Windows XP 64 位上的 32 位和 64 位版本。问题出现在 Windows 7 64 位。

任何帮助表示赞赏，罗布。

```
#include <windows.h>
#include <stdio.h>

#define ISVALIDHANDLE(x) (x != NULL && x != INVALID_HANDLE_VALUE)
#define KEY_ACCESS_DEF        (KEY_ALL_ACCESS | KEY_READ | KEY_WRITE | KEY_WOW64_32KEY)
#define KEYPATH "SOFTWARE\\X\\Y"
#define KEYNAME "Z"

static bool
doInstallKey(HKEY key, const char *keypath, const char *keyname, const char *keyvalue)
{
    HKEY                 rootKey, myKey;
    bool                 r = false;

    RegOpenKeyEx(key, NULL, 0, KEY_QUERY_VALUE | KEY_WOW64_32KEY, &rootKey);

    if( ISVALIDHANDLE(rootKey) )
    {
        HRESULT                res;
        unsigned long        createType;

        res = RegCreateKeyEx( rootKey, keypath, 0, NULL,
                    REG_OPTION_NON_VOLATILE,
                    KEY_ACCESS_DEF, NULL, &myKey, &createType );

        if( ISVALIDHANDLE(myKey) )
        {
            RegSetValueEx(myKey, keyname, 0,
                REG_SZ, (unsigned char *)keyvalue, strlen(keyvalue)+1);

            RegCloseKey(myKey);

            r  = true;
        }
        else
        {
            // If we cant create it, maybe it already exits,
            // just change the value.

            res = RegOpenKeyEx(rootKey, keypath, 0, KEY_QUERY_VALUE | KEY_WOW64_32KEY, &myKey);

            if( ISVALIDHANDLE(myKey) )
            {
                RegSetValueEx(myKey, keyname, 0,
                    REG_SZ, (unsigned char *)keyvalue, strlen(keyvalue)+1);

                RegCloseKey(myKey);

                r  = true;
            }
            else
            {
                // error
            }
        }

        RegCloseKey(rootKey);
    }

    return r;
}

static int
doGetInstallKey(HKEY key, const char *keypath, const char *keyname,
            char *keyvalue, unsigned long keylen)
{
    HKEY     rootKey, myKey;
    int         valid = 0;

    keyvalue[0] = 0;

    RegOpenKeyEx(key, NULL, 0, KEY_QUERY_VALUE | KEY_WOW64_32KEY, &rootKey);

    if( ISVALIDHANDLE(rootKey) )
    {
        RegOpenKeyEx(key, keypath, 0, KEY_QUERY_VALUE | KEY_WOW64_32KEY, &myKey);

        if( ISVALIDHANDLE(myKey) )
        {
            unsigned long        type = 0;
            HRESULT                res;

            res = RegQueryValueEx(myKey, keyname, NULL,
                        &type, (unsigned char *)keyvalue, &keylen);

            if (res == ERROR_SUCCESS)
                valid = keylen;

            RegCloseKey(myKey);
        }

        RegCloseKey(rootKey);
    }

    return valid;
}

int
main(int argc, char *argv[])
{
    char    buf[1024];
    int        len = 1023;

    // read key
    doGetInstallKey(HKEY_LOCAL_MACHINE, KEYPATH, KEYNAME, buf, len);
    fprintf(stdout, "BEFORE: %s\n", buf);

    // write key
    doInstallKey(HKEY_LOCAL_MACHINE, KEYPATH, KEYNAME, "def64");

    // read key
    doGetInstallKey(HKEY_LOCAL_MACHINE, KEYPATH, KEYNAME, buf, len);
    fprintf(stdout, "AFTER: %s\n", buf);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:58:28.667

在 Windows 7 上进行测试时，您是否以管理员身份运行？您可能正在运行[注册表虚拟化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T18:30:33.897

尝试更换

```
#define KEY_ACCESS_DEF        (KEY_ALL_ACCESS | KEY_READ | KEY_WRITE | KEY_WOW64_32KEY) 
```

为了

```
#define KEY_ACCESS_DEF        (KEY_READ | KEY_WRITE | KEY_WOW64_32KEY) 
```

# php - 如何为 Doctrine ODM Collection 映射类型指定类

> ID：12152688
> 
> 赞同：2
> 
> 时间：2012-08-28T04:13:21.930
> 
> 标签：php, collections, doctrine-orm, odm

我有一个文档，其中包含一个标记为持久性的字段作为集合

```
 use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;  

/** @ODM\Document */
class Item
{
    /**
    * @ODM\Collection
    */
    protected $things;

} 
```

默认情况下，当 Doctrine 从 Mongo 映射值时，它会将 $things 设置为 Doctrine\Common\Collections\ArrayCollection 的一个实例。

然而，这违反了我的域模型，因为我的域对象期望 $things 属性是我自己的集合类 ThingsCollection 的一个实例。此类对事物列表进行各种验证。

我怎样才能告诉 Doctrine 使用我的 ThingsCollection 类呢？我想我将不得不让 ThingsCollection 类实现 Doctrine\Common\Collections\Collection 接口，但如果我能首先弄清楚如何告诉 Doctrine 映射，这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:10:28.617

答案是不可能的。

此外，尽管文档令人困惑并且另有说明，但对于如上所述的一般 Collection 属性映射（不是参考），不会返回 ArrayCollection。给出了一个基本的 php 数组。

因此，在这种情况下，您似乎被迫使用数组，至少目前是这样。

# javascript - JavaScript：使用 typeof 检查是否为字符串

> ID：12152691
> 
> 赞同：13
> 
> 时间：2012-08-28T04:13:42.597
> 
> 标签：javascript

我正在做一个 codecademy.com 练习，我们使用 for-in 语句循环对象并通过检查语言对象中的属性值是否是字符串来以不同的语言打印 hello`typeof`

我检查该值是否为字符串不起作用。我的循环给了我这个结果

```
english
french
notALanguage
spanish 
```

编码

```
 var languages = {
        english: "Hello!",
        french: "Bonjour!",
        notALanguage: 4,
        spanish: "Hola!"
    };

    // print hello in the 3 different languages
    for(var hello in languages){
        var value = hello;
        if (typeof value === "string"){
        console.log(value); 
        }
    } 
```

这些是练习的说明

> 如果你仔细想想，物体并不是那么陌生！
> 
> 请记住，您可以使用 typeof myVariable 确定变量的类型。我们现在关心的类型是“object”、“string”和“number”。
> 
> 回想一下 for-in 循环：
> 
> for(var x in obj) { executeSomething(); }
> 
> 这将一一遍历 obj 的所有属性，并在每次循环运行时将属性名称分配给 x。
> 
> 让我们结合我们对这两个概念的了解。
> 
> 检查语言对象。三个属性是字符串，而一个是数字。
> 
> 使用 for-in 循环打印出三种打招呼方式。在循环中，您应该检查属性值是否为字符串，以免意外打印数字。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-28T04:15:44.163

那是因为您正在检查`key`对象的 。要检查实际值，您应该执行类似`object[key]`. 尝试这个：

```
 var languages = {
        english: "Hello!",
        french: "Bonjour!",
        notALanguage: 4,
        spanish: "Hola!"
    };

// print hello in the 3 different languages
for(var hello in languages){
    var value = languages[hello];
    if (typeof value === "string"){
    console.log(value); 
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-11T03:33:31.680

这是答案：（使用 typeof ，然后在你的 for 语句中使用对象名称后跟 var 并测试它是否等于“string”）

```
var languages = {
    english: "Hello!",
    french: "Bonjour!",
    notALanguage: 4,
    spanish: "Hola!"
};

// print hello in the 3 different languages
for (var x in languages){
    if (typeof languages[x] === "string"){
        console.log(languages[x]);
    }
    else ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T06:25:04.147

您正在检查对象的键，而不是值。检查对象的构造函数以确定其类型通常是一种好习惯。

像这样的东西：

```
var languages = {
    english: "Hello!",
    french: "Bonjour!",
    notALanguage: 4,
    spanish: "Hola!"
};

for(i in languages) {

  if(languages[i].constructor === String) {
    console.log(languages[i])   
  };

}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-03T12:59:53.650

“字符串”与字符串不同。我找到了一种测试 typeof 字符串的方法。

```
if (typeof something === typeof "test") ... 
```

您当然可以使用“字符串”进行比较，但任何实际的字符串都可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T05:10:15.797

下面的编码对于仅执行字符串值也很有用。通过使用变量访问 abject 的属性列表，然后使用它检查值是否为 NotANumber 使用 isNaN。下面给出的代码对您有用

```
var languages = {
english: "Hello!",
french: "Bonjour!",
notALanguage: 4,
spanish: "Hola!"
};

// print hello in the 3 different languages
for(a in languages)
{
if(isNaN(languages[a]))
console.log(languages[a]);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-30T04:52:40.607

这是为我工作的价值

for（语言中的var x）{

```
if(typeof languages[x] === "string"){
    console.log(languages[x]);
} else } 
```

# ruby - 来自 NodeJS 的队列 Resque 作业

> ID：12152693
> 
> 赞同：4
> 
> 时间：2012-08-28T04:14:14.687
> 
> 标签：ruby, ruby-on-rails-3, node.js, redis, resque

我想从 NodeJS 排队 Resque 作业。我看到的监控 Redis 命令：

```
1346127083.495055 "sadd" "resque:w:tasks:queues" "facebook"
1346127083.495471 "rpush" "resque:w:tasks:queue:facebook" "{\"class\":\"Hello::FacebookFriends\",\"args\":[\"2342324\"]}" 
```

直接从 Node 发出这些命令似乎有效。是否有任何隐藏的错误或我不知道的事情？

**更新**：我的工作是用 Ruby 编写的。虽然我喜欢 NodeJS 并且我在 Javascript 方面做得更好，但我需要大量在 NPM 中仍然无法正常使用的库，例如与 Twitter 和 Facebook 通信（Twitter 和 Koala gems，Node 没有可比性）。所以我想从我的 NodeJS 服务启动 Ruby Jobs。

到目前为止，我使用的东西看起来类似于 coffee-resque 中的这个函数：

```
 enqueue: (queue, func, args) ->
    @redis.sadd  @key('queues'), queue
    @redis.rpush @key('queue', queue),
      JSON.stringify class: func, args: args || [] 
```

这里：

```
job = JSON.stringify
    class: 'Hello::FacebookFriends'
    args: [user_id, fb.id]
@redis_client.multi()
    .sadd('resque:w:tasks:queues', 'facebook')
    .rpush('resque:w:tasks:queue:facebook', job)
    .exec() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T16:24:14.990

我认为你应该使用：[https ://github.com/technoweenie/coffee-resque](https://github.com/technoweenie/coffee-resque)

（名字说咖啡，但你也可以用 javascript 来使用它）看起来也很简单，而且你会更安全地应对意外结果、破坏性更改等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-05T07:20:22.217

您可以使用来自 TaskRabbit 的 node-resque

**Lambda 代码**

```
const NodeResque = require('node-resque')
const connectionDetails = {
  pkg: 'ioredis',
  host: 'redis host',
  port: 6379
}
const queue = new NodeResque.Queue({
  connection: connectionDetails
})
queue.on('error', function(error) {
  console.log(error)
})
await queue.connect()
await queue.enqueue('queue_name', 'WorkerClassName', ['arg1', 'arg2', ..])
await queue.end()
```

**用于处理任务的 Rails 工作者代码**

```
class WorkerClassName
    @queue = :queue_name
    def self.perform(arg1, arg2, arg3)
        # Logic
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:18:01.317

为什么不建立一个可以触发工作的服务呢？这将是通过网络的额外一跳，但代码应该足够简单（例如，查看[http://www.sinatrarb.com/ ）。](http://www.sinatrarb.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-25T06:56:41.440

您可以使用 TaskRabbit 的[node-resque](https://github.com/taskrabbit/node-resque)库来执行此操作。

这是[一篇](https://scalegrid.io/blog/visualizing-resque-usage-using-node-js-websockets-and-redis/)可以帮助您入门的文章。它还有一个链接到托管在 Heroku 上的演示，您可以在其中连接您的 Redis 实例并查看您的 Resque 队列和作业。

# android - android内核修改以在启动期间解锁屏幕

> ID：12152694
> 
> 赞同：1
> 
> 时间：2012-08-28T04:14:19.130
> 
> 标签：android, kernel, screen, unlock

当我启动 android 时，我希望屏幕自动解锁（并运行应用程序）而不是我解锁屏幕。谁能告诉我必须在哪里更改内核源代码？

* * *

java代码在这里..你能纠正一下吗

```
public class AddnumsActivity extends BroadcastReceiver {
    private static final String KEYGUARD_SERVICE = null;
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            KeyguardManager keyguardManager = (KeyguardManager)context.getSystemService(Activity.KEYGUARD_SERVICE);
            KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
            lock.disableKeyguard();
            if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {  
                Intent pushIntent = new Intent(context, AddnumsActivity.class);  
                pushIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(pushIntent);  
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:19:14.983

我认为您不需要为此进行内核更改。您所要做的就是创建一个完整的启动接收器并在其中禁用锁定屏幕

```
KeyguardManager keyguardManager = KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

并添加以下权限

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

您需要在启动时显示的活动应充当主屏幕。为您的活动使用以下过滤器

```
<intent-filter>
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.HOME" />
 <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

# ios - 在一系列模态视图之后转换回第一个视图？

> ID：12152697
> 
> 赞同：1
> 
> 时间：2012-08-28T04:14:25.487
> 
> 标签：ios, uiview, uiviewcontroller, modalviewcontroller

我正在创建一个具有以下视图序列的简单游戏：

菜单 -> 选择难度 -> 游戏 -> 游戏结束 -> 菜单

前四个转换是这样完成的：

```
- (IBAction)newGame {
    // Transition to select difficulty view controller.
    [self presentModalViewController:[[SelectDifficultyViewController alloc] init] animated:YES];
} 
```

最好的方法是从 GameOver 视图转换回菜单视图，并在只显示一个动画转换的同时关闭并解除分配 GameOver、Game 和 SelectDifficulty 视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:42:30.713

最好的方法可能涉及重构你的对话代码（注意：我并没有声称在这里提供最好的方法，你不应该要求最好的方法，因为这会引起争论）。模态对话框并不意味着长期存在。允许用户选择难度，然后隐藏游戏的对话框。游戏结束屏幕也可以是主应用程序窗口上的对话框。

在以下选项中，1 提供对所有应用程序状态的即时访问，但 2 更接近最佳实践，因为它将游戏逻辑与菜单导航/设置逻辑分开。

* * *

**选项 1：将您的菜单和游戏视图合并到一个视图控制器中**

您的主窗口的视图层次结构将是：

```
UIView (root view) --- UIView (menu layer) --- (all of your menu subviews)
                   \-- UIView (game layer) --- (all of your game subviews) 
```

新流程将类似于

主视图（菜单层）-> 选择难度（模式）-> 主视图（游戏层）-> 游戏结束（模式）-> 主视图（菜单层）

然后从游戏到菜单的过渡变为：

1.  这两者都发生在一个动画块中

    a) 游戏结束对话框 alpha ->`0.0f`

    b) 菜单层 alpha ->`1.0f`

2.  执行底层`dismissModalViewControllerAnimated(false)`操作

* * *

**选项 2：为您的菜单和游戏视图设置单独的视图控制器**

您的主窗口的视图层次结构将是：

```
UIViewController (root) --- UIView (menu view) --- (all your menu subviews)
UIViewController        --- UIView (game view) --- (all your game subviews) 
```

您可以通过设置`UIWindow`'`rootViewController`属性在活动视图控制器之间切换。

新流程将类似于

菜单视图->选择难度（模式）->游戏视图->游戏结束（模式）->菜单视图

然后从游戏到菜单的过渡变为：

1.  这两者都发生在一个动画块中

    a) 游戏结束对话框 alpha ->`0.0f`

    b) 设置`rootViewController`为菜单视图

2.  执行底层`dismissModalViewControllerAnimated(false)`操作

# android - 从父级移除视图，将其他视图设置为动画？

> ID：12152702
> 
> 赞同：1
> 
> 时间：2012-08-28T04:15:03.163
> 
> 标签：android, android-layout, android-view

我有一个`LinearLayout`，在整个应用程序的过程中，聚合可以删除的子视图。我的问题是，当一个孩子从父视图中移除时，有没有办法让其他孩子动画到位？从本质上讲，我想重新创建 ICS/Jelly Bean 最近应用程序窗口的效果——当一个被刷掉时，另一个就位。我知道这个特定的实现是由谷歌制作的，因此可能超出了我可以做的可能性范围，但我将如何模拟这种效果呢？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:15:12.660

在此答案中阅读有关视图组动画的信息。您可以使用动画 API 来创建动画。

[https://stackoverflow.com/a/6524820/940680](https://stackoverflow.com/a/6524820/940680)

# windows - 搜索旧文件 cmd

> ID：12152703
> 
> 赞同：0
> 
> 时间：2012-08-28T04:15:39.650
> 
> 标签：windows, batch-file, cmd, wmi

我需要找到所有文件

1.  某些扩展
2.  最后使用日期高于某个阈值（例如 > 30 天）

问题是：

1.  我不知道文件可能在哪里（这意味着搜索所有本地磁盘） - 如果这些文件甚至存在
2.  我不知道它会是哪个操作系统 - 肯定是 Windows 版本，但它可能是 XP 和 2008 之间的任何操作系统
3.  它必须在许多计算机上完成。
4.  如果不存在此类文件，则结果应该是退出代码为零，如果检测到它们，则结果应该是非零（加上最后修改的路径和时间的 txt 报告）

到目前为止，我已经找到了如何找到所有文件 (*.NNN)-

```
for %%i in (c d e f g h i g k l m n q r s t u v w x y z) do dir /s /a-d %%i:\*.NNN 
```

或如何在特定位置查找具有特定时间戳（> 30 天）的文件

```
forfiles /p N:\NNNN /m *.NNN /d -30 
```

任何想法都非常受欢迎，提前谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:41:41.010

以下批处理命令在 CIM_LogicalFile 类中查询所有扩展名为“exe”的系统文件，其中文件的最后修改日期大于 2012 年 7 月 31 日，并将结果输出到 CSV 文件：

```
wmic /namespace:\\root\cimv2 path CIM_LogicalFile where "Extension='exe' and LastModified>'20120731235959.000000+600'" get /all /format:csv >"CIM_LogicalFile.csv" 
```

# windows - 使笔式驱动器显示为 cd？

> ID：12152704
> 
> 赞同：1
> 
> 时间：2012-08-28T04:15:42.290
> 
> 标签：windows, autorun, usb-flash-drive

我的笔式驱动器中有一个 .exe 文件，位于一长串目录中 (driveLetter:\dir1\dir2....\dir8\program.exe) 现在我不想通过所有这些目录来访问文件并运行它，问题是在 Windows7 中，使用 autorun.inf open 命令运行 .exe 文件在笔式驱动器中不再起作用，但它在 CD 中起作用，这就是我想让笔式驱动器看起来像 CD 的原因插入时的窗口。请不要问我是不是在这里写病毒，因为我不是。

有什么想法我怎么能做到这一点？如果让它显示为 CD 不起作用，有没有办法运行 .exe 文件（我知道，这可能是一个单独的 Q）

非常感谢你能为我提供的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T20:46:11.127

自 2011 年以来，Microsoft 已删除 autorun.inf 选项，因此即使 CD 驱动程序将替换当前驱动程序也无法使用。如果没有向最终用户显示的提示，CD 和闪存驱动器都无法自动启动。那是出于安全原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:23:03.000

您可以通过将 autorun 和 exe 文件放在默认目录中（即：不是十几个文件夹深）来使闪存驱动器使用自动运行。这就是我在没有 CD 驱动器的计算机上安装 W7 时的做法。

这是 Windows 7 autorun.inf 的样子

```
[Autorun.Amd64]
open=setup64.exe
icon=setup64.exe,0

[Autorun]
open=setup.exe
icon=setup.exe,0 
```

这很简单：顶部用于 64 位操作系统，而底部用于 32 位。

# php - fwrite() 不允许，但 phpinfo() 说它应该是

> ID：12152706
> 
> 赞同：3
> 
> 时间：2012-08-28T04:15:54.783
> 
> 标签：php, fwrite, phpinfo

我从我试图运行的脚本中得到以下信息：

```
Notice: fwrite() [function.fwrite]: send of 7 bytes failed with errno=1 Operation not permitted in /home/thrawn/public_html/sorcero.us/MinecraftQuery.class.php on line 165 
```

但是，当我检查 phpinfo() 时，allow_url_fopen 已打开并且 Sockets Support 已启用。我一直无法找到任何指向我可能导致这种情况的东西。

为了澄清起见，我没有写这个脚本。我对 PHP 的了解大多只是基础知识，但我知道足以证明这应该可以工作，因为 phpinfo() 表示允许正确的事情。有问题的脚本在这里：[https ://github.com/xPaw/PHP-Minecraft-Query/blob/master/MinecraftQuery.class.php](https://github.com/xPaw/PHP-Minecraft-Query/blob/master/MinecraftQuery.class.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T05:38:10.140

`fwrite()`写入`$this->socket`并在`private function WriteData()`. 在`public function Connect()`是一条线

```
$this->Socket = @FSockOpen( 'udp://' . $Ip, (int)$Port, $ErrNo, $ErrStr, $Timeout ); 
```

这是该文件中唯一`$this->socket`写入的行。

[此外，手册页中](http://php.net/manual/en/function.fsockopen.php)有一条警告消息[`fsockopen()`](http://php.net/manual/en/function.fsockopen.php)

> 即使远程主机无法访问，UDP 套接字有时也似乎已打开且没有错误。只有当您从套接字读取或写入数据时，该错误才会变得明显。这样做的原因是因为 UDP 是一个“无连接”协议，这意味着操作系统不会尝试为套接字建立链接，直到它真正需要发送或接收数据。

大概就是这样。尽管无法访问 ip 地址或端口，但仍会创建套接字。这会导致在尝试写入数据时出现错误消息。

所以为了解决这个问题，你至少需要做这些事情：

*   确保IP地址和端口正确。
*   验证服务器是否已启动并正在运行。
*   确保 IP 地址和端口可访问（未在任何防火墙中阻止）

我不知道正确的设置应该是什么。如果您已将软件安装在外部服务器上，也请尝试使用本地计算机，以便您可以验证 IP 地址和端口设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:47:56.247

如果您检查了您的 PHP 配置并且问题仍然存在，请检查您的防火墙日志。

正如 Ignacio Vazquez-Abrams 所说：这是一个操作系统错误。

就我而言，CSF 阻止了传出连接。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-28T06:53:51.493

好像是权限错误，

尝试，

```
 chmod -R folder_to_be_file_written 
```

然后执行php脚本

# c# - 温度转换 - 2 的补码 - 13 位

> ID：12152708
> 
> 赞同：0
> 
> 时间：2012-08-28T04:16:31.507
> 
> 标签：c#, temperature

我没有时间尝试将下表转换为 c# 中的一些有价值的东西。

我有一个 2 字节数组，例如

```
byte[] data = new byte[2];

data [ 0 ] = 0x00;
data [ 1 ] = 0xc9; 
```

有没有人有办法将下面的图表转换为 ac# 方法？

格式适用于 DS2438 智能电池监控器 IC - [http://datasheets.maxim-ic.com/en/ds/DS2438.pdf](http://datasheets.maxim-ic.com/en/ds/DS2438.pdf)

注意：底部 3 位始终为 0，因此不应成为公式的一部分并被排除在外。

该值乘以 0.03125 以产生最终温度。

所以恰当的例子是 0xc900 等于 -1760 或 -1760 * 0.03125 = -55C

![在此处输入图像描述](../Images/e69be924dab3ac76654a1aae47db6eaf.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:20:29.600

看起来只是`(float)(sbyte)data[1] + (float)data[0] / 256`。

它是 13 位而不是 16 位*没关系；*因为 Dallas 对事物进行了位移，以制作一个不错的 8.8 定点表示。如果您的传感器具有更高的分辨率，那么将使用那些低位，但数学仍然完全相同。

# mysql - 如何使用 SQL 连接来做到这一点？

> ID：12152710
> 
> 赞同：1
> 
> 时间：2012-08-28T04:17:19.273
> 
> 标签：mysql, sql, xampp

我想我可以使用加入来做到这一点？如何？当我使用这个时，Xampp 没有响应。它甚至不显示错误，只是不做任何事情。适用于其他查询。

```
SELECT * 
FROM acw_papers_web
WHERE id_paper_web IN (SELECT id_paper_web FROM acw_papers_web_autores 
WHERE nombre_autor_pw LIKE '%$autor%') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:24:05.063

你可以[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)这样使用：

```
SELECT web.* FROM acw_papers_web web
INNER JOIN acw_papers_web_autores aut
ON web.id_paper_web = aut.id_paper_web
WHERE aut.nombre_autor_pw LIKE '%$autor%' 
```

# android - 如何从服务器获取安全证书并安装在设备证书列表中，如在浏览器中

> ID：12152711
> 
> 赞同：1
> 
> 时间：2012-08-28T04:17:24.270
> 
> 标签：android, certificate, installation

我需要实现类似于浏览器实现的 SSL 连接，如果证书不是来自受信任的来源，我需要显示一个对话框并接受证书并继续连接。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:50:38.053

您可以实现自定义[X509TrustManager](http://developer.android.com/reference/javax/net/ssl/X509TrustManager.html)，它根据来自 Android 的标准受信任根证书以及自己的受信任列表验证服务器证书。见`checkServerTrusted(..)`方法。

如果出现无效/不受信任的证书，您可以询问用户是否应将其添加到您自己的受信任列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:27:39.417

您只能在 Android 4.0 及更高版本上安装受信任的证书。您可以捕获证书错误，然后要求用户使用[KeyChain API](http://developer.android.com/reference/android/security/KeyChain.html)安装证书。它需要用户确认，因此您无法自动执行此操作。

# blackberry - 打包 BlackBerry (WebWorks) PhoneGap/Cordova 应用程序

> ID：12152714
> 
> 赞同：1
> 
> 时间：2012-08-28T04:17:32.363
> 
> 标签：blackberry, cordova, packaging, blackberry-webworks

我正在使用 PhoneGap/Cordova，我看到的唯一选项是构建到模拟器或构建以调试设备。

我想打包应用程序以供进一步分发和发布。有什么想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:42:33.140

[https://developer.blackberry.com/html5/documentation/signing_landing_page.html](https://developer.blackberry.com/html5/documentation/signing_landing_page.html)

[https://developer.blackberry.com/html5/documentation/distributing_your_app_1866990_11.html](https://developer.blackberry.com/html5/documentation/distributing_your_app_1866990_11.html)

您需要从 RIM 获取签名密钥才能将您的应用程序发布到 Blackberry App World。我之前的经验是使用签名密钥打包应用程序，并允许其他人使用生成的 .alx 文件通过 BlackBerry Desktop Manager 安装应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:10:44.297

首先构建

```
ant blackberry build 
```

然后，您需要获取并安装签名密钥：

[https://developer.blackberry.com/html5/documentation/signing_setup_smartphone_apps_1920010_11.html](https://developer.blackberry.com/html5/documentation/signing_setup_smartphone_apps_1920010_11.html)

最后，一旦您能够进行代码签名，您需要使用 bbwp 对构建生成的 zip 文件进行签名和打包（该 zip 位于 PhoneGap 文件夹的构建目录中）。所以导航到你的 sdk/bin 目录并运行：

```
bbwp C:\myapp\HelloWorld.zip -g mypassword -o C:\myapp\signed 
```

这会在 C:\myapp\signed 中生成两个文件夹，其中包含签名文件。您将需要不同的文件，具体取决于分发方法，摘要如下：

[https://developer.blackberry.com/html5/documentation/distributing_your_app_1866990_11.html](https://developer.blackberry.com/html5/documentation/distributing_your_app_1866990_11.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:12:13.987

cd 进入项目的顶层目录（包含 www/ 文件夹的目录）。然后调用这个命令：

```
ant TARGET build 
```

其中 TARGET 可以是 blackberry、playbook 或 qnx（现在是 beta）。这将创建一个 build/ 文件夹，其中应包含进一步打包所需的文件。

# python - Python pandas 等效于替换

> ID：12152716
> 
> 赞同：23
> 
> 时间：2012-08-28T04:18:11.200
> 
> 标签：python, pandas, equivalent

在 R 中，有一个相当有用的`replace`函数。本质上，它在数据框的给定列中进行有条件的重新分配。它可以这样使用： `replace(df$column, df$column==1,'Type 1');`

在熊猫中实现相同目标的好方法是什么？

我应该使用 lambda`apply`吗？（如果是这样，我如何获得对给定列的引用，而不是整行）。

我应该使用`np.where`吗`data_frame.values`？似乎我在这里遗漏了一件非常明显的事情。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-28T04:25:10.727

`pandas`也有一个`replace`方法：

```
In [25]: df = DataFrame({1: [2,3,4], 2: [3,4,5]})

In [26]: df
Out[26]: 
   1  2
0  2  3
1  3  4
2  4  5

In [27]: df[2]
Out[27]: 
0    3
1    4
2    5
Name: 2

In [28]: df[2].replace(4, 17)
Out[28]: 
0     3
1    17
2     5
Name: 2

In [29]: df[2].replace(4, 17, inplace=True)
Out[29]: 
0     3
1    17
2     5
Name: 2

In [30]: df
Out[30]: 
   1   2
0  2   3
1  3  17
2  4   5 
```

或者您可以使用`numpy`-style 高级索引：

```
In [47]: df[1]
Out[47]: 
0    2
1    3
2    4
Name: 1

In [48]: df[1] == 4
Out[48]: 
0    False
1    False
2     True
Name: 1

In [49]: df[1][df[1] == 4]
Out[49]: 
2    4
Name: 1

In [50]: df[1][df[1] == 4] = 19

In [51]: df
Out[51]: 
    1   2
0   2   3
1   3  17
2  19   5 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-29T00:19:55.843

[Pandas doc for`replace`](http://pandas.pydata.org/pandas-docs/version/0.17.1/generated/pandas.Series.replace.html)没有任何示例，因此我将在此处提供一些示例。对于那些从 R 的角度来看的人（比如我），`replace`基本上是一个通用的替换函数，它结合了 R 函数的功能`plyr::mapvalues`，`plyr::revalue`和`stringr::str_replace_all`. 由于 DSM 涵盖了单值的情况，我将介绍多值的情况。

**示例系列**

```
In [10]: x = pd.Series([1, 2, 3, 4])

In [11]: x
Out[11]: 
0    1
1    2
2    3
3    4
dtype: int64 
```

我们想用负整数替换正整数（而不是乘以 -1）。

**两个值列表**

一种方法是让我们想要替换的值的一个列表（或 pandas 系列）和我们想要替换它们的值的第二个列表。

```
In [14]: x.replace([1, 2, 3, 4], [-1, -2, -3, -4])
Out[14]: 
0   -1
1   -2
2   -3
3   -4
dtype: int64 
```

这对应于`plyr::mapvalues`。

**值对字典**

有时，拥有一个值对字典会更方便。索引是我们替换的那个，值是我们替换它的那个。

```
In [15]: x.replace({1: -1, 2: -2, 3: -3, 4: -4})
Out[15]: 
0   -1
1   -2
2   -3
3   -4
dtype: int64 
```

这对应于`plyr::revalue`。

**字符串**

它对字符串的工作方式类似，除了我们还可以选择使用正则表达式模式。

如果我们只是想用其他字符串替换字符串，它的工作方式与以前完全相同：

```
In [18]: s = pd.Series(["ape", "monkey", "seagull"])
In [22]: s
Out[22]: 
0        ape
1     monkey
2    seagull
dtype: object 
```

**两个列表**

```
In [25]: s.replace(["ape", "monkey"], ["lion", "panda"])
Out[25]: 
0       lion
1      panda
2    seagull
dtype: object 
```

**字典**

```
In [26]: s.replace({"ape": "lion", "monkey": "panda"})
Out[26]: 
0       lion
1      panda
2    seagull
dtype: object 
```

**正则表达式**

将所有`a`s替换为`x`s。

```
In [27]: s.replace("a", "x", regex=True)
Out[27]: 
0        xpe
1     monkey
2    sexgull
dtype: object 
```

将所有`l`s替换为`x`s。

```
In [28]: s.replace("l", "x", regex=True)
Out[28]: 
0        ape
1     monkey
2    seaguxx
dtype: object 
```

请注意，两个`l`s in`seagull`都被替换了。

将`a`s替换为`x`s 并将`l`s替换为`p`s

```
In [29]: s.replace(["a", "l"], ["x", "p"], regex=True)
Out[29]: 
0        xpe
1     monkey
2    sexgupp
dtype: object 
```

在想要用相同的值替换多个不同的值的特殊情况下，可以只使用一个字符串作为替换。它不能在列表中。将`a`s 和`l`s替换为`p`s

```
In [29]: s.replace(["a", "l"], "p", regex=True)
Out[29]: 
0        ppe
1     monkey
2    sepgupp
dtype: object 
```

（感谢评论中的 DaveL17）

# android - 无法在 Android XmlSerializer 中设置默认命名空间

> ID：12152718
> 
> 赞同：5
> 
> 时间：2012-08-28T04:18:17.997
> 
> 标签：android, xml-serialization

如何使用 XMLSerializer 添加没有前缀的默认命名空间。

我在 Android 上使用 org.xmlpull.v1.XmlSerializer。

```
 XmlSerializer xmlSerializer = Xml.newSerializer();
 xmlSerializer.startTag("efgh", "abcd"); 
```

正在给`<n0:abcd xmlns:n0="efgh">`

但我希望它是

```
<abcd xmlns="efgh"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:23:30.520

我相信这就是 XmlSerializer.setPrefix(String prefix, String namespace) 的用途：

[http://developer.android.com/reference/org/xmlpull/v1/XmlSerializer.html#setPrefix(java.lang.String, java.lang.String)](http://developer.android.com/reference/org/xmlpull/v1/XmlSerializer.html#setPrefix%28java.lang.String,%20java.lang.String%29)

你试过用那个吗？

它将前缀绑定到命名空间。该调用对包括子元素在内的下一个元素有效。

**注意**：必须在 startTag() 之前直接调用此方法，如果接下来调用除了 startTag() 或 setPrefix() 之外的任何方法，都会出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-07T09:27:55.600

实际上，没有前缀的命名空间可以看作是一个属性。

所以这是代码：

```
xmlSerializer.startTag(null, "abcd");
xmlSerializer.attribute(null, "xmlns", "efgh");
xmlSerializer.endTag(null, "abcd"); 
```

# c# - asp.net 中的日期选择器

> ID：12152719
> 
> 赞同：2
> 
> 时间：2012-08-28T04:18:21.257
> 
> 标签：c#, asp.net, datepicker

我需要为我的网站创建日期选择器。这里有人可以建议我怎么做吗？做了护目镜，但我正在寻找一些简单易行的东西。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:27:51.813

您可以使用 Ajax 日期选择器[Ajax 日期选择器](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)，也可以使用 Jquery 日期选择器插件使用 jQuery 插件为该[DateTimePicker](http://www.aspsnippets.com/Articles/Implement-DateTimePicker-in-ASP.Net-using-jQuery-Plugin.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:02:32.613

您可以使用**Ajax 日历扩展器**。请参阅此[官方网站](http://www.asp.net/ajaxlibrary/act.ashx)以免费下载和获取教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:04:46.727

`JQuery DatePicker`你也可以使用

[http://www.eyecon.ro/datepicker/](http://www.eyecon.ro/datepicker/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T04:26:32.293

检查这个

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T04:34:04.343

[Date Picker Server Control](http://www.codeproject.com/Articles/42810/ASP-NET-Date-Picker-Server-Control)应该可以帮助您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T05:22:30.443

datetimepicker1_valuechanged(........) 的值更改事件的代码。

```
{

  dateTimePicker1.Text = dateTimePicker1.Value.ToString();
} 
```

如果你想在文本框中选择 datetimepicker 中的值。然后在 datetimepicker 上方拖动一个文本框并执行此编码..

```
{

  Textbox1.Text = dateTimePicker1.Value.ToString();
} 
```

# asp.net-mvc - 将 ViewModel 存储在单独的项目中

> ID：12152721
> 
> 赞同：1
> 
> 时间：2012-08-28T04:18:33.143
> 
> 标签：asp.net-mvc, viewmodel, entity-framework-5

我的模型在一个单独的类中，我想在一个单独的类项目中创建我的 ViewModel，以便我可以在不同的 MVC 项目中使用它们。可以这样做吗？这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:19:48.243

是的，非常容易。

只需创建新项目并引用现有项目。我倾向于使用类似于以下内容的东西；

**Product.Assembly.Web** 包含 MVC 项目

**用于 MVC 的**Product.Assembly.Web.Infrastructure自定义过滤器、处理程序、属性****

 ****Product.Assembly.Web.Models** 查看模型

**Product.Assembly.Domain** 服务/数据库通信层

当然，上面的测试。**

# java - 带有工具栏和菜单栏的网格包布局

> ID：12152728
> 
> 赞同：1
> 
> 时间：2012-08-28T04:19:42.423
> 
> 标签：java, swing, gridbaglayout, jmenubar, jtoolbar

我的 java 界面有问题，我想显示一个菜单栏和工具栏以及一些标签和文本字段，但是每次我使用 gridbaglayout 它没有显示我的标签以及我的文本字段它只显示我的菜单栏和工具栏你能帮我解决这个问题吗？我在 Mr.G(google) 上搜索了这个问题，但找不到合适的解决方案，我只是 java 的新手，我希望 java 作为我的编程语言用于我的下一个项目。

这是我的代码：

```
 package Forms;
import javax.swing.*;
import java.awt.*;
public class CompleteGridLayout {
    static JFrame frame;
    static JPanel panel, panelData;
    static JMenuBar menuBar;
    static JMenu menuFile, menuSetting, menuOption;
    static JMenuItem itemNew, itemOpen, itemSave, itemPrint, itemOption, itemClose, itemView, itemReports;
    static JToolBar toolBar;
    static Icon iconMenu;
    static JButton barSave, barEdit, barClear, barDelete;
    static ButtonGroup group;
    static JRadioButtonMenuItem subFont1, subFont2, subFont3, subFont4, subFont5;
    static JCheckBoxMenuItem checkPrefer;
    static JLabel label;
    static JTextField textFirst, textMiddle, textLast;
    static JCheckBox checkGender;

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable(){
            public void run()
            {
                gui();
            }
        });
    }
    public static void gui()
    {

        frame = new JFrame("Complete GridBag Layout Interface");
        //frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);

        panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        frame.getContentPane().add(panel);
        CompleteGridLayout myMenu = new CompleteGridLayout();
        myMenu.MyMenuBar();
        myMenu.MyToolBar();

        GridBagConstraints bag = new GridBagConstraints();
        bag.anchor = GridBagConstraints.CENTER;
        bag.gridx = 0;
        bag.gridy = 3;
        panel.add(dataPanel(), bag);

        frame.pack();
        frame.setVisible(true);
    }

    public static JPanel dataPanel()
    {

        panelData = new JPanel();
        label = new JLabel("First Name: ");
        textFirst = new JTextField(10);
        panelData.setLayout(new GridBagLayout());
        GridBagConstraints bagData = new GridBagConstraints();
        int i = 0;
        bagData.gridx = 1;
        bagData.gridy = i;
        bagData.gridwidth = 2;
        bagData.fill = GridBagConstraints.HORIZONTAL;
        panelData.add(textFirst, bagData);

        bagData.gridx = 0;
        bagData.gridy = i;
        bagData.gridwidth = 1;
        bagData.fill = GridBagConstraints.NONE;
        panelData.add(label, bagData);
        i++;
        return panelData;
    }

    public void MyToolBar()
    {   

        toolBar = new JToolBar(JToolBar.HORIZONTAL);
        frame.add(toolBar);

        iconMenu = new ImageIcon(getClass().getResource("icons/save-bar.png"));
        barSave = new JButton("Save", iconMenu);
        toolBar.add(barSave);

        iconMenu = new ImageIcon(getClass().getResource("icons/edit-bar.png"));
        barEdit = new JButton("Edit", iconMenu);
        toolBar.add(barEdit);

        iconMenu = new ImageIcon(getClass().getResource("icons/clear-bar.png"));
        barClear = new JButton("Clear", iconMenu);
        toolBar.add(barClear);

        iconMenu = new ImageIcon(getClass().getResource("icons/delete-bar.png"));
        barDelete = new JButton("Delete", iconMenu);
        toolBar.add(barDelete);
    }
    public void MyMenuBar()
    {
        menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        //Menus
        menuFile = new JMenu("File");
        menuBar.add(menuFile);

        iconMenu = new ImageIcon(getClass().getResource("icons/new.png"));
        itemNew = new JMenuItem("New", iconMenu);
        menuFile.add(itemNew);

        iconMenu = new ImageIcon(getClass().getResource("icons/open.png"));
        itemOpen = new JMenuItem("Open", iconMenu);
        menuFile.add(itemOpen);

        iconMenu = new ImageIcon(getClass().getResource("icons/save.png"));
        itemSave = new JMenuItem("Save", iconMenu);
        menuFile.add(itemSave);

        menuFile.addSeparator();

        iconMenu = new ImageIcon(getClass().getResource("icons/print.png"));
        itemPrint = new JMenuItem("Print", iconMenu);
        menuFile.add(itemPrint);
        menuFile.addSeparator();

        menuSetting = new JMenu("Settings");
        menuFile.add(menuSetting);
        group = new ButtonGroup();

        subFont1 = new JRadioButtonMenuItem("10 Pixel");
        menuSetting.add(subFont1);
        group.add(subFont1);

        subFont2 = new JRadioButtonMenuItem("12 Pixel");
        menuSetting.add(subFont2);
        group.add(subFont2);

        subFont3 = new JRadioButtonMenuItem("14 Pixel");
        menuSetting.add(subFont3);
        group.add(subFont3);

        subFont4 = new JRadioButtonMenuItem("16 Pixel");
        menuSetting.add(subFont4);
        group.add(subFont4);

        subFont5 = new JRadioButtonMenuItem("24 Pixel");
        menuSetting.add(subFont5);
        group.add(subFont5);
        menuSetting.addSeparator();

        checkPrefer = new JCheckBoxMenuItem("Preference");
        menuSetting.add(checkPrefer);
        group.add(checkPrefer);

        iconMenu = new ImageIcon(getClass().getResource("icons/close.png"));
        itemClose = new JMenuItem("Close", iconMenu);
        menuFile.add(itemClose);

        menuOption = new JMenu("Option");
        menuBar.add(menuOption);

        iconMenu = new ImageIcon(getClass().getResource("icons/view.png"));
        itemView = new JMenuItem("View Users", iconMenu);
        menuOption.add(itemView);

        iconMenu = new ImageIcon(getClass().getResource("icons/report.png"));
        itemReports = new JMenuItem("Reports", iconMenu);
        menuOption.add(itemReports);
    }
} 
```

顺便说一句，我仅将一个标签和文本字段用于测试目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:56:14.017

您也可以使用框架的默认值`BorderLayout`，如下所示。

正如@Mad 评论，考虑重构您的代码以减少[实例变量](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)的扩散。

![图片](../Images/90fdeaa4c1429beb4de4dfdc72161372.png)

```
import java.awt.*;
import javax.swing.*;

public class CompleteGridLayout {

    static JFrame frame;
    static JPanel panel, panelData;
    static JMenuBar menuBar;
    static JMenu menuFile, menuSetting, menuOption;
    static JMenuItem itemNew, itemOpen, itemSave, itemPrint, itemOption, itemClose, itemView, itemReports;
    static JToolBar toolBar;
    static Icon iconMenu = UIManager.getIcon("html.pendingImage");
    static JButton barSave, barEdit, barClear, barDelete;
    static ButtonGroup group;
    static JRadioButtonMenuItem subFont1, subFont2, subFont3, subFont4, subFont5;
    static JCheckBoxMenuItem checkPrefer;
    static JLabel label;
    static JTextField textFirst, textMiddle, textLast;
    static JCheckBox checkGender;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                gui();
            }
        });
    }

    public static void gui() {

        frame = new JFrame("Complete GridBag Layout Interface");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);

        CompleteGridLayout myMenu = new CompleteGridLayout();
        myMenu.myMenuBar();
        myMenu.myToolBar();
        frame.setJMenuBar(menuBar);
        frame.add(dataPanel(), BorderLayout.CENTER);
        frame.add(toolBar, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    public static JPanel dataPanel() {

        panelData = new JPanel();
        label = new JLabel("First Name: ");
        textFirst = new JTextField(10);
        panelData.setLayout(new GridBagLayout());
        GridBagConstraints bagData = new GridBagConstraints();
        int i = 0;
        bagData.gridx = 1;
        bagData.gridy = i;
        bagData.gridwidth = 2;
        bagData.fill = GridBagConstraints.HORIZONTAL;
        panelData.add(textFirst, bagData);

        bagData.gridx = 0;
        bagData.gridy = i;
        bagData.gridwidth = 1;
        bagData.fill = GridBagConstraints.NONE;
        panelData.add(label, bagData);
        i++;
        return panelData;
    }

    public void myToolBar() {

        toolBar = new JToolBar(JToolBar.HORIZONTAL);
        frame.add(toolBar);

        barSave = new JButton("Save", iconMenu);
        toolBar.add(barSave);

        barEdit = new JButton("Edit", iconMenu);
        toolBar.add(barEdit);

        barClear = new JButton("Clear", iconMenu);
        toolBar.add(barClear);

        barDelete = new JButton("Delete", iconMenu);
        toolBar.add(barDelete);
    }

    public void myMenuBar() {
        menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        //Menus
        menuFile = new JMenu("File");
        menuBar.add(menuFile);

        itemNew = new JMenuItem("New", iconMenu);
        menuFile.add(itemNew);

        itemOpen = new JMenuItem("Open", iconMenu);
        menuFile.add(itemOpen);

        itemSave = new JMenuItem("Save", iconMenu);
        menuFile.add(itemSave);

        menuFile.addSeparator();

        itemPrint = new JMenuItem("Print", iconMenu);
        menuFile.add(itemPrint);
        menuFile.addSeparator();

        menuSetting = new JMenu("Settings");
        menuFile.add(menuSetting);
        group = new ButtonGroup();

        subFont1 = new JRadioButtonMenuItem("10 Pixel");
        menuSetting.add(subFont1);
        group.add(subFont1);

        subFont2 = new JRadioButtonMenuItem("12 Pixel");
        menuSetting.add(subFont2);
        group.add(subFont2);

        subFont3 = new JRadioButtonMenuItem("14 Pixel");
        menuSetting.add(subFont3);
        group.add(subFont3);

        subFont4 = new JRadioButtonMenuItem("16 Pixel");
        menuSetting.add(subFont4);
        group.add(subFont4);

        subFont5 = new JRadioButtonMenuItem("24 Pixel");
        menuSetting.add(subFont5);
        group.add(subFont5);
        menuSetting.addSeparator();

        checkPrefer = new JCheckBoxMenuItem("Preference");
        menuSetting.add(checkPrefer);
        group.add(checkPrefer);

        itemClose = new JMenuItem("Close", iconMenu);
        menuFile.add(itemClose);

        menuOption = new JMenu("Option");
        menuBar.add(menuOption);

        itemView = new JMenuItem("View Users", iconMenu);
        menuOption.add(itemView);

        itemReports = new JMenuItem("Reports", iconMenu);
        menuOption.add(itemReports);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:02:54.103

好的，我已经修改了你的代码，所以它是有意义的（至少对我来说）......

```
panel = new JPanel();
panel.setLayout(new GridBagLayout());
getContentPane().add(panel);
createMenuBar();
// Your problem is here.  This will add the toolbar to the contentPane, 
// removing the "panel" that you previously added...
createToolBar();

GridBagConstraints bag = new GridBagConstraints();
bag.anchor = GridBagConstraints.CENTER;
bag.gridx = 0;
bag.gridy = 3;
panel.add(dataPanel(), bag); 
```

这是工具栏

```
public void createToolBar() {
    toolBar = new JToolBar(JToolBar.HORIZONTAL);
    add(toolBar); // This works like getContentPane().add(toolBar); 
```

# php - ABBYY 云 ocr - 转换为文本

> ID：12152730
> 
> 赞同：0
> 
> 时间：2012-08-28T04:20:02.693
> 
> 标签：php, ocr, typeconverter

我尝试使用此转换为文本：[http ://cloud.ocrsdk.com/processImage?language=english&exportFormat=txt](http://cloud.ocrsdk.com/processImage?language=english&exportFormat=txt)

有趣的是产生的结果是不同的。

当我对其进行编码以将输出转换为 .txt 文件并下载它时，如果我在浏览器上输出它们，我会看到更多的内容。有什么理由吗？

我正在使用来自网站[http://ocrsdk.com/documentation/code-samples/PHP.zip](http://ocrsdk.com/documentation/code-samples/PHP.zip)的 php 示例。

知道哪里出了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:16:09.893

此问题已在[ABBYY Cloud OCR SDK 支持论坛上](http://forum.ocrsdk.com/questions/380/ocr-to-text-output)回答。

# ios - iOS 应用内购买沙盒环境

> ID：12152732
> 
> 赞同：4
> 
> 时间：2012-08-28T04:20:20.007
> 
> 标签：ios, in-app-purchase

我在测试我**的应用内购买**时遇到问题，因为当我测试时，我收到此错误消息：- `Verification Required: before you can make purchases, you must verify your payment info [Environment: Sandbox]`。

**UIAlertView**中显示了两个按钮**：取消**和**继续**..当我点击“继续”按钮时，我被重定向到 safari 并按照验证步骤进行操作，但随后我也收到了“**取消交易**”事件。

任何人都可以建议该怎么做？任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T05:09:03.607

inAp购买测试的一些建议

1.  不适用于模拟器。
2.  您需要从您设备中的 Store 选项中退出来测试 inAp
3.  InAp 购买产品 ID、TestUserId、Bundle Id - 应该来自同一个开发者帐户。

# image-processing - 如何检测图像中的特定目标“标志”，当它可能被扭曲？

> ID：12152735
> 
> 赞同：2
> 
> 时间：2012-08-28T04:20:42.617
> 
> 标签：image-processing, computer-vision, detection, object-detection

假设我的数据库中有所有这些商业产品的标志（它们只是图像），并且我在现实世界中拍摄这些标志的照片，我怎样才能使我的程序能够在我的照片中检测到这样的标志？约束是：

例如，一名足球运动员可能穿着一件印有可口可乐标志的衬衫，而他的衬衫上到处都是皱纹，从而使标志变形。以下是它的外观示例。左边是原版，右边是变形版：

![标志测试 C](../Images/c6fa40dd9e76bd79e3f826838aac28e5.png)

另一个例子是我拍了一张正前方街道的照片，在照片中，人行道上有一个麦当劳标志，从照片的角度来看，人行道上的这个麦当劳标志可能看起来像右边的“M”，而左侧的“M”是原始图像：

![标志测试 M](../Images/1104735cbea95663a20cc0a5496b6ba6.png)

因此，鉴于这些限制，徽标在现实世界中可能会以任何方式变形，但当然，如果照片中的徽标变形到我们无法想象的程度，那就超出了范围。但是，如果有标志的原始“气味”，那应该是可能的，不是吗？

在这种情况下，如何检测照片中的徽标？我应该寻找哪些算法或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:02:54.530

这更像是一项机器学习任务。在尽可能多的扭曲视图中获取一些徽标示例图像。然后训练一些物体检测器来为你找到标志。

您可能需要考虑的事项

*   你需要大量的训练数据来做到这一点。您可能希望生成合成（镜像）失真以获得足够的训练数据

*   关于目标检测的文献有很多不同的算法。没有开箱即用的解决方案。尝试几种算法，我会从一袋词开始，或 SVM

*   您可能必须执行“滑动窗口”检测样式才能在图像中找到徽标。将徽标视为要在一堆数据中检测的 2D 模式

祝你好运！

# jquery - 如何删除 p br

> ID：12152739
> 
> 赞同：1
> 
> 时间：2012-08-28T04:21:07.387
> 
> 标签：jquery

从下面的代码如何通过 jquery 或 php 删除所有 p 和 br。

```
<div id="wpwhoisinside-2">
<div class="swWrap" id="wpwhoisdiv">
<form method="post" style="margin: 0px;" action="#void" onsubmit="wpwhoisform('2'); return false;" name="wpwhoisform2" id="wpwhoisform2">
<p>                         <input type="hidden" id="wpwhoiswidget2" value="Y" name="widget"><br>
                <input type="hidden" value="2" name="number"></p>
<div class="swForm">
                <input type="text" onfocus="this.select();" value="domain" class="swDomain" name="domain" id="wpwhoisdomain2"><br>
                                    <b>.</b><p></p>
<select name="tld" class="swtld">
<option selected="" value="com">com</option>
<option value="com.sg">com.sg</option>
<option value="com.my">com.my</option>
<option value="cl">cl</option>
<option value="ch">ch</option>
<option value="se">se</option>
<option value="net">net</option>
<option value="org">org</option>
<option value="info">info</option>
<option value="biz">biz</option>
<option value="us">us</option>
<option value="co.uk">co.uk</option>
<option value="org.uk">org.uk</option>
<option value="org.my">org.my</option>
<option value="ltd.uk">ltd.uk</option>
<option value="ca">ca</option>
<option value="cc">cc</option>
<option value="edu">edu</option>
<option value="com.au">com.au</option>
<option value="net.au">net.au</option>
<option value="net.my">net.my</option>
<option value="de">de</option>
<option value="ws">ws</option>
<option value="sc">sc</option>
<option value="nl">nl</option>
<option value="be">be</option>
<option value="eu">eu</option>
<option value="co.il">co.il</option>
<option value="co.th">co.th</option>
<option value="org.il">org.il</option>
<option value="mobi">mobi</option>
<option value="asia">asia</option>
<option value="tel">tel</option>
<option value="me">me</option>
<option value="my">my</option>
<option value="tv">tv</option>
<option value="mx">mx</option>
<option value="co.za">co.za</option>
<option value="fr">fr</option>
<option value="ie">ie</option>
<option value="it">it</option>
<option value="jp">jp</option>
</select>
<div class="wpwhoissecureimage">
        8 + 7 =     <input type="text" value="" style="width:25px; font-size:10px; font-weight:bold;" name="total"><br>
        <input type="hidden" value="9bf31c7ff062936a96d3c8bd1f8f2ff3" name="hashtotal">
        </div>
<div><input type="submit" class="swSubmit ui-button ui-widget ui-state-default ui-corner-all" value="Check Domain" name="lookup" role="button" aria-disabled="false"></div>
<div class="swInfo"></div>
<p></p></div>
<p></p></form>
<p></p></div>
<p><script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('.swSubmit').button();
});
</script></p>
</div> 
```

我试过这个

```
<script language='javascript'>
$("#wpwhoisinside-2 p").remove();
$("#wpwhoisinside-2 br").remove();

</script> 
```

但是对于里面的 p 内容`<input type="hidden" id="wpwhoiswidget2" value="Y" name="widget">`也一样删除。但我只想单独删除 p 和 br 标签。请你们帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:26:13.360

尝试：

```
$("#wpwhoisinside-2 p > *").unwrap("<p></p>");
$("#wpwhoisinside-2 br").remove(); 
```

除此之外，如果您想删除空的 p 标签，则添加到第二行：

```
$("#wpwhoisinside-2 br, p:empty").remove(); 
```

# java - 如果使用 SwingWorker 加载数据，何时将 TabelModel 绑定到 JTable？

> ID：12152742
> 
> 赞同：3
> 
> 时间：2012-08-28T04:21:18.430
> 
> 标签：java, swing, jdbc, jtable, swingworker

我正在使用 SwingWorker 使用此处建议的方法通过自定义 TableModel 将数据库中的数据加载到我的 JTable 中：[How to fill data in a JTable with database?](https://stackoverflow.com/questions/2192764/how-to-fill-data-in-a-jtable-with-database) . 如果我在继续处理 SwingWorker 中的 ResultSet 之前绑定我的 TableModel，我最终会在表模型中得到一个空列表，并且 JTable 会抱怨。如果我在调用 SwingWorker 后绑定模型，我的 JTable 会错过一些由该`publish`方法触发的回调以更新表中的行。这是我的代码的样子：

```
class MyTableModel{
 ResultSet rs;
 //Row is an intenral row object that is obtained after processing resultset  
 List<Row> data

 MyTableModel(){
 //initalise the row, rs etc;
 } 

 public void updateData(List<Row> r){
    data.addAll(r);
 }

 //called as a callback by another class that manages the queries
 public void processResults(ResultSet rs){
   new SwingWorker<Void,Row>(){
    doInBackground(){
     //process row by row
     publish(row);
    }
    public void process(List<Row> chunks){
       updateData(chunks);
       fireTableDataChanged();
    }
   }.execute();
 }

} 
```

这就是我现在设置表格模型的方式

```
MyTableModel m = new MyTableModel();
//pass m as callback to the database manager which invokes processResults() on m
dbm.makeQuery("SELECT bit,pat from bot;",m);
table.setModel(m); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:36:47.427

首先，我（个人）不会真正`fireTableDataChanged()`为此使用方法，它需要`JTable`完全重新绘制本身（包括列）。随着数据集的增长，这将大大增加重绘时间......

```
public void updateData(List<Row> r){
    int firstRow = getRowCount();
    data.addAll(r);
    int lastRow = getRowCount() - 1;

    fireTableRowsInserted(firstRow, lastRow);

} 
```

# c# - 在 MVC 3 中实现 Windows azure 服务总线主题/订阅？

> ID：12152755
> 
> 赞同：1
> 
> 时间：2012-08-28T04:23:59.450
> 
> 标签：c#, asp.net, asp.net-mvc-3, azure, servicebus

这是场景：我们正在实现一个应用程序，它允许用户与本地端点“通信”。我们正在做一些研究，**Windows Azure 服务总线主题**似乎是一个不错的选择，因为它可以帮助我们创建双向通信并帮助我们解决防火墙、NAT 设备的问题。但是，由于用户通过无状态 Web 应用程序（在本例中为 MVC 3）与机器交互，因此不接受在每个请求上
重新创建**TopicClient 。**
由于每个用户都有自己的端点，因此按照某人的建议共享一个**TopicClient**也是行不通的。
另一种方法是使用**会话**为每个用户保留 TopicClient，但对于无状态并托管在 Windows Azure Web 应用程序上，使用会话似乎不是一个好的选择。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:32:52.260

客户端和服务之间的实际连接存在于 MessagingFactory 级别，从该工厂创建的所有 TopicClient 对象将共享相同的连接。因此，您可以根据需要缓存 MessagingFactory 和/或任意数量的 TopicClients。此外，这些对象是线程安全的，因此可以由不同的消费者同时共享和使用。

# android - PROXIMITY_SCREEN_OFF_WAKE_LOCK 导致音频播放问题

> ID：12152756
> 
> 赞同：1
> 
> 时间：2012-08-28T04:24:00.703
> 
> 标签：android

我正在开发一个 VOIP 应用程序，我使用 PROXIMITY_SCREEN_OFF_WAKE_LOCK 唤醒锁，如下图所示。

我注意到在许多设备上，当接近传感器打开并且屏幕变黑时，我的应用程序的音频播放就会停止。这发生在 HTC、LG 和华为设备上。

是否需要做一些额外的事情来防止在传感器被触发时停止音频播放？我在其他 VOIP 应用程序（例如 Skype）上注意到了同样的问题。

```
int PROXIMITY_SCREEN_OFF_WAKE_LOCK = 32;    
mProximityWakeLock = pm.newWakeLock(PROXIMITY_SCREEN_OFF_WAKE_LOCK, "myLock");
if(!mProximityWakeLock.isHeld()){
    mProximityWakeLock.acquire();
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T09:18:04.640

我们遇到了同样的问题。我们真正检测到的是，当使用 WakeLock 关闭屏幕时，输入套接字停止接收数据，因此我们向 AudioTrack 发送了零。

为了改善这一点，我们停止使用 PROXIMITY_SCREEN_OFF_WAKE_LOCK，现在使用 SensorManager（我们查看了 Linphone 代码）：

```
public class InCallActivity extends Activity implements SensorEventListener {

    private SensorManager mSensorManager;
    private Sensor mProximity;

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }

    public void onSensorChanged(SensorEvent event) {
        final Window window = getWindow();
        WindowManager.LayoutParams lAttrs = getWindow().getAttributes();
        View view = ((ViewGroup) window.getDecorView().findViewById(android.R.id.content)).getChildAt(0);
        if (event.values[0] > 4) {
            // turn on screen
            Log.v("LlamadaActivity", "Encendemos pantalla");
            lAttrs.flags &= (~WindowManager.LayoutParams.FLAG_FULLSCREEN);
            view.setVisibility(View.VISIBLE);
        }
        else {
            // turn off screen
            Log.v("LlamadaActivity", "Apagamos pantalla");
            lAttrs.flags |= WindowManager.LayoutParams.FLAG_FULLSCREEN;
            view.setVisibility(View.INVISIBLE);
        }
        window.setAttributes(lAttrs);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        mProximity = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
        mSensorManager.registerListener(this, mProximity, SensorManager.SENSOR_DELAY_NORMAL);

        // Para que la pantalla no se apague, y que la encienda aunque este apagada y bloqueada
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        //
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mSensorManager.unregisterListener(this);
    }
} 
```

# android - 防止异步任务的多个实例，或创建持久布尔值

> ID：12152761
> 
> 赞同：0
> 
> 时间：2012-08-28T04:25:24.157
> 
> 标签：android, android-asynctask, android-activity

我的目标是特定活动的 onCreate 将开始运行异步任务“BackgroundTask”。我想确保在任何给定时间只有一个 BackgroundTask 会运行，所以在调用 .execute 之前，我想先检查一个布尔值是否被触发以指示另一个已经在运行。

我希望这个异步任务能够永久运行，即使应用程序当前不在屏幕上。只有当用户按下按钮结束它时，它才应该关闭，或者可能强制关闭整个事物。

问题：

我可以通过转到主屏幕或进一步进入或移出我的应用程序中的所有活动来创建一个布尔值，该布尔值将永远不会被重置？
我不太了解 Android 何时或为何会丢失应用程序中保存的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:34:25.870

您可以将此布尔值保存在您的首选项中，如下所示：

```
 boolean booleanValue = true;
    String somePreferencesKey = "SOME_PREFERENCES_KEY";
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);
    pref.edit().putBoolean(somePreferencesKey, booleanValue).commit(); 
```

然后，在将来的任何时候，您都可以从保存的首选项中获取保存的布尔值，如下所示：

```
 boolean booleanValue;
    String somePreferencesKey = "SOME_PREFERENCES_KEY";
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);
    booleanValue = pref.getBoolean(somePreferencesKey, false); 
```

希望这能解决您的问题。

谢谢，

穆罕默德。

# c# - Sharepoint 工作流部署错误 basepackagepath

> ID：12152762
> 
> 赞同：1
> 
> 时间：2012-08-28T04:25:34.157
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010, workflow

在 sharepoint 2010 中部署工作流时出现此错误

**部署步骤“撤消解决方案”中发生错误：找不到此必需的项目属性或值为 null 或空字符串：BasePackagePath**

它的构建很好，我尝试收回，它也成功了。

我正在使用 Visual Studio 进行部署。

谁能告诉我基本路径的价值是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:05:19.953

我发现问题是由于我必须使用远程管理员帐户来部署它的权限。

这是错误“CompileWorkflowTask”任务意外失败。System.NotSupportedException：不支持给定路径的格式。

所以经过一番搜索，我想出了这个[链接](http://microsoftdev.blogspot.com/2009/04/workflow-compilation-error.html)

但它已经建成，但在我的问题中显示了错误

但第一个是错误。您需要管理员权限才能部署它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-03T12:07:26.767

您可以在与 SharePoint 项目文件位于同一目录中的 .user 文件中添加 BasePackagePath。

在我的用户文件中，缺少以下条目。在 siteurl 下面添加这些属性后，我可以部署项目。您可以使用例如记事本更改此设置。

```
 <?xml version="1.0" encoding="utf-8"?>
    <Project ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
      <PropertyGroup>
        <SharePointSiteUrl>http://siteurl:9425/</SharePointSiteUrl>
        <ProjectView>ShowAllFiles</ProjectView>
        <BasePackagePath>bin\Debug</BasePackagePath>
        <LayoutPath>pkg\package</LayoutPath>
      </PropertyGroup> 
```

# php - 使用 lint 进行 PHP 语法检查以及如何在字符串而非文件上执行此操作

> ID：12152765
> 
> 赞同：8
> 
> 时间：2012-08-28T04:26:00.437
> 
> 标签：php, command-line, syntax-error

首先，我对如何在命令行中运行 PHP 感到困惑。我一直在网上阅读几篇文章，他们都说您需要一个 CLI（命令行界面）。

基本上，我有 PHP 文件，我想这样调用：

```
php -l somefile.php 
```

但我想检查一个*字符串*，而不是一个文件！如何才能做到这一点？使用*STDIN*、*STDOUT*或*STDERR*可以帮助解决这个问题吗？

如果是这样，怎么做？有人可以在这里提供一个例子吗？

另外，我在哪里放置上面的代码？我无法访问命令行（我不认为），或者我只是将它放在将运行的 PHP 文件本身中？在这种情况下，它会在命令行中执行此代码吗？

我完全不知道这个 PHP 命令行是如何工作的……有人可以帮我解释一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-14T22:07:45.440

您可以`php -l`通过管道检查来自 STDIN 的代码。示例：

```
$ echo "<?php echo 'hello world'" | php -l

Parse error: syntax error, unexpected end of file, expecting ',' or ';' in - on line 2

Errors parsing - 
```

`;`这里在单引号字符串之后缺少结束分号。如果你添加它，错误就会消失，PHP 会告诉你：

```
$ echo "<?php echo 'hello world';" | php -l
No syntax errors detected in - 
```

`-`中 的破折号`Errors parsing -`或`No syntax errors detected in -`代表 STDIN。它通常用于此目的。

另一种方法是编写您自己想要 lint 的代码（或复制并粘贴它）。这通过使用 lint 开关来工作`--`，输入代码并通过在自己的一行上输入`Ctrl + D`(Linux) / `Ctrl + Z`(Win) 来完成它：

```
$ php -l --
<?php echo "1"
^Z

Parse error: syntax error, unexpected end of file, expecting ',' or ';' in - on line 2

Errors parsing - 
```

顺便说一句，`-r`通常用于提供执行代码的开关在这种情况下不起作用并给出错误：

```
$ php -l -r "echo 1"
Either execute direct code, process stdin or use a file. 
```

很可能是因为它用于运行代码，仅此而已，没有 linting。它也没有打开 PHP 标记。

* * *

从所有这些选项中，如果您想通过管道输入第一个选项可能最有意义（如果[`proc_open`](http://php.net/proc_open)您需要更多控制，您也可以使用它进行操作）。这是一个使用 PHP 的简单示例`exec`：

```
<?php
/**
 * PHP Syntax Checking with lint and how to do this on a string, NOT a FILE
 *
 * @link http://stackoverflow.com/q/12152765/367456
 * @author hakre
 */

$code = "<?php echo 'hello world'";

$result = exec(sprintf('echo %s | php -l', escapeshellarg($code)), $output, $exit);

printf("Parsing the code resulted in; %s\n", $result);

echo "The whole output is:\n";

print_r($output); 
```

输出如下：

```
Parsing the code resulted in; Errors parsing -
The whole output is:
Array
(
    [0] => 
    [1] => Parse error: syntax error, unexpected '"', expecting ',' or ';' in - on line 1
    [2] => Errors parsing -
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T04:32:06.887

如果你想要 lint 代码（不在文件中），唯一的选择是编写一个包装器。

假设你的 $HOME/bin 在 /usr/bin 之前，你可以在 $HOME/bin/php 中安装你的包装器，它有一个不同的命令行 linting 选项。包装器将创建一个临时文件，将代码放在那里，运行`/usr/bin/php -l file`然后删除临时文件。

HTH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-02T21:52:20.953

我建议检查一下[phpstan](https://github.com/phpstan/phpstan)。它是一个用 PHP 构建的 linter，工作起来很像 phpunit，但用于 linting 代码。您可以编写配置、控制 linting 级别以及包含/忽略文件夹。

它也有正确的退出代码。

[https://github.com/phpstan/phpstan](https://github.com/phpstan/phpstan)

如果无法使用，我[在这里使用了这个脚本](https://gist.github.com/mathiasverraes/3096500#gistcomment-1575416)，它运行良好。

# java - 尝试创建新实例时出现 Java InstantiationException

> ID：12152768
> 
> 赞同：2
> 
> 时间：2012-08-28T04:26:36.280
> 
> 标签：java, instantiationexception

我正在尝试从文件夹加载类文件，以便用户可以与我的程序进行交互。用户应该能够扩展我创建的抽象类并将其放入文件夹中，但是每当我尝试加载一个类（我创建的，所以我知道它是正确的）时，它都会给我一个 InstantiationException。这是堆栈跟踪片段和发生错误的片段

```
[9:09:22 PM] Jav:         23:03:40 [SEVERE] java.lang.InstantiationException: UchihaClan
23:03:40 [SEVERE]       at java.lang.Class.newInstance0(Unknown Source)
23:03:40 [SEVERE]       at java.lang.Class.newInstance(Unknown Source)
23:03:40 [SEVERE]       at com.zavcoding.narutorpg.Classes.ClassLoader.load(ClassLoader.java:52)
23:03:40 [SEVERE]       at com.zavcoding.narutorpg.NarutoRPG.onEnable(NarutoRPG.java:38)

Class<?> clazz = loader.loadClass(name);
Object object = clazz.newInstance();
if (!(object instanceof UserMadeClass)) {
    System.out.println("Not a valid user class.");
    continue;
}
UserMadeClass umc = (UserMadeClass) object; 
```

# php - PHP在行和列中打印一个值

> ID：12152770
> 
> 赞同：0
> 
> 时间：2012-08-28T04:26:49.083
> 
> 标签：php, arrays, printing, expression

我正在使用此代码查询我的数据库（显示部分代码）：

在后端，我使用 ExpressionEngine、Matrix、Cartthrob 和 DataGrab

我正在使用 MySQL 和 PHP 编写代码

```
foreach($retailprices->result_array() as $row)
{
print_r($row); 
```

这是结果：

```
Array ( [row_order] => 1 [col_id_3] => 3.500 ) 
Array ( [row_order] => 2 [col_id_3] => 12.95 ) 
Array ( [row_order] => 3 [col_id_3] => 37.45 ) 
```

我想将 3.500、12.95 和 37.45 提取到一个数组中

然后我想使用数组一一打印它们。输出应如下所示：

```
3.500
12.95
37.45 
```

请有人指导我解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:42:05.703

```
foreach ($row as $out) 
{
print "$out"."<br>";
} 
```

这将打印数组。

输出将是

```
3.500
12.95
37.45 
```

这是你想要的？

**编辑 ：**

```
foreach($retailprices->result_array() as $row)
{
 print($row[col_id_3]); // assuming col_id_3 is the column name
} 
```

**编辑 2：**

```
foreach($retailprices->result_array() as $row)
{
 $blah=$row[col_id_3]; 
}

echo $blah[0]; // 3.500
echo $blah[1]; // 12.95
echo $blah[2]; // 37.45 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:43:16.377

您的输出对您的代码没有多大意义。打印 "$key ==> $val\n"; 有一个换行符，但你的输出没有。行首的 01 是从哪里来的？

**编辑**

```
$array = array();

foreach($retailprices->result_array() as $row)
    $array[] = $row['col_id_3'];

foreach($array as $a)
    echo $a."<br>"; 
```

# c - 无法理解 c 中二维数组中的寻址

> ID：12152772
> 
> 赞同：3
> 
> 时间：2012-08-28T04:27:25.683
> 
> 标签：c, arrays, 2d

```
main()
{
    int a[3][2] = { {1,2},{3,4},{5,6}};
    for(int i=0;i<3;i++)
        for(int j=0;j<2;j++)
    {
        printf("%d", a[i][j]);
        printf("\t %d\n", &a[i][j]);
    }
    printf("\n%d", *(a+1));
    printf("\n%d", *a+1);
} 
```

> *(a+1) 的输出与 *a+1 不同。
> 
> *(a+1) 指向第三个元素，而
> 
> *a+1 输出第二个值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T04:35:50.067

> *(a+1) 的输出与 *a+1 不同。

是的，由于[运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)。 `*a + 1`方法...

> 取消引用`a`（返回一个`int`）并添加`1`到它。返回结果 ( `2`)

然而，`*(a + 1)`说...

> 添加`1`到*指针* `a`并取消引用它，即获取地址处的值`a + sizeof(int[2])`。

"value* 恰好是第二个数组的第一个元素。请记住；将*n*添加到指针类型会使地址前移*n 个元素*`int`。在这种情况下，每个元素都是一个具有自己的两个元素的数组。

这也应该回答接下来的两个问题。读完运算符优先级后，开始学习[指针算法](http://boredzo.org/pointers/#arithmetic)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T04:43:08.380

C 并没有真正的多维数组，它有数组的数组。`int a[3][2]`声明一个 3 元素数组，其元素是 2 维整数数组。

指针算术考虑了这一点，它增加了指针指向的对象的大小。所以`(a+1)`计算出 的第二个元素`a`，它是指向数组的指针`{3, 4}`。通过这个指针间接获得它的第一个元素，即 3。

`*a`另一方面，通过指向 的第一个元素的指针进行间接寻址`a`，其计算结果为 1。然后当您将 1 添加到此时，您会得到 2。它实际上并没有返回第二个元素，它只是看起来像它，因为 1+1 = 2 . 尝试将您的初始化更改为：

```
int a[3][2] = { {1,3},{5,7},{9,11}}; 
```

你的输出将是 5 和 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:34:51.907

您应该阅读有关运算符优先级的信息。在第二种情况下，一元运算符比二元`*a+1`运算符绑定更多。因此，该操作被视为将 1 指向的值加一。`*``+``a`

在前一种情况下`*(a+1)`，您正在处理指向的下一个元素`a`并取消引用它以获得它的值。

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T18:03:37.290

对，那是正确的。因为 2D 数组表示 1D 数组的数组。在这种情况下 `a[3][2] = { {1,2},{3,4},{5,6}}`，在数组名称中，即**a**充当数组的第零个元素。由于我们的二维数组的第 0 个元素是 2 个整数 {1,2} 的一维数组。因此，`(a+1)`指的是二维数组的第一个元素的地址，`{3,4}`因此 *(a+1) 给出了该地址的值，即 3。 While,*a 提供对第一个元素的访问权限，然后将其增加一并给出 2。

# c# - 重新排列树节点并将其保存回带有 EF 的自引用表中

> ID：12152779
> 
> 赞同：0
> 
> 时间：2012-08-28T04:28:58.263
> 
> 标签：c#, entity-framework, self-reference, tree-structure, self-referencing-table

我有一个自引用表结构，与 EF 一起工作得很好，我用它来渲染树视图。EF 实体如下所示，我急切地加载了整个结构。

```
class ListItem
{
  int Id;
  string Text;
  ListItem ParentItem;
  IList<ListItem> ChildItems;
} 
```

然后我在 UI 上添加了将新子节点添加到任何节点并使用 jQuery 重新排列节点的功能。更新后的结构使用相同的实体存储在会话中。

当我想使用 EF 将其保存回来时，我遇到了问题，因为我将它保存在另一个实体中，如下所示，并且`MainEntity`每当我想更新树时，我都会保存（更新）它。

```
class MainEntity
{
  ..
  ..
  IList<ListItem> Tree;
} 
```

如何使用会话中的值更新此 Tree 属性并告诉 EF 保存它？如何更改该结构的父母和孩子以匹配新结构？

我正在考虑使用命令模式来记录 UI 的每个操作，并稍后在保存时在 EF 实体上重播它们。但这看起来有点矫枉过正:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:06:26.503

经过几天徒劳地尝试不同的事情后，我终于实现了命令模式并让它按预期工作。

我为添加、更新、删除和重新排序 UI 操作实现了以下命令界面，并将它们填充到驻留在会话中的集合中。

```
public interface ITreeCommand
{
    void Execute(ICollection<ListItem> finalList, MainEntity source, ModelContainer db, ICollection<Guid> deletedIds);
} 
```

然后在保存时，我执行这些命令以传递必要的参数。我必须`db.SaveChanges()`在每个执行方法实现中调用。我必须单独保留已删除的节点 ID，因为我可以通过在执行之前检查此列表来跳过任何不必要的添加、更新或重新排序。

希望有一天这对某人有所帮助。

# webview - QML：如何在 WebView 元素中更改请求的用户代理

> ID：12152785
> 
> 赞同：3
> 
> 时间：2012-08-28T04:30:46.230
> 
> 标签：webview, qml, qwebview

是否可以将 QML 中的 WebView 元素发送的 HTTP 请求中的默认**用户代理**更改为，例如“chrome ....”或其他内容？在**QWebView**类中，您可以重新实现***userAgentForUrl***虚函数。但我不确定这是否可能。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:26:59.833

您可以子类化`QNetworkAccessManager`以创建具有适当标头的请求。

自定义网络访问管理器可以注册`QDeclarativeEngine::setNetworkAccessManagerFactory()`

编辑：

注意，在 QtQuick API 中是 . `QDeclarativeEngine::setNetworkAccessManagerFactory`，但在 Qt5/QtQuick2 中是`QQmlEngine::setNetworkAccessManagerFactory`.

请参阅[C++ 扩展：网络访问管理器工厂示例](http://doc.qt.io/qt-5/qtqml-networkaccessmanagerfactory-example.html)

# jmeter - 负载测试基于客户端-服务器的 Windows 应用程序

> ID：12152788
> 
> 赞同：0
> 
> 时间：2012-08-28T04:31:33.343
> 
> 标签：jmeter, performance-testing, loadrunner

我想知道的是：我想对基于客户端服务器协议的 Windows 应用程序进行负载测试。我可以使用 Jmeter 或 LoadRunner 吗？

如果是：为了更好地理解我的查询，我还需要向您提供哪些其他信息？

等待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:56:34.333

您的测试能力取决于您的应用程序的通信架构。LoadRunner 支持许多开箱即用的接口，而使用 JMETER，您将拥有更多的编程路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:21:39.877

这取决于你想测试什么。

JMeter 将让您测试客户端-服务器流量和负载下的服务器行为。但是，例如，如果它是这样的（或 http 协议），您将不得不编写 tcp 协议。这实际上取决于您的应用程序使用哪种客户端服务器协议，但如果它是基于二进制的协议，那么您将需要编码或找到一个进行编码/解码的插件。

其他测试工具使用基于窗口捕获的测试方法，可以捕获点击的位置，这可以使它们支持更多协议，因为它们仅依赖于客户端捕获，但如果例如按钮位置移动，则会使场景在时间上不太稳定。但有时你别无选择。

# sql-server-2008 - SQL Server AutoIncrement 因另一个字段的值而异

> ID：12152790
> 
> 赞同：1
> 
> 时间：2012-08-28T04:31:52.750
> 
> 标签：sql-server-2008, auto-increment

使用 SQL Server 2008 R2 我想要一个表（已经在 2 列上有一个主键），其中第三列是基于主键的两列之一的自动增量。

换句话说，我想**在向表中添加新记录时**，有一个自动递增的文件`AIfield`，如下所示：

```
 PK1 PK2  AIfield 
  ------------------
  1   A     1
  1   B     2
  1   C     3
  2   A     1
  2   B1    2
  2   B2    3
  2   C1    4 
```

其中 PK1 和 PK2 是主键的两个字段。

我不想使用明显的`MAX(Afield)+1`方法，因为我很可能必须为同一个 PK1 进行并发插入——这迟早会在 AIfield 中为同一个 PK1 创建重复项。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:37:12.963

```
select pk1,pk2,ROW_NUMBER() over (partition by pk1,pk2 order by (select 0)) as AIfield
from yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:36:51.233

使用以下查询：

```
Select PK1, PK2, ROW_NUMBER() over (partition by PK1 order by PK1, PK2) as AIfield
From yourtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T04:57:22.297

好吧，一种方法可能是在 PK1 和 AIfield 上创建一个唯一索引

```
CREATE UNIQUE NONCLUSTERED INDEX [test] ON [Table] 
(
[AIfield] ASC,
[PK1] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF,  
IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, 
 ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

并处理违反唯一性的行为

```
DECLARE @inserted BIT=0
DECLARE @AIfield BIGINT
SELECT @AIfield=MAX(AIfield)+1 FROM Table WHERE PK1=@PK1
WHILE @inserted=0
BEGIN
 BEGIN TRY
  INSERT INTO Table(AIfield,PK1,PK2)
  SELECT  @AIfield,@PK1,@PK2
  SET @inserted=1
 END TRY
 BEGIN CATCH
    IF ERROR_NUMBER()=2601
     BEGIN
     SET @AIfield=@AIfield+1
     END
    ELSE SET @inserted=1
 END CATCH
END 
```

不过，我想知道是否有一种更原生的 SQL 方法

# jquery - jQuery 获取 JSON 数据

> ID：12152792
> 
> 赞同：2
> 
> 时间：2012-08-28T04:32:03.940
> 
> 标签：jquery, json

有人可以帮我用 JQuery 获取 JSON 吗？我想我在我的 JQuery 代码中犯了一些错误。任何帮助将不胜感激。下面是我的 JSON 和 JQuery：

JSON：

```
{
    "video": [
        {
            "id": "12312412312",
            "name": "Ecuaciones Diferenciales",
            "url": "/video/math/edo/12312412312",
            "author": {
                "data": [
                    {
                        "name_author": "Alejandro Morales",
                        "uri": "/author/alejandro-morales",
                        "type": "master"
                    }
                ]
            },
            "comments": {
                "data": [
                    {
                        "id": "367501354973_12216733",
                        "from": {
                            "name": "Doug Edwards",
                            "id": "628675309"
                        },
                        "message": "Make sure you don't, as they say, go whole hog...\nhttp://www.youtube.com/watch?v=U4wTFuaV8VQ",
                        "created_time": "2010-03-06T03:24:46+0000"
                    },
                    {
                        "id": "367501354973_12249673",
                        "from": {
                            "name": "Tom Taylor",
                            "id": "1249191863"
                        },
                        "message": "Are you and Karen gonna, as they say, pig out?",
                        "created_time": "2010-03-06T21:05:21+0000"
                    },
                    {
                        "id": "367501354973_12249857",
                        "from": {
                            "name": "Sheila Taylor",
                            "id": "1315606682"
                        },
                        "message": "how did it turn out? Sounds nummy!\n",
                        "created_time": "2010-03-06T21:10:30+0000"
                    }
                ]
            }
        },
        {
            "id": "12312412311",
            "name": "Ecuaciones Diferenciales : El arte de las diferenciaciones",
            "url": "/video/math/edo/1231241231212",
            "author": {
                "data": [
                    {
                        "name_author": "Alejandro Morales",
                        "uri": "/author/alejandro-morales",
                        "type": "master"
                    }
                ]
            },
            "comments": {
                "data": [
                    {
                        "id": "367501354973_12216733",
                        "from": {
                            "name": "Doug Edwards",
                            "id": "628675309"
                        },
                        "message": "Make sure you don't, as they say, go whole hog...\nhttp://www.youtube.com/watch?v=U4wTFuaV8VQ",
                        "created_time": "2010-03-06T03:24:46+0000"
                    },
                    {
                        "id": "367501354973_12249673",
                        "from": {
                            "name": "Tom Taylor",
                            "id": "1249191863"
                        },
                        "message": "Are you and Karen gonna, as they say, pig out?",
                        "created_time": "2010-03-06T21:05:21+0000"
                    },
                    {
                        "id": "367501354973_12249857",
                        "from": {
                            "name": "Sheila Taylor",
                            "id": "1315606682"
                        },
                        "message": "how did it turn out? Sounds nummy!\n",
                        "created_time": "2010-03-06T21:10:30+0000"
                    }
                ]
            }
        }
    ]
} 
```

jQuery 代码

```
var url = 'result.json';
$(document).ready(function() {
    $.getJSON(url, function(data) {
        $.each(data, function(video, data) {
            $('#stage').html('<p> ID:' + data.video + '</p>');
            $('#stage').append('<p Name: ' + data.name+ '</p>');
            $('#stage').append('<p> URL: ' + data.url+ '</p>');

            console.log("========================");
            console.log(data);

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T04:39:16.813

我 *猜*你正在尝试遍历`video`数组中作为`data`对象属性的每个项目，因为在你的`$.each()`循环中你试图访问`.video`,`.name`和`.url`属性。所以而不是：

```
 $.each(data, function(video, data) { 
```

...循环遍历 的每个顶级属性`data`，请尝试：

```
 $.each(data.video, function(video, data) { 
```

...循环遍历`data.video`数组中的项目。

此外，鉴于该回调中的两个参数是当前项目索引和当前项目，我可能会将参数从`video`和重命名`data`为`i`和`item`。调用不同的变量有点令人困惑`data`（一个是`$.getJSON()`回调的参数，另一个是回调的参数`$.each()`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T04:47:39.647

您正在尝试迭代整个 JSON 对象 - 您应该迭代它的一个键。试试这个：

```
$.each(data.video, function(index, video) {
  $('#stage').append('<p> Name: ' + video.name+ '</p>');
  $('#stage').append('<p> URL: ' + video.url+ '</p>');
}); 
```

如果要添加其他数据，可以遍历整个层次结构。例如：

```
$.each(data.video, function(index, video) {
  $('#stage').append('<p> Name: ' + video.name + '</p>');
  $('#stage').append('<p> URL: ' + video.url + '</p>');

  $.each(video.author.data, function(index, author) {
    $('#stage').append('<p> Author: ' + author.name_author + '</p>');
  });

  $('#stage').append('<br/>');
}); 
```

最后，如果你想访问第 n 条记录，使用上面的语法，你可以这样做：

```
// n is the 0-based position of the json record you're interested in displaying
var video = data.video[n];
$('#stage').append('<p> Name: ' + video.name + '</p>');
$('#stage').append('<p> URL: ' + video.url + '</p>');
// etc... 
```

这里的工作示例：http: [//livecoding.io/3495017](http://livecoding.io/3495017)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:39:56.753

看起来您正在尝试迭代 JSON 的错误部分。我相信你的 $.each 行应该是这样的：

```
$.each(data.video, function(index, video){
  // video.name, video.url, etc
} 
```

# python - 在 Tornado Web 框架中读取 csv 文件

> ID：12152796
> 
> 赞同：0
> 
> 时间：2012-08-28T04:32:23.907
> 
> 标签：python, csv, tornado

我是 tornado web 框架的新手。目前我正在构建一个 Web 应用程序，它**应该**加载 csv 文件然后处理它。我尝试在 python 中使用 csv 模块，还尝试了对我没有帮助的表格模块。

所以，我的问题是，是否有任何包或开源库可以读取 csv 文件数据并将其存储在某种变量中，以便我可以对文件执行各种操作。

我收到以下错误：

```
raise ValueError, "Need formats argument" 
```

我的代码是：

```
import re
import sys
import os.path
import tornado.httpserver
import webbrowser
import personalfile
import tabular as tb
import csv

try:
    import tornado.ioloop
    import tornado.web
except:
    print 'No tornado module installed, Please install the tornado from http://www.tornadoweb.org/'
    sys.exit()

SRC = os.path.dirname(__file__)

# Main Handler
class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("static/template_upload.html")

class OutputHandler(tornado.web.RequestHandler):
    def post(self):
        template_file = self.get_argument('template_html', None)
        **data_file = self.get_argument('csvfile', None)
        data_file = csv.DictReader(data_file)**
        data_file = tb.tabarray(data_file, verbosity=0, headerlines=1)
        xhtmlOutput = personalfile.function([templatehtmlfile,data_file])

        self.render('output.xhtml', data = xhtmlOutput)

application = tornado.web.Application([
    (r"/", MainHandler),
    (r"/output", OutputHandler)
], debug=True,
   static_path=os.path.join(SRC, "static")
)

if __name__ == "__main__":
    print open(os.path.join(SRC, 'static', 'intro.txt')).read()
    webbrowser.open('http://127.0.0.1:8888')

    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:38:43.913

这不是`csv.DictReader`对象的工作方式[[module docs]](http://docs.python.org/library/csv.html#module-csv)。您只是制作了阅读器，并未实际提取任何数据。如果您希望存储所有数据，则必须实际读取它。例如：

```
>>> import csv
>>> with open("test.csv") as fp:
...     reader = csv.reader(fp)
...     data = list(reader)
... 
>>> data
[['a', 'b', 'c'], ['1', '2', '3'], ['4', '5', '6']]
>>> 
>>> with open("test.csv") as fp:
...     reader = csv.DictReader(fp)
...     data = list(reader)
... 
>>> data
[{'a': '1', 'c': '3', 'b': '2'}, {'a': '4', 'c': '6', 'b': '5'}] 
```

等等。您是否真的需要一次所有数据取决于您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:00:36.657

我的代码中有一个错误。您上传的文件可从`self.request.files`

参考：[http ://www.tornadoweb.org/documentation/overview.html](http://www.tornadoweb.org/documentation/overview.html)

# iphone - 在 UITableView 位置插入一行

> ID：12152799
> 
> 赞同：0
> 
> 时间：2012-08-28T04:32:40.233
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个表格视图，我想在其中的某个位置插入一个新行。我已经这样做了，但它给出了意想不到的输出。我在这里做错什么了吗。

```
 NSIndexPath *indexpath =  [NSIndexPath indexPathForRow:position inSection:0];

NSArray *temp_array = [[NSArray alloc] initWithObjects:indexpath, nil];

[self.table insertRowsAtIndexPaths:temp_array withRowAnimation:UITableViewRowAnimationBottom]; 
```

我还需要做更多的事情吗？我在一个单独的函数中执行此操作 (insert_at_position:) 任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:41:32.023

尝试这个

```
[self.table beginUpdates];
[self.table insertRowsAtIndexPaths:temp_array withRowAnimation:UITableViewRowAnimationBottom];
[self.table endUpdates]; 
```

# c# - TimeSpan Windows Mobile 6 和 WCF 服务

> ID：12152800
> 
> 赞同：0
> 
> 时间：2012-08-28T04:32:59.187
> 
> 标签：c#, wcf

我有一个连接到 wcf 服务以获取数据的移动应用程序。服务端的对象之一具有 TimeSpan DataMember。除了这个字段，一切都很好，因为它是一个字符串：

服务移动 04:00:00 --> "PT4H"

如何从 wcf 服务获取 TimeSpan？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:37:03.423

好的，我发现了问题。默认情况下，`TimeSpan`被序列化为

```
XmlElementAttribute(DataType="duration") 
```

这是一个类似“PT4H”的字符串。

要获得您必须使用`XmlConvert.ToTimeSpan()`的实际值，它将返回实际的时间跨度值。

# c# - 如何从 XAML 中定义的 ResourceDictionary 中检索 Brush 并将其应用于代码中的元素？

> ID：12152803
> 
> 赞同：9
> 
> 时间：2012-08-28T04:33:19.893
> 
> 标签：c#, wpf, resourcedictionary

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero">

    <LinearGradientBrush x:Key="ButtonNormalBackgroundBrush"
        StartPoint = "0.5,0"
        EndPoint   = "0.5,1">

        <GradientStop Color="#C10099FF" Offset="0"/>
        <GradientStop Color="#C16699CC" Offset="1"/>
        <GradientStop Color="#C1006699" Offset="0.49"/>

    </LinearGradientBrush>

<ResourceDictionary/> 
```

现在我想从 ResourceDictonary 获取 LinearGradientBrush 并将其动态应用于按钮作为 wpf 中的背景颜色。

```
 BtnGetBrushes.Background = Brushes.Green; 
```

我想应用上面的颜色而不是这个（Brushes.Green）。我该怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T04:45:29.683

假设您的 ResourceDictionary 在上下文中可用：

```
<Button Background="{DynamicResource ResourceKey=ButtonNormalBackgroundBrush}" /> 
```

或在代码中

```
button.Background = (Brush)FindResource("ButtonNormalBackgroundBrush"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T04:47:54.280

```
BtnGetBrushes.Background = this.Resources["ButtonNormalBackgroundBrush"] as LinearGradientBrush; 
```

# eclipse - 无法在 Eclipse 中安装 Spket

> ID：12152805
> 
> 赞同：1
> 
> 时间：2012-08-28T04:33:53.277
> 
> 标签：eclipse, extjs4.1

我想在 Eclipse 中为我的 extjs4.1 项目使用 Spket。我发现有很多安装教程，说：

在eclipse中，点击帮助>>安装新软件，输入“http://www.spket.com/update/”

但在那之后，会弹出一个窗口并显示“在[http://www.spket.com/update/](http://www.spket.com/update/)上找不到软件站点”。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:41:04.670

您可以通过更新站点安装 spket - [spket](http://www.agpad.com/update/)

# assembly - 创建自定义 TI 84 plus 图形计算器操作系统 (OS)

> ID：12152810
> 
> 赞同：1
> 
> 时间：2012-08-28T04:34:44.287
> 
> 标签：assembly, operating-system, calculator, texas-instruments, ti-basic

我正在开始一个项目，我将在其中创建/编辑标准 TI 84 Plus Calculator OS。我打算只改变一些减慢速度并且对我来说不是必需的东西。（例如：绘图时的渐近线检查，“PrettyPrint”或“MathPrint”选项）我还想在我关闭计算器时添加一个简单的密码保护屏幕，以防止数据被盗。

我熟悉“基本编程”。我在 TI Basic（计算器编程）方面非常熟练，并且在 Java 和 ASM 方面有一点编程经验，尽管我使用的唯一汇编代码是在 TI 84 Plus 图形计算器上......我也在寻找更多信息作为我应该着手制作这个新操作系统的方式。

* * *

有用的链接：

*   [TI Calc.org](http://www.ticalc.org/)
*   [TI Calc OS 程序](http://www.ticalc.org/pub/83plus/os/)
*   [TI 基础开发](http://tibasicdev.wikidot.com/)

来自另一个酷网站的更多 TI Calc 内容：[手动链接](http://www.teshack.com/tag/ticalculators)

*   [SmileyOS](http://www.ticalc.org/pub/83plus/os/smileyos.zip) - 这是我以前见过的一个简单的自定义操作系统，所以我知道可以做一些类似于我所描述的事情。

* * *

我正在寻找对这个主题有更多了解的人给我一些提示，并引导我朝着正确的方向前进。我确实希望能够自己做一些工作，所以我没有要求任何人为我做这些工作，只是一路上帮助我提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T21:34:30.077

Detached Solutions 有一个名为 MirageOS 的外壳。它足够通用，您可以将所需的功能编写为可以运行的应用程序，从而更轻松地解决您的问题。内置密码保护。

# jquery - 包含 jQuery.min.js 时的奇怪边距行为

> ID：12152812
> 
> 赞同：0
> 
> 时间：2012-08-28T04:34:59.647
> 
> 标签：jquery, html, css

我的页面布局有一个奇怪的问题。当我包含 jQuery.min.js 时，我的网站的标题会下降大约 50 像素。如果我从头部删除 jQuery.min.js，那么头部会正确显示。这怎么可能？我不记得曾经更改过我的 CSS。

有任何想法吗？

**[网站在这里](http://jonathonmoore.com/sandbox/single.html)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:37:20.643

尝试将您的库包含在`<head>`标签中，而不是`<body>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:47:48.270

当`https`网站本身是`http`. 相反，您不应该包含任何协议部分，因为它会自动计算出来。

```
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>‌​ 
```

会工作得很好。

编辑：你也没有关闭你的`<link>`标签，我认为这可能是真正的问题。你真的应该通过[http://validator.w3.org/运行页面](http://validator.w3.org/)

再次编辑：我下载了源代码并在 VIM 中打开它，显然你有一些随机的无效字符`</script>`。

这是我的文本编辑器显示的内容：

```
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script><E2><80><8C><E2><80><8B> 
```

删除该行及其下方的行，然后以其他方式再次插入它们。

# java - 为什么在“for (...)”之后添加分号会如此显着地改变我的程序的含义？

> ID：12152821
> 
> 赞同：-1
> 
> 时间：2012-08-28T04:36:30.033
> 
> 标签：java

我写了以下课程：

```
 public class TestOne {
     public static void main(String[] args) {
        int count = 0;
        for (int i = 0; i < 100; i++) {
          count++;
        }
        System.out.println(count);
     }
   } 
```

输出是`100`。

然后我加了一个分号：

```
 public class TestOne {
     public static void main(String[] args) {
        int count = 0;
        for (int i = 0; i < 100; i++); {     // <-- Added semicolon
          count++;
        }
        System.out.println(count);
     }
   } 
```

输出是`1`。

结果令人难以置信。为什么这个添加的分号会如此显着地改变我的程序的含义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T04:38:06.507

分号使 for 循环的主体为空。它相当于：

```
public class TestOne {
     public static void main(String[] args) {
        int count = 0;

        for (int i = 0; i < 100; i++) { }

        count++;
        System.out.println(count);
     }
   } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T04:39:41.090

这不是错误。分号成为`for`循环体中唯一的“语句”。

以另一种方式编写它以使其更易于查看：

```
for (int i = 0; i < 100; i++)
    ;

{
    count++;
} 
```

with 块变成了带有单个语句的裸块，由于分号`count++`，它根本与循环无关。`for`所以这个块，以及`count++`它里面的，只执行*一次*。

这是语法上有效的 java。`for (int i = 0; i < 100; i++);`相当于：

```
for (int i = 0; i < 100; i++)
{ ; } // no statement in the body of the loop. 
```

`for`由于循环增量语句或终止条件中的副作用，这种形式的循环可能很有用。例如，如果您想编写自己的代码`indexOfSpace`来查找 a 中空格字符的第一个索引`String`：

```
int idx;

// for loop with no body, just incrementing idx:
for (idx = 0; string.charAt(idx) != ' '; idx++);

// now idx will point to the index of the ' ' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T04:38:49.520

通过添加该分号，您声明了没有要循环的块的 for 语句。

这会导致`count++`它在通过时只执行一次，而不是在循环结束时执行 100 次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T04:40:17.627

用那个分号，你是说 for 循环块正在结束并且里面没有指令。

然后你只增加一次计数，这就是输出为 1 的原因

```
public class TestOne {
     public static void main(String[] args) {
        int count = 0;
        for (int i = 0; i < 100; i++)  ; 

        {
          count++;
        }
        System.out.println(count);
     }
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T04:42:11.557

**分号是一个空语句，它是一个有效的语句**。您当前的循环仅针对该“空语句（`;`）起作用，因此您看不到`count`与循环有关的任何变化。

在循环之后，语句`count++`被执行一次，因此您会看到结果“1”。如果未指定循环体，则循环`{ }`后的第一条语句被视为循环的一部分。在您的第二种情况下，它是空语句。

它相当于：

```
for (int i = 0; i < 100; i++) 
      { 
       ; //any empty valid statement
      }

count++; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T04:38:16.970

迭代结束后，您正在增加计数值

在 for 循环之后，您使用分号，因此您的 for 循环结束

for (int i = 0; i < 100; i++);

{计数++; }

count increment 不在 for 循环中。它在循环之外；

# kinect - 各种 Kinect 库 OpenNI、PCL 用什么

> ID：12152824
> 
> 赞同：0
> 
> 时间：2012-08-28T04:36:38.410
> 
> 标签：kinect, robot, depth, openni, nao-robot

我正在做一个项目，我需要给一个小型人形机器人（一个 Nao 机器人）深度感知。我计划将 Kinect 连接到机器人的前额，并将其与机器人当前的操作和引导系统（默认系统称为 OPEN NAO）集成，该系统在 Linux 上运行并通过 wifi 中继到机器人。

现在我正在摸索使用哪个软件。我查看了点云库，我看到它用于处理实际数据，OpenNI 被定义为一个 API 框架，帮助应用程序访问自然交互设备，如 Kinect，然后是官方的 Kinect SDK。我只是不确定它们是如何组合在一起的。

我需要哪些库/框架将 Kinect 集成到机器人的操作系统中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:48:28.657

我建议您使用 OpenNI + PCL。

你说得对，PCL 是一个数据处理库。它通常有很好的文档记录，并且已经有一个到 OpenNI 的接口：http: [//pointclouds.org/documentation/tutorials/openni_grabber.php](http://pointclouds.org/documentation/tutorials/openni_grabber.php)

OpenNI 是设备驱动程序；也就是说，它从 kinect 中提取信息。PCL 有一个进入这个库的接口。实际上，OpenNI 通常分为两部分：OpenNI 框架和您使用的特定传感器的驱动程序，在您的情况下是 Kinect（这称为 PrimeSense 传感器模块）。这些将需要与 PCL 分开安装。在某些 linux 发行版上，它们可以预先打包，但如果不是，您可能想尝试从源代码安装：http: [//openni.org/Downloads.aspx](http://openni.org/Downloads.aspx)

我认为 KinectSDK 在理论上可以做与 OpenNI 相同的工作，但 PCL 有一个到 OpenNI 的接口，无论如何我不确定 KinectSDK 是否适用于 Linux 变体。

我希望这是有帮助的。对 Nao 更熟悉的人或许能得到更多的启示。

最良好的祝愿

达米安

编辑：

*   上面指向 OpenNI 源代码的链接现在已经过时了。见[https://github.com/OpenNI/OpenNI](https://github.com/OpenNI/OpenNI)
*   OpenNI2 是 OpenNI 的继任者，复杂度稍低（不需要单独的 Primesense 模块）。

# android - 在 Android 中使用安全线程：Escaping networkonmainthread 异常

> ID：12152832
> 
> 赞同：0
> 
> 时间：2012-08-28T04:37:23.763
> 
> 标签：android, web-services, android-asynctask

在这里，首先，当数据同步到本地数据库时，我的应用程序从服务器同步数据后台线程是布尔类型，因此我无法调用功能来从那里获取图像。如果我从 postexecute 调用方法然后我得到 NetworkOnMainthread 异常我被困在我需要使用安全线程的情况下面是代码

```
protected void onPreExecute() {
    mDialog = ProgressDialog.show(viewContext, "", "Synchronizing Data",
            true);

};

/*
 * (non-Javadoc)
 * 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected Boolean doInBackground(Void... arg0) {
    if (type.contains("ferry")) {
        return SynchronizeRepositoryFerry(false);

    } else {
        return SynchronizeRepositories(false, initialSync);
    }
}

/*
 * (non-Javadoc)
 * 
 * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
 */
@Override
protected void onPostExecute(Boolean result) {
    this.syncComplete = result;
    mDialog.dismiss();
    if (type.contains("Dash")) {
        new BackgroundTask().execute();
    }
    else{
        Intent intent = new Intent();
        intent.setClass(viewContext, classType);
        viewContext.startActivity(intent);

    }

}

class BackgroundTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog mDialog;

    protected void onPreExecute() {
        mDialog = ProgressDialog.show(viewContext, "", "Loading Images",
                true);
    };

    @Override
    protected Void doInBackground(Void... params) {
        try {
            int id = 0;
            String url = "http://i.zdnet.com/blogs/3-29-androids.jpg";
            com.jumbybay.businessobjects.User user = new com.jumbybay.businessobjects.User();
            DatabaseHelper dbHelper = new DatabaseHelper(viewContext);
            IUserRepository repository = dbHelper.getUserRepository();
            List<com.jumbybay.businessobjects.User> imageList;
            try {
                imageList = repository.Retrieve();
                for (int i = 0; i < imageList.size(); i++) {
                    user = imageList.get(i);
                    // url = user.getPicture();
                    id = user.getId();
                    savesd(id, url);

                }
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } catch (final Exception e) {

        }
        return null;
    }

    public void savesd(int id, String uri) throws IOException {
        URL url;
        if (uri == null) {
            url = new URL("http://i.zdnet.com/blogs/3-29-androids.jpg");
        } else {
            url = new URL(uri);
        }
        InputStream input = url.openStream();
        try {
            File storagePath = Environment.getExternalStorageDirectory();
            OutputStream output = new FileOutputStream(new File(
                    storagePath, +id + ".jpg"));

            try {
                byte[] buffer = new byte[20000];
                int bytesRead = 0;
                while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                    output.write(buffer, 0, bytesRead);
                }
            } finally {
                output.close();
            }
        } catch (Exception e) {

            e.printStackTrace();
        } finally {
            input.close();
        }

    }

    protected void onPostExecute(Void result) {
        mDialog.dismiss();
        Intent intent = new Intent();
        /*
         * intent.setClass(viewContext, classType);
         * viewContext.startActivity(intent);
         */

        intent.setClass(viewContext, classType);
        viewContext.startActivity(intent);

    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:09:31.303

```
@Override
    protected Boolean doInBackground(Void... arg0) {
        if (type.contains("ferry")) {
            return SynchronizeRepositoryFerry(false);

        } else {
            SynchronizeRepositories(false, initialSync);
            com.jumbybay.businessobjects.User user = new com.jumbybay.businessobjects.User();
            DatabaseHelper dbHelper = new DatabaseHelper(viewContext);
            IUserRepository repository = dbHelper.getUserRepository();
            List<com.jumbybay.businessobjects.User> imageList;
            try {
                int id;
                String url = "http://i.zdnet.com/blogs/3-29-androids.jpg";
                imageList = repository.Retrieve();
                for (int i = 0; i < imageList.size(); i++) {
                    user = imageList.get(i);
                    // url = user.getPicture();
                    id = user.getId();
                    savesd(id, url);
                }
            } catch (SQLException e) {
                // TODO Auto-generated catch block// url = user.getPicture();
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        return SynchronizeRepositories(false, initialSync);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:49:07.790

这个问题有两个解决方案，但第一个是很好的解决方案。

1）不要在主 UI 线程中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；但这不是正确的方法。

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

有关更多信息，请参见下面的链接。

[引起：android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/13136539/caused-by-android-os-networkonmainthreadexception)

# android - ListView 还是 TableLayout？

> ID：12152833
> 
> 赞同：26
> 
> 时间：2012-08-28T04:37:30.080
> 
> 标签：android, android-listview, android-adapter, android-tablelayout, custom-cell

我现在真的很困惑该学哪一个。我是一名 iPhone 应用程序开发人员，现在正在学习 Android 开发。

我已经学会了如何使用 a`ListView`和一个静态的字符串数组`Adapter`。我习惯在 iPhone 中使用自定义单元格，主要用于在`TableView`s 中显示动态内容，例如图像和文本。

那么在Android中这样做的方法是什么？`TableLayout`还是`ListView`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-28T07:46:28.737

正如其他人在评论中已经说过的那样，您需要先明确定义要做什么，然后再具体决定使用哪种类型的布局。但是，我当然可以理解尝试决定使用哪种类型的布局类所引起的混乱，因为通常有几个可供选择以实现相同的目标。例如，要创建一个垂直滚动的项目列表，您可能首先选择一个 vertical `LinearLayout`，然后将其放在一个`ScrollView`. 但另一方面，要获得类似的最终结果，您可以将 a`ListView`与合适的`Adapter`.

同样，要显示可以垂直滚动的项目网格，您可以使用 a `TableLayout`inside a `ScrollView`。或者，使用`GridView`, 也可以通过合适的`Adapter`.

现在，第一个关键区别是：类喜欢`LinearLayout`并`TableLayout`要求您以 XML 布局或以编程方式在代码中提供子元素。`ListView`和`GridView`（以及其他几个）这样的类非常不同，因为它们是`android.widget.AdapterView`. 类的特殊之处`AdapterView`在于它`Adapter`用于将数据绑定到它们。因此，回到垂直项目列表的示例，如果您`LinearLayout`根据一些数组数据在 a 中显示一组子列表项，则必须根据数组数据以编程方式创建并添加子`View`项`LinearLayout`。`ListView`另一方面，`View`代表子项目的个体 s 是从一个合适的`Adapter`. 因此，不是您以编程方式用所有子项填充布局（例如，`LinearLayout`或`TableLayout`就是这种情况），`Adapter`而是基于 - 的布局调用`Adapter`以在需要时获取子项`View`。

最后一点是我认为您应该了解`Adapter`基于布局的下一个关键区别：在大量数据滚动到视野之外的情况下，它们在显示大量数据方面效率更高。例如，`ListView`使用 a 来显示大型滚动项目列表比`LinearLayout`使用所有项目填充 a 并将其放入 a 更有效`ScrollView`。这种效率的原因是`AdapterView`基于 - 的布局通常不会同时包含所有 child `View`。相反，当用户滚动列表时，现有的子视图会被“回收”或“转换”`Adapter`显示下一个子元素。举个例子来说明这一点：您需要一个包含 100 个项目的滚动垂直列表。但是，屏幕可能只够一次显示 7 个。假设您使用`LinearLayout`inside a`ScrollView`来显示 100 个列表项。这意味着`LinearLayout`容器有 100 个 child `Views`。这些孩子总是出现在布局中，并且需要在滚动事件期间由系统处理，即使一次只能在屏幕上看到七个。这需要额外的 CPU 时间、大量 RAM，并且滚动可能会很慢。现在，使用 a `ListView`，布局可能只包含 7 或 8 个 child `View`。当用户滚动时，这些 child`View`被动态转换或重新实例化`Adapter`通过它你绑定你的数据。用户将体验到更快、更流畅的滚动操作。从编程的角度来看，通过`Adapter`. 当您处理`Bitmap`s 的滚动列表或网格时，设备的内存限制`Android`也意味着使用 an`AdapterView`非常重要。

请记住，在回答这个问题时，我假设您正在尝试显示可滚动的项目的垂直或表格列表，可能包括`Bitmap`s，并且我专注于您想要的布局类型用于实现该数据的布局和滚动。`LinearLayout`然而，像,等布局类`TableLayout`是重要的类，您将一直使用它们来为您的应用程序形成单独的布局构建块。如果保证您的整个列表适合屏幕并且不可滚动，那么使用 an 的额外复杂性`Adapter`（并不是*真的*那么复杂）可能毫无意义，那么您可能只想使用 a`TableLayout`或其他什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T07:18:40.033

相当于 iOS 的 Android`UITableView`是`RecyclerView`.

它非常强大，可以填充来自不同来源的数据，具体取决于您附加到它的[适配器的类型。](https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter)您可能想看看这个[RecyclerView 代码实验室](https://codelabs.developers.google.com/codelabs/android-training-create-recycler-view/index.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T07:20:40.277

**1.**如果你想`dynamic data`在`CUSTOM VIEW`一个列表的形式上，那么`ListView`用`BaseAdapter`or`ArrayAdapter`是要走的路.....

**2.** `TableLayout`将有**完全不同的用途**，主要是我用它来显示需要以堆栈形式显示的数据..（即一个在另一个之上....）

**请参阅以下链接以快速理解和实施：**

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# java - Java 分组和汇总字符串列表

> ID：12152836
> 
> 赞同：0
> 
> 时间：2012-08-28T04:38:00.663
> 
> 标签：java

我正在编写一个命令程序，其中有一个字符串列表，格式为：

```
AAA 100
BBB 200
CCC 300
AAA 50

```

所需的输出是将第一列分组并总结第二列。

```
AAA 150
BBB 200
CCC 300

```

我使用下面的代码并且它可以工作，但只是想知道它应该是一种更优雅的方式吗？

```
public static Map<String, Integer> summarizeData(List<String> lines) {
    Map<String, Integer> map = new HashMap<String, Integer>();
    String[] temp;
    for (String line : lines) {
        temp = line.split("\\s+");
        if (map.containsKey(temp[0])) {
            int value = Integer.valueOf(temp[1])
                    + (Integer) map.get(temp[0]);
            map.put(temp[0], value);
        } else {
            map.put(temp[0], Integer.valueOf(temp[1]));
        }
    }
    return map;
} 
```

非常感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:26:46.473

您当前的解决方案不一定按字典顺序对行名进行排序。[在下面尝试](http://ideone.com/EHg46)我的解决方案。

```
public static Map<String, Integer> compile(final List<String> input) {
  final Map<String, Integer> map = new TreeMap<String, Integer>();
  final Pattern space = Pattern.compile("\\s+");
  for (final String line : input) {
    final String[] parts = space.split(line, 0);
    final String name = parts[0];
    final int addendum = Integer.valueOf(parts[1]);
    final Integer old = map.get(name);
    map.put(name, old == null ? addendum : old + addendum);
  }
  return map;
} 
```

...产生：

> ```
> AAA 150
> BBB 200
> CCC 300 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:37:36.580

您的代码可以正常工作，但我会将其重构为：

```
public static Map<String, Object> summarizeData(List<String> lines) {
    Map<String, Integer> map = new HashMap<String, Integer>();
    for (String line : lines) {
        String[] temp = line.split("\\s+");
        Integer total = map.get(temp[0]);
        total = total == null ? 0 : total;
        map.put(temp[0], total + Integer.valueOf(temp[1]));
    }
    return map;
} 
```

# sql - 带条件的 LEFT JOIN

> ID：12152837
> 
> 赞同：1
> 
> 时间：2012-08-28T04:38:02.090
> 
> 标签：sql, sql-server-2008, inner-join

我正在使用 MS SQL。我有两张桌子：

1) “OrderProducts” - 此表存储订单中的所有产品。还有另一个 Orders 主表，我们可以从这张图中省略。Orders 主表存储订单的主要数据，而 OrderProducts 表存储详细信息。

2) “TransactionFeeProducts” - 此表存储我要为订单收取的所有产品的交易费用。它有一个 BatchID，其中多个产品可以有相同的 BatchID。

基本上，所有 OrderDate 介于 TransactionFeeProducts.FromDate 和 TransactionFeeProducts.ToDate 之间的订购产品，都将收取 TransactionFeeProducts.TransactionFee

## 订购产品

*   产品编号
*   数量
*   订购日期

## 交易费用产品

*   批号
*   产品编号
*   从日期
*   迄今为止
*   手续费

SQL：

```
SELECT SUM(Quantity) as Orders, 
TransactionFeeProducts.ProductID, FromDate, ToDate 
FROM TransactionFeeProducts 
LEFT JOIN OrderProducts ON TransactionFeeProducts.ProductID = OrderProducts.ProductID
WHERE
OrderDate >= TransactionFeeProducts.FromDate AND 
OrderDate <= TransactionFeeProducts.ToDate AND 
TransactionFeeProducts.BatchID = 3
GROUP BY TransactionFeeProducts.ProductID, FromDate, ToDate 
ORDER BY SUM(Quantity) DESC 
```

我希望 SQL 返回 TransactionFeeProducts 中 BatchID = 3 的所有记录。 SUM(Quantity) 应该只给我在 TransactionFeeProducts.FromDate 和 TransactionFeeProducts.ToDate 之间进行 OrderDate 的总和

如果 SUM(Quantity) 为 0，则该字段应为 NULL 或 0。

我现在的问题是，如果 SUM(Quantity) 为 0，SQL 不会返回任何记录。

请帮忙。非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T04:40:32.073

将 JOIN 条件更改为类似

```
SELECT  SUM(Quantity) as Orders,  
        TransactionFeeProducts.ProductID, 
        FromDate, 
        ToDate  
FROM    TransactionFeeProducts LEFT JOIN 
        OrderProducts   ON  TransactionFeeProducts.ProductID = OrderProducts.ProductID 
                        AND OrderDate >= TransactionFeeProducts.FromDate 
                        AND OrderDate <= TransactionFeeProducts.ToDate 
WHERE   TransactionFeeProducts.BatchID = 3 
GROUP BY    TransactionFeeProducts.ProductID, 
            FromDate, 
            ToDate  
ORDER BY    SUM(Quantity) DESC 
```

不同之处在于，如果您将过滤条件放在`WHERE`子句中，它将影响查询过滤，就像您使用 an 一样`INNER JOIN`，说明您将只包含来自`TransactionFeeProducts`where的条目`OrderDate >= TransactionFeeProducts.FromDate and OrderDate <= TransactionFeeProducts.ToDate`

看看下面的例子

```
DECLARE @TABLE1 TABLE(
        ID INT,
        FromDate DATETIME,
        ToDate DATETIME
)

INSERT INTO @TABLE1 SELECT 1, '01 Jan 2012','31 Jan 2012'

DECLARE @TABLE2 TABLE(
        ID INT,
        DateValue DATETIME
)

INSERT INTO @TABLE2 SELECT 1, '01 Feb 2012'

SELECT  *
FROM    @TABLE1 t1 LEFT JOIN
        @TABLE2 t2  ON  t1.ID = t2.ID
                    AND t2.DateValue BETWEEN t1.FromDate AND t1.ToDate

SELECT  *
FROM    @TABLE1 t1 LEFT JOIN
        @TABLE2 t2 ON   t1.ID = t2.ID
WHERE   t2.DateValue BETWEEN t1.FromDate AND t1.ToDate 
```

**选择 1 说：**

返回 T1 中的所有行，仅返回 T2 中的行`t1.ID = t2.ID AND t2.DateValue BETWEEN t1.FromDate AND t1.ToDate`

**另一方面，选择 2 说：**

仅返回 T1 中的所有行，仅返回 T2 中的`t1.ID = t2.ID`行，然后在此之后，仅取行 where`t2.DateValue BETWEEN t1.FromDate AND t1.ToDate`

[SQL SERVER – JOIN 简介 – JOIN](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)的基本知识总是很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:24:40.913

我更喜欢 astander 的方法（在 JOIN 中过滤），但有时有用的替代方法是在连接字段上简单地添加 OR IS NULL，例如

```
WHERE
 TransactionFeeProducts.BatchID = 3
 AND
(OrderProducts.ProductID IS NULL
 OR 
(
   OrderDate >= TransactionFeeProducts.FromDate AND 
   OrderDate <= TransactionFeeProducts.ToDate 

)) 
```

# objective-c - 垂直对齐两个标签

> ID：12152850
> 
> 赞同：1
> 
> 时间：2012-08-28T04:39:01.527
> 
> 标签：objective-c, ios, ios4

我想垂直对齐两个 UILabel。一个包含描述（最多 3 行），另一个包含数字。
像这样

![在此处输入图像描述](../Images/9473e0df7edbbbf47d7a30c37e185eb5.png)

我尽力了，但我只能设法创建一个这样的。 ![在此处输入图像描述](../Images/2ce9a5aa924ec919d743d3634904e97a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:44:16.697

您需要做的就是将第一个标签的高度更改为仅适合一行。当你这样做时，数字将自动上升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:39:14.533

以下代码将起作用：

```
#define kDescriptionWidth 200

...

- (void)alignNumLabel:(UILabel *)numLabel withDescriptionLabel:(UILabel *)descriptionLabel topLeftPoint:(CGPoint)topLeftPoint {
    numLabel.frame = CGRectMake(topLeftPoint.x, topLeftPoint.y, 0, 0);
    [numLabel sizeToFit];

    CGSize maxDescriptionSize = CGSizeMake(kDescriptionWidth, (descriptionLabel.numberOfLines == 0 ? CGFLOAT_MAX : descriptionLabel.font.lineHeight * descriptionLabel.numberOfLines));
    CGSize labelSize = [descriptionLabel.text sizeWithFont:descriptionLabel.font constrainedToSize:maxDescriptionSize lineBreakMode:UILineBreakModeWordWrap];
    descriptionLabel.frame = CGRectMake(CGRectGetMaxX(numLabel.frame) + 5, numLabel.frame.origin.y, labelSize.width, labelSize.height);
} 
```

要使用它，请执行以下操作：

```
[self alignNumLabel:numLabel withDescriptionLabel:descriptionLabel topLeftPoint:CGPointMake(10, 10)];
[self alignNumLabel:numLabel2 withDescriptionLabel:descriptionLabel2 topLeftPoint:CGPointMake(10, CGRectGetMaxY(descriptionLabel.frame) + 10)]; 
```

如果您对它的工作原理有任何疑问，请告诉我。

# django - 我应该传递哪些变量？

> ID：12152852
> 
> 赞同：0
> 
> 时间：2012-08-28T04:39:23.057
> 
> 标签：django, django-templates

我有以下看法：

```
from models import Table
from django.shortcuts import render_to_response, RequestContext

def myget(request,
    template="project/p1.html",
    page_template="project/p2.html"):
    context = {
        'objects': Table.objects.all(),
        'page_template': page_template,
    }

    if request.is_ajax():
        template = page_template
    return render_to_response(template, context,
        context_instance=RequestContext(request)) 
```

我的网址文件如下所示：

```
url(r'^$', 'django.views.generic.simple.direct_to_template', {'template': 'master.html'}), 
url(r'^p1', 'project.views.myget'), 
```

我在我的 master.html 文件中包含 p1.html（包括 p2.html），如下所示：

```
{% include "project/p1.html" with objects=objects %} 
```

我在我的 p1.html 文件中包含 p2.html，如下所示：

```
{% include "project/p2.html" %} 
```

我可以在我的 master.html 文件中看到 p1.html，但看不到 p2.​​html（当我自己加载 p1.html 时，我可以看到 p2.​​html）。我错过了什么？除了“objects=objects”之外，我还需要加载其他变量吗？

编辑：p1.html：

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/style/endless.js" charset="utf-8"></script>
<script type="text/javascript" src="/style/endless_on_scroll.js" charset="utf-8"></script>
</head>

<body>

{% include "project/p2.html" %}
</body>
</html> 
```

p2.html：

```
{% load endless %}

<table>

{% paginate 100,100 objects %}
{% for object in objects %}
    <tr>
      <td>{{ object.name }}</td>
    </tr>
{% endfor %}
</table>

{% show_more %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:44:05.890

您忘记从 p1.html 传递对象。

```
{% include "project/p2.html" with objects=objects %} 
```

另外，您的 urls.py 中还有一些内容：您使用 direct_to_template 而不是通常传递对象的 myget 视图。'direct_to_template' 不这样做。因此，您应该创建一个传递对象的视图，而不是使用“direct_to_template”。

# visual-studio - 具有新 ASP.NET Web API 的主体

> ID：12152860
> 
> 赞同：1
> 
> 时间：2012-08-28T04:40:29.937
> 
> 标签：visual-studio, asp.net-web-api, visual-studio-2012, .net-4.5

前段时间我使用 asp.net Web-api beta 构建了 API。我在某处读到，当托管在 IIS 中时，web-api 从运行它的 web 应用程序继承标识。我的 api 也在网站内运行。使用 beta 二进制文件，当我登录该站点然后移至该站点时`http://localhost:4343/webui/api/values`，将为我返回登录用户的正确值。这是`Get`值控制器的方法。

```
public IQueryable<string> Get()
        {
            var pr = Request.GetUserPrincipal();
            var username = Request.GetUserPrincipal().Identity.Name; //Null reference exception after installing vs 2012 here. Identity is null even though I am logged in 
            var values = GetUserValues(username);
            return values.AsQueryable();
        } 
```

它曾经在 web-api 的 beta 版本中正常工作，但在 vs2012 的最终版本中它会抛出空引用异常。我已将该站点转换为使用 .net 4.5。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:05:00.537

ApiController 现在有一个名为“User”的属性，它是 IPrincipal。

```
var pr = User.Identity.Name; 
```

如 tugberk 所述，在内部，User 属性调用 Thread.CurrentPrincipal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:57:07.347

`HttpRequestMessage`没有任何方法或扩展，例如`GetUserPrincipal`. 我不确定 beta 是否有。正如我从您的问题中了解到的那样，您的应用程序仍在测试版上运行，这完全是 IMO 灾难。

当您安装 VS 2012 时，Web API 程序集已在您的机器上进行了 GACed。因此，您很可能在那里发生冲突。

另一方面，您可以通过以下命令获取身份：

```
var principal = Thread.CurrentPrincipal; 
```

# security - 关键拉伸 VS 关键强化

> ID：12152864
> 
> 赞同：2
> 
> 时间：2012-08-28T04:41:05.760
> 
> 标签：security

引用[这篇](http://en.wikipedia.org/wiki/Key_derivation_function)维基文章 -

> 另一种方法，称为密钥强化，使用随机盐扩展密钥，但随后（与密钥拉伸不同）安全地删除盐。这迫使攻击者和合法用户都对盐值进行暴力搜索。

我对关键拉伸的作用感到满意，但我对如何实现关键强化感到困惑。如果删除了盐，如何再次验证密钥？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T04:50:40.677

通过使用足够短的盐，可以尝试所有可能性，直到找到与已知密钥结合时解密消息的可能性。因此“暴力搜索盐值”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T04:55:24.283

wiki 文章中引用的关于密钥强化方案的论文可[在此处](http://scholar.googleusercontent.com/scholar?q=cache:YwWbAMfOGfYJ:scholar.google.com/&hl=en&as_sdt=0,11)获得。

似乎他们正在将一个较大的盐分成两个较小的盐，一个与普通盐分没有什么不同的公共盐，以及一个为了使密码验证更慢而被丢弃的私有盐。这个想法是所有密码验证都会变慢，因为私有盐必须始终是暴力破解的，但是当提供正确的密码时，这将可以忽略不计。但是，添加的处理将减慢密码的暴力破解。

# delphi - Delphi XE2中从右到左的组合框与样式

> ID：12152880
> 
> 赞同：2
> 
> 时间：2012-08-28T04:42:22.243
> 
> 标签：delphi, delphi-xe2, vcl-styles

当我在 Delphi XE2 中使用具有自定义样式（Emerald Light Slate）和此属性的 ComboBox 时遇到问题：

```
BiDiMode := bdRightToLeft;
Style := csDropDownList; 
```

没有自定义样式的 ComboBox：

![在此处输入图像描述](../Images/d8438d95acddcd6a87c4de4c7035cb59.png)

并带有自定义样式（翡翠灯石板）：

![在此处输入图像描述](../Images/8f9e11d1019d39d50fad6ac39caccab6.png)

**我该如何解决？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:46:13.977

问题似乎位于[TComboBoxStyleHook （ TComboBox 的](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TComboBoxStyleHook)[vcl](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TComboBox)样式挂钩）的`DrawItem`方法中，您可以通过覆盖此方法来解决此问题。

试试这个示例代码（这个解决方案远非完美，但只是一个开始）

```
type
  TComboBoxStyleHookFix = class(TComboBoxStyleHook)
  protected
    procedure DrawItem(Canvas: TCanvas; Index: Integer;
      const R: TRect; Selected: Boolean); override;
  end;

{ TComboBoxStyleHookFix }

procedure TComboBoxStyleHookFix.DrawItem(Canvas: TCanvas; Index: Integer;
  const R: TRect; Selected: Boolean);
var
  DIS  : TDrawItemStruct;
  Text : string;
begin
  if Control.BiDiMode<>bdRightToLeft then
   inherited
  else
  begin
    FillChar(DIS, SizeOf(DIS), 0);
    DIS.CtlType := ODT_COMBOBOX;
    DIS.CtlID := GetDlgCtrlID(Handle);
    DIS.itemAction := ODA_DRAWENTIRE;
    DIS.hDC := Canvas.Handle;
    DIS.hwndItem := Handle;
    DIS.rcItem := R;
    Text:=TComboBox(Control).Items[Index];    
    DIS.rcItem.Left:=DIS.rcItem.Left+ (DIS.rcItem.Width-Canvas.TextWidth(Text)-5);    
    DIS.itemID := Index;
    DIS.itemData := SendMessage(ListHandle, LB_GETITEMDATA, 0, 0);
    if Selected then
      DIS.itemState := DIS.itemState {or ODS_FOCUS} or ODS_SELECTED;
    SendMessage(Handle, WM_DRAWITEM, Handle, LPARAM(@DIS));
  end;
end; 
```

并以这种方式使用

```
 TStyleManager.Engine.RegisterStyleHook(TComboBox, TComboBoxStyleHookFix); 
```

![在此处输入图像描述](../Images/9140e14a2e55882bfb9000748431fbe8.png)

不要忘记在Embarcadero的[QC页面中报告此错误。](http://qc.embarcadero.com)

# java - 是否有用于 mobileconfig 的 dtd/xsd

> ID：12152881
> 
> 赞同：0
> 
> 时间：2012-08-28T04:42:25.003
> 
> 标签：java, ios, iphone

我正在尝试使用 java 生成 .mobileconfig 文件（与 iPhone 配置实用程序相同）。

有相同的 xsd/dtd 吗？

提前谢谢你。

问候

迪潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:15:03.147

我不了解 XSD，但这可能会对您有所帮助：

[http://www.apple.com/DTDs/PropertyList-1.0.dtd](http://www.apple.com/DTDs/PropertyList-1.0.dtd)

[http://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/iPhoneConfigurationProfileRef.pdf](http://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/iPhoneConfigurationProfileRef.pdf)

所以你可以创建一个，如果你真的需要它。

# java - 比较两个字段时出错

> ID：12152884
> 
> 赞同：0
> 
> 时间：2012-08-28T04:42:45.120
> 
> 标签：java, android, json, db4o

我想比较来自 db4o 和 JSON 的对象。如果 JSON 中不存在该对象，我应该删除 db4o 中的对象。

我对 if 有疑问：

```
if(tratdb4o.getMedication()==tratJson.getMedication() 
```

我记录了两个字符串变量，它们都是相同的，但没有进入 If 以更改 igual 的值。

有人知道为什么吗？

```
for (int i=0;it2.hasNext();i++ ) {
    objetoDb4o=it2.next();
    tratdb4o=(Tratam)objetoDb4o;
    for (int j=0;it.hasNext();j++ ) {
        objetoJson = it.next();
        tratJson = (Tratam)objetoJson;
        Log.d(TAG,"Comparing "+tratdb4o.getMedication()+" of db4o  "+ tratJson.getMedication() +" of JSON");

        if(tratdb4o.getMedication()==tratJson.getMedication()
             igual true;
        }

        if (igual==false){
            db4oHelper.db().delete(tratdb4o);
            db4oHelper.listResult();    
        }
        igual=false;
        it=listaendb4o.iterator();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T04:44:22.847

代替

```
tratdb4o.getMedication()==tratJson.getMedication() 
```

做

```
tratdb4o.getMedication().equals(tratJson.getMedication()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:45:04.317

对于不使用“==”的字符串

```
 tratdb4o.getMedication().equals(tratJson.getMedication()); 
```

但是对于检查notequals，您仍然可以使用！=

# ruby - 使用 Ruby 的 MongoDB fifo 队列

> ID：12152885
> 
> 赞同：1
> 
> 时间：2012-08-28T04:42:54.527
> 
> 标签：ruby, mongodb, mongoid

我想知道是否可以使用 mongodb 和 ruby​​(mongoid) 创建一个 FIFO 队列。

我正在尝试使用上限集合，但我看不到如何弹出队列。[集合](http://rdoc.info/github/mongoid/moped/frames/Moped/Collection)中似乎没有方法可以做到这一点。

我现在正在做的是：

```
$fifo = Mongo::Connection.new.db("fifo")

queue = "#{queue_name}_#{queue_type}"
unless $fifo[queue].find.present?
  $fifo.command(create: queue, capped: true, size: 10000000, max: 1000)
end 
$fifo[queue].insert(url: "http://www.example.com/unique001")
$fifo[queue].insert(url: "http://www.example.com/unique002")
$fifo[queue].insert(url: "http://www.example.com/unique003") 
```

这给了我一个看起来像的上限集合（来自控制台）

```
> db.test001_high.find()
{ "_id" : ObjectId("503c4714236f440e9c000001"), "url" : "http://www.example.com/unique001" }
{ "_id" : ObjectId("503c4714236f440e9c000002"), "url" : "http://www.example.com/unique002" }
{ "_id" : ObjectId("503c4714236f440e9c000003"), "url" : "http://www.example.com/unique003" } 
```

我想知道的是，在 ruby​​ 中有没有办法在这个集合中阻止流行？我必须说我对 mongodb 并不是很熟悉，我只是想像在 redis 中那样创建一个 fifo 队列。所以也许我以错误的方式处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:44:13.393

我在 Java 中为 mongo 实现了一个 FIFO 队列。您应该使用原子操作[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)从队列集合中查找最早的条目，并删除文档 (remove=true) 或设置状态字段。

要注意的另一件事是，您应该只使用 MasterOnly 读取来执行此操作，或者将您的写入数设置为等于写入时的节点数。否则，由于复制延迟，您可能会得到不一致的结果。

# xpath - XPath 包含多个值之一

> ID：12152890
> 
> 赞同：47
> 
> 时间：2012-08-28T04:43:27.710
> 
> 标签：xpath, filter

我有简单的 xpath

```
 /products/product[contains(categorie,'Kinderwagens')] 
```

它有效，但现在我如何过滤多个类别值

像

```
/products/product[contains(categorie,'Kinderwagens')]  +  
/products/product[contains(categorie,'Kinderwagens')] 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-28T05:10:44.917

这行得通吗？

```
/products/product[contains(categorie,'Kinderwagens') or contains(categorie,'Wonderwagens')] 
```

[这里](https://stackoverflow.com/questions/472966/xpath-multiple-element-filters)有一个类似的问题

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-28T08:30:27.597

你真的想要包含（）吗？很多时候，人们在应该使用“=”时使用 contains() 来测试节点是否包含值。不同之处在于，如果类别元素具有字符串值“Kinderwagens”，`categorie = 'wagens'`则为假但`contains(categorie, 'wagens')`为真。

如果您实际上打算使用 '='，那么在 XPath 2.0 中您可以编写`[categorie = ('Kinderwagens', 'Wonderwagens')]`. 如果您仍在使用 XPath 1.0，则需要使用“或”进行两次单独比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-14T16:14:29.303

有很多方法：

1.  `//*[contains(text(), 'Kinderwagens') or contains(text(), 'Kinderwagens')]`
2.  `//product[contains(text(), 'Kinderwagens') or contains(text(), 'Kinderwagens')]`
3.  `//products/product[contains(text(), 'Kinderwagens') or contains(text(), 'Kinderwagens')]`
4.  `//products/product[contains(categorie, 'Kinderwagens') or contains(categorie, 'Kinderwagens')]`

注：**| （按位或）**运算符不要使用

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-03-08T06:19:12.377

您可以传递多个文本，如下所示

```
//a[contains(text(),'JB-' | 'ABC')] 
```

# iphone - 带有 URL 的 writeToFile - 下一个会话 URL 不存在

> ID：12152897
> 
> 赞同：0
> 
> 时间：2012-08-28T04:44:24.210
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 writeToFile 将音频文件写入本地 iphone 目录。下次我启动应用程序时，路径/ URL 不再存在，我无法检索我的文件。

将不胜感激任何帮助。

保存：

```
 NSArray *dirPaths;
    NSString *docsDir; 
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *tempFileName = [[NSString alloc] init];
    tempFileName = [[alertView textFieldAtIndex:0]text];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.wav", tempFileName]];
    BOOL success = [videoData writeToFile:soundFilePath atomically:YES]; 
```

阅读：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:[urlArray objectAtIndex:indexPath.row]]) 
```

其中 urlArray 包含文件的路径，并且此 If 语句为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:06:47.210

为什么不将 filePath 保存在 NSMutableArray 和 NSUserDefault 中

```
 //After writing file in doc dir
 if(success)
 {
   // Store the data
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   if(![defaults objectForKey:@"filePaths"]) //creating mutable array for first time
   {
      NSMutableArray *arrFilePaths = [NSMutableArray alloc]init];
      [defaults setObject:arrFilePaths forKey:@"filePaths"];
   }
   else //saving new soundFilePath in mutable array
   {
      NSMutableArray *arrFilePaths = [defaults objectForKey:@"filePaths"];
      [arrFilePaths addObject:soundFilePath];
      [defaults setObject:arrFilePaths forKey:@"filePaths"];
      [defaults synchronize];
   }

 } 
```

现在你可以这样阅读：

```
if([[defaults objectForKey:@"filePaths"] objectAtIndex:indexPath.row])
{
  if ([[NSFileManager defaultManager] fileExistsAtPath:[[defaults objectForKey:@"filePaths"] objectAtIndex:indexPath.row]])
  {
     //here is your file
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:54:27.820

每次启动应用程序时，您都需要像上面那样在 NSDocument 目录中再次搜索路径。

您可以在 AppDelegate 类 didFinishLaunching 中为 filePath 创建实例变量来记录路径。

```
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *tempFileName = [[NSString alloc] initWithString:@"PutYourFileName"];
NSString *soundFilePath = [docsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.wav", tempFileName]]; 
```

# c# - 无法将 DATETIME 的时间组件保存到 SQL Server

> ID：12152898
> 
> 赞同：0
> 
> 时间：2012-08-28T04:44:36.640
> 
> 标签：c#, sql-server

我无法将我的时间组件保存`DATETIME`到 SQL Server。

SQL Server 中的当前结果是，`2012-08-24 00:00:00:000`但我想要 SQL Server 中的当前时间`2012-08-24 14:25:50:789`

```
private void Invoice_Load(object sender, EventArgs e)
{
    txtTimeCurrent.Text = System.DateTime.Now.ToString();  
}

private void btSave_Click(object sender, EventArgs e)
{
    tbl_AsInvoice inv = new tbl_AsInvoice();
    inv.AsInvMDate = Convert.ToDateTime(txtTimeCurrent.Text).Date;
    using (TransactionScope ts = new TransactionScope())
    {
        db.tbl_AsInvoices.InsertOnSubmit(inv);
        db.SubmitChanges();
        ts.Complete();
    }
} 
```

* * *

我试试

```
inv.AsInvMDate = Convert.ToDateTime(txtTimeCurrent.Text); 
```

它不工作。T_T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:47:34.927

改变你的陈述：

```
inv.AsInvMDate = Convert.ToDateTime(txtTimeCurrent.Text).Date; 
```

至：

```
inv.AsInvMDate = Convert.ToDateTime(txtTimeCurrent.Text); 
```

您当前`Date`只保存部分，您需要保存完整`DateTime`

# android - 更新 ListView 上一个单击的项目

> ID：12152899
> 
> 赞同：0
> 
> 时间：2012-08-28T04:44:42.227
> 
> 标签：android, android-listview

我有 ListView，它被定制为有一个 EditText 框和一个 Button。ListView 将文本框显示为，`visible`但按钮显示为`invisible`. 当用户单击 ListView 中的项目时，Button 变为可见。我为 ListView 编写了以下代码：

```
public void onItemClick(AdapterView<?> list, View view, int position, long id) {    
    view.findViewById(R.id.button).setVisibility(View.VISIBLE);
} 
```

上述代码在第一项的 Button 和第二项的 Button 可见的情况下起作用。

**我的问题：**
当单击 ListView 中的下一个项目时，上一个项目的 Button 应该变得不可见，因为当前项目的 Button 变得可见。那么如何更新前一项的视图呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T04:52:54.917

将前一行存储在类变量中：

```
View previous;
...

public void onItemClick(AdapterView<?> list, View view, int position, long id) {    
    if(previous != null)
        previous.setVisibility(View.INVISIBLE);

    // Set the current button to visible while saving it for the next click 
    previous = view.findViewById(R.id.button);
    previous.setVisibility(View.VISIBLE);
} 
```

* * *

**从评论添加**

你是对的。适配器的视图回收正在影响其他行，所以让我们扩展您正在使用的任何适配器并覆盖它的`getView()`方法：

```
public int selectedRow = -1;
...

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);

    // Here, either use findViewById() (slower) or the ViewHolder method (faster) to load the button:
    // Button button = ...

    if(position == selectedRow) 
        button.setVisibility(View.VISIBLE);
    else
        button.setVisibility(View.GONE);

    return view;
} 
```

在你的`onItemClick()`方法中添加这样的一行：

```
adapter.selectedRow = position; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:52:10.637

在按钮而不是列表视图本身上附加一个侦听器。您可以在 getview() 方法中执行此操作。

# centos - /etc/sysconfig/network-scripts/ifcfg-eth0 在 centos 6.3 上丢失

> ID：12152903
> 
> 赞同：0
> 
> 时间：2012-08-28T04:45:17.213
> 
> 标签：centos, xen

我正在尝试使用以下教程在 Centos 6.3 上安装 xen - [http://www.howtoforge.com/virtualization-with-xen-on-centos-6.2-x86_64-paravirtualization-and-hardware-virtualization](http://www.howtoforge.com/virtualization-with-xen-on-centos-6.2-x86_64-paravirtualization-and-hardware-virtualization)。在这里，当我试图查看文件 /etc/sysconfig/network-scripts/ifcfg-eth0 时，我找不到它。任何人都可以对此有所了解吗？帮助我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:59:14.520

如果您最初通过网络管理器设置网络，您可以寻找

```
/etc/sysconfig/network-scripts/ifcfg-Auto eth0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T14:31:37.113

如果您使用的是 open-vswitch，则默认情况下会删除这些脚本。您可以通过发出以下命令来检查您所处的网络模式：

```
cat /etc/xensource/network.conf 
```

# git - git push --receive-pack 选项和安全性：如何防止黑客攻击？

> ID：12152905
> 
> 赞同：2
> 
> 时间：2012-08-28T04:45:29.790
> 
> 标签：git

`git push --receive-pack`选项提供了运行`git-receive-pack`not in的灵活性`$PATH`。

但它也是一个安全漏洞，因为它也可以运行任何其他命令。

如何通过指定来防止用户入侵服务器`--receive-pack`？

同样，我怎样才能避免漏洞`git pull --upload-pack`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:54:08.200

通过 https 或 ssh，您可以在您的 git 请求（推/拉）和 git 本身之间添加一个授权层，如**[gitolite 。](http://sitaramc.github.com/gitolite/index.html#what)**
对于 ssh，它将使用[ssh 强制命令机制](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)来拦截所有命令，拒绝非 git 的命令。

[`gitolite-shell`它将解析命令](https://github.com/sitaramc/gitolite/blob/master/src/gitolite-shell#L139-L165)，并提取 repo 名称，调用`git-upload-pack|git-receive-pack`时不考虑 git-receive-pack 程序的路径。

# javascript - 在字符串的唯一部分之后格式化

> ID：12152906
> 
> 赞同：0
> 
> 时间：2012-08-28T04:45:42.130
> 
> 标签：javascript, jquery

假设我有一个字符串，它总是有两个字母的标识符，例如 ID 或 XX，或其他变体。唯一一致的是标识符是两个大写字母。

例如：`Half, ID, Acre`

是否可以只在jQuery 的字符串部分`<br/>`之后添加一个？`ID`

例如`Half, ID,<br/> Acre`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:48:48.227

如果它是字符串操作，你会使用纯 JavaScript，而不是 jQuery。

以下`"<br/>"`在连续两个大写字母后跟逗号的任何实例之后添加：

```
var s = "Half, ID, Acre";

var sWithBR = s.replace(/([A-Z][A-Z],)/g, "$1<br/>"); 
```

如果您还想在字符串末尾允许两个大写字母且没有尾随逗号，那么您可以使用以下正则表达式：

```
/([A-Z][A-Z](,|$))/g 
```

如果您只想执行第一个，例如，仅`ID`在从正则表达式末尾`"Half, ID, XY, ZZ, Acre"`删除`g`标志时进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:04:08.103

另一种方法 - 使用原生 JavaScript 的 .split() 和 .join()：

```
var oldString = "Half, ID, Acre";
var newString = oldString.split('ID,').join('ID,<br/>'); 
```

这里的工作示例：http: [//livecoding.io/3495095](http://livecoding.io/3495095)

# c++ - 确定传递给模板函数的变量类型

> ID：12152907
> 
> 赞同：1
> 
> 时间：2012-08-28T04:45:52.360
> 
> 标签：c++, templates, types

我正在创建一个小应用程序，需要使用模板函数。几乎应该要求用户输入某种数据类型的 2，然后告诉他们两者中哪一个更大。所以作为一个模板函数，我想告诉我传递给我的函数的内容。例如，如果函数需要双打，我希望能够询问用户“输入 2 个双打”。等等。这是函数调用和设置：

```
int main(){
    getInput(intA, intB);
    getInput(doubleA, doubleB);

    ...
}

template <typename TYPE>
TYPE getInput(TYPE a, TYPE b){
    cout << "Enter 2 " << TYPE << endl;
    cin >> a >> b;
    ...
} 
```

这个应用程序正在开发中，但它只是让我要求用户“输入一些输入”等。甚至不确定这是否可能，但认为它会很酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:50:48.517

使用[RTTI](http://en.wikibooks.org/wiki/C%2B%2B_Programming/RTTI)：

```
cout << typeid(a).name(); 
```

# python - 如何在 python 中获取传递给我的装饰器的函数的文件名？

> ID：12152911
> 
> 赞同：5
> 
> 时间：2012-08-28T04:46:07.810
> 
> 标签：python, metaclass, python-datamodel

我想获取正在装饰的函数的原始文件/脚本名等。我怎样才能做到这一点？

```
 def decorate(fn):
        def wrapped():
            return "scriptname: " + fn.scriptname?  
        return wrapped 
```

我尝试使用`fn.__code__`，但这给了我更多我需要的东西。我可以解析该字符串以获取函数名称，但想知道是否有更优雅的方法来做到这一点

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T05:00:29.433

```
import inspect
inspect.getfile(fn) 
```

但是，这不适用于[内置函数](http://docs.python.org/library/functions.html)，您必须回退到`inspect.getmodule`那些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T04:49:22.920

试试这个：

```
return "filename: " + fn.func_code.co_filename 
```

# c# - 初始化列表 在 CLR C++ 中使用数组？

> ID：12152913
> 
> 赞同：5
> 
> 时间：2012-08-28T04:46:23.590
> 
> 标签：c#, arrays, list, c++-cli, clr

我想知道为什么这段代码在 C++/CLI 中不起作用，但在 C# 中却很容易？

```
List<Process^>^ processList = gcnew List<Process^>(
  Process::GetProcessesByName(this->processName));); 
```

> 错误 C2664: 'System::Collections::Generic::List::List(System::Collections::Generic::IEnumerable ^)' : 无法将参数 1 从 'cli::array ^' 转换为 'System::Collections ::Generic::IEnumerable ^'

这是我想出的。做得非常好。:)

```
List<Process^>^ processList = gcnew List<Process^>(
  safe_cast<System::Collections::Generic::IEnumerable<Process^>^>
    (Process::GetProcessesByName(this->processName))); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T05:03:21.843

你需要使用[`safe_cast`](http://msdn.microsoft.com/en-us/library/23b7yy6w.aspx). 根据[MSDN 文档`System::Array`](http://msdn.microsoft.com/en-us/library/system.array.aspx)，

> # 重要的
> 
> 从 .NET Framework 2.0 开始，Array 类实现了`System.Collections.Generic::IList<T>`、`System.Collections.Generic::ICollection<T>`和`System.Collections.Generic::IEnumerable<T>`泛型接口。这些实现在运行时提供给数组，因此对文档构建工具不可见。因此，泛型接口不会出现在**Array**类的声明语法中，并且没有接口成员的参考主题，只能通过将数组转换为泛型接口类型（显式接口实现）才能访问这些成员。将数组强制转换为这些接口之一时要注意的关键是添加、插入或删除元素的成员 throw `NotSupportedException`。

如您所见，强制转换必须在运行时在 C++ 中显式完成，例如

```
List<Process^>^ processList = gcnew List<Process^>(
    safe_cast<IEnumerable<T> ^>(
        Process::GetProcessesByName(this->processName))); 
```

# spring - JSF 2.0、Spring 3.1 和 Hibernate 4.0 集成

> ID：12152914
> 
> 赞同：4
> 
> 时间：2012-08-28T04:46:24.020
> 
> 标签：spring, hibernate, jsf, jsf-2

我正在尝试使用 JSF 2.0 + Hibernate 4 和 Spring 3.1 设置 Web 应用程序。测试我的 Dao 方法时出现以下异常。

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'empDaoImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.springHibernate.dao.EmpDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'SessionFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.springHibernate.test.TestEmployee.main(TestEmployee.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.springHibernate.dao.EmpDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'SessionFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 13 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'SessionFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 15 more
Caused by: org.hibernate.HibernateException: Error applying BeanValidation relational constraints
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:219)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:126)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1726)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1764)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:184)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:314)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 25 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:208)
    ... 33 more
Caused by: java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.hibernate.validator.util.LoggerFactory.make(LoggerFactory.java:29)
    at org.hibernate.validator.util.Version.<clinit>(Version.java:24)
    at org.hibernate.validator.engine.ConfigurationImpl.<clinit>(ConfigurationImpl.java:59)
    at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:41)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
    at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:521)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:119)
    ... 38 more 
```

下面是我的代码

**雇员.java**

```
package com.springHibernate.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="employee")
public class Employee {
    @Id
    @Column(name="EmpID")
    private int empID;

    @Column(name="EmpName")
    private String empName;

    @Column(name="Email")
    private String email;

    public int getEmpID() {
        return empID;
    }

    public void setEmpID(int empID) {
        this.empID = empID;
    }

    public String getEmpName() {
        return empName;
    }

    public void setEmpName(String empName) {
        this.empName = empName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

EmployeeDao.java

```
package com.springHibernate.dao;

import java.util.List;

import com.springHibernate.model.Employee;

public interface EmpDao {

    public List<Employee> getAllEmployees();

} 
```

**EmployeeDaoImpl.java**

```
package com.springHibernate.dao;

import java.util.List;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

import com.springHibernate.model.Employee;

@Repository("empDaoImpl")
public class EmpDaoImpl implements EmpDao{

    @Autowired
    private SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @SuppressWarnings("unchecked")
    @Override
    public List<Employee> getAllEmployees() {
        return sessionFactory.getCurrentSession().createQuery(" from Employee").list();
    }

} 
```

**EmpService.java**

```
package com.springHibernate.service;

import java.util.List;

import com.springHibernate.model.Employee;

public interface EmpService {

    public List<Employee> getAllEmployees();

} 
```

EmpServiceImpl.java

```
package com.springHibernate.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.springHibernate.dao.EmpDao;
import com.springHibernate.model.Employee;

@Service("empServiceImpl")
public class EmpServiceImpl implements EmpService {
    @Autowired
    EmpDao empDao;

    public EmpDao getEmpDao() {
        return empDao;
    }

    public void setEmpDao(EmpDao empDao) {
        this.empDao = empDao;
    }

    @Transactional(readOnly = true)
    public List<Employee> getAllEmployees() {
        return empDao.getAllEmployees();
    }

} 
```

**EmployeeBean.java**

```
package com.springHibernate.managedBeans;

import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;

import org.springframework.beans.factory.annotation.Autowired;

import com.springHibernate.model.Employee;
import com.springHibernate.service.EmpService;

@ManagedBean(name = "empBean")
@RequestScoped
public class EmployeeBean {

    @ManagedProperty(value = "#{EmpServiceImpl}")
    EmpService empService;

    List<Employee> empList;

    private int empID;
    private String empName;
    private String email;

    public EmpService getEmpService() {
        return empService;
    }

    public void setEmpService(EmpService empService) {
        this.empService = empService;
    }

    public List<Employee> getEmpList() {
        empList = new ArrayList<Employee>();
        empList.addAll(getEmpService().getAllEmployees());
        return empList;
    }

    public void setEmpList(List<Employee> empList) {
        this.empList = empList;
    }

    public int getEmpID() {
        return empID;
    }

    public void setEmpID(int empID) {
        this.empID = empID;
    }

    public String getEmpName() {
        return empName;
    }

    public void setEmpName(String empName) {
        this.empName = empName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                      http://www.springframework.org/schema/tx
                      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                      http://www.springframework.org/schema/context
                      http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.springHibernate.dao,com.springHibernate.managedBeans,com.springHibernate.service,com.springHibernate.model" />
    <context:annotation-config />

    <bean id="Employee" class="com.springHibernate.model.Employee" />

    <bean id="EmpService" class="com.springHibernate.service.EmpServiceImpl">
        <property name="empDao" ref="EmpDao"/>
    </bean>

    <bean id="EmpDao" class="com.springHibernate.dao.EmpDaoImpl">
        <property name="sessionFactory" ref="SessionFactory"></property>
    </bean>

    <bean id="DataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/test" />
        <property name="username" value="root" />
        <property name="password" value="ASSET" />
    </bean>

    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="txManager" />

    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

</beans> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <display-name>SpringHibernate</display-name>

   <context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml</param-value>
  </context-param>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
  </listener>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>/pages/index.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>

</web-app> 
```

**面孔-config.xml**

```
<?xml version="1.0"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>
</faces-config> 
```

**测试类**

```
package com.springHibernate.test;

import java.util.ArrayList;
import java.util.List;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.springHibernate.model.Employee;
import com.springHibernate.service.EmpService;

public class TestEmployee {

     public static void main(String[] args) {
         ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");

         EmpService empService = (EmpService)ctx.getBean("empServiceImpl");

         List<Employee> l1 = new ArrayList<Employee>();

         l1 = empService.getAllEmployees();

         for (Employee e1 : l1)
             System.out.println("Employee Name:  "+e1.getEmpName());
     }

} 
```

我正在尝试使用注释。Slf4j 已经存在于 lib 文件夹中。请查看代码并帮助我设置项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:57:43.940

这是修改后的工作 applicationContext.xml。我忘记将属性 annotatedClasses 添加到 sessionFactory。

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                      http://www.springframework.org/schema/tx
                      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                      http://www.springframework.org/schema/context
                      http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.springHibernate" />
    <context:annotation-config />

    <bean id="DataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/test" />
        <property name="username" value="root" />
        <property name="password" value="ASSET" />
    </bean>

    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />

         <property name="annotatedClasses">
        <list>
            <value>com.springHibernate.model.Employee</value>
        </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="txManager" />

    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

</beans> 
```

# php - 将uploadify与firefox一起使用时会话不起作用

> ID：12152915
> 
> 赞同：0
> 
> 时间：2012-08-28T04:46:24.640
> 
> 标签：php, javascript, jquery, mysql, uploadify

我的uploadify 脚本适用于包括IE 在内的所有浏览器。但不能在Firefox中工作。我有三个文件。1>包含uploadify脚本和变量2>是newuploadify.php，它启动会话并给会话变量一些值。3>是基于会话在数据库中插入数据。

这在除 chromium（不是 Chrome）和 Firefox 之外的所有浏览器中都能很好地工作。

不知何故，会话没有从第二个文件传递到 Firefox 中的第三个文件。

我的脚本

1>`

```
<?php if (!isset($_SESSION)) {
session_start();
}
?>
<html>
<head>
<style>
<style type="text/css">
    .uploadify-button {
        background-color: transparent;
        border: none;
        padding: 0;
    }
    .uploadify:hover .uploadify-button {
        background-color: transparent;
    }
</style>
</style>
<script type="text/javascript" src="uploadify/jquery.uploadify-3.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="uploadify/uploadify.css" />
<script>
 var $j = jQuery.noConflict();
$j(document).ready(function(){
  $j("#photocancelbtn").hide();
  $j("#photouploadstartbtn").hide();
   $j("#filein").hide();
  $j("#filein").fadeIn(8000);
$j(function() {
    $j('#file_upload').uploadify({
        auto : false,
            'swf'      : 'uploadify/uploadify.swf',
            'uploader' : 'newuploadify.php',
             // Put your options here

        'queueSizeLimit' : 1,
        'checkExisting' : '/uploadify/check-exists.php',
        'multi'    : false,
        'buttonText' : 'Add Photo',
        'fileTypeDesc' : 'Image Files',
            'fileTypeExts' : '*.gif; *.jpg; *.png; *.JPG',
        'fileSizeLimit' : '5MB',
        'onClearQueue' : function(queueItemCount) {
               $j("#photocancelbtn").hide();
               $j("#photouploadstartbtn").hide();
        },
        'onSelect' : function(file) {
              $j("#photocancelbtn").show();
              $j("#photouploadstartbtn").show();
        },

        'onUploadSuccess' : function(file, data, response) {
                $j("#photocancelbtn").hide();
               $j("#photouploadstartbtn").hide();

               changeBtnText();
    }

    }); /* closing uploadify line*/

}); /* closing funciton line*/
}); /*closing document ready function*/
function changeBtnText() {
    $j('#file_upload').uploadify('settings','buttonText','Change Photo');
}
function restoreBtnText() {
    $j('#file_upload').uploadify('settings','buttonText','Add Photo');
}   

</script>
</head>
<body>
<table>
<tr>
<td id="filein">
<input type="file" name="file_upload" id="file_upload" />
</td>
<td id="btns">
<a id="photouploadstartbtn" href="javascript:$j('#file_upload').uploadify('upload')">Start Upload</a><br>
<a id="photocancelbtn" href="javascript:$j('#file_upload').uploadify('cancel','*');">Remove photo</a>
</td>
</tr>
</table>
</body>
</html> 
```

`

还尝试在上面的代码中通过 scriptData 传递数据，但结果仍然相同。

2>

`

```
<?php if (!isset($_SESSION)) {
session_start();
}
require('connection.php');
$targetFolder = '/images/'; // Relative to the root
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $randomid=uniqid();
    $targetFile = rtrim($targetPath,'/') . '/'.$randomid.$_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png','JPG','PNG'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
    $fp     = fopen($tempFile, 'r');
    $data = fread($fp, filesize($tempFile));
    $data = addslashes($data);
    fclose($fp);

move_uploaded_file($tempFile,$targetFile);
$_SESSION['photopath'] = $randomid.$_FILES['Filedata']['name']; //Just storing the file name for the path.
$_SESSION['photocheck']='Y';
/*The above sessions are setting but are not being passed to the third file.
error_log($_SESSION['photopath']);
error_log($_SESSION['photocheck']);
error_log(session_id());

    } else {
        echo 'Invalid file type.';

    }
}
?> 
```

`

3>

`

```
#Getting if photo is added.
                if(isset($_SESSION['photocheck'])){
                    $photocheck=$_SESSION['photocheck'];
                    error_log('Photocheck=');
                    error_log($photocheck);
                    unset($_SESSION['photocheck']);
                }
                if(isset($_SESSION['photopath'])){
                //$photo=$_SESSION['photo'];#Encoding string as image. For using mysqli no need to do this step.just bind param as string.
                $photopath=$_SESSION['photopath'];
                error_log('Photopath=');
                    error_log($photopath);
                unset($_SESSION['photopath']);
                }

                #Inserting 
                if($photocheck=='Y'){
                error_log('Entered into insert q');

                }
                else{
                error_log('Did not enter !!');
                } 
```

`

我在使用 firefox 时没有输入，在使用其他浏览器时输入了 insert q。请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:17:09.917

您不必这样做：

```
<?php if (!isset($_SESSION)) {
         session_start();
      }
?> 
```

PHP 知道不要开始另一个会话，所以你可以让它保持原样

```
<?php
     session_start();
?> 
```

还要确保你没有任何输出，`require('connection.php');`如果它只是`PHP`你可以省略最后`?>`一个 php 块的脚本，只是为了确保你没有任何额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T02:12:34.950

```
if(@$_REQUEST['SESSION_ID'] && ($session_id=$_REQUEST['SESSION_ID']) !=session_id()){
    session_destroy();
    session_id($session_id);
    @session_start();    
} 
```

正确答案

# android - 将 Facebook 个人资料图片设置为 ListView 中的 ImageView

> ID：12152924
> 
> 赞同：0
> 
> 时间：2012-08-28T04:47:59.630
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我得到了这个在 MySQL 表中记录用户 Facebook ID 的应用程序，现在我正在尝试获取此 ID 并在 ListView 上显示用户的个人资料图片，但我不知道我做错了什么。

我的自定义 ArrayAdapter：

```
public class VisualAdapter extends ArrayAdapter<String> {

private final Context contexto;

private final String[] comics, username, userid;

URL img_url = null;

Bitmap bm;

public VisualAdapter(Context contexto, String[] comics, String[] username, 
        String[] userid) {
    super(contexto, R.layout.exibeimg, comics);
    this.contexto = contexto;
    this.comics = comics;
    this.username = username;
    this.userid = userid;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    LayoutInflater inflater = (LayoutInflater) contexto
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.exibeimg, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.tvTitleImage);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.ivImageVisual);
    ImageView ivUser = (ImageView) rowView.findViewById(R.id.ivUser);
    TextView tvUser = (TextView) rowView.findViewById(R.id.tvUserNAME);
    textView.setText(comics[position]);
    tvUser.setText(username[position]);

    try {
        img_url = new URL("http://graph.facebook.com/"+userid+"/picture?type=thumbnail");
        bm = BitmapFactory.decodeStream(img_url.openConnection().getInputStream());
        ivUser.setImageBitmap(bm);
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return rowView;
}

} 
```

[日志猫： http](http://pastebin.com/kmLXKvZJ) ://pastebin.com/kmLXKvZJ

此外，这是在选项卡内。它在选项卡 2 中，当我单击选项卡 2（查看此列表）时，当应用程序从选项卡 1 启动时，加载需要几秒钟，我可以做些什么来更快地加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:56:52.993

加载需要几秒钟，因为您正在内部同步执行网络操作`getView()`，这会阻止主 UI 线程在等待网络响应时每次渲染视图。这很糟糕，您需要做的是异步延迟加载图像，这样就不会在 UI 线程上执行下载图片。

阅读这篇关于如何正确实施[的精彩文章](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)`ListView`，以便加载不需要几秒钟。

# c# - 在 finally 块中抛出异常是一种好的做法吗？

> ID：12152926
> 
> 赞同：2
> 
> 时间：2012-08-28T04:48:11.143
> 
> 标签：c#, exception, try-catch-finally

有一个很好的问题[，当从 finally 中抛出异常时，Catch 块没有被评估，](https://stackoverflow.com/questions/12150994/catch-block-is-not-being-evaluated-when-exceptions-are-thrown-from-finallys)它正在讨论在 finally 块中抛出异常的一些有时意想不到的结果。

我想不出任何好的理由为什么要在 finally 块中抛出异常。如果之前有异常，它总是会丢失。我总是看到 finally 习惯于以不应该抛出异常的方式进行清理。

谁能解释什么时候在 finally 块中引发异常是合适的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:31:56.300

当你`Exception`抛出 finally 时，它会向上传播，最重要的`Exception`是在抛出的点停止，因此 finally 的其余部分不会被执行。此外，如果 try 块中发生异常，它将消失，并且当前异常将从 finally 块中抛出。

我无法想到任何情况，例如您最终`Exception`出于特定原因在调用者级别抛出然后处理它（可能有其他方法来管理此类逻辑），因此您可以在调用者处水平过程进一步基于`Exception`抛出。

我只能说，以后所有阅读并尝试遵循代码的眼睛都会有一个健康的惊喜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:42:57.763

很好，.NET 很好地支持。问题是*捕捉*异常，这是一个非常糟糕的做法。您正确恢复程序状态的几率非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T04:51:48.160

try catch finally 是非常重要的构造。可以肯定的是，即使抛出异常，finally块中的代码也会被执行。处理外部资源以释放它们非常重要。垃圾收集不会为您做到这一点。在 finally 部分中，您不应该有 return 语句或抛出异常。这样做是可能的，但这是一种不好的做法，可能会导致不可预知的结果。

# tcl - 关闭文件名中的波浪号替换？

> ID：12152929
> 
> 赞同：3
> 
> 时间：2012-08-28T04:48:18.317
> 
> 标签：tcl

关于无法关闭文件命令（以及其他一些命令）中的波浪号替换，是否已完成或计划执行任何操作？我读到的最新消息是[http://wiki.tcl.tk/28190](http://wiki.tcl.tk/28190)，但肯定不能忽略编程语言中如此危险的特性吗？让 C 函数 Tcl_TildeSubst() 检查全局 Tcl 变量的存在，并以此为基础进行波浪号扩展，难道不是那么简单吗？

当 shell 脚本不够用时，我经常编写 Tcl 脚本，而且很多时候它包括比较、复制、打开、删除和/或重命名文件。在我运行脚本之前，我总是`find`用来检查以波浪号 (~) 开头的文件名。我有兴趣了解其他 Tcl 程序员是如何做到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T08:32:44.923

## 背景

波浪号替换仅发生在 Tcl 即将将字符串解释为文件名的位置，并且仅在字符串的第一个字符为 a 时发生`~`（如果该字符在其他任何地方，则纯粹是正常的）。恰好有两个替换完成：

1.  如果`~`是单独的或后跟目录分隔符，则它指的是您的主目录（嗯，严格来说是`HOME`环境变量中命名的目录，默认为您的主目录）。
2.  如果`~`后面有任何其他内容，则文件名的其余部分直到字符串末尾或第一个目录分隔符（以先到者为准）被解释为用户名，并且该`~user`序列被该用户的主目录替换（查找使用系统实用程序，如`/etc/passwd`Unix 等中所列）

这些功能在安全解释器中被禁用，即使用`interp create -safe`或使用创建的解释器`safe::interpCreate`。

## 解决方法

阻止前导`~`成为问题的最简单方法是放在`./`它前面，并始终使用`-directory`选项 to `glob`（否则，这是 Tcl 中唯一可以产生这些类型的文件名模棱两可的地方；可能是其他任何地方）。在整个过程中使用完整的文件名通常会减少整体问题（我建议尽可能不要更改工作目录；这只会导致巨大的混乱）。

我不认为安全解释器是一种解决方法，因为它们还有许多其他受限功能（例如，默认情况下根本无法访问*文件*系统）。

## 政策问题

至于应该可以禁用它的建议……这是一个有趣的建议，但从未在 Tcl 的指导委员会中认真提出过。问题是有很多代码假设当前行为；我*认为*添加一个hack（例如，一个不支持的魔法变量）来关闭它不会是一个特别的问题——在扩展完成的时候有一个解释器上下文，所以检查一个Tcl变量来看看是否做这是微不足道的——但我个人非常担心这种变化会意外破坏什么。

Stack Overflow 不是讨论此类更改的好环境。你最好在[tcl-core mailing list](https://lists.sourceforge.net/lists/listinfo/tcl-core)上询问。请注意，有时这是一个相当强大的辩论室（尽管几乎总是礼貌）。另一种选择（如果你喜欢 IRC）是在 freenode 上的 #tcl 上询问。

# android - as3 将内容从服务器下载到应用程序目录？

> ID：12152930
> 
> 赞同：1
> 
> 时间：2012-08-28T04:48:30.900
> 
> 标签：android, actionscript-3, air, download, directory

```
import flash.filesystem.*;
/// Change the line below to point to your mp3 online
var urlString:String = "http://edvizenor.com/upload/php/files/trust.mp3";
var urlReq:URLRequest = new URLRequest(urlString);
var urlStream:URLStream = new URLStream();
var fileData:ByteArray = new ByteArray();
urlStream.addEventListener(Event.COMPLETE, loaded);
urlStream.load(urlReq);

function loaded(event:Event):void
{
    urlStream.readBytes(fileData, 0, urlStream.bytesAvailable);
    writeAirFile();
}

function writeAirFile():void
{ 
    // Change the folder path to whatever you want plus name your mp3
    // If the folder or folders does not exist it will create it. 
```

**以下是我需要帮助的内容：**

```
var file:File = File.userDirectory.resolvePath("Yahoo.mp3");// WORKS
var file:File = File.applicationDirectory.resolvePath("Yahoo.mp3"); // NO WORK 
```

我需要得到这第二行以保存到它存储的目录。任何想法我做错了什么？

```
 var fileStream:FileStream = new FileStream();
    fileStream.open(file, FileMode.WRITE);
    fileStream.writeBytes(fileData, 0, fileData.length);
    fileStream.close();
    trace("The file is written.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:36:47.323

保存在应用程序目录中。采用

```
var file:File = File.userDirectory.resolvePath("Yahoo.mp3");// WORKS
var file:File = File.applicationStorageDirectory.resolvePath("Yahoo.mp3"); // It will work

var fileStream:FileStream = new FileStream();
fileStream.open(file, FileMode.WRITE);
fileStream.writeBytes(fileData, 0, fileData.length);
fileStream.close();
trace("The file is written."); 
```

}

因为应用程序目录是你的应用程序的包目录。

# entity-framework - 实体框架更改为 SQL Server Express，如何将其更改回 Localdb

> ID：12152939
> 
> 赞同：4
> 
> 时间：2012-08-28T04:49:10.630
> 
> 标签：entity-framework, ef-code-first, localdb

我正在使用 EF 代码优先（.NET 4.5 + VS2012）。我的项目正在正确创建和使用 LocalDB。我的机器（2008R2）上也安装了 SQL Server Express。我没有更改任何配置，但它切换到使用 SQL Server Express。

我现在已经停止了我的 SQL Server 实例，每当我尝试使用重建数据库时，都会`Update-Database`收到以下消息：

> *System.Data.ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。---> System.Data.ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。---> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

我的配置文件具有以下 EF 配置：

```
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0" />
  </parameters>
</defaultConnectionFactory> 
```

有什么建议吗？我更喜欢使用 Localdb 而不是 SQL Server Express。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:18:10.377

结果是，出于某种原因，GUI app.config 引用了 SqlConnectionFactory 而不是 LocalDbConnectionFactory。解决这个问题就解决了。

# android - 从意图中获取布局细节

> ID：12152944
> 
> 赞同：0
> 
> 时间：2012-08-28T04:50:06.483
> 
> 标签：android, android-intent

我有一个小查询，假设我们使用意图启动一个活动

```
startActivity(intent); 
```

并打开一个新屏幕，其中包含内容，例如按钮和文本字段，我只需要知道是否可以获取有关布局及其内容的详细信息。

我认为这是不可能的，只是想得到一个适当的确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:03:31.293

不，这是不可能的。而且（来自评论）不，不可能从单独的`Activity`. 但是，您可以做的是：

```
// Calling code:
intent.putExtra(getPackageName() + ".click_me", R.id.your_button); // getPackageName() is for best practices
startActivity(intent);

// In your Activity:
Intent intent = getIntent(); // Get the Intent we used to launch this
int buttonToClick = intent.getIntExtra(getPackageName() + ".click_me", 0); // Get the integer
if (buttonToClick != 0) { // If it's 0, we didn't specify it
    View toClick = findViewById(buttonToClick); // Find the View
    if (toClick != null && toClick instanceof Button) { // If the View exists, and is a Button..
        ((Button) toClick).performClick(); // ..then click it
    }
} 
```

您提供以整数`Intent`开头的。`Activity`该整数表示 a `View`（更具体地说，a `Button`）。一旦`Activity`接收到它，它就会找到匹配的`View`，检查它是否是 a `Button`，然后对其执行点击操作。

这样，您只需传递要单击的项目的整数 ID，而您打开`Activity`的只是处理其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:01:01.827

您可以使用 getChildAt() 获取内容

```
for(int i=0; i<((ViewGroup)v).getChildCount(); ++i) {
    View nextChild = ((ViewGroup)v).getChildAt(i);
} 
```

# class - 如何将 WithEvents 关键字与全局变量一起使用？

> ID：12152945
> 
> 赞同：6
> 
> 时间：2012-08-28T04:50:16.657
> 
> 标签：class, events, vb6, module

我正在尝试在 VB6 模块中声明一个变量，如下所示：

```
Public WithEvents MyObject As MyClass 
```

帮助文件说`WithEvents`只能在类模块中使用。为什么不能在`.bas`模块中使用？

我正在工作的遗留代码有一个在模块中全局声明的对象。我想添加`WithEvents`到此声明中，但我需要保持对象全局，因为许多其他形式等都引用该对象。如何在对代码的干扰最小的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:52:06.777

编写一个接受全局对象作为参数并接收其事件的类。

```
' Class MySink
Private WithEvents m_oSink As MyClass

Friend Sub frInit(oSink As MyClass)
    Set m_oSink = oSink
End Sub

Private Sub m_oSink_MyEvent()
    '--- implement event
End Sub 
```

`.bas`在您的模块中创建此类的实例。

```
Public g_oMyObject AS MyClass
Private m_oMySink As MySink

Sub Main()
    Set g_oMyObject = New MyClass
    Set m_oMySink = New MySink
    m_oMySink.frInit g_oMyObject
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T09:20:55.260

VB 中的事件是一个相当复杂的 COM 机制的包装。本质上，在这种机制中，所涉及的一切都必须是实现接口 IConnectionPoint 或 IConnectionPointContainer 的 COM 类。BAS 模块是传统 BASIC 的一部分，与 VB 类不同，它不是作为 COM 类实现的。我想他们本可以将 COM 中的 BAS 文件重新实现为单例类型对象（就像他们对 Global MultiUse 类所做的那样），但他们没有。所以，不幸的是，BAS 文件不能使用 WithEvents。

至于问题的最简单解决方案 - 您需要利用对象变量只是对对象的引用，而不是对象本身的事实。我想您希望您的事件消息到达必要的最高级别对象，以便您能够控制您感兴趣的应用程序的位。确定这个地方。例如，您可能有一个主窗体，您确定它将是第一个加载的对象，最后一个被卸载的对象。作为该对象初始化的一部分，传入对全局对象的引用，并将其设置为 WithEvents 模块级变量。你现在可以控制了。

但！！这是非常重要的！！您*必须*确保在应用程序关闭之前及时清除此引用，以防万一您对表单（或其他任何内容）有任何循环引用。在这种情况下，Form_Unload 事件将是理想的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:36:03.957

**一种简单方法的案例**

有时，对于一个类甚至是用户控件（实际上只是一种特殊的类）来说，在整个程序中具有广泛通用的属性和方法是非常有用的。

如果主要关注的是广泛使用无状态的“实用程序”方法（例如，某些与 Web 相关的具有 URL 编码、实体编码等方法），那么只需将一个额外的全局实例声明为“无”事件就可以相当便宜不会导致加载繁重的内部状态（数组、集合等）。由于您的程序无论如何都需要所有代码并且只有一个副本位于内存中，因此第二个实例可能相当便宜。

另一种选择是将这些“常见”操作甚至属性值分解到单独的类或静态（BAS）模块中。

但有时您有一个相当复杂的 UserControl 或 Class，您不想通过重构为单独的模块或以其他方式更改来自定义它们。也许您维护一个通用的标准版本以用于不同的项目。也许它是一个你甚至没有来源的第 3 方库。任何。

**需要考虑的事情**

这给我们带来了另一种可能对你有用的技术，尽管用 Irving Mainway 的话来说它“不适合盲童”。如果您有足够的经验来使用它，那么您应该已经想到了 - 但我们没有一个人有完美的记忆（如果我们确实*花*时间阅读那本精美的手册）。

因此，也许由于某种原因这对您不起作用，并且您已经考虑并放弃了这个想法。

您的容器对象（Form、UserControl、父类等）可以在初始化时仔细设置对相关对象实例的*全局引用，并在其终止时删除该引用。*这应该小心避免循环或孤立引用，这些引用会阻止您的其他对象甚至整个程序卸载。

Johnny GoTo 不应该采取这种做法或粗心大意地使用它。但是，如果您知道自己在 VB 中做什么，并且已经阅读并理解了手册中讨论这种技术及其缺陷的部分，那么它会很有用。

假设您有一些 Form1 作为程序的启动对象。在 Form1 中，您有一个您编写的用户控件“WebWiz”的实例，名为 WebWiz1。但是在其他地方（另外三个或十二个表单？）您想调用一个 WebWiz 方法，将一组常见的 MIME 类型字符串值转换为文件扩展名。只有 Form1 需要处理 WebWiz1 的事件，而 WebWiz 的内部状态相当繁重，因此您不想仅为此方法创建额外的实例。

在静态模块中，您可以简单地声明：

`Public gWebWiz As WebWiz`

当 Form1 的 Initialize 或 Load 事件运行时（或对于一个类，在您创建`WithEvents`实例之后），您可以：

`Set gWebWiz = WebWiz1`

在 Form1 的 Unload 事件处理程序中：

`Set gWebWiz = Nothing`

然后你的程序有一个全局引用，它可以用于其他目的。

看起来很容易对吧？

好吧，如果您使用它的程序被编写为从一个`Sub Main`或一个主窗体开始的适当的代码“树”，那么您通常不必格外小心。但是，如果您是像 Pinball Wizard 那样编写代码的人之一，并且发现自己会问诸如“我如何找到所有打开的表单并卸载它们？”之类的问题。然后你：

*   为了避免程序“挂起”，还有更多工作要做，
*   可能不太适合使用这种技术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T11:43:11.963

我不确定您的应用程序有多大，但有几种方法可以做到这一点。这就是我要做的，尽管这可能需要你 15 分钟左右来重构你的应用程序以使用它。

首先将模块中的所有公共和全局方法和成员复制到一个名为（例如）clsApplication 的类中。

其次，在现在为空的模块（我们称之为 modGlobal）中，声明`Public Property Get Application() As clsApplication`. 继续添加一个二传手。

第三，在你`Sub Main()`启动你的程序中，将它添加为你的第一行`Set modGlobal.Application = New clsApplication`。

现在您已经用一个全局类替换了您的模块，该类可以侦听在应用程序范围内发生的事件。在您的应用程序的其余部分，您可以像这样访问您的全局状态，`Application.Config`或者`Application.GetUser()`您在全局级别保留的任何其他内容。

您当然可以将其应用于您希望使用 WithEvents 的变量，但无论如何您都应该真正考虑将代码从模块中取出。

* * *

刚刚看到@Mark 的评论。最小的方法是我坚持使用的方法。如果您的事件类是 MyEventSource，则创建一个名为 MyEventSourceListener 的类，该类具有一个名为的属性`Target`，您将对象传递到该属性中，并私下声明 WithEvents。然后 MyEventSourceListener 可以接收事件并将它们转发回您的模块。

我不喜欢它，因为它是一种 hack 并将代码放回模块中，但这可能是最方便的方法。

# php - 正则表达式匹配连续的 P 个标签

> ID：12152946
> 
> 赞同：0
> 
> 时间：2012-08-28T04:50:19.697
> 
> 标签：php, javascript, regex, pattern-matching, web-scraping

这是我一直在做的一个有趣的小家伙。我找到了很多解决方案，但没有一个是真正合适的。目标是“仅当连续有 3 个或更多时才匹配 p 标签”

所以我觉得这应该是正确的，但事实并非如此。

```
<p.*>(.*)<\/p>(?=\s?<p){3,} 
```

基本上，用我的话来说就是：

*   将 ap 标签与标签内的任何内容匹配
*   匹配任何内容，直到看到结束的 P 标记
*   仅匹配前面的（2 行以上）当且后跟
    *   一个空格字符（可能），然后是一个 < p
    *   如果这种情况发生 3 次或更多次

问题是这在 Javascript 中运行良好，但在 PHP 中却不行。PHP 说

```
Compilation failed: nothing to repeat at offset 28 
```

我尝试了不同轮次的括号来给它“​​没有重复”，但这会导致错误的正则表达式。

是的，这是用于网络抓取，但不，我正在做研究而不是做坏事。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:00:40.920

状态机 XML 解析器（SAX 解析器）似乎最适合我。这是一个例子：

```
class StateHelper {

    function __construct($filename) {
        $this->p_count = 0;
        $this->p_elements = array();
        $this->in_p = FALSE;
        $this->minimum_in_succession = 2;
        $this->successive_element_data = array();
        $parser = xml_parser_create();
        xml_set_element_handler($parser, array($this, 'start_element'), NULL);
        xml_set_character_data_handler($parser, array($this, 'character_data'));

        $fp = fopen($filename, 'r')
            or die ("Cannot open $filename");

        while ($data = fread($fp, 4096)) {
            xml_parse($parser, $data, feof($fp)) or 
                die(sprintf('XML ERROR: %s at line %d',
                xml_error_string(xml_get_error_code($parser)),
                xml_get_current_line_number($parser)));
        }
        xml_parser_free($parser);
        $this->start_element(NULL, "end", NULL);
    }

    function start_element($parser, $element_name, $element_attrs) {
        if ($element_name == 'P') {
            $this->p_count += 1;
            $this->in_p = TRUE;
        } else {
            if ($this->p_count >= $this->minimum_in_succession) {
                $this->successive_element_data[] = $this->p_elements;
            }
            $this->p_elements = array();
            $this->p_count = 0;
            $this->in_p = FALSE;
        }
    }

    function character_data($parser, $data) {
        if ($this->in_p && strlen(trim($data))) {
            $this->p_elements[] = $data;
        }
    }
}

$parseState = new StateHelper("example.html");
print_r($parseState->successive_element_data); 
```

**示例.html***

```
<html>
    <head>
    </head>
    <body>
        <p>Foo1</p>
        <p>Foo2</p>
        <p>Foo3</p>
        <div>
            <p>Bar1</p>
            <p>Bar2</p>
        </div>
        <ul>
            <li>
                <p>Baz1</p>
                <p>Baz2</p>
                <p>Baz3</p>
                <p>Baz4</p>
            </li>
        </ul>
    </body>
</html> 
```

**输出**

```
Array
(
    [0] => Array
        (
            [0] => Foo1
            [1] => Foo2
            [2] => Foo3
        )

    [1] => Array
        (
            [0] => Baz1
            [1] => Baz2
            [2] => Baz3
            [3] => Baz4
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:25:34.240

为什么不改用[XPath](http://schlitt.info/opensource/blog/0704_xpath.html)？那么表达式就是：

```
//p[name(following-sibling::*[1]) = 'p' and name(following-sibling::*[2]) = 'p'] 
```

该查询将查找`p`文档中所有`p`紧随其后的两个位置。

**示例（[演示](http://codepad.viper-7.com/JkorGg)）：**

```
$html = <<< HTML
<div>
    <p>lore</p>
    <p>ipsum</p>
    <p>dolor</p>
    <br/>
    <p>sit</p>
    <p>amet</p> 
</div>
HTML; 
```

我们只想找到这个片段中的第一个元素。代码将是：

```
$query = "//p[
    name(following-sibling::*[1]) = 'p' and 
    name(following-sibling::*[2]) = 'p'
]";

print_r(xpath_match_all($query, $html)); 
```

**输出：**

```
Array(
    [0] => Array(
        [0] => <p>lore</p>
    )
    [1] => Array(
        [0] => lore
    )
) 
```

结果数组包含该查询的outerHTML 和innerHTML。

当然，您不必使用该[`xpath_match_all`](https://gist.github.com/1358174)功能。它只是一个便利实用程序。有关替代方法，请参阅[如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/best-methods-to-parse-html/3577662#3577662)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:11:24.353

PHP 可能会给你这个错误，因为你的零宽度断言重复是没用的，perl 和 javascript 都不会警告你。

如果你匹配一次，你可以匹配任意多次，因为它实际上不会消耗任何东西。

根据您打算做什么，您可能能够摆脱正则表达式。但是，如果您需要以任何方式真正了解您的 HTML，您最好使用 HTML 解析库。

你需要做什么？

# iphone - 如何为 iphone 应用程序创建默认数据库？

> ID：12152953
> 
> 赞同：0
> 
> 时间：2012-08-28T04:51:07.493
> 
> 标签：iphone, database, sqlite

我只是倾向于 iPhone 应用程序开发，我已经弄清楚如何读取和写入数据库信息。但是，我仍然没有找到有关如何使用所有初始值设置默认数据库的足够信息。

示例 我想要一个包含水果列表的数据库。它最初将包含我能想到的所有值，例如 apple、pear、orange、apple 等。当应用程序第一次加载时，它应该已经是数据库的一部分。然后用户可以编辑这些值。

我不想将信息放在平面文本文件中并在初始启动时将其导入。我认为这有点蹩脚我宁愿只拥有一个初始数据库文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:19:04.447

您可以根据您的要求使用 SQLite 数据库。

请参阅[phone-sdk-tutorial-reading-data-from-a-sqlite-database](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)链接。它还包含样本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:11:43.160

前往以下链接

[http://deviphonesdk.blog.com/?p=42](http://deviphonesdk.blog.com/?p=42)

这是使用数据库最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:03:23.717

iOS Core Data 可能是最好的答案。创建项目时选择核心数据选项。它将创建示例基本结构供您与数据库交互。您不必担心编写查询，Core data 及其模型类和 API 将负责它。以下是有用的链接，您可以从中获取更多信息。

[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

[CoreDataBooks - 核心数据示例代码](https://developer.apple.com/library/ios/#samplecode/CoreDataBooks/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008405)

我希望这可以帮助你。

# c# - DbContext 在一行中“使用”

> ID：12152955
> 
> 赞同：4
> 
> 时间：2012-08-28T04:51:19.650
> 
> 标签：c#, .net, entity-framework, lambda, extension-methods

我发现自己经常这样做：

```
using(var db = new MyDbContext())
{
  return db.Users.ToList(); // or some other simple query
} 
```

这些简单的情况会很好，例如：

```
return MyDbContext.Execute(db => db.Users); 
```

但我不确定我会如何做扩展方法。理想情况下（我认为）它需要一个 DbContext（所以我可以重用代码）并返回模板化的 IList.. 但这可能吗？

当然，如果已经有一种方法可以做到这一点，我很乐意听到它..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T04:55:59.923

您可以为此编写最简单的静态类。您不需要扩展方法，因为这需要一个实例（并且根据您示例中的语法，您还没有）：

```
public static class MyDbContextStatic { 
    public static T Execute(Func<MyDbContext, T> f) {
        using (var db = new MyDbContext())
            return f(db);
    }
} 
```

要使用：

```
var users = MyDbContextStatic.Execute(db => db.Users); 
```

IIRC，您可能还想在处理 DbContext 之前在每个对象上调用 Detach 或其他东西。但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:52:27.763

您的第一个示例是正确的方法，它确保`Dispose`在块结束后调用，这将导致连接关闭。您可能会想出一个扩展方法来完成您的工作，但这需要您`DbContext`在内存中引用 static `DbContext`。

关于数据库连接，你应该尽可能晚地打开它们并尽可能早地关闭它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T08:32:28.853

DbContext 为您管理底层连接。
您可以调用 Dispose，但在大多数常见情况下，您不需要这样做。

[http://blog.jongallant.com/2012/10/do-i-have-to-call-dispose-on-dbcontext.html](http://blog.jongallant.com/2012/10/do-i-have-to-call-dispose-on-dbcontext.html)

# mysql - 如何在SQL中自动创建具有以下系列A001000001 ... A001xxxxxx的主键？

> ID：12152960
> 
> 赞同：2
> 
> 时间：2012-08-28T04:51:35.807
> 
> 标签：mysql, primary-key, auto-increment

我想创建一个`primary key(auto-increment)`以`A001000001`. 这里`A001`将是恒定的并且`000001`会被迭代。

我想要这样的行：

![在此处输入图像描述](../Images/baa3e80cb951a4a5d3aba2e53a028248.png)

如何使用 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T04:59:46.657

对于**SQL Server**（您没有明确指定您使用的是哪个 RDBMS），我的建议是：

*   在您的表中添加一`INT IDENTITY`列 - 坦率地说，我会将该列作为主键
*   将计算列添加到执行此“前缀”的表中

就像是：

```
CREATE TABLE dbo.YourTable
( ID INT IDENTITY(1,1) PRIMARY KEY CLUSTERED,
  EmpID AS 'A001' + RIGHT('0000000' + CAST(ID AS VARCHAR(10)), 7) PERSISTED
) 
```

这样，如果您插入一行，则会`ID`自动设置，并且`EmpID`也将自动设置为诸如`A0010000001`, `A0010000002`, .... 等值。

如果要将主键放在`EmpID`列上，则需要确保`NOT NULL`在创建时包含规范：

```
CREATE TABLE dbo.YourTable
( ID INT IDENTITY(1,1),
  EmpID AS 'A001' + RIGHT('0000000' + CAST(ID AS VARCHAR(10)), 7) PERSISTED NOT NULL
) 
```

然后您可以将主键约束放在该列上：

```
ALTER TABLE dbo.YourTable
ADD CONSTRAINT PK_YourTable PRIMARY KEY CLUSTERED (EmpID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:45:19.807

您可以创建 BEFORE INSERT 触发器，检查 MAX`id`值，递增它，添加前缀，然后插入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-08T02:14:07.433

它比你想象的要容易得多；）

创建表 bob ( id MEDIUMINT NOT NULL AUTO_INCREMENT, foo CHAR(30) NOT NULL, PRIMARY KEY (id) ) ENGINE=MyISAM;

# html - Sencha Architect 删除我在主页上的 html

> ID：12152962
> 
> 赞同：0
> 
> 时间：2012-08-28T04:51:41.867
> 
> 标签：html, overwrite, sencha-architect

每次我在 Sencha Architect 中保存我的项目时，它都会覆盖我对运行 ExtJS 的页面所做的任何更改（我们称之为 App.html）。通常这不会产生太大影响（Javascript 通常只查看它自己的对象和组件），除非我想包含另一个样式表、另一个脚本或在任何现有的 html 标记上放置一个“id”。

有办法解决这个问题吗？我可以告诉它不要触摸某些页面，或者改变它对上面内容的记忆，还是我将不得不拥有第二个 HTML，一个包含所有相同的 JS 和 ExtJS，但不会被编辑，因为它不是项目的一部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:55:24.863

对于样式表，您可以添加另一个资源，但是对于其他 javascript，我只需保存链接并手动添加它们，这确实是一个痛苦。

添加多个 ID 时，您将绑定相同的东西。我尝试为组件应用多个 ID，但它也不接受它，所以在这种情况下，我被迫让每个 ID 都不同。出于某种奇怪的原因，它也只想在我的地方接受一门课，所以在某个地方它对我来说没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:42:36.677

我相信简单的答案是*不，你不能*。

但是，您可以按照 Dorvalla 的建议进行操作并添加新资源（只需使用项目检查器中的 + 按钮），这适用于其他 JavaScript 和 CSS 文件。例如，这是一个为 sencha touch 项目自动生成的 app.html

```
<!DOCTYPE html>

<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>llm</title>
    <link rel="stylesheet" href="resources/css/app.css" id="appcss">
    <link rel="stylesheet" href="resources/css/llm.css" id="llm">
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src="sdk/sencha-touch-all.js"></script>
    <script src="functions.js" id="functions"></script>
    <script src="cordova-2.0.0.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
        if (!Ext.browser.is.WebKit) {
            alert("The current browser is unsupported.\n\nSupported browsers:\n" +
                "Google Chrome\n" +
                "Apple Safari\n" +
                "Mobile Safari (iOS)\n" +
                "Android Browser\n" +
                "BlackBerry Browser"
            );
        }
    </script>
</head>
<body></body>
</html> 
```

[您可以在docs.sencha.com](http://docs.sencha.com/architect/2/#!/guide/resources)上找到有关项目资源的更多信息

# facebook - 尝试发布 FB 操作时，我得到了一个 ID，但没有发布任何内容

> ID：12152963
> 
> 赞同：0
> 
> 时间：2012-08-28T04:51:44.220
> 
> 标签：facebook, facebook-opengraph

这是我的代码

```
 window.fbAsyncInit = function() {
        FB.init({
          appId      : 'xxxxxxxxxxxxx', // App ID
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

       function postscore(){
        FB.login(function(response){
          if (response.authResponse)
          {
            var uid = response.authResponse.userID;
            FB.api('/'+uid+'/xyznamespace:actionname?access_token='+response.authResponse.accessToken, 'post', { objectname: document.location.href, customproperty: 85, 'fb:explicitly_shared':true }, function(response1) {
              if (!response1 || response1.error) {
                alert(response1.error.message);
              } else {
                alert('Post ID: ' + response1.id);
              }
            });          
          }
        },
        {scope:'publish_actions'});
        return false;
      } 
```

我收到一个响应 ID，但没有创建任何帖子。我究竟做错了什么？

另外，我可以像以前那样传递属性值吗？还是会被忽略？

（无论我是否传递属性值，都会返回 id。）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:35:00.253

尝试通过get方法和相同的ID获取帖子，并检查帖子是否回来。这可能是您看不到帖子的原因。

# javascript - java企业应用程序上的javascript模式

> ID：12152965
> 
> 赞同：0
> 
> 时间：2012-08-28T04:51:55.650
> 
> 标签：javascript, jquery, design-patterns, requirejs

我只想问在大型 Java 企业应用程序上编写 javascript 文件的准则是什么。基本上我们现在要做的就是复制JSP的文件夹结构，每个JSP都有一个对应的js文件。如下所示：

```
war
|- js
    |- jquery.js
    |- jquery.ui.js
    |- datatables.js
    |- other-lib.js
    |- pages
        |- login.js
        |- dashboard.js
        |- userAdmin.js 
```

我们正在使用[Sitemesh](http://wiki.sitemesh.org/display/sitemesh/Home)，这就是为什么在主装饰器 JSP 上，所有库都在`<script>`标签上导入。因此，在主装饰器 JSP 上，您可以看到如下内容：

```
<head>
   <script type="text/javascript" src="js/jquery.js"></script>
   <script type="text/javascript" src="js/datatables.js"></script>
   <script type="text/javascript" src="js/xform.js"></script>
   <script type="text/javascript" src="js/generic.js"></script>
</head> 
```

正如我所说，“js/pages”文件夹下的 js 文件是在其特定的 JSP 文件中导入的。

现在，我刚刚阅读了[Addy Osmani 关于 JS 模式的文章](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)，并开始使用显示模块模式。但是，我还是有点迷茫。我遇到了这个 RequireJS 框架/工具。但我不知道如何开始检修 java 应用程序的 js 文件。

`$(document).ready(function(){})`如果我开始使用模块模式，我应该放在哪里？

我应该让每个 JSP 页面成为一个模块吗？还是我应该将其分解为行为并根据概念的可用性/行为创建模块？

不知道还能问什么，脑子里想的太多了，因为我是java开发者，一般都是写后端的，但是现在，因为我的团队没有前端工程师，所以我要学这个新东西。请耐心等待，因为我对 javascript 和 jQuery 的了解有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:31:29.433

如果您希望在每个 JSP 页面中开发复杂的 JS 功能，请考虑将更多的精力放在将功能构建到模块和 UI 组件中。正如 bokonic 所说，AMD 库可以帮助您为代码库建立良好的结构。

如果您需要查看构建大型 JavaScript 应用程序的参考架构，请查看 BoilerplateJS ( [http://boilerplatejs.org](http://boilerplatejs.org) )。它不是一个实用程序库，而是将一些领先的实用程序库集成到一个参考架构中，可以用作复杂 JS 项目的起点。

即使您不想按原样使用它，也请查看主页上正在讨论的问题。您将能够了解大型 JS 项目的必要架构方法，例如：

*   你应该如何组织代码结构
*   如何创建功能模块的层次结构
*   如何使 UI 组件自包含
*   如何进行路由、书签、历史处理
*   如何管理 JS 脚本和依赖项
*   如何优化、混淆部署
*   如何使您的组件可单元测试
*   如何处理样式、本地化方面

我是 BoilerplateJS 的主要作者，在完成了几个复杂的 JS 项目之后，我写了它来分享我的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:54:08.467

使用异步模块（AMD，如 require.js）可以让你的 js 看起来更像 java，因为你可以有明确定义的命名空间，你可以在彼此之间“导入”（require）。您将拥有相当于实例化一些顶级对象的主线（您的主 js）。

在 JSP 或 PHP 中，您通常会通过将`<script>`标签回显到页面上来将一系列脚本添加到 HTML 文档中。使用require.js，您必须生成为该应用程序定制的javascript——即您的main.js 可能会有所不同，或者您需要一个内联脚本。

这使得 require.js 非常适合单页 Web 应用程序，其中您有大量的 javascript 和很少的模板服务器端预处理。

似乎 js 社区中的人们（如果有一致的话）喜欢将显示模块模式作为封装代码的一种方式。这基本上是绕过 javascript 范围混乱的唯一好方法。除此之外，您还可以：

*   将通用代码（模态、特定于站点的验证、REST api 调用等）分解到可以包含在每个页面中的模块中，并要求用户缓存更长的时间
*   编写涵盖各个功能的小模块。这样，您可以根据需要将它们换出或包含在不同的页面上。
*   考虑使用像[grunt](https://github.com/cowboy/grunt)这样的 js 构建工具，它将连接和缩小你的 javascript。[道场](http://dojotoolkit.org/documentation/tutorials/1.6/build/)也有一个不错的。

在显示模块模式中，您不必担心它，除非您有一个需要 jQuery 的 IIFE（一个自执行函数）。只需确保将模块函数调用包装在 jQuery 闭包中即可。

```
$(function(){
     (function($){ $('body').append('<div />'); })(jQuery); // this needs the DOM & jQuery
});
(function(){
     my_module = my_module || {};
     my_module.nonjQueryFunc = function(){};
     my_module.myjQueryFunc = function(el){
         $(el).text("I need a ready DOM");
     };
}); 
```

在另一个 .js 文件中：

```
$(function(){
    my_module.myjQueryFunc(); // this needs the DOM to be ready & jQuery to exist
});

my_module.nonjQueryFunc(); 
```

# windows - Delphi：如何设置（写入）扩展文件属性？

> ID：12152966
> 
> 赞同：4
> 
> 时间：2012-08-28T04:51:59.533
> 
> 标签：windows, delphi, file-properties

我想设置属性，如 Windows 资源管理器文件属性->摘要选项卡（作者、标题、主题等）中所示。（在 Windows 7 中是 Details 选项卡）我已经知道如何使用[StgCreateStorageEx](http://www.delphi-central.com/tutorials/File_Summary_Info.aspx)获取它们，

目标文件扩展名是 xls、xlsx、csv、txt 和 jpg 文件。操作系统：Windows 2003/2008/XP/Windows 7。请注意，此代码将用于 Web 服务应用程序，并且服务器没有安装 Excel。

注意：似乎没有关于如何设置它们的信息/示例代码。![详细信息选项卡](../Images/fb2f1dfae087bdd5c6c6f402d8b5ad5b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T06:31:39.110

要编写摘要信息，请使用[IPropertyStorage:WriteMultiple](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379985%28v=vs.85%29.aspx)方法。请参阅 MSDN 示例[WriteRead](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380387%28v=vs.85%29.aspx)。不是delphi，但很容易转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T07:12:15.440

```
function GetFileSummaryInfo(const FileName: WideString): String;

const
FmtID_SummaryInformation: TGUID =     '{F29F85E0-4FF9-1068-AB91-08002B27B3D9}';
FMTID_DocSummaryInformation : TGUID = '{D5CDD502-2E9C-101B-9397-08002B2CF9AE}';
FMTID_UserDefinedProperties : TGUID = '{D5CDD505-2E9C-101B-9397-08002B2CF9AE}';
IID_IPropertySetStorage : TGUID =     '{0000013A-0000-0000-C000-000000000046}';

const
STGFMT_FILE = 3; //Indicates that the file must not be a compound file.
                 //This element is only valid when using the StgCreateStorageEx
                 //or StgOpenStorageEx functions to access the NTFS file system
                 //implementation of the IPropertySetStorage interface.
                 //Therefore, these functions return an error if the riid
                 //parameter does not specify the IPropertySetStorage interface,
                 //or if the specified file is not located on an NTFS file system
                 //volume.

STGFMT_ANY = 4; //Indicates that the system will determine the file type and
                //use the appropriate structured storage or property set
                //implementation.
                //This value cannot be used with the StgCreateStorageEx function.

// Summary Information
 PID_TITLE        = 2;
 PID_SUBJECT      = 3;
 PID_AUTHOR       = 4;
 PID_KEYWORDS     = 5;
 PID_COMMENTS     = 6;
 PID_TEMPLATE     = 7;
 PID_LASTAUTHOR   = 8;
 PID_REVNUMBER    = 9;
 PID_EDITTIME     = 10;
 PID_LASTPRINTED  = 11;
 PID_CREATE_DTM   = 12;
 PID_LASTSAVE_DTM = 13;
 PID_PAGECOUNT    = 14;
 PID_WORDCOUNT    = 15;
 PID_CHARCOUNT    = 16;
 PID_THUMBNAIL    = 17;
 PID_APPNAME      = 18;
 PID_SECURITY     = 19;

 // Document Summary Information
 PID_CATEGORY     = 2;
 PID_PRESFORMAT   = 3;
 PID_BYTECOUNT    = 4;
 PID_LINECOUNT    = 5;
 PID_PARCOUNT     = 6;
 PID_SLIDECOUNT   = 7;
 PID_NOTECOUNT    = 8;
 PID_HIDDENCOUNT  = 9;
 PID_MMCLIPCOUNT  = 10;
 PID_SCALE        = 11;
 PID_HEADINGPAIR  = 12;
 PID_DOCPARTS     = 13;
 PID_MANAGER      = 14;
 PID_COMPANY      = 15;
 PID_LINKSDIRTY   = 16;
 PID_CHARCOUNT2   = 17;

var
 I: Integer;
 PropSetStg: IPropertySetStorage;
 PropSpec: array of TPropSpec;
 PropStg: IPropertyStorage;
 PropVariant: array of TPropVariant;
 Rslt: HResult;
 S: String;
 Stg: IStorage;
 PropEnum: IEnumSTATPROPSTG;
 HR : HResult;
 PropStat: STATPROPSTG;
 k : integer;

function PropertyPIDToCaption(const ePID: Cardinal): string;
begin
 case ePID of
   PID_TITLE:
     Result := 'Title';
   PID_SUBJECT:
     Result := 'Subject';
   PID_AUTHOR:
     Result := 'Author';
   PID_KEYWORDS:
     Result := 'Keywords';
   PID_COMMENTS:
     Result := 'Comments';
   PID_TEMPLATE:
     Result := 'Template';
   PID_LASTAUTHOR:
     Result := 'Last Saved By';
   PID_REVNUMBER:
     Result := 'Revision Number';
   PID_EDITTIME:
     Result := 'Total Editing Time';
   PID_LASTPRINTED:
     Result := 'Last Printed';
   PID_CREATE_DTM:
     Result := 'Create Time/Date';
   PID_LASTSAVE_DTM:
     Result := 'Last Saved Time/Date';
   PID_PAGECOUNT:
     Result := 'Number of Pages';
   PID_WORDCOUNT:
     Result := 'Number of Words';
   PID_CHARCOUNT:
     Result := 'Number of Characters';
   PID_THUMBNAIL:
     Result := 'Thumbnail';
   PID_APPNAME:
     Result := 'Creating Application';
   PID_SECURITY:
     Result := 'Security';
   else
     Result := '$' + IntToHex(ePID, 8);
   end
end;

begin
 Result := '';
try
 OleCheck(StgOpenStorageEx(PWideChar(FileName),
 STGM_READ or STGM_SHARE_DENY_WRITE,
 STGFMT_FILE,
 0, nil,  nil, @IID_IPropertySetStorage, stg));

 PropSetStg := Stg as IPropertySetStorage;

 OleCheck(PropSetStg.Open(FmtID_SummaryInformation,
    STGM_READ or STGM_SHARE_EXCLUSIVE, PropStg));

 OleCheck(PropStg.Enum(PropEnum));
 I := 0;

 hr := PropEnum.Next(1, PropStat, nil);
  while hr = S_OK do
  begin
    inc(I);
    SetLength(PropSpec,I);
    PropSpec[i-1].ulKind := PRSPEC_PROPID;
    PropSpec[i-1].propid := PropStat.propid;
    hr := PropEnum.Next(1, PropStat, nil);
 end;

 SetLength(PropVariant,i);
 Rslt := PropStg.ReadMultiple(i, @PropSpec[0], @PropVariant[0]);

 if Rslt =  S_FALSE then Exit;

 for k := 0 to i -1 do
  begin
    S := '';
    if PropVariant[k].vt = VT_LPSTR then
      if Assigned(PropVariant[k].pszVal) then
       S := PropVariant[k].pszVal;

    S := Format(PropertyPIDToCaption(PropSpec[k].Propid)+ ' %s',[s]);
   if S <> '' then Result := Result + S + #13;
 end;
 finally
 end; 
```

更多[http://www.delphi-central.com/tutorials/File_Summary_Info.aspx](http://www.delphi-central.com/tutorials/File_Summary_Info.aspx)。还有这个：[http](http://www.swissdelphicenter.ch/torry/showcode.php?id=1614) ://www.swissdelphicenter.ch/torry/showcode.php?id=1614向您展示如何操作[[IPropertyStorage]](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379968%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T08:23:50.760

部分答案：设置属性 Delphi 代码可以在[这里](http://www.delphi-central.com/tutorials/File_Summary.aspx)找到。或者如果您有最新的 JCL 库 - 在 jclNtfs.pas 使用[TJclFilePropertySet](http://upload.infosae.com.br/APLICATIVOS/Delphi%207%20Enterprise/Componentes_/Instalador/JEDI/jcl/source/windows/JclNTFS.pas) 警告：请注意，此代码适用于 xls 文件，但它似乎不适用于 Windows 7 Pro/Enterprise 或 2008（64 位）中的 txt/cvs 和 jpg 文件）。似乎 M$ ​​改变了这些操作系统中属性的工作方式：[“您无法添加或更改某些类型文件的文件属性。例如，您无法向 TXT 或 RTF 文件添加任何属性”](http://windows.microsoft.com/en-US/windows7/Change-the-properties-for-a-file)。对我来说可悲的是，回到 XP 模式不是一种选择。

# jsf-2 - 来自另一个用户事件的 PrimeFaces 咆哮消息

> ID：12152967
> 
> 赞同：0
> 
> 时间：2012-08-28T04:52:04.087
> 
> 标签：jsf-2, primefaces

我有两个用户：用户和管理员。当用户添加新记录时，如果管理员已登录，我想在管理员屏幕中显示咆哮消息。

可能吗？如果是这样，我怎样才能做到这一点？JMS 是一种可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:11:51.380

您可以将私聊组件修改为您的案例

[http://www.primefaces.org/showcase-labs/push/chat.jsf](http://www.primefaces.org/showcase-labs/push/chat.jsf)

一次，任何人都登录到您的系统。您将用户注册到系统。

```
public void login() {  
        RequestContext requestContext = RequestContext.getCurrentInstance();  

        if(users.contains(username)) {  
            loggedIn = false;  
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Username taken", "Try with another username."));  

            requestContext.update("growl");  
        }  
        else {  
            users.addUser(username);  
            pushContext.push(CHANNEL, username + " joined the channel.");  
            requestContext.execute("subscriber.connect('/" + username + "')");  
            loggedIn = true;  
        }  
    } 
```

您可以通过发送推送通知向单个客户端发送消息。

```
public void sendPrivate() {  
        pushContext.push(CHANNEL + privateUser, "[PM] " + username + ": " + privateMessage);  

        privateMessage = null;  
    } 
```

然后处理即将到来的消息

```
<p:socket onMessage="handleMessage" channel="/chat" autoConnect="false" widgetVar="subscriber"/>  

<script type="text/javascript">  
    function handleMessage(data) {  
        var chatContent = $(PrimeFaces.escapeClientId('form:public'));  
        chatContent.append(data + '<br />');  

        //keep scroll  
        chatContent.scrollTop(chatContent.height());  
    }  
</script> 
```

# python - Pylint - “使用全局语句”

> ID：12152971
> 
> 赞同：5
> 
> 时间：2012-08-28T04:52:26.747
> 
> 标签：python, global-variables, warnings, pylint

我正在尝试处理我当前的 python 程序，非常注意 pylint 警告，所以虽然我意识到我可以简单地关闭警告，但我想确保在我这样做之前没有更理想的解决方案。

我当前的代码部分是我的日志记录代码。我有一个`init()`设置处理程序并将它们附加到根记录器的函数，以及一个`set_console_level(level)`设置控制台消息报告级别的函数（DEBUG、INFO 等）：

```
_CONSOLE_OUT = NONE

def init():
    """Set up the error handlers for the root logger"""
    console_out = logging.StreamHandler()
    console_out.setLevel(logging.INFO)  #Show info messages for now
    #...
    logging.root.addHandler(console_out)
    global _CONSOLE_OUT
    _CONSOLE_OUT = console_out

    #Rest of function sets up more handlers similarly
init()

def set_console_level(level):
    """Change the level at which console messages are printed"""
    assert __CONSOLE_OUT is not None #Set in init
    _CONSOLE_OUT.setLevel(level) 
```

据我从阅读中可以看出，这是做到这一点的方法。需要该行`global _CONSOLE_OUT`才能写入模块级变量。但是，当我在这个文件上运行 pylint 时，我收到了警告`W: 15,4:init: Using the global statement`。有没有办法避免这个警告？解决这个问题的更好方法？

（请不要在没有`global _CONSOLE_OUT #pylint: disable=W****`理由的情况下说）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T04:56:49.923

您可以在导入时创建它：

```
_console_out = ConsoleHandler() 
```

创建和设置处理程序`ConsoleHandler`的工厂函数或*您的*类在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T05:13:52.790

这是一种在方法范围之外设置项目的奇怪模式。以后会导致问题，因为你不知道全局变量是从哪里设置的。

您的代码还依赖于方法的执行顺序来设置变量 - 大概 - 代码的其他部分所依赖的。如果您忘记在导入东西时特别调用 an ，这可能会在以后引起问题`init()`（当然您可以始终将其粘贴在 中`__init__.py`，但这不是这里的重点）。

鉴于这些，我认为另一种方法是创建一个类并在类中设置变量（给它另一个命名空间）；或者如果你想保持原样，就像塞巴斯蒂安建议的那样返回配置变量。

如果您需要设置多个变量，您可以返回一个元组，然后将其解包以创建全局变量。

```
>>> def foo():
...   return "hello","world"
...
>>> a,b = foo() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:31:25.963

`init()`我想到查看代码（以及 Burhan Khalid 的回答）的一件事是，我的代码*根本*没有理由必须在函数中，因为我只是想让它在导入时运行一次。我相信我最初这样做的唯一原因是处理程序变量不会是模块级的。

因此，我的代码可能只是

```
_CONSOLE_OUT = logging.StreamHandler()
_CONSOLE_OUT.setLevel(logging.INFO)  #Show info messages for now
#...
logging.root.addHandler(_CONSOLE_OUT)

#...

def set_console_level(level):
    """Change the level at which console messages are printed"""
    assert _CONSOLE_OUT is not None #Set at root
    _CONSOLE_OUT.setLevel(level) 
```

# jquery - 使用单选按钮更改背景图像

> ID：12152975
> 
> 赞同：5
> 
> 时间：2012-08-28T04:52:36.893
> 
> 标签：jquery, css

我想用单选按钮选择更改 html 的 backgroundImage。每个单选按钮都有不同的图像。我试过这样：

```
 <input name="BG" id="wood" type="radio" value="" class="bgCollection" />
      <label for="radio">Wood</label>

      <input name="BG" id="steel" type="radio"  class="bgCollection"/>
      <label for="radio">Steel</label>

      <input name="BG" id="metal" type="radio" value="" class="bgCollection"/>
      <label for="radio">Black metal</label> 
```

查询：

```
 $(document).ready(function(){
            $(".bgCollection").change(
               function()
          {
        if($("input#wood").attr("checked"))  
                  {$("html").css('backgroundImage','url(../images/wood.jpg)');}
        if($("input#steel").attr("checked")
                   {$("html").css('backgroundImage','url(../images/BG-steel.jpg)');}
        if($("input#metal").attr("checked"))
                   {$("html").css('backgroundImage','url(images/blackMetal.jpg)');}
       });
  }); 
```

但是这样背景并没有改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T05:51:14.513

在这里，我已经完成了上述问题的完整演示。请检查演示链接。

**演示：** [http ://codebins.com/bin/4ldqp80](http://codebins.com/bin/4ldqp80)

**HTML：**

```
<input name="BG" id="wood" type="radio" value="" class="bgCollection" />
<label for="radio">
  Wood
</label>

<input name="BG" id="steel" type="radio"  class="bgCollection"/>
<label for="radio">
  Steel
</label>

<input name="BG" id="metal" type="radio" value="" class="bgCollection"/>
<label for="radio">
  Black metal
</label> 
```

**jQuery：**

```
$(function() {
    $(".bgCollection").change(function() {
        if ($("#wood").is(":checked")) {
            $("body").css('backgroundImage', "url('http://cdnimg.visualizeus.com/thumbs/7f/78/gfx,wood-7f78592c9a6ed3390492c560c5ac6fec_h.jpg')");
        }
        if ($("#steel").is(":checked")) {
            $("body").css('backgroundImage', "url('http://www.aroorsteelcorporation.com/full-images/stainless-steel-834007.jpg')");
        }
        if ($("#metal").is(":checked")) {
            $("body").css('backgroundImage', "url('http://i00.i.aliimg.com/photo/v0/468538622/Brushed_metal_texture_prepainted_metal.jpg')");
        }
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp80](http://codebins.com/bin/4ldqp80)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T05:04:58.307

你做对了，但是你的 jQuery 中有一个小的语法错误

```
if($("input#steel").attr("checked") 
```

**应该**

```
if($("input#steel").attr("checked")) 
```

请注意`)`末尾缺少括号

[工作小提琴](http://jsfiddle.net/gajjuthechamp/gtgza/)

但是更好的方法是使用它来获取 id，然后应用 switch 来检查 Value 以设置背景

[新示例](http://jsfiddle.net/gajjuthechamp/gtgza/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T05:09:54.970

代码中的第一个问题

如果条件错误`if($("input#steel").attr("checked")` ，您的第二个问题应该是`if($("input#steel").attr("checked"))`您的右括号不存在，那么您应该只更改下一个标签意味着控制而不是整个 html。

所以`.next()`在这里使用 jquery 文档的功能[http://api.jquery.com/next/](http://api.jquery.com/next/)

我在这里在 jsfiddle 测试中尝试了这段代码：http: [//jsfiddle.net/FB37y/](http://jsfiddle.net/FB37y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T05:10:11.270

您的代码的以下行中缺少 )：

```
if($("input#steel").attr("checked"))
                   {$("html").css('backgroundImage','url(../images/BG-steel.jpg)');} 
```

# sql - PostgreSQL 向下转换

> ID：12152980
> 
> 赞同：2
> 
> 时间：2012-08-28T04:53:22.390
> 
> 标签：sql, postgresql, date, timestamp, postgresql-9.1

PostgreSQL 中是否有任何方法可以一次查找一周中的某一天以查找一组日期？我可以用

```
SELECT extract(dow from timestamp '2012-08-27') 
```

一次获取一天，但我想一次提供一个月左右的数据。我在我的数据库中创建了一个“日历”表，其中有一列日期，作为格式为 yyyy-MM-dd 的主键。

如果我想在 9 月的每一天都运行此数据提取，有没有简单的方法可以做到这一点？我可以编写一个函数并将开始和结束日期输入其中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T04:59:51.113

从你的描述中我可以猜到，这是：

```
 SELECT the_date_column_name, extract(dow from the_date_column_name)
 FROM calendar
 WHERE date_trunc('month', the_date_column_name) = DATE '2012-09'; 
```

...或 btree-indexable 版本：

```
 SELECT the_date_column_name, extract(dow from the_date_column_name)
 FROM calendar
 WHERE the_date_column_name BETWEEN DATE '2012-09-01' AND (DATE '2012-09-01' + INTERVAL '1' MONTH) - INTERVAL '1' DAY; 
```

应该做的工作。

如果您愿意，可以使用`>= DATE '2012-09-01'`and`< DATE '2012-10-01'`代替；`BETWEEN`它避免了结束日期的混乱结构并且工作方式相同。

要将它包装在一个函数中，您需要确定如何调用它以及如何首先返回结果。是否要传递开始和结束日期范围？代表感兴趣月份的第一天的日期？什么？您希望如何返回结果？

顺便说一句，如果您的列实际上被命名`"date"`为您的描述建议，请更改其名称。`DATE`是 SQL 关键字和类型名称。在某些情况下，您可以将其用作用户标识符，但这是个坏主意；选择一个更好的名字。

# c# - 解析在 GET 方法 C# 之后显示的 HTML

> ID：12152985
> 
> 赞同：0
> 
> 时间：2012-08-28T04:54:03.397
> 
> 标签：c#, javascript, html, ajax, get

我有一个使用 Ajax 的网站

当您打开网站时，在您单击按钮之前不会显示任何信息。该按钮实际上对服务器做了一些 GET 方法，并收到响应，并计算它，并显示在网站上（更新 HTML 源）。

我的问题是如何在计算之后解析 HTML 源代码？计算代码在 JavaScript 中。并且地址与计算前完全相同。

首先，我尝试直接使用 GET 方法的响应数据。没运气。响应数据非常复杂，我什至不知道它是如何计算出来的

其次，我尝试阅读 JavaScript 代码以了解它们如何计算数据。没运气。我看到他们根本没有对数据做任何事情。但是 HTML 中显示的结果与 GET 方法的响应数据有很大的不同。

那么，我怎样才能让准确的结果显示在 HTML 中。我的代码使用 C#。谢谢

我正在尝试在评论中添加详细信息，然后输入 Enter。对此感到抱歉

细节

这是网站中显示的内容：[Image1](http://i1096.photobucket.com/albums/g335/cuoilennaocacban1/asking/28-08-201212-26-36PM.png)

第一点：10.740425272880508,106.6190201527238

第二：10.743269525582264,106.62160002774681

第三：10.74487172053895,106.62348830289329

...

最后：10.77587253871842,106.70619763111029

这是我从响应数据中得到的：

106.61837000000001,10.741180000000002

106.62066000000002,10.7431

（仅 2 分）

[图片2](http://i1096.photobucket.com/albums/g335/cuoilennaocacban1/asking/28-08-201212-28-04PM.png)

此外，还有另一个 Json 格式的响应数据：评论中的链接它包含数字、名称、地址和 2-不理解的浮点数

稍后我将发布 JavaScript 代码。box.com 中的一些问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:04:39.583

感谢您的帮助。我知道他们如何计算数据。

包含坐标的响应数据用于方向。它是第 2 行点来确定方向，它不是基于我想要的点的位置

事实上，2-not-understanding float 是准确的位置。不是`latitude`和`longitute`。它使用另一个系统调用`Universal Transver Mercator`。地球地图平展为一个矩形，该系统将该矩形划分为许多行和列。我所要做的就是将它转换为`latitude`and `longitude`（它更受欢迎）。该`UTM`系统仍在世界上的某些国家/地区使用，我很确定不是我的国家。

`JavaScript`用于转换的代码隐藏在非常深的文件夹中。我`Google Chrome`用来挖出来。而转换方法的名称是`not-for-human-reading`，它是一串随机字符。

所以我的问题现在解决了。但我的问题仍然存在，虽然我很有趣。在没有响应数据的情况下，我们如何解析在or方法`HTML`之后更新的内容？如果可以，我会将这个问题标记为已回答。`GET``POST`

# javascript - JQuery - 可重用 jqGrid 创建函数触发使用它的最后一个表的“loadComplete”

> ID：12152988
> 
> 赞同：0
> 
> 时间：2012-08-28T04:54:29.013
> 
> 标签：javascript, object, jqgrid, encapsulation

我创建了一个可重用的函数来创建 jqGrid。

```
function createJqGrid(){
    $("#" + gTableId).jqGrid({
            datastr: jsonData,
            datatype: 'jsonstring',
            jsonReader: { repeatitems: false, root: function(obj) { return obj; }},
            headertitles: true,
            sortable: true,
            rownumbers: isRowNum,
            colNames: colHeadNames,
            colModel: colModel,
            rowNum: jsonData.length,
            width: viewableWidth,
            height: viewableHeight,     
            shrinkToFit: isShrink,
            scrollOffset: 0,
            onSelectRow: func,
            loadComplete: function(data) {
                alert(gTableId);                
            }
        });
} 
```

这个函数和所有参数的设置都封装在里面`MyObject`。我的四个 jsp 有自己独特的`MyObject`. 但是当我触发 jqGrid 的 reloadGrid 时，会提醒最后一个使用此函数的表的 id。

给定：
table1 在 table1.jsp 里面
table2 在 table2.jsp 里面 table3 在 table3.jsp
里面
table4 在 table4.jsp 里面 alerts

`$("#table1").trigger("reloadGrid");`"table4" alerts "table4
`$("#table2").trigger("reloadGrid");`" alerts "table4" alerts " table4
`$("#table3").trigger("reloadGrid");`"正在被触发。为什么会这样？
`$("#table4").trigger("reloadGrid");`

`loadComplete`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:27:19.360

我确实相信触发`loadComplete`是正确的，问题更多在于 JavaScript 的逻辑。您的示例中缺少变量声明部分，但它看起来像是`gTableId`一个全局变量。在这种情况下，对它的每次调用都将始终获得其最后一个值（并且您的警报始终采用 的当前值`gTableId`，它不会以任何方式*冻结*）。请尝试修改您的`loadComplete`这样来验证：

```
loadComplete: function(data) {
    alert($(this).attr('id');
} 
```

# php - 使用php将数据从csv文件插入mysql

> ID：12152993
> 
> 赞同：1
> 
> 时间：2012-08-28T04:54:54.633
> 
> 标签：php, cakephp, csv

我有`mail.csv`包含如下数据的 csv 文件：

```
 type,timeLogged,t
d,2012-08-24 00:00:57+0200,2012-08-24 00:00:45+0200,noreply@news.camera-factice.com,myriam.yall34@gmail.com,
d,2012-08-24 00:00:57+0200,2012-08-24 00:00:45+0200,noreply@118-bonsplans.com,toulouse@texa.fr,
b,2012-08-24 00:00:57+0200,2012-08-22 23:59:31+0200,noreply@lemeilleur-duweb.com
d,2012-08-24 00:00:57+0200,2012-08-24 00:00:57+0200,diffusion@news.antivol-voiture.com 
```

我想使用php将所有这些数据插入到mysql中。事实上我不知道如何解决这个问题。请任何人帮助我，非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:59:10.447

您可以使用[包含](https://github.com/CakeDC/utils)`CsvImportBehavior`. 您只需要传递 csv 文件路径。它的方法 ( `$this->Model->importCSV('mail.csv');`) 将返回包含所有记录的数组。然后您可以根据您的要求简单地操作它，并且可以很容易地保存到数据库中。

# codeigniter - CodeIgniter 在配置文件中获取多个项目

> ID：12152994
> 
> 赞同：0
> 
> 时间：2012-08-28T04:55:06.280
> 
> 标签：codeigniter

我想在 CodeIgniter 的配置文件中获取多个项目。

我想循环这个数组然后回显它。怎么做 ？

配置文件：

```
$config['test']=array('AAA','BBB'); 
```

我如何在控制器中回显这两个项目？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T05:05:09.030

尝试这样做：

```
$this->load->config('your_config_file_name');
$test_arr = $this->config->item('test');
foreach($test_arr as $t){
echo $t;
} 
```

或者

```
print_r($test_arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T05:06:56.703

假设你已经加载了配置文件

```
$item_arr = array();
$items = $this->config->config['test'];   // get the array items from config
foreach($items AS $item){
    $item_arr[] = "'".$item."'";
}
$all_items = implode(',',$item_arr);
echo $all_items; 
```

# linux - Bluez 的 Avrcp 配置

> ID：12152998
> 
> 赞同：0
> 
> 时间：2012-08-28T04:55:34.213
> 
> 标签：linux, ubuntu, bluetooth, avrcp

我一直在尝试从我的 ubuntu 桌面上调出 avrcp 控制来控制在我的手机上播放的音乐。使用的蓝牙堆栈：Bluez 4.101

但我没有看到在 Dbus 上启用的接口 org.bluez.MediaTransport 或 Org.Bluez.Control。为了使这些接口可用，我需要编辑什么配置？\请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:30:12.307

据我所知，AVRCP 控制器角色 (CT) 仅在 Bluez 4 中以 VolumeUp() 和 VolumeDown() 方法的形式部分实现。这些可以在您可以找到的 org.bluez.control 界面中找到`/org/bluez/<pid of bluetoothd>/hci0/dev_<BD_ADDR>`。我无需编辑任何配置文件即可查看该界面。

例如，执行以下命令将为您提供轨道信息：

```
$ qdbus --system org.bluez  /org/bluez/hci0/dev_XX_XX_XX_XX_XX_XX/player0 org.bluez.MediaPlayer1.Track

    Album: Lemanis
    Artist: Spaceslug
    Duration: 464945
    Genre: NumberOfTracks: 0
    Title: Proton Lander
    TrackNumber: 0 
```

您可以按 Tab 后`qdbus --system org.bluez /org/bluez/hci0/dev_XX_XX_XX_XX_XX_XX/player0`查看所有选项：

[![在此处输入图像描述](../Images/c9db697ef60c9afc72ee3ae8fb5d3142.png)](https://i.stack.imgur.com/okl9Q.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T06:29:04.480

您可以尝试以下操作：运行脚本“ **simple-endpoint sbcsink** ”，然后您应该能够制作基本的 AVRCP 功能（1.0 版=播放暂停，下一个等），如果您不知道此接口，使用 D-Feet 并检查一下！！