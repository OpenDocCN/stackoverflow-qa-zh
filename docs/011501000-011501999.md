# StackOverflow 问答 11501000-11501999

# django - django模板内容未显示

> ID：11501002
> 
> 赞同：0
> 
> 时间：2012-07-16T08:58:40.107
> 
> 标签：django, django-forms, django-templates, django-views

在我看来，我已将我的代码指向 login.html >但就绪函数中的警报或内容因此在 UI 上看不到。我在这里做错了什么

```
 {% extends "base/base.html" %}
  <script>
  $(document).ready(function() {
  alert('1');
  });
  </script>
     some code here
     some code here
     some code here
     some code here
     some code here
     some code here
  <b>{{response_dict.yes}} testing and testing and testinf</b>
  <b>{{a}}</b>
  <form action="/logon/" method="post" name="myform">
  {% csrf_token %}
  <b>Username</b><input type="text" name="username" id="username"></input>
  <br><b>Password</b><input type="password" name="password" id="password"></input>
  <b></b><input type="submit" value="Submit"></input>
  <img src="/media/img/hi.png" alt="Hi!" /> <!-- This is working dude -->
  <img alt="Hi!" src="/opt/labs/lab_site/media/img/hi.png">
  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:06:26.777

扩展模板时，您需要指定此标记将在基本模板的哪个块中呈现。只需将其添加到`base/base.html`：

```
{% block login %}{% endblock %} 
```

在应该呈现登录表单的地方，然后`login.html`你将拥有：

```
{% extends "base/base.html" %}
  {% block login %}
    <script>
    $(document).ready(function() {
    .....
    <img src="/media/img/hi.png" alt="Hi!" /> <!-- This is working dude -->
    <img alt="Hi!" src="/opt/labs/lab_site/media/img/hi.png">
    </form>
  {% endblock %} 
```

# tridion - SDL Tridion 事件处理程序 2011 中的阶段

> ID：11501009
> 
> 赞同：6
> 
> 时间：2012-07-16T08:59:11.070
> 
> 标签：tridion, tridion-2011

难以理解事件阶段。

1) 考虑组件保存操作。当要根据内容规则覆盖内容时，可以在“启动”阶段进行。如果内容违反内容规则，则可能在“已启动”或“已处理”事件阶段引发错误。

当“已启动”阶段本身足以用于内容覆盖和内容规则验证时，“已处理”阶段何时有用？请。举例说明。

2) 保存和关闭组件时，会触发“保存”和“签入”事件。在保存操作的“已处理”阶段之后，将执行签入操作。如果在 CheckIn 操作的“Initiated”/“Processed”阶段出现任何错误，将发生 Save 操作的“TransactionAborted”阶段。

以上是我能想到的“TrasactionAborted”的唯一例子。您能否提供任何其他有助于理解“TrasactionAborted”阶段的示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:19:08.787

我已尝试在以下有关 SDL Tridion World 的文章中对 SDL Tridion 2011 事件阶段、事件类型和主题类型进行完整解释：[SDL Tridion 2011 .NET events](http://sdltridionworld.com/articles/sdltridion2011/sdltridion2011eventsystem.aspx)。

简而言之，阶段按特定顺序触发，因此您可以在特定时间挂钩操作，顺序如下：

1.  开始阶段
2.  CMS 动作发生（不是阶段）
3.  处理阶段
4.  事务阶段之一（如果事务成功，则为 TransactionCommitted，如果事务中止，则为 TransactionAborted，当无法确定事务状态时，则为 TransactionInDoubt，既不提交也不中止，永远不会）

因此，如果您想在保存项目之前做某事（例如对项目进行有效性检查，在这种情况下您可能希望阻止它被保存，您最好使用 Initiated 阶段，但如果您想在之后做某事该项目已被保存（如将其放在页面上），您应该使用事务提交阶段（在这种情况下可能是签入阶段，而不是保存事件）。

所以 Processed 阶段什么时候有用，我永远想不出一个简单的用例，但我确信在某些情况下它会在某个时候派上用场。它存在的事实并不意味着您需要立即使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T09:52:36.977

Ad1：在启动阶段，该项目尚未保存到数据库中，并且没有要回滚的事务。如果要验证数据，则应在更改数据库中的任何内容之前执行此操作。当然，事务是受支持的，当您引发异常时一切都会好起来的，但是您执行了不必要的操作，所有这些都增加了性能图。

在您不使用项目内容本身但应该能够回滚更改的情况下，已处理将很有用。例如：写入存档或高度业务关键事件日志的能力。

另一种情况是在本地化的孩子上设置一个需要翻译的标志。如果失败，您可能还想取消对父项的更改（出于某种原因）。

Ad2：一般情况下，任何异常都会触发Transaction Aborted。也许您可以详细说明第 2 点？

# c - 二叉树 - 取消引用指针

> ID：11501016
> 
> 赞同：2
> 
> 时间：2012-07-16T08:59:35.590
> 
> 标签：c

我只是想编写一个简单的二叉搜索树程序，用户可以在其中插入节点并以中序、前序或后序模式查看树中的所有节点。我的代码是

* * *

```
#include <stdio.h>
#include <stdlib.h>

struct treenode
{
int data;
struct treenode *lchild;
struct treenode *rchild;
}*root;

void insertnode(struct treenode *p,int d)
{
    if(p==NULL)
    {
         // means the tree is empty
         p=(struct treenode *)malloc(sizeof(struct treenode));
         p->data=d;
         p->lchild=NULL;
         p->rchild=NULL;
    }

    else
    {
         // start comparing the new data from root
         if( d<p->data )
             insertnode((&(p->lchild)),d);

        else
             insertnode((&(p->lchild)),d);
    }
}

void preorder(struct treenode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
    }

    else
    {
        printf("%d",p->data);
        preorder(p->lchild);
        preorder(p->rchild);
    }
}

void postorder(struct treenode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
    }

    else
    {
        preorder(p->lchild);
        preorder(p->rchild);
        printf("%d",p->data);
    }
}

void inorder(struct treeode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
    }

    else
    {
        preorder(p->lchild);
        printf("%d",p->data);
        preorder(p->rchild);
    }
}

int main(void)
{
    root=NULL;
    int choice,data;

    while(1)
    {
         printf("\nPress 1 for inserting a node in BST fashion: ");
         printf("\nPress 2 for traversing the tree in preorder fashion :");
         printf("\nPress 3 for traversing the tree in postorder fashion :");
         printf("\nPress 4 for traversing the tree in inorder fashion :");
         printf("\nPress 5 to exit :");

         printf("\nEnter your choice: ");
         scanf("%d", &choice);

    switch(choice)
    {
        case 1: printf("\nEnter the data to be inserted:");
            scanf("%d",&data);
            insertnode(root,data);
            break;

        case 2: preorder(root);
            break;

        case 3: postorder(root);
            break;

        case 4: inorder(root);
            break;

        case 5: exit(0);
            break;

        default: printf("\nYou have enetred an invalid choice. Please try again");
    }
}

return 0;
} 
```

* * *

有一堆错误信息说

* * *

```
dereferencing pointer to incomplete type 
```

* * *

问题是什么 ？另外我对双间接指针不太满意，所以有人可以解释一下我如何传递和检索双间接指针（如果我需要在上面的程序中传递它们）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:02:29.543

以下只是编译错误，因此请修复这些错误，您的程序将编译。

**问题＃1**：
您将结构定义为：

```
struct treenode
{
    /* Blah blah... */
} *root;  /* Mistake: should be root, not *root */ 
```

相反，命名它`root`，而不是`*root`。

**问题2**：
你`insertnode()`打错了。而不是这个：

```
insertnode((&(p->lchild)),d);  /* Mistake: taking the address of the pointer */ 
```

你应该这样称呼它：

```
insertnode(p->lchild,d); 
```

**问题**#3**：
你定义错误：`root``main()`**

 **```
root = NULL;  /* Mistake: root is implicitly declared as int */ 
```

你应该做的是：

```
struct treenode* root = NULL; 
```

**问题#4**：

您的声明中有错字`inorder()`：

```
void inorder(struct treeode *p)  /* Typo: should be treenode and not treeode */ 
```

它应该是：

```
void inorder(struct treenode *p) 
```

* * *

下一组问题是程序中的逻辑错误：

**问题#5**：你总是在左节点中插入一个新
值。您应该将任一递归调用更改为：`insertnode()``d``insertnode(p->lchild, d);`

```
insertnode(p->rchild, d); 
```

取决于你想如何组织你的树。

**问题 #6**：
就像 AndersK 指出的那样，传递的指针`root`在传递给 之后永远不会改变`insertnode()`，所以这是一个主要错误。

在您的情况下，当您想要更改传递的指针本身（即指向另一个地址）而不更改指针对象本身时，需要使用双重间接指针。

您想在`root`内部进行更改`insertnode()`，因此添加另一层间接并传递*ie*`root`的地址，以便根也可以在函数内更改。 *`&root`*

 *相应的，声明`insertnode()`应该是：

```
insertnode(struct treenode** p, int d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:14:48.553

为了让您更改指针指向的数据，您需要提供更多的间接级别

例如你写

```
insertnode(root,data); 
```

但是 root 在开始时被设置为 NULL 并且不能在 insertnode 内以您将其提供给函数的方式进行更改。

而是将 insertnode 声明为

```
insertnode(struct treenode **p,int d) 
```

并调用 insertnode

```
insertnode(&root, data); 
```***

# sas - SAS：Proc Olap。非nway聚合

> ID：11501017
> 
> 赞同：0
> 
> 时间：2012-07-16T08:59:38.750
> 
> 标签：sas, sas-macro, rolap

我想做`Rolap-cube`。

创建表后，我使用宏生成在`proc olap`.

并看到这样的警告和错误：

```
WARNING: You cannot use NAME "DEFAULT" in the AGGREGATION statement for a non-NWAY   aggregation.
NOTE: The aggregation name "DEFAULT" was changed to "AGGR1".

ERROR: An input data set was not specified. 
```

怎么了？（我没有指定数据集，因为我有很多表，我想在其中使用`Rolap-cube`）

加法：如果我有这样的尺寸：

```
DIMENSION MyDim hierarchies=(First Second)

HIERARCHY First 
     levels=(A B D)
    DEFAULT
    ;
HIERARCHY Second 
     levels=(C D)    
    ; 
```

`D`是最小的级别，它有两个层次结构：`D belond to B belong to A`和`D belong to C`

如果我指定具有级别的聚合表：
1) `A B D`
2) `A B`
3) `A`
4) `C D`
5) `C`
6)`none`

然后sas对我说，我没有指定输入数据集。（聚合表之一）。

但是这 6 个聚合涵盖了所有可能的去中心化（没有像`A B C D`or那样的交叉覆盖去中心化`A C D`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:06:59.600

在`PROC OLAP DATA=`选项中，您应该指定多维数据集的数据源

1.  完整的非规范化表/视图（星型模式事实和维度表的连接）或
2.  只是事实表（您也可以将其称为`FACT=`选项以明确）。

在情况 2 中，您还必须`DIMENSION ...;`在选项中提供（通常是几个）包含对维度表的引用的语句`DIMTBL=library.tablname`。

摘自[http://support.sas.com/documentation/cdl/en/olapug/59574/HTML/default/viewer.htm#a002605625.htm](http://support.sas.com/documentation/cdl/en/olapug/59574/HTML/default/viewer.htm#a002605625.htm)

```
> DATA | FACT=dsname
> 
>     specifies the data source for the cube. The unsummarized data source can be any SAS data file, including files that are supported by
> SAS/ACCESS software engines. If you load the cube from a star schema,
> then the dsname is the name of the fact table that contains the
> analysis variables from which to derive the measures for the cube. The
> fact table must also contain fact keys that correspond to dimension
> tables in the star schema.
> 
>     You can also provide data set options along with DATA | FACT=. Options are stored within the cube and reapplied when the data is
> accessed at run time. For more information, see "Data Set Options" in
> SAS Language Reference: Concepts.
> 
>     Note:   This option is not required if you want to define the cube by using input data from a fully summarized external data source (a
> crossing of all dimensions known as an NWAY). In that case, you
> specify the data source for the cube by using the TABLE= option in the
> AGGREGATION statement.  [cautionend]
>     Interaction:  If you load the cube from a star schema, then you must use the DIMENSION statement to do the following:
> 
>         specify the dimension table name (the DIMTBL= option)
> 
>         specify the dimension (primary) key column (the DIMKEY= option)
> 
>         specify the column (foreign key) in the fact table that corresponds to the dimension key column (the FACTKEY= option) 
```

编辑：

一个维度可以有多个层次结构。它们（它们的列）必须驻留在非规范化基表中或语句`DIMTBL=`选项中引用的一维表中`DIMENSION`。

因此，如果您使用星型模式构建多维数据集，您应该为每个维度提供一个表和一个事实表。每个维度表都应包含定义一个或多个层次结构所需的所有列。

比如说，在您的情况下， DIMENSION MyDim 包含在 MyLib 库中的表 MyDim 中 - 相关语句应该是：

```
DIMENSION MyDim hierarchies=(First Second) 
  DIMKEY=D
  DIMTBL=MyLib.MyDim
     ; 

HIERARCHY First 
     levels=(A B D)
    DEFAULT
    ;
HIERARCHY Second 
     levels=(C D)    
    ; 
```

# php - 使用 htaccess 重写表单获取数据

> ID：11501018
> 
> 赞同：1
> 
> 时间：2012-07-16T08:59:38.530
> 
> 标签：php, forms, .htaccess, rewrite

抱歉，如果是一个虚拟问题，但我真的不知道如何让它工作以下问题我有一个表单，提交后的 url 如下所示

```
sites/example.php?category=Notebooks&prod_group=Apple&product=&customer_type=&voucher_type= 
```

我想要的是在提交时重写这个 url，预期的结果应该是

```
/folder/Notebooks/Apple 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:27:38.863

假设你已经在服务器端添加了重写规则，你可以使用下面的 jQuery，假设你的表单有一个 id`formId`并且其他输入有对应的 id：

```
// Set event handler
$(document).ready(function(){
    $("#formId").submit(function(){
        event.preventDefault();
        window.location.href = "/folder/" +
                               encodeURI($("#category").val()) + "/" +
                               encodeURI($("#prod_group").val());
    });
}); 
```

我还没有测试过，但它应该可以工作。

至于rewrite的服务器设置，请自己尝试，因为它很简单。

# magento - Magento-在默认注册表单上添加一个字段

> ID：11501020
> 
> 赞同：4
> 
> 时间：2012-07-16T08:59:43.847
> 
> 标签：magento

我正在使用 Magento v1.7.0.2 并尝试在注册表单上添加移动字段。我已经修改了代码（参见下面的代码）。但是，注册表单上仍未显示“移动”字段。

有没有人可以帮助我？提前致谢！

**app\etc\modules\Mydons_Customer.xml**

```
<config>
    <modules>
        <Mydons_Customer>
        <codePool>local</codePool>
        <active>true</active>
        </Mydons_Customer>
    </modules>
</config> 
```

**app\code\local\Mydons\Customer\etc\config.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mydons_Customer>
            <version>1.7.0.0</version>
        </Mydons_Customer>
    </modules>
    <global>
        <fieldsets>
            <customer_account>
                <mobile><create>1</create><update>1</update></mobile>
            </customer_account>
        </fieldsets>
        <models>
            <Mydons_Customer>
                <class>Mydons_Customer_Model</class>
            </Mydons_Customer>
        </models>
        <helpers>
            <Mydons_Customer>
                <class>Mydons_Customer_Helper</class>
            </Mydons_Customer>
        </helpers>
        <resources>
            <customerattribute_setup>
                <setup>
                    <module>Mydons_Customer</module>
                    <class>Mydons_Customer_Model_Entity_Setup</class>
                </setup>
            </customerattribute_setup>
        </resources>
    </global>
</config> 
```

**app\code\local\Mydons\Customer\Model\Entity\Setup.php**

```
class Mydons_Customer_Model_Entity_Setup extends Mage_Customer_Model_Entity_Setup
{
    public function getDefaultEntities(){

        return array(

                'mobile'=>array(
                        'type'=> 'static',
                        'label'=> 'Mobile',
                        'visiable' => true,
                        'required' => true,
                        'sort_order' => 80,
                )
        );
    }
} 
```

**app\code\local\Mydons\Customer\sql\customerattribute_setup\mysql4-install-0.1.0.php**

```
 $installer = $this;

    $installer->startSetup();

    $installer->addAttribute('customer', 'mobile', array(
        'label' => 'Mobile',
        'visible' => 1,
        'required' => 1,
        'position' => 1,
        'sort_order' => 80,        
    ));

    $installer->endSetup();

    $customer = Mage::getModel('customer/attribute')->loadByCode('customer', 'mobile');
    $forms= array('customer_account_edit', 'customer_account_create', 'adminhtml_customer', 'checkout_register');
    $customer->setData('used_in_forms', $forms);
    $customer->save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:05:34.300

您需要修改相应的模板，在注册表单中添加您想要的字段。
在这种情况下，`customer/form/register.phtml`并且`persistent/customer/form/register.phtml`

# templates - Sonata Admin Bundle - 表单类型：sonata_type_collection - 自定义模板？

> ID：11501022
> 
> 赞同：8
> 
> 时间：2012-07-16T08:59:48.900
> 
> 标签：templates, symfony, symfony-sonata, sonata-admin

是否可以覆盖表单类型的模板：“sonata_type_collection”？

我试过沿着这些路线：

```
$formMapper->add('slides', 'sonata_type_collection', array(), array(
                'edit' => 'inline',
                'inline' => 'table',
                'sortable'  => 'priority',
                'template' => 'MyBundle:Form:slides.admin.html.twig'
            )); 
```

但无济于事。

我知道我可以覆盖整个模板，但我只想为这个表单做它，而不是我使用这个表单类型的所有地方。

有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T20:44:40.620

我发现了大量代码，`/vendor/sonata-project/admin-bundle/Sonata/AdminBundle/Form/Extension/Field/Type/FormTypeFieldExtension.php`其中实际上设置了一个类型数组以附加到表单视图，它用于优先处理树枝块渲染：（第 99 到 105 行）

```
// add a new block types, so the Admin Form element can be tweaked based on the admin code
        $types    = $view->getVar('types');
        $baseName = str_replace('.', '_', $sonataAdmin['field_description']->getAdmin()->getCode());
        $baseType = $types[count($types) - 1];

        $types[] = sprintf('%s_%s', $baseName, $baseType);
        $types[] = sprintf('%s_%s_%s', $baseName, $sonataAdmin['field_description']->getName(), $baseType); 
```

因此，我所要做的就是定义一个名为`mycompany_admin_content_galleries_sonata_type_collection_widget`or的块`mycompany_admin_content_galleries_slides_sonata_type_collection_widget`，它只适用于这个管理表单:)

为了在我的管理类中完成这个解决方案，我添加了这个函数：

```
public function getFormTheme()
{
    return array_merge(
        parent::getFormTheme(),
        array('MyBundle:Gallery:admin.slides.html.twig')
    );
} 
```

我创建了`MyBundle/Resources/views/Gallery/admin.slides.html.twig`，包含以下内容：

```
{% use 'SonataAdminBundle:Form:form_admin_fields.html.twig' %} // I think this 
             line is not really needed as the base admin's form theme uses this file

{% block my_bundle_content_pages_slides_sonata_type_collection_widget %}

    // copied and edited the contents of Sonata/DoctrineORMAdminBundle/Resources/views/CRUD/edit_orm_one_to_many.html.twig

{% endblock %} 
```

# css - div 锚滚动太远

> ID：11501025
> 
> 赞同：32
> 
> 时间：2012-07-16T08:59:55.590
> 
> 标签：css, anchor

我在我的网站顶部使用了一个静态栏，大约 20 像素高。当我单击一个锚链接时（对于那些不知道的人，维基百科上的导航就是这样工作的。单击一个标题，浏览器会向下移动到它）部分文本消失在那个顶部栏后面。

有没有办法阻止这种情况发生？我无法使用 iFrame。我唯一能想到的就是让它每次回滚一点，但还有另一种方法吗？一些CSS设置来操纵身体或什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-12-03T17:57:20.957

你可以只使用没有任何 javascript 的 CSS。

给你的主播上课：

```
<a class="anchor"></a> 
```

然后，您可以通过将锚定为块元素并进行相对定位，将锚定位在高于或低于实际出现在页面上的位置的位置。-250px 将锚点向上定位 250px

```
a.anchor{display: block; position: relative; top: -250px; visibility: hidden;} 
```

由 Jan 看到[偏移 html 锚以调整固定标题](https://stackoverflow.com/questions/10732690/offsetting-an-html-anchor-to-adjust-for-fixed-header)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2021-02-22T00:42:56.533

### 这是一个现代的、单行的、纯 CSS 解决方案：

```
scroll-margin-top: 20px; 
```

它的作用与听起来的完全一样：就像有边距一样，但仅在滚动上下文中。因此`scroll-margin-top: 20px;`，在一个元素上意味着单击该元素的锚标记会将页面滚动到元素*上方*20 像素。

#### 兼容性（[见 caniuse](https://caniuse.com/?search=scroll-margin)）

不支持IE。此外，Safari 版本 11-14 使用非标准名称：（`scroll-snap-margin-top`但按预期工作）。Safari 14.1+ 使用标准名称。

## 完整示例：

```
nav{
  position: fixed;
  top:0;
  left:0;
  background: black;
  color: white;
  width: 100%;
}

#after-nav{
  margin-top: 25px;
}

#section-1{
  width: 100%;
  background: green;
  height: 500px;
  scroll-margin-top: 20px;
}

#section-2{
  width: 100%;
  background: blue;
  height: 500px;
  scroll-margin-top: 20px;
}

ul{
margin-top: 0;
}
```

```
<nav>
Nav bar: 20px (as in OP)
</nav>
<div id="after-nav">
Table of contents:
<ul>
<li><a href="#section-1">Section 1</a></li>
<li><a href="#section-2">Section 2</a></li>
</ul>

<div id="section-1">Section 1</div>
<div id="section-2">Section 2</div>
</div>
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-16T09:05:54.643

要使用 CSS 解决此问题，您可以向要跳转到的元素添加填充：

**[例子](http://dabblet.com/gist/3121825)**

或者，您可以添加边框：

```
div{ 
  height: 650px; 
  background:#ccc; 
  /*the magic happens here*/
  border-top:42px solid #fff;
}
ul{
  top: 0; 
  width: 100%; 
  height:20px; 
  position: fixed; 
  background: deeppink; 
  margin:0;
  padding:10px; 
}
li{
  float:left;
  list-style:none;
  padding-left:10px;
}
div:first-of-type{ 
  margin-top:0; 
}
```

```
<!-- content to be placed inside <body>…&lt;/body> -->
<ul>
  <li><a href="#s1">link 1</a>
  <li><a href="#s2">link 2</a>
  <li><a href="#s3">link 3</a>
  <li><a href="#s4">link 4</a>
</ul>
<div id="s1" class="first">1</div>
<div id="s2">2</div>
<div id="s3">3</div>
<div id="s4">4</div>
```

然而，这并不总是适用的。

对于 javascript 解决方案，您可以使用附加到锚元素的单击事件来滚动调整的像素数量，如下所示：

```
document.querySelector("a").addEventListener("click",function(e){
    // dynamically determining the height of your navbar
    let navbar = document.querySelector("nav");
    let navbarheight = parseInt(window.getComputedStyle(navbar).height,10);
    // show 5 pixels of previous section just for illustration purposes 
    let scrollHeight = document.querySelector(e.target.hash).offsetTop - navbarheight - 5;
    /* scrolling to the element taking the height of the static bar into account*/
    window.scroll(0,scrollHeight);
    /*properly updating the window location*/
    window.location.hash = e.target.hash;
    /* do not execute default action*/
    e.preventDefault();
});
```

```
nav{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:40px;
  text-align:center;
  background:#bada55;
  margin:0;
}
a{
  display:block;
  padding-top:40px;
}
#section1{
  height:800px;
  background:repeating-linear-gradient(45deg,#606dbc55,#606dbc55 10px,#46529855 10px,#46529855 20px);
}
#section2{
  height:800px;
  background:repeating-linear-gradient(-45deg,#22222255,#22222255 10px,#66666655 10px,#66666655 20px);
}
```

```
<nav>static header</nav>
<a href="#section2">jump to section 2</a> 
<div id="section1">Section 1</div>
<div id="section2">Section 2</div>
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-16T09:16:32.853

**CSS-only**：它有点脏，但`:target {padding-top: 20px;}`如果*你链接到一个块元素*（我假设你这样做，因为你的问题是 div）。但是，当您之后手动滚动时，它可能看起来不太好。示例[http://dabblet.com/gist/3121729](http://dabblet.com/gist/3121729)

不过，我认为使用一点 JavaScript 来解决这个问题会更好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-06-05T01:22:24.480

我有同样的问题。这是一个jQuery解决方案

```
$('a[href^="#"]').on('click',function (e) {
    e.preventDefault();
    var target = this.hash;
    var $trget = $(target);
    // Example: your header is 70px tall.
    var newTop = $trget.offset().top - 70; 
    $('html, body').animate ({
        scrollTop: newTop
    }, 500, 'swing', function () {
        window.location.hash = target;
    }); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T09:13:46.073

尝试`window.scrollBy(xnum,ynum);`

xnum：沿 x 轴（水平）滚动多少像素 ynum：沿 y 轴（垂直）滚动多少像素

例如：[http ://www.w3schools.com/js/tryit.asp?filename=try_dom_window_scrollby](http://www.w3schools.com/js/tryit.asp?filename=try_dom_window_scrollby)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-20T22:30:06.510

在搜索了上述所有其他答案之后，对我来说解决滚动锚问题的答案如下：

***代码：***

```
#idname {
    scroll-margin-top: 20px;
} 
```

感谢上面提出这个答案的人。您显然可以更改边距的像素数。我把它从`20px`改为`40px`，它就像一个魅力。

# delphi - “弱参考”：需要脚踏实地的解释

> ID：11501029
> 
> 赞同：19
> 
> 时间：2012-07-16T09:00:30.777
> 
> 标签：delphi, weak-references

有人可以解释Delphi中的*弱引用吗？*

我注意到在我仔细研究的一些库/框架源代码中经常提到这个概念。我陷入了困境，想对它有一个清晰的了解。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-16T09:13:16.590

通过接口引用相互引用的实例在基于引用计数的接口实现中相互保持活动状态。

弱引用用于打破“让彼此活着”的熊抱。这是通过将一个引用声明为纯指针来规避引用计数机制来完成的。

```
IFriend = Interface(IInterface)
end;

TFriend = class(TInterfacedObject, IFriend)
private
  FFriend: IFriend;
end;

var
  Peter: IFriend;
  John: IFriend;
begin
  Peter := TFriend.Create;
  John := TFriend.Create;

  Peter.Friend := John;
  John.Friend := Peter;
end; 
```

即使当 Peter 和 John 超出范围时，它们的实例也会被保留，因为它们的相互引用使它们的引用计数不会下降到零。

这个问题更常见于复合模式（父-子关系），其中子有对父的反向引用：

```
ISomething = Interface(IInterface)
end;

TSomething = class(TInterfacedObject, ISomething)
end;

TParent = class(TSomething)
  FChildren: TInterfacedList;
end;

TChild = class(TSomething)
  FParent: ISomething;
end; 
```

再次，父母和孩子可以互相保持联系，因为他们的相互引用使他们的引用计数不会下降到零。

这可以通过以下方式解决`weak reference`：

```
TChild = class(TSomething)
  FParent: Pointer;
end; 
```

通过将 FParent 声明为“纯”指针，引用计数机制不会对父级的反向引用起作用。当父级超出范围时，它的引用计数现在可以降为零，因为它的子级不再保持其引用计数高于零。

**注意**此解决方案确实需要仔细注意生命周期管理。当这些类“外部”的某些东西保持对孩子的引用时，孩子们可以在父母的生命之外保持活力。当孩子假设父引用总是指向一个有效的实例时，这可能会导致各种有趣的 AV。如果您需要它，请确保当父级超出范围时，它会使子级在其自己对其子级的引用之前将其反向引用为零。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-16T09:27:44.307

默认情况下，在 Delphi 中，所有引用都是：

*   `pointer`和`class`实例*[的弱引用](http://en.wikipedia.org/wiki/Weak_reference)*；
*   *低级*值类型的**显式副本*，例如`integer, Int64, currency, double`or `record`（以及旧的不推荐使用的`object`or `shortstring`）；*
**   具有高级*值类型*（例如，*动态数组）的*[引用计数](http://en.wikipedia.org/wiki/Reference_counting)*[的写](http://en.wikipedia.org/wiki/Copy-on-write)*时；*`string, widestring, variant`****   *`interface`具有实例引用计数的*强引用；*****

 **强引用计数的主要问题是*潜在的循环*引用问题。当一个`interface`对另一个有强引用，但目标`interface`有一个指向原始的强指针时，就会发生这种情况。即使删除了所有其他引用，它们仍然会相互保留并且不会被释放。这也可以通过一系列对象间接发生，这些对象链中的最后一个对象可能指向较早的对象。

例如，请参见以下接口定义：

```
 IParent = interface
    procedure SetChild(const Value: IChild);
    function GetChild: IChild;
    function HasChild: boolean;
    property Child: IChild read GetChild write SetChild;
  end;

  IChild = interface
    procedure SetParent(const Value: IParent);
    function GetParent: IParent;
    property Parent: IParent read GetParent write SetParent;
  end; 
```

以下实现肯定会泄漏内存：

```
procedure TParent.SetChild(const Value: IChild);
begin
  FChild := Value;
end;

procedure TChild.SetParent(const Value: IParent);
begin
  FParent := Value;
end; 
```

在 Delphi 中，最常见的引用复制变量（即变量、动态数组或字符串）通过实现*写​​时复制来*解决这个问题。不幸的是，这种模式不适用于接口，接口不是值对象，而是引用对象，与实现类绑定，无法复制。

请注意，*基于垃圾收集器的语言*（如 Java 或 C#）不会遇到此问题，因为循环引用由它们的内存模型处理：对象的生命周期由内存管理器全局维护。当然，它会增加内存使用，由于分配和分配期间的额外操作（所有对象及其引用必须在内部列表中维护）而减慢进程，并且可能会在垃圾收集器进入操作时减慢应用程序。

对于没有垃圾收集的语言（如 Delphi），一种常见的解决方案是使用*弱指针*，通过它将接口分配给属性而不增加引用计数。为了轻松创建弱指针，可以使用以下函数：

```
procedure SetWeak(aInterfaceField: PIInterface; const aValue: IInterface);
begin
  PPointer(aInterfaceField)^ := Pointer(aValue);
end; 
```

因此，它可以这样使用：

```
procedure TParent.SetChild(const Value: IChild);
begin
  SetWeak(@FChild,Value);
end;

procedure TChild.SetParent(const Value: IParent);
begin
  SetWeak(@FParent,Value);
end; 
```

您可以尝试阅读[我关于 Delphi 中弱引用的博客文章](http://blog.synopse.info/post/2012/06/18/Circular-reference-and-zeroing-weak-pointers)- 及其相关源代码：我们已经实现了直接弱引用，以及从 Delphi 6 到 XE2 的“归零”弱引用接口处理。

实际上，在某些情况下`nil`，如果您在其子实例之前释放引用实例，则需要将接口弱字段设置为 ，以避免任何访问冲突问题。这称为“**归零弱指针**”，[Apple 使用 ARC 模型实现的](http://blog.synopse.info/post/2011/12/08/Avoiding-Garbage-Collector%3A-Delphi-and-Apple-on-the-same-side)，我们尝试在 Delphi 中实现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-19T10:44:37.083

也可以看看

[Delphi 移动编译器中的自动引用计数](http://docwiki.embarcadero.com/RADStudio/XE4/en/Automatic_Reference_Counting_in_Delphi_Mobile_Compilers)

其中包括新`[weak]`属性的文档：

> ARC 的另一个重要概念是弱引用的作用，您可以通过使用 [weak] 属性标记它们来创建它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-16T19:20:35.183

在最一般的情况下，a`strong reference`控制被引用实例的生命周期，而 a`weak reference`不控制。该术语`weak reference`可用于垃圾收集器、引用计数接口或公共对象的上下文中。

例如，一个 Delphi 表单包含对其所有控件的引用；这些引用可以称为强引用，因为当一个表单被销毁时，它的控件也会被销毁。另一方面，Delphi 窗体的控件具有对其所属窗体的引用。这个引用可以称为弱引用，因为它不以任何方式控制表单的生命周期。**

# php - PHP5函数参数顺序

> ID：11501034
> 
> 赞同：0
> 
> 时间：2012-07-16T09:00:52.817
> 
> 标签：php, function, parameters

> **可能重复：**
> [PHP 可选参数 - 按名称指定参数值？](https://stackoverflow.com/questions/4029404/php-optional-parameters-specify-parameter-value-by-name)

我可以在 PHP5 中只调用第一个和第三个参数的函数吗？
还有另一种方法来指定参数顺序吗？

```
function foo($param1=null, $param2=null, $param3=null) {}

foo($param1, $param3); 
```

代替：

```
foo($param1, null, $param3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:08:18.293

不是直接的，但您可以编写如下内容：

```
function foo($args)
{
    print "param1 : " . $args["param1"] . "\n";
    print "param2 : " . $args["param2"] . "\n";
    print "param3 : " . $args["param3"] . "\n";
}

foo(array("param1" => $param1, "param3" => $param3)); 
```

相反，如果您想允许这样的可选用法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-16T09:02:28.080

不，param3 将被视为 param2。

您可以传递一个哈希，如下所示：

```
$myhash = array('param1'=>'someval','param3'=>'someval');
foo($myhash); 
```

# command-line - 我需要在 Visual Basic 脚本中执行命令行

> ID：11501044
> 
> 赞同：11
> 
> 时间：2012-07-16T09:01:13.503
> 
> 标签：command-line, vbscript, cmd, exec

我需要在我的 vbs 中执行命令“ver”来查看我的操作系统的版本，我不知道如何制作它。

我试过这个，但不工作：

```
Function ExecuteWithTerminalOutput(cmd)
Set shell = WScript.CreateObject("WScript.Shell")
Set Exec =  shell.Exec("ver")
End Function 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-09T16:14:04.420

有一种方法可以做到这一点，而不必将输出写入文件。

例如，假设您想要捕获目录列表的文本。（有很多比这更好的方法，但我只是使用一个简单的例子。）

使用 VBScript 中的以下函数，您可以输入：

```
thisDir = getCommandOutput("cmd /c dir c:") 
```

当执行上述行时，变量“thisDir”将包含 DIR 命令的输出。

请注意，您想要输出的某些命令将要求您通过命令外壳（上面的“cmd /c”部分）传递它们，而如果您直接在没有外壳的情况下运行它们，其他命令可能会正常工作。在没有命令外壳的情况下尝试它。如果失败，请使用命令 shell 尝试。

```
'
' Capture the results of a command line execution and
' return them to the caller.
'
Function getCommandOutput(theCommand)

    Dim objShell, objCmdExec
    Set objShell = CreateObject("WScript.Shell")
    Set objCmdExec = objshell.exec(thecommand)
    getCommandOutput = objCmdExec.StdOut.ReadAll

end Function 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-16T09:02:59.140

尝试这样的事情：

```
Dim objShell
Set objShell = WScript.CreateObject ("WScript.shell")
objShell.run "cmd /c ver"
Set objShell = Nothing 
```

编辑：

那么你可以将输出重定向到一个文件，然后读取该文件：

```
return = WshShell.Run("cmd /c ver > c:\temp\output.txt", 0, true)

Set fso  = CreateObject("Scripting.FileSystemObject")
Set file = fso.OpenTextFile("c:\temp\output.txt", 1)
text = file.ReadAll
file.Close 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-16T09:25:51.033

```
Dim shell
Set shell= WScript.CreateObject ("WScript.shell")
shell.Exec"cmd /c ver"
Set shell= Nothing 
```

# javascript - jquery ui 选择菜单滚动条不起作用

> ID：11501045
> 
> 赞同：9
> 
> 时间：2012-07-16T09:01:16.223
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, select-menu

我使用 jquery 选择菜单插件。我已经初始化了选择

```
$('select').selectmenu({width:100, maxHeight:300, style: 'dropdown'}); 
```

我有很多选项，这会导致出现默认浏览器滚动条，但我无法使用它。如果我单击并尝试拖动此栏，选择菜单将关闭。我可以用鼠标滚轮滚动。css 和各种插件可能存在一些冲突。但我不确定从哪里开始寻找。

任何想法，什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-18T16:09:15.383

您可以设置选择菜单在 CSS 中打开时内容的最大高度，然后它将在可以使用的项目列表中显示一个滚动条。

```
ul.ui-menu { max-height: 420px !important; } 
```

如果您正在使用其他包含 <ul> 元素且分配了“ui-menu”类的 jQuery UI 小部件，则可能需要在 CSS 中进一步限制这种样式更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-27T14:30:32.297

[针对JQueryUI 演示页面](https://jqueryui.com/selectmenu/)的示例“选择一个数字”给出了一个解决方案：

```
$('select').selectmenu().selectmenu("menuWidget").css("height","200px"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T18:57:16.353

js文件这一段好像有问题：

```
// document click closes menu
$( document ).bind( "mousedown.selectmenu-" + this.ids[ 0 ], function( event ) {
    //check if open and if the clicket targes parent is the same
    if ( self.isOpen && !$( event.target ).closest( "#" + self.ids[ 1 ] ).length ) {
        self.close( event );
    }
}); 
```

滚动条同意“if”子句中的条件，所以选择菜单被关闭......

您可以在“if”子句中注释该行，直到有人为此错误提供解决方案。这样，当您单击它时，选择菜单不会关闭，但当您选择任何选项时它将关闭...

编辑：

好的，它现在正在工作。将之前显示的部分更改为：

```
$( document ).bind( "mousedown.selectmenu-" + this.ids[ 0 ], function( event ) {
    //check if open and if the clicket targes parent is the same
    if ( self.isOpen && !$( event.target ).closest( "#" + self.ids[ 1 ] ).length && !$(event.target).hasClass('ui-selectmenu-menu-dropdown')) {
        self.close( event );
    }
}); 
```

这样，由于滚动条是具有类“ui-selectmenu-menu-dropdown”的 div 的一部分......移动滚动条时不会关闭选择菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T07:51:39.643

如果要按 ID 为每个项目设置最大高度。采用：

```
#select1-menu { max-height: 150px !important; }
#select2-menu { max-height: 200px !important; } 
```

例如，您的选择菜单的 id 是 'select' 使用：

```
#select-menu { max-height: 150px !important; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-03T07:30:43.767

```
<!--JQUERY-->
$('.custom-combobox-toggle').on('click',function (e) {
      e.preventDefault();
      $('.ui-menu').addClass('custom-scroll');
});

<!--CSS-->
.ui-widget.ui-widget-content.custom-scroll {
    max-height: 300px;
    overflow: auto;
    display: block;
} 
```

# asp.net - Windows Service 或 Global.asax 哪个更合适？

> ID：11501046
> 
> 赞同：0
> 
> 时间：2012-07-16T09:01:17.510
> 
> 标签：asp.net, windows-services

我最近开始为一家新公司工作，现在正在开发一个 Web 应用程序 (asp.net)。此应用程序使用 Global.asax 启动一个计时器，该计时器将在给定的时间间隔内执行各种操作（发送电子邮件、在数据库中设置各种值等）

他们现在想要的是有一些东西可以调用第三方网络服务来检索一些数据并在我们端更新数据库。我通常会在 Windows 服务中完成上述所有操作。然而，他们似乎很高兴在 global.asax 中有这种类型的东西

我将创建一个新项目并将这个新功能开发为 Windows 服务，但我应该打扰吗？也许我应该把它添加到 global.asax 中？

我的问题是，对于上述情况，最合适/最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:06:35.800

使用外部服务是最好的选择。

> 1.  与请求无关的线程中未处理的异常将取消该进程。即使您通过 Application_Error 方法设置了处理程序，也会发生这种情况。
>     
>     
> 2.  如果您在 Web Farm 中运行您的站点，您最终可能会得到多个应用程序实例，它们都尝试同时运行相同的任务。比第一项更具挑战性，但仍然不是太难。一种典型的方法是使用所有服务器共有的资源，例如数据库，作为协调任务的同步机制。
>     
>     
> 3.  您的站点运行的 AppDomain 可能由于多种原因而关闭，并使用它取消您的后台任务。如果发生在代码执行过程中，这可能会损坏数据。

欲了解更多信息：

*   [每隔几分钟执行一次 global.asax 中的方法](https://stackoverflow.com/q/11354814/1268570)

*   [http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

# python - python3.x 多处理循环没有“if __name__ == '__main__':”

> ID：11501048
> 
> 赞同：3
> 
> 时间：2012-07-16T09:01:23.093
> 
> 标签：python, python-3.x, multiprocessing

我有这个文件（它没有做任何有用的工作，它只是为了学习）：

```
import multiprocessing,sys
def parent(numproc=2):
    print ('at start')
    childs=[]
    print ('bfore Pipe')
    (parentEnd,childEnd)=multiprocessing.Pipe()
    i=0
    print ('printing i:',i)
    child=multiprocessing.Process(target=child_proc, args=(childEnd,i))
    print ('created child')
    child.start()
    print ('started child')
    print ('joining child')
    child.join()
    print ('joined child')
    print ('exeted from for i in childs')
    mins=[1,2]
    print ('task ended. result: ',min(mins))
def child_proc(pipe,name):
    pass
if __name__ == '__main__':
    parent() 
```

以这种形式运行完美：

```
at start
bfore Pipe
printing i: 0
created child
started child
joining child
joined child
exeted from for i in childs
task ended. result:  1 
```

但是如果我放在文件末尾而不是

```
if __name__ == '__main__':
    parent() 
```

只要

```
parent() 
```

它陷入循环...

```
at start
bfore Pipe
printing i: 0
created child
started child
joining child
at start
bfore Pipe
printing i: 0
created child
started child
joining child
at start
bfore Pipe
printing i: 0
created child
started child
joining child
Traceback (most recent call last): 
```

为什么？！这个 if 子句有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:50:25.250

这是 MS Windows 上的一个问题`multiprocessing`：主模块由子任务导入，因此任何不受该`if __name__ . . .`子句保护的代码都会再次运行，从而导致无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:34:36.597

子流程具有以下内容`__name__`：`__parents_main__`并且不再`__main__`具有。`__name__`这就是为什么在测试变量时您的过程不会循环的原因。

有关这方面的更多信息，请参阅[安全导入主模块一章](http://docs.python.org/library/multiprocessing.html#windows)

# sql - SQL 如何从例如更改字符串。2012 年 1 月 6 日至 2012 年 6 月 1 日

> ID：11501049
> 
> 赞同：0
> 
> 时间：2012-07-16T09:01:30.757
> 
> 标签：sql, string

我有一个表格`table_a`，其中的列`field_b`格式是字符串。

在那个领域，他们写了例如`01/06/2012`。

我需要将其更改为`2012-06-01`

我无法更改字段类型等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:13:30.893

```
SELECT CONVERT(DATE,CONVERT(DATEtime,'01/06/2012',103)) 
```

> 更多示例请[点击这里](http://www.sqlusa.com/bestpractices/datetimeconversion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:23:52.987

```
update [YourDB].[dbo].[YourTable]
set [YourColumn] =  convert(nvarchar(10), convert(datetime,[YourColumn]), 126) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:06:33.303

```
select cast(cast('01/06/2012' as DATE) as varchar(10)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:07:36.580

大多数 SQL 引擎都有一个 substring() 函数。将其与 concat() 一起使用来创建新字符串：

（伪代码）

```
update table_a set field_b=concat(substring(field_b, 6, 4), '-', substring(field_b, 3, 2), '-', substring(field_b, 0, 2)) 
```

有关详细信息，请参阅 SQL Server 手册。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T09:10:21.490

```
select convert(datetime,'01/06/2012',103) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-16T09:12:26.497

这是可行的答案，并且可以避免本地化问题：

```
select cast(cast(convert(DATETIME, '01/06/2012', 103) as DATE) as NVARCHAR(10)) 
```

您需要使用 103 作为格式，然后将其转换为日期（以切断时间），然后将其转换为 varchar。

# iphone - iPhone - 检测多个按钮的碰撞

> ID：11501050
> 
> 赞同：0
> 
> 时间：2012-07-16T09:01:36.500
> 
> 标签：iphone, ios5, collision-detection, accelerometer

我刚刚开始在 iPhone 上进行开发，并且我已经设法让我的按钮（其中六个）与 UIAccelerator 一起移动。当它们相互碰撞时我面临的问题。我希望它们向同一个方向反弹，如果我只使用 2 个按钮，这将有效。但是当有超过 2 个按钮的多次碰撞时，它们会重叠并最终相互融合。

这是我设置委托本身的代码：

```
UIAccelerometer *accel = [UIAccelerometer sharedAccelerometer];
accel.delegate = self;
accel.updateInterval = 1.0f/60.0f; 
```

加速器的委托方式：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{
delta.x = acceleration.x * 5;
delta.y = acceleration.y * -5;

self.firstButton.center = CGPointMake(self.firstButton.center.x + delta.x, self.firstButton.center.y + delta.y);
self.secondButton.center = CGPointMake(self.secondButton.center.x + delta.x, self.secondButton.center.y + delta.y);
self.thirdButton.center = CGPointMake(self.thirdButton.center.x + delta.x, self.thirdButton.center.y + delta.y);
self.fourthButton.center = CGPointMake(self.fourthButton.center.x + delta.x, self.fourthButton.center.y + delta.y);
self.fifthButton.center = CGPointMake(self.fifthButton.center.x + delta.x, self.fifthButton.center.y + delta.y);
self.sixthButton.center = CGPointMake(self.sixthButton.center.x + delta.x, self.sixthButton.center.y + delta.y);

[self updateMovingObjects:self.firstButton];
[self updateMovingObjects:self.secondButton];
[self updateMovingObjects:self.thirdButton];
[self updateMovingObjects:self.fourthButton];
[self updateMovingObjects:self.fifthButton];
[self updateMovingObjects:self.sixthButton];
} 
```

更新移动对象：

```
- (void)updateMovingObjects:(UIButton *)button{
/*** DETECT COLLISIONS ***/

// Right screen
if(button.center.x < button.frame.size.width / 2){
    button.center = CGPointMake(button.frame.size.width / 2, button.center.y); 
}
// Left screen
if(button.center.x > 320 - button.frame.size.width / 2){
    button.center = CGPointMake(320 - button.frame.size.width / 2, button.center.y); 
}
// Top screen
if(button.center.y < button.frame.size.height / 2){
    button.center = CGPointMake(button.center.x, button.frame.size.height / 2); 
}
// Bottom screen
if(button.center.y > 480 - 20 - 43 - button.frame.size.height / 2){
    button.center = CGPointMake(button.center.x, 480 - 20 - 43 - button.frame.size.height / 2); 
}

// Detect collision with objects
for (UIView *anotherView in [self.view subviews]) {
    if (button == anotherView){
        continue;
    }
    if(CGRectIntersectsRect(button.frame, anotherView.frame)){
        float_t vec = sqrtf(powf(delta.x, 2.0)+powf(delta.y, 2.0));
        // collided from left or bottom
        if( (button.center.x + button.frame.size.width / 2 >= anotherView.center.x - anotherView.frame.size.width / 2 &&
             button.center.x + button.frame.size.width / 2 <= anotherView.center.x - anotherView.frame.size.width / 2 + 15)
           ||  (button.center.y - button.frame.size.height / 2 <= anotherView.center.y + anotherView.frame.size.height / 2 &&
                button.center.y - button.frame.size.height / 2 >= anotherView.center.y + anotherView.frame.size.height / 2 - 15) ){
               button.center = CGPointMake(button.center.x - vec, button.center.y + vec);
           }
        // collided from top or right
        else{
            button.center = CGPointMake(button.center.x + vec, button.center.y - vec);
        }
    }
}

/*** END DETECT COLLISIONS ***/
} 
```

提前致谢。

编辑：我为检测它是否从左侧、右侧、底部或顶部碰撞的功能制作。现在工作得更好，但是如果我让它们同时移动，问题仍然存在重叠，我的猜测是它没有时间计算，因此被重叠：

```
- (BOOL)collidedFromLeft:(UIButton *)button{
for (UIView *anotherView in [self.view subviews]) {
    if (button == anotherView){
        continue;
    }
    if(CGRectIntersectsRect(button.frame, anotherView.frame)){
        if(button.center.x + button.frame.size.width / 2 - delta.x < anotherView.center.x - anotherView.frame.size.width / 2 &&
           button.center.x + button.frame.size.width / 2 >= anotherView.center.x - anotherView.frame.size.width / 2){
            return YES;
        }
    }
}
return NO; 
```

}

```
- (BOOL)collidedFromTop:(UIButton *)button{
for (UIView *anotherView in [self.view subviews]) {
    if (button == anotherView){
        continue;
    }
    if(CGRectIntersectsRect(button.frame, anotherView.frame)){
        if(button.center.y + button.frame.size.height / 2 - delta.y < anotherView.center.y - anotherView.frame.size.height / 2 &&
           button.center.y + button.frame.size.height / 2 >= anotherView.center.y - anotherView.frame.size.height / 2){
            return YES;
        }
    }
}
return NO; 
```

}

```
- (BOOL)collidedFromRight:(UIButton *)button{
for (UIView *anotherView in [self.view subviews]) {
    if (button == anotherView){
        continue;
    }
    if(CGRectIntersectsRect(button.frame, anotherView.frame)){
        if(button.center.x - button.frame.size.width / 2 - delta.x > anotherView.center.x + anotherView.frame.size.width / 2 &&
           button.center.x - button.frame.size.width / 2 <= anotherView.center.x + anotherView.frame.size.width / 2){
            return YES;
        }
    }
}
return NO; 
```

}

```
- (BOOL)collidedFromBottom:(UIButton *)button{
for (UIView *anotherView in [self.view subviews]) {
    if (button == anotherView){
        continue;
    }
    if(CGRectIntersectsRect(button.frame, anotherView.frame)){
        if(button.center.y - button.frame.size.height / 2 - delta.y > anotherView.center.y + anotherView.frame.size.height / 2 &&
           button.center.x - button.frame.size.width / 2 <= anotherView.center.y + anotherView.frame.size.height / 2){
            return YES;
        }
    }
}
return NO; 
```

}

然后我在他们移动时检查：

```
if([self collidedFromLeft:button]){
    button.center = CGPointMake(button.center.x - 20, button.center.y);
}
if([self collidedFromRight:button]){
    button.center = CGPointMake(button.center.x + 20, button.center.y);
}
if([self collidedFromTop:button]){
    button.center = CGPointMake(button.center.x, button.center.y - 20);
}
if([self collidedFromBottom:button]){
    button.center = CGPointMake(button.center.x, button.center.y + 20);
} 
```

# sql-server-2008 - 将 varchar 值 ',' 转换为数据类型 int 时转换失败

> ID：11501055
> 
> 赞同：0
> 
> 时间：2012-07-16T09:01:53.927
> 
> 标签：sql-server-2008

这是我的 SQL 查询

```
DECLARE @Amount int
SELECT @Amount = COALESCE(@Amount+ ', ', '') + Amount FROM Hotel 
```

在执行此查询时，我收到错误：

```
"Conversion failed when converting the varchar value ', ' to data type int" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T09:02:38.640

您需要将数字显式转换为字符串，否则它将尝试从字符串隐式转换为数字。

还要将变量声明为正确的数据类型...

```
 DECLARE @Amount varchar(max)
 SELECT @Amount = COALESCE(@Amount+ ', ', '') + CAST(Amount AS VARCHAR(11))
 FROM Hotel 
```

你可能还想看看[`XML PATH`](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)这个，就像你在 2008 年一样。

# asp.net - 带有 READ UNCOMMITTED 的 ASP.NET 连接

> ID：11501063
> 
> 赞同：1
> 
> 时间：2012-07-16T09:02:22.693
> 
> 标签：asp.net, sql, sql-server-2008, tsql

我有一个 Web 应用程序，它的所有查询都以

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
```

有什么方法可以创建具有此隔离级别的所有连接？我可以在 web.config 或其他地方实现这个连接池吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:45:08.580

你不能这样做。

您需要在启动事务时明确定义隔离级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:16:55.350

您可以在数据库的属性中找到此选项（如果您使用的是 SQL Server Management Studio），或者使用[ALTER DB](http://msdn.microsoft.com/en-us/library/bb522682.aspx)语句。

```
ALTER DB dname
SET READ_COMMITTED_SNAPSHOT OFF 
```

编辑：感谢@Martin Smith，该命令没有按照您的意愿执行。有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms173763.aspx)（已提交读取与关闭快照和未提交读取之间的差异）。

# php - 当浏览器关闭时。如何在 php 中关闭浏览器时运行 sqlk 查询

> ID：11501070
> 
> 赞同：1
> 
> 时间：2012-07-16T09:02:51.260
> 
> 标签：php, jquery

我对浏览器关闭问题有一些疑问。

我正在使用 xcart。当用户登录网站并且任何情况下浏览器都将关闭，因此会话将被破坏..并且还运行 sql 查询以获取用户状态将脱机。

问候， 马尼什·帕特尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:06:32.787

更新用户状态的代码可以移动到包含文件中，类似于以下内容：

```
$time = date('Y-m-d H:i:s', strtotime('now -15 minutes'));
$sql = "UPDATE users SET status = 'offline' WHERE last_activity < '{$time}'"; 
```

例如，这可以包含在站点主页上，并且与实际在线的人无关。

你显然需要一个列（时间戳在这里会很好）来记录他们的活动

# multithreading - 设计问题：当多个操作需要时从单个操作或 Manager 调用服务

> ID：11501071
> 
> 赞同：0
> 
> 时间：2012-07-16T09:02:51.803
> 
> 标签：multithreading, caching

我有一个执行 A、B、C 的操作列表（这个列表可以增长），它执行完全不同的操作。这些操作中的每一个都由单独的 java 类执行。有一个经理 MngrY，他坐在最上面，叫 A、B、C

执行操作 (A,B,C) 的类需要调用不同的服务 X1,X2,X3,X4,X5 来达到目的。我们有用于调用服务的包装类 WX1、WX2、WX3、WX4、WX5。我们从 A、B、C 进行的一些调用很常见（比如 WX3、WX4）。（可能是 A、B、C 中的两个或其中三个）。

现在我们应该从哪里调用 X1,X2,X3,X4,X5。理想情况下，A、B、C 中的每一个都应该调用所需的服务。但是对于在所有 A、B、C 中共享的那些，从 MngrY 调用并将服务调用的输出发送到 A、B、C 中的每一个是否有意义（这在效率方面是有意义的，但在设计方面是明智的，因为 MngrY 应该不知道 A、B、C 的运作方式）。

所以选项是

1.  从 MngrY 调用公共服务调用（WX3，WX4），这些调用是单个组件单独需要的。是好的设计吗？

2.  由经理 MngrY 拨打所有服务电话。它会扩大规模吗？将来我们可能不得不提出很多服务请求，并且为了其他人的利益而阻止每个模块，并且设计明智，使 MnagrY 了解每个模块的需求。

3.  根据需要从单个组件（根据需要）进行所有服务调用，并通过缓存使包装器处理重复请求。依靠缓存不进行两次调用是否很好？服务必须在几毫秒内返回结果，并且不能总是进行两次调用。

4.  或者我们应该在 WX1,WX2,WX3,... 中有一个缓存机制，以确保相同的调用不会重复两次。

同样在将来，我们可能希望从 MngrY 并行调用 A、B、C，因此在这种情况下，缓存可能会产生问题。因为同一个请求可能不止一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:02:09.817

唔...

在必须执行复杂且变化的操作序列的情况下，我通常求助于具有某种“请求/命令/结果”类的状态机，称之为“OpClass”。管理器加载类的实例，其中包含定义 A、B 或 C 操作、数据、命令枚举、链接、其他类实例所需的一切。通过这种方式，OpClass 实例具有以正确的顺序执行必要的 X1..X5 操作所需的所有状态和其他信息（如果顺序很重要），并确保操作不会不必要地重复 - A、B或 C 被封装。然后将 OpClass 发布给 A、B 或 C，这些代理可以根据需要调用 X1..X5 以完成请求的操作。OpClass 应该包含用于存储任何结果和错误报告的成员，例如。

TBH，我可能也会将 A、BC 聚合到 OpClass 中，因此形成一种“超级” OpClass，只需要加载数据和命令，然后提供执行，例如。通过 run() 方法。稍后移动到队列、线程和/或线程池的并行操作然后变得更简单，实际上接近于微不足道:)

这是相关的还是有意义的？

# arrays - AS3：二维数组的长度

> ID：11501080
> 
> 赞同：1
> 
> 时间：2012-07-16T09:03:21.430
> 
> 标签：arrays, actionscript-3, trace

我正在制作这样的二维数组：

```
var array = [];
array.push(["plus", "alpha"]);
array.push(["john", "doe"]);
array.push(["christina", "aguilera"]); 
```

因此，如果我运行这样的命令：

```
trace(array[2][0]); 
```

它应该给我：

```
christina 
```

对。现在，如果我：

```
trace(array.length); 
```

我会得到什么？我的理论：

1.  考虑到这是一个二维数组，它会给我数组中包含的所有数组的长度，因此它会跟踪 6。
2.  这本身就是一个数组，元素也是数组；但这没关系，所以它会给我3。

以上哪一项是对的？还是两者都错了？那它会给我什么？

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:15:58.943

您是否尝试运行它...？

它将（并且应该）返回 3。AS3 中没有多维数组这样的概念——只有数组中的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:15:50.877

长度应为 3。因为您正在创建多维数组。每个维度都有自己的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:32:01.513

毫无疑问，第二个假设是正确的。基本上，没有“多维数组”这样的东西。你有一个包含数组类型元素的数组，尽管这些元素可以是对象、数字、字符串或其他任何东西。

# sql-server-2008 - 将列同时用作单个更新查询的源和目标

> ID：11501085
> 
> 赞同：0
> 
> 时间：2012-07-16T09:03:50.027
> 
> 标签：sql-server-2008, transactions

我正在尝试对表中的几个字段执行更新，以切换它们的值（由于生成数据的软件中的一些错误逻辑，这超出了我的控制范围）。

我将使用的查询如下所示：

```
BEGIN TRANSACTION
SET @MyQuery = 'UPDATE myTable SET ColumnA = ColumnB, ColumnB = ColumnC WHERE myConditions'
EXEC @MyQuery
COMMIT TRANSACTION 
```

或者，它看起来像这样：

```
BEGIN TRANSACTION
SET @MyQuery = 'UPDATE myTable SET ColumnA = ColumnB WHERE myConditions'
SET @MyQuery2 = 'UPDATE myTable SET ColumnB = ColumnC WHERE myConditions'
EXEC @MyQuery
EXEC @MyQuery2
COMMIT TRANSACTION 
```

我很确定拆分查​​询可以保证我想要的结果，但是如果我可以安全地假设单个查询是可靠的，它会更容易（更少的全面编辑）。

前一个查询会获得与后者相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:45:42.613

是的。

```
UPDATE myTable
SET    ColumnA = ColumnB,
       ColumnB = ColumnC
WHERE  myConditions 
```

会正常工作。从概念上讲，赋值在 SQL[中“一次全部”](http://www.ndc2010.no/index.aspx?id=268800)发生，因此以下操作也可以直接交换两个列值。

```
UPDATE myTable
SET    ColumnA = ColumnB,
       ColumnB = ColumnA 
WHERE  myConditions 
```

# java - 使用限制的休眠条件

> ID：11501086
> 
> 赞同：0
> 
> 时间：2012-07-16T09:03:51.010
> 
> 标签：java, hibernate, hibernate-criteria

我有一个实体

```
public class CommissionSummary {    
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(length = 100)
    private String advisorCode;
    @Column(length = 100)
    private String advisorName;
    private String advisorCodeParent;
    @Column(length = 100)
    private String advisorNameParent;
    @Column(length = 100)
    private String advisorPost;
    @Column
    private Double percentage;
    @Column
    private Double diffPercentage;
    @Column
    private Double saleAmount;
    @Column
    private Long saleCount;
    @Column
    **private Double commissionAmount;
    @Column
    private Integer month;
    @Column
    private Integer year;**
    //Getter Setter
} 
```

在屏幕上，用户正在输入标准以获取两个日期之间的日期。

前任。从 2012 年 1 月 1 日到 2012 年 7 月 30 日。

在 CommissionSummary 实体中没有日期列，但它有月份和年份 2 单独的列。

我想根据月份和年份列获取用户给出的从日期到日期期间的 CommissionSummary 记录。

那么如何使用 Hibernate Criteria / Restrictions 来实现这一点呢？

注意：日期字段在用户输入的日期和日期中没有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T19:14:08.033

您可以将标准分解为三个较小标准的析取：

1.  佣金的年份等于查询的起始年份，其月份大于等于查询的起始月份
2.  佣金的年份大于查询的开始年份且小于其结束年份
3.  佣金的年份等于查询的最后年份，其月份小于或等于查询的结束月份

您可以将其中的每一个写成两个简单比较的结合。这看起来像（未经测试！）：

```
int fromYear, fromMonth, toYear, toMonth;
Property year = Property.forName("year");
Property month = Property.forName("month");
session.createCriteria(CommissionSummary.class).add(Restrictions.disjunction()
    .add(Restrictions.and(year.eq(fromYear), month.ge(fromMonth))
    .add(Restrictions.and(year.gt(fromYear), year.lt(toYear))
    .add(Restrictions.and(year.eq(toYear), month.le(toMonth))
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:21:38.457

这样做没有任何限制。您必须创建自己的 Criterion 子类来生成适当的 SQL，或者使用`Restrictions.sqlRestriction()`.

在 SQL 中，在 Oracle 上，SQL 限制可能如下所示：

```
to_date(c.year || '-' || c.month || '-01', 'YYYY-MM-DD') between :startDate and :endDate) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T09:20:58.710

您可以使用 HQL 来选择您想要的内容：

```
session.beginTransaction();
session.clear();

Query query = session.createSQLQuery(" from CommissionSummary CS  where  to_date(CS.year || '-' || CS.month || '-01', 'YYYY-MM-DD') between :startDate and :endDate)"

List result = query.list(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T10:19:51.140

感谢您的所有回答@JB Nizet 告诉了正确的方法，但它来自本机 SQL。我在下面尝试过成功....

```
public List<CommissionSummary> getCommissionSummary(AdvisorReportForm advisorReportForm) {
        Criteria criteria = getSession().createCriteria(CommissionSummary.class);
        if (advisorReportForm.getAdvisorId() != null && advisorReportForm.getAdvisorId() > 0) {
            criteria.add(Restrictions.eq("advisorCode", advisorReportForm.getAdvisorId().toString()));
        }

        if (advisorReportForm.getFromDate() != null && advisorReportForm.getToDate() != null) {
            Calendar calFrom = Calendar.getInstance();
            calFrom.setTime(advisorReportForm.getFromDate());

            Calendar calTo = Calendar.getInstance();
            calTo.setTime(advisorReportForm.getToDate());

            Criterion crit1 = Restrictions.eq("month", calFrom.get(Calendar.MONTH) + 1);
            Criterion crit2 = Restrictions.eq("year", calFrom.get(Calendar.YEAR));
            Criterion critMonthYear1 = Restrictions.and(crit1, crit2);
            calFrom.add(Calendar.MONTH, 1); // increment loop by month

            Criterion critAll = critMonthYear1;
            while (calFrom.getTimeInMillis() < calTo.getTimeInMillis()) {
                Criterion crit1Loop = Restrictions.eq("month", calFrom.get(Calendar.MONTH) + 1);
                Criterion crit2Loop = Restrictions.eq("year", calFrom.get(Calendar.YEAR));
                Criterion critMonthYearLoop = Restrictions.and(crit1Loop, crit2Loop);
                critAll = Restrictions.or(critAll, critMonthYearLoop);
                calFrom.add(Calendar.MONTH, 1); // increment loop by month
            }
            criteria.add(critAll);

        }

        return criteria.list();
    } 
```

从日期到日期的差异最多可验证 6 个月。我没有看到太多的性能问题。所以就用了这个。

此处生成的 SQL 供您参考

```
SELECT * FROM CommissionSummary this_ 
WHERE this_.advisorCode=1 
AND (((((this_.month=11 AND this_.year=2011) OR (this_.month=12 AND this_.year=2011)) OR (this_.month=1 AND this_.year=2012)) 
OR (this_.month=2 AND this_.year=2012)) OR (this_.month=3 AND this_.year=2012)) 
```

# jquery - jquery full calendar 将日历向前移动一周并阻止下一个按钮。

> ID：11501087
> 
> 赞同：0
> 
> 时间：2012-07-16T09:03:52.693
> 
> 标签：jquery, calendar

大家好，感谢您花时间阅读本文。我正在使用 jquery callendar 并且我正在尝试构建自定义视图，如果我正在使用议程周视图查看该周中的所有天，我正在徘徊我如何才能在未来仅阻止日历一周？我的意思是，我只希望它在未来一周内显示，不再显示。这是我的配置；

```
$('#calendar').fullCalendar({
            header: {
                left: 'next today',
                center: 'title',
                right: 'week'
            },
                        defaultView: 'basicWeek',
            editable: true,
            events: [<?php echo $calendar_events?>
                                ]
                    });

    }); 
```

谢谢大家先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:51:38.713

周视图中 1 周阻塞的简单解决方案。要使此代码正常工作，您需要来自[http://www.merlyn.demon.co.uk/weekcalc.htm#WNR的 getWeekNumber 函数](http://www.merlyn.demon.co.uk/weekcalc.htm#WNR)

```
/* For a given date, get the ISO week number
*
* Based on information at:
*
*    http://www.merlyn.demon.co.uk/weekcalc.htm#WNR
*
* Algorithm is to find nearest thursday, it's year
* is the year of the week number. Then get weeks
* between that date and the first day of that year.
*
* Note that dates in one year can be weeks of previous
* or next year, overlap is up to 3 days.
*
* e.g. 2014/12/29 is Monday in week  1 of 2015
*      2012/1/1   is Sunday in week 52 of 2011
*/
function getWeekNumber(d) {
   // Copy date so don't modify original
   d = new Date(d);
   d.setHours(0,0,0);
   // Set to nearest Thursday: current date + 4 - current day number
   // Make Sunday's day number 7
   d.setDate(d.getDate() + 4 - (d.getDay()||7));
   // Get first day of year
   var yearStart = new Date(d.getFullYear(),0,1);
   // Calculate full weeks to nearest Thursday
   var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7)
   // Return array of year and week number
   return [d.getFullYear(), weekNo];
} 
```

您需要做的是在加载视图后检查当前周数：

```
$('.calendar-container').fullCalendar({
    viewDisplay: function(view) {
        var selectedWeekNumber = getWeekNumber($('.calendar-container').fullCalendar('getView').start);
        var currentWeekNumber = getWeekNumber(new Date());

        if (selectedWeekNumber[1] == currentWeekNumber[1]) {
            $('a.date-link.prev').hide();
            $('a.date-link.next').show();
        } else {
            $('a.date-link.prev').show();
            $('a.date-link.next').hide();
        }
    }
}); 
```

# windows-installer - 已安装的 msi 的功能在另一个 msi 的主要升级后被公布

> ID：11501089
> 
> 赞同：1
> 
> 时间：2012-07-16T09:03:56.550
> 
> 标签：windows-installer

我有两个 msi A、B。这些 msi 在彼此之间共享一些组件，但是具有不同的功能。

案子：

*   A和B安装。功能具有“本地”状态
*   然后我安装了更新版本的 A（主要升级）。
*   在 B 的该功能被宣传后，我无法为 B 进行适当的重大升级。

我从 A 的升级日志中找不到任何提示，为什么 B 的功能会被宣传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:27:47.160

当你进行重大升级时，原来的 msi A 会被卸载，然后安装一个新版本。较新的版本有其他组件，这是意料之中的，因此系统上缺少 msi B 的某些组件。

您可以通过简单地删除 msi A 来重现相同的问题吗？

我可以猜测旧版本和新版本的相关组件共享相同的路径，因此 msi B 使用的某些文件被替换为新版本。

# python - 迭代嵌套列表和字典

> ID：11501090
> 
> 赞同：5
> 
> 时间：2012-07-16T09:04:01.253
> 
> 标签：python, loops

我需要遍历嵌套列表和字典，并通过十六进制字符串替换每个整数。例如，这样的元素可能如下所示：

```
element = {'Request': [16, 2], 'Params': ['Typetext', [16, 2], 2], 'Service': 'Servicetext', 'Responses': [{'State': 'Positive', 'PDU': [80, 2, 0]}, {}]} 
```

应用该功能后，它应该如下所示：

```
element = {'Request': ['0x10', '0x02'], 'Params': ['Typetext', ['0x10', '0x02'], '0x02'], 'Service': 'Servicetext', 'Responses': [{'State': 'Positive', 'PDU': ['0x50', '0x02', '0x00']}, {}]} 
```

我已经找到了一个函数来迭代这样的嵌套迭代[http://code.activestate.com/recipes/577982-recursively-walk-python-objects/](http://code.activestate.com/recipes/577982-recursively-walk-python-objects/)。适应 python 2.5 这个函数看起来像这样：

```
string_types = (str, unicode)
iteritems = lambda mapping: getattr(mapping, 'iteritems', mapping.items)()

def objwalk(obj, path=(), memo=None):
    if memo is None:
        memo = set()
    iterator = None
    if isinstance(obj, dict):
        iterator = iteritems
    elif isinstance(obj, (list, set)) and not isinstance(obj, string_types):
        iterator = enumerate
    if iterator:
        if id(obj) not in memo:
            memo.add(id(obj))
            for path_component, value in iterator(obj):
                for result in objwalk(value, path + (path_component,), memo):
                    yield result
            memo.remove(id(obj))
    else:
        yield path, obj 
```

但是这个函数的问题是，它返回元组元素。而那些无法编辑。你能帮我实现我需要的功能吗？

最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:19:37.367

该函数不仅返回元组元素；它返回嵌套结构中任何项目的路径，以及它的值。您可以使用该路径获取值并更改它：

```
for path, value in objwalk(element):
    if isinstance(value, int):
        parent = element
        for step in path[:-1]:
            parent = parent[step]
        parent[path[-1]] = hex(value) 
```

因此，对于每个整数值，使用路径查找该值的父值，然后将当前值替换为它的十六进制等效值。

您从上述方法获得的输出：

```
>>> element
{'Params': ['Typetext', ['0x10', '0x2'], '0x2'], 'Request': ['0x10', '0x2'], 'Responses': [{'State': 'Positive', 'PDU': ['0x50', '0x2', '0x0']}, {}], 'Service': 'Servicetext'} 
```

# html - Magento 从 HTML 块重定向

> ID：11501091
> 
> 赞同：2
> 
> 时间：2012-07-16T09:04:02.930
> 
> 标签：html, magento, redirect, block

我想在我的自定义 html 块中重定向到特定的 url。

我正在尝试什么：

```
class Mage_Page_Block_Html_World extends Mage_Core_Block_Template {
function __construct()
{
    $i = 0;
    parent::__construct();
    $this->setTemplate('page/html/world.phtml');
    $this->setCookie();
}

public function setCookie()
{
    $lang = $this->getLanguageCode();
    if(isset($_GET['country'])) {
        $country = $_GET['country']; 
        Mage::getModel('core/cookie')->set('country', $country);
    } else {
        $country = Mage::getModel('core/cookie')->get('country');
    }
    /*Redirect to cookie url*/
    if($country) {
        try {
            $url = "http://myurl.dev/".$country."/";
            Mage::app()->getFrontController()->getResponse()->setRedirect($url);
        } catch (Exception $e) {
            echo 'Exception: ',  $e->getMessage(), "\n";
        }
    }
} 
```

因为我在我的 .htaccess 中使用了多存储配置，所以我使用：

SetEnvIf Host www.myurl.dev MAGE_RUN_CODE=base
SetEnvIf Host www.myurl.dev MAGE_RUN_TYPE=website
SetEnvIf Host ^myurl.dev MAGE_RUN_CODE=base
SetEnvIf Host ^myurl.dev MAGE_RUN_TYPE=website

SetEnvIf 主机 www.myurl1.dev MAGE_RUN_CODE=vs
SetEnvIf 主机 www.myurl1.dev MAGE_RUN_TYPE=网站
SetEnvIf 主机 ^myurl1.dev MAGE_RUN_CODE=vs
SetEnvIf 主机 ^myurl1.dev MAGE_RUN_TYPE=网站

问题：通过此重定向，我收到错误 310：重定向过多。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:34:26.500

考虑到框架架构，这是一种不合适的方法。作为开发人员，您可以使用多种机制来解析代码并触发重定向。当请求控制器层和事件观察器系统更合适时，您当前的方法让您使用视图层来触发重定向。

该`controller_action_predispatch`事件在所有请求范围内都可用，并且每个路由都有针对性的预调度事件。您可以使用这些和`Mage_Core_Controller_Request_Http`对象（“请求对象”）来触发重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:02:10.090

太多的重定向意味着无限循环。听起来您正在每个页面上加载此块 - 这意味着即使用户被重定向，该块也会再次加载并仍然尝试重定向它们。

我建议您对国家/地区的检查需要更改：

```
if($country) { 
```

一旦用户被重定向，此检查需要失败，以避免发送另一个重定向，目前看起来即使在重定向之后它也返回 true。

# apache-flex - BlazeDS 流媒体端点 Tomcat 7 不工作

> ID：11501094
> 
> 赞同：1
> 
> 时间：2012-07-16T09:04:13.180
> 
> 标签：apache-flex, tomcat7, blazeds

我试图让带有 BlazeDS 的 Tomcat 7 工作。Streaming for Messaging 似乎不再起作用了。

我下载了 Tomcat 7 并将其与 BlazeDS Turnkey 示例合并在一起。如果我尝试即。Safari 中的 TraderDesktop 示例它回退到轮询。Chrome 和 Firefox 只是挂起。

有人已经尝试过还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:42:11.553

根据交叉帖子，这可能与您的 BlazeDS 版本有关
Tomcat 7 需要 BlazeDS 4 而 Tomcat 6.x 需要 BlazeDS 3

[源](http://forums.adobe.com/thread/777748)

# sql - 如何从逗号分隔的参数中进行选择？

> ID：11501105
> 
> 赞同：0
> 
> 时间：2012-07-16T09:04:48.170
> 
> 标签：sql, sql-server, select, stored-procedures

我有这张桌子：

```
Name | Date | Para1|
N1   | 01/10| 1    |
N2   | 02/10| 8    |
N2   | 04/10| 7    |
N3   | 05/10| 6    | 
```

我想选择一些名称作为参数：@Name = 'N1,N2' 并且只选择较早的参数 para 1，以便输出我将拥有：

```
N1 | 1|
N2 | 8| 
```

我试过了：

```
SELECT TOP 1 Para1 From MyTable  where  Name IN ( @Name)  ORDER BY Date ASC 
```

当我要求 Name = 'N1,N2' 时，将部分 IN (@Name) 视为一个完整的单词

知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:12:20.103

```
SELECT TOP 1 Para1 From MyTable  
where  ','+@Name+',' like '%,'+cast(Name as varchar(100))+',%'
ORDER BY Date ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:25:28.223

如果您使用的是 SQL-Server 2008 或更高版本，那么您应该考虑使用表值参数，而不是逗号分隔的列表。下面是如何创建所需类型、创建过程并执行它的示例。

```
CREATE TYPE dbo.NameList AS TABLE (Name VARCHAR(50) NOT NULL)

GO

CREATE PROCEDURE dbo.GetNames @NameList dbo.NameList READONLY
AS
BEGIN
    SELECT  TOP 1 Para1
    FROM    MyTable 
            INNER JOIN @NameList n
                ON MyTable.Name = n.Name
    ORDER BY Date ASC

END

GO

DECLARE @Names dbo.NameList
INSERT @Names VALUES ('N1'), ('N2')
EXECUTE dbo.GetNames @Names 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:12:42.360

@name 被视为一个完整的单词，因为它是字符串的一部分。你应该像这样用逗号分隔它们。'N1'，N2'。

我不知道您使用的是哪个数据库。但对于 SQLServer。您可以根据逗号分隔符轻松拆分 @name 字符串。在甲骨文中。这也是可能的。

如果您正在使用 SQlServer 并且您不能这样做，请告诉我。简而言之，上面的问题是您没有使用逗号拆分 N1 和 N2，您只是将其放在字符串中。它应该看起来像这样 'N1' ， 'N2'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T02:47:13.563

是的，如果您使用的是 SQL Server 2008+，那么正如 GarethD 指出的那样，您可以使用表值参数。

如果您使用的是 SQL Server 2005，您可以试试这个：

```
--SPLIT Function
CREATE FUNCTION [dbo].[SplitUsingXML] 
( 
    @String VARCHAR(MAX),
    --If your delimiter is multi character
    --then change it as VARCHAR with appropriate length 
    @Delimiter CHAR(1) 
)
RETURNS @Results TABLE
(
    parsedValue VARCHAR(MAX)
)   
AS
BEGIN
    DECLARE @xml XML

    --Below line seems to get screwed up once i post it in Blogger :(
    --please use the line as shown in the attached image. Sorry about that.
    SET @XML = N'<Content><row>' + REPLACE(@String, @Delimiter, '</row><row>') + '</row></Content>'

    --If your individual value length within the CSV can be more than 25 characters
    --then you might want to increase it in the below statement
    --pls note it won't throw an error if its more than 25 characters 
    --just that it would truncate and show only the first 25 character :)
    INSERT INTO @Results(parsedValue)
    SELECT row.value('.','VARCHAR(25)') as parsedValue 
    FROM @xml.nodes('//Content/row') AS RECORDS(row)

    RETURN
END
GO

SELECT [name], date, para1
FROM 
(   
    SELECT 
        [name], date, para1, ROW_NUMBER() OVER(PARTITION BY [date] ORDER BY [date] DESC) AS RowNum
    FROM #test a
    WHERE a.[Name] IN (SELECT parsedValue FROM dbo.SplitUsingXML('N1,N2', ','))
) AS WorkTable
WHERE RowNum = 1 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-16T09:08:46.603

用它自己的撇号 (') 分隔每个名称。

```
SELECT TOP 1 Para1 From MyTable  where  Name IN ('N1', 'N2')  ORDER BY Date ASC 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-16T09:10:19.727

此查询将返回考虑 'N1' 或 'N2' 作为 WHERE 子句的一部分：

```
SELECT Name, Para1 FROM <table name> WHERE Name IN('N1','N2') ORDER BY Date ASC 
```

# android - 如何检查 FBSSO 的哈希键是对还是错？

> ID：11501109
> 
> 赞同：1
> 
> 时间：2012-07-16T09:04:57.733
> 
> 标签：android

当我尝试通过命令提示符生成哈希键时，它给出了一个哈希键，当我以编程方式尝试获取差异哈希键时，我必须使用哪个？public void

```
FacebookHashKey(){PackageInfo info;
     try{ 
        info =getPackageManager().getPackageInfo("com.facebook.android",PackageManager.GET_SIGNATURES);
            for (Signature signature : info.signatures) {
        MessageDigest md;
        md = MessageDigest.getInstance("SHA"); md.update(signature.toByteArray());
        String androidhashkey = new String(Base64.encode(md.digest(), 0));// 
        String androidhashkey = new String(Base64.encodeBytes(md.digest()));//PRINT THE KEY IN THE LOGCAT 
        Log.e("GPS Citygames Activity FB HASH KEY:", androidhashkey);
        }
    }catch (NameNotFoundException e1) {    
      Log.e("GPS Citygames Activity name not found exception", e1.toString());
    }catch (NoSuchAlgorithmException e) 
    {
     Log.e("GPS Citygames Activity no such an algorithm exception", e.toString());

    }catch (Exception e){

    Log.e("exception", e.toString());

    }
    } 
```

# .htaccess - 如何使用 .htaccess 在我的 iframe 中允许页面访问但不能直接访问？

> ID：11501110
> 
> 赞同：3
> 
> 时间：2012-07-16T09:04:59.317
> 
> 标签：.htaccess, iframe, access-control

我有一个使用 iframe 制作的网站。我想在自己的 iframe 中显示一个页面，但我想拒绝直接访问。我怎样才能在我的 中以这种方式保护它`.htaccess`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:54:48.247

您可以使用`Referer`HTTP 标头检查请求是否来自您网站上的链接（或 img src / 或 iframe src）：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !example.com
RewriteCond %{REQUEST_URI} ^/path/to/protected/page$
RewriteRule . - [F] 
```

`example.com`您的域名在哪里，`/path/to/protected/page`是您要保护的路径

但是，请注意，这种方法可能会被愚弄，因为 HTTP 标头可以由远程用户构造（将 http 标头视为用户输入 - 不要信任它们；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T23:50:52.093

您必须使用 htmob.referral symchip 代码。这是唯一可行的方法。我希望这有帮助。

试试这个： // Click-jacking protection header("X-Frame-Options: htmob.referral:pathexec.remoteshield +(*");

# php - DOMdocument：使用 cloneNode 时如何更改 id 和 name 属性？

> ID：11501112
> 
> 赞同：0
> 
> 时间：2012-07-16T09:05:11.867
> 
> 标签：php, dom

我正在使用 DOMdocument 创建表单。要在字段集中添加更多输入框，我使用这个：

```
$fieldset->appendChild ( $textinput->cloneNode()); 
```

我想学习如何更改克隆输入框的id和名称。例如，第一个输入框是 id = "box", name="box-input"，那么在克隆中，我希望它是 id="box-2", name = "box-input-2"。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:08:22.570

首先克隆它，更改属性并附加它：

```
$clone = $textinput->cloneNode();
$clone->setAttribute('id', '...');
$clone->setAttribute('name', '...');
$fieldset->appendChild($clone); 
```

# wpf - 如何使用热键选择组合框项目？

> ID：11501113
> 
> 赞同：1
> 
> 时间：2012-07-16T09:05:21.120
> 
> 标签：wpf

在 WPF 中，我使用组合框来保存集合。我需要使用 Ctrl + 数字键选择每个项目。例如，如果组合框中有 5 个项目可用，那么当用户按下 Clt + 1、Clt + 2、Clt + 3、Clt + 4、Clt + 5 时，所有这 5 个任务都应该可以访问。请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:31:11.717

也许这会有所帮助：

```
 private void ComboBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyboardDevice.GetKeyStates(Key.LeftCtrl) != KeyStates.Down &&
             e.KeyboardDevice.GetKeyStates(Key.RightCtrl) != KeyStates.Down ||
            e.Key <= Key.D0 || e.Key > Key.D9) return;

        var combo = (ComboBox)sender;
        var idToSelect = e.Key - Key.D1;

        if (combo.Items.Count > idToSelect)
            combo.SelectedIndex = idToSelect;
    } 
```

我已经将它作为组合框上的处理程序进行了测试，因此发件人是组合框，它需要专注于组合才能工作，但可以根据您的需要进行修改。

# objective-c - “LSSharedFileList.h”在哪里？

> ID：11501115
> 
> 赞同：2
> 
> 时间：2012-07-16T09:05:31.477
> 
> 标签：objective-c, macos, cocoa, launch

我想使用登录项的 API，但我找不到 LaunchServices/LSSharedFileList.h，这会导致错误，例如“架构 x86_64 的未定义符号：“_kLSSharedFileListSessionLoginItems”。

谁能告诉我应该将哪个库添加到项目中？我在 Xcode4.2 中为 osx10.7 使用 Objective-c。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:11:39.693

您需要将`ApplicationServices`框架添加到您的项目中。它包含启动服务框架。

您将框架添加到项目设置的**Build Phases**选项卡的“Link binary with libraries”部分。

# r - R：列表 1 中有多少元素在列表 2 中/出现次数

> ID：11501127
> 
> 赞同：4
> 
> 时间：2012-07-16T09:06:14.200
> 
> 标签：r, list, compare

我想比较两个列表（数据框的两行）并计算两个列表之间有多少差异。

例如：

```
list1=a,b,c,a
list2=a,a,d,d 
```

列表 1 的两个元素在列表 2 中

我可以通过循环和求和来做到这一点，但效率很低。R中有什么功能可以做到这一点吗？

我检查了 setdiff 和 compare 包，但没有找到任何帮助。

谢谢你的想法，

文森特

我的功能如下：

```
 NRebalancing=function(NamePresent)
        {
          Nbexchange=NamePresent[,2]
          Nbexchange=NamePresent[1,2]=0

          for (i in 2:nrow(NamePresent))
          {
            print(i)
            compteur=0
            NameNeeded=NamePresent[i,]
            NameNeeded=unique(NameNeeded)
            NameNeeded=na.omit(NameNeeded)
            for(j in 2:length(NameNeeded))
              #j=1 correspond a une date
            {
              compteur = compteur+(abs(sum(NamePresent[i,]==as.character(NameNeeded[j]))-sum(NamePresent[i-1,]==as.character(NameNeeded[j]))))
            }
          Nbexchange[i]=compteur  
          }

          return(Nbexchange)
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T09:14:46.153

一个要点：您的列表不是 R 列表 - 这有点特别。您正在使用向量：

```
R> is.vector(l1)
[1] TRUE
R> is.list(l1)
[1] FALSE 
```

`list1`如果它们是向量，请不要调用变量。

* * *

因为你有一个向量，所以有很多可能性。

1.  运营`%in%`商

    ```
    R> l1 = c("a", "b", "c", "d")
    R> l2 = c("a", "a", "d", "d")
    R> l1[l1 %in% l2]
     [1] "a" "d" 
    ```

2.  或使用`is.element`

    ```
    R> l1[is.element(l1, l2)]
     [1] "a" "d" 
    ```

3.  还有`unique`：

    ```
    R> unique(l2)
     [1] "a" "d" 
    ```

    在您对@mrdwab 发表评论后，您可以使用`sapply`和的组合来计算出现次数`unique`

    ```
    sapply(unique(l1), function(i) sum(i==l2)) 
    ```

    `i==l2`检查成员资格，`sum`计算 TRUE 出现的次数，`sapply`基本上只是一个 for 循环`unique(l1)`

    ```
    R> sapply(unique(l1), function(i) sum(i==l2))
    a b c d 
    2 0 0 2 
    ```

4.  @mrdwab 的一个非常好的建议是使用`table`and `colSums`：

    ```
    R> table(l1, l2)
      l2 l1  
       a d
     a 1 0
     b 1 0
     c 0 1
     d 0 1
    R> colSums(table(l1, l2))
     a d 
     2 2 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:10:50.477

你有没有尝试过这样的事情？

```
list1 = c("a", "b", "c", "a")
list2 = c("a", "a", "d", "d")
list2 %in% list1
# [1]  TRUE  TRUE FALSE FALSE 
```

# 更新

由于您正在寻找频率，我也认为考虑`table`.

总的来说，我觉得这个*问题*有点令人困惑。您的问题表明您正在寻找一个列表 ( `list2`) 中出现在另一个列表 ( `list1`) 中的出现次数，但在接受的答案中（在我的`coSums(table...`示例中，您也在计算`d`，它*没有出现*在 中`list1`。因此，我我提供了最后一个示例`table`，`%in%`它与您的问题相匹配，但可能不是您想要的。这里是：

```
table(list2[which(list2 %in% list1)])

# a 
# 2 
```

# delphi - 德尔福 DirectX 32 位彩色

> ID：11501131
> 
> 赞同：1
> 
> 时间：2012-07-16T09:06:19.757
> 
> 标签：delphi, delphi-xe2

我是德尔福学习者。我已经从下载了一个delphi表单效果项目

```
http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/the-water-effect-explained-r915 
```

具有“DXDraw01”、“DXDIB01”、“DXDIB02”、“背景”和一些“BitBtn”。实际项目是*Bit Color 操作。我试图在 32Bit Color 中实现它。我已经实现了以下代码：

```
 private
    { Private declarations }
  public
    { Public declarations }
   procedure FrameFadeIn(DIB01, DIB02: TDIB; Step: Byte);
   procedure FrameFadeOut(DIB01, DIB02: TDIB; Step: Byte);
   procedure FrameFill(DIB: TDIB; Color: Byte);
   procedure WaterFrameUpdate;
   procedure WaterFrameInitialize;
   procedure WaterFramePrepare;
   procedure WaterFrameRender(DIB: TDIB);
   procedure WaterBubleDrop(X, Y, W, SplashStrength: Integer);
  end;
  PLongArray = ^TLongArray;
  TLongArray = Array[0..32767] of LongInt;
  TWaterFrame = Array[0..1,0..FrameWidth,0..FrameHeight] of Smallint;
var
  MainForm: TMainForm;
  CT, NW: Byte;
  Closing: Boolean;
  WaterFrame: TWaterFrame;
  TSin, TCos: Array[0..511] of Single;
  UltimateDisplacement: Array[0..511] of Byte;
implementation
{$R *.DFM}

procedure TMainForm.FrameFill(DIB: TDIB; Color: Byte);
var
  P: PByteArray;
  W, H: Integer;
begin
  P := DIB.ScanLine[DIB.Height-1];
  W := DIB.WidthBytes;
  H := DIB.Height;
  asm
    PUSH ESI
    MOV ESI, P
    MOV EDX, W
    MOV EAX, H
    IMUL EDX
    MOV ECX, EAX
    MOV AL, Color
    @@1:
    MOV [ESI], AL
    INC ESI
    DEC ECX
    JNZ @@1
    POP ESI
  end;
end;
procedure TMainForm.FrameFadeIn(DIB01, DIB02: TDIB; Step: Byte);
var
  W, H: Integer;
  P1, P2: PByteArray;
begin
  P1 := DIB01.ScanLine[DIB02.Height-1];
  P2 := DIB02.ScanLine[DIB02.Height-1];
  W := DIB01.WidthBytes;
  H := DIB01.Height;
  asm
    PUSH ESI
    PUSH EDI
    MOV ESI, P1
    MOV EDI, P2
    MOV EDX, W
    MOV EAX, H
    IMUL EDX
    MOV ECX, EAX
    @@1:
    MOV AL, Step
    MOV AH, [ESI]
    CMP AL, AH
    JB @@2
    MOV AL, AH
@@2:
    MOV [EDI], AL
    INC ESI
    INC EDI
    DEC ECX
    JNZ @@1
    POP EDI
    POP ESI
  end;
end;
procedure TMainForm.FrameFadeOut(DIB01, DIB02: TDIB; Step: Byte);
var
  W, H: Integer;
  P1, P2: PByteArray;
begin
  P1 := DIB01.ScanLine[DIB02.Height-1];
  P2 := DIB02.ScanLine[DIB02.Height-1];
  W := DIB01.WidthBytes;
  H := DIB01.Height;
  asm
    PUSH ESI
    PUSH EDI
    MOV ESI, P1
    MOV EDI, P2
    MOV EDX, W
    MOV EAX, H
    IMUL EDX
    MOV ECX, EAX
    @@1:
    MOV AL, Step
    MOV AH, [ESI]
    CMP AL, AH
    JA @@2
    MOV AL, AH
@@2:
    MOV [EDI], AL
    INC ESI
    INC EDI
    DEC ECX
    JNZ @@1
    POP EDI
    POP ESI
  end;
end;
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  Opacity: Integer;
  SystemTime01, SystemTime02: TSystemTime;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  GetLocalTime(SystemTime01);
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  Opacity := 0;
  while Opacity < 255 do
    begin
      FrameFill(DXDIB01.DIB, Byte(Opacity));
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Opacity := Opacity + 5;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  GetLocalTime(SystemTime02);
end;
procedure TMainForm.BitBtn02Click(Sender: TObject);
var
  Opacity: Integer;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;

  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  FrameFill(DXDIB01.DIB, 0);
  for Opacity := 0 to 255 do
    begin
      FrameFadeIn(BackGround.DIB, DXDIB01.DIB, Opacity);
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
end;
procedure TMainForm.BitBtn03Click(Sender: TObject);
var
  Opacity: Integer;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  FrameFill(DXDIB01.DIB, 255);
  for Opacity := 255 downto 0 do
    begin
      FrameFadeOut(BackGround.DIB, DXDIB01.DIB, Opacity);
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
end;
procedure TMainForm.BitBtn04Click(Sender: TObject);
const
  NumberOfRotation = 10;
var
  CosY,SinY: real;
  P1,P2: PByteArray;
  X1, Y1, X2, Y2, FrameHorizontalCenter, FrameVerticalCenter, RotationSpeed, RotationAngle: Integer;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  FrameHorizontalCenter := Background.DIB.Width div 2;
  FrameVerticalCenter := Background.DIB.Height div 2;
  for RotationSpeed := 0 to 64 do
    begin
      RotationAngle := 384 + (RotationSpeed*NumberOfRotation);
      for Y1 := 0 to BackGround.DIB.Height -1 do
        begin
          P1 := DXDIB01.DIB.ScanLine[Y1];
          CosY := (Y1 - FrameVerticalCenter) * TCos[RotationAngle and $1ff];
          SinY := (Y1 - FrameVerticalCenter) * TSin[RotationAngle and $1ff];
          for X1 := 0 to Background.DIB.Width-1 do
            begin
              X2 := Trunc((X1 - FrameHorizontalCenter) * TSin[RotationAngle and $1ff] + CosY) + FrameHorizontalCenter;
              Y2 := Trunc((X1 - FrameHorizontalCenter) * TCos[RotationAngle and $1ff] - SinY) + FrameVerticalCenter;
              {  Required Logic if Background.DIB.BitCount=32  }
              if (Y2 >= 0) and (Y2 < Background.DIB.Height) and (X2 >= 0) and (X2 < Background.DIB.Width) then
                begin
                  PLongArray(P2) := Background.DIB.ScanLine[Y2];
                  PLongArray(P1)[X1] := PLongArray(P2)[FrameWidth - x2];
                end
              else
                begin
                  if PLongArray(P1)[X1] > 4 then PLongArray(P1)[X1] := PLongArray(P1)[X1] - 4 else PLongArray(P1)[X1] := 0;
                end;
              {  Required Logic if Background.DIB.BitCount=32  }
            end
        end;
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  BitBtn11Click(Sender);
end;
procedure TMainForm.BitBtn05Click(Sender: TObject);
var
  P1,P2: PByteArray;
  ActualDistance, Distance, CosY, SinY: real;
  X1, Y1, X2, Y2, HorizontalCenter, VerticalCenter, A, B, Angle, DistortionFactor: Integer;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  HorizontalCenter := Background.DIB.Width div 2;
  VerticalCenter := Background.DIB.Height div 2;
  Distance := sqrt(sqr(HorizontalCenter) + sqr(VerticalCenter));
  for A := 0 to 16 do
    begin
      B := A*8;
      for Y1 := 0 to DXDIB01.DIB.Height - 1 do
        begin
        P1 := DXDIB01.DIB.ScanLine[Y1];
        DistortionFactor := sqr(Y1-VerticalCenter);
        for X1 := 0 to (DXDIB01.DIB.Width) - 1 do
          begin
            ActualDistance := (sqrt((sqr(X1 - HorizontalCenter) + DistortionFactor))/Distance);
            ActualDistance := TSin[ (Trunc(ActualDistance*1024)) and $1ff ];
            Angle := 384 + Trunc( (ActualDistance)* B );
            CosY := (Y1 - VerticalCenter) * TCos[Angle and $1ff];
            SinY := (Y1 - VerticalCenter) * TSin[Angle and $1ff];
            X2 := Trunc((X1 - HorizontalCenter) * TSin[Angle and $1ff] + CosY) + HorizontalCenter;
            Y2 := Trunc((X1 - HorizontalCenter) * TCos[Angle and $1ff] - SinY) + VerticalCenter;
            {  Required Logic if Background.DIB.BitCount=32  }
            if (Y2 >= 0) and (Y2 < Background.DIB.Height) and (X2 >= 0) and (X2 < Background.DIB.Width) then
              begin
                PLongArray(P2) := Background.DIB.ScanLine[Y2];
                PLongArray(P1)[X1] := PLongArray(P2)[FrameWidth - X2];
              end
            else
              begin
                if P1[X1] > 2 then PLongArray(P1)[X1] := PLongArray(P1)[X1] - 2 else PLongArray(P1)[X1] := 0;
              end;
            {  Required Logic if Background.DIB.BitCount=32  }
          end;
        end;
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  for A := 16 downto 0 do
    begin
      B := A*8;
      for Y1 := 0 to DXDIB01.DIB.Height - 1 do
        begin
          P1 := DXDIB01.DIB.ScanLine[Y1];
          DistortionFactor := sqr(Y1 - VerticalCenter);
          for X1 := 0 to (DXDIB01.DIB.Width) - 1 do
            begin
              ActualDistance := (sqrt((sqr(X1 - HorizontalCenter) + DistortionFactor))/Distance);
              ActualDistance := TSin[ (Trunc(ActualDistance*1024)) and $1ff ];
              Angle := 384 + Trunc( (ActualDistance)* B );
              CosY := (Y1 - VerticalCenter) * TCos[Angle and $1ff];
              SinY := (Y1 - VerticalCenter) * TSin[Angle and $1ff];
              X2 := Trunc((X1 - HorizontalCenter) * TSin[Angle and $1ff] + CosY) + HorizontalCenter;
              Y2 := Trunc((X1 - HorizontalCenter) * TCos[Angle and $1ff] - SinY) + VerticalCenter;
              {  Required Logic if Background.DIB.BitCount=32  }
              if (Y2 >= 0) and (Y2 < Background.DIB.Height) and (X2 >= 0) and (X2 < Background.DIB.Width) then
                begin
                  PLongArray(P2) := Background.DIB.ScanLine[Y2];
                  PLongArray(P1)[X1] := PLongArray(P2)[FrameWidth - X2];
                end
              else
                begin
                  if P1[X1] > 2 then PLongArray(P1)[X1] := PLongArray(P1)[X1] - 2 else PLongArray(P1)[X1] := 0;
                end;
              {  Required Logic if Background.DIB.BitCount=32  }
            end;
        end;
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  BitBtn11Click(Sender);
end;
procedure TMainForm.BitBtn06Click(Sender: TObject);
var
  P1, P2: PByteArray;
  ActualDistance, Distance,CosY, SinY: real;
  X1, Y1, X2, Y2, HorizontalCenter, VerticalCenter, A, B, Angle, DistortionFactor: Integer;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  HorizontalCenter := Background.DIB.Width div 2;
  VerticalCenter := Background.DIB.Height div 2;
  Distance := sqrt(sqr(HorizontalCenter) + sqr(VerticalCenter)) * 0.75;
  for A := 0 to 63 do
    begin
      B := A*8;
      for Y1 := 0 to DXDIB01.DIB.Height - 1 do
        begin
          P1 := DXDIB01.DIB.ScanLine[Y1];
          DistortionFactor := sqr(Y1 - VerticalCenter);
          for X1 := 0 to (DXDIB01.DIB.Width) - 1 do
            begin
              ActualDistance := 1 - (sqrt((sqr(X1 - HorizontalCenter) + DistortionFactor))/Distance);
              Angle := 384 + Trunc( (ActualDistance)* B );
              CosY := (Y1 - VerticalCenter) * TCos[Angle and $1ff];
              SinY := (Y1 - VerticalCenter) * TSin[Angle and $1ff];
              X2 := Trunc((X1 - HorizontalCenter) * TSin[Angle and $1ff] + CosY) + HorizontalCenter;
              Y2 := Trunc((X1 - HorizontalCenter) * TCos[Angle and $1ff] - SinY) + VerticalCenter;
              {  Required Logic if Background.DIB.BitCount=32  }
              if (Y2 >= 0) and (Y2 < Background.DIB.Height) and (X2 >= 0) and (X2 < Background.DIB.Width) then
                begin
                  PLongArray(P2) := Background.DIB.ScanLine[Y2];
                  PLongArray(P1)[X1] := PLongArray(P2)[FrameWidth - X2];
                end
              else
                begin
                  if P1[X1] > 2 then PLongArray(P1)[X1] := PLongArray(P1)[X1] - 2 else PLongArray(P1)[X1] := 0;
                end;
              {  Required Logic if Background.DIB.BitCount=32  }
              end;
          end;
        if DXDraw01.CanDraw then
          begin
            DXDraw01.Surface.Assign(DXDIB01.DIB);
            DXDraw01.Flip;
          end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  for A := 64 downto 0 do
    begin
      B := A*8;
      for Y1 := 0 to DXDIB01.DIB.Height - 1 do
        begin
          P1 := DXDIB01.DIB.ScanLine[Y1];
          DistortionFactor := sqr(Y1 - VerticalCenter);
          for X1 := 0 to (DXDIB01.DIB.Width)-1 do
            begin
              ActualDistance := 1-(sqrt((sqr(X1 - HorizontalCenter) + DistortionFactor))/Distance);
              Angle := 384 + Trunc( (ActualDistance)* B );
              CosY := (Y1 - VerticalCenter) * TCos[Angle and $1ff];
              SinY := (Y1 - VerticalCenter) * TSin[Angle and $1ff];
              X2 := Trunc((X1 - HorizontalCenter) * TSin[Angle and $1ff] + CosY) + HorizontalCenter;
              Y2 := Trunc((X1 - HorizontalCenter) * TCos[Angle and $1ff] - SinY) + VerticalCenter;
              {  Required Logic if Background.DIB.BitCount=32  }
              if (Y2 >= 0) and (Y2 < Background.DIB.Height) and (X2 >= 0) and (X2 < Background.DIB.Width) then
                begin
                  PLongArray(P2) := Background.DIB.ScanLine[Y2];
                  PLongArray(P1)[X1] := PLongArray(P2)[FrameWidth - X2];
                end
              else
                begin
                  if P1[X1] > 2 then PLongArray(P1)[X1] := PLongArray(P1)[X1] - 2 else PLongArray(P1)[X1] := 0;
                end;
              {  Required Logic if Background.DIB.BitCount=32  }
            end;
        end;
      if DXDraw01.CanDraw then
        begin
          DXDraw01.Surface.Assign(DXDIB01.DIB);
          DXDraw01.Flip;
        end;
      Application.ProcessMessages;
      if Closing then Exit;
    end;
  BitBtn11Click(Sender);
end;
procedure TMainForm.BitBtn07Click(Sender: TObject);
const
 AmountOfSpray = 500;
var
  X, Y, C: Integer;
  AllBlack: Boolean;
  P1, P2, P3: PByteArray;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width,Background.DIB.Height,Background.DIB.BitCount);
  for C:=0 to AmountOfSpray do begin
    DXDIB01.DIB.Pixels[ random(Background.DIB.Width-1), random(Background.DIB.Height-1)] :=0;
  end;
  repeat
    AllBlack := True;
    for Y:=0 to DXDIB01.DIB.Height -1 do
      begin
        P2 := DXDIB01.DIB.ScanLine[Y];
        for X:=0 to DXDIB01.DIB.Width-1 do
          begin
          {  Required Logic if Background.DIB.BitCount=32  }
            if PLongArray(P2)[X] < 16 then
              begin
                if PLongArray(P2)[X] > 0 then AllBlack := false;
                if Y > 0 then
                  begin
                    PLongArray(P1) := DXDIB01.DIB.ScanLine[Y - 1];
                    if PLongArray(P1)[X] > 4 then PLongArray(P1)[X] := PLongArray(P1)[X] - 4 else PLongArray(P1)[X] := 0;
                    if X > 0 then if PLongArray(P1)[X - 1] > 2 then PLongArray(P1)[X - 1] := PLongArray(P1)[X - 1] - 2 else PLongArray(P1)[X - 1] := 0;
                    if X < (DXDIB01.DIB.Width - 1) then if PLongArray(P1)[X + 1] > 2 then PLongArray(P1)[X + 1] := PLongArray(P1)[X + 1] - 2 else PLongArray(P1)[X + 1] := 0;
                  end;
                if Y < (DXDIB01.DIB.Height - 1) then
                  begin
                    PLongArray(P3) := DXDIB01.DIB.ScanLine[Y + 1];
                    if PLongArray(P3)[X] > 4 then PLongArray(P3)[X] := PLongArray(P3)[X] - 4 else PLongArray(P3)[X] := 0;
                    if X > 0 then if PLongArray(P3)[X - 1] > 2 then PLongArray(P3)[X - 1] := PLongArray(P3)[X - 1] - 2 else PLongArray(P3)[X - 1] := 0;
                    if X < (DXDIB01.DIB.Width - 1) then if PLongArray(P3)[X + 1] > 2 then PLongArray(P3)[X + 1] := PLongArray(P3)[X + 1] - 2 else PLongArray(P3)[X + 1] := 0;
                  end;
                if PLongArray(P2)[X] > 8 then PLongArray(P2)[X] := PLongArray(P2)[X] - 8 else PLongArray(P2)[X] := 0;
                if X > 0 then if PLongArray(P2)[X - 1] > 4 then PLongArray(P2)[X - 1] := PLongArray(P2)[X - 1] - 4 else PLongArray(P2)[X - 1] := 0;
                if X < (DXDIB01.DIB.Width - 1) then if PLongArray(P2)[X + 1] > 4 then PLongArray(P2)[X + 1] := PLongArray(P2)[X + 1] - 4 else PLongArray(P2)[X + 1] := 0;
              end;
          {  Required Logic if Background.DIB.BitCount=32  }
          end;
      end;
    if DXDraw01.CanDraw then
      begin
        DXDraw01.Surface.Assign(DXDIB01.DIB);
        DXDraw01.Flip;
      end;
    Application.ProcessMessages;
  until (AllBlack or Closing);
end;
procedure TMainForm.BitBtn08Click(Sender: TObject);
var
  Tmp: Byte;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  CT := 0;
  NW := 1;
  repeat
    WaterFrameUpdate;
    WaterFrameRender(DXDIB01.DIB);
    Tmp := CT;
    CT := NW;
    NW := Tmp;
    if DXDraw01.CanDraw then begin
      DXDraw01.Surface.Assign(DXDIB01.DIB);
      DXDraw01.Flip;
    end;
    Application.ProcessMessages;
  until (Closing);
end;
procedure TMainForm.BitBtn09Click(Sender: TObject);
var
  Tmp: Byte;
  x,y: Smallint;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  CT := 0;
  NW := 1;
  repeat
    x := 40 + random(FrameWidth - 40);
    y := 40 + random(FrameHeight - 40);
    WaterBubleDrop(X, Y, 10, 25);
    WaterFrameUpdate;
    WaterFrameRender(DXDIB01.DIB);
    Tmp := CT;
    CT := NW;
    NW := Tmp;
    if DXDraw01.CanDraw then begin
      DXDraw01.Surface.Assign(DXDIB01.DIB);
      DXDraw01.Flip;
    end;
    Application.ProcessMessages;
  until (Closing);
end;
procedure TMainForm.BitBtn10Click(Sender: TObject);
var
  Tmp: Byte;
  CosY, SinY: real;
  X1, Y1, X2, Y2, HorizontalIncrement, VerticalIncrement, HorizontalCenter, VerticalCenter, Angle: Smallint;
const
  HorizontalStartingPoint = 80;
  VerticalStartingPoint = 80;
begin
  Closing := True;
  Application.ProcessMessages;
  Closing := False;
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  HorizontalCenter := Background.DIB.Width div 2;
  VerticalCenter := Background.DIB.Height div 2;
  CT := 0;
  NW := 1;
  Angle := 0;
  X2 := 4; HorizontalIncrement := 4;
  Y2 := 4; VerticalIncrement := 3;
  WaterBubleDrop(HorizontalCenter,VerticalCenter,40,-100);
  repeat
    CosY := (VerticalStartingPoint - VerticalCenter) * TCos[Angle and $1ff];
    SinY := (VerticalStartingPoint - VerticalCenter) * TSin[Angle and $1ff];
    X1 := Trunc((HorizontalStartingPoint - HorizontalCenter) * TSin[Angle and $1ff] + CosY) + HorizontalCenter;
    Y1 := Trunc((HorizontalStartingPoint - HorizontalCenter) * TCos[Angle and $1ff] - SinY) + VerticalCenter;
    Angle := Angle + 8;
    WaterBubleDrop(X1, Y1, 4, -500);
    WaterBubleDrop(X2, Y2, 4, -500);
    X2 := X2 + HorizontalIncrement;
    Y2 := Y2 + VerticalIncrement;
    if (X2 < 4) or (X2 > FrameWidth - 4) then HorizontalIncrement := -HorizontalIncrement;
    if (Y2 < 4) or (Y2 > FrameHeight - 4) then VerticalIncrement := -VerticalIncrement;
    WaterFrameUpdate;
    WaterFrameRender(DXDIB01.DIB);
    Tmp := CT;
    CT := NW;
    NW := Tmp;
    if DXDraw01.CanDraw then begin
      DXDraw01.Surface.Assign(DXDIB01.DIB);
      DXDraw01.Flip;
    end;
    Application.ProcessMessages;
  until (Closing);
end;
procedure TMainForm.BitBtn11Click(Sender: TObject);
 begin
  DXDIB01.DIB.SetSize(Background.DIB.Width, Background.DIB.Height, Background.DIB.BitCount);
  DXDIB01.DIB.Assign(Background.DIB);
  if DXDraw01.CanDraw then begin
    DXDraw01.Surface.Assign(DXDIB01.DIB);
    DXDraw01.Flip;
  end;
end;
procedure TMainForm.BitBtn12Click(Sender: TObject);
begin
  MainForm.Close;
end;
procedure TMainForm.WaterFrameUpdate;
const
  DampingCoefficient = 4;
var
  X, Y, N: Smallint;
begin
  for Y := 2 to FrameHeight-2 do begin
    for X := 2 to FrameWidth-2 do begin
      N := ( WaterFrame[CT, X-1, Y] + WaterFrame[CT, X-2, Y] + WaterFrame[CT, X+1, Y] + WaterFrame[CT, X+2, Y] +
           WaterFrame[CT, X, Y-1] + WaterFrame[CT, X, Y-2] + WaterFrame[CT, X, Y+1] + WaterFrame[CT, X, Y+2] +
           WaterFrame[CT, X-1, Y-1] + WaterFrame[CT, X+1, Y-1] + WaterFrame[CT, X-1, Y+1] + WaterFrame[CT, X+1, Y+1] )
           div 6 - WaterFrame[NW, X, Y];
      asm
        PUSH BX
        MOV BX, N
        SAR BX, DampingCoefficient
        SUB N, BX
        POP BX
      end;
      WaterFrame[NW, X, Y] := N;
    end;
  end;
end;
procedure TMainForm.WaterFrameInitialize;
var
  X, Y: SmallInt;
begin
  for Y := 0 to FrameHeight do begin
    for X := 0 to FrameWidth do begin
      WaterFrame[CT, X, Y] := 0;
      WaterFrame[NW, X, Y] := 0;
    end;
  end;
end;
procedure TMainForm.WaterFramePrepare;
const
  RefractiveIndex = 4.0;
var
  C, D: SmallInt;
begin
  for C := -256 to 255 do begin
    D := C div 4;
    UltimateDisplacement[C + 256] := Byte(Trunc(Tan(ArcSin((Sin(ArcTan(D)) / RefractiveIndex))) * D));
  end;
  for C := 0 to 511 do begin
    TSin[C] := Sin( ((C * 360) / 511) * Pi / 180 );
    TCos[C] := Cos( ((C * 360) / 511) * Pi / 180 );
  end;
  WaterFrameInitialize;
end;
procedure TMainForm.WaterFrameRender(DIB: TDIB);
var
  X, Y, NewColor, HorizontalDifference, VerticalDifference, HorizontalDisplacement, VerticalDisplacement: Smallint;
begin
  for Y := 0 to FrameHeight do begin
    for X := 0 to FrameWidth do begin
      HorizontalDifference := WaterFrame[NW, X+1, Y] - WaterFrame[NW, X, Y];
      VerticalDifference := WaterFrame[NW, X, Y+1] - WaterFrame[NW, X, Y];
      HorizontalDisplacement := UltimateDisplacement[HorizontalDifference + 256];
      VerticalDisplacement := UltimateDisplacement[VerticalDifference + 256];
      if HorizontalDifference < 0 then begin
        if (VerticalDifference<0) then
          NewColor := Background.DIB.Pixels[X-HorizontalDisplacement,Y-VerticalDisplacement]
        else
          NewColor := Background.DIB.Pixels[X-HorizontalDisplacement,Y+VerticalDisplacement]
      end else begin
        if (VerticalDifference<0) then
          NewColor := Background.DIB.Pixels[X+HorizontalDisplacement,Y-VerticalDisplacement]
        else
          NewColor := Background.DIB.Pixels[X+HorizontalDisplacement,Y+VerticalDisplacement]
      end;
      DIB.Pixels[X, Y] := NewColor;
    end;
  end;
end;
procedure TMainForm.WaterBubleDrop(X,Y,W,SplashStrength: Integer);
var
  U, V: Integer;
  HorizontalDistanceSquare, VerticalDistanceSquare, BubbleWidthSquare: Integer;
begin
  BubbleWidthSquare := sqr(W);
  if (X > W) and (X < FrameWidth - W) and (Y > W) and (Y < FrameHeight - W) then begin
    for V := Y - W to Y + W do begin
      VerticalDistanceSquare := sqr(V - Y);
      for U := X - W to X + W do begin
        HorizontalDistanceSquare := sqr(U - X);
        if (HorizontalDistanceSquare + VerticalDistanceSquare) <= BubbleWidthSquare then begin
          WaterFrame[CT, U, V] := SplashStrength*Trunc(W - sqrt(HorizontalDistanceSquare + VerticalDistanceSquare));
        end;
      end;
    end;
  end;
end;
procedure TMainForm.FormCreate(Sender: TObject);
begin
  WaterFramePrepare;
end;
procedure TMainForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  DXTimer01.Enabled := true;
  Closing := True;
end;
procedure TMainForm.DXDraw01Finalize(Sender: TObject);
begin
  DXTimer01.Enabled := false;
end;
procedure TMainForm.DXDraw01Initialize(Sender: TObject);
begin
  DXTimer01.Enabled := true;
end;
procedure TMainForm.DXDraw01MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  WaterBubleDrop(X, Y, 15, -4);
end;
procedure TMainForm.DXDraw01MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
begin
  if (X > 0) and (X < FrameWidth) and (Y > 0) and (Y < FrameHeight) then begin
    WaterBubleDrop(X, Y, 8, -64);
  end;
end;
procedure TMainForm.DXTimer01Timer(Sender: TObject; LagCount: Integer);
begin
  if not DXDraw01.CanDraw then exit;
  DXDraw01.Surface.Fill(0);
  DXDIB01.DIB.SetSize(Background.DIB.Width,Background.DIB.Height,Background.DIB.BitCount);
  DXDIB01.DIB.Assign(Background.DIB);
  if DXDraw01.CanDraw then
  begin
    DXDraw01.Surface.Assign(DXDIB01.DIB);
    with DXDraw01.Surface.Canvas do
      begin
        Brush.Style := bsClear;
        Font.Color := $efefef;
        Font.Size := 30;
        Textout((Background.DIB.Width - TextWidth('M/DD/YY HH:MM:SS AM')) div 2, (Background.DIB.Height - 30) div 2, DateTimeToStr(Now));
        Release;
      end;
  end;
  DXDraw01.Flip;
end;
end. 
```

我的问题是除了水和雨效果之外的所有效果都正常工作。在我的项目中，Background.DIB 是一个 32 位图像。请帮帮我。据我所知，问题出在以下过程定义中：

```
procedure WaterFrameUpdate;
procedure WaterFrameInitialize;
procedure WaterFramePrepare;
procedure WaterFrameRender(DIB: TDIB);
procedure WaterBubleDrop(X, Y, W, SplashStrength: Integer); 
```

我认为一个或多个程序定义具有 8Bit Color 操作。我不明白哪一个是 8Bit Color 操作。我也尝试过实现 LongArray 但它也给出了错误。然后我试过了

```
 asm
    PUSH BX
    MOV BX, N
    SAR BX, DampingCoefficient
    SUB N, BX
    POP BX
  end; 
```

作为

```
 asm
    PUSH ESI
    MOV ESI, N
    SAR ESI, DampingCoefficient
    SUB N, ESI
    POP ESI
  end; 
```

或者

```
 asm
    PUSH EDI
    MOV EDI, N
    SAR EDI, DampingCoefficient
    SUB N, EDI
    POP EDI
  end; 
```

但它给出了一个错误，告诉“操作数大小不匹配”。Plaese，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:05:32.047

至于操作数大小错误，为了将 N 的 16 位值加载到 32 位寄存器（在您的情况下为 ESI 或 EDI），您不能使用 MOV。您需要使用符号扩展操作 MOVSX（符号扩展）或 MOVZX（零扩展）之一：

```
 asm
    PUSH ESI
    //MOV ESI, N - not valid - you probably want:
    MOVZX ESI, N // load N into ESI with zero extend - or else:
    MOVSX ESI, N // load N into ESI with sign extend
    SAR ESI, DampingCoefficient
    SUB N, ESI
    POP ESI
  end; 
```

# c# - 自定义 Lucene.net 搜索结果

> ID：11501134
> 
> 赞同：0
> 
> 时间：2012-07-16T09:06:25.597
> 
> 标签：c#, lucene.net

我第一次使用 lucene.net。它工作正常。我用 jcb geo 关键字搜索数据，结果出来了。我的第一个结果与 JCB 关键字有关，接下来的几个数据与 GEO 关键字有关。我只是不明白为什么 JCB 名列前茅。另一方面，最大结果与 GEO 有关。我认为 GEO 相关数据应该排在首位，然后 JCB 应该排在首位。

在这里，我给出了我用来搜索的代码。

```
 string multiWordPhrase = "";
        multiWordPhrase = txtSearch.Text.Trim().Replace("*", "").Replace("?", "").Replace("~", "");
        IndexSearcher searcher = null;
        List<SearchResult> list = new List<SearchResult>();
        SearchResult oSr = null;

        if (!string.IsNullOrEmpty(multiWordPhrase))
        {
            string[] fieldList = { "Title", "Description", "Url" };
            List<BooleanClause.Occur> occurs = new List<BooleanClause.Occur>();
            foreach (string field in fieldList)
            {
                occurs.Add(BooleanClause.Occur.SHOULD);
            }

            searcher = new IndexSearcher(_directory, false);
            Query qry = MultiFieldQueryParser.Parse(Version.LUCENE_29, multiWordPhrase, fieldList, occurs.ToArray(), new StandardAnalyzer(Version.LUCENE_29));
            TopDocs topDocs = searcher.Search(qry, null, ((PageIndex + 1) * PageSize), Sort.RELEVANCE);
            ScoreDoc[] scoreDocs = topDocs.ScoreDocs;
            int resultsCount = topDocs.TotalHits;

            if (topDocs != null)
            {
                for (int i = (PageIndex * PageSize); i <= ((PageIndex + 1) * PageSize) && i < topDocs.ScoreDocs.Length; i++)
                {
                    Document doc = searcher.Doc(topDocs.ScoreDocs[i].doc);
                    oSr = new SearchResult();
                    oSr.ID = doc.Get("ID");
                    oSr.Title = doc.Get("Title");
                    oSr.Description = doc.Get("Description");
                    //oSr.WordCount = AllExtension.WordCount(oSr.Description, WordExist(oSr.Title, multiWordPhrase));
                    string preview =
                    oSr.Description = AllExtension.HighlightKeywords(oSr.Description, multiWordPhrase);  //sr.Description;
                    oSr.Url = doc.Get("Url");
                    list.Add(oSr);
                }
            }
            lblMatchFound.Text = "Match Found " + resultsCount.ToString();

            Pagination pagination = new Pagination();
            pagination.BaseUrl = "/Search.aspx";
            pagination.TotalRows = resultsCount;
            pagination.CurPage = (PageIndex+1);
            pagination.PerPage = PageSize;
            pagination.PrevLink = "Prev";
            pagination.NextLink = "Next";
            pagination.SearchTerm = multiWordPhrase;
            lblPager.Text = pagination.GetPageLinks(); ;

            rptResult.DataSource = list;
            rptResult.DataBind();
            searcher.Close(); 
```

![在此处输入图像描述](../Images/085e6dca04ef96b1f15f381ade5efca5.png)

如果可能的话，请讨论为什么 JCB 相关数据排在首位，并告诉我如何自定义搜索结果，结果这些记录应该排在最前面，其中包含最大搜索词词.....就像 GEO。所以请建议如何自定义我的搜索结果，如果可能的话，请提供一些示例代码，因为我是 lucene.net 的新手，因此我可以更好地可视化。多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:51:37.607

您需要了解 LB 关联的评分公式才能更好地了解分数，如果要修改它，您需要实现自己的相似度。

在您的情况下，**可能**发生的情况是 JCB 术语远不如 GEO 术语受欢迎。也可能是包含 JCB 术语的文档更短。

此外，您还可以使用 IndexSearcher 的 Explain 方法来查看文档的评分方式：http: [//lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/IndexSearcher .html#explain(org.apache.lucene.search.Weight, int)](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/IndexSearcher.html#explain%28org.apache.lucene.search.Weight,%20int%29)

您也可以为此使用 Luke：[http ://code.google.com/p/luke/downloads/list](http://code.google.com/p/luke/downloads/list)

使用 Luke，您可以进行搜索，选择一个结果并单击“解释”按钮以显示对命中的解释。

# xaml - 在 Windows 8 中初始化托管 Metro 组件时出现 COM 异常

> ID：11501139
> 
> 赞同：1
> 
> 时间：2012-07-16T09:06:43.457
> 
> 标签：xaml, microsoft-metro

我正在开发一个复杂的 Metro C# / XAML 库，我发现 InitializeComponent 中偶尔会出现故障，我发现无法调试：

System.Exception：来自 HRESULT 的异常：Windows.UI.Xaml.FrameworkElement.MeasureOverride 处的 0x880008AF（大小可用大小）

问题是这被捕获在 App 类中的未处理异常 catch all 中，并且除了上面引用的文本之外，没有堆栈跟踪和进一步的异常信息。

我已经关闭了托管的未处理异常 catch-all 并将 windbg 设置为崩溃进程的默认调试器，然后我可以看到非托管调用堆栈以及失败的确切位置，但我没有任何使用 windbg 的经验和所以我无法深入了解失败发生的确切原因。

我还在 Visual Studio 2012 中设置了“中断所有异常”，但在托管代码中没有看到任何第一次机会异常。

有没有人在 Win 8 中使用托管 Metro 应用程序时遇到过这样的问题，并且能够超越一般错误消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:59:01.557

它可能来自控件上的错误绑定。尝试删除它的所有绑定。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T21:13:55.967

确保您的自定义控件的默认样式键设置为自定义控件的类型。从另一个自定义控件复制和粘贴构造函数时，我犯了这个错误。

# objective-c - 如何使用单个 NSArray 在 UITbleViewCell 中创建部分？

> ID：11501140
> 
> 赞同：2
> 
> 时间：2012-07-16T09:06:47.077
> 
> 标签：objective-c, ios, uitableview

`UITableViewCell`与单曲中的流行部分一样`NSArray`吗？我有一个事件数组，将数据加载到`cellForRowAtIndexPath`中，我应该按年事件创建部分。
例如：

**2012 年部分**
日期：01/01/2012
事件：现场音乐

日期：01/02/2012
事件：现场音乐

**部分 2011**
日期：01/01/2011
事件：现场音乐

日期：01/02/2011
事件：现场音乐

单元格已经填充，我只怀念划分为部分的部分，创建两个部分（最多两年）。

对不起，我还是有点迷茫，我解决不了，请帮帮我，什么时候考？我会发布我的代码，非常感谢

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
              //acquisisco la data dell'evento
        NSString *dataEv = [[events objectAtIndex:indexPath.row + indexPath.section]DataEvento];

//retrive year ,example 2011, 2012 when test?
NSString *Year = [Utility getPartOfDate:dataEv type:UTLGetYear];
    //set image
    ...
    [cell.contentView addSubview:myImg];

    //set day
    day.text = [Utility getPartOfDate:dataEv type:UTLGetNumberOfDay];;
    [cell.contentView addSubview:day];

    //set dayOfWeek
    ...
    dayOfWeek.text = [Utility getPartOfDate:dataEv type:UTLGetDayOfWeek];;
    [cell.contentView addSubview:dayOfWeek];

    //set month
    month.text = [Utility getPartOfDate:dataEv type:UTLGetTextMonth];;
    [cell.contentView addSubview:month];

    //set title
    ...
    lblTitleEvent.text = [[eventi objectAtIndex:indexPath.row + indexPath.section]Artist];
    [cell.contentView addSubview:lblTitoloEvento];

    //set description event
    lblDescEvento.text = [[eventi objectAtIndex:indexPath.row + indexPath.section]Description];
    [cell.contentView addSubview:lblDescriptionEvent];

      }else{

    lblTitleEvent = (UILabel*)[cell.contentView viewWithTag:5];
    lblTitleEvent.text = [[events objectAtIndex:indexPath.row + indexPath.section]Artista];

    lblDescEvent = (UILabel*)[cell.contentView viewWithTag:6];
    lblDescEvent.text = [[events objectAtIndex:indexPath.row + indexPath.section]Description];
}

return cell; 
```

}

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
}

    // Customize the number of rows in the table view.
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
       return [events count];        
    }

    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {        
            if(section == 0){
                return @"Section 1";
            }
            if(section == 1){
                return @"Section 2";
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:23:33.387

试试这个

在 cell.textlabel.text 中：

```
cell.textlabel.text = [NSString stringWithFormat:@"%@/n%@/n%@",[array1 ObjectAtIndex:row],......]; 
```

您还必须将其设置`HightForRow`为更广阔的空间

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:26:13.607

好吧，您将必须找出阵列中一个部分结束而另一部分开始的位置。如果有两个部分，则实现

```
numberOfSectionsInTableView: 
```

并返回 2 或您可能拥有的部分。

然后相应地改变你的`cellForRowAtIndexPath`。您必须按部分进行区分。第二部分的第一行（第 0 行，第 1 部分）必须对应于数组中超出前一部分最后一个对象的第一个对象。（或者）

你将不得不`numberOfRowsInSection:`相应地改变。在您的示例中，它将被调用两次。一次用于第 0 节，一次用于第 1 节。您返回该节中的行数。

对于标题，您可以实现`titleForHeaderInSection:`为每个部分重新调整倾斜。

您可以在 UITableViewDataSource 协议参考中找到文档，[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)

如果您想克服节标题的不良布局能力，那么您可以实现表格视图控制器`viewForHeaderInSection:`，它会重新调整视图以显示为每个节的标题。它记录在 UITableViewDelegate 协议参考中，[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:viewForFooterInSection](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:viewForFooterInSection)：

# javascript - 无法访问该函数之外的 ajax 请求的响应

> ID：11501141
> 
> 赞同：0
> 
> 时间：2012-07-16T09:06:51.463
> 
> 标签：javascript, ajax, function, recursion

我正在尝试创建一个包含 ajax 请求的递归函数。我正在尝试从外部递归函数访问在 ajax 请求中处理的数组，bt 它返回初始值。

我的代码看起来像

```
 function retreiveData(testArgument)
        {
        $.ajax({
        url:"testManipulate.php",
        type: 'POST',
        data: 'dataString',
        datatype: 'json',
        data: {field : queryData, start : testArgument},
        success:function(jsonQuery)
        {

        $.ajax({
            url: base_uri + path,
            type:'POST',
                    data : jsonQuery,
            success : function(terms){
            var responseJson=JSON.parse(terms); // response JSON generated on download button click
            for ( var g = 0; g < responseJson.hits.hits.length; g++) {
            test[g] = (_generate_list(c, _field_select)); //function
            if(test[g].length!==0){ //Leaving out blank entries
            newTest[k]=test[g].join("; ") + "\n"; //separating each individual values with semi colon
                k++;
        }
        }
        if(testArgument < (4-1)*10)
            {
                   retreiveData(testArgument+10);
            }
            i++
            }
        });
    };
    retreiveData(0);
    alert(newTest.length); 
```

警告 newTest.length 只会警告 0，它不会给出最终值，即数组长度。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:10:56.740

这是因为您的 ajax 函数是异步的，您应该尝试使用回调函数：

```
function retreiveData(testArgument, callBack)
    {
    $.ajax({
    url:"testManipulate.php",
    type: 'POST',
    data: 'dataString',
    datatype: 'json',
    data: {field : queryData, start : testArgument},
    success:function(jsonQuery)
    {

    $.ajax({
        url: base_uri + path,
        type:'POST',
                data : jsonQuery,
        success : function(terms){
        var responseJson=JSON.parse(terms); // response JSON generated on download button click
        for ( var g = 0; g < responseJson.hits.hits.length; g++) {
        test[g] = (_generate_list(c, _field_select)); //function
        if(test[g].length!==0){ //Leaving out blank entries
        newTest[k]=test[g].join("; ") + "\n"; //separating each individual values with semi colon
            k++;
        }
        callBack(newTest);
    }
    if(testArgument < (4-1)*10)
        {
               retreiveData(testArgument+10);
        }
        i++
        }
    });
};
retreiveData(0, function(newTest){
    alert(newTest.length);
}); 
```

# asp.net - 在asp中显示.tif图像：ASPNET的图像控件

> ID：11501145
> 
> 赞同：0
> 
> 时间：2012-07-16T09:06:57.623
> 
> 标签：asp.net, .net, tiff, image-formats

我收到了一堆“.tif”图像文件，这些文件应该显示在我的 .aspx 页面上。虽然我可以在设计时看到这些图像。asp:Image 无法在浏览器上呈现图像（.tif）。

如果我使用 .jpg 文件而不是 tiff 图像，它会完美呈现。

任何想法为什么这是一个限制？

我尝试过的事情

在我的项目中有一个处理程序文件**SampleHandler.ashx来处理请求**

```
 public void ProcessRequest(HttpContext context)
        {
            string path = context.Server.MapPath("~/img/image.tif");
            Image img = Image.FromFile(path);
            img.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);   
        } 
```

并在我的 aspx 代码中引用 Handler。

**前任：**

```
<img src="SampleHandler.ashx"/> 
```

这种方法有效！但是如果我要加载多个**“.tif”文件怎么办？**

谢谢

配置：ASP.NET 2.0 VSNET2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:09:26.093

asp:Image 仅将 img 标记呈现给 HTML 输出。检查生成的源以验证它是否具有正确的路径。如果是这样，请尝试直接浏览到该路径并查看是否获得图像。

（假设您在直接浏览时看不到图像，这意味着您的服务器未配置为提供 tiff 文件，或者您的路径不正确）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:44:35.620

浏览器通常不支持 .TIF (TIFF) 文件格式。您应该只期望当前或更旧的浏览器支持图像文件的 GIF、JPG 和 PNG。[请参阅有关图像的 W3C 页面](http://www.w3.org/TR/html4/struct/objects.html)。

这*似乎*在开发环境中起作用的原因是它只是使用操作系统来解码将支持更多图像格式的图像。但这只是一种错觉，因为**浏览器**不支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T22:31:05.760

您需要配置您的 Web 服务器以返回正确的 MIME 类型。

tiff 文件的正确 mime 类型是*image/tiff*

您需要运行 IIS Express、IIS 7 或更高版本，并将以下内容添加到您的 web.config

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".tiff" mimeType="image/tiff" />
    <mimeMap fileExtension=".tif" mimeType="image/tiff" />
  </staticContent>
</system.webServer> 
```

如果您正在运行 webdev 服务器，那么您就不走运了（它很古老）。安装 IIS Express 或改为运行 IIS。

# java - 为什么阻塞库方法经常通过调用静态interrupted()而不是实例方法isInterrupted()来响应中断？

> ID：11501150
> 
> 赞同：0
> 
> 时间：2012-07-16T09:07:27.517
> 
> 标签：java, java.util.concurrent

[将java.util.concurrent.locks.AbstractQueuedSynchronizer 中](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/AbstractQueuedSynchronizer.html)的以下代码视为标题中提出的想法的众多示例之一：

```
1258    public final boolean tryAcquireSharedNanos(int arg, long nanosTimeout) throws Interrupted Exception {
1259        if (Thread.interrupted())
1260            throw new InterruptedException();
1261        return tryAcquireShared(arg) >= 0 ||
1262            doAcquireSharedNanos(arg, nanosTimeout);
1263    } 
```

为什么大多数阻塞库方法通过调用静态方法`Thread.interrupted()`而不是实例方法来响应中断`isInterrupted()`。调用静态方法也会清除中断状态，所以即使任务处理代码吞下了 InterruptionException ，调用者也无法了解中断状态，除了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:09:55.250

`InterruptedException`如果您捕获到，则中断标志已被清除，这始终是正确的。异常本身就是您此时的信号机制。捕手要么重新启用标志，要么直接注意线程移动到关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:50:39.453

基本上，您似乎认为 API / 行为契约应该有所不同，并且您想知道为什么“他们”按照现在的方式设计它，而不是您喜欢的方式。

我们无法回答。当讨论问题和做出决定时，这里没有人“在房间里”。如果你想要一个明确的答案，你需要找到最初的设计师并询问他们。

无论如何，这个问题没有实际意义……除非您计划设计和实现自己的编程语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:44:27.340

标题中问题的答案是“因为实施`Runnable`不`isInterrupted()`直接暴露”。显然，在不影响它的情况下访问标志很简单，`Thread.currentThread().isInterrupted()`但这不是重点。关键是它更容易使用`Thread.interrupted()`，因为这是你应该做的。

### 您对使用的代码的投诉`Thread.interrupted`

如果您正在检查您的线程是否已被中断，您应该在代码中的某个点处可以对其进行处理，否则有什么意义？定义的机制**故意**阻止您悄悄地退出循环。它特别鼓励你处理中断，并**故意**鼓励你通过抛出它来处理它。

可疑的是调用`isInterrupted`的代码，而不是调用的代码`interrupted`。你不应该**考虑**安静地处理中断，你应该戏剧性地处理它或者根本不处理它。是`Thread.currentThread.isInterrupted()`调用者悄悄地吸收异常并因此导致问题，而不是`Thread.interrupted()`.

有关更权威的讨论，请参阅 Heinz M. Kabutz 博士关于[彻底关闭线程的文章。](http://www.javaspecialists.eu/archive/Issue056.html)

# javascript - IE 中的 addEventListener 问题

> ID：11501159
> 
> 赞同：0
> 
> 时间：2012-07-16T09:07:49.573
> 
> 标签：javascript, jquery, dom-events, onbeforeunload, onunload

> **可能重复：**
> [Javascript 中的 MSIE 和 addEventListener 问题？](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)

我正在尝试在其父页面调用的子弹出窗口上侦听关闭事件。这个想法是让用户能够填写表格，然后使用弹出窗口接受权限并将视频上传到 YouTube。

我目前拥有的功能适用于 Chrome，但我似乎无法让它在 IE 8 上运行？

```
function ShowUploadVideoPopUp(URL){
    //get the top and left position that the popup should be placed in
    //half the screen width and height to center the popup
    var top = Math.max(0, (($(window).height()) / 2) + $(window).scrollTop()) - 210;
    var left = Math.max(0, (($(window).width()) / 2) + $(window).scrollLeft()) - 300;
    //generate an id for this popup
    day = new Date();
    id = day.getTime();
    //open the window
    var win = window.open(URL, id, 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=600,height=420,left = ' + left + ',top = ' + top);
    //we need to set a timeout otherwise the unload event is called before the window is opened
    //dont ask me why!?!
    setTimeout(function(){
        //add an event listener to listen for closure of the popup window
        //call the video uploaded function when the window is closed
        win.addEventListener("unload", VideoUploaded, false);
    }, 500);
    return false;
} 
```

这个想法是，一旦弹出窗口关闭，我就可以在父页面上提交表单。

我得到的错误是：

> '对象不支持此属性或方法'

我猜这意味着我分配创建的窗口不支持我调用 addEventListener 方法。

您对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:12:13.810

IE 使用 attachEvent 而不是 addEvent。

例如 [，在 Javascript 中查看这些线程 MSIE 和 addEventListener 问题？](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)并 [在 Internet Explorer 中添加事件监听器](https://stackoverflow.com/questions/6927637/addeventlistener-in-internet-explorer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:32:44.880

IE < 9 不支持`addEventListener`改为使用`attachEvent`

```
setTimeout(function(){
    if(win.addEventListener) // w3c standard
        win.addEventListener("unload", VideoUploaded, false);
    else if win.attachEvent('onunload', VideoUploaded, false); // IE
    else win.onunload=VideoUploaded;
}, 500); 
```

[**这是关于SO**](https://stackoverflow.com/questions/6927637/addeventlistener-in-internet-explorer)的答案。

# c# - 如何将 .wav 格式的声音相互附加

> ID：11501160
> 
> 赞同：3
> 
> 时间：2012-07-16T09:07:51.363
> 
> 标签：c#, java, .net, audio-streaming, soundplayer

我正在通过阅读一些书籍和观看一些教程来自学 C#。所以，我决定同时做一个小项目，以获取更多经验并巩固我的知识。我正在尝试用格鲁吉亚语（我的语言）创建一个文本到语音程序。我在java中做过同样的程序，但想用C#来传输它，但我不明白如何将不同的声音相互附加。例如，当我的程序想要说一个词“general”时，它会将这个词分成像这样的部分 "ge"-first "ne"-second "ra"-second "l"-second （这些 first 和 second 表示该部分位于单词的第一部分，我这样做是因为 ge-first 和 ge -second 有不同的语调）所以，我以 .wav 格式记录了这些部分，并希望程序附加它们并创建一个单词。我在 MSDN.COM 上寻找课程并找到了 SoundPlayer，但我不知道如何将 WAV 格式的声音相互附加。我想将一种声音添加到另一种声音并播放新的声音，例如我有一个声音说“aaa”而另一个说“bbbb”我想要一个声音说“aaabbbb”。

为了划分单词，我创建了一个数组列表并使用了这段代码。

```
public ArrayList divide(String s)  //დაყოფა და arraylist-ში გადანაწილება
{
    ArrayList a = new ArrayList();
    int i = 0;
    while (i < s.Length)
    {
        if (s[i] == ',' || s[i] == ' ' || s[i] == '.')
        {
            a.Add(s.Substring(i, i + 1));
            i++;
            continue;
        }
        if (consonant(s[i]) && (i + 1) != s.Length && sonant(s[i + 1]))
        {
            if (isFirstSonant(s, i))
                a.Add(s.Substring(i, i + 2) + "_FIRST");
            else
                a.Add(s.Substring(i, i + 2) + "_SECOND");
            i += 2;
            continue;
        }
        if (sonant(s[i]) && ((i + 1) < s.Length && sonant(s[i]) || i == (s.Length - 1)))
        {
            if (isFirstSonant(s, i))
                a.Add(s.Substring(i, i + 1) + "_FIRST");
            else
                a.Add(s.Substring(i, i + 1) + "_SECOND");
            i++;
            continue;
        }
        if (consonant(s[i]) && ((i + 1) < s.Length && consonant(s[i]) || i == (s.Length - 1)))
        {
            a.Add(s.Substring(i, i + 1) + "_SECOND");
            i++;
            continue;
        }
    }
    return a;
} 
```

我在我的 java 程序中使用了相同的代码（当然是在 java 语法中），但是在尝试使用 .wav 文件时遇到了问题，我不知道使用哪种方法以及如何粘贴这些声音。这就是我在java上的做法。

```
public AudioInputStream find(String s) throws UnsupportedAudioFileException, IOException {
         return AudioSystem.getAudioInputStream(
           new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/"+s+".wav"));
 }
 public AudioInputStream append(AudioInputStream main, String s) throws UnsupportedAudioFileException, IOException {
     return new AudioInputStream(
             new SequenceInputStream(main, find(s)),     
             main.getFormat(), 
             main.getFrameLength() + find(s).getFrameLength());
 }
 private String s;
 public void Process() {
    try {
        AudioInputStream main = AudioSystem.getAudioInputStream(new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/blank.wav"));
        ArrayList<String> aa = divide(s);
        for(int ii=0;ii<aa.size();ii++) {
            main=append(main, aa.get(ii));
            System.out.println(aa.get(ii));
        }
        AudioSystem.write(main, AudioFileFormat.Type.WAVE, new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/result.wav"));
        result=main;
        AudioInputStream result1 = AudioSystem.getAudioInputStream(new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/result.wav")); 
        DataLine.Info info =
            new DataLine.Info(Clip.class,
                    result1.getFormat());
        Clip clip = (Clip) AudioSystem.getLine(info);
        clip.open(result1);
        clip.start();
        } catch (Exception e) {
          e.printStackTrace();
        }
   }
 private AudioInputStream result;
 public AudioInputStream getResult() {
     return result;
 } 
```

现在我想在 C# 上做几乎同样的事情。我查看了此页面[http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)但不知道该怎么做，所以请帮助我:) 我应该使用什么方法和如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:13:31.833

这里有很好的帮助链接：

*   [使用 C# 2005 连接 Wave 文件](http://www.codeproject.com/Articles/15187/Concatenating-Wave-Files-Using-C-2005)
*   [C# WAV 文件类、音频混合和一些轻量级音频操作](http://www.codeproject.com/Articles/35725/C-WAV-file-class-audio-mixing-and-some-light-audio)

也许是这样：[Merge WAV files in C#](https://stackoverflow.com/questions/340646/merge-wav-files-in-c-sharp)

# java - 我正在尝试从 Internet 下载 xml 文件，但每次尝试时应用程序都会关闭....这是我的日志

> ID：11501163
> 
> 赞同：0
> 
> 时间：2012-07-16T09:07:53.987
> 
> 标签：java, android

```
07-16 14:32:17.052: E/Trace(1193): error opening trace file: No such file or directory (2)

07-16 14:32:17.562: I/Choreographer(1193): Skipped 48 frames!  The application may be doing too much work on its main thread.

07-16 14:32:17.732: D/gralloc_goldfish(1193): Emulator without GPU emulation detected.
07-16 14:32:20.272: D/AndroidRuntime(1193): Shutting down VM

07-16 14:32:20.272: W/dalvikvm(1193): threadid=1: thread exiting with uncaught exception (group=0x40a13300)

07-16 14:32:20.312: E/AndroidRuntime(1193): FATAL EXCEPTION: main

07-16 14:32:20.312: E/AndroidRuntime(1193): java.lang.IllegalStateException: Could not execute method of the activity

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.view.View$1.onClick(View.java:3591)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at 
android.view.View.performClick(View.java:4084)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.view.View$PerformClick.run(View.java:16966)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.os.Handler.handleCallback(Handler.java:615)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.os.Handler.dispatchMessage(Handler.java:92)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.os.Looper.loop(Looper.java:137)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.app.ActivityThread.main(ActivityThread.java:4745)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invokeNative(Native Method)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invoke(Method.java:511)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at dalvik.system.NativeStart.main(Native Method)

07-16 14:32:20.312: E/AndroidRuntime(1193): Caused by: java.lang.reflect.InvocationTargetException

07-16 14:32:20.312: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invokeNative(Native Method)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at java.lang.reflect.Method.invoke(Method.java:511)

07-16 14:32:20.312: E/AndroidRuntime(1193):     at android.view.View$1.onClick(View.java:3586)

07-16 14:32:20.312: E/AndroidRuntime(1193):     ... 11 more

07-16 14:32:20.312: E/AndroidRuntime(1193): Caused by: java.lang.NullPointerException

07-16 14:32:20.312: E/AndroidRuntime(1193):     at com.example.xmlparse.XML_parse.download(XML_parse.java:47)

07-16 14:32:20.312: E/AndroidRuntime(1193):     ... 14 more

07-16 14:32:22.542: I/Process(1193): Sending signal. PID: 1193 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:22:03.533

**1.**我认为你正在你的 UI 线程上做工作，离开你的 UI 线程，并**使用 Handler 或使用 AsyncTask 在非 UI 线程**上执行此操作。

**2.**请确保您的目标 XML 是用无错字正确编写的，因为它无法到达目标，因此它是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:12:22.797

07-16 14:32:20.312: E/AndroidRuntime(1193): 引起: java.lang.NullPointerException 07-16 14:32:20.312: E/AndroidRuntime(1193): at com.example.xmlparse.XML_parse.download (XML_parse.java:47)

好像你的 XML 是空的

# java - java android，列表视图中按钮的可见性（无需点击）

> ID：11501164
> 
> 赞同：0
> 
> 时间：2012-07-16T09:07:55.063
> 
> 标签：java, android, listview, button

我在互联网上搜索了很多寻找答案但找不到它......所以这是我的问题：

我有一个 listView，这个 listView 的某些行需要一个按钮。所以我告诉自己，好吧，我要在每一行放一个按钮（我使用的是一个简单的适配器，所以每一行的形状都在一个额外的 .xml 文件中），把它们都放在 INVISBLE 中，然后，当一行需要它，使按钮可见。

问题是，如何访问在简单适配器中加载的 xml 文件中的按钮？（并且没有点击它！我看到很多答案暗示点击它以获得视图，然后做你喜欢的，是的，但是如果我想控制它而不点击它呢？？如何获得看法？？）

提前非常感谢，如果问题已经被问到，我们很抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:10:18.940

**1.**使用XML**中的 Button 的 id**来访问它。

```
<Button android:id= @+id/Button_1
</Button> 
```

**2.**如果您使用的是动态按钮，您仍然可以通过编程方式为其分配 id，

```
Button butt = new Button();
  butt.setId(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:11:26.210

您可以创建一个扩展简单适配器的自定义适配器，并覆盖`getView`..
此链接可能对[http://android-apps-blog.blogspot.it/2011/04/how-to-create-listview-with-custom 有所帮助。 html](http://android-apps-blog.blogspot.it/2011/04/how-to-create-listview-with-custom.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:13:38.133

我以前也遇到过同样的事情。我使用 Spinner 而不是 Button。您可以在此链接中查看我的答案：

[如何获取复杂 ListView 行视图中的视图？](https://stackoverflow.com/questions/8177995/how-to-get-a-view-which-is-inside-a-complex-listview-row-view/8178069#8178069)

这会帮助你......;）

干杯

# objective-c - 如何从 iOS 中的 url 内容中获取 url 图像。帮我？

> ID：11501178
> 
> 赞同：1
> 
> 时间：2012-07-16T09:08:52.427
> 
> 标签：objective-c, ios, uiimageview, nsurl

我对如何从 URL 获取图像有疑问。

我努力了：

```
NSURL *url=[NSURL URLWithString:[NSString stringwithFormat:@"http://kenh14.vn/c102/20120715022212850/ngoc-trinh-la-model-thi-khong-nen-ngai-the-hien.chn"]];
NSURLRequest *request=[NSURLRequest requestWithURL:url];
NSURLConnection *connection=[[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:NO];
[connection start];

NSData *data=[NSURLConnection sendSynchrounousRequest:request returningResoibse:nil error:nil]; 
```

我想在`UIImageView`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:13:17.017

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]]; 
```

来自苹果的示例代码[LazyTableImages.app](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394)可能是您想要的。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:40:15.307

似乎您在问如何`UIImageView`简单地显示在网站上找到的任何图像。（您上面列出的 URL 不是图片，而是网站）

这是非常不切实际的，但我想仍然是可能的。我个人不知道如何做到这一点，但这个链接可能会对你有所帮助。[https://stackoverflow.com/a/10387801/716216](https://stackoverflow.com/a/10387801/716216)

但是，如果您希望简单地显示来自其自己的 URL 的图像，这可以很容易地完成。

例如：[http ://www.google.com/images/srpr/logo3w.png](http://www.google.com/images/srpr/logo3w.png)

如果您`UIImageView`完全以编程方式创建：

```
UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com/images/srpr/logo3w.png"]]]];
[self.view addSubview:myImageView]; 
```

如果您的图像视图在其他地方实例化，并且您只想将图像应用到它：

```
[myImageView setImage: [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com/images/srpr/logo3w.png"]]]]; 
```

# ios - Game Center 为我的应用程序显示错误的图标

> ID：11501181
> 
> 赞同：0
> 
> 时间：2012-07-16T09:09:13.997
> 
> 标签：ios, cocos2d-iphone, game-center

你能告诉我应该在哪里输入我的游戏图标名称，以便 Game Center 正确显示我的图标吗？我猜有些事情搞砸了，现在我在 Game Center 上看到了我其他应用程序的图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:24:21.367

您在 itunesconnect.apple.com 管理 Game Center 环境（真实和沙盒）。如果您不使用 Safari，我认为它的某些功能无法正常工作。

使用您的 Apple ID 登录，选择“管理您的应用程序”。那是你上传你的图标和做其他事情的地方。

# objective-c - 如何解决无法完成操作的运行时错误。（OSStatus 错误 -43。）？

> ID：11501184
> 
> 赞同：0
> 
> 时间：2012-07-16T09:09:26.773
> 
> 标签：objective-c

我是 iPhone 的初学者。我想播放音频。为此我使用了 AVAudioPlayer.. 但该对象返回空值.. 并且还给出了操作无法完成的运行时错误。（OSStatus 错误 -43。）

这是我使用的代码

```
-(IBAction)sound
{
   NSError *error;
   int currentsound;
    path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"];
    dict=[NSDictionary dictionaryWithContentsOfFile:path];

    animalaudio=[dict valueForKey:@"audio"];
    NSLog(@"print:%@",dict);
    NSLog(@"printanimal%@",animalaudio);
    audiolist=[animalaudio objectAtIndex:currentsound];
    NSLog(@"audiolist:%@",audiolist);
    url=[NSURL fileURLWithPath:audiolist];
    NSLog(@"url:%@",url);
     audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
    NSLog(@"audioplayer:%@",audioplayer);
     if( audioplayer == nil ){

        NSLog(@"Failed with reason: %@", [error localizedDescription]);
    }
    else{
        [audioplayer play];
    }
  } 
```

在那个 url 中还返回 mp3 文件，但是为什么 url 不传入 AVAudioPlayer，因为 audioplayer 返回 null 但不返回 mp3 file.so，我在 AVAudioPlayer 中编写的代码是什么？给出任何建议和源代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:43:38.993

```
path=[[NSBundle mainBundle] pathForResource:@"Animalfile" ofType:@"plist"]; 
```

路径必须是单个文件而不是 plist

尝试给路径一个值

例子：

```
path = [[NSString alloc] initWithFormat:[[NSBundle mainBundle] pathForResource:@"firstTrack" ofType:@"mp3"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:49:43.390

-43 是 File not found 错误 检查 plist 中的相对文件路径是否可以从工作目录中找到。或者更好的是，使用 NSBundle 的众多资源查找方法之一直接查找您的声音文件，然后您将获得一个现有的绝对路径。

# android - 如何在 android webview 上显示 flash 内容

> ID：11501185
> 
> 赞同：1
> 
> 时间：2012-07-16T09:09:39.397
> 
> 标签：android, android-webview

我有一个包含 flash 内容的 HTML 文件。这里的 flash 内容是一个自定义播放器。我只想在 android webview 上显示它（播放视频）。我也在我的设备上安装了 Adob​​e flash player。我用过下面的代码。当我运行它时显示白屏。没有播放支持。我在这方面犯了什么错误吗？

我的代码：

```
WebView webview = (WebView) findViewById(R.id.webviewHelp);
webview.loadUrl("file:///android_asset/index.html");
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setPluginsEnabled(true);
webview.getSettings().setAllowFileAccess(true); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:22:25.943

在WebSetting的[文档](http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginsEnabled%28boolean%29)`setPluginsEnabled`中，该方法已被弃用。尝试使用[setPluginState(WebSettings.PluginState)](http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginState%28android.webkit.WebSettings.PluginState%29)代替。就像是：

```
webview.getSettings().setPluginState(WebSettings.PluginState.ON); 
```

# objective-c - NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats 不调用该方法

> ID：11501186
> 
> 赞同：9
> 
> 时间：2012-07-16T09:09:42.513
> 
> 标签：objective-c, ios, nstimer

计时器从不调用该方法。我究竟做错了什么 ？这是代码：

```
NSTimer *manualOverlayTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(hideManual) userInfo:nil repeats:NO]; 
```

方法：

```
-(void)hideManual 
```

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T07:24:13.203

这是一个线程问题。我已经解决了：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Timer here
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:16:55.210

对于此类任务，您不需要 NSTimer。要在主线程上的特定时间段后隐藏视图对象，您可以使用 gcd 方法 dispatch_after

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC * 2.0), dispatch_get_main_queue(), ^(void){
    // Your code
  }); 
```

其中 2.0 是在执行块之前将经过的秒数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:14:16.430

就用这个

```
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(hideManual) userInfo:nil repeats:NO]; 
```

**编辑**

当按下`btn`(an ) 并调用函数时，此代码运行良好。`UIButton``-(void)btnPressed`

```
-(void)btnPressed{
    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(hideManual) userInfo:nil repeats:NO];
}

-(void)hideManual{
    NSLog(@"Hi, I'm here!");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:19:43.577

试试这个 ：

```
NSTimer *manualOverlayTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                              target:self
                              selector:@selector(hideManual)
                              userInfo:nil
                              repeats:YES];

repeat:YES instead of [[NSRunLoop currentRunLoop] addTimer:manualOverlayTimer forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T13:00:01.467

在您的代码片段中，它不会显示`NSTimer`触发的时间和地点。

如果你想使用`NSTimer`，你应该在初始化之后触发定时器，像这样：

```
NSTimer *_timer = [NSTimer scheduledTimerWithTimeInterval:2.f target:self selector:@selector(hideManual) userInfo:nil repeats:false];
[_timer fire]; 
```

但您也可以在任何方法中使用以下行：

```
[self performSelector:@selector(hideManual) withObject:nil afterDelay:2.f]; 
```

在这种情况下，它看起来比使用`NSTimer`.

# linux - 堆管理

> ID：11501189
> 
> 赞同：4
> 
> 时间：2012-07-16T09:09:55.130
> 
> 标签：linux, operating-system, heap-memory

我知道有一个元数据存储在 期间使用的辅助信息`free()`，`realloc()`当我们只提供指针时。

我对堆没有什么疑问。

*   堆栈是按进程分配的。毫无疑问，但不确定堆。堆信息是否是全局维护的，否则每个进程都会有一些机制来保存有关为该特定进程分配的内存的信息。

*   堆信息将如何维护？我猜散列机制。我也用谷歌搜索并尝试过。他们中的大多数人将其解释为特定于实现的......就像那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:09:14.507

堆，就像堆栈一样，是每个进程的，并且（几乎）纯粹是用户空间的东西。

堆管理器使用`sbrk`系统调用通知操作系统它打算增加所需的内存量。除了将一系列页面从“未知”更改为“现有、零、从未访问过”（这实际上意味着它们仍然不存在，但操作系统假装它们存在）之外，这几乎没有什么作用。当一个页面第一次被访问时，它会出错，并且操作系统从零池中拉出一个零页。
（它可能稍微复杂一些，因为如果从顶部释放了大量内存，堆管理器也可能会缩小数据段，但基本上就是这么简单）。

这就是操作系统对堆的全部了解。其他所有事情，例如拆分块、将释放的块放入列表或类似结构以及重用块都发生在堆管理器内部，它直接或间接（例如作为 glibc 的一部分）是程序的一部分。

堆管理器正在做什么取决于实现，至少存在六种众所周知的不同 malloc 实现，它们以不同的方式工作。参见例如[this one](http://g.oswego.edu/dl/html/malloc.html) or [this one](http://goog-perftools.sourceforge.net/doc/tcmalloc.html) or [this one](http://www.hoard.org/)。

堆栈以相同或相似的方式工作。某个内存范围最初是“保留”的，但实际上并未保留任何内容（即不创建页面）。一些页面被提交（即创建），最后一页被写保护或不存在，这以一种特殊的方式被记住。当堆栈增长到最后一页被触及时，就会发生错误。然后从零池中拉出一个新页面，前提是堆栈仍在其允许的大小内。

当进程终止时，对这些页面的所有引用都将被删除，并且（假设它们没有与仍然持有引用的另一个进程共享）移交给低优先级后台任务，该任务将它们清零并将它们添加到“零池”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:29:37.677

是的，堆也是每个进程的。

有一些堆实现使用每个线程堆来减少锁争用，但这是（用户空间）堆管理器的实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:07:52.267

阅读这个，它有点旧（'07），但有 Damon 概述的相关细节

[http://www.blackhat.com/presentations/bh-usa-07/Ferguson/Whitepaper/bh-usa-07-ferguson-WP.pdf](http://www.blackhat.com/presentations/bh-usa-07/Ferguson/Whitepaper/bh-usa-07-ferguson-WP.pdf)

# sql - 如何将日期时间转换为 dd/MM/yyyy 格式的日期

> ID：11501190
> 
> 赞同：11
> 
> 时间：2012-07-16T09:09:54.787
> 
> 标签：sql, sql-server-2005

我想编写一个查询以获取 dd/MM/yyyy 格式的日期。（我不想要时间）。

所以我写了这样的查询

```
SELECT  Convert(varchar,A.InsertDate,103) as Tran_Date 
```

但是当我按 Tran_Date 写订单时，它给我的结果是错误的顺序。

有人可以建议我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T09:14:00.147

给一个不同的别名

```
SELECT  Convert(varchar,A.InsertDate,103) as converted_Tran_Date from table as A
order by A.InsertDate 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:12:50.253

您还需要按顺序使用转换：

```
SELECT  Convert(varchar,A.InsertDate,103) as Tran_Date
order by Convert(varchar,A.InsertDate,103) 
```

# php - 无法从选定的重复 id (PHP) 和 (MySQL) 中获取 sum 的值

> ID：11501191
> 
> 赞同：0
> 
> 时间：2012-07-16T09:10:04.063
> 
> 标签：php, mysql, sum

我试图从之前在表单中选择的重复值的列中得到一个总和，但我什至无法显示结果，这段代码有问题吗？

数据库结构

表 carros
-id
-matricula
-marca

表 movimentos
-id -matricula -marca -fornecedor -tipo -despesa -observacoes

我在文件“verificar.dwt.php”中有一个表格，其中包含一个下拉列表，其中包含“matricula”中的所有值（来自表 carros），当它选择相应的“matricula”时，它会转到“extra1.dwt”。 php”，它显示了一个表，其中包含具有相同“matricula”值的所有重复行。

我现在要展示的是重复行的总和。

```
<a href='verificar.dwt.php'>Voltar atrás</a>

<div align="center"><? 

include 'configmov.dwt.php'; 

$tableName='movimentos';
$matricula = mysql_real_escape_string($_POST['matricula']);

$sql="SELECT matricula, marca, despesa FROM ".$tableName." WHERE matricula = '".$matricula."'";
$result=mysql_query($sql); 

$result1 = mysql_query('SELECT SUM(value) AS value_sum FROM despesa'); 
$row1 = mysql_fetch_assoc($result1); 
$sum = $row1['value_sum'];

$n=1; 

echo "Os seus resultados: <p>";

echo "<table border=0>";
echo "<tr bgcolor='#CCFFCC'>";
echo "<td style='width: 100px;'>Matricula</td>";
echo "<td style='width: 100px;'>Marca</td>";
echo "<td style='width: 100px;'>Despesa</td>";
echo "</tr>";

while($row = mysql_fetch_array($result)){ 
    echo "<tr bgcolor='#CCCCCC'>";
    echo "<td style='width: 100px;'>".$row['matricula']."</td>";
    echo "<td style='width: 100px;'>".$row['marca']."</td>";
    echo "<td style='width: 100px;'>".$row['despesa']."</td>";
    echo "</tr>";

    echo $sum;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:14:49.253

如果不了解您使用的表格的内容，我认为没有人可以帮助您。

但：

```
SELECT SUM(value) AS value_sum FROM despesa 
```

似乎是您求和的核心，它不包含帖子中的任何内容（如矩阵）。

如果我是你，我会首先回显所有 SQL，然后从那里找出你真正需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:19:05.057

如果要显示它，则必须将其显示在行下的列上，但是在显示之前关闭了行属性可能会产生问题。还有一件事你把这个查询

```
$result1 = mysql_query('SELECT SUM(value) AS value_sum FROM despesa'); 
```

是despesa表名？？因为我认为它是 colname 如果它是 colname 那么你的查询应该是这样的

```
$result1 = mysql_query('SELECT SUM(despesa) AS value_sum FROM Tablename'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:18:43.967

在您的第一个查询中，despesa 是一列

```
$sql="SELECT matricula, marca, despesa FROM ".$tableName." WHERE matricula = '".$matricula."'"; 
```

所以我想那是

```
$result1 = mysql_query('SELECT SUM(value) AS value_sum FROM despesa'); 
```

你应该使用

```
$result1 = mysql_query("SELECT SUM(despesa) AS value_sum FROM {$tableName}"); 
```

# java - 比较版本号字符串（主要、次要、修订、测试版）

> ID：11501192
> 
> 赞同：14
> 
> 时间：2012-07-16T09:10:05.873
> 
> 标签：java, regex, versioning

我有一个与设备固件通信的应用程序。由于固件有更改，因此使用格式进行版本控制`{major}.{minor}.{revision}[beta[{beta}]]`。举几个例子，当前版本是`0.4.7beta`which 后面会跟着`0.4.7beta2`偶尔. 不幸的是，固件的版本控制格式不在我的控制之下，所以我无法更改它。`0.4.7``0.4.8beta`

我需要一种相互比较固件的方法。基本上，我需要一个功能

```
boolean isFirmwareNewer(String testFW, String baseFW); 
```

到目前为止，我所做的是将这种格式转换为简单的`int`. 因此`0.4.7beta2`将变为`00040702`（每个级别 2 位数字）。问题是，那

1.  我的代码难以阅读（>40 行和 3 种方法）
2.  我敢肯定，有一个优雅的解决方案（也许使用正则表达式？）
3.  我想要一个`0.0.0`根据定义更新的通配符
4.  这会处理不正确的 beta 版本（`0.4.7beta2`不比 更新`0.4.7`）。这很容易解释 ( `if (testFW.contains("beta")) testFWValue -= 100;`，但它也不是很优雅。

你们通常是怎么做的（或者你会怎么做）？

如果您愿意，我可以附上我目前正在使用的代码，但正如我所说，它的代码行数超过 40 行，并且不是真正可读的（这就是我正在寻找更好的方法来做到这一点的原因）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-16T09:41:02.300

这里有一个建议：

```
static int[] getVersionNumbers(String ver) {
    Matcher m = Pattern.compile("(\\d+)\\.(\\d+)\\.(\\d+)(beta(\\d*))?")
                       .matcher(ver);
    if (!m.matches())
        throw new IllegalArgumentException("Malformed FW version");

    return new int[] { Integer.parseInt(m.group(1)),  // major
            Integer.parseInt(m.group(2)),             // minor
            Integer.parseInt(m.group(3)),             // rev.
            m.group(4) == null ? Integer.MAX_VALUE    // no beta suffix
                    : m.group(5).isEmpty() ? 1        // "beta"
                    : Integer.parseInt(m.group(5))    // "beta3"
    };
}

static boolean isFirmwareNewer(String testFW, String baseFW) {

    int[] testVer = getVersionNumbers(testFW);
    int[] baseVer = getVersionNumbers(baseFW);

    for (int i = 0; i < testVer.length; i++)
        if (testVer[i] != baseVer[i])
            return testVer[i] > baseVer[i];

    return true;
} 
```

它使用了一个小技巧并将 beta 部分翻译如下：

*   `""`（无 beta 后缀）→ Beta MAX_INT
*   `"beta"`→ Beta 1（因为它在“beta2”之前）
*   `"betaX"`→ Beta X

请注意，`true`如果两个版本相同，则返回。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-16T10:00:51.697

我会实现一个可比较的类：

```
class Version implements Comparable<Version> {
    int major;
    int minor;
    int rev;
    int beta = Integer.MAX_VALUE;

    public int compareTo(Version o) {
        if (this.major != o.major) {
            return Integer.compare(this.major, o.major);
        }
        if (this.minor != o.minor) {
            return Integer.compare(this.minor, o.minor);
        }
        if (this.rev != o.rev) {
            return Integer.compare(this.rev, o.rev);
        }
        if (this.beta != o.beta) {
            return Integer.compare(this.beta, o.beta);
        }
        return 0;
    }

    public static Version parse(String version) {
        // TODO: implement parsing here
        // 1.1.1      - beta = MAX_VALUE
        // 1.1.1beta  - beta = 1
        // 1.1.1beta2 - beta = 2
        return new Version();
    }

    @Override
    public String toString() {
        return "" + major + "." + minor + "." + rev
                + (beta == Integer.MAX_VALUE ? "" 
                        : (beta == 1 ? "beta" : 
                            ("beta" + beta)));
    }

} 
```

然后以标准的java方式进行比较：

```
if (Version.parse(testFW).compareTo(Version.parse(baseFW)) < 0) {
   // Version is newer!
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-21T09:51:21.587

对于我的项目，我按照[Semantic Versioning 2.0.0](http://semver.org)使用了这种方法：

```
private static String[] formatVersionString(String[] strArr){
    //remove trailing 0s
    List<String> list = new ArrayList<>();
    boolean foundChar = false;
    for(int i=strArr.length-1;i>=0;i--){
        String curChar = strArr[i];
        if(curChar.equals("0") && !foundChar){
            continue;
        } else{
            list.add(strArr[i]);
            foundChar = true;
        }

    }
    Collections.reverse(list);
    return list.toArray(new String[list.size()]);
}

private static String getPreReleaseBuildStr(String buildStr){
    //removing build metadata
    if(buildStr == null){
        return null;
    }
    String [] a = buildStr.split("\\+");
    if(a.length>0){
        return a[0];
    } else{
        return null;
    }
}

private static int compareVersionString(String str1,String str2){
    int ret = 0;
    String[] verStr1 = formatVersionString(str1.split("\\."));
    String[] verStr2 = formatVersionString(str2.split("\\."));

    int i = 0;
    // set index to first non-equal ordinal or length of shortest version string
    while (i < verStr1.length && i < verStr2.length && verStr1[i].equals(verStr2[i])) {
        i++;
    }

    // compare first non-equal ordinal number
    if (i < verStr1.length && i < verStr2.length) {
        int diff = 0;
        try{
            if(verStr1[i] == null || verStr1[i].trim().length() == 0) {
                verStr1[i] = "0";
            }
            if(verStr2[i] == null || verStr2[i].trim().length() == 0) {
                verStr2[i] = "0";
            }
            diff = Integer.valueOf(verStr1[i]).compareTo(Integer.valueOf(verStr2[i]));
        }catch(NumberFormatException e){
            diff = verStr1[i].compareTo(verStr2[i]);
        } finally{
            ret = Integer.signum(diff);
        }
    } else{
        // the strings are equal or one string is a substring of the other
        // e.g. "1.2.3" = "1.2.3" or "1.2.3" < "1.2.3.4"

        ret = Integer.signum(verStr1.length - verStr2.length);
    }

    return ret;
}

/**
 * Compares two version strings.
 * follow this link for more info http://semver.org/
 *
 * Use this instead of String.compareTo() for a non-lexicographical
 * comparison that works for version strings. e.g. "1.10".compareTo("1.6").
 *
 * Ex:--
 * //1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0 < 2.0.0.6
 *
 * @param str1 a string of ordinal numbers separated by decimal points.
 * @param str2 a string of ordinal numbers separated by decimal points.
 * @return The result is a negative integer if str1 is _numerically_ less than str2.
 *         The result is a positive integer if str1 is _numerically_ greater than str2.
 *         The result is zero if the strings are _numerically_ equal.
 */

public static int versionCompare(String str1, String str2) {

    int ret = 0;
    String[] val1 = str1.split("-");
    String[] val2 = str2.split("-");

    String preReleaseVer1 = null, preReleaseVer2 = null;
    if(val1.length>1){
        preReleaseVer1 = getPreReleaseBuildStr(val1[1]);
    }
    if(val2.length>1){
        preReleaseVer2 = getPreReleaseBuildStr(val2[1]);
    }

    ret = compareVersionString(val1[0],val2[0]);

    if(ret == 0){
        //if both version are equal then compare with pre_release String
        if(preReleaseVer1 == null && preReleaseVer2 == null){
              ret = 0;
        } else if(preReleaseVer1 == null && preReleaseVer2!=null){
            //1.0.0 > 1.0.0-beta
              ret = 1;
        } else if(preReleaseVer1 != null && preReleaseVer2==null){
            //1.0.0-beta < 1.0.0
            ret = -1;
        } else{
            //both hasve pre release string
            ret = compareVersionString(preReleaseVer1,preReleaseVer2);
        }
    }

    return ret;
} 
```

使用 versionCompare(String str1, String str2) 方法进行任何比较

**代码示例：---**

```
public class Main
{
    public static void main (String[] args)
    {
        //1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0

        Test(new String[]{"1.0.0-alpha","1.0.0-alpha.1","1.0.0-alpha.beta","1.0.0-beta",
        "1.0.0-beta.2","1.0.0-beta.11","1.0.0-rc.1","1.0.0","2.0.0.1"});  
    }
    private static void Test(String[] versions) {
        for (int i = 0; i < versions.length; i++) {
            for (int j = 0; j < versions.length; j++) {
            Test(versions[i], versions[j]);
            }
        }
    }

    private static void Test(String v1, String v2) {
        int result = versionCompare(v1,v2);
        String op = "==";
        if (result < 0) op = "<";
        if (result > 0) op = ">";
        System.out.printf("%s %s %s\n", v1, op, v2);
    }
} 
```

**上述示例的输出如下：---**

```
1.0.0-alpha == 1.0.0-alpha
1.0.0-alpha < 1.0.0-alpha.1
1.0.0-alpha < 1.0.0-alpha.beta
1.0.0-alpha < 1.0.0-beta
1.0.0-alpha < 1.0.0-beta.2
1.0.0-alpha < 1.0.0-beta.11
1.0.0-alpha < 1.0.0-rc.1
1.0.0-alpha < 1.0.0
1.0.0-alpha < 2.0.0.1
1.0.0-alpha.1 > 1.0.0-alpha
1.0.0-alpha.1 == 1.0.0-alpha.1
1.0.0-alpha.1 < 1.0.0-alpha.beta
1.0.0-alpha.1 < 1.0.0-beta
1.0.0-alpha.1 < 1.0.0-beta.2
1.0.0-alpha.1 < 1.0.0-beta.11
1.0.0-alpha.1 < 1.0.0-rc.1
1.0.0-alpha.1 < 1.0.0
1.0.0-alpha.1 < 2.0.0.1
1.0.0-alpha.beta > 1.0.0-alpha
1.0.0-alpha.beta > 1.0.0-alpha.1
1.0.0-alpha.beta == 1.0.0-alpha.beta
1.0.0-alpha.beta < 1.0.0-beta
1.0.0-alpha.beta < 1.0.0-beta.2
1.0.0-alpha.beta < 1.0.0-beta.11
1.0.0-alpha.beta < 1.0.0-rc.1
1.0.0-alpha.beta < 1.0.0
1.0.0-alpha.beta < 2.0.0.1
1.0.0-beta > 1.0.0-alpha
1.0.0-beta > 1.0.0-alpha.1
1.0.0-beta > 1.0.0-alpha.beta
1.0.0-beta == 1.0.0-beta
1.0.0-beta < 1.0.0-beta.2
1.0.0-beta < 1.0.0-beta.11
1.0.0-beta < 1.0.0-rc.1
1.0.0-beta < 1.0.0
1.0.0-beta < 2.0.0.1
1.0.0-beta.2 > 1.0.0-alpha
1.0.0-beta.2 > 1.0.0-alpha.1
1.0.0-beta.2 > 1.0.0-alpha.beta
1.0.0-beta.2 > 1.0.0-beta
1.0.0-beta.2 == 1.0.0-beta.2
1.0.0-beta.2 < 1.0.0-beta.11
1.0.0-beta.2 < 1.0.0-rc.1
1.0.0-beta.2 < 1.0.0
1.0.0-beta.2 < 2.0.0.1
1.0.0-beta.11 > 1.0.0-alpha
1.0.0-beta.11 > 1.0.0-alpha.1
1.0.0-beta.11 > 1.0.0-alpha.beta
1.0.0-beta.11 > 1.0.0-beta
1.0.0-beta.11 > 1.0.0-beta.2
1.0.0-beta.11 == 1.0.0-beta.11
1.0.0-beta.11 < 1.0.0-rc.1
1.0.0-beta.11 < 1.0.0
1.0.0-beta.11 < 2.0.0.1
1.0.0-rc.1 > 1.0.0-alpha
1.0.0-rc.1 > 1.0.0-alpha.1
1.0.0-rc.1 > 1.0.0-alpha.beta
1.0.0-rc.1 > 1.0.0-beta
1.0.0-rc.1 > 1.0.0-beta.2
1.0.0-rc.1 > 1.0.0-beta.11
1.0.0-rc.1 == 1.0.0-rc.1
1.0.0-rc.1 < 1.0.0
1.0.0-rc.1 < 2.0.0.1
1.0.0 > 1.0.0-alpha
1.0.0 > 1.0.0-alpha.1
1.0.0 > 1.0.0-alpha.beta
1.0.0 > 1.0.0-beta
1.0.0 > 1.0.0-beta.2
1.0.0 > 1.0.0-beta.11
1.0.0 > 1.0.0-rc.1
1.0.0 == 1.0.0
1.0.0 < 2.0.0.1
2.0.0.1 > 1.0.0-alpha
2.0.0.1 > 1.0.0-alpha.1
2.0.0.1 > 1.0.0-alpha.beta
2.0.0.1 > 1.0.0-beta
2.0.0.1 > 1.0.0-beta.2
2.0.0.1 > 1.0.0-beta.11
2.0.0.1 > 1.0.0-rc.1
2.0.0.1 > 1.0.0
2.0.0.1 == 2.0.0.1
3.5.6-beta == 3.5.6-beta
3.5.6-beta == 3.5.6-beta.0
3.5.6-beta.0 == 3.5.6-beta
3.5.6-beta.0 == 3.5.6-beta.0 
```

# objective-c - 未知的 Objective-C 错误“架构 x86_64 的未定义符号”，一切似乎都正常

> ID：11501193
> 
> 赞同：1
> 
> 时间：2012-07-16T09:10:05.770
> 
> 标签：objective-c, ios

我正在尝试按照此处的教程进行操作：

[http://cocoadevcentral.com/articles/000081.php](http://cocoadevcentral.com/articles/000081.php)

当我到达“头文件”部分时，`gcc test1.c -o test1`在 Mac OSX 命令行中运行后，我不断收到一条奇怪的错误消息：

```
Undefined symbols for architecture x86_64:
  "_sum", referenced from:
      _main in ccdZyc82.o
  "_average", referenced from:
      _main in ccdZyc82.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

数学函数.h：

```
int sum(int x, int y);
float average(float x, float y, float z); 
```

数学函数.c：

```
int sum(int x, int y) {
  return x + y;
}

float average(float x, float y, float z) {
  return (x + y + z)/3;
} 
```

最后，我的 test1.c：

```
#include <stdio.h>
#include "math_functions.h"

main() {
  int thesum = sum(1, 2);
  float ave = average(1.1, 2.21, 55.32);

  printf("sum = %i\nave = %f\n(int)ave = %i\n", thesum, ave, (int)ave);
} 
```

我似乎正确地遵循了一切，我不明白那个错误来自哪里。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:21:18.053

您有两个单独的源文件，math_functions.c 和 test1.c，它们都需要编译并链接在一起。错误消息告诉你编译器没有找到函数`average`，`float`那是因为它们来自 math_functions.c 而你只编译了 test1.c。

您链接到的示例告诉您键入：

```
gcc test3.c math_functions.c -o test3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:16:27.430

您没有在包含`sum()`and`average()`函数的目标文件中进行链接。

做这个：

```
$ gcc -c -o math_functions.o math_functions.c
$ gcc -c -o test1.o test1.c
$ gcc -o test1 test1.o math_functions.o 
```

前两行将源文件编译为目标文件，最后一行将目标文件链接到可执行文件中。

您需要花一些时间学习`make`，因为没有开发人员会费心输入那么多内容来编译（在您知道之前，您的文件名错误并编译了您的源文件！）。

# android - 在 AVD 中运行应用程序而不打开 Eclipse

> ID：11501194
> 
> 赞同：0
> 
> 时间：2012-07-16T09:10:09.707
> 
> 标签：android

我在 Eclipse 中创建了 Calcy 应用程序。它在模拟器中正常运行。

但我想使用 AVD manager 运行它。

安装应用程序的命令是“adb install Calcy.apk”

但它传达的信息是

```
C:\Android\android-sdk\platform-tools>adb install Calcy.apk
252 KB/s (39547 bytes in 0.153s)
        pkg: /data/local/tmp/Calcy.apk
Failure [INSTALL_FAILED_ALREADY_EXISTS] 
```

如何解决这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:12:36.250

请先从模拟器中删除此应用程序，然后运行**“adb install Calcy.apk”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:14:00.097

如果您不想先使用卸载`adb uninstall your.package.name`，请尝试`adb install -r Calcy.apk`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:12:32.863

**失败 [INSTALL_FAILED_ALREADY_EXISTS]**

这意味着该应用程序已经安装在模拟器中。您可以进入应用程序管理器工具并从模拟器中卸载应用程序。然后再次运行此命令，您将能够安装它。

*您需要卸载已安装的应用程序。那么这个命令将起作用*

您还可以使用以下命令删除应用程序

```
adb uninstall package_name 
```

# python - 获取主机的所有外部 IP 地址

> ID：11501202
> 
> 赞同：1
> 
> 时间：2012-07-16T09:10:27.750
> 
> 标签：python, networking, ip-address

其他问题不太一样。

我正在寻找的是一个 Python 函数，它返回系统上所有 IP 地址的列表，模拟以下行为：

```
ifconfig | grep 'inet addr:' | grep -v 127.0.0.1 | cut -d: -f2 | awk '{ print $1}' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:20:58.367

您可以使用`subprocess`python 模块来实现这一点。

```
import subprocess
cmd = "ifconfig | grep 'inet addr:' | grep -v 127.0.0.1 | cut -d: -f2 | awk '{ print $1}'"
co = subprocess.Popen([cmd], shell = True, stdout = subprocess.PIPE)
ips = co.stdout.read().strip().split("\n") 
```

那应该给你一个IP地址列表。

PS：最好改用以下命令

```
ifconfig | grep inet | grep -v inet6 | grep -v 127.0.0.1 | awk '{print $2}' | cut -d\: -f2 | cut -d\  -f1 
```

这将排除 IPV6 地址（如果有）。

**纯 Python 方式**

如果您希望完全在 Python 中执行此操作，请查看[netifaces](http://alastairs-place.net/projects/netifaces/) python 模块。

# php - `for`循环上的PHP解析错误

> ID：11501205
> 
> 赞同：2
> 
> 时间：2012-07-16T09:10:40.493
> 
> 标签：php

我可能只是在这里做一些愚蠢的事情，但我看不到错误的原因。我在用 PHP 编写的分页函数中的 for 循环中遇到 Parse 错误；这是完整的错误。

```
PHP Parse error:  parse error, expecting `')'' in /Users/danielsgroves/Sites/Gouland/search.php on line 95 
```

发生错误的完整功能如下：

```
private function pagination($scope, $keyword)
{
    $pages = 15;

    $pagination = '<ul>';
    for ($i = 0; $i < $pages; i++) {
        $pagination .= "<li><a id=\"a$i\" class=\"na\" href=\"?q=$keyword&scope=$scope&page=$i\">$i</a></li>";
    }
    $pagination .= '</ul>';

    return $pagination;
} 
```

正如您可能已经从我所说的那样确定错误中提到的第 95 行`for ($i = 0; $`等等。完整的类文件如下。我已经包含了评论以防万一它有帮助。

```
Class BingSearch
{
private $APPID      = "SOME API KEY";

private $keyword;
private $scope;
private $page;
private $count;
private $offset;

private $response;
private $results;

/**
 * Set the object up with required information to perform the search. Once 
 * the object is setup the getResults() method should be called to display
 * the results where required. 
 * @param (String) $keyword = The search string
 * @param (String) $scope = The scope of the search; web, ticket, image, 
 * video, news
 * @param (Int) $page = The required results page.
 * @public
 */
public function __construct($keyword, $scope, $page)
{
    $this->keyword  = urlencode($keyword);
    $this->scope    = $scope;
    $this->page     = $page;
}

/**
 * Runs the necessary internal methods to fetch and display the required 
 * results.  Required information should be provided into the constructor 
 * on object creation.  This function will not return any information,
 * but 'echo' is straight out onto the page. Each returned result will
 * be placed inside it's own HTML5 <article> tag.  Simply call this 
 * method from the location in your templates of where you would like
 * the search results to be placed.  
 * @public
 */
public function getResults()
{
    $this->fetchFeed();
    $this->generateWebResults();
}

/**
 * Fetches the JSON feed from the Google bing API.  Uses private class
 * variables for the required information. 
 * @private
 */
private function fetchFeed()
{
    $request        = "http://api.search.live.net/json.aspx?Appid=$this->APPID&query=$this->keyword&sources=$this->scope&$this->count&$this->offset";
    $this->response = file_get_contents($request);
    $this->results = json_decode($this->response);
}

/**
 * Formats the returned JSON feed by adapting it for HTML. Each result is 
 * placed within an <article> tag.  The title is an <h3> which also links
 * to the actual result. <span class="cached"> is the cache link and 
 * the description is placed within a <p>.  Finally, <span class="fullLink">
 * contains the URL for the content, which is also linked.  
 * @private
 */
private function generateWebResults()
{
    if($this->results->SearchResponse->Web->Total != 0) {   

        foreach($this->results->SearchResponse->Web->Results as $value) {

            if (!isset($value->Description))
                $value->Description = '';

            echo "<article>";
            echo "<h3><a href=\"$value->Url\" title=\"Go to $value->Title\">$value->Title</a></h3>";
            echo "<span class=\"cached\"><a href=\"$value->CacheUrl\" title=\"View Cached Version\">Cached</a></span>";
            echo "<p>" . strip_tags($value->Description) . "</p>";
            echo "<span class=\"fullLink\"><a href=\"$value->Url\" title=\"Go to $value->Title\">$value->Url</a></span>";
            echo "</article>";

        }

    }
}

private function pagination($scope, $keyword)
{
    $pages = 15;

    $pagination = '<ul>';
    for ($i = 0; $i < $pages; i++) {
        $pagination .= "<li><a id=\"a$i\" class=\"na\" href=\"?q=$keyword&scope=$scope&page=$i\">$i</a></li>";
    }
    $pagination .= '</ul>';

    return $pagination;
}
} 
```

要使用该函数，这是运行的 PHP。

```
require 'search.php';
$search = new BingSearch($query, $source, $query);
$search->getResults(); 
```

有没有人愿意为我指出正确的方向，这可能是我看了太久之后才错过的非常小的东西。

谢谢，

担。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:13:12.907

```
for ($i = 0; $i < $pages; i++) 
```

您忘记了 $，将 i++ 替换为 $i++。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:13:09.997

你的循环

```
for ($i = 0; $i < $pages; i++) {
        $pagination .= "<li><a id=\"a$i\" class=\"na\" href=\"?q=$keyword&scope=$scope&page=$i\">$i</a></li>";
    } 
```

您在循环中错过了 $

```
for ($i = 0; $i < $pages; $i++) {
        $pagination .= "<li><a id=\"a$i\" class=\"na\" href=\"?q=$keyword&scope=$scope&page=$i\">$i</a></li>";
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:15:15.730

You forgot the dollar sign for incrementing `$i`.

```
private function pagination($scope, $keyword)
{
    $pages = 15;

    $pagination = '<ul>';
    for ($i = 0; $i < $pages; $i++) {
        $pagination .= "<li><a id=\"a$i\" class=\"na\" href=\"?q=$keyword&scope=$scope&page=$i\">$i</a></li>";
    }
    $pagination .= '</ul>';

    return $pagination;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:19:13.473

In that line, replace `i++` with `$i++`. It is missing the $ character.

# android - 有没有办法在测试类中设置断点？

> ID：11501206
> 
> 赞同：5
> 
> 时间：2012-07-16T09:10:42.977
> 
> 标签：android, eclipse, service, junit

这是我的场景：

1.  我有一个 Android 服务 ( `CoreService`)
2.  我`ServiceTestCase<CoreService>`用来测试它
3.  `CoreService`产生一个线程并实例化几个具有侦听器/回调的类。

有什么方法可以在生成的线程和/或回调中设置断点并让 JUnit 在这些处停止？它只在 JUnit 项目或`CoreService`类中设置的断点处停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:11:31.853

尝试将断点挂起策略更改为**Suspend VM**：

![在此处输入图像描述](../Images/ed508bef5589598059e1d220806a208c.png)

要全局更改它：

![在此处输入图像描述](../Images/f410fefd4c9ab94ca9b36f717af717bd.png)

有关**断点暂停策略**的更多信息，请查看[此处](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/breakpoints/ref-suspendpolicy_option.htm)。

# python - Python numpy 错误或功能

> ID：11501214
> 
> 赞同：2
> 
> 时间：2012-07-16T09:11:06.420
> 
> 标签：python, numpy

这是错误还是功能？

```
import numpy as np
a=b=c=0
print 'a=',a
print 'b=',b
print 'c=',c

a = 5
print 'a=',a
print 'b=',b
print 'c=',c

b = 3
print 'a=',a
print 'b=',b
print 'c=',c

x=y=z=np.zeros(5)
print 'x=',x
print 'y=',y
print 'z=',z

x[2]= 10
print 'x=',x
print 'y=',y
print 'z=',z

y[3]= 20
print 'x=',x
print 'y=',y
print 'z=',z 
```

代码的输出告诉我，numpy 初始化是彼此的克隆，而 python 倾向于将它们视为自变量。

```
a= 0
b= 0
c= 0
a= 5
b= 0
c= 0
a= 5
b= 3
c= 0
x= [ 0\.  0\.  0\.  0\.  0.]
y= [ 0\.  0\.  0\.  0\.  0.]
z= [ 0\.  0\.  0\.  0\.  0.]
x= [  0\.   0\.  10\.   0\.   0.]
y= [  0\.   0\.  10\.   0\.   0.]
z= [  0\.   0\.  10\.   0\.   0.]
x= [  0\.   0\.  10\.  20\.   0.]
y= [  0\.   0\.  10\.  20\.   0.]
z= [  0\.   0\.  10\.  20\.   0.] 
```

我希望问题很清楚。这是 numpy 中的错误还是功能？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T09:16:52.063

这不是错误，也与 numpy 初始化无关，这是 python 的事情，`id`在您的情况下检查 x、y 和 z，它们指向同一个元素

您的代码正在做的是在同一行中进行多次初始化，发生这种情况时，只会创建 1 个对象并且所有变量都引用相同。

请参阅下面的示例，重新绑定如何帮助...

```
In [19]: a=b=[1,2,3]

In [20]: a
Out[20]: [1, 2, 3]

In [21]: b
Out[21]: [1, 2, 3]

In [22]: a[1]
Out[22]: 2

In [23]: a[1] = 99

In [24]: a
Out[24]: [1, 99, 3]

In [25]: b
Out[25]: [1, 99, 3]

In [26]: id(a)
Out[26]: 27945880

In [27]: id(b)
Out[27]: 27945880

In [28]: a = a[:]   # This is Rebinding 

In [29]: a
Out[29]: [1, 99, 3]

In [30]: id(a)
Out[30]: 27895568  # The id of the variable is changed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:17:13.280

这不是 numpy 的东西，它是标准的 Python 东西。列表也会发生同样的情况：

```
>>> a = b = []
>>> a.append(5)
>>> a
[5]
>>> b
[5]
>>> a[0] = 10
>>> a
[10]
>>> b
[10] 
```

当你这样做时：

```
>>> a = 5 
```

您正在将名称“a”重新绑定到不同的对象 - 但是当您进行切片分配时，您正在修改现有对象的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:16:57.587

这不是 numpy 的问题，这是一个典型的 Python 特性：一切都是对象，但有些对象是可变的，有些则不是。

因此，如果您这样做，则将*完全相同的对象*`x=y=z=["foo", "bar"]`绑定到三个变量。这意味着如果你通过改变它引用的列表来改变，你也改变了和指向的对象。*`x``y``z`*

# android - “错误：无法从”Android AVD 管理器中的临时目录解析属性

> ID：11501217
> 
> 赞同：1
> 
> 时间：2012-07-16T09:11:20.380
> 
> 标签：android, android-emulator, adb, adt, avd

我最近做了一些更新，现在我的 AVD 图像文件都不起作用。出于某种原因，它似乎依赖于 Windows 中的临时目录，所以如果它被删除，那么它就会发疯。AVD 模拟器旁边都有一个红十字，给出的错误是：

```
"Error: failed to parse properties from c:\users\admin\AppData\Local\Temp\temp-android-tool\.\.android\avd\Android_2_2_360x480.avd\config.ini" 
```

我怎样才能修复我的 avds，这样我就不必继续重新创建它们了？删除“临时”文件会破坏 avds 似乎很疯狂。

*   我尝试在 Google 和 Stack Overflow 上寻找这个，但找不到类似的问题。
*   这些模拟器没有修复选项。
*   使用以下命令重新启动 ADB： adb start-server adb kill-server 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:54:22.897

我认为问题出在两位 AVD 经理身上。Eclipse 中有一个，另外一个。当我开始使用 Eclipse 版本时，我注意到图像文件丢失了，所以我复制了它们。一切都很好，直到最近删除临时文件时才正常工作。我想当我在为 Eclipse 版本寻找放置它们的位置时，我一定已经将 avds 复制到了 temp 文件夹中。所以我应该把它们放在：C:\Program Files\eclipse.android\avd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:37:00.977

您还可以指定创建 AVD 的位置。[看到这个](http://developer.android.com/tools/devices/managing-avds-cmdline.html#DefaultLocation)

根据上面的链接，默认位置是用户的主目录。它不应该在临时目录中。

# wordpress - 注册新的小部件位置移动现有的小部件

> ID：11501218
> 
> 赞同：1
> 
> 时间：2012-07-16T09:11:21.193
> 
> 标签：wordpress, widget

这是我在很多场合都处理过的一般 Wordpress 问题，我似乎找不到解决它的好方法。

基本上和标题说的一模一样。您已经注册了大量的小部件位置，并且这些位置都包含小部件。您注册了一个新的小部件位置，当您检查后端时，新位置已经注册好，但是 Wordpress 已经忘记了哪些小部件应该去哪里并且它们都在错误的位置。您必须拖放才能重新排序。

如果客户端可以通过添加新页面来动态创建小部件位置，这不是一个大问题，但有点痛苦。举个例子；

在 functions.php 中，我为站点中的每个页面注册了一个新的小部件容器；

```
$sitepages = get_pages();
foreach ($sitepages as $pagesitem) {
        register_sidebar(array(
        'ID' => 'sidebar',
        'name'=>get_the_title($pagesitem->ID),
        'before_widget' => '<div class="sidebox">',
        'after_widget' => '</div>',
        'before_title' => '<h3>',
        'after_title' => '</h3>'
        )); 
} 
```

然后像这样在侧边栏中调用小部件；

```
 <?php
            $pagetitle = get_the_title($post->ID);
            if (function_exists('dynamic_sidebar') && dynamic_sidebar("$pagetitle")) : else : 
                // Our page specific widgets load in here.
            endif;
        ?> 
```

一切都很好，除了新页面的创建“重新组织”了一切。也许我很厚（它发生了！）非常感谢任何帮助。

编辑

Wordpress 将这些新注册的小部件位置放置在何处似乎没有押韵或原因，它们只是出现在现有小部件中看似随机的位置。如果它把新的小部件放在列表的底部，那么它就可以了——正如你所期望的那样它是空的。如果它将它放在列表的中间，则包含在其他位置的所有其他小部件都将移动到相邻的小部件位置。

# css - 子元素上的 z-index 问题

> ID：11501221
> 
> 赞同：0
> 
> 时间：2012-07-16T09:11:30.363
> 
> 标签：css, z-index, parallax.js

我正在尝试使用 jquery.scrolling-parallax.js 作为视差背景。

背景元素的 z-index 为 333。

在网站上的所有元素上，我可以通过使用下方或上方的 z-indexes 使背景位于元素的后面或前面。

但我的标题有问题。

我有一个固定位置和 z-index 232 的标题，可以在上面看到背景。

但是，在标题 div 中，我还有另外两个包含徽标和菜单的 div。这些是 position:relative 并具有 z-index:999 因为我不希望背景位于它们之上。但这不起作用！

如果我将整个标题 div 切换到超过 333 的 z-index 它工作正常，背景出现在它后面。但我只希望它落后于那些子 div！

感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:18:04.020

如果我正确理解您的问题，我认为问题在于您的徽标和菜单不应该使用位置：相对。尝试使用不同类型的定位或将其 div 放在标题 div 之外。

通过使用相对，孩子可能正在使用标题 divs z-index。

# c# - 如何在日期字段sql server中仅插入日和月或月和年或任何组合

> ID：11501222
> 
> 赞同：0
> 
> 时间：2012-07-16T09:11:38.250
> 
> 标签：c#, asp.net, sql-server-2008-r2

我在数据库中有一个数据类型为日期的出生日期字段。我的 aspx 页面中有三个相同的下拉列表。一天下拉菜单，一个月下拉菜单，一年下拉菜单。如果用户只选择日和月或月和年或任何组合。如何将其插入到数据库的日期字段中。

如果用户只选择日期和月份或月份和年份或任何组合。如何将其插入数据库？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:17:51.690

两种选择：

*   将日、月和年保存在数据库中的单独（可为空）字段中
*   在数据库中保留一个`DateTime`字段，在未提供时用“虚拟”数据填充它，并有一个单独的字段来指示提供了哪些信息

第一个对我来说听起来更明智——这并不是说你真的可以用“1976 年某个月的 19 日”来做很多与日期相关的合理查询，这意味着你的数据*准确地*代表了用户指定的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:19:40.670

在用户选择所有字段之前，不允许用户提交答案。这是标准的方式。你可以使用验证器。或者试试这个（我不确定） 1\. 保持日期字段为空。和/或

2.If (txtDate.Text = "") Then cmd.Parameters("@Date").Value = sqldatenull

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:33:56.787

0000 不是有效年份；首先，我将重新审视输入表单的要求，以决定什么是可选的和可能的添加验证。

如果只有年份是可选的，那么您可以简单地将 0001 存储为年份。

```
dt = new DateTime(Math.Max(1,dob_year), dob_month, dob_day); 
```

如果日和/或月是可选的，则 DateTime 不是正确的数据类型，因为您无法存储空值，因此为日、月、年设置单独的字段是唯一的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:12:12.993

日期总是需要一天、一个月和一年，因为它指的是过去、现在或将来的实际一天。

所有日期都必须在 01/01/0001 到 31/12/9999 的范围内，因此无法存储 0000 年。

对于您的问题，有两种选择：

*   将日、月和年存储在三个单独的字段中。
*   以通常的方式存储日期，将日期的未指​​定部分设置为一些默认值。然后使用带有 tinyint 的第二个字段来存储三位标志，这些标志告诉您日期的哪些部分有效，哪些无效

# javascript - epub3 使用 html + JS

> ID：11501223
> 
> 赞同：2
> 
> 时间：2012-07-16T09:11:45.030
> 
> 标签：javascript, html, epub, epub3

我正在寻找一些方法来保护我的内容不被复制，然后我得到了 epub3。

我正在使用 Html5 + js + CSS 开发移动应用程序，我可以使用 js + html 使用 epub3 zip 文件吗？如果是，我如何在其中添加 epub 阅读器。

我的问题可能是错误的 b/c 我对此了解不多。

需要专家的意见。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:25:09.407

我认为这不会起作用，原因有几个：

1.  epub 是电子书的一种文件格式。目前，只有电子书阅读器应用程序可以阅读这种格式。将阅读器嵌入文件不是解决方案，因为您需要阅读器应用程序来读取文件。
2.  epub3 是 epub 格式的最新版本，它确实包含了*JavaScript*等所有用于交互的闪亮噱头，而且我认为它还包含许多 HTML5 功能。但是目前没有支持 epub3 中所有这些功能的阅读器应用程序。
3.  epub3 仍然是一个 zip 存档，任何能够读取 zip 文件格式的应用程序都可以打开它。如果你想保护你的内容，当然可以使用 zip 格式的加密机制。但是，当您希望用户可以访问内容时，您需要实现自己的解密机制，或者您可以使用现有方案（Adobe DRM 是主要方案）。在这种情况下，您需要使用 Adob​​e 登录并使用他们的服务进行加密，我怀疑这将是有代价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-24T18:03:24.873

IDPF 已经指定了一个用于 ePub3 的开源轻量级 DRM，称为 LCP，但我们仍在等待它在 Readium SDK 中的实施。完成后，您将免费获得解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-25T19:44:00.230

If you make it readable, it cannot be also secured too from reading. Furthermore DRMs are not very effective. Streaming content is now the state of the art of content serving, and it is not immune to copying.

Is closing contents the key for your business? Maybe you can reimaginate your business process in a more profitable way.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T20:21:28.400

Currently only Adobe supplies anything close to an industry-standard for encrypting epub files (see Adobe Content Server). It's very expensive, and proprietary. The epub spec does offer guidelines on how to use encryption, but it would require creating your own brand of DRM, which would then only work on your own reading system.

Epub 2 and 3 are web-friendly - they are usually HTML in a zip file. Epub 3 supports a subset of HTML 5 and some scripting capability. If you offered an online reading system, you could implement some sort of client-side decryption as the recently relaunched Mega upload service has done. It would be easily cracked, just so you know, unless you required the user to supply file-specific encryption keys that no one else knew.

Currently the best approach is to avoid DRM for epub files. Some publishers are imprinting the user's email address in the epub file as a deterrent to piracy, and others are putting files behind logins (access control). Both are better, IMHO, than paying Adobe's very high fees for the use of their proprietary content server.

# asp.net-mvc - 从asp.net mvc中的部分视图做一个完整的非ajax帖子

> ID：11501230
> 
> 赞同：0
> 
> 时间：2012-07-16T09:12:13.487
> 
> 标签：asp.net-mvc, postback, partial-views

这更像是一个不感兴趣的问题，而不是一个迫切需要答案的问题，但我一直试图找到一个很好的例子来说明如何从 asp.net MVC 的部分视图中处理完整的回发。一个明显的例子是每个页面上都有一个小的登录表单。您可以通过使用 jquery 的异步回发轻松完成此操作，但我想知道是否有一种方法可以在不使用 javascript 的情况下做到这一点。我知道这可能是迂腐的，但我不喜欢假设客户端启用了 javascript 的想法，特别是在这个时代，响应式设计/渐进式增强是流行语，所以让你登录到 javascript 意味着简单的移动设备上的任何人都无法使用它，因为他们的设备可能不支持它。

任何人都有任何想法/例子来说明如何做到这一点？在 Web 表单中实现是如此简单的事情，我不敢相信它像在 MVC 中听到的那样棘手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:26:25.017

您只需要在视图中创建一个表单，仅此而已。该表单将 POST 到它的控制器操作方法并生成一个完整的页面刷新（如果这就是你所说的完整回发的意思——我猜它是），不管它是否是部分的。

你可以在一个 MVC 视图上有多个表单，每个表单都会给你一个完整的页面刷新，而对于 WebForms，模式是每个页面一个主表单。

# optimization - 如何防止内核模块中的 gcc 优化？

> ID：11501236
> 
> 赞同：1
> 
> 时间：2012-07-16T09:12:29.927
> 
> 标签：optimization, module, kernel, pragma

我试图了解如何在使用 gcc 编译时禁用内核模块的代码优化。我试着给这样的编译指示

```
#pragma optimize("",off)
void rt_ct_use_cpu(unsigned long long n_cicle){
    unsigned long long i;
    for(i=0;i<n_cicle;i++);
}
#pragma optimize("",on) 
```

但是编译器会发出警告说它将忽略那些编译指示。我还尝试制作一些避免编译器滚动循环的东西

```
void rt_ct_use_cpu(unsigned long long n_cicle){
    unsigned long long i;
    unsigned long long time=0;
    unsigned long long timebase = rt_get_cpu_time_ns();
    for(i=0;i<n_cicle;i++) {
        time += rt_get_cpu_time_ns();
        time -= timebase;
    }
} 
```

但在这种情况下，cicle 有多长（n_cicle 有多大）并不重要，程序将始终运行相同的时间（几毫秒）

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T21:35:08.927

请参阅 GCC pragma 文档[6.59.13 Function Specific Option Pragmas](http://gcc.gnu.org/onlinedocs/gcc/Function-Specific-Option-Pragmas.html) ，如`#pragma GCC optimize ("O0")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-28T21:56:31.090

也许事情已经改变了，但我只是将 -O0 添加到我的内核模块 Makefile 中，它能够构建和运行，我可以用它进行调试，没有任何东西得到优化，调试器可以显示所有变量，并逐行跟踪预期的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-05T16:09:16.367

您不能或至少不应该在 Linux 内核中这样做。至少需要 -O1 以确保内联和其他基本优化器运行。例如，某些汇编代码（如`setjmp`函数）必须内联，否则它们将无法正确执行。

# statistics - 测试误差低于训练误差

> ID：11501240
> 
> 赞同：3
> 
> 时间：2012-07-16T09:12:36.077
> 
> 标签：statistics, machine-learning, genetic-programming

非常感谢您对此的意见。我正在借助遗传编程构建回归模型。

如果我在测试数据上的 RMSE（远）低于我在训练数据上的 RMSE（1:5 的数据比），我应该担心吗？

测试数据是从一组 24 个数据点中随机抽取的，无需替换。该模型是使用遗传编程技术构建的，因此随着我最小化由 GP 树中的节点数正则化的训练 RMSE，特征、建模框架等的数量会有所不同。

模型是否欠拟合？或者我应该最小化 MSE 而不是 RMSE（我认为这与 MSE 为正数相同，并且假设优化器足以找到最小值，则 MSE 的最小值将与 RMSE 的最小值一致）？

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:49:49.197

因此，您的模型在 24 个数据点中的 20 个上进行了训练，并在剩余的 4 个数据点上进行了测试？

对我来说，听起来您需要（更多）更多数据，因此您可以拥有更大的训练集和测试集。我对您的测试集的低性能并不感到惊讶，因为您的模型似乎无法从这么少的数据中学习。根据经验，对于机器学习，您永远不会拥有足够的数据。是否有可能收集更大的数据集？

# apache - SetEnv TZ vs date.timezone

> ID：11501242
> 
> 赞同：5
> 
> 时间：2012-07-16T09:12:46.940
> 
> 标签：apache, configuration, timezone, php

**在 Apache 的SetEnv TZ** (.htaccess) 和 PHP 的**date.timezone** (php.ini)中设置时区有什么区别？我无法检测到**SetEnv TZ**是如何被使用的。我尝试将**SetEnv TZ**设置为一个值，**将 date.timezone 设置**为另一个时区，但只有后者**date.timezone**似乎对网页有任何影响。我还想知道 Apache configuratoins 和 PHP 配置如何影响服务器，例如哪个覆盖哪个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:19:23.620

URL [http://www.php.net/manual/en/function.date-default-timezone-get.php](http://www.php.net/manual/en/function.date-default-timezone-get.php)应该会给你确切的答案；简而言之（假设 php > 5.4.0 的最新版本），它会检查 php 中带有 date_default_timezone_set() 的集合，如果未设置，则检查 php.ini 中 date.timezone 的值。如果那个没有设置 - 它放弃了。所以 TZ 被忽略。

或者换句话说，对于 > 5.4.0，环境变量 TZ 永远不会被咨询。

对于 5.4.0 及之前的版本 - 未设置默认值/ini 时会参考它。有关确切顺序和详细信息，请参见上面的 URL。

# c++ - FreeType 中的 Unicode 问题

> ID：11501251
> 
> 赞同：6
> 
> 时间：2012-07-16T09:12:59.070
> 
> 标签：c++, unicode, fonts, freetype

所以，我有一个解析xml的实现，其中包括维基百科主页的位置和字符串。解析是使用 rapidxml 完成的，然后通过[http://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/)将字符串从 UTF-8 转换为 UTF-32 。然后在 freetype 中使用 UTF-32 代码：

```
unsigned long c = FT_Get_Char_Index(face,*p);
FT_Load_Glyph(face,c,FT_LOAD_RENDER); 
```

其中 *p 是 UTF-32 字符代码。然后在 OpenGL 中渲染此字形。

现在，我似乎无法使用 cryllic 字符，也无法使用任何中文、日文或越南文，我确信 *p 对应于正确的代码，我会感谢我能得到的任何指示。

对于这些字体，使用了 Microsoft 的 arial.ttf，来自[Arch linux 包](https://aur.archlinux.org/packages.php?K=ttf-ms-fonts&SeB=x)以及我在 fontviewing 程序中看到的内容，它应该包含我想要的字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T09:56:01.647

有两点建议：

首先，您是否调用[了 FT_Select_Charmap](http://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Select_Charmap)来指定您使用的是 Unicode 编码？

```
FT_Select_Charmap(face , ft_encoding_unicode); 
```

其次，并非所有 Arial 字体都具有所有字符，并且某些字体查看器（无论如何在 Windows 上）可能会通过自动替换来自不同面的字形来误导。如果你能找到它，试试[ArialUni.ttf 。](http://www.microsoft.com/typography/fonts/font.aspx?fmid=1081)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-19T22:51:13.590

不要忘记在加载面部后立即设置字体大小。

```
FT_Error err =  FT_Set_Pixel_Sizes(face, (width), (height)); 
```

# android - 我可以旋转 3D 汽车对象吗

> ID：11501252
> 
> 赞同：4
> 
> 时间：2012-07-16T09:13:00.577
> 
> 标签：android, 3d

我可以在不使用任何OpenGL 或任何第三派工具的情况下使用旋转动画吗？我只想在 fix layout.you 中应用顺时针旋转的 3D 汽车对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:15:26.893

除非你有某种模拟 3D 汽车的精灵动画序列，否则老实说，我不明白你是如何做到的。虽然我可能错了，并且可能错过了 android 中的某些内容，但对我来说，这是一个经典的 openGL 情况。

精灵动画也指任何类型的 2D 图像序列，例如动画 gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T21:59:20.843

```
1) Well, you first have to set the car in 3D space;
To model a 3D object, you must define all the vertices of the car as if you were modeling with points and after , linking this point you get the car in wireframe.

Pont  A {x = 3, y = 10, z = 8}
Point B {x = 5, y = 12, z = 2}
Point C {x = 6, y = 40, z = 6}
Point D {x = 7, y = 12, z = 3}
Point E {x = 3, y = 10, z = 8}
...

2) After modeling the car in points, you must define the links of points to form lines, there you have called wireframe modeling, if you want to modeling shapes is different, but with the wireframe already a good idea of the object in the real world.

Line AB = Point A -> Point B
Line BC = Point B -> Point C

3) To spin perfectly the car, you should position it in the center of coordinates,applying in each point the formula translation T with measure the match the distance to the subject from the center at the origin of the axes.

New point x:
x = x - Tx 
New point y;
y = y - Ty
New point z:
z = z - Tz

4) With the car in position to  spin it into an angle "g" should be applied to each point the rotation transformation, the formula is:

Find the new point x:
xt = (x * 1) (* y 0) (z * 0);
Find the new point y:
yt = (X * 0) (y * Math.cos (g)) (z * (Math.sin-(g)));
Find the new point z:
zt = (X * 0) (y * Math.sin (g)) (z * Math.cos (g));

5) After applying the rotation effect, you must return the object to its point of origin, making a reverse translation to step 3.

New point x:
x = Tx x
New point y;
y = y Ty
New point z:
z = z Tz

This is a  roughly explanation but is the most basic way, of course it has more complex formulas that are faster these changes, but to become more didactic I put this way. 
```

# ruby-on-rails - 数据表清除过滤器中的搜索内容而不将 statesave 设置为 false

> ID：11501260
> 
> 赞同：1
> 
> 时间：2012-07-16T09:13:25.177
> 
> 标签：ruby-on-rails

```
$("#table-list").dataTable({
    "bJQueryUI": true,
    "bStateSave": true,
    "bFilter": true,
    "bInfo": true,
    "bSort": true,
    "bPaginate": true,
    "sPaginationType": "full_numbers"

  }); 
```

我在我的 RAILS 应用程序中使用了数据表。在这里假设用户在第 3 页，即使刷新后我也需要它在第 3 页..但我希望删除过滤器中的内容。设置 stateSave 会让我的分页工作.. 但它不会在搜索栏中清除内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T22:42:42.910

尝试使用[stateSaveParams](https://datatables.net/reference/option/stateSaveParams)仅加载您想要的内容。

```
$("#table-list").dataTable({
   "bJQueryUI": true,
   "bStateSave": true,
   "bFilter": true,
   "bInfo": true,
   "bSort": true,
   "bPaginate": true,
   "sPaginationType": "full_numbers",
   "sstateSaveParams": function (settings, data) {
      data.search.search = "";
      } 
```

});

# javascript - 通过 javascript 更改 QML GridView 模型

> ID：11501266
> 
> 赞同：2
> 
> 时间：2012-07-16T09:13:40.847
> 
> 标签：javascript, qt, qml

我有一个 ListView 和一个 GridView。想象一下：第一个视图显示类别，第二个视图显示每个类别中的文章。当ListView的当前索引通过javascript更改时，我想动态更改GridView的数据模型。我们如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T01:28:30.983

您只需要分配一个新模型。这是一个基于 ListModel 文档的示例。这个模型在左边的ListView中展示了模型中的果实。单击委托时，它将右侧的 GridView 模型设置为`attributes`角色定义的列表。

```
import QtQuick 1.0

Item {
    width: 600; height: 400

    ListView {
        width: 300; height: 400
        model: fruitModel
        delegate: Text {
            font.pixelSize: 20
            text: name
            width: 300
            MouseArea {
                anchors.fill: parent
                onClicked: grid.model = attributes
            }
        }
    }

    GridView {
        id: grid
        x: 300; width: 300; height: 400
        delegate: Text {
            text: description
            font.pixelSize: 20
        }
    }

    ListModel {
     id: fruitModel

     ListElement {
         name: "Apple"
         cost: 2.45
         attributes: [
             ListElement { description: "Core" },
             ListElement { description: "Deciduous" }
         ]
     }
     ListElement {
         name: "Orange"
         cost: 3.25
         attributes: [
             ListElement { description: "Citrus" }
         ]
     }
     ListElement {
         name: "Banana"
         cost: 1.95
         attributes: [
             ListElement { description: "Tropical" },
             ListElement { description: "Seedless" }
         ]
     }
    }
} 
```

这是嵌套模型的示例，但还有其他可能性。例如，如果您从数据库中获取数据，也许您只需要更改 GridView 模型使用的查询，而不是设置不同的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T01:34:07.907

取决于你的模型。假设`CategoriesModel`有`category`角色，`ArticlesModel`有`setCategory`方法：

```
ListView {
    model: CategoriesModel {}
    delegate: Item {
        MouseArea {
            anchors.fill: parent
            onClicked: {
                grid_view.model.setCategory(model.category)
            }
        }
        // ...
    }
}

GridView {
    id: grid_view
    model: ArticlesModel {}
    // ...
} 
```

# python - BeautifulSoup：从 html 获取 css 类

> ID：11501268
> 
> 赞同：8
> 
> 时间：2012-07-16T09:13:45.903
> 
> 标签：python, html, css, beautifulsoup

有没有办法从 HTML 文件中获取 CSS 类`BeautifulSoup`？示例片段：

```
<style type="text/css">

 p.c3 {text-align: justify}

 p.c2 {text-align: left}

 p.c1 {text-align: center}

</style> 
```

完美的输出将是：

```
cssdict = {
    'p.c3': {'text-align': 'justify'},
    'p.c2': {'text-align': 'left'},
    'p.c1': {'text-align': 'center'}
} 
```

虽然这样的事情会做：

```
L = [
    ('p.c3', {'text-align': 'justify'}),  
    ('p.c2', {'text-align': 'left'}),    
    ('p.c1', {'text-align': 'center'})
] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T10:16:48.237

BeautifulSoup 本身根本不解析 CSS 样式声明，但您*可以*提取这些部分，然后使用专用的 CSS 解析器解析它们。

根据您的需要，有几个可用于 python 的 CSS 解析器；我会选择[cssutils](http://cthedot.de/cssutils/)（需要 python 2.5 或更高版本（包括 python 3）），它是支持最完整的，也支持内联样式。

其他选项是[css-py](https://code.google.com/p/css-py/)和[tinycss](http://packages.python.org/tinycss/)。

要获取和解析所有样式部分（以 cssutils 为例）：

```
import cssutils
sheets = []
for styletag in tree.findAll('style', type='text/css')
    if not styletag.string: # probably an external sheet
        continue
    sheets.append(cssutils.parseStyle(styletag.string)) 
```

然后`cssutil`你可以组合这些，解析导入，甚至让它获取外部样式表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-27T22:28:56.127

BeautifulSoup 和 cssutils 组合可以很好地解决问题：

```
 from bs4 import BeautifulSoup as BSoup
    import cssutils
    selectors = {}
    with open(htmlfile) as webpage:
        html = webpage.read()
        soup = BSoup(html, 'html.parser')
    for styles in soup.select('style'):
        css = cssutils.parseString(styles.encode_contents())
        for rule in css:
            if rule.type == rule.STYLE_RULE:
                style = rule.selectorText
                selectors[style] = {}
                for item in rule.style:
                    propertyname = item.name
                    value = item.value
                    selectors[style][propertyname] = value 
```

BeautifulSoup 解析 html 中的所有“样式”标签（头部和正文），.encode_contents() 将 BeautifulSoup 对象转换为 cssutils 可以读取的字节格式，然后 cssutils 将各个 CSS 样式一直解析到属性/值通过 rule.selectorText 和 rule.style 级别。

**注意：** “rule.STYLE_RULE”只过滤掉样式。[cssutils 文档](https://pythonhosted.org/cssutils/index.html)详细介绍了过滤媒体规则、评论和导入的选项。

如果你把它分解成函数会更干净，但你明白了要点......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:43:34.813

tinycss 解析器用于在 python 中显式解析 CSS。BeautifulSoup 支持 HTML 标签，除非使用正则表达式，否则无法搜索特定的 css 类。这甚至支持一定数量的 CSS3。

[http://packages.python.org/tinycss/](http://packages.python.org/tinycss/)

**PS：**但是，它只能从 python 2.6 开始工作。

# actionscript-3 - 在 AS3 中编程的正确方法是什么？

> ID：11501275
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:14:15.207
> 
> 标签：actionscript-3, flash, actionscript

我阅读了很多关于 AS3 的书籍和视频，它们都教授了我可以驾驭和使用的非常有趣的技术。但是，我有点困惑，因为我从不同的来源看到了相互矛盾的不同技术。例如，我见过一些开发人员在时间线内编写所有代码并以这种方式处理。其他时候，我看到开发人员在 Flex/Flash Builder/FlashDevelop 的 .as 文件中处理他们的代码。我知道没有“对或错”的方法，但专业人士更喜欢的方法是什么？

到目前为止，我只是使用我的 .FLA 来保存我的资产，并且我在 .AS 中编写了我的所有代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:20:43.903

大型项目应始终努力避免使用时间线代码，因为它很快就会变得非常难以维护、理解和版本控制。在这些项目中，FLA 主要用于保存库资产，然后通过 swc 文件将其链接到项目中。

不过，可以将 FLA 时间线代码用于横幅之类的小东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:31:30.080

正确的方法是将面向对象编程 (OOP) 与设计模式 (DP) 结合使用。

编辑：

来自维基百科：

> 设计模式是软件设计中给定上下文中常见问题的通用可重用解决方案。

在我看来，设计模式是 OOP 不可或缺的一部分（没有 DP，您将失去面向对象语言的大部分优势）。

您可以从这本很棒的书中学习 AS3 的设计模式：[ActionScript 3.0 Design Patterns: Object Oriented Programming Techniques](https://rads.stackoverflow.com/amzn/click/com/0596528469)。这本书有一个活跃的[博客](http://www.as3dp.com/)，里面有很多有趣的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T18:19:21.123

如果可以的话，绝对尽量避免使用时间线代码。它真的可以成为阅读或扩展的噩梦。使用类也是开始从 Flash 分支的好方法。当您习惯于引用外部文件时，开始使用诸如[MVC（模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）之类的设计模式很重要。它使维护、调试、扩展和移交项目更容易。

# python - Python：比较两个字典的键并更新一个的值

> ID：11501278
> 
> 赞同：0
> 
> 时间：2012-07-16T09:14:30.130
> 
> 标签：python, replace, compare

我有两个具有相同键的字典：

```
d={123:'bla', 456: blabla}
e={123:'bla', 456:''} 
```

字典 e 有一些空值，如果是这种情况并且 ID 相同，我想用 d 中的值替换空值。

我正在寻找这样的东西：

```
if d.keys()==e.keys():
    e.values==d.values()
print e 
```

但是，我在 Python 文档中找不到任何比较单个键和更新值的内容。

有人可以帮助或指点我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:19:37.440

如果您不介意用

```
e.update(d) 
```

或者如果您想确保只覆盖包含空值的那些，那么您将需要遍历您的字典以找到它们，并有选择地更新

```
# Python 2.x
for key, value in e.iteritems():
    if value == '':
        e[key] = d.get(key)

# Python 3.x
for key, value in e.items():
    if value == '':
        e[key] = d.get(key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:21:32.590

您还可以使用 dict 理解：

```
f = {k:(e[k] or d[k]) for k in e.keys()} 
```

`or`如果第一项为空，则计算第二项。当然，您必须确保两者都使用相同的密钥。

# ruby-on-rails - 如何按时轮换日志文件？

> ID：11501280
> 
> 赞同：0
> 
> 时间：2012-07-16T09:14:39.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3

现在在环境中的 production.rb 中我编写代码

```
config.logger = Logger.new("#{Rails.root.to_s}/log/production.log", 'daily') 
```

因此，日志文件将在每天午夜轮换。

如何编写用于旋转日志的代码`define time`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:54:35.353

[https://stackoverflow.com/a/4883967/1241447](https://stackoverflow.com/a/4883967/1241447) - 使用系统 logrotate.d

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#method-c-new](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#method-c-new) - 使用内置功能

# c# - 数据库和一个新的 c# windows 窗体应用程序我使用了一个 datagridview 并加入它来访问数据库

> ID：11501282
> 
> 赞同：2
> 
> 时间：2012-07-16T09:14:45.390
> 
> 标签：c#, database, datagridview

我创建了一个新的访问数据库和一个新的 c# windows 窗体应用程序。我使用了一个 datagridview 并加入它来访问数据库。现在，当我更改为数据库时，它会显示在 gridview 中，但是当您更改网格视图时，尽管我已经检查了编辑删除和添加，但它们不会保存在数据库中，我的意思是当您关闭程序并再次打开它时更改尚未保存。

# javascript - Uglify-JS 错误：连接然后缩小 select2 时出现意外字符“”

> ID：11501289
> 
> 赞同：5
> 
> 时间：2012-07-16T09:14:57.090
> 
> 标签：javascript, uglifyjs

我将[select2](http://ivaynberg.github.com/select2/)连接到我的其他 javascript 文件，如下所示：

```
cat scripts/jquery-timeago.js scripts/jquery-autosize.js scripts/select2.js > public/vendors.js
uglifyjs -nc -o public/vendors.min.js public/vendors.js 
```

但是，我发现了一个问题，即只有在连接之后才会在前面加上一个空白字符`select2`，这会导致 UglifyJS 中的解析错误。如果我转到`select2`连接文件的开头并按退格键，则会删除一个空字符并且缩小工作正常。

到底是怎么回事？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T21:28:31.363

刚刚在 select2 github repo 上打开了[问题 #306 。](https://github.com/ivaynberg/select2/issues/306)

`select2.js`使用带有 BOM编码的[UTF8](http://en.wikipedia.org/wiki/UTF-8#Byte_order_mark)保存。当`select2.js`与其他文件连接并传递给时`uglifyjs`，`uglifyjs`当涉及到 BOM 字节时会中断。

要解决此问题，只需以 UTF8 编码（无 BOM）保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T13:45:18.700

我看到这已被标记为已回答。不过，我找到了另一种方法。

我需要发送 uglify 两个选项：ascii_only 和 quote_keys。将两者都设置为 true。这也有效

# c# - Html Agility - 通过名称标签获取价值

> ID：11501290
> 
> 赞同：1
> 
> 时间：2012-07-16T09:14:57.360
> 
> 标签：c#, parsing, html-parsing, html-agility-pack

我需要从输入中获取一个值，但是 id 总是会改变，只有名字是一样的。在谷歌上没有找到任何东西来通过名称标签提取值。

例子：

```
<input type="hidden" name="data[_Token][key]" value="5aafaee2dd21555c2615fd26c0cccd0f1b2c3018" id="Token749368899" /></div> 
```

我期待一些答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:22:11.313

```
var input= doc.DocumentNode
              .Descendants("input")
              .First(n=>n.Attributes["name"].Value=="data[_Token][key]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:19:06.383

您可以尝试获取 Id 的第一部分，如果它总是`Token#####`

```
//input[starts-with(@id, 'Token')] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T09:21:18.760

试试这个

var dummy = document.getElementsByName("data[_Token][key]");

这将返回名称为“data[_Token][key]”的元素。

# javascript - 自定义 Div 滑块速度过快，但仅在从另一个浏览器选项卡返回时

> ID：11501292
> 
> 赞同：2
> 
> 时间：2012-07-16T09:15:00.630
> 
> 标签：javascript, jquery, jquery-animate, browser-tab

当我查看运行中的代码时，没有任何问题。但是一旦我在另一个浏览器选项卡上花一些时间，然后返回到正在运行的代码，时间/速度就太快了。

这是jQuery：

```
var divId = 1;
var lp = 0;

$(document).ready(function (){

    setInterval(function()
        {
        //<![CDATA[

            if(divId < 6)
            {
                $('.main-banner').animate({ left: lp },400);

                $(".first-icon-inner").removeClass("active-icon");
                $("#banner-"+divId+" div:first").addClass('active-icon');

                    divId++;
                    lp-=550;

            }
            else
            {
                lp = 0;
                divId=1;

                $('.main-banner').animate({ left: lp },400);

                $(".first-icon-inner").removeClass("active-icon");
                $("#banner-"+divId+" div:first").addClass('active-icon');

            }
            //]]>

    }, 3400);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:33:58.377

jQuery < 1.6.3 存在一个错误 ...摘自[jQuery 1.6.3 发行说明](http://blog.jquery.com/2011/09/01/jquery-1-6-3-released/)：

> 当我们在 1.6 版本中添加支持时，我们对浏览器的 requestAnimationFrame API 寄予厚望。但是，从那时起，我们收到的最大投诉之一与 requestAnimationFrame 在选项卡不可见时的行为方式有关。当标签是不可见的“堆栈”时，启动的所有动画都不会执行，直到将选项卡重新置于焦点为止。然后他们都以曲速动画！我们已经移除了对这个 API 的支持（它不会影响你调用 jQuery 动画功能的方式），并计划将它合并到 jQuery 的未来版本中。

我建议您更新到更新的版本...即 jQuery => 1.6.3

# c# - 将对象序列化为 XML

> ID：11501294
> 
> 赞同：5
> 
> 时间：2012-07-16T09:15:08.363
> 
> 标签：c#, xml-serialization

对于我使用的二进制序列化

```
public ClassConstructor(SerializationInfo info, StreamingContext ctxt) {

    this.cars = (OtherClass)info.GetValue("Object", typeof(OtherClass));
}
public void GetObjectData(SerializationInfo info, StreamingContext ctxt) {
    info.AddString(this.name);
    info.AddValue("Object", this.object);
} 
```

我想为 XML 序列化做同样的事情（类实现 IXmlSerializable 接口，因为私有属性设置器），但我不知道如何将对象放入序列化程序（XmlWriter 对象）。

```
public void WriteXml( XmlWriter writer ) {
    writer.WriteAttributeString( "Name", Name );
    writer. ... Write object, but how ???
}
public void ReadXml( XmlReader reader ) {
    this.Name = reader.GetAttribute( "Name" );
    this.object = reader. ... how to read ??
} 
```

[也许我可以使用这样](https://stackoverflow.com/a/4123648/639956)的东西

```
XmlSerializer xsSubmit = new XmlSerializer(typeof(MyObject));
var subReq = new MyObject();
StringWriter sww = new StringWriter();
XmlWriter writer = XmlWriter.Create(sww);
xsSubmit.Serialize(writer, subReq);
var xml = sww.ToString(); // Your xml 
```

但也许有更简单的方法，它只使用我从 WriteXml 方法参数获得的 XmlWriter 对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:18:15.730

下载[FairlyCertain A/B 测试库](http://www.fairtutor.com/fairlycertain/)。

在出色的代码中，您会发现一个 XML 序列化程序类，在`SerializationHelper.cs`.

摘录：

```
 /// <summary>
    /// Given a serializable object, returns an XML string representing that object.
    /// </summary>
    /// <param name="obj"></param>
    /// <returns></returns>
    public static string Serialize(object obj)
    {
        XmlSerializer xs = new XmlSerializer(obj.GetType());
        using (MemoryStream buffer = new MemoryStream())
        {
          xs.Serialize(buffer, obj);
          return ASCIIEncoding.ASCII.GetString(buffer.ToArray());
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:55:18.350

我决定按照我写问题的方式进行 - 使用 XmlWriter 对象，无论如何我都必须使用它，即使我采用 Ofer Zelig 的方式。

```
namespace System.Xml.Serialization {
    public static class XmlSerializationExtensions {
        public static readonly XmlSerializerNamespaces EmptyXmlSerializerNamespace = new XmlSerializerNamespaces(
            new XmlQualifiedName[] {
                new XmlQualifiedName("") } );

        public static void WriteElementObject( this XmlWriter writer, string localName, object o ) {
            writer.WriteStartElement( localName );
            XmlSerializer xs = new XmlSerializer( o.GetType() );
            xs.Serialize( writer, o, EmptyXmlSerializerNamespace );
            writer.WriteEndElement();
        }

        public static T ReadElementObject< T >( this XmlReader reader ) {
            XmlSerializer xs = new XmlSerializer( typeof( T ) );
            reader.ReadStartElement();
            T retval = (T)xs.Deserialize( reader );
            reader.ReadEndElement();
            return retval;
        }
    }
} 
```

# jquery - 如何完全按照选择列表中的选定选项填写文本字段..？

> ID：11501296
> 
> 赞同：0
> 
> 时间：2012-07-16T09:15:15.467
> 
> 标签：jquery, jsp

我有一个jsp页面。我有一个数字选择列表。谁有一些默认值，但这是动态生成的。我也有一个文本字段。我希望文本字段应完全按照选择列表中的选定选项自动填充。我正在使用 jquery 来做到这一点。

但是我看到当 jsp 页面加载时，选择列表以其默认值存在，但文本字段为空白。仅当我更改选项时，文本字段才会填充所选选项。我希望在页面加载时文本字段也像选择列表一样填充动态生成的选项。

我在脚本标签内的 jquery 代码是：

```
$(document).ready(function(){
                $("#select_id").change(function() {
                    $("#textfield_id").val($("#select_id option:selected").text());
                });}); 
```

有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:16:18.973

```
$(document).ready(function() {
    $("#select_id").change(function() {

         // this -> refers to the select field

        $("#textfield_id").val( this.value );
        // or
        $("#textfield_id").val( $('option:selected', this).text() );
    }).change(); // .change() is for trigger an initial change event after page load
                 // to update the textfield value
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:17:13.093

就像名字所暗示的那样，[`.change()`](http://api.jquery.com/change/)只会在元素的值发生变化时触发——在绑定到更改事件之前，只需将文本字段初始化为 DOM 准备好的下拉列表的值。此外，考虑使用[jQuery`.val()`](http://api.jquery.com/val/)方法获取/设置表单元素的值。

```
$(document).ready(function(){

    $("#textfield_id").val($("#select_id").val());

    $("#select_id").change(function() {
        $("#textfield_id").val($(this).val());
    });
}); 
```

# windows-7 - mklink 上的访问被拒绝

> ID：11501297
> 
> 赞同：4
> 
> 时间：2012-07-16T09:15:25.623
> 
> 标签：windows-7, windows-server-2008, mklink

我试图让符号链接在网络驱动器上工作。

我已经尝试过关于已经提出的问题的建议，例如以管理员身份运行并检查目录是否已经存在。不幸的是，它仍然给我以下错误：

```
C:\Windows\system32>mklink /d \\myserver\someLink \\myserver\mydir
Access is denied. 
```

有什么想法可以让这个工作吗？本地机器运行 windows 7，远程机器运行 windows server 2008 R2 标准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:59:08.400

我跳过了所有的箍：

1.  创建一个非管理员帐户（在我的情况下，激活该`guest`帐户）。
2.  作为`Admin`，运行`secpol.msc`并授予此帐户`Create Symbolic Link`权限。
3.  `runas /user:guest cmd`以访客身份打开命令窗口。

    只是为了解决最简单的问题：因为我运行的是 as `guest`，所以我在目录中没有写权限。所以，

4.  作为管理员，更改目标目录（您要在其中创建链接）中的权限，以向非管理员用户授予写入权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-21T13:09:07.720

当我想与 `mklink /H ...`. 通过删除`/H`，错误也消失了。

因此，如果符号链接也可以为您解决问题，您应该尝试一下。

# php - 形式参数未声明为输出参数 - SQL Server & PHP

> ID：11501300
> 
> 赞同：1
> 
> 时间：2012-07-16T09:15:37.570
> 
> 标签：php, sql-server, stored-procedures

我在使用 PHP 的 SQL Server 存储过程时遇到问题。我正在开发一个接收订单行、生成订单标题然后将订单行放入 SQL Server 数据库的系统。一切都很好，直到我尝试将每个订单行添加到数据库中。我已经实现了以下代码：

```
//Add code here to add the item to the order
// Create order header
/* prepare the statement resource */
$stmt=mssql_init("SPNAME1", $link);

/* now bind the parameters to it */
mssql_bind($stmt, "@CustNum",  $_SESSION['CustNum'],  SQLVARCHAR, FALSE);
mssql_bind($stmt, "@OrderCustSeq",  $_SESSION['CustSeq'],  SQLVARCHAR, FALSE);

if (isset($_REQUEST['TextBoxOrderNumber'])) {
    mssql_bind($stmt, "@OrderCustPo",  $_REQUEST['TextBoxOrderNumber'],  SQLVARCHAR, FALSE);
}

if (isset($_REQUEST['comboDispatchMethods'])) {
    mssql_bind($stmt, "@OrderShipVia",  $_REQUEST['comboDispatchMethods'],  SQLVARCHAR, FALSE);
} else {
    $_REQUEST['comboDispatchMethods'] = NULL;
    mssql_bind($stmt, "@OrderShipVia",  $_REQUEST['comboDispatchMethods'],  SQLVARCHAR, FALSE);
}

if (isset($_REQUEST['comboOrderTypes'])) {
    mssql_bind($stmt, "@OrderPriceCode",  $_REQUEST['comboOrderTypes'],  SQLVARCHAR, FALSE);
} else {
    $_REQUEST['comboOrderTypes'] = NULL;
    mssql_bind($stmt, "@OrderPriceCode",  $_REQUEST['comboOrderTypes'],  SQLVARCHAR, FALSE);
}

//now bind the output variables
mssql_bind($stmt, "@NewCoNumber", $NewCoNumber, SQLVARCHAR, true);

// now execute the procedure
$result = mssql_execute($stmt) or die ("Error in sp query: $query. " .mssql_get_last_message()); 

//Store each order line to the database
foreach( $_SESSION['orderarray'] as $obj )
{
    $SearchString = $obj['PartNo'];
    $qty = $obj['QtyReq'];

    /* prepare the statement resource */
    $addorderline=mssql_init("SPNAME2", $link);

    /* now bind the parameters to it */
    mssql_bind($addorderline, "@CoNum",    $NewCoNumber,    SQLVARCHAR,    FALSE);
    mssql_bind($addorderline, "@OrderItem",  $SearchString,  SQLVARCHAR, FALSE);
    mssql_bind($addorderline, "@QtyRequired", $qty, SQLFLT8, FALSE);

    // now execute the procedure
    $addorderresult = mssql_execute($addorderline) or die ("Error in sp query: $addorderline " .mssql_get_last_message()); 

    mssql_free_statement($addorderline);
    mssql_free_result($addorderresult); 
}

mssql_free_result($result);
mssql_free_statement($stmt); 
```

当我尝试添加订单时，第一个存储过程运行没有任何问题，但是我收到 $addorderresult 报告的错误，说明：

> 形式参数“@PriceCode”未声明为 OUTPUT 参数，但在请求的输出中传递了实际参数

页面上没有声明@PriceCode，尽管我确实在代码的另一部分返回 $row['PriceCode'] ，在发送数据进行存储时未执行该代码。删除该引用并不能解决问题。事实上，@PriceCode 不存在于网站上的任何页面中。据我了解，错误应该表明我使用@PriceCode 作为输出变量，但没有这样声明。我尝试将 @PriceCode 绑定到 SPNAME2 存储过程，但又遇到了另一个错误 - 这次说明：

> 过程或函数 SPNAME2 指定的参数过多

谁能建议我在这里错过了什么？过去一天左右这一直让我发疯，我真的需要把它修好，这样客户才能看看这个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T07:02:05.237

供将来参考：**ADO CreateParameter 方法**

[http://www.w3schools.com/ado/met_comm_createparameter.asp](http://www.w3schools.com/ado/met_comm_createparameter.asp)

它在 VBScript 中，但它可能对其他人有所帮助。

# c# - 由于放弃互斥体，等待已完成

> ID：11501306
> 
> 赞同：0
> 
> 时间：2012-07-16T09:16:03.740
> 
> 标签：c#, asp.net, performance, mutex, request-timed-out

我从未`mutex`在我的应用程序中使用过，现在也不知道它的作用，但是我的 Web 应用程序抛出了以下异常，我不知道如何处理它：

```
 IP: System.Web.HttpApplicationState
   07/16/2012 10:06:01
   Error in: https://-------/Loginpage.aspx
   Error Message:Error in:https://--------/Loginpage.aspx   Error Message:The wait completed due to an abandoned mutex.  Stack Trace :    at System.Threading.WaitHandle.WaitOne(Int64 timeout, Boolean exitContext)
   at System.Threading.WaitHandle.WaitOne(Int32 millisecondsTimeout, Boolean exitContext)
   at System.Threading.WaitHandle.WaitOne()
   at IBM.Data.Informix.IfxConnection.GetLatch(String callerMsg)
   at IBM.Data.Informix.IfxCommand.ExecuteReaderObject(CommandBehavior behavior, String method)
   at IBM.Data.Informix.IfxCommand.ExecuteReader(CommandBehavior behavior)
   at IBM.Data.Informix.IfxCommand.ExecuteReader()
   at DB_Connection_s.DB_Connection.IsValidPortalUser(String p_u, String p_p)
   at LoginSystem.LoginPage.ValidateUser(String UserName, String Password) in H:\LoginSystem\LoginSystem\LoginPage.aspx.cs:line 21
   at LoginSystem.LoginPage.ibtn_login_Click(Object sender, ImageClickEventArgs e) in H:\LoginSystem\LoginSystem\LoginPage.aspx.cs:line 34
   at System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e)
   at System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

```
public static int IsValidPortalUser(string p_u, string p_p) {
            string str = DB_Connection.My_Decryption_2(p_p);
            int item = 0;
            try
            {
                if (DB_Connection.conn.State == 0)
                {
                    DB_Connection.conn.Open();
                }
                DB_Connection.DBCmd = new IfxCommand();
                DB_Connection.DBCmd.Connection = DB_Connection.conn;
                DB_Connection.DBCmd.CommandText = "SELECT nvl(emp_num,0) FROM htoemp WHERE username = ? AND DECRYPT_CHAR(password, '78dfdf') = ? ";
                DB_Connection.DBCmd.Parameters.Add("user_name", p_u);
                DB_Connection.DBCmd.Parameters.Add("password", str);
                IfxDataReader ifxDataReaders = DB_Connection.DBCmd.ExecuteReader();
                if (ifxDataReaders.Read())
                {
                    item = (int)ifxDataReaders[0];
                }
                ifxDataReaders.Close();
            }
            catch (ApplicationException applicationException)
            {
            }
            DB_Connection.conn.Close();
            return item;
        } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T10:35:17.130

无论您在`using`块内使用什么库，您总是需要构造一个新的 Connection 对象。在块外使用数据库连接对象`using`是危险的，因为当发生某些异常时，它可能导致打开连接。

此外，在 Web 应用程序中，您不能拥有类范围的私有或静态连接对象，因为这将导致多个线程尝试使用相同的连接对象问题。静态连接只能用于 Windows 应用程序，不能用于 Web 应用程序。

处理数据库连接的正确模式是：

```
try
{
   Open Connection
   Do the work
   Close connection
}
catch
{
   Handle error.
}
finally
{
    try
    {
        Close Connection.
    }
    catch 
    {
        Do nothing.
    }
} 
```

或者你可以只使用`using`语法。

```
using (var connection = OpenConnection())
{
   connection.close();
} 
```

有帮助吗？

# javascript - Html5/Javascript 对接/流段布局

> ID：11501307
> 
> 赞同：1
> 
> 时间：2012-07-16T09:16:04.233
> 
> 标签：javascript, asp.net-mvc, html, layout

我正在使用 Asp.net mvc (w/html5) 制作 Web 应用程序。以下是我的应用程序原型布局计划：

![在此处输入图像描述](../Images/a59a698066d666f4375eb22457281b7f.png)

如您所见，有 4 个不同的部分：

1.  可伸缩侧边菜单（停靠在左侧）：这是一个侧边菜单，允许用户单击按钮并将其滑出视图。它将可以在其区域内使用滚动条滚动。
2.  标题栏（停靠在顶部）：带有几个停靠在顶部的按钮的简单部分。
3.  内容区域（拉伸以适应可用空间）：这将显示用户关注的内容。这将是用户滚动浏览器窗口时唯一滚动的区域
4.  按钮栏（停靠底部）：应用程序的部分按住按钮。

所以我真正的问题是你如何设置一个要停靠的区域，以便它设置为始终显示在该区域中，即使滚动窗口也是如此（例如右侧的 facebook 广告栏或他们的聊天朋友列表） . 如果内容区域比浏览器窗口长而不是用户向下滚动浏览器窗口时（或者如果我们需要实现一个自定义的可滚动窗口来处理它自己在应用程序中的滚动），他们将向下滚动内容区域，但所有其他区域将保持停靠在视图中。你如何做到这一点？现在很多网站似乎都在这样做（facebook、twitter、windows azure 等）。任何示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:43:47.977

Web 的好处是您可以检查（使用 Firebug 或其他工具）其他站点以查看它们是如何构建它们的。

也就是说，如果你想要一个*粘性*区域，我推荐[StickyFloat，一个](https://github.com/lecar-red/jquery-stickyfloat)很好用的 jQuery 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:45:58.160

CSS 方式是将元素`position`设置为`fixed`

这个页面有一个例子：[http](http://davidwalsh.name/dw-content/css-fixed-position.php) ://davidwalsh.name/dw-content/css-fixed-position.php看或右上角的黄色便签。这是该元素的相关 CSS

```
.element {
    position: fixed;
    top: 2%;
    right: 2%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T10:58:11.117

我使用了这个很棒的 jQuery 插件，它提供了你想要的东西等等。

[UI 布局插件](http://layout.jquery-dev.net/)

# objective-c - 解析有效，但数据未存储在 nsMutableArray 中

> ID：11501308
> 
> 赞同：1
> 
> 时间：2012-07-16T09:16:05.837
> 
> 标签：objective-c, nsmutablearray, nsxmlparser

我正在解析一个 xml 文件，它可以工作并向我显示在控制台中解析的数据（例如：Speller 的处理值 ...），但它们不会添加到 msmutablearray 用户中。这是一些代码。问题出在哪里 ？请帮忙 ：

```
- (MyData *) initXMLParser {
    [super init];
    // init array of user objects 
    users = [[NSMutableArray alloc] init];
    return self;
}

- (void)parser:(NSXMLParser *)parser 
didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict 
{

    if ([elementName isEqualToString:@"user"]) {
        NSLog(@"user element found – create a new instance of User class...");
        user = [[User alloc] init];

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (!currentElementValue) {
        // init the ad hoc string with the value     
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    } else {
        // append value to the ad hoc string    
        [currentElementValue appendString:string];
    }
    NSLog(@"Processing value for : %@", string);
}  

- (void)parser:(NSXMLParser *)parser 
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName 
{

    if ([elementName isEqualToString:@"users"]) {
        // We reached the end of the XML document
        return;
    }

    if ([elementName isEqualToString:@"user"]) {

        if ([elementName isEqualToString:@"userName"]) {
                [[self user] setUserName:currentElementValue];

            }
            if ([elementName isEqualToString:@"firstName"]) {
                [[self user] setFirstName:currentElementValue];

            }

            if ([elementName isEqualToString:@"lastName"]) {
                [[self user] setLastName:currentElementValue];

            }

        [users addObject:user];
        /*comboarray = [[users arrayForKey:@"ComboBoxValues"]
                      sortedArrayUsingSelector:@selector(compare:)];*/

        // release user object
        [user release];
        user = nil;

    } else {

        [user setValue:currentElementValue forKey:elementName];
           }

    [currentElementValue release];
    currentElementValue = nil;
}
-(BOOL)parseDocumentWithData:(NSData *)data {
    //NSString * filePath = [[NSBundle mainBundle] pathForResource:@"Users" ofType:@"xml"];
    //data = [NSData dataWithContentsOfFile:filePath];

    if (data == nil)
        return NO;

    // this is the parsing machine
    NSXMLParser *xmlparser = [[NSXMLParser alloc] initWithData:data];

    // this class will handle the events
    [xmlparser setDelegate:self];
    [xmlparser setShouldResolveExternalEntities:NO];

    // now parse the document
    BOOL ok = [xmlparser parse];
    if (ok == NO)
        NSLog(@"error");
    else
        NSLog(@"OK");

    [xmlparser release];
    return ok;
}

- (void) dealloc {

    [currentElementValue release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:22:58.067

这似乎是您的代码有问题的部分

```
- (MyData *) initXMLParser {
    [super init]; // change to self = [super init];
    // init array of user objects 
    users = [[NSMutableArray alloc] init];
    return self;
} 
```

您没有`self`使用以下值进行初始化`[super init];`

并在您的通话中添加`[users release];`线路，`dealloc`除非您在其他地方发布它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:24:00.190

用这个改变你的 didEndElement 方法：

```
- (void)parser:(NSXMLParser *)parser 
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName {

        if ([elementName isEqualToString:@"users"]) {
            // We reached the end of the XML document
             return;
        }
        if ([elementName isEqualToString:@"userName"]) {
            [[self user] setUserName:currentElementValue];
            [currentElementValue release];
            currentElementValue = nil;
        }
        if ([elementName isEqualToString:@"firstName"]) {
            [[self user] setFirstName:currentElementValue];
            [currentElementValue release];
            currentElementValue = nil;
        }

        if ([elementName isEqualToString:@"lastName"]) {
            [[self user] setLastName:currentElementValue];
            [currentElementValue release];
            currentElementValue = nil;
        }

        if ([elementName isEqualToString:@"user"]) {
           [users addObject:user];
           /*comboarray = [[users arrayForKey:@"ComboBoxValues"]
                  sortedArrayUsingSelector:@selector(compare:)];*/

           // release user object
           [user release];
           user = nil;
       }
  } 
```

# android - 安卓。如何将缓存保存在 RAM 中？

> ID：11501309
> 
> 赞同：0
> 
> 时间：2012-07-16T09:16:05.980
> 
> 标签：android, file, caching, ram

我需要使用正则表达式在我的应用程序中搜索文本文件（大约 40MB），正如您可以想象的那样，通常需要 1 分钟左右才能完成。而且我必须反复这样做。

我想知道我是否可以在第一次搜索后将这些文件保存在 RAM 中。我可以这样做吗？我的意思是，找到一种方法来明确地说在 RAM 中保留一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:18:49.127

将结果保存在将保存搜索结果的自定义对象中。这会将它保存在 RAM 中（只要您保留对它的引用）。

还要记住，在 Android 设备中分配 40 MiB 的 RAM 并不是一个好主意，因为在许多低端设备中 RAM 非常有限。这可以使您的应用程序在寻求释放内存时成为 Android 的一个非常好的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:20:43.137

考虑将您的搜索结果放在 a[`WeakHashMap`](http://developer.android.com/reference/java/util/WeakHashMap.html)中，其中的键仅在您需要值存在的持续时间内存在，例如 a 的范围`Activity`。不过要注意内存问题。在某些设备上，您的应用程序进程可能只有[低至 16M](https://stackoverflow.com/a/2634738/473637)的堆大小。

# csv - 188852525225 在 CSV 格式报告中显示为 1.89E+11

> ID：11501311
> 
> 赞同：0
> 
> 时间：2012-07-16T09:16:09.123
> 
> 标签：csv, jasper-reports, ireport

我正在使用具有现场电话号码的 ireport。它适用于所有格式的报告，但在 CSV 格式中它打印 1.89E+11。我可以使用 Excel 中的单元格格式化程序对其进行更改。

我想知道我们是否可以对文本字段属性进行任何更改，以便它可以以 CSV 格式正确显示数字，而无需更改 Excel 的单元格格式化程序？

# meteor - 默认错误页面

> ID：11501312
> 
> 赞同：0
> 
> 时间：2012-07-16T09:16:12.270
> 
> 标签：meteor

我想在流星中定义一个默认错误页面。也就是说，如果应用程序崩溃或发生其他错误，用户应该被重定向到一个“友好”的页面，上面写着：系统不可用，请联系等。有没有办法完成这个或类似的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T22:12:13.527

您必须使用 BackboneJS( [Backbone Router](http://documentcloud.github.com/backbone/#Router) ) 进行路由。使用此代码，会话变量“page_type”让您知道您是否在错误的 url 上。

```
var BackboneRouter = Backbone.Router.extend({
  routes: {
    "/":            "default",
    ":error":       "list"
  },
  default: function () {
    Session.set("page_type", "default");
  },
  error: function () {
    Session.set("page_type", "error");
  }
});

Router = new BackboneRouter;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

现在您可以使用“page_type”来告诉模板引擎要加载哪个模板。

```
Template.tmp.route = function () {
  if (Session.get("page_type") == "default") {
    return true;
  } else {
    return false;
  }

<template name="tmp">
{{#if route}}
  {{> default}}
{{else}}
  {{> error}}
{{/if}}
</template> 
```

# java - 从 PKCS12 密钥库颁发 PKCS11 令牌

> ID：11501321
> 
> 赞同：1
> 
> 时间：2012-07-16T09:16:35.257
> 
> 标签：java, security, pkcs#11

我在向硬令牌颁发证书时遇到问题，我拥有的是我创建的 PKCS12 密钥库，并希望将其作为 PKCS11 移动到硬令牌中。

我可以成功生成密钥和证书并将它们保存在 p12 密钥库中，并且可以使用此设备的管理控制台将 p12 文件导入硬令牌。但是当我尝试以编程方式完成最后一步时，我得到了不同的结果。

**使用管理工具导入的 p12 文件我在设备中拥有的是**
-序列 号
-签名和密钥交换使用
证书
私钥
公钥

**以编程方式导入所有步骤**
- 序列 号
- 签名和加密
证书
私钥

最终结果是最终用户无法使用该设备进行签名。我正在使用 SunPKCS11。

**编辑：**用于导入密钥的代码：

```
KeyStore.PrivateKeyEntry priEntry = 
    new KeyStore.PrivateKeyEntry(keys.getPrivate(), certificateArray); 
KeyStore.PasswordProtection password = 
    new KeyStore.PasswordProtection(pass.toCharArray()); 
store.setEntry("Entry", priEntry, password); 
```

**编辑 2** keytool -list

有趣的是，当我使用以下命令时，输出是完全相同的
keytool -keystore NONE -storetype pkcs11 -list

# ruby-on-rails-3 - 设计 ActiveRecord 模型：用户 - 组织 - 成员 - 应用程序

> ID：11501322
> 
> 赞同：1
> 
> 时间：2012-07-16T09:16:39.490
> 
> 标签：ruby-on-rails-3, activerecord, mapping

我是 Rails 的新手，我设计了一个与域实体相关的应用程序，例如：

*   用户属于许多组织
*   组织有很多用户
*   组织有许多应用程序
*   应用程序由组织开发
*   应用程序由同一组织的许多用户（开发人员）开发
*   用户是许多应用程序的开发者

这是上述关系的映射

```
class Organization < ActiveRecord::Base
    has_many :memberships
    has_many :users, through: :memberships
end

class User < ActiveRecord::Base
    has_many :memberships
    has_many :organizations, through: :memberships

    has_many :application_developers
    has_many :applications, through: application_developers
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :organization
end

class Application < ActiveRecord::Base
    belongs_to :organization

    has_many :application_developers
    has_many :memberships, through: application_developers 
end

class ApplicationDeveloper < ActiveRecord::Base
    belongs_to :membership
    belongs_to :application
end 
```

有人可以验证上面的映射是否正确吗？请提供您的反馈。

如果你有比上面更好的设计，那将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:35:43.447

如果组织中的每个用户都没有在应用程序上工作，而且只是某些用户，那么我会保留 ApplicationDeveloper 表，但是更改

`belongs_to :membership`

至

`belongs_to :user`

# wpf - 禁用单击时显示最小化的功能区选项卡？

> ID：11501324
> 
> 赞同：1
> 
> 时间：2012-07-16T09:16:48.970
> 
> 标签：wpf, popup, ribbon, minimize

我将功能区用于 WPF (2010 - `Microsoft.Windows.Controls.Ribbon`)。

当`Ribbon.IsMinimized`设置为`true`功能区时最小化。

正常行为是，当我单击最小化选项卡时，它会暂时打开。*但是有什么办法可以禁用它，以防止它扩展？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T23:59:53.160

请看下面的代码。我并不完全清楚您想要什么，但我已经介绍了 2 个可能满足您需求的行为案例。

*   案例 1：

    如果功能区设置为最小化并且您单击功能区选项卡，它将关闭最小化标志，并从那时起将功能区变为非最小化标志。您可以双击选项卡，或从上下文菜单中选择最小化功能区以再次最小化。

*   情况 2：

    如果在功能区最小化时单击功能区选项卡，它将使功能区保持最小化状态。

我提供了 2 种代码实现，一种只是挂钩常规功能区，另一种是创建派生功能区。

```
<Window x:Class="DemoOfRibbonWithDifferentMinimizeBehaviour.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="Main"
        Title="MainWindow" Height="350" Width="525" xmlns:my="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon">
    <Grid>
        <my:Ribbon Height="254" HorizontalAlignment="Left" Name="ribbon1" VerticalAlignment="Top" Width="503" ItemsSource="{Binding}" IsMinimized="True" IsCollapsed="False" IsDropDownOpen="False" Loaded="ribbon1_Loaded">
            <my:RibbonTab Header="Fruits" KeyTip="F">
                <my:RibbonGroup Header="Berries">
                    <my:RibbonButton Label="Grapes"/>
                    <my:RibbonButton Label="Bananas"/>
                </my:RibbonGroup>
                <my:RibbonGroup Header="Pome">
                    <my:RibbonButton Label="Apple"/>
                    <my:RibbonButton Label="Pears"/>
                </my:RibbonGroup>
            </my:RibbonTab>
            <my:RibbonTab Header="Vegetables" KeyTip="V">
                <my:RibbonGroup Header="Root">
                    <my:RibbonButton Label="Carrot"/>
                    <my:RibbonButton Label="Turnips"/>
                </my:RibbonGroup>
                <my:RibbonGroup Header="Stalk">
                    <my:RibbonButton Label="Bamboo"/>
                    <my:RibbonButton Label="Celery"/>
                </my:RibbonGroup>
            </my:RibbonTab>
            <my:RibbonCheckBox Label="Prevent Maximize" IsChecked="{Binding ElementName=Main, Path=PreventMaximize}">Prevent Maximize</my:RibbonCheckBox>
        </my:Ribbon>
    </Grid>
</Window> 
```

Window背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Windows.Controls.Ribbon;
using System.Windows.Controls.Primitives;
using System.ComponentModel;

namespace DemoOfRibbonWithDifferentMinimizeBehaviour
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        Popup template_PART_ITEMSPRESENTERPOPUP;

        public bool PreventMaximize { get; set; }

        public MainWindow()
        {
            PreventMaximize = true;

            InitializeComponent();
        }

        private void ribbon1_Loaded(object sender, RoutedEventArgs e)
        {
            template_PART_ITEMSPRESENTERPOPUP = VisualHelper.FindChild<Popup>(ribbon1, "PART_ITEMSPRESENTERPOPUP");

            if (template_PART_ITEMSPRESENTERPOPUP != null)
            {
                template_PART_ITEMSPRESENTERPOPUP.Height = 0;
                template_PART_ITEMSPRESENTERPOPUP.StaysOpen = false;
                template_PART_ITEMSPRESENTERPOPUP.Opened += new EventHandler(template_PART_ITEMSPRESENTERPOPUP_Opened);
            }
        }

        void template_PART_ITEMSPRESENTERPOPUP_Opened(object sender, EventArgs e)
        {
            if (ribbon1.IsMinimized)
            {
                ribbon1.IsMinimized = false;
                ribbon1.IsDropDownOpen = false;

                template_PART_ITEMSPRESENTERPOPUP.Visibility = System.Windows.Visibility.Collapsed;
            }

            // Uncomment this if your intention is to prevent the Ribbon being maximized
            // i.e. keep it fixed in minimized mode.
            if (PreventMaximize)
            {
                ribbon1.IsMinimized = true;
            }
        }
    }

    //--------------------------------------------------------------------------

    // If you want to encapsulate the new behaviour in a new Ribbon class, then you
    // could use this instead of the above and modify your XAML appropriately.

    public class RibbonWhichPreventsMaximize : Ribbon
    {
        Popup template_PART_ITEMSPRESENTERPOPUP;
        EventHandler popupeventhandler;

        public RibbonWhichPreventsMaximize()
        {
            popupeventhandler = new EventHandler(template_PART_ITEMSPRESENTERPOPUP_Opened);
        }

        public override void OnApplyTemplate()
        {
            // Unwire the handler if this Ribbon control is getting a new Template applied
            // (e.g. for case when Template is dynamically changed at runtime).

            if (template_PART_ITEMSPRESENTERPOPUP != null)
            {
                template_PART_ITEMSPRESENTERPOPUP.Opened -= popupeventhandler;
            }

            base.OnApplyTemplate();

            template_PART_ITEMSPRESENTERPOPUP = VisualHelper.FindChild<Popup>(this, "PART_ITEMSPRESENTERPOPUP");

            if (template_PART_ITEMSPRESENTERPOPUP != null)
            {
                template_PART_ITEMSPRESENTERPOPUP.Height = 0;
                template_PART_ITEMSPRESENTERPOPUP.StaysOpen = false;
                template_PART_ITEMSPRESENTERPOPUP.Opened += popupeventhandler;
            }
        }

        void template_PART_ITEMSPRESENTERPOPUP_Opened(object sender, EventArgs e)
        {
            if (this.IsMinimized)
            {
                this.IsMinimized = false;
                this.IsDropDownOpen = false;

                template_PART_ITEMSPRESENTERPOPUP.Visibility = System.Windows.Visibility.Collapsed;
            }

            // Uncomment this if your intention is to prevent the Ribbon being maximized
            // i.e. keep it fixed in minimized mode.
            this.IsMinimized = true;
        }
    }

    //--------------------------------------------------------------------------

    // Note this routine taken from:
    // http://stackoverflow.com/questions/7034522/how-to-find-element-in-visual-tree-wp7

    public static class VisualHelper
    {
        public static T FindChild<T>(DependencyObject parent, string childName)
            where T : DependencyObject
        {
            // Confirm parent and childName are valid. 
            if (parent == null)
            {
                return null;
            }

            T foundChild = null;

            int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < childrenCount; i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(parent, i);
                // If the child is not of the request child type child
                var childType = child as T;
                if (childType == null)
                {
                    // recursively drill down the tree
                    foundChild = FindChild<T>(child, childName);

                    // If the child is found, break so we do not overwrite the found child. 
                    if (foundChild != null)
                    {
                        break;
                    }
                }
                else if (!string.IsNullOrEmpty(childName))
                {
                    var frameworkElement = child as FrameworkElement;
                    // If the child's name is set for search
                    if (frameworkElement != null && frameworkElement.Name == childName)
                    {
                        // if the child's name is of the request name
                        foundChild = (T)child;
                        break;
                    }

                    // Need this in case the element we want is nested
                    // in another element of the same type
                    foundChild = FindChild<T>(child, childName);
                }
                else
                {
                    // child element found.
                    foundChild = (T)child;
                    break;
                }
            }

            return foundChild;
        }
    }
} 
```

# css - 无法在 Webkit 中使用 SVG 作为 CSS 背景

> ID：11501330
> 
> 赞同：2
> 
> 时间：2012-07-16T09:16:58.780
> 
> 标签：css, background, webkit, svg

我一直在尝试使用 SVG 文件作为网站标题的背景，但它似乎没有出现在 Webkit 浏览器中（我尝试过 Chrome 和 Safari；在 Mac 上）。Firefox 似乎可以正确显示它。

这是我的CSS：

```
header {
  overflow: auto;
  width: 100%;
  height: 80px;
  background: url(../img/navbg.svg) no-repeat;
  background-size: 100%;
  -o-background-size: 100%;
  -webkit-background-size: 100%;
  -moz-background-size: 100%;

  margin: 0 0 20px 0;
  padding: 0;

  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;

  box-shadow: inset 0 0 1px #fff, 
    inset 0 1px 0 rgba(255,255,255,.3),
    0 1px 2px rgba(0,0,0,.5);
} 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:36:58.597

检查这个，它可能对你有帮助。 [http://helephant.com/2009/08/12/svg-images-as-css-backgrounds/](http://helephant.com/2009/08/12/svg-images-as-css-backgrounds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:53:40.637

我在 2012 年 3 月找到了一个示例。带有警告：

“作为 CSS 包含的 SVG 无法编写脚本，定位也很困难。因此只能将这种方法用于背景插图。”

希望这会有所帮助：[http ://tecfa.unige.ch/guides/svg/ex/html5/html5-with-css-background.html](http://tecfa.unige.ch/guides/svg/ex/html5/html5-with-css-background.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T04:40:27.387

检查您的 SVG 是否缺少高度和宽度声明。没有这些，背景 SVG 将不会在 Safari 5 中显示。

# button - 黑莓自定义按钮字段：onfocus、onUnfocus

> ID：11501331
> 
> 赞同：1
> 
> 时间：2012-07-16T09:17:00.800
> 
> 标签：button, blackberry

我想改变背景按钮的颜色和onfocus的文字颜色我该怎么做？

```
 class RoundedRectField extends Field {

    // Layout values
    private static final int CURVE_X = 12; // X-axis inset of curve
    private static final int CURVE_Y = 12; // Y-axis inset of curve
    private static final int MARGIN = 2; // Space within component boundary

    // Static colors
    private static final int TEXT_COLOR = 0xFFFFFF; // White
    private static final int BORDER_COLOR = 0xFF8000; // dark gray
    private static final int BACKGROUND_COLOR = 0xFFFFFF; // White
    private static final int TEXT_COLOR_selected = 0xFF6DB6; 
    private static final int BORDER_COLOR_selected = 0xFF8000;
    private static final int BACKGROUND_COLOR_selected = 0xCCCCCC; 
    boolean _focus = false;
    private static String text_button;
    // Point types array for rounded rectangle. Each point type
    // corresponds to one of the colors in the colors array. The
    // space marks the division between points on the top half of
    // the rectangle and those on the bottom.
    private static final byte[] PATH_POINT_TYPES = {
            Graphics.CURVEDPATH_END_POINT,
            Graphics.CURVEDPATH_QUADRATIC_BEZIER_CONTROL_POINT,
            Graphics.CURVEDPATH_END_POINT, Graphics.CURVEDPATH_END_POINT,
            Graphics.CURVEDPATH_QUADRATIC_BEZIER_CONTROL_POINT,
            Graphics.CURVEDPATH_END_POINT,

            Graphics.CURVEDPATH_END_POINT,
            Graphics.CURVEDPATH_QUADRATIC_BEZIER_CONTROL_POINT,
            Graphics.CURVEDPATH_END_POINT, Graphics.CURVEDPATH_END_POINT,
            Graphics.CURVEDPATH_QUADRATIC_BEZIER_CONTROL_POINT,
            Graphics.CURVEDPATH_END_POINT, };

    // Colors array for rounded rectangle gradient. Each color corresponds
    // to one of the points in the point types array. Top light, bottom black.
    private static final int[] PATH_GRADIENT = { 0xFF8000, 0xFF8000, 0xFF8000,
            0xFF8000, 0xFF8000, 0xFF8000,

            0xFC0500, 0xFC0500, 0xFC0500, 0xFC0500, 0xFC0500, 0xFC0500 };

    // Center our readonly field in the space we're given.
    public RoundedRectField(String text_button) {
        super(FIELD_HCENTER | FIELD_VCENTER | READONLY);
        this.text_button = text_button;
    }

    // This field in this demo has a fixed height.
    public int getPreferredHeight() {
        return 70;
    }

    // This field in this demo has a fixed width.
    public int getPreferredWidth() {
        return 240;
    }

    // When layout is requested, return our height and width.
    protected void layout(int width, int height) {
        setExtent(getPreferredWidth(), getPreferredHeight());
    }

    // When painting is requested, do it ourselves.
    protected void paint(Graphics g) {
        // Clear this area to white background, fully opaque.

            g.clear();
            g.setGlobalAlpha(255);
            g.setBackgroundColor(BACKGROUND_COLOR);

            // Drawing within our margin.
            int width = getPreferredWidth() - (MARGIN * 2);
            int height = getPreferredHeight() - (MARGIN * 2);

            // Compute paths for the rounded rectangle. The 1st point (0) is on
            // the left
            // side, right where the curve in the top left corner starts. So the
            // top left
            // corner is point 1\. These points correspond to our static arrays.
            int[] xPts = { 0, 0, CURVE_X, width - CURVE_X, width, width, width,
                    width, width - CURVE_X, CURVE_X, 0, 0 };
            int[] yPts = { CURVE_Y, 0, 0, 0, 0, CURVE_Y, height - CURVE_Y,
                    height, height, height, height, height - CURVE_Y };

            // Draw the gradient fill.
            g.drawShadedFilledPath(xPts, yPts, PATH_POINT_TYPES, PATH_GRADIENT,
                    null);

            // Draw a rounded rectangle for the outline.
            // I think that drawRoundRect looks better than drawPathOutline.
            g.setColor(BORDER_COLOR);
            g.drawRoundRect(0, 0, width, height, CURVE_X * 2, CURVE_Y * 2);

            // Place some text in the center.

            Font font = Font.getDefault().derive(Font.PLAIN, 9, Ui.UNITS_pt);
            int textWidth = font.getAdvance(text_button);
            int textHeight = font.getHeight();
            g.setColor(TEXT_COLOR);
            g.setFont(font);
            g.drawText(text_button, (width / 2) - (textWidth / 2) - MARGIN,
                    (height / 2) - (textHeight / 2) - MARGIN);

    }

    protected void onFocus(int direction) {
        _focus = true;
        Dialog.alert("dcd");
        invalidate();
        super.onFocus(direction);
    }

    protected void onUnfocus() {

        _focus = false;

        invalidate();

        super.onUnfocus();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:27:46.303

您可以通过多种方式进行操作。`paint()`一种流行的方法是在您已经覆盖的方法中提供自定义焦点绘图。

您应该能够做到这一点（我假设您声明`_selected`了聚焦状态的颜色）：

```
if (isFocus()) {
    g.setBackgroundColor(BACKGROUND_COLOR_selected);
else {
    g.setBackgroundColor(BACKGROUND_COLOR);
} 
```

...

```
if (isFocus()) {
    g.setColor(TEXT_COLOR_selected);
} else {
    g.setColor(TEXT_COLOR);
} 
```

这些线路进入`paint()`，就在您当前呼叫的位置`g.setBackgroundColor`和`g.setColor(TEXT_COLOR)`。

然后，您将覆盖`drawFocus()`并且什么也不做，因为您的焦点绘图是在以下位置处理的`paint()`：

```
protected void drawFocus(Graphics graphics, boolean on) {
   // override superclass implementation and do nothing
} 
```

最后，你需要让你的`Field`焦点集中，以便获得焦点。你可以这样做：

```
public RoundedRectField(String text_button) {
    super(FIELD_HCENTER | FIELD_VCENTER | FOCUSABLE);
    this.text_button = text_button;
} 
```

如果您需要该字段可动态聚焦（有时可聚焦，或有时不可聚焦），则可以实现此方法：

```
public boolean isFocusable() { 
```

但是，如果该字段始终是可聚焦的，那么`FOCUSABLE`在构造函数中使用该标志将起作用。我对此进行了测试，我看到文本颜色随着焦点的变化（在 OS 5.0 9550 上）。

# java - Fork 和 Join 特性 jdk7 线程数

> ID：11501333
> 
> 赞同：2
> 
> 时间：2012-07-16T09:17:04.077
> 
> 标签：java, multithreading, concurrency, java-7

我一直在研究JDK 7中的新特性，即Fork和Join。在 Javadoc 中，它指出在 a `ForkJoinTask`one 中不能只在 a 的上下文中执行 fork `ForkJoinPool`。但它没有提到`fork()`方法调用是否创建新线程。

使用`ForkJoinPool`工作窃取算法来平衡线程之间的工作，但没有提到实际创建了多少线程。

我有一个任务，我应该以分而治之的方式分解，但我担心`ForkJoinPool`会创建太多线程，并且会因为管理这些线程的开销而降低执行性能。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:34:57.487

Fork 不会（必然）创建新线程。在我的基准测试中，它只为每个可用内核创建 1 个线程 + 1 个额外线程。附加基准；`Factorizer.factorize(71236789143834319L)`比如说，从 main() 调用。

```
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.RecursiveTask;

public class Factorizer extends RecursiveTask<Long> {

static ForkJoinPool fjPool = new ForkJoinPool();
static final int sequentialThreshold = 10000;

private long number, low, high;

Factorizer(long number, long low, long high) {
    this.number = number; this.low = low; this.high = high;
}

private long factorize() {
    if ((number % 2) == 0) {
        return 2;
    }
    // ensures i is odd (we already know number is not even)
    long i = ((low % 2) == 0) ? low + 1: low;
    for (/**/; i < high; i+=2) {
        if ((number % i) == 0) {
            return i;
        }
    }
    return number;
}

@Override
protected Long compute() {

    // ugly debug statement counts active threads
    System.err.println(Thread.enumerate(
            new Thread[Thread.activeCount()*2]));

    if (high - low <= sequentialThreshold) {
        return factorize();
    } else {
        long mid = low + (high - low) / 2;
        Factorizer left = new Factorizer(number, low, mid);
        Factorizer right = new Factorizer(number, mid, high);
        left.fork();
        return Math.min(right.compute(), left.join());
    }
}

static long factorize(long num) {
    return fjPool.invoke(new Factorizer(num, 2, (long)Math.sqrt(num+1)));
}
} 
```

注意 - 这只是一个测试。不要使用此代码来认真尝试考虑任何重要因素。

# php - CakePHP 向照片添加评论

> ID：11501334
> 
> 赞同：0
> 
> 时间：2012-07-16T09:17:10.607
> 
> 标签：php, cakephp

我在为我的网站上的照片添加评论时遇到问题。在评论表中，我有： `id`, `user_id`, `photo_id`, `content`, `created`, `modified`, `erased`.

在视图中我创建：

```
echo $this->Form->create('Comment');
echo $this->Form->input('title');
echo $this->Form->input('content');
echo $this->Form->input($this->Session->read('User.id'), array('type'=>'hidden'));
echo $this->Form->input($photo['Photo']['id'], array('type'=>'hidden'));
echo $this->Form->end('Add comment'); 
```

我不知道这是否是正确的方法。cake 如何知道 2 个隐藏值是`user_id`和`photo_id`？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:25:51.123

提交数据时，您必须在控制器中填充用户 ID（因此用户不能作为其他用户发布）。`$this->Auth->user('id');`您可以使用（假设您使用的是内置的 Auth 组件）来获取用户 ID 。至于照片 ID，您在加载照片时显然有这个，您只需要`$this->request->data`在保存之前将这些数据传递到。

一个简单的 CakePHP 2 方法是这样的：

```
public function viewPhoto($photoId) { //$photoId comes from your routes or something

    if($this->request->is('post')) {
        $this->request->data['Comment']['user_id'] = $this->Auth->user('id');
        $this->request->data['Comment']['photo_id'] = $photoId;
        $this->Photo->Comment->save($this->request->data);
    }

} 
```

根据您的控制器/模型设置，此结构对您来说略有不同。

# .net - 使用 TcpClient 和 Socket 伪造慢速连接

> ID：11501337
> 
> 赞同：3
> 
> 时间：2012-07-16T09:17:14.903
> 
> 标签：.net, sockets, tcp, integration-testing

我正在尝试编写一个集成测试来证明如果连接到服务器的尝试太慢，TCP 客户端将正确超时。我有一个`FakeServer`类打开一个`Socket`并监听传入的连接：

```
public sealed class FakeServer : IDisposable
{
    ...

    public TimeSpan ConnectDelay
    {
        get; set;
    }

    public void Start()
    {
        this.CreateSocket();
        this.socket.Listen(int.MaxValue);

        this.socket.BeginAccept(this.OnSocketAccepted, null);
    }

    private void CreateSocket()
    {
        var ip = new IPAddress(new byte[] { 0, 0, 0, 0 });
        var endPoint = new IPEndPoint(ip, Port);
        this.socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        this.socket.Bind(endPoint);
    }

    private void OnSocketAccepted(IAsyncResult asyncResult)
    {
        Thread.Sleep(this.connectDelay);
        this.clientSocket = this.socket.EndAccept(asyncResult);
    }
} 
```

请注意我尝试通过调用来延迟连接成功`Thread.Sleep()`。不幸的是，这不起作用：

```
[Fact]
public void tcp_client_test()
{
    this.fakeServer.ConnectDelay = TimeSpan.FromSeconds(20);
    var tcpClient = new TcpClient();
    tcpClient.Connect("localhost", FakeServer.Port);
} 
```

在上面的测试中，调用`tcpClient.Connect()`立即成功，甚至在调用服务器端`OnSocketAccepted`方法之前。我查看了 API，但看不到任何明显的方法可以注入一些必须在客户端连接建立之前完成的服务器端逻辑。

有什么方法可以让我使用`TcpClient`and来伪造慢速服务器/连接`Socket`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:04:48.563

Visual Studio 自带网络模拟器 ( [http://msdn.microsoft.com/en-us/library/dd505008.aspx](http://msdn.microsoft.com/en-us/library/dd505008.aspx) )

# android - 适用于 firefox、Chrome、IE8 的 Android 复选框

> ID：11501341
> 
> 赞同：2
> 
> 时间：2012-07-16T09:17:30.457
> 
> 标签：android, jquery, html, css, checkbox

我正在尝试在我的项目中使用 android 复选框（样式为 css 和/或 jQuery），但我没有找到任何东西来帮助我解决这个问题。类似于 jQuery 插件或带有一些复选框的 html/css 模板。如果有人可以帮助我提供一些链接，因为到目前为止我什么也没找到:(。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:25:22.827

试试 uniform.js - [http://uniformjs.com/](http://uniformjs.com/)

你可以为它构建你自己的主题，它看起来像 android 主题。

# ipad - 图像视图——是否可以动态设置 UIImageView 的位置？

> ID：11501345
> 
> 赞同：1
> 
> 时间：2012-07-16T09:17:44.933
> 
> 标签：ipad, ios4, uiimageview, uiimage

是否可以动态设置 UIImageView 的位置？通过移动 Uislide 栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:04:06.350

是的，只需像这样使用框架属性

```
imageView.frame = CGRectMake(0.0f , 0.0f, 32.0f, 32.0f); 
```

或者

也可以使用 imageView 的 setFrame 函数

```
[imageView setFrame: CGRectMake(0.0f , 0.0f, 32.0f, 32.0f)]; 
```

就是这样，我认为它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:56:26.040

是的，只需设置 UIImageVIew 对象框架。而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T18:03:49.457

只需使用 UISlide 值更改委托并获取幻灯片值，基于 uislider 值您可以使用`imageView.frame`属性移动图像视图

# coq - Coq 中的自由变量

> ID：11501346
> 
> 赞同：1
> 
> 时间：2012-07-16T09:17:45.260
> 
> 标签：coq, free-variable

是否有任何函数/命令可以使用 Coq 获取/检查一个自由变量，比如 n:U，是否存在于术语/表达式 e 中？请分享。

例如，我想在 Coq 中声明这个“n 不会出现在 e 的自由名称中”。

谢谢，

维拉亚特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:24:23.433

*假设您在用Coq*术语谈论自由变量：

处理一个基本的 Coq 证明（不使用任何外部），您操作的是，在证明上下文之外，一个封闭的术语，即一个只有绑定变量的术语。如果在证明模式下`e`，您的*目标*中的一个术语似乎有一个自由变量`n`（意味着该变量在您的证明上下文中的某处），您可以使用该策略`n`简单地使绑定显式（并关闭目标术语） 。[`generalize`](http://coq.inria.fr/refman/Reference-Manual011.html#@tactic40)

在更高级的情况下，您的不太普通的证明可能涉及假设或参数形式的自由变量，在这种情况下，您可以使用[`Print Assumptions`](http://coq.inria.fr/refman/Reference-Manual009.html#@command112).

另一方面，如果您正在谈论使用 Coq 术语来表示*特定语言中的术语*概念（例如，您正在对这种语言进行形式化），您只需对您的语言的自由变量进行特殊处理。

如果您在语言术语的归纳定义中给它们一个*特定的构造函数*，那么应该很容易说明某个术语是否具有自由变量。如果您不熟悉表示替换和语言的自由变量的（不是那么微不足道的）概念，您会发现从[TAPL](http://www.cis.upenn.edu/~bcpierce/tapl/)到 BCPierce 的[SF 课程](http://www.cis.upenn.edu/~bcpierce/sf/)再到[POPLMark 挑战赛结果的](http://www.cis.upenn.edu/~bcpierce/papers/binders.pdf)精确度越来越高的指针。

# juice-ui - JuiceUI Slider - ValueChanged 事件未触发

> ID：11501348
> 
> 赞同：0
> 
> 时间：2012-07-16T09:17:47.507
> 
> 标签：juice-ui

我试图在 ASP.NET GridView 控件中包含一个 JuiceUI Slider 控件，其中每一行都有一个唯一的滑块控件。作为测试，我创建了一个 Slider 控件：

```
<juice:slider ID="MasterThresholdSlider" Value="50" Min="0" Max="100" runat="server"
Step="25" ValueChanged="MasterThresholdSlider_ValueChanged"></juice:slider>
<asp:TextBox ID="MasterThresholdText" runat="server"></asp:TextBox> 
```

现在从我阅读的文档中，我可以检测到引发 ValueChanged 事件时正在更改的值。所以在后面的代码中我创建了以下内容：

```
protected void MasterThresholdSlider_ValueChanged(object sender, EventArgs e)
{
   Juice.Slider slider = (Juice.Slider)sender;

   MasterThresholdText.Text = slider.Value.ToString();
} 
```

由于某种原因，当我运行应用程序时事件不会触发（断点位于事件的开头）。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:35:12.190

您需要将 AutoPostBack="true" 添加到 juice:slider 控件以启动自动回发。否则，该事件不会触发，直到页面上的其他内容触发回发。

# jquery - 如何在没有 GMT 的情况下格式化 JSON 日期

> ID：11501351
> 
> 赞同：0
> 
> 时间：2012-07-16T09:17:49.830
> 
> 标签：jquery, json

我想格式化 JSON 日期。我搜索并找到了这个链接。[Json Date](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)当我使用上述问题中提到的@Roy's ans 时，我得到以下格式的结果：

```
Mon Jul 16 2012 14:10:42 GMT+0545 (Nepal Standard Time) 
```

但我想要一个格式的结果：

```
Mon Jul 16 2012 14:10:42 
```

我怎样才能避免不必要的部分来获得期望的结果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:52:59.003

```
var dt = new Date().toString();
console.log(dt); // Mon Jul 16 2012 15:21:09 GMT+0530 (India Standard Time)
dt = dt.substr(0, dt.indexOf('GMT'));
console.log(dt); // Mon Jul 16 2012 15:21:09 
```

从外观上看，这似乎是你想要的......

# webforms - url中的值是get还是post？

> ID：11501358
> 
> 赞同：0
> 
> 时间：2012-07-16T09:18:17.830
> 
> 标签：webforms, http-request

我只是想知道我在 URL 中传递的值是 Get 类型还是 Post 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:19:44.233

两者都不或两者兼而有之。它们只是查询字符串的一部分。由于它们是 URI 的一部分，它们可以出现在任何类型的 HTTP 请求中。

（可能会出现一些混淆，因为`$_GET`无论使用什么动词（GET、POST、PUT 等）发出请求，PHP 都会用它们填充超全局。其他一些环境更合理，Perl 倾向于称它们为 Query Params、ASP。 NET 使用 Request.QueryString)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:21:57.300

浏览器发送任何包含查询参数的请求，这些查询参数会填充`$_GET`。正如@Quentin 所说，它们不一定来自`GET`请求。

另一方面，A`POST`最常在表单提交期间生成。`$_POST`变量**不是**URL 的一部分，并以`POSTDATA`.

# email - 提供联系表格服务的可行解决方案？

> ID：11501361
> 
> 赞同：0
> 
> 时间：2012-07-16T09:18:27.923
> 
> 标签：email, webforms, contact-form, wufoo, formstack

我的目标是为我的每个用户提供一个包含联系表单的网页。

联系表格将有一个关键参数：我的用户想要接收所有联系人条目的目标地址。

* * *

所以表格看起来像：

姓名：

电子邮件：

信息：

[+隐藏参数：提交时发送此联系人的目标电子邮件地址]

* * *

我主要担心的是，由于技术选择，或者甚至因为系统可能以某种方式被滥用，因此将电子邮件视为垃圾邮件。

我想过使用 Wufoo API，但看起来我不能为每个用户自动创建一个表单。Formstack API 看起来确实更有希望（我发现了一个[“创建表单”方法](http://developers.formstack.com/api-docs/methods/createform/)）。我也找到了一个[非官方的？](http://code.lancepollard.com/introducing-the-google-form-api/)看起来很有趣的[Google Form API 。](http://code.lancepollard.com/introducing-the-google-form-api/)

您知道向用户提供联系表格服务的可行解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:21:13.113

经过一段时间的搜索，我发现我真正需要的只是一个发送电子邮件的 API，因为表单部分很简单，不需要任何 API。

我需要的只是一种*`sendEmail ($source, $destination, $subject, $body)`*API。

为此，我发现[Amazon Simple Email Service](http://aws.amazon.com/ses/)是一个很好的解决方案。

# iphone - 如何在 UIImageView 中显示高分辨率图像

> ID：11501364
> 
> 赞同：2
> 
> 时间：2012-07-16T09:18:36.680
> 
> 标签：iphone, objective-c, ios

默认情况下，UIImageView 在 UIImageView 中将他的图像显示为 1px of image = 1pt，但我想显示为 2px of image = 1pt。

使用名称“..@2x..”保存图像的版本不合适，图像未保存在文件系统中。

比如图片大小是400x100，我想把图片显示在显示器的中央，应该是图片左边120pt，右边120pt(640-400) / 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:39:42.197

这很容易，请注意对于 iOS 4 以下的版本，您没有 Retina 显示器，这就是为什么在图像缩放方法中我首先进行此检查：

```
//Retina detect
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2){ 
```

然后`image`从某个地方（文件，缓存等）加载，我正在以这种方式缩放它

```
UIImage * image2Xscaled = [UIImage alloc];
            image = [[image2Xscaled initWithCGImage:[image CGImage] scale:2.0 orientation:UIImageOrientationUp] autorelease]; 
```

方法

```
initWithCGImage:scale:orientation: 
```

在 iOS 4.0 中可用。这就是为什么你需要第一次检查。如果不支持销售，则返回 1.0 缩放图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:38:53.737

你可以使用这样的东西：

```
NSData *data = //your data, however you get that...
UIImage *image = [UIImage imageWithData:data];
if ([UIScreen mainScreen].scale > 1.0f)
{
    image = [UIImage imageWithCGImage:image
                                scale:[UIScreen mainScreen].scale
                          orientation:UIImageOrientationUp]
} 
```

# sencha-touch-2 - Sencha Touch 2 视口缩放

> ID：11501370
> 
> 赞同：1
> 
> 时间：2012-07-16T09:18:56.200
> 
> 标签：sencha-touch-2, scaling, viewport

我制作了一个应用程序并在 Android 手机上对其进行了测试。但是手机上的控件（像素方面）明显大于相同大小（480x800）的浏览器窗口中的控件。我尝试将宽度设置为 device-width 和 480 的 index.html 文件包含在内，但设备上的 UI 控件仍然看起来太大并且超出了屏幕边缘。我想知道 Sencha 对此的解决方案是什么？我们应该自己设置元视口，编辑一些配置选项等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:44:10.470

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" /> 
```

是的，这就是我用过的。

还要确保你有

```
<meta charset="UTF-8"> 
```

或者

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# c# - 使用 Interface 添加私有 setter

> ID：11501376
> 
> 赞同：1
> 
> 时间：2012-07-16T09:19:09.410
> 
> 标签：c#, .net

我有一个只有一个属性的接口，如下所示

```
public interface IExtendable
{
      Hashtable ExtendedProperties { get; set;}
} 
```

我希望 setter 是私有的，但它不允许，因为它来自一个接口，并且我知道一切都应该在其中公开。

那么允许私人二传手的最佳做法是什么？

*   在这种情况下不要使用接口还是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T09:21:22.213

您不能将私有设置器添加到接口。如果你想拥有一个私有的 setter，那么你的界面需要如下所示：

```
public interface IExtendable 
{       
     Hashtable ExtendedProperties { get; } 
} 
```

在接口的实现中，您可以添加您的私有设置器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:31:32.963

```
private interface IExtendable
{
    Hashtable ExtendedProperties { get; }
}

private class Extendable: IExtendable
{
    Hashtable ExtendedProperties { get; private set; }
} 
```

# c# - 如何删除 WPF 标签中文本周围的边距？

> ID：11501380
> 
> 赞同：18
> 
> 时间：2012-07-16T09:19:21.877
> 
> 标签：c#, .net, wpf, user-interface, label

我正在尝试用标签制作一个小的虚拟键盘。以下是我在 XAML 中的键盘（但不止 3 个键）：

```
<StackPanel Orientation="Vertical">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <Border BorderThickness="1" BorderBrush="DarkGray">
            <Label Content="A" FontSize="12" MouseDown="KeyButton_Click" />
        </Border>
        <Border BorderThickness="1" BorderBrush="DarkGray">
            <Label Content="B" FontSize="12" MouseDown="KeyButton_Click" />
        </Border>
    </StackPanel>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <Border BorderThickness="1" BorderBrush="DarkGray">
            <Label Content="C" FontSize="12" MouseDown="KeyButton_Click" />
        </Border>
    </StackPanel>
</StackPanel> 
```

这样做的问题是标签中的文本周围有太多空间，导致键盘比需要的大得多。如果我手动设置标签的高度和宽度，这将 (1) 不考虑字体差异，并且 (2) 将切割部分字母而不是顶部和左侧边距。有没有其他方法可以将这些边距缩小到与文本本身差不多大小？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2015-11-27T18:59:33.443

将填充设置为 0。

我有同样的问题。在属性窗口中检查标签的属性后，我发现标签的默认填充是 5。将其设置为 0 就可以了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-16T10:04:22.463

使用`TextBlock`代替`Label`

# jquery - 为 JQueryUI 使用外部图标

> ID：11501390
> 
> 赞同：0
> 
> 时间：2012-07-16T09:19:59.077
> 
> 标签：jquery, css, jquery-ui

有没有一种简单的方法可以为 JQuery UI 使用外部图标？

假设我在按钮上有以下图标：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#aButton').button({
            icons: 
            {
                primary: "ui-icon-newicon"
            }
        });
    });
</script>

<button id="aButton">hello</button> 
```

是否可以显示外部 jpeg 或 png？最简单的方法是在不编辑现有 JQuery UI png 文件的情况下执行此操作？

我以前通过手动编辑和替换我在`ui-icons_xxxxxx_256x240.png`文件中不使用的图标来实现这一点，这在我使用 nuget 升级到新版本的 JQuery UI 并替换 png 文件之前效果很好。

**编辑：**

在我的 Site.css（它是一个 ASP.NET MVC3 应用程序）中创建了这个类，并且需要添加 !important 标志。状态没有任何问题（当按钮突出显示时，悬停等）。

```
.ui-icon-newicon
{
    background-image: url(images/delete.png) !important;
    background-position: 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:23:58.363

当然，只需添加您自己的文件并为该特定按钮提供一个 CSS 类，例如：

```
#aButton.ui-icon-custom {
    background-image: url(...);
    background-position: 0 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:24:04.570

您可以通过在 css 中为该类定义自己的样式来做到这一点：

```
.ui-icon-locked { background-image: url(images/custom.png); } 
```

# javascript - “未定义”和“缓存/xxx”附加到 URL

> ID：11501391
> 
> 赞同：8
> 
> 时间：2012-07-16T09:20:00.270
> 
> 标签：javascript, http, browser

[首先，我认为这与自 2012 年 6 月 12 日以来在我网站上 1% 的请求网址中随机附加的“未定义”](https://stackoverflow.com/questions/11017609/undefined-randomly-appended-in-1-of-requested-urls-on-my-website-since-12-jun)问题或多或少相同，但由于我是新用户，无法评论这篇文章，它没有解决方案，我只能问一个新问题。

自 2012 年 6 月 12 日 14:22 EET（第一个错误发生的那一刻）以来，我们遇到了非常奇怪的问题：对我们网站的请求中，只有不到 1% 的末尾附加了“未定义”字符串或替换了有效部分url 和referrer 是该站点的完全有效的URL。例如，我们通过referer **[http://example.com/foo/bar获得对](http://example.com/foo/bar)****[http://example.com/foo/undefined](http://example.com/foo/undefined)**的请求， 或者通过referer **[http://example获得对](http://example.com/)****[http://example.com/undefined的请求](http://example.com/undefined)****[.com/](http://example.com/)**（主页）。这些 URL 来自不同的客户端 IP 地址、不同的 ISP，浏览器通常是 Chrome，但也适用于 IE 和 Firefox 3.5。似乎有些东西正在将 URL 重写为无效的东西，将原始 URL 保留在引用者标记中。我们无法重现此问题。

我们还遇到了源帖子评论中提到的另一个问题：我们收到了[http://example.com/cache/xxx](http://example.com/cache/xxx)形式的 URL 请求， 其中 xxx 看起来像 32 个字符的 MD5 字符串（例如：3d453e96e68cc01ced7920ae77356078 或 bbc80a4244caf556fdcaa9fb60231af7）。我们的任何有效 URL 中都没有“缓存”字符串。一个相同的 xxx 字符串可能来自不同的 IP 数天，甚至数周。所有这些奇怪的请求都来自 Chrome 浏览器。这个问题不是在 2012-06-12 开始的。它至少从今年年初开始发生，但比第一次罕见得多。我们也无法重现这个问题。

我们的网站在 IIS 上，客户端大量基于 Javascript，我们使用 Prototype 框架（不是 jquery）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:12:45.077

## 答案摘要

*如果有一个错误并且没有人知道它在哪里，您将不得不调试您的代码以查找可能是错误启动器的语句。如今，我们有一些很好的工具可以帮助我们完成这项任务。*

### 假设

1.  如果 JavaScript 用于设置或更改图像位置，则有时会发生 an`undefined`进入 URI 的情况。

2.  将是一些 javascript 发出 http 请求，并且由于错误，它不是请求绝对 url，而是请求“未定义”。

**结论：**这个问题，我相信是由 JS 引起的。

### 在 Firefox 和 Chrome 上调试

**安装和运行**

*   如果你想在 Firefox 中尝试，你应该下载[FIREBUG ADDON 。](https://addons.mozilla.org/pt-BR/firefox/addon/firebug/)然后按 F12，您将看到一个带有一些选项卡的窗口。您将需要激活一些选项卡：如“控制台”、“脚本”、“网络”。激活是通过打开它们、阅读面板信息并单击激活链接来提供的。

*   对于 Chrome，只需检查是否已安装[CHROME'S DEVELOPERS TOOL 。](https://developers.google.com/chrome-developer-tools/docs/overview)然后按 F12。

**调试**

*   在 Firefox 中，打开 Firebug 并激活 Net 面板，导航到一个有漏洞的页面。在 Net 面板中会有几个选项：“Clear”、“Persist”、“All”、“Html”等。确保选择**ALL**选项。不要在页面上做任何事情，尽量不要将鼠标悬停在上面的任何内容上。查看 GET 和 POST 请求。对无效 URL 的请求可能会显示为红色，并且状态为 404 Not Found 等。如果“全部”选项卡中没有出现任何内容，请确保您在进入页面之前打开了 Firebug。要进行故障排除，请刷新页面并重做该部分。

*   在 Chrome 中，使用 CDT（Chrome 开发者工具的缩写）导航到一个错误页面，打开并选择网络面板。作为 Firebug，请确保选择**ALL**选项，它将位于图标之后的左下角。不要在页面上做任何事情，尽量不要将鼠标悬停在上面的任何内容上。对无效 URL 的请求可能会显示为红色，并且状态为 404 Not Found 等。如果“网络”选项卡中没有出现任何内容，请确保您在进入页面之前打开了 CDT。要进行故障排除，请刷新页面并重做该部分。

**还是看不到**

*   对于两者，开始触发一些 Javascript 事件，例如悬停、单击 e 等，并注意面板。它将跟踪您的所有请求，好的和坏的。专注于糟糕的请求，如果没有出现糟糕的请求，这将需要创造力。这些事件将触发请求，您将能够看到它们。看到它们，您将能够知道或发现问题以及可能导致该问题的原因。更多资源[CDT 网络](https://developers.google.com/chrome-developer-tools/docs/network)和[Firebug 网络](http://getfirebug.com/network/)。

*PS.：如果面板变脏，请单击清除按钮或图标以清除面板中的请求*

*   如果您提交页面并看到失败的请求很快就消失了，但由于下一页加载而丢失它，请通过单击 Firebug 上的“Persist”或 Net 面板左上角的“Preserve log”图标或在网络面板的左下角。一旦它发生了，它应该考虑你做了什么来实现它。看看你能不能让它再次发生。在弄清楚是什么用户交互导致它发生后，深入研究该代码并开始寻找发出无效请求的东西，并且永远不要忘记查看请求标头。您可以使用“脚本”选项卡在 JavaScript 中设置断点并单步执行它们。调查通过 $(element).bind/click/focus/etc 或从老派事件属性（如 onclick=""/onfocus="" 等）完成的事件处理程序。

*   如果您无法触发错误请求，那么导致它的任何原因都不会被您的测试触发。尝试使用更多的东西。关键是您应该能够以某种方式使请求发生。你只是还不知道。它必须显示在网络面板中。唯一不会发生的情况是当你没有做任何触发它的事情时。

**我们在您的代码中寻找什么**

```
var url = workingUrl + someObject['someProperty'];

var url = workingUrl + someObject.someProperty;

var url = workingUrl + $.md5("message"); //For the /cache/ problem. JQuery Plugin

var url = workingUrl + hex_md5("message"); //For the /cache/ problem. MD5 Implementation

<a href= "javascript:;" class="small_img" >
  //Code here
</a>

window.open('/image.?url_image=' + currentImage,winName,features); 
```

*PS.: someObject 可能是 object `{}`、 array`[]`或任何内部浏览器类型。关键是将访问一个不存在的属性。*

**结论：**这里没有免费的午餐可以知道到底发生了什么。但是使用调试的方法，您应该能够发现、接近或理解问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:29:18.860

我可以从给定的情况假设是，由于该网站是大量基于 Javascript 的......有很多 ajax 调用正在进行。而且我更有可能假设这些是在 Javascript 代码中生成的带有未定义参数的 ajax 请求。

出于调试目的（在开发模式下）您应该在发出 ajax 请求之前验证 ajax url，并且每当您发现 undefined 时将其转移到虚拟页面并尝试尽可能多地获取详细信息。

这种事情主要发生在一个异步请求依赖于其他异步请求时。如果不查看代码或示例，很难提出任何建议，但我希望在您的应用程序中添加更多调试功能并获取越来越多的细节将能够识别问题。

在某个地方，我觉得这没什么大不了的，只是在你的繁重的 JavaScript 应用程序中的某个点，你错过了或被忽视了。

发布更多详细信息，以便我们在 stackoverflow 为您提供帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T16:51:10.550

如果它只是一些浏览器/平台错误怎么办？

我在 Drupal 7 网站以及连接到 Drupal 的普通 HTML+CSS（没有任何 JS）迷你站点上看到 /undefined 404，以提供一些特定的内容。

看起来它几乎总是一个 Chrome/Safari 问题，到处都有一些 IEx，比如这个：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727； .NET CLR 3.5.30729；.NET CLR 3.0.30729；媒体中心 PC 6.0；InfoPath.2；.NET4.0C；.NET4.0E)

通过快速日志搜索，Firefox 永远不会发生这种情况。

/undefined 请求出现在页面渲染结束时，在请求 CSS 和图像之后。而且它 ** 不会 ** 再次发生在几乎相同的第二个页面，并重复使用第一个页面的布局、CSS 和图像。

我的两分钱...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T17:28:38.813

根据这篇[文章](http://productforums.google.com/d/msg/chrome/G1snYHaHSOc/p8RLCohxz2kJ)，我对“Complitly”Chrome 插件/恶意软件进行了逆向工程，发现此扩展程序正在注入“改进的自动完成”功能，该功能在每个输入文本字段为 NAME 或“搜索”、“q”和许多其他的 ID。

我还发现 enable.js 文件（complitly 文件之一）正在检查一个名为“suggestmeyes_loaded”的全局变量，以查看它是否已经加载（如 Singleton）。因此，将此变量设置为 true 会禁用插件。

**TL：博士；**

要禁用恶意软件并停止“未定义”请求，请将其应用于您网站上具有搜索字段的每个页面：

```
<script type="text/javascript">
    window.suggestmeyes_loaded = true;
</script> 
```

此恶意软件还会将您的用户重定向到“searchcompletion.com”网站，有时会显示竞争对手的 ADS。所以，应该认真对待。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-29T19:44:01.970

可能，**缓存/xxx**请求是 chrome/chromium 扩展错误（尚未修复）：

[http://code.google.com/p/chromium/issues/detail?id=132059](http://code.google.com/p/chromium/issues/detail?id=132059)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T09:54:48.370

看起来像是您可能正在使用的第 3 方代码（例如库、框架或某些外部 JS 文件，如 Google Analytics）。

一个更丰富多彩的替代方案是您网站中的注入漏洞，攻击者正在使用该漏洞，有时会生成这些 URL。我猜这个注入的代码也算作 3rd-party 代码。

# html - 在 Html.ActionLink 文本中显示 HTML 代码，如 ® 或 ©

> ID：11501394
> 
> 赞同：2
> 
> 时间：2012-07-16T09:20:10.217
> 
> 标签：html, asp.net-mvc, html.actionlink

不幸的是，我对这个主题的研究没有成功。使用锚标签，我能够做到这一点：

```
<a href="..."> My Link &reg </a> 
```

现在我希望与 Html.Actionlink 相同：

```
@Html.ActionLink("My Link &reg", "Action") 
```

但是输出与输入相同，而不是预期的 reg 符号。任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:30:15.293

```
@Html.ActionLink("My Link ®", "Action") 
```

或者

```
<a href="@Url.Action("Action")"> My Link &reg </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T20:12:13.210

这是我在 MVC 2 中解决这个问题的方法：

```
/// <summary>
/// Creates an anchor tag based on the passed in controller type and method.
/// Does NOT encode passed in link text.
/// </summary>
/// <typeparam name="TController">The controller type</typeparam>
/// <param name="htmlHelper">The HTML helper</param>
/// <param name="action">The method to route to</param>
/// <param name="linkText">The linked text to appear on the page</param>
/// <returns>A formatted anchor tag</returns>
public static MvcHtmlString ActionLink<TController>( this HtmlHelper htmlHelper,
                                                     Expression<Action<TController>> action,
                                                     HtmlString linkText ) where TController : Controller
{
    return ActionLink( htmlHelper, action, linkText, null, null );
}

/// <summary>
/// Creates an anchor tag based on the passed in controller type and method.
/// Does NOT encode passed in link text.
/// </summary>
/// <typeparam name="TController">The controller type</typeparam>
/// <param name="htmlHelper">The HTML helper</param>
/// <param name="action">The method to route to</param>
/// <param name="linkText">The linked text to appear on the page</param>
/// <param name="routeValues">The route values</param>
/// <param name="htmlAttributes">The HTML attributes</param>
/// <returns>A formatted anchor tag</returns>
public static MvcHtmlString ActionLink<TController>( this HtmlHelper htmlHelper,
                                                     Expression<Action<TController>> action,
                                                     HtmlString linkText,
                                                     object routeValues,
                                                     object htmlAttributes ) where TController : Controller
{
    var routingValues = GetRouteValuesFromExpression( action, routeValues );

    var url = UrlHelper.GenerateUrl( null, //routeName
                                     null, //actionName
                                     null, //controllerName
                                     routingValues,
                                     htmlHelper.RouteCollection,
                                     htmlHelper.ViewContext.RequestContext,
                                     false ); //includeImplicitMvcValues

    var tagBuilder = new TagBuilder("a")
        { 
            InnerHtml = !String.IsNullOrEmpty( linkText.ToString() ) ? linkText.ToString() : String.Empty
        };

    tagBuilder.MergeAttributes( (IDictionary<string, object>)htmlAttributes );
    tagBuilder.MergeAttribute( "href", url );

    return MvcHtmlString.Create( tagBuilder.ToString( TagRenderMode.Normal ) );
} 
```

它是强类型的，就像在 MVC 期货 NuGet 包中一样。所以你可以像这样使用它：

```
<%= Html.ActionLink<HomeController>( x => x.Index(),
                                     new HtmlString( "Don't Encode Me!<sup>&reg;</sup>" ) ) %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:31:10.513

ActionLink 总是对链接文本使用 HttpUtility.Encode 调用。

您可以使用 UrlHelper 方法，例如

```
<a href="@Url.Action("Action")">My Link &reg</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T09:59:49.610

您可以使用[`HtmlString`](http://msdn.microsoft.com/en-us/library/system.web.htmlstring.htmlstring.aspx)( `MvcHtmlString`in [.NET 2 / MVC 2](https://stackoverflow.com/questions/3382860/htmlstring-vs-mvchtmlstring) ) 表示您不希望它被重新编码：

```
@Html.ActionLink(new HtmlString("My Link &reg"), "Action"); 
```

# jboss - 调试 [org.jboss.naming.Naming] 写入响应 /127.0.0.1 java.net.SocketException 时出错

> ID：11501395
> 
> 赞同：5
> 
> 时间：2012-07-16T09:20:14.243
> 
> 标签：jboss, intellij-idea

启动运行/调试配置后开始构建和部署应用程序。一切顺利。唯一持续提供 JBoss Log SocketException 的东西：

![在此处输入图像描述](../Images/935befc5a817d9e748ee0cf562a0cf09.png)

```
2012-07-16 12:43:30,424 DEBUG [org.jboss.naming.Naming] Error writing response to /127.0.0.1 java.net.SocketException: Software caused connection abort: socket write error at java.net.SocketOutputStream.socketWrite0(Native Method) at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92) at java.net.SocketOutputStream.write(SocketOutputStream.java:136) at java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1847) at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1756) at java.io.ObjectOutputStream.writeNonProxyDesc(ObjectOutputStream.java:1257) at java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1211) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1395) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) at java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1547) at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:333) at org.jnp.server.Main$BootstrapRequestHandler.run(Main.java:516) at org.jboss.util.threadpool.RunnableTaskWrapper.run(RunnableTaskWrapper.java:148) at EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:756) at java.lang.Thread.run(Thread.java:662) 
```

在 issues.jboss.org/browse/JBAS-3417 提供解决方案： *如果您将服务器 /etc/host 设置为：IP fqn name where IP is in «Error writing response to / IP" Ex: ..."Error writing response to /10.1.0.1" 10.1.0.1 test.mydomain 测试你解决问题*

但是我有 127.0.0.1 localhost，它已经注册在默认的 c:\Windows\system32\drivers\etc\hosts

在[故障排除](https://docs.google.com/viewer?a=v&q=cache:4oei_s0GlncJ:cagrid.org/spaces/flyingpdf/pdfpageexport.action?pageId=16023560%20%22Error%20writing%20response%20to%20/127.0.0.1%22&hl=kk&gl=kz&pid=bl&srcid=ADGEESix9tdr0wSLvt0DpYM08AKbJkMRndOUW-qLM58etwOOxVGghrTkBk5SmbBhFrn9uwc0TApCZsGI5izNpTArhlVnXE1zlvXtR3lFiAXqlfx7ojl1PKEU1i2ixTYr8cz54WVNfHlg&sig=AHIEtbRizF7FbN0qdNxKFIn46O_tdPYeoA)中说： *您可能会在 JBoss 日志中注意到类似于以下内容的内容：*

```
2009-01-28 08:36:57,381 DEBUG
[org.jboss.naming.NamingService]
Error writing response to / 127.0.0.1 <[http://127.0.0.1]>
java.net.SocketException: Broken pipe
at java.net.SocketOutputStream.socketWrite0 (Native Method) 
```

*这很可能是一个异常且良性的“问题”。也就是说，它不应影响部署到 JBoss 的任何应用程序的运行。*

如果这不影响部署的应用程序可以用什么方法隐藏它？然后连续输出盖过了其他帖子，吃掉了内存。

# android - 将arraylist值存储到不同的textview

> ID：11501396
> 
> 赞同：1
> 
> 时间：2012-07-16T09:20:27.617
> 
> 标签：android, arraylist

您好，我在`ArrayList`现在设置值如何将这些值存储在不同的文本视图中。

例如：

```
ArrayList<String> mylist =new ArrayList<String>();
for(int i=0;i<mylist.size();i++)
{
    //Here mylist contains 10 values and I have 10 different textviews. Now How can i add values 1 to 10 in different textview. set value to First textview 1,second textview to 2 etc.
} 
```

请帮我找到这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:29:25.200

这是方法::

```
TextView []tv=new TextView[10];
tv[0]=(TextView)findViewById(R.id.____);
tv[1]=(TextView)findViewById(R.id.____);
tv[2]=(TextView)findViewById(R.id.____);
tv[3]=(TextView)findViewById(R.id.____);
tv[4]=(TextView)findViewById(R.id.____);
tv[5]=(TextView)findViewById(R.id.____);
tv[6]=(TextView)findViewById(R.id.____);
tv[7]=(TextView)findViewById(R.id.____);
tv[8]=(TextView)findViewById(R.id.____);
tv[9]=(TextView)findViewById(R.id.____);

for(int i=0;i<mylist.size();i++)
{
  tv[i].setText(mylist.get(i));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:32:21.027

```
LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout1);

            ArrayList<String> mylist = new ArrayList<String>();
            mylist.add("1");
            mylist.add("2");
            mylist.add("3");
            mylist.add("4");
            LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            for (int i = 0; i < mylist.size(); i++) 
            {
                TextView tv = new TextView(this);
                tv.setLayoutParams(lparams);
                tv.setText(mylist.get(i));
                layout.addView(tv);
            } 
```

和 XML 文件

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:35:38.653

If u have the same no of text views and the data then create a array of views then use for loop as:

```
 ArrayList<String> mylist =new ArrayList<String>();
        mylist.add("1st");
        mylist.add("2nd");
        mylist.add("3rd");
        mylist.add("4th");
//        mylist.add("5th");
        one=(TextView)findViewById(R.id.textView1);
        two=(TextView)findViewById(R.id.textView2);
        three=(TextView)findViewById(R.id.textView3);
        four=(TextView)findViewById(R.id.textView4);
        ArrayList<TextView>text=new ArrayList<TextView>(Arrays.asList(one,two,three,four));

        for(int i=0;i<mylist.size();i++)
        {
            text.get(i).setText(mylist.get(i));
            //Here mylist contains 10 values and I have 10 different textviews. Now How can i add values 1 to 10 in different textview. set value to First textview 1,second textview to 2 etc.
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T09:26:33.097

然后你不需要for循环。只需手动将文本设置为您的文本视图

作为

```
ArrayList<String> mylist =new ArrayList<String>();
TextView txt1 = (TextView)findviewbyId(R.id.txt1);
txt1.setText(mylist.get(0);

....//upto 10 textViews

TextView txt10 = (TextView)findviewbyId(R.id.txt10);
txt10.setText(mylist.get(9); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T09:35:08.083

You could try something like this:

```
for(int i=0;i<mylist.size();i++)
{
    TextView tv = findViewById(getResources().getIdentifier("textView"+i, "id",getPackageName())); 
    tv.setText(mylist.get(i));
} 
```

I'm not sure that is you want to do. I used the [`getIdentifier`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29) method to retrieve your textViews. Else, you can inflate your textViews in a loop:

```
for(int i=0;i<mylist.size();i++)
{
    TextView tv = (TextView)LayoutInflater.from(context).inflate(R.layout.myTextView, null); 
    tv.setText(mylist.get(i));
} 
```

Hope this will help you

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T09:23:42.297

你不需要在这里循环

您需要调用`textView.setText(mylist.get(0));`...您需要调用此方法 10 次，并在 get 方法中增加值.. 并使用 diff 文本视图实例。

**编辑：与您的评论一样：**这里假设您已经创建

```
TextView [] tv; // you need to initialized array here with textviews
ArrayList<String> mylist =new ArrayList<String>();
for(int i=0;i<mylist.size();i++)
{

tv[i].setText(mylist.get(i));
   } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-10T12:09:32.027

```
for(int i=0;i<mylist.size();i++)
{
  tv[i].setText(mylist.get(i));
} 
```

# sql - 表中唯一标识符列的索引

> ID：11501402
> 
> 赞同：0
> 
> 时间：2012-07-16T09:20:48.883
> 
> 标签：sql, sql-server, sql-server-2008, indexing, clustered-index

我创建了一个表，其中我使用唯一标识符（GUID）作为表的主键。现在我需要在我的表上创建一个最适合我的索引..我将使用这个表来记录错误。

以下是我的表结构

```
CREATE TABLE [dbo].[errors](
[error_id] [uniqueidentifier] NOT NULL,
[assembly_name] [varchar](50) NULL,
[method_name] [varchar](50) NULL,
[person_id] [int] NULL,
[timestamp] [datetime] NULL,
[description] [varchar](max) NULL,
[parameter_list] [varchar](max) NULL,
[exception_text] [nvarchar](max) NULL) 
```

那么我使用哪个表作为主键和索引。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:37:59.713

您可以将其用作 PK，但如果将其用作聚集索引则效果不佳。在这种情况下，GUID 将被复制到所有 nc 索引键中，从而使它们更宽，并可能导致性能问题。此外，这可能会导致页面溢出这不好。宽索引意味着将使用更多空间。如果您使用 GUID 来避免最后一页争用问题，请尝试使用某种散列技术来确保数据在差异页面上进行。但在这种情况下，您有在使用 PK 选择表单表时使用相同的散列。

# wpf - 键绑定到“？”

> ID：11501405
> 
> 赞同：0
> 
> 时间：2012-07-16T09:21:03.543
> 
> 标签：wpf, datagrid, key-bindings

当用户输入“？”时，我正在尝试将键绑定添加到 wpf 数据网格上。并尝试了以下方法：

```
<DataGrid.InputBindings>
            <KeyBinding Command="{Binding Path=OpenPrompt}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}, Path=CurrentCell}" Key="OemBackslash" Modifiers="Shift"/>
</DataGrid.InputBindings> 
```

我也尝试过将键设置为“反斜杠”和“除法”。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:13:58.863

根据[密钥枚举](http://msdn.microsoft.com/en-us/library/system.windows.input.key%28v=vs.85%29.aspx)，它必须是`OemQuestion`

我厌倦了它并且它有效：

```
 <DataGrid.InputBindings>
        <KeyBinding Command="{Binding Path=MyCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}, Path=CurrentCell}" Key="OemQuestion" Modifiers="Shift"/>
    </DataGrid.InputBindings> 
```

也许您有绑定问题？

# objective-c - 通过不同的控制器使用外部变量

> ID：11501406
> 
> 赞同：0
> 
> 时间：2012-07-16T09:21:04.123
> 
> 标签：objective-c, xcode, mkmapview, global-variables, viewcontroller

我正在尝试制作一个应用程序（使用故事板），我想用事件填充它。在我的 MapViewController.h 我有：

```
#imports

extern NSMutableArray* events;

@interface MapViewController : etc, etc{
..
} 
```

所以我想要的是能够将这个 .h 文件导入到我的 AppDelegate.m 文件中，并在 appDidFinishLoading 中执行如下操作：

```
Event *event =  [[Event alloc] init];
event.blabla = blabla;
...
[events addObject:event]; 
```

同时在我的 MapViewController.m 中，我想要一个将这些事件添加到我的 MKMapView 的函数（在我的 mapviewcontroller 中定义并称为 worldView）

所以：

```
@implementation MapViewController.m

-(void)setEvents{
    for(int i = 0; i<[events count]; i++)
        [worldView addAnnotation:[events objectAtIndex:i]];
}

... 
```

正如您可能已经猜到的那样，它在构建的链接部分失败并出现以下错误：

```
Undefined symbols for architecture armv7:
"_events", referenced from:
-[AppDelegate applicationdidFini... ]
-[MapViewController setEVents] in ...
..
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

所以..是的..请帮忙^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:34:54.043

**永远不要为了这样的目的使用全局变量，它们是邪恶的。**

最好使用基于单例（即所谓的设计模式）的方法来创建类似于“管理器”（例如 EventManager 类）的东西，以便在独立控制器之间共享数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:09:22.333

有更好的模式，例如 yan.kun 提到的单例模式，但是您尝试做的事情的方式是将这一行放在 AppDelegate.m 之外`@implementation`：

```
NSMutableArray* events; 
```

这为其提供了一个全局空间，因此您不会收到链接器错误。然后，您需要在*使用它的各种类中的任何一个需要它之前*初始化 events 数组。稳健地解决这个初始化问题是其他模式更好的原因之一。在您的情况下，您可能可以在 AppDelegate 完成启动方法的早期就这样做。

PS 如果您必须使用全局变量，请不要将它们命名为“事件”，因为名称冲突的可能性非常高。

# c++ - 在抽象类中复制控件

> ID：11501409
> 
> 赞同：0
> 
> 时间：2012-07-16T09:21:12.043
> 
> 标签：c++, shared-ptr, copy-constructor

我有一个抽象类和两个具体子类（Store），它们都有一个指向另一个从抽象类（Factory）派生的具体子类的指针。下面是商店的代码。我想防止内存泄漏，所以我开始编写复制控件。但是我不能实例化一个新的工厂，因为我不知道它会是什么类型。规避这种情况的好习惯是什么？我可以在具体的商店中编写复制控件，但是我有重复的代码。我也尝试使用智能指针，但我发现了另一个困难。该片段`myFactory = std::make_shared<AbstractFactory>(ConcreteFactoryA());`显然首先创建了一个 AbstractFactory，然后用 ConcreteFactoryA 填充它。然而，顾名思义，AbstractFactory 不能被实例化，正如编译器告诉我的那样。您可以将 shared_ptrs 与抽象类一起使用吗？

带有普通指针的代码：

```
#pragma once
#include "AbstractFactory.h"

class AbstractStore
{
public:
    // Copy control
    AbstractStore(const AbstractStore& orig) : myFactory(new AbstractFactory(orig.myFactory)) {}
    AbstractStore& operator=(const AbstractStore& orig) { return *this; } // TODO
    ~AbstractStore(void) {}
protected:
    // Constructor
    AbstractStore(void) {}
    // Data members
    AbstractFactory* myFactory;
};

class ConcreteStoreA : public AbstractStore
{
public:
    ConcreteStoreA(void) { myFactory = new ConcreteFactoryA; }
    ~ConcreteStoreA(void) {}
};

class ConcreteStoreB : public AbstractStore
{
public:
    ConcreteStoreB(void) { myFactory = new ConcreteFactoryB; }
    ~ConcreteStoreB(void) {}
}; 
```

带有智能指针的代码：

```
#pragma once
#include "AbstractFactory.h"
#include <memory>

class AbstractStore
{
public:
    // Copy control
    AbstractStore(const AbstractStore& orig) : myFactory(orig.myFactory) {}
    AbstractStore& operator=(const AbstractStore& orig) { myFactory = orig.myFactory; return *this; }
    ~AbstractStore(void) {}
protected:
    // Constructor
    AbstractStore(void) {}
    // Data members
    std::shared_ptr<AbstractFactory> myFactory;
};

class ConcreteStoreA : public AbstractStore
{
public:
    ConcreteStoreA(void) { myFactory = std::make_shared<AbstractFactory>(ConcreteFactoryA()); }
    ~ConcreteStoreA(void) {}
};

class ConcreteStoreB : public AbstractStore
{
public:
    ConcreteStoreB(void) { myFactory = std::make_shared<AbstractFactory>(ConcreteFactoryB()); }
    ~ConcreteStoreB(void) {}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:29:32.357

你没有`make_shared`正确使用。利用：

```
std::make_shared<ConcreteFactory>(); 
```

你在这里没有任何参数地调用它。`make_shared`不接受构造对象，而是转发给它的构造函数的参数。在您的情况下，您将转发到复制构造函数，该构造函数在抽象层次结构中效果不佳。如果您想要层次结构中的可复制对象，请使用`clone`具有协变返回类型的成员函数。

这将返回将在赋值`shared_ptr<ConcreteFactory>`中转换为的 a（请参见[此处](http://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr)的 (9) 。此外，使用构造函数初始化程序列表和虚拟析构函数。`shared_ptr<AbstractFactory>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:33:19.817

您可能需要以下两件事之一来使您的智能指针方法起作用：

1.  制作`ConcreteFactoryA`并`ConcreteFactoryB`返回一个`std::shared_ptr<AbstractFactory>`or `std::unique_ptr<AbstractFactory>`。只需在您的“存储”类中分配或更好地初始化

2.  使用构造函数`shared_ptr<>`从原始指针初始化你的 s`std::shared_ptr<>::reset`

您通常只使用与原始指针一起使用`std::make_shared<>`的智能指针。`new`在您的情况下，您只是分配指针，因此您不应该使用它。

# c# - SAPI 5 语音合成和 C#

> ID：11501411
> 
> 赞同：4
> 
> 时间：2012-07-16T09:21:13.947
> 
> 标签：c#, text-to-speech, sapi

我已经安装了新的 SAPI5 语音。在语音程序的计算机设置中，新语音可见并可使用。但是我的程序找不到它。为了找到它，我正在使用这部分代码，我使用`System.Speech.Synthesis`命名空间。

```
SpeechSynthesizer s = new SpeechSynthesizer();
foreach (InstalledVoice v in s.GetInstalledVoices())
{
    st += v.VoiceInfo.Name+"\n";
}

MessageBox.Show(st); 
```

找到的唯一声音是 Microsoft Anna。我的演讲代码如下：

```
s.SelectVoice("Eliska22k");//name of the voice is Eliska22k

s.Speak("ahoj"); 
```

我正在使用 C# 4，并且我有 windows vista 32 位。我的错误在哪里？是在代码中还是在其他任何地方？

**编辑：** 请求的注册表值：

在*HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices*

DefaultTokenId：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\TokenEnums\Infovox Desktop v2.2\Eliska22k

默认TTSRate: 0

在*HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\TokenEnums\Infovox Desktop v2.2\Eliska22k*

405：埃利斯卡（捷克）SAPI5

CLSID：{F8E89351-F6B9-4C98-91F9-A967BA752655}

语音数据：Eliska22k

在*HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\TokenEnums\Infovox Desktop v2.2\Eliska22k\Attributes*

年龄：成人

音频格式 18

性别女

语言：405；5

名称：Eliska22k

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T15:49:35.743

您可以尝试更改 .NET 项目的目标平台和框架版本。某些声音仅支持 x86。

# php - 当我将两个脚本添加到 html 页面时..一个不起作用

> ID：11501412
> 
> 赞同：1
> 
> 时间：2012-07-16T09:21:15.733
> 
> 标签：php, javascript, jquery

我创建了两个 jquery 和和脚本标签来日历确认..但是当它们在单独的 html 页面中时效果很好..但是当两个脚本在同一页面中时它不起作用..为什么会这样？

```
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script>

$(document).ready(function(){

 $('#click').click(function(){
    //$(function() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Ok": function() {

                    $('#form1').submit();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    });
</script>

<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script type="text/javascript" src="jsdatepick-calendar/jquery.1.4.2.js"></script>
<script type="text/javascript" src="jsdatepick-calendar/jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript" src="jquery/fadeslideshow.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:28:01.030

尝试重新排序脚本，这可能会导致问题。您多次使用 jQuery，这很可能是您的问题的原因。

此外，您应该尝试格式化代码以使其更清楚发生了什么。例如`type`，为了便于阅读，我将脚本标签放在了开头。

你`Cancel`有没有特别在你的对话中不加引号？我已经在下面纠正了这一点。

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js" ></script>
<script type="text/javascript" src="Scripts/jquery-ui-1.8.21.custom.min.js"></script>
<!--jQuery again here?--><script type="text/javascript" src="jsdatepick-calendar/jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript" src="jquery/fadeslideshow.js"></script>    
<script type="text/javascript">

$(document).ready(function(){

    $('#click').click(function(){

        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height: 140,
            modal: true,
            buttons: {
                "Ok": function() {
                    $('#form1').submit();
                },
                "Cancel": function() {
                    $( this ).dialog( "close" );
                }
            }
        })
    })
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:55:32.760

```
( function($$$) {

    $$$(document).ready(function(e) {
        //Code here
    });

} ) ( jQuery ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:25:48.143

看看jQueries没有冲突。 [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

这使得您可以使用来自不同 jQuery 版本/库的某些函数。

# java - 是否可以从 InputStream 创建一个 File 对象

> ID：11501418
> 
> 赞同：160
> 
> 时间：2012-07-16T09:21:41.313
> 
> 标签：java, io

有没有办法`java.io.File`从一个对象创建一个`java.io.InputStream`？

我的要求是从 RAR 读取文件。我不是想写一个临时文件，我在 RAR 存档中有一个文件，我想读取它。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-16T09:23:46.743

您需要创建新文件并将内容复制`InputStream`到该文件：

```
File file = //...
try(OutputStream outputStream = new FileOutputStream(file)){
    IOUtils.copy(inputStream, outputStream);
} catch (FileNotFoundException e) {
    // handle exception here
} catch (IOException e) {
    // handle exception here
} 
```

我使用方便[`IOUtils.copy()`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#copy(java.io.InputStream,%20java.io.OutputStream))以避免手动复制流。它还具有内置缓冲功能。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2016-12-09T17:03:02.583

在一行中：

```
FileUtils.copyInputStreamToFile(inputStream, file); 
```

(org.apache.commons.io)

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-09-20T12:40:39.463

从 Java 7 开始，即使不使用任何外部库，您也可以在一行中完成：

```
Files.copy(inputStream, outputPath, StandardCopyOption.REPLACE_EXISTING); 
```

请参阅[API 文档](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-)。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-12-21T00:28:39.977

首先创建一个临时文件。

```
File tempFile = File.createTempFile(prefix, suffix);
tempFile.deleteOnExit();
FileOutputStream out = new FileOutputStream(tempFile);
IOUtils.copy(in, out);
return tempFile; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-07-18T05:31:09.783

如果您不想使用其他库，这里有一个简单的函数，可以将数据从 an 复制`InputStream`到`OutputStream`.

```
public static void copyStream(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while ((read = in.read(buffer)) != -1) {
        out.write(buffer, 0, read);
    }
} 
```

现在，您可以`Inputstream`使用以下命令轻松地将 a 写入文件`FileOutputStream`-

```
FileOutputStream out = new FileOutputStream(outFile);
copyStream (inputStream, out);
out.close(); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-16T20:25:54.083

## 使用资源块*尝试的*简单 Java 9 解决方案

```
public static void copyInputStreamToFile(InputStream input, File file) {  

    try (OutputStream output = new FileOutputStream(file)) {
        input.transferTo(output);
    } catch (IOException ioException) {
        ioException.printStackTrace();
    }

} 
```

[java.io.InputStream#transferTo](https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#transferTo-java.io.OutputStream-)从 Java 9 开始可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-08T15:52:22.740

如果您使用的是 Java 版本 7 或更高版本，则可以使用[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)正确关闭`FileOutputStream`. 以下代码使用[`IOUtils.copy()`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#copy(java.io.InputStream,%20java.io.OutputStream))commons [-io](http://commons.apache.org/proper/commons-io/)。

```
public void copyToFile(InputStream inputStream, File file) throws IOException {
    try(OutputStream outputStream = new FileOutputStream(file)) {
        IOUtils.copy(inputStream, outputStream);
    }
} 
```

# eclipse - 如何在 Eclipse 文本编辑器中为我的格式突出显示语法？

> ID：11501419
> 
> 赞同：0
> 
> 时间：2012-07-16T09:21:42.300
> 
> 标签：eclipse, eclipse-plugin, syntax-highlighting, text-editor, file-association

我需要在 Eclipse 文本编辑器中对具有特定结构的文本进行语法高亮显示。方案很简单；基本上每行有六个由空格分隔的单词，以#开头的行是注释。最重要的是突出显示注释，但单独为非注释行中的六个元素着色会很有用。

如果获取起来太复杂，也许我可以使用现有的插件，用于具有类似语法的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:52:07.863

如果您想编写自己的编辑器，可以尝试[XText](http://www.eclipse.org/xtext)。使用 XText，您可以为自己的 DSL（域特定语言）编写编辑器，我怀疑这就是您所拥有的。编辑器还支持自动完成和其他不错的功能。到目前为止我还没有尝试过 XText，但我听说它很容易学习。

如果注释的突出显示就足够了，您还可以尝试分配文件结尾，如属性文件的配置，因为属性文件中的注释也是一个#。您可以在 Window -> Preferences -> Editors -> File Associations 中编辑配置，然后为您的文件类型选择 Properties File Editor。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T15:38:34.627

这正是 LiClipse ( [http://brainwy.github.io/liclipse/](http://brainwy.github.io/liclipse/) ) 的目标之一：轻松地做一个针对 Eclipse 的具有语法高亮、基本代码完成、大纲等的编辑器。

添加新语言不需要Java技能（主要是在适当的位置创建一个新的.liclipse - 这是一个YAML - 文件并创建一些基本规则来说明如何划分您的语言 - 即：通常只是分离代码来自字符串的注释——并指定分区中的关键字已经可以为您提供正确的语法突出显示）。

如果您下载它，在 plugins\com.brainwy.liclipse.editor\languages 有许多示例，在[http://brainwy.github.io/liclipse/supported_languages.html](http://brainwy.github.io/liclipse/supported_languages.html)和[http://brainwy有一些基本文档.github.io/liclipse/scope_definition.html](http://brainwy.github.io/liclipse/scope_definition.html)如何做到这一点。

# iphone - 设备中的声音问题

> ID：11501420
> 
> 赞同：0
> 
> 时间：2012-07-16T09:21:45.930
> 
> 标签：iphone, audio

```
NSString *musicPath = [[NSBundle mainBundle] pathForResource:@"ding" ofType:@"mp3"];
if (musicPath)
{
    if(TapSoud)
    { 
        [TapSoud release];
        TapSoud = nil;
    }
    TapSoud = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:musicPath] error:nil];
}

[TapSoud setDelegate:self];
[TapSoud prepareToPlay];
[TapSoud play];

NSString *musicPath1 = [[NSBundle mainBundle] pathForResource:@"roadrunner" ofType:@"mp3"];
if (musicPath1)
{
    if(MatchSoud)
    { 
        [MatchSoud release];
        MatchSoud = nil;
    }
    MatchSoud = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:musicPath1] error:nil];
}

[MatchSoud setDelegate:self];
[MatchSoud prepareToPlay];

NSString *musicPath2 = [[NSBundle mainBundle] pathForResource:@"Wrong Answer" ofType:@"wav"];
if (musicPath2)
{
    if(WrongMatchSoud)
    { 
        [WrongMatchSoud release];
        WrongMatchSoud = nil;
    }
    WrongMatchSoud = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:musicPath2] error:nil];
}

[WrongMatchSoud setDelegate:self];
[WrongMatchSoud prepareToPlay]; 
```

此代码在模拟器中正常工作，但在设备上不产生声音。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:34:08.193

最可能的问题是在项目或资源复制阶段缺少音频文件。即使从项目中删除，模拟器也会存储先前复制的资源，直到应用程序从模拟器中完全删除。

确保`musicPath`和不为空且有效`musicPath1`。`musicPath2`

# r - 在 R 中对数据进行排序以及如何提取值？

> ID：11501431
> 
> 赞同：0
> 
> 时间：2012-07-16T09:22:16.917
> 
> 标签：r

这是我的数据集，我是 R 新手，我正在尝试为此数据集编写脚本。

```
R> head(KenTau)
  Age CapReg TrSw FeelChk CanSw
1  20      1    0       0     0
2  36      1    0       0     0
3  35      1    3       2     2
4  21      0    0       2     2
5  43      0    0       2     2
6  34      1    0       0     0 
```

我想将 TrSw 与 colmn 变量的其余部分进行比较，即

```
TrSw Vs Age
TrSw Vs CapReg  
TrSw Vs FeelChk 
TrSw Vs CanSw 
```

我用这个在 R 上运行它，我用这个命令

```
cor.test(KenTau$Age, KenTau$TrSw, alternative="two.sided", method="kendall") 
```

我还想提取 Age 和 pvalue 以便我可以有一个列表，因为我有接近 50 个变量。

**`dput()`**数据的：

```
KenTau <- structure(list(Age = c(20L, 36L, 35L, 21L, 43L, 34L, 37L, 62L, 
54L, 47L, 48L, 45L, 2L, 2L, 2L, 54L, 52L, 40L, 58L, 29L, 27L, 
28L, 46L, 35L, 50L, 31L, 48L, 2L, 29L, 54L, 52L, 28L, 28L, 26L, 
38L, 59L, 51L, 58L, 39L, 44L, 53L, 2L, 39L, 55L, 48L, 2L, 23L, 
51L, 50L, 26L, 28L, 40L, 38L, 61L, 52L, 33L, 2L, 59L, 27L, 45L, 
45L, 57L, 66L, 52L, 58L, 34L, 28L, 39L, 48L, 53L, 39L, 46L, 57L, 
36L, 25L, 22L, 29L, 46L, 25L, 25L, 35L, 44L, 24L, 26L, 33L, 27L, 
41L, 28L, 26L, 32L, 36L, 35L, 32L, 33L, 29L, 29L, 52L, 55L, 23L, 
29L, 45L, 26L, 48L, 54L, 50L, 35L, 27L, 39L, 41L, 30L, 30L, 31L, 
27L, 28L, 27L, 25L, 34L, 23L, 30L, 34L, 52L, 20L, 31L, 2L, 45L, 
34L, 21L, 60L, 34L, 40L, 47L, 30L, 54L, 36L, 32L, 31L, 55L, 57L, 
23L, 31L, 26L, 26L, 27L, 19L, 26L, 25L, 37L, 47L, 38L, 38L, 26L, 
25L, 41L), CapReg = c(1L, 1L, 1L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 
1L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 1L, 0L, 1L, 1L, 0L, 
0L, 1L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 
1L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 
0L, 1L, 1L, 0L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 
1L, 0L, 1L, 0L, 0L, 1L, 0L, 1L, 0L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 
1L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 
1L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 
1L, 0L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), 
    TrSw = c(0L, 0L, 3L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
    1L, 0L, 1L, 1L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 1L, 1L, 1L, 
    0L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 1L, 1L, 0L, 0L, 1L, 1L, 0L, 
    1L, 1L, 1L, 0L, 1L, 0L, 0L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    0L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 0L, 1L, 0L, 0L, 1L, 0L, 0L, 
    1L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 1L, 
    1L, 1L, 0L, 3L, 0L, 0L, 1L, 0L, 1L, 0L, 1L, 1L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 1L, 1L, 1L, 0L, 
    1L, 1L, 0L, 0L, 1L, 1L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 1L, 1L, 
    1L, 1L, 0L, 1L, 1L, 1L), FeelChk = c(0L, 0L, 2L, 2L, 2L, 
    0L, 2L, 2L, 2L, 3L, 0L, 0L, 1L, 0L, 1L, 0L, 0L, 2L, 0L, 1L, 
    0L, 1L, 2L, 2L, 1L, 1L, 0L, 2L, 2L, 1L, 2L, 2L, 0L, 1L, 2L, 
    0L, 1L, 2L, 2L, 3L, 0L, 2L, 1L, 0L, 0L, 2L, 1L, 2L, 2L, 1L, 
    1L, 0L, 1L, 2L, 0L, 1L, 0L, 0L, 1L, 1L, 0L, 3L, 1L, 2L, 1L, 
    1L, 0L, 0L, 1L, 1L, 1L, 0L, 2L, 3L, 1L, 2L, 2L, 1L, 1L, 0L, 
    2L, 1L, 0L, 1L, 1L, 0L, 2L, 1L, 1L, 0L, 0L, 0L, 2L, 1L, 2L, 
    1L, 0L, 0L, 0L, 0L, 2L, 0L, 1L, 0L, 2L, 2L, 2L, 0L, 0L, 2L, 
    3L, 2L, 0L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 0L, 0L, 1L, 2L, 2L, 
    1L, 1L, 2L, 0L, 3L, 1L, 0L, 1L, 1L, 2L, 2L, 3L, 3L, 1L, 0L, 
    0L, 2L, 0L, 2L, 2L, 3L, 0L, 1L, 1L, 2L, 0L, 0L, 0L), CanSw = c(0L, 
    0L, 2L, 2L, 2L, 0L, 2L, 2L, 2L, 1L, 0L, 0L, 1L, 0L, 0L, 0L, 
    0L, 2L, 2L, 0L, 0L, 0L, 2L, 2L, 0L, 0L, 2L, 2L, 2L, 3L, 2L, 
    2L, 0L, 0L, 2L, 0L, 0L, 2L, 2L, 1L, 1L, 2L, 0L, 0L, 2L, 2L, 
    3L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 0L, 1L, 0L, 2L, 1L, 3L, 1L, 
    0L, 0L, 2L, 0L, 0L, 0L, 2L, 0L, 1L, 1L, 1L, 2L, 0L, 1L, 2L, 
    2L, 1L, 1L, 0L, 2L, 0L, 0L, 1L, 0L, 0L, 2L, 1L, 0L, 0L, 0L, 
    0L, 2L, 1L, 2L, 0L, 2L, 2L, 0L, 1L, 2L, 0L, 1L, 0L, 2L, 2L, 
    2L, 0L, 0L, 2L, 3L, 2L, 0L, 0L, 2L, 2L, 2L, 2L, 2L, 2L, 0L, 
    0L, 0L, 2L, 2L, 1L, 1L, 2L, 1L, 0L, 0L, 2L, 0L, 1L, 2L, 2L, 
    1L, 1L, 0L, 0L, 2L, 2L, 0L, 2L, 2L, 3L, 1L, 1L, 0L, 2L, 0L, 
    2L, 0L)), .Names = c("Age", "CapReg", "TrSw", "FeelChk", 
"CanSw"), class = "data.frame", row.names = c(NA, -153L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:46:17.100

虽然我不相信为 50 个相关性生成 p 值的统计优点，但这很容易`lapply()`和朋友一起做。

为此，我选择迭代那些不是的索引`names`，因为这是您希望与所有其他变量进行比较的变量。我首先使用以下方法获取这些索引：`KenTau``"TrSw"``which()`

```
R> inds <- which(names(KenTau) != "TrSw")
R> inds
[1] 1 2 4 5 
```

接下来，我设置了对 的调用`lapply()`，我将在其中进行迭代`inds`。我现在需要一个匿名函数，它将索引`ind`作为第一个参数（这`lapply()`将在每次迭代时传递我的函数），并且我需要传入数据，我将其作为参数传递`x`。`cor.test()`如您在示例中所示，我的匿名函数调用，但请注意如何`x[, ind]`用于引用我们与之关联的当前索引或列`TrSw`。`lapply()`调用的最后一部分表示`x`将数据作为 传递，`KenTau`以便每当您`x`在匿名函数中看到时，这实际上是指以下内容的副本`KenTau`：

```
cors <- lapply(inds,
               function(ind, x) {
                   cor.test(x[, ind], x[, "TrSw"], alternative="two.sided",
                            method="kendall")
               }, x = KenTau) 
```

将一些名称添加到列表中`cors`会有所帮助，现在就这样做：

```
names(cors) <- names(KenTau)[inds] 
```

如果我们看一下，`cors`我们会发现它是一个列表：

```
R> str(cors, max = 1)
List of 4
 $ Age    :List of 8
  ..- attr(*, "class")= chr "htest"
 $ CapReg :List of 8
  ..- attr(*, "class")= chr "htest"
 $ FeelChk:List of 8
  ..- attr(*, "class")= chr "htest"
 $ CanSw  :List of 8
  ..- attr(*, "class")= chr "htest" 
```

列表的每个元素都是 class 的对象`"htest"`，这是`cor.test()`返回的内容。有四个这样的对象，因为有四个变量要与之比较`TrSw`。

您希望提取*p*值，因此我们需要查看它在`"htest"`对象中的存储位置：

```
R> str(cors[[1]])
List of 8
 $ statistic  : Named num 1.57
  ..- attr(*, "names")= chr "z"
 $ parameter  : NULL
 $ p.value    : num 0.116
 $ estimate   : Named num 0.105
  ..- attr(*, "names")= chr "tau"
 $ null.value : Named num 0
  ..- attr(*, "names")= chr "tau"
 $ alternative: chr "two.sided"
 $ method     : chr "Kendall's rank correlation tau"
 $ data.name  : chr "x[, ind] and x[, \"TrSw\"]"
 - attr(*, "class")= chr "htest" 
```

上面的输出显示*p*值存储在 component 中`p.value`。为了提取所有 4 个*p*值，我们实际上想要这样做：

```
 res[[i]][["p.value"]] 
```

在哪里`i`是`cors`轮流的每个元素。为此，我们可以`lapply()`再次使用，但`sapply()`会将结果简化为我们的向量，在这种情况下更整洁。`sapply()`每次调用都会通过我们，`res[[i]]`所以我们只需要应用`[[`函数（是的，它可能看起来不像一个，但它非常像一个函数；`"[["()`）。该函数接受一个参数（在这种情况下，我们可以使用要提取的组件的名称），我将其传递为`"p.value"`：

```
res <- sapply(cors, `[[`, "p.value") 
```

因为我添加`names`到`cors`，`sapply()`将返回一个命名向量，其中包含命名变量 an 之间相关性的*p*`TrSw`值：

```
R> res
         Age       CapReg      FeelChk        CanSw 
1.157889e-01 3.920115e-01 2.189736e-04 1.578040e-06 
```

如果您想要结果的另一个组成部分，请说出测试统计数据本身，然后替换`"p.value"`为您想要的组成部分的名称，例如`"statistic"`获取 Kendall 的 Tau。

如果您要对很多变量执行此操作，请阅读多个测试并调整*p*值，因为我不相信您的结果会像 50 个相关性一样有用。

# php - 将输入分配给 div？

> ID：11501432
> 
> 赞同：0
> 
> 时间：2012-07-16T09:22:19.050
> 
> 标签：php, jquery, mysql, ajax, jquery-mobile

我正在尝试通过 php/ajax 从 mysql 数据库获取问题和答案替代方案来创建多步骤表单（无需重新加载页面）。但是，如果 .php 页面生成所有 div，我似乎确实在提交数据时遇到了问题（至少这是关于它为什么不起作用的理论）。如果我直接用 HTML 编写它，我尝试这样做的方式似乎工作得很好，但这不是动态的，因此对于这个特定的任务没有用处。是否可以在下面创建类似伪编码的表单？

```
<div>
 <div id="stepone" class="section"> </div>
 <div id="steptwo" class="section"> </div>
 <div id="stepthree" class="section"> </div>
 <div id="stepfour" class="section"> </div>
</div> 
```

然后让一个 PHP 站点生成**输入**标签并将其分配给正确的 div，以便在 HTML/JS 中创建 div，但复选框和文本区域等输入是通过 PHP 动态生成的。我似乎想不出一个好的方法来做到这一点？

值得一提的是，这个页面是用 JQM (jQuery Mobile) 制作的，所以我认为不同的 div 角色对于这个任务可能会出现问题。

我的 PHP 脚本中生成的问题将是这样的：

```
<form id="eval_form">
 <h3>Hva tenkte du om møtet?</h3>
  <fieldset data-role="controlgroup" data-type="vertical" data-mini="true" id="2">   
   <input type="checkbox" name="res[2][1]" id="2_1" value="1"><label for="2_1">asd1</label>
   <input type="checkbox" name="res[2][2]" id="2_2" value="2"><label for="2_2">asd2</label>
   <input type="checkbox" name="res[2][3]" id="2_3" value="3"><label for="2_3">asd3</label>
  </fieldset>
 <h3>Hva følte du om møtet?</h3>
  <fieldset data-role="controlgroup" data-type="vertical" data-mini="true" id="3"> 
   <input type="checkbox" name="res[3][1]" id="3_1" value="1"><label for="3_1">test1</label>
   <input type="checkbox" name="res[3][2]" id="3_2" value="2"><label for="3_2">test2</label>
   <input type="checkbox" name="res[3][3]" id="3_3" value="3"><label for="3_3">test3</label>
   <input type="checkbox" name="res[3][4]" id="3_4" value="4"><label for="3_4">test4</label>
  </fieldset>
 <input type="button" id="submit" value="Submit" class="submit-btn">
</form> 
```

我的演示程序的代码如下所示，发布时没有问题：

```
<form id="eval_form">

        <!-- STEP 1-->
        <div data-role="content" id="form1" class="section">
            <input type="text" name="answer[1]" placeholder="Write something..." class="required"></input><p/>
            <input type="text" name="answer[2]" placeholder="Write something..." class="required"></input><p/>
            <input type="button" name="next1" value="Next" id="next1" onClick="toggleVisibility('form2')" class="next-btn"/>
        </div>

        <!-- STEP 2-->
        <div data-role="content" id="form2" class="section">
            <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                <input type="radio" name="answer[4]" id="1" value="1" class="required"/><label for="1">Value 1</label>
                <input type="radio" name="answer[4]" id="2" value="2" class="required"/><label for="2">Value 2</label>
                <input type="radio" name="answer[4]" id="3" value="3" class="required"/><label for="3">Value 3</label>
            </fieldset>
            <input type="button" id="back2" value="Back" onClick="toggleVisibility('form1')" class="back-btn">
            <input type="button" name="next2" value="Next" id="next2" onClick="toggleVisibility('form3')" class="next-btn"/>
        </div>

        <!-- STEP 3-->
        <div data-role="content" id="form3" class="section">
            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true" class="required">
                <input type="checkbox" name="answer[5][1]" id="1" value="1"/><label for="1">Testie</label>
                <input type="checkbox" name="answer[5][2]" id="2" value="2"/><label for="2">Testoe</label>
                <input type="checkbox" name="answer[5][3]" id="3" value="3"/><label for="3">Tester</label>
            </fieldset>
            <input type="text" name="answer[3]" placeholder="Write something..." class="required"></input><p/>
            <input type="button" id="back3" value="Back" class="back-btn" onClick="toggleVisibility('form2')">
            <input type="button" id="submit" value="Submit" class="submit-btn"/>
        </div>

    </form> 
```

发送数据的 Ajax 函数：

```
$(document).ready(function()
    {
            $("#submit").click(function() 
            {
                var data_string = $('#eval_form').serialize();
                $.ajax(
                {
                    type:'POST',
                    url:'add.php',
                    data:data_string,
                    success:function(response)
                    {
                        $("#eval").html(response);
                    }
                });         
            })
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:28:21.017

id 这样做的方式只是有一个 div 来包含您的步骤

```
<div id="stepContainer" >
    <input type="text" id="step1Input" />
</div> 
```

类似的东西。

ajax 查询将获取步骤容器中的任何元素，并通过 GET/POST 将它们适当地提交到您的 php/asp 任何页面执行您的服务器逻辑。当它返回时，它可以返回一些确认或下一步所需的 html。

一旦你有这个返回的 html 或基于来自服务器的响应在 javascript 中构建新的 html，你可以用`stepContainer`新的 html 替换 的内容。这将作为第 2 步。

您可能希望在 javascript 中有一个隐藏的 div 或一些计数器来跟踪您当前的步骤。

使用从服务器返回的 json 甚至可能是明智的，它可以让您传递更多信息（无论如何更容易），允许您在单个响应中嵌入错误消息、确认、html 等。

# java - APACHE POI 从 Java 中的 excel 中获取准确的字体颜色

> ID：11501434
> 
> 赞同：0
> 
> 时间：2012-07-16T09:22:22.440
> 
> 标签：java, apache-poi

在 Excel 工作表中，如何使用 Java 中的 Apache POI 获取确切的字体颜色值。我试图通过使用来获取字体颜色

org.apache.poi.ss.usermodel.Font f = book.getFontAt(style.getFontIndex()); 短 clrIdx = f.getColor();

但它没有给出确切的颜色索引。获得此颜色值后，我必须在 PDFtable 中应用相同的颜色。在这里，我通过读取每个 excel 单元格格式并在 iText 中使用 pdf 创建相同的格式来进行 excel 到 pdf 的转换。

请帮我！！

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:40:40.693

您需要从 Excel 字体颜色中获取 RGB 值。您可以通过几个步骤获得这些值。

要获取合适的 POI`Color`对象，您需要沿着 HSSF 或 XSSF 路径，提取合适的 HSSFColor 或 XSSFColor，然后从颜色中获取 RGB 值。

```
int red = 0;
int green = 0;
int blue = 0;
if (font instanceof HSSFont)
{
   HSSFColor color = ((HSSFFont) font).getHSSFColor(hssfWorkbook);
   // 0: red, 1: green, 2: blue
   short[] rgb = color.getTriplet();
   red = rgb[0];
   green = rgb[1];
   blue = rgb[2];
}
else if (font instanceof XSSFFont)
{
   XSSFColor color = ((XSSFFont) font).getXSSFColor();
   byte[] rgb = color.getRgb();
   // Bytes are signed, so values of 128+ are negative!
   // 0: red, 1: green, 2: blue
   red = (rgb[0] < 0) ? (rgb[0] + 256) : rgb[0];
   green = (rgb[1] < 0) ? (rgb[1] + 256) : rgb[1];
   blue = (rgb[2] < 0) ? (rgb[2] + 256) : rgb[2];
}
// Use the rgb values here. 
```

`BaseColor`然后您可以使用 rgb 值在 iText中创建您的对象。

**更新：**

有几个与在 XSSF 中提取颜色相关的 Apache POI 错误（对于 .xlsx 文件）：

[#51222](http://issues.apache.org/bugzilla/show_bug.cgi?id=51222)

[#51236](http://issues.apache.org/bugzilla/show_bug.cgi?id=51236)

[#52079](http://issues.apache.org/bugzilla/show_bug.cgi?id=52079)

[#53274](http://issues.apache.org/bugzilla/show_bug.cgi?id=53274)

当 XSSF 处理主题颜色时会出现这些错误。

# android - 无法在具有 android ICS 的根设备上设置时间

> ID：11501437
> 
> 赞同：3
> 
> 时间：2012-07-16T09:22:28.740
> 
> 标签：android, android-4.0-ice-cream-sandwich, alarmmanager, rooted-device

我已经在 android 中实现了用于在有根设备上设置时间的代码。我已经将它变成了一个内置应用程序，它在示例应用程序中运行良好。但是当我尝试在我的应用程序中使用相同的代码时，它也是内置的它无法设置时间。下面是代码

```
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarmManager.setTime(date.getTime()); 
```

与权限....

```
 <uses-permission android:name="android.permission.SET_TIME"></uses-permission>
 <uses-permission android:name="android.permission.SET_TIME_ZONE"></uses-permission> 
```

相反，它给出了以下错误：

```
"Neither user 10042 nor current process has SecurityException:android.permission.SET_TIME
unable to open Alarm Driver:Permission Denied.
android.OS.Parcel.readException
android.app.AlarmManagerStubProxy.setTime(AlarmManager.java)". 
```

任何建议都会有所帮助。

# javascript - 正则表达式 - 匹配词组

> ID：11501439
> 
> 赞同：1
> 
> 时间：2012-07-16T09:22:38.413
> 
> 标签：javascript, regex

在 JavaScript 中，我将如何使用 regex`['John Smith', 'Jane Doe']`从`"John Smith - Jane Doe"`哪里`-`得到任何分隔符 ( `\ / , + * : ;`) 等等？
使用`new RegExp('[a-zA-Z]+[^\/|\-|\*|\+]', 'g')`只会给我`["John ", "Smith ", "Jane ", "Doe"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:28:32.893

试试这个，没有正则表达式：

```
var arr = str.split(' - ') 
```

**编辑**

多个分隔符：

```
var arr = str.split(/ [-*+,] /) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:27:09.533

如果你想匹配多个单词，你需要在你的字符类中有一个空格。我认为类似的东西`/[ a-zA-Z]+/g`将是一个起点，与`exec`或通过重复使用`String#match`，如下所示：[Live copy](http://jsbin.com/ugurof) | [来源](http://jsbin.com/ugurof/edit)

```
var str = "John Smith - Jane Doe";
var index;
var matches = str.match(/[ a-zA-Z]+/g);
if (matches) {
  display("Found " + matches.length + ":");
  for (index = 0; index < matches.length; ++index) {
    display("[" + index + "]: " + matches[index]);
  }
}
else {
  display("No matches found");
} 
```

但它**非常**有限，大量的名称包含 AZ 以外的字符，您可能希望反转逻辑并使用否定类（`/[^...]/g`，其中`...`是可能的分隔符列表）。你不想让“Elizabeth Peña”或“Gerard 't Hooft”被冷落！:-)

# java - 只请求响应的一部分？

> ID：11501440
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:22:39.403
> 
> 标签：java, android, ksoap

我对 kSOAP 比较陌生。我有一个 web 服务，它有一个巨大的响应，其中包含一个充满对象的数组和数组之外的一些额外数据。使用正常的 getResponse() 请求整个 XML 大约需要 5-10 秒。这将为我提供一个我不会用于任何事情的整个数组。

我现在的问题是，有没有办法只获取数组之外的一小部分数据而不必更改 web 服务本身，因为我无权更改 web 服务？

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
  <GetResponse xmlns="http://tempuri.org/">
     <GetResult>
        <a:Wrap>
           <a:Country>DK</a:Country>
           <a:ID>155</a:ID>
           <a:SecondWrap>
              <a:Pattern>
                 <b:ListPattern>
                    <b:Type>Price</b:Type>
                    <b:Day>1</b:Day>
                    <b:Hour>1</b:Hour>
                    <b:ListId>007</b:ListId>
                    <b:Price>135</b:Price>
                 </b:ListPattern>
                 <b:ListPattern>
                    <b:Type>Price</b:Type>
                    <b:Day>1</b:Day>
                    <b:Hour>2</b:Hour>
                    <b:ListId>007</b:ListId>
                    <b:Price>135</b:Price>
                 </b:ListPattern>
                 ...
                 ...
                 ... 
```

这是 XML 响应的一小部分。我不想只知道 Wrap 对象的国家和 ID，完全排除 ListPattern。我什至不想得到 ListPattern。这是性能优化的问题。那么有没有一种方法可以让我只获得国家和 ID，甚至不能“下载”SecondWrap？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:27:33.667

唯一的方法是定义一个只返回这些值的新方法。

你不能告诉服务只给你部分答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:25.427

与您的问题相关，您可以使用 ARO 工具，该工具将显示您的网络活动和缓存效率低下。看看这里[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)

# android - 如何在 Android 应用程序中获取股市详细信息

> ID：11501441
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:22:43.013
> 
> 标签：android, html

我们开发了一个基于html5的android应用程序。
我们需要从相应的网站获取证券交易所、货币和商品详细信息（黄金、白银等），并且我们需要将这些详细信息存储在数据库（SQLite）中。
请提供执行此操作的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:39:35.760

这个问题将被关闭，因为它不是编程问题，而且完全模糊。

但是，在广泛的非编程笔画中，您的解决方案是执行以下操作：

如果您正在构建一个 HTML5 应用程序，它是否基于 Android 并不重要。这是一个网络应用程序。您将获得某种股票提要（您打算使用什么提要？它有获取数据的 API 吗？），您将编写某种服务器端获取器来获取数据并通过 AJAX 收集它，并在浏览器中显示。然后，您将在 Activity 中嵌入 WebView 并将其指向此 Web 应用程序。

# ios - 完成iOS后台任务，将其移至前台

> ID：11501443
> 
> 赞同：1
> 
> 时间：2012-07-16T09:22:53.480
> 
> 标签：ios, multithreading, xamarin.ios, background-process

我使用来自[http://software.tavlikos.com/2010/12/08/multitasking-in-ios-the-monotouch-way-part-i/](http://software.tavlikos.com/2010/12/08/multitasking-in-ios-the-monotouch-way-part-i/)文章的代码示例在 iOS 应用程序 DidEnterBackground 事件上运行后台任务。

任务繁重且时间长——接近 1 分钟。如果用户强制应用程序回到前台，他应该等到任务完成。它有点弱。

我尝试使用 WillEnterForeground 事件：

```
 public override void WillEnterForeground (UIApplication application)
    {
        if (taskId != 0) {
            Console.WriteLine("Finish previous task"); 
            application.EndBackgroundTask(taskId);
            taskId = 0;
        }
    } 
```

但它在任务结束**后调用。**

如果用户在完成之前切换到应用程序，如何中断后台任务执行？

DidEnter后台代码：

```
 public override void DidEnterBackground (UIApplication application)
    {
        Console.WriteLine ("DidEnterBackground");

        if (taskId != 0) {
            Console.WriteLine("Finish previous task"); 
            application.EndBackgroundTask(taskId);
            taskId = 0;
        }

        taskId = application.BeginBackgroundTask(delegate {
            if (taskId != 0) {
                application.EndBackgroundTask(taskId);
                taskId = 0;
            }
        });

        Console.WriteLine("Begin task"); 
        application.InvokeOnMainThread(delegate() {
            for(int i = 0; i < 700; i++) {
                if ((i + 1) % 100 == 0)
                    Console.WriteLine("Time to remain: {0} seconds", application.BackgroundTimeRemaining); 
                //viewController.Touch();
            }
        });

        application.EndBackgroundTask(taskId);
        taskId = 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:45:12.220

主要问题是您的`DidEnterBackground`方法仅在您的 for 循环完成（或您已实现的任何任务）后才会返回，因为您在同一个线程上调用它。不管有`InvokeOnMainThread`没有，都没有关系，您的任务将在同一个线程上执行，实际上，您不需要调用`InvokeOnMainThread`，因为您已经在主线程上。在正常情况下，这会导致您的应用程序被 iOS 终止。但是，由于您首先调用 BeginBackgroundTask，因此不会发生这种情况。

因此，由于您的`DidEnterBackground`方法的返回被延迟并且您同时将您的应用程序带回前台，因此您的`WillEnterForeground`方法在任务结束*后执行是正常的。*那是因为该方法还没有返回，所以`WillEnterForeground`无法执行该`DidEnterBackground`方法，所以它在之后排队。

在您提到的上述文章的示例中，我通过调用异步调用我的任务`new System.Action(SomeDelegate(){}).BeginInvoke(null, null);`。你可以使用任何你喜欢的解决方案，我现在主要使用`ThreadPool`.

所以，我会像这样修改你上面的 DidEnterBackground 方法：

```
 public override void DidEnterBackground (UIApplication application)
    {
        Console.WriteLine ("DidEnterBackground");

        if (taskId != 0) {
            Console.WriteLine("Finish previous task"); 
            application.EndBackgroundTask(taskId);
            taskId = 0;
        }

        taskId = application.BeginBackgroundTask(delegate {
            if (taskId != 0) {
                application.EndBackgroundTask(taskId);
                taskId = 0;
            }
        });

        Console.WriteLine("Begin task");
        ThreadPool.QueueUserWorkItem(delegate {

            application.InvokeOnMainThread(delegate() {
                for(int i = 0; i < 700; i++) {
                    if ((i + 1) % 100 == 0)
                        Console.WriteLine("Time to remain: {0} seconds", application.BackgroundTimeRemaining); 
                    //viewController.Touch();
                }

                // EndBackgroundTask must also be executed on the main thread.
                application.EndBackgroundTask(taskId);
                taskId = 0;
            });

        });
    } 
```

# c# - 如何将arraylist 转换为字符串[]？

> ID：11501444
> 
> 赞同：1
> 
> 时间：2012-07-16T09:22:56.447
> 
> 标签：c#, asp.net, arraylist

> **可能重复：**
> [在 c# 中将 ArrayList 转换为字符串数组（字符串 []）](https://stackoverflow.com/questions/8924869/convert-arraylist-into-string-arraystring-in-c-sharp)

如何将数组列表转换为`string[]`？下面是我正在尝试的代码。我收到一个错误：

> 源数组中的至少一个元素无法转换为目标数组类型。

```
ArrayList myArrayList = new ArrayList();
foreach (DataRow dtRow in DtSet.Tables[0].Rows)
{
    myArrayList.Add(dtRow);
}

string[] myStringArray = (string[])myArrayList.ToArray(typeof(string)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:32:12.093

您还在使用 .NET 1.1。或者你为什么不使用 typed`List<T>`而不是 an `ArrayList`？

首先，您不能将 a`DataRow`转换为`String`。您可以将[DataRow 的每个字段](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)转换为字符串。

如果您可以使用[Linq](http://msdn.microsoft.com/en-us/library/bb397933.aspx)，您可以使用以下代码获取`String[]`所有行字段中的每个字段以逗号分隔：

```
String[] rowFields = DtSet.Tables[0]
                    .AsEnumerable()
                    .Select(r => string.Join(",", r.ItemArray));
                    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:27:40.453

您不能将 DataRow （类型）添加到期望它是字符串的 ArrayList 中。DataRow 是一个对象，它具有关于对象以及对象数据的大量信息。

```
foreach(DataRow dtRow in dtSet.Tables[0].Rows)
{
    myArrayList.Add(dtRow["UserName"].ToString());
}

string[] myArray = myArrayList.ToArray(typeof(string)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:26:09.393

您正在将多个`DataRow`对象放入`ArrayList`. `DataRow`s 不是`string`s。所以：那是行不通的。充其量，您也许可以得到`.ToString()`，但坦率地说，这不会有太大帮助-因为每一行都会说`System.Data.DataRow`（因为它不会覆盖`ToString()`。我认为您需要重新评估您要尝试的内容做。

基于评论讨论的示例：

```
DataTable table = ...
string[] strings = new string[table.Rows.Count];
int idx = 0;
foreach(DataRow row in table.Rows)
{
    StringBuilder sb = new StringBuilder();
    object[] cells = row.ItemArray;
    for(int i = 0 ; i < cells.Length ; i++)
    {
        if (i != 0) sb.Append(',');
        sb.Append('"').Append(cells[i]).Append('"');
    }
    strings[idx++] = sb.ToString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T09:28:14.150

arrayList 的每个项目都是 DataRow 类型，您不能将其转换为字符串。

相反，您应该构造一个表示行内容的字符串，并将该字符串添加到列表中，例如

```
myArrayList.Add(dtRow["CustomerName"]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T09:26:43.753

你有一个`ArrayList`其元素的类型`DataRow`。您正在尝试将其转换为 s 数组`string`。A`DataRow`不是 a `string`（也不会在向下转换时变成一个），所以你不能那样做。

如果字符串数组是您最终想要的，您可能应该`ToString`在填充`ArrayList`.

（另外，正如 Tim Schmelter 在评论中所说，你真的应该使用 a `List<T>`for some `T`- 可能是`string`or `DataRow`，具体取决于你的代码最终看起来如何 - 而不是 a `ArrayList`。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T09:25:28.190

你有没有试过这个：

```
string[] array = myArrayList.ToArray(typeof(string)) as string[]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T09:42:14.970

```
ArrayList myArrayList = new ArrayList();

myArrayList.Add("as");
myArrayList.Add("as");
myArrayList.Add("as");
myArrayList.Add("as");
myArrayList.Add("as");            
myArrayList.Add("as");

string[] array = myArrayList.ToArray(typeof(string)) as string[];
foreach (var item in array)
{
    Console.WriteLine(item.ToString());                
} 
```

输出：

```
as
as
as
as
as
as 
```

# maven - 如何将 JAR 部署到 Maven 远程存储库

> ID：11501447
> 
> 赞同：2
> 
> 时间：2012-07-16T09:23:04.387
> 
> 标签：maven, jar, repository, reportng

有什么方法可以将我的 JAR 文件放在远程存储库中，这样我的 maven 项目就可以通过 Internet 从任何地方获取这个 JAR 文件？

我已经下载并在 ReportNG 项目中做了一些修复：[https](https://github.com/dwdyer/reportng) ://github.com/dwdyer/reportng 。使用 ANT 我已将此项目编译为 JAR，现在我想将其放入远程 Maven 存储库，但不知道该怎么做。

有人可以建议我的方式，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:45:31.800

如果它是您想在 maven Central 中提供的已发布版本，请遵循本指南：[http ://maven.apache.org/guides/mini/guide-central-repository-upload.html](http://maven.apache.org/guides/mini/guide-central-repository-upload.html)

我不是 github 专业人士，但由于 maven repo 只是一个包含一些元数据的文件结构，你可以将它放在任何 maven 可以读取它的地方（ftp、http、...）。所以你可以创建一个 git repo 来托管你的 Maven 工件。有关示例，请参见[http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/ 。](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/)（它可能已经过时了——github可能有类似maven repo托管的东西，我只是不知道）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:41:59.163

创建自己的 maven 存储库的一种轻量级方法是将其存储在 github 上。有关更多详细信息，请参阅[在 github 上托管 Maven 存储库](https://stackoverflow.com/questions/14013644/hosting-a-maven-repository-on-github/14013645)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T07:22:16.037

我遵循 sonatype 开源项目 maven 部署指南[https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)并成功将最新版本的 reportNG 部署到 maven 中央存储库中。现在 maven 同时拥有 1.1.3 和 1.1.4

[http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.uncommons%22%20AND%20a%3A%22reportng%22](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.uncommons%22%20AND%20a%3A%22reportng%22)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T09:28:26.040

您应该向 github 项目发出拉取请求。如果维护者喜欢你的修复，他会把它放在下一个版本中。

如果您现在需要在远程存储库中进行修复，那么您必须设置自己的 Maven 存储库。

# performance - X-UA-Compatible=IE8 和 doctype 使 IE8 搜索功能在较大的表上非常慢

> ID：11501448
> 
> 赞同：1
> 
> 时间：2012-07-16T09:23:05.587
> 
> 标签：performance, search, internet-explorer-8, doctype, x-ua-compatible

我注意到当你有一个相当大的表（几千行）时，当你使用 doctype 并将 X-UA-Compatible 设置为 IE=8 时，IE8 搜索功能（Ctrl+F）变得非常慢：

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=8">
        ... 
```

目前我们没有办法减小表格的大小。此外，删除或更改 doctype 或 X-UA-Compatible 会打乱页面的布局，因此这也不是快速的解决方案。

有没有其他想法如何使 IE8 搜索功能更快？

为了显示差异，我创建了两个可以尝试的测试文件（在 IE8 中）：

*   [http://playground.steven.comprise.com/ie8/fast.php](http://playground.steven.comprise.com/ie8/fast.php)
*   [http://playground.steven.comprise.com/ie8/slow.php](http://playground.steven.comprise.com/ie8/slow.php)

fast.php 是没有 doctype 或 X-UA-Compatible 的。在这个文件中搜索速度很快！slow.php 同时使用 doctype 和 X-UA-Compatible，因此我们希望在此文件中的搜索变得与在 fast.php 中一样快

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:00:04.060

您可以实现自己的搜索对话框（按 ctrl+f 时显示）。但我认为它不会比在 IE8 兼容模式下更快。IE>8 中的搜索速度更快的原因是它使用了更新的 DOM 和 JavaScript 引擎。

# c# - 使用表单身份验证的基于角色的安全性，为用户和角色使用数据库

> ID：11501450
> 
> 赞同：1
> 
> 时间：2012-07-16T09:23:18.600
> 
> 标签：c#, asp.net

我正在使用表单身份验证和角色身份验证开发 Web 登录应用程序。

我对角色身份验证不是很熟悉，我在谷歌中搜索了一些教程，但我无法理解。

所以 ，

*   1.为了创建一个具有特定角色的用户，一切都必须在这里完成：

[http://i1.asp.net/asp.net/images/pss/module08_06.jpg](http://i1.asp.net/asp.net/images/pss/module08_06.jpg)（但是，我想将用户信息和角色存储在 asp.net sql 数据库中）

到目前为止，我的想法是创建一个包含以下表列的数据库：

```
1.ID(int,primary)
2.Username(varchar(10))
3.Password(varchar(10))
4.RoleType(varchar(10)) - Roles are : Admin / User 
```

登录时，检查是否`user&pass`有效，如果是，然后`roletype`从数据库中为当前用户选择。

```
If roletype = Admin 
   Redirect to a certain page
else if roletype = user
   Redirect to other page 
```

但是我不认为asp.net网页知道该列`RoleType`用于`roles` 并且没有意义，我的意思是 `<allow users="Admin"/>`与我的列之间没有连接`RoleType`

```
<location path="\Admin\">
    <system.web>
        <authorization>
            <allow users="Admin"/> //this 
            <deny users="*"/>
        </authorization> 
```

所以，如果有人不介意帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:26:50.517

ASP.NET 附带一个用于创建用户（成员）和角色数据库的内置工具，该数据库具有您需要的所有正确模式。

我强烈建议你从那里开始，而不是尝试自己动手。

[http://msdn.microsoft.com/en-us/library/x28wfk74.aspx](http://msdn.microsoft.com/en-us/library/x28wfk74.aspx)

完成后，使用内置的用户/角色管理屏幕和内置的 SqlMembershipProvider 和 SqlRoleProvider 就很简单了

**编辑**

快速谷歌后，ASP.NET 似乎有一个非常好的和详细的关于 asp.net 成员资格和角色安全的教程

[http://www.asp.net/web-forms/tutorials/security](http://www.asp.net/web-forms/tutorials/security)

您需要阅读有关成员资格、角色和管理员的整个部分。

# alfresco - 露天分页

> ID：11501451
> 
> 赞同：1
> 
> 时间：2012-07-16T09:23:26.307
> 
> 标签：alfresco

我正在开发一个从 alfresco 列出和搜索文档的应用程序。问题是 alfresco 每个查询最多可以返回 5000 条记录。但是我不希望我的应用程序列出所有文档，而是如果我可以在露天中实现分页，以便露天只返回每页 X 结果。我正在使用 Alfresco 4 企业版。

请提供任何帮助或建议。

**更新（示例）** 我编写了一个 web 脚本，它执行查询并返回所有满足条件的文档。可以说，找到了 5000 个条目。我想修改我的网络脚本，使网络脚本在第一页返回 100 个文档，第二页返回 100 个文档，依此类推...

这类似于使用 Limit BY 和 OFFSET 关键字。像[这样的东西](http://www.petefreitag.com/item/451.cfm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:18:34.197

有两种方法可以查询[SearchService](http://dev.alfresco.com/resource/docs/java/org/alfresco/service/cmr/search/SearchService.html)（不包括 selectNodes/selectProperties 调用）。一种方法是将[所有参数直接指定](http://dev.alfresco.com/resource/AlfrescoOne/5.1/PublicAPI/org/alfresco/service/cmr/search/SearchService.html#query(org.alfresco.service.cmr.search.SearchParameters))给查询方法。这具有简洁的优点，但缺点是您没有获得所有选项。

或者，您可以使用 [SearchParameters](http://dev.alfresco.com/resource/docs/java/org/alfresco/service/cmr/search/SearchParameters.html)对象进行[查询。](http://dev.alfresco.com/resource/docs/java/datamodel/org/alfresco/service/cmr/search/SearchService.html#query(org.alfresco.service.cmr.search.SearchParameters))这使您可以完成简单查询所做的一切，甚至更多。其中还包括 setLimit、setSkipCount 和 setMaxItems，它们将允许您进行分页。

如果您的查询曾经是这样的：

```
searchService.query(StoreRef.STORE_REF_WORKSPACE_SPACESSTORE, "lucene", myQuery); 
```

你会做类似的事情：

```
SearchParameters sp = new SearchParameters();
sp.addStore(StoreRef.STORE_REF_WORKSPACE_SPACESSTORE);
sp.setLanguage("lucene");
sp.setQuery(myQuery);
sp.setMaxItems(100);
sp.setSkipCount(900);
searchService.query(sp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:19:52.163

假设您已经用 Javascript 编写了 webscript，您可以使用该`search.query()`函数并将**page**属性添加到搜索定义中，如下所示：

```
var sort1 =   {
     column: "@{http://www.alfresco.org/model/content/1.0}modified",
     ascending: false   
};   

var sort2 =   {
     column: "@{http://www.alfresco.org/model/content/1.0}created",
     ascending: false   
};   

var paging =   {
     maxItems: 100,
     skipCount: 0   
};   

var def = {
     query: "cm:name:test*",
     store: "workspace://SpacesStore",
     language: "fts-alfresco",
     sort: [sort1, sort2],
     page: paging   
};   

var results = search.query(def); 
```

您可以在此处找到更多信息：[http ://wiki.alfresco.com/wiki/4.0_JavaScript_API#Search_API](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#Search_API)

# r - 如何改变X轴？

> ID：11501452
> 
> 赞同：1
> 
> 时间：2012-07-16T09:23:25.667
> 
> 标签：r, graph, plot

我正在尝试使用 5 分钟的价格观察来绘制 R 中的图表，涵盖从 2011 年 12 月到 2012 年 6 月的 6 个月期间的黄金价格走势，这意味着我有 5913 次观察我尝试修改 x 轴以在底部标记日期如下：

```
 rt = dat$mid
    x11()
    plot(rt, type="l", col="blue", main="Gold Price", xlab="TBC", 
ylab="Price", ylim=range(rt), xaxt="n")

axis(1, at=1:7, lab=c("Dec '11", "Jan '12", 
    "Feb '12", "Mar '12", "Apr '12", "May '12", "June '12")) 
```

但这根本不返回轴。

默认轴范围：0 1000 2000 3000 4000 5000 6000

我也尝试更改`at`为，`at=1:6000`但这无济于事。谁能告诉我如何实现这一目标？谢谢

我应该补充一点，我已经广泛搜索了如何执行此操作的信息，但我似乎能够在轴上找到除此之外的所有内容。

根据要求提供的一些数据：

```
 Date    mid day returns
1   12/12/2011 00:00    1714.600    2011-12-12  NA
2   12/12/2011 00:05    1714.360    2011-12-12  -0.0139984135
3   12/12/2011 00:10    1714.050    2011-12-12  -0.0180841848
4   12/12/2011 00:15    1713.780    2011-12-12  -0.0157534067
5   12/12/2011 00:20    1712.650    2011-12-12  -0.0659578652
6   12/12/2011 00:25    1713.375    2011-12-12  0.0423231010
7   12/12/2011 00:30    1713.325    2011-12-12  -0.0029182596
8   12/12/2011 00:35    1713.935    2011-12-12  0.0355969495
9   12/12/2011 00:40    1714.950    2011-12-12  0.0592029205
10  12/12/2011 00:45    1714.675    2011-12-12  -0.0160367387
11  12/12/2011 00:50    1714.625    2011-12-12  -0.0029160470
12  12/12/2011 00:55    1714.530    2011-12-12  -0.0055407236
13  12/12/2011 01:00    1713.970    2011-12-12  -0.0326673475
14  12/12/2011 01:05    1710.730    2011-12-12  -0.1892137102
15  12/12/2011 01:10    1709.525    2011-12-12  -0.0704625854
16  12/12/2011 01:15    1708.865    2011-12-12  -0.0386146700
17  12/12/2011 01:20    1709.995    2011-12-12  0.0661039084
18  12/12/2011 01:25    1710.205    2011-12-12  0.0122799836
19  12/12/2011 01:30    1709.100    2011-12-12  -0.0646330198
20  12/12/2011 01:35    1709.050    2011-12-12  -0.0029255591
21  12/12/2011 01:40    1708.840    2011-12-12  -0.0122882831
22  12/12/2011 01:45    1709.250    2011-12-12  0.0239900062
23  12/12/2011 01:50    1709.240    2011-12-12  -0.0005850536
24  12/12/2011 01:55    1709.455    2011-12-12  0.0125778989
25  12/12/2011 02:00    1709.630    2011-12-12  0.0102366569
26  12/12/2011 02:05    1709.835    2011-12-12  0.0119901798
27  12/12/2011 02:10    1709.835    2011-12-12  0.0000000000
28  12/12/2011 02:15    1710.025    2011-12-12  0.0111115660
29  12/12/2011 02:20    1709.880    2011-12-12  -0.0084797677
30  12/12/2011 02:25    1709.540    2011-12-12  -0.0198864136
31  12/12/2011 02:30    1709.530    2011-12-12  -0.0005849544
32  12/12/2011 02:35    1709.660    2011-12-12  0.0076041402
33  12/12/2011 02:40    1709.735    2011-12-12  0.0043867409
34  12/12/2011 02:45    1710.465    2011-12-12  0.0426875628
35  12/12/2011 02:50    1709.465    2011-12-12  -0.0584807308
36  12/12/2011 02:55    1709.880    2011-12-12  0.0242736549
37  12/12/2011 03:00    1709.915    2011-12-12  0.0020469063
38  12/12/2011 03:05    1709.525    2011-12-12  -0.0228107527
39  12/12/2011 03:10    1709.415    2011-12-12  -0.0064347429
40  12/12/2011 03:15    1709.140    2011-12-12  -0.0160886691
41  12/12/2011 03:20    1708.450    2011-12-12  -0.0403793322
42  12/12/2011 03:25    1708.030    2011-12-12  -0.0245867093
43  12/12/2011 03:30    1692.650    2011-12-12  -0.9045311445
44  12/12/2011 03:35    1696.150    2011-12-12  0.2065628685
45  12/12/2011 03:40    1695.875    2011-12-12  -0.0162145032
46  12/12/2011 03:45    1699.075    2011-12-12  0.1885153506
47  12/12/2011 03:50    1698.605    2011-12-12  -0.0276659369
48  12/12/2011 03:55    1698.460    2011-12-12  -0.0085367810
49  12/12/2011 04:00    1700.215    2011-12-12  0.1032755504
50  12/12/2011 04:05    1697.800    2011-12-12  -0.1421418332
51  12/12/2011 04:10    1696.000    2011-12-12  -0.1060757952
52  12/12/2011 04:15    1694.940    2011-12-12  -0.0625195394
53  12/12/2011 04:20    1692.315    2011-12-12  -0.1549927907
54  12/12/2011 04:25    1694.240    2011-12-12  0.1136848631
55  12/12/2011 04:30    1696.505    2011-12-12  0.1335989782
56  12/12/2011 04:35    1694.550    2011-12-12  -0.1153033623
57  12/12/2011 04:40    1693.495    2011-12-12  -0.0622778053
58  12/12/2011 04:45    1693.550    2011-12-12  0.0032476687
59  12/12/2011 04:50    1693.020    2011-12-12  -0.0313001063
60  12/12/2011 04:55    1693.225    2011-12-12  0.0121078067
61  12/12/2011 05:00    1692.800    2011-12-12  -0.0251031816
62  12/12/2011 05:05    1692.850    2011-12-12  0.0029536426
63  12/12/2011 05:10    1692.775    2011-12-12  -0.0044304966
64  12/12/2011 05:15    1692.500    2011-12-12  -0.0162468337
65  12/12/2011 05:20    1693.585    2011-12-12  0.0640858122
66  12/12/2011 05:25    1693.790    2011-12-12  0.0121037677
67  12/12/2011 05:30    1693.165    2011-12-12  -0.0369063071
68  12/12/2011 05:35    1692.640    2011-12-12  -0.0310118276
69  12/12/2011 05:40    1691.665    2011-12-12  -0.0576189219
70  12/12/2011 05:45    1691.165    2011-12-12  -0.0295610482
71  12/12/2011 05:50    1689.865    2011-12-12  -0.0768996468
72  12/12/2011 05:55    1691.065    2011-12-12  0.0709863884
73  12/12/2011 06:00    1692.140    2011-12-12  0.0635492107
74  12/12/2011 06:05    1692.180    2011-12-12  0.0023638427
75  12/12/2011 06:10    1691.795    2011-12-12  -0.0227543053
76  12/12/2011 06:15    1691.860    2011-12-12  0.0038419993
77  12/12/2011 06:20    1691.790    2011-12-12  -0.0041375438
78  12/12/2011 06:25    1690.965    2011-12-12  -0.0487768116
79  12/12/2011 06:30    1689.850    2011-12-12  -0.0659604291
80  12/12/2011 06:35    1690.205    2011-12-12  0.0210055754
81  12/12/2011 06:40    1691.025    2011-12-12  0.0485030605
82  12/12/2011 06:45    1690.900    2011-12-12  -0.0073922396
83  12/12/2011 06:50    1692.000    2011-12-12  0.0650329622
84  12/12/2011 06:55    1690.885    2011-12-12  -0.0659200677
85  12/12/2011 07:00    1691.195    2011-12-12  0.0183319141
86  12/12/2011 07:05    1690.470    2011-12-12  -0.0428782869
87  12/12/2011 07:10    1690.075    2011-12-12  -0.0233690131
88  12/12/2011 07:15    1690.525    2011-12-12  0.0266224932
89  12/12/2011 07:20    1690.525    2011-12-12  0.0000000000
90  12/12/2011 07:25    1690.325    2011-12-12  -0.0118313442
91  12/12/2011 07:30    1690.890    2011-12-12  0.0334199396
92  12/12/2011 07:35    1692.000    2011-12-12  0.0656243650
93  12/12/2011 07:40    1691.150    2011-12-12  -0.0502490293
94  12/12/2011 07:45    1690.765    2011-12-12  -0.0227681655
95  12/12/2011 07:50    1686.855    2011-12-12  -0.2315240759
96  12/12/2011 07:55    1686.200    2011-12-12  -0.0388371970
97  12/12/2011 08:00    1687.240    2011-12-12  0.0616581313
98  12/12/2011 08:05    1687.505    2011-12-12  0.0157048903
99  12/12/2011 08:10    1688.815    2011-12-12  0.0775992836
100 12/12/2011 08:15    1688.675    2011-12-12  -0.0082901800 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:16:36.097

这是我评论的扩展。我将制作一些假数据并绘制它：

```
> t = seq(as.Date("2011-11-1"),as.Date("2012-06-1"),by=as.difftime("0:15:00"))
> length(t)
[1] 20449
> v = rnorm(length(t))
> plot(t,v)
> plot(t,v,type="l") 
```

我的 x 轴很好地标有日期。我得到 20,449 个 15 分钟的间隔......

从您的数据文件中（我不得不添加一些逗号，因为我认为制表符分隔符丢失并且您有行号）：

```
> gold=read.csv("gold.csv",sep=",",as.is=TRUE)
> gold$Tim = strptime(gold$Date, "%d/%m/%Y %H:%M")
> head(gold)
  row                Date      mid           day         returns
1   1  12/12/2011 00:00   1714.600    2011-12-12              NA
2   2  12/12/2011 00:05   1714.360    2011-12-12   -0.0139984135
3   3  12/12/2011 00:10   1714.050    2011-12-12   -0.0180841848
                       Tim
 1 2011-12-12 00:00:00
 2 2011-12-12 00:05:00
 3 2011-12-12 00:10:00 
```

现在 summary(gold) 告诉我“returns”是字符，因为一开始就烦人的 NA。让我们解决这个问题：

```
> gold$returns=as.numeric(gold$returns) 
```

然后简单地说：

```
> plot(gold$Tim,gold$returns,type="l") 
```

您可能想要调查时间序列数据的包，例如 zoo 或 xts，或者阅读从 R 网页链接的时间序列或财务任务视图...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:02:12.090

实际上我猜你得到了一个 x 轴：它太短了，无法阅读（即只标记前七个点）。

当您将 at 更改为 1:6000 时，您应该收到一条错误消息，例如“轴错误（...）：'at' 和 'labels' 长度不同 5913 ！= 7”

尝试类似*axis(blahblah,* `at = floor(seq(from = 1, to = 5913, length.out = 7))`*, blahblah)*

如果这很重要，您应该调整 seq 函数中的参数，以确保刻度确实在您期望的位置。

# linux - 在 ubuntu 11.10 上安装 NASM

> ID：11501457
> 
> 赞同：0
> 
> 时间：2012-07-16T09:23:31.073
> 
> 标签：linux, nasm, ubuntu-11.10

我是 linux 新手，想使用 ubuntu 11.10 运行汇编语言程序。安装失败显示以下消息

```
Reading package lists… Done
Building dependency tree
Reading state information… Done
The following packages were automatically installed and are no longer required:
mplayer-skins mplayer libggi2 libgii1 libgii1-target-x youtube-dl
Use ‘apt-get autoremove’ to remove them.
The following NEW packages will be installed:
nasm
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 1557kB of archives.
After unpacking 2855kB of additional disk space will be used.
Err
http://archive.ubuntu.com/ubuntu/onieric/main nasm i386 2.09.081 could
not resolve 'archive.ubuntu.com'.
failed to fetch
http://archive.ubuntu.com/ubuntu/pool/main/n/nasm/nasm-2.09.08-1-i386.deb
could not resolve 'archive.ubuntu.com'
E: unable to fetch some archives, maybe run apt-get update or try with
--fix -missing? 
```

我无法弄清楚问题到底是什么？我想提一下，我一直在通过 Live CD 使用 ubuntu，而不是作为已安装的操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:26:38.860

您的互联网连接似乎有问题。特别是dns解析。检查您的 /etc/resolv.conf

# jquery - 从 jQuery Ajax php 调用返回 XML？

> ID：11501460
> 
> 赞同：0
> 
> 时间：2012-07-16T09:23:34.290
> 
> 标签：jquery

我在这里看到关于类似主题的各种帖子。不幸的是，这些都没有帮助。

我对一个 php 文件进行 ajax 调用，该文件创建一个 XML 文件，假设找到数据，我从中填充适当的表单字段。

如果我将返回数据指定为 XML，如下所示，我不会成功，并且会显示警报“无法检索 XML 文件”。

```
function check_Address(){

alert("username=" + $("#username").attr("value"));

$.ajax({
    type: "POST",
    url: "admin_Check_Address.php",
    data: "username=" + $("#username").attr("value"),
    dataType: "xml",                
    success: function(return_Data){
        set_Address(return_Data);
    },
    error: function(return_Data){
        alert("Could not retrieve XML file.");
    }
});  // end ajax call
} 
```

但是，如果我删除数据类型，我会成功执行 set_Address 函数，并找到 return_Data 中的 tagNames 并且正确填充该字段。IE

```
function check_Address(){

alert("username=" + $("#username").attr("value"));

$.ajax({
    type: "POST",
    url: "admin_Check_Address.php",
    data: "username=" + $("#username").attr("value"),
    success: function(return_Data){
        set_Address(return_Data);
    },
    error: function(return_Data){
        alert("Could not retrieve XML file.");
    }
});  // end ajax call
} 
```

这是php：

```
<?php 

/*
 * Accept username from Ajax
 * Get appropriate key
 * Check for pre existing address(es)
 */

if(isset($_POST["username"])){

    // retrieve user key

    $sql  = "SELECT * FROM User ";
    $sql .= "WHERE username = ";
    $sql .= "'";
    $sql .= $_POST['username']; 
    $sql .= "'";
    $sql .= " LIMIT 1;";
    $user = User::find_By_Sql($sql);
    $user_Key = $user[0]->get_User_Key();

    // check for an existing address or addresses

    $sql  = "SELECT * FROM Address ";
    $sql .= "WHERE user_Key = ";
    $sql .= "'";
    $sql .= $user_Key;  
    $sql .= "';";
    $addresses = Address::find_By_Sql($sql);

    // how many addresses found
    // if none nothing to do except set focus on address 1
    // if 1 address returned check active and return xml to complete fields
    // if >1 return xml to create list for user to select from

    echo "addr ct:" . count($addresses);

    if (count($addresses) == 1){
        construct_XML($addresses[0]);
    }
} else {
    echo "error nothing passed";
}

function construct_XML($address){

    echo ("start xml");

    $xml_String  = "<?xml vesrion=\"1.0\"?>";
    $xml_String .= "<addresses>";
    $xml_String .= "<address>";
    $xml_String .= "<username>";
    $xml_String .= $_POST['username'];
    $xml_String .= "</username>";
    $xml_String .= "<address1>";
    $xml_String .= $address->address_1;
    $xml_String .= "</address1>";
    $xml_String .= "<address2>";
    $xml_String .= $address->address_2;
    $xml_String .= "</address2>";
    $xml_String .= "<city>";
    $xml_String .= $address->city;
    $xml_String .= "</city>";
    $xml_String .= "<county>";
    $xml_String .= $address->county;
    $xml_String .= "</county>";
    $xml_String .= "<country>";
    $xml_String .= $address->country;
    $xml_String .= "</country>";
    $xml_String .= "<post_Code>";
    $xml_String .= $address->post_Code;
    $xml_String .= "</post_Code>";
    $xml_String .= "</address>";
    $xml_String .= "</addresses>";

    echo $xml_String;

}

?> 
```

读取 XML 的设置地址函数为：

```
function set_Address(return_Data){

$("#address_1").attr("value", $("address1", return_Data).text());
$("#address_2").attr("value", $("address2", return_Data).text());
$("#city").attr("value", $("city", return_Data).text());
$("#county").attr("value", $("county", return_Data).text());
$("#country").attr("value", $("country", return_Data).text());          
$("#code").attr("value", $("post_Code", return_Data).text());
} 
```

我在想我应该返回一个 file.xml 而不是回显字符串，但我不知道该怎么做。

有什么想法我哪里出错了吗？我可以简单地省略 dataType 并且一切正常，但我想知道为什么它不会将其识别为 XML，所以我下次了解。

非常感谢。

好的，非常感谢您的回复。是的，我在原始帖子中留下了两个错误，这些错误与 2 条不需要的行相呼应。

我现在明白我需要在字符串之前包含标题，以便让 ajax 将其作为 XML 接收。

`header ("Content-Type:text/xml");`

但是我仍然无法让 Jquery 正确解析从 PHP 返回的数据遇到过：

xml解析错误找不到元素位置moz-nullprincipal

我一直无法解决这个问题。因此，我更新了 ajax，以便将一个调用嵌套在另一个调用中，以使 php 返回 XML。我不确定这是否合适，但它有效：.....

这是php

```
<?php require_once("../../_includes/initialize.php"); ?>

<?php 

/*
 * Accept username from Ajax
 * Get appropriate key
 * Check for pre existing address(es)
 */

$tmpuser = "john@hotmail.co.uk";

if(isset($_POST["username"])){

    // retrieve user key

    $sql  = "SELECT * FROM User ";
    $sql .= "WHERE username = ";
    $sql .= "'";
    $sql .= $_POST['username']; 
    $sql .= "'";
    $sql .= " LIMIT 1;";
    $user = User::find_By_Sql($sql);
    $user_Key = $user[0]->get_User_Key();

    // check for an existing address or addresses

    $sql  = "SELECT * FROM Address ";
    $sql .= "WHERE user_Key = ";
    $sql .= "'";
    $sql .= $user_Key;  
    $sql .= "';";
    $addresses = Address::find_By_Sql($sql);

    // how many addresses found
    // if none nothing to do except set focus on address 1
    // if 1 address returned check active and return xml to complete fields
    // if >1 return xml to create list for user to select from

    if (count($addresses) == 1){
        construct_XML($addresses[0]);
    }
} else {
    //"error nothing passed";
}

function construct_XML($address){

// initialize xml object

$xml_Data = simplexml_load_string("<?xml version='1.0'?>\n<addresses></addresses>");

$address_Detail = $xml_Data->addChild("address");
$address_Detail->addChild("username", $_POST['username']);
$address_Detail->addChild("address1", $address->address_1);
$address_Detail->addChild("address2", $address->address_2);
$address_Detail->addChild("city", $address->city);
$address_Detail->addChild("county", $address->county);
$address_Detail->addChild("country", $address->country);
$address_Detail->addChild("post_Code", $address->post_Code);

$fp = fopen("addresses.xml","wb");
fwrite($fp,$xml_Data->asXML());
fclose($fp);

}

?> 
```

这是修改后的 Ajax 调用：

```
function check_Address(){

$.ajax({
    type: "POST",
    url: "admin_Check_Address.php",
    data: "username=" + $("#username").attr("value"),
    success: function(return_Data){
            $.ajax({
            type: "POST",
            url: "addresses.xml",
            dataType: "xml",
            success: function(xml_Data){
                set_Address(xml_Data);
            },
            error: function(){
                alert("Could not retrieve XML file.");
            }
        });  // end innerajax call  
    },
    error: function(){
        alert("Could not retrieve XML file.");
    }
});  // end ajax call   
} 
```

调整 set_Address 函数

```
function set_Address(xml_Data){

$("#address_1").attr("value", $("address1", xml_Data).text());
$("#address_2").attr("value", $("address2", xml_Data).text());
$("#city").attr("value", $("city", xml_Data).text());
$("#county").attr("value", $("county", xml_Data).text());
$("#country").attr("value", $("country", xml_Data).text());         
$("#code").attr("value", $("post_Code", xml_Data).text()); 
```

}

所以不是 100% 我真的希望能够一击完成 ajax 调用。因此，非常欢迎任何进一步的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:27:09.783

您需要在 php.ini 中设置适当的标头。

```
header ("Content-Type:text/xml"); 
```

我也确定 echo ("start xml"); 在开始输出 xml 之前可能会很麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:27:20.033

可能来自服务器的返回响应具有与 XML 不同的标头（您可以在 firebug 中检查）。

因此，您实际发送的是具有 html 标记的 xml（因为标题是这样写的）。

如果您在 ajax 调用中明确表示返回的响应是 XML，它将无法解析它。

如果您什么都不设置，它将能够读取 HTML，但就像 DOM 元素一样。

如果您正确设置标题，它将被修复

```
header ("Content-Type:text/xml"); 
```

# maven - Maven rpm 插件不喜欢 'executable' 作为目录路径名

> ID：11501461
> 
> 赞同：1
> 
> 时间：2012-07-16T09:23:34.843
> 
> 标签：maven, plugins, rpm

在源映射中，我指定了许多不同的目录。一切正常。

但是，如果我指定名称为 executable 的目录，RPM 插件会返回错误代码 1。奇怪的是，这些文件仍然被复制到 RPM buildroot，但 RPM 插件总体上失败了。我将目录重命名为“lib”，它构建得很好。

可执行文件是保留字还是某种关键字？？？下面的映射会导致构建失败。我检查了拼写，这很好。路径存在。那为什么会失败？？？

```
<mapping>
    <directory>/executable</directory>   //rpm directory
    <filemode>0644</filemode>
    <sources>
       <source>                                     
         <location>/path/to/directory/executable</location> // local dir under target
       </source>
    </sources>
</mapping> 
```

# html - 静态 HTML 页面作为 Sharepoint 页面

> ID：11501462
> 
> 赞同：2
> 
> 时间：2012-07-16T09:23:35.743
> 
> 标签：html, sharepoint

我想使用我现有的静态 HTML 页面作为共享点页面（原样，外观没有任何变化）。是否有可能，如果有，如何....正如我从 sharepoint 中看到的创建页面的那样，它只向我显示 2 个选项“基本页面”和“Web 部件页面”，它们都有一个 .aspx 页面。有人可以指出我正确的实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:17:51.590

上传您的 html 页面`pages library`并将您的`web application` 设置更改为允许。那会成功的。 - 编辑 -

1.  转到 Central Admin > Web 应用程序管理 > 选择您的 Web 应用程序
2.  单击常规设置并转到显示的部分`Browser File Handling`。默认情况下，它设置为`Strict`，制作`Permission`并保存更改。

我希望这将帮助您正确更新设置。

# visual-studio-2010 - 如何将 Visual C++ 模板添加到 Visual Studio 2010 Ultimate

> ID：11501463
> 
> 赞同：0
> 
> 时间：2012-07-16T09:23:36.780
> 
> 标签：visual-studio-2010, visual-c++

我最近用 Visual c# 安装了 Visual Studio 2010 Ultimate。现在我想用 Visual C++ 编程，我该如何安装 Visual C++ 模板？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:22:37.860

尝试在“新建”->“项目”下的在线模板部分中搜索，然后在窗口左侧搜索。

要恢复所有模板，请关闭 Visual Studio 的所有实例。打开 Visual Studio 命令提示符并遍历到 ../Microsoftvisualstudioxxxx/common7/IDE 然后键入

```
 **devenv /installvstemplates** 
```

在命令提示符下。等待一段时间，直到所有模板都恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:32:02.260

再次启动 Visual Studio 安装程序并更改选定的功能集。

# android - 带有可单击复选框的列表视图

> ID：11501474
> 
> 赞同：0
> 
> 时间：2012-07-16T09:24:05.870
> 
> 标签：android, listview, checkbox

我有一个带有自定义arrayadapter 和自定义布局的listivew，它有一个复选框。我想让这个列表视图只启用一个复选框，但我不知道该怎么做。

这是我的适配器，但检查和取消检查不能正常工作。请举任何例子。

```
public class gremioAdapter extends ArrayAdapter<Gremio> {

Context context;
int layoutResourceId;
ArrayList<Gremio> data = null;
protected String comentarioAlEdiText;

public gremioAdapter(Context context, int layoutResourceId, ArrayList<Gremio> data)
{
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

public void updateDataSet(Gremio objetoGremioAnadir) {
    this.data.add(objetoGremioAnadir);
    notifyDataSetChanged();

}

public void updateDataSet(Gremio objetoGremioAnadir, int posicion) {
    this.data.add(posicion, objetoGremioAnadir);
    notifyDataSetChanged();

}

public void updateDataSet(String comentario, int posicion) {
    this.data.get(posicion).comentario = comentario;
    notifyDataSetChanged();

}
public void updateDataSet() {

    notifyDataSetChanged();

}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View row = convertView;
    GremioHolder holder = null;
    final GremioHolder h2 = holder;

    if (row == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new GremioHolder();
        holder.tvGremio = (TextView) row.findViewById(R.id.tvGremio);
        holder.cbActivo = (CheckBox) row.findViewById(R.id.cbGremioActivo);
        holder.tvComentario = (TextView) row.findViewById(R.id.tvComentario);

        row.setTag(holder);
    }
    else {
        holder = (GremioHolder) row.getTag();
    }

    Gremio gremioFinal = data.get(position);

    holder.tvGremio.setText(gremioFinal.literal);
    holder.tvComentario.setText(gremioFinal.comentario);

    if (data.get(position).getActivo().equals("1")) {
        holder.cbActivo.setChecked(true);
    }
    else {
        holder.cbActivo.setChecked(false);
    }

    holder.cbActivo.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            if (data.get(position).activo.equals("0"))
                h2.cbActivo.setChecked(true);
            if (data.get(position).activo.equals("1"))
                h2.cbActivo.setChecked(false);

        }
    });
    holder.cbActivo.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                if (!isChecked) {
                    for (int i = 0; i < data.size(); i++) {
                        data.get(i).activo = "0";
                    }
                    data.get(position).activo = "1";
                }
                if (isChecked) {
                    for (int i = 0; i < data.size(); i++) {
                        data.get(i).activo = "0";
                    }
                }

                notifyDataSetChanged();

            }
        });

        return row;
    }

    public class GremioHolder {
        TextView tvGremio;
        CheckBox cbActivo;
        TextView tvComentario;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:37:54.327

这应该照顾您的要求。关于如何实现这一点的非常好的教程。

[http://tokudu.com/2010/android-checkable-linear-layout/](http://tokudu.com/2010/android-checkable-linear-layout/)

所以基本的基础是，

1.  扩展布局（线性/相对）并实现可检查接口。
2.  膨胀布局后，找出选择了哪个子级并选中相应的复选框。取消选中任何其他先前选中的项目。
3.  确保您的 ListView 的 XML 具有以下标记 [android:choiceMode="singleChoice"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:36:49.293

跳它对您有用...只需更改您的 getview() 方法即可。

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        final Holder holder;
        if (vi == null) {
            vi = inflater.inflate(R.layout.raw_customelabel_list, null);
            holder = new Holder();

            holder.txtname = (TextView) vi
                    .findViewById(R.id.raw_customlabel_txt_name);
            holder.checkbox = (CheckBox) vi
                    .findViewById(R.id.raw_customlabel_checkbox);
            vi.setTag(holder);

        } else {
            holder = (Holder) vi.getTag();
        }

        vi.setTag(holder);
        holder.txtname.setText(strarry[position]);

        holder.checkbox.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                for (int i = 0; i < strarry.length; i++) {
                    if (v.getId() == i) {
                        checkarry[i] = true;
                        Log.v("check", ""+position);
                    } else {
                        checkarry[i] = false;
                    }
                }
                notifyDataSetChanged();
            }
        });

        if (checkarry[position]) {
            holder.checkbox.setChecked(true);
        } else {
            holder.checkbox.setChecked(false);
        }

        return vi;
    }

} 
```

# php - 无法通过 xpath 访问具有多个命名空间的 xhtml 文档中的节点

> ID：11501475
> 
> 赞同：0
> 
> 时间：2012-07-16T09:24:05.700
> 
> 标签：php, xpath, curl, namespaces

好的，所以我正在尝试使用 curl 和 xpath 解析 xhtml 站点。

该站点有多个命名空间：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:addthis="http://www.addthis.com/help/api-spec"     xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

我正在尝试从网站的分页中获取所有网址，如下所示：

```
$url = [site_im_parsing];

$dom = new DOMDocument();
@$dom->loadHTML($url);  
$xpath = new Domxpath($dom);

$xpath->registerNamespace("x", "http://www.w3.org/1999/xhtml");

$pages = $xpath->query('//x:div[2]/x:table/x:tbody/x:tr/x:td[1]/x:a');

for ($i = 0; $i < $pages->length; $i++) {

    echo $pages->item($i)->getAttribute('href');

} 
```

这行不通。（没有 x-namespace 的分页的 xpath 应该是正确的）。我应该注册所有命名空间并在 xpath 查询中以某种方式使用它们吗？

最好的问候， AB

// 问题更新 //

这是我要解析的页面的一部分：（我想要href）

```
<div class="pager">
    <table style="width:100%" border="0" cellspacing="0" cellpadding="0">
        <tbody>
            <tr>
                <td>
                    <span class="current">1</span>  | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=1">2</a> | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=2">3</a> | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=3">4</a> | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=4">5</a> | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=5">6</a> | 
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=6">7</a>        
                </td>
                <td style="text-align:right">
                    <a href="http://www.somewebsite.com/catalog?on_offer=1&amp;commodity_offset=1">Next</a>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

文档类型是：

html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"

如果这有什么不同...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:34:53.387

我`loadHTML`希望任何命名空间都被忽略，所以尽量不要使用`registerNamespace`，然后使用`$xpath->query('//div[2]/table/tbody/tr/td[1]/a');`. 作为 XML 的替代解析，使用命名空间是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:45:56.890

好吧，我想通了...

当文档中不存在时，浏览器将插入一个隐式标记 < tbody >。xpath 只会处理原始 HTML 字符串中存在的标签，所以我只是省略了 < tbody > 标签。

旧的 xpath 查询：

```
$xpath->query('//div[2]/table/tbody/tr/td[1]/a'); 
```

新的：

```
$xpath->query('//div[2]/table/tr/td[1]/a'); 
```

# winforms - DevExpress 表单设计无法加载

> ID：11501476
> 
> 赞同：0
> 
> 时间：2012-07-16T09:24:05.837
> 
> 标签：winforms, devexpress

当我尝试打开 xtraform 设计时，我得到了某种错误：

```
"Could not load file or assembly 'nanodems.NDIS.MessageParser, Version=1.0.9.436, 
Culture=neutral, PublicKeyToken=null' or one of its dependencies.
The system cannot find the file specified." 
```

但是我使用的是指定版本的dll！我无法弄清楚问题的原因。问题是什么？

# c - 在二叉树中使用指针

> ID：11501480
> 
> 赞同：0
> 
> 时间：2012-07-16T09:24:30.050
> 
> 标签：c, pointers

> **可能重复：**
> [二叉树 - 取消引用指针](https://stackoverflow.com/questions/11501016/binary-tree-dereferencing-pointers)

我只是想编写一个简单的二叉搜索树程序，用户可以在其中插入节点并以中序、前序或后序模式查看树中的所有节点。我的代码是

* * *

```
#include <stdio.h>
#include <stdlib.h>

struct treenode
{
int data;
struct treenode *lchild;
struct treenode *rchild;
};

void insertnode(struct treenode **n,int d)
{
struct treenode *p=&n;
if(p==NULL)
{
    // means the tree is empty
    p=(struct treenode *)malloc(sizeof(struct treenode));
    p->data=d;
    p->lchild=NULL;
    p->rchild=NULL;
}

else
{
    // strat comparing the new data from root
    if( d<p->data )
        insertnode(((p->lchild)),d);

    else
        insertnode(((p->rchild)),d);
}
}

void preorder(struct treenode **n)
{
struct treenode *p=&n;
if(p==NULL)
{
    printf("\nThe list is empty");
}

else
{
    printf("%d",p->data);
    preorder(p->lchild);
    preorder(p->rchild);
}

}

void postorder(struct treenode **n)
 {
struct treenode *p=&n;
if(p==NULL)
{
    printf("\nThe list is empty");
}

else
{
    preorder(p->lchild);
    preorder(p->rchild);
    printf("%d",p->data);
}

}

void inorder(struct treenode **n)
{
struct treenode *p=&n;
if(p==NULL)
{
    printf("\nThe list is empty");
}

else
{
    preorder(p->lchild);
    printf("%d",p->data);
    preorder(p->rchild);
}

}

int main(void)
{
struct treenode *root=NULL;
int choice,data;

while(1)
{
    printf("\nPress 1 for inserting a node in BST fashion: ");
    printf("\nPress 2 for traversing the tree in preorder fashion :");
    printf("\nPress 3 for traversing the tree in postorder fashion :");
    printf("\nPress 4 for traversing the tree in inorder fashion :");
    printf("\nPress 5 to exit :");

    printf("\nEnter your choice: ");
    scanf("%d", &choice);

    switch(choice)
    {
        case 1: printf("\nEnter the data to be inserted:");
            scanf("%d",&data);
            insertnode(&root,data);
            break;

        case 2: preorder(&root);
            break;

        case 3: postorder(&root);
            break;

        case 4: inorder(&root);
            break;

        case 5: exit(0);
            break;

        default: printf("\nYou have enetred an invalid choice. Please try again");
    }
}

return 0;
} 
```

* * *

程序运行成功，但是在我进入节点后，资源管理器检测到错误并且程序停止工作。代码中是否有任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:30:17.463

剧透：

```
#include <stdio.h>
#include <stdlib.h>

struct treenode {
    struct treenode *lchild;
    struct treenode *rchild;
    int data;
    } *root = NULL;

void insertnode(struct treenode **pp,int d)
{
    for( ;*pp; )
    {
         if (d < (*pp)->data) pp = &(*pp)->lchild;
         else  pp = &(*pp)->rchild;
    }
    *pp = malloc (sizeof **pp);
    (*pp)->data = d;
    (*pp)->lchild = NULL;
    (*pp)->rchild = NULL;
}

void preorder(struct treenode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
        return;
    }

    printf("%d,",p->data);
    if (p->lchild) preorder(p->lchild);
    if (p->rchild) preorder(p->rchild);
}

void postorder(struct treenode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
        return;
    }

    if (p->lchild) preorder(p->lchild);
    if (p->rchild) preorder(p->rchild);
    printf("%d,",p->data);
}
void inorder(struct treenode *p)
{
    if(p==NULL)
    {
        printf("\nThe list is empty");
        return;
    }

    if (p->lchild) preorder(p->lchild);
    printf("%d,",p->data);
    if (p->rchild) preorder(p->rchild);
}

int main(void)
{
    root=NULL;
    int choice,data;

    while(1)
    {
         printf("\nPress 1 for inserting a node in BST fashion: ");
         printf("\nPress 2 for traversing the tree in preorder fashion :");
         printf("\nPress 3 for traversing the tree in postorder fashion :");
         printf("\nPress 4 for traversing the tree in inorder fashion :");
         printf("\nPress 5 to exit :");

         printf("\nEnter your choice: ");
         scanf("%d", &choice);

    switch(choice)
    {
        case 1: printf("\nEnter the data to be inserted:");
            scanf("%d",&data);
            insertnode( &root,data);
            break;

        case 2: preorder(root);
            break;

        case 3: postorder(root);
            break;

        case 4: inorder(root);
            break;

        case 5: exit(0);
            break;
        default: printf("\nYou have entered an invalid choice. Please try again");
    }
}

return 0;
} 
```

# asp.net - 我想从表中选择不同的值

> ID：11501482
> 
> 赞同：2
> 
> 时间：2012-07-16T09:24:42.560
> 
> 标签：asp.net

我的表有 200 万条记录。我想从表中选择不同的值。如果我使用 select distinct... 可能需要更多时间。在更短的时间内选择不同值的另一种选择是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:28:43.807

如果要选择 distinct，则必须选择 distinct。

您可以做以下几件事来加快速度：

1.  索引您选择的不同列。
2.  如果可能，请使用聚集索引。
3.  对数据进行分区，以便更快地搜索。

200 万行虽然很大，但对于数据库来说并非闻所未闻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:27:28.723

如果您已经完成了正确的索引，那么 SELECT DISTINCT 应​​该是这里最快的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:27:29.633

通过...分组？或者让另一个表只有不同的值被插入、删除、更新到原始表的触发器修改？

# windows-mobile - 应用程序因 filesys.exe 中的错误而崩溃

> ID：11501487
> 
> 赞同：0
> 
> 时间：2012-07-16T09:25:22.840
> 
> 标签：windows-mobile, compact-framework, sql-server-ce, emulation, merge-replication

如果有一个应用程序（我们称之为 A，CF 3.5）在同一目录中调用另一个应用程序（B，CF 3.5）来委派一些工作（下载文件）。只要应用程序 A 不加载 SQL Server CE 程序集（3.5 SP2），这就会很好地工作。如果是，应用程序 B 将因随机文件系统错误（例如无法加载的程序集）和许多异常而崩溃在文件sys.exe 中。以下是 Windows Mobile 生成的错误报告的内容：

> # 桶参数
> 
> 事件类型：WinCE50lbException
> 
> 应用名称：filesys.exe
> 
> 应用程序版本：5.2.0.0
> 
> AppStamp：29ccdda8
> 
> 模组名称：vcefsd.dll
> 
> 版本：5.2.0.0
> 
> 模组邮票：52652c34
> 
> 偏移量：000017a0
> 
> 自己的名字：B.exe
> 
> 拥有版本：1.0.0.0
> 
> 自己的邮票：5003c932

即使在调试结束并且两个应用程序都不再运行后，此错误也会发生多次。应用程序 B 本身发生的错误示例：

> 找不到文件或程序集名称“OpenNETCF.Drawing，Version=2.2.0.0，Culture=neutral，PublicKeyToken=...”或其依赖项之一。

程序集名称会不时更改（也可以是 CF 3.5 程序集）。错误发生在模拟器中（总是），但从**不在真实设备上**。如果应用程序 A 正在下载文件而不是将工作委托给 B，则不会发生错误。

我怀疑模拟器的存储卡驱动程序会导致此错误，但我不知道如何进一步调试该问题。

**注意：**应用程序 A 使用以下 API 调用加载本地部署的 SQL CE 库（sqlceoledb35.dll、sqlcese35.dll、sqlceqp35.dll、sqlceme35.dll、sqlceca35.dll、sqlcecompact35.dll）：

```
[DllImport("coredll.dll")]
private static extern IntPtr LoadLibrary(string fileName); 
```

* * *

**更新**

在我为测试删除 OpenNETCF 引用后，我得到了这个异常：

> 无法读取配置文件 '...\some.config'：UnauthorizedAccessException

这是我们的配置管理器包装的异常（我无法调试它，因为它发生在 B 中）。应用程序 A 读取该文件，但在反序列化后立即关闭并释放它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:30:35.123

看起来您也在使用其中一种[OpenNETCF](http://www.opennetcf.com/)工具。

您是否已确认您正在根据需要处理这些组件？

**编辑：**读取或写入`some.config`文件时，请务必在文件周围使用锁，以防止其他进程同时尝试访问此资源。

```
private object objSomeConfig = new Object();

public string GetSomeConfig() {
  string data = null;
  lock (objSomeConfig) {
    data = ....; // fill in your code
  }
  return data;
} 
```

# c# - 如何使用 C# 和 ASP.NET 将用户放入队列

> ID：11501491
> 
> 赞同：2
> 
> 时间：2012-07-16T09:25:31.423
> 
> 标签：c#, asp.net, request

我使用 C# 和 ASP.NET 在 Visual Studio 2010 中创建了一个动态数据网站

当用户创建请求（例如软件安装请求）时，我希望该请求进入某种队列。这样我就可以检查用户的请求并允许或拒绝它。

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:33:08.983

将所有请求存储在数据库中，并添加尚未处理的标志

# java - 如何在 Java 中实现 rawurldecode？

> ID：11501492
> 
> 赞同：1
> 
> 时间：2012-07-16T09:25:33.560
> 
> 标签：java, android, web-applications

我想将 PHP 代码转换为 Java，即解码存储为编码 URI 格式的字符串。

也就是改变

> 这%20是%20a%20%2Burl%2B%21

进入

> 这是一个+url+！

我查看了 java.net.URI，但没有合适的示例，而且似乎任何要被它解码的东西都需要采用正确的 URI 格式。我想转换一个格式不正确但包含 HTML 编码的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:31:25.557

您可以使用 URLDecoder（[此处为文档）](http://developer.android.com/reference/java/net/URLDecoder.html)。它只是解码一个 x-www-form-urlencoded 字符串。

```
 String decodedString = URLDecoder.decode("This%20is%20a%20%2Burl%2B%21");
    System.out.println(decodedString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:31:27.070

```
java.net.URLDecoder.decode("This%20is%20a%20%2Burl%2B%21", "UTF-8"); 
```

UTF-8 当然只是一个例子。使用您的输入编码。

# java - 获取括号之间的字符串

> ID：11501494
> 
> 赞同：0
> 
> 时间：2012-07-16T09:25:37.903
> 
> 标签：java, android, regex, parentheses, getstring

> **可能重复：**
> [正则表达式查找包含在两个字符之间的字符串，同时排除分隔符](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu)

我正在使用名为 Interpreter.eval() 的外部库“beanshell”的方法，该方法允许使用字符串进行数学运算并返回解决方案。

它工作正常，但如果我想提高到二次方或从中获得平方根，我必须修改原始字符串，就像

**字符串 st="x = 2+4*a*(b+c)^2"**

我需要得到括号之间的字符以将**“（b + c）^ 2”**替换为**“（b + c）*（b + c）”**或**“Math.pow（（b + c），2）”**

我怎样才能做到这一点？提前致谢！

- - 编辑 - -

最后我找到了解决方案。

```
 Interpreter interpreter = new Interpreter();
    String st = "x = 2+4*1*(2*(1+1)^2)^2 + (4+5)^2";

    int index = -2;
    char prev;
    char post;
    int openPar = -1;
    if (st.contains("^")) {

        index = st.indexOf("^");

        while (index != -1) {

            prev = st.charAt(index - 1);
            post = st.charAt(index + 1);

            if (prev == ')') {
                int match = 0;
                int i = index - 2;
                char check = '0';

                boolean contiunar = true;
                while (contiunar) {
                    check = st.charAt(i);

                    if (check == ')')
                        match++;

                    if (check == '(') {

                        if (match == 0) {

                            openPar = i;
                            contiunar = false;
                        } else
                            match = match - 1;
                    }

                    i = i - 1;

                }

                String rep = st.substring(openPar + 1, index - 1);
                String resultado = "";
                try {
                    interpreter.eval("r= Math.pow(" + rep + "," + post
                            + ")");
                    resultado = interpreter.get("r").toString();

                } catch (EvalError e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                st = st.replace("(" + rep + ")^" + post, resultado);

            } else {
                st = st.replace(prev + "^" + post, prev + "*" + prev);
            }

            index = st.indexOf("^");

        }

    } 
```

有了这个我修改了原来的 String **x = 2+4*1*(2*(1+1)^2)^2+(4+5)^2** （例如）

为**x=2+4*1*64+81**

1.  首先它搜索第一个“^”
2.  获取前一个字符
3.  如果有“）”
4.  搜索前一个字符，同时找到“（”但是如果在“（”之前找到“）”必须找到 2 个“（”；一个打开内部括号，第二个打开我想要 pow 的括号。

这是在“（2+（3+4）+5）^2”的情况下--->返回“2+（3+4）+5”而不是“3+4）+5”。

现在替换为正确的表达式**Math.pow("result","2")"**并逐步计算 (1+1)^2 = 4 (2*4)^2 = 64

(4+5)^2 = 81

终于现在我可以用 Interpreter.eval() 计算返回值了

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:44:11.757

尝试以下代码来完成您的任务

```
String originalString ="x = 2+4*a*(b+c)^2";
String stringToInsert = "Math.pow((b+c),2)";

int startIndex = originalString.indexOf("(");
int endIndex = originalString.indexOf(")");

String firstPortion = originalString.substring(0,startIndex);
String lastPortion = originalString.substring(endIndex+1);
String finalString = firstPortion + stringToInsert + lastPortion;

System.out.println("finalString : "+finalString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:35:27.067

您将需要解析字符串。您可以编写一个完整的解析器并逐个字符地检查它。

否则，如果您有特定的流程图（使用运算符），请使用 String.split(\"*(...) 功能，您基本上可以根据您的分隔符创建标记。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:46:53.593

当然你需要解析字符串。您可以将其转换为中间状态（之后您可以非常快速地执行）。您可以查看以下链接，也许它可以帮助您[http://en.wikipedia.org/wiki/Reverse_Polish_notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)

# sitecore - 为 Sitecore 6 处理外联网中的安全媒体项目？

> ID：11501499
> 
> 赞同：0
> 
> 时间：2012-07-16T09:25:51.607
> 
> 标签：sitecore, sitecore6

我在 Sitecore 解决方案上设置了外联网。登录和访问外部网下方的项目在安全等方面工作正常。

但也有一些文件，只有登录到 Extranet 的用户才能访问。为此，我在媒体库的根目录中创建了一个名为`Extranet`. 我已经为此设置了安全性（从 中添加`extranet\user`并删除了`read`访问权限`extranet\everyone`）。我还检查了该字段中的`inheritance`选项。`security`

但是当我在这个文件夹下添加一个文件时，它看起来不像是继承了安全设置。虽然`extranet\anonymous`无法访问该项目，`extranet\user`但也不能。如果我明确设置文件的安全性并允许`extranet\user`，它就可以工作。

我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:27:23.457

问题在于访问冲突。您必须创建一个不同的角色，例如：extranet/registered 并授予对它的读取权限。登录后，在该登录用户上设置“extranet/registered”角色。关于如何设置角色的一些代码：

```
var loginUser = database.ValidateUserForLogin(userName.Trim(), password.Trim());
            if (loginUser == null) return false;

            User _user = AuthenticationManager.BuildVirtualUser(domainUser, true);

            if (_user != null)
            {
                AuthenticationManager.Login(_user);
                _user.RuntimeSettings.AddedRoles.Add(@"extranet\registered");
                _user.Profile.SetCustomProperty("UserId", loginUser .UserId.ToString());
            } 
```

loginUser 是来自数据库的自定义对象。我正在使用 sitecore authenticationmanager（来自 sitecore.security 命名空间）。

试试我们的，让我知道它是怎么回事。

# java - java.sql.SQLRecoverableException：关闭连接

> ID：11501500
> 
> 赞同：4
> 
> 时间：2012-07-16T09:25:53.153
> 
> 标签：java, jboss, oracle11gr1

我正在使用 jboss7.0.2 final 和 Oracle 11。目前我面临一个随机发生的问题。但是在重负载期间，此错误跟踪会不断增长。尝试了很多方法都没有成功。

**我的数据源配置：**

```
<?xml version="1.0" encoding="UTF-8"?>
<datasource jndi-name="sportPool" pool-name="sportPool" enabled="true" jta="true" use-java-context="true" use-ccm="true">
    <connection-url>jdbc:oracle:thin:@10.11.252.200:1521:sportsdb</connection-url>
    <driver>oracleDriver</driver>
    <pool>
        <min-pool-size>1</min-pool-size>
        <max-pool-size>75</max-pool-size>
        <prefill>false</prefill>
        <use-strict-min>false</use-strict-min>
        <flush-strategy>FailingConnectionOnly</flush-strategy>
    </pool>
    <security>
        <user-name>mportal</user-name>
        <password>mobile</password>
    </security>
    <timeout>
        <idle-timeout-minutes>60000</idle-timeout-minutes>
    </timeout>
</datasource> 
```

**堆栈跟踪：**

```
nested exception is java.sql.SQLRecoverableException: Closed Connection
        at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.translate(SQLExceptionSubclassTranslator.java:82)
        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.translate(SQLErrorCodeSQLExceptionTranslator.java:237)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:604)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:638)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:667)
        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:683)

        ... 50 more
Caused by: java.sql.SQLRecoverableException: Closed Connection
        at oracle.jdbc.driver.OracleStatement.ensureOpen(OracleStatement.java:4051)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3563)
        at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)
        at org.jboss.jca.adapters.jdbc.CachedPreparedStatement.executeQuery(CachedPreparedStatement.java:111)
        at org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeQuery(WrappedPreparedStatement.java:462)
        at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:645)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:588)
        ... 56 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:59:16.443

1.  查看您的数据库设置 - 数据库中设置的超时时间可能短于数据源部署描述符中设置的超时时间，并且数据库关闭了连接。

2.  检查您的网络 - 您的防火墙/路由设置可能有问题，并且连接在路由中间的某处关闭/丢弃。

3.  看看这个链接[JBoss 7 Datasource Configuration](http://docs.jboss.org/ironjacamar/userguide/1.0/en-US/html/deployment.html#d0e2292)。有一种配置数据源描述符的方法，强制 JBoss 在从池中检出连接时检查连接。使用`valid-connection-checker`（较快）或`check-valid-connection-sql`（较慢）设置并设置

    ```
    <valid-connection-checker>
        org.jboss.resource.adapter.jdbc.vendor.OracleValidConnectionChecker
    </valid-connection-checker> 
    ```

    或者

    ```
    <check-valid-connection-sql>
        SELECT 1 FROM DUAL
    </check-valid-connection-sql> 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:21:55.807

关于我如何解决此问题的快速更新。我已经完成了应用程序之外的更改，即在 JBOSS 中

```
**ironjacamar-jdbc** 
```

1.  在此位置“{JBOSS_HOME_7.0.2}/modules/org/jboss/ironjacamar/jdbcadapters/main/”将 ironjacamar-jdbc jar 从 1.0.3 更新到 1.1.0

    **`Stanalone.xml`**

正如 npe 所建议的，添加了`<check-valid-connection-sql>`.

```
<datasource jndi-name="sportPool" pool-name="sptPool" enabled="true" jta="true" use-java-context="true" use-ccm="true">
    <connection-url>
        jdbc:oracle:thin:@10.11.252.200:1521:sprtsdb
    </connection-url>
    <driver>
        oracleDriver
    </driver>
    <pool>
        <min-pool-size>1</min-pool-size>
        <max-pool-size>90</max-pool-size>
        <prefill>false</prefill>
        <use-strict-min>false</use-strict-min>
        <flush-strategy>FailingConnectionOnly</flush-strategy>
    </pool>
    <security>
        <user-name>mtal</user-name>
        <password>mle</password>
    </security>
    <validation>
        <check-valid-connection-sql>SELECT 1 FROM DUAL</check-valid-connection-sql>
        <validate-on-match>false</validate-on-match>
        <background-validation>false</background-validation>
        <use-fast-fail>false</use-fast-fail>
    </validation>
    <timeout>
        <idle-timeout-minutes>15</idle-timeout-minutes>
    </timeout>
</datasource> 
```

这解决了问题。但是 jboss 在控制台中打印警告消息“IJ000612”，只要应用程序从 jboss 获取有效的连接对象，我认为应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:53:12.280

似乎您的连接断开了，在大多数情况下，当出现网络问题时会发生这种情况。您使用的配置有点奇怪；

```
idle-timeout-minutes = 41 days , default is 15 minutes
min-pool-size = 1 
```

可能是导致您的 SQLRecoverableExceptions 的空闲超时分钟，我会使用类似的配置；

```
idle-timeout-minutes = 15 minutes
min-pool-size = 10
max-pool-size = 50 or even less You are using 150MB memory for 75 connections 
```

如果您没有与数据库的长时间阻塞连接，则 20 最大池大小应该足够了。

# asp.net-mvc - ASP.NET Mvc 下拉列表？

> ID：11501501
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:25:55.070
> 
> 标签：asp.net-mvc, jquery, drop-down-menu

脚本

```
$(document).ready(function () {
    $("#musteri_sno").change(function () {
        var strSayacID = "";
        strSayacID = $(this)[0].value; // get the selected state id

        var url = "/SayacOkumalari/MusteriSayaclariniGetir/" + strSayacID ;
        // call controller's action
        $.getJSON(url, null, function (data) {
            // do something once the data is retrieved
            $("#sayac_no").empty();
            $.each(data, function (index, optionData) {
                $("#sayac_no").append("<option value='"
                 + optionData.sno
                 + "'>" + optionData.sayac_seri_no
                 + "</option>");
            });
        });
    })
.change(); // making sure the event runs on initialization for default value
}); 
```

html

```
<td>
    @Html.DropDownList("musteri_sno", (SelectList)ViewBag.musteri_id, "--Müşteri Seçiniz--", new { id = "musteri_sno" })
</td>
<td>
    @Html.DropDownList("sayac_no", Enumerable.Empty<SelectListItem>(), "-- Sayaç Seçiniz --", new { id = "sayac_no" })
</td> 
```

行动

```
[HttpGet]
public ActionResult MusteriSayaclariniGetir(int musteri_sno)
{
    var sites = entity.TblSayaclar.Where(x => x.musteri_id == musteri_sno).Select(x => new { sno = x.sno, sayac_seri_no = x.seri_no });
    return Json(sites, JsonRequestBehavior.AllowGet);
} 
```

当我从`MusteriSayaclariniGetir(int musteri_sno)`操作中删除参数 musteri_no 时，我的代码可以正常工作。url有问题`var url = "/SayacOkumalari/MusteriSayaclariniGetir/" + strStateID;`还是其他错误？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:47:55.227

是你路由的问题。使用“id”而不是“musteri_sno”来使用默认映射或在 Global.asax.cs 中为您的控制器添加一个路由映射

# android - 未收到 Android GCM unicode 字符

> ID：11501504
> 
> 赞同：9
> 
> 时间：2012-07-16T09:26:03.707
> 
> 标签：android, unicode, google-cloud-messaging

这是我的服务器端代码或 android 端代码。此代码仅适用于英文消息。如果我使用 Unicode 章程，例如使用阿拉伯语，那么它不会显示任何内容来代替阿拉伯语。由于英语阿拉伯语混合，它跳过了唯一的阿拉伯语包机。

请给我解决方案。谢谢！

这是我的 C# 代码

```
private string SendNotification(string authstring, string id, string msg)
    {
        try
        {
            ServicePointManager.ServerCertificateValidationCallback = (object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) => true;
            WebRequest request = WebRequest.Create("https://android.googleapis.com/gcm/send");
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";

            request.Headers.Add(string.Format("Authorization: key={0}", authstring));
            string collaspeKey = Guid.NewGuid().ToString("n");
            string postData = string.Format("registration_id={0}&data.payload={1}&collapse_key={2}", id, msg, collaspeKey);
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            request.ContentLength = byteArray.Length;
            Stream dataStream = request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();
            WebResponse response = request.GetResponse();
            dataStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(dataStream);
            string responseFromServer = reader.ReadToEnd();
            reader.Close();
            dataStream.Close();
            response.Close();

            return responseFromServer;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

这是我捕获消息的 Android 端代码。

```
@Override
protected void onMessage(Context context, Intent intent) {        
    String message = ArabicUtilities.reshape(intent.getExtras().getString("payload"));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T21:24:50.257

[André Oriani](https://stackoverflow.com/users/1525801/andre-oriani) 有修复的总体思路。即使消息被放置在请求的正文中，它仍然需要进行 url 编码。

```
string postData = string.Format("registration_id={0}&data.payload={1}&collapse_key={2}", id, msg, collaspeKey); 
```

应该替换为

```
string postData = string.Format("registration_id={0}&data.payload={1}&collapse_key={2}", id, HttpUtility.UrlEncode(msg), HttpUtility.UrlEncode(collaspeKey)); 
```

您需要添加对 System.Web 的引用才能使用 HttpUtility。有关详细信息，请参阅[使用 C# 进行 URL 编码](https://stackoverflow.com/questions/575440/url-encoding-using-c-sharp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:47:37.517

您是否考虑过使用 base64 对通过 GCM 发送的字符串进行编码？这样，您将消除所有编码问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T20:22:02.700

这是用Java为我解决的问题：

在服务器端：

```
encodedMessage = URLEncoder.encode(message, "UTF-8"); 
```

在应用程序中：

```
decodedMessage = URLDecoder.decode(message, "UTF-8"); 
```

# tomcat6 - tomcat server.xml 中是否有名为“defaultSessionTimeOut”的属性？

> ID：11501508
> 
> 赞同：0
> 
> 时间：2012-07-16T09:26:23.307
> 
> 标签：tomcat6, web.xml, configure

当我想为我的 tomcat 服务器设置“超时”时，有人告诉我这样做：

```
<Context path="/test" docBase="/test"     
　　defaultSessionTimeOut="3600" isWARExpanded="true"     
　　isWARValidated="false" isInvokerEnabled="true"     
　　isWorkDirPersistent="false"/> 
```

但我在官方文档中找不到“defaultSessionTimeOut”属性：http://tomcat.apache.org/tomcat-6.0-doc/config/context.html。官方文档不完整吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:59:50.557

正确的想法。只是错误的配置文件、错误的属性和错误的时间单位。它应该是这样的：

```
 <session-config>
 <session-timeout>60</session-timeout>
 </session-config> 
```

在 web.xml 文件中。请注意，会话超时以分钟为单位。

# sql - 在不可连接的列上右连接

> ID：11501512
> 
> 赞同：1
> 
> 时间：2012-07-16T09:26:39.487
> 
> 标签：sql, database, oracle

我的问题很简单，假设我在两个表之间加入，其中一个是右加入

```
select e.name, nvl(e.mobileNumber, c.secondaryNumber)
from T_employee e, t_contact c
where e.fieldOfficeCode = 10
and e.id = c.id (+)
and c.status = 1001 
```

现在，如果我删除查询的最后一行，它将正确连接，但是一旦出现最后一行，我将不会得到任何结果。关于如何解决这个问题的任何想法。现在手头的查询相对复杂，跨越 5 个表，但示例片段将简化实际问题

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:33:50.887

这就是你需要的：

```
and c.status (+) = 1001 
```

或者用现代语法：

```
select e.name, nvl(e.mobileNumber, c.secondaryNumber)
from T_employee e
left outer join t_contact c
  on e.id = c.id
  and c.status = 1001
where e.fieldOfficeCode = 10 
```

您的查询通过仅选择 c.status= 1001 的连接记录将外连接重新转换为内连接 - 它排除了所有为空的不匹配行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:30:34.320

试试这个

```
select e.name, nvl(e.mobileNumber, c.secondaryNumber) 
from T_employee e right join  t_contact c 
on and e.id = c.id (+) and c.status = 1001 
where e.fieldOfficeCode = 10 
```

# android - Mali-400 上 FBO 中的 OpenGL ES 2.0 伪影/抖动

> ID：11501514
> 
> 赞同：5
> 
> 时间：2012-07-16T09:26:42.363
> 
> 标签：android, opengl-es, fbo, mali-400

在 gles 2.0 中渲染到帧缓冲区对象时，我在 Mali-400 gpu 上有一些奇怪的伪影。问题是即使我用相同的颜色填充整个屏幕，某些像素的颜色也与其他像素不同。但它在 Tegra2 gpu 上运行良好。Mali 默认情况下是否使用任何纹理压缩？我的 fbo 使用 GL_RGBA 作为内部格式。提前致谢！

----编辑---- 我想我解决了我自己的问题。问题只是在 Mali 上默认启用了 GL_DITHER，而 Tegra 上似乎没有。一个简单的 glDisable(GL_DITHER) 解决了这个问题。

# requirejs - 骨干木偶 + i18n + 车把

> ID：11501516
> 
> 赞同：4
> 
> 时间：2012-07-16T09:26:47.227
> 
> 标签：requirejs, handlebars.js, marionette

有人可以发布将这些库组合在一起的示例吗？包括 i18n 和 marionette 的处理程序。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:23:58.030

点backbone.marionette 模板来编译hendlebars。这可以在你的 main.js 上完成：

```
Backbone.Marionette.TemplateCache.prototype.compileTemplate = function(rawTemplate) {

        return Handlebars.compile(rawTemplate);
    }; 
```

将您的应用配置为使用车把和 i18n：这可以在您的 config.js 上完成：

```
require.config({

  // Initialize the application with the main application file
  deps: ["main"],

  paths: {

    libs: "../assets/js/libs",
    plugins: "../assets/js/plugins",

    // Libraries
    jquery: "../assets/js/libs/jquery",
    underscore: "../assets/js/libs/lodash",
    backbone: "../assets/js/libs/backbone",
    marionette: "../assets/js/libs/backbone.marionette",
    handlebars: "../assets/js/libs/handlebars",

    //plugins
    text : "../assets/js/plugins/text",
    i18n : "../assets/js/plugins/i18n",

  },

  config: {
        //Set the config for the i18n
        //module ID
        i18n: {
            locale: 'fr-fr'
        }
    },

  shim: {

     marionette: {
      deps: ['backbone'],
      exports: 'Backbone.Marionette'
    },

    backbone: {
      deps: ["underscore", "jquery"],
      exports: "Backbone"
    },

    handlebars: {
      deps: [],
      exports: "Handlebars"
    }

  }
}); 
```

在您的任何模块上使用它：

```
 define([

    'jquery',
    'underscore',
    'backbone',
    'marionette',
    'handlebars',
    'text!templates/template.html',
    'i18n!nls/your_i18n_text'
],

function($, _,  Backbone, Marionette, Handlebars, tmpl, msg) {

  'use strict';

  var mod = Backbone.Model.extend({ 

         defaults: function() {           
              return {                    
                  feedUrl   : "this is for test"
              };
         }

   });

  view = Backbone.Marionette.ItemView.extend({

    template: Handlebars.compile(tmpl),

    model: new mod(),

    initialize: function() {

        this.tmpl_data = msg;    
        if(msg && this.model)
            this.tmpl_data = _.extend(this.model.toJSON(),msg);
    },

    render: function() {

        var view = this;

        $(this.el).html(this.template(view.tmpl_data));
        return this;  
    }

   });

}); 
```

这将获取模板 + i18n 文件并渲染

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:56:07.177

我使用[i18n-JS](https://github.com/fnando/i18n-js/ "i18n-js")，它与一切无关，因此您可以将它与任何服务器端框架（对我来说是 Ruby on Rails）和任何 Javascript 模板引擎（对我来说是 Haml Coffee）一起使用。

这是一个例子：

```
%form.form-horizontal
  .modal
    .modal-header
      %button{ class: 'close', data: { dismiss: 'modal' } } ×
      %h3
        = I18n.t(@property.get('name'), scope: 'data_sheets.properties')

    .modal-body
      - unless @property.get('editable')
        %p= I18n.t('data_sheets.you_already_contributed_to_this_property') 
```

因此，Backbone 和 Marionette 方面都没有任何关系。

# python - ImportError：没有名为 mock 的模块

> ID：11501520
> 
> 赞同：92
> 
> 时间：2012-07-16T09:27:02.593
> 
> 标签：python, python-2.7, python-import, importerror

所以我试图在单元测试中使用 unittest.mock 来模拟我的一些方法。我愿意：

```
from unittest.mock import MagicMock
f = open("data/static/mock_ffprobe_response")
subprocess.check_output = MagicMock(return_value=f.read())
f.close() 
```

但我得到：

```
ImportError: No module named mock 
```

我试过：

```
pip install mock 
```

它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-07-16T09:33:07.033

`unittest`是一个内置模块；`mock`是一个外部库（无论如何，3.3 之前的测试版）。`mock`通过安装后`pip install`，您不使用导入它

```
from unittest.mock import MagicMock 
```

但

```
from mock import MagicMock 
```

编辑：`mock`已包含在`unittest`模块中（从 Python3.3 开始），并且可以通过`import unittest.mock`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-09-20T20:10:50.367

对于 Python 2.7：

安装模拟：

```
pip install mock 
```

然后在测试代码中，使用这个导入：

```
from mock import patch, MagicMock 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-06-04T15:58:36.890

如果您想同时支持 Python 2 和 Python 3，您还可以使用以下命令：

```
import sys
if sys.version_info >= (3, 3):
    from unittest.mock import MagicMock
else:
    from mock import MagicMock 
```

或者，如果您不想导入`sys`

```
try:
    from unittest.mock import MagicMock
except ImportError:
    from mock import MagicMock 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-07T21:56:39.540

如果您使用的是**Python 3.3+**，请更改

```
import mock 
```

到

```
from unittest import mock 
```

在旧版本的 Python 上，不要更改代码中的任何内容，而是运行以下 shell 命令：

```
pip install mock 
```

发生此导入错误是因为[`unittest.mock`](https://docs.python.org/library/unittest.mock.html)在 Python 3.3 中添加，并且PyPI 上有[一个用于旧 Python 版本的反向移植。](https://pypi.org/project/mock/)因此，如果您的代码曾经是 Python 2，它可能正在尝试导入反向端口。

* * *

[`pyupgrade`](https://pypi.org/project/pyupgrade/)是一个工具，您可以在代码上运行以重写这些导入并从 Python 2 中删除其他不再有用的剩余部分。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-04-21T20:42:18.470

出于某种原因，`import unittest.mock`对我不起作用，我不得不这样做

```
from unittest import mock 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-15T15:23:56.317

我在运行时遇到了导入问题`pytest`。原来我`pytest`的是 2.7 版本的`python`，而我`virtualenv`的是 3.6 的`python`。`pip install`我通过执行 a from my`virtualenv`然后使用`pytest`from来修复它`env/bin/pytest`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-16T09:33:10.013

对于您的版本，我建议您访问[http://hg.python.org/cpython/file/default/Lib/unittest/mock.py](http://hg.python.org/cpython/file/default/Lib/unittest/mock.py)并使用此资源来发挥您的优势。

# jquery - 这个 JQuery 可以写得更短吗？

> ID：11501521
> 
> 赞同：0
> 
> 时间：2012-07-16T09:27:04.360
> 
> 标签：jquery

我得到了这个代码：

```
$(document).ready(function () {
    $('tr.DataDark input[type=checkbox], tr.DataLight input[type=checkbox]').click(function () {
        $(this).closest('tr').toggleClass('Selected');
    });
    $('tr.DataDark input[type=checkbox]:checked, tr.DataLight input[type=checkbox]:checked').each(function () {
        $(this).closest('tr').addClass('Selected');
    });
}); 
```

可以写短一点吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:51:17.763

也许这个？不完全短，但可能更简单。

```
$(document).ready(function() {
  var checkBoxes = $('tr.DataDark input[type=checkbox], tr.DataLight input[type=checkbox]');

  checkBoxes.on("click", function() {
    $(this).closest('tr').toggleClass('Selected');
  });

  checkBoxes.filter(':checked').closest('tr').addClass('Selected');
}); 
```

为了使其更短，您可以放弃`checkBoxes`变量并将`filter().closest().addClass()`调用直接链接到`on("click")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:32:49.250

如果不向我们显示匹配的 HTML，以便我们可以看到哪些快捷方式是可能的，那么就没有有意义的方法来缩短您提供的代码行数。

有一些方法可以改变它或最小化它以减少字符或将多行折叠成更长的行，但是如果你想保持它的可读性并且仍然执行你拥有的相同逻辑而不是人为地折叠多条逻辑一起组成更长的行，大约需要您拥有的代码行数。

# linux - ioctl vs netlink vs memmap 在内核空间和用户空间之间进行通信

> ID：11501527
> 
> 赞同：9
> 
> 时间：2012-07-16T09:27:11.890
> 
> 标签：linux, linux-device-driver

每当用户要求在 Linux 用户空间中使用命令时，都会显示我们自定义硬件的一些统计信息。此实现目前使用 PROC 接口。我们开始添加更多统计信息，然后我们遇到了一个问题，其中特定的统计命令必须执行两次才能获取整个数据，因为 PROC 接口被限制为 1 页。

如上所述，内核和用户空间之间的数据传输并不重要，但根据数据，用户可能会做出一些决定。我们对这个接口设计的要求是它应该能够传输可能大于 8192 字节的数据量，并且命令需要使用最少的内核资源（如锁等），并且它需要快速。

使用 ioctl 可以解决这个问题，但是由于该命令并不是控制设备而是收集一些统计信息，因此不确定它是否是按照 Linux 使用的好机制。我们目前使用的是 3.4 内核；不确定 Netlink 在这个版本中是否有损（以前的版本我遇到过队列满时，socket 开始丢弃数据等问题）。mmap 是另一种选择。谁能建议我最好的界面是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-13T19:28:28.120

*   Kernel services can send information directly to user applications over Netlink, while you’d have explicitly poll the kernel with ioctl functions, a relatively expensive operation.
*   Netlink comms is very much asynchronous, with each side receiving messages at some point after the other side sends them. ioctls are purely synchronous: “Hey kernel, WAKE UP! I need you to process my request NOW! CHOP CHOP!”</li>
*   Netlink supports multicast communications between the kernel and multiple user-space processes, while ioctls are strictly one-to-one.

*   Netlink messages can be lost for various reasons (e.g. out of memory), while ioctls are generally more reliable due to their immediate-processing nature.

So If you asking for statistics to kernel from user space(application) it is more reliable and easy to use IOCTL while if you generate statistics in kernel space and you want your kernel space to send those data to user space(application) you have to use Netlink sockets.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:12:41.987

您可以执行 ioctl IO 调用（而不是 IOR、IOW 或 IORW）。Ioctl 对于收集信息非常有用。通过这种方式，您将获得很大的灵活性，因为您可以传递不同大小的缓冲区或结构来填充数据。

# php - 如何根据标志字段 0/1 显示“是/否”CGridView yii？

> ID：11501528
> 
> 赞同：5
> 
> 时间：2012-07-16T09:27:18.300
> 
> 标签：php, yii

我在 CGridView yii 中遇到问题，我的退款字段显示 0/1，但我想在 0 时显示“是”，如果 1 显示“否”，而不使用任何第二个表。

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'transaction-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'id',
    'member_id',
     array(
        'header' => 'MemberName',
        'name' => 'member_id',
        'value' => '$data->member->f_name'
    ),

    'refund',
    'band_id',

    array(
        'class'=>'CButtonColumn',
        'template'=>'{view}',
    ),
), 
```

));

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T02:05:44.233

其他两个答案都可以，但最干净的方法是：

```
'columns'=>array(
    'id',
    'member_id',

    ...

    'refund:boolean',
), 
```

如果您像上面那样使用冒号，则会自动使用一堆 CGridView 列数据类型。更多信息在这里：[https ://github.com/samdark/a-guide-to-yii-grids-lists-and-data-providers/blob/master/grid-columns.md](https://github.com/samdark/a-guide-to-yii-grids-lists-and-data-providers/blob/master/grid-columns.md)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:52:48.670

```
 array(
                    'name' => 'refund',
                    'header' => "Refund",
                    'value' => '$data->refund?Yii::t(\'app\',\'Yes\'):Yii::t(\'app\', \'No\')',
                    'filter' => array('0' => Yii::t('app', 'No'), '1' => Yii::t('app', 'Yes')),
                    'htmlOptions' => array('style' => "text-align:center;"),
              ), 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T14:00:34.903

希望这能解决您的问题。

用此代码替换“退款”。

```
 array(
            'header' => 'Refund',
            'name' => 'refund',
            'value' => '($data->refund == 0) ? "Yes" : "No"'
        ), 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:57:25.330

当显示布尔字段时，[`CGridView`](http://www.yiiframework.com/doc/api/1.1/CGridView#columns-detail)使用`name:type:header`创建列时的格式将类型指定为布尔值。例如

```
$this->widget('zii.widgets.grid.CGridView', array(
    ...
    'columns'=>array(
       'id',
       'refund:boolean',
), 
```

如果要更改字段的显示方式，请[`CActiveForm`](http://www.yiiframework.com/doc/api/1.1/CActiveForm)更改渲染方法以使用复选框或下拉列表。我的首选是下拉列表，因为它为您提供了将值设置回 null 的选项。

```
$form->dropDownList($model,'refund', array(null=>"Not checked", 0=>"No", 1=>"Yes")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-08T07:31:03.903

快速修复：替换`'refund',`为：

```
 array(
        'name' => 'refund',
        'type' => 'raw',
        'value' => function($model){
            return $model->refund == 1 ? 'No' : 'Yes';
        }
    ), 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-22T11:47:51.380

在视图名称 ADMIN.PHP

> array('name'=>'status', 'header'=>'status', 'filter'=>array('1'=>'Inacive','2'=>'Active'), 'value'= >'($data->status=="1")?("Inacive"):("Active")' ),

# java - 传递给带有可变参数的第二个泛型方法时，我在泛型方法中丢失了变量的类型

> ID：11501530
> 
> 赞同：4
> 
> 时间：2012-07-16T09:27:19.343
> 
> 标签：java, generics

我想最好从我正在查看的行为开始：

```
public class genericTest {
    public static void main(String[] args) {
        String str = "5318008";

        printClass(str);              // class java.lang.String
        callPrintClass(str);          // class java.lang.String

        printClassVarargs(str);       // class java.lang.String
        callPrintClassVarargs(str);   // class java.lang.Object
    }

    public static <T> void printClass(T str) {
        System.out.println(str.getClass());
    }

    public static <T> void printClassVarargs(T ... str) {
        System.out.println(str.getClass().getComponentType());
    }

    public static <T> void callPrintClass(T str) {
        printClass(str);
    }

    @SuppressWarnings("unchecked")
    public static <T> void callPrintClassVarargs(T str) {
        printClassVarargs(str);
    }
} 
```

看着`printClass()`and `callPrintClass()`，似乎一切正常。`callPrintClass()`接受一个通用参数并传递它。`printClass()`通过其正确的类型识别此变量，而不关心谁在发送参数，然后按预期执行并打印`java.lang.String`.

但是当我们尝试使用可变参数时，这将停止工作。我希望`printClassVarargs()`认识到它的参数是 type `String[]`，就像没有 varargs 的方法识别其参数的类型一样。另请注意，如果我直接调用，则不会发生这种情况`printClassVarargs()`（很高兴在那里输出`String`），但只有当它被调用时`callPrintClassVarargs()`，它才会忘记其参数的类型并假定它得到一个`Object`. 我也意识到我必须在这里抑制编译器警告，这通常在我尝​​试转换泛型时出现，但我不确定那里到底发生了什么。

所以我的问题真的是两个。这种行为背后的原因是什么？这是类型擦除的某种结果，还是 Java 处理数组的方式？其次，有没有办法解决这个问题？

当然，这只是一个简单的例子。我不是试图以这种方式打印类名，而是最初在编写重载方法来连接数组时发现了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:50:38.043

我认为问题归结为无法创建泛型类型的数组。如果`callPrintClassVarargs`修改为显式创建一个新的数组实例并将其传递给，`printClassVarargs`则底层问题变得显式。

```
// doesn't work, gives compiler error (cannot create array of generic type)
public static <T> void callPrintClassVarargs(T str) {
        printClassVarargs(new T[]{str});
}

//This works
public static <T> void callPrintClassVarargs(T str) {
        printClassVarargs(new Object[]{str});
} 
```

[我无法在 Java 中创建泛型数组类型的原因是什么？](https://stackoverflow.com/questions/2927391/whats-the-reason-i-cant-create-generic-array-types-in-java)- 这个问题涉及为什么不能创建泛型类型的数组，也许同样可以解释这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:07:41.590

Varargs 是由编译器转换为给定类型数组的语法糖。这意味着 a`method(Type arg...)`将变为`method(Type[] arg)`。

在 Java 中，您不能创建[不可具体化类型](http://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html)的数组（类型信息因擦除而丢失的类型）。因此，一个通用的可变参数如`printClassVarargs(T ... str)`将转换为`printClassVarargs(Object[] str)`，有效地导致类型信息的擦除。这是您在测试中观察到的。

- - 编辑 - -

要回答您关于 和 之间区别的问题（cfr 评论）`printClassVarargs(str)`，`callPrintClassVarargs(str)`我们可以查看您的测试类的字节码以获取所需的线索：

```
public Test();
  Code:
   0:   aload_0
   1:   invokespecial   #8; //Method java/lang/Object."<init>":()V
   4:   return

public static void main(java.lang.String[]);
  Code:
   0:   ldc #16; //String 5318008
   2:   astore_1
   3:   aload_1
   4:   invokestatic    #18; //Method printClass:(Ljava/lang/Object;)V
   7:   aload_1
   8:   invokestatic    #22; //Method callPrintClass:(Ljava/lang/Object;)V
   11:  iconst_1
   12:  anewarray   #25; //class java/lang/String
   15:  dup
   16:  iconst_0
   17:  aload_1
   18:  aastore
   19:  invokestatic    #27; //Method printClassVarargs:([Ljava/lang/Object;)V
   22:  aload_1
   23:  invokestatic    #31; //Method callPrintClassVarargs:(Ljava/lang/Object;)V
   26:  return

public static void printClass(java.lang.Object);
  Code:
   0:   getstatic   #40; //Field java/lang/System.out:Ljava/io/PrintStream;
   3:   aload_0
   4:   invokevirtual   #46; //Method java/lang/Object.getClass:()Ljava/lang/Class;
   7:   invokevirtual   #50; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V
   10:  return

public static void printClassVarargs(java.lang.Object[]);
  Code:
   0:   getstatic   #40; //Field java/lang/System.out:Ljava/io/PrintStream;
   3:   aload_0
   4:   invokevirtual   #46; //Method java/lang/Object.getClass:()Ljava/lang/Class;
   7:   invokevirtual   #59; //Method java/lang/Class.getComponentType:()Ljava/lang/Class;
   10:  invokevirtual   #50; //Method java/io/PrintStream.println:(Ljava/lang/Object;)V
   13:  return

public static void callPrintClass(java.lang.Object);
  Code:
   0:   aload_0
   1:   invokestatic    #18; //Method printClass:(Ljava/lang/Object;)V
   4:   return

public static void callPrintClassVarargs(java.lang.Object);
  Code:
   0:   iconst_1
   1:   anewarray   #3; //class java/lang/Object
   4:   dup
   5:   iconst_0
   6:   aload_0
   7:   aastore
   8:   invokestatic    #27; //Method printClassVarargs:([Ljava/lang/Object;)V
   11:  return

} 
```

`printClassVarargs()`在 main#12 上观察你的字符串 obj的一个新 String[] 被创建用作参数`callPrintClassVarargs()`

在 main#19`printClassVarargs`被调用，创建的 String[] 作为参数。这导致在`printClassVarargs`运行时知道该对象的类型。这种类型被保留了下来。

在 main#23 `callPrintClassVarargs`上调用，也使用创建的 String[] 作为参数。然后在`callPrintClassVarargs#1`一个新数组上创建。这一次，泛型类型声明中没有可用的类型信息，因此创建了一个新的 Object[]。String[] 存储在这个数组中并`callPrintClassVarargs#8`传递给`printClassVarargs`，它现在必须在一个 Object[] 上工作，它的 componentType 是 object。

正如您所观察到的，当您的参数类型传递给`callPrintClassVarargs(T str)`.

量子点

# vba - 将 Excel 文件保存为不带引号的 .txt 格式

> ID：11501531
> 
> 赞同：16
> 
> 时间：2012-07-16T09:27:24.047
> 
> 标签：vba, excel, text

我有一个 Excel 表格，其中 A 列中有数据。单元格中有许多特殊字符。当我以 .txt 格式保存表格时，我在每行的开头都得到了逗号。我尝试手动和通过宏将文件保存为 .txt 格式。为什么会这样？如何删除它们？我无法**删除****引号。** 附上一张照片![在此处输入图像描述](../Images/92c783e3d602fe3a5d225a9ccba61175.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-26T02:36:02.020

我看到这个问题已经得到解答，但想提供一个替代方案，以防其他人稍后发现。

根据所需的分隔符，可以在**不编写任何代码**的情况下执行此操作。原始问题未提供有关所需输出类型的详细信息，但这是另一种选择：

## PRN 文件类型

最简单的选择是将文件保存为“格式化文本（空格分隔）”类型。VBA 代码行类似于以下内容：

```
ActiveWorkbook.SaveAs FileName:=myFileName, FileFormat:=xlTextPrinter, CreateBackup:=False 
```

在 Excel 2007 中，这会令人讨厌地在文件名末尾添加 .prn 文件扩展名，但可以通过手动重命名将其更改为 .txt。

在 Excel 2010 中，您可以在“另存为”对话框中指定所需的任何文件扩展名。

需要注意的重要一点：文本文件中使用的分隔符数量与 Excel 列的宽度有关。

观察：

![Excel 截图](../Images/16c127a61f5e89e5033dc0d4272e982f.png)

变成：

![文字截图](../Images/f575dc54f0891288e88c5bf52957de5f.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-16T12:31:04.493

这段代码做你想做的事。

**逻辑**

1.  将文件另存为用户临时目录中的制表符分隔文件
2.  1 次读取文本文件
3.  替换`""`为空白并同时写入新文件。

**代码**

```
Private Declare Function GetTempPath Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

'~~> Change this where and how you want to save the file
Const FlName = "C:\Users\Siddharth Rout\Desktop\MyWorkbook.txt"

Sub Sample()
    Dim tmpFile As String
    Dim MyData As String, strData() As String
    Dim entireline As String
    Dim filesize As Integer

    '~~> Create a Temp File
    tmpFile = TempPath & Format(Now, "ddmmyyyyhhmmss") & ".txt"

    ActiveWorkbook.SaveAs Filename:=tmpFile _
    , FileFormat:=xlText, CreateBackup:=False

    '~~> Read the entire file in 1 Go!
    Open tmpFile For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    '~~> Get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Output As #filesize

    For i = LBound(strData) To UBound(strData)
        entireline = Replace(strData(i), """", "")
        '~~> Export Text
        Print #filesize, entireline
    Next i

    Close #filesize

    MsgBox "Done"
End Sub

Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function 
```

**快照**

**实际工作簿**

![在此处输入图像描述](../Images/f8e06fe1c5642e2325eb787dd9d0a5ba.png)

**保存后**

![在此处输入图像描述](../Images/dc3d26b1f0738298e0124236f6a3f3e8.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-19T19:57:12.237

嗯，这个怎么样。

**复制你的单元格。
打开记事本。
粘贴。**

看没有引号，没有引号，并保留特殊字符，**这是 OP 要求的。**它也由回车描述，与 OP 没有提到的坏事（或好事）所附图片相同。

不太清楚为什么一个简单的答案，*提供了预期的结果*，给我一个负面的分数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T22:20:54.253

我刚刚花了一个下午的大部分时间在这上面

有两种常见的写入文件的方式，第一种是直接文件访问“write”语句。这会添加引号。

第二个是“ActiveWorkbook.SaveAs”或“ActiveWorksheet.SaveAs”，它们都具有更改活动工作簿文件名的非常糟糕的副作用。

这里的解决方案是我在网上找到的一些解决方案的混合体。它基本上是这样做的：1）将选定的单元格复制到一个新的工作表中 2）一次遍历每个单元格并将其“打印”到打开的文件中 3）删除临时工作表。

该函数适用于选定的单元格，并接受一个字符串作为文件名或提示输入文件名。

```
Function SaveFile(myFolder As String) As String
tempSheetName = "fileWrite_temp"
SaveFile = "False"

Dim FilePath As String
Dim CellData As String
Dim LastCol As Long
Dim LastRow As Long

Set myRange = Selection
'myRange.Select
Selection.Copy

'Ask user for folder to save text file to.
If myFolder = "prompt" Then
    myFolder = Application.GetSaveAsFilename(fileFilter:="XML Files (*.xml), *.xml, All Files (*), *")
End If
If myFolder = "False" Then
    End
End If

Open myFolder For Output As #2

'This temporarily adds a sheet named "Test."
Sheets.Add.Name = tempSheetName
Sheets(tempSheetName).Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

LastCol = ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Column
LastRow = ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Row

For i = 1 To LastRow
    For j = 1 To LastCol
        CellData = CellData + Trim(ActiveCell(i, j).Value) + "   "
    Next j

    Print #2, CellData; " "
    CellData = ""

Next i

Close #2

'Remove temporary sheet.
Application.ScreenUpdating = False
Application.DisplayAlerts = False
ActiveWindow.SelectedSheets.Delete
Application.DisplayAlerts = True
Application.ScreenUpdating = True
'Indicate save action.
MsgBox "Text File Saved to: " & vbNewLine & myFolder
SaveFile = myFolder 
```

结束功能

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-01T16:20:14.993

这个[问题的答案更简单地提供了这个问题](https://stackoverflow.com/questions/20016895/remove-double-quotation-from-write-statement-in-vba/20017071)[的](https://stackoverflow.com/a/20017071/5691532)答案。

> Write 是一种特殊语句，旨在生成机器可读的文件，这些文件稍后会与 Input 一起使用。
> 
> 使用打印来避免对数据的任何摆弄。

感谢用户 GSerg

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-25T10:36:12.303

我有同样的问题：我必须用一个 Excel 文件为银行付款制作一个特定的 .txt 文件。.txt 文件不能用任何字符分隔，因为标准要求每个必填字段后有一定数量的逗号。最简单的方法是复制excel文件的内容并将其粘贴到记事本中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-11T06:39:24.830

我使用的是 Write #1 "Print my Line" 而不是我尝试 Print #1, "Print my Line" 它给了我所有的数据，没有默认的 Quote(")

```
Dim strFile_Path As String
strFile_Path = ThisWorkbook.Path & "\" & "XXXX" & VBA.Format(VBA.Now, "dd-MMM-yyyy hh-mm") & ".txt"
Open strFile_Path For Output As #1

Dim selectedFeature As String

For counter = 7 To maxNumberOfColumn

        selectedFeature = "X"
        Print #1, selectedFeature
        'Write #1, selectedFeature

Next counter
Close #1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-06T11:19:49.193

PRN 解决方案仅适用于单元格中的简单数据，对我而言，它仅从 200 个字符的单元格中删除前 6 个符号。

这些是 Excel 2007-2016 中的主要文件格式，注意：在 Excel for Mac 中，值为 +1

```
51 = xlOpenXMLWorkbook (without macro's in 2007-2016, xlsx)
52 = xlOpenXMLWorkbookMacroEnabled (with or without macro's in 2007-2016, xlsm)
50 = xlExcel12 (Excel Binary Workbook in 2007-2016 with or without macro's, xlsb)
56 = xlExcel8 (97-2003 format in Excel 2007-2016, xls) 
```

来自[XlFileFormat FileFormat 属性](https://msdn.microsoft.com/en-us/library/aa194915(v=office.10).aspx)

请记住[SaveAs 方法](https://msdn.microsoft.com/en-us/vba/excel-vba/articles/workbook-saveas-method-excel)的其他 FileFormatNumbers ：

```
FileExtStr = ".csv": FileFormatNum = 6
FileExtStr = ".txt": FileFormatNum = -4158
FileExtStr = ".prn": FileFormatNum = 36 
```

# iphone - 将 sqlite 附加到 xcode 邮件

> ID：11501532
> 
> 赞同：4
> 
> 时间：2012-07-16T09:27:25.217
> 
> 标签：iphone, database, xcode, sqlite, email

我对这段代码感到疯狂，它应该可以工作，但是当我收到邮件时没有附加文件，这是我的代码：

```
-(IBAction)mandar:(id)sender
{   
    MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
    [composer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) 
    {
        [composer setToRecipients:[NSArray arrayWithObjects:@"tuperroensalsa@hotmail.com",nil]];
        [composer setSubject:@"Base de datos"];
        [composer setMessageBody:@"Mensage" isHTML:NO];
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
            NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentPath = [searchPaths objectAtIndex:0];
        NSString *path = [[NSString alloc] initWithFormat:@"%@/capturas.sqlite",documentPath];

        NSString *Newpath = [[NSString alloc] initWithFormat:@"%@/newData.sqlite",documentPath];
        [[NSFileManager defaultManager] copyItemAtPath:path toPath:Newpath error:nil];
        NSData *data = [NSData dataWithContentsOfFile:Newpath];
        [composer addAttachmentData:data mimeType:@"application/x-sqlite3" fileName:@"capturas.sqlite"];

        [self presentModalViewController:composer animated:YES];
    }
    else {
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:@"No se a podido mandar el mensage" delegate:self cancelButtonTitle:@"dismis" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

路径没问题，数据库中有数据，我在撰写邮件时也看到了该文件，但没有任何东西到达我的邮件。我想问题就在这里

```
[composer addAttachmentData:data mimeType:@"application/x-sqlite3" fileName:@"capturas.sqlite"]; 
```

但不知道为什么它不起作用，谢谢帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T23:13:44.317

我已经在以下位置更新了答案：[从 xCode 发送数据库](https://stackoverflow.com/questions/11499971/error-sending-database-from-xcode)时出错，但您似乎没有检查它，无论如何这里又是：

```
-(IBAction)mandar:(id)sender {

MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
[composer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) 
{
    [composer setToRecipients:[NSArray arrayWithObjects:@"EMAIL Address here",nil]];
    [composer setSubject:@"Base de datos"];
    [composer setMessageBody:@"Mensage" isHTML:YES];
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 
```

从您的代码中评论了这些：

```
//  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
//  NSString *documentsDirectory = [paths objectAtIndex:0];
//  NSString *file = [documentsDirectory stringByAppendingPathComponent:@"capturas.sqlite"];
//  NSData *data=[NSData dataWithContentsOfFile:file]; 
```

并替换为以下内容

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"database name without extension" ofType:@"sqlite"];
    NSData *myData = [NSData dataWithContentsOfFile:path];

    [composer addAttachmentData:myData mimeType:@"application/x-sqlite3" fileName:path];

    [self presentModalViewController:composer animated:YES];
}
else {
    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:@"No se a podido mandar el mensage" delegate:self cancelButtonTitle:@"dismis" otherButtonTitles:nil, nil];
    [alert show];
} 
```

}

# nhibernate - parent->child 与 parent->group->child 的关系

> ID：11501533
> 
> 赞同：0
> 
> 时间：2012-07-16T09:27:26.647
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有一个遗留数据库（仍然由另一个遗留应用程序使用），其中组被非规范化并复制到子行中

```
table parent
(
  id
)

table child
(
  id
  parent_id
  group_id
  group_name
  group_Flag
  group_type
  name
) 
```

我想将它们映射到

```
class Parent
{
    public long Id { get; private set; }
    public ICollection<Group> Groups { get; private set; }
}
class Group
{
    public long Id { get; set; }
    public string Name { get; set; }
    public GroupType Type { get; set; }
    public bool Flag { get; set; }
    public ICollection<Child> Childs { get; private set; }
}
class Child
{
    public long Id { get; private set; }
    public string Name { get; set; }
} 
```

1.  这可能吗？
2.  如何在 NHibernate 的任何映射方法（xml、MbC、Fluent、...）中做到这一点

更新：一些附加信息

*   由于遗留应用程序，无法更改架构
*   数据库中的其他视图是一个选项
*   在类模型中泄漏是可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:47:46.723

这里有一些开胃菜：

您可以尝试查看 NHibernate 参考的“映射集合”部分： - [http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-collections](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-collections)

然后，您可以尝试使用集合映射的“where”子句来映射类的`Groups`属性：`Parent`

> (9) where（可选）指定在检索或删除集合时要使用的任意 SQL WHERE 条件（如果集合应仅包含可用数据的子集，则很有用）

并以同样的方式映射类的`Childs`属性。`Group`

否则，您可以创建一些视图以不同方式呈现您的数据，并将您的对象映射到这些视图（将 update="false" 和 insert="false" 设置为您的标识符属性映射）

# c - 使用 2 个视频卡进行 CUDA C 编程

> ID：11501537
> 
> 赞同：7
> 
> 时间：2012-07-16T09:27:32.807
> 
> 标签：c, cuda, nvidia

我对 CUDA 编程非常陌生，正在阅读 nvidia 提供的“CUDA C 编程指南”。（[http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)）

在第 25 页中，它具有执行矩阵乘法的以下 C 代码。您能告诉我如何使该代码在两台设备上运行吗？（如果我的计算机中安装了两个支持 nvida CUDA 的卡）。你能举个例子吗？

```
// Matrices are stored in row-major order: 
// M(row, col) = *(M.elements + row * M.stride + col) 
typedef struct { 
    int width; 
    int height; 
    int stride; 
    float* elements; 
} Matrix; 

// Get a matrix element 
__device__ float GetElement(const Matrix A, int row, int col) 
{ 
    return A.elements[row * A.stride + col]; 
} 

// Set a matrix element 
__device__ void SetElement(Matrix A, int row, int col, float value) 
{ 
    A.elements[row * A.stride + col] = value; 
} 

// Get the BLOCK_SIZExBLOCK_SIZE sub-matrix Asub of A that is 
// located col sub-matrices to the right and row sub-matrices down 
// from the upper-left corner of A 
__device__ Matrix GetSubMatrix(Matrix A, int row, int col) 
{ 
    Matrix Asub; 
    Asub.width = BLOCK_SIZE; 
    Asub.height = BLOCK_SIZE; 
    Asub.stride = A.stride; 
    Asub.elements = &A.elements[A.stride * BLOCK_SIZE * row + BLOCK_SIZE * col]; 
    return Asub;
    } 

// Thread block size 
#define BLOCK_SIZE 16 

// Forward declaration of the matrix multiplication kernel 
__global__ void MatMulKernel(const Matrix, const Matrix, Matrix); 

// Matrix multiplication - Host code
// Matrix dimensions are assumed to be multiples of BLOCK_SIZE 
void MatMul(const Matrix A, const Matrix B, Matrix C) 
{ 
    // Load A and B to device memory 
    Matrix d_A; 
    d_A.width = d_A.stride = A.width; d_A.height = A.height; 
    size_t size = A.width * A.height * sizeof(float); 
    cudaMalloc(&d_A.elements, size); 
    cudaMemcpy(d_A.elements, A.elements, size, cudaMemcpyHostToDevice); 
    Matrix d_B; 
    d_B.width = d_B.stride = B.width; d_B.height = B.height; 
    size = B.width * B.height * sizeof(float); 
    cudaMalloc(&d_B.elements, size); 
    cudaMemcpy(d_B.elements, B.elements, size, cudaMemcpyHostToDevice); 

    // Allocate C in device memory 
    Matrix d_C; 
    d_C.width = d_C.stride = C.width; d_C.height = C.height; 
    size = C.width * C.height * sizeof(float); 
    cudaMalloc(&d_C.elements, size); 

    // Invoke kernel 
    dim3 dimBlock(BLOCK_SIZE, BLOCK_SIZE); 
    dim3 dimGrid(B.width / dimBlock.x, A.height / dimBlock.y); 
    MatMulKernel<<<dimGrid, dimBlock>>>(d_A, d_B, d_C); 

    // Read C from device memory 
    cudaMemcpy(C.elements, d_C.elements, size, cudaMemcpyDeviceToHost); 

    // Free device memory 
    cudaFree(d_A.elements); 
    cudaFree(d_B.elements); 
    cudaFree(d_C.elements); 
} 

// Matrix multiplication kernel called by MatMul() 
__global__ void MatMulKernel(Matrix A, Matrix B, Matrix C) 
{ 
    // Block row and column 
    int blockRow = blockIdx.y; 
    int blockCol = blockIdx.x; 

    // Each thread block computes one sub-matrix Csub of C 
    Matrix Csub = GetSubMatrix(C, blockRow, blockCol);

    // Each thread computes one element of Csub 
    // by accumulating results into Cvalue 
    float Cvalue = 0; 

    // Thread row and column within Csub 
    int row = threadIdx.y; 
    int col = threadIdx.x; 

    // Loop over all the sub-matrices of A and B that are 
    // required to compute Csub 
    // Multiply each pair of sub-matrices together 
    // and accumulate the results 
    for (int m = 0; m < (A.width / BLOCK_SIZE); ++m) 
    { 
        // Get sub-matrix Asub of A 
        Matrix Asub = GetSubMatrix(A, blockRow, m); 
        // Get sub-matrix Bsub of B 
        Matrix Bsub = GetSubMatrix(B, m, blockCol); 

        // Shared memory used to store Asub and Bsub respectively 
        __shared__ float As[BLOCK_SIZE][BLOCK_SIZE]; 
        __shared__ float Bs[BLOCK_SIZE][BLOCK_SIZE]; 

        // Load Asub and Bsub from device memory to shared memory 
        // Each thread loads one element of each sub-matrix 
        As[row][col] = GetElement(Asub, row, col); 
        Bs[row][col] = GetElement(Bsub, row, col); 

        // Synchronize to make sure the sub-matrices are loaded 
        // before starting the computation 
        __syncthreads(); 

        // Multiply Asub and Bsub together 
        for (int e = 0; e < BLOCK_SIZE; ++e) 
            Cvalue += As[row][e] * Bs[e][col]; 

        // Synchronize to make sure that the preceding 
        // computation is done before loading two new 
        // sub-matrices of A and B in the next iteration 
        __syncthreads(); 
    } 

    // Write Csub to device memory 
    // Each thread writes one element 
    SetElement(Csub, row, col, Cvalue); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:45:32.957

没有在多个 GPU 上运行 CUDA 内核的“自动”方式。

您将需要设计一种方法将矩阵乘法问题分解为可以并行运行的独立运算（因此每个 GPU 上并行运行一个运算）。举个简单的例子：

`C = A.B`等价于`C = [A].[B1|B2] = [A.B1|A.B2]`where`B1`和`B2`是包含矩阵列的适当大小的矩阵，`B`并`|`表示按列连接。您可以计算`A.B1`和`A.B2`作为单独的矩阵乘法运算，然后在将生成的子矩阵复制回主机内存时执行连接。

一旦有了合适的分解方案，您就可以使用 CUDA 4.x API 中的标准多 GPU 工具来实现它。要全面了解使用 CUDA API 进行多 GPU 编程，我建议观看 Paulius Micikevicius 在 GTC 2012 上的精彩演讲，该演讲在[此处](http://www.gputechconf.com/gtcnew/on-demand-gtc.php?sessionTopic=999&searchByKeyword=&submit=&select=%20&sessionEvent=&sessionYear=2012&sessionFormat=#1451)以流视频和 PDF 格式提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:47:37.153

基础知识在[CUDA C 编程指南第 3.2.6 节中进行了描述。](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)

基本上，您可以通过调用来设置当前主机线程在哪个 GPU 上运行`cudaSetDevice()`。您仍然必须编写自己的代码，将您的例程分解为跨多个 GPU 拆分。

# ios - 将选定日期的列表转换为其下义词

> ID：11501545
> 
> 赞同：1
> 
> 时间：2012-07-16T09:27:48.020
> 
> 标签：ios, ios5

我有几天的清单（从星期一到星期日）。当用户选择星期一到星期五或星期六和星期日时，我希望我的应用程序显示它的下义词（工作日/周末）。

iOS 是否为此提供了一些默认功能（如果我没记错 iOS 警报应用程序也是如此）还是我必须自己编写此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:23:37.587

假设您有一个`NSArray`以数字形式命名的选定日期`selectedDays`，并且 0 和 6 是周末：

```
NSString *name = nil; // Fill this with the default values (concatenate all names of selected days)
bool days[] = {0,0,0,0,0,0,0};
for (NSNumber *day in selectedDays)
{
    int d = [day intValue];
    if (d >= 0 && d <= 6) days[d] = true;
}

if (   days[0] == true
    && days[1] == false
    && days[2] == false
    && days[3] == false
    && days[4] == false
    && days[5] == false
    && days[6] == true)
{
    name = @"Weekend";
}

if (   days[0] == false
    && days[1] == true
    && days[2] == true
    && days[3] == true
    && days[4] == true
    && days[5] == true
    && days[6] == false)
{
    name = @"Weekdays";
} 
```

# sql - 您应该保持 ODBC SQL 连接打开多长时间？

> ID：11501549
> 
> 赞同：2
> 
> 时间：2012-07-16T09:27:58.880
> 
> 标签：sql, oracle, winapi, odbc

长时间运行的应用程序使用 MS C OBDC API 创建和使用与 Oracle DB 的 SQL 连接。该应用程序最初设计为在启动时建立 ODBC 连接，并在应用程序运行时无限期地保持该连接，可能持续数周或数月。

我们看到连接突然中断的非常罕见的情况，我想知道这是因为我们使用错误，还是认为保持这样的连接是可以的。谁能指出我关于这个主题的一些明确信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:38:14.450

我不确定是否有关于此的明确信息，但是对于长期运行的程序，您始终必须为此类事件做好准备，它们只会发生（不仅是数据库连接，还有长时间保持打开的套接字） . 我没有使用 Oracle 的经验，但我使用 Informix 的设置非常相似，这就是（在伪代码中）我们所做的

```
while (programissupposedtorun) {
    opendb();
    do {
       youractivities();
    } while(dbisok);
    closedbandcleanup();
} 
```

只要您能够正确检测到连接已断开并且能够在不丢失数据的情况下恢复处理，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:00:47.613

我不熟悉 ODBC，但最好使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)来处理此类用例。您的应用程序可以在完成某些工作时简单地从池中请求连接，并在完成后立即释放它——池将负责实际（重新）连接到数据库。

对 ODBC 连接池的快速搜索提出了这一点：[驱动程序管理器连接池](http://msdn.microsoft.com/en-us/library/windows/desktop/ms716319%28v=vs.85%29.aspx)

# c# - ItemsPanelTemplate in XAML ignores [ContentProperty] attribute

> ID：11501553
> 
> 赞同：11
> 
> 时间：2012-07-16T09:28:04.180
> 
> 标签：c#, xaml, windows-8, microsoft-metro

I have a custom Panel where I declared a custom property to hold the content (I don't want to use Children for the content):

```
[ContentProperty(Name = "PanelContent")]
public class CustomPanel : Panel
{
    public static readonly DependencyProperty PanelContentProperty =
       DependencyProperty.Register("PanelContent", 
       typeof(Collection<UIElement>), typeof(CustomPanel), 
       new PropertyMetadata(new Collection<UIElement>(), null));

    public Collection<UIElement> PanelContent
    {
        get
        {
            return (Collection<UIElement>)GetValue(PanelContentProperty);
        }
    }
} 
```

This works perfectly when used like this:

```
<CustomPanel>
   <TextBlock>A</TextBlock>
   <TextBlock>B</TextBlock>
</CustomPanel> 
```

But when I want to use the panel as an ItemsPanelTemplate inside ItemsControl, the ContentProperty attribute is ignored and adds everything to the **Children** collection, not the **PanelContent** collection:

```
<ItemsControl ItemTemplate="{StaticResource ReviewTemplate}" ItemsSource="{Binding Reviews}">
   <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>
         <CustomPanel></CustomPanel>
      </ItemsPanelTemplate>
   </ItemsControl.ItemsPanel>
</ItemsControl> 
```

This is not how it should work. According to the [documentation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemspaneltemplate):

*An ItemsPanelTemplate object element should contain exactly one FrameworkElement-derived class that serves as the root element for items. In most cases this is a Panel-derived class. The expanded template serves as the parent for the realized items and there generally is more than one item. Therefore the XAML content property of the intended root element of an ItemsPanelTemplate should support a collection, as Panel.Children does.*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:06:28.013

The Panel's GenerateChildren method, that is responsible for this task looks (as seen in [ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)) like

```
internal virtual void GenerateChildren()
{
    IItemContainerGenerator itemContainerGenerator = this._itemContainerGenerator;
    if (itemContainerGenerator != null)
    {
        using (itemContainerGenerator.StartAt(new GeneratorPosition(-1, 0), GeneratorDirection.Forward))
        {
            UIElement uIElement;
            while ((uIElement = (itemContainerGenerator.GenerateNext() as UIElement)) != null)
            {
                this._uiElementCollection.AddInternal(uIElement);
                itemContainerGenerator.PrepareItemContainer(uIElement);
            }
        }
    }
} 
```

As you can see, it always adds to this._uiElementCollection, which is the field backing the Children property.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T07:15:42.537

I think the ItemsPanelTemplate can only take Panel.Children as the target to layout items. In fact, if you derive your CustomPanel from, say, ContentControl, you will find following exception message in metro style app:

```
Exception: The ItemsControl.ItemsPanelTemplate must have a derivative of Panel as the root element. 
```

The documentation you linked might be a documentation bug which was copied from WPF time, when you still can insert visuals programmatically into visual tree. In Metro app, there's no longer a way to put your own list of UIElements into visual tree without using Panel.Children.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T19:13:23.360

Because ItemsPanelTemplate is used by ItemsControl to create and use the Panel and it's not XAML that does anything. ItemsControl will simply call Panel.Children.Add no matter what ContentProperty is set to.

Panel is supposed to only layout the children and never style them. So all you must do os only override Arrange and Measure methods. All panels only do that.

For styling and any other logic you must use another approach.

# algorithm - 关于具有步骤 C(n+r-1, r-1) 的算法的复杂性

> ID：11501554
> 
> 赞同：0
> 
> 时间：2012-07-16T09:28:12.253
> 
> 标签：algorithm, math, complexity-theory, time-complexity, asymptotic-complexity

如果一个算法需要C(n+r-1, r-1)个步骤来解决一个问题，其中n是输入的个数，r是一个常数，算法的步骤是否考虑指数增长？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:49:20.660

假设*C*是[二项式系数](http://en.wikipedia.org/wiki/Combination)函数：`C(n + r - 1, r - 1) = (n + r - 1)! / ((r - 1)! * n!)`。由于*r*是一个常数，我们可以`(r - 1)!`在使用大 O 表示法时忽略，所以我们得到`O((n + r - 1)! / n!)`. 我想这可能是家庭作业，所以试着自己从这里走得更远。可以简化`(n + r - 1)! / n!`为一个非常简单的表达式，因为它在 a 内`O()`，然后您将很容易看到它是否是指数的。（提示：有多少个因数`(n + r - 1)! / n!`？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:41:37.300

不，复杂性将**`O(n^(r-1))`**是**多项式增长**而不是（并且优于）指数增长。

```
let g(n) = C(n+r-1, r-1) 
         = (n+r-1)! / ((r-1)!n!)  
         = (n+1)(n+2)...(n+r-2)(n+r-1) / (r-1)!
         = n^(r-1) + kn^(r-2) + k'n^(r-3)... k''n + k''' / (r-1)!

it's easy to say that k,k'...k'',k'''and (r-1)! are all constant,
so T(g(n)) = O(n^(r-1)) 
```

# javascript - 只选择了一个值

> ID：11501560
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:28:21.520
> 
> 标签：javascript, jquery, html

我有：

```
<select id="number" name="number">
<option value=""></option>
<option value="1">01</option>
<option value="2" selected="selected">02</option>
<option value="3">03</option>
<option value="4" selected="selected">04</option>
<option value="5">05</option>
</select> 
```

接下来使用 jQuery，例如：

```
$('#number').val(1); 
```

但这增加了下一个值 - 1 现在我有：

```
<select id="number" name="number">
<option value=""></option>
<option value="1" selected="selected">01</option>
<option value="2" selected="selected">02</option>
<option value="3">03</option>
<option value="4" selected="selected">04</option>
<option value="5">05</option>
</select> 
```

我必须使用的东西：

```
$('#number').val(1); 
```

不能选择所有其他值？所以我想 - 如果我设置新的值，那么所有其他值都可以重置。也许使用每个重置，但如何？我知道 - 这应该是 multiselect = false，但这不是我的代码 - 我必须使用这个 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:34:48.047

你在使用多选吗？因为您添加的 HTML 表明您不是。如果您不使用多项选择，那么您的 HTML 与多个`selected="selected"`没有任何意义。

如果您*正在*使用多项选择，则设置`.val()` *应*清除其他选择。（[演示](http://jsbin.com/ogosix/edit#javascript,html,live)）。如果在某些奇怪的浏览器中不是，您可以尝试手动重置选择：

```
$('#number option').prop('selected', false).val(1); 
```

如果清除当前选择*不是*您想要的，那么您应该考虑`selected`手动设置属性，而不是使用`.val()`

```
$('#number option[value=1]').prop('selected', true); 
```

[演示](http://jsbin.com/ilixeq/edit#javascript,html,live)

# excel - 删除一行中的重复项

> ID：11501565
> 
> 赞同：3
> 
> 时间：2012-07-16T09:28:41.530
> 
> 标签：excel, excel-formula

如何在**不**使用 VBA 的情况下为 Excel 删除一行中的重复项？

**我有的：**

第 1 行：`1 | 1 | 2 | 2 | 3 | 3`

**我想要的是：**

第 1 行：`1 | 2 | 3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:14:52.983

如果您不关心空格并且单元格 A1:F1 中有六个数字，则可以在单元格 A2:F2 中执行此操作：

```
=IF(COUNTIF($A$1:A1, A1) > 1, "", A1) 
```

然后把它拖过去。对于您的示例，这将导致 1, ,2, ,3, 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T01:16:07.100

```
首先，使用 [DATA] 选项卡中的 [Text to columns] 将单元格拆分为列
2：转置数据
3：[数据]选项卡中的[删除重复项]
4：转置数据
5：连接细胞

```

# javascript - Javascript - 永久链接转换

> ID：11501572
> 
> 赞同：0
> 
> 时间：2012-07-16T09:29:11.280
> 
> 标签：javascript, replace, permalinks

我使用 JavaScript 将我的字符串转换为 URL 的一个不错的永久链接，但是当我使用双倍或更多空间时，我有一个小问题，将其转换为 - 以及更多，如果我在此字符串的末尾使用它，请将其替换为- 像这样

```
this---is---a-test-right-now---- 
```

如果我得到这个，我想找回的字符串是跟随

```
this-is-a-test-right-now 
```

sombardy 能帮我吗？

我自己的 Javascript 看起来像这样

```
function prototype( str )
{
    var ret = str;
    ret = ret.replace( /ø/g, 'oe' );
    ret = ret.replace( /Ø/g, 'OE' );
    ret = ret.replace( /å/g, 'aa' );
    ret = ret.replace( /Å/g, 'AA' );
    ret = ret.replace( /æ/g, 'ae' );
    ret = ret.replace( /Æ/g, 'AE' );
    ret = ret.replace( /\_/g, '-' );

    ret = ret.replace(/[^a-zA-Z0-9\/-]/ig,'-').replace(/_+/ig,'-').toLowerCase();

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:34:32.463

在链中再添加一个替换将完成工作，通过查找`-`两次以上替换为一个`-`

```
replace(/[-]{2,}/g, '-') 
```

上面的例子会寻找`-`超过两次的出现并用single替换它`-`并做它`globally`来实现它

```
function prototype( str )
{
    var ret = str;
    ret = ret.replace( /ø/g, 'oe' );
    ret = ret.replace( /Ø/g, 'OE' );
    ret = ret.replace( /å/g, 'aa' );
    ret = ret.replace( /Å/g, 'AA' );
    ret = ret.replace( /æ/g, 'ae' );
    ret = ret.replace( /Æ/g, 'AE' );
    ret = ret.replace( /\_/g, '-' );

    ret = ret.replace(/[^a-zA-Z0-9\/-]/ig,'-').replace(/_+/ig,'-').replace(/[-]{2,}/g, '-').toLowerCase();

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:42:27.793

最简单的方法是用一个破折号替换任何连续出现的地方，而不是用破折号代替每个出现的地方。

```
ret = ret.replace(/[^a-z0-9_\/]+/ig,'-').replace(/-+$/,'').toLowerCase(); 
```

第二个正则表达式摆脱了尾随破折号。

另请注意，这`A-Z`是不必要的，因为`i`修饰符使正则表达式不区分大小写。您还可以将前面的行缩短为 eg `ret = ret.replace( /[æÆ]/g, 'ae' )`，因为无论如何您都将字符串转换为小写。

# ajax - Wordpress 菜单 - ajax 加载

> ID：11501581
> 
> 赞同：0
> 
> 时间：2012-07-16T09:29:49.487
> 
> 标签：ajax, wordpress

是否可以通过 Ajax 动态加载 Wordpress 菜单？

最好的解决方案是使用 wp_nav_menu()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-31T06:30:46.207

**如果您的主题需要使用 JavaScript 动态初始化菜单，则初始化代码的模式应该是：**

```
jQuery(function($) {
    function initMainNavigation( container ) {
        /* set up container... */
    }
    initMainNavigation( $( '.main-navigation' ) );

    $( document ).on( 'customize-preview-menu-refreshed', function( e, params ) {
        if ( 'primary' === params.wpNavMenuArgs.theme_location ) {
            initMainNavigation( params.newContainer );
            /* optionally sync a previous menu state from params.oldContainer... */
        }
    });
}); 
```

传递给事件处理程序的参数包含以下属性：

*   **newContainer：**包含从 Ajax 检索到的新菜单容器元素的 jQuery 对象；这就是你要操纵的初始化。

*   **oldContainer：**前一个 jQuery 对象，用于保存被替换的菜单容器的元素；如果旧菜单中的任何状态应保留在新菜单中，例如展开哪些子菜单（如二十五），这将很有用。

*   **wpNavMenuArgs：**模板中传递给的参数数组`wp_nav_menu()`，例如template_location。

*   **instanceNumber：**`wp_nav_menu()`为其更新调用的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:36:58.360

您可以创建一个自定义文件来处理主题中的 ajax 请求，返回`wp_nav_menu();`并调用该文件的 HTML 输出。

wp-content/themes/your-theme/ajax.php：

```
<?php wp_nav_menu(); ?> 
```

这很简单，但很有效。不过要小心安全。确保验证输入并且不要`eval()`输入任何输入！

# oracle - NServiceBus DBMS 连接超时

> ID：11501585
> 
> 赞同：1
> 
> 时间：2012-07-16T09:30:01.777
> 
> 标签：oracle, nservicebus

我将 Nservicebus 与 Oracle Queues OAQ 一起使用，而不是 MSMQ。我在使用每天同时关闭的 dbms 服务器时遇到问题。特别是当我的 nservicebus 主机无法获得它开始登录的 dbms 连接时。当 dbms 重新启动时，我的主机重新启动或不随机！但是重新启动我的主机一切正常！

另一个细节是，当我的 nservicebus 主机无法重新启动时，它每 15 秒记录一次“连接超时消息”！

当 NserviceBus 从队列中读取并且 dbms 崩溃时，它的行为是什么？我能做些什么来解决这个问题？

谢谢你，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:56:48.730

恐怕您面临的问题是系统设计的结果。通过在数据库中拥有队列，当数据库变得不可用时，队列也是如此。NServiceBus 假定它始终能够与其队列通信，就像使用 MSMQ 等分布式/联合队列系统时的情况一样。

您可以查看社区中的一些人在使用 IBM MQ (http://code.google.com/p/nservicebuswmq/) 时为解决同样的问题所做的工作 - 在这些条件下最终退回到 MSMQ，然后重新联机时与 MQ 同步备份。

# c++ - 确定函数声明、定义和调用

> ID：11501588
> 
> 赞同：1
> 
> 时间：2012-07-16T09:30:16.090
> 
> 标签：c++, code-coverage

我遇到了一个关于编写代码以确定 C++ 中未使用的函数的问题。我们可以使用不同的数据结构来确定未使用的函数。但在此之前，我们需要解析代码。我有与解析部分有关的问题，我们如何区分函数声明和定义以及函数调用？

像，

```
 //function declaration without argument
 fun1 ();

 //function definition
 fun1 () {
   // code goes here
  }

 main () {
   fun1 ();
  } 
```

上面的声明和调用看起来相同，而定义部分与声明和调用略有不同。

除了上述场景，调用函数和函数作用域还有多种场景，比如两个具有同名函数的类，一个函数在成员函数中被调用（即不需要显式调用对象）或使用对象调用函数，所以需要了解首先确定对象的类型，以确定实际调用的是哪个函数。

解析如何高效实现？在上述情况下需要多少次解析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:34:51.230

这是您可以区分它们的方法：

```
//function definition
return_type fun1 (args) {
  // code goes here
} 
```

请注意，函数定义在函数名之前有一个“返回类型”。

另外，请注意函数声明看起来与其定义完全相同。`;`在看到或之前，您实际上不需要区分它们`{`。这就是您决定是声明还是定义的关键。在您的特定应用程序中，您并不真正关心它，因为您不关心函数实际执行的操作。

不幸的是，C++ 很复杂。要确定哪些函数是无用的，实际上至少需要进行基本的语义分析。这至少包括类型系统。

更糟糕的是，有些函数不一定是直接调用的，而是通过虚函数调用的。因此，您对代码的静态分析仅显示父函数被调用，而实际上它是子函数。

# json - 如何在 JSON 文件中设置一个 JSON 对象对另一个 JSON 对象的引用

> ID：11501595
> 
> 赞同：9
> 
> 时间：2012-07-16T09:31:01.000
> 
> 标签：json

有没有办法将一个 JSON 对象的引用设置为另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:43:37.717

简短的回答：否

JSON 是一种非常简单的数据表示格式。它不包含对整个对象内的引用的支持。可能你可以稍微破解一下，但这仍然取决于解析它的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:51:57.307

好吧，你可以做这样的事情，但不知道这是否是你正在寻找的：

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript">
Persona = {
        "numberOfLegs" : 2
};

Cesar = {
        "basics" : Persona,
    "name" : "Julio Cayo Cesar"
}

document.write( "<br>" + Cesar.name );
document.write( "<br>" + Cesar.basics.numberOfLegs );
</script>

</body>
</html> 
```

如果您正在寻找继承，那么答案肯定不是。做类似事情的唯一方法是使用`$.extend( dest, org )`jQuery。

希望这可以帮助。

# objective-c - ImageMagick 灰度

> ID：11501598
> 
> 赞同：0
> 
> 时间：2012-07-16T09:31:17.117
> 
> 标签：objective-c, xcode, macos, cocoa, imagemagick

如何在objective-c中使用ImageMagick将图像转换为灰度？我将图像加载到 imageMagick 并将它们用作 OpenGL 纹理。我需要在加载时使图像灰度。我的意思是制作原始图像的灰度子图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:18:43.203

不确定这是否是您所要求的，但您可以在[此处](https://stackoverflow.com/questions/3340564/convert-image-to-bw-problem-cgcontext-iphone-dev)找到一些转换为灰度的逻辑。

[此GoogleGroups Posting](https://groups.google.com/forum/?fromgroups=#!topic/iphonesdkdevelopment/uYewLe7Ai58)中提供了类似的信息。

# html - 垂直对齐 90 度旋转文本

> ID：11501599
> 
> 赞同：1
> 
> 时间：2012-07-16T09:31:17.960
> 
> 标签：html, css, rotation

我想要做的是，垂直对齐给网站上的折叠块：

[http://maliyyemenecment.com/?language=en](http://maliyyemenecment.com/?language=en)

我尝试了所有可能的方法，将单词与底部对齐。我的意思是，底部的边距不变。问题是，不能取得任何好的结果。有什么建议么？

![在此处输入图像描述](../Images/bc7789375f1172d528e67e124e080ca9.png)

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:34:32.797

`.kwicks.horizontal li .block .collapsed`有一个`text-align:right;`替换它`text-align: left;`（因为“底部”实际上是元素的左侧）并设置一个`text-indent`（在开发人员工具中进行此编辑时对我有用）

```
.kwicks.horizontal li .block .collapsed {
  text-align: left;
  text-indent: 17px;
} 
```

# php - php 可选字段代码奇数错误

> ID：11501608
> 
> 赞同：0
> 
> 时间：2012-07-16T09:31:54.260
> 
> 标签：php

我正在处理一个 php 表单，我做了两部分，必填字段和可选字段。以下代码在“电子邮件”字段之外运行良好。我将电子邮件字段设置为可选字段，但不知何故它不能作为可选字段工作，它就像必填字段一样工作。如果有人可以粘贴代码并试一试？

非常感谢您的任何建议。

```
<?php

// Set required fields
$required_fields = array('phone');

$optional_fields = array('name','email');

// set error messages
$error_messages = array(
    'name' => 'Please enter your name, letters only',
    'phone' => 'Please enter a valid phone number',
    'email' => 'Please enter a valid email address',
);

// Set form status
$form_complete = FALSE;

// configure validation array
$validation = array();

// check form submittal
if(!empty($_POST)) {

    // Loop into required fields and make sure they match our needs
    foreach($required_fields as $field) {       
        // the field has been submitted?
    //  if(!array_key_exists($field, $_POST)) array_push($validation, $field);

        // check there is information in the field?
        if($_POST[$field] == '') array_push($validation, $field);

                // validate the phone number supplied
        if($field == 'phone') if(!validate_phone_number($_POST[$field])) array_push($validation, $field);

    }

        //starts here for optional validation   
    foreach($optional_fields as $field){
        if(!array_key_exists($field, $_POST)) array_push($validation, $field);

            // validate the name if supplied
    if($field == 'name') if(!validate_name($_POST[$field])) array_push($validation, $field);

    // validate the email address supplied
    if($field == 'email') if(!validate_email($_POST[$field])) array_push($validation, $field);

    }   // basic validation result
    if(count($validation) == 0) {

        $form_complete = TRUE;
    }
}

//functions for validation different fields
function validate_name($phone = FALSE) {
    return (!preg_match('/[^a-zA-Z ]/', $phone))? TRUE : FALSE;
}

function validate_email($email = FALSE) {
    return (preg_match('/^[^@\s]+@([-a-z0-9]+\.)+[a-z]{2,}$/i', $email))? TRUE : FALSE;
}

function validate_phone_number($phone = FALSE) {
    return (!preg_match('/\D/', $phone))? TRUE : FALSE;
}

?>

<?php if($form_complete === FALSE): ?> 

  <form id="form" name="form"  method="post" action="">

      <label for="name">Name:</label>
      <input class="inter" type="text" name="name" id='name' value="<?php echo isset($_POST['name'])? $_POST['name'] : ''; ?>"/><?php if(in_array('name', $validation)): ?><span class="phperror"><?php echo $error_messages['name']; ?></span><?php endif; ?>
<p></p>

      <label for="phone">Phone:</label>
      <input  type="text" name="phone" id='phone' value="<?php echo isset($_POST['phone'])? $_POST['phone'] : ''; ?>"/><?php if(in_array('phone', $validation)): ?><span class="phperror"><?php echo $error_messages['phone']; ?></span><?php endif; ?>
<p></p>

      <label for="email">Email:</label>
      <input type="text" name="email" id='email' value="<?php echo isset($_POST['email'])? $_POST['email'] : ''; ?>"/><?php if(in_array('email', $validation)): ?><span class="phperror"><?php echo $error_messages['email']; ?></span><?php endif; ?>
<p></p>
   <input type="submit" value="Send"  />
  </form>

<?php else: ?>
<h2>Your message was sent</h2>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:37:19.700

问题出在这一行

```
// validate the email address supplied
if($field == 'email') if(!validate_email($_POST[$field])) array_push($validation, $field); 
```

它不检查空的 $_POST['email']

```
// validate the email address supplied
if($field == 'email' && ! empty($_POST[$field])) if(!validate_email($_POST[$field])) array_push($validation, $field); 
```

现在它只在 $_POST['email'] 不为空时触发验证

# django - 模板中的 URL 输出为空

> ID：11501611
> 
> 赞同：1
> 
> 时间：2012-07-16T09:32:04.777
> 
> 标签：django, django-templates, django-urls

来自 views.py 的 URL 模式声明

```
url(r'^intentions/(\d+)/$', 'intentions.views.show'), 
```

当我直接写地址时，像 intents/1 一样工作正常，但是当我尝试显示 URL 显示对象时，例如：

```
{% for i in intentions %}
   {% url 'intentions.views.show' i.id as iUrl %}
    <li><a href="{{ iUrl }}">{{ i }}</a></li>
{% endfor %} 
```

我以空的href结尾。有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:52:33.707

如果您使用的是 Django 1.3 或 1.4，请确保您正在[加载新的 url 标签](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)。将以下行添加到模板的顶部：

```
{% load url from future %} 
```

如果您使用的是 Django 1.4 或更早版本，并且没有像上面那样加载新的 url 标签，那么您需要从 url 模式中删除单引号：

```
{% url intentions.views.show i.id as iUrl %} 
```

顺便说一句，建议[命名您的 url 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)：

```
url(r'^intentions/(\d+)/$', 'intentions.views.show', name='show_intention'), 
```

然后将您的模板更改为：

```
{% for i in intentions %}
  {% url 'show_intention' i.id as iUrl %}
  <li><a href="{{ iUrl }}">{{ i }}</a></li>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:52:22.973

你可以试试

```
{% for i in intentions %}
    <li><a href="{% url 'intentions.views.show' i.id %}"><{{ i }}</a></li>
{% endfor %} 
```

不要使用 {% url 'intentions.views.show' i.id as iUrl %}，它可能会混淆。另外，您可以尝试修改网址如下

```
 url(r'^intentions/(\d+)/$', 'intentions.views.show', name="intention_view"), 
```

然后，

```
{% for i in intentions %}
     {% url "intention_view" i.id as iUrl %}
     <li><a href="{{ iUrl }}">{{ i }}</a></li>
{% endfor %} 
```

如果还有结束空href，请尝试第一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:01:48.487

'intentions.views.show'
还给你的 URL 一个 name='' 并在你的模板代码中使用它。

# python - 从 Python 关闭 pdf 文件或 exe 应用程序

> ID：11501612
> 
> 赞同：2
> 
> 时间：2012-07-16T09:32:04.653
> 
> 标签：python, pyqt

1.  我的应用程序正在根据用户的请求（按钮）打开一个带有 os.startfile 的 pdf 文件。当用户再次按下按钮时，有什么方法可以关闭此 pdf？如果不这样做，我会收到错误消息：

    WindowsError：[错误 32] 该进程无法访问该文件，因为它正在被另一个进程使用：'default_report.pdf'

    **编辑：**在 Python 中我得到：`QPainter::begin(): Returned false`（WindowsError 来自可执行文件）。我能以某种方式抓住这个错误`try`吗？至少要求用户手动关闭 pdf...

2.  另一个相关的问题。我的应用程序被编译为可执行文件，并从另一个 VB6 应用程序（也在按钮上）调用。有什么方法可以从 Python 中检测到可执行文件已经在运行（exe 文件始终具有相同的位置）并在这种情况下在再次启动之前将其杀死？问题类似，如果我第二次运行可执行文件，我会收到错误，因为它们开始发生冲突（它们使用公共数据库）。从VB6它不工作，我不知道细节......

    **编辑**：解决`psutil`（见我对jheyse答案的评论）

ps 如果重要的话，我使用 Python 3.2、PyQt 4 和 cx_freeze 来制作 exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:15:53.813

1.我不认为这是直接可能的，因为正如[文档](http://docs.python.org/library/os.html#os.startfile)所说，“startfile() 在相​​关应用程序启动后立即返回。没有等待应用程序关闭的选项，也无法检索应用程序的退出状态。”

2.要从 python 中按名称杀死进程，您可以使用[psutil 模块](http://code.google.com/p/psutil/)。像这样的东西（如果打开，下面的代码将杀死 Windows 计算器）：

```
for p in psutil.process_iter():
    if p.name == 'calc.exe':
        p.kill() 
```

# java - 任何允许组合条目的有效 BlockingQueue 实现？

> ID：11501613
> 
> 赞同：2
> 
> 时间：2012-07-16T09:32:06.353
> 
> 标签：java, blockingqueue, merging-data

java.util.concurrent.BlockingQueue 是否有任何有效的（不同步所有内容）实现允许组合条目？

通过组合，我的意思是将传入项目与队列中现有的“相等”条目（如果有的话）合并，否则像往常一样在末尾添加项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:40:39.703

检查这个答案：[并发集队列](https://stackoverflow.com/questions/3120495/concurrent-set-queue)。如果合并的意思是忽略与队列中已经存在的元素相等的元素，则它可能与您的问题重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:42:44.530

`BlockingQueue`运动一种`contains`方法。随意使用它，但不要忘记同步。`contains`是 O(n) fx in `LinkedBlockingDeque`，因此您可以尝试使用更有效的方法 a `HashSet`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:36:46.377

I can't see combining events if timestamp and source are two of its attributes. Unless the same user sent two events within a nanosecond or less of each other, I don't believe they can be considered equal and should not be combined.

# php - 如何使用 Google 日历 API 的功能

> ID：11501618
> 
> 赞同：2
> 
> 时间：2012-07-16T09:32:23.507
> 
> 标签：php, api, google-calendar-api

我正在尝试使用 Google 日历 API，但无法正确调用内置函数。以供参考：

```
$events = $service->events->listEvents('primary');

while(true) {
    foreach ($events->getItems() as $event) {
        echo $event->getSummary();
    }
    $pageToken = $events->getNextPageToken();
    if ($pageToken) {
        $optParams = array('pageToken' => $pageToken);
        $events = $service->events->listEvents('primary', $optParams);
    } else {
        break;
    }
} 
```

此代码返回一个致命错误：

> 调用`getItems()`非对象的成员函数

我不明白如何使用未由 a 实例化的对象`New()`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:23:31.120

您需要将此行添加到您的代码中

```
$client->setUseObjects(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T15:05:36.863

在以下行之前添加它

```
$service = new apiCalendarService($client); 
```

自从

```
$service->events->listEvents('primary'); 
```

返回一个数组，但你需要一个对象

# javascript - 自动完成：如何将额外的参数传递给响应回调

> ID：11501619
> 
> 赞同：1
> 
> 时间：2012-07-16T09:32:32.260
> 
> 标签：javascript, jquery, jquery-ui, requirejs

我正在查看以下示例[scottgonzalez / jquery-ui-extensions](https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.html.js)

我需要自定义`source callback`，它需要两个 argumnets`request`和`response`自动完成。

我的问题如下：如何将额外的参数传递给源回调，以便根据自动完成中定义的变量过滤数据？例子：

currentUser = false -> 我需要从源中排除 currentUser。

这是我的代码 (1) (2)。
请查看评论以更好地理解我的要求。
谢谢。

* * *

(1)

```
// autocomplte.js
define([
   'jquery',
   'matcher'
], function ($, matcher) {
    "use strict";
    var autoComplete = function (element, options) {
        console.log(options);  // {isCurrentUser: true}
        element.autocomplete({
            minLength: 3,
            autoFocus: true,
            source: matcher // this is a callback defined 
                            // in matcher.js
        });
        // other codes;
     }
}); 
```

* * *

(2)

```
// matcher.js
define([
    'jquery',
    'users',
    'jqueryUi'
], function ($, UserCollection) {
    "use strict";

    var userCollection,
        matcher;

    matcher = function (request, response, options) { // how can I pass 
                                                      // an extra parameter 
                                                      // to this callback?
        console.log(options); // undefined it should be {isCurrentUser: true}
        userCollection = new UserCollection();
        var regExp = new RegExp($.ui.autocomplete.escapeRegex(request.term), 'i');
        response(userCollection.filter(function (data) {
            return regExp.test(data.get('first_name'));
        }));
    };

    return matcher;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:40:17.853

您可以将“matcher”的调用包装到函数中：

```
source: function(request, response) { 
   return matcher(request, response, {isCurrentUser : true}); 
} 
```

# php - 使用 smarty 执行 SQL 查询不止一次

> ID：11501621
> 
> 赞同：0
> 
> 时间：2012-07-16T09:32:42.030
> 
> 标签：php, mysql, sql-update, smarty, smarty2

我在以下设置中使用 Smarty：

```
$smarty = new Smarty;
$smarty -> caching =3600;
$smarty -> compile_check =true;
$smarty -> compile_dir = 'theme/compile/';
$smarty -> config_dir = 'theme/libs/';
$smarty -> cache_dir = 'theme/cache/';
$smarty -> plugins_dir = 'theme/libs/plugins/';
$smarty->left_delimiter = '{';
$smarty->right_delimiter = '}';
$smarty -> clear_compiled_tpl(); 
```

我想用这个功能编写一个简单的访客计数器：

```
function counter() {
    $ip = $_SERVER['REMOTE_ADDR'];
    $now = time();
    $y1 = jgmdate("Y ", $now);
    $y1 = (int) $y1;
    $m1 = jgmdate("m", $now);
    $m1 = (int) $m1;
    $d1 = jgmdate("d", $now);
    $d1 = (int) $d1;

    $result3 = mysql_query("SELECT `times`,`id` FROM `stat_ip` where `IP`='$ip' AND   `year`='$y1' AND `month`='$m1' AND `day`='$d1' ;");
    unset($n3);
    $n3 = (int) mysql_num_rows($result3);
    echo $n3;
    if ($n3 == 0) {
        mysql_query("INSERT INTO `stat_ip` (`id` ,`IP` ,`year` ,`month` ,`day`) VALUES (NULL , '$ip', '$y1', '$m1', '$d1') ;");
    } else if ($n3 == 1) {
        $row3 = mysql_fetch_array($result3);
        $s = (int) $row3['times'] + 1;
        mysql_query("UPDATE `stat_ip` SET `times` = '$s' WHERE `id` = '".$row3['id']."' ;");

    } else {
        echo("error");
    }
} 
```

一切正常，但我的查询在这一行中执行了不止一次（可能是所有查询）：

```
mysql_query("UPDATE `stat_ip` SET `times` = '$s' WHERE `id` = '".$row3['id']."' ;") ; 
```

我认为聪明与我的问题有关！

当我写这段代码时：

```
$q=$smarty -> fetch('index.tpl'); 
```

查询执行 1 次，但是当我将代码更改为：

```
$q=$smarty -> fetch('index.tpl');
echo $q; 
```

或者

```
$smarty -> display('index.tpl'); 
```

我的查询执行了不止一次！:(

了解更多信息：

[http://www.smarty.net/forums/viewtopic.php?p=81161](http://www.smarty.net/forums/viewtopic.php?p=81161)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:23:08.653

一个常见的错误是在您的 html 输出中有一个空的 img-tag 或 script-tag - 这会使浏览器重新请求当前页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:30:34.343

你为什么要调用 $smarty->clear_compiled_tpl();？它确实会删除所有已编译的模板并在每次调用页面时导致重新编译。删除此行。

您在哪里以及如何调用函数计数器？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:44:55.143

我的问题解决了：

我正在使用在 java 脚本代码中有这一行的幻灯片放映：

我在 jquery.nivo.slider.js 将 src="#" 更改为 src=""

现在它工作正常但是我真的不知道为什么浏览器工作很有趣！

谢谢你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-17T03:19:26.147

Smarty 只是一个模板引擎，它不会导致数据库出现问题。您的问题可能在模板引擎之外的某个地方。

# webdriver - ChromeDriver 控制台应用程序隐藏

> ID：11501623
> 
> 赞同：22
> 
> 时间：2012-07-16T09:32:44.913
> 
> 标签：webdriver

我创建了一个播放器，它将在 C# 中使用 selenium 和 ChromeDriver 自动执行 chrome。它工作正常。

我面临的问题是，当它为 ChromDriver 创建一个对象时，它将启动 ChromeDriver 应用程序，该应用程序会弹出然后加载 Chrome。这是完美的，因为该应用程序正在为我加载该 chrome。

无论如何，我可以打开隐藏的 ChromeDriver 吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-03-25T12:05:19.430

在最新的 WebDriver 中，不需要修改 WebDriver\DriverService.cs 中的源代码。您只需要实例化 ChromeDriverService 并将 HideCommandPromptWindow 设置为 true，然后通过该服务和 ChromeOptions 实例化 ChromeDriver。我在下面给出 C# 代码示例

```
var chromeDriverService = ChromeDriverService.CreateDefaultService();
chromeDriverService.HideCommandPromptWindow = true;
return new ChromeDriver(chromeDriverService,  new ChromeOptions()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-16T11:14:18.933

不，没有办法在不修改绑定源代码的情况下隐藏 .NET 绑定中 chromedriver.exe 的控制台窗口。这被视为绑定的一项功能，因为它可以很容易地查看您的代码何时没有正确清理 ChromeDriver 的资源，因为控制台窗口保持打开状态。在其他一些语言的情况下，如果您的代码没有通过调用`quit()`WebDriver 对象上的方法正确清理 ChromeDriver 的实例，您最终可能会在您的计算机上运行一个僵尸 chromedriver.exe 进程。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-08T06:21:33.090

是的，您需要修改 WebDriver\DriverService.cs 中的源代码`Start()`；添加：

```
this.driverServiceProcess.StartInfo.CreateNoWindow = true; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-11T16:31:21.707

现在可以使用无头选项。那时可能还没有。 [无头运行 Chrome](https://intoli.com/blog/running-selenium-with-headless-chrome/)

翻译成C#，你可以这样做：

```
ChromeOptions options = new ChromeOptions();
options.AddArgument("headless");
ChromeDriver driver = new ChromeDriver(options); 
```

现在浏览器窗口是不可见的，而程序的其余部分保持不变。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-10-29T09:36:38.713

作为这个问题的更新。是的，您可以在 Selenium 2.40.0 及更高版本中隐藏命令提示符窗口。请注意，不建议隐藏命令提示符窗口，但您可以这样做。由于问题是指 C#，您可以使用以下代码进行操作：

铬驱动程序

```
var driverService = ChromeDriverService.CreateDefaultService();
driverService.HideCommandPromptWindow = true;

var driver = new ChromeDriver(driverService, new ChromeOptions()); 
```

InternetExplorer驱动程序

```
var driverService = InternetExplorerDriverService.CreateDefaultService();
driverService.HideCommandPromptWindow = true;

var driver = new InternetExplorerDriver(driverService, new InternetExplorerOptions()); 
```

PhantomJSDriver

```
var driverService = PhantomJSDriverService.CreateDefaultService();
driverService.HideCommandPromptWindow = true;

var driver = new PhantomJSDriver(driverService); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-16T15:40:47.287

```
drv.Manage().Window.Position = new Point(3000, 3000); 
```

将解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-20T20:40:58.277

我使用 c# 做到了这一点，但就像[JimEvan 的](https://stackoverflow.com/a/11503092/13156642)回复一样，我在“zombies chromedrivers and cmdzombies”方面遇到了一些问题。在做“无头模式”和“隐藏”提示窗口之后。

不要忘记正确关闭您的 chrome 驱动程序[实例](https://stackoverflow.com/questions/15067107/difference-between-webdriver-dispose-close-and-quit)。

为了解决这个问题，谷歌一下如何杀死一些进程，我杀死了这两个进程，然后再次打开另一个 chrome 驱动程序：

```
static void Main(string[] args)
{
    ChromeDriverService _chromeDriverService;
    ChromeOptions _chromeOptions;
    IWebDriver _driver;

    //set ChromeDriverService, to hide prompt widow
    _chromeDriverService = ChromeDriverService.CreateDefaultService("YOUR CHROME DRIVER PATH HERE");
    _chromeDriverService.HideCommandPromptWindow = true;

    //set ChromeOptions, to hide ChromeDriver 
    _chromeOptions = new ChromeOptions();
    _chromeOptions.AddArguments("headless");

    _driver = ChromeDriver(_chromeDriverService, _chromeOptions);

    //do your things...
}

//call this method before run your chrome driver, to close some ghost chromeDriver or prompt window
private static void CloseGhostsChromeDriver()
{
    Process[] cmd = Process.GetProcessesByName("cmd");
    Process[] chromeDriver = Process.GetProcessesByName("chromedriver");

    Process[] workers = chromeDriver.Concat(cmd).ToArray();

    foreach (Process worker in workers)
    {
        worker.Kill();
        worker.WaitForExit();
        worker.Dispose();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-06T18:51:44.043

在 ChromeDriver 的更新版本中，您无需编辑源代码，只需：

```
var driverService = ChromeDriverService.CreateDefaultService();
driverService.HideCommandPromptWindow = true; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-12T01:29:57.720

如果你想隐藏启动 chrome、firefox 等时打开的控制台。你需要一个这样的帮助类：

static class WindowsUtils { [DllImport("user32.dll", CharSet = CharSet.Unicode)] private static extern int GetWindowText(IntPtr hWnd, StringBuilder strText, int maxCount);

```
[DllImport("user32.dll", CharSet = CharSet.Unicode)]
private static extern int GetWindowTextLength(IntPtr hWnd);

[DllImport("user32.dll")]
private static extern bool EnumWindows(EnumWindowsProc enumProc, IntPtr lParam);

[DllImport("user32.dll")]
public static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

// Delegate to filter which windows to include 
public delegate bool EnumWindowsProc(IntPtr hWnd, IntPtr lParam);

/// <summary> Get the text for the window pointed to by hWnd </summary>
public static string GetWindowText(IntPtr hWnd)
{
    int size = GetWindowTextLength(hWnd);
    if (size > 0)
    {
        var builder = new StringBuilder(size + 1);
        GetWindowText(hWnd, builder, builder.Capacity);
        return builder.ToString();
    }

    return String.Empty;
}

/// <summary> Find all windows that match the given filter </summary>
/// <param name="filter"> A delegate that returns true for windows
///    that should be returned and false for windows that should
///    not be returned </param>
public static IEnumerable<IntPtr> FindWindows(EnumWindowsProc filter)
{
    IntPtr found = IntPtr.Zero;
    List<IntPtr> windows = new List<IntPtr>();

    EnumWindows(delegate (IntPtr wnd, IntPtr param)
    {
        if (filter(wnd, param))
        {
            // only add the windows that pass the filter
            windows.Add(wnd);
        }

        // but return true here so that we iterate all windows
        return true;
    }, IntPtr.Zero);

    return windows;
}

/// <summary> Find all windows that contain the given title text </summary>
/// <param name="titleText"> The text that the window title must contain. </param>
public static IEnumerable<IntPtr> FindWindowsWithText(string titleText)
{
    return FindWindows(delegate (IntPtr wnd, IntPtr param)
    {
        return GetWindowText(wnd).Contains(titleText);
    });
} 
```

}

然后你可以像这样创建你的 Selenium 驱动程序（也隐藏 Firefox 窗口）。如果你想使用 Chrome 只需要做一些小的改动......我 prefreer Firefox 因为 Chrome 有时不能使用 headless 选项：

```
 FirefoxOptions options = new FirefoxOptions();            
    options.SetPreference("permissions.default.image", 2); //prevent download images
    options.AddArguments(new string[] { "--headless", "'--disable-gpu'" }); //no window, no gpu
    driver = new FirefoxDriver(options);
    WindowsUtils.ShowWindow(WindowsUtils.FindWindowsWithText("geckodriver.exe").FirstOrDefault(), 0); //0 to hide, 1 to show 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-03T14:44:35.170

该解决方案将为您提供帮助。请注意，不建议隐藏命令提示符窗口。

铬驱动程序

```
var driverService = ChromeDriverService.CreateDefaultService();
driverService.HideCommandPromptWindow = true;
var driver = new ChromeDriver(driverService, new ChromeOptions()); 
```

# android - 如何验证电子邮件接收？

> ID：11501625
> 
> 赞同：1
> 
> 时间：2012-07-16T09:32:48.577
> 
> 标签：android, email

由于我们正在对 android 电子邮件客户端进行一些自动化测试，我正在考虑接收验证。我可以给出的一个计划是屏幕截图比较，但设置测试有点复杂。还有其他方法可以获取邮件接收信息吗？android中新电子邮件的任何API或标志？

# android - 获取蓝牙设备的公司 ID 值

> ID：11501630
> 
> 赞同：0
> 
> 时间：2012-07-16T09:33:16.617
> 
> 标签：android, bluetooth

我如何使用 android.bluetooth.BluetoothAssignedNumbers。我想获取蓝牙设备的公司 ID 值。我找不到任何关于它的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-31T02:14:21.447

从这里[https://stackoverflow.com/a/39896379/1739847](https://stackoverflow.com/a/39896379/1739847)

```
ScanRecord scanRecord = scanResult.getScanRecord();
SparseArray<byte[]> manufacturerData = scanRecord.getManufacturerSpecificData();
for(int i = 0; i < manufacturerData .size(); i++){
    int manufacturerId = manufacturerData.keyAt(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T09:02:28.917

result.getScanRecord().getBytes()

公司标识符是值为 -1 的字节之后的两个字节。

位置因设备而异，因此您只需遍历字节数组。

```
byte[] bytes = result.getScanRecord().getBytes();
String companyID = "";

for(int i = 0; i < bytes.length; i++) {
   if(bytes[i] == -1) {
      companyID = companyID + String.format("%02X", bytes[i+1]) + String.format("%02X", bytes[i+2]);
      break;
   }
} 
```

# java - 自定义视图未显示在活动中

> ID：11501634
> 
> 赞同：0
> 
> 时间：2012-07-16T09:33:38.470
> 
> 标签：java, android

我有一个自定义控件，它应该像 iOS 中的 Segmenttab 控制器一样工作。

它有 3 个文本视图，布局如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/groupofthree"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_1"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/black"
        android:gravity="center"
        android:text="Retiree"
        android:textColor="@color/whitetext"
        android:textSize="15dp"
        android:textStyle="normal" />

    <TextView
        android:id="@+id/tv_2"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/lightGrey"
        android:gravity="center"
        android:padding="3dp"
        android:text="Under18/fulltime"
        android:textColor="@color/whitetext"
        android:textSize="15dp"
        android:textStyle="normal" />

    <TextView
        android:id="@+id/tv_3"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/black"
        android:gravity="center"
        android:text="Others"
        android:textColor="@color/whitetext"
        android:textSize="15dp"
        android:textStyle="normal" />

</LinearLayout> 
```

控件如下所示：

```
 public class SegmentedRadioGroup extends View{

        private Context m_Context;

        public TextView tv1;
        public TextView tv2;
        public TextView tv3;
        int selectedIndex = 0;

        public SegmentedRadioGroup(Context context, AttributeSet attrs) {

            super(context, attrs);
            m_Context = context;

        }

        public SegmentedRadioGroup(Context context, AttributeSet attrs, int defStyle) {

            super(context, attrs, defStyle);
        }

        public SegmentedRadioGroup(Context context) {
            super(context);
            // TODO Auto-generated constructor stub

            m_Context = context;
            LayoutInflater inflater = (LayoutInflater) m_Context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View v = inflater.inflate(R.layout.threeradiobutton, null);

            v.isInEditMode();
            tv1 = (TextView) v.findViewById(R.id.tv_1);
            tv2 = (TextView) v.findViewById(R.id.tv_2);
            tv3 = (TextView) v.findViewById(R.id.tv_3);

            tv1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    selectedIndex = 0;
                    tv1.setBackgroundColor(R.color.darkgrey);
                    tv2.setBackgroundColor(R.color.lightGrey);
                    tv3.setBackgroundColor(R.color.lightGrey);
                }
            });

            tv2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    selectedIndex = 1;
                    tv1.setBackgroundColor(R.color.lightGrey);
                    tv2.setBackgroundColor(R.color.darkgrey);
                    tv3.setBackgroundColor(R.color.lightGrey);

                }
            });

            tv3.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    selectedIndex = 2;

                    tv1.setBackgroundColor(R.color.lightGrey);
                    tv2.setBackgroundColor(R.color.lightGrey);
                    tv3.setBackgroundColor(R.color.darkgrey);
                }
            });
        }

        @Override
        protected void onDraw(Canvas canvas) {
            // TODO Auto-generated method stub
            super.onDraw(canvas);

        }

    } 
```

我将此自定义视图添加到布局的活动如下：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/background"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/widget1216"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/appspecific_menubar" >

            <TextView
                android:id="@+id/widget1222"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:text="@string/transaction_accounts_topbar"
                android:textColor="@color/whitetext"
                android:textSize="18sp"
                android:textStyle="bold" >
            </TextView>

            <ImageButton
                android:id="@+id/home_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:background="@null"
                android:paddingBottom="5dip"
                android:paddingLeft="10dip"
                android:paddingTop="5dip"
                android:src="@drawable/home" >
            </ImageButton>
        </RelativeLayout>
    <LinearLayout 
        android:id="@+id/testLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" />.
     </LinearLayout> 
```

活动看起来像这样。我已使用 addview 将视图添加到布局中。

```
 public class TransactionAccount extends Activity {
        LinearLayout selector;
        SegmentedRadioGroup sg_test;
        LayoutInflater inflater;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.transactionaccount_main);
            selector = (LinearLayout)findViewById(R.id.testLayout);

            sg_test = new SegmentedRadioGroup(this);
            selector.addView(sg_test);

    //      inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //      selector = inflater.inflate(R.id., null);

    //      sg_test = new SegmentedRadioGroup(this);

    //      sg_test.tv1.setText("1");
    //      sg_test.tv2.setText("2");
    //      sg_test.tv3.setText("3");
    //      sg_test.tv1.setBackgroundColor(R.color.blacktext);
    //      sg_test.setVisibility(View.VISIBLE);
    //      
    //      Log.d("TransactionAccount", "onCreate++++++" + sg_test.tv1.getText());
    //      Log.d("TransactionAccount", "onCreate++++++" + sg_test.tv2.getText());
    //      Log.d("TransactionAccount", "onCreate++++++" + sg_test.tv3.getText());
        }
    } 
```

但我在屏幕上看到的是一个空白屏幕.. 而不是应该显示的自定义控件。请告诉我我哪里出错了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:39:00.783

首先，您不能将子类添加`Views`到子类中，`View`因为它没有该`addView`方法。相反，您应该扩展`ViewGroup`或其子类之一（如`LinearLayout`等`RelativeLayout`）。

完成上述操作后，您可以简单地添加视图：

```
View v = inflater.inflate(R.layout.threeradiobutton, this, true); 
```

将膨胀的布局实际添加到自定义`View`.

现在你在屏幕上看不到任何东西，因为没有东西可看，你的自定义`View`是空的。

# java - 无法将字符串从 Json 解析为日期，UnparsableDateException

> ID：11501644
> 
> 赞同：0
> 
> 时间：2012-07-16T09:34:18.857
> 
> 标签：java, android, date, simpledateformat

我已使用此代码解析从 Json 接收的日期格式的字符串。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                                try{
                                    Date myDateConference = sdf.parse(jsonO.getString("myDateConference")); 
                                }
                                catch(ParseException e){
                                    e.printStackTrace();
                                } 
```

日期的字符串是这种形式的东西`2012-08-02T00:00:00`

但我得到了这个例外

```
java.text.ParseException: Unparseable date: "2012-08-02T00:00:00" 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:37:39.440

采用

`SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");`

代替

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:36:30.760

您的源字符串中有一个 T ：

```
"2012-08-02<b>T</b>00:00:00" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:37:19.243

将格式更改为

```
yyyy-MM-dd'T'HH:mm:ss 
```

# mysql - 如何在 MySQL 中定义延迟约束

> ID：11501648
> 
> 赞同：2
> 
> 时间：2012-07-16T09:34:32.107
> 
> 标签：mysql, database, oracle, phpmyadmin, mysql-workbench

是否可以在具有重复值的列的现有表中创建主键？我想要的是以前的记录不验证，但新记录会用这个验证。在 mysql 中是否可能。我知道在 Oracle 中是可能的（[这里是一个例子](http://www.oracle-base.com/articles/8i/constraint-checking-updates.php)），但不知道 mysql。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:10:28.883

您作为对 Nerd-Herd 答案的评论发布的[链接使用了](http://www.oracle-base.com/articles/8i/constraint-checking-updates.php)*延迟*约束。这些约束在事务结束时检查，而不是在语句执行时检查。

**MySQL 不支持延迟约束**

如果您绝对需要延迟约束并想坚持使用开源数据库，则需要迁移到 PostgreSQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:38:12.477

不，不可能。它违反了主键的含义。但是如果你想要一个复合主键，它可能是可能的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:39:42.227

主键始终是唯一标识符，如果将其设为非唯一标识符，则它不再是标识符，为什么要重复它？如果您有多个条目具有重复的字段，则该字段不是您的主键，但是，您可以将其与另一个将为您提供主键的字段结合使用（不是很推荐，但您可以将此字段加上时间戳字段您的组合主键）。

在这种情况下，我建议创建一个自动增量键，并只使用这个作为普通字段重复的字段，也许可以为其添加一个索引来改进搜索。您仍然可以在任何字段上查找记录，只是因为它不是您的主键，但这并不意味着您将无法搜索和获取它。主键的想法是它将为您提供 1 条且仅 1 条记录，而不是 1 条或更多条记录。

# iphone - 我如何使视图控制器成为另一个视图控制器的代表？

> ID：11501650
> 
> 赞同：2
> 
> 时间：2012-07-16T09:34:33.093
> 
> 标签：iphone, ios, ipad

我`UIViewController`在我的 iPhone 应用程序中有一个。对于一些动画，我在其中制作了一个类似于 rootview 的视图，并在其中添加了所有元素。当单击一个按钮时，我删除了该 rootview 并添加了另一个视图控制器视图。问题是我只是加载了视图。我想在新的视图控制器中执行一个功能。为此，我需要将第一个视图控制器设置为第二个视图控制器的委托？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:51:27.077

在 secondVC 中，定义如下内容：

```
@protocol secondVCDelegate

@interface secondVC : UIViewController
    @property (nonatomic, assign) id<secondVCDelegate> delegate;
@end

@optional
-(void)someDelegateMethod:(secondVC*)viewController;

@end 
```

在创建 secondVC 的实例时，您必须将 secondVC 的委托属性分配给 self！像这样的东西：

```
// in firstVC
secondVC vc = [[secondVC alloc]...];
vc.delegate = self;
[navcontroller pushVC:vc]; 
```

这条线`vc.delegate = self;`可以解决问题。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:44:25.693

从您的输入中不确定您想从哪个控制器调用哪个控制器的方法？

两种情况：

A. 在你想调用第二个视图控制器的方法的第一个视图控制器中，使用这个：

```
[instantOfSecondViewController methodInSecondVC]; 
```

B. 在第二个视图控制器中，你想调用第一个视图控制器的方法。在这种情况下，您需要使用委托模式。

[我已经在这个SO](https://stackoverflow.com/questions/9629417/calling-a-method-from-another-class-in-objective-c/10898471#10898471)中发布了两者的示例。

# php - 从mysql数据库填充下拉列表并且不要重复值

> ID：11501652
> 
> 赞同：2
> 
> 时间：2012-07-16T09:34:44.083
> 
> 标签：php, mysql, select, drop-down-menu, option

我正在从 mysql 数据库中填充一个下拉菜单。它运作良好，但我希望它不要重复值。（即，如果某个值在数据库中出现 N 次，则它在下拉列表中仅出现一次）

这是我的代码：

```
<?php

mysql_connect('host', 'user', 'pass');
mysql_select_db ("database");

$sql = "SELECT year FROM data";
$result = mysql_query($sql);

echo "<select name='year'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['year'] . "'>" . $row['year'] . "</option>";
}
echo "</select>";

?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T09:37:07.517

在查询中使用[DISTINCT 。](http://www.w3schools.com/sql/sql_distinct.asp)

```
"SELECT DISTINCT year FROM data"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:37:59.510

只需更改您的查询。更好

$sql = "从数据中选择不同的年份";

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:39:30.027

另一种技术：

```
select year from table group by year 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T09:40:12.220

在 PHP 方面你必须这样做

```
$all_data = array();

echo "<select name='year'>";
while ($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
 array_push($all_data,$row["column"]);
}
$all_data = array_unique($all_data);
foreach($all_data as $columns => $values){
 print("<option value='$value'>$value</option>");
}
echo "</select>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-06T22:08:02.727

这是一个简单的技巧。取一个布尔数组。哪个值没有进入列表打印它在列表中，哪个值已经进入列表一次，通过索引布尔数组将其设置为*真。*

设置条件，如果*boolean_array[ value ]*不为*true* ，则在列表中显示*值。*否则，不要。

```
mysql_connect('host', 'user', 'pass');
mysql_select_db ("database");

$sql = "SELECT year FROM data";
$result = mysql_query($sql);

echo "<select name='year'>";
while ($row = mysql_fetch_array($result)) {

    if($bul[$row['year']] != true){
        echo "<option value='" . $row['year'] . "'>" . $row['year'] . "        </option>";
        $bul[$row['year']] = true;
   }
}
echo "</select>";
?> 
```

# java - Spring AOP logger，切入点定义

> ID：11501654
> 
> 赞同：0
> 
> 时间：2012-07-16T09:34:47.110
> 
> 标签：java, spring, aop, aspectj, spring-aop

我正在尝试使用 Spring AOP 在我的项目中引入一个记录器，但我对 AOP 和 AspectJ 语法不熟悉，所以我遇到了一些麻烦......

我在一些教程/文档之后定义了一个基本的方面类：

```
@Aspect
public class Logger {

    @Pointcut("execution(* exportdatamanager.export.ExportType.fetch(..))")
    public void fetch() {
    }

    // ...

    @AfterReturning("fetch()")
    public void fetchingResult(JoinPoint joinPoint, Object result) {
        System.out.println("TEST LOG " + result.toString());
    }
} 
```

但是当我运行我的应用程序时，我得到了这个异常：

```
java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut 
```

我做错了什么，我想我的 ApsectJ 表达式有问题......

您能否建议我**快速参考一下**Spring AOP 支持的 AspectJ 语法？

**笔记**

`ExportType`我的界面中的一个片段

```
public interface ExportType {

    List<Object> fetch() throws FetchingStrategyException;

    // ...

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:56:34.283

好的，我只是这样解决了我的问题：

```
@AfterReturning(pointcut = "fetch()", returning = "results")
public void fetchingResult(JoinPoint joinPoint, List<Object> results) {
    System.out.println("TEST LOG " + results.toString());
} 
```

# android - 谷歌播放不按清单配置过滤

> ID：11501655
> 
> 赞同：0
> 
> 时间：2012-07-16T09:34:47.593
> 
> 标签：android, android-screen-support

我的应用程序在 goole play 和清单配置就像

```
 <uses-sdk android:minSdkVersion="4" />
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

但是上传后显示

```
API level: 4-16+
Supported screens: small-xlarge
OpenGL textures: all 
```

它是如何工作的??..为什么 small-xlarge??..我的 xlarge 已经是假的了。

我能错过什么吗？？？

帮我！！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:41:18.103

请查看产品详细信息选项卡。有一个现场支持设备，您可以在那里找到确切的描述。

请检查此[链接](http://www.jdamcd.com/?p=877)。

# c# - 学习“实用”OOP 的好资源？

> ID：11501657
> 
> 赞同：7
> 
> 时间：2012-07-16T09:34:47.727
> 
> 标签：c#, oop, object

这听起来像是一个愚蠢的问题，因为如果你用谷歌搜索`"OOPS"`或者`"OOPS in C#"`你会得到大量的结果。但。
我知道`OOP`like的概念`abstraction`，`inheritance`还有什么不知道......但我想看到的是它在编程中的一些“***实际可用的例子***”。就像`polymorphism` 你知道一个实际的例子`Object.GetType`等等。

有时如果不是很多，我发现自己在做一些事情，比如点击按钮打开连接并做一些事情，这不是`OOP`我所知道的，我应该有一个特定的实体/类，它应该有一个方法我在单击按钮时正在做的事情，然后我应该调用该方法，而不是在单击按钮时做所有事情。

另一个例子是，我刚刚发现自己在事件中加载了员工从事的所有项目，`the txtEmployeeName.Leave`然后填充了项目的组合。这也不是面向 OOP 的，我应该有 class`Employee`和一个加载该员工从事的所有项目的方法，然后我应该在`txtEmployeeName.Leave`.

当我在某个地方（在线或其他）找到或阅读时，我会看到类似的东西，`Vehicle`是一个抽象类，并且`Car`是一个`Vehicle`，所以它继承自`Vehicle`，这是`Inheritance`。我们都明白这一点，但这不是一件实际的事情。我发现的另一个例子，如果我们有一个方法`MakeSound`，我们称它为一个对象`Cat`，它会`Purr`，但如果我们在 上调用相同的方法`Dog`，它会`Bark`，这是`Polymorphism`。

它有助于理解，但它不是“*实用*的”，或者您应该说“*真实的编程示例*”。**所以我需要知道的是，是否有任何好的资源（在线、书籍或其他）可以让我阅读有关 OOP 的信息，但不像我在上一段中给出的例子，而是一些“真实世界的编程示例”实际上会让我让我的代码更面向对象？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:37:47.327

这里有一些

[OOP 最佳实践：Employee.GetCars() 与 Cars.GetByEmployee()](https://stackoverflow.com/questions/3470516/oop-best-practice-employee-getcars-vs-cars-getbyemployee)

面向对象语言（C#）的最佳实践和适当的类设计 [http://www.codeproject.com/Questions/232598/Best-practice-and-proper-class-design-in-object-or](http://www.codeproject.com/Questions/232598/Best-practice-and-proper-class-design-in-object-or)

开始 C# 面向对象编程 [http://www.apress.com/9781430235309/](http://www.apress.com/9781430235309/)

开发类库的设计指南 [http://msdn.microsoft.com/en-us/library/ms229042.aspx](http://msdn.microsoft.com/en-us/library/ms229042.aspx)

设计模式教程 [http://www.dofactory.com/Patterns/Patterns.aspx/](http://www.dofactory.com/Patterns/Patterns.aspx/)

# unit-testing - HsqlDB 上的触发语法：预期；

> ID：11501667
> 
> 赞同：6
> 
> 时间：2012-07-16T09:35:29.360
> 
> 标签：unit-testing, syntax, triggers, hsqldb

我使用 hsqldb 进行单元测试。我的生产使用 Oracle 11G Db。当我如上所述运行我的启动脚本时：

```
<jdbc:embedded-database id="dataSource" type="HSQL">
</jdbc:embedded-database>

<jdbc:initialize-database data-source="dataSource" ignore-failures="DROPS">
  <jdbc:script location="classpath:/sql/init-cct-schema.sql" separator=";" />
  <jdbc:script location="classpath:/sql/init-cct-insert.sql" separator=";" />
</jdbc:initialize-database> 
```

我真的是[HSQL 文档](http://hsqldb.org/doc/guide/triggers-chapt.html)中的触发器示例。

我看到[了这篇文章](https://stackoverflow.com/questions/9157027/hsql-create-procedure-syntax-doesnt-seem-to-match-the-documentation)：但是他的解决方案对我不起作用，或者我不明白。

我一直有这个错误：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at 
...
    ... 38 more
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement at line 9 of resource class path resource [sql/init-cct-schema.sql]:  CREATE TRIGGER TI_TYPE_MVT BEFORE INSERT ON TYPE_MVT     REFERENCING NEW AS newrow FOR EACH ROW     BEGIN ATOMIC       IF newrow.TYPE_MVT_PK is null THEN         SET newrow.TYPE_MVT_PK = SQ_TYPE_MVT.nextval
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:199)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:132)
    at org.springframework.jdbc.datasource.init.CompositeDatabasePopulator.populate(CompositeDatabasePopulator.java:55)
    at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:45)
    ... 41 more
Caused by: java.sql.SQLSyntaxErrorException: unexpected end of statement:  required: ;
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.execute(Unknown Source)
    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.executeSqlScript(ResourceDatabasePopulator.java:184)
    ... 44 more
Caused by: org.hsqldb.HsqlException: unexpected end of statement:  required: ;
    at org.hsqldb.error.Error.parseError(Unknown Source) 
```

这是我的触发器：

```
SET DATABASE SQL SYNTAX ORA TRUE;    
CREATE TRIGGER TI_TYPE_MVT BEFORE INSERT ON TYPE_MVT
        REFERENCING NEW AS newrow FOR EACH ROW
        BEGIN ATOMIC
          IF newrow.TYPE_MVT_PK is null THEN
            SET newrow.TYPE_MVT_PK = SQ_TYPE_MVT.nextval;
          END IF;
        END; 
```

我尝试不使用最后的 ';' ，它继续失败。

这是我对 HSQL 的依赖：

```
<dependency>
  <groupId>org.hsqldb</groupId>
  <artifactId>hsqldb</artifactId>
  <version>2.2.8</version>
</dependency> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T10:07:58.437

链接[HSQL Create Procedure Syntax 中的解决方案似乎与文档不匹配，](https://stackoverflow.com/questions/9157027/hsql-create-procedure-syntax-doesnt-seem-to-match-the-documentation)在这行配置中：

```
<jdbc:script location="file:Artifacts/Hsql Version Scripts/install/install.sql" separator="/;"/> 
```

默认情况下，Spring 脚本使用的分隔符是分号。这意味着当到达触发器定义中的第一个分号时，不完整的定义将被发送到 HSQLDB（这会导致错误）。当您使用上述配置行时，它将默认分隔符更改为两个字符“/;”。使用特殊配置，您需要修改脚本以在每个创建触发器定义的末尾添加此分隔符。将分号保留在触发器定义主体内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T16:01:48.097

1.  用 / 终止脚本 (some_script.sql) 中的每个 SQL 语句（插入、创建、选择等）；
2.  在 Spring 中进行配置时 - 添加以下内容：

    return new EmbeddedDatabaseBuilder() .setType("HSQL") .setName("DBNAME") .addScript("some_script.sql") .setSeparator("/;") .build();

# c# - 二进制序列化不起作用，无效标头

> ID：11501668
> 
> 赞同：1
> 
> 时间：2012-07-16T09:35:30.043
> 
> 标签：c#, serialization, binaryformatter

我得到了以下内容，而不是复杂的代码，无论如何我在反序列化时遇到异常。例外情况是：二进制流“0”不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。

但我不明白我的代码有什么问题

```
using System.Runtime.Serialization.Formatters.Binary;
using System.Runtime.Serialization;
using System.IO;

namespace Server
{
    [Serializable]
    class testclass
    {
        int a;
        int b;
        int c;
        public testclass()
        {
            a = 1;
            b = 2;
            c = 3000;
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            testclass test = new testclass();
            IFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream(new byte[512],0,512,true,true);
            bf.Serialize(ms,test);
            testclass detest=(testclass)bf.Deserialize(ms);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:39:41.570

当您这样做时，您的流位于数据的末尾

```
bf.Serialize(ms,test); 
```

在尝试之前倒带它开始

```
testclass detest=(testclass)bf.Deserialize(ms); 
```

在流上使用`Position=0`来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:46:13.110

您必须先倒退到流的开头，然后才能反序列化或读取流示例：ms.Seek(0, SeekOrigin.Begin);

```
static void Main(string[] args)
    {
        testclass test = new testclass();
        IFormatter bf = new BinaryFormatter();
        MemoryStream ms = new MemoryStream(new byte[512],0,512,true,true);
        bf.Serialize(ms,test);
        ms.Seek(0,SeekOrigin.Begin); //rewinded the stream to the begining.
        testclass detest=(testclass)bf.Deserialize(ms);
        Console.ReadLine();
    } 
```

# google-drive-api - 问题网店

> ID：11501670
> 
> 赞同：1
> 
> 时间：2012-07-16T09:35:35.737
> 
> 标签：google-drive-api, chrome-web-store

我需要一些关于 **Chrome Webstore 注册**问题的信息。

尽管通过网络搜索，我仍然感到困惑：“应用程序”仅对该站点是私有的（我们正在尝试为我们的网站开发一个 Elgg 插件，允许用户访问他们的驱动器）。

1）为了测试，我是否需要注册它（我进行了搜索，但有些人在 Google Drive SDK 文档中说是，有些人在 google-drive-sdk 标签中说不）？

2) 当插件完成、测试并准备好为我们的用户上线时，我还需要注册它并支付 5 美元吗？

感谢您为我们提供的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:11:54.487

如果您不想与 Google Drive Web UI 集成，则无需在 Chrome Web Store 上注册您的应用：可以选择直接从 Google Drive 创建新文件或使用您的应用打开文件。此外，在开发过程中不创建 Chrome 网上应用店列表可能更容易。

如果您确实需要与 Google Drive Web UI 集成，但不希望您的应用公开，您可以仅将您的应用发布给受信任的测试人员。

# textarea - How to tell SPARK scroll bar in TextArea to recalculate?

> ID：11501677
> 
> 赞同：1
> 
> 时间：2012-07-16T09:36:01.253
> 
> 标签：textarea, scrollbar, refresh, flex-spark

I have problem with vertical scroll in SPARK text area. I've added simple code in creation complete to insert 200 lines in text area:

```
private function creationCompleteHandler(event:FlexEvent):void
{
  for (var iind:uint = 1; iind < 200; iind++)
  {
    testTextArea.text += iind.toString() + "\n";
  }
} 
```

And when I start application I noticed that the last 10% (approximately) of scroll bar is "a free walk". When scroll is on 90% page is scrolled all the way down, and when I move thumb of the scroll bar in last 10% of scroll bar nothing moves.

This is all until I change text in text area in browser, then scroll bar acts normal.

Thanks

edit: I tried to dispatch event "change", but it's still not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:20:53.457

在 creationComplete 块中尝试下面，虽然它没有多大意义：

```
testTextArea.scroller.verticalScrollBar.value =    testTextArea.scroller.verticalScrollBar.maximum;
testTextArea.validateNow();
testTextArea.scroller.verticalScrollBar.value = 0; 
```

然后当你听的时候：

```
testTextArea.scroller.verticalScrollBar.addEventListener(Event.CHANGE, on Change); 
```

你可以做任何你想做的事：

```
if(testTextArea.scroller.verticalScrollBar.value >= (testTextArea.scroller.verticalScrollBar.maximum-5)) 
```

这当然看起来很hacky！

# c# - 小数点错误

> ID：11501679
> 
> 赞同：1
> 
> 时间：2012-07-16T09:36:08.873
> 
> 标签：c#, asp.net

我的网络服务代码

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class Service : System.Web.Services.WebService
{
    SqlConnection con = new SqlConnection(
        "Server=NOVA-PC;database=totev006;User ID=***;Password =***;");

    public Service () { }

    [WebMethod(Description = "Update return in Bet")]
    public string setReturn(int EventID)
    {
        string sql = "";
        decimal dcm = (decimal)100.5 + (decimal)45.055;
        int BetTypeWinID = 1;
        int BettorID = 1;
        int ins = 0;

        con.Open();
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;

        sql = "update bet";
        sql += " set [return] = " + dcm;
        sql += " where event_id = " + EventID;
        sql += " and bet_type_id = " + BetTypeWinID;
        sql += " and bettor_id = " + BettorID;

        cmd.CommandText = sql;
        ins += cmd.ExecuteNonQuery();
        con.Close();
        if (ins > 0)
            return "Ok";
        else
            return "not Ok";
    }
} 
```

我得到异常，这是调用堆栈：

```
System.Data.SqlClient.SqlException: Incorrect syntax near &#39;555&#39;.
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at Service.setReturn(Int32 EventID) in e:\Learning\Webservice\demo\webservice\App_Code\Service.cs:line 49 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:40:07.323

您的系统可能正在使用将 123.45 格式化为 123,45 的语言环境。

使用[参数化查询](http://msdn.microsoft.com/en-us/library/bb738521.aspx)（请参阅[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)）或[指定](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx)格式。

无论您做什么，都[**不要**“仅仅”更改语言环境设置](http://blogs.msdn.com/b/oldnewthing/archive/2008/12/11/9193695.aspx)来“修复”这个问题。

# c# - Linq 查询优化以获得更快的结果

> ID：11501682
> 
> 赞同：0
> 
> 时间：2012-07-16T09:36:21.063
> 
> 标签：c#, linq

我有一个带有按钮和datagridview 的winform。

场景是：

我有一个winform：

```
 using System;
        using System.Collections.Generic;
        using System.ComponentModel;
        using System.Data;
        using System.Drawing;
        using System.Linq;
        using System.Text;
        using System.Windows.Forms;

        namespace WindowsFormsApplication1
        {
            public partial class Form1 : Form
            {
                public Form1()
                {
                    InitializeComponent();
                    CreateItems();
                }

                private List<Store> stores = new List<Store>();

                public void CreateItems()
                {

                    Store newStore1 = new Store();
                    newStore1.StoreName = "My Store 1";
                    newStore1.City = "My City 1";
                    newStore1.PlannedSales = 10;
                    newStore1.RealizedSales = 5;
                    newStore1.SalesDate = new DateTime(2012, 01, 12, 12, 30, 54, DateTimeKind.Unspecified);

                    Store newStore2 = new Store();
                    newStore2.StoreName = "My Store 2";
                    newStore2.City = "My City 2";
                    newStore2.PlannedSales = 200000;
                    newStore2.RealizedSales = 250000;
                    newStore2.SalesDate = new DateTime(2012, 04, 12, 12, 30, 54, DateTimeKind.Unspecified);

                    Store newStore3 = new Store();
                    newStore3.StoreName = "My Store 3";
                    newStore3.City = "My City 3";
                    newStore3.PlannedSales = 100000;
                    newStore3.RealizedSales = 10000;
                    newStore3.SalesDate = new DateTime(2012, 05, 12, 12, 30, 54, DateTimeKind.Unspecified);

                    Store newStore4 = new Store();
                    newStore4.StoreName = "My Store 1";
                    newStore4.City = "My City 1";
                    newStore4.PlannedSales = 20;
                    newStore4.RealizedSales = 10;
                    newStore4.SalesDate = new DateTime(2012, 02, 12, 12, 30, 54, DateTimeKind.Unspecified);

                    Store newStore5 = new Store();
                    newStore5.StoreName = "My Store 1";
                    newStore5.City = "My City 1";
                    newStore5.PlannedSales = 30;
                    newStore5.RealizedSales = 20;
                    newStore5.SalesDate = new DateTime(2012, 03, 12, 12, 30, 54, DateTimeKind.Unspecified);

                    stores.Add(newStore1);
                    stores.Add(newStore2);
                    stores.Add(newStore3);
                    stores.Add(newStore4);
                    stores.Add(newStore5);
                }

                private void btnQuery_Click(object sender, EventArgs e)
                {
                    var query1 = stores.GroupBy(x => new
                    {
                        x.City,
                        x.StoreName,
                        x.SalesDate.Year,
                        x.SalesDate.Month

                    }).Select(group => new
                    {
                        Planned = group.Sum(x => x.PlannedSales),
                        Realised = group.Sum(x => x.RealizedSales),
                        Count = group.Count(),
                        City = group.Key.City,
                        StoreName = group.Key.StoreName,
                        Year = group.Key.Year,
                        Month = group.Key.Month
                    }).OrderBy(x => x.Year).ThenBy(x => x.Month).Where(x => x.StoreName.Equals("My Store 1"));

                    List<Store> total = new List<Store>();

                    foreach (var value in query1)
                    {
                        Store newStore = new Store()
                        {
                            MonthYear = value.Month.ToString() + " - " + value.Year.ToString(),
                            RealizedSales = value.Realised,
                            PlannedSales = value.Planned

                        };
                        total.Add(newStore);
                    };

                    var query2 = total.Select((s, i) => new
                    {
                        MonthYear = s.MonthYear,
                        RealizedSales = s.RealizedSales + total.Take(i).Sum(sa => sa.RealizedSales),
                        PlannedSales = s.PlannedSales + total.Take(i).Sum(sa => sa.PlannedSales)
                    });

                    List<Store> totalFinal = new List<Store>();

                    foreach (var value in query2)
                    {
                        Store newStore = new Store()
                        {
                            MonthYear = value.MonthYear,
                            RealizedSales = value.RealizedSales,
                            PlannedSales = value.PlannedSales
                        };
                        totalFinal.Add(newStore);
                    };

                    dataGridView1.DataSource = totalFinal;

                }
            }

            public class Store
            {
                public string StoreName { get; set; }
                public string City { get; set; }

                public int PlannedSales { get; set; }
                public int RealizedSales { get; set; }

                public DateTime SalesDate { get; set; }

                public string MonthYear { get; set; }

            }
        } 
```

当窗体被实例化时，方法 CreateItems 被调用。此方法将使用一些演示**存储**数据填充**列表。**

 **当按下表单中的按钮时，使用 Linq 查询**列表商店**，其方式将返回我的**列表商店中的所有****PlannedSales**和**RealizedSales** per **MonthYear** WHERE the **StoreName** = My Store 1

 ****查询结果示例如下：http: [//i49.tinypic.com/vz1c6.jpg](http://i49.tinypic.com/vz1c6.jpg)

知道如何优化此查询以使其更简单但获得相同的结果吗？

基本上，我只需要返回特定商店名称的所有计划和实现的每月销售额！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:06:16.083

这应该很简单：

```
var totalPlanned = 0;
var totalRealized = 0;
var result = stores.Where(s => s.StoreName.Equals("My Store 1"))
                   .Select(s => {
                        totalPlanned += s.PlannedSales;
                        totalRealized += s.RealizedSales;
                        return new Store(){
                           MonthYear = s.SalesDate.ToString("MM - yyyy"),
                           PlannedSales = totalPlanned,
                           RealizedSales = totalRealized

                        };
                    }); 
```

与原始代码一起显示此新代码以显示相同结果的实时示例：[http ://rextester.com/PAF27531](http://rextester.com/PAF27531)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T10:06:43.727

```
from s in stores
where s.StoreName == "My Store 1"
group s by new { s.StoreName, s.SalesDate.Year, s.SalesDate.Month } into g
select new
{
g.Key.StoreName,
MonthYear = g.Key.Year.ToString() + " - " + g.Key.Month.ToString(),
Planned = g.Sum(st => st.PlannedSales),
Realized = g.Sum(st => st.RealizedSales)
} 
```******

# c# - Microsoft.SqlServer.Management.SqlParser 内嵌在 clickonce

> ID：11501688
> 
> 赞同：0
> 
> 时间：2012-07-16T09:36:52.787
> 
> 标签：c#, sql-server-2008-r2, smo

`ftp`在部署项目并执行后，我想通过单击一次`Microsoft.SqlServer.Management.SqlParser V 10.0 needed .`

我已经安装`1033\x64\SharedManagementObjects.msi Version 10.50.2500.0`

但我在 sdk 目录中找不到这个文件！另一件事是我没有在我的解决方案中使用这个 dll！

我该如何解决这个问题？任何形式的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:51:50.400

您在项目中使用的 dll 可能需要它，并且它正在 GAC 中使用它。在您的部署机器中没有这样的 dll。打开您的项目属性，然后单击“发布”。单击“应用程序文件”按钮，然后在打开的对话框中选中“显示所有文件”。查看丢失的 dll 是否存在并将其发布状态更改为“包含”。

# c# - 以编程方式调用 C# 编译器来编译 C# 代码

> ID：11501697
> 
> 赞同：3
> 
> 时间：2012-07-16T09:37:42.357
> 
> 标签：c#, .net, compiler-construction

我设计了自己的语言，最终将其转换为 C# 代码。现在我想通过我的 Windows 窗体应用程序使用 C# 编译器编译这个 C# 代码。

实际的编译器文件在哪里以及如何编译我的代码（当前放在一个字符串中）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:09:42.553

听起来您正在寻找`CSharpCodeProvider`. [http://support.microsoft.com/kb/304655](http://support.microsoft.com/kb/304655)或[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)有示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T09:41:15.293

为此，您可以使用 C# CodeDom。此链接可能对您有所帮助

[http://www.codeproject.com/Articles/3445/Runtime-Compilation-A-NET-eval-statement](http://www.codeproject.com/Articles/3445/Runtime-Compilation-A-NET-eval-statement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:49:15.170

```
c:\windows\Microsoft.NET\Framework\v3.5\ 
```

包含 C# 编译器`csc.exe`。

因此，您可以执行以下操作：

```
const string outputfile = "abc.exe";
const string inputFile = "xyz.cs"

ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "c:\\windows\\Microsoft.NET\\Framework\v3.5\\csc.exe";
startInfo.Arguments = "/out:" + outputFile + " " + inputFile;
Process.Start(startInfo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:51:52.907

您需要查看以下 2 个站点：

1 - 使用 csc.exe 构建命令行

[http://msdn.microsoft.com/en-us/library/78f4aasd.aspx](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

和

2 - 确定安装了哪个版本的 .NET Framework

[http://msdn.microsoft.com/en-us/library/y549e41e.aspx](http://msdn.microsoft.com/en-us/library/y549e41e.aspx)

您将需要确定您将使用哪个版本的 .NET Framework 编译器，您可以从第二个链接中看到：

“您可以在一台计算机上安装和运行多个版本的 .NET Framework。您可以按任意顺序安装这些版本。要查看安装了哪些版本，请查看 %WINDIR%\Microsoft.NET\Framework 目录。（您还应该在 64 位电脑上查看 Framework64 目录，可以安装 32 位或 64 位版本。）每个版本的 .NET Framework 都有一个目录，目录名的前两位数字标识 .NET Framework 版本；例如：.NET Framework 1.1 的 v1.1.4322、.NET Framework 2.0 的 v2.0.50727、.NET Framework 3.5 的 v3.5，等等。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T10:41:23.680

只需将 nemerle 编译器用作具有 csharp 语法的服务。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-16T09:45:10.843

您是否考虑过使用[Emit](http://msdn.microsoft.com/en-us/library/3y322t50)代替？

[csc.exe 编译器是 .Net 的](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)一部分：

> csc.exe 可执行文件通常位于系统目录下的 Microsoft.NET\Framework\ 文件夹中。它的位置可能会有所不同，具体取决于任何个人计算机上的确切配置。如果计算机上安装了多个版本的 .NET Framework，则该可执行文件的多个版本将出现在计算机上。有关此类安装的详细信息，请参阅[确定已安装的 .NET Framework 版本](http://msdn.microsoft.com/en-us/library/y549e41e.aspx)。

# php - PHP to SQL on-change 不更新

> ID：11501705
> 
> 赞同：0
> 
> 时间：2012-07-16T09:38:30.447
> 
> 标签：php, mysql, html, codeigniter

我有一个相当普遍的问题。我有一个小表格

```
 <form action="<?=base_url();?>ticket/close_ticket/<?=$ticket_details['id'];?>" method="post" id="close_ticket" name="close_ticket">
        <ul>
            <li><label for="frm_status">Status<span class="req">*</span></label>
                <span class="input">                        
                    <select id="frm_status" name="status" onchange="this.form.submit()">
                            <option value="<? if ($ticket_details['status'] == "Open") $status= "1"; else $status= "2"; echo $status;?>"><? if ($ticket_details['status'] == "Open") $status= "Open"; else $status= "Closed"; echo $status;?></option>
                            <option value="<? if ($ticket_details['status'] == "Open") $status= "2"; else $status= "1"; echo $status;?>"><? if ($ticket_details['status'] == "Open") $status= "Closed"; else $status= "Open"; echo $status;?></option>                  
                    </select>
                </span>
            </li>
        </ul>
     </form> 
```

此表单包含下拉列表选项框，在更改时将表单提交给关闭工单控制器......

```
 public function close_ticket()
  {
    $this->load->model('ticket_model');
    $ticket_id = mysql_real_escape_string($this->uri->segment(3));

    if($_POST)
    {
        //save ticket
        unset ($_POST['id']);
        $_POST['id'] = $ticket_id;
        $this->ticket_model->close_ticket($_POST);

        redirect(base_url().'ticket/edit/'.$ticket_id.'/');
        return;

    }
    redirect(base_url().'ticket/edit/'.$ticket_id.'/');
  } 
```

它确实如此。这个控制器就是将信息发布到模型来更新SQL.....

```
 public function close_ticket($ticket_post)
{
$query = $this->db->query("SELECT id FROM ".$this->tables_ticket." WHERE id = '".mysql_real_escape_string($ticket_post['id'])."';");

if($query->num_rows() > 0)
        {
        $row = $query->row();
        $query = $this->db->query("UPDATE ".$this->tables_ticket."
                                    SET
                                    status = '".mysql_real_escape_string($ticket_post['status'])."'
                                    WHERE
                                    id = '".mysql_real_escape_string($ticket_post['id'])."'
                                    ");
        }
    if($this->db->affected_rows() > 0) return true;
    else return false;
} 
```

然后在这一切之后，重定向回表单。我假设在重定向时，表单将使用更新的数据填充下拉列表。这就是我苦苦挣扎的地方，因为它发送了更改的数据，并且在某处它没有注册更改并返回页面，没有改变。问题，这是否适用于确认/辅助提交页面，然后是重定向，我是否试图在失败的同一函数中返回更改的数据？

```
 $body_data['ticket_list']       = $this->ticket_model->list_ticket();
    $body_data['ticket_details']    = $this->ticket_model->get_ticket($ticket_id);
    $body_data['ticket_summary']    = $this->ticket_model->list_ticket_summary($ticket_id);
    $body_data['customer_list']     = $this->ticket_model->get_customer_details($ticket_id);
    $body_data['precan_list']       = $this->ticket_model->list_messages();
    $body_data['users_list']        = $this->ticket_model->list_users();

    $foot_data['accordian_active'] = 5;

    $this->load->view('head',$head_data);
    $this->load->view('sidebar/service',$head_data);
    $this->load->view('ticket/edit',$body_data);
    $this->load->view('foot',$foot_data);
    return; 
```

编辑函数只返回一系列人口查询列表。除非我需要一个新的查询来重新填充ticket_details 列表？

# php - 如何在 PHP 中找到主机的 Web 根目录

> ID：11501714
> 
> 赞同：0
> 
> 时间：2012-07-16T09:39:11.243
> 
> 标签：php, web-hosting

如何通过 PHP ftp_put() 函数找到主机的**Web 根目录**（www、html_public 等）以自动上传文件？

> 目的是建议通过表单安装 PHP 脚本，或者用户可以发送他们的 FTP 登录。
> 
> 然后，通过一个函数，PHP 将远程上传并安装脚本到服务器上。我的完整功能完美运行，但是我无法确定服务器的 Web 目录。

预先感谢您的帮助。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:43:32.800

你检查过[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)吗？

尝试这个，

```
echo $_SERVER["DOCUMENT_ROOT"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:42:37.993

不是 100% 确定您在这里尝试做什么，而是通过在您的 webroot 中上传一个包含以下内容的文件：

```
echo dirname(__FILE__); 
```

您可以在服务器上收到完整的根路径。

# java - 这是什么语法 - public static 9000？

> ID：11501715
> 
> 赞同：1
> 
> 时间：2012-07-16T09:39:11.853
> 
> 标签：java, syntax

阅读[http://www.jamesward.com/2011/08/23/war-less-java-web-apps](http://www.jamesward.com/2011/08/23/war-less-java-web-apps)上关于如何在您的应用程序中嵌入应用服务器的文章，我注意到了这段代码。

```
package foo;

import java.io.File;
import java.net.URL;
import java.util.jar.Attributes;
import java.util.jar.JarFile;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.handler.*;
import org.eclipse.jetty.util.StringUtil;
import org.eclipse.jetty.webapp.WebAppContext;

public class Main
{

  public static 9900;">);
    out.close();
  }
} 
```

Main 类在做什么，因为我不理解该语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:44:02.473

我看到了，所以它一定是你的浏览器的问题。

```
package foo;

import java.io.File;
import java.net.URL;
import java.util.jar.Attributes;
import java.util.jar.JarFile;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.handler.*;
import org.eclipse.jetty.util.StringUtil;
import org.eclipse.jetty.webapp.WebAppContext;

public class Main
{

  public static void main(String[] args) throws Exception
  {
    String webappDirLocation = "src/main/webapp/";

    Server server = new Server(8080);
    WebAppContext root = new WebAppContext();

    root.setContextPath("/");
    root.setDescriptor(webappDirLocation + "/WEB-INF/web.xml");
    root.setResourceBase(webappDirLocation);

    root.setParentLoaderPriority(true);

    server.setHandler(root);

    server.start();
    server.join();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T09:42:00.240

这是不可编译的源代码

您提供的链接中也没有此类源代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:47:37.007

```
 public static 9900;">); 
```

以上不是合法代码，可能是您的浏览有问题。反正你用的是什么浏览器......

# c# - XMLDocument GetElementByID 返回 null

> ID：11501716
> 
> 赞同：3
> 
> 时间：2012-07-16T09:39:20.523
> 
> 标签：c#, xml, null, getelementbyid, xmldocument

我正在尝试使用函数 GetElementById 获取 xml 的元素，但该函数始终返回 null。

```
//get xml text from a web service
string xml = aS.createTree();
XmlDocument tree = new XmlDocument();
tree.LoadXml(xml);

//get all nodes with the tag name "item"
XmlNodeList node = tree.GetElementsByTagName("item");
//just for test to see if i could get the attribute value which returns the expected
string idTemp = node[0].Attributes["ID"].Value;
XmlElement elem = tree.GetElementById("1"); 
```

elem 总是返回 null。你们能帮帮我吗？

顺便说一句，这是我试图解析的 xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE tree [
   <!ELEMENT tree ANY>
   <!ELEMENT item ANY>
   <!ATTLIST item id ID #REQUIRED>
]>
<tree>
   <item id="1">
       <item id="2"></item>
   </item>
   <item id="5">
       <item id="6"></item>
       <item id="7">
           <item id="8">
               <item id="10">
                   <item id="11"></item>
               </item>
           </item>
           <item id="9"></item>
       </item>
   </item>
</tree> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:43:07.570

只需更改`ID`为`id`：

```
string idTemp = node[0].Attributes["id"].Value; 
```

但请注意：

[`XmlDocument.GetElementById`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.getelementbyid.aspx)来自 MSDN：

> DOM 实现必须具有定义哪些属性属于 ID 类型的信息。尽管可以在 XSD 模式或 DTD 中定义类型 ID 的属性，但此版本的产品仅支持在 DTD 中定义的属性。除非在 DTD 中如此定义，否则名为“ID”的属性不属于 ID 类型。未知属性是否为 ID 类型的实现应返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:42:34.033

据我所知，id att 不能以数字开头。你可以尝试一些类似的东西`id="_1"`，看看它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T07:38:18.680

[https://www.w3schools.com/tags/att_global_id.asp](https://www.w3schools.com/tags/att_global_id.asp)

> **HTML 4.01 和 HTML5 的区别**
> 
> 注意：HTML 4.01 对 id 值的内容有更大的限制（例如；在 HTML 4.01 中，id 值不能以数字开头）。

# sql - MSSQL：查找具有每个列值的记录

> ID：11501724
> 
> 赞同：0
> 
> 时间：2012-07-16T09:39:47.170
> 
> 标签：sql, sql-server, database

假设我有一些下表架构： `year|val1|val2` 我想获取所有列`val1`的`val2`所有值的`year`列。我怀疑我需要在这里分组，但我无法想象如何。假设我们从查询中设置了几年：`SELECT DISTINCT YEAR FROM table`。假设它返回 2000,2001。所以如果我必须行`2000|1|2`，`2001|1|2`然后查询应该返回单行`1|2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:46:08.167

这样的事情可能会奏效

```
select
    value1
from 
    table as t1 inner join
    (select distinct year from table) as t2
    on t1.year=t2.year
group by
    val1 
having count(distinct t1.year)=(count(distinct t2.year) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:50:01.433

不确定你的问题。但我认为你需要所有有效年值的 val1 和 val2 值。如果是这种情况，那么你必须对表进行内部连接，如下所示

从表中选择 @yearcnt = count(distinct year)

或从表组中选择 val1,count(distint year) 作为 totalyear，由 val1 具有 count(distinct year) = @yearcnt

# javascript - 更改密码输入的 maxLength 属性不起作用

> ID：11501726
> 
> 赞同：0
> 
> 时间：2012-07-16T09:39:53.533
> 
> 标签：javascript, html, input, dojo, passwords

我有一个密码输入控件，默认情况下，创建密码控件的组件将 maxLength 设置为 32。我正在尝试使用 dojo.addOnLoad() 事件处理程序将密码输入的 maxLength 更改为 128 个字符。事件处理程序触发，但将 maxLength 属性设置为 128 似乎并没有实际工作。限制似乎仍设置为旧值：32。

有哪些解决方法？

PS：我在 Windows 和 Firefox 13 上使用 chrome 20。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:44:31.700

很难说发生了什么，但至少在一个简单的情况下，设置 maxLength（使用准确的拼写）来覆盖 maxlength 属性似乎效果很好，正如预期的那样，无论是在实际测试中还是在检查 DOM 时。确保您正在访问正确的对象，并以最简单的方式进行分配，例如`document.getElementById('yourPasswordFieldID').maxLength = 128`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:06:54.090

尝试`setAttribute`改用：

```
pwdField.setAttribute("maxlength", 128); 
```

# debugging - gstreamer 调试版本

> ID：11501731
> 
> 赞同：1
> 
> 时间：2012-07-16T09:40:06.247
> 
> 标签：debugging, dll, gstreamer, debug-build

我正在编写一个多媒体应用程序。出于调试目的，我需要为 Windows 构建 gstreamer 调试版本。Ossbuild 只提供发布 dll。有谁知道我在哪里可以获得 gstreamer 的调试 dll？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T19:23:15.670

您必须自己构建它，直到用于 Windows 的[Gstreamer SDK](http://code.entropywave.com/gstreamer-sdk/)出现。即使您设法获得了调试 DLL，它们也必须来自与您的发布版本相同的 gstreamer 版本，否则在调试时您会得到无意义的结果。

如果您使用 OSSBuild 和 Visual Studio，您可能可以在`$OSSBUILD/Build/Windows/Win32/Release/pdb`目录中找到用于调试的 .pdb 文件；如果您能找到这些文件，您可以将它们添加到 Visual Studio，以便它知道按照以下说明使用它们，例如[这些](http://msdn.microsoft.com/en-us/library/x54fht41%28v=vs.80%29.aspx)说明。

OSSBuild 调试信息参考：[这里](http://www.gstreamer-winbuild.ylatuya.es/doku.php?id=developers)

# python - 如何在python中提取文本文件、rar文件中的信息？

> ID：11501739
> 
> 赞同：0
> 
> 时间：2012-07-16T09:40:25.467
> 
> 标签：python, extract, rar

我有一个.rar 文件，例如English-Lexicon.rar 在这个.rar 文件中，有两个.txt 文件，即neg.txt 和pos.txt。我需要使用 python 访问 neg.txt 和 pos.txt 中的内容。如何才能做到这一点？我对python相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:45:48.837

没用过，但[谷歌](https://www.google.com/search?num=100&hl=en&q=python+rar&oq=python+rar)想出了[rarfile](http://pypi.python.org/pypi/rarfile/)。

# c# - 如何在 Windows 窗体应用程序的 DataGridView 行中动态添加控件？

> ID：11501740
> 
> 赞同：1
> 
> 时间：2012-07-16T09:40:36.283
> 
> 标签：c#, .net

我在每一行都有一个具有不同控件类型的 DataGridView 现在我想根据该控件类型在每一行中创建控件是否可能？如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:42:08.370

您可以在网格的 OnRowDatabound 上添加控件，然后您可以在行中添加控件

要将控件添加到单元格，请使用

```
void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridViewRow row = e.Row as GridViewRow;
    if (row != null)
    {
        MyObject myObject = new MyObject();
        row.Cells[0].Controls.Add(myObject);
    }
} 
```

要将控件添加到整行，请使用

```
void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    GridViewRow row = e.Row as GridViewRow;
    if (row != null)
    {
        MyObject myObject = new MyObject();
        row.Controls.Add(myObject);
    }
} 
```

在这里查看 windows 窗体 Grid

您可以通过继承 DataGridViewColumn 类或其任何派生类来创建自己的列类，以提供自定义外观、行为或托管控件。有关详细信息，请参阅如何：通过扩展其行为和外观来自定义 Windows 窗体 DataGridView 控件中的单元格和列

[http://msdn.microsoft.com/en-us/library/bxt3k60s%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/bxt3k60s%28v=vs.80%29.aspx)

如何：通过扩展其行为和外观来自定义 Windows 窗体 DataGridView 控件中的单元格和列
[http://msdn.microsoft.com/en-us/library/7fb61s43%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/7fb61s43%28v=vs.80%29.aspx)

# clojure - 我有两个版本的函数来计算前导哈希 (#) 字符，哪个更好？

> ID：11501745
> 
> 赞同：3
> 
> 时间：2012-07-16T09:40:53.067
> 
> 标签：clojure, functional-programming

我写了一段代码来计算一行的前导哈希（#）字符，这很像一个标题行`Markdown`

```
### 第一行 -> 返回 3
######## 第二行 -> 返回 6 （只关心前 6 个字符。

```

**版本 1**

```
(defn
  count-leading-hash
  [line]
  (let [cnt (count (take-while #(= % \#) line))]
    (if (> cnt 6) 6 cnt))) 
```

**版本 2**

```
(defn
  count-leading-hash
  [line]
  (loop [cnt 0]
    (if (and (= (.charAt line cnt) \#) (< cnt 6))
      (recur (inc cnt))
      cnt))) 
```

我曾经`time`测量过这两种实现，发现基于的第一个版本`take-while`比版本 2 快 2 倍。`"###### Line one"`作为输入，版本 1 耗时*0.09 ms*，版本 2 耗时约*0.19 ms*。

**问题 1\. 是否会`recur`减慢第二次实施的速度？**

**问题 2\. 版本 1 更接近函数式编程范式，是吗？**

**问题 3\. 你更喜欢哪一个？为什么？**（欢迎您编写自己的实现。）

### - 更新 -

在阅读了[cloujure](http://clojuredocs.org/quickref/Clojure%20Core)的文档后，我想出了一个新版本的这个函数，我认为它很清楚。

```
(defn
  count-leading-hash
  [line]
  (->> line (take 6) (take-while #(= \# %)) count)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:34:18.470

1.  IMO 对小段代码进行时间测量没有用
2.  是的，版本 1 更实用
3.  我更喜欢版本 1，因为它更容易发现错误
4.  我更喜欢版本 1，因为它的代码更少，因此维护成本更低。

我会这样写函数：

```
(defn count-leading-hash [line]
  (count (take-while #{\#} (take 6 line)))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:14:04.170

1.  不，这是用于调用的反射`.charAt`。在创建函数之前调用`(set! *warn-on-reflection* true)`，你会看到警告。
2.  就它使用[HOFs 而言](http://en.wikipedia.org/wiki/Higher-order_function)，当然可以。
3.  第一个，虽然`(if (> cnt 6) 6 cnt)`最好写成`(min 6 cnt)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:35:04.833

JVM 上的微基准几乎总是具有误导性，除非你真的知道自己在做什么。因此，我不会过分重视您的两种解决方案的相对性能。

第一个解决方案更惯用。只有当 Clojure 代码是唯一合理的替代方案时，您才会真正看到显式循环/递归。在这种情况下，显然有一个合理的替代方案。

另一种选择，如果您对正则表达式感到满意：

```
(defn count-leading-hash [line]
     (count (or (re-find #"^#{1,6}" line) ""))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T11:45:21.167

1：不`recur`。很快。对于您调用的每个函数，VM 都会产生一些开销和“噪音”：例如，REPL 需要解析和评估您的调用，否则可能会发生一些垃圾收集。这就是为什么对如此微小的代码进行基准测试没有任何意义。

与之比较：

```
(defn
  count-leading-hash
  [line]
  (let [cnt (count (take-while #(= % \#) line))]
    (if (> cnt 6) 6 cnt)))

(defn
  count-leading-hash2
  [line]
  (loop [cnt 0]
    (if (and (= (.charAt line cnt) \#) (< cnt 6))
      (recur (inc cnt))
      cnt)))

(def lines ["### Line one" "######## Line two"])

(time (dorun (repeatedly 10000 #(dorun (map count-leading-hash lines)))))
;; "Elapsed time: 620.628 msecs"
;; => nil
(time (dorun (repeatedly 10000 #(dorun (map count-leading-hash2 lines)))))
;; "Elapsed time: 592.721 msecs"
;; => nil 
```

没有显着差异。

2：在这种情况下使用`loop`/`recur`不是惯用的；最好仅在真正需要时使用它，并在可能的情况下使用其他可用功能。有许多对集合/序列进行操作的有用函数；检查[ClojureDocs](http://clojuredocs.org/quickref/Clojure%20Core#Collections+-+Sequences)以获取参考和示例。根据我的经验，对函数式编程不熟悉的具有命令式编程技能的人比那些有大量 Clojure 经验的人使用`loop`/更多；/可能是代码气味。`recur``loop``recur`

3：我更喜欢第一个版本。有很多不同的方法：

```
;; more expensive, because it iterates n times, where n is the number of #'s
(defn count-leading-hash [line]
  (min 6 (count (take-while #(= \# %) line))))

;; takes only at most 6 characters from line, so less expensive
(defn count-leading-hash [line]
  (count (take-while #(= \# %) (take 6 line))))

;; instead of an anonymous function, you can use `partial`
(defn count-leading-hash [line]
  (count (take-while (partial = \#) (take 6 line)))) 
```

**编辑：** 如何决定何时使用`partial`与匿名函数？

就性能而言，这并不重要，因为`(partial = \#)`评估为`(fn [& args] (apply = \# args))`. `#(= \# %)`转换为`(fn [arg] (= \# arg))`。两者非常相似，但`partial`为您提供了一个接受任意数量参数的函数，因此在您需要它的情况下，这就是要走的路。`partial`是[lambda 演算](https://en.wikipedia.org/wiki/Lambda-expression)中的 λ (lambda) 。我想说，使用更容易阅读的东西，或者`partial`如果你需要一个带有任意数量参数的函数。

# svn - 在 Excel 表中获取 svn 中更改的文件列表

> ID：11501750
> 
> 赞同：0
> 
> 时间：2012-07-16T09:41:02.880
> 
> 标签：svn

我想获取 svn 第一个修订版到最后一个版本中所有更改文件的列表，我想在 excel 表中获取所有更改文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:42:58.117

使用您最喜欢的 svn 客户端创建一个 CSV 文件并在 Excel 中打开它。Excel 读取 CSV，因此您实际上不需要了解内部 excel 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:17:41.273

您可以运行 svn diff 并输出到 xml 文件。然后对它运行这个基本的 xsl 文件。

把它放在一个 .bat 文件中

```
set __SVNClient="C:\Program Files\CollabNet\Subversion Client\svn.exe"
set __svnBaseSVNSourceLocation=https://mySVNServer.com/MyRepository

%__SVNClient% diff --revision 333:HEAD "%__svnBaseSVNSourceLocation%"  --summarize --username %USERNAME% --xml >>svndiffexample.xml

set __svnBaseSVNSourceLocation=
set __SVNClient= 
```

然后将这个 xsl 应用到上面的 xml 中。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="text" indent="yes"/>
    <xsl:template match="/">item,props,kind,path<xsl:text>&#10;</xsl:text>
        <xsl:for-each select="//diff/paths/path">
<xsl:value-of select="@item"/>,<xsl:value-of select="@props"/>,<xsl:value-of select="@kind"/>,<xsl:value-of select="."/>
            <xsl:text>&#10;</xsl:text>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

你会得到这样的输出

```
item,props,kind,path
modified,none,file,https://mySVNServer.com/MyRepository/MyFile01.txt
modified,none,file,https://mySVNServer.com/MyRepository/ABCFolder/INC/MyFile01.inc
modified,none,file,https://mySVNServer.com/MyRepository/ABCFolder/Js/MyFile01.js
modified,none,file,https://mySVNServer.com/MyRepository/DEFFolder/MyFile01.pdf 
```

# mysql - 在mysql中为表的每一行存储多个日期？

> ID：11501755
> 
> 赞同：0
> 
> 时间：2012-07-16T09:41:32.340
> 
> 标签：mysql, database

我正在制作一个在线预订卡车的网站。我正在使用 MySql 作为数据库。我有一个名为“Available_Bookings”的表，其中每一行都存储了一辆卡车、它的司机姓名、司机联系电话等。这辆卡车有一些固定的日期可以运行。这些日期可以是 1,2 或任何数字。给定一辆卡车，我需要知道它的运营日期。

任何建议..如何设计我的数据库？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:48:54.983

创建一个包含两列的表，一列用于存储 Truck_id 和 date_operational。对于特定卡车运行的每个日期，在此表中插入一个条目。

例如。

```
truck_id  |  date_operational  
----------------------------  
     1    |  12-07-2012  
     1    |  17-07-2012  
     2    |  13-07-2012
     3    |  12-07-2012  
     3    |  17-07-2012 
```

更新 -

```
Given a truck I need to know the dates on which it operates. 
```

为此，您可以使用简单的查询 -

```
SELECT date_operational FROM <tablename> WHERE truck_id = <desired_truck>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:44:20.690

将卡车和司机信息分开到另一个表中，主键是卡车/司机 ID，然后在 Available_Bookings 中存储多个带有 ID 的行，每次都有另一个日期。

如果同一辆卡车可以有多个司机 - 也将其分开，并在 Available_Bookings 中使用 truck_id,driver_id 对

然后您可以通过 truck_id 查询 Available_Bookings 并获取可用日期列表

# sockets - nodejs中是否有一种“套接字连接池”？

> ID：11501757
> 
> 赞同：1
> 
> 时间：2012-07-16T09:41:34.140
> 
> 标签：sockets, node.js, connection

为了避免花在创建套接字上的时间。我的节点服务器需要一些“长连接”（TCP Socket）来与后台运行的用 C 语言编写的服务器保持通信，并且所有的“http 请求”都可以共享池中的 TCP 套接字。我想知道nodejs中是否有一种套接字池实现？（类似于数据库连接池）

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T12:23:57.697

通用池是一个很好的池。 [https://github.com/coopernurse/node-pool](https://github.com/coopernurse/node-pool) 但是对于http，有内置的池化机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:31:11.190

看看 http.Agent 的官方文档；这就是（大多数节点开发人员在幕后）处理可用套接字的分配。

# event-log - NLog 事件日志目标：源/提供者名称和消息格式问题

> ID：11501758
> 
> 赞同：3
> 
> 时间：2012-07-16T09:41:34.823
> 
> 标签：event-log, nlog

我正在尝试使用 NLog 将新应用程序的事件记录到文件和事件日志中。我快到了，但还不够——我可以将事件记录到事件日志中，并且在（事件日志的）详细信息/XML 视图中，一切看起来都正常。但是在查看器的常规选项卡中，我没有按预期显示事件消息；相反，我得到“DRGImporterError”；这个匹配恰好是我的 EventLogMessages.mc 文件中的 SymbolicName（见下文），但是当我修改这个值并重新编译错误消息文件时，这并没有改变。事件日志源和应用程序名称一样是“DRGImporter”，所以我不能确定“DRGImporterError”到底指的是什么！

我手动创建并编辑了存储 EventMessageFile 位置的注册表项：`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\MyAppLog\DRGImporter`. 最初，我将此键指向我的自定义 EventLogMessages.dll，但在尝试调试它时，我还将它设置为 下的标准 DLL 之一`\Windows\Microsoft.NET\...`，但它并没有改变结果。

我有许多其他应用程序使用相同的事件日志，但它们使用不同的日志框架。尽管如此，它们仍然有效，但更奇怪的是，如果我将 NLog 指向的源更改为这些较旧的源之一，则 NLog 条目会成功记录，并且事件日志中的 General 视图会显示预期的文本。我可以从 XML 视图中看到的唯一区别是 EventRecordID 和时间戳，这是意料之中的。

我还缺少这个等式的另一个元素吗？

EventLogMessages.mc：

```
;//***********Event Definitions**************
MessageId=2000
SymbolicName=MailerError
Language=English
%1.
.
MessageId=2100
SymbolicName=DRGImporterError
Language=English
%1.
. 
```

NLog.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" throwExceptions="true" autoReload="true" internalLogFile="nlog.log" internalLogLevel="Debug">

<targets>
    <target name="eventLogHeaderTarget" xsi:type="EventLog" log="Hexadex" source="DRGImporter" eventId="0" layout="${message}" />
</targets>

<rules>
    <logger name="appLogHeader" minlevel="Debug" writeTo="eventLogHeaderTarget" />
</rules> 
```

# jquery - 如何在文本输入上方放置自动完成菜单？

> ID：11501759
> 
> 赞同：7
> 
> 时间：2012-07-16T09:41:41.493
> 
> 标签：jquery, jquery-ui, positioning, lightbox, jquery-autocomplete

有没有办法在文本输入上方显示自动完成结果集？

问题是我在灯箱应用程序中使用它。背景元素设置为页面高度和宽度的 100%，它自然不会随内容扩展。因此，如果文本框上方的内容增加太多，以至于输入被迫朝向页面底部，然后用户在其中输入内容，则会出现自动完成菜单，并且输入接近页面末尾，菜单导致出现滚动条

由于背景元素（深色）不会扩展以适应它，因为菜单是绝对定位的，所以页面底部显示为白色（与实际页面的颜色一致）而页面顶部变暗在视觉上看起来很难看.

那么有没有办法做到这一点，在自动完成菜单出现之前，应该检查输入的位置。如果距离顶部超过 300 像素，那么菜​​单应该出现在输入上方吗？这是代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Filter</title>
<link type="text/css" href="ui/ui.css" rel="stylesheet" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="ui.js"></script>
<style>
div.filtertab { display: inline-block; height: 30px; background:url(filter.png); border-radius: 5px; position: relative;  margin: 10px 45px 10px 8px; cursor: pointer; -moz-user-select: none; box-shadow: 4px 2px 2px #aaaaaa; }

div.filtertab span.filtertext { position: relative;  margin-top: 4px; margin-left: 11px; margin-right: 1px;font-family:cursive,"Comic Sans"; font-size: 0.9em; float: left; display: inline-block; }

span.arrow { display: inline-block; border-top: 5px solid transparent; width: 0px; height: 0px; border-bottom: 5px solid transparent; border-right: 8.66px solid transparent; border-left: 8.66px solid #333333; margin-left: 7px; margin-top: 10.5px; }

.dateheaders { background: url(select.png); width: 120px; height: 28px; position: absolute; top: 0px; left: 0px; border-radius: 5px; cursor: pointer; display: inline-block; z-index: 55; }

.toheader { left: 183px }

.spandatew { font-weight: bold; position: relative; top: 2px; left: 6px; color: white; font-family: "lucida grande",tahoma,verdana,arial,sans-serif; font-weight: bold; color: white; font-size: 0.8em; }

div.arrow { height: 0px; width: 0px; position: absolute; display: inline-block; border-bottom: 5px solid transparent; border-right: 5px solid transparent; border-left: 5px solid transparent; border-top: 5px solid white;  right: 8px; top: 12px; }

input#from,input#to {width:107px;height:20px; position: relative; top: -30px; opacity: 0.01; cursor: pointer; }

input#from { left: 22px; }

input#to { left: 79px; }

div#ui-datepicker-div { left: -10px; }

div#diva1 {  width: 190px; position: absolute; display: none; z-index: 10; outline: none;}

div#diva2 {  width: 190px; position: absolute; display: none; z-index: 10; outline: none;}

#datecontainer { position: relative; width: 400px; height: 30px; background: red; left: 10px; }

.inpdiv { position: relative; margin-top: 6px; margin-left: 7px; background: #E2E6FF;  border-radius: 3px;  margin-bottom: 5px; display inline-block; float: left; margin-right: 3px; }

.inpdiv span.content { position: relative; top: 1px; left: 2px; padding: 2px 5px 6px 2px; font-size: 0.9em; display: inline-block; font-family: cursive,"Comic Sans";}

.inpdiv span.cancel { display: inline-block; border-radius: 3px; position: relative; top: 5px; margin: 3px 3px 3px 4px; height: 12px; width:12px; background: #bdbbae; cursor: pointer; }

.letter { position: absolute; display: inline-block; right: 4.4px; top: 4.7px; cursor: pointer; FONT-FAMILY: SANS-SERIF; FONT-SIZE: 0.9EM; }

div.friends { width: 400px;   position: relative;  overflow: hidden; border: 1px solid #4496e7; border-radius: 5px; cursor: text; height: 35px; height: auto !important; min-height: 35px;  left: 5px; }
div.friends2 { margin-top: 10px; }

div.friendsc { position: relative; top: 100px; left: 350px; width: 410px;  padding: 10px 0px; height: auto !important; height: 80px; min-height: 80px; background: green;}

div.clear { clear: both; width: 100%; height: 10px; }

button { position: absolute; top: 300px; left: 450px; }

input { position: relative; margin: 9px 0px 10px 10px; border: 0px solid white; float: left; max-width: 382px; }

div#outerfilter { width: 900px; background: grey;  position: relative; min-height: 400px; max-height: 500px; margin:auto; top: 10px; overflow: auto; padding-bottom: 20px; }
div#innerfilter { position: relative; top: 0px; left: 0px; width: 880px; min-height: 400px;background: #eaeaea; }
.filtersection { position: relative; float: left; width: 440px; min-height: 400px; height: auto !important; }
</style>
<script type="text/javascript">
$(document).ready(function(){
(function($){

$.fn.autoGrowInput = function(o) {

            o = $.extend({
                maxWidth: 1000,
                minWidth: 0,
                comfortZone: 70
            }, o);

            this.filter('input:text').each(function(){

                var minWidth = o.minWidth || $(this).width(),
                    val = '',
                    input = $(this),
                    testSubject = $('<tester/>').css({
                        position: 'absolute',
                        top: -9999,
                        left: -9999,
                        width: 'auto',
                        fontSize: input.css('fontSize'),
                        fontFamily: input.css('fontFamily'),
                        fontWeight: input.css('fontWeight'),
                        letterSpacing: input.css('letterSpacing'),
                        whiteSpace: 'nowrap'
                    }),
                    check = function() {

                        if (val === (val = input.val())) {return;}

                        // Enter new content into testSubject
                        var escaped = val.replace(/&/g, '&amp;').replace(/\s/g,'&nbsp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                        testSubject.html(escaped);

                        // Calculate new width + whether to change
                        var testerWidth = testSubject.width(),
                            newWidth = Math.min((testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth, o.maxWidth - 1),
                            currentWidth = input.width(),
                            isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)
                                                 || (newWidth > minWidth && newWidth < o.maxWidth);

                        // Animate width
                        if (isValidWidthChange) {
                            input.width(newWidth);
                        }

                    };

                testSubject.insertAfter(input);

                $(this).bind('keyup keydown blur update', check);

            });

            return this;

        };

    })(jQuery);

arr = ["Soumyashree Chakraborty", "Payel","Jinia","Soujinia","Apoorva","Mona","Shamarpita","Pratik","Pranendra","Bhushan","Bijesh","Salma","Swift","Anushka","Radhe","Amol","Bardha","Sujata","Rohit","Amit","Anuradha","Amrita","Ajay","Sumil","Sachin","Sourav","Anmol","Britannia","Anamika","Priyanka"];
$("span.letter").live('click',function() {
$(this).parent().parent().find("input").focus();
$(this).parent().remove();
  });

options = {
            source: arr.slice(0,5),
            minLength: 1,
            select: function(event,ui) {
            $('<span class = "inpdiv"><span class = "content">'+ui.item.value+'</span><span class = "cancel"></span><span class="letter">X</span></span>').replaceAll(this);
            $("<input type='text' size='3' />").appendTo(curautocomp).focus();
            event.preventDefault();
            },
            focus: function(e,ui) {
            e.preventDefault();
            },
            autoFocus: true,
            delay: 0
            };
$("input").live("focus", function (event) {
curautocomp = $(this).parent();
$(this).autocomplete(options);
$(this).autoGrowInput({
    comfortZone: 5,
    minWidth: 15,
    maxWidth: 382
});
});

});
</script>
</head>
<body>
<div id = 'outerfilter'>
<div id = 'innerfilter'>
<div class = 'filtersection'>
<div class="filtertab"><span class="filtertext">Filter by Forum</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
<div class="filtertab"><span class="filtertext">Not Asked by</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
<div class="filtertab"><span class="filtertext">Has No Answer by</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
<div class="filtertab"><span class="filtertext">No of Answers</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
</div>
<div class = 'filtersection'>
<div class="filtertab"><span class="filtertext">Asked by</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
<div class="filtertab"><span class="filtertext">Has Answer by</span><span class='arrow'></span></div>
<br />
<div class = "friends">
<input type = "text" size = "2" value = "" />
</div>
<div class="filtertab"><span class="filtertext">Filter by Date</span><span class='arrow'></span></div>
<br />
<div id = 'datecontainer'>
<div class = 'dateheaders fromheader'>
<span class = 'spandatew'>Select a date</span>
<div class = 'arrow'></div>
</div>
<div class = 'dateheaders toheader'>
<span class = 'spandatew'>Select a date</span>
<div class = 'arrow'></div>
</div>
<div id = 'diva1'></div>
<div id = 'diva2'></div>
</div>
</div>
<div class = 'clear'></div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T15:45:46.310

您需要`open`在自动完成选项中添加一个功能。从那里，您可以根据其当前位置和高度调整结果。这应该让你接近：

```
open: function(event, ui){
    var $input = $(event.target),
        $results = $input.autocomplete("widget"),
        top = $results.position().top,
        height = $results.height(),
        inputHeight = $input.height(),
        newTop = top - height - inputHeight;

    $results.css("top", newTop + "px");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T12:16:55.463

这将 Ibstr 的解决方案和 Cupidvogel 的评论放在一起，同时添加窗口滚动位置检测：

```
open: function (event, ui) {
    var $input = $(event.target);
    var $results = $input.autocomplete("widget");
    var scrollTop = $(window).scrollTop();
    var top = $results.position().top; 
    var height = $results.outerHeight();
    if (top + height > $(window).innerHeight() + scrollTop) {
        newTop = top - height - $input.outerHeight();
        if (newTop > scrollTop)
            $results.css("top", newTop + "px");
    }
} 
```

请注意，我使用的是 outerHeight 而不是 height，因为我还想考虑边框厚度。

只有当有足够的空间让它完全适合输入框上方时，自动完成才会将自己定位到顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T14:20:13.013

```
$( "#input_box input" ).autocomplete({
      position: { my: "left bottom", at: "left top"},
      source: availableTags
    }); 
```

这段代码意味着自动完成菜单（我的）的“左下角”应该放在输入框（at）的“左上角”。

尝试演示以了解这一点：[https ://www.plus2net.com/jquery/msg-demo/autocomplete-position.php](https://www.plus2net.com/jquery/msg-demo/autocomplete-position.php)

# ruby-on-rails - 在 Ruby on Rails 中使用 Devise 插件的身份验证限制

> ID：11501760
> 
> 赞同：1
> 
> 时间：2012-07-16T09:41:47.560
> 
> 标签：ruby-on-rails, ruby, devise

有没有人使用 Rails Devise 插件的经验？因为在我的项目中，当用户输入用户名和密码时，我必须在另一个表中检查用户是否处于活动状态。有两个表，第一个是 the `user`，另一个`role_membership`在`role_membership`table 中有一个名为 的列`active_status`。我必须检查`active_status = 1`否则用户是否无法登录系统。这里的任何人都知道如何配置设计插件来检查另一个表中的值。我找到了一些教程，但他们都提到了检查同一张表中的字段。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:54:20.907

修改您的用户模型以包含两个附加方法

*   active_for_authentication？
*   非活动消息

请参阅[http://pivotallabs.com/users/carl/blog/articles/1619-standup-3-21-2011-deactivating-users-in-devise](http://pivotallabs.com/users/carl/blog/articles/1619-standup-3-21-2011-deactivating-users-in-devise)（注意：它基于旧版本的设计，下面的代码应该工作）

```
class User
  # check to see if a user is active or not and deny login if not
  def active_for_authentication?
    super && your_custom_logic
  end

  # flash message for the inactive users
  def inactive_message
    "Sorry, this account has been deactivated."
  end
end 
```

用您的特定代码替换 your_custom_logic 以确定用户是否处于活动状态

附加链接：[http ://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Authenticatable/](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Authenticatable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:51:26.833

我最好的想法是覆盖设计 session#create 方法。为了做到这一点：

```
#app/controllers/sessions_controller.rb

class SessionsController < Devise::SessionsController

  def create
    resource = warden.authenticate!(auth_options)
    #resource.is_active? should be implemented by you
    if resource.is_active?
      set_flash_message(:notice, :signed_in) if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with resource, :location => after_sign_in_path_for(resource)
    else
      #put here your inactive user response
    end
  end

end 
```

并在 routes.rb

```
devise_for :users, :controllers => {:sessions => "sessions" } 
```

# java - 将 bufferedImage 设置为单个彩色像素而不将图像放入其中的简单方法？

> ID：11501761
> 
> 赞同：1
> 
> 时间：2012-07-16T09:41:49.353
> 
> 标签：java, swing, jpanel, jlabel, bufferedimage

所以我只想将缓冲图像设置为单一背景颜色有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:33:12.433

你的意思是用背景颜色填充 BufferedImage 吗？如果是这样，以下是有关如何执行此操作的示例：

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class TestBufferedImage {

    private BufferedImage buffer;

    protected BufferedImage getBuffer() {
        if (buffer == null) {
            buffer = new BufferedImage(400, 300, BufferedImage.TYPE_INT_RGB);
            Graphics2D g = buffer.createGraphics();
            g.setColor(Color.BLUE);
            g.fillRect(0, 0, buffer.getWidth(), buffer.getHeight());
            g.dispose();
        }
        return buffer;
    }

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle(TestBufferedImage.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel image = new JLabel(new ImageIcon(getBuffer()));
        frame.add(image);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestBufferedImage test = new TestBufferedImage();
                test.initUI();
            }
        });
    }

} 
```

# ios - 关于获取单元格中心并将其设置为 UIView 中心值的想法

> ID：11501763
> 
> 赞同：0
> 
> 时间：2012-07-16T09:41:54.197
> 
> 标签：ios, uitableview, uigesturerecognizer

我目前正在研究拖放功能，幸运的是我找到了一个很好的[教程](http://www.scott-sherwood.com/?p=514)。这个项目的目标是在`UILongPressGestureRecognizer`. 正如我从中了解到的那样，您必须获得您选择的单元格的“快照”才能获得将某些东西从表格中拖出的感觉。我认为，下面是执行此操作的方法。

```
- (void)dragAndDropTableViewController:(DragAndDropTableVC *)ddtvc draggingGestureWillBegin:(UIGestureRecognizer *)gesture forCell:(UITableViewCell *)cell
{
    // create a snapshot of the cell
    NSLog(@"draggable delegate method is called");
    UIGraphicsBeginImageContext(cell.contentView.bounds.size);
    [cell.contentView.layer renderInContext: UIGraphicsGetCurrentContext()];
    UIImage *cellImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIImageView *cellImageView = [[UIImageView alloc] initWithImage:cellImage];
    self.dragAndDropView = [[UIView alloc] initWithFrame:cellImageView.frame];
    [self.dragAndDropView addSubview:cellImageView];
    [self.dragAndDropView setBackgroundColor:[UIColor blueColor]];
    [self.dragAndDropView setCenter:[gesture locationInView:self.view.superview]];

    [self.view.superview addSubview:self.dragAndDropView];
} 
```

基本上，在获取单元格的“快照”后，您必须将其添加为 UIView 的子视图。让我烦恼的是这部分。

`[self.dragAndDropView setCenter:[gesture locationInView:self.view.superview]];`

这听起来很容易，但我想做的是当长按完成时，可拖动的单元格应该比所选单元格的原始位置高一点。

请启发我:)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:54:04.143

实际上，您必须相对于您的超级视图转换中心点，然后您应该使用其中一种方法`convertPoint: fromView:`，`convertPoint: toView:`有关更多信息，请参阅[此链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)。

我想这会对你有所帮助。

# php - 如果有错误输出表单输入

> ID：11501764
> 
> 赞同：0
> 
> 时间：2012-07-16T09:41:55.233
> 
> 标签：php, html

因此，我一直听到并读到，如果要将任何用户输入输出回 html，则需要对其进行清理。我想知道的是，如果出现错误，我是否需要清理输出的任何输入？

例如，在我的表单错误处理中，我有它，因此页面会重新显示，并显示错误消息并告诉用户出了什么问题，而且还将他们的输入作为表单的值输出，这样他们就不必重新输入它，他们可以看到他们哪里出错了。我的问题是当它的输出作为表单字段的值时，我是否需要使用 htmlspecialchars() 来清理用户的输入？

这是我的一个输入字段现在的样子。

```
<label for="email">E-mail Address: <?php if($btnPressed) { checkInput($_POST['email'], true, true); } // Check the validity of the input ?></label>
<input type="text" name="email" id="email" value="<?php if($btnPressed) { echo $_POST['email']; } // Output the user's input if an error occurred ?>" maxlength="50" /> 
```

这是我认为我应该做的。

```
<label for="email">E-mail Address: <?php if($btnPressed) { checkInput($_POST['email'], true, true); } // Check the validity of the input ?></label>
<input type="text" name="email" id="email" value="<?php if($btnPressed) { echo htmlspecialchars($_POST['email']); } // Output the user's input if an error occurred ?>" maxlength="50" /> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:51:08.617

是的，您需要通过`htmlspecialchars`.

否则你有两个主要问题。

1.  第三方可以链接（或使用 JS 提交隐藏表单（因为您正在使用`$_POST`他们必须使用此方法））到您的站点，以发送他们喜欢（包括`"><script...`）作为访问其攻击站点的用户的任何数据。
2.  如果用户`"`在他们的数据中输入 a （因为它是拼写错误，或者因为他们的数据确实包含一个`"`字符），当您将其显示给他们时它会中断。

# iphone - 是否可以以前在 iOs 中加载 UIViewController

> ID：11501769
> 
> 赞同：0
> 
> 时间：2012-07-16T09:42:21.897
> 
> 标签：iphone, uiviewcontroller, camera, loading

在我的 iPhone 应用程序中，我使用 Unifeye mobileviewcontroller 类，包括 EAGLView 和 metaio sdk。当我加载这个视图控制器时，相机视图将被激活，一些 metaio 类函数也会被调用。实际上，加载视图控制器需要花费大量时间。而且，如果我尝试从 Unifeye 视图控制器导航到另一个视图并有时返回，应用程序就会崩溃。所以，我只是想知道，有没有办法在后台或应用程序打开时加载视图控制器。我不知道。如果有任何方法可以加快加载速度，请分享您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:10:05.000

根据您在视图控制器的 init 方法中所做的工作量，您至少可以在视图控制器初始化时显示一个活动指示器。要异步执行此操作，您可以使用如下代码：

```
- (IBAction)onStartPushed:(id)sender
{
    [activityIndicator startAnimating];
    // initialize the viewcontroller with a little delay, so that the UI displays the changes made above
    double delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        ARViewController* theViewController = [[ARViewController alloc] init];

        // present the viewcontroller
        [self presentModalViewController:theViewController animated:YES];

        [activityIndicator stopAnimating];
    });
} 
```

如果您想要加载大型 3D 模型或跟踪会阻塞主线程的配置，您可以在您的视图控制器中执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:06:51.763

我敢打赌，一旦控制器加载，相机就会出现？您的控制器已正常加载，但启动相机需要时间。这是你得到延迟的地方。并且不能固定 imagePickerController 的负载。相反，您可以在 viewDidAppear 中显示相机，因此用户将首先看到您的控制器，然后是延迟，然后是相机。

# php - LOAD DATA INFILE - mysql/php 脚本无法正常运行

> ID：11501771
> 
> 赞同：0
> 
> 时间：2012-07-16T09:42:28.137
> 
> 标签：php, mysql, database, load-data-infile

尝试使用“LOAD DATA INFILE”从 CSV（10k 记录）填充数据库表，但目前它什么也不做。

没有错误，没有数据输入，我不知道它有什么问题，所以任何帮助表示赞赏！

```
My code (-CSS and DBconnect):

if (isset($_POST['submit'])) {
if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
    echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded
   successfully." . "</h1>";
}

$temp_file = $_FILES['filename']['tmp_name']; 
$origin_file = $_FILES['filename']['name'];
$target_file = 'uploads/'.$origin_file;
move_uploaded_file($temp_file, $target_file);
$file_name = $target_file;

$query = <<<eof
LOAD DATA LOCAL INFILE '$file_name'
 INTO TABLE importing
 FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '"'
 LINES TERMINATED BY '\n'
(text,number)
IGNORE 1 LINES
eof;

mysql_query($query);

print "Import done";

mysql_close(); 
//view upload form
}else {

print "Upload new csv by browsing to file and clicking on Upload<br />\n";

print "<form enctype='multipart/form-data' action='upload.php' method='post'>";

print "File name to import:<br />\n";

print "<input size='50' type='file' name='filename'><br />\n";

print "<input type='submit' name='submit' value='Upload'></form>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:46:20.413

## 笔记

请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

查看您的代码输出发生了哪些错误

```
mysql_query($query); 
```

到

```
$result = mysql_query($query);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

然后[`mysql_error()`](http://php.net/manual/en/function.mysql-error.php)将输出错误而不是什么都没有...

[正如@Lèsemajesté](https://stackoverflow.com/users/370940/lese-majeste)所指出的-`move_uploaded_file()`还返回一个`boolean`你应该检查的是`true`：

> 成功时返回 TRUE。
> 
> 如果 filename 不是有效的上传文件，则不会发生任何操作，并且 move_uploaded_file() 将返回 FALSE。
> 
> 如果 filename 是有效的上传文件，但由于某种原因无法移动，则不会发生任何操作，并且 move_uploaded_file() 将返回 FALSE。此外，还会发出警告。

[`move_uploaded_file()`此处的完整文档](http://php.net/manual/en/function.move-uploaded-file.php)

# android - 如何在 AndEngine 中使用两个 BitmapTextureAtlases？

> ID：11501780
> 
> 赞同：0
> 
> 时间：2012-07-16T09:42:48.713
> 
> 标签：android, andengine

我必须在我的项目中使用大纹理，所以我不能将所有纹理放入一个`BitmapTextureAtlas`. 我试图将它们放入两个地图集中：

```
textureAtlas  = new BitmapTextureAtlas(2048, 2048, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
textureAtlas2 = new BitmapTextureAtlas(1024, 2048, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
foo = BitmapTextureAtlasTextureRegionFactory.createFromAsset(textureAtlas ,this,"foo.png",0,0);
bar = BitmapTextureAtlasTextureRegionFactory.createFromAsset(textureAtlas2,this,"bar.png",0,0); 
```

但是当我尝试使用`bar`

```
Sprite sBar = new Sprite(0,0,bar);
scene.attachChild(sBar); 
```

我唯一能看到的是白色矩形而不是我的图像。而且我不知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:19:53.470

好，我知道了。我只是忘记了这一点：

```
getEngine().getTextureManager().loadTexture(textureAtlas2); 
```

# android - 创建可绘制的弯曲线形状

> ID：11501781
> 
> 赞同：2
> 
> 时间：2012-07-16T09:42:51.243
> 
> 标签：android, android-layout, drawable

我想`TextView`用弯线在 a 下划线，如下所示：

![在此处输入图像描述](../Images/994d0fd69351cfe4224e3db33ba6e353.png)

我认为背景可绘制将适合此，但我无法弄清楚如何实现这一点。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:16:01.577

您可以`9-patch`使用您最喜欢的图像编辑器创建的图像中的图像创建该背景（并且应该很容易做到）或创建一个 xml 可绘制对象。要在 xml 中创建这种类型的可绘制对象，您将使用`ClipDrawable`将剪辑另一个`Shape`可绘制对象的 a。所以你将拥有：

**background.xml**（这将是 的背景`TextView`）：

```
<?xml version="1.0" encoding="utf-8"?>
<clip xmlns:android="http://schemas.android.com/apk/res/android"
    android:clipOrientation="vertical"
    android:drawable="@drawable/background_shape"
    android:gravity="bottom" /> 
```

和**background_shape.xml**文件：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <corners
        android:bottomLeftRadius="15dp"
        android:bottomRightRadius="15dp" />

    <solid android:color="#ffffff" />

    <padding
        android:bottom="5dp"
        android:left="7dp"
        android:right="7dp" />

    <stroke
        android:width="2dp"
        android:color="#000000" />

</shape> 
```

然后在您的活动中，您将获得背景可绘制对象`TextView`并设置其级别：

```
ClipDrawable clip = (ClipDrawable) findViewById(R.id.textView1).getBackground();
clip.setLevel(5000); 
```

您可以通过使用圆角半径、填充和`ClipDrawable`.

我不知道您是否能够使用 xml drawable 获得确切的图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T09:55:06.007

**shape.xml** （将此文件保存在可绘制文件中）

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke
        android:width="1dp"
        android:color="#000000"/>    <!-- This is the Border Color For TextView-->
<!-- "#5D2E8C"  -->
    <solid android:color="#ffffff" />   <!-- background to the TextView -->
    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp" />
    <corners android:radius="20dp" />

</shape> 
```

**现在，像这样设置 TextView 的背景属性：**

```
<TextView
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content"
    android:background="@drawable/shape"
/> 
```

# iphone - 在 UIWebView 上打开本地 pdf 文件时出现应用程序崩溃

> ID：11501782
> 
> 赞同：3
> 
> 时间：2012-07-16T09:42:53.573
> 
> 标签：iphone, objective-c, ios

```
- (void) viewWillAppear:(BOOL)animated
{

 [super viewWillAppear:animated];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"About" ofType: @"pdf"];

    NSLog(@"%@", path);

    NSURL *targetURL = [NSURL fileURLWithPath:path];

    NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];

    [_webView loadRequest:request];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:46:48.603

只需使用以下代码在 Web 视图中打开 PDF

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"About" ofType:@"pdf"]; 
[self.webVctr loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]]; 
```

并检查 PDF 是否存在？

这认为可能对你有帮助

快乐码字。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:47:12.813

试试这个：

在里面

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(10, 10, 200, 200)];

NSString *path = [[NSBundle mainBundle] pathForResource:@"About" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request];

[self.view addSubview:webView];
[webView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:25:18.240

这是与通过 Web 视图加载 pdf 无关的其他问题。我交叉检查并找到了崩溃的实际原因。不管怎样，谢谢大家的帮助

# scala - 这个 Actor 的行为如何？

> ID：11501783
> 
> 赞同：0
> 
> 时间：2012-07-16T09:42:53.550
> 
> 标签：scala, io, actor, akka

我试图了解akka提供的IO。我针对这个问题开始了另一个[问题](https://stackoverflow.com/questions/11412790/socket-connection-and-actorsystem)。
我找到了一个关于如何使用 akka IO的[简单示例。](http://cognitiveentity.wordpress.com/2012/02/23/simpler-akka-io-example/)我重新实现它并启动它。现在我想知道为什么只打印会话的第一条消息。有人可以解释一下`state(socket)(Chunk(bytes))`正在做什么以及我如何向另一个`Actor`人发送消息`ActorSystem`吗？

**编辑**

我发现，演员只需要一个输入并通过将其打印到控制台来处理它。这引出了另一个问题：我怎样才能让演员接受多个输入并处理它们？我通过 putty 连接到服务器，如果我按回车键一次，它会按预期处理输入，但如果我发送另一行输入，它只会存储输入。我必须在哪里运行`flatMap`，以便处理下一行输入？我在箱子里面试过了`Read(socket, bytes)`，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:47:46.777

您试图理解的示例更高级，主要是因为它处理基于套接字的通信。如果您真的对这类东西感兴趣，我建议您阅读博客中的示例似乎来自[的文档。](http://doc.akka.io/docs/akka/2.0/scala/io.html)

无论如何，在你这样做之前，一个很好的阅读将是[入门教程](http://doc.akka.io/docs/akka/2.0/intro/getting-started-first-scala.html)，它解释了 Akka Actor 的基础知识并为你提供了一些可以玩的 Actor。

# python - Python：检查 csv 中的一个元素，使用另一个从第二个文件中删除

> ID：11501787
> 
> 赞同：0
> 
> 时间：2012-07-16T09:43:06.967
> 
> 标签：python, element, lookup

我正在尝试使脚本正常工作，它将在查找 csv 文件中检查 IP 的存在，然后如果存在，则获取第三个元素并从另一个（第二个）文件中删除该第三个元素。这是我所拥有的摘录：

```
for line in fileinput.input(hostsURLFileLoc,inplace =1):
        elements = open(hostsLookFileLoc, 'r').read().split(".").split("\n")
        first = elements[0].strip()
        third = elements[2].strip()
        if first == hostIP:
                if line != third:
                        print line.strip() 
```

这显然是行不通的，我尝试过使用一些选项，但这是我最新的（疯狂的）尝试。

我认为问题在于一次打开了两个输入文件。

欢迎任何想法，

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:55:33.237

好吧，尽管我对这个问题的评论没有得到任何回应，但这是我对一般性答案的看法。如果我有什么问题，请直接说出来，我会进行编辑以尝试解决错误。

首先，这是我的假设。您有两个文件，他们的名字存储在`HostsLookFileLoc`和`HostsURLFileLoc`变量中。

该文件`HostsLookFileLoc`是一个 CSV 文件，每行的第三列有一个 IP 地址。像这样的东西：

HostsLookFile.csv：

```
blah,blah,192.168.1.1,whatever,stuff
spam,spam,82.94.164.162,eggs,spam
me,myself,127.0.0.1,and,I
... 
```

该文件`HostsURLFileLoc`是一个平面文本文件，每行一个 IP 地址，如下所示：

HostsURLFile.txt：

```
10.1.1.2
10.1.1.3
10.1.2.253
127.0.0.1
8.8.8.8
192.168.1.22
82.94.164.162
64.34.119.12
... 
```

您的目标是读取然后重写`HostsURLFile.txt`文件，不包括在 CSV 文件的行的第三列中找到的所有 IP 地址。在上面的示例列表中，localhost (127.0.0.1) 和 python.org (82.94.164.162) 将被排除，但列表中的其余 IP 将保留。

以下是我的做法，分三步：

1.  读入 CSV 文件并使用`csv`模块对其进行解析以查找 IP 地址。将它们粘贴到`set`.
2.  打开平面文件并将 IP 地址读入 a `list`，然后关闭文件。
3.  重新打开平面文件并用加载的地址列表覆盖它，跳过第一步中集合中包含的任何内容。

代码：

```
import csv

def cleanURLFile(HostsLookFileLoc, HostsURLFileLoc):
    """
    Remove IP addresses from file at HostsURLFileLoc if they are in
    the third column of the file at HostsLookFileLoc.
    """
    with open(HostsLookFileLoc, "r") as hostsLookFile:
        reader = csv.reader(hostsLookFile)
        ipsToExclude = set(line[2].strip() for line in reader)

    with open(HostsURLFileLoc, "r") as hostsURLFile:
        ipList = [line.strip() for line in hostsURLFile]

    with open(HostsURLFileLoc, "w") as hostsURLFile: # truncates the file!
        hostsURLFile.write("\n".join(ip for ip in ipList
                                     if ip not in ipsToExclude)) 
```

这段代码故意简单。如果它们对您的用例很重要，则有一些可以改进的地方：

*   如果在重写步骤中出现程序崩溃，HostsURLFile.txt 可能会被破坏。一种更安全的重写方法（至少在 Unix 风格的系统上）是写入临时文件，然后在写入完成后（并且文件已关闭），在旧文件的顶部重命名临时文件。这样，如果程序崩溃，您仍然会拥有原始版本或完全编写的替代版本，但不会介于两者之间。
*   如果您需要做的检查比设置成员身份更复杂，我会在 2 到 3 之间添加一个额外的步骤来进行实际处理，然后在没有进一步操作的情况下写出结果（除了添加换行符）。
*   说到换行符，如果您有一个尾随换行符，它将作为 IP 地址列表中的空字符串传递，这对于这种情况应该没问题（它不会在要排除的 IP 集中，除非您的CSV 文件有一个混乱的行），但如果你做一些更复杂的事情可能会导致麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T23:32:18.030

在测试文件中`test.csv`（注意那里有一个 IP 地址）：

```
'aajkwehfawe;fh192.168.0.1awefawrgaer' 
```

（我现在几乎忽略了它是 CSV。我将使用正则表达式匹配。）

```
# Get the file data
with open('test.csv', 'r') as f:
    data = f.read()

# Look for the IP:
find_ip = '192.168.0.1'
import re
m = re.search('[^0-9]({})[^0-9]'.format(find_ip), data)
if m: # found!
    # this is weird, because you already know the value in find_ip, but anyway...
    ip = m.group(1).split('.')
    print('Third ip = ' + ip[2])
else:
    print('Did not find a match for {}'.format(find_ip)) 
```

我不明白你问题的第二部分，即从第二个文件中删除第三个值。是否有逐行列出的数字，并且您想在上面找到包含此数字的行并删除该行？如果*是*：

```
# Make a new list of lines that omits the matched one
new_lines=[]
for line in open('iplist.txt','r'):
    if line.strip()!=ip[2]: # skip the matched line
        new_lines.append(line)

# Replace the file with the new list of lines
with open('iplist.txt', 'w') as f:
    f.write('\n'.join(new_lines)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T01:08:01.490

如果，一旦您在第一个文件中找到需要在第二个文件中删除的值，我建议使用类似以下伪代码的内容：

```
Load first file into memory
Search string representing first file for matches using a regular expression
    (in python, check for re.find(regex, string), where regex = re.compile("[0-9]{3}\\.[0-9]{3}\\.[0-9]\\.[0-9]"), I am not entirely certain that you need the double backslash here, try with and without)
Build up a list of all matches
Exit first file

Load second file into memory
Search string representing second file for the start index and end index of each match
For each match, use the expression string = string[:start_of_match] + string[end_of_match:]
Re-write the string representing the second (now trimmed) file to the second file 
```

基本上每当您找到匹配项时，将字符串重新定义为它两侧的切片，将其从新的字符串分配中排除。然后将您的字符串重写为文件。

# python - 从远程服务器读取/写入百万行的最有效方法是什么？

> ID：11501791
> 
> 赞同：-3
> 
> 时间：2012-07-16T09:43:16.297
> 
> 标签：python, sqlalchemy

有人可以指出我使用 SQLAlchemy 和 Python 从远程服务器读取/写入数百万行的有效方法（以避免内存不足错误）吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:47:27.137

在读取数据时迭代您的结果集，以便您一次只处理一行，而不是在实际处理它们之前将整个数据集拉入内存。

对于写作，同样如此。为了提高效率，一次只处理一条记录。

# iphone - UIDatePickerModeCountDownTimer 模式下的 UIDatePicker：如何更改为分秒模式？

> ID：11501793
> 
> 赞同：4
> 
> 时间：2012-07-16T09:43:23.967
> 
> 标签：iphone, storyboard, uidatepicker

我在情节提要中添加了 UIDatePicker，并将模式设置为 CountDownTimer。它只显示小时和分钟，但我需要的是分钟和秒模式。我不需要小时列，需要分钟和秒列。我尝试更改间隔，但它的最小值是 1 分钟。是否可以？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:56:29.947

您可以为您的分秒选择器创建一个数据源。它有两个组成部分：分钟和秒。`UIPickerViewDelegate`你必须在和`UIPickerViewDataSource`协议中实现一些方法。

Apple 的示例代码[UICatalog.app](https://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007710)供您参考。您可以找到有关如何创建自定义选择器的示例。

# android - 在 EditText 中添加图标以用于消息传递，例如 whatsapp 或 msn

> ID：11501795
> 
> 赞同：3
> 
> 时间：2012-07-16T09:43:32.937
> 
> 标签：android

我在 Google 上研究过如何在 EditText 中插入图标​​。但是，其中大部分都在谈论类似：[如何在 Android 的 EditText 视图中添加图标？](https://stackoverflow.com/questions/4281749/how-to-add-icon-inside-edittext-view-in-android).
那就是添加一个静态图标。
但是，我喜欢在文本之间添加图标，例如在 MSN 或 Whatsapp 中输入消息。首先，EditText 附近有一个按钮。单击时，显示一个可以选择任何图标的对话框。选择图标后，它将附加在文本之后。
有可能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:11:08.420

如果你想要这个！![这](../Images/83499fe9e11a8a6914632076945c5770.png)所以[ImageSpan](http://developer.android.com/reference/android/text/style/ImageSpan.html)就是你想要[的。而 Spans 简介](http://blog.stylingandroid.com/archives/177)是如何使用 Spans 的完整教程

# iphone - 如何在 HTML5 视频标签上放置交互式按钮？

> ID：11501798
> 
> 赞同：0
> 
> 时间：2012-07-16T09:43:35.873
> 
> 标签：iphone, ipad, html, video

当我在 HTML5 视频标签上放置一个链接时。这将适用于 Safari、桌面浏览器，但在 iPad 和 iPhone 上我无法点击它。有人知道解决这个问题吗？

* * *

```
 <div class="video-wrapper">

            <video id="mainVideo" poster="resources/videos/poster.jpg" controls="controls">
                <source src="resources/videos/video.mp4" type="video/mp4" />
                Your browser does not support the video tag.
            </video>

            <a id="example" href="javascript:alert('ok')">Hello World</a>

        </div> 
```

# javascript - 使用 jquery 修改文本区域上的撤消/重做行为

> ID：11501804
> 
> 赞同：2
> 
> 时间：2012-07-16T09:44:08.143
> 
> 标签：javascript, jquery, html, dom

当用户从上下文菜单中选择撤消/重做或在文本区域中按 ctrl z 时，我需要自己处理事件撤消和重做。如何防止默认行为并添加自定义行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:51:03.560

您可以通过`ctrl+z`以下方式检测`keyup()`：

```
var ctrlZ = e.ctrlKey && e.which === 90
if (ctrlZ) { ... } 
```

和上下文菜单`mousedown()`：

```
var rightClick = e.which === 2
if (rightClick) { ... } 
```

# c# - C# 中等效的 VB6 格式

> ID：11501808
> 
> 赞同：1
> 
> 时间：2012-07-16T09:44:18.900
> 
> 标签：c#, vb6-migration

我正在将一些 VB6 代码转换为 C#，并且在复制某些功能时遇到问题。我有一个数字 ex.6000 的字符串表示形式和一个 ex 格式说明符。###0.000。

VB6 示例：

```
Format(number, "########0.000") = "6.000" 
```

我很难找到与此功能相同的 C#。我尝试过的方法，`ToString()`但它们更多地用于格式化实际数字，而不是像 VB6 那样的覆盖格式。

C# 示例：

```
number.ToString("########0.000", CultureInfo.InvariantCulture) = 6000.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:50:57.210

就个人而言，我认为您应该简单地重新访问您的输入和数字说明符以使其更合适，但是：您可以通过以下方式作弊：

```
string s = number.ToString(@"########0\.000", CultureInfo.InvariantCulture) 
```

现在`\.`不是小数点说明符，而是文字**。**可怕的可怕答案。请不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:48:41.613

您可以改用“FormatNumber”函数

# c - C中的'strcmp'字符数组

> ID：11501810
> 
> 赞同：-2
> 
> 时间：2012-07-16T09:44:23.590
> 
> 标签：c

```
...
main() {
   char **src_ip[10];
   char **dest_ip[10];
   char **lat[10];
   char *ip[20];

   while{
      //Read file
      //fgets();

      src_ip[j] = &data[0];
      dest_ip[j] = &data[1];
      lat[j] = &data[2];

      int idx;
      int addip;

      for(idx=0; idx<20; idx++)
      {
          addip = 0;
          //Check to see if the IP address is already in the array.
          if ((strcmp(*(src_ip[j]),  ip[idx]) == 0) ||
              (strcmp(*(dest_ip[j]), ip[idx]) == 0))
          {
              addip=1;
              break;
          }
          //If the IP address was already found then addip would equal 1.
          if (!addip){
              printf("new node: %s",*(ip[idx]));
          }
          else
              printf("Exist");
      }
   }
   j++;
} 
```

我想比较两个一维数组中的字符字符串 - 数组`src_ip[j]`和`dest_ip[j]`- 并插入到一个数组 ip[idx] 中。例如，当我查找 时`ip[1]`，它会转到`src_ip[1]`，这意味着它只引用一个数组 - `ip[idx]`- 而不是单独查找`src_ip`and `dest_ip`。

代码中一定有问题 - 也许我遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:50:55.327

```
if((strcmp(*(src_ip[j],ip[idx]) == 0) && (strcmp(*(dest_ip[j]),ip[idx]) == 0))
                     ^^ 
```

你不能同时拥有`*(src_ip[j])`和`*(dest_ip[j])`等于`ip[idx]`。您打算使用的是`||`运算符而不是`&&`. （顺便说一下，`)`我上面标记的地方有一个缺失）

另外你的`while(idx)`没有意义。你是用`for`上面的还是`while`下面的来控制循环？如果使用`while`, 则如果条件为真，您将获得一个无限循环，因为您永远不会在循环内更改它。

# javascript - 如何使用 jQuery 向属性添加值？

> ID：11501815
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:44:38.800
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何更改自定义属性的值](https://stackoverflow.com/questions/10166478/how-to-change-the-value-of-a-custom-attribute)

我有这样的输入字段：

```
<input type="text" size="40" locationcode="" userid="" id="inputQuery"> 
```

如何使用它的`id`and 选择元素并将值放在`userid`属性上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:47:00.363

您应该使用`data-`前缀来添加自定义属性，即

`data-userid="yourValue"`

所以在你的情况下，你应该像这样设置你的输入。

```
<input type="text" size="40" data-locationcode="" data-userid="" id="inputQuery" /> 
```

然后你可以使用：

```
$('#inputQuery').attr('data-userid', 'my_value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:27.033

你可以这样做：

*   设置值：

`$('#inputQuery').val('VALUE');`

*   获取值：

`$('#inputQuery').val();`

# wsdl - WSO2 更改了 wsdl 文件

> ID：11501828
> 
> 赞同：2
> 
> 时间：2012-07-16T09:45:35.417
> 
> 标签：wsdl, wso2

我的服务是从 wsdl 文件中挑选出来的。但是发布的服务 wso2 是 chenged。如果我希望 wso2 像我的 wsdl 文件一样发布。如何设置？例如，我的 wsdl 文件是：

```
<wsdl:service name="CoshipServiceImplService">
    <wsdl:port binding="tns:CoshipServiceImplServiceSoapBinding" name="CoshipServiceImplPort">
    <soap:address location="http://X.X.X.X:7843/sysway-boss-service/cxf/CoshipService" />
    </wsdl:port>
</wsdl:service> 
```

WSO2 发布如下：

```
<wsdl:portType name="CoshipServiceImplServicePortType"></wsdl:portType>
<wsdl:binding name="CoshipServiceImplServiceSoap11Binding" type="tns:CoshipServiceImplServicePortType">
</wsdl:binding><wsdl:binding name="CoshipServiceImplServiceSoap12Binding" type="tns:CoshipServiceImplServicePortType"></wsdl:binding>
<wsdl:binding name="CoshipServiceImplServiceHttpBinding" type="tns:CoshipServiceImplServicePortType"></wsdl:binding>
<wsdl:service name="CoshipServiceImplService"></wsdl:service>

It changed my port form "CoshipServiceImplPort" to "CoshipServiceImplServicePortType". 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:02:42.557

这可以通过在您的服务中将服务参数“useOriginalWsdl”设置为 true 来完成。

```
<parameter name="useOriginalwsdl">true</parameter> 
```

从 WSO2 App Server/ESB/DSS 您可以通过 UI 完成

*   转到管理控制台 UI。
*   导航到管理 → Web 服务 → 列表 → 服务仪表板。
*   从服务仪表板的“服务质量配置”选项中，选择“参数”选项并添加上述“useOriginalwsdl”服务参数。

# java - Java 正则表达式正斜杠导致不匹配

> ID：11501829
> 
> 赞同：1
> 
> 时间：2012-07-16T09:45:41.780
> 
> 标签：java, regex

例如，我们正在尝试在三个“s”之间的任何文本上进行匹配

"""这里有一些文字"""

我们想在这里捕获一些文本。我们可以正常工作，但是，当 "s 的三元组之间的文本包含正斜杠时，我们会遇到问题`/`。例如，""" 这不起作用"""，所以如果我们有；

""" 这不起作用""" """ 这里有一些文字 """

然后匹配继续并忽略第一个“””并继续匹配第二个结束“””所以匹配变为;

这不起作用/不起作用这里有一些文字

当我们想要的只是这不起作用/不起作用。我使用的正则表达式如下；

```
(?:"{3})([\p{Alnum}|\p{Punct}|\p{Space}]*)(?:"{3}) 
```

我们使用捕获组作为注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:48:54.280

似乎是贪婪/懒惰量词的问题。更改`*`为`*?`惰性匹配。

IE`(?:"{3})([\p{ALnum}|\p{Punct}|\p{Space}]*?)(?:"{3})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:49:01.673

这给出了预期的结果（在 rubular.com 中测试）：

正则表达式：`"""\s*([\S]+)\s+([\S]+)\s+([\S]+)\s*"""`
输入：`""" This doesn/'t work """ """ Some text here """`
匹配：`""" This doesn/'t work """`， `""" Some text here """`

匹配组：

```
Match 1
1\.  This
2\.  doesn/'t
3\.  work
Match 2
1\.  Some
2\.  text
3\.  here 
```

# django - 在 Django 中重置密码

> ID：11501837
> 
> 赞同：1
> 
> 时间：2012-07-16T09:46:16.100
> 
> 标签：django

我在 Django 中重置密码时遇到问题。看了这个：[重置密码](https://stackoverflow.com/questions/4790838/django-reset-password-confirm-templatesyntaxerror-problem)，这个错误仍然存​​在......我的错误是：

```
Reverse for 'django.contrib.auth.views.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb36': '1', 'token': '392-804fab6dcec790f0ec6b'}' not found. 
```

这是我的 urls.py：

```
 urlpatterns = patterns('lex.views',
    url(r'^home/forgotpassword', 'lexrequestpassword', name='lexrequestpassword'),
    url(r'^home/resetpassword', 'lexresetpassworddone', name='lexresetpassworddone'),
    url(r'^home/reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$', 'lexresetpasswordconfirmed', name='lexresetpasswordconfirmed'),
    url(r'^home/resetpasswordcompleted', 'lexresetpasswordcompleted', name='lexresetpasswordcompleted'),) 
```

我的意见.py：

```
@login_required    
def lexrequestpassword(request):
    """
    Reset Password
    """
    path = reverse('lexresetpassworddone')

    return password_reset(request,post_reset_redirect=path)

@login_required    
def lexresetpassworddone(request):
    """
    Reset Password Done
    """
    path = reverse('lexresetpasswordconfirmed')

    return password_reset_done(request,template_name=path)

@login_required    
def lexresetpasswordconfirmed(request):
    """
    Reset Password Confirmed
    """
    path = reverse('lexresetpasswordcompleted')

    return password_reset_confirm(request,post_reset_redirect=path)

@login_required    
def lexresetpasswordcompleted(request):
    """
    Reset Password Completed
    """
    path = reverse('lexmain')

    return password_reset_complete(request,post_reset_redirect=path) 
```

不知道如何解决这个问题。需要一些指导...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-30T11:37:47.127

密码重置 Django 有一个我们将要使用的内置密码重置功能。在本教程中，我们将我们的应用程序命名为帐户。

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

    admin.autodiscover()

    urlpatterns = patterns('',
        url(
            r'^admin/', 
            include(admin.site.urls)
        ),

        #this is the url for password reset authentication
        #Don't remove, this is important!
        url(
            r'^account/', 
            include('django.contrib.auth.urls')
        ),

        #this is the accounts app main url
        url(
            r'^accounts/', 
            include('accounts.urls', namespace="accounts")
        ),

    )+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

    urlpatterns += staticfiles_urlpatterns() 
```

**网址.py**

```
from django.conf.urls import *

urlpatterns = patterns('accounts.views',
   url(
       r'^forgot-password/$', 
       'forgot_password', 
       name="forgot-password"
   ),
) 
```

**视图.py**

```
from django.contrib.auth.views import password_reset
from django.shortcuts import render

def forgot_password(request):
    if request.method == 'POST':
        return password_reset(request, 
            from_email=request.POST.get('email'))
    else:
        return render(request, 'forgot_password.html') 
```

将你的 base.html 放在你的主模板文件夹中

**base.html**

```
<html>
<head>
    <title>{% block title %}{% endblock title %}</title>
</head>
<body>
    {% block content %}{% endblock content %}
</body>
</html> 
```

将此模板放在应用程序模板文件夹中。

**forgot_password.html**

```
{% extends "base.html" %}

{% block title %}Forgot Password{% endblock title %}

{% block content %}
<form method="post" action="{% url django.contrib.auth.views.password_reset %}">
    {% csrf_token %}
    <p>Please enter your email address. 
        You will receive a link to create a new password via email.</p>

    <input type="email" name="email" 
        placeholder="Your e-mail"><br/>

    <button type="submit">Send new password</button>
</form>
{% endblock content %} 
```

**设置.py**

```
#add email settings
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'user'
EMAIL_HOST_PASSWORD = 'password'
DEFAULT_FROM_EMAIL = 'your email' 
```

现在我们将覆盖管理员的密码重置模板。在您的主模板文件夹中创建注册文件夹。在注册文件夹中，创建这些文件：

如果要更改文件的内容。确保它是正确的，否则你会得到一个错误。

**password_reset_complete.html**

```
{% extends "base.html" %}

{% block title %}Password reset complete{% endblock title %}

{% block content %}
<h4>Reset Complete</h4> 
<p>Your password has been set. 
   You may go ahead and log in now.</p>
<a href="{% url accounts:login %}">Log in</a>
{% endblock content %} 
```

**password_reset_confirm.html**

```
{% extends "base.html" %}

{% block title %}Setting New password{% endblock title %}

{% block content %}
<h4>Set New Password</h4>

<form action="" method="post">
    {% csrf_token %}
    {% if validlink %}
        <p>Please enter your new password twice. 
           So we can verify you typed it in correctly.</p>

        <p>
            {{ form.new_password1.errors }}<br/>
            {{ form.new_password1 }}
        </p>

        <p class="button-height">
            {{ form.new_password2.errors }}<br/>
            {{ form.new_password2 }}
        </p>
    {% else %}
        <h4>Password reset unsuccessful</h4>
        <p>The password reset link was invalid, 
           possibly because it has already been used.
           Please request a new password reset.</p><br/>
    {% endif %}

    <button type="submit">Change my password</button>
</form>
{% endblock content %} 
```

**password_reset_done.html**

```
{% extends "base.html" %}

{% block title %}Password reset successful{% endblock title %}

{% block content %}
<h4>Reset Password</h4>
<p>We've e-mailed you instructions for setting 
   your password to the e-mail address you submitted.</p>
<p>You should be receiving it shortly.</p>
<p><a href="{% url accounts:login %}">Login</a></p>
{% endblock content %}  

#password_reset_ email.html
{% load i18n %}
{% load url from future %}
{% autoescape off %}

{% blocktrans %}
You're receiving this e-mail because you requested 
a password reset for your user account at {{ site_name }}.
{% endblocktrans %}

{% trans "Please go to the following page and choose a new password:" %}

{% block reset_link %}
{{ protocol }}://{{ domain }}{% url 'django.contrib.auth.views.password_reset_confirm' uidb36=uid token=token %}
{% endblock %}

{% trans "Your username, in case you've forgotten:" %} {{ user.username }}

{% trans "Thanks for using our site!" %}

{% blocktrans %}The {{ site_name }} team{% endblocktrans %}

{% endautoescape %} 
```

**password_reset_form.html**

```
{% extends "base.html" %}

{% block title %}Password reset form{% endblock title %}

{% block content %}
<h4>Reset Password</h4>

    <p>Forgotten your password? 
       Enter your e-mail address below, 
       and we'll e-mail instructions for setting a new one.</p>

    <form action="" method="post">
        {% csrf_token %}
        {% if form.email.errors %}`enter code here`
        <div class="message red-gradient">{{ form.email.errors }}</div><br/>
        {% endif %}

        <p>E-mail address: {{ form.email }} <br/><br/>
    <input type="submit" value="Reset my password"></p>
    </form>

{% endblock content %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:05:36.973

比您的 def lexresetpasswordconfirmed(request): 还应该接受 uidb36 和令牌参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T16:28:19.447

```
Reverse for 'django.contrib.auth.views.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb36': '1', 'token': '392-804fab6dcec790f0ec6b'}' not found. 
```

这意味着在执行的某个时刻，您*不是*在调用 reverse on `lexresetpasswordconfirmed`，而是在调用它 on `django.contrib.auth.views.password_reset_confirm`。

这个错误发生在哪里？在模板中？如果是这样，请确保您使用的模板具有

```
{% url lexresetpasswordconfirmed uid token %} 
```

并不是

```
{% url django.contrib.auth.views.password_reset_confirm uid token %} 
```

错误是否发生在视图中？如果是这样，您在某处调用 reverse on `django.contrib.auth.views.password_reset_confirm`。

一旦该错误得到解决，那么是的，您将不得不解决 Alexander 指出的另一个错误，即在视图函数中包含 uuid 和令牌：

```
@login_required    
def lexresetpasswordconfirmed(request, uuid36, token):
    """
    Reset Password Confirmed
    """
    # you need to do SOMETHING with the uuid and token here, RIGHT?!?!
    path = reverse('lexresetpasswordcompleted')

    return password_reset_confirm(request,post_reset_redirect=path) 
```

因此，我猜测您使用的视图中的每一个回报，对`django.contrib.auth`吗？问题是这些视图之一——可能`password_reset_done`——并不关心你是否为它提供了重定向，它正在使用它自己的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-07T20:47:00.330

我的设置.py：

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = os.environ.get('EMAIL_USER')
EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_PASS') 
```

我的 urls.py：

```
urlpatterns = [
    path('admin/', admin.site.urls),
    path('register/', user_views.register,name='register'),
    path('profile/', user_views.profile,name='profile'),
    path('login/', auth_views.LoginView.as_view(template_name='users/login.html'),name='login'),
    path('logout/',auth_views.LogoutView.as_view(template_name='users/logout.html'),name='logout'),
    path('password-reset/',auth_views.PasswordResetView.as_view(template_name='users/password_reset.html'),name='password_reset'),
    path('password-reset/done/',auth_views.PasswordResetDoneView.as_view(template_name='users/password_reset_done.html'),name='password_reset_done'),
    path('password-reset-confirm/<uidb64>/<token>/',auth_views.PasswordResetConfirmView.as_view(template_name='users/password_reset_confirm.html'),name='password_reset_confirm'),

    path('password-reset-complete/',
         auth_views.PasswordResetCompleteView.as_view(
             template_name='users/password_reset_complete.html'
         ),
         name='password_reset_complete'),
    path('', include('blog.urls')),
] 
```

密码重置.html：

```
 {% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="content-section">
        <form method="POST">
            {% csrf_token %}
            <fieldset class="form-group">
           <legend class="border-bottom mb-4">Reset Password</legend>
           {{ form|crispy }}
        </fieldset>
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit">Request Password Reset</button>
        </div>
     </form>
  </div>
{% endblock content %} 
```

密码重置完成：

```
 {% extends "blog/base.html" %}
{% block content %}
    <div class="alert alert-info">
        An email has been sent with instructions to reset your password
    </div>
{% endblock content %} 
```

密码重置确认.html：

```
 {% extends "blog/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="content-section">
        <form method="POST">
            {% csrf_token %}
            <fieldset class="form-group">
           <legend class="border-bottom mb-4">Reset Password</legend>
           {{ form|crispy }}
        </fieldset>
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit">Reset Password</button>
        </div>
     </form>
  </div>
{% endblock content %} 
```

password_reset_complete.html：

```
 {% extends "blog/base.html" %}
{% block content %}
    <div class="alert alert-info">
        Your password has been set.
    </div>
    <a href="{% url 'login' %}">Sign In Here</a>
{% endblock content %} 
```

# python - 面向过程编程中的函数生成过程

> ID：11501843
> 
> 赞同：0
> 
> 时间：2012-07-16T09:46:48.380
> 
> 标签：python, oop, function, rdf, triples

我问了一个[关于](https://stackoverflow.com/q/11453352/1465156)将一堆 RDF 三元组转换为多路数组表示的问题。我的解决方案看起来笨拙而且......丑陋。我尝试在我的解决方案中使用函数，但我发现这是不必要的，因为使用函数的优势并不明显。我想也许我的编程思想是面向过程的，而不是面向对象的。

这是我的解决方案：（这是没有任何功能的原始版本）

```
import numpy as np
from numpy import ones
from scipy.sparse import coo_matrix

s = []
p = []
o = []

# format of each line in 'test.txt' is (subject, predicate, object)
# extract sub, pre and obj in each line then stored in s, p, o, respectively.
for row in open('test.txt'):
    s.append(row.split('(')[1].split(',')[0])   
    p.append(row.split('(')[1].split(', ')[1])
    o.append(row.split(')')[0].split(', ')[2])

# create mapping from indexes to entities
l = s + o
mapping = { v:i for (i, v) in enumerate(sorted(set(l))) }    
mapping_p = { v:i for (i, v) in enumerate(sorted(set(p))) }

# get lists contain [indexes, entities] from initial lists s, p, o 
n_s = [ [mapping[v], v] for v in s ]
n_p = [ [mapping_p[v], v] for v in p ]
n_o = [ [mapping[v], v] for v in o ]

# create the coodinate of each list 
cood_s = []
cood_p = []
cood_o = []

# get the index of s[i], p[i], o[i] and stored in cood_s, cood_p, cood_o, respectively
for i in range(len(n_s)):
    cood_s.append(n_s[i][0])    
    cood_p.append(n_p[i][0])
    cood_o.append(n_o[i][0])
cood = zip(cood_s, cood_o, cood_p)
data = [ list(i) for i in cood ]
m = len(set(p))    # m is the number of predicates
data1 = []

# data1: a list contains ndarrays, each of which records the coodinate of the entity-to-entity matrix 
for i in range(m):    
    data2 = []   
    for j in range(len(data)):
        if data[j][2] == i: data2.append(data[j])
    data1.append(np.array(data2))

T = []    
n = len(set(l)) # n is the number of entities

# generates the coordinate matrix of each predicate as a ndarray then appends to T
for i in range(m):
    T.append( np.array(coo_matrix((ones(len(data1[i])), (data1[i][:, 0], data1[i][:, 1])), shape = (n, n)).todense() )) 
```

OK，希望你不会觉得无聊，那我用函数把一些语句连接起来，如下：

```
def split_data_matrix(filename):
    s = []
    p = []
    o = []
    l = []
    for row in open(filename):  
        s.append(row.split('"')[1])
        o.append(row.split('"')[3])
        p.append(row.split('(')[0])
    l = s + o
    return s, o, p, l
s, o, p, l = split_data_matrix('test.txt')

def generate_mapping(l, p):
    mapping = { v:i for (i, v) in enumerate(sorted(set(l))) }
    mapping_p = { v:i for (i, v) in enumerate(sorted(set(p))) }
    n_s = [ [mapping[v], v] for v in s ]
    n_p = [ [mapping_p[v], v] for v in p ]
    n_o = [ [mapping[v], v] for v in o ]
    return n_s, n_p, n_o
n_s, n_p, n_o = generate_mapping(l, p)

def generate_index(n_s, n_p, n_o):
    cood_s = []
    cood_p = []
    cood_o = []
    for i in range(len(n_s)):
        cood_s.append(n_s[i][0])
        cood_p.append(n_p[i][0])
        cood_o.append(n_o[i][0])
    cood = zip(cood_s, cood_o, cood_p)
    data = [ list(i) for i in cood ]
    return data
data = generate_index(n_s, n_p, n_o)

def generate_coordinate(data):
    data1 = []
    m = len(set(p))

    for i in range(m):
        data2 = []
        for j in range(len(data)):
            if data[j][2] == i: data2.append(data[j])
        data1.append(np.array(data2))
    return data1
data1 = generate_coordinate(data)

def generate_ndarrays(data1):
    T = []
    n = len(set(l))
    m = len(set(p))

    for i in range(m):
        T.append( np.array(coo_matrix((ones(len(data1[i])), (data1[i][:, 0], data1[i][:, 1])), shape = (n, n)).todense() ))
    return T
T = generate_ndarrays(data1) 
```

我的函数生成过程很简单：我只需将一些功能相似线连接在一起，然后在其上定义一个函数。我不太确定我的方式是否合理。有人可以告诉我如何处理吗？任何评论都将受到欢迎。

# java - dfa 使用开关

> ID：11501845
> 
> 赞同：0
> 
> 时间：2012-07-16T09:46:49.087
> 
> 标签：java, switch-statement

帮助先生，我正在尝试做一些简单的dfa，但它不能正常工作。我试图从包含 111、000,110 的文本文件中测试 3 行输入。我试图将它们分成 3 个令牌，但在测试时，程序仍然作为一个整体运行它。提前感谢您的帮助

```
 import java.util.*;
 import java.io.*;

 public class A
 {
 public static void main(String args[]) throws Exception
 {
    FileReader fileInput = new FileReader("B:\\input1.txt");
    BufferedReader readInput = new BufferedReader(fileInput);

    FileWriter fileOutput = new FileWriter("B:\\output.txt");
    PrintWriter outFile = new PrintWriter(fileOutput);

    Scanner scanLine = new Scanner(readInput);
    int cs = 0;
    final int q0 = 0;
    final int q1 = 1;

    int noOfLines = 0;

    while(scanLine.hasNextLine())
    {
        String[] tokens = scanLine.next().split("\n");

        for(String words : tokens)
        {
          outFile.println(words);
          char[] stringArray = words.toCharArray();

        for(char x : stringArray)
        {
            switch(cs)
            {
                case q0:
                    switch(x)
                    {
                        case '1':
                        cs = q1;
                        break;

                        case '0':
                        cs = q0;
                        break;

                        default:
                        outFile.println("error");
                        break;
                    }
                break;

                case q1:
                    switch(x)
                    {
                        case '1':
                        cs = q1;
                        break;

                        case '0':
                        cs = q1;
                        break;

                        default:
                        outFile.print("error");
                        break;
                    }
                break;

                default:
                break;
            }
        }//end for char array
        outFile.println();
        noOfLines++;
        if(cs == q1)
        {
        outFile.println("accepted");
        }
        else
        {
        outFile.println("rejected");
        }//end if else
        }//end for string array
    }//end while

    outFile.println();

    fileInput.close();
    readInput.close();
    outFile.close();
    fileOutput.close();
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:51:41.233

您的 cs 变量必须是 String Datatype 而不是 Integer，这似乎是一个错误。

这是一个例子。

```
public class StringSwitchDemo {

    public static int getMonthNumber(String month) {

        int monthNumber = 0;

        if (month == null) {
            return monthNumber;
        }

        switch (month.toLowerCase()) {
            case "january":
                monthNumber = 1;
                break;
            case "february":
                monthNumber = 2;
                break;
            case "march":
                monthNumber = 3;
                break;
            case "april":
                monthNumber = 4;
                break;
            case "may":
                monthNumber = 5;
                break;
            case "june":
                monthNumber = 6;
                break;
            case "july":
                monthNumber = 7;
                break;
            case "august":
                monthNumber = 8;
                break;
            case "september":
                monthNumber = 9;
                break;
            case "october":
                monthNumber = 10;
                break;
            case "november":
                monthNumber = 11;
                break;
            case "december":
                monthNumber = 12;
                break;
            default: 
                monthNumber = 0;
                break;
        }

        return monthNumber;
    }

    public static void main(String[] args) {

        String month = "August";

        int returnedMonthNumber =
            StringSwitchDemo.getMonthNumber(month);

        if (returnedMonthNumber == 0) {
            System.out.println("Invalid month");
        } else {
            System.out.println(returnedMonthNumber);
        }
    }
} 
```

# c++ - 如何在动态链接 Qt 的同时静态链接 MinGW 库？

> ID：11501853
> 
> 赞同：1
> 
> 时间：2012-07-16T09:47:31.013
> 
> 标签：c++, qt, dll, mingw, static-libraries

**简介**：我使用 MinGW、Qt、CMake。我需要在静态链接 MinGW 库的同时动态链接 Qt 库。

**详细**：我使用 gcc 选项“-static”。正如我在 gcc 手册页中所读到的，此选项可防止动态链接（同时此选项确实会影响动态链接的 libsndfile - 如何使用“-static”选项？好的...）。有人告诉我，由于法律问题，Qt 不允许在封闭源应用程序中静态链接它（但我不会更改 Qt 的代码），所以我对动态链接它很感兴趣（我已经编译了 2 个版本 - 静态、动态- 没问题）。但我想在动态链接 Qt 的同时静态链接 MinGW 库（以减少应用程序附带的 .DLL 文件的数量）。

**问**：如何提供选择性静态链接？

# java - 使用 java 反射 api 调用 selenium Web 驱动程序方法“findElement”时出现代码问题

> ID：11501856
> 
> 赞同：2
> 
> 时间：2012-07-16T09:47:39.427
> 
> 标签：java, reflection, selenium, automation, selenium-webdriver

我尝试使用 selenium Web 驱动程序来使用方法**findElement**获取 WebElement 。有效。但是当我尝试调用方法**findElement**和参数作为 By.name("") 以获取 WebElement 作为回报时，反射 api 出现了问题。在这里，以下几行可以提供有关问题的更多信息。

**Javaw 抛出异常**

> **java.lang.NoSuchMethodException: org.openqa.selenium.firefox.FirefoxDriver.findElement(org.openqa.selenium.By$ByName) at java.lang.Class.getMethod(未知来源)**

 ** * *

*尝试了一般方法（工作）*

```
 ```
WebDriver driver = new FirefoxDriver();
Method[] methods = driver.getClass().getMethods();
for(Method method:methods){
    System.out.println(method.getName());
}
driver.manage().window().maximize();
driver.get("http://www.facebook.com/");
By by = By.name("email");
WebElement element = driver.findElement(by); 
``` 
*使用Java反射api实现（通过以下代码发生异常）*

```
 ```
WebDriver driver = new FirefoxDriver();
Method[] methods = driver.getClass().getMethods();
for(Method method:methods){
    System.out.println(method.getName());
}
driver.manage().window().maximize();
driver.get("http://www.facebook.com/");
By by = By.name("email");
Class c = Class.forName(driver.getClass().getName());
Method getMethod = c.getMethod("findElement", new Class[]{by.getClass()});
getMethod.setAccessible(true);
WebElement element = (WebElement) getMethod.invoke(driver, by); 
``` 
请有人可以指导使用反射api完成代码工作
            回答 #1

赞同：0

时间：2012-07-16T21:38:49.377

真的没有`findElement(By$name)`（`By.name`是 abstract 的子类`By`）。因此，您必须调用：

```
Method getMethod = c.getMethod("findElement", new Class[] { by.getClass().getSuperclass() }); 
```

或者

```
Method getMethod = c.getMethod("findElement", new Class[] { By.class }); 
```

另外，您代码中方法的调用是错误的，您需要将其更改为

```
WebElement element = (WebElement)getMethod.invoke(driver, by); 
```

因为第一个参数是应该运行该方法的对象。

```

```*

# google-maps - 如何在 iPhone 上更改谷歌地图的自定义地址信息气泡？

> ID：11501857
> 
> 赞同：2
> 
> 时间：2012-07-16T09:47:44.420
> 
> 标签：google-maps, infowindow

我正在尝试自定义谷歌地图信息窗口（或地址气泡）。
问题：如何更改人的形象和地址信息（如果可能）？
我想用我的图标代替人的形象，用“SMART”（或任何公司名称）代替“130 River St”。（似乎这个气泡只出现在 iPhone 上，我没有在 Android 上看到。）
我通过这个 url 显示地图：[http](http://www.google.com/maps?q=boston)
://www.google.com/maps?q= boston 谢谢
![谷歌地图的自定义地址信息气泡](../Images/0868e86a278bc1b04ace5d251a2f39d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:30:34.903

如果没有一些代码片段，很难提出建议，但假设你是编写信息窗口代码的人，那么它非常简单，就像这样

```
var infowindow = new google.maps.InfoWindow({
content: contentString
}); 
```

其中 contentString 是您要以 HTML 格式显示的部分，例如

```
var contentString = '<div id="content">Hello</div>'; 
```

您可以随时添加图像和任何其他图像。只要它可以在 HTML 页面中显示，就可以在 infoWindow 中显示。

关于只能在 iPhone 浏览器中查看的 infoWindow，我猜它是这样写的，无论是通过浏览器检测还是 JQuery 的最新功能检测功能。

希望这可以帮助。

# python - 将股票代码列表转换为 Python 中的列表

> ID：11501859
> 
> 赞同：0
> 
> 时间：2012-07-16T09:47:46.497
> 
> 标签：python, list, text-files, spaces, stocks

我需要将股票代码列表：T GOOG KO PEP 作为文本文件中的示例转换为 python 列表：['T','GOOG','KO',PEP']。但是，我正在使用的当前代码在每个符号产生后不断添加一个空格： ['T ','GOOG ','KO ',PEP '] 代替。我怎样才能得到没有空格的代码？

```
stocks = open('C:\Model\Stocks\official.txt', 'r').read()
print stocks.split('\n') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:55:13.633

我建议使用 strip 函数，它映射结果：

```
>>> a = ["A ", "B ", "C "]
>>> a
['A ', 'B ', 'C ']
>>> a = map(lambda x: x.strip(), a)
>>> a
['A', 'B', 'C'] 
```

在您的示例中：

```
a = stocks.split('\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:00:15.260

干得好。

```
stocks = open('C:\Model\Stocks\official.txt', 'r').read()
lstStripped =  [x.strip() for x in stocks.split('\n')]
print lstStripped 
```

# excel - 用于验证名称字段的正则表达式模式

> ID：11501860
> 
> 赞同：0
> 
> 时间：2012-07-16T09:47:47.057
> 
> 标签：excel, vba

我对验证输入字段有以下要求：

*   它应该只包含字母字符和空格。
*   它不能在字符串的开头或结尾包含空格。
*   它不能包含任何其他特殊字符。

例如，表达式应接受以下字符串`"my name is wish"`。

我正在使用的正则表达式是：

```
RegExp.Pattern = "^[\a-zA-Z]*[\s]*[\a-zA-Z]*[\s]*[\a-zA-Z]*$" 
```

当我输入名称为“abc abc abc6”时，它认为它是有效的。由于输入了数字，它应该会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:06:59.297

试试这个模式

```
^[a-zA-Z]+(?:\s+[a-zA-Z]+)*$ 
```

图案说明：

```
^          Start of string  
[a-zA-Z]   Any character in the class a to z or A to Z  
+          One or more repititions  
(?:   )    Match expresion but don't capture
\s+        Whitespace, One or more repititions  
*          Zero or more repititions  
$          End of string 
```

# regex - Perl如何找到捕获的位置

> ID：11501866
> 
> 赞同：1
> 
> 时间：2012-07-16T09:47:53.813
> 
> 标签：regex, perl

我有一个这样的空格分隔文件：

```
 First        Second        Third       Forth
 It               is        possible    to   
 do             this                    task
 with          regex        but         i
 don't          know        how         to 
```

我的任务是捕获每一行的所有单词并从中构造一个哈希。

但这是我的问题：任何列中的字段都可能为空（例如，第 3 行、第 3 字段）。

每行中的单词在其开头或结尾处按列名称对齐。（列名是第一行中的单词，例如`First Second Third Forth`）

在我的示例中，单词在列中对齐到左侧（或列名的开头），并在`First Third Forth`列中对齐到右侧（或列名的末尾）`Second`

使用每行的哈希值，我必须创建如下格式的输出：

`$hash{First} has Second-property $hash{Second}. It also has $hash{Third} and $hash{Forth}.`

```
use File::Basename;
use locale;
open my $file, "<", $ARGV[0];
open my $file2,">>",fileparse($ARGV[0])."2.txt";
my @alls = <$file>;

sub Main{
my $first = shift @alls;
my $poses = First_And_Last($first);
my $curr_poses;
my $curr_hash;
#do{OutputLine($_->[0],$_->[1],$first)}for (@$poses);
my $result_array=[];
my @keys = qw(# Variable Type Len Format Informat Label);
for $word(@alls){
    $curr_poses=First_And_Last($word);
    undef ($curr_hash);
    $curr_hash = Take_Words($poses, $word, $curr_poses);
    push @{$result_array},$curr_hash; #AoH  
    }

#end of main
}

sub First_And_Last{
    #First_And_Last($str)
    my $str = shift;    
    my $begin;
    my $end;
    my $ref=[];
    while ($str=~m/(([\S\.]\s?)+\b|#)/g){       
        $begin = pos($str) - length($1);
        $end = pos($str);       
        push @{$ref},[$begin,$end];
        }               
    return $ref;
    }

sub Take_Words{
    #Take_Words($poses, $line,$current) 
    my $outref = {};
    my $ref = shift; #take the ref of offsets of words
    my $line = shift;# and the next line in file
    my $current = shift; # and this is the poses of current line
    my @keys = qw(# Variable Type Len Format Informat Label);
    do{$outref->{$_}=undef;}for(@keys);
    my $ethalon; #for $ref
    my $relativity; #for $current
    my $key; #for key in $outref
    my @ethalon = @{$ref};

    $ethalon = shift @ethalon;
    $relativity = shift @{$current};
    $key = shift @keys;

    while (defined($key) && defined($relativity)){
        if ($ethalon->[0] == $relativity->[0] || $ethalon->[1] == $relativity->[1]){    
                $outref->{$key} = substr($line, $relativity->[0],$relativity->[1] - $relativity->[0]);          

                $relativity = shift @{$current};
            }
            $ethalon = shift @ethalon;
            $key = shift @keys;         
        }

    return $outref;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:35:46.310

这是我的算法，但它有点 C-ish：

1.  确定每个列标题的起始位置并存储。

2.  对于每一列：转到标题的起始位置。

3.  向左走，直到经过两个连续的空格。

4.  向右走两个字符，然后记住位置。

5.  向右走，直到您通过两个连续的空间。

6.  向左走两个字符，然后记住位置。

7.  提取找到的边界之间的所有内容。

8.  删除开头和结尾的空格。

9.  存储在您的哈希中

10.  从第 2 步开始重复

现在我们必须看看那个实现：

第1步：

```
my @starting;
{
  my @char = split m{}, <$file>; # split the first line into char array
  my $spacecount = 0;
  my $state = 1; # 1 : find start -- 0 : find end
  for (my $i = 0; $i < @char; $i++) {
    if ($state) { # find next non-space
      if ($char[$i] =~ /\s/) {
        next;
      } else {
        $state = not $state; # flip
        $spacecount = 0;
        push @starting, $i;
        next;
      }
    } else {
      if ($char[$i] =~ /\s/) {
        $spacecount++;
        if ($spacecount >= 2) {
          $state = not $state; # flip
          next;
        }
      } else {
        $spacecount = 0; # reset consecutive space counter
        next;
      }
    }
  }
} 
```

# python - 从python中的子文件夹层次结构导入

> ID：11501870
> 
> 赞同：6
> 
> 时间：2012-07-16T09:48:21.513
> 
> 标签：python, import, python-2.7, subdirectory

我正在尝试从 test_file 层次结构中导入指定的模块

就像是 ：

```
test_case1.py
test_subsuite_2
test_sub_2.1.1.py
test_suite2 
```

是否可以在此层次结构上进行运行导入

```
/project/main.py
/project/test_files 
```

test_files 文件夹层次结构是这样的：

```
test_files
    test_suite1
        test_case1.py
        test_subsuite_1
            test_sub1_1.py
            test_sub1_2.py
        test_subsuite_2
            test_subsuite_2_1
                test_sub_2.1.1.py
            test_sub2_1.py
            test_sub3_2.py

    test_suite2
        test_case2.py
        test_subsuite2_1
            test_sub21_1.py
            test_sub21_2.py
        test_subsuite2_2
            test_sub22_1.py
            test_sub23_2.py 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:52:28.113

`__init__.py`在所有文件夹中创建一个名为的空文件。`.`然后您可以使用作为文件夹分隔符导入。[文档在这里。](http://docs.python.org/tutorial/modules.html#packages)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-13T20:14:40.267

关键是在包含您要导入的文件的*所有*`__init__.py`子文件夹上创建一个空白文件。在您的情况下，您必须在以下所有文件夹中创建文件 -*`__init__.py`*

 **   测试文件
*   测试文件\测试套件1
*   test_files\test_suite1\test_subsuite_2
*   test_files\test_suite1\test_subsuite_2\test_subsuite_2_1

此外，当您导入文件时，请注意正确指定导入路径，指定最顶层的整个路径，并使用 a 分隔不同的文件夹级别`.`
。例如，您必须通过指定导入 test_case1：

`from test_files.test_suite1 import test_case1`

同样，`test_subsuite_2`可以通过指定导入：

`from test_files.test_suite1 import test_subsuite_2`*

# java - 线程等待和唤醒

> ID：11501871
> 
> 赞同：0
> 
> 时间：2012-07-16T09:48:28.413
> 
> 标签：java, multithreading, locking, wait, wakeup

我正在尝试使用多线程模拟一个简单的恒温器。恒温器应提高温度以达到用户要求的值，即下面代码中的“最大值”值。我有两个线程，一个负责提高温度，另一个负责降低温度。但减少的条件是它应该只在气体关闭时运行。但我在实施这个概念时遇到了问题。当下面的代码运行时，第二个线程不断抛出 null 异常！

```
<pre><code>`private void formWindowActivated(java.awt.event.WindowEvent evt) {                                     
systemInitial();

Thread temperatureUp = new Thread() 
{
    @Override
    public void run()
    {
    while(true)
    {
        Max = Integer.parseInt(lblDesiredTemp.getText());
        Current = Integer.parseInt(lblCurrentTemp.getText());

            try
            {
                if(Max>Current)
                {
                    lblGasStatus.setText("On");
                    lblTemperatureSensor.setText("increasing");
                    increaseTemeture();
                }
                else
                {
                    lblGasStatus.setText("Off");
                    if(Current != 0)
                        lblTemperatureSensor.setText("decreasing");
                    else
                        lblTemperatureSensor.setText("----");
                }
            }
            catch(Exception ex)
            {
                txtLog.setText(ex.getMessage() + "\n" + txtLog.getText() );
            }
    }
    }
};

Thread systemUpdater = new Thread() 
{
    @Override
    public void run()
    {
    while(true)
    {
        try
        {
            notifyGasBoiler(this);

            if(Current>0)
                decreaseTemeture();
        }
        catch(Exception ex)
        {
            txtLog.setText(ex.getMessage() + "\n" + txtLog.getText() );
        }
    }
    }
};

    temperatureUp.start();
    systemUpdater.start();

}                                    

private synchronized void notifyGasBoiler(Thread gasOff) throws InterruptedException 
{
    try
    {
        if("On".equals(lblGasStatus.getText()))
        {
            gasOff.wait();
            txtLog.setText(txtLog.getText() + "\n" + gasOff.getName() + " waits.");
        }
        else
            notifyAll();
    }
    catch (Exception ex)
    {
        txtLog.setText(ex.getMessage() + "\n" + txtLog.getText() );
    }
}` 
```

我在这里想念什么？

更新我：

这是我通过运行系统并请求 2 温度得到的日志：

温度增加到 1 温度增加到 2 null null null ....

更新二：

我将 printStackTrace 用于异常，它让我得到了这个：

`java.lang.IllegalMonitorStateException at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at sol.smarthome.GUI.notifyGasBoiler(GUI.java:300) at sol.smarthome.GUI.access$900(GUI.java:14) at sol.smarthome.GUI$5.run(GUI.java:276)`

* * *

更新三

```
<pre><code>`private void btnUpActionPerformed(java.awt.event.ActionEvent evt) {                                      
    if(Max<=8)
    {
        Max++;
        String strI = String.valueOf(Max);
        lblDesiredTemp.setText(strI);
        setGasBoilerStatus();
    }
}                                     

private void btnDownActionPerformed(java.awt.event.ActionEvent evt) {                                        
    if(Max>0)
    {
        Max--;
        String strI = String.valueOf(Max);
        lblDesiredTemp.setText(strI);
        setGasBoilerStatus();
    }
}                                       

private void formWindowActivated(java.awt.event.WindowEvent evt) {                                     
systemInitial();

tempUp = new temperatureUp();
tempDown = new temperatureDown();

tempUp.start();
tempDown.start();
}                                    

private synchronized void increaseTemeture() throws InterruptedException
{
    synchronized (monitor) {
    if (!getBoilerStatus()) 
    {
        tempUp.wait();
        //return;
    }
    else
    {

    Max = Integer.parseInt(lblDesiredTemp.getText());
    Current = Integer.parseInt(lblCurrentTemp.getText());

    if(Max>Current)
    {
        lblGasStatus.setText("On");
        lblTemperatureSensor.setText("increasing");
        Thread.sleep(4000);
        Current ++;
        lblPumpStatus.setText("On");
        lblCurrentTemp.setText(String.valueOf(Current));
        txtLog.setText("Temperature increased to " + Current + "\n"+ txtLog.getText());
        if(Current>8)
            lblDanger.setVisible(true);
    }

    setGasBoilerStatus();

    if(!isGasOn)
    {
    try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
            //Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
        }
        lblGasStatus.setText("Off");
        if(Current != 0)
            lblTemperatureSensor.setText("decreasing");
        else
            lblTemperatureSensor.setText("----");
    }
    }
    }

}

private synchronized void decreaseTemeture() throws InterruptedException
{
    synchronized (monitor) {
    if(getBoilerStatus())    
    {
        tempDown.wait();
        //return;
    }
    else
    {
    Thread.sleep(4000);
    if(Current == 0 )
        return;

    Current --;
    lblCurrentTemp.setText(String.valueOf(Current));
    lblDanger.setVisible(false);
    txtLog.setText("Temperature decreased to " + Current + "\n"+ txtLog.getText());
    if(Current<1)
        lblPumpStatus.setText("Off");
    else
        lblPumpStatus.setText("On");

    setGasBoilerStatus();
    }
    }
}

private void systemInitial()
{
    lblDanger.setVisible(false);
    isPilotOn.setSelected(true);
    lblGasStatus.setText("Off");
    lblPumpStatus.setText("Off");
    isDone = true;
    isGasOn = false;
    Max = Current = 0;
}

// indicates if the boiler is on (true) or off (false)
// set as volatile to stop caching
private volatile boolean isBoilerOn = false;
protected int Max, Current;
protected boolean isDone, isGasOn, isPumpOn;
private temperatureUp tempUp;
private temperatureDown tempDown;

// Used to synchronize thread access to internal state (Current and 
// isBoilerOn member variables. The monitor is private in order
// for this class to encapsulate its synchronization policy.
private final Object monitor = new Object();

// update the bolier's status to on (true) or off (false)
public void setBoilerSatus(boolean status) {
    synchronized (monitor) {
        //  block threads until boiler is switched on
            this.isBoilerOn = status;
        // (see below), this is the place to notify them...
        notifyAll();
    }
}

// returns true if the boiler is on, false otherwise
public synchronized boolean getBoilerStatus() {
    synchronized (monitor) {
        return this.isBoilerOn;           
    }
}

private void setGasBoilerStatus() {
    synchronized (monitor) {
    if(Max>Current)
        setBoilerSatus(true);
    else
        setBoilerSatus(false);
    }
}

class temperatureUp extends Thread 
{
    @Override
    public void run()
    {
    while(true)
    {
            try
            {
                increaseTemeture();                    
            }
            catch(Exception ex)
            {
                StringWriter w = new StringWriter();
                ex.printStackTrace(new PrintWriter(w));
                //txtLog.setText(w + "\n" + txtLog.getText());
            }
    }
    }
};

class temperatureDown extends Thread
{
    @Override
    public void run() 
    {
        while(true)
        {
            try
            {
                decreaseTemeture();                    
            }
            catch(Exception ex)
            {
                StringWriter w = new StringWriter();
                ex.printStackTrace(new PrintWriter(w));
                //txtLog.setText(w + "\n" + txtLog.getText());
            }
        }
    }
};
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:00:22.230

尝试创建一个类 Thermostat 来封装恒温器的状态和行为。诀窍是使用适当的同步来维护程序的不变量。**出于说明目的**，您可以在下面找到基于您的需求描述的 Thermostat 类的**示例**实现。请注意如何使用同步来保留您的不变量。任何方法（例如都影响当前温度的 up(int) 和 down(int)）可以由不同的线程同时调用，而不会因同步而发生争用事件或相关危险。

 **同样，这仅用于说明目的：

```
public final class Thermostat {

    // constant for maximum allowable temperature
    public static final int MAX_TEMP = 100;

    // the thermostat's current temperature
    private int temp = 0;

    // indicates if the boiler is on (true) or off (false)
    private boolean boilerStatus = false;

    public Thermostat() {

    }

    // Used to synchronize thread access to internal state (temp and 
    // boilerStatus member variables. The monitor is private in order
    // for this class to encapsulate its synchronization policy.
    private final Object monitor = new Object();

    // update the bolier's status to on (true) or off (false)
    public void setBoilerOn(boolean status) {
        synchronized (monitor) {
            this.boilerStatus = status;
                    // if you block threads until boiler is switched on
                    // (see below), this is the place to notify them...         
        }
    }

    // returns true if the boiler is on, false otherwise
    public boolean isBoilerOn() {
        synchronized (monitor) {
            return this.boilerStatus;           
        }
    }

    // increase the thermostat's temperature by the specified units
    // provided that the boiler has been set on
    public void up(int units) {
        synchronized (monitor) {

            // don't increase the temperature if the boiler 
            // is not turned on...
            if (!isBoilerOn()) {
                            // you could alternatively wait here if your
                            // thread needs to block...
                return;
            }

            // increase the temperature 
            if ((temp + units) <= MAX_TEMP) {
                temp += units;                          
            } else {
                // TODO : handle incorect user input here...
            }
        }
    }

    // decrease the thermostat's temperature by the specified units
    // (negative values allowed)
    public void down(int units) {
        synchronized (monitor) {
            temp -= units;          
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:56:10.337

尝试使用`Full class name (dot) this`

例如：

```
notifyGasBoiler(MyTempClass.this); 
```**

# php - 使用 AJAX 时页面卡住

> ID：11501880
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:48:53.907
> 
> 标签：php, javascript, ajax

我正在使用 AJAX 来呈现计算结果。我调用一个返回结果的 PHP 文件，然后将其呈现在网页上。

有时计算需要很长时间，页面会卡住，直到 AJAX 调用返回结果。

有没有办法使用 ajax，并且仍然能够在网页上执行其他操作，而不必等到 AJAX 调用返回。

我正在使用这个 AJAX 调用函数（我知道的标准函数）。

```
function GetCalculation(str)
{
    var result ;
    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {        
            result = xmlhttp.responseText ;             
        }
    }

    xmlhttp.open("GET","GetRouts.php?q="+str,false);
    xmlhttp.send();
    result = xmlhttp.responseText ;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:52:10.090

如果您需要您的 javascript 处理您需要等待回调的请求发送的数据，那么 Ajax 是异步的。如果您不需要处理请求中的数据（例如动画等），您可以在此函数之外编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:52:33.543

Yes, just pass `true` as the third parameter to `open`, then process the result in the `onreadystatechange` event instead.

# javascript - WWW::Mechanize 使用 Javascript 工作

> ID：11501883
> 
> 赞同：2
> 
> 时间：2012-07-16T09:49:00.860
> 
> 标签：javascript, perl, web, mechanize

我用于`WWW::Mechanize`Perl 中的站点提取应用程序。在某些网站使用 Javascript 时，我也面临同样的问题。在我的真实应用程序中有一个`<a>`标签。`<a>`调用 Javascript的 click 函数。

我有这个：

```
<a class="hLinkStyle16"
  onclick="return !checkIfSubmittedForm()"
  href="javascript:Litelogon()">Login with passwords
</a> 
```

通过使用`WWW::Mechanize`我们不能使用`follow_link()`吗？听说`WWW::mechanize`不支持Javascript。我尝试使用`WWW::Mechanize::Firefox`. 在上述情况下，我不知道如何处理 Javascript。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:02:31.623

使用 W::M::F，您不处理 JS，浏览器处理。调用[`follow_link`方法](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFirefox#mech-follow_link-link-)。

# php - 选择变量并存储到多维数组中

> ID：11501889
> 
> 赞同：1
> 
> 时间：2012-07-16T09:49:29.210
> 
> 标签：php, arrays

我了解多维数组的工作原理，但我是新手。

例如。

```
$arrayAns = array( subject => "he"),
            array( subject => "I"),
            array( subject => "they"); 
```

我想做的是，从数据库中获取一个变量并将其存储在数组中。

```
$query = "SELECT subject FROM #__wordBank ORDER BY RAND() LIMIT 1";
        $db->setQuery($query);
        $rows=$db->loadObjectList();

$arrayAns = array( subject => "$rows") 
```

这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:57:00.307

根据您使用的 DB API，您可以选择自动将数据检索为多维数组。检查 $rows->toArray() 是否可能或类似的东西。

否则不是最佳的，但简单而干净的方法是遍历您的 $rows 列表并构建您想要的数组。

顺便说一句，您在顶部定义的数组在 PHP 中是这样定义的：

```
$myArray = array(
    array(
        'subject' => 'he'
    ),
    array(
        'subject' => 'I'
    ),
    array(
        'subject' => 'they'
    )   
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:54:16.257

试试这个：如果来自数据库的结果存储在`rows`：

```
$newArray = array();
foreach($rows as $key=>$value) {
 $newArray[] = $value;
} 
```

在这里，所有变量`$value`都将存储到`newArray`.

另请参阅[array_push](http://php.net/manual/en/function.array-push.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:54:43.433

改变你的语法看起来像这样（你也有[一些语法错误](https://stackoverflow.com/questions/11501889/selecting-variable-and-storing-into-multi-dimentional-array#comment15195551_11501889)） -

```
// original multidimensional array
$arrayAns = array(
  array( "subject" => "he"),
  array( "subject" => "I"),
  array( "subject" => "they")
);

// execute query
$query = "SELECT subject FROM #__wordBank ORDER BY RAND() LIMIT 1";
$db->setQuery($query);
$rows=$db->loadObjectList(); 
```

现在我们要做的是向原始数组添加另一个元素。您可以使用简写`[]`语法将另一个元素推到数组的顶部。

```
$arrayAns[] = array('subject'=> $rows['subject']); 
```

该行在功能上与该行相同-

```
array_push($arrayAns, array('subject'=> $rows['subject'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T09:55:08.520

几乎！但并不完全

以下是我将如何解决这个问题：

```
$arrayAns = array(
    array('subject' => "he"),
    array('subject' => "I"),
    array('subject' => "they")
);

$query = "SELECT subject FROM #__wordBank ORDER BY RAND() LIMIT 1";
$db->setQuery($query);
$rows=$db->loadObjectList();

$arrayAns[] = array('subject' => $rows); 
```

# mysql - 多次加入

> ID：11501890
> 
> 赞同：0
> 
> 时间：2012-07-16T09:49:29.593
> 
> 标签：mysql, sql, join

我有一个带有 fields 的表`id_osztaly`，`id_csoportositas`并且`name`（以及其他一些字段，但不重要）。

我想创建一个具有以下结果的查询：我想组合这些`name`字段。我无法解释，所以我举一个例子：表中的数据（`id_osztaly`和`id_csoportositas`顺序`name`）：

```
1,1,Group1A
1,1,Group1B
1,2,Group2A
1,2,Group2B 
```

我想要以下组合`name`：

```
Group1A-Group2A
Group1A-Group2B
Group1B-Group2A
Group1B-Group2B 
```

（类似于排列）。我可以用 a 来做到这一点`JOIN`，没关系。但是当我三个不同的值时`id_csoportositas`：

```
1,1,Group1A
1,1,Group1B
1,2,Group2A
1,2,Group2B
1,3,Group3A
1,3,Group3B
1,3,Group3C 
```

我想：

```
Group1A-Group2A-Group3A
Group1A-Group2A-Group3B
Group1A-Group2A-Group3C
Group1A-Group2B-Group3A
Group1A-Group2B-Group3B
Group1A-Group2B-Group3C
Group1B-Group2A-Group3A
Group1B-Group2A-Group3B
Group1B-Group2A-Group3C
Group1B-Group2B-Group3A
Group1B-Group2B-Group3B
Group1B-Group2B-Group3C 
```

是的，它是双重连接。但我不知道表中有多少不同`id_csoportositas`。第一个 blick 我认为我需要与`JOIN`不同的数量相同的数量`id_csoportositas`。

(my)sql 中是否有任何技巧可以做到这一点，或者我应该`PHP`使用`for`-cycle 来做到这一点？

**编辑**也许我不清楚。我知道我怎么能`JOIN`同一张桌子两次或三次。如果我有两个不同的`id_csoportositas`，我只需要一个`JOIN`。如果我有三个不同的`id_csoportositas`，我需要两个`JOIN`- 我也可以这样做。但我不知道存在多少不同`id_csoportositas`，所以我不知道需要多少`JOIN`。s的数量`JOIN`取决于不同的数量`id_csoportositas`，我不知道`id_csoportositas`没有查询的数量。

而且我要分组`id_osztaly`，不同`id_osztaly`有不同`id_csoportositas`。

我希望现在很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:55:25.440

不会像这样工作：

```
SELECT * FROM
(
    (SELECT * FROM table WHERE something = 1) a,
    (SELECT * FROM table WHERE something = 2) b,
    (SELECT * FROM table WHERE something = 3) c
) 
```

您只需像这样选择，它将提供连接的所有可能变化:)

# javascript - 在 webresource Javascript CRM 2011 中更改字符串字体大小

> ID：11501892
> 
> 赞同：0
> 
> 时间：2012-07-16T09:49:37.727
> 
> 标签：javascript, crm, font-size

我正在尝试下一步，但我不知道是否有可能开发：

我有两个字符串，例如；

```
var str1 = "Hello"; var str2 = "world"; 
```

我改变了这样一封电子邮件的描述：

```
Name.SetValue(str1.concat(str2)); 
```

我需要`str2`的字体大小比`str1`. 我试过`style.fontsize, str2.fontSize(7)`..但没有工作..

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:15:01.483

这是我的代码：

```
var html = '<FONT size=1 face="Tahoma"> <P><FONT size=2><P><br></br>Hello</P><P>World</P>  </FONT><P>Hello 2<P/>\"World\"</P></FONT>';

Xrm.Page.getAttribute("description").setValue(html.toString()); 
```

注意：第二个字符串世界写在“”里面

# c# - 为什么这个 LINQ 会抛出 NullReferenceException？

> ID：11501897
> 
> 赞同：2
> 
> 时间：2012-07-16T09:49:55.133
> 
> 标签：c#, .net, xml, linq

```
private SmtpClient getServer()
        {
            return (from e in doc.Elements("emailsetting")
                    select new SmtpClient()
                    {
                        Host = e.Attribute("server").Value,
                        Port = Convert.ToInt32(e.Attribute("port").Value)
                    }).FirstOrDefault();
        } 
```

xml配置文件：

```
 <emailsetting>
    <stmp server="10.182.182.182" port="25" />
    <from address="ithelpdest@citics.com.hk"/>
    <to address=""/>
    <cc address=""/>
  </emailsetting> 
```

为什么会抛出异常：NullReferenceException 是未处理的对象引用未设置为对象的实例。

我是 LINQ 的新手，请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:51:23.410

您仅访问`emailsetting`没有名为`server`or的属性的元素`port`。
您需要从`smtp`子元素中获取属性。

试试这个：

```
return (from e in doc.Elements("emailsetting")
        let smtp = e.Element("smtp")
        select new SmtpClient()
        {
            Host = smtp.Attribute("server").Value,
            Port = Convert.ToInt32(smtp.Attribute("port").Value)
        }).FirstOrDefault(); 
```

# c++ - C++ 指针使用多少内存？

> ID：11501899
> 
> 赞同：16
> 
> 时间：2012-07-16T09:50:01.027
> 
> 标签：c++, pointers

我正在做出（可能是错误的）假设，即它依赖于实现和/或系统。是否有类似 INT_MAX 或 CHAR_BIT 的东西可以告诉我内存中指针的大小？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-16T09:51:35.023

指针指向内存中的一个位置，因此在 32 位系统上它是 32 位，在 64 位系统上是 64 位。

指针大小也与它指向的类型无关，可以通过以下方式测量`sizeof(anyType*)`

***UPD***

我回答这个问题的方式是由提出问题的方式提出的（提出了一个简单的答案）。是的，我同意在像指向虚方法表的指针这样的情况下，指针的大小会有所不同，根据[这篇文章](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)，它会在不同的平台上，甚至在同一平台内的不同编译器上有所不同。就我而言，例如 (x64 ubuntu, GCC 4.6.3) 它等于 16 个字节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T09:51:03.580

会`sizeof(int*)`工作吗？或者你要检查的任何东西？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:47:10.633

它绝对取决于系统。通常一个简单的数据指针可以存储在一个 size_t 变量中。在 C++11 中有一个[SIZE_MAX](http://en.cppreference.com/w/cpp/types/climits)宏，它是 size_t 的最大值。在 C++11 中，您还可以使用[std::intptr_t](http://en.cppreference.com/w/cpp/types/integer)。

如果您考虑成员函数指针，事情会变得更加复杂。这取决于类是否从一个或多个父类继承，是否公开虚函数，当然还取决于实现。

[在这里](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)，您可以找到有关成员函数指针的详细文章，以及一些编译器的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T10:53:04.100

简单案例的答案很简单`int*`，并且在其他答案中给出。

但请记住，使用多重继承的对象的指针成员可能包含多个（WORDs/DWORDs/QWORDs），在最坏的情况下最多为 5（五个）。

关于这个的好文章：http: [//www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T09:56:59.433

指针的大小取决于您的操作系统（实际上是操作系统的位数），请尝试 sizeof(type*) 函数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-15T15:06:12.030

```
#include<stdio.h>
#include<conio.h>
void main()
{
    printf(" %d",sizeof(int *));
    printf(" %d",sizeof(char *));
    printf(" %d",sizeof(float *));
    printf(" %d",sizeof(double *));
    getch();
} 
```

# css - 如何以编程方式取消组合 CSS 选择器？

> ID：11501900
> 
> 赞同：2
> 
> 时间：2012-07-16T09:50:01.783
> 
> 标签：css, vim, css-selectors

我想要一个意大利面条 CSS 文件的未分组选择器视图。这意味着将每个分组的选择器分成自己的行并复制规则集。事实证明，基于 csstidy 或其他自定义在线格式化程序似乎都没有提供此功能。也许这里有人知道隐藏的命令行工具 gem 或 vim 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:07:40.467

[csstidy](http://csstidy.sourceforge.net/usage.php)可以用`--merge_selectors=1`.

这个基于 csstidy 的在线格式化程序公开了功能： http: [//www.codebeautifier.com/](http://www.codebeautifier.com/)

将“重新组合选择器”设置为“仅单独的选择器（在 , 处拆分）”。

# methods - Sage Accpac Ireport 方法失败

> ID：11501903
> 
> 赞同：0
> 
> 时间：2012-07-16T09:50:14.390
> 
> 标签：methods, accpac

我们公司开发了一个宏，用于将文件导出为 Excel 格式，然后将这些值插入到*Sage ACCPAC Payroll*模块中。由于某种原因，代码已停止响应，并给出错误：`method ireport of accpac.ireport failed`

这是代码：

```
rpt.NumOfCopies = 1
rpt.Format = PF_NONE
rpt.Destination = PD_FILE
rpt.PrintDir = "[\\hcc-acc\Accpac\Macros\Reports and Macros\Tax\Test]"

rpt.PrintReport 
```

一旦涉及到`rpt.PrintReport`，它就会出错。我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:10:42.877

您需要在 rpt.PrintDir 参数中包含 PDF 文件的名称：

```
rpt.PrintDir = "[\\hcc-acc\Accpac\Macros\Reports and Macros\Tax\Test\SomeFileName.PDF]" 
```

# crystal-reports-2008 - 水晶报表公式字段中的foreach循环

> ID：11501905
> 
> 赞同：0
> 
> 时间：2012-07-16T09:50:26.757
> 
> 标签：crystal-reports-2008

请帮助我获取水晶报表公式字段中每个类别的配置文件 ID 的计数。

我需要显示喜欢：2 人注册了电气类别

这是报告中的我的 Sql 查询结果。

```
ProID    CATID      Description
1            2           Inspection
1            4           Fabric Maintenance
1            6           Electrical
1           10           General Qualifications
3            6           Electrical
3           10           General Qualifications
4            1           QA /QC Vendor Inspection
6            1           QA /QC Vendor Inspection
11           1           QA /QC Vendor Inspection
12           1           QA /QC Vendor Inspection
12           2           Inspection
12           3           Coatings Inspection
12          10           General Qualifications 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:44:16.673

首先，您必须为类别创建一个新组，您可以使用 sum(,) 来解决上述要求

[http://answers.yahoo.com/question/index?qid=20080918181105AAsqVoC](http://answers.yahoo.com/question/index?qid=20080918181105AAsqVoC) [http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/9da5e3fb-a2ea-4337-b098-33f2b142fd0c/](http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/9da5e3fb-a2ea-4337-b098-33f2b142fd0c/) [有条件的Crystal Reports 中的组 SUM](https://stackoverflow.com/questions/1545883/conditional-group-sum-in-crystal-reports)

# python - 建议 OOP 分析/设计 - 打破我的程序习惯

> ID：11501906
> 
> 赞同：3
> 
> 时间：2012-07-16T09:50:27.897
> 
> 标签：python, oop, object-oriented-analysis

我想使用 OOP/OOD 作为一个小项目的练习，但我经常发现自己在编码时使用了一种过程方法。我将 Python 与 Flask（Web 框架）结合使用

本质上，我的应用程序是一种蜘蛛，可以读取新电影发布的 rss 提要。对于每个新电影发行，它使用 imdb 链接从两个不同的 Web 服务（imdbapi 和 TMDb）收集有关情节、年份、类型、海报和类似信息的信息。如果首选服务无法提供信息，则使用其他服务。最后将所有信息保存在数据库中。然后我使用 Flask 在网站上展示信息

我现在已经创建了一个 Spider 类。它包含以下方法（为清楚起见已删除代码）：

```
class Spider():
""" Spider Class """

def __init__(self, rssfeed):

def run_update(self):
    movie_list = self.get_entries_from_feed()
    self.get_imdb_json(movie_list)

def get_entries_from_feed(self):
    """ reads an rss feed and return a list of lists with imdb id, title, and added date         time """

def get_imdb_json(self, movie_list):
    """ get json data from imdbapi based on list with imdb id"""
    if not in db:
        save_to_db

def save_to_db(self, key, nzb_title, added, data):
    """ save entry to db from json data""" 
```

“问题”是我使用**run_update()**方法以程序方式执行所有步骤。我也发现设计不灵活。例如，如果我无法获得一项服务的电影信息，我想尝试另一项服务，但这在当前格式中实现起来并不容易。

我想到的是创建一个 Movie 类，代表在 rssfeed 中找到的每部电影。也许还为我用于收集有关每部电影、imdbapi 和 TMDb 的信息的每个服务创建类？

那么，您将如何以 OOP/OOD 方式设计和设计这样的应用程序？当我们超出教科书中使用的简单示例（如汽车、书籍、水果等）时，我发现识别类有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:34:12.230

Python 的美妙之处在于它以一种非常无缝的方式支持许多不同的编程范式。不要太担心在 OOP 中做所有事情，使用正确的工具来完成这项工作。不是所有的东西都是钉子，所以不要把自己局限在一把锤子上。

话虽如此，如果您只是想在 OOP 中进行练习，请寻找模式。例如，对于您的多个信息源，策略模式可能是一个很好的解决方案。我向任何想要更好地处理 OOP 的人强烈推荐[GoF 模式一书。](http://en.wikipedia.org/wiki/Design_Patterns)任何想要超越基本编程的人都应该阅读恕我直言。

对于发现对象，经典的方法是开始在您的问题空间中寻找名词并将这些名词作为您的对象：movie、feed、imdb、tmdb。然后你开始思考每个对象应该关联哪些属性和功能（如果你想继续类比，可以使用形容词和动词）。当您开始看到通用功能时，就像您应该使用 imdb 和 tmdb 一样，那么您可能会考虑一个通用的基类：mdb。下一步是查看对象之间的关系。我是一个视觉型的人，所以我总是制作一个[类图](http://www.agilemodeling.com/artifacts/classDiagram.htm)来帮助我理解关系。阅读[CRC Cards](http://en.wikipedia.org/wiki/Class-responsibility-collaboration_card) and [Responsibility-Driven Design](http://en.wikipedia.org/wiki/Responsibility-Driven_Design)了解有关此技术的更多详细信息。

如果您对常见模式、它们如何工作以及它们的应用位置有一些基本的工作知识，您将开始注意到对象中的模式。如果没有，该技术仍将帮助您构建有用的 OO 系统。风险在于您可能正在重新发明轮子，或者您可能会错过一些可以在以后为您节省大量时间的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T01:20:02.810

要进行 OOP，您需要确定需要解决的每个问题，然后独立于其他问题来解决它（这样您将获得所有不错的 SOLID 等......从 OOP 中受益）。

大多数人可能会称我为极端主义者（他们可能是对的），但这种方法对我来说非常有效：

我已经确定了这些问题，所以我会为每个问题创建一个类。然后你需要“绑定”它们，不要考虑如何完成你想做的事情，而是专注于你想做的事情，并试图留下“实施细节”，总是“稍后” （或更深）只要你能：

```
run_update
    get entries from feed
        obtain the feed
        read the feed
        parse an movie entry
            manage movie entry information
    get imdb json
        talking with imdbapi
        parsing json 
        converting json to movie
        talking with db
            querying the db
            saving with db
                convert movie to db format 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:32:07.847

尝试使用像 SQLAlchemy 这样的 ORM 来跟踪和填充模型/持久数据以及它们之间的关系。这是您可以使用典型 Web 应用程序执行的主要 OOP 操作。

但是，不要仅仅为了 OOP 而做 OOP。另一种好方法是找到重复代码/逻辑的位置并尝试将其重构到一个位置。尽量让每个类解耦，不知道其他类是怎么实现的。从公共 API 和合约的角度来思考问题。这通常会导致 OOP 设计。

# sql-server - 位运算符优先级

> ID：11501907
> 
> 赞同：2
> 
> 时间：2012-07-16T09:50:37.400
> 
> 标签：sql-server

我刚刚在 MSSQL 中遇到了让我困惑的问题。如果我这样做：

`SELECT 1 | 0 & 0`

输出是`0`- 我会认为`&`运算符优先于`|`运算符。

有任何想法吗 ？这是 MSSQL 中的错误还是预期行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:57:43.210

根据[SQL Server 运算符优先级表 (SQL2k8+)](http://msdn.microsoft.com/en-us/library/ms190276.aspx)，@MartinSmith 已经在评论中引用了它，这是优先级的样子：

```
Level Operators

1     ~ (Bitwise NOT)
2     * (Multiply), / (Division), % (Modulo)
3     + (Positive), - (Negative), + (Add), (+ Concatenate), - (Subtract), & (Bitwise AND), ^ (Bitwise Exclusive OR), | (Bitwise OR)
4     =, >, <, >=, <=, <>, !=, !>, !< (Comparison operators)
5     NOT
6     AND
7     ALL, ANY, BETWEEN, IN, LIKE, OR, SOME
8     = (Assignment) 
```

当表达式中的两个运算符具有相同的运算符优先级时，将根据它们在表达式中的位置从左到右计算它们。

## 您对按位运算符的问题

如您所见，按位运算符都在同一级别 (3)，这就是为什么从左到右评估它们的原因，因此在您的示例`|`中先评估然后再评估`&`。

## 布尔逻辑运算符不同

这些当然是按位运算符，而不是逻辑运算符，它们当然会以正确的顺序进行评估，因为`AND`有 6 级和`OR`7 级。这意味着`AND`将首先和`OR`之后评估。

括号当然是任何非平凡表达式的首选。在您的情况下，它似乎微不足道，是的，因此没有使用括号，但是由于按位运算符在同一级别上运行，因此必须在组合至少 3 个操作数时使用它们，**或者**确保以您希望它们评估的方式对运算符进行排序. 在你的情况下：

```
select 0 & 0 | 1 
```

会产生正确的结果。

## 并不总是这样

~~**自 SQL Server 2008 以来，**按位运算符的优先级已经均衡。[SQL Server 2005](http://msdn.microsoft.com/en-us/library/ms190276%28v=sql.90%29)及更早版本在较低级别 (5) 上具有按位`|`（以及排他性 or `^`），因此您的表达式将正确计算。为什么微软决定将所有位运算符放在同一级别上对我来说是个谜。~~

事实证明，[SQL Books Online 声明了无效的现实生活处理](https://connect.microsoft.com/SQLServer/feedback/details/312359/operator-precedences-select-1-1-0-0)（感谢@MartinSmith）。所以他们刚刚更新了 SQL Server 2008 的运算符优先级文档页面。显然，这种方式已经工作了很长时间（也许一直如此）。

# google-api - Google PHP API 离线访问问题

> ID：11501910
> 
> 赞同：0
> 
> 时间：2012-07-16T09:50:43.950
> 
> 标签：google-api, google-api-client

我正在尝试使用 Google PHP API 从 Google plus 获取内容。我能够获得刷新令牌。但是当我尝试使用该刷新令牌获取访问令牌时，它返回以下错误。

致命错误：未捕获的异常 'apiAuthException' 带有消息'刷新 OAuth2 令牌时出错，消息：'{"error" : "invalid_grant" }'' in /var/www/social-media-test/google-api-php-client /src/auth/apiOAuth2.php:242 堆栈跟踪：#0 /var/www/social-media-test/google-api-php-client/src/apiClient.php(281): apiOAuth2->refreshToken('MY -REFRESH-TOKEN-HERE') #1 /var/www/social-media-test/google-api-php-client/examples/plus/p.php(19): apiClient->refreshToken('MY-REFRESH- TOKEN-HERE') #2 {main} 在第 242 行的 /var/www/social-media-test/google-api-php-client/src/auth/apiOAuth2.php 中抛出

我的代码如下所示。

```
$client = new apiClient();
$client->setApplicationName('Google+ PHP Starter Application');
$client->setClientId('client-id');
$client->setClientSecret('secret-key');
$client->setRedirectUri('http://localhost/index.php/main');
$client->setDeveloperKey('dev-key');
$plus = new apiPlusService($client);

$client->refreshToken('MY-REFRESH-TOKEN'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:46:57.107

你忘了这个：

```
$client->setScopes(array(
    'https://www.googleapis.com/auth/blogger'
)); 
```

参考：[https ://developers.google.com/gdata/docs/auth/oauth#Scope](https://developers.google.com/gdata/docs/auth/oauth#Scope)

# javascript - IFrame load() 处理程序仅在 Firefox 上声明时触发

> ID：11501911
> 
> 赞同：1
> 
> 时间：2012-07-16T09:50:47.487
> 
> 标签：javascript, firefox, iframe, javascript-events, jquery

在 iframe 上触发处理程序`load()`，如下所示：

**HTML**

```
<iframe id="iframe" name="iframe" src="javascript:'<html></html>'"></iframe>

<form target="iframe"> 
  ...
</form> 
```

**JS（使用 jQuery）**

```
$("#iframe").load(function() {
  console.log("iframe.load called")
}); 
```

在 Chrome 中：在加载 iframe 时调用*日志*（当发送指向 iframe的`form`with时），而不是在加载文档时调用。`target`在 Firefox中：第一次呈现页面时调用*日志。*

我试图研究但无法解释为什么 Firefox 会在`iframe`加载 's 内容之前触发此处理程序。

# linux - rsync 与 --remove-sent-files 选项并打开文件

> ID：11501913
> 
> 赞同：3
> 
> 时间：2012-07-16T09:50:53.823
> 
> 标签：linux, file, rsync

每分钟我都需要将记录的文件从 3 个服务器复制到一个数据存储。我不需要保存原始文件 - 数据处理不在所有文件中。

但是当我使用 option 时`--remove-sent-files`，rsync 发送并删除未完成（未关闭）的文件。

我试图阻止使用 and 发送这些打开的文件`lsof`，`--exclude-from`但似乎 rsync 并没有排除排除列表中的完整路径：

```
--exclude-from=FILE     read exclude >>patterns<< from FILE

lsof | grep /projects/recordings/.\\+\\.\\S\\+ -o | sort | uniq
/projects/recordings/<uid>/<path>/2012-07-16 13:24:32.646970-<id>.WAV 
```

因此，脚本如下所示：

```
# get open files in src dir and put them into rsync.exclude file
lsof | grep /projects/recordings/.\\+\\.\\S\\+ -o | sort | uniq > /tmp/rsync.exclude
# sync without these files
/usr/bin/rsync -raz --progress --size-only --remove-sent-files --exclude-files=/tmp/rsync.excldude /projects/recordings/ site.com:/var/www/storage/recordings/
# change owner
ssh storage@site.com chown -hR storage:storage /var/www/storage/recordings 
```

那么，也许我应该尝试其他工具？或者为什么 rsync 不听排除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T09:20:39.347

我不确定这是否对您有帮助，但这是我仅针对当前未写入的 rsync 文件的解决方案。我将它用于 tshark 捕获，每 N 秒使用 -a 标志写入一个新文件（例如 tshark -i eth0 -a duration:30 -w /foo/bar/caps）。注意那个棘手的 rsync，包含和排除的顺序很重要，如果我们想要子目录，我们需要包含“*/”。

-G

```
$save_path=/foo/bar/
$delay_between_syncs=30
while true;
do
 sleep $delay_between_syncs

 # Calculate which files are currently open (i.e. the ones currently being written to)
 # and avoid uploading it. This is to ensure that when we process files on the server, they
 # are complete.
 echo "" > /tmp/include_list.txt
 for i in `find $save_path/ -type f`
  do
    op=`fuser $i`
    if [ "$op" == "" ]
            then
                    #echo [+] $i is good for upload, will add it list.
                    c=`echo $i | sed 's/.*\///g'`
                    echo $c >> /tmp/include_list.txt
    fi
  done

 echo [+] Syncing...
 rsync -rzt --include-from=/tmp/include_list.txt --include="*/" --exclude \* $save_path user@server:/home/backup/foo/
 echo [+] Sunk... 

done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-02T20:53:29.897

rsync 文件，然后通过捕获已传输文件的列表删除已 rsync 的文件，然后仅删除当前未打开的已传输文件。当 Rsync 到达目录时会计算出要传输的文件，因此当新打开的文件（自 rsync 启动后）不在排除列表中时，即使它一开始工作，您的解决方案也注定会失败。

另一种方法是做一个

查找目录 -type f -name 模式 -mmin +10 | xargs -i rsync -aP {} dest:/path/to/backups

# c# - ConcurrentDictionary.TryAdd 会失败吗？

> ID：11501931
> 
> 赞同：79
> 
> 时间：2012-07-16T09:51:31.660
> 
> 标签：c#, concurrentdictionary

这更像是一个学术问题......但是[ConcurrentDictionary.TryAdd](https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.tryadd)会失败吗？如果是这样，在什么情况下，为什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-07-16T09:57:44.303

是的，可以，这里是条件（[来自 msdn](http://msdn.microsoft.com/en-us/library/dd267291.aspx)）：

*   **ArgumentNullException** - 当键为空引用时
*   **OverflowException** - 当达到最大元素数时
*   如果已存在具有相同键的元素，则返回**false**

重申一下，这与并发无关。如果您担心两个线程同时插入一个项目，那么可能会发生以下情况：

*   如果键不同，两个插入都可以正常工作。
*   一个插入工作正常并返回 true，另一个插入失败（无一例外）并返回 false。如果两个线程尝试插入具有相同键的项目并且基本上只有一个会赢而另一个会输，就会发生这种情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T09:54:57.147

当然可以。如果密钥已经存在，该方法将返回 false。

参考：http: [//msdn.microsoft.com/en-us/library/dd267291.aspx](http://msdn.microsoft.com/en-us/library/dd267291.aspx)

返回值 类型：System.Boolean 如果键/值对已成功添加到 ConcurrentDictionary，则为 true。**如果密钥已经存在，则此方法返回 false。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T09:56:40.717

当密钥已经存在于字典中时，它将失败。

如果由于内存不足而无法添加该值，则会出现异常。

# iphone - 适用于 iOS 的可用视频录制格式

> ID：11501932
> 
> 赞同：0
> 
> 时间：2012-07-16T09:51:32.640
> 
> 标签：iphone, ios5, format, video-capture

功能是从 iPhone 录制视频并将其上传到服务器，然后它应该与 android 设备同步，并且应该可以在那里播放。从谷歌搜索我知道 iPhone 记录 .mov 文件。

我想知道的是，除了 .mov 之外是否还有其他可用的格式，以便它可以在 android 设备和服务器上播放。

谢谢。

```
SDK: 5.0;    
Xcode: 4.2;
Devices: iPhone 4,4S, iPad2,3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T06:28:44.363

.mov 不是一种格式；这是一个容器文件。iPhone 使用流行的 h.264 视频编码器，然后将其（包括音频和数据）包含在 .mov 文件中，这是一种快速文件格式。您无法更改 iPhone 使用的容器文件或编码器。

您可以使用一些服务将视频文件从一种格式编码为另一种格式。查看 zencoder 和 pandastream。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T17:46:56.957

确实有办法。您可以使用**AVAssetExportSession**类。AVAssetExportSession 对象有一个名为*outputFileType*的属性，您可以将其设置为**AVFileTypeMPEG4**。通过使用预设名称*AVAssetExportPresetPassthrough*，视频实际上不会被重新编码，而只是将容器更改为 mp4（因此速度会非常快）。

```
AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:#videoAsset# composition presetName:AVAssetExportPresetPassthrough];
exporter.outputFileType = AVFileTypeMPEG4;
exporter.outputURL = outputURL;

[exporter exportAsynchronouslyWithCompletionHandler:^(void){
    switch (exporter.status) {
        case AVAssetExportSessionStatusFailed:
            // Failed!
            break;
        case AVAssetExportSessionStatusCompleted:
            // Success!
            break;
        case AVAssetExportSessionStatusCancelled:
            // Cancelled!
            break;
    }
}]; 
```

# android - android，如何通过其他片段操作片段的视图？

> ID：11501933
> 
> 赞同：1
> 
> 时间：2012-07-16T09:51:33.650
> 
> 标签：android, android-fragments, android-activity

在我的活动中，我有两个片段。位于活动顶部并充当操作栏的一个。另一个片段有一个视图寻呼机。

在第二个片段的代码中，我需要连接到 Internet 并下载我的信息。第一个片段有一个进度条，我想在我的应用程序从服务器获取数据时显示它。

是否可以从另一个片段访问一个片段的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:34:10.370

好的，我找到了解决方案。在我的第二个片段中，我做了：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i(TAG, "inside onActivityCreated()");

        context = getActivity().getApplicationContext();
        actionbar = (ActionBar) getActivity().findViewById(R.id.ActionBar);

        if(InternetConnection.isConnectedToInternet(context))
            new myAsyncTask().execute();
        else
            Toast.makeText(context, "Internet connection not found.", Toast.LENGTH_LONG).show();
    } 
```

“ActionBar”是我自己的小部件。所以，我可以在我的代码的其他部分访问它的方法。

```
public class myAsyncTask extends AsyncTask<Void, Void, Boolean> {       

        @Override
        protected void onPreExecute() {
            Log.i(TAG, "myAsyncTask is about to start...");

            actionbar.showProgressBar();
        }
.
.
. 
```

# opengl - 为什么 GL_CLAMP 在这里很重要？

> ID：11501937
> 
> 赞同：0
> 
> 时间：2012-07-16T09:51:40.860
> 
> 标签：opengl

我正在运行[这个例子](https://stackoverflow.com/a/3585515/807893)，

但改变：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT); 
```

到：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP); 
```

我在顶部和右侧得到了一个稍微不同的图像。

![在此处输入图像描述](../Images/6b839e5193af79c4f4b2728fce41240b.png)

但从代码中可以看出：

```
glBegin(GL_QUADS);
//lower left
glTexCoord2f(0, 0); 
glVertex2f(-1.0, -1.0);
//upper left
glTexCoord2f(0, 1.0);
glVertex2f(-1.0, 1.0);
//upper right
glTexCoord2f(1.0, 1.0);
glVertex2f(1.0, 1.0);
//lower right_
glTexCoord2f(1.0, 0); 
glVertex2f(1.0, -1.0);
glEnd(); 
```

纹理不会超出范围，为什么 GL_CLAMP 很重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:15:27.597

在片段着色器中，颜色与当前纹素右上角的颜色混合。有一个`vec2(0.0625, 0.0625)`添加到纹理坐标。`GL_CLAMP`因此，在查找更高或等于 (1.0 - 0.0625) = 0.9375 的纹理坐标时，您总是会得到相同的值。

```
void main() {
    vec4 s1 = texture2D(tex0, gl_TexCoord[0].st);
    vec4 s2 = texture2D(tex1, gl_TexCoord[0].st + vec2(0.0625, 0.0625));
    gl_FragColor = mix(vec4(1, s1.g, s1.b, 0.5), vec4(s2.r, s2.g, 1, 0.5), 0.5);
} 
```

# python - 有没有办法在 nginx 上使用 django 上传一个非常大的文件？

> ID：11501950
> 
> 赞同：5
> 
> 时间：2012-07-16T09:52:10.460
> 
> 标签：python, django, apache, nginx, webserver

我使用 django 运行我的网站，使用 nginx 运行前端网络服务器，

但是当我将一个非常大的文件上传到我的网站时，

我花了很长时间，

nginx手动上传大文件时出现问题；

nginx 在收到我所有的 post 文件后会将文件发送到 django；

所以这将花费我更多的时间；

我想找一些其他的网络服务器来代替 nginx；

希望你的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:10:40.427

您的问题不在 nginx 中，而是在 nginx 设置中。

如果你想用 django 处理文件 - 你应该改变一些参数

[上传大文件时超时？](https://stackoverflow.com/questions/7348935/timeout-when-uploading-a-large-file)

否则 nginx 可能会自己处理文件

[http://www.grid.net.ru/nginx/upload.en.html](http://www.grid.net.ru/nginx/upload.en.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:57:40.733

Nginx 可能是最好的 http 服务器，没有必要替换它。我会建议您通过 ftp 或 nfs 共享上传非常大的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:31:19.677

如果您不想将文件传递给您的 django 应用程序，那么您应该使用： [`fastcgi_pass_request_body off;`](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_pass_request_body)

您也可能想使用上传模块：[http ://www.grid.net.ru/nginx/upload.en.html](http://www.grid.net.ru/nginx/upload.en.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T14:40:15.530

[在http://www.tornadoweb.org/](http://www.tornadoweb.org/)上查看 tornado您可以在 django 旁边使用它并处理文件上传。

在我的项目中，我成功地将 django 与 tornado 一起使用，它可以处理 API 调用和长 ajax 请求。

# android - 如何在android中使用pdf格式

> ID：11501955
> 
> 赞同：0
> 
> 时间：2012-07-16T09:52:29.313
> 
> 标签：android

我们可以在android中创建和写入pdf文件吗？
我已经尝试过 java 的 itext 库，但它给出了类未找到异常，请帮助。
**更新**

```
Document document = new Document();
PdfWriter.getInstance(document, new FileOutputStream(FILE));
document.open();
addMetaData(document);
addTitlePage(document);
addContent(document);
document.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:58:44.463

作为库，我之前提到的已被弃用。下面是其中一个活跃的。

[https://mupdf.com/](https://mupdf.com/)

# opengl-es-2.0 - 包含整个 OpenGL ES 2.0 状态的结构

> ID：11501957
> 
> 赞同：1
> 
> 时间：2012-07-16T09:52:33.593
> 
> 标签：opengl-es-2.0

有没有人有一个 C 结构，它的成员描述了整个 OpenGL ES 2.0 状态？它看起来像这样：

```
struct OpenGLES20State
{
  int activeTexture;
  bool scissorEnabled;
  Rectangle scissorRectangle;
  bool stencilEnabled;
  int stencilFunc;
  int stencilOpFail;
  int stencilOpDFail;
  int stencilOpDPass;
  //
  // and a lot more...
  //
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T12:25:43.017

You can create this structure by carefully working with OpenGL ES 2 specification available from Khronos: [http://www.khronos.org/opengles/2_X/](http://www.khronos.org/opengles/2_X/)

Also, interesting place to look for a similar implementation may be Mesa3D library source code.

# java - @NotThreadSafe 未找到错误

> ID：11501959
> 
> 赞同：1
> 
> 时间：2012-07-16T09:52:35.340
> 
> 标签：java, android, android-intent

0.3 代码。

```
@NotThreadSafe
public class VoicemailPlaybackFragment extends Fragment {
//
} 
```

我收到编译时错误，因为“NotThreadSafe 无法解析为一种类型”，即`@NotThreadSafe`未导入任何人都可以帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:08:09.047

该注释尚未出现在标准 Java 或 Android 代码库中。

根据您使用它的方式和原因，您应该将一些包含它的第三方 JAR 添加到您的类路径中，或者只是将副本添加到您的代码库中。

[此页面](http://mavenhub.com/c/javax/annotation/concurrent/NotThreadSafe)列出了一些包含注释的产品。

# javascript - 多个脚本不起作用

> ID：11501961
> 
> 赞同：0
> 
> 时间：2012-07-16T09:52:37.843
> 
> 标签：javascript, jquery

我创建了两个 jquery 和脚本来构建日历确认..但是当它们在单独的 html 页面中时效果很好..但是当两个脚本在同一页面中时它不起作用..为什么会这样？

```
 <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script  src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>

  <script>

$(document).ready(function(){

 $('#click').click(function(){
    //$(function() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Ok": function() {

                        $('#form1').submit();

                    //*****************************************************************
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    });
    </script>
<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script type="text/javascript" src="jsdatepick-calendar/jquery.1.4.2.js"></script>
<script type="text/javascript" src="jsdatepick-calendar/jsDatePick.jquery.min.1.3.js"></script>
<script type="text/javascript" src="jquery/fadeslideshow.js">

/***********************************************
* Ultimate Fade In Slideshow v2.0- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
***********************************************/

</script>
<script type="text/javascript">
//Datechooser_____________________
window.onload = function(){
new JsDatePick({
            useMode:2,
            target:"date_created_text",
            dateFormat:"%Y-%m-%d"

        });

        new JsDatePick({
            useMode:2,
            target:"date_retained_text",
            dateFormat:"%Y-%m-%d"

        });

        new JsDatePick({
            useMode:2,
            target:"date_to_be_disposed_text",
            dateFormat:"%Y-%m-%d"

        });

}
</script>

<script type="text/javascript">

var mygallery=new fadeSlideShow({
    wrapperid: "slide", //ID of blank DIV on page to house Slideshow
    dimensions: [967, 200], //width/height of gallery in pixels. Should reflect dimensions of largest image
    imagearray: [
        ["images/img0.jpg", "", "", "The best way to track your files"],
        ["images/img1.jpg", "", "", "The choice for quality service"],
        ["images/img2.jpg", "", "", "With latest technology"],
        ["images/img3.jpg","","","For a safe and secured place"],
        ["images/img4.jpg", "", "", "Better performance with reliable service"],
        ["images/img5.jpg", "", "", "24 x 7 Service"]

         //<--no trailing comma after very last image element!
    ],
    displaymode: {type:'auto', pause:5000, cycles:0, wraparound:false},
    persist:  false, //remember last viewed slide and recall within same session?
    fadeduration: 1500, //transition duration (milliseconds)
    descreveal: "peekaboo",
    togglerid: ""
})

</script>
<script type="text/javascript">
function Blank_TextField_Validator()
{
// Check the value of the element named text_name from the form named text_form
//if (text_form.text_name.value == "")
if(form1.legacy_code_text.value=="" && form1.lable_title_text.value=="" && form1.file_name_text.value=="" && form1.bundle_ref_no_text.value=="" &&form1.bundle_shelf_no_text.value=="" && form1.rack_no_text.value=="" && form1.shelf_no_text.value=="" &&form1.date_created_text.value=="" && form1.date_retained_text.value=="" && form1.date_to_be_disposed_text.value=="" && form1.division_list.value==-1  && form1.unit_list.value==-1 && form1.assignee_code_list.value==-1 && form1.assignee_list.value==-1 && form1.subject_list.value==-1 && form1.serial_no_list.value==-1)
{
  // If null display and alert box
   alert("You have to have even one searching criteria to search files !");
  // Place the cursor on the field for revision

  // return false to stop further processing
   return (false);
}
// If text_name is not null continue processing
return (true);
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:56:19.843

只保留这一行：

```
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

并删除以下行：

```
<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script type="text/javascript" src="jsdatepick-calendar/jquery.1.4.2.js"></script> 
```

您不能在页面内调用 jQuery 库超过 1 次。

希望这行得通……穆罕默德。

# c++ - 解决来自 const 的无效转换

> ID：11501971
> 
> 赞同：6
> 
> 时间：2012-07-16T09:53:17.053
> 
> 标签：c++, mysql, arm, percona, raspberry-pi

我正在我的 Raspberry Pi 上编译 Percona（MySQL 变体），它有一个 ARM 处理器。

我在编译过程中遇到了一个已经报告的问题，但是没有人愿意修复，因为 ARM 是一个不受支持的平台。

[https://bugs.launchpad.net/percona-server/+bug/1002848](https://bugs.launchpad.net/percona-server/+bug/1002848)

我已经设法解决了这个问题并成功编译，但是我对 c++ 的了解有些缺乏，我不完全理解我是否真的破坏了某些东西。

我已经阅读了很多关于 SO 的从 const char* 到 char* 的无效转换问题，这就是我想到这个解决方法的地方。

错误如下：

```
error: invalid conversion from 'const pthread_mutex_t*' to 'pthread_mutex_t*' 
```

（它实际上不在`pthread_mutex_t`我的平台上，但问题是相同的 - 实际类型丢失到无限深渊，即回滚缓冲区）

有问题的代码是：

```
 uint32 count(uint index) const
  {
    my_atomic_rwlock_rdlock(&time_collector_lock); 
```

我将其更改为：

```
 uint32 count(uint index) const
  {
    my_atomic_rwlock_t dummy = time_collector_lock;
    my_atomic_rwlock_rdlock(&dummy); 
```

time_collector_lock 定义为：

```
private:
  my_atomic_rwlock_t time_collector_lock; 
```

由于这应该是一个互斥锁，我有一种感觉，我可能已经把它变成了非线程安全的。或者这样可以吗？

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T09:59:06.657

看来，在课堂上，您已将成员数据声明为：

```
pthread_mutex_t time_collector_lock; 
```

所以在`const`成员函数中，这个成员数据就**好像**你已经将它声明为：

```
const pthread_mutex_t time_collector_lock; //(as-if declaration) 
```

这是导致问题的原因，因为您不能将指针传递给期望指向*非常量对象的指针的 const**对象*。`my_atomic_rwlock_rdlock()`

 *关键字`mutable`可以将您保存在这里。将成员数据声明为`mutable`对象：

```
 mutable pthread_mutex_t time_collector_lock;
//^^^^^^note this 
```

现在您也可以在`const`成员函数中使用成员数据：

```
uint32 count(uint index) const
{
   my_atomic_rwlock_rdlock(&time_collector_lock);  //ok now! 
```*

# mysql - 在 WHERE 子句中使用两个日期之间的差异

> ID：11501972
> 
> 赞同：2
> 
> 时间：2012-07-16T09:53:19.550
> 
> 标签：mysql, sql

我正在尝试过滤 NOW() 和 NOW 之间的 SELECT 查询 - 间隔 10 分钟（？），但我似乎无法让它工作，它给了我一些关于该主题的问题。

我浏览了一些在线文档，并且有很多关于 stackoverflow 的问题，但没有一个解决方案能满足我的需求。查看 TIMEDIFF 和 TIMESTAMPDIFF 文档，我只看到它是这样使用的；

```
SELECT TIMESTAMPDIFF(SECOND,'2007-12-30 12:01:01','2007-12-31 10:02:00'); 
```

但是我不想只选择时差，我想在查询中将其用作 WHERE 子句，例如；

```
SELECT * FROM tableName WHERE (the time difference betweeen NOW() and the stored timestamp is less than x minutes); 
```

我需要将列设置为特定的数据类型吗？我怎样才能正确使用 TIMEDIFF / TIMESTAMPDIFF，如果这些不是我应该使用的正确方法，那是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:56:56.693

```
SELECT * FROM tableName WHERE TIMESTAMPDIFF(MINUTE,timestamp,NOW()) < 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:57:21.400

```
SELECT * FROM tableName 
WHERE now() - interval 10 minute < stored_timestamp 
```

# printing - 使用 CUPS 进行 Zebra 打印 无打印 ZPL 或 EPL

> ID：11501974
> 
> 赞同：20
> 
> 时间：2012-07-16T09:53:27.930
> 
> 标签：printing, zebra-printers, zpl, epl

我有一个 Zebra GK420d 通过 CUPS 连接到 OS X。但是，当我向它发送用 ZPL 或 EPL 编写的文件时，它们只会以纯文本形式打印。

我需要更改打印机的模式吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-10T00:47:14.373

与其他人所说的相反，您不需要专门添加原始队列。

`-o raw`相反，您可以使用switch将原始文件提交到任何队列：

```
lpr -P CupsPrinterName -o raw path/to/label.zpl 
```

可以通过 CUPS 中的链接找到打印机名称：

```
http://localhost:631/printers/ 
```

这也适用于使用 CUPS 的其他平台，例如 Linux。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T14:28:40.477

您可以使用 lpadmin 创建原始 CUPS 队列。这是我使用的命令行：

```
lpadmin -p Zebra -E -v usb://Zebra%20Technologies/ZTC%20LP%202824%20Plus?serial=XXXXXX -m raw 
```

您还可以使用 CUPS Web 管理员在以下位置设置原始队列

```
http://127.0.0.1:631/ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-08T16:58:58.587

这是一个更全面的答案，因为我似乎每隔几年就会回到这个问题。要从命令行使用 Zebra 或 Linux 中的其他条形码打印机进行打印，请执行以下步骤：

## 列出所有打印机目标并找到您要使用的打印机：

```
$ lpinfo -v
network https 
serial serial:/dev/ttyS0?baud=115200 
serial serial:/dev/ttyS1?baud=115200 
network lpd 
direct hp 
direct usb://GODEX/G500?serial=162203C6 
network smb
... 
```

## 添加新队列：

```
$ lpadmin -p godex -E -v usb://GODEX/G500?serial=162203C6 -m raw -o usb-unidir-default=true 
```

如果您的打印速度很慢（需要很长时间才能开始），请确保您添加了 -o usb-unidir-default=true。

## 检查可用队列：

```
$ lpstat -v
device for godex: usb://GODEX/G500?serial=162203C6 
```

## 创建标签（文本文件）：

根据您的打印机在 EPL (Zebra)、ZPL (Zebra)、EZPL (Godex) 中的要求创建文件。

警告，如果原始文件的长度低于 512 字节，某些 CUPS 版本可能会出现问题 - 较长的文件将打印，而较短的文件将打印一次然后停止几分钟（看起来内置了超时）。一种解决方法是添加注释以将其扩展超过 512 字节限制。

示例斑马文件 (test.epl)：

```
N
A20,20,0,2,1,1,N,"text"
B20,40,0,1,1,1,30,N,"aaaa-bbbb-cccc" 
P1 
```

示例 Godex 文件（test.ezpl）：

```
;set portrait orientation
^XSET,ROTATION,0
;set height 20mm
^Q20,1
;set width 64mm
^W64
;start label
^L
;AA=print out text with smallest font, x=20dots, y=20dots, magnificationx=0,         magnificationy=0, gap=1dot, rotationInverse=0 (no)
AA,20,20,0,0,1,0,Some sample text
;BQ=code128, x=20dots,y=40dots,narrow_bar_width=1,wide_bar_width:2,height=30dots,rotation=0deg,readable=0(no)
BQ,20,40,1,2,30,0,0,1234-1243-43214-432141
;end label
E 
```

## 推送到打印机：

```
$ lpr -P godex test.ezpl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T04:11:49.070

您需要避免任何过滤。使用 RAW 过滤器进行打印，如 CUPS 界面中配置的那样，或者默认情况下在您的`lpadmin`语句中进行打印。您没有说明打印机是如何连接的，但如果是 IP，您的目的地很可能是`socket://ip.addr.ess:9100`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-16T21:23:09.710

我是一个 PC 人，所以我不太了解 CUPS，但我在 PC 上使用过 zpl 和 epl，发现他们真的很喜欢获取原始打印文件。我总是执行 : filecopy "c:\zplfile.txt" "\computername\printershare" 类型命令。如果我只想做一些文字，我也使用过写字板。但是对于标签和条形码，我会看看是否有办法将原始 zpl 或 epl 发送到打印机端口。希望这可以帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-25T18:24:40.787

谢谢。我又看了一些。似乎在使用杯子时，您无法将原始 ZPL 命令发送到打印机。就像我所做的是在杯子中创建打印机作为套接字并在 9100 上启动 netcat 侦听器，然后向打印机发出某种命令

```
nc -l localhost 9100

zpl_mine="^XA ~SD10 ^PW 850 ^MM T ^MN W ^JUS ^XZ,";echo $zpl_mine | nc localhost 9100 -w 1 
```

这不会将信息发送到打印机，但我在一些论坛上看到您必须使用某种形式的语言（如 C）来解析信息

# scala - scalaz中更多类似haskell的应用语法

> ID：11501981
> 
> 赞同：5
> 
> 时间：2012-07-16T09:53:53.170
> 
> 标签：scala, scalaz

我正在尝试使用 scalaz。我尝试在应用程序代码中编写代码。我写了这样的代码：

```
val max: Option[Int] = (a |@| b) { math.max(_, _) } 
```

我不太喜欢这段代码。我想编写更接近 Haskell 风格的代码，如下所示：

```
val max: Option[Int] = { math.max(_, _) } <$> a <*> b 
```

这可能吗。为什么scalaz没有以这种方式实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T10:21:48.937

Scala 的类型推断比 Haskell 更受限制（标识符重载，JVM 是原因之一）。推论从左到右进行，函数参数的类型可以从先前的上下文中推导出来（如果在定义的地方，需要一个 arg 类型为 A 的函数），但不能从它们在定义。Scalaz 语法使参数类型可用。大多数情况下，反转它会迫使您编写函数参数类型，例如

```
{math.max(_: Int, _: Int) } <$> a <*> b 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T10:58:44.577

如果您愿意更详细一点，*可以将 Haskell 版本直接翻译成 Scala：*

```
import scalaz._, Scalaz._

val a = Option(1)
val b = Option(2)
val f: Int => Int => Int = x => math.max(x, _)

val c = b <*> (a map f) 
```

或者，作为单行：

```
val c = 2.some <*> 1.some.map(x => math.max(x, _: Int)) 
```

或者：

```
val c = 2.some <*> (1.some map (math.max _).curried) 
```

顺序是颠倒的，因为这些是方法调用而不是中缀运算符，但它本质上与 相同`max <$> a <*> b`：我们将函数映射到第一项，然后将结果应用于第二项。

# jquery - 如何通过 jQuery AJAX 调用使用 JSON 数据填充 HTML 表

> ID：11501984
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:54:06.620
> 
> 标签：jquery, html, ajax, json

我需要通过 jQuery AJAX 调用使用 JSON 数据填充表，

JSON数据的格式：

```
{"message":[
              {"name":"A","value":"7%"},
              {"name":"B","value":"3%"}
           ]} 
```

任何人都可以帮助找出这个 AJAX 调用有什么问题：

```
$.ajax({
         type : "GET",
         url : "",
         dataType : "json",
         success : function(data) {
            var Options = '';
            $.each($(data.message), function() {                        
                Options +='<li'+this.name+':'+this.value+'</li>';  
            });

            $("#list1").append(Options);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:05:16.317

我不确定你的问题到底是什么。但是我发现格式有问题。您的“li”标签未正确打开。

```
Options +='<li'+this.name+':'+this.value+'</li>'; 
```

改成，

```
Options +='<li>'+this.name+':'+this.value+'</li>'; 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T15:01:49.957

```
"fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
    console.log(aData[1]);
    if (aData[1] == "Imported")
    {
        // $('td').css('background-color', '#FBE9E7');
        $(nRow).find('td:eq(1)').html('<span class="label label-success">'+aData[1]+'</span>');
    } else if (aData[1] == "Inactive") {
        $(nRow).find('td:eq(1)').html('<span class="label label-danger">'+aData[1]+'</span>');
    } else if(aData[1] == "Exported") {
        $(nRow).find('td:eq(1)').html('<span class="label label-primary">'+aData[1]+'</span>');
    }else{
        $(nRow).find('td:eq(1)').html('<span class="label label-default">'+aData[1]+'</span>');
        // $.addClass('label label-default');
    }

},
```

[![在此处输入图像描述](../Images/2f6ba42f305b993a3dc7f7047f175041.png)](https://i.stack.imgur.com/y6OUX.jpg)

# php - 通过重定向到主页来处理 404 错误的最佳方法

> ID：11501985
> 
> 赞同：2
> 
> 时间：2012-07-16T09:54:10.480
> 
> 标签：php, html, apache

我已经搜索，阅读了很多，但仍然找不到实现目标的方法。现在我什至认为这是不可能的。是吗？

我希望正确处理 404 错误，因此我`ErrorDocument 404 /404.php`在 .htaccess 文件中，并且我想向搜索引擎发送正确的标题以`header("HTTP/1.1 404 Not Found")`忘记该页面，我**还想**将我的访问者重定向到，`/index.php?code=404`以便我可以告诉他他是什么正在寻找不可用，但仍然让他在网站上。

现在似乎一切都很好，直到我想重定向用户：然后服务器发送一条 302 消息，它覆盖了我之前的 404 标头，所以虽然我可以将用户发送到所需的位置，但我仍然无法告诉搜索机器人地址错误。

如果我`include("index.php?code=404")`在标题行之后添加一个它就不起作用，服务器说该文件不存在。

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-14T15:14:06.073

另一个建议我建议修改 .htaccess 来处理 404。

添加类似的东西：

```
ErrorDocument 404 /404.php 
```

到你的 .htaccess 会很好地为你处理事情。

您可以将 404 错误模板放置在您想要的任何位置。例如，您可以将所有错误消息放在一个名为“errors”的文件夹中

```
ErrorDocument 404 /errors/404.php 
```

当然可以很好地处理事情和其他错误消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T10:03:48.797

尝试这样的事情：

```
<?php

    header("HTTP/1.0 404 Not Found");

    echo '<html>
            <head>
                <meta http-equiv="Refresh" content="0;url=http://www.mysite.com/index.php?code=404" />
            </head><body></body>
          </html>';

?> 
```

我正在使用`meta`重定向，否则您会收到标头已发送的错误。

我使用 Fiddler 在 localhost 上对此进行了测试，得到了正确的 404 响应，然后成功正确地重定向到了不同的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:02:26.880

您可以在`include("index.php")`没有代码参数的情况下将其添加到您的 404 页面吗？然后在您的 index.php 中包含一个检查当前页面 URL 的部分。因此，如果页面 URL 包含`404.html`，则包含错误消息，否则正常显示主索引。

# php - 如何在浏览器中存储缓存？

> ID：11501989
> 
> 赞同：0
> 
> 时间：2012-07-16T09:54:19.080
> 
> 标签：php, javascript, jquery, asp.net, html

我想将数据存储在浏览器端的缓存中。但是如果我关闭浏览器并回到我的应用程序，我应该取回我的缓存数据，

这可能吗？

如果是，那么如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:03:29.493

如果您对浏览器支持感到满意（查看[http://caniuse.com/#feat=namevalue-storage](http://caniuse.com/#feat=namevalue-storage)），您可以使用本地存储来实现这一点，它比 cookie 强大得多。

您可以存储多少是有限制的（因浏览器而异，但假设约为 5Mb - 与每个 cookie 4Kb 相比），它比 cookie 的优势在于它不会随每个请求发送到服务器。这会增加您可能不想要的（轻微的）请求开销。

无论您采用哪种解决方案，请确保您处理用户已清除所有这些数据的情况，或者可能只是其中的一部分......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:58:12.007

您可以使用 cookie 存储数据并在用户下次打开您的网页时检索数据。

例如 -

使用此代码段将某些文本字段的数据捕获到 cookie 中 -

```
 $.cookie("mydata", $(".sometextfield").val(), {expires: 7}); 
```

现在假设用户关闭了浏览器。

下次用户访问您的页面时，他的代码片段将读取 cookie 数据并在页面加载时填充文本字段 -

```
 $(".sometextfield").val( $.cookie("mydata") ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:00:03.697

使用 HTML5 本地存储。

参考：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

# iphone - Xcode 4.3.3：无法更改自动调整内部标记（弹簧和支柱）

> ID：11501990
> 
> 赞同：2
> 
> 时间：2012-07-16T09:54:20.150
> 
> 标签：iphone, xcode, ios5

我想更改情节提要中的弹簧和支柱设置（xcode 4.3.3）

目前，在尺寸检查器（自动调整大小）中，两个支柱处于活动状态（外部标记） - 顶部和左侧制造商，零弹簧（内部制造商）处于活动状态。

我想激活两个内部标记，但 xcode 目前不允许我单击它们。

如果我创建一个新的`ViewController`and `UIView`，我可以更改新的自动调整大小。但理想情况下，我想知道如何解决这个问题，而无需从头开始创建新的故事板。

有谁知道是什么原因造成的？

谢谢，

# python - 将 gevent.evnet 与 celery.task 一起使用

> ID：11501991
> 
> 赞同：5
> 
> 时间：2012-07-16T09:54:30.853
> 
> 标签：python, flask, celery, long-polling, gevent

我一直在研究一个长轮询系统。我使用烧瓶 + mongokit + celery + gevent。

当芹菜任务中的过程完成时，`gevent.event.set()`不起作用。我需要帮助来解决这个问题。（我之所以同时使用 gevent 和 celery，是因为 Notification 系统中有一个庞大的进程需要处理。）

这是我的示例代码。

```
 #server.py
 @celery.task()
 def doing_task(uid, message):
     notification = Notification() # this is a notification Model
     notification.add(request.args.get('to'), some_notification)
     app.event.set()
     app.event.clear()

 @app.route('/main')
 def main():
     return render_template('main.html')

 @app.route('/set')
 def set():
     doing_task.delay(request.args.get('uid'), 'Notify')
     return 'OK'

 @app.route('/poll')
 def poll():
     uid = request.args.get('uid')
     app.event.wait()
     if is_authorized(uid): #uid 1 is a authorized account
         return Notification().get(uid)

 #main.html
 <body>
   <button>Click me</button>
 </body>
 <script>
   $('button').click(function(e) {
    $.ajax({
     'url': '/set',
     'data': 'uid=1',
     'success': function(data) {
       console.log(data);
     }
    });
    e.preventDefault();
  });

      var poll = function() {
  return $.ajax({
           'url': '/poll',
           'method': 'get',
           'async':true,
           'dataType': 'json',
           'timeout': 10000,
           'success': function(data) { 
             console.log(data);
             setTimeout(poll, 50);
           },
           'error':function (req,sta,er){
             setTimeout(poll, 3000);
           }, 
         });
    };
    poll()
 </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:34:29.270

现在，在 Flask 0.9`Flask.app_context`中添加了，`Flask.app_context`您可以获得当前的上下文。

请参阅[应用程序上下文](http://flask.pocoo.org/docs/appcontext/)。

例如，

```
from flask import Flask
from celery import Celery

app = Flask(__name__)
celery = Celery(__name__)

@celery.task
def hello():
    # Also, you are able to deal with current request as use test_request_context 
    with app.app_context():
        print current_app
    with app.test_request_context() as request:
        print('Hello {0!r}'.format(request)) 
```

# ruby-on-rails - 如何捕获“nil:NilClass 的未定义方法‘[]’”错误？

> ID：11501992
> 
> 赞同：9
> 
> 时间：2012-07-16T09:54:33.307
> 
> 标签：ruby-on-rails, ruby

我通过omniauth从facebook得到一个嵌套数组，想检查它是否为空？/nil？/exists？依赖行如下所示：

```
 unless omniauth['extra']['raw_info']['location']['name'].nil? 
```

这应该检查数组的这一部分是否为空或存在。

但总是抛出这个错误：

```
undefined method `[]' for nil:NilClass 
```

我检查数组是否错误？

我用“has_key”“nil？”试过了。“空的？” “存在吗？” “空白的？”

但是这些都没有！

请帮助我，非常感谢提前！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T09:59:40.387

理想情况下，您应该检查每个嵌套级别以查看它是否是`nil`，但是，这也可以。

```
unless (omniauth['extra']['raw_info']['location']['name'] rescue nil).nil? 
```

您也可以`NoMethodError`专门救援。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-16T09:56:23.510

引发此错误是因为链中的哈希值之一`omniauth['extra']['raw_info']['location']['name'].nil?`返回 nil 并且它不是最后一次调用 ['name']。

例如，如果`omniauth['extra']['raw_info']`返回 nil，您实际上是在尝试调用`nil['location']`在 ruby​​ 中引发错误的调用。

您可以简单地捕获此错误：

```
res = omniauth['extra']['raw_info']['location']['name'].nil? rescue true

unless res
  #your code here
end 
```

请注意，如果 ['name'] 哈希值为 nil 或链中的任何其他哈希值返回 nil，则上面的代码块将用 true 填充变量 res。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-11T19:35:31.957

派对有点晚了，但是，正如[这个答案](https://stackoverflow.com/a/34623680/3284936)中所指出的，Ruby 2.3.0[引入了一个](http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig)名为的新方法，如果其中一个链接的键是`dig`，它将返回。然后，您的 omniauth 身份验证哈希可以显示为：`nil``nil`

```
omniauth = { 
            ...                 
            "extra"=>{ "raw_info"=>
                        { "location"=>"New York",
                          "gravatar_id"=>"123456789"}}
             ...
           }

omniauth.dig('extra', 
             'raw_info',
             'location',
             'name',
             'foo',
             'bar',
             'baz') #<= nil 
```

# jquery - 具有动态轮播的 jQuery 滑块

> ID：11501997
> 
> 赞同：0
> 
> 时间：2012-07-16T09:54:46.990
> 
> 标签：jquery, slider, carousel

我创建了一个自定义 jQuery 滑块，它具有轮播，其**ul**宽度是从**li**动态设置的。

**我在身体上放了一个具有#bgWrapper**的div id ，在单击轮播**li 缩略图时，我****在li 的rel 图像上使用#bgWrapper**更改了身体背景图像。像**li rel="images/bgimage/bgone.jpg"**

我想更改正文背景图像作为轮播的缩略图顺序单击下**一个/上一个箭头**。

**这是我的 jQuery 代码：**

```
$(document).ready(function () {

    //Variable Define
    var thumbWrap = $("ul#carousel");
    var thumb = $("ul#carousel>li");
    var slider = $(".sliderCont");
    var ltarrow = $(".leftArrow");
    var rtarrow = $(".rightArrow");
    var ulwidth = 0;
    var bgImg = $("#bgWrapper");

    //Remove last LI margin for set UL perfect width
    $("ul#carousel>li:last-child").css("width", "200px");

    //UL width from LI
    thumb.each(function () {
        ulwidth += $(this).width()
    });
    thumbWrap.width(ulwidth);

    //Use same LI width value on scrollLeft:
    ltarrow.click(function () {
        slider.animate({
            scrollLeft: "-=225px"
        }, {
            duration: "slow",
            easing: "easeInOutQuint"
        });
    });

    rtarrow.click(function () {
        slider.animate({
            scrollLeft: "+=225px"
        }, {
            duration: "slow",
            easing: "easeInOutQuint"
        });
    });

    //BG Image Change reflect as relation of LI
    bgImg.css("background-image", "url(images/bgimage/bgone.jpg)");
    thumb.click(function () {
        bgImg.css("background-image", "url('" + $(this).attr('rel') + "')");
    });

}); 
```

这是演示网址链接。[http://jsfiddle.net/NwmLL/1/](http://jsfiddle.net/NwmLL/1/)
更新链接[http://jsfiddle.net/NwmLL/2/](http://jsfiddle.net/NwmLL/2/)只需在 li 上添加和删除一个类**.liSelect 即可**知道选择了哪个 li。

**我解决了，通过网址** [http://jsfiddle.net/NwmLL/3/](http://jsfiddle.net/NwmLL/3/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T04:08:41.330

检查演示[`jsFiddle`](http://jsfiddle.net/NwmLL/5/)

我希望它对你有用。