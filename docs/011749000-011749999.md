# StackOverflow 问答 11749000-11749999

# android - Android：语音识别方法

> ID：11749000
> 
> 赞同：4
> 
> 时间：2012-07-31T21:05:39.550
> 
> 标签：android, speech-recognition, speech-to-text

所以我正在编写一个新的应用程序，我需要在其中识别几个单词。我想知道您推荐我使用什么方法来满足这两个要求：

*   我需要该应用程序识别大约 50 个单词。简单的词，如“blue”、“red”、“save”等。
*   必须在不使用 Internet 的情况下访问某种服务器

从我目前的研究来看，CMUSphinx 似乎是最好的选择。

理想情况下，我还想制作一个与桌面应用程序具有相似后端的应用程序（最好是基于 Java 的）。据我了解，CMUSphinx 可以在我的移动应用程序中使用 PocketSphinx 来满足我的两个需求。

那么你们认为在我的情况下什么最有效？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:18:23.527

CMUSpinx 我觉得看起来不错。注意[http://www.politepix.com/openears/](http://www.politepix.com/openears/)也是基于 CMUSphinx 的强指标。但是，如果有一个 C++ 库，您可以使用 NDK 在 Android 上运行，但它不太可能比 CMUSphinx 更好。

# javascript - 在两列中动态显示产品

> ID：11749003
> 
> 赞同：0
> 
> 时间：2012-07-31T21:05:49.927
> 
> 标签：javascript, jquery

我有一个 jsfiddle [http://jsfiddle.net/K5PGp/](http://jsfiddle.net/K5PGp/) ，我正在尝试修改它，以便即使浏览器是 IE 8，它也会在两列中显示“产品”。

例如，如果显示所有 8 个产品，则应如下所示：

## 一二

## 三四

## 五六

## 七八

如果只显示 1,3,5,7，它应该是这样的：

## 一三

## 五七

如果只显示 2,4,6,8，它应该是这样的：

## 二四

## 六八

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:31:59.407

Simplified solution

[http://jsfiddle.net/w3bGj/](http://jsfiddle.net/w3bGj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:11:34.743

用于`float:left`每个容器。并在每个循环中对每个第二个元素应用一个 clear 函数：

```
$.each(elements, function(i) {
    $product = $('<div>');
    if(i%2 == 0) {
        $product.addClass('clear');
    }
    $('div').append($product);
}); 
```

每隔一个元素将强制换行。

# symfony - Symfony2+Twig - 在我自己的过滤器中使用 TwigBundle 的路径（）

> ID：11749011
> 
> 赞同：1
> 
> 时间：2012-07-31T21:06:31.053
> 
> 标签：symfony, twig

我正在尝试为我的项目创建一个 Twig 扩展。目标是使用 jquery.cluetip 插件生成一个用户弹出窗口，该插件可以在一个漂亮的工具提示中显示 AJAX 查询的结果。生成的 HTML 代码应如下所示：

```
<span class="userdata" rel="/profile/123/ajaxUserdata.html">W00d5t0ck</span> 
```

目前，我的代码如下所示：

```
class UserDataSpanExtension extends \Twig_Extension
{                       
    protected $_securityContext;

    public function __construct(SecurityContextInterface $security)
    {
        $this->_securityContext = $security;
    }

    public function getFilters()
    {
        return array(
            'userdataspan' => new \Twig_Filter_Method($this, 'getUserDataSpan', array('is_safe' => array('html'))),
        );
    }

    public function getUserDataSpan(User $user)
    {
        if (!is_object($this->_securityContext->getToken()) || !is_object($this->_securityContext->getToken()->getUser()))
            return '<span class="userdata-secret" title="|User information|User information is available only to logged in users.">[not available]</span>';

        return '<span class="userdata" rel="">' . $user->getDisplayName() . '</span>';
    }

    public function getName()
    {
            return 'twig_userdataspan';
    }
} 
```

现在我有点卡住了，因为我不知道应该如何填写我的`rel`属性。在 Twig 模板中，我会使用

```
{{ path('AcmeDemoBundle_ajaxUserdata', { id: user.id }) }} 
```

但这在 Twig 扩展中不起作用。谁能指出一个可用的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:07:28.357

在您的树枝扩展服务中注入并`router`在您的方法中以通常的方式生成 url，例如

```
$this->router->generate('AcmeDemoBundle_ajaxUserdata', array(
    'id' => $user->id,
)); 
```

在 services.yml 中将 @router 参数添加到您的扩展：

```
services:
    demo.twig.extension:
        class: DemoBundle\Twig\Extension
        arguments: [@router] 
```

# sql-server - SQL Server CONVERT 不能正确转换时区？

> ID：11749013
> 
> 赞同：0
> 
> 时间：2012-07-31T21:06:42.330
> 
> 标签：sql-server, sql-server-2008

根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)：

"可选的时区指示符 Z 用于更轻松地将具有时区信息的 XML**日期**时间值映射到没有时区的 SQL Server**日期**时间值。Z 是时区 UTC-0 的指示符。其他时区在 + 或 - 方向用 HH:MM 偏移量表示。例如：2006-12-12T23:45:12-08:00。

但是当我运行时：

```
declare @d datetime;
set @d=getdate();
print CONVERT(varchar(40), @d, 127) 
```

结果是`2012-07-31T14:04:11.447`。没有时区部分。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:20:14.487

该`DateTime`类型不包括时区，并且该`GETDATE()`函数返回一个 DateTime。

相反，您需要使用 SQL [`DateTimeOffset`](http://msdn.microsoft.com/en-us/library/bb630289.aspx)Server 2008 中引入的 SQL Server 类型。这将使您的示例：

```
declare @d datetimeoffset;
set @d=sysdatetimeoffset();
print CONVERT(varchar(40), @d, 127) 
```

注意[`SYSDATETIMEOFFSET()`](http://msdn.microsoft.com/en-us/library/ms186724.aspx#GetSystemDateandTimeValues)函数的使用。

也就是说，在实践中，您实际上想要实现什么？如果您有一些实际的无时区数据（例如 DateTime 列中的数据），您试图从中提取时区，那将是很棘手的。

# active-directory - ldap_sasl_bind - 用于 NTLM 身份验证的 GSSAPI

> ID：11749015
> 
> 赞同：1
> 
> 时间：2012-07-31T21:06:45.310
> 
> 标签：active-directory, ntlm, gssapi

[ldap_sasl_bind_s](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366968%28v=vs.85%29.aspx)是否支持通过 GSSAPI 进行 NTLM 身份验证？这似乎是底层实现的变量（[用于 NTLM 身份验证的 GSSAPI](https://stackoverflow.com/questions/6411099/gssapi-for-ntlm-authentication)）。我正在尝试对 Active Directory 服务器使用 NTLM 身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:05:59.860

正如方法调用所说：这是 SASL 的问题。您必须指定 SASL 机制。GSSAPI 机制是 Kerberos 5。一些像 Heimdal 这样的 GSS-API 确实支持 NTLM，但我猜你的 SASL 实现也必须这样做。我不认为 Cyrus SASL 会这样做。最好仅依靠带有 Kerberos 的 GSS-API。这项工作来自 C SASL 绑定和 Java SASL 绑定。

# ios - iOS 自动换行更均匀？

> ID：11749031
> 
> 赞同：1
> 
> 时间：2012-07-31T21:08:08.833
> 
> 标签：ios, uilabel, word-wrap

我有一个放入 UILabel 的标题。我让它将文本很好地包装成两行，但通常第二行只有一个小词。有没有办法告诉系统更均匀地换行？

标题是动态获取的，所以我不相信我可以提前确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-10T19:56:31.163

我继续创建了一个名为[EvenlyWrappedLabel](https://cocoapods.org/pods/EvenlyWrappedLabel)的 CocoaPod ，其灵感来自 Erik van der Neut 的回答。它有一些简洁的功能：

1.  防止单个单词孤儿占据整个底线。

    例子：

    ```
    This sentence has a single
    orphan. 
    ```

    变成：

    ```
    This sentence has
    a single orphan. 
    ```

2.  防止文本在顶部分组，感觉头重脚轻。

    例子：

    ```
    This sentence has a lot of words on
    the top line. 
    ```

    变成：

    ```
    This sentence has a lot
    of words on the top line. 
    ```

3.  可以在可用的每一行上均匀分布文本的选项。

    例子：

    ```
    This only takes up one line. 
    ```

    变成*：

    ```
    This only
    takes up
    one line. 
    ```

    * *`numberOfLines = 3`,`useEveryLine = true`*

4.  适用于自动布局约束并尊重内在大小。

5.  非常容易集成，只需替换`let label = UILabel()`为`let label = EvenlyWrappedLabel()`.

6.  一个糟糕的示例应用程序。

![示例项目截图](../Images/61ad59dd00df2d253c38db034d4291fc.png)

如果你不使用 CocoaPods，你可以在[GitHub 上](https://github.com/StockX/EvenlyWrappedLabel)找到源代码。享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:21:04.313

您可以计算出单行的长度，然后取该宽度，除以 2，并将该结果用作 2 行标签的宽度约束。这可能会给你带来更好的视觉效果，但如果你有很长的单词会导致你的标签是 3 行（除非超过 2 行是可以的），你可能需要稍微调整一下。

这种方法的缺点是做一些额外的工作，但它可能会奏效。例如：

```
    NSString *text = @"这是我的很长的标题，我想均匀地放在 2 行上";
    UILabel *theLabel = [[UILabel alloc] init];
    theLabel.text = 文本；
    // ...这里的其他标签设置，如字体等
    [theLabel sizeToFit];

    CGSize 约束 = CGSizeMake(theLabel.frame.size.width / 2.0, 1000);
    CGSize labelSize = [theLabel.text sizeWithFont:theLabel.font constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    theLabel.numberOfLines = 0;
    theLabel.lineBreakMode = UILineBreakModeWordWrap;
    CGRect frame = theLabel.frame;
    框架大小=标签大小；
    theLabel.frame = 框架；

```

那应该这样做。警告：凭记忆写。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:24:13.227

我不相信有一种简单的方法可以做到这一点。UIKit 的附加功能`NSString`允许您确定显示具有特定字体的字符串所需的尺寸。您可以做的是使用所有可用宽度计算必要的高度，然后在循环中运行相同的计算，减小宽度直到它需要额外的垂直空间。然后使用之前的值作为标签的宽度并适当对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T06:44:18.930

对于多语言应用程序，我也需要修复这个完全相同的问题。该应用程序可以用 9 种不同的语言显示其 UI，并且不同语言的消息长度差异很大。正因为如此，我最终对一些多行消息进行了一些不幸的默认自动换行。例如，在某些情况下，日文翻译的结尾是一整行文本，下一行只有一两个字符。

我在我的布局实用程序类中添加了以下两种方法，为我解决了这个问题（见下面的代码）。此解决方案适用于具有任意行数（1、2、3、更多...）和任何语言的标签。（更改`ECLayoutUtility`为您自己的班级名称。）

基本思想是这样的：

1.  给定一个显示文本的 UILabel，检测它的当前高度。

2.  *对不*增加该高度的标签的最小宽度进行二分搜索。

`while`在我下面的代码中，您可以使用变量控制精度和通过循环的圈数之间的权衡`granularity`。

此修复之前有问题的日语标签示例：

[![在此处输入图像描述](../Images/02350a344893e75031da0b7dd5744254.png)](https://i.stack.imgur.com/3tY9M.png)

修复后的同一个日本标签：

[![在此处输入图像描述](../Images/f981fbf50a643365ddfd60fc8c0b5852.png)](https://i.stack.imgur.com/OTp2c.png)

这是我添加到布局实用程序类中的两种方法。我像这样拆分它们，因此您也可以只查询以获取新大小，以防您使用 Autolayout，并且想要使用大小信息来操作约束而不是直接调整标签本身的大小：

```
+ (void)wordWrapEvenlyTextInUILabel:(UILabel *)uiLabel
                        forMaxWidth:(CGFloat)maxLabelWidth
{
    [ECLayoutUtility resizeView:uiLabel
                         toSize:[self getLabelSizeWithMinimumWidthForLabel:uiLabel
                                                               forMaxWidth:maxLabelWidth]];
}

+ (CGSize)getLabelSizeWithMinimumWidthForLabel:(UILabel *)uiLabel
                                   forMaxWidth:(CGFloat)maxLabelWidth
{
    NSLog(@"Current size for label \"%@\" is %@", uiLabel.text, NSStringFromCGSize(uiLabel.frame.size));

    // Start off by determining what height the label would get for the given maximum width:
    CGSize labelSize = [uiLabel.text boundingRectWithSize:CGSizeMake(maxLabelWidth, MAXFLOAT)
                                                  options:NSStringDrawingUsesLineFragmentOrigin
                                               attributes:@{ NSFontAttributeName:uiLabel.font }
                                                  context:nil].size;

    // Constraining the label to that height, now figure out the mimumum width for
    // which this label still shows its text within that given height. We find
    // that height with a binary search for the smallest label width that does
    // not increment the label height.

    CGFloat maxWidth    = maxLabelWidth;
    CGFloat testWidth   = 0.5 * maxWidth;
    CGFloat minWidth    = 0;
    CGFloat granularity = 1;

    while (maxWidth > testWidth + granularity)
    {
        CGFloat newHeight = [uiLabel.text boundingRectWithSize:CGSizeMake(testWidth, MAXFLOAT)
                                                       options:NSStringDrawingUsesLineFragmentOrigin
                                                    attributes:@{ NSFontAttributeName:uiLabel.font }
                                                       context:nil].size.height;

        NSLog(@"H: %.2f, min W: %.2f, mid W: %.2f, max W: %.2f", newHeight, minWidth, testWidth, maxWidth);

        if (newHeight > labelSize.height)
        {
            // Width reduction lead to height increase, so new width is too small.
            // Now set the new width to mid-point between what we just tried and
            // the last known acceptable width:
            minWidth   = testWidth;                         // increase the lower bound
            testWidth += 0.5 * (maxWidth - testWidth);      // increase width for next test
        }
        else
        {
            // Height not affected by the width reduction, so lets try to reduce it even more:
            maxWidth   = testWidth;                         // reduce the upper bound
            testWidth -= 0.5 * (testWidth - minWidth);      // reduce width for next test
        }
    }

    CGSize newSize = CGSizeMake(maxWidth, labelSize.height);
    NSLog(@"New size for label \"%@\" is %@", uiLabel.text, NSStringFromCGSize(newSize));

    return newSize;
} 
```

我`+wordWrapEvenlyTextInUILabel:forMaxWidth:`从我的视图控制器中调用该方法，`-viewWillLayoutSubviews`如下所示：

```
// Make sure that any text in the promo message that is wrapped over multiple lines
// is wrapped evenly, so we don't get very uneven lines that look ugly:
[ECLayoutUtility wordWrapEvenlyTextInUILabel:_promoMessageLabel
                                 forMaxWidth:_promoMessageLabel.frame.size.width]; 
```

我已经针对不同语言的不同标签对此进行了测试，它看起来完美地完成了这项工作。这是一个越南的例子：

[![在此处输入图像描述](../Images/9b1c06b820e70c002fb3c66950f4de58.png)](https://i.stack.imgur.com/lIq8N.png)

我希望这对其他人也有帮助:-)

谢谢，

埃里克

# delphi - 没有解决众所周知的 idMappedPortTCP 问题？

> ID：11749032
> 
> 赞同：-4
> 
> 时间：2012-07-31T21:08:10.290
> 
> 标签：delphi, delphi-xe2

我正在使用 Delphi XE2 和 indy 10.5.8.0

我在 6 年前遇到了这篇文章中描述的完全相同的问题！

[http://www.delphigroups.info/2/1/213924.html](http://www.delphigroups.info/2/1/213924.html)

我有一个简单的表单，其中只有一个 idMappedPortTCP 组件集处于活动状态。它按预期工作了几秒钟转发输入/输出，然后突然冻结。组件停止响应，而应用程序中的其他所有内容仍然有效

遗憾的是，同样的项目就像 indy9 的冠军一样工作！但我不能使用 indy9 我必须坚持使用 indy10 :(

我简直不敢相信还没有人为这个众所周知的问题提供解决方案或解决方法。必须有解决方案！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T23:01:46.340

那时什么都没做，因为没有什么可做的。正如我在 6 年前的讨论中解释的那样，根本问题是由微软在某些条件下在旧操作系统版本下冻结的 API 函数引起的。那时这不是印地问题，今天也不是印地问题。今天，唯一的`select()`挂起方法是它正在等待套接字上从未发生的状态更改。由于 Indy 默认使用无限超时，当它实际上是一个网络问题时，这看起来就像在 Indy 中的一个挂起。换句话说，Indy 正在等待永远不会到达的入站数据。您可以使用数据包嗅探器来验证这一点。

# objective-c - NSDecimalNumber 比较失败

> ID：11749033
> 
> 赞同：2
> 
> 时间：2012-07-31T21:08:13.420
> 
> 标签：objective-c, ios

为什么是`result` `NSOrderedDescending`？

```
NSDecimalNumber *decimal = [[NSDecimalNumber alloc] initWithString:@"2.6"];

NSComparisonResult result = [decimal compare:[NSNumber numberWithFloat:2.6]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:14:51.247

`2.6`不能精确地表示为浮点数，但`NSDecimal`可以精确地表示这个值（这就是我们首先需要 NSDecimals 的原因）。

根据[IEEE 754 计算器](http://www.h-schmidt.net/FloatConverter/IEEE754.html)，`2.6`转换为`2.5999999046325684`，小于`2.6`，因此比较为`NSOrderedDescending`。

# c# - NetworkStream 不支持查找操作

> ID：11749036
> 
> 赞同：1
> 
> 时间：2012-07-31T21:08:17.837
> 
> 标签：c#, .net, sockets, network-programming, tcpclient

我正在创建简单的代理服务器，但我遇到了一个奇怪的情况，我有以下代码：

```
var clientRequestStream = _tcpClient.GetStream();
var requestHeader = clientRequestStream.GetUtf8String(); 
```

`GetUtf8String``Stream`是读取流（包含`HttpRequest`标题）的类的扩展方法。我需要提取这些标头以访问 Host 和 Requested Url。一旦读取 NetworkStream 完成。我需要执行 seek 操作并设置它`clientRequestStream.Position = 0;`，因为我必须读取该流并将其写入另一个 remote `NetworkStream`。

我不知道我应该如何解决这个问题。任何建议都会有所帮助。

* * *

**编辑：**我也尝试将 NetworkStream 复制到 MemoryStream 然后对 MemoryStream 执行查找操作，没有例外，但是当我想从 NetworkStream 读取时，它的缓冲区总是空的。

我也用反射器看看里面发生了什么`Stream.CopyTo`。见下面的代码：

```
 private void InternalCopyTo(Stream destination, int bufferSize)
    {
        int num;
        byte[] buffer = new byte[bufferSize];
        while ((num = this.Read(buffer, 0, buffer.Length)) != 0)
        {
            destination.Write(buffer, 0, num);
        }
    } 
```

这就是 CopyTo 所做的。即使我使用`CopyTo`问题仍然没有解决。因为它将源（Here NetworkStream）读取到最后。我有另一种方法来处理这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:12:40.203

你是从这个流中读到最后吗？如果是这样，我建议您将整个内容复制到一个`MemoryStream`中，然后您可以随心所欲地寻找*它*。在 .NET 4 中，它特别容易[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)：

```
MemoryStream dataCopy = new MemoryStream();
using (var clientRequestStream = _tcpClient.GetStream())
{
    clientRequestStream.CopyTo(dataCopy);
}
dataCopy.Position = 0;
var requestHeader = dataCopy.GetUtf8String(); 
```

不可搜索是有道理的`NetworkStream`——它只是服务器提供给您的数据流。除非您可以告诉*服务器*倒带（仅在某些情况下才有意义），否则没有办法寻找，除非某些东西缓冲了您需要倒带的尽可能多的数据 - 这基本上就是复制到 a`MemoryStream`所做的事情，非常蛮力时尚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:11:57.867

正如您所发现的，`NetworkStream`它是不可搜索的。
`NetworkStream`直接从网络为您提供数据。

您应该将数据读入 a`MemoryStream`并重新使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:14:11.467

假设您不想正确重写您的 GetUtf8String 方法以不需要搜索...

最简单的方法是首先将流复制到 MemoryStream ，然后你可以尽可能多地寻找流。[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)将负责复制（.Net4+）

请注意，您需要通过将 Position 属性设置为 0 ( `copiedStream.Position=0`) 或通过基于缓冲区和第一个内存流的长度创建新的（最好是只读的）来克隆流来寻找结果 MemoryStream。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:15:46.773

您将无法设置 clientRequestStream.Position = 0 因为 NetworkStream 是只转发的。见这里：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.position.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.position.aspx)

以与常规流相同的方式考虑 NetworkStream 时要小心。例如在 StreamReader 上的 Peek() 之类的东西可能会导致您的应用程序阻塞。

# php - PHP 不显示错误 - 内部服务器错误 (500)

> ID：11749043
> 
> 赞同：18
> 
> 时间：2012-07-31T21:09:08.427
> 
> 标签：php, ubuntu-12.04, error-reporting, internal-server-error

我已经使用 *Apache2/MySQL/PHP5 在 Amazon AWS 上安装了全新的 Ubuntu Server 12.04 LTS。当我运行 PHP 脚本并遇到错误时，我没有看到任何来自 PHP 的错误报告，我看到的只是

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfil the request. 
```

我检查了我的`/etc/php5/apache2/php.ini`文件，据我所知应该设置错误报告。该文件的内容（关于错误）是：

```
;    display_errors
;      Default Value: On
;      Development Value: On
;      Production Value: Off

;    display_startup_errors
;      Default Value: Off
;      Development Value: On
;      Production Value: Off

;    error_reporting
;      Default Value: E_ALL & ~E_NOTICE
;      Development Value: E_ALL | E_STRICT
;      Production Value: E_ALL & ~E_DEPRECATED 
```

任何人都可以建议吗？如果我尝试类似的`$obj = new ObjectDoesntExist;`事情并没有告诉我`Fatal error: Class 'ObjectDoesntExist'`它会给我一个服务器 500 错误。

有什么建议吗？

* 我安装的模块是：`mysql-server mysql-client apache2 php5 libapache2-mod-php5 phpmyadmin`. 除此之外，它是 Ubuntu Server 12.04 LTS 的完全基础安装

编辑：如果我`ini_set('display_errors', '1');`在脚本开头使用它会正常显示错误，但是如何在整个站点范围内启用此功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T21:16:10.173

您粘贴的 php.ini 片段的每一行都有一个分号（; 字符）。分号是 php.ini 中注释的开头，因此不使用分号后面的所有内容。尝试手动将 display_errors 设置为 on 并将 error_reporting 设置为 E_ALL，或删除适当的分号来解决此问题。

此外，检查你的 apache 的错误日志，php 可能在那里记录它的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T02:42:13.777

请使用 sudo gedit /etc/php5/apache2/php.ini 和 Production Value 编辑 php.ini 文件，或者您也可以使用 ini_set('display_errors', '1'); 在你的 php 文件的顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T07:22:47.687

如果你有同样的错误，我有同样的问题，但与 php.ini 无关，在你开始在你的服务器上截图之前，首先检查你的代码。错误可能是缺少 } ) 或 ; 或类似的东西。这只是参考首先要做什么。

# java - 正则表达式拉出一个句子和前3句和后3句

> ID：11749045
> 
> 赞同：2
> 
> 时间：2012-07-31T21:09:12.517
> 
> 标签：java, regex

我无法将几个不同的正则表达式放在一起来做我需要的事情。说我有文字：

> 这是第一句。这是第二句！这是三个。这是四个。百事可乐中间句在这里是五个。给你六个？这是七个！第八句来了。九是最后一个。

我想把里面有“百事可乐”的句子和前三个和后三个抽出来：

> 这是第二句！这是三个。这是四个。百事可乐中间句在这里是五个。给你六个？这是七个！第八句来了。

这可以拉出百事可乐的句子：

```
(?i)((?=[^.\n]*\bpepsi\b)[^.\n]+\.?) 
```

这样就可以抽出pepsi句子和下面三个句子：

```
(?i)(?m)(?s)((((?=[^.?!\n]*\bpepsi\b)[^.\n]+[.?!]?){1})((?:\\s[a-z]\\.(?:[a-z]\\.)?|.)+?[.?!]+){3}) 
```

但我不知道如何拔出前三个。我可以拉出前三个：

```
(?i)(?m)(?s)((?:\\s[a-z]\\.(?:[a-z]\\.)?|.)+?[.?!]+){3} 
```

但是当我尝试做百事可乐句子和前三个时，就是做不到......

而且我开始怀疑正则表达式是否是一个不错的选择，因为 html 可能会在句子中混合。我认为这些正则表达式会没问题，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:26:26.803

这可能会做你想要的（正则表达式示例：[http](http://regexr.com?31mm4) ://regexr.com?31mm4 ）

```
^(?:.*?[.?!])?(((?:.*?[.?!]){3})(.*?pepsi.*?[.?!])((.*?[.?!]){3}))(.*?)$ 
```

它将七个句子（包含百事可乐的句子两边各三个）捕获为 1 美元，将前面的三个句子捕获为 2 美元，将目标捕获为 3 美元，将后面的三个捕获为 4 美元

使用您的样本数据：

```
($1)Whole capture:  This is sentence two! This is three. This is four. And pepsi middle sentence is here which is five. Here you go six? And this is seven here! Sentence eight is here.
($2)Three before:  This is sentence two! This is three. This is four. 
($3)Target:  And pepsi middle sentence is here which is five. 
($4)Three after:  Here you go six? And this is seven here! Sentence eight is here. 
```

当然，根据您使用的语言，可能有一种更清洁的方法

# c# - 从字符串中提取 HTTP

> ID：11749047
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:09:18.053
> 
> 标签：c#, .net

以下行来自阅读的网页，我正在从页面中提取我们网站的网址。我可以提取大部分内容，但其中一些看起来像下面的那个。

"javascript:outside('http://www.xyz.com/graduation.html')";

我希望能够提取以 http://....... 开头的链接

尝试了正则表达式和拆分字符串，但无法正确处理。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:18:15.863

使用正则表达式轻松完成。

```
(?<=javascript:outside\(\')http://[^']*(?=\'\)) 
```

...像这样：

```
var src="javascript:outside('http://www.xyz.com/graduation.html')";
var match=Regex.Match(src,@"(?<=javascript:outside\(\')http://[^']*(?=\'\))");
if(match.Success)
{
    Console.WriteLine(match.Value);
} 
```

# c++ - 使用 select() 进行非阻塞串行

> ID：11749048
> 
> 赞同：9
> 
> 时间：2012-07-31T21:09:18.737
> 
> 标签：c++, linux, select, serial-port

我正在做一个项目，我需要从串行端口读取和写入数据，并且由于我不会进入的原因，这需要是非阻塞的。select() 函数看起来像我想要使用的，但我正在努力获得一个有效的实现。

在 open_port() 中，我定义了端口的设置并且它是非阻塞的。在 otherselect() 中，我将描述符分配给 open_port() 并尝试读取。我在函数结束时还有一个 1 秒的睡眠调用，以试图避免读取对于硬件来说太快。

运行时，在我发送消息之前，我每秒都会打印出一条消息，显示“没有可用的数据”，在我发送消息之后它会打印出来，但它通常是带有二进制字符的片段。例如，当发送单词“buffer”时，它将打印“ffer”，后跟一个二进制字符。

我几乎没有使用 termios 或 select 的经验，所以任何建议都将不胜感激。

```
#include <iostream>
#include "stdio.h"
#include "termios.h"
#include "errno.h"
#include "fcntl.h"
#include "string.h"
#include "time.h"
#include "sys/select.h"

using namespace std;

int open_port(){
struct termios oldtio,newtio;
int serial_fd;
if ((serial_fd = open("/dev/ttyS0", O_RDWR | O_EXCL | O_NDELAY)) == -1) {
    cout << "unable to open" << endl;
    return -1;
}
if (tcgetattr(serial_fd, &oldtio) == -1) {
    cout << "tcgetattr failed" << endl;
    return -1;
}
cfmakeraw(&newtio); // Clean all settings
newtio.c_cflag = (newtio.c_cflag & ~CSIZE) | CS8 | B115200; // 8 databits
newtio.c_cflag |= (CLOCAL | CREAD);
newtio.c_cflag &= ~(PARENB | PARODD); // No parity
newtio.c_cflag &= ~CRTSCTS; // No hardware handshake
newtio.c_cflag &= ~CSTOPB; // 1 stopbit
newtio.c_iflag = IGNBRK;
newtio.c_iflag &= ~(IXON | IXOFF | IXANY); // No software handshake
newtio.c_lflag = 0;
newtio.c_oflag = 0;
newtio.c_cc[VTIME] = 1;
newtio.c_cc[VMIN] = 60;
if (tcsetattr(serial_fd, TCSANOW, &newtio) == -1) {
    cout << "tcsetattr failed" << endl;
    return -1;
}
tcflush(serial_fd, TCIOFLUSH); // Clear IO buffer
return serial_fd;
}

void otherselect(){
fd_set readfs;
timeval tv;
tv.tv_sec = 1;
tv.tv_usec = 0;
char * buffer = new char[15];
int _fd = open_port();
FD_ZERO(&readfs);
FD_SET(_fd, &readfs);
select(_fd+1, &readfs, NULL, NULL, &tv /* no timeout */);
if (FD_ISSET(_fd, &readfs))
{
    int r = read(_fd, buffer, 15);
    if(r == -1){
        cout << strerror(errno) << endl;
    }
    cout << buffer << endl;
}
else{
    cout << "data not available" << endl;
}
close(_fd);
sleep(1);
}

int main() {
    while(1){
        otherselect();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:38:52.320

当您使用 read() 时，您不会得到一个以空字符结尾的字符串，所以

```
cout<<buffer<<endl 
```

显然是个坏主意。做一个，

```
buffer[r]='\0'  #(provided r<15) 
```

在你打印出来之前。

# javascript - 什么是接口计算模式？

> ID：11749050
> 
> 赞同：1
> 
> 时间：2012-07-31T21:09:31.643
> 
> 标签：javascript, model-view-controller, design-patterns

我最近看到了很多关于这个特定模式的“猜测”和闲聊（因为我开始学习*Dojo 工具包*），但找不到任何关于这件事的明确信息。有人说，这是对频繁且“有害”（*他们，而不是我*）MVC 模式的解决方案。我列出了一些由 Interface-Compute 解决的 MVC“常见”大图问题。我找到[了这个网站](http://bdframework.org/docs.html)并阅读了它，但无法全面了解优缺点。

***输入输出***

*视图组件被定义为一个静态组件，从不直接接受用户的输入。也就是说，对用户输入的反应是由与呈现用户刺激不同的组件处理的。但 GUI 编程环境并没有以这种方式在输入和输出组件之间划清界限：精心设计的 GUI 编程环境被组件化为用户界面功能的嵌套容器。*

***忽略浏览器***

*如果我们考虑声称支持构建所谓的“富互联网应用程序”的 Web 应用程序框架，那么整个框架都驻留在服务器上，因此，显然视图和控制器都是在服务器上实现的。这使得浏览器完全不在设计模型中。如果这是我们心中的设计图，那么浏览器的功能就只是一个具有良好输出功能的终端。*

***ETC...***

我只是想知道所有 JavaScript 开发，如 Dojo Toolkit、Node.js 和其他一些用于光滑服务器端代码的开发（我认为我们可能会进入这种时代并重新思考我们使用 PHP 处理服务器端代码的方式、Java、Ruby on rails 等）。另外，能够在浏览器中调试服务器端和客户端代码真是太酷了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:17:49.007

我快速阅读了您提供的链接，以了解您引用的上下文。我强烈地感觉到作者对 MVC 和面向对象知之甚少。

模型和视图是对象的集合/类别/域。每个对象都是完全自包含的，应该遵循 OO 原则。控制器提供视图对象方法来与模型对象交互（因为一般来说，一个动作会改变许多协作的模型对象，这可能很复杂）。

Interface-Compute提供的解决方案：

> 例如，如果检测鼠标点击是在一个单独的组件中实现的，而不是呈现按下或未按下按钮的组件，那么当鼠标点击按钮时，必须构造一些重要的机制来在两个组件之间进行通信。当鼠标输入识别和按钮呈现在同一个组件中实现时，这个问题就消失了。

实施 OO 原则有很多好处。似乎完全错过了。所以我只能说，如果他不想用对象编码，MVC 可能不适合。

# php - 在 cakephp 中更改表头

> ID：11749052
> 
> 赞同：0
> 
> 时间：2012-07-31T21:09:44.853
> 
> 标签：php, cakephp

我正在尝试更改 cakephp 中的表格设置（特别是标题），但我似乎无法正常工作。

我尝试使用这篇文章中的建议，但我所做的任何更改都不会反映在我的表格中。 [cakephp 表格标题和宽度](https://stackoverflow.com/questions/4712068/cakephp-tableheaders-and-width)

我要做的就是打印表格标题并能够调整宽度。无论我将宽度更改为什么都行不通。我尝试将它作为一个类放在 css 文件中，然后调用该类但没有任何变化。

```
<?
$trOptions = array();
$thOptions = array('width'=>200);
echo $this->Html->tableHeaders(array('Date', 'Title', 'Active'),$trOptions, $thOptions);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:20:14.993

如果，无论出于何种原因，你想用 CakePHP 的方式来做这件事： `$this->Html->tableHeaders( array('Date', 'Title', 'Active'), array('class' => 'header_row'));`

然后你的 CSS 应该`.header_row th { width: 200px; }`在你的样式表中。
说真的，不要使用 CakePHP ......

# permissions - Google 网站将 Apps-Script 的所有权转让给其他所有者

> ID：11749055
> 
> 赞同：2
> 
> 时间：2012-07-31T21:10:15.853
> 
> 标签：permissions, google-apps-script, google-sites, ownership

我为我的组织创建了一个 Google 站点，但我要离开了。我为该站点设置了另一个所有者。今天早上，当他去编辑脚本时，我们注意到屏幕顶部出现以下错误：

```
 You no longer have permission to access this document. If this is an error, contact the document owner. 
```

这些脚本在新所有者登录的管理站点仪表板中可见。该脚本打开并可见，但“部署为 Web 应用程序”显示为灰色（即使在添加新版本之后也是如此）。如果您尝试复制脚本，它会尝试复制但随后出现红色数据存储错误。

在网站上编辑页面时，新所有者尝试插入应用程序脚本小工具，但未显示任何已发布的网络应用程序。

这与此处列出的问题不同：[Transfer Ownership of a file to another user in Google Apps Script](https://stackoverflow.com/questions/10796464/transfer-ownership-of-a-file-to-another-user-in-google-apps-script)。

我认为 Google 可能在一年前将其列为错误（[http://productforums.google.com/forum/#!topic/apps-script/3rUT5XRUQ2A](http://productforums.google.com/forum/#!topic/apps-script/3rUT5XRUQ2A)）

任何人有任何想法，或者我是否被迫将这些中的每一个发送给新所有者，让他们将它们复制并粘贴到新文件中，设置新权限，然后在每个受影响的页面上重新插入这些应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:19:10.893

迈克尔，

我只是试图转移一个谷歌网站和谷歌脚本的所有权，一切都很顺利。让我们尝试使用示例站点。请求访问[https://sites.google.com/site/testtransferownership/](https://sites.google.com/site/testtransferownership/)，我会让您成为所有者，然后您应该可以将我从列表中删除。

# javascript - div 较高的树没有收到点击“通过”较低的 div

> ID：11749059
> 
> 赞同：0
> 
> 时间：2012-07-31T21:10:28.090
> 
> 标签：javascript, jquery, html, css

我有一个包含另一个 div 的 div。它们都是使用 ajax 请求提取的一些数据动态创建的。

我有一个单击事件，我想将其附加到外部和内部 div，但是由于某种原因，当我单击下面第一张图片中呈现为蓝色的区域时，没有任何反应

![chrome 检查 div](../Images/3973196cda03a024c2236fd0d6cc3848.png)

这是 html 窗格中的结构

![div内容的html](../Images/22ce393c8c7731166b0b4166f66374cd.png)

这是执行事件的函数

```
$(document).ready(function () {
    $('body').click(function (event) {
        if ($(event.target).is('#INT-note')) {
            if (!$('#INT-note').hasClass('expanded_note')) {
                $('#INT-note').addClass('expanded_note');

                $('#INT-note').animate({
                    height: '300',
                    width: '200',
                    overflow: 'scroll'
                }, 500, function () {

                    $('#INT-note_text').fadeIn(100);
                });

            } else {

                $('#INT-note').removeClass('expanded_note');
                $('#INT-note_text').fadeOut(100);
                $('#INT-note').animate({
                    height: '45',
                    width: '45',
                    overflow: 'hidden'
                }, 500, function () {
                    //console.log('test');
                });
            }

        }
    });
}); 
```

有什么方法可以让较低的 div 通过“顶级”div 接收点击，这样我就没有这样的行为`$('#lower, .upper')`或其他什么？

`[pointer-events:none;][3]`到目前为止还没有为我工作，因为它似乎在我想要点击的下面的 div 上触发点击功能。我只想降一级。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:17:45.040

事件绑定似乎有问题，因为`div`s是动态插入的，在body上使用[`On`](http://api.jquery.com/on/)，`click`所以它会自动将事件附加到插入的新元素上。

```
 $('body').on('click',function (event) {
     //same code
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:22:14.557

您不能使用普通`click`或`bind`动态添加的内容，try`live`或`delegate`更新的`on`.

# database - 发送电子邮件后提交“已发送电子邮件”操作时，如何避免发送重复的电子邮件？

> ID：11749060
> 
> 赞同：1
> 
> 时间：2012-07-31T21:10:28.643
> 
> 标签：database, email, distributed-transactions

当用户在我的网站上注册时，我使用 email_sent = 'NO' 在数据库中创建用户记录。然后我有一个 cron 作业，每隔几分钟发送一次欢迎电子邮件。它选择 email_sent = 'NO' 的所有用户记录并发送欢迎电子邮件。

如果电子邮件发送成功，则将用户记录更新为 email_sent='YES'。我的问题是，如何避免电子邮件发送成功但用户记录更新失败并且下次运行 cron 作业时会发送重复电子邮件的情况。即使我使用了数据库事务并且在发送电子邮件之前更新了记录但之后提交，如果提交失败，我也会遇到相同的情况，即发送重复的电子邮件。

另一种方法是将记录更新为 email_sent='YES' 并立即提交，然后尝试发送电子邮件。但是，如果电子邮件发送失败，则不会发送电子邮件。

有什么方法可以保证只发送一次电子邮件吗？我意识到由于许多外部因素，电子邮件传递最终可能会失败，但我只想确保我的 SMTP 服务器成功地将其推倒一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:24:24.327

您的评论指出提交没有失败，因此您可能担心风。

保持事务尽可能小，并让它失败，无论哪种方式在您的系统中更可接受......

```
BeginTransaction;
LookupRecord;

SendMail;

if(SentSuccessfully)
{
    UpdateRecord(Sent=True);
    CommitTransaction;
}
else
{
    RollbackTransaction;
} 
```

或者，您可以更复杂地执行此操作，并且无需围绕电子邮件功能进行交易，但我认为这不是更好：

```
BeginTransaction;
LookupRecord;
UpdateRecord(Sent=True);
CommitTransaction;

SendMail;

if(!SentSuccessfully)
{
    UpdateRecord(Sent=False);
} 
```

无论哪种方式，如果您有错误并且没有将正确的值提交给数据库，那么在不引入（可能不必要的）复杂性的情况下，您将无法避免它。你真的应该专注于使更新和事务坚如磐石，这样它就不会更新失败。

# php - 表单中的 Textarea 未使用 jQuery AJAX 通过 POST 提交

> ID：11749064
> 
> 赞同：8
> 
> 时间：2012-07-31T21:11:06.633
> 
> 标签：php, jquery, html, ajax, post

由于我不知道的原因，我的表单没有提交输入到我的`<textarea>`.

阿贾克斯代码：

```
$.ajax({
type:'POST', 
url:'****.php', 
data:$('#blogForm').serialize(),
success: function(responseSubmit) { blah blah etc... 
```

输入工作正常，并正确发布到我的数据库。

表格是：

```
<form id="blogForm">
                        <input type="date" name="date" id="blogDate">
                        <input type="text" name="title" id="blogTitle">
                        <textarea name="blogContent" id="blogBody"></textarea>
                        <input type="submit" name="submit" id="blogSubmit">
                    </form> 
```

当我在萤火虫中检查时，我得到的是： `date=09%2F25%2F1986&title=Title&blogContent=`

如您所见， blogContent 是空的。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:28:29.510

我没有提到我在文本区域附加了一个所见即所得的编辑器，称为 nicEditor。显然有一个错误迫使 jQuery 不序列化 textarea。一旦 nicEditor 被删除，它工作正常。感谢所有的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:41:11.927

改变：

```
 data:$('#blogForm').serialize(), 
```

至：

```
 data:$('#blogForm').find('input, select, textarea, button').serialize(), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T12:36:46.620

如果您使用的是 ajaxSubmit，那么来自任何文本编辑器的 textarea 的 POST 数据都将不起作用。

因此，您必须获取值并将其放入隐藏字段，然后您才能获得 POST 值，如下所示：

```
<textarea id="safety" name="safety" style="width:600px;height:70px"></textarea>
<input type="hidden" name="safety_precautions" id="safety_precautions"> 
```

在ajax提交之前

```
$('#safety_precautions').val(tinyMCE.get('safety').getContent()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:32:04.023

Add return false onsubmit

```
<code>
<form id="blogForm" onsubmit="return(false);">  
    <input type="date" name="date" id="blogDate">
    <input type="text" name="title" id="blogTitle">
    <textarea name="blogContent" id="blogBody"></textarea>
    <input type="submit" name="submit" id="blogSubmit">    
  </form>​
</code> 
```

Call ajax on button click

```
$("#blogSubmit").on('click',function(){      

$.ajax({
type:'POST', 
url:'****.php', 
data:$('#blogForm').serialize(),
success: function(responseSubmit) { blah blah etc...

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:49:09.107

您不需要删除您的编辑器 - 它们通常通过在每次击键后或表单提交时使用 JS 更新隐藏的文本区域来工作，因此只要编辑器正确无误，这不会有什么不同。

我想这个问题正如菲利普所建议的那样 - 你的 ID 和姓名属性不同。所有其他都匹配得很好。当它序列化时，它必须使用 ID，并且大概在另一端的脚本中，您希望名称会出现（正常的表单提交会这样做）。

由于您通过 $POST 发送，只需执行 var_dump($_POST); 在您的脚本中，然后将其记录到控制台或在您的 JavaScript 中提醒它 - 查看通过 AJAX 发送到您的脚本的确切内容。

如果 textarea 不存在任何名称，那么您知道问题肯定是编辑器，如果是，请尝试手动调用 nicEditor 的方法，这将更新隐藏的 textarea。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T18:35:51.440

您的文本区域名称是 blogContent，但 id 是 blogBody。# 选择器使用 id，而不是名称。

# java - 为什么我会收到未经检查的演员表警告？

> ID：11749065
> 
> 赞同：4
> 
> 时间：2012-07-31T21:11:06.883
> 
> 标签：java

在 JTree 中，我使用此代码，但没有收到任何警告：

```
Enumeration<DefaultMutableTreeNode> en = (Enumeration<DefaultMutableTreeNode>)selNode.postorderEnumeration(); 
```

但是当我使用以下代码时，会收到`unchecked cast`警告：

```
Enumeration<DefaultMutableTreeNode> en = (Enumeration<DefaultMutableTreeNode>)selNode.pathFromAncestorEnumeration( this.getRootNode() ); 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:15:02.530

这基本上是由于泛型类型擦除。在执行时，对象只会知道它是`Enumeration<E>`某种类型的 - 所以它*实际上*`E`无法检查它是否是.*`Enumeration<DefaultMutableTreeNode>`*

 *有关更多信息，尤其是[类型擦除](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#What%20is%20type%20erasure?)条目，请参阅[Java 泛型常见问题解答。](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)

编辑：我不知道为什么第一个会在没有警告的情况下成功，而第二个不会。我希望*两者都会*发出警告。没有我的经验，你真的*不能*总是逃脱`@SuppressWarnings("unchecked")`- 尽可能减少它是值得的，但这是 Java 泛型生活中不幸的事实:(

编辑：我实际上得到了*这两个*警告：

```
import java.util.*;
import javax.swing.tree.*;

public class Test {
    public static void main(String[] args) {
        DefaultMutableTreeNode node = null;

        Enumeration<DefaultMutableTreeNode> en1 = 
            (Enumeration<DefaultMutableTreeNode>)node.postorderEnumeration();
        Enumeration<DefaultMutableTreeNode> en2 = 
            (Enumeration<DefaultMutableTreeNode>)node.pathFromAncestorEnumeration(null);
    }
} 
```

输出：

```
c:\Users\Jon\Test>javac -Xlint Test.java
Test.java:8: warning: [unchecked] unchecked cast
        Enumeration<DefaultMutableTreeNode> en1 = (Enumeration<DefaultMutableTre
eNode>)node.postorderEnumeration();

                                ^
  required: Enumeration<DefaultMutableTreeNode>
  found:    Enumeration
Test.java:9: warning: [unchecked] unchecked cast
        Enumeration<DefaultMutableTreeNode> en2 = (Enumeration<DefaultMutableTre
eNode>)node.pathFromAncestorEnumeration(null);

                                       ^
  required: Enumeration<DefaultMutableTreeNode>
  found:    Enumeration
2 warnings 
```*

# iphone - UITextView 文本操作

> ID：11749066
> 
> 赞同：0
> 
> 时间：2012-07-31T21:11:09.813
> 
> 标签：iphone, ios, nsstring, uibutton, uitextview

我正在开发这个应用程序，我在屏幕上有一个 UITextView，其中包含如下文本：

```
 1
     121
    12321
   1234321
  123454321
 12345654321
1234567654321 
```

除了这个 UITextView，我还有 7 个 UIbuttons 1、2、3、4、5、6、7。当点击相应的 UIbutton 时，我想在 UITextview 中使单个数字变为**粗体**。例如，按下 UIButton 1 将使所有**1**变为粗体。

我只是想知道是否有任何 NSString 关联方法或 UITextView 方法允许我解析它的内容以获得可以让我实现我的问题的特定字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:10:37.833

有许多 NSString 方法可以帮助解析字符串中的项目：

```
– rangeOfCharacterFromSet:
– rangeOfCharacterFromSet:options:
– rangeOfCharacterFromSet:options:range:
– rangeOfString:
– rangeOfString:options:
– rangeOfString:options:range:
– rangeOfString:options:range:locale:
– enumerateLinesUsingBlock:
– enumerateSubstringsInRange:options:usingBlock: 
```

但是，用粗体显示一个字符的字符串并不容易。您可能必须使用 CoreText 例程才能到达那里。观看有关使用 CoreText 的 WWDC 会议可能对您有好处

# scripting - 使用自定义安装程序卸载多个程序

> ID：11749069
> 
> 赞同：0
> 
> 时间：2012-07-31T21:11:33.807
> 
> 标签：scripting, installation, inno-setup

我遇到了一个有趣的情况，我需要检查机器上是否存在多个程序，然后在安装一些我捆绑在使用 Inno 制作的自定义安装程序包中的软件之前删除它（如果存在）设置。这将搭载以下问题中列出的工作：

*   [如何检测旧安装并提供删除？](https://stackoverflow.com/questions/11739317/how-to-detect-old-installation-and-offer-removal)
*   [InnoSetup：如何自动卸载以前安装的版本？](https://stackoverflow.com/questions/2000296/innosetup-how-to-automatically-uninstall-previous-installed-version)
*   [如何在使用 Inno Setup 设置之前运行文件](https://stackoverflow.com/questions/3493416/how-to-run-a-file-before-setup-with-inno-setup)

我从[这里](http://www.lextm.com/2007/08/inno-setup-script-sample-for-version.html)找到了一些好主意。但是，我不确定如何使用它来检查是否安装了多个程序，然后卸载它们。例如，对于我正在尝试构建的自定义安装程序，工作流程看起来像这样：

*   仅当旧程序 A 不存在时才运行新程序 A 的安装程序。如果旧程序A 存在，则卸载并继续安装新程序A。
*   仅当旧程序 B 不存在时，才运行新程序 B 的安装程序。如果存在旧程序B，则卸载并继续安装新程序B。
*   执行一些清理命令，为新安装程序A和新安装程序B的配置添加一些注册表项。
*   出口

有人建议可能有一种方法可以使用链接脚本中的自定义变量，以便您可以在安装其他捆绑软件之前检查并卸载多个程序。但是，每次我尝试创建新变量或自定义变量时，安装程​​序将不再编译，或者有时它不会按预期工作（即一个程序会卸载而另一个程序不会）。为此，我的问题是关于创建这些自定义变量以及如何使用或扩展它来循环代码，而不是随机尝试一遍又一遍地复制和粘贴同一组代码。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:44:59.240

我很确定 TLama 或有经验的人会清理代码，但您可以使用类似的东西进行检查和卸载：

```
function GetUninstallStringA: string;
var
  sUnInstPathA: string;
  sUnInstallStringA: String;
begin
  Result := '';
  sUnInstPathA := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\{{A227028A-40D7-4695-8BA9-41DF6A3895C7}_is1'); //Your AppA GUID/ID
  sUnInstallStringA := '';
  if not RegQueryStringValue(HKLM, sUnInstPathA, 'UninstallString', sUnInstallStringA) then
    RegQueryStringValue(HKCU, sUnInstPathA, 'UninstallString', sUnInstallStringA);
  Result := sUnInstallStringA;
end;

function GetUninstallStringB: string;
var
  sUnInstPathB: string;
  sUnInstallStringB: String;
begin
  Result := '';
  sUnInstPathB := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\{{A227028A-40D7-4695-8BA9-41DF6A3895C8}_is1'); //Your AppB GUID/ID
  sUnInstallStringB := '';
  if not RegQueryStringValue(HKLM, sUnInstPathB, 'UninstallString', sUnInstallStringB) then
    RegQueryStringValue(HKCU, sUnInstPathB, 'UninstallString', sUnInstallStringB);
  Result := sUnInstallStringB;
end;

function IsUpgradeA: Boolean;
begin
  Result := (GetUninstallStringA <> '');
end;

function IsUpgradeB: Boolean;
begin
  Result := (GetUninstallStringB <> '');
end;

function InitializeSetup: Boolean;
var
V: Integer;
iResultCodeA, iResultCodeB: Integer;
sUnInstallStringA, sUnInstallStringB: string;
AppA, AppB: Boolean;
    begin
      Result := True; // in case when no previous versions were found
      AppA:= RegKeyExists(HKEY_LOCAL_MACHINE, 'Software\Microsoft\Windows\CurrentVersion\Uninstall\{A227028A-40D7-4695-8BA9-41DF6A3895C7}_is1'); //Your AppA GUID/ID
      AppB:= RegKeyExists(HKEY_LOCAL_MACHINE, 'Software\Microsoft\Windows\CurrentVersion\Uninstall\{A227028A-40D7-4695-8BA9-41DF6A3895C8}_is1'); //Your AppB GUID/ID
        if (AppA) and (AppB) then begin
          V := MsgBox(ExpandConstant('Hey! Old versions of Apps A and B were detected. Do you want to uninstall them?'), mbInformation, MB_YESNO); 
//Custom Message if App installed
          if V = IDYES then
          begin
            sUnInstallStringA := GetUninstallStringA;
            sUnInstallStringA :=  RemoveQuotes(sUnInstallStringA);
            Exec(ExpandConstant(sUnInstallStringA), '/silent', '', SW_SHOW, ewWaitUntilTerminated, iResultCodeA);
            sUnInstallStringB := GetUninstallStringB;
            sUnInstallStringB :=  RemoveQuotes(sUnInstallStringB);
            Exec(ExpandConstant(sUnInstallStringB), '/silent', '', SW_SHOW, ewWaitUntilTerminated, iResultCodeB);
            Result := True; //if you want to proceed after uninstall
           //Exit; //if you want to quit after uninstall
          end
          else begin
            MsgBox('You have to uninstall older versions of Apps A and B first. Installation will now be terminated.', mbInformation, MB_OK);
            Result := False; //when older versions present and not uninstalled
       end;
      end; 
          if (AppA) and (not AppB) then begin
          V := MsgBox(ExpandConstant('Hey! Old version of App A was detected. Do you want to uninstall it?'), mbInformation, MB_YESNO); 
//Custom Message if App installed
          if V = IDYES then
          begin
            sUnInstallStringA := GetUninstallStringA;
            sUnInstallStringA :=  RemoveQuotes(sUnInstallStringA);
            Exec(ExpandConstant(sUnInstallStringA), '/silent', '', SW_SHOW, ewWaitUntilTerminated, iResultCodeA);
            Result := True; //if you want to proceed after uninstall
           //Exit; //if you want to quit after uninstall
          end
          else begin
            MsgBox('You have to uninstall older version of App A first. Installation will now be terminated.', mbInformation, MB_OK);
            Result := False; //when older versions present and not uninstalled
       end;
      end;  
          if (AppB) and (not AppA) then begin
          V := MsgBox(ExpandConstant('Hey! Old version of App B was detected. Do you want to uninstall it?'), mbInformation, MB_YESNO); 
//Custom Message if App installed
          if V = IDYES then
          begin
            sUnInstallStringB := GetUninstallStringB;
            sUnInstallStringB :=  RemoveQuotes(sUnInstallStringB);
            Exec(ExpandConstant(sUnInstallStringB), '/silent', '', SW_SHOW, ewWaitUntilTerminated, iResultCodeB);
            Result := True; //if you want to proceed after uninstall
           //Exit; //if you want to quit after uninstall
          end
          else begin
            MsgBox('You have to uninstall older version of App B first. Installation will now be terminated.', mbInformation, MB_OK);
            Result := False; //when older versions present and not uninstalled
        end;
       end;
      end; 
```

然后，您可以将 AppA 和 AppB 的新安装程序嵌入到此安装程序中，并通过提取到临时和执行来运行它们。例子：

```
[Files] 
Source: ".\AppA\setup_appa.exe"; DestDir: "{tmp}"; Flags: deleteafterinstall 
Source: ".\AppB\setup_appb.exe"; DestDir: "{tmp}"; Flags: deleteafterinstall 

[Run] 
Filename: "{tmp}\setup_appa.exe"; Flags: waituntilterminated skipifdoesnotexist; StatusMsg: "Installing App A..." 
Filename: "{tmp}\setup_appa.exe"; Flags: waituntilterminated skipifdoesnotexist; StatusMsg: "Installing App A..." 
```

或者您可以编写 Executing 脚本结合`[Files]`和`[Code]`部分：

嵌入 App A 和 App B 的安装程序：

```
[Files]
Source: ".\AppA\setup_appa.exe"; DestDir: "{tmp}"; Flags: dontcopy 
Source: ".\AppB\setup_appb.exe"; DestDir: "{tmp}"; Flags: dontcopy 
```

然后调用执行`[Code]`：

```
[Code] 
```

扩大`function InitializeSetup: Boolean;`？或放置在其他地方，例如`procedure CurPageChanged(CurPageID: Integer);`+与...`if CurPageID = wpInstalling then
//YOUR RUN SECTION HERE end;`

```
ExtractTemporaryFile('setup_appa.exe');
Exec(ExpandConstant('{tmp}'+'\setup_appa.exe'), '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode); 
```

# jquery - 调整窗口大小时获取模态以动态调整大小

> ID：11749070
> 
> 赞同：1
> 
> 时间：2012-07-31T21:11:33.980
> 
> 标签：jquery, html, css, modal-dialog, jquery-blockui

我已经设法让我的 Block UI 模态死点居中，但现在的问题是，当窗口调整大小（变小或变大）时，模态（和周围的覆盖）不会动态调整大小。有没有办法可以使用 jQuery 实现这一点？这是我到目前为止所做的：http: [//jsfiddle.net/2dpc7/](http://jsfiddle.net/2dpc7/)。如果您尝试拖动“结果”窗格，那么您会看到模式并没有真正动态调整以适应。为什么是这样？

**HTML**

```
<div style="float: left;">
        <a id="about" class="windowClass" href="#">About</a>&nbsp;&middot;
        <a id="terms" class="windowClass" href="#">Terms</a>&nbsp;&middot;
        <a id="privacy" class="windowClass" href="#">Privacy</a>&nbsp;&middot;
        <a id="language" class="windowClass" href="#">Language: English</a>
</div>
<div id="register_win" class="modal">
    <span class="modal_header">Register</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="register_close">
    </div>
</div>
<div id="about_win" class="modal">
    <span class="modal_header">About</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="about_close">
    </div>
</div>
<div id="terms_win" class="modal">
    <span class="modal_header">Terms</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="terms_close">
    </div>
</div>
<div id="privacy_win" class="modal">
    <span class="modal_header">Privacy</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="privacy_close">
    </div>
</div>
<div id="forgotpwd_win" class="modal">
    <span class="modal_header">Forgotten your password?</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="forgotpwd_close">
    </div>
</div>
<div id="language_win" class="modal">
    <span class="modal_header">Language</span>
    <div class="modal_close">
        <img src="http://www.ezpz.co.za/assets/close-button-25f4a789916c34b8c927d7d0ec98410b.gif" id="language_close">
    </div>
</div> 
```

**CSS** ​</p>

```
.modal {
    display: none;
    padding: 10px;
    cursor: default;
}
.modal_header {
    font-family: Verdana, Geneva, sans-serif;
    float: left;
}
.modal_close {
    cursor: pointer;
    float: right;
}​ 
```

**JS**

```
$(document).ready(function () {

    $('.windowClass').click(function () { // <-- bind to all window elements with that class
        $.blockUI({
            message: $('#' + this.id + '_win'),
            css: {
                top:  ($(window).height() - 200) /2 + 'px', 
                left: ($(window).width() - 200) /2 + 'px', 
                width: '200px'
            }
        });
    });

    $('[id$=_close]').click(function () { //<-- gets all elements with id's that end with close
        $.unblockUI();
        return false;
    });

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:15:58.070

使用侦听器来处理调整大小，然后调整模态窗口的大小。或者，您可以在 CSS 中使用百分比来处理模态窗口。

```
$(window).bind("resize", function() {
   var newWindowHeight = $(window).height(),
       newWindowWidth = $(window).width();

   //Do Resizing Here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:17:16.783

在`window.resize`事件中，您可以重新定位元素：

```
$(window).on('resize', function () {
    $('body').children('.blockMsg').css({
        top  : ($(window).height() - 40) /2 + 'px', 
        left : ($(window).width() - 200) /2 + 'px'
    });
});​ 
```

这是一个演示：http: [//jsfiddle.net/2dpc7/2/](http://jsfiddle.net/2dpc7/2/)

这将找到任何当前的 blockUI 模态并更新它们的`top`/ `left`CSS 属性以使它们保持居中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:17:22.400

[http://jsfiddle.net/SzH4Y/](http://jsfiddle.net/SzH4Y/)

将固定宽度更改为 %?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T21:34:03.313

只需计算宽度、左右以进行水平调整大小。左+右+宽度=100%。并对垂直调整大小的顶部、底部和高度执行相同的操作。这是演示[http://jsfiddle.net/SzH4Y/2/](http://jsfiddle.net/SzH4Y/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-02T08:24:33.393

使用此功能集中任何绝对元素

```
 function centeralizeToParent(parentElement, absoluteChild) {
        var parentHeight = parseFloat($(parentElement).css('height'));
        var parentWidth = parseFloat($(parentElement).css('width'));
        var childHeight = parseFloat($(absoluteChild).css('height'));
        var childWidth = parseFloat($(absoluteChild).css('width'));
        var YMargin = (parentHeight - childHeight) / 2;
        var XMargin = (parentWidth - childWidth) / 2;
        YMargin = YMargin < 0 ? 0 : YMargin;
        XMargin = XMargin < 0 ? 0 : XMargin;
        $(absoluteChild).css('top', YMargin + 'px');
        $(absoluteChild).css('left', XMargin + 'px');
    } 
```

在调整大小事件中调用它

```
$(window).resize(function () {
            centeralizeToParent($('html')[0], modal);)
}); 
```

# ruby-on-rails - Rails 路由顶级路由和信息架构

> ID：11749072
> 
> 赞同：2
> 
> 时间：2012-07-31T21:11:34.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我正在寻找一些关于使用顶级路由的理念和技术实践的反馈，这在 Rails 中不是包罗万象的。

例子：

```
# routes.rb
get '/cities' => 'cities#index'
get '/:city_id' => 'cities#show', as: :city, city_id:/([a-z\-\d]+)/ 
```

我有大约 30k 个城市：city_id 应该仅限于匹配“/los-angeles”之类的内容，而不是“/somewrongthing.jpg”。由于这是最后一条路线，因此它已成为一个包罗万象的路线。如果找不到城市，我目前正在渲染 404，但这意味着每次丢失的链接通过时都会对数据库造成打击。我通过约束对其进行了限制，但它并不是我所希望的优雅解决方案。

除了将其放在 /city/:city_id 之类的下方之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:22:08.860

我认为您应该在路线本身中寻找一些替代方法来处理此问题。30,000 条路线只会将 RAM 问题换成 DB 问题。也许您有一些普通的 ruby​​ 对象（可能是文件支持的？），它可以充当城市缓存，并且您可以在每个到达您的城市路线的请求上查询它。

像这样的东西，也许？

```
# in config/routes.rb
get '/:city' => 'cities#show', constraints: CityConstraint.new

# in lib/city_constraint.rb
class CityConstraint
  def matches?(request)
    city_valid?(request.params[:city])
  end

  private

  def city_valid?(city)
    # I dunno.. Redis, look it up in a text file, hash, etc.
    # ..look it up in activerecord and cache it at startup?
    # or whatever...
  end
end 
```

# magento - Magento：如何将登录用户重定向到主页

> ID：11749080
> 
> 赞同：1
> 
> 时间：2012-07-31T21:12:35.340
> 
> 标签：magento, redirect, login

我正在使用 Magento 1.7，我想在登录到主页后重定向我的所有客户。

我正在使用[扩展程序](http://www.magentocommerce.com/magento-connect/wabism-members-only-7590.html)向未登录的用户关闭该站点。我没有使用默认登录页面，而是带有 facebook 连接按钮的 CMS 页面。

现在，在用户使用 facebook 登录后，magento 正在加载没有 facebook 连接按钮的同一页面。

我看过这个[帖子](https://stackoverflow.com/questions/10470629/magento-how-to-redirect-to-homepage-after-register)，但没有找到 AccountManager 来修改它。它在哪里？另外，我不确定这是否可行，因为在我的情况下，重定向不会发生在客户的仪表板上，而是发生在我创建的 cms 页面上。

我如何（以及在​​代码中的何处）检查用户是否已登录并将他/她重定向到主页？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:17:29.053

一种方法是挂钩`**customer_login**`事件并在客户会话中设置 afterAuthUrl。

```
...
public function customerLogin(Varient_Event_Observer $observer) {
    /* @var $session Mage_Customer_Model_Session */
    $session = Mage::getSingleton('customer/session');
    $session->setAfterAuthUrl(Mage::getBaseUrl());
} 
```

`AccountController` `_loginPostRedirect`您可以在方法中查看 Magento 的逻辑`(app/code/core/Mage/Customer/controllers/AccountController.php)`。根据实现，您会注意到还可以发送引荐来源请求参数（注意：它必须`base64`通过`Mage::helper('core')->urlEncode())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:58:36.860

使用@beep 逻辑提到的事件和来自客户会话的方法`Mage::getSingleton('customer/session')->setBeforeAuthUrl($url);`有助于重定向到所需的页面。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:00:08.477

我相信 AITOC 做了一个扩展来做你想做的事情。如果您有兴趣购买而不是建造。

# jquery - ModalPopupExtender 在移动设备上的定位

> ID：11749082
> 
> 赞同：0
> 
> 时间：2012-07-31T21:12:49.473
> 
> 标签：jquery, asp.net, jquery-mobile, positioning, modalpopupextender

仅在移动设备浏览器中呈现时，我遇到了 ModalPopupExtender 的问题。我的应用程序要求用户通过点击/拖动选择一个时间段，当他们停止拖动时，会出现一个对话框以确认他们的时间选择。用户然后单击确定以注册时间或取消。问题是，当在移动浏览器中使用此页面时，用户向下滚动到标题的视图之外，选择时间，对话框打开（背景块）但停留在标题中（居中），因此需要用户向上滚动确认或取消。在 MobiOne 模拟器和所有不在移动屏幕大小的浏览器中执行时，我可以确认我的脚本功能。对话框被锁定在顶部，所以我确定这是我的 CSS。让我解释一下我的设置...

我使用 WURFL 库进行设备检测，因此每个设备都有一个像这样的 .css 部分。

```
@media screen and (max-width: 320px) {
/* styles: iPhone3 portrait, */

    .rPanel
    {
    background-color: red;
    border: 1px solid black;
    padding:4px 4px 4px 4px;    
    }
}
@media screen and (max-width: 480px) {
/* styles: iPhone3 landscape, android nexus portrait*/

    .rPanel
    {
    background-color: green;
    border: 1px solid black;
    padding:4px 4px 4px 4px;    
    }
} 
```

这是我的面板和 ModelPopupExtender。rPanel 是 div=对话框；modalExt 是相关的扩展器...

```
<asp:UpdatePanel ID="updatePanel" class="updatePanel" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <div runat="server" id="ruleViolationsMsg" class="rulePanel">
            <asp:Label ID="ErrorHeader" runat="server" CssClass="ErrorHeader"></asp:Label>
            <br />
            <asp:PlaceHolder ID="errorMsgControls" runat="server" />
        </div>
        <asp:Button ID="ruleModalBtn" runat="server" Style="display: none;" />
        <asp:Button ID="ruleModalCloseBtn" runat="server" Text="" Style="display: none;" />
        <div id="rPanel" class="rPanel" runat="server" style="display: none;">
            <table>
                <tr>
                    <th id="tableTh" runat="server" colspan="2" class="tableTh">
                        Confirm Reservation
                    </th>
                </tr>
                <tr>
                    <td colspan="2">
                        <asp:Label ID="errorMsg" runat="server" Visible="false" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="selectedResource" class="label">
                            Resource:
                        </label>
                    </td>
                    <td>
                        <asp:Label ID="selectedResource" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="selectedDate" class="label">
                            Date:
                        </label>
                    </td>
                    <td>
                        <asp:Label ID="selectedDate" runat="server"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="startTime" class="label">
                            Start Time:
                        </label>
                    </td>
                    <td>
                        <asp:Label ID="startTime" runat="server" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="endTime" class="label">
                            End Time:
                        </label>
                    </td>
                    <td>
                        <asp:Label ID="endTime" runat="server" />
                    </td>
                </tr>
                <tr>                      
                    <td>
                        <asp:Button ID="cancel" runat="server" Text="Cancel" CssClass="submit" OnClick="cancel_Click" />
                        <asp:Button ID="reserve" runat="server" Text="Reserve" CssClass="submit" OnClick="reserve_Click" UseSubmitBehavior="true" />
                    </td>
                </tr>
            </table>
        </div>
        <asp:Button ID="progressBtn" runat="server" OnClientClick="progressBtn();" Style="display: none;" />
        <asp:Button ID="progressCloseBtn" runat="server" Text="" CssClass="progressBtn" Style="display: none;" />
        <div id="progressPanel" class="progressPanel" style="display: none">
            <label class="progressText">
                Please wait...</label>
            <div id="progress" class="progress">
            </div>
            <div id="progressDiag" class="progressDialog">
            </div>
        </div>
        <asp:HiddenField ID="reservationStatus" Value="0" runat="server" />
        <asp:ModalPopupExtender ID="progressModal" runat="server" TargetControlID="progressBtn"
            PopupControlID="progressPanel" BackgroundCssClass="modalPopup" CancelControlID="progressCloseBtn"
            BehaviorID="progressModal" >
        </asp:ModalPopupExtender>
        <asp:GridView ID="reservegrid" runat="server" CssClass="reserveGrid" AutoGenerateColumns="true"
            OnRowDataBound="reservegrid_RowDataBound" HeaderStyle-CssClass="gridHeader" HorizontalAlign="center">
        </asp:GridView>
        <asp:HiddenField ID="sRes" runat="server" EnableViewState="true" />
        <asp:ModalPopupExtender ID="modalExt" runat="server" TargetControlID="dummyModal"
            BackgroundCssClass="modalPopup" CancelControlID="dummyModal" PopupControlID="rPanel"
            BehaviorID="md" />
        <asp:Button ID="dummyModal" runat="server" Text="" Style="display: none;" CausesValidation="false" />
        <asp:HiddenField ID="rSelected" runat="server" />
        <asp:HiddenField ID="rStart" runat="server" />
        <asp:HiddenField ID="rEnd" runat="server" />
        <asp:HiddenField ID="rLastSlot" runat="server" Value="0" />
        <asp:HiddenField ID="rCompleted" runat="server" Value="0" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="reserve" EventName="Click" />
        <asp:AsyncPostBackTrigger ControlID="cancel" EventName="Click" />
        <asp:AsyncPostBackTrigger ControlID="ruleModalBtn" EventName="Click" />
    </Triggers>
</asp:UpdatePanel> 
```

用户选择时间段并加载值后，我的 jquery 调用 launchModal()..

```
 $('input[id$="rCompleted"]').val("0");
                            launchModal(); 
```

launchModal 显示我的“md”（扩展器中的行为 ID）对话框，其中包含值...

```
 launchModal = function () {
        $find('md').show();           
    }; 
```

我有一个尚未部署的“粘性”对话框扩展器，因为 AJaxControlKit ModalPopupExtender 锚，就像我说的那样，它在移动设备上不适合我。您是否建议使用 jquery UI 对话框“Sticky”扩展器来完成这项工作？它会解决我的锚问题吗？部署此扩展器的“最佳”方式是什么？我要完全删除 ModalPopupExtender 吗？

如果不是，您如何建议我将对话框锚定在单击位置，但允许用户滚动且对话框始终可见？谢谢你的帮助，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:07:31.560

你最好使用 jQuery 移动弹出窗口。它是 1.1.2 beta 的一部分，但很快就会发布。一个是能够设置弹出源，方式等。

我找不到 1.1.2 演示页面，但你可以看到[1.2.0 pre 的演示](http://jquerymobile.com/demos/1.2.0-pre/docs/pages/popup/index.html)。1.1.2 的发布是几天之内的事情，您已经可以从[jQuery Mobile 下载生成器](http://jquerymobile.com/download-builder/)下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:46:03.613

经过大量搜索，我找到了解决问题的方法。ModalPopupExtender 适用于互联网，但不是移动设备，因此要使对话框正确定位，您必须执行以下操作..

1.  在具有 head 和 form 标记的页面上（我使用 Mobile.Master 页面）在 head 部分添加以下脚本。确保保留“var x = null; var y = null;” 在 jquery 块之外保持 vars 全局...

    变量 x = 空；变量 y = 空；

    ```
    jQuery(function ($) {

        // Bind the mouse event to the document so that we
        // can see what kind of coordinates we have to play
        // with.
        $(document).click(
            function (event) {

                // Client variables.

                //console.log("clientX/Y: " + event.clientX + ", " + event.clientY);

                // Page variables. NOTE: These are the ones
                // that are officially supported by the
                // jQuery Event object.

                console.log("pageX/Y: " + event.pageX + ", " + event.pageY);

                x = event.pageX;
                y = event.pageY;

                //try this if its not centering
                //var offset = $('#updatePanel').offset();
                //x = event.pageX - offset.left;
                //y = event.pageY - offset.top;

            });
        }); 
    ```

2.  如果您使用面板或更新面板作为模式的父级，请分配一个将父级设置为“相对”定位的类...

    asp:UpdatePanel ID="updatePanel" runat="server" CssClass="reserve_UpdatePanel" UpdateMode="Conditional"

    .reserve_UpdatePanel {
    位置：相对；
    }

3.  在我的 .aspx 页面上，我在底部创建了一个“asp:content”(AjaxControlToolkit) 标记，其中包含一些脚本。添加此脚本块。页面加载对我不起作用，所以我在“Sys.Application”中初始化了我的“modalInit()”。确保将此行添加到脚本标记的顶部。“Sys.Application.add_load(modalInit);”。在“modalInit”中，我找到了我的 ModalPopupExtender 的 behaviorId，然后在加载时向 ModalPopupExtender 添加了一个“onShowing()”。“onShowing()”采用我的模态“div”id（它是我的 updatePanel 的子项，并且是扩展器的 PopupControlId），并使用我在母版页。长话短说，

    Sys.Application.add_load(modalInit);

    ```
    function modalInit() {
        var modalPopup = $find('md');
        modalPopup.add_shown(onShowing);
    }

    function onShowing() {

        $common.setLocation($get("<%=rPanel.ClientID %>"), new Sys.UI.Point(x, y));
    } 
    ```

# objective-c - UIPicker 标签与输出不同

> ID：11749087
> 
> 赞同：0
> 
> 时间：2012-07-31T21:13:10.317
> 
> 标签：objective-c, ios, uipickerview

我有一个填充了 NSarray 的 UIPicker。这会将 发送`row selected`到文本字段。我想知道如何更改我的选择器中行的名称。抱歉，如果不清楚我很难清楚地解释我的意思。

![在此处输入图像描述](../Images/7f318436254c3644ada60b21b3500bc9.png)

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    arrStatus = [[NSArray alloc] initWithObjects:@"A", @"B", @"C", @"D", nil];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    //One column
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent: (NSInteger)component
{
    //set number of rows
    return arrStatus.count;
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    //set item per row
    return [arrStatus objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    NSInteger selectedRow = [result selectedRowInComponent:0];
    text1.text = [arrStatus objectAtIndex:selectedRow];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:21:08.813

这是我认为接近您想要的示例的示例。如果您有 2 个数组，一个包含国家名称，一个包含人口（以相同的顺序），您可以使用以下代码创建一个包含两个值的字典数组（您实际上可以直接使用 2 个数组, 但如果您进行任何更改, 这将要求您使它们保持同步。最好像下面那样做):

```
NSMutableArray *arrStatus = [NSMutableArray array];
    NSArray *nameArray = [NSArray arrayWithObjects:@"Albania",@"Brazil",@"Columbia", nil];
    NSArray *popArray = [NSArray arrayWithObjects:@10.3,@200,@50, nil];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    for (int i=0; i<nameArray.count; i++) {
        [dict setValue:[nameArray objectAtIndex:i] forKey:@"countryName"];
        [dict setValue:[popArray objectAtIndex:i] forKey:@"poulation"];
        [arrStatus addObject:[dict copy]];
    } 
```

现在，在您的选择器方法中，您可以这样做：

```
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    //set item per row
    return [[arrStatus objectAtIndex:row] valueForKey:@"countryNames"];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    text1.text = [arrStatus objectAtIndex:row] valueForKey:@"population"];
} 
```

这会将人口数字放在文本字段中，并将国家名称放在选择器中。请注意，我更改了在 didSelectRow 方法中获取值的方式——无需定义 selectedRow，传递给该方法的行参数已经具有该值。

我将人口数字放入 popArray 的方式仅适用于 OS X 10.8 我认为，我不确定它是否适用于 iOS，或者如果可以，适用于哪个版本。例如，在早期版本中，您必须将 @10.3 替换为 [NSNumber numberWithFloat:10.3]。

# c# - 无法从源类型转换为目标类型

> ID：11749089
> 
> 赞同：-2
> 
> 时间：2012-07-31T21:13:15.463
> 
> 标签：c#, list, icomparable, custom-lists

我使用了一个名为 PriorityQueue 的类，就像名字所说的那样，它应该比较元素并指定它们这是优先队列中的比较器类

```
private class DefaultComparer : IComparer
        {
            #region IComparer Members

            public int Compare(object x, object y)
            {
                #region Require

                if(!(y is IComparable))
                {
                    throw new ArgumentException(
                        "Item does not implement IComparable.");
                }

                #endregion

                IComparable a = x as IComparable;

                Debug.Assert(a != null);

                return a.CompareTo(y);
            }

            #endregion
        } 
```

这就是我比较的

```
class Coordenada : IComparable
    {
        public int x;
        public int y;
        public float heuristico;

        int IComparable.CompareTo(object coord1)
        {
            Coordenada c1 = (Coordenada)coord1;
            //Coordenada c2 = (Coordenada)coord2;

            if(c1.heuristico < heuristico)
                return 1;
            if(c1.heuristico > heuristico)
                return -1;

            return 0;
        }
    } 
```

正如我在标题中所说的错误是：无法从源类型转换为目标类型我知道 Coordenada 和对象不一样所以这就是为什么我尝试了转换并且它对我应该做什么没有任何想法？

编辑：这就是我如何使用应该在 Coordenada 中使用函数 CompareTo 的优先级队列

```
 Coordenada c;
    PriorityQueue cola = new PriorityQueue();

    c.x = ax;
    c.y = ay;
    c.heuristico = distancia;
    cola.Enqueue(c) 
```

priorityQueue 是一个列表，我会在一段时间内将 2-3 个不同的 Coordenada 对象添加到该列表中，因为我会在每个周期中搜索最小的数字并将其从我的列表中删除，直到我到达我想要的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:43:59.660

改变你的`CompareTo`方法。它被接受`object`为参数，因此它应该能够处理其他不能处理的事情`Coordenada`。如果`Coordenada`要比较的对象不是同一类型，只需返回适当的值（可能是 -1、1、0，取决于您的逻辑）。你可以这样尝试：

```
int IComparable.CompareTo(object coord1)
{
    Coordenada c1 = coord1 as Coordenada;
    if (c1 == null)
        return -1;

    if(c1.heuristico < heuristico)
        return 1;
    if(c1.heuristico > heuristico)
        return -1;

    return 0;
} 
```

如果你不比较性质完全不同的物体，那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:22:48.233

如果您确定`coord1`是`Coordenada`类型，请使用显式强制转换为

```
Coordenada c1 = coord1 as Coordenada; 
```

抛出一个`InvaildCastException`if `c1`is `null`。

# mysql - 在 MySQL 中生成分层数据集

> ID：11749090
> 
> 赞同：0
> 
> 时间：2012-07-31T21:13:16.303
> 
> 标签：mysql

我有一个用户 ID 值表，A 列有管理用户，B 列有用户。例如，我希望能够显示管理其他用户的用户列表。

```
用户 1 可以管理用户 2
用户 1 可以管理用户 3
用户 3 可以管理用户 4
用户 5 可以管理用户 6

```

这将产生下表：

```
--------------------------
| 管理用户 ID | 用户名 |
--------------------------
| 1 | 2 |
| 1 | 3 |
| 3 | 4 |
| 5 | 6 |
--------------------------

```

我想要一个查询或存储过程，通过按照层次结构来返回管理用户列表。因此，如果您是用户 1，则会输出以下列表。

```
1、2、3、4
```

然后，如果您是用户 2，那么您将只有 2 个输出。

```
2
```

然后，如果您是用户 5，则输出以下列表，依此类推。

```
5、6
```

鉴于我有每个用户 ID，实现这一目标的最佳方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:16:06.480

替换您的表名上的 YOUR_TABLE

```
DELIMITER $$

CREATE PROCEDURE get_users(IN base INT UNSIGNED)
BEGIN
DECLARE ids TEXT DEFAULT '';

SET @parents = base;
SET ids = base;

loop1: LOOP
    SET @stm = CONCAT(
        'SELECT GROUP_CONCAT(userId) INTO @parents FROM YOUR_TABLE',
        ' WHERE mgtuserId IN (', @parents, ')'
    );

    PREPARE fetch_childs FROM @stm;
    EXECUTE fetch_childs;
    DROP PREPARE fetch_childs;

    IF @parents IS NULL THEN LEAVE loop1; END IF;

    SET ids = CONCAT(ids, ',', @parents);
END LOOP;

SET @stm = CONCAT('(SELECT mgtuserId FROM YOUR_TABLE WHERE mgtuserId=',base,') UNION (SELECT userId FROM YOUR_TABLE WHERE userId IN (',ids, '))');

PREPARE fetch_childs FROM @stm;
EXECUTE fetch_childs;
DROP PREPARE fetch_childs;
END; 
```

检查

```
CALL get_users(1);
1
2
3
4 
```

并设置在 my.ini

```
thread_stack = 256K 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:19:22.537

给你一些搜索词：你正在寻找你的关系的传递闭包，这需要递归查询。据我所知，recursive 查询不能在 MySQL 中表达，除非借助存储过程或函数。

[在搜索](https://stackoverflow.com/search?q=%5Bmysql%5D%20transitive%20closure%20recursive&submit=search)中使用上述某些术语将为您提供大量与您的问题密切相关的问题和答案。[如何在 MySql 中使用递归查询？](https://stackoverflow.com/q/8561654/1468366)是其中之一。那里的答案链接到[一个文档](http://www.artfulsoftware.com/mysqlbook/sampler/mysqled1ch20.html)，该文档描述了一个`PROCEDURE recursivesubtree`可能是您实施的良好起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:19:38.933

您的输出规范导致我所做的版本略有不同。

假设您没有任何“循环”，并且没有任何 mgtuserId = userId 的行，您可以通过多次将表连接到自身来模拟层次查询 N 级，如下所示：

```
SELECT n0.userId AS n0_userId
     , n1.userId AS n1_userId
     , n2.userId AS n2_userId
     , n3.userId AS n3_userId
     , n4.userId AS n4_userId
     , n5.userId AS n5_userId
     , n6.userId AS n6_userId
  FROM mytable n0
  LEFT JOIN mytable n1 ON n1.mgtuserId = n0.userId
  LEFT JOIN mytable n2 ON n2.mgtuserId = n1.userId
  LEFT JOIN mytable n3 ON n3.mgtuserId = n2.userId
  LEFT JOIN mytable n4 ON n4.mgtuserId = n3.userId
  LEFT JOIN mytable n5 ON n5.mgtuserId = n4.userId
  LEFT JOIN mytable n6 ON n6.mgtuserId = n5.userId
 WHERE n0.userId = 1 
```

但是此查询不会返回您指定的结果集，即逗号分隔的列表。

此查询返回的每一行代表树下的“路径”，从指定的起点到每个叶节点（或者，在这种情况下，到每个深度不超过六层的节点（低于指定的起点）。

不，它不漂亮。但是您可以看到如何将其扩展到 N 个级别。

现在，我看不到将其转换为您指定的结果集的好方法。

我可能必须做同样的事情，但是使用单独的查询（一层深，两层深等）获取每个级别，然后使用 UNION ALL 将它们组合起来。但这会更难看。

为了得到每个叶节点的未指定数量的级别，我们确实需要使用一个临时表，并迭代地执行相同类型的查询。但当然，这不是一个单一的查询。

（我将研究一个返回您指定结果集的解决方案。）

# eclipse - 在 OSX 10.7.4 上安装后，Eclipse 看不到 Java SE 7 目录结构（我也看不到）

> ID：11749095
> 
> 赞同：2
> 
> 时间：2012-07-31T21:13:42.047
> 
> 标签：eclipse, macos, java-7

我最近在运行 Lion 版本 10.7.4 的 Mac 上安装了 Java SE Development Kit 7u5。在安装时，我采用唯一可用的安装选项，即为这台计算机上的所有用户安装。

我已经尝试遵循几个指南，以便使用 Eclipse 正确设置它，但无济于事。我正在关注[这个 Oracle 指南](http://www.oracle.com/technetwork/java/javase/downloads/jdk-for-mac-readme-1564562.html#eclipse)。就目前而言，Java SE 7 位于 Java 首选项列表的顶部（因此它优先于其他版本）。`java -version`在终端中运行也会给出正确的结果。但是，当我尝试按照上述指南将 JDK 添加到 Eclipse 时，目录结构“/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home”根本不存在：

[这是安装后我的目录结构截图的链接](http://i45.tinypic.com/30jlfcy.png)

我试过选择一个灰色的 1.7.0.jdk 但显然它是不可选择的。如果我只是尝试继续使用“JavaVirtualMachines”目录，Eclipse 不会将其识别为根文件夹。我还从我的用户文件夹中查看了库路径，但也没有所需的结构。

另一方面，令我担心的是，我上过的任何课程都没有教你如何处理所有这些怪癖......为什么这个看似微不足道的过程没有被简化......获得与 IDE 配合使用的 SDK？

如果有人知道任何课程，请告诉我！

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:25:10.137

您可以将路径`/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home`直接粘贴到“JRE Home”文本字段中，而不是浏览到目录（Oracle 指南中的第 5 步）

或者，您可以选择“标准 VM”而不是“MacOSX VM”。在那里，您还可以浏览到 JDK 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T17:24:46.320

更快更简单的解决方案，假设您已经安装了 JDK：

*   转到 Eclipse 首选项>Java>已安装的 JRE
*   单击右侧导航窗口中的“搜索按钮”
*   瞧！它应该找到它。
*   选中该框以用作默认值（如果需要），然后单击“确定”:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:36:55.440

我遇到了同样的问题，我按照 Stefan Fersti 的建议粘贴了路径，尽管他的路径不适合我。我用了：`/Library/Java/JavaVirtualMachines/jdk1.7.0_11.jdk/Contents/Home`

我想最简单的方法是前往目录`/Library/Java/JavaVirtualMachines/`并查看您的特定文件夹具有哪个更新/名称。

# c# - 进度条绑定未从线程更新

> ID：11749097
> 
> 赞同：0
> 
> 时间：2012-07-31T21:13:52.823
> 
> 标签：c#, wpf, multithreading, progress-bar

我正在尝试从线程中将 CPU 使用率更新到进度条上。

我这里的代码是：

```
 private static int _cpuUsage;
    protected PerformanceCounter cpuCounter;
    private Thread thread;

public CPUUsageIndModel()
    {
    cpuCounter = new PerformanceCounter
                     {CategoryName = "Processor", CounterName = "% Processor Time", InstanceName = "_Total"};
    thread = new Thread(GetCurrentCpuUsage);
    thread.Start();
    }

public void GetCurrentCpuUsage()
{
    while (true)
    {
        _cpuUsage = Convert.ToInt32(Math.Round(cpuCounter.NextValue()));
        Thread.Sleep(1000);
    }
} 

public int GetCPUUsage
{
    get { return _cpuUsage; }
    set
    {
        _cpuUsage = value;
        NotifyPropertyChanged("_cpuUsage");
    }
} 
```

现在问题是我已经尝试使用以下方法启动线程：

```
public void GetCurrentCpuUsage()
{
   _cpuUsage = 40;
} 
```

它工作正常，所以留下了`cpuCounter`and 循环使用。

谁能指出我可能犯的任何错误。

谢谢

编辑 - 完成课程和一些小调整：

```
public class CPUUsageIndModel : INotifyPropertyChanged
    {
        public static int _cpuUsage;
        protected PerformanceCounter cpuCounter;
        private Thread thread;

        public CPUUsageIndModel()
        {
            cpuCounter = new PerformanceCounter
                             {CategoryName = "Processor", CounterName = "% Processor Time", InstanceName = "_Total"};
            thread = new Thread(GetCurrentCpuUsage);
            thread.Start();
        }

        public void GetCurrentCpuUsage()
        {
            while (true)
            {
                CPUUsage = Convert.ToInt32(Math.Round(cpuCounter.NextValue()));
                Thread.Sleep(1000);
            }
        } 

        public int CPUUsage
        {
            get { return _cpuUsage; }
            set
            {
                _cpuUsage = value;
                NotifyPropertyChanged("_cpuUsage");
            }
        }

        #region INotifyPropertyChanged
        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:26:46.680

您需要将更改通知 WPF 运行时。为此，您实现`INotifyPropertyChanged`接口。

您似乎在这里尝试过，但是您没有以正确的方式进行操作（您没有显示所有相关代码，但我相当确定您的实现不正确）。

您需要： 1\. 绑定到公共属性（我们在您粘贴的代码中没有看到这一点） 2\. 如果值发生更改，则从属性的设置器发送通知 3\. 通过属性设置器更改值

您可能正确地执行了第一点，我们没有看到这一点，但是您正在通知私有字段已更改，并且您应该通知该属性已更改（`NotifyPropertyChanged("GetCPUUsage")`）。您还可以通过直接访问字段 ( `_cpuUsage = 40;`) 来设置值，并且应该通过 setter ( `GetCPUUsage = 40;`) 来完成。

在这种情况下，您的属性名称有点奇怪。我将重命名`GetCPUUsage`为`CPUUsage`，因为您可以获取并设置它的值。前缀*Get*也应该用于方法，而不是属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:40:51.003

看起来你几乎是对的，至少从编辑来看。只是，您正在提高字段名称而不是属性名称上更改的属性。这是修复：

```
public int CPUUsage
        {
            get { return _cpuUsage; }
            set
            {
                _cpuUsage = value;
                NotifyPropertyChanged("CPUUsage"); // Notify CPUUsage not _cpuUsage
            }
        } 
```

你的绑定应该看起来像 {Binding Path=CPUUsage}

# jquery - 如何在将通过 AJAX 加载的 DOM 元素上启动 jQuery 插件 (sequence.js)？

> ID：11749098
> 
> 赞同：0
> 
> 时间：2012-07-31T21:14:02.453
> 
> 标签：jquery, ajax

Sequence.js 通过以下代码触发：

```
$(document).ready(function(){
    var options = {
        autoPlay: false,
        nextButton: true,
        prevButton: true
    };

    var sequence = $("#sequence").sequence(options).data("sequence");
}) 
```

很明显，最后一行标识了 DOM 元素。但是，我正在制作一个通过 AJAX 加载#sequence 的页面。因此，运行上述代码时，它是不存在的。

我已经查看了 .on() 但无法弄清楚如何将其应用于这种情况。

完整代码：

```
$(document).ready(function() {

    $("a:not([href^='http://'])").click(function(e){

        $('html,body').animate({
            scrollTop: $("#bigNames").offset().top
        }, 1500);

        var url = $(this).attr("href") + " #cont";

        $('#subContent').fadeOut('slow', function() {

            $('#subContent').load(url, function() {

                var contentHeight = $("#subContent").height();

                $('#bodyContent').animate({
                    height: contentHeight
                }, 'slow', function() {
                    $('#subContent').delay(800).fadeIn('slow');

                }); // close animate

                var options = {
                    autoPlay: false,
                    nextButton: true,
                    prevButton: true
                };

                var sequence = $("#sequence").sequence(options).data("sequence");
            }); // close load
        }); // close fadeout

        return false;
    }); 

    $.waypoints.settings.scrollThrottle = 30;

    $('#chad').waypoint({
       offset: 50
    });

    $('#bigNames').waypoint({
       offset: 5
    });

    $('#chad').waypoint(function(event, direction) {
        if (direction === 'down') {
            $('#smallNames').animate({"opacity": "0"}, 500);
        }
        else {
            $('#smallNames').animate({"opacity": "1"}, 300);
        }
    });

    $('#bigNames').waypoint(function(event, direction) {
        if (direction === 'down') {
            $('#main').css("position", "fixed");
            $('#main').addClass("afixed");
            /* $('#main .span12').animate({"height" : "420"}, "slow", function() { */

                $(this).append('<ul id="subDateAndLoc"><li id="subDate">July 13, 2013</li><li id="subLoc">Greensburg, PA</li></ul>');
                $('#subDateAndLoc').fadeIn("slow");
            /* }); 
            $('#nav').animate({"top" : "112"}, "slow"); */

            $('#bodyContent').css("marginTop", "355px");

        }
        else {
            $('#main').css("position", "relative");
            $('#main').removeClass("afixed");
            /* $('#main .span12').animate({"height" : "500"}, "slow");
            $('#nav').animate({"top" : "160"}, "slow"); */
            $('#bodyContent').css("marginTop", "0px");
            $('#subDateAndLoc').fadeOut("500");
            event.stopPropagation();
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:18:21.747

您应该在 ajax 方法中执行此`success`回调函数。例如：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
      // activate your plugin here
  }
}); 
```

# c# - 从没有 SolidColorBrush 的颜色中获取画笔

> ID：11749099
> 
> 赞同：1
> 
> 时间：2012-07-31T21:14:03.937
> 
> 标签：c#, windows, drawing

看起来[SolidColorBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.aspx)需要 .NET 3 或更高版本，我需要避免要求制造计算机进行升级。

那么，给定一个[System.Drawing.Color](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx) `color`，我将如何创建一个[System.Drawing.Brush](http://msdn.microsoft.com/en-us/library/system.drawing.brush.aspx)？

```
public static Brush GetBrush(Color color) {
  Brush result = Brushes.Black;
  // What goes here?
  return result;
} 
```

我在 Brushes 中看到的唯一静态方法是`Equals`and `ReferenceEquals`; 非静态只是`Clone`.

**编辑：（**已解决 - 感谢[SLaks](https://stackoverflow.com/users/34397/slaks)）

使用[System.Drawing.SolidBrush](http://msdn.microsoft.com/en-us/library/system.drawing.solidbrush.aspx)，我可以写：

```
public static Brush GetBrush(Color color) {
  if (color != Color.Empty) {
    return new SolidBrush(color);
  }
  return Brushes.Black;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:15:42.233

您看到的是 WPF SolidColorBrush。
WPF 本身是 .Net 3.0 的新手。

GDI+ (System.Drawing)[`SolidBrush`类](http://msdn.microsoft.com/en-us/library/system.drawing.solidbrush.aspx)一直存在。

# jquery - jquery 选择的插件没有给出选择的值

> ID：11749101
> 
> 赞同：0
> 
> 时间：2012-07-31T21:14:08.877
> 
> 标签：jquery, jquery-chosen

如何获取当前为已应用所选插件的选择选择的值。我初始化它的方式是：

```
$(container).find('.addKeywordTerm [name="addMatchType"]').chosen();
$(container).find('.addKeywordTerm .chzn-search').hide(); 
```

我尝试检索该值的方法是：

```
$(container).find('.addKeywordTerm [name="addMatchType"]').val() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:56:48.267

尝试检查选择器，您可以将 "[name="addMatchType"]" 更改为 id 或 "select[name="addMatchType"]" 或尝试提醒其名称以查看它是否正确选择！:)

# json - Html.Raw（Json.Encode 和 Internet Explorer 9

> ID：11749103
> 
> 赞同：1
> 
> 时间：2012-07-31T21:14:20.187
> 
> 标签：json, asp.net-mvc-3, internet-explorer-9

我`Html.Raw(Json.Encode`在我的 Javascript 中使用来获取传递给我的 MVC 3 asp.net (razor) 应用程序中的 View 的 ViewModel 属性的内容，如下所示：

```
 var state = @(Html.Raw(Json.Encode(Model.State))); 
```

状态是在我的模型中定义的

```
 public class IndexViewModel
    {
       //..other props
        public string State { get; set; }

    } 
```

它在 FF、IE8 中就像一个魅力，但在 IE 9 上却令人窒息。

关于在 IE 9 中更改的上述代码，我应该知道什么，所以这不再有效吗？如果是这样，在您的 JS 中获取 ViewModel 数据的替代方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:20:19.900

这是一个替代方案

查看模型

```
public class StuffVM : AsSerializable
{
    public List<Stuff> StuffList { get; set; }
} 
```

基类

```
public abstract class AsSerializable
{
    public string AsJson()
    {
        var serializer = new JavaScriptSerializer();
        return serializer.Serialize(this);
    }
} 
```

看法

```
<script>
 var ViewModelData = @( Html.Raw(Model.StuffVM.AsJson()) );
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T18:07:55.880

我真的很喜欢 Travis 的解决方案。另一种方法（如果您使用的是 C# 3.0 或更高版本）是使用扩展方法。

```
public static class ObjectExtensions
{
    static public string ToJson(this object model)
    {
        return new JavaScriptSerializer().Serialize(model);
    }
} 
```

然而，这是一个完全哲学的选择......无论是使用继承还是扩展方法。我个人的选择是扩展方法，因为它感觉更干净，耦合更少。这只是我的看法。

但是，使用 Travis 的方法，您可以决定只创建一个序列化程序实例，并在需要执行多个序列化时重用该实例，这在内存方面会更有效。如果您使用扩展方法执行此操作，则它不是线程安全的。

# javascript - 为什么是 [1,[2,3]] != [1,[2,3]]

> ID：11749105
> 
> 赞同：0
> 
> 时间：2012-07-31T21:14:34.933
> 
> 标签：javascript, logic

> **可能重复：**
> [如何确定两个 JavaScript 对象的相等性？](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)

为什么`[1,[2,3]] == [1,[2,3]]`评估为假？

另外，为什么会这样：

```
var g = { a:1, b:2, c:3 };
g == { a:1, b:2, c:3 }; // false!! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:17:30.923

因为 [] 和 {} 创建了对象的新实例并且它们不相等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:18:07.927

`[]`是创建数组文字而不是调用`new Array()`然后填充它的快捷方式。这是一个类似的故事`{}`。在您的示例中，您实际上是按引用而不是按值进行比较。使用运算符构造的两个对象`new`指向内存中的不同位置，当您使用`==`运算符时，您实际上是在说“这些对象是否指向内存中的同一位置？”。要像您期望的那样进行按值比较，您需要遍历要比较的每个数组/对象的成员，并逐个比较每个值。

# html - 是否有诸如 HTML 模板 API 之类的东西？

> ID：11749111
> 
> 赞同：0
> 
> 时间：2012-07-31T21:15:01.717
> 
> 标签：html, ruby-on-rails, templates

我可以在 Rails 应用程序中使用 HTML 模板 API 这样的东西吗？我目前正在创建一个博客项目应用程序，并希望用户使用已经定制的 html 模板。有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:44:09.703

如果您正在寻找用户可以提供自己的模板而不赋予他们执行任意 ruby​​ 代码的完全权限的东西，那么您可能想看看[液体标记](http://liquidmarkup.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:36:50.337

您可以拥有多个样式表并让您的用户选择一个。在您的 layouts/application.html.erb 中，使您的样式表属性成为一个变量，并使用用户选择的模板（读取样式表）填充它。

# import - MEF 导入问题

> ID：11749115
> 
> 赞同：1
> 
> 时间：2012-07-31T21:15:18.753
> 
> 标签：import, mef

导入不起作用。

我有一个`UserProfileService`可以看到导出的类`AggregateCatalog`。`UserProfileService`在基础设施项目中。我`RelayCommand`也在基础设施项目中的类中导入它。我经历过类似的帖子，但无法解决。将不胜感激任何帮助。这是代码：

```
[Export(typeof(IUserProfileService))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class UserProfileService : IUserProfileService
{
    ...
} 

public class RelayCommand<T> : ICommand
{
    [Import]
    private IUserProfileService UserProfileService { get; set; }
    ...
} 
```

谢谢，伊玛德。

# c# - 使用反射从没有实例化对象的 GetProperties 列表中获取值

> ID：11749117
> 
> 赞同：0
> 
> 时间：2012-07-31T21:15:24.460
> 
> 标签：c#, reflection, getproperties

```
public class SomeClass
{
    public IBy Some1{ get { return By.CssSelector("span[id$=spanEarth]"); } }

    public IBy Some2 { get { return By.CssSelector("span[id$=spanWorm]"); } }

    public IBy Some3 { get { return By.CssSelector("span[id$=spanJim]"); } }
} 
```

是类，我以这种方式使用反射：

```
var gridRow = Type.GetType(typeof(SomeOtherClassInSameNamespace).AssemblyQualifiedName.Replace("SomeOtherClassInSameNamespace", "SomeClass"), true, true);

var rowList = gridRow.GetProperties().Where(p => p.PropertyType.Name.Contains("IBy")).ToList();

int i = 0;
foreach (var property in rowList)
{
    string test = property.GetValue(gridRow, null).ToString();
} 
```

这为 objectType 异常提供了运行时错误。如何使用反射从属性列表中获取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:18:17.333

`gridRow`是对`Type`对象的引用。of 的第一个参数[`GetValue`](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)是目标对象 - 所以这就像您试图访问对象的`SomeClass`属性一样`Type`。这显然行不通。

虽然有*一些在不引用实例的情况下评估实例属性的* [hacky 方法](https://stackoverflow.com/a/11162876/22656)——只要该属性不使用`this`——它们确实非常讨厌。

如果属性不需要对象内的任何状态，则改为将其设为静态属性。那时您可以`null`用作目标，就可以了：

```
public class SomeClass
{
    public static IBy Some1 { get { return By.CssSelector("span[id$=spanEarth]"); } }

    public static IBy Some2 { get { return By.CssSelector("span[id$=spanWorm]"); } }

    public static IBy Some3 { get { return By.CssSelector("span[id$=spanJim]"); } }
}
...

var gridRow = Type.GetType(typeof(SomeOtherClassInSameNamespace)
                              .AssemblyQualifiedName
                              .Replace("SomeOtherClassInSameNamespace", "SomeClass"),
                           true, true);
var rowList = gridRow.GetProperties(BindingFlags.Public | BindingFlags.Static)
                     .Where(p => p.PropertyType.Name.Contains("IBy"));

int i = 0;
foreach (var property in rowList)
{
    string test = property.GetValue(null, null).ToString();
    ...
} 
```

# jquery - 使用 jQuery mobile 列出 Geonames WS 结果（自动完成）

> ID：11749118
> 
> 赞同：1
> 
> 时间：2012-07-31T21:15:25.073
> 
> 标签：jquery, json, jquery-mobile, jsonp, geonames

有没有人有一些关于如何使用带有 jQ​​uery 移动的 JSONP 调用 Geonames WS 的自动完成功能的示例或教程？

目标应该类似于[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)但是，而不是下拉菜单，我想要一个格式化列表（可点击）。

我发现该示例[http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile](http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile)但由于它不使用 Geonames，因此对我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T10:42:30.470

这是我使用的代码......您只需使用自己的代码添加 href 标记：

```
 $( document ).on( "pageinit", "#myPage", function() {
        $( "#autocomplete" ).on( "listviewbeforefilter", function ( e, data ) {
            var $ul = $( this ),
                $input = $( data.input ),
                value = $input.val(),
                html = "";
            $ul.html( "" );
            if ( value && value.length > 2 ) {
                $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
                $ul.listview( "refresh" );
                $.ajax({
                    url: "http://ws.geonames.org/searchJSON",
                    dataType: "jsonp",
                    crossDomain: true,
                    data: {
                        featureClass: "P",
                        style: "full",
                        maxRows: 12,
                        lang: "it",
                        name_startsWith: $input.val()
                    }
                })
                .then( function ( response ) {
                    $.each( response.geonames, function ( i, val ) {
                        html += "<li>" + val.name + (val.adminName1 ? ", " + val.adminName1 : "") + ", " + val.countryName + "</li>";
                    });
                    $ul.html( html );
                    $ul.listview( "refresh" );
                    $ul.trigger( "updatelayout");
                });
            }
        });
    }); 
```

# mysql - Mysql查询将列除以100

> ID：11749120
> 
> 赞同：7
> 
> 时间：2012-07-31T21:15:27.973
> 
> 标签：mysql

我将列作为浮点数的常规百分比有效数字存储在表中。（例如 99.9）我想将它们除以 100，以便它们处于原始数据形式。(例如) .999

我必须为此写什么查询？

我已经尝试过了，似乎没有任何改变。

更新`table_name`集`column_name`=[值/100]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T21:20:13.453

更新表名设置列名=列名/100；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:22:19.390

这是非常非常简单的查询，您也可以在查询中进行计算

```
UPDATE table_name SET percent=percent/100 ; 
```

您可以像往常一样进行简单的计算，例如加减乘除

# c# - 将数字分组为 2 组的自定义比较器

> ID：11749121
> 
> 赞同：0
> 
> 时间：2012-07-31T21:15:28.007
> 
> 标签：c#, devexpress, comparator

编写一个比较器，数字可以是 1-20。

我有 2 个包含数字的哈希表：

```
htGroup1

htGroup2 
```

哈希表涵盖了 1 到 20 之间的所有数字。

现在我正在为一些商业网格控件编写一个自定义比较器，它为我提供了 Value1 和 Value2。

我必须使用 0（匹配）、-1 或 1 设置属性：

```
e.Result = result; // where result is 0, 1 or -1. 
```

如何确定结果，以便将所有数字分组为 2 组（基于 Group1 和 Group2）。

我正在为 devexpress aspxgrid 控件编写自定义比较器，详细信息如下：[http ://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CustomColumnGrouptopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_CustomColumnGrouptopic)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:23:49.467

如果它们在同一组中，则返回 0，否则返回 1/-1（如果您只有 2 个组，则无关紧要。

```
int ComareResult(int a, int b)
{
   var groupA = a <=20 && a >=1;
   var groupB = b <=20 && b >=1;
   return groupA == groupB ? 0 : a <b ? -1 : 1;
} 
```

# clojure - 使用 map 做“foreach”风格的调用

> ID：11749124
> 
> 赞同：3
> 
> 时间：2012-07-31T21:15:35.350
> 
> 标签：clojure

我正在尝试提高 Clojure 的学习曲线，并且我正在编写一个简单的程序，该程序应该输出给定字符串的排列列表。我的递归解决方案将多次调用自身（因此有一个调用树而不是一维堆栈）。我试图了解，给定一个列表，我如何多次调用一个函数，每次调用时给它一个列表中的元素。我目前的代码是

```
(def permuteCat (
    fn [string printlist appendval]
    ( permute string (concat printlist (list appendval)) )
))

(def permuteRecurse (
    fn [string printlist appendlist]
    (
    map (partial permuteCat string printlist) appendlist
    )
))

(def permute (
    fn [string printlist] 
    (if ( == (count printlist) (.length string) )
        (println printlist)
        ( permuteRecurse string printlist ( range (- (.length string) (count printlist)) ) ) 
    )
)
) 
```

然而，permuteCat() 似乎永远不会被 permuteRecurse() 调用。在像 OCaml 这样的语言中，我会柯里化 permuteCat 并使用地图运算符，但我知道 Clojure 本身并不支持柯里化。这样做的首选方法是什么？还是我只是离基地很远，需要采取完全不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:55:32.673

[doseq](http://clojuredocs.org/clojure_core/clojure.core/doseq)是表示强制执行 foreach 的惯用方式。map 产生一个惰性序列，因此在使用该序列之前不会执行。您可以使用 doseq 编写命令式的 foreach 循环，但更好的是，如果您将序列的创建与您想要使用它做的事情分开（在这种情况下是打印，但也许稍后您想通过它进行搜索）。

```
; specify the sequence
(defn foo [v] (map inc v))

; print it
(doseq [v (foo [1 2 3])]
  (println v)) 
```

# dependencies - TeamCity（或其他持续构建）中的自动依赖关系？

> ID：11749138
> 
> 赞同：0
> 
> 时间：2012-07-31T21:17:01.250
> 
> 标签：dependencies, continuous-integration, teamcity

我正在考虑在工作中实现一个非常大的连续构建（数百个 Visual Studio 解决方案，数千个项目）。它包括 .NET、C++ 和 VB6 代码。我们在 TeamCity 上构建了一些解决方案，但依赖项设置不正确。在这种规模下，保持源代码和 TeamCity（或其他工具）之间的依赖关系同步听起来完全不现实。 **有谁知道是否有工具/插件可以在 TeamCity 中自动检测解决方案依赖项？使用其他持续集成工具怎么样？**即使它仅适用于 .NET 项目，这仍然是一个很大的帮助。

我找到了一个小型命令行工具（[gittup.org/tup](http://gittup.org/tup)），它说它通过监视文件访问来推断依赖关系。似乎可以将此技术应用于更大规模的构建工具，但我不知道它是否已经完成。或者也许还有其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:35:01.410

检测很困难。

我公司的[AnthillPro](http://www.urbancode.com/html/products/anthillpro/)工具被拥有数百个相互依赖的组件并需要管理这些构建的团队使用 - 并且巧妙地仅重建受给定更改影响的组件。

我见过的一种非常成功的方法是将依赖项定义下推给开发人员。一些团队要求他们管理一个列出其解决方案间依赖关系的文件 - “需要下载哪些其他内容并将其放入 lib/bin 目录以供您的解决方案编译”。这类似于许多 Java 开发团队使用 Maven 所做的事情。我希望在开发团队中分发依赖定义，而不是尝试检测。

此时构建管理工具的作用是在构建时解析该文件并在幕后更新其依赖关系图模型。该信息既可用于工件检索，也可用于触发相关构建。

# jquery-mobile - jquery mobile 1.1.1 - 可折叠的奇怪行为

> ID：11749149
> 
> 赞同：0
> 
> 时间：2012-07-31T21:17:48.483
> 
> 标签：jquery-mobile

Collapsibles 没有像 JQM 1.1.1 中所期望的那样工作。

例如，尝试重现此页面中的示例：

[http://jquerymobile.com/test/docs/lists/lists-collapsible.html](http://jquerymobile.com/test/docs/lists/lists-collapsible.html)（非插入，单独的可折叠），可折叠适合所有页面和方角。如果我使用以前的 1.1.0 版本，一切都会按预期工作。

下面的示例也有一个未加注意的行为 - 列表分隔符被绘制在可折叠标题上。

```
<div data-role="page" id="home_page">
<div data-role="header">
<h1>Phonegap App</h1>
</div> <!-- /header -->
<div data-role="content">
<div data-role="collapsible" data-inset="true" 
data-collapsed="false" data-theme="b" data-content-theme="d">
<h3>More in this section</h3>
<ul data-role="listview" data-theme="c" data-dividertheme="d">
<li data-role="list-divider">Pages &amp; Dialogs</li>
<li><a href="page-anatomy.html">Anatomy of a page</a></li>
<li><a href="page-links.html">Linking pages</a></li>
<li><a href="page-transitions.html">Page transitions</a></li>
<li><a href="loader.html">Page loading widget</a></li>
<li><a href="page-dialogs.html">Dialogs</a></li>
<li><a href="popup/index.html">Popups</a></li>
<li class="ui-corner-bottom"><a href="pages-themes.html">Theming pages</a></li>
</ul>
</div>
</div><!-- /content -->
</div><!-- /page --> 
```

使用 jquery.mobile-1.1.1.css jquery.mobile-1.1.1.js jquery-1.7.2.min.js

这是一个错误还是我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:28:33.217

这似乎是一个错误，这是一个快速的 CSS 修复：

```
​.ui-listview .ui-li-divider {
    margin : 5px -1px 0 -1px;
}​ 
```

不久前我注意到，当 jQuery Mobile 网站中的元素重叠时，您通常可以通过一些边距调整来修复它。

Here is a demo: [http://jsfiddle.net/JYN76/](http://jsfiddle.net/JYN76/)

# mercurial - mercurial web 界面中的确切日期

> ID：11749150
> 
> 赞同：2
> 
> 时间：2012-07-31T21:17:53.480
> 
> 标签：mercurial

通过 Web 界面使用 Mercurial 存储库时，时间主要显示为跨度，指定某事发生的时间：“1 分钟/小时/天前”。有没有办法让 Web 界面在某些特定或本地时区输出准确的日期，而无需触及任何配置文件？也许是一些查询参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T04:52:23.513

幽默的是，确切的日期是 HTML 中的内容，但随后它们会通过 javascript 转换为相对日期。这样做是为了缓存目的（每个人的确切日期总是相同的，但相对时间因响应而异）。因此，您最简单的方法是禁用或阻止该页面上的 javascript。除非您需要编辑主题文件以排除时间相关的 JavaScript。

# iis - 如何避免 AppDomain 重启时停机？

> ID：11749151
> 
> 赞同：4
> 
> 时间：2012-07-31T21:17:58.000
> 
> 标签：iis, iis-7.5

IIS 有一个新的（对我而言）扩展名为“应用程序初始化”。这样做的一件事是，当应用程序池回收时，它将等待新站点准备好（通过请求主页[或其他页面]），然后再切换到新的应用程序池。这导致用户不会遇到停机时间，因为现在它不等待 JIT-ing 或数据库缓存在第一次调用时发生。

这一切都很好，但它仅适用于 AppPool 回收（例如当它已运行约 29 小时时）。将 DLL 复制到 bin 目录时，会重新启动 AppDomain。我想知道是否有办法避免由此造成的停机时间（除了在部署更改之前让服务器停止旋转）。

# ember.js - ember.js 中的动作助手抛出错误

> ID：11749158
> 
> 赞同：0
> 
> 时间：2012-07-31T21:18:24.683
> 
> 标签：ember.js

以下代码失败并显示消息“Uncaught TypeError: Object data-ember-action="4" has no method 'replace'” - 似乎 Handlebar 助手获得了缺少所述方法的 Handlebar SafeString。

请注意，三重支撑动作 {{{action ...}}} 似乎有效。

```
 <h1>Skills</h1>

    <script type="text/x-handlebars" data-template-name="skill-list">
        <table class="datagrid" style="width: 100%">
            <thead>
            <tr>
                <td colspan="5" class="controls">
                    Search <input type="text" value="" class="search_field"/>
                </td>
            </tr>
            <tr>
                <th class="id_sort">ID</th>
                <th class="name_sort">Name</th>
                <th class="basis_sort">Basis</th>
                <th class="type_sort">Type </th>
                <th>&nbsp;</th>
            </tr>
            </thead>
            <tbody>
            {{#view SKILLS.skill_items }}

            {{#each skills }}
            <tr>
                <td>
                    {{ _id }}
                </td>
                <td>{{ name }}</td>
                <td>{{ basis }}</td>
                <td>{{ type }}</td>
                <td class="control">
                    <button class="edit"><span class="icon"></span> Edit</button>
                </td>
            </tr>
            {{/each }}

            {{/view }}
            </tbody>
            <tfoot>
            <tr>
                <th class="id_sort">ID</th>
                <th class="name_sort">Name</th>
                <th class="basis_sort">Basis</th>
                <th class="type_sort">Type </th>
                <th>&nbsp;</th>
            </tr>
            <tr>
                <td colspan="5" class="controls">

                    <button class="add" {{action "add_skill"}} >Add Skill
                    </button>
                </td>
            </tr>
            </tfoot>
        </table>
    </script>

    <script type="text/x-handlebars" >
        {{view SKILLS.skills_view}}
    </script>​

    <script language="javascript">

        var SKILLS;

        $(function () {
            SKILLS = Ember.Application.create({

                Skill: Ember.Object.extend({
                    id: 0,
                    name: '',
                    basis: ''
                }),

                skills: [],

                add_skill: function(){

                }

            });

            SKILLS.skills = _.map([
                {name:"throwing", basis:"speed", type: 'skill', _id:0},
                {name:"spech", basis:"will", type: 'skill', _id:1}
            ], function(s){ return _.extend(new SKILLS.Skill(), s)});

            SKILLS.skill_items = Ember.View.extend({
                skillsBinding: 'SKILLS.skills'
            });

            SKILLS.skills_view = Ember.View.extend({
                templateName:'skill-list',
                add_skill: function(){
                    SKILLS.add_skill();
                }
            });

        })
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:27:55.577

这是您的代码的工作版本：http: [//jsfiddle.net/Sly7/2F2y9/](http://jsfiddle.net/Sly7/2F2y9/) 我已经清理了一些奇怪的代码（事实上，对我来说很奇怪，尤其是 _.map() 或 _.extend() )，删除不必要的视图，尊重 [Ember 命名约定](https://stackoverflow.com/questions/11129338/ember-naming-capitalization-convention)。

但在某种程度上，它对我来说并不完全干净。

```
<h1>Skills</h1>

<script type="text/x-handlebars" data-template-name="skill-list">
    <table class="datagrid" style="width: 100%">
        <thead>
        <tr>
            <td colspan="5" class="controls">
                Search <input type="text" value="" class="search_field"/>
            </td>
        </tr>
        <tr>
            <th class="id_sort">ID</th>
            <th class="name_sort">Name</th>
            <th class="basis_sort">Basis</th>
            <th class="type_sort">Type </th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
          {{#each Skills.skills}}
          <tr>
            <td>
                {{id}}
            </td>
            <td>{{name}}</td>
            <td>{{basis}}</td>
            <td>{{type}}</td>
            <td class="control">
                <button class="edit"><span class="icon"></span> Edit</button>
            </td>
          </tr>
          {{/each }}
        </tbody>
        <tfoot>
        <tr>
            <th class="id_sort">ID</th>
            <th class="name_sort">Name</th>
            <th class="basis_sort">Basis</th>
            <th class="type_sort">Type </th>
            <th>&nbsp;</th>
        </tr>
        <tr>
            <td colspan="5" class="controls">
                <button class="add" {{action "add_skill"}} >Add Skill
                </button>
            </td>
        </tr>
        </tfoot>
    </table>
</script>

<script type="text/x-handlebars" >
    {{view Skills.SkillsView}}
</script>

<script language="javascript">

    var SKILLS;

    $(function () {
        Skills = Ember.Application.create({

            Skill: Ember.Object.extend({
                id: 0,
                name: '',
                basis: ''
            }),

            skills: [],

            add_skill: function(){
                console.log("adding a new skill");
            }

        });

        Skills.skills = [
            {name:"throwing", basis:"speed", type: 'skill', id:0},
            {name:"spech", basis:"will", type: 'skill', id:1}
        ].map(function(s){ return Skills.Skill.create(s); });

        Skills.SkillsView = Ember.View.extend({
            templateName:'skill-list',
            add_skill: function(){
                Skills.add_skill();
            }
        });

    })
</script> 
```

​</p>

# javascript - Javascript范围问题或实例化问题？

> ID：11749159
> 
> 赞同：0
> 
> 时间：2012-07-31T21:18:25.013
> 
> 标签：javascript, arrays, internet-explorer, scope

我有一个网页，可以根据文本输入字段中的用户“keyup”事件即时进行一些计算。这是一个动态构建的相当大的页面，所以我必须保留一个值的哈希/数组，我可以从页面内的其他位置引用这些值。

所以在页面顶部我正在这样做 -

```
var itemBalanceHash = new Array();
var itemID_2_POIDHash = new Array();
var currentPODocumentID;
var warningArray = new Array(); 
```

然后我继续定义一些使用我刚刚定义的变量的函数。然而，直到我完成定义这些函数之后，这些变量才开始被使用（即填充了东西。）

```
<script type="text/javascript">                                
itemBalanceHash["${topitem.itemIdentifier}"]="${topitem.itemOutstandingEncumberedAmount}";
itemID_2_POIDHash["${topitem.itemIdentifier}"] = currentPODocumentID;
</script> 
```

这个脚本块出现在我的页面中间，因为它正在构建。事实上，它会被多次调用，具体取决于我需要填充多少行（来自数据库的查询的结果集）。

无论如何 - 这在 Firefox 中效果很好。但是，它不适用于 IE8、Chrome 或 Safari。我没有在旧版本的 IE 中测试过这个；但我认为它也不会在那里工作。

Internet Explorer 调试器给我的错误消息是这样的

“itemBalanceHash 未定义”

所以，我的问题是：这是一个范围界定问题吗？
Firefox 似乎在某处纠正了我的错误，但在哪里？

如有必要，我可以提供更多代码。谢谢你的帮助！
非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:53:00.023

所以问题出在 iframe 上！Firefox 为我执行我的 JSP 页面中的所有 JS 代码。IE、Chrome 和 Safari 需要将事件监听器附加到页面上，以触发加载事件，然后执行我的 JS 代码（该对象的实例化应该发生的地方）。

很有意思。我期待微软会做出这样的事情，但我很惊讶谷歌和 Safari 的行为方式相似。FF 是我的默认浏览器的另一个原因。

感谢大家的帮助/回复。

干杯!

# sql-server-2008 - SSAS 中的渐变维度

> ID：11749164
> 
> 赞同：1
> 
> 时间：2012-07-31T21:18:51.873
> 
> 标签：sql-server-2008, ssas

我正在尝试设计一个多维数据集，让我使用 SSAS 查看过去几年的月收入。我使用类型 2 SCD 构建了收入事实表，结果如下表：

```
Account Number     MonthlyPayment     Start Date     End Date
102939              115               01/01/2001     03/31/2001
102939              75                04/01/2001     NULL
102940              107               02/01/2001     NULL 
```

现在，我想弄清楚我每个月的月收入是多少，例如

```
01/01: 115 
02/01: 222 
05/01: 182 
```

我已经建立了一个多维数据集，但它只报告特定月份的收入，因为它与开始日期相关联，例如

```
01/01: 115
02/01: 107
02/01: 0 
04/01: 75 
```

显然我遗漏了一些东西，因为在 SSIS 中构建事实表后我能够找到的所有链接都停止了，并且似乎暗示一旦数据格式正确，这就是小菜一碟。我是否需要编写 MDX 计算度量，如果需要，如何编写？或者我应该看一些更简单的东西。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:09:58.890

That's not an easy call.

You're looking to define at cell level (aka row level) a new type that is Payment(amount, start, end) that when aggregated is taking a date to calculate the amount.

OLAP cubes are not designed to solve this kind of problems out of the box as they aggregate only basic types (double, int, booleans...). I don't know of any vendor doing this at this point in time.

The standard way would be to add for each month the amount :

```
Account Number     MonthlyPayment     Date     
102939              115               01/01/2001
102939              115               02/01/2001
102939              115               03/01/2001
102939              75                04/01/2001
...
102940              107               02/01/2001
102940              107               03/01/2001
102940              107               04/01/2001
... 
```

The question of this solution is the number of original rows versus new rows (memory) and how to generate the 'new' table.

Another is finding a vendor that can partnership with you to better address this solution, if SSAS is not a must.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:44:19.040

您添加一个包含所有日期的时间维度，即使事实表没有使用它们。[SSAS 允许您生成](http://msdn.microsoft.com/en-us/library/ms174832.aspx)包含可在 MDX 查询中使用的月份列的时间维度。

对不起，我没有完全理解你定义的问题。我认为您将不得不将表格非规范化为类似

```
Account Number     PaymentAmount     Payment Date     
102939              115               01/01/2001     
102939              115               02/01/2001     
102939              115               03/01/2001     
102939              75                04/01/2001     
102940              107               02/01/2001 
```

这最终会以表大小为代价简化计算。

# javascript - RequireJS 乱序执行 - 不尊重 `require` 的参数

> ID：11749165
> 
> 赞同：3
> 
> 时间：2012-07-31T21:18:53.337
> 
> 标签：javascript, requirejs, js-amd

当以我理解的普通方式使用 CoffeeScript 构建和运行 RequireJS 时，我似乎遇到了代码未按预期顺序执行的问题，即

```
<script src="/_s/lib/require-jquery.js"></script>
<script>
  require.config({
    paths: {
      "main": "/_s/all.min", // <--- the 'optimized' result of `$ r.js build.js`
    }
  });
  require(["main"], function () {
     // this executes without any regard to whether 'main' is loaded.
     // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     // also:
     // require('cs!csmain') throws an exception because "cs!csmain" has not been
     // loaded for context: '_'.
  }); 
```

人们会期望传递给的函数`require(["main"], ...`在加载 main 及其所有依赖项之后执行，因为[这就是文档所说的](http://requirejs.org/docs/api.html#config)。

然而，事实并非如此。在我的本地开发系统上，这个问题并没有表现出来，我想是因为它是某种竞争条件，这使它成为双重问题，因为这只是在部署/登台之后才出现。

我有一个`main.js`这样的直截了当：

```
var _paths;

_paths = {
  ... 
  underscore: '../lib/lodash'
};

require.config({
  baseUrl: '/_s/mycode/', // main.js lives here
  paths: _paths,
  shim: {
     ...
    'timeago': ['jquery']
  },
  waitSeconds: 60
});

require(['cs!csmain']); // has all the dependencies 
```

连同一个`build.js`被称为参数的参数`r.js`：

```
({
    baseUrl:    'mycode',
    optimize:   'none',
    out:        'all.min.js',
    stubModules: ['cs', 'coffee-script'],
    paths: {
        ...
        underscore: '../lib/lodash'
    },
    name: 'main',
    shim: {
       ...
    }
}) 
```

有谁知道这里发生了什么？我真的很喜欢 RequireJS 的异步特性以及将我的代码拆分为合理模块的能力，但这个问题特别令人沮丧，因为它只在暂存/生产环境中表现出来。

任何想法和建议将不胜感激。

**编辑**：删除了一些可能多余的论点以缩短问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:14:42.467

我相信我已经解决了这个问题 -`main.js`应该包含对 的调用`define`，正如我[在 GitHub 上的一个问题中发布的那样](https://github.com/jrburke/require-cs/issues/26)。

# java - Phonegap (Android)：连接和打印到 Bixolon BR200

> ID：11749166
> 
> 赞同：1
> 
> 时间：2012-07-31T21:19:01.413
> 
> 标签：java, android, jquery-mobile, cordova, printing

我想打印到**BIXOLON BR200**（蓝牙打印机）。

我有一个带有文本和图像的简单页面，我需要打印当前页面或类似内容，但我不知道如何在 Android 中使用**PhoneGap**进行打印（我也在使用 jQuery 移动版）。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:12:20.203

我使用 BIXOLON Android sdk 修复了它并构建了一个插件。这是我的代码：

```
.....

 public PluginResult execute(String action, JSONArray args, String callbackId) {
        PluginResult result = null;
        context = this.ctx;

         // Register for broadcasts when a device is discovered
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        context.registerReceiver(mReceiver, filter);

        // Register for broadcasts when discovery starts
        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
        context.registerReceiver(mReceiver, filter);

        // Register for broadcasts when discovery has finished
        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        context.registerReceiver(mReceiver, filter);  

        // Register for broadcasts when connectivity state changes
        filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);
        context.registerReceiver(mReceiver, filter);  

        Looper.prepare();
        btadapter= BluetoothAdapter.getDefaultAdapter();
        found_devices=new ArrayList<BluetoothDevice>(); 

        try {

            try {                           
                Log.d("BluetoothPlugin", "We're in "+ACTION_ENABLE_BT);

                boolean enabled = false;

                Log.d("BluetoothPlugin", "Enabling Bluetooth...");

                if (btadapter.isEnabled())
                {
                  enabled = true;
                } else {
                  enabled = btadapter.enable();
                }

                Log.d("BluetoothPlugin - "+ACTION_ENABLE_BT, "Returning "+ "Result: "+enabled);
                result = new PluginResult(Status.OK, enabled);
            } catch (Exception Ex) {
                Log.d("BluetoothPlugin - "+ACTION_ENABLE_BT, "Got Exception "+ Ex.getMessage());
                result = new PluginResult(Status.ERROR);
            }

            CheckGC("onCreate_Start");
            pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
            wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Tag");
            wl.acquire();
            CheckGC("onCreate_End");

            CheckGC("Connect_Start");
            mBxlService = new BxlService();

            int returnValue;

            byte[] PINCode = { 0x30, 0x30, 0x30, 0x30 }; // '0'
            String bluetoothName = "SPP-R200";
            returnValue = mBxlService.SetBluetoothInterface(true, 2, PINCode, bluetoothName);

            if (mBxlService.Connect() == 0) {
                System.out.println("Conectado");
            Log.d("BixolonPlugin", "Conectado");
                conn = true;

                CheckGC("PrintText_Start");

                returnValue = mBxlService.GetStatus();

                if (returnValue == BxlService.BXL_SUCCESS) {

                    String text = args.getString(0);

                    returnValue = mBxlService.PrintText(text, BxlService.BXL_ALIGNMENT_LEFT,
                            BxlService.BXL_FT_DEFAULT, BxlService.BXL_TS_0WIDTH | BxlService.BXL_TS_0HEIGHT);

                    returnValue = mBxlService.LineFeed(5, true);
                }

            } else {
                System.out.println("NO Conectado");
            Log.d("BixolonPlugin", "NO Conectado");
                conn = false;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        if (mBxlService != null) {
            mBxlService.Disconnect();
            mBxlService = null;
        }
        wl.release();
        if (DeviceMoldel == HTC_Desire) {
            Runtime.getRuntime().exit(0);
        }
        CheckGC("onDestroy_End");

        result = new PluginResult(Status.OK,false);

        return result;
    }
....... 
```

如需完整代码，请联系我。

# entity-framework - 降级 EF 5.0.0.0 --> 4.3.1.0 后无法加载文件或程序集“EntityFramework”

> ID：11749175
> 
> 赞同：35
> 
> 时间：2012-07-31T21:20:06.120
> 
> 标签：entity-framework

在过于仓促升级到 EF 5.0.0.0 RC 并被一个无法部署到 Windows Azure（.NET 4.0 及更低版本）的 .NET 4.5 项目所困之后，我决定降级到 EF 4.3.1.0。

我不确定执行此类迁移的最佳方式，但我的策略是使用“管理 NuGet 包”确定哪些项目引用了该包，取消选中每个项目中的包，安装替换并重新检查正确的项目。

不幸的是，在这样做之后，我的解决方案产生了名义上的“FileLoadException”。

```
Could not load file or assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral,        
PublicKeyToken=b77a5c561934e089' or one of its dependencies. The located assembly's 
manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

我搜索了解决方案文件，特别是 packages.config 以查找对 EF 5.0.0.0 RC 的引用，但没有找到。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-31T21:20:06.120

在尝试在 repositories.config 和其他地方查找对 EntityFramework 的引用失败后，我在编辑 Web.config 以帮助诊断时偶然发现了 Web.config 中的引用。

bindingRedirect 引用了不再安装的 5.0.0.0，这似乎是异常的来源。老实说，我没有将此引用添加到 Web.config，并且在尝试在单独的项目中复制错误后，发现它不是由 NuGet 包安装程序添加的，所以我不知道为什么它在那里但添加了一些东西它。

```
<dependentAssembly>
  <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
  <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
</dependentAssembly> 
```

我决定用工作项目中的等效元素替换它。请注意，以下对 5.0.0.0 的引用被替换为 4.3.1.0：

```
<dependentAssembly>
  <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
  <bindingRedirect oldVersion="0.0.0.0-4.3.1.0" newVersion="4.3.1.0" />
</dependentAssembly> 
```

这行得通！

然后我决定完全删除 EntityFramework 的dependentAssembly 引用。它仍然有效！

我仍然会对这些问题的答案感兴趣：

*   **什么将 EntityFramework 的dependentAssembly 添加到我的 Web.config**
*   **删除这些引用的任何后果**

我有兴趣学习。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-08-02T14:38:08.487

我有这个问题，我所做的只是确保我在所有项目中引用了正确的 .Net 框架，然后只需将 web.config 从

从

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/> 
```

到

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework" requirePermission="false"/> 
```

所有作品..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-23T13:31:14.437

更新旧项目时我遇到了同样的问题。这是我为解决它所做的：

*   将所有项目转换为 .NET 4.5。
*   卸载了 Entity Framework 5 的 NuGet 包。
*   重新安装了 Entity Framework 5 的 NuGet 包。
*   清洗溶液。
*   重建解决方案。

使用 Entity Framework 5 和 .NET 4 的项目正在安装 Entity Framework dll 4.4 版。一旦我在项目上将 .NET 版本切换到 4.5，dll 版本将是 5。

我的问题来自 .NET 4 上的旧项目和运行 .NET 4.5 的新项目，因此我的解决方案中有 2 个 dll 版本的 EF。

希望这可以帮助某人...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-04T12:03:08.783

我在 Jenkins 下使用 MSTEST 运行单元测试时遇到了类似的问题。我的解决方法是删除“Version=6.0.0.0”，如下所示：

```
Old:
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=xxxx" requirePermission="false" />

New:
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Culture=neutral, PublicKeyToken=xxxx" requirePermission="false" /> 
```

我必须对我的多项目解决方案中的几个 App.config 和 Web.config 文件进行此更改。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-24T19:33:47.213

在构建项目时，如果在项目属性中显示它是在 Target.NET Framework 4.5 下构建的，请将其更新为 4.6 或 4.6.1。然后构建将能够在 Web.config 文件中找到 Entity Framework 6.0。这种方法解决了我的问题。 [从项目属性中选择目标框架](http://i.stack.imgur.com/KUFTe.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-19T01:19:42.023

如果您使用 Visual Studio 2012 ASP.NET Web 窗体应用程序模板，那么您将获得该参考。我假设它是通过 Nuget 而不是框架 System.Data.Entity 参考获得的。

![在此处输入图像描述](../Images/b08de9cde38796c7fbb56a2251ba5a32.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-12T19:25:33.187

我收到了完全相同的错误消息。除了我的错误消息说“无法加载文件或程序集'EntityFramework，Version = 6.0.0.0 ...”，因为我安装了EF 6.1.1。这是我为解决问题所做的。

1) 我通过单击工具 > NuGet 包管理器 > 包管理器控制台启动 NuGet 管理器控制台 2) 我通过键入以下命令卸载了已安装的 EntityFramework 6.1.1：

```
Uninstall-package EntityFramework 
```

3) 收到软件包已成功卸载的确认后，我通过输入以下命令安装了 5.0.0 版本：

```
Install-Package EntityFramework -version 5.0.0 
```

问题已解决。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-03T13:22:21.357

我对 selenium 有类似的问题：我使用 NuGet 降级了我的 selenium 并得到了相同的错误消息。我的解决方案是从 app.config 文件中删除较新版本的行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T23:38:42.750

我有同样的问题。我得到了 System.Data.Entity.Infrastructure；错误，它只是 v5.0 或更高版本的一部分。只需右键单击引用并选择“管理 NuGet 包”。在 Installed Package 选项中，卸载已安装的 Entity FrameWork 并安装 5.0 版本。它解决了问题。我试图手动获取 System.Data.Entity 参考，但没有成功。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-12T22:01:23.010

```
public Configuration()
{
    AutomaticMigrationsEnabled = false;

    // register mysql code generator

    SetSqlGenerator("MySql.Data.MySqlClient", new MySql.Data.Entity.MySqlMigrationSqlGenerator());
} 
```

我发现连接器 6.6.4 不适用于 Entity Framework 5，但适用于 Entity Framework 4.3。因此，要降级，请在包管理器控制台中发出以下命令：

卸载包EntityFramework

安装包 EntityFramework -版本 4.3.1

最后，我再次执行 Update-Database -Verbose，瞧！架构和表已创建。等待下一版本的连接器将其与 Entity Framework 5 一起使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-09T09:09:03.250

我有一个类似的问题：

1.  在我的 ASP.NET MVC 项目中，我已将 Sql Server Compact 数据库 (sdf) 添加到我的 App_Data 文件夹中。VS 添加了对 EntityFramework.dll, version 4.* 的引用。该`web.config`文件已使用 4.* 配置进行了适当更新。

    `<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>`

2.  我在我的解决方案中添加了一个新项目（数据访问层项目）。在这里，我添加了一个 EDMX 文件。VS 添加了对 EntityFramework.dll 5.0 版的引用。App.config 文件已使用 5.0 配置进行了适当更新

    `<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />`

在执行时，从数据库读取时，应用程序总是抛出异常`Could not load file or assembly 'EntityFramework, Version=5.0.0.0 ...`。

该问题已通过从我的 MVC 项目中删除 EntityFramework.dll v4.0 得到解决。我还`web.config`用正确的 5.0 版本更新了文件。然后一切都按预期工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-03T06:29:26.260

在您的参考文献中单击 EntityFramework 。转到属性并将特定版本设置为 False。它对我有用。

# openmpi - 每个核心分配两个 MPI 进程

> ID：11749182
> 
> 赞同：6
> 
> 时间：2012-07-31T21:20:33.323
> 
> 标签：openmpi, affinity, hyperthreading

如何为每个核心分配 2 个 MPI 进程？

例如，如果我这样做，`mpirun -np 4 ./application`那么它应该使用 2 个物理内核来运行 4 个 MPI 进程（每个内核 2 个进程）。我正在使用 Open MPI 1.6。我做了`mpirun -np 4 -nc 2 ./application`但无法运行它。

它抱怨`mpirun was unable to launch the specified application as it could not find an executable:`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T14:56:01.203

`orterun`（Open MPI SPMD/MPMD 启动器；`mpirun/mpiexec`只是它的符号链接）对进程绑定有一些支持，但它不够灵活，无法让您在每个核心绑定两个进程。您可以尝试使用`-bycore -bind-to-core`，但当所有核心都已分配一个进程时，它会出错。

但是有一种解决方法 - 您可以使用*rankfile*来明确指定将每个 rank 绑定到哪个插槽。下面是一个示例：为了在双核 CPU 上运行 4 个进程，每个内核有 2 个进程，您可以执行以下操作：

```
mpiexec -np 4 -H localhost -rf rankfile ./application 
```

其中`rankfile`是具有以下内容的文本文件：

```
rank 0=localhost slot=0:0
rank 1=localhost slot=0:0
rank 2=localhost slot=0:1
rank 3=localhost slot=0:1 
```

这会将等级 0 和 1 放在处理器 0 的核心 0 上，并将等级 2 和 3 放在处理器 0 的核心 1 上。丑陋但有效：

```
$ mpiexec -np 4 -H localhost -rf rankfile -tag-output cat /proc/self/status | grep Cpus_allowed_list
[1,0]<stdout>:Cpus_allowed_list:     0
[1,1]<stdout>:Cpus_allowed_list:     0
[1,2]<stdout>:Cpus_allowed_list:     1
[1,3]<stdout>:Cpus_allowed_list:     1 
```

**编辑：**从您的[另一个问题](https://stackoverflow.com/questions/11747036/how-to-specify-the-number-of-logical-process)可以清楚地看出您实际上是在超线程 CPU 上运行。然后，您必须弄清楚逻辑处理器的物理编号（这有点令人困惑，但物理编号对应于 中`processor:`报告的值`/proc/cpuinfo`）。获取它的最简单方法是安装`hwloc`库。它提供了`hwloc-ls`您可以像这样使用的工具：

```
$ hwloc-ls --of console
...
  NUMANode L#0 (P#0 48GB) + Socket L#0 + L3 L#0 (12MB)
    L2 L#0 (256KB) + L1 L#0 (32KB) + Core L#0
      PU L#0 (P#0)    <-- Physical ID 0
      PU L#1 (P#12)   <-- Physical ID 12
... 
```

物理 ID 列`P#`在括号中。在您的 8 核情况下，第一个核心（核心 0）的第二个超线程很可能具有 ID `8`，因此您的 rankfile 看起来像：

```
rank 0=localhost slot=p0
rank 1=localhost slot=p8
rank 2=localhost slot=p1
rank 3=localhost slot=p9 
```

（注意`p`前缀 - 不要省略它）

如果您没有`hwloc`或无法安装它，那么您将不得不自己解析`/proc/cpuinfo`。超线程将具有相同的 和 值，`physical id`但`core id`不同的`processor`和`apicid`。物理 ID 等于 的值`processor`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:50:29.250

我不确定您是否有多台机器，以及您希望如何分配进程的确切细节，但我会考虑阅读：

[mpirun 手册页](http://www.open-mpi.org/doc/v1.4/man1/mpirun.1.php)

该手册表明它具有将进程绑定到不同事物的方法，包括节点、套接字和 cpu 内核。

重要的是要注意，如果您运行的进程数量是 CPU 内核的两倍，那么您将实现这一点，因为它们往往会均匀地分布在内核上以共享负载。

我会尝试以下类似的方法，尽管该手册有些模棱两可，而且我不能 100% 确定它会按预期运行，只要您有双核：

```
mpirun -np 4 -npersocket 4 ./application 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-01T14:31:43.457

如果您使用 PBS 或类似的东西，我会建议这种提交：

qsub -l select=128:ncpus=40:mpiprocs=16 -v NPROC=2048./pbs_script.csh

在目前的提交中，我选择了 128 个计算节点，它们有 40 个核心，并使用其中的 16 个。就我而言，我每个节点有 20 个物理内核。

在此提交中，我阻止了节点的所有 40 个核心，没有人可以使用这些资源。它可以避免其他人使用同一节点并与您的工作竞争。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-07T11:06:25.007

使用 Open MPI 4.0，这两个命令：

`mpirun --oversubscribe -c 8 ./a.out`

和

`mpirun -map-by hwthread:OVERSUBSCRIBE -c 8 ./a.out`

为我工作（我有一个具有 4 个内核和 8 个逻辑内核的 Ryzen 5 处理器）。

我使用包含实数运算的 do 循环进行了测试。使用了所有逻辑线程，但似乎没有加速优势，因为与使用`-c 4`选项（没有超额订阅）相比，计算需要双倍的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-28T02:04:11.847

你可以跑 `mpirun --use-hwthread-cpus ./application`

在这种情况下，Open MPI 会认为处理器是超线程提供的线程。这与将处理器视为 CPU 内核时的默认行为形成对比。

当您使用此选项时，Open MPI 将超线程提供的线程表示为“硬件线程”，并为每个“硬件线程”分配一个 Open MPI 处理器。

# android - 根据gps坐标在mapview上设置视图

> ID：11749192
> 
> 赞同：1
> 
> 时间：2012-07-31T21:21:22.103
> 
> 标签：android, android-mapview, android-location

我正在尝试在我正在使用的地图视图上设置界限，所以我总是以某种方式居中，而且我还可以看到基于视图的全套信息。基本上我会得到一个中心点的 GPS 坐标，然后我会得到另一个值，比如 0.9，它是当前视图中需要存在的当前 GPS 点的 x/y 差异。例子

中心点：37.777125，-12.2419644（旧金山）

差异：0.9

所以视图需要是

```
Top-Left: 36.877125, -13.1419644
Bottom-Right: 38.677125, -11.3419644 
```

有没有办法以这种方式设置地图视图的边界？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:55:33.883

这是。mapView 的控制器中有一个接口 - `zoomToSpan(long, long)`。您需要执行以下操作：

```
long latSpan = Math.abs(startLat - endLat);
long lonSpan =  Math.abs(startLon - endLon);

mapView.getController().zoomToSpan(latSpan, lonSpan); 
```

其中`startLat`, `endLat`, `startLon`, `endLon`- 您计算的边界

# geocode - 有哪些图书馆/服务（付费或免费）可以清理和验证地址？

> ID：11749193
> 
> 赞同：0
> 
> 时间：2012-07-31T21:21:36.283
> 
> 标签：geocode, data-scrubbing

清理地址的服务或库需要可从自定义 .NET 包装服务或库中调用。没有 UI 要求来显示地图或跟踪物理包裹到邮政地址的交付。

[https://www.usps.com/business/webtools.htm](https://www.usps.com/business/webtools.htm)不作为选项，因为使用条款仅限于支持包裹物理交付的应用程序。

似乎 google 和 Bing 都有使用条款，将应用程序开发的使用限制为在 UI 中显示地图。

这是一个使用 google JavaScript 库进行地理编码地址查找的示例。它似乎运作良好。不幸的是，我不能使用它，但正在寻找几乎同样有效的东西。

[http://jsfiddle.net/Robotronic/ayfgT/](http://jsfiddle.net/Robotronic/ayfgT/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:04:51.837

我最近一直在寻找同样的东西，并且有几个可能性。由于我没有在家工作的电脑，所以我现在唯一记得的就是 SmartyStreets.com。他们免费给你一个小号码，然后你必须付钱。我还有一个，今晚晚些时候我可以拿到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:02:26.460

它可能超出了您的价格范围，但我的公司使用[Melissa Data](http://www.melissadata.com/)已经有一段时间了，唯一的失败是在超新住宅开发上。我认为他们还会定期向我们发送数据库更新。

# vim - Vim 脚本没有加载？

> ID：11749195
> 
> 赞同：3
> 
> 时间：2012-07-31T21:21:48.837
> 
> 标签：vim

当我使用一些 Python 文件并`:set filetype?`在 Vim 中运行时，我得到`filetype=python`了 ，因此该文件被正确识别为 Python 代码。

我已经下载了这个插件：[http](http://www.vim.org/scripts/script.php?script_id=1494) ://www.vim.org/scripts/script.php?script_id= 1494 并将它放在 ftplugin 文件夹中，但是它的 f/F 键绑定不起作用，并且运行它`:call ReFold()`给出了`E117: Unknown Function`指示该插件尚未加载。

关于如何加载插件的任何故障排除提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:54:35.290

尝试在脚本顶部删除此部分：

```
if exists("b:did_ftplugin")
    finish
endif
let b:did_ftplugin = 1 
```

并且可能将脚本移动到`after/ftplugin`目录（[:help after-directory](http://vimdoc.sourceforge.net/htmldoc/options.html#after-directory)）。

我认为您有另一个特定于 python 的插件，它首先出现在`'runtimepath'`并定义`b:did_ftplugin`，这没关系，但是这个 python 脚本 ( `python_editing.vim`) 不应该检查和定义，`b:did_ftplugin`因为它没有实现原始插件的功能，它只是扩展它。

因此脚本已加载，但什么也不做。通过运行`:script`不带参数的命令，可以检查是否加载了某些脚本。

# android - SyncAdapter 未显示在设置菜单中

> ID：11749197
> 
> 赞同：0
> 
> 时间：2012-07-31T21:22:02.820
> 
> 标签：android, service, sync, android-syncadapter

我正在尝试使用 google 帐户设置 SyncAdapter。我做了所有像教程一样的事情，但我的适配器在设置菜单中仍然不可见。

所以这是我的android清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="pl.example.tasks"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
<uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />

<application
    android:name=".TasksApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <service
        android:name="TasksSyncAdapterService"
        android:description="@string/tasks_sync_descr"
        android:exported="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/tasks_sync_label"
        android:process="@string/tasks_sync_process" >
        <intent-filter>
            <action android:name="android.content.SyncAdapter" />
        </intent-filter>

        <meta-data
            android:name="android.content.SyncAdapter"
            android:resource="@xml/taskssync" />
    </service>

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <provider
        android:name=".TasksContentProvider"
        android:authorities="pl.example.tasks" />
</application> 
```

这是我的tasksync.xml：

```
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    android:accountType="com.google"
    android:contentAuthority="pl.example.tasks"
    android:supportsUploading="false"
    android:userVisible="true" /> 
```

请给我一些指导，这里可能有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:36:03.627

我认为您需要`android:syncable="true"`提供者节点中的属性。所以：

```
<provider
    android:name=".TasksContentProvider"
    android:authorities="pl.example.tasks"
    android:syncable="true" /> 
```

# javascript - AngularJS：使用 $scope 变量遇到一个奇怪的问题

> ID：11749200
> 
> 赞同：0
> 
> 时间：2012-07-31T21:22:15.893
> 
> 标签：javascript, angularjs

在下面的代码中，每当你从列表中的删除链接中删除一个项目时，它只会从列表中删除该项目，但不会删除当前选中的项目。（单击后显示的项目）。但是，如果您单击当前所选项目旁边的删除链接，它将从两个位置删除。

复制我所看到的：

*   通过在文本框中键入并按几次 Enter 来添加一堆项目。
*   从列表中选择一项。
*   当它显示在下面时，单击该项目旁边的删除。
*   这是正确的行为。
*   选择您之前创建的另一个项目。
*   现在单击列表中项目旁边的删除链接。
*   该项目从列表中删除，但不是当前显示的项目。

当我单击列表中的删除链接时，当我进入代码 $scope.currentUser 时未定义。

为什么会这样？

```
<html ng-app="myApp">
<head>
    <script src="http://code.angularjs.org/1.0.1/angular-1.0.1.min.js"></script>
    <script>
    var app = angular.module('myApp', []);

    app.config(function($routeProvider) {
        $routeProvider.when('/User/:id', {
            controller: UserCtrl,
            template: '<h1>{{currentUser.name}}</h1> <a ng-click="deleteUser(currentUser.id)">delete me</a>'
        });
    });

    app.factory('userSvc', function(){ 
        return new UserService();
    });

    function UserCtrl($scope, $routeParams, $location, userSvc) {
        var currUser = userSvc.getUser($routeParams.id);
        $scope.currentUser = currUser;
        $scope.users = userSvc.getAllUsers();

        $scope.addUser = function () {
            var user = { 
                id: userSvc.nextId(),
                name: $scope.addUserName
            };
            userSvc.addUser(user);
            $scope.addUserName = '';
            $location.url('/User/' + user.id);
        };

        $scope.deleteUser = function(id) {      
            if($scope.currentUser != null && $scope.currentUser.id == id) {
                $scope.currentUser = null;
            }
            userSvc.delete(id);
        };
    };

    function UserService() {
        var users = [{id: 1, name: 'Ben' }];

        this.delete = function(id) {
            for(var i = 0; i < users.length; i++) {
                var user = users[i];
                if(user.id == id) {
                    users.splice(i,1);
                }
            }
        };

        this.addUser = function(user) {
            users.push(user);
        };

        this.getAllUsers = function() {
            return users;
        };

        this.getUser = function(id) {
            for(var i = 0; i < users.length; i++) {
                var user = users[i];
                if(user.id == id) {
                    return user;
                }
            }
        };

        this.nextId = function() {
            var maxId = 0;
            for(var i = 0; i < users.length; i++) {
                var user = users[i];
                maxId = Math.max(maxId, user.id);
            };
            return maxId + 1;
        };
    }
    </script>
</head>
<body>
<div ng-controller="UserCtrl">
    <form ng-submit="addUser()">
        <input ng-model="addUserName" type="text"/>
        <input type="submit" value="Add"/>
    </form>
    <ul>
        <li ng-repeat="user in users"><a href="#/User/{{user.id}}">{{user.name}}</a> <a ng-click="deleteUser(user.id)">delete</a></li>
    </ul>
</div>
<div ng-view></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:03:50.740

事实证明，从列表中选择用户实际上还创建了一个全新的范围，该范围与用于绑定列表的范围不同。

多亏了 Gloopy 在上面查看 Batarang 的评论[，](https://github.com/angular/angularjs-batarang)我才能够看到这种情况发生。如果这对您有帮助，请 +1 他的评论。

根据[Scopes 的文档，](http://docs.angularjs.org/guide/scope)一些指令实际上会导致创建一个新的范围。我假设单击 $routeProvider 正在处理的链接也会导致创建一个全新的范围树，可能是因为它正在创建该控制器的另一个实例。

# android - 通知布局中的 Ticker TextView

> ID：11749204
> 
> 赞同：0
> 
> 时间：2012-07-31T21:22:40.897
> 
> 标签：android, notifications

有没有办法让`TextView`自定义`Notification`布局看起来像一个自动收报机？我正在使用以下代码来设置`Notification`布局。

```
mNotificaionView = new RemoteViews(getPackageName(), R.layout.status_bar);
mNotificaionView.setTextViewText(R.id.ticker, getLongText());
mNotification.contentView = mNotificaionView; 
```

`TextView`以及status_bar.xml 中的以下属性

```
android:singleLine="true" 
android:ellipsize="marquee"
android:marqueeRepeatLimit ="marquee_forever"
android:scrollHorizontally="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

简而言之，我如何`TextView`在`RemoteViews`对象中创建一个ticker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:36:04.250

这应该有效，但前提是您的 View 具有焦点。看到这个答案，它可能会对你有所帮助。 [Android 通知 Marquee 不起作用](https://stackoverflow.com/questions/9512465/android-notification-marquee-not-working)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:12:31.177

查看 Any.DO SmallWidget(4x1)。

这是一个让文本淡入淡出的自动收报机。它是一个 AppWidget。它是如何工作的？

*   为文本创建一个颜色数组，从不透明到透明再到不透明。
*   创建一个警报，当触发它时，它会将文本的颜色更改为上述数组中的当前颜色（将保存数组中的当前索引）。
*   使警报创建另一个警报，对数组中的下一个索引执行相同的操作
*   当索引位于数组的透明部分时 - 将文本更改为我们要呈现的下一行
*   当到达最后一个索引时，我们将重置数组的索引，并设置警报以重新开始整个过程​​。该警报将设置为从那一刻起大约 5 秒（给用户足够的时间来阅读文本）

问题 - 电池消耗。所有这些警报都不能很好地使用电池，但请先对其进行测试，看看它有多糟糕。

我从来没有在通知栏小部件上尝试过这个，但由于它们是用相同的技术构建的，这可能会起作用。

祝你好运！

# javascript - 我的网站应该如何优雅地处理偶尔丢失的 javascript 文件？

> ID：11749206
> 
> 赞同：3
> 
> 时间：2012-07-31T21:22:47.307
> 
> 标签：javascript, tags, webserver, webpage, cdn

假设我的网站上有这个脚本标签（从 SO 借来的）。

```
<script type="text/javascript" async="" 
      src="http://edge.quantserve.com/quant.js"></script> 
```

如果`edge.quantserve.com`在没有返回 404 的情况下出现故障或停止响应，那么在页面的其余部分加载之前是否必须等待超时？我在想 Chaos Monkey 出现并炸毁了我的网站所依赖的服务器，该服务器不是 CDN 的一部分并且故障转移很差。

处理此问题的行业标准方法是什么？我在 SO 上找不到骗子，也许我正在寻找错误的术语。

更新：我应该更仔细地查看 SO 代码，底部有这个：

```
<script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-1']);
        _gaq.push(['_setCustomVar', 2, 'accountid', '14882',2]); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    (function(){
        var s=document.getElementsByTagName('script')[0];
        var ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src='http://www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src='http://edge.quantserve.com/quant.js'; 
        s.parentNode.insertBefore(sc,s);
    })();
    </script> 
```

好的，所以如果`quant.js`文件加载失败，它会创建一个带有`ga.async=true;`. 也许这就是诀窍。

可能的答案：[https ://stackoverflow.com/a/1834129/30946](https://stackoverflow.com/a/1834129/30946)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:28:36.507

在您的服务器上复制该文件并使用它。仅当来自服务器的副本无法加载时，它才会加载您的副本

```
<script src="http://edge.quantserve.com/quant.js"></script>
    <script>window.quant || document.write('<script src="js/quant.js"><\/script>')</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:56:12.340

一般来说，把它做好并且跨浏览器是很棘手的。

一些建议：

1.  将脚本移动到 HTML 页面的最底部（以便在您请求该脚本之前显示几乎所有内容）
2.  将其移至底部并包裹在`<script>document.write("<scr"+"ipt src='http://example.org/script.js'></scr"+"ipt>")</script>`或更新后添加的方式（`document.createElement('script')`）
3.  最后一个选项是通过 XHR 加载它（但这仅适用于同域，或仅当在第三方服务器上启用了 CORS 时才适用于跨域）；然后，您可以使用[`timeout`](https://developer.mozilla.org/en/xmlhttprequest#Browser_compatibility)XHR 的属性（对于 IE 和 Fx12+），并在其他浏览器中，使用`setTimeout`并检查 XHR 的`readyState`. 它现在有点复杂且非常非跨浏览器，所以选项 2 看起来最好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:32:22.790

要回答您关于浏览器必须等待脚本在页面的其余部分加载之前加载的问题，答案通常是否定的。典型的浏览器会有多个线程来处理页面和链接内容（CSS、图像、js）的下载。所以应该加载页面的其余部分，尽管用户的浏览器指示器仍然会显示页面正在尝试加载，直到最终请求完成或超时。

根据您尝试加载的资源的性质，这显然会对您的页面产生不同的影响。通常，如果您担心这一点，您可以将所有文件托管在一个通用 CDN 上（或者您的网站，如果它不是那么高流量），这样至少如果有一件事情失败了，很可能一切都失败了，而您有一个更大的问题要应对:)

# linux - 内核中的奇怪锁定

> ID：11749207
> 
> 赞同：3
> 
> 时间：2012-07-31T21:22:52.277
> 
> 标签：linux, gcc, arm, llvm, clang

`printk`基本上，我在将目标代码从 mach 目标文件加载和链接到 Linux 内核时搞砸了，当我从该对象内部执行操作时，我注意到了一些奇怪的事情。如果我用超过 3 个（4 个或更多）参数 ( ) 调用 printk `printk("%d,%d,%d \n", 1, 1, 1)`，系统将锁定，但稍后会锁定（它不会从系统调用返回，而是锁定）。**实际打印工作并在所有情况下打印预期值。**

现在，奇怪的是，**这只发生在我使用 Clang+LLVM 构建它时**。这是罪魁祸首代码：

![坏叮当](../Images/0a61c04675f8424d9901367fd005c075.png)

另一方面，当它使用 LLVM GCC 构建时，它工作得很好：

![LLVM GCC](../Images/38baf577cc1775969a077dcad973e4ed.png)

这在使用 GNU GCC 构建时也有效：

![GNU GCC](../Images/ed4e1bb037d6f52cc84a36642cef58a9.png)

**任何人都可以提出为什么 clang 版本会导致系统锁定的原因吗？**所以基本上，第一段代码有问题，导致它被锁定，而其他代码段中不存在。我真的不知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T07:36:43.077

我不知道您是如何生成目标文件的，但您似乎正在使用 Darwin ABI，它基本上是经过大量修改的 APCS（“旧”ARM ABI）。但是，对于 linux 等，您需要使用 EABI（又名 AAPCS），它在许多情况下与 APCS 不同。

例如，R9 在 EABI 中被调用保存，但在 darwin 上被调用破坏，在传递 64 位值等方面存在差异。请注意，您的 clang 示例破坏 R9，而 llvm-gcc - 没有:)

# iphone - 用于多选的 iOS 自定义键盘

> ID：11749210
> 
> 赞同：1
> 
> 时间：2012-07-31T21:23:09.407
> 
> 标签：iphone, keyboard

我正在尝试更新我的琐事应用程序并希望它在用户输入答案时他/她只能选择单击 A、B、C 或 D。这可能吗？如果是这样，苹果会允许这样做吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:29:54.580

您也可以创建一个自定义视图，其中包含在必要时出现的四个按钮。它比自定义键盘更容易，并且取决于您如何设计和实现它，它可能看起来比操作表更好。[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)提供了一组丰富的方法来轻松地为视图设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:27:38.297

是的，您可以自定义键盘，所有文档都在开发人员库中。但是在我看来，`UIActionSheet`如果您所做的只是从四个选项中进行选择，那么您最好使用 a 。

*编辑：作为参考，请查看Apple 的 iOS 文本编程指南中的[数据输入自定义视图。](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html)*

# javascript - foreach绑定中的knockoutjs afterRender函数

> ID：11749212
> 
> 赞同：10
> 
> 时间：2012-07-31T21:23:16.333
> 
> 标签：javascript, knockout.js

我正在尝试使用 knockoutjs foreach 绑定指定对插入的元素的入口效果。非常简单的设置：

```
myViewModel.myObservableArray.push({enter:function() { ... }); 
```

并在标记中：

```
foreach:{data:myObservableArray, afterRender:enter} 
```

似乎它应该工作......对吧？但它没有在项目上找到输入功能。我发现确实有效的是：

```
myViewModel.enter = function(something, item) { item.enter(); };

foreach:{data:myObservableArray, afterRender:$root.enter} 
```

将 enter 函数添加到根视图模型并绑定`afterRender`到 $root.enter。然后 Enter 将项目作为其第二个参数传递，因此可以反过来调用项目的 enter 函数，但感觉就像一个 hack。

谁能解释这里发生了什么？

谢谢。

**编辑：**

为了澄清我已经创建了一个[fiddle](http://jsfiddle.net/nicholasstephan/tTcw6/1/)。

这样做非常简单，在[动画过渡示例](http://knockoutjs.com/examples/animatedTransitions.html)中有更深入的介绍。它在根视图模型中为使用 foreach 绑定插入的每个 dom 元素运行一个函数。

所以问题是：如果我想要特定于项目的 afterRender、afterAdd 或 beforeRemove 函数怎么办？我可以看到这很有用。特别是如果使用模板绑定来动态选择模板（[注 4](http://knockoutjs.com/documentation/template-binding.html#note_4_dynamically_choosing_which_template_is_used)）。有没有一种干净的方法可以做到这一点？现在我`enter`在视图模型的根目录中有一个函数，它只是调用`enter`项目上的函数，但就像我上面所说的那样，这感觉就像一个 hack。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:41:40.473

不，这就是[它的设计](http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove)方式。

来自[文档](http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove)：

> 注3：使用“afterRender”、“afterAdd”和“beforeRemove”</p>
> 
> 有时您可能希望对模板生成的 DOM 元素运行自定义后处理逻辑。例如，如果您使用 jQuery UI 之类的 JavaScript 小部件库，您可能希望截取模板的输出，以便可以在其上运行 jQuery UI 命令将一些呈现的元素转换为日期选择器、滑块或还要别的吗。
> 
> 通常，对 DOM 元素执行此类后处理的最佳方法是编写[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)，但如果您真的只想访问模板发出的原始 DOM 元素，则可以使用 afterRender。
> 
> 传递函数引用（函数字面量，或**在视图模型上给出函数的名称**），Knockout 将在渲染或重新渲染模板后立即调用它。

（强调我的）

* * *

正如它所说，自定义绑定是另一种实现方式，并且可能会更好，具体取决于该`enter()`函数的作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T21:56:22.780

在这种情况下，下划线去抖（_.debounce）是一个很好的解决方案。

模板

```
data-bind=" template: {foreach:myObservableArray, afterRender: runWhenAllRenderDone } 
```

如果在最后 100 毫秒内未触发 afterRender，则将执行 debounce 函数。

```
var runWhenAllRenderDone = _.debounce(myFunction, 100);

function myFunction(){
    //do some task but do it for once only
} 
```

是不是很棒？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-24T07:40:36.350

找到了另一种没有的解决方法`timeout`，这种技术是基于虚拟元素的`<!-- ko if: $parent.afterRender($index()) --><!-- /ko -->`

```
function ReservationsViewModel() {
    // Editable data
    this.seats = ko.observableArray([
        { name: "Steve", meal: "Standard (sandwich)", price: 343},
        { name: "Steve", meal: "Premium (lobster)", price: 10},
        { name: "Steve", meal: "Ultimate (whole zebra)", price: 290}
    ]);

    this.afterRender = (i) => {
       // checking element rendered is last
       if (i === this.seats().length - 1) { 
           console.log('rendered');
           // our after rendered logic goes here...
       }
    };
} 
```

它的模板是

```
<tbody data-bind="foreach: seats">
    <tr>
        <td data-bind="text: name"></td>
        <td data-bind="text: meal"></td>
        <td data-bind="text: price"></td>
    </tr>    
    <!-- ko if: $parent.afterRender($index()) --><!-- /ko -->
</tbody> 
```

这个额外的逻辑`i === this.seats().length - 1`，将检查最后一行是否被渲染。然后我们可以在里面执行我们的 afterRender 逻辑。

# perl - 将 tcl 转换为 perl 以格式化日期时间

> ID：11749214
> 
> 赞同：0
> 
> 时间：2012-07-31T21:23:26.953
> 
> 标签：perl, tcl

我需要将我的 TCL 脚本转换为 perl，我知道一些 perl 但并不多：

我需要将此行转换为 perl：

```
set current [clock format [clock scan "1 hour ago" -base [clock seconds]] -format "%Y-%m-%d %H"] 
```

它打印当前日期和 1 小时后（由于服务器返回 EST，我想要 CST）。

例如，如果今天的日期是 2012 年 7 月 31 日，时间是下午 4:20（美国东部标准时间下午 5:20），它将打印

2012-07-31 16

服务器返回东部时间，因此我希望它在 1 小时前打印以调整到中央时间。注意：它不应该打印 16:20。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:41:42.610

试试这个：

```
use POSIX qw/strftime/;

print strftime('%Y-%m-%d %H', localtime);
# prints 2012-07-31 14 for me, currently 
```

编辑：如果您必须在一小时前获得这种格式，那么请改为：

```
use POSIX qw/strftime/;

my $hour_ago = time() - (60*60);
print strftime('%Y-%m-%d %H', localtime($hour_ago));
# prints 2012-07-31 13 for me, currently 
```

如果这是一个时区问题，您可能需要考虑明确处理时区，而不是假设一个小时的偏移量。这是[一篇关于在 Perl 中处理时区](http://www.perlmonks.org/?node_id=659153 "Perl Monks 关于处理时区。")的文章。

# debugging - MongoDB：mapReduce 的副作用

> ID：11749217
> 
> 赞同：5
> 
> 时间：2012-07-31T21:23:47.157
> 
> 标签：debugging, mongodb, logging, mapreduce, serverside-javascript

在我们的 map-reduce 作业的开发过程中，我们的 MR 代码独立于被 map-reduce 的数据生成有用的诊断数据结构。有没有一种简单的方法可以将这些数据导出到调用 mapReduce 的代码中或将它们保存在 Mongo 中？仅写入日志文件结果是非常次优的，因为 (a) 那里已经有很多数据，并且 (b) 我们的诊断信息是高度结构化的，事实上，我们希望针对它。

到目前为止，我的调查表明 MR 数据结构是按值传递的（通过序列化），因此任何内存中的数据结构都会丢失，包括那些与“全局”范围挂钩的数据结构。命名空间与主要的 JS 服务器端命名空间隔离，因此`dbeval`似乎无法访问它们（或者，至少，我不知道去哪里寻找）。最后但同样重要的是，尽管所有数据库对象和函数都存在，但 10gen 正在生成（令人困惑的）错误消息以阻止它们的使用，例如，关于在is`coll.insert`时不是函数的信息。`typeof coll.insert === 'function'``true`

需要明确的是，我有兴趣在单个节点中进行开发，因为 MongoDB 中的日志记录/调试支持非常有限。这种类型的副作用在生产环境中不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:15:02.133

据推测，不可能（在 MongoDB 2.2 中）从 Map/Reduce 函数中访问另一个数据库。除了潜在的性能影响之外，还可能会产生死锁和其他不需要的副作用。

不幸`print()`的是，mongo 日志是唯一的“带外”输出选项。

根据您的诊断输出，尝试的一种方法是：

*   添加一个唯一标记，允许您在日志输出中识别输出（甚至输出运行）

*   使用序列化您的输出，`tojson()`以便使用一些可解析的结构记录它，并在您理想情况下在单行上发出`print()`

*   将脚本写入`tail`mongod.log 日志以查找与您的唯一标记匹配的行，并将其插入另一个集合以进行报告

将从 M/R 函数中运行的代码示例：

```
var diag = {
    'run' : diagrun,
    'phase': 'map',
    'key'  : z
}   
print("MAPDIAG:" + tojson(diag)); 
```

示例输出：

```
$ tail -f mongo.log | grep "^MAPDIAG"
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "dog" }
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "cat" }
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "cat" }
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "mouse" }
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "cat" }
MAPDIAG:{ "run" : "20120824", "phase" : "map", "key" : "dog" }
MAPDIAG:{ "run" : "20120824", "phase" : "reduce", "key" : "cat", "total" : 3 }
MAPDIAG:{ "run" : "20120824", "phase" : "reduce", "key" : "dog", "total" : 2 } 
```

# ruby-on-rails - Ruby 从 23+9.23 = 32.230000000000004 开始出现看似不稳定的结果

> ID：11749219
> 
> 赞同：2
> 
> 时间：2012-07-31T21:23:49.500
> 
> 标签：ruby-on-rails, ruby

我在 irb for Ruby 中收到了非常有趣且看似不稳定的结果。到底是怎么回事？

这是对的！

```
>> 23+9.22 
=> 32.22 
```

这不是！

```
>> 23+9.23 
=> 32.230000000000004 
```

所有尾随零来自哪里？到底是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T21:31:18.570

```
puts "%.30f" % 9.23
#=> 9.230000000000000426325641456060 
```

由于 base-2（数字的计算机内部表示）和 base-10（您习惯处理并在文本编辑器或 IRB 中输入的内容）之间的差异，您不能将 9.23*完全*表示为浮点值。这不是特定于 Ruby 的，而是存在于几乎所有编程语言中。

例如，9.23 在内部表示为 2 的幂之和，例如：

```
01001.00111010111...
||||| ||||||||||+-> 1 * 1/2048 \            
||||| |||||||||+--> 1 * 1/1024  \          
||||| ||||||||+---> 1 * 1/512    \        
||||| |||||||+----> 0 * 1/256     \       
||||| ||||||+-----> 1 * 1/128      \      
||||| |||||+------> 0 * 1/64         fraction = 0.22998046875
||||| ||||+-------> 1 * 1/32       /     
||||| |||+--------> 1 * 1/16      /      
||||| ||+---------> 1 * 1/8      /      
||||| |+----------> 0 * 1/4     /       
||||| +-----------> 0 * 1/2    /        
|||||  
||||+-------------> 1 * 1      \
|||+--------------> 0 * 2       \  
||+---------------> 0 * 4         integer = 9
|+----------------> 1 * 8       /
+-----------------> 0 * 16     / 
```

有关更多信息，请阅读*[每个计算机科学家应该了解的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)*的知识和[Wikipedia 上的 IEEE 754 描述](http://en.wikipedia.org/wiki/Floating_point#IEEE_754%3a_floating_point_in_modern_computers)。

当精度很重要（例如货币）时，您的解决方法是：

1.  跟踪计算的最小可用单位（例如便士），并仅转换为十进制以进行显示。例如：

    ```
    result = 2300 + 923          # $23.00 + $9.23
    puts "%.2f" % (result/100.0) # Ensure output rounded to two decimal places
    #=> 32.23 
    ```

2.  使用类似的库[`BigDecimal`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)来跟踪您的精确精度，并将您的数据库设置为使用固定精度的数据类型，如[DECIMAL 或 NUMERIC](http://www.postgresql.org/docs/9.2/static/datatype-numeric.html#DATATYPE-NUMERIC-DECIMAL)。

3.  接受数值通常“足够接近”，并在向用户显示它们时始终使用格式选项，例如

    ```
    result = 23 + 9.27    #=> 32.269999999999996
    puts "%g" % result    #=> 32.27
    puts "%.3f" % result  #=> 32.270
    puts "%.1f" % result  #=> 32.3 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:37:49.757

这不是 Ruby 的问题。这是计算机中浮点数表示的已知问题。

如果您正在进行财务或货币处理，那么您希望远离浮点数来表示您的金额。

# c# - 有没有办法在 C# 中实现自定义语言功能？

> ID：11749222
> 
> 赞同：53
> 
> 时间：2012-07-31T21:24:14.927
> 
> 标签：c#, syntactic-sugar, language-construct

我一直对此感到困惑一段时间，我环顾四周，找不到任何关于这个主题的讨论。

假设我想实现一个简单的例子，比如一个新的循环结构：do..until

写得很像做..while

```
do {
    //Things happen here
} until (i == 15) 
```

这样做可以将其转换为有效的 csharp：

```
do {
    //Things happen here
} while (!(i == 15)) 
```

这显然是一个简单的例子，但是有没有办法添加这种性质的东西呢？理想情况下作为 Visual Studio 扩展来启用语法突出显示等。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-31T21:41:30.667

Microsoft 提出 Rolsyn API 作为具有公共 API 的 C# 编译器的实现。它包含每个编译器流水线阶段的单独 API：语法分析、符号创建、绑定、MSIL 发射。您可以提供自己的语法解析器实现或扩展现有的语法解析器，以获得具有您想要的任何功能的 C# 编译器。

[罗斯林 CTP](https://blogs.msdn.microsoft.com/visualstudio/2011/10/19/introducing-the-microsoft-roslyn-ctp/)

让我们使用 Roslyn 扩展 C# 语言！在我的示例中，我将使用相应的 do-while 替换 do-until 语句：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Roslyn.Compilers.CSharp;

namespace RoslynTest
{

    class Program
    {
        static void Main(string[] args)
        {

            var code = @"

            using System;

            class Program {
                public void My() {
                    var i = 5;
                    do {
                        Console.WriteLine(""hello world"");
                        i++;
                    }
                    until (i > 10);
                }
            }
            ";

            //Parsing input code into a SynaxTree object.
            var syntaxTree = SyntaxTree.ParseCompilationUnit(code);

            var syntaxRoot = syntaxTree.GetRoot();

            //Here we will keep all nodes to replace
            var replaceDictionary = new Dictionary<DoStatementSyntax, DoStatementSyntax>();

            //Looking for do-until statements in all descendant nodes
            foreach (var doStatement in syntaxRoot.DescendantNodes().OfType<DoStatementSyntax>())
            {
                //Until token is treated as an identifier by C# compiler. It doesn't know that in our case it is a keyword.
                var untilNode = doStatement.Condition.ChildNodes().OfType<IdentifierNameSyntax>().FirstOrDefault((_node =>
                {
                    return _node.Identifier.ValueText == "until";
                }));

                //Condition is treated as an argument list
                var conditionNode = doStatement.Condition.ChildNodes().OfType<ArgumentListSyntax>().FirstOrDefault();

                if (untilNode != null && conditionNode != null)
                {

                    //Let's replace identifier w/ correct while keyword and condition

                    var whileNode = Syntax.ParseToken("while");

                    var condition = Syntax.ParseExpression("(!" + conditionNode.GetFullText() + ")");

                    var newDoStatement = doStatement.WithWhileKeyword(whileNode).WithCondition(condition);

                    //Accumulating all replacements
                    replaceDictionary.Add(doStatement, newDoStatement);

                }

            }

            syntaxRoot = syntaxRoot.ReplaceNodes(replaceDictionary.Keys, (node1, node2) => replaceDictionary[node1]);

            //Output preprocessed code
            Console.WriteLine(syntaxRoot.GetFullText());

        }
    }
}
///////////
//OUTPUT://
///////////
//            using System;

//            class Program {
//                public void My() {
//                    var i = 5;
//                    do {
//                        Console.WriteLine("hello world");
//                        i++;
//                    }
//while(!(i > 10));
//                }
//            } 
```

现在我们可以使用 Roslyn API 编译更新的语法树或将 syntaxRoot.GetFullText() 保存到文本文件并将其传递给 csc.exe。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-22T19:37:23.310

最大的缺失部分正在连接到管道中，否则你不会比`.Emit`提供的更进一步。不要误会，Roslyn 带来了很多很棒的东西，但是对于我们这些想要实现预处理器和元编程的人来说，现在似乎还没有考虑到这一点。您可以实现“代码建议”或他们所谓的“问题”/“操作”作为扩展，但这基本上是代码的一次性转换，充当建议的内联替换，而**不是**您实现新语言的方式特征。这是您始终可以使用扩展完成的事情，但 Roslyn 使代码分析/转换变得非常容易： ![在此处输入图像描述](../Images/0161a2ed77387dfaaa75af6f3d0427e7.png)

从我在 codeplex 论坛上看到 Roslyn 开发人员的评论来看，在管道中提供挂钩并不是最初的目标。他们在 C# 6 预览版中提供的所有新 C# 语言功能都涉及修改 Roslyn 本身。所以你基本上需要分叉 Roslyn。他们有关于如何构建 Roslyn 并使用 Visual Studio 对其进行测试的文档。这将是分叉 Roslyn 并让 Visual Studio 使用它的一种严厉方式。我说强硬是因为现在任何想要使用你的新语言特性的人都必须用你的替换默认编译器。你可以看到这会开始变得混乱。

[构建 Roslyn 并用您自己的构建替换 Visual Studio 2015 Preview 的编译器](https://roslyn.codeplex.com/wikipage?title=Building%2c%20Testing%20and%20Debugging&referringTitle=Documentation)

另一种方法是构建一个充当 Roslyn 代理的编译器。有用于构建 VS 可以利用的编译器的标准 API。不过，这不是一项微不足道的任务。您将阅读代码文件，调用 Roslyn API 来转换语法树并发出结果。

代理方法的另一个挑战是让智能感知与您实现的任何新语言功能完美配合。您可能必须拥有 C# 的“新”变体，使用不同的文件扩展名，并实现 Visual Studio 所需的所有 API 才能使智能感知正常工作。

最后，考虑 C# 生态系统，以及可扩展编译器的含义。假设 Roslyn 确实支持这些钩子，就像提供 Nuget 包或 VS 扩展来支持新的语言功能一样简单。所有利用新的 Do-Until 功能的 C# 本质上都是无效的 C#，并且在不使用自定义扩展的情况下将无法编译。如果你在这条路上走得足够远，有足够多的人实现新特性，很快你就会发现不兼容的语言特性。也许有人实现了预处理器宏语法，但它不能与其他人的新语法一起使用，因为他们碰巧使用类似的语法来描述宏的开头。如果您利用了很多开源项目并发现自己正在深入研究他们的代码，你会遇到很多奇怪的语法，这些语法需要你跟踪并研究项目正在利用的特定语言扩展。它*可能*是疯了。我并不是要听起来像一个反对者，因为我对语言特性有很多想法并且对此非常感兴趣，但是人们应该考虑它的含义以及它的可维护性。想象一下，如果你被雇用到某个地方工作，他们已经实现了你必须学习的各种新语法，并且如果没有像 C# 的特性一样对这些特性进行审查，你可以打赌其中一些不会很好地设计/实现.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-30T17:18:39.110

您可以查看[www.metaprogramming.ninja](http://www.metaprogramming.ninja)（我是开发人员），它提供了一种简单的方法来完成语言扩展（我提供了构造函数、属性甚至 js 样式函数的示例）以及基于语法的完整 DSL。

该项目也是开源的。[您可以在github](http://github.com/xs-admin/Excess)上找到文档、示例等。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T21:38:41.040

您无法在 C# 中创建自己的语法抽象，因此您能做的最好的事情就是创建自己的高阶函数。您可以创建一个`Action`扩展方法：

```
public static void DoUntil(this Action act, Func<bool> condition)
{
    do
    {
        act();
    } while (!condition());
} 
```

您可以将其用作：

```
int i = 1;
new Action(() => { Console.WriteLine(i); i++; }).DoUntil(() => i == 15); 
```

尽管这是否比`do..while`直接使用更好是值得怀疑的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-05T08:28:04.303

我发现扩展 C# 语言的最简单方法是使用 T4 文本处理器来预处理我的源代码。T4 脚本将读取我的 C#，然后调用基于 Roslyn 的解析器，该解析器将使用自定义生成的代码生成新的源代码。

在构建期间，我的所有 T4 脚本都将被执行，从而有效地作为扩展的预处理器工作。

在您的情况下，可以按如下方式输入不兼容的 C# 代码：

```
#if ExtendedCSharp
     do 
#endif
     {
                    Console.WriteLine("hello world");
                    i++;
     }
#if ExtendedCSharp
                until (i > 10);
#endif 
```

这将允许在开发程序期间检查其余（符合 C# 的）代码的语法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T21:27:40.760

不，没有办法实现你所说的。

因为你要问的是定义新的语言结构，所以新的词法分析、语言解析器、语义分析器、生成的编译和优化`IL`。

在这种情况下你*可以*做的是使用一些宏/函数。

```
public bool Until(int val, int check)
{
   return !(val == check);
} 
```

并像使用它一样

```
do {
    //Things happen here
} while (Until(i, 15)) 
```

# python - 如何使用 python 写入文本文件？

> ID：11749224
> 
> 赞同：-3
> 
> 时间：2012-07-31T21:24:19.373
> 
> 标签：python, python-2.6, writetofile

我正在尝试输出一个完整的迭代。输出应该在一个文本文件中。我应该如何编码？

输出应如下所示：

> 迭代 1 值 --------> val1 < tab > val2 < tab > val3
> 
> 迭代2个值--------> val4 < tab > val5 < tab > val6

这不是很多信息，但我不知道从哪里开始，任何人都可以告诉我吗？基本上我应该如何打开一个文本文件并尝试使用标签来编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:28:42.473

```
file = open(filename,"w")
file.write("\t This is tabbed in \n This is a new line")
file.close() 
```

在此处阅读有关 python 中的文件处理
[http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:32:52.680

```
numbers = [1,2,3,4,5,6]

with open('output.txt', 'w') as f:
  f.write('\t'.join(numbers)) 
```

不太确定你还有什么意思

# jquery - 输入模糊和窗口模糊

> ID：11749227
> 
> 赞同：0
> 
> 时间：2012-07-31T21:24:29.537
> 
> 标签：jquery, forms, input, focus, blur

所以我有这个 jsFiddle ( [http://jsfiddle.net/KDAM8/](http://jsfiddle.net/KDAM8/) )，并试图弄清楚如何让输入在窗口模糊时保留它的值。当您专注于输入，然后 alt+tab 退出，或单击另一个屏幕，然后返回时，它不会保持正确的值。我不仅很难理解为什么会发生这种情况，而且我很难解释它。希望您能理解我对 jsFiddle 的要求。

```
<input type="text" value="name" />
<input type="password" value="password" />​ 
```

```
$('input').each(function() {
    var itemVal;
    $(this).focus(function() {
        itemVal = $(this).val();
        $(this).val('');
    });
    $(this).blur(function() {
        $(this).val(itemVal);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:33:43.280

改进 gotuskar 的方法：如果将每个字段的初始值缓存在元素的`.data`中，则可以将其与 focus 和 blur 上的现有值进行比较以获得所需的效果：

```
$('input').each(function() {
    $(this).data('itemVal', $(this).val());

    $(this).focus(function() {
        if ($(this).val() === $(this).data('itemVal')) {
            $(this).val('');
        }
    });
    $(this).blur(function() {
        if (!$.trim($(this).val())) {
            $(this).val($(this).data('itemVal'));
        }
    });
});​ 
```

[http://jsfiddle.net/mblase75/KDAM8/1/](http://jsfiddle.net/mblase75/KDAM8/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T21:28:43.190

调试并尝试了解我所做的更改 -

```
$('input').each(function() {
    var itemVal;
    $(this).focus(function() {
        itemVal = $(this).val();
        if (itemVal === 'name' || itemVal === 'password') // added
          $(this).val('');
    });
    $(this).blur(function() {
        itemVal = $(this).val(); // added
        if (itemVal !== 'name' || itemVal === 'password') // added
            $(this).val(itemVal);
    });
});​ 
```

# asp.net-mvc - 创建代表超过 1 个实体的控制器时如何搭建支架？

> ID：11749230
> 
> 赞同：0
> 
> 时间：2012-07-31T21:24:49.030
> 
> 标签：asp.net-mvc, entity-framework

我有实体框架对具有大约 30 个表的旧数据库进行建模。我正在使用 ASP.NET MVC 4，并且希望在我的 EDM 中使用基于实体的脚手架。我已经看到了很多这方面的例子，但我遇到了一个问题。我的需求不像我所看到的示例那样千篇一律：创建一个支撑“客户”实体的控制器，并在保存更改后，控制器操作将客户作为其参数并使用模型绑定一切都很好完成以下操作后：

```
[HttpPost]
public ActionResult Create(Customer customer)
{
  if (ModelState.IsValid)
  {
     db.Customers.AddObject(customer);
     db.SaveChanges();
     return RedirectToAction("Index");  
   }
 } 
```

完美且相当正确；好吧，这对我不起作用。在我的情况下，我的屏幕需要来自大约 6 个不同实体的字段并更新回相同的 6 个实体。

所以一个两部分的问题：

1.  当它不是像上面的简单示例那样简单的 1 实体到 1 屏幕交易时，我什至如何搭建我的控制器和结果视图？
2.  我是否仍然能够使用模型绑定将更改持久化回我的实体，因为生成的视图将再次是大约 6 个不同实体的结果，并且无需对每个单独实体的属性进行大量手动更新？

如果我完全不在基地，请指导我回来。我想确切地知道我是如何完成这项任务的，因为它会在我的 MVC 应用程序中反复发生，并且我需要知道如何在可能的情况下仍然使用脚手架和模型绑定。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:27:49.237

当您遇到这样的场景时，是时候开始考虑使用 ViewModels 和 EditModels，它们是专门用于显示 View 所需的确切属性的模型。

这样做的一种策略：

1.  在您的项目中创建新文件夹：ViewModels 和 EditModels。
2.  对于每个详细信息视图，添加一个 ViewModel 类，对于每个编辑/创建视图，添加一个 EditModel 类。
3.  在您的控制器中，当页面第一次被请求时，从您的实体映射到您的 ViewModel/EditModel。在回发时，执行验证并将 EditModel 映射回实体。

几点注意事项：

*   这确实增加了一些工作，但它确实是利用 MVC 的强类型视图功能的唯一可靠方法。
*   为了最大程度地减少从实体到 ViewModel 的乏味，您可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)之类的工具在具有相同名称的属性之间自动映射（并为剩余的映射设置规则）。
*   从 EditModel 回到实体可能需要一些手动工作。AutoMapper 可以处理一些场景，但它可能不是该类型映射的理想工具（它更适合从实体到 ViewModel）。我听说有人使用命令模式和规则引擎来执行映射回实体，但到目前为止，这些技术的真正详细的解释或教程让我回避了。

**ViewModel 示例（来自 NerdDinner 教程）**

```
public class DinnerFormViewModel {

    // Properties
    public Dinner     Dinner    { get; private set; }
    public SelectList Countries { get; private set; }

    // Constructor
    public DinnerFormViewModel(Dinner dinner) {
        Dinner = dinner;
        Countries = new SelectList(PhoneValidator.AllCountries, dinner.Country);
    }
}

// controller actions

[Authorize]
public ActionResult Edit(int id) {

    Dinner dinner = dinnerRepository.GetDinner(id);

    return View(new DinnerFormViewModel(dinner));
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(int id, FormCollection collection) {

    Dinner dinner = dinnerRepository.GetDinner(id);

    try {
        UpdateModel(dinner);

        dinnerRepository.Save();

        return RedirectToAction("Details", new { id=dinner.DinnerID });
    }
    catch {
        ModelState.AddModelErrors(dinner.GetRuleViolations());

        return View(new DinnerFormViewModel(dinner));
    }
} 
```

资料来源： http: [//nerddinnerbook.s3.amazonaws.com/Part6.htm](http://nerddinnerbook.s3.amazonaws.com/Part6.htm)

# ruby-on-rails - ruby on rails 设计：可注册删除返回错误

> ID：11749232
> 
> 赞同：0
> 
> 时间：2012-07-31T21:24:57.797
> 
> 标签：ruby-on-rails, devise

我想从我的 Rails 应用程序中删除**注册****页面**，因为我**只使用邀请系统**，并且我已经读到我必须`:registrable`从我的用户模型中删除模块才能让我的注册页面消失......

当我这样做时，我收到以下错误：

```
NoMethodError in Devise::RegistrationsController#new

undefined method `new_with_session' for #<Class:0x007ffb53b8f820> 
```

**这是来自user.rb**的设计线

 **```
devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:45:36.417

我认为您还必须覆盖注册控制器。

```
class RegistrationsController < Devise::RegistrationsController
  def new
    flash[:info] = 'Registrations are not open yet, but please check back soon'
    redirect_to root_path
  end

  def create
    flash[:info] = 'Registrations are not open yet, but please check back soon'
    redirect_to root_path
  end
end 
```

我只是通过 [禁用生产环境的设计注册得到它](https://stackoverflow.com/questions/5370164/disabling-devise-registration-for-production-environment-only)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T12:47:14.207

您只需要从模型中删除 :registrable 即可。描述的错误将发生，直到您重新启动应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T15:48:56.280

好吧，我知道现在已经有一段时间了，但这并不能阻止任何人遇到同样的问题，因为我几分钟前刚刚经历过。

**最好的解决方案**是在从您的模型中删除后**重新启动**您的应用程序`:registrable`

`devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable, :registrable`

变成

`devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable`.

**但是，如果您仍然有点想带人们为什么 Sign Up 不可用**，我会建议任何人接受已接受的答案。

谢谢。**

# iphone - ios 卷尺自定义控件

> ID：11749234
> 
> 赞同：0
> 
> 时间：2012-07-31T21:25:01.387
> 
> 标签：iphone, ios, uicontrol

我想建立卷尺自定义控件。它应该就像在[Weightbot 应用程序](http://inspiredm.com/wp-content/uploads/2012/05/weightbot.png)中使用的一样。

卷尺仅显示在屏幕上的一部分，通过拖动您可以从 0cm 到 1km 选择。

我认为如何做到这一点的一种方法是在滑动 UIImageView 中放置一个很长的图像，但我觉得有更好的方法。

除了静态图像之外，任何想法如何实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:30:56.787

The weightbot application you link to looks like it uses a custom view.

You could use a combination of an image (for the gradation) and custom drawing for the numbers. You don't have to use a single long image that scrolls.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:25:08.990

`UICollectionView`如果您可以针对 iOS 6 或更高版本，这听起来像是对 a 的完美使用。它可以重用您在评论中提到的单元格，但它支持横向滚动，而表格视图则不支持。您可以为每个单元格进行自定义绘图，这可能意味着您根本不需要图像，或者您可以将简单的重复图像与一些动态文本结合起来。

# python - 使用条件导入作为利用具有相同命名空间的不同函数的一种方式

> ID：11749235
> 
> 赞同：1
> 
> 时间：2012-07-31T21:25:01.653
> 
> 标签：python, selenium, if-statement, import, module

我是一名初学者 python 程序员，我正在使用 python 2.7 开发一个 selenium 项目。

我有一个通用的爬虫脚本，它基本上概述了我想要对我访问的所有网站执行的操作。但是，由于我要获取的数据的性质，我不能在每个站点上运行相同的代码——每个站点都需要运行它自己的单独代码。

我试图通过在 if 语句中导入来解决这个问题，这就是我想出的解决方案：

```
site = False
if source_website == "Website A":
    from website_a import *
    site = True
elif source_website == "Website B":
    from website_b import *
    site = True
else:
    print "This is not an acceptable website!"

if site == True:
    # main code block
    driver = driver_setup(chrome)
    driver.get(source_website_URL)
    stuff_to_save = do_some_stuff(driver)
    xml_file(stuff_to_save)
    driver.quit() 
```

其中`website_a`和`website_b`模块都具有名为 的函数`do_some_stuff`，并且它们执行特定于它们所在网站的操作。现在，这似乎在大多数情况下都有效。我似乎也能够将功能扩展到任意数量的网站，因为我编写了一个`website_c`使用 function调用的模块`do_some_stuff`，并将其添加到条件导入中。

所以，我的问题是，这是个好主意吗？有没有更好的方法来做这样的事情？

从字面上看，我从未见过有人在这样的 if 语句中包装 import 语句——通常，如果似乎没有人这样做，通常有一个很好的理由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:32:36.170

一般来说，`from somewhere import *`由于命名空间污染，这不是一个好主意。如果您想在单独的模块中使用特定于网站的代码，为什么不做类似的事情

```
import importlib

website_modules = {'Website A': 'website_a', 'Website B': 'website_b'}

# ...

website = importlib.import_module(website_modules[source_website])

# use with website.function_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:44:57.640

探索页面对象模型模式 (http://code.google.com/p/selenium/wiki/PageObjects)。您应该将每个页面建模为一个唯一的实体，然后有一些逻辑来确定您正在显示的页面类型（通过让您明确指定它或通过检查 URL 和页面内容来隐式地显示），然后公开要捕获的方法您需要在这些对象上的数据，而不是直接使用 webdriver 实例。您最终应该瞄准以下目标：

```
for page_identifier in ['page1', 'page2', 'page3']:
    page = navigate_to(page_identifier)
    extracted_data = page.get_data()
    xml_file.write(extracted_data) 
```

# javascript - Jquery没有选择正确的href

> ID：11749237
> 
> 赞同：1
> 
> 时间：2012-07-31T21:25:17.063
> 
> 标签：javascript, jquery, url, href

这个脚本：

```
$(function() {
    $('a').each(function() {
        var href = $(this).attr('href');
        if ("a:not(http://)") {
            $(this).attr('href', '/' + href);
        }
    });
}); 
```

将斜线添加到每个链接，甚至包含“http://”的链接不知道为什么？我没有得到任何错误？

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:28:12.840

你混淆了两件事：

*   jQuery 选择器：

    ```
    $(function() {
        $('a:not([href^="http://"])').each(function() {
            var href = $(this).attr('href');
            $(this).attr('href', '/' + href);  
        });
    }); 
    ```

*   和纯javascript`if`语句：

    ```
    $('a').each(function() {
       var href = $(this).attr('href');
       if (href.substr(0, 'http://'.length) == 'http://'){
           $(this).attr('href', '/' + href); 
       }   
    }); 
    ```

两者都做同样的事情。

请注意，它们将为 http 以外的其他方案生成无效链接（例如`/https://example.com/index.html`）。根据您使用的 HTML 代码的干净程度，您可以简单地查找冒号来识别绝对链接：

```
$(function() {
    $('a:not([href*=":"])').each(function() {
        var href = $(this).attr('href');
        $(this).attr('href', '/' + href);  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:31:07.223

First, you code is equal to the following

```
$(function() {
   $('a').each(function() {
      var href = $(this).attr('href');
      if(true) { $(this).attr('href', '/' + href); }   
   });
}); 
```

if you really want to update href based on condition, if statetment should be different:

```
$(function() {
   $('a').each(function() {
     var href = $(this).attr('href');
     if(href.indexOf('http://') == -1 ) { $(this).attr('href', '/' + href); }   
   });
}); 
```

Another way would be the one offered by @Yogu, where you simple don't loop for links which you are not going to update

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:41:33.687

只是 Yogu 的一个插件，

请记住，您在每个标签的上下文中。“在对象本身内部”。因此，您可以直接访问 href。

```
$('a').each(function() {
   if (this.href.substr(0, 'http://'.length) == 'http://'){
       this.setAttribute('href', '/' + href); 
   }   
}); 
```

# objective-c - 横向方向的 TWTweetComposeViewController 帐户选择

> ID：11749239
> 
> 赞同：1
> 
> 时间：2012-07-31T21:26:02.630
> 
> 标签：objective-c, cocoa-touch, ios5, twitter

如果我以纵向显示 TWTweetComposeViewController，则有一个*From*字段允许用户选择他们想要使用的帐户。但是我的应用是横向的，并且没有*From*字段。

用户如何选择使用哪个帐户？

似乎我什至没有办法选择作曲家打开哪个帐户。

# php - 如何使用 PHP 在没有表单的情况下回发到同一页面？

> ID：11749244
> 
> 赞同：0
> 
> 时间：2012-07-31T21:26:30.137
> 
> 标签：php, html

您好我想知道如何使用以下代码首先发布到当前页面：

```
<?php  
    if(isset($_GET['button']) === true){
        echo 'Albums';
    }   
?>
<form action="" method="post">
    <input type="button" name="button" value="Albums">
</form> 
```

单击以在当前页面上回显相册时，我似乎无法获得按钮？？但我的主要问题是如何在不使用表单的情况下实现我想要做的事情，而不使用可以使用 PHP 返回操作的链接或按钮？单独使用PHP可以吗？如果不是，那么我如何使用返回 PHP 函数所需的任何脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:30:07.917

如果您不指定 action 属性，表单将回发到您当前的脚本。

如果您希望该`$_GET`变量具有任何表单字段，请将表单的方法设置为`GET`，或者根本不设置它。（默认为`GET`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:37:01.697

您将数据作为 post 提交，因此您必须检查 POST。

```
<?php  
    if(isset($_POST['button'])){
        echo 'Albums';
    }   
?>
<form action="" method="post">
    <input type="submit" name="button" value="Albums" />
</form> 
```

此外，我会使用`<input type="submit"`或`<button type="submit" name="button">Albums</button>`。

# r - 使用 R 中的 apply 从“if”函数创建向量

> ID：11749245
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:26:36.180
> 
> 标签：r, vector, apply

我很想在 R 中使用“if”函数创建新向量，以仅提取新数组的某些值。基本上，我想为几个城市中的每一个按星期几分隔数据。如何使用 apply 函数仅获取每个城市的新数组中的星期二？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:31:01.497

It sounds as though you don't want `if` or `apply` at all. The solution is simpler:

Suppose that your data frame is `data`. Then `subset(data, Weekday == 3)` should work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:29:56.007

You don't want to use the R `if`. Instead use the subsetting function `[`

```
dat <- read.table(text="    Date    Weekday Holiday Atlanta Chicago Houston Tulsa
1   1/1/2008    3   1   313 313 361 123
2   1/2/2008    4   0   735 979 986 310
3   1/3/2008    5   0   690 904 950 286
4   1/4/2008    6   0   610 734 822 281
5   1/5/2008    7   0   482 633 622 211
6   1/6/2008    1   0   349 421 402 109", header=TRUE)
dat[ dat$Weekday==3, ] 
```

# c# - Asp 文本框 xhtml 和额外的换行符

> ID：11749246
> 
> 赞同：3
> 
> 时间：2012-07-31T21:26:39.370
> 
> 标签：c#, asp.net, xhtml, textbox

当设置为多行并将页面作为 xhtml 提供时，ASP 文本框控件似乎存在问题。我正在处理的项目使用内容协商将 asp 页面作为 application/xhtml+xml 提供给支持它的浏览器。问题是当 asp textbox 向页面呈现一个 textarea 时，它显式地在文本前面加上一个换行符。文本框的渲染方法的反射如下所示：

```
if (TextMode == TextBoxMode.MultiLine)
HttpUtility.HtmlEncode(Environment.NewLine + this.Text, (TextWriter) writer); 
```

当 firefox 和 opera 使用 xhtml 内容类型提供此服务时，它们会将换行符解释为 textarea 中文本的一部分，因此我会在文本区域的开头获得额外的换行符。

我可以子类化文本框并覆盖渲染，但这似乎有点矫枉过正。有没有另一种方法来纠正这个问题？有谁知道为什么 asp 文本框会这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:14:27.447

子类化的替代方法是使用控件适配器，或者`<textarea`手动编写并让 ASP.NET 为您生成控件名称属性。

我怀疑 ASP.NET WebForms 这样做只是因为目光短浅。无论如何，未来是 MVC，所以不要指望这会很快改变。我怀疑换行符的最初目的是给 textarea 一个“值”而不是什么都没有（从而使 textarea 在 HTML 表单中“成功”）。

这不是您在 ASP.NET 中看到的唯一奇怪行为。残暴的 HTML 格式`<head runat="server">`也在列表中。

# c - 由多个 dll 访问的 C 文件中的全局变量

> ID：11749247
> 
> 赞同：0
> 
> 时间：2012-07-31T21:26:43.537
> 
> 标签：c, windows, dll, dllexport

我正在使用包含多个 DLL 的 C Windows 应用程序。第一个 DLL 定义了一个供多个函数使用的全局变量。第二个 dll 有一个调用第一个 dll 中的函数的方法，该函数依次访问该全局变量。

当我从第一个 dll 访问全局变量时，一切正常，但是当从来自第二个 dll 的调用访问全局变量时，我收到以下错误：

*a.exe 中发生了“System.AccessViolationException”类型的未处理异常附加信息：尝试读取或写入受保护的内存。这通常表明其他内存已损坏。*

注意：第二个变量中的任何函数都不会直接访问该全局变量。它只会通过第一个 dll 中的调用。

我试图通过 .DEF 文件导出变量，然后使用“_declspec(dllimport)”在第二个 dll 中定义变量，但这不起作用（我没想到它会因为第二个 dll 没有明确访问变量。

有谁知道我该如何解决这个问题。
谢谢

# c# - 在 XtraGridView 的组合框中更改其他列值 onselectedvaluechanged 事件

> ID：11749252
> 
> 赞同：0
> 
> 时间：2012-07-31T21:27:03.400
> 
> 标签：c#, .net, devexpress, xtragrid

有没有办法获取在组合框中更改选择值的行的句柄？

让我试着用例子来解释它。在 GridView 中，我有两列，名称，类型

类型列有组合框，值为 1 和 2。

我想要做的是在类型列中选择值 1，我想将名称更改为“一”

在类型列中选择 2 时，我想将名称更改为“二”

这是我正在尝试的，

```
 private void OnType_SelectedValueChanged(object sender, EventArgs e)
        {
    DevExpress.XtraEditors.ComboBoxEdit comboType = sender as DevExpress.XtraEditors.ComboBoxEdit;
    DataRow row = (DataRow) myGridView.GetFocusedRow();            
    if (comboType .SelectedItem.ToString() == "1") 
            {
                 row.Name = "one";
            }else
            {
             row.Name = "two";
             }
   } 
```

但是在这里我将 myGridView.GetFocusedRow() 设为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:17:39.710

正确的方法是将存储库编辑器绑定到列。

```
RepositoryItemComboBox riCmb = new RepositoryItemComboBox(); 
```

处理**editvaluechanged**事件

```
riCmb.EditValueChanged += riCmb_EditValueChanged; 
```

然后在事件处理程序内部

```
if(myGridView.GetRowCellValue(myGridView.FocusedRowHandle, "FieldName").ToString() == "1")
{
      grvInstruments.SetRowCellValue(grvInstruments.FocusedRowHandle, "FieldName", "One");
} 
```

# gwt - 带有下拉箭头的 GWT 文本框

> ID：11749255
> 
> 赞同：2
> 
> 时间：2012-07-31T21:27:18.130
> 
> 标签：gwt, layout, widget

我想在文本框中有一个下拉箭头（在我的情况下实际上是 SuggestBox）。GMail 为高级搜索功能执行此操作，（打开高级搜索对话框）。

让这个箭头显示在 TextBox 的右侧并可以点击的正确 GWT 布局是什么？

查看 GMail，我发现下拉菜单的图片非常奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:48:41.483

这是一个简单的例子：

您需要处理 css：

```
public class GMailDropDown implements EntryPoint {

    public void onModuleLoad() {
        RootPanel.get().add(new DropDown());
    }

    class DropDown extends Composite 
    implements ClickHandler
    {

        private TextBox textBox = new TextBox();
        private PushButton button;

        public DropDown() {

              Image img = new Image("https://ssl.gstatic.com/ui/v1/zippy/arrow_down.png");

              button = new PushButton(img);

              button.getElement().getStyle().setPaddingLeft(5,  Unit.PX);
              button.getElement().getStyle().setPaddingRight(5,  Unit.PX);
              button.getElement().getStyle().setPaddingTop(3,  Unit.PX);
              button.getElement().getStyle().setPaddingBottom(7,  Unit.PX);

              button.addClickHandler(this);
              button.removeStyleName("gwt-PushButton");

              textBox.getElement().getStyle().setBorderWidth(0, Unit.PX);

              HorizontalPanel panel = new HorizontalPanel();
              panel.add(textBox);
              panel.add(button);

              panel.getElement().getStyle().setBorderWidth(1, Unit.PX);
              panel.getElement().getStyle().setBorderColor("black");
              panel.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);

              // All composites must call initWidget() in their constructors.
              initWidget(panel);
        }

        @Override
        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub

        }
    }
} 
```

还要检查这个

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomWidgets)

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle)

# php - mysql更新访问=访问+1错误

> ID：11749257
> 
> 赞同：0
> 
> 时间：2012-07-31T21:27:34.137
> 
> 标签：php, mysql

当我运行此查询时，我正在 MVC 中编写一个项目：

```
mysql_query("UPDATE ads SET visits = visits+1 WHERE id = ".$ad->id); 
```

从：

> 本地主机/广告/

和 MySQL 工作正常并添加 1 到访问字段，但是当我使用控制器和方法来查看页面时：

> 本地主机/广告/索引/索引

MySQL 将 2 添加到访问字段，但我跟踪了我的 php 代码，并且查询仅在我的表类型为 innoDB 且 mysql 版本为 5.5.8 时运行

那是MySQL的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:41:05.363

当您的浏览器向您的服务器发出第二次请求时，您的代码很可能正在运行，可能是 favicon.ico 或类似的。

您可以轻松地验证这一点。打开诸如[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)之类的工具，然后观察请求的经过。毫无疑问，您会看到第二个请求。请注意，您可能不会仅在浏览器的工具中看到第二个请求。它通常直接发生在页面请求的带外。

# c++ - Qt通过代码关闭一个正在运行的窗口

> ID：11749262
> 
> 赞同：7
> 
> 时间：2012-07-31T21:27:39.510
> 
> 标签：c++, qt, window

我有一个程序可以打开另一个窗口，我希望关闭旧窗口。是否有一些功能或东西可以通过代码关闭窗口但保持另一个窗口运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T22:39:27.203

```
this->close(); 
```

或者

```
close(); 
```

参考：[http ://doc.qt.digia.com/4.7/qwidget.html#close](http://doc.qt.digia.com/4.7/qwidget.html#close)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-19T06:14:59.917

```
void Dialog::on_Close_clicked()  // Condition for Main thread program stopping

Running Thread->closethread = true;
    this->close();

void Dialog::on_Stop_clicked()  // Condition For Stop Button for your particular task
{
    this->close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T08:39:28.990

```
MyWidget *newform = new MyWidget;
newform->show();
this->hide(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-01T06:40:34.213

使用信号和槽机制。

每当您想关闭该窗口或屏幕时，都会发出一个信号并将该信号连接到该窗口的关闭槽。这应该可以正常工作。

# ruby - 纸迹插件和 rspec

> ID：11749267
> 
> 赞同：1
> 
> 时间：2012-07-31T21:27:47.670
> 
> 标签：ruby, ruby-on-rails-3, rspec, rubygems, paper-trail-gem

我有一个模型，`Car`。

`Car`当我通过应用程序中的表单更新一个实例时，将调用[PaperTrail 插件](http://airbladesoftware.com/tags/papertrail)并创建一个新版本。

但是如果我使用 rspec 测试这个模型，PaperTrail 插件永远不会被调用。为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:21:30.493

首先检查这个：

```
# in config/environments/test.rb
config.after_initialize do
  PaperTrail.enabled = false
end 
```

阅读本[手册](https://github.com/airblade/paper_trail#turning-papertrail-offon) 或试试这个[要点](https://gist.github.com/2658418)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T19:43:55.117

你是如何创建对象的？我发现当我通过工厂创建它们时，并没有创建纸尾版本。但是当我通过 ActiveRecord（例如 Car.create(params)）创建它们时，创建了一个 pattertrail 版本

# perl - Perl 脚本无缘无故卡在终端中

> ID：11749269
> 
> 赞同：1
> 
> 时间：2012-07-31T21:27:56.643
> 
> 标签：perl, cygwin, freeze, blocked

我有一个 Perl 脚本，它读取三个文件并在读取每个文件后写入新文件。一切都是一个线程。

在这个脚本中，我打开并使用了三个文本文件，并将内容存储在一个散列中。文件很大（接近 3 MB）。

我正在使用循环遍历每个文件（打开->读取->执行一些操作（哈希表）->关闭）

我注意到每当我扫描第一个文件时，我的 Cygwin shell 中的 Perl 终端窗口都会卡住。我按下回车键的那一刻，我可以看到脚本处理其余文件没有任何问题。

这很奇怪，因为我的脚本中没有读取 STDIN。此外，相同的逻辑适用于所有三个文件，因为所有内容都在同一个循环中。

这里有没有人遇到过类似的问题？处理大文件或大哈希时通常会发生这种情况吗？

我不能在这里发布脚本，但无论如何也没有太多内容可以发布。这可能只是我的 Cygwin shell 中的一个问题吗？

如果这个问题没有消失，我该如何规避它？就像在脚本运行时提供输入一样？更重要的是，我该如何调试这样的问题？

 `````
sub read_set
{
@lines_in_set = ();
push @lines_in_set , $_[0];
while (<INPUT_FILE>) 
    {   $line = $_;
          chomp($line);
          if ($line=~ /ENDNEWTYPE/i or $line =~ /ENDSYNTYPE/ or eof())
          {
          push @lines_in_set , $line;
          last;
          }
          else 
          {
          push @lines_in_set , $line;       
          }
    }
    return @lines_in_set;
} 
````  `--------> 我想我发现了问题：- 或者 eof() 调用确保脚本会被卡住！不知何故只在第一次发生。我不知道为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:50:01.820

`eof()`电话是问题。见[`perldoc -f eof`](http://www.tu-chemnitz.de/docs/perldoc-html/functions/eof.html)。

`eof`带空括号的指的是通过 访问的伪文件`while (<>)`，它包含所有在 中命名的文件`@ARGV`，`STDIN`如果没有，则为。

特别是：

> 请注意，此函数实际上读取一个字符，然后“ungetc”它，因此在交互式上下文中没有用。

但是您的循环从另一个句柄读取，一个名为`INPUT_FILE`.

打电话会更有意义`eof(INPUT_FILE)`。但即使这样也可能没有必要。您的外循环将在到达末尾时终止`INPUT_FILE`。

还有一些与您看到的症状无关的建议：

添加

```
use strict;
use warnings; 
```

在脚本顶部附近，并更正由此产生的任何错误消息（`perl -cw script-name`仅进行编译检查）。您需要使用`my`( `perldoc -f my`) 声明变量。并使用一致的缩进；我推荐与大多数 Perl 文档中相同的风格。``

# python - 使用 python 或 shell 命令打印到 Windows 打印机

> ID：11749270
> 
> 赞同：2
> 
> 时间：2012-07-31T21:28:04.333
> 
> 标签：python, windows

我正在尝试编写一个烦人的任务，该任务涉及获取、处理和打印大量扫描的文档 - jpeg 或 pdf。我没有成功从 python 或 windows shell 访问打印机（我可以使用 python subproccess 模块编写脚本）。我成功地使用 lpr 命令从命令行打印了一个文本文件，但不是 jpg 或 pdf。

很高兴有任何线索，包括用于打印到打印机的更广泛的 win shell 参考、我在谷歌搜索 stackoverflow 搜索中错过的合适的 python 库等（只是一个[未回答的问题](https://stackoverflow.com/questions/9850949/printing-from-python-using-lpr-or-win32)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:40:47.150

好吧，经过一番研究，我发现了一些可能对您有所帮助的链接：

1）要使用 Python Shell 打印图像，下面的这个链接有一些使用 PIL 的代码，希望能做你想做的事：http: [//timgolden.me.uk/python/win32_how_do_i/print.html](http://timgolden.me.uk/python/win32_how_do_i/print.html)

2) 要打印 PDF 文件，此链接可能有您需要的内容： [http ://www.darkcoding.net/software/printing-word-and-pdf-files-from-python/](http://www.darkcoding.net/software/printing-word-and-pdf-files-from-python/)

我从来没有做过任何这些事情，但是快速浏览一下，我可以找到这个链接，它们似乎很有意义。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:44:58.037

我将它用于 rtf（只是一个想法）：

```
subprocess.call(['loffice', '-pt', 'LaserJet', file]) 
```

我正在使用[LibreOffice](http://www.libreoffice.org/)。它可以批量打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:51:33.510

使用分配给系统的默认 pdf 查看器，您可以执行

```
 import win32api
 fname="C:\\somePDF.pdf"
 win32api.ShellExecute(0, "print", fname, None,  ".",  0) 
```

请注意，这仅适用于 Windows，不适用于所有 pdf 查看器，但它应该适用于 acrobat 和 Foxit 以及其他几个主要浏览器。

# iphone - 如何调整 UITableView 的大小

> ID：11749280
> 
> 赞同：0
> 
> 时间：2012-07-31T21:28:51.793
> 
> 标签：iphone, uitableview

在我的应用程序中，我有一个按钮，可在单击时推送自定义视图控制器 (MenuViewController)。

```
@interface MenuViewController : UITableViewController 
```

我无法调整表格视图的大小。我试过了：

```
self.tableView.frame=CGRectMake(0, 0,100, 100);
self.View.frame=CGRectMake(0, 0,100, 100); 
```

在`viewDidLoad`和`viewWillAppear`。这些方法都不起作用。

我有一个创建 UIView initwithframe:.. 的想法并将 MenuViewController 添加为子视图。
这是正确的方法吗？

MenuViewController 基本上是一个通用控件，它将处理可变初始化输入并根据输入显示单元格，问题是表格视图的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:44:47.843

我相信，如果您从 UIViewController 继承并将 UITableView 作为属性公开并且还在接口上公开，那么您可以调整它的大小。当您使用 UITableViewController 时，它将始终以全尺寸模式显示。

更新：

所以不要做这样的事情：

```
@interface TasksViewController : UITableViewController
{

} 
```

你可以这样做：

```
@interface TasksViewController : UIViewController<UITableViewDelegate>
{

}

@property (nonatomic,weak) IBOutlet UITableView *tableView; 
```

还要确保在界面生成器中有一个 UITableView，它与 TasksViewController 中的 tableView 属性挂钩。现在在您的实现文件中实现 cellForRowAtIndexPath 方法并返回单元格。

# apache-flex - 具有滚动和缩放功能的 Flex 图表 - 类似于 Google 财经图表

> ID：11749288
> 
> 赞同：1
> 
> 时间：2012-07-31T21:29:25.110
> 
> 标签：apache-flex

我正在寻找创建一个 adobe air/flex 图表，它的工作原理和外观完全一样：-

[http://flex.amcharts.com/examples/stock_chart_example](http://flex.amcharts.com/examples/stock_chart_example)

现在，我付不起 amcharts 许可证的费用。免费版本包含指向 amcharts 的反向链接。

对此的任何指示都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:21:42.817

[Doug McCune](http://dougmccune.com/blog/)有一个带有[源代码](http://dougmccune.com/flex/chartComparison/srcview/index.html)和[演示的向下钻取](http://dougmccune.com/flex/chartComparison/)[google-finance-esque 图表示例](http://dougmccune.com/blog/2007/03/22/why-i-love-flex-charting-example/)：

![图表比较](../Images/0f4215f73fe8935f86d86f39753136df.png)

# javascript - Login Handling in Backbone.js

> ID：11749294
> 
> 赞同：1
> 
> 时间：2012-07-31T21:29:51.680
> 
> 标签：javascript, login, backbone.js

i need a very simple login system for my web application with backbone.js

Workflow: App Start -> LoginView -> When Logged In -> App

Here is my solution. What can i do better?

**Login Status Model:**

```
window.LoginStatus = Backbone.Model.extend({
defaults: {
    loggedIn: false,
    userId: null,
    username: null,
    error: "An Error Message!"
},

initialize: function () {
    _.bindAll(this, 'getSession', 'setStorage');
},

getSession: function (username, password) {
    var tmpThis = this;
    $.getJSON('http://requestURL.de/getSession.php?username=' + username + '&password=' + password, function(data) {
        if (data != null) { 
            tmpThis.setStorage(data.id, data.username);
            $.mobile.changePage("#home");
        }                                   
    });
},
setStorage: function(userId, username) {
    localStorage.setItem("userId", userId);
    localStorage.setItem("username", username);
    this.set({ "loggedIn" : true});
}
}); 
```

**Here is my Login View:**

```
window.LoginView = Backbone.View.extend({

el: $("#login"),

initialize:function () {
    this.render();
},

events: {
    "click input[type=submit]": "onSubmit"
},

onSubmit: function(event) {
        var username = $(this.el).find("#user-username").val(),
            password = $(this.el).find("#user-password").val();

        this.model.getSession(username, password);

        return false;
},
render:function () {
    if (this.model.get("loggedIn")) {
        var template = _.template( $("#login_template").html(), {} );
    } else {
        var template = _.template( $("#login_template").html(), { "error" : this.model.get("error") } );
    }
    $(this.el).html( template );
}

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:37:44.787

我对您的建议是在主干应用程序之外进行登录，并且只有在成功登录过程后才让他们访问“单页应用程序”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:46:22.767

您可以参考这个使用 POST 方法进行登录请求的主干项目。[https://github.com/denysonique/backbone-login](https://github.com/denysonique/backbone-login)

# wpf - 第二个 tabitem 中的数据绑定不起作用

> ID：11749295
> 
> 赞同：0
> 
> 时间：2012-07-31T21:29:51.450
> 
> 标签：wpf

我有一个带有两个 TabItems 的 WPF TabControl。在这两个 tabItems 中，我都有一个文本框，其中 Text 属性绑定到我的 ViewModel 中的一个属性。问题是第二个选项卡（被第一个选项卡“隐藏”的那个）中的绑定不起作用。我有两种情况：

*   我运行应用程序，运行将在第二个选项卡中填充文本的命令，然后选择选项卡：在这种情况下，绑定有效：我可以看到填充了数据的文本框。但是，如果我再次运行该命令，则文本框将不再更新。看起来绑定有效，但只有一次。

*   第二种情况是如果我运行应用程序，然后在运行命令之前选择第二个选项卡。在这种情况下，绑定根本不起作用。

如果我将第二个选项卡移动到第一个位置，则绑定将适用于该选项卡。（但它会停止为另一个工作）

有人知道一个解决方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:25:03.607

您的 ViewModel 必须实现 INotifyPropertyChanged 接口。您还必须将绑定的 UpdateSourceTrigger 属性设置为“PropertyChanged”。在此更改后，您的应用程序应按预期工作。

# r - Calling one entry at a time from a dataset in order

> ID：11749298
> 
> 赞同：-6
> 
> 时间：2012-07-31T21:29:56.207
> 
> 标签：r

I have a simple data set (lets just call it data) containing 100 values and i wish to call them one at a time for entry into an equation (i cant post this particular equation here).

The problem im having is that from the equation there needs to be two outputs (probability), and when i call the data set directly, it does not give the desired output. Entering the numbers manually from the dataset gives the correct output (checked manually).

There are two streams of input as evidenced by the two outputs, is there something simple im missing regarding the input of a simple dataset?

**EDIT** the dataset which just a sample of 100 numbers needs to be entered in the equation i have. another value is to be subtracted from each entry in the dataset so unfortunately the solution below wont work.

the equation has two main sets of information feeding it in the form of two means, and other global parameters. From this, two prob values are calculated, one for each option.

However linking the above 100 value matrix results in 100 values being created which make no sense anyway. Putting in the first value manually from the matrix into the equation results in the correct output - 2 values (checked by hand)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:34:37.920

如果您有一个包含 100 个值的向量和一个为每次调用返回两个值的函数，那么这应该可以工作：

```
res <- sapply( vec, f) 
```

您应该得到一个列表或两列矩阵，具体取决于`f`-function 为您提供的返回对象的类型。

# c# - 如何检查生产服务器上的 Web 服务

> ID：11749303
> 
> 赞同：0
> 
> 时间：2012-07-31T21:30:19.217
> 
> 标签：c#, asp.net, web-services, asmx

在 ASP.NET 服务器（生产）上，我被告知使用由其他人编写的 Web 服务。

问题是我如何找出生产服务器上部署了哪些 Web 服务。我被告知的只是使用“CheckFile”（我相信它是 Web 服务的一部分）拨打电话。我去了 Inetpub 文件夹，看看是否有任何文件夹包含这些 web 服务但没有？

对不起，我是第一次这样做，因此有很多问题，

我的最终目标是在我的 ASP.NET 应用程序中使用这些 Web 服务，并从该 Web 服务调用这些函数，例如“CheckFile”和其他函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:39:34.163

我同意询问您的同事是否有。否则，如果您可以访问旧的 asp.net 应用程序，然后右键单击项目并单击服务参考选项卡，它将在该 .net 应用程序中显示 Web 服务。

# java - Instead of using a lot of java code, why not send a script to DB in the form of text file?

> ID：11749305
> 
> 赞同：0
> 
> 时间：2012-07-31T21:30:29.510
> 
> 标签：java, mysql, jdbc

I was thinking that doing java code for executing DDL, DML etc is cumbersome and involves a lot of typing. So, I was thinking if databases have/can be made to have the following feature -Take a script in a text file and execute the entire script.

If we had something like this, then we could type our SQL queries into a text file in the usual, easy way. The java code then sends this text file to the DB which executes it as if someone had typed the script into its management GUI.

Is this possible ? What could be the disadvantages of such a system ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:44:38.070

我所知道的几乎每个数据库都具有这种功能（包括您的标签中提到的 MySQL）。您只需从命令行客户端执行类似的操作（此示例适用于 MySQL）

```
mysql -h hostname -u user < sql_script.sql 
```

没有使用某种编程语言来传递文件的中间层。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:55:10.607

我会说为您的 DDL 争取它。我总是将我的表/索引/约束创建放在 SQL 脚本中并运行它来设置我的数据库。

但是，对于 DML，就像其他发帖人所说的那样，您将经常（通常）根据用户输入进行这些查询。如果用户在您的系统中创建了某个对象，您最终将通过一个或多个插入/更新来保存它。这些语句的参数将是用户输入系统的值。如果您使用 Java 的工具直接执行这些功能，它将更易于维护和理解。尝试用参数替换 SQL 文件中的标记并将其传递给数据库将很快变得更加麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:45:19.947

您需要 Java 代码中的语句，因为作为参数发送的大多数值仅在运行时才知道：它们来自 GUI，以及在每个查询之间执行的所有业务代码。否则，是的，你想要的存在：它们被称为存储过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T21:44:24.940

您的建议本质上类似于在 RDBMS 上调用存储过程。

缺点是您的域逻辑现在驻留在您的持久层中，这有几个原因（可能）不好。

主要问题之一是：**代码维护**：从维护的角度来看，程序员的噩梦以及需要 domani 逻辑和 sql 语句技能的程序员。根据您团队的规模，这可能是一个大问题。一般遵守**关注点分离规则**

# c# - 我试图使用 OpenHardwareMonitor 源代码，但从来没有得到我的视频卡温度，这可能是什么问题？

> ID：11749306
> 
> 赞同：2
> 
> 时间：2012-07-31T21:30:38.977
> 
> 标签：c#

在form1中我做了：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Management;
using OpenHardwareMonitor.Hardware;

namespace NvidiaTemp
{
    public partial class Form1 : Form
    {
        Computer computer = new Computer();
        public Form1()
        {
            InitializeComponent();

            computer.Open();
            var temps = new List<decimal>();
            foreach (var hardware in computer.Hardware)
            {
                if (hardware.HardwareType != HardwareType.CPU)
                    continue;
                hardware.Update();
                foreach (var sensor in hardware.Sensors)
                {
                    if (sensor.SensorType != SensorType.Temperature)
                    {
                        if (sensor.Value != null)
                            temps.Add((decimal)sensor.Value);
                    }
                }
            }

            foreach (decimal temp in temps)
            {
                Console.WriteLine(temp);
                MessageBox.Show(temp.ToString());
            }
            Console.ReadLine();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

它永远不会进入 foreach 跳过它。尝试了这么多示例示例无法弄清楚如何使其工作。而且我确定我的视频卡支持它，因为如果我运行 origiran openhardwaremonitor 程序 ikts 会如何处理所有参数，如温度和速度......

刚刚从程序官网下载了openhwardwaremonitor.dll文件：

[http://openhardwaremonitor.org/downloads/](http://openhardwaremonitor.org/downloads/) 该dll位于它自己的程序目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:50:18.843

我破解了[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)并查看了下载附带的示例 exe，因为文档非常简陋 - 通常是这种情况 :-)

我注意到当`Computer`对象初始化时，布尔属性`GPUEnabled`设置为 true。

所以...

```
Computer myComputer = new Computer();

myComputer.Open();

myComputer.GPUEnabled = true; //This is the line you are missing.

foreach (var hardwareItem in myComputer.Hardware)
{

    if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
    {
        foreach (var sensor in hardwareItem.Sensors)
        {
            if (sensor.SensorType == SensorType.Temperature)
            {
                MessageBox.Show(String.Format("The current temperature is {0}", sensor.Value));
            }
        }
    }

} 
```

当我从机器上的 Windows 窗体应用程序运行该代码时，我得到了当前温度（38C，这意味着我显然没有足够努力地运行它！）

如果我不设置 GPUEnabled，我会得到与您完全相同的结果 -`IHardware`集合中没有项目。

**更新：**

要回答您在评论中提出的其他问题，以下示例应该适合您：

```
 Timer timer;

    Computer myComputer;

    public Form1()
    {

        InitializeComponent();

        myComputer = new Computer();

        myComputer.Open();

        myComputer.GPUEnabled = true;

        timer = new Timer();
        timer.Interval = 5000;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();

     }

    void timer_Tick(object sender, EventArgs e)
    {
        foreach (var hardwareItem in myComputer.Hardware)
        {

            if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
            {
                foreach (var sensor in hardwareItem.Sensors)
                {
                    if (sensor.SensorType == SensorType.Temperature)
                    {
                        MessageBox.Show(String.Format("The current temperature is {0}", sensor.Value));
                    }
                }
            }

        }
    } 
```

这里我们有一个`Windows.Forms.Timer`和`Computer`类作为我们在构造函数中初始化的类级变量。每 5 秒，`tick`事件将触发一次，枚举硬件，并显示一个带有当前温度的消息框。这很容易成为一个标签，您甚至可以将其存储`Sensor`在一个类级别的变量中，以避免`IHardware`每次都枚举集合。

希望这可以帮助！

# java - Need to sort strings by part of the string

> ID：11749307
> 
> 赞同：0
> 
> 时间：2012-07-31T21:30:48.793
> 
> 标签：java

Say I have an array of strings:

```
String[] array = {
   "2183417234 somerandomtexthere",
   "1234123656 somemorerandomtexthere",
   "1093241066 andevenmore",
   "1243981234 you get what i mean",
   //etc

}; 
```

How would I sort this array using the long (it's a long) at the start of the string, so it'll end up looking like this:

```
String[] array = {
   "1093241066 andevenmore",
   "1234123656 somemorerandomtexthere",
   "1243981234 you get what i mean",
   "2183417234 somerandomtexthere",
   //etc

}; 
```

I've tried everyting from making it an arraylist and using Collections#sort to creating my own comparator, to using a sorted map / tree map and I just can't figure it out. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:34:44.393

使用这个功能：

```
static long comparedValue(String s) {
  return Long.valueOf(s.substring(0, s.indexOf(' ')));
} 
```

然后根据它定义一个比较器：

```
public int compare(String left, String right) {
  return comparedValue(left) - comparedValue(right);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:35:35.377

使用[谷歌番石榴](http://code.google.com/p/guava-libraries/)：

```
List<String> unsorted = Arrays.asList(array);

Function<String, Long> longFunction = new Function<String, Long>() {
  @Override public Long apply(String input) {
    return Long.valueOf(input.split(" ")[0]);
  }
};

List<String> sorted = Ordering.natural().onResultOf(longFunction).immutableSortedCopy(unsorted); 
```

或者，如果您不想使用列表（您应该始终更喜欢集合而不是数组）：

```
Arrays.sort(array, Ordering.natural().onResultOf(longFunction)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:38:54.163

自定义比较器应该可以正常工作：

```
public class LongPrefixComparator implements Comparator<String> {
     @Override
     public int compare(String s1, String s2) {
         final long pref1 = getPrefixValue(s1);
         final long pref2 = getPrefixValue(s2);
         return s1 == s2 ? 0 : s1 < s2 ? -1 : 1;
     }

     private static long getPrefixValue(String stg) {
         int len = stg.indexOf(' ');
         if (len > 0) {
             try {
                 return Long.parseLong(stg.substring(0, len));
             catch (NumberFormatException ignored) {}
         }
         return 0L;
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:45:44.007

您显示的输入非常好。但那是因为它们都有相同的位数。

```
public static void main(String[] args) {
    String[] array = { "2183417234 somerandomtexthere",
            "1234123656 somemorerandomtexthere", "1093241066 andevenmore",
            "1243981234 you get what i mean", "999 little shorter"
    // etc

    };

    List<String> list = Arrays.asList(array);
    Collections.sort(list);

    System.out.println(list);
} 
```

当您使用一些较短的数字时，问题开始出现 - 如上图所示的 999...

输出将是：

`[1093241066 andevenmore, 1234123656 somemorerandomtexthere, 1243981234 you get what i mean, 2183417234 somerandomtexthere, 999 little shorter]`

所以，为了让它一直工作——你需要你的自定义比较器，它能够分割给定的字符串，然后从它们中取出数字部分，然后比较它们。使用@Marko Topolik 解决方案：

```
static long comparedValue(String s) {
    return Long.valueOf(s.substring(0, s.indexOf(' ')));
}

public int compare(String left, String right) {

    long result = comparedValue(left) - comparedValue(right);

    boolean numberPartAreEqual = result == 0;
    if (numberPartAreEqual) {
        result = left.compareTo(right);
    }

    return (int) result;
} 
```

# ssh-agent - 跨共享主机上的 ssh 会话的 ssh-agent

> ID：11749308
> 
> 赞同：0
> 
> 时间：2012-07-31T21:30:53.487
> 
> 标签：ssh-agent

我通过 ssh 连接到一个共享主机（WebFaction），然后使用它`ssh-agent`来建立到一个 mercurial 存储库（BitBucket）的连接。我这样称呼代理：

```
eval `ssh-agent` 
```

然后这会喷出代理的 pid 并设置其相关的环境变量。然后我使用 ssh-add 如下添加我的身份（在输入我的密码后）：

```
ssh-add /path/to/a/key 
```

我的 ssh 连接最终超时，我与服务器断开连接。当我重新登录时，我无法再连接到 Hg 服务器，所以我这样做：

```
ps aux | grep 1234.*ssh-agent`
kill -SIGHUP 43210 
```

然后重复帖子顶部的两个命令（即使用`eval`和调用调用代理`ssh-add`）。

我确信有一个成熟的习语可以避免这个过程并保持对最初产生的代理的“引用”。我尝试将第一个命令的 I/O 重定向到一个文件（希望在我`.bashrc`的 .

我如何避免每次 ssh 进入主机时都必须经历这个过程？

我的 *NIX 技能很弱，因此欢迎对帖子的任何方面提出建设性的批评，而不仅仅是我使用`ssh-agent`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:50:18.887

简短的回答：

通过在本地运行 ssh-agent 并添加身份，`ssh -A user@host.webfaction.com`为远程主机上的安全 shell 提供本地代理的身份。

长答案：

正如查尔斯建议的那样，[代理转发](http://www.unixwiz.net/techtips/ssh-agent-forwarding.html#fwd)是解决方案。

起初，我认为我可以发出一个`ssh user@host.webfaction.com`然后，从远程主机上的安全会话中，使用 hg+ssh 连接到 BitBucket 存储库。但那失败了，所以我调查了[ForwardAgent 和 AgentForwardingEnabled 标志](https://superuser.com/questions/168933/extra-configuration-required-for-ssh-agent-forwarding/280938#280938)。

考虑到我必须解决 .bashrc 中涉及将我的私钥保存在远程主机上的解决方法，我去寻找一个 shell 脚本解决方案，但[在 SuperUser 的这个答案中](https://superuser.com/a/249712/18898)幸免于难，这是完美的，而且无需任何客户端配置即可工作（我不确定如何在 WebFaction 上配置 sshd 服务器）。

另外：在我的问题中，我发布了以下内容：

```
ps aux | grep 1234.*ssh-agent`
kill -SIGHUP 43210 
```

但这实际上效率低下，并且需要用户知道他/她的 uid（可通过 获得`/etc/passwd`）。`pgrep`容易得多：

```
pgrep -u username process-name 
```

# mysql - Retrieving original timestamp after replication using triggers

> ID：11749309
> 
> 赞同：2
> 
> 时间：2012-07-31T21:30:54.687
> 
> 标签：mysql, sql, triggers, timestamp, replication

Scenario is this: We have two databases db1 and db2\. Statements in db1 replicates to db2.

*   Query 1 gets executed in db1.
*   This is replicated to db2.

Upon execution of replicated query 1 in db2, a trigger needs to run in db2\. This trigger needs to update a table in db2, with timestamp of when query 1 was run ***in db1.***

Is this possible?

# jquery - 使用jquery动态创建div

> ID：11749314
> 
> 赞同：18
> 
> 时间：2012-07-31T21:31:06.593
> 
> 标签：jquery

我正在尝试将背景图像添加到动态生成的 div 中。当我为背景添加 CSS 属性时，如下所示，它破坏了我的插件：

```
$("<div>", {
    'class': "iviewer_image_mask",
    css: "background: url('http://somesite.com/path/to/image.jpg');"
}).appendTo(this.container); 
```

有人知道我在添加背景图片时做错了什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T21:33:20.493

当然，您可以只使用字符串添加它，但我更喜欢这种方式，因为它更具可读性和更清晰。

```
$("<div>", {
    'class': "iviewer_image_mask",
    css: {
        "background": "url('http://somesite.com/path/to/image.jpg')"
    }
}).appendTo(this.container); 
```

[**演示**](http://jsfiddle.net/qgxXF/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-31T21:34:33.090

根据这个[SO question](https://stackoverflow.com/questions/327047/what-is-the-most-efficient-way-to-create-html-elements-using-jquery)中报告的一些基准测试，我相信使用 jQuery 创建 HTML 元素的最有效方法是：

```
$('<div class="iviewer_image_mask" style="background: url(http://somesite.com/path/to/image.jpg);"></div>').appendTo(this.container); 
```

或者为了一些额外的可读性：

```
var elm = '<div class="iviewer_image_mask" ' +
          'style="background: url(http://somesite.com/path/to/image.jpg);">'+
          '</div>';
$(elm).appendTo(this.container); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-31T21:32:58.507

```
$("<div>")
    .addClass('iviewer_image_mask')
    .css('background', "url('http://somesite.com/path/to/image.jpg')")
    .appendTo(this.container); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-31T21:37:45.017

```
$("<div>").attr({
    'class': "iviewer_image_mask",
    'style': "background: url('http://somesite.com/path/to/image.jpg');"
}).appendTo("body"); 
```

如果您确实需要通过属性附加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-17T15:00:09.677

我在这本书《[使用 jQuery 开始 JavaScript 和 CSS 开发](https://rads.stackoverflow.com/amzn/click/com/0470227796)》中读到：

> 在前面的章节中，您已经看到了 jQuery 用来操作类名的 addClass()、hasClass() 和 removeClass() 方法的示例。在客户端 Web 开发中，最好的做法是**避免将样式声明直接放在 JavaScript 代码**中，而是通过在 CSS 中放置样式并在需要的情况下操作元素**的类名来****保持行为和表示的分离**风格的操纵。这被认为是最佳实践是有原因的：**它最有意义******. 由于您的所有演示文稿都整齐地包含在 CSS 中，您的行为在 JavaScript 中，您的结构在 HTML 中，您的文档变得更容易管理，因为在哪里进行修改更容易预测。如果您的样式分散在 HTML、JavaScript 和实际样式表中，那么更改文档的呈现方式将变得更加困难。****

 ****依此类推，使用类名。为你的目的。像这样：

```
$('<div class="iviewer_image_mask background-image"></div>').appendTo(this.container); 
```****

# xml - How can I ignore the !DOCTYPE declaration with XSL?

> ID：11749319
> 
> 赞同：3
> 
> 时间：2012-07-31T21:31:30.177
> 
> 标签：xml, xslt, doctype, dtd

> **Possible Duplicate:**
> [InDesign CS5 Script: How can I ignore the DTD when importing XML?](https://stackoverflow.com/questions/11746415/indesign-cs5-script-how-can-i-ignore-the-dtd-when-importing-xml)

Here is a basic XML file with a DTD file declaration:

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article SYSTEM "blahblah.dtd">
<root-node></root-node> 
```

I found this XSL solution at [http://www.stylusstudio.com/xsllist/200104/post90620.html](http://www.stylusstudio.com/xsllist/200104/post90620.html), which is ***not*** working:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<xsl:copy-of select="."/>
</xsl:template>
</xsl:stylesheet> 
```

( ...tested at [http://www.w3schools.com/XSL/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_ex2](http://www.w3schools.com/XSL/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_ex2) )

* * *

So, is there any other way to ignore the `!DOCTYPE` declaration, or otherwise ignore the DTD file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:34:53.360

我会使用正则表达式来解析 xml 并删除 Doctype 声明。

# php - 如何在php中获取子函数

> ID：11749320
> 
> 赞同：0
> 
> 时间：2012-07-31T21:31:38.080
> 
> 标签：php, oop, function, scope

我正在研究亚马逊到 vtiger 的集成，来自亚马逊 MWS 客户端库的代码片段看起来像

```
if ($order->isSetShippingAddress()) {
    echo("                        ShippingAddress\n");
    $shippingAddress = $order->getShippingAddress();
    if ($shippingAddress->isSetName()) {
        echo("                            Name\n");
        echo("                                " . $shippingAddress->getName() . "\n");
    }
    if ($shippingAddress->isSetAddressLine1()) {
        echo("                            AddressLine1\n");
        echo("                                " . $shippingAddress->getAddressLine1() . "\n");
    } 
```

我想访问子功能项，例如`$shippingAddress->AddressLine1()`

我的代码看起来像

```
$module          = 'Invoice';
$shippingAddress = $order->getShippingAddress();
$orderTotal      = $order->getOrderTotal();
$record          = $client->doCreate($module,Array(

                                                  'subject'   => $order->getAmazonOrderId(),
                                                  'customerno'=> $order->getAmazonOrderId(),
                                                  bill_city' => $shippingAddress->getAddressLine1(),
                                                  'bill_state'=> $shippingAddress->getStateOrRegion(),
                                                  'bill_code' => $shippingAddress->getPostalCode(), 
```

当我尝试这个时，我得到了错误

致命错误：在非对象上调用成员函数 getAddressLine1()

这是范围错误吗？如何使用 $shippingAddress 的子功能？

请帮帮我

**完整代码**

```
function invokeListOrders(MarketplaceWebServiceOrders_Interface $service, $request) 
  {
      try {
              $response = $service->listOrders($request);

                if ($response->isSetListOrdersResult()) { 
                    echo("            ListOrdersResult\n");
                    $listOrdersResult = $response->getListOrdersResult();

                    if ($listOrdersResult->isSetOrders()) { 
                        echo("                Orders\n");
                        $orders = $listOrdersResult->getOrders();
                        $orderList = $orders->getOrder();
                        foreach ($orderList as $order) {
                            $shippingAddress = $order->getShippingAddress();
    include_once('vtwsclib/Vtiger/WSClient.php');                       
$url = 'http://vijayholdings.com/admin';
$client = new Vtiger_WSClient($url);
$login = $client->doLogin('admin', 'MYSECRETKEY');
if(!$login) echo 'Login Failed';                            
            else{   
                    $module = 'Invoice';
                    $shippingAddress = $order->getShippingAddress();
                     $orderTotal = $order->getOrderTotal();
                    $record = $client->doCreate($module,Array(

          'subject'=>$order->getAmazonOrderId(), 
          'customerno'=>$order->getAmazonOrderId(),
          'invoicestatus'=>'Credit Invoice',/*
          'assigned_user_id'=>'spatel',
          'currency_id'=>'1',
          'conversion_rate'=>'1',  not working*/
          'bill_street'=>$order->getShippingAddress(),/* 
          'bill_city'=>$shippingAddress->getCity(),
          'bill_state'=>$shippingAddress->getStateOrRegion(), 
          'bill_code'=>$shippingAddress->getPostalCode(),
          'bill_country'=>$order->$shippingAddress->getCounty(), */
          'cf_652'=>'Deepdiscounts.co Amazon FBA',/* 
          'cf_653'=>$shippingAddress->getPhone(),
          'cf_656'=>$shippingAddress->getAddressLine2(), */
          'cf_660'=>$order->getShipServiceLevel(),
          'cf_658'=>$order->getSalesChannel(),
          'cf_661'=>$order->getFulfillmentChannel(),
          'cf_663'=>$order->getBuyerName(),       
          'cf_659'=>$order->getBuyerEmail(), 
          'cf_662'=>$order->getPaymentMethod()
          ));
            }
    if($record) {
        $recordid = $client->getRecordId($record['id']);
  echo "The id is ".$recordid;
    }

                 } 
                }
                }

     } catch (MarketplaceWebServiceOrders_Exception $ex) {
         echo("Caught Exception: " . $ex->getMessage() . "\n");
         echo("Response Status Code: " . $ex->getStatusCode() . "\n");
         echo("Error Code: " . $ex->getErrorCode() . "\n");
         echo("Error Type: " . $ex->getErrorType() . "\n");
         echo("Request ID: " . $ex->getRequestId() . "\n");
         echo("XML: " . $ex->getXML() . "\n");
         echo("ResponseHeaderMetadata: " . $ex->getResponseHeaderMetadata() . "\n");
     } 
```

**RAW_DUMP**的输出 是我正在工作的列表中的一个销售订单

> (1) { ["_fields:protected"]=> array(11) { ["Name"]=> array(2) { ["FieldValue"]=> string(16) "Jason A. Stewart" ["FieldType "]=> string(6) "string" } ["AddressLine1"]=> array(2) { ["FieldValue"]=> string(15) "101 Young Drive" ["FieldType"]=> string(6 ) "string" } ["AddressLine2"]=> array(2) { ["FieldValue"]=> NULL ["FieldType"]=> string(6) "string" } ["AddressLine3"]=> array(2 ) { ["FieldValue"]=> NULL ["FieldType"]=> string(6) "string" } ["City"]=> array(2) { ["FieldValue"]=> string(6) "Smyrna " ["FieldType"]=> string(6) "string" } ["County"]=> array(2) { ["FieldValue"]=> NULL ["FieldType"]=> string(6) "string" } ["District"]=> array(2) { ["FieldValue"]=> NULL ["FieldType"]=> string(6) "string" } ["StateOrRegion"]=> array(2) { ["FieldValue"]=> string(2) "TN" ["FieldType"]=> string (6) "string" } ["PostalCode"]=> array(2) { ["FieldValue"]=> string(5) "37167" ["FieldType"]=> string(6) "string" } [" CountryCode"]=> array(2) { ["FieldValue"]=> string(2) "US" ["FieldType"]=> string(6) "string" } ["Phone"]=> array(2) { ["FieldValue"]=> 字符串(10) "6152231070" ["FieldType"]=> 字符串(6) "字符串" } } }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:35:45.610

You have a syntax error,

```
bill_city' => $shippingAddress->getAddressLine1(), 
```

Should be

```
'bill_city' => $shippingAddress->getAddressLine1(), 
```

Get a decent IDE, mine picked it up in a few seconds.

![IDE Picking up syntax error](../Images/9fec81c1acb13d898c15b1687a7f463e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:34:20.940

All this means is that your `$shippingAddress` var does not have an object in it. It is likely that your call to `getShippingAddress()` has failed.

Do a `var_dump($shippingAddress)` to see what's in there.

# data-structures - 强连通图是不是循环图？

> ID：11749321
> 
> 赞同：1
> 
> 时间：2012-07-31T21:31:40.990
> 
> 标签：data-structures, graph-theory

我对图论还很陌生，我对图的强连通分量有一个非常基本的疑问。它说如果两个节点之间都有路径，则两个或更多节点是强连接的。那么这个图是否有资格作为一个有循环的循环图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:21:36.357

是的，强连通图是循环的。在这样的图中，任何两个顶点，比如说`u`和`v`是强连接的，所以存在一条由有向边组成的从`u`到和从到`v`的路径。如果路径和路径不相交，将它们连接起来，你就有了循环。如果它们共享边，则从路径开始并遵循路径，一旦您击中两条路径共享的第一条边，则开始遵循路径，直到返回。`v``u``u->v``v->u``u``u->v``v->u``u`

# iphone - My app crash before call FBRequest didReceiveResponse

> ID：11749324
> 
> 赞同：3
> 
> 时间：2012-07-31T21:31:52.627
> 
> 标签：iphone, ios, objective-c, facebook, fbconnect

I'm using a Facebook SDK with `FBConnect`. On my **MainAppDelegate.m**, I used this code:

```
#import "MainAppDelegate.h"
#import "MenuViewController.h"
#import "LoginViewController.h"

#import "DataSet.h"

static NSString* kAppId = @"1234567891234567";

@implementation MainAppDelegate

@synthesize window = _window;
@synthesize mainViewController = _mainViewController;
@synthesize viewController = _viewController;

//Facebook 2.0
@synthesize navigationController=_navigationController;
@synthesize facebook;
@synthesize apiData;
@synthesize userPermissions;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    //Facebook SDK 2

    // Setup view controllers
    LoginViewController *loginViewController = [[LoginViewController alloc] init];    
    UINavigationController *navController = [[UINavigationController alloc]         initWithRootViewController:loginViewController];
    [navController.navigationBar setTintColor:[UIColor colorWithRed:0/255.0
                                                          green:51.0/255.0
                                                           blue:102.0/255.0
                                                          alpha:1.0]];
    [navController.navigationBar setBarStyle:UIBarStyleBlackTranslucent];
    [navController.navigationBar setHidden:YES];
    self.navigationController = navController;
    [loginViewController release];
    [navController release];

    // Initialize Facebook
    facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:loginViewController];

    // Check and retrieve authorization information
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults      objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    // Initialize API data (for views, etc.)
    apiData = [[DataSet alloc] init];

    // Initialize user permissions
    userPermissions = [[NSMutableDictionary alloc] initWithCapacity:1];

    // Override point for customization after application launch.
    // Add the navigation controller's view to the window and display.
    if ( facebook.isSessionValid ) {

        self.mainViewController = [[MenuViewController alloc]         initWithNibName:@"MenuViewController" bundle:nil];
        self.window.rootViewController = self.mainViewController;
        [self.window makeKeyAndVisible];
    } else {           
        self.viewController            = [[LoginViewController alloc]     initWithNibName:@"LoginViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
    }

    //End of Facebook SDK 2

    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application {

    //Facebook 2

    // Although the SDK attempts to refresh its access tokens when it makes API calls,
    // it's a good practice to refresh the access token also when the app becomes active.
    // This gives apps that seldom make api calls a higher chance of having a non expired
    // access token.
    [[self facebook] extendAccessTokenIfNeeded];

}

- (void)dealloc {

    [_window release];
    [_navigationController release];
    [facebook release];
    [apiData release];
    [userPermissions release];
    [super dealloc];
}

#pragma mark - 
#pragma mark Facebook SDK 2

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [self.facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [self.facebook handleOpenURL:url];
} 
```

And on my **LoginViewController** which is the main `UIViewController` of my app is thus:

```
#import "LoginViewController.h"
#import "MenuViewController.h"

#import "MainAppDelegate.h"
#import "FBConnect.h"
#import "APICallsViewController.h"

@implementation LoginViewController

- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];

    if (![[delegate facebook] isSessionValid]) {
        [self showLoggedOut];
    } else {
        [self showLoggedIn];
    }

}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
}

# pragma mark - Events

-(IBAction)clickedFacebook:(id)sender {

    buttonFacebook.userInteractionEnabled = NO;

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];
    if (![[delegate facebook] isSessionValid]) {
        permissions = [[NSArray alloc] initWithObjects:@"offline_access",@"user_relationships",@"user_hometown",@"user_location",@"user_birthday",@"email",@"user_work_history", nil];
        [[delegate facebook] authorize:permissions];
    } else {
        [self showLoggedIn];
    }

}

#pragma mark - View lifecycle

- (void)viewDidLoad {

    [super viewDidLoad];

    buttonFacebook.enabled = YES;

    NSString *dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *path = [NSString stringWithFormat:@"%@/user.archive",dir];

    if( [[NSFileManager defaultManager] fileExistsAtPath:path] ) {

        MenuViewController *system = [[MenuViewController alloc] initWithNibName:nil bundle:nil];

        [self.view addSubview:system.view];

    }

    pendingApiCallsController = nil;

}

#pragma - Private Helper Methods

/**
 * Show the logged in menu
 *
 * Login
 */

- (void)showLoggedIn {

    MenuViewController *system = [[MenuViewController alloc] initWithNibName:nil bundle:nil];
    [self.view addSubview:system.view];

    [self apiFQLIMe];

}

/**
 * Show the logged out in menu
 *
 * Logout
 */

- (void)showLoggedOut {}

/**
 * Show the authorization dialog.
 */
- (void)login {

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];

    if (![[delegate facebook] isSessionValid]) {
        [[delegate facebook] authorize:permissions];
    } else {
        [self showLoggedIn];
    }

}

/**
 * Invalidate the access token and clear the cookie.
 */    
- (void)logout {

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication]     delegate];

    [[delegate facebook] logout];

}

#pragma mark - Facebook API Calls
/**
 * Make a Graph API Call to get information about the current logged in user.
 */
- (void)apiFQLIMe {

    NSString *fql = [[NSString alloc] initWithString:@"SELECT uid, name, pic, sex, relationship_status, hometown_location, current_location, birthday, email, work, locale FROM user WHERE uid=me()"];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:fql, @"query", nil ];

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];

    [[delegate facebook] requestWithMethodName:@"fql.query"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self];

}

/*
 * Call this method to make a request to the Graph API.
 *
 * You should set up your delegate to handle the API results including error scenarios.
*/
- (void)apiGraphUserPermissions {

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] requestWithGraphPath:@"me/permissions" andDelegate:self];

}

- (void)storeAuthData:(NSString *)accessToken expiresAt:(NSDate *)expiresAt {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject:accessToken forKey:@"FBAccessTokenKey"    ];
    [defaults setObject:expiresAt   forKey:@"FBExpirationDateKey" ];
    [defaults synchronize];

}

#pragma mark - FBSessionDelegate Methods
/**
 * Called when the user has logged in successfully.
 */
- (void)fbDidLogin {

    [self showLoggedIn];

    MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];
    [self storeAuthData:[[delegate facebook] accessToken] expiresAt:[[delegate facebook] expirationDate]];

    [pendingApiCallsController userDidGrantPermission];

}

-(void)fbDidExtendToken:(NSString *)accessToken expiresAt:(NSDate *)expiresAt {
    [self storeAuthData:accessToken expiresAt:expiresAt];
}

/**
 * Called when the user canceled the authorization dialog.
 */
-(void)fbDidNotLogin:(BOOL)cancelled {
    [pendingApiCallsController userDidNotGrantPermission];
}

/**
 * Called when the request logout has succeeded.
 */
- (void)fbDidLogout {

    pendingApiCallsController = nil;

    // Remove saved authorization information if it exists and it is
    // ok to clear it (logout, session invalid, app unauthorized)
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [self showLoggedOut];
}

#pragma mark - FBRequestDelegate Methods

- (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"did Receive Response");
}

- (void)request:(FBRequest *)request didLoad:(id)result {

    if ([result isKindOfClass:[NSArray class]]) {
        result = [result objectAtIndex:0];
    }

    // This callback can be a result of getting the user's basic
    // information or getting the user's permissions.
    if ([result objectForKey:@"name"]) {
        [self apiGraphUserPermissions];
        [self beginGame:result];
    } else {

        // Processing permissions information
        MainAppDelegate *delegate = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];
        [delegate setUserPermissions:[[result objectForKey:@"data"] objectAtIndex:0]];

    }

}

#pragma mark - 
#pragma mark Begin Game

-(void)beginGame:(id)user {

    // Get user info from Facebook through "user"
//...

// Trying to call MenuViewController

    MenuViewController *menu = [[MenuViewController alloc] initWithNibName:nil bundle:nil];

    float version = [[[UIDevice currentDevice] systemVersion] floatValue];

    if( version >= 5.0 ) {
        [self presentViewController:menu animated:YES completion:nil];
    }else{
        [self presentModalViewController:menu animated:YES];   
    }

    [menu release];

}

@end 
```

What should I do to make it work? I feel the problem is in the methods fbDidLogin, didReceiveResponse and the method didLoad.

The sequence methods was:

`viewDidLoad`,`viewWillAppear` then `showLoggedOut`

I clicked on facebook button to login and then happen this sequence:

fbDidLogin showLoggedIn viewDidLoad apiFQLIMe storeAuthData

But when the app try to receive a response, it doesn't work and the app crashes with error as follows.

```
EXC_BAD_ACCESS Code=1 Address:276817x92 
```

# php - PHP fwrite 自己

> ID：11749328
> 
> 赞同：1
> 
> 时间：2012-07-31T21:32:13.457
> 
> 标签：php

我在这里做一个小实验。我有一个测试文件，我用它来运行一些代码，而不必实际登录我的应用程序。

无论如何，我今天有一个想法，我可以让页面自动编辑，让我更快地完成某些琐碎的任务，因为我什至不需要为它们打开文本编辑器。

它*主要是*按原样工作，但我遇到了一件奇怪的事情；我希望有人碰巧有经验，或者可以阐明一些情况。

我不会发布整个文件的代码，只是相关的东西。这是基本思想：

索引.php：

```
<?php
if(isset($_POST['file'])) {
  // rewrite ourself
  $test_page = fopen('index.php', 'w');
  fwrite($test_page, $_POST['file']);
  fclose($test_page);
  header('Refresh: 0; ' . $_SERVER['PHP_SELF']);
  exit();
  die(); // we should never get this far...
}
?>
<?php <!-- All the tester stuff goes here --> ?>
<?php <!-- Nothing fancy just a bunch of function calls --> ?>
<!doctype html>
<html lang="en">
  <head>
  </head>
  <body>
    <div>
      <!-- a dump of the functions called in the tester area -->
    </div>
    <div>
      <form method='post'>
        <textarea name='file'>
<?php
$self = fopen('index.php', 'r');
while(!feof($self)) {
  echo fgets($self);
}
fclose($self);
?>
        </textarea>
        <input type="submit" value="Edit/Refresh">
      </form>
    </div>
  </body>
</html> 
```

现在一切都很好，除了最后 5 个 HTML 标记没有写入文件；或者更准确地说，最后 5 个 HTML 标记没有被写入，`textarea`所以当需要保存时，在提交之后，它们显然没有被附加。到目前为止，我的理论是，一旦标签由 PHP 输出，它显然会关闭文本区域......所以我需要找到一种方法来获取文本区域内的关闭标签。我通过查看页面的来源验证了这一点，所以我认为它是正确的。

所以我想我只需要一种方法来“逃离”他们......

我知道这在安全性方面不是一件好事，但这只是我使用的一个本地页面（除了坐在我电脑前的人之外，任何人都无法使用它）。所以我们不需要讨论它显然可能存在的安全问题......

所有想法表示赞赏！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:47:24.080

解决问题的最简单方法是更换：

```
echo fgets($self); 
```

和：

```
echo htmlspecialchars(fgets($self)); 
```

这样您仍然可以在文本框中看到特殊字符，但它们不会呈现为 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:36:13.660

这是一个非常糟糕的主意，因为如果出现任何问题，它就会爆炸并且永远不会再工作，如果你没有备份，它就会永远消失。

这就是为什么人们使用 php 脚本之类的东西来动态生成网页而不修改底层文件的原因。我建议您只需添加一些存储到磁盘某处的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:51:33.010

您可以搜索并替换结束文本区域标签。再次调用它时与之相反。有一些函数可以替换所有 html 代码，但如果你只想做结束标记，我建议使用 str_replace() 或 str_ireplace() 自定义一个。

# c# - 对象数组。JSON 反序列化。请建议

> ID：11749332
> 
> 赞同：0
> 
> 时间：2012-07-31T21:32:25.793
> 
> 标签：c#, asp.net, arrays, json, list

我正在使用一个返回 JSON 字符串的 Web 服务。

```
String str =[{"users":{"company":"abc","contact_Number":"999999999"}},
             {"users":{"company":"xyz","contact_Number":"888888888"}},
             {"users":{"company":"xxx","contact_Number":"555555555"}},
] 
```

无法反序列化。

```
class jsonmenuwrapper
        {
            public user[] users{ get; set; }
           // public List<user> listcontacts;
        }

public class user
        {
            public String company
            {
                get;
                set;
            }
            public String contact_Number
            {
                get;
                set;
            }
}

JavaScriptSerializer sr= new JavaScriptSerializer();           

jsonmenuwrapper sr1 = sr.Deserialize<jsonmenuwrapper>(str); 
```

抛出错误.. jsonmenuwrapper' 不支持数组的反序列化。

有人可以指导我吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:02:03.500

您实际上是在反序列化一组用户。根本不需要`jsonmenuwrapper`上课。

只需更改 1 行：

```
List<user> sr1 = sr.Deserialize<List<user>>(str); 
```

* * *

**更好的答案**

实际上，您尝试反序列化的数据结构是包装器对象的数组，但每个包装器仅包含 1 个“用户”而不是它们的数组。这是一个带有单元测试的工作设置，以显示它的工作：

```
public class jsonmenuwrapper
{
    public user users { get; set; }
}

public class user
{
    public String company { get; set; }
    public String contact_Number { get; set; }
}

[TestFixture]
public class JsonTests
{
    [Test]
    public void TestArrayDeserialization()
    {
        const string str =
@"[{""users"":{""company"":""abc"",""contact_Number"":""999999999""}},
{""users"":{""company"":""xyz"",""contact_Number"":""888888888""}},
{""users"":{""company"":""xxx"",""contact_Number"":""555555555""}}]";

        var serializer = new JavaScriptSerializer();
        var data = serializer.Deserialize<List<jsonmenuwrapper>>(str);

        Assert.AreEqual(3, data.Count);

        Assert.AreEqual("abc", data[0].users.company);
        Assert.AreEqual("999999999", data[0].users.contact_Number);

        Assert.AreEqual("xyz", data[1].users.company);
        Assert.AreEqual("888888888", data[1].users.contact_Number);

        Assert.AreEqual("xxx", data[2].users.company);
        Assert.AreEqual("555555555", data[2].users.contact_Number);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:37:12.083

看起来您正在将字符串转换为对象数组......我希望它会引发异常，但事实并非如此，所以试试这个：

```
String str ="[{\"users\":{\"company\":\"abc\",\"contact_Number\":\"999999999\"}},
             {\"users\":{\"company\":\"xyz\",\"contact_Number\":\"888888888\"}},
             {\"users\":{\"company\":\"xxx\",\"contact_Number\":\"555555555\"}}
]"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:32:40.990

你的课程不需要标记`Serializable`吗？

```
[Serializable]
public class jsonmenuwrapper
{
//...
}

[Serializable]
public class user
{
//...
} 
```

# ruby-on-rails - 嵌套属性不显示 attr_accessible

> ID：11749338
> 
> 赞同：0
> 
> 时间：2012-07-31T21:33:02.093
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes, attr-accessible, authenticity-token

我有一个嵌套属性 message.rb

```
 class Message < ActiveRecord::Base
    belongs_to :trip  
    attr_accessible :name, :email, :subject, :body
  end 
```

属于trip.rb

```
 class Trip < ActiveRecord::Base
    has_many :messages 
    accepts_nested_attributes_for :messages, :allow_destroy => true
    attr_accessible :messages_attributes
  end 
```

消息控制器.rb

```
 class MessagesController < ApplicationController   
   def create
     @trip = Trip.find(params[:trip_id])
     @message = @trip.messages.create(params[:message])
     redirect_to trip_path(@trip)
   end
  end 
```

消息形式在 \trips\show.html.erb

```
 <%= form_for([@trip, @trip.messages.build]) do |f| %>
   <div class="field">
     <%= f.label :name%><br />
     <%= f.text_field :name %>
   </div>
   <div class="field">
     <%= f.label :email %><br />
     <%= f.text_field :email %>
   </div>

   <div class="field">
    <%= f.label :subject %><br />
   </div>

   <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
   </div>

   <div class="actions">
    <%= f.submit %>
    </div>
   <% end %> 
```

它也应该出现在那里 \trips\show.html.erb

```
 <h2>Messages</h2>
     <% @trip.messages.each do |message| %>
   <p>
   <b>NAme:</b>
     <%= message.name %>
   </p>
    <b>Email:</b>
     <%= message.email %>
   </p>
     <b>Subject:</b>
     <%= message.subject %>
   </p>
     <b>Message:</b>
     <%= message.body %>
   </p>
   <% end %> 
```

问题是它只是没有。

我的 Development.log。

> , "id"=>"44"} [1m[35mTrip Load (0.0ms)[0m SELECT "trips".* FROM "trips" WHERE "trips"."id" = ? LIMIT 1 [["id", "44"]] [1m[36mCategory Load (0.0ms)[0m [1mSELECT "categories".* FROM "categories" INNER JOIN "categories_trips" ON "categories"."id" = " categories_trips"."category_id" WHERE "categories_trips"."trip_id" = 44[0m [1m[35mLocation Load (0.0ms)[0m SELECT "locations".* FROM "locations" WHERE> "locations"."id" = 18限制 1 [1m[36mCACHE (0.0ms)[0m [1mSELECT "trips".* FROM "trips" WHERE "trips"."id" = ? 限制 1[0m [1m[35m图像加载（1.0ms）[0m 选择“图像”。

我真的不明白为什么，我确实设置了 attr_accessible。你能帮我吗 ？谢谢你！

## **更新**

通过rails控制台它可以工作：

> irb(main):019:0> first_trip.messages.create(name: "emils2") ←[1m←[35mSQL (2.0ms)←[0m INSERT INTO "messages" ("body", "created_at", "email ", "name", "subject", "trip_id", "updated_at") 值 (?, ?, ?, ?, ?, ?, ?) [["body", nil], ["created_at", Wed, 2012 年 8 月 1 日 13:52:29 UTC +00:00], ["email", nil ], ["name", "emils2"], ["subject", nil], ["trip_id", 32], [ “updated_at”，2012 年 8 月 1 日星期三 13:52:29 UTC +00:00]]
> 
> 32，created_at：“2012-08-01 13:52:29”，updated_at：“2012-08-01 13:52:29”>

我的 routes.rb 也嵌套了：

```
resources :trips do
 resources :messages
end 
```

# php - MySQL vs PHP 查询性能问题

> ID：11749339
> 
> 赞同：0
> 
> 时间：2012-07-31T21:33:07.073
> 
> 标签：php, mysql, sql, performance, cakephp

我有一个在 mysql (Navicat) 中运行大约 2 秒的 sql 查询，它通过 600,000 个位置返回所有表数据并计算我输入的经纬度之间的距离。

SQL 是这样的：

```
select *, 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - 
radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance 
FROM places 
GROUP BY places.user_id
HAVING distance > 0
ORDER BY distance LIMIT 0 , 10; 
```

在上面的查询中，37 和 -122 作为 lat 和 long 传递到查询中。

当我在 Navicat 中运行它时，需要 2 秒，但在 Cakephp 或使用 mysql_query() 的直接 php 中需要几分钟。

为什么会发生这种情况，我该如何解决？

我在运行 XAMPP 的 Win7 4GB 机器上本地运行 MySQL 和 Apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:24:21.657

这可能与您的表结构有关。如果您还没有，我强烈建议您`user_id`在`places`表中创建索引。这可以在复杂查询的执行时间上产生惊人的差异。

此外，由于您似乎在查询中进行了大量计算（对于距离），您可能会从使用 mysqli 或 PDO 扩展中的准备好的语句功能中受益匪浅——而不是使用较旧、较慢、不太安全的，不推荐使用 mysql 扩展。

本文有助于解释差异： http: [//php.net/manual/en/mysqli.overview.php](http://php.net/manual/en/mysqli.overview.php)

如果您已经习惯了 mysql 扩展，我建议您切换到 mysqli - 它们的程序语法/API 几乎相同（主要区别在于您需要提供 $connection_handle 作为许多函数的第一个参数，而不是它是可选的最终参数）。

Navicat 可能正在利用准备好的语句，这可能是你的不同之处。

# sharepoint - SharePoint 集成模式中的 SSRS 和报表模型安全 - 安全漏洞？

> ID：11749355
> 
> 赞同：4
> 
> 时间：2012-07-31T21:34:37.737
> 
> 标签：sharepoint, reporting-services

这是我的场景：我让 SSRS 2008 R2 在与 SharePoint 2010 的集成模式下运行。一切都按预期工作，因为我可以创建数据源、模型（通过工作室或通过 ECB 上的“生成模型”选项）报表库中的数据源）。我的数据源正在使用带有存储凭据选项的专用 SQL 帐户。我的模型专门隐藏了几列，因此我的报表生成器 3.0 用户无权访问它们（考虑这些敏感列）。

我发现虽然***用户无法编辑我的模型或数据源（他们只有读取权限），但他们可以（从他们拥有贡献权限的另一个报表库）创建一个新的报表模型（来自 SharEPoint ) 并简单地将 url 传递到我在我的库中为它们设置的报告数据源***。一旦他们这样做了，他们最终会得到一个没有我在锁定模型中设置的任何隐藏列的模型。该模型也没有我应用的任何模型项安全设置——它是一个仅使用数据源的全新模型。

所以这是我的问题：微软暗示报告模型项安全性可用于防止用户访问模型中的某些实体（因此称为“报告模型项安全性”）。**但是，如果用户可以使用 SharePoint UI 从他们自己创建的报表库中简单地创建自己的模型，并指向他们必须具有读取权限的数据源（.rsds 文件），这不是一个安全漏洞吗？ ?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:10:55.567

*“我的数据源正在使用专用的 SQL 帐户”* [...] *“数据源（他们只有对它们的读取权限”*。用户对数据源具有读取权限。这意味着用户可以使用提供的数据做任何他想做的事情通过该数据源 - 无论您设置什么模型。

没有安全漏洞，但您的设计存在缺陷。一旦您使用专用帐户访问外部数据库，您就只有该帐户的安全性。您需要使用模拟将用户的凭据传递给数据库，这样他就只能看到他应该看到的内容。这当然会打开另一个蠕虫罐，因为您不想让所有 SharePoint 用户都成为数据库用户。这让您只剩下选项三：让数据库能够在某种安全查找数据库中查找用户，这当然是一个自定义解决方案。

现在，您正在使用“默默无闻的安全”方法。您为用户提供了一个具有某些“权限”或隐藏列的模型，但底层数据源为用户提供了所有数据（甚至是隐藏的东西）。是什么阻止了用户使用他们拥有读取权限的数据源？没有什么...

# jquery - jQuery：查找具有 X 的 href 的元素

> ID：11749356
> 
> 赞同：0
> 
> 时间：2012-07-31T21:34:39.007
> 
> 标签：jquery, href, location-href

我需要能够检查以下内容：

`$(".main-menu a")`

对于特定`href`属性，然后`addClass`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:35:23.040

```
$(".main-menu a[href='http://somesite.com']").addClass('someClass'); 
```

# javascript - 在新窗口中打开选项卡，然后

> ID：11749361
> 
> 赞同：0
> 
> 时间：2012-07-31T21:35:11.090
> 
> 标签：javascript, html, css, tabs

我有一个用 html/css/javascript 编写的选项卡查看器，我想对其进行一些更改，现在当我切换每个选项卡时，它所做的只是切换内容。我想做的是在一个新窗口中打开每个选项卡，并像每个选项卡一样将每个选项卡放在单独的文件中。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:36:36.573

在标签上放置一个链接`target="_blank"`

```
<a href="tab1.html" target="_blank">Tab1</a> 
```

**编辑：**该`target`属性可能已被弃用（或不被推荐：请参阅@Tim Medora 的评论），但在所有主要浏览器（[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)）中都受支持，并且尽可能接近 imo . 来自 w3schools.com：`_blank: Opens the linked document in a new window or tab`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:43:39.910

> 为简单起见，id 喜欢将内容存储在单独的文件中，否则它在每个页面中都会变得相当广泛

jQuery UI 选项卡 + AJAX 怎么样？

文档： http: [//jqueryui.com/demos/tabs/#ajax](http://jqueryui.com/demos/tabs/#ajax)
演示：http: [//jqueryui.com/demos/tabs/ajax.html](http://jqueryui.com/demos/tabs/ajax.html)

或者，如果您已经拥有自己的选项卡控件，则可以通过一些 JS 检测选项卡更改并使用 AJAX 动态加载内容。

如果您真的想要新窗口（从问题中不清楚），那么使用选项卡会产生误导。那时它应该只是一个菜单。如果标签都在新窗口中打开，我会感到困惑/沮丧。

# ios - 将 ISO6801 日期转换为 NSDate 以进行 RestKit 对象映射

> ID：11749367
> 
> 赞同：3
> 
> 时间：2012-07-31T21:36:05.330
> 
> 标签：ios, nsdateformatter, restkit

这个问题似乎影响了许多使用自定义构建的 restful APIS 的 Objective-c 开发人员——比如[这里](https://groups.google.com/forum/#!msg/restkit/Bf-qRiYgmIE/x8Lz249mSOQJ)和[这里](https://stackoverflow.com/questions/7811607/restkit-and-iso-date)。在后端，我们使用的是 ISO 6801 日期，当我从服务器上拉下对象时，我无法获得有效的日期。这是我们使用的日期格式，但是 NSDate 无法识别它，因为时区偏移中的冒号：

`1981-09-01T00:00:00-06:00`

我试过使用这个[ISO6801 parser 和 unparser](http://boredzo.org/iso8601unparser/)，它包含在最新版本的 RestKit 中，但我不知道如何成功地将它添加到对象映射中。如何将日期格式化程序添加到 RestKit 对象映射？任何人都可以提供如何执行此操作的代码示例吗？

这是我失败的代码。这是我正在寻找并尝试基于[google groups post 的](https://groups.google.com/forum/#!msg/restkit/Bf-qRiYgmIE/hDCXVt9DflYJ)内容，但它给出了错误：

```
[mapping.dateFormatStrings addObject:[[MyISO8601DateFormatter] alloc] init]]; 
```

这篇文章有一个[相关的答案](https://stackoverflow.com/a/3201886/654870)，但它部分已经过时并且缺乏一个工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:43:12.993

要添加日期格式化程序，请执行以下操作：

```
[RKObjectMapping addDefaultDateFormatter: formatter]; 
```

如果这种风格不适合您，您可以尝试在头文件中看到的其他一些选项。

# html - 表单超出了它的容器

> ID：11749370
> 
> 赞同：0
> 
> 时间：2012-07-31T21:36:09.127
> 
> 标签：html, css

嗨，我已经为客户完成了一个网站，并在包括 IE8 在内的所有最新浏览器上对其进行了测试，并且在其中看起来不错。我还针对不同的分辨率对其进行了测试，这两个看起来不错。

这是网站：

[首页](http://www.nistoralexandru.comule.com/)

你应该看的是大文本和表格都应该在中心对齐。我的客户给我发了一张照片，显示表格以某种方式延伸到容器之外。他说它来自 chrome 但对我来说 chrome 看起来不错.

这是我使用的标记：

```
 <section>
          <h1>Build your professional page and connect with people you need to <span> achieve your goals </span></h1>
          <form>
              <label for="name"><span>PAGE NAME</span><input type="text" value="What do you seek?" name="name" id="name"/></label>
              <img src="img/frontpage/and.png" alt="and"/>
              <label for="password"><span>PASSWORD</span><input type="text" value="What do you seek?" name="password" id="password"/></label>
              <input type="submit" value="Create Page" id="press"/>
          </form>
      </section> 
```

这是CSS：

```
div#frontpage section{
    width:700px;
    margin:0 auto;
    margin-top: 50px;
    margin-bottom: 80px;
}
div#frontpage section h1{
    font-size:48px;
    text-align: center;
    color:#060000;
}

div#frontpage section form{
    margin-top: 65px;
    position:relative;
}
div#frontpage section form label{
    display:inline-block;   
}
div#frontpage section form label span{
    display: block;
    color:#75aed2;
    font-size:11px;
    font-weight: bold;
    margin-bottom: 5px;
}

div#frontpage section form input{
    width:190px;
    padding:8px 5px;
    color:#d5d5d5;
    font-weight: bold;
    border:1px solid #bbbbbb;
    font-size: 13px;
    background-color: white;
}
div#frontpage section form label:first-child{
   margin-right:57px;
}
div#frontpage section form img{
    position:absolute;
    top:20px;
    left:226px;
}
div#frontpage section form input#press{
   margin-left: 40px;
   background-color: #1f70b3;
   border:none;
   color:white;
   cursor: pointer;
   padding: 12px 5px;
}
div#frontpage section form input#press:hover{
    background-color: #2380ce;
} 
```

如果我的 css 中有问题将表单扩展到它的容器之外，我找不到它。但这就是我的客户正在使用的 chrome 版本中发生的情况。如何解决这个问题？文本和表单框pe应该完全对齐

**编辑：**新图片链接[imagelink](http://img842.imageshack.us/img842/541/downloadfiled.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:46:58.393

正如这里的人评论的那样，我看不到您提交的图像，因为它引发了“错误：黑客试图非法下载投标附件”。

但是，如果您的客户在 IE8（或旧版浏览器）中遇到问题，则可能是由于您使用了`<section>`标签造成的。如果没记错的话，IE8 不支持 HTML5。尝试将其更改为 a`<div>`并查看它是否有效。

# java - 通过组合而不是继承导入 Maven 插件配置。可以通过构建扩展来完成吗？

> ID：11749375
> 
> 赞同：15
> 
> 时间：2012-07-31T21:36:36.500
> 
> 标签：java, maven, maven-plugin, maven-extension

通过组合而不是继承导入 Maven 插件配置。可以通过构建扩展来完成吗？

我使用 maven 已经 3 年多了，有一个缺点一直困扰着我。现在是时候找到解决方案了。

问题：

我有一个带有 3 个孩子的“爸爸”maven 模块：“男孩”、“女孩”和“孩子”。对于默认的“全新安装”构建，这些子组件中的每一个都必须有自己独特的插件配置集。我不想把那个配置放在孩子们的 poms 上。我宁愿把它放在我以后可以重复使用的地方。

我已经尝试为此使用配置文件，但它不起作用 - 请参阅我在[MNG-5127上的评论和附加项目](http://jira.codehaus.org/browse/MNG-5127)

[通过对daddy.zip](http://jira.codehaus.org/secure/attachment/60738/daddy.zip)项目进行以下更改，我找到了更好的解决方案：

1) 在爸爸的 pom 中，将 [profiles] 替换为具有 [phase]none[/phase] 的插件执行

```
<build>
    ...
    <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>printboy</id>
                    <phase>none</phase>
                    <configuration>
                        <target>
                            <echo message="@@@@@@@@@@@@ HELLO! Iam a BOY project"/>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
                <execution>
                    <id>printkid</id>
                    <phase>none</phase>
                    <configuration>
                        <target>
                            <echo message="@@@@@@@@@@@@ HELLO! Iam a KID project"/>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
                <execution>
                    <id>printgirl</id>
                    <phase>none</phase>
                    <configuration>
                        <target>
                            <echo message="@@@@@@@@@@@@ HELLO! Iam a GIRL project"/>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    ...
</build> 
```

2）在同一个pom上，添加了一个自定义构建扩展

```
<build>
    <extensions>
        <extension>
            <groupId>br.com.touchtec.maven.plugins</groupId>
            <artifactId>execution-enabler-extension</artifactId>
            <version>1.0.0-SNAPSHOT</version>
        </extension>
    </extensions>
    ...
</build> 
```

3) 扩展将根据项目的属性值更改插件执行阶段。Java 代码如下。

```
@Component(role = AbstractMavenLifecycleParticipant.class, hint = "enableif")
public class EnableIfExtension extends AbstractMavenLifecycleParticipant {

    @Override
    public void afterProjectsRead(MavenSession session)
            throws MavenExecutionException {
        String phase = "validate";
        for(MavenProject project : session.getProjects()){
            Properties properties = project.getProperties();
            if(properties != null){
                if("boy".equals(properties.getProperty("project_type"))){
                    setExecutionPhase(project, "printboy", phase);
                    setExecutionPhase(project, "printkid", phase);
                }
                if("girl".equals(properties.getProperty("project_type"))){
                    setExecutionPhase(project, "printgirl", phase);
                    setExecutionPhase(project, "printkid", phase);
                }
                if("kid".equals(properties.getProperty("project_type"))){
                    setExecutionPhase(project, "printkid", phase);
                }
            }
        }
    }

    private void setExecutionPhase(MavenProject project, String executionId, String phase) {
        for(Plugin plugin : project.getBuild().getPlugins()){
            if(plugin.getExecutions() != null){
                for(PluginExecution execution : plugin.getExecutions()){
                    if(executionId.equals(execution.getId())){
                        execution.setPhase(phase);
                    }
                }
            }
        }
    }
} 
```

4) 子模块 poms 只需要定义一个属性来告诉构建扩展做什么，例如男孩项目：

```
<project>
    <properties>
        <project_type>boy</project_type>
    </properties>

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.family</groupId>
    <artifactId>boy</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <parent>
        <groupId>com.family</groupId>
        <artifactId>daddy</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <!-- No "build" section. Beautifull. -->
</project> 
```

像这样在 daddy 项目上调用 mvn clean install ，将输出期望的结果：男孩是男孩，女孩是女孩，两者都是孩子。

问题是：我们能做得更好吗？

理论上，构建扩展可以导入来自不同 pom 的男孩、女孩和孩子的构建配置定义......对吗？这将是一种将 [build] 配置导入 pom.xml 的聪明而优雅的方式。

有很多可用的 Maven 插件，但我没有看到很多（实际上是任何）可以插入构建的可用构建扩展。有谁知道对此有帮助的构建扩展？

* * *

更新

这不是一个实际的答案，但它是我的问题的实际解决方案，所以这里。

> 通过组合而不是继承导入 Maven 插件配置。可以通过构建扩展来完成吗？

大概

> 有谁知道对此有帮助的构建扩展？

我很确定没有

但是，有一个使用配置文件的解决方案。

诀窍是**基于文件的配置文件激活实际上是继承的**（虽然它只适用于 maven3）

请参阅[MNG-5127](http://jira.codehaus.org/browse/MNG-5127)附带的[daddy2.zip](http://jira.codehaus.org/secure/attachment/60790/daddy2.zip)

这比使用构建扩展策略要好得多，因为使用配置文件提供了比仅仅更改几个插件执行阶段更大的灵活性。

* * *

更新 2

> > 有谁知道对此有帮助的构建扩展？
> 
> 我很确定没有

其实有什么！

它作为[MNG-5102](http://jira.codehaus.org/browse/MNG-5102)中的项目附加（由 Maurizio Pillitu 编写）我还没有测试过它，但它似乎与提议的构建扩展非常接近。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:23:51.177

我认为[Maven Tiles](https://github.com/repaint-io/maven-tiles)可以帮助您解决特定的用例。它仍在进行中，但它目前完成了您所描述的工作，我设法“分解”了[wicket-quickstart](http://wicket.apache.org/start/quickstart.html)并成功运行 Jetty，甚至添加了多模块结构。

任何评论或提示都非常受欢迎。谢谢，毛里齐奥

# c++ - 提升 asio 服务队列深度和策略

> ID：11749376
> 
> 赞同：3
> 
> 时间：2012-07-31T21:36:38.080
> 
> 标签：c++, boost, boost-asio

我了解正在运行的 asio 服务就像一个队列，我可以使用它来发布线程将按顺序执行的任务。但是，与任何队列一样，我想也有限制。是否可以为 asio 服务设置此限制？是否可以设置队列满时遵循什么策略（即阻塞、非阻塞等）？

**更新**

假设我有一个运行 asio::service 的线程和一个每 10 毫秒向该线程发布一个任务的计时器。任务接收绑定到一个方法调用，这将使线程休眠 100 毫秒。因此，我有一个计时器每秒向一个线程发布 100 个任务，该线程每秒能够执行 10 个任务。很明显，这种情况会有所不同。然而，在处理队列时，通常有方法来确定队列深度（100？1000？入队的帖子等）或指定发送方在队列已满时应遵循的策略（即它应该等待还是应该丢弃请求并继续？）。我的问题是如何在 asio::service 中设置这些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:34:28.743

Asio 不提供控制内部数据结构的策略。但是，它确实提供了处理程序分配的挂钩：[`asio_handler_allocate`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/asio_handler_allocate.html)和[`asio_handler_deallocate`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/asio_handler_deallocate.html). 应用程序可以使用这些挂钩来限制未完成的异步操作的数量，以及定义达到用户指定限制时的行为。

有几个关键点需要考虑：

*   `asio_handler_allocate`预计会返回一个有效的内存块或抛出一个异常。如果从 抛出异常`asio_handler_allocate`，它将通过调用继续展开堆栈，例如[`io_service::post()`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/io_service/post.html). 因此，对于达到最大值时的非阻塞行为，抛出可能是唯一的选择。
*   考虑对组合操作的影响，例如[`async_read`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/async_read/overload1.html), where`asio_handler_allocate`和`asio_handler_deallocate`可能被多次调用。如果抛出异常，线程的堆栈将至少展开到`io_service::run`被调用的点。如果发生阻塞，那么有可能使所有为反应器服务的线程都被阻塞，从而基本上阻止了所有异步作业的完成。

这是 Boost.Asio 示例中的分配[示例](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/allocation/server.cpp)，显示了用于处理程序的内存池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:07:36.360

我不知道。至于你的例子，你最好在`io_service`'s 线程中有一个计时器，它执行长时间运行的任务并在工作完成后重新安排自己。否则你永远不会清理你的队列。如果你想要一个具有良好时序约束的实时系统——通用操作系统/编程和 boost.asio 都不能胜任这项任务。

# jquery - 如何在 datepicker jquery 上设置小时和分钟，它不应该写得太长

> ID：11749377
> 
> 赞同：0
> 
> 时间：2012-07-31T21:36:39.333
> 
> 标签：jquery, datepicker

当你想打破格式 hh:mm jquery datetimepicker，能够做到。但我希望它阻止。如果你写 hh:mm 像 1231313:98090909099 它不应该被允许。如何设置时间格式，如“hh:mm”。

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:55:00.457

我为 datepicker 提供了 set maxlength 属性。例如 ：

```
$('#datepickerFrom').attr("maxlength", "10"); 
```

所以不允许太长的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:47:43.750

您可以使用 datetimepicker（datepicker 插件的扩展）创建一个只读输入并配置 datepicker 以仅获取小时和分钟：

```
$('#date').datetimepicker({
    timeFormat: 'hh:mm'
});

<input name="date" id="date" readonly="readonly" /> 
```

您可以在这里找到更多信息：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

# git - Git似乎从远程拉取提交，但日志不显示提交

> ID：11749378
> 
> 赞同：2
> 
> 时间：2012-07-31T21:36:47.997
> 
> 标签：git

从远程仓库拉取后，我的本地仓库处于奇怪的状态。

`git log`不显示来自远程仓库的提交。应该更改的文件保持不变。`git status`表明我`branch master`（如预期）使用干净的工作目录。也就是说，从拉扯中找不到任何证据。

但是，如果我`git show`来自远程的特定提交，则会显示该提交的正确更改。怎样才能`git show`正常工作，但我的仓库没有改变并且`log`不显示提交？

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:39:17.857

可能是那些已获取的提交（作为`git pull`您中止或恢复的先前的一部分），但未应用于本地`master`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:21:20.653

你的 git pull 失败了，你很难重置。这意味着你回到了原来的位置。但是 git pull 的一部分是 git fetch。所以你实际上得到了远程分支中包含的对象。要测试你可以看看

```
git log origin/master 
```

如果这没有显示它们，请执行

```
git fetch 
```

这应该只更新远程跟踪分支。要准确查看遥控器上的内容，您可以

```
git ls-remote origin 
```

（假设 origin 是相关遥控器的名称）

请记住，这`git pull`是和的组合`git fetch`（`git merge`或者`git rebase`如果您以这种方式配置它）。

# gradle - Gradle - 包含属性文件

> ID：11749384
> 
> 赞同：56
> 
> 时间：2012-07-31T21:37:15.193
> 
> 标签：gradle

如何在 Gradle 中包含属性文件？

例如在 Ant 中，我可以执行以下操作：

```
<property file="${basedir}/build.properties" /> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-01T01:17:59.347

您可以使用 java 语法来做到这一点，例如：

```
Properties props = new Properties()
InputStream ins = new FileInputStream("/path/file.properties")
props.load(ins)
ins.close() 
```

这应该适用于任何 groovy 脚本。不过，使用闭包或其他一些花哨的快捷方式，可能会有一种更“时髦”的方式。

编辑：“in”是 groovy 中的保留字。变量不能这样命名，将其重命名为“ins”

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-08-01T22:36:52.890

我实际上建议使用 Gradle 的默认属性文件。如果将属性放在`gradle.properties`与 相同的目录中`build.gradle`，它们将自动可用。

请参阅[用户指南](https://docs.gradle.org/current/userguide/build_environment.html)。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-11-02T18:51:45.413

您可能正在寻找的是类似的东西：

```
 Properties props = new Properties()
    props.load(new FileInputStream("$project.rootDir/profile/"+"$environment"+".properties"))
    props.each { prop ->
      project.ext.set(prop.key, prop.value)
    } 
```

然后，您的属性应该可以通过它们的名称直接访问。IE：

```
 println "$jdbcURL"
  println project.jdbcURL 
```

可能有一个原因（阴影？）为什么这样做是个坏主意？不知道为什么它不支持开箱即用或可以在其他地方找到。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-12-17T16:31:27.740

## 对于 Gradle 1.x（在 Gradle 2.x 中已弃用）

要包含您的 .properties 文件，您可以使用以下内容：

```
 apply from: "version.properties" 
```

就是这样！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-19T18:32:28.670

下面是我如何在 Gradle 构建的 .jar 中包含一个 .csv 文件：

```
sourceSets {
  main {
    java {
      srcDir 'src/main/java'
      output.classesDir   = 'build/classes/main'      
    }
    resources {
      srcDir 'src/main/resources'
      include '*.csv'
      output.resourcesDir = 'build/resources/main'
    }
  }
} 
```

然后，当我的应用程序加载资源时，这是独立于 Gradle 完成的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-05T15:27:05.147

使用 GRADLE_USER_HOME 环境变量来设置 gradle 的主目录。放在那里 gradle.properties 文件并设置参数。

[https://docs.gradle.org/current/userguide/build_environment.html](https://docs.gradle.org/current/userguide/build_environment.html)

> 用户主目录中的属性文件优先于项目目录中的属性文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-10T18:52:29.023

除非您想将属性添加到项目中，否则接受的答案有效，因为这是第一个搜索结果，我将添加适用于 gradle 3.x 的解决方案。一个简单的方法是通过蚂蚁。

```
ant {
    property(file: 'properties.file')
} 
```

如果您需要将属性转换为 Camel Case 以便在脚本中轻松访问（请记住基于点的语法期望和实际对象存在于 gradle 中）：

```
println "property value:{dot.property.from.file}" //this will fail.
def camelCaseProperty = project.getProperties().get("dot.property.from.file")
println "camelCaseProperty:${camelCaseProperty}"  //this wont fail 
```

如果未指定，则需要默认值：

```
def propertyWithDefault = project.getProperties().get("dot.property.from.file","defaultValue"); 
```

通过使用这种方法，至少在 IntelliJ/Android Studio 中，IDE 将链接您的属性文件和 gradle 脚本并添加完成、引用检查等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-17T03:43:40.373

我非常想念 Ant 的这个特性，尤其是像`work.dir=${basedir}/work`. 对于我使用的一些大型构建，它们为自动化测试执行大量环境设置，有些任务只需要用户和环境可配置的设置。简单的“gradle.properties”是不够的，尤其是对于跨多个项目共享的设置。

我整理了一个管理合理属性加载方案的示例 gradle 文件：[load-properties.gradle](https://gist.github.com/groboclown/a5cf5622641b2251d18adbe5561015f1)。这让项目可以准确地定义它在`default-properties.gradle`文件中使用的属性，并允许用户定义他们的本地设置来覆盖它们。因为读入的“属性”文件是 gradle 脚本，所以您可以在其中包含额外的逻辑，并且值不仅限于字符串。

此外，它允许通过将“-Penv=(env name)”参数传递给 gradle 来定义要使用的每个环境的属性文件（例如“mac”、“jenkins-machine”或“remote”）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-24T19:10:32.567

在您的任务（jar 或任何其他任务）中，您可以通过这种方式将任何文件包含到目标文件夹中

```
jar{

    //jar task related code

   from("src/main/......(source)") { 
     include 'xxx.properties' into('com/.....(destination)') 

   }

} 
```

# c - 实现自己的内存池

> ID：11749386
> 
> 赞同：21
> 
> 时间：2012-07-31T21:37:24.893
> 
> 标签：c, memory-management

我想预先分配一定数量的内存并将该内存用于程序的其余部分。该程序基本上将为一些字符串和结构分配内存。我该如何实施？哪些数据结构用于存储指针以及如何使用它来给我一个特定的数量？

例如，如果我 malloc 1 MB 的空间并将它放在一个指针`p`中，我如何从中切出 250 KB 的一块？

这只是一个快速而肮脏的实现。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T01:07:06.240

如果您希望能够将内存返回到池中，它会变得更加复杂。但是，对于快速且不太脏的方法，您可能希望实现一些可以再次使用的代码......

```
typedef struct pool
{
  char * next;
  char * end;
} POOL;

POOL * pool_create( size_t size ) {
    POOL * p = (POOL*)malloc( size + sizeof(POOL) );
    p->next = (char*)&p[1];
    p->end = p->next + size;
    return p;
}

void pool_destroy( POOL *p ) {
    free(p);
}

size_t pool_available( POOL *p ) {
    return p->end - p->next;
}

void * pool_alloc( POOL *p, size_t size ) {
    if( pool_available(p) < size ) return NULL;
    void *mem = (void*)p->next;
    p->next += size;
    return mem;
} 
```

根据我的经验，当使用这样的池分配许多对象时，我想预先计算需要多少内存，这样我就不会浪费，但我也不想犯任何错误（比如不分配 enoudh）。所以我把所有的分配代码放在一个循环中，并设置我的池分配函数来接受一个在空池上执行“虚拟”分配的标志。第二次循环时，我已经计算了池的大小，因此我可以创建池并使用相同的函数调用进行真正的分配，并且没有重复的代码。您需要更改我建议的池代码，因为如果尚未分配内存，则无法使用指针算法执行此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-26T09:37:24.963

使用内存池进行内存管理 -

内存池是预先分配相同大小的内存块的方式。例如，同一类的各种对象。因此，更多的是设计软件的“内存模型”。

示例 - 动画 gif 具有各种帧。假设每个帧只需要最大 1024 KB。此外，如果我们知道最多只能有两个帧，那么我们可以通过为每个帧预先分配内存来避免碎片。

[注意] - 内存池更适用于我们在设计时了解系统行为的情况。因此，内存池的概念并不适用于任何地方。//================================================= ============================//名称：MemoryPool.cpp //作者：//版本：//版权：SHREYAS JOSHI / / 说明： //============================================== ================================

```
#include <iostream>
#include <malloc.h>

struct memPool
{

private:

    char *m_poolPtr;
    char *m_nextAvailAddr;
    char *m_endAddr;

public:
    /** Methods for the structure **/
    void poolCreate(size_t size);
    void poolDestroy();
    void * poolAlloc(size_t size);

    memPool():m_poolPtr(NULL),m_nextAvailAddr(NULL),m_endAddr(NULL)
    {
        std::cout<<"memPool constructor Invoked"<<std::endl;
    }

    ~memPool()
    {
        std::cout<<"memPool Destructor Invoked"<<std::endl;
        m_poolPtr = NULL;
        m_nextAvailAddr = NULL;
        m_endAddr = NULL;
    }

};

/** Create a Pool of memory - makes a program hassle free of doing malloc multiple times **/
/** Also, Fragmentation can be avoided with the Memory Pool concept **/
/** A pool concept is useful, when you know at design time.how much memory is required for
the similar type of objects in total**/

void memPool::poolCreate(size_t size)
{
    m_poolPtr = (char *) malloc(size);

    if(m_poolPtr == NULL)
    {
        std::cout<<"Pool Create Failed"<<std::endl;
        //printf("Pool Create Failed \r\n");
    }

    m_nextAvailAddr = m_poolPtr;
    /** note the addressing starts from zero - thus you have already counted zero**/
    m_endAddr = m_poolPtr + size - 1;

    //printf("The Pool Head Pointer = %p \r\n",m_poolPtr);
    std::cout<<"Pool Head Pointer = "<<static_cast<void *>(m_poolPtr)<<std::endl;
    //printf("The Pool m_nextAvailAddr = %p \r\n",m_nextAvailAddr);
    std::cout<<"Pool m_nextAvailAddr = "<<static_cast<void *>(m_nextAvailAddr)<<std::endl;
    //printf("The Pool m_endAddr = %p \r\n",m_endAddr);
    std::cout<<"Pool m_endAddr = "<<static_cast<void *>(m_endAddr)<<std::endl;
}

/** Destroy the entire pool in one shot ********/
void memPool::poolDestroy()
{
    free(m_poolPtr);
    /** Remember free first then assign to NULL **/
    m_poolPtr = NULL;

    /** Update Housekeeping--data structure **/
    m_nextAvailAddr = NULL;
    m_endAddr = NULL;
}

/** Allocate some space from the pool ********/
/** Check if the space is available or not **/
/** Do the housekeeping - update the nextAvail Addr in the structure**/
void * memPool::poolAlloc(size_t size)
{
    void *mem = NULL;

    if( (m_endAddr != NULL) && (m_nextAvailAddr != NULL))
    {

        /** This is according to fencing problem - add 1 when you are find a difference of sequence to calculate the space within **/
        size_t availableSize = m_endAddr - m_nextAvailAddr + 1;

        /** check for the availability **/
        if(size > availableSize )
        {
            //std::cout<<"Warning!! the available size = "<<availableSize<< "requested size = "<<size<<std::endl;
            printf("Warning!! the available size = %u and requested size = %u \r\n",availableSize, size);
            mem = NULL;
        }
        else
        {
            /** store the available pointer to the user**/
            mem = m_nextAvailAddr;
            //printf("The user return pointer is = %p \r\n ",mem);
            std::cout<<"The user return pointer is = "<<static_cast <void *>(mem)<<std::endl;
            /*** advance the next available pointer **/
            m_nextAvailAddr += size;
            //printf("The next available pointer is = %p \r\n ",m_nextAvailAddr);
            std::cout<<"The next available pointer is = "<<static_cast<void *>(m_nextAvailAddr)<<std::endl;
        }

    }

    return mem;
}

int main(int argc, char *argv[])
{
    memPool gifAnimatedImageFramesBlk;

    /** Let's say each frame needs 512 kb **/
    char *gifFrame1 = NULL;
    char *gifFrame2 = NULL;

    char *gifFrame3 = NULL;

    /** 1 MB Pool for the GIF IMAGE FRAMES **/
    gifAnimatedImageFramesBlk.poolCreate(1024*1024*1024);
    /*** 512 KB **/
    gifFrame1 = (char *)gifAnimatedImageFramesBlk.poolAlloc(512*1024*1024);
    //printf("Got the gifFrame1..pointer- == %p \r\n ",gifFrame1);
    std::cout<<"Got the gifFrame1..pointer- == "<<static_cast<void *>(gifFrame1)<<std::endl;

    /** again 512 MB **/
    gifFrame2 = (char *)gifAnimatedImageFramesBlk.poolAlloc(512*1024*1024);

    std::cout<<"Got the gifFrame2..pointer- == "<<static_cast<void *>(gifFrame2)<<std::endl;

    //printf("Got the gifFrame2..pointer- == %p \r\n ",gifFrame2);

    /*************Exhausted the pool memory now **************/

    /** This will fail ****************/
    gifFrame3 = (char *)gifAnimatedImageFramesBlk.poolAlloc(1);

    std::cout<<"Got the gifFrame3..pointer- == "<<static_cast<void *>(gifFrame3)<<std::endl;
    //printf("Got the gifFrame3..pointer- == %p \r\n ",gifFrame3);

    /*****Destroy the Pool now *****************/
    gifAnimatedImageFramesBlk.poolDestroy();

    gifFrame3 = (char *)gifAnimatedImageFramesBlk.poolAlloc(1);

    std::cout<<"Got the gifFrame3..pointer- == "<<static_cast<void *>(gifFrame3)<<std::endl;

    //printf("Got the gifFrame3..pointer- == %p \r\n ",gifFrame3);

    gifFrame3 = (char *)gifAnimatedImageFramesBlk.poolAlloc(1);

    std::cout<<"Got the gifFrame3..pointer- == "<<static_cast<void *>(gifFrame3)<<std::endl;
    //printf("Got the gifFrame3..pointer- == %p \r\n ",gifFrame3);

    return 0;
} 
```

[注意] - 为了在 C++ 中使用 ostream::operator<< 打印 char * 的值，应该使用 static_cast (pointer_Name) 将 char * 类型转换为 void *。问题是如果 C++ 编译器看到 char *，那么它会寻找 NULL 终止符 - '\0'。在这种情况下，没有 NULL 终止符“\0”。因此，您将看到未定义的行为。

内存池的优势

1.  可以避免内存碎片。即使系统需要内存空间，当所需的连续块大小不可用时，malloc() 也会失败。
2.  预留空间，避免频繁使用 malloc() 和 free()。这将节省时间。
3.  当为许多子块调用 malloc() 时，管理/元数据与每个分配的子块相关联。这将消耗不必要的空间。相反，一个大块分配将避免多个管理/元数据。
4.  如果内存空间受到限制，那么很容易调查内存泄漏。如果 Pool 中的内存耗尽，则内存池将返回 NULL。因此，您可以轻松隔离内存泄漏问题。

# bash - Unix 组织脚本

> ID：11749387
> 
> 赞同：1
> 
> 时间：2012-07-31T21:37:35.513
> 
> 标签：bash

所以我现在正在参加一个夏季的 Unix 简介课程，我们需要编写一个脚本，根据文件扩展名将文件组织到目录中。现在我遇到了一个似乎找不到的语法错误。这是我的脚本：

```
#!/bin/bash

echo -e "Are you sure you want to reorganize your files? (Y to continue)"
read response

if [ $response == "Y" ]  ; then 

    echo "Organizing files!"
    touch organize.log
    echo "Organizing..." > organize.log

    mkdir music
    mkdir video
    mkdir text

    for filename in *
    do
        extension="${filename##*.}"

    if [ extension == "mp3" ] || [ extension == "oog" ] || [ extension == "wav" ] ; then

            echo "$filename --> music/$filename" > organize.log
            mv $file music 

    elif [ extension == "wmv" ] || [ extension == "mov" ] || [ extension == "mpg" ] ; then

        echo "$filename --> video/$filename" > organize.log
        mv $file video 

    elif [ extension == "txt" ] ; then

        echo "$filename --> text/$filename" > organize.log
        mv $file text

    done

    echo "Finished organizing files!"
    echo "Bye!"

else
    echo "Ok then. Bye."
    exit

fi

exit 
```

我是 Unix 新手，所以我觉得这很难。如果有人可以给我任何提示，我将不胜感激。

这是新的错误：

```
organizefiles.sh: line 38: syntax error near unexpected token `done'
organizefiles.sh: line 38: `    done    ' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:22:03.280

这是您的脚本的更简洁版本

```
#!/bin/bash

read -p "Are you sure you want to reorganize your files? (Y to continue) " response
if [[ $response != [Yy]* ]]  ; then 
    echo "Ok then. Bye."
    exit
fi

echo "Organizing files!"
# don't need "touch", the file will be created if it doesn't exist.
echo "Organizing..." > organize.log

# use "-p" to avoid errors if the dirs already exist
mkdir -p music video text

# Don't Repeat Yourself, use a function
function moveto {
    echo "$2 --> $1/$2" >> organize.log
    mv "$2" "$1"
}

for filename in *
do
    case "${filename##*.}" in 
        mp3|ogg|wav) moveto music "$filename" ;;
        wmv|mov|mpg) moveto video "$filename" ;;
        txt)         moveto text  "$filename" ;;
    esac
done

echo "Finished organizing files!"
echo "Bye!" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T21:40:08.713

您的`for`循环格式错误。

```
for ...
do
   ...
done 
```

**编辑：**

`if`需要`fi`。

# delphi - 为什么我必须在 OnMouseMove 期间调用 Repaint？

> ID：11749388
> 
> 赞同：3
> 
> 时间：2012-07-31T21:37:37.310
> 
> 标签：delphi, c++builder, repaint

在我的 Delphi / C++Builder 应用程序中，我有一个 OnMouseMove 处理程序，它允许用户通过拖动绘图元素与绘图进行交互。（我们手动实现了必要的拖放逻辑，而不是使用 VCL 的 OnDragOver 等。）

OnMouseMove 事件根据绘图的当前状态更新主窗体和几个子窗体。但是，只要我移动鼠标，主窗体和任何子窗体都不会真正重绘它们的更新状态，除非我在窗体及其每个子窗体上手动调用 Repaint。这有点脆弱，因为很容易错过需要重新绘制的子窗体。

在我停止移动鼠标的那一刻，表单按预期重新绘制，因此控件似乎按预期失效，只要 OnMouseMove 事件/WM_MOUSEMOVE 消息进入，它们就不会重新绘制。（如果我拖动*非常*缓慢，然后屏幕也将按预期重新绘制。）

即使在每个窗体上手动调用 Repaint 也总是不够的，因为除非我单独重绘它们，否则单个子窗体的控件可能不会重绘。（例如，如果我调用其父 TForm 的 Repaint，TEdit 会显示其新值，但我禁用的 TRAdioButton 不会显示为禁用，除非我调用它自己的 Repaint。）

为什么有必要调用 Repaint？为什么当我拖动鼠标时 Windows 不会自动重新绘制我的应用程序的窗口？有没有比尝试手动枚举需要调用 Repaint 的窗口更好的重绘窗口的方法？

通过玩一个简短的测试应用程序，我想知道问题是否是我的 OnMouseMove 事件足够慢以至于 WM_PAINT 消息没有被调度，因为应用程序忙于 WM_MOUSEMOVE？我不确定这是否确实如此，或者如果是这样，该怎么办。

这是一些（希望不会过于简化）代码来说明我在做什么。GraphArea 是一个 TImage，其 Canvas 包含绘图。

```
void __fastcall TMachineForm::GraphAreaMouseDown(TObject *Sender,
    TMouseButton Button, TShiftState Shift, int X, int Y)
{
    if (IsNearAdjustableObject(X, Y)) {
        is_adjusting = true;
    }
}

void TMachineForm::GraphAreaMouseMove(TObject *Sender,
    TShiftState Shift, int X, int Y)
{
    if (is_adjusting) {
        AdjustObject(X, Y);

        /* Draws to the GraphArea TImage by calling GraphArea->Canvas methods */
        RedrawGraphArea();

        /* Updates several standard VCL controls on ChildForm1 and ChildForm2;
         * e.g., ChildForm1->Edit1->Text = CalculatedValue(); */
        NotifyChildForm1OfAdjustment();
        NotifyChildForm2OfAdjustment();

        /* This is where I have to manually call Repaint. I don't know why. */
        GraphArea->Repaint();
        ChildForm1->Repaint();
        ChildForm2->Repaint();
    }
}

void TMachineForm::GraphAreaMouseUp(TObject *Sender,
    TMouseButton Button, TShiftState Shift, int X, int Y)
{
    is_adjusting = false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:48:10.803

有一次，我在使用 VCL 拖放的应用程序中注意到了相同的行为。不知何故，`WM_PAINT`由于发布自己或调用而产生的消息`Invalidate`不会到达消息队列的顶部。

而不是`Repaint`，我建议使用`Update`which 应该更好地处理儿童重绘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:42:49.370

`Repaint()`立即重新绘制调用它的控件。很有可能您的调整逻辑正在对 GraphicArea 和 ChildForms 进行更改，要求它们使用新值重新绘制自己，但它们实际上并不知道需要重新绘制它们，因此它们不会这样做。这可以解释为什么除非您手动触发重绘，否则您看不到任何更改。

我建议使用`Invalidate()`而不是`Repaint()`. `Invalidate()`向操作系统发出需要重新绘制控件的信号，但实际上还没有执行绘制。这让操作系统可以自行管理绘画，并且控件将正常接收来自操作系统的绘画请求，而不是直接从您那里接收绘画请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T14:55:41.580

[Raymond Chen 解释](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/19/10249000.aspx)了 WM_PAINT 消息的工作原理。使窗口无效（无论是通过设置导致窗口无效的 VCL 方法或属性，还是通过手动调用`Invalidate`）有效地导致设置一个标志，表示`WM_PAINT`下次调用时应该传递一条消息`GetMessage`并且没有可用的消息。

据我所知，如果消息的生成速度足够快（例如`WM_MOUSEMOVE`消息）并且处理这些消息的时间足够长，那么消息队列可能永远不会为空，因此`WM_PAINT`消息永远不会被传递。

解决方案是手动调用`Update`（应该比 执行得好一点`Repaint`）或类似的。其他注意事项：

*   重绘所有拥有的表单：我还没有在这里找到一个干净的解决方案，所以我可能会继续手动跟踪拥有的表单并在它们上手动调用 Repaint。（如果需要，我可以遍历 TForm 的组件以查找 TForm，但这会增加可测量的开销。）
*   处理子控件（例如在我的示例中不重绘自身为禁用的 TRAdioButton）：而不是调用`Repaint`or `Update`， use [`RedrawWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162911%28v=vs.85%29.aspx)，它可以指示子窗口也重绘自己。

    ```
    RedrawWindow(ChildForm1->Handle, NULL, NULL,
        RDW_UPDATENOW | RDW_ALLCHILDREN);

    ```

# android - 带有 TabHost 片段的 MapActivity

> ID：11749393
> 
> 赞同：0
> 
> 时间：2012-07-31T21:38:23.233
> 
> 标签：android, android-fragments, android-tabhost, mapactivity

我是 iOS 人尝试迁移到 Android，我需要有人解释/帮助我在这种情况下应该怎么做。我有一个带有 tabhost 片段（3 个标签）的应用程序。此时，我只加载了 3 个不同的简单片段，它工作正常。

现在，我想在第一个选项卡上实现 MapActivity。不幸的是，我不能将它扩展到 MapActivity。它目前已扩展到 Fragment。

我在互联网上搜索，但可以找到解决它的完美解决方案。

此[链接](https://github.com/inazaruk/map-fragment)是解决方案之一，但它使用已弃用的 LocalActivityManager。

**我的问题是我可以只将 2 个片段和一个单独的地图活动加载到片段标签主机中吗？**如果可能的话，你能告诉我如何实现吗？

注意：我基于本[教程](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)构建了我的应用程序标签主机片段。

百万感谢我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:55:18.843

我认为一种解决方案是使用此修改版本的支持库，其中 FragmentActivity 扩展 MapActivity 而不是 Activity：

[https://github.com/petedoyle/android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps)

请记住，您需要在 Activity 类中创建 MapView 对象并将其传递给片段，方式如下：

```
public class MyMapActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Exchanger.sMapView = new MapView(this, "your_api_key");

    }

    public static class Exchanger {
        public static MapView sMapView;
    }
} 
```

并且片段将是

```
public class MapFragment extends Fragment {

    @Override
    public void onCreate(Bundle args) {
        super.onCreate(args);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle data) {

        final ViewGroup parent = (ViewGroup) MyMapActivity.Exchanger.sMapView.getParent();
        if (parent != null)
            parent.removeView(MyMapActivity.Exchanger.sMapView);

        return MyMapActivity.Exchanger.mMapView;
    }

} 
```

`MyMapActivity`在`TabsFragmentActivity`您链接的教程中。记得使用修改版的支持库（[下载链接](https://github.com/downloads/petedoyle/android-support-v4-googlemaps/android-support-v4-r7-googlemaps.jar)）

**上述方法现已弃用。** 您现在可以使用 MapFragment：http: [//developer.android.com/google/play-services/maps.html](http://developer.android.com/google/play-services/maps.html)

# django - 在一个 method.save() 期间修改 Django pre_/post_save 数据

> ID：11749396
> 
> 赞同：0
> 
> 时间：2012-07-31T21:38:49.897
> 
> 标签：django, signals

嗨，我正在编写一个硬件库存应用程序，我想在每次输入新零件时记录，以及任何未来的状态更改/更新。

楷模

```
class Part(models.Model):
    type = models.ForeignKey(PartType, blank=False)
    bar_code = models.CharField(max_length=50, blank=False, unique=True)
    serial_number = models.CharField(max_length=50, blank=False)
    status = models.ForeignKey(Status, blank=False)

class PartLog(models.Model):
    part = models.ForeignKey(Part, blank=False)
    time_stamp = models.DateTimeField(blank=False, auto_now_add=True)
    old_status = models.ForeignKey(Status, related_name='old_status_related', blank=False)
    new_status = models.ForeignKey(Status, related_name='new_status_related', blank=False)

class Status(models.Model):
    current_status = (
     ("EN", "Entered Database"),
     ("CO", "Checked out"),
     ("CI", "Checked in"),
     ("RM", "Returned for RMA"),
     ("IU", "Currently in use"),     
                    )
    status = models.CharField(max_length=2, choices=current_status)

    def __unicode__(self):
        return unicode(self.status) 
```

信号

```
@receiver(post_save, sender=Part)
def add_to_partLog(sender, instance, signal, created, *args, **kwargs):

    if created:
        print "Since a new entry has been created, setting old and new status for partlog entry!"
        # Automatically changing status from Entered state to Checked In state
        # Part Table
        instance.status=Status(3)
        instance.save()

        # Setting Old and New status for the first (new) partLog entry for the new added part
        # Part Log table
        oldStatus = Status(1)
        newStatus = Status(3)
        partobj = Part.objects.get(id=instance.pk)
        PartLog.objects.create(part=partobj,old_status=oldStatus, new_status=newStatus)
    else:
        print "Entry already exists!"
        # Retreiving the old status of the Part() record

        oldStatus = ???
        newStatus = instance.status
        partobj = Part.objects.get(id=instance.pk)
        PartLog.objects.create(part=partobj,old_status=oldStatus,new_status=newStatus) 
```

意见

```
def check_in_part(request):
    err_list=[]
    c = {}
    c.update(csrf(request))

    if request.method == 'POST':
        form = PartForm(request.POST)
        print "form object is created."
        if form.is_valid():  
            form.save()  
            return http.HttpResponseRedirect('/current_count/')    
    else:        
        form = PartForm(initial={'status':1L})
    return render(request,'add_part.html',{
                                           'title':'Add Item',
                                           'form':form
                                           })

# Checking out a part    
def check_out_part(request):
   errlst = []
   c = {}
   c.update(csrf(request))
   # ADD check against DB with the appropriate status "CO" or 3
   if request.method == 'POST':
       form = ModifyPartForm(request.POST)
       if form.is_valid():
           bar_code_form = form.cleaned_data['bar_code']
           try:
               bar_code_model= Part.objects.get(bar_code=bar_code_form)
           except Part.DoesNotExist:
               #FIXME: need to get errlst to user
               errlst.append("Part with bar_code %s does not exist." % bar_code_form)
           else:
                #bar_code_model.check_out()
               bar_code_model.status_id=2L
               bar_code_model.save()
               return http.HttpResponseRedirect('/current_count/')
   else:
       form = ModifyPartForm()
       # Adding default status to Check Out or "CO"
   return render(request, 'remove_part.html',{
                                           'title':'Remove Item',
                                           'form': form,
                                           'errors': errlst,
                                           }) 
```

问题在于信号中的 else 子句。if 的第一部分工作得很好。**我不确定如何在保存之前访问“状态”并在保存后使用它。**现在在一个视图中，当我签入一个新零件时，我将初始状态设为“EN”，然后将其自动更改为“CI”。现在对于 check_out 视图，我只想使用条形码搜索 Part()，并适当地更新和记录两个表。最终，我希望能够在下拉列表中列出的其他状态之间进行选择菜单，但那是以后的=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:50:36.910

我最终在这里缓存了状态对象是我的答案。

```
#Signals.py
@receiver(post_save, sender=Part)
def log_entry(sender, instance, created, raw, *args, **kwargs):
    # Using the statuses from the above method to create a PartLog entry. 
    newStatus = instance.status

    if not created:
        # Get old status from current state
        oldStatus = instance._state.old_status
        PartLog.objects.create(part=instance,
                               old_status=oldStatus,
                               new_status=instance.status)
        instance._state.old_status = newStatus
    else:
        PartLog.objects.create(part=instance, old_status=Status(1), new_status=Status(3))

#Models.py

class Part(models.Model):
    type = models.ForeignKey(PartType, blank=False)
    bar_code = models.CharField(max_length=50, blank=False, unique=True)
    serial_number = models.CharField(max_length=50, blank=False)
    status = models.ForeignKey(Status, blank=False)

    def __init__(self, *args, **kwargs):
        super(Part, self).__init__(*args, **kwargs)
        # Caching the existing Part object's status
        if self.pk:
            self._state.old_status = self.status

    def __unicode__(self):
        return unicode(self.bar_code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:02:29.370

您无法在信号阶段知道该字段的先前值，`post_save`因为该模型不跟踪字段的 pre-post 值。你有两个选择：

1.  缓存`__init__()`模型中的状态字段以及可能的新值`save()`并检查您的`post_save`
2.  对信号中的当前值进行数据库查找`pre_save`并将其缓存在对象上，以便在保存完成后可以引用它。

我倾向于使用第一种方法并避免数据库查询。您必须知道，提前缓存该字段意味着您不能再在查询中延迟该字段，因为您在`__init__`

它可能看起来像这样：

```
class Part(models.Model):
    ...
    def __init__(self, *args, **kwargs):
        super(Part, self).__init__(*args, **kwargs)
        self._status_old_cached = self.status 

@receiver(post_save, sender=Part)
def add_to_partLog(sender, instance, created, *args, **kwargs):
    ...
    else:
        oldStatus = instance._status_old_cached 
```

因为这将立即强制查找该字段，所以请确保您`select_related`提前在查询中使用此字段：

```
Part.objects.select_related('status').all() 
```

如果您实际上并不需要状态对象，而只需要`id`，那么它可能会为您节省查找，因为模型实际上保存了 id：

```
self._status_id_old_cached = self.status_id 
```

# python - wxPython 子类从类中获取属性

> ID：11749397
> 
> 赞同：0
> 
> 时间：2012-07-31T21:39:07.827
> 
> 标签：python, oop, wxpython

我有一个 wxpython 程序，我按照教程将 wx.Dialog 子类化。在对话框中，我创建了一个面板和一个 sizer。

```
class StretchDialog(wx.Dialog):

'''A generic image processing dialogue which handles data IO and user interface.
This is extended for individual stretches to allow for the necessary parameters
to be defined.'''

def __init__(self, *args, **kwargs):
    super(StretchDialog, self).__init__(*args, **kwargs)

    self.InitUI()
    self.SetSize((600,700))

def InitUI(self):
    panel =  wx.Panel(self)
    sizer = wx.GridBagSizer(10,5) 
```

块注释描述了我要实现的功能，本质上是使用它作为基础动态生成更复杂的对话框。为此，我尝试过：

```
class LinearStretchSubClass(StretchDialog):
'''This class subclasses Stretch Dialog and extends it by adding 
    the necessary UI elements for a linear stretch'''

def InitUI(self):
    '''Inherits all of the UI items from StretchDialog.InitUI if called as a method'''
    testtext = wx.StaticText(panel, label="This is a test")
    sizer.Add(testtext, pos=(10,3)) 
```

我通过 InitUI 方法调用子类以便能够扩展，但不会覆盖父类的 InitUI 中的 UI 生成。我无法做的是将面板和可能的 sizer 属性从父级传递给子级。

我尝试了 panel = StretchDialog.panel 和 panel = StretchDialog.InitUI.panel 的许多变体，没有尽头。

是否可以通过子类化父级在 wxpython 中实现这一点？如果是这样，我在尝试访问面板时如何弄乱命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:46:30.910

您在子类中的 InitUI 导致 InitUI 不在 StretchDialog 中调用

你可以这样做

```
class StretchDialog(wx.Dialog):

    '''A generic image processing dialogue which handles data IO and user interface.
      This is extended for individual stretches to allow for the necessary parameters
      to be defined.'''

    def __init__(self, *args, **kwargs):
        super(StretchDialog, self).__init__(*args, **kwargs)

        self.InitUI()
        self.SetSize((600,700))

   def InitUI(self):
       #save references for later access
       self.panel =  wx.Panel(self)
       self.sizer = wx.GridBagSizer(10,5) 
```

然后在你的孩子班

```
class LinearStretchSubClass(StretchDialog):
'''This class subclasses Stretch Dialog and extends it by adding 
the necessary UI elements for a linear stretch'''

    def InitUI(self):
    '''Inherits all of the UI items from StretchDialog.InitUI if called as a method'''
         StretchDialog.InitUI(self) #call parent function
         testtext = wx.StaticText(self.panel, label="This is a test")
         self.sizer.Add(testtext, pos=(10,3)) 
```

# css - 在这种情况下有没有办法反转边界和背景？

> ID：11749403
> 
> 赞同：0
> 
> 时间：2012-07-31T21:40:04.413
> 
> 标签：css, border

我有以下箭头，由一个矩形和一个三角形组成（通过使用边框完成）。我问这个问题是因为我希望能够用渐变填充三角形，并且当前边框不支持渐变。有没有办法与我目前的风格相反？

```
.arrow {
    height: 40px;
    width: 150px;
    background: #4e99b8;
    margin: 20px 0 20px 20px;
    position: relative;
    display: block;
}

.arrow:after {
    content: "";
    position: absolute;
    right: -20px;
    top: 0px;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
    border-left: 20px solid #4e99b8; 
```

# multithreading - 队列条目广播到多个线程

> ID：11749404
> 
> 赞同：0
> 
> 时间：2012-07-31T21:40:06.997
> 
> 标签：multithreading, algorithm, data-structures, queue, producer-consumer

我有一个生成对象并将其放入共享队列的生产者线程。

我已经产生了一堆可以从这个队列中读取的消费者线程。

在理想情况下，我的每个工人都会从队列中接下一份工作。但是对于某些对象（具有特定属性），我的每个消费者线程都需要该对象的副本（没有任何重复）。

我的第一个冲动是在每次推送到队列之前检查对象的该属性。如果该属性存在，则制作 n 个副本（这里 n 等于我拥有的工人数）并将这 n 个副本推送到队列中。

队列需要做一些记账，以防止同一个工作人员多次获得对象。

进行这种簿记的一种方法是拥有一个 Map，其中键是对象，值是一组 worker-id（它可以是 thread-id）。

对于每个弹出请求，队列将检查对象是否已被当前线程 ID 处理。如果 map 中存在 thread-id，它将退出临界区而不从队列中弹出对象，否则它将弹出对象并更新映射。

这种方法的问题在于，单个线程很可能会使其他线程无法访问队列。

有人可以提出一个优雅的方法来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:50:11.503

我的建议：

*   每个消费者有一个队列，
*   将所有消费者要处理的新项目推送到所有队列，
*   将其他项目推到最短的队列，wrt对象的数量（向上和向下计数信号量......）

如果您想花哨，您可以通过其他一些指标来确定*最短*队列，例如累积的对象大小或特定消费者的一些自定义服务质量。

# android - Android：自定义 SearchView 小部件

> ID：11749406
> 
> 赞同：1
> 
> 时间：2012-07-31T21:40:12.913
> 
> 标签：android, searchview

当 SearchView 小部件展开时，我们如何更改出现在左侧的应用程序图标？

这是我的 onCreateOptionsMenu() 代码：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    final TextView tv = (TextView)findViewById(R.id.textView);
    SearchView searchView = (SearchView)menu.findItem(R.id.menu_search).getActionView();
    searchView.setQueryHint("Search");

    return super.onCreateOptionsMenu(menu);
 } 
```

对于 searchView 小部件，我在 xml 中有以下内容：

```
<item android:id="@+id/menu_search" android:title="search"
android:showAsAction="ifRoom|collapseActionView"
android:actionViewClass="android.widget.SearchView" /> 
```

我还查看了默认膨胀的 search_view.xml ( [https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/search_view.xml#L75](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/search_view.xml#L75) )，以检查我是否可以从那里获取元素，然后更改图像。但是我在这个 xml 中找不到任何负责折叠搜索视图小部件的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:28:53.420

尝试这个 ：

```
SearchView searchView = new SearchView(getContext());

OptionCommand searchCommand = new OptionCommand();
searchCommand.setActionView(searchView);
searchCommand.setIcon(getResources().getDrawable(android.R.drawable.ic_menu_search));
searchCommand.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
searchView.setBackgroundColor(Color.WHITE); 
```

# javascript - Javascript 语法：匿名自调用函数

> ID：11749407
> 
> 赞同：2
> 
> 时间：2012-07-31T21:40:12.977
> 
> 标签：javascript

> **可能重复：**
> [自执行功能不起作用？](https://stackoverflow.com/questions/7978219/self-executing-function-doesnt-work)

在Javascript中，为什么

```
function() { console.log('hello'); }(); 
```

给出一个错误，但是

```
function() { console.log('hello'); }() 
```

不是？

编辑：一些答案指出在 Firefox 中都给出了语法错误，但在 Chrome 或 Node.js REPL 中似乎都不是这种情况。此外，

```
(function() { console.log('hello'); }()); 
```

似乎在 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:42:59.393

实际上，这两者都是 SyntaxErrors。

您需要将括号包裹在匿名函数周围，以便可以正确解析它。

```
(function(){alert('eyo')})(); 
```

这定义了函数并立即调用它。定义一个函数并在没有“形成”函数的情况下通过将括号包裹在函数周围来调用它在语法上是无效的。

这里有很好的解释：http: [//benalman.com/news/2010/11/immediately-invoked-function-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

> 幸运的是，SyntaxError “修复”很简单。告诉解析器期待一个函数表达式的最广泛接受的方法就是用括号括起来，因为在 JavaScript 中，括号不能包含语句。此时，当解析器遇到 function 关键字时，它知道将其解析为函数表达式而不是函数声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:41:29.180

```
(function() { console.log('hello'); })(); 
```

你必须调用一些函数，在这种情况下是“（）”

不，任何[语法错误](http://www.evernote.com/shard/s19/sh/c2439c47-db9f-4222-81fe-1b8770f90c00/d83d34db57ed315b972cdc8f48613052)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:45:49.637

后面跟着的匿名函数`()`本质上是您说“立即调用此函数”，但您的语法不正确，因为没有包装父母，`()`则不会附加到任何东西*（有一个例外，如果您将匿名函数设置为相等到一个变量，没关系，但你没有这样做......见评论）。*

所以它必须是这样的：`( function(){} )()`

这样想：

```
1\. ( someExpressionReturnsFunction )(2)
2\. is now: aFunction(2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:56:38.703

正如其他人指出的那样，赋值与表达式存在差异

自执行函数是转换为表达式的函数：

```
// self-executed due to both being an expression, no function declaration.
!function(foo) { console.log('test', foo); }('first');
(function(foo) { console.log('test', foo); })('second');

// long-hand examples of normal usage without expression conversions.
var bar = function(foo) { console.log('test', foo); };
bar('third'); 
```

如果之前的事物是可调用的已声明函数或表达式，则只能在之后传递带有最少括号“（）”的参数。

edit:// 我添加了 negotiator 示例，因为这将导致以下关键字在表达式中被转换。表达式总是返回真或假。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T21:42:39.287

在 Firefox 中，这两行都会产生相同的错误：

> SyntaxError：函数语句需要名称

要解决此问题，只需添加括号：

```
(function() { console.log('hello'); })(); 
```

可能会引发该错误，因为它表示语法错误：

```
function (value) {
    return value * value;
} 
```

很明显，缺少函数名称，并且没有打算使用匿名函数。

因此，匿名函数总是必须作为表达式出现，例如分配一个变量：

```
var a = function() { }; 
```

否则，您需要括号。

# java - 在运行时替换某些方法的内容

> ID：11749409
> 
> 赞同：22
> 
> 时间：2012-07-31T21:40:36.610
> 
> 标签：java, playframework, runtime, classloader, javassist

我想在运行时替换一些方法的内容。

我知道我可以为此使用*javassist*，但它不起作用，因为我想增强的类已经由系统*classLoader*加载。

如何在运行时替换方法的内容？我应该尝试卸载课程吗？我怎样才能做到这一点 ？我看到这是可能的，但我不知道该怎么做。

如果可能的话，我想避免为此使用外部库，我想自己编写代码。

**更多信息：** - 我要增强的类包含在一个框架中（在一个 jar 文件中） - 我的代码实际上是这个框架的一个插件 - 我的插件运行的框架有它自己的*classLoader*，但是这个*classLoader*没有加载自己的类（它将它们委托给系统类加载器） - 我使用的框架是*Play*。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T20:16:36.490

您*可以*使用 Javaassist 以及任何其他字节码工程库来完成它。神奇之处在于**Java Attach API**，它允许程序附加到正在运行的 JVM（并修改加载的类）。

它可以在[`com.sun.tools.attach`](http://docs.oracle.com/javase/7/docs/jdk/api/attach/spec/index.html)包中找到，顾名思义，它是特定于 Oracle JVM 的。尽管如此，JDK 工具喜欢`jstack`并`jmap`使用它来支持它们的“附加到运行的 JVM”特性，所以可以肯定地说它会继续存在。

Attach API 上的文档描述性很强，这篇[Oracle 博客文章](https://blogs.oracle.com/CoreJavaTechTips/entry/the_attach_api)演示了在运行时附加代理。一般来说，它归结为：

*   与等人一起以“常规”`-javaagent`方式制作重新转换程序`premain`
*   重命名`premain`为`agentmain`
*   创建一个临时 JAR 文件，其中包含您的代理类并具有指向`Agent-Class`您的代理（ -包含`agentmain`）类的清单，并`Can-Retransform-Classes`设置为`true`
*   获取目标JVM（可能是同一进程）的PID，并将临时jar附加到它

值得庆幸的是，API 无需您做太多工作就可以做到这一点，但如果您在运行时生成 JAR，打包代理所需的所有类可能会有点棘手。

我希望包含一个演示代理来演示在运行时附加分析器，但它最终太长而无法发布。尽管如此，我还是把它放在了[Github repo](https://github.com/Xyene/ASM-Late-Bind-Agent)中。

**这种方法的一个警告**是，它使您的程序依赖于`tools.jar`JDK 附带的，而 JRE 中不存在。您可以通过`tools.jar`随应用程序一起发布（或提取到应用程序中）来解决此问题，但您仍需要在应用程序中提供`attach`Attach API 所需的本机库。我已经包含了我可以在上面链接的存储库中找到的所有平台的库，尽管您也可以自己获取它们。

根据您的用例，这可能是理想的，也可能不是理想的。但它确实有效！

* * *

这在问题中并不清楚，但是如果您希望做的是在运行时用您自己的类完全“热交换”一个类，您不需要使用任何字节码操作库。相反，您可以单独编译您的类（*确保相同的包、类名等*`transform`）并在目标类上调用时简单地返回新类的字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T21:56:47.300

普通类加载器不支持取消定义或修改已定义的类。因此插件无法修改框架的行为，除非该框架为此类定制提供挂钩。

您可以创建一个自定义类加载器，该类加载器从其父类加载器中*隐藏一些类，而是重新定义它们，添加您可能想要的任何工具。*但是框架在插件之前被加载，并且会使用它自己的类加载器来解析类。因此它将继续使用类的未检测版本。

避免这种情况（我能想到的）唯一合理的方法是先到那里：如果您的代码首先启动，它可以引入一个用于加载框架的类加载器。但这意味着您必须有某种方法将代码作为框架的包装器放入链中。不确定这在您的情况下是否可行。

**更新回复评论：**
为了创建一个包含某些类的类加载器，您必须覆盖其[`loadClass`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String,%20boolean%29)方法。如果您的许可允许使用 GPL 代码，您可以查看[OpenJDK](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/java/lang/ClassLoader.java)在默认实现中是如何做到这一点的。对于那些不想隐藏的类，您只需要遵循父类加载器即可。

隐藏父版本后，您仍然需要修改类。也许[BCEL 类加载器](http://commons.apache.org/bcel/apidocs/org/apache/bcel/util/ClassLoader.html)可以帮助你。或者您从包含修改版本的 jar 文件中加载该类。或者类似的东西。

# android-service - 在我终止服务之前，即使有新通知，通过通知在待处理意图中发送的附加内容也不会更改

> ID：11749410
> 
> 赞同：0
> 
> 时间：2012-07-31T21:40:46.293
> 
> 标签：android-service, android-notifications, android-internet

我有一个由两部分组成的应用程序

1-一系列活动。（登录，然后是仪表板，然后是提要）。2-由推送服务器驱动的后台服务。

每次服务收到推送时，都会创建一个带有待处理 Intent 的通知，此 Intent 添加从推送服务器接收到的字符串附加内容示例：添加字符“N”或“R”

现在，在安装服务应用程序并第一次运行后，附加内容会正确发送到意图中，但是每次服务器通过意图向应用程序发送消息时，附加内容都不会改变，即

如果第一条消息发送“N”，那么所有后续消息都将发送“N”。

由于上面的描述太复杂，我会给你我的代码片段：

这是服务中的代码，它使用挂起的 Intent 创建通知

```
 Notification n = new Notification();            
    n.flags |= Notification.FLAG_SHOW_LIGHTS;
    n.flags |= Notification.FLAG_AUTO_CANCEL;
    n.defaults = Notification.DEFAULT_ALL;      
    n.when = System.currentTimeMillis();
    // The following line displays N or R depending on the message received . 
    Log.d("Received Type: ",text.substr(0,1); // Example "N" from: "N|Notification Text"

    n.icon = R.drawable.notification_icon;
    Intent i = new Intent(this, MyActivity.class);
    i.putExtra("type", text.substr(0,1);
i.putExtra("text", text.substr(2);
    PendingIntent pi = PendingIntent.getActivity(this, 0, i , 0);
    n.setLatestEventInfo(this, NOTIF_TITLE, "Notification: " + text.substring(2), pi); 
```

现在这是从意图接收数据的活动

```
 super.onCreate(savedInstanceState);
setContentView(R.layout.mylayout);
activeWebview  = (WebView) findViewById(R.id.webview);

Intent sender=getIntent();
type = sender.getStringExtra("type");   // Assume this is defined somewhere
text = sender.getStringExtra("text");   // Assume this is defined somewhere
    Log.d( "Type received:" , type );  // This everytime displays "N" 
```

我的问题是，每次收到新通知时，意图中发送的 Extras 都是相同的，除非我终止应用程序和服务并重新启动它，否则它永远不会改变。

好像它保存在内存中的某个地方，我需要清理它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:52:08.610

我想解决方案在这部分：

PendingIntent pi = PendingIntent.getActivity(this, >>>> 0 <<<<< , i , 0);

需要为每种不同类型的通知更改此 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:13:35.763

您需要在待处理的意图中添加标志：

```
PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_UPDATE_CURRENT

PendingIntent pi = PendingIntent.getActivity(this, 0 , i , PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_UPDATE_CURRENT); 
```

否则额外内容不会更新。 [http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT)

# javascript - 无法使用 knockout.js 从下拉列表中更新模型

> ID：11749413
> 
> 赞同：1
> 
> 时间：2012-07-31T21:40:51.723
> 
> 标签：javascript, knockout.js

我在这里有这个样本小提琴 - [http://jsfiddle.net/pRteA/3/](http://jsfiddle.net/pRteA/3/)

问题是我必须在下拉列表中显示所选对象的“名称”。我有些无法仅对 SelectedUser 对象执行此操作。我觉得这与链接到 select html 标记有关。

但是，我仍然可以毫无问题地更新 user.place 对象。我在初始化 2 个对象的方式上找不到任何重大差异。

另外，请注意 sampleUsers 列表实际上每次都作为 Ajax 请求来自服务器，这就是为什么我使用这里描述的方法 -[如何使用淘汰映射？](https://stackoverflow.com/questions/11699398/how-to-use-knockout-mapping)

JS：

```
 var sampleUsers = [{
        Name: 'a',
        Id: 1},
    {
        Name: 'b',
        Id: 2},
    {
        Name: 'c',
        Id: 3},
    {
        Name: 'd',
        Id: 4},
    {
        Name: 'e',
        Id: 5}];

    var userViewModel = {
        user: ko.mapping.fromJS({
            place: {
                country: undefined,
                continent: undefined
            },
            selectedUser: {
                Name: undefined,
                Id: undefined
            }

        }),
        userOptions: ko.mapping.fromJS([])

    }

ko.applyBindings(userViewModel);
ko.mapping.fromJS(sampleUsers, userViewModel.userOptions);​ 
```

HTML：

```
<div>
    <select data-bind="options: userOptions,  optionsText: 'Name', value: user.selectedUser" class="grey-border">
    </select>
</div>Update

<div>
    <span>Country</span>
    <input type='text' data-bind="value:user.place.country" />
    <span data-bind='text:user.place.country'/>
</div>    

<div>
    <span>Continent</span>
    <input type='text' data-bind="value:user.place.continent" />
    <span data-bind='text:user.place.continent'/>
</div> 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:55:10.743

您有几个语法错误，并且不正确地调用映射插件。我真的认为您可能想再次[阅读教程](http://learn.knockoutjs.com)。

这是你的[固定小提琴](http://jsfiddle.net/pRteA/1/)。

1.  您`userOptions`在绑定到“数组”后修改它，这意味着在绑定时它没有属性。
2.  然后，在绑定之后，属性将不会被订阅，因为您更改了对象的结构。
3.  您的跨度绑定路径不包括`()`指定可观察对象所需的内容。
4.  您`selectedUser`的属性声明为内联，但仍通过映射插件构造。这有点浪费。轻微的抱怨。

# c# - 在 C# 中读取 xml 属性

> ID：11749421
> 
> 赞同：0
> 
> 时间：2012-07-31T21:41:29.827
> 
> 标签：c#, xml

我已经搜索了一段时间，找不到解决方案。我有一个从加载到 xmldocument 的 HttpWebRequest 返回的 xml，并且我正在尝试获取请求的特定属性（状态）。返回的 xml 如下。

```
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  >
  <soapenv:Body>
    <processRequestResponse>
      <parameters>
        <ns1:searchResponse status="success" xmlns:ns1="urn:oasis:names:tc:SPML:2:0:search">
          <ns1:pso>
            <ns2:psoID ID="Users:####" xmlns:ns2="urn:oasis:names:tc:SPML:2:0"/>
            <ns3:data xmlns:ns3="urn:oasis:names:tc:SPML:2:0">
              <ns4:attr name="Users.User ID" xmlns:ns4="urn:oasis:names:tc:DSML:2:0:core">
                <ns4:value></ns4:value>
              </ns4:attr>
            </ns3:data>
          </ns1:pso>
        </ns1:searchResponse>
      </parameters>
    </processRequestResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

我用来获取这些数据的代码如下。

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
StreamReader reader = new StreamReader(response.GetResponseStream());
string returnResponse = reader.ReadToEnd();

XmlDocument doc = new XmlDocument();
doc.LoadXml(returnResponse);

XmlNode root = doc.DocumentElement;
XmlNode searchResponse = root.SelectSingleNode("Envelope/Body/processRequestResponse/parameters/searchResponse");
XmlAttribute status = (XmlAttribute)searchResponse.Attributes.GetNamedItem("status");
if (status != null)
{
    string statusReturn = status.Value;
    return statusReturn;
}
else
{
    return "value is null";
} 
```

您可以在状态值中提供的任何帮助将不胜感激。我不断在 xmlattrbute 状态行收到对象引用错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:45:36.867

您的 XML 文档包含名称空间。在任何 XPath 查询起作用之前，您需要考虑 XML 文档中的名称空间。

有关如何在 C# 代码中添加这些命名空间并在 XPath 中引用它们的信息，请参阅[此问题；](https://stackoverflow.com/questions/561822/xpath-on-an-xml-document-with-namespace)或查看[此问题](https://stackoverflow.com/questions/536441/xpath-namespace-driving-me-crazy)以了解如何使用通配符匹配（尽管在您的情况下会变得混乱，因为您必须为每个元素名称都这样做。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:11:37.750

试穿这个尺寸：

```
 const string ValueIsNull = "value is null";
        string returnResponse;

        using (var response = (HttpWebResponse)request.GetResponse())
        {
            if (response == null)
            {
                return ValueIsNull;
            }

            using (var responseStream = response.GetResponseStream())
            {
                if (responseStream == null)
                {
                    return ValueIsNull;
                }

                using (var reader = new StreamReader(responseStream))
                {
                    returnResponse = reader.ReadToEnd();
                }
            }
        }

        var doc = new XmlDocument();

        doc.LoadXml(returnResponse);

        var namespaces = new XmlNamespaceManager(doc.NameTable);

        namespaces.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/envelope/");
        namespaces.AddNamespace("xsd", "http://www.w3.org/2001/XMLSchema");
        namespaces.AddNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");
        namespaces.AddNamespace("ns1", "urn:oasis:names:tc:SPML:2:0:search");
        namespaces.AddNamespace("ns2", "urn:oasis:names:tc:SPML:2:0");
        namespaces.AddNamespace("ns3", "urn:oasis:names:tc:SPML:2:0");
        namespaces.AddNamespace("ns4", "urn:oasis:names:tc:DSML:2:0:core");

        XmlNode root = doc.DocumentElement;

        if (root == null)
        {
            return ValueIsNull;
        }

        var searchResponse = root.SelectSingleNode("/soapenv:Envelope/soapenv:Body/processRequestResponse/parameters/ns1:searchResponse", namespaces);

        if ((searchResponse == null) || (searchResponse.Attributes == null))
        {
            return ValueIsNull;
        }

        var status = (XmlAttribute)searchResponse.Attributes.GetNamedItem("status");

        return status == null ? ValueIsNull : status.Value; 
```

# c# - 如何使用 MIFARE 1k classic 跨多个块写入 NDEF 记录？

> ID：11749432
> 
> 赞同：0
> 
> 时间：2012-07-31T21:42:22.123
> 
> 标签：c#, nfc, mifare, ndef

我用 C# 编写了一个将 NDEF 记录写入 MIFARE 1k 标签的应用程序。我使用 ACR122 非接触式读卡器发送 APDU 命令。

我要写的记录是URI类型的，而且它需要很长，所以这就是我的问题开始的地方。

到目前为止，我能够写入我想要的任何块，但我只能读取第一个扇区（块 4,5 和 6）中写入的内容。块 8 和 9（第二扇区）有内容但无法读取。

由于我无法写入扇区块，因此我从块 6 跳转到了 8。所以，我不确定是否必须设置一个字节来指示消息在另一个块上继续。

有什么想法吗？

我正在使用我的 android nfc enable 来阅读消息...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:58:49.893

有关如何将 NDEF 消息写入和读取 MIFARE Classic 标签的完整文档是公开的，请参阅[http://www.nxp.com/documents/application_note/AN1304.pdf](http://www.nxp.com/documents/application_note/AN1304.pdf)和[http://www.nxp.com/documents /application_note/AN1305.pdf](http://www.nxp.com/documents/application_note/AN1305.pdf)。

在您的情况下必须做的事情归结为：

1.  在扇区 0（= MIFARE 应用程序目录）中写入 NDEF 消息将被存储的扇区
2.  将 NDEF TLV 的字节写入这些扇区的数据块中。

不需要向包含 NDEF 数据的数据块添加任何管理数据。但要小心，正确配置不同的扇区尾块，否则将无法正确检测到 NDEF 消息。

# java - Android MediaPlayer IOException

> ID：11749437
> 
> 赞同：3
> 
> 时间：2012-07-31T21:42:56.780
> 
> 标签：java, android, android-mediaplayer

I'm writing a program in which I need to play a song from storage. I set up a MediaPlayer for this (code fragment below), but kept getting a java.io.IOException: Prepare failed.: status=0x1\. Some websites indicated that this error may occur because the files I am trying to read are not world readable. If this is true, how could I change the file permissions from the program, get around this, or some other solution. If not, please help me figure out what is wrong with this. Thanks in advance.

```
MediaPlayer player = new MediaPlayer();
player.reset();
player.setDataSource(selectedFilePath);
player.prepare();
player.start(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T21:46:24.580

Where are you attempting to read the files from? It's possible that you're looking at the /sdcard/ area, and your application does not have the ability to read_external_storage

If that is the case, just make sure you add the following line to your manifest

```
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

[Edit] I'm not sure where you're trying to load from, but it might help to use a descriptor instead of a path. See if this helps:

```
FileInputStream fis = new FileInputStream(locationOfFile);
mediaPlayer.setDataSource(fis.getFD()); 
```

If this still doesn't help, I would recommend trying another file name to make sure your media player setup is correct. Or you can do something like

```
File thisFile = new File("/storage/sdcard0/Music/song.mp3");
if (thisFile.exists())
   Log.v("file", "Exists");
else
   Log.v("file", "Could not be located."); 
```

# php - 跨同一域的子页面的 PHP 会话

> ID：11749439
> 
> 赞同：5
> 
> 时间：2012-07-31T21:43:03.077
> 
> 标签：php, session

我有一个域 (domain.com)，其中包含多个具有不同会话的子页面（默认情况下），我希望其中一些子页面共享一个会话。

因此，例如我有`domain.com/section1/staff/`and `domain.com/section2/staff/`。我正在使用该`$_SESSION`变量来存储当前登录用户的信息，并且我希望能够登录一次，`section1/staff/`并且在我转到`section2/staff/`.

从阅读[其他帖子](https://stackoverflow.com/questions/5479626/same-domain-different-folder-php-session)来看，这似乎是会话应该工作的默认方式，并且在两个页面中都没有设置域并且路径是“/”，`session_get_cookie_params()`所以它应该是同一个会话，但它不共享`$_SESSION`变量，甚至当我称`session_destroy()`它不会破坏其他会话。

有没有办法明确地将它们设置为使用相同的（或其他地方来查找不会出现在`session_get_cookie_params()`数组中的默认设置）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T02:48:01.123

默认情况下，PHP 将对同一域中的所有脚本使用相同的会话。注意 domain.com 和 www.domain.com 之间的跳动，因为它们可能没有相同的会话。

与其为每个部分创建完全独立的会话，不如为用户使用单个全局会话并将其关闭？没有理由 $_SESSION 不能是多维数组。

```
//// things needed in multiple sections could go into a common grouping:
$_SESSION['common']['user'] = 'josh';
$_SESSION['common']['privileges']['section_access'] = array( 'section1'=>"yes", 'section2'=>"no", 'section5'=>"security-prompt" );

//// while things that were section specific could be grouped by section:
$_SESSION['section1']['agreed_to_terms'] = true;

//// you could also group by logical functionality:
$_SESSION['staff']['badge_no'] = 44815; 
```

使用这种结构，您可以在每个脚本中获得所有可用信息，但只使用您需要的部分。

此外，这让您不必在逻辑中处理 session_name() 和其他棘手的问题。另外，这解决了如何在会话之间共享一些信息（例如当前用户）的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:45:36.733

处理时通常的建议`$_SESSION`是确保[session_start();](http://php.net/manual/en/function.session-start.php) 在所有 PHP 脚本的顶部调用，然后再调用。

例子：

```
<?php // file1.php

session_start();

// other stuff...

$_SESSION['user'] = 'josh';

?>

<?php // file2.php

session_start();

// other stuff...

echo $_SESSION['user']; // should print "josh"

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:00:39.507

问题是一个部分将 URL 强制为 domain.com，而另一部分将其强制为 www.domain.com。

# c# - 从 SQL 服务器表的架构中自动定义 C# 中的 DataTable？

> ID：11749440
> 
> 赞同：4
> 
> 时间：2012-07-31T21:43:09.313
> 
> 标签：c#, sql-server, datatable, sqlbulkcopy

我已经在 SQL Server 中有一些表，我正在编写一个 C# 程序来从一些平面文件中填充这些表。我打算用来`SQLBulkCopy`加载表格。

为 SQLBulkCopy 的每个 DataTable 定义所有列可能需要做很多工作。从现有 SQL Server 表的定义中用 C# 生成这些 DataTables 是否是一种简单的方法？

* * *

我不能使用`Bulk insert`或`bcp`因为平面文件处于不同的奇怪布局中，并且在插入之前必须由一些 C# 代码解析它们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T21:58:15.350

如果您想要蛮力方法，您可以对每个表使用以下内容：

```
 DataTable dt = new DataTable();
    using (SqlConnection conn = new SqlConnection("Some SQLConnectionString")) {
        conn.Open();
        using (SqlDataAdapter adapter = new SqlDataAdapter("SELECT TOP 0 * FROM SomeTable", conn))
        {
            adapter.Fill(dt);
        };
    }; 
```

将`SELECT TOP 0`只返回没有记录的表结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:55:48.327

如果您正在寻找一种将平面文件加载到 SQL 中的快速方法，您可以使用 BULK INSERT。只需指定一个分隔符，只要文件中的列按照与数据库表相同的顺序排列，所有内容都会自动映射。您确实需要一些额外的权限才能执行批量插入，但根据我的经验，这是处理该过程的最快、最有效的方法。

```
BULK INSERT Database.dbo.Table
FROM 'C:\inetpub\website\file.csv'
WITH (FIELDTERMINATOR = ',') 
```

# nginx - Nginx 和 Dropbox 文件夹中的符号链接根目录导致“找不到文件”。

> ID：11749447
> 
> 赞同：3
> 
> 时间：2012-07-31T21:43:54.613
> 
> 标签：nginx, dropbox, php

**原始问题**

> 我在使用 nginx + php-fpm 时遇到了一个奇怪的问题。
> 
> 如果我的根目录设置为类似 `~/playground/apps/foo/public/`，一切正常。
> 
> 如果我`~/playground`对`~/Dropbox/playground`Nginx 的符号链接呈现 **“找不到文件”。**细绳。
> 
> 我首先认为这是一个权限问题，但它不是（用一个简单的 php 文件仔细检查）
> 
> 所以我的问题是：符号链接的根目录是 nginx 和 php-fpm 的问题吗？

**更新**
这肯定是由 Dropbox 引起的。
我做了同样的符号链接舞，一切都很好。但是在 Dropbox 文件夹中对根目录进行符号链接会破坏一些东西。（怀疑权限，但没有看到任何变化）

有什么提示吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T22:16:08.233

我确信这是非常愚蠢的事情。

默认的 Dropbox 文件夹权限过于严格。
A`chmod 755 ~/Dropbox`解决了。

抱歉耽误您的时间，再次感谢。

# c# - 有效地处理/解决大型查询

> ID：11749451
> 
> 赞同：0
> 
> 时间：2012-07-31T21:44:19.970
> 
> 标签：c#, python, sql, sql-server, sql-server-2008

我需要在我的巨大查询中添加另外几个左外连接。这对我来说变得越来越困难，因为查询太大了，我现在无法处理。我想知道是否有某种方法可以将查询自动转换为维恩图。

是否有工具可以进行查询并绘制代表查询的文图？

我正在寻找 sql server、c# 或 python 中的解决方案？

**是否有一种自动化的方式来以图形方式表示查询？**

```
WITH cte_biggie 
     AS (SELECT 
     LEFT('I'+Replicate(' ', 2), 2) 
     + LEFT(CONVERT(VARCHAR, Getdate(), 110)+Replicate(' ', 10), 10) 
     + LEFT('MILLENN'+Replicate(' ', 16), 16) 
     + LEFT('TERR'+Replicate(' ', 12), 12) 
     + LEFT(' '+Replicate(' ', 16), 16) 
     + LEFT('IMS'+Replicate(' ', 8), 8) 
     + LEFT(' '+Replicate(' ', 15), 15) 
     + LEFT( LEFT( LEFT(Isnull(MLIS.requestor_first_name, 'XXX'), 
     Charindex( 
     ' ' 
        , Isnull 
     (MLIS.requestor_first_name, 'XXX') + ' ' ) - 1), Charindex( ' ', 
     LEFT(Isnull(MLIS.requestor_first_name, 'XXX'), Charindex( ' ', 
     Isnull(MLIS.requestor_first_name, 'XXX') + ' ' ) - 1) + 
     ' ' ) - 1) +Replicate(' ', 25), 25) 
     + LEFT(' '+Replicate(' ', 20), 20) 
     + LEFT( LEFT( LEFT(Isnull(MLIS.requestor_last_name, ''), 
     Charindex( 
     ',', 
        Isnull( 
     MLIS.requestor_last_name, '') + ',' ) - 1), Charindex( ',', 
     LEFT(Isnull(MLIS.requestor_last_name, ''), Charindex( ',', 
     Isnull(MLIS.requestor_last_name, '') + ',' ) - 1) + 
     ',' ) - 1) +Replicate(' ', 25), 25) 
     + LEFT(' '+Replicate(' ', 5), 5) 
     + LEFT(' '+Replicate(' ', 3), 3) 
     + LEFT(' '+Replicate(' ', 3), 3) 
     + LEFT(' '+Replicate(' ', 3), 3) 
     + LEFT(Isnull(MLIS.requestor_npi, '')+Replicate(' ', 12), 12) 
     + LEFT('13'+Replicate(' ', 2), 2) 
     + LEFT(' '+Replicate(' ', 15), 15) 
     + LEFT(' '+Replicate(' ', 30), 30) 
     + LEFT(' '+Replicate(' ', 15), 15) 
     + LEFT(' '+Replicate(' ', 4), 4) 
     + LEFT(' '+Replicate(' ', 2), 2) 
     + LEFT(' '+Replicate(' ', 2), 2) 
     + LEFT(' '+Replicate(' ', 1), 1) 
     + LEFT(' '+Replicate(' ', 10), 10) 
     + LEFT(' '+Replicate(' ', 2), 2) 
     + LEFT(' '+Replicate(' ', 20), 20) 
     + LEFT(' '+Replicate(' ', 10), 10) 
     + LEFT(' '+Replicate(' ', 4), 4) 
     + LEFT(' '+Replicate(' ', 100), 100) 
     + LEFT(' '+Replicate(' ', 20), 20) 
     + LEFT(' '+Replicate(' ', 12), 12) 
     + LEFT(' '+Replicate(' ', 2), 2) 
     + LEFT(' '+Replicate(' ', 1), 1) 
     + LEFT(Isnull(SplitAddresses.address1, '')+Replicate(' ', 50), 50) 
     + LEFT(Isnull(SplitAddresses.address2, '')+Replicate(' ', 50), 50) 
     + LEFT(' '+Replicate(' ', 50), 50) 
     + LEFT(' '+Replicate(' ', 50), 50) 
     + LEFT(Isnull(CLIENT.mlis_client_city, 'XXX')+Replicate(' ', 30), 30) 
     + LEFT(Isnull(CLIENT.mlis_client_state, '')+Replicate(' ', 15), 15) 
     + LEFT(Isnull(CLIENT.mlis_client_zipcode, 'XXX')+Replicate(' ', 10), 10) 
     + LEFT(' '+Replicate(' ', 20), 20) 
     + LEFT(' '+Replicate(' ', 9), 9) 
     + LEFT(' '+Replicate(' ', 7), 7) 
     + LEFT(' '+Replicate(' ', 3), 3) 
     + LEFT(' '+Replicate(' ', 1), 1) 
     + LEFT('MILLENN'+Replicate(' ', 10), 10) 
     + LEFT('1'+Replicate(' ', 1), 1) 
     + LEFT('DrScrub'+Replicate(' ', 15), 15) 
     + LEFT(' '+Replicate(' ', 10), 10) 
     + LEFT(' '+Replicate(' ', 101), 101) PHYSICIAN_INFO 
         --+LEFT(' '+REPLICATE(' ',1),1)  
         FROM   (SELECT DISTINCT mlis_practice_id, 
                                 requestor_npi, 
                                 requestor_first_name, 
                                 requestor_last_name 
                 FROM   complete 
                 WHERE  
                         Len(requestor_last_name) > 0 
                         ) MLIS 
                LEFT JOIN (SELECT * 
                           FROM   millennium_dw..d_physician 
                           WHERE  received_ims_information = 1) PHYSICIAN 
                       ON MLIS.requestor_npi = Cast(PHYSICIAN.physician_npi AS 
                                                    VARCHAR) 
                --we can remove this cast later 
                LEFT JOIN (SELECT * 
                           FROM   millennium_dw..d_client 
                           WHERE  rec_active_flg = 1) CLIENT 
                       ON MLIS.mlis_practice_id = CLIENT.client_id 
                LEFT JOIN (SELECT DISTINCT T.mlis_client_address_1, 
                                           T.client_id, 
                                           LEFT(T.mlis_client_address_1, Isnull( 
                                           SplitAddresses.pos - 1, 
                                           2147483647)) 
                                           Address1, 
                                           Substring(T.mlis_client_address_1, 
                                           SplitAddresses.pos + 1, 
                                           2147483647) Address2 
                           FROM   d_client T 

                                  OUTER apply (SELECT TOP 1 NULLIF( 
                                              Patindex(delimiter, 
                                              T.mlis_client_address_1), 0 
                                                            ) Pos 
                                               FROM 
                                  ( VALUES ('% Suite %'), 
                                           ('% Ste %'), 
                                           ('% Bldg %'), 
                                           ('% Building %'), 
                                           ('%#%') ) SplitAddresses 
                                  ( 
                                  delimiter) 
                                               WHERE  T.mlis_client_address_1 
                                                      LIKE 
                                                      splitaddresses.delimiter 
                                               ORDER  BY pos) SplitAddresses) 
                          SplitAddresses 
                       ON SplitAddresses.client_id = CLIENT.client_id 
         WHERE  PHYSICIAN.physician_npi IS NULL 
                AND CLIENT.received_mlis_information = 1
                AND LEN(address1)>0
                AND LEN(CLIENT.mlis_client_state)>0
                AND address1!='NO ADDRESS'
                ) 
--AND MLIS.REQUESTOR_NPI IS NOT NULL) 
SELECT * 
FROM   cte_biggie 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:00:34.693

一次可以根据查询构建 CTE：

```
DECLARE @start_date AS DATETIME = '2012-02-02'; 
WITH L0 AS (SELECT 1 AS C UNION ALL SELECT 1),       --      2 
     L1 AS (SELECT L0.C FROM L0 CROSS JOIN L0 AS B), --      4 
     L2 AS (SELECT L1.C FROM L1 CROSS JOIN L1 AS B), --     16 
     L3 AS (SELECT L2.C FROM L2 CROSS JOIN L2 AS B), --    256 
     L4 AS (SELECT L3.C FROM L3 CROSS JOIN L3 AS B), --  65536 
      N AS (SELECT ROW_NUMBER() OVER(ORDER BY L4.C) AS n FROM L4), 
      D AS (SELECT DATEADD(SECOND, n - 1, @start_date) AS d, n FROM N) 
SELECT d from D where n <= (60 * 60 * 24) 
```

请注意，最终`SELECT`可以使用任何或所有 CTE 中间结果。这可以大大简化开发和测试。

**编辑**：在你的情况下是这样的。

```
WITH 
  MLIS as ( -- Description of what this piece is supposed to mean.
    SELECT DISTINCT mlis_practice_id, requestor_npi, requestor_first_name, requestor_last_name  
      FROM complete  
      WHERE Len(requestor_last_name) > 0 ),
  Physician as ( -- Description of what this piece is supposed to mean.
    SELECT *
      FROM millennium_dw..d_physician  
      WHERE received_ims_information = 1 ),
  Client as ( -- Description of what this piece is supposed to mean.
    SELECT *  
      FROM millennium_dw..d_client  
      WHERE rec_active_flg = 1 ), 
  cte_biggie as ( -- Something I've totally bodged that should use the above CTEs.
    SELECT LEFT('I'+Replicate(' ', 2), 2), ... )
SELECT * from CTE_Biggie 
```

# facebook - 新的身份验证对话框 - 你如何让它显示？

> ID：11749457
> 
> 赞同：1
> 
> 时间：2012-07-31T21:44:54.883
> 
> 标签：facebook, oauth

如何为 Facebook 应用启用新的身份验证对话框？我有一个使用 FB 身份验证的网站，但我无法让它显示新的身份验证对话框。

我已经尝试了服务器和客户端身份验证流程，但没有运气让新的身份验证对话框显示:(。

此链接[http://developers.facebook.com/docs/opengraph/authentication/](http://developers.facebook.com/docs/opengraph/authentication/) 表示启用增强的身份验证对话框，但我没有看到启用选项？

此链接[http://developers.facebook.com/blog/post/633/](http://developers.facebook.com/blog/post/633/)也谈到了启用 Auth Dialog 但不是如何做到这一点。

我已经编辑了我的应用程序并设置了所有基本信息、身份验证对话框信息和我没有更改的高级信息。我的应用程序未处于沙盒模式。

我错过了什么？

**更新（中部标准时间晚上 11:00）：**

我创建了另一个 FB 应用程序，它立即显示新的 oAuth 对话框。所以我进去比较了我的新 FB 应用和旧 FB 应用的设置。

当然，我的新 FB 应用程序的高级设置不如新的 FB 应用程序 :(。

新的 FB 应用程序在 Apps -->Advanced-->Migrations 部分下具有以下设置这些是默认设置：

*   流发布 URL 安全性（已禁用）
*   移除 offline_access 权限（启用）
*   强制为 auth.login 使用登录密码（禁用）
*   2012 年 8 月的重大更改（已启用）
*   2012 年 9 月的重大更改（已启用）
*   2012 年 10 月的重大更改。（启用）。

    不显示 OAuth 对话框的 FB 应用程序在 Advanced-Migrations 设置中有这些额外设置。

*   包括带有状态的签到（已禁用）
*   外部页面迁移（已禁用）

    如果 FB 的任何人都可以回应正在发生的事情，那就太好了。我很久以前没有创建不显示 OAuth 对话框的应用程序。

    为什么我刚刚创建的那个工作？

    我的应用程序显示 OAuth 对话框的所有设置应该是什么？

    谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:11:37.167

我继续使用客户端身份验证流程，现在为我显示新的 oAuth 对话框。

# objective-c - 使用应用程序 didReceiveRemoteNotification 处理程序获取推送通知消息

> ID：11749462
> 
> 赞同：2
> 
> 时间：2012-07-31T21:45:19.130
> 
> 标签：objective-c, notifications, push-notification, apple-push-notifications

是否可以使用此应用程序的实现来获取通过远程通知向用户显示的消息，并接收远程通知方法？

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
        NSString *message;
        // code to set the string "message" to the remote notification's message...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-29T02:37:03.873

我知道这是一个老问题，但我一直在绞尽脑汁试图解决这个问题，所以我想我会分享知识以节省其他人的时间。

首先，您应该为您的文本创建一个 NSString 引用，以便您以后可以快速访问它。要做到这一点：

```
NSString *alertMessage = [[userInfo objectForKey:@"aps"] objectForKey:@"alert"]; 
```

如果您需要对本地通知执行此操作，您可以执行以下操作：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
NSDictionary *dict = [notification userInfo];

NSString *alertMessage = [[dict objectForKey:@"aps"] objectForKey:@"alert"];

//Do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:37:24.990

您可以通过访问在 userInfo 字典中解析的 JSON 来获取它，如果您像这样打印出您的 userInfo Dicitonary 对象：

NSLog(@"userInfo: %@", userInfo);

你会得到你需要的所有信息。

# jquery - 使用 JQuery 嵌入外部 HTML 文件

> ID：11749464
> 
> 赞同：0
> 
> 时间：2012-07-31T21:45:19.200
> 
> 标签：jquery, html, import

我正在处理需要使用 JQuery 的“加载”命令将一个 HTML 文件导入另一个的页面。它应该相当简单——它会引入站点标题的内容（徽标图像、搜索框、菜单栏）。

在我的测试页面上它可以工作，但在现场店面它不起作用，我不知道为什么。

这是我的 JS 文件中的行 - 非常简单：

```
$("#x-head").load('http://www.sunandfuninoc.com/testingsites/jxinstalls/topparts/ebay/head.html'); 
```

应该填充的 HTML div 在我的主页上如下所示：

这是运行良好的测试页面：http: [//www.sunandfuninoc.com/testingsites/jxinstalls/topparts/ebay/store.html](http://www.sunandfuninoc.com/testingsites/jxinstalls/topparts/ebay/store.html)

这是根本没有加载的实时站点： http: [//stores.ebay.com/Top-Parts-Store](http://stores.ebay.com/Top-Parts-Store)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:54:14.277

这是由于 JavaScript 在相同的源策略下运行。

除非服务器明确允许，否则在使用 AJAX 时，您不得从单独的远程服务器（即您正在运行的服务器以外的服务器）提取内容。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

除非您调用的服务器允许跨域调用，否则您唯一的选择是不通过 jQuery 而是通过服务器端代理加载页面，例如通过[cURL](http://php.net/manual/en/book.curl.php)的 PHP 。服务器端语言通常不受此限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:53:33.803

它适用于第一种情况，因为您发出的请求与其托管的网站位于同一域中。在第二种情况下，`store.ebay.com`正在发出请求，并且由于现代浏览器中的安全功能，不允许跨域请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:55:50.480

**1.** `load();`如果您使用的 url 在同一个域下，将起作用。

**2.**如果您想加载外部内容，例如`store.ebay.com`使用代理，如果您使用的是 PHP，您可以制作一个 PHP 文件，使用 cURL 从该站点获取源代码。否则您将无法实现您想要的`Access-Controll-Allow-Origin`规则原因（这意味着您可以加载不在您的域中的外部内容）。

# android - TextView setText 改为追加

> ID：11749465
> 
> 赞同：0
> 
> 时间：2012-07-31T21:45:21.480
> 
> 标签：android

嗨，我试图在由线程运行的方法中使用 .setText 设置 textview 的值，但它被附加到 TextView 中。参数 String f 是在 for 循环中发送到方法的，如下所示：

```
 for (int j = 0; j < 5; j++) {
        String[] string = array[j].split(":");
        String y= string[0];
        String x= string[1];
        determineSeat(y, something, x);
    }
}

private void determineSeat(String is, String cs, String f)
{
            TextView txtHand = null;
    String txt = null;

    if (iSeat < cSeat) {
        x = cSeat - iSeat;

        if (x == 1) {
            txtHand = (TextView) findViewById(R.id.txtHand8);
            txt = txtHand.getText().toString();
            txtHand.setText("");
            txtHand.setText(txt + ":"  + f);
        }
} 
```

XML:

```
<TextView
    android:id="@+id/txtHand1"
    android:layout_width="73dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:text=" " /> 
```

我希望每次我在文本视图中放一些东西而不是被附加时都将其清除，有人知道问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:53:20.843

您将其设置为`"txt + ":" + f"`. `"txt"`被定义为文本视图中已经存在的任何内容。如果您只想在`"f"`每次调用该方法时将其设置为，请按原样执行`"txtHand.setText(f);"` ，您要求它获取当前文本视图中的任何内容，并添加一个冒号和`"f."`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:50:05.807

我认为您正在为此 var 分配当前文本：

```
txt = txtHand.getText().toString(); 
```

然后`:f`用这条线把它放在前面

```
txtHand.setText(txt + ":"  + f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:51:07.407

我认为这是因为您每次都在循环内初始化一个新的文本框对象，然后将其内容附加到新的文本框对象。您应该在循环外声明并初始化文本框。

```
TextView txtHand = (TextView) findViewById(R.id.txtHand8);

for (int j = 0; j < 5; j++) {
        String[] string = array[j].split(":");
        String y= string[0];
        String x= string[1];
        determineSeat(y, something, x);
    }
}

private void determineSeat(String is, String cs, String f)
{
    String txt = null;

    if (iSeat < cSeat) {
        x = cSeat - iSeat;

        if (x == 1) {
            txtHand.setText(":"  + f);
        }
} 
```

字符串是什么，cs是什么

# c# - 将 NetworkStream 复制到 MemoryStream 需要无穷 ∞ 天

> ID：11749467
> 
> 赞同：3
> 
> 时间：2012-07-31T21:45:33.437
> 
> 标签：c#, .net, network-programming, streaming

我有以下代码：

```
_clientRequestStream = _tcpClient.GetStream();

var memoryStream = new MemoryStream();
_clientRequestStream.CopyTo(memoryStream); 
```

`CopyTo`需要很长时间很长时间才能将一个复制`Stream`到另一个`Stream`。似乎应用程序无缘无故地停在那里，或者至少我找不到原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T21:49:57.470

网络流保持打开状态，直到它被流的一端关闭。CopyTo() 复制流中的所有数据，等待流结束。如果服务器没有发送数据，则流不会结束或关闭，CopyTo() 会尽职尽责地等待更多数据或流结束。流另一端的服务器必须关闭流才能结束并返回 CopyTo()。

谷歌“TcpClient 教程”或“TcpCLient 示例”以获得一些不错的页面，展示您可能使用它们的其他方式，例如检查 NetworkStream.DataAvailable 以查看是否有数据等待或流是否仍然打开而没有数据。要仅读取一些数据而不等待流关闭，您可以使用 NetworkStream.Read() 或将其包装在 StreamReader 中并使用 ReadLine()。这完全取决于您要连接的服务器以及您要完成的工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T22:09:34.793

TCP 是一种流协议。字节可以以任意速率流动。理论上你可以得到一个字节，然后几秒钟后得到 10 个字节，几分钟后得到两个字节。

TCP 本身作为一种协议是没有用的。

必须有一个高阶协议，其结构允许检测“消息”的开头和结尾。我们无法猜测您正在收听的高阶协议，您必须知道才能收听。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T22:11:44.063

我相信这将无限期地阻塞，直到底层连接关闭，在这种情况下，我假设它会抛出一个 IOException。小心将 NetworkStream 视为普通流。TCPClient.GetStream() 是一个很好的抽象，它为您节省了直接使用 Socket 的麻烦，但是使用 NetworkStream 的同步操作很容易陷入这样的陷阱。值得查看 NetworkStream 上的特定 MSDN 文档。

Here's a nice example of using async sockets as opposed to TCP client: [http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

# grails - 如何一步保存“根”域类树？

> ID：11749473
> 
> 赞同：3
> 
> 时间：2012-07-31T21:45:46.227
> 
> 标签：grails, grails-orm

我在 Grails 中有一个类似的树结构：

```
class TreeNode {
  String name
  // more properties
  List children = []
  static hasMany = [children: TreeNode]
  static belongsTo = [parent: TreeNode, root: TreeNode]
  static mappedBy = [children:'parent']

  static constraints = {
    name(blank: false,maxsize: 100,)
    parent(nullable:true)
    root(nullable:false)
  }
} 
```

出于 SQL 性能原因，我需要每条记录都直接引用其根节点。因此，“根”属性。

在我添加“root”之前，节点已正确保存。也就是说，我可以在根节点上调用 save() ，并且在所有节点中都正确分配了 parent_id 字段（根节点本身除外，其父 ID 保持为空）。

我试图在 beforeInsert() 中分配“根”，方法是向上走树直到找到父级。

```
def beforeInsert = {
  def node = this
  while (node.parent) {
    node = node.parent
  }
  root = node 
} 
```

我经常遇到堆栈溢出异常。

```
at org.codehaus.groovy.grails.orm.hibernate.validation.HibernateDomainClassValidator.cascadeValidationToOne(HibernateDomainClassValidator.java:116)
    at org.codehaus.groovy.grails.validation.GrailsDomainClassValidator.cascadeToAssociativeProperty(GrailsDomainClassValidator.java:142) 
```

当堆栈溢出异常没有发生时，每个“根”引用自己而不是最终根。beforeInsert() 没有爬树。

你能帮我解决这个问题吗？GORM 会尝试以深度优先方式保存我的树结构吗？如果是这样，如果父级尚未持久化，它如何保存父级 ID？最重要的是，如何通过在根节点上调用 save() 来保存树，这样的“根”设置正确，而无需在 save() 之后（立即）更新所有节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:18:31.350

Well, by always keeping a root node updated you'll find yourself constantly iterating over the tree, which is the opposite you want by keeping a reference to the root node. But if you really want to keep a root node, you could try this structure:

```
Class TreeNode {
    String name
    TreeNode parent
    TreeNode root

    static hasMany = [children: TreeNode]

    TreeNode getRoot(){
       //of course, if parent is null, it means, you're already in the root node.
       if(parent){
          return parent.getRoot()
       }else{
          return this
       }
    }
} 
```

So you don't have to worry about explicitly updating your root node every single time. Just set the children nodes and you're done. Root can be found dinamically (but again, you will be iterating in the tree one way or another). Plus it's a cleaner mapping, I guess ;)

**EDIT**: I put another reference (to root). So you can choose if you use the getRoot method to set it dinamically or not. In any case, every node will have a reference to the root.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:58:42.963

`root`由于引用`this`和验证进入无限循环，所以必须发生。尝试更改为：

```
if (!parent) {
  root = this
  return
}
def node = parent
while (node.parent) {
  node = node.parent
}
root = node 
```

如果一个节点引用自己而不是根 - 这意味着您`parent`（错误地）没有分配。

GORM 从您调用的实例开始`save()`，并首先保存其所有子项（即`belongsTo`该实例）。所以，树应该保存在`ultimateRoot.save()`.

# iphone - 将多个异步调用放入队列中

> ID：11749482
> 
> 赞同：1
> 
> 时间：2012-07-31T21:46:30.813
> 
> 标签：iphone, objective-c, ios, cocoa-touch, gdc

我有几个异步调用，我会在一个调用中合并：

```
-(void) loadA:(ArrayBlock)completion failure(FailureBlock):failure;
-(void) loadB:(ArrayBlock)completion failure(FailureBlock):failure;
-(void) loadC:(ArrayBlock)completion failure(FailureBlock):failure; 
```

使用上述调用的组合方法：

```
- (void) loadAll:(ObjectBlock)completion; 
```

完成块包含一个具有三个数组的对象，称为`array[A-C]`. 如果任何子调用失败，则对象中的相应数组被简单地设置为 nil。

**而不是嵌套这三个块并在前面的失败或**完成时调用下一个（这真的很混乱） - 我想使用 GCD 执行以下操作：

1.  将所有呼叫添加到队列
2.  等到所有调用完成（调用成功或失败块）
3.  合并完成块的所有结果并调用方法的完成块`loadAll`。

我知道这在具有同步调用的 GCD 中是可能的，但我不知道如何通过我的三个异步“子调用”来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:45:09.723

阅读调度组 - 您可以对它们进行同步等待。真的，混乱是错误的词 - 有点复杂可能会更好地说明它。我在嵌套调度块和使用组等待中间结果方面非常幸运。您还可以使用 dispatch_async_barrier 来防止已经在队列中的块在该块被执行之前完成。块也可以将块添加到它们的调度队列中！

我记得存在依赖关系，但我现在在 CGD 文献中找不到该部分。

我真正建议你做的是用铅笔在一张纸上画出来，一旦你说服自己，你就会知道它是如何工作的，然后开始编码。

# ios - UITextField + 安全文本条目。取消屏蔽刚刚输入的字符？

> ID：11749484
> 
> 赞同：0
> 
> 时间：2012-07-31T21:46:43.117
> 
> 标签：ios, uitextfield

我正在使用 UITextField + secureTextEntry 来捕获密码。SDK中是否有一个属性可以让我只显示刚刚输入的字符大约半秒钟然后屏蔽它？我正在寻找类似于 Apple 在其所有默认应用程序（如 Appstore 等）中所做的事情。

我在文档本身中没有找到与此相关的任何内容。如果我需要自己构建它，我应该如何处理？我可以想到一种丑陋的方式，我们会在现有文本字段上临时添加另一个 UITextField 并在其中显示字符，但可能有更简单的方法？

谢谢，
泰加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:54:52.230

UITextField.secureTextEntry = YES 应该可以工作。

# c# - 是否可以通过 TFS 2010 工作流程创建和使用自定义 x86 CodeActivity？

> ID：11749490
> 
> 赞同：1
> 
> 时间：2012-07-31T21:46:58.677
> 
> 标签：c#, workflow-foundation, biztalk

我正在尝试创建一个自定义 CodeActivity 以与 TFS 2010 一起使用。到目前为止，我的大部分工作都基于这个[系列](http://www.ewaldhofman.nl/post/2010/04/29/Customize-Team-Build-2010-e28093-Part-4-Create-your-own-activity.aspx)（感谢 Ewald 对此表示感谢）。

一切都很好，直到我打到第二个为止。我正在尝试使用 Microsoft.BizTalk.ExplorerOM.dll 进行一些 BizTalk 配置。对 dll 的抱怨之一是它只是 x86，并且是来自 Microsoft 的内部 dll，我无法控制。我之前在 VS2008 中做过相同的任务，我基本上只是想将相同的功能转移到 VS2010，清理它，并将其集成到工作流程中。

当我第一次从 ExplorerOM 添加代码时，出现以下错误：

**64 位进程不支持 Explorer OM。**

将支持项目更改为 32 位后，我得到以下信息：

**无法创建未知类型“{clr-namespace:BizTalk.Deployment.CodeActivities;assembly=BizTalk.Deployment.CodeActivities}UndeployBizTalkBindings”。**

在网络上进行一些研究后，我相当确定这是由于 64 位构建过程无法加载我现在的 32 位 dll。

有没有办法将构建过程本身指定为 32 位？我没有在 TFS 中看到任何设置。我曾考虑通过一个简单的 32 位控制台应用程序运行代码并使用 InvokeProcess 活动，但我担心如果无法访问上下文对象，我将无法获得我希望实现的日志记录粒度。这项工作将相当参与。

关于如何做到这一点的任何想法？我也愿意接受其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:52:48.627

在 Windows 服务中托管 WCF 服务怎么样？如果您在服务中实现会话，您应该能够维护上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:10:12.337

所以事实证明，实现这一点的最佳方法是通过 InvokeProcess 活动。我能够编写一个小型命令行实用程序并使用它调用它。标准输出可以通过 InvokeProcess 活动本身连接到 tfs 系统，从而保持日志记录和信息集中。

从理论上讲，对于任何需要调用 32 位进程的场景，都可以使用小型命令行包装器轻松重复此模式。

# php - 在开发过程中保证资源重新加载（通过 ajax）的好策略是什么？

> ID：11749491
> 
> 赞同：0
> 
> 时间：2012-07-31T21:47:11.917
> 
> 标签：php, javascript, html

我一直无法找到将数据重新加载到浏览器的方法。

例如在 FF 10 - 按下 Control-Shift-R 应该会这样做。有时会，有时不会。

我已经读过，如果您更改所请求资源的 URL，浏览器将重新加载数据作为新数据。我相信这一点。我要实施它。

我要做的只是我们 PHP 通过附加一个 unix 时间戳来更改文件名。这将在每个资源请求上完成。

我正计划编写一个 PHP 维护脚本（比如 updateResource.php ）来重命名资源，同时编写将名称设置到 PHP 脚本中的 PHP 代码。

所以对于我的 .js 资源

```
file1.js 
```

变成

```
file1_timestamp.js 
```

和

php文件的内容来自

```
$file_name = file1.js

$file_name = file1_timestamp.js 
```

PHP 稍后写入 .htm 文件，然后 javascript 知道从 DOM 中提取并通过 Ajax 调用动态加载文件。

这一次它没有被缓存，因为 URL 发生了变化。

这是保证重新加载的好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:49:51.293

强制客户端重新加载，`script.ts?v.xx`效果很好并且被广泛使用。在编译时将 xx 替换为应用程序的当前版本。这样您就不必重命名文件。

# jquery - 通过 django 表单以编程方式使用 jquery 隐藏/显示字段

> ID：11749492
> 
> 赞同：0
> 
> 时间：2012-07-31T21:47:13.587
> 
> 标签：jquery, django, html

我正在尝试构建一种基于复选框来管理隐藏和显示某些字段的通用方法。在我的项目中，通常某些表单可能包含一个检查字段，如果选中该复选框，它将与其他字段相关联，并且它们将根据复选框显示或隐藏。

我是 javascripting 的新手，希望有人能帮助我在这里保持正确的道路。在我的 django 表单中，我使用 data 属性来指示复选框和 data 字段的标志，以指示将影响哪些字段，如下所示：

```
class PackageForm(forms.ModelForm):
    '''
    PackageForm
    '''
    class Meta:
        model = Package
        widgets = {
            'recurring_flag'      : CheckboxInput(attrs={'data-collapse-flag' : 'True'}),
            'recurring_type'      : Select(attrs={'data-collapse-id' : 'recurring_flag'}),
            'recurring_period'    : TextInput(attrs={'data-collapse-id' : 'recurring_flag'}),

        } 
```

当然，根据我在 jquery 中的有限知识，我能够静态编写它，如下所示

```
$(document).ready(function() {

    $('input[data-collapse-flag]').click(function() {
       if ($(this).is(':checked')) {
           $("label[for='id_recurring_type']").show();
           $('#id_recurring_type').show();
           $("label[for='id_recurring_period']").show();
           $('#id_recurring_period').show();
       }else{
           $('#id_recurring_type').hide();
           $("label[for='id_recurring_type']").hide();
           $('#id_recurring_period').hide();
           $("label[for='id_recurring_period']").hide();
       }
    }); 
```

});

但是，我真的想创建一个单独的 javascript 文件来读取 data-collapse-flag 并构建一个操作来循环使用 data-collapge-id 的任何字段来应用该操作。因此，只要需要这种情况，我就可以在我的所有表单中通用地使用该脚本。

如果有人可以建议我如何构建这样的东西或向我指出该方法，非常感谢。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:52:02.193

就像一些概念支持一样：您想要的是循环遍历给定元素的后代并基于开关添加行为，对吗？

你想尝试类似的东西：

*   在适当的位置添加类名：“collapse-stack”、“collapse-label”、“collapse-list”（标签和列表甚至可能只是“可折叠”）。
*   让 jQuery 循环遍历这些通用项。

像：

```
 $(document).ready(function() {
       $('.collapse-stack').each(function(){
            //this = current collapse stack
            $(this).click(function() {
                if ( $(this).is(':checked') ) {
                    $(".collapse-label, .collapse-list").each(function(){
                        //this = current collapse-label
                        $(this).show();
                    });
                }else{
                    $(".collapse-label, .collapse-list").each(function(){
                        //this = current collapse-label
                        $(this).hide();
                    });
                }
            });
        })
    }); 
```

或类似的。玩弄那个“每个”功能。

# rally - SDK 2：如何使用设置

> ID：11749493
> 
> 赞同：0
> 
> 时间：2012-07-31T21:47:15.523
> 
> 标签：rally

我无法使用 this.settings 和 this.updateSettings() 让 SDK 2 设置正常工作（我意识到这需要立即在 Rally 上运行）。

我想当我在应用程序中第二次运行它时，我应该能够看到上一次运行中所做的设置，但设置本身是一个相当无趣的对象。一般来说，允许您获取之前保存的设置的方法在哪里？

```
 console.log('settings object', this.settings);
    this.updateSettings({myKey: 'is a test'}); 
```

我看到了一些关于设置的先前帖子，其中谈到了 getSetting() 方法，但如果存在，我不确定它附加到哪个对象，或者在哪里可以找到有关它的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:58:24.037

其他人正试图做类似的事情。这是他们的智慧。

[是否有从 Rally SDK 2 应用程序设置和检索设置的示例？](https://stackoverflow.com/questions/11680816/is-there-an-example-of-setting-and-retrieving-settings-from-a-rally-sdk-2-app)

# wpf - Prism MVVM - 模块

> ID：11749497
> 
> 赞同：3
> 
> 时间：2012-07-31T21:47:42.730
> 
> 标签：wpf, mvvm, prism

刚开始使用 Prism 并依靠 MSDN 文档来教我——关于模块的主题，现在有一些特别让我感到困惑的段落

“加载和初始化模块后，模块程序集无法卸载，因为模块实例引用不会被 Prism 持有，因此模块类实例可能在初始化完成后被垃圾收集”

和

“模块实例的生命周期默认是短暂的——调用Initialize后，对模块的引用被释放。如果你不手动为模块实例建立强引用链，它将被垃圾回收”

我对此有点困惑 - 这意味着什么？

IModule 派生类是您的类库的实际实现，还是只是负责 Prism 加载您的实际类库的元数据类，一旦您的程序集加载到 AppDomain 中，您就可以随时从中调用代码？

我很困惑——现在，我从这两段中得出的结论是，每次在整个 Prism 应用程序中使用模块时都需要重新实例化它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:58:36.370

派生自的类`IModule`应包含一次性初始化代码，例如向区域注册视图。`IModule`加载模块时，会创建派生类的实例，`Initialize`调用方法，然后将模块视为已加载。派生类的实例`IModule`在初始化后丢失，但模块仍然可以访问。

底线：不，模块不必在每次使用时都重新加载/初始化。它只加载/初始化一次，然后应该全部设置。

# ruby-on-rails - 禁止某些单词被保存

> ID：11749501
> 
> 赞同：1
> 
> 时间：2012-07-31T21:48:18.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, reserved-words

*   红宝石 1.9.2p290
*   导轨 3.1.1

我有以下路线输出：

```
http://localhost:3001/chefs/peter (shows the chef profile **based on username**)
http://localhost:3001/chefs/edit (can edit their profile if logged) 
```

如何防止用户创建已经具有类似**编辑**操作名称的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:59:59.147

我认为应该有不止一种解决方案，但使用排除验证应该可行。

```
validates :name, :exclusion => { :in => %w(edit show) } 
```

# gradle - Gradle - 将 jar 复制到项目文件夹

> ID：11749502
> 
> 赞同：4
> 
> 时间：2012-07-31T21:48:21.253
> 
> 标签：gradle

如何使用 Gradle 将依赖项复制到项目文件夹中的某个位置？

我已经设置 SBT 来执行此操作，但我不确定 Gradle

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T22:45:37.633

您的用例会对您执行此操作的方式产生重大影响。但是，一般回答您可以执行以下操作以从集合复制到目录。

```
task copyDeps(type: Copy) {
    from configurations.runtime
    into "${buildDir}/deps"
} 
```

调整以满足您的用例。如果您正在尝试创建 Java 应用程序，请查看[应用程序插件](http://www.gradle.org/docs/current/userguide/application_plugin.html)。

# ruby-on-rails - 如何覆盖lib目录中的rails引擎文件？

> ID：11749503
> 
> 赞同：2
> 
> 时间：2012-07-31T21:48:27.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, overwrite, rails-engines

我想覆盖 Rails 引擎的文件，但该文件位于该引擎的 lib/rails 目录中。当我将同一个文件放到我的 lib/rails 目录中时，它不会覆盖该文件。似乎 rails 处理 lib 目录的方式与处理 app 目录中的文件不同。

此外，我不能将此文件放在初始化程序文件夹中（[根据此解决方案](https://stackoverflow.com/questions/10248174/overloading-lib-files-from-gem-mounted-as-engine)），因为文件名与所需的现有文件相同。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T02:33:03.707

我发现解决此问题的最佳方法是添加

```
require "#{Rails.root}/lib/path/to/file" 
```

在结束时`config/application.rb`。污染是最小的，并且达到与覆盖相同的效果。

目前在 Spree 项目中使用它来覆盖`lib/spree_samples.rb`.

**编辑**

在这个答案中找到了一个更好的方法： [Overloading lib files from gem mounted as engine](https://stackoverflow.com/questions/10248174/overloading-lib-files-from-gem-mounted-as-engine)

本质上，将要覆盖的文件放在`config/initializers`目录中。

# javascript - ActiveXObject javascript 事件

> ID：11749509
> 
> 赞同：1
> 
> 时间：2012-07-31T21:48:57.550
> 
> 标签：javascript, events, activexobject

我想利用来自 IE activex 对象的事件，但似乎无法让它工作。

请参阅下面的代码，如果有任何想法，请告诉我：

```
<html>
  <head>
   <title>Automate IE</title>
   <script type="text/javascript" language="javascript">
     var ie = new ActiveXObject( "InternetExplorer.Application" );
     [...some calls to ie functions...]
   </script>
  </head>
  <body>
    This is a test for IE automation.
  </body> 
```

现在我希望能够使用此处列出的“ie”对象的事件：[MSDN IE Events](http://msdn.microsoft.com/en-us/library/aa768400%28v=vs.85%29)

但似乎无法让它工作......我尝试了以下解决方案（没有奏效）：

方法一：

```
1\. eval( "function ie::EventName(){return MyCustomEvent()}" ); - no joy )-: 
```

方法二：

```
2\. <script for="ie" event="EventName">some code here</script> - still no joy )-: 
```

**此文件以“HTA”扩展名保存 - 并与 MSHTA 脚本主机一起运行**

任何关于如何做到这一点的建议\帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-01T22:42:27.333

我用你的第一种方法取得了成功（见[这里](https://stackoverflow.com/a/41888383/111794)）。

根据我的经验，函数定义的参数必须与事件定义的参数完全匹配，例如对于[`BeforeNavigate2`](https://msdn.microsoft.com/en-us/library/aa768280(v=vs.85).aspx)事件：

```
function ie::BeforeNavigate2(pDisp, URL, Flags, TargetFrameName, PostData, Headers, Cancel) {
    /* do stuff here */ 
} 
```

几乎所有 Internet Explorer 应用程序事件都需要一些参数，因此您的`eval`操作不起作用。

（这可能是不言而喻的，但您必须填写实际的事件名称；您不能随意调用该函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T14:53:32.183

我会早点回答你的问题，但过去三年我有两个孩子；）

我认为在 HTA 中不再可能了。ActiveXObjects 从不支持 JScript 中的事件。在 IE11 之前，您可以使用 VBScript 和 CreateObject(object, event_prefix) 来注册事件挂钩 - [https://msdn.microsoft.com/en-us/library/xzysf6hc(v=vs.84).aspx](https://msdn.microsoft.com/en-us/library/xzysf6hc(v=vs.84).aspx) （您只需要在 VBScript 中注册事件，因为可以在 JavaScript 中访问 VBScript 变量。）

如果 IE<11 不是一个选项，您将需要使用 WScript/CScript。这是一个要点，例如：[https ://gist.github.com/subzey/4374329](https://gist.github.com/subzey/4374329)

使用 activex 对象从 HTA 执行 WScript 是可行的`WScript.Shell`，但不要抱太大希望，因为没有类似的`WScript.CreateObject`ActiveX 对象（或者无论如何可以`CreateObject()`从 JavaScript/JScript 访问。）

为了实现您想要的，您需要将您的 IE 逻辑封装在一个 WScript/CScript 主机脚本中，该脚本监控（或轮询）硬盘上的文件。然后您的 HTA 应用程序可以将命令写入该文件。如果您需要一个反馈循环，您的 HTA 可以监视一个命令结果文件，该文件在 JScript 逻辑完成时得到更新。

自 90 年代以来，我一直是 HTA 的支持者，我仍然将它们用于个人快速和肮脏的项目，但关于它们的长寿的文章已经写在墙上了。自从 IE10 以来，已经有一堆与主机窗口相关的错误，微软已经确认它们不会被修复。

鉴于此，如果您不依赖 IE 特定的功能，您可能希望研究 Electron 作为替代方案：http: [//electron.atom.io/docs/v0.27.0/api/browser-window/](http://electron.atom.io/docs/v0.27.0/api/browser-window/)

# xml - 如何让我的 XML 标记全部在一行上，但分别使用 Notepad++？

> ID：11749513
> 
> 赞同：0
> 
> 时间：2012-07-31T21:49:30.160
> 
> 标签：xml, notepad++

因此，我必须对 XML 文档进行大量工作，使用查找和替换进行大量编辑，坏处是所有标签都在不同的行上，有些在一行上，但大多数不在。

以下是它们的外观示例：

```
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample
text?'/>
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample text
again?'/>
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample text?'/> 
```

因此，我需要将数据标签全部放在一行上，因为当我使用正则表达式查找和替换它时，只查找在线的行。我花了几个小时试图解决这个问题，我尝试用任何东西替换所有 \n ，但它不能解决它。

有谁知道我如何使用记事本++中的一个功能来获得这样的所有行？

```
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample text?'/>
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample text again?'/>
<Data StartTimecode='00:00:24:17' EndTimecode="00:00:29:08" Title='Lots of sample text?'/> 
```

非常感谢任何可以帮助我解决这个问题的人，我在 Notepad++ 中尝试了很多，但没有帮助我无法完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:02:02.930

在我的第一遍中，我使用扩展搜索模式进行了全部替换。

我`\r\n`用空格字符替换。这有效地创建了一个高度为一行的文件。

之后，我又`/> <`用`/>\r\n<`. 这会将单行 XML 代码分成多行，位于一行的结束标记和下一个 lnk 的开始标记之间

我还没有研究过使用正则表达式搜索模式的可能性。

# java - 来自需要 cookie 的 URL 的 Apache MultiPartEmail

> ID：11749514
> 
> 赞同：1
> 
> 时间：2012-07-31T21:49:32.573
> 
> 标签：java, spring, cookies, excel

我需要通过 HTTP 获取一个 excel 电子表格，然后将其作为附件发送到我的 Java Spring 服务器上的电子邮件中。

我发现的问题是 MultiPartEmail.attach() 只需要一个 java.net.URL 实例，我无法弄清楚如何确保请求在其标头中有特定的 Cookie 以进行身份​​验证。

```
url = new URL(urlString);
email.attach(url, "test.xls", "File");
email.send(); 
```

我试图手动请求并创建一个工作簿，但后来我很难将工作簿本身附加到 MultiPartEmail。

```
HttpClient client = new HttpClient();
GetMethod method = new GetMethod(queryString);

method.setRequestHeader("Cookie", cookie);
client.executeMethod(method);

InputStream stream = method.getResponseBodyAsStream();

Workbook workbook = Workbook.getWorkbook(stream);
email.attach(workbook, "report.xls", "forecasting report"); 
```

我需要一些方法来解决这些限制。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:05:11.140

由于您使用的是 Spring，因此您可以使用其内置的电子邮件支持来发送电子邮件。因此，您如何从磁盘或其他地方检索文件并不重要。您可以使用 MimeMessageHelper 发送带有附件的电子邮件，并为邮件主机上的帐户指定用户名和密码以进行身份​​验证，如下所示：

```
public class EmailNotifier {
private JavaMailSenderImpl mailSender;

public void setMailSender(JavaMailSenderImpl mailSender) {
    this.mailSender = mailSender;
}

public void sendMail(InternetAddress fromAddress, InternetAddress toAddress, String subject, String msg) {

    MimeMessage message = mailSender.createMimeMessage();

    try {
        // use the true flag to indicate you need a multipart message
        MimeMessageHelper helper = new MimeMessageHelper(message, true);

        helper.setFrom(fromAddress);
        helper.setTo(toAddress);
        helper.setSubject(subject);
        helper.setText(msg);
        // let's attach the infamous windows Sample file (this time copied to c:/)
        FileSystemResource file = new FileSystemResource(new File("c:/test.xls"));
        helper.addAttachment("test.xls", file);
        mailSender.send(message);
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }           
}
} 
```

并在您的 bean 配置文件中配置一个 JavaMailSenderImpl bean。这是通过 Gmail 发送电子邮件。

豆类.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
        <property name="host" value="smtp.gmail.com" />
        <property name="port" value="587" />
        <property name="username" value="adminxxxx" />
        <property name="password" value="password" />

        <property name="javaMailProperties">
           <props>
                  <prop key="mail.smtp.auth">true</prop>
                  <prop key="mail.smtp.starttls.enable">true</prop>
               </props>
        </property>
    </bean>

    <bean id="emailNotifier" class="com.examples.EmailNotifier">
        <property name="mailSender" ref="mailSender" />
    </bean>

</beans> 
```

这只是为了测试：

```
public class MailApp {
  public static void main( String[] args )
    {
        ApplicationContext context = 
             new ClassPathXmlApplicationContext("beans.xml");

        EmailNotifier emailNotifier = (EmailNotifier) context.getBean("emailNotifier");
        try {
            emailNotifier.sendMail(new InternetAddress("adminxxxx@gmail.com"),
                    new InternetAddress("recipientxxxx@gmail.com"),
                   "Email Alert!", 
                   "Hello User, This is a test email \n No response required.");
        } catch (AddressException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }    
    } 
```

[弹簧文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mail)

# git - 为什么 git 告诉我我删除的子模块被忽略了？

> ID：11749515
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:49:33.217
> 
> 标签：git, git-submodules

为什么 git 告诉我我的子模块的路径被忽略了？

```
The following path is ignored by one of your .gitignore files:
multi/vim/.vim/bundle/powerline
Use -f if you really want to add it. 
```

* * *

这就是我正在做的事情：

```
$ git subaddvim git://github.com/Lokaltog/vim-powerline.git powerline
The following path is ignored by one of your .gitignore files:
multi/vim/.vim/bundle/powerline
Use -f if you really want to add it.
$ git help subaddvim
`git subaddvim' is aliased to `!f(){ [ $# -eq 2 ] && git submodule add $1 multi/vim/.vim/bundle/$2; };f' 
```

*编辑*：看起来它是`p`in `p`owerline：

```
$ git subaddvim git://github.com/Lokaltog/vim-powerline.git p
The following path is ignored by one of your .gitignore files:
multi/vim/.vim/bundle/p
Use -f if you really want to add it.
$ git subaddvim git://github.com/Lokaltog/vim-powerline.git owerline
Cloning into 'multi/vim/.vim/bundle/owerline'... 
```

我不明白为什么。

*编辑 2*：我在子模块克隆目标中找到了一个文件：

```
multi/vim/.vim/bundle$ cat powerline/.git
gitdir: ../.git/modules/multi/vim/.vim/bundle/powerline 
```

如果我删除它并重试，我会得到一个不同的错误：

```
$ git subaddvim git://github.com/Lokaltog/vim-powerline.git powerline
fatal: Not a git repository: ../.git/modules/multi/vim/.vim/bundle/powerline
Unable to checkout submodule 'multi/vim/.vim/bundle/powerline' 
```

也许我的 .git 出了点问题？（我昨天克隆了这个 repo，然后恢复了这个更改。）

*编辑3*：我尝试`git submodule`直接使用（而不是我的别名）并且它有效！我可以通过`git reset --hard`在克隆之后重新创建问题（有时）。似乎这是我的别名的组合，它与 git 命令 git 忽略`.git`文件（或做一些我不理解的魔术）的工作方式不同。也许与我的 .git/config 引用了电力线有关。

*编辑4*：我以前的编辑不清楚：虽然`git submodule`直接使用。它并不总是有效。我不知道为什么它首先起作用。

我已将其缩小到可重现的情况。看起来问题是由 git 假设子模块位于根目录中引起的。这是我的测试脚本。

```
if [ ! -d remote ] ; then
    echo
    echo Setup remote test repo 
    mkdir remote
    cd remote
    git init
    touch firstfile
    git add firstfile
    git ci -m'first'
    cd -
fi

# Pick one of these lines:
submodule=multi/plugin
# OR
submodule=plugin

echo
echo Setup test repo 
mkdir test
cd test
git init
touch firstfile
git add firstfile
git ci -m'first'

echo
echo submodule add
git submodule add ../remote $submodule
ls -ld $submodule/.git
cat $submodule/.git

echo
echo submodule remove
git reset --hard HEAD
ls -ld $submodule/.git
cat $submodule/.git
rm -r $submodule/

echo
echo submodule re-add
git submodule add ../remote $submodule
ls -ld $submodule/.git
cat $submodule/.git 
```

使用`submodule=multi/plugin`将失败：

```
submodule re-add
fatal: Not a git repository: ../.git/modules/multi/plugin
Unable to checkout submodule 'multi/plugin'
-rw-r--r-- 1 pydave mkgroup 37 Aug  1 10:08 multi/plugin/.git
gitdir: ../.git/modules/multi/plugin 
```

（在此之后，如果您运行`git submodule add`，您将收到“以下路径被忽略”消息。）

但`submodule=plugin`会成功：

```
submodule re-add
-rw-r--r-- 1 pydave mkgroup 31 Aug  1 10:07 plugin/.git
gitdir: ../.git/modules/plugin 
```

相对路径都是 using `../.git`，这仅适用于第二个选项 - 当子模块位于 git 项目的根目录中时。

我已重命名此问题以更具体地解决我的问题，并[重新询问了原始问题](https://stackoverflow.com/q/11764439/79125)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:33:07.383

我认为答案是在使用不在顶级目录中的子模块时，git 中存在错误。

解决方案是删除存储在中的子模块的 git repo `.git/modules`：

```
$ rm -fr multi/plugin/ .git/modules/multi/plugin/
$ git submodule add ../remote multi/plugin
Cloning into 'multi/plugin'...
done. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:26:22.900

出于这个原因，我会远离 git 别名，并依靠 bash 历史记录来记住您之前输入的内容。您可以回忆一下复杂的单行代码`CTRL-R`和其他 bash 命令行优点。看到你在做什么有助于保持对别名隐藏的东西的意识。走到另一台机器上，您会遇到问题，因为您忘记了别名中的确切内容！

# java - 将 JMock 资源与 Jersey 测试框架一起使用

> ID：11749520
> 
> 赞同：2
> 
> 时间：2012-07-31T21:49:55.817
> 
> 标签：java, jersey, jmock

因为 JerseyTest 必须扩展，所以我无法将模拟资源放入 Jersey 的 ResourceConfig。以下代码生成 NullPointerException 因为 mockResource 尚未初始化：

```
@Path("/")
public interface MyResource {
    @GET String get();
}

public class MockResourceTest extends JerseyTest {
    @Rule public JUnitRuleMockery context = new JUnitRuleMockery();
    private MyResource mockResource = context.mock(MyResource.class);

    @Override
    protected TestContainerFactory getTestContainerFactory() throws TestContainerException {
        return new GrizzlyTestContainerFactory();
    }

    @Override
    protected AppDescriptor configure() {
        DefaultResourceConfig resourceConfig = new DefaultResourceConfig();
        // FIXME: configure() is called from superclass constructor, so mockResource is still null!
        resourceConfig.getSingletons().add(mockResource);
        return new LowLevelAppDescriptor.Builder(resourceConfig).build();
    }

    @Test
    public void respondsToGetRequest() {
        context.checking(new Expectations() {{
            allowing(mockResource).get(); will(returnValue("foo"));
        }});

        String actualResponse = client().resource("http://localhost:9998/").get(String.class);
        assertThat(actualResponse, is("foo"));
    }
} 
```

任何人都可以看到解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:28:13.447

我通过将 JerseyTest 组合到测试类而不是对其进行子类化来完成这项工作。请参阅我的博客文章：[http ://datumedge.blogspot.co.uk/2012/08/mocking-rest-resources-with-jmock-and.html](http://datumedge.blogspot.co.uk/2012/08/mocking-rest-resources-with-jmock-and.html)

# twitter-bootstrap - Twitter 引导代码高亮

> ID：11749526
> 
> 赞同：1
> 
> 时间：2012-07-31T21:50:12.107
> 
> 标签：twitter-bootstrap, syntax-highlighting

我是 Twitter bootstrap 的新手，我真的很喜欢使用它。但是，我似乎对代码突出显示有一个特殊的问题。

我有一大段 HTML 代码，我想将其放入 pre 中以突出显示代码。但是，当我粘贴 HTML 代码时，它不会显示 HTML 代码，而只是呈现代码并显示样式代码。[点击这里查看屏幕截图](http://img98.imageshack.us/img98/626/codepd.jpg)

我使用的代码：http: [//pastebin.com/b0BsAi2i](http://pastebin.com/b0BsAi2i)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:06:14.707

您需要转义 html 字符。您可以使用 htmlspecialchars() 函数在 PHP 中执行此操作。[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

还有一些网站可以为您执行此操作，例如[http://www.string-functions.com/htmlencode.aspx/htmlencode.aspx](http://www.string-functions.com/htmlencode.aspx/htmlencode.aspx)

然后您的代码变为：

```
<pre class="prettyprint linenums">
&lt;h1&gt;SHOP4STARTUP&lt;/h1&gt;
</pre> 
```

# gradle - Gradle - Eclipse 项目性质

> ID：11749527
> 
> 赞同：3
> 
> 时间：2012-07-31T21:50:14.247
> 
> 标签：gradle

我将如何向 Gradle 生成的 Eclipse 项目的项目性质添加一些内容。

我想添加以下内容：

```
<nature>com.google.gwt.eclipse.core.gwtNature</nature>
<nature>edu.umd.cs.findbugs.plugin.eclipse.findbugsNature</nature> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:57:31.200

想出了这个。

添加以下您的构建文件：

```
eclipse {
  project {
    natures 'com.google.gwt.eclipse.core.gwtNature'
  }
} 
```

[Gradle Eclipse 项目文档](http://gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseProject.html "Gradle - Eclipse 项目文档")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T09:08:28.437

1.  右键单击您的 java 项目 -> 配置 -> 添加 Gradle 性质。
2.  选择窗口-> 显示视图-> 其他...选择 Gradle 任务。
3.  在“Gradle 任务”-> 构建设置中展开您的项目，右键单击“init”并运行。

# html - IE Tooltip 显示在链接文本下方

> ID：11749529
> 
> 赞同：0
> 
> 时间：2012-07-31T21:50:27.443
> 
> 标签：html, css, internet-explorer, hyperlink, tooltip

仅在 IE 上，工具提示显示在链接文本下方，因此无法阅读工具提示中的文本。我知道我可以将工具提示移到右侧，但这看起来不太好。如何使工具提示背景成为实心或在链接顶部。我已经尝试过 z-index。

```
<ul style=" list-style: circle;  margin: 0px 2px 0px 12px;">
    <li style="z-index:10">
        <a class="tooltip" href="abc.com"> <span class="classic" ><%= content %></span></a>
    </li>
</ul>
.classic  
{
    padding: 0.8em 1em; 
    display:none; 
    text-decoration: none;
     list-style: circle;
     background:#FFC62E;
}

.tooltip {
  border-bottom: 1px dotted #000000;
  color: #000000; 
  outline: none;
  text-decoration: none;
  position: relative; 
}
.tooltip span 
{
    display:inline;
  margin-left: -999em;
  position: absolute;
  text-decoration: none; 
  color:#000000;
}
.tooltip:hover span {
  font-family: Calibri, Tahoma, Geneva, sans-serif;
  position: absolute;
  left: 1em;
  top: 2em;
  z-index: 1; 
  margin-left: 170;
  width: 250px;
  display:inline-block;
  background-color: #FFC62E; 
  background:rgb(255,198,46); 
  position:absolute;
  text-decoration: none; 
  color:#000000;
  border-radius: 5px 5px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1);
  -webkit-box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:36:44.237

这个怎么样：

[http://fiddle.jshell.net/br6AP/](http://fiddle.jshell.net/br6AP/)

# coldfusion - 在 Railo 中使用 CFHTTP 和 HTTPS 域

> ID：11749536
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:51:31.857
> 
> 标签：coldfusion, https, railo, cfhttp

`Connection Failed`尝试从域上的页面请求数据时，我不断收到`https://`。我确实使用 railo admin 的内置部分安装了 ssl 证书，`https://[mydomain]/railo-context/admin/server.cfm?action=services.certificates`但我仍然得到`Connection Failed`. 我应该如何继续调试呢？我已经确认该服务器确实可以访问我尝试请求的域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:05:32.347

正如 Jason 所说，您可能需要安装一些额外的证书。仔细查看证书及其链。转到证书颁发者网站并查找一些文档。

要进行故障排除，您可以将一些日志记录添加到您的 jvm args。我认为它是这样的：

```
-Djavax.net.debug=all 
```

结果在 OUT 日志或 server.log 中。这篇关于[SSL 3.0](http://www.coldfusionmuse.com/index.cfm/2009/2/24/CF-SSL30-Authorize-net)的帖子有一些调试技巧。您的证书可能需要以低于 CF 允许的安全级别（例如 SSL 2.0 而不是 3.0/TLS）握手，这可能会导致这种行为 - 但您更有可能只需要安装中间证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:24:24.297

问题最终是没有在机器上正确设置权限。在我们让服务器管理员修复我们的访问权限后`Railo-Tomcat Service Control`，请求开始工作。我假设他在那里时修复了一些其他权限。

# php - 将所有mysql条目一一更改...纠正一个菜鸟错误

> ID：11749543
> 
> 赞同：1
> 
> 时间：2012-07-31T21:29:20.413
> 
> 标签：php, security, passwords

我有个问题。

我是一名新手程序员，大约一年前我开始自学php来编写应用程序。

像所有新手一样，我犯了一些重大错误，这些错误在应用程序启动后才意识到。

诸如缺少外键未加密的cookie存储密码之类的事情……等等。

现在，在您判断我之前，我已经让应用程序正常工作了，我并没有预期应用程序会运行良好，并且期望用户数远低于 500。

现在一年和 25k 用户之后，我发现自己陷入了困境，我改进了原始代码，做了所有必要的安全改进，还有什么没有，我准备推出 2.0 版本。

问题是密码以纯文本形式存储在mysql中。在我启动 2.0 版本后，密码将被加盐和 sha256'd。问题是我如何更新现有记录，以便我可以对它们进行 slat 和加密。

我需要从 mysql 中提取每个密码，通过脚本运行它并将它们再次保存回数据库。最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:34:21.060

这里没有魔法。您可以编写一段 php 代码来执行更新过程。基本上你会做的是......

```
<?php
    select * from users
    for each (user row in database) {
        work on 'password' to get 'new password'
        update users set password='new password' where id=id
    }
?> 
```

现在有 25,000 个用户，您可能希望错开它.. 一次做 1000 个。我假设您已为您的用户分配了 ID。所以只需“从 id < 0 和 id > 1000 的用户中选择 *”并增加条件中的数字以通过所有用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:13:22.790

首先，在生产环境中进行之前在开发机器上尝试所有这些东西，并在生产环境中进行之前备份数据库。像这样的迁移脚本是丢失数据的最简单方法。

1）在您的数据库（类型[`ENUM`](http://dev.mysql.com/doc/refman/5.0/en/enum.html)）中创建一个字段，说明密码字段的加密类型。将默认值设置为“未加密”

如果你没有这个，并且更新脚本由于某种原因失败，你将得到一个半散列的数据库。

怎么做：

```
ALTER TABLE application.users
 ADD password_type ENUM('unencrypted', 'SHA256') NOT NULL; 
```

2）制作一个查找1个未加密密码的php脚本，并对其进行哈希/盐/存储。

```
<?php

mysql_connect("hostname", "user", "pass") or die(mysql_error());
mysql_select_db("application") or die(mysql_error());

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM users WHERE password_type = 'unencrypted'")
or die(mysql_error());

// keeps getting the next row until there are no more to get
$row = mysql_fetch_array( $result );

$pw = $row['password'];
$id = $row['user_id_num'];
$id = (int) $id;

$hashed_password = hash("sha256", $pw);

mysql_query("UPDATE users SET password_type = 'SHA256' AND SET password = '$hashed_password' WHERE user_id_num = $id")
or die(mysql_error());

?> 
```

3) 将该脚本更改为一次执行 100 个。

`cron`4)每分钟使用 linux 工具启动脚本。保留它直到整个数据库被散列。

请注意，我对数据库中的内容名称做了一些假设。

# jquery - 使用jquery从外部文件中获取匹配文本的行

> ID：11749550
> 
> 赞同：0
> 
> 时间：2012-07-31T21:52:32.010
> 
> 标签：jquery, get, split, line, match

好的，所以我有一个链接列表，当您将它们悬停时，光标附近会显示一个“弹出”div。jQuery 然后根据 anchors 中的查询值在该 div 中加载图像`href`。

我正在尝试使用类似于数组的内容制作一个纯文本文件，该文件将包含一两个描述有关该链接/图像的信息。我已经尝试过使用`.match()`and`.split()`并且使用 split 有更多的运气。但仍然无法让它完全满足我的需要。

如果有人可以就我可能做错的事情给我一个建议，那就太棒了！

提前致谢。

这是我的 jQuery 的样子

```
$(document).ready(function() {
$('#pops a').hover(function(a) {
    var file = $(this).attr("href").match(/page=(.*)/)[1];

    $.ajax({
        type: "GET",
        url: "about_links.txt",
        success: function(msg){
            var msgarray = (msg).split(file + " - ");
            var discr = msgarray["1"];

            $('#pop-up').html('<img src="popup/' + file + '.gif" /><br>' + discr);
        }
    });
    $('#pop-up').show();

    return false
    a.preventDefault();
});
}); 
```

这是我的链接的样子

```
<div id="pops">
 <a href="content.asp?page=ns2.6">link 1</a><br>
 <a href="content.asp?page=ns3.8">link 2</a><br>
 <a href="content.asp?page=jp1.0">link 3</a><br>
 <a href="content.asp?page=jp1.0b">link 4</a><br>
 <a href="content.asp?page=jp2.1">link 5</a><br>
</div>
<div id="pop-up"></div>    ​ 
```

然后我的普通 .txt 文件看起来像这样

```
ns2.6 - Some rather interesting details about NS 2.6
ns3.8 - Some rather interesting details about NS 3.8
jp1.0 - Some interesting details about JP 1.0
jp1.0b - More interesting details about JP 1.0b
jp2.1 - Some interesting details about JP 2.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:08:52.100

怎么样

```
var discr = (msg).match(new RegExp(file+' - (.*)\n'))[1]; 
```

[http://jsfiddle.net/mowglisanu/CJpsB/](http://jsfiddle.net/mowglisanu/CJpsB/)

文本文件中的最后一行必须是空行，否则最后一个文件将不匹配。

# android - XML 很疯狂。它没有显示元素的真实位置

> ID：11749552
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:52:40.120
> 
> 标签：android, xml, android-layout, android-relativelayout

我的布局有问题。我有这个结构：

```
<ScrollView>
    <LinarLayout>
        <Button/>
        <RelativeLayout>
            <ImageButton/>
            <ImageButton/>
            <ImageButton/>
        </RelativeLayout>
    </LinarLayout>
</ScrollView> 
```

我希望三个 ImageButtons 居中，一个相邻，如下所示：

```
IMG1   IMG2   IMG3 
```

为此，我将元素集中在`RelativeLayout`using 中`android:gravity="center"`，`android:layout_toRightOf="@+id/element"`并`android:layout_toLeftOf="@+id/element"`以我想要的方式对元素进行排序。

当我检查`GraphicalLayout`选项的结果时，它准确地显示了我想要的（我从来没有遇到过这个视图的问题，它**总是**显示我在 XML 文件上写入的元素）但是然后我编译并执行，这就是全部无序的。我尝试**了很多**不同的方式来订购元素，但它正在做它想做的事......这是我近两年的开发中第一次发生这种情况。

我也关闭了 Eclipse，但没有任何改变。

**编辑以添加信息**

我希望元素是这样的：

`IMG1 IMG2 IMG3`

在 GraphicalLayout 中一切正常，但在模拟器中，三个 IMGS 重叠。

这是完整的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bugbox_wall_port" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <Button
            android:id="@+id/writeNewMsg"
            android:layout_margin="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="New" />
        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/spyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgspy" />
            <ImageButton
                android:id="@+id/playerMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/msgplyr"
                android:layout_toRightOf="@+id/spyMsgs" />
            <ImageButton
                android:id="@+id/allyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/msgally"
                android:layout_toRightOf="@+id/playerMsgs" />
        </RelativeLayout>
    </LinearLayout>
</ScrollView> 
```

我不知道如何解决它。快把我逼疯了。这种布局有什么问题？为什么元素没有排序？我该如何解决它并像往常一样订购元素？

有人能帮我吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:17:24.503

小想法：

`android:src`使用而不是怎么样`android:background`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:21:33.823

也许这就是你正在寻找的：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <Button
            android:id="@+id/writeNewMsg"
            android:layout_margin="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="New" />
        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_gravity="center"
            android:padding="10dp" >
            <ImageButton
                android:id="@+id/spyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/icon"/>
            <ImageButton
                android:id="@+id/playerMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"                
                android:background="@drawable/icon"
                android:layout_toRightOf="@id/spyMsgs" />
            <ImageButton
                android:id="@+id/allyMsgs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/icon"
                android:layout_toRightOf="@id/playerMsgs" />
         </RelativeLayout>
    </LinearLayout>
</ScrollView> 
```

![在此处输入图像描述](../Images/7fe46f7f7a7b142434be2020ec3ca93e.png)

# php - Yii 不同的模型值显示在 cgridview 和视图中

> ID：11749554
> 
> 赞同：2
> 
> 时间：2012-07-31T21:52:41.340
> 
> 标签：php, mysql, yii

在我生成的模型中，我有以原始数字形式百分比（例如 0.998）存储的值。

但是，对于我的视图以及在 CGRIDview 中的显示，我希望这些数据点乘以 100，但在后端数据库中保留相同的值。所以在我看来，上面的例子应该显示为 99.8 %

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:51:31.710

听起来您想使用[sprintf()](http://php.net/manual/en/function.sprintf.php)。在您看来，代码可能是这样的：

```
$a = .998;
print sprintf('%3.1f%%', $a*100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:39:22.883

使用以下方法定义您的 CGridView 列：

```
 'columns' => array(
     // ... fields
     array(
         'name' => 'fieldWithPecent',
         'value' => 'sprintf("%3.1f%%", $data->fieldWithPecent * 100)',
     ),
     // other fields definition
 ), 
```

# ruby-on-rails - 推荐的Web应用开发框架和DB，具有以下特点

> ID：11749557
> 
> 赞同：1
> 
> 时间：2012-07-31T21:53:16.160
> 
> 标签：ruby-on-rails

我将很快寻找技术合作伙伴来构建我的企业对企业生产力工具，但希望确保我们使用正确的框架来确保出色的用户体验。我已经研究过自己，但我仍然不确定哪种框架最适合我的需求。所以也许有人可以给我指点！

目前我正在研究 Ruby On rails、HTML5、CSS 和 MySQL 的组合

该项目的主要特点是： - 它是一个基于项目、管理员和用户的企业对企业 Web 应用程序 - 您可以创建一个可由多个不同用户响应的“项目” - 每个项目可以具有： -管理、预览和嵌入业务文档（例如 word、pdf 等）的能力 - 允许执行评论、批准等的操作按钮
- 能够创建带有文本字段、单选按钮等的简单表单 - 能够从包含在流程中的菜单，例如空白文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:49:05.520

Ruby on Rails 非常适合此类项目。您将编写更少的代码、易于管理、大量的插件来帮助您完成大部分工作。

# jquery - 对于 IE 中的 Imagemapster，突出显示/选定区域为黑色

> ID：11749561
> 
> 赞同：1
> 
> 时间：2012-07-31T21:53:41.433
> 
> 标签：jquery, imagemapster

[http://www2.wou.edu/pls/wou2/jalcanter10.video_tour.p_main](http://www2.wou.edu/pls/wou2/jalcanter10.video_tour.p_main)

该页面在其他浏览器中运行良好，但我不知道该看什么。这些区域确实被点亮并被选中，但不是显示第二张图像，而是将区域涂成黑色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:07:21.957

问题是您直接从其 github 原始源链接 ImageMapster：

```
<script type="text/javascript" 
 src="https://raw.github.com/jamietre/ImageMapster/master/dist/jquery.imagemapster.js"
</script> 
```

您可能从我之前发布的 jsfiddle 示例中得到了这个想法。虽然这对于在 Chrome 中进行测试来说足够好，但对于生产网站来说绝对没有好处。它在 IE 中不起作用的原因是因为 Github 在从源树提供文件时没有传输正确的 mime 类型。Chrome 和 Firefox 不在乎，IE 不在乎。但更重要的是，这个位置的脚本可以随时更改。如果推送有错误的开发代码更新，它可能会停止工作。

您只需要将脚本复制到您自己的服务器并在那里链接到它。

# html - div填充整个屏幕宽度

> ID：11749564
> 
> 赞同：7
> 
> 时间：2012-07-31T21:54:01.437
> 
> 标签：html, css

我一直在尝试向我的网站添加标题，但我无法让容器适合屏幕的整个宽度，尽管宽度设置为`100%`or `auto`。即使将边距和内边距都设置为 0，它的左右边距也始终约为 5px。

HTML：

```
<div id="header">
    <h7>
        <p>Lorem Ipsum</p>
        <p>Lorem Ipsum</p>
        <p>Lorem Ipsum</p>
        <p>Lorem Ipsum</p>
    </h7>
</div> 
```

CSS：

```
body div#header{
    width: 100%;
    margin: 0;
    padding: 0;
    background-color: #c0c0c0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T21:55:29.233

添加

```
body, html{
  margin:0;
  padding:0;
} 
```

到你的 CSS。

浏览器在呈现网站时会放置默认边距和/或填充。有了这个，你可以避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:07:51.740

```
body, html {
    margin: 0;
    padding: 0;
}

div { width: 100%;
    margin: 0;
    padding: 0;
    background-color: #c0c0c0;
} 
```

或者

```
html, body, div {
    margin:0;
    padding:0;
    border:0;
    outline:0;
    background:transparent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:58:18.517

这是因为它被它的父级填充。您是否将其包含在另一个 div 中？或者，也许您在文档正文上设置了填充/边距属性？请提供您的完整 CSS。如果你不这样做，那是因为浏览器正在为你添加它，所以明确地设置它使用：

```
body {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T21:57:59.370

在 CSS 中的 body/html 标签上设置零边距。看看是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T21:58:01.357

您需要添加一个重置，例如：

```
html, body, div {
margin:0;
padding:0;
border:0;
outline:0;
font-size:100%;
vertical-align:baseline;
background:transparent;
} 
```

所有浏览器都有一个默认样式表。您需要通过重置来覆盖它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T09:40:26.587

试试这个，我希望这会有所帮助：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Header & Footer</title>
        <style type="text/css">
            /* Global */
            * {
                margin: 0;
            }
            html, body {
                height: 99%;
            }
            /* Header */
            .container{
                min-height: 100%;
                height: auto !important;
                height: 100%;
                margin: 0 auto -4em;
                width:100%;
                font-family:Segoe UI;
                color:#fff;
            }
            .container-header{
                padding-top:5px;
                padding-left:20px;
            }

            /* Footer */
            .footer{
                background-color:#333030;
                width:100%;
                font-family:Segoe UI;
                color:#fff;
            }
            .footer img{
                padding-left:15px;
            }
            /* Page Content */
            .content{
                height: auto !important;
            }
            .container p{
            font-size:12pt;
            font-weight:bold;
            }
        </style>
    </head>
    <body>
        <!-- Header Div -->
        <div class="container">
            <table width="100%" style="background-color:#333030;color:#FFFFFF;padding:10px">
                <tr></tr>
                <tr>
                    <td></td>
                    <td>
                        <div style="padding-left:100px;font-size:36px;">Header</div>
                    </td>
                </tr>
                <tr></tr>
            </table>

            <!-- Page Content Div -->
            <div class="content">
                Blah Blah
            </div>
        </div>

        <!-- Footer Div -->
        <div class="footer">
            <table width="100%" style="background-color:#333030;color:#FFFFFF;padding:10px">
                <tr></tr>
                <tr>
                    <td></td>
                    <td>
                        <div style="padding-left:100px;font-size:36px;">Footer</div>
                    </td>
                </tr>
                <tr></tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-16T19:10:06.900

试试下面的代码：

```
<!DOCTYPE html>
    <html>
    <head>    
        <style>
            body, html{
                   margin:0;
            } 
        </style>

    </head> 
```

# jquery - jquery validate - 发生不需要的正则表达式验证时容器不会隐藏

> ID：11749566
> 
> 赞同：3
> 
> 时间：2012-07-31T21:54:11.293
> 
> 标签：jquery, validation, jquery-validate

我有 jquery 验证工作，因此当验证发生时，错误被放入容器而不是内联。

我的一些非必填字段有问题。有关代码，请参见下面的 jsfiddle。以下是简要概述：

名称：必填字段
注释：必填字段
Url：不需要，但 class='url' 以确保有效 url
电子邮件：不需要，但 class='email' 以确保有效电子邮件

**要重现：**在电子邮件字段或 url 字段中
输入值**foo**
并关闭标签 您将按预期收到“电子邮件无效”错误。
回到该字段并清除它并关闭标签
错误将消失，但错误容器仍然存在（您可以看到顶部的红色轮廓）

似乎对于正则表达式类型验证，如果不需要该字段，则当其中没有任何值时，它不会重置为忽略验证。如果我进入并实际修复错误，例如，发送电子邮件 foo@foo.com，一切正常。

如何获得验证以接受空白值对非必填字段有效？

**jsfiddle 链接：http:** [//jsfiddle.net/tjans/napf7/](http://jsfiddle.net/tjans/napf7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:24:01.843

利用`errorClass`

jQuery：

```
$(document).ready(function(){
    $("#commentForm").validate({
        wrapper: 'div',
        errorLabelContainer: '#jserror',
        errorClass: 'errorClass'
    });
  });​ 
```

然后将`border`css 规则移动到该错误类。必要的风格

```
#jserror {
    display:none;
}
.errorClass
{
  border:1px solid red;
} 
```

[**演示**](http://jsfiddle.net/STq3e/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:19:22.560

您可以覆盖该[`showErrors`](http://docs.jquery.com/Plugins/Validation/Validator/showErrors)方法以提供您自己的功能。调用`defaultShowErrors`标准行为。我写了一个快速版本，它检查错误对象哈希中的任何错误，并有条件地显示或隐藏容器。[试试看](http://jsfiddle.net/napf7/26/)。如果您使用此解决方案，您可能还想检查[`hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)对象枚举。

```
$("#commentForm").validate({
    wrapper: 'div',
    showErrors: function(errors){
        var hasErrors = false;
        for (var e in errors){
           hasErrors = true;
           break;
        }

        if(hasErrors) $(this.settings.errorLabelContainer).show();
        else $(this.settings.errorLabelContainer).hide();

        this.defaultShowErrors();
    },
    errorLabelContainer: '#jserror'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:31:46.887

在验证插件中使用**取消突出显示部分。**

检查这个 jsFiddle [http://jsfiddle.net/napf7/44/](http://jsfiddle.net/napf7/44/)

# html - 让一张桌子填满其容器的剩余高度

> ID：11749570
> 
> 赞同：3
> 
> 时间：2012-07-31T21:54:22.073
> 
> 标签：html, css, html-table

我有一个固定大小的容器，其中包含未知数量的自定大小段落和可能的其他元素。在该内容之后我还有一张桌子。我希望桌子填满容器的剩余高度。

我有以下 HTML：

```
​&lt;div id="container">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer mattis. Sed semper dui sed ante. Sed luctus tincidunt nisl. Proin iaculis adipiscing nisl. Class aptent taciti sociosqu ad litora amet.</p>
    <p>Lorem ipsum dolor sit amet, consectetur cras amet.</p>
    <table>
        <thead>
            <tr>
                <th>One</th>
                <th>Two</th>
                <th>Three</th>
                <th>Four</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>111</td>
                <td>222</td>
                <td>33333</td>
                <td>4444</td>
            </tr>
            <tr>
                <td>111</td>
                <td>222</td>
                <td>33333</td>
                <td>4444</td>
            </tr>
            <tr>
                <td>111</td>
                <td>222</td>
                <td>33333</td>
                <td>4444</td>
            </tr>
            <tr>
                <td>111</td>
                <td>222</td>
                <td>33333</td>
                <td>4444</td>
            </tr>
        </tbody>
    </table>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用以下 CSS：

```
#container {
    width: 500px;
    height: 500px;
    background: red;
}

p {
    margin-bottom: 20px;
}

table {
    height: 100%;
    width: 100%;
}

table,
table th,
table td{
    border: 1px solid black;
} 
```

这样做会导致表格占用容器的高度，而不仅仅是剩余区域。我已经尝试在 CSS 中将容器和子元素设置为表格和表格行，这会导致其他元素太大或在它们的边距内松动。

可以在以下位置找到小提琴：http: [//jsfiddle.net/QLwkU/](http://jsfiddle.net/QLwkU/)

我希望有一个纯 CSS 解决方案，但如果它是一个合理且可重用的 jQuery 解决方案，我没有问题。

我试过了：

```
var totalHeight = 0;
$('#container').children(':not(table)').each(function(){
    totalHeight += $(this).outerHeight(true);
});
$('#container table').css({'height': ($('#container').outerHeight() - totalHeight)}); 
```

但这使得在需要时向表格添加边距变得更加困难。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:14:25.527

我不知道如何用纯 css 做到这一点，但有一个简单的方法用 jQuery 做到这一点：

首先将表格之前的所有内容包装到另一个包装器中，然后从固定高度（在本例中为 500）中减去其高度，这应该会给您表格的高度：

```
tmpHeight = $("#container").height() - $(".nonTableContainer").height();
$('table').css('height',tmpHeight+"px"); 
```

这是小提琴：http: [//jsfiddle.net/QLwkU/7/](http://jsfiddle.net/QLwkU/7/)

此外，您最初的段落底部边距为 20px。为了正确获取非表格容器的高度，您可以将边距更改为填充或简单地从 jQuery 代码中的 tmpHeight 中减去 20。在上面的小提琴中，我将边距更改为填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:37:02.797

好的，谢谢大家的建议。为此，我将采用稍微修改的版本来满足我的需要，让事情变得更有活力。我将表格外部尺寸和内部尺寸的差异添加到计算中，以防在表格上使用边距。

```
$('#container table').css('height', (
    $('#container').height() -
    $('#preTableContainer').outerHeight(true) -
    ($('#container table').outerHeight(true) -
     $('#container table').height())
)); 
```

和修改后的css

```
#container {
    width: 500px;
    height: 500px;
    background: red;
}

#preTableContainer {
    overflow: hidden;
}

p {
    margin-bottom: 20px;
}

table {
    width: 100%;
    margin-bottom: 20px;
}

table,
table th,
table td{
    border: 1px solid black;
} 
```

HTML 与包装在其自己的 div 中的非表格内容相同。

一个工作小提琴：

[http://jsfiddle.net/QLwkU/10/](http://jsfiddle.net/QLwkU/10/)

感谢所有的建议。希望新的 CSS3 盒子模型能让这个过程变得更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:19:38.327

这种你想要的东西，但桌子上的边框使它延伸。

[http://jsfiddle.net/QLwkU/9/](http://jsfiddle.net/QLwkU/9/)

需要更多代码来计算总边框高度并从中减去 myTableHeight 变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T22:16:35.197

[http://jsfiddle.net/QLwkU/8/](http://jsfiddle.net/QLwkU/8/)试试这种方式。在桌子前设置一些 div，并给他一些高度，在本例中为 30%。然后给桌子高度 70%。这样 div + table = 100% 的容器。然后你可以放入你想要的新的 div 元素。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-31T04:20:07.127

我有同样的问题，我使用纯 CSS 解决了它。

因此，如果您有一个包含一些内容的容器，然后您在该容器中添加一个表格，并且您希望表格填充该容器中的剩余高度，您只需将高度设置为 100%，这意味着表格将占用容器的所有剩余空间。

```
<div id="container" style="height:200px">
Some random content 
<table style="height:100%;background-color:blue;"><tr><td>Test 1</td></tr></table>

</div> 
```

查看更多详细信息：http: [//jsfiddle.net/tonyawad88/StTAr/](http://jsfiddle.net/tonyawad88/StTAr/)

# c - 为什么 C 字符串长度在传递给函数时会发生变化？

> ID：11749572
> 
> 赞同：0
> 
> 时间：2012-07-31T21:54:26.380
> 
> 标签：c, sizeof

> **可能重复：**
> [C -> sizeof 字符串始终为 8](https://stackoverflow.com/questions/4941142/c-sizeof-string-is-always-8)

如果我这样做`sizeof("HELLO");`，我会得到 6，这是预期的，但是如果我有：

```
void printLength(char *s) {
    sizeof(s);
} 
```

将“Hello”传递给此函数`sizeof`时返回 8。

为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:55:51.917

你得到的是`char *`. 要获得它的实际长度，请使用`strlen`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T21:56:05.273

它没有改变。数组不是指针。 `sizeof("HELLO")`给你`char`数组的大小`{'H','E','L','L','O','\0'}`，`sizeof(s)`给你一个指针的大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T21:59:28.223

因为声明为固定大小的字符串文字和数组会被特殊处理。编译器确切地知道它们有多大。

在您的函数中，编译器所知道的只是它是指向某物的指针。您正在获取字符指针的大小（此时，编译器只知道它）。你在一个 64 位系统上，所以你得到一个 8 字节的指针，不管你把什么输入到函数中。

有一个库函数可以为您执行此操作：

```
#include <string.h>

int getLength(char * str)
{
    return strlen(str);
} 
```

# java - 用于自定义密码加密的 WebSphere v7 表示要实现解密方法，但如果我使用 SHA-256 进行加密怎么办？

> ID：11749577
> 
> 赞同：0
> 
> 时间：2012-07-31T21:54:56.517
> 
> 标签：java, security, encryption

我按照这里的步骤操作：

[为自定义密码加密启用插件点](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.iseries.doc/info/iseriesnd/ae/tsec_plugpoint_custpass_encrypt.html)

特别是，实现这里给出的接口：

[自定义密码加密的插件点](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.iseries.doc/info/iseriesnd/ae/csec_plugpoint_custpass_encrypt.html)

但是，我使用的是 SHA-256 加密，即

```
import java.security.MessageDigest;
MessageDigest messageDigest = MessageDigest.getInstance("SHA-256"); 
```

但是，如何实现 SHA-256 的解密方法？我认为整个想法是 SHA-256 不能被解密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:44:01.277

SHA-256 不解密。使用 AES。

# android - 使用自定义相机实现启动新活动时活动停止

> ID：11749581
> 
> 赞同：0
> 
> 时间：2012-07-31T21:55:11.873
> 
> 标签：android, android-activity

当启动具有自定义相机实现的新活动时，主活动关闭（调用 onStop 并将 IsFinishing() 设置为 true）。调用其他活动时不会发生这种情况。我的工作假设主要活动由于内存不足而关闭，因为我可以开始其他活动而不会出错。当我调用相机活动时，如何防止主要活动被关闭，因为在主要活动中启动了一项服务，该服务将被重新用于相机活动？

调用新活动的代码：

```
startActivity(new Intent(Context, MyClass.Snapshot.class)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:04:44.487

尝试使用`startActivityForResult`向 Android 发出信号，表明您希望 Activity 获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:18:26.807

我不认为保持 MainActivity 关闭是一个可行的选择。您说原因与 MainActivity 启动服务有关。好吧，实际上任何对 Context 的引用都可以启动服务。你可以很容易地使用单例。我认为保留 Main Activity 没有必要，也不是一个好习惯，因为 Android 总是可以决定这样的事情。您可能会尝试的一件事是启动Sticky 服务，看看是否会有所作为。让我们知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:19:05.183

答案是我自己的愚蠢。在我的 startActivity 调用下方有一堆注释代码，但我忘了注释掉底部的 1 行......那行调用 onFinish() 可以解释一切。

谢谢大家试图诊断我的愚蠢。

# json - JSON.net 反序列化错误 - JSON 字符串有效

> ID：11749582
> 
> 赞同：0
> 
> 时间：2012-07-31T21:55:25.773
> 
> 标签：json, asp.net-mvc-3, json.net

我讨厌添加到[5,000 多个 JSON.NET 反序列化错误](https://stackoverflow.com/search?q=JSON.net%20deserialise%20error)，但是任何人都可以在下面的 JSON 中看到任何可能导致问题的内容吗？JSONLint 和[JSONViewer](http://jsonviewer.stack.hu/)都表明该字符串是有效的，事实上它已经被 JSON.NET 序列化了，没有任何问题！它所代表的 Tariff 对象的类定义也在下面。

这让我完全被难住了——当我使用 .NET 的 JavascriptSerialiser 类时，我也遇到了完全相同的问题。它可以很好地序列化，但是在反序列化时会引发以下错误：

> 转换值 [JSON 字符串下方] 'emAPI.ClassLibrary.Tariff' 时出错。路径 ''，第 1 行，位置 374。

第 1 行 pos 374 位于字符串末尾的 0 和 0.5 中的句点之间，表示`double StandingChargeValue`在类中。

有人对如何解决有任何想法吗？

谢谢，大卫

**JSON字符串**

```
{ "StandingChargePeriod": { "Id": 4, "Length": "Weekly", "NumbDays": 7 }, "Bands": [ { "Id": 24, "UpperkWhLimit": 23, "LowerkWhLimit": 0, "UnitRate": 2.4 }, { "Id": 25, "UpperkWhLimit": 0, "LowerkWhLimit": 24, "UnitRate": 5.8 }, { "Id": 26, "UpperkWhLimit": -1, "LowerkWhLimit": 0, "UnitRate": 5.8 } ], "Id": 10, "StartDate": "2012-12-07T00:00:00", "StandingChargeValue": 0.5 } 
```

**关税类别定义**

```
 public class Tariff
    {
        [ScaffoldColumn(false)]
        public int Id { get; set; }

        [Required]
        public DateTime StartDate { get; set; }

        [Required]
        [Range(0, 999999999)]
        public double StandingChargeValue { get; set; }

        public virtual Period StandingChargePeriod { get; set; }

        public virtual ICollection<TariffBand> Bands { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:51:33.497

好的，所以我在通宵调试后终于解决了...

就像这个关于[WCF 序列化](https://stackoverflow.com/questions/5537794/error-while-deserializing-the-object-in-wcf/8415908#8415908)的问题一样，问题围绕着尝试重新序列化为 EF4.3 代理对象。要解决它，而不是直接从 EF 上下文返回对象：

```
public getTariff(int id)
{
    return context.Tariffs.Find(id);
} 
```

我创建了一个新对象，复制了属性并返回了新对象：

```
public getTariff(int id)
{
    Tariff holdingTariff = context.Tariffs.Find(id);
    Tariff tariff = new Tariff();
    tariff.X = holdingTariff.X;
    //repeat for all attributes

    return tariff;
} 
```

奇迹般有效。我不确定这是否是设计行为，这有点痛苦，因为我需要为许多对象重复这种模式，但至少它有效！

希望这对其他人有帮助！

# autorotate - 应用 UITabBar 不会自动旋转

> ID：11749586
> 
> 赞同：0
> 
> 时间：2012-07-31T21:55:33.303
> 
> 标签：autorotate

我有一个有 10 个视图的应用程序 UITabBar。显示 4 个视图，6 个在“更多”中。在我的每个视图中，都有一个 UIWebView 和一个导航栏。一切都经过优化以自动适应。每个文件 .m 包含以下语句：

```
- (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation) interfaceOrientation
{
     return (interfaceOrientation != UIInterfaceOrientationPortrait);
} 
```

但是，在 iPad 和 iPhone 中，应用程序不会自动旋转！

我能做些什么 ？

编辑@ 00h00 GMT +1：

支持设备方向的菜单正常，但不起作用

# c# - Windows Mobile 6.5 Process.Start

> ID：11749587
> 
> 赞同：0
> 
> 时间：2012-07-31T21:55:33.977
> 
> 标签：c#, compact-framework

我有一个 GUI 应用程序，它在 Windows Mobile 6.5 上启动两个命令行应用程序（没有窗口，只有进程）。我正在使用以下代码开始进程：

```
Process service = new Process();
var pi = new ProcessStartInfo(exePath, null);
    pi.UseShellExecute = false;        
    service.StartInfo = pi;
    //start the process
    service.Start(); 
```

一切正常，除了调用 service.Start() 时，我的 GUI 应用程序被一个在屏幕中心旋转的圆圈覆盖。等待程序启动时旋转的相同图标表示操作系统正忙。现在，由于这些进程将在 GUI 的整个生命周期内运行，即使在 GUI 退出之后，这个循环也不会消失。有没有办法通过代码让它消失？我尝试使 gui 无效以重新绘制并将光标更改为正常。不工作吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:31:36.677

**启动什么`exePath`？**

我的猜测是[Simon McKenzie](https://stackoverflow.com/users/622391/simon-mckenzie)已经把这个钉在了头上。这可能正是正在发生的事情。

然而，每当操作系统启动一些密集的 CPU 进程时，它也会抛出一个[WaitCursor](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursors.waitcursor.aspx)（*在屏幕中心旋转的圆圈）。*如果是这种情况，您可能需要重新考虑如何处理您正在启动的这个过程 - 特别是如果您是编写该过程的人。

考虑下面的假设应用程序来轮询网络并编译到您的`exePath`：

```
while (true) {
  if (networkDataAvailable()) {
    processData();
  }
} 
```

那个假设的应用程序会占用处理器的空闲时间。

如果您正在启动的进程执行类似的操作，您将需要找到另一种方法来解决问题，例如在计时器滴答事件中调用更简单的进程。

由 标识的修改后的过程`exePath`现在将是：

```
if (networkDataAvailable()) {
  processData();
} 
```

在您的 Windows 应用程序中，您可以根据需要调用它，如下所示：

```
private void timer1_Tick(object sender, EventArgs e) {
  Process service = new Process();
  var pi = new ProcessStartInfo(exePath, null);
  pi.UseShellExecute = false;        
  service.StartInfo = pi;
  //start the process
  service.Start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:39:05.377

如果不了解更多关于您在 exePath 中启动的过程正在做什么，这很难诊断。如果该进程抛出等待光标并独占 CPU，它可能会解释您所看到的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:35:29.187

听起来调用`service.Start()`可能会阻塞主线程。也许您可以尝试在新线程中启动您的进程：

```
 private void StartProcess()
{
    Process service = new Process();
    var pi = new ProcessStartInfo(exePath, null);
    pi.UseShellExecute = false;        
    service.StartInfo = pi;
    //start the process
    service.Start();
}

...

Thread t = new Thread(StartProcess);
t.Start(); 
```

# windows-phone-7 - 从独立存储 Windows Phone 7 中删除目录

> ID：11749596
> 
> 赞同：1
> 
> 时间：2012-07-31T21:56:24.860
> 
> 标签：windows-phone-7, isolatedstorage

我创建了一个名为“MyFolder”的目录并在那里写了一些文本文件。现在，我想删除该目录，我正在使用以下代码：

```
 public void DeleteDirectory(string directoryName)
        {
            try
            {
                using (IsolatedStorageFile currentIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (!string.IsNullOrEmpty(directoryName) && currentIsolatedStorage.DirectoryExists(directoryName))
                    {
                        currentIsolatedStorage.DeleteDirectory(directoryName);
                        textBox1.Text = "deleted"; 
                    }
                }
            }
            catch (Exception ex)
            {
                // do something with exception
            }
        } 
```

我试过了

```
DeleteDirectory("MyFolder") 
DeleteDirectory("IsolatedStore\\MyFolder") 
```

但是它没有删除该目录。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:03:49.660

您是否删除了该目录的所有内容？

[http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.deletedirectory(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.deletedirectory(v=vs.80).aspx)

说（虽然它不是文档的 windows phone 版本）：

> 目录在删除之前必须为空。被删除的目录一经删除就无法恢复。
> 
> [删除文件和目录示例](http://msdn.microsoft.com/en-us/library/kx3852wf%28v=vs.80%29.aspx "删除文件和目录示例")演示了 DeleteDirectory 方法的使用。

# c# - 将字节字符串转换为人类可读的老式字符串

> ID：11749599
> 
> 赞同：0
> 
> 时间：2012-07-31T21:56:31.883
> 
> 标签：c#, .net

大家早上好，晚上好！

我有一个格式的字符串，比如`"0x0SD30SV8GN48N84GN"`代表一个字节数组......我怎么能把它打开`byte[]`？

实际的字符串相当长。

它代表一个 UTF-8 格式的字符串，我试图将其转换为`UTF-32`...

我想要的是把它变成一个人类可读的字符串......这可能吗？

PS：场景是：我的同事在 varbinary 列中存储了一个字符串...执行了“Select myVarBinaryColumn FROM mytable”并将结果作为 txt 发送给我...我需要转换为人类可读的字符串...

PS2：字符串可以理解为以下操作的结果：Cast('Hello World' as varbinary(max))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:59:22.217

```
byte[] array = Encoding.UTF32.GetBytes(somestring); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:58:40.027

```
 string yourstring ="0x0SD30SV8GN48N84GN";
 byte[] array = Encoding.UTF32.GetBytes(yourstring); 
```

看看[这个链接。](http://www.dotnetperls.com/convert-string-byte-array) 另外，这里还有一个关于stackoverflow的非常相似的[问题](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T22:26:54.683

```
string byteStr = input.Substring(2);
byte[] bytes = new byte [ byteStr.Length / 2 ];
for ( int i = 0, j = 0 ; i < byteStr.Length ; i += 2 , j++ )
{
     bytes [ j ] = byte.Parse ( byteStr.Substring ( i , 2 ) , NumberStyles.HexNumber );
}
string str = Encoding.UTF8.GetString ( bytes );
byte[] UTF32Bytes = Encoding.UTF32.GetBytes ( str ); 
```

# java - 在线程之间共享变量时如何避免并发错误？

> ID：11749600
> 
> 赞同：0
> 
> 时间：2012-07-31T21:56:32.557
> 
> 标签：java, multithreading, debugging, concurrency, thread-safety

我写了一个典型的生产者-消费者程序：一个生产者，负责填充队列；一个消费者，负责使队列出队。下面是我的实现。

棘手的部分是还有另一个共享变量**vFlag**。**process(str)**可能会将其**值**更改为true **，**这将被生产者线程检测到，并导致清空队列。

```
private class PQueue
{
    private Queue<String> queue;
    PQueue()
    {
        queue = new LinkedList<String>();
    }

    public synchronized void add(String str)
    {
        if(queue.size() > 1)
        {
        wait();
        }
        queue.add(token);
        notify();
    }

    public synchronized String poll()
    {
        if(queue.size() == 0)
        {
            wait();
        }
        String str = queue.poll();
        notify();
        return str;
    }

    public synchronized void clear()
    {
        queue.clear();
    }

}

PQueue queue = new PQueue();
private class Producer implements Runnable
{
    public void run()
    {
        while (true) {
            String str = read();
            queue.add(str);

            if(vFlag.value == false)
            {
                queue.clear();
                vFlag.value = true;
            }

            if (str.equals("end"))
                break;
        }           
        exitFlag = true;
    }
}

private class Consumer implements Runnable
{   
    public void run()
    {
        while(exitFlag == false)
        {
            String str = queue.poll();
            process(str, vFlag);
        }
    }
} 
```

现在，仍然存在一些错误。谁能给我一些一般的线索或建议，比如更好的并发编程理念或机制来避免并发错误？

**对于上述实现，程序有时会在process(str, vFlag)**中报告错误：

```
Exception in thread "Thread-3" java.lang.NullPointerException 
```

在其他情况下，程序正常运行。如果我注释掉**queue.clear()**，效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:59:45.970

您需要确保该`vFlag.value`字段是`volatile`因为布尔值被多个线程更改。另外，我假设生产者一旦看到`value`已设置为`true`，就会排空队列，然后将其设置为`false`。听起来可能会导致竞争条件。您可能会考虑使用`AtomicBoolean`，以便您可以使用`compareAndSet(...)`来避免覆盖。

我不确定这是一个问题，但您应该考虑执行以下操作来删除一些设置/未设置的竞争条件。你不需要`AtomicBoolean`这个：

```
while (!vFlag.value) {
    // set to true immediately and then clear to avoid race
    vFlag.value = true;
    queue.clear();
} 
```

您也可以考虑使用 a`BlockingQueue`而不是同步您自己的`Queue`. `BlockingQueue`s 为您处理线程安全，并且还有一个为您执行逻辑的`take()`方法。`wait()`如果您的队列中有一个项目，您的代码似乎想要阻止，因此您可能希望使用`new LinkedBlockingQueue(1)`将队列的大小限制为 1 来阻止`put(...)`.

最后，在这些情况下总是建议使用`while`循环而不是`if`循环：

```
// always use while instead of if statements here
while (queue.size() == 0) {
    wait();
} 
```

这解决了意外信号和多个消费者或生产者的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:19:28.853

对于通用线程安全队列，您可以使用[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html) ，或者如果您想一次限制队列中的一个对象[SynchronousQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html) ，如果一次一个对象，但可以使用[ArrayBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)预先计算下一个对象。

Java 内存模型允许有效地缓存值，以及通过编译器重新排序指令，假设如果只有一个线程正在运行，重新排序不会改变结果。因此，生产者不能保证永远将 vFlag 视为 true，因为它被允许使用缓存的值。因此，消费者线程将 vflag 视为 true，而生产者将其视为 false。将变量声明为 volatile 意味着 JVM 每次都必须查找该值，并在访问的任一侧之间产生一个内存栅栏，以防止重新排序。例如

```
public class vFlagClass {
  public volatile boolean value;
} 
```

消费者可以在设置 vFlag 为真后继续访问队列，消费者应该自己清除队列，或者需要等待生产者发出队列被清除的信号。即使假设 value 是可变的，在 vFlag.value 设置为 true 之后，在激活生产者并清除队列之前，程序消耗队列中的所有输入仍然是可接受的操作。

此外，您的队列结构假设只有一个线程正在写入和一个线程正在读取，通过让生产者清除队列，生产者有效地从队列中读取并打破您的不变量。

对于您的错误，我想象正在发生的事情是消费者告诉生产者在队列为空时清除队列，然后再次尝试队列，队列仍然是空的，所以它等待。生产者然后醒来，填充队列，这唤醒了消费者，生产者然后清除队列，消费者开始并轮询队列，但是队列是空的。因此返回 NULL。换句话说

```
Producer : queue.add(str); // queue size is now 1
Producer : goes to end of loop
Consumer : String str = queue.poll(); // queue size is now 0
Consumer : process(str, vFlag); // vFlag.value is set to false 
Consumer : String str = queue.poll(); // waits at
            if(queue.size() == 0)
            {
                wait();
            }
Producer : queue.add(str);
Producer : notify() // wakes up consumer
Producer : queue.clear();
Consumer : String str = queue.poll(); // note queue is empty, so returns NULL 
```

在这种情况下，您需要将 PQueue.poll 更改为

```
String str = null;
while((str = queue.poll()) == null)
    wait();
return str; 
```

但这不是一个好的解决方案，因为它仍然具有前面提到的所有其他错误。注意：这只允许两个线程从队列中读取，它不能防止多个线程写入队列。

编辑：注意到另一个竞争条件，生产者可能将“结束”放入队列，消费者读取并处理它，然后生产者更新 exitFlag。请注意，更改 exitFlag 并不能解决任何问题，因为它与读取陈旧数据无关。与其使用 exitFlag，不如让 Consumer 在读取“end”时也中断。

[有关Java 中内存一致性](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)的更多信息，请参阅文档。

# session - asp经典中的多个配置文件

> ID：11749601
> 
> 赞同：-1
> 
> 时间：2012-07-31T21:56:36.973
> 
> 标签：session, asp-classic, profile

我在 asp classic 中工作，我的代码说如果用户的配置文件“8”可以看到报告，但现在我需要所有配置文件，如果我输入：if Session("id_perfil") < = "8" then...
但不起作用，此时代码是： if Session("id_perfil") <> "8" then...我知道这一定是非常愚蠢的事情，但我被卡住了在此，提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:02:31.633

我的问题是我在写 if Session("id_perfil") <= "8" then
'ASegm4(k,1)="Edición"

正确的方法是：

```
if Session("id_perfil") =< "8" then    
'ASegm4(k,1)="Edición" 
```

我说“一定是很愚蠢的东西……”

# ios - 在 Storyboard 视图 1 和 3 之间访问数据

> ID：11749603
> 
> 赞同：0
> 
> 时间：2012-07-31T21:56:40.803
> 
> 标签：ios, view, storyboard

场景是我有一个情节提要，其中视图一通过滑动连接到视图二。然后通过滑动查看两个连接到查看三个（它们都通过左右滑动在彼此之间来回移动）。

我的问题是在视图一和视图三之间访问数据。视图三包含一个文本框，我想在视图一的标签上显示其值。如何？

我读过最好的方法是使用segues，但似乎`prepareSegue()`允许添加数据并随后移动到相邻视图（即视图三到视图二）。我的解释错了吗？有没有一种简单的方法可以访问非联合视图之间的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:13:25.783

看看使用单例类来存储数据。单例将在视图 1 和 3 中访问，而视图 2 不必知道它。

# c# - 如何在 mvc 2 应用程序中验证 2 种不同情况下的属性？

> ID：11749604
> 
> 赞同：0
> 
> 时间：2012-07-31T21:56:44.613
> 
> 标签：c#, .net, validation, asp.net-mvc-2, asp.net-mvc-validation

请帮助我使用 asp.net MVC 2 应用程序。

我有课：

```
public class Account
{
    [Required(....)]
    [RegularExpression("....")]
    public string AccountCode{ get; set; } 

    public string BankName{ get;  set; } 
} 
```

还有一个：

```
public class BankPageModel
{
    public bool AccountRequired {get; set; }
    public Account NewAccount {get;set;}
} 
```

想象一下，我的页面和表单上有 2 个文本框（AccountCode 和 BankName）和复选框（AccountRequired）。因此，当我发布表单时，如果选中了复选框，我想验证 AccountCode 是否是必需的并适合正则表达式。但如果没有选中，我只想忽略那些文本框并发布表单。但是那时不能使用Required和RegularExpression属性，它们正在阻止它。我可以制作类属性，但如果我有更多具有类似验证的文本框，我不想为每个文本框制作类属性......你怎么看？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:42:41.680

在服务器端执行此操作的最佳方法是让您的模型实现**IValidatableObject**，然后执行以下操作：

```
public class BankPageModel : System.ComponentModel.DataAnnotations.IValidatableObject
{
    public bool AccountRequired { get; set; }
    public Account NewAccount { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        // only perform validation here if account required is checked
        if (this.AccountRequired)
        {
            // check your regex here for account
            if (!RegEx.IsMatch(this.NewAccount.AccountCode, "EXPRESSION"))
            {
                yield return new ValidationResult("Error");
            }
        }
    }
} 
```

以这种方式做事有助于保持控制器精简并将所有验证逻辑封装在模型中。这种方法也可以通过[不显眼的 javascript](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)来验证客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:21:34.933

您不需要使用 DataAnnotations 来执行验证，它们只是使常见验证场景的事情变得更容易（并且您也可以免费获得客户端 JavaScript 验证）。

您始终可以在 Controller 操作中使用 C# 代码执行验证，如下所示：

```
public ViewResult BankPageAdd(BankPageModel model)
{
    if(model.AccountRequired &&
        (String.IsNullOrWhiteSpace(model.Account.AccountCode) || !Regex.IsMatch(model.Account.AccountCode, "PATTERN HERE"))
        ModelState.AddModelError("NewAccount.AccountCode", "ERROR MESSAGE HERE");

    //remainder of your controller action code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:35:32.243

和 javaScript 版本：

```
function validateAccountCode() {
        var bCkd = document.getElementById("ckbxAccountRequired").checked;

        if (bCkd) {
           var accountCode = document.forms[0].elements["AccountCode"].value;
            if(!accountCode.match(yourRegEx) || accountCode==""){
               alert('Please fill in the Account Code');
               return false;
            }
            return true;
        }
        return true;
    } 
```

# javascript - 对象的克隆继承对第一个对象所做的未来更改

> ID：11749612
> 
> 赞同：0
> 
> 时间：2012-07-31T21:57:45.687
> 
> 标签：javascript, object, javascript-objects

假设你有这个对象：

```
mainObj = {
   foo1: 'bar1',
   foo2: 'bar2',
   foo3: 'bar3'
} 
```

现在我想通过做来关闭这个对象`cloneObj = mainOb`。现在我们有两个相同的对象。

当我出于某种原因更改克隆`mainObj.foo1 = 'lolcats'` *后的值时*`cloneObj.foo1 = 'lolcats'`

我在 Chrome 的控制台中对一个更复杂的对象进行了测试。我确定我的脚本中没有任何内容可以使两个对象保持同步。我什至通过为 cloneObj 创建随机名称来确保这一点。

这种行为是故意的还是我遇到了某种错误？或者我只是在这里遗漏了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:02:20.877

您刚刚克隆了初始对象`cloneObj = mainOb`，实际上是在传递一个`mainOb`可以通过`cloneObj`变量名访问的引用。因此，您有两个引用相同对象的变量名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:01:24.827

当您分配/克隆对象时，例如`cloneObj = mainOb`您只是创建对同一对象的另一个引用。两者`mainOb`和都`cloneOb`指向同一个对象，因此一个对象的变化会反映在另一个对象上。

# c# - 使用多个 from 子句语法与传统连接语法的 linq-to-sql 连接

> ID：11749615
> 
> 赞同：13
> 
> 时间：2012-07-31T21:57:52.607
> 
> 标签：c#, sql, linq-to-sql

`from`使用 2 个子句编写连接和`where`这样的连接有什么区别：

```
var SomeQuery = from a in MyDC.Table1
                from b in MyDC.Table2
                where a.SomeCol1 == SomeParameter && a.SomeCol2 === b.SomeCol1 
```

`join`并使用连接运算符编写一个。

这是针对`join`2 个表的，但当然，有时我们需要连接更多的表，如果我们选择上面的语法，我们需要将其他`from`子句组合起来。`where`

我知道这两个语法查询都返回相同的数据，但我想知道是否存在性能差异或另一种差异，最终会倾向于一种语法而不是另一种语法。

感谢您的建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T22:39:26.670

这个问题实际上在这两个中得到了很好的回答。

[INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

[INNER JOIN 与“FROM”中的多个表名](https://stackoverflow.com/questions/5118562/inner-join-vs-multiple-table-names-in-from)

我提供了两个示例，说明如何将三种不同的 LINQ 表达式转换为 SQL。

**隐式连接：**

```
from prod in Articles
from kat in MainGroups
where kat.MainGroupNo == prod.MainGroupNo
select new { kat.Name, prod.ArticleNo } 
```

会被翻译成

```
SELECT [t1].[Name], [t0].[ArticleNo]
FROM [dbo].[Article] AS [t0], [dbo].[MainGroup] AS [t1]
WHERE [t1].[MainGroupNo] = [t0].[MainGroupNo] 
```

**内部联接：**

```
from prod in Articles
join kat in MainGroups on prod.MainGroupNo equals kat.MainGroupNo
select new { kat.Name, prod.ArticleNo } 
```

会被翻译成

```
SELECT [t1].[Name], [t0].[ArticleNo]
FROM [dbo].[Article] AS [t0]
INNER JOIN [dbo].[MainGroup] AS [t1] ON [t0].[MainGroupNo] = [t1].[MainGroupNo] 
```

**左外连接：**

```
from prod in Articles
join g1 in MainGroups on prod.MainGroupNo equals g1.MainGroupNo into prodGroup
from kat in prodGroup.DefaultIfEmpty()
select new { kat.Name, prod.ArticleNo } 
```

会被翻译成

```
SELECT [t1].[Name] AS [Name], [t0].[ArticleNo]
FROM [dbo].[Article] AS [t0]
LEFT OUTER JOIN [dbo].[MainGroup] AS [t1] ON [t0].[MainGroupNo] = [t1].[MainGroupNo] 
```

如果您想测试您的表达式将如何转换为 SQL，我建议您尝试[LINQPad](http://www.linqpad.net/)。这是搞清楚这类东西的一个很棒的工具。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-12-18T21:25:29.950

```
var result = from a in DB.classA
from b in DB.classB
where a.id.Equals(b.id)
select new{a.b}; 
```

# objective-c - 设置属性值时是否需要使用临时变量？

> ID：11749618
> 
> 赞同：1
> 
> 时间：2012-07-31T21:58:07.043
> 
> 标签：objective-c, ios

我有一个（保留的） UIImage 属性，用于保存用户选择的图像。

这是我目前在用户进行选择时拥有的代码：

```
- (IBAction) selectImage1 {
    UIImage *image = [UIImage imageNamed: @"image1-big.png"];
    self.bigImage = image;
} 
```

但我想知道是否可以省略临时变量便利方法的使用，而只是这样做：

```
- (IBAction) selectImage1 {
    self.bigImage = [UIImage imageNamed: @"image1-big.png"];
} 
```

如果第二种方法有问题（我猜想与内存管理有关），有人可以解释一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:02:15.520

第二种方式完全没问题。该行为您提供了一个自动释放`UIImage *image = [UIImage imageNamed: @"image1-big.png"];`的变量。通过保留值的调用的 setter 方法`image`将其分配给您的 ivar 。因此，该行等效于更详细的方式。`self.bigImage = image``bigImage``self.bigImage = [UIImage imageNamed: @"image1-big.png"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:06:57.973

您发布的两个片段在内存管理方面没有区别；除非您非常具体地了解第一个片段中两行之间的保留计数。

在 ARC 环境中，局部变量将是一个“强”指针，但是当方法离开作用域时它会被释放。在第二个片段中，没有中间保留/释放指针，因此实际上可能稍微更有效。

我看到第一个片段的技术是必要的地方是当你有一个弱指针（即一个弱@property）时，设置`self.foo = [UIView ...`会立即允许它被释放。在这些情况下，最好在使用它时使用局部变量来保留它：

```
UIView *someFoo = [UIView...
[self addSubview:someFoo];
self.someWeakProperty = someFoo; 
```

与之比较：

```
self.someWeakProperty = [UIView...
[self addSubview:self.someWeakProperty]; // it's already nil!! 
```

# python - 如何使用 unittest 框架检索 selenium webdriver sessionid？

> ID：11749621
> 
> 赞同：0
> 
> 时间：2012-07-31T21:58:24.227
> 
> 标签：python, selenium, webdriver

我正在尝试在执行测试期间检索 selenium webdriver 会话的会话 ID：

```
import unittest

class MyTest(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Chrome()

    def testSomething(self):
        """selenium tests go here"""
        self.driver.get('http://www.example.com')

    def tearDown(self):
        self.driver.quit()

if __name__ == "__main__":
    suite = unittest.TestLoader().loadTestsFromTestCase(MyTest)
    testResult = unittest.TextTestRunner(verbosity=2).run(suite)
    session_id = ??? 
```

我知道我可以在 setUp 方法中执行 self.driver.session_id 。问题是我需要在类实例之外获取会话 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:50:12.340

可能，您可以在可以返回 sessionID 的类实例中创建属性/函数。

# gradle - Gradle - 从 Eclipse 项目构建路径中排除包

> ID：11749623
> 
> 赞同：0
> 
> 时间：2012-07-31T21:58:34.803
> 
> 标签：gradle

使用 Gradle 为 Eclipse 构建项目时，如何从构建路径中排除包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:54:16.987

文档中描述了一些示例：http: [//gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html](http://gradle.org/docs/current/dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html)

```
eclipse {

  //if you want parts of paths in resulting file to be replaced by variables (files):
  pathVariables 'GRADLE_HOME': file('/best/software/gradle'), 'TOMCAT_HOME': file('../tomcat')

  classpath {
    //you can tweak the classpath of the eclipse project by adding extra configurations:
    plusConfigurations += configurations.provided

    //you can also remove configurations from the classpath:
    minusConfigurations += configurations.someBoringConfig

    //if you don't want some classpath entries 'exported' in eclipse
    noExportConfigurations += configurations.provided

    //if you want to append extra containers:
    containers 'someFriendlyContainer', 'andYetAnotherContainer'

    //customizing the classes output directory:
    defaultOutputDir = file('build-eclipse')

    //default settings for dependencies sources/javadoc download:
    downloadSources = true
    downloadJavadoc = false
  }
} 
```

# iphone - UITableViewCell 自定义子类视图未更新

> ID：11749627
> 
> 赞同：0
> 
> 时间：2012-07-31T21:59:04.127
> 
> 标签：iphone, ios, uitableview

在我的自定义表格视图单元子类中，文本标签之一的位置取决于 ivar (NSString) 的内容。（即：如果 NSString 为空字符串，则 textlabel 的框架位置不同）。

位置如果更新如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    customOverlayCell *myCell = [self.tableView dequeueReusableCellWithIdentifier:@"CustomOverlayCell"];

    if ([buildingFName isEqual:@""])
    {
        CGRect titleLabelFrame = myCell.titleLabel.frame; 
        titleLabelFrame.origin.y  = 45;
        [myCell.titleLabel setFrame:titleLabelFrame];
    }

    return myCell;
} 
```

我已经删除了部分不相关的代码。

结果是屏幕上出现的第一个单元格的布局被正确更新，但向下滚动后出现的视图的布局没有更新。

我没有正确使用 dequeueReusableCellWithIdentifier 吗？或者还有什么问题吗？

编辑：

EJV 的解决方案：

```
CGRect titleLabelFrame = myCell.titleLabel.frame; 

if ([buildingFName isEqual:@""])
{
    titleLabelFrame.origin.y  = 45;
} else {
    titleLabelFrame.origin.y  = 37;
}

[myCell.titleLabel setFrame:titleLabelFrame]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:03:49.330

恐怕，它需要对单元格进行子类化并实现 [UITableViewCell layoutSubviews] 以正确布置单元格的子视图。这就是我对切换表视图单元格执行类似操作的方式：

```
- (void)layoutSubviews
{
    CGFloat const ESCFieldPadding = 10.0f;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // call super layout
    [super layoutSubviews];

    // obtain widths of elements
    CGFloat contentWidth = self.contentView.frame.size.width;
    CGFloat contentHeight = self.contentView.frame.size.height;
    CGFloat switchWidth = self.switchView.frame.size.width;
    CGFloat switchHeight = self.switchView.frame.size.height;
    CGFloat labelWidth = contentWidth - (4 * ESCFieldPadding) - switchWidth;

    // correctly position both views
    self.textLabel.frame = CGRectMake(ESCFieldPadding, 0.0f, 
                                      labelWidth, contentHeight);
    // it is needed to explicitly resize font as for some strange reason,
    // uikit will upsize the font after relayout
    self.textLabel.font = [UIFont boldSystemFontOfSize:[UIFont labelFontSize]];

    CGRect switchFrame = self.switchView.frame;
    switchFrame.origin = CGPointMake(contentWidth - ESCFieldPadding - switchWidth,
                                     (contentHeight / 2) - (switchHeight / 2));
    self.switchView.frame = CGRectIntegral(switchFrame);

    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:08:00.587

如果标题标签的框架是动态的，那么当您从表格视图中取出一个单元格时，框架可能处于两种状态中的任何一种（当 buildingFName 为空时以及当它有字符时）。您需要确保在 buildingFName 不为空时设置框架。这样，标题标签的框架将始终正确设置。所以，你需要这样的代码：

```
CGRect titleLabelFrame = myCell.titleLabel.frame;

if ([buildingFName isEqual:@""])
{ 
    titleLabelFrame.origin.y  = 45;
} else {
    // Change titleLabelFrame
}

[myCell.titleLabel setFrame:titleLabelFrame]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T13:57:21.397

尝试从您的单元格禁用自动布局

# java - 如何将 OnFocusChangeListener 应用于文本框？

> ID：11749628
> 
> 赞同：0
> 
> 时间：2012-07-31T21:59:10.667
> 
> 标签：java, android, focus

我的应用程序中有一个文本框，我希望它有一个预定义的文本，但是当用户点击它时，很明显可以得到输入。我的意思是有文本 id 文本框，文本保留在那里，文本框是否聚焦，当文本框为空且未聚焦时显示我的预定义文本。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:06:37.137

我认为你在谈论的是一个文本`hint`：

```
<EditText
    android:id="@+id/editTextLeft"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:hint="Team name"
    android:ems="10" > 
```

![在此处输入图像描述](../Images/3b1cb4552a8339411c069e447551f24d.png)

然后当您单击编辑框时，文本将消失。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:09:25.813

我认为您正在寻找 setHint 方法或 android:hint 属性。 [http://developer.android.com/reference/android/widget/TextView.html#attr_android:hint](http://developer.android.com/reference/android/widget/TextView.html#attr_android:hint)

# python - 在另一个类变量的理解中引用类变量

> ID：11749629
> 
> 赞同：6
> 
> 时间：2012-07-31T21:59:11.873
> 
> 标签：python, dictionary, class-variables

这可能是一个简单的问题，但我无法对它进行独特的搜索。

我有一个定义静态字典的类，然后尝试定义该字典的子集，也是静态的。

因此，作为一个玩具示例：

```
class example(object): 
    first_d = {1:1,2:2,3:3,4:4} 
    second_d = dict((k,first_d[k]) for k in (2,3)) 
```

这产生 `NameError: global name 'first_d' is not defined`

我应该如何做这个参考？似乎这种模式在其他情况下也适用，例如：

```
class example2(object):
    first = 1
    second = first + 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:52:16.863

基本列表推导具有以下[语法](http://docs.python.org/reference/expressions.html#displays-for-sets-and-dictionaries)

```
[expression for var in iterable] 
```

当类中出现列表推导时，类的属性可以在`iterable`. 这在 Python2 和 Python3 中是正确的。

但是，类的属性可以在Python2 中使用（即访问），`expression`但在Python3 中不能使用。

生成器表达式的情况有点不同：

```
(expression for var in iterable) 
```

虽然仍然可以从 访问`iterable`类属性，但不能从访问类属性`expression`。（这适用于 Python2 和 Python3）。

这一切都可以总结如下：

```
 Python2      Python3
Can access class attributes
--------------------------------------------------
list comp. iterable                Y            Y
list comp. expression              Y            N
gen expr. iterable                 Y            Y
gen expr. expression               N            N
dict comp. iterable                Y            Y
dict comp. expression              N            N 
```

（在这方面，字典推导的行为与生成器表达式相同。）

* * *

**现在这与您的问题有什么关系：**

在你的例子中，

```
second_d = dict((k,first_d[k]) for k in (2,3)) 
```

a`NameError`发生是因为`first_d`无法从`expression`生成器表达式的部分访问。

Python2 的解决方法是将生成器表达式更改为列表推导：

```
second_d = dict([(k,first_d[k]) for k in (2,3)]) 
```

但是，我认为这不是一个非常舒适的解决方案，因为此代码在 Python3 中会失败。

您可以按照 Joel Cornett 的建议：

```
second_d = {k: v for k, v in first_d.items() if k in (2, 3)} 
```

因为这用于字典理解`first_d`的`iterable`而不是`expression`部分。`first_d`但是，如果包含许多项目，这可能会遍历比必要更多的项目。`first_d`尽管如此，如果很小，这个解决方案可能会很好。

一般来说，你可以通过定义一个可以在类内部或外部定义的辅助函数来避免这个问题：

```
def partial_dict(dct, keys):
    return {k:dct[k] for k in keys}

class Example(object):
    first_d = {1:1,2:2,3:3,4:4}
    second_d = partial_dict(first_d, (2,3))

class Example2(object):
    a = [1,2,3,4,5]
    b = [2,4]
    def myfunc(A, B):
        return [x for x in A if x not in B]
    c = myfunc(a, b)

print(Example().second_d)
# {2: 2, 3: 3}

print(Example2().c)
# [1, 3, 5] 
```

函数之所以起作用，是因为它们定义了一个局部范围，并且可以从 dict 理解中访问该局部范围内的变量。

这在[此处进行了解释](https://stackoverflow.com/a/11670273/190597)，但我对此并不完全满意，因为它没有解释为什么该`expression`部分的行为与`iterable`列表理解、生成器表达式或 dict 理解的部分不同。

因此，我无法（完全）解释*为什么*Python 会以这种方式行事，只能说这是它看起来的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:08:18.110

这有点笨拙，但你可以试试这个：

```
class test(object):
    pass

test.first = {1:1, 2:2, 3:3, 4:4}
test.second = dict((k, test.first[k]) for k in (2,3)) 
```

...进而：

```
>>> test.first
{1: 1, 2: 2, 3: 3, 4: 4}
>>> test.second
{2: 2, 3: 3}

>>> t = test()
>>> t.first
{1: 1, 2: 2, 3: 3, 4: 4}
>>> t.second
{2: 2, 3: 3}

>>> test.first[5] = 5
>>> t.first
{1: 1, 2: 2, 3: 3, 4: 4, 5: 5} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:26:55.523

我认为在您完成其定义之前，该类不存在。

# android - Action Bar Sherlock Dark 主题与 Light Theme + Dark Action Bar

> ID：11749631
> 
> 赞同：3
> 
> 时间：2012-07-31T21:59:23.377
> 
> 标签：android, themes, actionbarsherlock

我正在使用 Action Bar Sherlock，我想知道是否有办法让 Action Bar Dark 主题 (Theme.Sherlock) 使用 Light + Dark Action Bar 主题 (Theme.Sherlock.Light.DarkActionBar ）。

目前，这些是我的风格，但深色主题仍然使用深色操作栏。

```
<style name="AppTheme.Light" parent="Theme.Sherlock.Light.DarkActionBar" />

<style name="AppTheme.Dark" parent="Theme.Sherlock">
    <item name="windowContentOverlay">@drawable/abs__ab_solid_shadow_holo</item>
    <item name="actionBarStyle">@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse</item>
    <item name="actionBarWidgetTheme">@style/Theme.Sherlock</item>

    <item name="actionDropDownStyle">@style/Widget.Sherlock.Spinner.DropDown.ActionBar</item>
    <item name="actionButtonStyle">@style/Widget.Sherlock.ActionButton</item>
    <item name="actionOverflowButtonStyle">@style/Widget.Sherlock.ActionButton.Overflow</item>
    <item name="actionModeBackground">@drawable/abs__cab_background_top_holo_dark</item>
    <item name="actionModeSplitBackground">@drawable/abs__cab_background_bottom_holo_dark</item>
    <item name="actionModeCloseDrawable">@drawable/abs__ic_cab_done_holo_dark</item>
    <item name="homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_dark</item>
    <item name="actionBarTabStyle">@style/Widget.Sherlock.Light.ActionBar.TabView.Inverse</item>
    <item name="actionBarTabBarStyle">@style/Widget.Sherlock.Light.ActionBar.TabBar.Inverse</item>
    <item name="actionBarTabTextStyle">@style/Widget.Sherlock.Light.ActionBar.TabText.Inverse</item>
    <item name="actionBarDivider">@drawable/abs__list_divider_holo_dark</item>
    <item name="actionBarItemBackground">@drawable/abs__item_background_holo_dark</item>
    <item name="actionMenuTextColor">?attr/textColorPrimaryInverse</item>
    <item name="actionModeStyle">@style/Widget.Sherlock.Light.ActionMode.Inverse</item>
    <item name="actionModeCloseButtonStyle">@style/Widget.Sherlock.ActionButton.CloseMode</item>
    <item name="actionModePopupWindowStyle">@style/Widget.Sherlock.PopupWindow.ActionMode</item>

    <item name="actionModeShareDrawable">@drawable/abs__ic_menu_share_holo_dark</item>
</style> 
```

我从 Action Bar Sherlock 源代码中复制了所有样式项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:09:29.403

[我也只是想这样做，并在这里](http://actionbarsherlock.com/theming.html)找到了解决方案：

> 准确传达这意味着什么的最简单方法是举个例子。以下是上述“样式化”示例的完整主题：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/bg_striped</item>
    <item name="android:background">@drawable/bg_striped</item>

    <item name="backgroundSplit">@drawable/bg_striped_split</item>
    <item name="android:backgroundSplit">@drawable/bg_striped_split</item>
</style> 
```

# c# - 更新面板的性质

> ID：11749644
> 
> 赞同：3
> 
> 时间：2012-07-31T22:00:37.437
> 
> 标签：c#, javascript, ajax, security, updatepanel

我对我在这里发表的另一篇文章的回答感到困惑： [https ://sharepoint.stackexchange.com/questions/40057/is-an-updatepanel-a-bad-decision/40412#40412](https://sharepoint.stackexchange.com/questions/40057/is-an-updatepanel-a-bad-decision/40412#40412)

我的理解是，从安全角度来看，处理 Button_Click 的 UpdatePanel 与正常回发没有什么不同。UpdatePanel 仍在执行完整的回发，它只是在 UpdatePanel 的范围内异步发生。

采取这种情况：

我正在处理一个赞成点击事件。我可以使用 AJAX 或使用 UpdatePanel 中的 Button_Click 提交新投票。（理所当然地认为投票应该是异步的。每次投票都有一个回发将是可怕的 IMO）

为了避免投票作弊，我将投票绑定到项目和用户，因此在提交投票时，我需要包括这两件事。

使用 AJAX，这两个字段似乎都很容易被黑客入侵，以至于有人可以获得一组用户名并运行一个循环，在短时间内提交数百张选票。

使用 UpdatePanel，我至少可以提取当前用户服务器端的身份，并且不会向 Web 服务公开任何项目创建方法。

这不是从根本上更安全吗？我是否误解了 UpdatePanel 的工作原理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:46:33.373

从安全的角度来看， An`UpdatePanel`确实与回发相同。这只是如何部分渲染输出的问题。

现在，关于您的情况：

做一个纯粹的 ajax 方法不会以任何方式危害安全性。仅仅因为它是 javascript，并不意味着您被迫接受作弊，实际上是在您的请求中接收用户作为参数。这就是您拥有身份验证、cookie 等的目的。使用 Principals 和 Identities 从传入的请求中识别用户。

简而言之，您可以`UpdatePanel`使用 AJAX 和 AJAX 进行安全实现。

**注意**：AJAX 不会强迫您在安全实现之外公开 Web 服务，服务器上的端点确实可能只是 MVC `Controller`、 an`HttpHandler`等。

# android - Android 版本 4.0.4：设置密码的活动返回的结果代码不正确

> ID：11749647
> 
> 赞同：0
> 
> 时间：2012-07-31T22:00:55.110
> 
> 标签：android, android-activity, android-4.0-ice-cream-sandwich

我使用 intent 启动设置密码活动`DevicePolicyManager.ACTION_SET_NEW_PASSWORD`。当用户设置密码时，我希望收到通知（基本上我的应用程序知道为设备设置了主密码）。但是，在我的`onActivityResult`函数中，`RESULT_CANCELLED`当用户尝试设置新的 PIN 或字母数字密码时，我会收到一个操作。我只在 Android 4.0.4 版本中观察到这一点。有谁知道我如何找到用户是否在 ICS 上设置了 PIN 或字母数字密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:20:06.243

经过一番研究，我找到了这个解决方案。创建一个类来扩展`android.app.admin.DeviceAdminReceiver`以侦听与设备主密码相关的任何更改。当密码发生更改时，覆盖该`public void onPasswordChanged(Context context, Intent intent)`方法以接收回叫。以下代码为`onPasswordChanged`我工作。

```
public class MyDeviceAdminReceiver extends android.app.admin.DeviceAdminReceiver {

@Override
public void onPasswordChanged(Context context, Intent intent) {
    super.onPasswordChanged(context, intent);

    Log.d(TAG, "onPasswordChanged:");
    boolean masterPasswordEnabled = false;
    ComponentName component = new ComponentName(context, MyDeviceAdminReceiver.class);
    DevicePolicyManager devPolicyMan = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);

    // Update configuration based on actual password state on the device
    if (devPolicyMan.isAdminActive(component)) {
          Log.d("master_password_debug", "admin is active");
          devPolicyMan.setPasswordMinimumLength(component, 1);
          masterPasswordEnabled = devPolicyMan.isActivePasswordSufficient();
        }

}

} 
```

即使 resultCode 为 ，也使用 masterPasswordEnabled `RESULT_CANCELLED`。

# arrays - Perl - 搜索单词数组以检查电子邮件地址任何部分的部分匹配

> ID：11749648
> 
> 赞同：0
> 
> 时间：2012-07-31T22:00:58.977
> 
> 标签：arrays, match, partial

又是一整天，我又被困住了。

我需要使用包含不能出现在电子邮件地址中的禁用词的单词或 var 数组。

任何一个：

```
$baddies = 'smtp mailer sysop'; 
```

或者

```
@baddies = qw(smtp mailer sysop); 
```

或者

```
@baddies = qw/smtp mailer sysop/; 
```

数组中的坏词也更多，大约有两打。

我没有运行最新版本的perl所以不支持~~等等。

我正在进行一个循环，将乐队时间表发送出去。

在那个循环中，我需要检查电子邮件是否包含这些单词。我意识到可能有一些包含匹配项的好电子邮件，但这很好。

在我放弃试图弄清楚之后，我已经尝试了几十个例子。

最新的是：

```
####FYI## $uaddress is from the foreach $uaddress(@addresses){ loop.

my %params = map { $uaddress => 1 } @baddies;
if(exists($params{$uaddress})) {
print "yep, it's there"; #for testing
push(@failed,"$uaddress is restricted<br />"); 
```

但是，我尝试的一切都不能满足我的需要。

我什至尝试过 =~ 等等。

我现在真的觉得很愚蠢..

伙计们，我需要再上一节课。在此先感谢。

更新：我也试过：

```
$baddies = 'smtp mailer sysop';
 my @baddies = split / /, $baddies;
 # iterate through the array
  foreach (@baddies) {
   if($_ =~ $uaddress) #I also reversed that {
   print qq~$uaddress contains $_~;
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:05:16.833

经过反复试验，错误和愚蠢的运气，我偶然在下面得到了这个工作：

```
foreach $uaddress(@addressList) {
 $uaddress =~ s/\s//g;
    @baddies = qw(smtp mailer sysop);
    my @failed;
     foreach (@baddies) {
      if($uaddress =~ m/$_/i) {
       push(@failed,"$uaddress is restricted because it found \"$_\" in the address<br />");
      }
    }
##stuff happens with emails that passed like Email::Verify
} 
```

# eclipse - 如何在对象中运行方法 - 初学者

> ID：11749649
> 
> 赞同：0
> 
> 时间：2012-07-31T22:01:05.270
> 
> 标签：eclipse, scala

我正在尝试学习来自 Java 背景的 Scala。下面的程序应该运行吗？当我右键单击该文件时`Functional`，不会显示运行该文件的选项。我需要更改什么才能运行该方法`Timer.run`？我正在使用 Eclipse3.7 和 Scala 插件 2.0.2。

```
class Functional {

  object Timer {
    def oncePerSecond(callback: () => Unit) {
      while (true) { callback(); Thread sleep 1000 }
    }
    def timeFlies() {
      println("time flies like an arrow...")
    }
    def run() {
      oncePerSecond(timeFlies)
    }
  }

  def main(args: Array[String]) {
    Timer.run();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:13:35.957

main 方法应该驻留在`object`定义上，而不是在`class`. 在 an 中定义的方法在`object`某种程度上等同`static`于 Java 中的方法。

# mongodb - map reduce 的意外输出

> ID：11749650
> 
> 赞同：4
> 
> 时间：2012-07-31T22:01:10.073
> 
> 标签：mongodb, mapreduce

我有以下 map 和 reduce 函数，它们应该给我一个组的最大日期。

地图：

```
function () {
    if (this.topic_id != 0) {
        emit(this.topic_id, {date_posted : this.date_posted});
    } 
} 
```

减少：

```
function (key, values) {
    var re_date = ISODate('1970-01-01T00:00:00Z');
    values.forEach(function (value) {
        if (re_date == ISODate('1970-01-01T00:00:00Z')) {
            re_date = value.date_posted;
        }
        if (re_date < value.date_posted) {
            re_date = value.date_posted;
        }
    });
    return {date_posted: re_date};
} 
```

目前，它给出以下输出：

```
{ "_id" : "1", "value" : ISODate("2010-06-01T13:36:30Z") }
{ "_id" : "10", "value" : { "date_posted" : ISODate("2010-05-19T21:33:16Z") } }
{ "_id" : "1000", "value" : { "date_posted" : ISODate("2010-07-04T04:09:43Z") } }
{ "_id" : "1004", "value" : ISODate("2010-07-05T01:27:53Z") }
{ "_id" : "1007", "value" : { "date_posted" : ISODate("2010-07-04T23:44:56Z") } }
{ "_id" : "1009", "value" : ISODate("2010-08-12T19:05:35Z") }
{ "_id" : "1012", "value" : ISODate("2010-08-14T19:56:35Z") }
{ "_id" : "1014", "value" : { "date_posted" : ISODate("2010-07-05T07:18:56Z") } }
{ "_id" : "1022", "value" : ISODate("2010-07-06T21:17:57Z") }
{ "_id" : "1024", "value" : { "date_posted" : ISODate("2010-07-06T12:37:28Z") } }
{ "_id" : "1028", "value" : ISODate("2010-07-08T00:24:59Z") }
{ "_id" : "1029", "value" : ISODate("2010-07-26T12:08:34Z") }
{ "_id" : "1042", "value" : { "date_posted" : ISODate("2010-10-01T19:22:29Z") } }
{ "_id" : "1043", "value" : { "date_posted" : ISODate("2010-07-20T01:38:44Z") } }
{ "_id" : "1048", "value" : { "date_posted" : ISODate("2010-07-08T19:29:14Z") } }
{ "_id" : "1049", "value" : ISODate("2010-07-08T11:07:30Z") }
{ "_id" : "105", "value" : ISODate("2010-05-21T01:53:20Z") }
{ "_id" : "1053", "value" : { "date_posted" : ISODate("2010-07-08T17:53:57Z") } }
{ "_id" : "1056", "value" : { "date_posted" : ISODate("2010-07-08T22:35:02Z") } }
{ "_id" : "1060", "value" : { "date_posted" : ISODate("2010-07-09T06:33:57Z") } } 
```

我期待每一行的值字段总是有“date_posted”元素，但显然只有一些有这个。我的地图功能有误吗？

原始数据样本：

```
db.posts.find({"topic_id" : {$in : ["105", "1053", "1000", "1004", "1007"]}}, {"date_posted" : 1, "topic_id" : 1})

{ "_id" : "1010", "date_posted" : ISODate("2010-07-05T01:27:53Z"), "topic_id" : "1004" }
{ "_id" : "106", "date_posted" : ISODate("2010-05-21T01:52:59Z"), "topic_id" : "105" }
{ "_id" : "107", "date_posted" : ISODate("2010-05-21T01:53:20Z"), "topic_id" : "105" }
{ "_id" : "1001", "date_posted" : ISODate("2010-07-04T04:09:43Z"), "topic_id" : "1000" }
{ "_id" : "1006", "date_posted" : ISODate("2010-07-04T23:21:30Z"), "topic_id" : "1004" }
{ "_id" : "1008", "date_posted" : ISODate("2010-07-04T23:44:56Z"), "topic_id" : "1007" }
{ "_id" : "1054", "date_posted" : ISODate("2010-07-08T17:53:57Z"), "topic_id" : "1053" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:57:07.920

好的，看起来我获取最大日期的逻辑搞砸了。我针对相关问题发布了一个[不同的问题](https://stackoverflow.com/questions/11742986/php-mongodb-map-reduce-db-assertion-failure/11749702#11749702)，William Z 针对该问题发布的代码效果更好：

```
function (key, values) {
var re_date = ISODate('1970-01-01T00:00:00Z');
values.forEach(function (val) {
if ( re_date < val.date_posted ) 
re_date = val.date_posted;
}
);
return {date_posted : re_date}; } 
```

# laravel - Laravel Bundle OneAuth 与 Sentry 的兼容性

> ID：11749651
> 
> 赞同：4
> 
> 时间：2012-07-31T22:01:11.707
> 
> 标签：laravel

我和我的团队（业务/创意人）正在使用 Laravel 框架开发一个新的 Startup。我不是技术人员，但我想尽可能多地学习。

我们从安装和使用 Sentry Bundle 开始，然后为 Facebook 登录添加了 OneAuth 包；但是，我们继续遇到错误。

OneAuth 与 Sentry 不兼容吗？
Sentry 即将推出社交插件。我们应该等待还是应该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T23:10:43.637

OneAuth 作者在这里，现在的问题是 Sentry 没有使用 Laravel Auth Driver 来验证用户，这使得集成变得困难。解决限制的两种方法：

*   将 OneAuth 中调用的所有 Auth 转换为使用 Laravel\IoC，这将需要 Sentry 在他们这边注册 IoC。
*   Sentry 添加适配器类（扩展 Laravel\Auth\Drivers\Driver）

无论哪种方式，都需要在 Sentry 方面完成一些工作，如果他们希望使用 OneAuth 作为他们的社交插件，我愿意提供解决方案。

# c# - 使用 OleDB 列出所有存储过程和查询时出现不明确的外部连接错误

> ID：11749653
> 
> 赞同：1
> 
> 时间：2012-07-31T22:01:18.047
> 
> 标签：c#, ms-access, stored-procedures, ado.net, oledb

我必须记录几个 MS Access 2007 数据库，每个数据库都有数百个宏查询等，我想在 C# 中自动化这个过程。对于每个 .mdb 文件，我的首要目标是提取模式信息（表、表单、宏以及查询名称和定义）。

我正在使用以下代码使用 OleDB 来获取用户所有可用表的列表：

```
 private static List<String> getTableNames(OleDbConnection db)
 {
        List<String> tableList = new List<String>();
        DataTable schemaTable;
        try
        {
            object[] objArrRestrict = new object[] { null, null, null, "TABLE" };
            schemaTable = db.GetOleDbSchemaTable(OleDbSchemaGuid.Tables,objArrRestrict);
            foreach(DataRow row in schemaTable.Rows) tableList.Add((String)row["TABLE_NAME"]);
        }
        catch(Exception e) {
            Console.WriteLine(`"Table Name Querying Failed. Returning Empty List"`);
            Console.WriteLine(e.Message);
        }
        return tableList;
    } 
```

对于列，我使用了类似的方法，只是像这样从前一个中提取：

```
object[] objArrRestrict = new object[] { null, null, tableName, null };
schemaCols = db.GetOleDbSchemaTable(OleDbSchemaGuid.Columns, objArrRestrict);
foreach (DataRow row in schemaCols.Rows) tableList.Add((String)row["COLUMN_NAME"]); 
```

我不太确定如何获取宏信息（名称和定义），但经过一番研究，我决定使用以下内容来获取查询信息。

```
object[] objArrRestrict = new object[] { null, null, null, null };
schemaCols = db.GetOleDbSchemaTable(OleDbSchemaGuid.Procedures, objArrRestrict); 
```

但是，当我运行最后一段代码时，我收到了措辞含糊的错误消息：

> > > `The SQL statement could not be executed because it contains ambiguous outer joins. To force one of the joins to be performed first, create a separate query in your SQL statement.`

经过更多研究后，我修改了 getTableNames 方法以通过“VIEWS”限制获取查询，但这仅在数据库中获取了存储的 SELECT 查询，而且我还需要存储的 INSERT、UPDATE 和 DELETE 查询。

最后，我现在使用下面的代码直接查询 MsysObjects 表。

```
String cmdString; 
OleDbCommand queries = new OleDbCommand(cmdString,db);
OleDbDataReader reader = queries.ExecuteReader(); 
```

交替使用以下两个 cmdString：

> > SELECT MSysObjects.Name 从 MsysObjects WHERE (Left$([Name],1)<>"~") AND (MSysObjects.Type)=5 ORDER BY MSysObjects.Name

或者

> > SELECT Name FROM MSysObjects WHERE (Name Not Like ""MSys*"") AND (Type In (1,4,6)) ORDER BY Name

同样，两个字符串也会引发相同的“Ambiguous Outer Join”错误。

我已经阅读了一些有关此类错误的信息，并且我知道一般建议是将原始查询分解为多个查询，但是由于我正在使用库函数来获取此模式数据，因此我不确定如何准确去做那件事。我已经花了几天时间研究这个，但我无能为力。如果有人可以帮助我解决这个问题或指出我绕过这个障碍的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:41:39.823

如果你这样分组会发生什么？

```
SELECT 
Name 
FROM 
MSysObjects 
WHERE 
Name Not Like 'MSys*'
AND 
Type In (1,4,6)
ORDER BY Name 
```

或者这个

```
SELECT 
Name 
FROM 
MSysObjects 
WHERE 
(
(Name Not Like ""MSys*"") 
AND 
(Type In (1,4,6))
)
ORDER BY Name 
```

# ios - iOS 程序常用模式

> ID：11749660
> 
> 赞同：0
> 
> 时间：2012-07-31T22:02:10.823
> 
> 标签：ios

是否有一个很好的教程/书籍/网站可以解决有关构建 iOS 应用程序代码的一般问题？常见模式、最佳实践等问题，例如将 Web 服务或数据库访问代码放在哪里，进行登录/身份验证的最佳方法是什么等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:05:43.637

我推荐[可可设计模式](https://rads.stackoverflow.com/amzn/click/com/0321535022)。虽然不是专门针对 iOS 编程的，但它会教你很多关于 Cocoa 中使用的模式（包括触控）的知识，并且可能会回答你的很多问题。

# mdx - 用于 bigquery 的 mondrian 适配器

> ID：11749667
> 
> 赞同：3
> 
> 时间：2012-07-31T22:02:26.437
> 
> 标签：mdx, google-bigquery, mondrian

如果有一种方法可以用 MDX 查询 Google 的 BigQuery，那就太棒了。我相信自然的解决方案是蒙德里安适配器。

有这样的作品吗？

我问的原因是因为 MDX 中有很多专业知识，而 MDX 连接器可以让我们重用我们已经知道的东西。

此外，MDX 非常适合 OLAP 查询。诸如层次结构和计算一个父级的比率（例如，占总数的百分比）在 MDX 中是标准化的，但可以在 SQL 中以 100 种不同的方式解决。

在 SQL 中计算最近 3 个非空周的移动平均线仍然很复杂，而在 MDX 中则很容易。有很多例子。

最后，它允许使用 Excel Pivot 或 100 多种其他现有工具中的任何一种来分析来自 Google BigQuery 的数据，这些工具会产生 MDX 查询。

干杯，米查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:08:58.847

这里有一个使用 Mondrian/BigQuery 和 Saiku 用户界面的演示：

[http://dev.analytical-labs.com/](http://dev.analytical-labs.com/)

此存档包含可用于在 Saiku 的嵌入式 Mondrian 服务器中设置 BigQuery 数据源的依赖项（从 Saiku twitter 提要获取）：

[http://t.co/EbtaP95G](http://t.co/EbtaP95G)

他们的说明用于设置 BigQuery：

[https://gist.github.com/4073088](https://gist.github.com/4073088)

您可以在此处下载 Saiku（带有嵌入式 Tomcat 和 Mondrian）以在本地运行以进行测试：

[http://analytical-labs.com/downloads.php](http://analytical-labs.com/downloads.php)

我注意到的一个问题是，由于 BigQuery SQL 的限制，向下钻取功能不起作用。我的猜测是，Mondrian 开发人员将不得不为 BigQuery 添加一些特殊的 SQL 支持来解决这个问题。例如，在 ORDER BY 子句中使用的任何字段也必须在 SELECT 字段列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:17:47.313

没有现有的 BigQuery 与 Pentaho 的 Mondrian 集成。我要指出的一件事是，BigQuery 在海量数据集上已经非常快了，因此 Mondrian 的一些优势可能与 BigQuery 后端无关。但是，我可以想象可以使用现有的 Pentaho 分析工具来探索数据。我想了解更多关于用例的信息。

# java - 在java中生成minterms的总和

> ID：11749670
> 
> 赞同：0
> 
> 时间：2012-07-31T22:02:40.470
> 
> 标签：java, boolean-expression

如何在java中生成minterms（布尔代数）的总和？我们可以用 生成最小项的总和`(X+X')`。以下示例解释了具有三个变量 A、B 和 C 的函数的算法：

```
F(A,B,C)= A + B´*C
        = A*(B+B´) + B´*C
        = A*B + A*B´ + B´*C
        = A*B*(C+C´) + A*B´*(C+C´) + B´*C*(A+A´)
        = A*B*C+A*B*C´+A*B´*C+A*B´*C´+B´*C*A+B´*C*A´
        = A*B*C+A*B*C´+A*B´*C+A*B´*C´+A*B´*C+A´*B´*C 
```

java中的方法如下所示：

```
String generateSumOfMinterms(String termsOfTheFunction, String variables){}

// Examples for functions with 2 variables A,B
generateSumOfMinterms("A", "A,B"){

//The result should looks like this
return "A*B+A*B'";
}
generateSumOfMinterms("A+B'", "A,B"){

//The result should looks like this (repeated terms are ok for example A*B')
return "A*B+A*B'+A'*B'+A*B'";
}

// Example for a function with 3 variables A,B,C 
generateSumOfMinterms("A", "A,B,C"){

//The result should looks like this
return "A*B*C+A*B*C'+A*B'*C+A*B'*C'";
} 
```

我尝试了以下方法：

```
public List<Minterm> completeMinterm(Minterm minterm, String variables){
    List<Minterm> minterms=new ArrayList<Minterm>();
    minterms.add(minterm);
    Minterm m1=new Minterm();
    Minterm m2=new Minterm();
    for (int k = 0; k < minterms.size(); k++) {
 //A AB--> AB+AB'
        for (int i = 0; i < variables.length(); i++) {
        boolean varInMinterm=false;
        for (int j = 0; j < minterms.get(k).atoms.size(); j++) {
            if(minterms.get(k).atoms.get(j).variable==variables.charAt(i)){
                varInMinterm=true;
                break;
            }
        }
        if(!varInMinterm){
            varInMinterm=false;
            m1= minterms.get(k);
            m1.addAtom(new Atom(variables.charAt(i),false));
            m2 = minterms.get(k);
            m2.addAtom(new Atom(variables.charAt(i),true));
            minterms.remove(k);
            minterms.add(m1);   
            minterms.add(m2);   
            k=0;

        }
    }
    } 
```

我使用eclipse调试器发现错误，我不明白，为什么添加到m2的原子也同时添加到m1，运行此行时：

```
m2.addAtom(new Atom(variables.charAt(i),true)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:24:12.007

下面是一种可能的方法的概要：首先，您应该创建一个更方便的表达式表示 - 例如，表达式可以是一个`Minterm`类的实例列表，并且`Minterm`可以包含一个`Atom`类的实例列表，每个其中可以包含`char`告诉它是哪个变量的 a 和`boolean`告诉变量是否被否定的 a 。您应该做的第一件事是循环`termsOfTheFunction`并创建表示表达式的此类对象。然后，您可以循环遍历这些最小术语，每次看到缺少一个变量的最小术语时，您都可以将其从列表中删除并添加两个带有缺少变量的新最小术语。最后，您可以遍历完成的 minterms 并将它们“打印”到 result `String`。

每个请求的类声明和为清楚起见（为简洁起见使用公共字段）：

```
public class Atom {
    public final char variable;
    public final bool negated;
    public Atom(char variable, bool negated) {
        this.variable = variable;
        this.negated = negated;
    }
}

public class Minterm {
    public final List<Atom> atoms = new ArrayList<Atom>();
} 
```

在`generateSumOfMinterms()`：

```
List<Minterm> expression = new ArrayList<Minterm>();
Minterm currentMinterm = new Minterm();
expression.add(currentMinterm); 
```

然后，遍历 的字符`termsOfTheFunction`。每次看到一个字母时，查看下一个字符是否是 a ，并在该字母和正确的否定后`´`加上 an 。`Atom`每次看到`+`，创建一个新的`Minterm`并将其添加到`expression`，然后继续。之后，您可以开始分析并扩展它们。

根据您的代码进行编辑：看起来您一切顺利！两个原子都被添加到同一个最小项的原因是，自从你说and以来，两者`m1`都`m2`引用了第*k*个最小项。不会从列表中复制或删除元素；该元素仍将在列表内。因此，对于，您需要创建一个新的最小项，其中包含旧原子中的所有原子以及新原子。`m1 = minterms.get(k);``m2 = minterms.get(k);``get()``m2`

# java - spring-mvc 和子域

> ID：11749672
> 
> 赞同：0
> 
> 时间：2012-07-31T22:03:10.647
> 
> 标签：java, servlets, spring-mvc

我目前正在使用 spring-mvc 开发一个应用程序，我想使用子域。假设用户 john 在我的应用程序中注册。

因此，当用户键入 john.myapp.com/something 时。我想将 john 存储在某个地方（不知道在哪里）并重定向到监听“某事”的控制器。我希望清楚。

我写了这个拦截器：

```
public class SubdomainHandlerInterceptor extends HandlerInterceptorAdapter  {

    @Override
    public boolean preHandle(HttpServletRequest request,
            HttpServletResponse response, Object handler) throws Exception {

        System.out.println(request.getServletPath());
        return super.preHandle(request, response, handler);
    }
} 
```

在我的 spring-servlet.xml

```
<mvc:interceptors>
    <bean class="ar.com.saturn.core.interceptor.SubdomainHandlerInterceptor"> </bean>
</mvc:interceptors> 
```

问题是当我写“john.localhost:8080/Saturn”时，没有发生 SubdomainHandlerInterceptor 。我是否必须编写其他东西而不是 HandlerInterceptorAdapter 来处理子域，或者我错过了什么？

我希望清楚。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:02:52.560

从症状来看，域`john.localhost`没有指向任何地方。

您需要将其添加到`hosts`指向`127.0.0.1`（或 ipv6 等效项）的文件中。

如果是真实的托管域，您需要在 dns 配置中添加一个指向目标服务器的条目。大多数虚拟主机都会为您处理这些问题。

# python - python可以控制itunes之类的应用吗？

> ID：11749674
> 
> 赞同：2
> 
> 时间：2012-07-31T22:03:26.440
> 
> 标签：python, controller, itunes

我怎么能告诉python跳过iTunes或类似的歌曲。是否可以？我曾经使用带有自动热键（ahk）的脚本来复制某些歌曲和内容，但 ahk 的工作方式是控制你的鼠标，所以如果你有一个 ahk 脚本正在运行，你就不能使用你的鼠标。那么python可以在不使用鼠标的情况下与itunes之类的应用程序交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:06:11.523

在windows中你可以用win32com

见这里 [http://code.activestate.com/recipes/498241-scripting-itunes-for-windows-with-python/](http://code.activestate.com/recipes/498241-scripting-itunes-for-windows-with-python/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:07:06.437

您可以使用[appscript 模块执行 applescript 翻译](http://pypi.python.org/pypi/appscript/)

这是一个简单的命令，用于检查 iTunes 是否正在运行并激活它

```
import appscript
iTunes = appscript.app('iTunes')
if iTunes.isrunning():
  iTunes.activate() 
```

**注意：但是，该网站说 appscript 项目不再活动**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T22:06:06.647

Python[支持 OSA](http://docs.python.org/library/macosa.html)，因此可以与任何支持 AppleScript 的应用程序交互。

# json - 用于无限递归的 Jackson API 和堆栈跟踪

> ID：11749675
> 
> 赞同：0
> 
> 时间：2012-07-31T22:03:30.057
> 
> 标签：json, jackson, stack-trace

我注意到杰克逊 API 通过包装来混淆无限递归，并显示一个暗示递归的“链”，即类似于以下内容：

```
ArrayList[0]->"fieldX"->"..". 
```

我想知道这样做有什么好处？我最近遇到了一个无限递归错误，如果显式调用可用，则很容易跟踪该错误。

我怀疑这与这样一个事实有关，也许杰克逊对方法的自省发生在一个单独的线程中，或者是以一种丢失显式堆栈调用的方式完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:23:00.593

Jackson 确实抓住了这一点，因为通常不显示导致它的数据结构比原始堆栈跟踪有用得多。原始堆栈跟踪可以告诉你事情发生在哪里，但通常不能告诉你事情发生的原因。

但是：杰克逊可能应该做的一件事是将原始异常链接为根本原因，以便您也可以检查它。看起来这还没有完成，但应该很容易添加。

我将继续为此提交RFE。

# c# - 通过具有重定向的代码下载文件？

> ID：11749676
> 
> 赞同：3
> 
> 时间：2012-07-31T22:03:30.757
> 
> 标签：c#, .net

我在数据库中有一些网址。问题是网址是重定向到我想要的网址。

我有这样的东西

[http://www.mytestsite.com/test/test/?myphoto=true](http://www.mytestsite.com/test/test/?myphoto=true)

现在如果我去这个网站，它会重定向到照片，所以网址最终会变成

[http://www.mytestsite.com/test/myphoto.jpg](http://www.mytestsite.com/test/myphoto.jpg)

是否可以通过 C# 以某种方式抓取（下载）然后让它重定向并获取真实的 url，以便我可以下载图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T22:09:17.053

我认为您在[HttpWebRequest.AllowAutoRedirect](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)属性之后。该属性获取或设置一个值，该值指示请求是否应遵循重定向响应。

**示例取自 MSDN**

```
HttpWebRequest myHttpWebRequest=(HttpWebRequest)WebRequest.Create("http://www.contoso.com");    
myHttpWebRequest.MaximumAutomaticRedirections=1;
myHttpWebRequest.AllowAutoRedirect=true;
HttpWebResponse myHttpWebResponse=(HttpWebResponse)myHttpWebRequest.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-18T23:20:18.770

`HttpWebRequest`在将它与 SharePoint 外部 URL 一起使用时，我在尝试始终完全重定向时遇到了问题；我根本无法让它工作。

经过一番折腾后，我发现这**也**可以完成，`WebClient`而且对我来说更可靠。

为了让它与您一起工作，`WebClient`您似乎必须创建一个派生自的类，`WebClient`以便您可以手动强制`AllowAutoRedirect`为真。

[我在这个答案中](https://stackoverflow.com/a/52883808/1879019)写了更多关于这个的内容，它[从这个问题](https://stackoverflow.com/questions/18394761/how-to-turn-on-autoredirect-for-webclient)中借用了它的代码。

关键代码是：

> ```
> class CustomWebclient: WebClient
> {
>   [System.Security.SecuritySafeCritical]
>   public CustomWebclient(): base()
>  {
>  }
>  public CookieContainer cookieContainer = new CookieContainer();
> 
>  protected override WebRequest GetWebRequest(Uri myAddress)
>  {
>        WebRequest request = base.GetWebRequest(myAddress);
>        if (request is HttpWebRequest)
>       {
>            (request as HttpWebRequest).CookieContainer =   cookieContainer;
>            (request as HttpWebRequest).AllowAutoRedirect = true;
>       }
>       return request;
>   }
> } 
> ```

# objective-c - 在 Core Data 中连接表

> ID：11749682
> 
> 赞同：0
> 
> 时间：2012-07-31T22:03:51.900
> 
> 标签：objective-c, core-data, join

我一直在尝试使用 Core Data 解决以下问题，但没有任何运气。

我的模型有两个实体：Group 和 Element。都具有“名称”属性和以下形式的一对多关系：“group.elements”和“element.groups”（属于多个组的元素和具有多个元素的组）

我想以以下形式建立一个“过滤器”：

`elements that belongs to "group_A" AND "group_B"`

为了向用户显示如下内容：

`The elements that match the filter belong to this set of groups in that quantity`

例如，有类似的东西：

> Element_1 Group_A、Group_B、Group_C
> Element_2 Group_B、Group_C
> Element_3 Group_A、Group_B、Group_D
> Element_4 Group_A、Group_B、Group_D
> Element_5 Group_C、Group_D

答案应该是：Element_1、Element_3 和 Element_4 匹配过滤器，显示的信息如下：

> Group_A 有 3 个元素
> Group_B 有 3 个元素
> Group_C 有 1 个元素
> Group_D 有 2 个元素
> 
> 匹配过滤器

我怎么能把它放在 Core Data NSExpression、NSPredicate 等中？

谢谢。

# 更新

我想我找到了解决这个问题的两种方法。

## 选项1

此选项使用“组名称过滤器”建立一个 NSArray 并返回所有组，其元素数量与条件匹配，即使它为零（没有元素匹配）

有两个实体，“Grp”和“Elem”，它们之间存在一对多关系。

```
NSError *error = nil;

// Properties to be fetched
NSPropertyDescription *namePropDesc = [[[[self.moModel entitiesByName] objectForKey:@"Grp"] propertiesByName] objectForKey:@"name"];

// Variable group filter
NSArray *grpFilter = [NSArray arrayWithObjects:@"group_A", @"group_B", nil];

// Expression for counting elements
NSExpressionDescription *countExprDesc = [[NSExpressionDescription alloc] init];
[countExprDesc setExpression:[NSExpression expressionWithFormat:@"SUBQUERY(elems,$elem, SUBQUERY($elem.grps, $grp, $grp.name in %@).@count==%d).@count", grpFilter, grpFilter.count]];
[countExprDesc setExpressionResultType:NSInteger32AttributeType];
[countExprDesc setName:@"elementCount"];

// Create data fetching and set its properties
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Grp"];
[request setResultType:NSDictionaryResultType];
[request setPropertiesToFetch:[NSArray arrayWithObjects:namePropDesc,countExprDesc, nil]];

NSArray *results = [self.moContext executeFetchRequest:request error:&error];
NSLog(@"results = %@"results); 
```

## 选项 2

此选项使用“组的名称过滤器”建立一个 NSArray，并返回所有组的元素数量与条件匹配，而没有那些没有任何元素的组。

在本例中，我创建了三个实体，Grp、Elem 和 RGE。将 RGE 作为中间实体，与其他两个实体保持一对多关系。如果需要，此选项允许在组元素关联（创建日期等）中放置一些额外信息。Grp 和 Elem 彼此之间没有关系。

***注意**：事实上，我需要在 RGE 实体中创建一个“常规”字段（名称）来应用 @count 函数。如果使用“多对多关系字段”，则无法正确计数。*

```
NSError *error = nil;

// Variable group filter
NSArray *grpFilter = [NSArray arrayWithObjects:@"group_A", @"group_B", nil];

// Create variable predicate string from "group's names filter"
NSMutableString *predicateStr = [[NSMutableString alloc] init];
for(int n=0;n<grpFilter.count;n++) {
    if(n>0) {
        [predicateStr appendString:@" AND "];
    }
    [predicateStr appendString:@"(ANY elem.rges.grp.name=%@)"];
}

// Filter to be applied
NSPredicate *filterQuery = [NSPredicate predicateWithFormat:predicateStr argumentArray:grpFilter];

// Expression for counting elements
NSExpressionDescription *countExprDesc = [[NSExpressionDescription alloc] init];
[countExprDesc setExpression:[NSExpression expressionWithFormat:@"name.@count"]];
[countExprDesc setExpressionResultType:NSInteger64AttributeType];
[countExprDesc setName:@"count"];

// Expression for grouping JUST by the group's name
NSExpressionDescription *grpNameExprDesc = [[NSExpressionDescription alloc] init];
[grpNameExprDesc setExpression:[NSExpression expressionWithFormat:@"grp.name"]];
[grpNameExprDesc setExpressionResultType:NSStringAttributeType];
[grpNameExprDesc setName:@"grpName"];

// THIS COULD JUST BE an NSPropertyDescription if you want the WHOLE "grp":
NSPropertyDescription *grpPropDesc = [[[[self.moModel entitiesByName] objectForKey:@"RGE"] propertiesByName] objectForKey:@"grp"];

// Create data fetching and set its properties
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"RGE"];
[request setResultType:NSDictionaryResultType];
[request setPropertiesToGroupBy:[NSArray arrayWithObjects: grpNameExprDesc, nil]];
[request setPropertiesToFetch:[NSArray arrayWithObjects:grpNameExprDesc, countExprDesc, nil]];
[request setPredicate:filterQuery];

NSArray *results = [self.moContext executeFetchRequest:request error:&error];
NSLog(@"results = %@",results); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:39:22.163

我获取了所有组，并为显示做了以下操作：

```
Group *gr = [self.fetchedResultsController objectAtIndexPath:indexPath];
NSSet *filtered = [NSSet set];
if ([gr.name isEqualToString:@"GroupA"]) {
   filtered = [gr.elements filteredSetUsingPredicate:
      [NSPredicate predicateWithFormat:@"any groups.name == %@", @"GroupB"]];
}
else if ([gr.name isEqualToString:@"GroupB"]) {
   filtered = [gr.elements filteredSetUsingPredicate:
      [NSPredicate predicateWithFormat:@"any groups.name == %@", @"GroupA"]];
}
else {
   filtered = [gr.elements filteredSetUsingPredicate:
      [NSPredicate predicateWithFormat:
        @"any groups.name == %@ && any groups.name == %@", 
        @"GroupA", @"GroupB"]];
}
cell.textLabel.text = 
   [NSString stringWithFormat:@"%@ has %d elements.", 
      gr.name, filtered.count] ; 
```

这给出了正确的计数，如您的示例中所示。但是，如果有一个排除组，它仍然会列出 0 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T12:01:01.600

我有一个类似的问题，我使用“选项 2”方法解决了它：将[三个实体与多对多关系分组](https://stackoverflow.com/questions/16495166/grouping-three-entities-with-many-to-many-relationships)

问候。佩德罗文图拉。

# ant - “未找到 JUnitTask”错误（Hudson、Ant、JUnit）

> ID：11749683
> 
> 赞同：0
> 
> 时间：2012-07-31T22:04:00.913
> 
> 标签：ant, junit, hudson

我尝试了几种方法将 ant 和 junit 安装在与 hudson 相同的服务器上。我最终下载了 Ant 源代码，使用包含的 fetch.xml 文件安装了可选依赖项，构建了源代码，并将 junit-4.8.1.jar 放入 lib 目录中，其中编译的 Ant 代码 [我刚刚构建的] 是. 然后我使用“export ANT_HOME=/usr/share/ant”命令将ANT_HOME 设置为ant 根目录。我还设置了一个具有相同值 (/usr/share/ant) 的 Hudson 配置变量“ANT_HOME”，并且还使用 export ANT_HOME 命令将一个新文件放入了 /etc/profile.d 目录。在这一点上，我不确定还能尝试什么，但 Hudson 仍然给我错误：

> 构建失败/var/lib/hudson/jobs/MyProject/build.xml:31：问题：无法创建任务或键入junit原因：找不到类org.apache.tools.ant.taskdefs.optional.junit.JUnitTask . 这看起来像是 Ant 的可选组件之一。行动：检查适当的可选 JAR 存在于 -/usr/share/ant/lib -/var/lib/hudson/.ant/lib -a 使用 -lib 参数添加到命令行的目录中
> 
> 不要惊慌，这是一个普遍的问题。最常见的原因是缺少 JAR。
> 
> 这不是错误；这是一个配置问题

事实上，我确实检查了 /usr/share/ant/lib 并且“org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.class”类位于我确认的ant-junit jar文件中运行命令：`jar tfv ant-junit.jar | grep org.apache.tools.ant.taskdefs.optional.junit.JUnitTask`

有人可以告诉我要尝试什么，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:49:49.260

事实证明，hudson 自己在自己的库之一中安装了某个版本的 Ant。我想这以某种方式引起了冲突，因为当我摆脱它时，事情就奏效了。我认为它在 /var/hudson 或 /var/hudson/lib 中。该路径在 hudson 安装期间被添加到 PATH 环境变量中。因此，您的选择是将您自己的 Ant 安装添加到路径的开头，删除 hudson 的 Ant 版本，或者删除 PATH 的那部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:20:43.980

如果你在 Ubuntu 上，你可以简单地 apt-get ant；我这样做并链接到我项目中的junit jar。

干杯，

尼尔

# jquery - 单击导航链接以工作时无法获取 HTML5 加载数据部分

> ID：11749686
> 
> 赞同：0
> 
> 时间：2012-07-31T22:04:31.807
> 
> 标签：jquery, html

通过谷歌搜索到达这里并主要关注[这个](https://stackoverflow.com/questions/11691262/html5-loading-a-section-content-into-a-main-view-wrapper)和[这个](https://stackoverflow.com/questions/11716777/html5-loading-data-section-when-click-on-navigation-link)线程（以及一些其他第三方资源以获得更多关于该主题的知识），我想我几乎正在尝试完成类似于用户 Combustion007 从线程正在尝试的事情。

但令我失望的是，我无法让它发挥作用。我对 JS 完全不熟悉，并且有很多东西要学习 CSS 和 HTML5 带来的东西，所以我想我在这里缺少一些东西。如果有人可以看一下并告诉我需要做什么才能使这件事正常工作，我将不胜感激。

我已经在这几个小时了，只是在这一点上，我想我必须寻求一些指导。先感谢您！:)

**HTML**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Title</title>

<link rel="stylesheet" href="css/css.css">

<!--[if lt IE 9]-->
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<!--[endif]-->

</head>

<body>

<div class="container">
  <header class="headermod">
    <h1>Title</h1>
  </header>
  <nav>
  <ul>
    <li><a href="#" data-section="#home">Home</a></li>
    <li><a href="#" data-section="#photo">Photography</a></li>
    <li><a href="#" data-section="#about">About</a></li>
    <li><a href="#" data-section="#contact">Contact</a></li>
  </ul>
  </nav>
  <div class="content">

    <section id="home">
      <h2>Home</h2>
      <p>Home</p></section>

    <section id="photo">
      <h2>Photos</h2>
      <p>Photos</p>
    </section>

    <section id="about">
      <h2>About</h2>
      <p>About</p>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <p>Contact</p>
    </section>

  <!-- end .content --></div>
  <footer>
  <div class="footermod">
  <hr class="footer-hr">
    <p style="text-align: left;">&copy; Copyright</p>
  </div>
  </footer>
  <!-- end .container --></div>

<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/modernizr.js"></script>

<script type="text/javascript">
$("a").on("click", function(e) {
    e.preventDefault();
    var sectionID = '#'+ $(this).data("section");
    $("#content section:visible").fadeOut();
    $(sectionID).fadeIn();
});
</script>

</body>

</html> 
```

**CSS**

```
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    margin: 0;
    padding: 0;
    color: #FFF;
    font-size: 90%;
    background-color: #000000;
}

ul, ol, dl { 
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   
    padding-right: 15px;
    padding-left: 15px; 
    color: #FFF;
    background-color: #000;
}
a img { 
    border: none;
}

a:link {
    color: #FFF;
    text-decoration: none; 
}
a:visited {
    color: #000000;
    text-decoration: none;
}
a:hover, a:active, a:focus { 
    color: #FFF;
    text-decoration: none;
}

.container {
    width: 890px;
    margin: 0 auto; 
    background-color: #000000;
}

header {
    background: #000000;
}

.headermod {

    padding-top: 20px;  

}

.sidebar1 {
    float: right;
    width: 0px;
    background: #000000;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    float: left;
    overflow:auto; 
}

.content tr, .content ol {
    padding: 0 15px 15px 40px; 
}

nav ul {
    list-style: none; 
    border-top: 1px solid #000; 
    margin-bottom: 15px; 
    background-color: #000;
}
nav ul li {
    border-right: 0px solid #000;
    float: left;
    display: inline;
}
nav ul a, nav ul a:visited { 
    padding: 5px 5px 5px 15px;
    display: block; 
    width: 200px; 
    text-decoration: none;
    background: #39F;
}
nav ul a:hover, nav ul a:active, nav ul a:focus { 
    color: #FF6;
    background-color: #000000;
}

footer {
    padding: 10px 0;
    background: #000000;
    position: relative;
    clear: both; 
}

.footermod {
    font-size: 60%;
    text-align: left;
}

.footer-hr {
    width: 880px;
}

header, section, footer, aside, nav, article, figure {
    display: block;
    background-color: #000;
}

section
{
    display: none;
    text-align: left;
}

#home { height: 400px; width: 890px; display: block; }
#photo { height: 400px; width: 890px; }
#about { height: 400px; width: 890px; }
#contact { height: 400px; width: 890px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:26:08.163

改变

```
var sectionID = '#'+ $(this).data("section"); 
```

至

```
var sectionID = $(this).data("section"); 
```

您将“#”加倍，导致选择器像`##home`和`##about`

# javascript - 更改可折叠菜单标题中的文本会使其消失

> ID：11749689
> 
> 赞同：2
> 
> 时间：2012-07-31T22:04:50.003
> 
> 标签：javascript, jquery, html, jquery-mobile, cordova

我正在尝试创建一个将数据存储在一系列可折叠菜单中的应用程序。首先有一个月菜单，然后是月内的天，然后是天内的时间，然后是时间内的数据。我需要菜单的标题能够根据用户输入的时间和日期进行更改，但是如果我更改标题文本，菜单会丢失其图形并变成文本。点击它会显示可折叠的内容，但不会触发可折叠的 onclick 事件。给出的大部分 html 代码都是由 Codiqa 生成的。我怎样才能使这项工作正确？

可折叠的html页面：

```
<!-- Logs -->
    <div data-role="page" data-theme="a" id="page15">
        <div data-theme="a" data-role="header">
            <h3>
                Logs
            </h3>
            <a data-role="button" data-direction="reverse" data-transition="slide" href="#page3" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                Back
            </a>
        </div>
        <div data-role="content" style="padding: 15px">
            <a data-role="button" data-transition="slide" href="#page1">
                Add log entry
            </a>
            <div data-role="collapsible-set" data-theme="" data-content-theme="">
                <div data-role="collapsible" data-collapsed="true">
                    <h3>
                        July 2012
                    </h3>
                    <div data-role="collapsible-set" data-theme="" data-content-theme="">
                        <div data-role="collapsible" data-collapsed="true" onclick="getLogTime(); this.onclick=null">
                            <h3>
                                July 5
                            </h3>
                            <div data-role="collapsible-set" data-theme="" data-content-theme="">
                                <div data-role="collapsible" data-collapsed="true" onclick="getLogData(); this.onclick=null">
                                    <h3 id=time1>//Heading in question
                                    </h3>
                                    <div>
                                        <p id="logFortime1">
                                        Log 1
                                        </p>
                                    </div>
                                </div>
                                <div data-role="collapsible" data-collapsed="true">
                                    <h3>
                                        12:47 pm
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div data-role="collapsible" data-collapsed="true">
                            <h3>
                                July 6
                            </h3>
                        </div>
                    </div>
                </div>
                <div data-role="collapsible" data-collapsed="true">
                    <h3>
                        August 2012
                    </h3>
                </div>
            </div>
            <a data-role="button" data-transition="slide" href="#page21">
                Graphs
            </a>
        </div>
    </div> 
```

改变标题的功能：

```
function getLogTime() {
    $('#time1').html('Time');
} 
```

编辑：

如 Joseph Marikle 所说，在周围添加了“”，`id=time1`修复了未触发的 onclick 事件，但可折叠的图形仍然不显示。

编辑：

Codiqa 生成的 css：

```
/* Generic icon styles */

/* 26x26 pixels */

.ui-btn-icon-left .ui-btn-inner .ui-icon.ui-iconsize-26, 
.ui-btn-icon-right .ui-btn-inner .ui-icon.ui-iconsize-26 {
margin-top: -13px;
}

.ui-btn-icon-notext .ui-icon { display: block; z-index: 0;}

.ui-btn-icon-top .ui-btn-inner .ui-icon.ui-iconsize-26, .ui-btn-icon-bottom .ui-btn-inner .ui-icon.ui-iconsize-26 { position: absolute; left: 50%;  margin-left: -13px; }
.ui-header .ui-btn-icon-left .ui-icon.ui-iconsize-26,
.ui-footer .ui-btn-icon-left .ui-icon.ui-iconsize-26,
.ui-mini.ui-btn-icon-left .ui-icon.ui-iconsize-26,
.ui-mini .ui-btn-icon-left .ui-icon.ui-iconsize-26 { left: 3px; margin-top: -12px; }

.ui-header .ui-btn-icon-right .ui-icon.ui-iconsize-26,
.ui-footer .ui-btn-icon-right .ui-icon.ui-iconsize-26,
.ui-mini.ui-btn-icon-right .ui-icon.ui-iconsize-26,
.ui-mini .ui-btn-icon-right .ui-icon.ui-iconsize-26 { right: 3px; margin-top: -12px; }

.ui-header .ui-btn-icon-top .ui-icon.ui-iconsize-26,
.ui-footer .ui-btn-icon-top .ui-icon.ui-iconsize-26,
.ui-mini.ui-btn-icon-top .ui-icon.ui-iconsize-26,
.ui-mini .ui-btn-icon-top .ui-icon.ui-iconsize-26 { top: 3px; }

.ui-header .ui-btn-icon-bottom .ui-icon.ui-iconsize-26,
.ui-footer .ui-btn-icon-bottom .ui-icon.ui-iconsize-26,
.ui-mini.ui-btn-icon-bottom .ui-icon.ui-iconsize-26,
.ui-mini .ui-btn-icon-bottom .ui-icon.ui-iconsize-26 { bottom: 3px; }

.ui-icon-ios-pack-color-left-arrow {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-right-arrow {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-up-arrow {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-back {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-forward {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-down-arrow {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
   border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-plus {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
 -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-minus {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-check {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-delete {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-gear {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-refresh {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-grid {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-star {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-info {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-home {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-search {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-alert {
  width: 26px;
  height: 26px;
  background-color: transparent !important;
  box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  -webkit-box-shadow: none;
  border-radius: 0;
  -moz-border-radius: 0;
  -o-border-radius: 0;
  -ms-border-radius: 0;
}

.ui-icon-ios-pack-color-left-arrow {
  background: url('images/ios-pack-color.png') -260px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-right-arrow {
  background: url('images/ios-pack-color.png') -364px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-up-arrow {
  background: url('images/ios-pack-color.png') -442px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-back {
  background: url('images/ios-pack-color.png') -26px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-forward {
  background: url('images/ios-pack-color.png') -130px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-down-arrow {
  background: url('images/ios-pack-color.png') -104px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-plus {
  background: url('images/ios-pack-color.png') -312px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-minus {
  background: url('images/ios-pack-color.png') -286px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-check {
  background: url('images/ios-pack-color.png') -52px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-delete {
  background: url('images/ios-pack-color.png') -78px 50% no-repeat transparent     !important;
}

.ui-icon-ios-pack-color-gear {
  background: url('images/ios-pack-color.png') -156px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-refresh {
  background: url('images/ios-pack-color.png') -338px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-grid {
  background: url('images/ios-pack-color.png') -182px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-star {
  background: url('images/ios-pack-color.png') -416px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-info {
  background: url('images/ios-pack-color.png') -234px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-home {
  background: url('images/ios-pack-color.png') -208px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-search {
  background: url('images/ios-pack-color.png') -390px 50% no-repeat transparent !important;
}

.ui-icon-ios-pack-color-alert {
  background: url('images/ios-pack-color.png') -0px 50% no-repeat transparent !important;
}

@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
       only screen and (min--moz-device-pixel-ratio: 1.5),
       only screen and (min-resolution: 240dpi) {

  .ui-icon-ios-pack-color-left-arrow,.ui-icon-ios-pack-color-right-arrow,.ui-icon-ios-pack-color-up-arrow,.ui-icon-ios-pack-color-back,.ui-icon-ios-pack-color-forward,.ui-icon-ios-pack-color-down-arrow,.ui-icon-ios-pack-color-plus,.ui-icon-ios-pack-color-minus,.ui-icon-ios-pack-color-check,.ui-icon-ios-pack-color-delete,.ui-icon-ios-pack-color-gear,.ui-icon-ios-pack-color-refresh,.ui-icon-ios-pack-color-grid,.ui-icon-ios-pack-color-star,.ui-icon-ios-pack-color-info,.ui-icon-ios-pack-color-home,.ui-icon-ios-pack-color-search,.ui-icon-ios-pack-color-alert {
    background-image: url('images/ios-pack-color@2x.png');
    -moz-background-size: 468px 26px;
    -o-background-size: 468px 26px;
    -webkit-background-size: 468px 26px;
    background-size: 468px 26px;
  }

}

.text-align-center {
  text-align: center;
}
.text-align-right {
  text-align: right;
}

/** CSS for non-standard jQuery Mobile styles or Codiqa components **/
.split-wrapper {
  width: 100%;
  min-height: 200px;
  clear: both;
}
@media all and (min-width: 650px) {
    .content-secondary {
        text-align: left;
        float: left;
        width: 45%;
        background: none;
        padding: 1.5em 6% 3em 0;
        margin: 0;
    }
    .content-secondary {
    background: none;
    border-top: none;
    }
    .content-primary {
        width: 45%;
        float: right;
        margin-right: 1%;
        padding-right: 1%;
    }
    .content-primary ul:first-child {
        margin-top: 0;
    }
  .content-secondary ul.ui-listview, .content-secondary ul.ui-listview-inset {
    margin: 0;
  }
  .content-secondary ul.ui-listview .ui-li-divider, .content-secondary ul.ui-listview         .ui-li {
    border-radius: 0px;
  }
  .content-secondary ul.ui-listview .ui-li {
    border-left: 0;
    border-right: 0;
  }
    .content-secondary h2 {
        position: absolute;
        left: -9999px;
    }
    .content-secondary .ui-li-divider {
        padding-top: 1em;
        padding-bottom: 1em;
    }
    .content-secondary {
        margin: 0;
        padding: 0;
    }

}
@media all and (min-width: 750px){
    .content-secondary {
        width: 34%;
    }
    .content-primary {
        width: 60%;
        padding-right: 1%;
    }   
  .content-secondary ul.ui-listview-inset {
}

@media all and (min-width: 1200px){
    .content-secondary {
        width: 30%;
        padding-right:6%;
        margin: 0px 0 20px 5%;
    }
    .content-secondary ul {
    margin: 0;
  }
    .content-secondary {
        margin: 0;
        padding: 0;
    }
    .content-primary {
        width: 50%;
        margin-right: 5%;
        padding-right: 3%;
    }
    .content-primary {
        width: 60%;
    }
} 
```

该 html 文件还使用`<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.0/jquery.mobile-1.1.0.min.css" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:32:00.270

我想我已经弄清楚是什么导致了你的问题。[我上面链接](http://jsbin.com/emabem/2/edit)的演示确实重现了问题

> 点击
> 2012 年 7 月->7 月 5 日->//有问题的标题->日志 1

您遇到的问题是由您使用的移动图书馆引起的。使用此库时，它会更改 HTML，将子元素添加到现有元素。因此，当您更改元素的 HTML 时，它会极大地改变样式。您需要做的是找到放置文本的位置。根据我的调查，似乎可以在元素中找到文本，其类为`ui-btn-text`. 从那里它就像更改代码中的选择器一样简单（我也使用`text`了代替`html`）：

```
function getLogTime() {
    $('#time1 .ui-btn-text').text('Time');
} 
```

您可以在[我的演示](http://jsbin.com/emabem/4)（[源](http://jsbin.com/emabem/4/edit)）的工作版本中看到它

如果您有任何问题，请发表评论。

# objective-c - 如何对同一天添加的实体发出 fetch 请求？

> ID：11749692
> 
> 赞同：0
> 
> 时间：2012-07-31T22:04:51.650
> 
> 标签：objective-c, ios, core-data

我的应用程序是一个费用清单，其实体如下：

```
Expense:
date [NSDate] 
location [NSString] 
name [NSString] 
price [float] 
```

我想将 UITableView 组的费用按月显示，然后在另一个表格视图中按月的日期显示（向下钻取设计）。NSDate 本身包含时间，因此按日期过滤的结果也将按时间过滤。

我试过了：

```
NSPredicate *chooseDateAt = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
        Expense *expense = (Expense *)evaluatedObject;
        return expense.dateWithoutTime == preferedDateWithoutTime;
    }]; 
```

但它有这个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unknown predicate type for predicate: BLOCKPREDICATE(0x12048)' 
```

如果不使用 predicateWithBlock，我看不到其他解决方法，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:41:21.563

1）确定一天的开始（当天0:00）--> `startDate`
2）形成这样的谓词：

```
[NSPredicate predicateWithFormat:@"date > %@ && date < %@", 
          startDate, 
          [startDate dateByAddingTimeInterval:60*60*24]]; 
```

实际上，有人指出不应该像我在`dateByAddingTimeInterval`. 最好将其用作结束日期：

```
NSDateComponents* dateComponents = [[NSDateComponents alloc]init];
[dateComponents setDay:1];
NSCalendar* calendar = [NSCalendar currentCalendar];
NSDate* endDate = [calendar dateByAddingComponents:dateComponents 
    toDate:startDate options:0]; 
```

# wcf - 指定每个端点的 Castle WCF 集成设施端点行为

> ID：11749693
> 
> 赞同：2
> 
> 时间：2012-07-31T22:04:55.300
> 
> 标签：wcf, integration, behavior, castle, endpoint

我正在使用 Castle WCF Integration Facility，并且我的第一个 webHttp 端点的一切工作正常。要使此端点工作，它要求端点启用了 WebHttpBehavior。我能够使用以下方法实现这一目标：

```
 container.Register(Component.For<IEndpointBehavior>()
                            .ImplementedBy<WebHttpBehavior>()); 
```

当我尝试使用与 WebHttpBehavior 不兼容的 BasicHttpBinding 启用第二个端点时，这会成为一个问题。

有没有办法指定上面的 IEndPointBehavior 注册只适用于某个端点？

这是我的服务的完整安装程序：

```
 container.AddFacility<WcfFacility>(f => f.CloseTimeout = TimeSpan.Zero)
                 .Register(Component.For<IDiagnosticService>()
                    .ImplementedBy<DiagnosticService>()
                    .Named("DiagnosticService")
                    .LifestyleTransient()
                    .AsWcfService(new DefaultServiceModel()
                                    .Hosted()
                                    .AddEndpoints(WcfEndpoint.BoundTo(new WebHttpBinding()).At("json"))
                                    .AddEndpoints(WcfEndpoint.BoundTo(new BasicHttpBinding()).At("soap"))
                                    .PublishMetadata(o => o.EnableHttpGet())));

            container.Register(Component.For<IEndpointBehavior>()
                            .ImplementedBy<WebHttpBehavior>()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:10:41.413

好的。我终于想通了。事实证明，我的大部分问题都与 Azure 仿真环境有关，而不是与 Castle WCF 集成有关。答案很简单——只需设置 ServiceEndpoint 实例并使用 WcfEndpoint.FromEndpoint() 方法。

这是我的工作安装程序：

```
 String internalEndpointAddress = string.Format("http://{0}/DiagnosticService.svc", 
                                           RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint);

        // This ContractDescription instance must be used for both endpoints in this case
        ContractDescription description = ContractDescription.GetContract(typeof(IDiagnosticService));

        // Create JSON webHTTP Binding            
        WebHttpBinding webhttpbinding = new WebHttpBinding();
        string jsonURI = internalEndpointAddress + "/json";
        EndpointAddress jsonEndpointAddress = new EndpointAddress(new Uri(jsonURI));
        ServiceEndpoint jsonEndpoint = new ServiceEndpoint(description, webhttpbinding, jsonEndpointAddress);
        jsonEndpoint.Behaviors.Add(new WebHttpBehavior());

        // Create WSHTTP Binding          
        WSHttpBinding wsHttpBinding = new WSHttpBinding();
        string soapURI = internalEndpointAddress + "/soap";
        EndpointAddress soapEndpointAddress = new EndpointAddress(new Uri(soapURI));
        ServiceEndpoint soapEndpoint = new ServiceEndpoint(description, wsHttpBinding, soapEndpointAddress);

        container.AddFacility<WcfFacility>(f => f.CloseTimeout = TimeSpan.Zero)
                 .Register(Component.For<IDiagnosticService>()
                    .ImplementedBy<DiagnosticService>()
                    .Named("DiagnosticService")
                    .LifestyleTransient()
                    .AsWcfService(new DefaultServiceModel()
                                    .Hosted()
                                    .AddEndpoints(WcfEndpoint.FromEndpoint(jsonEndpoint))
                                    .AddEndpoints(WcfEndpoint.FromEndpoint(soapEndpoint))
                                    .PublishMetadata(o => o.EnableHttpGet()))); 
```

# git - “Github for Windows”有什么魔力让它在 emacs 中工作？

> ID：11749694
> 
> 赞同：2
> 
> 时间：2012-07-31T22:05:09.483
> 
> 标签：git, emacs, ssh, github, msysgit

我整天都在努力让 git 在 Windows 7 x86 上的 emacs shell（版本 24）中工作。(*) 罪魁祸首其实是 ssh，它是行不通的。例如，键入：

```
ssh -T git@github.com 
```

将永远挂起，无论 emacs 中使用的 shell 类型（emacs shell（又名 eshell）或 msys bash）。在 emacs 之外，它工作得很好（在 bash 或 cmd.exe 中）。

注意`-T`参数，上面写着“不要分配伪 tty”（emacs 不能分配伪 tty，至少在 Windows 上不能）。所以这不是问题。

我尝试使用 MSYS（不是 msys-git）或“Git for Windows”中的 ssh.exe。谨防！“Windows 版 Git”与“Windows 版 Github”不同。“Git for Windows” 是二进制文件和支持实用程序的安装程序，通过在 msys-git 下构建 git（专门为此目的而存在的开发环境）获得。出于这个原因，它“Git for Windows”经常被错误地称为 msys-git。

输入“Github for Windows”。使用他们的 git/ssh 版本，我可以在 emacs shell 下使用 git 和 ssh。据我所知，该程序只是简单地使用了“Git for Windows”。但是，它是一个修改版本。例如，`etc/ssh/ssh_config`添加了一个文件。

我已经确定其中的一些配置`etc/ssh/ssh_config`是 ssh 在 emacs 中工作的原始配置。但是，仅此一项并不能解释它为什么起作用，因为将此配置文件与“Git for Windows”一起使用并不能解决问题。

所以我想知道的是 Github 团队对“Git for Windows”做了哪些其他更改，以便它可以在 emacs 中工作。

我什至不确定“在 emacs 中工作”是否是预期目标。这就是为什么这个问题的答案很重要：如果“Github for Windows”的未来版本破坏了 emacs 兼容性，我将无法再在 emacs shell 中使用 git。

(*) 是的，我对 vc-git、magit、tramp 等一无所知。我不感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T00:52:22.067

基本上 ssh 在提示输入密码时会挂起。由于 Windows 的一些内部细节，来自管道（Emacs）的输入与在控制台窗口（bash 或 cmd.exe）中键入时的输入不同。如果 ssh.exe 和 git.exe 没有在正确的时间刷新它们的缓冲区，那么当从 Emacs 管道输入时，输入可能会在它们之间陷入困境。这只发生在 Emacs 正在运行一个子进程时，该子进程运行它自己的另一个子进程，该子进程请求输入。

在不深入研究 git 和 ssh 的源代码的情况下，我所知道的唯一解决方法是使用带有 ssh-agent 的公钥身份验证，并在尝试使用 Emacs 中的 git 之前预先授权您的密钥。这将消除 ssh 提示输入密码的需要。我不知道这是否是 github 的一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:21:26.413

@JSON 的最后一点是你感兴趣的——“公钥加密”。

这是马口中的一些信息[——github docs](https://help.github.com/articles/working-with-ssh-key-passphrases)。

以下是有关 ssh-agent 如何工作的[更多信息](http://mah.everybody.org/docs/ssh)，包括如何从 .shrc 文件中使用它。

基本上，一旦你在 github 上设置了你的公钥，你应该只需要在每次启动时使用 ssh-add 输入一次密码，一切都会神奇地工作。

# jsf - Primefaces 可编辑数据表和休眠验证器

> ID：11749695
> 
> 赞同：0
> 
> 时间：2012-07-31T22:05:13.147
> 
> 标签：jsf, primefaces, bean-validation, hibernate-validator

我在 PrimeFaces 中有一个可编辑的数据表，并且正在使用 Hibernate Validator 进行 bean 验证。这适用于`<p:inputText />`元素。现在我想对可编辑的数据表进行验证。

这是正在发生的事情：

如果我输入有效值，页面会按预期更新
如果我输入无效值，当我点击小“保存”复选标记时，什么也没有发生 - 单元格保持可编辑状态，不尝试数据库写入，不显示错误消息。

页面上有`<h:messages />`标签，为什么不显示错误消息？该组件似乎意识到存在问题，因为该行仍处于可编辑状态。

编辑：我启用了日志记录并看到了这个：

```
21:20:43,874 FINE  [javax.enterprise.resource.webcontainer.jsf.context] (http-localhost-127.0.0.1-8080-2) Adding Message[sourceId=demoTable:j_idt11:2:j_idt15,summary=Testing Hibernate Validator Error Message) 
```

所以看起来上下文正在正确更新。似乎我需要做一些事情来触发它呈现的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T09:15:51.550

在您的 jsf 文件中使用以下语句，它应该可以工作：

```
<p:messages id="messages" showDetail="true" autoUpdate="true"
            closable="true" showSummary="false"/> 
```

# windows-phone-7 - 将页面放入文件夹

> ID：11749696
> 
> 赞同：0
> 
> 时间：2012-07-31T22:05:15.207
> 
> 标签：windows-phone-7

我将所有应用程序页面放入文件夹“Pages”中，我的应用程序崩溃了。它在 App.xaml.cs 中命中以下两行，除此之外它不会打印任何错误。

```
private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)

...
private void Application_UnhandledException(object sender, applicationUnhandledExceptionEventArgs e) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:20:12.533

在您的 WMAppManifest.xml 中，您会发现以下内容：

```
 <Tasks>
      <DefaultTask Name="_default" NavigationPage="MainPage.xaml" />
    </Tasks> 
```

将 NavigationPage 值更改为“/Pages/MainPage.xaml”，一切正常。

希望这可以帮助！

# java - JAVA IO - 请澄清

> ID：11749697
> 
> 赞同：3
> 
> 时间：2012-07-31T22:05:16.457
> 
> 标签：java, file, io, filereader, filewriter

我是一个新手，我真的很想学习这个概念，而不仅仅是复制和粘贴代码。我想了解如何准确地使用 Jave IO，但看到我的不同版本的代码感到困惑和失望。

所以我自己做了笔记，想和这里的专家确认一下我是否做对了。这些仅供我自己参考。我知道这并不完美，但***如果您能确认它们是否正确，我将不胜感激。***

使用 BufferedWriter 和 FileWriter 写入文本文件（作为字符）。缺点是您不能编写原始数据类型。

前任：

```
BufferedWriter bw= new BufferedWriter (new FileWriter("a.txt", true)); 
String x;
while ((x=bw.readLine())!=null){
bw.newLine();
bw.write(x);
bw.flush();} 
```

使用 BufferedReader 和 FileReader 读取文本文件（作为字符）

前任：

```
BufferedReader br = new BufferedReader (new FileReader("b.txt")); 
String x;
while ((x=br.readLine())!=null){
System.out.println(x);} 
```

使用 DataOutputStream 和 FileOutputStream 写入文本文件（二进制）。优点是您可以编写原始数据类型以及字符串。

前任：

```
DataOutputStream dos = new DataOutputStream(new FileOutputStream("out.txt"));
dos.writeInt(cityIdA);    // int cityIdA = 9897;         
dos.writeUTF(cityNameA); //  String cityNameA = "Green Lake City";  
dos.writeInt(cityPopulationA); //   int cityPopulationA = 500000;  
dos.writeFloat(cityTempA); //  float cityTempA = 15.50f; 
dos.flush(); 
```

使用 DataInputStream 和 FileInputStream 读取文本文件（二进制）。优点是您可以读取原始数据类型以及字符串。

前任：

```
DataInputStream dis = new DataInputStream(new FileInputStream("inp.txt"));
int cityId1 =dis.readInt();    // int cityIdA = 9897;         
String cityName1 =dis.readUTF(); //  String cityNameA = "Green Lake City";  
int cityPopulation1 =dis.readInt(); //   int cityPopulationA = 500000;  
float cityTemperature1 =dis.readFloat(); //  float cityTempA = 15.50f; 
```

**实际代码：**

```
import java.io.*; 

class b{

public static void main (String args[]) throws IOException{
int cityIdA = 9897;         
String cityNameA = "Green Lake City"; 
int cityPopulationA = 500000;         
float cityTempA = 15.50f;      

BufferedWriter bw = new BufferedWriter(new FileWriter("shahar.txt"));

bw.write("9897");  
bw.write("Green Lake City"); 
bw.write("500000"); 
bw.write("15.50"); 
bw.flush();             
bw.close(); 

DataOutputStream dos = new DataOutputStream(new FileOutputStream("out.txt"));

dos.writeInt(cityIdA);      
dos.writeUTF(cityNameA);
dos.writeInt(cityPopulationA); 
dos.writeFloat(cityTempA);
dos.flush();

BufferedReader br = new BufferedReader (new FileReader("shahar.txt")); 
String x;
while ((x=br.readLine())!=null){
System.out.println(x);}

DataInputStream dos1 = new DataInputStream(new FileInputStream("out.txt"));
int cityId1 = dos1.readInt();    // int cityIdA = 9897;     
System.out.println( cityId1);
String cityName1 =dos1.readUTF(); //  String cityNameA = "Green Lake City";  
System.out.println(cityName1);
int cityPopulation1 =dos1.readInt(); //   int cityPopulationA = 500000;  
System.out.println(cityPopulation1);
float cityTemperature1 =dos1.readFloat(); //  float cityTempA = 15.50f; 
System.out.println(cityTemperature1);
 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:17:43.423

您的代码主观上存在风格问题。我会把你的例子放在这里，就好像我自己写的一样。

## 示例 2

（出于某种原因，我将其放在示例 1 之前）

```
BufferedReader br = new BufferedReader (new FileReader("b.txt")); 
String x;

while ((x = br.readLine()) != null)
{ // changed style, but otherwise fine
    System.out.println(x);
} 
```

## 示例 1

```
// borrowed reader from example 1
BufferedReader br = new BufferedReader (new FileReader("b.txt")); 
BufferedWriter bw = new BufferedWriter (new FileWriter("a.txt", true)); 
String x;

// this part didn't work.  You were trying to read from a writer, as you write to it.
// if this were an object capable of reading and writing at the same time, you would
// run into issues because they wouldn't be rewinding after each operation and you'd
// end up with a combination of unexpected mirrored lines and garbled crap.

// changed loop to read from reader.  reads data from one file, line by line, and
// writes to another.
while ((x = br.readLine()) != null) 
{
    bw.write(x);  // in the other order, file will start with a blank line
    bw.newLine(); // in this order, file will end with one instead
}
bw.flush(); // its better if this is not in the loop 
```

## 示例 3 和 4

示例 3 和 4 很好。如果您需要将大量原始类型写入二进制文件，您将使用类似的东西。其他示例更适合阅读文本。

既然你是新手，我也给你一些随机建议：

*   不要责怪一种语言的缺点，要学会克服它们。（适用于所有语言）
*   线程并不是所有问题的解决方案。如果您需要多个，请为自己编写一个调度程序。
*   通常有很多方法可以做同样的事情，但通常一种方法比其他方法更正确。
*   不要现在写代码，因为你以后会讨厌自己。
*   您选择使用哪种风格无关紧要，但要坚持下去。也就是说，我不喜欢你的。:)
*   无论您选择哪种风格，请确保您在任何情况下都能轻松阅读。
*   你的计算机没有无限的内存，不要写代码假装它有。所有其他资源也是如此。没有人喜欢贪吃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:59:46.180

我不太确定您的问题的格式是否会收到有益的答案。

我可以说：

“在你的第一个例子中：

```
BufferedWriter bw= new BufferedWriter (new FileWriter("a.txt", true)); 
String x;
while ((x=bw.readLine())!=null) {
    bw.newLine();
    bw.write(x);
    bw.flush();
} 
```

`bw.readLine()`是不正确的。BufferedWriter 是一个编写器类 - 它不包含 readLine() 方法。您应该使用 BufferedReader 从文件中读取。

除了明显错误的代码缩进之外，您的其余示例都是“正确的”。

但是从大局来看，这样说并不能真正帮助你。你写问题的方式让我相信你开始学习 java 并且可能对一般的编程很陌生：那很好。但是，我认为这不好：

`...[I] was confused and disappointed to see so many different versions of code... So I made my own`

这是不好的。虽然看到这么多不同的方式来实现一个目标可能会让人不知所措，但编程没有“正确”的方式来做事（在大多数情况下......不需要与初学者争论语义）。Java API 为您提供了一些方法和工具来做*一些事情*。在初学者编程的范围内，当涉及到使用方法本身时，你不应该担心什么是“正确的”——你应该简单地*熟悉*这些方法并理解*这些方法可以做一些事情，我可以将它们逻辑地结合在一起来完成一个目标。*

您可以查找“如何写入文件”并获得数百个彼此不同的示例 - 当另一个人用谷歌搜索“如何从文件中读取”并偶然发现这个 StackOverflow 问题并阅读您的笔记时会发生什么? 我们可以将您的笔记放在“另一个从文件中读取的稍微不同版本的代码”中。

通常，我会说对如何做这样的事情做一些笔记很好 - 如果你正在学习编程课程并且会逐字测试。在你的情况下，我会劝阻它。我觉得（关键字*感觉*......我可能是错的）你要编译你的笔记，开始编程，说“我需要从文件中读取一些东西，我该怎么做呢？” 然后从笔记中复制/粘贴代码。那不会教你任何东西。您需要考虑“我知道 BufferedReader 类可用于从文件中读取 - 让我看看 javadocs 并想出一种逻辑方式来应用其方法在这种特定情况下从文件中读取。”

JavaDocs 是您的朋友。如果您不使用“笔记”并简单地编写练习程序以熟悉使用 API，您将学习得更快。我认为这样的“笔记”对于真正成为精通任何语言的程序员会适得其反。

抱歉，如果我以我的方式回答完全偏离了基础。只是看着你。也许逐字记住笔记是你的学习方式。这也很酷。请记住，当您说`I would appreciate if you could confirm whether [this code is] correct.`“正确”时没有真正的意义。该代码有效。知道代码为什么起作用（或者学习自己运行代码以查看发生了什么并在它不起作用时修复它......）更为重要。

祝你好运！

# file - 带有动态参数的批处理文件

> ID：11749700
> 
> 赞同：1
> 
> 时间：2012-07-31T22:05:36.477
> 
> 标签：file, batch-file, arguments

我需要一些帮助来编写批处理文件；它启动另一个需要动态参数的应用程序。

我尝试了以下方法，但系统找不到指定的路径：

```
 start nw.exe -config "C:\NWconfig\i1.txt" -v -t > i1.rez 
```

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:47:38.353

```
FOR /F "usebackq tokens=1,2* delims=," %%G IN ("C:\NWconfig\i1.txt") DO SET PARAM=%%G
start nw.exe -config %PARAM% -v -t > i1.rez 
```

这将读取 i1.txt 内容并将其作为参数传递给 nw.exe。

# jquery - jQuery Masonry 不适用于 jQuery 选项卡

> ID：11749701
> 
> 赞同：1
> 
> 时间：2012-07-31T22:05:37.167
> 
> 标签：jquery, grid, jquery-masonry, jquery-tabs

我在网站上有一个选项卡式元素，并且在每个选项卡中都使用了 jQuery Masonry 脚本。唯一的问题是 Masonry 网格仅适用于第一个选项卡中的内容，但我需要它来处理每个选项卡中的内容。

我尝试为每个选项卡重命名容器，但似乎没有任何效果。

这是网站：http: [//joltentertainment.com/services-2/](http://joltentertainment.com/services-2/)

这是我的代码：

```
 <ul class="services-tabs">
        <li><a href="#tab1">Entertainment</a></li>
        <li><a href="#tab2">Ambiance & Décor</a></li>
        <li><a href="#tab3">Success</a></li>
        <li><a href="#tab4" class="av">A/V Rentals</a></li>
    </ul>

    <div id="services-wrap">

        <div id="tab1" class="tab">

            <div id="services-container">

                <div class="module">
                    <h3 class="service">Emcees</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2782_1.jpg&amp;h=172&amp;w=278&amp;zc=1"  title="" width="278" height="172" /></div>
                        <div class="med-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2443_0.jpg&amp;h=82&amp;w=188&amp;zc=1"  title="" width="188" height="82" /></div>
                        <div class="med-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2787_1.jpg&amp;h=82&amp;w=188&amp;zc=1"  title="" width="188" height="82" /></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Percussionists</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today. Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd!
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Elegant Event Furniture</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Fabric Backdrops</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Photobooths</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Videography</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="clear"></div>

            </div>

        </div>

        <div id="tab2">
            <h2 class="services">Entertainment</h2>
            <p>sdlfkjgskjfgl</p>
        </div>

        <div id="tab3">
            <h2 class="services">Entertainment</h2>
            <p>s,djghlkfg</p>
        </div>

        <div id="tab4" class="tab">

            <div id="services-container">

                <div class="module">
                    <h3 class="service">Emcees</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2782_1.jpg&amp;h=172&amp;w=278&amp;zc=1"  title="" width="278" height="172" /></div>
                        <div class="med-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2443_0.jpg&amp;h=82&amp;w=188&amp;zc=1"  title="" width="188" height="82" /></div>
                        <div class="med-thumb"><img src="<?php bloginfo('template_url'); ?>/scripts/timthumb.php?src=http://joltentertainment.com/wp-content/gallery/the-worlds-best-prom/em1_2787_1.jpg&amp;h=82&amp;w=188&amp;zc=1"  title="" width="188" height="82" /></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Percussionists</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today. Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd!
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Elegant Event Furniture</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Fabric Backdrops</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Photobooths</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="module">
                    <h3 class="service">Videography</h3>
                    <div class="mini-gallery">
                        <div class="big-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                        <div class="small-thumb"></div>
                    </div>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                    <p>
                        Great for all events, an Emcee can liven up events, help with announcements, encourage participants in team building or audience participation exercises, and excite your crowd! Hire our high-quality Emcee's from Jolt Entertainment for your wedding, school dance, corporate event today.
                    </p>
                </div>

                <div class="clear"></div>

            </div>

        </div><!-- END TAB A/V RENTALS -->

        <script type="text/javascript">
            $(function(){
                $('#services-container').masonry({
                  itemSelector: '.module',
                });
            });

        </script>

    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:18:55.733

我有同样的问题。

监听选项卡上的点击事件，然后触发砌体效果。

```
var $j = jQuery.noConflict();
    $j(document).ready(function() {
        $j('.services-tabs li a').click(function() {
            var container = $j('.mini-gallery');

            container.imagesLoaded( function(){
            container.masonry({
                itemSelector : '.small-thumb'
              });
            });
        })
}); 
```

# performance - 高效加载 YouTube

> ID：11749703
> 
> 赞同：0
> 
> 时间：2012-07-31T22:05:38.780
> 
> 标签：performance, internet-explorer, asynchronous, youtube, freeze

YouTube 建议您加载视频的方式如下：

```
<iframe id="ytplayer" type="text/html" width="640" height="360" src="http://www.youtube.com/embed/Zhawgd0REhA" frameborder="0" allowfullscreen> 
```

这会将视频加载为 iframe，以便他们可以检测 iOS 或其他设备并根据需要提供 swf 或 HTML5 播放器。

这些片段来自他们的 Player API Demo。[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

不幸的是，在 IE6-9 中，这会导致严重的速度下降 - 浏览器似乎冻结了多达 5 秒，即使播放器是页面上唯一的东西并且没有设置为自动播放。此外，这个“演示”有一点讽刺意味，因为他们根本没有按照他们推荐的方式加载播放器，而是通过他们放在一起的自定义编写的 Google AppEngine/AppSpot 应用程序加载它——实际上确实如此在 IE 中的演示中加载的性能比使用 Google 推荐的代码段时更高。

其他人遇到过这种情况吗？有没有好的解决方案？

# mysql - sql查询有助于对同时具有字符串和数字的字段进行排序

> ID：11749709
> 
> 赞同：0
> 
> 时间：2012-07-31T22:06:05.247
> 
> 标签：mysql, sql

我有一个名为 source_recid 的文本字段。它在其中存储半串半数之类的字符串。

例子

```
shop.orders.32442 
```

语法是`DATABASENAME.TABLENAME.RECID`

我的目标是扫描这个 col 并找出其中最大的 RECID（整数）。

所以，在这样的情况下

```
shop.orders.32442
shop.orders.82000
shop.orders.34452 
```

这将是 source_recid 为 的记录`shop.orders.82000`。为什么？因为**82000**恰好是最大的整数。

什么 SQL 语句可以让我获得该记录？

一种选择是创建一个新列（ the_ids ）并移动其中的所有整数，然后运行类似这样的操作

```
select source_recid from mytable 
  where source_recid like 'shop.orders.%' 
    order by the_ids DESC 
     LIMIT 1 
```

有没有办法在不通过这一步的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:26:19.567

```
SELECT CAST(SUBSTRING_INDEX(field,'.',-1) AS INT) AS RID
FROM yourtable
WHERE
RECID LIKE 'shop.order.%'
ORDER BY
RID DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:14:53.860

首先，除非您所有的 RECID 永远都是五个字符，否则您提出的选择将不起作用，因为“shop.order.9”会比“shop.order.10”大，这是错误的。

我认为我们需要在这里做的是提取数字部分，将其转换为整数，然后按此排序。现在，我无权访问 mySQL，所以这可能不完全正确，但应该很接近......

```
SELECT
    CAST(SUBSTRING_INDEX(RECID,'.',-1) AS INT) AS RecIdNumber
FROM
    table
WHERE
    RECID LIKE 'shop.order.%'
ORDER BY
    RecIdNumber DESC
LIMIT
    0, 1 
```

这将占用最后一个点之后的部分，将其转换为 INT，将其命名为“RecIdNumber”，然后按此排序。

我希望这有帮助。

# r - 使用具有周期性平滑器的 GAM 预测新数据时返回错误

> ID：11749713
> 
> 赞同：1
> 
> 时间：2012-07-31T22:06:11.467
> 
> 标签：r, gam

如果这更适合 CrossValidated，我们深表歉意。

我正在使用 R 中的 mgcv 包将 GAM 模型拟合到二项式数据。协变量之一是周期性的，因此我指定了`bs = "cc"`循环三次样条。我在交叉验证框架中执行此操作，但是当我使用该`predict`函数拟合我的保留数据时，出现以下错误：

```
Error in pred.mat(x, object$xp, object$BD) : 
  can't predict outside range of knots with periodic smoother 
```

这是一些应该复制错误的代码：

```
# generate data:
x <- runif(100,min=-pi,max=pi)
linPred <- 2*cos(x) # value of the linear predictor
theta <- 1 / (1 + exp(-linPred)) # 
y <- rbinom(100,1,theta)
plot(x,theta)
df <- data.frame(x=x,y=y)

# fit gam with periodic smoother:
gamFit <- gam(y ~ s(x,bs="cc",k=5),data=df,family=binomial())
summary(gamFit)

plot(gamFit)

# predict y values for new data:
x.2 <- runif(100,min=-pi,max=pi)
df.2 <- data.frame(x=x.2)
predict(gamFit,newdata=df.2) 
```

任何关于我哪里出错的建议将不胜感激。也许手动指定结落在 -pi 和 pi 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:17:04.973

第一次运行时我没有收到错误，但我确实在第二次尝试时复制了错误。也许您需要使用`set.seed(123) #{no error}`and `set.seed(223) #{produces error}`。看看这是否会产生部分成功。我认为您只是在推导和验证数据集中看到了一些点相对较少的变化。适合 GAM 的 100 分并不是特别“慷慨”。

查看 gamFit 对象，结的范围似乎被编码在 中`gamFit$smooth[[1]]['xp']`，因此这应该将您的输入限制在适当的范围内：

```
 x.2 <- runif(100,min=-pi,max=pi); 
 x.2 <- x.2[findInterval(x.2, range(gamFit$smooth[[1]]['xp']) )== 1]

 # Removes the errors in all the situations I tested
 # There were three points outside the range in the set.seed(223) case 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:37:34.083

问题是您的测试集包含不在训练集范围内的值。由于您使用了样条曲线，因此在 的最小值和最大值处创建了结`x`，并且您的拟合函数未定义在该范围之外。因此，当您测试模型时，您应该排除那些超出范围的点。以下是您如何排除测试集中的点：

```
set.seed(2)
... <Your code>
predict(gamFit,newdata=df.2[df.2$x>=min(df$x) & df.2$x<=max(df$x),,drop=F]) 
```

或者，您可以将模型中的“外部”节点指定为整个数据的最小值和最大值。我不知道该怎么做。

# tfs - TFSPreview.com 和 Azure 持续部署 TFS 中的多个解决方案

> ID：11749718
> 
> 赞同：1
> 
> 时间：2012-07-31T22:06:40.880
> 
> 标签：tfs, azure-deployment

我最近试用了 Microsoft 的 TFS-in-the-cloud 服务 (TFSPreview.com)，感觉 TFS 团队终于“明白了”。TFSPreview.com 可能会将我们从 GIT+bug tracker+powershell 转换为集成的工作流确实有效（持续部署很棒！）。

嗯，差不多。我们在 TFSPreview.com 上的“一个项目”测试非常适合持续部署，但我们的“真实”源代码控制看起来像

```
Root
\--Solution1
   \--ProjectA(IIS)
   \--ProjectB(IIS)
\--Solution2
   \--ProjectC(AzureWebRoleProject) 
```

***问题：***如何向 TFSPreview.com/Azure's portal/VS2012 表达以下内容？

*   root 中的所有内容都必须在 TFS 中进行版本控制
*   但是只有 ProjectC 应该注册在 Azure 的持续部署中

持续部署当前尝试将*整个根*部署到 Azure，果然失败了。附带说明一下，如果他们也为 Azure 云服务启用 GIT 的持续部署，那就太好了（不仅仅是现在的 Azure 网站）

谢谢席德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:08:14.923

这实际上已经通过[TFS 部署到 Windows Azure](http://social.msdn.microsoft.com/Forums/en-US/azuretfs/threads)论坛的在线论坛进行了讨论。

具体来说，MS 代表表示目前不支持此功能（请参阅[解决方案中的多个云项目的持续部署](http://social.msdn.microsoft.com/Forums/en-US/azuretfs/thread/7409aed1-a58a-4f24-ae44-0434b41d693f)），但他们需要为此提供解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:25:58.197

这是一种可能的解决方法，可以让您感觉喜欢洗澡。

```
Root
\--Solution2
   \--ProjectC

Root-Branch
\--Solution2
   \--ProjectC
\--Solution1
   \--ProjectA
   \--ProjectB 
```

*   *签入时似乎仅部署了主分支（根）。*
*   想要部署时合并到 Root。
*   永远不要将 Solution1 合并回 Root。

# css - IE8：伪元素溢出后不渲染

> ID：11749720
> 
> 赞同：0
> 
> 时间：2012-07-31T22:07:02.770
> 
> 标签：css, internet-explorer-8

我已经设置了这个 jsFiddle 来说明这个问题。我正在使用 CSS 伪元素来创建一个指针，它偏移了父元素。

[http://jsfiddle.net/fLTFP/](http://jsfiddle.net/fLTFP/)

它在 FireFox 和 Webkit 浏览器以及 IE 9 中运行良好，但在 IE 8 中指针被剪裁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:11:58.950

[http://www.w3schools.com/cssref/sel_after.asp](http://www.w3schools.com/cssref/sel_after.asp)

并注意“**注意：**要在 IE8 中工作： 必须声明[<!DOCTYPE> 。”](http://www.w3schools.com/tags/tag_doctype.asp)

虽然它在 ie8 中对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:04:04.760

这个问题与`filter`声明有关。它正在创建渐变，但正在改变 IE 呈现元素的方式。删除它固定剪辑。

# c++ - 打印一个指针

> ID：11749725
> 
> 赞同：7
> 
> 时间：2012-07-31T22:07:43.593
> 
> 标签：c++, iostream

为什么

```
#include <iostream>
using namespace std;

int main() {
  cout << (char*)0x10 << endl; 
} 
```

段错误，但是

```
#include <iostream>
using namespace std;

int main() {
  cout << (void*)0x10 << endl; 
} 
```

似乎工作得很好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T22:08:37.943

因为

```
cout::operator <<(void*) 
```

打印内存地址，并且

```
cout::operator <<(char*) 
```

打印一个以 null 结尾的字符数组，当您尝试`char`从`0x10`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T22:09:35.893

被[`ostream::operator<<`](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt)重载，有一个[版本`char*`](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2)将给定的指针解释为以空字符结尾的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T22:09:00.117

`<<`with有一个特殊的重载`char*`，因此可以轻松输出 C 风格的字符串。

因此

```
cout << (char*)0x10 << endl; 
```

试图打印出`(char*)0x10`它应该查看的不是内存的字符串。

# c++ - 缺少预期的对象构造

> ID：11749726
> 
> 赞同：3
> 
> 时间：2012-07-31T22:07:45.320
> 
> 标签：c++, c++11

```
class A
{
public:

    A ()
    {
        wcout << L"Empty constructed." << endl;
    }

    A (LPCWSTR Name)
        : m_Name(Name)
    {
        wcout << L"Constructed." << endl;
    }

    friend void swap (A& Lhs, A& Rhs)
    {
        using std::swap;

        swap(Lhs.m_Name, Rhs.m_Name);
    }

    A (A&& Other)
    {
        wcout << L"Move constructed." << endl;

        swap(*this, Other);
    }

    A (const A& Other)
        : m_Name(Other.m_Name)
    {
        wcout << L"Copy constructed." << endl;
    }

    A& operator= (A Other)
    {
        wcout << L"Assignment." << endl;

        swap(*this, Other);

        return *this;
    }

    ~A ()
    {
        wcout << L"Destroyed: " << m_Name.GetString() << endl;
    }

private:

    CString m_Name;
};

int
wmain ()
{
    A a;

    a = A(L"Name"); // Where is the construction of this temp object?

    return 0;
} 
```

这是我为上述代码得到的输出：

```
Empty constructed.
Constructed.
Assignment.
Destroyed:
Destroyed: Name 
```

请参阅带有注释的行。我期望在那里构造一个临时对象，并且 operator= 中的参数 Other 将从该临时对象中移动构造。这里发生了什么事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T22:19:08.577

显示“已构造”的输出实际上是该临时对象构造的反馈。

如果您正在寻找`Other`复制赋值运算符的参数的附加复制构造（或移动构造），它可能已被复制省略消除。Your`A(L"Name")`立即被构造并用作该`Other`参数。不执行额外的复制（或移动）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:20:05.980

您可以使用交互式调试器亲自查看。但是，您对“名称”的构造位置的回答是：

```
A (LPCWSTR Name) 
    : m_Name(Name) 
{ 
    wcout << L"Constructed." << endl; 
} 
```

和

```
 a = A(L"Name"); 
```

您的代码在代码行构造了一个空对象`A a;`。

然后它构造了“名称”。

然后它交换了两者`CString m_Name;`（由输出显示`Assignment`）。

然后它破坏了持有“名称”（）的原始对象`A(L"Name")`。

然后它破坏了原来的空对象，该对象现在在其`m_Name`.

# macos - Checkpoint Secure Client：Mac OS 10.8 上的“与 VPN 服务的连接丢失”

> ID：11749731
> 
> 赞同：7
> 
> 时间：2012-07-31T22:08:12.983
> 
> 标签：macos, startup, vpn, launchd

当我在我的 Mac OS X 10.8 上从 Checkpoint（[从这里）安装安全客户端时，它可以工作。](https://supportcenter.checkpoint.com/supportcenter/portal/user/anon/page/default.psml/media-type/html?action=portlets.DCFileAction&eventSubmit_doGetdcdetails=&fileid=15261)

但是，一旦我重新启动笔记本电脑 1-2 次，它将不再显示错误：

> 与 VPN 服务的连接丢失

每当单击菜单栏图标中的选项或尝试连接时。

每 10 秒，这会写入 system.log：

```
com.apple.launchd[1] (com.checkpoint.epc.service[1211]): Exited with code: 1
com.apple.launchd[1] (com.checkpoint.epc.service): Throttling respawn: Will start in 10 seconds 
```

是否有任何解决方案或可能的原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T03:25:19.983

由于之前的答案没有直接回答这个问题，我会在这里发布。

我不确定根本原因，但是当检查点配置文件之一被截断时会发生这种情况。通过 cd'ing 修复它，`/Library/Application Support/Checkpoint/Endpoint Connect`然后使用以下命令从备份文件中复制：`sudo cp Trac.config.bak Trac.config`. 请注意，这是在`/Library`* *not* `~/Library`中。这是一个全局设置，不是每个用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-05T21:13:54.660

尝试在启动时禁用加载端点客户端后，我遇到了同样的问题。从这里下载最新的包更容易[https://www.checkpoint.com/products/remote-access-vpn](https://www.checkpoint.com/products/remote-access-vpn)，然后卸载并再次安装客户端。现在它像以前一样工作。

# google-maps - Google Maps API v3：灰盒，无地图

> ID：11749742
> 
> 赞同：34
> 
> 时间：2012-07-31T22:09:05.170
> 
> 标签：google-maps

作为一个更大项目的一部分，我们正在尝试使用 Google 的 Map API v3 在网站上获取地图。我遵循了谷歌制定的最简单的步骤，我尝试从其他工作地图中直接复制代码。但无论我做什么，我们得到的只是一个灰色的盒子，没有地图。

使用 Firebug，我可以看到试图填充地图的信息，但它根本没有显示。我试过 jquery，专门为谷歌地图制作的 jquery 库，没有任何效果。我一直在互联网上和所有通过谷歌的 api 帮助文件。另外，问题不是本地的，因为我已将文件上传到多个服务器并在多个浏览器和计算机上对其进行了测试。没有任何工作。

在这一点上，我忽略了一些愚蠢的事情。这是我的代码。

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?&sensor=true">
</script>  
<script type="text/javascript">

    function load() 
    {
        var mapDiv = document.getElementById("map");
        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var mapOptions = 
        {
            //zoom: 8,
            center:latlng,
            //backgroundColor: '#ff0000',
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            imageDefaultUI: true
        };
        var map = new google.maps.Map(mapDiv, mapOptions);

        function createMarker(point, text, title) 
        {
          var marker =
          new GMarker(point,{title:title});
          return marker;
        }
    }

</script>
  </head>
  <body onload="load()">
    <div id="map" style="width: 800px; height: 400px;"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-31T22:15:29.037

这对我有用。您只需**设置**参数`zoom`：

**更新（@** **user2652379** ）：您需要同时设置`zoom`和`center`选项。只是`zoom`行不通。

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
</script>  
<script type="text/javascript">

    function load() 
    {
        var mapDiv = document.getElementById("map");
        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var mapOptions = 
        {
            zoom: 8,
            center:latlng,
            //backgroundColor: '#ff0000',
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            //imageDefaultUI: true
        };
        var map = new google.maps.Map(mapDiv, mapOptions);
       // map.addControl(new GSmallMapControl());
       // map.addControl(new GMapTypeControl());
       // map.addMapType(ROADMAP);
       // map.setCenter(
       // new GLatLng(37.4419, -122.1419), 13);
    }

</script>

  </head>
  <body onload="load()">
    <div id="map" style="width: 800px; height: 400px;">&nbsp;</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-07-12T15:17:53.387

另一种情况是地图容器在您初始化地图时隐藏。例如，您在引导`show.bs.modal`事件中执行此操作，而不是`shown.bs.modal`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-04T14:21:57.147

我遇到了同样的问题，并且在 stackoverflow 上遇到了很多主题，但没有一个为我提供有效的解决方案。我最终发现它是由我添加的一行 css 引起的。

地图中的所有元素都继承了一个

```
overflow:hidden; 
```

通过将以下行添加到我的 CSS 中，它已修复

```
#map * {
    overflow:visible;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-22T13:17:38.123

我想对此添加一个快速评论，因为我对参数集*有同样的问题。*`zoom`我发现问题出在我的主题的 css 上。在我的基本主题中，我有以下 CSS：

```
img, embed, object, video {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
} 
```

这弄乱了地图的渲染，在我删除它之后，我的地图渲染得很好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-15T19:47:52.763

还要注意地图中心或标记的纬度或经度值无效。例如，[这个小提琴](https://jsfiddle.net/56jjobpc/)显示了**死亡的灰色地图，**因为地图中心位于纬度 131.044，这是无效的（不是从 +90:-90 开始）。

```
function initMap() {
  var uluru = {lat: 131.044, lng: -25.363};
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: uluru
  });
  var marker = new google.maps.Marker({
    position: uluru,
    map: map
  });
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-25T09:19:10.040

就我而言，我在 iview 库中使用 vue 和模态处理地图；并且在第一次渲染期间它工作，但任何其他渲染显示**死亡的灰色屏幕**。我通过设置超时功能以在 50 毫秒后显示地图来解决此问题，从而为模态提供足够的时间来渲染和可见。

```
//Time out is crucial for the map to load when opened with vue
setTimeout(() => {
   this.showMap(id);
}, 50); 
```

上面的例子是一个较早的修复和一个快速破解，我意识到你需要做的就是等待下一个滴答声，在 vue 上你可以通过

```
async mounted(){
   await this.$nextTick()
   this.showMap(id)
} 
```

或者如果您对异步等待不满意，您可以尝试回调选项

```
mounted(){
   Vue.nextTick(function () {
     this.showMap(id)
   })
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-22T19:29:46.330

我遇到过同样的问题。我在 Jquery *Accordion*中使用谷歌地图，当我展开 div 时，地图只包含一个灰色区域。我能够通过在指定的手风琴标题上触发单击事件并将地图容器设置为可见来解决此问题。

**脚本：**

```
<script type="text/javascript">
    var map;

    function initMap(lat, lng) {
        var myCenter = new google.maps.LatLng(lat, lng);

        var mapOptions = {
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: myCenter
        };

        map = new google.maps.Map(document.getElementById('map'), mapOptions);

    }
    function ViewMap() {
        var latlng = document.getElementById('<%=txt.ClientID%>').value.split(','); // This is where my latlng are placed: 25.12312,55.3212333
        $("#showmap").show();
        // Sorry for mixing up Jquery and javascript.
        initMap(latlng[0], latlng[1]);
    }

</script> 
```

**ASPX 文件/HTML 标记：**

```
<h3 id="lMap" onclick="ViewMap();"><i class="fa fa-map-o" onclick="ViewMap();"></i>Location Map</h3>
<div style="height:auto" id="showmap">
   <div id="map" style="width: 850px; height: 550px; overflow: visible"></div>
</div> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-05T14:13:15.430

我意识到这是一个旧线程，但这可能对将来的某人有所帮助。

为此苦苦挣扎了几个小时，但是在发现如果地图在不可见的情况下呈现时，Google Map 会以灰色框覆盖呈现，我使用了一些 jQuery 来使我的应用程序仅在地图是实例化和呈现地图时可见，像这样：

```
if ($("#myHomeMapHolder").is(":visible")) {
        if (homemap == null) {

            homemap = new google.maps.Map(document.getElementById("myHomeMapHolder"), myOptions);
            google.maps.event.addListener(homemap, 'click', function (event) {
                placeHomeMarker(event.latLng);
            });
        } else {
            homemap.setCenter(myLatlng);
        }

        if (homemarker == null) {
            homemarker = new google.maps.Marker({
                position: myLatlng,
                map: homemap,
                title: "Home"
            });
        } else {
            homemarker.setPosition(myLatlng);
        }
} 
```

瞧，我的地图只有在地图持有者可见时才会渲染，所以它永远不会用灰色框渲染。

对于任何想知道的人，myHomeMapHolder 是地图所在的 div。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-03T16:07:20.733

就我而言，有人在一些 responsive.css 文件中放弃了这个小奖品：

```
img {
  max-width: 100% !important;
} 
```

删除它，现在一切都很好。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-03-24T13:14:19.303

我也在处理一个网站时遇到了这个问题。我们正在对所有`<img>`标签做一些事情以提高响应能力。此修复程序适用于我们的地图：

```
img {max-width: initial !important;} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-12T14:54:48.990

对于那些不管这里提供的好的解决方案可能会被卡住的人，请尝试直接在 html 标记而不是样式表中设置容器的高度和宽度，即。

`<div id="map-container" style="width: 100%; height: 300px;"></div>`

快乐的映射！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-25T09:10:45.643

这可能不是每个人的情况，但也许它可以帮助某人。

我在我的地图中使用`data`放置在地图元素上的属性创建标记，如下所示`data-1-lat="2" data-1-lon="3" data-text="foo"`：**我根据它们在数据属性中的放置顺序**将它们放入一个数组中。

问题是 IE 和 Edge（出于某种疯狂的原因）**颠倒了 HTML 标签中数据属性的顺序**，因此我无法从数据属性中正确提取它们。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-21T01:02:49.370

现有的答案都没有帮助我，因为我的问题是 Apollo 正在向我的[MapOptions 对象](https://developers.google.com/maps/documentation/javascript/reference/map#MapOptions)添加额外的属性（“__typename”字段） 。

换句话说，JSON 看起来像这样：

```
mapOptions {"__typename":"MapOptions","center":{"__typename":"GeoCoordinates","lat":33.953056,"lng":-83.9925},"zoom":10} 
```

一旦我意识到这些额外的属性是有问题的，这就是我解决它的方法（使用 TypeScript）：

```
function getCleanedMapOptions(mapOptionsGql: google.maps.MapOptions): google.maps.MapOptions {
  const mapOptions = { ...mapOptionsGql };
  const lat: number = mapOptions.center.lat as number;
  const lng: number = mapOptions.center.lng as number;
  const mapOptionsCleaned = {
    center: new google.maps.LatLng({ lat, lng }),
    zoom: mapOptions.zoom,
  };
  return mapOptionsCleaned;
}

export function createMap(mapOptions: google.maps.MapOptions): google.maps.Map {
  const mapOptionsCleaned = getCleanedMapOptions(mapOptions);
  const map = new google.maps.Map(document.getElementById('map') as HTMLElement, mapOptionsCleaned);
  return map;
} 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-10-30T14:39:15.380

在我的情况下（提交时版本是 3.30），这是因为 div id 必须是“map”

```
<div id="map"></div>
...
document.getElementById("map") 
```

# android - 按下时可滚动的textview黑色？

> ID：11749743
> 
> 赞同：3
> 
> 时间：2012-07-31T22:09:07.040
> 
> 标签：android, textview, scrollable, clickable

我创建了一个文本视图，如果文本太长，它将使其可滚动。但是，如果您单击它或将手指放在它上面，它会像被单击一样变黑。有谁知道使它不能点击但仍然可以滚动的代码？谢谢你！

在我的 xml 中定义了其余部分：

```
 TextView Dark=(TextView)findViewById(R.id.Quote); 
 Dark.setMovementMethod(new ScrollingMovementMethod()) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:47:50.370

只需禁用 TextView (enabled=false)，它仍然可以滚动。要克服默认情况下在禁用的 TextView 中显示的灰色文本，请显式设置 textColor。

```
<TextView
        ...
        android:enabled="false"
        android:textColor="#FFFFFFFF"
        ...
> 
```

# c# - 数据库模型及扩展方法

> ID：11749744
> 
> 赞同：0
> 
> 时间：2012-07-31T22:09:13.653
> 
> 标签：c#, asp.net, extension-methods, static-classes

在我的 ASP.NET 网站中，我创建了新的实体数据模型并将其与我的 MsSql 数据库连接起来。现在我可以使用 Model.Student 类，但该类没有方法。我尝试添加扩展方法，例如

```
public static class Functions{
     public static double calculateStudentScore(this Model.Student s){
          //implementation
     }
} 
```

当我创建新学生并尝试调用我的方法时，我看不到它，为什么会这样？

例如让我们假设`s`是类型`Student`

```
double score=s.calculateStudentScore();//I can't see my calculateStudentScore method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:14:06.950

您的 EF 模型是一个部分类。虽然我原则上同意扩展名应该是可见的，但与此同时，只需添加一个新文件，并将方法添加到类中。

# ruby-on-rails - rails 资产管道资产组未预编译数据表

> ID：11749746
> 
> 赞同：0
> 
> 时间：2012-07-31T22:09:22.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datatables, asset-pipeline

我开始构建一个使用 jquery-datatables-rails 的 rails 项目。当我把它放到我的 Gemfile 中时，我没有把它放到资产组中。在开发中一切正常。当我将它投入生产时，我重新阅读了文档，发现它应该在资产组中，所以我将那行移到了我的 Gemfile 中。然后我执行了 rake assets:precompile 然后运行 ​​rails server -e production。

数据表不起作用。事实上，我可以让它工作的唯一方法是将该行从我的 Gemfile 中的资产组中取出并在开发模式下运行。我在互联网上阅读了很多关于此的相互矛盾的信息。

我把线路从资产组外移到资产组有什么问题吗？我希望能够在生产中运行它，并且我希望拥有一个与 jquery-datatables-rails 文档一致的 Gemfile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:24:39.407

不久前，为了解决我遇到的另一个问题，我移到了 app/assets/javascripts/application.js 的`require twitter/bootstrap`上方。`require jquery`结果，javascript 无法正常工作。将它移到正确的位置解决了问题，并且莫名其妙地没有导致旧问题再次出现。

所以解决方法是，确保 jquery 位于 application.js 文件的顶部。

# python - 在 Google App Engine 中哪里可以找到 webapp2 session.get 的详细语法？

> ID：11749751
> 
> 赞同：1
> 
> 时间：2012-07-31T22:09:45.083
> 
> 标签：python, google-app-engine, webapp2

我正在寻找所有 webapp2_extras 函数和 API 的所有变体的语法。

例如，我在 webapp2 网站上找不到定义 webapp2_extras session.get 的各种参数的地方。

例如，我通过反复试验发现我可以在 session.get 上定义一个默认值（例如 cntr = self.session.get('cntr', 0) ）但我找不到任何地方表明这可能是可行的结构。

谁能告诉我在哪里可以找到如此详细的文档？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:34:00.367

文档可以在[WebApp 改进](http://webapp-improved.appspot.com/)中找到。

在您的情况下，您可以使用`self.session.get('cntr', 0)`，因为 session 是一个类似字典的对象，因此它的 get 方法接收默认值作为参数。有关更多详细信息，请参阅[会话文档](http://webapp-improved.appspot.com/api/webapp2_extras/sessions.html)。

webapp extras 的文档在[这里](http://webapp-improved.appspot.com/index.html#api-reference-webapp2-extras)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:33:16.483

我知道 Bill G. 不是开源的忠实拥护者，但 webapp2 是开源的。如果文档中缺少某些内容，您可以在代码中找到它。

[https://github.com/moraes/webapp-improved/blob/master/webapp2_extras/sessions.py](https://github.com/moraes/webapp-improved/blob/master/webapp2_extras/sessions.py)

您将看到会话对象是从 python dict 派生的，因此您使用的 get() 函数是 python dict get() 函数，它允许使用默认值。

不过，您通过反复试验发现了这一点，这给我留下了深刻的印象。

# c# - 在客户端中获取 WCF SessionID

> ID：11749758
> 
> 赞同：0
> 
> 时间：2012-07-31T22:10:35.337
> 
> 标签：c#, wcf, soa

我正在编写一个 WCF 客户端并使用 ChannelFactory 为我的服务创建代理：

```
 [ServiceContract]
    interface Service {

        [OperationContract]
        void Operation();
    }

var proxy = ChannelFactory<MyServiceInterface>.CreateChannel(
            new BasicHttpBinding(),
            new EndpointAddress("http://localhost:8000/")); 
```

我将如何获得 SessionID？代理只有基本的 Object 方法以及在 MyServiceInterface 中定义的方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:22:42.180

尝试这个：

在您的 WCF 服务文件 (.svc) 中添加以下内容：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class Service1 : IService1
{
    public string SessionId()
    {
        return OperationContext.Current.SessionId;
    }
} 
```

在您的 WCF 服务接口中添加以下内容：

```
[ServiceContract(SessionMode = SessionMode.Required)]
public interface IService1
{
    [OperationContract]
    string SessionId();
} 
```

在您的客户端中，执行以下操作：

```
 ChannelFactory<IService1> factory = new ChannelFactory<IService1>(
        new WSHttpBinding(), new EndpointAddress("http://localhost:4213/Service1.svc"));
    IService1 proxy = factory.CreateChannel();

    Console.WriteLine(proxy.SessionId());

    ((IClientChannel)proxy).Close();
    factory.Close();

    Console.Read(); 
```

通过这样做，您可以获得在服务端创建的代理会话。只是要知道，何时`((IClientChannel)proxy).Close();`和`factory.Close();`被调用，然后代理将获得新会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:42:35.850

使 SessionId() 成为 OperationContract 并不是我想要的。如果我没有使用 ChannelFactory，而是通过扩展 ClientBase<> 创建了自己的代理，这让我可以访问 InnerChannel.SessionId 属性。

# java - Object.class.getName() 慢吗？

> ID：11749760
> 
> 赞同：4
> 
> 时间：2012-07-31T22:10:49.270
> 
> 标签：java, serialization, reflection, java-me, cldc

我在 Java ME 环境中编写代码，所以速度绝对是一个重要因素。我已经阅读了几个地方，任何类型的反射（即使是 Java ME 上允许的非常有限的数量）都可能是一个非常大的瓶颈。

所以，我的问题是：做的`String.class.getName()`慢吗？怎么样`myCustomObject.getClass().getName()`？用“java.lang.String”和“com.company.MyObject”之类的字符串常量替换它们会更好吗？

如果您想知道，我需要所有原语（以及非原语）的类名，因为 Java ME 不提供默认的序列化实现，因此我必须实现自己的。我需要一个通用的序列化解决方案，它既适用于跨网络的通信，也适用于本地存储（RMS，也适用于 JSR-75）

**编辑**

我正在使用 Java 1.3 CLDC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T09:53:43.027

`String.class.getName()`不会很慢，因为它的值将在执行之前加载。即编译器将在 line 执行之前放置它的值。 `myCustomObject.getClass().getName()`会比以前*慢一点*，因为它会在执行时被检索

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:16:49.043

反射不是*不自然*的慢；它和您预期的一样慢，但不会更慢。首先，通过反射调用方法需要从反射 API 中显而易见的所有对象创建和方法调用，其次，如果您通过反射调用方法，Hotspot 将无法通过调用进行优化。

调用`getClass().getName()`也不会比您预期的要慢：几个虚拟方法调用加上一个成员变量获取的成本。`.class`版本本质上是相同的，加上或减去一个变量提取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:19:32.263

我不能代表 Java ME，但我对在资源受限系统上使用反射的开销并不感到惊讶。我不认为它慢得令人难以忍受，但您肯定会看到将名称硬编码到变量中的改进。

既然你提到你正在研究序列化，我建议你看看它在[Kryo](https://code.google.com/p/kryo/)项目中是如何完成的。你可能会发现他们的一些方法很有用，你甚至可以在 Java ME 中使用它。（不幸的是，我对我没有经验）

# android - 从游标查询中检索值的奇怪行为

> ID：11749762
> 
> 赞同：0
> 
> 时间：2012-07-31T22:11:03.787
> 
> 标签：android

美好的一天，希望倾斜没有误导。请查看下面的代码片段并注意注释部分：

```
//if(cursor.moveToFirst()){
if(cursor.moveToNext() == true){

         // do {
                Log.d(TAG, "Column Name in bindview is " + columnName);
                String name = cursor.getString(cursor.getColumnIndexOrThrow(columnName));

                Log.d(TAG, " name is " + name);

           // } while(cursor.moveToNext());
       //}
   } 
```

现在只有当我使用时`cursor.moveToNext()`我才得到字符串的值。`"name"`如果我使用`do/while`上面代码或 cursor.moveTofirst() 中注释掉的语句，我得到字符串的空值。知道为什么会这样。

****背景****：* *正在`CursorAdapter`从`onLoadFinished()`.`CursorLoader`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:15:24.283

也许您正在尝试这样做：

```
// Get the column's index
int index = cursor.getColumnIndex(columnName); 
String name;

// You might want to check if the column exist with: 
// if(index == -1)
//    return;

// If you have move the Cursor's index, reset it:
// cursor.moveToFirst();

while(cursor.moveToNext()) { // == true is implied
    name = cursor.getString(index);
    Log.d(TAG, " name is " + name);
} 
```

首先找到循环外的列索引，除非更改游标，否则列索引不会改变。然后遍历所有有效结果。

# php - 使用 PHP 的 exec() 调用 python 脚本时出现“ImportError: No module named _SHA256”

> ID：11749767
> 
> 赞同：0
> 
> 时间：2012-07-31T22:11:12.940
> 
> 标签：php, python, import, exec

我编写了一个导入“SHA256.py”的python脚本“thescript.py”，它们都在同一个目录“/thedirectory/include/”中。

在 PHP 中，我这样做：

```
chdir('/thedirectory/include/');
$result = exec('thescript.py argument1 2>&1'); 
```

这给了我结果：

> 回溯（最近一次调用）：文件“thescript.py”，第 4 行，在？导入 SHA256 文件“/thedirectory/include/SHA256.py”，第 152 行，在？导入 _SHA256 ImportError：没有名为 _SHA25 的模块

导致此错误的 SHA256.py 行在这里：

```
try:
    import hashlib
    hashFactory = hashlib.sha256
except ImportError:
    #from Crypto.Hash import _SHA256
    import _SHA256  # <--- ERROR IS OCCURRING ON THIS LINE
    hashFactory = _SHA256 
```

如果我通过 SSH 从命令行运行它，它运行良好。为什么不能导入_SHA256？

老实说，我什至不明白包名之前的下划线在做什么。

“SHA256.py”中的行是`import _SHA256`在导入自身还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-26T12:48:13.087

这是因为通过 exec 执行时路径可能不同。

在 php 中通过 exec 命令执行 python 时检查路径

```
import sys
sys.path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:10:48.433

PHP 运行的 python 版本错误。

实际上`import hashlib`是失败了，尽管我没有注意到这一点，因为它在`try`块中，因此没有在该行引发错误。

# sql - 在 MS Access VBA 中加入记录集和表

> ID：11749771
> 
> 赞同：1
> 
> 时间：2012-07-31T22:11:42.473
> 
> 标签：sql, vba, ms-access

我正在尝试通过 VBA 加入带有记录集的表。这可能吗？我基本上想加入两张表，但其中一张表在我加入之前需要进一步过滤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:06:55.930

我怀疑你想要：

```
SELECT ID, field1, field2 
FROM Table1 a
INNER JOIN (
    SELECT ID, field3, field4
    FROM Table2
    WHERE field5 = 42 ) b
ON a.ID = b.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T15:52:02.990

据我所知，您不能在记录集上使用联接。即使有可能，它也需要过于复杂而无用的代码。）

我建议不要在连接中使用**记录集**，而是从记录集中创建一个临时**表**。

或者，使用您用来制作记录集的查询直接制作一个临时表。然后使用 SQL 查询将第一个表与临时表连接起来。
假设您的数据库中有一个表**table1**和**tableA**；

```
dim sqlString1 As String
dim sqlString2 As String
'the temporary table - this is what was in your recordset 
sqlString1 = "SELECT field1, field2 FROM table1 INTO tempTable"
'the join of existing tableA with the tempTable
sqlString2 = "SELECT field1, field2, fieldA, fieldB INTO joinedTable"& _
             "FROM table1"& _
             "JOIN tableA ON field1 = fieldA" 
CurrentDB.Execute sqlString1
CurrentDB.Execute sqlString2 
```

请注意，我将`JOIN`结果放在数据库的另一个表中。或者，您可以将结果保存在记录集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T13:44:18.070

我同意制作临时表。此外，根据本地表的大小，您可以创建一串值以传递给 SQL 服务器查询。（SELECT __ FROM __ WHERE ___ IN（值的字符串）。很棘手，但如果您的本地表很小并且连接显着减少了 SQL 查询结果，则可能很有用。

对于我的情况，本地表并没有减少我的服务器查询结果。所以我只是对我的本地表进行了更新。

# mysql - select case when not working as expected

> ID：11749773
> 
> 赞同：2
> 
> 时间：2012-07-31T22:11:43.710
> 
> 标签：mysql, sql, select, case

I'm trying to understand how this works but can't figure it out yet.

I have made this simple uery to test the case-when-then-end clause...

```
 SELECT case when quantity > 3
              then count(*) end the_count_a,
         case when quantity <= 3
              then count(*) end the_count_b
    FROM STOCK 
```

my stock table has 30 items with different quantities, only 10 items have quantity over 3 but this is always returning 30.... WHY? I think it should be returning two columns with values: 10 and 20

Any help will be appreciated! Thx, Leo

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:14:48.203

The value of `count(*)` means the count of all records (in the current group), regardless of where it is placed. If you want to count records that match a condition, you need to invert your case statement:

```
select count(case when quantity > 3 then 1 end) the_count_a,
       count(case when quantity <= 3 then 1 end) the_count_b
  from stock 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:15:39.850

```
SELECT 
       count(case when quantity > 3 then 1 else null end) end the_count_a,
       count(case when quantity <= 3 then 1 else null end) end the_count_b
FROM STOCK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:15:21.037

The aggregate function `COUNT()` in absense of a `GROUP BY` will return all rows in the table which have not been filtered by a `WHERE` clause. In your case, what you actually need are two subselects or a `UNION`, depending if you want columns or rows back:

```
/* Return columns with subselects */
SELECT
  (SELECT COUNT(*) FROM STOCK WHERE quantity > 3) AS the_count_a
  (SELECT COUNT(*) FROM STOCK WHERE quantity <= 3) AS the_count_b 
```

MySQL is lenient about the presence of a `FROM` clause, so it can be omitted from the outer query.

```
/* Return rows instead of columns with UNION */
SELECT 
  COUNT(*) AS the_count,
  'the_count_a'
FROM STOCK WHERE quantity > 3
UNION ALL
SELECT 
  COUNT(*) AS the_count,
  'the_count_b'
FROM STOCK WHERE quantity <= 30 
```

# java - 电话号码上的 ParseInt NumberFormatException

> ID：11749776
> 
> 赞同：1
> 
> 时间：2012-07-31T22:12:11.290
> 
> 标签：java, string, parsing, integer

尝试解析电话号码“5554567899”时出现以下错误

```
java.lang.NumberFormatException: For input string: "5554567899"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Integer.parseInt(Integer.java:495)
at java.lang.Integer.parseInt(Integer.java:527)
... 
```

显然，电话号码是能够被解析的。我什至引用[了这个问题](https://stackoverflow.com/questions/11366257/numberformatexception-on-valid-number-string)，字节码结果是

```
53,53,53,52,53,54,55,56,57,57, 
```

所以字符串中没有不可见的字符。我被难住了，有人可以帮忙吗？

这是引发错误的代码部分，供参考：

```
String fullNumber = null;
        for(Phone phone : party.getPhones()) {
            if(phone != null && !phone.getDialNumber().isEmpty()) {
                if(!phone.getAreaCode().isEmpty()) {
                    fullNumber = phone.getAreaCode();
                }
                fullNumber += phone.getDialNumber();
                if(phone1 == null || phone1.equals(0)) {
                    LOGGER.debug(displayCharValues(fullNumber));
                    phone1 = Integer.parseInt(fullNumber);
                }
         } 
```

`phone1`是`Java.lang.Integer`类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T22:14:11.067

该值超出了 int 范围。将其解析为一个长变量。

简单测试：

```
int i = 5554567899; 
```

是编译时错误：“int 类型的文字 5554567899 超出范围”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:22:06.577

实际上，电话号码根本不应该被视为一个数字，而应该被视为一个字符串，或者可能是一个您自己定义的数据类型，包括国家代码、区号、交易所等。

如果你想验证它是否只包含数字或数字加上一些标准的电话号码分隔符，这可以通过正则表达式来完成。

我们称它为电话号码，它是一个数字字符串，但由于它不用于数字计算，因此最好不要将其视为数字。

“社会安全号码”也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T22:14:12.487

5554567899 作为一个数字太大而无法放入 int 中。试试`Long.parseLong`吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T22:15:21.767

`5554567899`超过[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)(2147483647)。使用`Long`or`BigInteger`代替：

```
BigInteger bigNumber = new BigInteger("5554567899"); 
```

# ruby - 这是什么类型的 Ruby 数据结构？

> ID：11749777
> 
> 赞同：4
> 
> 时间：2012-07-31T22:12:35.830
> 
> 标签：ruby, data-structures

一个非常简单的问题，但我是 Ruby 新手，无法确定这种数据结构的名称：

```
location = 145.6, 56.644 
```

我搜索了点、对、逗号分隔值等，但没有成功。你能告诉我这是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T22:15:27.703

[这是一个数组，请在此处查看更多示例](http://www.ruby-doc.org/core-1.9.3/Array.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T22:19:56.583

可以调用类方法来查找

```
location.class 
```

=> 数组

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T22:20:49.433

它只是数组。在 ruby​​ 中，在某些情况下你可以去掉括号：

```
drakmail@thinkpad-x220:~$ irb
irb(main):001:0> def test_me(a,b)
irb(main):002:1> print "a is #{a} and b is #{b}"
irb(main):003:1> end
=> nil
irb(main):004:0> test_me 5,10
a is 5 and b is 10=> nil 
```

# javascript - 可以将 HTML 脚本标记包含在 jsFiddle 的 Javascript 变量中吗？

> ID：11749786
> 
> 赞同：1
> 
> 时间：2012-07-31T22:13:54.697
> 
> 标签：javascript, jsfiddle

我试图用 jsFiddle 示例在 SO 上回答用户的问题。该示例是通过 Javascript 动态初始化`iframe`元素。要显示的内容是`iframe`分配给变量的有效 html 文档。这是变量赋值：

```
var aValidDoc = '<!DOCTYPE html PUBLIC
\"-//W3C//DTD XHTML 1.0
Transitional//EN\"
\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">
<html
xmlns=\"http://www.w3.org/1999/xhtml\">
<head><title></title><style
type=\"text/css\">@media
screen{html,body{margin:0;padding:0;height:100%;width:100%}p{margin:15px;}}</style>
</head><body><p>This is the content of
the dynmic document.</p><body></html>'; 
```

这是我想做的一个片段：

```
</p><script type=\"text/javascript\">alert(\"Hi\")</script><body></html>'; 
```

事实上，即使是带有`<script>`破坏界面的评论：

```
// below line breaks jsFiddle
// <script type="text//javascript"></script> 
```

这是小提琴：[jsFiddle example](http://jsfiddle.net/taa1953/KavDy/)

有没有办法编写变量赋值以包含`script`标签，以免破坏 jsFiddle 接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:16:47.677

在你的内联 javascript 中的任何地方写字`</script>`都会破坏包含的 html 标记。

一个简单的解决方法是改为编写`"<\/script>"`。因为它在字符串文字中，所以反斜杠被删除，你得到`"</script>"`

[http://jsfiddle.net/KavDy/2/](http://jsfiddle.net/KavDy/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:19:12.873

`</script>`关闭脚本，您可以像逃避它一样使用`%3c/script>`它`unescape` 来取回它

[http://jsfiddle.net/mowglisanu/KavDy/3/](http://jsfiddle.net/mowglisanu/KavDy/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:34:39.120

jsFiddle 将脚本放在[cdata-section](http://en.wikipedia.org/wiki/CDATA)中：

```
<head>
  ...
  <script type='text/javascript'>//<![CDATA[ 

    var aValidDoc = '...<script>...</script>...';

    // also in comments:
    // <script type="text//javascript"></script>

  //]]>
  </script>
</head> 
```

然而，他们使用`content-type`of来服务他们的文档`text/html`，因此 cdata 不会被正确解析为 XHTML，并且结束`</script>`标记会破坏所有内容。

通过 XHTML 代理获取文档应该可以工作，但这是没有选择的。因此，您需要对其进行转义，例如通过插入反斜杠或`'+'`（文字连接）。

# objective-c - WebView 确实完成启动不起作用

> ID：11749787
> 
> 赞同：0
> 
> 时间：2012-07-31T22:13:56.523
> 
> 标签：objective-c, macos, webview, launch

这种方法有什么问题？

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
[activityIndicator stopAnimation:self];
} 
```

我想停止循环进度指示器 ( `activityIndicator`)。但是有什么问题`- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame`。我正在为 mac osx 而不是 iOS 编码。我从代表那里听到了一些话，这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:54:12.657

检查以确保您的 UIWebView 已设置其委托。设置委托基本上是告诉程序您要处理事件（如点击、手势，或者在本例中是加载 webView）。因此，当一个事件被触发时，它会通知委托，委托可以处理它。也许如果您发布更多代码会有所帮助，但我会检查您对相关 UIWebView 的声明。确保在分配并初始化它之后，将其委托设置为 self（假设此方法在同一个类中），如下所示：

```
UIWebView *myWebView = [[UIWebView alloc] init];
[myWebView setDelegate:self]; 
```

如果您没有设置委托，它会触发事件并且没有人接收它们来处理它们。您使用的方法是等待任何 webView 发送的特定事件。当它被发送事件消息时，它作为参数传递触发的 webView。在任何情况下，请输入日志语句以确保您正在输入该方法。这将告诉您它是否正在接收事件消息。

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    NSLog(@"Did finish loading..."); 
    [activityIndicator stopAnimation:self];
} 
```

注意：这是根据 iOS 体验，但也适用于 Mac OS。让我知道您的日志结果是什么，是否调用了该方法。

# for-loop - 从第二行 LabView 开始读取文件

> ID：11749792
> 
> 赞同：2
> 
> 时间：2012-07-31T22:14:26.753
> 
> 标签：for-loop, readfile, labview

使用从文本文件中读取功能，我可以轻松读取文件的第一行。但是我现在希望它读取第二行。如果我可以在某处指定行号，那么只有一个 for 循环或其他东西会很棒。有没有办法这样做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:12:52.740

首先，您可以通过右键单击“从文本文件读取”节点并选择“读取行”来将整个文件读取为行。一次读取将返回一个数组，其中每行包含一个元素，您可以使用常规数组处理方法处理这些行。如果要单独读取每一行，可以通过将 1 连接到 Count 输入并循环。每次迭代都将返回一个包含一个元素的数组（当前读取的行）。您可以获取/设置偏移量（以字节为单位）以指定要读取的文件中的位置，但如果我正确阅读了您的问题，则没有必要。

# mysql - MySQL如何从笛卡尔积中选择多个属性？

> ID：11749795
> 
> 赞同：4
> 
> 时间：2012-07-31T22:14:41.257
> 
> 标签：mysql, sql

我正在尝试从几张表中获取多个属性（例如卧室、浴室等），是的，我当前的查询似乎只能获得一个属性。我错过了什么？

我最终想要找到的是带有 2 间浴室和 2 间卧室的 property_id。在这种情况下，我想要的结果是属性 id 的 1 和 4。

这是我在[sqlfiddle上的示例](http://sqlfiddle.com/?_escaped_fragment_=3/bd3c2/2/0#!2/7d18d/5)

示例表：

```
property
--------
id 
1
2
3
4

attribute
---------
id name
1  bedrooms
2  bathrooms

attribute_value
---------------------
id attribute_id value
1  1            1
2  1            2
3  1            3
4  2            1
5  2            2
6  2            3

property_attributes
------------------------------
property_id attribute_value_id
1           2
1           5
2           2
2           4
3           1
3           4
4           2
4           5 
```

如果我只想查看基于单个属性的查询，则此查询可以产生我想要的结果：

```
SELECT p.property_id
FROM property p
INNER JOIN property_attribute pa ON p.property_id = pa.property_id
INNER JOIN property_area pc ON p.property_id = pc.property_id
WHERE pa.attribute_value_id
IN (
SELECT av.attribute_value_id
FROM attribute_value av
INNER JOIN attribute a ON av.attribute_id = a.attribute_id
WHERE a.name like 'bedrooms' AND av.value like '2') 
```

但是我必须怎么做才能获得更多属性的结果（例如 WHERE a.name like 'bathrooms' AND av.value like '2'）？如果我在主 where 子句中添加另一个子查询，它不会返回任何结果。

///**编辑**///

如果其他人遇到这种情况，这是对我有用的解决方案：

```
SELECT p.property_id
FROM property p
INNER JOIN property_attribute pa ON p.property_id = pa.property_id
INNER JOIN property_attribute pa2 ON p.property_id = pa2.property_id
INNER JOIN property_attribute pa3 ON p.property_id = pa3.property_id
WHERE pa.attribute_value_id = 2 
AND pa2.attribute_value_id = 5
AND pa3.attribute_value_id = 7 
```

这使得使用**self-join**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:47:45.613

您的架构中有很多间接性。为什么需要这张`property_attribute`桌子有什么特别的地方吗？您是否希望多个属性共享一个属性值？

无论如何，这是给您的查询。非常符合我上面提到的两个[可能的](https://stackoverflow.com/q/11332428/1468366) [副本的精神。](https://stackoverflow.com/q/11419145/1468366)

```
SELECT property.property_id,
       bedrooms.value AS bedrooms,
       bathrooms.value AS bathrooms
FROM property,
     attribute AS bedrooms_attr,
     attribute_value AS bedrooms,
     property_attribute AS bedrooms_prop,
     attribute AS bathrooms_attr,
     attribute_value AS bathrooms,
     property_attribute AS bathrooms_prop
WHERE bedrooms_attr.name = 'bedrooms'
  AND bedrooms.attribute_id = bedrooms_attr.attribute_id
  AND bedrooms.attribute_value_id = bedrooms_prop.attribute_value_id
  AND bedrooms_prop.property_id = property.property_id
  AND bedrooms.value = 2
  AND bathrooms_attr.name = 'bathrooms'
  AND bathrooms.attribute_id = bathrooms_attr.attribute_id
  AND bathrooms.attribute_value_id = bathrooms_prop.attribute_value_id
  AND bathrooms_prop.property_id = property.property_id
  AND bathrooms.value = 2 
```

感谢您提供可使用的[数据](http://sqlfiddle.com/?_escaped_fragment_=3/bd3c2/2/0#!2/7d18d/37)。

# html - 声明 CSS 规则仅适用于特定类

> ID：11749798
> 
> 赞同：4
> 
> 时间：2012-07-31T22:14:52.973
> 
> 标签：html, css

我有以下 CSS 我只需要应用于特定的 div （因为冲突）：

有问题的 div 具有类名 datepicker-days。我是否将以下声明`table`为`.datepicker-days.table`？但是那我该如何声明`.table`下面的类呢？

**CSS**

```
 table {
      max-width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
    }
    .table {
      width: 100%;
      margin-bottom: 18px;
    }
    .table th, .table td {
      padding: 8px;
      line-height: 18px;
      text-align: left;
      border-top: 1px solid #ddd;
    } 
```

**HTML**

```
<div class="datepicker-days" style="display: block; ">
      <table class=" table-condensed">
         <thead>
             <tr>
                <th class="prev">
                .... 
```

抱歉，如果不清楚，CSS 规则来自 Bootstrap。我只是使用了一些规则，因为我使用的 datepicker 插件取决于那些特定的规则。因此，在我的代码中有其他实例的地方`<tables>`，我不希望应用这些规则。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T22:19:50.943

只需使用后代选择器：

```
.datepicker-days table {
    /* this rule will only apply to `<table>` elements that are descendents of any element with class "datepicker-days" */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T22:21:47.443

```
.datepicker-days { /* Targets the div */ }

.datepicker-days table { /* targets all tables nested in the div */ }

.datepicker-days > table { /*targets only tables that are direct children on the div */ } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T22:20:55.993

您将执行以下操作：

```
.datepicker-days table {
    Styles here;
} 
```

`<table>`这仅与`.datepicker-days`班级一起寻找

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T22:26:02.880

如果你只需要对一个独特的 div 应用特定的样式，为什么不给它一个 id #

# javascript - jQuery不会根据总li宽度重置导航元素宽度

> ID：11749800
> 
> 赞同：1
> 
> 时间：2012-07-31T22:14:58.703
> 
> 标签：javascript, jquery, css, drop-down-menu, html-lists

我需要动态调整下拉菜单主导航栏的大小，以便调整大小以适应导航菜单项名称中不同长度的字符。到目前为止，以下是我的代码：

```
 $(document).ready(function(){
            var wNav = $("#navigation").outerWidth();
            var wLiTotal = 0;

            $("#navigation>ul>li").each(function(){
                wLiTotal += $(this).outerWidth();
                if((wLiTotal > wNav)||(wLiTotal < wNav)){
                 wNav = wLiTotal +3;
             };
          });    
       }); 
```

问题是，即使我得到了所有 li 的总宽度，由于某种原因它不会将 wNav 重置为该宽度，我不知道为什么。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:21:36.150

这是因为您只是在计算外宽而不是设置它。

```
$(document).ready(function(){
            var wNav = $("#navigation").outerWidth();
            var wLiTotal = 0;

            $("#navigation>ul>li").each(function(){
                wLiTotal += $(this).outerWidth();
                if((wLiTotal > wNav)||(wLiTotal < wNav)){
                 wNav = wLiTotal +3;
             };

            //setting outer width
            $("#navigation").outerWidth(wNav);
          });    
       }); 
```

使用这个插件 jquery.dimensions.etc.js [http://bitovi.com/blog/2010/06/set-inner-outer-width-height-with-jquery-dimensions-etc-plugin.html](http://bitovi.com/blog/2010/06/set-inner-outer-width-height-with-jquery-dimensions-etc-plugin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:33:20.653

```
$(document).ready(function() {
    var wNav = $("#navigation").outerWidth();
    var wLiTotal = 0;

    $("#navigation>ul>li").each(function() {
        wLiTotal += $(this).outerWidth();
        if ((wLiTotal > wNav) || (wLiTotal < wNav)) {
            wNav += wLiTotal + 3;  // you've increase wNav with its previous value
        };
    });
    $("#navigation").width(wNav); // set new wNav as new width
}); 
```

# php - 从数组输出中删除字符

> ID：11749801
> 
> 赞同：0
> 
> 时间：2012-07-31T22:15:04.047
> 
> 标签：php, arrays

我使用以下代码从特定目录显示了一组图像：

```
<?php 
    $dir = "img";
    $files = scandir($dir); 
    echo '<pre>', htmlspecialchars(print_r($files, true)), "</pre>\n";  
?> 
```

这段代码的输出如下：

```
Array
(
    [0] => .
    [1] => ..
    [2] => image_1.png
    [3] => image_2.png
    [4] => image_3.png
) 
```

我想要做的是显示如下所示的图像数组，从而删除`[x] =>`每个图像并删除`Array ( )`.

```
image_1.png
image_2.png
image_3.png 
```

我不知道该怎么做。我以前从未真正使用过数组，因此我能想到的唯一方法是`preg_replace()`or `str_replace()`，但老实说我不确定从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:16:55.027

尝试：

```
echo '<pre>', htmlspecialchars(join("\n", $files)), "</pre>\n"; 
```

# javascript - LimeJS 圆形边框

> ID：11749804
> 
> 赞同：0
> 
> 时间：2012-07-31T22:15:20.057
> 
> 标签：javascript, html, game-engine, limejs

我想在我的游戏周围显示一个细圆角边框。我可以为此利用 RoundedRect，还是我必须做其他事情？我看到它不是原生的，所以我想知道它是如何完成的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:43:36.920

您可以将整个游戏放入一个lime.RoundedRect 并为其添加边框。

```
// requirements
goog.require('lime.RoundedRect');

// in your main function
var gameContainer = new lime.RoundedRect();
gameContainer.setStroke(12,'#000000');
gameContainer.appendChild(/* the rest of your code here */); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T10:04:45.930

我不熟悉 LimeJS，但您可以尝试[`border-radius`](http://www.css3.info/preview/rounded-border/)在游戏渲染到的元素上使用 CSS 属性。

# c# - 将数据表中的行写入文本文件

> ID：11749812
> 
> 赞同：10
> 
> 时间：2012-07-31T22:15:31.813
> 
> 标签：c#, datatable

```
public void GenerateDetailFile()
{
  if (!Directory.Exists(AppVars.IntegrationFilesLocation))
  {
    Directory.CreateDirectory(AppVars.IntegrationFilesLocation);
  }

  DateTime DateTime = DateTime.Now;
  using (StreamWriter sw = File.CreateText(AppVars.IntegrationFilesLocation +
                                DateTime.ToString(DateFormat) + " Detail.txt"))
  {
    DataTable table = Database.GetDetailTXTFileData();

    foreach (DataRow row in table.Rows)
    {
      sw.WriteLine(row);
    }
  }
} 
```

不知道我在这里缺少什么，但我认为它可能是列名，我不确定如何设置它。

这工作正常，除了，当它写入文本文件时，它是这样写的：

System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow
System.Data.DataRow

谁能帮我一把？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T22:25:21.950

当您尝试打印出`DataRow`类似的内容时，它正在调用[`Object.ToString()`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)，它只是打印出类型的名称。你想要做的是这样的：

```
sw.WriteLine(String.Join(",", row.ItemArray)); 
```

这将打印一个逗号分隔的列表，其中包含`DataRow`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T22:19:21.263

就像是：

```
sw.WriteLine(row["columnname"].ToString()); 
```

会更合适。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-12T09:16:53.680

下面的代码将让您编写文本文件，每列用“|”分隔

```
 foreach (DataRow row in dt.Rows)
      {  
         object[] array = row.ItemArray;
         for (int i = 0; i < array.Length - 1; i++)
         {
           swExtLogFile.Write(array[i].ToString() + " | ");
         }
          swExtLogFile.WriteLine(array[array.Length - 1].ToString());             
     } 
```

[参考链接](https://www.fourthbottle.com/2015/08/write-datatable-to-text-file-using-csharp-.Net.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-31T22:18:39.700

DataRow 没有“自然”的字符串表示形式。您需要以所需的任何格式将其写出，即以逗号分隔的值列表等。您可以枚举列并打印它们的值，例如：

```
foreach (DataRow row in table.Rows)
{
    bool firstCol = true;
    foreach (DataColumn col in table.Columns)
    {
        if (!firstCol) sw.Write(", ");
        sw.Write(row[col].ToString());
        firstCol = false;
    }
    sw.WriteLine();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T22:19:26.997

您需要从每个 DataRow 中写入列。目前您正在编写 DataRow 对象，即 dataRow.ToString() 因此您`"System.Data.DataRow"`在文件中获得了 dataRow 的字符串名称

```
foreach(DataRow row in table.Rows)
{
 foreach(DataColumn column in table.Columns)
 {
  sw.WriteLine(row[column]);
 }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-07T11:29:21.170

试试这个：

**将 DataTable 行写入特定目录中的文本文件**

```
 var dir = @"D:\New folder\log";  // folder location

            if (!Directory.Exists(dir))  // if it doesn't exist, create
                Directory.CreateDirectory(dir);

            foreach (DataRow row in dt.Rows)
            {
                for (int i = 0; i < dt.Columns.Count; i++)
                {
                    result.Append(row[i].ToString());
                    result.Append(i == dt.Columns.Count - 1 ? "\n" : ",");
                }
                result.AppendLine();
            }
            string path = System.IO.Path.Combine(dir, "item.txt");
            StreamWriter objWriter = new StreamWriter(path, false);
            objWriter.WriteLine(result.ToString());
            objWriter.Close(); 
```

# java - Java - 自定义链表问题

> ID：11749817
> 
> 赞同：0
> 
> 时间：2012-07-31T22:15:46.120
> 
> 标签：java

我创建了自己的自定义链接列表（代码如下）。现在，我不明白如何创建一个像`LinkedList[] l = new LinkedList[10]`. 谁能帮我。

```
class Node {
      public int data;
      public Node pointer;
}

class LinkedList {
      Node first;
      int count = 0;

      public void addToEnd(int data){
            if(first == null){
                  Node node = new Node();
                  node.data = data;
                  node.pointer = null;
                  first = node;
                  count = 1;
                  return;
            }
            Node next = first;
            while(next.pointer != null){
                  next = (Node)next.pointer;
            }
            Node newNode = new Node();
            newNode.data = data;
            newNode.pointer = null;
            next.pointer = newNode;
            count++;
      }

      public Node getFirst(){
            return first;
      }
      public Node getLast(){
            Node next = first;
            while(next.pointer != null)
                  next = next.pointer;
            return next;
      }

      public int[] get(){
        if(count != 0){
            int arr[] = new int [count] ;
            Node next = first;
            int i = 0;
                  arr[0]= next.data;
            while(next.pointer != null){
                  next = next.pointer;
                  i++;
                  arr[i] = next.data;
            }
            i++;
            return arr ;
            }
            return null ;
      }
      public int count(){
            return count;
      }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:19:33.287

我猜你的问题是当你创建一个对象数组时，比如

```
LinkedList[] lists = new LinkedList[10]; 
```

你得到一个充满`null`s 的数组；您需要创建要存储在数组中的对象：

```
for (int i=0; i<lists.length; ++i)
    lists[i] = new LinkedList(); 
```

# ravendb - RavenDB 文档在过期前被删除

> ID：11749818
> 
> 赞同：3
> 
> 时间：2012-07-31T22:15:48.210
> 
> 标签：ravendb

我正在尝试向 RavenDB 写入一个在未来 20 分钟到期的文档。我没有使用 .NET 客户端，只是 curl。我的请求如下所示：

```
PUT /databases/FRUPublic/docs/test/123 HTTP/1.1
Host: ravendev
Connection: close
Accept-encoding: gzip, deflate
Content-Type: application/json
Raven-Entity-Name: tests
Raven-Expiration-Date: 2012-07-31T22:23:00
Content-Length: 14

{"data":"foo"} 
```

在工作室中，我看到我保存的文档使用*Raven-Expiration-Date设置为距离**Last-Modified*正好 20 分钟，但是，在 5 分钟内文档被删除。如果我增加到期日期，我会看到同样的行为（5 分钟后删除）。如果我在过去设置了过期日期，文档会立即删除。

我正在使用 build 960。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T21:48:50.943

我将时间指定为百万分之一秒，现在文件正在被删除，正如我所期望的那样。例如：

> 乌鸦过期日期：2012-07-31T22:23:00.0000000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:37:18.787

日期必须是 UTC，看起来您正在发送本地时间。

# c++ - 当 std::string 是参数时，如何禁止在参数列表中传递 NULL？

> ID：11749824
> 
> 赞同：1
> 
> 时间：2012-07-31T22:16:45.093
> 
> 标签：c++

所以我今天遇到了一个错误，其中一个 NULL 被传递到构造函数的参数列表中，这导致应用程序中断。奇怪的是编译器没有禁止这种情况发生。由于参数列表发生了变化，直到现在才注意到这个问题。请参阅以下代码片段：

这个对象有3个参数，密切关注std::string&。

```
class Foo {
public: 
    std::string myName;
    unsigned int someVariable;
    void * ptr;

    Foo(const std::string&  name, void * aPtr, unsigned int variable);
    ~Foo();
}

Foo::Foo(const std::string&  name, void * aPtr, unsigned int variable) : myName(name), ptr(aPtr), someVariable(variable)
{
   // object constructed
}

int main(int argc, char* argv[])
{
   // construct an instance of Foo
   Foo foo(NULL /*whoops, passed in NULL when a string should be passed in*/,
           "foo", 
           0);   // program compiles as expected, A NULL pointer runtime error occurs when executed.
} 
```

所以基本上，如果你不小心切换了你的 foo 对象的输入值，编译器不会做任何事情。没有响起警报，程序崩溃时您会摸不着头脑。我认为应该有一种方法可以防止这种情况发生。有什么可以解决这个问题的吗？编译器中有什么东西应该打开吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T22:19:54.887

实际上，实际上并不是`NULL`通过引用传递的。

`std::string`有一个转换构造函数，它接受一个`char const*`. `NULL`是一个空指针常量，所以它可以用在需要 a的地方，所以从这个空指针构造`char const*`一个对象。`std::string`这种构造会产生未定义的行为。

向用户提供更好警告的一种选择是添加另一个具有`char const*`参数的构造函数。这样，如果传入 null，您可以轻松地在构造函数中添加断言。这不是编译时检查，但如果您经常遇到这个问题，它可能总比没有好（对于它的价值，我不记得曾经遇到过这个问题，所以我认为这不值得努力）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:48:41.357

这就是我要做的：

```
 Foo(const std::string&  name, void * aPtr, unsigned int variable);
    ~Foo();
private:
    Foo(int, void*, unsigned int); // Do not implement.
                                   // This will generate a link time error when
                                   // NULL is used as the first parameter. 
```

注意：如果没有此更改，我无论如何都会遇到编译器错误（因此这显然不是您正在运行的代码）。但是当我修复明显的错误时，我仍然得到：

```
n.cpp:27: error: invalid conversion from ‘const void*’ to ‘void*’
// This is caused by the parameter -> "foo" 
```

# php - 如何从 DBA 函数中获取记录的总长度？

> ID：11749825
> 
> 赞同：0
> 
> 时间：2012-07-31T22:16:44.833
> 
> 标签：php

我只想知道是否有任何功能可以找到 DBA 函数从 DB 文件中获取的记录的总长度。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:27:06.830

如果您使用的是 PDO，则可以通过以下方式获取[行数](http://php.net/manual/en/pdostatement.rowcount.php)：

```
<?php
$qry = $dbh->prepare('select * FROM fruit');
$del->execute();
$count = $qry->rowCount();
print("Found $count rows.\n");
?> 
```

如果您正在[使用 mysqli](http://www.php.net/manual/en/mysqli-result.num-rows.php) ，您还可以像这样获取行数：

```
<?php
// yada yada
$result = $mysqli->query("SELECT Code, Name FROM Country ORDER BY Name");
$row_cnt = $result->num_rows;
printf("Result set has %d rows.\n", $row_cnt);
?> 
```

请注意，当您的查询是插入、删除、更新或替换时，这不会返回行数。您需要为此使用[受影响的行](http://www.php.net/manual/en/mysqli.affected-rows.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:27:19.033

不确定您在寻找什么，或者您是否正在使用 MySql，但如果您是，您可以尝试

```
SHOW TABLE STATUS; 
```

对于所有表，或

```
SHOW TABLE STATUS LIKE '%sometext%'; 
```

对于名称中包含的表`sometext`。

对于字段相关的详细信息，您可以尝试：

```
SELECT * FROM `tablename` PROCEDURE ANALYSE(); 
```

# iphone - UIButton 自动调整大小问题

> ID：11749828
> 
> 赞同：0
> 
> 时间：2012-07-31T22:16:51.040
> 
> 标签：iphone, objective-c, ios, uibutton, autoresizingmask

试图让 UIButtons 在设备旋转时降低高度但保持宽度。`initWithFrame:`这是包含按钮的视图的代码。

父视图.m

```
self = [super initWithFrame:CGRectMake(0, 0, UIKeyboardPortraitHeightPhone, 320)];
self.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
self.autoresizesSubviews = YES;

// And then on each button I call
myButton.frame = myFrame;
myButton.autoresizingMask = (UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin); 
```

**问题**：在我旋转设备之前，按钮已经调整大小并且变得比我初始化它们的框架更小（高度）。

**以前的研究**：看起来我和这个人有同样的问题：[Cannot get UIButton autoresizingMask to work](https://stackoverflow.com/questions/7673008/cannot-get-uibutton-autoresizingmask-to-work)，但我听从了建议，得到了同样不满意的结果。

我还查看了[苹果文档](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AdoptingaFull-ScreenLayout/AdoptingaFull-ScreenLayout.html#//apple_ref/doc/uid/TP40007457-CH13-SW1 "苹果文档")，其中说自动调整大小的掩码只应该在父视图的边界发生变化时生效。显然，要么我的父视图的界限在我没有意识到的情况下发生了变化，要么这里发生了其他可疑的事情。

关于可能是什么问题的任何想法？

# batch-file - 批处理脚本：将 10 个最新文件复制到另一个文件夹

> ID：11749829
> 
> 赞同：0
> 
> 时间：2012-07-31T22:16:51.833
> 
> 标签：batch-file

我正在尝试将文件夹中的 10 个最新文件复制到另一个文件夹并在此过程中重命名它们。所以 dir01 包含 file01 file02 file03 file04 等等...我想复制 10 个最新文件并重命名它们，比如 image-01.jpg，到 dir02 等等。我对批处理很陌生，想知道是否有人可以帮助我？我目前有一个脚本来复制最新文件，但只有一个文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:29:43.510

我会用这样的东西

```
enter #!/bin/bash
for file in "$(ls -t|head -n10)"

do
cp  "$file" new_directory/
echo "$file"
done 
```

# iphone - 在 UITableViewCell 中分配 UIButton、UITextView 等很慢

> ID：11749838
> 
> 赞同：0
> 
> 时间：2012-07-31T22:17:49.387
> 
> 标签：iphone, objective-c, ios, uikit

我有一个显示自定义 UITableViewCells 的 UITableView。我需要根据用例在单元格中显示文本视图、文本字段、按钮等。我的问题是第一次构建这些单元很慢。例如，包含一个 UITextView 和两个 UIButtons 的单元格需要 33 毫秒来构建。我的一些单元格中有多达 10 个 UI 控件，并且需要 100 毫秒来构建。我尝试在笔尖中定义控件并加载笔尖，我还尝试以编程方式构建控件。两种方式都需要相同的时间。我正在重用单元格，因此在初始加载后，滚动不会太慢。但是，初始加载必须根据它们的高度构建 5-7 个单元格以填充屏幕。这可能需要 150 到 700 毫秒。这是正常行为吗？我仍然需要从数据库中获取数据，在表格显示之前对其进行处理以进行显示并执行各种其他操作。我希望表格在用户发起请求后不到一秒的时间内出现。

# layout - 煎茶触摸：没有图标的标签

> ID：11749839
> 
> 赞同：0
> 
> 时间：2012-07-31T22:17:54.920
> 
> 标签：layout, sencha-touch, sencha-touch-2

是否可以在没有选项卡的选项卡式卡片布局中创建一个项目？

我想创建一个从屏幕顶部延伸到标签栏且不覆盖标签栏的消息覆盖。当我通过向面板添加项目来执行此操作时，一切正常，除了在标签栏上创建了一个空白图标。有没有办法防止这个图标被创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:09.297

**您可以使用hidden: true**配置选项创建新项目

```
Ext.define('App.view.settings.SettingsContainer', {
extend: 'Ext.tab.Panel',
xtype: 'settingsContainer',

requires : [
...
],

config: {
    tabBar: {
        docked: 'top'
    },
    tab: {
        title: 'Settings',
        iconCls: 'user'
    },

    items: [{
        xtype: 'settingsAccountContainer'
    }
    , {
        xtype: 'changeCompanyView',
        hidden: true
    }]
}
}); 
```

changeCompanyView 已创建，但选项卡图标不可见。它可以通过以下方式激活

```
settingsContainer.setActiveItem(1); 
```

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:04:42.693

这应该有效。将叠加层添加到子项而不是选项卡面板。

```
childPanelItem.add(
    Ext.create('Ext.Panel',  
        {
            xtype:'panel',
            html:'Demo',
            top:0,
            left:0,
            right:0,
            bottom:0
        }
    )
); 
```

如果您添加到子面板，该图标将不会出现在选项卡栏上。

# php - 如果 Post Meta 不存在，我该怎么办？

> ID：11749841
> 
> 赞同：0
> 
> 时间：2012-07-31T22:17:59.570
> 
> 标签：php, wordpress

我有以下代码：

```
<?php $buycheck = get_post_meta($post->ID, 'buy-link', true); ?>

            <?php if ( $buycheck ) : ?>
                <div class="section-title sidebar span5">
                    <h5>Get This Release</h5>
                </div>

            <?php else : ?>

                <div class="section-title sidebar span5">
                    <h5>More Releases</h5>
                </div>

            <?php endif; ?> 
```

稍后在我的代码中，我希望能够说如果购买链接不存在 - 即该字段中没有数据 - 然后做一些事情，否则做一些不同的事情。

不知道该怎么做！帮助表示赞赏！

（顺便说一句，我首先将这个问题发布到 Wordpress Stack Exchange。它在那里被投票关闭，因为它显然比 Wordpress 更关注 PHP 布尔逻辑 - [https://wordpress.stackexchange.com/questions/60387/how-do-i -do-if-post-meta-does-not-exist#comment78412_60387](https://wordpress.stackexchange.com/questions/60387/how-do-i-do-if-post-meta-does-not-exist#comment78412_60387)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:25:13.803

您可以设置一个全局变量，您可以稍后检查以查看购买链接是否存在：

```
<?php

$buycheck = get_post_meta($post->ID, 'buy-link', true);
$GLOBALS['buy_link_exists'] = !empty($buycheck);

?>

<?php if ( $buycheck ) : ?>
<div class="section-title sidebar span5">
    <h5>Get This Release</h5>
</div>

<?php else : ?>

<div class="section-title sidebar span5">
    <h5>More Releases</h5>
</div>

<?php endif; ?> 
```

然后稍后在您的代码中：

```
<?php if ($GLOBALS['buy_link_exists'])): ?>
    it exists, do one thing
<?php else: ?>
    it does not exist, do something else
<?php endif; ?> 
```

如果您需要实际值，您可以设置一个包含返回值的全局变量，`get_post_meta`以便您可以使用实际值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:28:09.420

```
<?php if($buycheck ==''){ /*stuff*/ } ?> 
```

这将呈现 $buycheck，如果它是空的**==**等于**''**什么都没有。

# c# - 有没有更好的方法来修剪字符串中的空格和其他字符？

> ID：11749842
> 
> 赞同：4
> 
> 时间：2012-07-31T22:18:06.360
> 
> 标签：c#, whitespace, trim

例如，如果我想从字符串中删除空格*和尾随逗号，我可以这样做：*

```
String x = "abc,\n";
x.Trim().Trim(new char[] { ',' }); 
```

正确输出`abc`。我可以很容易地将它包装在一个扩展方法中，但我想知道是否有一种内置的方法可以通过对`Trim()`我缺少的单个调用来执行此操作。我习惯了 Python，我可以这样做：

```
import string
x = "abc,\n"

x.strip(string.whitespace + ",") 
```

[该文档](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)指出，除了少数例外，所有[Unicode 空白字符都被剥离（请参阅](http://en.wikipedia.org/wiki/Whitespace_character#Unicode)**对调用者的注释**部分），但我想知道是否有一种方法可以做到这一点，而无需在扩展方法中手动定义字符数组。

有没有内置的方法来做到这一点？我要删除的非空白字符的数量可能会有所不同，并且不一定包含逗号，并且我想删除所有空格，而不仅仅是`\n`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T22:20:24.750

是的，你可以这样做：

```
x.Trim(new char[] { '\n', '\t', ' ', ',' }); 
```

因为换行符在技术上是一个字符，所以您可以将它添加到数组中并避免两次调用`Trim`.

**编辑**

.NET 4.0 使用[此方法](http://msdn.microsoft.com/en-us/library/system.char.iswhitespace.aspx)来确定字符是否被视为空白。早期版本维护空白字符的内部列表（[Source](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)）。

如果您真的只想使用一个`Trim`调用，那么您的应用程序可以执行以下操作：

1.  启动时，扫描[Unicode 空白字符的范围](http://en.wikipedia.org/wiki/Whitespace_character#Unicode)，调用`Char.IsWhiteSpace`每个字符。
2.  如果方法调用返回 true，则将字符压入数组。
3.  将您的自定义字符也添加到数组中

现在您可以通过传递您构造的数组来使用单个`Trim`调用。

我猜这`Char.IsWhiteSpace`取决于当前的语言环境，所以你必须特别注意语言环境。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T22:40:13.747

使用正则表达式使这变得简单：

```
text = Regex.Replace(text, @"^[\s,]+|[\s,]+$", ""); 
```

这也将匹配 Unicode 空白字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T22:32:59.887

您可以使用以下条扩展方法

```
public static class ExtensionMethod
{
    public static string Strip(this string str, char[] otherCharactersToRemove)
    {
        List<char> charactersToRemove = (from s in str
                              where char.IsWhiteSpace(s)
                              select s).ToList();
        charactersToRemove.AddRange(otherCharactersToRemove);
        string str2 = str.Trim(charactersToRemove.ToArray());
        return str2;
    }
} 
```

然后你可以这样称呼它：

```
static void Main(string[] args)
        {
            string str = "abc\n\t\r\n ,  asdfadf , \n \r \t";
            string str2 = str.Strip(new char[]{','});
        } 
```

输出将是：

```
str2 = "abc\n\t\r\n ,  asdfadf" 
```

Strip Extension 方法将首先从列表中的字符串中获取所有 WhiteSpace 字符。在列表中添加要删除的其他字符，然后对其调用 trim。

# c# - 创建 ASP.NET Web 服务，而不是 WCF

> ID：11749844
> 
> 赞同：0
> 
> 时间：2012-07-31T22:18:08.873
> 
> 标签：c#, asp.net, web-services, tcp-ip

我想要一个客户端应用程序和 Web 应用程序（或服务，没有 UI），我想从我的桌面应用程序中连接到所述 Web 服务，并有两个同时的网络流，其中一个用于上传数据和读取它们在服务器上，另一个用于向客户端应用程序发送内容。

我不是在寻找一个使用比 WCF 或其他任何东西更多的解决方案，我只是想要一种在 Web 服务器和我的客户端应用程序之间创建连接并交换纯二进制数据的方法。我会自己实现协议，我不是在寻找 WCF 提供的任何实体或封装。

我什至不知道什么项目类型是这里的最佳选择。我想过空的 ASP.NET 应用程序可能会在 FTP 上上传，但我不知道下一步应该做什么才能使应用程序可连接。我当然不是要求完整的解决方案，而是一些专注于如何在服务器和客户端之间建立简单明了的连接的文章。我希望服务器能够立即更新客户端，反之亦然，这就是为什么我正在寻找一种拥有流的方法。

编辑：我不妨说该服务旨在放置在 ASP.NET 主机上，如果有任何限制或任何东西，我不知道端口如何在这些上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:30:51.447

“Web 服务”和“网络流”是不相容的概念。Web 服务（理想情况下）是无状态且断开连接的——因此无论底层网络如何工作，它们都可以工作。消息仅从客户端到服务器交换，并封装在 HTTP 请求/响应对中。因此，“网络服务”。

如果您想交换“纯二进制数据”（如您所说），那么您只需要使用套接字（或使用 .NET 的 TcpClient，它将套接字封装在更易于使用的 API 中）。ASP.NET 不适合这样做。

从技术上讲，您可以拥有一个使用在 ASP.NET 主机进程中运行的套接字的应用程序，但这可能无法正常工作，具体取决于安全性的设置方式，并且它还受 ASP.NET 进程生命周期的约束（因此它由 IIS 和可以随时关闭或回收而不会发出警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:35:30.617

看看 MVC4 [APIController](http://stephenwalther.com/archive/2012/03/05/introduction-to-the-asp-net-web-api.aspx)。除了方法返回 XML 或 JSON（或您喜欢的任何其他内容）之外，它的工作方式与普通 MVC 非常相似。

例如

`/api/Users/Get`

会返回类似的东西

```
{
    {"Username":"Bob", "Id":3},
    {"Username":"Steve", "Id":4}
} 
```

您还可以使用特殊的返回类型返回文件和其他流。您甚至可以通过使用模型获得强类型、经过验证的输入。

这里有一个[示例，](http://www.codeproject.com/Articles/344078/ASP-NET-WebAPI-Getting-Started-with-MVC4-and-WebAP)它显示了完整的 CRUD 控制器和来自 JS 的示例 AJAX 调用，您可以在桌面应用程序中复制它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:36:37.607

您不想为此使用 ASP.NET Web 服务 (ASMX)。这是一项遗留技术，不应用于新开发。

为什么不想使用 WCF？你认为这太复杂了吗？关于 WCF 的事情是它*消除*了创建自己的协议的复杂性。

另外，您使用的是哪个版本的 .NET？使用 .NET 4.0 配置 WCF 变得更加容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T22:56:22.443

这是使用 WCF的简单[双工示例。](http://beyondrelational.com/modules/2/blogs/48/posts/10054/a-simple-duplex-service-in-wcf.aspx)试试看，检查你的性能是否足够，尝试使用替代绑定（如 net.tcp）。WCF 是一个非常好用的工具。一旦熟悉了它，你就会爱上它。

[另请查看Learning WCF](http://books.google.com/books?id=-AUyj6S7etwC&lpg=PP1&dq=learning%20wcf&pg=PA160#v=onepage&q=learning%20wcf&f=false)中关于 WCF 中的绑定的章节

# cassandra - 相交 cassandra 行

> ID：11749846
> 
> 赞同：2
> 
> 时间：2012-07-31T22:18:27.010
> 
> 标签：cassandra, intersect

我们有 cassandra 列族。每行有多个列。列有名称，但值为空。如果我们有 5-10 个行键，我们如何找到出现在所有这些键中的列名。例如

```
row1: php, programming, accounting
row2: php, bookkeeping, accounting
row3: php, accounting 
```

必须返回：

```
result: php, accounting 
```

注意我们不能轻易地将整行加载到内存中，因为它可能包含 1M+ 列解决方案不需要很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:05:26.777

为了进行多行的交集，我们需要先将其中的两个相交，然后将结果与第三个相交，依此类推。

看起来在 cassandra 中我们可以通过列名来查询数据，这是一个相对快速的操作。

所以我们首先得到 10k 行的 Column Slice。制作列名列表（在 PHP Cassa 中 - 将它们放入数组中）。然后从第二行中选择那些。

代码可能如下所示：

```
$x = $cf->get($first_key, <some column slice>);

$column_names = array();
foreach(array_keys($x) as $k)
   $column_names[] = $k;

$result = $cf->get($second_key, $column_slice = null, $column_names);

// write result somewhere, and proceed with next slice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:57:27.633

您可以使用 Hadoop map/reduce 作业，如下所示：

*   映射输出键 = 列名

*   映射输出值 = 行键

*   Reducer 计算每列的行键并将列名和计数输出到具有以下模式的 CF：

    键：[列名] {计数：[计数]}

*   然后，您可以以相反的顺序从此 CF 中查询计数。第一条记录将是最大值，因此您可以继续迭代直到值 < 最大值。这将是你的十字路口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:30:54.923

您的列名已排序，您可以为每一行创建一个迭代器（此迭代器一次加载日期的部分，例如 10k 列）。现在将每个迭代器放入优先级队列（按下一列名）。如果您将具有相同列名的迭代器的 k 倍作为队列，这是所有行之间的通用名称，在另一种情况下，我们移动到下一个元素并将迭代器返回到队列。

# objective-c - 单例不立即更新变量

> ID：11749849
> 
> 赞同：1
> 
> 时间：2012-07-31T22:18:40.083
> 
> 标签：objective-c, ios, nsstring, singleton

我有一个单例，这里是头文件：

```
#import <Foundation/Foundation.h>
@interface Shared : NSObject
{
     NSString *messages;
}
@property (nonatomic, retain) NSString *messages;

+ (Shared*)sharedInstance;

@end 
```

这是实现：

```
#import "Shared.h"
static Shared* sharedInstance;

@implementation Shared

@synthesize messages;

+ (Shared*)sharedInstance
{
    if ( !sharedInstance)
    {
        sharedInstance = [[Shared alloc] init];
    }
    return sharedInstance;
}

- (id)init
{
    self = [super init];
    if ( self )
    {
        messages = [[NSString alloc] init];
    }
    return self;
}
@end 
```

问题是当我使用

```
[Shared sharedInstance].messages = someVariable; 
```

我可以使用 NSLog([S​​hared sharedInstance].messages); 它显示了正确的输出，但是当我从另一个类中检查时，NSLog 没有显示任何输出。我在另一个类的 viewDidLoad 方法中有 NSLog，所以当我单击按钮转到下一个视图时，它应该输出字符串的值，但它只能在第二次工作。如果变量设置为dog，首先它什么也不输出，然后当我关闭视图并重试时，它输出dog。但是，如果我将变量更改为 cat，它将输出 dog，并在下一次尝试时输出 cat。我希望它立即更新，而不是一直落后。

编辑：这是其他类的代码这个特定部分来自方法中的视图控制器类

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//Omitted, just preparing the DB, and emptying the array.
if ([db open])
    {
        FMResultSet *s = [db executeQueryWithFormat:@"SELECT ShabadID FROM Shabad WHERE Gurmukhi LIKE %@", currentLine];
        while ([s next])
        {
            lineID = [s intForColumn:@"ShabadID"];
        }
        s = [db executeQueryWithFormat:@"SELECT Gurmukhi, ShabadID FROM Shabad WHERE ShabadID LIKE %i", lineID];
        while ([s next])
        {

            //NSLog([s stringForColumn:@"Gurmukhi"]);
            [paragraphArray addObject:[s stringForColumn:@"Gurmukhi"]];
        }
        Text = @"";
        for (int i = 0; i<[paragraphArray count]; i++)
        {
            Text = [Text stringByAppendingFormat:@"%@\n", [paragraphArray objectAtIndex:i]];
        }
        [Shared sharedInstance].messages = Text;
    } 
```

然后在另一个类中，我希望文本出现在 viewDidLoad 方法中，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog([Shared sharedInstance].messages);
    UITextView *myUITextView = [[UITextView alloc] initWithFrame:CGRectMake(0,30,310,450)];
    myUITextView.text = [Shared sharedInstance].messages;
    myUITextView.textAlignment = NSTextAlignmentCenter;
    myUITextView.textColor = [UIColor blackColor];
    myUITextView.font = [UIFont fontWithName:@"GurbaniLipiLight" size:24];
    [myUITextView setBackgroundColor:[UIColor clearColor]];
    myUITextView.editable = NO;
    myUITextView.scrollEnabled = YES;
    [ScrollerView addSubview:myUITextView];
} 
```

当然 NSLog 没有正确显示，但 textview 中的文本也没有显示，它的作用与 NSLog 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:14:02.340

这里有一个关于事情发生的顺序的假设是不完全正确的。假设这涉及到一个 segue，`didSelectRowAtIndexPath:`在新视图控制器准备好但显示之前调用。将代码移动到`viewWillAppear:`或`viewDidAppear:`延迟执行，直到调用控制器设置新数据之后。

使用 segue 的控制器之间进行通信的另一种方法是`prepareForSegue:`在第一个控制器中使用来设置第二个控制器所需的数据。这样它应该在加载视图时可用。

# javascript - 如何按环境自定义 Node.js 中的公共 js 文件？

> ID：11749850
> 
> 赞同：2
> 
> 时间：2012-07-31T22:18:47.453
> 
> 标签：javascript, node.js, express

我正在尝试根据环境自定义公共 javascript 文件。具体来说，对于 socket.io，我正在尝试自定义客户端将连接到的位置：

发展：

```
var socket = io.connect('http://localhost/chat'); 
```

生产：

```
var socket = io.connect('http://xxx.xxx.xxx.xxx/chat'); 
```

我了解应用程序本身内的所有环境变量（并且我确实通过 express 使用节点环境变量），但据我所知，这些变量不会触及我为客户端提供的公共静态 js 文件。

根据开发/生产环境实现这种上下文切换的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:39:58.270

If you're writing unobtrusive JavaScript and using a proper bundling system, then each HTML page you deliver should reference only a single "loader" script, which is then responsible for bringing in all the rest of the scripts. Create two versions of that script, one for development and one for production, and give them different names. When rendering HTML, make the name of the script a template variable which you'll have set based on your environment. Your loader script can then set appropriate variables to be used by the scripts it brings in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:29:28.153

我接近它的方法是在布局页面中加载 socket.io：

```
<script src='<%= socketIoUrl %>/socket.io/socket.io.js'></script>

<script type="text/javascript">
    var socket = io.connect('<%= socketIoUrl %>');
</script> 
```

然后我添加了一个动态助手来公开`socketIoUrl`：

```
var helpers = function(app) {

    app.dynamicHelpers({
        socketIoUrl: function(req, res) {
            return app.settings.socketIoUrl;
       }
    });
};

module.exports = helpers; 
```

所以在我的 server.js 文件中，我根据环境设置了适当的值并加载了帮助文件：

```
app.configure('development', function(){
    app.set('socketIoUrl', 'http://localhost:3003');
});

app.configure('test', function(){
    app.set('socketIoUrl', 'http://...');
});

app.configure('production', function(){
    app.set('socketIoUrl', 'http://...');
});

require('./apps/helpers')(app); 
```

因此，现在您可以`socket`在您拥有的任何其他 js 文件中使用在布局页面中创建的变量。

# search - 如何将来自 box.net 的联合搜索结果合并到 Apache Solr

> ID：11749851
> 
> 赞同：2
> 
> 时间：2012-07-31T22:18:56.240
> 
> 标签：search, box-api

研究如何将来自盒子帐户的搜索结果与我的内部基于 Apache Solr 的搜索结合起来。

据我所知，box.com 不提供根据 opensearch 标准搜索和接收结果的能力。

通过联合搜索合并结果的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:27:55.807

你可以看看 SMEStorage.com。我知道他们的本地或托管云设备可以插入 Solr 以跨不同信息源（包括 Box）进行联合深度搜索。

# c# - C#数据结构按顺序添加元素

> ID：11749853
> 
> 赞同：1
> 
> 时间：2012-07-31T22:19:03.647
> 
> 标签：c#, .net, sorting, data-structures

我正在寻找 C#（.net 框架）中的数据结构，我可以使用它来按排序顺序添加数据（而不是添加所有数据然后应用排序）。我的数据是对象，我想根据某个字段（整数字段）添加它们。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T22:23:45.750

选项 1）使用[SortedList](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)并使用整数字段作为键。

选项 2) 使用[SortedSet](http://msdn.microsoft.com/en-us/library/dd412070.aspx)但要小心.. 此集合只能包含唯一对象（同一对象不能重复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:23:28.030

```
[System.Collections.Generic.SortedSet<T>][1] 
```

# html - 如何将此布局转换为 html/css？

> ID：11749859
> 
> 赞同：2
> 
> 时间：2012-07-31T22:19:14.177
> 
> 标签：html, css

我的合作伙伴设计机构给我发了一个要转换成 html/css 的布局。你可以在这里看到一些布局，顶部的导航栏是唯一需要的。

![在此处输入图像描述](../Images/93ac628a1f2285b8adc13a05011b8be0.png)

我现在的问题实际上是，我不确定如何在 html/css 中实现该布局，因为绿色导航栏中的“弯曲”不在页面中间。布局应该是灵活的，所以我什至不想使用一张大图像（2500x75 像素），包括弯曲和居中。最好有两个元素，一个是从左侧开始的徽标，另一个是从右侧开始的导航链接。

你怎么会意识到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T22:38:09.380

你可以做一些旋转的事情`<div>`，也许是这样的：

```
<div class="full"></div>
<div class="half">
    <div class="corner"></div>
</div>​ 
```

```
.full{
    height: 40px;
    background: lightgreen;
}
.half{
    width: 50%;
    height: 30px;
    position: absolute;
    top: 40px;
    left: 0;
    background: lightgreen;
}
.corner{
    width: 50px;
    height: 50px;
    -webkit-transform: rotate(40deg);
    -webkit-transform-origin: 100% 100%;
    position: absolute;
    right: 0px;
    top: -20px;
    background: lightgreen;   
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/FWb8L/2/)**

**使用 css skew 改进的演示：[jsFiddle](http://jsfiddle.net/Kvwwe/)** ​</p>

# django - 如何将 Django forms.ChoiceField 呈现为 Twitter Bootstrap 下拉菜单

> ID：11749860
> 
> 赞同：34
> 
> 时间：2012-07-31T22:19:20.093
> 
> 标签：django, django-forms, twitter-bootstrap, django-crispy-forms

使用 django-bootstrap、django-bootstrap-form、django-bootstrap-toolkit、django 之一呈现 Django forms.ChoiceField 作为 Twitter Bootstrap 下拉列表的最有效方法是什么（在编程/维护工作、优雅方面） -crispy-forms等应用程序？在这些应用程序中是否明确支持此用例？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-03T11:50:44.197

**免责声明**我是 django-crispy-forms（提到的应用程序之一）的首席开发人员。

我将尝试解释你如何使用 django-crispy-forms 做到这一点。您只需在模板中执行以下操作：

```
{% load crispy_forms_tags %}
{{ form|crispy }} 
```

[您可以在django-crispy-forms 文档](http://django-crispy-forms.readthedocs.org/en/d-0/index.html)中看到这一点以及更多内容。您的 ChoiceField 将根据需要呈现为 Bootstrap 下拉菜单。

### 与 django-bootstrap 相比

首先，有一点历史。django-bootstrap 诞生于 django-uni-form（django-crispy-forms 的父项目）之后。那时，django-uni-form 已经在做 Boostrap 表单，但可能不是最好的方式（Bootstrap 是通过使用附加的 contrib 应用程序来支持的）。因此，django-bootstrap 的作者可能决定自己去。

现在，关于 Bootstrap 支持。django-bootstrap 也可以呈现表单，但它不是使用 Django 过滤器，而是更改表单的基类。所以 django-crispy-forms 会影响你的模板，而 django-bootstrap 会影响你的 Python 代码。

此外，django-crispy-forms 和 django-bootstrap 都可以让您进行布局。在 django-bootstrap 中，布局位于表单中的 Meta 类中，而在 django-crispy-forms 中，布局位于 的子类中`FormHelper`，这使您可以解耦。

django-bootstrap 使用元组来定义布局，而crispy-forms 使用`Layout`. 这增加了重用布局、轻松组合布局等的可能性。请注意，虽然crispy 的封装内部仍然有一个字段列表，但它添加了一个有用且人性化的 API 来以编程方式操作布局，我认为它强制执行了一个很好的解耦模式。

据我所见，脆形式的布局更强大。它有一个更大的布局对象集合，例如，前置文本、附加文本、日期范围等已经被支持，而在 django-boostrap 中这些都在 TODO 列表中。

crispy-forms 还有一个 API 用于在旅途中修改布局并进行一些非常好的核心程序化布局构建。

crispy-forms 还支持各种形式的表单集。它支持不同的 CSS 模板包，这意味着如果将来新的踢脚 CSS 包命名为“巧克力”，那么为它创建一个新的模板包将非常容易，并且您的所有表单都可以使用 ' Chocolate' 无需更改代码，只是一个简单的设置变量。

crispy-forms 还具有您可以设置的[属性](http://django-crispy-forms.readthedocs.org/en/d-0/tags.html#helper-attributes-you-can-set)`FormHelper`，这些属性定义了您可以轻松打开和关闭的不错的额外功能。如果需要，您还可以创建自己的自定义属性。

最后，django-crispy-forms（连同 django-uni-form）有超过 67.000 次下载，这对于 Django 应用程序来说是相当不错的。该项目在 Github 上拥有近 500 名粉丝、几个大用户、良好的测试覆盖率和几年的历史，并且仍在积极维护中。

### 与 django-bootstrap-form 相比

据我所知，django-bootstrap-form 只是一个使用 Bootstrap 呈现表单的过滤器。这是 django-crispy-form 涵盖的内容，同时提供了更多。该项目于 2012 年 8 月 21 日发布，在我看来它像是在重新发明轮子，因为其他几个应用程序已经涵盖了这个用例。

### 与 django-bootstrap-toolkit 相比

它的灵感来自 django-boostrap-form。从我在文档中看到的内容来看，它还为您提供了一个过滤器，用于使用 Bootstrap 呈现表单。它显然涵盖了比表单更多的 Bootstrap 内容，但我在其文档中找不到更多信息。最后一次提交是 2 个月前。

* * *

我会坚持认为，我显然不是进行无偏见比较的合适人选。这就是为什么我以前从来没有写过这个。我本可以多次发表关于此的博客文章，但我总是不理会这个想法。然而，随着表单应用程序（和支持引导的应用程序）的碎片化越来越多，我认为这可能是写下我的想法的好时机。我希望这对 Django 的新手有所帮助。

干杯，米格尔

# php - AJAX 请求导致更改功能解除绑定

> ID：11749872
> 
> 赞同：0
> 
> 时间：2012-07-31T22:19:50.947
> 
> 标签：php, javascript, ajax, jquery

我想实现简单的功能，以允许用户将他们的消息文本保存为模板以供将来使用。

php:

```
 echo '<div id="container">';
    $sql = ("SELECT template_id, template_text, template_name, member_id FROM message_templates
            WHERE member_id = {$member_id}");
    $result = mysql_query($sql) or die(mysql_error());
    $num_rows = mysql_num_rows($result);
    $confName = get_conference_name($confID);
    $confName = formatText_safe($confName);
    echo "<label>" . $lang['my_template'] . "</label><select id='tempchoose' name='templates'>";
    if ($num_rows == 0) {
        echo '<option value=""> ' . $lang['no_saved'] . '</option>';
    } else {
        for ($i = 0; $i < $num_rows; $i++) {
            //$template_id = mysql_result($result, $i, 0);
            $temp_text = mysql_result($result, $i, 1);
            $temp_name = mysql_result($result, $i, 2);
            echo '<option value="' . $temp_text . '">' . $temp_name . '</option>';
        }
    }
    echo "</select></div>"; 
    echo '<input id="send" name="Message" value="send" disabled="disabled" type="submit" />
<input id="temp" name="temp" type="button" value="save as template" />"
<textarea style="width: 99%;" id="textarea" name="TextBox" rows="8" disabled="disabled" type="text" value=""/></textarea>'; 
```

javascript:

```
$("#temp").bind("click", function(){
            name=prompt("template name?");
            temp_text = $("#textarea").val();
        if (name!=null && name!="" && name!="null") {
            $.ajax ({
                data: {temp_text:temp_text, name:name},
                type: 'POST',
                url:  'save_template.php',
                success: function(response) {
                    if(response == "1") {
                        alert("template saved successfully");
                    } else {
                        alert(response);
                    }
                }
            });
        } else {
            alert("invalid template name");
        }
         $.ajax ({
                url:  'update_templates.php',
                success: function(response) {
                    $("#container").html(response);
                }
            });
    });
 $("select").change(function () {
          $("select option:selected").each(function () {
            $("#textarea").removeAttr("disabled");
            $("#send").removeAttr("disabled");
              });
          $("#textarea").val($(this).val());
        })
        .trigger('change'); 
```

update_temp.php

```
$sql = ("SELECT template_id, template_text, template_name, member_id FROM message_templates
        WHERE member_id = {$member_id}");
$result = mysql_query($sql) or die(mysql_error());
$num_rows = mysql_num_rows($result);
$confName = get_conference_name($confID);
$confName = formatText_safe($confName);
echo "<label>".$lang['my_template']."</label><select id='tempchoose' name='templates'>";
if ($num_rows == 0) {
    echo '<option value=""> '.$lang['no_saved'].'</option>';
} else {
    for ($i = 0; $i < $num_rows; $i++) {
        //$template_id = mysql_result($result, $i, 0);
        $temp_text = mysql_result($result, $i, 1);
        $temp_name = mysql_result($result, $i, 2);
        echo '<option value="' . $temp_text . '">' . $temp_name . '</option>';
    }
}
echo "</select>"; 
```

click 函数中的最后一个 ajax 请求`#temp`用于使用新创建的模板更新下拉列表，问题是当我单击保存模板时；ajax 请求成功执行并更新了下拉列表，但是发生了一些事情，那就是 select 的更改功能不再起作用了！有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:24:06.490

因为 ajax 会将新元素注入到您的 DOM 中，而这些元素不知道您已经定义的绑定。

**解决方案**：使用 jQuery[`on`](http://api.jquery.com/on/)

改变

```
$("select").change(function () { 
```

至

```
$(document).on("change","select", function(){ 
```

jQuery on 从**1.7+**版本开始可用，如果您使用的是以前版本的 jQuery，请考虑使用`delegate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:29:37.190

是的，因为您已经替换了容器内的下拉菜单，这将取消下拉菜单上的所有事件。解决方案是修改代码如下：

```
 $.ajax ({
            url:  'update_templates.php',
            success: function(response) {
                $("#container").html(response);
                $("#container select").change(
                   // your drop down change functionality here //
                );
            }
        }); 
```

这是说，“下拉刷新后，也刷新事件。”

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T22:24:37.127

如果您使用 Ajax 重写选择，您应该使用 .delegate() 而不是简单的 .change，例如：

```
$("someSelector").delegate("select", "change", function() {
 // do stuff...
}); 
```

其中 someSelector 是包含您的选择的元素。

# c# - 发送到客户端的 WCF 数据为 NULL

> ID：11749880
> 
> 赞同：-1
> 
> 时间：2012-07-31T22:20:09.333
> 
> 标签：c#, wcf

我有一个服务设置，可以从充当服务器的控制台应用程序获取数据......通过服务发送它......并且作为 WCF 应用程序的客户端接收更新的数据。但是，当我在客户端调试时，数据每次都是 NULL。

奇怪的是控制台说它成功地发送了数据。

不知道下一步该去哪里或在这里放置什么代码，因为有很多代码......而且我被告知不要发布这么多。

有什么想法吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:36:51.377

忘记将属性设置为 DataMember 的。现在工作。

# android - 当我按下 iPhone 中的发送 SMS iOS 按钮时会发生什么（在操作系统级别）/为什么 android 允许开发人员以编程方式发送 SMS 而 Ios 不允许？

> ID：11749886
> 
> 赞同：0
> 
> 时间：2012-07-31T22:20:48.483
> 
> 标签：android, iphone, ios

我正在调查一般智能手机，特别是 iPhone 上的 SMS 发送程序。我想问一下是否有人知道当用户在 iOS 要求他时按下“发送”按钮时真正发生了什么，在操作系统级别..（包括这与应用程序所需的权限有何关系，如何短信正文接收身份验证等...）..我问过几个人，但他们无法回答这个问题。最后我想问一下是否有人知道为什么Android允许开发人员以编程方式发送短信而IOS没有。

谢谢

# c# - 在后台工作人员中调用对话框并从中获取值？

> ID：11749889
> 
> 赞同：1
> 
> 时间：2012-07-31T22:20:57.200
> 
> 标签：c#, wpf, dialog, backgroundworker, dispatcher

我正在开发一个 WPF 项目，我必须从很多单个文件中导入数据。这些文件和其中数据的实际导入是在后台工作人员 doWork 方法中完成的。它就像一个魅力，完成工作并且更新进度条也很完美。

不过，现在，根据我在这些文件中遇到的情况，我有时需要先从用户那里得到决定，然后才能继续处理当前文件。

打开窗口/对话框，将其中设置的值返回到 backgroundworker.doWork 方法并继续处理的最佳方法是什么？

这甚至可能与后台工作人员一起使用，还是我需要将该处理逻辑保留在主/UI线程中并以某种方式从那里更新进度条？

我希望你们中的一些人能给我一些提示或指向其他资源，因为我没有找到很多有用的信息来解决我的具体问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:32:48.497

您可以在or上调用`ShowDialog`of an （这也将创建一个新线程）`OpenFileDailog class``new Thread``BackgroundWorker`

但是，当您想要传递或更新在主线程上运行的任何属性或控件时，您将需要使用`Disptacher`类似这样

```
Dispatcher.BeginInvoke(new Action(() => { YourMethodThatUpdatesSomething(); })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:47:33.037

后台工作人员在不同的线程中工作。您不能直接从后台线程调用 UI。实现您想要做的事情的一种方法是使用标志和 Dispatcher 来调用 UI 以进行用户输入

```
 bool WaitFor_Input = false; //flag to indicate user input status

    private void ThreadRun()
    {
        //THIS IS IN Background worker thread
        //do task
        WaitFor_Input = true;
        //ask for user input
        Dispatcher.BeginInvoke(new Action(Show_Dialogue), null);
        while (WaitFor_Input); //Background worker waits untill user input is complete
        //continue further processing
    }

    private void Show_Dialogue()
    {
        //THIS IS IN UI THREAD
        //show your dialogue box here, update data variables
        //finally set
        WaitFor_Input = false;
    } 
```

将处理逻辑保留在后台线程中实际上是一个好主意。

# django - Django：当 post_save 对象时，如何从字符串中获取主题标签？

> ID：11749892
> 
> 赞同：1
> 
> 时间：2012-07-31T22:21:10.583
> 
> 标签：django

假设我有一个 Post 类，它有标题和标签字段。

在 post_save 信号中，我想在标题中找到主题标签并以逗号分隔保存到标签字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:53:31.043

为避免递归，您必须断开并重新连接信号处理程序，以便保存您的实例。

```
from django.db.models.signals import post_save
from myapp.models import Post

def parse_hash_tags(sender, instance, created, **kwargs):
    post_save.disconnect(parse_hash_tags, sender=Post)
    instance.tags = ','.join(re.findall(r'(?:#(\w+))', instance.caption))
    instance.save()
    post_save.connect(parse_hash_tags, sender=Post)

post_save.connect(parse_hash_tags, sender=Post) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:22:50.580

您可以为此使用[正则表达式](http://docs.python.org/library/re.html)

```
>>> import re
>>> s = 'some #example #post caption'
>>> m = re.findall('(?:#([^\s]+))+', s)
>>> m
['example', 'post']
>>> ', '.join(m)
'example, post' 
```

# c# - 每 n 秒使用 OpenHardwareMonitor 库的输出更新一个 TextBox

> ID：11749894
> 
> 赞同：0
> 
> 时间：2012-07-31T22:21:16.297
> 
> 标签：c#

现在它显示温度一次。我希望它像在 openhardwaremonitor 原始程序中一样工作，温度每秒变化/更新一次，或者根据温度是否有任何变化，我不确定它是如何在那里工作的。

我所做的是从构造函数中取出所有 foreach 循环并将其放入计时器滴答事件中。但它不起作用。在 openhardwaremonitor 中，它的显示更改为 51c，而在我的应用程序中，它一直在 44c 上，就像我第一次运行应用程序时一样。

我在 textBox 行上使用了一个断点，有时它到达那里，有时它只是在执行内部循环，但 dosent 将 if 和 dosent 传递到消息框，如果它确实到达消息框，它仍然显示 44c 。

编码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Management;
using OpenHardwareMonitor.Hardware;

namespace NvidiaTemp
{
    public partial class Form1 : Form
    {
        Computer computer = new Computer();
        public Form1()
        {
            InitializeComponent();

            computer.Open();
            computer.GPUEnabled = true;
            timer1.Enabled = true;

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            foreach (var hardwareItem in computer.Hardware)
            {

                if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
                {
                    foreach (var sensor in hardwareItem.Sensors)
                    {
                        if (sensor.SensorType == SensorType.Temperature)
                        {
                            //   MessageBox.Show(String.Format("The current temperature is {0}", sensor.Value));
                            textBox1.Text = String.Format("The current temperature is {0}", sensor.Value);
                        }
                    }
                }

            }
        }
    }
} 
```

1.  为什么每次执行循环时它都会更新它不会到达 textBox 行？

2.  如果温度值发生变化或其与 openhardwaremonitor 原始程序中的计时器一起使用，它是否会更新温度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:34:55.407

[实际上，我在您之前的问题](https://stackoverflow.com/questions/11749306/im-trying-to-use-openhardwaremonitor-source-code-but-never-get-my-video-card-tem)上发布了对此的部分答案，但将其包含在此处以供参考。

您的问题实际上主要是关于 Windows.Forms.Timer 的标准问题（或者您甚至可以使用 BackgroundWorker 或您选择的任何其他计时器，通常需要注意检查 InvokeRequired）

无论如何，以下是一个适合您的简短示例：

```
 Timer timer;

    Computer myComputer;

    ISensor GPUTemperatureSensor;

    public Form1()
    {

        InitializeComponent();

        myComputer = new Computer();

        myComputer.Open();

        myComputer.GPUEnabled = true;

        foreach (var hardwareItem in myComputer.Hardware)
        {

            if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
            {
                foreach (var sensor in hardwareItem.Sensors)
                {
                    if (sensor.SensorType == SensorType.Temperature)
                    {
                        GPUTemperatureSensor = sensor;

                    }
                }
            }

        }

        timer = new Timer();
        timer.Interval = 5000;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();

     }

    void timer_Tick(object sender, EventArgs e)
    {
        if(GPUTemperatureSensor != null)
        {
            GPUTemperatureSensor.Hardware.Update();//This line refreshes the sensor values
            textBox1.Text = String.Format("The current temperature is {0}", GPUTemperatureSensor.Value);
        }
        else
        {
            textBox1.Text = "Could not find the GPU Temperature Sensor. Stopping.";
            timer.Stop(); 
        }
    } 
```

我实际上已将传感器存储在类级别，以避免每次都枚举硬件集合。

我还为硬件上的 Update() 方法添加了 @mikez 评论 - 谢谢 Mike！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:36:27.547

我不确定你为什么要在循环中这样做。我猜这会导致问题，因为如果循环在下一个滴答声之前还没有完成，他们可能会互相踩踏。

假设该 GPU 中只有 1 个 GPU 和 1 个温度传感器，为什么不这样做：

```
var hardwareItem = computer.Hardware.Single(h => h.HardwareType == HardwareType.GpuNvidia)
var sensor = hardwareItem.Sensors.Single(s => s.SensorType == SensorType.Temperature)
//   MessageBox.Show(String.Format("The current temperature is {0}", sensor.Value));
textBox1.Text = String.Format("The current temperature is {0}", sensor.Value); 
```

您将完全删除不必要的循环，并且应该使该方法快速运行。

# three.js - 三.js ColladaLoader 源文件的位置

> ID：11749906
> 
> 赞同：8
> 
> 时间：2012-07-31T22:22:03.567
> 
> 标签：three.js, collada

我一直在研究 Javascript 3d 编程。因此，我了解了 THREE.js 框架，并取得了一些成功。之后，我将自己创建的 Google Sketchup 文件 (.skp) 导出到 Collada (.dae)，并在网上找到了一些讨论 ColladaLoader.js 的教程。

这些示例说明了如下内容：

```
<script src="three.js"></script>
<script src="ColladaLoader.js"></script> 
```

这是否意味着有一个 ColladaLoader.js 文件可供下载？就像有一个three.js 文件和一个jquery.js 文件一样？

我已经执行了所有可能的谷歌搜索，但没有找到这个问题的答案或适用的源代码文件。我真的很感激一个答案。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T22:24:36.873

[https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ColladaLoader.js](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/ColladaLoader.js)

# powershell - 在后台通过 VBS 运行 ps1

> ID：11749917
> 
> 赞同：0
> 
> 时间：2012-07-31T22:23:29.377
> 
> 标签：powershell, vbscript

我正在尝试运行一个 ps1 脚本，当您在 windows xp 上锁定或解锁会话时，该脚本会发出“哔”声警报。我已经得到它，我正在尝试通过 VBS 脚本调用该脚本。问题是，如果我手动执行 VBS，则会出现 power shell 窗口，显然，当我关闭它时，脚本停止运行。这是我的代码：

这是ps1：

$sysevent = [microsoft.win32.systemevents]

Register-ObjectEvent -InputObject $sysevent -EventName SessionSwitch -Action {[console]::Beep();Write-host ($args[1]).Reason}

这是 VBS：

设置 objShell = CreateObject("Wscript.Shell") objShell.Run("powershell.exe -noexit c:\beep.ps1")

有人知道如何防止电源外壳窗口并在后台运行脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:44:02.157

不需要 ps1 脚本，我使用这个衬里

```
WScript.CreateObject ("WScript.Shell").Run "cmd /c " & chr(7),0,False 
```

还在[http://forums.mozillazine.org/viewtopic.php?p=11616563](http://forums.mozillazine.org/viewtopic.php?p=11616563)找到了一些有用的建议，例如可以编译的小 c 程序或 nircmd 命令。

# mysql - 哪一个是更好的haversine或pythagorean？

> ID：11749919
> 
> 赞同：0
> 
> 时间：2012-07-31T22:23:42.707
> 
> 标签：mysql, mathematical-optimization, haversine, pythagorean

我有mysql查询来计算50米半径内给定经度和纬度之间的距离。在这里，我想从性能、速度和距离精度方面知道哪一个更好，haversine 还是 pythagorean？

# algorithm - 重复洪水填充优化

> ID：11749931
> 
> 赞同：1
> 
> 时间：2012-07-31T22:24:49.113
> 
> 标签：algorithm

我正在使用基于网格的系统，该系统具有可交叉和不可交叉的正方形，带有 A* 用于查找路径，并使用洪水填充来查看是否可以找到路径（查看两个区域是否连接）。

我的问题是，可能会非常频繁地引入新的不可穿越区域（每秒最多 16 次），并且网格相当大（大约 500 x 500），所以即使是 O(mn) 洪水填充解决方案也需要相当长的时间. 我查看了 Floodfill 的不同实现，但找不到与我想要的类似的东西。

所以我的问题是，有没有什么方法可以根据先前的网格和新的不可穿越区域列表（始终是矩形）来优化重复的洪水填充调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:43:33.510

首先使用洪水填充算法将可交叉的正方形划分为连接的组件。

当您将一个区域标记为不可交叉时，请考虑该区域外与该区域中先前可交叉的正方形相邻的所有可交叉正方形的集合 S。对于 S 中至少有两个成员的每个组件 C，使用洪水填充检查 C 是否已断开连接。

当您将一个区域标记为可交叉时，请考虑该区域外与该区域中一个正方形相邻的所有可交叉正方形的集合 S。将所有具有 S 中的成员的组件连接起来。

# android - 库项目中的 Android 样式查找

> ID：11749935
> 
> 赞同：1
> 
> 时间：2012-07-31T22:25:35.250
> 
> 标签：android, android-layout, android-ui

我很难让它发挥作用。我有一个自定义控件，我已将其移至从我的主应用程序项目中引用的库项目中。在库项目中，我定义了一些可样式化的属性（忽略最后一个中的错字，修复:-)）：

```
<declare-styleable name="PinLockKeyPad">
    <attr name="keypadKeyBackground" format="reference" />
    <attr name="cancelKeyBackground" format="reference" />
    <attr name="keypadButtonTextSize" format="dimension" />
    <attr name="cancelButtonTextSize" format="dimension" />
    <attr name="backspaceButtonImageResouce" format="reference" />
</declare-styleable> 
```

这些可样式化的属性不会在任何地方的 java 代码中引用，而是在库的 styles.xml 文件中使用，如下所示：

```
<style name="KeypadButton" parent="MatchBoth">
    <item name="android:background">?keypadKeyBackground</item>
    <item name="android:textColor">@color/white</item>
    <item name="android:textSize">?keypadButtonTextSize</item>
    <item name="android:textStyle">bold</item>
    <item name="android:typeface">sans</item>
    <item name="android:layout_weight">1</item>
</style> 
```

在我的主应用程序中，我在 styles.xml 中完成了以下操作：

```
<style name="Theme.App" parent="@style/Theme.Sherlock.Light.DarkActionBar.ForceOverflow">
    <item name="keypadKeyBackground">@drawable/keypad_key</item>
    <item name="cancelKeyBackground">@drawable/keypad_key</item>
    <item name="pinHintTextColor">@color/white</item>
    <item name="pinInputBackground">@color/white</item>
    <item name="keypadButtonTextSize">18sp</item>
    <item name="cancelButtonTextSize">18sp</item>
    <item name="backspaceButtonImageResouce">@drawable/ic_delete</item>
</style> 
```

并已将 Theme.App 设置为我的应用程序主题。但是，由于未定义这些属性，我在尝试对引用 KeypadButton 样式的类进行膨胀时遇到崩溃。我错过了什么？

旁注：这可能与我的主应用程序中有多个库有关。我有另一个应用程序可以执行完全相同的操作并且不会崩溃，但它只使用一个库（使用这些样式的库）。

# r - R：将值从一列分配给另一列

> ID：11749938
> 
> 赞同：3
> 
> 时间：2012-07-31T22:25:53.440
> 
> 标签：r

这可能有一个非常简单的答案，但我无法弄清楚......

什么是基于向量的方法，可以在数据框中的一列的单元格中获取一个值，以满足给定行中的某些标准为条件，并将其分配给同一行但在不同列中的单元格？我已经通过 if-else 语句的循环来完成它，但是我正在处理非常大的数据集，并且我的小笔记本电脑在循环条件下冻结了几分钟。

例如。如果我有这样的事情：

```
Results$TResponseCorrect[Results$rownum %in% CorrectTs$rownum] <- 1 
```

效果很好。但是不起作用的是

```
Results$TResponseCorrect[Results$rownum %in% CorrectTs$rownum] <- Results$TCorrect 
```

在这种情况下，我会收到一条警告，“要替换的项目数不是替换长度的倍数”，我基本上认为这意味着它无法确定要采用 Results$Subject 列的哪个单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:31:09.573

由于您的问题陈述暗示所有这些都在同一个数据框中，您可能想要：

```
Results$TResponseCorrect[Results$rownum %in% CorrectTs$rownum] <- 
                Results$TCorrect[Results$rownum %in% CorrectTs$rownum] 
```

然后它将在作业的 LHS 和 RHS 上具有相同数量的项目。

# javascript - 在 ExtJs 4 网格中强制执行唯一键值

> ID：11749940
> 
> 赞同：1
> 
> 时间：2012-07-31T22:26:07.043
> 
> 标签：javascript, extjs, extjs4, datastore, gridpanel

我正在 ExtJs 4 中设计一个表示 Map 数据结构的网格。我有一个用于网格中*键*列的自定义单元格编辑器。*我想强制执行密钥在所有密钥*中必须是唯一的这一事实。我该怎么做呢？

目前，我正在尝试使用自定义验证器设置一个特殊的文本字段编辑器，通过将其与 dataStore 的值进行比较来检查用户提交的*键值是否唯一。*不幸的是，这遇到了数据存储不知道什么是“当前”记录，因此在检查重复项时不知道要排除哪个记录的问题。

^令人困惑，对吧？这就是为什么我认为我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:18:52.830

这是一个很好的问题，我最终做了你正在做的事情。为了处理当前记录，以便我可以将其从查找中排除，我在`vtype`验证函数中添加了类似的内容：

```
unique: function (val, field) {
  // If field has not been changed - don't care about anything else
  if (field.originalValue === undefined || val === field.originalValue) {
    // _trace('unique - original value has not changed'); 
    return true;
  }

  if (!field.isDirty()) {
    // _trace('unique - field is not dirty'); 
    return true;
  }

  // Check you store here...
},
uniqueText: 'Duplicate' 
```

还有一点需要注意 - 如果您将尝试在对话框中使用相同的验证器（与网格行编辑器相反） - 您将需要添加更多检查，因为`originalValue`不会始终正确设置（至少我必须在 4.0.7 中这样做）我的应用程序）。

# php - 如果设置了 Zend_Translate，Zend_Form 无法设置自定义元素验证消息

> ID：11749950
> 
> 赞同：1
> 
> 时间：2012-07-31T22:27:56.623
> 
> 标签：php, zend-framework, zend-form, translation

如果`Zend_Translator`应用于. 绝对不可能设置自定义元素验证消息`Zend_Form`。请看我的例子...

```
class App_Form extends Zend_Form 
{

    public function init() 
    {

        parent::init();

        //let's create and set translator for our form
        $translations = array(
            Zend_Validate_NotEmpty::IS_EMPTY => 'Value is required for this field.' //just one line of translations as example
        );
        $adapter = new Zend_Translator('array', $translations);
        $this->setTranslator($adapter);

        //now we're going to add some text element
        $element = new Zend_Form_Element_Text('firstname');
        $element
            ->setRequired(true)
            ->setFilters(array('StringTrim'))
            ->addValidator('NotEmpty')
        ;

        //now we're overriding error message for key with name Zend_Validate_NotEmpty::IS_EMPTY
        $element->getValidator('NotEmpty')->setMessage('Please enter your first name.', Zend_Validate_NotEmpty::IS_EMPTY);
        $this->addElement($element);

        if (!$this->isValid(array('firstname' => ''))) {
            print_r($this->getErrorMessages());
            //we'll still get "Value is required for this field." message
            //if we will try to disable translator we'll get correct message "Value is required for this field."
        }

    }

} 
```

调用方法时会发生此错误`Zend_Form::getErrorMessages()`。此方法使用已翻译的消息模板覆盖当前消息模板。

所以，不修改似乎不可能完成这个任务`Zend_Validate_Abstract`

有任何想法吗？

# owl - 从 DBPedia 提取的数据的可能存储选项

> ID：11749952
> 
> 赞同：1
> 
> 时间：2012-07-31T22:28:20.180
> 
> 标签：owl, freebase, dbpedia, bigdata, protege

我正在开发一个允许用户标记产品购买的应用程序（通过 Web 应用程序）。

我打算使用这些标签来自动查询 DBPedia（可能的其他开放数据源，例如 FreeBase）。

从 DBPEdia 返回的前*N*​​个结果将显示给用户，他们将选择与他们输入的标签最相似的结果。（我只会提取特定的数据）。

例如：
用户输入标签“iPhone”和发送到 DBPedia 的 SparSQL 查询。结果被解析，每个结果的一些数据显示给用户，然后用户选择最接近他们购买的东西。

我想从用户选择的 DBpedia 结果中提取一些数据，并将其存储起来以用于稍后阶段的营销目的。（理想情况下，通过调用 API）

我在想 Bigdata 或 Protege OWL，但都没有使用经验

任何人都可以建议这项任务的最佳工具和优点/缺点/学习曲线/等等......？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:42:36.240

这完全取决于您想对提取的数据做什么。最简单的选择是将协调后的实体 URI 与您的其他数据一起存储在关系数据库甚至 NoSQL 数据库中。这使您以后可以轻松地在 Freebase 和 DBpedia 中查询该实体。

如果您想从 Freebase 和 DBpedia 中获取有关实体的“所有需要了解的信息”，那么最好使用三重商店。通过这种方式，可以在本地查询所有数据；但现在你必须担心保持更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:34:18.043

对于您想到的那种事情，我认为您不一定需要高度可扩展的三重存储解决方案。在我看来，更重要的是您拥有一个工具包，可以轻松执行 SPARQL 查询、结果处理和 RDF 数据的快速本地缓存。

考虑到这些，我建议看看[OpenRDF Sesame](http://www.openrdf.org)。它是一个 Java 工具包和 API，用于与 RDF 和 SPARQL 一起工作，并支持多个存储后端。它有一些内置存储，可以很好地满足您的需求（在单个存储中扩展到大约 1 亿个事实），如果您确实发现需要更大/更好的存储解决方案，BigData 或 OWLIM 之类的存储很不错大部分只是 Sesame 自己的存储后端的替代品，因此您无需对代码进行大量更改即可进行切换。

只是给您一个想法：以下代码行使用 Sesame 对 DBPedia 触发 SPARQL 查询并处理结果：

```
 SPARQLRepository dbpediaEndpoint = new SPARQLRepository("http://dbpedia.org/sparql");
  dbpediaEndpoint.initialize();
  RepositoryConnection conn = dbpediaEndpoint.getConnection();
  try {
     String queryString = " SELECT ?x WHERE { ?x a foaf:Person } LIMIT 10";
     TupleQuery query = conn.prepareTupleQuery(Querylanguage.SPARQL, queryString);
     TupleQueryResult result = query.evaluate(); 

     while(result.hasNext()) {
        // and so on and so forth, see sesame manual/javadocs 
        // for details and examples
     }
  }
  finally {
    conn.close();
  } 
```

（披露：我在芝麻上工作）

# php - HTTP DIGEST AUTH 问题

> ID：11749954
> 
> 赞同：0
> 
> 时间：2012-07-31T22:28:34.600
> 
> 标签：php, digest-authentication

很长一段时间以来，我一直在为我的 API 使用 http digest auth，似乎它按我的预期工作。

但是，它似乎出现错误并提示重新验证三次。在第四个它只记录发送电子邮件的用户（作为用户名），即使密码错误

我对为什么在发送有效密码之前它不会继续重新验证感到有些困惑。

```
 <?php

    class Model_Authentication_Init {

    const REALM = 'theaudienceauth';

    protected $user_id = NULL;
    protected $user_permissions = array();
    protected $user;
    protected $db;

    public static $instance;
    const ADMIN_PERMISSION_ID = 1;

    public function __construct() {
        $this->db = Zend_Registry::get('db');
    }

    public static function getInstance() {

        if (!isset(self::$instance)) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    protected function extractData() {

        $realm = self::REALM;

        if (empty ( $_SERVER ['PHP_AUTH_DIGEST'] )) {
            header ( 'HTTP/1.1 401 Unauthorized' );
            header ( 'WWW-Authenticate: Digest realm="' . $realm . '",qop="auth",nonce="' . uniqid () . '",opaque="' . md5 ( $realm ) . '"' );
            exit ();
            die ( 'Text to send if user hits Cancel button' );
        }

        //be careful username on account isnt the same as username in the db also, later
        $data = http_digest_parse ( $_SERVER ['PHP_AUTH_DIGEST'] );
        return $data;
    }

    protected function validateData($data, $password) {

        $realm          = self::REALM;
        $A1             = md5 ( $data ['username'] . ':' . $realm . ':' . $password );
        $A2             = md5 ( $_SERVER ['REQUEST_METHOD'] . ':' . $data ['uri'] );
        $valid_response = md5 ( $A1 . ':' . $data ['nonce'] . ':' . $data ['nc'] . ':' . $data ['cnonce'] . ':' . $data ['qop'] . ':' . $A2 );

        if ($data ['response'] != $valid_response) {
            die ( 'Wrong Credentials!' );
        }
    }

    public function authData($data) {

        if (isset ($data ['username'])) {
            $account_q          = $this->db->query (" SELECT `id`, `encrypted_password` FROM `User` WHERE `email` = '".$data['username']."' AND `enabled` = 1 AND deleted = 0 ");
            $account            = $account_q->fetch ( PDO::FETCH_OBJ );
            $account_q->closeCursor();

            if (is_object ( $account )) {
                $password_fetched = decrypt_password ( $account->encrypted_password ); //@todo might need to decr.

                if (! defined ( 'CONNECTED_ACCOUNT_ID' )) {
                    define ( 'CONNECTED_ACCOUNT_ID', $account->id );
                }

                $_SESSION ['logged_in']             = 1;
                $_SESSION ['CONNECTED_ACCOUNT_ID']  = $account->id;
                $_SESSION ['email']                 = $data['username'];
                $user_permissions                   = Model_User_Permission::listing ( $account->id );
                $_SESSION['user_permissions']       = $user_permissions;
                $user_id                            = $account->id;
                $account                            = NULL;
            } else {
                die ( 'Could not auth with details passed: email: ' . $data ['username'] );
            }
        }

        $this->user_id              = $user_id;
        $this->user_permissions     = $user_permissions;
        return array($user_id, $user_permissions, $password_fetched);
    }

    /**
     * Main auth method
     * @throws Model_Exception_Application
     */
    public function auth() {

        $userId             = NULL;
        $user_permissions   = NULL;

        if (! isset ( $_SESSION ['logged_in'] ) || $_SESSION ['logged_in'] != 1) {

            $data = $this->extractData();
            list($userId, $user_permissions, $password_fetched) = $this->authData($data);

            // analyze the PHP_AUTH_DIGEST variable
            if (! ($data)) {
                throw new Model_Exception_Application ( 903 );
                die ( 'Wrong Credentials!' );
            }

            $this->validateData($data, $password_fetched);

        } else {
            if (! defined ( 'CONNECTED_ACCOUNT_ID' )) {
                define ( 'CONNECTED_ACCOUNT_ID', $_SESSION ['CONNECTED_ACCOUNT_ID'] );
            }
            $userId = $_SESSION ['CONNECTED_ACCOUNT_ID'];
            //if user permissions are not set to a session, set it
            $user_permissions = $_SESSION['user_permissions'] = Model_User_Permission::listing($userId);// isset($_SESSION['user_permissions']) && !empty($_SESSION['user_permissions']) ? $_SESSION['user_permissions'] : Model_User_Permission::listing($userId);
        }

        $this->user_id                  = $userId;
        $this->user = $_SESSION['user'] = Model_Baseclass::load_by_fields(array('table_name' => 'User', 'id' => $userId)); //isset($_SESSION['user']) && !empty($_SESSION['user']) ? $_SESSION['user'] : Model_Baseclass::load_by_fields(array('table_name' => 'User', 'id' => $userId));
        $this->user_permissions         = $user_permissions;
    }
} 
```

上面的调用是：

```
Model_Authentication_Init::getInstance($this->rest); 
```

* * *

编辑：不确定现在的原因是什么，因为那是很久以前的事了，但我们开始吧：

```
<?php

class System_Authentication_Init {

    const REALM = 'auth';

    protected $user_permissions = array();
    protected $user;
    protected $db;

    public static $instance;
    const ADMIN_PERMISSION_ID = 1;

    public function __construct() {
        $this->db = Zend_Registry::get('db');
    }

    public static function getInstance() {

        if (!isset(self::$instance)) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    protected function extractData() {

        $realm = self::REALM;

        if (empty ( $_SERVER ['PHP_AUTH_DIGEST'] )) {
            header ( 'HTTP/1.1 401 Unauthorized' );
            header ( 'WWW-Authenticate: Digest realm="' . $realm . '",qop="auth",nonce="' . uniqid () . '",opaque="' . md5 ( $realm ) . '"' );
            exit ();
            die ( 'Text to send if user hits Cancel button' );
        }

        //be careful username on account isnt the same as username in the db also, later
        $data = http_digest_parse ( $_SERVER ['PHP_AUTH_DIGEST'] );
        return $data;
    }

    protected function validateData($data, $password) {

        $realm          = self::REALM;
        $A1             = md5 ( $data ['username'] . ':' . $realm . ':' . $password );
        $A2             = md5 ( $_SERVER ['REQUEST_METHOD'] . ':' . $data ['uri'] );
        $valid_response = md5 ( $A1 . ':' . $data ['nonce'] . ':' . $data ['nc'] . ':' . $data ['cnonce'] . ':' . $data ['qop'] . ':' . $A2 );

        if ($data ['response'] != $valid_response) {
            session_destroy();
            session_unset();
            session_regenerate_id();
            die ( 'Wrong Credentials!' );
        }
    }

    public function authData($data) {

        if (isset ($data ['username'])) {
            $accountQuery       = $this->db->query (" SELECT `id`, `encrypted_password` FROM `User` WHERE `email` = '".$data['username']."' AND `enabled` = 1 AND deleted = 0 ");
            $account            = $accountQuery->fetch ( PDO::FETCH_OBJ );
            $accountQuery->closeCursor();

            if (is_object ( $account )) {
                $passwordReturned = decrypt_password ( $account->encrypted_password );

                if (! defined ( 'CONNECTED_ACCOUNT_ID' )) {
                    define ('CONNECTED_ACCOUNT_ID', $account->id);
                }

                $_SESSION ['logged_in']             = 1;
                $_SESSION ['CONNECTED_ACCOUNT_ID']  = $account->id;
                $_SESSION ['email']                 = $data['username'];
                $user_permissions                   = Model_User_Permission::listing ( $account->id );
                $_SESSION['user_permissions']       = $user_permissions;
                $account                            = NULL;
            } else {
                die ( 'Could not auth with details passed: email: ' . $data ['username'] );
            }
        }

        $this->user_permissions = $user_permissions;
        return array($user_permissions, $passwordReturned);
    }

    /**
     * Main auth method
     * @throws System_Exception_Application
     */
    public function authenticate() {

        $user_permissions   = NULL;

        if (! isset ( $_SESSION ['logged_in'] ) || $_SESSION ['logged_in'] != 1) {

            $data = $this->extractData();
            list($user_permissions, $passwordReturned) = $this->authData($data);

            // analyze the PHP_AUTH_DIGEST variable
            if (! ($data)) {
                throw new System_Exception_Application ( 903 );
                die ( 'Wrong Credentials!' );
            }

            $this->validateData($data, $passwordReturned);

        } else {
            if (! defined ( 'CONNECTED_ACCOUNT_ID' )) {
                define ( 'CONNECTED_ACCOUNT_ID', $_SESSION ['CONNECTED_ACCOUNT_ID'] );
            }
            //if user permissions are not set to a session, set it
            $user_permissions = $_SESSION['user_permissions'] = Model_User_Permission::listing(CONNECTED_ACCOUNT_ID);// isset($_SESSION['user_permissions']) && !empty($_SESSION['user_permissions']) ? $_SESSION['user_permissions'] : Model_User_Permission::listing($userId);
        }

        $this->user = $_SESSION['user'] = Model_Baseclass::load_by_fields(array('table_name' => 'User', 'id' => CONNECTED_ACCOUNT_ID)); //isset($_SESSION['user']) && !empty($_SESSION['user']) ? $_SESSION['user'] : Model_Baseclass::load_by_fields(array('table_name' => 'User', 'id' => $userId));
        $this->user_permissions         = $user_permissions;
    }

    public function isAdmin() {

        if (!$this->user_permissions || empty($this->user_permissions) ) {
            $this->authenticate();
        }   

        if ($this->user_permissions) {
            foreach ($this->user_permissions as $user_permission) {
                if (isset($user_permission->{'permission_id'}) && $user_permission->{'permission_id'} == self::ADMIN_PERMISSION_ID) {
                    return true;
                }
            }
        }
        return false;
    }

    /**
     * returns user id
     * @return User id
     */
    public function getUserId() {
        return $this->user->id;
    }

    /* Added by aaron
     * returns the internal user object
     * */
    public function getUserObject() {
        Zend_Registry::set('user', $this->user);
        return $this->user;
    }

    /**
     * returns user permissions
     * @return _user_permissions User Permissions
     */
    public function getUserPermissions() {
        return $this->user_permissions;
    }

} 
```

# ajax - 我们能否像搜索引擎一样识别 googlebot 在特定 URL 上的命中？

> ID：11749956
> 
> 赞同：0
> 
> 时间：2012-07-31T22:28:51.433
> 
> 标签：ajax, load, googlebot

**我的问题：**

我的客户网站显示更多产品并增加了更多页面加载/重量。所以我决定使用 ajax 加载更多产品并且效果很好。但在这里它会影响 seo - 并且没有产品或交易被编入索引（即使我建议客户通过 googlebase 提交产品，但客户不喜欢这个想法，他希望谷歌直接爬入网站，也希望减少页面加载时间）。

**问题：** 我们能否识别googlebot对服务器的抓取请求或mozila之类的浏览器用户代理对站点（服务器）的请求。

**我有的建议**

我试图从请求中识别用户代理，但它不起作用（或者我可能会遗漏一些东西？）请任何人有正确的解决方案来解决这个问题，以减少使用 ajax 的页面加载时间并让 googlebot 也抓取网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:22:25.353

您应该只在 stackoverflow 中搜索["Google AJAX SEO"](https://stackoverflow.com/search?q=google%20ajax%20crawlable)。围绕这一点有很多问题。

简而言之，谷歌有一个使 AJAX 网站可抓取的规范：[https ://developers.google.com/webmasters/ajax-crawling/docs/getting-started?hl=sv-SE](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started?hl=sv-SE)

您也可以将[PushState 视为 SEO 选项](https://stackoverflow.com/questions/6193858/pushstate-and-seo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:36:54.937

用于解决此问题的一种策略是利用您正在使用的任何框架或 CMS 的分页功能。您加载一页内容并在视图中显示分页链接，然后使用 JavaScript 隐藏分页链接并通过 Ajax 获取链接的分页页面的内容并将其附加到当前页面。看看无限滚动是如何获得灵感的：

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

基本上，您至少需要加载指向包含其他内容的页面的链接，以便搜索引擎可以抓取内容，但您可以为启用了 JavaScript 的用户隐藏这些链接。

但为了更好地回答您的问题，可以使用 htaccess 重定向机器人： [redirect all bots using htaccess apache](https://stackoverflow.com/questions/2691956/redirect-all-bots-using-htaccess-apache)

但据我所知，在页面上实际提供内容或指向它的链接是更好的 SEO。

# iphone - MovieFinishedCallback 通知未触发

> ID：11749960
> 
> 赞同：0
> 
> 时间：2012-07-31T22:29:10.213
> 
> 标签：iphone, xcode, video, uiviewcontroller, mpmovieplayercontroller

我正在尝试创建一个在视频停止播放后显示信息页面的应用程序。我查看了此处发布的类似问题并尝试实现它，但它仍然不起作用。我在 movieFinishedCallback 方法中放置了一个 NSLog，但从未出现过，所以我猜它甚至没有被调用。有人可以帮我弄清楚吗？

这是我的实现代码...

```
-(IBAction)playvideo {

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"sample" ofType:@"mov"]];

    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
                                                     initWithContentURL:url];

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(movieFinishedCallback:)                                                 
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:playercontroller];

    [self presentMoviePlayerViewControllerAnimated:playercontroller];

    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

    [playercontroller.moviePlayer play];

    playercontroller = nil;

} 

- (void) movieFinishedCallback:(NSNotification*) notification {

  NSLog (@"The video ended");

  MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];    
    player = nil;

    View2 *second =[[View2 alloc] initWithNibName:nil bundle:nil];

    [self presentModalViewController:second animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:44:20.780

我认为您可能会在电影完成后被回调，但在呈现 View2 时失败。

View2 是 UIViewController 的子类吗？我看不出如何通过将 nil 传递给 initWithNibName: 来获得有效结果。我建议在 movieFinishedCallback 中使用 NSLog 来证明你到达那里。然后 NSLog(@"second = %@", second); 我的猜测是零。

解决方法是使用有效的笔尖或从情节提要中加载真实的视图控制器......

```
// @"MainStoryboard" should be the name of the storyboard containing your VC
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

// @"SomeViewController" has to be set on the attributes inspector of the VC
// in the storyboard
SomeViewController *newVC = [storyboard instantiateViewControllerWithIdentifier:@"SomeViewController"];
[self presentModalViewController:newVC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:10:54.663

终于成功了！我不知道这是否与 MPMoviePlayerViewController 不响应 NSNotificationCenter 的事实有关，但我使用 MPMoviePlayerController 来显示我的视频，注册了 movieFinishedCallback 的通知，然后使用 movieFinishedCallback 方法切换视图。有关视频播放，请参阅本教程[http://www.techotopia.com/index.php/Video_Playback_from_within_an_iOS_5_iPhone_Application](http://www.techotopia.com/index.php/Video_Playback_from_within_an_iOS_5_iPhone_Application)。唯一的问题是，现在视频不会旋转到横向！

# c++ - For循环没有被执行

> ID：11749961
> 
> 赞同：0
> 
> 时间：2012-07-31T22:29:13.620
> 
> 标签：c++, visual-c++

我有以下代码片段，其中我试图将一些语句打印到 XML 文件中：

```
void parseXML::writeStruct(std::fstream& abc,std::string prnt)
{
    for (map<string,struct structSet>::iterator it = structData.begin();it != structData.end();it++)
    {
      if (((it->second.parent.compare("")==0) && (it->second.written == false)))
      {
        bool write = true;
        if (it->second.type.compare("")==0)
        {
            for (set<std::string>::iterator i = it->second.fields.begin(); i != it->second.fields.end(); i++)
            {
                map<string,struct fieldSet>::iterator fd = fieldData.find(*i);
                if (fd != fieldData.end())
                {
                    std::string type = fd->second.type;
                    map<string,struct structSet>::iterator ntC = structData.find(type);
                    if (ntC != structData.end())
                    {
                        if (ntC->second.type.compare("") != 0)
                        {
                           map<string,struct structSet>::iterator ntC = structData.find(ntC->second.type);
                           if (ntC == structData.end()|| ntC->second.type.compare("")!= 0||ntC->second.written == false)
                           {  
                              continue;
                           }

                        }
                        else
                        {
                            map<string,struct structSet>::iterator ntC = structData.find(ntC->second.type);
                            if (ntC->second.parent.compare(it->second.name))
                            {
                            }
                            else if (ntC->second.written == true)
                            {
                                abc << INDENT << "\t" <<"\t" << "<nonterminal ref= \"" << ntC->second.name.c_str() << "\">" << std::endl;
                                abc << INDENT << "\t" << "\t" <<"\t" << "<name>" << fd->second.name.c_str() << "</name>" << std::endl;
                                abc << INDENT << "\t"<< "\t" << "</nonterminal >" << std::endl;
                            }
                        }
                    } 
```

问题是它没有执行第一个`for`循环：

```
for (map<string,struct structSet>::iterator it = structData.begin(); it != structData.end(); it++) 
```

可能的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:42:30.193

这是一个（希望如此）完整列表，对于明显的条目感到抱歉，但我们不知道您的经验如何：

*   `structData`是空的
*   `structData`已损坏，导致应用程序崩溃
*   `parseXML::writeStruct`从未被处决
*   for 循环已执行，但以下 ( `if`, `for`) 条件失败，您错误地解释了这一点。

选择调试器或添加跟踪消息（不要忘记使用`endl`，因为输出通常是行缓冲的，在崩溃时会丢失）。

Note: *post only the relevant part of the code, the rest of it is just noise for us (unless you want a code review for which there is [https://codereview.stackexchange.com/](https://codereview.stackexchange.com/))*

# jquery - 使用 ajax 将数据发送到控制器操作

> ID：11749962
> 
> 赞同：1
> 
> 时间：2012-07-31T22:29:24.910
> 
> 标签：jquery, extjs, yii

我使用 yii 框架来创建地图应用程序。在这个应用程序中，我使用 GeoExt 和 Openlayers。在这个应用程序中，用户可以绘制多边形并保存它以在用户绘制多边形并单击它后实现这一点（OpenLayers 功能）我使用 ajax 发送多边形以保存在数据库上，但我无法从 yii 框架中的控制器操作中获取任何 ajax 数据。请参见下面的代码！

```
var selectOptions = {
            clickout: true,
            onSelect: save
        };
        select = new OpenLayers.Control.SelectFeature(vectors, selectOptions);
        map.addControl(select);
var saveButton = new Ext.Button({
            text: 'Save',
            enableToggle: true,
            toggleGroup: toggleGroup,
            handler: function(toggled)
            {
                if(toggled){
                    polygon.deactivate();
                    modify.deactivate();
                    select.activate();
                }   
            }
function save(feature) {
        var geojson_format = new OpenLayers.Format.GeoJSON();
        var str = geojson_format.write(feature, true);
        Ext.MessageBox.prompt('Name', 'Please enter district name:', "Ok");
        <?php 
            echo CHtml::ajax(array(
                'url'=>array('site/test'),
                'data'=>array('polygon'=>'data'),
                'type'=>'POST',
                'success'=>"function(){
                        alert('ok');
                    }"
            ));
        ?>
        $("#output").val(str);
    } 
```

在保存功能中，我使用 yii Chtml::ajax 将多边形发送到 Yii 站点控制器测试操作在这个 php 代码中我发送带有“数据”的多边形进行测试，但实际上我想发送 str 变量，即多边形 geojson 对象到控制器操作. 在函数结束时，我使用 $("#output").val(str); 为了测试geojson str var，我在输出文本区域中看到了输出，但我不知道为什么数据没有发送到控制器操作！控制器动作代码

```
 class SiteController extends Controller
   {
public $polygon;
public function actionTest()
    {
       if(isset($_POST['polygon']))
            $this->polygon=$_POST['polygon'];

         $this->render("test", array('polygon'=>$this->polygon));
} 
```

为了测试功能，我在地图中创建了一个多边形并在切换此按钮后单击保存按钮我单击创建的多边形我在输出文本区域中看到多边形 geojson 对象但是当我想在浏览器中查看多边形对象时`http://localhost/FleetManagement/index.php/site/test`我只看到 Null ！！测试视图代码：

```
<?php 
    var_dump($polygon);
?> 
```

下面是chrome开发者工具中的保存功能！

```
function save(feature) {
        var geojson_format = new OpenLayers.Format.GeoJSON();
        var str = geojson_format.write(feature, true);
        Ext.MessageBox.prompt('Name', 'Please enter district name:', "Ok");
        jQuery.ajax({'url':'/FleetManagement/index.php/site/test','data':{'polygon':'data'},'type':'POST','cache':false});            $("#output").val(str);
    } 
```

当我调试时，我看到 JQuery.ajax 行执行，但我不知道该行是否可以发送数据！因为当我看到测试视图时，我只看到 Null！在上面的代码中，我可以看到成功警报，但在测试视图中看不到站点控制器多边形，并且 $polygon 为空！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:18:30.160

我相信您的代码可能正在运行 - 在 actionTest() 中添加 var_dump($_POST) 将是一个不错的起点。

由于您正在进行 AJAX 调用，因此 $this->render() 不会以您期望的方式返回浏览器。我想在 Chrome 开发者工具，网络选项卡，然后响应选项卡中，你会看到“数据”。

通常，要取回数据，您需要以下内容：

```
public function actionTest()
{
   if(isset($_POST['polygon']))
        $polygon = $_POST['polygon'];
    else
        $polygon = NULL;
    echo CJSON::encode(array('polygon'=>$polygon));
} 
```

要访问返回的数据，您可以在 AJAX 中使用回调，例如：

```
 <?php 
        echo CHtml::ajax(array(
            'url'=>array('site/test'),
            'data'=>array('polygon'=>'data'),
            'type'=>'POST',
            'dataType': 'json',
            'success' : "function(data) { console.log(data.polygon) }",
        ));
    ?> 
```

这会将多边形的值记录到控制台。. . 修改成功函数以将其输出到更有用的地方。

您当前的方法听起来好像失败了，因为您是`site/test`通过地址栏直接在浏览器中访问的，这意味着 $_POST 不会有任何内容。

# javascript - 使用中介发布/订阅模式时路由主干应用程序

> ID：11749967
> 
> 赞同：1
> 
> 时间：2012-07-31T22:29:52.210
> 
> 标签：javascript, backbone.js, publish-subscribe, router, mediator

我正在主干中构建一个应用程序，结合来自[https://github.com/addyosmani/backbone-aura/](https://github.com/addyosmani/backbone-aura/)的模块化和外观/中介 pub/sub 模式，以在模块之间发送消息以保持干净的代码库。

在aura`Router`的整个应用程序示例中，我发现只有自述文件描述了路由器作为模块本身的一部分的理想用途：“在 Backbone.js 术语中，小部件由模型、视图、集合和路由器以及任何小部件呈现所需的模板。”

所以我尝试了多种方案来实现一个可扩展的路由系统（可扩展的意思是模块可以指定自己的子路由），包括一个接受消息`set-route`来设置路由的路由模块，以及监听`route`消息的模块。我还为每个模块使用了一个子路由器。问题似乎是在初始页面加载时，由于消息传递的“异步”性质，路由及其回调可能未在全局路由器解析 URL 时定义。您可以想象我可能需要在启动路由器模块之前对所有消息进行排队。

我想实现一些干净的东西，这是有道理的。我还在考虑可能首先解析所有小部件的所有路由，然后实例化路由器，这使得路由器模块成为一种特殊情况，因此不应该成为模块的一部分。

路由器应该是一个使用消息的模块，还是应该是一个扩展，或者是模块可以访问的全局架构的一些更高阶的部分？

我知道这是一个加载的问题，在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:22:26.890

关于这个问题有很多争论，我认为很多争论源于我认为路由器正式被称为控制器的混淆。到去年年底我开始使用 Backbone 时，已经做出了改变，但我相信很多人已经围绕路由器作为控制器构建了应用程序。我从来不同意这一点。对我来说——依赖于早在 Backbone 创建之前就构建了类似于 Backbone 的专有 MVC 引擎的经验——路由器只是一个历史管理器组件。

因此，要解决您在决定如何最好地实现路由器方面的特定问题，请考虑以下几点：

1.  首先，路由器不是应用程序的必要组件。您可以在没有路由器的情况下继续导航到应用程序的各个页面或屏幕。
2.  路由器不是控制器，因为它的主要功能是管理历史。尽管您可以在路由器中嵌入应用程序业务逻辑，但我总是发现这会混淆路由器的实际功能。
3.  通过使路由器成为应用程序的组件，您可以创建更好的关注点分离，并且可以拥有更有效的发布/订阅类型的安排。

下面是我在我的应用程序中使用的路由器模块的代码，它遵循调解器、发布/订阅模式：

```
/**
 * The idea behind this component is simply to relegate Backbone.Router to
 * doing what it does best: History Management. All it is responsible for
 * is two things:
 *
 * 1\. Update the URL if router.navigate is invoked
 * 2\. Trigger a routeChanged event if the URL was updated either by a bookmark or
 *    typed in by a user.
 */
define(function () {
    return Backbone.Router.extend({
        initialize : function (map) {
            this._reversedMap = this.reverseModuleMap(map);
        },
        routes:{
            '*actions':'notify'
        },
        notify:function (actions) {
            var args = arguments;
            this.trigger("routeChanged", {command:actions});
        },
        /**
         * Override Backbone.Router.navigate. Default is to pass a router fragment, but for
         * our uses, we'll translate the "route" into a module mapping so that the controller
         * will know which module to display.
         * @param param
         * @param options
         */
        navigate:function (param, options) {
            //console.log('navigate', param);
            if(!param.suppressNavigate && param.actionCommand)  {
                Backbone.Router.prototype.navigate.call(this, this._reversedMap[param.actionCommand]);
            } else if(!param.actionCommand) {
                Backbone.Router.prototype.navigate.call(this, param, options);
            }
        },
        /**
         * this function simply reverses the key and value of the "map"
          * @param map
         */
        reverseModuleMap:function (map) {
            var newMap = {};
            _.each(map, function (value, key) {
                newMap[value] = key;
            });
            // reversed key and value
            return newMap;
        }
    });
}); 
```

然后，当我实例化组件时，我向它传递一个映射，以便我的控制器知道要导航到哪个模块：

```
this._router = new Router({
    _default: 'moduleA',
    sites : 'moduleA',
    apps : 'moduleB'
});
this._router.on('routeChanged', this.handleRouteChange, this); 
```

我发现它最重要的一点是它使代码保持美观和简单，并允许我专注于控制器中的业务逻辑。

# sql - 从每个组中选择随机值，SQL

> ID：11749969
> 
> 赞同：2
> 
> 时间：2012-07-31T22:30:02.600
> 
> 标签：sql, sql-server

我有一个项目，通过它我正在创建一个由数据库提供支持的游戏。

数据库有这样输入的数据：

(ID, 姓名) || (1, PhotoID),(1,PhotoID),(1,PhotoID),(2,PhotoID),(2,PhotoID) 等等。有成千上万的条目。

这是我当前的 SQL 语句：

```
$sql = "SELECT TOP 8 * FROM Image WHERE Hidden = '0' ORDER BY NEWID()"; 
```

但这也可以产生具有匹配 ID 的结果，我需要让每个结果都有一个唯一的 ID（即我需要每个组的一个结果）。

如何更改我的查询以从每个组中获取一个结果？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:42:29.927

由于`ORDER BY NEWID()`无论如何都会导致 tablescan，您可以使用 row_number() 在组中首先隔离：

```
; with randomizer as (
  select id,
         name,
         row_number() over (partition by id
                            order by newid()) rn
    from Image
   where hidden = 0
)
select top 8
       id,
       name
  from randomizer
 where rn = 1
-- Added by mellamokb's suggestion to allow groups to be randomized
order by newid() 
```

感谢 mellamokb 的[Sql Fiddle 游乐场。](http://www.sqlfiddle.com/#!3/657ad/15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:39:43.487

看起来这可能有效，但我不能保证性能：

```
SELECT TOP 8 ID,
  (select top 1 name from image i2
   where i2.id = i1.id order by newid())
FROM Image i1
WHERE hidden = '0'
group by ID
ORDER BY NEWID(); 
```

演示：[http ://www.sqlfiddle.com/#!3/657ad/6](http://www.sqlfiddle.com/#!3/657ad/6)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T23:13:39.900

如果您在`ID`列上有索引并希望利用索引并避免全表扫描，请先对键值进行随机化：

```
WITH IDs AS
(
  SELECT DISTINCT ID
  FROM Image
  WHERE Hidden = '0'
),
SequencedIDs AS
(
  SELECT ID, ROW_NUMBER() OVER (ORDER BY NEWID()) AS Seq
  FROM IDs
),
ImageGroups AS
(
  SELECT i.*, ROW_NUMBER() OVER (PARTITION BY i.ID ORDER BY NEWID()) Seq
  FROM SequencedIDs s
  INNER JOIN Image i
    ON i.ID = s.ID
  WHERE s.Seq < 8
  AND i.Hidden = '0'
)
SELECT *
FROM ImageGroups
WHERE Seq = 1 
```

这应该会大大降低表扫描方法的成本，尽管我没有足够大的模式来测试 - 所以尝试在 SSMS 中运行一些统计数据并确保`ID`实际索引以使其有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T22:32:53.693

```
select * from (select * from photos order by rand()) as _SUB group by _SUB.id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T22:39:38.510

```
 select ID, Name from (select ID, Name, row_number() over 
 (partition by ID, Name order by ID) as ranker from Image where Hidden = 0 ) Z where ranker = 1
 order by newID() 
```

# math - PHP脚本的数学公式

> ID：11749971
> 
> 赞同：0
> 
> 时间：2012-07-31T22:30:08.203
> 
> 标签：math, logic

我不擅长数学，我需要编写一个脚本，上面写着“每 3 级，此事件就会触发”（级别是游戏中的角色级别）。

有人可以帮我解决这个问题吗？谢谢！您不必将其转换为代码，我可以只使用公式（或者它最容易解释！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:30:58.577

使用模运算符，它返回除法后的余数：

```
if (level % 3 == 0) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:33:17.050

希望我理解正确，你可以这样做：

```
If (level % 3 == 0) {
    Do your thing
} 
```

# android - 以较低的 SDK 为目标时较高的 API 调用

> ID：11749972
> 
> 赞同：11
> 
> 时间：2012-07-31T22:30:16.437
> 
> 标签：android

我的应用程序支持 minSdkVersion=10 和目标 16。如果特定设备支持，我想调用特定于 API 级别 >= 14 的方法。我可以在运行时检查正在运行的操作系统版本以及是否调用更高的 API 方法，但是当我指定最小 SDK 版本时，仅存在于高于 10 的版本中的方法不可见。有没有办法使用比 minSdkVersion 更高的 API 方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T22:35:52.253

您可以使用以下命令测试设备的 API：

```
if(android.os.Build.VERSION.SDK_INT >= 14) {
    // Do something fancy
}
else {
    // Do something regular
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T15:43:47.753

除了检查当前版本之外，您还应该添加`@SuppressLint("NewApi")`到您的方法中，以便编译器对其大喊大叫。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T19:10:04.973

来自更高 API 的方法是不可见和不可访问的，因为项目的目标 SDK 低于将要使用的方法的 SDK。例如：如果您想使用 API 14 中的方法，Android 项目目标 SDK 至少应为 14 甚至更好（当前为 16）。这很明显，但我错过了。之后，Sam 引用的解决方案正在使用中。

# java - 在 Solaris (SunOS 5.10 sparc) 上启动 cassandra 失败并出现 SnappyError

> ID：11749974
> 
> 赞同：0
> 
> 时间：2012-07-31T22:30:22.473
> 
> 标签：java, exception, logging, cassandra, native

我已经下载了 cassandra 的 DataStax 构建（dsc...-bin.tar.gz）并正确解压缩到 Solaris Server 机器上。根据[http://wiki.apache.org/cassandra/GettingStarted/](http://wiki.apache.org/cassandra/GettingStarted/)编辑配置目录后，我第一次尝试使用 ~/cassandra/bin 中的“./cassandra -f”启动 cassandra，但遇到异常导致堆栈跟踪的启动。

日志文件如下。

我在 Windows 机器上安装了相同版本的 cassandra（用于测试），但从未遇到过此类错误。如果 Cassandra 兽医可以帮助我，我将不胜感激。

系统日志：

```
>  INFO [main] 2012-07-31 15:02:02,608 AbstractCassandraDaemon.java (line 100) Logging initialized
 INFO [main] 2012-07-31 15:02:02,636 AbstractCassandraDaemon.java (line 121) JVM vendor/version: Java HotSpot(TM) Server VM/1.6.0_04
 INFO [main] 2012-07-31 15:02:02,638 AbstractCassandraDaemon.java (line 122) Heap size: 2091843584/2093940736
 INFO [main] 2012-07-31 15:02:02,640 AbstractCassandraDaemon.java (line 123) Classpath: ./../conf:./../build/classes/main:./../build/classes/thrift:./../lib/antlr-3.2.jar:./../lib/apache-cassandra-1.1.2.jar:./../lib/apache-cassandra-clientutil-1.1.2.jar:./../lib/apache-cassandra-thrift-1.1.2.jar:./../lib/avro-1.4.0-fixes.jar:./../lib/avro-1.4.0-sources-fixes.jar:./../lib/commons-cli-1.1.jar:./../lib/commons-codec-1.2.jar:./../lib/commons-lang-2.4.jar:./../lib/compress-lzf-0.8.4.jar:./../lib/concurrentlinkedhashmap-lru-1.3.jar:./../lib/guava-r08.jar:./../lib/high-scale-lib-1.1.2.jar:./../lib/jackson-core-asl-1.9.2.jar:./../lib/jackson-mapper-asl-1.9.2.jar:./../lib/jamm-0.2.5.jar:./../lib/jline-0.9.94.jar:./../lib/json-simple-1.1.jar:./../lib/libthrift-0.7.0.jar:./../lib/log4j-1.2.16.jar:./../lib/metrics-core-2.0.3.jar:./../lib/servlet-api-2.5-20081211.jar:./../lib/slf4j-api-1.6.1.jar:./../lib/slf4j-log4j12-1.6.1.jar:./../lib/snakeyaml-1.6.jar:./../lib/snappy-java-1.0.4.1.jar:./../lib/snaptree-0.1.jar:./../lib/jamm-0.2.5.jar
 INFO [main] 2012-07-31 15:02:02,649 CLibrary.java (line 62) JNA not found. Native methods will be disabled.
 INFO [main] 2012-07-31 15:02:02,708 DatabaseDescriptor.java (line 127) Loading settings from file:/opt/james/cassandra/conf/cassandra.yaml
 INFO [main] 2012-07-31 15:02:03,502 DatabaseDescriptor.java (line 180) DiskAccessMode 'auto' determined to be standard, indexAccessMode is standard
 INFO [main] 2012-07-31 15:02:04,734 DatabaseDescriptor.java (line 247) Global memtable threshold is enabled at 665MB
ERROR [main] 2012-07-31 15:02:05,385 AbstractCassandraDaemon.java (line 370) Exception encountered during startup
org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] null
    at org.xerial.snappy.SnappyLoader.load(SnappyLoader.java:229)
    at org.xerial.snappy.Snappy.<clinit>(Snappy.java:44)
    at org.apache.cassandra.io.compress.SnappyCompressor.create(SnappyCompressor.java:45)
    at org.apache.cassandra.io.compress.SnappyCompressor.isAvailable(SnappyCompressor.java:55)
    at org.apache.cassandra.io.compress.SnappyCompressor.<clinit>(SnappyCompressor.java:37)
    at org.apache.cassandra.config.CFMetaData.<clinit>(CFMetaData.java:76)
    at org.apache.cassandra.config.KSMetaData.systemKeyspace(KSMetaData.java:79)
    at org.apache.cassandra.config.DatabaseDescriptor.loadYaml(DatabaseDescriptor.java:439)
    at org.apache.cassandra.config.DatabaseDescriptor.<clinit>(DatabaseDescriptor.java:118)
    at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:126)
    at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:353)
    at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:106) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:03:49.947

问题出在 cassandra 依赖库中。显然，Cassandra 1.1.2（我正在使用）依赖于 Snappy Compression 的本机方法。Cassandra 1.1.0 不依赖本机方法，因此可以毫无问题地工作！

# c++ - MSBuild、未解决的外部和 Visual Studio 2005

> ID：11749975
> 
> 赞同：0
> 
> 时间：2012-07-31T22:30:30.790
> 
> 标签：c++, msbuild, visual-studio-2005

我正在尝试使用 msbuild 构建 Visual Studio 2005 解决方案。我正在使用的批处理文件是：

```
@ECHO OFF

SETLOCAL

set VSDIR=C:\Program Files (x86)\Microsoft Visual Studio 8
set VCVARSALL=%VSDIR%\VC\vcvarsall.bat

call "%VCVARSALL%" x86 && ^
msbuild path\to\my.sln ^
    /v:normal ^
    /p:Configuration=Release ^
    /p:Platform=Win32 ^
    /t:SomeProject:Rebuild

ENDLOCAL 
```

现在，SomeProject 依赖于 SomeOtherProject，这一切都很好，除了我在使用 msbuild 构建时遇到了未解决的外部问题：

```
SomeObjFile.obj : error LNK2001: unresolved external symbol "private: static class SomeClass<class C> C::s_c" (?s_c@C@@0V?$SomeClass@VC@@@@A) 
```

问题是当我在 Visual Studio 2005 中右键单击该项目并选择“重建”时，我没有遇到任何未解决的外部问题。

有谁知道我在上面调用 msbuild 时可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:47:41.360

找出了 msbuild 版本的问题：缺少项目引用。要解决此问题，请右键单击 VS 中的项目并添加对丢失库的引用。保存所有项目，Bob 就是你的叔叔。

# ruby-on-rails - 未知属性：密码

> ID：11749976
> 
> 赞同：1
> 
> 时间：2012-07-31T22:30:40.230
> 
> 标签：ruby-on-rails, ruby, controller

登录应用程序时出现错误“未知属性：密码”。它似乎没有保存密码。我是rails新手，有人可以帮我吗？

这是我在运行应用程序时收到的消息。这是模型和控制文件中的代码。用户控制器中的 ActiveRecord::UnknownAttributeError#create

## 未知属性：密码

我正在尝试创建一个登录名/密码网络应用程序。运行应用程序时出现以下错误。未定义的方法`encrypt_pasword' app/models/user.rb:32:in`密码='app/controllers/users_controller.rb:43:in `new' app/controllers/users_controller.rb:43:in`create'

这是控制文件中的代码。

```
require 'digest/sha2'
class User < ActiveRecord::Base
  include ActiveModel::MassAssignmentSecurity

  attr_accessible :name, :password, :password_confirmation, :hashed_password, :salt
  attr_accessor :name
  attr_accessor :salt

  validates :name, :presence => true, :uniqueness => true
  validates :password, :confirmation => true
  attr_accessor :password_confirmation
  attr_reader  :password

  validate :password_must_be_present

  def User.authenticate(name, password)
    if user = find_by_name(name)
      if user.hashed_password == encrypt_password(password, user.salt)
        user
      end
    end
  end

  def User.encrypt_password(password, salt)
    Digest::SHA2.hexdigest(password + "wibble" + salt)
  end
  # 'password' is a virtual attribute
  def password=(password)
    @password =password
    if password.present?
      generate_salt
      self.hashed_password =self.class.encrypt_password(password, salt)
    end
  end
  private

  def password_must_be_present
    errors.add(:password, "Missing password") unless hashed_password.present?
  end

  def generate_salt
    self.salt = self.object_id.to_s + rand.to_s
  end

end 
```

这是我的模型文件

```
require 'digest/sha2'
class User < ActiveRecord::Base
  include ActiveModel::MassAssignmentSecurity

  attr_accessible :name, :password, :password_confirmation, :hashed_password, :salt
  attr_accessor :name
  attr_accessor :salt
  attr_accessor :password

  validates :name, :presence => true, :uniqueness => true
  validates :password, :confirmation => true
  attr_accessor :password_confirmation
  attr_reader  :password

  validate :password_must_be_present

     def encrypt_password
         self.encrypted_password 
    end

       def User.authenticate(name, password)
    if user = find_by_name(name)
      if user.hashed_password == encrypt_password(password, user.salt)
        user
      end
    end
  end

  def User.encrypt_password(password, salt)
    Digest::SHA2.hexdigest(password + "wibble" + salt)
  end
  private 
    def encrypt_password
      self.salt = make_salt if new_record?
      self.encrypted_password = encrypt(password)
    end

  # 'password' is a virtual attribute
  def password=(password)
    @password =password
    if password.present?
      generate_salt
      self.hashed_password =self.class.encrypt_password(password, salt)
    end
  end

  private

  def password_must_be_present
    errors.add(:password, "Missing password") unless hashed_password.present?
  end

  def generate_salt
    self.salt = self.object_id.to_s + rand.to_s
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:42:54.827

encrypt_pasword 缺少一个 s。

# r - 为什么 glm.nb 仅在非常特定的输入上抛出“缺失值”错误

> ID：11749977
> 
> 赞同：16
> 
> 时间：2012-07-31T22:30:40.977
> 
> 标签：r, statistics

[glm.nb](http://stat.ethz.ch/R-manual/R-patched/library/MASS/html/glm.nb.html)在某些输入上引发异常错误。虽然有多种值会导致此错误，但即使是*非常*轻微地更改输入也可以防止错误发生。

一个可重现的例子：

```
set.seed(11)
pop <- rnbinom(n=1000,size=1,mu=0.05)
glm.nb(pop~1,maxit=1000) 
```

运行此代码会引发错误：

```
Error in while ((it <- it + 1) < limit && abs(del) > eps) { : 
  missing value where TRUE/FALSE needed 
```

起初我认为这与算法不收敛有关。然而，我惊讶地发现即使是*非常*轻微地改变输入也可以防止错误。例如：

```
pop[1000] <- pop[1000] + 1
glm.nb(pop~1,maxit=1000) 
```

我发现它会在 1 到 500 之间的 19.4% 的种子上引发此错误：

```
fit.with.seed = function(s) {
    set.seed(s)
    pop <- rnbinom(n=1000, size=1, mu=0.05)
    m = glm.nb(pop~1, maxit=1000)
}

errors = sapply(1:500, function(s) {
    is.null(tryCatch(fit.with.seed(s), error=function(e) NULL))
})

mean(errors) 
```

我发现在任何地方都只[提到](https://stat.ethz.ch/pipermail/r-help/2004-November/060566.html)了这个错误，在一个没有响应的线程上。

什么可能导致此错误，以及如何修复它（除了每次`glm.nb`引发错误时随机排列输入？）

ETA：设置`control=glm.control(maxit=200,trace = 3)`发现`theta.ml`算法通过变得非常大而中断，然后变为`-Inf`，然后变为`NaN`：

```
theta.ml: iter67 theta =5.77203e+15
theta.ml: iter68 theta =5.28327e+15
theta.ml: iter69 theta =1.41103e+16
theta.ml: iter70 theta =-Inf
theta.ml: iter71 theta =NaN 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T02:20:48.127

这有点粗糙，但在过去，我已经能够`glm.nb`通过采用直接最大似然估计来解决问题（即没有像 中使用的聪明的迭代估计算法`glm.nb`）

一些探索/分析表明 theta 参数的 MLE 实际上是无限的。我决定把它放在反比例上，这样我就可以把一个边界放在 0 处（一个更高级的版本会设置一个对数似然函数，它会在 theta=0 处恢复为泊松，但这会取消尝试想出一个快速的罐头解决方案）。

对于上面给出的两个不好的例子，这工作得相当好，尽管它确实警告参数拟合在边界上......

```
library(bbmle)
m1 <- mle2(Y~dnbinom(mu=exp(logmu),size=1/invk),
           data=d1,
           parameters=list(logmu~X1+X2+offset(X3)),
           start=list(logmu=0,invk=1),
           method="L-BFGS-B",
           lower=c(rep(-Inf,12),1e-8)) 
```

第二个例子实际上更有趣，因为它在数值上证明了 theta 的 MLE 本质上是无限的，即使我们有一个完全由负二项式偏差生成的大数据集（或者我对某些事情感到困惑......）

```
set.seed(11);pop <- rnbinom(n=1000,size=1,mu=0.05);glm.nb(pop~1,maxit=1000)
m2 <- mle2(pop~dnbinom(mu=exp(logmu),size=1/invk),
           data=data.frame(pop),
           start=list(logmu=0,invk=1),
           method="L-BFGS-B",
           lower=c(-Inf,1e-8)) 
```

# c - 变量“输入”周围的堆栈已损坏

> ID：11749983
> 
> 赞同：1
> 
> 时间：2012-07-31T22:31:18.870
> 
> 标签：c

我刚开始使用 C 语言，就遇到了这个错误。我试图在网上查找，但其他线程包含我不熟悉的 ARRAY。

```
#include<stdio.h>
int main(void){

    char input;
    printf("ASCII testing\n");
    scanf( "%d", &input); //the error occurs here but would like to know the solution

    printf("answer is : %c\n" , input);

    system("pause");
    return 0;
} 
```

“运行时检查失败 #2 - 变量‘输入’周围的堆栈已损坏。”

简单的指出将不胜感激

//已编辑

好吧，我想输入值“66”，结果将是 B。 scanf("%c , &input) 接受来自键盘的 1 次击键，所以这不是我想要的。但是，谢谢你的回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T22:33:07.717

**问题**

`%d`是整数输入的格式说明符，导致编译器假定 &input 指向整数而不是字符。

```
scanf( "%d", &input); 
```

应该

```
scanf( "%c", &input); 
```

**为什么这会破坏堆栈**

堆栈损坏的原因是输入是在堆栈上分配的，而 scanf 假设它占用 4 个字节（在 32 位平台上）而不是实际分配在堆栈上的 1 个字节。结果，堆栈上的其他内容（其他变量，返回地址，...）被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:32:42.210

中的`%d`格式说明符`scanf()`需要指向`int`变量的指针，而不是指向`char`. 尝试：

```
int input;
scanf( "%d", &input); 
```

# python - Tornado/Python 错误无法理解

> ID：11749987
> 
> 赞同：1
> 
> 时间：2012-07-31T22:31:44.410
> 
> 标签：python, if-statement, tornado

我得到了一段简单的代码来玩弄日期的加法/减法/

```
def calculate(self, datemonthyear, add): #not handled the condition for years between 00 and 09.
        year = datemonthyear % 100
        datemonthyear = datemonthyear / 100
        date = datemonthyear % 100
        month = datemonthyear / 100
        leapyear = (year % 4 == 0 or year==0)
        print month
        print date
        print year
        print ((leapyear and date + add > 29) or (not(leapyear) and date + add > 28))
        if (month == 2 and ((leapyear and date + add > 29) or (not(leapyear) and date + add > 28))):
            print "1"
            return "301" + str(year)
        elif month == 3 and leapyear and date + add < 1:
            print "2"
            return "229" + str(year)
        elif month == 3 and not(leapyear) and date + add < 1:
            print "3"
            return "228" + str(year)
        elif month in [1,3,5,7,8,10,12]:
            print "4"
            if month == 12 and date + add > 31:
                return "101" + str((year + 1)%100)
            elif month == 1 and date + add < 1:
                return "1231" + str((year - 1)%100)
            elif month == 8 and date + add < 1:
                return "731" + str(year)
            elif date + add > 31:
                return str(month + 1) + "01" + str(year)
            elif date + add < 1:
                return str(month - 1) + "30" + str(year)
        elif month in [2,4,6,9,11]:
            print "5"
            if date + add > 30:
                return str(month + 1) + "01" + str(year)
            elif date + add < 1:
                return str (month -1) + "31" + str(year)
        print "Has to come here"
        return str(month) + str(date + add) + str(year) 
```

当我打电话时

```
print "22820 " + self.calculate(22820, 1) 
```

它抛出了这个错误

```
E 120731 15:27:04 web:1064] Uncaught exception GET / (::1)
    HTTPRequest(protocol='http', host='localhost:8881', method='GET', uri='/', version='HTTP/1.1', remote_ip='::1', body='', headers={'Accept-Language': 'en-US,en;q=0.8', 'Accept-Encoding': 'gzip,deflate,sdch', 'Host': 'localhost:8881', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19', 'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', 'Connection': 'keep-alive', 'Cookie': '_xsrf=2328f244ddf94402884f39490aeed347', 'Cache-Control': 'max-age=0'})
    Traceback (most recent call last):
      File "/Library/Python/2.7/site-packages/tornado-2.3-py2.7.egg/tornado/web.py", line 1021, in _execute
        getattr(self, self.request.method.lower())(*args, **kwargs)
      File "trends.py", line 33, in get
        print "22820 " + self.calculate(22820, 1)
    TypeError: cannot concatenate 'str' and 'NoneType' objects 
```

这基本上意味着计算返回 None 但我无法调试它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:48:07.187

一些意见太长，无法发表评论：

我只是想确认一下这个说法：

`print "22820 " + self.calculate(22820, 1)`

需要从您`calculate`定义的同一类的方法中调用，并且调用方法需要从该类的实例中调用。

`not`不是函数，所以`not(foo)`没有任何意义——除非你有自己的函数版本`not`，在这种情况下你应该重命名它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:25:59.990

快速回答是，当`month == 0`您错过所有 if 语句并最终以 is value 的函数返回默认情况时`None`。您不能将字符串与 None 值连接。

# php - 使用 Zend 进行隐私控制

> ID：11749990
> 
> 赞同：0
> 
> 时间：2012-07-31T22:32:05.643
> 
> 标签：php, zend-framework

我正在使用 Zend 制作一个社交网站。该网站允许用户成为朋友并访问彼此的个人资料和博客。我还希望用户能够控制他们的隐私，这可以采用“仅限朋友”和“公共”参数。我查看了 Zend_Acl 但它似乎只能处理单个用户的可访问性而不是用户有关系。关于最好的方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:52:12.840

出于您的目的，如果您使用`Zend_Acl`，则应该查看[assertions](http://framework.zend.com/manual/en/zend.acl.advanced.html#zend.acl.advanced.assertions)。

鉴于应用程序中用户之间关系的复杂性，您将查询的大多数访问规则看起来都非常动态，因此它们将在很大程度上依赖于可以使用更复杂逻辑来确定可访问性的断言。

你应该能够完成你想要使用的东西`Zend_Acl`。

您可以像这样设置 ACL 规则：

```
$acl->allow('user', 'profile', 'view', new My_Acl_Assertion_UsersAreFriends()); 
```

ACL 断言本身：

```
<?php

class My_Acl_Assertion_UsersAreFriends implements Zend_Acl_Assert_Interface
{
    public function assert(Zend_Acl $acl,
                           Zend_Acl_Role_Interface $role = null,
                           Zend_Acl_Resource_Interface $resource = null,
                           $privilege = null)
    {
        return $this->_usersAreFriends();
    }

    protected function _usersAreFriends()
    {
        // get UserID of current logged in user
        // assumes Zend_Auth has stored a User object of the logged in user
        $user   = Zend_Auth::getInstance()->getStorage();
        $userId = $user->getId();

        // get the ID of the user profile they are trying to view
        // assume you can pull it from the URL
        // or your controller or a plugin can set this value another way
        $userToView = $this->getRequest()->getParam('id', null);

        // call your function that checks the database for the friendship
        $usersAreFriends = usersAreFriends($userId, $userToView);

        return $usersAreFriends;
    }
} 
```

现在有了这个断言，如果 2 个用户 ID 不是朋友，访问将被拒绝。

检查它像：

```
if ($acl->isAllowed('user', 'profile', 'view')) {
    // This will use the UsersAreFriends assertion

    // they can view profile
} else {
    // sorry, friend this person to view their profile
} 
```

希望有帮助。

# php - PHP主题查看和回复脚本

> ID：11749991
> 
> 赞同：0
> 
> 时间：2012-07-31T22:32:09.073
> 
> 标签：php

我在一个小板/论坛上工作。我已完成主题发布；它在数据库和所有爵士乐中都是可见的。现在我正在检索主题列表，以便当您单击主题时可以查看它。这很好，除了当我点击它时页面变为空白并且没有显示任何内容。我知道问题是我无法获取我点击的帖子的 ID，因为它位于带有 while 循环的 if-else 语句中。这是我现在的代码。

```
<?php
  require('init.php');

  $get_threads = mysql_query("SELECT * FROM GOT ORDER BY time");
  if (!isset($_GET['view_thread'])) {
    $get_threads = mysql_query("SELECT * FROM GOT ORDER BY time");
    while ($select_threads = mysql_fetch_assoc($get_threads)) {
      $title = $select_threads['title'];
      $time = $select_threads['time'];
      $user = $select_threads['user'];
      $id = $select_threads['id'];
      $form = '<center>
               <form method="get" action="">
               <input type="submit" name="view_thread" id="view_thread" value="'.$title.'" />
               <input type="hidden" name="thread_id" id="thread_id" value="'.$id.'" />
               </form>
               </center>';
      echo '<div id="post_info">'.$form.'<hr>Posted by: <b>'.$user.'</b> '.$time.'</div>';
    }
  } else {
    $get_posts = mysql_query("SELECT * FROM GOT WHERE id='$id'");
    $select_posts = mysql_fetch_assoc($get_posts);
    $content = $select_posts['content'];
    echo $content;
  }
?> 
```

我需要得到它，`$id`这样我才能获取帖子，然后获取数据库中的所有回复。我是 php 新手，所以我可能遗漏了一些东西。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T22:37:46.860

首先：你的参数被命名为“thread_id”，所以你的查询应该是

```
$get_posts = mysql_query("SELECT * FROM GOT WHERE id='$thread_id'"); 
```

但我强烈建议

1.  去 POST 而不是 GET
2.  使用 mysql_real_escape 避免 SQL 注入

# vb.net - VB.Net 反向数据表顺序

> ID：11749992
> 
> 赞同：0
> 
> 时间：2012-07-31T22:32:11.930
> 
> 标签：vb.net, sorting, datatable, rows, reverse

查看 DataTable 顺序的最简单方法是什么？

```
 ' Clean Table
    dtRows.Columns.Add("date", GetType(DateTime))
    For Each row In dtRows.Rows
        row("date") = DateTime.Parse(row(0).ToString.Replace("""", ""))
    Next

    ' Remove Old Col
    dtRows.Columns.Remove("Column1")

    ' Sort
    dtRows.DefaultView.Sort = "date ASC" 
```

没有为我做任何事情，所以我宁愿让一个循环反转它。

我尝试使用 DateTime 类型重新创建一个新列并删除旧列并按此排序，但它对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:15:44.797

查看已排序的 DataTable 的最简单方法是使用`DataView`.

```
 Dim dv As DataView = dtRows.DefaultView 
```

如果您在创建 DataView 之前设置它，`dtRows.DefaultView.Sort = "date ASC"`它将设置默认排序。要扫描`dataview`，您将使用以下命令：

```
For Each row As DataRowView In dv
  'Do something
Next 
```

# .net - 有谁知道支持 .NET 并且可以通过 system.net 和/或非托管 dll 打开 TCP 和 UDP 套接字的 PaaS 提供程序？

> ID：11749998
> 
> 赞同：1
> 
> 时间：2012-07-31T22:32:53.257
> 
> 标签：.net, sockets, tcp, websocket, paas

正如问题所暗示的那样，我搜索了几个供应商无济于事。这一切似乎都只支持 ASP.NET。连 IronFoundry 也只支持 ASP.NET？

# api - CapitolOne 奖励计划或 AMEX 奖励积分是否有 API？

> ID：11749999
> 
> 赞同：0
> 
> 时间：2012-07-31T22:32:55.593
> 
> 标签：api, credit-card, payment-processing, reward

是否有程序化方式来访问多个信用卡和航空公司的奖励计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:37:21.647

是的。实现起来并不容易，但是 Yodlee API 允许您连接到世界上几乎所有的金融数据源：[http ://www.yodlee.com/solutions-developer.html](http://www.yodlee.com/solutions-developer.html)